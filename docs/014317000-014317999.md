# StackOverflow 问答 14317000-14317999

# c# - 当我按 TAB 时，未选择下一个文本框

> ID：14317003
> 
> 赞同：1
> 
> 时间：2013-01-14T10:47:36.993
> 
> 标签：c#

我有一些文本框，我安排了 TabIndexes BUT。当我从`textbox1`to选项卡时`textbox2`，我希望选择文本`textbox2`。我试过了：

```
if (e.KeyCode == Keys.Tab)
{
   textbox2.SelectAll();
} 
```

但它不起作用。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T10:51:35.057

焦点事件上的[TextBox.SelectAll()](http://msdn.microsoft.com/en-us/library/system.windows.forms.textboxbase.selectall%28v=vs.71%29.aspx)怎么样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T10:51:35.497

TextBox上有一个名为Enter的事件，在此事件中选择从开始（0）到结束（文本长度）的文本

```
private void textBox2_Enter(object sender, EventArgs e)
{
    textBox2.SelectionStart = 0;
    textBox2.SelectionLength = textBox2.Text.Length;
    //or also
    //textBox2.SelectAll()
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T10:53:31.000

在 Windows 窗体和 WPF 中：

```
 textbox.SelectionStart = 0; textbox.SelectionLength =
 textbox.Text.Length; 
```

在 ASP.Net 中：

```
textBox.Attributes.Add("onfocus","this.select();"); 
```

更多详情请[点击这里](https://stackoverflow.com/questions/2151410/c-sharp-auto-highlight-text-in-a-textbox-control)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T10:51:49.103

当文本框获得焦点时，您应该选择文本。

在 WPF 中，您应该对[`GotKeyboardFocus`](http://msdn.microsoft.com/en-us/library/system.windows.uielement.gotkeyboardfocus.aspx)事件做出反应。
在 Winforms 中，您应该对[`GotFocus`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.gotfocus.aspx)事件做出反应。

在这两种情况下，要执行的代码都不`textbox2.SelectAll();`需要检查 tab 键。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-20T09:34:53.533

我在 Windows Forms 和 vb.net 中遇到了同样的问题（它可能很容易转换为 c#），我通过以下方式解决了它：

**1\. 将表单 KeyPreview 属性设置为 true。**

> 获取或设置一个值，该值指示在将事件传递给具有焦点的控件之前窗体是否将接收键事件。

这允许您只为表单而不是为每个文本框处理键事件。显然，如果您只有一个文本框，这将不会为您节省任何工作。

**2.处理表单KeyUp事件**

看起来 KeyDown 和 KeyPressed 事件不会为 Tab 键触发，但出乎意料的是，KeyUp 确实...

我留下我在 KeyUp 事件中使用的代码：

```
Private Sub MyForm_KeyUp(ByVal sender As System.Object, ByVal e As System.Windows.Forms.KeyEventArgs) Handles MyBase.KeyUp
    // Do nothing if key other than TAB is pressed
    If Not e.KeyCode = Keys.Tab Then Exit Sub

    // Search for the control that currently has the focus
    // As we are only interested in doing something when the focus is in textboxes, we do not even search the focus for other controls
    Dim focused_textbox As TextBox = Nothing
    For Each p As TextBox In GetAllTextBoxes(Me) //GetAllTextBoxes is a function that gets a list with all the textboxes for the form passed as a parameter.
        If p.Focused Then
            focused_textbox = p
            Exit For
        End If
    Next

    // If no textbox has the focus, no actions are required.
    If focused_textbox Is Nothing Then Exit Sub

    // If the textbox with the focus does not have any content, nothing is to be selected....
    If String.IsNullOrEmpty(focused_textbox.Text) Then Exit Sub

    // select all the textbox contents
    focused_textbox.SelectAll()
    /* I've also seen arroun the following sollution, instead of the 'focused_textbox.SelectAll()', but I have not tried it, as SelectAll worked perfect for me
    focused_textbox.SelectionStart = 0
    focused_textbox.SelectionLength = focused_textbox.Text.Length
    */
End Sub 
```

我还给你我的“GetAllTextBoxes”函数，它可能不是最有效的方法，但它确实有效。

```
Function GetAllTextBoxes(ByVal control_or_form As Object) As List(Of TextBox)
    Dim l As List(Of TextBox) = New List(Of TextBox)

    // Fill control_collection with child controls of the control_or_form 
    Dim control_collection As List(Of Control) = New List(Of Control)
    If TypeOf control_or_form Is Windows.Forms.Form Then
        Dim form As Windows.Forms.Form = CType(control_or_form, Windows.Forms.Form)
        If form.HasChildren Then
            For Each c As Control In form.Controls
                control_collection.Add(c)
            Next
        Else
            Return l
        End If
    ElseIf TypeOf control_or_form Is Windows.Forms.Control Then
        Dim control As Windows.Forms.Control = CType(control_or_form, Windows.Forms.Control)
        If control.HasChildren Then
            For Each c As Control In control.Controls
                control_collection.Add(c)
            Next
        Else
            Return l
        End If
    Else
        Return l
    End If

   // At this point if control_or_form is not a control or a form, or if it has no children, the function had already returned an empty list meaning 'this object has no child textboxes'
   // Now, for all the child controls, store them into the list if they are TextBoxes and, if not, search more TextBoxes within its childs if it has any.
    For Each child_c As Control In control_collection
        If TypeOf child_c Is TextBox Then
            l.Add(child_c)
        End If

        If child_c.HasChildren Then
            l.AddRange(GetAllTextBoxes(child_c)) //Here we see why this function needs to allow input form and control at the same time 
        End If
    Next

    Return l
End Function 
```

希望这可以帮助某人；）

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-01-14T10:48:38.800

尝试这个：

```
textbox2.SelectionStart = 0;
textbox2.SelectionLength = textbox2.Text.Length; 
```

# ruby-on-rails - 将图像大小调整为原始版本

> ID：14317006
> 
> 赞同：0
> 
> 时间：2013-01-14T10:47:59.803
> 
> 标签：ruby-on-rails, ruby-on-rails-3, carrierwave, minimagick

我正在使用载波和迷你魔法。在上传器中我有

```
process resize_to_fit: [300,200] 
```

现在，所有上传的图像都已处理，但我现在需要原始版本。有没有办法编写迁移并恢复映像版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T10:49:50.527

恐怕不是。您可以调整调整后的图像大小，但质量会下降，这可能不是您所追求的。

更新：经过一番挖掘，我发现[了这个](https://stackoverflow.com/questions/8579425/how-can-i-make-carrierwave-not-save-the-original-file-after-versions-are-process)（看第二个答案）。因此，根据您保存图像的方式，您可能仍然拥有原件。在这种情况下，您可以使用[此技术](https://github.com/jnicklas/carrierwave#recreating-versions)从原始图像重新创建图像。

# vb.net - 多个 If Else 语句以及如何控制它们

> ID：14317007
> 
> 赞同：0
> 
> 时间：2013-01-14T10:48:07.047
> 
> 标签：vb.net

在我的 Web 应用程序中，我定义了一个`Regex`,`Match`和`str`. 因此`Regex`将用于将其他字符串与`str`和进行比较`Match`以识别在`textboxes`. 在我的代码中，我定义了 3 个字符串`matches`以与`str`. 还定义了与数据库的连接。以下代码显示了定义：

```
 Dim r As Regex = New Regex(str2, RegexOptions.IgnoreCase)
    Dim m1 As Match = r.Match(txt1.Text.ToString)
    Dim m2 As Match = r.Match(txt2.Text.ToString)
    Dim m3 As Match = r.Match(txt3.Text.ToString)
    Dim myconn As New SqlConnection(ConnString) 
```

我面临的问题是我有很多`if else`陈述，我无法确定一种适当控制它们的方法，如下所示：

```
If (m1.Success) AND (m2.Success) AND (m3.Success) Then

     Try
          myconn.Open()
          Dim cmd = New SqlCommand("Update Std SET Title = @param ", myconn)
          cmd.Parameters.Add("@param", Data.SqlDbType.Bit).Value = bit_True
          cmd.ExecuteNonQuery()
          cmd.Dispose()
          myconn.Close()
     Catch ex As Exception
          Response.Write(ex)
          End Try

ElseIf (m2.Success) Then
     Try
          myconn.Open()
          Dim cmd = New SqlCommand("Update Teacher SET In_name = @param ", myconn)
          cmd.Parameters.Add("@param", Data.SqlDbType.Bit).Value = bit_True
          cmd.ExecuteNonQuery()
          cmd.Dispose()
          myconn.Close()
     Catch ex As Exception
          Response.Write(ex)
          End Try

ElseIf (m3.Success) Then
     Try
          myconn.Open()
          Dim cmd = New SqlCommand("Update Std SET std_name = @param ", myconn)
          cmd.Parameters.Add("@param", Data.SqlDbType.Bit).Value = bit_True
          cmd.ExecuteNonQuery()
          cmd.Dispose()
          myconn.Close()
     Catch ex As Exception
          Response.Write(ex)
          End Try
     End If 
```

我对代码的期望是：

1.  检查第一个条件`m1.success`，如果`true`然后执行第**一个** `Try`块，否则如果`False`忽略所有`Try`块并移动到下一个条件（m2），则

2.  `m2.success`如果`true`然后执行**第二个** 块，则检查第二个条件`Try`，否则如果`False`忽略所有`Try`块并移动到下一个条件（m3），则

3.  同样适用`m3.Success`

所以这意味着第一个`Try`块与第一个块相关，`if statement` `(m1.Success)`并且只有在条件 (m1) 为真时才应执行。m2 和 m3 也是如此。通过这种方式，我将对语句进行动态控制。所以

`m1`= 执行第一个`Try`块。

`m2`= 执行第二个`Try`块。

`m3`= 执行第三个`Try`块。

任何返回的条件都`False`将与其`Try`块一起被忽略。

关于如何动态控制这些条件的任何建议或想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T11:05:17.490

也许只是这个？

```
If (m1.Success) Then

    '[...]

End If
If (m2.Success) Then

    '[...]

End If
If (m3.Success) Then

    '[...]

End If 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T10:55:43.623

您可以使用枚举作为标志，通过使用 AND 语句检查它们来控制将执行哪些块，枚举值将是正则表达式成功的结果。

另一个优化是在整个 If 之前/之后打开/关闭连接，以便稍微提高性能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T11:30:36.537

它是一个 Web 应用程序，因此我假设您已将数据库连接放在连接池或连接管理器中。

定义一个执行以下操作的抽象类

1.  匹配某个 reg 模式（这应该在其子类中被覆盖）
2.  当匹配发生时，执行以下 2.1。从池中获取数据库连接 2.2。针对数据库 2.3 运行某些查询。将数据库连接返回到池
3.  回到主逻辑

您可以根据需要在子类中创建任意数量的模式/逻辑，并将它们的实例放入集合（数组或列表）中。收到用户请求后，运行所有实例并让它们进行匹配和数据库查询。

# c - const void * 指针数组和 Visual C++

> ID：14317020
> 
> 赞同：2
> 
> 时间：2013-01-14T10:48:35.327
> 
> 标签：c, arrays, pointers, dynamic-memory-allocation, const-correctness

我在代码片段中定义指针数组时遇到问题`const void *`- Visual C++ 抱怨我尝试的任何组合：

```
void *call_func_cdecl(void *func, const void *const *args, int nargs);

void vlogprintf(const char *format, va_list va) {
    int nargs;
    void **args;

    args = malloc(...);

    args[0] = format;
    // fill the rest...

    call_func_cdecl((void*)logprintf, args, nargs);
    free(args);
} 
```

正如你所知道`free`的`void *`那样，数组本身不应该是常量，但它的元素应该是因为`format`是 a`const void *`并且它是 的元素`args`。

到目前为止，我尝试了这些：

*   `const void **args`

    到线`warning C4090: 'function' : different 'const' qualifiers`了`free(args)`

*   `void const **args`

    和上面一样

*   `void *const *args`

    到线`error C2166: l-value specifies const object`了`args[0] = format`

*   `void **const args`

    和上面一样

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T11:32:34.407

无法通过简单的 malloc 分配 const 指针数组。基本类型就是它们，如果你知道你在做什么，你可以（或多或少）安全地忽略这些错误。如果你想以“正确”的方式来做，你可以尝试这样的事情（代码没有实际使用顺序，只是随机片段）：

```
struct constvoid {
 const void * ptr;
}

void *call_func_cdecl(void *func, struct constvoid *args, int nargs);

{
    struct constvoid* args = malloc(...);

    args[0].ptr = format;
    //fill the other

    call_func_cdecl((void*)logprintf, args, nargs);
    free(args);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T11:02:39.433

这是对的：

```
void const** args 
```

我觉得警告是一个错误。

# regex - 正则表达式替换 IMG src 属性

> ID：14317027
> 
> 赞同：2
> 
> 时间：2013-01-14T10:49:00.327
> 
> 标签：regex, delphi, delphi-7

我有一个`var baseURL`我知道的是：`baseURL = c:\whatever\mybasedir\`
我有一个可能包含以下内容的 HTML 源代码：

```
<IMG alt="foo" src="file://c:\whatever\mybasedir\root\foo\bla.gif">
or/and:
<IMG alt="foo" src="file://c:/whatever/mybasedir/root/foo/bla.gif">
or/and:
<IMG src="c:\whatever\mybasedir\root\foo\bla.gif">
or/and: 
<IMG src="c:\whatever\mybasedir/root/foo/bla.gif"> 
```

我需要替换所有 src 标记，以便结果路径是 Unix 风格，相对于`baseURL`：

```
<IMG src="root/foo/bla.gif"> 
```

或者如果有一个 alt 属性（或其他属性的顺序可能会有所不同）：

```
<IMG alt="foo" src="root/foo/bla.gif"> 
```

我该如何搭配`<IMG * src="*" *>`？有什么正则表达式（或其他方法）可以在这里提供帮助的想法吗？

（我不能使用 DOM 来完成这项工作，因为 IE8/9 DOM 首先导致了这种情况 - 自动添加`<base href>`到所有相关的 src 标签）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T10:54:49.880

你可以做

正则表达式：`(<IMG[^>]*)src="[^"]*c:.whatever.mybasedir.`

用。。。来代替：`$1src="`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T11:00:32.833

代替`(<IMG.*src=")(.*[/\\])(root[/\\].*?".*>)`

和`$1$3`

**编辑**

希望这会奏效

代替`(<IMG.*src=")(.*[/\\]mybasedir[/\\])(root)(([/\\][^/\\]+)*)(".*>)`

和`$1$3$4$6`

# django - “GalaxyUser”对象在 Django 中没有属性“后端”错误？

> ID：14317028
> 
> 赞同：1
> 
> 时间：2013-01-14T10:49:03.867
> 
> 标签：django, login

我有一个`login`带有自定义功能的`authenticate`功能。

```
def authenticate(username='username', password='password'):
    try:
        return GalaxyUser.objects.get(username=username, password=password)
    except GalaxyUser.DoesNotExist:
        return None

def login_backend(request):
    if request.method == 'POST':
        username = request.POST['username']
        username1 = ''.join(username)
        password = request.POST['password']
        password = ''.join(password)
        password1 = hashlib.sha1(password).hexdigest()
        user = authenticate(username=username1, password=password1)
        login(request, user)
        if user is None:
            return HttpResponseRedirect('/unsuccessful/')
        else:
            return HttpResponseRedirect('/successful/')
    else:
        return render_to_response('login_backend.html', context_instance=RequestContext(request)) 
```

我没有被重定向到成功或不成功。但是，我收到此错误：

```
Traceback:
File "/usr/local/lib/python2.6/dist-packages/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/home/zurelsoft/workspace/genelaytics/fileupload/backend.py" in login_backend
  21\.         login(request, user)
File "/usr/local/lib/python2.6/dist-packages/django/contrib/auth/__init__.py" in login
  73\.     request.session[BACKEND_SESSION_KEY] = user.backend

Exception Type: AttributeError at /login_backend/
Exception Value: 'GalaxyUser' object has no attribute 'backend' 
```

我究竟做错了什么？`GalaxyUser`是我的模型名称，`backend`是我的视图代码所在的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T10:53:53.703

因为您的身份验证函数是一个独立的函数，而不是实现[文档](https://docs.djangoproject.com/en/1.4/topics/auth/#writing-an-authentication-backend)中指定的身份验证后端 API 的类。

# string - 没有 FOR 循环的批量替换字符串

> ID：14317034
> 
> 赞同：1
> 
> 时间：2013-01-14T10:49:23.137
> 
> 标签：string, batch-file, for-loop, replace

我有以下字符串

```
set str=aaaaa,bbbbb,ccccc,dddd 
```

我需要替换从第一个`,`（逗号）到字符串结尾的所有内容。但我不知道字符串是如何开始的。

我不能使用 * 通配符，因为它不在字符串的开头，所以像这样 -

```
set str=%str:,*=% >>>> Will not work 
```

***有任何想法吗 ？它必须在批处理脚本中***

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T14:46:52.217

有一个非常简单快速的解决方案可以避免 FOR 循环：使用搜索和替换在每个逗号处注入一个连接的 REM 命令:-)

```
@echo off
set str=aaaaa,bbbbb,ccccc,dddd
set "str=%str:,="&rem %
echo str=%str% 
```

**解释**

在进行任何扩展之前，这是重要的代码行：

```
set "str=%str:,="&rem % 
```

这是该行在变量扩展后转换为的内容：

```
set "str=aaaaa"&rem bbbbb"&rem ccccc"&rem dddd 
```

它变成一个 SET 语句，然后是一个 REM 语句。运算符允许您在`&`一行中组合多个命令。只有一个 REM 语句，因为第一个 REM 之后的所有内容都被视为备注的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T11:30:00.783

要删除第一个逗号后的所有内容，您可以使用

```
@echo off
setlocal enabledelayedexpansion
set str=aaaaa,bbbbb,ccccc,dddd
for /f "delims=," %%a in ("%str%") do (
set str=%%a
echo !str!
)
pause >nul 
```

要替换，只需将其剥离并在末尾附加新字符串

```
 set str=%%a,new,string 
```

***更新***

这将做同样的事情，但没有`for`循环

```
@echo off
setlocal enabledelayedexpansion
set str=aaaaa,bbbbb,ccccc,dddd
set strip=%str%
set length=0
set start=0
set new=
:loop
if defined strip (
set strip=!strip:~1!
set /a length+=1
goto :loop
)
:comma
if %length% gtr 0 (
call :add !start!
if "!char!"=="," (
goto :break
) else (
set new=!new!!char!
set /a length-=1
set /a start+=1
goto comma
)
)

:break
echo %new%
pause >nul

:add
set char=!str:~%1,1! 
```

# java - java：找不到主类：test/test。程序将会退出

> ID：14317040
> 
> 赞同：0
> 
> 时间：2013-01-14T10:49:41.557
> 
> 标签：java, class, find, main

我得到了一些我想测试一些功能的源代码示例。不幸的是，我在执行程序时遇到问题：

```
11:41:31 [linqus@ottsrvafq1 example]$ javac -g  test/test.java
11:41:52 [linqus@ottsrvafq1 example]$ java -classpath . test/test
Exception in thread "main" java.lang.NoClassDefFoundError: test/test (wrong name: test)
        at java.lang.ClassLoader.defineClass1(Native Method)
        at java.lang.ClassLoader.defineClassCond(ClassLoader.java:632)
        at java.lang.ClassLoader.defineClass(ClassLoader.java:616)
        at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
        at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
        at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
        at java.net.URLClassLoader$1.run(URLClassLoader.java:197)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:248)
Could not find the main class: test/test.  Program will exit.
11:42:57 [linqus@ottsrvafq1 example]$ 
```

我可以做什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T10:51:37.767

我对 Java 没有太多经验，但据我所知，您应该使用完全限定的 Java 类名来运行文件：

```
// Assuming that the class is called "test" and is not in any package
java -classpath test test

// If "test" is actually in the package "test" :
java -classpath . test.test 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T10:51:48.373

要使用 java 命令运行类，您需要使用 . 代替 /

假设是您的 javac 命令建议`test`的包中的一个类。`test`

例如

```
java -classpath . test.test 
```

此外，您应该遵循 java 命名约定并以大写字母开头命名您的类。应该是`test.Test`为了更容易区分类和包

您的编译是正确的，因为 / 应该在使用 javac 时使用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T10:52:36.057

您需要将其运行为：

```
java -classpath test test 
```

第一个`test`是`.class`文件所在目录的名称。第二个`test`是要运行的 Java 类的名称。通常你需要在这里指定完整的包名，但是由于你的类在全局包中，只要传递`test`到这里就可以了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T10:58:23.657

将代码读入 IDE（eclipse、intellij、netbeans）可能会突出问题。

您的代码似乎缺少一些简单的东西（即包名称）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-14T11:10:17.373

可能是大小写问题，您的类名与您从命令中调用的不同。假设您的班级名称是`Test`并且您`test`在命令行中提供。

[http://javarevisited.blogspot.in/2011/06/noclassdeffounderror-exception-in.html](http://javarevisited.blogspot.in/2011/06/noclassdeffounderror-exception-in.html)

# css - 为什么我的 div 不在中间垂直/水平对齐？

> ID：14317041
> 
> 赞同：0
> 
> 时间：2013-01-14T10:49:41.963
> 
> 标签：css, alignment, vertical-alignment

我试图在一个 div 中对齐一个 div，以便它完全位于中间，但我无法让它工作，我已经尝试了很多东西。这是我现在的代码：

**HTML**

```
<div class="loginContainer">
  <div class="loginContent">
    This div should be in the middle of the outer div
  </div>
</div> 
```

**CSS**

```
div.loginContainer {
    width:100%;
    height:300px;
    position:absolute;
    top:50%;
    margin-top:-150px;

    background-color:#ffffff;
    background: url('bg.jpeg') no-repeat center center fixed;
        -webkit-background-size: cover;
        -moz-background-size: cover;
        -o-background-size: cover;
    background-size: cover;
}

div.loginContent {
    margin:0 auto;
    height:250px;
    width:300px;
    padding:10px;
    position:relative; 
    top:-50%; 

    background-color:#ffffff;
    border-radius:20px 20px 20px 20px;
        -moz-border-radius:20px 20px 20px 20px;
        -webkit-border-radius:20px 20px 20px 20px;
        -khtml-border-radius:20px 20px 20px 20px;
    box-shadow:7px -5px 10px rgba(230, 230, 250, 0.7);
        -webkit-box-shadow:7px -5px 10px rgba(230, 230, 250, 0.7);
        -moz-box-shadow:7px -5px 10px rgba(230, 230, 250, 0.7);
    box-shadow:5px 5px 30px 0px rgba(202, 225, 255, 1), inset 5px 5px 50px 2px rgba(230, 230, 250, 1);
        -webkit-box-shadow:5px 5px 30px 0px rgba(202, 225, 255, 1), inset 5px 5px 50px 2px rgba(230, 230, 250, 1);
        -moz-box-shadow:5px 5px 30px 0px rgba(202, 225, 255, 1), inset 5px 5px 50px 2px rgba(230, 230, 250, 1);
} 
```

我能得到的最接近的是它水平对齐并且几乎垂直，但它仍然更靠近外部 div 的底端。

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T10:55:50.987

尝试将此添加到您的 CSS 中，我认为它会按您的意愿工作：

```
div.loginContent {
    position:absolute;
    margin: auto;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T10:59:44.130

正如我所见，您正在使用固定高度，为什么不简单地添加正确的边距大小以使 div 居中？

```
div.loginContent {
    margin:15px auto;
} 
```

[http://jsfiddle.net/kSUbe/](http://jsfiddle.net/kSUbe/)

或者，如果您可以对容器执行相同的操作。如果您有`top:50%`内容 div 将从容器的中间**开始**，但是如果您希望它居中，则必须将其向上移动一半大小。

```
div.loginContent {
    margin:-135px auto 0 auto;
    top:50%;
} 
```

[http://jsfiddle.net/kSUbe/1/](http://jsfiddle.net/kSUbe/1/)

# android - Android USB请求多个设备的权限

> ID：14317043
> 
> 赞同：1
> 
> 时间：2013-01-14T10:49:59.013
> 
> 标签：android, usb

我将两个 USB 设备连接到我的 Android 3.1 桌面，并尝试遍历所有设备并请求每个设备的权限：

```
UsbManager mManager = (UsbManager) context.getSystemService(Context.USB_SERVICE);
...
for (UsbDevice device :  mManager.getDeviceList().values()) {
  mManager.requestPermission(device, mPermissionIntent);
  ...           
} 
```

问题是只出现一个权限屏幕而不是两个，我怀疑 requestPermission 会导致这种情况。Android中是否有任何解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T06:27:30.553

我的解决方法是，如果要发出多个权限请求，一次发出一个。即接收者得到第一个权限请求的响应后，发出下一个请求。我昨晚测试了这个解决方法，它解决了缺少权限屏幕和缺少响应的问题。我正在使用 Android 4.x。

# php - MySQL 会话时区如何影响 mysql 的日期/时间增量？

> ID：14317044
> 
> 赞同：0
> 
> 时间：2013-01-14T10:50:04.280
> 
> 标签：php, mysql, sql

我想将一些逻辑从我的 php 代码移动到我的 mysql 查询中，这些查询涉及进行时间和日期计算，这些计算需要始终参考 UTC。

在我的函数中使用的 php`ini_set('date.timezone', 'UTC');`中包括以保证一致性。

由于我可能无法始终控制系统时区，因此我设置了每个连接的时区，`SET time_zone = 'UTC';`这将确保在 MySQL 查询中使用派生日期的任何地方都是 UTC。

但是，我从[文档](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)和[TJ Crowder](https://stackoverflow.com/questions/2934258/how-do-i-get-the-current-time-zone-of-mysql)对类似问题的出色回答中不清楚的是，这是否对

```
ADDDATE() ADDTIME() or DATE_ADD() 
```

即根据会话时区执行这些计入夏令时，或者无论如何执行这些计入夏令时。

`CONVERT_TZ(dt,from_tz,to_tz)`如果是后者 - 是否可以使用我们从 MySQL 系统表中派生 from_tz 的位置来 CAST 说 ADDTIME() 计算的结果。

注意： - 我们知道`@@global.time_zone, @@session.time_zone return 'SYSTEM'`在没有设置时区的情况下，因此不能在转换中使用。

# vba - For Each loop on Array 返回每个唯一字符串的计数

> ID：14317051
> 
> 赞同：1
> 
> 时间：2013-01-14T10:50:30.990
> 
> 标签：vba, excel

我想要实现的是返回列中唯一值（字符串）的列表。将该列表放入一个数组中，然后将值列表粘贴到一个新工作表中，例如列 A。然后对于每个数组元素计算它在原始列表中出现的次数，并返回其在新工作表中 B 列中的频率计数其唯一的字符串。

到目前为止，这是我的代码。

```
Sub UniqueList()
Dim rListPaste As Range
Dim causeList As Range
Dim iReply As Integer
Dim element As Variant

On Error Resume Next

Set rListPaste = Application.InputBox _
(Prompt:="Please select the destination cell", Type:=8)

    If rListPaste Is Nothing Then
       iReply = MsgBox("No range nominated," _
          & " terminate", vbYesNo + vbQuestion)
      If iReply = vbYes Then Exit Sub
    End If

causeList = Range("E1", Range("E65536").End(xlUp))
Range("causeList").AdvancedFilter Action:=xlFilterCopy, Unique:=True
Range("causeList").AdvancedFilter CopyToRange:=causeList.Cells(1, 1)

element = 0
For Each element In causeList
    element = element + 1
Next element
End

End Sub 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T13:44:59.553

有多种方法可以实现您的目标：

**1.使用数据透视表：**

只需为您的数据范围插入一个数据透视表。在行字段和数据字段中删除您感兴趣的字段（列名）。您将看到唯一项目列表及其旁边的计数。如果数据发生变化，需要刷新数据透视表

**2\. 创建唯一值列表并添加 COUNTIF 公式** 首先，将高级过滤器应用于您的列（数据->过滤器->高级）。在这里，选择“复制到另一个位置”，选择您的数据范围（如“列表范围”），您的目的地（“复制到”）并仅选中“唯一值”。现在使用该唯一列表，在下一列中添加一个 COUNTIF 公式。

**3.VBA**

以下代码将输出唯一值列表及其频率。您需要添加对“Microsoft 脚本库”的引用，因为它使用 Dictionary 对象：

```
Sub CountUnique(rngInput As Range, rngTarget As Range)

    暗淡为新词典
    将 varCell 调暗为变体
    将 varKey 调暗为变体
    调光为范围
    对于 rngInput 中的每个 varCell
        If Not d.Exists(varCell.Value) Then
            d.添加 varCell.Value, 0&
        万一
        d(varCell.Value) = d(varCell.Value) + 1
    下一个

    设置 rngOut = rngTarget(1, 1)
    对于 d.Keys 中的每个 varKey
        rngOut.Value = varKey
        rngOut.Offset(, 1) = d(varKey)
        设置 rngOut = rngOut.Offset(1)
    下一个

结束子

```

# ember.js - 固定装置错误中的嵌入记录：“无法调用未定义的方法‘hasOwnProperty’

> ID：14317052
> 
> 赞同：3
> 
> 时间：2013-01-14T10:50:40.753
> 
> 标签：ember.js, ember-data

我正在尝试将固定装置加载到我的具有嵌入式记录的应用程序中。

从服务器加载数据（使用`DS.RESTAdapter`）有效，但当我尝试通过`DS.FixtureAdapter`.

**楷模：**

```
App.Post = DS.Model.extend
  title: DS.attr('string')
  comments: DS.hasMany('App.Comment')

App.Comment = DS.Model.extend
  text: DS.attr('string')
  # I'm not specifying DS.belongsTo('post') because comments could also exist 
  # with other objects.
  # Anyway, it does not work even with it. 
```

**适配器：**

```
App.Adapter = DS.FixtureAdapter.extend()
App.Adapter.map App.Post,
  comments:
    embedded: 'always' 
```

**店铺：**

```
App.store = DS.Store.create
  revision: 11
  adapter: App.Adapter.create() 
```

**夹具：**

```
App.Comment.FIXTURES = []

App.Post.FIXTURES = [
  {
    id: "1"
    title: "My post"
    comments: [{
      id: "1"
      text: "My first comment" 
    }, {
      id: "2"
      text: "My second comment"
    }]
  }
] 
```

在**控制台**中：

```
post = App.store.find(App.Post, 1);

comments = post.get("comments");
console.log(comments.get('length')); // => 1

firstComment = comments.get('firstObject');
console.log(firstComment.get('id')); // => undefined
console.log(firstComment.get('name')); // => TypeError: Cannot call method `hasOwnProperty` of undefined 
```

我认为这个问题与[这个问题](https://stackoverflow.com/questions/14174921/embedded-hasmany-attribute-access-gives-typeerror-cannot-call-method-hasownpr)有关，也许与[这个拉取请求](https://github.com/emberjs/data/pull/568)有关。

*使用的 Ember 版本：*

*   [主](https://github.com/emberjs/data/commit/4b35be22d84ca13c5e8e0e2cb7447ab21892b8b1)数据上的余烬数据
*   余烬[v1.0.0-pre.2-311-g668783a](https://github.com/emberjs/ember.js/commit/668783a620bc004daa063df72c3d84035be6888a)

**编辑**

[这是说明问题的 JSFiddle](http://jsfiddle.net/lcoq/4Zqvc/1/)。而且我还在[这里写了一个失败的测试](https://github.com/lcoq/data/commit/e1064ae9898228ddb354bfa65a370125b6727e0a)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T11:14:25.503

嗯，起初我在猜测没有 id 的灯具，但没有。也许

```
App.Adapter = DS.FixtureAdapter.extend()
App.Adapter.map App.Product,
  groups:
    embedded: 'always' 
```

还应该包含 App.Post 总是嵌入评论吗？

如果这不能解决这个问题，我怀疑fixture 适配器不能很好地嵌入，你也必须定义注释。

更新：在与@tomdale 讨论后，不会对夹具适配器进行任何更改，以使其能够加载嵌入的记录。所以我能建议的是：

[http://jsfiddle.net/4Zqvc/9/](http://jsfiddle.net/4Zqvc/9/)

顺便说一句，这正是汤姆所说的：

> 我不相信夹具适配器支持嵌入式记录是否有充分的理由需要它？它也不支持 underscored_property_names 夹具适配器的想法不是模仿来自服务器的 JSON 有效负载它以 Ember Data 期望的格式提供存根数据，因此不嵌入关系，属性名称是驼峰式等。

# asp.net - Ajax：我如何控制 Ajax 帖子的点击次数？

> ID：14317053
> 
> 赞同：1
> 
> 时间：2013-01-14T10:50:42.587
> 
> 标签：asp.net, html, ajax

嗨，我有一个 Ajax 表单，需要在单击以下按钮时发布：

```
<div id="divaddtocartbtn">
     <input type="image" class="buynow" id="imgaddtocart" alt="Add to Cart" src="http://static.e-talemedia.net/content/images/odditiesaddtobasketbutton.png" />
</div> 
```

但是我也有一个计数器如下：

```
<div class="box">
   <label for="qty">
   <abbr title="Quantity">Qty</abbr></label>
    <input id="qty" value="0" />
    <button id="down" onclick="modify_qty(-1)">-1</button>
    <button id="up" onclick="modify_qty(1)">+1</button>
</div> 
```

[http://www.codecademy.com/courses/a-simple-counter/0#!/exercises/0](http://www.codecademy.com/courses/a-simple-counter/0#!/exercises/0) - 简单计数器

但是，由于这是在 Ajax 表单中，当我尝试单击 + 和 - 来增加/减少计数器时，会发生 Ajax 帖子。我如何分离输入，以便 Ajax 帖子仅在添加到购物篮点击时发生？

我在想我需要将计数器放在 Ajax 表单之外，但我需要获取在 ajax 帖子中选择的数量。

```
Ajax.BeginForm("ThreeInOneBin2", new AjaxOptions() {
    HttpMethod = "POST"
}); 
```

请参阅下面的完整代码：

```
<div class="ThreeInOneBin2middle">
            <ul>
                <% if (Model.ProductNotFound)
                   { %>
                <!-- List the retailers as we have none in stock -->
                <%= Html.WidgetProductNotFoundList(Model) %>
                <% }
                   else
                   { %>
                <% using (Html.BeginForm())
                   {%>
                <%= Html.AntiForgeryToken() %>
                <%= Html.WidgetProductFoundListThreeStageBin2(Model)%>
                <div class="stepFour">
                    <% if (string.IsNullOrEmpty(ViewBag.Confirmation))
                       {
                           Ajax.BeginForm("ThreeInOneBin2", new AjaxOptions()
                                                          {

                                                              HttpMethod = "POST"
                                                          });
                           { %>
                    <img src="http://static.e-talemedia.net/content/images/DoveStep3message.png" alt="" />

                   <%-- This is the quantity--%>
                    <div class="box">
                        <label for="qty">
                            <abbr title="Quantity">
                                Qty</abbr></label>
                        <input id="qty" value="0" />
                        <button id="down" onclick="modify_qty(-1)">
                            -1</button>
                        <button id="up" onclick="modify_qty(1)">
                            +1</button>
                    </div>
                    <div id="uandp">
                        <p>
                            <input type="text" name="username" class="txtUsername" id="email" value="Username" />
                            <%= Html.ValidationMessage("Email", "Please enter a valid Email") %>
                        </p>
                        <p>
                            <input type="password" name="password" class="txtPassword" value="Password" />
                        </p>
                    </div>
                    <div id="rightaddtocart">
                        <div id="divaddtocartbtn">
                            <input type="image" class="buynow" id="imgaddtocart" alt="Add to Cart" src="http://static.e-talemedia.net/content/images/odditiesaddtobasketbutton.png" />
                        </div>
                    </div>
                    <% } %>
                    <% }
                       else
                       { %>
                    <p>
                        <%-- <%= ViewBag.Confirmation %>--%>
                        <img class="divAdded" src="http://static.e-talemedia.net/content/images/Basketmessage.png"
                            alt="Added to Basket" />
                    </p>
                    <% } %>
                </div>
                <% } %>
                <% } %>
            </ul>
        </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T11:23:54.693

我的建议是使用 ajax 和 jquery。下面的代码可能对您有所帮助。

```
<script>

$("#imgaddtocart").click(function(event) {

event.preventDefault(); 

var myForm = $(this).parent( 'form:first' );
var url = myForm.attr("action");

$.ajax({
    type: "POST",
    url: url,
    dataType: "json",
    data:myForm.serialize(),

    success:function(data)
    {
        alert(data.message);
    },
    error:function()
    {
        alert("error");
    }
}); 
/*End : Ajax*/

});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T20:03:27.440

浏览器假定`<button></button>`表单中的任何内容都是提交按钮。这些按钮将提交表单，除非采取措施使它们表现不同。

在 javascript/jQuery 中而不是在 HTML 中附加事件处理程序也是一种很好的做法。

您应该从“+”和“-”按钮获得正确的行为，如下所示：

HTML：

```
<button id="down">-1</button>
<button id="up">+1</button> 
```

javascript:

```
$("#down").on('click', function(event){
    event.preventDefault();
    modify_qty(-1);
});
$("#up").on('click', function(event){
    event.preventDefault();
    modify_qty(1);
}); 
```

`event.preventDefault()`是一个 jQuery 命令，它会导致 DOM 元素的自然动作被抑制。

# r - 在 R 中，为什么 factorial(100) 与 prod(1:100) 的显示不同？

> ID：14317054
> 
> 赞同：23
> 
> 时间：2013-01-14T10:50:44.363
> 
> 标签：r, math, factorial, arithmetic-expressions

在 RI 中发现了一些我无法解释的奇怪行为，我希望这里有人可以。我相信100的价值！是这个[大数字吗](http://puzzles.nigelcoldwell.co.uk/nineteen.htm)。

控制台中的几行显示了预期的行为......

```
>factorial( 10 )
[1] 3628800
>prod( 1:10 )
[1] 3628800
> prod( as.double(1:10) )
[1] 3628800
> cumprod( 1:10 )
[1]       1       2       6      24     120     720    5040   40320  362880 3628800 
```

但是，当我尝试 100 时！我得到（注意结果数字如何开始相差约 14 位）：

```
> options(scipen=200) #set so the whole number shows in the output
> factorial(100)
[1] 93326215443942248650123855988187884417589065162466533279019703073787172439798159584162769794613566466294295348586598751018383869128892469242002299597101203456
> prod(1:100)
[1] 93326215443944102188325606108575267240944254854960571509166910400407995064242937148632694030450512898042989296944474898258737204311236641477561877016501813248
> prod( as.double(1:100) )
[1] 93326215443944150965646704795953882578400970373184098831012889540582227238570431295066113089288327277825849664006524270554535976289719382852181865895959724032
> all.equal( prod(1:100) , factorial(100) , prod( as.double(1:100) ) )
[1] TRUE 
```

如果我对设置为“已知”数字 100 的变量进行一些测试！然后我看到以下内容：

```
# This is (as far as I know) the 'true' value of 100!
> n<- as.double(93326215443944152681699238856266700490715968264381621468592963895217599993229915608941463976156518286253697920827223758251185210916864000000000000000000000000)
> factorial(100) - n
[1] -1902315522848807765998160811905210717565551993186466795054798772271710903343294674760811531554315419925519536152107160826913610179566298858520576
> prod(1:100) - n
[1] -48777321098687378615337456715518223527321845979140174232174327494146433419058837814379782860367062049372295798771978482741374619988879457910784
> prod(as.double(1:100)) - n
[1] 0 
```

最终结果的计算结果为零，但返回的数字`prod( as.double( 1:100 ) )`并不像我预期的那样显示，即使它正确地计算了`prod( as.double( 1:100 ) ) - n`where `n`is a variable set to value 100!。

谁能向我解释这种行为？据我所知，它不应该与溢出等有关，因为我使用的是 x64 系统。版本和机器信息如下：

```
> .Machine$double.xmax
[1] 1.798e+308
> str( R.Version() )
List of 14
 $ platform      : chr "x86_64-apple-darwin9.8.0"
 $ arch          : chr "x86_64"
 $ os            : chr "darwin9.8.0"
 $ system        : chr "x86_64, darwin9.8.0"
 $ status        : chr ""
 $ major         : chr "2"
 $ minor         : chr "15.2"
 $ year          : chr "2012"
 $ month         : chr "10"
 $ day           : chr "26"
 $ svn rev       : chr "61015"
 $ language      : chr "R"
 $ version.string: chr "R version 2.15.2 (2012-10-26)"
 $ nickname      : chr "Trick or Treat" 
```

谁能给我解释一下？我不怀疑 R 做的一切都是正确的，这很可能与 userR 相关。您可能会指出，因为`prod( as.double( 1:100 ) ) - n`正确评估了我在乎的东西，但我正在做[Project Euler](http://projecteuler.net/) [Problem 20](http://projecteuler.net/problem=20)，所以我需要显示正确的数字。

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-14T11:00:40.910

这与 a 的最大值无关，`double`而与它的精度有关。

`100!`有 158 个有效（十进制）数字。IEEE `double`s（64 位）有 52 位的尾数存储空间，因此在超过大约 16 位十进制精度后会出现舍入错误。

顺便说一句，`100!`事实上，正如你所怀疑的，

```
93326215443944152681699238856266700490715968264381621468592963895217599993229915608941463976156518286253697920827223758251185210916864000000000000000000000000 
```

所以计算的*所有*值 R 都是不正确的。

现在我不知道 R，但似乎在比较之前`all.equal()`将所有这三个值都转换为`float`s，因此它们的差异丢失了。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-14T13:24:29.603

您的测试`all.equal`不会产生您期望的结果。`all.equal`只能比较**两个**值。第三个参数在位置上与 匹配`tolerance`，它给出了比较操作的容差。在您对您的调用中，`all.equal`给它一个容忍度，`100!`这肯定会导致对于荒谬的不同值的比较是正确的：

```
> all.equal( 0, 1000000000, prod(as.double(1:100)) )
[1] TRUE 
```

但即使你只给它两个参数，例如

```
all.equal( prod(1:100), factorial(100) ) 
```

它仍然会产生`TRUE`，因为默认容差是`.Machine$double.eps ^ 0.5`，例如，两个操作数必须匹配大约 8 位数字，这绝对是这种情况。另一方面，如果您将容差设置为`0`，则比较中不会出现三种可能的组合：

```
> all.equal( prod(1:100), factorial(100), tolerance=0.0 )
[1] "Mean relative difference: 1.986085e-14"
> all.equal( prod(1:100), prod( as.double(1:100) ), tolerance=0.0 )
[1] "Mean relative difference: 5.22654e-16"
> all.equal( prod(as.double(1:100)), factorial(100), tolerance=0.0 )
[1] "Mean relative difference: 2.038351e-14" 
```

另请注意，仅仅因为您告诉 R 打印 200 个有效数字并不意味着它们都是正确的。实际上，1/2^53 有大约 53 个十进制数字，但只有前 16 个被认为是有意义的。

这也使您与“真实”值的比较存在缺陷。观察这一点。R 给你的结尾数字`factorial(100)`是：

```
...01203456 
```

`n`你从中减去`n`，100 的“真实”值在哪里！所以它最后应该有 24 个零，因此差异也应该以相同的数字结束`factorial(100)`。而是以以下结尾：

```
...58520576 
```

这仅表明所有这些数字都不重要，人们不应该真正研究它们的价值。

为了准确地表示 100，它需要 525 位的二进制精度！- 这是 10 倍的精度`double`。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-07-11T23:29:46.783

我将添加第三个答案，以图形方式描述您遇到的行为。本质上，阶乘计算的双精度足以达到 22!，然后它开始越来越偏离实际值。

在 50! 左右，factorial(x) 和 prod(1:x) 这两种方法之间存在进一步的区别，正如您所指出的，后者产生的值更类似于“真实”因子。

![R中的阶乘计算精度](../Images/9ff3d21d141c3e8401c52d2f09cf6a41.png)

附上代码：

```
# Precision of factorial calculation (very important for the Fisher's Exact Test)
library(gmp)
perfectprecision<-list()
singleprecision<-c()
doubleprecision<-c()
for (x in 1:100){
    perfectprecision[x][[1]]<-factorialZ(x)
    singleprecision<-c(singleprecision,factorial(x))
    doubleprecision<-c(doubleprecision,prod(1:x))
}

plot(0,col="white",xlim=c(1,100),ylim=c(0,log10(abs(doubleprecision[100]-singleprecision[100])+1)),
        ,ylab="Log10 Absolute Difference from Big Integer",xlab="x!")
for(x in 1:100) {
    points(x,log10(abs(perfectprecision[x][[1]]-singleprecision[x])+1),pch=16,col="blue")
    points(x,log10(abs(perfectprecision[x][[1]]-doubleprecision[x])+1),pch=20,col="red")
}
legend("topleft",col=c("blue","red"),legend=c("factorial(x)","prod(1:x)"),pch=c(16,20)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-03T17:06:04.317

好吧，您可以从它调用的主体中`factorial`看出它`gamma`调用了`.Primitive("gamma")`。`.Primitive("gamma")`看起来像什么？[像这样](https://github.com/wch/r-source/blob/trunk/src/nmath/gamma.c)。

对于大输入，`.Primitive("gamma")`的行为在该代码的[第 198 行。](https://github.com/wch/r-source/blob/trunk/src/nmath/gamma.c#L198)它在呼唤

```
exp((y - 0.5) * log(y) - y + M_LN_SQRT_2PI +
            ((2*y == (int)2*y)? stirlerr(y) : lgammacor(y))); 
```

这[只是一个近似值](http://t.co/F19ALAb6j6)。

* * *

顺便说一下，[文章`Rmpfr`](https://cran.r-project.org/web/.../Rmpfr/vignettes/log1mexp-note.pdf)以`factorial`它为例。因此，如果您想解决问题，“只需使用`Rmpfr`库”。

# python - 如何过滤包含唯一数字的数字？

> ID：14317055
> 
> 赞同：9
> 
> 时间：2013-01-14T10:50:44.307
> 
> 标签：python, algorithm

你有一个数字列表，你想过滤掉那些包含唯一数字的数字，即每个数字在数字中只能出现一次。

正面例子：

*   985
*   58293.6
*   0.1246

负面例子：

*   9585（5 出现两次）
*   58293.666（6出现3次）
*   0.12461（1 出现两次）

你会怎么做？我自己的想法是将每个数字转换为字符串，然后检查由字符串字符组成的集合的大小是否等于字符串的长度。像这样的东西：

```
def uniques(numbers):
    for number in numbers:
        str_number = str(number)
        if len(set(str_number)) == len(str_number):
            yield number

for i in uniques(xrange(1000, 1050)):
    print i

1023
1024
1025
1026
1027
1028
1029
1032
1034
1035
1036
1037
1038
1039
1042
1043
1045
1046
1047
1048
1049 
```

有没有办法在不先将整数转换为字符串的情况下做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-14T11:07:36.957

> 有没有办法在不先将整数转换为字符串然后再将它们转换回来的情况下做到这一点？

是的，您可以`divmod`用来查找以 10 为底的数字，但这并不比您发布的方法快：

```
def uniques2(numbers):
    for number in numbers:
        seen = set()
        quotient = number
        while quotient > 10:
            quotient, remainder = divmod(quotient, 10)
            if remainder in seen:
                break
            else:
                seen.add(remainder)
        else:
            yield number 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-14T11:00:12.050

尝试：

```
def predicate(n):
    s = repr(n)
    return len(s) == len(set(s))
filtered_numbers = [ n for n in numbers if predicate(n) ] 
```

或者，如果您更喜欢过滤功能：

```
filtered_numbers = filter(predicate, numbers) 
```

或者：

```
filtered_numbers = filter(lambda n: len(repr(n)) == len(set(repr(n))), numbers) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-14T11:03:03.813

如果您想要基于正则表达式的解决方案，请考虑以下正则表达式：

```
(?![\d.]*([\d.])[\d.]*\1)^[\d.]+$ 
```

也就是说，如果没有重复的数字并且没有重复的小数点，则匹配一系列数字和句点。

更新（感谢@frb）：用 Python 写这个的正确方法是

```
re.match(r"(?![\d.]*([\d.])[\d.]*\1)^[\d.]+$",str_number).group(0) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T11:08:42.943

使用 collections.Counter：

```
from collections import Counter

def unique(seq):
    return any(x > 1 for x in Counter(seq).values()) 
```

这适用于任何序列，而不仅仅是字符串。

直到现在我才注意到你不想转换为字符串......不知道为什么，但我会让答案留下来。

# javascript - 在 JavaScript 画布中绘制的矩形不断重叠

> ID：14317057
> 
> 赞同：0
> 
> 时间：2013-01-14T10:50:55.600
> 
> 标签：javascript, canvas

我试图通过在画布的上下文上使用 fillRect 和 strokeRect 绘制一堆矩形，在 JavaScript 中创建一个简单的 GUI 界面。为了弄清楚矩形的大小，我有一个表达式，它占用浏览器窗口中的可用空间并计算每个矩形的坐标。奇怪的是，即使坐标不相交（我已经通过输出坐标值进行了检查） - 矩形也是如此。这是代码：

```
var canvas = $("#canvas")[0];
var ctx = canvas.getContext("2d");

var w; 
var h;
var sectionH;
var sectionW;
var sectionX;
var noOfSections;
var gap;
var sectionColor;
var firstY;

//separate sections to follow:
//sessions
var sessionsStartY;
var sessionsEndY;

//activities values
var activitiesStartY;
var activitiesEndY;

//schools values
var schoolsStartY;
var schoolsEndY;

//data entry values
var daenStartY;
var daenEndY;

//general value setup
function generalSetUp() {

    noOfSections = 4;

    ctx.canvas.width = window.innerWidth - 15;
    ctx.canvas.height = window.innerHeight + 500;

    //section edge color and width
    ctx.strokeStyle = "white";
    ctx.lineWidth = 1;

    w = $("#canvas").width();
    h = $("#canvas").height();

    //gap between the sections should vary depending on screen size, 
    //one percent of the whole screen height should do
    //we want the numbers nice and round, hence parseInt
    gap = 15;
    sectionX = 5;
    firstY = 5;
    sectionColor = "rgba(240, 237, 238, 0.5)";

    //we want to fit all the sections on the screen without scrolling, so a bit of calculation is needed to get the
    //height of the section: total height minus top gap, minus bottom gap, minus all the gaps between the sections
    //divided by the total number of sections should give us the height of every section        
    sectionH = ((((h - firstY) - firstY) - (gap * (noOfSections-1))) / noOfSections);
    sectionH = parseInt(sectionH);
    //total available width minus left gap and right gap
    sectionW = ((w - sectionX) - sectionX);
    sectionW = parseInt(sectionW);

    titleFont = gap + 18 + "px Calibri";
    buttonFont = gap + 12 + "px Calibri";
}

//setup for values representing positions of each section
function sectionsSetUp() {
    //section values
    sessionsStartY = firstY;
    sessionsEndY = sessionsStartY + sectionH;

    //activities values
    activitiesStartY = sessionsEndY + gap;
    activitiesEndY = activitiesStartY + sectionH;

    //schools values
    schoolsStartY = activitiesEndY + gap;
    schoolsEndY = schoolsStartY + sectionH;

    //data entry values
    daenStartY = schoolsEndY + gap;
    daenEndY = daenStartY + sectionH;
} 
```

平均剖面图代码如下所示：

```
//drawing each session: 
function createSessionsSection(sStartX, sStartY, sEndX, sEndY) {
    ctx.fillStyle=sectionColor;
    ctx.strokeStyle = "white";
    ctx.fillRect(sStartX, sStartY, sEndX, sEndY);
    ctx.strokeRect(sStartX, sStartY, sEndX, sEndY);
} 
```

发生的情况是，第一个和第二个块之间的间隙似乎是 15，第二个间隙是 0，第三个看起来像 -15，fillRects 也有一些重叠。我无法弄清楚是什么原因造成的。这是一个屏幕截图：

![截屏](../Images/1227ad31b82a51cedf4314c44661ef65.png)

# dynamics-crm-2011 - 没有看到任何 Rollup 12 下载文件？（CRM 2011 内部部署）

> ID：14317064
> 
> 赞同：0
> 
> 时间：2013-01-14T10:51:32.043
> 
> 标签：dynamics-crm-2011, dynamics-crm

根据这个[微软页面](http://support.microsoft.com/default.aspx?kbid=2795627)，Rollup 12 应该在上周四（2013 年 1 月 10 日）发布。

他们甚至声称它在他们的下载页面上，但我只能看到一些语言和 Outlook 文件。

我错过了重点吗？

[http://www.microsoft.com/en-us/download/details.aspx?id=36229](http://www.microsoft.com/en-us/download/details.aspx?id=36229)

[截图 http://helgi.com/videos/rollup12.JPG](http://helgi.com/videos/rollup12.JPG)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T11:53:03.170

Yes you are correct. The release was scheduled as you described. However, the server parts got pulled shortly after the release. Until now there is no official statement about the reason or a new date.

# android - Android：有 Nimbuzz 的 api 吗？

> ID：14317069
> 
> 赞同：-6
> 
> 时间：2013-01-14T10:51:40.210
> 
> 标签：android, nimbuzz

我想创建一个类似于 Nimbuzz 的应用程序......所以我正在寻找一些使用 Nimbuzz 的完整 api 或其他与 Nimbuzz 相同的东西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T12:34:09.763

Nimbuzz 使用[xmpp](http://en.wikipedia.org/wiki/XMPP)。探索[xmpp](http://xmpp.org/xmpp-software/libraries/)。有很多开源应用程序。 [http://code.google.com/p/miranda/](http://code.google.com/p/miranda/)

# css - 居中/底部堆叠的div？

> ID：14317072
> 
> 赞同：0
> 
> 时间：2013-01-14T10:51:52.393
> 
> 标签：css

我有一个这样的 div 设置：

```
<div class ="outer">
    <div class = "inner"></div>
</div> 
```

像这样使用CSS：

```
.outer {
width: 300px;
height: 200px;
background: red;
}
.inner {
position: absolute;
width: 200px;
height: 50px;
background: black;
opacity: .5;
} 
```

所以基本上是一个 div 堆叠在另一个 div 之上。但是，我希望顶部 div 位于父 div 的底部和中心，而不是左上角。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T10:54:34.587

听起来您希望内部 div 绝对位于外部 div 内，在这种情况下，这应该可以工作：

```
.outer {
position: relative;
width: 300px;
height: 200px;
background: red;
}
.inner {
position: absolute;
width: 200px;
height: 50px;
bottom: 0px;
left: 50px;
background: black;
opacity: .5;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T10:59:20.933

给 auter div 位置：相对

给内部div位置：绝对和底部：0px；左：0px；或任何你喜欢的地方。

给出外部 div 位置非常重要：相对。如果不是有时它会工作，有时不是。当然，它不会像所有东西一样在非常古老的 Internet Explorer 中工作。

绝对元素没有高度，所以如果你不能使用指定的（比如高度：120px）你就是f ***。您只能通过 javascript 检查一个绝对元素的高度并使用特殊边距添加它。

如果你的内部空间很少，你可以使用 z-index 来确定哪个容器在顶部。

# internet-explorer - windows phone IE 中的连字符

> ID：14317077
> 
> 赞同：0
> 
> 时间：2013-01-14T10:52:06.980
> 
> 标签：internet-explorer, windows-phone-7, hyphen

需要在 Windows phone 8 上的 IE 中使用连字符（或在 7/8 上更好）。我正在使用 Web 浏览器控件来显示内容，并且我正在嵌入一些 CSS 以使排版更漂亮。看来手机版的IE真的是被裁剪了！例如`p:first-child:first-letter`不工作..`hyphens:auto`也不工作。是否有在边距文本中添加连字符的解决方法？

**PS**现在尝试[Hyphenator.js](http://code.google.com/p/hyphenator/downloads/list)，但它有一个问题，因为找不到将本地脚本包含到webbrowser控件中的页面的方法（我使用NavigateToString）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T12:36:52.670

您可以引用本地 javascript 文件，但您需要先将它们加载到独立存储中。

这就是您可以将它们加载到本地存储中的方式。

```
var fileResourceStreamInfo = Application.GetResourceStream(new Uri("scripts/Hyphenator.js", UriKind.Relative));
if (fileResourceStreamInfo != null)
{
using (BinaryReader br = new BinaryReader(fileResourceStreamInfo.Stream))
{
    byte[] data = br.ReadBytes((int)fileResourceStreamInfo.Stream.Length);

    string strBaseDir = "scripts";

    if(!appStorage.DirectoryExists(strBaseDir))
    {
        //Debug.WriteLine("Creating Directory :: " + strBaseDir);
        appStorage.CreateDirectory(strBaseDir);
    }

    // This will truncate/overwrite an existing file, or 
    using (IsolatedStorageFileStream outFile = appStorage.OpenFile(AppRoot + "scripts/Hyphenator.js", FileMode.Create))
    {
        Debug.WriteLine("Writing data for " + AppRoot + "scripts/Hyphenator.js" + " and length = " + data.Length);
        using (var writer = new BinaryWriter(outFile))
        {
            writer.Write(data);
        }
    }
} 
```

}

然后你可以像这样引用它们：

```
<script type="text/javascript" src="scripts/Hyphenator.js"></script> 
```

# ruby-on-rails - 如何在heroku上调试“错误R10（启动超时）”问题

> ID：14317078
> 
> 赞同：2
> 
> 时间：2013-01-14T10:52:11.943
> 
> 标签：ruby-on-rails, heroku

我对哪些步骤可以了解在这 60 秒内发生的事情会阻止启动和通常的原因很感兴趣。

这就是日志文件的外观（没有说明实际发生的情况）

```
2013-01-14T10:34:17+00:00 app[web.1]: => Booting Thin
2013-01-14T10:34:17+00:00 app[web.1]: => Call with -d to detach
2013-01-14T10:34:17+00:00 app[web.1]: => Rails 3.2.2 application starting in production on http://0.0.0.0:52216
2013-01-14T10:34:17+00:00 app[web.1]: => Ctrl-C to shutdown server
2013-01-14T10:34:23+00:00 heroku[web.1]: Error R10 (Boot timeout) -> Web process failed to bind to $PORT within 60 seconds of launch
2013-01-14T10:34:23+00:00 heroku[web.1]: Stopping process with SIGKILL
2013-01-14T10:34:24+00:00 heroku[web.1]: Process exited with status 137
2013-01-14T10:34:24+00:00 heroku[web.1]: State changed from starting to crashed 
```

我认为如果至少有一个堆栈跟踪显示，当进程被杀死时，这将非常有帮助。

**发生这种情况时您会做什么/检查什么？**

PS：我不是在寻找我的案例的答案，而是一般的步骤，每个人都可以从中受益。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-18T22:39:29.780

我通常首先使用以下代码（initializers/debug_require.rb）找出哪些 gem 需要很长时间：

```
if ENV['DEBUG_REQUIRE']
  require 'benchmark'

  def require(file)
    @@first ||= Time.now
    rc = false
    ts = Benchmark.measure do
      rc = super
    end
    if ENV['DEBUG_REQUIRE'].to_f < ts.total
      total = ts.format("%t require #{file}")
      from_start = (Time.now - @@first).to_i
      $stdout.puts "#{total} (#{from_start} second(s) from start)"
    end
    rc
  end
end 
```

将此添加到 config/boot.rb：

```
require File.expand_path('../initializers/debug_require', __FILE__) 
```

并设置`heroku config:add DEBUG_REQUIRE=1`

观察日志输出是否有慢要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T17:38:39.023

也许您可以尝试在本地运行它以检查发生了什么？你可以使用这篇文章中提供的代码来做到这一点： [http ://ablogaboutcode.com/2012/05/03/benchmark-your-bundle/](http://ablogaboutcode.com/2012/05/03/benchmark-your-bundle/)

正如[Heroku App Boot Timeout](https://stackoverflow.com/questions/9677417/heroku-app-boot-timeout)讨论中所解释的那样，您应该查看所需的 gem 数量，并可能首先调整它们。如果您的引导加载时间超过 60 秒，您还可以查看这个 gem： [https](https://github.com/dblock/heroku-forward) ://github.com/dblock/heroku-forward 。

# iphone - iPhone应用程序上的脏尺寸

> ID：14317080
> 
> 赞同：0
> 
> 时间：2013-01-14T10:52:14.073
> 
> 标签：iphone, xcode-instruments

如何在 iPhone 应用程序上最小化脏大小？我发布了我的缓存图像，但没有最小化脏大小。有人有更多提示吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T10:54:20.860

使用仪器检查由于保留但未泄漏的内存而导致的内存丢失。后者是仍然指向的未使用内存。在 Instruments 上的 Allocations 工具中使用 Heapshot。

有关如何使用 Heapshot 查找内存占用，请参阅：[bbum 博客](http://www.friday.com/bbum/2010/10/17/when-is-a-leak-not-a-leak-using-heapshot-analysis-to-find-undesirable-memory-growth/)

基本上有方法是运行 Instruments allocate 工具，拍摄一个 heapshot，运行你的代码的直觉和另一个 heapshot 重复 3 或 4 次。这将指示在迭代期间已分配但未释放的内存。

要弄清楚结果，请查看个人分配。

如果您需要查看对象使用工具的保留、释放和自动释放发生的位置：

在仪器中运行，在分配中设置“记录参考计数”（您必须停止记录才能设置选项）。使选择器运行，停止记录，在那里搜索 ivar (datePickerView)，向下钻取，您将能够看到所有保留、释放和自动释放发生的位置。

![](../Images/7838716286f7948b8b94a93abc6764ae.png)

# php - 在 Facebook 应用程序中加载自定义 CSS

> ID：14317083
> 
> 赞同：-1
> 
> 时间：2013-01-14T10:52:29.390
> 
> 标签：php, facebook

我用 PHP 编写了一个应用程序，并希望在 facebook 上的 Canvas 页面中使用它。我需要检测应用程序是否已被 facebook 加载并加载特定的 CSS 文件，以便它正确显示。（我有许多 CSS 文件，例如用于移动设备的 mobile.css）

我已经为通过 Facebook 加载应用程序时编写了 CSS 文件，但是我在检测应用程序何时通过 facebook 显示时遇到问题。

我包含了 facebook PHP API 库，并认为使用 getUser() 函数就足够了。即如果getUser() == 0，它不是通过Facebook 加载的，但这并不适用于所有情况。

是否有一种万无一失的方法来检测是否通过 facebook 加载了应用程序？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T11:38:26.277

由于这是一个 Facebook 画布应用程序，因此您可以检查有效的 signed_request 参数作为 REQUEST 变量的一部分。如果您使用的是 Facebook PHP SDK，它已经有一个 getSignedRequest 函数，如果没有签名请求，它将返回 null。否则，请遵循[Facebook 的 signed_request 文档](https://developers.facebook.com/docs/howtos/login/signed-request/)。

# ios - 核心数据对象唯一 ID

> ID：14317084
> 
> 赞同：2
> 
> 时间：2013-01-14T10:52:35.090
> 
> 标签：ios, objective-c, core-data

我想向我的托管对象实体模型添加一个唯一 ID 字段。

我知道 Core Data 不使用 ID 关系，但这是不同的。我需要一种将线程安全数据传递给不同线程的方法，以便新线程可以从该数据中获取托管对象。

它可以是任何格式，但理想情况下只是单个对象/变量/值。

我可以将 CFUUID 作为 NSString 添加到对象中，但我不确定这是否理想？我应该做点别的吗？

欢迎任何替代方案，甚至只是确认 CFUUID 是可行的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T10:58:58.847

正如@Carl Veazey 提到的那样：这`NSManagedObjectID`正是您要寻找的！

这是一个简短的片段：

```
 NSManagedObject *objectInMainContext = ....;

  NSManagedObjectID *objectID = objectInMainContext.objectID;
  dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

    NSManagedObjectContext *newThreadContext = [[NSManagedObjectContext alloc] initWithConcurrencyType: ... ];    
    [newThreadContext objectWithID: objectID];
    ....
    ....
  }); 
```

# css - Webstorm 的前缀？跨浏览器 CSS

> ID：14317086
> 
> 赞同：1
> 
> 时间：2013-01-14T10:52:41.107
> 
> 标签：css, cross-browser, phpstorm, webstorm

有没有办法将prefixr集成到webstorm中？或者更确切地说，有没有一种方法可以使用 webstorm/phpstorm 制作跨浏览器的 CSS。

有一个附加的崇高文本，所以我希望这里会有类似的东西。

# javascript - 浏览器 ctrl+f 在页面上查找显示静态标题后面的结果

> ID：14317087
> 
> 赞同：16
> 
> 时间：2013-01-14T10:52:42.810
> 
> 标签：javascript, html, css

我创建了一个页面，它有一个页眉，即使我滚动页面，它也会保持原位。

问题是，当我通过按 Ctrl+f 键进行基于浏览器的单词查找并尝试在我的网页上搜索某些内容时，搜索位于 Header div 后面。我已经向下滚动以查看搜索到的作品（对于浏览器搜索的部分突出显示）。

我注意到 gmail 也有一个标题，它在页面滚动时也保持静止，他们也处理这个“查找”问题。

关于如何解决此问题的任何建议。

在下面提供我的页面的示例源：

```
 <html>

<head>
<style> 
#masthead {
    background-color: #131623;
    border-bottom: 4px solid #FFFFFF;
    border-top: 0 none;
    left: 0;
    min-width: 980px;
    position: fixed;
    top: 0;
    width: 100%;
}
#masthead {
    border-bottom: 0 none;
    border-top: 4px solid #171A23;
    left: 0;
    min-width: 980px;
    position: fixed;
    top: 0;
    width: 100%;
    z-index: 900;
}
#masthead {
    border-bottom: medium none;
    border-top: 0 none;
    box-shadow: none;
    overflow: visible;
    position: fixed;
}
#masthead {
    background-color: #131623;
    border-bottom: 4px solid #FFFFFF;
    border-top: 1px solid #666666;
    left: 0;
    min-width: 980px;
    position: fixed;
    top: 0;
    width: 100%;
    z-index: 900;
}

div, p, span, a, li, strong {
    font-family: Arial,sans-serif;
}

html, body, div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, abbr, acronym, address, big, cite, code, del, dfn, em, font, img, ins, kbd, q, s, samp, small, strike, strong, sub, sup, tt, var, b, u, i, center, dl, dt, dd, li, fieldset, form, label, legend {
    border: 0 none;
    font-size: inherit;
    margin: 0;
    outline: 0 none;
    padding: 0;
    vertical-align: baseline;
}
</style>
</head>
<body>
<div id="masthead">
  <div id="universal-nav" style="height:40px; background-color:#eaeaea;" >

  </div>
  <div class="menu-subtabs" style="height:30px; background-color:#fafafa;"">
        <h2>SalesOne</h2>

  </div>
</div>
</br></br></br></br></br>
<table border="0" summary="Content Block">
    <tr>
        <td>
            <p xmlns="">
                <a href="#Win">Win Summary</a>
                <br/>
                <a href="#Client">Client</a>

                <br/>
                <a href="#Overview">Project Overview</a>
                <br/>
            </p>
            <p xmlns="" id="Win">
                <strong>
                    <font color="#008000">Win Summary</font>
                </strong>

            </p>
            <p xmlns="">
                Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.</p>

            <p xmlns="" id="Client">
                <font color="#008000">
                    <strong>Customer</strong>
                </font>
            </p>
            <p xmlns="">
                <a href="http://www.yara.com/">Yara International ASA</a>Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.
            </p>

            <p xmlns="" id="Overview">
                <strong>
                    <font color="#008000">Project Overview</font>
                </strong>
            </p>
            <p xmlns="">
                ITS Enterprise Services - security services will provide hosted and managed services as part of SO project for data center hosting and management. The security components include:</p>

        </td>

    </tr>
</table>
</body>
</html>
</html> 
```

提前致谢，泽山

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-14T10:59:04.087

`position: fixed`通过您描述它的方式，我想您使用and`z-index`或可能使用 javascript将标题 div 覆盖在页面上。

相反，请尝试以下操作：

```
<div class="header">this is the header</div>
<div class="content" style="overflow: scroll;">
  this is the content div, if the content becomes to large it will scroll
</div> 
```

该`overflow: scroll`属性将使 div 可滚动，而不是整个页面。这将使您的标题可见，而不会将内容*放在*标题后面。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-17T16:09:37.710

Gmail 有一个带有溢出滚动的 div，因此它们从不在标题下隐藏任何内容。你也应该这样做，不要使用固定位置，让内容部分尽可能大，而不超出你的窗口视口。尝试这样的事情：

```
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
<style> 
#masthead {
    background-color: #131623;
    border-bottom: 4px solid #FFFFFF;
    border-top: 0 none;
    min-width: 980px;
    width: 100%;
}

div, p, span, a, li, strong {
    font-family: Arial,sans-serif;
}

html, body, div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, abbr, acronym, address, big, cite, code, del, dfn, em, font, img, ins, kbd, q, s, samp, small, strike, strong, sub, sup, tt, var, b, u, i, center, dl, dt, dd, li, fieldset, form, label, legend {
    border: 0 none;
    font-size: inherit;
    margin: 0;
    outline: 0 none;
    padding: 0;
    vertical-align: baseline;
}

#content{
    overflow: scroll;
    overflow-x: hidden;
}
</style>

<script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function () {
        var head = $('#masthead').height(),
        remaining_height = parseInt($(window).height() - head);
        $('#content').height(remaining_height);
    });
</script>
</head>
<body>
<div id="masthead">
  <div id="universal-nav" style="height:40px; background-color:#eaeaea;" >

  </div>
  <div class="menu-subtabs" style="height:30px; background-color:#fafafa;"">
        <h2>SalesOne</h2>

  </div>
</div>
    <div id="content">
<table border="0" summary="Content Block">
    <tr>
        <td>
            <p xmlns="">
                <a href="#Win">Win Summary</a>
                <br/>
                <a href="#Client">Client</a>

                <br/>
                <a href="#Overview">Project Overview</a>
                <br/>
            </p>
            <p xmlns="" id="Win">
                <strong>
                    <font color="#008000">Win Summary</font>
                </strong>

            </p>
            <p xmlns="">
                Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.</p>

            <p xmlns="" id="Client">
                <font color="#008000">
                    <strong>Customer</strong>
                </font>
            </p>
            <p xmlns="">
                <a href="http://www.yara.com/">Yara International ASA</a>Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.
            </p>

            <p xmlns="" id="Overview">
                <strong>
                    <font color="#008000">Project Overview</font>
                </strong>
            </p>
            <p xmlns="">
                ITS Enterprise Services - security services will provide hosted and managed services as part of SO project for data center hosting and management. The security components include:</p>

        </td>

    </tr>
</table>
        </div>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-23T23:21:15.987

我有一个解决方案，但我不知道你是否会喜欢它。

默认情况下，标题的**不透明度**将设置为... `opacity:0.5;`，这将使其几乎不可见，如果您正在搜索，并且可搜索的单词恰好在它后面，您将能够看到它.

当您在标题上移动鼠标时，您可以将其**不透明度**更改为**1**。

**查询**

```
$("#header").mouseover(function(){

    $("#header").css("opacity","1");
});

$("#header").mouseout(function(){

    $("#header").css("opacity","0.5");
}); 
```

您也可以稍微更改颜色，例如，如果它是蓝色的，则有深蓝色和浅蓝色，因为您使用的颜色是灰色的，感觉很浅..

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-21T18:06:40.483

如果不使用建议的解决方法修改代码，您将无法以您想要的方式解决此问题。这里的问题是：要立即修复它，您必须“了解”浏览器关于您的标记，以便查找栏知道固定定位的元素并进行额外的滚动。但是 find-bar 的可访问 API 只有扩展，没有 html 页面。[这是来自Chrome](http://www.chromium.org/developers/design-documents/find-bar)和[Mozilla](https://developer.mozilla.org/en-US/docs/XUL/Findbar)的一些文档，可能有助于阅读。

值得一提的是，除了建议的标记修复之外，您还可以使用自己的 find-bar javascript 实现。[这里](http://www.nsftools.com/misc/SearchAndHighlight.htm)或多或少的工作示例，在[9 cloud IDE](http://c9.io)的编辑器中也使用了类似的解决方法。因此，简而言之，您可以使用或使用自己的实现来捕获`Ctrl + F`关键点击，禁用浏览器默认行为。`stopPropagation()``preventDefault()`

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-22T22:36:58.063

我认为您需要做的就是在您的内容（表格）中添加一个边距顶部，即：

```
<html>

<head>
<style>

#content {
  margin-top:80px;
}

#masthead {
    background-color: #131623;
    border-bottom: 4px solid #FFFFFF;
    border-top: 0 none;
    left: 0;
    min-width: 980px;
    position: fixed;
    top: 0;
    width: 100%;
}
#masthead {
    border-bottom: 0 none;
    border-top: 4px solid #171A23;
    left: 0;
    min-width: 980px;
    position: fixed;
    top: 0;
    width: 100%;
    z-index: 900;
}
#masthead {
    border-bottom: medium none;
    border-top: 0 none;
    box-shadow: none;
    overflow: visible;
    position: fixed;
}
#masthead {
    background-color: #131623;
    border-bottom: 4px solid #FFFFFF;
    border-top: 1px solid #666666;
    left: 0;
    min-width: 980px;
    position: fixed;
    top: 0;
    width: 100%;
    z-index: 900;
}

div, p, span, a, li, strong {
    font-family: Arial,sans-serif;
}

html, body, div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, abbr, acronym, address, big, cite, code, del, dfn, em, font, img, ins, kbd, q, s, samp, small, strike, strong, sub, sup, tt, var, b, u, i, center, dl, dt, dd, li, fieldset, form, label, legend {
    border: 0 none;
    font-size: inherit;
    margin: 0;
    outline: 0 none;
    padding: 0;
    vertical-align: baseline;
}
</style>
</head>
<body>
<div id="masthead">
  <div id="universal-nav" style="height:40px; background-color:#eaeaea;" >

  </div>
  <div class="menu-subtabs" style="height:30px; background-color:#fafafa;"">
        <h2>SalesOne</h2>

  </div>
</div>
<table id="content" border="0" summary="Content Block">
    <tr>
        <td>
            <p xmlns="">
                <a href="#Win">Win Summary</a>
                <br/>
                <a href="#Client">Client</a>

                <br/>
                <a href="#Overview">Project Overview</a>
                <br/>
            </p>
            <p xmlns="" id="Win">
                <strong>
                    <font color="#008000">Win Summary</font>
                </strong>

            </p>
            <p xmlns="">
                Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.</p>

            <p xmlns="" id="Client">
                <font color="#008000">
                    <strong>Customer</strong>
                </font>
            </p>
            <p xmlns="">
                <a href="http://www.yara.com/">Yara International ASA</a>Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.Located in Norway, Yara International ASA is the world&#153;s leading chemical company that converts energy, natural minerals and nitrogen from the air into essential products for farmers and industrial customers. Through their environmental and industrial products, they help safeguard air and water quality and preserve food quality.
            </p>

            <p xmlns="" id="Overview">
                <strong>
                    <font color="#008000">Project Overview</font>
                </strong>
            </p>
            <p xmlns="">
                ITS Enterprise Services - security services will provide hosted and managed services as part of SO project for data center hosting and management. The security components include:</p>

        </td>

    </tr>
</table>
</body>
</html>
</html> 
```

`</br>`这也使您能够摆脱所有那些

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-01-23T09:12:35.873

我认为你身体上的边缘顶部应该可以解决问题。无论如何，它确实在chome。

```
<body style="margin-top: 80px;">
... 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-01-23T18:56:49.490

可以加个截图吗？如果是问题，我认为这是该浏览器中的错误。

浏览器必须修复它。

说明：网站永远不能与浏览器控件重叠。

有关详细信息，请参阅此页面：http: [//labs.neohapsis.com/2012/11/14/browser-event-hijacking/](http://labs.neohapsis.com/2012/11/14/browser-event-hijacking/)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-01-24T00:36:21.053

将您的内容放在 iframe 中。然后它将单独滚动，并且永远不会进入标题下方。

理论上你可以用overflow:scroll做同样的事情，但iframes往往更健壮。

# fonts - Sublime Text 2 - 调整字母间距

> ID：14317090
> 
> 赞同：2
> 
> 时间：2013-01-14T10:52:58.987
> 
> 标签：fonts, sublimetext2

有没有办法在 Sublime Text 2 中调整字母间距？也许片段，插件？有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T13:00:15.427

我认为在 Sublime Text 2 中调整字母间距的最佳方法是更改​​字体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-14T08:06:46.673

@sebast26 是对的。例如，`Droid Sans`没有字母间距，看起来不是很好。但`Droid Sans Mono`有足够的字母间距。

[在这里](https://damieng.com/blog/2007/11/14/droid-font-family-courtesy-of-google-ascender)你可以得到它。

# matlab - 图形的边框仅部分显示在 gui 中

> ID：14317093
> 
> 赞同：0
> 
> 时间：2013-01-14T10:53:07.060
> 
> 标签：matlab, user-interface, plot

我正在将 matlab 图绘制到 matlab gui 内的轴中。

这原则上可以正常工作，但轴的边界只是偶然可见。但是，我想确保绘图显示正确。

![在此处输入图像描述](../Images/b86a45a48001ef72d2df1d13a1bbc197.png)

我认为这与渲染器中的舍入有关。但是，由于这是在 gui 内，我想知道我是否可以仅为这个情节更改渲染器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T13:53:16.363

由于另一个使用需要`opengl`渲染器的透明度的绘图而触发了该错误。然而，opengl 有一个原则舍入问题，这会导致问题中显示的我的图中可见的缺失行。

如果我将此图的渲染切换为`painters`一切都按预期工作。

对于另一个情节，我必须切换回`opengl`，但由于两者没有同时显示，这不是问题。

# ios - NSMutableArray 属性填充 UITableView

> ID：14317098
> 
> 赞同：1
> 
> 时间：2013-01-14T10:53:21.250
> 
> 标签：ios, objective-c, uitableview, nsmutablearray

我有一个`UITableView`使用`NSMutableArray`. 向下滚动时会更新，这`tableview`是通过向`NSMutableArray`. 我面临的问题是，每当我从这个页面导航到另一个页面然后再返回时，`tableview`无论我做了多少更新，都会将其设置为数组的初始大小（这意味着如果我每次加载十个对象，则即使数组大小为 30，tableview 大小也会恢复为 10，注意：数组大小永远不会改变，只有表内容大小会改变）。我开始相信这与`NSMutableArray`. 代码的要点是这样的：

```
@interface FlowViewController : UIViewController <UITableViewDataSource, UITableViewDelegate>
{
    UITableView *flowTable;

    NSMutableArray *cellData;

}
@property(nonatomic, retain) IBOutlet UITableView *flowTable;

@property(nonatomic, retain) NSMutableArray *cellData;

- (void) getData;
- (void) storeData: (NSMutableArray*) arr; 

@end

@implementation FlowViewController

@synthesize cellData;

@synthesize flowTable;

- (void)viewDidLoad
{
    [super viewDidLoad];

    self.flowTable.autoresizingMask = UIViewAutoresizingFlexibleHeight;

    [self.flowTable setDataSource:self];
    [self.flowTable setDelegate:self];

    self.cellData = [[NSMutableArray alloc] init];

    [self getData];
}

- (void) storeData:(NSMutableArray *)arr
{
    for(NSDictionary *data in arr)
    {

        CellObject *det = [[CellObject alloc] init];

        // store details

        [self.cellData addObject: det];

    }

    [self.flowTable reloadData];
}

- (void) getData
{

    NSString *url = @"http://example.com/";

    NSMutableURLRequest *theRequest= [NSMutableURLRequest requestWithURL:[NSURL URLWithString:url]
                                                             cachePolicy:NSURLRequestUseProtocolCachePolicy
                                                     timeoutInterval:10.0];

[theRequest setHTTPMethod:@"GET"];

flowConnection =[[NSURLConnection alloc] initWithRequest:theRequest delegate:self startImmediately:YES];

}

#pragma mark -
#pragma mark Table View Data Source Methods

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

    return [self.cellData count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *CellIdentifier = @"FlowCell";

    MyFlowCell *cell = (MyFlowCell *)[self.flowTable dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {

        NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"FlowCell" owner:nil options:nil];
       // cell = [nib objectAtIndex:0];

        for(id currentObject in nib)
        {

        if([currentObject isKindOfClass:[MyFlowCell class]])

        {
            cell = (MyFlowCell *)currentObject;

        break;
    }
    }

    cell.selectionStyle = UITableViewCellSelectionStyleNone;

}

CellObject *rowItem = [cellData objectAtIndex:indexPath.row];

    // set cell data

}

    return cell;
}

- (void)tableView:(UITableView *)tableViewdidSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
[tableView deselectRowAtIndexPath:indexPath animated:YES];

    self.current = indexPath.row;

    [self performSegueWithIdentifier:@"flowToAnotherSegue" sender:nil];

}

- (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{

    if ([segue.identifier isEqualToString:@"flowToAnotherSegue"])
    {
        NewViewController *iv =
            segue.destinationViewController;

    iv.current = self.current;
        iv.data = self.cellData;

    }

}

#pragma mark -
#pragma NSURLConnection Delegate Methods
- (void) connection:(NSURLConnection *)_connection didReceiveResponse:(NSURLResponse *)response {
    NSLog(@"Receiving response: %@, status %d", [(NSHTTPURLResponse*)response allHeaderFields],     [(NSHTTPURLResponse*) response statusCode]);
    receivedData = [NSMutableData data];
}

- (void) connection:(NSURLConnection *)_connection didFailWithError:(NSError *)error {
    NSLog(@"Connection Failed: %@", error);   
}

- (void) connection:(NSURLConnection *)_connection didReceiveData:(NSData *)_data {

       [receivedData appendData:_data];
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{

    // get the new NSMutableArray from receivedData

    [self storeData: newMutableArray];

}

#pragma mark -
#pragma mark Deferred image loading (UIScrollViewDelegate)

- (void)scrollViewDidScroll:(UIScrollView *)aScrollView {

    if(Bottom reached) {

       // load more data

        [self getData];

        }

    }
}

@end 
```

我希望这不是太多。请告诉我我可能会出错的地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T12:01:28.333

将数组存储在共享类/单例类中。您可以创建自己的共享类，也可以使用`appDelegate`.

*   在 appDelegate 中声明一个`NSMutableArray`属性。`@property (nonatomic, strong) NSMutableArray *cellData;` 并合成它。

*   使用这个数组而不是你的 cellData 数组。 `AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];`替换你`self.cellData`的`appDelegate.cellData`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T11:03:40.647

将数组存储在共享类/单例类中。

每当您重新加载此页面时，`viewDidLoad`都会调用并且您的数组是 alloc+init 再次完成，将其设置为其默认值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T11:30:10.803

您的数组正在 viewDidLoad 上重新创建，您可以在分配之前检查它是否已经存在。

```
if (!self.cellData) {
    self.cellData = [[NSMutableArray alloc] init];
    [self getData];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T13:10:39.380

由于我找不到我的代码出了什么问题，我做了一个临时修复。就像我说的，NSMutableArray cellData 没有改变，但唯一改变的是 UITableView 本身（我在 viewDidDisappear 方法中找到了这个）。所以我这样做只是为了弥补这一点

```
 - (void) viewDidAppear:(BOOL)animated
{
    [self.flowTable reloadData];

    [self.flowTable scrollToRowAtIndexPath: lastIndex atScrollPosition:0 animated: NO];

} 
```

这会将 flowTable 返回到最后选择的单元格。它并不优雅，但它有效。请继续发表你的想法。我真的很想弄清楚这一点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-14T11:10:10.613

如果您`self.cellData = [[NSMutableArray alloc] init];`从视图中删除确实加载并使用 JIT 方法创建自己的 getter：

```
-(NSMutableArray *)cellData
{
    if(!_cellData){
        _cellData = [NSMutableArray array];
    }
    return _cellData;
} 
```

cellData 的内容将被保留，直到 FlowController 被释放。

# css - IE8 背景大小问题

> ID：14317101
> 
> 赞同：3
> 
> 时间：2013-01-14T10:53:34.830
> 
> 标签：css, internet-explorer-8, parallax

我目前正在构建一个视差站点，由于使用背景大小，它适用于除 IE8 之外的所有浏览器。

我尝试过 ms 过滤器，只是想知道其他人是否有解决方案。

```
section {
width: 100%;
position: relative;
overflow-x: hidden;
z-index: 0;

}

.parallax__one {
background: url("../Images/parallex__bg__1.png") 0px 0 no-repeat fixed;
    filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(     src='../Images/parallex__bg__1.png', sizingMethod='scale');
    -ms-filter: "progid:DXImageTransform.Microsoft.AlphaImageLoader( src='../Images/parallex__bg__1.png', sizingMethod='scale')";
    /* background size */
    -webkit-background-size: 100% 100%;
-moz-background-size: 100% 100%;
-ms-background-size: 100% 100%;
-o-background-size: 100% 100%;
background-size: 100% 100%; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-19T22:15:36.130

`background-size` 在**IE8**[中不起作用](http://caniuse.com/#search=background-size)

 **您将不得不使用类似这种[polyfill](https://github.com/louisremi/background-size-polyfill)的东西。

[https://github.com/louisremi/background-size-polyfill](https://github.com/louisremi/background-size-polyfill)

* * *

## 自述文件中的说明：

上传`backgroundsize.min.htc`到您的网站，连同`.htaccess`将发送 IE 所需的 mime 类型（仅限 Apache - 它内置在 nginx、node 和 IIS 中）。

在 CSS 中使用的任何地方`background-size`，都添加对这个文件的引用。

```
.selector { 
    background-size: cover;
    /* The url is relative to the document, not to the css file! */
    /* Prefer absolute urls to avoid confusion. */
    -ms-behavior: url(/backgroundsize.min.htc);
} 
```

以这种方式设置样式的元素应该有一个`position: relative;`or`position: fixed;`和一个 z-index。如果没有，他们将得到一个`position: relative;`and `z-index: 0;`。**

# asp.net - TeamCity 调用 URL 构建步骤

> ID：14317102
> 
> 赞同：9
> 
> 时间：2013-01-14T10:53:36.180
> 
> 标签：asp.net, teamcity

我正在使用 TeamCity 构建文件并将其部署到使用 Web Deploy 3 的 IIS 网站上。

我想在完成后添加一个调用 url 的步骤，以便在部署完成时可以刷新自定义缓存。

有没有办法可以添加构建步骤来调用 url？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-14T16:18:31.357

我将使用命中 url 的命令行脚本和 TeamCity 的命令行运行器之一来解决这个问题。

这个问题被标记为 asp.net，所以我假设你在 Windows 上。将此[Get-WebFile](http://poshcode.org/417)脚本放在[Powershell Build Runner](http://confluence.jetbrains.net/display/TCD7/PowerShell)中。然后`Get-WebFile "http://yourwebapp.net/"`在底部调用。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-11-11T11:54:42.053

一个更简单的方法是相同的 Powershell buildrunner 步骤，但只需使用：

`(New-Object System.Net.WebClient).DownloadString("http://yourwebapp.net");`.

不依赖其他脚本，只依赖本机 Powershell。这有什么问题吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-09-10T09:51:59.997

一种更新、更清洁、同样简单的方法也将使用 Powershell：

```
wget "http://yourwebapp.net" 
```

`wget`是 的别名`Invoke-WebRequest`，支持更多选项，例如设置请求超时。

完整文档： [https ://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.utility/invoke-webrequest?view=powershell-6](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.utility/invoke-webrequest?view=powershell-6)

*注意：在较旧的环境中，您可能需要设置`-UseBasicParsing`以防止解析错误。*

# android - 如何在 Android 中获取音轨/麦克风录音的最大幅度（分贝值）？

> ID：14317111
> 
> 赞同：0
> 
> 时间：2013-01-14T10:54:01.700
> 
> 标签：android, decibel

即使在这里，我也阅读了很多线程，但我仍然不知道如何开发声级计来获取麦克风的声级并将其显示为分贝值。

我正在使用[SoundMeter 类](http://code.google.com/p/android-labs/source/browse/trunk/NoiseAlert/src/com/google/android/noisealert/SoundMeter.java?r=2)中的代码，就像许多人建议的那样，但是这个类的作用是表示声音幅度在 0 到 12 之间的范围内，它很容易达到 12（最大值），只需在设备上敲击我的手指.

任何建议/教程将不胜感激。我了解麦克风和各种设备的校准问题，当我正在开发公司私人应用程序时，我可以使用适当的声音计工具校准将安装应用程序的设备。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:24:05.260

我在这里找到了有用的信息和示例：

*   [加斯特](https://github.com/gast-lib/gast-lib)

*   [专业的安卓传感器编程](http://eu.wiley.com/WileyCDA/WileyTitle/productCd-1118183487.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-31T01:33:16.417

用手指轻敲麦克风是您可以对麦克风做的最响亮的事情之一。（就像在你的耳朵里被轻拍一样。）如果这会导致最大分贝分数，我不会感到惊讶。它还会导致声音文件中的剪辑。

在离麦克风一英尺远的地方用正常的声音进行测试。这应该是分贝级别的中档。

# macros - 计算单元格中的字符（OpenOffice Writer）

> ID：14317112
> 
> 赞同：0
> 
> 时间：2013-01-14T10:54:07.957
> 
> 标签：macros, selection, openoffice.org, openoffice-writer

OpenOffice Calc 中调用`LEN`了一个函数，它计算单元格中的字符数。不幸的是，OpenOffice Writer 中的 Calc 函数列表非常有限。我可以在 OpenOffice Writer 的表格单元格中做类似的事情吗？

（基本上，我在文档中有几十个表格。目标是用必须具有特定字符数的文本填充单元格。`Tools / Word Count`每隔几分钟做一次非常麻烦。我想有一个单独的列，其中每个单元格显示在相应单元格中写入的许多字符。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T18:14:02.957

OpenOffice Writer 中的表格单元格中没有直接提供公式。

您可以做的是在 OpenOffice Calc 中制作表格并将其嵌入到 Writer 文档中。您也应该可以在 Writer 中对其进行编辑。看插入 | 对象 ... 用于插入嵌入式 OLE 对象的菜单选项（带有新建）。插入 OpenOffice 电子表格等在“插入 OLE 对象”对话框中被称为特殊情况。

进一步的观察：

您需要花点时间让它显示为没有行和列标题等的表格，并且您可能希望在最终文档中保护它，除非您希望收件人能够更改它。您需要使用 Calc 的其他功能来格式化单元格边框等，并控制电子表格中显示的内容。

可能无法以您想要的方式获得直接 OpenOffice Writer 表的某些功能。（例如，交叉引用和书签可能在嵌入对象和包含的 Writer 文档之间不起作用。可能有一些复杂的 Writer 表格单元格格式，必须在 Calc 中以不同的方式完成。）

（从技术上讲，ODF 规范允许直接在表格单元格中使用公式，但实现这一点并非易事，所有实现都需要以可互操作的方式进行。OpenFormula 定义的重要部分取决于其中是否有工作簿公式出现的地方。有一些公式可以依赖的特性在 ODF 文本文档模式中没有提供。嵌入对象的情况虽然是间接的，但在 OpenOffice 沿袭实现中通常得到支持。这也是 OLE 的发明目的.)

# ruby-on-rails - Rails 验证变量 proc

> ID：14317116
> 
> 赞同：0
> 
> 时间：2013-01-14T10:54:20.220
> 
> 标签：ruby-on-rails, ruby-on-rails-3, validation, lambda, proc

```
:inclusion => {:in => r = (1..15), :min => r.first, :max => r.last} 
```

这是我的工作代码。我想要动态的是“15”部分，例如

> :inclusion => {:in => r = (1..Vehicle.max_passengers), :min => r.first, :max => r.last}

我定义了以下类方法：

```
def self.max_passengers
   15
end 
```

当然没用。我试过使用 Procs 和 lambdas，但它对我来说不能正常工作。:( 有人可以帮我解决这个问题吗？有可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T11:29:08.293

您正在寻找[自定义验证方法](http://guides.rubyonrails.org/active_record_validations_callbacks.html#custom-methods)：

```
ActiveRecord::Base.class_eval do
  def self.validates_max_passenger(attr_name, r)
    validates attr_name, :inclusion => { :in => r, :min => r.first, :max => r.last } }
  end
end

# later in your class of choice:      
validates_max_passenger :passengers, 1..5 
```

或者，您可以使用 lambda 尝试以下操作

```
def self.max_passengers
   1..15
end  

validates :attrib, :inclusion => {:in => lambda { |obj| ClassName.max_passengers } } 
```

请注意，如果您`:in`在范围内使用，则不需要最小值/最大值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T11:22:44.370

检查是否`validates_with`有任何帮助。这个助手将记录传递给一个单独的类进行验证，您可以在其中使您的验证标准动态化，即通过读取一些配置等。有关更多信息，`validates_with`请参阅 ruby​​ on rails[指南](http://edgeguides.rubyonrails.org/active_record_validations_callbacks.html)

```
class Person < ActiveRecord::Base
  validates_with GoodnessValidator
end

class GoodnessValidator < ActiveModel::Validator
  def validate(record)
     # implement your dynamic criteria here                 
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-18T15:53:11.773

尝试这个：

```
inclusion: { in: proc { 1..Vehicle.max_passengers } } 
```

# python - 使用上下文/图在 Python 中向 Surf RDF 添加三元组

> ID：14317123
> 
> 赞同：1
> 
> 时间：2013-01-14T10:54:30.173
> 
> 标签：python, sesame, rdflib

在 python 中，我正在尝试使用 Surf RDF 将三元组添加到 Sesame 数据存储中。

但是，使用以下内容：

```
session.default_store.add_triple (s, p, o, surf.rdf.URIRef("http://hi/me")) 
```

导致添加了三元组，但没有上下文。所以 s, p, o 被添加到 store 但没有添加到任何上下文中。

我在上下文中做错了吗？其他人遇到过这个问题吗？

或者，将所有这些放入的好方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T09:36:49.327

或者，您也可以使用具有相当好的芝麻支持的 RDFAlchemy 使用 Sesame 和 Python。

代码现在在这里维护和运行： [https ://github.com/gjhiggins/RDFALchemy](https://github.com/gjhiggins/RDFAlchemy)

# c# - 在什么情况下 svcutil.exe 决定在生成的代理代码中应用 XmlSerializerFormatAttribute？

> ID：14317126
> 
> 赞同：2
> 
> 时间：2013-01-14T10:54:34.990
> 
> 标签：c#, wcf, xml-serialization, svcutil.exe

如标题所示，在什么情况下 svcutil.exe 决定应用于`XmlSerializerFormatAttribute`生成的代理代码？我找不到任何有关此的文档，因此我将不胜感激链接一些来源。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T14:16:27.727

只要 Web 服务的架构与 DataContractSerializer 不兼容，就会选择 XmlSerializer（并应用 XmlSerializerFormatAttribute）。正如用户“Aphelion”在他们的回答中指出的那样，可能发生这种情况的一种情况是使用一些遗留的 ASMX Web 服务。但是，在与非 .NET 服务（例如，基于 Java）进行互操作时，这种情况也很常见。此处的最终文档实际上是[http://msdn.microsoft.com/en-us/library/ms733112.aspx](http://msdn.microsoft.com/en-us/library/ms733112.aspx)，它准确地告诉您架构中支持和不支持的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T11:43:15.290

`XmlSerializerFormat`用于支持与 ASMX（经典 Web 服务）的向后兼容性。

默认情况下，代理将使用`DataContractSerializer`. 如果 WSDL 文档中的模式元素使用`DataContractSerializer`无法处理的 XSD 模式特性，它将选择`XmlSerializer`.

* * *

我可以推荐 Michele Leroux Bustamante 的“ [Learning WCF](http://my.safaribooksonline.com/book/programming/microsoft-wcf/9780596101626/contracts/approaches_to_serialization) ”以获得一些深入的示例。

# c# - FormsAuthentication.Decrypt 始终在其中一台 Web 服务器中返回 null

> ID：14317129
> 
> 赞同：9
> 
> 时间：2013-01-14T10:54:48.167
> 
> 标签：c#, asp.net, asp.net-mvc, webforms

我有一个基于 asp.net 4.0 的 webform 应用程序，部署到两个不同的服务器。webform 应用程序只有一个 Default.aspx 及其代码：

```
protected void Page_Load(object sender, EventArgs e)
{
    MachineKeySection section =
     (MachineKeySection)ConfigurationManager.GetSection("system.web/machineKey");

    this.Response.Write(section.DecryptionKey);
    this.Response.Write("<br />");

    this.Response.Write(section.ValidationKey);
    this.Response.Write("<br />");

    var authToken = "xxxxxx";  
        //the real token is obviously not xxx, just an example here

    this.Response.Write(authToken);
    this.Response.Write("<br />");

    var ticket = FormsAuthentication.Decrypt(authToken);
    if (ticket != null) this.Response.Write(ticket.Name);
    this.Response.End();
} 
```

具有相同 web.config 的相同代码部署到两个 Web 服务器。但是，其中一个工作正常，另一个总是`ticket`等于 null。如果我删除`if (ticket != null)`，则会引发空引用异常。它们具有完全相同的输出，除了票证部分。

Web 服务器在安装了 .NET 框架 4 的 Windows Server 2008 R2 SP1 上运行。我确定两个 Web 服务器上的代码完全一样，包括 machineKey：

```
<machineKey validationKey="xxx" decryptionKey="yyy" validation="SHA1" decryption="AES" /> 
```

这怎么可能发生？你对这个奇怪的问题有任何想法吗？

**更新**

MS BUG，需要更新包：http: [//support.microsoft.com/kb/2656351](http://support.microsoft.com/kb/2656351)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-11T14:34:54.877

在使用负载均衡器时，我遇到了您提到的这个确切问题。[.net 框架 4.0]

所有的事情都被验证了很多次，但没有成功。

只是想分享以下链接，因为最终安全更新：[MS11-100](http://support.microsoft.com/kb/2656351)已解决我的问题。

Tony 认为这可能是 .net 4.0 [http://tmoaikel.wordpress.com/2012/03/21/formsauthentication-decrypt-returns-null/](http://tmoaikel.wordpress.com/2012/03/21/formsauthentication-decrypt-returns-null/)中的错误，已由上述补丁修复。

也许这可能会帮助您进一步进步。

# asp.net-mvc-3 - asp.Net Mvc 3 中的新模板，如 DisplayTemplate 或 EditorTemplate

> ID：14317132
> 
> 赞同：0
> 
> 时间：2013-01-14T10:54:52.937
> 
> 标签：asp.net-mvc-3

在 asp.net Mvc 3 中存在两个 TemplateFolder EditorTemplates 和 DisplayTemplate 在代码中使用此语法访问模板

```
 <%= Html.EditorFor(m => m.FirstName)%>
 <%= Html.DisplayFor(m => m.FirstName)%> 
```

我想创建其他模板，例如 RowTemplate 文件夹并使用此语法

```
<%= Html.RowFor(m => m.FirstName)%> 
```

我该怎么做谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T12:30:44.177

您必须创建自定义 html 助手。请参阅这些链接：

1.  [http://www.codeguru.com/csharp/article.php/c18255/ASPNET-MVC-Creating-Custom-HTML-Helper-Methods.htm](http://www.codeguru.com/csharp/article.php/c18255/ASPNET-MVC-Creating-Custom-HTML-Helper-Methods.htm)

2.  [http://develoq.net/2011/how-to-create-custom-html-helpers-for-asp-net-mvc-3-and-razor-view-engine/](http://develoq.net/2011/how-to-create-custom-html-helpers-for-asp-net-mvc-3-and-razor-view-engine/)

3.  [http://www.asp.net/mvc/tutorials/older-versions/views/creating-custom-html-helpers-cs](http://www.asp.net/mvc/tutorials/older-versions/views/creating-custom-html-helpers-cs)

# php - 在 symfony2.1 中使用“类”作为实体名称

> ID：14317134
> 
> 赞同：0
> 
> 时间：2013-01-14T10:54:56.377
> 
> 标签：php

我有一个在逻辑上应该称为“班级”的实体（如学校的班级）

但是使用的时候

```
class Class { 
```

在我的代码中，它显然会引发错误。

因为我意识到这是一个保留关键字，因此“显而易见”

除了给实体起一个不同的名字之外，还有什么办法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T10:58:19.893

您不能使用“类”作为类名，这是一个保留字。

[http://php.net/manual/en/reserved.keywords.php](http://php.net/manual/en/reserved.keywords.php)

# linux-kernel - 如何编译 linux 内核 0.12 并使用 bochs 和 gdb 进行调试？

> ID：14317135
> 
> 赞同：1
> 
> 时间：2013-01-14T10:55:02.500
> 
> 标签：linux-kernel, gdb, bochs

我已经下载了 linux 0.12 源代码和 bochs 源代码。我在 linux-0.12 中编译了 linux 0.12 源代码。然后我用 gdb-stub 编译了 bochs 并安装在 debian 6.0 中。
但是，当我使用 gdb 和 bochs 调试 linux-0.12 内核时，它在 bochs 中说：“Panic：HD Controller not ready”。那么如何正确调试呢？

# javascript - JavaScript 中错误捕获的正确粒度是多少？

> ID：14317136
> 
> 赞同：6
> 
> 时间：2013-01-14T10:55:05.167
> 
> 标签：javascript, error-handling, try-catch

我曾经在`try...catch`我的 JS 类的任何方法中放置一个：

```
var MyConstructor = function() {
    this.init = function() {
        try {
            // the method code...
        } catch(error) {
            // the error manager log actions
        }
    };
    // other methods, with the same try/catch usage
}; 
```

这样，保持代码接口相对简单，我认为我的代码中的任何错误都会被捕获并记录/管理。

```
var myInstance = new MyConstructor(); 
```

相反，每个脚本一个全局 catch 块就足够了吗？关心抛出每个可能的（或值得注意的）错误，在我看来足以知道应用程序中发生的每个错误：

```
// no try...catch inside the classes, but only a global try...catch per script:
try {
    var myInstance = new MyConstructor();
} catch(error) {
    /*
        log in the needed environment
        (e.g. client-side, via console, or to the server...)
    */
} 
```

*我搜索并阅读了 Stackoverflow 上的线程和关于 JavaScript 错误管理的大量在线资源。
在这个阶段，我感兴趣的是找到找到所有错误的最佳方法，而不是管理它们以获得用户界面的优雅行为。
这不是正确的方法吗？我愿意接受任何建议。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T11:12:49.960

The rule of thumb is that you should ask yourself "Who should deal with the problem logically?" and stick to that.

The important thing is to remember that when you write a piece of code you in fact write a contract describing of how bits and pieces of code interact. For example in your case when you create a MyConstructor instance why would it fail? What promise is made when it is generated? Most importantly, who should deal with it failing?

**Some examples**

Let's say that for example we have a class `Car` and instances of `Car` have a method `drive(x)`.

When you call `drive(x)` the `Car` moves `x` places to the right.

The action `drive(x)` might fail, for example if the `Car` is already on the edge of the screen, or `Car` has no fuel.

We just defined `drive` as "the Car moves x places to the right" which means that the car **expects** to be able to complete the drive action and being unable to complete it is logically an exception. In this case it is quite obvious that the one handling the exception is the caller of drive and not the car itself since it wouldn't have to know what environment it is driving on. Even better, the caller should not attempt to drive the car off the edge or without fuel any way.

**In another case**

Let's say that in the same example `Environment` is a class that contains cars and it has a `moveCars()` method that moves all the cars in the environment according to some inner contained logic. `Environment` is used by a program that expects it to contain all the movement logic. We use some algorithm in `moveCars()` that is supposed to assure us that cars do not collide.

We might have some edge case we did not think of in our `moveCars()` method, or one that is not supposed to happen due to some assumption, however the user to environment expects it to contain all the move logic which means when an exception occurs it should deal with it itself.

**So, what is the general strategy?**

You should handle exceptions based on the responsibility the component running the code has.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T12:09:25.710

这个问题实际上并不局限于 JavaScript。异常捕获的正确粒度取决于可能有​​异常的模块和函数的正确粒度。设计良好的模块或功能应该绑定到定义良好的合约（[DbC](http://en.wikipedia.org/wiki/Design_by_contract)）。只要明确建立契约，异常处理问题就会变得容易得多。

关于合同的三个重要问题是：合同期望什么？合同保证什么？合约维护什么？例如，假设函数`divide(a, b)`返回`a / b`。这个函数期望它`b`是非零的（[前提条件](http://en.wikipedia.org/wiki/Precondition)），如果 b 恰好为零，这个函数**应该**抛出异常而不是**捕获**异常。因为*调用者*有责任保证传递参数的有效性，这是合同的一部分。除此之外，`divide`函数中可能发生的所有其他错误都**应该**被捕获，因为这是它自己的责任。作为合同的另一部分，`divide`承诺返回一个乘以`b` **应该**等于的值（即商）（即`a`所谓的[后置条件](http://en.wikipedia.org/wiki/Postcondition)）。

异常处理可能很复杂。一个函数（或模块）可以选择在其职责范围内捕获异常，或者如果超出其职责则选择不捕获，或者选择先捕获异常，处理它，然后在包装异常后重新抛出给调用者作为调用层的例外。

总而言之，异常处理不是一个独立的问题，它是整个系统设计的一部分。一旦设计者合理地将一个复杂的系统分成相对简单的模块，每个模块都有良好的抽象/接口和明确定义的合同/责任，如何以及在哪里处理异常应该是不言自明的。

# google-chrome - Filepicker.io 在 chrome 上拖放的问题

> ID：14317138
> 
> 赞同：0
> 
> 时间：2013-01-14T10:55:14.790
> 
> 标签：google-chrome, drag-and-drop, filepicker.io

我一直在为我的最新项目使用 filepicker，并且对它的健壮性和简单性感到非常满意。

但是，我们的 QA 发现了 chrome 上的文件选择器小部件的一个错误。尝试在 chrome 上拖放文件会导致页面刷新并在浏览器上显示图像。我在控制台上注意到我们收到一个错误

```
"Resource interpreted as Document but transferred with MIME type image/jpeg" 
```

在此处提到的文档中的文件选择器小部件上也可以看到此问题[https://developers.filepicker.io/docs/web/#widgets-pick](https://developers.filepicker.io/docs/web/#widgets-pick)

我在网络上的 SO 和其他地方对这个问题进行了一些研究，答案似乎指向服务器端问题。但是，此时我的脚本根本没有与服务器端通信，所以我有点困惑。

此功能在 FF 上运行顺畅。

对于如何解决这个问题，我将不胜感激。

最好的祝福，

蒂塔什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T19:29:27.210

这是通过对 Chrome 如何处理 dragOver 事件的行为更改引入的。已经为 Filepicker.io 创建了一个补丁，一切正常。

# rest - REST 服务基本身份验证会话超时

> ID：14317141
> 
> 赞同：2
> 
> 时间：2013-01-14T10:55:20.503
> 
> 标签：rest, session, web.xml, basic-authentication

我正在使用基本身份验证开发一个宁静的网络服务。在 web xml 中，我有以下内容：

```
<security-constraint>
    <web-resource-collection>
        <web-resource-name>Services</web-resource-name>
        <url-pattern>/*</url-pattern>
    </web-resource-collection>
    <auth-constraint>
        <role-name>User</role-name>
    </auth-constraint>
</security-constraint>
<session-config>
    <session-timeout>1</session-timeout>
</session-config> 
```

这按预期工作：用户在与服务交互时必须提供密码。

但是，为了符合更多的 RESTful 标准，我认为它确实应该是一个永远不会创建会话的无状态服务。换句话说，我想强制客户为每个请求提供他们的凭据。

如果我在 web-xml 中将 session-timeout 设置为 0，这将被解释为“永不过期”，这与我想要的完全相反。

有没有一种简单的方法可以让会话立即失效？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T20:58:45.073

您根本不需要 <session-config> 元素。

您所体验的是浏览器如何实现身份验证协议。

简而言之，基本身份验证 (rfc 2617) 的工作方式如下：

1.  客户端请求一些资源。
2.  服务器识别出该资源具有安全约束。因此，它会发送一个 HTTP 401“需要授权”响应。标题包含类似...

    ```
    WWW-Authenticate: Basic realm="Protected" 
    ```

3.  客户端重新发送其请求，但这次在标头中使用凭据（base64 编码），例如...

    ```
    Authorization: Basic dG9tY2F0OnMzY3JIdA== 
    ```

4.  服务器根据给定的凭据对请求进行身份验证并发送请求的资源。

为了方便人们浏览网页，几乎每个浏览器都会缓存凭据，直到浏览器关闭。每次在浏览器中重新加载页面时，“授权”条目都会与请求的标头一起发送。因此，在使用浏览器测试 Web 服务时，不会再次要求您提供凭据。

使用 Firefox，您可以控制该行为。查看有关[Firefox 的讨论，快速忘记 HTTP Basic Auth](https://superuser.com/questions/181547/firefox-quickly-forget-http-basic-auth)。

# javascript - 海豚浏览器 - 如何不在文本框中显示键盘

> ID：14317151
> 
> 赞同：0
> 
> 时间：2013-01-14T10:56:12.300
> 
> 标签：javascript, android, jquery, jquery-ui, datepicker

> **可能重复：**
> [在 Android TimePicker 上禁用键盘输入](https://stackoverflow.com/questions/2391216/disable-keyboard-input-on-android-timepicker)

我在 input type=text 元素上有一个 Jquery UI datepicker

```
$( "#date" ).datepicker(); 
```

...

```
<input type="text" id="date"/> 
```

在android上使用海豚浏览器，选择日期选择器会弹出一个键盘（以及显示日期选择器本身..）

如何禁用它而不显示键盘？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T14:53:26.947

我终于找到了实现这一目标的方法。

如果 input type=text 元素获得焦点，Dolphin 会显示键盘。（取消绑定焦点事件没有帮助）

因此，单击时我会从中删除焦点：

```
$( "#date" ).click(function(event) 
{
    this.blur();
}); 
```

# sql - 如何连接这两个表

> ID：14317155
> 
> 赞同：-2
> 
> 时间：2013-01-14T10:56:37.030
> 
> 标签：sql, sql-server-2008

我有两张桌子：

**表“一”：**

```
ServiceID, ApplicationCode, Success
1, 1, 2
1, 3, 2
2, NULL, 3 
```

**表“二”：**

```
ServiceID, ApplicationCode, Failure
1, 1, 1
1, 2, 3
2, NULL, 4
3, NULL, 1 
```

我想收到那个**结果表**：

***列：***

```
ServiceID, ApplicationCode, Success, Failure
1, 1, 2, 1
1, 3, 2, NULL
2, NULL, 3, 4
1, 2, NULL, 3
3, NULL, NULL, 1 
```

我正在使用 SQL Server 2008。

我应该使用什么查询？

**已编辑：我希望通过 ServiceID 和 ApplicationCode 加入这两个表。**

**编辑2：** 我试过的代码：

```
INSERT INTO #MidResult(ServiceID,ApplicationCode,SuccessCount,FailureCount)
SELECT case rtrim(ltrim(s.ServiceID)) WHEN NULL THEN f.ServiceID ELSE s.ServiceID END,s.ApplicationCode,s.SuccessCount,f.FailureCount
FROM #SuccessResult s
FULL JOIN #FailureResult f on f.ApplicationCode = s.ApplicationCode and s.ServiceID = f.ServiceID 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T11:05:29.693

您也许可以使用以下内容：

```
select 
  coalesce(t1.serviceid, t2.serviceid) serviceid,
  coalesce(t1.ApplicationCode, t2.ApplicationCode) ApplicationCode,
  t1.Success,
  t2.failure
from table1 t1
full outer join table2 t2
  on t1.ServiceID = t2.ServiceID
  and isnull(t1.ApplicationCode, '') = isnull(t2.ApplicationCode, '')
order by serviceid, ApplicationCode 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/92355/5)。

结果是：

```
| SERVICEID | APPLICATIONCODE | SUCCESS | FAILURE |
---------------------------------------------------
|         1 |               1 |       2 |       1 |
|         1 |               2 |  (null) |       3 |
|         1 |               3 |       2 |  (null) |
|         2 |          (null) |       3 |       4 |
|         3 |          (null) |  (null) |       1 | 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-14T11:01:05.157

```
Select one.ServiceID, one.ApplicationCode, one.Success, two.Failure
From TableOne one , TableTwo two
where one.ServiceID = two.ServiceID
and one.ApplicationCode = two.ApplicationCode 
```

只需注意 ServiceID 和 ApplicationCode 都应该匹配。

# mysql - MySQL JOIN / GROUP 一对多关系

> ID：14317160
> 
> 赞同：2
> 
> 时间：2013-01-14T10:57:03.700
> 
> 标签：mysql, grouping, inner-join, one-to-many

我有点卡住了..

我有两张桌子

```
mysql > EXPLAIN event;
+-------------+--------------+------+-----+---------------------+-----------------------------+
| Field       | Type         | Null | Key | Default             | Extra                       |
+-------------+--------------+------+-----+---------------------+-----------------------------+
| id          | int(11)      | NO   | PRI | NULL                | auto_increment              |
| name        | varchar(100) | NO   | MUL |                     |                             |
| extUrl      | varchar(192) | NO   |     |                     |                             |
+-------------+--------------+------+-----+---------------------+-----------------------------+ 
```

一个事件可以有多个

```
mysql> explain eventDate;
+----------------+--------------+------+-----+---------------------+-----------------------------+
| Field          | Type         | Null | Key | Default             | Extra                       |
+----------------+--------------+------+-----+---------------------+-----------------------------+
| id             | int(11)      | NO   | PRI | NULL                | auto_increment              |
| category_id    | int(11)      | NO   | MUL | 0                   |                             |
| event_id       | int(11)      | NO   | MUL | 0                   |                             |
| location_id    | int(11)      | NO   | MUL | 0                   |                             |
| name           | varchar(100) | NO   |     |                     |                             |
| eventDate      | timestamp    | NO   |     | 0000-00-00 00:00:00 |                             |
+----------------+--------------+------+-----+---------------------+-----------------------------+ 
```

我想通过 查询事件`id`，`location_id`下**一个即将到来** `eventDate`的事件，我被困在如何形成该查询

我目前有这个

```
 SELECT
      e.id,
      d.location_id,
      d.eventDate
 FROM
      event e
          INNER JOIN eventDate d ON d.event_id = e.id AND d.eventDate >= CURRENT_TIMESTAMP
 WHERE
      e.id = 5107
 GROUP BY
      e.id
 ORDER BY
      d.eventDate ASC 
```

现在这会返回一个结果，但是我 GROUP BY 事件，所以我不确定如何确保真的选择了下一个 eventDate。此外，我没有使用任何聚合函数（ group by one, aggregate many ），这似乎不是一个干净且明确定义的结果要求 - MySQL 现在随机选择其中一个 eventDate 行不是吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T11:07:26.223

这应该总是给你第一个即将发生的事件：

```
 SELECT
      e.id,
      d.location_id,
      d.eventDate
 FROM
      event e
          INNER JOIN eventDate d ON d.event_id = e.id
 WHERE
      e.id = 5107
      AND
      d.id = (SELECT d1.id FROM eventDate d1 WHERE d1.event_id = 5107 AND d1.eventDate >= CURRENT_TIMESTAMP ORDER BY d1.eventDate ASC LIMIT 1) 
```

但更好的方法是添加`LIMIT 1`到您当前的查询并删除`GROUP BY`：

```
 SELECT
      e.id,
      d.location_id,
      d.eventDate
 FROM
      event e
          INNER JOIN eventDate d ON d.event_id = e.id AND d.eventDate >= CURRENT_TIMESTAMP
 WHERE
      e.id = 5107
 ORDER BY
      d.eventDate ASC
 LIMIT 1 
```

# c# - 无法将 null 分配给数组类型的匿名属性

> ID：14317161
> 
> 赞同：35
> 
> 时间：2013-01-14T10:57:05.993
> 
> 标签：c#, linq, anonymous-types

我有任何`Pilot`具有 () 属性的 () 对象数组`Hanger`，它可能为 null，它本身具有 ( `List<Plane>`) 属性。出于测试目的，我想将其简化并“展平”为具有属性`PilotName`(string) 和`Planes`(array) 的匿名对象，但不确定如何处理 null`Hanger`属性或空`PlanesList`.

（为什么是匿名对象？因为我正在测试的 API 对象是只读的，并且我希望测试是“声明性的”：自包含、简单且可读……但我愿意接受其他建议。另外，我我试图了解更多关于 LINQ 的信息。）

例子

```
class Pilot
{
    public string Name;
    public Hanger Hanger;
}

class Hanger
{
    public string Name;
    public List<Plane> PlaneList;
}

class Plane
{
    public string Name;
}

[TestFixture]
class General
{
    [Test]
    public void Test()
    {
        var pilots = new Pilot[]
        {
            new Pilot() { Name = "Higgins" },
            new Pilot()
            {
                Name = "Jones", Hanger = new Hanger()
                {
                    Name = "Area 51",
                    PlaneList = new List<Plane>()
                    {
                        new Plane { Name = "B-52" },
                        new Plane { Name = "F-14" }
                    }
                }
            }
        };

        var actual = pilots.Select(p => new
        {
            PilotName = p.Name,
            Planes = (p.Hanger == null || p.Hanger.PlaneList.Count == 0) ? null : p.Hanger.PlaneList.Select(h => ne
            {
                PlaneName = h.Name
            }).ToArray()
        }).ToArray();

        var expected = new[] {
            new { PilotName = "Higgins", Planes = null },
            new
            {
                PilotName = "Jones",
                Planes = new[] {
                    new { PlaneName = "B-52" },
                    new { PlaneName = "F-14" }
                }
            }
        };

        Assert.That(actual, Is.EqualTo(expected));
    } 
```

直接的问题是线路`expected... Planes = null`错误，

> 不能分配给匿名类型属性，但承认潜在的问题可能是 using `null`in `actual`is using`null`并不是最好的方法。

任何想法如何分配空数组或采用与in`expected`不同的方法？`null``actual`

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2013-01-14T10:58:48.993

您必须使用***键入*** *的null*：

```
(List<Plane>)null 
```

或者

```
(Plane[])null 
```

否则编译器不知道你希望匿名类型的成员是什么类型。

**更新** 正如@AakashM 正确指出的那样 - 这解决了您将 a 分配`null`给匿名成员的问题 - 但实际上并没有编译 - 如果它这样做了，它将不允许您引用这些成员。

解决方法是这样做（不幸的是，匿名数组`null`和匿名`Planes`数组都需要强制转换：

```
var expected = new[] {
  new { 
          PilotName = "Higgins", 
          Planes = (IEnumerable)null
      },
  new {
          PilotName = "Higgins", 
          Planes = (IEnumerable)new [] {
                              new { PlaneName = "B-52" },
                              new { PlaneName = "F-14" } 
                          }
      }
}; 
```

所以`IEnumerable`用作成员类型。你也可以使用`IEnumerable<object>`，但效果都是一样的。

或者-您可以`IEnumerable<dynamic>`用作通用类型-这可以让您这样做：

```
Assert.AreEqual("B-52", expected[1].Planes.First().PlaneName); 
```

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2013-01-14T11:13:39.177

There are two things happening:

Firstly, when you construct an instance of an anonymous type using `new { Name = Value}`, in order to build the type the compiler needs to be able to work out the **type** of `Value`. Just `null` on its own doesn't have a type, so the compiler wouldn't know what type to give your `Planes` member.

Now, if you were using a named type for the value, you could just say `(type)null` and be done, BUT because you want an array of another anonymous type, there's no way to *refer* to is (it's anonymous!).

So how do you get `null` typed as array of an anonymous type? Well, the C# spec guarantees that anonymous types with members the same names and types (in the same order!) are **unified**; that is, if we say

```
var a = new { Foo = "Bar" };
var b = new { Foo = "Baz" }; 
```

then `a` and `b` have **the same type**. We can use this fact to get our suitably-typed `null` thus:

```
var array = (new[] { new { PlaneName = "" } });
array = null; 
```

It's not pretty but it works - now `array` has the right **type** but a `null` **value**. So this compiles:

```
var array = new[] {
  new {
    PlaneName = ""
  }
};
array = null;

var expected = new[] {
  new {
    PilotName = "Higgins",
    Planes = array
  },
  new {
    PilotName = "Higgins",
    Planes = new[] {
      new {
        PlaneName = "B-52"
      },
      new {
        PlaneName = "F-14"
      }
    }
  }
}; 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-01-14T11:01:19.510

只需使用`default(Plane[])`而不是`null`.

# c# - EntityFramework/LINQ：过滤分层列表

> ID：14317162
> 
> 赞同：0
> 
> 时间：2013-01-14T10:57:06.360
> 
> 标签：c#, linq, entity-framework

我需要过滤一个分层列表，如：

*   文件夹 1
*   文件夹 2
    *   文件 1
    *   文件 2
    *   文件夹 4
        *   文件 3
        *   文件 4
*   文件夹 3
    *   文档

每个文件夹都有文件夹和/或文档。每个文档都有一个`Status`枚举。如何获取所有空文件夹或文档状态为“已删除”的文档？

```
var folders = from f in context.Folders
              // where f.Documents.All( d => d.Status == DocumentStatus.Deleted )
              select f; 
```

延迟加载已启用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T10:59:09.033

这个怎么样：

```
Folders.Where(folder => folder.Documents.Any(document => document.Status == DocumentStatus.Deleted)); 
```

* * *

不幸的是，您有一个更复杂的结构，上面的 linq 语句仅适用于具有文档的文件夹，而不适用于其他文件夹。

要做你想做的事，你必须手动定义一个谓词并用它过滤，因为如果一个文件夹有子文件夹本身，你必须递归调用过滤器方法来查看条件是否为真。

# caching - 在 Plone plone.app.caching 中为@@search 设置规则集

> ID：14317163
> 
> 赞同：1
> 
> 时间：2013-01-14T10:57:10.553
> 
> 标签：caching, plone, varnish

我正在用 Varnish 强化我的网站，并且 plone.app.caching 运行良好，除了每个页面请求都是对 /@@search 的额外请求？

问题是@@search 总是去后端（所以当我尾随z2.log 时似乎）。

我可以看到它正在获取一个设置为 2000 年 1 月 1 日的过期标头......没有猴子修补 plone.app.caching 我怎么能阻止这个请求进入后端呢？

我宁愿不为@@search 编写清漆 vcl 规则，而是使用 plone.app.caching UI 来实现这一点......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T15:26:32.083

正如我在 IRC 中告诉你的，你需要一个 cache:ruleset 指令。

```
 <cache:ruleset
      for="plone.app.search.browser.Search"
      ruleset="plone.app.caching.moderateCaching"
      /> 
```

# android - 在 WallpaperManager.ACTION_CHANGE_LIVE_WALLPAPER 出现错误

> ID：14317167
> 
> 赞同：6
> 
> 时间：2013-01-14T10:57:52.643
> 
> 标签：android, live-wallpaper

我正在按照[本](http://www.vogella.com/articles/AndroidLiveWallpaper/article.html)教程创建我的拳头动态壁纸。但是我`can not be resolved or is not a field`在这两行上遇到了错误

`WallpaperManager.ACTION_CHANGE_LIVE_WALLPAPER` `WallpaperManager.EXTRA_LIVE_WALLPAPER_COMPONENT`

在尝试实现这一目标时

```
Intent intent = new Intent( WallpaperManager.ACTION_CHANGE_LIVE_WALLPAPER);
intent.putExtra(WallpaperManager.EXTRA_LIVE_WALLPAPER_COMPONENT,
            new ComponentName(this, LiveWallService.class)); 
```

编译器提供了这些建议：

```
WallpaperManager.ACTION_LIVE_WALLPAPER_CHOOSER
WallpaperManager.COMMAND_DROP
WallpaperManager.COMMAND_SECONDARY_TAP
WallpaperManager.COMMAND_TAP
WallpaperManager.WALLPAPER_PREVIEW_META_DATA 
```

有什么问题吗...？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-14T11:03:29.307

WallpaperManager.ACTION_CHANGE_LIVE_WALLPAPER 仅在 API 级别 16 (4.1.2) 中添加。也许您已将目标 SDK 版本设置为低于 16？

在 API 级别 16 以下，您只能使用意图操作 WallpaperManager.ACTION_LIVE_WALLPAPER_CHOOSER 将用户发送到整个 LWP 选择屏幕，并告诉他从那里选择您的壁纸。您可以通过以下方式设置您的代码：

```
Intent i = new Intent();

if(Build.VERSION.SDK_INT >= 16)
{
    i.setAction(WallpaperManager.ACTION_CHANGE_LIVE_WALLPAPER);
    i.putExtra(WallpaperManager.EXTRA_LIVE_WALLPAPER_COMPONENT, new ComponentName(packageName, canonicalName));
}
else
{
    i.setAction(WallpaperManager.ACTION_LIVE_WALLPAPER_CHOOSER);
}

// send intent 
```

# html - 网站的 Twitter 流

> ID：14317170
> 
> 赞同：0
> 
> 时间：2013-01-14T10:58:07.443
> 
> 标签：html, wordpress, twitter

过去，我使用几行代码制作了一些 Twitter 流，并根据我的需要对其进行了样式设置。但自从 twitter API 发生变化后，我对它现在的工作方式感到有些困惑。

我已经阅读了 twitter 网站的开发页面，它说您现在应该为您的网站创建一个小部件。

创建小部件时，您必须登录用户 twitter 并创建一个新的小部件，我正在设计一个网站，目前没有用户 twitter。

我看到 wordpress 主题和插件具有 twitter 流，无需创建小部件，您只需输入您的用户名即可。这就是我过去使用几行代码和一个用户名的方式。

我想知道是否有人可以将我引用到一个页面或向我展示为网站创建 twitter 流的“新”方式，而无需每次都创建一个小部件。

希望这是有道理的！谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T11:15:39.410

您可以使用任何帐户创建小部件。唯一的问题是，一旦在现场实施该小部件，就不应从该帐户中删除它。您可以稍后从用户帐户制作小部件并从那里复制粘贴代码。之后，您可以从您的帐户中删除该小部件。但请记住，如果您从复制粘贴代码的 twitter 帐户中删除它，小部件将无法工作/显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T14:47:52.170

我刚刚尝试了以下演示 remysharp.com/2007/05/18/add-twitter-to-your-blog-step-by-step 并且似乎仍然有效。无论如何对我来说都很好。干杯

# typoscript - 在打字稿中使用字符串替换/正则表达式

> ID：14317171
> 
> 赞同：0
> 
> 时间：2013-01-14T10:58:08.007
> 
> 标签：typoscript

我在 Typo3 项目（Typo3 v 4.5）中使用 powermail 表单。我正在通过打字稿将表单字段中的数据分配给数据库字段。

```
tt_address.last_name.data = TSFE:fe_user|sesData|powermail_88|uid18 
```

现在，我面临的问题是，如果一个字段包含字符“&”，则将其更改为 html 实体表示，并将其保存在数据库中。无论如何，我可以通过上述表达式右侧的字符串替换/正则表达式删除此错误。我尝试用 javascript 来做，但不能解决问题。请多多包涵，因为我对印刷术的了解非常基本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T12:20:05.460

您是说“与”符号更改为“与符号”？您的预期行为是什么？不幸的是，您没有说明您使用的是哪个 TYPO3 版本，所以这个答案对于替换来说是通用的，可能对您不起作用。八法：

从 TYPO3 4.6 开始，引入了替换功能：http: [//docs.typo3.org/typo3cms/TyposcriptReference/Functions/Replacement/Index.html](http://docs.typo3.org/typo3cms/TyposcriptReference/Functions/Replacement/Index.html)

该函数也包含在 stdWrap 中。这意味着您可以使用如下语法：

```
tt_address.last_name.stdWrap.replacement {
  10 {
    search = &
    replace.char = 38
  }
} 
```

有关更多示例，请查看上面的链接。

# asp.net - 构建 SharePoint Web 应用程序时如何从 asp.net mvc 知识中受益

> ID：14317172
> 
> 赞同：4
> 
> 时间：2013-01-14T10:58:10.593
> 
> 标签：asp.net, asp.net-mvc, entity-framework, sharepoint

我将开始一个新项目，包括为一家提供技术支持服务的公司构建一个 Web 应用程序，包括修复 Pc、笔记本电脑、操作系统安装等。

该网站将允许用户查看可用的产品和服务，他们还可以登录到 Web 应用程序以查看他们的订单状态（例如采购订单、修复服务器等）。

我有一个由三名开发人员组成的团队，我们正在使用 asp.net MVC 开发网站和 Web 应用程序。客户对构建 SharePoint Web 应用程序很感兴趣，因为我和我的团队以前没有在 SharePoint 上工作过；所以我的问题是，我们能否从以下领域的知识中受益：-

1.  asp.net mvc包括-但不限于-（mvc安全（如防伪令牌、授权令牌等）、mvc路由、模型绑定、asp.net mvc ajax（ajax.actionlinks.etc））

2.  C＃

3.  ADO.Net 实体框架。

4.  剃刀视图

如果我们决定采用 SharePoint 方法，或者我们在 asp.net mvc 方面的知识在 SharePoint 2013 或 2010 项目中对我们没有多大帮助？

此致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T07:23:39.903

如果您的解决方案的某些部分需要自定义开发，那么您的 C#/ASP.Net 知识将会很有用。但是，在开发 SharePoint 应用程序时，首选目标是使用 SharePoint 提供的工具，并将自定义开发作为最后的手段。

您将有一个相当陡峭的学习曲线来开发适当的 SharePoint 应用程序。如果除了此应用程序之外对 SharePoint 没有其他需求，您最好将其制作为纯 MVC 应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T02:29:05.033

SharePoint 是基于 ASP.NET 和 C# 构建的平台。您的 ASP.NET 和 C# 技能构成了开始学习 SharePoint 的最低要求。

请注意，SharePoint 是一个庞大的产品，获得足够的 SharePoint 知识以成功完成您的项目的时间将非常好。

了解 MVC 不足以正确交付 SharePoint 解决方案。

# android - 此处不允许使用 JetBrain Idea android xml 元素

> ID：14317176
> 
> 赞同：10
> 
> 时间：2013-01-14T10:58:23.237
> 
> 标签：android, xml, android-layout, intellij-idea

此处不允许使用 JetBrain Idea android xml 元素。

[我找到了这个教程，但我仍然不明白如何解决这个问题](http://blogs.jetbrains.com/idea/tag/code-inspections/)

我得到了这样的东西[http://clip2net.com/s/2I0HI?dw=1](http://clip2net.com/s/2I0HI?dw=1)

```
<GridLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:columnCount="10"
    android:rowCount="10">

    <TextView
        style="@style/GlobalTextView"
        android:layout_gravity="right"
        android:text="@string/lbl_player_kicking_kicking"
        android:background="@drawable/bg_top"
        android:layout_column="1"
        android:layout_row="1"
        android:padding="10dp" />

    <TextView
        style="@style/GlobalTextView"
        android:layout_gravity="right"
        android:background="@drawable/bg_bottom"
        android:text="@string/lbl_player_receiving_rec"
        android:layout_column="1"
        android:layout_row="2"
        android:padding="10dp" />
    </GridLayout > 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T11:09:49.677

确保您在项目中使用 SDK 级别 14 或更高版本。

打开项目属性，*文件*>*项目结构*并选择*项目*。在*Project SDK*下，它必须是*Android 4.0 平台*（或更新的平台）。

# asp.net - 框架集布局的现代替代方案

> ID：14317177
> 
> 赞同：0
> 
> 时间：2013-01-14T10:58:27.677
> 
> 标签：asp.net, html, web-applications

这是我的主页布局：

```
<HTML>
<HEAD>

</HEAD>
<FRAMESET>
    <FRAMESET>
        <FRAME name="menu"  src=<%=menu%> >
        <FRAME src=<%=bottom%> >
    </FRAMESET>
    <FRAMESET>
        <FRAME  src=<%=tittle%>  >
        <FRAME name="center"  src=<%=center%>>
    </FRAMESET>
</FRAMESET> 
```

由于此页面是 10 年前构建的，并且 html5 不再支持框架集，因此我想对我的布局进行现代化改造。

哪个是当今的替代品？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T11:12:51.273

Do some reading about html5\. Descide if your site should be responsive (that is shall it resize to fit various sized clients such as both desktop browsers and mobile browsers well). If it should be responsive do some reading about that.

My "personal/general" advice:

I think you should get rid of the frames. If you are to use asp.net (not MVC), you could put the parts that are shared between pages in a master page. Menus should be located in a `<nav>` element and the navigation menu should be built using `<ul> / <li>` elements and styled to look like you want.

There are lots of examples on the web. For example take a look at [http://www.initializr.com/](http://www.initializr.com/) where you can download a template for a new website in the "new style".

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T11:05:33.030

本身没有替代方案。“只需”使用现代 HTML 和 CSS 重写您的整个页面。如果您不知道该怎么做，我建议您买一两本书（关于 HTML5 和 CSS3）并从那里开始工作。抱歉，没有什么更具体的了，我们可以在这里回答您。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T11:05:37.957

这样的事情应该让你开始：

```
<!DOCTYPE html>

<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>Test Page</title>
    </head>

    <body>
        <header>
            ...
        </header>

        <div id="content">
            ...
        </div>

        <footer>
            ...
        </footer>
    </body>
</html> 
```

只需剖析一些现有的网站。没有适用于每种情况的食谱。

# javascript - 显示来自 Blob Javascript 的视频

> ID：14317179
> 
> 赞同：43
> 
> 时间：2013-01-14T10:58:31.620
> 
> 标签：javascript, html, video, blob

我想在 HTML5 视频标签中显示来自 Javascript Blob/File 对象的视频。

此代码仅适用于小视频：

```
var reader = new FileReader();
reader.onload = function(e) {
    document.getElementById("video").src=reader.result;
 }
reader.readAsDataURL(vid); 
```

我不能将它用于大视频（> 10MB）。有没有办法在 HTML 5 中显示来自 blob 对象的大视频？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-01-16T14:40:14.973

我找到了。太简单了，我什至没有看到它......

```
 /**
 * @param {Blob} videoFile
 * @param {HTMLVideoElement} videoEl 
 * @returns {void}
 */
function display( videoFile, videoEl ) {

    // Preconditions:
    if( !( videoFile instanceof Blob ) ) throw new Error( '`videoFile` must be a Blob or File object.' ); // The `File` prototype extends the `Blob` prototype, so `instanceof Blob` works for both.
    if( !( videoEl instanceof HTMLVideoElement ) ) throw new Error( '`videoEl` must be a <video> element.' );

    // 

    const newObjectUrl = URL.createObjectURL( videoFile );

    // URLs created by `URL.createObjectURL` always use the `blob:` URI scheme: https://w3c.github.io/FileAPI/#dfn-createObjectURL
    const oldObjectUrl = videoEl.currentSrc;
    if( oldObjectUrl && oldObjectUrl.startsWith('blob:') ) {
        // It is very important to revoke the previous ObjectURL to prevent memory leaks. Un-set the `src` first.
        // See https://developer.mozilla.org/en-US/docs/Web/API/URL/createObjectURL

        videoEl.src = ''; // <-- Un-set the src property *before* revoking the object URL.
        URL.revokeObjectURL( oldObjectUrl );
    }

    // Then set the new URL:
    videoEl.src = newObjectUrl;

    // And load it:
    videoEl.load(); // https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement/load

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-06-29T06:19:01.810

在某些情况下，应该在 createObjectURL() 方法中提供 blobObject.data。看这个简单的技巧：

```
function playVideo(videoStream){ // as blob 

 var video = document.querySelector('video');

 var videoUrl=window.URL.createObjectURL(videoStream.data);// blob.data gives actual data

 video.src = videoUrl;
} 
```

# installation - 首次安装后启动 Apache Servicemix 时出现问题

> ID：14317180
> 
> 赞同：1
> 
> 时间：2013-01-14T10:58:40.313
> 
> 标签：installation, apache-servicemix

我是 apache camel 和 servicemix 的新手。我已经在我的 Windows 上下载了 apache serviceMix (zip)，但是运行 servicemix.bat 在我的 cmd 上返回一个错误。错误：

```
Could not create framework: java.lang.ArrayIndexOutOfBoundsException: -1
java.lang.ArrayIndexOutOfBoundsException: -1
at java.util.ArrayList.elementData(ArrayList.java:371)
at java.util.ArrayList.get(ArrayList.java:384)
at org.apache.felix.framework.BundleImpl.getCurrentModule(BundleImpl.java:1050)
at org.apache.felix.framework.BundleImpl.getSymbolicName(BundleImpl.java:859)
at org.apache.felix.framework.Felix.toString(Felix.java:1019)
at org.apache.felix.framework.Logger.doLog(Logger.java:128)
at org.apache.felix.framework.Logger._log(Logger.java:181)
at org.apache.felix.framework.Logger.log(Logger.java:114)
at org.apache.felix.framework.ExtensionManager.<init>(ExtensionManager.java:201)
at org.apache.felix.framework.Felix.<init>(Felix.java:374)
at org.apache.felix.framework.FrameworkFactory.newFramework(FrameworkFactory.java:28)
at org.apache.karaf.main.Main.launch(Main.java:266)
at org.apache.karaf.main.Main.main(Main.java:427) 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T10:06:28.680

Java 7 的 ServiceMix <= 4.4.2 中存在一个已知问题。您必须切换回 Java 6。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-17T09:32:05.773

错误可以通过安装1.6 java解决，servicemix 4.4支持1.6 java。

# html - CSS ul li，从第二级悬停

> ID：14317181
> 
> 赞同：0
> 
> 时间：2013-01-14T10:58:44.517
> 
> 标签：html, css, menu, hover

请帮助改进 ul li 菜单。

请查看我的示例[http://jsfiddle.net/fantill/SBkRk/](http://jsfiddle.net/fantill/SBkRk/)

现在它可以从第一级菜单悬停，但我希望它可以从第二级悬停并保持当前悬停效果。（**显示第一和第二**级并隐藏剩余的）

我累了很多，但我找不到办法做到这一点，由于这个`position: relative, absolute`问题，悬停设置似乎只能从第一级开始工作。

非常感谢您的建议。

现在就像

```
--------------------
| 1st | 2nd |  3rd |
| ----|-------------
|     |     |
|-----|-----|
|     |
------- 
```

我希望它是这样的

```
1st and 2nd level are always visible
-------
| 1st |
| ----|------
| |2nd| 3rd |
|-----|------
| |2nd|
------- 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T11:23:28.000

我已经更新了你的[jsfiddle](http://jsfiddle.net/SBkRk/1/)以按照你的方式工作。这是更新的CSS：

```
.MM ul {
  position:absolute;
    list-style: none;
    margin: 0;
    padding: 0;
    z-index: 2;
}
.MM ul li:hover > ul {
    display:block;
}
.MM ul li {
    position: relative;
  display: block;
}
.MM ul ul {
    display:none;
    position: relative;
    white-space: nowrap;
    top: 0;
    left:0;
}
.MM ul ul ul {
  position: absolute;
    top: 0px;
    left: 100%;
} 
```

# markdown - 我如何取消降价块？

> ID：14317192
> 
> 赞同：1
> 
> 时间：2013-01-14T10:59:22.173
> 
> 标签：markdown

Markdown 中有文章。列表后的代码块呈现为列表的一部分。两个单独的代码块被渲染为一个。如何标记列表结尾或代码块结尾？有什么方法可以标记语言代码是什么并获得彩色代码，例如[http://prismjs.com/](http://prismjs.com/)？

* * *

*   在第二部分中，我将详细介绍页面、热点、手势、过渡和计时器的使用以及如何设置它们以与 TAP 一起使用。然后，我将向您展示如何开始在 Fireworks 中构建点击原型，然后将其转换为交互式 iOS 原型。
*   在第三部分中，将详细介绍如何转换为 TAP iOS 原型。我还将分享一些关于它在 iOS 设备上的使用技巧。您将获得完成本教程所需的所有演示文件，以及有关 Fireworks 和原型设计的大量相关资源列表。

    var fs = require('fs'), hogan = require('hogan.js');

    var templateDir = './templates/', 模板, templateKey, result = 'var myTemplates = {};';

    fs.readdirSync(templateDir).forEach(function(templateFile) {

    ```
    template = fs.readFileSync(templateDir + templateFile, 'utf8');
    templateKey = templateFile.substr(0, templateFile.lastIndexOf('.'));

    result += 'myTemplates["'+templateKey+'"] = ';
    result += 'new Hogan.Template(' + hogan.compile(template, {asString: true}) + ');' 
    ```

    });

    fs.writeFile('compiled.js', 结果, 'utf8');

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T15:22:31.353

1.  Markdown 代码高亮是依赖于实现的。例如*StackExchange*使用带有自己标记的[Google Prettify](http://google-code-prettify.googlecode.com/svn/trunk/README.html)`<!-- language: lang-js -->`。

2.  据我了解降价规则，您必须在代码块中间使用文本

    ```
    code block 1 
    ```

    一些描述

    ```
    code block 2 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T21:46:30.667

我不了解 prismjs，但在某些（大多数？）mark down 风格中，您可以使用 HTML 注释 hack（`<!--`）或不间断空格 hack（`&nbsp;`）：

*   在第二部分中，我将详细介绍页面、热点、手势、过渡和计时器的使用以及如何设置它们以与 TAP 一起使用。然后，我将向您展示如何开始在 Fireworks 中构建点击原型，然后将其转换为交互式 iOS 原型。
*   在第三部分中，将详细介绍如何转换为 TAP iOS 原型。我还将分享一些关于它在 iOS 设备上的使用技巧。您将获得完成本教程所需的所有演示文件，以及有关 Fireworks 和原型设计的大量相关资源列表。

```
var fs = require('fs'),
    hogan = require('hogan.js');

var templateDir = './templates/',
    template,
    templateKey,
    result = 'var myTemplates = {};'; 
```

```
fs.readdirSync(templateDir).forEach(function(templateFile) {

    template = fs.readFileSync(templateDir + templateFile, 'utf8');
    templateKey = templateFile.substr(0, templateFile.lastIndexOf('.'));

    result += 'myTemplates["'+templateKey+'"] = ';
    result += 'new Hogan.Template(' + hogan.compile(template, {asString: true}) + ');'

});

fs.writeFile('compiled.js', result, 'utf8'); 
```

# php - 如何导航回列表

> ID：14317199
> 
> 赞同：1
> 
> 时间：2013-01-14T10:59:59.037
> 
> 标签：php, html, navigation, breadcrumbs

我已经建立了一个具有以下结构的业务目录：

![](../Images/69ccd883252441dfc8187400c2079078.png)

如您所见，可以采用 4 种不同的路径来获取业务资料。

我想用 html 和 php（没有 jquery）构建一个面包屑，并能够从业务资料、业务画廊和个人图像页面导航回我来自的列表页面。

我会使用 php 中的哪个函数来记住我来自哪里？我会将列表页面的 url 作为变量传递到其他页面吗？如果是这样，我会使用会话吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T11:02:42.270

我认为 $_SERVER['HTTP_REFERER'] 是您需要的

这会告诉您访问者从哪个 url 到达页面

SESSIONS 和 COOKIES 可以跨其他页面传递这个变量

正如 DaGhostman Dimitrov 所提到的，如果用户浏览 privatley 或使用阻止跟踪的插件或使用书签，则此变量可能为空

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T11:16:10.187

这是我的看法：

1.  从 Session 获取面包屑（数组）。
2.  获取当前网址。
3.  在面包屑数组中附加当前 URL。
4.  更新会话中的面包屑。

为每个页面加载重复这些步骤。

# ajax - 渲染后 selectOneMenu 空值

> ID：14317200
> 
> 赞同：0
> 
> 时间：2013-01-14T11:00:04.160
> 
> 标签：ajax, jsf-2, selectonemenu

我的 web 应用程序中的个人资料编辑表单有一点问题。我使用 3 个 selectOneMenu（日、月、年）来修改生日。当新月有不同的天数范围时，我使用 ajax 侦听器来呈现天数。当我进入个人资料版时，从数据库加载用户的生日并填充 selectOneMenu。如果我只更改一天 - 版本完成没有任何错误。每当我更改月份时，day 都会更改为 null，我不知道为什么。这是 .xhtml 代码片段：

```
<h2>
   #{messages.birthday}:
   <h:selectOneMenu id="daySelect" value="#{profileEdition.dayOfBirth}" >
      <f:selectItems value="#{profileEdition.dateValues.daysList}" var="day" itemLabel="#{day.valueLabel}" itemValue="#{day.valueValue}"/>
      <f:ajax listener="#{profileEdition.dayChanged}" />
   </h:selectOneMenu>
   <h:selectOneMenu value="#{profileEdition.monthOfBirth}">
      <f:selectItems value="#{profileEdition.dateValues.monthsList}" var="month" itemLabel="#{month.valueLabel}" itemValue="#{month.valueValue}"/>
      <f:ajax listener="#{profileEdition.monthChanged}" render="daySelect" />
   </h:selectOneMenu>
   <h:selectOneMenu value="#{profileEdition.yearOfBirth}" >
      <f:selectItems value="#{profileEdition.dateValues.yearsList}" var="year" itemLabel="#{year.valueLabel}" itemValue="#{year.valueValue}"/>
      <f:ajax listener="#{profileEdition.yearChanged}" render="daySelect" />
   </h:selectOneMenu>
</h2> 
```

在我的@ManagedBean 中，我得到了这些侦听器，他们正在更改 daysList 以防万一，并在 day 超出新月份的天数范围时将 dayOfBirth 值更改为 null。我插入了一些 System.out.println(); 在这些侦听器中检查他们是否正在更改 dayOfBirth 值，但事实并非如此。奇怪的是——我已经在我的注册表单中使用了这个机制，它工作正常。

有什么问题？

**DayChanged 监听器：**

```
public void dayChanged(){
    System.out.println("DAY HAS CHANGED! \n NEW DATE IS: " + dayOfBirth + "-" + monthOfBirth + "-" + yearOfBirth);
} 
```

**MonthChanged 监听器：**

```
public void monthChanged(){
    ResourceBundle bundle = ResourceBundle.getBundle("locale.messages",
        FacesContext.getCurrentInstance().getViewRoot().getLocale());
    String day = bundle.getString("day");
    String month = bundle.getString("month");
    if(monthOfBirth.equals(month)){
        monthOfBirth = null;
    } else {
        int m = Integer.parseInt(monthOfBirth);
        if(m==1 || m==3 || m==5 || m==7 || m==10 || m==12) {   
            dateValues.daysList = new DateValues.Values[32];               
            dateValues.daysList[0] = new DateValues.Values(day,day);
            for(int i=1;i<10;i++){
                dateValues.daysList[i] = new DateValues.Values("" + i,"0" + i);
            }
            for(int i=10;i<32;i++){
                dateValues.daysList[i] = new DateValues.Values("" + i,"" + i);
            }
        }else if(m==2) {                             
            dateValues.daysList = new DateValues.Values[30];    
            dateValues.daysList[0] = new DateValues.Values(day,day);
            for(int i=1;i<10;i++){
                dateValues.daysList[i] = new DateValues.Values("" + i,"0" + i);
            }
            for(int i=10;i<30;i++){
                dateValues.daysList[i] = new DateValues.Values("" + i,"" + i);
            }
            if(dateValues.searchForDay(dayOfBirth) == false){ 
                System.out.println("DAY IS OUT OF SELECTED MONTH RANGE!");
                dayOfBirth = null;
            }
        }else {
            dateValues.daysList = new DateValues.Values[31];
            dateValues.daysList[0] = new DateValues.Values(day,day);
            for(int i=1;i<10;i++){
                dateValues.daysList[i] = new DateValues.Values("" + i,"0" + i);
            }
            for(int i=10;i<31;i++){
                dateValues.daysList[i] = new DateValues.Values("" + i,"" + i);
            }
            if(dateValues.searchForDay(dayOfBirth) == false){
                System.out.println("DAY IS OUT OF SELECTED MONTH RANGE!");
                dayOfBirth = null;
            }
        }
    }
    System.out.println("MONTH HAS CHANGED! \n NEW DATE IS: " 
        + dayOfBirth + "-" + monthOfBirth + "-" + yearOfBirth);
} 
```

**YearChanged 监听器：**

```
public void yearChanged(){
    ResourceBundle bundle = ResourceBundle.getBundle("locale.messages",
        FacesContext.getCurrentInstance().getViewRoot().getLocale());
    String day = bundle.getString("day");
    String year = bundle.getString("year");
    if(yearOfBirth.equals(year)){
        yearOfBirth = null;
    }
    if(monthOfBirth !=null && yearOfBirth != null){
        int y = Integer.parseInt(yearOfBirth);
        int m = Integer.parseInt(monthOfBirth);
        if(y%400==0 && m==2){    
            dateValues.daysList = new DateValues.Values[30];  
            dateValues.daysList[0] = new DateValues.Values(day,day);
            for(int i=1;i<30;i++){
                dateValues.daysList[i] = new DateValues.Values("" + i,"" + i);
            }
        } else if(y%100==0 && m==2){         
            dateValues.daysList = new DateValues.Values[29];  
            dateValues.daysList[0] = new DateValues.Values(day,day);
            for(int i=1;i<29;i++){
                dateValues.daysList[i] = new DateValues.Values("" + i,"" + i);
            }
            if(dateValues.searchForDay(dayOfBirth) == false){ 
                System.out.println("DAY IS OUT OF SELECTED MONTH RANGE!");
                dayOfBirth = null;
            }
        } else if(y%4==0 && m==2){               
            dateValues.daysList = new DateValues.Values[30];  
            dateValues.daysList[0] = new DateValues.Values(day,day);
            for(int i=1;i<30;i++){
                dateValues.daysList[i] = new DateValues.Values("" + i,"" + i);
            }
        } else if(m==2) {                    
            dateValues.daysList = new DateValues.Values[29];  
            dateValues.daysList[0] = new DateValues.Values(day,day);
            for(int i=1;i<29;i++){
                dateValues.daysList[i] = new DateValues.Values("" + i,"" + i);
            }
            if(dateValues.searchForDay(dayOfBirth) == false){ 
                System.out.println("DAY IS OUT OF SELECTED MONTH RANGE!");
                dayOfBirth = null;
            }
        }
    }
    System.out.println("YEAR HAS CHANGED! \n NEW DATE IS: " 
        + dayOfBirth + "-" + monthOfBirth + "-" + yearOfBirth);
} 
```

所有这些 if/else 语句都用于确定闰年和特定月份的适当天数范围。感谢 System.out，我已经注意到 dayOfBirth 更改为 null 但就在我提交表单之后。

以防万一我在这里通过提交表单触发我的方法。

```
 public String editProfile() throws ParseException{
    System.out.println("Edition! You have chosen:");
    System.out.println("Day: " + dayOfBirth);
    System.out.println("Month: " + monthOfBirth);
    System.out.println("Year: " + yearOfBirth);
    birthday = dayOfBirth + "-" + monthOfBirth + "-" + yearOfBirth;
    System.out.println("NEW BIRTHDAY IS: " + birthday);
    if(DateValidator.isValid(birthday) == false){
        ResourceBundle bundle = ResourceBundle.getBundle("locale.messages",
            FacesContext.getCurrentInstance().getViewRoot().getLocale());
        String text = bundle.getString("invalidDate");
        FacesMessage msg = new FacesMessage(FacesMessage.SEVERITY_ERROR, text, text);
        FacesContext.getCurrentInstance().addMessage("", msg);
        return null;
    }
    Date convertedBirthday = sdf.parse(birthday);
    myAccount.setUrodziny(convertedBirthday);
    mokEndpoint.editAccount(myAccount);
    return "editionSuccess";
} 
```

@ManagedBean 是 @ViewScoped

# asp.net - 发生一般错误

> ID：14317201
> 
> 赞同：0
> 
> 时间：2013-01-14T11:00:05.250
> 
> 标签：asp.net

GDI+ 中出现一般错误。

说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

```
Exception Details: System.Runtime.InteropServices.ExternalException:
 A generic error occurred in GDI+. 
```

源错误：

```
Line 69: 
Line 70:             // Save Thumbnail Image
Line 71:             bmpResized.Save(strPath, fmtImageFormat);
Line 72:             // Save big Images
Line 73:             bmpBigResized.Save(strBigPath, fmtBigImageFormat); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T11:03:08.637

ASP.NET 不支持[`System.Drawing`命名空间](http://msdn.microsoft.com/en-us/library/system.drawing.aspx)中的类：

> 不支持在 Windows 或 ASP.NET 服务中使用 System.Drawing 命名空间中的类。尝试从这些应用程序类型之一中使用这些类可能会产生意想不到的问题，例如服务性能下降和运行时异常。有关受支持的替代方法，请参阅 Windows 映像组件。

请改用[Windows 映像组件](http://msdn.microsoft.com/en-gb/library/windows/desktop/ee719654%28v=vs.85%29.aspx)。

# c# - Hid Global.Multi-ISO Mifare 阅读器二进制协议

> ID：14317208
> 
> 赞同：0
> 
> 时间：2013-01-14T11:00:58.993
> 
> 标签：c#, protocols, nfc, rfid, mifare

谁能解释一下 HID-MULTI-ISO Mifare 阅读器的二进制协议是如何工作的？

我正在向 MIFARE 阅读器（HID HF 多 ISO 阅读器）发送帧，但它失败了。根据数据表，框架如下所示：

```
>> 020101787803 
```

其中`02`是 STX，`01`是设备 ID，`78`是作为命令的数据，`reset`另一个`78`是 BCC（块校验字符），它是 01,01 和 78 异或的结果。最后一个`03`是 ETX。

当我发送帧时，它会导致错误，`? ? ?`这意味着命令错误。

我熟悉 ASCII 协议，它运行良好，但我想使用涉及帧的二进制协议进行阅读器配置。

任何答案表示赞赏..

# java - 等效于 Java MessageDigest 的 Shell 脚本

> ID：14317212
> 
> 赞同：2
> 
> 时间：2013-01-14T11:01:07.183
> 
> 标签：java, shell, cryptography, openssl, sha1

如何仅使用 shell 脚本运行以下 Java 功能？openssl 不应该解决问题吗？由于某些原因，值不一样。

壳：

```
$ cat test.txt 
test
$ openssl sha1 test.txt
SHA1(test.txt)= fde773a18bb29f5ed65e6f0a7aa717fd1fa485d4 
```

Java代码（play框架出处）：

```
import org.apache.commons.codec.binary.Hex;

public static String hexSHA1() {
    value = "test";
    try {
        MessageDigest md;
        md = MessageDigest.getInstance("SHA-1");
        md.update(value.getBytes("utf-8"));
        byte[] digest = md.digest();

        return byteToHexString(digest);
    } catch (Exception ex) {
        return null;
    }
}

public static String byteToHexString(byte[] bytes) {
    // a94a8fe5ccb19ba61c4c0873d391e987982fbbd3
    return String.valueOf(Hex.encodeHex(bytes));
} 
```

fde773a18bb29f5ed65e6f0a7aa717fd1fa485d4 != a94a8fe5ccb19ba61c4c0873d391e987982fbbd3

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T11:10:36.030

结尾处有回车符和换行符`test.txt`。这些显然不在您的 Java 字符串中。

```
$ echo -n test > test.txt
$ openssl sha1 test.txt
SHA1(test.txt)= a94a8fe5ccb19ba61c4c0873d391e987982fbbd3

$ echo -ne 'test\r\n' > test2.txt
$ openssl sha1 test2.txt
SHA1(test2.txt)= fde773a18bb29f5ed65e6f0a7aa717fd1fa485d4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T11:09:19.473

值与您为文件计算 SHA1 的第一种情况不同`test.txt`，在下一种情况下您为`test`字符串计算相同的值。

如果您`openssl`要从 Java 应用程序内部调用，请使用以下代码片段：

Runtime.getRuntime().exec('openssl', 'sha1', 'test.txt')

# php - preg_replace 链接文本

> ID：14317213
> 
> 赞同：0
> 
> 时间：2013-01-14T11:01:12.663
> 
> 标签：php, regex, preg-replace

我正在修改一个包含消息的 php 页面。

消息就像

```
Welcome to our page bla bla bla <a href="link.php">Link content</a> 
```

我需要将链接内容替换为

```
<img src="constant.png"/> 
```

我怎么做？

PS。你知道任何关于正则表达式的好教程吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-04T07:49:34.183

假设没有包含“链接内容”的其他标签，您可以在以下位置执行此操作`bash`：

```
sed -r 's@<a href="[^"]+">[^<]*</a>@<img src="constant.png"/>@g' 
```

如果您不需要访问属性中的值，甚至更好`href`：

```
sed -r 's@<a[^>]*>[^<]*</a>@<img src="constant.png"/>@g' 
```

# c - 如何从C中动态数组中的二进制文件中读取数据

> ID：14317215
> 
> 赞同：0
> 
> 时间：2013-01-14T11:01:17.730
> 
> 标签：c, arrays, dynamic, data-structures, binaryfiles

在下面的代码中，我尝试从二进制文件中读取数据并将其写入动态数组。
函数“getAnz”应该给我数据集的数量。
在函数“readRecs”中，我想从二进制文件中读取数据并将其写入动态数组（zArr）。
该程序为我提供了正确数量的数据集。是的。

现在我有几个问题：
1.我读取数据并将其写入动态数组的方式有什么问题？
2\. 如何将“zArr”从 main 函数传递给 readRecs 函数？
3\. 还有其他更简单的方法来获取文件中的数据集数量吗？
谢谢你的帮助。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

struct daten
{
    char name[20];
    int alter;
};

long getAnz(FILE *fp)
{
    struct daten ptr;
    long counter = 0;

    while(fread(&ptr, sizeof(struct daten), 1, fp))
    {
        counter++;
    }

    fclose(fp);

    return counter;
}

void foo(FILE *fp, struct daten *zArr[], long lAnz)
{
    long i = 0;

    for(i = 0;i < lAnz;i++)
    {
        if(i == 0)
        {
             zArr = malloc(sizeof(*zArr));
        }
        else
        {
            zArr = realloc(zArr,sizeof(*zArr)*(i+1));
        }   
    }

    fclose(fp);
}

int main(void)
{
    struct daten *zArr;
    long anz = 0, i = 0;

    FILE *fp = fopen("daten.bin", "rb");
    anz = getAnz(fp);
    printf("%ld\n", anz);
    foo(fp, &zArr, anz);

    for(i = 0; i<anz; i++)
    {
        printf("%s\t", zArr[i].name);
        printf("%d\n", zArr[i].alter);
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T11:21:32.207

[在这里](http://code.google.com/p/c-cgi-lib/source/browse/lib/getfile.c)，我做了这样的动态阅读：

```
ssize_t mygetline(char **buffer, int fd){
        size_t bufportion = 16000, bufsz = bufportion, i = 0;
        free(*buffer); *buffer = NULL;
        char *ptr;
        char *buf;
        buf = malloc(bufsz);
        if(!buf){freeQS(); die(MEMERR);}
        ptr = buf;
        if(read(fd, ptr, 1) != 1){ free(buf); return -1; }
        do{
                if(*ptr == '\n' || *ptr == 0) break;
                ptr++;
                if(++i >= bufsz){
                        bufsz += bufportion;
                        buf = realloc(buf, bufsz);
                        if(!buf){freeQS(); die(MEMERR);}
                        ptr = &buf[i];
                }
        }while(read(fd, ptr, 1) == 1);
        *ptr = 0;
        if(ptr > buf && *(ptr-1) == '\r') *(ptr-1) = 0;
        *buffer = strdup(buf);
        free(buf);
        return strlen(*buffer);
} 
```

在上面的代码中，没有用数据填充数组的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T11:06:43.850

在其他问题中，您通过值传递指向的指针`zArr`，`void foo(FILE *fp, struct daten *zArr[], long lAnz)`因此它的更改范围在函数内。如果您希望更改在 foo 返回后仍然存在，请尝试`void foo(FILE *fp, struct daten * &zArr, long lAnz)`

# r - 删除除一列以外的所有行都为空的行

> ID：14317220
> 
> 赞同：0
> 
> 时间：2013-01-14T11:01:31.643
> 
> 标签：r

使用以下代码：

```
data <- rbind(c(1,1,2,3),
          c(1,1, NA, 4), 
          c(1,4,6,7), 
          c(1,NA, NA, NA), 
          c(1,4, 8, NA)) 
```

我想删除第 2-4 列为 NA 的行。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T11:31:08.607

另一种方式：

```
 data[! rowSums(is.na(data[,2:4])) == 3, ] 
```

如果它只是第 2 列**和**第 4 列，那么它将是：

```
data[! rowSums(is.na(data[,c(2,4)])) == 2, ] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T11:06:10.977

你可以这样做：

```
filteredData <- data[!is.na(data[,2]) | !is.na(data[,4]),]

> data
     [,1] [,2] [,3] [,4]
[1,]    1    1    2    3
[2,]    1    1   NA    4
[3,]    1    4    6    7
[4,]    1   NA   NA   NA
[5,]    1    4    8   NA

> filteredData
     [,1] [,2] [,3] [,4]
[1,]    1    1    2    3
[2,]    1    1   NA    4
[3,]    1    4    6    7
[4,]    1    4    8   NA 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T11:24:35.760

要删除第 2-4 列中所有值所在的行`NA`：

```
data[apply(data[,2:4],1,function(x) !all(is.na(x))),]

     [,1] [,2] [,3] [,4]
[1,]    1    1    2    3
[2,]    1    1   NA    4
[3,]    1    4    6    7
[4,]    1    4    8   NA 
```

要仅从检查`NA`'s 的列中排除第一列，您可以使用负索引，例如：

```
data[apply(data[,-1],1,function(x) !all(is.na(x))),] 
```

# android - 不幸的是，应用程序已停止，同时尝试添加选项卡

> ID：14317221
> 
> 赞同：0
> 
> 时间：2013-01-14T11:01:40.493
> 
> 标签：android, android-emulator

我已经编写了一个应用程序，我在其中获取 facebook 好友列表，但现在我决定在我现有的应用程序中添加一个新功能 - 多个选项卡，

而且我还编写了必要的代码来获得它，但是每当我运行我的程序时 - 不幸的是应用程序已经停止

我想下面的行正在制造问题，但没有办法解决这个问题？

```
this.setDisplayShowIconEnabled(false); 
```

*ActionBarActivity.java：*

```
 protected void setDisplayShowIconEnabled(boolean bool) {
    mActionBarHelper.setDisplayShowIconEnabled(bool);
} 
```

*ActionBarHelperICS.java:*

```
 @Override
public void setDisplayShowIconEnabled(boolean bool) {
    mActivity.getActionBar().setDisplayShowHomeEnabled(bool);
} 
```

*闪屏.java：*

```
 public void onRequestReceived(int result, String message) {
    Log.d(LOG_TAG, "onRequestReceived(" + result + ")");
    if(isFinishing())
        return;
    switch (result) {
    case FacebookRequest.COMPLETED:
        Intent intent = new Intent(this, Main.class);
        intent.putExtra("FRIENDS", message);
        while (System.currentTimeMillis() - startTime < DELAY) {
            try { Thread.sleep(50); } catch (Exception e) {}
        }
        startActivityForResult(intent, FRIENDS_LIST_ACTIVITY);
        isLoadingFriends = false;
        break;
    case FacebookRequest.IO_EXCEPTION:
    case FacebookRequest.FILE_NOT_FOUND_EXCEPTION:
    case FacebookRequest.MALFORMED_URL_EXCEPTION:
    case FacebookRequest.FACEBOOK_ERROR:
        FacebookUtility.displayMessageBox(this, this.getString(R.string.friends_error));
        onButton();
        break;
    }
} 
```

*主.java：*

```
 public class Main extends TabActivity {

private TabHost tabHost;
private final String FRIENDS_TAB = "friends";
private final String MONTH_TAB = "month";
private final String WEEK_TAB = "week";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);

    tabHost = (TabHost) findViewById(android.R.id.tabhost);
    TabSpec contactSpec = tabHost.newTabSpec(FRIENDS_TAB).setIndicator(
            "FB Friends", getResources().getDrawable(R.drawable.friends))
            .setContent(new Intent(Main.this, FriendsList.class));

    TabSpec monthSpec = tabHost.newTabSpec(MONTH_TAB).setIndicator(
            "This Month", getResources().getDrawable(R.drawable.month))
            .setContent(new Intent(Main.this, FriendsList.class));

    TabSpec weekSpec = tabHost.newTabSpec(WEEK_TAB).setIndicator(
            "This Week", getResources().getDrawable(R.drawable.week))
            .setContent(new Intent(Main.this, FriendsList.class));

    tabHost.addTab(contactSpec);
    tabHost.addTab(monthSpec);
    tabHost.addTab(weekSpec);

    tabHost.setCurrentTab(0);

}
  } 
```

*好友列表.java：*

```
 public class FriendsList extends ActionBarActivity  implements FacebookRequest, OnItemClickListener {
private static String LOG_TAG = "FriendsList";
private static JSONArray jsonArray;
private static ListView friendsList;
private Handler mHandler;
  private Button saveGreeting;
@Override
public void onCreate(Bundle savedInstanceState) {
    mHandler = new Handler();
    super.onCreate(savedInstanceState);     
    try {
        requestWindowFeature(Window.FEATURE_INDETERMINATE_PROGRESS);
    } catch (Exception e) {}
    setContentView(R.layout.friends_list_screen);
    try {
        setProgressBarIndeterminateVisibility(false);
        setProgressBarInDVisibility(false);
    } catch (Exception e) {}
   this.setDisplayShowIconEnabled(false);
    init();

    saveGreeting = (Button) findViewById(R.id.greeting);
    saveGreeting.setOnClickListener(new OnClickListener() {
    public void onClick(View v) {
        customGreeting(v);
        }
    });
} 
```

*日志报告：*

```
 01-14 16:18:02.954: E/AndroidRuntime(960): FATAL EXCEPTION: main
01-14 16:18:02.954: E/AndroidRuntime(960): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.chr.tatu.sample.friendslist/com.chr.tatu.sample.friendslist.Main}: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.chr.tatu.sample.friendslist/com.chr.tatu.sample.friendslist.FriendsList}: java.lang.NullPointerException
01-14 16:18:02.954: E/AndroidRuntime(960):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
01-14 16:18:02.954: E/AndroidRuntime(960):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
01-14 16:18:02.954: E/AndroidRuntime(960):  at android.app.ActivityThread.access$600(ActivityThread.java:141)
01-14 16:18:02.954: E/AndroidRuntime(960):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
01-14 16:18:02.954: E/AndroidRuntime(960):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-14 16:18:02.954: E/AndroidRuntime(960):  at android.os.Looper.loop(Looper.java:137)
01-14 16:18:02.954: E/AndroidRuntime(960):  at android.app.ActivityThread.main(ActivityThread.java:5039)
01-14 16:18:02.954: E/AndroidRuntime(960):  at java.lang.reflect.Method.invokeNative(Native Method)
01-14 16:18:02.954: E/AndroidRuntime(960):  at java.lang.reflect.Method.invoke(Method.java:511)
01-14 16:18:02.954: E/AndroidRuntime(960):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-14 16:18:02.954: E/AndroidRuntime(960):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-14 16:18:02.954: E/AndroidRuntime(960):  at dalvik.system.NativeStart.main(Native Method)
01-14 16:18:02.954: E/AndroidRuntime(960): Caused by: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.chr.tatu.sample.friendslist/com.chr.tatu.sample.friendslist.FriendsList}: java.lang.NullPointerException
01-14 16:18:02.954: E/AndroidRuntime(960):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
01-14 16:18:02.954: E/AndroidRuntime(960):  at android.app.ActivityThread.startActivityNow(ActivityThread.java:2023)
01-14 16:18:02.954: E/AndroidRuntime(960):  at android.app.LocalActivityManager.moveToState(LocalActivityManager.java:135)
01-14 16:18:02.954: E/AndroidRuntime(960):  at android.app.LocalActivityManager.startActivity(LocalActivityManager.java:347)
01-14 16:18:02.954: E/AndroidRuntime(960):  at android.widget.TabHost$IntentContentStrategy.getContentView(TabHost.java:749)
01-14 16:18:02.954: E/AndroidRuntime(960):  at android.widget.TabHost.setCurrentTab(TabHost.java:413)
01-14 16:18:02.954: E/AndroidRuntime(960):  at android.widget.TabHost.addTab(TabHost.java:240)
01-14 16:18:02.954: E/AndroidRuntime(960):  at com.chr.tatu.sample.friendslist.Main.onCreate(Main.java:37)
01-14 16:18:02.954: E/AndroidRuntime(960):  at android.app.Activity.performCreate(Activity.java:5104)
01-14 16:18:02.954: E/AndroidRuntime(960):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
01-14 16:18:02.954: E/AndroidRuntime(960):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
01-14 16:18:02.954: E/AndroidRuntime(960):  ... 11 more
01-14 16:18:02.954: E/AndroidRuntime(960): Caused by: java.lang.NullPointerException
01-14 16:18:02.954: E/AndroidRuntime(960):  at com.chr.tatu.sample.friendslist.ActionBarHelperICS.setDisplayShowIconEnabled(ActionBarHelperICS.java:38)
01-14 16:18:02.954: E/AndroidRuntime(960):  at com.chr.tatu.sample.friendslist.ActionBarActivity.setDisplayShowIconEnabled(ActionBarActivity.java:85)
01-14 16:18:02.954: E/AndroidRuntime(960):  at com.chr.tatu.sample.friendslist.FriendsList.onCreate(FriendsList.java:56)
01-14 16:18:02.954: E/AndroidRuntime(960):  at android.app.Activity.performCreate(Activity.java:5104)
01-14 16:18:02.954: E/AndroidRuntime(960):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
01-14 16:18:02.954: E/AndroidRuntime(960):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
01-14 16:18:02.954: E/AndroidRuntime(960):  ... 21 more 
```

# hibernate - JPA - 如何在提交前检查关系？

> ID：14317223
> 
> 赞同：1
> 
> 时间：2013-01-14T11:01:45.253
> 
> 标签：hibernate, jakarta-ee, jpa

假设我有复杂的用户管理系统。在这种情况下，用户可以与组相关，组可以与角色相关。此外，组可以包含其他组。

我假设在“帐户管理”情况下，当前用户不能失去允许执行“帐户管理”过程的角色。我想知道如何实现该用例的最佳方式。

让我们尝试考虑简单的场景：例如，在下面的层次结构中，用户通过组 G3 和 G5 与我们的角色连接。

```
---USER---
|        |
G1       G3----
|        |    |
G2       G5   G6
         |
   REQUIRED_ROLE 
```

在 G3 组版期间，有人尝试将 G3 组成员更改为 G7（为了简化无角色）

```
---USER---
|        |
G1       G3----
|        |    |
G2       G7   G6 
```

提交该更改将从用户层次结构中删除“帐户管理”角色，并且用户将无法编辑帐户。

我唯一的想法是将所有组和角色读入内存并尝试手动更改所有依赖项以检查提交后是否仍会分配角色。但该解决方案可能会成为未来潜在错误的来源，而且并不优雅。有谁知道如何以优雅的方式解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T20:12:31.477

因为这是一个重要的用例，所以您不能使用常规的完整性约束。您必须执行预提交触发器以扫描层次结构并确定用户具有所需的权限。如果不是，则抛出异常。

# java - 将数据加载到 hashmap >>>

> ID：14317225
> 
> 赞同：0
> 
> 时间：2013-01-14T11:01:47.233
> 
> 标签：java

我正在尝试将数据加载到哈希映射的哈希映射中，并且我不断收到空指针并且不确定我是否在做正确的事情。

我希望我的哈希映射基于三个键 SalesAreaCode、year 和 product。我想将其余部分存储在arraylist中。我想传递销售区号、年份和产品，并列出与这三个键相关的所有产品，例如客户、数量、价格：我真的需要帮助或有人指出我正确的方向。任何帮助将不胜感激！！艾伦

代码：

```
 public HashMap<String, HashMap<String, HashMap<String, ArrayList<Sales>>>> getSalesDetails(Connection con)
{
        HashMap<String, HashMap<String, HashMap<String, ArrayList<Sales>>>>> hmpSales =
        new  HashMap<String, HashMap<String, HashMap<String, ArrayList<Sales>>>>>();
        Sales s;
        HashMap<String,ArrayList<Sales>> hmpSalProd = new HashMap<String, ArrayList<Sales>>();
        HashMap<String,HashMap<String,ArrayList<Sales>>> hmpSalYear = 
        new HashMap<String, ArrayList<Sales>>>();    

       try
       {
             pst = con.prepareStatement(sql);
       rs=pst.executeQuery();
       while(rs.next())
       {
                  s=new Sales();

                  if(!(hmpSalProd.containskey(rs.getString("product"))))
                  {
                       s.setSalesCode(rs.getString("sacd"));
                       s.setCustomerCode(rs.getString("custcd"));
                       s.setYear(rs.getInt("year"));
                       s.setProduct(rs.getString("product"));
                       s.setPrice(rs.getDouble("price"));
                       s.setQty(rs.getInt("qty"));
                       hmpSalProd.put(rs.getString("product"),
                       new ArrayList<Sales>(Arrays.asList(s)));
                  }
                  else
                  {
                      s.setSalesCode(rs.getString("sacd"));
                      s.setCustomerCode(rs.getString("custcd"));
                      s.setYear(rs.getInt("year"));
                      s.setProduct(rs.getString("product"));
                      s.setPrice(rs.getDouble("price"));
                      s.setQty(rs.getInt("qty"));
                      hmpSalProd.get(rs.getString("product")).add(s);
                  }
                  if(!(hmpSalYear.containsKey(String.valueOf(rs.getInt("year")))))
                  {
                      hmpSalYear.put(String.valueOf(rs.getInt("year")),hmpSalProd);
                  }
                  else
                  {
                      hmpSalYear.get(String.valueOf(rs.getInt("year"))).
                      get(rs.getString("product")).add(s);
                  }

                  if(!(hmpSalArea.containsKey(rs.getString("sacd"))))
                  {
                     hmpSales.put(rs.getString("sacd"),hmpSalYear);
                  }
                  else
                  {
                      hmpSales.get(rs.getString("sacd")).
                      get(String.valueOf(rs.getInt("year"))).
                      get(rs.getString("product")).add(s);
                  }

          }
          pst.close();
          rs.close();
     }
     catch(SQLException se)
     {
           System.out.println("error loading: " + se.getMessage());
     }
     return hmpSales;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T11:27:56.260

我建议定义 2 个类：

*   一个`SalesKey`存储 SalesAreaCode、年份和产品的类，覆盖 equals 和 hashCode，不可更改（一旦创建就无法更改值）
*   一个`SalesData`类，存储要映射到销售键的数据（包括 SalesAreaCode、year 和 product）。

然后，您将能够使用`Map<SalesKey, SalesData>`. 这更容易理解，因此更容易实现您想要实现的目标。

# google-apps-script - .getValue() 有时在读取 ImportXML 单元格时返回 #N/A

> ID：14317226
> 
> 赞同：3
> 
> 时间：2013-01-14T11:01:49.617
> 
> 标签：google-apps-script, google-sheets, google-sheets-importxml

我编写了一个脚本，将 ImportXML 公式写入一个单元格，然后几秒钟后尝试读取并用它的返回值替换该单元格。

问题是我经常（但不总是）在用获取的值替换单元格时得到#N/A。问题是我能够在短时间内看到正确的值，因此 ImportXML 会获取并正确返回该值，但在将其重写到电子表格时它会变得混乱。

示例代码：

```
myformula = '=ImportXML("http://api.something/01.xml","/offers/price")';
sheet.getRange("A1").setFormula(myformula);
Utilities.sleep(5000);
sheet.getRange("A1").setValue(sheet.getRange("A1").getValue()); 
```

我注意到，当最近获取 URL（并由 Google 在内部缓存）时，它的值是正确的。

关于如何解决这个问题的建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T15:42:27.543

您的脚本无法接收电子表格已完成重新计算的通知。重新计算所用的时间是不确定的。显然，您的 5 秒延迟通常就足够了，但有时重新计算需要更长的时间。

替换`sleep()`为重试循环以延长时间窗口。

```
myformula = '=ImportXML("http://api.something/01.xml","/offers/price")';
sheet.getRange("A1").setFormula(myformula);
while (sheet.getRange("A1").getValue() === "#N/A") {
  Utilities.sleep(5000);
}
sheet.getRange("A1").setValue(sheet.getRange("A1").getValue()); 
```

* * *

> 但就像我说的，每次执行时我都会在单元格中看到正确的值，然后在我重写它之后，它会得到 #N/A。所以换句话说，如果我不重写值，我会在不到一秒的时间内在单元格中看到结果。– *Mille 2013 年 1 月 14 日在 19:32*

这是云计算现实的一部分。电子表格对象正在更新，并与正在处理原始缓存副本的所有查看者共享。缓存副本与原始副本同步，但这不是即时的。当您查看工作表时，您是一个用户。您的脚本正在另一台谷歌服务器上“在云端”执行，虽然它最终会看到与您相同版本的电子表格，但可能需要一段时间。让两个用户进行更改（you+script）需要多次同步操作，因此有时受影响的单元格会处于不确定状态。

有一个与此类似的[未解决问题 1131](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1131)，在评论中有一些解决方法。

# c# - 带有属性空引用异常的 JSON 序列化

> ID：14317228
> 
> 赞同：0
> 
> 时间：2013-01-14T11:02:01.960
> 
> 标签：c#, json, properties, nullreferenceexception, javascriptserializer

考虑以下教程：http: [//blogs.msdn.com/b/rakkimk/archive/2009/01/30/asp-net-json-serialization-and-deserialization.aspx](http://blogs.msdn.com/b/rakkimk/archive/2009/01/30/asp-net-json-serialization-and-deserialization.aspx)

```
{
    "firstName" : "Rakki",
    "lastName" : "Muthukumar",
    "department" : "Microsoft PSS",
    "address" : {
        "addressline1" : "Microsoft India GTSC",
        "addressline2" : "PSS - DSI",
        "city" : "Bangalore",
        "state" : "Karnataka",
        "country" : "India",
        "pin" : 560028
    },
"technologies" : ["IIS", "ASP.NET", "JavaScript", "AJAX"]    
} 
```

对于 json 代码，我有以下类：

```
 public class Address
{
public string addressline1 { get; set; }
public string addressline2 { get; set; }
public string city { get; set; }
public string state { get; set; }
public string country { get; set; }
public int pin { get; set; }
}

public class RootObject
{
public string firstName { get; set; }
public string lastName { get; set; }
public string department { get; set; }
public Address address { get; set; }
public List<string> technologies { get; set; }
} 
```

当我尝试设置数据时，上述属性给了我错误

```
RootObjectClsObject.address.addressline1 = "NO"; 
```

它把我扔了`NullReferrenceException`。如果我修改该行

```
public List<string> technologies { get;set;} 
```

通过以下行

```
public List<string> technologies = new List<string>(); 
```

我不想使用它。因为我有复杂类型的 JSON 无法以这种方式处理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T11:24:03.440

您没有初始化您的子对象。该`address`属性尚未分配`Address`对象的实例，因此当您尝试更新该`address1`属性时；应用程序不知道您指的是哪个对象 - 因此出现错误。

您只需为`address`属性分配一个值或使用默认值对其进行初始化。

最简单的方法是在你的`RootObject`类的默认构造函数中。

```
public class RootObject
{
   public RootObject()
   {
      address = new Address();
      technologies = new List<string>();
   }

    public string firstName { get; set; }
    public string lastName { get; set; }
    public string department { get; set; }
    public Address address { get; set; }
    public List<string> technologies { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T11:45:25.407

正如@Kami 建议的那样，您可以在的构造函数中初始化`address`and ，或者您可以使用以下语法分配（和其他对象的属性）：`technologies``RootObject``addressline1``address`

```
RootObjectClsObject.address = new Address()
{
    addressline1 = "NO"
}; 
```

# java - webflow评估表达式不调用方法

> ID：14317229
> 
> 赞同：0
> 
> 时间：2013-01-14T11:02:10.397
> 
> 标签：java, spring, spring-webflow

在流程中：

```
<action-state id="create">
        <evaluate expression="operatore_rer" result="flowScope.operatore_rer" />
        <evaluate expression="mainService.getComuni()" result="flowScope.comuni_list" />
        <transition to="nuovo-operatore-rer" />
    </action-state> 
```

评估表达式不调用方法 mainService.getComuni()

我必须在哪里以及如何声明 mainService????

如果我在 applicationContext 中声明：

```
<bean id="mainService" class="com.aieap.services.MainService" /> 
```

这是错误：

```
GRAVE: StandardWrapper.Throwable
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mainService' defined in ServletContext resource [/WEB-INF/dispatch-servlet.xml]: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [com.aieap.services.MainService]: Specified class is an interface 
```

帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T16:04:26.787

`@Service("mainService")`为实现接口的类设置注释，`MainService`并在 bean 中引用该类而不是接口。这样，bean 就被初始化了，你可以在你的 web 流中调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T16:03:43.780

`mainService`必须是 Spring 已知的 bean。通过 Spring XML 配置文件（可以通过 导入`flow.xml`文件`<bean-import>`或通过 加载`web.xml`），或通过基于注释的 bean 定义。

# php - 在 Win/PHP 5.4 上安装 ImageMagick

> ID：14317230
> 
> 赞同：1
> 
> 时间：2013-01-14T11:02:19.180
> 
> 标签：php, apache, imagemagick

我需要 PHP 5.4 上的 ImageMagick。Windows，Apache 和 IIS7。

我已经下载了 ImageMagick-6.8.1-9-Q16-x86-dll.exe 和[http://valokuva.org/~mikko/imagick-php54-php53.tgz](http://valokuva.org/~mikko/imagick-php54-php53.tgz)

但是在 Apache 重新启动时出现错误：

> PHP.EXE 未找到入口点：
> 
> 无法在动态链接库 php5ts.dll 中定位程序入口点 php_checkuid_ex

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:36:30.223

php扩展显然有问题。[我使用来自http://www.peewit.fr/imagick/](http://www.peewit.fr/imagick/)的构建和 PHP 5.4.10，它工作正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T16:45:44.350

Imagemagick 和 Imagick 是两个不同的东西。Imagick 是 Imagemagick 的 php 中的 API。

使用 Imagemagick exe 文件安装 Imagemagick 然后您需要找到一个适用于您的设置的 Imagick.dll - 并不像看起来那么容易！php 版本以及它是如何编译的。

你想用什么；Imagemagick 通过 php 和命令行还是 Imagick 直接通过 php？

我在 XAMPP 上使用 Imagemagick，一旦安装了 Imagemagick，php 就会自动找到它。不要忘记，如果您正在使用 pdf 文件，您还需要安装 ghostscript。

# jquery - 在fancybox mit JWPlayer中启动本地视频，视频ID在url

> ID：14317242
> 
> 赞同：0
> 
> 时间：2013-01-14T11:03:14.130
> 
> 标签：jquery, fancybox, jwplayer, fancybox-2

这就是我通常使用 fancybox 和 jwplayer 启动视频文件的方式。

头：

```
<head> /* ... */
      <script type="text/javascript" src="jwplayer/jwplayer.js"></script>
      <script type="text/javascript" src="fancybox/lib/jquery-1.8.2.min.js"></script>
      <script type="text/javascript" src="fancybox/source/jquery.fancybox.js?v=2.1.3"></script>
      <link rel="stylesheet" type="text/css" href="fancybox/source/jquery.fancybox.css?v=2.1.3" media="screen" />
      <script type="text/javascript">
        $(document).ready(function() {
          $(".fancybox").fancybox();
        });
      </script>
      <script type="text/javascript">
        $(document).ready(function() {
                  jwplayer('startTheMovie').setup({
                     file: "file.mp4",
                     width: "640",
                     height: "360",
                  });
        });
      </script>
</head> 
```

身体：

```
<body>
     <div style="display:none">
        <div id="movie">                                    
          <div id="startTheMovie">Loading...</div>                          
        </div>
      </div>
      <a href="#movie" class="fancybox">Click here to start the movie</a>
</body> 
```

现在的挑战是：我有 140 个视频文件，不希望每个文件都有一个函数。您是否知道在单击链接时为函数提供视频 ID（可能是视频文件的文件名）的解决方案？

我想过这样的事情：

```
<a href="#movie?id=movie1" class="fancybox">Click here to start movie no 1</a>
<a href="#movie?id=movie2" class="fancybox">Click here to start movie no 2</a> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T21:23:28.297

您当前使用的方法是将视频内联加载到 hidden`div`中，然后将其加载到`div`fancybox 中。

我会采用不同的方法：我会直接链接到我的视频，并在打开 fancybox 后动态加载它们。这样做的好处是视频在需要之前不会出现在 DOM 中。您也可以对多个视频使用单个脚本，这样：

```
<a href="path/video01.mp4" class="fancybox">Click here to start movie no 1</a>
<a href="path/video02.mp4" class="fancybox">Click here to start movie no 2</a> 
```

为了使事情更灵活，每个视频都可以有自己的尺寸（视频可能不总是具有相同的大小）传递它`height`并`width`使用（HTML5）`data-*`属性，如：

```
<a href="path/video01.mp4" class="fancybox" data-width="352" data-height="270">Click here to start movie no 1</a>
<a href="path/video02.mp4" class="fancybox" data-width="640" data-height="360">Click here to start movie no 2</a> 
```

然后使用这个单一的脚本：

```
$(document).ready(function () {
  $(".fancybox").fancybox({
    fitToView: false, // to show videos in their own size
    content: '<span></span>', // create temp content
    scrolling: 'no', // don't show scrolling bars in fancybox
    afterLoad: function () {
      // get dimensions from data attributes
      var $width = $(this.element).data('width'); 
      var $height = $(this.element).data('height');
      // replace temp content
      this.content = "<embed src='pathToPlayer/jwplayer.swf?file=" + this.href + "&autostart=true&amp;wmode=opaque' type='application/x-shockwave-flash' width='" + $width + "' height='" + $height + "'></embed>"; 
    }
  });
}); // ready 
```

见**[演示](http://www.picssel.com/playground/jquery/multipleVideosJWplayer_14jan13.html)**

# python - Boto - 将文件上传到 Amazon S3 上的特定位置

> ID：14317243
> 
> 赞同：36
> 
> 时间：2013-01-14T11:03:25.733
> 
> 标签：python, amazon-web-services, amazon-s3, boto

这是我正在使用的代码

```
import sys
import boto
import boto.s3

# AWS ACCESS DETAILS
AWS_ACCESS_KEY_ID = ''
AWS_SECRET_ACCESS_KEY = ''

bucket_name = AWS_ACCESS_KEY_ID.lower() + '-mah-bucket' conn = boto.connect_s3(AWS_ACCESS_KEY_ID, AWS_SECRET_ACCESS_KEY)
bucket = conn.create_bucket(bucket_name, location=boto.s3.connection.Location.DEFAULT)
uploadfile = sys.argv[1]

print 'Uploading %s to Amazon S3 bucket %s' % \
       (uploadfile, bucket_name)

def percent_cb(complete, total):
    sys.stdout.write('.')
    sys.stdout.flush()

from boto.s3.key import Key
k = Key(bucket)
k.key = 'my test file'
k.set_contents_from_filename(testfile, cb=percent_cb, num_cb=10) 
```

在我的 S3 上，我创建了“目录”，例如“bucket/images/holiday”。我知道这些只是虚拟目录。

我的问题是，如何将此上传专门修改为 S3 上的 bucket/images/holiday 虚拟目录而不是存储桶根目录？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-01-14T13:45:58.377

您所要做的就是在上传之前将虚拟目录路径添加到密钥名称。例如：

```
key_name = 'my test file'
path = 'images/holiday'
full_key_name = os.path.join(path, key_name)
k = bucket.new_key(full_key_name)
k.set_contents_from_filename(...) 
```

您可能需要为您的应用程序进行一些更改，但希望这能给您基本的想法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-12-19T14:54:07.763

你也可以使用这个：

```
from boto.s3.key import Key

bucket = conn.get_bucket('images')
k = Key(bucket)
k.key = 'holiday/my_test_file.txt' 
```

它在我的[s3_percent_uploader中像这样工作](https://github.com/alexbuz/S3_File_Uploader/blob/master/sources/s3_percent_uploader.py)

```
python.exe s3_percent_uploader.py test_upload.txt testbucket test/upload.txt 
```

上传文件后将在 testbucket/test/upload.txt

# javascript - 如何检测选择的自动完成列表项目？

> ID：14317247
> 
> 赞同：0
> 
> 时间：2013-01-14T11:03:39.543
> 
> 标签：javascript

`Tab`我们通常通过按下下一个字段或单击鼠标从输入的自动完成列表中选择一个项目，但是`Enter`键呢？在这种情况下按下`Enter`将导致表单提交。

谢谢，

# regex - 在 Flex 中不匹配 \u0000

> ID：14317251
> 
> 赞同：3
> 
> 时间：2013-01-14T11:03:58.897
> 
> 标签：regex, apache-flex, flex4.5

不知道为什么，但行为很奇怪。每当我在正则表达式中使用 \u0000 时，它什么都不匹配。

```
var regexpNotWorking:RegExp = new RegExp("[^\u0000-\u0020]");
var regexpWorking:RegExp = new RegExp("[^\u0001-\u0020]");
var input:String = "I should be valid";
trace("not working: " + input.match(regexpNotWorking));
trace("working: " + input.match(regexpWorking)); 
```

输出是：

```
not working: null
working: I 
```

任何人都知道为什么 \u0001 工作，但 \u0000 不是？

如何确保输入不包含 \u0000？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T02:40:09.893

为什么不删除否定并将正则表达式更改为：

```
var regexp:RegExp = /[\u0021-\uFFFF]/; 
```

顺便说一句，不需要在 Flex 中使用新的 RegExp 或正则表达式引号。

但这可能不是您正在寻找的答案。这是查找字符串是否包含 NUL 字符的一种方法。

```
public function stringHasNul(value:String):Boolean {
    return (value.length != value.replace("\u0000", "NUL").length);
}

var hasNul:String = "ABC\u0000DEF"
var noNuls:String = "ABCDEF";

trace(hasNul.length); // should be 7
trace(hasNul.search("\u0000")); // wrongly gives 0, should be 3
trace(noNuls.length); // should be 6
trace(noNuls.search("\u0000"));  // wrongly gives 0, should be -1

trace(stringHasNul(hasNul)); // displays true
trace(stringHasNul(noNuls)); // display false 
```

要检查是否有任何字符在 \u0000 到 \u0020 范围内，您可以这样做：

```
var regexp:RegExp = /[^\u0021-\uFFFF]/;

if (somestring.search(regexp) == -1)
{
    // somestring is valid do something with it
} 
```

# iphone - 如何关闭 UIPopoverController？

> ID：14317252
> 
> 赞同：2
> 
> 时间：2013-01-14T11:04:04.360
> 
> 标签：iphone, ios, objective-c, ipad, uipopovercontroller

我创建了一个`UIPopoverController`并在单击时将其添加到视图控制器`UIButton`中，如下所示

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    controller = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:[NSBundle mainBundle]];
    popoverController = [[UIPopoverController alloc] initWithContentViewController:controller];
}

- (IBAction)showPopover:(UIButton *)sender
{
    if ([popoverController isPopoverVisible]) {
        [popoverController dismissPopoverAnimated:YES];
    } else {
               CGRect popRect = CGRectMake(self.btnShowPopover.frame.origin.x,
                                self.btnShowPopover.frame.origin.y,
                                self.btnShowPopover.frame.size.width,
                                self.btnShowPopover.frame.size.height);
          [popoverController presentPopoverFromRect:popRect
                                       inView:self.view
                     permittedArrowDirections:UIPopoverArrowDirectionAny
                                     animated:YES];
    }
} 
```

`btnShowPopover`是`UIButton`中`viewcontroller`，`popoverController`是`UIPopoverController`。

`popovercontroller`单击按钮时看起来很好。

但是当我`UIButton`单击`secondviewcontroller`

我为此使用了以下代码

```
-(IBAction)y:(id)sender{
    fs =  [[Firstviewcontroller alloc] initWithNibName:@"FIrstscreen" bundle:[NSBundle mainBundle]];
    [fs.popoverController dismissPopoverAnimated:TRUE];
} 
```

但它没有用。

`popovercontroller`单击添加到的视图控制器中的按钮时如何关闭`popovercontroller`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-14T11:08:59.527

您正在分配 的新实例`Firstviewcontroller`，因此它不会关闭前一个实例的弹出框。

当您显示弹出框时，您需要传递旧实例，例如：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    controller = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:[NSBundle mainBundle]];
    popoverController = [[UIPopoverController alloc] initWithContentViewController:controller];
    [controller setFs:self]
} 
```

并解雇像：

```
-(IBAction)y:(id)sender
{
    [fs.popoverController dismissPopoverAnimated:TRUE];
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-14T11:08:46.487

苹果文档：

> 弹出框控制器不会调用此方法来响应对该方法的编程调用`dismissPopoverAnimated:`。如果您以编程方式关闭弹出框，则应在调用 dismissPopoverAnimated: 方法后立即执行任何清理操作。

所以`didDimiss`委托的方法不会被自己调用。

尝试：

```
[self.popover dismissPopoverAnimated:YES];
[self.popover.delegate popoverControllerDidDismissPopover:self.PopUp]; 
```

# asp.net - .net 4 web 表单页面在本地调试中断

> ID：14317255
> 
> 赞同：0
> 
> 时间：2013-01-14T11:04:16.010
> 
> 标签：asp.net, .net, webforms, compiler-errors

我正在使用 Visual Studio 2010 和 .NET 4 和 2 Web 窗体。

我有一个可以在 Web 服务器上完美运行的 Web 表单页面，但是如果我在本地运行它，我会在“编译器错误消息：编译器失败，错误代码 1”页面上收到此错误。

在我的页面上，我有 9000 行 JavaScript，我尝试了以下方法：

*   如果 JavaScript 在页面上并且在 .NET 2 中，它可以在本地完美地调试

*   如果 JavaScript 在外部文件中并在 .NET 4 的页面上被引用，则它在本地调试中完美运行

*   如果 JavaScript 在页面上并且在 .NET 4 中，我在 bebug 本地运行时会收到错误

*   如果我尝试在本地运行它并在 .NET 4 的 Web 配置中将 debug 设置为 false，那么它可以完美运行。

*这里有什么问题？*

似乎本地视觉工作室在调试中并不喜欢 .NET 4 中页面上的所有 JavaScript，但在所有情况下网站都构建并且没有 JavaScript 错误

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T11:08:22.177

尝试以下操作：

1.  更改页面上的一些代码，以便页面重新编译
2.  更改 web.config 中的某些内容，以便重新编译整个应用程序
3.  删除“Temporary ASP.Net Files”目录下的所有文件，重新编译

这些应该有助于解决编译器给出的相当通用的错误，当缺少引用指令时，您往往会遇到这种错误。

# javascript - 单击列表框将所选项目名称附加到带有javascript的textarea中

> ID：14317258
> 
> 赞同：0
> 
> 时间：2013-01-14T11:04:38.290
> 
> 标签：javascript, html, c#-4.0, asp.net-mvc-4, listbox

使用：**ASP.Net MVC 4.0**，**VS2010**，**.netfw 4.0**

我的控制器包括：

```
 ViewBag.HtmlContent = model.Content;
        ViewBag.list = model.TableColumn;

        try
        {
            HtmlString hs = new HtmlString(model.Content);
            List<string> lstItems = new List<string>();
            //IEnumerable<string> lst = new IEnumerable<string>();
            string queryToGetAllTable = "select column_name,* from information_schema.columns where table_name = 'BAP_AXA_IN' order by ordinal_position ";
            DataTable dt = CS.Return_DataTable(queryToGetAllTable);
            foreach(DataRow dr in dt.Rows)
            {
                lstItems.Add(dr["COLUMN_NAME"].ToString());
            }
            model.TableColumn = new List<string>();
            foreach( string  str in lstItems)
                model.TableColumn.Add(str);
        }

        catch { }
        return View(model); 
```

我的视图类：

```
 @model AboutModel
@using MvcApplication1.Models

@{
    ViewBag.Title = "BAP Automation";
}

@using (Html.BeginForm()) {

    @Html.ValidationSummary(true)

    <fieldset>
        <legend>Create Mail</legend>
    <div class="editor-label">
        @Html.LabelFor(model => model.CompanyName)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.CompanyName)
        @Html.ValidationMessageFor(model => model.CompanyName)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.MailSubject)
    </div>

    <div class="editor-field">
        @Html.EditorFor(model => model.MailSubject)
        @Html.ValidationMessageFor(model => model.MailSubject)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.MailBody)
    </div>

    <div class="editor-field">
        @Html.EditorFor(model => model.MailBody)
        @Html.ValidationMessageFor(model => model.MailBody)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.TableColumn)
    </div>

    <div class="editor-list-field">
        @Html.ListBoxFor(model => model.TableColumn, new SelectList(Model.TableColumn), new { @class = "listofcolumn"}))
        @Html.ValidationMessageFor(model => model.TableColumn)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.Content)
    </div>

    <div class="editor-multiline-field">
        @Html.TextAreaFor(model => model.Content, new { cols=60,@rows=10, @class = "textarea"})
        @Html.ValidationMessageFor(model => model.Content)
    </div>

        <p>
            <input type="submit" value="Create" />
        </p>

        <p>
            Posted Content : @ViewBag.HtmlContent
        </p>

    </fieldset>
}
<script type="text/javascript">
$(function() {
    ​$('.listofcolumn option')​.click(function() {
        if ($(this).is(':selected')) {
            var selectedId = $(this).val();
            var selectedText = $(this).text();
            $('.textarea').val(selectedText);
        }
    });​
});
</script> 
```

“当我单击**listbox(class = listofcolumn)**时，将填充 html.textareafor(class textarea)/textarea += 选定的列表项”。

但在运行时显示以下错误：**Microsoft JScript 运行时错误：预期对象**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T11:15:49.950

`change`您可以通过在事件上运行它并获取当前值来简化您的 jQuery 。它还应该解决找不到对象的问题。尝试这个：

```
​$('.listofcolumn')​.change(function() {
    var selectedId = $(this).val();
    var selectedText = $('option:selected', this).text();
    $('.textarea').val($('.textarea').val() + ' ' + selectedText);
});​ 
```

# java - 使用嵌入式泛型的泛型类型

> ID：14317259
> 
> 赞同：1
> 
> 时间：2013-01-14T11:04:42.627
> 
> 标签：java, generics

我有 2 个不同的课程。一个是通用的 valueHolder，它可以包含任何扩展数字的东西。

```
class ValueHolder<T extends number>{
    private T currentValue;

   //more functions, database logic, etc...
} 
```

另一个类更复杂，并且有一个“targetValue”。它的参数化如下：

```
class MoreComplexClass<T extends ValueHolder<?>>
    private T valueHolder;
    private XXX requiredValue;

    //a lot more functions.
} 
```

将 valueHolder 的类型用于 MoreComplexClass 的 requiredValue 是否“可能”？我想要实现的是： Beeing 能够将 currentValue 和 requiredValue 与 > == < 运算符进行比较，而无需强制转换且不会丢失 Typesafety。（也许我也在考虑复杂的方法来实现这一点）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T11:08:47.983

答案是肯定的，你可以这样声明*复杂类*：

```
class MoreComplexClass<N extends Number, T extends ValueHolder<N>>
    private T valueHolder;
    private N requiredValue;

    //a lot more functions.
} 
```

但是由于您正在使用`Number`该类，因此您将无法使用这些运算符，您需要使用该类中的一种`XXXvalue()`方法（即：`doubleValue()`, `longValue()`）`Number`才能使用这些运算符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T11:50:59.833

由于评论，我做了一些更改，现在看起来像这样：

```
public class ValueHolder<T extends Comparable<T>> {
private T currentValue;

public T getCurrentValue() {
    return currentValue;
}

public void setCurrentValue(T currentValue) {
    this.currentValue = currentValue;
}
}

public class MoreComplexClass<N extends Comparable<N>, T extends ValueHolder<N>> {
private T valueHolder;
private N requiredValue;

public N getRequiredValue() {
    return requiredValue;
}

public void setRequiredValue(N requiredValue) {
    this.requiredValue = requiredValue;
}

public T getValueHolder() {
    return valueHolder;
}

public void setValueHolder(T valueHolder) {
    this.valueHolder = valueHolder;
}
} 
```

现在我也能够以通用方式进行比较（这很重要，因为我不想强制转换为所有可能的类型。在旁注中，这现在也适用于日期等。）：

```
public class Main {
public static void main(String[] args) {

    ValueHolder<Long> longHolder = new ValueHolder<>();
    longHolder.setCurrentValue(2L);

    MoreComplexClass<Long, ValueHolder<Long>> mcc = new MoreComplexClass<>();
    mcc.setRequiredValue(1L);

    int compare = mcc.getRequiredValue().compareTo(mcc.getValueHolder().getCurrentValue());

    if (compare < 0) {

    } else if (compare > 0) {

    }else{

    }
}
} 
```

我会给你留下解决方案，让我指向正确的方向；）

# java - Java初学者关于重复

> ID：14317263
> 
> 赞同：0
> 
> 时间：2013-01-14T11:05:03.470
> 
> 标签：java

我是一个完整的初学者，我正在尝试遵循此代码片段背后的逻辑。

```
int x = 12;
do {
    for (int w=9; w<x; w++)
        System.out.print(w+” ”);
    --x;
    System.out.println(x);
}while (x>7); 
```

当我运行它时，答案如下：

```
9 10 11 11
9 10 10
9 9
8
7 
```

如果有人能以简单的方式逐步解释如何阅读代码，我将非常高兴！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T11:09:36.640

`int x = 12;`声明新的局部变量，称为`x`

`do {`开始新`do...while`循环

`for (int w=9; w<x; w++)`开始新的`for`循环，它将迭代直到变量`w`的值**小于**变量的值`x`。在这个循环变量的每次迭代之后，`w`它的值都会增加（增加`w++`）。`w`变量的初始值为`9`( `int w=9`)。

`System.out.print(w+” ”);`这个打印输出到控制台变量的当前值`w`加上之后的一个空格

`--x;`这减少了`x`变量的值。这就是所谓的前缀版本操作`--`

`System.out.println(x);`将变量的值打印`x`到控制台并返回回车

~~`}``for`循环代码块结束~~（感谢 Chris 修复）

`} while (x>7);`代码块结束`while`，条件是循环将结束：直到变量的值`x`大于`7`循环才会运行。

**UPD：**更具体地解释输出结果：

1) 的第一次迭代`do loop`。我们有`x == 12`：

内部`for`循环的迭代：

1.1) `w == 9`, `9 < 12`=> 输出`9`到控制台

1.2) `w++`=> `w == 10`, `10 < 12`=> 输出`10`到控制台，

1.3) `w++`=> `w == 11`, `11 < 12`=> 输出`11`到控制台，

1.4) `w++`=> `w == 12`, `12 == 12`=> 结束`for`循环

2)`for`循环结束。`--x`=> `x == 11`，输出`11`到控制台并返回回车，所以我们有行`9 10 11 11`

3) 开始循环的新迭代，`do ... while`依此`x == 11`类推，直到`x`等于 7。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T11:12:20.150

首先，片段的正确格式将帮助您理解它:)

```
int x = 12;
do {
    for (int w=9; w<x; w++)
        System.out.print(w+” ”);
    --x;
    System.out.println(x);
} while (x>7); 
```

很难一步一步地描述它，最好使用调试器运行它。但换句话说，程序如下：

1.  有一个do-while循环，它有内部'for'循环，递减x并打印它
2.  for 循环使用 w 变量并打印它。条件取决于 x 值（我认为，您了解条件如何工作等）
3.  在 for 循环中，使用 'print' 方法，与 do-while 循环中的 'println' 相反。这就是为什么 w 值被打印在一行中的原因

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-26T18:01:08.410

如果 x 大于 7，则执行 do/while 循环。for 循环在 do/while 循环内运行。for 循环声明一个整数 w 并将 w 赋值为 9。

# delphi - 如何在字符串文字中写入数字？

> ID：14317264
> 
> 赞同：2
> 
> 时间：2013-01-14T11:05:07.087
> 
> 标签：delphi

我的以下 Delphi 代码引发编译器错误：不兼容的类型：字符串和整数

```
SQL.Text := 'Select ColumnA from TableA where ColumnA NOT IN ('+ 3 + ',' + 4 +')'; 
```

如何在 SQL 语句中输入数字？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T13:18:17.390

在编写此类语句时（并且参数不在范围内），请尝试使用 Format 函数：

```
SQL.Text := Format('Select ColumnA from TableA where ColumnA NOT IN (%d,%d)',
                  [Firstval, SecondVal]); 
```

以这种方式编写查询的一大优势是可以保持 SQL 语句的可读性（就像使用参数时一样）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T11:08:07.220

此行应如下所示：

`SQL.Text := 'Select ColumnA from TableA where ColumnA NOT IN (3,4)';`

# javascript - 需要解决方法以使 WebStorm 的自动完成功能能够解析第三方模块方法

> ID：14317265
> 
> 赞同：15
> 
> 时间：2013-01-14T11:05:13.550
> 
> 标签：javascript, node.js, webstorm

几乎对于所有第三方模块，WebStorm 的自动编译都无法解析方法/字段。在自动完成下，我还指所有类似智能感知的功能。例如：

```
var async = require('async');
async.series() //WebStorm's tooltip says: Unresolved function or method series() 
```

同时它解决了

```
async.exports.series(). 
```

但这会导致运行时错误：

```
TypeError: Cannot call method 'series' of undefined 
```

对于我自己的模块，我找到了解决方法。如果我在模块中这样做：

```
var myModule = module.exports;
myModule.someMethod = function(){
...
} 
```

然后 someMethod 的自动编译工作正常。

关于以上所有，我有很多问题。
1、为什么ide无法解析async.series()？
2\. 为什么 async.exports.series() 会导致运行时错误？
3.如何使自动编译工作？

WebStorm 5.0.4。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-04T23:18:48.370

转到设置 -> JavaScript -> 库 -> 检查“Node.js Globals”

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-14T18:52:49.850

使用 new 如下：

```
var async = new require('async'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-30T21:47:45.780

新的 WebStorm v7 能够为流行的模块定义 Typescript 社区存根。这部分解决了自动完成和 IDE 警告的问题。

对于不太流行的模块，我更喜欢使用这个丑陋的作弊：

```
//noinspection ConstantConditionalExpressionJS,JSPotentiallyInvalidConstructorUsage
var async = false ? new require('async') : require('async'); 
```

但是，当属性通过某种算法（例如迭代文件系统）附加到模块时，这并不能解决问题。对于小型且不受欢迎的模块，这是一种罕见的情况。

顺便说一句，异步已经在 git@github.com:borisyankov/DefinitelyTyped.git 存储库中有 typescript 存根。

# three.js - 更改 WebGLRenderer.shadowMapType

> ID：14317266
> 
> 赞同：0
> 
> 时间：2013-01-14T11:05:15.467
> 
> 标签：three.js

我正在为大学的计算机图形讲座编写教程程序。对于其中之一，我想展示不同类型的阴影映射。如果我更改 WebGLRenderer.shadowMapType 的值，屏幕上不会发生任何事情。是否可以在运行时更改映射以及如何更改？

初始化：

```
 renderer = new THREE.WebGLRenderer({canvas: canvas, antialias:true});
    renderer.setSize(window.innerWidth, window.innerHeight);
    renderer.shadowMapEnabled = true;
    renderer.shadowMapType = THREE.BasicShadowMap; 
```

更新：

```
 renderer.shadowMapType = THREE.PCFSoftShadowMap; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T15:56:15.833

要`shadowMapType`在第一次渲染后更改，您需要设置

```
material.needsUpdate = true; 
```

对于接收阴影的材料。

参见维基：[https ://github.com/mrdoob/three.js/wiki/Updates](https://github.com/mrdoob/three.js/wiki/Updates)

三.js r.54

# php - php simplexml_load_file 不接受 ascii 代码

> ID：14317274
> 
> 赞同：0
> 
> 时间：2013-01-14T11:05:51.143
> 
> 标签：php

我正在使用 simplexml_load_file 来解析 xml 文件。但我收到警告，结果为空。

PHP 警告：simplexml_load_file()：/usr/www/go.actionads.ru/htdocs/data/downloads/feed_8.xml:8787：解析器错误：PCDATA 无效字符值 1 在 /user/htdocs/includes/YMLParser.class。第 178 行的 php

这是因为 xmlFile 包含 ^A 和 ^M 等 ascii 代码，而 simplexml_load_file 不解释它们。

如何解决这个问题呢？

我已经使用 str_replace 替换了这些字符。但这种方法很糟糕。

提前致谢。

# spring - 迁移到 Spring Security 3.0.5.RELEASE

> ID：14317276
> 
> 赞同：0
> 
> 时间：2013-01-14T11:06:10.410
> 
> 标签：spring, security, migrate

您好，当我尝试从 Spring Security 2.0.4 迁移到 Spring Security 3.0.5.RELEASE 时遇到问题。我收到以下错误：

```
 SEVERE: Exception sending context initialized event to listener instance of class pl.casses.fw.client.info.app.OfficeContextLoader
org.springframework.beans.factory.BeanDefinitionStoreException: Unexpected exception parsing XML document from ServletContext resource [/WEB-INF/office-mgt-security.xml]; nested exception is java.lang.NoSuchMethodError: org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.getLocalName(Lorg/w3c/dom/Node;)Ljava/lang/String; 
```

我的 security.xml 文件在这里：

```
<beans:beans xmlns="http://www.springframework.org/schema/security"
xmlns:beans="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
          http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.0.xsd">
<http auto-config='true'>
    <intercept-url pattern="/**/*.ico" filters="none" />
    <intercept-url pattern="/**/*.gif" filters="none" />
    <intercept-url pattern="/**/*.jpg" filters="none" />
    <intercept-url pattern="/**/*.css" filters="none" />
    <intercept-url pattern="/**/*.js" filters="none" />
    <intercept-url pattern="/**/*.png" filters="none" />
    <intercept-url pattern="/logout.jsp*" filters="none" />
    <intercept-url pattern="/index.jsp*" filters="none" />
    <intercept-url pattern="/**" access="ROLE_USER,ROLE_ADMIN" />
    <form-login login-page="/index.jsp"
        authentication-failure-url="/index.jsp?login_error=1"
        default-target-url="/main.jsp" always-use-default-target="true" />
    <remember-me key="CassesOMRMKey" user-service-ref="userFactory"/>
</http>

<authentication-manager>
    <authentication-provider user-service-ref="userFactory">
        <password-encoder hash="md5" />
    </authentication-provider>
</authentication-manager> 
```

在 pom.xml 我有：

```
<dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring</artifactId>
        <version>2.5.4</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-core</artifactId>
        <version>3.0.5.RELEASE</version>
    </dependency> 
```

我做错了什么？如何迁移到安全 3.0。提前感谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T13:32:45.523

解决方案分两步得出：

1.  对两个工件使用相同的 Spring Release；
2.  更新 maven 依赖项，将 pom.xml 中的排除项添加到使用 3.0 以下版本的所有 spring 工件（感谢@caro2 指出这一点）

# php - 在 PHP 中更新多个值时出现复选框问题

> ID：14317281
> 
> 赞同：0
> 
> 时间：2013-01-14T11:06:19.303
> 
> 标签：php

我编写了一个非常简单的脚本来更新不同列中的多个值。我的问题是，当我尝试更新列中的值时，它可以正常工作，但是在复选框的情况下，值插入不正确。

例如。如果我有 7 行要更新并且在选择选项中我选择 1 、 2 、 3 复选框并且我没有选择 4 5 并再次选择 6 7 然后在更新时选择 1 、 2 、 3 、4 、5 和留下 6 7 未选中

我在这里粘贴我的代码

形式

```
 <?php include("db.php");

          $id = $_GET['id'];
   $tDate2=$_GET['tDate2'];
 ?> <form method="POST" style="width:50%" action="updatemonthly.php"  >
  <table id="rounded-corner">

    <?php
    $conn=mysql_connect("localhost","root","root") or die(mysql_error());
    mysql_select_db("monthly_pmc_admin") or die(mysql_error()); 
     $result1 = mysql_query("SELECT * from project_details where id ='$id' ;");
     $row = mysql_fetch_assoc($result1);
     $pno=$row['Project_No'];
    $result = mysql_query("SELECT * from capex_phasing_data where Project_Number ='$pno' order by id ;");
     ?>
    <thead>
      <tr>
        <th colspan="6" scope="col" class="rounded-company">Edit/ Delete Capex Graph Values</th>
        <th scope="col" class="rounded-q1"> <?php echo $tProjNo ?></th>
        <th scope="col" class="rounded-q4"></th>
      </tr>
    </thead>
    <tfoot>
      <tr>
        <td colspan="7" class="rounded-foot-left" align="center"><input type="submit" name="submit" value="DELETE" id='myButton1' />
          <input type="submit" name="submit" value="UPDATE" id='myButton1' />
         <?php 
         echo 
          '<a href="../capex.php?id=' . $id . '&tDate2='.$tDate2.'"> Add New Capex Value</a>';
          ?></td>
        <td class="rounded-foot-right"></td>
      </tr>
       <tr>
            <td colspan="4" class="rounded-foot-left" align="center"> <?php 
            echo('<A hREF="http://10.26.162.84/graph1/default.aspx?id='.$pno .'&tDate2='. $tDate2\. '" target="_blank"> View Graph </A>');?></td>
            <td class="rounded-foot-right"></td>
          </tr>
    </tfoot>
    <tr>
      <th align='center'> Select to <br/>
        Delete Record </th>
      <th >Month</th>
      <th>Planned Phasing </th>
      <th>Actual Phasing </th>
       <th>Select To Display Value in Graph</th>

    </tr>
    <?
    for($i=1;$i<=mysql_num_rows($result);$i++) {
    $row = mysql_fetch_assoc($result);
    ?>
    <tr>
      <td align='left' ><input  type="checkbox" name="chk[]"  value="<?=$row['id']?>" align='center' />
      </td>
      <td align='left'><input type="text" name="month[]" size="10" id="jj" value="<?php echo $row['Month'];?>"  />
      </td>
      <td align='center' ><input name="planman1[]"  size="50" type="text" id="rr" value="<?php echo $row['Planned_Phasing'];?>"  />
      </td>
      <td align='center' ><input name="planman2[]" type="text" size="8" id="r1r" value="<?php echo $row['Actual_Phasing'];?>"  />
      </td>

      <td align='center' ><input name="planman5[]" type="checkbox" id="r4r"  <? if($row['Select_project']==1) {echo 'checked';} ?>  />
      </td>

        <input  type="hidden" name="rowid[]"  value="<?=$row['id']?>" align='center' />
        <input type="hidden" name="ProjNo" value="<?php echo $id; ?>">
          <input type="hidden" name="tDate2" value="<?php echo $tDate2; ?>">
        <!--<input type="hidden" name="ProjNo" value="<?php echo $tProjNo; ?>">-->
      </td>
    </tr>
    <?php
     }
     ?> 
```

更新查询

```
<?php
session_start();
require_once('dbclass/database.php');
$myClass=new database();
//echo $_POST['name'];
  $array=$_POST['rowid'];
  $month=$_POST['month'];
  $planman1=$_POST['planman1'];
  $planman2=$_POST['planman2'];
  $planman3=$_POST['planman3'];
  $planman4=$_POST['planman4'];
  $planman5=$_POST['planman5'];
  $actuanman=$_POST['actuanman'];
  $length=count($_POST['rowid']);
  $chk=$_POST['chk'];
  $projno=$_POST['ProjNo'];
  $tDate2=$_POST['tDate2'];

  if($_POST['submit']=='UPDATE'){

for($a=0;$a<$length;$a++){
    $rid=$array[$a];
   $array[$a];
   $month[$a];
   $planman1[$a];
   $planman2[$a];
   $planman3[$a];
   $planman4[$a];
   $planman5[$a];
   $ac= $actuanman[$a];

 if($ac=='on'){$ch=1;} else {$ch=0;}

 if($planman5[$a]=='on'){$planman5[$a]='1';} else {$planman5[$a]='0';}

 $sql="UPDATE  capex_phasing_data set   Month='".$month[$a]."',   Planned_Phasing='".$planman1[$a]."' , Actual_Phasing='".$planman2[$a]."',    Select_project='".$planman5[$a]."' where id='".$rid."'";

mysql_query($sql) or die(); 

header("location:#");
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T11:08:35.947

如果您提交的表单有多个选择框，则只有选中框的名称会在`$_POST`数组中。因此，要知道复选框是否打开，您必须检查其名称是否出现在`$_POST`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T11:13:57.280

对于属于一个属性的所有复选框，您必须使用相同的名称后跟“[]”。

例如，如果您将爱好复选框设置为音乐、阅读和冲浪，那么所有选项都应该具有相同的名称，例如爱好 [] 和音乐、阅读或冲浪的值。

```
<input type='checkbox' name='hobbies[]' value='Music'>Music</input>
<input type='checkbox' name='hobbies[]' value='Reading'>Reading</input>
<input type='checkbox' name='hobbies[]' value='Surfing'>Surfing</input> 
```

因此，如果您检查音乐和冲浪，您将**在 $_POST['hobbies'] 中获得选中复选框的相应值**

```
$_POST['hobbies'] as array('Music','Surfing') 
```

因此，您可以相应地管理数据库值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T16:05:59.310

终于在了解之后，我找到了解决我自己问题的方法，谢谢 lex 和 sujit 的宝贵时间和帮助

我的 chck 框的表格已更改为

```
<td align='center' ><input name="planman2[]" type="text" size="8" id="r1r" value="<?php echo $row['Actual_Phasing'];?>"  />
  </td>

  <td align='center' ><input name="**planman5<?=$i?>**" type="checkbox" id="r4r"  <? if($row['Select_project']==1) {echo 'checked';} ?>  />
  </td> 
```

并在更新脚本中

```
for($a=0;$a<$length;$a++){
$rid=$array[$a];
$array[$a];
$month[$a];
$planman1[$a];
$planman2[$a];
$planman3[$a];
$planman4[$a];
**$p=$a+1;
$p5= $_POST['planman5'.$p];
if($p5=='on'){$ch1=1;} else {$ch1=0;}** 
```

现在它工作得很好......

谢谢你的帮助和建议

# windows-phone-7 - 检测活动的网络连接

> ID：14317282
> 
> 赞同：1
> 
> 时间：2013-01-14T11:06:25.023
> 
> 标签：windows-phone-7

任何人都可以建议一种可靠的方法来检测 WP7 的当前网络状态和类型。

我正在使用 Visual Studio 2012 中的 Simulation Dashboard 在各种网络场景下测试我的应用程序。我知道它正在工作，因为我的应用程序在没有网络时无法连接，或者当网络速度设置为 2G 等时下载速度非常慢。

然而

```
 NetworkInterface.GetIsNetworkAvailable() 
```

无论网络速度设置如何，总是返回 true，并且

```
 NetworkInterface.NetworkInterfaceType 
```

无论当前的网络设置如何，始终返回 NetworkInterfaceType.Wireless80211。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T20:12:46.063

这已在[Enable network simulation doesn't work for query IsNetworkAvailable 中得到解答](https://stackoverflow.com/questions/14066532/enable-network-simulation-doesnt-work-for-query-isnetworkavailable/14404764#14404764)

模拟仪表板目前仅限制网络带宽（受您当前网络的限制），不模拟“实际”网络条件。因此，API 仍将返回“实际”网络类型和/或名称，但网络速度/质量将根据您在启用网络模拟时的选择受到影响。如果您想要验证 API 调用，您可能需要在 Windows Phone 设备上测试您的应用，并适当更改数据连接。

# css - 如何将img标签定位在正确的中心？

> ID：14317290
> 
> 赞同：0
> 
> 时间：2013-01-14T11:06:56.837
> 
> 标签：css, image, html

```
 <div >
        <img  src="some url"  />
 </div> 
```

div 的高度和宽度不断变化。我想把这个 img 放在右对齐并垂直放置在中心。图像的高度和宽度是固定的。如何动态解决？有时div的宽度和高度与img的宽度和高度相同。或者div的宽高大于img的宽高...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T11:15:43.157

在你的css中试试这个代码，

```
 float:right;
    margin-top:25%; 
```

您可以在此处查看完整的代码和示例。[http://jsfiddle.net/VzLjq/](http://jsfiddle.net/VzLjq/)

祝你好运 ！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T11:23:39.477

您可以为此使用**display:table**。像这样写：

**HTML**

```
<div class="parent">
  <div class="child">
    <img  src="http://dummyimage.com/200x200/000/fff&text=image"  />
  </div>
</div> 
```

**CSS**

```
.parent{
  height:400px;
  border:1px solid red;
  text-align:right;
  display:table;
  width:100%;
}
.parent .child{
  display:table-cell;
  vertical-align:middle;
  width:100%;
  height:100%;
} 
```

检查这个[http://jsfiddle.net/qEYuD/](http://jsfiddle.net/qEYuD/)

它可以工作到 IE8 及更高版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T13:52:56.740

如果您的图像是静态的，您可以使用相对定位和负边距：

[http://jsfiddle.net/qEYuD/3/](http://jsfiddle.net/qEYuD/3/)

```
.parent{
  height:400px;
  border:1px solid red;
  text-align: right;
}

.parent img {
  position: relative;
  top: 50%;
  margin-top: -100px; /* half the height of the image */
} 
```

如果你的图像和容器都有未知的尺寸，Flexbox 可以用最少的标记做到这一点：

[http://jsfiddle.net/qEYuD/4/](http://jsfiddle.net/qEYuD/4/)（不包括前缀）

```
.parent{
  height:400px;
  border:1px solid red;
  display: flex;
  justify-content: flex-end;
  align-items: center;
  align-content: center;
} 
```

Flexbox 的缺点是浏览器支持还不完善。IE10 是第一个支持它的 IE 版本，Firefox 刚刚更新其支持以遵循当前规范。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T11:10:45.747

试试这个我认为它应该在这种情况下帮助你：

```
div{
  position: relative;
}
img{
    position: absolute;
    margin: auto;
    top: 0;
    bottom: 0;
    left: 0;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-14T11:17:11.300

尝试使用 css。

```
#content img.alignleft {display:inline; float:left; margin:5px 15px 5px 0;}
#content img.alignright {float:right; margin:5px 0 5px 15px;}
#content img.aligncenter {display:block; margin:10px auto;}
#content img.border {background:#ccc; border:4px solid #f0f0f0; color:#333; padding:1px;} 
```

和你的 html

```
<img class="alignright" src="img/test.jpg" height="225" width="300"
alt="Example content image using the class .alignright" /> 
```

尝试根据您的要求使用这些**css 模板**。

# c# - Resharper：重命名类中的所有字段

> ID：14317293
> 
> 赞同：2
> 
> 时间：2013-01-14T11:07:14.003
> 
> 标签：c#, resharper

**可能重复：** [resharper-or-coderush-global-rename](https://stackoverflow.com/questions/1414078/resharper-or-coderush-global-rename)

大约3年前提出了重复的问题。所以我想知道是否有任何方法可以重命名类中的所有字段，而不是一次重命名它们，因为我在 20 个类中有大约 500 个字段？一次重命名它们将花费大量时间。

例如：

```
public class Foo
{
    public static string field_One = "one";
    public static string field_Two = "two";

    /*and so on. About 500 fields */
} 
```

我需要这个：

```
public class Foo
{
    public static string fieldOne = "one";
    public static string fieldTwo = "two";

    /*and so on. About 500 fields */
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2017-04-27T18:36:29.097

Resharper 2017.1 现在支持批量重命名功能。“Alt-Enter”重命名建议有一个弹出菜单，为您提供其他选项（在文件、文件夹等中重命名）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T11:09:08.890

您可以使用代码清理来完成此操作，它可以获取字段、道具和方法的名称，并更改它们以适应配置文件中定义的编码风格。Ctrl-Alt-F

* * *

不幸的是，Resharper 只会发出未根据设置的命名约定命名字段的信号，并且代码清理不包括此检查，因此它不是自动化的。您可以做的最好的事情是学习热键，启用静态代码分析并检查每个热键并使用 resharper 建议的操作更改为正确的名称，但这意味着您肯定会在它结束时获得腕管，但优势任何人都可以做到，因为您只需要反复敲击相同的键序列：P。- 检查此堆栈问题以获取热键[Resharper 功能以修复命名约定问题](https://stackoverflow.com/questions/2864556/resharper-function-to-fix-naming-convention-issues)

# mysql - 在SQL和hibernate映射中根据另一个表中引用行的count（）设置列的值到我的表

> ID：14317294
> 
> 赞同：0
> 
> 时间：2013-01-14T11:07:19.420
> 
> 标签：mysql, sql, hibernate, hibernate-mapping

我的数据库中有以下表格。我希望表中的列`booked_items`包含与表`testuser`中用户关联的行数`testbooking`。它当然可以在程序内部完成，但如果它可以在休眠映射和表 DDL 中完成，那就很脏了。

```
CREATE TABLE `testuser` (
  `id` bigint(20) NOT NULL,
  `username` varchar(30) DEFAULT NULL,
  `password` varchar(128) DEFAULT NULL,
  `booked_items` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `username` (`username`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

CREATE TABLE `testbooking` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `user_id` bigint(20) NOT NULL,
  `item_id` bigint(20) NOT NULL,
  `start_date` date DEFAULT NULL,
  `end_date` date DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `FKEC747367A12BE486` (`item_id`),
  KEY `FKEC7473671463A66C` (`user_id`),
  CONSTRAINT `FKEC7473671463A66C` FOREIGN KEY (`user_id`) REFERENCES `testuser`
(`id`),
  CONSTRAINT `FKEC747367A12BE486` FOREIGN KEY (`item_id`) REFERENCES `testitem`
(`id`)
) ENGINE=InnoDB AUTO_INCREMENT=7 DEFAULT CHARSET=latin1;

CREATE TABLE `testitem` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `title` varchar(30) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=38 DEFAULT CHARSET=latin1; 
```

testuser 表的休眠映射为：

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
    <class name="my.hibernate.actors.User" discriminator-value="user"
        table="testuser" catalog="efeu">
        <id name="id" type="java.lang.Long">
            <column name="id" />
            <generator class="increment" />
        </id>
        <discriminator column="user_type" type="string" length="8" />
        <property name="username" type="java.lang.String" not-null="true"
            unique="true" unique-key="true">
            <column name="username" length="30" />
        </property>
        <property name="password" type="java.lang.String" not-null="true">
            <column name="password" length="128" />
        <subclass name="my.hibernate.actors.Subscriber"
            discriminator-value="subsc">
            <property name="bookedItems" type="java.lang.Integer" column="booked_items" />
            <set name="bookings" inverse="true" cascade="all-delete-orphan">
                <key column="user_id" />
                <one-to-many class="my.hibernate.operations.Booking" />
            </set>
        </subclass>
        <subclass name="my.hibernate.actors.Clerk"
            discriminator-value="clerk" />
    </class>
</hibernate-mapping> 
```

testbooking 表的休眠映射为：

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
    <class name="my.hibernate.operations.Booking" table="testBooking" catalog="efeu">
        <id name="id" type="java.lang.Long">
            <column name="id" />
            <generator class="native" />
        </id>

        <many-to-one name="userID" column="user_id" cascade="persist"
            not-null="true" class="my.hibernate.actors.Subscriber" />
        <many-to-one name="itemID" column="item_id"  cascade="persist"
            not-null="true" class="my.hibernate.items.Item" />

        <property name="startDate" type="java.sql.Date" not-null="true">
            <column name="start_date" length="10" />
        </property>

        <property name="endDate" type="java.sql.Date">
            <column name="end_date" length="10" />
        </property>
    </class>
</hibernate-mapping> 
```

PS。我想针对这个问题提出 2 个单独的问题。一次用于 Hibernate，一次用于 SQL，但我担心它会被视为重复。对于 Hibernate 需要了解的 SQL，我很想知道。它是否取决于 SQL 的方言？我目前正在询问mysql方言。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T15:42:31.563

您可以将用户类的属性与关联的 sql 公式一起使用。

```
<property name="booked_items" type="long" formula="(SELECT COUNT(tb.id) FROM testbooking AS tb WHERE tb.user_id = id)"/> 
```

看看这个答案：*似乎重复*

[使用 JPA / Hibernate 计算的属性](https://stackoverflow.com/questions/2986318/calculated-property-with-jpa-hibernate)

# c++ - 如何使用 NSPR 线程知道函数内部的线程 ID？

> ID：14317295
> 
> 赞同：0
> 
> 时间：2013-01-14T11:07:23.063
> 
> 标签：c++, multithreading, sqlite

我在我的应用程序中使用[NSPR 线程](https://developer.mozilla.org/en-US/docs/NSPR_API_Reference/Threads)。我正在创建 50 个线程。每个线程都会打开 SQLite 数据库并执行查询。

当两个线程同时执行查询时，将调用函数 BusyHandler（在下面的程序中）。我们如何在 BusyHandler 函数中获取 threadid？

示例程序：

```
#define THREADCOUNT 50

static int BusyHandler(void * pArg, int pTries);

void CreateThreads()
{
    int i = 0;
    PRThread *thread[THREADCOUNT];

    for(i = 0; i<THREADCOUNT;i++)
    {
        waitobj[i] = new WaitObj();
        thread[i] = PR_CreateThread(PR_USER_THREAD, StartThread, (void *)i, PR_PRIORITY_NORMAL, PR_GLOBAL_THREAD, PR_JOINABLE_THREAD, 0);
    }

    Sleep(20000);
    for(i = 0; i<THREADCOUNT;)
    {     
       waitobj[i]->Signal();
       PR_JoinThread(thread[i]);    
       i = i+1;
    }
}
void StartThread(void *Arg)
{ 
    char *errmsg;
    const char *err;
    const char *unused;
    int ret;

    int index = (int)Arg;
    sqlite3 *sqlite;

    const char *dir = "test.sqlite";
    ret = sqlite3_open(dir, &sqlite);
    sqlite3_busy_handler(sqlite, BusyHandler, sqlite);

    char query[100];
    sqlite3_stmt *stmt;

    strcpy(query, "insert into table1 values(1,2,3,4,5)");
    ret = ExecuteQuery(sqlite, query);
    if(ret != SQLITE_OK && ret != SQLITE_DONE )
    {       
        return;
    }
    Sleep(10000);   
}

int BusyHandler(void * pSQLite, int pTries)
{
    sqlite3 * sqlite = (sqlite3 *)pSQLite; 
    Sleep(1000);

    if(pTries >= 10) // now return BUSY
        return 0;

    // check whether lock is removed!
    return 1;
} 
```

# c++ - c：/lib64/libc.so.6：未找到版本“GLIBC_2.11”（c 需要）

> ID：14317296
> 
> 赞同：2
> 
> 时间：2013-01-14T11:07:24.933
> 
> 标签：c++

我从 IGPROF 开始进行内存分析——

我安装了它并完成了 - [http://igprof.sourceforge.net/install.html中定义的所有步骤](http://igprof.sourceforge.net/install.html)

但是当我跑步时：

> c++ -o vvvi-build-and-copy vvvi-build-and-copy.cc -ldl -lpthread

我收到错误-

> c++：/lib64/libc.so.6：未找到版本“GLIBC_2.11”（c++ 需要）

我用谷歌搜索但没有得到我该怎么办？？我现在正在使用 ubuntu。

你能帮助我吗 ？？如果您需要任何其他信息，请告诉我提前谢谢....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T11:17:56.807

这通常意味着您正在使用由比当前运行的更新的编译器 (gcc) 编译的库。您需要使用当前编译器重新编译库或更改为较新的编译器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T11:21:26.390

你不要说什么版本的Ubuntu。无论如何，这个问题是由你的 C++ 和 Ubuntu 中安装的版本之间的 glibc 版本不匹配引起的。

运行命令

```
/lib/libc.so.6 
```

获取有关您系统的 glibc 的信息，进行确认。您将看到不是您安装的 C++ 所需的“2.11 版”的内容。

如果您对发行版进行了不完整的更新（即 glibc 比 C++ 预期的要旧，因为您强制更新到 C++ 但留下了 glibc），您的情况可能会发生。

最好的解决方案应该是对“旧”软件包（“apt-get upgrade glibc”）进行“apt-get upgrade”，甚至更新整个发行版。

注意：这可能与安装无关`igprof`，不太可能修改C++，更不用说glibc了。

# php - 使用关联数组进行分页

> ID：14317299
> 
> 赞同：-1
> 
> 时间：2013-01-14T11:07:26.020
> 
> 标签：php, pagination

我有以下脚本，它将对数组的结果进行分页......但仅在使用数字键值时。可以修改此脚本以使用键的字符串值与关联数组一起使用吗？我需要这样做以按字母顺序对数组进行排序，最终目的是按字母顺序进行分页。

到目前为止的脚本。

```
$my_array = array(0 => 'a', 1 => 'b', 2 => 'c'); // THIS WORKS FINE

//$my_array = array('a' => 'a', 'b' =>'b', 'c'=>'c'); // THIS DOESN'T WORK

$arr = $my_array; 

$rows_per_page = 1;

$numrows = count($arr);

// Calculate number of $lastpage
$lastpage = ceil($numrows/$rows_per_page);

// condition inputs/set default
if (isset($_GET['pageno'])) {
   $pageno = $_GET['pageno'];
} else {
   $pageno = 1;
}

// validate/limit requested $pageno
$pageno = (int)$pageno;
if ($pageno > $lastpage) {
   $pageno = $lastpage;
}
if ($pageno < 1) {
   $pageno = 1;
}

// Find start and end array index that corresponds to the requested pageno
$start = ($pageno - 1) * $rows_per_page;
$end = $start + $rows_per_page -1;

// limit $end to highest array index
if($end > $numrows - 1){
    $end = $numrows - 1;
}

// display array from $start to $end
for($i = $start;$i <= $end;$i++){
    echo $arr[$i] . '<br />';
}
echo "<p style='text-align:center;'>";

// first/prev pagination hyperlinks
if ($pageno == 1) {
   echo " FIRST PREV ";
} else {
   echo " <a href='?pageno=1'>FIRST</a> ";
   $prevpage = $pageno-1;
   echo " <a href='?pageno=$prevpage'>PREV</a> ";
}

// Display current page or pages
echo " ( Page $pageno of $lastpage ) ";

// next/last pagination hyperlinks
if ($pageno == $lastpage) {
   echo " NEXT LAST ";
} else {
   $nextpage = $pageno+1;
   echo " <a href='?pageno=$nextpage'>NEXT</a> ";
   echo " <a href='?pageno=$lastpage'>LAST</a> ";
}

echo "</p>";
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T11:14:04.567

您通过数字索引引用关联数组，替换

```
for($i = $start;$i <= $end;$i++){
    echo $arr[$i] . '<br />';
} 
```

和：

```
$arr_keys = array_keys($arr);
for($i = $start;$i <= $end;$i++){
    echo '-'.$arr[$arr_keys[$i]] . '<br />';
} 
```

# .net - 在没有 ConfigurationManager 和 Web.config 的情况下使用 PayPal .NET SDK

> ID：14317305
> 
> 赞同：1
> 
> 时间：2013-01-14T11:07:37.700
> 
> 标签：.net, paypal, configuration-files

我们正在将 PayPal 与托管在 Azure 中的 Web 应用程序集成。遵循最佳实践建议，我们一直将配置值放在 CSCFG 文件中，而不是 web.config 或 app.config，但看起来 PayPal .NET SDK 仅支持通过 web.config/app.config 值进行身份验证。

有谁知道在 C# 代码中设置身份验证值的方法？这将允许我们继续使用 CSCFG 文件作为我们所有配置值的存储库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T02:52:42.457

我自己也在为此苦苦挣扎。您可以查看代码，但谁愿意。查看以下文章：

[在 Web.config 之外存储 Paypal Payments Pro 帐户信息](https://stackoverflow.com/questions/13095904/store-paypal-payments-pro-account-information-outside-of-web-config)

# c# - 如何访问铃声

> ID：14317311
> 
> 赞同：0
> 
> 时间：2013-01-14T11:08:09.697
> 
> 标签：c#, visual-studio-2012, windows-phone-8

我目前正在开发的应用程序要求我制作一个按钮，让用户选择用于推送通知的铃声。现在我无法获得关于我的应用程序在点击该按钮后如何显示本机铃声列表的文档？

将接受任何建议/链接/已发布的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T12:28:25.917

据我所知，您不能从应用程序内部更改通知铃声 - 也不能从应用程序内查询手机的所有可用铃声。用户需要转到设置并在那里更改铃声。

# java - 查找外部 Java 应用程序的组件并使用它们

> ID：14317313
> 
> 赞同：4
> 
> 时间：2013-01-14T11:08:12.500
> 
> 标签：java, swing, automation, external, jtextfield

我的问题看起来像：我有一个用 java 编写的外部应用程序，我启动它。接下来是启动我的应用程序。它应该找到外部应用程序的 JTextFields 并为它们设置适当的文本值。最后，触发放置在此窗口某处的 JButton。

我已经尝试过[Java search for on-screen text field](https://stackoverflow.com/questions/11771637/java-search-for-on-screen-text-field)的解决方案，但不知何故找不到特定的子窗口

此解决方案生成的输出为：

```
...
Window found: EnumWindows - NetBeans IDE 7.3 Beta 2
Window found: ToolkitEventListener2
Window found: theAwtToolkitWindow
Window found: 
... 
```

JFrame 的标题是 ToolkitEventListener2，它创建了 JMenu 和 JButton。

我希望我能很好地解释这个问题，你将能够帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T11:18:41.477

`java.awt.Window`类有一个静态方法

```
public static Window[] getWindows() 
```

使用它来获取所有现有窗口的列表。通过标题或焦点找到正确的`JFrame`（或）并获取所有子组件（递归）。`JDialog`过滤掉所有`JTextFields`并使用它们的值。

# android - 停止 IntentService 会导致空指针执行

> ID：14317314
> 
> 赞同：0
> 
> 时间：2013-01-14T11:08:17.440
> 
> 标签：android

我的 IntentService 类的代码是：

```
public class UdpSendService extends IntentService {
//...variable declarations
public UdpSendService() {
    // TODO Auto-generated constructor stub
    super("UdpService");
}

@Override
protected void onHandleIntent(Intent intent) {
    // TODO Auto-generated method stub
    host = intent.getStringExtra("host");
    port = intent.getIntExtra("port", 4000);
    pType= intent.getIntExtra("pType", 0);
    delay = intent.getIntExtra("delay", 0);
    msg= intent.getStringExtra("msg");
    broadcastIntent = new Intent(UdpResponseReceiver.ACTION_RESP);
    broadcastIntent.addCategory(Intent.CATEGORY_DEFAULT);
    try {
        addr = InetAddress.getByName(host);
        // addr=InetAddress.getLocalHost();
        socket = new DatagramSocket();
        // socket.connect(addr,port);

        System.out.println("\nSocket Connected");
    } catch (Exception e) {
        System.out.println("\nConnection failed");
        return;
    }

    send=true;
    switch (pType) {
    case 0:
        while (send) {
            sendPacket(msg);
        }
    case 1:
        // Float f = new Float(delayField.getString());
        // for(int i=0;i<2000;i++)
        while (send) {
            try {
                Thread.currentThread().sleep(delay);
            } catch (Exception e) {
            }
            sendPacket(msg);
        }
        // break;
    case 2:
        // for(int i=0;i<10000;i++)
        while (send) {
            int u = want(30);
            // int e=(int)Math.floor(-1*log(u)/(log((float)2.718)*2));
            // System.out.println(e);
            String data1 = "";
            while ((u--) > 0)
                data1 = data1 + msg;
            sendPacket(data1);
        }
        // break;
    case 3:
        //float f2 = Float.parseFloat(delayField.getText().toString());
        // for(int i=0;i<50;i++)
        while (send) {
            int u = want(30);
            // int e=(int)Math.floor(-1*log(u)/(log((float)2.718)*2));
            System.out.println(u);
            String data1 = "";
            while ((u--) > 0)
                data1 = data1 + msg;
            System.out.println("data length :" + data1.length());
            try {
                Thread.currentThread().sleep(delay);
            } catch (Exception e) {
            }
            sendPacket(data1);
        }

    }
}
public void onDestroy(){

    super.onDestroy();
    send=false;
    socket.close();
    socket=null;

}
void sendPacket(String text) {

    try {
        System.out.println("\nClient:: Sending packet: " + " to " + addr
                + port);
        byte[] data = text.getBytes();
        spacket = new DatagramPacket(data, data.length, addr, port);
        socket.send(spacket);
        String resultTxt="Sent Packet at:"+DateFormat.format("MM/dd/yy h:mmaa", System.currentTimeMillis());
        broadcastIntent.putExtra(PARAM_OUT_MSG, resultTxt);
        sendBroadcast(broadcastIntent);
    } catch (Exception e) {
        System.out.println("Error:" + e.getMessage());
        e.printStackTrace();
        // e.printStackTrace();
        return;
    }
}
} 
```

我通过调用从活动中停止服务

```
stopService(udpServiceIntent); //I start the service using the same intent 
```

logcat 显示：

```
01-14 15:53:41.446: W/System.err(1176): java.lang.NullPointerException
01-14 15:53:41.456: W/System.err(1176):     at com.example.udpmessageclient.UdpService.sendPacket(UdpService.java:123)
01-14 15:53:41.466: W/System.err(1176):     at com.example.udpmessageclient.UdpService.onHandleIntent(UdpService.java:74)
01-14 15:53:41.466: W/System.err(1176):     at android.app.IntentService$ServiceHandler.handleMessage(IntentService.java:65)
01-14 15:53:41.466: W/System.err(1176):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-14 15:53:41.466: W/System.err(1176):     at android.os.Looper.loop(Looper.java:137)
01-14 15:53:41.476: W/System.err(1176):     at android.os.HandlerThread.run(HandlerThread.java:60) 
```

据我了解，该程序仍会尝试执行

```
socket.send(spacket); 
```

即使在服务停止并且套接字关闭之后。如何避免这种情况？停止服务和释放资源的正确方法是什么？

# javascript - JavaScript：从字符串初始化数组

> ID：14317324
> 
> 赞同：0
> 
> 时间：2013-01-14T11:08:50.970
> 
> 标签：javascript

一个初学者的问题：我正在尝试使用以下字符串作为 JavaScript 中的初始数据来创建和初始化一个用户数组：

```
{ "user": {"notes": [{ "text": "Hello ", "date": "12\/1\/2013 5:01:36 AM", }], "name": "Alex"} }, { "user": { "notes": [{ "text": "Hi ", "date": "12\/1\/2013 5:15:19 PM"}, { "text": "It is me",  "date": "12\/1\/2013 6:23:54 PM"}], "name": "Anna"} } 
```

一般有可能（如何？）还是我完全弄错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T11:13:22.810

1.  确保 JSON 代码有效，为此使用[JSONLint](http://jsonlint.com/)。您的代码中有错误，我在下面的代码中修复了它。

2.  使用**[JSON.parse()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/parse)**将其传输到对象。

3.  要与所有浏览器兼容，请确保您也包含[json2](https://github.com/douglascrockford/JSON-js)（并非所有浏览器都有 JSON 对象来调用 JSON.parse 函数）。

4.  正如安东尼所提到的，结果不是一个数组而是一个对象。要遍历用户列表，请参阅[jsfiddle](http://jsfiddle.net/marcgrabow/6uECV/)或下面的示例。

**例子**

```
var str = "[{user:...";
var userList = JSON.parse(str);

for(var i in userList){
    var user = userList[i].user;
    document.write(user.name + "<br/>");
} 
```

**更正的 JSON**

```
[
{
    \"user\": {
        \"notes\": [
            {
                \"text\": \"Hello \",
                \"date\": \"12/1/2013 5:01:36 AM\"
            }
        ],
        \"name\": \"Alex\"
    }
},
{
    \"user\": {
        \"notes\": [
            {
                \"text\": \"Hi \",
                \"date\": \"12/1/2013 5:15:19 PM\"
            },
            {
                \"text\": \"It is me\",
                \"date\": \"12/1/2013 6:23:54 PM\"
            }
        ],
        \"name\": \"Anna\"
    }
}
] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T11:17:16.500

您的 JSON 无效。它包含一个语法错误（可能是问题中的拼写错误） - 在第一个用户之后的无效逗号`date`，它也是一个未包含在数组语法中的对象列表`[]`。

更正的json和解析示例为：

**[演示](http://jsfiddle.net/RDVZm/)**

```
var json = '[{ "user": {"notes": [{ "text": "Hello ", "date": "12\/1\/2013 5:01:36 AM" }], "name": "Alex"} }, { "user": { "notes": [{ "text": "Hi ", "date": "12\/1\/2013 5:15:19 PM"}, { "text": "It is me",  "date": "12\/1\/2013 6:23:54 PM"}], "name": "Anna"} }]';
//          ^ the list of objects need to be enclosed with []
var users = JSON.parse(json);

for(var i=0; i<users.length; i++)
{
  console.log(users[i].user.name);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T11:17:38.513

一般来说，您使用 ajax 调用获得了该字符串，对吗？ 您可以在所有现代浏览器中
使用 JSON.parse(strToBeConverted) 将该字符串转换为 javascript 对象。 如果没有这样的内置 JSON 对象怎么办？按照下面说的做， 1.导入从Douglas Crockford创建的[这个站点](https://github.com/douglascrockford/JSON-js)下载的JS， 2.使用JSON.parse来做你的业务。

# python - PyQt QWebPage linkClicked 信号可以检测使用了哪个鼠标按钮

> ID：14317328
> 
> 赞同：1
> 
> 时间：2013-01-14T11:09:02.537
> 
> 标签：python, qt, python-2.7, pyqt, pyqt4

我目前正在将此信号与处理点击的函数连接起来。例如：

```
QtCore.QObject.connect(self.ui.webView, QtCore.SIGNAL("linkClicked (const QUrl&)"), self.navigate)

def navigate(self, url):
    #do something 
```

我想要的是让导航功能知道链接是否被鼠标左键或右键单击。就像是

```
def navigate(self, url, event):
    if event == Qt.LeftClick:
        #do something
    if event == Qt.MidClick:
        #do something else 
```

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T11:23:28.867

您应该继承`QWebView`并覆盖[`mousePressEvent`](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qwebview.html#mousePressEvent)。[`button()`](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qmouseevent.html#button)您可以将使用的功能按下的按钮存储在变量中`QMouseEvent`。

在您的插槽中，您可以简单地检查按下的最后一个按钮的值并按照您想要的方式处理它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T15:08:45.250

另一种方法是在`mousePressEvent`那里重新实现和过滤鼠标事件：

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-

from PyQt4 import QtCore, QtGui

class myWindow(QtGui.QWidget):
    def __init__(self, parent=None):
        super(myWindow, self).__init__(parent)

        self.label = QtGui.QLabel(self)
        self.label.setText("Click Me")

        self.layout = QtGui.QHBoxLayout(self)
        self.layout.addWidget(self.label)

    def mousePressEvent(self, event):
        if event.buttons() == QtCore.Qt.LeftButton:
            self.label.setText("Left Mouse Click!")

        elif event.buttons() == QtCore.Qt.RightButton:
            self.label.setText("Right Mouse Click!")

        return super(myWindow, self).mousePressEvent(event)

if __name__ == "__main__":
    import sys

    app = QtGui.QApplication(sys.argv)
    app.setApplicationName('myWindow')

    main = myWindow()
    main.resize(150, 150)
    main.show()

    sys.exit(app.exec_()) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T11:21:17.037

如果您查看文档，则会有一些关于 QMouseEvent 中按下了哪些按钮的信息，您可以在事件过滤器中处理它们：[QMouseEvent.button docs](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qmouseevent.html#button)。

# java - 观察创建的表和条目

> ID：14317330
> 
> 赞同：0
> 
> 时间：2013-01-14T11:09:07.750
> 
> 标签：java, eclipse, eclipselink, derby

我按照本教程[http://www.vogella.com/articles/JavaPersistenceAPI/article.html](http://www.vogella.com/articles/JavaPersistenceAPI/article.html)并做了第 4 节，我运行主程序，我在控制台中看到创建的条目，我的问题是我怎么能看到创建的表和其中的条目，我在哪里可以找到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:06:50.853

可能是 Derby 不是以纯文本形式存储其数据，而是以其他形式存储数据。帮不上这个忙。您应该寻找使用某些查看器应用程序连接到 Derby 数据库并打开该表的方法。阅读此线程：[是否有除 ij 之外的工具来查看本地 derby 数据库（文件夹）？](https://stackoverflow.com/questions/4424892/is-there-a-tool-other-than-ij-to-look-into-a-local-derby-database-folder)

# mysql - 比赛..反对

> ID：14317337
> 
> 赞同：1
> 
> 时间：2013-01-14T11:09:46.500
> 
> 标签：mysql, select, against

我的查询不起作用，它总是显示相关的 0。即使针对数据也确实存在。

```
 SELECT number, MATCH(number) 
 AGAINST('02' '01' '03' WITH QUERY EXPANSION)
 as related FROM lottery_entries; 
```

你可以在下面看到结果。

![在此处输入图像描述](../Images/78556e8986b8ee3b3d7c70723556296b.png)

我不知道是什么原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T14:24:36.260

这是因为 MySQL 有一个服务器参数 -[包含在 FULLTEXT 索引中的单词的最小长度](http://dev.mysql.com/doc/refman/5.0/en/server-system-variables.html#sysvar_ft_min_word_len)。此参数的默认值为 4，因此您的“XX”等词不包含在此索引中。您应该更改此系统参数，重新启动服务器，然后重建所有 FULLTEXT 索引。

```
REPAIR TABLE lottery_entries QUICK; 
```

*   [用 MySQL 改变全文索引最小字长](http://www.electrictoolbox.com/mysql-full-text-index-word-length/)

# android - 正确处理 android 服务的重启

> ID：14317339
> 
> 赞同：0
> 
> 时间：2013-01-14T11:09:53.707
> 
> 标签：android, service

我正在实现一个连接到互联网服务器的 android 服务。服务在服务启动时创建会话，定期向服务器发送消息，最后在服务关闭时从服务器中删除会话。

从应用程序启动和停止服务工作正常，并且调用了 onCreate、onStartCommand 和 onDestroy()。我希望该服务能够在没有与 UI/活动的连接的情况下运行。这能够在启动时启动。

但是，如果我从 android 启动器关闭活动，则只会调用活动上的 onDestroy，而不是调用服务。当我使用 START_STICKY 时，系统会重新启动服务，再次调用 onCreate、onStartCommand。

那么如何检测到该服务第一次关闭，以便我可以将“注销”发送到我的服务器？或者替代检测重新启动，所以我不会再次“登录”？

我尝试使用静态布尔值来跟踪服务是否已启动（用户登录），但一旦服务重新启动，它似乎被重置为 false

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T11:27:19.550

如果里面的代码`onCreate`正在执行，则服务*正在*运行，`&& !sIsServiceRunning`是没用的。`onDestroy()`不保证会被调用，系统可能会直接终止进程而不会提醒服务。

# c# - 防止 ORDER BY 子句中的 SQL 注入

> ID：14317341
> 
> 赞同：11
> 
> 时间：2013-01-14T11:10:02.063
> 
> 标签：c#, sql-server-2008, sql-order-by, sql-injection

在我们的数据库访问层中，我们创建了一些动态查询。例如，我们有以下方法来构建`ORDER BY`子句的一部分：

```
protected string BuildSortString(string sortColumn, string sortDirection, string defaultColumn)
{
    if (String.IsNullOrEmpty(sortColumn))
    {
        return defaultColumn;
    }

    return String.Format("{0} {1}", sortColumn, sortDirection);
} 
```

问题是，`sortColumn`两者`sortDirection`都作为字符串来自外部，所以当然应该采取一些措施来防止可能的注入攻击。有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-14T11:15:06.637

如果您***必须***处理字符串，那么白名单是您最好的选择。首先，白名单应该很简单：与 /`sortDirection`比较时不区分大小写，你应该被设置。对于其他人，我更喜欢将**已知列**列入白名单，也许是通过传入数据的期望值并进行验证。但是在绝对紧要关头，您可以使用正则表达式限制（例如）强制它们都是**严格**的字母数字（在 az、AZ、0-9 范围内 - 如果需要，可能下划线） - 然后添加，即`"asc"``"desc"`**`Type`**`[]`****

 ****```
return string.Format("[{0}] {1}", sortColumn, sortDirection); 
```

但是：已知列的严格白名单会好得多，方向的枚举也是如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T11:31:28.243

如果您可以将方法更改为接受`int`而不是`string`参数，则另一种解决方案。

```
protected string BuildSortString(int sortColumn, int sortDirection, string defaultColumn)
{
    if (String.IsNullOrEmpty(sortColumn))
    {
        return defaultColumn;
    }
//sortdirection 0-> "ASC" else "DESC"
//sorColumn 1 for your firstcolumn, 2 for your second column etc.
    return String.Format("{0} {1}", sortColumn, sortDirection==0? " ASC " : " DESC ");
} 
```

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T11:15:56.283

您可以使用大型 CASE 语句来执行此操作，您可以在其中根据传递的列名称和方向进行切换。[这里有一个答案](https://stackoverflow.com/questions/709775/can-i-store-sql-server-sort-order-in-a-variable)。您将看到如下代码：

```
SELECT
     *
FROM
     My_Table
WHERE
     Whatever = @something
ORDER BY
     CASE @sort_order
          WHEN 'ASC' THEN
               CASE @order_by
                    WHEN 'surname' THEN surname
                    WHEN 'forename' THEN forename
                    WHEN 'fullname' THEN fullname
                    ELSE surname
               END
          ELSE '1'
     END ASC,
     CASE @sort_order
          WHEN 'DESC' THEN
               CASE @order_by
                    WHEN 'surname' THEN surname
                    WHEN 'forename' THEN forename
                    WHEN 'fullname' THEN fullname
                    ELSE surname
               END
          ELSE '1'
     END DESC 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T11:22:38.897

解决方案： cmd.Parameters 或[EscapedString](http://www.codeproject.com/Articles/371232/Escaping-in-Csharp-characters-strings-string-forma)，但我更喜欢 cmd.Parameters （总是工作，你喜欢预期的异常）

例子：

```
cmd.CommandText = "SELECT UNIQUE_ID FROM userdetails WHERE USER_ID IN (?, ?)";
cmd.Parameters.Add("?ID1", OdbcType.VarChar, 250).Value = email1;
cmd.Parameters.Add("?ID2", OdbcType.VarChar, 250).Value = email2; 
```

> 在大多数常见情况下，使用带参数的预处理语句有助于防御 SQL 注入，否则您会将不受信任的内容插入到字符串中，然后将字符串作为 SQL 语句执行。
> 
> 但是查询参数代替了单个值。您不能使用查询参数来替代动态表名、列名、值列表（例如，用于 IN() 谓词）、表达式或 SQL 关键字。
> 
> 对于这些情况，您可以使用过滤或白名单等技术，这样您就不会将不受信任的内容插入到 SQL 字符串中。
> 
> 过滤是您去除任何会引起麻烦的字符的地方。如果您知道您的动态列名只能是字母数字字符，那么在 SQL 中使用之前对您的变量应用过滤器。否则，如果变量与 /^[A-Za-z0-9]*$/ 之类的正则表达式不匹配，则拒绝该变量

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-14T11:39:22.573

你可以这样做：

```
public string BuildSortString(string sortColumn, SortDirection direction, string defaultColumn)
{
    string sortDirection = direction.ToString();

    if (String.IsNullOrEmpty(sortColumn))
    {
        return VerifyColumn(defaultColumn);
    }

    return String.Format("{0} {1}", VerifyColumn(sortColumn), sortDirection);
}

private string VerifyColumn(string column)
{
    switch (column) // fill this with a whitelist of accepted columns
    {
        case "some_column":
            return column;
    }

    return String.Empty; // the column must be invalid (do whatever you want here)
}

public enum SortDirection
{
    ASC, DESC
} 
```****

# 3d - 将世界空间法线转换为屏幕空间法线

> ID：14317350
> 
> 赞同：10
> 
> 时间：2013-01-14T11:10:28.107
> 
> 标签：3d, transformation, space, projection, normals

将世界空间中定义的表面法线转换为屏幕空间中的法线的正确方法是什么？我不认为它们可以简单地乘以投影矩阵，因为透视分割将事物转换为剪辑空间，据我所知，在这个空间中，与图像平面共面的平面保持共面。

但是我正在寻找的转换应该导致转换的法线，这样图形 A 中描绘的蓝色世界法线应该导致不同的屏幕空间法线（因为，即使它们的平面与图像平面共面，它们也不面向相机） - 另一方面，图形 B 中描绘的法线在转换后应该（或多或少）相等，因为它们的表面面向相机。

![在此处输入图像描述](../Images/8c18c2176955d2f75ad2088e3a85a046.png)

我在寻找什么转变？怎么计算呢？

我需要它来获得一些屏幕空间效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T13:41:23.270

您正在寻找基于基础的转换矩阵。关于如何计算这个矩阵的步骤有相当不错的视频。查看[KhanAcademy 视频](https://www.khanacademy.org/math/linear-algebra/alternate_bases/change_of_basis/v/lin-alg--transformation-matrix-with-respect-to-a-basis)。

**编辑**

您没有提供有关您正在使用的技术的任何信息（OGL、DX、着色器、自己的投影......），但您绝对应该阅读一些关于切线空间的文章，例如，[Messing with Tangent Space](http://www.gamasutra.com/view/feature/1515/messing_with_tangent_space.php) ..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T13:52:01.653

在将法线从模型（到视图）空间转换时尝试像往常一样做 - 使用**逆转置**矩阵。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-15T22:41:38.930

假设您想用任意 4x4 矩阵变换点 P 处的法线 N。让我们用模型部分 T（具有旋转、缩放和平移）和最后一行作为 W 的部分来表示矩阵。这使我们可以这样说：

```
Transform(P) = (T * P) / dot(W,P) 
```

现在，投影法线可以看作是一个限制（d -> 0）：

```
(Transform(P+dN) - Transform(P)) / d 
```

扩展这个方程，然后从提名和分母中删除“d”，得到这个公式：

```
dot(W,N) * (Transform(N) - Transform(P)) / dot(W,P) 
```

这是未经测试和验证的，但我认为鉴于这个问题缺乏积极的答案，我会试一试；）

# java - BUG：Java Swing Key Bindings Lose Function with JDK 7 in OSX with awt setFullScreenWindow

> ID：14317352
> 
> 赞同：1
> 
> 时间：2013-01-14T11:10:32.413
> 
> 标签：java, macos, awt, key-bindings

编辑 1/16/2013：原始问题已被删除。这似乎是 mac OSX 上 JDK 7 的一个错误。我已经向 Sun (Oracle) 提交了错误报告。

下面的文件使用 awt 类 GraphicsEnvironment 和方法 setFullScreenWindow 将图像显示为全屏。不包含任何图像，因此运行代码时屏幕将是灰色的。但是，键绑定应该仍然有效。

有两个键绑定。按“ENTER”应打印“Enter was press”。到标准输出。按“ESCAPE”应将“程序由 ESC 键终止”打印到标准输出并退出程序。

使用 Windows 7 64 和 JDK Java SE 6 AND 7，这些键绑定按预期工作。

使用 Mac OSX 10.7 Lion 和 JDK Java SE 6，这些键绑定按预期工作。

使用 Mac OSX 10.7 Lion 和 JDK Java SE 7 这些键绑定**停止**工作。

回滚到 JDK Java SE 6 会使它们重新开始工作。

我不知道它是否会影响其他操作系统。

我已经尝试了所有版本的 JComponent.WHEN_IN_FOCUS 等......但这些选项都没有解决问题。

以下是仅当您使用 Mac OSX 10.7 和 JDK Java SE 7 时才会重现错误的[SSCCE 。](http://sscce.org)

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class FullScreen extends JFrame
{
    /*
     * screenImage is never set in this code. It can be set to any image
     * the error will still be present. Images have been omitted to simplify
     * the example case.
     */
    private Image screenImage;
    private int width;
    private int height;

    //Create panel for displaying images using paintComponent()
    private PaintPanel mainImagePanel;

    //Used for keybinding
    private Action enterAction;
    private Action escapeAction;
    private static final String enter = "ENTER";
    private static final String escape = "ESCAPE";

    public FullScreen()
    {
 /**********************************************
  ******THE BELOW LINES CAUSE THE ERROR*********
  **********************************************/

        /****************************************** 
         * Removes window framing and sets fullscreen mode.
         ******************************************/

        this.setUndecorated(true);
        GraphicsEnvironment.getLocalGraphicsEnvironment().getDefaultScreenDevice().setFullScreenWindow(this);

 /**********************************************
  ******THE ABOVE LINES CAUSE THE ERROR*********
  **********************************************/

        width = this.getWidth();
        height = this.getHeight();

        //Create panel so that I can use key binding which requires JComponent
        mainImagePanel = new PaintPanel();      
        add(mainImagePanel);

        /****************************************** 
         * Key Binding
         ******************************************/

        // Key bound AbstractAction items 
        enterAction = new EnterAction();
        escapeAction = new EscapeAction();

        // Gets the mainImagePanel InputMap and pairs the key to the action
        mainImagePanel.getInputMap().put(KeyStroke.getKeyStroke(enter), "doEnterAction");
        mainImagePanel.getInputMap().put(KeyStroke.getKeyStroke(escape), "doEscapeAction");

        // This line pairs the AbstractAction enterAction to the action "doEnterAction"
        mainImagePanel.getActionMap().put("doEnterAction", enterAction);
        mainImagePanel.getActionMap().put("doEscapeAction", escapeAction);

        /******************************************
         * End Key Binding
         ******************************************/
    }

    //Stretches and displays images in fullscreen window
    private class PaintPanel extends JPanel
    {
        @Override
        public void paintComponent(Graphics g) 
        { 
            if(screenImage != null)
            {
                super.paintComponent(g);
                g.drawImage(screenImage, 0, 0, width, height, this);
            }  
        }
    }

    /******************************************
     * User Input
     ******************************************/

    private class EnterAction extends AbstractAction
    {
        @Override
        public void actionPerformed(ActionEvent e)
        {
            System.out.println("Enter was pressed.");
        }
    }

    private class EscapeAction extends AbstractAction
    {
        @Override
        public void actionPerformed(ActionEvent e)
        {
            System.out.println("Program Terminated by ESC Key");
            System.exit(0);
        }
    }

    public static void main(String[] args) 
    {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() 
            {
                FullScreen show = new FullScreen();
                show.setVisible(true);
            }
        });
    }
} 
```

所以下面的两行导致了这个问题。

```
this.setUndecorated(true);
GraphicsEnvironment.getLocalGraphicsEnvironment().getDefaultScreenDevice().setFullScreenWindow(this); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-03T09:33:20.203

[http://mail.openjdk.java.net/pipermail/macosx-port-dev/2012-November/005109.html](http://mail.openjdk.java.net/pipermail/macosx-port-dev/2012-November/005109.html)

There is a workaround!

After you make it fullscreen, do `frame.setVisible(false);` then `frame.setVisible(true)`. Why does it work? Consult the above link.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T12:27:16.363

正如[这里](https://stackoverflow.com/q/3524150/230513)所指出的，一些静态最终变量可以有效地内联在依赖类中。如果在另一个类中静态定义，则隐式将 a 连接`KeyStroke`到 a`String`并将其连接`String`到a 的键绑定`Action`可能会表现出这种行为。[这里](https://stackoverflow.com/a/14255532/230513)`String`建议的一个简单的权宜之计是进行完整构建。如果这样可以解决问题，您可能能够向后工作以减轻依赖性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-16T20:32:39.153

在与此代码具有功能键绑定的 mac 系统上，我安装了 jdk-7u11-macosx-x64.dmg。安装后键绑定不再起作用。在这一点上，我很有信心这是新版本的 JDK for OSX 的一个错误，并将报告它。

感谢大家试图帮助解决这个问题，但事实证明代码很好。

# facebook - Facebook redirect_uri 错误，注册应用程序。不加载

> ID：14317356
> 
> 赞同：1
> 
> 时间：2013-01-14T11:11:00.570
> 
> 标签：facebook, redirect, uri

我只是在现有网站上放了一些 Facebook 功能以供评论等，也许还有其他一些有趣的事情，但是，尽管所有其他功能都有效，但登录按钮、评论框和点赞按钮只是注册表单惯于。

我得到的错误如下：

> 无法加载 Roundhall_community_ecosystem 的注册表单。您之前可能在 Facebook 上屏蔽了此应用。转到您的 Facebook 隐私设置以取消阻止此应用。（错误：缺少“redirect_uri”查询参数。）

我不在沙盒模式下，我按照开发人员页面上的说明将 redirect_uri 替换为我网站的 url 但是鉴于指定了此错误，我仍然认为这可能是停止注册应用程序的原因。从加载。

唯一一次在此处记录问题：[https](https://stackoverflow.com/questions/12431870/using-facebook-registration-plug-in-iframe-and-getting-error-missing-redirec) ://stackoverflow.com/questions/12431870/using-facebook-registration-plug-in-iframe-and-getting-error-missing-redirec ，给出的解决方案是引号丢失，但用户没有说在哪里。

# android - 从 Android 应用程序上传 YouTube 视频

> ID：14317358
> 
> 赞同：0
> 
> 时间：2013-01-14T11:11:03.533
> 
> 标签：android, youtube, youtube-api

我对将 youtube 集成到我的移动应用程序的能力有疑问。移动应用程序应该有一个按钮，用于直接在 youtube 上的专用频道上加载（由用户）视频。该频道将由我的客户创建。是否有可能通过蜜蜂将视频上传直接集成到特定的 youtube 频道？

它适用于安卓应用程序。

非常感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T20:16:56.303

在 Android 应用程序中将视频上传到 YouTube 的最直接方法是使用`Intent`YouTube 应用程序公开的。在其他 Stack Overflow 问题中有这样做的例子，例如[android youtube upload using intent](https://stackoverflow.com/questions/5884092/android-youtube-upload-using-intent)

话虽如此，我想指出将视频上传到单个“主”帐户（根据您的问题，您似乎想要这样做）不是一个好主意。这篇博文更详细地解释了原因：http: [//apiblog.youtube.com/2012/02/video-uploads-from-your-sites-community.html](http://apiblog.youtube.com/2012/02/video-uploads-from-your-sites-community.html)

# html - Internet Explorer 浏览器模式的可靠性如何？

> ID：14317360
> 
> 赞同：1
> 
> 时间：2013-01-14T11:11:17.607
> 
> 标签：html, internet-explorer, browser, quirks-mode

我似乎找不到任何答案：

当我在 IE 中更改浏览器模式时，我可以在多大程度上依赖它实际呈现网页，就好像当我使用 IE10 时可以说 IE8 一样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-21T14:04:21.687

到目前为止，我看到的结果好坏参半；我从未测试过 IE9 版本，因此无法评论微软这次是否做得更好（[https://stackoverflow.com/a/11418046/841830](https://stackoverflow.com/a/11418046/841830)上报告的内容比我以前更具体到 CSS看着）。

具体来说，我在 Windows 7（64 位）上安装了 IE10，并测试了 HTML5 功能。文档模式的选择似乎比浏览器模式的选择重要得多。

*   用户代理正确更改
*   IE检测成语有效

    ```
     &lt;!--[if lte IE 9]>
     &lt;script language="javascript">
     var is_ie_9_or_earlier=true;
     &lt;</script>
     &lt;![endif]--> 
    ```

*   `typeof window.PostMessage`： 错误的。这在 IE7 模式下作为“对象”返回。我相信它在真正的 IE7 中是未定义的。IE8/IE9/IE10 正确地将其作为“对象”返回。

*   `typeof new XMLHttpRequest().responseType`. 这在 IE7/IE8/IE9 中是“未定义”，在 IE10 中是“字符串”。我认为这是正确的。
*   `typeof Object.keys`. 在 IE7/IE8 中未定义，但在 IE9/IE10 中为“函数”。再次，我认为这是正确的。

另一方面，同一台机器上的 ietester 则更奇怪（javascript 在应该有的时候没有正确运行）。

# php - 使用 PHP 将大型更新 CSV 上传到 mySQL

> ID：14317361
> 
> 赞同：0
> 
> 时间：2013-01-14T11:11:18.053
> 
> 标签：php, mysql, csv

我们正在运行 Seibel CRM 来获取客户订阅。所有客户记录的每日摘要每天都会发送给我，以进行一些分析并用于其他任务。我需要使用 PHP 页面将相同的文件上传到 mySQL 中，因为这将由其中一位主管完成。

该文件大约 47MB，包含大约 200,000 条记录。它每天增加 500-550 条记录。客户参考是他的号码。如果客户退订或服务终止，则客户编号在 3 个月后分配给另一个编号；这意味着我需要搜索添加或更改。

我需要关于第一次上传和需要进行的日常上传例程的帮助。

提前谢谢你，

阿齐兹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T13:26:37.873

我遇到了像你这样的问题。对于我的问题 LOAD DATA LOCAL INFILE '' INTO TABLE 是一个很好的解决方案（大约 1 000 000 条记录）。用php上传文件，然后调用sql查询。但是文件的结构必须和mysql表中的一样。

亲切的问候

# php - 在没有提交按钮的情况下更新单选按钮值

> ID：14317362
> 
> 赞同：1
> 
> 时间：2013-01-14T11:11:19.120
> 
> 标签：php, javascript, jquery-mobile, radio-button

我在更新无线电值时遇到问题。当我使用提交按钮提交表单时，它可以正常工作，但是当我使用 javascript 时，数据库中的值不会更新。我正在使用jquery mobile。有人可以帮忙吗？谢谢！

**更新的代码，现在只有前 3 个单选按钮有效**

为每个任务动态生成 3 个单选按钮：

```
<?php
 include 'connection.php';

 $query = "SELECT*FROM plan";
 $result = mysql_query($query);
 $num = mysql_numrows($result);

  mysql_close();

  $i=0;
 while ($i < $num) {
    $id=mysql_result($result, $i, "id");
    $task=mysql_result($result, $i, "task");
 $state=mysql_result($result, $i, "state");
?>

<form id="formnobtn" action="nobtn.php" method="POST" data-ajax="false">
<input type="hidden" name="id" value="<? echo "$id";?>">
<input type="radio" name="r" id="rA" value="A" class='custom' data-theme="a" <?php if ($statE == 'A'): ?>checked='checked'<?php endif; ?>><label for="rA">&nbsp;</label>
<input type="radio" name="r" id="rB" value="B" class='custom' data-theme="c" <?php if ($statE == 'B'): ?>checked='checked'<?php endif; ?>><label for="rB">&nbsp;</label>
<input type="radio" name="r" id="rC" value="C" class='custom' data-theme="f" <?php if ($statE == 'C'): ?>checked='checked'<?php endif; ?>><label for="rC">&nbsp;</label>
<div data-role="collapsible" name="ud_c" value=" <?echo "$task";?> "><h3><?echo "$task";?></h3></div>
</form>

<?php
   $i++;
 }
?> 
```

javascript 应该在检查单选按钮时提交表单：

```
$(document).ready(function() {
$('input[type="radio"]').click(function(){
    if ($(this).is(":checked"))
    $('form#formnobtn').submit();
});
}) 
```

更新数据库：

```
<?php
$id = $_POST['id'];
if (isset($_POST['r'])){    
    $state = $_POST['r'];                
    echo $state;
    include 'connection.php';
    $query= "UPDATE plan SET state='$state' WHERE id='$id'";
            mysql_query($query);
            mysql_close();
            header('Location: nobtn.php');
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T12:05:06.027

请试试这个： -

我为单选按钮检查值创建了一个隐藏值。它将在表单发布上发送单选按钮检查值。我不知道你为什么在这里使用 id 这就是为什么我在你的 php 代码中创建一个 $radio_checked_id 变量。我希望这会对你有所帮助。

为每个任务动态生成 3 个单选按钮：

```
<form id="formnobtn" action="nobtn.php" method="POST" data-ajax="false">
<input type="hidden" name="id" value="<?php echo $id =(isset($id)) ? $id : '';?>">
<input type="radio" name="r" id="rA" value="A" class='custom' data-theme="a" <?php if ($statE == 'A'): ?>checked='checked'<?php endif; ?>><label for="rA">&nbsp;</label>
<input type="radio" name="r" id="rB" value="B" class='custom' data-theme="c" <?php if ($statE == 'B'): ?>checked='checked'<?php endif; ?>><label for="rB">&nbsp;</label>
<input type="radio" name="r" id="rC" value="C" class='custom' data-theme="f" <?php if ($statE == 'C'): ?>checked='checked'<?php endif; ?>><label for="rC">&nbsp;</label>
<div data-role="collapsible" name="ud_c" value="<?php echo  $task =(isset($task)) ? $task : '';?>"><h3><?php echo  $task =(isset($task)) ? $task : '';?></h3></div>
<input type="hidden" name="checked_id" id="checked_id" value="">
</form> 
```

javascript 应该在检查单选按钮时提交表单：

```
$(document).ready(function() {
$('input[type="radio"]').click(function(){
  var checked_radio_id = $(this).val();
      $('#checked_id').val(checked_radio_id);
    }
$('form#formnobtn').submit();
});
}) 
```

更新数据库：

```
<?php
$submit = $_POST['submit'];
$id = $_POST['id'];
$radio_checked_id = $_POST['checked_id'];
if($submit){
if (isset($_POST['r'])){    
    $state = $_POST['r'];                
    echo $state;
    include 'connection.php';
    $query= "UPDATE plan SET state='$state' WHERE id='$id'";
            mysql_query($query);
            echo "Record Updated";
            mysql_close();
            header('Location: nobtn.php');
}

else {
    echo "Please select a radio button!";
}
}
?> 
```

我不确定以下行是否正确，“提交”实际上是有提交按钮时提交按钮的名称，但我不知道如何更正它..

```
$submit = $_POST['submit']; 
```

# powershell - 查询路径存在和处理结果为 TRUE

> ID：14317363
> 
> 赞同：0
> 
> 时间：2013-01-14T11:11:20.367
> 
> 标签：powershell, powershell-2.0

下面检查是否存在注册表项并根据“TRUE”的结果如何让脚本捕获并处理它？

示例 -`$testpath1`将永远存在。然而`$testpath2, $testpath3`或`$testpath4`可能并不总是存在。因此，脚本应该只处理 testpath1，因为它返回为真。

但是，如果`$testpath2`并且`$testpath3`存在，那么脚本应该处理到`$testpath3`并忽略`$testpath4`

我有以下内容，但问题是一旦确定第一个语句为真，它只处理那个语句并绕过所有其他语句。我真的希望脚本遍历每个语句和包含错误的语句，然后忽略该语句并处理它之前的语句。我猜 IF ELSE 不适用于这样的事情——那我应该用什么？

这是代码，下面的结果是：

结果： `1 is true`

然而`$testpath1`并`$testpath2`存在...

```
$CommunityName = Get-ChildItem HKLM:\SYSTEM\CurrentControlSet\services\SNMP\Parameters\TrapConfiguration | ForEach-Object {Get-ItemProperty $_.pspath} | where-object {$_.PSChildName } | Foreach-Object {$_.PSChildName}

$testpath1 = (Get-ItemProperty hklm:\SYSTEM\CurrentControlSet\services\SNMP\Parameters\TrapConfiguration\$CommunityName -Name 1) -ne $null 2>$null
$testpath2 = (Get-ItemProperty hklm:\SYSTEM\CurrentControlSet\services\SNMP\Parameters\TrapConfiguration\$CommunityName -Name 2) -ne $null 2>$null
$testpath3 = (Get-ItemProperty hklm:\SYSTEM\CurrentControlSet\services\SNMP\Parameters\TrapConfiguration\$CommunityName -Name 3) -ne $null 2>$null
$testpath4 = (Get-ItemProperty hklm:\SYSTEM\CurrentControlSet\services\SNMP\Parameters\TrapConfiguration\$CommunityName -Name 4) -ne $null 2>$null

if ($testpath1 -eq 'TRUE')
{
Write-Host "1 is true"
}
elseif ($testpath1 -eq 'TRUE' -and $testpath2 -eq 'TRUE')
{
Write-Host "1 and 2 is true"
}
elseif ($testpath1 -eq 'TRUE' -and $testpath2 -eq 'TRUE' -and $testpath3 -eq 'TRUE')
{
Write-Host "1 and 2 and 3 are true"
}
elseif ($testpath1 -eq 'TRUE' -and $testpath2 -eq 'TRUE' -and $testpath3 -eq 'TRUE' -and $testpath4 -eq 'TRUE')
{
Write-Host "1 and 2 and 3 and 4 are true"
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T11:30:40.207

像这样的东西可以取决于您的需求：

```
 $a = $testpath1, $testpath2 , $testpath3 , $testpath4 # convert your true/false results in an array
$s = "" # empty string
$i = 1 # a simple variable as index
foreach ($b in $a)
 {
   if ($b -ne $true ) 
   { 
     break
   } 

   $s += "$i " # if true add index in string
   $i++
}

"$($s)is/are true" #output the result 
```

# c# - 调用者的编译时验证，或者是否可以扩展 C# 编译器？

> ID：14317365
> 
> 赞同：2
> 
> 时间：2013-01-14T11:11:39.740
> 
> 标签：c#, validation, compiler-construction, attributes, compile-time

考虑这种方法和描述：

```
[Description("It must be called from a property, else it is a runtime error.")]
protected T Load<T>()
{
   return InternalLoad<T>();
} 
```

该方法的设计*要求*调用者*必须*是属性，否则`InternalLoad`会抛出异常。它使用[StackFrame](http://msdn.microsoft.com/en-us/library/system.diagnostics.stackframe.aspx)来获取调用者名称，如果不是`get_<PropertyName>`or的形式`set_<PropertyName>`，则抛出异常。这一切都发生在我不喜欢的运行时。

我想知道是否有任何方法可以确保**在编译时**调用者始终是一个属性。换句话说，应该只允许属性调用此方法。有什么方法可以在**编译时**检查吗？

作为最后的手段，是否可以扩展将使用自定义属性（例如`CallableFromAttribute`）来确保这一点的 C# 编译器？

我想让它尽可能灵活：

```
[CallableFrom(Caller.Property)] //Caller is an enum
protected T Load<T>()
{
   return InternalLoad<T>();
}

[CallableFrom(Caller.Property | Caller.Method)]
protected T SomeOtherLoad<T>()
{
  //code
} 
```

接着

```
public string Method()
{
    var x = this.SomeOtherLoad<string>(); //okay
    var y = this.Load<string>();          //compilation error !!
} 
```

让我知道是否有任何混淆。我会澄清的。:-)

* * *

我需要此功能，因为我正在尝试实现一个名为的类，该类`PropertyManager`用作其他需要定义属性的类的*基类。*这个类的典型用法是这样的：

```
public sealed Vendor : PropertyManager
{
    public string VendorName
    {
       get { return this.Load<string>(); }
       set { this.Store(value); }
    }
    public DateTime Created
    {
       get { return this.Load<DateTime>(); }
       set { this.Store(value); }
    }
} 
```

在基类中定义的方法和方法发现调用`Load`它们的属性的*名称；*将该名称视为*key*，它从字典中读取关联的值（在 的情况下），或写入它（在 的情况下）。它引发属性更改和更改事件。它还支持撤消，因为可以轻松跟踪对属性所做的所有更改。`Store`**`Load``Store``ProperyMananger`**

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T11:51:56.403

No, there is no such possibility at compile time. There cannot be: all such compile-time checks are based on whether a method is accessible from the method that accesses it, *not* the method that calls it. If a property setter exposes `Load` via a delegate, there is no possible way even in a theoretical modified compiler to check at compile time that nobody uses that delegate other than another property setter.

I'm not sure why you want this, so I'm assuming that your check is necessary and your runtime check verifies exactly what you need it to. If that assumption is wrong, there may be some options, but your question as asked is simply impossible.**

# drupal - 如何拥有具有不同价格选项的产品

> ID：14317367
> 
> 赞同：0
> 
> 时间：2013-01-14T11:11:41.597
> 
> 标签：drupal, ubercart

我希望我的所有产品都有多个价格。例如：我在卖窗户。每个窗户都有普通型、超薄型和坚固型。有些窗户没有强类型，每种类型都有自己的价格。用户可以从 Dropbox 中选择类型。有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T14:17:39.847

我使用了ubercart的产品属性。我列出了买家必须从中选择的清单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T06:33:15.893

是的，有一个简单的方法，使用 drupal 商务模块。 [http://drupal.org/project/commerce](http://drupal.org/project/commerce)

# javascript - 在另一个函数完成后命令 jquery 函数发生

> ID：14317368
> 
> 赞同：1
> 
> 时间：2013-01-14T11:11:44.113
> 
> 标签：javascript, jquery

我有一个函数，当运行时，在我的页面上为 div 设置动画并删除一个类，但是我想要做的是在高度动画结束时删除类，这可以使用 jQuery 吗？

```
 var el = $(this).find('ul li'); 
        var img = $(this).find('ul li img');        
        $(this).removeClass('active');

        //return false;
        el.animate({height:'135px'}, 500);
        el.css({
            'background-position':'top left',
            'background-size' : 'auto auto'
        });             

        $(this).find('ul li img').animate({height:'270px'}, 500);
        $(this).animate({height:'135px'}, 500);  

        img.attr('src', function(i, value) {
            return value.substring(28);
        }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T11:18:14.907

有一个`complete`函数在动画完成后运行。根据[函数的](http://api.jquery.com/animate/#complete)[jQuery 文档`animate`](http://api.jquery.com/animate/#complete)，您可以像这样使用它：

```
el.animate({height:'135px'}, 500, function() {
    //code to run when complete goes here
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T11:20:37.477

在 .animate 函数中使用这样的完整调用：

```
complete:  function() { your func u wanna call when ani is complete..; } 
```

# email - 使用电子邮件和本地服务器的经典 ASP

> ID：14317369
> 
> 赞同：0
> 
> 时间：2013-01-14T11:11:44.813
> 
> 标签：email, iis-7, asp-classic, localhost

基本上，我创建了一个包含 To、From、Subject 和 Textbody 的表单，所有这些都被适当地命名。我需要知道的是我需要使用哪些代码来使用 Classic ASP 链接到本地​​端口，以测试我的代码并发送电子邮件，

我现在安装了 IIS 和其他一些小程序，但我无法理解它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T13:16:30.327

[在vbscript](/questions/tagged/vbscript "显示标记为“vbscript”的问题")中发送电子邮件通常是通过 CDO 完成的 - 例如使用 gmails SMTP 服务器（注意使用`configuration/smtpserverport`和`configuration/smtpusessl`）

```
Dim ObjSendMail
Set ObjSendMail = CreateObject("CDO.Message") 

ObjSendMail.Configuration.Fields.Item ("http://schemas.microsoft.com/cdo/configuration/sendusing") = 2
ObjSendMail.Configuration.Fields.Item ("http://schemas.microsoft.com/cdo/configuration/smtpserver") = "smtp.gmail.com"
ObjSendMail.Configuration.Fields.Item ("http://schemas.microsoft.com/cdo/configuration/smtpserverport") = 465
ObjSendMail.Configuration.Fields.Item ("http://schemas.microsoft.com/cdo/configuration/smtpusessl") = 1
ObjSendMail.Configuration.Fields.Item ("http://schemas.microsoft.com/cdo/configuration/smtpconnectiontimeout") = 60

ObjSendMail.Configuration.Fields.Item ("http://schemas.microsoft.com/cdo/configuration/smtpauthenticate") = 1
ObjSendMail.Configuration.Fields.Item ("http://schemas.microsoft.com/cdo/configuration/sendusername") ="info@thedomain.com" '#### Gmail Username (usually full email address)
ObjSendMail.Configuration.Fields.Item ("http://schemas.microsoft.com/cdo/configuration/sendpassword") ="password" '#### Gmail Password

ObjSendMail.Configuration.Fields.Update

ObjSendMail.To = ""
ObjSendMail.Subject = ""
ObjSendMail.From = ""

ObjSendMail.TextBody = "Hello World"

ObjSendMail.Send
Set ObjSendMail = Nothing 
```

# sql - SQL查询内连接0值

> ID：14317371
> 
> 赞同：0
> 
> 时间：2013-01-14T11:11:50.447
> 
> 标签：sql, sql-server, join, inner-join

我有这张桌子：

```
idSection   | idQuestion    | title     | enunciation | idScale
1           | 1             | title 1   | question 1  |    3      
1           | 1             | title 1   | question 1  |    3      
1           | 1             | title 1   | question 1  |    3      
1           | 1             | title 1   | question 1  |    2
1           | 1             | title 1   | question 1  |    5
1           | 2             | title 2   | question 2  |    1      
1           | 2             | title 2   | question 2  |    3      
1           | 3             | title 3   | question 3  |    1 
```

并有这张桌子：

```
idScale   |       name 
   1      |      Very Bad
   2      |         Bad
   3      |         Good
   4      |      Very Good
   5      |      Excellent 
```

我想要一张这样的桌子：

```
idSection   | idQuestion    | title     | enunciation | Total  | Name
1           | 1             | title 1   | question 1  |    0   |  Very Bad
1           | 1             | title 1   | question 1  |    0   |  Bad
1           | 1             | title 1   | question 1  |    3   |  Good
1           | 1             | title 1   | question 1  |    0   |  Very Good
1           | 1             | title 1   | question 1  |    1   |  Excellent
1           | 2             | title 2   | question 2  |    0   |  Very Bad
1           | 2             | title 2   | question 2  |    1   |   Bad
1           | 2             | title 2   | question 2  |    3   |  Good 
1           | 2             | title 2   | question 2  |    0   |  Very Good
1           | 2             | title 2   | question 2  |    0   |  Excellent 
```

查询：

```
SELECT 
    t1.idSection, t1.idQuestion, t1.title, t1.enunciation, 
    COUNT(t1.idScale) as Total, t2.name 
FROM 
    table1 AS t1
INNER JOIN 
    table2 as t2 ON t2.idScale = t1.idScale
GROUP BY 
    t1.idSection, t1.idQuestion, t1.title, t1.enunciation, t2.name 
```

结果是查询：

```
idSection   | idQuestion    | title     | enunciation | Total  | Name
1           | 1             | title 1   | question 1  |    3   |  Good
1           | 1             | title 1   | question 1  |    1   |  Excellent
1           | 2             | title 2   | question 2  |    1   |   Bad
1           | 2             | title 2   | question 2  |    3   |  Good 
```

这样做的问题是不会出现为 0 的查询值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T11:56:43.487

我想你正在寻找这个：

```
SELECT
  t1.idSection,
  t1.idQuestion,
  t1.title,
  t1.enunciation, 
  SUM(case when t1.idScale=t2.idScale then 1 else 0 end) as Total,
  t2.name
FROM
  table1 AS t1, table2 as t2
GROUP BY t1.idSection, t1.idQuestion, t1.title, t1.enunciation, t2.name, t2.idScale
ORDER BY t1.idSection, t1.idQuestion, t2.idScale 
```

这不是 INNER JOIN，而是笛卡尔连接（table1 的每一行都与 table2 的每一行相乘）。我正在使用 SUM 来计算 INNER JOIN 成功的行数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T11:44:35.697

试试这个：

```
(SELECT t1.idSection, t1.idQuestion, t1.title, t1.enunciation, 
   COUNT(t1.idScale) as Total, t2.name 
 FROM table1 t1
      JOIN table2 t2 
       ON t2.idScale=t1.idScale
GROUP BY t1.idSection, t1.idQuestion, t1.title, t1.enunciation, t2.name)
UNION 
 (SELECT DISTINCT 
  t1.idSection, idQuestion, title, enunciation, 0 as Total , t2.name
  FROM table1 t1,table2 t2
   WHERE NOT EXISTS
  (SELECT  *
   FROM table1 
        JOIN table2 
         ON table2.idScale=table1.idScale
   WHERE t1.idSection = table1.idSection
     AND t1.idQuestion = table1.idQuestion
     AND t2.idScale= table2.idScale)
) 
```

[http://sqlfiddle.com/#!3/7332c/15](http://sqlfiddle.com/#!3/7332c/15)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T12:02:13.247

试试这个：

```
SELECT t1.idSection, t1.idQuestion, t1.title, t1.enunciation, 
COUNT(t1.idScale) as Total, t2.name FROM table1 AS t1
RIGHT JOIN table2 as t2 ON t2.idScale=t1.idScale
GROUP BY t1.idSection, t1.idQuestion, t1.title, t1.enunciation, t2.name 
```

# python - Django 查询设置为 json 对象

> ID：14317375
> 
> 赞同：0
> 
> 时间：2013-01-14T11:12:00.690
> 
> 标签：python, django

下面我试图获取一个查询 make 是一个 json 对象，因此在我使用 jQuery 的模板中我可以循环它。

**我的观点**

```
from django.core import serializers
objectQuerySet = Recipient.objects.filter(incentiveid=incentive).values("mobile", "countryid")
data = serializers.serialize("json", objectQuerySet) 
```

return render_to_response('smssend.html', context_instance=RequestContext(request))

**我收到以下错误。**

```
Non-model object (<type 'dict'>) encountered during serialization

Request Method: 
```

为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T11:22:23.403

#values() “用作可迭代对象时返回字典” - [https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.values](https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.values)

我认为你需要 python 的 json#dumps(dict) 这里

# arrays - 在 Z3 中，用数组理论来描述这一点的最有效方法是什么？

> ID：14317376
> 
> 赞同：0
> 
> 时间：2013-01-14T11:12:03.753
> 
> 标签：arrays, z3

我想用 Z3 来描述以下问题。

```
int []array1=new int[100];
int []array2=new int[100];
array1[0~99]={i0, i1, ..., i99}; (i0...i99 > 0)
array2[0~99]={j0, j1, ..., j99}; (j0...j99 < 0)
int i, j; (0<=i<=99, 0<=j<=99)
does array1[i]==array2[j]? 
```

这是无法满足的。

我用Z3来描述这个问题如下：

```
(declare-const a1 (Array Int Int))
(declare-const a2 (Array Int Int))
(declare-const a1f (Array Int Int))
(declare-const a2f (Array Int Int))
(declare-const x0 Int)
....    
(declare-const x99 Int)
(assert (> x0 0))
....
(assert (> x99 0))
(declare-const y0 Int)
....    
(declare-const y99 Int)
(assert (< y0 0))
....
(assert (< y99 0))
(declare-const i1 Int)
(declare-const c1 Int)
(assert (<= i1 99))
(assert (>= i1 0))

(declare-const i2 Int)
(declare-const c2 Int)
(assert (<= i2 99))
(assert (>= i2 0))
(assert (= a1f (store (store (store (store (store (store (store (store ........ 95 x95) 96 x96) 97 x97) 98 x98) 99 x99)))
(assert (= a2f (store (store (store (store (store (store (store (store ........ 95 y95) 96 y96) 97 y97) 98 y98) 99 y99)))

(assert (= c1 (select a1f i1)))
(assert (= c2 (select a2f i2)))
(assert (= c1 c2))
(check-sat) 
```

这样对吗？有没有其他更有效的方法来使用数组理论来描述这一点？我的意思是，更有效的方法需要更少的 Z3 求解时间。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T14:42:13.593

为了解决这个问题，Z3 将使用 Brute-force 方法，它基本上会尝试所有可能的组合。它无法找到我们（作为人类）立即看到的“智能”证据。在我的机器上，求解大小为 100 的数组大约需要 17 秒，大小为 50 的数组需要 2.5 秒，大小为 10 的数组需要 0.1 秒。

但是，如果我们使用量词对问题进行编码，它可以立即证明任何数组大小，我们甚至不需要指定固定的数组大小。在这种编码中，我们说对于所有`i`in`[0, N)`和。然后，我们说我们想在st中找到and 。Z3马上就回来了。这是使用 Z3 Python API 编码的问题。[它也可以在rise4fun 在线获得](http://rise4fun.com/Z3Py/kPslY)。`a1[i] > 0``a2[i] < 0``j1``j2``[0, N)``a1[j1] = a2[j2]``unsat`

```
a1 = Array('a1', IntSort(), IntSort())
a2 = Array('a2', IntSort(), IntSort())
N  = Int('N')
i  = Int('i')
j1  = Int('j1')
j2  = Int('j2')
s = Solver()
s.add(ForAll(i, Implies(And(0 <= i, i < N), a1[i] > 0)))
s.add(ForAll(i, Implies(And(0 <= i, i < N), a2[i] < 0)))
s.add(0 <= j1, j1 < N)
s.add(0 <= j2, j2 < N)
s.add(a1[j1] == a2[j2])
print s
print s.check() 
```

在上面的编码中，我们使用量词来总结 Z3 在您的编码中无法自行计算的信息。事实上，`[0, N)`一个数组中的索引只有正值，而另一个只有负值。

# javascript - 是否可以将事件链接到对象自己的参数？

> ID：14317378
> 
> 赞同：1
> 
> 时间：2013-01-14T11:12:08.147
> 
> 标签：javascript, events, dom-events, kineticjs

我有一个带有特定参数（x、y 和半径）的对象（比如说一个圆）。

```
var circle = new Kinetic.Circle({
        x: 100,
        y: 100,
        radius: 20
} 
```

此后，圆的半径由用户动态改变。现在我想要一个持续观察半径的监听器，每次半径低于 5 时，它都会删除圆。就像是：

```
circle.on("radiusLessThanFive",function (e) {
this.remove();
} 
```

那么如何配置这个`radiusLessThanFive`不断监听圆半径的事件呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T15:19:31.513

好吧，不幸的是，没有内置的东西可以做到这一点。因此，您只需将其作为应用程序逻辑的一部分。

假设您有一个名为 shapeLayer 的图层。你可以做：

```
function radiusLessThanFive(){
    var circles = shapesLayer.get('.circle'); // I can't remember the getting all circles syntax, but something like this
    for ( var i=0; i<circles.length; i++) {
        if(cicrles[i].getRadius() < 5 ){
            circles[i].remove();
            shapesLayer.draw();
        }
    }
} 
```

虽然这不是有史以来最有效的解决方案，但它可以完成工作......除非您知道如何在 javascript 中创建自己的自定义事件（无论如何它都必须与上述函数执行相同的操作）。

如果您想参加自定义活动路线，请点击以下链接：[http ://www.sitepoint.com/javascript-custom-events/](http://www.sitepoint.com/javascript-custom-events/)

编辑：关于下面的评论

```
function radiusLessThanFive(myCircle){ //function which checks radius of single circle and deletes if less than 5
        if(myCircle.getRadius() < 5 ){
            myCircle.remove();
            myCircle.getParent().draw();
        }
    }
} 
```

# android - Color correction on android

> ID：14317383
> 
> 赞同：0
> 
> 时间：2013-01-14T11:12:20.677
> 
> 标签：android, image-processing, colors, bitmap

i am new in android programming. Now i am doing a color correction program using java for android platform.

In the program, i should be able to select a point on the bitmap and tell the program that it is actually white color, and the program will re-adjust all the pixels of that bitmap so that all the colors of that bitmap will be correct.

Can anyone tell me how can i do this? I am already able to retrieve a point from a bitmap now and calculate its RGB, but i got no idea how i can carry on. Please show me some examples or articles that i can read up on.

Thank you so much for your precious time. Hope to hear from you soon!

* * *

Resulting photo : [http://www.flickr.com/photos/92325795@N02/8392038944/in/photostream](http://www.flickr.com/photos/92325795@N02/8392038944/in/photostream)

My photo is being updated and despite of the quality/noise/color, there are the weird colors here and there. Anyone have any idea what i should do to remove it? Or even better improve on the method i am using? Heres the code:

The input is the bitmap to edit, inColor is the color of the nose in the photo to be edited, reqcolor is the color of my nose in the sample/optimum photo.

```
 public Bitmap shiftRGB(Bitmap input, int inColor, int reqColor){

        int deltaR = Color.red(reqColor) - Color.red(inColor);
        int deltaG = Color.green(reqColor) - Color.green(inColor);
        int deltaB = Color.blue(reqColor) - Color.blue(inColor);

        //--how many pixels ? --
        int w = input.getWidth();
        int h = input.getHeight();

        //-- change em all! --
        for (int i = 0 ; i < w; i++){
            for (int  j = 0 ; j < h ; j++ ){
                int pixColor = input.getPixel(i,j);

                //-- colors now ? --
                int inR = Color.red(pixColor);
                int inG = Color.green(pixColor);
                int inB = Color.blue(pixColor);

                if(inR > 255){ inR = 255;}
                if(inG > 255){ inG = 255;}
                if(inB > 255){ inB = 255;}
                if(inR < 0){ inR = 0;}
                if(inG < 0){ inG = 0;}
                if(inB < 0){ inB = 0;}

                //-- colors then --
                input.setPixel(i,j,Color.argb(255,inR + deltaR,inG + deltaG,inB           + deltaB));
            }
        }

        return input;
 } 
```

Thank you so much for help me! I cant express my gratitude further than saying another thank you in advance!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T11:33:22.453

阅读一些 [白平衡](http://en.wikipedia.org/wiki/Color_balance)算法。看看你能不能实现一些。另请注意，android 不提供用于大多数 java 教程的 awt.graphics / BufferedImage API。

Android 提供了[`ColorMatrixColorFilter`](http://developer.android.com/reference/android/graphics/ColorMatrixColorFilter.html)用于此类用途，[在此处讨论](https://stackoverflow.com/q/4354939/1531054)。

操作像素的基本粗略方法：

```
public Bitmap shiftRGB(Bitmap input, int inColor, int reqColor){

    //--how much change ? --
    int deltaR = Color.red(reqColor) - Color.red(inColor);
    int deltaG = Color.green(reqColor) - Color.green(inColor);
    int deltaB = Color.blue(reqColor) - Color.blue(inColor);

    //--how many pixels ? --
    int w = input.getWidth();
    int h = input.getHeight();

    //-- change em all! --
    for (int i = 0 ; i < w; i++){
        for (int  j = 0 ; j < h ; j++ ){
            int pixColor = input.getPixel(i,j);

            //-- colors now ? --
            int inR = Color.red(pixColor);
            int inG = Color.green(pixColor);
            int inB = Color.blue(pixColor);

            //-- colors then --
            input.setPixel(i,j,Color.argb(255,inR + deltaR,inG + deltaG,inB + deltaB));

        }
    }

    //-- all done--
    return input;
} 
```

# java - Dom4j selectNodes(arg) 不给出节点列表

> ID：14317384
> 
> 赞同：8
> 
> 时间：2013-01-14T11:12:22.533
> 
> 标签：java, xml-namespaces, dom4j

我在 java 中使用 DOM4j 进行 XML 工作，我的 xml 是这样的：

```
<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
<abcd name="ab.catalog" xmlns="http://www.xyz.com/pqr" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.xyz.com/pqr ./abc.xyz.xsd">             
<efg>
......
</efg>
<efg>
.....
</efg>
</abcd> 
```

然后，

```
List<Node>list = document.selectNodes("/abcd/efg"); 
```

获取列表零的大小。我觉得这是由于 xml 中指定的命名空间。我尝试了很多，但没有成功。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-14T13:18:49.927

XPath 表达式中的无前缀元素名称指的是不在命名空间中的元素——它们不考虑`xmlns="..."`文档上声明的“默认”命名空间。您需要在 XPath 引擎中为命名空间声明一个前缀，然后在表达式中使用该前缀。[这是一个受DOM4J javadocs](http://dom4j.sourceforge.net/dom4j-1.6.1/apidocs/org/dom4j/XPath.html#setNamespaceURIs(java.util.Map))启发的示例：

```
Map uris = new HashMap();
uris.put("pqr", "http://www.xyz.com/pqr");
XPath xpath = document.createXPath("/pqr:abcd/pqr:efg");
xpath.setNamespaceURIs(uris);
List<Node> nodes = xpath.selectNodes(document); 
```

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2013-11-14T16:29:55.673

修改您的代码：

```
List<Node>list = document.selectNodes("//abcd/efg"); 
```

# javascript - How to make an Ajax/Cors request to a webDav storage?

> ID：14317387
> 
> 赞同：1
> 
> 时间：2013-01-14T11:12:33.513
> 
> 标签：javascript, jquery, ajax, xmlhttprequest, webdav

I'm trying to write a javascript/jquery plugin to access a webDav storage with JSON-data only and am struggling to get it to work.

The webDav will be a remote storage, so I need to make a cross-domain ajax request, passing along authentication data.

I have tried various versions, but I'm always failing on the `preflight` authentication, while I can access the file correctly, when I enter the URL in the browser directly (and provide login credentials).

This is what I have tried:

```
$.ajax({
  url: priv.url + '/' + priv.user + '/' +
    priv.foldertree + '/' + docid,
  type: "GET",
  async: true,
  crossdomain : true,
  headers : {
    Authorization: 'Basic ' + Base64.encode(
      priv.user + ':' + priv.password
      )
  },
  success: function (content) {
    console.log( content );
  }
}); 
```

I have also set the following without luck:

```
 xhrFields: {withCredentials: 'true'}
 contentType: 'text/plain' 
```

or:

```
 datatype: "jsonp" 
```

or:

```
 username: priv.user
 password: priv.password 
```

or:

```
 beforeSend: function (xhr) {
  xhr.setRequestHeader ('Authorization', 
      "Basic" + Base64.encode( priv.user + ':' + priv.password )
    );
  } 
```

but all I'm gettin is a `401` `authorization failed` response from the remote server on my `preflight options` request.

**Question:**
I don't have access to the remote server, but since it's a remote WebDav Storage-as-a-Service, it should be possible to access the files I'm planning to store there. Can someone give me a pointer on how to correctly make a request to GET my JSON data (I will also need to post, propfind, remove, but first things first...)?

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T12:51:00.853

弄清楚了。提供程序设置不允许使用 webDAV/Ajax/preflight/authentication。

切换供应商 ( [Otixo](http://www.otixo.com) ) - 现在它可以工作了。

# php - 仅匹配“www.example.com”但不匹配“www.some text”

> ID：14317398
> 
> 赞同：0
> 
> 时间：2013-01-14T11:13:34.103
> 
> 标签：php, regex

需要正则表达式来匹配-string中`www.example.com`的链接，但是：`html/text`

*   不匹配`"www. some text after"`
*   不匹配`"www" only such as "some text before www some text after"`
*   与链接不匹配`http`
*   必须以空格 ( `\s`) 或非字符开头，例如：`" www.example.com"`或`"www.example.com"`

我试过：

```
'/(^|\s)(www[^\s].[^<> \n\r \s]+)/iex' 
```

但也匹配`"www. some text after"`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T11:17:36.830

你在寻找

```
/(^|\s)(www[^<>\s]+)/ 
```

`\s`包括`\n`,`\r`

* * *

你也可以使用`(?<=^|\s)(www\.[^<>\s.]+\.[^<>\s.]+)(?=\s|$)`

# java - Where is the "official" annotations api?

> ID：14317407
> 
> 赞同：0
> 
> 时间：2013-01-14T11:14:11.553
> 
> 标签：java, annotations, expression, el

I am reading a tutorial about stripes security that tells me to annotate like this

```
@RolesAllowed({
  "Administrator",
  "User if ${user eq message.folder.user}"
}) 
```

But I think I want to do something else in my own case, use another operator or such. I have googled but not succeeded. Where is the "manual" for annotation expressions.

I look forward to understand the explanation for:

```
${//some expression} 
```

and also that `if` and `eq` operators, where is the "list"?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T11:32:06.290

占位符/表达式不是 Java 注释的一部分。"`User if ${user eq message.folder.user}"`从 Java 注释的角度来看，它只是一个字符串。在上述情况下，只有注释处理器（条纹？）知道如何解释`${user eq message.folder.user}`表达式。

# android - 启动 Android 应用程序的问题。

> ID：14317408
> 
> 赞同：0
> 
> 时间：2013-01-14T11:14:12.113
> 
> 标签：android, apk

嗨，我在启动我的 android 应用程序时遇到了问题。

```
Failed to install App.apk on device 'HT261W519228': Connection refused: connect
[2013-01-14 16:39:44 - App] java.net.ConnectException: Connection refused: connect
[2013-01-14 16:39:44 - App] Launch canceled! 
```

谁能告诉我这个原因以及可能的解决方案。谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-01-06T13:23:05.917

是的，您可能没有连接到局域网或互联网或任何其他网络，在这种情况下，Java 将在客户端抛出“java.net.ConnectException：连接被拒绝”异常。

# android - 如何检索所有已安装的 android 应用程序

> ID：14317410
> 
> 赞同：0
> 
> 时间：2013-01-14T11:14:19.373
> 
> 标签：android, android-intent

我之前已经在 Stackoverflow 和 Google 上进行过搜索，但我找不到任何适合我的答案，因为我在使用它们时遇到错误，或者缺少某些代码/部分，或者可能需要安装额外的库文件。

所以基本上我想做的是检索android手机中所有已安装的应用程序并将其显示出来，但我不知道如何去做。我通常会遇到关于“上下文”变量的错误，或者我的 xml 文件与 .java 文件以一种或另一种方式不匹配。

有人愿意给我所有必需文件（例如 xml、java、manifest、drawable、layout 等）的源代码，以实现检索所有 android 应用程序的目标吗？非常感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T11:19:11.703

```
public class AppList extends Activity {
 private ListView lView;
 private ArrayList results = new ArrayList();

 @Override
 public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  setContentView(R.layout.main);
  lView = (ListView) findViewById(R.id.list1);
  PackageManager pm = this.getPackageManager();

  Intent intent = new Intent(Intent.ACTION_MAIN, null);
  intent.addCategory(Intent.CATEGORY_LAUNCHER);

  List<ResolveInfo>  list = pm.queryIntentActivities(intent, PackageManager.PERMISSION_GRANTED);
  for (ResolveInfo rInfo : list) {
   results.add(rInfo.activityInfo.applicationInfo
     .loadLabel(pm).toString());
   Log.w("Installed Applications", rInfo.activityInfo.applicationInfo
     .loadLabel(pm).toString());
  } 
  lView.setAdapter(new ArrayAdapter(this, android.R.layout.simple_list_item_1, results));
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T11:58:43.807

首先创建 main.xml 文件如下，

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

            <ListView
                android:id="@+id/list1"
                android:layout_width="match_parent"
                android:layout_height="wrap_content" >
            </ListView>

</LinearLayout> 
```

这`list`将用于填充已安装的应用程序，

现在创建 Activity 类来获取已安装的应用程序，

```
public class AppList extends Activity {
    private ListView lView;
    private ArrayList results;
    List<ResolveInfo> list;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
            results = new ArrayList();
        lView = (ListView) findViewById(R.id.list1);
        PackageManager pm = this.getPackageManager();

        Intent intent = new Intent(Intent.ACTION_MAIN, null);
        intent.addCategory(Intent.CATEGORY_LAUNCHER);

        list = pm.queryIntentActivities(intent,
            PackageManager.PERMISSION_GRANTED);
        for (ResolveInfo rInfo : list) {
            results.add(rInfo.activityInfo.applicationInfo.loadLabel(pm)
                    .toString());
            Log.w("Installed Applications", rInfo.activityInfo.applicationInfo
                    .loadLabel(pm).toString());
        }
        lView.setAdapter(new ArrayAdapter(this,
                android.R.layout.simple_list_item_1, results));
    }
} 
```

**编辑 -**如果您想从列表中打开应用程序，请单击它。您必须覆盖 ListView 的 onItemClick 方法，并且在该方法中，您必须传递打开所选应用程序的意图。

看这里，

*   [从另一个应用程序启动一个应用程序](https://stackoverflow.com/a/7574735/1626878)
*   [如何获取已安装的 android 应用程序列表并选择一个运行](https://stackoverflow.com/q/2695746/1626878)

这些很可能会解决您的问题。

# mysql - Mysql查询未使用任何键

> ID：14317412
> 
> 赞同：1
> 
> 时间：2013-01-14T11:14:30.990
> 
> 标签：mysql

```
CREATE TABLE `TEST` (
`ID1` mediumint(8) NOT NULL default '0',
`ID2` mediumint(8) NOT NULL default '0',
`DATE` datetime NOT NULL default '0000-00-00 00:00:00',
 UNIQUE KEY `COMBO_INDEX` (`ID1`,`ID2`),
 KEY `ID2` (`ID2`)
) ENGINE=InnoDB` 
```

该表大约有 16196496 条记录

```
EXPLAIN SELECT * FROM TEST WHERE ID1 IN ('8518582',  '5398912',  '6120243',  '6841316',  '7580078',  '7671953',  '7775737',  '7792470',  '7887985',  '7888375',  '7946516',  '8008760',  '8111722',  '8211235',  '8262746',  '8365675',  '8396853', '8399818',  '8410062',  '8459079',  '8490683') 
```

我得到的输出为

```
+----+-------------+------------------------+------+---------------+------+---------+------+----------+-------------+
| id | select_type | table                  | type | possible_keys | key  | key_len | ref  | rows     | Extra       |
+----+-------------+------------------------+------+---------------+------+---------+------+----------+-------------+
|  1 | SIMPLE      | TEST                   | ALL  | ID1           | NULL | NULL    | NULL | 16196496 | Using where |
+----+-------------+------------------------+------+---------------+------+---------+------+----------+-------------+ 
```

我不明白为什么查询不使用任何键。

此外，当我在这个 innodb 表中运行这个查询时，它花费了大量的时间 329 秒（MySQL 版本 5.0.45-log）。

而如果我在 myisam 表上运行相同的查询，它只需要 2 秒（尽管解释它显示相同的结果）。我正在使用 MySQL 5.5 版。

为什么查询不带任何键？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T11:21:35.123

`innodb`需要一个主键来快速查找索引中找到的行。只要你没有 - mysql 就不能这样做，所以它更喜欢全扫描。

[http://dev.mysql.com/doc/refman/5.6/en/innodb-table-and-index.html](http://dev.mysql.com/doc/refman/5.6/en/innodb-table-and-index.html)

> 通过聚集索引访问一行速度很快，因为索引搜索直接指向包含所有行数据的页面。如果表很大，与使用与索引记录不同的页面存储行数据的存储组织相比，聚集索引架构通常会节省磁盘 I/O 操作。（例如，MyISAM 将一个文件用于数据行，将另一个文件用于索引记录。）

所以显而易见的解决方案 - 用主键替换唯一键（虽然我个人不喜欢自然主键，尤其是复合自然主键）。

PS：似乎我在评论中关于使用数字而不是字符串的猜测有所帮助。尽管有关添加主键的建议仍在起作用 - 这样做可以获得更好的性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T07:36:42.430

我不确定，但我认为的另一个原因是“可能是没有足够的内存可用于加载索引并因此进行全面扫描”

# ios - 特定 CGRect 中的 UIGraphicsGetImageFromCurrentImageContext

> ID：14317414
> 
> 赞同：1
> 
> 时间：2013-01-14T11:14:36.290
> 
> 标签：ios, objective-c, xcode, screenshot, screen-capture

我想以特定大小截取特定位置的屏幕截图。我找到了这个。但它需要整个屏幕。我在哪里可以设置 CGRect。

```
UIGraphicsBeginImageContext(self.window.bounds.size);
[self.window.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-14T11:20:11.033

几天前我实际上被困在这个问题上......然后过了一段时间我设法想出了一个解决方案！我已经在一个类别中实现了它：

```
#import "UIView+RenderSubframe.h"
#import <QuartzCore/QuartzCore.h>

@implementation UIView (RenderSubframe)

- (UIImage *) renderWithSubframe:(CGRect)frame {  

    UIGraphicsBeginImageContextWithOptions(frame.size, NO, 0.0);
    CGContextRef c = UIGraphicsGetCurrentContext();

    CGContextConcatCTM(c, CGAffineTransformMakeTranslation(-frame.origin.x, -frame.origin.y));
    [self.layer renderInContext:c];

    UIImage *screenshot = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return screenshot;

}

@end 
```

瞧！

如果我没记错的话，这种方法实际上根本不会渲染视图中不需要的部分，这比事后裁剪图像更有效。

在您的情况下，您希望将此类别应用于 UIWindow 类而不是 UIView。

# iphone - 使用 à è ò ù 字符的 stringWithContentsOfURL 编码出错

> ID：14317415
> 
> 赞同：0
> 
> 时间：2013-01-14T11:14:37.870
> 
> 标签：iphone, ios, nsurl

我对这个实现有一个问题：

```
NSString *s = [NSString stringWithContentsOfURL:[NSURL URLWithString:site] encoding:NSUTF8StringEncoding error:&er]; 
```

字符串站点包含带有重音的此字符，例如：à è òù 并且每次字符串包含此字符之一时，例如此字符串：

```
http://...../Questa_é_la_mia_terra.html 
```

“ **s”**字符串返回null，其他带重音的字符也会发生这种情况，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T11:52:50.473

我找到了这个解决方案：

```
NSString * encodedString = (NSString *)CFURLCreateStringByAddingPercentEscapes(
NULL,
(CFStringRef)unencodedString,
NULL,
(CFStringRef)@"!*'();:@&=+$,/?%#[]",
kCFStringEncodingUTF8 ); 
```

并以这种方式似乎工作......来自这个网站：[http ://simonwoodside.com/weblog/2009/4/22/how_to_really_url_encode/](http://simonwoodside.com/weblog/2009/4/22/how_to_really_url_encode/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T11:25:46.823

`site`先用编码`stringByAddingPercentEscapesUsingEncoding:NSASCIIStringEncoding`。

请参阅[使用 URL](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/instm/NSString/stringByAddingPercentEscapesUsingEncoding%3a)

# .net - .NET：Thread 类怎么会被滥用，不是密封的吗？

> ID：14317417
> 
> 赞同：4
> 
> 时间：2013-01-14T11:14:46.493
> 
> 标签：.net, multithreading, security

我试图理解为什么`System.Threading.Thread`类是密封的。

我的猜测是**安全性**- 有几种框架方法采用`Thread`参数，这些方法`Thread`没有密封，可以提供派生的恶意类型。但我想不出这种类型可以做的真正的恶意事情。

你能想出例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T13:31:33.647

我想如果有人的派生线程类要覆盖诸如 VolatileRead 和 VolatileWrite 之类的东西，人们可以想象它们可能会在整个 .NET 运行时中使用，它们可能会造成一些损害。

也可能不是出于安全原因。由于线程对于许多程序的运行至关重要，因此如果以不正确的方式实现它们，那么运行时的稳定性就会付出高昂的代价。

编辑：可能没有性能优势，因为在密封类上调用虚拟方法时编译器会发出 callvirt。JIT 编译器可能会这样做，但我没有任何证据。

# diacritics - Apache FOP 变音符号间距问题

> ID：14317422
> 
> 赞同：0
> 
> 时间：2013-01-14T11:14:55.317
> 
> 标签：diacritics, postscript, apache-fop

我正在使用 Apache FOP 0.95 版。我在 ps 文件中遇到间距问题： (Empf\344nger) [5.464 8.464 5.592 3.376 14.216 5.696 5.592 5.312 3.976] 单词“Empfänger”被打印为“Empfänger”。有解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-16T21:19:08.950

你能详细说明你的确切问题吗？我刚刚看到了同样的行为，并且能够像这样解决它。

我正在生成我自己的 XML 文件并使用带有“OutputFormat.createPrettyPrint()”的 Dom4J XMLWriter 这将创建如下代码：

```
 <inline font-family="Verdana">L</inline>
      <inline font-family="Verdana">üftungstechnische Ma</inline>
      <inline font-family="Verdana">ßnahme zum Feuchteschutz erforderlich.</inline> 
```

一旦我将输出模式切换到“OutputFormat.createCompactFormat()”，一切正常。生成的输出如下所示：

```
 <inline font-family="Verdana">L</inline><inline font-family="Verdana">üftungstechnische Ma</inline><inline font-family="Verdana">ßnahme zum Feuchteschutz erforderlich.</inline> 
```

然后正确打印。现在让我们希望在您的情况下也是同样的问题。

# c# - WinRT / XAML 中的 FlipView 数据模板特性

> ID：14317423
> 
> 赞同：1
> 
> 时间：2013-01-14T11:15:01.763
> 
> 标签：c#, mvvm, winrt-xaml

我一直面临`FlipView`使用我们的资产虚拟化控件以获得无缝选择体验的问题。`VariableGrid`我们使用 上提供的模板从头开始更新了我们的 UI `Nuget`，让应用程序看起来像 Windows 商店，同时展示我们的礼品目录。

该`FlipView`控件应该展示我们更大的图像以及一条较小的缩略图，以便用户可以查看产品的不同选项，它对于前几个项目工作正常，但缩略图项目在一段时间后开始混淆 -我对这些项目在翻转视图控件中的排列和绑定方式有点困惑，我想知道您是否可以对此事有所了解？我在控件内使用了一个数据模板，将图像添加到翻转视图中原始项目图像旁边的包装面板。我不确定如何管理包装面板，我附上了使用它的部分的代码。

```
 private async Task PopulateThumbnails()
    {
        var thumbnailWrapGrid = RecurseChildren<WrapPanel>(flipView).ElementAt(flipView.SelectedIndex);
        if (thumbnailWrapGrid == null) return;

        thumbnailWrapGrid.Width = Window.Current.Bounds.Width - (420 + Window.Current.Bounds.Height); // 420 is experiencepanel + backmargin. images are square scaled to height
        var thisItem = (this.flipView.SelectedItem as PGItemViewModel);
        thumbnailWrapGrid.Children.Clear();
        foreach (var img in thisItem.ItemPhoto)
            await AddChildren(img, thumbnailWrapGrid);
    }

    private async Task AddChildren(KeyValuePair<string, ItemPhoto> img, WrapPanel panel)
    {
        var imgbitmap = new Image() { Source = new BitmapImage(new Uri(img.Value.LocalOrRemoteLocation)) };
        imgbitmap.Tapped += imgbitmap_Tapped;
        panel.Children.Add(imgbitmap);
    }

    void imgbitmap_Tapped(object sender, TappedRoutedEventArgs e)
    {
        var zoomImage = RecurseChildren<Image>(flipView).ElementAt(flipView.SelectedIndex);
        zoomImage.Source = (sender as Image).Source;
    }

   public static IEnumerable<T> RecurseChildren<T>(DependencyObject root) where T : UIElement
    {
        if (root is T)
        {
            yield return root as T;
        }

        if (root != null)
        {
            var count = VisualTreeHelper.GetChildrenCount(root);

            for (var idx = 0; idx < count; idx++)
            {
                foreach (var child in RecurseChildren<T>(VisualTreeHelper.GetChild(root, idx)))
                {
                    yield return child;
                }
            }
        }
    } 
```

// XAML

```
<StackPanel x:Name="ImageHost" Margin="0" Orientation="Horizontal" Loaded="PopulateThumbnails" GotFocus="InFocus">
<Image x:Name="image" Source="{Binding BigPhoto}" Margin="0" HorizontalAlignment="Left"/>
<ScrollViewer Margin="0,135,0,0">
<Controls:WrapPanel x:Name="thumbnailWrap" Margin="0">
<Controls:WrapPanel.Transitions>
<TransitionCollection/>
</Controls:WrapPanel.Transitions>
</Controls:WrapPanel>
</ScrollViewer>
</StackPanel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T10:48:43.270

将 FlipView.ItemsPanel 更改为使用 StackPanel 而不是 VirtualizingStackPanel 似乎可行 - 但这不适用于大量项目，因为它们会占用大量内存。示例模板如下

```
FlipView.ItemsPanel="{StaticResource ItemsPanelStyleTemplate}"

    <ItemsPanelTemplate x:Key="ItemsPanelStyleTemplate">
        <StackPanel AreScrollSnapPointsRegular="True" Orientation="Horizontal" />
    </ItemsPanelTemplate> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T16:57:35.357

MikeOrmond@MSFT 的另一个解决方法

```
class MikesFlipView : FlipView
{

protected override void PrepareContainerForItemOverride
    (Windows.UI.Xaml.DependencyObject element, object item)
{
  base.PrepareContainerForItemOverride(element, item);

  UserControl userControl = GetFirstChildOfType<UserControl>(element);

  if (userControl != null)
  {
    userControl.DataContext = item;

    var panel = GetFirstChildOfType<WrapPanel>(userControl);
    panel.Children.Clear();

    foreach (var img in ((ItemViewModel)item).Photo)
      AddChildren(img, panel);
  }
}

// this method is used to add children to the controls inside FlipView
private void AddChildren(KeyValuePair<string, ItemPhoto> img, WrapPanel panel)
{
  ...
}

private static T GetFirstChildOfType<T>(DependencyObject dobj)
 where T : DependencyObject
{
  T retVal = null;
  int numKids = VisualTreeHelper.GetChildrenCount(dobj);
  for (int i = 0; i < numKids; ++i)
  {
    DependencyObject child = VisualTreeHelper.GetChild(dobj, i);
    if (child is T)
    { 
      retVal = (T)child;
    }
    else
    {
      retVal = GetFirstChildOfType<T>(child);
    }

    if (retVal != null)
    {
      break;
    }
  }

  return retVal;
} 
} 
```

# css - html页面中的DIv定位

> ID：14317427
> 
> 赞同：0
> 
> 时间：2013-01-14T11:15:17.160
> 
> 标签：css, html, positioning, css-position

```
<body>
<div id="outerwindow" style= "position:absolute ;width:100%;height:100%" >

<div>
<canvas id="g_Painter" style="position:relative;width:100%;height:80%"></canvas>
    </div>
<div id="g_Toolbar" >

</div>
div id="innerdiv" >

</div>
</div>
</body > 
```

这里所有的 div 都包含一些组件。只有我展示的外部布局。

我的要求是画布 div 应该占据父 div“outerwindow”的 80% 高度。我面临的问题是无论我为画布指定的宽度和高度如何，高度几乎只是外部窗口的一半。但宽度是 100%外窗。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T11:23:04.943

将`g_Painter`位置样式更改为`absolute`

```
<body>
<div id="outerwindow" style= "position:absolute;width:100%;height:100%;" >
  <div>
    <canvas id="g_Painter" style="position:absolute;width:100%;height:80%;"></canvas></div>
  <div id="g_Toolbar"></div>
  <div id="innerdiv"></div>
</div>
</body> 
```

# api - 我应该如何在我的客户端-服务器系统中验证 API 用户？

> ID：14317432
> 
> 赞同：1
> 
> 时间：2013-01-14T11:15:45.907
> 
> 标签：api, rest, client-server

我正在编写一个与我的移动应用程序一起使用的 API。我想使用 Api Key 身份验证。

在这种系统中，我应该给每个用户一个 api 密钥吗？或者我应该只为每个连接到 API 的应用程序提供 Api Key？

我问这个的原因是：

如果我给每个用户 api 密钥并通过他们的 api 密钥对他们进行身份验证，则经过身份验证的用户将只有一个，我可以发出 /reviews/ 之类的请求，服务器将返回由经过身份验证的用户完成的所有评论。

另一方面，应用程序将进行身份验证以使用 api，我应该发出类似“/reviews?userId=23842374283423”的请求。

哪一种是最常用的身份验证类型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T12:43:46.567

通常，API 密钥是发给使用 API 而不是应用程序的开发人员。尽管在大多数情况下，每个密钥仅用于一个应用程序，但理论上您可以让另一个密钥使用相同的密钥。我建议采用第二种方法。

# ios - 点击元素时Webkit阴影文本区域

> ID：14317434
> 
> 赞同：0
> 
> 时间：2013-01-14T11:15:50.037
> 
> 标签：ios, css, uiwebview, textarea

我正在构建一个在一个地方使用 web 视图的 iOS 应用程序。当用户点击 textarea 并且键盘出现时，textarea 获得阴影突出显示效果，然后恢复正常。请注意，我不是在谈论 webkit-appearance och 轮廓，而是覆盖被点击的整个文本区域的阴影。

我猜这是某种可访问性功能。尽管如此，它还是弄乱了我的动画，让整个视图看起来像垃圾。

有谁知道是否可以删除这个高光阴影？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T11:31:17.253

您可以通过将 css 属性 -webkit-tap-highlight-color 设置为 rgba(0,0,0,0); 来禁用它。但正如你提到的，它是一个可用性功能，所以你不应该把它关掉。;)

见： [http ://www.yuiblog.com/blog/2010/10/01/quick-tip-customizing-the-mobile-safari-tap-highlight-color/](http://www.yuiblog.com/blog/2010/10/01/quick-tip-customizing-the-mobile-safari-tap-highlight-color/)

# java - 如何更改字符串中的部分文本格式（颜色、粗体斜体）？

> ID：14317438
> 
> 赞同：0
> 
> 时间：2013-01-14T11:16:12.070
> 
> 标签：java, android, string, text-formatting

这是我的代码。我想部分更改字符串内的文本格式。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    String stuff[] = {

"this has to be  the bold part   this has to be normal part",
"this part of text has to be green      this part of text has to be blue",
"this is number 3 bold", 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T11:26:21.600

您可以使用 HTML 格式：

`textView.setText(Html.fromHtml("<b>test</b> test"));`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-25T05:26:19.497

你必须`SpannableStringBuilder`像下面这样使用：

```
 String finalText = stuff[0]+ " " + stuff[1] + " " + stuff[2];
    int first = stuff[0].length() + 1;
    int second = stuff[1].length() + 1;
    int end = finalText.length();

    SpannableStringBuilder stringBuilder = new SpannableStringBuilder(finalText);
    stringBuilder.setSpan(new CustomTypefaceSpan("", normalFont), 0, first, Spanned.SPAN_EXCLUSIVE_INCLUSIVE);
    stringBuilder.setSpan(new CustomTypefaceSpan("", boldFont), first, first + second, Spanned.SPAN_EXCLUSIVE_INCLUSIVE);
    stringBuilder.setSpan(new CustomTypefaceSpan("", normalFont), first + second, end, Spanned.SPAN_EXCLUSIVE_INCLUSIVE);

    textView.setText(stringBuilder); 
```

# php - 如何将查询字符串转换为段 URI？

> ID：14317440
> 
> 赞同：1
> 
> 时间：2013-01-14T11:16:12.943
> 
> 标签：php, .htaccess, codeigniter, uri

我正在尝试转换查询字符串；

```
http://atwd/books/course?course_id=CC100&format=XML&submit=Submit 
```

成一个段URI；

```
http://atwd/books/course/CC100/XML 
```

我在 CodeIgniter 工作。

我正在查看一个 stackoverflow 答案，该答案说要检查 CodeIgniter 的 URL 段指南，但我认为没有任何关于如何将查询字符串转换为段 URI 的信息。但是，有一种方法可以将段 URI 转换为查询字符串，这也从 Google 带来了大量结果。

在[另一个 stackoverflow 回答](https://stackoverflow.com/questions/3420204/htaccess-get-url-to-uri-segments)之后，我在我的 .htaccess 文件中尝试了这个，但似乎没有任何效果

```
RewriteCond %{QUERY_STRING} ^course_id\=([^&]+)\&format\=([^&]+)$
RewriteRule ^$ /course/%1/format/%2 [R,L] 
```

在我的整个 .htaccess 文件中，我有这个；

```
<IfModule mod_rewrite.c>
RewriteEngine on

#Source: http://codeigniter.com/user_guide/general/urls.html
#Removal of index.php
RewriteCond $1 !^(index\.php|images|robots\.txt)
RewriteRule ^(.*)$ /index.php?route/$1 [L]

#Source: https://stackoverflow.com/questions/3420204/htaccess-get-url-to-uri-segments
#Format Course function requests
RewriteBase /
RewriteCond %{QUERY_STRING} ^course_id\=([^&]+)\&format\=([^&]+)$
RewriteRule ^$ /course/%1/format/%2 [R,L]
</IfModule> 
```

[这是在我的 Codeigniter屏幕截图](http://snag.gy/To3uY.jpg)的根目录中

我在 .htaccess 文件中的代码不起作用，我刷新页面并没有任何反应。隐藏 index.php 的代码虽然有效。有谁知道为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T16:28:27.147

从一件事到另一件事的“转换 URL”的概念是完全模棱两可的，请参阅此答案的顶部以了解重定向或重写时 URL 会发生什么：[https ://stackoverflow.com/a/11711948/851273](https://stackoverflow.com/a/11711948/851273)

发生了两件事，我会大胆尝试并猜测您想要第二件事，因为您抱怨刷新页面没有任何作用。

* * *

当您`http://atwd/books/course?course_id=CC100&format=XML&submit=Submit`在浏览器中键入时，这是通过 mod_rewrite: 发送的请求 URI `/books/course`。在您的规则中，您正在匹配一个空白 URI: `RewriteRule ^$ /course/%1/format/%2 [R,L]`。这是您的规则不起作用的第一个原因。它不起作用的第二个原因是因为除此之外，除了图像和 index.php 和 robots.txt 之外的所有内容都通过 index.php 进行路由。因此，即使您匹配正确*的*URI，它也会在您的规则执行任何操作之前被路由。

您需要更正规则中的模式以匹配您希望重定向的 URI，并且您需要将此规则放在您拥有的路由规则*之前。*所以一切都应该大致是这样的：

```
<IfModule mod_rewrite.c>
RewriteEngine on

RewriteBase /
RewriteCond %{QUERY_STRING} ^course_id\=([^&]+)\&format\=([^&]+)$
RewriteRule ^/?books/course$ /course/%1/format/%2 [R,L]

#Source: http://codeigniter.com/user_guide/general/urls.html
#Removal of index.php
RewriteCond $1 !^(index\.php|images|robots\.txt)
RewriteRule ^(.*)$ /index.php?route/$1 [L]

</IfModule> 
```

您需要调整路径以确保它们与您实际查找的内容相匹配。

* * *

要重定向浏览器并在内部重写*回*您的原始 URL，您需要做一些不同的事情。

首先，您需要确保所有链接看起来像这样：`/course/CC100/format/XML`. 更改您的 CMS 或静态 HTML，以便所有链接都以这种方式显示。

然后，您需要更改周围的规则（都*在*您的 codeigniter 路由规则之前），如下所示：

```
<IfModule mod_rewrite.c>
RewriteEngine on

RewriteBase /

# redirect browser to a URI without the query string
RewriteCond %{THE_REQUEST} ^(GET|HEAD)\ /books/course/?\?course_id=([^&]+)&format=([^&]+)
RewriteRule ^/?books/course$ /course/%2/format/%3? [R,L]

# internally rewrite query string-less request back to one with query strings
RewriteRule ^/?course/([^/]+)/format/([^/]+)$ /books/course?course_id=$1&format=$2&submit=Submit [L]

#Source: http://codeigniter.com/user_guide/general/urls.html
#Removal of index.php
RewriteCond $1 !^(index\.php|images|robots\.txt)
RewriteRule ^(.*)$ /index.php?route/$1 [L]

</IfModule> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T01:16:32.467

如果我对你的理解正确，你可能想多了。我自己的代码中有类似的东西。

我有一个名为 Source 的控制器。在那个控制器中，我有以下方法：

```
public function edit($source_id, $year)
{
    # Code relevant to this method here
} 
```

这会产生：`http://localhost/source/edit/12/2013`，其中 12 指的是`$source_id`2013 指的是`$year`。您添加的每个参数都会自动转换为它自己的 URI 段。它也不需要 .htaccess 诡计或自定义路由。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T20:59:38.073

我不打算解决已经在其他答案和评论中很好地解决的误解，我不能专门代表 CodeIgniter，但是快速浏览了他们的[URL 路由文档](http://ellislab.com/codeigniter/user-guide/general/routing.html)，它似乎与大多数 Web 框架非常相似：

* * *

您可能只想将所有流量（与物理文件不匹配）引导到前端 Web 控制器（index.php）并在 CodeIgniter 的路由中处理 URL 管理，而不是 htaccess 文件。

为此，您的 htaccess 可以简单到：

```
<IfModule mod_rewrite.c>
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteRule .* index.php [QSA,L]
</IfModule> 
```

正如我所说，这会将任何与物理文件（例如 robots.txt 或图像）不匹配的流量重定向到您的 index.php。

[然后，使用文档（ http://ellislab.com/codeigniter/user-guide/general/routing.html](http://ellislab.com/codeigniter/user-guide/general/routing.html) ）中描述的路由，您可以接收参数并将它们传递给您认为合适的控制器，没有需要“转换”或“映射”任何内容，您的 URL 不需要在`/?yada=yada`内部解析，根据您的路由规则 CodeIgniter 可以解决。

您需要来自文档的通配符路由，例如：

```
$route['product/:id'] = "catalog/product_lookup"; 
```

您最终可能看起来像的粗略示例如下：

```
$route['course/:id/format/:format'] = "course/something_or_other_action"; 
```

# mysql - 以下场景的 SQL

> ID：14317443
> 
> 赞同：0
> 
> 时间：2013-01-14T11:16:25.817
> 
> 标签：mysql, sql, oracle, plsql

我在数据库中有以下两个表。一张表是人员表，另一张表是Entry表，entry表记录了人员进入一个部门

人表

```
 Person                  
Person_ID   Person_NIC  Person_Name Person_Last_Name    Person_Age  State
1           121212          ABC         BCD              12         ACTIVE
2           212121          ABB         BBB              13         NONACTIVE
3           111111          BBB         CCC              14         ACTIVE 
```

条目表

```
ENTRY           
Entry_ID  Person_ID Entry_Escort    Entry_Date  
1         1           David         20121210    
2         1           David         20130110    
3         1           David         20130111    
4         1           David         20130112    
5         1           David     20130113    
6         2           David     20121210    
7         2           David     20130110    
8         2           David     20130111    
9         2           David     20130112    
10        2           David     20130113 
```

我必须为以下场景编写 sql。我需要为 1 月份在数据库中不活跃的人找到最后进入日期。谁能帮我查询。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T11:26:18.197

试试这个：：

```
Select 
p.*,
MAX(Entry_Date) 
from 
persons p
inner join entry ep on (p.Person_NIC=ep.Entry_ID)

where State='NONACTIVE'
GROUP BY ep.Entry_ID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T11:27:40.270

这应该做你需要的：

```
select p.person_id, p.person_nic, p.Person_Name, p.Person_Last_Name,
       max(e.entry_date) max_entry_date
 from person p
      inner join entry e
              on e.entry_id = p.person_nic
where p.state = 'NONACTIVE'
group by p.person_id, p.person_nic, p.Person_Name, p.Person_Last_Name 
```

ps 将 AGE 存储在数据库表中并不好，因为您必须不断更新它。最好即时存储出生日期和计算年龄（或在视图/虚拟列中）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T11:27:48.510

这应该像这样简单：

```
SELECT p.Person_ID, MAX(e.Entry_Date) as MaxEntryDate
FROM 
 Person p 
 INNER JOIN Entry e
   ON p.Person_NIC = e.EntryID
WHERE p.State = 'NONACTIVE'
   AND Entry_Date  BETWEEN 20130101 AND 20130131
GROUP BY p.Person_ID 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T11:37:33.120

请尝试一下：根据需要在一月份更新...

## [SQLFIDDLE 演示](http://sqlfiddle.com/#!2/87409/1)

```
 Select p.person_id, p.person_nic,
   p.Person_Name,
   p.Person_Last_Name,max(e.entry_date )
   from person p
   inner join entry e 
   on (p.Person_id = e.person_id)
   where p.State='NONACTIVE'
   and month(e.entry_date) = 1
   GROUP BY p.person_nic, e.Entry_ID
   ;

| PERSON_ID | PERSON_NIC | PERSON_NAME | PERSON_LAST_NAME |MAX(E.ENTRY_DATE ) |
---------------------------------------------------------------------------------
|         2 |     212121 |         ABB |              BBB | January, 13 2013 | 
```

# html - 如何解析html代码获取图片src

> ID：14317445
> 
> 赞同：0
> 
> 时间：2013-01-14T11:16:31.630
> 
> 标签：html, google-apps-script

我有使用图像标签的html代码..我想获取图像的src ..

一个想法是……我拆分了该代码：

```
var temp=htmlContent.split("<img src='")[1];
var imageURL=temp.split("'")[0]; 
```

但是不能保证 src 将是 img 标签的第一个属性....像这样

```
 <img alt="image" src="url"/> 
```

所以请给我一些可行的 Google Apps 脚本解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T13:35:38.200

```
// parses implicitly as "<html><body><img alt='alt' src='source!'></body></html>"
Xml.parse("<img alt='alt' src='source!'>", true).getElement() 
    .getElements()[0]  // descend into <html>
    .getElements()[0]  // descend into <body>
    .getAttribute('src').getValue();  // get the value of the 'src' attribute 
```

解释一下，`Xml.parse`第二个参数为 true 会将文本解析为宽松的 HTML 文档。它隐含地添加了一个`<html>`标签和一个`<body>`标签，您需要在`.getElements()[0].getElements()[0]`调用中加入这些标签。然后你在`<img>`标签处，你可以检查它的`src`属性，而不用担心它在标签中的位置。

# jquery - 单击时滚动查看 Div

> ID：14317451
> 
> 赞同：1
> 
> 时间：2013-01-14T11:16:54.507
> 
> 标签：jquery, jquery-ui

我有一个 div 我有表格，有固定的高度和宽度。每次点击都会显示另一个表格。当在页面底部的特定单元格上单击时，我需要自动滚动滚动条，不应增加窗口高度，也不应在页面上创建额外空间。

```
 <div id="panel" style="width: 1354px; height: 565px;">
    <div id="body">
    <table></table>
    </div> 
```

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T14:49:45.400

您可以尝试使用此代码进行滚动：

```
window.scrollTo(0,0); 
```

# git - 使用 GitLab 自定义接收后文件

> ID：14317452
> 
> 赞同：6
> 
> 时间：2013-01-14T11:16:58.250
> 
> 标签：git, gitlab

我正在尝试用一个启用邮件支持的新文件替换我的 post-receive 钩子，它由 GitLab 自动生成，因此必须触发“post-receive”。

这是我的文件的以前版本：

```
#!/usr/bin/env bash

# This file was placed here by GitLab. It makes sure that your pushed commits
# will be processed properly.

while read oldrev newrev ref
do
  # For every branch or tag that was pushed, create a Resque job in redis.
  repo_path=`pwd`
  env -i redis-cli rpush "resque:gitlab:queue:post_receive" "{\"class\":\"PostRe
ceive\",\"args\":[\"$repo_path\",\"$oldrev\",\"$newrev\",\"$ref\",\"$GL_USER\"]}
" > /dev/null 2>&1
done 
```

当我用一个新文件替换该文件时，该文件在文件末尾包含上述行，GitLab 在管理区域中说：“项目具有无效的后接收文件”，但电子邮件已正确发送。

您知道如何处理多个接收后支持的问题吗？目前我不知道文件的 gitlab 特定部分是否正确执行。

感谢帮助！

### 更新：

现在使用下面提到的解决方案（拉取请求）调用文件夹中的脚本。但我不明白为什么标准的“post-receive-email”脚本如果包含在目录中就不会发送任何邮件。如果直接作为 post-receive 调用它，它工作正常。

不知道为什么我必须更改订单，但以下内容对我有用（即使我不知道现在是否正确创建了 resque 工作：

```
#!/usr/bin/env bash

repo_path=`pwd`

if [ -d hooks/post-receive.secondary.d ]; then

  for i in hooks/post-receive.secondary.d/*
  do
      [ -x "$i" ] || continue
      # call the hooklet with the same arguments we got
      path=$repo_path"/"$i
      "$path" "$@" || {
          # hooklet failed; we need to log it...
          echo hooklet $i failed
          perl -I$GL_BINDIR -Mgitolite -e "log_it('hooklet $i failed')"
          # ...and send back some non-zero exit code ;-)
          exit 1
      }
  done

fi

while read oldrev newrev ref
do
  # For every branch or tag that was pushed, create a Resque job in redis.
  env -i redis-cli rpush "resque:gitlab:queue:post_receive" "{\"class\":\"PostReceive\",\"args\":[\"$repo_path\",\"$oldrev\",\"$newrev\",\"$ref\",\"$GL_USER\"]}" > /dev/null 2>&1
done

exit 0 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T11:33:00.943

2014 年更新，GitLab*不再*使用 gitolite：

正如[Ciro Santilli](https://stackoverflow.com/users/895245/ciro-santilli)[下面提到](https://stackoverflow.com/a/27520784/6309)的，现在有一种**[设置自定义钩子](https://github.com/gitlabhq/gitlabhq/blob/667c0a909bde1cf71f21d8ec9768e98b1c489030/doc/hooks/custom_hooks.md)**的官方方法（GitLab 7.5.0+，2014 年 11 月）。

> 1.  选择一个需要自定义 git 挂钩的项目。
> 2.  在 GitLab 服务器上，导航到项目的存储库目录。
>     对于手动安装，路径通常是`/home/git/repositories/<group>/<project>.git`.
>     对于 Omnibus 安装，路径通常是`/var/opt/gitlab/git-data/repositories/<group>/<project>.git`.
> 3.  在此位置创建一个名为`custom_hook`s 的新目录。
> 4.  在新`custom_hooks`目录中，创建一个名称与钩子类型匹配的文件。
>     对于`pre-receive`钩子，文件名应该`pre-receive`没有扩展名。
> 5.  使钩子文件可执行并确保它由 git 拥有。
> 6.  编写代码以使 git 钩子按预期运行。Hooks 可以是任何语言。确保顶部的“shebang”正确反映语言类型。
>     例如，如果脚本在 Ruby 中，则 shebang 可能是`#!/usr/bin/env ruby`.

* * *

原始答案（2013 年 1 月）

这（允许自定义挂钩）已通过[拉取请求 555](https://github.com/gitlabhq/gitlabhq/pull/555)和[提交 2245a6bbe](https://github.com/owindsor/gitlabhq/commit/2245a6bbeabb4ed25d7e209772df68c5c407b9f1)解决，当时 GitLab 正在使用更新后挂钩。

您需要`hooks/post-receive.secondary.d`在由 gitolite 和 GitLab 管理的 git 裸仓库中声明一个。
把你所有的更新后挂钩放在那里。

[您可以按照该模型](https://github.com/netdata/gitlabhq/blob/4e17304e14b2f8910d8cda49f40fa5dc7f823812/lib/post-receive-hook)修改 gitolite发布的更新后挂钩：如果检测到，它将调用您的所有更新后挂钩。

* * *

问题是：

在 Gitolite V2 中，GitLab 最终将管理权委托给了 Gitolite，因为您可以声明Gitolite 本身会调用[的 post-update.secondary 挂钩。](http://sitaramc.github.com/gitolite/g2/hooks.html)

[在 Gitolite V3 中，不再有任何保留的钩子](http://sitaramc.github.com/gitolite/cust.html#hooks)（除了 gitolite-admin repo 中的更新钩子），因此没有 gitolite “辅助”机制。
但是 GitLab（现在使用接收后挂钩）尚未更新其挂钩管理以考虑新的现实（gitolite 不再允许二级挂钩）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-12-17T07:59:46.367

**自定义挂钩**

GitLab 最近添加了自定义钩子功能，因为内部使用了常规钩子：[https ://github.com/gitlabhq/gitlabhq/blob/667c0a909bde1cf71f21d8ec9768e98b1c489030/doc/hooks/custom_hooks.md](https://github.com/gitlabhq/gitlabhq/blob/667c0a909bde1cf71f21d8ec9768e98b1c489030/doc/hooks/custom_hooks.md)

基本上，您只需在裸 Git 存储库中创建一个`custom_hooks`目录并将钩子放入其中，GitLab 会确保它们运行。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-11T13:00:39.037

这个特定问题的另一种可能的解决方案可能是：

```
#!/usr/bin/env bash

while read oldrev newrev ref
do
  # For every branch or tag that was pushed, create a Resque job in redis.
  repo_path=`pwd`
  env -i redis-cli rpush "resque:gitlab:queue:post_receive" "{\"class\":\"PostReceive\",\"args\":[\"$repo_path\",\"$oldrev\",\"$newrev\",\"$ref\",\"$GL_USER\"]}" > /dev/null 2>&1
  /path/to/your/hook $oldrev $newrev $ref

done 
```

就邮件通知而言，我建议使用[此](https://github.com/nacho/email-hook)电子邮件挂钩。或者，您可以使用[git-notifier](http://www.icir.org/robin/git-notifier/)并替换`/path/to/your/hook $oldrev $newrev $ref`为`/path/to/git-notifier/`

# jquery - 页面滚动时的活动类

> ID：14317453
> 
> 赞同：0
> 
> 时间：2013-01-14T11:17:00.417
> 
> 标签：jquery

开发单个页面（正文滚动顶部动画）请先查看演示，然后查看“菜单 li a”上的添加/删除活动类 [http://jsfiddle.net/sUMaa/1/](http://jsfiddle.net/sUMaa/1/)

一切都很好，但只有一个问题当我们用鼠标滚动页面时需要相同的活动类功能

```
jQuery('ul li a').click(function(){
        var idName = jQuery(this).attr('href');
        var idNameFixTop =  jQuery(idName).offset().top; 
        jQuery('html, body').animate({scrollTop:idNameFixTop}, 1000);

        jQuery('ul li a').removeClass('active');
        jQuery(this).addClass('active');
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-22T05:53:17.460

无论哪种方式，您都可以使用[twitter bootstrap Scrollspy](http://getbootstrap.com/javascript/#scrollspy)，工作正常:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T11:30:25.323

尽管我了解您的问题，但您自己实施此操作可能会引发一些棘手的问题：

*   在将导航元素设置为活动之前，应该有多少元素可见
*   当前可见多个元素时要突出显示的内容

为了让您的生活更轻松，请使用[jQuery Waypoints 插件](http://imakewebthings.com/jquery-waypoints/)之类的东西。看看[Docs](http://imakewebthings.com/jquery-waypoints/#docs)，你几乎可以控制一切。

您的代码示例：

```
$('div').waypoint(function() {
  $('ul li a').removeClass('active');
  var currentIndex = $('div').index($(this));
  $('ul li:eq(' + currentIndex + ') a').addClass('active');
},
{
  offset: 'bottom-in-view'
}); 
```

# javascript - 在单选按钮检查上启用/禁用选择框

> ID：14317456
> 
> 赞同：0
> 
> 时间：2013-01-14T11:17:17.647
> 
> 标签：javascript

当第一个单选按钮被选中时，我需要所有三个复选框来检查和禁用。

When the second or third radio button `other_1`is selected, I need the three checkboxes to uncheck and enable again.

**代码（无效）：**

```
function validate_Days() {

var noOfDays = 0;   

if (document.classic.r.value = "3daypass") {
    noOfDays = 3;
}

if (document.classic.r.value = "2daypass") {
    noOfDays = 2;
}

if (document.classic.r.value = "1daypass") {
    noOfDays = 1;
}

if (noOfDays == 3) {
    document.getElementById('cb1').checked = true;
    document.getElementById('cb2').checked = true;
    document.getElementById('cb3').checked = true;
}
else if (noOfDays == 2) {
    document.getElementById('cb1').checked = false;
    document.getElementById('cb2').checked = false;
    document.getElementById('cb3').checked = false;
}
else if (noOfDays == 1) {
    document.getElementById('cb1').checked = false;
    document.getElementById('cb2').checked = false;
    document.getElementById('cb3').checked = false;
}
} 
```

*编辑：删除禁用并使用更有用的名称/值*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T11:44:59.103

我不明白代码在做什么，但这是我将如何检查和取消选中复选框的方法。我也不明白为什么它们在选中时被禁用-禁用的控件不能成功，因此在提交表单时不会发布到服务器。

```
<script>
function getRadioValue(radioSet) {

  for (var i=0, iLen=radioSet.length; i<iLen; i++) {

    if (radioSet[i].checked) {
      return radioSet[i].value;
    }
  }
}

function updateRadios(el) {
    var form = el.form;
    var checked = getRadioValue(form.rb) == '3'? true : false;
    form.r1.checked = checked;
    form.r2.checked = checked;
    form.r3.checked = checked;
}
</script>

<form>
  <fieldset onclick="updateRadios(this)">
     <legend>Radio buttons</legend>
     <input type="radio" value="1" name="rb"> 1<br>
     <input type="radio" value="2" name="rb"> 2<br>
     <input type="radio" value="3" name="rb"> 3<br>
   </fieldset>
   <fieldset>
     <legend>Checkboxes</legend>
     <input type="checkbox" value="1" name="r1"> 1<br>
     <input type="checkbox" value="2" name="r2"> 2<br>
     <input type="checkbox" value="3" name="r3"> 3<br>
   </fieldset>
 </form> 
```

# jquery - Fancybox iframe 动态调整大小

> ID：14317458
> 
> 赞同：6
> 
> 时间：2013-01-14T11:17:22.733
> 
> 标签：jquery, iframe, fancybox, fancybox-2

一段时间后，我仍然无法在 FancyBox2 中调整 iframe 高度。我在我的父母中这样称呼：

```
$(document).ready(function() {
    $('.fancybox').fancybox();      
    $('.showframe').fancybox({
        openEffect : 'elastic',
        closeEffect : 'elastic',
        beforeShow: function(){
            this.width = ($('.fancybox-iframe').contents().find('body').width());
            this.height = ($('.fancybox-iframe').contents().find('body').height());
        }, 
        afterClose : function() {
            location.reload();
            return;
        },
        onUpdate : { autoHeight: true},
        helpers : {
            overlay : {closeClick: false}
        }
    });
}); 
```

打开 iframe 时它可以正常工作，但是在 iframe 中我有一个脚本，允许用户上传图像并显示上传图像的预览，因此 iframe 的高度会发生变化（取决于上传的照片数量），但是FancyBox 不会“调整高度”。我在我的“子”iframe 中使用它来触发调整大小：

```
...some functions here that handle image upload and image display...
parent.$.fancybox.scrollBox(); 
```

现在这仅适用于 Firefox，而 Chrome 和 IE 将显示滚动条而不是调整 iframe 高度的大小。有没有办法让这个跨浏览器兼容？

编辑：我让这段代码在所有浏览器中工作：

```
parent.$('.fancybox-inner').height($('#wrap').height()+20); 
```

但问题是 iframe 不会居中（它只会调整高度，但不会在屏幕上重新居中）。我已经尝试过`parent.$.fancybox.center();`， `parent.$.fancybox.reize();`并且`parent.$.fancybox.update();`什么都没有，但这仅适用于 Firefox。

我发现（纯属幸运）这实际上适用于所有浏览器（甚至 IE8）：

```
parent.$('.fancybox-inner').height($('#wrap').height()+30);
parent.$.fancybox.reposition(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T08:53:11.727

很高兴您找到了答案，并感谢您。只是一个提示 - 对于 Fancybox 1.3.4 用户来说

```
parent.$.fancybox.center(); 
```

如果您还想重新调整宽度，则必须调整更多 div 的大小。我的完整调整大小如下所示：

```
// get iframe height and width
var current_height = document.getElementById('popup').offsetHeight;
var current_width = document.getElementById('popup').offsetWidth;

// resize height
parent.$('.fancybox-inner').height(current_height + 30);

// resize width
parent.$('#fancybox-outer').width(current_width + 30);
parent.$('#fancybox-wrap').width(current_width + 30);
parent.$('#fancybox-content').width(current_width + 30);
parent.$('.fancybox-inner').width(current_width + 30);

// center the thing - vertically and horizontally
parent.$.fancybox.center();
parent.$.fancybox.resize(); 
```

测试过 IE8+、火狐、Chrome

# java - 为什么 IType.getAnnotation("Annotation") 和 IType.getAnnotations() 的结果不同？

> ID：14317462
> 
> 赞同：2
> 
> 时间：2013-01-14T11:17:36.590
> 
> 标签：java, eclipse-plugin, eclipse-jdt

我开发了一个自定义的 Eclipse Builder，它从类型注释中读取元数据。

每当我从类型中删除所需的注释时，以下代码仍然会在下一次构建运行中获取 IAnnotation 对象（当然它应该在删除注释之前的第一次运行中获取它）：

```
IType type
IAnnotation myAnnotation = type.getAnnotation("MyAnnotation"); 
```

但是如果我使用以下代码，则找不到注释：

```
IType type
IAnnotation[] myAnnotation = type.getAnnotations(); 
```

为什么我可以在第一个示例中获得注释，而在第二个示例中却没有？

# javascript - 通过 https 加载外部 css 和 javascript 的提示

> ID：14317468
> 
> 赞同：2
> 
> 时间：2013-01-14T11:17:57.573
> 
> 标签：javascript, css, https

设置要运行的站点时，`https://`是否有办法阻止页面阻止从标准加载的任何外部 css 或 javascript `http://`。

一些外部文件在同一个域下，因此可以通过 调用`https://`，但有些来自另一个没有可用安全连接的域。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T11:21:11.190

不应该有。此类安全措施的实施是有充分理由的。

即使您可以删除它们，这样做也是一个非常糟糕的主意。

中间人攻击将允许替换 JS 或 CSS（可以通过各种浏览器扩展嵌入 JS）。

这将允许攻击者在页面上运行他们喜欢的任何 JS。

该 JS 可以从页面中获取任何数据并将其发送给攻击者。

该页面将不安全。

将资产复制到您可以通过 HTTPS 访问它们的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T11:47:26.110

您可以在不使用方案的情况下重写链接（例如“//example.com/styles/mystyle.css”）。

[有关详细信息，请参阅此问题](https://stackoverflow.com/questions/4659345/is-there-any-downside-for-using-a-leading-double-slash-to-inherit-the-protocol-i)

如果某些外部内容无法通过 HTTPS 访问，您可以在您的服务器上创建一个 HTTPS 代理（如果您愿意，可以使用某种缓存和 ACL）。

# php - 在子文件夹中组织控制器

> ID：14317473
> 
> 赞同：1
> 
> 时间：2013-01-14T11:18:39.150
> 
> 标签：php, cakephp

如何`/app/controllers`在 CakePHP 的子文件夹中组织控制器？我想`admin`在控制器文件夹中创建一个文件夹，并且我想创建一些与管理员相关的控制器。如果可能，那么我如何从子文件夹中调用控制器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T13:36:52.770

您可以使用[App::build()](http://book.cakephp.org/2.0/en/core-utility-libraries/app.html#App%3a%3abuild)让 CakePHP 知道其他包/配置。

```
App::build(array(
    'Controller' => array('/path/to/controllers', '/next/path/to/controllers')
)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T08:30:55.050

您需要重新考虑您的应用程序结构。Cake 有一个内置的称为[前缀路由](http://book.cakephp.org/2.0/en/development/routing.html#prefix-routing)的东西，您可能应该使用它。

这在 1.x 中也可用

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-14T12:28:56.300

您不能“就那样”更改 CakePHP 文件结构。要实现这一点，需要对核心进行认真的修改，但几乎没有充分的理由这样做。如果您正确遵循命名约定，那么一切都应该很容易找到。

您可以做的（仍然遵循约定并且接近您正在寻找的内容）是为您的所有管理相关任务创建一个[插件](http://book.cakephp.org/2.0/en/plugins.html)，然后您可以将所有这些逻辑放在下面`app/Plugin/plugin_name/Controller`。这样它就有了自己的位置，尽管您需要从主应用程序加载插件才能使其工作。

# ruby-on-rails - 错误说没有路线，但似乎有

> ID：14317476
> 
> 赞同：0
> 
> 时间：2013-01-14T11:18:51.740
> 
> 标签：ruby-on-rails, routing, nested

我有以下表格声明：

```
<%= semantic_form_for @contrat_line, 
    :url => url_for(:controller =>"/backend/orders/#{@contrat.id}/contrat_lines", 
        :action =>"create") do |f| %> 
```

我想走以下路线：

```
POST    /backend/orders/:order_id/contrat_lines(.:format)   backend/contrat_lines#create 
```

但是当我想显示表单时（甚至在使用它之前）出现以下错误：

```
No route matches {:controller=>"backend/orders/23/contrat_lines", :action=>"create"} 
```

我会说这条路线存在，为什么说它不存在？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T11:28:42.467

routes.rb 代码

```
match "/backend/orders/:order_id/contrat_lines" => "orders#contrat_lines", :as => "contrat_lines" 
```

然后，查看代码

```
<%= semantic_form_for @contrat_line, 
    :url => contrat_lines_url(:order_id => @contrat.id), 
        :action =>"create") do |f| %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T11:54:24.170

Thanks to salil i devised the following form :

backend_order_contrat_lines_url(:order_id => @contrat.id), :action =>"create" do |f| %>

And it works with thoses routes :

```
namespace :backend do
    resources :orders do
      resources :contrat_lines
    end
end 
```

Thx a lot!, if you want i can edit your answer and set it as accepted.

# dll - 使用 MASM32 创建 DLL

> ID：14317477
> 
> 赞同：1
> 
> 时间：2013-01-14T11:18:54.267
> 
> 标签：dll, exe, masm32

我在 masm32 中创建 DLL 时遇到问题。无论我做什么，输出始终是 *.exe 文件，而不是 *.dll。下面的代码其实就是masm32 -> Code -> Create New DLL 创建的。我只是使用 Project -> Build All 来构建它。我做错了什么伙计们？

mydll.def

```
LIBRARY mydll
EXPORTS my_proc
; EXPORTS [your_exported_proc_name] 
```

制作.bat

```
@echo off
if exist mydll.obj del mydll.obj
if exist mydll.dll del mydll.dll
\masm32\bin\ml /c /coff mydll.asm
\masm32\bin\Link /SUBSYSTEM:WINDOWS /DLL /DEF:mydll.def mydll.obj 
del mydll.obj
del mydll.exp
dir mydll.*
pause 
```

mydll.asm

```
; ¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤
    include \masm32\include\masm32rt.inc
    include \masm32\include\windows.inc
; ¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤

    ; -------------------------------------------
    ; Build this DLL with the provided MAKEIT.BAT
    ; -------------------------------------------

      .data?
        hInstance dd ?

      .code

; «««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««

LibMain proc instance:DWORD,reason:DWORD,unused:DWORD 

    .if reason == DLL_PROCESS_ATTACH
      mrm hInstance, instance       ; copy local to global
      mov eax, TRUE                 ; return TRUE so DLL will start

    .elseif reason == DLL_PROCESS_DETACH

    .elseif reason == DLL_THREAD_ATTACH

    .elseif reason == DLL_THREAD_DETACH

    .endif

    ret

LibMain endp

My_proc proc 

    ret

My_proc endp

; «««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««

  comment * -----------------------------------------------------
          You should add the procedures your DLL requires AFTER
          the LibMain procedure. For each procedure that you
          wish to EXPORT you must place its name in the "mydll.def"
          file so that the linker will know which procedures to
          put in the EXPORT table in the DLL. Use the following
          syntax AFTER the LIBRARY name on the 1st line.
          LIBRARY mydll
          EXPORTS YourProcName
          EXPORTS AnotherProcName
          ------------------------------------------------------- *

; «««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««

end LibMain 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T03:23:17.803

如果您有 Visual Studio 的许可证，那么您可以使用 Visual Studio 进行 masm32 编程，按照提供的步骤转到项目属性并在配置属性下将配置类型更改为动态库后，可以在[此处](http://scriptbucket.wordpress.com/2011/10/19/setting-up-visual-studio-10-for-masm32-programming/)找到如何设置 Visual Studio 的详细信息.

# android - 谷歌分析安卓不工作

> ID：14317484
> 
> 赞同：5
> 
> 时间：2013-01-14T11:19:47.607
> 
> 标签：android, google-analytics

我正在使用 Google Analytics 来跟踪我的应用程序的 PageViews 和事件。

```
tracker = GoogleAnalyticsTracker.getInstance();
tracker.setDebug(true);
tracker.startNewSession(getString(R.string.ga_auth), 10, this);
tracker.trackPageView("/test"); 
```

我得到了

```
01-14 12:17:53.697: V/GoogleAnalyticsTracker(24795): HTTP Response Code: 200 
```

但在我的分析页面中什么都没有 - 现在等待 3 天......

有没有人面临同样的问题？

此致

编辑：刚刚测试了谷歌分析的 v2 Beta 并且工作正常......但仍然对如何解决问题感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T11:41:40.070

看看这篇有趣的帖子：
[谷歌分析——常见问题和修复](http://blog.blundell-apps.com/google-analytics-common-problems-and-fixes/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-14T12:09:05.840

您可以使用 easy tracker ，它为 Google Analytic 提供包装器。 [http://code.google.com/p/analytics-api-samples/downloads/list](http://code.google.com/p/analytics-api-samples/downloads/list)

# java - Hibernate 自动版本控制不起作用（使用 Spring）

> ID：14317486
> 
> 赞同：1
> 
> 时间：2013-01-14T11:19:59.537
> 
> 标签：java, spring, hibernate, optimistic-locking, hibernate-session

我正在尝试使用 Hibernate 的自动版本控制，但是当调用 Session 的更新方法 f 时，我看不到查询的 where 子句中的版本字段，也没有在数据库中增加版本。我可能在做一些根本错误的事情，但是什么？调用 sesssionFactory 的 getCurrentSession 有问题吗？

我有以下实体类：

```
package dslibweb.model;

import javax.persistence.Entity;
import javax.persistence.Id;
import javax.persistence.Table;
import javax.persistence.Version;

@Entity
@Table(name = "dsXCT_Recalls")
public class DsXCT_Recalls {

@Id
public String recallId;

public int version;
public String status;
    //...... more properties.....

@Version
public int getVersion() {
    return version;
}

public void setVersion(int version) {
    this.version = version;
}

public String getRecallId() {
    return recallId;
}

public void setRecallId(String recallId) {
    this.recallId = recallId;
}

public String getStatus() {
    return status;
}

public void setStatus(String status) {
    this.status = status;
}

} 
```

我的控制器：

```
package recalls.controller;

@Controller
public class RecallsDataController {

@Autowired
RecallsService recallsManager;
@Autowired
AuthenticationService authService;

private static final Logger logger = Logger.getLogger(RecallsDataController.class);
private static final String SAVE_RECALLS = "MODIFY XCT RECALLS";
RecallsGrid recalls;

@RequestMapping(value = "/showRecallsGrid")
@ResponseBody
public RecallsGrid showRecallsGrid( HttpSession session, HttpServletResponse response) {
    recalls = recallsManager.getRecallsDataGrid((String) session.getAttribute("socketToken"), new GridFilters(0, 0, "", "", "", "", ""));
    if (recalls.getError() == null || recalls.getError().equals("")) { // no error
        return recalls;
    } else {
        try {
            response.sendError(HttpServletResponse.SC_BAD_REQUEST, recalls.getError());
        } catch (IOException e) {
            e.printStackTrace();
        }
        return recalls;
    }
}

@RequestMapping(value = "/saveRecalls" , method= RequestMethod.POST)
@ResponseBody
public String saveRecalls( HttpSession session, @RequestParam(value="ids[]", required = false) String [] ids, @RequestParam(value="statuses[]", required = false) String [] statuses){
    boolean result = authService.validateUserAction((String) session.getAttribute("socketToken"), SAVE_RECALLS);
    if(result)
        return recallsManager.saveRecalls(ids, statuses, recalls);
    else 
        return "You do not have authority to perform this action.";
}

} 
```

我在哪里检索 DsXCT_Recalls 的集合并将它们展示给用户。集合存储在控制器中。然后，用户更改一个或多个实体的状态，我调用了recallManager 的saveRecalls 方法，该方法创建了一个仅包含已更改实体的列表（与存储在控制器中的集合相比）。

召回管理器（服务层）是：

```
package recalls.service.defaultimpl;

@Service("recallManager")
public class HibernateRecallsDataService implements RecallsService {

@Autowired
JsonRpcRequest jsonReq;
@Autowired
JsonRpcSocketWriterReader socketWriterReader;
@Autowired
JsonRpcRequestConstructor reqConstructor;
@Autowired
RecallsDao hibernateRecallsDao;
private static final Logger logger = Logger.getLogger(HibernateRecallsDataService.class);

@Transactional
public RecallsGrid getRecallsDataGrid(String socketToken, GridFilters filters) {
    List<DsXCT_Recalls> recalls = hibernateRecallsDao.findRangeOfRecordsFiltered(filters);
    return new RecallsGrid(recalls);
}

@Transactional()
public String saveRecalls(String[] ids, String[] statuses, RecallsGrid recalls) {

    List<DsXCT_Recalls> recallList = recalls.getRecalls();
    List<DsXCT_Recalls> updatedRecallList = new ArrayList<DsXCT_Recalls>();

    for (int i = 0; i < ids.length; i++) {
        for (DsXCT_Recalls recall : recallList) {
            if (recall.recallId.equals(ids[i])) { // recall is found in the list
                if (!statuses[i].equals(recall.getStatus())) { // status has changed
                    recall.setStatus(statuses[i]);
                    updatedRecallList.add(recall);
                }

            }
        }
    }

    return hibernateRecallsDao.saveAll(updatedRecallList);
}

 } 
```

我的 DAO 的 saveAll 方法通过实体更改调用休眠会话的一种更新方法：

```
package recalls.dao.hibernate;

@Repository
public class HibernateRecallsDao implements RecallsDao {

@Autowired(required = true)
@Resource(name = "mySessionFactory")
private SessionFactory sessionFactory;

@SuppressWarnings("unchecked")
public List<DsXCT_Recalls> findRangeOfRecordsFiltered(GridFilters filters) {
    return sessionFactory.getCurrentSession().createQuery("from DsXCT_Recalls r WHERE SID = 0 ORDER BY Org, Bank, BIC, SetlDate").list();
}

public String saveAll(List<DsXCT_Recalls> recallList){
    int count = 0;
    for(DsXCT_Recalls recall:recallList){
        sessionFactory.getCurrentSession().update(recall);
        count++;
    }
    return count + " recalls were modified.";
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:26:16.700

所以显然@Version 必须在属性声明之上，而不是在getter 方法之上。我确信我在某个地方看到了这个。浪费了这么多时间:(

# c# - 用 javascript 控制 Asp.Net 中继器

> ID：14317494
> 
> 赞同：1
> 
> 时间：2013-01-14T11:20:22.173
> 
> 标签：c#, javascript, asp.net, c#-4.0, repeater

我使用Repeater Control创建了FAQ页面，问题和答案是从代码后面绑定的运行时，如下所示。

ASPX 代码

```
<asp:Repeater ID="RepDetails" runat="server">
 <ItemTemplate>
 <table id="tblRepeater">
    <tr id="QARow" runat="server">
      <td>
       <div id="QuestionDiv" onclick="return show(this, 'AnswerDiv');">
        Q:<asp:label id="lblQuestion" runat="server" Text='<%# Eval("Question")%>' CssClass="lblQueClass"></asp:label>
       </div>
       <div id="AnswerDiv" style="display:none;">
        Ans:<asp:Label id="lblAnswerClass" runat="server" Text='<%# Eval("Answer")%>' CssClass="lblAnswerClass"></asp:Label>
       </div>
      </td>   
    </tr>
  </ItemTemplate>
  <FooterTemplate>
 </table>
  </FooterTemplate>
</asp:Repeater> 
```

效果很好！问题是我使用以下脚本来打开和关闭答案。

```
<script type="text/javascript">
   function show(QuestionDiv, AnswerDiv) {
   var arrDIVs = QuestionDiv.parentNode.getElementsByTagName("Div");
   for (var i = 0; i < arrDIVs.length; i++) {
        var oCurDiv = arrDIVs[i];
        if (oCurDiv.id.indexOf(AnswerDiv) >= 0) {
            var blnHidden = (oCurDiv.style.display == "none");
            oCurDiv.style.display = (blnHidden) ? "block" : "none";
            }
         }
       return false;
     }
</script> 
```

它的工作原理就像，当单击一个问题时，它会显示该问题的答案。

我的问题是：我想更新脚本，以便当我们单击一个特定问题时，它应该显示该问题的答案，也应该隐藏其他问题的答案。（如[http://www.edubrainschool.com /faq.php](http://www.edubrainschool.com/faq.php)）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T14:38:39.157

最好的方法是绑定该 TR 的点击。您可以通过将 css 应用于 TR 来做到这一点。

```
 <asp:Repeater ID="RepDetails" runat="server">
 <ItemTemplate>
 <table id="tblRepeater">
    <tr id="QARow" runat="server" class="TROpenCSS">
      <td>
       <div id="QuestionDiv" class="QuestionCSS" onclick="return show(this, 'AnswerDiv');">
        Q:<asp:label id="lblQuestion" runat="server" Text='<%# Eval("Question")%>' CssClass="lblQueClass"></asp:label>
       </div>
       <div id="AnswerDiv" class="AnswerCss" style="display:none;">
        Ans:<asp:Label id="lblAnswerClass" runat="server" Text='<%# Eval("Answer")%>' CssClass="lblAnswerClass"></asp:Label>
       </div>
      </td>   
    </tr>
  </ItemTemplate>
  <FooterTemplate>
 </table>
  </FooterTemplate>
</asp:Repeater> 
```

以及绑定那些 CSS 的点击事件

```
$('.TROpenCSS').bind('click',function(){
// Do your code to show the TD
}); 
```

为所有点击/鼠标悬停添加其他绑定

或者您可以使用“ddaccordion.js”或参考以下[链接](http://www.dynamicdrive.com/forums/showthread.php?30545-DDAccordion-menu)

# glsl - D CTFE 和 GPU 代码生成

> ID：14317500
> 
> 赞同：6
> 
> 时间：2013-01-14T11:20:58.383
> 
> 标签：glsl, opencl, d, mixins, ctfe

D 的 Mixins 是否可以用于将线性代数运算映射到**CPU**代码和 OpenCL 或 GPU 顶点着色器函数（如 GLSL）？这将是 D 的真正杀手级应用程序，以及针对 CPU 和 GPU 执行的更好的桥接逻辑。将此与[glm](http://glm.g-truc.net/)和 D 的[gl3n](http://dav1dde.github.com/gl3n/)进行比较，后者仅将固定大小的线性代数编译为 CPU 代码。

[VexCL](http://ddemidov.github.com/vexcl/)是使用 OpenCL 和 C++11（GCC 4.6 或更高版本）的概念证明，它*完全*抽象出与 C++ AMP 有点相似的内存分配和代码执行的后端相关（CPU/GPU）实现细节。所以事情只能在 D 中变得更好，对吗？mixins 能否完全替代 VexCL 中使用的 C++ 表达式模板？[这是一个很好](http://www.codeproject.com/Articles/415058/VexCL-Vector-expression-template-library-for-OpenC)的使用教程。

CTFE 也可能在此讨论中发挥作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T12:18:41.337

当然是。事实上，它应该非常简单。早在 2007 年，我就对这类事情进行了概念验证（请参阅我在第一次 D 会议上的演讲）。那时在 CTFE 中几乎没有什么工作，但它仍然比在 C++ 中做同样的事情要容易一个数量级。

做这种事情的愿望是开发模板值参数、CTFE 和 SIMD 操作的动机的一部分。

# c++ - Qt的foreach表达式需要深拷贝？

> ID：14317503
> 
> 赞同：4
> 
> 时间：2013-01-14T11:21:09.443
> 
> 标签：c++, qt, foreach

Qt 的 foreach 函数有点问题。我有一个类 Phrase，它是 QList 的子类。在 ~Phrase 中，我删除了所有 GlossItem 指针。

在遍历 Phrase 中的 GlossItem 指针时，我想使用 Qt 的 foreach：

```
 // phrase is a pointer to a Phrase object, 
    // which is a subclassed QList<GlossItem*>
    foreach( GlossItem *glossItem , *phrase )
    {
        // use glossItem
    } 
```

出于某种原因，foreach 正在对 Phrase 执行深层复制（我知道这一点，因为它需要我实现复制构造函数）。但是如果有 Phrase 的副本——并且如果我不想创建每个 GlossItem 的深层副本——这意味着这些指针将被删除两次。（或者，删除一次，然后崩溃。）所以我必须使用这个，它有效但不太漂亮。

```
 for(int i=0; i<phrase->count(); i++ )
    {
        GlossItem *glossItem = phrase->at(i);
        // use glossItem
    } 
```

有没有办法解决这个问题，还是我只需要忍受它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T11:38:03.400

从文档

> Qt 在进入 foreach 循环时会自动获取容器的副本。

和

> 由于 foreach 创建了容器的副本，因此对变量使用非常量引用不允许您修改原始容器。

因此，我认为对于您的特定用例`foreach`不适合，否则您最终会得到`Phrase`带有附加指针的新副本，而不是返回`Phrase`您想要的实际原件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T17:55:52.310

不，如果您查看从以下扩展的代码`foreach`：qt.gitorious.org/qt/qt/blobs/HEAD/src/corelib/global/qglobal.h#line2371 它使用 const_iterator。是的，它确实复制了容器，但由于 Qt 中的所有容器类都是隐式共享的，所以它只是浅拷贝，而不是深拷贝。

# version-control - 使用带有 cvs 的外部合并工具

> ID：14317507
> 
> 赞同：1
> 
> 时间：2013-01-14T11:21:25.727
> 
> 标签：version-control, merge, cvs

如何配置 cvs 以使用外部合并工具而不是它自己的有限工具？

我在 Windows 上使用 tortoisecvs 作为客户端

# hierarchical - 非平衡设计的嵌套 Anova 的非参数对应物

> ID：14317510
> 
> 赞同：1
> 
> 时间：2013-01-14T11:21:32.327
> 
> 标签：hierarchical, anova

是否存在设计不平衡的嵌套方差分析的非参数对应物？即使经过不同的转换，我的数据也不正常。因此我不能使用参数测试。我遇到了弗里德曼测试，但我知道它需要一个完整和平衡的设计。

我要确定的是A（例如齿轮类型）在B（例如捕获）中的影响，其中A嵌套在因子C（例如研究地点）中。

我是 R 新手，我也不是 Stat 专家。任何帮助将不胜感激。非常感谢。

# android - 如何使用 Intent Action_send 在 Twitter 上发帖？

> ID：14317512
> 
> 赞同：13
> 
> 时间：2013-01-14T11:21:34.920
> 
> 标签：android, android-intent, twitter, share

我一直在努力将文本从我的应用程序发送到 Twitter。

下面的代码可以显示蓝牙、Gmail、Facebook 和 Twitter 等应用程序列表，但是当我选择 Twitter 时，它并没有像我预期的那样预填充文本。

我知道使用 Facebook 执行此操作存在问题，但我必须做错事才能使其无法与 Twitter 一起使用。

```
Intent intent = new Intent(Intent.ACTION_SEND);
intent.setType("text/plain");
intent.putExtra(Intent.EXTRA_TEXT, "Example Text");
startActivity(Intent.createChooser(intent, "Share Text")); 
```

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-01-14T11:24:16.840

我在我的代码中使用了这个片段：

```
private void shareTwitter(String message) {
    Intent tweetIntent = new Intent(Intent.ACTION_SEND);
    tweetIntent.putExtra(Intent.EXTRA_TEXT, "This is a Test.");
    tweetIntent.setType("text/plain");

    PackageManager packManager = getPackageManager();
    List<ResolveInfo> resolvedInfoList = packManager.queryIntentActivities(tweetIntent, PackageManager.MATCH_DEFAULT_ONLY);

    boolean resolved = false;
    for (ResolveInfo resolveInfo : resolvedInfoList) {
        if (resolveInfo.activityInfo.packageName.startsWith("com.twitter.android")) {
            tweetIntent.setClassName(
                    resolveInfo.activityInfo.packageName,
                    resolveInfo.activityInfo.name);
            resolved = true;
            break;
        }
    }
    if (resolved) {
        startActivity(tweetIntent);
    } else {
        Intent i = new Intent();
        i.putExtra(Intent.EXTRA_TEXT, message);
        i.setAction(Intent.ACTION_VIEW);
        i.setData(Uri.parse("https://twitter.com/intent/tweet?text=" + urlEncode(message)));
        startActivity(i);
        Toast.makeText(this, "Twitter app isn't found", Toast.LENGTH_LONG).show();
    }
}

private String urlEncode(String s) {
    try {
        return URLEncoder.encode(s, "UTF-8");
    } catch (UnsupportedEncodingException e) {
        Log.wtf(TAG, "UTF-8 should always be supported", e);
        return "";
    }
} 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-01-14T11:24:08.137

您只需打开带有文本的 URL，Twitter 应用程序就会执行此操作。;)

```
String url = "http://www.twitter.com/intent/tweet?url=YOURURL&text=YOURTEXT";
Intent i = new Intent(Intent.ACTION_VIEW);
i.setData(Uri.parse(url));
startActivity(i); 
```

如果未找到推特应用程序，它还将打开浏览器以登录推文。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-01-14T11:41:23.470

试试这个，我用过，效果很好

```
 Intent browserIntent = new Intent(Intent.ACTION_VIEW, Uri.parse("https://twitter.com/intent/tweet?text=...."));
  startActivity(browserIntent); 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-08-28T08:05:16.067

首先，您必须检查设备上是否安装了 twitter 应用程序，然后在 twitter 上分享文本：

```
try
    {
        // Check if the Twitter app is installed on the phone.
        getActivity().getPackageManager().getPackageInfo("com.twitter.android", 0);
        Intent intent = new Intent(Intent.ACTION_SEND);
        intent.setClassName("com.twitter.android", "com.twitter.android.composer.ComposerActivity");
        intent.setType("text/plain");
        intent.putExtra(Intent.EXTRA_TEXT, "Your text");
        startActivity(intent);

    }
    catch (Exception e)
    {
        Toast.makeText(getActivity(),"Twitter is not installed on this device",Toast.LENGTH_LONG).show();

    } 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-02-24T09:42:16.133

对于在**Twitter 上**共享*文本*和*图像*，下面是更受控的代码版本，您可以添加更多与[WhatsApp](https://stackoverflow.com/a/42435212/3736955)、[Facebook](https://stackoverflow.com/a/42438313/3736955)共享的方法……这是官方应用程序，如果应用程序不存在，则不会打开浏览器。

 **```
public class IntentShareHelper {

    public static void shareOnTwitter(AppCompatActivity appCompatActivity, String textBody, Uri fileUri) {
        Intent intent = new Intent(Intent.ACTION_SEND);
        intent.setType("text/plain");
        intent.setPackage("com.twitter.android");
        intent.putExtra(Intent.EXTRA_TEXT,!TextUtils.isEmpty(textBody) ? textBody : "");

        if (fileUri != null) {
            intent.putExtra(Intent.EXTRA_STREAM, fileUri);
            intent.addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION);
            intent.setType("image/*");
        }

        try {
            appCompatActivity.startActivity(intent);
        } catch (android.content.ActivityNotFoundException ex) {
            ex.printStackTrace();
            showWarningDialog(appCompatActivity, appCompatActivity.getString(R.string.error_activity_not_found));
        }
    }

    public static void shareOnWhatsapp(AppCompatActivity appCompatActivity, String textBody, Uri fileUri){...}

    private static void showWarningDialog(Context context, String message) {
        new AlertDialog.Builder(context)
                .setMessage(message)
                .setNegativeButton(context.getString(R.string.close), new DialogInterface.OnClickListener() {
                    @Override
                    public void onClick(DialogInterface dialog, int which) {
                        dialog.dismiss();
                    }
                })
                .setCancelable(true)
                .create().show();
    }
} 
```

要从文件中获取**Uri**，请使用以下类：

```
public class UtilityFile {
    public static @Nullable Uri getUriFromFile(Context context, @Nullable File file) {
        if (file == null)
            return null;

        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.N) {
            try {
                return FileProvider.getUriForFile(context, "com.my.package.fileprovider", file);
            } catch (Exception e) {
                e.printStackTrace();
                return null;
            }
        } else {
            return Uri.fromFile(file);
        }
    }

    // Returns the URI path to the Bitmap displayed in specified ImageView       
    public static Uri getLocalBitmapUri(Context context, ImageView imageView) {
        Drawable drawable = imageView.getDrawable();
        Bitmap bmp = null;
        if (drawable instanceof BitmapDrawable) {
            bmp = ((BitmapDrawable) imageView.getDrawable()).getBitmap();
        } else {
            return null;
        }
        // Store image to default external storage directory
        Uri bmpUri = null;
        try {
            // Use methods on Context to access package-specific directories on external storage.
            // This way, you don't need to request external read/write permission.
            File file = new File(context.getExternalFilesDir(Environment.DIRECTORY_PICTURES), "share_image_" + System.currentTimeMillis() + ".png");
            FileOutputStream out = new FileOutputStream(file);
            bmp.compress(Bitmap.CompressFormat.PNG, 90, out);
            out.close();

            bmpUri = getUriFromFile(context, file);
        } catch (IOException e) {
            e.printStackTrace();
        }
        return bmpUri;
    }    
} 
```

要编写**FileProvider**，请使用此链接：[https ://github.com/codepath/android_guides/wiki/Sharing-Content-with-Intents](https://github.com/codepath/android_guides/wiki/Sharing-Content-with-Intents)**

# sql - 这在 SQL 中可能吗？

> ID：14317515
> 
> 赞同：-1
> 
> 时间：2013-01-14T11:21:41.537
> 
> 标签：sql, date

我有表 A 和表 B

```
**Table A** 
Claim_ID PK

**Table B** 
Claim_State_ID
Claim_ID FK
Claim State
Claim_State_Start_Date
Claim_State_End_Date 
```

表A可以有很多表B

Claim State 可以有三个值：Terminated、Submitted 和 Payment Complete。

我是否可以在表 A.Claim_ID 上进行选择，其中声明状态已终止，但之前的状态必须是付款完成。我会通过检查开始和结束日期来做到这一点。

本质上，我只需要选择状态终止的声明，但在此之前的某个时间状态已终止且未提交。

我目前没有数据，但这将是我合乎逻辑的尝试。

```
Select COUNT (Claim_ID) from TableA JOIN TableB On TableA.Claim_ID=TableB.Claim_ID Where TableB.Claim_State ="Terminated" and Claim_State_End_Date 
```

该声明在此处被缩短，因为我需要将日期与发送到付款状态的日期进行比较。

这甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T11:29:10.713

原谅古老的连接语法。我更喜欢它，出于某种原因...

我认为您是在问“查找所有索赔，其中有记录显示已终止，另一条记录显示已付款，并且终止日期大于付款日期。”

```
select a.claim_ID
from   TableA a, 
       TableB term, 
       TableB paid
where  a.claim_id  =  term.claim_id
and    a.claim_id  =  paid.claim_id
and    term.Claim State  = 'TERMINATED'
and    paid.Claim State  = 'PAID'
and    term.Claim_State_Start_Date >= paid.Claim_State_Start_Date 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T11:24:39.700

除非您明确存储索赔已完成付款的某处，否则这是不可能的。为此，您必须至少添加一个标志或一个全新的表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T13:24:49.947

row_number 和 Common Table Expressions 是您的朋友。

```
WITH cte AS
(
   select
          Claim_Id,
          Claim_State,
          Row_Number() over (Partition by Claim_Id order by Claim_State_Start_Date) as row
   from
   Table_B
)
select a.Claim_ID
from cte a inner join cte b on a.Claim_Id = b.Claim_Id and a.row = b.row + 1

where a.Claim_State = 'Terminated' and b.Claim_State = 'Paid'; 
```

这将检查紧接在前的状态是否为“已付款”，以使任何先前的状态“已付款”将查询更改为`select distinct`并将行测试更改为`a.row > b.row`

# facebook - 在 Facebook 或 Linkedin 上分享链接时设置空白缩略图

> ID：14317516
> 
> 赞同：1
> 
> 时间：2013-01-14T11:21:42.677
> 
> 标签：facebook, blogger

我在 facebook 或 linkedin 上分享我的博文链接时遇到的一个问题是，分享的缩略图是我的图片（这是页面上唯一的图片）。我不希望共享缩略图。我尝试使用

```
<meta property="og:image" content="" 
```

即内容保持为空白，但它显示一个缩略图。怎么设置成无图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T11:26:18.397

你不能。Facebook/Linkedin 将抓取您的网站并自行决定向用户提供哪些图片。元`og:image`标记只是一个建议而不是指令。

没有图像共享的唯一方法是用户将其删除。

更新：还有另一种方法。您可以（在服务器上）检测 FB/LinkedIns 爬虫并为它们提供不包含任何图像的 HTML。这样他们就不会显示任何内容（只是文本）。不知道博主能不能这样。如果你走这条路，检查 FB/LinkedIn 的服务条款是否允许（例如，用谷歌这样做会被禁止）。

# javascript - MVC 下拉列表 onchange 调用 jquery

> ID：14317518
> 
> 赞同：1
> 
> 时间：2013-01-14T11:21:53.883
> 
> 标签：javascript, jquery, asp.net-mvc, razor

我有一个`SelectList`代表订单的交付类型。

交付类型参考数据具有通常的代码/描述，但还有一个额外的布尔属性，指示是否需要为所选类型输入更多信息。

因此，对于紧急交付，需要额外的数据。如果选择紧急情况，附加数据输入字段将设置为可见，否则隐藏

我的`ViewModel`contains`<List>ReferenceDeliveryTypes`包含 3 个属性。我`SelectListItems`从 ViewModel 数据创建了一个

```
@Html.DropDownListFor(model => model.DeliveryTypeCode, 
    new SelectList(Model.ReferenceDeliveryTypes as System.Collections.IEnumerable, 
        "DeliveryTypeCode", "DeliveryTypeDescription"), new { id = "ddlDeliveryType" }) 
```

如何在更改交付类型时调用 jQuery 函数，传递所选代码并检查该`Model.ReferenceDeliveryTypes`代码以查看附加数据属性是否为真/假以显示/隐藏附加字段`div`？

我设法让调用 jQuery 函数来传递值。

```
$(function () {

$('#ddlDeliveryType').change(function () {
    var value = $(this).val();
    alert(value);
}); 
```

});

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T12:53:50.940

我不知道您可以使用选择列表执行此操作，但我建议使用以下选项：

*   简单但有技巧 - 在 DeliveryTypeDescription 的末尾添加一个字符串，例如*（紧急交付）*并在您的更改函数中检查它
*   另一个技巧 - 将 DeliveryTypeCode 乘以 10，如果是紧急交付，则加 1（然后在您的更改功能中使用 mod 10）
*   使用 Ajax 查找函数
*   加载包含需要紧急交付的代码的 JavaScript 查找表
*   在您的表单中使用隐藏字段，其中包含带有适当分隔符的紧急代码字符串列表

祝你好运

更新对于隐藏字段选项，如果您使用类似的东西`123|456|789|`，然后使用`indexOf`将 a 附加`|`到所选 ID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T14:06:16.173

我将 Model.ReferenceDeliveryTypes 转换为允许我从 jQuery 访问它的 JSON 列表。

可能不是最好的方法，但它允许我在客户端上做所有事情，而不是进行 AJAX 回调。我现在可以显示/隐藏 if 块的内部。

认为值得记录我所做的事情，因为我以前没有遇到过`@Html.Raw(Json.Encode`，它可能对想要从 jQuery 中访问模型数据的人有用。

欢迎任何补充意见。

```
 <script type="text/javascript">
            var ReferenceDeliveryTypeJsonList=@Html.Raw(Json.Encode(Model.ReferenceDeliveryTypes))
        </script>

        @Html.DropDownListFor(model => model.DeliveryTypeCode,
                new SelectList(Model.ReferenceDeliveryTypes.ReferenceDeliveryType as System.Collections.IEnumerable,
                "DeliveryTypeCode", "DeliveryTypeDescription"), new { id = "ddlDeliveryType" })

$(function () {

    $('#ddlDeliveryType').change(function () {

        var selectedDT= $(this).val();

        $.each(ReferenceDeliveryTypeJsonList, function (index, item) {

            if (selectedDT === item.DeliveryTypeCode) {
                alert("match " + selectedDT);
            }

        });

    });
}); 
```

# ios - QrCode 库未生成 QR 码

> ID：14317520
> 
> 赞同：0
> 
> 时间：2013-01-14T11:22:05.000
> 
> 标签：ios, xcode, qr-code

我正在使用的二维码生成库（在此处列出）： [https ://github.com/kuapay/iOS-QR-Code-Generator/blob/master/README](https://github.com/kuapay/iOS-QR-Code-Generator/blob/master/README)

在我的 xcode 项目中不起作用。我不明白为什么，但没有生成二维码。

我正在使用以下 3 行设置 QR 码：

```
Barcode *barcode = [[Barcode alloc] init];
[barcode setupQRCode:@"hello"];
_pictureOutlet.image = barcode.qRBarcode; 
```

我还按照自述文件将 libpng 和 QRDraw 文件夹作为子目录拖到我的项目中。

![在此处输入图像描述](../Images/78286af58538a7585da966807393c0d3.png)

可能是什么问题？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T17:44:15.610

我的错。我有一个白色背景，这个库不会为任何犯同样愚蠢错误的人生成黑色背景。

# wpf - wpf datagrid 自动展开第一组

> ID：14317523
> 
> 赞同：6
> 
> 时间：2013-01-14T11:22:15.583
> 
> 标签：wpf, datagrid, expand

我有一个数据网格，其中 itemsource 绑定到一组 ListCollectionView。当我填充集合时，我希望自动将第一组视为扩展，如何在 wpf（代码隐藏或 mvvm）中对其进行编码？

```
<DataGrid 
     ItemsSource="{Binding ResultColl}" 
     SelectedItem="{Binding Path=SelectedResultItem, Mode=TwoWay}"
     SelectionMode="Single" IsReadOnly="True" >
    <DataGrid.GroupStyle>
        <GroupStyle>
            <GroupStyle.ContainerStyle>
                <Style TargetType="{x:Type GroupItem}">
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="{x:Type GroupItem}">
                                <Expander>
                                    <Expander.Header>
                                        <StackPanel>
                                                <TextBox Text="{Binding Items[0].ID}" />
                                        </StackPanel>
                                    </Expander.Header>
                                    <ItemsPresenter />
                                </Expander>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>
            </GroupStyle.ContainerStyle>
        </GroupStyle>
    </DataGrid.GroupStyle>

    <DataGrid.Columns>
        <DataGridTextColumn Binding="{Binding Path=ID}"/>
        <DataGridTextColumn Binding="{Binding Path=Typ}"/>
        <DataGridTextColumn Binding="{Binding Path=Info}"/>
        <DataGridTextColumn Binding="{Binding Path=orderDate, StringFormat={}{0:dd-MM-yyyy}}"/>
    </DataGrid.Columns>
</DataGrid> 
```

在 mvvm 控制器中：

```
ListCollectionView tmp = new ListCollectionView(myList);
tmp.GroupDescriptions.Add(new PropertyGroupDescription("ID"));
ResultColl = tmp;
...
ListCollectionView _resultColl;
public ListCollectionView ResultColl
{
    get { return _resultColl; }
    set { _resultColl = value;

        RaisePropertyChanged("ResultColl");
        if (value != null && _resultColl.Count > 0)
            SelectedResultItem = _resultColl.GetItemAt(0) as ItemResult;
    }
} 
```

执行代码时，数据网格被填充，第一个项目被选中，但组被折叠。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-14T11:38:19.903

将 IsExpanded 属性添加到您的类并将绑定添加到 Expander：

```
<Expander IsExpanded="{Binding Items[0].IsExpanded}"> 
```

将 IsExpanded for first 设置为 true

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-30T14:28:24.993

您可以尝试将另一个 bool 属性添加到您的视图模型中，默认为 true，但在第一次使用时切换为 false。并使用 OneTime 模式将 Expander 的 IsExpanded 属性绑定到此。

```
 public bool IsExpanded
    {
        get
        {
            if (_isExpanded)
            {
                _isExpanded = false;
                return true;
            }
            return false;
        }
    } 
```

Xaml 会是这样的：

```
<Expander IsExpanded="{Binding DataContext.IsExpanded, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type DataGrid}}, Mode=OneTime}"> 
```

# c# - 如何使用实体框架关联“修复”？

> ID：14317526
> 
> 赞同：3
> 
> 时间：2013-01-14T11:22:29.503
> 
> 标签：c#, entity-framework, entity-framework-5

我需要从我的数据库中检索具有许多关系的大型实体层次结构。我没有用许多创建一个巨大的查询`Includes`，而是读到可以使用许多较小的查询来获取层次结构的不同部分，然后 EF 以某种方式使用称为“关联修复”的东西将所有内容粘合在一起。但是我正在努力让它发挥作用。（顺便说一下，我正在使用 EF5 和 POCO）。

作为一个简单的例子，我正在尝试使用“修复”技术检索客户及其所有相关订单。这就是我在 BLL 层中所做的事情：-

```
var customer = context.Customers
    .Where(o => o.Id == requestedCustomerId).SingleOrDefault();

customer.Orders = context.Orders
    .Where(o => o.CustomerId = requestedCustomerId).ToList(); 
```

当我检查返回到 UI 层的客户实体时，customer.Orders 给出了 ObjectDisposedException。我究竟做错了什么？

作为如何使用 fixup 的另一个示例，我将如何填充 Orders 的相关 OrderLines（在单独的查询中，或作为上面第二个查询的一部分）？如果 OrderLine 实体有一个 ProductCategory 父实体怎么办 - 我将如何填充这些？

**更新**

我刚刚尝试了以下方法，它有效： -

```
var orders = context.Orders
    .Where(o => o.CustomerId = requestedCustomerId).ToList();

var customer = context.Customers
    .Where(o => o.Id == requestedCustomerId)
    .Include("Orders")
    .SingleOrDefault(); 
```

我是否正确地说第二个查询不会再次从数据库中获取订单，并且 EF 会将前一个查询检索到的那些关联起来（即使它们只是位于某个任意变量中）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T11:46:51.857

例外情况可能是因为您打开了延迟加载，`ObjectDisposed`并且您在尝试访问`customer.Orders`. 我不喜欢延迟加载，所以我总是把它关掉：

```
// in your context constructor:
this.Configuration.LazyLoadingEnabled = false; 
```

您的原始示例现在应该可以工作了。

* * *

在您的更新中，您急切地加载`Customer.Orders`该`Include`子句。这意味着 EF 在`join`获取记录时使用 a 从数据库中获取此数据`Customer`。

* * *

编辑：

A `DbContext`“记住”它看到的每个对象，其中一个对象基本上是一个数据库行。

如果您加载`Orders`与特定对象关联的内容，`Customer`则上下文会记住这些`Order`对象。

当您随后获取`Customer`对象（没有`.Include( "Orders" )`）时，EF 足够聪明，可以将`Order`您之前获取的对象附加到该`Customer`对象。

它可以做到这一点，因为`Order`对象有一个`CustomerId`，所以当你得到那个`Customer`对象时，它可以查看它的`CustomerId`属性并将`Order`对象添加到`Customer.Orders`集合中。

它只会附加`Orders`它知道的信息，因此如果您之前由于某种原因没有加载所有相关`Order`记录，EF 只会附加它看到的那些。

# java - Jar 在 Windows 中运行但在 Linux 中不运行

> ID：14317527
> 
> 赞同：-1
> 
> 时间：2013-01-14T11:22:32.253
> 
> 标签：java, linux, windows, jar

我用外部库制作了一个可运行的 jar。在 Windows 下，我使用 bat 文件来运行应用程序 ( `java -Djava.library.path=./dist/lib -cp ./dist/Navegador.jar; navegador.Main`)，它可以正常工作。

我创建了一个 sh 文件来在 Linux 下运行该应用程序，但是在尝试在终端中执行它时出现以下错误：

`Exception in thread "AWT-EventQueue-0" java.lang.NoClassDefFoundError: chrriis/dj/nativeswing/NativeSwing`

我的 Manifest.mf 是这样的：

`Class-Path: lib/DJNativeSwing-SWT.jar lib/DJNativeSwing-SWTAPI.jar lib /DJNativeSwing-SWTCore.jar lib/MozillaInterfaces-1.8.1.3.jar lib/DJNa tiveSwing.jar lib/swt.jar`

为什么这个 jar 在 Linux 下不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T11:26:45.697

你有一个或两个`lib`目录吗？你有

```
-Djava.library.path=./dist/lib 
```

但你也有

```
 lib/DJNativeSwing.jar 
```

这是否意味着您有一个`dist/lib`and`lib`目录或者它们应该相同？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T11:27:34.203

您无法在 Linux 下运行该应用程序，因为您缺少本机库（`.so`在 linux 下调用它，`.dll`在 Windows 下）。

# python - Scrapy：每个项目一行

> ID：14317530
> 
> 赞同：1
> 
> 时间：2013-01-14T11:22:44.350
> 
> 标签：python, web-scraping, scrapy

我正在使用 scrapy 为来自 architonic*com 的产品抓取类别页面。但是，我想在每行一个 csv 中显示这些产品。在当前情况下，给定类别页面中的所有品牌名称都列在“品牌”下，而我希望得到这样的输出：

```
 {'brand': [u'Elisabeth Ellefsen'],
     'title': [u'Up chair I 907'],
     'img_url': [u'http://image.architonic.com/img_pro1-1/117/4373/t-up-06f-sq.jpg'],
     'link': [u'http://www.architonic.com/pmsht/up-chair-tonon/1174373']
    } 
```

我尝试使用 Item Loaders（添加 default_output_processor= TakeFirst()），添加“yield item”（参见注释代码）并搜索了两天以找到没有运气的解决方案。希望有人愿意帮助我。非常感谢任何帮助。

我的**输出**如下所示：

```
2013-01-14 11:53:23+0100 [archi] DEBUG: Scraped from <200 http://www.architonic.com/pmpro/home-furnishings/3210002/2/2/3>
{'brand':   [u'Softline',
             u'Elisabeth Ellefsen',
             u'Sellex',
             u'Lievore Altherr Molina',
             u'Poliform',
             .....
             u'Hans Thyge & Co.'],
 'img_url': [u'http://image.architonic.com/img_pro1-1/117/3661/terra-h-sq.jpg',
             u'http://image.architonic.com/img_pro1-1/117/0852/fly-01-sq.jpg',
             u'http://image.architonic.com/img_pro1-1/116/9870/ley-0004-sq.jpg',
             u'http://image.architonic.com/img_pro1-1/117/1023/arflex-hollywood-03-sq.jpg',
             ...
             u'http://image.architonic.com/img_pro1-1/118/5357/reef-002-sq.jpg'],
 'link':    [u'http://www.architonic.com/pmsht/terra-softline/1173661',
             u'http://www.architonic.com/pmsht/fly-sellex/1170852',
             u'http://www.architonic.com/pmsht/ley-poliform/1169870',
             .....
             u'http://www.architonic.com/pmsht/reef-collection-labofa/1185357'],
 'title':   [u'Terra',
             u'Fly',
             u'Ley chair',
                 .....
             u'Hollywood Sofa',
             u'Pouff Round']} 
```

我在**spider/archi_spider.py中使用它**

```
import string
import re

from scrapy.spider import BaseSpider
from scrapy.selector import HtmlXPathSelector                   
from scrapy.contrib.spiders import CrawlSpider, Rule
from scrapy.contrib.linkextractors.sgml import SgmlLinkExtractor
from scrapy.utils.markup import remove_entities 
from archiscraper.items import ArchiItemFields, ArchiLoader

class ArchiScraper(BaseSpider):
    name = "archi"
    allowed_domains = ["architonic.com"]
    start_urls = ['http://www.architonic.com/pmpro/home-furnishings/3210002/2/2/%s' % page for page in xrange(1, 4)]    
    # rules = (Rule(SgmlLinkExtractor(allow=('.', ),restrict_xpaths=('//*[@id="right_arrow"]',))
    #       , callback="parse_items", follow= True),
    #       )
    #            
    def parse(self, response):
        hxs = HtmlXPathSelector(response)
        sites = hxs.select('//li[contains(@class, "nav_pro_item")]')
        items = []
        for site in sites:
            item = ArchiLoader(ArchiItemFields(), site)
            item.add_xpath('brand',       '//*[contains(@class, "nav_pro_text")]/a/br/following-sibling::node()[1][self::text()]')
            item.add_xpath('designer',       '//*[contains(@class, "nav_pro_text")]/a/br/following-sibling::node()[3][self::text()]')
            item.add_xpath('title',       '//*[contains(@class, "nav_pro_text")]/a/strong/text()')                   
            item.add_xpath('img_url',   '//li[contains(@class, "nav_pro_item")]/div/a/img/@src[1]')                     
            item.add_xpath('link',    '//*[contains(@class, "nav_pro_text")]/a/@href')
            items.append(item.load_item())      
            return items
            # for item in items:
                # yield item 
```

**项目.py**

```
# Define here the models for your scraped items
#
# See documentation in:
# http://doc.scrapy.org/topics/items.html
import string
from scrapy.item import Item, Field   
from scrapy.contrib.loader.processor import MapCompose, Join, TakeFirst
from scrapy.utils.markup import remove_entities 
from scrapy.contrib.loader import XPathItemLoader  

class ArchiItem():
    pass

class ArchiItemFields(Item):
    brand = Field()
    title = Field()
    designer = Field()
    img_url = Field()
    img = Field()
    link = Field() 
    pass

class ArchiLoader(XPathItemLoader):
    # default_input_processor = MapCompose(unicode.strip)
    # default_output_processor= TakeFirst()  

    brand_out = MapCompose(unicode.strip)
    # title_out = Join() 
```

# silverlight - Silverlight - AccordionItem 标题中的文本框吃按键

> ID：14317535
> 
> 赞同：0
> 
> 时间：2013-01-14T11:23:16.067
> 
> 标签：silverlight, textbox, header, accordion

我正在使用 Silverlight 4 的 Accordion 控件，最近我不得不向 AccordionItem 标题添加一个 TextBox。用户现在可以在文本框中输入文本，但是当他们按下箭头键（向上或向下）、回车键或空格键时，折叠项会折叠/展开。我怎样才能避免这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T11:23:16.067

我最近发现，为了避免这种行为，我必须同时扩展 AccordionItem 和 AccordionButton 类：前者处理箭头键事件，而后者处理回车键和空格键。只需覆盖 OnKeyDown 和 OnKeyUp 事件，如下所示：

```
public class KeyPressUnawareAccordionItem : AccordionItem
{
    protected override void OnKeyDown(KeyEventArgs e)
    {
    }

    protected override void OnKeyUp(KeyEventArgs e)
    {
    }
}

public class KeyPressUnawareAccordionButton : AccordionButton
{
    protected override void OnKeyDown(KeyEventArgs e)
    {
    }

    protected override void OnKeyUp(KeyEventArgs e)
    {
    }
} 
```

# jquery - jQuery UI Sortable 下推项目

> ID：14317537
> 
> 赞同：7
> 
> 时间：2013-01-14T11:23:21.777
> 
> 标签：jquery, jquery-ui, list, jquery-ui-sortable

我在解决这个问题时遇到了一些麻烦。我查看了其他一些相关问题，但这些解决方案都不适合我。

```
this.$el.sortable({
    placeholder: 'ui-state-highlight',
    connectWith: '.connectedList',
    dropOnEmpty: true
}); 
```

尽管尝试了其他解决方案中发布的一些 CSS 技巧，但这些项目仍然被下推，如下图所示：

[![例子](../Images/2cdc36add60bb38b878bf4c19b967d68.png)](https://i.stack.imgur.com/YcDou.png)

您可以在此处查看代码示例：http: [//jsfiddle.net/jxFBj/1/](http://jsfiddle.net/jxFBj/1/)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-14T11:50:04.907

我想说问题的根源是内联元素的垂直对齐，默认情况下是基线。尽管最终触发问题的是内联和（内联）块元素的混合以及边距的使用。我想问题的实际根源是什么值得商榷。

无论如何，我无法确定发生了什么，但在我看来，占位符（没有内联内容）改变了基线的位置（不确定为什么），因此图像的位置，默认情况下是内联元素，也会发生变化。

有几种方法可以解决此问题：

**制作图像块元素：**

```
.sortableList-item img {
    display: block;
} 
```

***更新（13.01.2015）***：对于最近的浏览器，这个`display`技巧似乎与`vertical-align`下面提到的问题相同，即元素确实水平移动。

[http://jsfiddle.net/jxFBj/2/](http://jsfiddle.net/jxFBj/2/)

**使用浮动元素而不是内联块：**

```
.ui-state-highlight {
    float: left;
    height: 100px;
    width: 100px;
    margin-right: 10px;
    margin-bottom: 10px;
}

.sortableList-item {
    float: left;
    margin-right: 10px;
    margin-bottom: 10px;
    width: 100px;
    height: 100px;
} 
```

[http://jsfiddle.net/jxFBj/3/](http://jsfiddle.net/jxFBj/3/)

**将垂直对齐更改为`top`**也可以，但是当列表元素跨越多行时会导致水平移动，因此这可能不是一个选项：

```
.ui-state-highlight {
    height: 100px;
    width: 100px;
    display: inline-block;
    margin-right: 10px;
    margin-bottom: 10px;
    vertical-align: top;
}

.sortableList-item {
    display: inline-block;
    margin-right: 10px;
    margin-bottom: 10px;
    width: 100px;
    height: 100px;
    vertical-align: top;
} 
```

[http://jsfiddle.net/jxFBj/4/](http://jsfiddle.net/jxFBj/4/)

# iphone - 使用社交框架时，Facebook 出现错误 ACErrorPermissionDenied（错误代码 7）

> ID：14317538
> 
> 赞同：5
> 
> 时间：2013-01-14T11:23:24.350
> 
> 标签：iphone, ios, facebook, ios6, acaccount

我正在使用 获取用户的 Facebook 帐户 ID 和名称`ACAccountStore`。

当出现警告请求用户许可（“XYZ 想要访问您的新闻提要和个人资料”）并且用户点击“不允许”时，我收到错误代码 7，即`ACErrorPermissionDenied`。

但在那之后，如果我转到“设置”并打开我的应用程序的 Facebook 设置并返回应用程序，警报再次弹出并且用户点击“确定”，我仍然收到错误代码 7 ( `ACErrorPermissionDenied`)。所以它在设置中启用，*我*在应用程序中点击了“确定”，但它仍然给我这个错误。

如果我第一次允许访问，*然后*从“设置”打开或关闭访问，它会给我正确的错误或成功。仅当用户第一次点击“不允许”时才会出现此问题。如果他在询问时不允许在应用程序中使用它，那么他将无法允许 FB 访问我的应用程序。

我已经使用以下代码在 iOS 6.0 和 6.0.1 上对此进行了测试：

```
 NSMutableArray *acAccountArray = [[NSMutableArray alloc] init];

ACAccountStore *accountStore = [[ACAccountStore alloc] init];

ACAccountType *accountType =
[accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierFacebook];

[accountStore
 requestAccessToAccountsWithType:accountType
 options:[self getOptionDictionary:ACAccountTypeIdentifierFacebook permission:[[NSArray alloc]initWithObjects:@"read_stream",@"user_about_me",@"email", nil]]
 completion:^(BOOL granted, NSError *error) {
     if(granted) {
         // Doing what I want

     } else {
         NSLog(@"Error: %@", error);
     }
 }];

-(NSDictionary *)getOptionDictionary:(NSString * const)accountTypeIdentifier
                      permission:(NSArray*)permissionArray {
NSDictionary *options = nil;
if (accountTypeIdentifier == ACAccountTypeIdentifierFacebook) {
    options = @{
    @"ACFacebookAppIdKey" : @"dhksadhakjdhkshd",
    @"ACFacebookPermissionsKey" : permissionArray,
    @"ACFacebookAudienceKey" : ACFacebookAudienceFriends};
}
return options;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-14T12:42:08.827

您的应用在 Facebook 上是否仍处于“沙盒模式”？如果是，它将仅对管理员和开发人员可见。如果您在设备上使用应用程序的非管理员登录 Facebook，您可能会收到此错误。禁用沙盒模式为我解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-16T11:10:45.407

这是因为您已经在 facebook 中删除了您的应用程序，即使我也面临同样的问题。如果您尝试使用 iOS 本机登录以外的任何方法登录，那么如果 Facebook 应用程序不存在或被用户在 facebook 设置中删除，则它会添加 Facebook 应用程序，但如果您尝试使用 iOS 本机登录名登录，则当前不会发生。如果您遇到此问题的 ant 解决方案，请通知我，在这种情况下，这也是我可以删除在 iOS facebook 设置中列出的应用程序的一种方式，因为如果我删除然后用户重试登录，那么它可以正常工作。

# html - 页面上需要 2 个 iframe - 1 个用于菜单，1 个用于剩余页面的 100% 宽度和高度？

> ID：14317539
> 
> 赞同：0
> 
> 时间：2013-01-14T11:23:24.477
> 
> 标签：html, iframe

我一直在尝试以 100% 的速度对这个双 iframe 进行排序，以便它可以在桌面和 iphone 等设备上运行 - 它几乎可以工作，但是无论我尝试做什么，包含画廊部分的 iframe 都拒绝达到 100% 的高度：

[http://willhutchinson.co.uk/pf-test/pages/pages-overview/paul-farrell-jessie-iframe.html](http://willhutchinson.co.uk/pf-test/pages/pages-overview/paul-farrell-jessie-iframe.html)

我已经尝试了一堆解决方案，并且确信它一定很简单——顶部的 iframe 可以工作，但底部的 iframe 不能。

欢迎任何想法！干杯意志

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T11:38:32.923

你试过 jQuery 来解决这个问题吗？如果您知道菜单 iframe 的高度从窗口高度减去其高度并将结果设置为 iframe 高度，您可以获得窗口高度？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T12:56:26.257

不知道这是否有帮助，但我将这个 50% 更改为 100%，当我减小尺寸时，滚动出现

```
<iframe style="position: relative; width: 50%" id="menu" src="menu.html" name="menu" frameborder="0" noresize="noresize"> 
```

```
<iframe style="position: relative; width: 100%" id="menu" src="menu.html" name="menu" frameborder="0" noresize="noresize"> 
```

现在图像从：

```
<iframe style="position: relative; width: 100%;" id="paul-farrell-jessie-main" src="paul-farrell-jessie-main.html" name="paul-farrell-jessie-main" frameborder="0" noresize="noresize"> 
```

至：

```
<iframe style="position: relative; width: 1024px; height:768px" id="paul-farrell-jessie-main" src="paul-farrell-jessie-main.html" name="paul-farrell-jessie-main" frameborder="0" noresize="noresize"> 
```

要使其也可以在移动设备上运行，您可以使用以下命令：

```
@media (max-width: 600px) {
     /*You put css in here as you would outside but specific for the size*/
     #paul-farrell-jessie-main {
         width: 200px;
     }
} 
```

要查看您拥有的所有选项，请查看 4 号[http://www.w3.org/TR/css3-mediaqueries/](http://www.w3.org/TR/css3-mediaqueries/)

# javascript - 扩展原生 JavaScript Error 构造函数

> ID：14317542
> 
> 赞同：4
> 
> 时间：2013-01-14T11:23:30.100
> 
> 标签：javascript, error-handling, try-catch, custom-error-handling

我尝试通过扩展Error构造函数的原型来扩展JavaScript错误属性：

```
<script type="text/javascript">
// extending the Error properties to all the ones available in the various browsers:
Error.prototype = {
    name: null, // (all browsers); the name of the error
    message: null, // (all browsers); the error message as a string
    description: null, // (Internet Explorer); description of the error
    fileName: null, // (Firefox); the name of the file where the error occurred
    lineNumber: null, // (Firefox); the number of line where the error occurred
    columnNumber: null, // (Firefox); the number of column where the error occurred
    number: null, // (Internet Explorer); the error code as a number
    stack: null // (Firefox, Chrome); detailed information about the location where the error exactly occurred
};

function log(error) {
    var errors = [];

    for (var prop in error) {
        errors.push(prop + ': ' + error[prop]);
    }

    alert(errors.join('\n'));
}
</script> 
```

然后我测试日志功能：

```
<script type="text/javascript>
try {
    var a = b; // b is undefined!
} catch(error) {
    log(error);
}
</script> 
```

结果是错误对象只显示一些属性（例如在 Firefox`fileName`和`lineNumber`上`columnNumber`），就像它没有被扩展一样。

但最奇怪的是，`for...in`循环似乎**无法遍历所有的错误对象属性**：试图提醒标准属性`error.message`通常会返回一条消息。

所以我的测试结果是：

1.  Error 构造函数不能像其他本地构造函数那样通过其原型进行扩展；
2.  `for...in`循环无法遍历错误对象的属性。

我对吗？
是否有一些有趣的证据/资源，您可以建议了解更多信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-31T19:39:46.290

A. 就像 Raynos 说的那样，`message`没有设置的原因是`Error`该函数返回一个新的 Error 对象并且不*以*任何方式进行操作`this`。

B. 做到这一点的方法是从构造函数返回 apply 的结果，以及以通常复杂的 javascripty 方式设置原型：

```
function MyError() {
    var tmp = Error.apply(this, arguments);
    tmp.name = this.name = 'MyError'

    this.stack = tmp.stack
    this.message = tmp.message

    return this
}
    var IntermediateInheritor = function() {}
        IntermediateInheritor.prototype = Error.prototype;
    MyError.prototype = new IntermediateInheritor()

var myError = new MyError("message");
console.log("The message is: '"+myError.message+"'") // The message is: 'message'
console.log(myError instanceof Error)                // true
console.log(myError instanceof MyError)              // true
console.log(myError.toString())                      // MyError: message
console.log(myError.stack)                           // MyError: message \n 
                                                     // <stack trace ...> 
```

在这一点上这样做的唯一问题（我已经迭代了一点）是

*   `stack`和之外的属性`message`不包含在`MyError`和中
*   stacktrace 有一个额外的行，这并不是真正必要的。

第一个问题可以通过使用此答案中的技巧遍历所有不可枚举的错误属性来解决：[是否可以获取对象的不可枚举继承属性名称？](https://stackoverflow.com/questions/8024149/is-it-possible-to-get-the-non-enumerable-inherited-property-names-of-an-object), 但 ie<9 不支持此功能。第二个问题可以通过撕掉堆栈跟踪中的那一行来解决，但我不确定如何安全地做到这一点（也许只是删除 e.stack.toString() 的第二行？？）。

# html - 在PhoneGap Build的iFrame中输入type="file"

> ID：14317564
> 
> 赞同：1
> 
> 时间：2013-01-14T11:24:43.177
> 
> 标签：html, cordova, iframe, input-type-file

我有一个 PhoneGap 构建的 HTML 应用程序，它有一个 iFrame 到一个网络系统

该系统的一个页面是一个非常简单的文件上传使用

```
< input type="file"> etc... 
```

在 webOS 环境中，这可以完美运行，但是在 PhoneGap 中构建清晰

```
<input type="file"> doesnt work. 
```

我正在寻找 - 有点绝望 - 寻找解决方案，我可以在其中更改

```
<input type="file"> 
```

让它发挥作用。简单性是这里的关键，因为 iframe 指向一个非常复杂的现有系统，我也不愿意对其进行任何重大更改。

预先感谢您的所有帮助

问候

亨利

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T12:44:24.403

至少对我来说，输入文件在 Phonegap 中不起作用。

您需要使用 Phonegap API 来获取图片并选择来源，例如照片库、相机或保存的相册。

查看有关 camera.getPicture 的更多信息：http: [//docs.phonegap.com/en/2.1.0/cordova_camera_camera.md.html#camera.getPicture](http://docs.phonegap.com/en/2.1.0/cordova_camera_camera.md.html#camera.getPicture)以及有关 cameraOptions 方法的 Camera.PictureSourceType 参数：[http://docs.phonegap .com/en/2.1.0/cordova_camera_camera.md.html#cameraOptions](http://docs.phonegap.com/en/2.1.0/cordova_camera_camera.md.html#cameraOptions)

# javascript - 带有复选框对象的JQuery ajax回发ID

> ID：14317566
> 
> 赞同：1
> 
> 时间：2013-01-14T11:24:49.393
> 
> 标签：javascript, jquery

假设我有一张带有多个复选框的客户表：

```
@foreach (var item in Model.Clients)
    {          
        <tr class="@highlightRowClass" data-clientnumber="@item.ClientNumber">  
            <td>
                @Html.CheckboxFor(modelItem => item.Checkbox1)
            </td>
            <td>
                @Html.CheckBoxFor(modelItem => item.CheckBox2)
            </td>
        </tr>
     } 
```

我想让一个 ajax 将帖子调用回 ids 数组，并使用一个对象表示是否选中了一个或两个复选框：

```
 var obj = {
                CheckBox1Ticked: true, 
                Checkbox2Ticked: false,
            };
            pendingChanges[clientId] = obj ; 
```

我将如何遍历每个表行并使用 Jquery 填充数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T11:34:32.830

您可以像这样填充数组：

```
var checkboxData = $('table tr').map(function() {
    var $inputs = $(this).find('input');
    return { checkbox1Ticked: $inputs.eq(0).prop('checked'), checkbox2Ticked: $inputs.eq(1).prop('checked') };
}); 
```

`checkboxData`然后是一个数组，您可以根据需要传递/询问：

```
console.log(checkboxData[0].checkbox1Ticked); 
```

# java - 永远不会发送 WIFI_P2P_DISCOVERY_CHANGED_ACTION 意图操作

> ID：14317569
> 
> 赞同：2
> 
> 时间：2013-01-14T11:25:25.353
> 
> 标签：java, android, wifi-direct

我正在做一个基于 wifi direct 的应用程序。根据[文档](http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.html#WIFI_P2P_DISCOVERY_CHANGED_ACTION)，当我调用 discoverPeers() 时，我希望收到 WIFI_P2P_DISCOVERY_CHANGED_ACTION 意图操作，但由于某种原因，这个意图永远不会发送到我的广播接收器。任何想法？

谢谢你。

# javascript - javascript日期变量格式 - chrome vs safari

> ID：14317570
> 
> 赞同：0
> 
> 时间：2013-01-14T11:25:27.840
> 
> 标签：javascript, date, timestamp, vimeo

我正在查询 vimeo 的 API 以获取我的视频的上传日期。我想知道为什么这适用于 chrome，但不适用于 safari，以及为该视频创建时间戳的正确方法是：

```
 var vimeoDate = videos[i].upload_date;
  var vidDate = new Date(videos[i].upload_date);
  var vidTime = vidDate.getTime();

  console.log('vimeoDate: ' + vimeoDate + ', ' + vidDate + ', ' + vidTime);
  //returns: "vimeoDate: 2012-06-07 13:47:08, Invalid Date, NaN" 
```

您可以在此处看到返回无效日期的 JSFiddle：

[http://jsfiddle.net/nPSqL/](http://jsfiddle.net/nPSqL/)

为了简化这一点，您可以简单地获取此字符串：并在 safari 中运行它，但它会失败：

```
console.log(new Date('2013-01-02 13:33:51')); 
```

[http://jsfiddle.net/nPSqL/1/](http://jsfiddle.net/nPSqL/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T11:30:38.797

唔

```
new Date('2012-06-07 13:47:08'); // works 
```

因此，您给定的参数实际上必须具有日期类型。因为控制台打印日期。如果是约会，那么您正在尝试做类似的事情：

```
var date = new Date();
new Date(date); // doesn't work 
```

那是行不通的。

要检查您的变量是否为日期类型，请尝试以下操作：

```
var isDate = function(date) {
    return Object.prototype.toString.call(date) === "[object Date]";
}; 
```

**好的，找到解决方案**：http : [//jsfiddle.net/nPSqL/2/](http://jsfiddle.net/nPSqL/2/)

在 Safari 中使用 Javascript从[new Date()获取它](https://stackoverflow.com/questions/4622732/new-date-using-javascript-in-safari)

# ruby-on-rails-3.2 - js.erb 未呈现 - ActionView::MissingTemplate

> ID：14317571
> 
> 赞同：3
> 
> 时间：2013-01-14T11:25:30.383
> 
> 标签：ruby-on-rails-3.2

我有一个名为 feed.js.erb 的视图文件，它位于 app/views/sports/feed.js.erb 中，其中包含：

```
<% if @newsfeed.nil? %>   
    alert("No news items for #{@athlete.nil? ? @team : @athlete.full_name}!")  
<% else %>   
    $("#sportfeed").append("<%= j render 'newsfeeds/newsfeed', feed: @newsfeed %>");  
<% end %> 
```

SportsController 中的控制器动作是

```
def feed  
  if params[:sport]  
      @newsfeed = get_sport_news(Sport.find(params[:sport]))  
  elsif params[:athlete]  
      @athlete = params[:athlete]  
      @newsfeed = get_athlete_news(Athlete.find(params[:athlete]))  
  elsif params[:team]  
      @team = params[:team]  
      @newsfeed = get_team_news(@sport.id, params[:team])  
  end  
end 
```

routes.rb 中的路线是：

```
resources :sports do  
  collection do  
      get :feed  
  end  
end 
```

我得到的是

```
ActionView::MissingTemplate (Missing template sports/feed, application/feed with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee]} 
```

这很奇怪，因为我已经通过另一个控制器成功地从 create 渲染了 js.erb。我知道这很简单，但我似乎无法破解它。非常令人沮丧。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:54:35.773

你试过做

```
 respond_to do |format|
    format.js
  end 
```

甚至

```
render :template => 'sports/feed' 
```

在你的成功 if 语句块？这会强制控制器格式化 js.erb

# android - 在 Xmpp/Openfire 中从名册中删除一个朋友

> ID：14317580
> 
> 赞同：1
> 
> 时间：2013-01-14T11:26:06.717
> 
> 标签：android, xmpp, openfire

在我的聊天应用程序中。我正在使用 smack 库，在订阅管理的帮助下，我完成了将朋友添加到特定人的名册的部分。

现在我希望当有人拒绝朋友请求时，我向其他用户发送一个 UNSUBSCRIBE PACKET 相同的，朋友不会从其他用户的名册中删除。它只是显示 NONE 订阅。

代码：

```
Presence unsubscribe = new Presence(Presence.Type.unsubscribe);
                unsubscribe.setTo(ABC@ABC.COM);             
                connection.sendPacket(unsubscribe); 
```

如何从朋友的名册中删除用户。我可以从 openfire 门户网站做到这一点，但不知道如何通过代码做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T18:25:33.227

在[Smack 论坛上](http://community.igniterealtime.org/message/65512#65512)，此代码可能有效：

```
RosterPacket packet = new RosterPacket();
packet.setType(IQ.Type.SET);
RosterPacket.Item item  = new RosterPacket.Item("ABC@ABC.COM", null);
item.setItemType(RosterPacket.ItemType.REMOVE);
packet.addRosterItem(item);
connection.sendPacket(packet); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-22T06:43:28.227

这段代码对我有用

```
 if(selectedRoster != null) {
        Presence presence = new Presence(Presence.Type.unsubscribe);
        presence.setTo(selectedRoster.getUser());
        presence.setStatus("Offline");
        presence.setShow("unavailable");
        ConnectionController.GetInstance(this).getXMPPConnection().sendPacket(presence);

        try {
            roster.removeEntry(selectedRoster);
        } catch (XMPPException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    } 
```

# c# - 将 DTO 传递给我的 ViewModels 构造函数以映射属性

> ID：14317583
> 
> 赞同：5
> 
> 时间：2013-01-14T11:26:20.487
> 
> 标签：c#, asp.net-mvc, architecture, dapper

在我的解决方案中，我有两个项目。

项目 1（核心）使用 Dapper 将 SQL 映射到 DTO

项目 2 (WebUI - ASP.NET MVC 4) 这里我为每个视图使用一个 ViewModel。

控制器示例

```
 [HttpGet]
    public ActionResult Edit(int id)
    {
        // Get my ProductDto in Core
        var product = Using<ProductService>().Single(id);
        var vm = new ProductFormModel(product);

        return View(vm);
    } 
```

ViewModel 示例

```
public class ProductFormModel : BaseViewModel, ICreateProductCommand
    {
        public int ProductId { get; set; }
        public int ProductGroupId { get; set; }
        public string ArtNo { get; set; }
        public bool IsDefault { get; set; }
        public string Description { get; set; }
        public string Specification { get; set; }
        public string Unit { get; set; }
        public string Account { get; set; }
        public decimal NetPrice { get; set; }

        public ProductFormModel(int productGroupId)
        {
            this.ProductGroupId = productGroupId;
        }

        public ProductFormModel(ProductDto dto)
        {
            this.ProductId = dto.ProductId;
            this.ProductGroupId = dto.ProductGroupId;
            this.ArtNo = dto.ArtNo;
            this.IsDefault = dto.IsDefault;
            this.Description = dto.Description;
            this.Specification = dto.Specification;
            this.Unit = dto.Unit;
            this.Account = dto.Account;
            this.NetPrice = dto.NetPrice;
        }

        public ProductFormModel()
        {
        }
    } 
```

**说明：** 我将使用项目（核心）中的服务类在我的控制器中获取我的 DTO。然后我创建我的 ViewModel 并将 DTO 传递给 ViewModel 中的构造函数。我也可以使用这个视图来添加一个新产品，因为我的 ViewModel 可以采用一个空的构造函数。

有没有人有这方面的经验。我想知道我这种方式将来随着项目变大会不会有问题？

我知道这与 Dapper 无关。但我仍然想要一个解释我的解决方案的好方法。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-14T11:37:55.853

我认为你会很好地使用你目前的方法。更重要的是，如果您开始遇到与对象映射代码相关的问题，请像这样开始并**重构**（而不是事先考虑太多）。

我有时使用的另一种组织映射逻辑的方法是使用扩展方法。这样，映射代码就与视图模型本身分开了。就像是：

```
public static class ProductMappingExtensions
{
    public static ProductFormModel ToViewModel(this ProductDto dto)
    {
        // Mapping code goes here
    }
}

// Usage:

var viewModel = dto.ToViewModel(); 
```

另一种方法是使用像[AutoMapper这样的](https://github.com/AutoMapper/AutoMapper)*映射框架*- 如果您的映射逻辑很简单（属性之间的大量 1:1 映射），这尤其适合。

但同样，**从简单开始并在需要时重构**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-28T10:55:09.763

我意识到这是一个有点晚的答案，但也许它会在未来帮助某人。

这种在对象之间进行映射的方式打破了 SOLID 原则的“S”，因为 ViewModel 的职责是在其属性中准备数据以供视图使用，而不是其他任何东西，因此，映射对象不应该打开这是责任。

这种方式的另一个缺点是它还打破了“松耦合”OO 原则，因为您的 ViewModel 与您的 DTO 强耦合。

我认为，即使我们处于项目的第一步，也有一些重要的 OO 原则是我们不应该打破的，所以使用映射器类，无论是自动（AutoMapper，ValueInjecter ...）还是手动，肯定更好。

# json - 如何在 Liferay Portlet 中进行会话管理？

> ID：14317585
> 
> 赞同：0
> 
> 时间：2013-01-14T11:26:28.383
> 
> 标签：json, portlet, liferay-6

JSP 页面中有一个“搜索”按钮。获取所有值进行搜索后，表单正在提交。

在`processAction()`中，我正在获取所有参数。使用这些参数，`doView()`我正在使用一个 API（`JSON`数据）。`JSON`为 API 的输入创建一个对象并使用它。现在我得到了输出`JSON`数据并将其传递给了jsp使用`renderRequest.setAttribute("jsonString", json.toString());`

然后使用 this 显示搜索结果`jsonString`。

它工作正常。

问题是，它没有为多个用户创建多个实例。如果一个用户执行了搜索操作，则在刷新页面时将向每个用户显示相同的搜索结果。
为什么每个用户没有单独的实例？

现在此页面的所有用户都无法按照他们的意愿进行搜索操作。如果一个用户这样做，则将向所有人显示相同的结果。我该如何解决？

为什么特定用户的会话要共享给所有人？或者这个问题的真正原因是什么？

# java - 使用 ESAPI 时允许百分比符号的模式

> ID：14317586
> 
> 赞同：2
> 
> 时间：2013-01-14T11:26:35.620
> 
> 标签：java, regex, symbols, esapi

我正在使用 RegEx`^[\\p{L}\\p{N}:\\-.\\s_&.,$()\\*%]*$`使用 ESAPI 验证其中一个字段。

如果我的输入是`1234%`或`1234%%`或`1234%%%`或`%1`它被视为 TRUE。但是，如果我可以输入`%12`或者它失败了。`1234%12``1234%%12`

我的观察是**它不允许在`%`symbol**之后超过一个字符/数字。

我可以知道我的 RegEx 中是否有任何错误吗？RegEx 模式应该是什么，以允许`%`任何有效字符后面或前面有任意数量的符号？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-04-19T20:47:08.607

正如所指出的，您的问题不是您的正则表达式，而是您通过 发送的数据`DefaultEncoder.getValidInput(args...)`包含某种形式的混合编码。

您不会过多地讨论上下文，但一般来说，您接受的答案存在极大的致命缺陷，不应作为建议推荐给*任何人。*

您的输入失败，因为已确定，ESAPI 将规范化您的输入，然后将其传递给正则表达式进行验证。规范化真正为您提供的是两件事，但最重要的是 ESAPI 的实现将检测多重编码攻击。

什么是多重编码？它试图通过多次编码一段数据来破坏输入验证。使用百分比编码，它看起来像这样：

```
ORIGINAL INPUT:
<script>alert('xss');</script>

ENCODED ONCE:
%3Cscript%3Ealert(%27xss%27)%3B%3C%2Fscript%3E

ENCODED TWICE:
%253Cscript%253Ealert(%2527xss%2527)%253B%253C%252Fscript%253E 
```

您的回答，您建议仅关闭百分比编解码器，这给您的应用程序引入了一个巨大的安全漏洞，您无法再检测到攻击是否试图破坏您的输入验证例程。百分比编码是一种非常标准的攻击技术。有多种方法可以尝试将代码强制转换为涉及多种编码技术的应用程序。

您在这里真正需要的是更好地讨论为什么您的应用程序正在处理的输入*需要*使用您正在使用的输入类型。什么是具有更大图景的一些示例数据的实际用例？有了你面前的一切，我唯一能做的就是清楚地说明删除百分比编解码器会让你容易受到攻击。

如果你想在没有规范化的情况下临时验证 ESAPI 有

`Validator.getValidInput(String context, String input, String type, int maxLength, boolean allowNull, boolean canonicalize);`

这允许您暂时关闭规范化。

但是，规范化是存在的，因此您可以确保您正在处理的输入可以安全地用于正则表达式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T05:06:26.297

感谢您对 NaveedS 和 GauravM 的帮助。

我能够弄清楚确切的问题。支持 %. 是 ESAPI 的核心问题。

*   在进行实际的模式匹配之前，ESAPI 用于**规范化**输入字符串。
*   这种规范化涉及使用各种编解码器，如**javascript 编解码器、HTML 代码、*百分比编解码器*。**
*   百分比编解码器扫描输入字符串中的`%`符号，并将其视为**转义字符**。它将*接下来的两个文字*视为**HEX 数字**，即在 example 中`%123`，它认为`12`是**Hex**，即**十进制**，因此符号为`18`Character**等价**物。**`UP ARROW`**
*****   因此，在规范化之后，输入字符串转换为`UPARROW3`，但`UPARROW`在 RegEx 中不允许`^[\\p{L}\\p{N}:\\-.\\s_&.,$()\\*%]*$`，它失败了。****

 ****作为一种解决方法，在将字符串传递给 ESAPI 进行验证之前，我们可以删除字符串中的所有百分比并在末尾附加一个 %。这将执行相同的验证。

但是，对于 RegEx 这样`Validator.Email=^[A-Za-z0-9._%-]+@[A-Za-z0-9.-]+\\.[a-zA-Z]{2,4}$`的解决方法将不起作用。

在这种特殊情况下，作为一种替代方法，可以编写自己的 RegEx（明确允许末尾段中的百分比），例如`Validator.own.Email=^[A-Za-z0-9._%-]+@[A-Za-z0-9.-]+\\.[a-zA-Z%]{3,5}$`

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T12:37:49.050

Nirav 如果您尝试使用数字，请尝试使用下面的正则表达式。(\d*%+\d*)+

它将匹配您的模式，其中包括 % 后面或前面的数字。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-10-10T06:29:16.623

好的选择是**排除 Percentage codec**，如果它不是真的需要的话。

为此，需要编写***自己的自定义编码器实现***，扩展提供的 ESAPI`org.owasp.esapi.reference.DefaultEncoder`并将其注册为`ESAPI.properties`喜欢

```
ESAPI.Encoder=path.to.ESAPIDefaultEncoderImpl 
```

请参见下面的实现示例。

```
package path.to;

import java.util.ArrayList;
import java.util.List;

public class ESAPIDefaultEncoderImpl extends org.owasp.esapi.reference.DefaultEncoder
{
private static List<String> codecs;
private static ESAPIDefaultEncoderImpl singletonInstance ;

static
{
    codecs = new ArrayList<String>();
    codecs.add("HTMLEntityCodec ");
    codecs.add("JavaScriptCodec");
    singletonInstance = new ESAPIDefaultEncoderImpl();
}

public static ESAPIDefaultEncoderImpl getInstance()
      {
        return singletonInstance;
      }
      private ESAPIDefaultEncoderImpl()
      {
         super(codecs);
      }
} 
```

在这个定制的编码器中，**不应该注册*****Percentage Codec*** ，而应该只注册真正需要的。（要查看所有 ESAPI 编解码器，请访问 ESAPI 文档）。****

# asp.net-mvc-4 - 操作模型，然后在视图中反映它

> ID：14317588
> 
> 赞同：0
> 
> 时间：2013-01-14T11:26:42.937
> 
> 标签：asp.net-mvc-4

我有`LogoutModel`一个属性。我希望我`HomeController`更改此值，`View`然后显示此值，但它似乎不起作用。当显示注销视图时，它显示：'再见 Html.LabelFor(m => m.PreviousLoggedInUsername)'

注销型号：

```
public class LogoutModel
        {
            public string PreviouslyLoggedInUsername { get; set; }
        } 
```

家庭控制器：

```
 public ActionResult Logout(HomeModels.LogoutModel model)
        {
            model.PreviouslyLoggedInUsername = previousLoggedIn;
            return View(model);
        } 
```

看法：

```
@using Ecommerce.Models
@model HomeModels.LogoutModel
@{
    ViewBag.Title = "Logout";
    Layout = "~/Views/Shared/Master.cshtml";
}

<h2>You have been logged out.</h2>

@using (Html.BeginForm())
{
    <table>
        <tr>
            <td>
                <label>Goodbye </label>
                Html.LabelFor(m => m.PreviouslyLoggedInUsername)
            </td>
        </tr>
    </table> 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T12:08:13.207

您需要`@`在`Html.LabelFor...`

```
<table>
    <tr>
        <td>
            <label>Goodbye </label>
            @Html.LabelFor(m => m.PreviouslyLoggedInUsername)
        </td>
    </tr>
</table> 
```

作为参考，这里是[Razor 语法快速指南。](http://haacked.com/archive/2011/01/06/razor-syntax-quick-reference.aspx)

# matplotlib - 使用 Cartopy 立体投影的直线穿过杆

> ID：14317596
> 
> 赞同：5
> 
> 时间：2013-01-14T11:27:02.127
> 
> 标签：matplotlib, cartopy

我正在使用 cartopy 生成带有立体投影的北极地图，然后在顶部绘制一条线（以显示横截面的位置）。如果我使用下面的代码，那么这条线不会沿着一条直线穿过极点，而是沿着一条纬线。

```
import cartopy.crs as ccrs
import matplotlib.pyplot as plt

x=[180,0]
y=[50,50]
ax = plt.axes(projection=ccrs.NorthPolarStereo())
ax.set_extent([0, 360, 50, 90], crs=ccrs.PlateCarree())
ax.plot(x,y,transform=ccrs.PlateCarree())
plt.gca().stock_img()
plt.gca().coastlines()
plt.show() 
```

为了解决这个问题，我必须将 x 和 y 更改为：

```
x=[180,180,0,0]
y=[50,90,90,50] 
```

所以在北极有两个数据点。有没有更好的解决方案？

**编辑**：附上图片 ![想要什么](../Images/0666c694e5d5591192827e07ad025015.png)

谢谢，

蒂姆

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-15T10:45:57.557

@ajdawson's answer is correct. Using the Geodetic transform, in this case, will do the trick.

To understand the reason the line wasn't as you expected it to look, we need to understand what the PlateCarree transform represents.

Firstly, lets observe that all lines drawn in the `transform=<projection>` form, using Cartopy, should pass through the same Geographic points irrespective of the projection that the line is being drawn on.

```
import cartopy.crs as ccrs
import matplotlib.pyplot as plt

def main():

    x=[180, 180, 0, 0]
    y=[50, 90, 90, 50]

    # plot2 - North Polar Stereographic
    ax = plt.subplot(211, projection=ccrs.NorthPolarStereo())
    ax.set_extent([0, 360, 50, 90], crs=ccrs.PlateCarree())

    ax.plot(x, y, transform=ccrs.PlateCarree(), color='red', lw=2)

    ax.stock_img()
    ax.coastlines()

    # plot2 - PlateCarree
    ax = plt.subplot(212, projection=ccrs.PlateCarree(central_longitude=45))
    ax.set_extent([0, 360, -45, 90], crs=ccrs.PlateCarree())

    ax.plot(x, y, transform=ccrs.PlateCarree(), color='red', lw=2)

    ax.stock_img()
    ax.coastlines()

    plt.show()

if __name__ == '__main__':
    main() 
```

![output image - north polar stereo next to PlateCarree](../Images/15ec47fbe4bd5eae5022d9139fdcfd33.png)

So going back to drawing your original coordinates (which were in PlateCarree coordinates) on a PlateCarree map:

```
import cartopy.crs as ccrs
import matplotlib.pyplot as plt

def main():

    x=[180, 0]
    y=[50, 50]

    ax = plt.axes(projection=ccrs.PlateCarree(central_longitude=45))
    ax.set_extent([0, 360, -45, 90], crs=ccrs.PlateCarree())

    ax.plot(x, y, transform=ccrs.PlateCarree(), color='red', lw=2)

    ax.stock_img()
    ax.coastlines()
    plt.tight_layout()
    plt.show()

if __name__ == '__main__':
    main() 
```

![PlateCarree line](../Images/39fab0714e3a1c1632546a310762a20a.png)

You will find that the line passes through the same geographic points as your bad line in the original question.

This should satisfy you that Cartopy is behaving rationally and it is not a bug, but it doesn't answer the question about *how* you would go about drawing the line you desire.

@ajdawson has already said that, in your case, drawing the line:

```
plt.plot([180, 0], [50, 50] , transform=ccrs.Geodetic()) 
```

will result in the desired output.

That is because the Geodetic coordinate reference system draws the line of shortest distance on the globe between two points. However, there will be a latitude which, when crossed, passing through the north pole does not provide the shortest distance:

```
import cartopy.crs as ccrs
import matplotlib.pyplot as plt

def main():

    ax = plt.axes(projection=ccrs.PlateCarree(central_longitude=45))
    ax.set_global()

    ax.plot([180, 0], [20, 20], transform=ccrs.Geodetic(), color='red', lw=2, label='Latitude = 20')
    ax.plot([180, 0], [0, 0], transform=ccrs.Geodetic(), color='blue', lw=2, label='Latitude = 0')
    ax.plot([180, 0], [-20, -20], transform=ccrs.Geodetic(), color='yellow', lw=2, label='Latitude = -20')

    ax.outline_patch.set_zorder(2)
    plt.legend(loc=8, bbox_to_anchor=(0.65, -0.2), shadow=True, fancybox=True)

    ax.stock_img()
    ax.coastlines()
    plt.tight_layout()
    plt.show()

if __name__ == '__main__':
    main() 
```

![Non-north pole crossing geodetic lines](../Images/4e1ea06c5ed24c52e150a596321fda77.png)

**Generally, if you wanted to draw a Geodetic line which always crosses the North Pole, then the north pole should be one of the coordinates of the line.**

```
plt.plot([180, 0, 0], [-45, 90, -45] , transform=ccrs.Geodetic()) 
```

Finally, just to throw it into the mix, if you just wanted a vertical line in a North Polar Stereographic projection which crosses the North Pole, it is worth remembering that there exists a Cartesian coordinate system (in which it is worth remembering that the numbers are not latitude and longitudes), so simply doing:

```
ax = plt.axes(projection=ccrs.NorthPolarStereo())
plt.axvline() 
```

Will also do the trick! (but is less transferable than the Geodetic approach)

Wow, my answer got long. I hope your still with me and that makes the whole PlateCarree thing clearer!

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T20:05:28.390

我认为您在绘制此部分而不是 Plate Carree 时需要使用 Geodetic 变换：

```
<!-- language: lang-py -->

import cartopy.crs as ccrs
import matplotlib.pyplot as plt

x=[180,0]
y=[50,50]
ax = plt.axes(projection=ccrs.NorthPolarStereo())
ax.set_extent([0, 360, 50, 90], crs=ccrs.PlateCarree())
ax.plot(x,y,transform=ccrs.Geodetic())
ax.stock_img()
ax.coastlines()
plt.show() 
```

结果如下所示：

![北极上空的剖面](../Images/06b5df5c503c9db8c7fa7bc182ab2f3a.png)

我认为无论如何这是处理这个问题的正确方法！

安德鲁

# apache-pig - 在本地模式下运行时在 Pig 中设置其他 jars 属性

> ID：14317604
> 
> 赞同：1
> 
> 时间：2013-01-14T11:27:46.297
> 
> 标签：apache-pig

当 Pig 在分布式 (HDFS) 模式下运行时，您可以使用以下语法从命令行将其他 jar 传递给它，这样您就不必显式使用`REGISTER`调用

```
pig -Dpig.additional.jars=jar1.jar:jar2.jar -f pigfile.pig 
```

但是当我在本地模式下运行时做同样的事情时，它失败了

```
pig -x local -Dpig.additional.jars=jar1.jar:jar2.jar -f pigfile.pig 
```

有谁知道在本地模式下运行 Pig 时如何注册额外的 jar？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T20:30:21.917

属性应该在任何 Pig 特定选项之前传递：

```
pig -Dpig.additional.jars=jar1.jar:jar2.jar -x local -f pigfile.pig 
```

# c# - 在登录按钮的事件上创建会话变量

> ID：14317609
> 
> 赞同：2
> 
> 时间：2013-01-14T11:28:06.757
> 
> 标签：c#, asp.net, code-behind

`NullReferenceException`当我尝试创建在事件`Session`中使用的变量时，我得到了。登录页面是自动创建的。问题是正在返回。我不知道为什么，因为如果我删除此代码并正常登录，我将不会从中获得，只有当我使用此事件时。`Membership.GetUser()``LoginUser_LoggedIn``Membership.GetUser().UserName``null``null`

所以，我希望能够获取登录用户的用户名，这样我就可以在`LoggedIn`事件中创建这些会话变量

```
protected void LoginUser_LoggedIn(object sender, EventArgs e)
    {
        Session["PersonPID"] = con.GetPerson(Membership.GetUser().UserName.ToString()).PID;
        Session["PersonFirstName"] = con.GetPerson(Membership.GetUser().UserName).FirstName;
        Session["PersonLastName"] = con.GetPerson(Membership.GetUser().UserName).LastName;
        Session["PersonDob"] = con.GetPerson(Membership.GetUser().UserName).Dob;
        Session["PersonTown"] = con.GetPerson(Membership.GetUser().UserName).Town;
        Session["PersonGender"] = con.GetPerson(Membership.GetUser().UserName).Gender;
        Session["PersonUname"] = Membership.GetUser().UserName;
        Session["PersonImageUrl"] = con.GetPerson(Membership.GetUser().UserName).ImageUrl;
        Session["PersonPres"] = con.GetPerson(Membership.GetUser().UserName).Pres;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T10:21:09.113

从用于登录的文本框中获取它 string userName = (LoginUser.FindControl("UserName") as TextBox).Text;

这里的问题似乎是用户尚未完全通过身份验证（它的值尚未显示在成员资格类中）。此外，用户的个人资料尚未加载，因此我们也无法获取个人资料日期。

在我看来，有点让这个事件变得毫无意义。

注意：我们必须从表单中的文本框中获取用户名值，但这被它的父控件隐藏，因此 parentControl.FindControl(textbox)

你也可以这样做是你想要非常通用

控制 ctrl = ((System.Web.UI.Control)sender); 字符串用户名 = ((System.Web.UI.WebControls.TextBox)ctrl.FindControl("UserName")).Text;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-15T14:06:17.467

我宁愿建议，首先您在方法中验证用户凭据，该方法将在成功登录`LoginUser_Authenticate()`后将您重定向到方法。`LoginUser_LoggedIn()`在那里您可以获取当前用户名并设置为您的会话变量。

```
protected void LoginUser_Authenticate(object sender, AuthenticateEventArgs e)
{
    if (Login1.UserName == "SomeUser1" && Login1.Password == "password123")
    {
        e.Authenticated = true;
    }

    else
    {
        e.Authenticated = false;
    }
}

protected void LoginUser_LoggedIn(object sender, EventArgs e)
{
    Session["PersonPID"] = con.GetPerson(Login1.UserName).PID;
    Session["PersonFirstName"] = con.GetPerson(Login1.UserName).FirstName;
    Session["PersonLastName"] = con.GetPerson(Login1.UserName).LastName;
    Session["PersonDob"] = con.GetPerson(Login1.UserName).Dob;
    Session["PersonTown"] = con.GetPerson(Login1.UserName).Town;
    Session["PersonGender"] = con.GetPerson(Login1.UserName).Gender;
    Session["PersonUname"] = Login1.UserName;
    Session["PersonImageUrl"] = con.GetPerson(Login1.UserName).ImageUrl;
    Session["PersonPres"] = con.GetPerson(Login1.UserName).Pres;
} 
```

# java - Internet Explorer 显示 404 但 Web 应用程序仍在运行

> ID：14317611
> 
> 赞同：1
> 
> 时间：2013-01-14T11:28:36.337
> 
> 标签：java, spring, hibernate, internet-explorer, informix

我正在使用 Spring、Hibernate 和 Informix 开发一个 Web 应用程序......

它有一个长达 30 分钟的数据导入过程，当用户等待它结束时，Internet Explorer 显示错误，告诉用户该页面无法显示，但 Web 应用程序仍在运行（它一直在写入日志和导入数据）。

为什么会这样？是因为显示生成的jsp需要很长时间吗？

我怎样才能避免这种情况？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T09:10:24.563

如果在此时间内没有响应，您的浏览器会等待 30 分钟做出响应并显示错误页面。对于这样的问题有多种解决方案。示例：这是压力测试，因此您可以在晚上（或服务器不工作的其他时间）使用 cron 和命令行“浏览器”（如 wget）运行它并将结果保存到临时表中。然后，您可以显示此临时表的结果，而不是从浏览器开始测试。

其他想法：从您的浏览器启动后台线程，该线程将填充临时表并使用“刷新”按钮显示部分结果。此按钮的操作只会读取临时表。添加表示“测试结束”的特殊记录，并在找不到该特殊记录时显示“刷新”。

# mysql - 如何在同一行中分组结果：使用 MySQL 的多对多关系

> ID：14317612
> 
> 赞同：-1
> 
> 时间：2013-01-14T11:28:39.720
> 
> 标签：mysql, sql

我有 2 个通过多对多关系连接的表，我创建了第三个表，并且我有一个像这样的查询：

```
SELECT  product.product_name, provider.provider_name 
FROM  product, provider, provider_product 
WHERE product.id_product = provider_product.ref_product 
AND provider.id_provider = provider_product.ref_provider 
```

我需要按 product_name 对结果进行分组，结果必须在同一行中，就像这样：如果产品有很多提供者：我的结果将是：

```
product.product_name | provider.provider_name
this is my first product 1   | this is provider1 / this is provider2 / this is provider3 
```

如您所见，提供者在同一行中，并且它们按`/`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T11:42:23.720

使用[GROUP_CONCAT()](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)函数。

```
SELECT  product.product_name, GROUP_CONCAT(provider.provider_name SEPARATOR '/') 
FROM  product, provider, provider_product 
WHERE product.id_product = provider_product.ref_product 
AND provider.id_provider = provider_product.ref_provider 
GROUP BY product.product_name 
```

# c++ - ImportError 未定义符号 PyUnicodeUCS2_FromObject

> ID：14317615
> 
> 赞同：2
> 
> 时间：2013-01-14T11:28:43.887
> 
> 标签：c++, python, qt

这是我的 c++ 代码片段（使用 Qt），我在其中调用了 python 应用程序的 shell 脚本：

```
void MainWindow::CodeAsterError()
{
    ui->textBrowserError->append(caProcess->readAllStandardError());
}

void MainWindow::CodeAsterOut()
{
    QByteArray byteArray = caProcess->readAllStandardOutput();
    QStringList strLines = QString(byteArray).split("\n");

    foreach (QString line, strLines)
    {
        ui->textBrowserOut->append(line);
    }
}

void MainWindow::on_pushButton_clicked()
{
    QString program = "/home/oogolov/aster/bin/as_run";
    QStringList arguments;
    arguments << "/home/oogolov/GeoFEA/GeoFEA2D/WorkDir/Calc.export";

    connect (caProcess, SIGNAL(readyReadStandardOutput()), this, SLOT(CodeAsterOut()));
    connect (caProcess, SIGNAL(readyReadStandardError()), this, SLOT(CodeAsterError()));

    caProcess->start(program,arguments);
    // works too
    //caProcess->start("/bin/bash", QStringList() << "/home/oogolov/aster/bin/as_run" << "/home/oogolov/GeoFEA/GeoFEA2D/WorkDir/Calc.export");
    caProcess->waitForReadyRead(100);
} 
```

当我运行（构建/运行）我的应用程序时，它运行良好。但是当我调试（调试/开始调试）时，我收到以下错误：

* * *

```
Traceback (most recent call last):
File "<string>", line 1, in <module>

File "/home/oogolov/aster/lib/python2.7/site-packages/asrun/main.py", line 109, in main start()

File "/home/oogolov/aster/lib/python2.7/site-packages/asrun/main.py", line 51, in start run = AsterRun()

File "/home/oogolov/aster/lib/python2.7/site-packages/asrun/run.py", line 186, in __init__ self.LoadExtensions()

File "/home/oogolov/aster/lib/python2.7/site-packages/asrun/run.py", line 297, in LoadExtensions import asrun.maintenance

File "/home/oogolov/aster/lib/python2.7/site-packages/asrun/maintenance.py", line 42, in <module> from asrun.build import AsterBuild

File "/home/oogolov/aster/lib/python2.7/site-packages/asrun/build.py", line 31, in <module> from zipfile import ZipFile

File "/opt/QtSDK/debugger/Desktop/lib/python2.7/zipfile.py", line 6, in <module> import io

File "/opt/QtSDK/debugger/Desktop/lib/python2.7/io.py", line 60, in <module> import _io

ImportError: /opt/QtSDK/debugger/Desktop/lib/python2.7/lib-dynload/_io.so: undefined symbol: PyUnicodeUCS2_FromObject 
```

* * *

你能帮我修复这个“导入，PyUnicodeUCS2_FromObject”状态吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-28T09:33:38.880

[在半官方的 Python FAQ](http://effbot.org/pyfaq/when-importing-module-x-why-do-i-get-undefined-symbol-pyunicodeucs2.htm)中查看这里。

您用于调试的 Python 版本似乎与您用于运行的版本不同。

# c# - RadGrid 中的列顺序

> ID：14317616
> 
> 赞同：0
> 
> 时间：2013-01-14T11:28:45.587
> 
> 标签：c#, asp.net, telerik

我有一个包含 a`MasterTable`和 a的 radgrid `DetailTable`。问题是我无法设置 和 中列的`Mastertable`顺序`DetailTable`。是否可以自己设置和保存订单而不是默认订单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T16:52:12.070

我想你正在使用`AutoGenerateColumns="True"`.

为了指定订单，您必须指定`<Columns>`标签中的每一列并设置`AutoGenerateColumns="False"`。

指定列的顺序与显示这些列的顺序相同。

# c++ - 添加一个struct int和一个普通的int。C++

> ID：14317618
> 
> 赞同：-3
> 
> 时间：2013-01-14T11:28:58.333
> 
> 标签：c++, struct

我想在 c++ 中从具有常规 int 的结构中添加一个 int。有没有简单的方法来做到这一点？我几乎在所有地方都进行了搜索，但是在从二进制文件中读取数据时添加两个 struct int 或将常规 int 和 struct int 一起添加没有任何内容。

这是我目前拥有的简单版本。

```
 struct Add{
    int k;
    };

    int total;

    Add a;

//read in first set of number from binary file
    total += a.k; 
//add up to total, then read in second set of number from binary file. 
```

问题是，当我输出总计时，它只给了我尝试添加 int k 的最后一个数字，而不是总数。

我的实际代码按要求。

```
struct TaskInit{
    int weight;
};

TaskInit t;

    int totalWeight;

    for (int i = 1; i <= noOfRecords; ++i)
    {
        afile.seekg ((i - 1) * sizeof (TaskInit), ios::beg);
        afile.read (reinterpret_cast <char *>(&t), sizeof (t));

         totalWeight +=  t.weight;

    }
   cout << totalWeight; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T11:34:50.237

```
struct Add{
    int k;
    };

    int total = 0; // no indeterminate values. always init locals!

    Add a;
   // open your file here. 
  while (inFile >> a.k) {

//read in first set of number from binary file
//add up to total, then read in second set of number from binary file.
      total += a.k;
  } 
```

# c# - 单个对象作为报表查看器的数据源

> ID：14317619
> 
> 赞同：3
> 
> 时间：2013-01-14T11:29:07.747
> 
> 标签：c#, asp.net, reportviewer, rdlc

我在使用 Report Viewer 和 RDLC 文件时遇到了一些问题。

我以前从未使用过这些中的任何一个，所以我仍在学习。我正在寻找执行以下操作的指南。

我想从单个对象生成报告，即。我有一个对象列表，我想将第一个对象传递给报告，然后显示该对象属性中包含的数据。

所以基本上我有一个完成并保存到我的数据库中的表单，我有一个自定义对象来存储表单中捕获的数据。然后我想点击保存并生成。然后我想从页面上捕获的数据生成报告。

任何建议和指南将不胜感激。

我已经从我的对象生成了一个 xsd 文件，用作数据集，我现在想提供数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:34:54.967

很简单，但是写完所有的段落太长了。

简而言之，您必须：

1.  从报表设计器创建您的 RDLC 文件
2.  将您的 RDLC 文件与您拥有的 DataSet 绑定
3.  （选项）将您的报告与 ReportViewer 绑定以在您的网页上显示它

第三段是可选的，因为您也可以编写代码直接呈现您的报告并将其下载为 pdf 文件（或 excel）。

[该博客的帖子](http://weblogs.asp.net/rajbk/archive/2010/05/09/creating-a-asp-net-report-using-visual-studio-2010-part-2.aspx)解释了很多段落，因此请看一下。还有著名的[gotreportviewer 网站](http://www.gotreportviewer.com/)，但它有点过时了（仍然有很好的例子）

# android - new Sokcet(ip,port) 在 java 项目中工作，但在 android 中失败

> ID：14317622
> 
> 赞同：0
> 
> 时间：2013-01-14T11:29:12.683
> 
> 标签：android, sockets, android-activity

我正在使用套接字开发一个安卓应用程序。但`Socket soc=new Socket(ip,port)`总是给我一个`SocketTimeoutException`。我在java项目中使用socket，没关系。但不是在android项目中。

```
public static void main(String[] args) {
    try{
        Socket soc=new Socket("192.168.177.103",8888);
    }catch(Exception e){
        e.printStackTrace();
    }
} 
```

这没关系，但不是在 android 项目中。为什么？

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_mmmm);

    new Thread(){
        public void run(){
            try{
                Socket soc=new Socket("192.168.177.103",8888);
            }catch(Exception e){
                e.printStackTrace();
            }
        }
    }.start();
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_mmmm, menu);
    return true;
} 
```

有人能告诉我为什么吗？非常感谢。在android中使用socket时的异常详情：

```
java.net.SocketTimeoutException: Connection timed out
at org.apache.harmony.luni.platform.OSNetworkSystem.connect(Native Method)
at dalvik.system.BlockGuard$WrappedNetworkSystem.connect(BlockGuard.java:361)
at org.apache.harmony.luni.net.PlainSocketImpl.connect(PlainSocketImpl.java:204)
at org.apache.harmony.luni.net.PlainSocketImpl.connect(PlainSocketImpl.java:183)
at java.net.Socket.startupSocket(Socket.java:732)
at java.net.Socket.tryAllAddresses(Socket.java:152)
at java.net.Socket.<init>(Socket.java:211)
at java.net.Socket.<init>(Socket.java:178)
at com.example.mmmmm.MMMMActivity$1.run(MMMMActivity.java:26) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T12:22:51.900

您的服务器 192.168.177.103 没有及时响应，或者根本没有响应。也可能是8888端口被其防火墙关闭了。所以这实际上不是Android设备的问题。

如果返回的内容是基于 HTTP 的，请使用连接到同一 LAN 的一些台式 PC 检查服务器是否响应普通浏览器请求。另外，试试

```
 adb shell ping 192.168.177.103 
```

这将允许验证服务器是否可访问。但是，您的服务器上可能会禁用 ping，尤其是当它是 Windows 计算机时。

如果服务器可以从通过有线网络连接的桌面访问，但仍然无法从 Android 访问，那么检查无线路由器的防火墙是如何配置的也可能很好。

# sql-server - 如何使用 SQL 从 Active Directory 中获取多值数据

> ID：14317624
> 
> 赞同：3
> 
> 时间：2013-01-14T11:29:17.887
> 
> 标签：sql-server, active-directory, sql-server-2008-r2

是否可以从 AD 中获取多值属性，例如描述、memberOf。如果我只是通过添加 memberOf 来运行，则会出现错误

```
select * 
FROM OPENQUERY(ADSI,'SELECT initials, samAccountName, displayName, distinguishedName, mail, memberOf FROM ''LDAP://DC=corp, DC=contoso, DC=com'' WHERE objectClass=''Person''') 
```

错误：

> *消息 7346，级别 16，状态 2，第 1
> 行无法从链接服务器“ADSI”的 OLE DB 提供程序“ADSDSOObject”获取行的数据。由于符号不匹配或溢出以外的原因，无法转换数据值。*

这是因为 memberOf 是 Active Directory 中的多值属性。我正在使用 SQL Server 2008 R2

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T11:33:54.250

不，你不能这样做 - 也没有“技巧”或黑客让它工作。

SQL Server 的 ADSI 提供程序相当有限 - 不支持多值属性是这些限制之一。

因此，您需要找到另一种方法来执行此操作，例如通过使用 SQl-CLR 集成并通过 .NET 访问 Active Directory，或者通过例如将您需要的数据公开为您从 SQL Server 使用的 Web 服务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-31T15:11:59.450

虽然您不能使用 ADSI 返回 memberof，但您可以查询 memberof，因此如果您有一个要检查的组，您可以执行以下操作，其中 extenstionAttribute3 是员工 ID：

```
SELECT displayName
FROM OPENQUERY(ADSI,
'SELECT displayName
FROM ''LDAP://DC=company,DC=com''
WHERE memberof = ''CN=staff,OU=SharepointGroups,DC=company,DC=com''
AND extensionAttribute3 = ''12345678''
') 
```

如果返回值不为空，那么您可以假设用户是该组的一部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-18T19:14:29.657

这是我让它工作的技巧/技巧：

```
exec xp_cmdshell 'powershell -command "get-aduser -filter * -properties SamAccountName, <MultiValue> | Select samaccountname, <MultiValue>"' 
```

更改`<MultiValue>`为您尝试提取的任何属性。它将在 SQL 中以逗号分隔的形式输出值。根据需要更改 PowerShell cmdlet。您所要做的就是收集输出，对其进行格式化，然后将其加入您的其他数据中。此外，请确保您的服务器具有 AD PowerShell 模块并且您已在 SQL 中启用 xp_cmdshell。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-07T17:58:59.857

刚刚写了一个 sql 脚本，在我们公司的 Intranet 目录中包含描述（多值）字段。我所做的是使用 powershell 分隔导出 csv，然后将该信息批量插入到表中。对我来说最简单的解决方案，因为我们只有大约 650 名员工（记录）。

```
exec xp_cmdshell 'powershell.exe -command "get-aduser -filter * -properties SamAccountName, Description,GivenName,sn,title,telephoneNumber,mobile,mail,physicalDeliveryOfficeName| Select SamAccountName, Description,GivenName,sn,title,telephoneNumber,mobile,mail,physicalDeliveryOfficeName| export-csv -encoding unicode -delimiter "`t" -path C:\SQLJobs\addir.csv -notype"'

Go

CREATE TABLE dbLiftowDir.dbo.ADDir
(
[SamAccountName] NVARCHAR(4000),
[Description] NVARCHAR(4000),
[GivenName] NVARCHAR(4000),
[sn] NVARCHAR(4000),
[title] NVARCHAR(4000)COLLATE French_CI_AS NOT NULL,
[telephoneNumber] NVARCHAR(4000),
[mobile] NVARCHAR(4000),
[mail] NVARCHAR(4000),
[physicalDeliveryOfficeName] NVARCHAR(4000),
)

BULK
INSERT dbLiftowDir.dbo.ADDir
FROM 'C:\SQLJobs\addir.csv'
WITH
(
 CODEPAGE = 'ACP',
   DATAFILETYPE ='char',
   FIELDTERMINATOR = '\t',
   ROWTERMINATOR = '\n',
   FIRSTROW = 2 
```

我做的其他事情是使用设置列替换值从字段值中删除“，并删除非人工帐户的行。因为我发现在 SQL 中执行它比将代码传递到 powershell 更容易。

# php - 带有 jQ uery 验证插件的验证码

> ID：14317626
> 
> 赞同：0
> 
> 时间：2013-01-14T11:29:34.497
> 
> 标签：php, jquery, jquery-validate, captcha

我正在使用著名的[jQuery Validation 插件](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)，我想实现验证码控件。在他们的演示部分的[页面上有](http://jquery.bassistance.de/validate/demo/)[，](http://jquery.bassistance.de/validate/demo/captcha/)但它似乎有一个问题：当您单击图像刷新时，它不会刷新！这是一个著名的插件，所以我没有发布代码，因为有很多 php 文件，也许你们中的许多人已经知道解决方案。如果需要，我会尝试发布它们。谢谢

编辑

**// 指数**

```
<?php

// Make the page validate
ini_set('session.use_trans_sid', '0');

// Include the random string file
require 'js/captcha/rand.php';

// Begin the session
session_start();

// Set the session contents
$_SESSION['captcha_id'] = $str;

?>
<form id="form">
             <div id="captchaimage">
                <a href="" id="refreshimg" title="Click to refresh image">
                    <img src="js/captcha/images/image.php?<?php echo time(); ?>" width="132" height="46" alt="Captcha image" />
                </a>
             </div>
             <label for="captcha">insert captcha:</label>
             <input type="text" maxlength="6" name="captcha" id="captcha" /> 
```

**// newsession.php**

```
<?php

// Include the random string file
require 'js/captcha/rand.php';

// Begin a new session
session_start();

// Set the session contents
$_SESSION['captcha_id'] = $str;

?> 
```

**// 进程.php**

```
<?php

// Begin the session
session_start();

// To avoid case conflicts, make the input uppercase and check against the session value
// If it's correct, echo '1' as a string
if(strtoupper($_GET['captcha']) == $_SESSION['captcha_id'])
    echo 'true';
// Else echo '0' as a string
else
    echo 'false';

?> 
```

**// rand.php**

```
<?php

// Create a random string, leaving out 'o' to avoid confusion with '0'
$char = strtoupper(substr(str_shuffle('abcdefghjkmnpqrstuvwxyz'), 0, 4));

// Concatenate the random string onto the random numbers
// The font 'Anorexia' doesn't have a character for '8', so the numbers will only go up to 7
// '0' is left out to avoid confusion with 'O'
$str = rand(1, 7) . rand(1, 7) . $char;

?> 
```

**//验证**

```
$("#form").validate({  
    rules: {

        'captcha':{
            required: true,
            remote: "js/captcha/process.php"
        }
    },

    messages: {
        'captcha': "error"  
    },

    onkeyup: false
}); 
```

**// 脚本刷新验证码**

```
$(function(){
    $("#refreshimg").click(function(){
        $.post('js/captcha/newsession.php');
        $("#captchaimage").load('js/captcha/image_req.php');
        return false;
    });
}); 
```

**// image_req.php**

```
<?php

// Echo the image - timestamp appended to prevent caching
echo '<a href="" onclick="refreshimg(); return false;" title="Click to refresh image">
        <img src="js/captcha/images/image.php?' . time() . '" width="132" height="46" alt="Captcha image" />
      </a>';

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T16:22:54.240

```
<html>
<script src="http://code.jquery.com/jquery-latest.js"></script>
<style>
.good {color: green;}
.bad {color: red;}
#captcha {
-moz-user-select: none;
-khtml-user-select: none;
-webkit-user-select: none;
user-select: none;
}
</style>
<?php
function background($length = 6) {
$characters = "ABCDEF0123456789";
$string = "#";
for ($p = 0; $p < $length; $p++) {
$string .= $characters[mt_rand(0, strlen($characters) - 1)];}
return $string;
}
$f = background();
function signs($length = 6) {
$characters = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnoprstuvwxyz";
$string = "";
for ($p = 0; $p < $length; $p++) {
$string .= $characters[mt_rand(0, strlen($characters) - 1)];}
return $string;
}
$a = signs();
?>
<script>
$(function() {       //run when the document's ready, elements are loaded
$("#refresh").click(function() { 
$("#captcha").load(location.href + " #captcha");               
});
});   
</script>
<script>
$(function() {  
$("#send").click(function(evt) {
if ($('#check').val() === $('#verify').val()) {
$("#result").html("<h3 class='good'>Correct</h3>");
evt.preventDefault();
} else {
$("#result").html("<h3 class='bad'>Incorrect</h3>");
evt.preventDefault();
}
});
});   
</script>
<head>
<h1>Captcha all in one</h1>
<hr />
</head>
<body>
<div id="captcha" style="height: 50px; width: 125px; background-color: <?php echo        $f;   ?>"><font face="OCRB" style="font-size: xx-large;" color="<?php echo $a;  ?>">
<p id="secimage"><?php echo $a; ?></p></font><input type="text" id="check" value="<?php echo $a; ?>" style="display: none;"/></div>
<button id="refresh">&uarr;&darr;</button>
<input id="verify" type="text" placeholder="Enter code" />
<button id="send">Check</button>
<div id="result"></div>
</body>
</html> 
```

# mysql - mysql中的行到列转换

> ID：14317627
> 
> 赞同：3
> 
> 时间：2013-01-14T11:29:34.967
> 
> 标签：mysql, pivot

下面是我的表结构，我想将其转换为另一种格式（从行到列类型）我已经尝试了很多但我无法这样做。

```
StudentID | Mark | Subject
-------------------------
10        |46    |Java
--------------------------
10        |65    |C#
--------------------------
10        |79    |JavaScript
---------------------------
11        |66    |Java
--------------------------
11        |85    |C#
--------------------------
11        |99    |JavaScript
-------------------------- 
```

O/P 应该是：

```
StudentID | Java | C# | JavaScript
---------------------------------
10        |  46  | 65 |   79
---------------------------------
11        |  66  | 85 |  99
------------------------------- 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T11:35:10.690

这种类型的数据转换称为数据*透视*。MySQL 没有数据透视函数，因此您需要使用带有`CASE`表达式的聚合函数来转换数据。

如果您提前知道要转换的值，那么您可以像这样对它们进行硬编码：

```
select studentid,
  sum(case when subject = 'Java' then mark else 0 end) Java,
  sum(case when subject = 'C#' then mark else 0 end) `C#`,
  sum(case when subject = 'JavaScript' then mark else 0 end) JavaScript
from yourtable
group by studentid 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/02061/1)。

如果主题的值是未知的或灵活的，那么您可能希望使用准备好的语句来生成动态 sql：

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'sum(case when subject = ''',
      subject,
      ''' then mark else 0 end) AS `',
      subject, '`'
    )
  ) INTO @sql
FROM  yourtable;

SET @sql = CONCAT('SELECT studentid, ', @sql, ' 
                  from yourtable
                  group by studentid');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/02061/5)。

两个查询的结果是：

```
| STUDENTID | JAVA | C# | JAVASCRIPT |
--------------------------------------
|        10 |   46 | 65 |         79 |
|        11 |   66 | 85 |         99 | 
```

# javascript - 如何在另一个变量中的函数名称中添加动态 javascript 变量的值

> ID：14317628
> 
> 赞同：0
> 
> 时间：2013-01-14T11:29:39.960
> 
> 标签：javascript, html

我不知道如何在`<a href>`.

例如：

```
var x =  document.getElementById('example').value // value is 6 now
<a href="javascript:function6();">+</a> 
```

它`document.write`应该看起来像这样：

```
document.write('<a href="javascript:function"' + x + '();">Something</a>' 
```

问题是，我必须使用 inner.html。

我有这样的代码：

```
<script type="text/javascript">

   function count(){ 
       var x = 1;
       document.getElementById('count').value = ++x;  
       var z = x + 4;
   }

   var ex = ("<a class=\"button6\" href=\"javascript:anotherfunction\" + z + '()'>Anything else<\/a>");

   function new(){
       document.getElementById("add").innerHTML += ex
   }
</script>
<table id="add">
  <tr>
    <td>
      <a class="button6" href="javascript:new();count();">+</a>
    </td>
  </tr>
</table> 
```

“+”-链接应该在 href 的函数名称中添加另一个带有计数器值的链接，如下所示：

```
<a class="button6" href="javascript:anotherfunction6();">+</a> 
```

代码中的第一个“+”链接应该在 href 处添加第二个链接，其中包含函数名称中的计数器值，因此单击“+”链接两次后添加的代码应该是这样的：

```
<a class="button6" href="javascript:anotherfunction6();">+</a>
<a class="button6" href="javascript:anotherfunction7();">+</a>
... 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T11:55:13.910

To make your code work, you should fix:

1) Escape sequence.

```
`var ex = '<a class="button6" href="javascript:anotherfunction' + z + "()\">Anything else<\/a>";` 
```

2) Function name. `new` is a keyword and could not be used as a function name.

3) Variable scopes. Variable `z` should be visible to both functions and variable `ex` should be set every time you are creating new reference.

After all fixes the code looks like:

```
var z = 0;
function count() { 
    var x = 1;
    document.getElementById('count').value = ++x;  
    z = x + 4;
}

function createButton() {
    var ex = '<a class="button6" href="javascript:anotherfunction' + z + "()\">Anything else<\/a>";
    document.getElementById("add").innerHTML += ex
}` 
```

Also, you should fix your HTML code:

```
<a class="button6" href="javascript:createButton();count();">+</a> 
```

P.S. Using javascript in <a> is a bad code style. Generating a bunch of functions like `anotherfunctionN` is also is not a good idea.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T11:33:23.257

`\" + z + '()`应该是`" + z + "'()`。但是，您的代码还有其他问题，因此“不起作用”可能有几个原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T11:35:20.347

查看您的代码..我看到您没有正确地转义您的代码..

尝试这个

```
var ex = ("<a class=\"button6\" href=\"javascript:anotherfunction\"" + z + "'()'>Anything else<\/a>"); 
```

# java - 比较java中的两个列表

> ID：14317629
> 
> 赞同：0
> 
> 时间：2013-01-14T11:29:49.750
> 
> 标签：java

在一个应用程序中，我们有一个以 ( board_id + invoice_no + item_id ) 作为键的登机表。与 Boarding 具有相同表结构的 Boarding_tmp 表。我们正在从 csv 文件（管道分隔符列值）加载 Boarding_tmp

我们有一个包含所有列的 Boarding Java bean。假设我们有两个列表 -

```
1\. boardingList with all active records in Boarding table
2\. boardingTmpList with all records in Boarding_Tmp table 
```

我需要比较这两个列表来实现以下场景 -

我们需要将 Boarding 表与 Boarding_tmp 表进行比较，并且需要执行以下操作（没有 SQL 连接。我们必须在对象级别执行此操作） -

```
a. All records which are in Boarding_tmp but not in Boarding table should be inserted in Boarding table (means they are new records)
b. All records which are in Boarding but not in Boarding_tmp table should be mark as deactivated in Boarding table (we have a active column in Boarding table) 
```

在 Boarding.java 中 -

```
public class Boarding implements Comparable {

    private String bordingId;
    private String itemId;
    private String invoiceNo;
    private String itemName;
    private long qty;
    private double price;

    /**
     * @return the bordingId
     */
    public String getBordingId() {
        return bordingId;
    }

    /**
     * @param bordingId
     *            the bordingId to set
     */
    public void setBordingId(String bordingId) {
        this.bordingId = bordingId;
    }

    /**
     * @return the itemId
     */
    public String getItemId() {
        return itemId;
    }

    /**
     * @param itemId
     *            the itemId to set
     */
    public void setItemId(String itemId) {
        this.itemId = itemId;
    }

    /**
     * @return the invoiceNo
     */
    public String getInvoiceNo() {
        return invoiceNo;
    }

    /**
     * @param invoiceNo
     *            the invoiceNo to set
     */
    public void setInvoiceNo(String invoiceNo) {
        this.invoiceNo = invoiceNo;
    }

    /**
     * @return the itemName
     */
    public String getItemName() {
        return itemName;
    }

    /**
     * @param itemName
     *            the itemName to set
     */
    public void setItemName(String itemName) {
        this.itemName = itemName;
    }

    /**
     * @return the qty
     */
    public long getQty() {
        return qty;
    }

    /**
     * @param qty
     *            the qty to set
     */
    public void setQty(long qty) {
        this.qty = qty;
    }

    /**
     * @return the price
     */
    public double getPrice() {
        return price;
    }

    /**
     * @param price
     *            the price to set
     */
    public void setPrice(double price) {
        this.price = price;
    }

    /*
     * (non-Javadoc)
     * 
     * @see java.lang.Object#hashCode()
     */
    @Override
    public int hashCode() {
        final int prime = 31;
        int result = 1;
        result = prime * result
                + ((bordingId == null) ? 0 : bordingId.hashCode());
        result = prime * result
                + ((invoiceNo == null) ? 0 : invoiceNo.hashCode());
        result = prime * result + ((itemId == null) ? 0 : itemId.hashCode());
        return result;
    }

    @Override
    public int compareTo(Object o) {
        if (this == o) {
            return 0;
        }
        if (o == null) {
            return 1;
        }
        if (getClass() != o.getClass()) {
            return 1;
        }
        Boarding other = (Boarding) o;
        if (bordingId == null) {
            if (other.bordingId != null) {
                return 1;
            }
        } else if (!bordingId.equals(other.bordingId)) {
            return 1;
        }
        if (invoiceNo == null) {
            if (other.invoiceNo != null) {
                return 1;
            }
        } else if (!invoiceNo.equals(other.invoiceNo)) {
            return 1;
        }
        if (itemId == null) {
            if (other.itemId != null) {
                return 1;
            }
        } else if (!itemId.equals(other.itemId)) {
            return 1;
        }

        return 0;
    }

} 
```

请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T11:36:29.517

您可以尝试[Collections Util](http://commons.apache.org/collections/apidocs/org/apache/commons/collections/CollectionUtils.html)库。他们为您描述的场景提供了非常有用的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T11:35:47.917

您应该能够执行以下操作：

```
List<Boarding> insertBoarding = new ArrayList(boardingTmpList);
insertBoarding.removeAll(boardingList);
// insert all elements in insertBoarding to the table
List<Boarding> deactivateBoarding = new ArrayList(boardingList);
deactivateBoarding.removeAll(boardingTmpList);
// deactivate all elements in deactivateBoarding in the table 
```

假设您的平等测试有效，这应该会产生正确的结果。

**注意：**您必须重写该`equals`方法才能使其正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T11:37:29.893

这很容易通过使用`List#retainAll`方法来实现。

javadoc在[这里](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/List.html#retainAll%28java.util.Collection%29)

# android - Android Achartengine：如何将 x 轴上的日期标签更改为 ProjectStatusChart 中的字符串

> ID：14317630
> 
> 赞同：2
> 
> 时间：2013-01-14T11:29:50.900
> 
> 标签：android, achartengine

我正在使用 AChartEngine 库开发一个 android 应用程序，并且我正在使用 PojectStatusChart，但我遇到了 x 轴标签的问题。它设置为日期，我想将其更改为字符串，但我不知道如何

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T19:33:01.037

这`ProjectStatusChart`是一个时间表，因此它具有 X 轴标签作为日期。您可以查看演示包中的另一个示例，也可以将其从时间图修改为折线图。

# oracle - 如何在 Oracle 中导出视图

> ID：14317631
> 
> 赞同：1
> 
> 时间：2013-01-14T11:29:51.297
> 
> 标签：oracle, oracle10g, oracle11g

如何使用导出命令仅导出 oracle 中的视图？

我可以使用此命令导出整个数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T08:05:00.413

使用 EXPDP，即 EXPORT DATA PUMP，您只能导出视图：

```
expdp user/pass DUMPFILE=file.dmp DIRECTORY=ext_tab_dir SCHEMAS=test INCLUDE=VIEW 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T13:48:42.207

这是不可能的。视图包含在用户级或完整导出中，但无法仅导出视图。

如果您只需要视图定义，但不一定是导出转储格式，您可以例如通过`dbms_metadata.get_ddl`. 但是，这不包括赠款。

# java - 从抽象类调用未声明的超级方法时获取当前对象属性

> ID：14317636
> 
> 赞同：1
> 
> 时间：2013-01-14T11:30:02.367
> 
> 标签：java, inheritance

可能是一个非常基本的java问题。

我有一个抽象类，简化它：

```
public abstract class A{
  private String value = "A" ; // I want it undeclared, but set it for testing purpouse

  public String getValue(){
    return value ;
  }
} 
```

然后我有一个扩展它的类：

```
public abstract class B{
  private String value = "B" ;
} 
```

所以我遇到的问题是，当通过类 A 创建 B 的实例并调用 getValue() 时，它总是返回“A”：

```
A b = new B();
b.getValue(); // returns "A" 
```

如何让 B 使用他自己的属性调用超级方法而无需复制代码？A 它目前太长了，它被扩展到许多不同的类，它们的不同之处仅在于它的属性值，并且它们都使用与超类相同的方法。

谢谢！

编辑：

对不起，我没有那么具体。我有很多属性，以及一些处理这些属性的方法。扩展类更改了这些属性，但我想将超级方法与扩展类实例对象一起使用，而不必两次声明它们。如果有帮助，我正在使用 servlet 上下文属性。

配置文件

```
public abstract class Config {
    private String someValue1 ;
    ...
    private String someValuen ;

    public void export(ServletContext cxt){
        cxt.setAttribute("someValue1", someValue1);
        ...
        cxt.setAttribute("someValuen", someValuen);
    }
} 
```

SomeConfig.java

```
public class SomeConfig {
    private String someValue1 = "something" ;
    ...
    private String someValuen = "something else" ;
} 
```

SomeServlet.java

```
ServletContext cxt = getServletContext() ;
Config config = new SomeConfig();
config.export(cxt); 
```

为了清楚起见，属性都有不同的名称。我将它们从 jsp 中用作： ${someValuen}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T11:34:40.773

它不起作用的原因是只能覆盖方法 - 变量成员被隐藏（如果您`value`从 B 类打印，它将是`"B"`）。

对于该特定示例，我将使用专用的构造函数（我已将其设置为 protected 以防止客户端类访问它）：

```
public abstract class A {
    private final String value;

    public A() { //for internal / testing use only
        value = "A";
    }

    protected A(String value) {
        this.value = value;
    }

    public String getValue(){
        return value ;
    }
} 
```

然后 B 可以简单地调用相关的构造函数：

```
public class B extends A {
    public B() {
        super("B");
    }
} 
```

**编辑**

示例`ConfigHolder`：

```
public class ConfigHolder {

    String value1;
    String value2;
    String value3;

    public ConfigHolder value1(String value1) {
        this.value1 = value1;
        return this;
    }
    //same for other variables
} 
```

然后在A类：

```
public abstract class A {
    private final ConfigHolder config;

    public A() { 
        this.config = new ConfigHolder()
                 .value1("value1")
                 .value2("value2");
    }

    protected A(ConfigHolder config) { 
        this.config = config;
    }

    public void export(ServletContext cxt){
        cxt.setAttribute("someValue1", builder.value1);
        ...
        cxt.setAttribute("someValuen", builder.valuen);
    }
} 
```

在 B 中：

```
public class B extends A {
    public B() {
        super(new ConfigBuilder()
                   .value1("value1InB")
                   .value2("value2InB"));
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T12:08:58.660

为此：`A b = new B();`B 必须是 A 的子类

此外，抽象类不能被实例化，即不能创建抽象类对象。如果您尝试这样做，编译器将产生错误。

```
public abstract class A{
  private String value = "A" ;

  public String getValue(){
    return value ;
  }
}

public class B extends A{
    private String value ;
    public B(){
        value = "B";
    }
} 
```

现在你可以做`B notAbstractClass = new B();`

并且在这样做`notAbstractClass.getValue();`时必须返回“B”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T12:21:33.803

我只是想出了一个简单的方法来使用构造函数并将超类属性更改为受保护（感谢@assylias 回答）：Config.java

```
public abstract class Config {
    protected String someValue1 ;
    ...
    protected String someValuen ;

    public void export(ServletContext cxt){
        cxt.setAttribute("someValue1", someValue1);
        ...
        cxt.setAttribute("someValuen", someValuen);
    }
} 
```

SomeConfig.java

```
public class SomeConfig {
  public SomeConfig(){
    someValue1 = "something";
    ...
    someValuen = "something else";
  }
} 
```

# java - 从 Service 中的数据库获取数据

> ID：14317637
> 
> 赞同：0
> 
> 时间：2013-01-14T11:30:02.507
> 
> 标签：java, android, sqlite, oop, mobile

我已经尝试了好几天，但似乎我找不到我试图从服务中的数据库中获取价值的解决方案，但我的应用程序只是崩溃了。但是相同的代码在活动中有效，但在后台服务中无效。

这是代码

```
 public class Services1 extends Service {
    Context cont = this;
@Override
public IBinder onBind(Intent arg0) {
    // TODO Auto-generated method stub
    return null;
}

public void onCreates() {
    // TODO Auto-generated method stub

    String go = "running";

    Toast.makeText(cont, go, Toast.LENGTH_LONG).show();
    super.onCreate();
}
@Override
public void onDestroy() {
    // TODO Auto-generated method stub
    super.onDestroy();
}

    public void onStartCommand(Intent intent, String Number, String Body ) {
            // TODO Auto-generated method stub

        SmsManager  smsManager = SmsManager.getDefault();

         String phoneNo = Number;
            String sms = Body;

        Data obj = new Data(this);

    //  String dar = obj.Data1("1").toString();

        try{
            SQLiteDatabase db = openOrCreateDatabase("FinalDB", MODE_PRIVATE, null);

            Cursor c = db.rawQuery("SELECT REPLAYS FROM Rtm WHERE ID = 1", null);
            c.moveToFirst();
            String dar = c.getString(c.getColumnIndex("REPLAYS"));

                String api = "Yeap service started";

                String rep = sms.replace(phoneNo+" :", "");
                smsManager.sendTextMessage(phoneNo, null, dar, null, null);

        }catch (Exception e)
        {
            System.out.println("Some Problem Here");
            e.printStackTrace();
        }

        }

} 
```

我没有语法错误。但是当我在没有数据库的情况下调用 onstartcommand 它工作正常但是当使用数据库时它不起作用应用程序崩溃我也尝试过

```
 Data obj = new Data(this);

            String dar = obj.Data1("1").toString(); // getting value from my SQLitehelper class it works in activity but not in service. 
```

所以我的问题是在服务中检索数据库的错误方法或者是否有更好的方法。

我的 sqlitehelper 类

```
public class Data  extends SQLiteOpenHelper {
 static String Database_Name = "FinalDB";
static int Database_Version = 3;
public Data(Context context) {
    super(context, Database_Name, null, Database_Version);
    // TODO Auto-generated constructor stub
}

@Override
public void onCreate(SQLiteDatabase db) {
    // TODO Auto-generated method stub

}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    // TODO Auto-generated method stub

}

public String Data1(String id)
{

    SQLiteDatabase db = getReadableDatabase();

    Cursor c = db.rawQuery("SELECT REPLAYS FROM Rtm WHERE ID = +"+id, null);
    c.moveToFirst();
    String repl = c.getString(c.getColumnIndex("REPLAYS"));

    return repl;
} 
```

我的主播课

```
 public class BroadCastRecivers extends BroadcastReceiver{

static String from;
static String body;

@Override
public void onReceive(Context cont, Intent intent) {
    // TODO Auto-generated method 

//  SmsManager  smsManager = SmsManager.getDefault();

        // TODO Auto-generated method s
          //---get the SMS message passed in---
        Bundle bundle = intent.getExtras();        
        SmsMessage[] msgs = null;
        String str = "";            
        if (bundle != null)
        {
            //---retrieve the SMS message received---
            Object[] pdus = (Object[]) bundle.get("pdus");
            msgs = new SmsMessage[pdus.length];            
            for (int i=0; i<msgs.length; i++){
                msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);                
           from  =   str  =  msgs[i].getOriginatingAddress();              
                str += " :";
           body =  str += msgs[i].getMessageBody().toString();
                str += "\n";

            }
            //---display the new SMS message---
        //    Toast.makeText(cont, str, Toast.LENGTH_LONG).show();

            Services1 obj = new Services1();

            obj.onStartCommand(intent, from, body);

  }
}

   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T11:33:53.563

将您的选择查询更改为：

```
Cursor c = db.rawQuery("SELECT REPLAYS FROM Rtm WHERE ID = "+id, null); 
```

因为目前您`+`在 where 子句中使用 ID 传递 (PLUS)

并使用以下方式启动您的服务，而不是手动`startService`调用：`onStartCommand`

```
Intent intent=new Intent(cont,Services1.class);
intent.putExtra("from",from);
intent.putExtra("body",body);
cont.startService(intent); 
```

在Services1`from`中使用`body``onStartCommand``intent.getStringExtra`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T11:39:28.223

There is a typo in your service creation. Change

```
 public void onCreates() { 
```

with

```
 @Override
    public void onCreate() { 
```

# ios - 将 NSNotification 发布到新的 ViewController

> ID：14317639
> 
> 赞同：1
> 
> 时间：2013-01-14T11:30:07.533
> 
> 标签：ios, uitabbarcontroller, push-notification, nsnotificationcenter, nsnotification

我有带有 5 个选项卡的选项卡式应用程序。

应用程序在索引为 0 的选项卡上启动

当我的应用程序收到推送通知时，我想在索引为 1 的选项卡中推送新的视图控制器。

我的代码：

应用委托

```
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)pushData {
    UITabBarController *tabb = (UITabBarController *)self.window.rootViewController;
    tabb.selectedIndex = 1;
    [[NSNotificationCenter defaultCenter] postNotificationName:@"pushImage" object:@"this is my item id from pushData"];
} 
```

ProfileViewController（标签索引 1）

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(pushImage:) name:@"pushImage" object:nil];
}

-(void) pushImage: (NSNotification*) notification {
    NSString* text = notification.object;
    NSLog(@"My id from pushData: %@", text);
} 
```

我的问题是 ProfileViewController 无法响应通知，因为初始化尚未完成，当 AppDelegate 触发通知时。

如果手动打开选项卡 1 并再次切换回选项卡 0，然后发布通知，它会完美响应。所以我需要在标签 1 加载后发布通知，我该如何处理？

我在 TabBarApplication 中从 AppDelegate 推送新 VC 的解决方案

```
 - (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)pushData {    
            // ...... 

            if([[pushData objectForKey:@"type"] integerValue] == 0){
                // ....
            }
            else if([[pushData objectForKey:@"type"] integerValue] == 2){
                [self handleLikePush:pushData applicationState:application.applicationState];
            }
}

-(void)handleLikePush:(NSDictionary *)pushData applicationState:(UIApplicationState) applicationState{

    //..

    DetailImageViewController *detailImage = [[DetailImageViewController alloc] initWithImageId:imageId];
        [self pushViewControllerToCurrentTab:detailImage];
    }

}

- (void)pushViewControllerToCurrentTab:(UIViewController *)vc{

    UITabBarController *tabBarController = (UITabBarController *)self.window.rootViewController;
    UINavigationController *selectedTabNC = (UINavigationController *)tabBarController.selectedViewController;

    if (selectedTabNC != nil) {
        [selectedTabNC pushViewController:vc animated:YES];
    }
    else{
        NSLog(@"NavigationController not found");
    }    
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T11:34:11.240

您可以使用

`addObserver:instanceOfOtherClass`

代替`addObserver:self`

在 appDelegate 添加这些行：

```
ProfileViewController *pvController=[ProfileViewController new];
[[NSNotificationCenter defaultCenter] addObserver:pvController selector:@selector(pushImage:) name:@"pushImage" object:nil]; 
```

对这个方法

```
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)pushData {
      UITabBarController *tabb = (UITabBarController *)self.window.rootViewController;
      tabb.selectedIndex = 1;
      [[NSNotificationCenter defaultCenter] postNotificationName:@"pushImage" object:@"this is my item id from pushData"];

     //****   add here

     ProfileViewController *pvController=[ProfileViewController new];
    //[[NSNotificationCenter defaultCenter] addObserver:pvController selector:@selector(pushImage:) name:@"pushImage" object:nil];

    [[NSNotificationCenter defaultCenter] postNotificationName:@"pushIamge" object:pvController];// userInfo:[NSDictionary dictionaryWithObject:@"1,2,3,4,5" forKey:@"categories_ids"]]; 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T11:38:51.220

您是否尝试过将该`addObserver:`方法添加到视图控制器的`init`方法中？

# objective-c - 为 b2Body 动态设置 isSensor

> ID：14317642
> 
> 赞同：1
> 
> 时间：2013-01-14T11:30:19.660
> 
> 标签：objective-c, cocos2d-iphone, box2d, fixture

我只想在某个工作流程时刻为我的 b2Body 更改 isSensor。
我所做的：

```
b2Fixture *fixture = currentBody->GetFixtureList();
if (...)
{
   fixture->SetSensor(false);
}else
{
   fixture->SetSensor(true);
} 
```

但我没有找到任何方法将这个夹具设置为身体背部。请建议这样做的方法。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T12:18:22.517

这会将身体上的所有固定装置设置为传感器。. 完成此操作后，您必须将其提交回主体，主体已经具有对固定装置的引用。

```
-(void) setIsSensor:(bool)isSensor
{
    for (b2Fixture *fixture = body->GetFixtureList(); fixture; fixture = fixture->GetNext())
    {
        fixture->SetSensor(isSensor);
    }
} 
```

# html - 如何删除父级包含一些填充的子级的边距？

> ID：14317647
> 
> 赞同：1
> 
> 时间：2013-01-14T11:30:45.757
> 
> 标签：html, css

假设我有，

```
<div style="padding: 15px; width: 100%;">
   <div style="margin: -15px;; width: 100%;">
       <img src="http://imageshack.us/scaled/landing/51/tigerso.jpg" alt="" style="width: 100%;">
   </div>
</div> 
```

父 div 包含 15px 填充，并且 - 子 div 想通过使用边距删除此填充，但它不起作用。看到这个小提琴。它总是向我展示一个水平滚动条。 [http://jsfiddle.net/2GJnG/](http://jsfiddle.net/2GJnG/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T11:34:33.873

删除`width`两个`div`元素的属性：

```
<div style="padding: 15px;">
    <div style="margin: -15px;">
        <img src="http://imageshack.us/scaled/landing/51/tigerso.jpg" alt="" style="width: 100%;">
    </div>
</div> 
```

在此处查看演示 > [http://jsfiddle.net/2GJnG/5/](http://jsfiddle.net/2GJnG/5/)

# windows - 如何为 xcopy 创建与文件名扩展名匹配的排除文件条目？

> ID：14317648
> 
> 赞同：0
> 
> 时间：2013-01-14T11:30:48.347
> 
> 标签：windows, batch-file, command, dos, xcopy

考虑以下批处理语句：

```
for / %f in (C:\temp\cool\*) do if not "%~nf" == "update" 
    xcopy /r /Y /S /D:01-01-2001 /EXCLUDE:excl.txt %f c:\temp\%~nf\ 
```

它使用带有排除列表的文件。这`excl.txt`看起来像：

> .config
> .log

它应该跳过所有文件日志和配置文件。不幸的是，它也跳过了这个文件：

> cfw.loginpopup.js

我该如何解决这个问题？我只喜欢排除*以*`.log`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T12:17:11.817

也许我想得太简单了，但你可以试试这个排除列表：

```
*.config 
*.log 
```

# android - Android：使用 Camera API 拍摄缩略图

> ID：14317650
> 
> 赞同：1
> 
> 时间：2013-01-14T11:31:05.397
> 
> 标签：android, camera

是否可以使用相机拍摄缩略图？我看到了 getJpegThumbnailQuality 之类的方法，但我没有看到任何用于获取实际缩略图的方法。我必须使用 Camera API 而不是 Intent 来执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T11:38:48.397

无论如何，Camera 本身不会直接生成缩略图大小的 Bitmap。大多数设备的相机图片分辨率有限。但是，您可以 从提供给您的图片相机[创建另一个按比例缩小的位图。](https://stackoverflow.com/a/5934983/1531054)

# jquery - 如何将 $.post 函数分配给引用文件的特定部分

> ID：14317661
> 
> 赞同：0
> 
> 时间：2013-01-14T11:32:06.563
> 
> 标签：jquery, ajax, post

```
function ajaxCheck(){ 
    var inpUs = $("#user").val(); 
    $.post(
        "./inpCheck.php",
        { user : inpUs }, 
        function(data) { // here is the point
            if (data.length > 0) { 
                $("#spanUser").html(data); 
            } 
        }
    ) 
} 
```

这会检查用户是否已经存在，并且它可以工作，但是`$.post("./inpCheck.php",`我不想引用该文件的特定部分（函数）？
因为，在同一个文件上，我想为另一个输入编写代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T11:37:02.937

那是不可能的，你可以做的是`switch`在php中使用，比如

js部分

```
$.post("./inpCheck.php", {user : inpUs, act_name : "some_function"}, function(data){
.. 
```

并在**inpCheck.php**

```
$action = $_POST['act_name'];
switch($action) {
  case "some_function":
     call_some_function();
  break;
}
//somewhere in same page
function call_some_function() {
  //your code here
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T11:35:41.690

据我所知，您不能直接 POST / GET 到 .php 文件中的特定函数。相反，你需要设置一个发送到 php 文件的方法，然后在 php 文件本身中，做一些逻辑来决定你想要哪个函数。这可以通过使用 POST 发送一些数据来完成，可能是隐藏字段或其他什么，并使用它来决定运行哪个函数。比如在php文件中；

```
if($_POST['someValue'] == "functionOne")
  {
     FunctionOne();
  }
else
  {
     FunctionTwo();
  } 
```

编辑 1：有关稍微相关的信息，请参见此处：[将表单操作设置为外部 php 文件中的函数](https://stackoverflow.com/questions/14096733/setting-form-action-as-function-in-external-php-file)

# batch-file - 批量从字符串中获取路径

> ID：14317662
> 
> 赞同：0
> 
> 时间：2013-01-14T11:32:24.167
> 
> 标签：batch-file

我希望通过以下方式批量解析字符串：

假设我将这条路径作为批量字符串：

> C:\Program Files\Microsoft\Test

我希望从这个字符串中删除一个给定的字符串。例如，如果我用以下方式调用它：

> C:\程序文件\微软

我去拿：

> 测试

如果我用以下方式调用它：

> C:\程序文件

我去拿：

> 微软\测试

可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T13:10:19.647

像这样的东西？

```
set p=C:\Program Files\Microsoft\Test
echo %p:C:\Program Files\Microsoft\=%
echo %p:C:\Program Files\=% 
```

# asp.net - Gridview 中的 html 单选按钮。启用/禁用列的值

> ID：14317667
> 
> 赞同：0
> 
> 时间：2013-01-14T11:32:50.553
> 
> 标签：asp.net, gridview, radio-button

我有一个`gridview`使用 HTML 单选按钮来选择特定行的方法。现在，仅当列中有值时才需要启用这些单选按钮`MAP_ID`。

下面是我的gridview列：

```
<asp:BoundField DataField="MAp_ID" HeaderText="MAP_ID" ItemStyle-Width="10%"> </asp:BoundField >
<asp:TemplateField HeaderText="Select" ItemStyle-Width="3%>
  <ItemTemplate>
       <input name="MyRadioButton" class="radioButton" type="radio" 
              id='<%# Eval("Row_Number") %>' value='<%# Eval("Row_Number") %>'  
              disabled ='<%# Convert.ToString(Eval("MAP_ID")) != "" ? "" : "disabled"  %>' />
   </ItemTemplate>
</asp:TemplateField> 
```

现在的问题是即使`MAP_ID`列中有值，所有单选按钮都被禁用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T11:54:06.130

`Disabled` is not a true/false attribute, if you want to enable or disable a control you'll need to choose whether the `disabled` keyword exists at all or not.

This will work:

```
<input name="MyRadioButton" class="radioButton" type="radio" id='<%# Eval("MAP_ID") %>' value='<%# Eval("MAP_ID") %>'  <%# Convert.ToString(Eval("MAP_ID")) != "" ? "" : "disabled"  %>  /> 
```

# mongodb - 如何将 $in 与 _id 一起使用

> ID：14317669
> 
> 赞同：-1
> 
> 时间：2013-01-14T11:33:05.103
> 
> 标签：mongodb

我如何在 $in 中使用 _id。

```
array('name' => array(
     '$in' => array('name1', 'name2')
)) 
```

这就是 $in 在 mongodb 中的使用方式。但我不知道如何将 $in 与 _id 一起使用。我用了

```
 array('_id' => array(
     '$in' => new MongoId(array(My Ids))
   )) 
```

但它没有用。如果有人知道答案，请告诉我。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T13:02:19.987

您必须提供一个**MongoId 数组，**而不是一个 MongoId 数组（这是不可能的）。

因此，您必须在查询之前对数组进行预处理或将这些 id 保留为 MongoId

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T19:48:01.887

您可以为此使用 array_map 或 foreach。

# matlab - 如何在 MATLAB 中求解这个微分方程？

> ID：14317675
> 
> 赞同：-4
> 
> 时间：2013-01-14T11:33:30.083
> 
> 标签：matlab, differential-equations

微分方程为：

```
k*r=sqrt( (r`)^2 + r^2 ) 
```

k的值为2，请问如何实现该功能并用ode45解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T20:15:39.633

这很简单。一些重要的事情：

1.  您需要以 ODE45 期望的格式表达您的微分方程，即`dy/dt = f(t,y)`. 这意味着对于您的函数，而不是`k*r=sqrt( (drdt)^2 + r^2 )`，您需要将其视为`drdt = sqrt( (k*r)^2 - r^2 )` （假设我正确地完成了我的代数）。

2.  该函数需要可向量化。对于这个问题，这几乎意味着，而不是`^`，使用`.^`，而不是`*`，使用`.*`。

然后我们可以使用基本的匿名函数语法来设置要解决的函数：

```
k = 2;
fn_drdt = @(t,r) sqrt( (k.*r).^2 - (r.^2)  ); 
```

使用ODE45解决

```
tStart = 0;
tEnd = 10;
r_init = -5;
[t, r] = ode45(fn_drdt, [tStart tEnd], r_init); 
```

然后做一个基本的情节

```
plot(t,r,'.'); 
```

并添加标题

```
title(sprintf('Solution to %s with k=%d ,r_0=%d', func2str(fn_drdt), k, r_init), 'fontname','courier') 
```

# php - 从 CURL 获取执行的 URL

> ID：14317677
> 
> 赞同：0
> 
> 时间：2013-01-14T11:33:35.733
> 
> 标签：php, curl

我有一个附属 URL 像[http://track.abc.com/?affid=1234](http://track.abc.com/?affid=1234) 打开这个链接会去`http://www.abc.com`

现在我想执行`http://track.abc.com/?affid=1234`Using CURL，现在我如何`http://www.abc.com` 使用 Curl 获取？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T11:39:31.770

If you want cURL to follow redirect headers from the responses it receives, you need to set that option with:

```
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, TRUE); 
```

You may also want to limit the number of redirects it follows using:

```
curl_setopt($ch, CURLOPT_MAXREDIRS, 3); 
```

So you'd using something similar to this:

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, "http://track.abc.com/?affid=1234");
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, TRUE);
curl_setopt($ch, CURLOPT_MAXREDIRS, 3);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
$data = curl_exec($ch); 
```

**Edit:** Question wasn't exactly clear but from the comment below, if you want to get the redirect location, you need to get the headers from cURL and parse them for the Location header:

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, "http://track.abc.com/?affid=1234");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
curl_setopt($ch, CURLOPT_HEADER, true);
$data = curl_exec($ch); 
```

This will give you the headers returned by the server in $data, simply parse through them to get the location header and you'll get your result. [This question](https://stackoverflow.com/questions/14315161/get-redirect-location-of-url-list "This question") shows you how to do that.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-14T12:19:48.660

我编写了一个函数，该函数将从 cURL 标头响应中提取任何标头。

```
function getHeader($headerString, $key) {
    preg_match('#\s\b' . $key . '\b:\s.*\s#', $headerString, $header);
    return substr($header[0], strlen($key) + 3, -2);
} 
```

在这种情况下，您正在寻找标头*Location*的值。我通过使用 cURL从重定向到[http://google.se的 TinyURL 检索标头来测试该功能。](http://google.se)

```
$url = "http://tinyurl.com/dtrkv";
$ch = curl_init($url);
curl_setopt($ch, CURLOPT_HEADER, true);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
$data = curl_exec($ch);
curl_close($ch);

$location = getHeader($data, 'Location');
var_dump($location); 
```

var_dump 的输出。

```
string(16) "http://google.se" 
```

# html - 自定义和不同的单选按钮

> ID：14317678
> 
> 赞同：0
> 
> 时间：2013-01-14T11:33:41.517
> 
> 标签：html, css

我发现了一个 CSS 结构，它可以使我的单选按钮与自定义背景图像一起使用。但它们都有相同的背景图像。是否可以编写一个结构，以便每个单独的单选按钮都有自己的背景图像，但功能保持不变。

我正在粘贴一个 JsFiddle 示例：[JSFiddle 示例](http://jsfiddle.net/EwfwQ/9/)

例如，我希望最后一个单选按钮“Melons”具有不同的背景图像。我怎样才能做到这一点？

到目前为止的CSS：

```
input[type="radio"] {
    display:none;
}
input[type="radio"] + label {
    display:inline;
    font-size: 18px;
}
input[type="radio"] + label:before {
    content: '';
    display:inline-block;
    width: 32px;
    height: 32px;
    background: url(http://dl.dropbox.com/u/51558405/radio-checked.png) no-repeat;
    vertical-align: middle;
}
input[type="radio"]:checked + label:before {
    content: '';
    background: url(http://dl.dropbox.com/u/51558405/radio-unchecked.png) no-repeat;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T11:40:21.337

工作和可扩展的代码。[现场演示](http://jsfiddle.net/EwfwQ/26/)

所有`radio`按钮的名称应该相同，以便它们作为一个组工作。我已经添加`class="class1"`到正常条目和`class="class2"`特殊条目中。

**HTML**

```
<li>
    <input class="class1" type="radio" id="radio" name="radios" checked />
    <label for="radio">Apples</label>
</li>
<li>
    <input class="class1" type="radio" id="radio2" name="radios" />
    <label for="radio2">Pineapples </label>
</li>
<li>
    <input class="class1" type="radio" id="radio3" name="radios" />
    <label for="radio3">Pomarance</label>
</li>
<li>
    <input class="class2" type="radio" id="nekaj" name="radios" />
    <label for="nekaj">Pomarance123</label>
</li> 
```

**CSS**

```
input[type="radio"][class="class1"] + label:before {
    content: '2';
    display:inline-block;
    width: 32px;
    height: 32px;
    background: url(http://dl.dropbox.com/u/51558405/radio-checked.png) no-repeat;
    vertical-align: middle;
}

input[type="radio"][class="class1"]:checked + label:before {
    content: '3';
    background: url(http://dl.dropbox.com/u/51558405/radio-unchecked.png) no-repeat;
}

input[type="radio"][class="class2"] + label:before {
    content: '444';
    display:inline-block;
    width: 32px;
    height: 32px;
    background: url(http://www.clker.com/cliparts/M/2/V/6/F/u/radiobutton-checked-sm-th.png) no-repeat;
    background-size:100% auto;
    vertical-align: middle;
}

input[type="radio"][class="class2"]:checked + label:before {
    content: '444';
    display:inline-block;
    width: 32px;
    height: 32px;
    background: url(http://www.clker.com/cliparts/M/2/V/6/F/u/radiobutton-checked-sm-th.png) no-repeat;
    background-size:100% auto;
    vertical-align: middle;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T12:54:04.080

你可以覆盖你的CSS。把这个css放在你的`input[type="radio"]:checked + label:before`css之后

```
#radio4 + label:before {
    content: '';
    background: url(your image path);
} 
```

希望这会有所帮助。

谢谢，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-15T06:50:10.880

我也这样做，但我的问题是不同的浏览器显示不同的对齐方式，单选按钮的垂直对齐方式不正确，特别是 mac 上的 google-chrome 从不显示正确的对齐方式

# ms-access-2010 - Msaccess 2010 - 基于记录源的报告

> ID：14317679
> 
> 赞同：1
> 
> 时间：2013-01-14T11:33:44.763
> 
> 标签：ms-access-2010

我已经查看了下面详细介绍的您之前的示例。但是我有一个问题：

这是我的代码，它在名为 Reports 的表单上运行一个按钮：

```
Dim dbs As Database

    Dim qdf As QueryDef
    Dim varitem As Variant

    Set dbs = CurrentDb()

    Set qdf = dbs.QueryDefs("Qry_rpt_cr")
    qdf.Parameters(0) = Forms!frm_reports.rmselectfilter.Column(1, varitem)
    qdf.Parameters(4) = Forms!frm_reports.rmselectperiod.Column(0, 0)
    qdf.Parameters(3) = Forms!frm_reports.rmselectperiod.Column(0, 1)
    qdf.Parameters(2) = Forms!frm_reports.rmselectperiod.Column(0, 2)
    qdf.Parameters(1) = Forms!frm_reports.rmselectperiod.Column(0, 3)

    Set grst = CurrentDb.OpenRecordset("Select * from Qry_rpt_cr")

    DoCmd.OpenReport "rpt_cr_test", acPreview

    grst.Close

    Set grst = Nothing
End Sub 
```

问题是查询需要五个参数传递给它，然后使用定义的参数打开记录集，然后打开报表。但是代码打不开。它在这条线上说一个错误 Set grst = CurrentDb.OpenRecordset("Select * from Qry_rpt_cr") 要求 5 个参数，但我已经在代码的前面传递了它们。任何建议都会受到欢迎。很高兴为正确答案捐款。ED

来自您的档案的示例 在 Access Web 中，您可以使用记录集的“名称”属性。您生成的代码将如下所示：

在报告中

```
Private Sub Report_Open(Cancel As Integer)
    Me.RecordSource = gMyRecordSet.Name
End Sub 
```

在调用对象（模块、表单等）中

```
Public gMyRecordSet As Recordset
'...
Public Sub callMyReport()
    '...
    Set gMyRecordSet = CurrentDb.OpenRecordset("Select * " & _
                                               "from foo " & _
                                               "where bar='yaddah'")
    DoCmd.OpenReport "myReport", acViewPreview  
    '...
    gMyRecordSet.Close  
    Set gMyRecordSet = Nothing
    '...
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T11:55:33.487

I've not used Access for a while , but i think you are setting the params for a query, and then running a different query. Access is asking for params to be provided for the query you are asking ("select * from ..."), not the (named) query that your query references, if that makes sense.

This should be easily fixed, just run `OpenRecordset` from the QueryDef:

```
Set grst = qdf.OpenRecordSet 
```

and then Access will include the query's params correctly.

Edit: Thx Remou

# jslint - 默认的 JSLint 选项是什么？

> ID：14317680
> 
> 赞同：2
> 
> 时间：2013-01-14T11:33:46.353
> 
> 标签：jslint

有许多[JSLint 选项](http://www.jslint.com/#JSLINT_OPTIONS)可用于配置 JSLint 忽略代码质量问题的程度。

用于布尔选项的 Web 界面允许您在和选项`true`之间切换。这意味着如果给定选项没有选择显式值，则将使用默认值或隐式值。`false``default`

许多选项允许容忍 JavaScript 的某些“不良”使用，这意味着默认值为“假”。JSLint 的目的之一是阻止“不良”使用。

如果仅仅是`true`或`false`可能的选择，`false`作为默认值，常规复选框或任何其他提供二元而非三元选择的输入，可能会被使用。鉴于 Web 界面允许一个人的选择恢复为`default`建议，这`false`可能并不总是给定选项的默认选择。

通过检查[最新来源](https://github.com/douglascrockford/JSLint/blob/master/jslint.js)，我不清楚如果没有明确选择，选项的选择将采用什么值。

对于所有 JSLint 选项，使用哪些默认值？

如果没有指定布尔选项默认为“假”并且整数选项（缩进、maxerr 和 maxlen）默认为[源中存在的](https://github.com/douglascrockford/JSLint/blob/master/jslint.js#L352-L354)值，我是否正确？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T11:42:43.373

在 JSLint 中，所有的布尔选项都是`false`默认的。这实际上意味着 JSLint 尽可能严格。所有选项在设置后将减少它对代码的限制。

我认为 Web 界面使用这些“true”/“false”/“default”切换的原因是该`global`指令有不同的行为。任何全局标识符的默认状态只是“不存在” - 单击其中一个以将一组全局标识符添加为`true`，再次单击以将其设置为 ，然后再次`false`单击以删除该组标识符。

如果全局标识符与 一起列出`true`，则 JSLint 在遇到赋值时不会抱怨。如果`false`，分配给全局标识符将生成警告。同样，`false`是默认值：

```
/*global $ */           // Define $ globally, don't allow assignments
/*global $:false */     // Equivalent to the above
/*global $:true */      // Allow assignment 
```

# python - 在 Eclipse/PyDev 中解决 Python 依赖项

> ID：14317685
> 
> 赞同：0
> 
> 时间：2013-01-14T11:33:58.913
> 
> 标签：python, eclipse, dependencies

我在这里从 Git 下载了一个 Python 项目。我设法在 Eclipse 中导入它，但它仍然缺少一些东西。以下几行是有罪的行

```
from bson import ObjectId
from pymongo import Connection 
```

我尝试`sudo easy_install bson`并`pymongo`成功安装了这些软件包。重新启动 Eclipse 后，我遇到了同样的错误。

我猜想构建路径，如果适用于 Python 而不是 Java，则缺少一些依赖项。

由于我对 Python 完全陌生，我想知道如何在 Eclipse 中修复 Python 依赖项

# android - Android 和 JUnit：如何向测试套件添加单独的测试？

> ID：14317687
> 
> 赞同：4
> 
> 时间：2013-01-14T11:34:05.093
> 
> 标签：android, junit

我已经为此苦苦挣扎了一段时间。在 JUnit/Android 中创建测试套件时，我可以执行以下操作：

*   添加与套件存在于同一包中的所有测试（在所有类中）
*   添加包含 testMethods 的特定类

但是，我完全无法执行以下操作：

*   将特定类中的特定 testMethod 添加到测试套件。

现在，我知道这应该是可能的，因为有无数的例子证明了这一点。

这是它应该如何工作的：

包含测试方法的测试类：

```
import com.frank.android.lookup.SomeClass;
import android.test.AndroidTestCase;

public class ArithmeticsTests extends AndroidTestCase {
    SomeClass sctest;

    protected void setUp () throws Exception {
        sctest = new SomeClass();
        super.setUp();
    }

    public void testAddNumbers () {
        assertEquals(9, sctest.addNumbers(3, 6));
    }

    public void testSubtractNumbers () {
        assertEquals(2, sctest.subtractNumbers(6, 4));
    }

    protected void tearDown () throws Exception {
        super.tearDown();
    }
} 
```

这是测试套件类：

```
import junit.framework.TestSuite;

public class ProjectTestSuite_SomeTests extends TestSuite {

    public static Test suite () {
        TestSuite suite = new TestSuite("ArithmeticsTests");
        suite.addTest(new ArithmeticsTests("testAddNumbers"));
        suite.addTest(new ArithmeticsTests2("testSubtractNumbers"));

        return suite;
    }
} 
```

现在，我尝试添加单个测试方法的两行导致此错误：

```
The constructor ArithmeticsTests(String) is undefined 
```

现在，我环顾四周，找不到任何解释。似乎缺少某些东西，因为它不明白我要做什么。它抱怨的“字符串”实际上是方法的名称——我不是试图将字符串传递给类的构造函数——我试图将类的方法添加到测试套件中。

我在这里使用的是 Android SDK 中包含的 JUnit 版本，我还没有安装任何其他相关的东西。有什么遗漏吗？（显然有，有点什么？）

## 编辑：

我在 ArithmeticsTests 类中添加了一个构造函数：

```
public ArithmeticsTests (String s) {} 
```

现在上面的错误消失了。

但是，当我运行测试套件时，出现此错误：

```
testSuiteCreationFailed
....
Caused by: java.lang.NullPointerException: Method name must not be null. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-08T08:12:35.210

我遇到了同样的问题，发现虽然`AndroidTestCase`没有带`String`参数的构造函数，但它确实有一个`setName(String name)`方法。通过调用该`setName`方法，您可以将单个方法添加到测试用例中。使用示例中的代码，您的测试套件可能如下所示：

```
import junit.framework.TestSuite;

public class ProjectTestSuite_SomeTests extends TestSuite {

    public static Test suite () {
        TestSuite suite = new TestSuite("ArithmeticsTests");
        ArithmeticsTests arithmeticsTests = new ArithmeticsTests();
        arithmeticsTests.setName("testAddNumbers");
        suite.addTest(arithmeticsTests);
        ArithmeticsTests2 arithmeticsTest2 = new ArithmeticsTests2();
        arithmeticsTest2.setName("testSubtractNumbers");
        suite.addTest(arithmeticsTest2);

        return suite;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-31T10:09:49.920

这对我有用。

```
public static TestSuite suite() {
    final TestSuite t = new TestSuite();
    t.addTest(TestSuite.createTest(TestExampleClass1.class, "test1"));
    t.addTest(TestSuite.createTest(TestExampleClass2.class, "test2"));
    t.addTest(TestSuite.createTest(TestExampleClass3.class, "test2"));

    return t;
} 
```

# iphone - 如何在单个 Parse.com 应用程序中分离不同用户的数据？

> ID：14317689
> 
> 赞同：0
> 
> 时间：2013-01-14T11:34:14.780
> 
> 标签：iphone, ios, objective-c, parse-platform

不同用户的数据如何在 iOS 的单个 parse.com 应用程序中分离？我正在编写一个可以在几个不同的 iPhone 上运行的应用程序。应用程序如何区分这些不同的设备？

该应用程序将有一个应用程序 ID。那么所有数据都会存储在该 ID 下吗？

我不是在谈论推送通知。我说的是区分使用我的应用程序的用户。如果所有用户的数据都将存储在我的帐户中，那么我将如何区分使用我的应用程序的用户？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T04:53:40.137

最简单的方法是将 User 作为您创建的任何解析对象的属性。当您查询时，您可以指定用户身份。这是一些示例代码：

```
PFQuery *query= [PFUser query];

[query whereKey:@"username" equalTo:[[PFUser currentUser]username]];

[query getFirstObjectInBackgroundWithBlock:^(PFObject *object, NSError *error){
    BOOL isPrivate = [[object objectForKey:@"isPrivate"]boolValue];
}]; 
```

此外，正如[@Hector Ramos](https://stackoverflow.com/users/19617/hector-ramos)所提到的，如果数据是敏感的，那么您需要使用 ACL 在服务器端实施检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T18:09:25.960

当用户注册您的 Parse 应用程序时，他们会获得自己的[PFUser](https://parse.com/docs/ios_guide#users/iOS)对象。然后，您可以使用[ACL](https://parse.com/docs/ios_guide#users-acls/iOS)来控制每个用户对每个对象的访问。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-14T11:49:11.420

您无法区分设备。当他们订阅特定频道时，所有设备都会收到该频道的通知。您无法在设备的基础上进行区分。您可以做一件事来创建频道 A 和 B 。根据需要为设备订阅频道。那么只有订阅了频道 A 或频道 B 的设备才会收到这些频道的通知。

# winapi - 在 WndProc 函数中定义变量

> ID：14317695
> 
> 赞同：0
> 
> 时间：2013-01-14T11:34:47.197
> 
> 标签：winapi

在 WndProc 函数中声明/定义变量是可以接受的。作为这段代码：

```
LRESULT CALLBACK WndProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam)
{
PAINTSTRUCT ps;
HDC hdc;

switch (message)
{
... 
```

好不好的问题。
因为程序进入这个函数，每分钟上千次，而且每次这些变量都被重新定义，又被销毁，也许最好把这些变量定义在WndProc函数之外，在类中，这样可以节省时间和资源？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T16:44:45.220

> 因为程序进入这个函数，每分钟上千次，而且每次这些变量都被重新定义，又被销毁，也许这些变量最好在`WndProc`函数之外，在类中定义，这样可以节省时间和资源？

就时间和资源而言，差别不大。这些是局部变量，存储在堆栈中。创建线程时，整个堆栈已经被保留，并且这些变量的内存不迟于第一次执行此过程时提交。因此，这意味着，对于`switch`不引用这些变量的条件，您可能无法衡量由于变量的存在而导致的运行时或资源需求的差异。

Raymond 指出，这`WndProc`可以被召回。如果您的 中有很多局部变量`WndProc`，则生成的堆栈使用可能不是最佳的。我仍然无法想象任何现实世界的应用程序的瓶颈是`WndProc`.

话虽如此，一种`WndProc`包含所有变量的大型 switch 语句的方法是不好的做法。你不想用很多不同的变量污染这个函数的本地命名空间。我建议您为要在窗口过程中处理的每条消息创建一个单独的处理函数。

最后，您建议在类中声明这些变量。不要这样做。在可能的情况下，总是首选局部变量。当然可以将这些变量声明为本地变量。尽管它们应该是`WndProc`调用的单独处理函数的局部变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T11:45:04.463

当局部变量被“创建”时，分配空间以将它们全部放入堆栈并调用它们的构造函数。如果没有构造函数，我相信默认操作是将字段“归零”，尽管我对此不是 100% 确定的。

然而，这可以通过十几个指令来实现。与其他操作，尤其是系统调用相比，这种影响可以忽略不计。如果您仍然担心程序中不同例程所花费的时间，我建议您使用像[gprof](http://www.cs.utah.edu/dept/old/texinfo/as/gprof.html "gprof")这样的工具。

# javascript - IE 7、8、9 js位置问题

> ID：14317698
> 
> 赞同：-1
> 
> 时间：2013-01-14T11:34:56.467
> 
> 标签：javascript, html, internet-explorer

我正在建立一个网站，目前坐在这里：

[http://s398928181.websitehome.co.uk/Ivyproperties/index.html](http://s398928181.websitehome.co.uk/Ivyproperties/index.html)

当我查看 IE 7、8 或 9 时，带有徽标和导航的顶部显示在主要内容之外。褪色的图片库也是如此。有人有想法么？

非常感谢，

亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T11:42:52.500

这是因为过滤器应用于 div#wrapper。

使用此属性产生的阴影会增加元素的宽度。不像盒子阴影。

我建议就这样离开它。使用旧浏览器访问您网站的人不会注意到他们错过了阴影（只要他们不与任何其他浏览器进行并排比较，这是极不可能的）

# iphone - AdWhril 在上传到应用商店时添加不显示甚至不发布到 Twitter

> ID：14317701
> 
> 赞同：0
> 
> 时间：2013-01-14T11:35:11.080
> 
> 标签：iphone, twitter, adwhirl

我已经在我的应用程序中实现了 AdWhirl，当我在 xcode 中创建构建并安装在我的 iphone 上时，添加显示完美，但是当我从应用商店下载应用程序时，添加没有接收。

我有另一个与 twitter 相关的问题，那就是当我使用 TWTweetComposerViewController 发布到 twitter 并且发布到 twitter 非常好，但是当我尝试从 AppStore 下载的应用程序发布时，它显示错误无法发送推文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T07:12:26.053

我得到了答案，问题是在 adwhirl 应用程序配置中有 Google Admob 和 iAd 的设置，但我的应用程序包中没有 Google Ad Mob 的 sdk。当我将 ad mob sdk 添加到我的应用程序时，它工作得非常好。

在 twitter 中，我在代码中两次关闭了 twitter 控制器，因此可能有原因无法正常工作，但是当我删除了一个关闭语句时，它现在可以正常工作了。

# jquery - 添加 gmap3 标记引用以通过 AJAX 在侧面板上加载附加信息

> ID：14317703
> 
> 赞同：0
> 
> 时间：2013-01-14T11:35:37.103
> 
> 标签：jquery, google-maps-markers, jquery-gmap3

我正在使用 gmap3 jQuery 面板加载地图并将标记放在地图上。单击标记时，我想检索其他数据。我有一个名为的侧 div`#panel`和一个用于地图的 div，名为`#mappa`. 初始化地图时，我使用以下代码添加标记：

```
$('#mappa').gmap3({
    marker:{
        values:[{ latLng:[48.8620722, 2.352047], id:"1" }],
        events: {
            click: function() {
                $('#panel').load('ajax/test.html')
            }
        }
    }
}); 
```

这工作得很好，但现在，作为一个 jQuery 新手，必须寻求一些帮助。标记的`id`值是`id`包含有关标记位置的附加信息的 wordpress 帖子的值。我想通过 AJAX 调用帖子`id=somenumber`并将其加载到面板中。不过，我不明白如何引用`id`函数内的标记。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T12:42:06.007

你能试试这个吗？

```
//get markers with id = value-of-id
markers = $('#mappa').gmap3({
        get:{
            name:"marker",
            id:function(id){
                return (id === value-of-id);
            }
        }
    });
$.each(markers, function(i, marker){
    // do something
} 
```

# gwt - GWT DeckLayoutPanel 动画在 Chrome 上进入无限循环

> ID：14317709
> 
> 赞同：2
> 
> 时间：2013-01-14T11:36:17.557
> 
> 标签：gwt

以下代码会在最新 (24.0.1312.52) 版本的 Chrome 上产生无限动画。相同的代码在 FF/IE 上运行良好。

```
public class Test implements EntryPoint {
@Override
public void onModuleLoad() {
    DeckLayoutPanel deck = new DeckLayoutPanel();
    deck.setWidth("100%");
    deck.setHeight("100px");
    deck.setAnimationDuration(3000);
    deck.setWidget(new Label("Hello world"));

    RootLayoutPanel.get().add(deck);
}
} 
```

有没有其他人也遇到过这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T11:48:15.507

这是 GWT 2.4 中的一个错误，因为 Chrome 中`requestAnimationFrame`现在使用亚毫秒计时器。这已在 GWT 2.5.0 中修复。

请参阅[https://groups.google.com/d/topic/google-web-toolkit/UBWsvHYM4SE](https://groups.google.com/d/topic/google-web-toolkit/UBWsvHYM4SE)和[https://plus.google.com/113357348071579443502/posts/apHjmAcynRa](https://plus.google.com/113357348071579443502/posts/apHjmAcynRa)等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T13:52:39.953

Thomas 完全正确，这是 GWT 2.4 中的一个错误，在 GWT 2.5 中是正确的。

如果您仍在使用 GWT 2.4，则可以通过以下对话来解决最新 chrome 构建带来的许多问题。

[https://groups.google.com/forum/#!topic/google-web-toolkit/UBWsvHYM4SE](https://groups.google.com/forum/#!topic/google-web-toolkit/UBWsvHYM4SE)

> FTA：解决方法的摘要是将以下内容添加到您的 .gwt.xml 文件中：

```
<!-- TEMP FIX UNTIL GOING TO GWT 2.5 -->
<!-- Fallback implementation, based on a timer -->
<replace-with class="com.google.gwt.animation.client.AnimationSchedulerImplTimer">
  <when-type-is class="com.google.gwt.animation.client.AnimationScheduler"/>
  <any>
    <when-property-is name="user.agent" value="ie6"/>
    <when-property-is name="user.agent" value="ie8"/>
    <when-property-is name="user.agent" value="ie9"/>
    <when-property-is name="user.agent" value="safari"/>
    <when-property-is name="user.agent" value="opera"/>
  </any>
</replace-with>

<!-- Implementation based on mozRequestAnimationFrame -->
<replace-with class="com.google.gwt.animation.client.AnimationSchedulerImplMozilla">
  <when-type-is class="com.google.gwt.animation.client.AnimationScheduler"/>
  <when-property-is name="user.agent" value="gecko1_8"/>
</replace-with>
<!-- ************* END ************* --> 
```

# hibernate - CASE WHEN THEN ELSE END 中的布尔文字

> ID：14317714
> 
> 赞同：1
> 
> 时间：2013-01-14T11:36:48.740
> 
> 标签：hibernate, jpa, eclipselink, derby, jpql

我按照[JPQL 语句返回布尔值](https://stackoverflow.com/questions/12051563/jpql-statement-returning-boolean-value)来检查实体的存在。

```
SELECT CASE WHEN (COUNT(e) > 0L) THEN TRUE ELSE FALSE END
FROM MyEntity AS e
WHERE ... 
```

但是当我尝试

```
boolean exist(...) {
    return em.createNamedQuery(<above>, Boolean.class)
        .setParameter(...)
        .getSingleResult();
} 
```

抱怨她不能将整数转换为布尔值。正常吗？

我必须像这样使用它。

```
boolean exist(..) {
    return em.createNamedQuery(<above>, Integer.class)
        .setParameter(...)
        .getSingleResult() > 0; // Shouldn't it be different from COUNT(e)?
} 
```

**更新**

这是实际的代码。

```
@Entity
@NamedQueries({
    @NamedQuery(name = Currency.NQ_EXIST_BY_HREF,
                query = "SELECT" + (" CASE WHEN (COUNT(c) > 0L)"
                                    + " THEN TRUE ELSE FALSE END")
                        + " FROM Currency AS c"
                        + " WHERE c.service = :service"
                        + " AND c.href = :href")
})
@Table(name = "CURRENCY", uniqueConstraints = {
    @UniqueConstraint(columnNames = {"SERVICE_ID", "HREF"})
})
@XmlTransient
public class Currency implements Serializable {

    public static final String NQ_EXIST_BY_HREF = "Currency.NQ_EXIST_BY_HREF"; 
```

测试中的方法。

```
protected static boolean NQ_EXIST_BY_HREF(
    final EntityManager manager, final String href, final Service service) {

    return manager.createNamedQuery(Currency.NQ_EXIST_BY_HREF,
                                    Boolean.class)
        .setParameter("href", href)
        .setParameter("service", service)
        .getSingleResult();
} 
```

痕迹来了。

```
java.lang.ClassCastException: java.lang.Integer cannot be cast to java.lang.Boolean
    at ....persistence.finance.CurrencyTest.NQ_EXIST_BY_HREF(CurrencyTest.java:93)
    at ....persistence.finance.CurrencyTest.newHref(CurrencyTest.java:168)
    at ....persistence.finance.CurrencyTest.testNQ_EXIST_BY_HREF(CurrencyTest.java:231) 
```

我正在`Derby(Memory)+EclipseLink`使用以下 persistence.xml进行测试

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
  <persistence-unit name="localPU" transaction-type="RESOURCE_LOCAL">
    <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
    <class>...</class>
    <class>...</class>
    <properties>
      <property name="javax.persistence.jdbc.driver" value="org.apache.derby.jdbc.EmbeddedDriver"/>
      <property name="javax.persistence.jdbc.url" value="jdbc:derby:memory:corrsDB;create=true"/>
      <!--      <property name="javax.persistence.jdbc.user" value=""/>
      <property name="javax.persistence.jdbc.password" value=""/>-->
      <property name="eclipselink.ddl-generation" value="create-tables"/>
      <property name="eclipselink.ddl-generation.output-mode" value="both"/>
      <property name="eclipselink.create-ddl-jdbc-file-name" value="target/createDDL.jdbc"/>
      <property name="eclipselink.drop-ddl-jdbc-file-name" value="target/dropDDL.jdbc"/>
<!--      <property name="eclipselink.logging.level.sql" value="FINEST"/>
      <property name="eclipselink.logging.parameters" value="true"/>-->
      <property name="eclipselink.target-database" value="Derby"/>
    </properties>
  </persistence-unit>
</persistence> 
```

**更新**

德比信息来了。

```
databaseProductName: Apache Derby
databaseProductVersion: 10.8.1.2 - (1095077)
databaseMajorVersion: 10
databaseMinorVersion: 8 
```

**更新**

这是我的 pom/依赖项。我没有针对任何特定的德比。我正在使用包含在 JDK aka Java DB 中的那个。

```
 <dependencies>
    <dependency>
      <groupId>org.apache.commons</groupId>
      <artifactId>commons-lang3</artifactId>
      <scope>test</scope>
    </dependency>
    <dependency>
      <!-- this dependency must be mentioned prior to javax:javaee-api -->
      <groupId>org.glassfish.main.extras</groupId>
      <artifactId>glassfish-embedded-all</artifactId>
      <scope>test</scope>
    </dependency>
    <dependency>
      <groupId>org.jboss.arquillian.container</groupId>
      <artifactId>arquillian-glassfish-embedded-3.1</artifactId>
      <scope>test</scope>
    </dependency>
    <dependency>
      <groupId>org.jboss.arquillian.testng</groupId>
      <artifactId>arquillian-testng-container</artifactId>
      <scope>test</scope>
    </dependency>
    <dependency>
      <groupId>org.jboss.shrinkwrap.descriptors</groupId>
      <artifactId>shrinkwrap-descriptors-spi</artifactId>
      <version>2.0.0-alpha-4</version>
      <scope>test</scope>
    </dependency>
    <dependency>
      <groupId>javax</groupId>
      <artifactId>javaee-api</artifactId>
      <scope>provided</scope>
    </dependency>
    <dependency>
      <groupId>org.mockito</groupId>
      <artifactId>mockito-core</artifactId>
      <scope>test</scope>
    </dependency>
    <dependency>
      <groupId>org.testng</groupId>
      <artifactId>testng</artifactId>
      <scope>test</scope>
    </dependency>
  </dependencies> 
```

依赖：树

```
$ mvn dependency:tree
[INFO] Scanning for projects...
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] Building corrs-entities 1.0-alpha-1-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO]
[INFO] --- maven-dependency-plugin:2.1:tree (default-cli) @ corrs-entities ---
[INFO] kr.co.ticomms.corrs:corrs-entities:jar:1.0-alpha-1-SNAPSHOT
[INFO] +- org.apache.commons:commons-lang3:jar:3.1:test
[INFO] +- org.glassfish.main.extras:glassfish-embedded-all:jar:3.1.2.2:test
[INFO] +- org.jboss.arquillian.container:arquillian-glassfish-embedded-3.1:jar:1.0.0.CR3:test
[INFO] |  +- org.jboss.arquillian.container:arquillian-container-spi:jar:1.0.0.CR7:test
[INFO] |  |  +- org.jboss.arquillian.core:arquillian-core-spi:jar:1.0.0.CR7:test
[INFO] |  |  +- org.jboss.arquillian.config:arquillian-config-api:jar:1.0.0.CR7:test
[INFO] |  |  +- org.jboss.arquillian.config:arquillian-config-impl-base:jar:1.0.0.CR7:test
[INFO] |  |  +- org.jboss.shrinkwrap:shrinkwrap-api:jar:1.0.0-cr-1:test
[INFO] |  |  \- org.jboss.shrinkwrap.descriptors:shrinkwrap-descriptors-api:jar:1.1.0-beta-1:test
[INFO] |  +- org.jboss.arquillian.container:arquillian-container-test-spi:jar:1.0.0.CR7:test
[INFO] |  +- org.jboss.arquillian.protocol:arquillian-protocol-servlet:jar:1.0.0.CR7:test
[INFO] |  +- org.jboss.arquillian.testenricher:arquillian-testenricher-cdi:jar:1.0.0.CR7:test
[INFO] |  +- org.jboss.arquillian.testenricher:arquillian-testenricher-ejb:jar:1.0.0.CR7:test
[INFO] |  +- org.jboss.arquillian.testenricher:arquillian-testenricher-resource:jar:1.0.0.CR7:test
[INFO] |  \- org.jboss.arquillian.testenricher:arquillian-testenricher-initialcontext:jar:1.0.0.CR7:test
[INFO] +- org.jboss.arquillian.testng:arquillian-testng-container:jar:1.0.3.Final:test
[INFO] |  +- org.jboss.arquillian.testng:arquillian-testng-core:jar:1.0.3.Final:test
[INFO] |  +- org.jboss.arquillian.test:arquillian-test-api:jar:1.0.3.Final:test
[INFO] |  |  \- org.jboss.arquillian.core:arquillian-core-api:jar:1.0.3.Final:test
[INFO] |  +- org.jboss.arquillian.test:arquillian-test-spi:jar:1.0.3.Final:test
[INFO] |  +- org.jboss.arquillian.container:arquillian-container-test-api:jar:1.0.3.Final:test
[INFO] |  +- org.jboss.arquillian.core:arquillian-core-impl-base:jar:1.0.3.Final:test
[INFO] |  +- org.jboss.arquillian.test:arquillian-test-impl-base:jar:1.0.3.Final:test
[INFO] |  +- org.jboss.arquillian.container:arquillian-container-impl-base:jar:1.0.3.Final:test
[INFO] |  +- org.jboss.arquillian.container:arquillian-container-test-impl-base:jar:1.0.3.Final:test
[INFO] |  \- org.jboss.shrinkwrap:shrinkwrap-impl-base:jar:1.0.1:test
[INFO] |     \- org.jboss.shrinkwrap:shrinkwrap-spi:jar:1.0.1:test
[INFO] +- org.jboss.shrinkwrap.descriptors:shrinkwrap-descriptors-spi:jar:2.0.0-alpha-4:test
[INFO] |  \- org.jboss.shrinkwrap.descriptors:shrinkwrap-descriptors-api-base:jar:2.0.0-alpha-4:test
[INFO] +- javax:javaee-api:jar:6.0:provided
[INFO] +- org.mockito:mockito-core:jar:1.9.5:test
[INFO] |  +- org.hamcrest:hamcrest-core:jar:1.1:test
[INFO] |  \- org.objenesis:objenesis:jar:1.0:test
[INFO] \- org.testng:testng:jar:6.8:test
[INFO]    +- junit:junit:jar:4.10:test
[INFO]    +- org.beanshell:bsh:jar:2.0b4:test
[INFO]    +- com.beust:jcommander:jar:1.27:test
[INFO]    \- org.yaml:snakeyaml:jar:1.6:test
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 2.442s
[INFO] Finished at: Tue Jan 15 16:28:01 KST 2013
[INFO] Final Memory: 11M/221M
[INFO] ------------------------------------------------------------------------ 
```

**更新**

我添加了显式（最新）德比作为依赖项，但没有任何更改。

```
databaseProductName: Apache Derby
databaseProductVersion: 10.9.1.0 - (1344872)
databaseMajorVersion: 10
databaseMinorVersion: 9 
```

**更新**（错误）

问题似乎来自德比。（错误）请参阅[EclipseLink JPA 2.0 案例表达式](http://wiki.eclipse.org/EclipseLink/Development/JPA_2.0/case_expressions)。（错误的）

我从 derby 更改为 hsqldb，它适用于`Boolean.class`. （错误的）

* * *

**结论**

我错了。问题来自 EclipseLink。我使用两种不同的提供商设置进行了测试。

```
<provider>org.eclipse.persistence.jpa.PersistenceProvider</provider> <!-- doesn't work --> 
```

和

```
<provider>org.hibernate.ejb.HibernatePersistence</provider> <!-- works --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T18:51:15.633

你用的是哪个版本的德比？较旧版本的 derby 不支持布尔数据类型。但是您可以使用整数值。

```
 @NamedQuery(name = Currency.NQ_EXIST_BY_HREF,
            query = "SELECT" + (" CASE WHEN (COUNT(c) > 0L)"
                                + " THEN 1 ELSE 0 END")
                    + " FROM Currency AS c"
                    + " WHERE c.service = :service"
                    + " AND c.href = :href") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T14:30:14.260

问题似乎是 Derby 不支持布尔数据类型，因此从查询中返回 1/0。这就是为什么它适用于 HSQL，因为支持布尔值。

由于您已经输入了命名查询返回类型，EclipseLink 应该足够聪明，可以为您自动将整数转换为布尔值。它似乎没有这样做，所以请为此记录一个错误。

# command-line - JMeter - 从命令行更改用户定义的变量

> ID：14317715
> 
> 赞同：32
> 
> 时间：2013-01-14T11:36:49.487
> 
> 标签：command-line, jmeter

我正在尝试使用命令行更新 jmeter 测试计划中的“用户定义的变量”

```
jmeter -n -t SimpleJmxExample.jmx -l log.jtl -Jtestproperty=202 
```

![在此处输入图像描述](../Images/55de314bc23b9a844e455a9babae01a2.png)

如您所见，我正在使用 -J 参数。不过好像没什么区别？是否有更好/更可接受的方式为测试计划传递不同的变量？

这是我的 jmx 文件

```
<?xml version="1.0" encoding="UTF-8"?>
<jmeterTestPlan version="1.2" properties="2.1">
  <hashTree>
    <TestPlan guiclass="TestPlanGui" testclass="TestPlan" testname="Test Plan" enabled="true">
      <stringProp name="TestPlan.comments"></stringProp>
      <boolProp name="TestPlan.functional_mode">false</boolProp>
      <boolProp name="TestPlan.serialize_threadgroups">false</boolProp>
      <elementProp name="TestPlan.user_defined_variables" elementType="Arguments" guiclass="ArgumentsPanel" testclass="Arguments" testname="User Defined Variables" enabled="true">
        <collectionProp name="Arguments.arguments"/>
      </elementProp>
      <stringProp name="TestPlan.user_define_classpath"></stringProp>
    </TestPlan>
    <hashTree>
      <ThreadGroup guiclass="ThreadGroupGui" testclass="ThreadGroup" testname="Thread Group" enabled="true">
        <stringProp name="ThreadGroup.on_sample_error">continue</stringProp>
        <elementProp name="ThreadGroup.main_controller" elementType="LoopController" guiclass="LoopControlPanel" testclass="LoopController" testname="Loop Controller" enabled="true">
          <boolProp name="LoopController.continue_forever">false</boolProp>
          <stringProp name="LoopController.loops">1</stringProp>
        </elementProp>
        <stringProp name="ThreadGroup.num_threads">1</stringProp>
        <stringProp name="ThreadGroup.ramp_time">1</stringProp>
        <longProp name="ThreadGroup.start_time">1358160198000</longProp>
        <longProp name="ThreadGroup.end_time">1358160198000</longProp>
        <boolProp name="ThreadGroup.scheduler">false</boolProp>
        <stringProp name="ThreadGroup.duration"></stringProp>
        <stringProp name="ThreadGroup.delay"></stringProp>
      </ThreadGroup>
      <hashTree>
        <HTTPSampler guiclass="HttpTestSampleGui" testclass="HTTPSampler" testname="Test Http Response Code" enabled="true">
          <elementProp name="HTTPsampler.Arguments" elementType="Arguments" guiclass="HTTPArgumentsPanel" testclass="Arguments" enabled="true">
            <collectionProp name="Arguments.arguments"/>
          </elementProp>
          <stringProp name="HTTPSampler.domain">httpstat.us</stringProp>
          <stringProp name="HTTPSampler.port"></stringProp>
          <stringProp name="HTTPSampler.connect_timeout"></stringProp>
          <stringProp name="HTTPSampler.response_timeout"></stringProp>
          <stringProp name="HTTPSampler.protocol">http</stringProp>
          <stringProp name="HTTPSampler.contentEncoding"></stringProp>
          <stringProp name="HTTPSampler.path">/${testproperty}</stringProp>
          <stringProp name="HTTPSampler.method">GET</stringProp>
          <boolProp name="HTTPSampler.follow_redirects">true</boolProp>
          <boolProp name="HTTPSampler.auto_redirects">false</boolProp>
          <boolProp name="HTTPSampler.use_keepalive">true</boolProp>
          <boolProp name="HTTPSampler.DO_MULTIPART_POST">false</boolProp>
          <boolProp name="HTTPSampler.monitor">false</boolProp>
          <stringProp name="HTTPSampler.embedded_url_re"></stringProp>
        </HTTPSampler>
        <hashTree>
          <HeaderManager guiclass="HeaderPanel" testclass="HeaderManager" testname="HTTP Header Manager" enabled="true">
            <collectionProp name="HeaderManager.headers">
              <elementProp name="Cache-Control" elementType="Header">
                <stringProp name="Header.name">Cache-Control</stringProp>
                <stringProp name="Header.value">max-age=0</stringProp>
              </elementProp>
              <elementProp name="Accept-Language" elementType="Header">
                <stringProp name="Header.name">Accept-Language</stringProp>
                <stringProp name="Header.value">en-US,en;q=0.8</stringProp>
              </elementProp>
              <elementProp name="Accept" elementType="Header">
                <stringProp name="Header.name">Accept</stringProp>
                <stringProp name="Header.value">text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8</stringProp>
              </elementProp>
              <elementProp name="User-Agent" elementType="Header">
                <stringProp name="Header.name">User-Agent</stringProp>
                <stringProp name="Header.value">Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.97 Safari/537.11</stringProp>
              </elementProp>
              <elementProp name="Accept-Encoding" elementType="Header">
                <stringProp name="Header.name">Accept-Encoding</stringProp>
                <stringProp name="Header.value">gzip,deflate,sdch</stringProp>
              </elementProp>
              <elementProp name="Accept-Charset" elementType="Header">
                <stringProp name="Header.name">Accept-Charset</stringProp>
                <stringProp name="Header.value">ISO-8859-1,utf-8;q=0.7,*;q=0.3</stringProp>
              </elementProp>
            </collectionProp>
          </HeaderManager>
          <hashTree/>
          <ResultCollector guiclass="ViewResultsFullVisualizer" testclass="ResultCollector" testname="View Results Tree" enabled="true">
            <boolProp name="ResultCollector.error_logging">false</boolProp>
            <objProp>
              <name>saveConfig</name>
              <value class="SampleSaveConfiguration">
                <time>true</time>
                <latency>true</latency>
                <timestamp>true</timestamp>
                <success>true</success>
                <label>true</label>
                <code>true</code>
                <message>true</message>
                <threadName>true</threadName>
                <dataType>true</dataType>
                <encoding>false</encoding>
                <assertions>true</assertions>
                <subresults>true</subresults>
                <responseData>false</responseData>
                <samplerData>false</samplerData>
                <xml>true</xml>
                <fieldNames>false</fieldNames>
                <responseHeaders>false</responseHeaders>
                <requestHeaders>false</requestHeaders>
                <responseDataOnError>false</responseDataOnError>
                <saveAssertionResultsFailureMessage>false</saveAssertionResultsFailureMessage>
                <assertionsResultsToSave>0</assertionsResultsToSave>
                <bytes>true</bytes>
              </value>
            </objProp>
            <stringProp name="filename"></stringProp>
          </ResultCollector>
          <hashTree/>
          <Arguments guiclass="ArgumentsPanel" testclass="Arguments" testname="User Defined Variables" enabled="true">
            <collectionProp name="Arguments.arguments">
              <elementProp name="testproperty" elementType="Argument">
                <stringProp name="Argument.name">testproperty</stringProp>
                <stringProp name="Argument.value">200</stringProp>
                <stringProp name="Argument.metadata">=</stringProp>
              </elementProp>
            </collectionProp>
          </Arguments>
          <hashTree/>
        </hashTree>
      </hashTree>
    </hashTree>
  </hashTree>
</jmeterTestPlan> 
```

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-01-14T13:24:43.370

好吧，使用`-J`参数您正在设置**PROPERTY**，并且在[用户定义的变量](https://jmeter.apache.org/usermanual/component_reference.html#User_Defined_Variables)config - **VARIABLE**中。它将定义两个[不同的实体](https://blog.novatec-gmbh.de/how-to-pass-command-line-properties-to-a-jmeter-testplan/)，尽管名称相同，但它们将具有不同的值。

在您的情况下，您可以执行以下操作。

1.  在您的问题中如上所述在命令行中设置 jmeter 属性值

    `...-Jtestproperty=202`

2.  在 UDV 配置中使用属性值设置变量：

    `testproperty = ${__property(testproperty,,)}`

    或者

    `testproperty = ${__P(testproperty,)}`

3.  `${testproperty}`在脚本中进一步使用。

您也可以在不使用变量的情况下执行相同的操作，只需将属性引用为`{__P(testproperty,)}`获取在命令行中设置的值。

# c# - 是否可以在用户登录之前保存购物车数据客户端？

> ID：14317719
> 
> 赞同：1
> 
> 时间：2013-01-14T11:37:20.800
> 
> 标签：c#, asp.net-mvc-3, client-side

我必须为我的最终项目创建一个在线商店。这是为了有一个购物车，用户可以在其中放置文章，即使他们没有登录。当他们登录购物车时，应该保存给用户。

是否可以在用户登录之前保存数据客户端？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T11:42:19.287

您可以将购物车作为访客（随机用户 GUID）存储在服务器端，直到用户登录，然后将购物车转换为经过身份验证的用户。带有教程的**EXACT**示例应用程序完美地回答了这个问题。在此处查看[教程，](http://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-1)并在此处查看完整代码：[Mvc Music Store](http://mvcmusicstore.codeplex.com/)。

PS 为了节省您的搜索[时间，这正是](http://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-9)您需要的部分，但我建议您阅读整个教程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T11:42:56.473

在客户端，您可以使用 cookie，但可以通过浏览器禁用它。您应该将购物车与用户 ip 即结合起来。并将其存储在服务器端。

# php - PHP SAML 身份验证 WSSE JAX-WS

> ID：14317720
> 
> 赞同：0
> 
> 时间：2013-01-14T11:37:26.807
> 
> 标签：php

我知道很难用简单的词来表达它。但这真的让我很困惑。我将在 PHP 中为 Authentification 类编写代码。

以下是技术要点： 1\. saml2p:AuthnRequest XML（在 php 中，我们必须将它们转换为对象，但如何？） 2\. simplexml 数组到对象和对象到数组。3\. JAX-WS 中的 WSSE 标头 4\. AuthnRequestType

还有我的代码和问题：这应该是 authnrequest XML，但我不知道如何将它作为 SoapClient 中的参数放入方法中。

```
<?xml version="1.0" encoding="UTF-8"?>
<saml2p:AuthnRequest AssertionConsumerServiceURL="http://http://localhost/SAML/objectoarray.php"
    ID="551e5cd8-7f50-4dcd-bc85-eb625bb12da7" IssueInstant="2013-01-14T06:17:05.138Z"
    ProtocolBinding="urn:oasis:names:tc:SAML:2.0:bindings:SOAP" Version="2.0"
    xmlns:ns4="http://www.w3.org/2000/09/xmldsig#" xmlns:saml2="urn:oasis:names:tc:SAML:2.0:assertion"
    xmlns:saml2p="urn:oasis:names:tc:SAML:2.0:protocol" xmlns:xenc="http://www.w3.org/2001/04/xmlenc#">
    <saml2:Issuer>applpf.pioneer.jp</saml2:Issuer>
    <ds:Signature xmlns:ds="http://www.w3.org/2000/09/xmldsig#">
        <ds:SignedInfo>
            <ds:CanonicalizationMethod
                Algorithm="http://www.w3.org/TR/2001/REC-xml-c14n-20010315#WithComments" />
            <ds:SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1" />
            <ds:Reference URI="#551e5cd8-7f50-4dcd-bc85-eb625bb12da7">
                <ds:Transforms>
                    <ds:Transform
                        Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature" />
                </ds:Transforms>
                <ds:DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1" />
                <ds:DigestValue>4RzD9oGu0D+pWD1ZZfrb83WsWL8=</ds:DigestValue>
            </ds:Reference>
        </ds:SignedInfo>
        <ds:SignatureValue>dxZE/60oe3+rlIbVUcCa1isgfOGM0pi5XRaKPsvFtyJ3RAw9AoLzN0nYngTD9Dj/TbWdu1wCW+gekrBUtbhKkBU7xBuBWtQvLxHCB7mHxiOZZqMSYR4kjzzmHEWqSbsG3oYoWhDBXyfHWnlztk8onI9sysiBMboJe7yybmne0PilZkLmkpZcTUefUKyrCQF1l49BIF5J5R+QC7Uh6dHCNXx1zFesVKBqmaWumlKCXssycEUFfNqoTD9rtlMnQ5U6aQEEfYpRClMS8SYdsY+K9daM0lEEncjfZrpUaZR5jQJo+M1CHSmfrv7qU36Hqi+vNWBK8YIH1raMkg17ZMYBhA==</ds:SignatureValue>
        <ds:KeyInfo>
            <ds:X509Data>
                <ds:X509Certificate>MIIDPDCCAiSgAwIBAgIEUO+oMjANBgkqhkiG9w0BAQUFADBgMQswCQYDVQQGEwJKUDEOMAwGA1UECBMFVG9reW8xFDASBgNVBAoTC3BpbmVhcy10ZXN0MQ8wDQYDVQQLEwZwaW5lYXMxGjAYBgNVBAMTEXBpbmVhcy5waW9uZWVyLmpwMB4XDTEzMDExMTA1NTA0MloXDTMzMDEwNjA1NTA0MlowYDELMAkGA1UEBhMCSlAxDjAMBgNVBAgTBVRva3lvMRQwEgYDVQQKEwtwaW5lYXMtdGVzdDEPMA0GA1UECxMGcGluZWFzMRowGAYDVQQDExFwaW5lYXMucGlvbmVlci5qcDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAKUzsdfIqPe81UYNgyeBsnSvZcNGoTsn/SEnvo09IXjaQxOHUhPY/RQmsAK6ZnjlVNi1zO+0W71KF4Kl1sLJC3Yhv92aoL09cJfWlx/AYz5wpAm7B/om2CYADxoAsaT5+Wlif+aO2CAgwVCLIZzMhIF1B6YX+c3+WnWZceHvzy8F04mCeFFsT9sf6VQ3ZGiZXK8U9CnfdOFYMb/GCgUyqut/jpgCXvyzwZ4aGPBIOuCDuMDhfw6tvTjf0W2lAgmWmcjPs0kmDtV9SHOAPOYBCPrDDjFJsQwLiCwJiHYFMCKnIRNfXzGs9xttFkt4/WOgMMSo2suttvu2JZ7GhoFZJrkCAwEAATANBgkqhkiG9w0BAQUFAAOCAQEAPMsJkuDhxeZwwd7XEbLi+2847JVzpvR1R90azkdvq9bJrs/b4IZMEJo+Qbswb+KajV/1W40kf+wjOEwvpDmyILD9Ds0zuVEipzGv+wAsQd6WMl5GcDTNs/PQqn8hEf/+l0llJeZ5DHbzUSZRd91Y2AAM2q2gcRo/PJkMB110Arl1POaCWCEKqyLfIA2g9ZaxXqUYEWk1rs4NeR/T+7hPm2HZzPRm4zbcfETIcoFqoymlx++TgFACy5ZoSAuMfEE6X9G6sySAvVyStqHD1sZiD8AoRKMCVll7u2zNQYjuIHCtIfqDDP3WlhAEJ7Bm1YmK2PEOKADn3msG3dt2pf92zQ==</ds:X509Certificate>
            </ds:X509Data>
        </ds:KeyInfo>
    </ds:Signature>
</saml2p:AuthnRequest> 
```

我只是将它们保存为纯 xml 并将它们转换为数组。

喜欢 ：

```
$xml = new SimpleXMLElement('<?xml version="1.0" encoding="UTF-8"?><saml2p:AuthnRequest AssertionConsumerServiceURL="http://applpf.pioneer.co.jp/" ID="0011e577-5e4a-46b5-9703-888294c0bd66" IssueInstant="2013-01-14T06:19:51.626Z" ProtocolBinding="urn:oasis:names:tc:SAML:2.0:bindings:SOAP" Version="2.0" xmlns:ns4="http://www.w3.org/2000/09/xmldsig#" xmlns:saml2="urn:oasis:names:tc:SAML:2.0:assertion" xmlns:saml2p="urn:oasis:names:tc:SAML:2.0:protocol" xmlns:xenc="http://www.w3.org/2001/04/xmlenc#"><saml2:Issuer>applpf.pioneer.jp</saml2:Issuer><ds:Signature xmlns:ds="http://www.w3.org/2000/09/xmldsig#"><ds:SignedInfo><ds:CanonicalizationMethod Algorithm="http://www.w3.org/TR/2001/REC-xml-c14n-20010315#WithComments"/><ds:SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1"/><ds:Reference URI="#0011e577-5e4a-46b5-9703-888294c0bd66"><ds:Transforms><ds:Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature"/></ds:Transforms><ds:DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/><ds:DigestValue>PWG+OxqzVzA0piHjtvsjh/MlChA=</ds:DigestValue></ds:Reference></ds:SignedInfo><ds:SignatureValue>gcoF7BZAJ0W85PK9tbSvJT0aTATQTysFmi+FxyLfZvhA7nHtmYqqXfy9r2r73Jai1qCruPUGmOx3IpjP9wjBPnCCCx/gHW8UjPdAJlLhNBK17svKEmx4uMranN5M/MLrFnqkQduuzmMXl/xio3+iJs4Tldo/5wL4L99Go58l+BMGurEdgmh744E7v+yvniS1thPjc2E07Dlb0o5rdlqkEYYPL2CR0r8er3IXdT2+939iaoD8h+B3v9zu6M6qNcOTfVz9HmV54/sIB15u9cl7efDIsHj4/uAlnqZTg66EgrD44Cj0J2b7z8mo1Qdd+8b59vRA6DtRXw3DnIE3hKeMRw==</ds:SignatureValue><ds:KeyInfo><ds:X509Data><ds:X509Certificate>MIIDPDCCAiSgAwIBAgIEUO+oMjANBgkqhkiG9w0BAQUFADBgMQswCQYDVQQGEwJKUDEOMAwGA1UECBMFVG9reW8xFDASBgNVBAoTC3BpbmVhcy10ZXN0MQ8wDQYDVQQLEwZwaW5lYXMxGjAYBgNVBAMTEXBpbmVhcy5waW9uZWVyLmpwMB4XDTEzMDExMTA1NTA0MloXDTMzMDEwNjA1NTA0MlowYDELMAkGA1UEBhMCSlAxDjAMBgNVBAgTBVRva3lvMRQwEgYDVQQKEwtwaW5lYXMtdGVzdDEPMA0GA1UECxMGcGluZWFzMRowGAYDVQQDExFwaW5lYXMucGlvbmVlci5qcDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAKUzsdfIqPe81UYNgyeBsnSvZcNGoTsn/SEnvo09IXjaQxOHUhPY/RQmsAK6ZnjlVNi1zO+0W71KF4Kl1sLJC3Yhv92aoL09cJfWlx/AYz5wpAm7B/om2CYADxoAsaT5+Wlif+aO2CAgwVCLIZzMhIF1B6YX+c3+WnWZceHvzy8F04mCeFFsT9sf6VQ3ZGiZXK8U9CnfdOFYMb/GCgUyqut/jpgCXvyzwZ4aGPBIOuCDuMDhfw6tvTjf0W2lAgmWmcjPs0kmDtV9SHOAPOYBCPrDDjFJsQwLiCwJiHYFMCKnIRNfXzGs9xttFkt4/WOgMMSo2suttvu2JZ7GhoFZJrkCAwEAATANBgkqhkiG9w0BAQUFAAOCAQEAPMsJkuDhxeZwwd7XEbLi+2847JVzpvR1R90azkdvq9bJrs/b4IZMEJo+Qbswb+KajV/1W40kf+wjOEwvpDmyILD9Ds0zuVEipzGv+wAsQd6WMl5GcDTNs/PQqn8hEf/+l0llJeZ5DHbzUSZRd91Y2AAM2q2gcRo/PJkMB110Arl1POaCWCEKqyLfIA2g9ZaxXqUYEWk1rs4NeR/T+7hPm2HZzPRm4zbcfETIcoFqoymlx++TgFACy5ZoSAuMfEE6X9G6sySAvVyStqHD1sZiD8AoRKMCVll7u2zNQYjuIHCtIfqDDP3WlhAEJ7Bm1YmK2PEOKADn3msG3dt2pf92zQ==</ds:X509Certificate></ds:X509Data></ds:KeyInfo></ds:Signature></saml2p:AuthnRequest>');
$xml_object = simplexml_load_string($xml->asXML()); 
```

最后我把它作为参数放入方法中

```
$authnSample->loginByCustomer($xml_object,"\$00astest","password"); 
```

在 CustomerLoginService 类我们做

```
class WsseAuthHeader extends SoapHeader {

private $wss_ns = 'http://docs.oasis-open.org/wss/2004/01/asis-200401-wss-wssecurity-secext-1.0.xsd';

    function __construct($user, $pass, $ns = null) {
        if ($ns) {
            $this->wss_ns = $ns;
        }

        $auth = new stdClass();
        $auth->Username = new SoapVar($user, XSD_STRING, NULL, $this->wss_ns, NULL, $this->wss_ns); 
        $auth->Password = new SoapVar($pass, XSD_STRING, NULL, $this->wss_ns, NULL, $this->wss_ns);

        $username_token = new stdClass();
        $username_token->UsernameToken = new SoapVar($auth, SOAP_ENC_OBJECT, NULL, $this->wss_ns, 'UsernameToken', $this->wss_ns); 

        $security_sv = new SoapVar(
            new SoapVar($username_token, SOAP_ENC_OBJECT, NULL, $this->wss_ns, 'UsernameToken', $this->wss_ns),
            SOAP_ENC_OBJECT, NULL, $this->wss_ns, 'Security', $this->wss_ns);
        parent::__construct($this->wss_ns, 'Security', $security_sv, true);
    }
} 
```

接着

```
$wsse_header = new WsseAuthHeader($this->userid, $this->password);
$this->soapClient = new SoapClient($url, array("trace" => 1, "exception" => 0));
$this->soapClient->__setSoapHeaders(array($wsse_header)); 
```

但最终我仍然得到这样的错误：

> 异常：SoapFault 异常：[HTTP] 内部服务器错误在 C:\php5\www\PINE_FW_AS_PHPProject\com\pioneer\pine\fw\as\object\CustomerLoginService.php:137 堆栈跟踪：#0 [内部函数]：SoapClient- >_ *doRequest('* _call('login', Array) #2 C:\php5\www\PINE_FW_AS_PHPProject\com\pioneer\pine\fw\as\object\CustomerLoginService.php(137): SoapClient->login(Array) #3 C:\php5\www\PINE_FW_AS_PHPProject\com\pioneer\pine\fw\as\Authentication.php(76): CustomerLoginService->login(Array) #4 C:\php5\www\SAML\test_authreq01.php( 48): Authentication->loginByCustomer(Array, '$00astest', 'password') #5 {main}

谁能告诉我，我怎样才能以正确或简单的方式正确访问 Auth 服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T23:30:27.983

我对某些 Web 服务进行了非常相似的身份验证。这是我这样做的方式。一个将数组转换为 SoapVar 对象的函数。

```
function arrayToSoapVarObject($array=array(),$nameSpace=NULL,$nodeName=NULL){
    $object=array();
    foreach ($array as $key=>$val){

        if (is_array($val))
            $object[$key]= new SoapVar(arrayToSoapVarObject($val,$nameSpace), SOAP_ENC_OBJECT, NULL, $nameSpace, $key, $nameSpace);
        elseif (is_string($val))
            $object[$key]=new SoapVar($val, XSD_STRING, NULL, $nameSpace, NULL, $nameSpace);
        elseif (is_object($val))
            $object[$key]=new SoapVar($val, SOAP_ENC_OBJECT, NULL, $nameSpace, NULL, $nameSpace);
    }

    return $nodeName!=''?new SoapVar((object)$object, NULL, SOAP_ENC_OBJECT, NULL, $nodeName, $nameSpace):(object)$object;
} 
```

现在，只需以需要 WSSE 的方式声明一个数组

```
$strWSSENS = "http://schemas.xmlsoap.org/ws/2002/12/secext";

$token=array(

        'UsernameToken'=>array(
                'Username' => 'XXX',
                'Password' => 'YYY',
                'Organization' => 'ZZZ',
                'domain' => 'DEFAULT',
        ),
);

$objToken=arrayToSoapVarObject($token,$strWSSENS,'UsernameToken'); 
```

这个 objToken 是一个完美的 SoapVar 对象......所以我们用来制作 WSSE Header Security

```
$objSoapVarWSSEHeader = new SoapHeader($strWSSENS, 'Security', $objToken,true, 'https://actor.com');

try {

 $client= new SoapClient($wsdl);
 $client->__setSoapHeaders(array($objSoapVarWSSEHeader));
 $response=$client->__soapCall('Action',array($arguments),null,null,$output_headers);
}catch (SoapFault $fault){

    echo $fault->getMessage();
} 
```

我想这种方法有点简单。

# c# - 将 OracleParameter 与 C# TimeSpan 一起使用 - 文字不匹配

> ID：14317721
> 
> 赞同：2
> 
> 时间：2013-01-14T11:37:27.740
> 
> 标签：c#, oracle, binding, parameters

我进行了广泛的搜索，但找不到任何关于此的示例。

我有一个 TimeSpan 类型的 .NET 变量，我需要将它放入`IntervalDayToSecond`Oracle DB 的记录中。

参考[http://docs.oracle.com/html/B14164_01/featOraCommand.htm](http://docs.oracle.com/html/B14164_01/featOraCommand.htm)这个页面，应该可以将 TimeSpan 对象作为 OracleParameter 传递，并将其插入到我的 Oracle DB`IntervalDayToSecond`类型的记录中。

这是代码：

```
OracleParameter t = new OracleParameter("PAR_T", _msg.t); 
```

我以各种方式尝试了它，还明确指定了 DBType（它不应该是必需的）：

```
OracleParameter t = new OracleParameter("PAR_T", _msg.t);
taxi.OracleDbType = OracleDbType.IntervalDS; 
```

我总是从 Oracle 收到同样的错误：

> Devart.Data.Oracle.OracleException：ORA-01861：文字与格式字符串不匹配

我不明白如何使它工作；我在这个应用程序中使用了几十个参数（类型为`String`, `Integer`, `Date`），它们都在工作。在谷歌上，我找不到一个使用 c#`TimeSpan`作为参数的人的例子。有没有人试过这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T14:38:59.033

好吧，这绝对是我的错。老好人`OracleParameter`做得很好；问题出在查询的其他地方。

因此，我在此确认可以将 TimeSpan 变量绑定到 Oracle`Interval Day To Second`记录。

```
string s = "00:20";
TimeSpan ts = TimeSpan.parse(s);
OracleParameter op = new OracleParameter("PAR_T", ts); 
```

这将创建一个名为的参数，该参数`PAR_T`可用于查询以将值插入`Interval Day To Second`记录。

# html - 响应式设计 - 320 及更高版本 - 如何使用媒体查询？

> ID：14317724
> 
> 赞同：0
> 
> 时间：2013-01-14T11:37:50.360
> 
> 标签：html, css, mobile, responsive-design

目前我正试图绕过响应式设计。您经常听到的一句话是“移动优先！”。我明白这意味着什么，但我仍然不确定如何将其付诸实践。

我正在使用 320 及更高版本的工具包/样板，其中已经设置了一些媒体查询：`min-width: 480px`, `min-width: 600px`, `min-width: 768px`, `min-width: 992px`& `min-width: 1382px`。
正如您可能注意到的那样`min-width: 320px`，缺少类似的东西。

这是否意味着我在媒体查询之外设计我的页面宽度为 320 像素，然后使用媒体查询覆盖某些需要调整的位？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T13:45:55.953

你应该先写你的 CSS 而不用那些媒体查询。实际上你应该忽略那些媒体查询。

一旦你的“移动”CSS 就位（让你的浏览器窗口很小），你就开始调整浏览器窗口的大小。当事情开始变得奇怪时，例如，太多的空白，行变得很长，你为那个最小宽度添加一个新的媒体查询。

在新的媒体查询中，您可以针对看起来很奇怪的东西进行调整，一旦您完成了再次放大，请继续这样做，直到您认为您已经覆盖了足够的屏幕空间。

没有一种设备宽度，因为那里有成千上万种不同的设备，因此您无法在实际看到您的设计之前决定您的断点。

# mysql - 使用 ORDER BY 避免“使用临时”和“使用文件排序”

> ID：14317725
> 
> 赞同：1
> 
> 时间：2013-01-14T11:37:51.997
> 
> 标签：mysql, sql-order-by, query-optimization

抱歉，在浏览了几乎所有关于它的帖子和问题之后，我仍然无法在一个简单的查询中摆脱“使用临时”和“使用文件排序”。我知道这是键的问题，但我找不到正确的组合...

我也不知道优化器定义的连接顺序是否正常，我使用 STRAIGHT_JOIN 测试了其他顺序，但没有更好的...使用 ORDER BY 查询非常慢，但没有它真的很快，当然没有“使用临时”和“使用文件排序”！（积分表中有 100.000 行）

查询：

```
SELECT points.id,
points.id_owner,
points.point_title,
points.point_desc,
users.user_id,
users.username
FROM points,
JOIN users ON points.id_owner = users.user_id
JOIN follows ON follows.id_followed = points.id_owner
WHERE points.deleted = 0
AND follows.id_follower = 22
ORDER BY points.id DESC
LIMIT 10 
```

解释：

```
+----+-------------+---------+--------+---------------+------------+---------+---------------------+------+----------------------------------------------+
| id | select_type | table   | type   | possible_keys | key        | key_len | ref                 | rows | Extra                                        |
+----+-------------+---------+--------+---------------+------------+---------+---------------------+------+----------------------------------------------+
|  1 | SIMPLE      | follows | ref    | FOLLOW_DUO    | FOLLOW_DUO | 4       | const               |    2 | Using index; Using temporary; Using filesort |
|  1 | SIMPLE      | users   | eq_ref | PRIMARY       | PRIMARY    | 4       | follows.id_followed |    1 |                                              |
|  1 | SIMPLE      | points  | ref    | GETPOINT1     | GETPOINT1  | 5       | users.user_id,const |  460 | Using where                                  |
+----+-------------+---------+--------+---------------+------------+---------+---------------------+------+----------------------------------------------+ 
```

这是三个表中的 SHOW INDEX ：

```
SHOW INDEX FROM points
+--------+------------+--------------+--------------+-----------------+-----------+-------------+----------+--------+------+------------+---------+
| Table  | Non_unique | Key_name     | Seq_in_index | Column_name     | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment |
+--------+------------+--------------+--------------+-----------------+-----------+-------------+----------+--------+------+------------+---------+
| points |          0 | PRIMARY      |            1 | id              | A         |       91987 |     NULL | NULL   |      | BTREE      |         |
| points |          0 | GETPOINT1    |            1 | id_owner        | A         |        NULL |     NULL | NULL   |      | BTREE      |         |
| points |          0 | GETPOINT1    |            2 | deleted         | A         |        NULL |     NULL | NULL   |      | BTREE      |         |
| points |          0 | GETPOINT1    |            3 | id              | A         |       91987 |     NULL | NULL   |      | BTREE      |         |
+--------+------------+--------------+--------------+-----------------+-----------+-------------+----------+--------+------+------------+---------+

SHOW INDEX FROM users
+-------+------------+------------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+
| Table | Non_unique | Key_name   | Seq_in_index | Column_name | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment |
+-------+------------+------------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+
| users |          0 | PRIMARY    |            1 | user_id     | A         |           4 |     NULL | NULL   |      | BTREE      |         |
+-------+------------+------------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+

SHOW INDEX FROM follows
+---------+------------+-------------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+
| Table   | Non_unique | Key_name    | Seq_in_index | Column_name | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment |
+---------+------------+-------------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+
| follows |          0 | PRIMARY     |            1 | id          | A         |           5 |     NULL | NULL   |      | BTREE      |         |
| follows |          0 | FOLLOW_DUO  |            1 | id_follower | A         |        NULL |     NULL | NULL   |      | BTREE      |         |
| follows |          0 | FOLLOW_DUO  |            2 | id_followed | A         |           5 |     NULL | NULL   |      | BTREE      |         |
| follows |          1 | id_follower |            1 | id_follower | A         |        NULL |     NULL | NULL   |      | BTREE      |         |
| follows |          1 | id_followed |            1 | id_followed | A         |        NULL |     NULL | NULL   |      | BTREE      |         |
+---------+------------+-------------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+ 
```

从现在开始，我不知道要测试什么来避免“使用临时”和“使用文件排序”......所以如果你对我有一个想法......提前谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-05T05:51:11.660

看起来有很多行正在从积分表中检查。我尝试了以下技巧来避免在我的项目中使用临时表。请执行以下操作并给出解释以查看任何改进：

1.  删除`'GETPOINT1'`除主键索引表格点表之外的所有索引。
2.  在列上添加覆盖索引`(deleted, id_owner)`。请保持上述列的顺序。
3.  如果您仍然没有看到任何改进，请删除上面的索引并再次按顺序`(id, deleted, id_owner)`和`(deleted, id_owner, id)`列添加索引，然后重试
4.  此外，您可以`follows.id_follower = 22`从 where 子句中删除并将其置于连接条件中，例如`JOIN follows ON follows.id_followed = points.id_owner AND follows.id_follower = 22`
5.  `(id_follower, id_owner)`还请按`follows`表中的顺序添加索引。

我不保证，但以上应该能够给你改进。

# mysql - MySQL查询慢，order by + group by

> ID：14317727
> 
> 赞同：0
> 
> 时间：2013-01-14T11:37:56.667
> 
> 标签：mysql

我有以下查询，自添加`ORDER BY`子句以来执行缓慢。和 的组合似乎有些问题，`GROUP BY`但`ORDER BY`我不确定从哪里开始优化。groups 表当前大约有 100k 行，并且连接中使用的所有 id 都被索引。

```
SELECT groups.name,groups.account_id,groups.description,groups.id, GROUP_CONCAT(DISTINCT categories.name) as cat, GROUP_CONCAT(DISTINCT group_tags.name) as tag
FROM groups 
LEFT JOIN group_categories ON groups.id = group_categories.group_id
LEFT JOIN categories ON group_categories.cat_id = categories.id
LEFT JOIN group_tags ON groups.id = group_tags.group_id
GROUP BY groups.id
ORDER BY case when groups.account_id = 0 then 1 else 0 end, groups.name 
```

**解释输出：**

```
SIMPLE  groups              index   NULL        PRIMARY     4    NULL                       100843  Using temporary; Using filesort
SIMPLE  group_categories    ref     group_id    group_id    4    groups.id                  1   
SIMPLE  categories          eq_ref  PRIMARY     PRIMARY     4    group_categories.cat_id    1 
```

**创建表：**

```
CREATE TABLE `groups` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `account_id` int(11) NOT NULL,
  `name` varchar(255) NOT NULL,
  `description` text NOT NULL,
  `last_updated` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `email` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `accountid` (`account_id`),
  KEY `name` (`name`)
) ENGINE=InnoDB AUTO_INCREMENT=109850 DEFAULT CHARSET=utf8; 
```

# html - 使用 Kinetic 设置同心圆衰落的延迟

> ID：14317728
> 
> 赞同：1
> 
> 时间：2013-01-14T11:37:58.470
> 
> 标签：html, geometry, delay, kineticjs, fadein

我是新手，所以我想知道是否有人可以指出我正确的方向。我需要绘制 3 个不透明的同心圆，它们需要一个接一个地出现在屏幕上。目前，虽然很微弱，但我都可以看到它们。我怎样才能让它们一个接一个地出现？这是我当前的代码：

```
<!DOCTYPE HTML>
<html>
<head>
<style>
  body {
margin: 0px;
padding: 0px;
background-color: #CCCCCC;
  }
</style>

 <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"></head>
 <body>
<div id="container"></div>
<script src="kinetic-v4.3.0-beta2.js"></script>
<script>
var fadeIn = function(shape) {
var o = shape.getOpacity();
o = o + 0.05 >=0.5 ? 0.5 : o + 0.05;
shape.setOpacity(o);
shape.getLayer().draw();
if(o !== 0.4) {
    setTimeout(function() {
            fadeIn(shape).delay(3000*3);
        }, 720);
 }
};
  var stage = new Kinetic.Stage({
    container: 'container',
    width: 578,
    height: 200
  });

  var layer = new Kinetic.Layer();

  var circle = new Kinetic.Circle({
    x: stage.getWidth() / 2,
    y: stage.getHeight() / 2,
    radius: 70,
    fill: '#CCCCCC',
    stroke: 'yellow',
    strokeWidth: 8,
    opacity: 0.1

  });
   setTimeout(function() {
        fadeIn(circle).delay(3000*3);
    }, 1720);

    layer.add(circle);

    var circle2 = new Kinetic.Circle({
    x: stage.getWidth() / 2.1,
    y: stage.getHeight() / 2.1,
    radius: 70,
    fill: '#CCCCCC',
    stroke: 'yellow',
    strokeWidth: 8,
    opacity: 0.1

  });
   setTimeout(function() {
        fadeIn(circle2).delay(3000*3);
    }, 5600);

  // add the shape to the layer
  layer.add(circle2);

  var circle3 = new Kinetic.Circle({
    x: stage.getWidth() / 2.2,
    y: stage.getHeight() / 2.2,
    radius: 70,
    fill: '#CCCCCC',
    stroke: 'yellow',
    strokeWidth: 8,
    opacity: 0.1

  });
   setTimeout(function() {
        fadeIn(circle3).delay(3000*3);
    }, 12000);

  // add the shape to the layer
  layer.add(circle3);

  // add the layer to the stage
  stage.add(layer);

   </script>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T12:10:07.677

您可以在初始化它们时隐藏圆圈，即`circle.hide()`在将它们添加到图层之前，然后在调用超时回调时显示它们，例如对于 circle2，像这样使用它。

```
 setTimeout(function() {
        circle2.show();
        fadeIn(circle2).delay(3000*3);
    }, 5600); 
```

# android - 关闭以前的活动并在项目单击时打开新活动

> ID：14317730
> 
> 赞同：1
> 
> 时间：2013-01-14T11:38:05.540
> 
> 标签：android, android-layout, android-intent

大家好，我创建了一个左侧可用的列表视图。在每个项目上单击打开新活动打开，但是当我在列表项之间遍历时，新活动在第一次尝试后不会打开。在每种情况下，我都使用 finish() 方法关闭了当前活动。但它似乎不起作用。这是代码片段..让我知道是否有人可以提供帮助..赞赏

```
 if (listname.equalsIgnoreCase("Time Table")) {
        intent = new Intent(getApplicationContext(), TimeTable.class);
        startActivity(intent);
        Attendance.this.finish();
    } else if (listname.equalsIgnoreCase("Announcements")) {
        intent = new Intent(getApplicationContext(), Announcement.class);
        startActivity(intent);
        Attendance.this.finish();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:30:36.767

我找到了解决我自己问题的方法，问题是我没有将一些需要的值转发给下一个活动，例如用户 ID、密码等。所以我使用 SharedPreferences 将需要的值传递给其他活动。这是示例..我希望它对其他人有用。现在已创建并提交共享首选项

```
 SharedPreferences prefs = getSharedPreferences("ABCPreferences",MODE_PRIVATE);
                        SharedPreferences.Editor editor = prefs.edit();
                        editor.putString("UserId", login);  
                        editor.putString("password", password);
                        editor.putString("IsInside", Inside);
                        editor.putString("UserType", "S");
                        editor.commit(); 
```

通过共享偏好访问值，很简单

```
String listname = ((TextView)view).getText().toString();
                    String userid = getSharedPreferences("UMSPreferences",MODE_PRIVATE).getString("UserId", login);
                    String paswrd = getSharedPreferences("UMSPreferences",MODE_PRIVATE).getString("password", password); 
```

# jquery - jQuery - 达到限制时禁用剩余的复选框

> ID：14317732
> 
> 赞同：4
> 
> 时间：2013-01-14T11:38:15.327
> 
> 标签：jquery, counter, checkbox

相对 jQuery 新手：

我想显示一组复选框，用户可以选择其中五个。

我有一些在 jsfiddle 中验证的 jquery 代码，但它显然没有做任何事情。

谁能看到我遗漏了什么明显的东西？

我有一组复选框，然后是以下 javascript：

```
function countChecked() {                             
    var n = $("input:checked").length;                       
    alert(n);                          

    if (n == 5) {                                                        
        $(':checkbox:not(:checked)').prop('disabled', true);  
    }                                                        
    else {                                                        
        $(':checkbox:not(:checked)').prop('disabled', false); 
    }
}    
$(":checkbox").click(countChecked); 
```

jsfiddle 在[这里](http://jsfiddle.net/Vg4ty/ "jsfiddle")

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T11:40:11.193

Your code works fine, you just needed to set the framework to `jQuery` on the left hand side.

[**Update fiddle**](http://jsfiddle.net/RoryMcCrossan/Vg4ty/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T11:41:25.440

你在你的小提琴中选择了 Mootools 1.4.5 .. 在你的下拉列表中选择 Jquery 1.8.3 它将工作..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T11:40:30.447

Your jsfiddle is not working because you are setting it using mootolls, not jquery:

[http://jsfiddle.net/Vg4ty/3/](http://jsfiddle.net/Vg4ty/3/)

```
JQUERY 
```

# ant - 附加到 Ant 构建文件中的行尾

> ID：14317735
> 
> 赞同：0
> 
> 时间：2013-01-14T11:38:21.033
> 
> 标签：ant, build, ant-contrib

所以我有一个 ant 构建文件，它需要修改另一个名为 modify.properties 的文件。在这个属性文件中，我有这样一行 -

```
 CSDT_FLAG_CSELEMENT_FWUIDS=CSElement:4f826165-4744-4d78-63f0-4f437eb17872,b2db8c3d-ec81-4c6e-9425-ff0860f4511b,13f5a17a-8dac-443b-bcf8-b1675e660c53 
```

在我的构建文件中，我将搜索术语 CSElement 并获取包含该术语的行

```
 <loadfile
    property="csdtFlagPropertiesFile"
        srcFile="../cms-distribution/src/main/x/csdtflags.properties">
            <filterchain>
                <filterreader classname="org.apache.tools.ant.filters.LineContainsRegExp">
                        <param type="regexp" value="CSElement"/>                                                                            
                </filterreader>
            </filterchain>
    </loadfile> 
```

现在我有了 CSDT_FLAG_CSELEMENT_FWUIDS=CSElement:4f826165-4744-4d78-63f0-4f437eb17872,b2db8c3d-ec81-4c6e-9425-ff0860f4511b,13f5a17a-8dac-443b-bcf8-b1675e660regex5但是我无法将其写回文件中。诸如回显消息之类的消息将重写整个文件，但我只想用另一行替换该行。替换工作，但这会将它保存到一个属性中，我不知道如何在文件上重写它。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T17:53:56.583

您可以使用[ReplaceRegExp](http://ant.apache.org/manual/Tasks/replaceregexp.html)任务在文件中进行替换。

# hadoop - hadoop 字数统计并获取出现的最大字数

> ID：14317738
> 
> 赞同：2
> 
> 时间：2013-01-14T11:38:44.613
> 
> 标签：hadoop, max, word-count

我对hadoop很陌生。我已经完成了字数统计，现在我想做一个修改。

我想获取文本文件中出现次数最多的单词。如果，正常的字数统计程序给出一个输出：

```
a 1
b 4
c 2 
```

我想编写只给我输出的程序

```
b 4 
```

这是我的减速器功能::

```
public static class Reduce extends Reducer<Text, IntWritable, Text, IntWritable> 
{

 int max_sum=0;
 Text max_occured_key;

 public void reduce(Text key, Iterable<IntWritable> values, Context context) 
  throws IOException, InterruptedException 
  {
    int sum = 0;
    for (IntWritable val : values) 
    {
        sum += val.get();           
    }
    if(sum > max_sum)
    {
        max_sum = sum;
        max_occured_key = key;

    }

    context.write(max_occured_key, new IntWritable(max_sum));
    //context.write(key, new IntWritable(sum));

  } 
```

}

但它没有给出正确的输出。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T12:17:13.843

您在每个 reduce 函数的末尾写出迄今为止的最大值 - 因此每个 reducer 将获得多个条目。当您将键的引用复制到 max_occured_key 变量（而不是复制值）时，您还会遇到引用重用问题。

您可能应该修改如下：

*   在构造时初始化`max_occured_key`变量（为空文本）
*   调用`max_occured_key.set(key);`而不是使用 equals 赋值 - 对 reduce 方法的所有迭代重复使用 key 参数的引用，因此实际对象将保持不变，只是每次迭代都会修改底层内容
*   覆盖清理`method`并将 context.write 调用移动到该方法 - 这样您每个减速器只会获得一个 K，V 输出对。

例如：

```
@Override
protected void cleanup(Context context) {
  context.write(max_occured_key, new IntWritable(max_sum));
} 
```

一旦所有数据都通过您的 map 或 reduce 任务，就会调用 cleanup 方法（并且每个任务实例都会调用该方法（因此，如果您提供了 10 个 reducer，则将为每个实例调用此方法）。

# compiler-construction - 开始编译器项目之前的自述文件

> ID：14317741
> 
> 赞同：-3
> 
> 时间：2013-01-14T11:38:55.777
> 
> 标签：compiler-construction, compiler-development

基本上，这首先是一个梦想……*有一天我可能拥有自己的编程语言！*，但它很快就会变成一场噩梦，就在你寻找*如何构建编译器？*.

像你们大多数人一样，我花了太多时间阅读龙书以及许多其他文章、资源、论坛和问答。我最终想到的是大量了解许多不必要的东西，例如*所有主要的解析*技术甚至*编译器优化*，但仍然不清楚我最终需要用我的编译器项目做什么。

问题在于你需要从一开始就理解（和掌握）整个事情的所有书籍和其他资源！您需要理解和实现解析器，而您仍然不知道接下来应该做什么。顺便说一句，我假设您是该主题的真正初学者，但是我知道对于某些人来说并非如此。

总有一天我会停止阅读这些材料。我说了解每一个细节就足够了，我想做一些真实的事情。所以，我开始问这样的问题：*编译器的目标是什么？*好吧，我的答案是*为处理器生成可理解的二进制代码。*所以，我说*那应该怎么样？*好吧，类似这样的事情，仅此`statement1; statement2;`而已`0xAABBCCDD`。

然后我从头开始一切。我从最简单的语法和机器代码开始。我最终拥有的是一个能够为英特尔生成纯二进制代码的工作编译器。它只理解一些指令，但它是一个真正的工作编译器，但是一个非常简单的编译器。

后来我改进了解析器等，从那以后我感觉更快乐了。现在，我在需要时使用所有这些材料。我的问题是我非常努力地理解和掌握一切，因为我认为（大多数人都说）如果不阅读所有这些书籍和文章，我就无法制作编译器，即使是简单的编译器。

在这里，我想请您列出在开始任何编译器项目之前您认为有必要了解的想法和概念。你认为它们足够*简单*，初学者可以阅读和理解，更好地描绘整个项目，然后继续编写实际代码并感受真正的编译器是如何工作的。

作为一个例子，请参见我的答案！

PS 顺便说一句，在你否决这个问题之前，让我再次澄清一下，我并不是说这些材料不好。我只是说这个主题非常模糊。错误的方法是一次完成所有事情。更智能的解决方案是从*Hello World 开始！*例如，而不是与 GCC 等具有相同功能的项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T11:38:55.777

最重要的是了解*处理器*是如何工作的。您首先需要选择一个特定的目标，但您显然可以稍后对其进行扩展。制造商的文档也会对您有很大帮助。

**热身视频**

1.  [CPU 简介 @ Youtube](https://www.youtube.com/watch?v=iaui8sPWEx4)
2.  [CPU 如何通过](https://www.youtube.com/watch?v=hBnMCe0Du6o)[MSX88](http://msx88.diatel.upm.es/)工作 @ Youtube演示
3.  [CPU 寄存器 @ Youtube](https://www.youtube.com/watch?v=EBThj0ZyldE)
4.  [CPU 寄存器 @ Youtube](https://www.youtube.com/watch?v=Mqv4lXYY4VU)
5.  [8086注册集@Youtube](https://www.youtube.com/watch?v=hoh9HB-CJPo)
6.  [x64 寄存器集@Youtube](https://www.youtube.com/watch?v=l4jEBxSOSuk)
7.  [计算机如何添加数字 @ Youtube](https://www.youtube.com/watch?v=VBDoT8o4q00)
8.  [旗帜注册@Youtube](https://www.youtube.com/watch?v=7ragCcJRJFs)
9.  [系统组织：CPU-RAM-I/O @ Youtube](https://www.youtube.com/watch?v=-ECNMxZBLa0)
10.  不是英文的，但值得一看：[CPU Builder @ Youtube](https://www.youtube.com/user/theCpuBuilder?feature=watch)

**文章**

1.  [CPU做什么@eHow](http://www.ehow.com/how-does_4914716_what-does-cpu-do.html)
2.  [CPU 的工作原理@硬件秘密](http://www.hardwaresecrets.com/article/209)

**硬件手册**

1.  [Intel 64 和 IA-32 架构软件开发人员手册](http://www.intel.com/content/www/us/en/processors/architectures-software-developer-manuals.html)
2.  [AMD 开发人员指南和手册](http://developer.amd.com/resources/documentation-articles/developer-guides-manuals/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T20:33:01.507

[flex](http://westes.github.io/flex/manual/Simple-Examples.html)和[bison](http://www.gnu.org/software/bison/manual/bison.html#Examples)手册为编写基本解释器提供了一些非常简单的示例：

我可以分别使用“info flex”和“info bison”命令在我的本地机器上访问它们。

编辑：刚刚看到并认为我会分享这个类似问题的答案：[https ://stackoverflow.com/a/15743032/1003855](https://stackoverflow.com/a/15743032/1003855)

# jakarta-ee - JSF 2.1.7 要求

> ID：14317742
> 
> 赞同：1
> 
> 时间：2013-01-14T11:38:57.990
> 
> 标签：jakarta-ee, servlets, jsf-2

JSF 2.1.7（和一般的 2.1.x）需要 Servlet 3.0 还是只需要 2.5？如果您查看 pom [http://repo1.maven.org/maven2/com/sun/faces/jsf-api/2.1.7/jsf-api-2.1.7.pom](http://repo1.maven.org/maven2/com/sun/faces/jsf-api/2.1.7/jsf-api-2.1.7.pom)，您会发现 servlet 3，但似乎引用 JSF 2.2（另请参见标签名称：“Oracle 对 JSF 2.2 规范 API 的实现。”）

我在网上找到了这个问题的不同答案。谁能帮我？一些链接：

[加载具有复合组件Mojarra Java EE 5/6 兼容性](https://stackoverflow.com/questions/9597568/mojarra-java-ee-5-6-compatibility/9597815#9597815) [的页面时出现 Mojarra JSF 2.1.9 异常](https://stackoverflow.com/questions/11029472/mojarra-jsf-2-1-9-exception-while-loading-a-page-which-has-got-composite-compone)[https://forums.oracle.com/forums/thread.jspa?messageID=10140121](https://forums.oracle.com/forums/thread.jspa?messageID=10140121)

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T12:00:59.827

The Servlet 3.0 requirement in Mojarra 2.1 is merely for the "optional stuff", such as auto-registration of the `FacesServlet` on URL patterns `*.jsf`, `*.faces` and `/faces/*` without the need to write it down in webapp's own `web.xml`.

Mojarra 2.1 is however backwards compatible with Servlet 2.5, you'll only miss the "optional" stuff and among others need to register the `FacesServlet` in `web.xml` yourself (although I would personally [recommend](https://stackoverflow.com/questions/3008395/jsf-facelets-sometimes-i-see-the-url-is-jsf-and-sometimes-xhtml-why/3008504#3008504) to do it anyway on an URL pattern of `*.xhtml`).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T11:59:08.090

Take a look at [specification](http://download.oracle.com/otndocs/jcp/jsf-2_1-mrel2-eval-oth-JSpec/). Preface (Related technologies) says that one of requirements is Servlet API version 2.5, so you don't need version 3.0\. Also this [page](http://www.java.net/forum/topic/glassfish/glassfish-webtier/mojarra-jsf-21x-servlet-requirement-or-dependency-0) quotes Ed Burns who states that is dependent only on 2.5

# arduino - 伺服电机对其他事物的反应

> ID：14317744
> 
> 赞同：7
> 
> 时间：2013-01-14T11:38:58.857
> 
> 标签：arduino

我正在使用 Arduino，我连接了一个伺服电机和一个普通电机。它们都可以工作，但是当我启动正常的电机脚本时，伺服电机会做一些小的痉挛。谁能帮我解决这个问题？

```
 // Includes
#include <Servo.h> 

// Aanmaken van de variabelen voor in de code

int ledPin = 13;
const int motorPin = 2;
int usbnumber = 0;
Servo stuurServo;   // create servo object to control a servo 
int pos = 90;        // variable to store the servo position 

// De eerste setup maken
void setup()
{
    pinMode(ledPin, OUTPUT);
    pinMode(motorPin, OUTPUT);
    stuurServo.attach(12);
    Serial.begin(9600);
    stuurServo.write(pos);
}

void loop()
{
    if (Serial.available() > 0) {
        usbnumber = Serial.read();

    }

    if (usbnumber > 0) {
        if (usbnumber == 1){ // Lampje knipperen
            digitalWrite(ledPin, HIGH);
            delay(1000);
            digitalWrite(ledPin, LOW);
            delay(500);
            digitalWrite(ledPin, HIGH);
            delay(1000);
            digitalWrite(ledPin, LOW);
            delay(500);
            digitalWrite(ledPin, HIGH);
            delay(1000);
            digitalWrite(ledPin, LOW);
            delay(500);
        }else if(usbnumber == 2){ // Motor aan voor 5 seconden
            digitalWrite(motorPin, HIGH);
            delay(20000);
            digitalWrite(motorPin, LOW);
        }else if(usbnumber == 3){ // stuur servo +10 graden
            if(pos != 180){
              pos + 10;
              stuurServo.write(pos);
            }
        }else if(usbnumber == 4){ // stuur servo -10 graden
            if(pos != 0){
              pos - 10;
             stuurServo.write(pos);
            }
        }else if(usbnumber == 5){ // stuur servo liks
             pos = 0;
             stuurServo.write(pos);
        }else if(usbnumber == 6){ // stuur servo rechts
             pos = 180;
             stuurServo.write(pos);
        }else{
            delay(500);
        }
        usbnumber = 0;
    }
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T20:40:47.670

大多数（爱好）伺服电机在通电时会抽搐或有点抽搐，特别是如果您在驱动伺服（提供位置控制信号）之前为电机供电。解决方案是先将控制线写入伺服器，然后再通电。一些简单的解决方案包括：

1.  通过可以关闭/打开的东西来控制伺服的电源（PWM，MOSFET，其他人在这里帮忙吗？）
2.  有一个辅助电源手动开关，您可以在控制器启动并运行后进行切换。

在驱动位置控制线之前，如果没有某种方法可以让电路在伺服没有电源的情况下启动，基本上你无法在代码中做任何事情。

# asp.net - 如何在 Visual Studio 2010 中使用 .sql 文件创建数据库

> ID：14317749
> 
> 赞同：0
> 
> 时间：2013-01-14T11:39:16.560
> 
> 标签：asp.net, sql-server, database, visual-studio-2010

我从 Internet 上下载了一个 asp.net webform 应用程序，它包含一个用于创建数据库和表的 .sql 文件。我是 asp.net/visual studio 的新手，几天来一直坚持这一点。需要帮忙。

这是 web.config 的内容

```
<configuration>
<connectionStrings>
    <add name="MyConsString" connectionString="Data Source=localhost\SQLEXPRESS; Initial Catalog=myslideshow; Integrated Security=SSPI;" providerName="System.Data.SqlClient"/>
</connectionStrings>
<system.web>
    <compilation debug="true" targetFramework="4.0"/>
<httpRuntime executionTimeout="240" maxRequestLength="10240000" />
</system.web> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T11:50:07.310

1.  在 Visual Studio 中打开扩展名为 .sql 的文件
2.  右键点击
3.  执行脚本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T07:11:17.150

1.  打开 SQL 文件
2.  使用 CTRL-SHIFT-E

# windows - 通过命令行重命名网络接口名称

> ID：14317750
> 
> 赞同：3
> 
> 时间：2013-01-14T11:39:19.227
> 
> 标签：windows, networking, cmd, ethernet, netsh

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-02-14T18:41:26.710

## netsh（MS 试图让我们摆脱并放弃的工具）

获取 WLAN 接口名称：`netsh wlan show interfaces`
      **help states** : *show interfaces - 显示系统上的无线 LAN 接口列表。*
获取 LAN 接口名称：`netsh lan show interfaces`
      **help states** : *show interfaces - 显示系统上当前有线接口的列表。*
获取所有接口的名称：`netsh interface show interface`
      **帮助状态**：*show interfaces - 显示接口。*

LAN 的命令确实需要Wired AutoConfig 服务，该服务通常不启动。

此批处理脚本将启动服务，获取（最后一个）LAN 接口名称，将其更改为新名称，再次停止有线自动配置服务。

```
sc.exe start dot3svc

for /f "tokens=1* delims=: " %%a in ('netsh lan show interfaces') do if %%a == Name set activeAdapter=%%b
echo %activeAdapter%
netsh interface set interface name="%activeAdapter%" newname="Ethernet"

sc.exe stop dot3svc 
```

限制：

*   假设只有一个有线接口
*   它将停止有线自动配置服务，无论它在开始时是否正在运行

对于 Wifi 接口，将上述脚本 'lan' 更改为 'wlan' 并删除 sc.exe 服务启动/停止

* * *

## 电源外壳

为了更好地控制重命名的接口，PowerShell 将是一个更容易的选择。

这可能在大多数情况下都有效：
`Get-NetAdapter | Where-Object { $_.HardwareInterface -eq $True -and $_.MediaType -eq "802.3" } | Rename-NetAdapter -NewName "Ethernet"`

`HardwareInterface`将消除虚拟接口，例如 VMWare
`MediaType` `802.3`将只显示“有线”接口而不显示 Wifi、宽带或其他接口。

在脚本文件中，使用上述版本的命令，简写版本为：
`Get-NetAdapter | ? HardwareInterface | ? MediaType -eq "802.3" | Rename-NetAdapter "Ethernet"`

还有更多选项如何选择所需的接口。检查可以选择它的所有参数：
`(Get-NetAdapter)[0] | Format-List -Property * -Force`

例如
，列出所有由 Realtek 制造的（Realtek 供应商 10ec，Intel：8086）：
`Get-NetAdapter | ? ComponentID -like "PCI\VEN_10EC*"`

非虚拟：
`Get-NetAdapter | ? Virtual -eq $false`

连接器存在：
`Get-NetAdapter | ? ConnectorPresent`

然后是 WMI 对象
`Get-WmiObject -Class Win32_NetworkAdapterConfiguration`

* * *

## 登记处

如果您更改了网络适配器卡并且新的网络适配器使用名称：*Ethernet 2*或类似名称，并且您想将其重命名为“Ethernet”，则会出现错误提示：

```
"You were not connected because a duplicate name exists on the network. If joining a domain, go to System in Control Panel to change the computer name and try again. If joining a workgroup, choose another workgroup name." 
```

这当然是关于重命名计算机的错误消息。
PowerShell 会正确地说：`An attempt was made to create an object and the object name already existed.`

但是去那里`Control Panel\Network and Internet\Network Connections`尝试重命名界面也无济于事。

似乎这种情况的唯一选择是在这些注册表路径中找到相应的键：

```
HKEY_LOCAL_MACHINE\SYSTEM\Setup\Upgrade\NetworkDriverBackup\Control\Network\{4d36e972-e325-11ce-bfc1-08002be10318}\
HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Network\{4D36E972-E325-11CE-BFC1-08002BE10318}\
HKEY_LOCAL_MACHINE\SYSTEM\Setup\Upgrade\NetworkDriverBackup\Control\NetworkSetup2\Interfaces\ 
```

并删除旧界面的密钥（不是上面写的整个路径！），然后重新启动。
通过 cmd 批处理、PS 或在控制面板中重命名现在应该可以工作了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T12:07:18.537

您可以使用 Powershell 做很多事情，这取决于您的服务器的新程度，可能会安装它。谷歌“Get-WmiObject -Class Win32_NetworkAdapterConfiguration”查看更多信息。

# plsql - Oracle PL/SQL: get tag values while looping

> ID：14317753
> 
> 赞同：0
> 
> 时间：2013-01-14T11:39:28.320
> 
> 标签：plsql, xml-parsing

## I have an xml with the following type of content

```
<DATA>
  <CUSTOMER>
    <BASIC_INFO>
         <F_NAME>TOM<F_NAME>
         <M_NAME>AND<M_NAME>
         <L_NAME>HANKS<L_NAME>
    </BASIC_INFO>
    <ADDITIONAL_INFO>
         <EMAIL>TOM.HANKS@GMAIL.COM</EMAIL>
         <PHONE_NO>22211132</PHONE_NO>
    </ADDITIONAL_INFO>
  </CUSTOMER>

  <CUSTOMER>
    <BASIC_INFO>
         <F_NAME>TOM<F_NAME>
         <L_NAME>HANKS<L_NAME>
    </BASIC_INFO>
    <ADDITIONAL_INFO>
         <EMAIL>TOM.HANKS@GMAIL.COM</EMAIL>
    </ADDITIONAL_INFO>
  </CUSTOMER>

  <CUSTOMER>
    <BASIC_INFO>
         <F_NAME>TOM<F_NAME>
    </BASIC_INFO>
    <ADDITIONAL_INFO>
        <PHONE_NO>22211132</PHONE_NO>
    </ADDITIONAL_INFO>
  </CUSTOMER> 
```

I want to store the information of a customer in the table with columns as F_NAME,M_NAME,L_NAME,PHONE_NO,EMAIL and each value should go in the respective column

Now the point to be noted is that for the customers for which some information is not there for them the value in the table should not be inserted.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:04:18.970

您可以分两步完成。

首先创建数据的关系表示：

来自[sql-plsql-de.blogspot.co.at](http://sql-plsql-de.blogspot.co.at/2007/10/xml-dokumente-relational-aufbereiten.html)的示例：

```
create table xmltest (
  dokument xmltype
)
/

insert into xmltest values (xmltype(
'<blog>
  <name>SQL und PL/SQL</name>
  <autor>Carsten Czarski</autor>
  <themen>
    <thema>XML</thema>
    <thema>PL/SQL</thema>
  </themen>
</blog>'
))
/ 
```

这个说法：

```
select
  extractvalue(dokument, '/blog/name') as blog_name,
  extractvalue(dokument, '/blog/autor') as blog_autor,
  extractvalue(value(thema), '/thema/text()') as thema
from xmltest,
  table(xmlsequence(extract(dokument, '/blog/themen/thema'))) thema
/ 
```

重新荡妇：

```
BLOG_NAME            BLOG_AUTOR      THEMA
-------------------- --------------- --------------------
SQL und PL/SQL       Carsten Czarski XML
SQL und PL/SQL       Carsten Czarski PL/SQL 
```

现在您以关系方式拥有它，您可以循环它：

```
for cur in (select * from ...) 
loop
  if cur.column_a is not null then
    --insert
  end if;
end loop; 
```

这很慢，但即使你有复杂的规则也能保持可读性。或者，您可以使用“普通”SQL 或合并语句。

# java - Merging mp4 video files on Android

> ID：14317754
> 
> 赞同：5
> 
> 时间：2013-01-14T11:39:29.793
> 
> 标签：java, android, video, merge, mp4

I am capturing a video in my android app and saving it . Now I want to merge two mp4 files together and play it . I am not able to merge the mp4 files as I am not aware of mp4 header structure . Can anybody guide me how to go for it ?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T11:38:10.903

使用 Mp4parser 解决了我的问题。我能够合并 mp4 视频文件。图书馆链接 - [http://code.google.com/p/mp4parser](http://code.google.com/p/mp4parser/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T11:47:16.063

视频编辑器的此[代码](https://android.googlesource.com/platform/frameworks/media/libvideoeditor/)可能会对您有所帮助。

# html - 带跨度的锚点不适用：对 IE 的积极影响

> ID：14317758
> 
> 赞同：0
> 
> 时间：2013-01-14T11:39:55.853
> 
> 标签：html, css, internet-explorer, cross-browser

在 IE 上正确呈现这个的一些想法？？？？:active 只有当我点击跨区域时才会出现。我想在不使用 javascript 的情况下做到这一点。在 chrome 和 firefox 上运行完美。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Documento sem título</title>
<style type="text/css">
a
{
    padding:20px;
    border:1px;
    display:block;
}

a span
{
    width:96px;
    height:96px;
    display:block;
    border:1px solid;
}

a:hover
{
    background-color:#ccc;
}

a:active
{
    background-color:#666;
}

</style>
</head>

<body>
<a href="#">    
    <span>casa</span>
</a>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T11:52:37.787

您可以使用位于其正上方的 a 元素的伪元素来解决此问题：

```
a {
  position: relative;
}
a:before {
  content: "";
  position: absolute;
  left: 0;
  right: 0;
  top: 0;
  bottom: 0;
} 
```

缺点是您无法选择 a 元素内的任何文本。

IE8+ 支持伪元素。IE7 的解决方法需要 CSS 表达式，但因为您不想使用 Javascript……</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T11:58:20.703

在你的 CSS 上试试这个代码

```
 ul.active_a li a:link    { color: red;} 
```

这段代码可以帮助你.. [http://jsfiddle.net/easwee/WVrzu/16/](http://jsfiddle.net/easwee/WVrzu/16/)

我用IE测试过。它工作得很好。

祝你好运 ！

# javascript - :hover persistent when moving DOM element

> ID：14317760
> 
> 赞同：1
> 
> 时间：2013-01-14T11:40:03.980
> 
> 标签：javascript, jquery, html, css, dom

When moving a DOM element from under the mouse the CSS :hover state stays persistent until the mouse pointer is moved.

[http://jsfiddle.net/mMzPd/](http://jsfiddle.net/mMzPd/) ( div element will be red after click until user moves the mouse. )

I'm looking for any recommended solutions to turn the hover off or reset hover state when the DOM element moves. Alternatively when the user clicks the element.

I've understood that you can't directly control CSS states through javascript so my best current solution is to toggle a HTML class with Jquerys mouseenter() and mouseleave(). I don't really find this fix elegant, nor does it scale well to a browser with javascript disabled.

```
$('div').mouseenter(function(){
  $(this).addClass('hover');
});

$('div').mouseleave(function(){
  $(this).removeClass('hover');
});

$('div').click(function(){
  $(this).animate({'margin-top':'100px'});
  $(this).removeClass('hover');
}); 
```

( [http://jsfiddle.net/mMzPd/4/](http://jsfiddle.net/mMzPd/4/) )

Any solutions closer to pure Css out there? Would ideally like to keep style rules out of my Javascript.

This issue is showing in Chrome and Internet Explorer. Firefox toggles the :hover "correctly".

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T11:49:07.230

在 :hover 之后使用另一个伪类选择器怎么样？

```
div:active{
  background-color:green;
} 
```

[http://jsfiddle.net/mMzPd/6/](http://jsfiddle.net/mMzPd/6/)

# rdf - 医学领域的示例本体

> ID：14317764
> 
> 赞同：2
> 
> 时间：2013-01-14T11:40:14.637
> 
> 标签：rdf, semantic-web, ontology, owl, protege

我正在寻找与医学领域相关的清晰示例本体。也许是为了说明一些道理。或者有人对我可以用 Protégé 实施的小型医学示例有一个好主意吗？

提前致谢

马丁

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T13:50:55.213

[基因本体](http://www.geneontology.org/)是生物医学领域的一个很好的代表。[在这里](http://www.geneontology.org/GO.ontology.relations.shtml)，您可以找到使用 Protege 实施的详细示例。

您还可以查看身体解剖结构的[基础模型](http://fme.biostr.washington.edu/FME/index.html)。

如果您正在寻找一个简单的层次结构/受控词汇表，您可以查看[schema.org](http://schema.org/docs/meddocs.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T15:16:07.463

疾病本体：[http ://www.disease-ontology.org/](http://www.disease-ontology.org/)

您还可以在以下网址找到一堆与生物学相关的本体：[http ://bioportal.bioontology.org/](http://bioportal.bioontology.org/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T16:32:02.423

[GALEN](http://www.opengalen.org/)是一种描述医学概念的富有表现力的 OWL 本体。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-25T17:45:29.310

一些关于为医学领域开发本体的视频可以在这里找到：http: [//ontology.buffalo.edu/smith/](http://ontology.buffalo.edu/smith/)

# ios - how to allow zooming without showing black background near borders in ios

> ID：14317765
> 
> 赞同：2
> 
> 时间：2013-01-14T11:40:16.277
> 
> 标签：ios, uigesturerecognizer, zooming

if touchlocation for zoom is near the corners, black background shown and not zoomed to correct location i want. i want to zoom to touch location but not showing black background. staying with borders

i think it is better to explain with code and screen shots.

note:tileMap size is 800x480 so i scale it to 480x320..

```
- (id) init {

    if( (self=[super init]) ) {

    self.scaleY=0.66f;
    self.scaleX=0.6f;
    self.anchorPoint = ccp(0,0);
....
}

- (void)handleDoubleTapFrom:(UITapGestureRecognizer *)recognizer {

CGPoint touchLocation = [recognizer locationInView:[[CCDirector sharedDirector]view] ];

if(!isGameFinished){
    if(zoomPerformed == NO ) {

        id zoomIn = [CCScaleTo actionWithDuration:0.3f scale:1];
        id sequence = [CCSequence actions:zoomIn, nil];
        [self runAction:sequence ];

        CGSize winSize = [[CCDirector sharedDirector] winSize];
        CGPoint center = ccpMult(ccpFromSize(winSize),0.5);
        center.x = center.x / ((800/480)/0.666f);
        center.y = center.y / 0.666f;
        CGPoint zoomPoint =ccpSub(center,touchLocation);
        zoomPoint = [self myBoundaries:zoomPoint];
        zoomPoint.y = -1 * zoomPoint.y;

        [self runAction:[CCMoveBy actionWithDuration:0.3f position:zoomPoint]];
        zoomPerformed = YES;

        self.anchorPoint = ccp(0,0);

    }else{
    zoomPerformed = NO;
        id moveto = [CCMoveTo actionWithDuration:0.3f position:ccp(0,0)];
        id zoomIn = [CCScaleTo actionWithDuration:0.3f scaleX:0.6 scaleY:0.666];
        id sequence = [CCSequence actions:moveto,zoomIn, nil];
        [self runAction:sequence];
        self.anchorPoint = ccp(0,0);

    }
}
}

-(CGPoint)myBoundaries:(CGPoint)distanceToCenter{
CGSize tileSize = self.tileMap.boundingBox.size;    
CGPoint moveBySize = ccpMult(distanceToCenter,(tileSize.width/tileSize.height));
moveBySize.x = (moveBySize.x*0.6f);
moveBySize.y = (moveBySize.y*0.666f) ;
return moveBySize;
} 
```

![before zoom ](../Images/45f853f0d76b52ffd4859f662acd8f88.png)

![after zooming to top left corner](../Images/de640fa6804a11e0eacb677ef3266d96.png)

# android - ListView 项目背景地狱

> ID：14317767
> 
> 赞同：3
> 
> 时间：2013-01-14T11:40:19.933
> 
> 标签：android, android-listview

因为复选框不是我的项目的一个选项，所以我希望检查项在检查时具有背景。从 2.3 开始支持，我还没有设法解决这个问题。选择是正确的，但我在屏幕上看到的不是。随机行的随机颜色..

![在此处输入图像描述](../Images/7b89db06f51e87bd5188b76fefe2ef50.png)

拳头我有这个

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true" android:drawable="@drawable/abs__list_selector_holo_light" />
    <item android:state_checked="true" android:drawable="@drawable/abs__list_selector_holo_light" />
    <item android:state_selected="true" android:drawable="@drawable/abs__list_selector_holo_light" />
       <item  android:drawable="@drawable/abs__list_selector_holo_light" />
</selector> 
```

-

```
 public class CheckableRelativeLayout extends RelativeLayout implements
        Checkable {

    private boolean isChecked;
    private List<Checkable> checkableViews;

    private static final int[] CheckedStateSet = {
        R.attr.state_checked
    };

    public CheckableRelativeLayout(Context context, AttributeSet attrs,
            int defStyle) {
        super(context, attrs, defStyle);
        initialise(attrs);
    }

    public CheckableRelativeLayout(Context context, AttributeSet attrs) {
        super(context, attrs);
        initialise(attrs);
    }

    public CheckableRelativeLayout(Context context, int checkableId) {
        super(context);
        initialise(null);
    }

    /*
     * @see android.widget.Checkable#isChecked()
     */
    public boolean isChecked() {
        return isChecked;
    }

    /*
     * @see android.widget.Checkable#setChecked(boolean)
     */
    public void setChecked(boolean isChecked) {
        this.isChecked = isChecked;
        for (Checkable c : checkableViews) {
            c.setChecked(isChecked);
        }
    }

    /*
     * @see android.widget.Checkable#toggle()
     */
    public void toggle() {
        this.isChecked = !this.isChecked;
        for (Checkable c : checkableViews) {
            c.toggle();
        }
    }

    @Override
    protected void onFinishInflate() {
        super.onFinishInflate();

        final int childCount = this.getChildCount();
        for (int i = 0; i < childCount; ++i) {
            findCheckableChildren(this.getChildAt(i));
        }
    }

    @Override
    protected int[] onCreateDrawableState(int extraSpace) {
        final int[] drawableState = super.onCreateDrawableState(extraSpace + 1);
        if (isChecked()) {
            mergeDrawableStates(drawableState, CheckedStateSet);
        }
        return drawableState;
    }

    @Override
    public boolean performClick() {
        toggle();
        return super.performClick();
    }

    /**
     * Read the custom XML attributes
     */
    private void initialise(AttributeSet attrs) {
        this.isChecked = false;
        this.checkableViews = new ArrayList<Checkable>(5);
    }

    /**
     * Add to our checkable list all the children of the view that implement the
     * interface Checkable
     */
    private void findCheckableChildren(View v) {
        if (v instanceof Checkable) {
            this.checkableViews.add((Checkable) v);
        }

        if (v instanceof ViewGroup) {
            final ViewGroup vg = (ViewGroup) v;
            final int childCount = vg.getChildCount();
            for (int i = 0; i < childCount; ++i) {
                findCheckableChildren(vg.getChildAt(i));
            }
        }
    }
} 
```

我得到的是这个

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-14T12:10:24.913

`Checkable`这是制作视图的一个干净示例：

```
import android.R;
import android.content.Context;
import android.util.AttributeSet;
import android.widget.Checkable;
import android.widget.LinearLayout;

public class ActivatedLinearLayout extends LinearLayout implements Checkable{

    public static final int[] CHECKED_STATE = {R.attr.state_checked};
    private boolean mChecked;

    public ActivatedLinearLayout(Context context) {
        super(context);
    }

    public ActivatedLinearLayout(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public ActivatedLinearLayout(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    @Override
    public void setChecked(boolean b) {
        mChecked = b;
        refreshDrawableState();
    }

    @Override
    public boolean isChecked() {
        return mChecked;
    }

    @Override
    public void toggle() {
        mChecked = !mChecked;
        refreshDrawableState();
    }

    @Override
    protected int[] onCreateDrawableState(int extraSpace) {
        int[] states =  super.onCreateDrawableState(extraSpace + 1);
        if (mChecked){
            mergeDrawableStates(states, CHECKED_STATE);
        }
        return states;
    }

} 
```

和选择器：

```
<?xml version="1.0" encoding="utf-8"?>

<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item android:state_checked="true" android:drawable="@drawable/checked"/>
<item android:drawable="@drawable/unchecked"/>
</selector> 
```

# php - 如果用户已登录，则自动重定向

> ID：14317768
> 
> 赞同：0
> 
> 时间：2013-01-14T11:40:21.323
> 
> 标签：php, http

我有两页：`index.php`和`register.php`。如果用户是`guest`，他可以点击`register.php`-->转到该页面-->注册表格并登录。登录后，他被重定向到 index.php。现在，如果他/她尝试访问`signup.php`--> 他们会自动重定向到`index.php`. 我正在使用：

```
<?php 
   if(!isset($_SESSION['id']))
   {
      //show the form
      ....
   }
   else
   {
      header("Location: index.php");
      exit;
   }
   ?> 
```

但是，我遇到了`Cannot modify header information`错误。`index.php`当和`register.php`是两个单独的页面时，我还能如何使代码重定向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-24T14:02:41.693

我所做的是创建一个名为 check_logged.php 的单独文件，我将其包含在您希望阻止的页面的顶部。它的作用是检查是否将其添加到页面顶部

```
session_start();
include('php/check_logged.php'); 
```

Check_logged.php 包含以下内容：

```
if (!empty($_SESSION['id'])) {
    header('Location: index.php');
    exit;
} 
```

就我个人而言，我需要再次检查，因为在您成功恢复密码后，我的表单会输出一条确认消息：

```
if(!isset($_SESSION['good_message'])){ //check if a confirmation message is set, if no continue to check if the user is logged in.
    if (!empty($_SESSION['id'])) {
        header('Location: index.php');
        exit;
    }
} 
```

这样，如果您返回登录页面并想要显示确认消息，它不会立即重定向您。我倾向于这样显示我的消息：

```
<span class="error"> <?php 
    if( IsSet( $_SESSION[ "message_sent" ] ) )  {
            echo "<p align='center' style='color: #8BA870;';> " . $_SESSION[ "message_sent" ] . "</p>";
            unset( $_SESSION[ "message_sent" ] );
}?></span> 
```

它显示一次，之后它会自行恢复。因此，如果您刷新页面，则该值不再是“设置”，您将被重定向到主页。

# php - making connection code dynamic

> ID：14317770
> 
> 赞同：0
> 
> 时间：2013-01-14T11:40:23.397
> 
> 标签：php

the connection to database via PHP is as:

```
<?php
$DbHost = 'localhost';
$DbName = 'root';
$DbUser = 'root';
$DbPwd = '';
$dbConn = mysql_connect ($DbHost, $DbUser, $DbPwd) 
    or die ('MySQL connect failed. ' .mysql_error());
mysql_select_db($DbName,$dbConn) or die('Cannot select database. ' . mysql_error());
?> 
```

Here I've hardcoded my hostname, username and password. Everytime I take my project to another machine, I've to change it. **How can I make this connection code dynamic**?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T11:47:45.567

您可以将机器特定信息放在`settings.php`文件中并使用

```
require_once "settings.php"; 
```

获取机器设置。在您的所有机器上执行此操作并将文件放在特定位置，以便您的项目能够找到它。

当您将项目移动到另一台机器时，它将使用相应的`settings.php`文件。（假设您也没有复制此文件；））

# c# - 删除字符串中的额外间距 [最快方式]

> ID：14317772
> 
> 赞同：3
> 
> 时间：2013-01-14T11:40:40.723
> 
> 标签：c#, regex, performance

我需要删除字符串中的所有额外空格。我使用正则表达式匹配字符串和匹配的字符串，我用其他一些替换。为了更好地理解，请参阅以下示例：

3个输入字符串：

```
Hello, how are you?
Hello , how are  you?
Hello     ,     how    are   you    ? 
```

这是应由一个模式正则表达式匹配的 3 个字符串。它看起来像这样：

```
Hello\s*,\s+how\s+are\s+you\s*? 
```

它工作正常，但存在性能问题。如果我有很多模式（~20k）并尝试执行每个模式，它运行速度非常慢（3-5 分钟）。

也许有更好的方法来做到这一点？例如使用一些 3d 方库？

**UPD：伙计们，这个问题不是关于如何做到这一点的。这是关于如何以最佳性能做到这一点。:)**

* * *

让我更详细地解释一下。主要目标是标记文本。（用特殊符号替换一些标记）

例如，我有一个令牌“不错的尝试”。然后我输入文本“这是不错的尝试”。结果：“这是@tokenizedtext@”其中@tokenizedtext@ 一些特殊符号。在这种情况下没关系。

接下来我有字符串“迈克说这是一次不错的尝试”。结果应该是“迈克说这是一个@tokenizedtext@”。我认为主要思想很清楚。

所以我可以有很多代币。当我处理它时，我将我的令牌从“nice try”转换为模式“nice\s+try”。并尝试用此模式输入文本替换。它工作正常。但是，如果在标记中有更多的空格并且还有标点符号，那么我的正则表达式就会变得更大并且工作得非常慢。

你有解决这个问题的一些建议（技术或逻辑）吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T11:52:34.030

我可以提出一些解决方案。

首先，避免使用静态`Regex`方法。创建它的一个实例（并存储它，不要为每个替换调用构造函数！），如果可能，使用`RegexOptions.Compiled`. 它应该会提高你的表现。

其次，您可以尝试检查您的模式。我会做一些分析，但我目前在以下之间犹豫不决：

> @"(?<=\s)\s+"

替换为空字符串或：

> @"\s+"

用空格代替。您可以同时尝试此代码：

```
var s = "Hello , how are  you?";
var pattern = @"\s+";
var regex = new Regex(pattern, RegexOptions.Compiled);
var replaced = regex.Replace(s, " "); 
```

**编辑**：在做了一些测量之后，第二种模式似乎更快。我正在编辑我的样本以适应它。

**编辑2**：我写了一个`unsafe`方法。它比这里介绍的其他方法（包括 Regex 的方法）快得多，但是，正如这个词本身所说，它是不安全的。我认为我编写的代码没有任何问题，但我可能是错的——所以请一次又一次地检查它，以防方法中出现错误。

```
static unsafe string TrimInternal(string input)
{
    var length = input.Length;
    var array = stackalloc char[length];
    fixed (char* fix = input)
    {
        var ptr = fix;
        var counter = 0;
        var lastWasSpace = false;
        while (*ptr != '\x0')
        {
            //Current char is a space?
            var isSpace = *ptr == ' ';
            //If it's a space but the last one wasn't
            //Or if it's not a space
            if (isSpace && !lastWasSpace || !isSpace)
                //Write into the result array
                array[counter++] = *ptr;
            //The last character (before the next loop) was a space
            lastWasSpace = isSpace;
            //Increase the pointer
            ptr++;
        }
        return new string(array, 0, counter);
    }
} 
```

用法（使用 /unsafe 编译）：

```
var s = TrimInternal("Hello    , how       are     you?"); 
```

在发布版本中进行的分析，优化，1000000 次迭代：

> 我上面的正则表达式解决方案：00:00:03.2130121
> 
> 不安全的解决方案：00:00:00.2063467

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T12:40:11.417

这可能对你有用。它应该很快。请注意，它还会删除字符串末尾的空格；那可能不是你想要的……

```
using System;

namespace Demo
{
    class Program
    {
        static void Main(string[] args)
        {
            Console.WriteLine(">{0}<", RemoveExtraSpaces("Hello, how are you?"));
            Console.WriteLine(">{0}<", RemoveExtraSpaces("Hello , how are  you?"));
            Console.WriteLine(">{0}<", RemoveExtraSpaces("Hello     ,     how    are   you    ?"));
        }

        public static string RemoveExtraSpaces(string text)
        {
            var buffer = new char[text.Length];
            bool isSpaced = false;
            int n = 0;

            foreach (char c in text)
            {
                if (c == ' ')
                {
                    isSpaced = true;
                }
                else
                {
                    if (isSpaced)
                    {
                        if ((c != ',') && (c != '?'))
                        {
                            buffer[n++] = ' ';
                        }

                        isSpaced = false;
                    }

                    buffer[n++] = c;
                }
            }

            return new string(buffer, 0, n);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T13:03:29.167

我自己的东西：

查找字符串中 WhiteSpacechar 的所有位置；

```
private static IEnumerable<int> GetWhiteSpacePos(string input)
{

    int iPos = -1;
    while ((iPos = input.IndexOf(" ", iPos + 1, StringComparison.Ordinal)) > -1)
    {
        yield return iPos;
    }
} 
```

从**GetWhiteSpacePos返回顺序中的所有空格**

```
 string original_string = "Hello     ,     how    are   you    ?";

        var poss = GetWhiteSpacePos(original_string).ToList();
        int startPos;
        int endPos;
        StringBuilder builder = new StringBuilder(original_string);
        for (int i = poss.Count -1; i > 1; i--)
        {
            endPos = poss[i];
            while ((poss[i] == poss[i - 1] + 1) && i  > 1)
            {
                i--;
            }
            startPos = poss[i];
            if (endPos - startPos > 1)
            {
                builder.Remove(startPos, endPos - startPos);
            }

        }

        string new_string = builder.ToString(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T11:46:18.210

如果只是空间问题；

试试这个来源： http: [//www.codeproject.com/Articles/10890/Fastest-C-Case-Insenstive-String-Replace](http://www.codeproject.com/Articles/10890/Fastest-C-Case-Insenstive-String-Replace)

```
 private static string ReplaceEx(string original,
                string pattern, string replacement)
    {
        int count, position0, position1;
        count = position0 = position1 = 0;
        string upperString = original.ToUpper();
        string upperPattern = pattern.ToUpper();
        int inc = (original.Length / pattern.Length) *
                  (replacement.Length - pattern.Length);
        char[] chars = new char[original.Length + Math.Max(0, inc)];
        while ((position1 = upperString.IndexOf(upperPattern,
                                          position0)) != -1)
        {
            for (int i = position0; i < position1; ++i)
                chars[count++] = original[i];
            for (int i = 0; i < replacement.Length; ++i)
                chars[count++] = replacement[i];
            position0 = position1 + pattern.Length;
        }
        if (position0 == 0) return original;
        for (int i = position0; i < original.Length; ++i)
            chars[count++] = original[i];
        return new string(chars, 0, count);
    } 
```

用法：

```
 string original_string = "Hello     ,     how    are   you    ?";
        while (original_string.Contains("  "))
        {
            original_string = ReplaceEx(original_string, "  ", " ");
        } 
```

替换正则表达式方式：

```
string resultString = null;
try {
    resultString = Regex.Replace(subjectString, @"\s+", " ", RegexOption.Compiled);
} catch (ArgumentException ex) {
    // Syntax error in the regular expression
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-14T11:47:13.577

嗯，这些问题真的很困扰我们。使用此代码，我相信您会得到您所要求的结果。此命令删除任何字符串之间的任何额外空格。

```
cleanString= Regex.Replace(originalString, @"\s", " "); 
```

希望塔尔对你有用。谢谢。

因为这是一个单一的指令。它将使用更少的 CPU 资源，从而减少 CPU 时间，最终提高您的性能。因此，在我看来，这种方法在性能方面效果最好。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-14T11:50:16.827

您正在使用一个非常复杂的正则表达式..简化正则表达式，这肯定会提高性能

使用`\s+`并替换为单个空格

# php - how to return false if input is empty using script in Cutom_functions.php for wordpress thesis theme

> ID：14317773
> 
> 赞同：0
> 
> 时间：2013-01-14T11:40:41.933
> 
> 标签：php, wordpress, wordpress-thesis-theme

I have a script that I have somehow managed to create (since my knowledge of php is very limited) that basically places author's profile (image, bio, and links to social media) on to authors archive page with all the posts by same author.

the problem with this script is it returns empty href's and src's in the div's if inputs in the authors profile are empty. I understand the reason why it does this, but I do not know how to correct it.

the second problem is if author set up a custom image link that my script returns that image, but what also like to do in case if input for that link is empty is to return an avatar.

Here is my script

```
 /***********************************************************
******************* Custom Author Page *********************
***********************************************************/
function author_info() {
if (is_author($avatar, $id_or_email, $size, $default, $alt)) {
 if(get_query_var('author_name'))
      $author = get_userdatabylogin(get_query_var('author_name'));
      $authorID = $author->ID;
      $custom_avatar = get_the_author_meta('imageurl', $authorID);
    if ($authorID=="1")
    echo ' ';
    else 
 echo '<div class="author_profile author_'. $authorID .'">
        <div class="author_avatar"><img alt="Author" src="'. $custom_avatar .'" width="140" height="140" /></div>
            <div class="author_info"> 
                <div class="author_description">
                <p>'. get_the_author_meta('description', $authorID) .'</p> 
                <p><strong>Author\'s Website:</strong><a href="'. get_the_author_meta('user_url', $authorID) .'">'. get_the_author_meta('wesitename', $authorID) .'</a></p>
                </div>
            </div>
            <div class="author_links">
            <a href="https://plus.google.com/'. get_the_author_meta('google_plus', $authorID) .'" rel="me" target="_blank"><img alt="Google Plus Profile" src="'. get_the_author_meta('google_plus_icon', $authorID) .'" width="128" height="64" /></a>
            <a href="http://www.facebook.com/'. get_the_author_meta('facebook', $authorID) .'" target="_blank"><img alt="Facebook Page" src="'. get_the_author_meta('facebook_icon', $authorID) .'" width="128" height="64" /></a>
            <a href="http://twitter.com/'. get_the_author_meta('twitter', $authorID) .'" target="_blank"><img alt="Twitter Page" src="'. get_the_author_meta('twitter_icon', $authorID) .'" width="128" height="64" /></a>
            <a href="http://www.linkedin.com/company/'. get_the_author_meta('linkedin', $authorID) .'" target="_blank"><img alt="LinkedIn Profile" src="'. get_the_author_meta('linkedin_icon', $authorID) .'" width="128" height="64" /></a>
            </div>
       </div>
       ';
  ?>
<?php }
}
add_action('thesis_hook_before_content', 'author_info'); 
```

Your help is highly appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T13:01:07.863

您可以更改函数： get_the_author_meta($type, $id) 以返回默认值。

```
get_the_author_meta($type, $id) {
    **Code to get value ** 
    if(isset($value)) {
        return $value;
    } else {
        return "#"; // Or some other string
    }
} 
```

但是，此解决方案将意味着链接仍将显示。如果您根本不希望链接显示，您可以执行以下操作：

```
if(isset(get_the_author_meta('google_plus', $authorID)) && isset(get_the_author_meta('google_plus_icon', $authorID))) :
<a href="https://plus.google.com/'. get_the_author_meta('google_plus', $authorID) .'" rel="me" target="_blank"><img alt="Google Plus Profile" src="'. get_the_author_meta('google_plus_icon', $authorID) .'" width="128" height="64" /></a>
endif; 
```

然后只会显示具有 href 和 img 的链接。

对于您的头像，您可以返回一个默认值。在你的代码中找到去的地方`get_the_author_meta('imageurl', $authorID);` 。可能是像 getImageUrl() 这样的函数。在该函数中执行与以前类似的操作：

```
getImageUrl() {
    **Code to get url ** 
    if(isset($value)) {
        return $value;
    } else {
        return "http://www.mysite.com/img/base-avatar.png"; // Or some other base image
    }
} 
```

# javascript - Add accept="image/*" attribute to input field in ExtJs

> ID：14317777
> 
> 赞同：8
> 
> 时间：2013-01-14T11:41:24.047
> 
> 标签：javascript, html, extjs

I want to add client side validation for file upload using HTML5 "accept" attribute and ExtJs "inputAttrTpl" config. My ExtJs code is following (ExtJs 4.1):

```
{
              xtype : 'filefield',
              action : 'upload',
              name : 'file',
              inputAttrTpl: 'accept="image/*"',
              hideLabel : true,
              buttonOnly : true,
              anchor : '100%',
              buttonText : 'Upload img...',
              margin: 5
} 
```

But when I am checking file field in firebug, it doesn't contain "accept" attribute. Can you suggest some solutions for this issue? Thanks for your replies.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-28T19:38:45.097

```
{
  xtype:'filefield',
  listeners:{
    afterrender:function(cmp){
      cmp.fileInputEl.set({
        accept:'audio/*'
      });
    }
  }
} 
```

您可以将接受设置为“”以删除限制。

[小提琴](http://jsfiddle.net/3V9dM/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-06T23:49:16.880

```
{
        xtype: 'fileuploadfield',
        name: 'file',
        fieldLabel: 'Photo',
        labelWidth: 50,
        allowBlank: false,
        buttonText: 'SelectPhoto',
        anchor: '100%',
        reset: function () {
            var me = this,
                clear = me.clearOnSubmit;
            if (me.rendered) {
                me.button.reset(clear);
                me.fileInputEl = me.button.fileInputEl;
                me.fileInputEl.set({
                    accept: 'image/*'
                });
                if (clear) {
                    me.inputEl.dom.value = '';
                }
                me.callParent();
            }},
        listeners:{
            change: 'fileInputChange',
            afterrender:function(cmp){
                cmp.fileInputEl.set({
                    accept:'image/*'
                });
            }
        },
        regex: /(.)+((\.png)|(\.jpg)|(\.jpeg)(\w)?)$/i,
        regexText: 'Only PNG and JPEG image formats are accepted'
    } 
```

# sql - 为什么sql表名中通常使用下划线而不是驼峰式

> ID：14317784
> 
> 赞同：6
> 
> 时间：2013-01-14T11:41:41.270
> 
> 标签：sql, case-sensitive, case-insensitive

在我已经看到的所有应用程序/示例中（例如 wordpress）。列表名称使用下划线而不是驼峰式大小写。我想知道是否存在一些技术不兼容问题或者这是一个约定？它是依赖于系统平台（Linux/Windows）还是 sql 方言（Mysql，postgreSQL，DB2，Oracle，...）。例如，在下表中，我使用了骆驼案，我还没有遇到任何问题/警告！如果我应该/必须重构我的表，我为什么应该/必须这样做？

SQL 是否对表/列名不区分大小写？方言呢？

```
CREATE TABLE `testuser` (
  `id` bigint(20) NOT NULL,
  `user_type` varchar(8) NOT NULL,
  `username` varchar(30) DEFAULT NULL,
  `password` varchar(128) DEFAULT NULL,
  `regDate` datetime DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `username` (`username`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-14T13:12:23.673

一点背景资料：

(ANSI) SQL 标准要求不带引号的标识符以全大写形式存储在系统目录中，并且不带引号的标识符不区分大小写。

根据该标准，以下未引用的标识符引用相同的对象（例如表）：`FOOBAR`, `foobar`, `FooBar`（并且所有都将被存储`FOOBAR`在系统目录中）。

以下**引用**的标识符引用了 3 个不同的对象：`"FOOBAR"`, `"foobar"`, `"FooBar"`.

几乎所有的 DBMS 至少都遵守不带引号的标识符**不区分大小写**的要求。据我所知，除了 MySQL 和 SQL Server - 两者都可以配置为区分大小写，即使对于未引用的标识符也是如此。我不确定 SQL Server 的默认行为是什么（正如 Damien 在他的评论中指出的那样，这取决于用于 SQL Server 的排序规则）。

MySQL 更加令人困惑，因为它的行为取决于几个配置设置、存储引擎和文件系统的组合。我知道的所有其他 DBMS 在所有平台和安装中的行为都是一致的。

PostgreSQL 符合区分大小写的要求，但会将所有内容都折叠为小写。

因此，鉴于这些规则，我*认为*使用下划线的“传统”命名约定源于对象名称以大写形式存储的事实。获得“可读”名称的唯一方法是用下划线分隔名称的重要部分。

SQL Server 更加非标准，因为它保留大小写（类似于 Windows 下的 NTFS 工作方式），因此它不会将名称折叠成任何东西。因此，当它存储在系统目录中时，它不会更改名称的大小写（但默认情况下不区分大小写）。出于这个原因，您会发现人们在 Microsoft 环境中使用 CamelCase 的频率比在 Oracle 环境中更频繁。

# android - 如何在eclipse中创建一个新的AVD？

> ID：14317789
> 
> 赞同：16
> 
> 时间：2013-01-14T11:42:00.007
> 
> 标签：android, eclipse, sdk, avd

我在 Eclipse 中创建新的 android 虚拟设备时遇到问题我有一个窗口，其中包含所需的信息：AVD 名称、设备、目标、CPU/ABI、键盘、皮肤、前置摄像头、后置摄像头、内存选项、内部存储、SD卡、仿真选项和确定按钮。

而不是我在教程中看到的只需要这些信息的窗口：名称、目标、CPU/ABI、SD 卡、快照、皮肤、硬件和创建 AVD 按钮。

在我的窗口中，我不知道我应该选择什么设备选项+我选择了什么，确定按钮永远不可用！我该怎么办 ？请帮帮我，谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-14T12:14:47.770

以下可能会有所帮助：

![窗口 -> Android 虚拟设备管理器](../Images/ce759dd7527201cf5d71ef2e1ad58f2b.png)

![设备定义](../Images/b03f4d16d149acc1b097ec428b8f0036.png)

![创建新设备](../Images/34b7b98915d12439c708f79c37b675ba.png)

然后启动模拟器

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-03-09T05:31:43.723

尝试使用`monitor.bat`in创建一个 AVD `tools-folder`，这对我有用！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T12:04:43.273

他们很可能已经更改了一些 AVD 设置。至于您应该选择哪些选项的第二个问题：不要制作非常小的 SD 卡。任何超过 100mb 的东西都可以正常工作。至于目标，请选择您已下载系统映像以使用 SDK 的 android 版本。

我不明白您所说的“不可用”是什么意思，但是如果它是确定按钮，那是因为您没有目标平台。

如果您的意思是模拟器无法启动，请给它一些时间。您甚至可以将模拟器置于快照模式，这样它就会在上次停止的地方打开，从而节省您的时间。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T12:16:03.803

尝试窗口 - > Android SDK 管理器。将您的 Android SDK 工具和 Android SDK 平台工具更新到最新版本

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-23T18:12:37.063

如果您无法单击确定按钮，请尝试在 eclipse 之外运行 avd 管理器。它对我有用，因为我遇到了同样的问题...稍后使用 eclipse 从 avd 管理器中选择该设备。它将运行刺激器

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-14T11:59:39.140

如果你想在 Eclipse 中创建一个 AVD，你需要这样做：

1.  转到窗口-> Android 虚拟设备管理器
2.  然后你需要给一个名字并选择你想要的平台（目标选项）
3.  然后“创建 AVD”按钮激活。

其他选项您可以让它们保持不变。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-23T18:31:24.133

另一种选择是从您各自的android版本的sdk安装ARM EABI系统映像，然后重新启动eclipse。它现在将允许您单击OK按钮。希望这对您有所帮助...

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-12-21T16:09:40.047

将 ADT 添加到您的 Eclipse 项目并单击 IDE 中的 avd 图标以打开 avd 管理器，然后创建一个新设备以及新的虚拟设备

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-10-19T20:55:21.280

对我来说，“确定”按钮被禁用，因为我在 AVD 名称中有空格。从名称中删除空格后，启用“确定”按钮。[![在此处输入图像描述](../Images/93701d547968aed56bce3bfa4b37bef1.png)](https://i.stack.imgur.com/CTOGW.jpg)

# c - 套接字，accept() 函数，无效参数

> ID：14317791
> 
> 赞同：4
> 
> 时间：2013-01-14T11:42:03.210
> 
> 标签：c, linux, sockets

当我在客户端-服务器应用程序的服务器端调用 accept() 函数时，出现错误“无效参数”。我不明白出了什么问题，如果您发现出了什么问题，请告诉我。谢谢。

```
#include <stdio.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>

int main(int argc, char* argv[])
{
    int sockfd, newsockfd, portno, len;
    struct sockaddr_in server, client;

    if(argc < 2){
        perror("Add more arguments");
    }

    sockfd = socket(AF_UNIX,SOCK_STREAM,0);
    if(sockfd < 0){
        perror("Error at socket()");    
    }
    printf("Socketfd: %d\n",sockfd);
    bzero((char *)&server, sizeof(server));
    portno = atoi(argv[1]);
    server.sin_family = AF_UNIX;
    server.sin_addr.s_addr = INADDR_ANY;
    server.sin_port = htons(portno);

    if(bind (sockfd, (struct sockaddr *)&server, sizeof(server)) <0){
        perror("Error at bind ()-server");  
    }

    listen(sockfd,5);

    int readval;
    char buffer[256];
    for(;;){
        len = sizeof(client);
        newsockfd = accept (sockfd, (struct sockaddr *)&server,&len);
        if (newsockfd == -1){
            perror("Erroare at accept()");      
        }
        else do{        
            readval = (sockfd,buffer,sizeof(buffer));
            if (readval < 0 ){
                perror("Error at reading()");       
            }
            else if (readval == 0){
                printf("End conection");            
            }
            else{
                printf("Mesage is: %s\n", buffer);
            }
        }while (readval > 0);
        close(newsockfd);
    }
    return 0;   
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T12:02:24.873

您必须使用`sockaddr_un`而不是`sockaddr_in`用于 Unix 域套接字或`AF_UNIX`用`AF_INET`.

另外，检查listen的返回。

加上更改此行

```
readval = (sockfd,buffer,sizeof(buffer)); 
```

和

```
readval = read(newsockfd,buffer,sizeof(buffer)); 
```

因为数据将通过新创建的套接字而不是监听的套接字发送

另外，正如@trojanfoe 所提到的`server`，将`client`结构替换为`accept()`调用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T11:50:44.957

这一行：

```
newsockfd = accept (sockfd, (struct sockaddr *)&server, &len); 
```

应该：

```
newsockfd = accept (sockfd, (struct sockaddr *)&client, &len); 
```

从[手册页](http://linux.die.net/man/2/accept)：

> 参数 addr 是指向 sockaddr 结构的指针。如通信层所知，该结构用对等套接字的地址填充。地址返回 addr 的确切格式由套接字的地址族确定（参见 socket(2) 和相应的协议手册页）。addr为NULL时，不填任何内容；在这种情况下，不使用 addrlen，也应该为 NULL。

还要检查来自的返回值`listen()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-19T19:16:32.413

我之前遇到过类似的问题，这是由于没有循环读取功能。这是我之前做的一个例子。

```
while (1) {
        new_sockfd = accept(sockfd, (struct sockaddr *) &client_addr,
                 &sin_size);
        if (new_sockfd == -1)
            perror("accepting connection");
        printf("server: got connection from %s port %d\n",
            inet_ntoa(client_addr.sin_addr),
            ntohs(client_addr.sin_port));
        recv_length = recv(new_sockfd, &buffer, DATA, 0);

        while (recv_length > 0) {
            printf("RECV: %d bytes\n", recv_length);
            dump(buffer, recv_length);
            recv_length = recv(new_sockfd, &buffer, DATA, 0);
        }

        close(new_sockfd);
    } 
```

# android - Android InstrumentationTestCase getFilesDir() 返回 null

> ID：14317793
> 
> 赞同：8
> 
> 时间：2013-01-14T11:42:08.883
> 
> 标签：android, unit-testing

我正在`InstrumentationTestCase`对我的应用程序的一个组件进行单元测试。

该组件将数据持久化到内部存储并用于`Context::fileList();`检索持久化的文件。

我遇到以下问题：在应用程序（在设备上）中使用此方法效果很好。但是当我尝试使用（Android-）单元测试（也在设备上）时，`InstrumentationTestCase`我得到了一个`NullPointerException`内部`fileList()`方法。我深入研究了 android 源代码，发现`getFilesDir()` [（请参阅此处的源代码）](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/app/ContextImpl.java#ContextImpl.getFilesDir%28%29)返回 null 并导致此错误。

重现的代码如下：

```
public class MyTestCase extends InstrumentationTestCase
{   
    public void testExample() throws Exception
    {
        assertNotNull(getInstrumentation().getContext().getFilesDir()); // Fails
    }
} 
```

我的问题是：这种行为是有意的吗？我能做些什么来规避这个问题？我使用`InstrumentationTestCase`正确还是应该使用不同的东西？

我发现[了这个问题](https://stackoverflow.com/questions/13796529/android-provider-test-case-2-and-getfilesdir)，但我不确定这是否涵盖了我遇到的相同问题。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-22T22:11:10.393

我认为您将测试数据与测试应用程序分开是正确的。

您可以通过执行以下命令为应用程序`Null`创建`files`目录来解决问题`Instrumentation`

```
adb shell
cd /data/data/<package_id_of_instrumentation_app>
mkdir files 
```

您只能在模拟器或有根设备上执行上述操作。

然后从你的问题中测试不会失败。我做到了，还上传了名为 dir 的文件`tst.txt`，`files`以下所有测试均成功：

```
assertNotNull(getInstrumentation().getContext().getFilesDir());
assertNotNull(getInstrumentation().getContext().openFileInput("tst.txt"));
assertNotNull(getInstrumentation().getContext().openFileOutput("out.txt", Context.MODE_PRIVATE)); 
```

但我认为向测试项目提供数据更方便的方法是使用`assets`测试项目，您可以在其中简单地保存一些文件并打开它们：

```
assertNotNull(getInstrumentation().getContext().getAssets().open("asset.txt")); 
```

或者，如果您想将一些测试结果保存到文件中，您可以使用`ExternalStorage`：

```
File extStorage = Environment.getExternalStorageDirectory();
assertNotNull(extStorage); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-01-10T06:21:27.927

[@Blackbelt 在他的评论中提到](https://stackoverflow.com/questions/14317793/android-instrumentationtestcase-getfilesdir-returns-null#comment19895493_14317793)使用[`getTargetContext()`](https://developer.android.com/reference/android/app/Instrumentation.html#getTargetContext())而不是[`getContext()`](https://developer.android.com/reference/android/app/Instrumentation.html#getContext()). 我错过了评论，几个小时后，试图弄清楚[如何从 Android 仪器测试中找出 Realm.init()](https://stackoverflow.com/a/59676354/2898715)，我发现我需要来自[`getTargetContext()`](https://developer.android.com/reference/android/app/Instrumentation.html#getTargetContext())...的上下文（一路上，我试图`context.filesDir.mkdirs()`）

```
package com.github.ericytsang

import androidx.test.platform.app.InstrumentationRegistry
import org.junit.Test

class InstrumentedTest {

    private val context = InstrumentationRegistry.getInstrumentation().targetContext

    @Test
    fun can_mkdirs() {
        assert(context.filesDir.mkdirs())
    }
} 
```

# c++ - 在 Visual Studio 2012 之后安装 Visual Studio 2010

> ID：14317798
> 
> 赞同：3
> 
> 时间：2013-01-14T11:42:25.107
> 
> 标签：c++, visual-studio-2010, visual-studio, visual-c++, visual-studio-2012

我在新的开发计算机上安装了 Visual Studio 2012，它运行良好。然后我不假思索地将 VS2010 安装到已经安装了 2012 的计算机上。2012 继续正常工作，但 2010 无法编译我以前的任何工作源代码，并且似乎无法找到任何正确的库。

例如，在一个简单的 C++ hello world 程序中，我收到以下错误

```
fatal error C1083: Cannot open include file: 'iostream': No such file or directory 
```

我已经尝试卸载两者，先安装 2010，然后安装 2012，但仍然会出现同样的问题。我还确保它使用的是平台工具包 v100，但似乎没有什么区别。

我也试过修复VS2010无济于事。

有没有其他人遇到过同样的问题，如果有，他们是如何解决的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T12:56:48.303

我猜这与 VS2012 的新 v110_xp 平台工具集有关，它使用类似于 7.1 的 SDK。对于需要 2003 Server 和 XP 支持的旧项目，我现在使用 VS2012 的工具集，而不是 VS2008 或 VS2010 的默认工具集，因此我不再需要旧的 Visual Studio。它也可能解决您的问题。

# tfs - 将富文本格式从 TFS 导出到 Excel

> ID：14317802
> 
> 赞同：0
> 
> 时间：2013-01-14T11:42:36.610
> 
> 标签：tfs, epplus

我正在尝试将 TFS 2012 测试用例导出到 Excel。目前我能够使用以下代码将数据作为纯文本导出到 excel

```
 foreach (ITestCase Testcase in testcases)
        {
            int j = 1;
            string str1 = null;
            string str2 = null;
            foreach (ITestAction action in Testcase.Actions)
            {
                ISharedStep shared_step = null;
                ISharedStepReference shared_ref = action as ISharedStepReference;
                if (shared_ref != null)
                {
                    shared_step = shared_ref.FindSharedStep();
                    foreach (ITestAction shr_action in shared_step.Actions)
                    {
                        var test_step = shr_action as ITestStep;
                        str1 = str1 + j.ToString() + "." + ((test_step.Title.ToString().Length ==0)? "<<Not Recorded>>" : test_step.Title.ToPlainText()) + System.Environment.NewLine;
                        str2 = str2 + j.ToString() + "." + ((test_step.ExpectedResult.ToString().Length ==0) ? "<<Not Recorded>>" : test_step.ExpectedResult.ToPlainText()) + System.Environment.NewLine;
                        j++;
                    }

                }
                else
                {
                    var test_step = action as ITestStep;
                    str1 = str1 + j.ToString() + "." + ((test_step.Title.ToString().Length ==0) ? "<<Not Recorded>>" : test_step.Title.ToPlainText()) + System.Environment.NewLine;
                    str2 = str2 + j.ToString() + "." + ((test_step.ExpectedResult.ToString().Length ==0) ? "<<Not Recorded>>" : test_step.ExpectedResult.ToPlainText()) + System.Environment.NewLine;
                    j++;
                }
            }
            oSheet.Cells[i, 1].Value = Testcase.Id.ToString();
            oSheet.Cells[i, 2].Value = Testcase.Title.ToString();
            oSheet.Cells[i, 3].Value =  str1;
            oSheet.Cells[i, 4].Value = str2;
            ParameterizedString Description = Testcase.Description;
            oSheet.Cells[i, 5].Value = Description.ToPlainText();
            i++;
        } 
```

我正在使用 EPPlus.dll 写入 excel 文件。

我的问题是如何导出格式化文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T07:40:06.240

你为什么要编码它？

将“测试用例提取器”下载到 Excel 并将所有测试用例导出到 Excel 工作表。

# php - 如何排列像菜单顺序这样的数组

> ID：14317803
> 
> 赞同：-1
> 
> 时间：2013-01-14T11:42:38.813
> 
> 标签：php, arrays

我有一个数组，我想按顺序重新排列父子。在我的数组中有唯一值“table_id”和值“parent_table”。因此 parent_table 将检查是否存在任何“table_id”。如果存在，它将位于该“table_id”之下。这是代码：

```
 Array
(
[0] => Array
(
[table_id] => 7
[table_name] => Macro
[parent_table] => 1
)
[1] => Array
(
[table_id] => 4
[table_name] => Dise
[parent_table] => 7
)
[2] => Array
(
[table_id] => 5
[table_name] => Cox
[parent_table] => 7
)
[3] => Array
(
[table_id] => 6
[table_name] => Ripo
[parent_table] => 4
)
) 
```

样本输出：

```
 Array
       (
         [1] => Array
                    (
                    [table_id] => 7
                    [table_name] => Macro
                    [parent_table] => 1
                    [7] => Array
                               (
                               [table_id] => 4
                               [table_name] => Dise
                               [parent_table] => 7
                               [4] => Array
                                          (
                                           [table_id] => 6
                                           [table_name] => Ripo
                                           [parent_table] => 4
                                           )
                                )
                     [7] => Array
                                 (
                                 [table_id] => 5
                                 [table_name] => Cox
                                 [parent_table] => 7
                                 )
               )
) 
```

请提供一些想法，因为我对 php 很陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T13:02:56.357

您可以使用几个[foreach](http://php.net/manual/en/control-structures.foreach.php)循环和[引用](http://php.net/manual/en/language.references.whatdo.php)：

```
// Build a new array, with nodes indexed by table_id
$byID = array();
foreach ($arr as $node) {
    $byID[$node['table_id']] = $node;
}

// Append child nodes to their parents' child_tables arrays
foreach ($byID as &$node) {
    if (isset($node['parent_table'])) {
        $byID[$node['parent_table']]['child_tables'][] =& $node;
    }
} 
```

然后整个树由 表示`$byID[1]`：

```
Array
(
    [child_tables] => Array
        (
            [0] => Array
                (
                    [table_id] => 7
                    [table_name] => Macro
                    [parent_table] => 1
                    [child_tables] => Array
                        (
                            [0] => Array
                                (
                                    [table_id] => 4
                                    [table_name] => Dise
                                    [parent_table] => 7
                                    [child_tables] => Array
                                        (
                                            [0] => Array
                                                (
                                                    [table_id] => 6
                                                    [table_name] => Ripo
                                                    [parent_table] => 4
                                                )

                                        )

                                )

                            [1] => Array
                                (
                                    [table_id] => 5
                                    [table_name] => Cox
                                    [parent_table] => 7
                                )

                        )

                )

        )

) 
```

# html - HTML / CSS 鼠标上下文菜单

> ID：14317810
> 
> 赞同：1
> 
> 时间：2013-01-14T11:43:03.497
> 
> 标签：html, css, contextmenu

我知道我会因为提出这样的问题而受到嘘声，但我是选择器的新手，并且正在为嵌入现有 UL 中的子 UL 的悬停效果而苦苦挣扎。

的HTML：

```
 <ul id="ctxMenuStock">
        <li><a href="#ctxCMDCopy">Copy</a></li>
        <li><a href="#ctxCMDReserve">Reserve/Outgoing</a></li>
        <li><a href="#">Set Status <span style="font-family: Webdings">6</span></a>
            <ul id="ctxMenuStockStatuses" runat="server"></ul>
        </li>
    </ul> 
```

ctxMenuStockStatuses 由页面加载时的服务器代码填充。

CSS：

```
 #ctxMenuStock, #ctxMenuStock ul, #ctxMenuPending, #ctxMenuPending ul{
        display:none;
        margin:0;
        padding:0;
        list-style-type:none;
        list-style-position:outside;
        position:fixed;
        line-height:1.5em;
    }

    #ctxMenuStock a:link, #ctxMenuStock hr, #ctxMenuStock a:active, #ctxMenuStock a:visited, #ctxMenuPending a:link, #ctxMenuPending hr, #ctxMenuPending a:active, #ctxMenuPending a:visited{
        display:block;
        padding:0px 5px;
        color:#fff;
        text-decoration:none;
        background-color:#333;
     }

    #ctxMenuStock>li:hover ul, #ctxMenuStock>li:hover ul li, #ctxMenuStock>li:hover ul li a
    {
        color:#fff;
        background-color:#333;
    }

    #ctxMenuStock>li:hover a, #ctxMenuPending>li:hover a{
        background-color:#fff;
        color:#333;
    }

    #ctxMenuStock ul li ul li a:hover, #ctxMenuPending ul li ul li a:hover{
        background-color:#fff;
        color:#333;
    }

    #ctxMenuStockStatuses li
    {
        color:#fff;
        background-color:#333;
    }

    #ctxMenuStockStatuses li:hover
    {
        background-color:#fff;
        color:#333;
    }

    #ctxMenuStock li, #ctxMenuPending li{
        float:none;
        position:relative;
    }

    #ctxMenuStock ul, #ctxMenuPending ul {
        position:absolute;
        display:none;
        float:left;
    }

    #ctxMenuStock li ul a, #ctxMenuPending li ul a
    {
        width:12em;
        margin: 0 0 0 4px;
        float:left;
    }

    #ctxMenuStock ul ul, #ctxMenuPending ul ul{
        top:auto;
    }

    #ctxMenuStock li ul ul, #ctxMenuPending li ul ul {
        left:12em;
        margin:0px 0 0 10px;
    }

    #ctxMenuStock li:hover ul ul, #ctxMenuStock li:hover ul ul ul, #ctxMenuStock li:hover ul ul ul ul{
        display:none;
    }
    #ctxMenuStock li:hover ul, #ctxMenuStock li li:hover ul, #ctxMenuStock li li li:hover ul, #ctxMenuStock li li li li:hover ul{
        display:block;
    }

    #ctxMenuPending li:hover ul ul, #ctxMenuPending li:hover ul ul ul, #ctxMenuPending li:hover ul ul ul ul{
        display:none;
    }
    #ctxMenuPending li:hover ul, #ctxMenuPending li li:hover ul, #ctxMenuPending li li li:hover ul, #ctxMenuPending li li li li:hover ul{
        display:block;
    } 
```

菜单基本上设计为带有白色文本的深色背景，但在悬停时会反转。这适用于父菜单，但子菜单不会改变并且保持黑底白字。

我知道其中一些 CSS 是相互矛盾的，但它变得难以理解。我似乎无法在网上找到很多（如果有的话）关于如何使用子菜单执行此操作的示例。

有人可以告诉我最好的方法吗？

**编辑：** 根据要求，创建了 JSFiddle 示例：http: [//jsfiddle.net/KzhEP/](http://jsfiddle.net/KzhEP/) 虽然在我的主项目中，oncontextmenu 属性附加到我的表服务器端的每一行。我已经模拟了一个简单的示例，但由于某种原因，我无法在 jsfiddle 上获得右键单击功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T12:38:13.383

在这里很难说出你想要达到什么，但你可以试试下面的~

删除以下 css，因为它覆盖了嵌套的黑色对白色 css 更改：

```
#ctxMenuStock>li:hover ul, #ctxMenuStock>li:hover ul li, 
#ctxMenuStock>li:hover ul li a{
    color:#fff;
    background-color:#333;
} 
```

然后更改提供悬停效果的 CSS 选择器：

```
#ctxMenuStock>li:hover a, #ctxMenuPending>li:hover a{
    background-color:#fff;
    color:#333;
} 
```

到：

```
#ctxMenuStock li:hover > a, #ctxMenuPending li:hover > a{
    background-color:#fff;
    color:#333;
} 
```

这样，您可以针对所有`li`元素`#ctxMenuStock`而`#ctxMenuPending`不是深度 - 但您只操作悬停`li`元素的子锚标记。

**示例：http: [//jsfiddle.net/embWK/](http://jsfiddle.net/embWK/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T12:05:14.147

你的 CSS 是错误的。从外观上看，您正在为同一事物键入不同的设置。再次检查你的 CSS，你会发现你的错误

# ios-simulator - 我们可以同时安装多个模拟器版本吗？

> ID：14317813
> 
> 赞同：-1
> 
> 时间：2013-01-14T11:43:20.323
> 
> 标签：ios-simulator, xcode4.5

我目前已切换到 Xcode 4.5.1（iOS 6 SDK）。我的疑问是，我们是否可以同时安装多个模拟器版本来测试我们的应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T17:28:59.207

打开 Xcode Preferences (Xcode->Preferences)，然后点击 Downloads。您应该可以从那里下载以前版本的模拟器。

然后，您可以使用靠近“运行”和“停止”按钮的左上角附近的下拉菜单来选择使用哪一个。

# c# - 无法比较 stringA > stringB

> ID：14317814
> 
> 赞同：2
> 
> 时间：2013-01-14T11:43:21.453
> 
> 标签：c#, string, compare

我正在尝试做这样的事情：

```
 // some code...

  string a="aa";
  string b="bb";
  // ...
  if(b>a)    // suppose to be true
   {
     // do somthing
   } 
```

但后来我得到编译错误：

> 运算符“>”不能应用于“字符串”和“字符串”类型的操作数。

那么最好的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T11:44:42.013

使用*[`CompareTo()`](http://msdn.microsoft.com/en-us/library/system.string.compare.aspx)*方法代替。

```
if(b.CompareTo(a) > 0) 
```

> 比较两个指定的 String 对象并返回一个整数，指示它们在排序顺序中的相对位置。

这种方法；

> *   如果 b 大于 a 或 a 为空，则返回大于零。
> *   如果 b 小于 a，则返回小于零。
> *   如果 b 在排序顺序中的位置与 a 相同，则返回 0。

检查这个*[`DEMO`](http://ideone.com/MesLbH)*。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T11:44:30.557

```
if(string.Compare(a, b) > 0) 
```

您可以使用`==`&`!=`但不能使用其他运算符，请改用[string.Compare](http://msdn.microsoft.com/en-us/library/vstudio/84787k22.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T11:44:16.187

您可以使用`CompareTo`.

```
if (b.CompareTo(a) > 0) { /*Operate*/ } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T11:44:20.987

不能像那样比较字符串，您应该使用 String.Compare()，如 MSDN [How to: Compare Strings (C# Programming Guide)上的这篇文章所示](http://msdn.microsoft.com/en-us/library/cc165449.aspx)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-14T11:44:21.327

您可以使用`CompareTo`：

```
if(b.CompareTo(a) > 0) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-14T12:55:11.723

如果您查看[String 类](http://msdn.microsoft.com/en-us/library/system.string.aspx)，您会看到运算符`>`或未`<`为此类型定义，但`ComapreTo`方法是，这就是要走的路 - 如其他答案所述。

如果要在字符串类型上使用这些运算符，则必须实现自定义字符串类型并为其重载这些关系运算符。该类可能如下所示：

```
 public class MyString
    {
        string str;

        public MyString(string str)
        {
            this.str = str;
        }

        public static implicit operator MyString(string str)
        {
            return new MyString(str);
        }

        public static bool operator < (MyString str1,  MyString str2)
        {
            return (str1.str.CompareTo(str2.str) < 0);
        }

        public static bool operator >(MyString str1, MyString str2)
        {
            return (str1.str.CompareTo(str2.str) > 0);
        }

        public static bool operator ==(MyString str1, MyString str2)
        {
            return (str1.str.CompareTo(str2.str) == 0);
        }

        public static bool operator !=(MyString str1, MyString str2)
        {
            return (str1.str.CompareTo(str2.str) != 0);
        }

        // other methods and overloads
    }

class Program
{
    static void Main(string[] args)
    {
        MyString str1 = "abba";
        MyString str2 = "abbb";
        MyString str3 = "abba";
        MyString str4 = "aabb";

        Debug.Assert(str1 < str2);
        Debug.Assert(str1 == str3);
        Debug.Assert(str1 > str4);            
    }
 } 
```

# sql - sql 选择不在的地方

> ID：14317817
> 
> 赞同：1
> 
> 时间：2013-01-14T11:43:32.473
> 
> 标签：sql, sql-server, tsql

我正在尝试从任务表中选择一些数据，但不是用户可能为自己创建的任何子任务。所以，我想过滤掉任何具有 parent_taskid 的任务，它是已经分配给该用户的 task_id。

例如

```
UserID | Parent_TaskID | TaskID
------ | ------------- | ------
435    | 149329        | 161280  
435    | 149330        | 210717  
435    | 149330        | 228100  
435    | 156991        | 149330  
169    | 161280        | 546540  
169    | 456842        | 458764 
```

因此，从上面的表格中，TaskID 210717 和 228100 将从我的选择中删除，因为它们的父级 (149330) 是已分配给该用户的 taskID - 使它们成为子任务。- 但 546540 不会被删除，因为它是分配给另一个用户的 taskID。

所以我在想类似的东西

```
select Task.taskID, Task.Parent_taskID, Task.userID 
from task
where Task.Parent_TaskID not in (??? select taskID from task where ???) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T11:50:24.487

```
SELECT
    t1.taskID,
    t1.Parent_taskID,
    t1.userID 
FROM task t1
LEFT OUTER JOIN task t2
    ON t1.userID = t2.userID 
       AND t2.taskID = t1.Parent_taskId
WHERE t2.taskID IS NULL 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T11:47:52.670

你的`NOT IN`将是

```
select t.taskID, t.Parent_taskID, t.userID 
from task t
where t.Parent_taskID not in (
    select tp.taskID
    from task tp
    where tp.userID = t.userID 
) 
```

另一个好的（和可读的）解决方案是使用`NOT EXISTS`

```
select t.taskID, t.Parent_taskID, t.userID 
from task t
where not exists (
    select 1
    from task tp
    where tp.taskID = t.Parent_taskID
      and tp.userID = t.userID 
) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T11:48:56.637

使用左外连接，并且在 where 语句中为 null，如下所示：

```
SELECT
    t.taskID,
    t.Parent_taskID,
    t.userID 
FROM task t
LEFT OUTER JOIN task t2
    ON t2.taskID = t.Parent_taskID
    AND t2.userID = t.userID
WHERE ts.taskID IS NULL 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T11:49:09.817

您可以使用`not exists`子查询来过滤掉具有相同父项的行。如果只有两个级别的任务，并且任务不能有孙子，则此方法有效。

```
select  *
from    Table1 parent
where   not exists
        (
        select  *
        from    Table1 child
        where   parent.UserID = child.UserID
                and parent.Parent_TaskID = child.TaskID
        ) 
```

[SQL Fiddle 上的实时示例。](http://sqlfiddle.com/#!2/88a3f/1/0)

# matlab - 如何在 MatLab 中以编程方式调用缩放事件？

> ID：14317819
> 
> 赞同：5
> 
> 时间：2013-01-14T11:43:55.017
> 
> 标签：matlab, callback

我正在使用“plot_google_map.m”，它使用 Google Maps API 在当前图形的背景中绘制地图。使用此生成的图形会在缩放事件时自动刷新地图，我添加了一些代码以使其在平移事件时也刷新数据。

现在我想在不使用缩放或平移按钮的情况下以编程方式更改轴的范围，但问题是地图不会自动刷新。所以，我正在考虑以编程方式生成缩放或平移事件，但我还没有找到一种方法来做到这一点。对此有任何想法吗？

让我详细说明我的问题。在“plot_google_map.m”中，有一个子函数，它是缩放事件的回调。

```
function plot_google_map  
% Listen to Zoom events    
h  = figure(1); plot(1:10);
hz = zoom(h);
set(hz,'ActionPostCallback',@mypostcallback);

function mypostcallback(obj,evd)
disp('Refreshes map data'); 
```

我想要做的是，在“plot_google_map”之外调用这个子函数。
欢迎任何想法，并提前感谢您的回答！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T14:27:53.583

你听说过这个`zoom`命令吗？

```
>> help zoom
 zoom   Zoom in and out on a 2-D plot. 
```

实际上，这似乎是程序识别您缩放的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T09:41:48.857

为什么不在每次更改轴范围后再次调用 plot_google_map 呢？这将导致地图使用新范围进行更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T13:51:24.330

假设您的轴句柄是`hAxes`，那么您可以通过更改轴的`xLim`和`yLim`属性而不是缩放比例来进行缩放，如下所示：

如果您的绘图使用 0-100 的 x 轴，那么您可以放大特定的子范围 og 0-100，例如：

```
set(hAxes,'xLim',[20 40]) 
```

并且对于 y 轴，您可以放大特定的 y 范围：

```
set(hAxes,'xLim',[30 70]) 
```

如果您想放大绘图上的特定区域，例如 x[20-50],y[10-50]，您可以通过执行前两个操作来实现，例如：

```
set(hAxes,'xLim',[20 50])
set(hAxes,'yLim',[10 50]) 
```

**因此**，根据绘图或图像的大小更改 ax 的`xLim`和`yLim`值，这就是缩放与轴的实际工作方式。

你甚至可以试试这个演示脚本：

```
 clear;clc;
 figure;
 h = axes;
 y = sin( 0:2*pi / 100:pi );
 plot(y);
 %// =============================
 pause(1);
 set(h , 'xlim' , [20 80]);
 %// =============================
 pause(1);
 set(h , 'xlim' , [30 40]);
 %// =============================
 pause(1);
 set(h , 'xlim' , [10 100]);
 %// =============================
 pause(1);
 set(h , 'ylim' , [.1 .4]);
 %// =============================
 pause(1);
 set(h , 'ylim' , [.2 .7]);
 %// =============================
 pause(1);
 set(h , 'ylim' , [.3 .9]);
 %// =============================
 pause(1);
 set(h , 'ylim' , [.1 .2]);
 set(h , 'xlim' , [10 80]);
 %// =============================
 pause(1);
 set(h , 'ylim' , [.3 .7]);
 set(h , 'xlim' , [40 90]);
 %// ============================= 
```

# jquery - jQuery - 将可拖动元素链接为“节点”

> ID：14317820
> 
> 赞同：2
> 
> 时间：2013-01-14T11:44:01.703
> 
> 标签：jquery, html, css

您能否“链接”元素，使它们具有从一个到另一个绘制的线条......就像图形一样？

像这样的东西：![在此处输入图像描述](../Images/fcd71c3745536b924d057d3254af0e3e.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T11:47:16.037

您可以将[Processing.js](http://processingjs.org/)用于此类工作。您还可以使用[jsPlumb - jQuery 插件](http://jsplumb.org/jquery/demo.html)

# linux - Linux emacs/nano：如何选择较大文件中的所有文本行并复制

> ID：14317827
> 
> 赞同：4
> 
> 时间：2013-01-14T11:44:21.110
> 
> 标签：linux, text, emacs, terminal

我需要将大型日志文件中的所有文本复制到剪贴板。我有一个到 Linux 的远程连接，并且只使用控制台终端。我想要的是类似的东西`Select all -> Copy`。

在我使用的 emacs 中`F10 -> Edit -> Select All, and then F10 again -> Edit -> Copy`。但它没有进入我的剪贴板，无法将其粘贴到我的本地 Windows 实例中（它适用于屏幕上显示的内容；无需滚动）。

nano或emacs有更好的方法吗？

干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T14:28:11.720

Emacs 有一个鲜为人知的功能，它可以让你的生活更轻松。您实际上可以通过 ssh 远程打开文件，就像打开本地文件一样容易，而且开销很小。所以只要你可以从本地emacs复制到剪贴板，你就可以做你需要的。

要远程打开文件，只需像往常一样点击 Cx Cf。但是你想要的文件是这样的

```
/ssh:otherserver.some.org:/path/to/file.log 
```

where`otherserver.some.org`替换为实际的服务器名称，`/path/to/file.log`是您的实际路径。第一次连接后，选项卡完成也可以工作。编辑的工作方式与处理本地文件（包括复制）完全相同，只是在保存时，文件会通过 ssh 复制回远程。

该设施称为“ [TRAMP](http://www.gnu.org/software/tramp/) ”，因此将存在名称中带有“tramp”的隐藏缓冲区。另请注意，tramp 可以使用[其他几种方法](http://www.gnu.org/software/tramp/#Inline-methods)连接到文件，例如`plink`Windows，以及`su`以其他用户身份编辑文件。

这里讨论了您的问题的其他选项： [Getting Items on the Local Clipboard from a Remote SSH Session](https://stackoverflow.com/questions/1152362/getting-items-on-the-local-clipboard-from-a-remote-ssh-session)，或者甚至可能在这里： [http](http://winscp.net/eng/docs/task_edit) ://winscp.net/eng/docs/task_edit 。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-14T14:07:58.807

如果您只有一个终端会话，那么 emacs、nano 或任何其他在 Linux 端运行的程序都无法将文本发送到 Windows 剪贴板。

您的选择是通过 X11 或 VNC 连接，在这种情况下，可以在 Windows 和 Linux 程序之间共享剪贴板，或者通过其他方式复制文件。

如果您通过 ssh 登录，例如，您可以`ssh thelinuxmachine cat /the/log/file/locatioin > logfile.txt`在 windows 命令 shell 中运行。使用 scp 客户端（例如[http://winscp.net/](http://winscp.net/) ）连接到 linux 机器可能也可以。

# php - 防止人们提交包含无意义数据的表单

> ID：14317833
> 
> 赞同：0
> 
> 时间：2013-01-14T11:44:44.757
> 
> 标签：php

我在一个网站上工作，该网站允许人们在向公司寻求支持时讲述他们受到的待遇。问题是有些人正在使用无意义的数据来玩这个平台，比如

```
blabla bal bla bka asdfdsff sdfs sdf 
```

有没有办法防止这种情况？无法手动验证数据，因为该网站非常动态，包含大量数据。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T11:50:07.230

简短的回答没有。

长答案：您可能想尝试将单词与字典进行匹配。但这不是万无一失的，当匹配太紧时，您可能会得到很多误报。

另一种方法可能是建立一个虚假词的黑名单并与之匹配。

此外，您可能需要重新考虑是否需要该特定字段。当很多人填写虚假数据时，表格可能设置错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T11:52:33.470

改进您的表单验证检查。

对于电话号码，请确保它的大小正好合适，并且（例如）它没有相同的号码（即号码 0777777777 可能是假的）。

计算句子中的字母用法。英语中最常用的字母是 e 和 a（我认为）。如果比率完全不同（例如，如果`e`200 个字母的文本中没有字母 - 有一点问题）。

还要用字典匹配单词。对于大于 60% 的未知词的比率，您可以认为它是无效的。

检查日期，如果您预计未来几天内的日期，则不应接受 30 年前的日期。

想想你期望接收的数据，并找到它的限制，这是唯一的方法。祝你好运 ！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T12:01:34.257

您可以在一定程度上做到这一点：

*   验证某些字段（电话号码、电子邮件、仅数字/文本字段等...）
*   限制用户使用预定义的项目，例如下拉菜单、复选框，而不仅仅是他们完全自由的纯文本输入
*   通过字典运行一些检查并确定用户提交的质量的理想百分比。

不管你做什么，它永远不会是100%。使用预先确定的值之外的用户输入进行正确验证的唯一（几乎！）保证方法是让某人坐下来并手动检查每个提交的数据。即使那样，他们也容易出现人为错误，而且仍然不会是 100%。

我的建议是将所有重要字段保留为您已经通过下拉列表、复选框、数字微调器等指定的值...

为某些项目添加“附加评论”字段，但保留这些字段对于提交表单的主流程处理是不必要的。

# .net - 生产是32bit时在64bit机器上开发

> ID：14317838
> 
> 赞同：3
> 
> 时间：2013-01-14T11:44:56.293
> 
> 标签：.net, 64-bit, 32bit-64bit, gac, 32-bit

去年左右我有一台 64 位机器，我开发了一个运行 32 位的产品。

到目前为止，我没有任何问题。

有人告诉我，我需要更换我的工作站，这样它才能运行 32 位。他的原因之一是可能存在一些问题，因此从 GAC 获取的一些 dll 是为 64 位设计的，并且可以在我的计算机上运行，​​但是当发布到生产环境时可能会出现错误。

GAC 是否正确？

我应该更换工作站吗？还有其他原因应该更换它吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T13:16:32.957

这就是持续集成的目的。获取 32 位 CI 环境设置以在每次提交后测试您的更改。通过这种方式，您将知道您的更改适用于您的生产环境。

通过将构建过程转移到与生产机器具有类似设置的专用机器上，您可以更可靠地构建和测试。摆脱“为我工作”的问题是有好处的，就好像它不是在 CI 服务器上构建的那样，然后出了点问题。

有关更多信息，请参见[此处](http://martinfowler.com/articles/continuousIntegration.html)和[此处](http://www.extremeprogramming.org/rules/integrateoften.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T11:49:17.863

恕我直言，你应该保持你的机器野兽并在那里进行开发。您可以让 Windows VM 或另一台机器在那里进行所有测试、验证和调试。

# xps - 在 Windows XP 下安装 XpsDrv 示例

> ID：14317842
> 
> 赞同：0
> 
> 时间：2013-01-14T11:45:05.337
> 
> 标签：xps

本文帮助我在 Windows XP 下安装“XpsDrv 示例” [。](http://kibitzercz.blogspot.cz/2012/01/building-and-using-xpsdrvsmpl-under.html)但我想问一下是否可以自动化第 6 步

> 随着您的继续，向导可能会要求您提供一些它无法找到的文件。但是，如果您安装了 SP3 或 XPS 扩展包，这应该不是什么大问题。如果向导要求您提供 xdsmpl.gpd，请单击浏览并在`[sample root]\install\x86`. 如果它要求 xdwmark.dll，也请导航到`[sample root]\install\x86`。对于 msxpsinc.gpd 转到`c:\windows\Driver cache\i386`. xpssvcs.dll 文件应位于`c:\windows\system32`.

我需要在我的应用程序安装过程中安装 XPS 驱动程序，我的客户不能手动查找丢失的文件...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T08:35:14.500

最简单的方法是复制**x86**文件夹并将其重命名为**i386**。然后找到丢失的文件**（msxpsinc.gpd**、**xpssvcs.dll**）并将它们复制到`[sample root]\install`

# java - 如何设置 JViewport 的插图

> ID：14317845
> 
> 赞同：2
> 
> 时间：2013-01-14T11:45:21.240
> 
> 标签：java, swing, awt

我知道`setViewportBorder()`，但是我想知道您是否可以设置视口的边界，而不仅仅是用空边框填充。我想要实现的是为增加和减少按钮内联的页眉和页脚组件创造空间。

```
 _
                 |^|
 ----------------| |
|                | |
|   JViewport    | |
|________________| |
                 |v| 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T18:47:36.187

你总是可以自己动手

```
import java.awt.*;
import javax.swing.*;
import java.awt.event.*;
class Testing
{
  public void buildGUI()
  {
    JPanel p = new JPanel(new BorderLayout());
    JTextArea ta = new JTextArea(10,10);
    ta.setLineWrap(true);
    JScrollPane sp = new JScrollPane(ta,ScrollPaneConstants.VERTICAL_SCROLLBAR_NEVER,
                                      ScrollPaneConstants.HORIZONTAL_SCROLLBAR_NEVER);
    JLabel header = new JLabel("Header",JLabel.CENTER);
    JLabel footer = new JLabel("Footer",JLabel.CENTER);
    JScrollBar sBar = new JScrollBar();
    sp.getVerticalScrollBar().setModel(sBar.getModel());
    p.add(header,BorderLayout.NORTH);
    p.add(sp,BorderLayout.CENTER);
    p.add(footer,BorderLayout.SOUTH);

    for(int x = 0; x < 50; x++) ta.append(x+"\n");
    JFrame f = new JFrame();
    f.getContentPane().add(p);
    f.getContentPane().add(sBar,BorderLayout.EAST);
    f.pack();
    f.setLocationRelativeTo(null);
    f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    f.setVisible(true);
  }
  public static void main(String[] args)
  {
    SwingUtilities.invokeLater(new Runnable(){
      public void run(){
        new Testing().buildGUI();
      }
    });
  }
} 
```

# javascript - jQgrid保存后回调函数

> ID：14317847
> 
> 赞同：1
> 
> 时间：2013-01-14T11:45:27.240
> 
> 标签：javascript, jquery, jqgrid

我创建了一个 jQgrid 并希望它在添加新行或在网格中编辑某些内容后调用回调函数

```
jQuery("#list1").jqGrid({
        url: '/testGrid/sample?q=5', 
        datatype: "json", 
        mtype: 'POST',
        jsonReader: {
            page: "page",
            total: "total",
            root: "rows",
            records: "records",
            repeatitems: false,
            cell: "name",
            userdata: 'userdata'
        },
        width: 775,
          colNames: ['Salaried Employees', '# of FTEs', 'Budget', 'Actuals to Date', 'Invoice Salary'],
          colModel: [
            {name:'salEmp',index:'salEmp', width:100, align: 'left', width:100,editable:false,editrules:{required:true}},
            {name:'FTE',index:'FTE', width:100, align: 'center', editable:false,required:true,editrules:{required:true,number:true}},
            {name:'Budget',index:'Budget', width:100, align: 'right', width:100,editable:false,required:true,editrules:{required:true,number:true}},
            {name:'actDate',index:'actDate', width:100, align: 'right', align:"right",editable:false,required:true,editrules:{required:true,number:true}},
            {name:'invSal',index:'invSal', width:100, align:"right",editable:true,required:true,editrules:{required:true,number:true}}                                        
           ],
            rowNum: 5,
            rowList: [5, 10, 20],
            autoencode: true,
            ignoreCase: true,
            sortable: false,
            height: '100%',
            pager: jQuery('#pager1'),
            cellEdit: false,
            cellsubmit: 'remote',
            //cellurl: '/testGrid/sample',

            //call onclick of save
            editurl:"/testGrid/sample",
            gridview: true,
            reloadAfterSubmit:true
        })
        // Pager options for Subgrid
        .navGrid('#pager1',{
            add:false,
            edit:false,
            del:true,
            search:false,
            refresh:false,
            deltext: 'Delete'
        });
$('#list1').jqGrid('inlineNav','#pager1',{
            addtext: "Add",
            edittext: "Edit",
            savetext: "Save",
            canceltext: "Cancel",                       
            addParams: { 
                position: "afterSelected"
            },
            addedrow:'last'

        }); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-14T12:49:08.083

`inlineNav`允许指定用于内联编辑的[editRow的回调。](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:inline_editing#editrow)要指定可以使用的回调`editParams`和`addParams.addRowParams`选项：

```
var myEditOptions = {
        keys: true,
        oneditfunc: function (rowid) {
            alert("row with rowid=" + rowid + " is editing.");
        },
        aftersavefunc: function (rowid, response, options) {
            alert("row with rowid=" + rowid + " is successfuly modified.");
        }
    };

$('#list1').jqGrid('inlineNav','#pager1', {
    addtext: "Add",
    edittext: "Edit",
    savetext: "Save",
    canceltext: "Cancel",                       
    addParams: { 
        position: "afterSelected",
        addRowParams: myEditOptions
    },
    addedrow: "last",
    editParams: myEditOptions
}); 
```

# javascript - iMacro 付费版？

> ID：14317848
> 
> 赞同：0
> 
> 时间：2013-01-14T11:45:28.300
> 
> 标签：javascript, imacros

我想从我的网络应用程序中调用一个 iMacro（使用 Javascript），我试图用免费版本的 iMacro 来完成同样的事情，但它没有用。那么我们需要付费版本还是免费版本可能？请提供一些有价值的帮助/建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-11T19:34:13.877

您需要付费版本才能在 iMacros 中录制脚本并使用脚本 DLL / 组件。访问 iMacros API 需要此组件。

试用版应该可以工作 30 天。

你需要企业版。标准不会这样做。可能有使用企业版/iMacros API 的方法，您只需要查看您的架构。

# python - Python Dictreader 对字段名进行排序

> ID：14317849
> 
> 赞同：3
> 
> 时间：2013-01-14T11:45:48.293
> 
> 标签：python, sorting, csv

我有一个包含内容的 .csv 文件（示例）

```
Attributes,Description,Dial-Up
4,2,0.2
3,1,0.4 
```

使用字典阅读器：

```
dictreader = csv.DictReader(open(filename, "rb"), delimiter=',')
dictdata = {}
count=0
for row in dictreader:
    dictdata[count]=row
    count=count+1 
```

并显示在表格中或使用作家我会得到：

```
Dial-Up,Attributes,Description
0.2,4,2
0.4,3,1 
```

那么如何对字段名进行排序呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-14T12:28:25.710

将`DictReader`字段（dict 键）存储在名为的属性中`fieldnames`：

```
fields = dictreader.fieldnames
print(fields)
# ['Attributes', 'Description', 'Dial-Up'] 
```

因此，要按此顺序打印行值：

```
print(','.join(fields))
for row in dictreader:
    print(','.join(row[field] for field in fields)) 
```

产量

```
Attributes,Description,Dial-Up
4,2,0.2
3,1,0.4 
```

* * *

或者，使用@JonClements 的想法：

```
import operator
fields = dictreader.fieldnames
getfields = operator.itemgetter(*fields)
for row in dictreader:
    print(','.join(getfields(row))) 
```

使用的动机`operator.itemgetter`是它比使用列表理解更快：

```
In [70]: %timeit getfields(row)
10000000 loops, best of 3: 174 ns per loop

In [71]: %timeit [row[field] for field in fields]
1000000 loops, best of 3: 272 ns per loop 
```

# android - 单选按钮活动源代码

> ID：14317850
> 
> 赞同：1
> 
> 时间：2013-01-14T11:45:57.333
> 
> 标签：android, radio-button, android-activity

由于为按钮的“OnClick 属性”分配了名称，因此在单击按钮时调用此方法，下面的编码中正确的大小写代码应该是什么。它给出的错误是它应该是常量表达式以防万一。

```
public void onClick(View view) {
switch (view.getId()) {
case R.id.button1:
  RadioButton AButton = (RadioButton) findViewById(R.id.radio0);
  RadioButton BButton = (RadioButton) findViewById(R.id.radio1);
  if (text.getText().length() == 0) {
    Toast.makeText(this, "Please enter a valid number",
        Toast.LENGTH_LONG).show();
    return;
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T12:02:17.987

您必须在将被标记为**library**的项目中使用此代码。是吗？

如果是，那么您必须了解在这种情况下 view.getId() 值不能用作常量。在此类项目中，您可以使用 if else 语句。

这背后的原因是，在主项目中，如果您定义了具有相同 id 的资源，则会返回或初始化错误的结果。因此，这是为了避免这种情况，因为调试起来会更加困难。

使用 if - else 语句。

另外，我不记得 ADT 版本，但在那之后视图 ID 不被视为常量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T12:03:02.177

只需将您的 switch case 语句转换为 if 语句就足够了。有关解释，请阅读[switch case 语句错误：case 表达式必须是常量表达式](https://stackoverflow.com/questions/9092712/switch-case-statement-error-case-expressions-must-be-constant-expression)

# linux - 简单的 sed 替换

> ID：14317852
> 
> 赞同：0
> 
> 时间：2013-01-14T11:46:01.077
> 
> 标签：linux, sed, awk, csh

我有一个文本文件，其中包含结构为 ABC123456A 或 ABC123456AA 的文件列表。我想做的是检查文件 ABC123456ZZP 是否也存在。即我想用 ZZP 替换 ABC123456 之后的字母

我可以使用 sed 执行此操作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T11:55:19.903

像这样？

```
X=ABC123456 ;  echo ABC123456AA | sed -e "s,\(${X}\).*,\1ZZP," 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T12:05:36.330

您可以按照 wilx 的建议使用 sed，但我认为更好的选择是 bash。

```
while read file; do
    base=${file:0:9}
    [[ -f ${base}ZZP ]] && echo "${base}ZZP exists!"
done < file 
```

这将遍历文件中的每一行，然后将 base 设置为该行的前 9 个字符（不包括空格），然后检查是否存在以 ZZP 结尾的文件，如果存在则打印一条消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T14:24:23.847

看：

```
$ str="ABC123456AA"
$ echo "${str%[[:alpha:]][[:alpha:]]*}"
ABC123456 
```

这样做：

```
while IFS= read -r tgt; do
    tgt="${tgt%[[:alpha:]][[:alpha:]]*}ZZP"
    [[ -f "$tgt" ]] && printf "%s exists!\n" "$tgt"
done < file 
```

对于包含换行符的文件名，它仍然会失败，所以如果您遇到这种情况，请告诉我们，但与其他发布的解决方案不同，它适用于具有 9 个关键字符以外的文件名、包含空格、逗号、反斜杠、通配符的文件名，等等等等，它是有效的。

既然您现在说您只需要每行的前 9 个字符，并且您对将每一行通过管道传输到 sed 感到满意，那么您可能会喜欢以下另一种解决方案：

```
cut -c1-9 file |
while IFS= read -r tgt; do
    [[ -f "${tgt}ZZP" ]] && printf "%sZZP exists!\n" "$tgt"
done 
```

它比 sed 解决方案更高效、更健壮，并且在这两种情况下都与其他 shell 解决方案相似。

# javascript - escape()、encodeURI()、encodeURIComponent() 的区别

> ID：14317861
> 
> 赞同：43
> 
> 时间：2013-01-14T11:47:14.473
> 
> 标签：javascript

在 JavaScript 中，这些有什么区别？

1.  `escape()`/`unescape()`
2.  `encodeuri()`/`decodeuri()`
3.  `encodeURIComponent()`/`decodeURIComponent()`

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2016-06-06T10:19:32.393

对于有视觉头脑的人，这里有一张表格，显示了`encodeURI()`,`encodeURIComponent()`和`escape()`对常用符号 ASCII 字符的影响：

```
Char  encUrI  encURIComp  escape
*     *       *           *
.     .       .           .
_     _       _           _
-     -       -           -
~     ~       ~           %7E
'     '       '           %27
!     !       !           %21
(     (       (           %28
)     )       )           %29
/     /       %2F         /
+     +       %2B         +
@     @       %40         @
?     ?       %3F         %3F
=     =       %3D         %3D
:     :       %3A         %3A
#     #       %23         %23
;     ;       %3B         %3B
,     ,       %2C         %2C
$     $       %24         %24
&     &       %26         %26
      %20     %20         %20
%     %25     %25         %25
^     %5E     %5E         %5E
[     %5B     %5B         %5B
]     %5D     %5D         %5D
{     %7B     %7B         %7B
}     %7D     %7D         %7D
<     %3C     %3C         %3C
>     %3E     %3E         %3E
"     %22     %22         %22
\     %5C     %5C         %5C
|     %7C     %7C         %7C
`     %60     %60         %60 
```

另一个重要的区别是它`unescape()`不处理多字节 UTF-8 序列，而`decodeURI[Component]()`处理：

```
decodeURIComponent("%C3%A9") == "é"
unescape("%C3%A9") == "Ã©" 
```

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2013-01-14T11:51:41.483

*   `escape` — broken, deprecated, do not use
*   `encodeURI` — encodes characters that are not allowed (raw) in URLs (use it to fix up broken URIs if you can't fix them beforehand)
*   `encodeURIComponent` — as `encodeURI` plus characters with special meaning in URIs (use it to encode data for inserting into a URI)

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2013-01-14T11:56:28.777

First of all - Escape is deprecated and shouldn't be used.

**encodeURI()**

You should use this when you want to encode a URL, it encodes symbols that is not allowed in a URL.

**encodeURIComponent()**

Should be used when you want to encode parameters of your URL, You can also use this to encode a whole URL. But you would have to decode it in order to use it again.

--

I'd say this a duplicate. Here's a good answer on SO - Credits goes to Arne Evertsson: [When are you supposed to use escape instead of encodeURI / encodeURIComponent?](https://stackoverflow.com/questions/75980/best-practice-escape-or-encodeuri-encodeuricomponent)

There's a lot of details on why/why not on that topic.

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-05-19T12:47:21.827

*   `escape`- 已弃用，您不应该使用。

*   `encodeURI`- 替换所有字符，除了
    `; , / ? : @ & = + $ - _ . ! ~ * ' ( ) # a-z 0-9`

*   `encodeURIComponent`- 替换所有字符，除了
    `- _ . ! ~ * ' ( ) a-z 0-9`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-17T16:33:42.347

只是尝试`encodeURI()`和`encodeURIComponent()`你自己...

```
console.log(encodeURIComponent('@#$%^&*'));
```

输入：`@#$%^&*`。输出：`%40%23%24%25%5E%26*`。所以，等等，发生了什么事`*`？为什么没有转换？TLDR：您实际上想要[`fixedEncodeURIComponent()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURIComponent)和[`fixedEncodeURI()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURI)。很长的故事...

*   `escape()`:***不要使用！！！***引用[**MDN`escape()`文档**](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/escape)...

> 警告：虽然 escape() 并未被严格弃用（如“从 Web 标准中删除”），但它在 ECMA-262 标准的附件 B 中定义，其介绍指出：

> ...在编写新的 ECMAScript 代码时，程序员不应使用或假设这些特性和行为的存在......

*   `encodeURI()`:***不要使用！！！***使用`fixedEncodeURI()`. 引用[**MDN`encodeURI()`文档**](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURI)...

> 如果希望遵循更新的 RFC3986 的 URL，它保留了方括号（用于 IPv6），因此在形成可能是 URL 一部分的内容（例如主机）时不进行编码，以下代码片段可能会有所帮助：

> `function fixedEncodeURI(str) { return encodeURI(str).replace(/%5B/g, '[').replace(/%5D/g, ']'); }`

*   `encodeURIComponent()`:***不要使用！！！***使用`fixedEncodeURIComponent()`. 引用[**MDN encodeURIComponent() 文档**](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURIComponent)...

> 为了更加严格地遵守 RFC 3986（保留 !、'、(、) 和 *），即使这些字符没有正式的 URI 分隔用途，也可以安全地使用以下内容：

> `function fixedEncodeURIComponent(str) { return encodeURIComponent(str).replace(/[!'()*]/g, function(c) { return '%' + c.charCodeAt(0).toString(16); }); }`

`fixedEncodeURI()`那么问题可以简化：和有什么区别`fixedEncodeURIComponent()`？ `fixedEncodeURIComponent()`编码以下字符，而不编码`fixedEncodeURI()`：`+@?=:#;,$&`.

# wordpress - “posts_where”过滤器删除的 WP_Query 参数

> ID：14317867
> 
> 赞同：1
> 
> 时间：2013-01-14T11:47:47.430
> 
> 标签：wordpress, filter, categories

```
<?php
        $cat = get_query_var('cat');
        $paged = (get_query_var('paged')) ? get_query_var('paged') : 1;
        function filter_where( $where = '' ) {
            // posts for March 1 to March 15, 2010
            $where .= " AND post_date >= '2010-03-01' AND post_date < '2010-03-16'";
            return $where;
        }
        $args = array(
            'cat' => 4,
            'posts_per_page' => 30,
            'paged' => $paged
        );

        add_filter( 'posts_where', 'filter_where');
        $my_query = new WP_Query($args);
        remove_filter( 'posts_where', 'filter_where' );
        if ($my_query->have_posts()):
            /* Start the Loop */
            while ($my_query->have_posts()) : $my_query->the_post();

                get_template_part('single', 'bandi');

            endwhile;
        endif; ?> 
```

这是我的代码。我试图在日期范围内显示特定类别的帖子。如果没有过滤器查询工作正常，则从提供的类别返回帖子。添加过滤器使查询返回帖子在日期范围内，但删除类别ID，并从整个站点查询返回帖子。有什么帮助吗？谢谢

# spring - 无法在spring自定义登录页面上显示页面

> ID：14317871
> 
> 赞同：0
> 
> 时间：2013-01-14T11:47:59.723
> 
> 标签：spring, login, spring-security

我在尝试为 Spring Web 应用程序创建自定义登录页面时遇到问题。

默认登录表单正常工作。但是当我添加

```
**<form-login login-page="/login"  />** 
```

该应用程序运行没有错误，但出现“无法显示页面”。

你有什么想法吗？谢谢

这是我的 web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0">
  <display-name>testweb</display-name>

    <filter>
        <filter-name>springSecurityFilterChain</filter-name>
        <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    </filter>

    <filter-mapping>
      <filter-name>springSecurityFilterChain</filter-name>
      <url-pattern>/*</url-pattern>
    </filter-mapping>

    <!--
      - Loads the root application context of this web app at startup.
    -->
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

     <!--
      - Location of the XML file that defines the root application context
      - Applied by ContextLoaderListener.
      -->
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
           /WEB-INF/applicationContext-security.xml
        </param-value>
    </context-param>

    <!-- Processes application requests -->
    <servlet>
        <servlet-name>dispatcher</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>

        <load-on-startup>1</load-on-startup>
    </servlet>       

    <servlet-mapping>
        <servlet-name>dispatcher</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>

</web-app> 
```

这是我的弹簧配置文件

```
 <?xml version="1.0" encoding="UTF-8"?>
     <beans xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"        xmlns:context="http://www.springframework.org/schema/context"
    xmlns:tx="http://www.springframework.org/schema/tx"
     xmlns:mvc="http://www.springframework.org/schema/mvc"

    xsi:schemaLocation="
http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
http://www.springframework.org/schema/context
http://www.springframework.org/schema/context/spring-context-3.0.xsd
http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
 http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
">

    <!-- DispatcherServlet Context: defines this servlet's request-processing infrastructure -->

    <!-- Scans within the base package of the application for @Components to configure as beans -->
    <!-- @Controller, @Service, @Configuration, etc. -->
    <context:component-scan base-package="myPACKAGE" />
   <!-- Enables the Spring MVC @Controller programming model -->
    <mvc:annotation-driven />

 <!-- Resolve logical view names to .jsp resources in the /WEB-INF/views directory -->
<bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="prefix" value="/WEB-INF/views/" />
    <property name="suffix" value=".jsp" />
</bean>
 </beans> 
```

这是我的弹簧安全文件

```
<?xml version="1.0" encoding="UTF-8"?>
 <beans:beans xmlns:beans="http://www.springframework.org/schema/beans"

    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
    xmlns="http://www.springframework.org/schema/security"
    xsi:schemaLocation="
http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
http://www.springframework.org/schema/context
http://www.springframework.org/schema/context/spring-context-3.0.xsd
 http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd
">

    <http auto-config="true">
        <intercept-url pattern="/*" access="ROLE_USER" />
        **<form-login login-page="/login"  />**

    </http>

    <authentication-manager>
        <authentication-provider>
            <user-service>
                <user name="myuser" password="mypwd" authorities="ROLE_USER" />
            </user-service>
        </authentication-provider>
    </authentication-manager>

</beans:beans> 
```

自定义登录页面是 WEB-INF/views/login.jsp 中的 login.jsp

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T12:39:35.807

您需要授予匿名用户访问登录页面的权限。将以下代码段添加到您的**http**元素

```
<intercept-url pattern="/login*" access="IS_AUTHENTICATED_ANONYMOUSLY" /> 
```

**编辑。**顺序很重要。必须在此行**之前插入：**

```
<intercept-url pattern="/*" access="ROLE_USER" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T12:11:52.337

1.  您的登录名 - 它是什么？HTML？JSP？您需要编写登录页面的 URI（例如 /login.html），而不仅仅是 /login。

2.  尝试将您的登录页面放在允许匿名用户查看的子目录（例如 /login）中：

< http模式="/login/**" 安全="无" />

接着

```
<security:form-login 
    login-page="/login/login.jsp" 
        ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T05:13:09.683

我猜应该这样做。

```
 <intercept-url pattern="/login.htm" access="permitAll()"/>
   <form-login login-page="/login.htm"                    
               authentication-failure-url = "/positionViewer/login.htm?login_error=1" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T12:18:48.330

你说你使用的是spring，所以我假设你使用的是spring-mvc，你添加了吗

```
<!-- selects a static view for rendering without the need for an explicit controller -->
<mvc:view-controller path="/login"  view-name="login"/> 
```

到您的 webmvc 配置。

还可以更改登录页面映射，您可以添加

```
<definition extends="default" name="/login">
    <put-attribute name="body" value="/WEB-INF/views/login.jspx"/>
</definition> 
```

# javascript - 如果已经触发，则仅触发一次 Jquery ajax

> ID：14317877
> 
> 赞同：0
> 
> 时间：2013-01-14T11:48:17.963
> 
> 标签：javascript, jquery, ajax, drupal

我的 Ajax 调用遇到了一些问题。我正在努力提高我网站的性能，为此我想做的一件事就是只触发一次 ajax，如果他们之前被解雇过，而不是解雇他们。

我的情景之一。我有 2 个选择下拉菜单 - 国家和地区。当一个国家被改变时，.change 被触发，它触发一个 ajax 来获取所选国家的区域。现在，例如，如果我选择国家 India，Ajax 将被触发，并将其更改为 Iceland，ajax 将被触发。现在，如果我将我的国家改回印度，则不应解雇 Ajax，因为我已经从服务器获取数据。

代码

```
$("#select_list_id").change(function(){
    var url = 'ajax.php?val=' + this.value;
    $.ajax({
      url: url,
      success: function(json){
        for(i=0; i<jsonData.length;i++) {
          $("#select_list_2_id").append(new Option(jsonData[i].title,jsonData[i].id));
        }
      }
    });
  }) 
```

我的方法可以是存储返回的 json，并比较更改时的 countryID，如果该值已经存在，则返回 json，否则点击 Ajax。但是我的项目中有近 100 个 ajax 调用，这个过程可能需要一些美好的时间。

如果有人可以帮助我，如何概括这段代码。

除此之外，在搜索时我发现这也可以通过 jquery once 插件来完成，如果是这样，有人可以提供一些帮助。

更新 - 谢谢大家，这确实帮助了我，现在情况很好:) 只是另一个小查询，那么 jquery once 插件的用途是什么？它用于相同的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T11:56:09.027

if you can generalize your ajax calls, you could cache the result json by the request uri (url+params)

something like this:

```
var ajaxCache = [];

function ajaxCall(url,successFunc)
{
    if(ajaxCache[url] != undefined)
    {
        successFunc(ajaxCache[url]);
    }
    else
    {
        $.ajax({
            url: url,
                success: function(json){
                    ajaxCache[url] = json;
                successFunc(json);
                }
            });
    }
}

$("#select_list_id").change(function(){
    ajaxCall('ajax.php?val=' + this.value, function(json){
        for(i=0; i<jsonData.length;i++) {
            $("#select_list_2_id").append(new Option(jsonData[i].title,jsonData[i].id));
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T11:59:33.933

You can store the response on the option that has emitted that request:

```
$("#select_list_id").change(function() {
    var $selected = $(this).children(":selected");

    if ( $selected.data("json") ) {
        build( $selected.data("json") );
    }
    else {
        $.ajax({
            url: 'ajax.php?val=' + this.value,
            success: function(json) {
                $selected.data("json", json);
                build(json);
            }
        });
    }

    function build(jsonData) {
        for(i=0; i<jsonData.length;i++) {
            $("#select_list_2_id").append(new Option(jsonData[i].title,jsonData[i].id));
        }
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T11:57:53.773

Assuming that the request is not cached, this is still relatively simple. You would maintain an object with country names as the keys and options as the values:

```
var countries = {};
.change(...
   var country = this.value;
   if (!countries.hasOwnProperty(country)) {
      countries[country] = [];
      $.ajax ...
         for (var i = 0; ...
            countries[country].push(new Option(...

   }
   //Iteration may be needed
   $("#select_list_2_id").empty().append(countries[country]); 
```

# linux - curl 挂起，尽管连接超时和最大时间

> ID：14317879
> 
> 赞同：4
> 
> 时间：2013-01-14T11:48:33.313
> 
> 标签：linux, curl

我有一些脚本使用 curl 的系统调用来检索资源（图像文件等）。有时，这些将无法完成，并将在进程列表中显示为 pipe_w。

```
F S UID        PID  PPID  C PRI  NI ADDR SZ WCHAN  STIME TTY          TIME CMD
0 S root      4378  4086  0  82   2 - 16002 pipe_w Jan10 ?        00:00:00 curl -JO --max-time 60 --connect-timeout 60 https://address/path/to/resource?identifier=tag 
```

如果我理解正确，我可以使用 connect-timeout 设置尝试建立连接的秒数，使用 max-time 来限制等待远程机器响应的时间。

```
curl -JO --max-time 60 --connect-timeout 60 https://address/path/to/resource?identifier=tag 
```

关于如何强制 curl 继续过去的任何建议？或有关可能导致此问题的指示？

这是在股票 ubuntu 10.10 上使用 curl 7.21.0。

# sml - 为什么'a和字符串不能统一？

> ID：14317882
> 
> 赞同：1
> 
> 时间：2013-01-14T11:48:47.370
> 
> 标签：sml

我正在尝试构建一些灵活的向量函数，类似于非灵活向量的函数。我收到一条我不明白的错误消息：

```
> val jimmy = update(john,0,"mccoy");
Error-Type error in function application.
   Function: update : 'a flexVector * int * 'a -> 'a flexVector
   Argument: (john, 0, "mccoy") : string flexVector * int * string
   Reason:
      Can't unify 'a flexVector with string flexVector
      (Different type constructors)
Found near update (john, 0, "mccoy")
Static Errors 
```

这怎么可能？据我了解，'a 数据类型是非特定的，因此可能是字符串......？

# tumblr - Tumblr 中的页面切换

> ID：14317887
> 
> 赞同：1
> 
> 时间：2013-01-14T11:49:06.310
> 
> 标签：tumblr

我正在修改 Tumblr 主题。我有一个页面时事通讯，并且仅在此页面上我想添加一个注册表单（硬编码）。

是否可以在 Tumblr 中查看当前页面是否 == 'newsletter' 或其他内容？也许是通过身份证？

我知道帖子是可能的，但我需要一个页面。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T11:24:55.590

一个（稍微）更安全的解决方案/黑客 -

```
{block:PermalinkPage}{block:Posts}{block:PostTitle}
<script>
    var postID = '{PostID}',
        postTitle = {JSPostTitle};

    if (!postID && postTitle === 'Name of your Newsletter Page') {
        // Tumblr custom "pages" have no post ID

        // Dynamically insert your HTML, or Dynamically "Show" a hidden element
    }
</script>
{/block:PostTitle}{/block:Posts}{/block:PermalinkPage} 
```

`Name of your Newsletter Page`您在 Tumblr 上分配时事通讯页面的页面标题在哪里。

将其包装`<script>`起来`{block:PermalinkPage}...etc`可确保脚本仅在正确类型的页面上呈现。

然后，为了安全起见，我们必须检查这个永久链接页面没有***Post*** ID，所以我们不会意外匹配实际的*Post*。对于没有帖子 ID 的永久链接页面，唯一的另一种可能性是自定义 tumblr 页面，因此只需将页面标题检查为某个预设值即可。

一般来说，基于`window.location`页面的切换确实*不是*一个好的解决方案。

至于创建/显示注册表单——我个人会在 Tumblr 主题上对表单进行硬编码，`display: none`然后用 JavaScript 切换可见的表单——但这是我的观点。您也可以使用脚本将其插入到 DOM 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T20:17:02.003

不幸的是，该功能在 Tumblr 中不存在。您需要做的是检查您所在页面的 URL，这非常简单。

您应该能够在 JavaScript 中执行以下操作：

```
var currentPath = window.location.pathname; // store current path

if( currentPath.indexOf('newsletter') ) { // check if 'newsletter' is in our path
  // add your sign up form here
} 
```

# g++ - 使用不同版本的 OpenSSL

> ID：14317892
> 
> 赞同：0
> 
> 时间：2013-01-14T11:49:14.267
> 
> 标签：g++, openssl

我正在开发 ubuntu，我正在开发一个使用 OpenSSL 的 C++ 库。

所以，我用来开发代码的PC有一个2010的OpenSSL版本。我创建了lib，用一个简单的测试程序编译它，我成功地执行了它。

然后，当我在其他 PC（具有最新的 OpenSSL 版本 - 2012 年 5 月）中测试 lib 时，我成功编译了简单的测试程序，但是当我执行它时它们崩溃了。

我“解决”了将 OpenSSL 版本从 2010 更新到最新版本的问题，但将来如果有人将 lib 与最近的 OpenSSL 版本一起使用，这个问题可能会再次发生。

所以，我想知道是否有可能，例如，使用 OpenSSL 必要文件创建 lib，以便无论使用简单测试程序编译 lib 的 PC 的 OpenSSL 版本如何，都可以执行代码.

为了创建我的库，我将我的文件编译为 .obj 文件（例如：g++ -c fileA.c -o fileA.o），然后创建一个 libABC.a 文件（ar rcs libABC.a filaA.o fileB. o ...）。我只使用“-lssl”编译选项将我的库与其余代码链接，例如：g++ simpleCode.o libABC.a -o Test -lssl

最好的问候，塞尔吉奥

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T14:57:15.103

通常这样的问题可以通过为库的不兼容版本提供不同的 soname 来解决（例如 libssl.0.9.7 与 libssl.1.0.0）。如果您的 libssl.so 版本没有版本化的 soname，则它已损坏。

要检查库的 soname 以及您的程序所链接的 soname，请执行以下命令

```
 ldd /path/to/your/program/Test | grep openssl
 objdump --private-headers /usr/lib/libssl.so* | grep SONAME 
```

如果您的程序与 libssl.0.9.7 链接，它将根本不会从任何其他版本开始。

# php - 发送包含文件附件的邮件

> ID：14317897
> 
> 赞同：0
> 
> 时间：2013-01-14T11:49:51.753
> 
> 标签：php

正在发送带有文件附件的邮件，但无法打开它。

有什么问题请解决这个问题。

```
<?php

    $file_name=$_FILES['Resume']['name'];
    $file_size=$_FILES['Resume']['size'];
    $file_temp=$_FILES['Resume']['tmp_name'];

    $to = 'renu_activa@yahoo.co.in';
    $subject = 'Test email with attachment'; 
    $from=$_POST['First'];
    $random_hash = md5(date('r', time()));
    $headers = "From: $from\r\nReply-To: $from";
    $headers .= "\r\nContent-Type: multipart/mixed; boundary=\"PHP-mixed-".$random_hash."\"";
    $data = chunk_split(base64_encode(file_get_contents("$file_temp")));
    ob_start(); 
    ?> 
    --PHP-mixed-<?php echo $random_hash; ?>
    Content-Type: multipart/alternative; boundary="PHP-alt-<?php echo $random_hash; ?>"

    --PHP-alt-<?php echo $random_hash; ?>  
    Content-Type: text/plain; charset="iso-8859-1" 
    Content-Transfer-Encoding: 7bit

    Hello World!!! 
    This is simple text email message. 

    --PHP-alt-<?php echo $random_hash; ?>  
    Content-Type: text/html; charset="iso-8859-1" 
    Content-Transfer-Encoding: 7bit

    <h2>Hello World!</h2> 
    <p>This is something with <b>HTML</b> formatting.</p> 
    --PHP-mixed-<?php echo $random_hash; ?>
    Content-Type: $file_type; name=$file_name
    Content-Transfer-Encoding: base64
    Content-Disposition: attachment

    <?php echo $data; ?>
    --PHP-mixed-<?php echo $random_hash; ?>-- 

    <?php 
    //copy current buffer contents into $message variable and delete current output buffer 
    $message = ob_get_clean(); 
    //send the email 
    $mail_sent = @mail( $to, $subject, $message, $headers );//if the message is sent successfully print "Mail sent". Otherwise print "Mail failed" 
    echo $mail_sent ? "Mail sent" : "Mail failed";
            ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T12:04:11.157

您不会建立自己的 MIME 电子邮件。使用[PHPMailer](http://phpmailer.worxware.com/)或[Swiftmailer](http://swiftmailer.org/)，它们几乎可以为您完成所有工作。您可以用大约 5 或 6 行代码替换整个脚本。

最重要的是，它们会为您提供比可悲愚蠢的 mail() 函数更好的错误消息/诊断。

此外，Geekmail PHP 库使向电子邮件添加附件变得容易

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T11:52:46.463

what is "mysql_error"? i think the correct syntax for you die statement is

```
die(mysql_error()); 
```

or

```
die($mysql_error); 
```

# google-chrome-extension - 谷歌浏览器扩展中的当前网址错误

> ID：14317900
> 
> 赞同：0
> 
> 时间：2013-01-14T11:50:03.190
> 
> 标签：google-chrome-extension

我有一个 google chrome 扩展程序，它在弹出窗口中显示 onclick。有一个上下文菜单，其中包含一些需要当前/活动选项卡 URL 的选项。该扩展程序存在如下所述的问题。

**旧代码：**

```
function menuCallback(info, tab) {

var currentUrl = tab.url; 
```

使用旧代码：如果您在弹出窗口中右键单击，则返回的当前 url 是“chrome-extension ...”等等。

**新代码：（我试图解决这个问题）**

```
chrome.tabs.query({'active': true, 'windowId': chrome.windows.WINDOW_ID_CURRENT},
    function(tabs){
        currentUrl = tabs[0].url;
    }
); 
```

这有效，因为即使点击来自弹出窗口内部，它也会返回选项卡 url。但是，如果我有 10 个打开的标签并在两个之间切换，总是会返回旧的。例如我首先在 google.de，返回的 url 是 google.de。现在我切换到一个已经打开的标签，如“heise.de”并右键单击，它仍然是 google.de。下一次尝试/尝试 url 是否正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T13:34:21.620

You probably want to use the `onUpdated` listener.

```
chrome.tabs.onUpdated.addListener(doSomething); 
```

Which gives you the tabId, changeInfo and tab metadata. You then can do as you please:

```
var doSomething = function (tabId, changeInfo, tab) {
  var match = /http:\/\/www.google.com/.exec(tab.url);
  if(match && changeInfo.status == 'complete') {
       ... do something ...
  } 
} 
```

EDIT: After reading again your question, what you probably want is the **onHighlighted** [event listener](http://developer.chrome.com/extensions/tabs.html#events). It returns an object with an array of `tabsIds` and the `window` as soon as you select a tab.

```
chrome.tabs.onHighlighted.addListener(function(o) { tabId = o.tabIds[0]; }) 
```

You can then use `get` in order to obtain more information about that specific tab.

```
chrome.tabs.get(tabId, function(tab) { ... }) 
```

I'm leaving the `onUpdated` code in case anyone wants the tab information whenever a page changes.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-10T13:26:51.617

使用[查询参数](https://developer.chrome.com/extensions/tabs#method-query)在当前焦点窗口中查找活动选项卡的 URL 的最简单解决方案如下。

```
chrome.tabs.query({active: true, currentWindow: true}, function(tabs){
  currentUrl = tabs[0].url;
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-15T05:44:48.310

```
chrome.tabs.getSelected(null, function(tab) {
    var currentURL= tab.url;
    alert(currentURL); // this should give you current url.
} 
```

# tridion - 在 tridion 存储扩展中，每个创建和更新方法被调用两次

> ID：14317913
> 
> 赞同：2
> 
> 时间：2013-01-14T11:50:34.830
> 
> 标签：tridion, tridion-2011, tridion-content-delivery, tridion-storage-extension

我无法弄清楚为什么我的创建和更新方法的自定义文件系统 DOA 被调用了两次，所以我在自定义存储扩展中获得了两次相同的记录。

*   创建/更新方法被调用两次 - 当我发布任何页面时，每个记录都保存在数据库中。
*   删除（取消发布页面很好，只有一条记录被插入到数据库中，但是在取消发布任何页面后，下次发布该特定页面会失败）

**我有以下用于处理页面的类代码以及为组件和二进制文件编写的相同代码：**

```
package com.tridion.storage.dao;

import java.io.File;

import com.tridion.broker.StorageException;
import com.tridion.data.CharacterData;

import com.tridion.storage.PageMeta;
import com.tridion.storage.StorageManagerFactory;
import com.tridion.storage.StorageTypeMapping;
import com.tridion.storage.filesystem.FSEntityManager;
import com.tridion.storage.filesystem.FSPageDAO;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

public class FSPageContentDAOExtension extends FSPageDAO implements PageDAO 
{
    private static Logger log = LoggerFactory.getLogger(FSPageContentDAOExtension.class);

    public FSPageContentDAOExtension(String storageId, String storageName, File storageLocation) 
    {
        super(storageId, storageName, storageLocation);     
        log.debug("Entering Constructor 1: FSPageContentDAOExtension(" + storageId + ","  + storageLocation.getPath() + ","  + storageName + ")");
    }

    public FSPageContentDAOExtension(String storageId, String storageName, File storageLocation, FSEntityManager entityManager) {
        super(storageId, storageName, storageLocation, entityManager);
        log.debug("Entering Constructor 2: FSPageContentDAOExtension(" + storageId + "," + entityManager.toString() +  ","  + storageLocation.getPath() + ","  + storageName + ")");
    }

    public void create(CharacterData page, String relativepath) throws StorageException 
    {
        super.create(page,relativepath);    

        log.info("Inside the Create");
        log.info("storageId.toLowerCase()-"+storageId.toLowerCase());

        try
        {
                log.info("Inside the Create - page.getPublicationId():"+page.getPublicationId()+"--"+relativepath);
                ItemDAO item = (ItemDAO) StorageManagerFactory.getDAO(page.getPublicationId(),StorageTypeMapping.PAGE_META);
                log.info("Inside the Create - item:"+item.getBindingName());
                if( item !=null)
                {     
                    log.info("Inside the Create - PageMeta:");
                    PageMeta pageMeta = (PageMeta) item.findByPrimaryKey(page.getPublicationId(),page.getId());
                    log.info("Inside the Create - PageMeta2:"+pageMeta.getFileName());
                    if(pageMeta!=null)
                    {
                        log.info("Create - PageMeta-"+pageMeta.getTitle());
                        int publicationId = pageMeta.getPublicationId();
                        String strIgnorePubIds = "232,481";
                        String pubId = Integer.toString(publicationId);
                        if(!strIgnorePubIds.contains(pubId))
                        {
                            String url = pageMeta.getUrl();
                            String tcmURI = Integer.toString(pageMeta.getItemId());
                            PublishActionDAO publishActionDAO = (PublishActionDAO) StorageManagerFactory.getDefaultDAO("PublishAction");
                            if(publishActionDAO !=null)
                            {
                                PublishAction publishAction = new PublishAction();          
                                publishAction.setAction("ADD");
                                publishAction.setPublicationID(publicationId);
                                publishAction.setUrl(url);
                                publishAction.setLastPublishedDate(pageMeta.getLastPublishDate());
                                publishAction.setItemType(64);
                                publishAction.setTcmUri(tcmURI);
                                log.debug("Going to Store bean -"+ publishAction.toString());
                                publishActionDAO.store(publishAction);
                                createFlag = false;
                            }

                        } 
                    }
                }           
        }
        catch (StorageException se) 
        {           
            log.error("FSPageContentDAOExtension - Exception occurred " + se);
        }
    }

    public void update(CharacterData page,String originalRelativePath, String newRelativepath)throws StorageException {
        super.update(page,originalRelativePath,newRelativepath);;   
        log.info("Inside the Update");
        log.info("storageId.toLowerCase()-"+storageId);

        try
        {

                log.info("Inside the Update - page.getPublicationId():"+page.getPublicationId()+"--"+originalRelativePath+"--"+newRelativepath);
                ItemDAO item = (ItemDAO) StorageManagerFactory.getDAO(page.getPublicationId(),StorageTypeMapping.PAGE_META);
                log.info("Inside the Update - item:"+item.getBindingName());
                if( item !=null)
                {     
                    log.info("Inside the Update - PageMeta:");
                    PageMeta pageMeta = (PageMeta) item.findByPrimaryKey(page.getPublicationId(),page.getId());
                    log.info("Inside the Update - PageMeta2:"+pageMeta.getFileName());
                    if(pageMeta!=null)
                    {
                        log.info("Update - PageMeta-"+pageMeta.getTitle());
                        int publicationId = pageMeta.getPublicationId();
                        String strIgnorePubIds = "232,481";
                        String pubId = Integer.toString(publicationId);
                        if(!strIgnorePubIds.contains(pubId))
                        {
                            String url = pageMeta.getUrl();
                            String tcmURI = Integer.toString(pageMeta.getItemId());
                            PublishActionDAO publishActionDAO = (PublishActionDAO) StorageManagerFactory.getDefaultDAO("PublishAction");
                            if(publishActionDAO !=null)
                            {
                                PublishAction publishAction = new PublishAction();          
                                publishAction.setAction("UPD");
                                publishAction.setUrl(url);
                                publishAction.setPublicationID(publicationId);
                                publishAction.setLastPublishedDate(pageMeta.getLastPublishDate());
                                publishAction.setItemType(64);
                                publishAction.setTcmUri(tcmURI);
                                log.debug("Going to Store bean -"+ publishAction.toString());
                                publishActionDAO.store(publishAction);
                                createFlag = false;
                            }                       
                        } 
                    }
                }
        }
        catch (StorageException se) 
        {           
            log.error("FSPageContentDAOExtension - Exception occurred " + se);
        }

    }

    public void remove(final int publicationId, final int pageID, final String relativePath) throws StorageException {

        log.info("Inside the Delete");      
        try
        {

                ItemDAO item = (ItemDAO) StorageManagerFactory.getDAO(publicationId,StorageTypeMapping.PAGE_META);
                if( item !=null)
                {       
                    PageMeta pageMeta = (PageMeta) item.findByPrimaryKey(publicationId,pageID);

                    if(pageMeta!=null)
                    {
                        log.info("Delete - PageMeta-"+pageMeta.getTitle());                 
                        String strIgnorePubIds = "232,481";
                        String pubId = Integer.toString(publicationId);
                        if(!strIgnorePubIds.contains(pubId))
                        {
                            String url = pageMeta.getUrl();
                            String tcmURI = Integer.toString(pageMeta.getItemId());
                            PublishActionDAO publishActionDAO = (PublishActionDAO) StorageManagerFactory.getDefaultDAO("PublishAction");
                            if(publishActionDAO !=null)
                            {
                                PublishAction publishAction = new PublishAction();          
                                publishAction.setAction("DEL");
                                publishAction.setUrl(url);
                                publishAction.setLastPublishedDate(pageMeta.getLastPublishDate());
                                publishAction.setItemType(64);
                                publishAction.setTcmUri(tcmURI);
                                publishAction.setPublicationID(publicationId);
                                log.debug("Going to Store bean -"+ publishAction.toString());
                                publishActionDAO.store(publishAction);
                            }

                        } 
                    }
                }           
        }
        catch (StorageException se) 
        {           
            log.error("FSPageContentDAOExtension - Exception occurred " + se);
        }
        super.remove(publicationId, pageID, relativePath);  
    }
} 
```

**我的存储包如下：**

```
<?xml version="1.0" encoding="UTF-8"?>
<StorageDAOBundles>
    <StorageDAOBundle type="persistence">
        <StorageDAO typeMapping="PublishAction" class="com.tridion.storage.dao.JPAPublishActionDAO" />
    </StorageDAOBundle>

    <StorageDAOBundle type="filesystem">
    <StorageDAO typeMapping="Binary" class="com.tridion.storage.dao.FSBinaryContentDAOExtension" />
    </StorageDAOBundle>

    <StorageDAOBundle type="filesystem">
        <StorageDAO typeMapping="Page" class="com.tridion.storage.dao.FSPageContentDAOExtension" />
    </StorageDAOBundle>

    <StorageDAOBundle type="filesystem">
        <StorageDAO typeMapping="ComponentPresentation" class="com.tridion.storage.dao.FSComponentContentDAOExtension" />
    </StorageDAOBundle>
</StorageDAOBundles> 
```

**我的示例 cd_storage XML**

```
<Storages>
    <StorageBindings>
        <Bundle src="search_dao_bundle.xml"/>
    </StorageBindings>  
    <Storage Type="persistence" Id="searchdb" dialect="MSSQL" Class="com.tridion.storage.persistence.JPADAOFactory">
        <Pool Type="jdbc" Size="5" MonitorInterval="60" IdleTimeout="120" CheckoutTimeout="120" />
        <DataSource Class="com.microsoft.sqlserver.jdbc.SQLServerDataSource">
            <Property Name="serverName" Value="*****" />
            <!--Property Name="portNumber" Value="1433" /-->
            <Property Name="databaseName" Value="**********" />
            <Property Name="user" Value="*****" />
            <Property Name="password" Value="********" />
        </DataSource>
    </Storage>

    <Storage Type="filesystem" Class="com.tridion.storage.filesystem.FSDAOFactory" Id="defaultFile" defaultFilesystem="false">
        <Root Path="F:\test.com New" />
    </Storage>
    <Storage Type="filesystem" Class="com.tridion.storage.filesystem.FSDAOFactory" Id="defaultDataFile" defaultFilesystem="true" defaultStorage="true">
        <Root Path="F:\test.com New\data" />
    </Storage>  
</Storages>
<ItemTypes defaultStorageId="defaultdb" cached="false"> 
        <Item typeMapping="PublishAction" cached="false" storageId="searchdb" />    
        <Item typeMapping="Query" storageId="defaultdb"/>
        <Item typeMapping="SearchFilter" storageId="defaultDataFile"/>
        <Item typeMapping="XSLT" cached="false" storageId="defaultDataFile"/>
        <Item typeMapping="ComponentPresentation" itemExtension=".Jsp" cached="false" storageId="defaultDataFile"/>
        <Item typeMapping="ComponentPresentation" itemExtension=".Asp" cached="false" storageId="defaultDataFile"/>
        <Item typeMapping="ComponentPresentation" itemExtension=".Xml" cached="false" storageId="defaultDataFile"/>
        <Item typeMapping="ComponentPresentation" itemExtension=".txt" cached="false" storageId="defaultDataFile"/>
        <Item typeMapping="Schema" cached="false" storageId="defaultDataFile"/>
        <Item typeMapping="Page" cached="false" storageId="defaultFile"/>
        <Item typeMapping="Binary" cached="false" storageId="defaultFile"/>
</ItemTypes> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T08:09:49.147

在我的自定义表中插入两条记录的原因是我们在演示服务器上实现了两个自定义 PAGE Deployer 扩展。

因此，部署者都在调用基类 FSPageDAO 和 PageDAO 的接口方法。

只有在我们的 DAO 中有一些代码来处理调用基类的限制，才能解决上述问题。

否则，如果您在服务器上实现了部署程序扩展，则无法控制这一点。

请建议，如果我们可以在我们的 DAO 中检查和控制（如果可能的话）。

谢谢。

# cocoa - 可可文件-/目录监视库可用吗？

> ID：14317919
> 
> 赞同：0
> 
> 时间：2013-01-14T11:51:21.310
> 
> 标签：cocoa, fsevents

我知道有 FSEvents Api 和一些 Spotlight API 来创建文件/目录观察程序。我也知道有一些像 CDEvents 这样的 FSEvents 的 ObjC 包装器，但是是否有一个完整的 Cocoa 库用于文件/文件夹监视？我不敢相信每个人都使用那些非常好的包装器创建了自己的 Filewatcher。这意味着每个人都一遍又一遍地做同样的工作？！我正在寻找一个库，它可以判断目录中是否发生了变化以及发生了什么变化，据我所知，FSEvents 的更精细粒度仅在 10.8 中有效？

亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T00:03:35.627

到目前为止，您所发现的就是您所得到的：FSEvents 和第三方包装器。

# r - 相关矩阵中的下标越界

> ID：14317920
> 
> 赞同：0
> 
> 时间：2013-01-14T11:51:25.243
> 
> 标签：r, correlation

我正在`corm`研究 606 列 x 606 行的相关矩阵 ( )，并且我有一个名为 ( `X`) 的变量，其中包含一些列名。我想从 ( `corm`) 中选择这些列。

```
> print(X)
 [1] "VL"         "IM"         "2_EA"    "Av"       
 [5] "Cit"        "Wap"        "Rp"      "R"      
 [9] "H2e"        "Wp"         "As"      "2"        
 [13] "HS"        "Wep"        "W"       "p" 
```

我应用以下命令

```
corm2 <- corm[,X] 
```

我明白了：

```
Error: subscript out of bounds 
```

任何线索这里出了什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T12:20:06.287

将该评论变成答案：

`Error: subscript out of bounds`发生是因为其中的某些名称`X`不是`corm`矩阵的列名。换句话说，您正在尝试提取不存在的列，因此会出现错误消息。

这可能是因为一个错字。你可以跑去`setdiff(X, colnames(corm))`找出罪魁祸首。

# c# - Settings.Settings is updated to default values in C#

> ID：14317923
> 
> 赞同：0
> 
> 时间：2013-01-14T11:51:49.303
> 
> 标签：c#

I have the settings file in C# where I store the configuration parameters. So, I build the solution and install it in the system. The application creates an XML file user.config consisting of all the configuration parameters in :

`%userprofile%\appdata\local or %userprofile%\Local Settings\`

I made changes to the configuration through the application and save it by issuing the command

`Properties.Settings.Default.Save();`

When I restart the application, the configuration consists of the default values and not the updated values.

Any idea if I am missing something here.

![enter image description here](../Images/a9c46e8ce636c643ad497ece3f4501e3.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T13:31:48.243

> %userprofile%\appdata\local 或 %userprofile%\Local Settings\

这是这个问题的根本错误，这不是 user.config 文件的存储位置。LocalFileSettingsProvider 类（默认设置提供程序类）将 user.config 文件存储在一个名称难以描述的目录中，例如 C:\Users\username\AppData\Local\WindowsFormsApplication1\WindowsFormsApplication1._Url_twchbbo4atpsvjpauzkgkvesu5bh2aul\1.0.0.0

名称的`twchbbo4atpsvjpauzkgkvesu5bh2aul`一部分是由一个哈希函数产生的，它结合了程序安装位置、程序名称、[AssemblyCompany]和[AssemblyProduct]，以确保目录是唯一的，并且不会与另一个程序的user.config冲突。并附加 [AssemblyVersion] 以便不同版本的程序不会发生冲突。

您需要首先找到正确的 user.config 文件来诊断此问题。从 %appdata%\Local 或 %appdata%\Roaming 目录开始。确保 Save() 方法实际保存，如果没有为设置分配不同的值，则不会。使用 SysInternals 的 ProcMon 实用程序仔细检查所有假设，您将看到您的程序在跟踪中访问该文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T12:10:57.537

您的设置范围是什么？您不能像从代码中那样更改应用程序范围设置。看看设置设计器。 ![在此处输入图像描述](../Images/f382057e20af0acd3e7edff440cf648d.png)

[您可以在此处](http://msdn.microsoft.com/en-us/library/k4s6c3a0.aspx)阅读有关设置范围的更多信息。

# mysql - MySQL 在正常形式表中连续 N 天计数

> ID：14317924
> 
> 赞同：1
> 
> 时间：2013-01-14T11:51:51.017
> 
> 标签：mysql, sql, datetime, database-normalization

我想计算特定用户在给定日期和之前召开会议的连续 N 天。

例如：计算 id 为 1 的用户在 2013 年 1 月 16 日的连续会议天数。

[我在这里](https://stackoverflow.com/questions/7093722/mysql-group-by-consecutive-days-and-count-groups)和[这里](https://stackoverflow.com/questions/11539065/check-for-x-consecutive-days-given-timestamps-in-database)找到了一些很好的答案，但是表格不像我上面的示例那样采用正常形式，我无法弄清楚如何为我的场合实施它。

一个示例表结构如下：

```
CREATE TABLE IF NOT EXISTS `meetings` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `time` datetime NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8;

CREATE TABLE IF NOT EXISTS `meetings_users` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `user_id` int(10) unsigned NOT NULL,
  `meeting_id` int(10) unsigned NOT NULL,
  PRIMARY KEY (`id`),
  KEY `user_id` (`user_id`),
  KEY `meeting_id` (`meeting_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8;

CREATE TABLE IF NOT EXISTS `users` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8;

--
-- Constraints for table `meetings_users`
--
ALTER TABLE `meetings_users`
  ADD CONSTRAINT `meetings_users_ibfk_2` FOREIGN KEY (`meeting_id`) REFERENCES `meetings` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
  ADD CONSTRAINT `meetings_users_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON DELETE CASCADE ON UPDATE CASCADE; 
```

样品插入

```
INSERT INTO  `users` ( `id` ) VALUES (1)

INSERT INTO `meetings` ( `id`, `time` ) VALUES 
(1, '2013-01-14 10:00:00'), 
(2, '2013-01-15 10:00:00'), 
(3, '2013-01-16 10:00:00')

INSERT INTO `meetings_users` ( `id`, `meeting_id`, `user_id` ) VALUES 
(1, 1, 1), 
(2, 2, 1), 
(3, 3, 1) 
```

期望的输出：

```
*+---------+-----------------+
| user_id | consecutive_days |
+---------+------------------+
|       1 | 3                |
+---------+------------------+ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T13:18:41.170

这样的事情怎么样。我希望它可以在没有子查询的情况下重新编写，但我一定有点脑子不灵了......（修改了数据集和查询以适应变化的要求）

```
DROP TABLE IF EXISTS meetings;
CREATE TABLE IF NOT EXISTS meetings 
( meeting_id int(10) unsigned NOT NULL AUTO_INCREMENT
, meeting_time datetime NOT NULL
, PRIMARY KEY (meeting_id)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8;

DROP TABLE IF EXISTS meetings_users;
CREATE TABLE IF NOT EXISTS meetings_users 
( user_id int(10) unsigned NOT NULL
, meeting_id int(10) unsigned NOT NULL
, PRIMARY KEY (meeting_id,user_id)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8;

DROP TABLE IF EXISTS users;
CREATE TABLE IF NOT EXISTS users 
( user_id int(10) unsigned NOT NULL AUTO_INCREMENT
, PRIMARY KEY (user_id)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8;

INSERT INTO  users ( user_id ) VALUES (1),(2),(3),(4);

INSERT INTO meetings ( meeting_id, meeting_time ) VALUES 
(1, '2013-01-14 10:00:00'), 
(2, '2013-01-15 10:00:00'), 
(3, '2013-01-16 10:00:00'),
(4, '2013-01-17 10:00:00'),
(5, '2013-01-18 10:00:00'),
(6, '2013-01-19 10:00:00'),
(7, '2013-01-20 10:00:00'),
(8, '2013-01-14 12:00:00');

INSERT INTO meetings_users (meeting_id, user_id ) VALUES 
(1, 1), 
(2, 1),
(2, 3),
(3, 1),
(3, 3),
(4, 2),
(4, 3), 
(5, 2), 
(6, 1),
(1, 8);

SET @dt = '2013-01-15';

SELECT user_id
     , start
     , DATEDIFF(@dt,start)+1 cons
  FROM
     (
       SELECT a.user_id
            , a.meeting_date Start
            , MIN(c.meeting_date) End
        , DATEDIFF(MIN(c.meeting_date),a.meeting_date)  + 1 diff
         FROM (SELECT DISTINCT mu.user_id,DATE(m.meeting_time) meeting_date FROM meetings_users mu JOIN meetings m ON m.meeting_id = mu.meeting_id) a
         LEFT
         JOIN (SELECT DISTINCT mu.user_id,DATE(m.meeting_time) meeting_date FROM meetings_users mu JOIN meetings m ON m.meeting_id = mu.meeting_id) b
       ON b.user_id = a.user_id
          AND a.meeting_date = b.meeting_date + INTERVAL 1 DAY
         LEFT
         JOIN (SELECT DISTINCT mu.user_id,DATE(m.meeting_time) meeting_date FROM meetings_users mu JOIN meetings m ON m.meeting_id = mu.meeting_id) c
       ON c.user_id = a.user_id
          AND a.meeting_date <= c.meeting_date
         LEFT
         JOIN (SELECT DISTINCT mu.user_id,DATE(m.meeting_time) meeting_date FROM meetings_users mu JOIN meetings m ON m.meeting_id = mu.meeting_id) d
           ON d.user_id = a.user_id
          AND c.meeting_date = d.meeting_date - INTERVAL 1 DAY
        WHERE b.meeting_date IS NULL
      AND c.meeting_date IS NOT NULL
          AND d.meeting_date IS NULL
        GROUP
       BY a.user_id
        , a.meeting_date
     ) x
 WHERE @dt BETWEEN start AND end;
 +---------+------------+------+
 | user_id | start      | cons |
 +---------+------------+------+
 |       1 | 2013-01-14 |    2 |
 |       3 | 2013-01-15 |    1 |
 +---------+------------+------+ 
```

# ios - Text size issue in UITextView

> ID：14317926
> 
> 赞同：0
> 
> 时间：2013-01-14T11:51:58.227
> 
> 标签：ios, uitextview

I have a UITextView and I need to calculate it's content size before the new character appears on editing. I've tried the following:

```
- (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text {
    CGSize size = [[textView.text stringByReplacingCharactersInRange:range 
                                                          withString:text]
                       sizeWithFont:textView.font
                  constrainedToSize:CGSizeMake(textView.contentSize.width, 200)
                      lineBreakMode:UILineBreakModeWordWrap];
    return YES;
} 
```

I set a breakpoint at the line with `return`. The content insets are 0 each.

The problem is that the `size` has a height of 60, but the `textView.contentSize.height` is 76 (and I enter a character, not delete one so it should be 76 if no new line is required or greater than 76 if I`m at the end of line). Anyone knows why is this happening?

Thanks in advance!

# html - Joomla changes wont take effect on site

> ID：14317927
> 
> 赞同：-1
> 
> 时间：2013-01-14T11:52:01.610
> 
> 标签：html, caching, joomla

I am using one template under 1.5 Joomla version and whatever change I do in the CMS backend it wont take effect on site. I checked my browser cache and system cache in Joomla and it still doesnt make a difference.

Any ideas about this ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T12:13:04.583

如果 Joomla 类似于 Dotnetnuke，那么后端有一个配置设置来管理它。默认情况下，有些似乎非常积极地缓存以节省数据库命中。谷歌搜索表明相同，可以在[http://help.joomla.org/index.php?option=com_content&task=findkey&tmpl=component;1&keyref=screen.cache.15看到](http://help.joomla.org/index.php?option=com_content&task=findkey&tmpl=component;1&keyref=screen.cache.15)

否则，请在系统设置中查找“缓存”菜单或插件。希望这可以帮助。

问候， 安东尼

# postgresql - pgAdmin III (pgadmin3_92.x86_64 0:1.16.1-1.rhel6 ) 不会启动

> ID：14317930
> 
> 赞同：2
> 
> 时间：2013-01-14T11:52:17.373
> 
> 标签：postgresql, centos, pgadmin

*   我安装 pgAdmin 的操作系统：Centos 6.3
*   Postgresql 9.2 安装在另一台机器上（不确定这是否重要）

已`pgadmin3_92`通过 postgresql repo 安装。

当我去：`Applications > Programming > pgAdminIII`和选择时，什么也没有发生。

当我进入`pgadmin3_92`终端时，我得到

> pgadmin3_92：加载共享库时出错：libpq.so.5：无法打开共享对象文件：没有这样的文件或目录

我试过用谷歌搜索这个错误，但没有结果。我只是 Linux/Centos 的新手，所以我已经达到了下一步要弄清楚如何让 pgAdminIII 工作的极限。

关于下一步要寻找/做什么的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T10:35:38.880

该错误是由于 Centos 无法找到共享库来运行应用程序造成的。

我的`pgadmin3`库文件安装在：`/usr/pgsql-9.2/lib`

我`ldd pgadmin3`按照[这里](http://innovationsts.com/?p=1042)的提示运行，这证实了找不到运行的共享库`pgadmin`。

同样在同一个链接上，它显示更改为 root 用户：`su - root`，然后创建一个`.conf`文件，将 Centos 指向库所在的位置`pgadmin3`。创建此文件的命令是：

```
echo /usr/pgsql-9.2/lib > /etc/ld.so.conf.d/pgsql-9.2.conf 
```

对于其他人来说，这将是：

```
echo <location of pgadmin3 libraries> > /etc/ld.so.conf.d/pgsql-9.2.conf 
```

然后我运行：`cat /etc/ld.so.conf.d/pgsql-9.2.conf`以确认文件已创建并且库的位置已写入文件。

然后我运行以下命令以确保 Centos 已使用此新配置信息刷新：

```
/sbin/ldconfig 
```

我能够`pgadmin3`在此之后运行。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-14T11:54:31.713

```
yum install postgresql92 
```

如果还不够的话

```
yum install postgresql92-libs 
```

# java - What's a good Java idiom for concatenating multiple lists with a single command?

> ID：14317931
> 
> 赞同：1
> 
> 时间：2013-01-14T11:52:18.217
> 
> 标签：java, list, api, collections, concatenation

I want to concatenate multiple lists with a *single* command, e.g. to do something like:

```
myFirstList.concat(mySecondList).concat(myThirdList); 
```

or maybe

```
List.concat(myFirstList, mySecondList,myThirdList); 
```

i.e. I'd like something like

```
List<T> concat(List<T> additional); 
```

as a member of `List` (can't have that, I guess... :-( ), or

```
static <T> List<T> concat(List<T>... lists); 
```

which is more doable. Does any package have this?

**Note:**

Yes, I know I can use `addAll()`, but that returns a boolean, so you can't use it repeatedly in the same command.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T11:59:48.163

Use [addAll()](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/ArrayList.html#addAll%28java.util.Collection%29) method:

```
List<String> testList1 = new ArrayList<String>();           
testList1.add("one");
testList1.add("two");

List<String> testList2 = new ArrayList<String>();
testList2.add("three");

testList2.addAll(testList1);
//testList2 now has "three","one","two" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T12:05:45.767

您可以使用该`addAll`方法并为此创建一个小型构建器：

```
class ListBuilder<T> {
    private List<T> list = new ArrayList<T>();

    public ListBuilder<T> concat(List<T> other) {
        this.list.addAll(other);
        return this;
    }

    public List<T> getAll() {
        return this.list;
    }
} 
```

用法：

```
ListBuilder<String> builder = new ListBuilder<String>();
builder.concat(myFirstList).concat(mySecondList).concat(myThirdList);

System.out.println(builder.getAll()); 
```

# c++ - 这段代码有什么作用，为什么要编译？

> ID：14317939
> 
> 赞同：5
> 
> 时间：2013-01-14T11:52:58.347
> 
> 标签：c++, oop, class, templates, gcc

我在 C++ 中创建一个 Vector2 类作为模板，我想将`+`运算符定义为可以简单地添加两个向量的非成员友元函数。

这是我的 Vector2 模板类中的朋友声明：

```
template <class U>
friend Vector2<T> operator+(const Vector2<T> &lhs, const Vector2<T> &rhs); 
```

这包含在一个`.hpp`文件中，但实现在一个单独的`.cpp`文件中：

```
template <class T>
Vector2<T> operator+(const Vector2<T> &lhs, const Vector2<T> &rhs)
{
    return Vector2<T>(lhs.x_ + rhs.x_, lhs.y_ + rhs.y_);
} 
```

这编译没有任何警告，但是，它似乎不起作用。

```
Vector2<int> v1(4, 3);
Vector2<int> v2(3, 4);

Vector2<int> v3 = v1 + v2; 
```

当我尝试编译上面的代码片段时，GCC 抱怨：

```
prog.cpp: In function ‘int main(int, char**)’:
prog.cpp:26:28: error: no match for ‘operator+’ in ‘v1 + v2’

source/vector2.hpp:31:23: note: template<class U> Vector2<int> operator+(const Vector2<int>&, const Vector2<int>&)
source/vector2.hpp:31:23: note:   template argument deduction/substitution failed:
prog.cpp:26:28: note:   couldn't deduce template parameter ‘U’
prog.cpp:26:18: warning: unused variable ‘v3’ [-Wunused-variable] 
```

我究竟做错了什么？如何正确定义`+`模板类的运算符？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T11:57:32.090

编译器清楚地说明了问题所在。它不能推导出模板参数'U'。您的声明（.hpp 文件）是错误的。应该

```
template <class T>
friend Vector2<T> operator+(const Vector2<T> &lhs, const Vector2<T> &rhs); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T12:00:47.877

运算符的模板使用了一个`U`未使用的参数。签名使用 a`T`代替，它可能来自周围的类模板：

```
template <class U>
friend Vector2<T> operator+(const Vector2<T> &lhs, const Vector2<T> &rhs); 
```

因为`U`未使用，编译器无法自动推断它应该是什么类型并给出错误。

一致地使用模板参数，将任何模板的定义放在`.hpp`文件中，你应该没问题。

# c# - Monitoring function access

> ID：14317948
> 
> 赞同：0
> 
> 时间：2013-01-14T11:53:56.947
> 
> 标签：c#, postal-code

I would like to write a text in a log file every time someone calls a function into my assembly. I know that I should use postsharp but it's too expensive for my purpose.

If there are any other possibilities, please inform me of those.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T12:27:19.440

前段时间我出于同样的目的使用了 Spring.Net。不知道该项目现在的状态如何，但当时它是免费的。您将使用面向方面的编程，它应该类似于 Postsharp 的工作方式......

本文向您展示了如何使用 Sprint.net 实现您所需要的：http: [//www.codeproject.com/Articles/26726/AOP-Using-Spring-NET-Part-1](http://www.codeproject.com/Articles/26726/AOP-Using-Spring-NET-Part-1)

# ios - iOS texture allocation shows twice as much memory usage in profiler

> ID：14317949
> 
> 赞同：0
> 
> 时间：2013-01-14T11:53:59.463
> 
> 标签：ios, memory, cocos2d-iphone, profiling, textures

I have been struggling with this one for whole morning. not being able to test on devices yet, i rely on what profiler shows only to roughly see there are no major issues. One of which I consider as serious is the fact that whenever I create 2D texture either in Cocos2d or in custom code - directly supplying openGL, I have in profiler all my textures are displayed as two allocations.

E.g. when I create a texture 512x512x4 which is roughly 1MB of data, my live bytes usage jumps by 2MB and I can see in list of live objects two heavy blocks of memory 1Mb each - exactly as my texture.

And let me stress that point - this is NOT a raw image file I supplied to the glTexImage2D(), which gets deleted in the destructor and I have checked it many times. Also the problem I observed also in Cocos2d example projects - simple all the memory for textures is doubled.

below two screeshots - one from cocos2d app , shows two textures 600KB each displayed in the profiler as FOUR allocated objects : ![enter image description here](../Images/4aae1039ac9bf0d8160c43cbee7bdba4.png)

and custom allocated and created texture directly with openGL and image supplied via libpng - displayed as live two objects 1Mb each. ![enter image description here](../Images/2e299a490af3c47a38ea607e036c2d1e.png)

I would appreciate if anyone could enlighten me on this one. Perhaps in the device situation looks different.

Regards, s.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T20:32:24.443

这是 cocos2d 中的正常行为。它首先将图像文件加载为 UIImage，然后将其转换为 CCTexture2D。这意味着在大多数情况下，内存使用量是您预期的两倍。下一帧应该释放额外的内存。

[您可以在我的内存优化博客文章](http://www.learn-cocos2d.com/2012/11/optimize-memory-usage-bundle-size-cocos2d-app/)中找到有关此行为的更多信息。您还将了解到，使用 .pvr.ccz 不仅会显着减少内存开销，而且它们的加载速度也会比 PNG 快得多（更不用说在 cocos2d 中加载速度非常慢的 JPG）。

# django - custom django management command not working when deployed as egg

> ID：14317950
> 
> 赞同：0
> 
> 时间：2013-01-14T11:54:00.263
> 
> 标签：django, deployment, path, egg

I've made a little django **app**, only one management command, which is packaged into an egg.

If I unzip the egg into a blank django **project**, add it to installed_apps, the management command works.

However, when it is `easy_install`ed onto a server and although it's in the path (I can import the `Command` class on the command line), and in `INSTALLED_APPS`, the management command isn't registered. It's installed from the egg into the site-packages.

Help!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:00:12.937

Django 专门查找子目录。请参阅`find_commands`中的功能[`core/management/init.py`](https://github.com/django/django/blob/master/django/core/management/__init__.py#L22)。所以它显然不适用于鸡蛋。简单的解决方法是不要将您的应用程序作为鸡蛋分发。无论如何，现在[只有很少的充分理由](https://stackoverflow.com/questions/4170477/why-would-one-use-an-egg-over-an-sdist)这样做。

你可以告诉安装程序在 setup.py 文件中解压鸡蛋。有关详细信息，请阅读[此 SO 答案](https://stackoverflow.com/a/2604694/102852)。在这种情况下，管理命令应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T13:45:32.147

即使你把它打包成一个例子，你仍然需要它在你的`installed_apps`for django 中来获取它。

# c# - 用户如何选择他想在 gridview 中查看的数据

> ID：14317958
> 
> 赞同：0
> 
> 时间：2013-01-14T11:54:47.400
> 
> 标签：c#, asp.net

我有一个包含 100 行的网格视图，我希望用户可以选择他想要查看的网格中的行数（表示该标题的标题和数据）。你有什么想法。例子：

```
SL     NO       NAME     DATE       END DATE           SUB TOTAL             TOTAL 
==================================================================================

================================================================================== 
```

用户可以选择他只想在 gridview 中查看 SL NAME SUB TOTAL TOTAL，之后网格将显示这样的数据

```
SL            NAME                   SUB TOTAL                          TOTAL
==============================================================================

============================================================================== 
```

我像这样绑定

```
<data:ActiveOrdersDataSource ID="ActiveOrdersDataSourcebyCompany" runat="server" SelectMethod="GetPaged" EnablePaging="True" EnableSorting="True" EnableDeepLoad="True">
    <DeepLoadProperties Method="IncludeChildren" Recursive="False">
        <Types>
            <data:ActiveOrdersProperty Name="Clients" />
            <data:ActiveOrdersProperty Name="Companies" />
            <data:ActiveOrdersProperty Name="Drivers" />
            <data:ActiveOrdersProperty Name="SalesPeople" />
            <data:ActiveOrdersProperty Name="ServiceTypes" />
            <data:ActiveOrdersProperty Name="VehicleTypes" />
            <data:ActiveOrdersProperty Name="Zones" />
        </Types>
    </DeepLoadProperties>
    <Parameters>
        <asp:SessionParameter Name="CompanyId" SessionField="CompanyId" Type="String" />
        <data:SqlParameter Name="WhereClause" UseParameterizedFilters ="false">
            <Filters>
                <data:ActiveOrdersFilter Column="CompanyId" ControlID="ddlCompany" PropertyName="SelectedValue" ComparisionType="Equals" />
                <data:ActiveOrdersFilter Column="AccountNumber" ControlID="ddlAccount" PropertyName="SelectedValue" ComparisionType="Equals" />
                <data:ActiveOrdersFilter Column="ServiceTypeId" ControlID="ddlService" PropertyName="SelectedValue" ComparisionType="Equals" />
                <data:ActiveOrdersFilter Column="VehicleTypeId" ControlID="ddlVehicle" PropertyName="SelectedValue" ComparisionType="Equals" />
                <data:ActiveOrdersFilter Column="StatusId" ControlID="ddlStatus" PropertyName="SelectedValue" ComparisionType="Equals" />
                <data:ActiveOrdersFilter Column="OrderNo" ControlID="txtOrderNumber" ComparisionType="Contains" />
            </Filters>
        </data:SqlParameter> 
    </Parameters>
</data:ActiveOrdersDataSource> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T12:44:16.070

`Visibility`您可以通过在每列上设置属性来根据用户偏好更改列的可见性。如果您使用的是 ObjectDataSource，则可以通过设置来控制行数`PageSize`。

# javascript - 在状态 MouseOver 时获取元素的 ID

> ID：14317960
> 
> 赞同：0
> 
> 时间：2013-01-14T11:55:05.207
> 
> 标签：javascript, jquery

我有一个带有 event 的元素`onMouseOver`。触发事件时，我需要获取元素的 ID。

这是我的HTML结构：

```
'<div id="see_all" class="btn_backtostart_catview">' + 
    '<div class="btn_backtostart_slice_l_catview"></div>' +
    '<div class="btn_backtostart_slice_c_catview" onclick="Main.magicCtrVerTodas()" onMouseOver="Main.magicCtrVerTodasMouseOver(this)">Ver todas</div>' +
    '<div class="btn_backtostart_slice_r_catview"></div>' +
'</div>' + 
```

功能

```
magicCtrVerTodasMouseOver: function(obj){        
    console.log('ID for elm in OVER: ' + obj);
}, 
```

结果，我`HTMLDivElement`没有得到 ID 的名称。

知道我做错了什么吗？我也可以使用 jQuery。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T11:58:31.427

变量`obj`指的是`<div>`具有类的元素`"btn_backtostart_slice_c_catview"`。此元素没有 ID 属性。

如果您需要获取`id`父母的财产`<div>`（持有`id="see_all"`），您可以使用：

```
magicCtrVerTodasMouseOver: function(obj){
    console.log('ID for elm in OVER: ' + obj.parentNode.id);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T11:56:44.503

这应该这样做：

```
magicCtrVerTodasMouseOver: function(obj){
    console.log('ID for elm in OVER: ' + obj.id);
}, 
```

但是，请确保该元素具有`id`.

# jquery - jQuery - 按元素 id 设置选择索引

> ID：14317962
> 
> 赞同：9
> 
> 时间：2013-01-14T11:55:14.287
> 
> 标签：jquery, select, jquery-selectors

```
<select id="mySelect">
  <option id="sel01" value="some value">some value</option>
  <option id="sel02" value="some other value">some other value</option>
  <option id="sel03" value="maybe me">maybe me</option>
  <option id="sel04" value="and another one">and another one</option>
</select> 
```

我想选择一个使用 jQuery 的选项，但不是按值：

```
$("#mySelect").val(1); 
```

但通过元素 id。

感谢您的回答。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-14T11:59:49.220

你可以使用`prop`方法。

```
var id = 'sel02';

$('#mySelect option').filter(function(){
   return this.id === id
}).prop('selected', true); 
```

或者：

```
$('#' + id).prop('selected', true); 
```

或者如果你想根据它的索引选择一个选项，你可以使用`eq`方法：

```
$('#mySelect option').eq(1).prop('selected', true); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T12:02:23.937

```
 var id= "sel01";

    $('#selectid option').each(function(){
        if($(this).attr('id') == id){
           $(this).attr('selected',true);
         }
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T11:59:54.460

您可以使用 ID 检索元素值并使用 jQuery 的值`val()`。

```
var elementId = 'sel01';
$("#mySelect").val($('#' + elementId).val()); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T12:01:18.297

如果要选择选项：

```
$('#mySelect option#sel02').prop('selected',true); 
```

如果要获取所选选项 id 的值：

```
$('#mySelect option#sel02').val(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-14T12:09:46.413

试试这个语法，

```
$('select option:selected').attr('id'); 
```

选中[此处](http://jsbin.com/olehod/1/edit)，它将根据文本值选择选项。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-14T12:03:38.810

像这样。只需更改 eq(0) 中的数字

```
$("#mySelect").val($("#mySelect").children().eq(0).val()); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-10-13T22:16:27.990

我不知道上下文，但是当我需要从 json 获取数据并选择特定组合框的选项时，这对我有用：

```
$("#mySelect option[id='" + someVariable + "']").attr('selected', 'selected'); 
```

# javascript - SAHI 捕获断言失败的屏幕截图

> ID：14317964
> 
> 赞同：1
> 
> 时间：2013-01-14T11:55:21.027
> 
> 标签：javascript, sahi

在我们的网站上运行 SAHI 自动化测试。正在考虑升级到 SAHI pro，以便我们可以使用该`_takeSnapShot`方法。

`assert`我们的脚本中散布着数千个s。我们想要的是某种全局方式，这样如果断言失败，系统将触发`_takeSnapShot`然后继续。

我们尝试了 JavaScript `try{} catch{}`，但 SAHI 实际上并没有抛出异常，它只是记录失败并继续。

我们还尝试附加`_setRecovery`此处记录的函数[http://sahi.co.in/w/_setrecovery-recovering-from-a-scenario-without-try-catch](http://sahi.co.in/w/_setrecovery-recovering-from-a-scenario-without-try-catch)。但这不火！

有人知道这样做的好方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T12:10:35.503

从[http://sahi.co.in/w/sahi-call-back-functions获得了解决方案](http://sahi.co.in/w/sahi-call-back-functions)

```
function onScriptError($e){
    _focusWindow();
    _takeScreenShot();  
} 
onScriptFailure = onScriptError;
_navigateTo("http://sahi.co.in/demo/training/"); 
_setValue(_textbox("user"), "test"); 
_setValue(_password("password"), "secret"); 
_click(_submit("Login")); 
```

# php - 多次登录并将信息放在一个帐户而不是多个帐户上

> ID：14317967
> 
> 赞同：-1
> 
> 时间：2013-01-14T11:55:33.117
> 
> 标签：php

我想知道是否有人可以帮助我，我目前正在做一个登录，将用户引导到页面，以便他们可以玩游戏。但是因为在发送信息时数据库上有多个帐户，它会为数据库上的所有帐户而不是一个用户显示它，任何关于如何让它将信息提交给其中一个用户的想法，如果这样做对你有意义？？

这是我的登录部分，希望对您有所帮助：

```
<?php

include('connecttest.php');

session_start(); //we're using sessions so this is required!

if($_SESSION['loggedin'] == TRUE) {
header('location: http://html5b.mytestbox.co.uk/sessions/VolumeGame/VolumeGame1.html'); //members area
}else{

if($_POST['submitLogin']) { 
//verify login from user input

$username = mysql_real_escape_string($_POST['username']);
$password = md5(mysql_real_escape_string($_POST['password']));

$select_user = mysql_query("SELECT COUNT(id) AS amount FROM users WHERE username = '$username' AND password = '$password' ");
$user = mysql_fetch_assoc($select_user);
$amount_found = (int)$user['amount']; //amount of users found by the query

if($amount_found > 0) {
$login_attempt = 1; //successful login attempt
$_SESSION['loggedin'] = TRUE;
$_SESSION['username'] = $username;
header('location: http://html5b.mytestbox.co.uk/sessions/VolumeGame/VolumeGame1.html'); //members area
}else{
$login_attempt = 0; //invalid login attempt
}

}

if( ($_POST['submitLogin'] AND isset($login_attempt) AND $login_attempt = 0) OR !$_POST['submitLogin'] ) {

//show login form

if($_POST['submitLogin']) { //attempted to login? (-> invalid login)
echo "<p>Invalid login. </p>";
}

?>

<form method="POST" action="login.php">
<b>Username:</b> <br /> <input type="text" name="username"> <p>
<b>Password:</b> <br /> <input type="password" name="password"> <p>
<input type="submit" name="submitLogin" value="Login!">
</form>

<?php

}

}

?> 
```

这是将信息发送到数据库的代码：

```
 <?php
    include ("connecttest.php");

    session_start();

    $username = ($_POST['username']);

    $_SESSION['username'] = $username;

    $q1btn=$_POST['q1btnPressed'];
    $q2btn=$_POST['q2btnPressed'];
    $q3btn=$_POST['q3btnPressed'];
    $q4btn=$_POST['q4btnPressed'];

    if ($_POST['q1btnPressed'])
    {
        $sql=" UPDATE users
          SET q1answer = '$q1btn' 
          WHERE username = '$username'" ;
    }
    if ($_POST['q2btnPressed'])
    {
        $sql=" UPDATE users ;
          SET q2answer = '$q2btn'" ;
    }
    if ($_POST['q3btnPressed'])
    {
        $sql=" UPDATE users ;
          SET q3answer = '$q3btn'" ;
    }

          mysql_query($sql)or die (mysql_error);

    mysql_close();  
    ?>

<?php
include "connecttest.php";

$result = mysql_query("SELECT *  FROM users");

$rows=mysql_fetch_row($result);
    echo json_encode($rows);

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T11:57:55.260

向您的查询添加一个`WHERE`包含唯一用户 ID 的子句。

# ant - Ant 识别当前行上方的 a 行

> ID：14317968
> 
> 赞同：0
> 
> 时间：2013-01-14T11:55:42.620
> 
> 标签：ant, build, ant-contrib

所以我可以检索文件中的某一行。现在我想检查这一行正上方的行中的值。我该如何在蚂蚁中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T21:07:13.343

以下示例使用[Groovy ANT 任务](http://groovy.codehaus.org/The+groovy+Ant+Task)打印每个 Java 文件的第 3 行和第 4 行。

```
<project name="demo" default="run">

    <taskdef name="groovy" classname="org.codehaus.groovy.ant.Groovy">
        <classpath>
            <pathelement location="lib/groovy-all-2.1.0-rc-1.jar"/>
        </classpath>
    </taskdef>

    <target name="run">
        <fileset id="javafiles" dir="src" includes="**/*.java"/>

        <groovy>
            ant.project.references.javafiles.each {
                def lines = new File(it.toString()).readLines()

                ant.echo lines[2]
                ant.echo lines[3]
            }
        </groovy>
    </target>

</project> 
```

# svn - How to clear pending VCS changes in TeamCity 7+?

> ID：14317969
> 
> 赞同：21
> 
> 时间：2013-01-14T11:55:50.887
> 
> 标签：svn, teamcity

We have a project configured in TeamCity 7.+ to watch a project in Subversion. Each check-in will trigger a build. However, in this case, we want to skip/clear the backlog.

To be very clear: I do not wish to "undo" these Subversion commits. I want to keep the svn commits, but skip the TeamCity builds.

I tried disconnecting the Build Trigger (disable, then delete), but no luck. The TeamCity queue remains.

How to do it? My googling skills are failing me. =(

![enter image description here](../Images/6affe5106a3cd3c2d4272f38da52895e.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T19:53:58.190

`Checkout Rules`您可以通过编辑您的`VCS Root`in来排除某些文件夹/文件`Version Control Settings`。但是，这将无限期地排除这些文件夹/文件。

听起来您只想排除这 4 个特定更改？这似乎违反直觉，因为 Teamcity 和构建通常是按原样构建解决方案/项目。

如果您需要不将这四个更改合并到构建中，则需要回滚它们。如果它们在不同的构建中使用，您需要将它们从该构建中排除，并在需要这些更改的地方创建一个新构建。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-07-04T01:52:05.200

根据[这个 jetbrains support post](https://teamcity-support.jetbrains.com/hc/en-us/community/posts/206621709-Reset-pending-changes)，您可以分离 VCS Root 并重新连接它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T12:57:40.290

如果您只是想从窗口中删除这 4 项特定更改的待处理更改提醒，然后照常继续（这 4 项更改将默默地合并到您的下一个版本中），那么我能想到的唯一潜在解决方案就是更改您的 VCS根指向其他地方，然后指向回来。这当然可能行不通。如果需要，添加指向同一位置的新 VCS 根可以代替上述方法。

如果发生了一些不同的事情，例如您不希望这些更改触发 4 个构建，它们不会，它们都将继续进行下一个构建。或者，如果您在进行一些进一步更改之前不想要任何构建，则一旦从队列中删除构建，这些更改将不会触发进一步构建（除非此行为最近已更改）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-14T23:17:45.353

我认为您可以通过更新 Triggers > VCS trigger settings > "Per-checkin Triggering" 部分来做到这一点

[![在此处输入图像描述](../Images/2d564bc855895dfda4d9bdc8855d36a7.png)](https://i.stack.imgur.com/dl6sJ.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-30T14:30:09.157

我发现的最好方法是禁用所有构建步骤并运行。

![禁用构建步骤](../Images/aec5713886ebbf5132e729e422249ab7.png)

# xml - XML 参考最佳实践

> ID：14317973
> 
> 赞同：0
> 
> 时间：2013-01-14T11:55:57.823
> 
> 标签：xml, reference, nodes, identifier

我正在编写一个 XML 表，在其中管理文档类型列表和文档集合列表。它目前看起来像这样：

```
<collection>
    <types>
        <type id="T001">CD</type>
        <type id="T002">Drawing</type>
        <type id="T003">Book</type>
        <type id="T004">Photo</type>
        <type id="T005">Letter</type>
    </types>
    <languages>
        <lang id="EN">English</taal>
        <lang id="FR">French</taal>
    </languages>
    <documents>
        <document>
            <type>T001</type>
            <lang>EN</lang>
        </document>
        <document>
            <type>T003</type>
            <lang>FR</lang>
        </document>
        <document>
            <type>T001</type>
            <lang>EN</lang>
        </document>
        <document>
            <type>T002</type>
            <lang>EN</lang>
        </document>
    <documents>
</collection> 
```

我管理 XML 表中的类型和语言列表，而不是使用 DTD 实体，因此我可以使用 XSL/Xpath 查询那些。

如您所见， and 元素用于两种不同的情况：在第一个列表（类型/语言）中，我将它们用作标识符，然后将它们用作参考元素，但具有相同的节点名称。我认为标识符和引用元素使用相同的节点名称不是很整洁。另一种更简洁的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T12:07:03.013

这只是一个约定俗成的问题。就个人而言，我会将其更改为：

```
<documents>
    <document>
        <typeRef>T001</type>
        <langRef>EN</lang>
        ... 
```

或者：

```
<documents>
    <document type="T001" lang="EN">
    ... 
```

# python - Django删除前导零

> ID：14317974
> 
> 赞同：1
> 
> 时间：2013-01-14T11:55:58.417
> 
> 标签：python, django

在 Django 模板中，如何从我显示的所有手机号码中删除第一个零。在 Python 中，我尝试过这个但没有成功....

```
{% for object in data %}

   {{ object.mobile.lstrip('0') }}

{% endfor %}

views.py

def sms(request, incentive):
    objectQuerySet = Recipient.objects.filter(incentiveid=incentive)
    context = {'data':objectQuerySet}

    return render_to_response('smssend.html', context, context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T12:15:45.827

有很多方法可以做到这一点。

*   编写自定义模板过滤器
*   过滤用户输入并存储已去​​除前导零的电话
*   创建一个自定义对象@property，返回带有零的移动设备（这个有点脏）
*   在渲染模板之前进行清理

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T12:26:16.083

我假设您将需要在应用程序的其他位置使用类似的逻辑，那么为什么不向模型添加一个方法来清理数据呢？下面的代码假定您的移动字段是一个字符串。

```
class Recipient(models.Model):
    ...
    def mobile_no_zero(self):
        return self.mobile[1:] if self.mobile.startswith('0') else self.mobile 
```

然后您可以从模板中调用该方法：

```
{% for object in data %}

   {{ object.mobile_no_zero }}

{% endfor %} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T12:03:14.150

您应该以正确的格式将数据传递给您的模板。Django 模板不是像 PHP 那样“穿插 HTML 的 Python”。

例如，当您第一次将您`data`的视图传递给您时，您应该确保它是一个已去除零的可迭代对象。

`lstrip`Django 模板迷你语言中没有。

编辑：如果您知道第一个数字将始终为 0，您也可以这样做：

```
{{ object|slice:"1:" }} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T12:31:17.097

有一种方法确实有效（但比任何东西都更复杂，并删除 0 或更多`0`s） -**并且只有当数字可以转换为浮点数开始时（即没有空格）**

```
In [23]: t = Template('{{ value|floatformat:0 }}')

In [24]: t.render(Context({'value': '00123'}))
Out[24]: u'123' 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-14T12:10:25.863

您可以使用 cut （它将从 number 中删除所有零）

或者你可以使用

phone2numeric Imo 是更好的选择

# ruby-on-rails - 如何将一个基本的数学公式翻译成在 Rails 应用程序中使用 - 放在哪里？

> ID：14317975
> 
> 赞同：1
> 
> 时间：2013-01-14T11:55:59.187
> 
> 标签：ruby-on-rails

感谢任何人提前抽出一点时间，并道歉，因为我确信这是一个令人沮丧的基本问题。

我将如何应用如下公式：

```
total_score = start_score + sum(per_game_scores)/no_of_games - (time/some_value); 
```

...为每次迭代修改 Rails 应用程序中的值`per_game_score`？

比如说，这是一个梦幻足球场景。我希望能够在每场比赛后与玩家一起提交一份表格，`per_game_score`并相应地`total_score`更新统计数据......

作为 Rails 的新手，我知道所有这个过程的基础知识——除了在哪里存储公式、如何在提交表单时访问它以及如何确保它被执行以保持`total_score`价值最新。

再次感谢您的帮助，我在短时间内就对这里的社区印象深刻！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T13:27:08.873

那种东西作为一种方法在播放器上可能很有效。我假设你有一个`Player`模型，并且它`has_many :games`

```
class Player < ActiveRecord::Base
  has_many :games

  before_save :update_total_score

  def update_total_score
    self.total_score = start_score + games.average(:score) - time/some_value
  end
end 
```

然后你可以用`before_save`回调连接它：

```
class Game < ActiveRecord::Base
  belongs_to :player

  before_save :update_player_total_score

  private

  def update_player_total_score
    player.update_total_score
  end
end 
```

# php - 比较日期和时间，然后允许访问网站 (PHP4)

> ID：14317977
> 
> 赞同：0
> 
> 时间：2013-01-14T11:56:13.970
> 
> 标签：php, mysql

可以做一些帮助。所以我有一个只能在两个日期之间访问的网站。在我的数据库中，我有以下内容

```
Name       Type            Data   
start_date VARCHAR(255)  - 11/01/2012
start_time VARCHAR(255)  - 14:32
end_date   VARCHAR(255)  - 13/01/2012
end_time   VARCHAR(255)  - 17:20 
```

我只需要只允许在上述日期访问用户。这是我正在使用的代码，但它似乎不起作用我做错了什么吗？我正在运行 PHP4

```
$current_date = strtotime(date("Y-m-d H:i:s"));

//db query and while loop here

$start_date = explode("/", $rows['start_date']);
$start_time = $rows['start_time'];
$start_date = strtotime($start_date[2] . "-" . $start_date[1] . "-" . $start_date[0] . " " . $start_time); 

$end_date = explode("/", $rows['end_date']);
$end_time = $rows['end_time'];
$end_date = strtotime($end_date[2] . "-" . $end_date[1] . "-" . $end_date[0] . " " .  $end_time);

if(($current_date <= $start_date) || (($current_date >= $end_date)))
{
    echo "Site can only be access between" . $start_date . " and " . $end_date;
}
else 
{
    // redirect to the site...
} 
```

提前致谢 ：）

# jquery - 如何在 Ruby on rails 中嵌入 jquery 幻灯片

> ID：14317979
> 
> 赞同：-4
> 
> 时间：2013-01-14T11:56:20.483
> 
> 标签：jquery, ruby-on-rails, ruby

我们正在尝试为我们的网站[http://www.mealnut.com](http://www.mealnut.com)创建幻灯片。类似于[http://www.airbnb.com](http://www.airbnb.com)上的内容。有没有相同的教程！我们是这方面的新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T12:12:17.630

这样的视图逻辑应该是 JS 工作的。[在http://themeflash.com/30-powerful-jquery-slideshow-sliders-plugins-and-tutorials/](http://themeflash.com/30-powerful-jquery-slideshow-sliders-plugins-and-tutorials/)尝试一个。将其中一个嵌入到您的 Rails 中，或者在您的 application.js 上引用一些代码。

这些链接还将详细说明情况：

[http://guides.rubyonrails.org/asset_pipeline.html](http://guides.rubyonrails.org/asset_pipeline.html)

[http://railscasts.com/episodes/324-passing-data-to-javascript](http://railscasts.com/episodes/324-passing-data-to-javascript)

# ruby-on-rails-3.2 - WickedPDF 标头渲染

> ID：14317980
> 
> 赞同：5
> 
> 时间：2013-01-14T11:56:20.997
> 
> 标签：ruby-on-rails-3.2, wicked-pdf

我使用 mac osx 并尝试通过 wickedpdf 将我的 html 文件转换为 pdf 文件。我想在我的 pdf 文件的每一页都放一个字符串，但我有一个关于没有呈现的标题的问题。

我的 wickedpdf 方法是，

```
format.pdf do
        render :pdf => '#{@examination.name}.pdf',
               :disposition => 'inline',
               :layout => 'examination_session_pdf.html.erb',
               :no_background => true,
               :header =>{:html =>{:template=>'shared/pdf/header.pdf.erb'}}
      end 
```

并且头文件只包含“hello”字符串或什么都不包含。然而，每次我看到这个错误，

```
can't convert nil into String 
```

问题行是“:header =>{:html =>{:template=>'shared/pdf/header.pdf.erb'”。此外，我看不到任何有关在控制台上呈现标题页的日志。

我该如何解决？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T21:00:12.573

我今天早些时候遇到了完全相同的问题！

这就是我为让它工作而做的事情

```
    format.pdf 做
        渲染 :pdf => "#{@inv.invno}.pdf",
               :template => "inv/show.pdf",
               ：布局=>'pdf'，
               :header => { :content => render_to_string({:template => 'inv/header.pdf.erb'})},
               :footer => { :content => render_to_string({:template => 'inv/footer.pdf.erb'})},
               :margin => { :top => 38, :bottom => 35}
        结尾

```

你会看到我实际上使用了 render_to_string，然后通过 :content 将结果粘贴到页眉或页脚中。这对我来说非常有效。

您可以忽略 :margin 部分，因为我只是使用它来很好地分隔内容，因为页眉和页脚都包含图形。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-02-28T15:02:26.663

[我的解决方案已在此问题](https://github.com/wkhtmltopdf/wkhtmltopdf/issues/2042)上注明。

确保你有

```
<!DOCTYPE html> 
```

在头模板文件的顶部。

# ruby - Datamapper：如何计算 has_many 对象的总分

> ID：14317981
> 
> 赞同：0
> 
> 时间：2013-01-14T11:56:22.527
> 
> 标签：ruby, database, datamapper, has-many

我刚开始学习一些数据库基础知识。我正在使用**Ruby**和**datamapper gem**

我有两个简单的对象：

```
class Quote
  include DataMapper::Resource
  property :id, Serial
  property :saying, String, :required => true
  property :score, Integer, :default => 5
  belongs_to :user
end 
```

和

```
class User
  include DataMapper::Resource
  property :id, Serial
  has n, :quotes
end 
```

不，我想获得用户的**总分**。总分是用户所有关联报价的得分之和。

我尝试了类似的东西

```
@totalscore = @user.quotes.inject(0) {|count, q| count + q.score} 
```

但我想这不是我应该使用数据库的方式，对吧？

任何帮助表示赞赏！

最好的，

托比

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T12:07:12.880

我没有运行代码，但是通过查看[文档](http://datamapper.org/docs/find.html)，我认为这样的事情应该可以工作：

```
@totalscore = @user.quotes.sum :score 
```

# r - 尽管有两组使用 ggplot2，但散点图具有单条回归线

> ID：14317982
> 
> 赞同：7
> 
> 时间：2013-01-14T11:56:27.990
> 
> 标签：r, ggplot2, regression, scatter-plot

我想用 ggplot2 生成一个散点图，它包含一条通过所有数据点的回归线（无论它们来自哪个组），但同时通过分组变量改变标记的形状。下面的代码生成了组标记，但提供了两条回归线，每组一条。

```
#model=lm(df, ParamY~ParamX)
p1<-ggplot(df,aes(x=ParamX,y=ParamY,shape=group)) + geom_point() + stat_smooth(method=lm) 
```

我该如何编程？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-14T12:10:14.810

你不应该重做你的全部`aes`并`geom_point`添加另一层，只需将形状移动`aes`到`geom_point`调用中：

```
df <- data.frame(x=1:10,y=1:100+5,grouping = c(rep("a",10),rep("b",10)))
ggplot(df,aes(x=x,y=y)) + 
geom_point(aes(shape=grouping)) + 
stat_smooth(method=lm) 
```

![在此处输入图像描述](../Images/15ca473c0343423ad44eb8a44327b451.png)

编辑：

为了帮助您发表评论：

因为`annotate`无论如何，对我来说，最终可能会在每个方面都有相同的标签。我喜欢制作一个迷你`data.frame`版，它有我的刻面变量和刻面级别，另一列代表我要使用的标签。在这种情况下，标签数据框被调用`dfalbs`。

然后使用它来标记数据框以单独标记方面，例如

```
df <- data.frame(x=1:10,y=1:10,grouping =   
                  c(rep("a",5),rep("b",5)),faceting=c(rep(c("oneR2","twoR2"),5)))

dflabs <- data.frame(faceting=c("oneR2","twoR2"),posx=c(7.5,7.5),posy=c(2.5,2.5))

ggplot(df,aes(x=x,y=y,group=faceting)) + 
       geom_point(aes(shape=grouping),size=5) + 
       stat_smooth(method=lm) +
       facet_wrap( ~ faceting) +
       geom_text(data=dflabs,aes(x=posx,y=posy,label=faceting)) 
```

![在此处输入图像描述](../Images/69851d82fb11953e96c71db00fc4b8e3.png)

# c# - 使用 Unity 容器进行 MVC 单元测试

> ID：14317984
> 
> 赞同：3
> 
> 时间：2013-01-14T11:56:28.590
> 
> 标签：c#, asp.net-mvc, unit-testing, unity-container

我只是有一个简单的问题。我试图在我的 asp.net MVC 项目中使用 Unity。我在使用带有 EF 上下文的工作单元模式时遇到了一个问题。

假设我在构造函数中注入了 uow，但控制器中有 4 或 5 个操作需要`UnitOfWork`在 using 语句中使用。这行不通！因为 Id 必须
`new UnitOfWork()` 在每个操作方法中执行一次。

我应该`UnitOfWork`在每个动作方法中注入一个吗？还是只进入构造函数？或者我什至应该注射这个！我面临的问题是我希望能够使用 Mock 数据对我的控制器进行单元测试，并且我只能在注入`UnitOfWork`或`DBContext`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T12:58:43.463

而是注入[工厂。](http://en.wikipedia.org/wiki/Factory_method_pattern)这样您仍然可以实现关注点分离和松耦合，但您不会遇到使用语句的任何问题：

```
private IUnitOfWorkFactory factory;

public MyController(IUnitOfWorkFactory factory)
{
    this.factory = factory;
}

public ActionResult MyAction()
{
    using (var uow = factory.CreateUnitOfWork())
    {
        // ...
    }
} 
```

**编辑**：

这种方法的自然优势在于它的可配置性——你可以注册你喜欢的任何工厂来服务不同的控制器，并将其连接到组合根：

```
// Note: this isn't unity syntax, but I hope my point is clear
container.Register<ISessionFactory, ReusableSessionFactory>("Reusable");
container.Register<ISessionFactory, FreshSessionFactory>("Fresh");
container.Register<IController, LoginController>().With("Fresh");
container.Register<IController, HomeController>().With("Reusable"); 
```

现在，

*   `LoginController`将使用在每个请求下提供新会话的工厂
*   `HomeController`另一方面，将在其整个生命周期内重用同一个会话

值得注意的是，从控制器的角度来看，哪个工厂为会话提供服务是无关紧要的，因为它只是一个实现细节。这就是为什么我们将会话工厂依赖隐藏在抽象之后（本例中的接口），并在应用程序的根目录执行所有对象到依赖的绑定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T12:42:36.377

如果我理解正确，您只是希望能够使用起订量之类的东西来测试 UOW？

在这种情况下，为了获得良好的设计原则和适当的关注点分离，您应该为每个存储库类使用的数据库创建一个基本上下文。

然后，您应该为每个域模型实体创建一个存储库接口。然后您可以在单独的存储库中实现接口（这样您就可以实现 POCO 模型）

最后，您可以在域对象和操作方法之间创建一个服务层，或者只在操作方法中使用所需的存储库接口。

我这样回答是因为它取决于您的应用程序基础架构。如果您没有服务层，那么最佳做法是执行以下操作：

```
 public class AccountController : Controller
    {
        private readonly IAccountRepository _accountrepository;

        public AccountController(IAccountRepository repository)
        {
            _accountrepository = repository;
        }
} 
```

我希望这有帮助。

# python - 使用漂亮的汤抓取数据的问题

> ID：14317991
> 
> 赞同：1
> 
> 时间：2013-01-14T11:56:47.457
> 
> 标签：python, html, python-2.7, beautifulsoup

我正在使用以下代码从网站上抓取数据。

```
# -*- coding: cp1252 -*-
import urllib2
import sys
from bs4 import BeautifulSoup

page = urllib2.urlopen('http://www.att.com/shop/wireless/plans-new.html#fbid=U-XD_DHOGEp').read()
soup = BeautifulSoup(page)
plans = soup.findAll('div', {"class": "planTitle"})
for plan in plans:
    planname = u' '.join(plan.stripped_strings)
    plantypes = soup.findAll('div', {"class":"top"})
    prices = soup.findAll('div', {"class":"bottom"})
    for plantype, price in zip(plantypes, prices):
        plantype1 = u' '.join(plantype.stripped_strings)
        price1 = u' '.join(price.stripped_strings)
        print planname, plantype1, price1 
```

问题：如果您浏览此代码中提到的网页，这些是 4-5 种计划，每个计划有 3 个语音选项和一些 2-3 个数据选项。我想以这样的方式抓取数据，以便对于每个计划，我可以获得其各自的语音选项，然后是这些选项的月度价格。

我现在运行的代码返回计划名称+语音选项的所有可能组合。对于每个计划名称，我都会获得大约 20-30 个条目，因为即使对于错误的计划名称 + 语音选项组合，它也会创建一个条目。例如。个人计划 - 550 分钟 - 59.99 美元，在这个组合中，500 分钟和 59.99 是家庭计划的一部分。

我希望循环运行，以便只提取正确的计划 + 语音选项组合。

网页片段：对于每个计划，网页上都有一个框，其中包含语音选项和与这些选项相对应的价格，我希望为每个框运行循环，但语音选项的元素 + 类组合及其价格不是唯一的。这就是为什么计划名称也从其他 boxex 中获取价值的原因。

```
<div class="innerContainer"> 

    <div class="planTitle"> 
        <h2><a href="http://www.att.com/shop/wireless/plans/individualplans.html" data-cqpath="/content/att/shop/en/wireless/plans-new/jcr:content/maincontent/authortext;2013010">AT&amp;T Individual Plans</a></h2> 
    </div> 
    <div class="planSubTitle"> 
        <img src="/shopcms/media/att/2012/shop/wireless/promotions/Plans-CM_page/tiny-clock.jpg" alt=""> 
        <p>Voice plan options:</p> 
    </div> 
    <!-- Begin three white boxes --> 
    <!-- Note, extra boxes can be added to the row with the following method  --> 
    <!-- 1\. Add more div containers inside .whiteBox  --> 
    <!-- 2\. Modify class names to boxes_one, boxes_two, boxes_three etc... (max six) --> 
    <div class="whiteBox"> 
        <div class="boxes_three"> 
            <a class="lnk-help tooltips fullBoxLink" href="#smartphone_individual_voice_450" onclick="window.location.href = 'http://www.att.com/shop/wireless/plans/voice/sku3830290.html?source=IC95ATPLP00PSP00L&amp;wtExtndSource=spindvoice450';return false;" aria-describedby="smartphone_individual_voice_450" data-cqpath="/content/att/shop/en/wireless/plans-new/jcr:content/maincontent/authortext;2013010" title=""></a> 
            <span id="smartphone_individual_voice_450" class="tips" role="tooltip">$0.45/min. for additional minutes</span> 
            <div class="top"> 
                <p class="stat">450</p> 
                <p class="statText">Minutes</p> 
            </div> 
            <div class="bottom"> 
                <p>$39.99/mo.</p> 
            </div> 
        </div> 
        <div class="boxes_three"> 
            <a class="lnk-help tooltips fullBoxLink" href="#smartphone_individual_voice_900" onclick="window.location.href = 'http://www.att.com/shop/wireless/plans/voice/sku3830292.html?source=IC95ATPLP00PSP00L&amp;wtExtndSource=spindvoice900';return false;" aria-describedby="smartphone_individual_voice_900" data-cqpath="/content/att/shop/en/wireless/plans-new/jcr:content/maincontent/authortext;2013010" title=""></a> 
            <span id="smartphone_individual_voice_900" class="tips" role="tooltip">$0.40/min. for additional minutes</span> 
            <div class="top"> 
                <p class="stat">900</p> 
                <p class="statText">Minutes</p> 
            </div> 
            <div class="bottom"> 
                <p>$59.99/mo.</p> 
            </div> 
        </div> 
        <div class="boxes_three borderNone"> 
            <a class="fullBoxLink" href="http://www.att.com/shop/wireless/plans/voice/sku3830293.html?source=IC95ATPLP00PSP00L&amp;wtExtndSource=spindvoiceunlim" data-cqpath="/content/att/shop/en/wireless/plans-new/jcr:content/maincontent/authortext;2013010"></a> 
            <div class="top"> 
                <p class="stat">Unlimited</p> 
                <p class="statText">Minutes</p> 
            </div> 
            <div class="bottom"> 
                <p>$69.99/mo.</p> 
            </div> 
        </div> 
    </div> 
    <!-- End three white boxes --> 
    <!-- Begin left gray container --> 
    <div class="containerTwoThirds"> 
        <div class="planSubTitle"> 
            <img src="/shopcms/media/att/2012/shop/wireless/promotions/Plans-CM_page/tiny-globe.jpg" alt=""> 
            <p>Data plan options:</p> 
        </div> 
        <div class="grayTwoThirds"> 
            <div class="grayBox"> 
                <a class="fullBoxLink" href="http://www.att.com/shop/wireless/services/dataplus300mb-smartphone4glte-sku5380269.html?source=IC95ATPLP00PSP00L&amp;wtExtndSource=spinddata300mb" data-cqpath="/content/att/shop/en/wireless/plans-new/jcr:content/maincontent/authortext;2013010"></a> 
                <p class="stat"><strong>300MB</strong></p> 
                <p class="statText">$20.00/mo.</p> 
            </div> 
            <div class="grayBoxBreak"></div> 
            <div class="grayBox"> 
                <a class="fullBoxLink" href="http://www.att.com/shop/wireless/services/datapro3gb-smartphone4glte-sku5470232.html?source=IC95ATPLP00PSP00L&amp;wtExtndSource=spinddata3gb" data-cqpath="/content/att/shop/en/wireless/plans-new/jcr:content/maincontent/authortext;2013010"></a> 
                <p class="stat"><strong>3GB</strong></p> 
                <p class="statText">$30.00/mo.</p> 
            </div> 
            <div class="grayBoxBreak"></div> 
            <div class="grayBox"> 
                <a class="fullBoxLink" href="http://www.att.com/shop/wireless/services/datapro5gb-smartphone4glte-sku5480228.html?source=IC95ATPLP00PSP00L&amp;wtExtndSource=spinddata5gb" data-cqpath="/content/att/shop/en/wireless/plans-new/jcr:content/maincontent/authortext;2013010"></a> 
                <p class="stat"><strong>5GB</strong></p> 
                <p class="statText">$50.00/mo.</p> 
            </div> 
        </div> 
    </div> 
    <!-- End left gray container --> 
    <!-- Begin right gray container --> 
    <div class="containerThird"> 
        <div class="planSubTitle"> 
            <img src="/shopcms/media/att/2012/shop/wireless/promotions/Plans-CM_page/tiny-phone.jpg" alt=""> 
            <p>Messaging plan options: <span class="fix"></span></p> 
        </div> 
        <div class="grayThird"> 
            <div class="grayBox">  
                <a data-cqpath="/content/att/shop/en/wireless/plans-new/jcr:content/maincontent/authortext;2012325" href="http://www.att.com/shop/wireless/services/messagingunlimited-sku1160055.html?source=IC95ATPLP00PSP00L&amp;wtExtndSource=spindmessunlim" class="fullBoxLink"></a>  
                <p class="stat"><strong>ULTD</strong> MSGS</p>  
                <p class="statText">$20.00/mo.</p>  
            </div> 
            <div class="grayBoxBreak"></div> 
            <div class="grayBox last"> 
                <p class="stat"><strong>PAY PER USE</strong></p> 
                <p class="statText">20¢/text <span class="lightGray">|</span> 30¢/pic/video</p> 
            </div> 
        </div> 
    </div> 
    <!-- End right gray container --> 
    <!-- Begin sub footer --> 
    <div class="bottomLinks">  
        <div class="links"> 
            <a href="http://www.att.com/shop/wireless/plans/individualplans.html?taxoPlan=POSTPAID-INDIVIDUAL-CANADA&amp;source=IC95ATPLP00PSP00L&amp;wtExtndSource=spindcanada" data-cqpath="/content/att/shop/en/wireless/plans-new/jcr:content/maincontent/authortext;2013010">Nation with Canada Plans</a> | <a href="http://www.att.com/shop/wireless/plans/voice/sku5740279.html?source=IC95ATPLP00PSP00L&amp;wtExtndSource=spindhomephone" data-cqpath="/content/att/shop/en/wireless/plans-new/jcr:content/maincontent/authortext;2013010">Unlimited Home Phone</a> | <a href="http://www.att.com/shop/wireless/plans/voice/sku3830294.html?source=IC95ATPLP00PSP00L&amp;wtExtndSource=spindsenior" data-cqpath="/content/att/shop/en/wireless/plans-new/jcr:content/maincontent/authortext;2013010">Senior Plans</a> 
        </div> 
        <a class="shop_button" href="http://www.att.com/shop/wireless/devices/smartphones.html?source=IC95ATPLP00PSP00L&amp;wtExtndSource=indshopsp" data-cqpath="/content/att/shop/en/wireless/plans-new/jcr:content/maincontent/authortext;2013010"><img src="/shopcms/media/att/2012/shop/wireless/promotions/Plans-CM_page/buttons/shop_smartphones.png" alt="Shop Smartphones" width="158" height="29"></a> 
    </div> 
    <!-- End sub footer --> 
</div> 
```

请帮助我解决这个问题，因为我是编程新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T16:51:55.470

从头开始重写这件事。没有评论，但它非常自我解释。字典中的 lambda 用于查找以某个字符串开头的属性。我为此引用了这个答案：[https ://stackoverflow.com/a/2830550/541208](https://stackoverflow.com/a/2830550/541208)

我原以为你在使用`findAll`on `soup`，而你应该使用`plan.findAll`它，但它没有任何帮助，所以我只是重写了整个东西。

```
import urllib2
import sys
from bs4 import BeautifulSoup

page = urllib2.urlopen('http://www.att.com/shop/wireless/plans-new.html#fbid=U-XD_DHOGEp').read()
soup = BeautifulSoup(page)

#find the container for all the plans
tabcontent = soup.find('div', {"id": "smartphonePlans", "class": "tabcontent"})
containers = tabcontent.findAll('div', {"class": "innerContainer"})

for plan in containers:
     planTitle = plan.find("div", {"class": "planTitle"})
     if planTitle:
          title = planTitle.find("a").text     
          print title          

     voiceBoxes = plan.find("div", {"class": "whiteBox"})     
     if voiceBoxes:
               box3 = voiceBoxes.findAll("div", {"class": lambda x: x and x.startswith("boxes_")})
               if box3:
                    for box in box3:
                         top = box.findAll("p")
                         minutes = u" ".join([tag.text for tag in top])
                         print "\t", minutes 
```

哪个输出：

```
AT&T Individual Plans
    450 Minutes $39.99/mo.
    900 Minutes $59.99/mo.
    Unlimited Minutes $69.99/mo.
AT&T Family Plans
    550 Minutes $59.99/mo.
    700 Minutes $69.99/mo.
    1,400 Minutes $89.99/mo.
    2,100 Minutes $109.99/mo.
    Unlimited Minutes $119.99/mo.
AT&T Mobile Share Plans
    1GB $40/mo. + $45/smartphone
    4GB $70/mo. + $40/smartphone
    6GB $90/mo. + $35/smartphone
    10GB $120/mo.
    15GB $160/mo. + $30/smartphone
    20GB $200/mo. 
```

# c++ - 每个连接的线程与反应器模式（带有线程池）？

> ID：14317992
> 
> 赞同：14
> 
> 时间：2013-01-14T11:56:47.950
> 
> 标签：c++, poco-libraries

我想编写一个简单的多人游戏作为我的 C++ 学习项目的一部分。

所以我想，*既然我在做，我想*正确地做它，*而不是仅仅完成它*。

如果我理解正确：Apache 使用 Thread-per-connection 架构，而 nginx 使用事件循环，然后为传入连接专用一个工作者[[x]](https://stackoverflow.com/a/4765013/553801)。我猜 nginx 更聪明，因为它支持更高的并发级别。对？

我也遇到过这个[巧妙的类比](https://stackoverflow.com/a/2902718/553801)，但我不确定它是否适用于我的情况。这个比喻似乎也很*理想主义*。我很少看到我的计算机以 100% 的 CPU 运行（即使打开了无数个 Chrome 选项卡，Photoshop 和其他不同时运行的东西）

另外，我遇​​到了一个 SO 帖子（不知何故它从我的历史中消失了），用户询问他们应该使用多少线程，其中一个答案是拥有大约 700 个甚至多达 10,000 个线程是完全可以接受的。不过，这个问题与 JVM 有关。

因此，让我们估计大约 5,000 个用户的虚构用户群。哪种方法应该是“最并发”的？

1.  在一个线程中运行所有内容的反应器模式。
2.  带有线程池的反应器模式（大约，您建议线程池应该有多大？
3.  每个连接创建一个线程，然后销毁连接关闭的线程。

我承认选项 2 听起来对我来说是最好的解决方案，但我对这一切都很陌生，所以我可能有点天真并遗漏了一些明显的缺陷。此外，这听起来可能相当难以实施。

PS：我正在考虑使用[POCO C++ Libraries](http://pocoproject.org/)。建议任何替代库（如[boost](http://www.boost.org/)）对我来说都很好。但是，许多人说 POCO 的库非常干净且易于理解。所以，我最好使用那个，这样我就可以了解*我*正在使用的东西。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-07-12T13:31:45.700

如果正确编写响应式应用程序，它们当然可以更好地扩展。这表示

*   从不阻塞反应线程：
    *   任何阻塞都会严重降低服务器的性能，您通常使用少量的反应线程，因此阻塞也会很快导致死锁。
    *   没有互斥锁，因为它们可以阻塞，所以没有共享的可变状态。如果你需要共享状态，你必须用一个演员或类似的东西来包装它，这样只有一个线程可以访问这个状态。
*   反应线程中的所有工作都应受 CPU 限制
    *   所有 IO 都必须是异步的或在不同的线程池中执行，并将结果反馈到反应器中。
    *   这意味着使用期货或回调来处理回复，如果您不习惯并且不遵守纪律，这种代码风格很快就会变得不可维护。
*   反应线程中的所有工作都应该很小
    *   为了保持服务器的响应能力，reactor 中的所有任务都必须很小（受时间限制）
    *   在 8 核机器上，您不能允许 8 个长任务同时到达，因为在它们完成之前不会开始其他工作
    *   如果一项任务可能需要很长时间，则必须将其分解（合作多任务处理）

反应式应用程序中的任务是由应用程序而不是操作系统安排的，这就是为什么它们可以更快并使用更少的内存。当您编写反应式应用程序时，您是在说您非常了解问题域，因此您可以更好地组织和安排此类工作，而不是操作系统可以安排线程以阻塞方式执行相同工作。

我是响应式架构的忠实粉丝，但它们会带来成本。我不确定我是否会将我的第一个 c++ 应用程序编写为响应式，我通常尝试一次学习一件事。

如果您决定使用反应式架构，请使用一个可以帮助您设计和构建代码的良好框架，否则您最终会得到意大利面条。要寻找的东西是：

*   工作单位是什么？
*   添加新作品有多容易？它只能来自外部事件（例如网络请求）吗
*   将工作分解成更小的块有多容易？
*   处理这项工作的结果有多容易？
*   将阻塞代码移动到另一个线程池并仍然处理结果有多容易？

我不能为此推荐一个 C++ 库，我现在使用[Scala](http://www.scala-lang.org/)和[Akka](http://akka.io/)进行服务器开发，它们为所有这些提供了一个出色的可组合期货库，以保持代码干净。

祝您学习 C++ 以及您做出的任何选择都好运。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-14T12:29:11.433

选项 2 将最有效地占用您的硬件。这是经典文章，十年了，但仍然很好。

[http://www.kegel.com/c10k.html](http://www.kegel.com/c10k.html)

如今，构建具有并发和异步等待的应用程序的最佳库组合是 Boost Thread 和 Boost ASIO。您也可以尝试使用 C++11`std thread`库，并且`std mutex`（但 Boost ASIO 在很多情况下都比互斥锁好，只是总是回调到同一个线程并且您不需要受保护的区域）。远离`std future`，因为它坏了：

[http://bartoszmilewski.com/2009/03/03/broken-promises-c0x-futures/](http://bartoszmilewski.com/2009/03/03/broken-promises-c0x-futures/)

线程池中的最佳线程数是每个 CPU 核心一个线程。8 核 -> 8 线程。如果您认为您的线程池线程有时可能会调用阻塞操作，那么可能还有一些额外的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-04T05:09:44.993

FWIW，Poco自版本 1.5.1 起支持选项 2 ( [ParallelReactor )](http://pocoproject.org/docs-1.5.1/Poco.Net.ParallelSocketAcceptor.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T11:59:41.173

我认为选项 2 是最好的选项。至于池大小的调整，我认为池应该是自适应的。它应该能够产生更多线程（具有一些较高的硬限制）并在低活动时删除过多的线程。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-14T12:26:27.880

正如您所链接的类比（及其评论）所暗示的那样。这在某种程度上取决于应用程序。现在你在这里建造的是一个游戏服务器。让我们分析一下。

游戏服务器（通常）执行大量 I/O 和相对较少的计算，因此它们远非 100% CPU 应用程序。另一方面，它们通常也会更改某些数据库中的值（“游戏世界”模型）。所有玩家都创建对该数据库的读取和写入。这正是类比中的交集问题。

因此，虽然您可能会从在单独的线程中处理 I/O 中获得一些收益，但您也会因为让单独的线程访问同一个数据库并等待它的锁而失去一些东西。

因此，在您的情况下，选项 1 或 2 都是可以接受的。出于可扩展性的原因，我不推荐选项 3。

# linux - Linux 上的 Ada GNAT.Serial_Communications 行为

> ID：14317993
> 
> 赞同：1
> 
> 时间：2013-01-14T11:56:53.707
> 
> 标签：linux, usb, ada

我有一个 Ada 程序，它与通过 USB 连接的 Intellibox Basic（一个允许您控制火车的盒子）进行通信。

在 Windows 下，我必须安装一个特定的串行驱动程序（CP210x USB 到 UART 桥 VCP）。有了那个驱动程序，我可以与盒子完美沟通。这意味着向盒子发送命令。

在 Linux 下，我通过它进行通信，`/dev/ttyusb0`并且能够从盒子中获取消息，但我无法向盒子发送命令。没发生什么事。我没有收到错误或什么的。

GNAT.SerialCommunication 在 Linux 上的行为是否不同？程序是一样的。我是否必须设置某些东西才能让它在 Linux 上运行？

例如：一个典型的 2 字节命令的第一个字节是命令，第二个字节是 CRC 校验。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T17:02:12.907

我在某些时候遇到了 Serial_Communication 问题，结果证明这是在 Linux 中启用硬件握手的问题。它在 g-sercom.adb 中硬编码，查找“CRTSCTS”。如果您的 Intellibox 不使用硬件握手，Write() 将阻塞。

我相信我通过从标志中删除 CRTSCTS 掩码解决了它。

# javascript - Debugging an ajax call after submitting form

> ID：14317997
> 
> 赞同：0
> 
> 时间：2013-01-14T11:57:24.380
> 
> 标签：javascript, forms, debugging, validation, firebug

I have a form developed automatically by some php framework. I want to add a custom validation for form inputs and prevent submitting the form if the validation fails.

To do this, I wrote the following script:

```
$("form.pods-form-pod-katilimci").submit(function(event){
    telefon = $("form.pods-form-pod-katilimci #pods-form-ui-pods-field-oncelikli-telefon");
    email = $("form.pods-form-pod-katilimci #pods-form-ui-pods-field-email");
    if( $.trim(telefon.val()).length == 0 && $.trim(email.val()).length == 0) {
        alert("Size ulaşabilmemiz için eposta adresi veya telefon numaranızdan birisini mutlaka doldurmalısınız.");
        event.preventDefault();
        return false;
    }
}); 
```

It works properly. There is no problem. But submitting the form triggers an automatic ajax call and that call bypasses my validation.

Therefore, `preventDefault()` can not prevent submitting the form.

I want to find out which javascript function causes this behaviour using Firebug. I looked at the html source of the form but there is no clear sign of a function triggered by submit evend. Since this is an ajax call, I cannot figure out which function is called after form submitting by using "Break on Next" in Firebug.

The form is on this page: [http://www.aep.gov.tr/kullanici-islemleri/uyelik-bilgileri/](http://www.aep.gov.tr/kullanici-islemleri/uyelik-bilgileri/)

How can I find out which javascript function is triggered after form submitting.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T12:03:27.713

您可以尝试使用 jquery 验证插件：

[http://bassistance.de/jquery-plugins/jquery-plugin-validation/](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)

```
$('#yourformId').validate({
  rules:{
     telefon:{
         required:true
     },
     email:{
         required:true
     }
  }
}); 
```

然后使用 ajax-form 插件： http: [//malsup.com/jquery/form/](http://malsup.com/jquery/form/)

而这段代码：

```
$('#yourformId').ajaxForm({
   succes:function(response){
      (your code needed for another ajax call)
   }
}); 
```

# javascript - 立即调用函数表达式 (IIFE) 与否

> ID：14317998
> 
> 赞同：2
> 
> 时间：2013-01-14T11:57:26.390
> 
> 标签：javascript, design-patterns, anonymous-function, iife

我看到很多代码，例如：

```
var myApp ={};
(function() {
    console.log("Hello");
    this.var1 = "mark";     //"this" is global, because it runs immediately on load.  Caller is global
    myApp.sayGoodbye = function() {
        console.log("Goodbye");
    };
})(); 
```

这会导致匿名函数立即执行。但是，与仅将代码内联相比，这样做的优势是什么？

```
var myApp ={};
console.log("Hello");
var1 = "mark";     
myApp.sayGoodbye = function() {
    console.log("Goodbye");
}; 
```

显然它与函数的范围有关，但是由于该函数是匿名的并且由窗口调用，所以它的范围（即`this`）是全局的，不是吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T11:58:56.023

通常，你会有这个：

```
 var myApp ={};
        (function() {
            console.log("Hello");
            var var1 = "mark";  
            myApp.sayGoodbye = function() {
                console.log("Goodbye");
            };
        })(); 
```

主要区别在于`var1`它不会弄乱全局命名空间。在此调用之后，`var1`仍然与之前相同（通常未定义）。

由于`var1`只能从闭包中定义的函数访问，因此称为“私有”。

除了避免可能的冲突原因外，在无用时不要保留全局变量会更干净。

在这里，您没有局部变量，而是定义为全局变量`this.var1`。这可能是一个错误，或者原因会在代码的其他地方找到。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T12:29:27.203

一个原因：将代码包装在匿名函数中允许您创建一个模块，该模块将公共 API 与仅在模块内部使用的私有函数和变量区分开来。这避免了污染全局命名空间。

```
var myApp ={};
(function() {
    console.log("Hello");
    this.var1 = "mark";

    function helper() {/*Some code here*/;}

    myApp.sayGoodbye = function() {
        helper()
        console.log("Goodbye");
    };
})(); 
```

我可以说：

```
var myApp ={};
console.log("Hello");
var var1 = "mark";

function helper() {/*Some code here*/;}

myApp.sayGoodbye = function() {
    helper()
    console.log("Goodbye");
}; 
```

但是随后全局范围包含一个被调用的函数，该函数`helper`对使用您的模块的任何人都没有用，并且可能导致与其他模块的命名冲突。

我也可以只包含`helper`myApp 的一种方法。

```
var myApp ={};
console.log("Hello");
var var1 = "mark";

myApp.helper = function() {/*Some code here*/;}

myApp.sayGoodbye = function() {
    this.helper()
    console.log("Goodbye");
}; 
```

但是，我可能希望阻止用户直接调用`helper`，在这种情况下这是行不通的。