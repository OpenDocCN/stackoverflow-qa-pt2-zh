# StackOverflow 问答 15958000-15958999

# model-view-controller - clojure 组织代码以显示程序数据的方法

> ID：15958005
> 
> 赞同：0
> 
> 时间：2013-04-11T20:12:27.413
> 
> 标签：model-view-controller, data-structures, clojure

我的程序由一个嵌套`defrecords`的数据列表组成：列表的每个条目都是一个`defrecord`包含`defrecords`自己的几个字段。这些定义在一个单独的文件`data.clj`中。我想写另一个文件`view.clj`来呈现这些数据。

在这个特定的例子中，并不是所有的数据结构都需要，嵌套的一些字段`defrecords`不应该显示。其他字段在显示之前需要某种预处理（例如，它们存储日期并且应该以某种方式格式化）。

组织这样一个项目的惯用方式是什么？`data.clj`对数据进行预处理并提供`view.clj`通用地图以显示此数据*视图*会更好吗？或者视图应该采用整个数据结构并只提取它需要显示的部分。还要提一下，由于我仍处于早期开发阶段，数据结构还远未最终确定，因此可能会有一些重大变化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T20:46:18.997

将整个数据集交给视图，让视图决定显示什么。

另外，将数据处理代码编写为纯函数；这样，您可以在以后需要时轻松移动它。

# ember.js - emberjs 获取登录状态 onload

> ID：15958007
> 
> 赞同：0
> 
> 时间：2013-04-11T20:12:33.803
> 
> 标签：ember.js

所以我在后端设置了一个简单的登录系统。登录和注销功能有效，但我正在尝试进行状态管理。我有以下状态管理器：

```
App.loginStateManager = Ember.StateManager.create({
  initialState: "unknown",
  loggedIn: Ember.State.create({}),
  loggedOut: Ember.State.create({}),
  unknown: Ember.State.create({
    enter: function() {
      $.ajax({
        url: "/loginstate",
        type: "GET",
        success: function(data) {
          if(data == "loggedin") {
            LocalBookFinder.loginStateManager.transitionTo("loggedIn");
          }
          else {
            LocalBookFinder.loginStateManager.transitionTo("loggedOut");
          }
        }
      });
    }
  })
}); 
```

我从“未知”开始的原因应该是loggedOut，是因为在页面加载时，我想查询服务器以查明用户是否已经有会话。这就是 ajax 逻辑的用途。现在，状态确实更新了，但是因为我的视图已经加载，它显示了登录/注册链接。有没有办法可以将状态绑定到应用程序模板？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T20:44:21.493

您可能能够在应用程序控制器上设置一个属性，并在应用程序模板中设置一个条件。这将自动绑定，因此您可以在成功函数中设置应用程序控制器上的属性，并且 UI 应相应更新。

```
{{#if controller.loginState }} 
  Show something 
{{ else }} 
  so not ready loading... 
{{/if}} 
```

然后在您的控制器中进行类似的操作。

```
App.ApplicationController = Ember.Controller.extend({ 
  .... 
  loginState: null 
}); 
```

# php - picasa api 的缩略图

> ID：15958012
> 
> 赞同：2
> 
> 时间：2013-04-11T20:12:41.377
> 
> 标签：php, api, picasa

我正在使用 picasa api 进行社区搜索，现在我也想在搜索结果中添加缩略图。我该怎么做呢？我希望结果有缩略图，单击缩略图应该会将您带到网络相册中的图像。

```
<?php

require_once 'Zend/Loader.php';

Zend_Loader::loadClass('Zend_Gdata_Photos');
Zend_Loader::loadClass('Zend_Gdata_ClientLogin');
Zend_Loader::loadClass('Zend_Gdata_AuthSub');
Zend_Loader::loadClass('Zend_Gdata_Query');

$search=$_REQUEST['id'];

$serviceName = Zend_Gdata_Photos::AUTH_SERVICE_NAME;
$user = "abc@gmail.com";
$pass = "password";

$client = Zend_Gdata_ClientLogin::getHttpClient($user, $pass, $serviceName);

$gp = new Zend_Gdata_Photos($client, "Google-DevelopersGuide-1.0");

// Community search queries aren't currently supported through a separate
// class in the PHP client library.  However, we can use the generic 
// Zend_Gdata_Query class as an alternative

// URL for a community search request
// Creates a Zend_Gdata_Query
$query = $gp->newQuery("https://picasaweb.google.com/data/feed/api/all");

// looking for photos in the response
$query->setParam("kind", "photo");

// full text search
$query->setQuery($search);

// maximum of 10 results
$query->setMaxResults("6");

// There isn't a specific class for representing a feed of community
// search results, but the Zend_Gdata_Photos_UserFeed understands
// photo entries, so we'll use that class
$userFeed = $gp->getUserFeed(null, $query);
foreach ($userFeed as $photoEntry) 
{
 echo $photoEntry->getTitle()->getText() . "</br > ";
// The 'alternate' link on a photo represents the link to
// the image page on Picasa Web Albums
$link=$photoEntry->getLink('alternate')->getHref();
echo "<img src='".$link."'>";
echo '<a href="'.$link.'">'.$photoEntry->getLink('alternate')->getHref().'</a> <br />';
echo "<br />\n";

}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T01:49:44.190

算法：

1.  获取照片的 URL。
2.  将 URL 解析为其组成部分（方案、主机、路径、文件名）。
3.  在文件名之前注入缩略图限定符。
4.  重新组装组件。

例如：

```
// Define thumbnail properties (w = width, 200 = pixels).
$THUMBMAIL = "w200";

// Get the "source" URL for the image.
$imgSrc  = $photoEntry->content->getSrc();

// Extract the component parts.
$url = parse_url( $imgSrc );

// Extract the path and inject the thumbnail size.
$url["path"] = dirname( $path ) . "/$THUMBNAIL/" . basename( $path );

// Reassemble the URL.
$thumbnail = build_url( $url ); 
```

你应该可以使用[http_build_url](http://php.net/manual/en/function.http-build-url.php)，但我有命名冲突，所以写了这个：

```
function build_url( $url ) {
  return $url["scheme"] . "://" . $url["host"] . "/" . $url["path"];
} 
```

阅读[这篇文章](http://technolux.blogspot.ca/2011/01/download-original-picasaweb-photos.html)了解更多详情。

# php - 通过 URL 搜索 Google 图片，无法抓取页面

> ID：15958017
> 
> 赞同：1
> 
> 时间：2013-04-11T20:12:54.023
> 
> 标签：php, curl, web-crawler, google-image-search

我正在尝试通过**url**使用 Google 图片搜索来进行研究。那是在我放弃通过实际图像搜索之后，因为我无法真正让它工作。

**到目前为止做了什么**

[使用 PHP，我可以向https://www.google.com/searchbyimage?image_url=https://www.google.com/images/nav_logo117.png](https://www.google.com/searchbyimage?image_url=https://www.google.com/images/nav_logo117.png)发出 HTTP 请求

如果您将该 URL 复制到浏览器中，您会看到结果（这里似乎发生了一些自动重定向）。

但是，如果您尝试手动请求 URL，例如通过 PHP 或通过[http://web-sniffer.net/?url=images.google.com/searchbyimage?image_url=https://www.google.com /images/nav_logo117.png](http://web-sniffer.net/?url=images.google.com/searchbyimage?image_url=https://www.google.com/images/nav_logo117.png)您会收到一个 HTTP 302 错误，表明该页面已移动到其他 URL。

我提取了那个 URL，在浏览器上试了一下，它又可以工作了。但是，如果您手动尝试此 URL，您会再次遇到 HTTP 302 错误，最终将您带到 Google 的主页。

我见过这样的问题：[Script to use Google Image Search with local image as input](https://stackoverflow.com/questions/14634321/script-to-use-google-image-search-with-local-image-as-input)这似乎可以做到，但提问者没有遇到我遇到的同样问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-10T07:04:54.603

Google 似乎正在根据您请求中的用户代理执行重定向。因此，如果您包含一个真正的用户代理 - 从真正的网络浏览器复制的东西 - 请求应该可以正常工作。

这是一些适用于我的示例 php 代码：

```
$location = 'http://www.google.com/searchbyimage?image_url=https://www.google.com/images/nav_logo117.png';

do {
  $ch = curl_init($location);

  curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows NT 6.0; rv:20.0) Gecko/20100101 Firefox/20.0');
  curl_setopt($ch, CURLOPT_HEADER, true);
  curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

  $data = curl_exec($ch);
  $http_code = curl_getinfo($ch, CURLINFO_HTTP_CODE);
  curl_close($ch);

  $data = str_replace("\r\n","\n",$data);
  list($headers, $data) = explode("\n\n", $data, 2);
  $headers = explode("\n",$headers);

  $location = null;
  foreach ($headers as $header)
    if (stripos($header, 'Location:', 0) === 0)
      $location = trim(substr($header,9));

} while ($http_code == 302 && $location != null);

echo $data; 
```

# javascript - 字符串内的变量

> ID：15958020
> 
> 赞同：0
> 
> 时间：2013-04-11T20:13:07.787
> 
> 标签：javascript, string, variables

当我尝试将变量放入已经在字符串中的字符串中时，我遇到了一个小问题。基本上，我正在尝试使用颜色变量（字符串，例如“#FF0”）更改特定单词的颜色。这就是替换函数的样子：

```
$('#textWithTheWord').replaceWith($('<div></div>').append($('#textWithTheWord').clone()).html().replace(word, '<span style="color:red;">' + word + '</span>')); 
```

请注意，我想`'<span style="color:red;">'`用该变量替换“红色”。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T22:12:40.957

一个简单的解决方案是简单地将`innerHTML`元素的属性替换为一个新的 html 字符串，该字符串会将单词包装在`span`. 但是，这不是一个非常灵活的解决方案，因为通过替换`innerHTML`属性，所有元素都将被更新，这可能会产生意想不到的结果，除非您的目标元素只包含文本节点。

让我们假设`body`包含此文本：

```
this is some text and I want to replace the word cool 
```

你可以有：

```
var $body = $(document.body);

$body.html($body.html().replace(/\b(cool)\b/g, '<span style="color: red;">$1</span>')); 
```

在这里，`/\b(cool)\b/g`正则表达式将匹配每个*很酷*的单词并在它们上创建一个捕获组，允许我们在替换表达式中将其引用为`$1`.

但是，最先进的解决方案可能会像这样实现：

*   遍历不包含在`span`具有`data-styled-text`属性的 a 中的文本节点。（你可以检查`textNode.parentNode`财产）
*   用标签围绕您想要的单词`<span data-styled-text>`。看看[https://developer.mozilla.org/fr/docs/DOM/Text.splitText](https://developer.mozilla.org/fr/docs/DOM/Text.splitText)
*   查询所有`<span data-styled-text>`元素并对它们进行任何操作。

我已经玩弄了这个概念，并为您创建了一个小提琴，展示了如何以任何您希望使用 a`regex`来定位特定文本的方式操作文本。我创建了 2 个主要功能`wrapText`，`styleText`这将允许您对页面上的文本执行任何操作。它可以进一步优化，但你会明白的。

**看看[http://jsfiddle.net/scarsick/tX4Ge/1/](http://jsfiddle.net/scarsick/tX4Ge/1/)**

以下函数允许您将任何文本包装在文本节点中。

```
function wrapText(textNode, textRx, wrapFn) {
    var global = textRx.global,
        wrapEl,
        result, 
        rightTextNode,
        matchedText,
        index;

    while (result = textRx.exec(textNode.nodeValue)) {
        rightTextNode = textNode.splitText(index = result.index);
        rightTextNode.nodeValue = rightTextNode.nodeValue.substring((matchedText = result[0]).length);
        wrapEl = wrapFn(matchedText, index);
        wrapEl.appendChild(document.createTextNode(matchedText));
        rightTextNode.parentNode.insertBefore(wrapEl, rightTextNode);

        if (!global) {
            break;
        }

        textNode = rightTextNode;
        textRx.lastIndex = 0;
    }    
} 
```

以下函数允许您设置元素中包含的任何文本的样式。

```
function styleText(el, textRx, styleFn) {
    var wrapEl = document.createElement('span'),
        slice = [].slice;

    wrapEl.setAttribute('data-styled-text', 'true');

    styleText = function(el, textRx, styleFn) {
        var childNodes = slice.call(el.childNodes, 0),
            i = 0,
            len = childNodes.length,
            node;

        for (; i < len; i++) {
            node = childNodes[i];

            switch (node.nodeType) {
                case 3:
                     if (!node.parentNode.getAttribute('data-styled-text')) {
                         wrapText(node, textRx, function (text, index) {
                             var el = wrapEl.cloneNode();

                             styleFn(el, text, index);

                             return el;
                         });

                         continue;
                    }

                    styleFn(node.parentNode);
                    break;
                case 1:
                    styleText(node, textRx, styleFn);
                    break;
            }
        }
    };

    styleText(el, textRx, styleFn);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T20:43:29.047

如果所有这些代码仅用于更改元素中文本的颜色，则可以像这样大大简化它：

```
var color = "#ff8877";
$('#textWithTheWord').css('color', color); 
```

[http://api.jquery.com/css/](http://api.jquery.com/css/)

无需使用 DOM 或字符串连接来更改元素的属性或样式。jQuery 可能会有一个功能可以满足您的需求。

# javascript - 未捕获的类型错误：对象# 没有方法

> ID：15958024
> 
> 赞同：1
> 
> 时间：2013-04-11T20:13:16.607
> 
> 标签：javascript, jquery, jquery-chosen

将 Web 应用程序部署到远程主机后，我收到了这个奇怪的错误。

`Uncaught TypeError: Object #<error> has no method 'endsWith'`

事实：

*   该应用程序作为主机在我的本地计算机上运行良好。
*   该应用程序在部署到远程主机中的 IIS 时会引发此错误。
*   应用程序加载的文件在两种情况下都是相同的。

加载的文件如下：

![在此处输入图像描述](https://i.stack.imgur.com/jQLB9.png)

文件编写如下：

![在此处输入图像描述](https://i.stack.imgur.com/fVtru.png)

这些方法是：

```
String.prototype.startsWith = function (toMatch) {
    var self = this;
    return self.indexOf(toMatch) == 0;
};

String.prototype.endsWith = function (toMatch) {
    var self = this;
    return self.toLowerCase().indexOf(toMatch.toLowerCase(), 
        self.length - toMatch.length) !== -1;
};

String.prototype.contains = function (toMatch) {
    var self = this;
    return self.indexOf(toMatch) !== -1;
}; 
```

我不是 javascript 的高手，但是当我访问原型对象时，intellisense 会向我显示：

![在此处输入图像描述](https://i.stack.imgur.com/WpjFu.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T12:38:15.907

此异常有两个可能的原因：

*   原型扩展脚本尚未加载（特别是在部署时可能会发生变化，当异步加载时不小心），没有正确执行或方法在`delete`此后得到 d（不太可能）
*   或者说神秘`Object #<error>`不是`String`实例。看起来如果那是问题:-)

# python - 获取 Errno 9：python 套接字中的错误文件描述符

> ID：15958026
> 
> 赞同：36
> 
> 时间：2013-04-11T20:13:23.510
> 
> 标签：python, sockets

我的代码是这样的：

```
while 1:
    # Determine whether the server is up or down
    try:
        s.connect((mcip, port))
        s.send(magic)
        data = s.recv(1024)
        s.close()
        print data
    except Exception, e:
        print e
    sleep(60) 
```

它在第一次运行时运行良好，但之后每次都给我 Errno 9。我究竟做错了什么？

顺便提一句，

```
mcip = "mau5ville.com"
port = 25565
magic = "\xFE" 
```

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-04-11T20:18:06.537

您正在调用`connect`您关闭的同一个套接字。你不能那样做。

至于说的[文档](http://docs.python.org/2/library/socket.html#socket.socket.close)`close`：

> 未来对套接字对象的所有操作都将失败。

只需将`s = socket.socket()`（或您拥有的任何东西）移动到循环中。（或者，如果您愿意，请使用[`create_connection`](http://docs.python.org/2/library/socket.html#socket.create_connection)而不是分两步进行，这使得这更难出错，也意味着您不必猜测 IPv4 与 IPv6 等。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-04-15T21:57:33.687

我过去解决了这个问题，

您必须先创建套接字`connect()`：

```
 s = socket(AF_INET, SOCK_STREAM) 
```

然后继续：

```
 s.connect((mcip, port))
    s.send(magic)
    data = s.recv(1024)
    s.close()
    print dat 
```

# java - 如何将数组中的每个元素表示为一条线

> ID：15958031
> 
> 赞同：0
> 
> 时间：2013-04-11T20:13:35.087
> 
> 标签：java, sorting, line, paint, java-canvas

此应用程序对一个数组进行排序。想用一行相等的值来表示当前项目的变化。我不知道我会把paint方法（或draw）放在哪里来绘制我当前的项目，因为方法“run()”不能。

```
class sortareBubbleSort extends Canvas implements Runnable{

    Dimension dim = new Dimension (300 , 300) ;

    public Dimension getPreferredSize () {
        return dim ;
    }

    public void paint ( Graphics g) {
        g.setColor (Color.black);
        g.drawRect (0, 0, dim .width -1, dim.height -1);
    }

    //public void update ( Graphics g) {
    //paint (g);} 

    int nre,min,max;

    public sortareBubbleSort(int nre,int min,int max){
        this.nre=nre;
        this.min=min;
        this.max=max;
    }

    public void run(){
        int[] x=new int [nre];
        for(int i=0;i<x.length-1;i++)
            x[i]=min+(int)(Math.random()*((max-min)+1));
        boolean doMore = true;
        while (doMore) {
            doMore = false;  
            for (int i=0; i<x.length-1; i++) {
                if (x[i] > x[i+1]) {
                    int temp = x[i];
                    x[i] = x[i+1];
                    x[i+1] = temp;
                    doMore = true; 
                    g.drawLine(50,50,x[i+1],50);
                }
            }
        }
    } 
```

最后，我希望它看起来像这样：

为此数组 Arr[]={4,3,5,2,1} 在画布中绘制：_ __ **_ _****_* ___*

 *（ Arr 使用其中一种方法排序的已排序向量之一）

1 2 3 4 5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T21:07:47.993

您需要根据 的内容对您的`paint()`方法进行所有绘制`x`，因此如下所示：

```
public void paint ( Graphics g) {
    g.setColor (Color.black);
    g.drawRect (0, 0, dim .width -1, dim.height -1);
    if (x != null) {
      // loop which paints x
    }
} 
```

为此，`paint()`方法需要访问`x`，因此它必须是成员变量，如下所示：

```
int nre,min,max;
int[] x; //added, leave to default value null 
```

然后改变你的`run()`方法来匹配，首先在开始时设置成员变量：

```
x = new int[nre]; // int[] removed from this line, x is member variable 
```

然后在您的内部循环中，将`g.drawLine()`call 简单地替换为 call to [`repaint()`](http://docs.oracle.com/javase/7/docs/api/java/awt/Component.html#repaint%28%29)。

* * *

您*可以*优化绘图，以便每次都不会重新绘制所有内容，但我认为这可能超出了您正在做的事情的范围，无论如何，只有当您看到性能太差时才值得。

此外，您可能需要添加其他成员变量，例如，如果您需要此“当前项目”信息进行绘画。如果是这样，只需添加一个成员变量，并在调用之前将其设置为正确的值`repaint()`。*

# sql - 如何在给定计算机、用户和登录时间的情况下选择最后登录到计算机的用户

> ID：15958033
> 
> 赞同：1
> 
> 时间：2013-04-11T20:13:36.537
> 
> 标签：sql, sql-server-2008, sql-server-2008-r2

如果我运行此查询以获取登录到每台计算机的用户列表：

```
SELECT
    T0.Computer,
    T4.[User],
    T4.[Last Modified]
    FROM Table1 T0
    LEFT OUTER JOIN Table4 T4 ON T0.Guid = T4.Guid
    Where T4.[Last Modified] >= getdate()-30 -- Logged in the last 30 days
    ORDER BY T4.[Last Modified] DESC 
```

我得到：

```
Computer     User    Last Modified
--------     -----   --------------
Comp1        UserA   2013-07-14 16:31:59.000
Comp1        UserB   2013-06-03 13:43:32.000
Comp1        UserC   2013-04-28 15:58:22.000
Comp2        UserD   2013-04-28 11:10:21.000
Comp2        UserE   2013-04-19 15:01:33.000
Comp3        UserF   2013-04-18 08:01:03.000 
```

我想显示 MAX([Last Modified]) 以仅显示登录每台计算机的最后一个用户：

```
Computer     User
--------     -----
Comp1        UserA
Comp2        UserD
Comp3        UserF 
```

说 SELECT DISTINCT Computer, User ORDER BY [Last Modified] DESC 是有道理的，但是如果没有在 SELECT 中指定它就不能使用 ORDER BY。

并且 MAX([Last Modified]) 仅在用户不在 SELECT 中时才有效。

* * *

谢谢@拉马克

是否可以透视结果以显示最后两个用户？我们可以将行号更改为 User1、User2 等：

```
RN = 'User' + CAST(ROW_NUMBER() OVER(PARTITION BY T0.Name ORDER BY T4.[Last Modified] DESC) AS VarChar) 
```

那么结果可能会显示：

```
Computer    User1     User2
--------    -----     -----
Comp1       UserA     UserB
Comp2       UserD     UserE
Comp3       UserF     NULL or '' 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-11T20:18:52.147

您可以执行以下操作：

```
;WITH CTE AS
(
    SELECT  T0.Computer,
            T4.[User],
            T4.[Last Modified],
            RN = ROW_NUMBER() OVER(PARTITION BY T0.Computer ORDER BY T4.[Last Modified] DESC)
    FROM Table1 T0
    LEFT OUTER JOIN Table4 T4 
        ON T0.Guid = T4.Guid
    WHERE T4.[Last Modified] >= GETDATE()-30 -- Logged in the last 30 days
)
SELECT Computer, [User], [Last Modified]
FROM CTE
WHERE RN = 1 
```

**更新**

试试这个以满足您的新要求：

```
;WITH CTE AS
(
    SELECT  T0.Computer,
            T4.[User],
            T4.[Last Modified],
            RN = ROW_NUMBER() OVER(PARTITION BY T0.Computer ORDER BY T4.[Last Modified] DESC)
    FROM Table1 T0
    LEFT OUTER JOIN Table4 T4 
        ON T0.Guid = T4.Guid
    WHERE T4.[Last Modified] >= GETDATE()-30 -- Logged in the last 30 days
)
SELECT  Computer, 
        MIN(CASE WHEN RN = 1 THEN [User] END) User1,
        MIN(CASE WHEN RN = 2 THEN [User] END) User2
FROM CTE
WHERE RN <= 2
GROUP BY Computer 
```

# oauth-2.0 - 如何在我的页面选项卡中获得经过身份验证的用户

> ID：15958038
> 
> 赞同：2
> 
> 时间：2013-04-11T20:13:52.717
> 
> 标签：oauth-2.0, facebook-php-sdk, x-frame-options

在我寻找答案的过程中，我只找到了关于问题是什么的线索，没有找到可行的解决方案，或者有类似问题的人。

当我在 facebook 之外浏览我的应用程序时，我可以毫无问题地进行身份验证，并且所有 facebook 交互都可以正常工作。当我在页面选项卡中安装我的应用程序时，由于以下错误，我无法进行身份验证：

> 拒绝在框架中显示“ [https://www.facebook.com/dialog/oauth?client_id=175164365974824&redirect_ur](https://www.facebook.com/dialog/oauth?client_id=175164365974824&redirect_ur) …er%2F&state=6790b76872277c825f5bb749ed167152&scope=publish_actions%2Cemail”，因为它将“X-Frame-Options”设置为“DENY”。

我可以从中得到的是，facebook 不允许它的身份验证页面显示在我的页面选项卡 iframe 中。

### 如何让用户在*我的页面选项*卡中通过身份验证并在身份验证后重定向到我的*页面选项卡*？（我不希望将我的应用程序用作独立网站）。

其他重要信息：我正在使用 PHP SDK 进行身份验证和获取用户数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T05:07:16.580

我发现单独使用 PHP SDK 是不可能的。我需要结合 Javascript SDK 和 PHP SDK。我使用 Javascript SDK 来处理登录，使用 PHP SDK 来获取用户数据并发布到墙上的操作等。

我在 PHP SDK Git 中找到了这个例子：[https ://github.com/facebook/facebook-php-sdk/blob/master/examples/with_js_sdk.php](https://github.com/facebook/facebook-php-sdk/blob/master/examples/with_js_sdk.php)

```
<?php

require '../src/facebook.php';

$facebook = new Facebook(array(
'appId'  => '344617158898614',
'secret' => '6dc8ac871858b34798bc2488200e503d',
));

// See if there is a user from a cookie
$user = $facebook->getUser();

if ($user) {
  try {
    // Proceed knowing you have a logged in user who's authenticated.
    $user_profile = $facebook->api('/me');
  } catch (FacebookApiException $e) {
    echo '<pre>'.htmlspecialchars(print_r($e, true)).'</pre>';
    $user = null;
  }
}

?>
<!DOCTYPE html>
<html xmlns:fb="http://www.facebook.com/2008/fbml">
  <body>
    <?php if ($user) { ?>
      Your user profile is
      <pre>
        <?php print htmlspecialchars(print_r($user_profile, true)) ?>
      </pre>
    <?php } else { ?>
      <fb:login-button></fb:login-button>
    <?php } ?>
    <div id="fb-root"></div>
    <script>
      window.fbAsyncInit = function() {
        FB.init({
          appId: '<?php echo $facebook->getAppID() ?>',
          cookie: true,
          xfbml: true,
          oauth: true
        });
        FB.Event.subscribe('auth.login', function(response) {
          window.location.reload();
        });
        FB.Event.subscribe('auth.logout', function(response) {
          window.location.reload();
        });
      };
      (function() {
        var e = document.createElement('script'); e.async = true;
        e.src = document.location.protocol +
          '//connect.facebook.net/en_US/all.js';
        document.getElementById('fb-root').appendChild(e);
      }());
    </script>
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T22:19:26.620

不幸的是，您不能使用 PHP 来执行此操作，因为您必须将他重定向到同一窗口上的新 url，您必须使用 Java 脚本来访问活动窗口。

```
if (!array_key_exists('oauth_token', $sdata)){

    //set loginURL and params to get Permissions
    $params = array( //offline acces needed to post to users wall (dunno why)
        'redirect_uri' => $my_url, //your redirect URI - facebook.com/yourpage/_appid
        'client_id' => $app_id[path],
        'scope' => 'email, publish_stream', //your permissions
    );
    $loginUrl = $facebook->getLoginUrl($params);

    echo "<script>

     top.location.href='".$loginUrl."';

    </script>";

}else{

     //if the user already authed send him here
    header ('location: nextfile.php');
} 
```

# android - 重新缩放/调整位图大小后质量不佳

> ID：15958039
> 
> 赞同：1
> 
> 时间：2013-04-11T20:13:52.730
> 
> 标签：android, bitmap, resize

我在重新缩放位图后遇到质量问题我从资产中加载图像，因此解码它们必须由 Stream 完成

这是我的方法

```
 InputStream is = getAssets().open(lol.get(zpositions));   
Bitmap bm = BitmapFactory.decodeStream(is);
  Bitmap mBitmap    = Bitmap.createScaledBitmap(bm,width,hight, false); 
```

我试过了

```
Options options = new BitmapFactory.Options();
options.inScaled = false;
options.inPreferredConfig = Config.ARGB_8888;

Bitmap bitmapsrc = BitmapFactory.decodeStream(is, null, options);
Bitmap mBitmap  = Bitmap.createScaledBitmap(bitmapsrc,width,hight, false); 
```

但仍然是同样的问题

知道如何绕过这个问题吗？谢谢

这是代码

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:padding="1dip"
android:background="@android:color/black" >

<ImageView
    android:id="@+id/image"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:adjustViewBounds="true"
   /> 
```

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.fullimage);

    Display display = getWindowManager().getDefaultDisplay(); 
       width = display.getWidth();  
       height = display.getHeight(); 

       AdView adView = (AdView)findViewById(R.id.ad);
        adView.loadAd(new AdRequest());

     Intent i = getIntent();
    List<String> lol = i.getStringArrayListExtra("lol");
    this.lol = lol;
     pagerPosition = i.getExtras().getInt("id");

 {

 public Bitmap getbitBitmap() throws IOException{
    positions = MyPageChangeListener.getCurrentPage();

    if (positions == 0) {
         zpositions = pagerPosition;

    }
    InputStream is = getAssets().open(lol.get(zpositions)); 
            Options options = new BitmapFactory.Options();
            options.inScaled = false;

    Bitmap bitmapsrc = BitmapFactory.decodeStream(is, null, options);

    return bitmapsrc;

}

          private void CropWallpaper() throws IOException {
      Bitmap mBitmap    = Bitmap.createScaledBitmap(bitmapsrc,width, height, false);    
        try {
            setWallpaper(mBitmap);
            Toast.makeText(this,"Cropped successfully" ,      Toast.LENGTH_SHORT).show();   
        } catch (Exception e) {
            Toast.makeText(this,"Failed to Crop" , Toast.LENGTH_SHORT).show();
            // TODO: handle exception
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T22:29:00.870

增加图像尺寸时，图像质量总是明显下降到一定程度。因此，当您缩放图像以“适合屏幕大小”时，“assets”文件夹中资源图像的分辨率小于显示它的屏幕。

解决方案是使用至少与您计划在其上显示的最大屏幕大小相同的图像。您可以通过两种方式做到这一点：

1.  找到现在位于“assets”文件夹中的图像的原始来源，并将其调整为相对较大的 android 设备屏幕的大小，例如 1280x800。不要太大，因为`OutOfMemoryError`当您尝试打开图像时会得到一个。
2.  如果您的图像已经很小并且您无法访问更大的原始副本，那么我建议在放入您的“资产”文件夹之前在 Photoshop 或其他桌面图像产品中调整它的大小。与 Android 操作系统实时相比，这些成像产品在提升您的图像方面做得更好。

最后，如果您遇到`OutOfMemoryError`，您的选择将是：

1.  减小图像的大小，直到在大小和显示质量之间找到可接受的平衡，或者
2.  将您的图像从“assets”文件夹移动到标准“drawable-hdpi”、“drawable-mdpi”等目录结构中的几个不同大小的图像中。操作系统将在这些目录之一中打开一个图像，该图像与屏幕密度一致，屏幕密度更可能与硬件的堆内存能力成正比。

当然，您也可以在放大时使用`BitmapFactory.Options`诸如 32 位 ( `ARGB444`) 和抖动，但这只会在增加图像大小以进行显示时帮助很大。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-12T17:02:56.617

由于您已经尝试了 的所有组合`BitmapOptions`，因此请尝试在创建缩放位图时设置过滤器参数。

```
Bitmap mBitmap  = Bitmap.createScaledBitmap(bitmapsrc,width,hight, true); 
```

放大时会平滑图像。

# c++ - 写作课——好习惯

> ID：15958041
> 
> 赞同：0
> 
> 时间：2013-04-11T20:14:00.407
> 
> 标签：c++, oop, class, class-design

第一件事是我真的不想在堆栈代码交换上发布这个，因为这是在大约 5 分钟内编写的非常少量的代码。

我想问你我写的课（我第一次用c++）是否可以接受。我并没有真正看到很多 c++ 代码，所以我无法将它与任何东西进行比较。

但是我见过一些只实现函数声明的类，这些函数的内部写在代码的其他地方。

如果您有什么问题，我正在向您征求任何建议。为什么他们会按照我在上面的段落中描述的那样做？哪一种编码风格更好？

```
class File {

private:

    FILE *_handler;
    char *_path;
    long _size;

    void setHandler(char *mode)
    {
        this->_handler = fopen(this->_path, mode);
    }

public:

    File(char *path)
    {
        this->_path = path;
    }

    size_t read()
    {
        this->setHandler("r");
        char *buffer = (char*) malloc(sizeof(char)*this->_size);

        return fread(buffer, 1, this->_size, this->_handler);
    }

    void write(char *data)
    {
        this->setHandler("w");
        fputs(data, this->_handler);
    }

    long size()
    {
        if(! sizeof(this->_size) > 0)
        {
            fseek(this->_handler, 0, SEEK_END);
            this->_size = ftell(this->_handler);
            rewind(this->_handler);
        }

        return this->_size;
    }

}; // End File 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-11T20:28:17.623

这里存在技术问题以及我认为的基本设计问题。

技术的：

你打开一个文件多少次？你关闭了多少次？看看 read() 和 write() 做了什么。

错误处理在哪里？如果 fopen() 失败会发生什么。切勿在未检查的情况下使用返回值。

基本设计问题：

你分配内存，谁来释放它？将分配和释放的责任分开通常不是一个好主意。C++ 的人倾向于使用智能指针来帮助解决这个问题。

如果给定一个非常大的文件，您的代码会做什么？

最基本的：你的界面是一个“你必须记住这个”的界面。如果有人调用 read() 而不记得先调用 size() 会发生什么？为什么您的呼叫者需要这样做？设计您的界面，旨在简化呼叫者的生活。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T20:21:12.880

`this`如果没有歧义，则无需使用。

```
File(char *path)
{
    _path = path;
} 
```

与您可以删除的功能相同`this`

```
size_t read()
{
    setHandler("r");
    char *buffer = (char*) malloc(sizeof(char)*_size);

    return fread(buffer, 1, _size, _handler);
} 
```

在类声明中实现函数有它的用途，但它不是必须的（除非使用模板），你可以在源文件中定义你的函数并从那里包含你的类头文件。这使类实现与类接口分开。

想象一下，您在头文件中更改了一个函数的实现，包括该头文件在内的所有文件，即使它们没有使用该函数，也需要重新编译。

由于您使用的是 C++，因此您可能需要考虑使用 c++ 文件对象（fstream、ifstream、ofstream 等）。

最后，我真的看不出像这样包装文件的意义，除非你的类提供了一些额外的功能，你在这里所做的只是更改函数的名称并创建了另一个抽象层，这并没有带来太多桌子。

# tfs - TFS 2012 和 VS 2010 的禁止模式策略

> ID：15958042
> 
> 赞同：1
> 
> 时间：2013-04-11T20:14:03.420
> 
> 标签：tfs

我们正在使用 TFS 2012，以及 Visual Studio 2010 和 Visual Studio 2012 的混合环境。我最近将 TFS Power Tools Forbidden Patterns 签入策略应用于一个项目。从 VS 2012 开始，签入似乎工作正常，但是当我们尝试使用 VS 2010 签入时，加载 Forbidden Patterns 策略时出现错误。

它可能只需要为 VS 2010 安装或注册，但我不知道该怎么做。（我可以使用旧版本的 TFS 电动工具吗？- 似乎是错误的，因为那样我们可能对同一策略有不同的逻辑）？

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-12-09T18:14:16.550

您需要安装与需要加载项（如签入策略）工作的 Visual Studio 版本相匹配的 Team Foundation Power Tools 版本。但是，如果您尝试为多个版本安装 shell 扩展，安装将失败。建议为您正在使用的最新版本的 TFS 和其他 TFPT 版本安装 shell 扩展，在安装过程中取消选中该选项。

[TFPT 2013](https://visualstudiogallery.msdn.microsoft.com/f017b10c-02b4-4d6d-9845-58a06545627f)

[TFPT 2012](https://visualstudiogallery.msdn.microsoft.com/b1ef7eb2-e084-4cb8-9bc7-06c3bad9148f)

[TFPT 2010](https://visualstudiogallery.msdn.microsoft.com/c255a1e4-04ba-4f68-8f4e-cd473d6b971f)

# php - 如何从 joomla 中的模块参数中获取数据

> ID：15958043
> 
> 赞同：3
> 
> 时间：2013-04-11T20:14:20.673
> 
> 标签：php, joomla

我正在构建一个 joomla 2.5 模块，我想从模块参数访问数据传递，但我收到以下错误：**致命错误：调用非对象上的成员函数 get()** 我的代码如下：

### 助手.php

```
class modFeedGrabber
{
    function feedurl( $params ){
        return $params->get('feedUrl');
    }
} 
```

### mod_feedGrabber.php

```
defined( '_JEXEC' ) or die( 'Restricted access' );
$sitebase = JPATH_BASE;
$doc =& JFactory::getDocument();

// Include the syndicate functions only once
require_once( dirname(__FILE__).DS.'/helper.php' );
$feed = new modFeedGrabber();
$url = $feed->feedurl();
require( JModuleHelper::getLayoutPath( 'mod_feedGrabber' ) ); 
```

### mod_feedGrabber.xml

```
<?xml version="1.0" encoding="utf-8"?>
<extension type="module" version="2.5.0" client="site" method="install">
    <name>Scroll Feed</name>
    <author>Josiah Gerald</author>
    <version>1.0.0</version>
    <date>03-04-2013</date>
    <description>A simple feed scroller.</description>
    <files>
        <filename>mod_feedGrabber.xml</filename>
        <filename module="mod_feedGrabber">mod_feedGrabber.php</filename>
        <filename>index.html</filename>
        <filename>helper.php</filename>
        <filename>tmpl/default.php</filename>
        <filename>tmpl/index.html</filename>
        <folder>tmpl</folder>
    </files>
    <config>
        <fields name="params">
            <fieldset name="basic">
                <field
                    name="feedUrl"
                    type="url"
                    size="50"
                    label="Feed URL"
                    description="Enter the url of the feed" />

 </fieldset>
       </fields>
 </config>
</extension> 
```

### 默认的.php

```
 <?php 
// no direct access
defined( '_JEXEC' ) or die( 'Restricted access' );
?>
<div id='feed' class="<?php echo $module_sfx; ?>"><?php echo $url; ?>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T00:28:25.903

我可以看到提供的代码的主要问题是您没有将 传递`$params`给您的辅助函数。它应该是这样的：

```
defined( '_JEXEC' ) or die( 'Restricted access' );
$sitebase = JPATH_BASE;
$doc =& JFactory::getDocument();

// Include the syndicate functions only once
require_once( dirname(__FILE__).DS.'/helper.php' );
$feed = new modFeedGrabber();
$url = $feed->feedurl($params);
require( JModuleHelper::getLayoutPath( 'mod_feedGrabber' ) ); 
```

此外，您的 XML 无效，因为它缺少`fieldset`和标签的结束`fields`标签。它应该如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<extension type="module" version="2.5.0" client="site" method="install">
    <name>Scroll Feed</name>
    <author>Josiah Gerald</author>
    <version>1.0.0</version>
    <date>03-04-2013</date>
    <description>A simple feed scroller.</description>
    <files>
        <filename>mod_feedGrabber.xml</filename>
        <filename module="mod_feedGrabber">mod_feedGrabber.php</filename>
        <filename>index.html</filename>
        <filename>helper.php</filename>
        <filename>tmpl/default.php</filename>
        <filename>tmpl/index.html</filename>
        <folder>tmpl</folder>
    </files>
    <config>
        <fields name="params">
            <fieldset name="basic">
                <field
                    name="feedUrl"
                    type="url"
                    size="50"
                    label="Feed URL"
                    description="Enter the url of the feed"
                />
            </fieldset>
        </fields>
    </config>
</extension> 
```

作为提示，您可以通过将 XML 文件拖到浏览器窗口中来快速检查它是否有效，例如，您在上面发布的代码会导致：

![Chrome 中的损坏的 XML 错误](https://i.stack.imgur.com/AdYGj.png)

# xml - 在访问中创建目录

> ID：15958053
> 
> 赞同：1
> 
> 时间：2013-04-11T20:14:59.423
> 
> 标签：xml, ms-access

我正在使用 MS 访问根据我的表数据输出一些 XML 文件。

为了实现这一点，如果目录不存在，我需要我的脚本来创建目录。

该目录应该基于表中的一个字段。现在它正在使用“类别”字段。

```
If Len(Dir("P:\" + rs!Category, vbDirectory)) = 0 Then
MkDir "P:\" + rs!Category
End If 
```

它似乎有效，但给了我一个错误。（运行时错误 13 类型不匹配）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T20:21:00.567

`Dir(Null, vbDirectory)`引发错误 13，*“类型不匹配”*。

调用时确保`rs!Category`不是 Null，`Dir()`因为`"P:\" + Null`会返回 Null。

# ssh - 如何通过 SSH 使用 Sublime

> ID：15958056
> 
> 赞同：245
> 
> 时间：2013-04-11T20:15:13.830
> 
> 标签：ssh, sublimetext2

当我通过 SSH 连接到我的工作服务器时，我正在尝试使用 Sublime Text 2 作为编辑器，但我很困惑。我发现这个[http://urbangiraffe.com/2011/08/13/remote-editing-with-sublime-text-2/](http://urbangiraffe.com/2011/08/13/remote-editing-with-sublime-text-2/)（在许多其他帖子中）看起来可能会有所帮助，但我不完全遵循它，特别是我应该在第 5 行中为远程变量输入什么值。我将“/Users/path/to/local/copy”设置为我的本地根目录，但我不知道这是否正确或者是否还有更多去做。有什么想法吗？我在 OSX10.8

* * *

## 回答 #1

> 赞同：167
> 
> 时间：2013-04-12T07:49:54.353

有以下三种方式：

*   使用 SFTP 插件（商业）[http://wbond.net/sublime_packages/sftp](http://wbond.net/sublime_packages/sftp) - 我个人推荐这个，因为在使用密码设置公共 SSH 密钥后，它是安全、简单且值得每一分钱[http://opensourcehacker.com/2012/ 10/24/ssh-key-and-passwordless-login-basics-for-developers/](http://opensourcehacker.com/2012/10/24/ssh-key-and-passwordless-login-basics-for-developers/)

*   使用注释中提到的`osxfuse`和将远程挂载为本地文件系统。`sshfs`这可能有点困难，具体取决于 OSX 版本和您对 UNIX 文件系统的技能。

*   将诸如 rmate 之类的东西组合在一起，它使用某种本地守护程序通过远程隧道进行文件编辑（非常困难，麻烦，但与 sudo 兼容） [http://blog.macromates.com/2011/mate-and-rmate/](http://blog.macromates.com/2011/mate-and-rmate/)

此外，理论上，您可以在远程服务器上安装 X11 并通过 VNC 或 X11 转发在那里运行 Sublime，但这样做没有意义。

* * *

## 回答 #2

> 赞同：104
> 
> 时间：2013-08-07T15:31:17.197

您可以使用受 TextMate 启发的[rsub](https://github.com/Drarok/rsub)`rmate`。从描述：

> Rsub 是 TextMate 2 的 Sublime Text 2 的“rmate”功能的实现，允许使用 SSH 端口转发/隧道在远程服务器上编辑文件。

这是一个关于如何正确设置它[的好教程。](http://log.liminastudio.com/writing/tutorials/sublime-tunnel-of-love-how-to-edit-remote-files-with-sublime-text-via-an-ssh-tunnel)

* * *

## 回答 #3

> 赞同：68
> 
> 时间：2013-10-24T23:44:33.730

我在 Windows 上使用了 4 种方法： Linux 上的**SFTP**、**WinSCP**、**Unison**和**Sublime Text，通过 SSH 到 Windows 的 X11 转发**（是的，你可以在没有混乱的配置和使用免费工具的情况下做到这一点）。

如果您可以在 Linux 机器上安装软件，则第四种方法是最好的。

第四种方式：

**MobaXterm**

1.  在 Windows 上安装[MobaXterm](http://mobaxterm.mobatek.net/)
2.  从 MobaXterm SSH 到您的 Linux 机器
3.  在你的 linux 机器上，安装 Sublime Text 3。这是[在 Ubuntu 上的方法](https://askubuntu.com/a/227617/50830)
4.  在命令提示符下，使用 sublime 启动`subl`
5.  就是这样！你现在在 Linux 上运行了 sublime text，但它的窗口在你的 Windows 桌面上运行。这是可能的，因为 MobaXterm 为您处理通过 SSH 的 X11 转发，因此您不必做任何时髦的事情来让它运行。可能会有一点延迟，但您的文件永远不会不同步，因为您正在 Linux 机器上编辑它们。

注意：在调用 subl 时，如果它抱怨某个库 - 确保安装它们以成功从 mobaxterm 调用 sublimetext。

如果你不能在你的 Linux 机器上安装软件，最好的是 Unison。为什么？

*   免费
*   它很快
*   它是可靠的，不在乎你使用哪个编辑器
*   您可以创建自定义忽略列表

**SFTP**

设置：安装[SFTP](http://wbond.net/sublime_packages/sftp) Sublime Text 包。此软件包需要许可证。

1.  新建一个文件夹
2.  将其作为 Sublime Text 项目打开。
3.  在边栏中，右键单击文件夹并选择 Map Remote。
4.  编辑 sftp-config.json 文件
5.  右键单击步骤 1 中的文件夹选择下载。
6.  在当地工作。

在 sftp-config 中，我通常设置：

```
"upload_on_save": true,
"sync_down_on_open": true, 
```

除了机器的 SSH 终端外，这还为我提供了相当无缝的远程编辑体验。

**WinSCP**

1.  安装并运行[WinSCP](http://winscp.net/eng/index.php)
2.  转到首选项 (Ctrl+Alt+P) 并单击传输，然后单击添加。命名预设。
3.  将传输模式设置为二进制（您不需要行转换）
4.  将文件修改设置为“无更改”
5.  单击“文件掩码”旁边的“编辑”按钮并设置包含和排除文件和文件夹（当您存在 .git/.svn 文件夹或想要排除构建产品同步时很有用）。
6.  点击确定
7.  连接到您的远程服务器并导航到感兴趣的文件夹
8.  在本地计算机上选择一个空文件夹。
9.  选择您新创建的传输设置预设。
10.  最后，按 Ctrl+U（命令 > 保持远程目录为最新）并确保选中“启动时同步”和“更新子目录”。

从那时起，WinSCP 将使您的更改保持同步。

使用 SublimeText 在本地文件夹中工作。只需确保将 Sublime Text 设置为从正在编辑的文件中猜测行尾。

**齐声**

我发现如果源代码树很大（大约几百 MB，层次结构很深），那么上面描述的 WinSCP 方法可能会有点慢。[使用Unison](http://www.cis.upenn.edu/~bcpierce/unison/)可以获得更好的性能。不利的一面是 Unison 不是自动的（您需要通过按键触发它）并且需要在您的 linux 机器上运行服务器组件。好处是传输速度非常快，非常可靠，并且忽略文件、文件夹和扩展名非常容易设置。

* * *

## 回答 #4

> 赞同：33
> 
> 时间：2013-08-30T17:35:15.440

作为@ubik 回答的后续行动，这里有三个简单的（一次性）步骤，可以让“subl”命令在您的远程服务器上运行：

1.  [**本地**]使用[Sublime 包管理器](https://sublime.wbond.net/installation)`rsub`在 Sublime Text 中安装包
2.  [**本地**] 执行以下 Bash 命令（这将建立一个[SSH 隧道](http://en.wikipedia.org/wiki/Tunneling_protocol#Secure_shell_tunneling)，这是 rsub 的秘诀）：

    ```
    printf "Host *\n    RemoteForward 52698 127.0.0.1:52698" >> ~/.ssh/config 
    ```

3.  [**服务器**] 在远程服务器上执行以下 Bash 命令（这将安装 'subl' shell 命令）：

    ```
    sudo wget -O /usr/local/bin/subl https://raw.github.com/aurora/rmate/master/rmate; sudo chmod +x /usr/local/bin/subl 
    ```

瞧！**你现在通过 SSH 使用 Sublime Text。**

您可以使用类似的东西从服务器打开 Sublime Text 中的示例文件`subl ~/test.txt`

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2014-05-12T18:42:21.577

我在 MacOS 上，对我来说最方便的方法是使用[**Cyber​​Duck**](https://cyberduck.io/)，它是免费的（也适用于 Windows）。您可以连接到远程 SSH 文件系统并使用本地编辑器编辑文件。Cyber​​Duck 所做的是将文件下载到本地操作系统上的临时位置，然后使用编辑器打开它。保存文件后，Cyber​​Duck 会自动将其上传到您的远程系统。就好像您正在使用本地编辑器编辑远程文件一样透明。Cyber​​duck 的开发人员还制作了用于挂载远程文件系统的[**MountainDuck 。**](https://mountainduck.io/)

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2013-11-03T15:34:50.033

你可以试试我一直在研究的东西，叫做' [xeno](https://xeno.io) '。它将允许您通过 SSH 连接在 Sublime Text（或任何本地编辑器）中打开文件/文件夹，并自动将更改同步到远程机器。它应该适用于几乎所有的 POSIX 系统（我自己在 OS X 上使用它来连接 Linux 机器并在 Sublime Text 中编辑文件）。它是免费和开源的。我希望得到一些反馈。

更多信息：它基本上是一个用 Python 编写的 Git/SSH 混搭，允许您在本地编辑器中编辑远程机器上的文件和文件夹。你不需要配置内核模块，不需要持久连接，这一切都是自动的，并且不会干扰现有的源代码控制，因为它使用了工作树之外的 Git 存储库。此外，由于它是基于 Git 构建的，因此速度非常快，并且支持自动合并两端可能会发生变化的文件，这与 SSHFS/SFTP 不同，后者只会破坏任何具有较旧时间戳的文件。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2014-12-30T01:48:38.817

我知道这已经很老了，但我有一个非常酷的方法值得分享。

[Conemu](https://sourceforge.net/projects/conemu/ "科内穆")和[WinSCP](https://sourceforge.net/projects/winscp/)需要什么。这些是简单的说明

1.  打开 WinSCP.exe 并登录到我想要的远程服务器（我
    发现在附加之前登录很重要 ... ）。

2.  在 WinSCP 的首选项 - 两个设置更改。选择 Explorer 类型的界面而不是 Commander - 这样您就看不到本地文件。除非你想（但这似乎很糟糕）。将 Sublime 设置为默认编辑器。

3.  打开 ConEmu，右键单击选项卡栏并选择选项`Attach to...`。将打开一个对话框，其中包含您正在运行的应用程序。选择，WinSCP 并选择确定。ConEmu 现在将有一个打开的选项卡，其中 WinSCP 显示您的远程文件。

4.  右键单击 WinSCP 选项卡并选择`New console...`. 当对话框打开时，输入系统上 Sublime 可执行文件的路径。在您按下 之前，在显示选择单选按钮并设置百分比`Start`的框中。我通常选择 75%，但您可以根据自己的喜好自定义，以后可以更改。`New console split``to right`

    5.  现在您将在 WinSCP 右侧运行的同一窗口中看到 Sublime。在 Sublime 中，从 View 菜单中选择`Sidebar->Hide Sidebar`，然后 bam，您现在拥有与本地完全相同的远程文件 - 当然有一些注意事项是远程编辑任何内容。不过，WinSCP 的速度很快。

我有两台显示器 - 左显示器显示 Chrome 浏览器，右显示器显示代码编辑器。同样在 中`ConEmu`，我创建了另一个选项卡并 ssh 进入我正在处理的站点，因此我可以执行诸如运行`gulp`或`grunt`远程操作之类的操作，还可以从命令行操作文件。大力加快发展。

这是一个屏幕截图：

![设置屏幕截图](https://i.stack.imgur.com/1ZMpd.png)

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2015-08-28T18:57:04.513

您可以使用 sftp 将远程目录挂载到您的位置计算机上，然后像往常一样使用 Sublime 文本打开文件。

要使用 sftp 挂载远程目录，请在 Linux 文件管理器中输入以下内容；

```
sftp://user@remote_box.com:22/home/user/code_directory 
```

根据您的互联网速度，它可能看起来很慢。但这对我有用。

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2016-05-02T18:31:25.020

这是本地编辑文件的最简单方法，这些文件位于您之前已将 ssh 设置为远程 IP 的远程主机上

```
# issue on local box

sudo apt-get install sshfs   # on local host install sshfs ( linux )

# on local box create secure mount of remote directory

export REMOTE_IP=107.170.58.249 # remote host IP

sshfs myremoteuserid@${REMOTE_IP}:/your/remote/dir  /your/local/dir # for example 
```

完毕 ！！！

现在在本地主机上开始编辑文件...当您在本地列出目录时，它可能不会列出任何内容，直到您 cd 进入子目录或列出特定文件...延迟加载...这不会影响编辑文件

```
subl /your/local/dir/magnum_opus.go # local file edit using sublime text 
```

所以上面实际上是在编辑远程文件

```
/your/remote/dir/magnum_opus.go  # remote file on box $REMOTE_IP 
```

[对于 OSX 或 Windows，请参阅 Digital Ocean 上好心人的这句话](https://www.digitalocean.com/community/tutorials/how-to-use-sshfs-to-mount-remote-file-systems-over-ssh)

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2014-10-31T19:57:31.380

另一个类似于 osxfuse 的 mac 解决方案是只使用 Panic Software 的 Transmit FTP 客户端，它允许您将远程文件夹挂载为本地磁盘。它支持SFTP，非常安全。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2014-05-31T17:18:42.750

我一直在从事一个名为[GiySync](https://github.com/ClockworkNet/GitSync)的项目。它仍然需要一些工作，但它是开源的，我已经每天使用它几年了。我还在开发一个名为[GitSyncApp的原生 OS X 版本](https://github.com/jachin/GitSyncApp)

现在它只是 OS X，但它应该很容易添加对 Linux 的支持，也可能是 Windows。

它通过监视文件系统事件来工作，它使用[git](http://git-scm.com/)来同步本地机器和服务器上的项目文件夹。

我尝试了其他解决方案，如 osx fuse、Expand Drive、Transmit、几个使用 rsync 的解决方案等。它们都适用于小型项目，但如果您使用大量代码，它们对我不起作用。

许多文件系统选项都进行缓存以提高性能，这很好，直到不是。就像您正在与其他人一起工作并且其他人更改服务器上的文件一样。

如果我在一个不稳定或缓慢的网络上我最终会得到空文件，我也会遇到问题。或者文件没有​​同步，然后缓存变得很奇怪；希望你最近承诺。使用 git 解决了这个问题，因为它检查每个提交的完整性。

两个奖励功能：

1.  每次保存都会有一个提交。它不是超级有用，但如果你必须及时回到过去，你可以。
2.  它适用于任何文本编辑器。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-03-03T05:06:25.130

根据您的具体需求，您可以考虑使用 BitTorrent Sync。在您的家用 PC 和工作 PC 上创建一个共享文件夹。在您的家用 PC 上编辑文件（使用 Sublime 或任何您喜欢的工具），它们会在您保存时自动同步。BitTorrent Sync 不依赖于存储文件的中央服务器（例如 Dropbox 等），因此理论上您应该清楚由于第三方存储敏感信息而导致的任何问题。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-01-10T08:58:44.080

一个非常适合我的解决方案 - 在 Mac 上进行本地编辑，并让文件自动同步到远程机器

1.  确保您对远程计算机具有无密码登录。如果没有，请按照以下步骤[操作 http://osxdaily.com/2012/05/25/how-to-set-up-a-password-less-ssh-login/](http://osxdaily.com/2012/05/25/how-to-set-up-a-password-less-ssh-login/)

2.  在 ~/Library/LaunchAgents/filesynchronizer.plist 中创建一个文件，内容如下：

    `<?xml version="1.0" encoding="UTF-8"?> <!DOCTYPE plist PUBLIC "-//Apple Computer//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"> <plist version="1.0"> <dict> <key>Label</key> <string>filesynchronizer</string> <key>ProgramArguments</key> <array> <string>/usr/bin/rsync</string> <string>-avz</string> <string>/Users/USERNAME/SyncDirectory</string> <string>USERNAME@REMOTEMACHINE:~</string> </array> <key>WatchPaths</key> <array> <string>/Users/USERNAME/SyncDirectory</string> </array> </dict> </plist>`

3.  在终端窗口中运行

    `launchctl load ~/Library/LaunchAgents/filesynchronizer.plist`

4.  就是这样。对 ~/SyncDirectory 中任何文件的任何更改都将同步到远程计算机上的 ~/SyncDirectory。本地更改将覆盖任何远程更改。

这将创建一个监控 SyncDirectory 的已启动作业，并且每当发生任何更改时，都会运行 rsync 以将目录同步到远程计算机。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-02-14T07:47:02.013

[lsyncd](https://github.com/axkibe/lsyncd)似乎是 sshfs 方法的不错替代方案。如果您使用“-delay 0”，它会实时工作。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-05-06T20:42:59.590

[**使用 FileZilla**](https://filezilla-project.org/)

这适用于 Mac 和 Windows 用户（我在 Mac 上使用）。多年来，我使用了几个列出的答案，发现[FileZilla](https://filezilla-project.org/)在我可以通过 SSH 访问的远程主机上编辑文件时非常适合我的需求。设置也很快。

*   我配置了一个新的服务器连接
*   连接到服务器
*   右键单击我要编辑的文件并选择`View/Edit`.

> 这会打开我的默认编辑器（Sublime），但它可以与您安装的任何编辑器一起使用。

*   保存文件后，Filezilla 会自动提示我询问是否要“将此文件上传回服务器”，我单击“是”，然后它会更新。

# jquery - html表内的多个Jquery倒计时

> ID：15958057
> 
> 赞同：0
> 
> 时间：2013-04-11T20:15:13.830
> 
> 标签：jquery, html-table, jquery-countdown

我正在做一个项目，我需要在一个页面上显示几个拍卖的状态。每个项目都有不同的结束日期。我正在使用`cfquery`从数据库中提取数据，然后使用`cfoutput`构建表。那部分很好。那里没有问题。我的问题是，如何将[Keith Wood 的倒数计时器的](http://keith-wood.name/countdown.html)多个实例放在表中，以便每个项目都有倒计时？

这是我的表格标题：

```
<table id="large" class="tablesorter" border="0" CELLSPACING="1" CELLPADDING="0" width="50%">
<thead>
<tr class="tablesorter-headerRow">
    <th id="itemnum"  class="sorter-numeric">ItemNum</th>
    <th id="highbidder"  class="sorter-numeric">HighBidder</th>
    <th id="closenum"  class="sorter-numeric">Time Left</th>
    <th id="highbidprice"  class="sorter-numeric">HighBid</th>
</tr>
</thead>
<tbody>
<cfoutput>
<!--- Code builds the table body --->
<div class="countdown-styled clearfix" style="width:200px;"></div>
</cfoutput>
</tbody>
</table> 
```

我看过这些：1）[Jquery 多个倒计时](https://stackoverflow.com/questions/6968041/jquery-multiple-coundown)2）[使用 jquery 在同一页面上进行多个倒计时，](https://stackoverflow.com/questions/10883313/multiple-countdowns-on-same-page-with-jquery)但这些似乎包括每个页面的唯一行 ID，然后是其他一些 jquery 代码，或者只是对 id 进行硬编码。问题是我不知道最终版本会有多少项目。现在我有 35 个，但这不是恒定的，所以我不能这样做。有什么想法或帮助吗？真的很感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T20:32:15.513

这是他网站上的示例：

```
$(selector).countdown({until: new Date(2010, 12-1, 25)}); 
```

我假设你正在做这样的事情：

```
$('.countdown-styled').countdown({until: someDate}); 
```

所以想法是每个`$('.countdown-styled')`都有不同的日期，你只需要弄清楚如何为每个不同的元素指定日期。

```
$('.countdown-styled').each(function (idx) {
    var date = $(this).closest('tr').find('.date-label').text();

    $(this).countdown({ until: new Date(date) });
}); 
```

当然，我不知道从哪里获取日期，因为我看不到您的所有代码，并且您可能需要调整从显示中生成 javascript Date 对象的代码，但这应该可以帮助您入门。

# asp.net-mvc - 来自数据库的 ASP.NET MVC 下拉菜单，绑定

> ID：15958060
> 
> 赞同：0
> 
> 时间：2013-04-11T20:15:23.723
> 
> 标签：asp.net-mvc, data-binding, drop-down-menu

在我的 ASP.NET MVC 应用程序中，我希望在创建和编辑某些项目时为用户提供下拉菜单。我的数据库 dd_data 中有一个表，它看起来像这样：dd_name、dd_value、dd_type。

我想要显示它们的视图完全不相关。这些是用于保存语言、货币和星期几等项目的通用下拉列表，例如：“US Dollar”、“840”、“currency”

请注意，我的示例非常通用，表中实际上有自定义数据。

我应该为每个下拉菜单创建一个模型/控制器/视图吗？做这个的最好方式是什么？

我见过很多使用 DropDownForList 的例子，但是数据通常在模型中是可用的。在这种情况下，我想使用一个不相关的表来用预设填充我当前模型中的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T22:26:39.377

根据您的问题和您留下的附加评论，听起来您对 MVC 比较陌生，并且不熟悉实体框架？[在这种情况下，我强烈推荐http://www.asp.net/mvc](http://www.asp.net/mvc)上提供的免费 Pluralsight 视频 。

检查右侧边栏上的链接，听起来像“使用数据第 1 部分”是您所追求的。它们是很棒的入门书，可以让您快速启动并运行。看起来该视频已针对 VS2012 和 MVC4 进行了更新，但如果您仍在使用 VS2010 和 MVC3，他们仍然可以[在此处](http://www.asp.net/mvc/videos/mvc-3)获得旧版本。只需单击“Pluralsight 培训”链接。

也就是说，如果您安装了 VS 的 NuGet，您可以添加对 Entity Framework 的快速参考，并让代码优先上下文运行得非常快。如果您将连接字符串添加到您的 web.config 并将其命名为 ...“MyContext”，那么您可以在您的项目中添加类似这样的内容：

```
using System;
using System.Data.Entity;
using System.Data.Entity.Infrastructure;

namespace MyProject.CoolNameSpace
{
    public class MyContext : DbContext
    {
        public DbSet<dd_data> DataEntities { get; set; }
    }

    public class dd_data
    {
        public string dd_name { get; set; }
        public string dd_value { get; set; }
    }
} 
```

现在您将拥有一个工作环境。糟糕的是，这些类应该在它们的文件中，并带有适当的名称空间等......但你明白了。

从那里您可以将您的模型附加到您的视图，并回答您的原始问题，我将使用一个视图模型，将您的 dd_data 列表之一公开为属性，为所选属性提供单个 dd_value，然后使用 DropdownFor 创建您的选择列表。

视图模型：

```
public class MyViewModel
{
    public List<dd_data> MyDataList { get; set; }
    public string SelectedValue { get; set; }
} 
```

视图中的某处：

```
@Html.DropDownListFor(m => m.SelectedValue, new SelectList(Model.MyDataList, "dd_name", "dd_value")) 
```

希望这能让您入门，但请认真观看那些 PluralSight 视频，它们很棒。干杯。

# ms-access - 从 Access 2010 VBA 控制 Excel 工作簿

> ID：15958061
> 
> 赞同：1
> 
> 时间：2013-04-11T20:15:30.377
> 
> 标签：ms-access, vba, excel-2010

我的情况与以下帖子非常相似：

[访问查询到 excel 2010 以通过 vba 创建图形](https://stackoverflow.com/questions/9974250/access-query-to-excel-2010-to-create-a-graph-via-vba)

就我而言，我导出了一个表格，但我想对 Excel 文件做更多的事情。

首先，我想重命名 Excel 文件第一张表上的选项卡，因为它以时髦的表名导出。因此，我想将其更改为“MyTable as of (add a date variable here)”而不是“tblThisIsMyTable”

其次，我需要创建一个数据透视表并在另一个选项卡上制作数据透视表的副本，以更改其中一个参数。

我的问题是，我可以在 Excel 中录制一个宏来执行基本步骤并将该代码放入我的 Access VBA 中吗？

我希望我足够清楚，并感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T20:21:18.623

> 我的问题是，我可以在 Excel 中录制一个宏来执行基本步骤并将该代码放入我的 Access VBA 中吗？

是的，一点没错。

在 Access 中，您可能需要添加对 Microsoft Excel 库的引用。

然后，您需要对“记录的”宏进行一些更改，以便它创建 Excel.Application 的新实例，并打开所需的文件和工作表。例如，

```
Sub OpenExcel()
Dim xlApp as Excel.Application
Dim xlWB as Excel.Workbook
Dim xlSh as Excel.Worksheet

Set xlApp = New Excel.Application
Set xlWB = xlApp.Workbooks.Open("C:\Your filename.xlsx") '<modify as needed
Set xlSH = xlWB.Sheets("Sheet Name") '<modify as needed

'You can paste the recorded macro in here
'
'
'
'
'

xlWB.Save
xlWB.Close
xlApp.Quit
Set xlApp = Nothing

End Sub 
```

# sql - 如何按日期排序但对某个列值SQL进行分组

> ID：15958066
> 
> 赞同：3
> 
> 时间：2013-04-11T20:15:47.503
> 
> 标签：sql, sqlite, sorting, sql-order-by

我有一张看起来像这样的桌子。

```
my_id |    date
-------------------  
  1   | 2013-04-01
  1   | 2013-04-02
  2   | 2013-04-03
  1   | 2013-04-04
  3   | 2013-04-05
  2   | 2013-04-06 
```

我想要一个给出这个结果的 SQL 查询。

```
my_id |    date
-------------------  
  2   | 2013-04-06
  2   | 2013-04-03
  3   | 2013-04-05
  1   | 2013-04-04
  1   | 2013-04-02
  1   | 2013-04-01 
```

所以我希望所有具有相同 my_id 的人都以日期降序排列。并且 my_id 的组应根据组中的最新日期按日期降序排序。

这就像您可以说的线程对话，my_id 是对话 ID，而日期是该对话的帖子日期。因此，当在列表中显示时，与最新帖子的对话应该位于顶部。

后续问题如果 my_id 为 NULL，则不应将它们组合在一起，但仍按日期排序。例如，如果他们不是对话的一部分，就会出现这种情况。

```
my_id |    date
-------------------  
  1   | 2013-04-01
  1   | 2013-04-02
  2   | 2013-04-03
  1   | 2013-04-04
 NULL | 2013-04-05
  2   | 2013-04-06
 NULL | 2013-04-07 
```

上面的表格将是这样的

```
my_id |    date
-------------------  
 NUll | 2013-04-07
  2   | 2013-04-06
  2   | 2013-04-03
 NULL | 2013-04-05
  1   | 2013-04-04
  1   | 2013-04-02
  1   | 2013-04-01 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T20:23:52.137

尝试以下操作：

```
SELECT A.my_id, A.YourDate
FROM YourTable A
INNER JOIN (SELECT my_id, MAX(YourDate) MaxDate
            FROM YourTable
            GROUP BY my_id) B
    ON A.my_id = B.my_id
ORDER BY B.MaxDate DESC, A.YourDate DESC 
```

**更新**

不确定这是否是您想要的`NULL`值，但无论如何：

```
SELECT A.my_id, A.YourDate
FROM YourTable A
LEFT JOIN ( SELECT my_id, MAX(YourDate) MaxDate
            FROM YourTable
            WHERE my_id IS NOT NULL
            GROUP BY my_id) B
    ON A.my_id = B.my_id
ORDER BY COALESCE(B.MaxDate,A.YourDate) DESC, A.YourDate DESC 
```

# mysql - 将最大数量的行插入另一个表查询

> ID：15958076
> 
> 赞同：0
> 
> 时间：2013-04-11T20:16:18.600
> 
> 标签：mysql, sql, relational-database

我有三张桌子。我需要在人员培训表中插入接近最大数量的人员。人员培训表具有所需的最大人数。

因此，例如我有 30 人，所需数量为 27 ，应将 27 人插入人员培训表

同样，如果需要的人数已经分配了 15 和 15，我不需要插入任何东西。

这可以实现吗

```
Person
Pk personId
firstName
lastName

Person_Training
PK FK personId
PK FK trainingId
signed   

Training
T trainingId
Location
personsNeeded
date 
```

我试过这个但无济于事

```
INSERT INTO Person_Training(personId,trainingId)
SELECT personId , trainingId
  FROM Person , Training
 WHERE Training.date = '9-10-2013'
Having COUNT(Person.personId) < Training.personsNeeded 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T20:31:07.760

看起来你所缺少的只是所有表的连接。

```
from Person 
inner join person_Training on person_Training.personID = Person.PersonID
inner join Training on Training.trainingID = Person_Training.trainingID 
```

不要忘记所有选定字段上的 group by 子句。group by 在Having 子句之前

```
Group by Person.personID, Training.trainingID 
```

# sql-server-2008-r2 - 将俄语字符插入表格

> ID：15958079
> 
> 赞同：0
> 
> 时间：2013-04-11T20:16:45.900
> 
> 标签：sql-server-2008-r2

当我尝试将俄语字符插入表格时，我得到了相同的结果。结果总是

```
????????? – ???????? ?????????? ?????? ???? 
```

我试过`nvarchar`了，但还是一样。`Varchar`与 和 的排序规则`SQL_Latin1_General_CP1251_CS_AS`也`Cyrillic_General_CI_AS`给出相同的结果。如何处理？我试图在 Management Studio 上插入；手动它可以工作，但是当涉及到实体框架时它不会。

`nvarchar`顺便说一句，出于某些原因，我不想要！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T09:51:20.423

刚刚遇到同样的问题，并且正在寻找一种方法来更改查询字符串以包含 charset=utf8 和各种解决方法。

最后的问题是 EDMX 模型是在更改为 nvarchar 之前创建的。

它不会神奇地更新模型，因此如果您的 EDMX 文件是在对数据库进行更改之前生成的 nvarchar，您必须重新生成它。

在那个简单的改变之后，？？？？？？成为привет 没有任何问题。

![在此处输入图像描述](https://i.stack.imgur.com/RJKhh.png)

# plone - 重氮 CSS 更改未反映在网站上

> ID：15958088
> 
> 赞同：1
> 
> 时间：2013-04-11T20:17:06.330
> 
> 标签：plone, diazo

我有一个正在构建 Diazo 主题的 Plone 服务器。主题存在于通过 buildout 设置的资源目录中。主题显示在现场的 Diazo 控制面板中，可以启用并且所有工作都按预期进行。但是，当我对文件系统上的 CSS 进行任何更改时，这些更改不会在站点上生效。

这些站点使用开发 URL 设置（指向始终处于开发模式的客户端）。此服务器上站点的生产 URL 指向 Varnish/HaProxy，在未处于开发模式的其他客户端之间进行负载平衡。

CSS 更改在开发 URL 上立即可用（绕过 varnish/haproxy）。我尝试在开发和生产 URL 中的 ZMI 中的 portal_css 上单击“保存”我尝试通过 Diazo 控制面板重新安装主题。我还重新启动了集群。

我的猜测是这对我们来说是一个 plone.app.caching 问题，但我不确定。

查看响应标头，我看到有问题的 CSS 文档的以下内容（我相信相关位）：

Cache-Control max-age=86400, proxy-revalidate, public Date Thu, 11 Apr 2013 19:54:33 GMT Expires Fri, 12 Apr 2013 19:33:13 GMT X-Cache-Operation plone.app.caching.strongCaching X-Cache-Rule plone.resource

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T20:52:01.533

当 Plone 处于前台（开发）模式时，它会监视模板和其他文件系统资源的变化，这些都是单独提供的。当它不处于开发模式时，它会合并（烹饪）CSS 和 JS 资源以实现高效交付。这仅在启动时和资源注册表项更改时完成。

对于生产系统，您需要重新启动 Zope/Plone 以注册文件系统资源的更改。您*可以*通过强制资源注册表重新处理资源来查看您的更改。为此，请访问 ZMI 中的 portal_css 并重新提交资源列表表单。

# macos - 使用 applescript 发送群组 iMessage

> ID：15958090
> 
> 赞同：9
> 
> 时间：2013-04-11T20:17:07.150
> 
> 标签：macos, applescript, messages, imessage, osascript

有谁知道如何使用 applescript/osascript 发送群组消息？我尝试了很多东西，但似乎没有任何效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-02-09T22:35:17.447

[![来自 iMessages 字典](https://i.stack.imgur.com/ltVr8.png)](https://i.stack.imgur.com/ltVr8.png)

如果您查看 iMessages（以前的 iChat）字典，您会发现您只能将消息发送到 a`buddy`或 a `text chat`。没有可用的“组”。但是，如果你有一个小组，比如一个人列表，你可以将其与可用的人进行比较，`buddies`然后发送给每个人，就像这篇[文章](https://stackoverflow.com/questions/9325150/how-to-send-a-message-using-ichat-and-applescript)中建议的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-02T21:37:23.573

# ios - Objective-C结构属性的键值编码

> ID：15958095
> 
> 赞同：3
> 
> 时间：2013-04-11T20:17:19.023
> 
> 标签：ios, objective-c, macos, key-value-coding

根据 Apple 的文档[Key-Value Coding Programming Guide](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/KeyValueCoding/Articles/DataTypes.html)，您可以在结构属性上调用 valueForKey: 和 setValue:forKey:，它们应该自动包装在 NSValue 对象中。我发现当我在 NSDecimal 上进行此调用时，出现以下错误：

`-[NSInvocation getArgument:atIndex:]: struct with unknown contents found while getting argument at index -1`

任何人都可以阐明这应该如何完成？或者这种情况下KVO是否损坏......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T21:36:14.843

似乎键值编码不适用于包含*位字段*的结构。所以对于这个测试类

```
typedef struct { int a; int b; } mystruct1;
typedef struct { int a:4; int b:4; } mystruct2;

@interface MyClass : NSObject
@property (nonatomic) mystruct1 s1;
@property (nonatomic) mystruct2 s2;  // struct with bit fields
@end 
```

以下工作，并返回一个`NSValue`对象：

```
MyClass *o = [[MyClass alloc] init];
mystruct1 s1 = { 4, 5 };
o.s1 = s1;
NSValue *v1 = [o valueForKey:@"s1"]; 
```

但是与包含位字段的结构相同的代码会崩溃，并显示与您的问题完全相同的消息：

```
mystruct2 s2 = { 4, 5 };
o.s2 = s2;
NSValue *v2 = [o valueForKey:@"s2"]; // --> NSInvalidArgumentException 
```

Since `NSDecimal` contains bit fields, this explains the problem.

# javascript - 在 JavaScript 中传递 this 指针的最佳方法是什么？

> ID：15958096
> 
> 赞同：4
> 
> 时间：2013-04-11T20:17:31.667
> 
> 标签：javascript

假设我在 JavaScript 中有两个函数，我想将`this`指针从一个传递到另一个。我知道有两种方法可以做到这一点（如下所示）。哪一个是最佳实践？

**选项1：**

```
function a() {
    b(this);
}

function b(elem) {
    alert(elem);
} 
```

**选项 2：**

```
function a() {
    b.call(this);
}

function b() {
    alert(this);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-11T20:19:22.630

这并没有回答问题，而是更改之前问题的标题：
**JavaScript 中的 function.call(this) 和 function(this) 有什么区别？**

* * *

使用设置被调用函数`call`的上下文（ ）：`this`

```
function foo() {
    console.log(this);
}  

foo(); // window
foo.call({}); // {} 
```

上面的示例显示了使用非严格模式（在浏览器环境中）的默认上下文`window`。

非严格模式是默认模式。仅部分浏览器支持严格模式。

如果函数是对象的方法，则上下文就是对象本身：

```
var obj = {
    foo: function () {
        console.log(this);
    }
};

obj.foo(); // obj
obj.foo.call({}); // {} 
```

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T20:42:54.217

一般来说，实际上没有最佳实践，只有指导方针。这完全取决于您编码的方式。就个人而言，我会使用第一种形式，它更面向功能而不是面向对象，并且您避免了额外的操作——更改上下文对象——另外，你不会依赖于上下文对象本身。这意味着，如果您需要在`b`某个地方重用，您没有时间来更改它的上下文对象。

我会给你一个实际的例子。假设这`b`是一个将 的 设置为的`style.display`函数。让我们称之为：`element``none``hide`

```
function hide(element) {
    element.style.display = "none";
} 
```

你可以像这样使用它：

```
hide(document.getElementById("foo")) 
```

到目前为止，一切都很好。但是如果你想隐藏列表的所有元素呢？

```
// this is used to have an array of element for the example,
// because NodeList are not Array
var slice = Function.call.bind(Array.prototype.slice);
var nodes = slice(document.getElementsByTagName("div"));

nodes.forEach(hide); 
```

你简单得过`hide`。那是因为您传递给的回调`forEach`称为将数组的每个值作为第一个参数传递。

但这还没有结束。假设您不想隐藏列表中的所有 div，而只想隐藏列表中包含文本“foo”的 div。

```
function hasFoo(element) {
    return element.textContent.indexOf("foo") > -1
} 
```

然后：

```
nodes.filter(hasFoo).forEach(hide); 
```

等等。如果您决定将函数的“主题”作为第一个参数传递，您可以真正利用 JavaScript 的函数式编程方面和方法。

在这里你可以找到 ES5 方法的文档，比如[filter](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)和[forEach](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T20:23:41.870

> 我知道有两种方法可以做到这一点（如下所示）。

如您所见，两者都有效:-)

> 哪一个是最佳实践？

这取决于。哪个更适合您的代码结构？

如果您正在编写非常面向对象的代码，并且两个函数都编写在一个社区中，您希望所有内容都是一个方法和`this`关键字，以在任何地方引用一个对象实例，那么您不应该破坏它。

如果没有，为简单起见，您应该选择选项#1。此外，您可能需要考虑其他形式参数`b`- 如果对象引用与它们不一致，选项 #2 可能会更好。

# c++ - QT：发出信号时如何创建新按钮

> ID：15958097
> 
> 赞同：0
> 
> 时间：2013-04-11T20:17:57.077
> 
> 标签：c++, qt, signals, slot, qpushbutton

每当从我的 Gui 上的特定 PushButton 发出 a时，我想创建一个`SLOT()`在我的 Gui（在同一帧上）上创建 QPushButton （或 QLineEdit）小部件。`SIGNAL(clicked())`例如：当我按下“退出”时，同一帧上会出现一个新的“谢谢”按钮。

那么，如何使用 c++ 代码而不是 Qt-GUI 工具创建一个新的 PushButton 呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T20:38:46.063

当然，您可以在没有所见即所得工具（例如 QtDesinger）的情况下创建按钮等小部件

在“退出”按钮的槽内写下这段代码：

```
void ThisWindowClass::exitClicked()
{
  // ...
  QPushButton *thanksButton = new QPushButton(this /*parent widget*/);
  connect(thanksButton, SIGNAL(clicked(bool)), this, SLOT(thanksClicked(bool)));
  // ...
} 
```

而且你必须有一个名为的插槽方法`thanksClicked`：

```
void ThisWindowClass::thanksClicked(bool checked)
{
 // Do something
} 
```

# iphone - 如何在同一个 ViewController（在情节提要上创建）上的两个视图（在 xib 上创建）之间切换？

> ID：15958100
> 
> 赞同：0
> 
> 时间：2013-04-11T20:18:26.627
> 
> 标签：iphone, ios, objective-c

我正在尝试做一些不同的事情，混合 XIB 和 STORYBOARD。我的主要目标是为我的应用程序创建一个复杂的故事板，并使用 XIB 来查看比 iPhone 屏幕更大的视图，例如 iPhone 上的设置应用程序。

作为一个简单的例子，我使用 xib 接口创建了两个类视图 view1 和 view2。每个人都做简单的任务，比如显示许多标签“Hello World - View 1”和“Hello World - View 2”，直到覆盖正常 iPhone 屏幕面积的两倍。为此，XIB 上的视图被设置为“FreeForm”，并沿视图放置了 6 个标签。文件 .h 和 .m 写成：

查看.h

```
#import <UIKit/UIKit.h>

@interface View1 : UIView {
    UIView *view;

    UILabel *lab1;
    UILabel *lab2;
    UILabel *lab3;
    UILabel *lab4;
    UILabel *lab5;
    UILabel *lab6;
}
@property (nonatomic, retain) IBOutlet UIView *view;
@property (retain, nonatomic) IBOutlet UILabel *lab1;
@property (retain, nonatomic) IBOutlet UILabel *lab2;
@property (retain, nonatomic) IBOutlet UILabel *lab3;
@property (retain, nonatomic) IBOutlet UILabel *lab4;
@property (retain, nonatomic) IBOutlet UILabel *lab5;
@property (retain, nonatomic) IBOutlet UILabel *lab6;
@end 
```

查看.m

```
#import "View1.h"

@implementation View1
@synthesize view, lab1, lab2, lab3, lab4, lab5, lab6;

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
        [[NSBundle mainBundle] loadNibNamed:@"View1" owner:self options:nil];
        [self addSubview:self.view];
    }
    return self;
}
- (void) awakeFromNib
{
    [super awakeFromNib];    
    [self addSubview:self.view];
}
@end 
```

之后，我使用 Storyboard 创建了一个名为 myViewController 的 ViewController，并在视图中放置了一个滚动视图。.h 和 .m 的代码如下所示：

视图控制器.h

```
#import <UIKit/UIKit.h>
@class View1, View2;

@interface ViewController : UIViewController {
    View1 *viewXIB1;
    View2 *viewXIB2;
}
@property (weak, nonatomic) IBOutlet UIScrollView *myScrollView;
- (IBAction)changeView1:(id)sender;
- (IBAction)changeView2:(id)sender;
@end 
```

视图控制器.m

```
#import "ViewController.h"
#import "View1.h"
#import "View2.h"

@interface ViewController ()
@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    self.myScrollView.contentSize=CGSizeMake(320,755);    
    viewXIB1 = [[View1 alloc] initWithFrame:CGRectMake(0, 0, 320, 755)];
    viewXIB2 = [[View2 alloc] initWithFrame:CGRectMake(0, 0, 320, 755)];
    [self.myScrollView addSubview:viewXIB1];  
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
}

- (IBAction)changeView1:(id)sender {
    [self.myScrollView addSubview:viewXIB1];
    [self.myScrollView setNeedsLayout];    
    [self.view reloadInputViews];
    [self reloadInputViews];   
}

- (IBAction)changeView2:(id)sender {
    [self.myScrollView addSubview:viewXIB2];
    [self.myScrollView setNeedsLayout];
}
@end 
```

问题是代码上没有警告或错误，但不起作用。这段代码有什么问题？？？有人能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T20:30:06.693

一件事是错误的，您永远不会删除任何视图。代替

第一个`IBAction`为

```
- (IBAction)changeView1:(id)sender {
    if (![self.myScrollView.subviews containsObject:viewXIB1]) {
        [viewXIB2 removeFromSuperView];
        [self.myScrollView addSubview:viewXIB1];
        [self.myScrollView setNeedsLayout];    
        [self.view reloadInputViews];
        [self reloadInputViews];
    }
} 
```

第二个是模拟的`IBAction`

```
- (IBAction)changeView2:(id)sender {
    if (![self.myScrollView.subviews containsObject:viewXIB2]) {
        [viewXIB1 removeFromSuperView];
        [self.myScrollView addSubview:viewXIB2];
        [self.myScrollView setNeedsLayout];
    }
} 
```

此外，您的自定义视图的初始化代码应该包含类似的内容。-

```
UIView *newView = [[[NSBundle mainBundle] loadNibNamed:@"View1" owner:self options:nil] objectAtIndex:0];
[self.view addSubview:newView]; 
```

# magento - catalogrule_product_price 表何时更新与 Magento 中保存的产品相关的信息？

> ID：15958107
> 
> 赞同：1
> 
> 时间：2013-04-11T20:18:34.570
> 
> 标签：magento, events, observers

每次保存产品时，我都会尝试记录一些简单的数据，例如价格和目录规则价格。我已经设置了我的模块来处理这个`catalog_product_save_after`事件，除了目录规则价格将价格拉到保存之前，一切似乎都工作正常。

为了进行测试，我尝试对`catalogrule_product_price`表进行直接 MySQL 查询，但根据我查询时的最后一次更改，其中的值似乎没有更新。保存后我直接检查 MySQL 并按预期更新。

我在 中找到了该`replace into`语句，但是当我尝试在我仍然获得旧的目录规则价格`Mage_CatalogRule_Model_Mysql4_Rule::_saveRuleProductPrices()`之后立即放置我的直接 sql 查询时。`$this->_getWriteAdapter()->query($query);`

谁能指出我正确的方向？

**从模块的 config.xml 的一部分...**

```
<adminhtml>
    <events>

        <catalog_product_save_after>
            <observers>
                <mycompany_productlog_observer>
                    <type>singleton</type>
                    <class>MyCompany_ProductLog_Model_Observer</class>
                    <method>catalog_product_save_after</method>
                </mycompany_productlog_observer>
            </observers>
        </catalog_product_save_after>

    </events>
</adminhtml> 
```

**来自 etc/modules/MyCompany_All.xml 的部分调用...**

```
<MyCompany_ProductLog>
    <active>true</active>
    <codePool>local</codePool>
    <depends>
        <Mage_CatalogRule />
    </depends>
</MyCompany_ProductLog> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T22:19:11.210

没关系，这原来是我用来从 SQL 中提取数据的旧代码的问题。当我更新我们的方法以正确查询时，一切都按预期工作。哎呀！

# javascript - 将字符串从 javascript 代码发布到服务器上的 ApiController

> ID：15958114
> 
> 赞同：3
> 
> 时间：2013-04-11T20:19:10.927
> 
> 标签：javascript, c#, asp.net-mvc, post

我开始使用 ASP.NET Web API。当我在控制器中获取我的实体时，我想知道序列化功能，如下所示：

```
public class EntitiesController : ApiController
{
    [Queryable]
    public IEnumerable<Entity> Get()
    {
        return m_repository.GetAll();
    }
    public HttpResponseMessage Post(Entity entity)
    {
        if (ModelState.IsValid)
        {
            m_repository.Post(entity);
            var response = Request.CreateResponse<Entity>(HttpStatusCode.Created, entity);
            return response;
        }
        return Request.CreateResponse(HttpStatusCode.BadRequest);
    }
} 
```

在 JavaScript 方面：

```
// create new entity.
$.post("api/entities", $(formElement).serialize(), "json")
    .done(function (newEntity) { self.contacts.push(newEntity); }); 
```

但我不需要实体。我想接收字符串。因此，我以以下方式更改了控制器：

```
public class EntitiesController : ApiController
{
    [Queryable]
    public IEnumerable<string> Get()
    {
        return m_repository.GetAll();
    }
    public HttpResponseMessage Post(string entity)
    {
        if (ModelState.IsValid)
        {
            m_repository.Post(entity);
            var response = Request.CreateResponse<Entity>(HttpStatusCode.Created, entity);
            return response;
        }
        return Request.CreateResponse(HttpStatusCode.BadRequest);
    }
} 
```

我尝试为[post 功能](http://api.jquery.com/jQuery.post/)`dataType`使用不同的( `"json"`, `"text"`, `"html"`) 。和不同的表示, , , . 但我总是在服务器端作为操作中的参数。`data``$(formElement).serialize()``"simple Text"``jsonObject``JSON.stringify(jsonObject)``null``entity``Post`

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T20:52:17.050

如果要将表单数据作为字符串发布，则需要做两件事：

默认情况下，Web API 会尝试从请求 URI中获取简单类型`int`，例如 等。`string`您需要使用`FromBody`属性告诉 Web API 从请求正文中读取值：

```
public HttpResponseMessage Post([FromBody]string entity)
{
   //...
} 
```

您需要使用空键发布您的值：

```
$.post("api/entities", { "": $(formElement).serialize() }, "json")
    .done(function (newEntity) { self.contacts.push(newEntity); }); 
```

您可以阅读有关此 Web.API 教程文章的更多信息：[发送 HTML 表单数据](http://www.asp.net/web-api/overview/working-with-http/sending-html-form-data,-part-1)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-11T20:23:38.590

您能否发布您与序列化一起使用的表单的 HTML？我猜您正在选择的特定元素中缺少 name 属性。

至于 AJAX 请求，我倾向于使用 Kyle Schaeffer 的“完美 ajax 请求”模板；它更具可读性并且允许更好的结果处理恕我直言，至少在旧版本的 jQuery 中。

```
$.ajax({
  type: 'POST',
  url: 'api/entities',
  data: { postVar1: 'theValue1', postVar2: 'theValue2' },
  beforeSend:function(){
  },
  success:function(data){
  },
  error:function(){
  }
}); 
```

参考： http: [//kyleschaeffer.com/development/the-perfect-jquery-ajax-request/](http://kyleschaeffer.com/development/the-perfect-jquery-ajax-request/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-11T20:53:17.707

尝试

```
$.ajax({
  type: 'POST',
  url: 'api/entities',
   traditional: true, 
```

......

# iphone - 如何触发 UISearchBar 中的取消按钮？

> ID：15958118
> 
> 赞同：48
> 
> 时间：2013-04-11T20:19:35.227
> 
> 标签：iphone, ios, uisearchbar

如何以编程方式触发 UISearchBar 中的取消按钮，就像您点击了取消按钮一样？

我在 UITableView 的顶部有一个 UISearchBar，搜索后，当有人选择一行时，我想以编程方式触发 UISearchBar 中的取消按钮？

**编辑：**没有用户交互。

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-04-11T20:42:21.000

对于使用搜索显示控制器的视图控制器，您可以设置

```
self.searchDisplayController.active = NO;
// or:
[self.searchDisplayController setActive:NO animated:YES]; 
```

关闭搜索界面。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2015-02-02T01:32:26.633

对于新的[UISearchController](https://developer.apple.com/library/prerelease/ios/documentation/UIKit/Reference/UISearchController/index.html)（2014 年与 iOS 8 一起推出），您可以调用：

```
[self.searchController setActive:FALSE]; 
```

或者

```
self.searchController.active = FALSE; 
```

（没有动画标志，我发现它总是动画。）

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2013-04-11T20:34:14.197

您需要实施`UISearchBarDelegate`. 完成后，使用：

```
- (void)searchBarCancelButtonClicked:(UISearchBar *)searchBar 
```

> 告诉代理点击了取消按钮。

然后使用：

```
[self searchBarCancelButtonClicked:yourSearchBar]; 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-10-22T12:08:51.490

至于iOS 8，`UISearchController`是用的，以编程方式实现取消按钮动作，使用：

```
[self.searchController setActive:NO]; 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-11-02T13:00:37.900

对于 Swift 4.2 版本，您可以编写如下代码：

```
searchController?.isActive = false 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-02-19T06:30:17.433

```
self.navigationItem.searchController?.isActive = false // above iOS 8.0
// or:    
self.searchDisplayController.active = NO; // was deprecated in iOS 8.0
// or:
[self.searchDisplayController setActive:NO animated:YES]; // Obejective-C 
```

这些是完成上述任务的一些变体

# ruby-on-rails - 在 Rails 中将对象的属性转换为数组

> ID：15958120
> 
> 赞同：0
> 
> 时间：2013-04-11T20:19:47.313
> 
> 标签：ruby-on-rails, ruby, arrays, forms, attributes

我的 Rails 应用程序中有一个表单，在表单中，有一个对应于 :mylist 的文本框，这是我的类 Catcher 的对象 @mycatcherobject 的一个属性，在表单中，人们会粘贴如下所示的内容：

FRI.9234.43.32340.pdf

NNY.6042.43.5523.pdf

LJN.9867.56.1659.pdf

提交表单后，我需要将粘贴到该文本框中的内容（即：mylist 现在的值）转换为数组。对于上面的示例，数组中将有三个元素（上面的每个项目一个）。

你知道怎么做吗？我不知道如何在任何地方将对象的属性值转换为数组。

我已经尝试过 %w(#{@mycatcherobject.mylist}) 之类的方法，但这不起作用。

我是 Rails 的新手，所以如果这看起来很明显，我很抱歉。您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T20:28:09.897

它作为 param[:name of the field] 出现在控制器中，您可以编写一个正则表达式来拆分字符串。如果元素由逗号或特殊字符分隔，您可以执行类似的操作

```
result = params[:list].split(",") 
```

# apache - 仅 Apache 确切网址

> ID：15958124
> 
> 赞同：0
> 
> 时间：2013-04-11T20:20:18.057
> 
> 标签：apache

我有以下 apache 配置：

```
 <VirtualHost *:80>

    ServerName someUrl

    DocumentRoot /usr/local/upload
 </VirtualHost> 
```

这可行，但可以访问所有内容。该目录中有图片。是否可以制作它，以便需要确切的 URL 才能访问？

例如：

```
 http://someUrl.com/image.jpg 
```

将允许您查看图像，但是：

```
 http://someUrl.com/ 
```

会给405。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T20:23:48.293

您需要禁用目录上的索引。您的配置将如下所示：

```
<VirtualHost *:80>

    ServerName someUrl

    DocumentRoot /usr/local/upload
    <Directory /usr/local/upload>
        Options -Indexes
    </Directory>
</VirtualHost> 
```

这将为您提供`403 Forbidden`目录请求的标准响应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T20:25:05.613

不知道为什么你想要一个“ *405 Method Not Allowed* ”错误，但一种方法是使用mod_rewrite的`R`标志：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L,R=405] 
```

# jsf - 复选框不会更新表中的呈现值

> ID：15958125
> 
> 赞同：0
> 
> 时间：2013-04-11T20:20:23.987
> 
> 标签：jsf, richfaces

所以这是它的瘦身。我的 selectOneMenu 上有一个渲染标签。我已经以各种方式尝试过，最后一个使用“@form”更新布尔复选框中的表单。我完全没有想法，已经工作了几天。我错过了什么，所以我可以根据复选框的选择来渲染/取消渲染？谢谢。

```
<rich:dataTable id="catalogview"  width="100%"  style="width: 100% !important"
    columnClasses="lcolumnCatalog,columnCatalog,columnCatalog,columnCatalog,columnCatalog,columnCatalog,columnCatalog,columnCatalog,columnCatalog,columnCatalog,columnCatalog,columnCatalog,columnCatalog,columnCatalog,columnCatalog,columnCatalog,columnCatalog,columnCatalog" 
    value="#{pcnAlerts.notifications}" var="pcn" rows="20"
    headerClass="headerCatalog" styleClass="table1" footerClass="footer_td" >
    <h:column>
        <h:selectBooleanCheckbox value="#{pcn.checked}" update="@form" >
            <f:ajax listener="#{pcnAlerts.selectItem}" render=":popupForm:popupPanelContents" />
        </h:selectBooleanCheckbox>
    </h:column>
    <h:column>
        <f:facet name="header">                             
            <h:outputText value="Status" />
        </f:facet>
        <h:outputText value="#{pcn.status}" />
        <h:selectOneMenu id="StatusMenu" value="#{pcnAlerts.newStatus}" rendered="#{pcn.checked}">
            <a4j:ajax update="StatusMenu"  listener="#{pcnAlerts.saveStatus()}" />
            <f:selectItem itemValue="" itemLabel="New" />
            <f:selectItem itemValue="Pending" itemLabel="Pending" />
            <f:selectItem itemValue="Complete" itemLabel="Complete" />
            <f:selectItem itemValue="Archive" itemLabel="Archive" />
            <f:selectItem itemValue="Disregard" itemLabel="Disregard" />
        </h:selectOneMenu>
    </h:column>
</rich:dataTable> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T20:31:08.063

您还必须更新`catalogview`才能在表格中呈现组件。另外，请确保您`<rich:dataTable>`在 a 内`<h:form>`：

```
<h:form id="frmCatalog">
    <rich:dataTable id="catalogview" value="#{pcnAlerts.notifications}" var="pcn">
        <h:column>
            <h:selectBooleanCheckbox value="#{pcn.checked}">
                <f:ajax listener="#{pcnAlerts.selectItem}"
                    render=":popupForm:popupPanelContents :frmCatalog:catalogview" />
            </h:selectBooleanCheckbox>
        </h:column>
    </rich:dataTable>
</h:form> 
```

# custom-action - 无法通过 RailsAdmin 自定义操作表单发送属性

> ID：15958127
> 
> 赞同：4
> 
> 时间：2013-04-11T20:20:26.800
> 
> 标签：custom-action, form-for, rails-admin

我正在尝试使用 Rails Admin 设置自定义裁剪操作。

我已设置操作，但在传递裁剪坐标以保存裁剪图像时遇到问题。我想在表单中传递“crop_x”等属性，但由于某种原因，它们没有被传递。也许我的表格设置错误？

这是我的表单代码：

```
 = form_for @object, method: :put, :url => crop_path(:model_name => @abstract_model.to_param, :id => @object.id) do |f|
      - %w[x y w h].each do |attribute|
        = f.text_field "crop_#{attribute}", id: "crop_#{attribute}"

      .form-actions
        = f.submit 'Crop Image', class: 'btn btn-primary' 
```

这是我的 Rails 管理员自定义裁剪操作：

```
 require 'rails_admin/config/actions'
    require 'rails_admin/config/actions/base'

    module RailsAdminCrop
    end

    module RailsAdmin
      module Config
        module Actions
          class Crop < RailsAdmin::Config::Actions::Base
            RailsAdmin::Config::Actions.register(self)

            register_instance_option :member? do
              true
            end

            register_instance_option :http_methods do
              [:get, :put]
            end

            register_instance_option :visible? do
              authorized? && (['Painting'].include? bindings[:abstract_model].model.to_s)
            end

            register_instance_option :bulkable? do
              false
            end

            register_instance_option :pjax? do
              true
            end

            register_instance_option :controller do
              Proc.new do
                if request.get? # show crop page
                  respond_to do |format|
                    format.html { render @action.template_name }
                    format.js   { render @action.template_name, :layout => false }
                  end
                elsif request.put? # Submit
                  Rails.logger.warn "\n=========================\n"
                  Rails.logger.warn @object.inspect

                  @object.image.recreate_versions!
                  flash[:notice] = "#{@object.title} successfully cropped."
                  redirect_to "/admin/#{@abstract_model.to_s.downcase}"
                end
              end
            end

            register_instance_option :link_icon do
              'icon-th-large'
            end

          end
        end
      end
    end 
```

这是我的 Rails 管理路由（它们似乎没有向我现有的任何操作添加路由，所以这些只是默认路由）：

```
 Routes for RailsAdmin::Engine:
        dashboard GET         /                                      rails_admin/main#dashboard
            index GET|POST    /:model_name(.:format)                 rails_admin/main#index
              new GET|POST    /:model_name/new(.:format)             rails_admin/main#new
           export GET|POST    /:model_name/export(.:format)          rails_admin/main#export
      bulk_delete POST|DELETE /:model_name/bulk_delete(.:format)     rails_admin/main#bulk_delete
    history_index GET         /:model_name/history(.:format)         rails_admin/main#history_index
      bulk_action POST        /:model_name/bulk_action(.:format)     rails_admin/main#bulk_action
             show GET         /:model_name/:id(.:format)             rails_admin/main#show
             edit GET|PUT     /:model_name/:id/edit(.:format)        rails_admin/main#edit
           delete GET|DELETE  /:model_name/:id/delete(.:format)      rails_admin/main#delete
     history_show GET         /:model_name/:id/history(.:format)     rails_admin/main#history_show
      show_in_app GET         /:model_name/:id/show_in_app(.:format) rails_admin/main#show_in_app 
```

# java - 从另一个 JFrame 刷新 Jlist

> ID：15958128
> 
> 赞同：0
> 
> 时间：2013-04-11T20:20:27.103
> 
> 标签：java, swing, jframe, jlist, defaultlistmodel

当我按下另一个 JFrame 中的按钮时，我想刷新一个 JList。

所以我有一个管理员工（添加、删除、更新）的 JFrame GuiBoss。当我按下按钮添加时，另一个 Jframe 打开，我创建了一个新员工。

//打开“add_form”，我在其中提供有关新员工的详细信息。

```
private void btnAddActionPerformed(java.awt.event.ActionEvent evt) {                                       
    GuiBoss gb = new GuiBoss(contrb,boss);
    Add_form af = new Add_form(gb,contrb,boss);
    af.setVisible(true);

} 
```

//使用添加的新员工刷新列表。

```
public void refresh(Employee e){
    System.out.println("I reach this point!");
    //if i print e.getName() it works, printing the right name that i give in the    "add_form"
    listModel.addElement(e);
    //listModel.clear(); //don't work either.

} 
```

我的问题是，当我提交有关新员工的详细信息时，我从 GuiBoss 框架调用函数 refresh(Employee e)，消息（“我到达这一点！”）显示在控制台上，listModel 的大小发生变化，但它不会刷新列表。另外我必须说我为列表正确设置了模型。

//从表单中获取数据并从主框架（“GuiBoss”）调用refresh（Employee e）

```
private void btnAddActionPerformed(java.awt.event.ActionEvent evt) {                                       
    //String Id = txtID.getText();
    String UserName = txtName.getText();
    txtHour.setVisible(false);
    boolean b = false;
    if(rbtnYes.isSelected() == true){
        b = true;
    }
    if(rbtnNo.isSelected() == true){
        b = false;
    }
    if(rbtnYes.isSelected()==false && rbtnNo.isSelected() == false){
        System.out.println("Select the presence!");
    }
    else{
        txtOra.setVisible(true);
        String Hour = txtHour.getText();
        e = new Employee(UserName,b,Hour,boss);  //boss i get from main frame when i start this add new employee form
        contrb.addEmployee(e);
        gb.refresh(e);  //gb is of type GuiBoss were i have the function that does      
        // the refresh
    }  
} 
```

如果您有任何想法，请告诉我。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T20:25:45.910

与其弹出另一个框架，不如使用模式`JDialog`来收集有关新员工的信息。当对话框关闭时，您可以从对话框中提取详细信息并从当前帧中刷新列表。

这可以防止不必要地公开部分 API。

查看[如何使用对话框](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html)了解详细信息。

**更新**

假设您已正确设置模型，那么您的代码应该可以工作......按照这个例子......

```
import java.awt.BorderLayout;
import java.awt.EventQueue;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.DefaultListModel;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JList;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.ListModel;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class TestList03 {

    public static void main(String[] args) {
        new TestList03();
    }

    public TestList03() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        private DefaultListModel model;

        public TestPane() {
            setLayout(new BorderLayout());
            model = new DefaultListModel();
            JList list = new JList(model);
            add(new JScrollPane(list));
            JButton btn = new JButton("Add");
            btn.addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    model.addElement("New Element");
                }
            });
            add(btn, BorderLayout.SOUTH);
        }

    }

} 
```

这表明您没有向我们展示其他错误...

**更新了可能的参考问题修复**

这基本上演示了将主面板的引用传递给负责将值实际添加回主面板的子工厂。通常我会使用`interface`某种而不是公开整个面板来简单地提供对单个方法的访问，但这是一个简单的示例。

它使用普通`implements`类和内部类`ActionListener`来演示将“self”引用传递给另一个类的两种最常见的方法。

```
import java.awt.BorderLayout;
import java.awt.EventQueue;
import java.awt.FlowLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.DefaultListModel;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JList;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.ListModel;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class TestList03 {

    public static void main(String[] args) {
        new TestList03();
    }

    public TestList03() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel implements ActionListener {

        private DefaultListModel model;

        public TestPane() {
            setLayout(new BorderLayout());
            model = new DefaultListModel();
            JList list = new JList(model);
            add(new JScrollPane(list));

            JPanel buttons = new JPanel(new FlowLayout(FlowLayout.CENTER));

            JButton btn1 = new JButton("Add 1");
            btn1.addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    new Factory(TestPane.this, "Added by Button 1");
                }
            });
            buttons.add(btn1);

            JButton btn2 = new JButton("Add 2");
            btn2.addActionListener(this);
            buttons.add(btn2);

            add(buttons, BorderLayout.SOUTH);
        }

        public void addItem(String text) {
            model.addElement(text);
        }

        @Override
        public void actionPerformed(ActionEvent e) {
            new Factory(TestPane.this, "Added by Button 2");
        }
    }

    public class Factory {

        public Factory(TestPane testPane, String text) {
            testPane.addItem(text);
        }
    }
} 
```

# image - 在 Compas sprite 图像中下订单

> ID：15958132
> 
> 赞同：0
> 
> 时间：2013-04-11T20:20:29.620
> 
> 标签：image, sass, compass-sass

我正在尝试在 Compass sprite 图像中进行排序。当我按字母顺序做时，一切都很好

```
green.png (32x32px)
blue.png (32x32px)
red.png (32x32px) 
```

当我放置具有较大尺寸的图像时，例如 red.png (120x32px)，红色会出现在精灵的顶部。

```
red.png (120x32px)
green.png (32x32px)
blue.png (32x32px) 
```

我尝试使用数字，但没有。我需要特定的顺序，因为我将该精灵称为外部 javascript 文件。我如何影响精灵 odrder？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-16T02:42:33.123

使用水平布局模式：

```
 $YOURMAP-layout: horizontal; 
```

此模式不像其他模式那样使用文件大小来排序图像。

另请参阅 [https://github.com/chriseppstein/compass/issues/1002](https://github.com/chriseppstein/compass/issues/1002)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T12:13:28.083

似乎 Compass 只能按文件大小对 sprite 中的图像进行排序，但我发现 Compass 将能够在以后的版本中按名称对图像进行排序

[https://github.com/chriseppstein/compass/commit/520c950f7d9a9bf7d5cf99842e898feec8aa7364](https://github.com/chriseppstein/compass/commit/520c950f7d9a9bf7d5cf99842e898feec8aa7364)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T21:53:38.530

而不是在 JavaScript 中定义`background-position`更改添加或更改类。

# java - 如何从服务器端（Google App Engine、Cloud Endpoints）向我的客户端发送信息？

> ID：15958136
> 
> 赞同：4
> 
> 时间：2013-04-11T20:20:43.543
> 
> 标签：java, android, google-app-engine, cloud, google-cloud-endpoints

我有一个使用 Google App Engine 存储在云端的 Android 应用程序。我使用云端点。我的问题是我无法将数据从服务器发送到我的客户端（Android 设备），或者更好地说，到目前为止，我不知道该怎么做。

到目前为止，我已经设法在数据存储中插入数据，方法是创建一个端点并调用负责在数据库中添加记录的方法（位于服务器端，在 myProject - AppEngine 中），使用以下代码（在客户端）：\

```
 Noteendpoint.Builder endpointBuilder = new Noteendpoint.Builder(
 AndroidHttp.newCompatibleTransport(),
 new JacksonFactory(),
 new HttpRequestInitializer() {
 public void initialize(HttpRequest httpRequest) { }
 });
  Noteendpoint endpoint = CloudEndpointUtils.updateBuilder(
  endpointBuilder).build();
  try {
      // Construct the note.
      Note note = new Note().setDescription("Note DescriptionRoxana");
      String noteID = new Date().toString();
      note.setId(noteID);

      note.setEmailAddress("E-Mail AddressRoxana");        
      // Insert the Note, by calling a method that's on the server side - insertNote();
      Note result = endpoint.insertNote(note).execute();
  } catch (IOException e) {
    e.printStackTrace();
  } 
```

但是我看不到从数据存储中检索数据并将其显示在服务器端的方法。我尝试做同样的事情，创建一个端点，它将调用检索数据库中所有记录的方法（位于服务器上的方法），但是我的应用程序崩溃了。

从数据存储中检索数据的方法的代码如下：

```
 public CollectionResponse<Note> listNote(
        @Nullable @Named("cursor") String cursorString,
        @Nullable @Named("limit") Integer limit) {

    EntityManager mgr = null;
    Cursor cursor = null;
    List<Note> execute = null;

    try {
        mgr = getEntityManager();
        Query query = mgr.createQuery("select from Note as Note");
        if (cursorString != null && cursorString != "") {
            cursor = Cursor.fromWebSafeString(cursorString);
            query.setHint(JPACursorHelper.CURSOR_HINT, cursor);
        }

        if (limit != null) {
            query.setFirstResult(0);
            query.setMaxResults(limit);
        }

        execute = (List<Note>) query.getResultList();
        cursor = JPACursorHelper.getCursor(execute);
        if (cursor != null)
            cursorString = cursor.toWebSafeString();

        // Tight loop for fetching all entities from datastore and accomodate
        // for lazy fetch.
        for (Note obj : execute)
            ;
    } finally {
        mgr.close();
    }

    return CollectionResponse.<Note> builder().setItems(execute)
            .setNextPageToken(cursorString).build();
} 
```

你看，返回的类型是集合响应。在执行以下导入后，您可以访问此类数据：

```
 import com.google.api.server.spi.response.CollectionResponse; 
```

我推断这是服务器端的数据类型特征，因此，我不知道如何将其转换为可在客户端使用的 List、ArrayList 或任何其他类型的集合。

那我该怎么做呢？由于添加数据是如此简单和直接，我假设检索数据将以相同的方式执行，但显然我遗漏了一些对这件事至关重要的东西。

先感谢您！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T18:12:17.677

您在后端使用的类与您将在客户端中使用的类不同。Endpoints 将为您生成一组库，无论是在命令行上还是使用 Google Plugin for Eclipse 等工具。请参阅[在 Android 客户端中使用端点](https://developers.google.com/appengine/docs/java/endpoints/consume_android)。

`Note`在您的示例中，表示 s 集合的生成类将命名为`NotesCollection`. 这个对象将有一个方法`getItems`，它为您提供一个`List<Note>`可以在您的 Android 应用程序中迭代的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-21T12:37:01.633

与将数据插入数据存储模型的端点（POST 类型的方法）类似，您需要有一个端点用于从数据存储模型中查询数据（GET 类型的方法）。定义这两个方法后，您需要生成发现文档和客户端库，以便客户端知道这两个方法并可以调用它们。如果您谈到在 Web 本身中显示数据，那么您可以使用所需的客户端库构建一个[Javascript 客户端。](https://developers.google.com/appengine/docs/java/endpoints/consume_js)

# windows - “plink.exe”在 Windows Server 2008 R2 上挂起，创建进程“conhost.exe”

> ID：15958137
> 
> 赞同：1
> 
> 时间：2013-04-11T20:20:44.543
> 
> 标签：windows, putty, plink

我是整个 Windows 世界的新手。我已经从 Putty 的网站下载了 plink.exe。我正在从 Windows Server 2008 R2（64 位）执行 plink 命令，该命令将在 Linux 机器中执行 shell 脚本。

该`plink`命令从`.dtsx`作为 Windows Server 上的守护程序作业运行的包中执行。我已使用 Putty 将主机密钥接受到 Linux 框的注册表中，并且可以在注册表中看到它。该命令在我 RDP 进入服务器时执行，但在我未登录时不会执行。它挂起并创建一个保留在那里的“conhost.exe”进程。我可以在服务器的任务管理器中看到“plink.exe”和“conhost.exe”。

这是我正在运行的命令类型。

```
plink.exe user@SERVERNAME -pw password ./script_name.sh param_1 param_2 param_3 
```

有没有人面临/或正在面临这样的问题？

# javascript - TinyMCE：将文本从 TinyMCE 实时复制到常规文本字段

> ID：15958140
> 
> 赞同：2
> 
> 时间：2013-04-11T20:20:53.703
> 
> 标签：javascript, jquery, html, tinymce

我已经在这里挣扎了好几个小时了。我们在后端为我们的一个消费者系统使用 tinyMCE，并且他们希望能够将用户在 TinyMCE 编辑器中输入的任何文本镜像到常规文本字段（没有 html 标记）在里面）。

这里的想法是有一个用于 HTML 邮件内容 (TinyMCE) 的字段和一个用于简单纯文本邮件 (regular textarea) 的字段。因此，当用户在 TinyMCE 中输入他们的电子邮件内容时，文本将一个字母一个字母地复制到纯文本区域。

但是，即使使用 tinyMCE 特定的 JS，我也无法让这个看似基本的功能正常工作。

这是我最近的尝试（几个，并不是说这比我之前的迭代“更正确”，只是最新的）：

```
 <div class="row not-on-phone">
                    <label for="wysiwyg">
                        <strong>HTML</strong>
                    </label>
                <div>
                    <br style="line-height:1px">
                    <TEXTAREA name="HTML" id="HTML" WRAP="Physical" onkeyup="copyText()" class="rtfeditor"><cfoutput>#HTML#</cfoutput></TEXTAREA>
                    <br style="line-height:1px">
                </div>
            </div>
            <div class="row not-on-phone">
                    <label for="wysiwyg">
                        <strong>Plain Text</strong>
                    </label>
                <div>
                    <br style="line-height:1px">
                    <TEXTAREA name="Text" id="Text" WRAP="Physical" rows="20"><cfoutput>#Text#</cfoutput></TEXTAREA>
                    <br style="line-height:1px">
                </div>
            </div> 
```

相关JS：

```
 <script language="javascript">

function copyText (){
    var content = tinymce.get('HTML').getContent({format : 'raw', no_events : 1});
    document.getElementsById('Text').innerHTML = content;
}
</script> 
```

那么，如何通过 TinyMCE 的击键将文本实时复制到这个常规文本区域？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T08:47:00.647

For this you will need to use a tinymce onKeydown or onkeyup handler. This one can be set in the tinymce init like this

```
tinyMCE.init({
   ...
   setup : function(ed) {
      ed.onKeyUp.add(function(ed, evt) {
          copyText();
      });
   }
}); 
```

# visual-studio - VS 项目绑定有什么作用？

> ID：15958143
> 
> 赞同：5
> 
> 时间：2013-04-11T20:21:01.100
> 
> 标签：visual-studio, visual-studio-2012, tfs, projects-and-solutions

Visual Studio 的解绑是什么？*对解决方案*.suo 文件中的项目执行绑定操作吗？

Microsoft 提供了有关[如何：绑定或取消绑定解决方案或项目的](http://msdn.microsoft.com/en-us/library/0eh3790h%28v=vs.90%29.aspx)说明，这恰好可以解决在解决方案打开时出现的可怕的“未指定错误”。这个[MSDN 论坛](http://social.msdn.microsoft.com/Forums/en-US/csharpide/thread/d2312f94-a547-4bda-abae-e8c0fe407c9e/)帖子有一个用户说他们取消绑定然后重新绑定他们的项目以解决这个问题。

当我遇到相同的“未指定错误”问题时，我进行了一些额外的挖掘，发现*解决方案*.suo 文件是我解决问题后唯一可能发生变化的候选者。

我阅读[了关于 .suo 文件有效地一次性处理的 SO 问题的答案，](https://stackoverflow.com/a/161261/1345223)并且碰巧能够通过我放置的陈旧工作区重新创建 UE 问题。所以我继续删除*解决方案*.suo 文件并打开*解决方案*.sln 文件。神奇的是，我的 UE 问题也随着那个工作区消失了。

这使我得出结论 unbind | bind 对 .suo 文件有某种影响，但由于文件二进制、专有结构，我无法确定发生了什么。

我的问题：
1\. 那么 Visual Studio 的 unbind 到底是什么？*对解决方案*.suo 文件中的项目执行绑定操作吗？
2\. 既然我找到了 .suo 文件的链接，任何人都可以推测是什么导致了这些“未指定的错误”吗？

* * *

脚注 1：这篇[MSDN 文章](http://msdn.microsoft.com/en-us/library/bb165909%28v=vs.110%29.aspx)解释了一些关于 .suo 文件的内容，但并没有真正深入细节。

脚注 2：项目/解决方案打开上的“未指定错误”似乎是相当[糟糕](http://en.wiktionary.org/wiki/b%C3%AAte_noire)的，正如[这里](https://stackoverflow.com/questions/14836290/cant-open-sdf-file-in-vs-2012-unspecified-error/15957596#15957596)、各种搜索和这个[旧的 MS KB所证明的那样](http://support.microsoft.com/kb/820833)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T23:52:32.663

Sure, the .suo file is where Visual Studio stores the state of the IDE. So that when you open a solution again later, everything restores the way you left it off. The most obviously visible effect is that windows restore in their original position and size. And yes, the binding of the solution to the specific source control server where you want the changes to be checked in could well be stored there as well, it is the logical place for it.

"Unspecified error" is a very generic COM error code named E_FAIL. Visual Studio uses a lot of COM code, the add-in system is entirely COM based. It is a lousy error because it doesn't mean anything more than "it didn't work, don't know why". Similar to returning *false* from a function. There's a programmer at Microsoft somewhere that could have done a better job reporting the problem. Maybe that wasn't so easy.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T10:36:10.447

VS 项目绑定存储哪些项目由源代码控制管理。它保存在 .SLN 文件中。

不幸的是，源代码控制系统很难合并它的保存格式。因此，绑定经常被损坏，从而在加载解决方案时导致错误的“项目已添加到源代码管理”消息。解决此问题的过程是从 .sln 文件中删除整个部分，在 VS 中打开，然后重新绑定解决方案，这将正确创建该部分。

顺便说一句，整个解决方案文件格式对于合并来说非常糟糕。它闻起来像 VS6，源代码控制部分闻起来像 SourceSafe。我希望他们会转向一些基于 MSBuild 的格式，就像他们对（几乎所有）项目文件所做的那样。

# ruby-on-rails - Rails 控制台（END）如何过去呢？

> ID：15958146
> 
> 赞同：9
> 
> 时间：2013-04-11T20:21:09.720
> 
> 标签：ruby-on-rails, rails-console

在 Rails 控制台中工作，我将一个很长的哈希粘贴到控制台中，当我滚动到它的底部时，它有令牌（END），但我发现通过它的唯一方法是使用 CTRL 退出控制台+Z。这违背了我使用控制台测试一些代码的目的。有没有其他方法可以通过该 (END) 令牌？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-09-11T11:25:49.417

偶然发现了这个问题，经过一些尝试后我找到了解决方案:)

~~⇧`shift`~~ +**问**

**编辑：**正如@Paul 所提到的，`Q`就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T03:30:41.600

Ctrl+C 怎么样？它应该在不退出控制台的情况下继续。

# ios - 仅在指定部分启用 UITableView 编辑

> ID：15958149
> 
> 赞同：5
> 
> 时间：2013-04-11T20:21:14.583
> 
> 标签：ios, objective-c, xcode, uitableview

我有一个包含 4 个部分的 tableView。我想仅在第四部分中启用编辑（移动/拖动/重新排列）单元格。当我设置时：`tableView.editing = YES`我让所有表格视图都处于编辑模式。这个[How to limit UITableView row reordering to a section](https://stackoverflow.com/questions/849926/how-to-limit-uitableview-row-reordering-to-a-section)帮助了我，因为我现在只能在其“根”部分中重新排列一个部分的单元格。

我的意思是，如果单元格位于第一部分，那么我只能在第一部分中重新排列，而不是其他部分。我的目标是仅使用第 4 节启用编辑，因此仅将第 4 节中的单元格置于移动/拖动模式。有谁知道我该怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-11T20:25:13.440

您可以通过实现此委托方法来实现此目的

```
-(BOOL)tableView:(UITableView *)tableView canMoveRowAtIndexPath:(NSIndexPath *)indexPath {
    if (indexPath.section == 3) {
        return YES;
    } else {
        return NO;
    }
} 
```

# java - Java：返回一个类User，和改变它一样吗？

> ID：15958152
> 
> 赞同：1
> 
> 时间：2013-04-11T20:21:27.187
> 
> 标签：java, class, return

如果问题很愚蠢，我很抱歉，我是 Java 编程的初学者......我需要知道是否通过使用逐个类的方法来更改类的值，直到它到达那里并更改值（1），与返回该类并更改 main (2) 上的值相同吗？就像如果在（2）上它会创建某种指针......

```
 public class User{
       //methods and constructor...
       String name = "";
       public String getName(){return name;}
       public void setName(String name){this.name = name;}
    }

    public class UserList{
       //...
       User [] list = new User();
       //some User's inside list...
       public void setName(String name){
          list[0].setName(name);
       }
       public User getUser(){
          return list[0];
       }
    }

public class Main{
   public static void main(String[] args){
      UserList ul = new UserList();
      //is this (1):
      ul.setName("randomname");
      // the same as this (2):
      ul.getUser().setName("randomname");

   }
} 
```

我不明白 (2) 是否实际上返回用户或创建指向用户内存的“指针”。感谢您的耐心等待！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T20:22:25.507

是的，它们是等价的。这两个函数调用指向内存中的同一个列表。

由于一个人访问`list[0]`并将其设置为所需的名称，因此索引 0 of`list`将设置为所需的名称。

另一个获取列表，然后获取索引 0 并将其设置为所需的名称。整体效果是一样的。

请记住，对象是对内存中某个位置的引用。您的数组包含对象引用。当您返回此数组对象的索引时，您将返回被引用对象*在内存中的位置。*结果，该对象被更改。但是，当您调用 时`list[0]`，您正在访问索引 0，从而在内存中为您*提供相同的对象。*因此，净效应是相同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T20:32:07.897

完全相同的！！您总是通过直接设置其实例变量名称或通过返回对象然后修改实例变量来引用相同的对象列表[0]。

# javascript - 在刷新之前，Javascript 不会在 jQuery Mobile 上运行

> ID：15958157
> 
> 赞同：0
> 
> 时间：2013-04-11T20:21:52.197
> 
> 标签：javascript, ajax, ruby-on-rails-3, jquery, jquery-mobile

我知道这里已经有多个线程在讨论这个问题，但是到目前为止发布的任何建议都没有让我找到解决方案。所以，我将发布我自己的。基本上我有一个设置为在我的一个页面上运行的 javascript 函数。它在页面刷新后才起作用。我的理解是这个问题与ajax加载页面的方式有关吗？

我尝试过的事情：

*   将脚本代码添加到用户首先看到的首页布局中
*   当这不起作用时，将脚本代码添加到站点使用的所有 3 个布局中
*   将脚本添加到此特定布局的正文中。

代码如下。提前感谢您的任何帮助！

**这是布局的代码：**

```
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <title>RENT</title>
  <%= stylesheet_link_tag    "application", :media => "all" %>
  <%= javascript_include_tag :application %>
  <%= csrf_meta_tags %>
  <link rel="stylesheet" href="https://ajax.aspnetcdn.com/ajax/jquery.mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
  <%= stylesheet_link_tag "my.css" %>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
  <script src="https://ajax.aspnetcdn.com/ajax/jquery.mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
  <%= javascript_include_tag "my.js" %>
        <script src="/assets/jquery.maskMoney.js" type="text/javascript"></script>

  <!-- THIS IS THE FUNCTION I NEED HELP WITH! -->
  <script type="text/javascript">
    $(function(){
        $("#paymentAmount").maskMoney({symbol:'$ '});
    })
    </script>
</head>
<body>

    <div data-role="page" data-theme="b" id="page4">
          <div data-theme="b" data-role="header">
              <a data-role="button" data-theme="b" href="/home"
               data-icon="back" data-iconpos="left" class="ui-btn-left">
                  Back
              </a>
              <a id="settings" data-role="button" data-inline="true" data-theme="b"
               href="#page9" data-icon="gear" data-iconpos="notext" class="ui-btn-right">
              </a>
              <h3>
                  Pay Rent
              </h3>
          </div>

        <%= content_tag(:div, flash[:error], :id => "flash_error") if flash[:error] %>
        <%= content_tag(:div, flash[:notice], :id => "flash_notice") if flash[:notice] %>
        <%= content_tag(:div, flash[:alert], :id => "flash_alert") if flash[:alert] %>

        <%= yield %>

        <div data-theme="a" data-role="footer" data-position="fixed">
              <h1>
                  © 2013
              </h1>
          </div>
      </div>

</body>
</html> 
```

**这是控制器的代码：**

```
<!-- Pay Rent (R) -->
  <div data-role="content" style="padding: 10px">
    <%= form_for(@rentPayment, :url => { action: "create" }) do |f| %>z
      <div data-role="fieldcontain">
        <fieldset data-role="controlgroup" data-mini="true">
        <label for="paymentAmount"> Payment Amount </label>
        <input name="rentPayment[paymentAmount]" id="paymentAmount" placeholder="$ 0.00" value="" type="text">
        </fieldset>
      </div>
      <div data-role="fieldcontain">
        <fieldset data-role="controlgroup" data-mini="true">
        <label for="paymentDate"> Pay on this date </label>
        <input name="rentPayment[paymentDate]" id="paymentDate" placeholder="" value="" type="date">
        </fieldset>
      </div>
      <input type="submit" data-theme="b" value="Submit Payment" data-mini="true">
    <% end %>
  </div> 
```

**编辑的布局页面**

```
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <title>RENT</title>
  <%= stylesheet_link_tag    "application", :media => "all" %>
  <%= javascript_include_tag :application %>
  <%= csrf_meta_tags %>
  <link rel="stylesheet" href="https://ajax.aspnetcdn.com/ajax/jquery.mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
  <%= stylesheet_link_tag "my.css" %>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
  <script src="https://ajax.aspnetcdn.com/ajax/jquery.mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
  <%= javascript_include_tag "my.js" %>
        <script src="/assets/jquery.maskMoney.js" type="text/javascript"></script>

  <!-- THIS IS THE FUNCTION I NEED HELP WITH! -->
 <script type="text/javascript">
    $(document).on('pageshow', '#page4', function () { $("#paymentAmount").maskMoney({symbol:'$ '}); });
    <!--$(document).ready(function(){$("#paymentAmount").maskMoney({symbol:'$ '});})-->
  </script>
</head>
<body>

    <div data-role="page" data-theme="b" id="page4">
          <div data-theme="b" data-role="header">
              <a data-role="button" data-theme="b" href="/home"
               data-icon="back" data-iconpos="left" class="ui-btn-left">
                  Back
              </a>
              <a id="settings" data-role="button" data-inline="true" data-theme="b"
               href="#page9" data-icon="gear" data-iconpos="notext" class="ui-btn-right">
              </a>
              <h3>
                  Pay Rent
              </h3>
          </div>

        <%= content_tag(:div, flash[:error], :id => "flash_error") if flash[:error] %>
        <%= content_tag(:div, flash[:notice], :id => "flash_notice") if flash[:notice] %>
        <%= content_tag(:div, flash[:alert], :id => "flash_alert") if flash[:alert] %>

        <%= yield %>

        <div data-theme="a" data-role="footer" data-position="fixed">
              <h1>
                  © 2013
              </h1>
          </div>
      </div>

</body>
</html> 
```

# php - PHP if (isset($_POST['uname'])) 什么都没做？

> ID：15958167
> 
> 赞同：0
> 
> 时间：2013-04-11T20:22:27.167
> 
> 标签：php, forms, isset

我有两页。第一页有两种文本形式，如下所示：

```
<form name="NameForm">
Name: <input type = "text" name = "uname">
Location: <input type = "text" name = "ulocation">

<button type="button" onClick="MakeRequest()"">Save</button>
</form> 
```

它使用 javascript 将信息推送到第二页（请注意，这与上面的代码在同一页面上）：

```
<script>
function MakeRequest()
{
// get values
var uname = document.NameForm.uname.value;
var ulocation = document.NameForm.ulocation.value;

// validation stuff here that detects browser

xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("result").innerHTML=xmlhttp.responseText;
    }
  }
var url = "location.php?uname=" + uname + "&ulocation=" + ulocation;
xmlhttp.open("POST", url, true);
xmlhttp.send();
}
</script> 
```

所以问题是这样的，页面上执行所有服务器通信的 php 脚本没有从这个 post 请求中读取变量并将其存储到我的数据库中。（我查看数据库中项目的其他 get 方法工作正常）

```
if (isset($_POST['uname']))
{
    $name = $_POST['uname'];
$location = $_POST['ulocation']
} 
```

然后查询就像

```
//$table and the other undefined variables are the names of my table & columns
$query = "INSERT INTO $table ($tablename, $tablelocation) VALUES ('$name', '$location')"; 
```

基本上我正在尝试使该查询正常工作。如果我删除 If 语句，它会将 $name 存储到数据库，但不会存储 $location。

编辑：我忘了添加

```
<div id="result">
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T20:24:54.813

您正在发送一个`GET`. 发送`POST`尝试：

**[编辑] 执行命令的功能**

```
function XHR(){
    if(typeof XMLHttpRequest !=="undefined"){
        try{ return new XMLHttpRequest(); } catch (e){}
    }
    if(typeof ActiveXObject !=="undefined"){
        try{ return new ActiveXObject("Msxml2.XMLHTTP"); }catch(e){}
        try{ return new ActiveXObject("Microsoft.XMLHTTP"); }catch(e){}
    }
    return false;
}

function MakeRequest()
{
    // get values
    var uname = document.NameForm.uname.value;
    var ulocation = document.NameForm.ulocation.value;

    // validation stuff here that detects browser

    var url = "location.php";

    xmlhttp = XHR();//Fixed
    xmlhttp.open("POST", url, true);
    xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");//Fixed
    xmlhttp.onreadystatechange=function(){
        if (xmlhttp.readyState==4) {
            if(xmlhttp.status==200){
                document.getElementById("result").innerHTML = xmlhttp.responseText;
            } else {
                document.getElementById("result").innerHTML = "ERROR:"+xmlhttp.status;
            }
        }
    };
    xmlhttp.send("uname=" + uname + "&ulocation=" + ulocation);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T20:41:51.123

```
<form name="NameForm">
Name: <input type = "text" name = "uname">
Location: <input type = "text" name = "ulocation">

<button type="button" onClick="MakeRequest()"">Save</button>
</form> 
```

您缺少表单方法。在您的情况下，您希望：

```
<form name='NameForm" method="POST"> 
```

如果这不能解决您的问题，请下载并使用 firebug for firefox 或 chrome 控制台来调试 javascript 错误。

JS中不会有错误输出到文本中。您将需要使用调试控制台。

*通过 html 表单执行插入*

我会将您的 HTML 修改为：

```
<form name="NameForm" method="POST">
Name: <input type = "text" name = "uname">
Location: <input type = "text" name = "ulocation">

<button type="button" onClick="MakeRequest()"">Save</button>
<input type='submit' name='SubmitForm' value='SUBMIT THIS FORM'>
</form> 
```

然后我的PHP代码：

```
<?php 
if(isset($_POST['SubmitForm'])){
   $Name = $_POST['uname'];
   $Location = $_POST['ulocation'];
   // Perform validation for these inputs, check if empty, set correctly ETC

    $query = "INSERT INTO $table ($tablename, $tablelocation) VALUES ('$name', '$location')";
} 
```

然后在您的 PHP 脚本中调用您的 Javascript 函数；或执行 ajax/jquery 调用来运行插入，而无需提交按钮

# c# - 选择哪种方法来按键查找 Dictionary 元素？

> ID：15958169
> 
> 赞同：-1
> 
> 时间：2013-04-11T20:22:30.270
> 
> 标签：c#, .net, dictionary

我想知道，在速度方面，以下哪种方法更可取？

```
//Dictionary dic<string, int>;

int getElementByKey1(string key)
{
    if(dic.ContainsKey(key))     //Look-up 1
        return dic[key];     //Look-up 2 in case of a "hit"

    return null;
}

int getElementByKey2(string key)
{
    try
    {
        return dic[key];      //Single look-up in case of a "hit"
    }
    catch
    {
        return null;          //Exception in case of a "miss"
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T20:24:19.450

第三个怎么样，使用[`TryGetValue()`](http://msdn.microsoft.com/en-us/library/bb347013.aspx)方法：

```
int getElementByKey3(string key)
{
    int value;
    dic.TryGetValue(key, out value)
    return value;
} 
```

顺便说一句：您的方法无效，因为您不能`null`从声明为`int`.

它应该被声明为`int?`允许`null`值：

```
int? getElementByKey3(string key)
{
    int value;
    if(dic.TryGetValue(key, out value))
        return value;

    return null;
} 
```

我认为这将是最好的一个。但是，如果我必须从您建议的两种方法中进行选择，我会选择第一种 - 第二种看起来更快，但是当抛出异常时，它不会那么快，因为它必须被处理，并且需要一些工作量.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T20:54:04.793

[您可以使用StopWatchers](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx)测试执行时间，首先，在 Dictionary 上放置一些值：

```
 Random r = new Random();
    for (int i = 0; i < 10000; i++)
    {
        d.Add(Guid.NewGuid().ToString(), r.Next());

        //put some manual key for search later
        if (i == 9001)
            d.Add("it's over", 9000);
    } 
```

然后，使用 StopWatchers（使用 System.Diagnostics）进行一些搜索：

*   第一次测试，当值存在时（不抛出异常）：

    ```
    Stopwatch st1 = new Stopwatch();
    st1.Start();
    int getKey1 = getElementByKey1("it's over");
    st1.Stop();

    Stopwatch st2 = new Stopwatch();
    st2.Start();
    int getKey2 = getElementByKey2("it's over");
    st2.Stop(); 
    ```

结果在我的电脑上：

```
Time spent on first search: 00:00:00.0002738
Time spent on second search: 00:00:00.0001169 
```

所以，第一个比较慢，因为`if (d.ContainsKey(key))`返回值之前的验证。

*   第二次测试，当值不存在时（抛出异常，例如：）`int getKey1 = getElementByKey1("nevermind");`：

结果：

```
Time spent on first search: 00:00:00.0002331
Time spent on second search: 00:00:00.0822669 
```

如您所见，抛出[异常会在抛出异常时](http://yoda.arachsys.com/csharp/exceptions.html) [扼杀](http://yoda.arachsys.com/csharp/exceptions2.html) [性​​能](http://blogs.msdn.com/b/ricom/archive/2006/09/25/771142.aspx)。

注意：你不能在返回 int 的方法上返回 null，所以我使用了`return 0;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T20:26:42.197

没有任何。最好搭配：

```
string result = null;
if (dic.TryGetValue(key, out result)
{
    // don't know, maybe log it somewhere or sth?
}

return result; 
```

# ruby-on-rails-3 - 设置会话到期 - Rails 3

> ID：15958171
> 
> 赞同：0
> 
> 时间：2013-04-11T20:22:34.833
> 
> 标签：ruby-on-rails-3, session

我有一个应用程序，其中使用了[http://ruby.railstutorial.org/chapters/a-demo-app?version=3.0#sec:planning_the_application](http://ruby.railstutorial.org/chapters/a-demo-app?version=3.0#sec:planning_the_application)和[http://ruby.railstutorial.org/chapters/提供的教程sign-in-sign-out#sec-signin_failure](http://ruby.railstutorial.org/chapters/sign-in-sign-out#sec-signin_failure) (Rails 3.2) 来创建我的用户和会话模型。

如果用户处于非活动状态 5 分钟左右，我想实现过期。我努力了：

```
config.timeout_in = 5.minutes in my **application.rb** 
```

和

```
config.session_store :cookie_store, key: 'blanked_out', :expire_after => 2.minutes in my **session_store.rb** 
```

这些似乎都不起作用。

有什么建议么？

**会话助手**

```
def sign_in(user)
  cookies.permanent[:remember_token] = user.remember_token
  self.current_user = user
end

def sign_out
  self.current_user = nil
  cookies.delete(:remember_token)
end

def current_user
   @current_user ||= User.find_by_remember_token(cookies[:remember_token])
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T22:37:30.217

你试过这个吗？

编辑：

```
MAX_SESSION_TIME = {enter time}

before_filter :verify_session

def verify_session

   if !session[:expire].nil? and session[:expire] < Time.now
      # Session has expired. Clear or reset session.
      reset_session
   end

   # Assign a new expiry time, whether the session has expired or not.
   session[:expire] = MAX_SESSION_TIME.seconds.from_now
   return true
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-04T01:55:46.587

我在研究 CookieStore 问题时遇到了以下问题。我认为它回答了你的问题：

[https://www.coffeepowered.net/2013/09/26/rails-session-cookies/](https://www.coffeepowered.net/2013/09/26/rails-session-cookies/)

这是 Chris Heald 建议使用 CookieStore 添加会话超时的代码（请注意，这将放在您的 application_controller.rb 文件中：

```
class ApplicationController
  before_filter :validate_session_timestamp
  after_filter  :persist_session_timestamp

  SESSION_TTL = 48.hours
  def validate_session_timestamp
    if user? && session.key?(:ttl) && session[:ttl] < SESSION_TTL.ago
      reset_session
      current_user = nil
      redirect_to login_path
    end
  end

  def persist_session_timestamp
   session[:ttl] = Time.now if user?
  end
end 
```

# boolean - 需要解释 AND 布尔值的工作方式令人困惑

> ID：15958172
> 
> 赞同：1
> 
> 时间：2013-04-11T20:22:35.087
> 
> 标签：boolean

我正在指导某人进行基本搜索和排序。在插入排序中，当我的值在数值上大于它之前的值时，我会进行否定迭代。现在当然这种方法可能会导致问题，因为有一个检查调用不存在的数组 [-1]。

如下面的粗体下划线所示，添加 and x > 0 布尔值可以防止索引问题。

我的问题是这是怎么回事？是否仍会调用 array[-1] 以确保两个布尔值的有效性？

```
the_list = [10,2,4,3,5,7,8,9,6]

for x in range(1,len(the_list)):
    value = the_list[x]

    while value < the_list[x-1] **and x > 0**:

        the_list[x] = the_list[x-1]

        x=x-1

    the_list[x] = value

print the_list 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T20:27:39.200

我不确定我是否*完全*理解了这个问题，也不知道这是什么编程语言，但大多数现代编程语言默认使用所谓的短路布尔评估，因此逻辑表达式不会进一步评估一次结果是已知的。

您可以使用它来防止范围溢出，如下所示：

```
while x > 0 and value < the_list[x-1] 
```

但是这里对x的范围的检查必须*在使用之前*进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T20:29:04.127

`AND`当且仅当两个参数都为真时，操作才会返回`true`，因此如果其中一个参数为假，则没有必要检查其他参数，因为此时已经知道最终值。至于您的示例，通常评估从左到右进行，但这不是原则，并且看起来您使用的语言不遵循该规则（否则它仍然应该在数组查找时崩溃）。但可能是，这个特定的实现以某种方式优化了它（恕我直言，这不是一个好主意）并`x > 0`在查找数组之前首先评估“更简单”的东西（比如检查 if ）。`x > 0`检查规范为什么这个确切的顺序对你有用，因为在大多数流行的语言中，如果在查找之前不评估测试，你仍然会崩溃

# java - 将二进制输出限制为 8 位或 4 位

> ID：15958173
> 
> 赞同：0
> 
> 时间：2013-04-11T20:22:35.637
> 
> 标签：java, bit-manipulation

**这是我的第一个问题**

这是我的代码：

```
public class Bits{
   public static void main(String args[]){

   int i = 2 , j = 4;

   int allOnes = ~0;

   int left = allOnes << (j+1);

   System.out.println("Binary Equivalent at this stage: " +Integer.toBinaryString(left));

  }
} 
```

以下是我得到的输出：

```
Binary Equivalent at this stage: 11111111111111111111111111100000 
```

如何将其限制为仅从右侧开始的 8 位。我的意思是`11100000`。

请解释。

**这是我的第二个问题：**

另外，我还有一个与上述问题完全不同的问题：

```
public static void main(String args[]){

   int i = 2 , j = 4;

   int allOnes = ~0; // will equal sequence of all 1s

   int left = allOnes << (j+1);

   System.out.println("Binary Equivalent at this stage: " +Integer.toBinaryString(left));

  }
} 
```

由于我不明白以下行：

```
int allOnes = ~0; // will equal sequence of all 1s 
```

当我试图输出“allOnes”的值时，我得到了“-1”作为我的输出。

我很难理解下一行，如下所示：

```
int left = allOnes << (j+1); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T20:27:41.027

```
int allOnes = ~0; 
```

取整数 0 并按位应用 NOT 运算，因此它将在其二进制表示中全部为 1。整数使用[二进制补码](http://en.wikipedia.org/wiki/Two%27s_complement)格式，这意味着所有位都为 1 的字的值是 -1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T20:28:37.293

十进制的 8 位最大值为 255。此时您可以使用模（余数）除法运算符将其限制为 8 位。例如：

```
int yournum = 35928304284 % 256; 
```

将限制`yournum`为 8 位长度。此外，正如评论中所建议的，您可以这样做：

```
int yournum = 3598249230 & 255; 
```

这也很有效，在这种情况下实际上是首选，因为它要快得多。如果两个相关位均为 1，则按位与函数返回 1；由于只有 255 的最后 8 位为 1，因此整数隐式限制为 255。

回答您的第二个问题：波浪号是按位反转运算符。因此，

```
int allOnes = ~0; 
```

创建一个全为 1 的整数。由于[二进制补码](http://en.wikipedia.org/wiki/Two%27s_complement)的工作方式，该数字实际上代表 -1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T20:29:52.037

1.  如果您只关心字节边界，请使用[ByteBuffer](http://docs.oracle.com/javase/6/docs/api/java/nio/ByteBuffer.html)

    字节 lastByte = ByteBuffer.allocate(4).putInt(i).array()[3];

要将此字节限制为前四位或后四位，请使用`lastByte & 0b11110000`或`lastByte & 0b00001111`

1.  -1 的整数表示全为 1，即 32 位都设置为 1。您可以将第一位视为 -2^31（注意负号），随后的每个位为 2^30、2^29等。添加 2^0 + 2^1 + 2^2 ... + 2^30 - 2^31 = -1。

我建议阅读[有关按位运算的本教程](http://vipan.com/htdocs/bitwisehelp.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T20:38:30.257

对于 #1 Integer.toBinaryString(left) 正在打印 32 位（整数的长度），因此如果您只想要正确的 8，您可以执行以下操作：

```
Integer.toBinaryString(left).substring(24) 
```

Java 中的 ~ 运算符反转位模式。因此0变成了ffff。

<< 运算符将位移动 x。您将这些位向左移动 5，因此您最终在右侧有 5 个零。

这是[Java的所有按位运算符](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/op3.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T20:55:24.513

首先，对于第一个问题，比我目前看到的更通用的解决方案是

```
left &= (2 ^ n) - 1; 
```

其中 n 是您要从右侧取的二进制位数。这是基于按位与运算符 & 的，它比较两个数字中的相应位，如果它们都是 1，则输出 1，否则输出 0。例如：

```
10011001 & 11110000 == 10010000; // true 
```

这用于创建所谓的位掩码（[http://en.wikipedia.org/wiki/Mask_(computing)](http://en.wikipedia.org/wiki/Mask_(computing))）。请注意在此示例中如何将第一个数字的左 4 位复制到结果中，以及第二个数字中的相同 4 位如何全为 1？这就是位掩码中的想法。

所以在你的情况下，让我们看看 n = 8

```
left &= (2 ^ 8) - 1;

left &= 256 - 1;

left &= 255; // Note that &=, like += or *=, just means left = left & 255
             // Also, 255 is 11111111 in binary so it can be used as the bitmask for
             // the 8 rightmost bits.

Integer.toBinaryString(left) = "11100000"; 
```

您的第二个问题更深入，但您可能会从阅读 Wikipedia 文章 ( [http://en.wikipedia.org/wiki/Two](http://en.wikipedia.org/wiki/Two) 's_complement) 中受益最大，而不是试图在这里理解一个简短的解释。

# javascript - gcm 消息通过 javascript

> ID：15958174
> 
> 赞同：4
> 
> 时间：2013-04-11T20:22:36.207
> 
> 标签：javascript, android, google-cloud-messaging

我想通过 javascript 代码发送 gcm 消息。为此，我们需要发布一个 json 对象。

url 和 json 对象格式在 gcm 文档中给出：http: [//developer.android.com/google/gcm/adv.html](http://developer.android.com/google/gcm/adv.html)。

出于测试目的，我编写了一个完美运行的 java 代码。但是javascript代码不起作用。如果有人有一些示例工作代码（用于 gcm 的 javascript），请发布。

```
String body = "registration_id=proper_id&data.number=12345678";
byte[] bytes = body.getBytes();
HttpURLConnection conn = getConnection(url);
conn.setDoOutput(true);
conn.setUseCaches(false);
conn.setFixedLengthStreamingMode(bytes.length);
conn.setRequestMethod("POST");
conn.setRequestProperty("Content-Type", "application/x-www-form-urlencoded;charset=UTF-8");
conn.setRequestProperty("Authorization", "key=" + key);
OutputStream out = conn.getOutputStream();
out.write(bytes); 
```

javascript代码：

```
var http = new XMLHttpRequest();
var url = "https://android.googleapis.com/gcm/send";
http.onreadystatechange = function() {
if (http.readyState == 4 && http.status == 200) {        document.getElementById("target").innerHTML =    http.responseText;
}
}
http.open("POST", url, false);
http.setRequestHeader("Content-type", "application/json");
http.setRequestHeader("Authorization", "key=proper_api_key");
var data = '{ "collapse_key": "qcall","time_to_live": 108, "delay_while_idle": true,"data": {"number":"12345678"},"registration_ids":["proper_id"]}';
http.send(data); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-28T09:33:07.263

[由于同源政策](http://en.wikipedia.org/wiki/Same-origin_policy)，这将不起作用

> 在计算中，同源策略是许多浏览器端编程语言（例如 JavaScript）的重要安全概念。该策略允许在源自同一站点的页面上运行的脚本（方案、主机名和端口号的组合）不受特定限制地访问彼此的方法和属性，但禁止跨不同站点的页面访问大多数方法和属性。

简而言之：除了脚本执行的域之外，您不能将 HTTP Post 发送到其他域。

在这里可以看到[同源策略的规则](http://en.wikipedia.org/wiki/Same-origin_policy#Origin_determination_rules)

您需要使用您的 Java 代码，或者如果您的 Hoster 不支持 Java，您可以使用 PHP。[这个关于 GCM 和 PHP](https://stackoverflow.com/questions/11242743/gcm-with-php-google-cloud-messaging)的问题似乎有一个适用于 GCM 的 PHP 脚本。

祝你好运

# kendo-ui - 带有枚举的 Kendo Grid 过滤

> ID：15958182
> 
> 赞同：3
> 
> 时间：2013-04-11T20:23:32.467
> 
> 标签：kendo-ui, kendo-grid

我的模型包含一个枚举，我想在通过 AJAX 加载网格时对其进行过滤。

.cshtml 代码：

```
@(Html.Kendo().Grid()
    .Name("Grid")
    .Columns(columns =>
        {
            columns.Bound(x => x.Type);
            columns.Bound(x => x.Status); @*This is my enum*@
        })
    .Filterable()
    .DataSource(ds => ds
                        .Ajax()
                        .ServerOperation(true)
                        .Filter(filter => filter.Add(x => x.Status).IsEqualTo(MyEnum.Updated))
                        .Read(read => read.Action("QueryAlerts", "Alert")))) 
```

AJAX POST 上的过滤器请求正在处理`Status~eq~'updated'`并返回`Input string was not in a correct format`错误。

我删除了对数据源的过滤，并使用过滤控件来查看该请求是如何正常传递的，如下所示`Status~eq~2`：

我尝试将过滤器值转换为整数（例如`filter.Add(x => (int)x.Status).IsEqualTo((int)MyEnum.Updated)`），这会导致从模型到 Int32 的无效转换错误，这是 Add 方法所期望的。

这个问题可以使用 Razor 解决，还是 JavaScript 修复？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T16:29:31.203

您的 x.Status 是什么数据类型？如果它是一个 int 那么你不需要强制转换它，只需要枚举：

```
filter.Add(x => x.Status).IsEqualTo((int)MyEnum.Updated) 
```

# events - CodeName 一、Action事件没有正常创建——需要说明

> ID：15958191
> 
> 赞同：1
> 
> 时间：2013-04-11T20:24:03.450
> 
> 标签：events, netbeans, handler, codenameone

大家，早安。

我有一个从基本“Hello World”模板创建的简单 Hello World 应用程序。我在主窗体上添加了一个简单的按钮（在 CodeNameOne GUI 设计器中），我试图通过单击“动作事件”来触发一个动作事件。我正在保存 GUI 设计器之前包含的内容，以按照此处所述进行事件 -[代号一，操作事件不起作用 - 需要解释](https://stackoverflow.com/questions/15927748/codename-one-action-event-not-working-need-explanation)

但是 GUI 设计者要求我选择一些文件名，而不是简单地在 NetBeans IDE 中自动创建一个事件处理程序，如每本手册中所示。主要问题 - 我无法在此窗口中选择任何文件。我不知道 GUI Designer 需要哪些文件类型，但我的项目中的所有 *.java 文件在此窗口中都是灰色的，因此无法访问。

事件处理程序也在“StateMachine.java”中创建，但并非总是如此。例如，为按钮创建的事件处理程序，但不是为选项卡创建的。

Mac OS 版本为 10.8.3（在 Oracle Virtual Box 下） NetBeans IDE 为 7.3，Java 版本为 1.6.0_43

请帮助我，这个项目非常好，但是当这个问题没有解决时，我无法继续开发我的应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T06:47:50.040

在某些情况下，插件无法正确检测到 NetBeans 安装。您需要指向 NetBeans.app 文件而不是源文件。您可以通过选择菜单选项“File->Setup NetBeans”来强制执行此操作。

这是问题跟踪器中的一个已知问题，其中包含多个工件，例如：[http](http://code.google.com/p/codenameone/issues/detail?id=611&start=100) ://code.google.com/p/codenameone/issues/detail?id=611&start=100一旦您选择了正确的 NetBeans 副本，这应该“正常工作” ”。

# ruby-on-rails - 如何在我的视图中显示 ActionView::Template::Error

> ID：15958192
> 
> 赞同：0
> 
> 时间：2013-04-11T20:24:05.620
> 
> 标签：ruby-on-rails, ruby-on-rails-3, actionview

我想`ActionView::Template::Error`在我的视图中显示任何错误消息。

我的终端中只有这些错误消息，例如：

```
ActionView::Template::Error (No route matches {:controller=>"transactions", :action=>"download", :id=>nil}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T20:49:02.253

你试过这个吗？

```
begin
  ...
rescue Exception => ex
  @message = ex.message
  render "error"
end 
```

error 是一个只包含一行的视图：error.html.erb

```
<%= @message %> 
```

# asp.net - 当 web.config 损坏时检测并发出警报

> ID：15958196
> 
> 赞同：0
> 
> 时间：2013-04-11T20:24:13.230
> 
> 标签：asp.net, error-handling, web-config

我们最近遇到了一种情况，其中一个糟糕的 web.config 部署导致我们的 web.config 中有两个“appSettings”部分。我们已经关闭了详细的错误（它是 prod），因此在浏览器中我们看到了一个通用的 500 错误。检查 Windows 应用程序日志一无所获。

是否可以为这样的案例设置某种警报？记录到 Windows 应用程序日志的东西（任何东西！）将是理想的。

感谢您的关注！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T20:37:36.110

您可以添加错误记录模块来帮助您调试应用程序。我发现[ELMAH](http://code.google.com/p/elmah/)是一个非常好的工具。以下是[使用 ELMAH 记录错误](http://www.asp.net/web-forms/tutorials/deployment/deploying-web-site-projects/logging-error-details-with-elmah-cs)的方法。

ELMAH 可以帮助您在未来调试您的应用程序。每当您对应用程序进行更改时，请在发布更改之前对其进行测试。这样做的一个好方法是设置一个暂存环境以匹配生产服务器。这样，您就可以在将更改移动到实时应用程序之前看到任何错误。

# unit-testing - 运行多个测试时优化 Arquillian 性能

> ID：15958200
> 
> 赞同：4
> 
> 时间：2013-04-11T20:24:25.967
> 
> 标签：unit-testing, jakarta-ee, jboss-arquillian

我正在使用 Arquillian 针对 Glassfish 测试 Java EE 应用程序，到目前为止，我面临一个性能问题，每个测试用例需要一分钟以上才能完成，拥有 60 个测试用例意味着运行一个小时。因此构建将需要一个多小时。

我知道在启动 glassfish 容器、创建和部署 war 文件时运行测试用例可能需要花费一些时间。

有没有办法在每个项目下对测试用例进行分组，添加所有类，创建单个部署存档并在单个部署中运行多个测试，就好像它们是单个测试类一样？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-06-16T14:15:51.527

Arquillian 本身不支持套件。

但是我编写了使套件测试成为可能的扩展。

[https://github.com/ingwarsw/arquillian-suite-extension](https://github.com/ingwarsw/arquillian-suite-extension)

在那里你应该找到带有示例的文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T14:13:06.693

您使用的是嵌入式 glassfish 实例吗？因为运行远程实例应该工作得更快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T06:42:30.373

使用测试套件 ( ) 并在带注释的方法`@Suite`中设置您的 arquillian 容器`@BeforeClass`

见[http://www.mkyong.com/unittest/junit-4-tutorial-5-suite-test/](http://www.mkyong.com/unittest/junit-4-tutorial-5-suite-test/)

编辑 ：

如果您的所有类都扩展了一个 AbstractTestClass ，它声明了`@BeforeClass`仅在尚未完成时才初始化容器的带注释的方法？

# vbscript - 在 VB 脚本中调用另一个文件中的函数

> ID：15958203
> 
> 赞同：1
> 
> 时间：2013-04-11T20:24:36.310
> 
> 标签：vbscript, qtp

我在 QTP 中使用测试驱动程序脚本（testset Driver.vbs），并在其中尝试调用另一个文件中的函数。我想我可以将它添加到测试集 driver.vbs 中：

```
Function IncludeAOA
Dim objFSO, objFile, AR1

    Set objFSO = CreateObject("Scripting.FileSystemObject")
    Set objFile = objFSO.OpenTextFile("\\Server1\QTP Files\Community\Driver Scripts\AOAReg.vbs", 1)
    AR1 = objFile.ReadAll
    objFile.Close
    ExecuteGlobal AR1
End Function 
```

我调用`IncludeAOA`似乎有效的函数。但是，当它到达`ExecuteGlobal AR1`线路时，它会失败并显示

> 错误：无效字符，代码：800A0408。

谁能看到我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T20:45:33.247

AR1 - 即代码`AOAReg.vbs`- 是罪魁祸首。尝试使用`cscript AOAReg.vbs`. 如果这没有显示错误（包括行号），请发布代码或检查该文件的编码。

# c - 线程自由指针

> ID：15958206
> 
> 赞同：0
> 
> 时间：2013-04-11T20:24:38.423
> 
> 标签：c, thread-safety, pthreads, free, valgrind

我正在尝试使用 C 中的线程，如果这是线程函数，我在释放指针时遇到了一些问题

```
void *executor_func(void *param) {
char *lineEx = (char *) malloc (1024);

size_t lenEx = 1024;
ssize_t readEx;

FILE * fpEx;
char* pchEx;

fpEx = fopen(file, "r");

if (fpEx == NULL) {
    printf("ERROR: couldnt open file\n");
    exit(0);
}

while ((readEx = getline(&lineEx, &lenEx, fpEx)) != -1) {
    pchEx = strtok(lineEx, " ");

        //DO MY STUFF WITH THE LINE I RECEIVE FROM FILE
    }
free(lineEx);
fclose(fpEx);

return NULL;

 } 
```

想象一下，我执行 executor_func() 的多个线程... free(lineEX) 在 Valgrind 给我带来了问题... 为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T20:37:47.563

这是来自文档： http: [//man7.org/linux/man-pages/man3/strtok.3.html](http://man7.org/linux/man-pages/man3/strtok.3.html)

> strtok() 函数将字符串解析为标记序列。在第一次调用 strtok() 时，应在 str 中指定要解析的字符串。在应解析相同字符串的每个后续调用中，str 应为 NULL。

正如 strtok 手册所说：使用这些功能时要小心。如果您确实使用它们，请注意：

```
 * These functions modify their first argument.

   * These functions cannot be used on constant strings.

   * The identity of the delimiting byte is lost.

   * The strtok() function uses a static buffer while parsing, so it's not
     thread safe.  Use strtok_r() if this matters to you. 
```

如果您获得非法释放，可能与此有关（[来自 Valgrid 手册](http://valgrind.org/docs/manual/mc-manual.html)）：如果您尝试释放不指向堆块开头的指针，您也会收到此消息。Memcheck 跟踪分配的块由你的程序使用 malloc/new，所以它可以准确地知道 free/delete 的参数是否合法。在这里，这个测试程序两次释放了同一个块。与非法读/写错误一样，Memcheck 尝试理解释放的地址。如果像这里一样，地址是以前被释放的地址，你会被告知——使同一块的重复释放很容易被发现。

最后看看这个：[strtok function thread safety](https://stackoverflow.com/questions/4031075/strtok-function-thread-safety) 你可以尝试使用 strtok_r()

# java - 如何避免在 glassfish ldap 配置文件中以明文形式存储密码？

> ID：15958208
> 
> 赞同：0
> 
> 时间：2013-04-11T20:24:39.903
> 
> 标签：java, jsp, glassfish, ldap, glassfish-3

*上下文*：我使用 jsp 开发了一个 webapp，并使用 Glassfish 3.1 安装了它，我成功地验证了我的用户，通过询问他们的用户名和密码，使用我服务器中的 XML 文件到 LDAP，如下所示：

安全配置.xml：

```
<security:authentication-manager alias="authenticationManager">     
<security:ldap-authentication-provider 
        group-search-base="OU=OFN_Users,OU=_OFN"        
        user-search-filter="(sAMAccountName={0})" 
        server-ref="ldapLocal"
        role-prefix="ROLE_">       
</security:ldap-authentication-provider>
</security:authentication-manager> 
...
<security:ldap-server url="ldap://X.X.X.X:X/DC=X,DC=X,DC=X" 
         id="ldapLocal" 
        manager-dn="user@domain" 
        manager-password="PASSWORD"
/>
... 
```

*问题*：有没有办法避免将密码以明文形式存储在 security-config.xml 配置文件中？

谢谢。

*编辑：*如果有一种方法根本不将密码存储在外部文件中，我也想知道...

# ios - 如何将应用程序图标徽章连接到应用程序中的标签？

> ID：15958210
> 
> 赞同：-2
> 
> 时间：2013-04-11T20:24:43.280
> 
> 标签：ios, xcode, icons, badge

我正在制作一个年龄计算应用程序，我想将天数（应用程序内的标签）连接到应用程序徽章（应用程序图标上的小红色形状，例如邮件（当你有邮件时）） . 有没有办法做到这一点？

感谢所有帮助！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T20:31:10.873

如果我理解正确，您希望**将图标徽章**的值**与标签**的值**同步：**

 ****```
// Add an observer that listens for changes in the text of the label
[label addObserver:self
        forKeyPath:@"text"
           options:NSKeyValueObservingOptionNew | NSKeyValueObservingOptionOld
           context:NULL];

// Implement the observer method on `self`
- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context
{
    NSString *text = [change objectForKey:NSKeyValueChangeNewKey];
    [UIApplication sharedApplication].applicationIconBadgeNumber = text.integerValue;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T20:27:26.683

应用程序图标徽章可以通过以下方式设置：

```
[UIApplication sharedApplication].applicationIconBadgeNumber = 42; //Number of Days 
```

例如，如果您的标签只显示一个数字，您可以使用以下代码：

```
NSInteger number = self.myLabel.text.integerValue;
[UIApplication sharedApplication].iconBadgeNumber = number; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T20:29:42.787

```
NSInteger badgeNumber = [[yourLabel text] integerValue];
[[UIApplication sharedApplication] setApplicationIconBadgeNumber:badgeNumber]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T20:27:39.890

使用此代码：

```
[[UIApplication sharedApplication] setApplicationIconBadgeNumber:YOUR_VALUE]; 
```

更改徽章上图标的值****

# c# - 如何为未来可能发生变化的数据库表设计数据访问层？

> ID：15958212
> 
> 赞同：2
> 
> 时间：2013-04-11T20:24:46.653
> 
> 标签：c#, database, entity-framework

**介绍：**

在我目前的实习中，我正在重构（几乎重写）一个遗留应用程序。这个问题将关注的部分是它使用的数据库以及他们从中检索数据的方式。

数据库结构为：

1.  有一个包含主要记录的表。假设每条记录都是一个测量值。它有一些关于被测材料和不同测量信息的信息。
2.  他们使用的表格视图具有相同的信息列，以及一些包含根据给定测量计算的数据的额外列。它还过滤了表中的一些数据。

因此，假设我们有带有列的主表：

```
Measurement ID
Measurement A
Measurement B 
```

该视图具有以下内容：

```
Measurement ID
Measurement A
Measurement B
Some extra data (for example Measurement A * Measurement B) 
```

领导开发的人只会一些 SQL，所以他喜欢在主表中添加由某些列计算的新列来进行实验。这绝对是目前的**需要**。

**要求是：**

1.  应支持不同类型的数据库（如 SQL Server、Oracle 和可能的其他一些数据库）。
2.  前端应该能够显示视图，这意味着即使某些主列始终保持不变，也可能会有一些新列包括新计算的值。

**我的问题是：**

我应该使用什么样的系统来满足这个应用程序的需求？我想使用实体框架，但是视图将来可能有新列的事实我认为是一个问题。据我了解，我应该在编译之前将我的类映射到数据库。

我正在考虑的另一件事可能是使用实体框架从主表中获取数据，并直接在前端直接在表视图中进行当前完成的计算和过滤，并完全跳过视图。听起来不错，但我不知道他们是否会允许我这样做。

在我的情况下你会怎么做？请考虑到我几乎没有使用数据库和 ORM 的经验。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T20:56:08.670

你是对的，如果底层数据库模式总是在变化，那么使用实体框架将是一个问题。每次都需要您更新 EF 模型以获取这些新列。

理想情况下，您的所有数据库访问都隐藏在 DAL 的接口后面，因此您的应用程序不需要知道正在使用哪个 ORM（如果有）或它正在连接到哪个数据库。

我不想这么说，但考虑到您的要求，ORM 可能没有意义。您可能想要使用更通用的东西而不需要任何强类型。您可以简单地始终将 DataTable 返回到您的应用程序层，它可以循环遍历列和值以显示返回的任何内容。如果您知道某些字段永远不会更改，您可以将这些字段手动映射到您的应用程序对象中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T23:44:13.507

你可以看看[NoSQL](https://en.wikipedia.org/wiki/NoSQL)系统，它在模式上更加灵活。或者看看像[RavenDB](http://ravendb.net/)这样的文档数据库。所有这些系统都允许模式动态改变。您需要检查 Pro's 和 Con's 以查看它是否可以满足您的要求。

（这个答案有点超出主题，因为它是关于替换 SQL 服务器而不是真正创建 DAL，但其他答案很好地涵盖了这个主题，我想提出另一种可能有帮助的方法。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T21:17:45.167

如果您的架构不稳定，那么初学者使用 Entity Framework 会很头疼。假设您可以定期刷新设计画布以让工具处理数据库表更改。您可以尝试一段时间，看看它何时变得太痛苦，但如果没有任何使用 ORM 或实体框架的经验，可能不值得付出努力。

我可能会使用类似 Rob Conery 的 Massive ORM ( [https://github.com/robconery/massive](https://github.com/robconery/massive) ) 之类的东西。它为您提供了更多使用底层数据库模式的灵活性，并且是一个非常小的库。我记得它大约有 300 行代码，而且非常易于使用。它使用 C# 动态，因此您必须使用 >= C# 4.0 并且对这一概念感到满意，但 IMO 对低开销来说是值得的。像 Entity Framework 或 NHibernate 这样成熟的 ORM 将花费大量的学习周期。

当然，您可以只使用 ADO.NET DataTables。它们有点丑陋和冗长，但它们会完成这项工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T21:18:04.140

如果数据库正在更改，您可以使用实体框架 - 数据库优先。当然，当您希望能够访问新列时，当数据库架构发生变化时，您将不得不重新生成您的类。

如果您需要容纳不同的数据库服务器，那么您应该考虑实现存储库模式并以这种方式抽象您的所有数据访问。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T22:47:06.497

你的评论

> 它涉及对主表的写操作，但主表永远不会改变

证实了我的期望。这意味着您可以使用实体框架作为应用程序的核心，并使用不同的路径来显示数据。

假设您使用经典的（视图的）显示`DataTable`（因为所有常见的网格都支持它们，与显示动态对象相反）。我不知道如何创建/更新/删除，但保存更改有时会涉及将 a 映射`DataRow`到`MainEntity`对象。您可以为此编写一种方法

```
MainEntity DataRowToEntity(DataRow row)
{
    var entity = new MainEntity();
    entity.PropertyA = row["PropertyA"];
    ....
} 
```

`MainEntity`可以附加到上下文，其状态更改为并`Modified`保存。

# c++ - Dev C++ 错误“重新声明 C++ 内置类型‘short’”中的过剩

> ID：15958218
> 
> 赞同：1
> 
> 时间：2013-04-11T20:25:10.893
> 
> 标签：c++, opengl, compiler-construction, glut, dev-c++

我有这个简单的三角形绘图代码，它会产生错误“重新声明 C++ 内置类型 short”。但是当我放`#include<iostream.h>`之前`#include<glut.h>`，它会编译并运行。谁能解释这背后的逻辑？

```
#include<glut.h>
void renderScene(void) {

    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    glBegin(GL_TRIANGLES);
        glVertex3f(-0.5,-0.5,0.0);
        glVertex3f(0.5,0.0,0.0);
        glVertex3f(0.0,0.5,0.0);
    glEnd();

        glutSwapBuffers();
}

int main(int argc, char **argv) {

    // init GLUT and create Window
    glutInit(&argc, argv);
    glutInitDisplayMode(GLUT_DEPTH | GLUT_DOUBLE | GLUT_RGBA);
    glutInitWindowPosition(100,100);
    glutInitWindowSize(320,320);
    glutCreateWindow("My first program");

    // register callbacks
    glutDisplayFunc(renderScene);

    // enter GLUT event processing cycle
    glutMainLoop();

    return 1;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T21:37:50.847

很难说没有看到您的确切 glut.h 和库版本，但我看到了 glut.h 的回旋处第 45 行：

```
 /* XXX This is from Win32's <ctype.h> */
#  ifndef _WCHAR_T_DEFINED
typedef unsigned short wchar_t;
#   define _WCHAR_T_DEFINED
#  endif 
```

如果`wchar_t`已定义（`short`例如 to），但`_WCHAR_T_DEFINED`宏未定义，则该行将被视为：

```
typedef unsigned short short; 
```

这是对内置类型的重新声明。`<iostream>`（不要使用 .h 顺便说一句，根据标准不再使用它）正在添加定义以使 typedef 不被执行，或者`wchar_t`如果它是一个宏以使 typedef 是合法的，则取消定义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-07-21T13:22:08.317

`error redeclaration of c++ built-in type 'wchar_t'`我在我的赛车项目时面临。我在谷歌搜索，但没有找到任何解决我的问题的解决方案:-(

但后来，我自己通过包含“windows.h”解决了这个问题:-)

```
#include<windows.h>
#include<bits/stdc++.h>
#include<GL/glut.h> 
```

`#include<windows.h>`必须在顶部添加。如果添加在下面`glut.h`会有错误。

`#include<bits/stdc++.h>`只是为了安全而添加的：-p

使用`#include<GL/glut.h>`或`#include<glut.h>`取决于`glut.h`已放置的文件夹。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-13T08:11:12.057

我遇到了同样的问题，将“glut.h”文件中的 wchar_t 变量名更改为 wchar_tt，它工作正常。

```
#  ifndef _WCHAR_T_DEFINED
typedef unsigned short wchar_tt;
#   define _WCHAR_T_DEFINED
#  endif
# endif 
```

# ruby-on-rails - Rails 4 postgres 错误 - 无法创建数据库，因为 pg gem“丢失”，但它不是

> ID：15958219
> 
> 赞同：0
> 
> 时间：2013-04-11T20:25:13.143
> 
> 标签：ruby-on-rails, postgresql, gem, ruby-on-rails-4

我使用 rails edge (4.0) 和执行时：

```
bundle exec rake db:create 
```

我明白了

```
Specified 'postgresql' for database adapter, but the gem is not loaded. Add `gem 'pg'` to your Gemfile. 
```

我的 Gemfile 中确实有“gem pg”，并且我已经运行了 bundle install ...

这可能是什么原因？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T20:59:20.133

问题是我使用的是旧版本的 pg gem (0.9.0)，新版本按预期工作！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-13T16:26:52.603

对我来说，无需用户/通行证即可工作，并使用`host`设置`config/database.yml`

```
defatul: &default
  adapter: postgresql
  encoding: utf-8
  host: localhost
  pool: 5

development:
  <<: *default
  database: appname_development

test:
  <<: *default
  database: appname_test 
```

# java - 名称“”对于 JDOM/XML 命名空间是不合法的

> ID：15958221
> 
> 赞同：1
> 
> 时间：2013-04-11T20:25:25.223
> 
> 标签：java, xml, jdom, jdom-2, xerces2-j

我使用 JDOM2 从远程提要检索不受我控制的 XML。对于其中一个，我得到了这个错误：

> 名称 "" 对于 JDOM/XML 命名空间是不合法的：命名空间 URI 必须是非空且非空的字符串。

这是 XML 的示例：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Result xmlns="urn:XYZ" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" attributeA="1" attributeB="2" attributeC="3" xsi:schemaLocation="http://XYZ.com/ZYZ.xsd">
...
</Result> 
```

如果我使用正则表达式删除 xsi:schemaLocation，该错误就会消失。

```
private String stripSchemaLocation(String xml) {
    return xml.replaceAll("xsi:schemaLocation=\"(.+?)\"", "");
} 
```

这是我的 JDOM2 解析代码。它在 builder.build 上失败

```
// Schema location is causing problem with some xml.
xml = stripSchemaLocation(xml);

SAXBuilder builder = new SAXBuilder();

//@see http://xerces.apache.org/xerces-j/features.html
builder.setFeature("http://xml.org/sax/features/validation", false);
builder.setFeature("http://xml.org/sax/features/namespaces", false);
builder.setFeature("http://apache.org/xml/features/validation/schema", false);

//@see http://www.jdom.org/docs/faq.html#a0350
builder.setFeature("http://apache.org/xml/features/nonvalidating/load-dtd-grammar", false);
builder.setFeature("http://apache.org/xml/features/nonvalidating/load-external-dtd", false);

org.jdom2.Document doc2 = builder.build(new InputSource(new StringReader(xml)));

// --Then doing XPath stuff with this XML-- 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T21:05:42.873

来自 JavaDoc：[http://www.jdom.org/docs/apidocs/org/jdom2/input/SAXBuilder.html#setFeature(java.lang.String,%20boolean)](http://www.jdom.org/docs/apidocs/org/jdom2/input/SAXBuilder.html#setFeature(java.lang.String,%20boolean))

此外，在使用 JDOM 时*绝不应该这样做：*

```
builder.setFeature("http://xml.org/sax/features/namespaces", false); 
```

请参阅包文档[http://jdom.org/docs/apidocs/org/jdom2/input/sax/package-summary.html](http://jdom.org/docs/apidocs/org/jdom2/input/sax/package-summary.html)，其中指出：

```
Note that the existing JDOM implementations described above all set the generated XMLReaders to be namespace-aware and to supply namespace-prefixes. Custom implementations should also ensure that this is set unless you absolutely know what you are doing 
```

您可能想要做的只是：

```
SAXBuilder builder = new SAXBuilder(XMLReaders.NONVALIDATING); 
```

碰巧的是，它与以下内容相同：

```
SAXBuilder builder = new SAXBuilder(); 
```

因此您的代码将是：

```
SAXBuilder builder = new SAXBuilder();

//@see http://www.jdom.org/docs/faq.html#a0350
builder.setFeature("http://apache.org/xml/features/nonvalidating/load-dtd-grammar", false);
builder.setFeature("http://apache.org/xml/features/nonvalidating/load-external-dtd", false);

org.jdom2.Document doc2 = builder.build(new InputSource(new StringReader(xml))); 
```

# jquery - 在wordpress中运行jquery还需要什么？

> ID：15958224
> 
> 赞同：1
> 
> 时间：2013-04-11T20:25:34.627
> 
> 标签：jquery, wordpress

我一直试图让 jquery 在我正在构建的 wordpress 主题中运行。如果我对非文字网站使用传统方法，我可以让它工作：

```
<script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script> 
```

但我读过这不是在 wordpress 中使用 jquery 的正确方法，因为它可能会导致冲突和其他问题。我已经阅读了 wordpress 法典和这个网站：[http](http://www.ericmmartin.com/5-tips-for-using-jquery-with-wordpress/) ://www.ericmmartin.com/5-tips-for-using-jquery-with-wordpress/这实际上比法典更有帮助。我已经在 StackOverflow 上检查了类似的问题，并尝试了那里列出的解决方案，但 jquery 仍然无法加载。我发现的关于这个主题的其他网站不是很清楚。这是我的 functions.php 文件中到目前为止的代码，但它仍然无法正常工作：

```
function jqry_init() {
    if (!is_admin()) {
        // comment out the next two lines to load the local copy of jQuery
        wp_deregister_script('jquery');
        wp_register_script('jquery', 'http://code.jquery.com/jquery-latest.min.js', false);
        wp_enqueue_script('jquery');
    }
}

add_action('init', 'jqry_init'); 
```

我尝试从 Google 直接从 jquery 加载它，并引用我在网站上的文件中的 jquery 副本。这些工作都不是。我应该提一下，如果这有所作为，我将在 localhost 上使用 xampp 完成所有这些工作。我错过了什么？

**更新：** 这是我正在运行的片段/其他脚本：

```
<script type="text/javascript" src="<?php bloginfo('template_url'); ?>/scripts/isotope.js"></script>

        <script type="text/javascript">
            JQuery(document).ready(function($) {
                var $container = $('#content');
                $container.isotope({
                    filter: '*',
                    animationOptions: {
                        duration: 750,
                        easing: 'linear',
                        queue: false,
                    }
                });

                JQuery('#nav a').click(function($) {
                    var selector = $(this).attr('data-filter');
                    $container.isotope({
                        filter: selector,
                        animationOptions: {
                            duration: 750,
                            easing: 'linear',
                            queue: false,
                        }
                    });
                    return false;
                });

            });
        </script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T20:32:04.353

您想使用`wp_enqueue_scripts`钩子添加脚本。您不需要检查管理员，因为管理员脚本还有另一个挂钩`admin_enqueue_scripts`

```
function jqry_init() {

    // comment out the next two lines to load the local copy of jQuery
    wp_deregister_script('jquery');
    wp_register_script('jquery', 'http://code.jquery.com/jquery-latest.min.js', false);
    wp_enqueue_script('jquery');

}

add_action('wp_enqueue_scripts', 'jqry_init'); 
```

如果您的 jQuery 片段仍然无法正常工作，则可能是由于没有冲突的包装器。

例如，如果以下内容不起作用并且您得到的是`$ is not defined error`：

```
$( document ).ready( function() {
   //do stuff here
}); 
```

您需要将其更改为

```
jQuery( document ).ready( function( $ ) {
    //do stuff here with the $ shorthand
}); 
```

**更新**

在您`header.php` 的结束`</head>`标签之前，请确保您有 `<?php wp_head();?>`

`wp_head()`很重要，因为这是添加的函数`wp_enqueue_scripts`将运行的地方。没有它，它们将无法运行。

# asp.net-mvc - 带有错误消息的重定向到操作

> ID：15958225
> 
> 赞同：12
> 
> 时间：2013-04-11T20:25:38.427
> 
> 标签：asp.net-mvc, redirecttoaction

我的 AdminUsers 视图中的网格上有一个链接

```
grid.Column(header: "", format: (item) => (condition ? Html.ActionLink("Impersonate", "Impersonate", "Admin", new { id = item.username }, null) : Html.Label("Impersonate"), style: "webgrid-column-link"), 
```

在控制器中，我有

```
public ActionResult Impersonate(string id)
{
    string result = ORCA.utilities.users.setImpersonation(id);
    if(result == "nocommonfields")
        return RedirectToAction("AdminUsers", "Admin");
    else
        return RedirectToAction("terms_of_use", "Forms");
} 
```

当我返回 AdminUsers 页面时，如何发送错误消息以显示？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-04-11T20:28:54.800

您可以使用**TempData**

```
if(result == "nocommonfields")
{
    TempData["ErrorMessage"]="This is the message";
    return RedirectToAction("AdminUsers", "Admin");
} 
```

在您的 AdminUsers 操作中，您可以阅读它

```
public ActionResult AdminUsers()
{
  var errMsg=TempData["ErrorMessage"] as string;
 //check errMsg value do whatever you want now as needed
} 
```

请记住，TempData 的生命周期很短。会话是临时数据背后的备份存储。

或者，您也可以考虑在您的查询字符串中发送一个标志并在您的下一个操作方法中读取它并决定要显示什么错误消息。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-08-23T08:21:10.897

[`TempData`](https://msdn.microsoft.com/en-us/library/system.web.mvc.controllerbase.tempdata(v=vs.118).aspx)控制器属性可用于实现这种功能。我认为它的主要缺点是它使用会话存储来存储其内容。这意味着您需要做额外的工作才能使其在网络场上运行，或者您首先需要打开会话。

好处`TempData`是这正是你想要的。它是一个基于字符串的字典，你可以在里面放任何东西，默认情况下只能取出一次。所以在打电话给`RedirectToAction()`你之前设置你的消息。在下一个请求中，您检查消息并显示它们。通过检索消息，它们会在请求结束时自动删除。

作为替代方案，您可以使用 cookie 在两个请求之间传输消息。本质上，您可以推出自己的解决方案，也可以实现自定义，通过 cookie[`ITempDataProvider`](https://msdn.microsoft.com/en-us/library/system.web.mvc.itempdataprovider(v=vs.118).aspx)传输内容。`TempData`请注意，您需要正确保护 cookie。[`MachineKey.Protect()`](https://msdn.microsoft.com/en-us/library/system.web.security.machinekey.protect(v=vs.110).aspx)如果您自己滚动，可以为您提供帮助。

我遇到了同样的问题，并为它创建了一个名为**[FlashMessage](https://github.com/Vereyon/FlashMessage)**的解决方案。也许这可以为您节省一些工作。它也可以在[NuGet](https://www.nuget.org/packages/Vereyon.Web.FlashMessage)上使用。用法很简单：您只需在调用之前排队一条消息`RedirectToAction()`，如下所示：

```
if(result == "nocommonfields")
{
    FlashMessage.Warning("Your error message");
    return RedirectToAction("AdminUsers", "Admin");
} 
```

在您看来，您包含以下语句来呈现任何先前排队的消息：

```
@Html.RenderFlashMessages() 
```

# java - GPathResult ..存在或不存在节点

> ID：15958226
> 
> 赞同：6
> 
> 时间：2013-04-11T20:25:45.110
> 
> 标签：java, xml, xpath, groovy, gpath

我的 GPathResult 可以通过以下 3 种方式之一拥有名称节点

1）名称节点存在并具有值ex：John

2) 名称节点存在，但其中没有值。

3) 根本不存在名称节点。

在 Groovy 代码中，我如何使用我的 Gpathresult 区分上述 3 种情况。我是否使用类似 gPathResult 的东西。值（）！=空？

伪代码：

```
if(name node is present and has a value){
do this
}

if(name node exists, but has no value in it){
do this
}

if( No name node exists at all){
do this
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-08-27T12:14:23.920

你必须测试`size()`. 继续 Olivier 的示例，只是修复了它，以便`GPathResult`使用它并且它适用于两者，`XmlSlurper`这里`XmlParser`是代码：

```
def xml="<a><b>yes</b><c></c></a>"
def gpath = new XmlSlurper().parse(new ByteArrayInputStream(xml.getBytes())) 
["b", "c", "d" ].each() {
    println it
    if (gpath[it].size()) {
        println "  exists"
        println gpath[it].text() ? "  has value" : "   doesn't have a value"
    } else {
        println "  does not exist"
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-17T16:05:46.833

测试 gpath 结果是否为 null 以检查是否存在，并使用`.text()`方法获取元素值（如果没有值，则为空字符串）。这是一个例子：

```
def xml="<a><b>yes</b><c></c></a>"
def gpath = new XmlParser().parse(new ByteArrayInputStream(xml.getBytes())) 
["b", "c", "d" ].each() {
    println it
    if (gpath[it]) {
        println "  exists"
        println gpath[it].text() ? "  has value" : "   doesn't have a value"
    } else {
        println "  does not exist"
    }
} 
```

（`gpath[it]`符号是因为变量替换，如果你寻找一个特定的元素，比如`b`then 你可以使用`gpath.b`）

# java - Scanner(System.in) - 如何取消/跳过输入等待

> ID：15958228
> 
> 赞同：1
> 
> 时间：2013-04-11T20:25:47.787
> 
> 标签：java, multithreading, io

我只是想知道如何在单独的线程中控制控制台输入？
我有线程 A 和线程 B 和线程 C；B 和 C 他们都控制用户输入......问题是我不太确定如何在 B 和 C 线程之间切换，`scanIn.nextLine();`因为 B 似乎在线程 C 可以中断 B 之前循环了两次不必要的迭代 :(

主线程：

```
 public class Main
        {
            private volatile ThreadGroup threadGroup=new ThreadGroup();//contains concurrent hash map...
            private volatile TaskManager taskManager=new TaskManager(threadGroup);
            private A a=new A(threadGroup);
            private B b=new B(threadGroup,taskManager);
            private C c=new C(threadGroup);

     Main()
    {

      b.start();

      threadGroup.add(a,"A");
      threadGroup.add(b,"B");
      threadGroup.add(c,"C");
    }

    public static void main(String args[]){new Main();}

        } 
```

TaskManager 方法片段：

```
...
public synchronized void threadCMaybeCanBeStartedLater()
{
      this.getThreadGroup().get("A").start(); 
}
... 
```

线程 类似*（被覆盖的运行方法调用）*的代码：

```
public void loopIt()
{
   Random generator = new Random(); 
   A: while(!this.interrupted())
{
   Thread.sleep(1000);

   int i=generator.nextInt(100)+1;
   int j=generator.nextInt(100)+1;
   if(i==j){this.invokeC(); System.out.println("event : i==j");}

    }
 }

private void invokeC()
{
  if(!this.getThreadGroup().get("C").isAlive())this.getThreadGroup().get("C").start(); 
} 
```

线程 B 代码如下：

```
public void loopIt() throws InterruptedException
    {

        Scanner scanIn = new Scanner(System.in);

        B: while(!this.isInterrupted())
        {

            Thread.sleep(1000);

            String command= scanIn.nextLine();
...

         if(command.equals("a"))
        {   
            System.out.println("a was entered");
            this.getTaskManager().threadCMaybeCanBeStartedLater();//             
            continue;
        }
        if(command.equals("b"))
        {   
           System.out.println("b was entered");            
           continue;
        }
        if(command.equals("c"))
        {
            System.out.println("c was entered");
            continue;
        }
        else{System.out.println("no such command");}

    }

} 
```

线程 C *（run 方法调用）*

```
public void loopIt() throws InterruptedException
        {
            getThreadGroup().get("B").interrupt();

            Scanner scanIn = new Scanner(System.in);

            C: while(!this.isInterrupted())
            {

                Thread.sleep(1000);

                String command= scanIn.nextLine();
    ...

             if(command.equals("d"))
            {   
                System.out.println("d was entered");             
                continue;
            }
            if(command.equals("e"))
            {   
               System.out.println("e was entered");            
               this.interrupt();
               break C;
            }
            if(command.equals("f"))
            {
                System.out.println("f was entered");
                continue;
            }
            else{System.out.println("no such command");}

        }

       getThreadGroup().get("B").start();

    } 
```

...如您所见，主要代码概念（请参阅线程片段）是“*您不知道线程 C**何时**可以启动，但何时启动您需要给它控制台*”；就这样; 如果它是 GUI 则没有问题，但类似控制台的应用程序会带来很大的问题......

所以问题是......在这种情况下，如何立即从线程 C 中断/重新启动线程 B？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T04:52:11.557

**使用线程类同步线程**

1.  **Thread.interrupt() 本身不会*同步*两个线程之间的逻辑和时间**。

    **Thread.interrupt()**表示调用者希望*线程*在不久的将来一次中断。interrupt() 方法设置一个中断标志。isInterrupted() 方法检查是否设置了该标志（& 也再次清除该标志）。当抛出 InterruptedException 时，Thread.sleep()、Thread.join()、Object.wait() 方法和许多 I/O 方法也会检查并清除此标志。

    线程不会立即暂停，而是继续运行代码。内部线程逻辑是由开发人员设计和实现的：继续运行被认为是原子/紧急的线程代码，直到它到达“可中断点”，然后检查中断标志/捕获 InterruptedException 然后做一个干净的暂停 - 通常通过**线程。 sleep()**，**Thread.join()**或**Object.wait()**，有时通过完全退出**Thread.run()**从而永久停止线程。

    虽然所有这一切都在发生，但调用线程仍在运行，并将在中断生效之前执行不确定数量的代码......因此缺乏同步。一个线程中的代码和另一个线程中的代码之间缺乏保证**的先发生条件。**

2.  一些在两个线程之间同步逻辑和时序的方法*（*创建**先发生条件**）：

    *   thread1 调用 Thread2.join()

    *   thread1 调用 SomeObject.wait() 和 thread2 调用 SomeObject.notify()

    *   在方法或块上同步

**快速查看您的代码：**

1.  线程 B 在无限循环中运行 - 没有任何线程调用中断它，也没有调用它的线程等待（）。但是，它将暂时阻塞，直到 System.in 有更多输入，然后继续。
2.  线程 A 只会中断自身 - 如果您不调用`this.interrupt()`and ，则更易于分析逻辑`while(!this.isInterrupted())`：只需将 while 循环更改为： `do { .... } while (i != j)`
3.  线程 A 只会中断自己 - 如果您不调用`this.interrupt()`and ，则更清晰且更容易分析逻辑`while(!this.isInterrupted())`：只需将 while 循环更改为： `do { .... } while (!"e".equals(command))`
4.  线程 C 必须在其 while 循环的顶部进行以下调用：

    ```
     threadB.interrupt();
     synchronized(this) {
         try {
             this.wait();
         } catch (InterruptedException ie) {
         } 
    ```

5.  线程 B 必须在最后一行代码中进行以下调用：

    ```
     synchronized(threadC) {
             threadC.notify();
     } 
    ```

6.  从 I/O ( ) 读取`nextLine()`是一个阻塞和可中断的操作。在它旁边你介绍了`Thread.sleep()`这也是一个阻塞和可中断的操作，它会在你的代码中引入人为的延迟——这不是必需的；消除。

7.  您调用的唯一 Scanner 方法是`nextLine()`. 您将其用作 InputStreamReader 并且不进行任何扫描。此外，您没有缓冲输入。如果代码保持这样，请将“ `Scanner scanIn = Scanner(System.in)`”替换为：“ `BufferedReader reader = new BufferedReader(new InputStreamReader(System.in))`”。
8.  您调用的唯一`ThreadGroup`方法是`add()`and `get()`。您正在使用它，就好像它是一个`HashMap`& 不做任何线程组管理一样。如果代码保持这样，您可以将 ' `ThreadGroup`' 替换为 ' `HashMap`'。然而，即使是 HashMap 似乎也太过分了——可以简单地使用构造函数/设置器将 Threads 引用传递给其他 Threads，并完全避免 HashMap。
9.  避免过度使用`continue`内部循环——尽量避免。`if`最好通过使用 ' ' 将连续的 ' ' 语句链接在一起来做到这一点`} else if {`......
10.  主线程和线程 B 之间的潜在竞争条件。当线程 B（从`Main()`）启动时，它可能会在主线程执行更多代码之前执行多行代码 - B 可能会在主线程调用 ThreadGroup.add 之前调用 ThreadGroup.get() () x 3\. 解决方法：在 Main() 中，将 b.start() 放在 ThreadGroup.add() x 3 之后
11.  一般来说，`"a".equals(command)`比`command.equals("a")`它处理空值更好，在没有 NPE 的情况下给出正确的结果（你在这里看起来很幸运 - 可能不会有空值）。

**建议更改：**

```
public class ThreadA extends Thread {

    ThreadC threadC;

    public void setThreadC(ThreadC threadC) {
        this.threadC = threadC;
    }

    @Override
    public void run() {
        this.loopIt();
    }

    public void loopIt() {
        Random generator = new Random(); 
        int i, j;
        do {
            try { 
                Thread.sleep(1000);
            } catch (InterruptedException ie) {                
            }
            i=generator.nextInt(100)+1;
            j=generator.nextInt(100)+1;
        } while (i != j);
        threadC.start();
    }

}
public class ThreadB extends Thread {

    ThreadA threadA;
    ThreadC threadC;

    public void setThreadA(ThreadA threadA) {
        this.threadA = threadA;
    }
    public void setThreadC(ThreadC threadC) {
        this.threadC = threadC;
    }

    @Override
    public void run() {
        this.loopIt();
    }

    public void loopIt() {
        BufferedReader reader = new BufferedReader(new InputStreamReader(System.in));
        String command = null;
        // loop until interrupted
        try {
            while (!this.isInterrupted()) {
                command = reader.readLine();
                if ("a".equals(command)) {   
                    System.out.println("a was entered");
                    if (threadA.getState() == Thread.State.NEW) {
                        threadA.start();
                    }
                } else if ("b".equals(command)) {   
                    System.out.println("b was entered");            
                } else if ("c".equals(command)) {
                    System.out.println("c was entered");
                } else if ("z".equals(command)) {
                    System.out.println("z was entered");
                    throw new InterruptedException("Command z interruption");
                } else {
                    System.out.println("no such command");
                }
            }
        } catch (IOException ioe) {
            ioe.printStackTrace();
        } catch (InterruptedException ie) {
        }
        // Now notify ThreadC - it will wait() until this code is run
        synchronized(threadC) {
            threadC.notify();
        }
    }
}

public class ThreadC extends Thread {

    ThreadB threadB;

    public void setThreadB(ThreadB threadB) {
        this.threadB = threadB;
    }

    @Override
    public void run() {
            this.loopIt();
   }

    public void loopIt() {
        // Block until the lock can be obtained
        // We want thread B to run first, so the lock should be passed into Thread C constructor in an already locked state
        threadB.interrupt();
        synchronized(this) {
            try {
                // Put this thread to sleep until threadB calls threadC.notify().
                //
                // Note: could replace this line with threadB.join() - and remove  
                // from threadB the call to threadC.notify()
                this.wait();
            } catch (InterruptedException ie) {
            }
            BufferedReader reader = new BufferedReader(new InputStreamReader(System.in));
            String command = null;
            while (!"e".equals(command)) {
                try {
                    command= reader.readLine();
                    if ("d".equals(command)) {   
                        System.out.println("d was entered");             
                    } else if ("e".equals(command)) {    
                        System.out.println("e was entered");            
                    } else if ("f".equals(command)) {
                        System.out.println("f was entered");
                    } else if ("z".equals("command")) {
                        System.out.println("z was entered");
                    } else { 
                        System.out.println("no such command");
                    };
                } catch (IOException ioe) {
                    ioe.printStackTrace();
                }
            }
        }        
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T20:34:05.353

`nextLine()`不响应中断。你想做类似的事情

```
String command;
if (scanIn.hasNextLine())
    command = scanIn.nextLine();
else
    Thread.sleep(1000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T22:27:09.400

您可以使用标志变量（作为全局变量）来控制`while loop`每个线程中的...

假设线程 A 有一个像这样的无限循环

```
while(true)
 while(x == 1){
   your code ...
 }
  Thread.sleep(2000);
} 
```

当线程 b 启动时，您可以将 x 更改为 0（假设 x 是一个全局变量），然后当线程 b 完成执行时，在线程 b 代码的末尾将 x 更改为 1...

或者您可以根据标志值从线程本身中断线程`x`

# c - 指向函数的外部指针数组

> ID：15958229
> 
> 赞同：3
> 
> 时间：2013-04-11T20:25:49.710
> 
> 标签：c, arrays, typedef, extern

先说一点上下文。我的程序有一个标题，`work.h`. 这个头文件包含一个结构、一些函数定义和一个指向我的基本函数的外部指针数组。

**工作.h**

```
typedef struct _foo {
  int id;
  char something[20];
} foo;

typedef void (*pointer_function)(foo *);

void do_first_to_foo(foo *);

void do_second_to_foo(foo *);

void do_third_to_foo(foo *);

extern pointer_function base_functions[3]; 
```

然后是`work.c`用函数体调用的程序，然后是主程序`main.c`。在头部观察`work.h`，我已经定义了三个函数的原型，并且数组的大小是 3，所以 extern 数组上的指针将指向 3 个函数中的每一个。

我的问题是，如何将 extern 数组的指针与三个函数相关联，其次，我需要在哪个文件中执行此操作（`work.c`或`main.c`）。

我明白这个关联我需要在文件中做`work.c`，但没有别的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T20:28:57.423

在`work.c`：

```
#include "work.h"

pointer_function base_functions[] = {
    do_first_to_foo,
    do_second_to_foo,
    do_third_to_foo }; 
```

说明：该数组名是一个全局符号，实际上只需要在一个编译单元中定义（`.o`从文件生成的`.c`文件）。如果你没有它，链接器将找不到它。如果您有多个副本，链接器会抱怨。您只需要一个，与全局导出函数（未标记为内联）相同。

编辑：添加了显示`#include "work.h"`，这很重要，因为它允许*编译器*检查`extern`声明是否与实际定义匹配。如果你忽略它，一切都会编译和链接而不会抱怨，但是如果有不匹配，你不会得到任何迹象，这可能会造成严重破坏，比如在其他编译单元中使用变量时损坏内存中的其他数据。

# ruby - 如何输出 RVM 所需的下载 URL

> ID：15958232
> 
> 赞同：1
> 
> 时间：2013-04-11T20:26:00.477
> 
> 标签：ruby, rvm

我正在尝试在我的工作站中安装 RVM。但在我工作的网络中，互联网是通过代理访问的。此代理最终会根据内部安全策略阻止某些 URL。

我将向网络管理员提出关于被阻止的 URL 的请求，以便他们可以为一组工作站解除阻止。这非常重要，因为政策需要不断更新。

我需要知道安装正在尝试下载哪个 URL 并且被阻止。

当我尝试安装 RVM 时，它会尝试下载档案。被阻止的到达我的计算机时已损坏。我可以在输出中看到抱怨校验和错误的消息。

例如

```
从源代码安装 Ruby 到：/usr/local/rvm/rubies/ruby-2.0.0-p0，这可能需要一段时间，具体取决于您的 cpu...
ruby-2.0.0-p0 - #downloading ruby​​-2.0.0-p0，这可能需要一段时间，具体取决于您的连接...

  % 总计 % 接收 % Xferd 平均速度 时间 时间 时间 当前
                                 下载上传总花费剩余速度
  0 0 0 0 0 0 0 0 --:--:-- 0:00:06 --:--:-- 0
100 3198 100 3198 0 0 532 0 0:00:06 0:00:06 --:--:-- 532

下载的存档校验和不匹配，存档已删除！
如果您希望继续不匹配的下载，请在命令后添加“--verify-downloads 2”。

获取 ruby​​ 解释器时出错。停止安装。

```

如何查看 RVM 安装中下载的 URL？宝石捆绑器可能也需要这个。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T03:33:36.977

跑：

```
rvm get head              # make sure you use latest rvm code
rvm cleanup archives      # clean up all downloaded files so far 
rvm install 2.0.0 --debug # install with debug - it will show the downloaded urls 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T20:41:54.373

它提供了**很多**输出，但如果您使用`--debug --trace`开关安装，那么您会看到RVM 正在执行的*所有*操作，包括它请求的 URL：

```
$ rvm install 2.0.0 --debug --trace
# ...
# a whole boatload of output
# such as...
+++ 1365712695.744278786 /scripts/functions/utility : __rvm_ruby_package_file()  569 > rvm_ruby_package_file=/ruby-2.0.0-rc2.tar.bz2
+++ 1365712695.856579187 /scripts/functions/utility : __rvm_calculate_remote_file()  583 > __remote_file=https://rvm.io/binaries/ubuntu/12.10/i386/ruby-2.0.0-rc2.tar.bz2
+++ 1365712695.948514158 /scripts/functions/utility : __rvm_remote_server_path_single()  592 > [[ -z https://rvm.io/binaries/ubuntu/12.10/i386/ruby-2.0.0-rc2.tar.bz2 ]]
+++ 1365712696.053688755 /scripts/functions/utility : __rvm_remote_server_path_single()  597 > file_exists_at_url https://rvm.io/binaries/ubuntu/12.10/i386/ruby-2.0.0-rc2.tar.bz2
+++ 1365712696.171561756 /scripts/functions/utility : file_exists_at_url()  714 > [[ -n https://rvm.io/binaries/ubuntu/12.10/i386/ruby-2.0.0-rc2.tar.bz2 ]]
+++ 1365712696.266908604 /scripts/functions/utility : file_exists_at_url()  716 > unset curl
+++ 1365712696.482119274 /scripts/functions/utility : file_exists_at_url()  717 > curl -slkL --max-time 3 --head https://rvm.io/binaries/ubuntu/12.10/i386/ruby-2.0.0-rc2.tar.bz2
+++ 1365712696.512878217 /scripts/functions/utility : file_exists_at_url()  718 > GREP_OPTIONS=
+++ 1365712696.732889205 /scripts/functions/utility : file_exists_at_url()  718 > grep -E 'HTTP/[0-9\.]+ 200 OK' 
```

# ruby - Ruby、GNOME、2D 动画等

> ID：15958233
> 
> 赞同：2
> 
> 时间：2013-04-11T20:26:04.587
> 
> 标签：ruby, gnome, cairo

我想做一个简单的应用程序来做简单的动画。

主要是在圆形或椭圆形路径上旋转的实心圆。类似行星围绕太阳旋转的东西。问题是除了一些简单的静态绘图应用程序之外，互联网上没有太多信息。

我想在 GNOME 上使用 Ruby。从我能找到的情况来看，开罗似乎是最好的方式。

我的主要问题是您是否有一些建议或更好的示例如何使用 Cairo 和 Ruby 进行动态绘图。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:48:24.167

我发现了另一个非常简单的小型 GUI 框架......称为鞋子：

[http://shoesrb.com/](http://shoesrb.com/)

或者更好的改进版本，可以轻松安装“gem install green_shoes”：

[http://ashbb.github.io/green_shoes/](http://ashbb.github.io/green_shoes/)

但如果我还能找到一种方法来用 Cairo 制作 2D 动画，那就太好了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-14T21:14:07.857

对于动画，我建议另外 3 个专门用于动画的 Ruby gem：

*   汤姆布莱克的[红宝石 2D](http://www.ruby2d.com)
*   [瑞恩戴维斯的图形](https://github.com/zenspider/graphics)。
*   [朱利安·拉施克](https://www.libgosu.org)(Julian Raschke) 的 gosu

Gosu 更成熟，但今天（2017 年 3 月）这三个都在积极开发。

# php - TCPDF：PNG 图像渲染不正确

> ID：15958239
> 
> 赞同：2
> 
> 时间：2013-04-11T20:26:59.477
> 
> 标签：php, pdf, png, tcpdf

我正在从事一个涉及 TCPDF 的项目。我已经使用它一段时间了，但是在上次更新（6.0）之后，我的 PNG 图像真的被破坏了，尽管它的片段在文档上仍然可见。

我正在使用 Image() 方法如下： `$pdf->Image($img, $x, $y, $twidth, $theight);`

其中 $img 是源 URL，$x 和 $y 是位置，$twidth 和 $theight 是大小。我已经测试过 GIF 和 JPG 并且效果很好。PDF 上有一个 GIF 图像可以证明这一点。PNG 图像是 VLC 图标标志。

图片：

![在此处输入图像描述](https://i.stack.imgur.com/V42AP.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T20:33:24.187

从[项目站点](http://sourceforge.net/p/tcpdf/discussion/435311/thread/da4cf78c/#c64c)，到有类似问题的用户：

> 根据所使用的 php-imagick 或 php-gd 版本，您可能对具有透明度的 PNG 图像有不同的处理方式。尝试更新 php-imagick 并禁用 php-gd

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-07T14:08:17.310

我遇到了这个问题，tcpdf 不显示仅 PNG 图像。（前提是图片路径正确）

这绝对是一个 GD 版本问题，至少当您仍然使用旧版本的 PHP（如 5.3）时。卸载/删除 Gd 通常不是一种选择，因为它在其他地方使用。

这是我修复它的方法：**一般的想法是强制 TCPDF 使用 imagemagick 而不是 GD 来处理 PNG 文件。不删除GD。**

脚步：

*   安装 imagemagick 开发包

    在 debian 上：

    `apt-get -y install libmagickwand5 libmagickwand-dev`

*   安装 imagemagick PECL 扩展（通过 apt 或编译它->google 是你的朋友）

*   不要忘记激活

    `echo "extension=/usr/lib/php/20090626-zts/imagick.so" > /etc/php5/conf.d/41-imagick.ini`

*   在 TCPDF 某处（文件顶部？）定义一个全局变量：

    `define('USE_GD',0);`

*   在 tcpdf.php（我的版本是 tcpdf 5.0.002）中的函数内`public function Image($file, $x='', $y='', $w=0, $h=0, $type=''....)`靠近第 5305 行：

    *   寻找

        `if ( (method_exists($this, $mtd)) AND (!($resize AND function_exists($gdfunction))))`

        替换为（添加了USE_GD）

        `if (USE_GD && (method_exists($this, $mtd)) AND (!($resize AND function_exists($gdfunction))))`

    *   找到（下面几行）

        `if (function_exists($gdfunction)) {`

        替换为（添加了USE_GD）

        `if (USE_GD && function_exists($gdfunction)) {`

    *   一般来说，到处`function_exists($gdfunction)`都提到

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-01T15:07:08.767

因为我有同样的问题，所以我拿起了这个老问题。就我而言，解决方案很简单：

> 用 Photoshop 打开图像 --> 保存为 web

我知道这不是问题的真正解决方案，但它可能是一个简单的解决方法，可以为您节省大量时间。

# highcharts - 背景钟形曲线并在 Highchart 图表中显示工具提示

> ID：15958246
> 
> 赞同：0
> 
> 时间：2013-04-11T20:27:25.903
> 
> 标签：highcharts

我想在钟形曲线上显示一个箭头。我知道如何在动态图表上显示工具提示，并且我已经有了钟形曲线。但是，我不知道如何在贝尔曲线上显示箭头。

同样，我根据我的数据（x，y，sd，mean）制作了钟形曲线。并从动态图表中获取数据并在钟形曲线上显示箭头。

钟形曲线：[使用 FLOT 创建正态分布（钟形曲线）图表](https://stackoverflow.com/questions/7911151/create-normal-distribution-bell-curve-chart-using-flot)

动态图表：[http ://www.highcharts.com/component/content/article/2-news/11-dynamic-charts-available](http://www.highcharts.com/component/content/article/2-news/11-dynamic-charts-available)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T10:21:44.533

您可以使用带有一点和自定义标记的分散系列

[http://www.highcharts.com/demo/scatter](http://www.highcharts.com/demo/scatter)

或者

使用渲染器将图像（如箭头）添加到图表中。

[http://api.highcharts.com/highcharts#Renderer.image()](http://api.highcharts.com/highcharts#Renderer.image())

# python - 我用什么让 HOST 用 mysqldb python 连接到远程服务器？

> ID：15958249
> 
> 赞同：0
> 
> 时间：2013-04-11T20:27:38.373
> 
> 标签：python, sql, phpmyadmin, mysql-python, host

提前注意事项：

*   我正在使用 wampserver 2.2
*   我转发了80端口
*   我在防火墙中添加了一条规则以接受通过端口 3306 的流量
*   我在“我忘记的文件”的目录中添加了“全部允许”
*   我的朋友可以通过他的浏览器访问我的 phpmyadmin 服务器
*   我是新手，所以请耐心等待。

我试图让我的朋友能够通过 python 更改我的 phpmyadmin 服务器上的数据库。我可以在使用“127.0.0.1”作为主机的主机上这样做。我的问题是，他必须使用我的外部 ip 作为主机还是使用我的外部 ip/phpmyadmin/ 作为主机？如果使用外部 IP 是正确的......问题可能是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T04:09:05.207

如果您的 phpmyadmin 与 mysql-server 在同一台机器上运行，那么如果您使用 tcp（而不是 unix 套接字），则 127.0.0.1 就足够了（如果您的 mysql 服务器绑定到 127.0.0.1，而不是 0.0.0.0，则更安全）。

# vb.net - 在 .NET 中捕获 CTRL+V 或粘贴到文本框中

> ID：15958250
> 
> 赞同：4
> 
> 时间：2013-04-11T20:27:38.620
> 
> 标签：vb.net, formatting, hook, richtextbox, paste

VB.NET 2010 - 我有一个 RichTextbox，用户可以在其中手动输入数据或从其他来源复制/粘贴。数据完成后，他点击 go 并突出显示几个关键词。我的问题是，如果他从另一个来源复制/粘贴，格式也会被复制。好吧，有时外部源有白色字体，而我的文本框有白色背景，所以看起来他什么也没粘贴，而且他一次又一次地粘贴。

我正在寻找一种将粘贴操作截获到文本框中的方法，以便我可以将该文本粘贴为纯 ASCII 而无需格式化。

尝试使用 KeyDown 后进行编辑

```
Private Sub txtRch_KeyDown(sender As Object, e As System.Windows.Forms.KeyEventArgs) Handles txtRch.KeyDown
    If e.Modifiers = Keys.Control AndAlso e.KeyCode = Keys.V Then
        With txtRch
            Dim i As Integer = .SelectionStart          'cache the current position
            .Select(0, i)                               'select text from start to current position
            Dim s As String = .SelectedText             'copy that text to a variable
            .Select(i, .TextLength)                     'now select text from current position to end
            Dim t As String = .SelectedText             'copy that text to a variable
            Dim u As String = s & Clipboard.GetText(TextDataFormat.UnicodeText) & t 'now concatenate the first chunk, the new text, and the last chunk
            .Clear()                                    'clear the textbox
            .Text = u                                   'paste the new text back into textbox
            .SelectionStart = i                         'put cursor back to cached position
        End With

        'the event has been handled manually
        e.Handled = True
    End If
End Sub 
```

这似乎有效，我所有的文本都被保留了，而且都是 ASCII。我想如果我想更进一步，我也可以使用我的 RichTextbox 的字体和前景色，选择所有文本，然后将字体和前景色分配给选择。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-11T21:01:59.050

在大多数情况下，检查 KeyDown 事件以及使用临时 RichTextBox 来修改传入文本应该足够好：

```
Private Sub RichTextBox1_KeyDown(sender As Object, e As KeyEventArgs) _
                                 Handles RichTextBox1.KeyDown
  If e.Modifiers = Keys.Control AndAlso e.KeyCode = Keys.V Then

    Using box As New RichTextBox
      box.SelectAll()
      box.SelectedRtf = Clipboard.GetText(TextDataFormat.Rtf)
      box.SelectAll()
      box.SelectionBackColor = Color.White
      box.SelectionColor = Color.Black
      RichTextBox1.SelectedRtf = box.SelectedRtf
   End Using

   e.Handled = True
  End If
End Sub 
```

注意：缺少任何错误检查。

# sql-server - 如何删除自引用表中的树？

> ID：15958255
> 
> 赞同：1
> 
> 时间：2013-04-11T20:27:51.040
> 
> 标签：sql-server, self-join

我有下表：

```
MyTree(IDNode, IDRootNode, IDParentNode, Left, Right, Depth, ...) 
```

IDNode 是标识节点的主键。IDRootNode 是根节点。IDParentNode 是节点的父节点。Left 和 Right 是节点的位置。对删除不重要。

我看到下面的代码是一个触发器，它可以从自引用表中删除寄存器：

```
CREATE TRIGGER MyTable_OnDelete ON MyTable
INSTEAD OF DELETE
AS 
BEGIN

  SET NOCOUNT ON;

  DELETE FROM mt
  FROM   deleted AS D
  JOIN   MyTable AS mt
  ON     d.Id = mt.ParentId

  DELETE FROM mt
  FROM   deleted AS D
  JOIN   MyTable AS mt
  ON     d.Id = mt.Id

END 
```

如果我没记错的话，首先删除我要删除的节点的子节点，然后再删除该节点。但是如果一个孩子有孩子，也被删除或者只删除节点的孩子而不是孩子的孩子？

使用递归 CTE 会怎么样？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T20:36:51.200

如果树中的每个节点的 IDRootNode 列都填充了该节点所属树的 id，则可以使用以下 SQL 删除树：

```
DELETE MyTable WHERE IDRootNode = @RootNodeId 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T20:39:00.773

您可以使用递归 CTE 来做到这一点，如下所示：

```
;WITH cte AS (
    SELECT  IDNode
    FROM    Deleted
    UNION ALL
    SELECT  IDNode
    FROM    MyTree t
            JOIN cte c ON t.IDParentNode = c.IDNode
) 
DELETE  t
FROM    MyTree t
        JOIN cte c ON t.IDNode = c.IDNode; 
```

更好的是，使用 HierarchyId（如果在 SQL Server 2008 上）！

# c# - 将复选框中的值写入文本文件并计算最小和最大选定值

> ID：15958256
> 
> 赞同：0
> 
> 时间：2013-04-11T20:27:52.480
> 
> 标签：c#, count, text-files, max, checkboxlist

在我这样做之后，它不会做任何我想做的事情，否则它会在一行中两次写入文件。

下面的代码尝试将复选框中的值写入文本文件，然后找到最大值和最小值。

```
List<string> myLs = new List<string>();
            int checke = 0;

            foreach (ListItem item in coursess.Items)
            {
                if (item.Selected)
                {
                    checke = checke + 1;

                }
            }
            if (checke < 4)
            {
                kk.Text = "less";
                kk.Visible = true;
            }
            else if (checke > 6)
            {
                kk.Text = "More";
                kk.Visible = true;
            }
            else if(checke == 4 || checke == 5 || checke == 6)
            {
                foreach (ListItem item in coursess.Items)
                {
                    if (item.Selected)
                    {
                        myLs.Add(item.Value);
                    }
                }
                String datas = String.Join(",", myLs.ToArray()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T03:35:59.550

根据您的代码，当检查少于四个或超过六个复选框时，看起来将显示一条消息。至于将字符串写入文件，最后如何......

```
System.IO.File.WriteAllText(@"C:\selectedcourses.txt", datas); 
```

这应该将整个字符串一次写入您选择的路径。

# jsp - JSTL escapeXml 默认

> ID：15958257
> 
> 赞同：9
> 
> 时间：2013-04-11T20:27:54.030
> 
> 标签：jsp, escaping, jstl

我知道要避免在 JSTL 中转义 HTML 字符以使用它：

```
<c:out value="${my.value}" escapeXml="false" /> 
```

我想知道是否存在默认情况下使 escapeXml 为 false 的页面指令，因此我不需要在该特定页面上指定它。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-11T20:56:54.270

上面*没有*转义 HTML，因为`escapeXml`设置为 false。默认情况下，`escapeXml`为 true，`<c:out>`因此标签会转义 HTML。如果你不想逃跑，你可以简单地使用

```
${my.value} 
```

并避免`<c:out>`完全使用，因为 的唯一目的`<c:out>`是转义 HTML。

# xml - XML 模式中的无效模式

> ID：15958260
> 
> 赞同：0
> 
> 时间：2013-04-11T20:28:10.183
> 
> 标签：xml, schema

我在 XML 模式中有一个模式。这是：

```
<xs:pattern value="^[^\u00A4\u00A6\u007C\u00A7\u0022]+$"/>. 
```

但是当通过 Altova 打开模式时，我们得到了错误

> 架构本身似乎无效（作为另一个架构的一部分，它可能仍然可以）...值`^[^\u00A4\u00A6\u007C\u00A7\u0022]+$`不是常规 xml 表达式

我看不出这个表达有什么问题。谁能帮我找出问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T21:26:53.087

此处简单修复，将字符引用从 Javascript 更新为 XML 形式：

```
<xs:pattern value="^[^&#x00A4;&#x00A6;&#x007C;&#x00A7;&#x0022;]+$"/> 
```

- - - - - - -编辑 - - - - - - - - - -

感谢 Michael Kay 指出锚定疏忽。如果你想禁止使用字符 ¤¦|" 那么这是你的模式：

```
<xs:pattern value="[^&#x00A4;&#x00A6;&#x007C;&#x00A7;&#x0022;]+"/> 
```

从规范：

```
Note:  Unlike some popular regular expression languages (including those defined by Perl and standard Unix utilities), the regular expression language defined here implicitly anchors all regular expressions at the head and tail, as the most common use of regular expressions in ·pattern· is to match entire literals. 
```

[http://www.w3.org/TR/xmlschema-2/#regexs](http://www.w3.org/TR/xmlschema-2/#regexs)

# google-apps-script - 了解谷歌电子表格集与获取逻辑

> ID：15958265
> 
> 赞同：0
> 
> 时间：2013-04-11T20:28:17.250
> 
> 标签：google-apps-script, google-sheets

我正在拼命地学习用这种语言“思考”（我的母语编码语言是 VBA/ASP）。

这是一个非常基本的示例，它只是读取 Sheet1 中特定单元格的内容，然后将该值分配给名为 rngVal 的变量

```
var ss = SpreadsheetApp.getActiveSpreadsheet();
ss.setActiveSheet(ss.getSheetByName("Sheet1"));
var rngVal = ss.setActiveSelection("A1").getValues(); 
```

当我试图解构这段非常简单的 3 行代码时（为了理解它的目的），我承认自己相当困惑。

原因如下：

当我在每一行之后插入一个 msgbox 时，我得到了这个：

`var ss = SpreadsheetApp.getActiveSpreadsheet();`=“**电子表格**”

`ss.setActiveSheet(ss.getSheetByName("Sheet1"));`=“**电子表格**”

`var rngVal = ss.setActiveSelection("A1").getValues();`=**单元格值**

什么是“**电子表格**”？这有什么帮助（？）以及如何使用它来导航工作表并在其中读取/写入值？那是两行代码做什么（？），有什么好处？

（我不是想好斗，我只是想理解，这样我就可以学会用这种语言“思考”）

其次：在第一行，我**得到**了什么？

在第二行中，我首先**设置**'ting，然后我**得到**'ting？（我对那条线实际上在做什么很困惑）

在第三（最后）行有更多的**set** 'ting 和**get** 'ting，虽然这次它没有嵌套。

这是非常基本的代码（功能上），但我很难掌握它的逻辑，即如何使用该逻辑“思考”。

有没有人愿意表现出一些耐心并通过描述这个简单代码的逐步逻辑来帮助我选择一个单元格，捕获它的值，然后将它分配给一个变量？请理解，当我“思考”如何完成这项非常简单的任务时，我可以用非常简洁的一行（在 VBA 中）来完成......

```
rngVal = Sheets("Sheet1").Range("A1").Value 
```

...因此，我对所有“电子表格”的内容以及对 3 行填充**set**和**get的需求感到***非常*困惑。

 ****任何人？*请？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T14:43:38.300

嗯，不知何故，正确的答案（我的另一个）被否决了。再次进行 setactiveselection 毫无意义，无需更改所选单元格，它只会使您的代码变慢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T21:04:38.793

Google 使用 Javascript 类来表示这些不同的对象。我已将第 3 行分成两部分以帮助解释。请比较：

```
var ss = SpreadsheetApp.getActiveSpreadsheet();
ss.setActiveSheet(ss.getSheetByName("Sheet1"));
var rng = ss.setActiveSelection("A1");
var val = rng.getValues(); 
```

上面的每一行都返回一个不同的 Object 类。第一行返回一个Spreadsheet类的对象，第二行返回一个Sheet类的对象，第三行返回一个Range类的对象，最后一行返回一个Object类的对象。

[在此处](https://developers.google.com/apps-script/reference/spreadsheet/)查看有关可以对/使用不同类别的对象执行的各种操作（方法）的文档。当我构建一个谷歌应用程序时，我住在那个网页上。

要将上面的代码与您从 VBA 理解的代码进行比较，这一行：

```
rngVal = Sheets("Sheet1").Range("A1").Value 
```

可以用 Javascript 在一行中编写如下：

```
var ss = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("Sheet1").setActiveSelection("A1").getValues(); 
```

希望有帮助。如果您有任何问题，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T22:06:26.823

你们做的比需要的更复杂。无需乱选。getactivespreadsheet().getsheetbyname("x").getrange("a1").getValue() 也可以。****

# c# - 使 NLog.config 文件从 (d:\dev) 而不是 "\bin\debug\" 加载文件

> ID：15958271
> 
> 赞同：19
> 
> 时间：2013-04-11T20:28:32.947
> 
> 标签：c#, configuration, configuration-files, nlog, nlog-configuration

我使用 Nlog 在特定的 DLL 中进行日志记录。然后在另一个应用程序中使用 DLL（使用 动态加载`System.Reflection.Assembly.LoadFrom(path + a.dll)`）。我手动将 Nlog.dll 和 Nlog.config 文件放在 Path 文件夹中，应用程序可以正常执行，但它没有记录任何消息。

但是，当我继续将 Nlog.config 文件手动放置在应用程序目录 ( `\bin\debug\`) 中时，会记录消息。

有人可以让我知道如何将 Nlog.Config 的搜索位置指向`d:\dev`除`\bin\debug\`.

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-04-17T14:37:02.520

下面是我如何更改 Nlog 的配置以指向 Executing Assembly 文件夹中的 Nlog.config 文件。

```
string assemblyFolder = Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location);
NLog.LogManager.Configuration = new NLog.Config.XmlLoggingConfiguration(assemblyFolder + "\\NLog.config", true); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-12T08:05:27.237

请参阅NLog wiki 上的[配置文件位置。](https://github.com/NLog/NLog/wiki/Configuration-file#wiki-configuration-file-locations)

基本上 NLog 定位配置的方式是：

*   标准应用程序配置文件（通常是 applicationname.exe.config）
*   应用程序目录中的 applicationname.exe.nlog
*   应用程序目录中的 NLog.config
*   NLog.dll.nlog 在 NLog.dll 所在目录中（仅当 NLog 不在 GAC 中时）
*   NLOG_GLOBAL_CONFIG_FILE 环境变量指向的文件名（如果已定义，仅限 NLog 1.0 - NLog 2.0 中删除了支持）

没有其他方法可以做到这一点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-11T20:36:48.523

NLog 配置需要驻留在运行动态拉取 a.dll 的应用程序所在的文件夹中。如果您正在调试，这就是为什么将它放入 bin\debug 时它可以工作的原因。如果您使用的是 Visual Studio，请尝试将您的 nlog.config 设置为“始终复制”，它应该会放在您需要的地方。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-11-04T22:54:53.803

我找到

```
NLog.LogManager.Configuration = new NLog.Config.XmlLoggingConfiguration(logFilePath, true); 
```

实际上将记录器指向要记录到的文件，而不是配置文件。这样做的好处是，您可以定义日志文件路径而无需知道 ExecutingAssembly - 这在使用 ExcelDNA 等时特别有用，因为 XLL 将程序集作为比特流动态加载，等等

```
Assembly.GetExecutingAssembly().Location 
```

抛出异常。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-11-17T19:03:00.387

您可以将包含文件与 NLog.config 一起使用。拥有一个简单的 NLog.config，其中仅包含来自`D:\DEV`.

前任：

```
<nlog>
    <include file="D:\DEV\NLog.Config" />
</nlog> 
```

您也可以使用 app.config 来完成。前任：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <configSections>
        <section name="nlog" type="NLog.Config.ConfigSectionHandler, NLog"/>
    </configSections>
    <nlog>
        <include file="D:\DEV\NLog.Config" />
    </nlog>
</configuration> 
```

另见：[https ://github.com/nlog/nlog/wiki/Configuration-file#include-files](https://github.com/nlog/nlog/wiki/Configuration-file#include-files)

# sql-server - TSQL：获取下一个可用 ID

> ID：15958273
> 
> 赞同：-1
> 
> 时间：2013-04-11T20:28:38.423
> 
> 标签：sql-server, sql-server-2008, tsql

使用SQL Server 2008，有三个表，表a、表b和表c。

都有一`ID`列，但对于表 a 和 b`ID`列是 a `identity integer`，对于表 c`ID`列是一个`varchar`类型

目前，存储过程采用名称参数，遵循一定的逻辑，插入表 a 或表 b，获取标识，以“A”或“B”为前缀，然后插入表 c。

问题是，表C`ID`列可能有重复值，即如果表A的标识为2，表C的列中可能已经有'A2'，'A3'，'A5' `ID`，如何编写T-SQL查询以识别表 C 中的下一个可用值，然后确保相应地更新表 A/B？

[更新]这是当前步骤，1.取决于输入参数，插入表A或表B 2.初始化种子值=@@Identity 3.计算ID值以通过前缀'A'或附加'插入表C B' 与种子值 4\. 在表 C 中通过步骤 3 中的 ID 值查找记录匹配，如果没有找到任何记录，则插入它，否则将种子值增加 1，然后重复步骤 3

问题是在一定的取值范围内，C表ID中可能存在一个巨大的值块，即表C ID中现在存在A3000到A500000，按照现有逻辑查询数据库速度极慢。需要找出一个逻辑来巧妙地获得最小可用号码（不带前缀）

很难描述，希望这更有意义，我真的很感谢任何帮助提前谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T21:09:43.220

这应该可以解决问题。简单的自提取示例将在 SSMS 中工作。为了以防万一，我什至把它弄坏了。您只需将表更改为@Data 所在的位置，然后更改标识符字段以替换“ID”。

```
declare @Data Table ( Id varchar(3) );

insert into @Data values ('A5'),('A2'),('B1'),('A3'),('B2'),('A4'),('A1'),('A6');

With a as 
    (
    Select
        ID
    ,   cast(right(Id, len(Id)-1)  as int) as Pos
    ,   left(Id, 1) as TableFrom
    from @Data
    )
select
    TableFrom
,   max(Pos) + 1 as NextNumberUp
from a
group by TableFrom 
```

编辑：如果您不想担心生产数据，您可以添加最后一部分来修改我写的内容：

```
Select
   TableFrom 
,  max(Pos) as LastPos
into #Temp
from a
group by TableFrom

select TableFrom, LastPos + 1
from #Temp 
```

无论这是否是生产环境，您都必须在某个时候访问其中的一部分才能获取数据。如果数据集不是太大并且只有 varchar(256) 或更少且只有 500 万行或更少，您可以将整个列从 tableC 转储到临时表。老实说，查询性能与导入之间的差异很大。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T20:49:07.713

考虑到 A 和 B 是唯一的，按照您的设计，表 C 中不应有任何重复项。

```
A | B | C
1   1   A1
2   2   A2
        B1
        B2 
```

# c# - C#：帮助打磨字符串解析

> ID：15958275
> 
> 赞同：0
> 
> 时间：2013-04-11T20:28:49.163
> 
> 标签：c#, xml, parsing

我在这个社区中真正看重的一件事是学习用两条线做事的方法，这通常需要我 20 年。本着这种精神，我已尽我所能将一些字符串解析从十几行减少到三行。但我觉得有人想向我展示这实际上是多么的一团糟。只是为了我自己的熏陶，有没有更清洁的方法来做以下事情？这一切可以在一条线上完成吗？

```
string getThis = "<add key=\"messageFilter\" value=\"";
string subStr = strFile.Substring(strFile.IndexOf(getThis) + getThis.Length);
string[] igPhrases = subStr.Substring(0, subStr.IndexOf(";\"")).Split(';'); 
```

**更新**

感谢您的快速回复！真正有用的例子和好的建议，最少的蛇。:) 更少的行与简洁和优雅是不一样的，减少行实际上可能会使代码变得更糟。

让我重新表述这个问题。

我有一个包含以下行的 XML 文档：`<add key="messageFilter" value="Out of Office AutoReply;Automatic reply;"/>`. 该文档告诉我们的自动票务系统不要从主题行中包含这些短语的电子邮件中创建票证。否则，我们将陷入无限循环。

我正在开发一个小程序，该程序将列出已包含的短语，然后允许用户添加新短语。如果我们注意到一条新的自动回复消息开始在系统中循环，我们需要能够将该消息的语言添加到过滤器中。

我不经常使用 XML。我喜欢 Sperske 的解决方案，但我不知道如何使其动态化。换句话说，我不能将值放入我的代码中。我需要找到键“messageFilter”，然后获取与该键关联的所有值。

我所做的工作，但它似乎有点麻烦。有没有更直接的方法来获取关键值？并添加一个新的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T20:37:56.027

稍有不同的一个衬里（为了便于阅读而拆分）：

```
System.Xml.Linq.XDocument
  .Parse("<add key='messageFilter' value='AttrValue'/>")
  .Root
  .Attribute("value")
  .Value 
```

输出：

```
AttrValue 
```

要解决更新的问题，您可以将所有`<add>`节点转换为字典（借鉴 Pako 的出色答案，并使用稍长的字符串）：

```
var keys = System.Xml.Linq.XDocument
  .Parse("<keys><add key='messageFilter' value='AttrValue'/><add key='userFilter' value='AttrValueUser'/></keys>")
  .Descendants("add")
  .ToDictionary(r => r.Attribute("key").Value, r => r.Attribute("value").Value); 
```

这使您可以像这样访问您的密钥：

```
keys["messageFilter"] == "AttrValue"
keys["userFilter"] == "AttrValueUser" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T20:57:17.647

它已经得到了回答，但对于未来的读者来说——如果你想解析更大的 XML、根节点和许多`add`节点，你可能需要使用一些稍微不同的东西。

```
string xmlPart = "<add key=\"messageFilter\" value=\"\" />";
string xml = "<root>" + xmlPart + "</root>";
var x = XDocument.Parse(xmlPart, LoadOptions.None);

var attributes1 = x.Descendants("add").Select(n => n.Attributes());
var attributes2 = x.Descendants("add").SelectMany(n => n.Attributes()); 
```

这会让你`IEnumerable<IEnumerable<XAttribute>>`（见`attributes1`）或`IEnumerable<XAttribue>`（见`attributes2`）。第二个选项将简单地展平结果 - 所有属性都将保存在一个集合中，无论它们来自哪个节点。
当然，没有什么能阻止您`XAttributes`按名称或其他标准进行过滤 - 这完全取决于您！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T20:32:57.743

一条丑陋的线：

```
string[] igPhrases = strFile.Substring(strFile.IndexOf(getThis) + ("<add key=\"messageFilter\" value=\"").Length).Substring(0, strFile.Substring(strFile.IndexOf("<add key=\"messageFilter\" value=\"") + ("<add key=\"messageFilter\" value=\"").Length).IndexOf(";\"")).Split(';'); 
```

# javascript - 如果无论如何它必须调用多个文件，字体是否值得？

> ID：15958281
> 
> 赞同：3
> 
> 时间：2013-04-11T20:29:02.860
> 
> 标签：javascript, css, font-face

因此，跨浏览器 @font-face 解决方案似乎需要多个 HTTP 请求。这是我能找到的最好的代码：

```
@font-face {
  font-family: 'Graublau Web';
  src: url('GraublauWeb.eot');
  src: local('Graublau Web Regular'), local('Graublau Web'),
    url("GraublauWeb.woff") format("woff"),
    url("GraublauWeb.otf") format("opentype"),
    url("GraublauWeb.svg#grablau") format("svg");
} 
```

就此而言，我最好只使用 Javascript 还是会同样减慢加载时间？我的加载速度（以及我的首要任务是 SEO）的最终解决方案是使用图像吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T20:37:42.690

浏览器只会根据该规则进行一次连接和一次下载。该规则并没有告诉浏览器下载所有指定的字体——这没有任何意义。相反，它告诉浏览器下载它找到的第一个指定字体。

该行：

```
src: url('GraublauWeb.eot'); 
```

位于单独的规则中，因为该行目标 (IE) 的浏览器不支持备用字体列表。这利用了浏览器将忽略他们不理解的 CSS 规则这一事实。

# php - Laravel - 如何不使用布局

> ID：15958283
> 
> 赞同：1
> 
> 时间：2013-04-11T20:29:05.203
> 
> 标签：php, model-view-controller, laravel, laravel-3

我正在使用带有控制器布局的 laravel。但是我的应用程序的某些部分我不想使用布局（例如，当将数据返回到支付网关请求时，我发送 XML 数据）。我只想将数据传递给我的视图并单独渲染它，而不需要布局。

我怎样才能做到这一点？我一直在尝试一些方法，但都没有奏效。我可以成功地更改要渲染的布局，但我无法设置在没有布局的情况下渲染视图。

谢谢！

**编辑：让我更好地解释一下**

我的默认布局是在 Base_Controller 中设置的。然后我所有的控制器都扩展了它，但在其中一个控制器中我不需要布局，正如我上面所说的。也许我需要取消设置默认布局或类似的东西，我不确定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T20:34:29.100

你可以简单地从你的控制器动作中返回一些东西来绕过布局。

```
function get_xml($id) {
    $user = User::find($id);
    return View::make('user.xml', $user);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T20:34:46.983

在您的控制器函数上，您可以简单地返回一个字符串，该字符串将按原样返回给浏览器。或者，您可以制作一个`Laravel\Response`对象，这将允许您微调站点的输出，而不仅仅是返回一个字符串。

该类`Response`有一些在文档中未提及的技巧：[默认返回](http://laravel.com/api/class-Laravel.Response.html#_make)、[JSON](http://laravel.com/api/class-Laravel.Response.html#_json)、[强制下载](http://laravel.com/api/class-Laravel.Response.html#_download)。

您对第一个更感兴趣，它将允许您正确地将响应的内容类型设置为`application/xml`. 除此之外，您*仍然*可以使用 XML 视图！像使用 一样生成视图`View::make`，但不是直接返回它，而是将它存储在一个变量中。要渲染它，请调用`render()`它 - 它会返回输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T20:51:51.527

一个简单的方法......

假设有一个`main`布局

```
 <body>

        @yield('content')

</body> 
```

这`content`将是插入视图的位置。

现在，

如果你想使用布局，使视图页面如下：

```
@layout('main')

@section('content')
 blah blah your content
@endsection 
```

**如果您不想使用布局，请省略上面的代码。**

在**控制器**中，两个文件的代码相同。

```
 return View::make('index'); 
```

# android - 广播接收器调用两次

> ID：15958284
> 
> 赞同：11
> 
> 时间：2013-04-11T20:29:07.190
> 
> 标签：android, connection, broadcastreceiver

尝试在我的应用程序中检查 Internet 连接。我的清单有一个代码：

```
 <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
        <receiver android:name=".MyReceiver" >
        <intent-filter>
            <action android:name="android.net.conn.CONNECTIVITY_CHANGE"/>
        </intent-filter>
    </receiver> 
```

还有一个句柄类：

```
public class MyReceiver extends BroadcastReceiver {

@Override
public void onReceive(Context context, Intent intent) {
    if(intent.getAction() != null && intent.getAction().equals("android.net.conn.CONNECTIVITY_CHANGE"));
    {
        Log.d("myLogs", "Network connectivity change");
        if (intent.getExtras() != null) {
            NetworkInfo ni = (NetworkInfo) intent.getExtras().get(
                    ConnectivityManager.EXTRA_NETWORK_INFO);
            if (ni != null && ni.getState() == NetworkInfo.State.CONNECTED) {
                Log.i("myLogs", "Network " + ni.getTypeName() + " connected");
            }
        }
        if (intent.getExtras().getBoolean(
                ConnectivityManager.EXTRA_NO_CONNECTIVITY, Boolean.FALSE)) {
            Log.d("myLogs", "There's no network connectivity");
        }
    }
} 
```

}

在我的 Logcat 中，我得到一张像这样的图片：

```
04-11 23:24:48.021: D/myLogs(10261): Network connectivity change
04-11 23:24:48.021: I/myLogs(10261): Network WIFI connected
04-11 23:24:48.202: D/myLogs(10261): Network connectivity change
04-11 23:24:48.202: I/myLogs(10261): Network WIFI connected 
```

因此，接收者呼叫了两次。为什么？所有类型的连接都存在一些问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-16T09:26:05.983

假设您在连接 wifi 时收到已连接的消息，我猜第一个是正确的，而其他 2 个只是出于某种原因的回声。

要知道消息已被调用，您可以有一个静态布尔值，它在连接和断开之间切换，并且仅在您收到连接并且布尔值为真时才调用您的子例程。就像是：

```
public class ConnectionChangeReceiver extends BroadcastReceiver {
    private static boolean firstConnect = true;

    @Override
    public void onReceive(Context context, Intent intent) {
        final ConnectivityManager connectivityManager = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
        final NetworkInfo activeNetInfo = connectivityManager.getActiveNetworkInfo();
        if (activeNetInfo != null) {
            if(firstConnect) { 
                // do subroutines here
                firstConnect = false;
            }
        }
        else {
            firstConnect= true;
        }
    }
} 
```

> 笔记

您需要注意两件事。首先 - 将“firstConnect”存储在某处，例如在共享首选项中，其次是当您从 3G 更改为 WiFi 时，没有实际断开连接，因此最好分别处理 3G 和 WiFi 事件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-15T19:37:00.650

您可能还需要通过检查接收器中的 isStickyBroadcast 来检查接收到的意图是否是粘性事件之一。如果这是真的，那么您可以忽略它并继续。一旦接收器注册，您就会收到粘性广播。

[http://developer.android.com/reference/android/content/BroadcastReceiver.html#isInitialStickyBroadcast%28%29](http://developer.android.com/reference/android/content/BroadcastReceiver.html#isInitialStickyBroadcast%28%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-15T19:52:14.127

在文档中解释：

"**设备连接的更改可能非常频繁**— 每次您在移动数据和 Wi-Fi 之间移动时都会触发此广播。因此，**最好仅在您之前暂停更新或下载时才监控此广播恢复它们**。在开始更新之前简单地检查 Internet 连接通常就足够了，如果没有，则暂停进一步的更新，直到连接恢复。

编辑：忘记添加......广播接收器只知道设备是否已连接有点悬停。来自相同的文档：

```
ConnectivityManager cm = (ConnectivityManager)context.getSystemService(Context.CONNECTIVITY_SERVICE);
NetworkInfo activeNetwork = cm.getActiveNetworkInfo();
boolean isConnected = activeNetwork != null && activeNetwork.isConnectedOrConnecting();
boolean isWiFi = activeNetwork.getType() == ConnectivityManager.TYPE_WIFI; 
```

# java - 动态类转换

> ID：15958285
> 
> 赞同：0
> 
> 时间：2013-04-11T20:29:11.143
> 
> 标签：java, android, casting

我在 Android 中进行投射时遇到问题。

我正在开发一个处理多个设备的应用程序，并且我正在尝试进行动态类分配（即，用户设置设备，应用程序根据用户设置实例化类）

这是一个示例代码：

```
String Usr_imput; //name of the class
Class class = Class.forName(Usr_Input);
Object o = class.newInstance(); 
```

这样我就无法从 Usr_Input 类访问方法。方法 class.cast(o) 应该是我的问题的解决方案，但我无法让它工作，cast 语句是否堆叠？

如果我使用它是否应该工作：

```
class.cast(o);
o.Method(); 
```

有人有这方面的经验吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T21:12:52.750

来自java文档：

```
 cast
   public T cast(Object obj) 
   blahblah..

   Returns:
   the object after casting, or null if obj is null 
```

从您的代码中，您没有捕获返回值。`class`也不是一个好名字。检查上面的评论。

```
class.cast(o);
o.Method(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T20:33:17.387

```
Usr_Input o = (Usr_Input)class.newInstance(); 
```

# html - 命令行整洁的 HTML 不插入 HTML 全局结构，如

> ID：15958288
> 
> 赞同：2
> 
> 时间：2013-04-11T20:29:24.770
> 
> 标签：html, parsing, unix, html-parsing, tidy

我正在使用[这个 html5-tidy 程序](https://github.com/w3c/tidy-html5)来管道调试输出从 Web 应用程序显示到控制台，以便作为开发人员，包含 HTML 的字符串变量的调试转储不会是一个糟糕的文本块，而是有点结构化HTML 视图。

这基本上是对我已经完成`perltidy`的用于检查 perl 数据结构的扩展：从 Data::Dumper 输出的字符串被发送`perltidy`，以便人们更容易分析。因为 Dumper 只会产生语法上有效的 Perl，所以它工作得很好。

直到我们到达 HTML 文本变量的大块为止。

所以我想对文本做同样的事情（智能地插入空格和换行符），但是`tidy`为我做了太多的工作：

```
$ ../bin/tidy -q test_tidy.html 2>/dev/null | diff test_tidy.html -
1,6c1,17
< <!-- COMMENT --> <p>This example shows how Tidy can indent output while preserving formatting of particular elements.</p><pre>This is <em>genuine preformatted</em> text</pre> <!-- END -->
---
> <!-- COMMENT -->
> <!DOCTYPE html>
> <html>
> <head>
> <meta name="generator" content=
> "HTML Tidy for HTML5 (experimental) for Linux https://github.com/w3c/tidy-html5/tree/c63cc39">
> <title></title>
> </head>
> <body>
> <p>This example shows how Tidy can indent output while preserving
> formatting of particular elements.</p>
> <pre>
> This is <em>genuine preformatted</em> text
> </pre>
> <!-- END -->
> </body>
> </html> 
```

从理论上讲，我可以假设如何`tidy`“总是”添加那些无关的东西，然后基本上将它们提取出来，或者其他什么。但这很可怕，原因有很多。首先，如果我进去把那些东西拿出来，那么如果输入的内容正确或部分正确，它将被更改`tidy`为比原始输入更正确，这很糟糕！我可以潜在地显示两个副本，这样在使用该工具时就不会出现奇怪的歧义。但我想避免这种情况，并以某种方式`tidy`对这些 HTML 片段进行整理，而不是尝试构建一个独立的 HTML 页面。

但是我基本上真的很接近我想要的东西，所以我宁愿不尝试从头开始制作一些东西，因为我知道这会很困难并且容易出错。Tidy 还会自动通过 STDERR 发送一个非常好的警告和错误集合（我在上面的示例中抑制了这些），它们也非常适合与调试功能一起放置，因为虽然我们有一个很好的自动代码检查标准来处理 perl，但生成的 HTML 不受任何形式的审查。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:20:16.060

在我看来，你甚至不应该使用 html tidy。它会导致糟糕的编码实践。但是，您可以验证您的代码。这应该使事情更整洁一些。

[http://jigsaw.w3.org/css-validator/](http://jigsaw.w3.org/css-validator/)

[http://validator.w3.org/](http://validator.w3.org/)

# breeze - 保存更改时，Breeze 不会反序列化实体更改集

> ID：15958289
> 
> 赞同：0
> 
> 时间：2013-04-11T20:29:29.537
> 
> 标签：breeze

我正在针对标准 RPC 样式的 WebAPI 使用 Breeze。我用`[BreezeController]`属性装饰了控制器。我已经在客户端为 WebAPI 操作返回的实体定义了实体元数据。我的微风数据服务设置如下：

```
var dataService = new breeze.DataService({
    serviceName: "http://localhost/api/PartReceiptPurchaseOrders",
    hasServerMetadata: false
}); 
```

`SaveChanges`修改实体后调用EntityManager的方法时，`EntityInfo`服务端的对象为空。似乎传递给 SaveChanges 方法的序列化实体未正确反序列化为服务器上的预期实体。我很难理解我做错了什么。

当我检查`JObject saveBundle`传递给`SaveChanges`WebAPI 控制器上的方法的参数时，我得到了预期的实体详细信息：

```
{  
    "entities": [{ 
        "PurchaseOrderPartId": 1, 
        "PartNumber": "ABC", 
        "SupplierPartNumber": "12345", 
        "Description": "Some Part", 
        "Bin": "1", 
        "Qty": 24, 
        "QtyReceived": 24, 
        "QtyBackordered": 0, 
        "Cost": 60, 
        "Currency": "USD",
        "PurchaseOrderId":1, 
        "entityAspect": { 
            "entityTypeName": "PurchaseOrderPart:#MyApp.Models", 
            "entityState": "Modified",
            "originalValuesMap": { 
                "QtyReceived": 0 
            }, 
            "autoGeneratedKey":{
                "propertyName": "PurchaseOrderPartId",
                "autoGeneratedKeyType": "Identity"
            }
        }    
    }],  
    "saveOptions": { "allowConcurrentSaves": false }
} 
```

但是，在调用基类方法之后，`Breeze.WebApi.ContextProvider.SaveChanges()`该`entityInfo.Entity`属性包含一个空对象，如下所示：

```
entityInfo {Breeze.WebApi.EntityInfo}   
    AutoGeneratedKey: null {Breeze.WebApi.AutoGeneratedKey}
    Entity {MyApp.Models.PurchaseOrderPart}
        Bin: null
        Cost: 0
        Currency: null
        Description: null
        PartNumber: null
        PurchaseOrder: null {MyApp.Models.PurchaseOrder}
        PurchaseOrderId: 0
        PurchaseOrderPartId: 0
        Qty: 0
        QtyBackordered: 0
        QtyReceived: 0
        SupplierPartNumber: null 
```

`CreateEntityInfoFromJson`如果我在类中设置断点`Breeze.WebApi.ContextProvider`，我会看到调用`jsonSerializer.Deserialize(new JTokenReader(jo), entityType)`设置`entityInfo.Entity`为一个空实体对象。在反序列化过程中没有出现错误，所以我不知道为什么会这样。

谁能指出我可能的解决方案？

谢谢，理查德

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T21:06:35.207

好的，我想通了，这对我来说是一个愚蠢的错误。我在服务器上的实体类型已使用内部设置器（如`public decimal QtyReceived { get; **internal** set; }`. 这意味着 JSON 反序列化器无法设置属性值。有趣的是，反序列化器只是忽略了该错误。

将设置器更改为公开解决了此问题。

# php - 需要检查一个号码的最长前缀

> ID：15958300
> 
> 赞同：-4
> 
> 时间：2013-04-11T20:29:50.270
> 
> 标签：php

我有一个数组，即 $arr(22, 123, 12345, 1234) 用户输入一个值后，即 123456789 我需要检查数组中是否存在最长前缀。在上面的输入案例中 $arr[2] 将是答案。如果输入为 123000，则答案为 $arr[1]。输入可以是任意长度。

php提示会很明显

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T20:35:14.647

```
for ($i = strlen($inputNumber); $i > 0; $i--)
    foreach ($numberArray as $number)
        if (strpos($number, substr($inputNumber, 0, $i)) === 0)
            $longestNumber = $number; 
```

结果将存储在 $longestNumber 中（首先检查是否有失败`isset($longestNumber)`）

# ios - Xcode 项目找不到 .a

> ID：15958303
> 
> 赞同：0
> 
> 时间：2013-04-11T20:30:06.073
> 
> 标签：ios, xcode, static-libraries

我制作了一个 Xcode 控制台项目，并让它包含另一个项目，该项目具有 lib[name].a 的输出。我已经将它作为目标依赖项提到，并且还将二进制文件与它相关联。然而，在我的控制台项目编译期间，Xcode 抱怨它无法找到 .a。我还将它设置为始终搜索用户路径。我还为 $(BUILT_PRODUCTS_DIR) 递归输入了用户标题和库搜索路径。有什么答案吗？

[在另一个线程中，有一些关于 forceload 的内容，但没有明确提到在哪里](https://stackoverflow.com/questions/9500839/xcode-linker-flag-force-load-for-static-library-which-is-built-in-project)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T20:32:26.443

.a 不会在用户标头搜索路径中......那是因为`#include "*.h"`您需要更改库搜索路径，因为它是链接器问题。

# asp.net-mvc - 为了将诸如 URL 路由映射到 ASP.NET MVC 视图之类的配置推送到 XML 文件，我们需要做什么？

> ID：15958307
> 
> 赞同：0
> 
> 时间：2013-04-11T20:30:20.743
> 
> 标签：asp.net-mvc, url-routing, webforms, global-asax, asp.net-routing

全部：

我们使用 ASP.NET Web 窗体开始了我们的项目。

我们决定将 ASP.NET MVC 4 集成到我们的项目中。

我们希望保留现有的 .aspx ASP.NET Web 表单页面。

现在将 .aspx ASP.NET Web 窗体中的现有功能移动到 ASP.NET MVC 4 将需要太多的工作量。

但是，我们希望新功能能够使用 ASP.NET MVC 4 技术。

所以我创建了一个 Global.asax.cs 文件。

我已经考虑到现有的 .aspx ASP.NET Web 表单页面，包括以下代码行，这是 .aspx ASP.NET Web 表单页面的通用路径：

```
routes.IgnoreRoute("{resource}.aspx/{*pathInfo}"); 
```

Global.asax.cs 还包含到 ASP.NET MVC 视图的 URL 路由映射。

```
routes.MapRoute(
             "Default",
             // Route name
             "{controller}/{action}/{id}",
            // URL with parameters
            new { controller = "Home", action = "Index", id = "" }
            // Parameter defaults
            ); 
```

这是我不喜欢 ASP.NET MVC 的地方。
我不喜欢在已编译的 C# 文件中配置到 ASP.NET MVC 视图的 URL 路由映射。我相信像 URL 路由映射到 ASP.NET MVC 视图这样的配置应该在某种 xml 文件中。

为了将诸如 URL 路由映射到 ASP.NET MVC 视图之类的配置推送到 XML 文件，我们需要做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T21:55:51.397

您真的需要在生产环境中更改 url 而无需更改代码中的内容吗？这真是一个奇怪的情况。但无论如何，没有任何开箱即用的方法可以做到这一点。但是，没有什么能阻止您在 web.config 中创建自己的部分，然后在 Application_Start 中读取它并为该部分中的每一行调用 routes.MapRoute()。但我很确定我不需要它。

# f# - Fsharp - 如何将序列转换为 ParallelQuery？

> ID：15958308
> 
> 赞同：3
> 
> 时间：2013-04-11T20:30:22.810
> 
> 标签：f#, parallel-processing

我有一个我正在使用 ParallelEnumerable.Aggregate() 处理的对象序列，但是 Aggregate 函数的源需要是 ParallelQuery。

如何将序列转换为 ParallelQuery？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T20:34:52.380

您可以使用[AsParallel](http://msdn.microsoft.com/en-gb/library/dd413602.aspx)

```
open System.Linq

let (inputSeq: seq<int>) = [1;2;3]
let parallel = inputSeq.AsParallel() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T20:54:03.463

`PSeq`在 PowerPack 中为并行查询提供了一个 F# 友好的界面。它[定义了一个`ofSeq`函数](http://fsharppowerpack.codeplex.com/SourceControl/changeset/view/71313#1233342)，但无论出于何种原因，它都不是公开的。

您可以将其重新创建为模块扩展。

# jquery - 在 ASP.NET 中使用不显眼的 javascript 进行自定义验证

> ID：15958320
> 
> 赞同：0
> 
> 时间：2013-04-11T20:31:15.320
> 
> 标签：jquery, asp.net-mvc-3, unobtrusive-validation

我的表单中有一个文本框

```
<div class="editor-label">
    <label>Job Title</label>
</div>
<div class="editor-field">
    <input data-val="true" data-val-required="JobTitle is required and cannot be blank" id="JobTitle" name="JobTitle" type="text" value="TBD" />
    <span class="field-validation-valid" data-valmsg-for="JobTitle" data-valmsg-replace="true"></span>
</div> 
```

我添加了一个自定义验证器

```
<script>

        $.validator.addMethod('validjobtitle', function (value, element) {

            // Test 'value' for html here. 'value' is the value of the control being validated.
            if ($('#JobTitle').val() == "TBD") {
                alert("test");
                return false;
            }
            else return true; // Return true or false depending on if it passes or fails validation, respectively.
        }, 'Fix job Title');

        $.validator.unobtrusive.adapters.addBool('validjobtitle');
</script> 
```

在其中一次单击按钮时，我验证了这样的元素

```
var validator = $("form").validate(); // obtain validator
var anyError = false;
$step.find("input,select").each(function () {
    if (!validator.element(this)) { 
        anyError = true;
    }
}); 
```

由于某种原因，我的自定义验证器无法正常工作。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T21:02:11.577

使用内置 ASP.NET MVC 验证

创建带有验证的模型并在您的视图中使用。您将获得客户端/服务器端验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T20:57:46.233

经过更多阅读后，我发现了两件事

1.  记住不要在 DOM 就绪处理程序中添加自定义验证器（即不要使用 $(document).ready() 或 $(function() { ... })） - 应该在文档准备好之前设置验证.
2.  创建验证器并将其添加到适配器后，最重要的步骤是将其链接到要验证的元素。这是使用

    $(document).ready(function () { $('#JobTitle').rules('add', 'validjobtitle'); }

# c# - C# DataTable 添加列 DuplicateNameException

> ID：15958322
> 
> 赞同：1
> 
> 时间：2013-04-11T20:31:20.813
> 
> 标签：c#, datatable, columnname

我正在尝试将一列添加到 C# 数据集中的数据表中（数据集是从 XML 文档中读取的）。似乎，如果我命名该列，我会在尝试添加它时收到 DuplicateNameException。如果我未命名该列，它将被添加到数据表中。列的名称实际上是什么似乎并不重要。只是是否定义了 Datatable.ColumnName 属性。

这是相关的代码块（xR 是一个先前定义的 XmlTextReader，这都是在一个 while xR.Read() 循环中）：

```
xR.ReadToDescendant(this.calDataTag);
XmlReader xS = xR.ReadSubtree();
ds.ReadXml(xS);

foreach (DataTable dt in ds.Tables)
{
   if (dt.Columns.Contains("offset"))
   {
      if (dt.TableName == "Single")
      {
         DataColumn c1 = new DataColumn();
         c1.Caption = "TipType";
         c1.ColumnName = "whatever";
         dt.Columns.Add(c1);
      }

      foreach (DataRow dr in dt.Rows)
      {
         foreach (DataColumn dc in dt.Columns)
         {
            outString.Add("Table: " + dt.TableName.ToString() + " Column: " + dc.ColumnName.ToString() + " RowVal: " + dr[dc] + " " + dt.Columns.Contains("whatever")); 
         }
      }
    }
 } 
```

有趣的是，字符串的 dt.Columns.Contains("whatever") 部分总是返回 False。所以这不是一个真正的 DuplicateNameException。我确定我只是不正确地实现了 Columns.Add 方法。任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T21:23:22.797

在我看来，您正在检查错误的条件，或者至少您没有足够地覆盖自己，而不是这样做：

```
if (dt.Columns.Contains("offset"))
   {
      if (dt.TableName == "Single") 
```

为什么不这样做：

```
if (dt.TableName == "Single" && !dt.Columns.Contains("whatever") && dt.Columns.Contains("offset"))
{
  var c1 = new DataColumn();
  c1.Caption = "TipType";
  c1.ColumnName = "whatever";
  dt.Columns.Add(c1);
} 
```

那么你必须把你的`outString`一代放在合适的地方，这段代码至少应该更容易调试，你可以更快地找到发生了什么。

# lucene - 我可以使用 Lucene 索引源代码吗？

> ID：15958326
> 
> 赞同：1
> 
> 时间：2013-04-11T20:31:38.947
> 
> 标签：lucene

我想使用 Lucene 索引源代码。源代码已经使用编译器插件进行了预分析。编译器的输出是出现在源代码中的 ID 列表。每个 ID 都包含关于

*   定义 ID 的模块（而不是使用的模块），
*   ID 出现的源跨度（即 line:col-line:col），以及
*   ID 是在此位置定义还是仅在此处使用。

例如，给定这个源代码模块（在伪代码中）

```
module MyModule
from MyOtherModule import bar
foo = ...
print bar 
```

这是编译器在编译时可能输出的内容`MyModule`：

```
MyModule.foo,3:1-3:3,definition
MyOtherModule.bar,4:7-4:9,use 
```

请注意输出中出现的所有 ID 是如何完全限定的，即使它们在源中可能不会以这种方式出现。这就是我们使用编译器的原因，它允许我们进行比纯文本搜索更精确的代码搜索。

**问题**：是否可以编写一个自定义标记器和分析器来索引上面显示的编译器输出，以便在评分时保持元数据（即完全限定的 ID 以及该 ID 是否在给定位置定义或使用）可用文件？

更准确地说，我希望每个术语都与定义它的模块相关联（例如`foo`，将具有关联的元数据：定义 module= `MyModule`）。我希望发布列表中的每个发布都存储 ID 的这种特定外观是该 ID 的定义还是使用。

此外，我想让 Lucene 将非限定 ID 存储为限定 ID 的同义词。这将允许用户搜索“foo”并检索所有包含 ID“Module1.foo”和“Module2.foo”的文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-21T23:22:07.663

将各种属性放入 Lucene 字段可能更容易，这样您就可以进行如下查询：

```
parse module:MyModule use:yes 
```

这将只返回“MyModule”中“解析”的命中，其中使用了“解析”而不是定义。

# mod-rewrite - 检测用户代理的最快方法

> ID：15958329
> 
> 赞同：0
> 
> 时间：2013-04-11T20:31:59.253
> 
> 标签：mod-rewrite, user-agent

我想使用某个用户代理将访问者重定向到我的域到子域。最快的方法是什么？.htaccess / mod_rewrite？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T20:37:09.400

使用 mod_rewrite，您可以使用`%{HTTP_USER_AGENT}`变量和`RewriteCond`

例如，如果您想将其中包含“robot”一词的所有用户代理重定向到`bots`子域，那么您可以在文档根目录中的 htaccess 文件中的 vhost 配置中执行以下操作：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} !^bots\.example\.com$ [NC]
RewriteCond %{HTTP_USER_AGENT} robot [NC]
RewriteRule ^ http://bots.example.com/ [L,R] 
```

# git - 使用 Git Log 命令的 Grep 功能

> ID：15958330
> 
> 赞同：3
> 
> 时间：2013-04-11T20:32:03.027
> 
> 标签：git, gerrit

我需要使用 Git log 命令来提取 Commit Id，commit subject 其中 commit-body 包含一个特定的单词。我还需要只打印提交正文中包含该单词的那些行。

使用下面的命令，我可以获得相关的提交 ID 和主题，但我看不到提交正文中包含“CRs-Fixed”一词的行。

```
git log --pretty=format:"%H,%s" AU_1..AU2 --no-merges --grep='CRs-Fixed' 
```

如果我这样做`git log --pretty=format:"%H,%s,%b" AU_1..AU2 --no-merges --grep='CRs-Fixed'`了，我会得到整个提交体——我不需要。

关于如何仅获取所需信息的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T20:27:57.990

将您的标题行标记为守门员：

> `git log --pretty=format:$'\001%H\n\001%s\n%b' --grep='CRs-Fixed' \`
> `| sed $'/^\001\\|Crs-Fixed/s/^\001//'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-10T18:15:03.593

cbuckley 答案的变体：

```
(echo '$VAR1 = ['; \
git log --pretty='[ q(%H), q(%s), q(%b) ],' ; \
echo ']') \
| perl -e '$/=undef; $str = <>; $data = eval $str;
    foreach my $record (@$data) {
        next unless $record->[2] =~ /Scrivener/;
        print $record->[0], "\t", $record->[1], "\n" }' 
```

在我的一个存储库中，这会产生以下内容。

```
e38e7dcd6e87ca08d4163aa7772a1559682b26ad    Ignore unnecessary Scrivener files.
794ececb7643653b0d3920aa6f548a2a9f94c5d6    Add "The Fallen". Changes to "Wirehead". 
```

我认为这种技术的优雅程度仍然值得商榷，但它确实允许您以您选择的语言构建任意数据结构，并且更轻松地使用它。例如，您可以轻松地从 git-log 构建 JSON，尽管我在上面使用了 perl 的引用结构来避免引用问题。您也可以随时构建 XML 或 HTML。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T21:10:39.367

不是很优雅，但您可以在 PowerShell 脚本中执行此操作，如下所示：

```
function GitGrep {
  param ([string]$range, [string]$grepThis)

  git log --pretty=format:"%H" $range --no-merges --grep="$grepThis" | ForEach-Object {
    $Body = git log -1 --pretty=format:"%b" $_ | Select-String "$grepThis"
    if($Body) {
      git log -1 --pretty=format:"%H,%s" $_
      Write-Host $Body
    }
  }
} 
```

然后

```
GitGrep AU_1..AU2 CRs-Fixed 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T20:58:20.190

优雅说必须有更好的方法，但目前我能看到的唯一解决方案是使用标准`awk`和`grep`.

以下 awk 脚本会导致将哈希添加到所有额外的正文行：

```
if ($1 ~ /[0-9a-f]{40}/) { h=$1 } else { printf h } print 
```

有了这个，我们就可以只 grep 我们想要的行：

```
git log --pretty='%H,%s,%b' AU_1..AU2 --no-merges --grep='CRs-Fixed' \
    | awk -F, --re-interval '{if($1~/[0-9a-f]{40}/){h=$1}else{printf h}print}' \
    | grep 'CRs-Fixed' 
```

# java - 将类转换为其实现的接口

> ID：15958333
> 
> 赞同：2
> 
> 时间：2013-04-11T20:32:09.800
> 
> 标签：java, interface, casting

转换为接口的能力的目的是什么？

我有那个界面

```
public interface Iperson{ 
 String getTitle();
 int getID();
} 
```

我有一个实现它的类，例如

```
public class Person implements Iperson{

    public Person(){...}

    @Override
    public String getTitle() {
    return 'aaa';
    }

    @Override
    public int getID() {
        return '111';
    }    
} 
```

在另一个类中，我有一个带有签名的函数：

```
public boolean insert(Iperson somePerson) 
```

`insert(somePerson)`调用when `somePerson`is an instance`Person`和 when `somePerson`is a casted有什么区别`(Iperson)Person`？

什么时候会使用第二种选择？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T20:34:03.430

从语义上讲，没有区别。当您不显式转换时，将执行隐式向上转换。

请注意，在某些情况下，可能需要显式转换来解决歧义：

```
public class Clazz {

    interface IOne {}
    interface ITwo {}

    static class C implements IOne, ITwo {}

    static void foo(IOne arg) {}
    static void foo(ITwo arg) {}

    public static void main(String args[]) {
        foo(new C());        // ERROR: foo is ambiguous
        foo((IOne)new C());  // OK
        foo((ITwo)new C());  // OK
    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T20:34:10.283

绝对没有。

当您将对象传递给方法时，它会转换为函数所需的参数类型。在这种情况下，由于您将 a 传递`Person`给`insert()`，因此 Person 被强制转换为`IPerson`。

如果`Person`没有实现`IPerson`，那么你无法将它传递给`insert()`. 但是，由于`Person`implements ，它在传递给函数时`IPerson`被隐式转换为 a 。`IPesrson``insert(IPerson)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T20:36:44.230

接口的想法是让您可以通过该接口与对象进行通信。例如，假设您有三个班级。`Car`,`Bus`和`Truck`. 这三个类实现了`Vehicle`接口。而不是像这样的方法：

```
public void doSomething(Car car) {} 
public void doSomething(Bus bus) {} // etc 
```

您可以将它们称为它们的通用接口。

```
public void doSomething(Vehicle v) 
```

这也意味着您可以插入新类，并且仍然使用此方法。只要这些类实现了`Vehicle`接口，就可以将它们传递给该方法，而无需更改方法中的一丁点代码`doSomething`。这被称为[松耦合](http://en.wikipedia.org/wiki/Loose_coupling)，是代码中的一个理想特性。

示例图像：

![在此处输入图像描述](https://i.stack.imgur.com/DNVbz.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T20:37:27.643

完全没有区别！！你可以顺便去掉演员表！！您可以将一种 Person 或 Iperson 或任何通过“IS A”规则的对象传递给 insert 方法。因此，您可以传递另一种类型的 IPerson（例如也实现了 Iperson 的员工），甚至可以传递一种从 Person 继承的类。将 IPerson 作为 insert 方法中的一种参数，您可以将这些类型中的任何一种传递给 insert 方法。例如，您不必只传递 Persons 类型。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T20:39:33.343

不同之处在于您不能访问不在接口中但在实现类中的方法，而无需将其转换回实现类。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-11T20:39:47.503

通过方法调用`public boolean insert(Iperson somePerson)`，您可以使用*任何*实现的类`Interface Iperson`（不仅如此`Person`）。

现在，当您调用`insert(somePerson)`该方法时，该方法将获得一个实例，`Person`但同时该实例实际上也是`Iperson`（可以这么说）的一个实例。这样插入方法就可以使用`somePerson`它期望它具有的参数的方法和属性。如果您`somePerson`首先将 where 转换为 a `Person`，则该方法知道它可以使用`Iperson`接口的所有属性，并且可以忽略您在其中实现的所有其他内容`Person`（因为不需要它）。

因此，基本上，如果您可以`insert( somePerson)`在不强制转换的情况下调用，`somePerson`那么就不要强制转换（这将无用）。

# python - 使用 SQLAlchemy 记录版本，包括关系表

> ID：15958338
> 
> 赞同：1
> 
> 时间：2013-04-11T20:32:34.523
> 
> 标签：python, sqlalchemy

与此问题相关：[SQLAlchemy logging of changes with date and user](https://stackoverflow.com/questions/15952733/sqlalchemy-logging-of-changes-with-date-and-user/)

我正在使用[“配方”的修改版本来自动更改版本](http://www.sqlalchemy.org/docs/orm/examples.html#versioned-objects)。我认为它已经能够处理某些形式的关系（虽然不确定），但我无法处理单独表中存在多对多关系的情况。

这是一个有问题的简单示例：

```
from history_meta import (Versioned, versioned_session)

Base = declarative_base()

user_to_group = Table('user_to_group', Base.metadata,
    Column('user_login', String(60), ForeignKey('user.login')),
    Column('group_name', String(100), ForeignKey('group.name'))
)

class User(Versioned, Base):
    __tablename__ = 'user'
    login = Column(String(60), primary_key=True, nullable=False)
    password = Column(BINARY(20), nullable=False)

class Group(Versioned, Base):
    __tablename__ = 'group'
    name = Column(String(100), primary_key=True, nullable=False)
    description = Column(String(100), nullable=True)
    users = relationship(User, secondary=user_to_group, backref='groups') 
```

用`Base.metadata.create_all(engine)`我生成数据库中的表时，可以看到只有5个表：user、group、user_to_group、user_history和group_history 没有user_to_group_history。

“版本控制”通过继承添加到声明性对象中`Versioned`，但没有办法（我可以看到）对`user_to_group`不使用声明性格式的表做类似的事情。文档中也有[注释说使用映射到类的表不是一个好主意，](http://docs.sqlalchemy.org/en/rel_0_8/orm/extensions/declarative.html#configuring-many-to-many-relationships)所以我试图避免对关系使用声明性对象。

# jquery - jQuery 中的内容滑块推子

> ID：15958340
> 
> 赞同：2
> 
> 时间：2013-04-11T20:32:37.450
> 
> 标签：jquery, html

在[http://www.elitedeafpoker.com/dev/](http://www.elitedeafpoker.com/dev/)的“手部力量”部分，我试图让内容（淡入和淡出）显示在显示“皇家同花顺”的正确区域。我在“皇家同花顺”后面排列了 10 个手牌强度信息。当我单击其中一个列表项时，它不起作用，也没有做任何事情。

HTML

```
<ul class="hand-strength" style="margin-left:15px;">
   <li class="selected-royalflush" id="nav-fragment-1"><a href="#fragment-1">ROYAL FLUSH</a></li>
   <li class="selected-straightflush" id="nav-fragment-2"><a href="#fragment-2">STRAIGHT FLUSH</a></li>
   <li class="selected-fourkind" id="nav-fragment-3"><a href="#fragment-3">FOUR OF A KIND</a></li>
   <li class="selected-fullhouse" id="nav-fragment-4"><a href="#fragment-4">FULL HOUSE</a></li>
   <li class="selected-flush" id="nav-fragment-5"><a href="#fragment-5">FLUSH</a></li>
   <li class="selected-straight" id="nav-fragment-6"><a href="#fragment-6">STRAIGHT</a></li>
   <li class="selected-threekind" id="nav-fragment-7"><a href="#fragment-7">THREE OF A KIND</a></li>
   <li class="selected-twopair" id="nav-fragment-8"><a href="#fragment-8">TWO-PAIR</a></li>
   <li class="selected-onepair" id="nav-fragment-9"><a href="#fragment-9">ONE-PAIR</a></li>
   <li class="selected-highcard" id="nav-fragment-10"><a href="#fragment-10">HIGH-CARD</a></li> 
</ul> 
```

（要显示的信息）

```
<div id="fragment-1" class="ui-tabs-panel">  
   <div class="info" >  
      <h2><strong>ROYAL FLUSH</strong></h2>  
      <p>An ace high straint flush.</p> 
      <p class="cards"><img src="img/cards-royalflush.png" alt="Royal Flush" width="466" height="121" /></p>   
   </div>  
</div> 
<div id="fragment-2" class="ui-tabs-panel ui-tabs-hide">  
   <div class="info" >  
      <h2><strong>STRAIGHT FLUSH</strong></h2>  
      <p>A five-card straight, all of the same suit.</p> 
      <p class="cards"><img src="img/cards-straightflush.png" alt="" /></p>   
   </div>  
</div>  
<div id="fragment-3" class="ui-tabs-panel ui-tabs-hide">  
   <div class="info" >  
      <h2><strong>FOUR OF A KIND</strong></h2>  
      <p>Four cards of equal rank - also called "Quads."</p> 
      <p class="cards"><img src="img/cards-fourkind.png" alt="" /></p>   
   ........... 
```

jQuery

```
$(document).ready(function(){  
    $("#featured > ul").tabs({fx:{opacity: "toggle"}}).tabs("rotate", 5000, true);  
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T20:36:37.387

控制台中出现 JavaScript 错误：

```
Uncaught ReferenceError: jQuery is not defined 
```

这破坏了网站上的 JavaScript 功能。您需要在 jQueryUI*之前*包含 jQuery 库。

在源代码中，当前包括：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.5.3/jquery-ui.min.js" ></script> 
<script type="text/javascript" src="js/rotate1.js"></script>
<script type="text/javascript" src="js/jquery.js"></script> 
```

**编辑：**来源仍然不正确：

```
<script type="text/javascript" src="js/rotate1.js"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.5.3/jquery-ui.min.js" ></script> 
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js" ></script> 
```

# tfs - TFS 2010 EventTypes 的完整列表是什么？

> ID：15958342
> 
> 赞同：2
> 
> 时间：2013-04-11T20:33:00.077
> 
> 标签：tfs

我写了一个小应用程序，它试图订阅各种事件，但找不到一个很好的解释或所有不同事件类型的列表。有谁知道它们是什么？例如，到目前为止，我有这些：

```
var eventService = this.projectCollection.GetService(typeof(IEventService)) as IEventService;
this.subscriptions.Add(eventService.SubscribeEvent("WorkItemChangedEvent", "", delPref));
this.subscriptions.Add(eventService.SubscribeEvent("BuildCompletionEvent", "", delPref)); 
```

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T06:28:38.993

不确定是否有该事件的官方概述，但在收集数据库中检查“tbl_EventType”列出了以下事件：

1.  分支移动事件
2.  数据更改事件
3.  节点创建事件
4.  NodePropertiesChangedEvent
5.  节点重命名事件
6.  节点已删除事件
7.  项目创建事件
8.  项目删除事件
9.  签到事件
10.  搁置事件
11.  构建完成事件
12.  构建完成事件
13.  构建完成事件2
14.  BuildDefinitionChangedEvent
15.  BuildDefinitionUpgradeCompletionEvent
16.  BuildResourceChangedEvent
17.  BuildStatusChangeEvent
18.  WITAdapterSchemaConflictEvent
19.  WorkItemChangedEvent
20.  测试运行完成事件
21.  测试运行开始事件
22.  CodeReviewChangedEvent

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-17T07:54:49.287

我可以使用 ISubscriber 接口在自定义 tfs 插件中使用所有列出的事件类型吗？特别是 ProjectCreatedEvent

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T10:44:29.847

`BuildCompletionEvent`属于[Microsoft.TeamFoundation.Build.Server 命名空间](http://msdn.microsoft.com/en-us/library/gg216416.aspx)。在那里你会找到所有的课程——搜索“事件”。

`WorkItemChangedEvent`您可以对事件和其他类别的事件进行类似的搜索。

# symfony - Symfony2 在控制器动作之前执行服务

> ID：15958344
> 
> 赞同：-1
> 
> 时间：2013-04-11T20:33:05.667
> 
> 标签：symfony, controller, action

所以我们有 SomeBundle 并希望在调用 SomeBundleControllerAction 之前执行一些操作（服务\来自另一个包的另一个操作或其他东西）。我读到有些人从捆绑类中尝试它，有些人从事件监听器中尝试（但我无法了解它是如何工作的），现在问题是。

在调用 SomeBundle 的任何操作之前，如何以正确的方式调用（让它成为）服务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:04:18.607

这是我的答案的完整描述（一些坏人放了减号=\但根本没有帮助，如果你知道在哪里可以找到答案，下次放链接）[http://symfony.com/doc/current/book /internals.html#kernel-controller-event](http://symfony.com/doc/current/book/internals.html#kernel-controller-event)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T21:23:10.703

我不喜欢仅仅发布一个链接，但这几乎解释了我会在你的情况下做什么。您可以根据需要将服务注入到侦听器中（构造函数、设置器）。

[http://symfony.com/doc/current/cookbook/event_dispatcher/before_after_filters.html#before-filters-with-the-kernel-controller-event](http://symfony.com/doc/current/cookbook/event_dispatcher/before_after_filters.html#before-filters-with-the-kernel-controller-event)

# google-maps - 谷歌地图街景可用

> ID：15958345
> 
> 赞同：0
> 
> 时间：2013-04-11T20:33:07.103
> 
> 标签：google-maps, google-static-maps

我正在使用此处找到的街景谷歌地图： [https ://developers.google.com/maps/documentation/javascript/reference#StreetViewPanorama](https://developers.google.com/maps/documentation/javascript/reference#StreetViewPanorama)

我似乎无法找到是否有办法确定街景图像是否在指定位置可用？

我想知道是否有人遇到过这个问题，你做了什么来解决它？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T20:38:37.597

我找到了谢谢

使用

google.maps.StreetViewStatus

班级

# python - 无法安装 django 1.4 错误

> ID：15958349
> 
> 赞同：-2
> 
> 时间：2013-04-11T20:33:15.563
> 
> 标签：python, django

当我尝试安装 django 1.4 时，它给了我 1.5：

```
imac9:site-packages pdadmin$ sudo pip install django==1.4.1
Downloading/unpacking django==1.4.1
  Running setup.py egg_info for package django

    warning: no previously-included files matching '__pycache__' found under directory '*'
    warning: no previously-included files matching '*.py[co]' found under directory '*'
  Requested django==1.4.1, but installing version 1.5.1
Installing collected packages: django
    Found existing installation: Django 1.5.1 
```

我将如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T20:41:14.793

我建议使用[virtualenv](https://pypi.python.org/pypi/virtualenv)。这样，您的 1.4 和 1.5 安装可以在不同的环境中和平共存（无论如何，它更适合分发/部署）。我目前在两个单独的项目中运行 1.4.1 和 1.5。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T20:35:48.963

您可能已经有更新的版本。

`Found existing installation: Django 1.5.1`

我想你应该先卸载那个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T21:23:42.597

我能够解决这个问题的唯一方法是下载 1.4 tar 并手动安装它。

# php - jQuery AJAX 不向 PHP 发送多个提交按钮

> ID：15958351
> 
> 赞同：2
> 
> 时间：2013-04-11T20:33:20.727
> 
> 标签：php, jquery

所以我的问题是当我将表单提交到 PHP 时，我的问题是使用 jQuery 通过 AJAX 提交表单，使用 jQuery AJAX 时提交表单的按钮无关紧要，但是当使用表单操作时，表单提交并让我知道删除或更新按钮被按下。例如这里是提交表单的 HTML

```
<input type="submit" name="update" value="Update">
<input type="submit" name="delete" value="Delete"> 
```

这是下面的 AJAX 调用。

```
$(document).ready(function() {
    $("#update-form").submit(function () {
    $.ajax({  
      type: "POST",
      url: "updateHandler.php",  
      data: $("#update-form").serialize(),
      success: function(data) {
            var login = JSON.parse(data);
            if (login.success) {
                alert(login.message); //Show the ticket was updated!
            } else {
                alert(login.message);
            }
      }
    });  
    return false;       
  });
}); 
```

现在这是我的 AJAX 调用的 PHP 代码。

```
<?php
    $json_data = array();
    if(isset($_POST['delete'])) {
        $json_data['message'] = 'Ticket was deleted!';
    } else {
        $json_data['message'] = 'Ticket was updated!';
    }

// Encode response as JSON
echo (json_encode($json_data));

?> 
```

编辑

在被要求提供控制台输出后，这就是我得到的

如果来自 adeneo 答案中的代码，则“没有按下按钮”

{"success":true,"message":"没有按下按钮"}

```
大批
(
    [票号] => 6
    [技术员] => 1
    [类别] => 1
    [电子邮件] => nstark@mail.com
    [名称] => 内德史塔克
    [国家] => 加拿大
    [问题] => 我对产品 Y 有疑问
)

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T23:18:06.763

发生的事情是按钮没有与表单一起序列化，因为当以编程方式提交 for 时，它不知道您按下了哪个按钮，所以它不会发送它。所以我所做的是放置一个隐藏的输入并根据他们单击提交表单的按钮更改它的值。

另请注意，我默认选择更新的值。我这样做是为了如果用户使用键盘上的回车键来提交表单，它会自动执行某些操作并且不会出错。

HTML

```
<input type="hidden" name="choice" id="choice" value="update">
<input type="submit" name="update" value="Update">
<input type="submit" name="delete" value="Delete"> 
```

jQuery

```
$('input[type="submit"]').click(function() {
     $('#choice').val(this.name)
}); 
```

PHP

```
if(isset($_POST['choice']) && $_POST['choice'] == "update") {
    //if user clicked update
} else if(isset($_POST['choice']) && $_POST['choice'] == "delete") {
    //user clicked delete.
} 
```

# windows-phone-8 - 这种风格叫什么名字？

> ID：15958352
> 
> 赞同：0
> 
> 时间：2013-04-11T20:33:22.873
> 
> 标签：windows-phone-8

我想如果在静态资源中定义下面 3 个图像中突出显示的样式。如果是，它的名字是什么？

例如StaticResource PhoneTextExtraLargeStyle 是一个StaticResource，可以用来设置Style。

图 1 ![在此处输入图像描述](https://i.stack.imgur.com/NDNuK.png)

图 2 ![在此处输入图像描述](https://i.stack.imgur.com/w5vbx.png)

图 3 ![在此处输入图像描述](https://i.stack.imgur.com/5TMuk.png)

# backbone.js - 使用路由器上的方法添加标准路由

> ID：15958357
> 
> 赞同：0
> 
> 时间：2013-04-11T20:33:51.687
> 
> 标签：backbone.js, marionette

在 Backbone.Marionette 文档中，一些声明让我感到困惑：

> 您还可以使用路由器上的方法将标准路由添加到 AppRouter。

（[https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.approuter.md](https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.approuter.md)）

它在现实中可能是什么样子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T20:51:20.980

您可以在 AppRouter 上添加路由并定义在路由器或控制器中处理它的方法。

```
MyRouter = Backbone.Marionette.AppRouter.extend({
  // "someMethod" must exist at controller.someMethod
  appRoutes: {
    "some/route": "someMethod"
    "yet/anotherRoute": "routerMethod" // app router route
  },

  /* standard routes can be mixed with appRoutes/Controllers above */
  routes : {
    "some/otherRoute" : "someOtherMethod"
  },
  // method on the router
  routerMethod: function() { 
  // ...
  },
  someOtherMethod : function(){
    // do something here.
  }
}); 
```

# ios - 如何处理延迟登录？

> ID：15958359
> 
> 赞同：3
> 
> 时间：2013-04-11T20:33:56.657
> 
> 标签：ios, login, modal-dialog

我不希望我的应用程序一启动就要求登录。相反，我想提示用户“根据需要”登录。因此，例如，如果用户与需要他登录的应用程序的一部分进行交互，那么只有那时才会出现登录提示。

我有一些问题：

1) 以前有没有人做过这种“懒惰”的登录，如果有的话，你的经历是什么？管理起来很麻烦吗？这对用户来说是一种混乱的体验吗？

2）实现这一点的最佳方法是什么？

我有一个 LoginViewController 提示用户登录。我想在当时可见的任何视图控制器的视图之上以模态方式显示此视图控制器。

我还希望其他各种视图控制器对 LoginViewController 一无所知，以最大程度地减少耦合。

理想情况下，我会有一些 LoginManager 单例来管理与登录有关的任何事情。

然后例如，如果某个随机视图控制器 MyCoolViewController 需要对某个功能进行用户身份验证，例如按下按钮，它可以调用：

```
- (void)buttonPressed:(id)sender {
    // If the user isn't logged in, show the login modal view on top of this VC
    if (![[LoginManager sharedManager] requireLoginWithViewController:self]) {
        return;
    }

    // Code that is protected by login
} 
```

但是我需要一种方法来知道登录是否成功。这可以通过委托或回调来解决，但意味着每个视图控制器都知道我想避免的 LoginController 的一些信息。

另一种方法是创建 UIViewController 的 ProtectedViewController 子类，我的所有视图控制器都将对其进行子类化，并提供访问受保护功能的功能，并在需要时显示登录控制器。

您如何看待这些方法？还有什么更有意义的吗？我很想听听您关于“懒惰”登录的经验。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T20:53:43.113

我已经通过以下方式实现了这种延迟登录的方法（没有问题）：

1.  创建了一个带有注销、登录（用户名/密码）的设置视图，它可以是一个通用的登录页面，也可以是一个 UIWebView。
2.  应用程序将数据发送到服务器进行身份验证（在 JSON 消息中）。
3.  成功登录：我将登录数据存储在钥匙串中（使用单例模式，请参阅[此 Apple 示例代码](http://developer.apple.com/library/ios/#samplecode/GenericKeychain/Introduction/Intro.html)或[本教程](http://iosdevelopertips.com/core-services/using-keychain-to-store-username-and-password.html)）
4.  如果用户想使用应用程序的敏感部分，我要求存储用户名的密码，并且能够注销并使用不同的帐户登录。该应用程序将输入的密码与存储的密码进行比较（*离线模式*）或将其发送到服务器（在线连接）。但它可以根据要求以不同的方式实现。

并且用户喜欢！

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T21:08:46.237

您的问题已经包含了大部分答案。也就是说，您应该选择单例登录管理器。我会实现这样的登录：

```
- (void)buttonPressed:(id)sender {
    // If the user isn't logged in, show the login modal view on top of this VC
    if ([[LoginManager sharedManager] requiresLogin]) {

        [[LoginManager sharedManager] loginWithViewController:self completion:^{
            [self buttonPressed:sender];
        }];

        return;
    }

    // Code that is protected by login
} 
```

这样，您的登录管理仍然是匿名的，并且您的登录管理器可以异步地从中断的位置恢复用户登录的操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T22:14:04.247

我最终选择了一个实现，它对网络管理器的消费者隐藏登录细节，同时仍然不知道登录实现细节。

我通过 3 个课程实现了这一点：

*   NetworkManager（Web 服务的单例接口）
*   LoginManager（单例登录协调器）
*   LoginViewController（vc显示登录界面如登录按钮）

NetworkManager 有一个 loginDelegate，它负责处理特定于应用程序的登录 UI。在这种情况下，LoginManager 单例就是这个 loginDelegate。

一般流程是：

1.  应用通过 NetworkManager 从服务器请求数据
2.  如果请求身份验证失败，NetworkManager 会告诉它的 loginDelegate 它现在应该处理某种登录流程。
3.  LoginManager 然后在窗口的 rootViewController 上模态地呈现一个 LoginViewController。
4.  当登录按钮被按下时，LoginViewController 告诉 LoginManager 它想要登录。
5.  LoginManager 反过来使用 NetworkManager 来执行实际的服务器登录。
6.  当登录完成时，通过回调块通知 LoginManager。如果成功，LoginViewController 将被关闭。

LoginManager 和 LoginViewController 之间有一些反复，但这允许使用 NetworkManager 而无需了解登录流程。此外，NetworkManager 可以在另一个应用程序中重用，因为它对特定于应用程序的登录视觉效果一无所知（因此需要委托）。

委托通常不与单例一起使用，但我认为在这种情况下没问题，因为应该只有一个登录委托（理论上应该有一个登录应用程序的流程）。

这是第一种方法，可能会随着时间的推移而改进。也许使用通知来通知应用程序的其余部分用户登录可能是一个很好的下一步。

# mongodb - 使用 mongoDB find 获取所需的输出

> ID：15958363
> 
> 赞同：1
> 
> 时间：2013-04-11T20:34:07.673
> 
> 标签：mongodb, mapreduce

我的收藏中有以下文件

```
{
_id: ObjectId("5166fefbc482c31052000002"),
contact: [
    {
        home: 7735734105
    },
    {
        office: 9583866301
    }
],
user_name: "moti",
reportsTo: "bikram",
technology: [
    {
        name: ".net",
        rating: 5
    },
    {
        name: "JavaScript",
        rating: 2
    }
],
project: [
    "Agile School",
    "Draftmate"
],
type: "developer",
email: "motiranjan.pradhan@ajatus.co.in" 
```

} 和

```
{
_id: ObjectId("5166fe90c482c31052000001"),
contact: [
    {
        home: 7735734103
    },
    {
        office: 9583866901
    }
],
user_name: "ganesh",
reportsTo: "bikram",
technology: [
    {
        name: "JavaScript",
        rating: 3
    },
    {
        name: ".net",
        rating: 4
    }
],
project: [
    "SLBC",
    "Draftmate"
],
type: "developer",
email: "ganesh.patra@ajatus.co.in" 
```

}

现在我需要找到只知道 JavaScript 的人的评分。目前如果我运行

`db.users.find( { technology: { $elemMatch: { name: 'JavaScript' } } },{user_name:1,'technology.name':1,_id:0} ).pretty()`

我正在获取所有技术（.net 和 JavaScript）的名称及其相应的评级。我只需要用户名，以及他们各自在 JavaScript 中的评级。我需要使用任何聚合技术吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T20:49:10.157

位置运算符“ [$”](http://docs.mongodb.org/manual/reference/projection/positional/#prj._S_)可用于将查询结果限制为第一个匹配元素。要在上面的查询中使用，您可以将其更改为：

```
db.users.find( { technology: { $elemMatch: { name: 'JavaScript' } } },{user_name:1,'technology.$.name':1,_id:0} ) 
```

# binding - JAXB XJC 两个声明导致冲突。无法兑现自定义绑定

> ID：15958364
> 
> 赞同：4
> 
> 时间：2013-04-11T20:34:09.067
> 
> 标签：binding, jaxb, xsd, xjc

我想从此模式文件生成 JAXB 类： [http ://www.taxonx.org/schema/v1/taxonx1.xsd](http://www.taxonx.org/schema/v1/taxonx1.xsd)

我使用自定义绑定解决了由导入的 mods-3-1.xsd 引起的几个命名冲突，如下所示：

```
<jxb:bindings xmlns:xsd="http://www.w3.org/2001/XMLSchema"
xmlns:jxb="http://java.sun.com/xml/ns/jaxb" version="2.1">

  <jxb:bindings schemaLocation="http://www.loc.gov/standards/mods/v3/mods-3-1.xsd">
    <jxb:bindings
        node="//xsd:complexType[@name='relatedItemType']/xsd:attribute[@name='type']">
        <jxb:property name="type2" />
    </jxb:bindings>

    <jxb:bindings
        node="//xsd:attributeGroup[@name='language']/xsd:attribute[@name='lang']">
        <jxb:property name="lang2" />
    </jxb:bindings>

    <jxb:bindings
        node="//xsd:complexType[@name='titleInfoType']/xsd:complexContent/xsd:extension/xsd:attribute[@name='type']">
        <jxb:property name="type3" />
    </jxb:bindings>

    <jxb:bindings
        node="//xsd:complexType[@name='nameType']/xsd:attribute[@name='type']">
        <jxb:property name="type4" />
    </jxb:bindings>

    <jxb:bindings
        node="//xsd:complexType[@name='unstructuredText']/xsd:simpleContent/xsd:extension/xsd:attribute[@name='type']">
        <jxb:property name="type5" />
    </jxb:bindings>
  </jxb:bindings>
</jxb:bindings> 
```

当我想生成类时，我仍然收到以下错误：

```
parsing a schema...
compiling a schema...
[ERROR] Two declarations cause a collision in the ObjectFactory class.
line 468 of http://digir.net/schema/conceptual/darwin/manis/1.21/darwin2.xsd

[ERROR] (Related to above error) This is the other declaration.
line 326 of http://digir.sourceforge.net/schema/protocol/2003/1.0/digir.xsd

Failed to produce code. 
```

当我添加另一个自定义绑定时..

```
<jxb:bindings schemaLocation="http://digir.net/schema/conceptual/darwin/manis/1.21/darwin2.xsd">
    <jxb:bindings
        node="//xsd:element[@name='requiredList' and @substitutionGroup='digir:requiredList']">
        <jxb:property name="requiredList2" />
    </jxb:bindings>
</jxb:bindings> 
```

我得到另一个错误：

```
parsing a schema...
[ERROR] compiler was unable to honor this property customization. It is attached to a     
wrong place, or its inconsistent with other bindings.
line 34 of file:/C:/git/charaparser%20-%20Copy/resources/io/darwinCore/mods-3-1-
bindings.xml

[ERROR] (the above customization is attached to the following location in the schema)
line 468 of http://digir.net/schema/conceptual/darwin/manis/1.21/darwin2.xsd

Failed to parse a schema. 
```

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T21:48:06.917

一个很好的答案在这里：

[http://blog.lunatech.com/2008/10/17/generating-kml-restful-clients](http://web.archive.org/web/20150510110454/http://blog.lunatech.com/2008/10/17/generating-kml-restful-clients)

简而言之，使用`<jaxb:factoryMethod name="RequiredList2"/>`定制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-13T10:59:15.327

我们可以使用如下。我得到了同样的错误并通过使用 factoryMethod 解决。

命令：xjc -d src -extension -b demo.xjb demo.xsd

```
 demo.xjb
 ================
 <jxb:bindings 
 xmlns:xs="http://www.w3.org/2001/XMLSchema"
 xmlns:jxb="http://java.sun.com/xml/ns/jaxb"
 version="2.1">
 <jxb:bindings schemaLocation="demo.xsd">
        <jxb:bindings node="//xs:complexType[@name='itemType']">
            <jxb:factoryMethod  name="Item"/>
        </jxb:bindings>
 </jxb:bindings>
 </jxb:bindings>

demo.xsd
===============
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
    xmlns:jaxb="http://java.sun.com/xml/ns/jaxb"
    jaxb:version="2.1">
 <xs:complexType name="itemType">
    <xs:annotation>
        <xs:appinfo>
            <jaxb:class name="Item"/>
        </xs:appinfo>
    </xs:annotation>
    <xs:attribute name="id" type="xs:string" use="required"/>
 </xs:complexType>
 </xs:schema> 
```

# android - Android 推送通知参数

> ID：15958369
> 
> 赞同：1
> 
> 时间：2013-04-11T20:34:22.420
> 
> 标签：android, push-notification, google-cloud-messaging

因此，我查看了许多教程和参考资料，但似乎找不到我正在寻找的信息。我正在创建一个为推送通知构建的服务器，在 GCM 通知上看起来我需要 4 条信息。
1.Sender_ID 2.Authorization Token 3.Device REgistration ID 4.包名。

我遇到的问题是找出应该在哪里以及谁应该获得这些物品。我知道设备注册 ID 来自手机，我发现参考资料说授权令牌和 Sender_ID 都是 API 密钥。所以我猜其中一个是关键，而我错过了另一部分。包裹名称我不知道，如果有人对我在哪里可以找到此信息以及如何检索它有任何意见，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T20:48:43.533

发件人 ID 和授权令牌不是一回事。这些术语实际上是旧 C2DM API 中使用的旧术语。在 GCM 中，等效术语称为项目 ID 和 API 密钥。

发件人 ID 是 Google API 项目 ID。

授权令牌是 API 密钥（为 Google API 项目创建）。

发件人 ID 作为参数传递给 Android 应用程序中的代码，用于注册应用程序以接收 Google 云消息。注册完成后，您将获得特定设备上特定应用程序的注册 ID。

包名是可选参数，可以忽略。

您应该阅读[此处的概述](http://developer.android.com/google/gcm/gs.html)以获取更多详细信息。

# jquery - 将子部分从一个部分滚动到另一个部分

> ID：15958385
> 
> 赞同：1
> 
> 时间：2013-04-11T20:35:31.977
> 
> 标签：jquery, scroll, move, scrolltop

我有 3 个部分（第一、第二和第三），在“第一”部分内我有另一个部分称为“contenidor_composicio”。我想做的是使“contenidor_composicio”成为滚动部分。所以我想像“固定”一样移动它，但总是从一个部分移动到另一个部分，只需一个简单的鼠标滚动（我放了 50px）。例如，如果我在“第一”部分，我不想向下滚动到“第二”。我想直接从一号到二号。

```
<section id="first">
    <section id="contenidor_composicio"></section>
</section>
<section id="second"></section>
<section id="third"></section> 
```

在示例中查看它：http: [//jsfiddle.net/blackersoul/LATDj/](http://jsfiddle.net/blackersoul/LATDj/)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:57:16.173

我相信这应该可以实现您想要的。

首先，更新您的 CSS 以使 contenidor_composicio 的位置是相对的。

```
#contenidor_composicio {
    background-color: black;
    height: 400px;
    width: 70%;
    margin: auto;
    position:relative;
} 
```

现在，我们需要修复 jQuery/JavaScript...

首先，我们需要添加一个标志来确定滚动是由用户移动滚动条还是由脚本更改滚动位置引起的。然后，在您检查滚动差异是否大于 minPx 值的条件下，添加我们的新标志必须为 false。

接下来，我们需要改变我们的条件。我们不是检查 currentScroll 位置是否等于 firstPosition，而是检查 previousScroll 位置是否相等。

接下来，让我们将 $(window).scrollTop(position) 移出动画序列。我不确定它们是否返回一个值，所以让我们滚动然后制作动画。

现在我们已经将它的位置设置为相对位置，将我们正在制作动画的 css 属性更改为 top 而不是 marginTop。

我们还需要将“px”添加到 CSS 属性的值中。

好的，所以设置新的滚动位置和动画现在应该可以正常工作了。让我们将 currentScroll 设置为我们刚刚滚动到的新位置。

然后将 jumped 标志设置为 true，因为脚本导致滚动，而不是用户。

清洗、冲洗、重复每个条件。

现在，我们将在我们的差异和跳转测试中添加一条 else 语句以将标志设置为 false，以便为下一次滚动（只能由用户执行）做好准备。

最后，我们要在条件中移动 previousScroll = currentScroll 的设置。这将其修复为如果我们从三个位置之一滚动超过 minPx，它会触发滚动脚本。否则，如果我们一次缓慢地向下滚动页面少于 mixPx，我们将永远不会触发滚动脚本。

```
$(function () {

    /**********************     REDIMENCIÓ DE LES SECCIONS FIRST & SECOND & THIRD    *************************/

    var alcada = $(window).height();
    alcada = parseInt(alcada, 10);
    $('#first').height(alcada);
    $('#second').height(alcada);
    $('#third').height(alcada);

    /*********************************** SCROLLING to a SECTION *************************/
    var $scrollingDiv = $("#contenidor_composicio");

    /* Get the position of each Section */
    var previousScroll = 0;
    var firstPosition = $('#first').offset().top;
    var secondPosition = $('#second').offset().top;
    var thirdPosition = $('#third').offset().top;

    var minPx = 50; /***** Min px to move to next/previous step *********/

    var jumped = false; //indicates whether scrolling was due to user or to scrip

    $(window).scroll(function () {
        var currentScroll = $(this).scrollTop();
        var difference = Math.abs(currentScroll - previousScroll);
        if ((difference >= minPx) && !jumped) {
            if (currentScroll > previousScroll && previousScroll == firstPosition) /******** 1rst step  */
            {
                //            alert('down 1-->2');
                $(window).scrollTop(secondPosition);
                $scrollingDiv.stop()
                    .animate({
                    "top": (secondPosition + "px")
                }, "slow");
                currentScroll = secondPosition;
                jumped = true; //script caused scrolling
            } else if (currentScroll > previousScroll && previousScroll == secondPosition) /*********** 2nd Step *******/
            {
                //            alert('down 2-->3');
                $(window).scrollTop(thirdPosition);
                $scrollingDiv.stop()
                    .animate({
                    "top": (thirdPosition + "px")
                }, "slow");
                currentScroll = thirdPosition;
                jumped = true; //script caused scrolling
            } else if (currentScroll < previousScroll && previousScroll == secondPosition) /*********** 2nd Step *******/
            {
                //               alert('go from  2-->1');
                $(window).scrollTop(firstPosition);
                $scrollingDiv.stop()
                    .animate({
                    "top": (firstPosition + "px")
                }, "slow");
                currentScroll = firstPosition;
                jumped = true; //script caused scrolling
            } else {
                //               alert('down 3-->2');
                $(window).scrollTop(secondPosition);
                $scrollingDiv.stop()
                    .animate({
                    "top": (secondPosition + "px")
                }, "slow");
                currentScroll = secondPosition;
                jumped = true; //script caused scrolling
            }
            previousScroll = currentScroll;
        } else {
            jumped = false; 
        }
    });
}); 
```

# mysql - 并非所有数据都从 mysql 查询返回

> ID：15958386
> 
> 赞同：1
> 
> 时间：2013-04-11T20:35:33.077
> 
> 标签：mysql

假设我创建了 3 个表，如下所示...

```
create table `users` (`username` varchar(20), `other_non_relevant_field` varchar(20) );
insert into `users` values
("Bob","blah blah blah"),
("Steve","blah blah blah"),
("Sue","blah blah blah"),
("Adam","blah blah blah");

create table `table_1` (`username` varchar(20), `field_abc` varchar(20), `field_def` varchar(20), `other_non_relevant_field` varchar(20) );
insert into `table_1` values
("Steve","blue","brown","blah blah blah"),
("Sue","yellow","brown","blah blah blah"),
("Sue","pink","brown","blah blah blah"),
("Adam","green","brown","blah blah blah");

create table `table_2` (`username` varchar(20), `field_ghi` varchar(20), `field_jkl` varchar(20), `other_non_relevant_field` varchar(20) );
insert into `table_2` values
("Bob","spoon","fork","blah blah blah"),
("Bob","knife","spork","blah blah blah"),
("Steve","spoon","knife","blah blah blah"),
("Sue","spoon","fork","blah blah blah"),
("Sue","knife","spork","blah blah blah"),
("Adam","fork","knife","blah blah blah"); 
```

然后我运行这个查询......

```
SELECT users.username,
    table_1.field_abc, table_1.field_def,
    table_2.field_ghi, table_2.field_jkl
FROM users
JOIN table_1 ON table_1.username = users.username
JOIN table_2 ON table_2.username = users.username
WHERE
    table_1.field_abc REGEXP "(spork|pink)" OR
    table_1.field_def REGEXP "(spork|pink)" OR
    table_2.field_ghi REGEXP "(spork|pink)" OR
    table_2.field_jkl REGEXP "(spork|pink)"
ORDER BY
(
    ( CASE WHEN table_1.field_abc LIKE "%spork%" THEN 1 ELSE 0 END ) +
    ( CASE WHEN table_1.field_abc LIKE "%pink%" THEN 1 ELSE 0 END ) +
    ( CASE WHEN table_1.field_def LIKE "%spork%" THEN 1 ELSE 0 END ) +
    ( CASE WHEN table_1.field_def LIKE "%pink%" THEN 1 ELSE 0 END ) +
    ( CASE WHEN table_2.field_ghi LIKE "%spork%" THEN 1 ELSE 0 END ) +
    ( CASE WHEN table_2.field_ghi LIKE "%pink%" THEN 1 ELSE 0 END ) +
    ( CASE WHEN table_2.field_jkl LIKE "%spork%" THEN 1 ELSE 0 END ) +
    ( CASE WHEN table_2.field_jkl LIKE "%pink%" THEN 1 ELSE 0 END )
)DESC; 
```

为什么它不返回 Bob 包含“spork”的条目？[你可以在http://sqlfiddle.com/#!2/cbbda/5](http://sqlfiddle.com/#!2/cbbda/5)看到这个查询

不用说，这不是我的实际代码，但它足够相似并且具有相同的问题，我将能够找出我的问题所在。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T20:42:18.890

由于默认值`JOIN`是`INNER`，查询不返回表返回的结果`NULL`。使用`LEFT JOIN`返回“Bob”行，`NULL`包括值。

[http://sqlfiddle.com/#!2/cbbda/7/0](http://sqlfiddle.com/#!2/cbbda/7/0)

这是各种 JOIN 类型的可视化表示：http: [//www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

```
SELECT users.username,
  table_1.field_abc, table_1.field_def,
  table_2.field_ghi, table_2.field_jkl
FROM users
LEFT JOIN table_1 ON table_1.username = users.username
LEFT JOIN table_2 ON table_2.username = users.username
WHERE
  table_1.field_abc REGEXP "(spork|pink)" OR
  table_1.field_def REGEXP "(spork|pink)" OR
  table_2.field_ghi REGEXP "(spork|pink)" OR
  table_2.field_jkl REGEXP "(spork|pink)"
ORDER BY
(
  ( CASE WHEN table_1.field_abc LIKE "%spork%" THEN 1 ELSE 0 END ) +
  ( CASE WHEN table_1.field_abc LIKE "%pink%" THEN 1 ELSE 0 END ) +
  ( CASE WHEN table_1.field_def LIKE "%spork%" THEN 1 ELSE 0 END ) +
  ( CASE WHEN table_1.field_def LIKE "%pink%" THEN 1 ELSE 0 END ) +
  ( CASE WHEN table_2.field_ghi LIKE "%spork%" THEN 1 ELSE 0 END ) +
  ( CASE WHEN table_2.field_ghi LIKE "%pink%" THEN 1 ELSE 0 END ) +
  ( CASE WHEN table_2.field_jkl LIKE "%spork%" THEN 1 ELSE 0 END ) +
  ( CASE WHEN table_2.field_jkl LIKE "%pink%" THEN 1 ELSE 0 END )
)DESC; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T20:45:33.470

因为 Bob 不存在于 table_1 元素中，并且 JOIN 会丢弃所有连接表中没有匹配行的行。

为了达到你想要的效果，在两个外观中将JOIN改为LEFT JOIN。这样，您将让所有“用户”元素与匹配的 table_1 和 table_2 元素连接，如果没有找到匹配项，则为 null。

# c# - 使用 WCF 进行双向通信

> ID：15958389
> 
> 赞同：10
> 
> 时间：2013-04-11T20:35:58.167
> 
> 标签：c#, wcf

我正在设计一个使用 Windows Communication Foundation 实现的客户端-服务器架构。在其中一种用例中，服务器需要**请求**客户端的状态，这意味着它需要调用**客户端**`SendStatus()`上的方法并询问其状态。我只是想知道这个用例是否可以使用 WCF 实现，而无需在客户端创建独立服务。我试图避免使用套接字，因为客户端是后台服务，并且基本上始终连接到服务器。我知道 WCF 最终使用套接字进行通信，但我特别尝试使用 WCF，因为这更像是概念证明。

 **我想到的一个解决方法是客户端可以调用**服务器**`SendClientStatus()` 上的方法并每 5 秒左右发送一次它的状态。但是话又说回来，这似乎不是一个好方法。任何帮助，将不胜感激。

 *** * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-11T20:38:22.920

在 WCF 的世界中，您或多或少有两种选择。

A)[具有双 Http 绑定的双工服务](http://www.c-sharpcorner.com/uploadfile/dhananjaycoder/a-simple-duplex-service-in-wcf/)

B）无返回值轮询方案 - 这基本上就是您所描述的。正如您正确指出的那样，幼稚的实现并不是那么好，但是有一些优化。由于您不需要从 SendClientStatus 返回的任何内容（对吗？），您可以通过仅在有更新时发送更新来优化通信 - 例如，只要客户端的状态保持不变，就不会向服务器发送任何内容。根据客户端状态更改的频率，这可以大大减少流量。双工服务提供了一些您想要避免的额外配置，除非您真的需要它们。****

# asp.net - 将 datatable/datarow[] 列从字符串转换为 int

> ID：15958390
> 
> 赞同：0
> 
> 时间：2013-04-11T20:36:01.180
> 
> 标签：asp.net, asp.net-3.5

我有一个数据表，其中有一个名为“位置”的列，它以字符串的形式出现。我使用 DataTable.Select 来获取数据行列表。

```
DataRow[] drTopMenu = dtMenuItems.Select("ParentMenuID is null", "Position asc"); 
```

但是，位置是 1、2、...、9、10，数据行数组排序为 1、10、2、3、...、9。我该如何解决这个问题？有没有办法在过滤/排序之前将“位置”列的数据类型从字符串更改为整数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T20:55:25.253

不确定效率，这假设位置列将始终包含一个 int。

```
DataRow[] drTopMenu = dtMenuItems
                .Select("ParentMenuID is null")
                .OrderBy(x => int.Parse((string)x["Position"]))
                .ToArray(); 
```

# algorithm - 寻找六边形路径的坐标

> ID：15958391
> 
> 赞同：1
> 
> 时间：2013-04-11T20:36:01.667
> 
> 标签：algorithm, math, graphics, linear-algebra, graph-algorithm

我正在尝试将沿直线（2 点）的运动转换为沿六边形路径的运动，我尝试了不同的公式但没有奏效。

![在此处输入图像描述](https://i.stack.imgur.com/RrMkm.png)

我想根据 A 和 B 找出 P、Q、R、M 的坐标。我希望有人提出一个更好的公式，它可以为我提供移动长六边形路径的坐标。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T23:51:00.693

如果您熟悉复数（并假设这是一个正六边形），

```
D = B - A
P = A + D( 1 + sqrt(3)i )/4
Q = A + D( 3 + sqrt(3)i )/4
R = A + D( 1 - sqrt(3)i )/4
M = A + D( 3 - sqrt(3)i )/4 
```

**编辑：**

如果您*不*熟悉复数，我们不应该在这里尝试使用它们。它们是一个很棒的工具，但一开始并不容易掌握。让我们从长远来看：

A = (A [x] , A [y] )
B = (B [x] , B [y] )
D = B - A = (D [x] , D [y] ) 其中 D [x] =A [x] -B [x]和 D [y] =A [y] -B [y]
P = (A [x] + D [x] /4 - sqrt(3)D [y] /4, A [y] + D [y] /4 + sqrt(3)D [x] /4)
Q = (A [x] + 3D [x] /4 - sqrt(3 )D [y] /4, A [y] + 3D [y] /4 + sqrt(3)D [x]/4)
R = (A [x] + D [x] /4 + sqrt(3)D [y] /4, A [y] + D [y] /4 - sqrt(3)D [x] /4)
M = (A [x] + 3D [x] /4 + sqrt(3)D [y] /4, A [y] + 3D [y] /4 - sqrt(3)D [x] /4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T00:04:04.913

如果您将六边形想象为由向量组成 - 具有大小（距离）和方向（从西到东的地平线逆时针旋转的角度）的线，这更容易概念化。

调用从 A 到 B D 的向量。如果您使用一些三角函数来计算六边形的几何形状，则 D 的大小是六边形边长的两倍。所以，我们可以用它来构造和其他六边形边一样大的向量，从而得到六边形的其他点。

取向量 D，将其大小减半，将其逆时针旋转 60 度，并将这个新向量添加到 A 的位置。这给了你P。

做同样的事情，但顺时针旋转 60 度并将其添加到 A 的位置。这给了你R。

类似地，Q 是将向量 D 减半，顺时针旋转 60 度，反转并添加到 B 的位置。

最后，M 是将向量 D 减半，逆时针旋转 60 度，反转并添加到 B 的位置。

（要将矢量转换为移动的 x 距离和移动的 y 距离，请分别将幅度乘以角度的 cos 和角度的 sin。如果需要弧度，请确保使用弧度，如果需要度，请确保使用度。）

# java - 信息：TLD 已跳过。网址： 已经定义

> ID：15958392
> 
> 赞同：1
> 
> 时间：2013-04-11T20:36:05.020
> 
> 标签：java, jsp, tomcat, web.xml, taglib

我有一个 Web 应用程序正在从 Tomcat 5.5.35 迁移到 Tomcat 7.0.39。目前，有几个自定义标记库，每个都在自己的`tld`文件中定义。这是一个例子：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE taglib PUBLIC "-//Sun Microsystems, Inc.//DTD JSP Tag Library 1.2//EN" "http://java.sun.com/dtd/web-jsptaglibrary_1_2.dtd">
<taglib>
    <tlib-version>1.0</tlib-version>
    <jsp-version>1.2</jsp-version>
    <short-name>customTag</short-name>
    <uri>http://www.something.com/util/customTag-db-taglib</uri>
    <description>
        Database tag library for Util 
    </description>
    <tag>
        <name>useBean</name>
        <tag-class>com.mx.releasemgr.tags.db.UseBeanTag</tag-class>
        <tei-class>com.mx.releasemgr.tags.db.UseBeanTEI</tei-class>
        <body-content>EMPTY</body-content>
        <attribute>
            <name>id</name>
            <required>true</required>
            <rtexprvalue>true</rtexprvalue>
        </attribute>
        <attribute>
            <name>oid</name>
            <required>false</required>
            <rtexprvalue>true</rtexprvalue>
        </attribute>
        <attribute>
            <name>oidParameter</name>
            <required>false</required>
            <rtexprvalue>true</rtexprvalue>
        </attribute>
        <attribute>
            <name>type</name>
            <required>true</required>
            <rtexprvalue>true</rtexprvalue>
        </attribute>
        <attribute>
            <name>scope</name>
            <required>false</required>
            <rtexprvalue>true</rtexprvalue>
        </attribute>
    </tag>
    ...
</taglib> 
```

该文件夹中恰好有一份此 tld 文件的副本`WEB-INF`。它从未被放入`jar`文件中。

`web.xml`看起来像这样：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app 
  xmlns="http://java.sun.com/xml/ns/javaee" 
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
  http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" version="3.0">
...
<jsp-config>
     <taglib>
    <taglib-uri>customTag</taglib-uri>
    <taglib-location>/WEB-INF/customTag.tld</taglib-location>
</taglib>
</jsp-config>
... 
```

此错误显示在`catalina.out`

```
Apr 11, 2013 3:50:08 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://www.mx.com/releasemgr/releasemgr-db-taglib is already defined 
```

taglib 是这样导入的：

`<%@ taglib uri="customTag" prefix="db" %>`

我看过[这个问题](https://stackoverflow.com/questions/8724405/what-does-info-tld-skipped-uri-is-already-defined-mean)，但它似乎并不适用。我已经添加了`<jsp-config>`，它没有帮助。我把标签库叫错了吗？URI 参数是否正确？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-14T16:52:28.530

规范要求的 URI 的优先顺序是：

1.  J2EE 平台标记库 - Tomcat 不提供这些
2.  **web.xml 条目**
3.  WEB-INF/lib 中的 JARS 和 WEB-INF**下的 TLD**（同等优先级）
4.  来自容器的其他条目

您的 tld 加载了两次，第一次来自 web.xml，第二次来自扫描 WEB-INF 及其子文件夹。

解决方案是

1、从web.xml中删除

或者

2、把你的tld文件放在/WEB-INF/tags/

* * *

好的，这只是一个小故事。如果你想了解更多。

1、tomcat 5.5也有同样的逻辑，只是不做烦人的日志而已。

2、这个日志是在tomcat启动的时候出现的。在 tomcat 启动时加载 tld**仅**用于在 tld 文件中查找侦听器。

3、在jsp中真正使用tld是另外一回事。

在编译第一个 jsp 时，tomcat 将为 uri 和 location 对构建缓存。

uri加载来自相同的顺序

1) web.xml 条目，标签 uri 来自 web.xml

2) 扫描WEB-INF下的tld文件，标签uri取自tld文件

3) 扫描 jars，标签 uri 是从 tld 文件中获取的。

所以在你的配置中，customTag.tld 注册了 2 个 uri、customTag 和[http://www.mx.com/releasemgr/releasemgr-db-taglib](http://www.mx.com/releasemgr/releasemgr-db-taglib)

4）当tomcat启动时。它加载 tld 以在 tld 文件中查找侦听器。

从 web.xml 加载时，它会将 customTag（来自 web.xml）和[http://www.mx.com/releasemgr/releasemgr-db-taglib](http://www.mx.com/releasemgr/releasemgr-db-taglib(from) （来自tld 文件）放入一个集合中。

从 WEB-INF 加载时，uri 来自 tld 文件，即 ttp://www.mx.com/releasemgr/releasemgr-db-taglib。Tomcat 需要避免重复添加 tld 监听器，因此它会检查 uri 是否存在于集合中。如果 uri 已经存在，它会记录消息并跳过添加 tld 侦听器。

把它们放在一起，

1、如果你的tld文件中没有监听器，Tomcat启动时不需要扫描tld。您可以通过在上下文中将 processTlds 设置为 false 来禁用。

在编译第一个 jsp 时，tomcat 将为 uri 和 location 对构建缓存。

2，您可以忽略警告。这只是为了避免在 tld 文件中重复加载侦听器。

# css - CSS3 IE9 背景尺寸：封面；并不总是有效

> ID：15958393
> 
> 赞同：1
> 
> 时间：2013-04-11T20:36:15.027
> 
> 标签：css, internet-explorer-9

这让我很生气，我有一张背景图片正在使用 background-size:cover; 进行全屏显示。据我了解，IE9 支持这一点。什么让我很生气的是一些 IE9 浏览器正在处理这个问题，而一些 IE9 浏览器则没有。

有人以前经历过吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-17T20:25:59.713

我有同样的问题，我在以下声明中修复它`<head />`：

`<meta http-equiv="X-UA-Compatible" content="IE=7; IE=8; IE=9">`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T20:41:20.683

> 一些 IE9 浏览器正在处理这个问题，而一些 IE9 浏览器则没有。

请确保您的`Browser Mode`and`Document Mode`是`IE 9`. 使用 F12 开发者工具。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-25T21:04:43.200

我知道它很旧，但我今天遇到了这个问题，它也让我很生气..但我找到了解决方案：

检查您的第一行中是否有标签`<!DOCTYPE html>`，如果您忘记它会使您的 css3 在 IE9 上看起来非常糟糕。

谢谢！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-13T13:26:27.477

那行得通！

作为`<!DOCTYPE html>`第一行解决了 IE 9 问题（在 Chrome 和 IE 10 之前可以正常工作）。[您可以在我的页面http://www.cgmdesign.net](http://www.cgmdesign.net)上看到以下代码的结果（背景照片是我的）。

```
<style>
body { 
  background: url('images/golf3.jpg');
  background-size: cover;
  background-repeat: no-repeat;
  background-attachment: fixed;
  background-position: center bottom; 
}
</style> 
```

# python - 使用 Python 正则表达式提取数据

> ID：15958394
> 
> 赞同：13
> 
> 时间：2013-04-11T20:36:17.113
> 
> 标签：python, regex, parsing

我在围绕 Python 正则表达式想出一个正则表达式来提取特定值时遇到了一些麻烦。

我要解析的页面有许多 productId，它们以以下格式显示

```
\"productId\":\"111111\" 
```

`111111`在这种情况下，我需要提取所有值。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-11T20:54:09.787

```
t = "\"productId\":\"111111\""
m = re.match("\W*productId[^:]*:\D*(\d+)", t)
if m:
    print m.group(1) 
```

意思是匹配非单词字符 ( `\W*`)，然后`productId`是非列字符 ( `[^:]*`) 和 a `:`。然后匹配非数字 ( `\D*`) 并匹配并捕获后面的数字 ( `(\d+)`)。

**输出**

```
111111 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-04-11T20:40:27.323

像这样的东西：

```
In [13]: s=r'\"productId\":\"111111\"'

In [14]: print s
\"productId\":\"111111\"

In [15]: import re

In [16]: re.findall(r'\d+', s)
Out[16]: ['111111'] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-11T20:43:15.093

这里的反斜杠可能会增加混淆，因为它们被（非原始）Python 字符串和正则表达式语法用作转义字符。

这将从您发布的格式中提取产品 ID：

```
re_prodId = re.compile(r'\\"productId\\":\\"([^"]+)\\"') 
```

原始字符串`r'...'`取消了一级反斜杠转义；使用单引号作为字符串分隔符无需转义双引号；最后，由于它们在正则表达式语言中的特殊含义，反斜杠被加倍（仅一次）。

您可以使用 regexp 对象的`findall()`方法来查找某些文本中的所有匹配项：

```
re_prodId.findall(text_to_search) 
```

这将返回所有产品 ID 的列表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T20:40:09.850

尝试这个，

```
 :\\"(\d*)\\" 
```

如果这不能满足您的要求，请提供更多数据示例。

# javascript - PhantomJS 网页内存消耗？

> ID：15958395
> 
> 赞同：2
> 
> 时间：2013-04-11T20:36:20.337
> 
> 标签：javascript, memory, phantomjs, qtwebkit, casperjs

是否有一种编程方式（因为我想在运行时自动执行）来查看网页在通过 PhantomJs 运行时使用了多少内存？

如果有帮助的话，我也在使用 casperjs。我搜索了很多，但没有找到任何方法。PhantomJs 使用 QtWebKit，所以我无法访问 window.performance.memory。

因为我正在为 Web 应用程序设置自动性能测试，所以我想获得这些信息。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-17T20:58:09.357

不，目前不支持此功能，但我发现有关此问题[https://github.com/ariya/phantomjs/issues/10031](https://github.com/ariya/phantomjs/issues/10031)

# windows-installer - 为什么在我使用 /qn 时将 /exenoupdates 放在命令行中？

> ID：15958396
> 
> 赞同：0
> 
> 时间：2013-04-11T20:36:21.250
> 
> 标签：windows-installer, advanced-installer

[高级安装程序](http://www.advancedinstaller.com)引导程序通过了 /qn 并且 EXE_CMD_LINE 变成了这样：

EXE_CMD_LINE=/exenoupdates /exelang 0 /noprereqs /quiet /l*vc:\test2.txt

是什么赋予了？/exenoupdates 有逆向吗？这真的阻碍了这个项目。

阿杰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T07:39:25.947

引导程序在已经检查是否有新版本的 MSI 可用后将其添加到命令行中，以防触发重新启动，以避免重新启动后再次进行相同的搜索。

# usb - 了解与 LUFA 库相关的 USB 描述符

> ID：15958401
> 
> 赞同：1
> 
> 时间：2013-04-11T20:36:30.063
> 
> 标签：usb, avr, uart, atmel, usb-descriptor

有人可以解释一下 LUFA 库如何处理 USB 描述符吗？我似乎无法追踪返回给库源的任何示例中的描述符。它们是如何工作的？它们是否被编程到给定位置的闪存中？

谢谢，乔治

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:23:20.803

描述符`struct`在 LUFA 库中定义。你发现他们在

*   `/drivers/USB/Core/StdDescriptors.h`

通过“主包含文件”包含`/Drivers/USB/USB.h`

`struct`用户应用程序利用这些

请查阅[LUFA 库文档](http://fourwalledcubicle.com/files/LUFA/Doc/130303/html/index.html)并在搜索框中查找“描述符”或展开文件列表子树。这将指导您了解定义的内容和位置。还要查找主要的 USB 功能`void USB_USBTask(void)`。

关于基础知识的另一个好资源是[this](http://www.avrbeginners.net/new/wp-content/uploads/2011/10/avrbeginners_40_USB_Control_Transfers_with_LUFA_1.1.pdf)。

# c# - How to prevent NHibernate long-running process from locking up web site?

> ID：15958407
> 
> 赞同：1
> 
> 时间：2013-04-11T20:36:47.980
> 
> 标签：c#, asp.net-mvc, nhibernate, concurrency

I have an NHibernate MVC application that is using ReadCommitted Isolation.

On the site, there is a certain process that the user could initiate, and depending on the input, may take several minutes. This is because the session is per request and is open that entire time.

But while that runs, no other user can access the site (they can try, but their request won't go through unless the long-running thing is finished)

What's more, I also have a need to have a console app that also performs this long running function while connecting to the same database. It is causing the same issue.

I'm not sure what part of my setup is wrong, any feedback would be appreciated.

NHibernate is set up with fluent configuration and StructureMap.

*   Isolation level is set as ReadCommitted.
*   The session factory lifecycle is HybridLifeCycle (which on the web should be Session per request, but on the win console app would be ThreadLocal)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-08T04:58:04.343

It sounds like your requests are waiting on database locks. Your options are really:

1.  Break the long running process into a series of smaller transactions.
2.  Use ReadUncommitted isolation level most of the time (this is appropriate in a lot of use cases).
3.  Judicious use of Snapshot isolation level (Assuming you're using MS-SQL 2005 or later).

(N.B. I'm assuming the long-running function does a lot of reads/writes and the requests being blocked are primarily doing reads.)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-13T16:33:16.513

As has been suggested, breaking your process down into multiple smaller transactions will probably be the solution.

I would suggest looking at something like [Rhino Service Bus](http://www.hibernatingrhinos.com/oss/rhino-service-bus) or NServiceBus (my preference is Rhino Service Bus - I find it much simpler to work with personally). What that allows you to do is separate the functionality down into small chunks, but maintain the transactional nature. Essentially with a service bus, you send a message to initiate a piece of work, the piece of work will be enlisted in a distributed transaction along with receiving the message, so if something goes wrong, the message will not just disappear, leaving your system in a potentially inconsistent state.

Depending on what you need to do, you could send an initial message to start the processing, and then after each step, send a new message to initiate the next step. This can really help to break down the transactions into much smaller pieces of work (and simplify the code). The two service buses I mentioned (there is also Mass Transit), also have things like retries built in, and error handling, so that if something goes wrong, the message ends up in an error queue and you can investigate what went wrong, hopefully fix it, and reprocess the message, thus ensuring your system remains consistent.

Of course whether this is necessary depends on the requirements of your system :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-13T13:05:36.937

Another, but more complex solution would be:

You build a background robot application which runs on one of the machines

*   this background worker robot can be receive "worker jobs" (the one initiated by the user)
*   then, the robot processes the jobs step & step in the background

Pitfalls are: - you have to programm this robot very stable - you need to watch the robot somehow

Sure, this is involves more work - on the flip side you will have the option to integrate more job-types, enabling your system to process different things in the background.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-13T13:58:34.847

I think the design of your application /SQL statements has a problem , unless you are facebook I dont think any process it should take all this time , it is better to review your design and check where is the bottleneck are, instead of trying to make this long running process continue .

also some times ORM is not good for every scenario , did you try to use SP ?

# objective-c - componentsSeparatedByString 省略由分隔符包围的子字符串？

> ID：15958410
> 
> 赞同：0
> 
> 时间：2013-04-11T20:36:57.430
> 
> 标签：objective-c, macos

我正在尝试在 componentsSeparatedByString 的帮助下划分由“-”分隔的输入

```
NSString *idInput = @"1-S2-1-8214685" //Actually input of a memory-rading operation

NSMutableArray *idBuf = [NSMutableArray arrayWithArray:[idInput componentsSeparatedByString:@"-"]]; 
```

但是，这似乎省略了第一个子字符串以及第三个子字符串，因为 idBuf 之后包含以下内容：

```
idBuf = {@"",@"S2",@"",@"8214685"} 
```

如何获取两个丢失的子字符串？

整体功能：

```
+ (id) buildPlayerwithIdBuffer: (char*)idBuffer andPlayerName: (char*)playerName
{

NSString *idInput = [NSString stringWithUTF8String:idBuffer];
NSString *playerN = [NSString stringWithUTF8String:playerName];
NSString *uniqueServerId;

SFPlayer *resPlayer = [[self alloc]initWithPlayerName:playerN];

    NSMutableArray *idBuf = [NSMutableArray arrayWithArray:[idInput componentsSeparatedByString:@"-"]];
    //[idBuf removeObjectAtIndex:1];

    switch ([[idBuf objectAtIndex:0]characterAtIndex:0]) {
        case '1':
            [idBuf replaceObjectAtIndex:0 withObject:@"us"];
            break;
        case '2':
            [idBuf replaceObjectAtIndex:0 withObject:@"eu"];
            break;
        case '3':
            [idBuf replaceObjectAtIndex:0 withObject:@"kr"];
            break;
        case '6':
            [idBuf replaceObjectAtIndex:0 withObject:@"sg"];
            break;
        default:
            break;
    }

    uniqueServerId = [[idBuf objectAtIndex:2] stringByAppendingString:[idBuf lastObject]];

    [resPlayer setServer:[idBuf objectAtIndex:0]];
    [resPlayer setIdentifier:uniqueServerId];

return resPlayer;

} 
```

编辑：我刚刚再次检查，idBuf[0] 和 idBuf[3] 包含相同的值，显示为 C 字符串是：

```
"@\xfffffffa\xfffffffb}\xffffffff\x7f" 
```

# mysql - 如何阻止c3p0连接池隐藏连接异常的原因？

> ID：15958413
> 
> 赞同：4
> 
> 时间：2013-04-11T20:37:12.107
> 
> 标签：mysql, c3p0

我有一个使用 c3p0 进行连接池的应用程序。当连接到数据库出现任何问题时，我会收到如下异常：

```
java.sql.SQLException: An SQLException was provoked by the following failure: 
  com.mchange.v2.resourcepool.ResourcePoolException: A ResourcePool cannot acquire 
  a new resource -- the factory or source appears to be down.
    at com.mchange.v2.sql.SqlUtils.toSQLException(SqlUtils.java:106)
    at com.mchange.v2.sql.SqlUtils.toSQLException(SqlUtils.java:65)
    at com.mchange.v2.sql.SqlUtils.toSQLException(SqlUtils.java:62)
    at com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool.checkoutPooledConnection(C3P0PooledConnectionPool.java:531)
    at com.mchange.v2.c3p0.impl.AbstractPoolBackedDataSource.getConnection(AbstractPoolBackedDataSource.java:128)
    at com.pontiflex.monitor.dao.ConnectionManager.getConfigReadOnlyDbConnection(Unknown Source)
    at com.pontiflex.monitor.dao.MonitorServiceDAO.getLiveIOCountForOrganization(Unknown Source)        at com.pontiflex.monitor.BillingMonitor.getComparisonValueForActivation(Unknown Source)
    at com.pontiflex.monitor.AbstractMonitor.isMonitoringActive(Unknown Source)
    at com.pontiflex.monitor.AbstractMonitor.generateAlerts(Unknown Source)
    at com.pontiflex.monitor.AbstractMonitor.doMonitoring(Unknown Source)
    at com.pontiflex.monitor.worker.MonitorWorker.run(Unknown Source)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:439)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:895)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:918)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:895)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:918)
    at java.lang.Thread.run(Thread.java:662)
Caused by: com.mchange.v2.resourcepool.ResourcePoolException: A ResourcePool cannot 
 acquire a new resource -- the factory or source appears to be down.
    at com.mchange.v2.resourcepool.BasicResourcePool.awaitAvailable(BasicResourcePool.java:1279)
    at com.mchange.v2.resourcepool.BasicResourcePool.prelimCheckoutResource(BasicResourcePool.java:557)
    at com.mchange.v2.resourcepool.BasicResourcePool.checkoutResource(BasicResourcePool.java:477)
    at com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool.checkoutPooledConnection(C3P0PooledConnectionPool.java:525)
    ... 14 more 
```

无论问题是网络连接问题、服务器问题（连接太多）还是配置问题，都会发生同样的异常。如果我为 mysql jdbc 驱动程序和 c3p0 打开调试日志记录，我会得到更多信息：

```
WARN  com.mchange.v2.resourcepool.BasicResourcePool  
 com.mchange.v2.resourcepool.BasicResourcePool$AcquireTask@4e074784 -- 
 Acquisition Attempt Failed!!! Clearing pending acquires. While trying 
 to acquire a needed new resource, we failed to succeed more than the 
 maximum number of allowed acquisition attempts (30). Last acquisition 
 attempt exception: 
 com.mysql.jdbc.exceptions.MySQLNonTransientConnectionException: Data 
 source rejected establishment of connection,  message from server: 
 "Too many connections"
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:921)
    at com.mysql.jdbc.MysqlIO.doHandshake(MysqlIO.java:1070)
    at com.mysql.jdbc.Connection.createNewIO(Connection.java:2775)
    at com.mysql.jdbc.Connection.<init>(Connection.java:1555)
    at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:285)
    at com.mchange.v2.c3p0.DriverManagerDataSource.getConnection(DriverManagerDataSource.java:135)
    at com.mchange.v2.c3p0.WrapperConnectionPoolDataSource.getPooledConnection(WrapperConnectionPoolDataSource.java:182)
    at com.mchange.v2.c3p0.WrapperConnectionPoolDataSource.getPooledConnection(WrapperConnectionPoolDataSource.java:171)
    at com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool$1PooledConnectionResourcePoolManager.acquireResource(C3P0PooledConnectionPool.java:137)
    at com.mchange.v2.resourcepool.BasicResourcePool.doAcquire(BasicResourcePool.java:1014)
    at com.mchange.v2.resourcepool.BasicResourcePool.access$800(BasicResourcePool.java:32)
    at com.mchange.v2.resourcepool.BasicResourcePool$AcquireTask.run(BasicResourcePool.java:1810)
    at com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread.run(ThreadPoolAsynchronousRunner.java:547) 
```

当 c3p0 在不调整记录器配置的情况下抛出 ResourcePoolException 时，我能做些什么来让我给出根本原因？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T05:46:15.393

SQLException is the (checked) Exception that JDBC apis are permitted to throw, so c3p0 must "wrap" underlying Exceptions that ate not SQLExceptions in the usual way. Calling getCause() on these Exceptions will deliver the original Throwable if you want to check for something specific.

In the particular example you cite, something different is going on. The issue is that the Thread which is logging the Exception is not your client Thread. c3p0-internal Threads acquire Connections from the database. Your client Threads acquire Connections from the pool. The two activities are as uncoupled as c3p0 can manage -- that is the whole point of having a Connection pool. First, internal Threads perform a "round" of acquisition attempts (by default 30 attempts with a 1 sec delay between, but you can reconfigure if you want).

If ALL of the attempts to acquire a Connection fail, the c3p0 internal threads...

1) Log the failure, and the last Exception seen while trying. This is the second Exception you quote. Note that this is logged at WARNING, not a DEBUG level. If you have c3p0 logging at INFO -- which you should -- you'll see these messages. [If you want to see each individual Exception, all 30 of the Exceptions that must occur (under defailts) before declaring a failure, you need to turn logging to DEBUG (or FINE or ALL).]

2) After logging that an acquisition series has failed, c3p0 will interrupt wait()ing clients and signal a ResourcePoolException, which becomes gets in an SQLException. This is the first Exception you quote. A ResourcePoolException is signalled.

3) if [breakAfterAcquireFailure](http://www.mchange.com/projects/c3p0/#breakAfterAcquireFailure) is set to false (the default), the pool will recover from an acquisition failure. It will try again to acquire new Connections as new clients come in.. If breakAfterAcquireFailure is set to true, however, the pool will always respond to new client requests with an Exception.

Anyway, I hope this isn't entirely unhelpful. c3p0 could define a custom Exception type that would become the cause of the wrapped Exception delivered to clients, so clients could test for an acquisition failure in code, but for now at least it does not. (Sorry!)

# c - C中的滚动菜单

> ID：15958414
> 
> 赞同：0
> 
> 时间：2013-04-11T20:37:13.337
> 
> 标签：c, menu, scroll, key, selection

如何创建具有这样滚动选择的菜单： ![在此处输入图像描述](https://i.stack.imgur.com/O7Wv0.png)

我用谷歌搜索，但找不到任何东西。

我的想法是创建一个带有向上和向下键的选择菜单来选择选项，但我不知道该怎么做，或者是否可以在 C 中做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T20:39:49.857

我建议你使用[ncurses](http://www.gnu.org/software/ncurses/ncurses.html) ( [screenshot](http://en.wikipedia.org/wiki/File%3aLinux-menuconfig.png) )。

有关教程，请查看此[HOW-TO](http://tldp.org/HOWTO/NCURSES-Programming-HOWTO/)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-11T20:43:46.950

由于您似乎在 Windows 上，因此您的选择是：

*   [课程](http://pdcurses.sourceforge.net/)
*   `ncurses`在[cygwin下](http://www.cygwin.com)

# php - 在使用带有 dnsmasq 的动态虚拟主机时，修复 phpmyadmin open_basedir 限制生效

> ID：15958419
> 
> 赞同：1
> 
> 时间：2013-04-11T20:37:43.857
> 
> 标签：php, apache, ubuntu, phpmyadmin, vhosts

感谢 dnsmasq，我在 ~/server-dev/hosts/% 上运行带有 apache 和虚拟主机的 Kubuntu。这一次希望我能找到一种留在 Linux 中的方法。但是，我安装了 phpmyadmin 并尝试导入一个 sql 文件，但它返回：

```
Warning: Unknown: open_basedir restriction in effect. 
File(/tmp) is not within the allowed path(s): 
(/usr/share/phpmyadmin/:/etc/phpmyadmin/:/var/lib/phpmyadmin/) in Unknown on line 0

Warning: File upload error - unable to create a temporary file in Unknown on line 0 
```

我已经在这里和互联网上搜索过，但我不足以确定原因。将不胜感激任何帮助，以保持我完好无损。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T20:44:35.140

如果您阅读错误消息，您可以看到您上传文件的路径不是允许的路径。

将[上传路径](http://php.net/upload_tmp_dir)添加到[允许的路径](http://php.net/open_basedir)，你应该没问题。更改 php.ini 配置后，不要忘记重新启动 webserver / fcgi 处理程序。

# android - 在文本视图和线程睡眠时间中打印整数值

> ID：15958423
> 
> 赞同：-3
> 
> 时间：2013-04-11T20:38:13.607
> 
> 标签：android

如何在 textview 中打印整数值，以及当我增加线程中的睡眠时间时，它在 android 中无法正常工作。

```
package com.example.chaljayar;   
import java.util.concurrent.Delayed;
import android.os.Bundle;   
import android.app.Activity;   
import android.view.Menu;  
import android.widget.TextView;

public class MainActivity extends Activity implements Runnable 

   {

       TextView Tv;
       int num = 0, i = 0;
       String con = "";

@Override
protected void onCreate(Bundle savedInstanceState)
  {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Tv = (TextView)findViewById(R.id.Text);
    Thread test = new Thread(this);
    test.start();
}
    @Override
    public void run() 
    {
        // TODO Auto-generated method stub
        while(i <= 100)
        {
            try{            
                    con += Integer.toString(i);
                    Tv.setText(con);
                    Thread.sleep(1000);
            } catch (Exception e)
            {
                // TODO: handle exception
                e.printStackTrace();
            }
            i++;
        }
    } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T20:50:52.647

单独尝试这个 To Thread 和另一个 (try/catch) ：

```
 try {
        Thread.sleep(1000);
    } catch (InterruptedException e) {

        e.printStackTrace();
    } 
```

如果您想在 textview 中打印 int 值，请显示此链接：

[TextView 中的整数值](https://stackoverflow.com/questions/3994315/integer-value-in-textview)

# java - 如何检查点是否在多边形内

> ID：15958434
> 
> 赞同：5
> 
> 时间：2013-04-11T20:38:46.140
> 
> 标签：java, location, entity, coordinates

我有一个`Polygon`：

![图片](https://i.imgur.com/AED0s2j.png)

我想检查实体的位置是否在 this`Polygon`中。
例如 x:5 和 y:5，我如何检查这个坐标是否在这个多边形（Java）内？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-11T20:43:42.703

如果您使用`Polygon`java 中包含的类创建多边形，请使用该`contains()`方法。

[http://docs.oracle.com/javase/6/docs/api/java/awt/Polygon.html](http://docs.oracle.com/javase/6/docs/api/java/awt/Polygon.html)

看一下方法总结：

`contains(int x, int y)`- 判断指定的坐标是否在这个内部`Polygon`

# html - 数字后的 HTML 列表文本缩进

> ID：15958435
> 
> 赞同：0
> 
> 时间：2013-04-11T20:38:46.970
> 
> 标签：html, css

如何增加有序列表中数字和文本之间的边距？

IE

```
<ol>
  <li>text 1</li>
  <li>text 2</li>
  <li>text 3</li>
</ol> 
```

生产

1.  文本1
2.  文本 2
3.  文字 3

而且我要

1.  __ 文本1
2.  __ 文本 2
3.  __ 文本 3

其中 __ 是任意缩进。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T20:40:39.537

```
<ol>
<li><span class="indent">text 1</span></li>
<li><span class="indent">text 2</span></li>
<li><span class="indent">text 3</span></li>
</ol>
<style="text/css">
ol li .indent{padding-left:20px;}
</style> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T20:46:18.753

[在这里](https://stackoverflow.com/questions/12635598/indent-text-in-ordered-list?rq=1)找到了答案

我修改了[小提琴](http://jsfiddle.net/geZf5/)来满足我的需要。

```
ol {
    counter-reset: item;
    margin-left: 0;
    padding-left: 0;
}
li {
    display: block;
    margin-bottom: .5em;
    margin-left: 2em;
}

li:before {
    display: inline-block;
    content: counter(item) ".";
    counter-increment: item;
    width: 2em;
    margin-left: -2em;
} 
```

# html - 将标题图像移动到右侧

> ID：15958436
> 
> 赞同：0
> 
> 时间：2013-04-11T20:39:00.343
> 
> 标签：html, css, css-float

好的，伙计们，我在这里使用 HTML 和 CSS，我正在尝试将我在标题中的徽标放在右侧，但是当我**浮动时：对；**蓝色背景不会留下。知道我做错了什么吗？

HTML

```
<header id="header">
<img id="logo" src="images/logo.png" alt="logo.png" title="Mystery"/>
</header> 
```

CSS

```
#header {
background-color: #9CF; }
#logo {
float:right;} 
```

![图片](https://i.stack.imgur.com/Vq0LJ.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T20:40:34.560

尝试

```
#header { text-align: right} 
```

从 img 中删除浮动。

或者，您可以轻松地向标题添加高度以解决浮动问题：

```
#header {background-color: #9CF; height: 100px} /* example height */
#logo {float:right;} 
```

演示：http: [//jsfiddle.net/lucuma/y2pX6/1/](http://jsfiddle.net/lucuma/y2pX6/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T20:40:33.433

你可以穿上或`overflow:hidden`做`#header`一个 clearfix hack。

Nicholas Gallagher 的微型清除修复：

```
.cf:before,
.cf:after {
    content: " ";
    display: table;
}

.cf:after {
    clear: both;
}

/**
 * For IE 6/7 only
 * Include this rule to trigger hasLayout and contain floats.
 */
cf {
    *zoom: 1;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T20:43:46.947

只需添加：

```
#logo {
    float:right;
    /*This is important as inline elements like img are inmune to float*/
    display: block;
} 
```

如果这对您的布局造成任何问题，您也可以尝试：

```
#header {
    background-color: #9CF;
    /*Part of a classic layout hack*/
    overflow:hidden;
} 
```

# html - 当表格比其容器宽时，我如何让 TD 不忽略它的宽度？

> ID：15958439
> 
> 赞同：2
> 
> 时间：2013-04-11T20:39:01.500
> 
> 标签：html, css

当表格比其容器宽时，我如何让 TD 不忽略它的宽度？这需要在 IE7+ Chrome 和 FF 中工作。我目前在所有浏览器中都有问题。

见：http: [//jsfiddle.net/jzaun/CJtUf/](http://jsfiddle.net/jzaun/CJtUf/)

HTML 是：

```
 <table>
    <tr>
      <td>test</td>
      <td>test</td>
      ... Lots mote TDs ...
    </tr>
  </table> 
```

CSS是：

```
table td { 
    border: 1px solid black; 
    width: 100px;
} 
```

![问题](https://i.stack.imgur.com/C78dI.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-27T10:16:28.347

我知道你问了有一段时间了，但这应该对你有用。我过去对 IE7 使用了类似的修复程序，所以我确信这可以解决问题。恐怕我没有IE7可以测试，IE10中的兼容模式不会加载jsFiddle。

```
table td { 
border: 1px solid black; 
min-width: 100px;
width:auto !important;
width:100%;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T20:49:08.197

设置`min-width`：

它似乎在小提琴中工作：http: [//jsfiddle.net/CJtUf/2/](http://jsfiddle.net/CJtUf/2/)

结合使用它，`max-width`你可以有一个固定的宽度

小提琴：http: [//jsfiddle.net/CJtUf/3/](http://jsfiddle.net/CJtUf/3/)

# javascript - 复制到 IE 的剪贴板几乎可以工作？

> ID：15958441
> 
> 赞同：9
> 
> 时间：2013-04-11T20:39:06.080
> 
> 标签：javascript, html, forms

尝试将此脚本复制到剪贴板而不是返回页面。当您单击链接时，它应该复制到剪贴板。至少这是我的意图。以下是其背后的一些背景事实：

*   这适用于专门使用 IE 的公司 Intranet 站点，因此它不需要与任何其他浏览器兼容
*   里面的数据是/将是从数据库查询返回
*   我意识到这是旧技术，但现在需要这样。

    ```
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
            <title></title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <script type="text/javascript"><!--
    // input field descriptions
    var desc = new Array();
            desc['a1'] = 'First name';
    desc['a2'] = 'Last name';
    desc['a3'] = 'Address';
    desc['a4'] = 'Zip';
    desc['a5'] = 'City';
    desc['a6'] = 'Country';

    function CopyFields(){
        var copytext = '';
        for(var i = 0; i < arguments.length; i++){
            copytext += desc[arguments[i]] + ': ' + document.getElementById(arguments[i]).innerText + '\n';}
        var tempstore = document.getElementById(arguments[0]).innerText;
                document.getElementById(arguments[0]).innerText = copytext;
        document.getElementById(arguments[0]).focus();
        document.getElementById(arguments[0]).select();
        document.execCommand('Copy');
        document.getElementById(arguments[0]).innerText = tempstore;
    }
    </script>
    </head>
    <body>

    <table>
    <tr>
    <td id="a1" name="t1">a</td>
    <td id="a2" name="t2">b</td>
    <td id="a3" name="t3">c</td>
    <td id="a4" name="t4">d</td>
    <td id="a5" name="t5">e</td>
    <td id="a6" name="t6">f</td>
    </tr>
    </table><br>
    <a href="#" onClick="CopyFields('a1', 'a2', 'a3', 'a4', 'a5', 'a6');">Copy values of text fields to clipboard</a>
    </body> 

    </html> 
    ```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-11T21:03:09.677

-elements没有`select()`-method `td`。

您可以不使用复制命令直接访问剪贴板：

```
window.clipboardData.setData('Text', copytext); 
```

# time-complexity - 我如何找到以 N 为单位执行 x=x+1 的次数？

> ID：15958442
> 
> 赞同：-1
> 
> 时间：2013-04-11T20:39:18.570
> 
> 标签：time-complexity, discrete-mathematics

我也很难找到合适的 omega() 和 theta()

```
 x=0;
    for k=1 to n
     for j=1 to n-k
      X=X+1; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T20:44:59.573

内部循环是 n-1 + n-2 + n-3 ... + 1 + 0。使用[本教程](http://www.purplemath.com/modules/series4.htm)计算算术级数的总和以找到解决方案。外部循环显然只是“n”。

这将是大θ。当您取消除第一项之外的所有内容并移除乘数时，大哦将与大θ相同，例如 Theta(2*log(n) + 5) 变为 O(log(n))。Omega 在这种情况下与 big-Oh 相同，因为最好的情况和最坏的情况是相同的；或者你可以欺骗说大欧米茄是常数时间，因为每个函数的大欧米茄都是常数时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T20:49:26.157

首先，看看你的界限。k=1 和 k=n。

对于 k=1，内部循环执行 (n-1) 次。对于 k=n，内部循环执行 (0) 次。

因此，0 + 1 + ... + (n-1) 是算术和 => (n-1)(n)/2 次。

现在，在几个小值上测试它:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T20:43:14.707

答案是这样的：n-1 + n -2 + n -3 + ... = n*n - (1+2+3+ ... + n) = n^2 - n(n-1) /2

# git - SourceTree App 表示即使对于新克隆的存储库也未提交更改 - 可能有什么问题？

> ID：15958446
> 
> 赞同：40
> 
> 时间：2013-04-11T20:39:28.233
> 
> 标签：git, end-of-line, atlassian-sourcetree

[使用Atlassian SourceTree](http://www.atlassian.com/software/sourcetree/overview)**将**远程 git 存储库克隆到本地框。即使工作树中没有真正修改过文件，Atlassian 也会立即在“未提交的更改”下列出一堆文件。每个文件在删除和添加时都显示相同的行数，并且此计数等于文件中的总行数。这会以某种方式暗示我们遇到了某种行尾问题。

但是，存储库`.gitattribute`包含

```
# Set default behaviour, in case users don't have core.autocrlf set.
* text=auto 
```

根据 GitHub 文章[处理行尾](https://help.github.com/articles/dealing-with-line-endings)应该明确地`core.autocrlf`适用于存储库。不过也`~/.gitconfig`包含`autocrlf = true`。

如果尝试将修改后的文件“还原”回之前的提交，则没有效果。相同的文件仍被视为未提交。

存储库已被克隆到多个位置，并确保没有文件位于同一路径中，以确保 SourceTree 或 git 不会记住旧文件。

该存储库与 Windows、Linux 和 OSX 机器协作。此问题仅出现在 OSX 中。

SourceTree/repository/git 设置中还有什么问题？

* * *

更新 #1，2013 年 4 月 20 日

由于仍有问题，这里是部分输出`git config --list`。

从 SourceTree 控制台 (OSX)

```
core.excludesfile=/Users/User/.gitignore_global
core.autocrlf=input
difftool.sourcetree.cmd=opendiff "$LOCAL" "$REMOTE"
difftool.sourcetree.path=
mergetool.sourcetree.cmd=/Applications/SourceTree.app/Contents/Resources/opendiff-w.sh "$LOCAL" "$REMOTE" -ancestor "$BASE" -merge "$MERGED"
mergetool.sourcetree.trustexitcode=true
core.repositoryformatversion=0
core.filemode=true
core.bare=false
core.logallrefupdates=true
core.ignorecase=true
core.autocrlf=true 
```

以下是 Windows 端的相应输出：

```
core.symlinks=false
core.autocrlf=false
color.diff=auto
color.status=auto
color.branch=auto
color.interactive=true
pack.packsizelimit=2g
help.format=html
http.sslcainfo=/bin/curl-ca-bundle.crt
sendemail.smtpserver=/bin/msmtp.exe
diff.astextplain.textconv=astextplain
rebase.autosquash=true
http.proxy=
core.autocrlf=true
core.repositoryformatversion=0
core.filemode=false
core.bare=false
core.logallrefupdates=true
core.symlinks=false
core.ignorecase=true
core.hidedotfiles=dotGitOnly
core.eol=native
core.autocrlf=true 
```

并且完整`.gitattributes`的有问题的存储库

```
# Set default behaviour, in case users don't have core.autocrlf set.
* text=auto

*.php    text
*.twig   text
*.js     text
*.html   text diff=html
*.css    text
*.xml    text
*.txt    text
*.sh     text eol=lf
console  text

*.png    binary
*.jpg    binary
*.gif    binary
*.ico    binary
*.xslx   binary 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-04-12T08:59:48.637

我是 SourceTree 开发人员之一（实际上我开发的是 Mac 版本的产品），所以希望我能提供一些帮助。

Windows 机器在提交时将 CRLF 转换为 LF，在签出时将 LF 转换为 CRLF。`autocrlf`确保存储库中的所有内容都是 LF。[正如文档中所说，](https://www.kernel.org/pub/software/scm/git/docs/gitattributes.html)该选项`text = auto`是我们感兴趣的选项：

> 当文本设置为“自动”时，路径被标记为自动行尾标准化。如果 git 确定内容是文本，则在签入时将其行尾规范化为 LF。

所以你在签入时会看到它会说“嘿，我需要标准化这些行尾，因为它们不是 LF 格式，而是 CRLF。” 从而修改您的工作副本以完成预期的工作。通常在 Mac/Linux 上，您不需要规范化，因为一切都在 LF 中，但 Git 会进行检查，因为您可能已经从以前在 Windows 上开发的存储库中签出，或者可能在使用 CRLF 的编辑器中签出而不是LF。

所以简而言之，您可能希望重新提交所有这些文件，因为它们应该是 LF 格式，但还要确保`autocrlf = true`（编辑，始终为真！）在您的 Windows 存储库中，如文档中所述：

> 如果您只想在工作目录中使用 CRLF 行结尾而不管您正在使用的存储库，您可以设置配置变量“core.autocrlf”而不更改任何属性。

尽管想象先前的报价是在`autocrlf`为特定存储库以及全局设置时。

希望对您有所帮助，如果没有，请随时提出更多问题！

* * *

这是一个很好的 SO 帖子回复：行尾：[为什么我应该在 Git 中使用 core.autocrlf=true？](https://stackoverflow.com/questions/2825428/why-should-i-use-core-autocrlf-true-in-git)

* * *

**编辑**

基于上面的答案，我们需要在这里确定一些事情。

*   你已经在你的`.git/config`
*   如果要保留 CRLF 行尾，请设置`autocrlf=true`
*   如果在签出存储库时，您不希望自动转换行尾（导致所有文件立即处于“修改”状态），则将`text`选项设置为`unset`. 如果全局 git 配置已将其设置为您不想要的值，请添加此选项。
*   如果您正在为一个项目同时使用 Windows 和 Mac，那么最好拥有`text=auto`并确保全面使用 LF。这就是为什么会出现这样的问题的原因；因为您的 git 配置不同，或者因为当您的 Mac 采用 LF 时，Windows 上的初始项目/git 设置采用 CRLF。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-01-23T18:33:50.397

我仍然不能 100% 理解它，但对我们来说，问题在于存储库`* text=auto`中的`.gitattribute`文件。我检查了，我们肯定已经`core.autocrlf=true`在 Windows PC 上为我的用户设置的每个地方设置了它。我知道这也不是 SourceTree 问题，因为 TortoiseGit 和 Windows Git (msysgit) 都对这个存储库有相同的“问题”。非常奇怪的行为 - 我会克隆一次回购并立即看到 11 个“不同”文件，然后我会删除并重新开始，下一个克隆将有 14 个“不同”文件。

注释掉存储库文件中的所有内容`* text=auto`。如果在文件中设置了第一个，则它的行为`.gitattribute`几乎与后者不同。但这并不是每个在线指南似乎都表明的。`text=auto``autocrlf=true``.gitattribute`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-30T03:08:39.183

我将以下两行添加到配置文件中。我做的另一件事是单击“暂存文件”复选框，然后取消单击它，一切都会自行刷新。祝你好运。

```
text = auto 
autocrlf = true 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-18T20:57:37.053

刚碰到这个问题。一个新的克隆会提取几个文件，这些文件不仅未提交，而且还有很多行真正的新代码。git reflog 什么也没显示，这不是一个实际的提交，所以一个分离的 HEAD 是不可能的。

经过大约一个小时的调查，我们找到了原因。我们的一位 *nix 开发人员很可能错误地将文件添加到与预期名称相同但大小写不同的文件夹中。*nix 环境能够轻松处理这个新文件夹，但 Windows（由于其不区分大小写的性质）合并了这两个文件夹。

因此，例如，如果您有两个文件夹 test 和 Test，每个文件夹里面都有一个 file.txt 并且这两个 file.txt 文件不相同，那么 Windows 实际上会复制/替换其中一个（不确定它的顺序克隆文件夹）因此“更改”文件并在全新安装后直接在“Test/file.txt”上创建未提交的更改。

例子：

```
test/
--file.txt (with contents of "This is a commit")

Test/
--file.txt (with contents of "This is a commit with some changes") 
```

这将始终显示新的未提交更改，包括在 Windows 机器上克隆时向 Test/file.txt 添加单词“with some changes”，而基于 *nix 的机器不会有问题。

这不一定解决OP的问题，但与标题中的问题直接相关。希望这可以帮助那里的人。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-15T14:28:54.413

通常这一行在`.gitattribute`：

```
* text=auto 
```

自动确保 Git 认为是文本的所有文件都将在存储库中具有规范化 (LF) 行结尾，即使`git config core.autocrlf`设置为`false`（默认）也是如此。因此 Git 会根据这些规则自动更改文件。

所以你有以下可能性：

*   假设规范化更改是正确的（就它们对文本文件所做的而言）并简单地提交它们，例如

    ```
    $ git diff
    $ git commit -m "Introduce end-of-line normalization" -a 
    ```

*   从文件中删除/禁用自动规范化`.gitattribute`并重置文件，

*   删除索引并重新扫描文件，例如

    ```
    $ rm -v .git/index # Or: git rm --cached -r .
    $ git reset --hard # Rewrite the Git index. Or: git add -u 
    ```

*   或者，无论您做什么，都尝试使用 force ( `-f`)，例如`git pull origin -f`,`git checkout master -f`等，

*   改用`git`命令行，因为它可能是 SourceTree App 本身的问题。

请参阅：在 GitHub 文档中[处理行尾。](https://help.github.com/articles/dealing-with-line-endings/)

# emacs - 仅适用于 GUI/终端 emacs 的设置

> ID：15958448
> 
> 赞同：6
> 
> 时间：2013-04-11T20:39:31.280
> 
> 标签：emacs, elisp

我正在尝试设置一个主题 - 一个仅用于终端，一个仅用于 gui。我读过这个帖子：[Run certain Emacs init commands only in GUI mode](https://stackoverflow.com/questions/3291136/run-certain-emacs-init-commands-only-in-gui-mode)

这导致我来到这里：[https ://superuser.com/questions/165335/how-can-i-show-the-emacs-menu-in-gui-emacs-frames-but-not-in-tty-frames-when -usi](https://superuser.com/questions/165335/how-can-i-show-the-emacs-menu-in-gui-emacs-frames-but-not-in-tty-frames-when-usi)

并尝试创建一个适合我需要的功能。

```
(defun set-frame-theme (frame)
  (let ((want-theme (memq (framep frame) '(x w32 ns))))
    (set-frame-parameter frame '(load-theme '(if want-theme monokai solarized-dark) t))))
(add-hook 'after-make-frame-functions 'set-frame-theme) 
```

它不起作用。我正在尝试让他仅在 gui 时加载 monokai，否则加载 solarized-dark。它确实适用于 GUI 界面，但会导致终端看似崩溃。

建议？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-12T03:28:04.433

emacs lisp 函数 (display-graphic-p) 如果 emacs 在 GUI 中运行，将返回 true。

在您的 .emacs 中，添加以下内容以在您的 GUI 和终端主题之间切换

```
(if (display-graphic-p)
    (load-GUI-theme)
  (load-Terminal-theme)) 
```

为了更容易配置，我有一个简单的函数叫做 is-in-terminal

```
(defun is-in-terminal()
    (not (display-graphic-p))) 
```

你可以用它来写一个更容易阅读的函数

```
(if (is-in-terminal)
    (load-Terminal-theme)
  (load-GUI-theme)) 
```

对于仅终端配置的更完整方法，我有一个宏，它的工作方式与 Emacs 在没有 GUI 的情况下运行时一样`progn`但仅评估主体

```
(defmacro when-term (&rest body)
  "Works just like `progn' but will only evaluate expressions in VAR when Emacs is running in a terminal else just nil."
  `(when (is-in-terminal) ,@body)) 
```

示例用法：

```
(when-term
    (load-my-term-theme)
    (set-some-keybindings)
    (foo-bar)) 
```

如果在 GUI 中运行，这整个块将被完全忽略，但如果在终端中运行，则会运行。

所有这些代码都是从我的配置文件中获取的，如果有兴趣，可以在这里查看：

[https://github.com/jordonbiondo/Emacs/blob/master/Jorbi/jorbi-util.el](https://github.com/jordonbiondo/Emacs/blob/master/Jorbi/jorbi-util.el)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-08-16T06:21:53.857

我可以解决这个问题：

```
(if (display-graphic-p) (load-theme 'solarized-dark t)) 
```

最后`t`是覆盖主题选择中的确认提示。

更多[在这里](https://www.gnu.org/software/emacs/draft/manual/html_node/elisp/Custom-Themes.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T21:19:27.450

似乎是主题本身的问题 - 不多也不少。嗯。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-10T14:52:01.060

在选择颜色主题时在终端模式下运行时，我也遇到了 emacs 崩溃的问题。我想说这不是颜色主题的问题，而是emacs本身的问题。在撰写本文时，从 HEAD 更新到最新版本确实对我有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-04T17:37:15.520

如[https://www.emacswiki.org/emacs/CustomizingFaces所述](https://www.emacswiki.org/emacs/CustomizingFaces)

“如果你想为不同的显示器使用不同的配色方案，你也可以自定义它。在自定义缓冲区中，单击[状态]按钮并选择“显示所有显示器规格”。现在你可以为不同的显示器使用不同的规格。”

# html - 当用户点击返回时阻止浏览器重新加载页面

> ID：15958449
> 
> 赞同：7
> 
> 时间：2013-04-11T20:39:32.457
> 
> 标签：html, browser, reload, back-button

我似乎遇到了大多数 SO 用户的相反问题。我有一个很少更改的静态页面，我希望浏览器在用户快速导航回该页面时不要重新加载该页面。我无法找到任何简单的规则列表，详细说明浏览器在返回导航时重新加载以及何时不重新加载。

如果有区别，我的 URL 有一个查询字符串，并使用`https://`协议提供服务。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-11T20:47:34.633

您不需要知道是否使用了后退按钮。只需告诉浏览器使用缓存控制标头来缓存您的页面。您会看到很多来自 Google 的示例 - [http 缓存控制标头](https://www.google.com/#hl=en&gs_rn=8&gs_ri=psy-ab&gs_mss=http%20cache%20control%20he&tok=mTh_JwPRTIxhjT9GA3Nzww&pq=http%20cache%20control&cp=26&gs_id=bj&xhr=t&q=http+cache+control+headers&es_nrs=true&pf=p&newwindow=1&sclient=psy-ab&oq=http+cache+control+headers&gs_l=&pbx=1&bav=on.2,or.r_qf.&bvm=bv.45107431,d.eWU&fp=af0ef477335b7efa&biw=1342&bih=974)

具体来说，看看这些元标记：

```
<meta http-equiv="CACHE-CONTROL" content="..." />
<meta http-equiv="EXPIRES" content="..." /> 
```

**编辑：**

这是该 Google 搜索结果之一的链接。我认为它很好地解释了这些标题是如何工作的。 [使用 HTTP 缓存标头提高应用程序性能](https://devcenter.heroku.com/articles/increasing-application-performance-with-http-cache-headers)

使用这些标题，您可以指定缓存页面的时间；10 分钟、30 分钟、小时、天等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T12:31:51.760

您是否尝试过body 标签的**onpageshow**事件？

```
<script type="text/javascript">
    function caller()
    {
      return false;
    }
</script>
</head>

<body onpageshow="caller();">
</body> 
```

**适用于大多数情况。**

# python - Mongoengine - 使用所有图标

> ID：15958459
> 
> 赞同：1
> 
> 时间：2013-04-11T20:40:04.693
> 
> 标签：python, mongoengine

我见过[这个问题](https://stackoverflow.com/questions/11287001/how-to-combine-the-usage-of-operator-all-and-icontains-for-mongoengine)，但它没有回答我的问题，甚至没有很好地提出它。

我认为最好用一个例子来解释：

```
class Blah(Document):
    someList = ListField(StringField())

Blah.drop_collection()

Blah(someList=['lop', 'glob', 'hat']).save()
Blah(someList=['hello', 'kitty']).save()

# One of these should match the first entry
print(Blah.objects(someList__icontains__all=['Lo']).count())
print(Blah.objects(someList__all__icontains=['Lo']).count()) 
```

我认为这会打印`1, 0`or `0, 1`（或奇迹般地`1, 1`），但它给出了

```
0
Traceback (most recent call last):
  File "metst.py", line 14, in <module>
    print(Blah.objects(someList__all__icontains=['lO']).count())
  File "/home/blah/.pythonbrew/pythons/Python-3.1.4/lib/python3.1/site-packages/mongoengine/queryset.py", line 1034, in count
    return self._cursor.count(with_limit_and_skip=True)
  File "/home/blah/.pythonbrew/pythons/Python-3.1.4/lib/python3.1/site-packages/mongoengine/queryset.py", line 608, in _cursor
    self._cursor_obj = self._collection.find(self._query,
  File "/home/blah/.pythonbrew/pythons/Python-3.1.4/lib/python3.1/site-packages/mongoengine/queryset.py", line 390, in _query
    self._mongo_query = self._query_obj.to_query(self._document)
  File "/home/blah/.pythonbrew/pythons/Python-3.1.4/lib/python3.1/site-packages/mongoengine/queryset.py", line 213, in to_query
    query = query.accept(QueryCompilerVisitor(document))
  File "/home/blah/.pythonbrew/pythons/Python-3.1.4/lib/python3.1/site-packages/mongoengine/queryset.py", line 278, in accept
    return visitor.visit_query(self)
  File "/home/blah/.pythonbrew/pythons/Python-3.1.4/lib/python3.1/site-packages/mongoengine/queryset.py", line 170, in visit_query
    return QuerySet._transform_query(self.document, **query.query)
  File "/home/blah/.pythonbrew/pythons/Python-3.1.4/lib/python3.1/site-packages/mongoengine/queryset.py", line 755, in _transform_query
    value = field.prepare_query_value(op, value)
  File "/home/blah/.pythonbrew/pythons/Python-3.1.4/lib/python3.1/site-packages/mongoengine/fields.py", line 594, in prepare_query_value
    return self.field.prepare_query_value(op, value)
  File "/home/blah/.pythonbrew/pythons/Python-3.1.4/lib/python3.1/site-packages/mongoengine/fields.py", line 95, in prepare_query_value
    value = re.escape(value)
  File "/home/blah/.pythonbrew/pythons/Python-3.1.4/lib/python3.1/re.py", line 246, in escape
    return bytes(s)
TypeError: 'str' object cannot be interpreted as an integer 
```

两个查询都不起作用！

MongoEngine 是否支持某种方式来使用`icontains`and进行搜索`all`？或者有什么办法可以解决这个问题？

注意：我想使用 MongoEngine，而不是 PyMongo。

编辑：Python 2.7.3 也存在同样的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-28T07:57:47.560

截至目前（0.8.0 版），这样做的唯一方法是使用`__raw__`查询，可能与`re.compile()`. 像这样：

```
import re

input_list = ['Lo']
converted_list = [re.compile(q, re.I) for q in input_list]

print(Blah.objects(__raw__={"someList": {"$all": converted_list}}).count()) 
```

* * *

目前在mongoengine中没有办法将`all`and组合起来`icontains`，唯一可以和其他算子一起使用的算子是`not`. [文档中](https://mongoengine-odm.readthedocs.org/en/latest/guide/querying.html#query-operators "https://mongoengine-odm.readthedocs.org/en/latest/guide/querying.html#query-operators")*巧妙地*提到了这一点，因为它说：

> not - 否定标准检查，**可以在其他运算符之前使用**（例如 Q(age_ *not* _mod=5)）

[强调我的]

但它并不是说你不能用其他运营商做到这一点，事实就是如此。

* * *

您可以通过查看源来确认此行为：

版本 0.8.0+（[在模块中 - mongoengine/queryset/transform.py](https://github.com/MongoEngine/mongoengine/blob/master/mongoengine/queryset/transform.py#L42 "https://github.com/MongoEngine/mongoengine/blob/master/mongoengine/queryset/transform.py#L42") - 第 42-48 行）：

```
if parts[-1] in MATCH_OPERATORS:
    op = parts.pop()

negate = False
if parts[-1] == 'not':
    parts.pop()
    negate = True 
```

在旧版本中，可以在方法中的mongoengine */queryset.py*`_transform_query`中看到上述行。

# box-api - 如何以编程方式使用 BOX 中的授权码获取 access_token？

> ID：15958460
> 
> 赞同：1
> 
> 时间：2013-04-11T20:40:09.570
> 
> 标签：box-api

阅读box网站上的oauth文档后，我了解了获取access_token和refresh_token的步骤，这需要authorization_code。

step1：发送Get请求到[https://www.box.com/api/oauth2/authorize?response_type=code&client_id=CLIENT_ID&state=authenticated&redirect_uri=https://www.appfoo.com](https://www.box.com/api/oauth2/authorize?response_type=code&client_id=CLIENT_ID&state=authenticated&redirect_uri=https://www.appfoo.com)

step2：在浏览器中输入框的凭据后，然后单击“允许”按钮，重定向到指定的redirect_uri，state=authenticated&code=AUTHORIZATION_CODE

第 3 步：现在使用来自第 2 步的重定向 url 中的 AUTHORIZATION_CODE，可以通过在正文中使用 AUTHORIZATION_CODE、client_id、client_secret向[https://www.box.com/api/oauth2/token](https://www.box.com/api/oauth2/token)发送 POST 请求，然后以编程方式获取 access_token解析返回的 json 响应。

我的问题是：是否可以以编程方式执行 step1 和 step2 而不是通过浏览器？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T21:05:12.297

当前的 OAuth 2 流程要求用户通过浏览器并且不能以编程方式完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T19:07:40.627

有可能，只需使用 cURL 和第二步 post cookie 模仿每个表单。第一次你需要 3 个请求，下一次只需要一个（如果 refresh_token 没有过期，否则再次 3 个）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-25T01:42:29.777

如果您有授权码，那么您应该能够通过 SDK 获取 OAuth Token(access_token, refresh_token)，对吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-09T23:44:11.873

关于模仿浏览器事务的要点是一个很好的要点，但是您希望使用更高级别的工具，例如 mechanize（可用于 ruby​​、perl 和 python），而不是使用 cURL。它将为您处理 cookie，并且可以以编程方式遍历表单和链接。也适用于页面抓取和编写脚本以从 TicketMaster 订购热门音乐会门票！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-26T23:59:48.993

为了响应aIKid，这是我首先要做的是获得一个BoxClient

```
 BoxClient client = new BoxClient(clientId, clientSecret);

    Map<String,Object> authToken = new HashMap<String,Object>();
    authToken.put("exprires_in","3600");
    authToken.put( "token_type","bearer");
    authToken.put("refresh_token", clientRefreshToken);
    authToken.put("access_token",clientAccessToken);

    BoxOAuthToken oauthToken = new BoxOAuthToken(authToken);

    client.authenticate(oauthToken);

    return client; 
```

然后，我有这个来创建一个新用户，

```
BoxUser createdUser = new BoxUser();

BoxUserRequestObject createUserRequest = BoxUserRequestObject.createEnterpriseUserRequestObject("someEmail.domain.com", "test user");
        createdUser = client.getUsersManager().createEnterpriseUser(createUserRequest); 
```

现在我试图弄清楚如何在用户和组上执行我的 CRUD 操作的 RUD 部分。

# sql - 在 SQL 中使用另一张表中的数据更新一个表

> ID：15958464
> 
> 赞同：0
> 
> 时间：2013-04-11T20:40:31.310
> 
> 标签：sql, join

打扰一下; 我读了几个相同的问题，但仍然无法找出解决方案。

我有两张桌子

`photo`桌子：

```
userID | photoID| score 
```

`users`桌子：

```
userID | totalScore 
```

我想将`photoID`唯一值传递给照片表（我的意思是我只想将该值用作查询中的输入变量）。

然后`userID`在照片表中获取对应

然后使用`userID`用户表中生成的唯一性进行更新`totalScore`，例如

```
totalScore = totalScore + score 
```

换句话说，可以说我的价值观是

照片表：

```
userID | photoID| score
bob    |    5   | 500 
```

用户表：

```
userID | totalScore
bob    |    5000 
```

我希望用户表在输入查询后看起来像`photoId=5`

```
userID | totalScore
bob    |    5500 
```

希望我足够清楚。

___________________________编辑________________________

[https://stackoverflow.com/a/707668/842644](https://stackoverflow.com/a/707668/842644)

这个有帮助。可能不是每个服务器都支持更新连接表示法。想分享

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T20:46:52.127

```
update users 
set totalScore = totalScore + p.score
from users left join photo p on users.userId = p.userId
where p.photoID = 5 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T20:48:30.140

以下是如何根据另一个表进行更新，但您可能需要某种方式来确定它是否已经更新。

```
UPDATE users
SET totalScore = TotalScore+tphoto.score
FROM users tuser
INNER JOIN photo tphoto ON tuser.userid = tphotos.userid; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T20:55:44.907

假设总分应该是照片表中所有用户点的总和

```
UPDATE users 
INNER JOIN 
    (SELECT userID, SUM(photo) as 'total' FROM photo GROUP BY userID) 
    x ON x.userID=users.userID 
SET users.totalScore=x.total 
```

我没有桌子可以与之对抗。如果您有 mysql 语法问题，我建议使用[sequel pro](http://www.sequelpro.com/)或其他可以提供错误消息的工具。我还建议您使用自动递增整数作为用于在 2 个表之间映射的键。每个用户都应该有一个唯一的整数 id。这样，如果您有两个鲍勃，就没有问题。

这是另一个[类似的问题](https://stackoverflow.com/questions/10091336/update-table-with-sum-from-another-table)，可能会提供进一步的见解。

编辑：如果您只想更新 bob，请将其添加到末尾

```
WHERE userId='bob' 
```

# android - 如何在 MAC 上启动 Android AOSP 模拟器

> ID：15958468
> 
> 赞同：0
> 
> 时间：2013-04-11T20:40:36.690
> 
> 标签：android, macos, android-emulator, avd, android-source

[我已经按照 Android 源网站 ( http://source.android.com/source/building.html](http://source.android.com/source/building.html) )上的说明下载并编译了 Android 源代码

我选择了

```
$ lunch full-eng 
```

一个仿真器工程构建，一切都编译得很好。

然后它说要在模拟器中启动图像，只需键入：

```
The emulator is added to your path automatically by the build process. To run the emulator, type

$ emulator 
```

好吧，不确定它是否已添加到路径中。键入模拟器不会做任何事情。

但是，如果我去

```
out/host/darwin-x86/bin/emulator
emulator: ERROR: You did not specify a virtual device name, and the system
directory could not be found.

If you are an Android SDK user, please use '@<name>' or '-avd <name>'
to start a given virtual device (see -help-avd for details). 
```

所以我很困惑......此时我是否必须创建一个 AVD ？如何准确地为此图像创建 AVD？

有没有人在 MAC 上做过这个，他们可以给我一些说明吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T01:06:07.680

我不确定 osx 是否有任何区别，但这是 Linux 上的常见错误。构建整个 AOSP 后，构建过程会将 PATH 添加`<AndroidBase>/out/host/<host-arch>/bin/emulator`到 PATH 中，但是在重新启动计算机或打开另一个会话后，模拟器将不再位于路径中。

要修复“您没有指定虚拟设备名称，并且找不到系统目录”错误，您可以显式设置 ANDROID_PRODUCT_OUT 指向您的磁盘映像目录。通常，磁盘映像目录为`<AndroidBase>/out/target/product/generic`. 所以

```
$export ANDROID_PRODUCT_OUT=<ANDROID BASEDIR>/out/target/product/generic/ 
```

有助于。

其实你可以跑

```
. build/envsetup.sh
setpaths 
```

它会为你做类似的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-16T19:10:31.870

我使用 aosp_x86_64-eng 构建并验证以下内容将在新的终端窗口中启动模拟器：

```
cd /[your AOSP WORKING_DIRECTORY]
source build/envsetup.sh
lunch aosp_x86_64-eng
cd $ANDROID_PRODUCT_OUT
emulator 
```

# jquery - 使用 Jquery ajax 将图像加载到隐藏的 div 中

> ID：15958472
> 
> 赞同：4
> 
> 时间：2013-04-11T20:40:42.260
> 
> 标签：jquery, ajax, each

我正在尝试使用 Jquery 遍历画廊中的一组大图像，然后使用 ajax 将它们加载到隐藏的 div 中，以制作这些相同图像的弹出索引。基本上它是一本需要页面索引的翻书，我想要一种更简单的方法来写出索引，而不是为每个图像编码。

```
$.ajax({
  url: "index.html",
  dataType: 'html'
}).done(function( html ) {

var div = $('a.book img', $(html));

$("#test").append($('<ul>')
.append($('<li class="toc">')
.append($('<a>').attr('href','#')
.append($(div).addClass('border'))
)
)
);
}); 
```

我仍然是一个新手编码器，我需要一些指导才能让它工作。此代码将输出：

```
<div id="test">
<ul>
<li class="toc">
<a href="#">
 <img class="border" src="test.jpg" alt="Test">
 <img class="border" src="test2.jpg" alt="Test2">
 <img class="border" src="test3.jpg" alt="Test3">

</a>
</li>
</ul> 
```

基本上，我在“ a href 下获取所有图像，而不是单独获取。我需要使用 $().each 我认为但不知道如何将它与 ajax 一起使用的函数。如果问题令人困惑，我深表歉意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T20:47:59.350

```
$.ajax({
    url: "index.html",
    dataType: 'html'
}).done(function( html ) {
    var ul = $('<ul />');

    $(html).find('a.book img').each(function(i, img) {
        var anchor = $('<a />',  {href : '#'}),
            li     = $('<li />', {'class' : 'toc'});
        li.append( anchor.append( $(img).addClass('border') ) ).appendTo(ul);
    });

    $('#test').append(ul);
}); 
```

输出：

```
<div id="test">
    <ul>
        <li class="toc">
            <a href="#">
                <img class="border" src="test1.jpg">
            </a>
        </li>
        <li class="toc">
            <a href="#">
                <img class="border" src="test2.jpg">
            </a>
        </li>
        <li class="toc">
            <a href="#">
                <img class="border" src="test3.jpg">
            </a>
        </li>

    </ul>
</div> 
```

# physics - 处理速度的最有效方法

> ID：15958474
> 
> 赞同：0
> 
> 时间：2013-04-11T20:40:59.957
> 
> 标签：physics, physics-engine

基本上，我很好奇`xVel`and`yVel`变量是否会工作得最好，或者我是否应该使用 a`velocity`和 a`direction`变量。

此外，这是在更新时处理它的方式：（伪代码）对于`xVel`和`yVel`：

```
x += xVel;
y += yVel; 
```

对于`velocity`和`direction`：

```
x += velocity * (cos(direction));
y += velocity * (sin(direction)); 
```

注意：我不确定第二个是否可以正常工作。我没有三角学技能。

那么，是第一种方法更有效，还是第二种方法更有效呢？我做第二个完全错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T20:43:37.407

这取决于您的应用程序。当然，您可以使用反正切函数来找到任何给定时刻的 theta。但是，如果您的图形会随着对象的角度旋转，那么您可能需要坚持使用极坐标。

基本上，我使用的经验法则是这样的：如果您正在处理 X 和 Y 加速度以及速度，那么您希望坚持直角坐标并使用 delta-x 和 delta-y 变量。如果要处理对象旋转，并且定期计算角度，那么您可能需要使用极坐标。

这取决于应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T03:09:51.060

这两种方法同样有效，因为它们应该给出相同的答案。但是，我会添加一个额外的数值时间步长项，以使其成为更好的数值“模拟”：

```
x += xVel * timeStep;
y += yVel * timeStep; 
```

或者

```
x += totalVel * cos(direction) * timeStep;
y += totalVel * sin(direction) * timeStep; 
```

两种方式都会给出相同的结果，但是计算时间可能会有所不同。如果一种方法的计算量比另一种方法多得多，那么另一种方法很可能会更快。但是，如果您不确定是否始终可以运行测试脚本，您可以在其中多次测试每种方法并跟踪 CPU 执行它们所需的时间量。

# c++ - 如何使用c ++查找参数之间的子字符串

> ID：15958478
> 
> 赞同：1
> 
> 时间：2013-04-11T20:41:18.587
> 
> 标签：c++, substring

我如何定义一个接受字符串的方法，比如说

```
asdfgsdfg:ijtij ijdfgh ija::saf 1999 bp 
```

并返回子字符串

```
ijtij ijdfgh ija::saf 1999 
```

也就是说，我想要在第一个冒号实例之间的所有数据，直到在字符串末尾找到 bp 字符组合。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-11T20:47:10.253

```
string original = "asdfgsdfg:ijtij ijdfgh ija::saf 1999 bp";

size_t s = original.find(":");
size_t e = original.find("bp", s);
string sub = original.substr(s + 1, e - s -1);
cout << sub ; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-11T20:45:50.610

用于`std::string::find`定位第一个冒号和冒号后第一个出现的“bp”。然后用于`std::string::substr`获取这些位置之间的子字符串。

```
#include <iostream>
#include <string>

int main()

{
    std::string str = "asdfgsdfg:ijtij ijdfgh ija::saf 1999 bp";
    int start = str.find(":");
    int end = str.find("bp", start);
    std::string substring;
    if (start != std::string::npos && end != std::string::npos)
    {
       substring = str.substr(start + 1, end - start - 1);
    }
    else
    {
       // Whatever you want to do if the markers are missing.
    }
    std::cout << substring;
} 
```

[在这里](http://ideone.com/TWRMqf)输出。

编辑：根据 MooingDuck 对 stardust_ 答案的评论，目前尚不清楚您对“bp”标记的意图是什么。第一个找到的“bp”实例是否结束子字符串，或者子字符串总是在原始字符串的最后两个字符之前结束？（在这种情况下，它们是否是“bp”无关紧要）。如果是后者，那么修改如下：

```
#include <iostream>
#include <string>

int main()

{
    std::string str = "asdfgsdfg:ijtij ijdfgh ija::saf 1999 bp";
    int start = str.find(":");
    int end = str.length() - 2; // Changed here
    std::string substring;
    if (start != std::string::npos && end != std::string::npos)
    {
       substring = str.substr(start + 1, end - start - 1);
    }
    else
    {
       // Whatever you want to do if the markers are missing.
    }
    std::cout << substring;
} 
```

[在这里](http://ideone.com/uypGnA)输出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T22:37:46.913

给你一个完整的函数，可以从 std::string 中检索子字符串。还包括有关此功能的良好文档。

```
#pragma region INFO
/*
 * @ FUNCTION: GetSubStrBetween
 *
 * @ PARAMETER(s):
 *      [1st] std::string &in_Str = This paramter takes in a std::string, which
 *            is the string that contains the unknown sub-string.
 *
 *      [2nd] std::string in_A = This parameter takes in a std::string, which
 *            will be the beginning point of the unknown sub-string.
 *
 *      [3rd] std::string in_B = This parameter takes in a std::string, which
 *            happens to be the ending point of the unknown sub-string.
 *
 *      [4th] std::string in_out_SubStr = This parameter takes in a std::string,
 *            which will contain the unknown sub-string.
 *
 *      [5th] bool in_opt_Append = This optional* parameter takes in either a true
 *            or false value. If in_opt_Append = true, in_out_SubStr (see 4th
 *            param.) will append the unknown sub-str. Else, in_out_SubStr will be
 *            equal to the unknown sub-str. Note: The default value is false.
 *
 * @ RETURN VALUE(s):
 *      false = This function returns a false value because...
 *              - The length of in_Str/in_A/in_B is equal to 0.
 *              - The length of in_A/in_B is greater than or equal to the length
 *                of in_Str.
 *              - The length of in_Str is smaller than length of in_A + the length
 *                of in_B.
 *              - Unable to find in_A/in_B.
 *      true = Successfully found and return the unknown sub-str to in_out_SubStr.
 */
#pragma endregion INFO

bool GetSubStrBetween( std::string &in_Str,
                       std::string in_A,
                       std::string in_B,
                       std::string &in_out_SubStr,
                       bool in_opt_Append = false )
{
    //# Check for possible errors.
    if( in_A.length() == 0 ||
        in_B.length() == 0 ||
        in_Str.length() == 0 ||
        in_Str.length() <= in_A.length() ||
        in_Str.length() <= in_B.length() ||
        in_Str.length() < in_A.length() + in_B.length() )
    {   return false; }

    //# Try to find the positions of in_A and in_B within in_Str.
    const int A_Pos = in_Str.find( in_A );
    const int B_Pos = in_Str.find( in_B );

    //# Check if in_A and in_B does exist within in_Str.
    if( A_Pos < 0 || B_Pos < 0 )
    {   return false; }

    //# Retrieve the unknown-substr and either append it to in_out_SubStr
    //  or make in_out_SubStr equal to the unknown sub-string.
    ( in_opt_Append == true ) ?
        ( in_out_SubStr = in_Str.substr( A_Pos + 1, B_Pos - 1 - A_Pos ) ) :
        ( in_out_SubStr += in_Str.substr( A_Pos + 1, B_Pos - 1 - A_Pos ) );

    //# Success!
    return true;
}; 
```

不要忘记包含字符串。

这是基于上述问题的使用示例：

```
std::string Str = "asdfgsdfg:ijtij ijdfgh ija::saf 1999 bp";
std::string SubStr = "";

if( GetSubStrBetween( Str, ":", "bp", SubStr ) ) {
    std::cout << std::endl << GetSubStrBetween << std::endl;
} else { std::cout << "\nGetSubStrBetween(...) has failed!\n"; } 
```

# objective-c - 它的 __NSDictionaryM 是什么。为什么 NSStringFromClass 不返回 NSMutableDictionary？

> ID：15958490
> 
> 赞同：1
> 
> 时间：2013-04-11T20:42:08.583
> 
> 标签：objective-c, nsmutabledictionary

我得到了一些我无法得到的奇怪东西。我正在使用第三方控件（[https://github.com/brunow/TableKit.m](https://github.com/brunow/TableKit.m)），它可以：

```
+ (NSSet *)cellMappingsForObject:(id)object mappings:(NSDictionary *)mappings {
    NSString *objectStringName = NSStringFromClass([object class]);
    return [mappings objectForKey:objectStringName];
} 
```

它根据类的名称创建一个映射：

```
[TKCellMapping mappingForObjectClass:[NSMutableDictionary class] block:^(TKCellMapping *cellMapping) {
//CODE
}]; 
```

它会根据它的映射检查数据源对象。这些对象是为我构建的：

```
while ([rs next]) {
    NSMutableDictionary *dict = [NSMutableDictionary dictionary];

    for (NSString *fieldName in [props allKeys]) {
        //CODE                
        [dict setValue:fieldValue forKey:fieldName];
    }
    [list addObject :dict]; //<--This is the datasource. The map is against each dict
} 
```

所以，我所说的到处都是`NSMutableDictionary`. 但是后来发生了这件奇怪的事情。

当它调用`NSStringFromClass([NSMutableDictionary class])`它时说`NSMutableDictionary`，但当它调用`NSStringFromClass([rowDict class])`它时说`__NSDictionaryM`！

为什么会这样？我检查的标题`__NSDictionaryM`和 Xcode 导航到`NSMutableDictionary`（？）。我无法从`__NSDictionaryM`.

顺便说一句，我需要做什么`NSStringFromClass`才能完全替换`NSMutableDictionary`？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-11T20:46:09.503

它是`NSMutableDictionary`. 它**是**一个`NSMutableDictionary`. [在此处阅读有关类集群的更多信息。](https://developer.apple.com/library/mac/#documentation/General/Conceptual/DevPedia-CocoaCore/ClassCluster.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-09T16:48:48.140

我已经通过子类检查完成了它：

```
if( [[o class] isSubclassOfClass:[NSMutableDictionary class]] ) {
  // o is at least a subclass of NSMutableDictionary
} 
```

# video - 内网用户可以播放flash视频吗？如果他们无法连接到 download.macromedia.com

> ID：15958492
> 
> 赞同：0
> 
> 时间：2013-04-11T09:15:01.760
> 
> 标签：video, flash, intranet

我使用 Dreamweaver CS3 编辑**Intranet**页面，我插入 Flash 视频，Dreamweaver CS3 为我插入代码。我注意到插入的代码有一些互联网地址。我想知道假设我的用户无法连接互联网，可以播放视频吗？

假设他们的操作系统是 Windows XP，已经安装了 Flash Player 7 或更高版本。

```
<p>
  <script type="text/javascript">
AC_FL_RunContent( 'codebase','http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=7,0,0,0','width','600','height','340','id','FLVPlayer','src','FLVPlayer_Progressive','flashvars','&MM_ComponentVersion=1&skinName=Clear_Skin_3&streamName=videos/GLD_01&autoPlay=false&autoRewind=false','quality','high','scale','noscale','name','FLVPlayer','salign','lt','pluginspage','http://www.adobe.com/shockwave/download/download.cgi?P1_Prod_Version=ShockwaveFlash','movie','FLVPlayer_Progressive' ); //end AC code
</script>
  <noscript>
  <object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=7,0,0,0" width="600" height="340" id="FLVPlayer">
    <param name="movie" value="FLVPlayer_Progressive.swf" />
    <param name="salign" value="lt" />
    <param name="quality" value="high" />
    <param name="scale" value="noscale" />
    <param name="FlashVars" value="&MM_ComponentVersion=1&skinName=Clear_Skin_3&streamName=videos/GLD_01&autoPlay=false&autoRewind=false" />
    <embed src="FLVPlayer_Progressive.swf" flashvars="&MM_ComponentVersion=1&skinName=Clear_Skin_3&streamName=videos/GLD_01&autoPlay=false&autoRewind=false" quality="high" scale="noscale" width="600" height="340" name="FLVPlayer" salign="LT" type="application/x-shockwave-flash" pluginspage="http://www.adobe.com/shockwave/download/download.cgi?P1_Prod_Version=ShockwaveFlash" />  
  </object>
  </noscript>
</p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T20:46:44.813

是的，它会正常工作。如果安装了插件，则不使用 and 参数，即使未安装插件，当前浏览器也不会使用and`codebase`参数。`pluginspage`

在一些较旧的浏览器上，它们曾经提示用户导航到引用的页面以下载插件，但较新的浏览器甚至不这样做。

# java - 链表 - 删除索引处的元素

> ID：15958495
> 
> 赞同：0
> 
> 时间：2013-04-11T20:42:41.193
> 
> 标签：java, linked-list

我正在为我的 OOP 类分配链接列表，并且在使用 remove 方法时遇到了一些问题。我们的教授让我们写一个方法：

```
public Object removeElement(int index) 
```

这需要一个索引，即需要删除的元素的位置。它还必须返回已删除节点包含的数据。但是，我无法让方法返回它正在删除的对象。出于某种原因，我不断收到该方法必须返回对象类型的结果的错误。我让它返回一个对象，并且我在各个地方都经历了反复试验，但没有成功。这是我的代码：

```
 public Object removeElement(int index)
   {
   ListIterator iterator = listIterator();
   Object object;
   //If the supplied index is less than zero, throw an exception.
   if(index < 0)
   {
       IndexOutOfBoundsException ex = new IndexOutOfBoundsException();
       throw ex;
   }

   else
   {
       for(int i = 0; i <= index; i++)
       {
           if(!iterator.hasNext())
           {
               IndexOutOfBoundsException ex = new IndexOutOfBoundsException();
               throw ex;
           }
           else
           {
               if(i == index)
               {
                   object = iterator.next();
                   iterator.remove();
                   return object;
               }
               else
               {
                   iterator.next();

               }
           }
       }
   } 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T20:46:33.177

你让它返回一个对象*if* `i == index`。但是编译器不知道循环实际上总是会在那个时候结束。它正在查看循环的底部并思考“如果我们到达这里，我们想要返回什么？”

我实际上会将您的代码重组为：

```
if (index < 0)
{
    // No need for a separate variable
    throw new IndexOutOfBoundsException();
}

// No need for an else block
ListIterator iterator = listIterator();
Object current = null;
for (int i = 0; i <= index; i++)
{
    // Note: assuming you expose the size(), you could check this up front...
    if(!iterator.hasNext())
    {
        throw new IndexOutOfBoundsException();
    }
    current = iterator.next();
}
iterator.remove();
return current; 
```

现在，当您调用给定次数时，您*总是*调用并返回，因为那是循环将结束而不是通过异常结束的时候。`remove``next()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T20:52:33.053

首先不要使用 java LinkedList 中的迭代器，它是[双向链表](http://en.wikipedia.org/wiki/Doubly_linked_list)，我想教授想看看你如何为[LikedList](http://en.wikipedia.org/wiki/Linked_list)数据结构实现删除功能。

其次在这个地方创建循环和条件`i+1 == index`，保存当前元素以返回，`Node returnElement = curent.next;`并进行删除操作`curent.next = curent.next.next;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T20:52:31.280

请发布 listIterator() 方法实现和您收到的错误消息。注意：> 您必须使用类变量（例如整数）来管理列表的大小。所以你没有检查！iterator.hasNext()，而是将索引与当前大小进行比较。

# c# - WPF 组合框选择行为

> ID：15958498
> 
> 赞同：1
> 
> 时间：2013-04-11T20:42:49.573
> 
> 标签：c#, wpf, combobox, mouseevent

`WPF ComboBox`控件允许通过两种方式使用鼠标更改选择。

*   用鼠标向下/向上单击，出现弹出窗口，然后单击要选择的项目。

*   您单击并按住。将出现弹出窗口，将鼠标悬停在要选择的项目上并释放鼠标按钮。选择 MouseUp 事件时鼠标悬停的项目。

有没有办法消除`behavior #2`？即让他们执行 2 次完整的向下/向上单击来更改选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T20:14:22.423

它可能不漂亮，但结合一些事件似乎可以满足您的需求：

```
private bool _comboMouseDown = false;
private bool _comboSelectionDisabled = false;

private void ComboBox_PreviewMouseDown(object sender, MouseButtonEventArgs e)
{
    _comboMouseDown = true;
}

private void ComboBox_DropDownOpened(object sender, EventArgs e)
{
    if (_comboMouseDown)
    {
        //Don't enable selection until the user releases the mouse button:
        _comboSelectionDisabled = true;
    }
}

private void ComboBox_PreviewMouseUp(object sender, MouseButtonEventArgs e)
{
    if (_comboSelectionDisabled)
    {
        //Stop the accompanying "MouseUp" event (which would select an item) from firing:
        e.Handled = true;

        _comboSelectionDisabled = false;
    }

    _comboMouseDown = false;
} 
```

1) 仍然正常工作

2）单击并按住仍然会打开弹出窗口，但您需要释放并再次单击以选择一个项目。

# linux - vim 7.0 和 vim 7.2 之间 cindent 的不同行为

> ID：15958508
> 
> 赞同：1
> 
> 时间：2013-04-11T20:43:21.217
> 
> 标签：linux, vim, parentheses, auto-indent

我在一台机器上使用 .vimrc 文件，它使用以下几行将我的括号完全缩进我喜欢的方式：

```
set tabstop=3
set shiftwidth=3   
set ai
set cindent
set cino=(s,U1,)0,m1 
```

这个工作的机器正在运行带有 vim 7.0 的 RHEL5。但是，在我使用 vim 7.2 运行 RHEL6 的较新机器上，这不再起作用。事实上，似乎无论我如何修改 cino 似乎都没有任何改变。我错过了什么？版本之间的语法是否发生了变化？

# visual-studio-2012 - 打开解决方案时 Visual Studio 死机

> ID：15958511
> 
> 赞同：0
> 
> 时间：2013-04-11T20:43:32.267
> 
> 标签：visual-studio-2012, fatal-error

在VS2012中打开特定解决方案时，进程被杀死。事件查看器显示错误 1026

应用程序：devenv.exe 框架版本：v4.0.30319 描述：进程因未处理的异常而终止。异常信息：System.BadImageFormatException 堆栈：在 Microsoft.VisualStudio.Enterprise.Common.AspNetHelper.Finalize() 的 Microsoft.VisualStudio.Enterprise.Common.AspNetHelper.CleanupListener()

任何原因的想法？

编辑

我似乎确实能够打开其他解决方案。只是试图重新安装 .NET 框架。如果这不起作用，将尝试删除 SUO 文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T21:41:22.203

我最终重新安装了 Visual Studio 并解决了这个问题

# r - 使用 OAuth 和 R 的请求令牌无效 - R 代码是否正确？

> ID：15958512
> 
> 赞同：3
> 
> 时间：2013-04-11T20:43:35.063
> 
> 标签：r, twitter-oauth

我正在修改我的原始查询，专门询问是否有人可以看到我在下面给出的 R 代码本身会导致无效请求令牌的原因。如果没有，我会知道我的问题出在其他地方。

我正在尝试使用 twitteR 包，因为我已经进入了 Jeffrey Stanton 的关于数据科学的免费电子书的 Twitter 章节，这有助于我学习 R。到目前为止，Twitter 给了我这样的信息：

*哇！此页面的请求令牌无效。它可能已经被使用过，或者因为太旧而过期。请返回将您发送到此处的站点或应用程序，然后重试；这可能只是一个错误。*

我已经安装了 bitops、RCurl、RJSONIO、twitter 和 ROAuth 包。然后我运行这段代码（注意我不能发布链接，因为我的声誉太低了）：

```
reqURL <- "//api.twitter.com/oauth/request_token"
   accessURL <- "//api.twitter.com/oauth/access_token"
   authURL <- "//api.twitter.com/oauth/authorize"
   consumerKey <- "abc"
   consumerSecret <- "xyz"
   twitCred <- OAuthFactory$new(consumerKey=consumerKey,
                                consumerSecret=consumerSecret,
                                requestURL=reqURL,
                                accessURL=accessURL,
                                authURL=authURL) 
```

紧随其后的是：

```
twitCred$handshake(cainfo = system.file("CurlSSL", "cacert.pem", package = "RCurl") ) 
```

然后我得到这个提示：

**要启用连接，请将您的网络浏览器指向： [http](http://api.twitter.com/oauth/authorize?oauth_token=Kxa) ://api.twitter.com/oauth/authorize?oauth_token=Kxa ... 完成后，记录给您的 PIN 并在此处提供：**

此时我似乎无法复制 twitter 链接，所以我将它（！）手动输入到我的浏览器中，然后我从 Twitter 收到了我开始提问的消息。我已经尝试了很多次，结果都是一样的。r-project 上的 TwitteR 小插图中的 OAuth 位对此没有任何帮助（它假设我做对了我想！）并且 TwitteR 包描述的第 9 页上的示例也对我没有帮助。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-14T18:22:50.817

我面临同样的问题。我通过两种方式进行管理：（1）使用 R 控制台而不是 R studio 或（2）您拍摄链接的快照并使用 OCR 软件转换为文本（this）

谢谢并恭祝安康！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T16:31:34.447

我自己回答了我原来的问题。我退出了我正在工作的 R-studio 项目，从 twitter 开发者网站中重新创建了我的访问令牌和访问令牌秘密，然后将此代码应用到一个新的 R-studio 项目中：

```
requestURL <-  "https://api.twitter.com/oauth/request_token"
accessURL =    "https://api.twitter.com/oauth/access_token"
authURL =      "https://api.twitter.com/oauth/authorize"
consumerKey =   "------------"
consumerSecret = "-----------"
twitCred <- OAuthFactory$new(consumerKey=consumerKey,
                         consumerSecret=consumerSecret,
                         requestURL=requestURL,
                         accessURL=accessURL,
                         authURL=authURL)
download.file(url="http://curl.haxx.se/ca/cacert.pem",
          destfile="cacert.pem")
twitCred$handshake(cainfo="cacert.pem") 
```

我从这里得到：[TwitteR、ROAuth 和 Windows：注册正常，但证书验证失败](https://stackoverflow.com/questions/9916283/twitter-roauth-and-windows-register-ok-but-certificate-verify-failed)

这些事情的结合阻止了我从 twitter 收到请求令牌无效的消息。因此，我获得了现在可以使用的 twitter 链接：要启用连接，请将您的网络浏览器定向到： [https ://api.twitter.com/oauth/authorize?oauth_token=xxxx](https://api.twitter.com/oauth/authorize?oauth_token=xxxx)

但是我没有走得更远，所以我在这里写了一个新问题：[在 R oauth 身份验证期间，推特 PIN 码出现在哪里？](https://stackoverflow.com/questions/16042271/where-does-twitter-pin-code-appear-during-r-oauth-authentication)

# java - 如何将具有相同内容的二叉搜索树的节点推送到堆栈中

> ID：15958515
> 
> 赞同：1
> 
> 时间：2013-04-11T20:43:42.313
> 
> 标签：java

我有一个包含人的 BinarySearchTree。每个人都有生日月份的财产。

如果人们的生日月份相同，我有以下代码试图将节点推送到堆栈中。但是当我运行程序时，它会抛出 java.lang.OutOfMemoryError: Java heap space。

如何获取具有相同生日月份的所有元素并将它们推送到堆栈？

编辑：基于工作代码的确定 KarlP 的回答

```
//Part of the code

//Declared in Instance Variables

private Stack<BinaryNode> st = new Stack<BinaryNode>();

//Methods

public void getSame(BinaryNode node, String mo){
    if(node != null){
        if (mo.equalsIgnoreCase(node.people.getBmonth())){
            st.push(node);
        }
        getSame(node.left, mo);
        getSame(node.right, mo);
    }
}

public void getSt(String mo){
    getSame(root, mo);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T20:49:42.517

您没有更新，`node`因此它将永远在循环内`while`循环。

我认为它可能应该用一个`if`语句替换，作为递归调用的停止条件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T20:53:05.943

递归算法总是需要某种 if。否则它只会继续下降。

```
if (we are done) {
    return(1);
} else {
    return recurse() + recurse();
} 
```

在您的情况下，您想测试是否缺少子节点以结束递归。

使用它来结束递归：

```
if (node != null){ 
```

# sql - 如何为“where value in”子句中的每个项目返回一条记录？

> ID：15958523
> 
> 赞同：0
> 
> 时间：2013-04-11T20:44:12.853
> 
> 标签：sql, oracle11g

**Oracle11g**

我想知道一个球员是否曾经玩过游击手。但是，一个玩家甚至可能不在我的桌子上，但我仍然想为该玩家返回一行。在这种情况下，玩家 #3 不在桌子上，但我还是想返回一行。

**选择标准**

> 如果玩家至少有一个 SHORTSTOP 记录，则只返回 1 行 YES。
> 
> 如果玩家至少有一个记录并且没有一个是 SHORTSTOP，那么只返回一行 NO。
> 
> 如果玩家没有记录，则只返回一行 NO。

**询问**

```
with baseball_players as 
(select 1 as player_id, 'SHORTSTOP' as position  from dual union all
 select 1 as player_id, 'FIRSTBASE' as position  from dual union all
 select 2 as player_id, 'FIRSTBASE' as position  from dual)                                                  
select player_id,  case position 
   when 'SHORTSTOP' then 'YES' 
   else 'NO'
   end   has_played
from baseball_players 
where player_id in (1,2,3) 
```

**问题：**如何编写查询以获得所需的结果？

**期望的输出**

```
PLAYER_ID  HAS_PLAYED
----------------------
   1        YES
   2        NO
   3        NO 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T20:52:14.343

与其使用 where 子句，不如创建一个临时表，在您创建的表中插入值并左连接。

对 IF NULL 然后 NO 使用 case 语句，否则为 YES。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T20:56:55.917

这个怎么样：

```
WITH playerList AS
    (
        SELECT 
            1 player_id
        FROM 
            dual
        UNION
        SELECT 
            2
        FROM 
            dual
        UNION
        SELECT 
            3
        FROM 
            dual
    )
, baseball_players as 
    (
        select 1 as player_id, 'SHORTSTOP' as position  from dual union all
        select 1 as player_id, 'FIRSTBASE' as position  from dual union all
        select 2 as player_id, 'FIRSTBASE' as position  from dual 
    )
SELECT 
    pl.player_id
    , MAX(CASE WHEN bp.position = 'SHORTSTOP' THEN 'YES' ELSE 'NO' END)
FROM
    playerList pl
LEFT JOIN 
    baseball_players bp
    ON 
    bp.player_id = pl.player_id
GROUP BY 
    pl.player_id 
```

# c# - 如何使用动态字符串过滤带有字符串的字段 X？

> ID：15958526
> 
> 赞同：0
> 
> 时间：2013-04-11T20:44:22.590
> 
> 标签：c#, linq, entity-framework

像这样的东西：

```
public static class ExtensionMethods
{
    public static IQueryable<MovieList> FilterEntityCollection(this IQueryable<MovieList> movies, IEnumerable<Foo.Models.FilterCriteria> filters)
    {
        foreach (var filter in filters)
        {
            // Apply the filter to the collection.
            movies= movies.Where(x => x.filter.FieldName == filter.expr);
                                    //x."MovieTitle"       == "Jaws" 
        }

        return movies;
    }
} 
```

这样的事情可以在 C# 中完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T20:51:25.837

使用[LinqKit](http://www.albahari.com/nutshell/linqkit.aspx)

有点像：

```
var predicate = PredicateBuilder.True<MovieList>();

foreach (var filter in filters)
{
    string filter1 = filter;
    predicate = predicate.And(a => a.filter.FieldName == filter1);
}
return movies.AsExpandable().Where(predicate); 
```

LinqKit 谓词构建器

```
using System;
using System.Linq.Expressions;
using System.Runtime.CompilerServices;

namespace LinqKit
{
    public static class PredicateBuilder
    {
        public static Expression<Func<T, bool>> And<T>(this Expression<Func<T, bool>> expr1, Expression<Func<T, bool>> expr2);
        public static Expression<Func<T, bool>> False<T>();
        public static Expression<Func<T, bool>> Or<T>(this Expression<Func<T, bool>> expr1, Expression<Func<T, bool>> expr2);
        public static Expression<Func<T, bool>> True<T>();
    }
} 
```

# javascript - ArrayController 的数组

> ID：15958529
> 
> 赞同：0
> 
> 时间：2013-04-11T20:44:26.433
> 
> 标签：javascript, ember.js

我在这里做错了什么，但不知道是什么。一般来说，我对 Ember 和 Javascript 都是新手，所以请随时指出任何错误。我会很感激多一双眼睛。

我基本上有一个包含多个数据集的谷歌地图。在与视图一起使用的控制器中，我获取数据集并为每个数据集创建一个 dataSetController(ArrayController)。然后我让 dataSetController 加载数据并将其添加到它的内容和一个附加的标记数组中。但是，当该过程完成时，两个 dataSetController 都包含所有点，而不仅仅是特定数据集的点。

下面是与视图一起使用的控制器：

```
App.MapviewShowController = Ember.ObjectController.extend({
  dataSets: [],

  createDataSets: function() {
    'use strict';

    var self = this;

    // clean previous data
    this.get('dataSets').length = 0;

    $.ajax({
      url: '/active_data_sets.json',
      type: 'GET',
      data: {'project_id': this.get('id')},
      success: function(data) {
        data.active_data_sets.forEach(function(entry) {

          // create a new controller for this dataset
          var newds = App.AddressRecordController.create();
          self.get('dataSets').pushObject(newds);
        });
      },
      error: function() {
      }
    });
  }
}); 
```

和 dataSetController 本身：

```
App.AddressRecordController = Ember.ArrayController.extend({

  content: [],
  isActive: true,
  dataSetId: 0,
  markerColor: '',
  datasetName: '',
  map: null,
  map_nelat: null,
  map_nelng: null,
  map_swlat: null,
  map_swlng: null,
  markerIcon: null,
  markers: [],
  mapBinding: 'App.MapData.map',
  map_nelatBinding: 'App.MapData.ne_lat',
  map_nelngBinding: 'App.MapData.ne_lng',
  map_swlatBinding: 'App.MapData.sw_lat',
  map_swlngBinding: 'App.MapData.sw_lng',

  getAddresses: function(ne_lat, ne_lng, sw_lat, sw_lng) {
    "use strict";

    var self = this;

    $.ajax({
      url: '/address_records.json',
      type: 'GET',
      data: {'dataset_id': this.get('dataSetId'), 'ne_lat': ne_lat, 'ne_lng': ne_lng, 'sw_lat': sw_lat, 'sw_lng': sw_lng},
      success: function(data) {
        data.address_records.forEach(function(new_address) {
          if (!self.findProperty('id', new_address.id)) {
            // add to the content
            self.content.addObject(App.AddressRecord.create(new_address));

            // add the marker
            var marker = new google.maps.Marker({
              position: new google.maps.LatLng(new_address.lat, new_address.long),
              map: self.get('map'),
              animation: google.maps.Animation.DROP,
              title: 'marker',
              id: new_address.id
            });

            // add the marker for later reference
            self.markers.push(marker);
          }
        });
      },
      error: function() {
      }
    });
  },

  newBounds: function() {
    "use strict";

    this.getAddresses(this.map_nelat, this.map_nelng, this.map_swlat, this.map_swlng);
  }.observes('map_swlng'),

  clean: function() {
    'use strict';

    // clean the objects in arracycontroller
    this.forEach(function(el) {
      el.destroy();
    });

    // clean the markers
    this.markers.length = 0;
  },

  showMarkers: function() {
    'use strict';

    var self = this;

    if(this.get('isActive')) {
      this.markers.forEach(function(mkr) {
        mkr.setMap(self.get('map'));
      });
    } else {
      this.markers.forEach(function(mkr) {
        mkr.setMap(null);
      });
    }
  }.observes('isActive')
}); 
```

## 更新

进一步调试后，我发现多个 AddressRecordControllers 除了`markers array`. 为了规避这个问题，我现在将标记存储为内容并且效果很好。仍然不清楚为什么标记数组在不同的控制器上共享。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T21:48:39.650

我相信 create 方法更像是一个单例，因此它要么创建对象，要么返回指向对象的指针。所以你只是添加到同一个控制器。你可以试试。Ember 也有一个 Mixin 东西，我也不确定它是如何工作的。

```
var newds = App.AddressRecordController.extend(); 
```

# javascript - Joomla v3.0 Javascript jQuery 问题 - 没有方法

> ID：15958535
> 
> 赞同：0
> 
> 时间：2013-04-11T20:44:46.097
> 
> 标签：javascript, jquery, joomla

在 Joomla v3.0 上使用滑块模块

我已经尝试了几个模块扩展 & 都回来了同样的错误：

**未捕获的类型错误：对象 [object Object] 没有方法“favslider”**

```
jQuery.noConflict();

jQuery(window).load(function () {
    jQuery('.favslider').favslider({
        //error here ---> Uncaught TypeError: Object [object Object] has no method 'favslider'
        animation: "slide",
        directionNav: true,
        keyboardNav: true,
        mousewheel: false,
        slideshow: false,
        slideshowSpeed: 7000,
        randomize: false,
        animationLoop: false,
        pauseOnHover: true,

        controlNav: true,
        start: function (slider) {
            jQuery('body').removeClass('loading');
        }
    });
}); 
```

网址到站点（缩短，在临时 ip url 上运行，不允许在此处发布 ip） [http://goo.gl/ipCJn](http://goo.gl/ipCJn)

任何想法 - 迷失了什么可能是错的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T20:55:03.830

错误表示`$.fn.favslider`不是函数，即您没有加载此 jquery 插件。所以你可以先检查你是否有这个 joomla 扩展和它的 jquery 插件。

**编辑**

如果您已添加此扩展，请检查`$.fn.favslider`您页面上的控制台并查看它是否已定义。

如果是，则意味着您向我们展示的代码在加载扩展之前被调用。要确认这一点，您可以使用 a`setTimeout`来推迟代码执行，看看它是否真的是加载顺序问题。

如果是，那么如果您控制插入页面中的脚本，请正确排序。

# ios - OpenGL绘制多个等距立方体

> ID：15958540
> 
> 赞同：0
> 
> 时间：2013-04-11T20:45:18.263
> 
> 标签：ios, objective-c, opengl-es, opengl-es-2.0, glkit

我正在尝试以等距相机角度绘制多个立方体。这是绘制一个的代码。（iOS 上带有 GLKit 的 OpenGL ES 2.0）。

```
float startZ = -4.0f;

// position
GLKMatrix4 modelViewMatrix = GLKMatrix4Identity;    
modelViewMatrix = GLKMatrix4Translate(modelViewMatrix, location.x, location.y, location.z + startZ);

// isometric camera angle
modelViewMatrix = GLKMatrix4Rotate(modelViewMatrix, GLKMathDegreesToRadians(45), 1.0, 0, 0);
modelViewMatrix = GLKMatrix4Rotate(modelViewMatrix, GLKMathDegreesToRadians(45), 0.0, 1.0, 0);

self.effect.transform.modelviewMatrix = modelViewMatrix;

[self.effect prepareToDraw];
glDrawArrays(GL_TRIANGLES, 0, 36); 
```

问题是它先平移，然后旋转，这意味着有多个盒子时，它们不会对齐（它们看起来像一串菱形。每个都在适当的位置并旋转，因此角重叠）。

![立方体](https://i.stack.imgur.com/fXZjZ.png)

我试过切换顺序，所以旋转在翻译之前，但它们根本没有出现。我的顶点数组绑定到以原点为中心的单位立方体。

我真的不明白如何控制相机与物体分开。我在没有得到它的情况下使用了投影矩阵一段时间。据我了解，相机应该是用modelViewMatrix控制的，对吧？（“视图”部分）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T23:01:28.743

您的“相机”变换（模型视图）似乎是正确的，但看起来您正在使用透视投影 - 如果您想要等距投影，则需要更改投影矩阵。

看起来您在绘制每个对象时正在将相机旋转应用于每个对象。相反，如果您的用例如此简单，请模拟一个 2 深的矩阵堆栈，因此您只需拥有相机矩阵和每个立方体的矩阵。

1.  设置您的投影和相机矩阵 - 保留对您的相机矩阵的引用。
2.  对于每个立方体生成单独的立方体变换矩阵（它可能应该只包含平移 - 没有旋转，所以立方体保持轴对齐 - 我认为这就是你想要的）。
3.  将您的立方体矩阵乘以相机矩阵并将其用作模型视图矩阵。

请注意，对于您渲染的每个立方体，相机矩阵将保持不变，但模型视图矩阵会将立方体的单独转换矩阵和相机矩阵合并到单个模型视图矩阵中。这相当于旧的矩阵堆栈方法`glPushMatrix`和`glPopMatrix`（在 GLES 2.0 中不可用）。如果您需要更复杂的对象层次结构（立方体在其“本地”坐标空间中具有子对象），那么您可能应该实现自己的完整矩阵堆栈，而不是上面讨论的 2 深等效项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T23:41:04.250

作为参考，这是一篇帮助我理解它的文章。这有点数学，但可以很好地直观地解释事物。

[http://db-in.com/blog/2011/04/cameras-on-opengl-es-2-x/](http://db-in.com/blog/2011/04/cameras-on-opengl-es-2-x/)

我最终保留了透视投影，因为我不想要真正的等距。关键是要以正确的顺序进行，因为移动相机是移动物体的逆过程。见评论和文章。工作代码：

```
// the one you want to happen first is multiplied LAST
// camRotate * camScale * camTranslate * objTranslate * objScale * objRotate;

// TODO cache the camera matrix
// the camera angle remains the same for all objects
GLKMatrix4 camRotate = GLKMatrix4MakeRotation(GLKMathDegreesToRadians(45), 1, 0, 0);
camRotate = GLKMatrix4Rotate(camRotate, GLKMathDegreesToRadians(45), 0, 1, 0);
GLKMatrix4 camTranslate = GLKMatrix4MakeTranslation(4, -5, -4.0);
GLKMatrix4 objTranslate = GLKMatrix4MakeTranslation(location.x, location.y, location.z);

GLKMatrix4 modelViewMatrix = GLKMatrix4Multiply(camRotate, camTranslate);
modelViewMatrix = GLKMatrix4Multiply(modelViewMatrix, objTranslate);

self.effect.transform.modelviewMatrix = modelViewMatrix;

[self.effect prepareToDraw];
glDrawArrays(GL_TRIANGLES, 0, 36); 
```

# ios - 没有堆栈时如何调试iOS断言失败崩溃

> ID：15958544
> 
> 赞同：1
> 
> 时间：2013-04-11T20:45:24.180
> 
> 标签：ios, crash, assert, assertion, symbolicate

我正在尝试调试似乎是 iOS 上的断言失败。有问题的设备似乎没有产生崩溃日志。相反，在控制台中，我看到了这个：

```
Apr 11 16:22:56 iPhone5 SpringBoard[69] <Warning>: Killing com.yourapp for termination assertion
Apr 11 16:22:56 iPhone5 com.apple.launchd[1] (UIKitApplication:com.appspot.scruffapp[0xa993][19484]) <Notice>: (UIKitApplication:com.yourapp[0xa993]) Exited: Killed: 9 
```

有没有办法将这个非常有限的信息连接到实际的源文件+行号？此外，为什么设备可能不会创建任何崩溃日志，这显然更容易符号化和诊断？

谢谢，埃里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T20:56:45.787

您是否尝试过使用：

```
@try {
    //code here
}
@catch (NSError *error) {
    NSLog(@"%@", error);
} 
```

# java - Java - 反编译时字符串等于

> ID：15958545
> 
> 赞同：11
> 
> 时间：2013-04-11T20:45:25.710
> 
> 标签：java, string, optimization, equality, string-interning

前几天我反编译了一些Java代码，发现了这个：

```
String s1 = "something";
String s2 = "something_else";

if (s1 == s2) {
// Path 1
} else {
// Path 2
} 
```

显然使用 '==' 来测试字符串是否相等是不好的

但我想知道——这段代码已经被编译和反编译了。**如果所有字符串都已在编译时定义并已实习并且代码已编译 - s1.equals(s2) 是否有可能已优化为“s1 == s2”？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-11T20:54:31.603

我对此表示高度怀疑。通常，Java 编译器通过字节码优化做的很少，将优化留给 JIT 阶段。

我已经对此进行了一些实验，并且我的编译器对以下内容没有做任何有趣的事情：

```
public class Clazz {

    public static void main(String args[]) {
        final String s1 = "something";
        final String s2 = "something_else";
        if (s1.equals(s2)) {
            System.out.println("yes");
        } else {
            System.out.println("no");
        }
    }

} 
```

这可能是最容易优化的情况。但是，字节码是：

```
 public static void main(java.lang.String[]);
    Code:
       0: ldc           #16                 // String something
       2: astore_1      
       3: ldc           #18                 // String something_else
       5: astore_2      
       6: ldc           #16                 // String something
       8: ldc           #18                 // String something_else
      10: invokevirtual #20                 // Method java/lang/String.equals:(Ljava/lang/Object;)Z
      13: ifeq          27
      16: getstatic     #26                 // Field java/lang/System.out:Ljava/io/PrintStream;
      19: ldc           #32                 // String yes
      21: invokevirtual #34                 // Method java/io/PrintStream.println:(Ljava/lang/String;)V
      24: goto          35
      27: getstatic     #26                 // Field java/lang/System.out:Ljava/io/PrintStream;
      30: ldc           #40                 // String no
      32: invokevirtual #34                 // Method java/io/PrintStream.println:(Ljava/lang/String;)V
      35: return 
```

因此，我强烈怀疑这`==`是原始源代码的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T20:50:55.153

不，看起来 Java 并没有对此进行优化（默认情况下）。

我只是对这两种解决方案进行了基准测试。如果它未优化，我们预计会`s1.equals(s2)`比`s1 == s2`. 这正是我们所看到的。如果它被优化，那么`s1.equals(s2)`将花费与`s1==s2`. 但是，它们需要不同的时间（大约 50,000 纳秒）。这*不是*对这个编译的直接测量，但它是一个合理的推论。

这不会被优化的原因`==`是因为等于运算符，对于对象，将比较对象内存地址，而不是对象本身的内容。所以，如果你改变`s1`了，那么，如果编译器优化了这个，你也会改变`s2`.

但是，这可能会破坏代码，因此编译器不会这样做。它将留下和的内存`s1`地址`s2`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T21:09:42.423

主要规则是，如果编译器可以从它在单个类中的源代码中扣除确切的值。因为它只使用最小的编译单元 - 类进行所有优化。如果我写一个代码

```
public class Test
{
    private static final String i = "1";
    public static void main(String[] args)
    {
        if(i == "2")
            System.out.println("hello");
        System.out.println("world");
    }
} 
```

编译器会看到与此类中的语句相关的所有代码并优化 if 条件。反编译后代码如下

```
public class Test
{
  private static final String i = "1";

  public static void main(String[] paramArrayOfString)
  {
    System.out.println("world");
  }
} 
```

（我用过[jd-gui](http://java.decompiler.free.fr/?q=jdgui)）

但是，如果您替换`==`为`.equals`，编译器无法假设该方法是如何`.equals`工作的。因为，在`Test`类编译之后，你可以破解你的 JDK 并放置另一个版本的类，`java.lang.String`它返回`true`.`"1".equals("2")`

所以，考虑到编译器可以做的优化，首先要考虑如果以后可以重新编译任何类，编译器会如何表现。

作为另一个示例，您可以看到[如何`enum`实现](https://stackoverflow.com/questions/7873725/decompiling-java-with-jad-limitations/7874115)以及为什么需要这种“奇怪”的方式。

# android - java.lang.ClassNotFoundException: android.view.fragment

> ID：15958550
> 
> 赞同：0
> 
> 时间：2013-04-11T20:45:43.663
> 
> 标签：android, android-fragments

我有一个包含两个活动（MainActivity 和 WelcomeActividy）的应用程序都从`android.support.v4.app.FragmentActivity`

WelcomeActivity 使用 ViewFlipper 在一个 Step 中显示 Fragments (Step1, Step2, ..., StepN) 使用片段列表 (CategoryStarredFragment) WelcomeActivity 没有问题

MainActivity 使用 tabhost 来显示片段也可以正常工作，但是当尝试包含相同的 CategoryStarredFragment （在 WelcomeActivity 中工作正常）时，我得到了一个异常

```
04-11 15:32:28.197: E/AndroidRuntime(16124): Caused by: java.lang.ClassNotFoundException: android.view.fragment in loader dalvik.system.PathClassLoader[/data/app/com.package.apk] 
```

我在想这是产生问题的tabhost的实现

这里是`MainActivity.java`

```
public class MainActivity extends FragmentActivity implements OnTabChangeListener {

    private TabHost mTabHost;

    private SparseArray<Class<?>> mSparseFragments = new SparseArray<Class<?>>(){{
        put(R.id.tab_home, HomeFragment.class);
                // other tabs
        put(R.id.tab_settings, SettingsFragment.class);
    }};

    private SparseArray<String> mSparseTags = new SparseArray<String>(){{
        put(R.id.tab_home, "home");
                // other tabs
        put(R.id.tab_settings, "settings");
    }};

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        initTabs();         
    }

    private void initTabs() {
        mTabHost = (TabHost)findViewById(android.R.id.tabhost);
        mTabHost.setup();
        mTabHost.setOnTabChangedListener(this);

        mTabHost.addTab(buildTabSpec("home", R.string.title_tab_home, R.layout.regular_home_fragment));
                // other tabs
        mTabHost.addTab(buildTabSpec("settings", R.string.title_tab_settings, R.layout.regular_settings_fragment));
    }
    @Override
    public void onTabChanged(String tabId) {        
        Log.i(TAG, "Tab changed to: " + tabId);

        final FragmentManager fm = getSupportFragmentManager();
        final FragmentTransaction ft = fm.beginTransaction();
        Fragment fragment;
        int current = 0;

        for (int i = R.id.tab_home; i <= R.id.tab_settings; i++) {              
            if(mSparseTags.get(i).equals(tabId)) {
                current = i;
            } else if(null != (fragment = fm.findFragmentByTag(mSparseTags.get(i)))) {
                ft.detach(fragment);
            }
        }

        if(null == (fragment = fm.findFragmentByTag(tabId))) {
            try {
                ft.add(current, (Fragment) mSparseFragments.get(current).newInstance(), tabId);             
            } catch (InstantiationException e) {        
                e.printStackTrace();
            } catch (IllegalAccessException e) {        
                e.printStackTrace();
            }
        } else {
            ft.attach(fragment);
        }

        ft.commit();
    }

    private TabSpec buildTabSpec(String tag, int labelId, int viewId) {     
        final View indicator = LayoutInflater.from(getApplicationContext())
                .inflate(R.layout.tab, (ViewGroup) findViewById(android.R.id.tabs), false);
        ((TextView)indicator.findViewById(R.id.text)).setText(labelId);
        return mTabHost.newTabSpec(tag)
                .setIndicator(indicator)
                .setContent(new TabContent(getApplicationContext(), viewId));
    }

    public class TabContent implements TabContentFactory {

        private Context mContext;
        private int mViewId;

        public TabContent(Context context, int viewId) {
            mContext = context;
            mViewId = viewId;
        }

        @Override
        public View createTabContent(String tag) {
            Log.i(TAG, "Inflation tab content " + tag);
            View view = LayoutInflater.from(mContext).inflate(mViewId, null);           
            return view;
        }

    }   

} 
```

这是 MainActivity 布局

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    tools:context=".MainActivity" >

    <TabHost
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:id="@android:id/tabhost">

        <LinearLayout
            android:orientation="vertical"
            android:layout_height="fill_parent"
            android:layout_width="fill_parent">

            <TabWidget 
                android:id="@android:id/tabs"            
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:background="@drawable/ab_stacked_solid_mainbar">            
            </TabWidget>

            <FrameLayout
                android:id="@android:id/tabcontent"
                android:layout_height="fill_parent"
                android:layout_width="fill_parent">             
                <FrameLayout
                    android:id="@+id/tab_home"
                    android:layout_height="fill_parent"
                    android:layout_width="fill_parent"/>
                <!-- Other tabs --> 
                <FrameLayout 
                    android:id="@+id/tab_settings"
                    android:layout_height="fill_parent"
                    android:layout_width="fill_parent"/>            
             </FrameLayout>

        </LinearLayout>
    </TabHost>
</RelativeLayout> 
```

这是布局第一个选项卡

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"    
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >    

    <TextView
        android:id="@+id/title"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center_horizontal"
        android:text="@string/title_tab_home"
        android:textSize="64sp"/>

    <fragment
            android:id="@+id/category_list"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_margin="5dp"
            android:layout_marginTop="18dp"
            class="com.package.CategoryStarredFragment" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-11T20:47:36.870

~~您正在尝试`<fragment>`在 API 级别 10 或更低的设备上`Activity`从`FragmentActivity`.~~

实际上，在这种情况下，它有点微妙。您正在尝试使用`LayoutInflater.from()`. 这很好，但是您不能在 API 级别 10 或更低的设备上使用它来解释其中包含`<fragment>`标签的布局资源文件，因为`LayoutInflater`从那时起，您不知道`<fragment>`标签是什么。您需要使用 ,`LayoutInflater`返回的实例来解释标签。`getLayoutInflater()``FragmentActivity``<fragment>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-15T14:55:43.743

我在一个我一直在清理的项目中遇到了同样的问题（你知道，有时你会开始向应用程序添加想法，但其中很多都无法生存到最后，最好擦掉油脂以避免功能和安全问题......如果没有眼前的森林，您将能够看得更清楚）。

看了几个小时后，我在另一个地方修复了它并回到了原来的状态。事实上，解决方案非常简单（和往常一样，它与干净的编码实践有关）。

(1) 100% 确定您正在导入正确的 FragmentActivity：

```
import android.support.v4.app.FragmentActivity; 
```

(2) 检查您的 Activity 是否从 FragmentActivity 扩展

(3) 检查你的 Fragment 是否也从正确的 android.support.v4.app 扩展... Fragment

(4) 就是这样......常规代码必须工作

```
@Override
public View onCreateView(
    LayoutInflater inflater, 
    ViewGroup container,
    Bundle savedInstanceState
) {

    View vFragmentView = inflater.inflate(R.layout.my_fragment, container);
    return vFragmentView;
}

// other stuff 
```

使用三星 Galaxy Fit (2.3.4) 和 Kindle Fire HD (4.0) 进行测试。

# c++ - 如何从成员函数中获取“简单”函数指针

> ID：15958553
> 
> 赞同：0
> 
> 时间：2013-04-11T20:45:55.900
> 
> 标签：c++, type-conversion, function-pointers, member, c++builder-xe

我遇到了函数指针的问题，我在网上找到的任何东西都没有帮助我解决这个问题。

我有一个来自 C API 的函数，它采用 void 函数的指针：

`extern int APIFunction(int, void (*func)(int));`

我有一个类，其中包含我在调用 API 函数时想要放置的函数。

```
class MyClass
{
   public:
      void myFunction(int status, otherAPi arguments...);
}; 
```

然后，我创建了一个指向我的成员函数的指针并创建了我的类的一个新实例

```
typedef  void (MyClass::*MyClassFunctionPointer)(int stat, otherAPi arguments...);
MyClassFunctionPointer fctPointer= &MyClass::myFunction; 
LicenseSecurity instance; 
```

当我尝试使用我创建的函数指针调用我的 APi 函数时出现错误：

```
int stat = APIFunction(5, fctPointer ); // -> error 1
int stat = APIFunction(5, instance.*fctPointer ); // -> error 2 
```

在第一种和第二种情况下我分别得到了错误：

```
E2034 Impossible to convert 'void (MyClass::*)(int, otherAPITypes...)' into 'void (*) (int, otherAPITypes...)'
E2342 Bad type correspondence in the parameter 'func' ('void (*)(int, otherAPITypes...)' desired, 'void(int, otherAPITypes...)' obtained) 
```

我无权访问 API 函数，因此无法修改它。总结问题：如何从我的类的成员函数中获取“简单”的 C 函数指针以放入函数的参数？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T20:48:13.783

不幸的是，你不能。对不起。

理想情况下，您的 API 将接受`std::function`允许您包装自由函数或成员函数的内容。但是如果你不能修改API，那么你别无选择，只能提供一个免费的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T20:50:02.107

您无法获得指向非静态成员函数的“简单”函数指针，因为该函数在调用时需要 this 指针。如果您要创建这样的函数指针，那么当调用该函数时，将没有 this 指针可供它引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T05:17:35.600

您可以将回调声明为独立函数或类的**静态**方法。棘手的部分是访问回调中的类实例指针。

理想情况下，设计良好的 API 允许您为回调指定用户定义的值。这使您可以轻松地传入一个类实例并直接在回调中访问它。但听起来您没有使用这样的 API，因此您需要使用解决方法。

如果您一次只有一个与 API 一起使用的类实例，您可以将实例指针存储到全局变量中，并让回调使用全局变量来访问该实例。

但是，如果您同时使用多个类实例，您正在寻找一种类似于 VCL 的`MakeObjectInstance()`函数的 thunking 解决方案，它允许`TWndMethod`将 -signatured 类方法用作 Win32 窗口过程回调。本质上，一块可执行内存是动态分配的，存根汇编代码被写入块中，实例指针和类方法指针也存储在块中。然后将该块传递给 API，就好像它是一个函数指针一样。当 API 调用“函数”时，存根代码被执行，它必须操纵调用堆栈和 CPU 寄存器来调用存储的类方法指针，并将存储的实例指针作为其隐藏`this`参数，同时保留其他参数的语义，调用堆栈，函数结果等。

C++ 中没有任何东西能真正实现原生的那种 thunking。手动实现并不难，但也不是微不足道的（查看`MakeObjectInstance()`VCL 的 Classes.pas 源文件中的源代码）。最困难的部分是提出与特定类方法签名的语义相匹配的必要存根代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T20:58:08.887

不幸的是，使用这样的古老 C API，您没有任何方法可以做到这一点。

您要做的是创建一个静态或非成员函数来接受回调，然后找出要调用该成员的对象的哪个实例。一些 C API 允许将用户数据传递给回调，在这种情况下，您可以使用它来存储有`this`问题的指针。如果这不是一个选项，您可以使用全局或单例对象，并且只允许注册一个这样的回调。

# xml - XML 结构的树表示 - 如何在递归中测试父母/前面的兄弟姐妹？

> ID：15958557
> 
> 赞同：0
> 
> 时间：2013-04-11T20:46:17.577
> 
> 标签：xml, xslt

我试图表示像目录树这样的 XML 结构。它是一个导航编辑器，因此元素名称为链接（组）和链接（组中的项目）。所以我有不同的图像：i-node、l-node、t-node 和 e-node 图像（其中 e 为空，其他为虚线）。HTML 应该是一个标准表格。每个链接都在其新的 tr 中。

到目前为止，一切都很好...

![到目前为止，一切都很好](https://dl.dropboxusercontent.com/u/4866968/Screen%20Shot%202013-04-11%20at%201.06.41%20PM.png)

但：

![这是dealio](https://dl.dropboxusercontent.com/u/4866968/Screen%20Shot%202013-04-11%20at%201.07.02%20PM.png)

在第一种情况下，图像符合预期，但在第二种情况下，您会看到我卡在哪里：一旦有 L 节点（该级别上的最后一个元素），所有后续链接都应显示该级别的空节点图像- 但是现在有一个 I 节点。所以我需要一些关于如何实现这一目标的建议。我是否需要检查 XML 的前面的兄弟姐妹？或者我可以通过将另一个参数传递给递归调用来做到这一点吗？任何帮助表示赞赏......我宁愿正确地做，也不愿开始用 JS 修复 HTML；）

XML：

```
<navigation>
  <links>
    <link>
       <text>Google</text>
       <links>
         <link>
           <text>Yahoo</text>
         </link>
         <link>
           <text>Amazon</text>
         </link>
       </links>
    </link>
    <link />
    <link />
    <link />
    ...
  </links>
</navigation> 
```

XSL：

```
<xsl:template match="navigation">
<table>
  <xsl:for-each select="links">
      <xsl:apply-templates select=".">
          <xsl:with-param name="level" select="'1'" />
          <xsl:with-param name="children" select="count(*[links/link])" />
      </xsl:apply-templates>
  </xsl:for-each>
</table>
</xsl:template>

<xsl:template match="links">
    <xsl:param name="level" />
    <xsl:param name="children" />
    <xsl:variable name="count" select="count(link)" />
    <xsl:for-each select="link">
        <tr>
            <xsl:attribute name="class">level<xsl:value-of select="$level" /></xsl:attribute>
            <td>
                <xsl:call-template name="nodeimage.loop">
                    <xsl:with-param name="level" select="$level"></xsl:with-param>
                    <xsl:with-param name="position" select="position()"></xsl:with-param>
                    <xsl:with-param name="count" select="$count" />
                </xsl:call-template>
                <strong><xsl:value-of select="text" /></strong>
            </td>
        </tr>
        <!-- if a link has children... -->
        <xsl:if test="*[link]">
            <xsl:apply-templates select="links">
                <xsl:with-param name="level" select="$level + 1"/>
                <xsl:with-param name="children" select="count(*[link])"/>
            </xsl:apply-templates>
        </xsl:if>
    </xsl:for-each>
</xsl:template>

<xsl:template name="nodeimage.loop">
    <xsl:param name="level"/>
    <xsl:param name="position"/>
    <xsl:param name="count"/>

    <!-- debug this 
    <xsl:value-of select="$position" />of<xsl:value-of select="$count" />, level<xsl:value-of select="$level" />
    -->
    <xsl:if test="$level = 1">
        <xsl:choose>
            <xsl:when test="$position = $count"><!-- last one on same level -->
                <img class="textmiddle" src="/images/backend/l-node.png" />
            </xsl:when>
            <xsl:otherwise>
                <img class="textmiddle" src="/images/backend/t-node.png" />
            </xsl:otherwise>
        </xsl:choose>
    </xsl:if>
    <xsl:if test="$level &gt; 1">
        <img class="textmiddle" src="/images/backend/i-node.png" />
    </xsl:if>
    <xsl:if test="$level &gt; 1">
        <xsl:call-template name="nodeimage.loop">
            <xsl:with-param name="level">
                <xsl:value-of select="$level - 1"/>
            </xsl:with-param>
            <xsl:with-param name="position">
                <xsl:value-of select="$position"/>
            </xsl:with-param>
            <xsl:with-param name="count">
                <xsl:value-of select="$count"/>
            </xsl:with-param>
        </xsl:call-template>
    </xsl:if>
</xsl:template> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T23:28:40.777

这些模板（为 XSLT 1.0 编写）应该能够呈现您的树结构 - 它们不使用递归，而是使用匹配模板来处理一般结构，然后是图像的模版模板（通过处理上下文节点）：

```
<xsl:template match="navigation">
    <table>
        <thead>
            <xsl:call-template name="headers" />
        </thead>
        <tbody>
            <xsl:apply-templates select="links" />
        </tbody>
    </table>
</xsl:template>

<xsl:template match="link">
    <xsl:variable name="chain" select="ancestor-or-self::link" />
    <tr class="level{count($chain)}">
        <td>
            <xsl:apply-templates select="$chain" mode="tracks">
                <xsl:with-param name="context" select="." />
            </xsl:apply-templates>
            <strong><xsl:value-of select="text" /></strong>
        </td>
        <td><button>Append new link</button></td>
        <td><xsl:value-of select="url" /></td>
    </tr>
    <xsl:apply-templates select="links" />
</xsl:template>

<xsl:template match="link" mode="tracks">
    <xsl:param name="context" />
    <xsl:variable name="isSame" select="generate-id(.) = generate-id($context)" />
    <xsl:variable name="pos" select="count(preceding-sibling::link)" />
    <xsl:variable name="isLast" select="not(following-sibling::link)" />
    <xsl:variable name="type">
        <xsl:choose>
        <xsl:when test="$isSame">
            <xsl:if test="(following::link or links/link) and not($isLast)">t</xsl:if>
            <xsl:if test="$isLast">l</xsl:if>
        </xsl:when>
        <xsl:when test="$isLast and links/link">e</xsl:when>
        <xsl:when test="following::link and links/link">i</xsl:when>
        <xsl:when test="not(following::link)">e</xsl:when>
    </xsl:choose>
    </xsl:variable>
    <xsl:call-template name="node-type">
        <xsl:with-param name="type" select="$type" />
    </xsl:call-template>
</xsl:template>

<xsl:template name="node-type">
    <xsl:param name="type" select="'t'" />
    <img class="textmiddle" src="/images/backend/{$type}-node.png" />
</xsl:template>

<xsl:template name="headers">
    <tr>
        <th>Link</th>
        <th>&#160;</th>
        <th>URL</th>
    </tr>
</xsl:template> 
```

（请注意，如果没有模板匹配，则将模板应用于`links`节点将使用内置模板随后处理节点。）`link``links`

# c# - 在 xslt:select 中检查 xslt:variable

> ID：15958562
> 
> 赞同：1
> 
> 时间：2013-04-11T20:46:37.493
> 
> 标签：c#, xslt

有没有办法可以在 select 属性中检查我的变量并调用两个用户函数之一`TestFx`或`TestFx2`. 现在我知道我可以使用`xsl:if`or `xsl:choose`，但只是想知道是否还有其他方法。

例如`select="$hasTextArea=true ? TestFx : TestFx2"`

```
<xsl:variable name="hasTextArea">true</xsl:variable>

<xsl:template name="break">
    <xsl:param name="text" select="."/>
    <xsl:value-of disable-output-escaping="yes" select="user:TestFx($text)" />
</xsl:template> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T21:04:18.903

XSLT 1.0 没有三元运算符。只需使用`<xsl:if>`or`<xsl:choose>`并将您的时间花在比试图找到一个聪明的 hack 更有价值的事情上。（如果你真的必须这样做，你可以这样做。[）](https://stackoverflow.com/questions/971067/is-there-an-if-then-else-statement-in-xpath)

XSLT 2.0（即 XPath 2.0）有这个：

```
<xsl:value-of select="
  if ($hasTextArea = 'true') 
    then user:TestFx($text) 
    else user:TestFx2($text)
" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T02:56:42.890

> 有没有办法可以在 select 属性中检查我的变量并调用两个用户函数之一`TestFx`或`TestFx2`. 现在我知道我可以使用 `xsl:if`or `xsl:choose`，但只是想知道是否还有其他方法。

**这是一个完整的演示如何做到这一点。这说明了如何在 XSLT 1.0 和 2.0 中实现高阶函数的基本原理——在[FXSL 库中用于使用 XSLT 进行函数式编程](http://fxsl.sf.net)**。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:msxsl="urn:schemas-microsoft-com:xslt" xmlns:user="my:user" xmlns:my="my:my">
 <xsl:output method="text"/>

 <my:functions>
   <my:F1/>
   <my:F2/>
 </my:functions>

 <xsl:variable name="vMyFuncs" select="document('')/*/my:functions/*"/>

 <xsl:param name="phasTextArea" select="true()"/>
 <xsl:param name="pText" select="'Some Text'"/>

 <xsl:template match="/*">
    <xsl:variable name="vFunc" select=
      "$vMyFuncs[1][$phasTextArea] | $vMyFuncs[2][not($phasTextArea)]"/>

  <xsl:apply-templates select="$vFunc"/>
 </xsl:template>

 <xsl:template match="my:F1">
  <xsl:value-of select="user:TestFx($pText)"/>
 </xsl:template>

 <xsl:template match="my:F2">
  <xsl:value-of select="user:TestFx2($pText)"/>
 </xsl:template>

 <msxsl:script language = "c#"  implements-prefix = "user">
  public string TestFx(string text)
  {
    return "Text is: " + "'" +text + "'";
  }

  public string TestFx2(string text)
  {
    return string.Format("Text length is: {0}", text.Length);
  }
</msxsl:script>
</xsl:stylesheet> 
```

**当将此转换应用于任何 XML 文档（未使用）时，将产生所需的正确结果（`user:TestFx()`称为）**：

```
Text is: 'Some Text' 
```

**如果我们通过设置`$phasTextArea`to 来修改上面的代码`false()`，结果现在显示这个时间`user:TestFx2()`已经被调用了**：

```
Text length is: 9 
```

**而且，正如所承诺的，转换没有明确的 XSLT 条件指令**（`xsl:choose`或`xsl:if`）。

**此外，我们不计算字符来使用`substring()`.**

# css - 你应该使用 rgba(0, 0, 0, 0) 还是 rgba(255, 255, 255, 0) 在 CSS 中实现透明度？

> ID：15958565
> 
> 赞同：37
> 
> 时间：2013-04-11T20:46:41.200
> 
> 标签：css, colors

你应该在 CSS 中使用`rgba(0, 0, 0, 0)`还是为了透明度？`rgba(255, 255, 255, 0)`

各自的优缺点是什么？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2013-04-11T20:49:47.923

该`rgba()`函数的最后一个参数是“alpha”或“opacity”参数。如果将其设置为`0`“完全透明”，则前三个参数（`red`、`green`和`blue`通道）无关紧要，因为无论如何您都看不到颜色。

考虑到这一点，我会选择`rgba(0, 0, 0, 0)`因为：

1.  打字少了，
2.  它会在您的 CSS 文件中保留一些额外的字节，并且
3.  如果 alpha 值更改为不受欢迎的值，您将看到一个明显的问题。

您*可以*完全避免使用该`rgba`模型并改用`transparent`关键字，根据[w3.org](http://www.w3.org/TR/css3-color/#transparent)，它相当于“透明黑色”并且应该计算为`rgba(0, 0, 0, 0)`. 例如：

```
h1 {
    background-color: transparent;
} 
```

这为您节省了另外几个字节，而您使用透明度的意图是显而易见的（以防不熟悉 RGBA）。

从 CSS3 开始，您可以将`transparent`关键字用于任何接受颜色的 CSS 属性。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-11T21:31:14.233

有两种使用 alpha 存储颜色的方法。第一个与您看到的完全一样，每个组件都保持原样。第二种是使用*预乘 alpha*，其中颜色值在转换为 0.0-1.0 范围后乘以 alpha；这样做是为了使[合成](http://en.wikipedia.org/wiki/Alpha_compositing)更容易。通常，您不应该注意或关心任何特定引擎实现哪种方式，但在某些极端情况下您可能会这样做，例如，如果您试图增加颜色的不透明度。如果您使用`rgba(0, 0, 0, 0)`，则不太可能看到两种方法之间的差异。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-05-15T15:54:56.183

当你使用 rgba(255,255,255, **a ) 时有一个小的差异，背景颜色随着 '** **a** ' 的值从 0.0 增加到 1.0变得越来越亮。而当使用 rgba(0,0,0, **a ) 时，背景颜色会随着 '** **a** ' 的值从 0.0 增加到 1.0变得越来越暗。话虽如此，很明显 (255,255,255,0) 和 (0,0,0,0) 都使背景透明。(255,255,255,1) 将使背景完全变白，而 (0,0,0,1) 将使背景完全变黑。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-06-23T10:09:45.577

我建议使用`rgba(255,255,255,0)`，因为损坏的（最新）Safari 认为，如果您正在使用`transparent`或`rgba(0,0,0,0)`在线性渐变中，您的真正意思是`gray`，有关更多信息，请前往 -[在 Safari 中使用透明颜色会发生什么？](https://stackoverflow.com/questions/46309641/what-happens-in-safari-with-the-transparent-color)

# matlab - factorial.m 函数出错，得到非负矩阵错误

> ID：15958568
> 
> 赞同：0
> 
> 时间：2013-04-11T20:46:50.830
> 
> 标签：matlab

我有以下向量，N=10 vec=-N:1:N

并且在运行命令时

`factorial((N+vec)/2))`

我收到错误

> ？？？在 17 N 处使用 ==> 阶乘的错误必须是非负整数矩阵。

当 "(N+vec)/2" 只是

```
ans =
     0    0.5000    1.0000    1.5000    2.0000    2.5000    3.0000    3.5000    4.0000
4.5000    5.0000    5.5000    6.0000    6.5000    7.0000    7.5000    8.0000    8.5000
9.0000    9.5000   10.0000 
```

没有负数...

有什么技巧可以绕过它？

谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T21:00:09.267

正如 wakjah 在他的评论中所说，您的问题是，当您在 perform 中除以 2 时`(N+vec)/2`，您得到的不是整数。你可以做类似的事情

```
factorial(round((N+vec)/2)) 
```

将您的输入值四舍五入`factorial`到最接近的整数值。其他舍入选择是`floor`向下舍入和`ceil`向上舍入

# ios - 带有自定义方案的 AsanaConnect oAuth 重定向 URL

> ID：15958570
> 
> 赞同：4
> 
> 时间：2013-04-11T20:46:53.117
> 
> 标签：ios, asana

用于注册应用程序的帐户设置页面只接受有效的 http:// url 方案。我们需要一个自定义 url 方案才能重定向回我们的 iOS 应用程序。目前有没有办法提供自定义 url 方案，或者如果没有，是否可以从您这边允许自定义 URL 方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:56:46.277

（我在 Asana 工作。）我们同意这些会很有用。目前没有办法使用非 http 方案，但我们会尽快考虑添加它们。敬请关注！

# php - 在 PHP 中从 div 转换为表格或解析 PDF

> ID：15958571
> 
> 赞同：2
> 
> 时间：2013-04-11T20:46:53.710
> 
> 标签：php, html, css

我正在开发一个 WebApp，在其中我将发票从 PDF 转换为 HTML，然后解析发票行。

我的`div`主窗口中有一个显示内容的窗口。

但是当我显示发票中的内容时`div`，所有内容都出现重叠。

转换后的发票中没有表格，只有`divs`绝对定位。至少用这种方法我不能用其他任何方式，因为这就是转换器的工作方式。

因此，作为一种解决方案，我正在从“div 到 table”转换，试图根据相应 div 的 top 参数来决定行是否发生变化。

但是，除了发票数据之外，我还有发票抬头。我很难确定桌子是否相同。

但到目前为止，我认为解决方案是通过制作 3 张表格，一张用于公司徽标，一张用于表头，一张用于数据。

但我需要所有这些表格出现在正确的位置和正确的尺寸。

目前，我不允许粘贴发票示例，因为我处于早期阶段（接近算法阶段）。我认为我的代码和发票的任何示例都不能帮助任何人更好地了解情况。

但我保证很快就会用例子来更新它。

作为替代解决方案，我可以自己解析 PDF，但到目前为止我还没有找到方法。

我正在使用 PHP 制作 WebApp 并使用verypdf pdf2html 进行转换。

我知道只有这么少的信息，很难得到帮助。

欢迎任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:45:33.243

如何尝试治愈重叠本身。例如，您可以在将 PDF 解析为 DIV 后从 DIV 中删除所有样式信息。然后，您可以应用自己的样式。了解所有发票是否采用相同的格式/排列可能很有用。

# matlab - 使用 nlinfit 的 Matlab 错误

> ID：15958573
> 
> 赞同：0
> 
> 时间：2013-04-11T20:46:59.717
> 
> 标签：matlab

我试图获得以下方程的非线性最小二乘拟合：

> y = 1 / (1 + a (ln(duration)^b))

我希望适合它的数据如下所示，我尝试使用 nlinfit 函数来解决它......

```
x = [1.99000000000000;3.01000000000000;4.01000000000000;5.09000000000000;5.77000000000000;6.85000000000000;7.72000000000000;8.87000000000000;9.56000000000000;];
y = [1;1;0.800000000000000;0.730000000000000;0.470000000000000;0.230000000000000;0.270000000000000;0.100000000000000;0.100000000000000;];

plot(x,y,'o','linestyle','none');

p(1) = 1;
p(2) = 1;

fun = @(p,x) 1 / (1 + p(1).*(log(x).^p(2)));

myfit = nlinfit(x,y,fun,p); 
```

我的问题似乎是为 nlinfit 函数定义第四个必需的输入（上例中的“p”）。该文档没有明确解释此工作需要什么，并且我无法根据收到的错误消息解决问题：

> ？？？在 128 MODELFUN 使用 ==> nlinfit 时出错，应返回与 Y 长度相同的拟合值向量。
> 
> ==> 在 14 处拟合时出错 myfit = nlinfit(x,y,fun,p);

我尝试将 p 设置为 repmat(1,9,1) 和 repmat(1,1,9)，但这些似乎都不能解决我的问题。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T21:13:05.903

我相信您忘记了在函数中按元素删除的点：

```
fun = @(p,x) 1 ./ (1 + p(1).*(log(x).^p(2)));
               ^ 
```

# c++ - 错误：“。”之前的预期主表达式 令牌

> ID：15958577
> 
> 赞同：1
> 
> 时间：2013-04-11T20:47:24.467
> 
> 标签：c++

好的，所以我在使用这个我应该为学校做的 C++ 程序时遇到了问题，我需要一些帮助来解决我不断遇到的错误。我有基础知识，但我需要关于类和对象的帮助。

```
#include <cstdlib>
#include <iostream>
#include <string>
using namespace std;

class BankAccount {
private:
    double accountBalance;
    string name;        
public:
    BankAccount();
    BankAccount(string,double);
    double deposit(double);
    double withdraw(double);
    void checkBalance();                    
};

BankAccount::BankAccount()
{
    accountBalance=0;
    name="";
}

BankAccount::BankAccount(string name,double money)
{
    name=name;
    accountBalance=accountBalance;                                
}

double BankAccount::deposit(double money)
{
    accountBalance+=money;
    return accountBalance;
}

double BankAccount::withdraw(double money)
{
    accountBalance-=money;
    return accountBalance;
};            

void BankAccount::checkBalance()
{
    cout<<"The balance on the account is $"<<accountBalance<<"!!"<<endl;     
};                                                                                                             
int main(int argc, char *argv[])
{
    int c;
    double m;
    string n;
    cout<<"==================Bank======="<<endl;
    cout<<"[1] Open a new Bank Account |"<<endl;
    cout<<"[2] Deposit money           |"<<endl;
    cout<<"[3] Withdraw money          |"<<endl;
    cout<<"[4] Check balance           |"<<endl;
    cout<<"============================="<<endl;
    cout<<endl;
    cout<<"What would you like to do :";
    cin>>c;

    switch (c){
    case 1:
        cout<<"Ok I see you want to open a new Bank Account"<<endl;
        cout<<"But first answer a few questions:"<<endl;
        cout<<"What is your name? ";
        cin>>n;
        cout<<"Next tell me the amount of money you wish to open your account with: ";
        cin>>m;
        BankAccount::BankAccount(n,m);
        cout<<"OK all set, "<<n<<"!!"<<endl;
        break;
    case 2:
        cout<<"How much money would you like to deposit? : ";
        cin>>m;
        BankAccount.deposit(m);
        break;
    case 3:
        cout<<"How much money would you like to withdraw? : ";
        cin>>m;
        BankAccount.withdraw(m);
        break;
    case 4:
        cout<<"OK I'll check your balance"<<endl;
        BankAccount.checkBalance();               
        break;
    }
    system("PAUSE");
    return EXIT_SUCCESS;
} 
```

因此，如果您能帮助我，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T20:49:33.223

`BankAccount`是类型名称，而不是变量名称。您不能在类型上调用实例方法。

创建一个类型为 的变量`BankAccount`，为其分配一个实例，然后使用您已有的相同符号调用实例上的方法：

```
BankAccount acct;
switch (c){
case 1:
     cout<<"Ok I see you want to open a new Bank Account"<<endl;
     cout<<"But first answer a few questions:"<<endl;
     cout<<"What is your name? ";
     cin>>n;
     cout<<"Next tell me the amount of money you wish to open your account with: ";
     cin>>m;
     acct = BankAccount(n,m);
     cout<<"OK all set, "<<n<<"!!"<<endl;
     break;
case 2:
     cout<<"How much money would you like to deposit? : ";
     cin>>m;
     acct.deposit(m);
     break;
case 3:
     cout<<"How much money would you like to withdraw? : ";
     cin>>m;
     acct.withdraw(m);
     break;
case 4:
     cout<<"OK I'll check your balance"<<endl;
     acct.checkBalance();               
     break;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T20:52:43.693

`BankAccount`是您定义的类，您不能使用`::`运算符访问`non-static`该类的成员。在这种情况下，您需要首先创建 的对象`BankAccount`，然后使用`dot operator`来访问`deposit`和其他成员函数，因为这些`non-static`成员函数与类的实例相关联。

如果`deposit`和其他相关函数是`static`成员函数，则可以这样做。

# css - 将两个宽度可变的css div居中在一个固定的div中

> ID：15958591
> 
> 赞同：0
> 
> 时间：2013-04-11T20:48:35.570
> 
> 标签：css, html, dynamic, width, center

我从几个小时开始就在尝试，没有任何帮助。很简单：我有两个可变（动态）宽度的 div。两者都应该并排放置在具有固定宽度的包装 div 中。我尝试的一切：我看到 leftDiv 和 rightDiv 要么向左浮动要么居中，但 div2 在 div1 下......非常感谢。

```
<div class='wrapper'>
   <div class='innerWrapper'>
      <div class='leftDiv'>
      </div>
      <div class='rightDiv'>
      </div>
   </div>
</div> 
```

什么是正确的CSS？问题是，自动为 innerWrapper 提供两个 div 的宽度（leftDiv 和 rightDiv ...）是行不通的......

我试过了：

```
.wrapper {
    width: 600px;
    text-align: center;
}

.innerWrapper {
    width: auto;
}

.leftDiv {
    display: inline-block;
}

.rightDiv {
    display: inline-block;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T20:52:18.623

`display: inline-block;`在那些 div 上使用..

[http://jsfiddle.net/RK6R4/](http://jsfiddle.net/RK6R4/)

# visual-studio-2010 - VS 2010 显示错误但运行程序

> ID：15958593
> 
> 赞同：0
> 
> 时间：2013-04-11T20:48:57.733
> 
> 标签：visual-studio-2010, visual-c++, opencv

当我在 opencv c++ Visual Studio 2010 中运行我的程序时，程序运行但我显示以下错误，这个错误想要进一步安装什么？

```
'WK01.exe': Loaded 'C:\Users\Sheikh\Documents\Visual Studio 2010\Projects\WK01\Debug\WK01.exe', Symbols loaded.
'WK01.exe': Loaded 'C:\Windows\System32\ntdll.dll', Cannot find or open the PDB file
'WK01.exe': Loaded 'C:\Program Files\Alwil Software\Avast5\snxhk.dll', Cannot find or open the PDB file
'WK01.exe': Loaded 'C:\Windows\System32\kernel32.dll', Cannot find or open the PDB file
'WK01.exe': Loaded 'C:\Windows\System32\KernelBase.dll', Cannot find or open the PDB file
'WK01.exe': Loaded 'C:\Windows\System32\opencv_core244d.dll', Cannot find or open the PDB file
'WK01.exe': Loaded 'C:\Windows\System32\msvcp100d.dll', Symbols loaded.
'WK01.exe': Loaded 'C:\Windows\System32\msvcr100d.dll', Symbols loaded.
'WK01.exe': Loaded 'C:\Windows\System32\opencv_highgui244d.dll', Cannot find or open the PDB file
'WK01.exe': Loaded 'C:\Windows\System32\user32.dll', Cannot find or open the PDB file
'WK01.exe': Loaded 'C:\Windows\System32\gdi32.dll', Cannot find or open the PDB file
'WK01.exe': Loaded 'C:\Windows\System32\lpk.dll', Cannot find or open the PDB file
'WK01.exe': Loaded 'C:\Windows\System32\usp10.dll', Cannot find or open the PDB file
'WK01.exe': Loaded 'C:\Windows\System32\msvcrt.dll', Cannot find or open the PDB file
'WK01.exe': Loaded 'C:\Windows\System32\ole32.dll', Cannot find or open the PDB file
'WK01.exe': Loaded 'C:\Windows\System32\rpcrt4.dll', Cannot find or open the PDB file
'WK01.exe': Loaded 'C:\Windows\System32\oleaut32.dll', Cannot find or open the PDB file
'WK01.exe': Loaded 'C:\Windows\System32\advapi32.dll', Cannot find or open the PDB file
'WK01.exe': Loaded 'C:\Windows\System32\sechost.dll', Cannot find or open the PDB file
'WK01.exe': Loaded 'C:\Windows\winsxs\x86_microsoft.windows.common-controls_6595b64144ccf1df_5.82.7601.17514_none_ec83dffa859149af\comctl32.dll', Cannot find or open the PDB file
'WK01.exe': Loaded 'C:\Windows\System32\avifil32.dll', Cannot find or open the PDB file
'WK01.exe': Loaded 'C:\Windows\System32\winmm.dll', Cannot find or open the PDB file
'WK01.exe': Loaded 'C:\Windows\System32\msacm32.dll', Cannot find or open the PDB file
'WK01.exe': Loaded 'C:\Windows\System32\msvfw32.dll', Cannot find or open the PDB file
'WK01.exe': Loaded 'C:\Windows\System32\shell32.dll', Cannot find or open the PDB file
'WK01.exe': Loaded 'C:\Windows\System32\shlwapi.dll', Cannot find or open the PDB file
'WK01.exe': Loaded 'C:\Windows\System32\avicap32.dll', Cannot find or open the PDB file
'WK01.exe': Loaded 'C:\Windows\System32\version.dll', Cannot find or open the PDB file
'WK01.exe': Loaded 'C:\Windows\System32\imm32.dll', Cannot find or open the PDB file
'WK01.exe': Loaded 'C:\Windows\System32\msctf.dll', Cannot find or open the PDB file
'WK01.exe': Loaded 'C:\Windows\System32\opencv_ffmpeg244.dll', Binary was not built with debug information.
'WK01.exe': Loaded 'C:\Windows\System32\wsock32.dll', Cannot find or open the PDB file
'WK01.exe': Loaded 'C:\Windows\System32\ws2_32.dll', Cannot find or open the PDB file
'WK01.exe': Loaded 'C:\Windows\System32\nsi.dll', Cannot find or open the PDB file
'WK01.exe': Loaded 'C:\Windows\System32\cryptbase.dll', Cannot find or open the PDB file
'WK01.exe': Loaded 'C:\Windows\System32\uxtheme.dll', Cannot find or open the PDB file
'WK01.exe': Loaded 'C:\Windows\System32\dwmapi.dll', Cannot find or open the PDB file
The program '[4156] WK01.exe: Native' has exited with code 0 (0x0). 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T05:10:10.080

这些不是错误，它们只是来自调试器的信息性消息。

当程序在 Debug 模式下（也可以选择在 Release 模式下）编译时，`.pdb`还会生成一个文件，该文件将源代码中的函数名称和变量名称与编译代码中的相应位置相关联。在您逐步执行程序时，Visual Studio 使用此信息向您显示源代码和变量值。

这里发生的一切是您的程序正在调试器中运行并且正在加载系统 DLL 和其他没有`.pdb`文件的模块，因此它告诉您它将无法显示这些模块的等效源代码。

概括。这是正常的，不是错误。

# mysql - libmysqlclient.a 无处可寻

> ID：15958612
> 
> 赞同：5
> 
> 时间：2013-04-11T20:49:57.560
> 
> 标签：mysql, g++

在 Amazon EC2 上（`uname -r`给出“3.4.37-40.44.amzn1.x86_64”，我听说它基于 Cent OS）我尝试安装：

```
yum install mysql
yum install mysql-devel 
```

乃至

```
yum install mysql-libs 
```

（由于[这个线程](http://opensips-open-sip-server.1449251.n2.nabble.com/libmysqlclient-dev-for-CentOS-td7580351.html)。）

我正在尝试编译一个程序并将 MySQL 库链接到它。这在我的 Mac 上运行**良好**，（但 Mac*有* `libmysqlclient.a`）。 `libmysqlclient.a`在这台机器上绝对找不到。它只有`libmysqlclient.so`，还有很多版本。

```
$ sudo find / -name libmysqlclient* 
```

给

```
/usr/lib64/mysql/libmysqlclient_r.so
/usr/lib64/mysql/libmysqlclient.so
/usr/lib64/mysql/libmysqlclient.so.18
/usr/lib64/mysql/libmysqlclient.so.18.0.0
/etc/alternatives/libmysqlclient
/etc/alternatives/libmysqlclient_r 
```

和

```
ls -l /usr/lib64/mysql 
```

给

```
lrwxrwxrwx 1 root root      34 Apr 11 19:21 libmysqlclient_r.so -> /etc/alternatives/libmysqlclient_r
lrwxrwxrwx 1 root root      32 Apr 11 19:21 libmysqlclient.so -> /etc/alternatives/libmysqlclient
lrwxrwxrwx 1 root root      24 Apr 11 18:24 libmysqlclient.so.18 -> libmysqlclient.so.18.0.0
-rwxr-xr-x 1 root root 2983360 Mar 14 10:09 libmysqlclient.so.18.0.0
-rwxr-xr-x 1 root root   11892 Mar 14 09:12 mysqlbug
-rwxr-xr-x 1 root root    7092 Mar 14 10:08 mysql_config 
```

所以唯一真正的文件是`libmysqlclient.so.18.0.0`.

编译器命令：

```
g++ main.cpp -L/usr/lib64/mysql -lmysqlclient.so.18.0.0 
```

失败

```
/usr/bin/ld: cannot find -lmysqlclient.so.18.0.0
collect2: ld returned 1 exit status 
```

所以有人在撒谎，或者我在 YUM 回购中被完全扯掉了，没有得到我`libmysqlclient.a`应该得到的。

（我避免在系统上使用许多符号链接，以便消除可能的问题）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T21:08:23.983

呸呸呸！你**大错特错了**。

首先，当您拥有 .so 文件时，您不需要 libmysqlclient.a 文件。 [.a 文件用于静态链接，.so 文件用于动态链接。](https://stackoverflow.com/questions/9809213/what-are-a-and-so-files). .so 文件绝对更好，让你很酷。

当您尝试在没有库链接的情况下进行编译时遇到的问题是

```
g++ main.cpp 
```

给

```
undefined reference to `mysql_init' 
```

但这[可以用](https://stackoverflow.com/questions/10970356/undefined-reference-to-mysql-init)

```
g++ main.cpp `mysql_config --cflags --libs` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-02T22:24:22.017

当您使用 .so 时，它们被链接到一个运行时。这使您的编译代码更小。这些天通常没什么大不了的。真正很棒的功能是，当您更新系统并更新库时，您将链接到新的（并且希望是）更好的库。更新通常包含错误修复和安全修复。可能的性能改进。因此，它们使您的代码更酷，并且间接地使您更酷。

# php - php上传和显示后从服务器删除图像

> ID：15958615
> 
> 赞同：3
> 
> 时间：2013-04-11T20:50:18.160
> 
> 标签：php, html, image

以我的 php 表单发送图像，它会保存到我的服务器上，并在 action.php 页面上显示。现在，当我尝试：

```
echo '<div id="image"><img src="'.$target_path.'" width="280" height="280"></div>'; 
```

它工作得很好......但如果我`unlink($target_path);`在我的php代码末尾添加它甚至不会显示图像，即使它在显示图像后被删除......

所以问题是，我怎样才能显示图像并同时删除它，这样我的服务器就不会被用户图片塞满？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T20:53:00.487

尝试另一件事：输出 base-64 编码的图像。

```
$contents = file_get_contents($file);
$base64 = base64_encode($contents);
echo '<div id="image"><img src="data:image/jpg;base64,'.$base64.'" width="280" height="280"></div>'; 
```

（而不是`move_uploaded_file()`etc，用作 $file 变量`$_FILES[...]['tmp_name']`）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T20:55:50.643

您可以通过创建一个小脚本来获取图像文件名并在检索到它后将其删除来实现这一点：

```
<?php
$file = image_file_from_parameter($_GET['image']); 
headers_for_file($file);
readfile($file);
unlink($file); 
```

然后在您的 HTML 输出中链接到该脚本：

```
<img src="path/to/image.php?image=893sudfD983D" /> 
```

如果你设置了很好的缓存头，用户不会注意到你的服务器只提供了一次文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T20:57:06.693

当您回显图像的 url 时，`img src`您只是向浏览器发送图像的 url，而不是实际的图像数据。如果您希望通过这种方法查看图像，则需要将图像保留在服务器上。

您可以使用 bwoebi 的解决方案来传递实际的图像数据而不是链接，但更好的解决方案是将图像保留在服务器上并定期删除旧文件。

# oop - 重载的 horzcat() 是如何工作的？

> ID：15958616
> 
> 赞同：2
> 
> 时间：2013-04-11T20:50:18.727
> 
> 标签：oop, matlab, overloading

我正在编写一个实现自定义连接的 Matlab 类，以便向用户呈现一个干净、富有表现力的界面。与内置的不同，重载的结果`horzcat()`——例如——应该是根据类的语义设置的标量对象。但是，我不再确定哪些规则适用于重载函数......

一个类来说明这个问题是：

```
classdef A < handle
        properties
                k;
        end;

        methods
                function obj = A(varargin)
                        if nargin == 0
                                obj.k = 0;
                        else
                                obj.k = varargin{1};
                        end;
                end;

                function obj = horzcat(obj1, varargin)
                        fprintf('1st arg is %s.\n', class(obj1));
                        if nargin > 1
                                fprintf('2nd arg is %s.\n', class(varargin{1}));
                        end;
                        obj = obj1; % Not important
                end;
        end;
end 
```

现在，当用一个小脚本测试这个类时：

```
% Please don't run this is you have valuable
% data in your base workspace.
clear classes;
clc;

a = A('dummy');
b = [-1, a]; % Should fail 
```

输出是：

```
1st arg is double.
2nd arg is A. 
```

`horzcat()`这是令人惊讶的，因为第一个参数是双精度的，即应该调用内置函数，随后抛出关于类型不匹配或其他东西的异常。据我了解，第一个参数的类型决定了将调用哪个重载函数（好的，我们将自己限制为非静态方法）。该代码在 R2011b/Linux 和 R2012a/Windows 上进行了测试，结果相同。

所以，这是我的问题：调用重载方法的**实际规则是什么？**Matlab 文档没有解释上述结果，我想避免基于我对语言如何工作的幻想来开发代码。

预先感谢您的意见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T21:06:04.880

我认为 MATLAB 的文档对此非常清楚：

从[这里](http://www.mathworks.com/help/matlab/matlab_oop/overloading-functions-for-your-class.html)：

> MATLAB 使用占主导地位的参数来确定要调用哪个版本的函数。如果主要参数是一个对象，则 MATLAB 调用该对象的类定义的方法（如果有的话）。

从[这里开始](http://www.mathworks.com/help/matlab/matlab_oop/ordinary-methods.html)更多关于**主导论点**：

> 方法的参数列表中的主要参数确定 MATLAB 运行时调用的方法或函数的版本。优势是由参数类的相对优先级决定的。通常，*用户定义的类优先于内置的 MATLAB 类*。因此，最左边的参数决定调用哪个方法。但是，用户定义的类可以指定特定类的相对优势。

# javascript - 网页中的 C 调试器？

> ID：15958617
> 
> 赞同：0
> 
> 时间：2013-04-11T20:50:25.007
> 
> 标签：javascript, c++, html

我想构建一个简单的网页，这样我就可以在 html 页面中编写 C++ 代码并运行代码，然后结果显示在同一页面中。

是否有可能做到这一点？如果是这样，有什么想法可以开始吗？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-04-11T20:56:04.757

无法直接在浏览器中执行 C++ 代码。不过，可以使用 C++ 为网站编译和生成 HTML。Visual Studio 将帮助您建立一个基于 C++ 的网站。

# xml - 并排比较 XML

> ID：15958620
> 
> 赞同：0
> 
> 时间：2013-04-11T20:50:33.293
> 
> 标签：xml, compare

我需要比较两个 xml 文件，然后显示一个类似于 WinMerge 中的屏幕（两个文件以及红色和绿色的差异）。这是众所周知的并排比较。有什么工具可以做到这一点吗？最后但不是租赁，一个开源工具？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T20:54:34.967

您的问题并没有真正表明您甚至研究过您正在寻找的东西，因为通过一次谷歌搜索，我发现了一种可以满足您需求的工具，它被称为 Altova。

链接 -[这是我发现它不是开源的工具，但它具有您正在寻找的红色和绿色功能。](http://www.altova.com/diffdog/xml-diff.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T05:23:30.337

还有一种工具 WinMerge 可以比较目录和文件。它是免费且用户友好的，您可以从[http://winmerge.org/](http://winmerge.org/)下载它。

# android - 无法导出已签名的应用程序

> ID：15958621
> 
> 赞同：4
> 
> 时间：2013-04-11T20:50:34.147
> 
> 标签：android, eclipse

我有一个 Eclipse 工作区，其中包含两个 Android 应用程序和两个 Android 库——Facebook SDK 和我自己的库。当我尝试创建 APK 文件时，*有时会*收到错误消息“Conversion to dalvik format failed with error 1”。

我浏览了所有类似问题的答案，但没有任何效果：

1.  Facebook SDK 库以错误的方式引用了一个 jar，所以我修复了它。
2.  我已经清理了构建。很多次。
3.  我已经删除了 bin 文件夹。
4.  这发生在多台开发机器上，但以防万一 - 我删除了工作区并重新开始。

我为此找到的唯一解决方法是一遍又一遍地重试，直到它起作用。除了放弃 Android 并只做 iOS 和 Windows Phone 版本，我还能做什么？以这种方式开发任何东西都是不可能的。

更新：在其中一台计算机上，我得到交替错误，有时是 Dalvik 错误，有时它抱怨它无法导出 ...\facebook-android-sdk-3.0\facebook\bin\facebooksdk.jar 。

更新 2：Eclipse 日志 (.metadata/.log) 显示了异常的详细信息：

```
!ENTRY com.android.ide.eclipse.adt 4 0 2013-04-12 00:14:59.163
!MESSAGE Export Wizard Error
!STACK 1
org.eclipse.core.runtime.CoreException: Conversion to Dalvik format failed with error 1
at com.android.ide.eclipse.adt.internal.project.ExportHelper.exportReleaseApk(ExportHelper.java:312)
at com.android.ide.eclipse.adt.internal.wizards.export.ExportWizard.doExport(ExportWizard.java:296)
at com.android.ide.eclipse.adt.internal.wizards.export.ExportWizard.access$0(ExportWizard.java:233)
at com.android.ide.eclipse.adt.internal.wizards.export.ExportWizard$1.run(ExportWizard.java:218)
at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121)
Caused by: com.android.ide.eclipse.adt.internal.build.DexException: Conversion to Dalvik format failed with error 1
at com.android.ide.eclipse.adt.internal.build.BuildHelper.executeDx(BuildHelper.java:751)
at com.android.ide.eclipse.adt.internal.project.ExportHelper.exportReleaseApk(ExportHelper.java:269)
... 4 more

!SUBENTRY 1 com.android.ide.eclipse.adt 4 0 2013-04-12 00:14:59.163
!MESSAGE Conversion to Dalvik format failed with error 1
!STACK 0
com.android.ide.eclipse.adt.internal.build.DexException: Conversion to Dalvik format failed with error 1
at com.android.ide.eclipse.adt.internal.build.BuildHelper.executeDx(BuildHelper.java:751)
at com.android.ide.eclipse.adt.internal.project.ExportHelper.exportReleaseApk(ExportHelper.java:269)
at com.android.ide.eclipse.adt.internal.wizards.export.ExportWizard.doExport(ExportWizard.java:296)
at com.android.ide.eclipse.adt.internal.wizards.export.ExportWizard.access$0(ExportWizard.java:233)
at com.android.ide.eclipse.adt.internal.wizards.export.ExportWizard$1.run(ExportWizard.java:218)
at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-02T19:46:10.280

1.  禁用菜单 -> 项目 -> 自动构建。
2.  菜单 -> 项目 -> 清理...
3.  菜单 -> 项目 -> 全部构建

为我导出签名的应用程序包工作

# css - 圆角控件 CSS

> ID：15958622
> 
> 赞同：0
> 
> 时间：2013-04-11T20:50:34.903
> 
> 标签：css, visual-studio-2010, internet-explorer

我已经使用 css 实现了一个圆角控件，它在 firefox 中正确显示，但在 IE 10 中没有，任何人都可以指出我需要让它在两者中工作的更改。我看到一些答案指向将 pie.htc 添加到 css 文件夹,我也试过

```
.DropDownList
{
    background-color: #c0c0c0;
    border: 1px solid #000000;
    -moz-border-radius: 30px;
    -webkit-border-radius: 30px;
    border-radius: 10px;
} 
```

尝试添加 overflow:hidden ，它也使它不出现在 Firefox 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T21:01:36.637

也看看这个页面： http: [//geekswithblogs.net/ihaynes/archive/2012/09/16/ie10---be-prepared.aspx](http://geekswithblogs.net/ihaynes/archive/2012/09/16/ie10---be-prepared.aspx)

我声称 IE10 可以在本地开发 ASP.Net 时进入“兼容模式”并提供一种解决方法。

> 如果您使用 EW 开发服务器或 IIS 在 IE10 中本地预览使用 HTML5 和 CSS3 功能（占位符文本、圆角等）的站点，您可能会发现这些功能不显示。
> 
> 这是因为 IE10 中 Intranet 站点的默认浏览器模式是“兼容模式”。您可以在“工具 - 兼容性视图设置”中更改此设置。取消选中“在兼容性视图中显示 Intranet 站点”选项。
> 
> 现在您会注意到还有一个设置“在兼容性视图中显示所有网站”。如果用户有意或无意地检查了这一点，您的网站会发生什么？您的网站将无法正常显示。
> 
> 您可以通过强制 IE10 进入其最高或“边缘”模式来避免此问题。您可以通过将以下元标记添加到您的页面或 DWT / ASP.Net MasterPage 来做到这一点。
> 
> ```
> <meta http-equiv="X-UA-Compatible" content="IE=Edge" /> 
> ```
> 
> 值得将此添加到 EW V4 中现有的 IE 元标记片段中。

编辑：添加了相关报价。（更正了“兼容性”的拼写。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T20:57:35.500

看看[这个答案](https://stackoverflow.com/a/3782946/1661238)，您可能需要检查您的 X-UA-Compatible 标签并确保您没有引用以前版本的 IE：

`<meta http-equiv="X-UA-Compatible" content="IE=9" />`

（边界半径支持从 IE9 开始）。

# opengl - 我可以使用 GLSL 重用与转换相关的代码吗？

> ID：15958625
> 
> 赞同：0
> 
> 时间：2013-04-11T20:50:51.150
> 
> 标签：opengl, glsl

我有一个不涉及 GLSL 的旧 OpenGL 项目，现在我重写它以使其使用 GLSL。我有一个功能，可以在您移动鼠标时围绕固定点旋转相机。我不确定如何在我的新项目中使用此功能，因为我使用的是 GLSL 而不是标准的 OpenGL 固定管道。

这就是函数，我不确定我是否可以使用相同的代码，或者我是否必须重写转换以使其适用于 GLSL？

```
void mouseMovePassive(int x, int y)
{
    static int oldX=x, oldY=y;

    rotateCamera(y-oldY, x-oldX);

    int centerX = glutGet( GLUT_WINDOW_WIDTH )/2;
    int centerY = glutGet( GLUT_WINDOW_HEIGHT )/2;
    if( abs(centerX-x) > 250 || abs(centerY-y) > 250 )
    {
        glutWarpPointer(centerX, centerY);
        oldX = centerX;
        oldY = centerY;
    }
    else
    {
        oldX = x;
        oldY = y;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T07:10:42.020

据我所知，gluLookAt 适用于内置矩阵类型。对于 opengl 上的较新版本，您将需要重新编写它或使用第三方库。如果您使用的是 c++，我相信 glm 库已内置

# css - 是否可以看到由于您更改 Chrome 中的 css 类而发生的所有更改？

> ID：15958637
> 
> 赞同：1
> 
> 时间：2013-04-11T20:51:17.197
> 
> 标签：css, google-chrome, google-chrome-devtools

我正在尝试修复 Google Chrome 中的演示错误。当我更改一个课程时，页面看起来正确。但是，如果我将 A 类的所有属性都更改为 B 类的属性，则表示仍然是错误的。因此，当我更改样式时，其中一个子元素应用了不同的样式。

有没有一种方法可以快速查看由于您更改一个元素上的类而发生的所有元素上计算样式的所有更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T21:19:29.430

选择一个元素后，单击检查器右上角的“+”。这将允许您编写新规则。

# c - 在 C 中取消定义类似函数的宏？

> ID：15958638
> 
> 赞同：0
> 
> 时间：2013-04-11T20:51:17.603
> 
> 标签：c, macros, c-preprocessor, glibc

我正在尝试对 glibc 进行一些修改，我想知道是否可以重新定义类似函数的宏？

例如，`<tgmath.h>`具有以下宏：

```
#define expm1(Val) __TGMATH_UNARY_REAL_ONLY (Val, expm1) 
```

如何重新定义`expm1`为：

```
#define expm1(Val) __TGMATH_UNARY_REAL_IMAG (Val, expm1, cexpm1) 
```

我想我必须取消以前的定义，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-11T20:52:23.250

确切地。只需先取消定义它。

```
#ifdef expm1
#undef expm1
#endif

#define expm1(Val) __TGMATH_UNARY_REAL_IMAG (Val, expm1, cexpm1) 
```

# c# - 在telerik中为禁用的组合框设置选定的值

> ID：15958642
> 
> 赞同：0
> 
> 时间：2013-04-11T20:51:39.807
> 
> 标签：c#, asp.net, telerik, radcombobox

我正在尝试根据一个文本框的 textchanged 事件（updatestatus）为 radcombobox 设置一个值。

它不会改变价值。

```
 <telerik:RadComboBox ID="ddlStatus" runat="server"  Enabled="false"/>

  protected void updatestatus(object sender, System.EventArgs e)
{
    if (txtname.Text != String.Empty)
    {
        if (ddlStatus.Text.Trim() == "Waiting")
        {
            ddlStatus.Text = "complete";

        }
    }
} 
```

如果我遗漏了什么，有人可以建议我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T20:56:13.097

您可以使用 FindItemByText 设置 Talerik 下拉列表的值：

```
 RadComboBoxItem item = ddlStatus.FindItemByText("complete");
   item.Selected = true; 
```

在您的情况下，完整的实现将是这样的：

```
protected void updatestatus(object sender, System.EventArgs e)
{
    if (txtname.Text != String.Empty)
    {
        if (ddlStatus.Text.Trim() == "Waiting")
        {
           RadComboBoxItem item = ddlStatus.FindItemByText("complete");
           item.Selected = true;
        }
    }
} 
```

# javascript - 为什么我的函数一直从我的输入文本字段中读取输入？

> ID：15958644
> 
> 赞同：1
> 
> 时间：2013-04-11T20:51:42.150
> 
> 标签：javascript, html, ajax, input

我的 html 表单上的输入有问题。目前，我正在将 twitter 名称的输入输入到 Ajax 函数中，该函数通过 php 从 twitter api 调用推文。因为我有一个 setInterval 函数来不断检查更新，所以输入会一次又一次地传递到函数中以获取推文。

问题是该函数似乎是直接从文本输入框中的内容读取输入。因此，如果用户在没有按 Enter 或点击按钮的情况下更改文本，该函数会继续读取该文本作为输入。所以最初输入的输入在按下回车或点击按钮提交后并不固定。

这是接受输入的html表单：

```
<div id="topdiv">Input Twitter ID: <input type="text" id="userid"    onkeydown="if(event.keyCode===13) {document.getElementById('tweet-button').click();}">  
<input type="submit" id="tweet-button" onclick="getStatusesX();" value="Get recent tweets">   
<p id="tweetbox"></p>
</div> 
```

以下是功能：

```
function getStatusesX() {

   var userID = document.getElementById("userid").value;
   getStatuses(userID);
   var intervalstop = setInterval(function() {getStatuses(userID);}, 20000);
   clearInterval(intervalstop);}

//Create a cross-browser XMLHttp Request object
function getXMLHttp() {

    var xmlhttp;
    if (window.ActiveXObject) {
        XMLHttp = new ActiveXObject("Microsoft.XMLHTTP");
    } else if (window.XMLHttpRequest) {
       XMLHttp = new XMLHttpRequest();
    } else {
        alert("Your browser does not support XMLHTTP!");
    }
    return XMLHttp;
}

//function that searches for the tweets  via php
function getStatuses(userID){

XMLHttp1 = getXMLHttp();

    //ajax call to a php file that will extract the tweets
    XMLHttp1.open( 'GET', 'TwitterGlimpsePHP.php?userid='userID, true);

    // Process the data when the ajax object changes its state
    XMLHttp1.onreadystatechange = function() {
        if( XMLHttp1.readyState == 4 ) {
            if( XMLHttp1.status ==200 ) {  //no problem has been detected
                document.getElementById("tweetbox").innerHTML=XMLHttp1.responseText;
            }
        }
    }
    XMLHttp1.send(null);
} 
```

我希望在按下输入后将输入作为文本。我尝试将其分配给变量，但无法弄清楚为什么它一直从输入字段读取。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T23:55:54.947

这不是官方答案 - 只是想澄清我的评论

这就是我在函数外部声明的意思......

```
var intervalstop;

function getStatusesX() {
   clearInterval(intervalstop);

   var userID = document.getElementById("userid").value;
   getStatuses(userID);
   intervalstop = setInterval(function() {getStatuses(userID);}, 20000);

} 
```

这样，您初始化 var 并在函数内部首先清除以确保它不会复合。然后将 var 设置为新的间隔以重新开始。

你说如果用户点击很多次，twitter 不喜欢这个代码的某些东西 - 完全有道理。他们会想要限制 API 以防止有人因编码不当而每分钟发出 50,000 个请求。您应该检查 API 规范以确保您在现实区域内，如果您正在突破界限，请考虑在本地缓存结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T20:57:52.790

问题是您每次调用 getStatuses 时都在重新读取文本框的值。

尝试首先捕获文本框的值，并将其传递给您的 getStatuses 函数：

所以你的新 getStatusesX 是：

```
function getStatusesX() {
    var userID = document.getElementById("userid").value;
    getStatuses(userID);
    setInterval(function() {
        getStatuses(userID);
    }, 20000);
} 
```

更新 getStatuses 以获取用户 ID 参数并删除您在 getStatuses 中读取文本框值的行。

话虽如此，如果这可能开始可能是一个问题 - 如果用户单击按钮以自动刷新状态多次怎么办？您可能希望在单击按钮/文本框后禁用它，或者先清除旧间隔。

# .htaccess - .htaccess 从子目录重写

> ID：15958652
> 
> 赞同：0
> 
> 时间：2013-04-11T20:52:21.097
> 
> 标签：.htaccess, mod-rewrite

对此的任何帮助将不胜感激。

我在 .htaccess 文件中设置 301 重定向，以将数百个旧网址重定向到最新的实时页面。

我的 .htaccess 文件当前位于域的根目录中，如下所示：

```
RewriteCond %{QUERY_STRING} ^pName=product-one$ [OR]
RewriteCond %{QUERY_STRING} ^pName=product-two$ [OR]
RewriteCond %{QUERY_STRING} ^pName=completely-different-name$
RewriteRule ^catalog/product_info.php$ http://www.mydomain.com/new-product-name-p-123.html? [R=301,L] 
```

在研究如何使用 .htaccess 批量重定向到一个 url 的答案时，我读到更改 .htaccess 文件的位置并将其放置在它应用的特定目录中是明智的，因此对其他目录的请求不会甚至这些规则。

所以我把.htaccess文件放在了具体的子目录，也就是catalog中，但是重定向不再起作用。我在这里想念什么？我希望将要重定向的 url 规则放置在目录文件夹内的 .htaccess 文件中，以便每次加载根 .htaccess 时都不会加载所有这些重写规则。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T20:56:45.207

我建议您更改重定向 301 行以包含直接指向 OSCommerce 目录文件夹的路径。

所以而不是使用

```
RewriteRule ^catalog/product_info.php$ http://www.mydomain.com/new-product-name-p-123.html? [R=301,L] 
```

使用例如：

```
Redirect 301 /website/catalog http://www.mydomain.com/page2.htm 
```

或者

```
Redirect 301 /catalog http://www.mydomain.com/page2.htm 
```

选项 1) 如果您的目录位于[http://youdDomain.com/website/catalog/](http://youdDomain.com/website/catalog/)。如果它位于[http://youdDomain.com/website/aaa/catalog/](http://youdDomain.com/website/aaa/catalog/)您将使用：

```
Redirect 301 /website/aaa/catalog http://www.mydomain.com/page2.htm 
```

我在自己的网络服务器中对此进行了测试-希望对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T23:06:39.307

当您将 .htaccess 放在子目录中时，您必须`RewriteRule`相应地调整模式。mod_rewrite 去除 .htaccess 文件所在的目录前缀，请参阅[`RewriteRule - What is matched?`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriterule).

您必须将规则更改为

```
RewriteRule ^product_info.php$ ... 
```

如果您有很多 URL 路径要重写，您可能还想查看[`RewriteMap`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritemap).

# ios - 使用 iOS 保存文件。他们去哪里？

> ID：15958657
> 
> 赞同：1
> 
> 时间：2013-04-11T20:52:35.907
> 
> 标签：ios, file-io

我已经从我的应用程序中保存了一个文本文件，我可以再次打开它，但是用户有什么方法可以访问这个文件来做他们想做的任何事情？我尝试打印如下所示的路径：`/var/mobile/Applications/2DD5A15B-9BC8-4981-A1F6-E22F66C71CA4/Documents/`我假设巨大的数字是某种类型的应用程序标识符，这使我相信除非您在应用程序中，否则该文件将无法访问。这让我想知道，为什么写一个文件比将一个大字符串保存到 NSUserDefaults 更好？

我正在构建一个应用程序，用户应该能够在其中进行一些数据记录。如果用户可以将他们的手机与他们的计算机同步并下载文件，那就太棒了。你能做到吗？还是我必须内置功能，以便他们必须通过电子邮件向自己发送文件或其他东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T20:57:07.163

> 我假设这个巨大的数字是某种类型的应用程序标识符

这是。这是一个[UUID](http://en.wikipedia.org/wiki/Universally_unique_identifier)。

> 这使我相信除非您在应用程序中，否则该文件将无法访问

...除非*您*在应用程序中（**或者，**除非设备已越狱，在这种情况下，对于任何感兴趣的人来说，它都是明文）。

> 为什么写一个文件比将一个大字符串保存到 NSUserDefaults 更好

从概念上讲，它不是一个设置。如果您有一些数据，一个实体，则将其写入文件。`NSUserDefaults`不适合存储大量数据。它用于存储用户偏好（易失性！），仅此而已。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T02:48:58.983

`If the user can sync their phone with their computer and download the file that would be awesome. Can you do that? Or do I have to build in functionality so that they have to email themselves the file or something?`

你可以使用很棒的 iCloud。在这里检查：[https ://developer.apple.com/icloud/index.php](https://developer.apple.com/icloud/index.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T21:23:38.473

由iOS的概念制成的这也称为沙盒。如果这不存在，则可以更改或获取其他应用程序的数据。

# android - libxml2在android中的使用

> ID：15958660
> 
> 赞同：0
> 
> 时间：2013-04-11T20:52:40.007
> 
> 标签：android, xml, android-ndk, libxml2

我已经成功地为 Android 交叉编译了一个 C++ 库，这个库使用 libxml2。现在，当我尝试通过我的 jni 层对其进行测试时，本机调用似乎工作正常。但是，当我执行一个基本调用意味着解析一个 xml 文件（来自一个 url）时，libxml 函数失败了。

函数`xmlTextReaderPtr xmlReaderForFile(const char* filename, const char* encoding, int options)`返回。`NULL`

我用 http url 调用它，所以我想知道它是否可能是网络访问问题。

我已经在清单中添加了互联网权限，但没有结果。

一旦`xmlTextReaderPtr xmlNewTextReaderFilename(const char* URI)`在 libxml 库中调用并`errno`设置为“没有这样的文件或目录”，就会发生错误。请注意，我使用的 url 可以与 ubuntu 上的“相同”CPP 代码一起正常工作。

我希望有人可以帮助我解决这个问题。

谢谢你的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T22:26:22.527

Android 上的 libxml2 是在[不支持 HTTP 的情况下编译](https://github.com/android/platform_external_libxml2/blob/master/include/libxml/xmlversion.h#L172)的。

# jquery - serializeArray 未拾取的禁用字段

> ID：15958671
> 
> 赞同：30
> 
> 时间：2013-04-11T20:53:17.633
> 
> 标签：jquery, serialization

*（问题已更新以反映实际问题）*

我刚刚意识到这`serializeArray`不是从禁用字段中获取内容。

`autosuggest`通过从列表中选择一个项目来填充一组（街道）地址字段。完成此操作后，这些字段将被禁用。我可以将其更改为`read only`，但我想要禁用的外观而无需更改 CSS。

有没有办法`serializeArray`从禁用的字段中获取数据？

**解决方案**

感谢 Mohammad，我创建了一个小插件来帮助我解决我的问题：

（[小提琴](http://jsfiddle.net/gARuJ/)）

```
 var form_data = $('form').serializeAll();

    (function ($) {
      $.fn.serializeAll = function () {
        var data = $(this).serializeArray();

        $(':disabled[name]', this).each(function () { 
            data.push({ name: this.name, value: $(this).val() });
        });

        return data;
      }
    })(jQuery); 
```

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-04-11T21:09:15.907

尝试这个

```
var data = $('form').serializeAllArray(); 
```

这是使用的小插件

```
(function ($) {
  $.fn.serializeAllArray = function () {
    var obj = {};

    $('input',this).each(function () { 
        obj[this.name] = $(this).val(); 
    });
    return $.param(obj);
  }
})(jQuery); 
```

您也可以尝试启用所有元素来序列化它们，然后在序列化后禁用它们。

```
var myform = $('#form');
var disabled = myform.find(':input:disabled').removeAttr('disabled');
var serialized = myform.serializeArray();
disabled.attr('disabled','disabled'); 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2016-06-22T04:00:32.393

您可以使用`readonly` serializeArray() 可以读取它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-30T06:29:36.153

这是预期的行为，不会被修复。这是一个解决方法

```
function serializeJSONIncludingDisabledFields (form) {
  var fields = form.find('[disabled]');
  fields.prop('disabled', false);
  var json = form.serializeJSON();
  fields.prop('disabled', true);
  return json;
} 
```

链接到[问题](https://github.com/marioizquierdo/jquery.serializeJSON/issues/49)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-04-27T09:01:21.650

```
$('#field').removeAttr('disabled');
var formData = $(this).serializeArray();
$('#field').attr('disabled', 'disabled'); 
```

上面的解决方案更好 - 或者您可以从元素中删除 disabled 属性，序列化字段然后重新添加属性。

# scala - SORM 发展计划

> ID：15958677
> 
> 赞同：1
> 
> 时间：2013-04-11T20:53:50.387
> 
> 标签：scala, orm, sorm

有谁知道 SORM 支持哪个最新的 scala 版本？SORM 的开发是否还在进行中？最后，是否有任何计划支持 noSQL 数据库，或者顾名思义，它是否仅适用于关系数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T22:31:51.427

SORM 支持整个 2.10.* Scala 分支。

开发正在进行中，但速度不是很快。随着 0.4 版的发布，SORM 将被极大地重构和模块化，以使第三方驱动程序开发更加容易。我希望这将为该项目带来更实质性的贡献。

SORM 的 API 正在发生变化，以摆脱关系驱动程序链，并考虑到未来的 NoSQL 驱动程序实现。虽然我必须承认 NoSQL 驱动程序的具体实现没有计划用于 0.4.0 版本，但计划在此版本之后支持 CouchDB。

是的，有了这些计划，框架的标题似乎变得相当混乱，但这是目前最不重要的问题。

# python - DB-Connections 类作为 Python 中的单例

> ID：15958678
> 
> 赞同：7
> 
> 时间：2013-04-11T20:53:56.497
> 
> 标签：python, database, singleton

所以在 python 中对单例有很多仇恨。我通常认为拥有单例*通常*不好，但是有副作用的东西呢，比如使用/查询数据库？当我可以重新使用已经建立的现有连接时，为什么我要为每个简单的查询创建一个新实例？什么是pythonic方法/替代方法？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-11T20:56:33.790

通常，您有某种对象表示使用数据库的事物（例如 的实例`MyWebServer`），并且您将数据库连接设为该对象的成员。

如果您将所有逻辑都放在某种函数中，请将连接设为该函数的本地连接。（这在许多其他语言中并不常见，但在 Python 中，通常有很好的方法将多阶段有状态工作封装在单个生成器函数中。）

如果您将所有数据库内容分散在各处，则只需使用全局变量而不是单例。是的，全局变量很糟糕，但单例同样糟糕，而且更复杂。在少数情况下它们很有用，但非常罕见。*（这对于其他*语言不一定如此，但对于 Python 来说是这样。）摆脱全局的方法是重新思考你的设计。您很有可能将模块有效地用作（单例）对象，如果您仔细考虑，您可能会想出一个好的类或函数来包装它。

* * *

显然，只是将所有全局变量移动到类属性中，而`@classmethod`s 只是在不同的命名空间下为您提供全局变量。但是将它们移动到*实例*属性和方法中是另一回事。这给了你一个你可以传递的对象——如果有必要，一个你可以拥有 2 个（或者在某些情况下甚至可能是 0 个）的对象，附加一个锁，序列化等。

在许多类型的应用程序中，你最终还是会得到某个东西的单个实例——每个 Qt GUI 应用程序都有一个`MyQApplication`，几乎每个 Web 服务器都有一个`MyWebServer`，等等。不管你怎么称呼它，这实际上是一个单例或全球。如果您愿意，您可以将所有内容移到该上帝对象的属性中。

但仅仅因为你*可以*这样做并不意味着你*应该*这样做。您仍然拥有每个模块中的函数参数、局部变量、全局变量、具有自己的实例属性的其他（非巨石）类等，您应该使用适合每个值的任何内容。

例如，假设您为每个连接到您的新客户端`MyWebServer`创建一个新实例。`ClientConnection`您可以让连接`MyWebServer.instance.db.execute`在他们想要执行 SQL 查询时写入……但您也可以只传递`self.db`给`ClientConnection`构造函数，然后每个连接就执行`self.db.execute`. 那么，哪一个更好呢？好吧，如果你用后一种方式来做，它会让你的代码更容易扩展和重构。如果您想在 4 个数据库之间进行负载平衡，您只需要在一个地方（`MyWebServer`初始化每个`ClientConnection`）而不是 100 个（每次`ClientConnection`访问数据库）更改代码。如果您想将您的单体 Web 应用程序转换为 WSGI 容器，您无需更改任何`ClientConnection`代码，除了构造函数。等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T23:34:47.577

如果您使用的是面向对象的方法，那么abamet 将数据库连接参数附加为类属性的建议对我来说很有意义。然后，该类可以建立一个单一的数据库连接，该类的所有方法都称为`self.db_connection`，例如。

如果您不使用面向对象的方法，则单独的数据库连接模块可以提供功能样式的等价物。使用一个模块来建立数据库连接，然后在任何你想使用它的地方简单地导入那个模块。例如，您的代码可以将连接称为`db.connection`。由于模块实际上是单例，并且模块代码仅在第*一次*导入时运行，因此您每次都将重复使用相同的数据库连接。

# photo - 20000张图片批量处理photoshop

> ID：15958679
> 
> 赞同：0
> 
> 时间：2013-04-11T20:54:00.147
> 
> 标签：photo, photoshop

您好，我有大约 100000 张照片和 20000 张需要优化。

我可以在 Photoshop 中运行批处理，但是每个图像都跨越 100000 个文件夹。他们都有相同的名字。有没有一种方法可以在您知道的 Photoshop 批处理中定位文件名，或者我应该寻找替代方案。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T19:43:39.473

Write a script to create symlinks to your files into a single folder. Then run the Photoshop batch on this folder. Your original files will also have been updated.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T15:40:29.680

使用 FOLDER > INCLUDE ALL SUBFOLDERS 选项有什么问题？

![在此处输入图像描述](https://i.stack.imgur.com/zgtmc.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-27T15:10:19.053

您必须选择**覆盖**操作“打开”和“另存为”

[![在此处输入图像描述](https://i.stack.imgur.com/rxwzi.png)](https://i.stack.imgur.com/rxwzi.png)

# ruby-on-rails - 如何在 application.html.erb 中内联 CSS 和 JavaScript？

> ID：15958683
> 
> 赞同：2
> 
> 时间：2013-04-11T20:54:06.647
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

默认的 Rails 3.2`application.html.erb`是这样的：

```
<!DOCTYPE html>
<html>
<head>
  <title>Testapp</title>
  <%= stylesheet_link_tag    "application", media: "all", "data-turbolinks-track" => true %>
  <%= javascript_include_tag "application", "data-turbolinks-track" => true %>
  <%= csrf_meta_tags %>
</head>
<body>

<%= yield %>

</body>
</html> 
```

有没有办法在这里内联资产管道生成的 CSS 和 JavaScript？

*PS：无需哀叹内联可能是一个坏主意。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-10-15T00:45:03.843

在您的布局模板中，替换

```
<%= javascript_include_tag 'application' %> 
```

和，

```
<script type="text/javascript">  
<%= Rails.application.assets.find_asset('application.js').body.html_safe %>
</script> 
```

# jquery - jQuery 自动完成功能不适用于 Turbolinks

> ID：15958686
> 
> 赞同：2
> 
> 时间：2013-04-11T20:54:14.553
> 
> 标签：jquery, jquery-ui, turbolinks

我正在使用 Rails 4。我的这个片段在*没有*turbolinks的情况下`shared.js.coffee`可以正常工作：

 *```
jQuery ->
  $('input.autocomplete,textarea.autocomplete').each (index, item) =>
    sel = $(item)
    sel.autocomplete
      source: sel.data('autocomplete-source')
      minLength: 1 
```

但是当我使用[Turbolinks](https://github.com/rails/turbolinks)时，它只适用于页面刷新。浏览网站后它不起作用。

我已经阅读了[Rails 4、Turbolinks 和 jQuery 中的委托事件处理](http://www.iexposure.com/2012/10/26/rails-4-turbolinks-and-delegated-event-handling-in-jquery)，所以我知道出了什么问题，但我还不确定如何解决这个问题。

并且，一个相关的问题：如果[jQuery UI 自动完成插件](https://github.com/jquery/jquery-ui/blob/master/ui/jquery.ui.autocomplete.js#L22)- 或者就此而言，一般的插件 - 是/被设计为与 Turbolinks 一起使用，任何人都可以明确评论吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T23:32:19.080

使用[jQuery Turbolinks](https://github.com/kossnocorp/jquery.turbolinks)。

> “如果你有一个包含大量`$(el).bind(...)`Turbolink 的大型代码库，你会感到惊讶。你的大部分 JavaScript 将停止以通常的方式工作。这是因为你绑定事件的节点不再存在。”

用法：

```
# Gemfile:
gem 'jquery-turbolinks'

# JavaScript manifest file:
//= require jquery.turbolinks 
```

也许，在某些时候，jQuery`$.widget`函数会提供一个选项来进行不同的绑定，但在那之前，这是可行的。不需要对 Javascript 进行其他更改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-08-24T21:13:28.583

我最近在使用 Rails 5 和最新版本的 turbolinks 时遇到了这个问题（截至 2017 年 8 月 24 日）

我有类似的东西。我的问题是使用我的应用程序导航到另一个页面并使用自动完成功能。它没有用。经过一些研究，我发现添加

```
$(document).addEventListener('turbolinks:load', function(){
 // your code here
} 
```

对我

> 应用程序/资产/javascripts/application.js

您可以在此处阅读有关 turbolink 的更多信息：[turbolinks](https://github.com/turbolinks/turbolinks#running-javascript-when-a-page-loads)。

我希望这对其他人有帮助。*

# hbase - 具有多列的 CheckAndPut 操作

> ID：15958687
> 
> 赞同：1
> 
> 时间：2013-04-11T20:54:24.293
> 
> 标签：hbase

我正在开发一个原型来评估 HBase 在实际项目中的使用（或不使用，取决于原型的结果）。在我正在处理的架构中，我在同一个列族中有多个列，我需要以原子方式更新其中的几个（总是在同一行内）。我用客户端 api 的 checkAndPut 方法做了一些测试，但它似乎只支持比较一个值（因此要在 put 参数中设置一个值）。我是否正确理解这一点？如果是这样，是否有另一种方法来做我需要的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T05:23:25.443

您可以使用[RowMutations](https://hbase.apache.org/0.94/apidocs/org/apache/hadoop/hbase/client/RowMutations.html)将单行的所有 PUT 操作设置在一起，并将所有更改作为原子单元。

# c# - 查询交错数组中所有列中的第一个元素

> ID：15958691
> 
> 赞同：2
> 
> 时间：2013-04-11T20:54:35.187
> 
> 标签：c#, linq, jagged-arrays

```
 int numPics = 3; //Populated from a query
        string[] picID = new string[numPics];
        //pictureTable is constructed so that it correlates to pictureTable[column][row]
        string[][] pictureTable = null; //assume the table has data
        for (int i = 0; i < numPics; i++)
        {
            //LINQ query doesn't work. Returns an IEnumerable<string> instead of a string.
            picID[i] = pictureTable.Where(p => p[0].Equals("ID")).Select(p => p[i]);
        } 
```

我是 LINQ 的新手，但我一直在寻找并没有找到答案。我希望能够使用 LINQ 检查图片表中每一列的第一个字符串，以查看它是否与字符串匹配。然后，我想获取该列并从从 0 到 i 的每一行中提取数据。我知道我可以通过更改列并保持行相同来使用 for 循环来做到这一点，但我想使用 LINQ 来实现相同的结果。

此外，如果有可能摆脱第一个 for 循环并获得相同的结果，我也会对此感兴趣。

**编辑：**假设我们有一个包含以下数据的表，请记住一切都是字符串。

```
Column Name    [ID]  [Name]  [Age]
Row 1           [1]   [Jim]   [25]   
Row 2           [2]   [Bob]   [30]
Row 3           [3]   [Joe]   [35] 
```

我希望能够查询列名，然后能够通过索引或查询行的数据从中获取数据。我将举一个例子，使用实现我想要的 for 循环。

```
 string[][] table = new string[][] { 
                              new string[] { "ID", "Name", "Age" }, 
                              new string[] { "1",  "Jim",  "25" },
                              new string[] { "2",  "Bob",  "30" },
                              new string[] { "3",  "Joe",  "35" }};

        string[] resultRow = new string[table.GetLength(1)];
        for (int i = 0; i < table.GetLength(0); i++)
        {
            if (table[i][0] == "Name") //Given this in a LINQ Query
            {
                Console.WriteLine("Column Name = {0}\n", table[i][0]);
                for (int j = 1; j < table.GetLength(1); j++) //starts at 1
                {
                    resultRow[i] = table[i][j]; //This is what I want to happen.
                }
                break; //exit outer loop
            }
        }
        //Output:
        //Column Name = Name 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T22:44:13.473

我认为这会给你相当于你在 resultRow 数组中寻找的东西

```
string[][] table = new string[][] { 
    new string[] { "ID", "Name", "Age" }, 
    new string[] { "1", "Jim", "25" },
    new string[] { "2", "Bob", "30" },
    new string[] { "3", "Joe", "35" }
};

//get index of column to look at
string columnName = "Name";
var columnIndex = Array.IndexOf(table[0], columnName, 0);

// skip the title row, and then skip columns until you get to the proper index and get its value
var results = table.Skip(1).Select(row => row.Skip(columnIndex).FirstOrDefault());

foreach (var result in results)
{
    Console.WriteLine(result);
} 
```

要查看的另一件事是 SelectMany，因为您可以使用它将多个列表扁平化为单个列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T21:26:57.663

您只想将字符串连接在一起吗？如果是这样，您可以这样做：

```
picID[i] = string.Concat(pictureTable.Where(p => p[0].Equals("ID")).Select(p => p[i])); 
```

# html - 从选项卡底部到页脚顶部的垂直条布局

> ID：15958692
> 
> 赞同：0
> 
> 时间：2013-04-11T20:54:40.093
> 
> 标签：html, css

这个琴...

[http://jsfiddle.net/jeljeljel/5BSva/6/](http://jsfiddle.net/jeljeljel/5BSva/6/)

显示我想要实现的布局。我希望标签底部的垂直条延伸到页脚。我以为我已经解决了这个问题，但是当页面的内容超过垂直高度时，垂直条不会调整。

有没有办法改变这个小提琴，使垂直条总是延伸到页脚？

**HTML**

```
<div class="wrapper">
    <div class="header">
        HEADER
    </div>
    <div class="body">

        <ul class="nav nav-tabs" id="tabcontrol">
            <li class="active"><a href="#home" data-toggle="tab">Home</a></li>
        </ul>

        <div class="tab-content">
            <div class="tab-pane active" id="home" style="">
                <div class="navigation" style="">
                    navigation<br />
                    navigation<br />
                    navigation<br />
                </div>

                <div class="content">
                    <table>
                        <tr>
                            <td>some information</td>
                        </tr>
                        <tr>
                            <td>some information</td>
                        </tr>
                        <tr>
                            <td>some information</td>
                        </tr>
                        <tr>
                            <td>some information</td>
                        </tr>
                        <tr>
                            <td>some information</td>
                        </tr>
                        <tr>
                            <td>some information</td>
                        </tr>
                        <tr>
                            <td>some information</td>
                        </tr>
                        <tr>
                            <td>some information</td>
                        </tr>
                        <tr>
                            <td>some information</td>
                        </tr>
                        <tr>
                            <td>some information</td>
                        </tr>
                        <tr>
                            <td>some information</td>
                        </tr>
                        <tr>
                            <td>some information</td>
                        </tr>
                        <tr>
                            <td>some information</td>
                        </tr>
                        <tr>
                            <td>some information</td>
                        </tr>
                        <tr>
                            <td>some information</td>
                        </tr>
                        <tr>
                            <td>some information</td>
                        </tr>
                        <tr>
                            <td>some information</td>
                        </tr>
                        <tr>
                            <td>some information</td>
                        </tr>
                        <tr>
                            <td>some information</td>
                        </tr>
                        <tr>
                            <td>some information</td>
                        </tr>
                        <tr>
                            <td>some information</td>
                        </tr>
                        <tr>
                            <td>some information</td>
                        </tr>
                        <tr>
                            <td>some information</td>
                        </tr>
                        <tr>
                            <td>some information</td>
                        </tr>
                        <tr>
                            <td>some information</td>
                        </tr>
                        <tr>
                            <td>some information</td>
                        </tr>
                        <tr>
                            <td>some information</td>
                        </tr>
                        <tr>
                            <td>some information</td>
                        </tr>
                        <tr>
                            <td>some information</td>
                        </tr>
                        <tr>
                            <td>some information</td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>

    </div>
    <div class="push">
    </div>
</div>
<div class="footer center">
    <div style="border-bottom: 2px solid rgb(174, 174, 201); background-color: #fff;"></div>
    <div>
        FOOTER
    </div>
</div> 
```

**CSS**

```
 .body {
            border: 1px solid rgb(174, 174, 201);
            border-top: 5px solid rgb(174, 174, 201);
            border-bottom: 5px solid rgb(174, 174, 201);
            border-left: 2px solid rgb(174, 174, 201);
            border-right: 2px solid rgb(174, 174, 201);
            padding-bottom: 1000px;
            margin-bottom: -1000px;
        }

        /* Sticky Footer by Ryan Fait (http://ryanfait.com/) */
        * {
            margin: 0;
        }

        html, body {
            height: 100%;

        }

        .wrapper {
            min-height: 100%;
            height: auto !important;
            height: 100%;
            margin: 0 auto -50px auto; /* the bottom margin is the negative value of the footer's height */
            overflow: hidden;
        }

        .footer {
            height: 50px;
            background-color: red;
        }

        .footer, .push {
            height: 50px; /* .push must be the same height as .footer */
            clear: both;
        }

        form {
            height: 100%;
        }
        /* Sticky Footer by Ryan Fait (http://ryanfait.com/) */

        .navigation {
            float: left;
            width: 150px;
            border-right: 3px solid rgb(174, 174, 201);
            padding-top: 10px;
            white-space: nowrap;
    position:absolute;

bottom:50px;
    top:65px;
        }

        .content {
            padding-top: 10px;
    margin-left:160px;
        }

        .nav {
            margin-bottom: 0px;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T21:05:46.827

实现这一点所需的最少 css 是添加`position: relative`到`.tab-pane`然后调整`.navigation`. 这是后者的绝对定位产生任何效果所需要的。

见这里：http: [//jsfiddle.net/5BSva/11/](http://jsfiddle.net/5BSva/11/)

# android - 尝试使用 soundPool.load 加载超过 50 个声音

> ID：15958694
> 
> 赞同：0
> 
> 时间：2013-04-11T20:54:55.027
> 
> 标签：android

我有一个大约 80 种声音的音板。加载 53 个声音后，会有一分钟的延迟，然后就可以正常工作了。有没有办法来解决这个问题？？声音由 soundPool.load(this, cGlobals.mSounds[i], 1); 加载。我在acer平板电脑（3.0）和Virgin智能手机（2.2）上都试过了，智能手机延迟不长，大约20秒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T20:57:11.440

会不会是第 53 个声音很大，所以加载时间长？请记住，它在加载时将它们完全转换为波形声音。可能是异步的，因此该方法返回速度很快（不确定）。

内存也可能满了？80 个声音很多，尤其是未压缩的。我怀疑 soundpool 是为这么多声音而设计的。

# rubygems - OSx 上的 Ruby 宝石

> ID：15958695
> 
> 赞同：0
> 
> 时间：2013-04-11T20:55:03.157
> 
> 标签：rubygems

我在 Mac OSX 上使用 gem install 命令安装了一个 gem。它安装在 ./library/ruby/gems/1.8/gems//lib/ 下

现在我想使用这个 Gem 的功能。但是，在代码中使用它时，它无法从相同的对象访问对象。请帮助解决这个问题。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-15T17:35:20.173

你需要

```
require 'rubygems' 
```

在您要求之前

# r - 从文本文件中读取数据并重塑 R 中的数据

> ID：15958697
> 
> 赞同：1
> 
> 时间：2013-04-11T20:55:04.663
> 
> 标签：r

我有一个不同时间间隔的数据集。数据在每个时间间隔的数据之前有三个注释行。每个时间间隔有 500 个数据点。我想更改数据集，使我具有以下格式：

```
t1  t2  t3   ................
0.00208 0.00417 0.00625 .................
a1  a2  a3 ...................
b1  b2  b3 ...................
c1  c2  c3 .................
...............................
................................ 
```

该文件的链接如下：[https ://www.dropbox.com/s/hc8n3qcai1mlxca/WAT_DEP.DAT](https://www.dropbox.com/s/hc8n3qcai1mlxca/WAT_DEP.DAT)

正如您将在文件中看到的，每个间隔的时间是数据开始前第三行的第二个数据。第一次，t = 0.00208。我需要将几行中的数据更改为一列。最后，我需要创建一个具有上述格式的数据框。在上面的示例中，a1、b1、c1 是时间 t1 的数据，依此类推。

很抱歉发布了一个相对较大的数据集。

感谢您的帮助。

**添加了示例数据**

样本数据如下：

```
** N:SNAPSHOT    TIME      DELT[S]
** WATER DEPTH [M]: (HP(L),L=2,LA)
      1800        0.00208   0.10000
     3.224     3.221     3.220     3.217     3.216     3.214     3.212     3.210     3.209     3.207
     3.205     3.203     3.202     3.200     3.199     3.197     3.196     3.193     3.192     3.190
     3.189     3.187     3.186     3.184     3.184     3.182     3.181     3.179     3.178     3.176
     3.175     3.174     3.173     3.171     3.170     3.169     3.168     3.167     3.166     3.164
     3.164     3.162     3.162     3.160     3.160     3.158     3.158     3.156     3.156     3.155
     3.154     3.153     3.152     3.151     3.150     3.150     3.149     3.149     3.147     3.147
     3.146     3.146     3.145     3.145     3.144     3.144     3.143     3.143     3.142     3.142
     3.141     3.142     3.141     3.141     3.140     3.141     3.140     3.140     3.139     3.140
     3.139     3.140     3.139     3.140     3.139     3.140     3.139     3.140     3.139     3.140
     3.139     3.140     3.140     3.140     3.140     3.141     3.141     3.142     3.141     3.142
     3.142     3.142     3.143     3.143     3.144     3.144     3.145     3.145     3.146     3.146
     3.147     3.148     3.149     3.149     3.150     3.150     3.152     3.152     3.153     3.154
     3.155     3.156     3.157     3.158     3.159     3.160     3.161     3.162     3.163     3.164
     3.165     3.166     3.168     3.169     3.170     3.171     3.173     3.174     3.176     3.176
     3.178     3.179     3.181     3.182     3.184     3.185     3.187     3.188     3.190     3.191
     3.194     3.195     3.196     3.198     3.199     3.202     3.203     3.205     3.207     3.209
     3.210     3.213     3.214     3.217     3.218     3.221     3.222     3.225     3.226     3.229
     3.231     3.233     3.235     3.238     3.239     3.242     3.244     3.247     3.248     3.251
     3.253     3.256     3.258     3.261     3.263     3.266     3.268     3.271     3.273     3.276
     3.278     3.281     3.283     3.286     3.289     3.292     3.294     3.297     3.299     3.303
     3.305     3.307     3.311     3.313     3.317     3.319     3.322     3.325     3.328     3.331
     3.334     3.337     3.340     3.343     3.347     3.349     3.353     3.356     3.359     3.362
     3.366     3.369     3.372     3.375     3.379     3.382     3.386     3.388     3.392     3.395
     3.399     3.402     3.406     3.409     3.413     3.416     3.420     3.423     3.427     3.430
     3.435     3.438     3.442     3.445     3.449     3.453     3.457     3.460     3.464     3.468
     3.472     3.475     3.479     3.483     3.486     3.491     3.494     3.498     3.502     3.506
     3.510     3.514     3.518     3.522     3.526     3.531     3.534     3.539     3.542     3.547
     3.551     3.555     3.559     3.564     3.567     3.572     3.576     3.581     3.584     3.589
     3.593     3.598     3.602     3.606     3.610     3.615     3.619     3.624     3.628     3.633
     3.637     3.642     3.646     3.651     3.655     3.660     3.664     3.669     3.673     3.678
     3.682     3.686     3.691     3.695     3.700     3.704     3.710     3.714     3.719     3.723
     3.728     3.733     3.738     3.742     3.747     3.752     3.757     3.761     3.766     3.771
     3.776     3.780     3.786     3.790     3.795     3.800     3.805     3.810     3.815     3.819
     3.825     3.829     3.835     3.839     3.845     3.849     3.855     3.859     3.865     3.869
     3.875     3.879     3.885     3.889     3.895     3.900     3.905     3.910     3.915     3.920
     3.926     3.930     3.935     3.941     3.945     3.951     3.956     3.961     3.966     3.972
     3.976     3.982     3.987     3.993     3.997     4.003     4.008     4.014     4.018     4.024
     4.029     4.035     4.039     4.045     4.050     4.056     4.061     4.066     4.071     4.077
     4.082     4.088     4.093     4.099     4.103     4.109     4.114     4.120     4.125     4.131
     4.136     4.142     4.147     4.153     4.157     4.163     4.168     4.174     4.179     4.185
     4.190     4.195     4.201     4.206     4.212     4.217     4.223     4.228     4.234     4.239
     4.245     4.250     4.256     4.261     4.267     4.272     4.278     4.283     4.289     4.294
     4.300     4.305     4.311     4.316     4.322     4.327     4.333     4.339     4.345     4.350
     4.356     4.361     4.367     4.372     4.378     4.383     4.389     4.394     4.400     4.405
     4.411     4.417     4.423     4.428     4.434     4.439     4.445     4.450     4.456     4.461
     4.467     4.473     4.478     4.484     4.489     4.495     4.500     4.506     4.511     4.517
     4.523     4.529     4.534     4.540     4.545     4.551     4.556     4.562     4.568     4.574
     4.579     4.585     4.590     4.596     4.601     4.607     4.613     4.619     4.624     4.630
     4.635     4.641     4.646     4.652     4.658     4.664     4.669     4.675     4.680     4.686
     4.691     4.697     4.703     4.709     4.714     4.720     4.725     4.731     4.736     4.741
** N:SNAPSHOT    TIME      DELT[S]
** WATER DEPTH [M]: (HP(L),L=2,LA)
      3600        0.00417   0.10000
     4.124     4.123     4.123     4.122     4.122     4.121     4.121     4.120     4.120     4.119
     4.118     4.117     4.117     4.116     4.116     4.115     4.115     4.114     4.114     4.114
     4.114     4.113     4.113     4.112     4.112     4.111     4.111     4.110     4.110     4.109
     4.109     4.109     4.109     4.108     4.108     4.107     4.107     4.106     4.107     4.106
     4.106     4.105     4.105     4.105     4.105     4.104     4.104     4.104     4.104     4.103
     4.103     4.103     4.102     4.102     4.102     4.102     4.101     4.102     4.101     4.101
     4.101     4.101     4.100     4.101     4.100     4.101     4.100     4.100     4.100     4.100
     4.100     4.100     4.100     4.100     4.100     4.100     4.100     4.100     4.100     4.100
     4.100     4.100     4.100     4.100     4.100     4.100     4.100     4.100     4.100     4.101
     4.100     4.101     4.100     4.101     4.101     4.101     4.101     4.102     4.101     4.102
     4.102     4.101     4.102     4.102     4.103     4.102     4.103     4.103     4.104     4.103
     4.104     4.104     4.105     4.104     4.105     4.105     4.106     4.106     4.107     4.106
     4.107     4.107     4.108     4.108     4.109     4.109     4.110     4.110     4.110     4.110
     4.111     4.111     4.112     4.112     4.113     4.113     4.114     4.114     4.115     4.115
     4.116     4.116     4.117     4.117     4.118     4.118     4.120     4.120     4.121     4.121
     4.122     4.122     4.122     4.123     4.123     4.125     4.125     4.126     4.126     4.127
     4.128     4.129     4.129     4.130     4.130     4.132     4.132     4.133     4.133     4.135
     4.135     4.136     4.137     4.138     4.138     4.139     4.140     4.141     4.141     4.143
     4.143     4.145     4.145     4.146     4.147     4.148     4.149     4.150     4.150     4.152
     4.152     4.154     4.154     4.156     4.156     4.158     4.158     4.160     4.160     4.162
     4.162     4.163     4.164     4.165     4.166     4.167     4.168     4.169     4.171     4.171
     4.173     4.173     4.175     4.176     4.177     4.178     4.180     4.180     4.182     4.183
     4.184     4.185     4.187     4.187     4.189     4.190     4.192     4.192     4.194     4.195
     4.197     4.197     4.199     4.200     4.202     4.203     4.204     4.205     4.207     4.208
     4.210     4.210     4.212     4.213     4.215     4.216     4.218     4.219     4.221     4.221
     4.223     4.224     4.225     4.227     4.228     4.230     4.231     4.233     4.234     4.236
     4.237     4.239     4.240     4.242     4.243     4.245     4.246     4.248     4.249     4.251
     4.252     4.254     4.255     4.257     4.258     4.260     4.262     4.264     4.265     4.267
     4.268     4.270     4.271     4.273     4.275     4.277     4.278     4.280     4.281     4.283
     4.285     4.287     4.288     4.290     4.291     4.294     4.295     4.297     4.298     4.301
     4.302     4.303     4.305     4.307     4.309     4.310     4.312     4.314     4.316     4.317
     4.320     4.321     4.323     4.325     4.327     4.328     4.331     4.332     4.334     4.336
     4.338     4.339     4.342     4.343     4.346     4.347     4.349     4.351     4.353     4.355
     4.357     4.359     4.361     4.362     4.365     4.366     4.369     4.370     4.373     4.374
     4.377     4.378     4.381     4.382     4.385     4.386     4.389     4.390     4.393     4.394
     4.397     4.398     4.400     4.402     4.404     4.406     4.408     4.411     4.412     4.415
     4.416     4.419     4.421     4.423     4.425     4.427     4.429     4.432     4.433     4.436
     4.437     4.440     4.442     4.444     4.446     4.449     4.450     4.453     4.455     4.457
     4.459     4.462     4.463     4.466     4.468     4.470     4.472     4.475     4.476     4.479
     4.481     4.484     4.485     4.488     4.490     4.492     4.494     4.497     4.499     4.501
     4.503     4.505     4.508     4.509     4.512     4.514     4.517     4.519     4.521     4.523
     4.526     4.528     4.530     4.532     4.535     4.537     4.540     4.541     4.544     4.546
     4.549     4.551     4.554     4.555     4.558     4.560     4.563     4.565     4.568     4.569
     4.572     4.574     4.577     4.579     4.582     4.584     4.586     4.588     4.591     4.593
     4.596     4.598     4.601     4.603     4.605     4.607     4.610     4.612     4.615     4.617
     4.620     4.622     4.624     4.627     4.628     4.631     4.633     4.636     4.638     4.641
     4.643     4.646     4.648     4.651     4.653     4.656     4.657     4.660     4.662     4.665
     4.667     4.670     4.672     4.675     4.677     4.680     4.682     4.685     4.687     4.690
     4.692     4.695     4.697     4.700     4.702     4.705     4.706     4.709     4.711     4.714
     4.716     4.719     4.721     4.724     4.726     4.729     4.731     4.734     4.736     4.741 
```

目前，我每次都有 10 列的数据。我想将其创建为一列 500 个数据点。所以，我想安排数据列，以便首先使用第 1 行的数据，然后使用第 1 行的数据，依此类推。这样，我们将有一次一列。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T22:32:36.533

这将生成一个矩阵 ，`result`其中包含第一行中的时间和相应时间下方的列中的数据。

```
L <- readLines(infile)

nt <- length(grep("TIME", L)) # no. of TIME lines
nd <- round((length(L) / nt) - 3) # no. of data lines per time

# times
ix.times <- rep(c(FALSE, TRUE, FALSE), c(2, 1, nd))
times <- scan(text = L[ix.times]) [ c(FALSE, TRUE, FALSE) ]

# data
ix.dat <- rep(c(FALSE, TRUE), c(3, nd))
dat <- matrix(scan(text = L[ix.dat]), nc = nt)

result <- rbind(times, dat) 
```

前几行是：

```
> head(result)
         [,1]    [,2]
times 0.00208 0.00417
      3.22400 4.12400
      3.22100 4.12300
      3.22000 4.12300
      3.21700 4.12200
      3.21600 4.12200 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T21:08:54.597

对于您问题的第一部分：删除评论行的想法是使用回收。`fill=TRUE`首先，我使用then读取所有数据：

```
dat <- read.table(file=file.Name,fill=TRUE) 
```

然后，由于您有固定的行数，您可以这样做：

```
dat <- dat[c(rep(FALSE,3),rep(TRUE,500)),] 
```

你会得到一个干净的 data.frame 。

我不明白你问题的第二部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T22:29:06.090

**第二部分解决方案：**

首先，将样本数据称为`sample`。我假设下面的解决方案中有两列。您可以使用它`lapply`来应用到其他列。

```
col.1<-as.data.frame(sample[,1])
col.2<-as.data.frame(sample[,2])

Now col.1 and col.2 are dataframes. Try to have the same colnames for `rbind` to work.

sample.1<-rbind(col.1,col.2) 
```

# jquery - 三重 jquery 动画和同时响应

> ID：15958700
> 
> 赞同：1
> 
> 时间：2013-04-11T20:55:20.307
> 
> 标签：jquery, jquery-plugins, slideshow

问题的标题可能令人困惑，所以我将分析我的意思。我需要做的是以下的组合：

*   5 个元素，类似于星级评分功能：每次单击一个元素时，所有先前的元素都会改变颜色（我通过动画背景 div 的宽度来完成此操作）。

*   5个元素，与上面几乎相同，但设计不同。功能是相同的，除了每个元素的宽度不同。

*   5 元素幻灯片与上一个/下一个寻呼机。两个寻呼机都应显示上一张/下一张幻灯片的数量以及与上一张/下一张幻灯片相关的一些文本。

我已经构建了所有这三个并且它们工作。但我做的麻烦是将它们结合起来。例如，单击第一个“插件”的第三个元素应该以相同的方式触发其他两个插件（即对于第二个插件，背景宽度动画到第三个元素，对于第三个插件，滑块转到第三张幻灯片，所有相关信息、寻呼机号码和文本正确更改）。

我无法访问我现在正在处理的代码，但我也不想让任何人为我的问题编写这么多代码。

**更新**：这是 jsfiddle：http: [//jsfiddle.net/weborion/3S4WG/5/](http://jsfiddle.net/weborion/3S4WG/5/)。另外，@Moby 的特技替身：为什么这部分是必要的：function doThis(callback) {

```
// Initialise your schtick

// fire off the callback
if (typeof callback === "function") {
    callback();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:17:09.487

我会使用回调来做到这一点：

```
function doThis(callback) {

    // Initialise your schtick

    // fire off the callback
    if (typeof callback === "function") {
        callback();
    }

    // some more schlep and tickle here

}

function doThat(callBack) {
    // We'll fiddle-fart around here once the previous schtick is complete.

    if (typeof callback === "function") {
        callback();
    }

    // Then finish out this particular animation

}

function doTheOther() {
    // And finally we'll bring the madness to a halt.
}

doThis(doThat(doTheOther)); 
```

# c# - 时间：2019-01-01 标签：c#convert string to double array

> ID：15958701
> 
> 赞同：-3
> 
> 时间：2013-04-11T20:55:23.590
> 
> 标签：c#, arrays, string, double

我整天都在工作，试图将文本文件中的字符串转换为双精度数组，但无法弄清楚为什么我收到错误“无法读取文件；输入字符串的格式不正确”。

我目前有一个应用程序以字符串形式读回文本文件的内容。我希望当字符串转换为双精度数组时，我可以告诉控制台打印双精度数组，它会打印最初在字符串中的文本文件的值。

这是我的代码：

```
double[] x = new double [3501]; 
```

这是我定义双数组的地方。我先这样做：

```
try
{
  using (StreamReader sr = new StreamReader("test.txt"))
  {
     String line =  sr.ReadToEnd();
     string[] fields = line.Split(new char[] { ' ' });
     x = new double [fields.Length];

     for (int i = 0; i < fields.Length; i++)
     {
        x[i] = Convert.ToDouble(fields[i]);
        Console.WriteLine(x[i]);
     } 
```

Line 是输入字符串，其中包含一列充满数字的列，然后被拆分。然后我告诉它打印 x[i] 的内容，但那是抛出异常的时候：

```
catch (Exception e)
{
   // Log the exception and quit...                
   Console.WriteLine("The file could not be read:");
   Console.WriteLine(e.Message);
} 
```

谁能弄清楚我的代码有什么问题以及为什么它不起作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T21:05:44.920

您正在转换的字符串之一无法解析`ToDouble`

所以改为这样做（在你的循环内）：

```
double parsed = 0;
try 
{
    parsed = Convert.ToDouble(fields[i]);
}
catch (FormatException e) 
{ 
    Console.WriteLine("Couldn't parse '{0}'", fields[i]);
    continue;
}

x[i] = parsed;
Console.WriteLine(parsed); 
```

这将捕获`FormatException`，打印它无法读取的内容，然后进入下一次迭代循环。如果它没有遇到异常，它将打印已解析的双精度。

您可以在此处查看该异常的详细信息：http: [//msdn.microsoft.com/en-us/library/zh1hkw6k.aspx](http://msdn.microsoft.com/en-us/library/zh1hkw6k.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T21:04:59.590

根据[MSDN](http://msdn.microsoft.com/en-us/library/f2ke0fzy.aspx)，构造函数的参数`StreamReader`必须是文件的完整路径，而不仅仅是相对路径。从页面：

> 完整的文件路径由 path 参数指定。此构造函数将编码初始化为 UTF8Encoding 并将缓冲区大小初始化为 1024 字节。

当它告诉您无法读取文件时，这看起来像是在指出`IOException`问题所在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T22:06:40.527

您必须确保您的 StreamReader 路径是可访问的。例如，尝试更改行：

```
using (StreamReader sr = new StreamReader("test.txt")) 
```

类似于...的东西

```
using (StreamReader sr = new StreamReader("C:\\Zach\\Documents\\test.txt")) 
```

这是我所做的唯一更改，我可以看到控制台将每个值都打印为双精度值。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-11T21:04:03.680

也许您正在阅读最后一行并且那里没有任何价值，所以当您尝试转换时捕获异常。尝试在 FOR 中使用 fields.Length-1。或者像@Robert Harvey 说的那样，你的一个价值观是冷的，不会被解析。

# oracle - 在logminer中找不到我想要的，其实最近也找不到任何东西

> ID：15958704
> 
> 赞同：1
> 
> 时间：2013-04-11T20:55:40.647
> 
> 标签：oracle

我是一所学校的系统管理员，所以我是一名 IT 通才，多才多艺，一无是处，对吧？我们的学生信息系统运行在 Oracle 11g 之上。想知道如何使用 logminer 至少找出数据库中不应该更改的内容何时更改。

我已经配置了一个测试服务器来玩，所以请放心，我在这里玩的时候我们的生产系统没有风险。

服务器是 Windows。我转到命令提示符，键入 sqlplus / as sysdba。

执行`dbms.logmnr.addlogfile`blah, blah 多次以添加日志文件。

更改会话设置`NLS_DATE_FORMAT = 'mm-dd-yyyy HH24:mi:ss';`，以便时间戳告诉我的不仅仅是日期。

然后我转到我的测试服务器上的应用程序并更改学生人口统计记录。我想使用 logminer 找到这个变化。

我做了一个`select timestamp,sql_undo from V$LOGMNR_CONTENTS WHERE TIMESTAMP > TO_DATE('04-11-2013 11:59:00');` （我刚刚做了改变，下午 3 点左右）

我没有行。

如果我做同样的事情，但在午夜之后的某个时间，我会得到数千行，因为该应用程序具有在午夜开始执行维护的例程，例如重新计算学生的班级排名。

那么为什么我没有找到我所做的更改记录？我相信我正在查看正确的日志文件，否则我不会在午夜看到活动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-23T14:02:25.773

尽管您的最新条目已记录，但它不会出现在 V$LOGMNR_CONTENTS 中，直到它记录了足够数量的更新。例如，如果您进行 100 次更新，您可能会获得 80 次。要清除剩余的 20 次，您需要完成更多更新，以便再次看到它们。我们遇到了类似的问题，logminer 尤其没有显示最新更新，尤其是在它们很少的情况下。我们必须创建一个虚拟表来定期创建一些更新，以便 logminer 始终主动显示更新，并且缓冲区中没有存储任何内容。在我们的用例中，创建虚拟表是可以的，我不确定在您的情况下是否可以。

# php - 如何使用php验证图像格式

> ID：15958708
> 
> 赞同：3
> 
> 时间：2013-04-11T20:55:52.173
> 
> 标签：php, image, format

我需要验证应用程序的大量图像文件，情况是我有 10 个目录，每个目录有近 10,000 个图像，大约有 100,000 个文件。这些文件应该是 gif 文件，但其中很多（实际上意味着很多）是 jpg 文件，设计人员将扩展名从 .jpg 更改为 .gif 而不转换文件格式。这导致应用程序崩溃，它使用这些图像创建 pdf 文件，如果我告诉程序使用文件 somefile.gif 但它确实是一个扩展名为 pdf 的 jpg 创建者崩溃。我不想在 irfanview 或 photoshop 中打开每个文件来验证格式，然后在必要时对其进行修改。有没有图书馆，班级，

我找不到任何想法来做到这一点，有人可以帮助我吗？

提前非常感谢！！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T20:58:35.317

我个人使用[exif_imagetype](http://php.net/manual/en/function.exif-imagetype.php)进行真正的验证，而不是检查扩展名或 mime 类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T20:59:37.193

如果您需要在 gif 或 jpeg 之间进行查找，该功能`getimagesize()`可以为您完成。请参阅[http://php.net/getimagesize](http://php.net/getimagesize)。

```
list(,,$imageType) = getimagesize($path);
if ($imageType === IMAGETYPE_GIF) {
    // GIF found
} 
```

# c# - 将验证组分配给 ASP.Net 详细信息视图中自动生成的插入按钮

> ID：15958710
> 
> 赞同：-1
> 
> 时间：2013-04-11T20:55:56.843
> 
> 标签：c#, asp.net, webforms

有没有办法将 ValidationGroup 添加到 ASP.Net 中自动生成的 DetailsView 按钮？

还是我必须设置 autogenerate=false 并自己制作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T18:54:53.837

在使用 CommandNames 属性时，我偶然发现了一种将验证组添加到按钮的简单方法，同时仍然享受自动生成功能的大部分好处。

它就像设置 CommandName = "Insert" 一样简单。据我所知，最终处理按钮引发的bubbleevent的自动生成的EventHandler检查CommandName =“Insert”，“Update”等。

如果您知道事件处理程序要查找的命令的名称，您可以简单地将按钮的 CommandName = 设置为该命令，它会为您处理它。

您仍然必须制作自己的按钮，但不必重写事件处理程序，并且可以为您的按钮设置验证组。

# mysql - 带有 Tomcat 的 HTTP servlet

> ID：15958717
> 
> 赞同：0
> 
> 时间：2013-04-11T20:56:16.837
> 
> 标签：mysql, tomcat, servlets

我开始学习 servlet，我正在使用 MySQL 和 Tomcat。我正在尝试制作一个简单的servlet，当单击提交按钮时，它将通过`doGet()`再次调用该函数来显示一组不同的指令并将光标移动到下一组。

```
protected void doGet(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException {
{         
    out.println("<HTML><HEAD><TITLE>Instructions</TITLE><HEAD>");
    out.println("<BODY>");

    ResultSet rs = stmt.executeQuery("SELECT InstructNo, Instruct FROM Intructions");

    if(rs.next())
    {
        out.println(rs.getString("InstructNo") + ". " + rs.getString("Instruct"));
    }

    out.println("<form method=\"get\" action=\"\">");
    out.println("<input type=\"radio\" name=\"ans\" value=\"true\">True<br>");
    out.println("<input type=\"radio\" name=\"ans\" value=\"true\">False<br>");
    out.println("<input type=\"submit\" value=\"Submit\">");
    out.println("</BODY></HTML>"); 
```

`doGet()`当单击提交按钮并再次调用该函数时，我无法弄清楚如何将光标移动到下一组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T21:07:52.647

首先，您需要存储一些可以让您知道您在列表中的位置的内容。因此，例如，添加一个具有某种值的隐藏表单字段，使您可以从数据库中读取正确的内容。我假设您在数据库中的记录已编号。

```
 out.println("<input type=\"radio\" name=\"ans\" value=\"true\">False<br>");
  out.println("<input type='hidden' name='index' value='" + index + "' />");
  out.println("<input type=\"submit\" value=\"Submit\">"); 
```

然后您需要在服务器获取请求时收集该值并使用它来读取下一个值：

```
 String index = req.getParameter("index");
 int idx = Integer.parseInt(index); // add code to detect an exception here
 ResultSet rs = stmt.executeQuery("SELECT InstructNo, Instruct FROM Intructions where Index=" + index); // Check my rusty SQL here 
```

然后找出下一个：

```
index = "" + (idx+1); // The +1 means to get the next one next time
out.println("<form method=\"get\" action=\"\">"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T21:09:20.287

用while循环替换`if`语句以遍历数据库中的所有记录，然后您可以使用相同的代码将其打印到网页上。

您可能还想了解使用 JSP 将控制器（servlet）和视图（呈现给用户的网页；或 JSP）分开。

# java - 如何在按下或打开活动时隐藏滑动菜单

> ID：15958719
> 
> 赞同：1
> 
> 时间：2013-04-11T20:56:20.650
> 
> 标签：java, android, slidingmenu

[https://github.com/jfeinstein10/SlidingMenu](https://github.com/jfeinstein10/SlidingMenu)

我正在使用这个库，我想在打开一个新的时隐藏滑动菜单`activity`，这样当我按下返回时我不希望出现滑动菜单。

```
@Override
public void onListItemClick(ListView lv, View v, int position, long id) {
    switch (position) {
    case 0:
        Intent intent = new Intent("android.intent.action.Home");
        getActivity().startActivity(intent);
        break;
   }
} 
```

上面的代码在我的`SherlockListFragment`课堂上，一旦我开始一个新的活动，我想隐藏滑动菜单。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-11T21:27:17.317

如果您扩展了 SlidingActivity，那么您只需要：-

```
toggle(); 
```

应该这样做:-)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T21:56:16.917

```
@Override
public void onListItemClick(ListView lv, View v, int position, long id) {   
    switch (position) {
    case 0:
        Intent intent = new Intent("android.intent.action.Home");
        getActivity().startActivity(intent);
        // Toggle the sliding menu
        ((YourHostActivity) getActivity()).getSlidingMenu().toggle();
        break;
   }
} 
```

在承载滑动菜单的活动中：

```
public onCreate(...) {
    // save the slidingmenu instance to a propery
    mSlidingMenu = new SlidingMenu(this);
}

// create a getter
public SlidingMenu getSlidingMenu() {
    return mSlidingMenu;
} 
```

# c# - 使用 IIS Express / Visual Studio 的 SimpleInjector 验证过程

> ID：15958720
> 
> 赞同：3
> 
> 时间：2013-04-11T20:56:23.207
> 
> 标签：c#, dependency-injection, ioc-container, simple-injector

我的解决方案中内置了一个专有事件模型，它有一个订阅实例化过程，该过程使用`GetAllInstances()`SimpleInjector 的方法来定位事件的所有订阅者

```
public IEnumerable<ISubscriber<T>> GetSubscriptions<T>()
    where T : IEvent
{
    return _container.GetAllInstances<ISubscriber<T>>();
} 
```

根据我是否注册所有实例，我的性能会出现巨大`ISubscriber`差异

这是我用来注册的代码`ISubscriber`

```
internal void Configure(Container container)
{
    container.RegisterManyForOpenGeneric(
        typeof(ISubscriber<>),
        AccessibilityOption.PublicTypesOnly,
        (serviceType, implTypes) => 
            container.RegisterAll(serviceType, implTypes),
        AppDomain.CurrentDomain.GetAssemblies()
    );

    container.RegisterDecorator(typeof(ISubscriber<>), 
        typeof(SubscriberTraceDecorator<>));

    container.RegisterDecorator(typeof(ISubscriber<>), 
        typeof(SubscriberExceptionDecorator<>));
} 
```

当我在没有调用`RegisterManyForOpenGeneric`容器验证的情况下引导容器时，大约需要 11 秒并返回结果：

> 配置警告：未检测到警告。
> 
> 注册：计数 = 158

但是，当我取消注释对`RegisterManyForOpenGeneric`容器验证的调用大约需要 72 秒并返回结果时：

> 配置警告：已检测到 136 个容器注册类型，这些类型被 181 个组件引用
> 
> 注册：计数 = 475

我的问题是——这样可以吗，还是我在这里做错了什么？我一直在添加更多`ISubscriber`的课程，现在启动（方式）太慢了......

* * *

**更新**

这似乎只是**在 Visual Studio**中运行的 WebAPI 项目的问题。从控制台应用程序引导需要 15 秒在 Visual Studio 中运行。将 WebAPI 项目部署到 IIS 后，验证需要 6 秒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T19:34:09.350

如果不调用`Verify()`，Simple Injector 容器将在第一次请求委托时回退到一种“及时”的委托编译。在这种情况下，容器通常会构建一个委托来创建整个对象图（那个“根”对象+它的所有直接和间接依赖项）。由于委托是为整个对象图构建的，因此通常只编译一个委托。

将其与调用`Container.Verify()`方法进行比较。调用时，此方法会遍历所有注册并为每个注册请求一个实例。这会强制为容器中的每个注册编译委托（不仅针对直接请求的根类型）。

换句话说，调用有很多开销，`Verify`并且所有这些生成和编译都是在应用程序的启动阶段完成的，与您否则会得到的类似即时行为的行为相比。

启动期间的调用`Verify()`并不适合每个应用程序。完成所需的时间`Verify()`取决于许多因素，例如：

*   机器的力量。
*   无论您是否在调试器中运行。
*   容器中的注册数。
*   使用特殊功能。正如您所注意到的，应用装饰器会对编译过程产生影响。当装饰器包含泛型类型约束时尤其如此。

最好`Verify()`在启动期间始终调用，直到...

直到配置变得太大而无法调用`Verify()`。在这种情况下，您可以执行以下操作：

1.  在附加调试器时防止调用`Verify`，因为这里的开销是最大的。
2.  `Verify`如果应用程序启动时间过长，请防止在生产启动期间调用。
3.  创建一个调用引导程序代码的单元测试来请求配置的容器实例并让单元测试调用`Verify()`它。这可确保在将软件推出测试、验收或生产之前很久仍能发现配置错误。[可验证的配置](https://simpleinjector.codeplex.com/wikipage?title=How-to#Verifying-Configuration)非常重要。

# ms-access - Access VBA 中的 Microsoft Outlook 对象库

> ID：15958722
> 
> 赞同：2
> 
> 时间：2013-04-11T20:56:38.033
> 
> 标签：ms-access, dll, vba, office-2010, office-2003

我已经[在这里提到了这个关于后期绑定的帖子](https://stackoverflow.com/questions/11196432/outlook-object-library-does-not-switch-between-versions-12-and-14)，但我不确定它是否回答了我的问题。我被迫使用 Access VBA 在 XP 的 Office 2003 和 Win 7 的 Office 2010 之间切换。如果我在 2010 年编辑，则 2003 年无法打开文件，因为“加载 .dll 失败”这与 Office 2003 中缺少我的 Microsoft Outlook 14.0 对象库有关。

如果我正在进行后期绑定，是否有任何理由检查对象库？还是无论如何都必须检查它，我总是需要在 2003 年进行编辑？

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T21:02:42.297

不，如果您使用后期绑定，则不需要在 VBA 项目中“勾选”参考。

通常我会做的是

*   使用早期绑定构建我的代码，因此 IntelliSense 将帮助我避免拼写错误并帮助我记忆：方法/属性名称、参数等，然后

*   一旦（或多或少）最终确定，将我的代码转换为后期绑定

这就是为什么在我的一些示例代码中，您会看到类似

```
Dim fso as Object  '' FileSystemObject
...
Set fso = CreateObject("Scripting.FileSystemObject")  '' New FileSystemObject 
```

注释 ( `''`) 中的项目是原始的早期绑定声明，然后我将它们替换为`Object`and`CreateObject()`调用（后期绑定），但将原件保留为注释，以防我想将它们改回来。

而且，您似乎已经发现，我还必须记住*删除*VBA 项目中的引用，否则可能会在不同的机器上导致问题（在这些情况下，避免这些问题是后期绑定的重点）。

# ruby-on-rails - 使用jQuery更新rails中的进度条

> ID：15958723
> 
> 赞同：3
> 
> 时间：2013-04-11T20:56:41.067
> 
> 标签：ruby-on-rails, ajax, jquery

我是 JavaScript/jQuery 的完全新手，我相信这是一个非常简单的问题；但是我无法完成它。

我有一个异步任务正在执行（由`sidekiq`），它的进度可通过模型（`percentage_complete`）中的一个方法获得，该方法从 Redis 检索其进度。

我想在模型`show`视图中显示一个进度条，并且我希望它使用 AJAX 每 x 秒更新一次。

进度条在`show.html.erb`文件上显示如下：

```
<div class="progress">
  <div class="bar" style="width: <%= @model.percentage_complete %>%;"></div>
</div> 
```

如何设置 jQuery 脚本以异步更新此属性？

**编辑**

我也有`:status`一个设置做的属性`"done"`一个在任务完成时发生这种情况时，我想停止更新。

通过阅读我的问题，我似乎什么都没尝试，只是希望有人为我编写代码。让我添加一些评论：

*   我知道我应该`setInterval`每隔“x”秒使用一次更新属性
*   我知道我应该使用`$('.progress .bar').width(<%= @model.percentage_complete %>%)`来设置新的百分比

但是，由于我不熟悉 jQuery 和 JavaScript，特别是在 Rails 中，我不确定该脚本是否应该加载到视图中，或者它是否应该是视图本身。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:05:10.643

我通过创建一个动作来检索状态来解决它

```
# GET /status/1.json
def status
  @batch = Batch.find(params[:id])

  respond_to do |format|
    format.json
  end
end 
```

并使用以下 JavaScript：

```
<script type="text/javascript">
function progress(){
    var progress = setInterval(function() {
      var $bar = $('.bar');
      var $pct = $('#pct');
      $.get("<%= @batch.id %>/status.json", function(data){
        if (data.status == "done") {
          location.reload();
        } else {
          $bar.width(data.progress+"%");
          $pct.text(data.progress+"%");
        }
      });
    }, 800);
}

$(document).ready(function() {
  $.get("<%= @batch.id %>/status.json", function(data) {
    if (data.status == "processing") {
      progress();
    }
  });
});
</script> 
```

# iphone - 当前位置靠近引脚位置时显示警报视图

> ID：15958731
> 
> 赞同：0
> 
> 时间：2013-04-11T20:57:04.073
> 
> 标签：iphone, loops, annotations, location, mapkit

我有用户当前位置和注释引脚位置。当用户点击一个按钮时，应用程序开始计算用户当前位置和图钉位置之间的距离。这是我的代码：

```
- (IBAction)done:(id)sender {

[Locate startUpdatingLocation];
CLLocation *current;
CLLocation *pin;
do{
    current=[[CLLocation alloc]initWithLatitude:Locate.location.coordinate.latitude longitude:Locate.location.coordinate.longitude];
    pin=[[CLLocation alloc]initWithLatitude:arrived.latitude longitude:arrived.longitude];

}while([current distanceFromLocation:pin]>1000);

} 
```

问题是，当我单击此按钮（完成）时，它似乎进入了一个无限循环并且应用程序停止工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T17:38:25.930

您应该使用 if 语句，而不是 for 循环。该循环将一直执行，直到用户在引脚 1000 米范围内。

```
- (IBAction)done:(id)sender {

    [Locate startUpdatingLocation];
    CLLocation *current;
    CLLocation *pin;

    if ([current distanceFromLocation:pin] > 1000) {
        current = [[CLLocation alloc]initWithLatitude:Locate.location.coordinate.latitude longitude:Locate.location.coordinate.longitude];
        pin = [[CLLocation alloc]initWithLatitude:arrived.latitude longitude:arrived.longitude];
   }

} 
```

我想一旦用户的当前位置发生变化，您会想要重新调用此方法。

# perl - 如何获取原始帖子数据并使用 Apache2::Request 访问参数？

> ID：15958736
> 
> 赞同：3
> 
> 时间：2013-04-11T20:57:21.147
> 
> 标签：perl, mod-perl2

Apache2::Request 似乎没有提供获取原始帖子数据的方法；有没有我想念的？

或者，有没有办法单独读取发布数据（在内容处理程序中 - 在那之前没有任何东西会弄乱发布数据）并用它初始化 Apache2::Request 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-01T22:08:47.907

来自 mod_perl 食谱：

```
my $r = shift;

my $content;
$r->read($content,$r->header_in('Content-length'));

my @pairs = split(/[&;]/,$content);

foreach my $pair (@pairs) {
    my ($parameter,$value) = split('=',$pair,2);
} 
```

# css - 在 Zend 中设置 body 类

> ID：15958737
> 
> 赞同：2
> 
> 时间：2013-04-11T20:57:26.820
> 
> 标签：css, zend-framework, frameworks, styles

我正在开发 Zend 1.12 应用程序并尝试将样式类分配给布局正文标记。

我发现这个似乎可以处理任务的示例 Bootstrap.php 文件： [https ://gist.github.com/fideloper/1302688](https://gist.github.com/fideloper/1302688)

它似乎很好地融合在一起，但身体的类总是空白。

有人可以在这里为我指出正确的方向，了解如何将课程分配给身体吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T22:39:42.533

对我上面引用的代码段进行了小改动。

```
class AppName_Helper_BodyClass extends Zend_View_Helper_Placeholder_Container_Standalone {

    private $_classes = array();

    public function __construct($classes = null) {
        if(is_array($classes)) {
            $this->addClass($classes);
        }
    }

    public function addClass($class) {
        if(is_array($class)) {
            foreach($class as $k => $c) {
                if(is_string($c)) {
                    if(is_string($k)) {
                        $this->addClass($k.'-'.$c); //recursion
                    } else {
                        $this->addClass($c);
                    }
                } else {
                    throw new Zend_Exception('Class must be a string - is type: '.gettype($c));
                }
            }
            return $this;
        }

        if(is_string($class)) {
            $this->_classes[] = $class;
            return $this;
        } else {
            throw new Zend_Exception('Class must be a string - is type: '.gettype($class));
        }
        return $this;
    }

    public function removeClass($class) {
        $key = array_search($class, $this->_classes);
        if($key !== false) {
            unset($this->_classes[$key]);
        }
        return $this;
    }

    public function bodyClass() {
        return $this;
    }

    public function toString() {
        return implode(' ', $this->_classes);
    }
} 
```

这个片段进入我的布局：

```
$uri = Zend_Controller_Front::getInstance()->getRequest()->getParams();
$this->bodyClass()->addClass($uri); 
```

结果是这样的（对于模块 - “默认”，控制器 - “auth”，动作 - “signin”）：

```
<body class="controller-auth action-signin module-default"> 
```

我正在获取当前请求的参数并将它们映射到正文类。希望这有助于处理这个问题的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T21:10:39.460

从该助手的外观来看，您需要调用其中一个方法来添加一个类。从您的控制器之一：

```
$this->view->bodyClass()->addClass('something'); 
```

你就是这样使用它的吗？

# javascript - 如何使用 Javascript、URL 和密钥对数据库进行 ajax 调用

> ID：15958738
> 
> 赞同：0
> 
> 时间：2013-04-11T20:57:33.420
> 
> 标签：javascript, jquery, ajax, database, key

我获得了*xxxx.xxxxx.com*类型的 url以及*FGHyehgvc787vbhj类型的密钥*

为了获得对 sql 数据库的只读访问权限并使用 javascript 从中检索数据。

我以前没有使用数据库的经验，也许我的问题听起来很愚蠢，但我想知道如何结合上述信息来访问数据库（例如，进行 ajax 调用并从中检索数据..）

我熟悉使用 jQuery 对网页进行 ajax 调用并从中获取数据，如下所示：

```
$.ajax(/*url of website*/, function (data)
{
   var dataRetrieved = $(data);
   // do something with the data retrieved...
}); 
```

所以我想知道在使用密钥对数据库进行ajax调用时是否有与上述相同的东西。

感谢您的帮助，如果您觉得这篇文章完全没有意义，请删除这篇文章，顺便说一句，请提前原谅我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-10T05:42:11.377

您可以创建一个 wcf 服务并通过 ajax 调用该服务，这不会是一个巨大的安全问题。尝试这个

```
  $.ajax({
            缓存：假，
            类型：“获取”，
            异步：假，
            数据： {}，
            网址：http:xxxxxxxxxxxx.svc/webBinding/Result?metaTag=" + meta,
            contentType: "应用程序/json; charset=utf-8",
            数据类型：“json”，
            跨域：是的，
            成功：函数（结果）{}，
            错误：函数（）{警报（错误）；}
 });
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T21:03:50.653

允许客户端代码以任何方式与您的数据库交互通常是非常糟糕的设计。这可能是一个巨大的安全问题。通常，您会希望您的服务器端代码执行此操作（例如 PHP、节点等）。您将使用客户端代码向您的服务器发送请求，而服务器端代码将执行更新数据库的实际工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T21:08:44.933

用这个

```
$.ajax({
    url: 'path/to/server-side/script.php', /*url*/
    data: '', /* post data e.g name=christian&hobbie=loving */
    type: '', /* POST|GET */
    complete: function(d) {
        var data= d.responseTXT;
        /* Here you can use the data as you like */
        $('#elementid').html(data);
    }
}); 
```

希望这可以帮助...

# android - android XML错误膨胀类

> ID：15958740
> 
> 赞同：1
> 
> 时间：2013-04-11T20:57:38.367
> 
> 标签：android, android-layout, android-camera, ondraw, android-inflate

我正在尝试将绘图叠加在相机预览之上。我制作了两个从 SurfaceView 扩展的自定义类：一个用于叠加层，一个用于凸轮。这是我的 logcat（只有“由”语句）：

```
04-11 19:58:06.549: W/dalvikvm(867): threadid=1: thread exiting with uncaught exception (group=0x40a71930)
04-11 19:58:06.609: E/AndroidRuntime(867): Caused by: android.view.InflateException: Binary XML file line #5: Error inflating class com.example.gui_v9.Activity1.CamView
04-11 19:58:06.609: E/AndroidRuntime(867): Caused by: java.lang.ClassNotFoundException: Didn't find class "com.example.gui_v9.Activity1.CamView" on path: /data/app/com.example.gui_v9-2.apk 
```

它找不到类的第二个错误是因为它没有膨胀。

Eclipse Graphical Layout 成功编译了 xml 代码并提供了不错的预览。这是我的 XML 代码：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent">

    <com.example.gui_v9.Activity1.CamView 
        android:id="@+id/camview"
        android:layout_width="fill_parent" 
        android:layout_height="fill_parent"/>

    <com.example.gui_v9.Activity1.OverlayView
        android:id="@+id/overlay"
        android:layout_width="200dp"
        android:layout_height="200dp"/>

</FrameLayout> 
```

我试图从

```
<com.example.gui_v9.Activity1.OverlayView .../> 
```

至

```
<com.example.gui_v9.Activity1.OverlayView ...></com.example.gui_v9.Activity1.OverlayView> 
```

或者

```
<SurfaceView class="com.example.gui_v9.Activity1$OverlayView" ... /> 
```

甚至

```
<SurfaceView class="com.example.gui_v9.Activity1$OverlayView" ... ></SurfaceView> 
```

没有运气。在后一种情况下，我有一个转换问题（CamView 不能在 SurfaceView 中转换）并且 Eclipse 的 XML 图形布局无法呈现，所以我猜第一个在编译过程中让我走得更远。

你也可以看看我的主要活动：

```
package com.example.gui_v9;
import java.io.IOException;

import android.os.Bundle;
import android.util.AttributeSet;
import android.view.SurfaceHolder;
import android.view.SurfaceView;
import android.app.Activity;
import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.PixelFormat;
import android.hardware.Camera;

public class Activity1 extends Activity {
    CamView         camview         = null;
    OverlayView     overlay         = null;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity1);

        camview     = (CamView) findViewById(R.id.camview);
        overlay     = (OverlayView) findViewById(R.id.overlay);
        overlay.getHolder().setFormat(PixelFormat.TRANSLUCENT);
    }

    public static class CamView extends SurfaceView implements SurfaceHolder.Callback {
        Camera          cam             = null;
        SurfaceHolder   camviewholder   = null;

        public CamView(Context context) {
            super(context);
            // TODO Auto-generated constructor stub
        }

        public CamView(Context context, AttributeSet attrs) {
            super(context, attrs);
            // TODO Auto-generated constructor stub
        }

        public CamView(Context context, AttributeSet attrs, int defStyle) {
            super(context, attrs, defStyle);
            // TODO Auto-generated constructor stub
        }

        @Override
        public void surfaceChanged(SurfaceHolder arg0, int arg1, int arg2, int arg3) {
            if (cam!=null) {
                try {
                    cam.setPreviewDisplay(camviewholder);
                } 
                catch (IOException e) {
                }
              cam.startPreview();
            }
        }

        @Override
        public void surfaceCreated(SurfaceHolder arg0) {
            cam             = Camera.open();
        }

        @Override
        public void surfaceDestroyed(SurfaceHolder arg0) {
            cam.stopPreview();
            cam.release();
        }
    }

    public static class OverlayView extends SurfaceView implements SurfaceHolder.Callback {
        private Paint paint = new Paint();
        OverlayThread   overlaythread   = null;

        public OverlayView(Context context) {
            super(context);
            // TODO Auto-generated constructor stub
        }

        public OverlayView(Context context, AttributeSet attrs) {
            super(context, attrs);
            // TODO Auto-generated constructor stub
        }

        public OverlayView(Context context, AttributeSet attrs, int defStyle) {
            super(context, attrs, defStyle);
            // TODO Auto-generated constructor stub
        }

        @Override 
        public void onDraw(Canvas canvas) { 
            paint.setColor(Color.BLUE);
            canvas.drawCircle(100, 100, 100, paint);
        } 

        @Override
        public void surfaceChanged(SurfaceHolder arg0, int arg1, int arg2, int arg3) {  
        }

        @Override
        public void surfaceCreated(SurfaceHolder arg0) {
            setWillNotDraw(false); //Allows us to use invalidate() to call onDraw()
            overlaythread = new OverlayThread(getHolder(), this); 
            overlaythread.setRunning(true);                 
            overlaythread.start();                          
        }

        @Override
        public void surfaceDestroyed(SurfaceHolder arg0) {
            try {
                overlaythread.setRunning(false); 
                overlaythread.join(); 
            } 
            catch (InterruptedException e) {
            }
        }
    }

    public static class OverlayThread extends Thread {
        private OverlayView     overlay;
        private SurfaceHolder   overlayholder;
        private boolean _run = false;

        public OverlayThread(SurfaceHolder _overlayholder, OverlayView _overlay) {
            overlayholder   = _overlayholder;
            overlay         = _overlay;
        }

        public void setRunning(boolean run) { 
            _run = run;
        }

        @Override
        public void run() {
            Canvas c;
            while (_run) {   
                c = null;      
                try {
                    c = overlayholder.lockCanvas(null);
                    synchronized (overlayholder) {

                     overlay.invalidate();
                    }
                } 
                finally {
                    if (c != null) {
                        overlayholder.unlockCanvasAndPost(c);
                    }
                }
            }
        }
    }  
} 
```

如您所见，我为每个类（带有 1,2 和 3 个参数）设置了三个构造函数，这是夸大类失败的常见错误。

当我分别在两个单独的类（CamView.java 和 OverlayView.java）中实现 CamView 和 OverlayView 时，我得到了这个工作。所以我不明白为什么导入类使它起作用。也许与静态工作区有关？

谢谢你们的帮助！

# ruby - 从 Ruby 向 Oracle 插入行

> ID：15958741
> 
> 赞同：2
> 
> 时间：2013-04-11T20:57:39.703
> 
> 标签：ruby, oracle, oci8

我在运行 Mountain Lion (10.8.3) 的 MacMini 上安装了 Oracle Instant Client 11.2.0.3。我能够从 SQLPlus 创建、选择和插入表。但是，使用 Ruby 1.9.3p327 和 ruby​​-oci8-2.1.5，我可以选择但不能插入。插入操作返回 1（我假设这意味着成功），立即选择返回该行（它是否缓存在客户端上？）但该行没有有效地保存在数据库中，并且来自 ruby​​ 或 SQLPlus 的后续选择返回 no行。

我已与 Wireshark 确认有数据进出服务器盒（运行 Oracle Server Personal Edition 11g 第 2 版的 Windows 7）。

有任何想法吗？所有帮助将不胜感激。

最好的问候，阿道夫

# javascript - 此处文档中的 JQuery 不起作用

> ID：15958759
> 
> 赞同：2
> 
> 时间：2013-04-11T20:59:04.317
> 
> 标签：javascript, jquery, perl, cgi, heredoc

是否可以在 perl 的 here-doc 部分中包含 JQuery。我试过但没有成功。这是我的代码。

```
my $cgi = CGI->new();print header();print start_html("JQuery in perl");

print <<JS;
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script><!--
$(document).ready(function(){
$("p").click(function(){
$(this).hide();
 });
});
//--></script>

<p>Click to hide</p>
<p>Click to hide</p>
<p>Click to hide</p>
</body>
JS
print end_html(); 
```

但是当我编写一个javascript函数时，它工作正常

```
my $cgi = CGI->new();print header();print start_html("hello");
print <<JS;
<script><!--
function show() {alert("Hello");}
//--></script>
<input type="button" value="Check"  onclick="show()">
</body>
JS
print end_html(); 
```

我在这里遗漏了一些明显的东西吗？请提出建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T21:06:07.923

here-doc 的工作方式类似于双引号字符串：评估变量。由于`$(`实际上是[Perl 中的一个变量，](http://perldoc.perl.org/perlvar.html)它将被进程的真实组 ID 替换。用反斜杠转义它。

# database - 工资系统数据库模式中的员工上学情况

> ID：15958760
> 
> 赞同：1
> 
> 时间：2013-04-11T20:59:06.867
> 
> 标签：database, ms-access, database-design, relational-database, database-schema

我有带考勤登录和注销的工资单系统，上午和下午。

这些是表格：

DTR：当天登录和注销的所有员工列表

```
Date    Empid    timein_am  timeout_pm  timein_pm  timeout_pm  status   tothrslate
12-4-13 1000     7:00       12:00       1:00       5:00        log-out  0 
```

dtrlogs：

列与 dtr 表相同。员工当天考勤后，上述考勤将移至此处。

这张表是所有员工每天的所有出勤列表。

dtr 表的记录移到这里后，time-ins 和timeouts 状态，tothrslate 将被删除第二天。

问题：

1.  在我的数据库模式中有一个 dtrlogs 是个好主意吗？

2.  无论如何，有没有为我的出席做这件事？

顺便说一句，我的客户端应用程序是 vb6，我正在使用 msaccess。我只是很难设计出勤工资单数据库。我想在一张表中记录员工每天的所有出勤情况。我正在考虑按月存储出勤率，这意味着，我将不得不在 1 月至 12 月创建表。但我不知道这是否是个好主意。有什么建议吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T21:56:04.537

我注意到的第一件事是您的 DTR 表非常严格。如果老板决定每个人在抽烟休息时都需要下班怎么办？使用您的 DTR 表，员工只能在下午打卡一次。

您还需要一个 Employee 表，其中包含员工的 ID、姓名、电话号码、紧急联系人等。

我推荐 1 个源表来保存您的永久数据。它永远不会被删除。给它3个字段：

EmpID
时钟
输入时钟输出

这允许白天有多个“工作时间”，包括如果有人完全不吃午饭。从这张表中，您可以安排一个每晚的流程，该流程将为忘记的人打卡，建立每日和每月摘要等。

我也想这是一个相当普遍的任务。尝试用谷歌搜索它。

# java - 通过 Java 小程序或 flash 获取绝对文件路径

> ID：15958761
> 
> 赞同：1
> 
> 时间：2013-04-11T20:59:08.090
> 
> 标签：java, flash, security, applet

我问了一个关于是否可以使用 html5 文件 API 获取文件的绝对文件路径的问题。由于浏览器安全问题，它不是。

对于内部项目，我需要能够将文件从一台计算机的机器移动到共享存储。“控制器”进行移动，因为用户无法直接访问存储卷。

是否可以在浏览器中使用 flash 或 java applet 提取文件的绝对路径？如果是这样，这将如何完成，或者如果您可以向我指出相关文档，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T22:29:34.200

一个受信任的小程序可以在最终用户的帮助下提供信息。

为用户提供`JFileChooser`导航到感兴趣的文件/目录。一旦用户选择了`File`，请致电[`JFileChooser.getSelectedFile()`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JFileChooser.html#getSelectedFile%28%29)获取详细信息。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-11T21:09:13.677

您可能需要添加策略文件权限。请参考 > [http://docs.oracle.com/javase/tutorial/security/tour1/step2.html](http://docs.oracle.com/javase/tutorial/security/tour1/step2.html)。希望有帮助

# php - 文件系统路径问题

> ID：15958768
> 
> 赞同：1
> 
> 时间：2013-04-11T20:59:34.030
> 
> 标签：php, filesystems, imagick

我正在尝试`filesystem`使用 php 函数获取路径，`realpath`因为我正在使用`imagick`类。

我有以下内容：

```
 $str = $array[0]['FileName'];   //the $str will be /project/employees/info 
```

然后使用

```
 $str = realpath(".".$str);

  var_dump(is_readable($str));  //output false. 
```

但它输出错误。我确定文件路径是正确的，但不知道出了什么问题。谁能帮我这个？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T21:04:59.690

如果要相对于当前文件的目录定位文件，则可以使用

```
__DIR__ . '/' . $str 
```

反而。

这个解决方案要好得多，因为`.`指向一个“当前目录”，它可以更改为`chdir()`运行时使用的几乎任何东西，同时`__DIR__`总是指向一个预期的目录。

# objective-c - NSMutableArray 中的自动释放块由其创建者保留

> ID：15958776
> 
> 赞同：2
> 
> 时间：2013-04-11T21:00:04.893
> 
> 标签：objective-c, cocoa, events, objective-c-blocks

我正在尝试基于 node.js [EventEmitter](http://nodejs.org/docs/latest/api/events.html#events_class_events_eventemitter)编写一个类别，它可以采用多个块，将它们弱存储在一个数组中，如果创建块的实例没有被释放（在这种情况下它们会从数组中删除）。这是为了不继续用旧的、未使用的块填充数组。

问题是这些块似乎是由类复制的，因此从未释放，即使创建块的实例已被释放。

所以实现看起来像这样；

## 用法

```
[object on:@"change" do:^(id slf, NSArray *args) {
    NSLog(@"something changed");
}]; 
```

## 实现（WeakReference 类在[这里](https://stackoverflow.com/a/14219598/2272008)找到，由[noa](https://stackoverflow.com/users/893113/noa)提供）

```
- (void)on:(NSString *)eventType do:(Callback)callback
{
    NSMutableArray *callbacks = self.emitterEvents[eventType];
    __weak Callback wcb = callback;
    // Wrap the callback in NSValue subclass in order to reference it weakly
    WeakReference *cbr = [WeakReference weakReferenceWithObject:wcb];
    callbacks[callbacks.count] = cbr;
}

- (void)emit:(NSString *)eventType withArgs:(NSArray *)objArgs
{
    NSInteger idx = 0;
    NSMutableIndexSet *indices = [NSMutableIndexSet indexSet];
    callbacks = (NSMutableArray *)callbacks;
    for (WeakReference *cbv in callbacks) {
        __weak id cb = [cbv nonretainedObjectValue];
        if (cb) {
            Callback callback = (Callback)cb;
            __weak id slf = self;
            callback(slf, objArgs);
        } else {
            [indices addIndex:idx];
        }
        idx++;
    }
    [callbacks removeObjectsAtIndexes:indices];
} 
```

我读过一些关于[块在超出其范围时被复制](http://www.mikeash.com/pyblog/friday-qa-2011-09-30-automatic-reference-counting.html)的内容，但坦率地说，阅读所有这些块语义现在有点让我头晕目眩。

这种解决问题的方法甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T01:16:33.850

复制已经复制的块与保留它相同，因此如果方法的调用者先复制块然后将其传递给方法，它应该可以按预期工作。但这意味着您不能简单地使用您在使用部分中描述的方法。

你已经像这样使用它了

```
typeofblock block = ^(id slf, NSArray *args) {
    NSLog(@"something changed");
};
self.block = [block copy]
[object on:@"change" do:self.block]; 
```

* * *

要实际解决问题，您必须弄清楚拥有该块。的调用者`on:do:`，还是被调用的对象？

听起来你想在调用者被释放时删除块，这意味着块的所有者是调用者。但是您的`on:do:`方法不知道块的所有者，并且在调用者被释放时无法删除块。

一种方法是将块的所有者传递给方法，并在释放块时将其删除。这可以使用关联对象来完成。

```
- (void)on:(NSString *)eventType do:(Callback)callback sender:(id)sender
{
    // add the block to dict
    // somehow listen to dealloc of the sender and remove the block when it is called
} 
```

另一种方法是添加新的方法来删除块，并调用该方法`dealloc`或其他地方手动删除块。

您的方法类似于 KVO，它要求观察者取消注册观察，我认为这是您应该遵循的一个好习惯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T01:19:07.893

在 Objective-C 中，块是对象，但与其他对象不同，它们是在堆栈上创建的。如果你想在它创建的范围之外使用块，你必须`copy`这样做。

```
[object on:@"change" do:^(id slf, NSArray *args) {
    NSLog(@"something changed");
}]; 
```

在这里，您正在传递一个指向堆栈上的块的指针。一旦您当前的堆栈帧超出范围，您的块就消失了。您可以将副本传递给块，使调用者成为块的所有者，或者您可以将块复制到接收者中。

如果您希望调用者拥有该块，那么您必须在调用者中保持对该块的强引用（例如作为属性）。一旦调用者被解除分配，您将失去强引用并且弱引用被设置为 nil。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T16:16:35.083

感谢您的回答，我意识到我对如何管理块有点偏离。我用不同的方法解决了这个问题，灵感来自[Mike Ash](https://github.com/mikeash/MAKVONotificationCenter/blob/master/MAKVONotificationCenter.m)使用块和自动取消引用的 KVO 实现，以及 xlc 关于在`dealloc`.

该方法是这样的（如果您不想阅读整个[要点](https://gist.github.com/Goos/5357499)）：

*   调用者对象将侦听器分配给另一个对象`on:event do:block with:caller`
*   Emitter 对象创建一个**Listener**实例，其中包含块的副本、对发射器的引用和事件类型
*   发射器将复制的块添加到表内的数组中（按事件类型分组），在调用者上创建关联对象并附加侦听器
*   Emitter 方法-swizzles 调用者，并在其 中添加一个块`dealloc`，将自身从发射器中移除
*   然后，调用者可以选择处理从发出方法返回的侦听器实例，如果它想在自己被释放之前手动停止侦听器

# [来源在这里](https://gist.github.com/Goos/5357499)

我不知道它是否可以安全使用，到目前为止我只在一个虚拟应用程序的单个线程上测试过它。

# java - 如何编写伪代码的递归函数？

> ID：15958777
> 
> 赞同：0
> 
> 时间：2013-04-11T21:00:06.933
> 
> 标签：java, discrete-mathematics

实际代码更容易，但我也很难找到基本案例。我能够编写相当不错的伪代码，但我遇到了麻烦。我不知道我是否可以在这里问作业问题，但这是我无法回答的问题：

> 令 f(n) 为该计算执行的加法次数。写出 f(n) 的递推方程。（请注意，对于非递归和递归版本，加法步骤的数量应该完全相同。事实上，它们都应该执行完全相同的加法步骤序列。）

如果我不允许问作业问题，那么任何帮助都会很棒。

```
 int sum(int A[], int n ):
     T=A[0];
      for i = 1; to n-1
       T=T+A[i];
        return T;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T21:13:14.487

使用 sum 函数的以下属性：

```
 sum(A[], n) == sum(A[], n-1) + A[n] 
```

并考虑到：

```
 sum(A[], 1) == A[1] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T21:26:10.433

只需重新编写您的变体

```
 int sum(int A[], int n ):
      if (n > 1){
       T=A[n-1] + A[n-2];
       T += sum(A, n-2) 
      }else{
       if (n > 0) { return A[n -1];}
      }
     return T;
    } 
```

# singularitygs - 在 Singularity Grid System 中使用 add-gutter 时出错

> ID：15958780
> 
> 赞同：0
> 
> 时间：2013-04-11T21:00:18.970
> 
> 标签：singularitygs

我在 Singularity 中使用断点，并且还对网格外的元素使用断点扩展（全角标题导航）。在我的 screen.scss 文件中，我有：

```
@import "singularitygs";
@import "breakpoint";
@import "base";

$tabletwidth: 40em;
$smalldesktopwidth: 60em;

$grids: 4;
$grids: add-grid(9 at $tabletwidth);
$grids: add-grid(12 at $smalldesktopwidth);

$gutters: 1/3;
$gutters: add-gutter(1/2 at $tabletwidth);
$gutters: add-gutter(1/2 at $smalldesktopwidth); 
```

没有 add-gutter() 调用它运行良好，但是当我添加它们时它会中断：

```
Syntax error: Undefined operation: "0.5 times 2". 
on line 20 of /Library/Ruby/Gems/1.8/gems/singularitygs-1.0.4/stylesheets/singularitygs/math/_columns.scss, in `output-isolation' 
from line 7 of /Library/Ruby/Gems/1.8/gems/singularitygs-1.0.4/stylesheets/singularitygs/_api.scss, in `grid-span' 
from line 102 of /Applications/MAMP/htdocs/modernlink/sass/screen.scss, in `@content' 
from line 178 of /Library/Ruby/Gems/1.8/gems/breakpoint-1.3/stylesheets/_breakpoint.scss, in `breakpoint' 
from line 99 of /Applications/MAMP/htdocs/modernlink/sass/screen.scss 
```

我用错了吗？任何人都可以提供修复建议吗？

编辑： screen.scss 的第 99 行是：

```
@include breakpoint($tabletwidth) { 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T15:43:01.750

这似乎是 Singularity 中的一个错误。如果您可以[在问题队列](https://github.com/Team-Sass/Singularity/issues?state=open)中提交问题以便我们能够跟踪，那就太好了。谢谢！

**编辑：**我无法使用 Singularity 1.0.7（当前版本）重现此错误。请确保您使用的是最新版本的 Singularity。

# sql - sql server 将选择的结果存储在变量中？

> ID：15958783
> 
> 赞同：6
> 
> 时间：2013-04-11T21:00:33.787
> 
> 标签：sql, sql-server, sql-server-2008

我正在制作一个功能。select 语句只返回一行一列，比如一个 int。如何将此 int 存储在声明的变量中，以便我的函数可以返回该变量？

```
select sum(table_name.col1) -- this line returns only one int. How to store that
--in a declared variable ? 
from
(select 
col1, col2
--code here
)table_name 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-11T21:05:10.043

```
DECLARE @Varname int
SELECT @Varname = SUM(table_name.col1) FROM etc
SELECT @Varname 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-11T21:05:25.830

```
DECLARE @result INT

SELECT @result = sum(table_name.col1)
from
(select 
 col1, col2
 --code here
)table_name 
```

# c# - 本地化实体框架验证和自定义验证

> ID：15958785
> 
> 赞同：0
> 
> 时间：2013-04-11T21:00:40.920
> 
> 标签：c#

目前我的实体框架 4 模型看起来像：

```
[Required(ErrorMessage = "UserNumber is a required field.")]
public string UserNumber { get; set; } 
```

我需要本地化这些错误消息，我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T21:08:21.073

使用 (Messages.resx) 中的消息将资源文件添加到您的项目，然后添加它的文化版本，例如 (Messages.sv-SE.resx)。例如，如果您使用键“UserNumberRequired”将资源字符串添加到这些文件，您将使用以下语法：

```
[Required(ErrorMessageResourceType=typeof(Messages),ErrorMessageResourceName="UserNumberRequired")]
public string UserNumber { get; set; } 
```

确保将基本资源文件 (Messages.resx)的代码生成设置为**公共**

祝你好运！

# python - Django 错误：无法导入名称 current_datetime

> ID：15958786
> 
> 赞同：5
> 
> 时间：2013-04-11T21:01:24.217
> 
> 标签：python, django, datetime

我正在阅读“The Django Book”，但不断收到错误消息“无法导入名称 current_datetime”

网址.py：

```
from django.conf.urls.defaults import patterns, include, url
from mysite.views import current_datetime, hello

urlpatterns = patterns('', 
    ('^hello/$', hello), 
    ('^time/$', current_datetime),
    (r'^time/plus/(\d{1,2})/$', hours_ahead),
) 
```

我的观点.py：

```
from django.http import HttpResponse
import datetime

def hello(request):
    return HttpResponse("Hello world")

def current_datetime(request):
    now = datetime.datetime.now()
    html = "<html><body>It is now %s.</body></html>" % now
    return HttpResponse(html) 
```

我的工作目录：

```
./mysite:
__init__.py manage.py   mysite      views.py 
```

无论我做什么，我都会在 urls.py 第 2 行中遇到关于 current_time 的相同导入错误：

```
Environment:

Request Method: GET
Request URL: http://localhost:8000/

Django Version: 1.5.1
Python Version: 2.7.3
Installed Applications:
('django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles')
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware')

Traceback:
File "/Library/Python/2.7/site-packages/django/core/handlers/base.py" in get_response
  103\.                     resolver_match = resolver.resolve(request.path_info)
File "/Library/Python/2.7/site-packages/django/core/urlresolvers.py" in resolve
  319\.             for pattern in self.url_patterns:
File "/Library/Python/2.7/site-packages/django/core/urlresolvers.py" in url_patterns
  347\.         patterns = getattr(self.urlconf_module, "urlpatterns", self.urlconf_module)
File "/Library/Python/2.7/site-packages/django/core/urlresolvers.py" in urlconf_module
  342\.             self._urlconf_module = import_module(self.urlconf_name)
File "/Library/Python/2.7/site-packages/django/utils/importlib.py" in import_module
  35\.     __import__(name)
File "/Users/jvieitez/Code/djcode/mysite/mysite/urls.py" in <module>
  2\. from mysite.views import hello, current_datetime, hours_ahead

Exception Type: ImportError at /
Exception Value: cannot import name current_datetime 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T22:47:40.563

您的工作目录有问题。manage.py 和views.py 不应该在同一个目录中。我建议将内部 mysite 重命名为其他名称，这样可以避免混淆，views.py 应该位于*内部*mysite 目录中。你说

```
from mysite.views import current_datetime, hello 
```

但 views.py 不在 mysite 目录中。那就是问题所在。

# clojure - project.clj 和依赖库 jar 文件之间有什么关系？

> ID：15958788
> 
> 赞同：1
> 
> 时间：2013-04-11T21:01:30.247
> 
> 标签：clojure, leiningen

我正在使用 lein 2.0

如果一个主应用

```
(defproject rexfer "1.0.1-SNAPSHOT"
  :description "Filters standard report from Patriot Properties' AssessPro."
  :dependencies [[org.clojure/clojure "1.4.0"]
                 [org.clojure/tools.cli "0.2.2"]
                 [org.clojure/data.csv "0.1.2"]
                 [rexfer-csv "1.0.0-SNAPSHOT"]
                 [util "1.0.7-SNAPSHOT"]]

  :omit-source true
  :main rexfer.core) 
```

依赖于一个库（util 1.07-SNAPSHOT）

```
(defproject util "1.0.7-SNAPSHOT"
  :description "A general purpose Clojure library"
  :dependencies [[org.clojure/clojure "1.4.0"]
                 [clojure-csv/clojure-csv "1.3.2"]
                 [org.clojure/data.csv "0.1.2"]]
  :aot [util.core]
  :omit-source true) 
```

引用是获取 .jar 文件还是独立的 .jar？

问这个问题的另一种方法是我应该为像这样的库构建独立的 jars

`util "1.0.7-SNAPSHOT"`

需要一个主应用程序才能使用它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T09:18:07.650

您应该部署由`lein jar`而不是生成的 jar `lein uberjar`。您也可以放心地期望以这种方式部署所有合理的库。

这大致是因为以下几点：

1.  正确准备的 jar 包含有关其依赖项的元数据，因此用户将知道与您的 jar 一起获取依赖项；

2.  经常会发生一个项目使用多个共享公共依赖项的库——将每个共享依赖项复制到几个 jar 中会很浪费；

3.  用户可能有充分的理由覆盖您的某些依赖项选择（顺便说一句，这种情况一直在发生；用不同的版本替换传递依赖项或排除传递依赖项很常见）——使用常规 jar，他们将能够做到如此容易，而使用 überjar 会很痛苦。

当然，如果您的某些依赖项的坐标确实恰好指向 überjars，那么这就是 Leiningen 最终会拉入的内容。不过，我从来没有遇到过这样错误部署的库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T23:17:37.060

如果您不想运行 lein uberjar 那么第二个问题的答案是肯定的。这些 jars 需要在类路径上可用，以便主应用程序运行。的工作`lein uberjar`是包含所有依赖项和依赖项的依赖项等。

# pass-by-reference - 按值传递时更改变量

> ID：15958794
> 
> 赞同：0
> 
> 时间：2013-04-11T21:01:52.137
> 
> 标签：pass-by-reference, pass-by-value, pass-by-pointer

我有一个声明双精度的主函数。然后它将它传递给 void Display，后者显示双精度。然后 main 将 double（按值）传递给函数 void Pointers，该函数调用 display 函数，然后更改 double 的值。然后我再次从 main 中运行 display 函数，再次将它传递给 double。但是双精度已更改为新值（我们在 Pointers() 中将其更改为），我不明白为什么。

据我了解，当我们按值传递时，我们正在向函数传递一个副本以供使用，它可以对该副本执行任何操作，但不会更改原始版本。如果我们通过引用传递，那么我们只是将地址传递给原始数据。

既然我们按值传递，它不应该改变它自己的副本并留下原始的吗？

下面的代码供参考。

```
#include <iostream>
#include <cctype>
#include <string>
#include <vector>
#include <iomanip>
#include <windows.h> // for a bigger window
using namespace std;

void Heading()
{
    system("cls");
    cout << "David Fritz, CO127, 04/9/2013 Assignment 14 (Week 12)";
    cout << endl;
    cout << endl;
}
void Display(string source, double &value, double* &pointer)
{
    cout << "Source: " << source << endl;
    cout << "Double Address: " << &value << endl;
    cout << "Double Value: " << value << endl;
    cout << "Pointer Address: " << &pointer << endl;
    cout << "Pointer Value: " << pointer << endl;
    cout << "Dereferenced Pointer Value: " << *pointer << endl << endl;
}

void Pointer(double value, double* &pointer)
{
    string source = "Method";
    Display(source, value, pointer);
    value = 7;
    *pointer = value;
}

int main()
//2\.    In the main
//       •    Call the heading function
//       •    Create a double and assigns it a value
//       •    Create a pointer that points to the double
{
    MoveWindow(GetConsoleWindow(), 100, 0, 700, 800, TRUE); //moves and resizes window
    Heading();
    string source = "Main";
    double aValue = 4;
    double* pointer = &aValue;
    Display(source, aValue, pointer);
    //system("pause");
    Pointer(aValue, pointer);
    //system("pause");
    Display(source, aValue, pointer);
    cout << endl;
    cout << "Q: If you pass the double by value to the function, why does the value of     the" << endl 
         << "double change in the main after you return from the function?" << endl     << endl;
    cout << "A: I dont know. We passed it its own copy, but it didn't care. I'll figure     it out"
} 
```

这是作业（我之所以发布，是因为第 5 步特别告诉我如何传递双精度和指针）

编写一个程序来创建
1\. 创建一个标题函数，显示您的姓名、班级编号和日期。
2\. 在 main 中
• 调用标题函数
• 创建一个 double 并为其赋值
• 创建一个指向该 double 的指针
3\. 编写一个 Display 函数，该函数接受一个字符串、一个指针和一个 double 并使用 cout 语句显示描述您正在显示的内容的文本，然后依次显示：显示
的位置（从 main 或方法调用？）
双精度地址
双精度值
指针地址
指针值（指针持有地址，这应该是double的地址）
解引用的指针值（指针指向什么，double值）
4.从main调用display函数，显示指针和double的属性.
5\. 创建一个返回类型为 void 的函数，该函数从 main 中获取一个指针和一个 double（按值传递 double）。然后像在 main 中那样显示指针的值并加倍。
• 更改双精度的值，然后将双精度的值分配给该点（*pointer = double）
• 如果ptr 是点名称，x 是双精度的名称，则*ptr = x；
6.回到main中重新显示指针和double的属性
7\. 添加暂停。
8\. 回答这一个问题：
• 调用标题函数
• 显示以下问题及其答案。
“如果你将double按值传递给函数，为什么你从函数返回后，main中double的值会发生变化？”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-14T01:50:21.650

Check this version. It's complete and a lot better.

```
 #include <iostream>
            #include <string>
            #include <iomanip>
            using namespace std;

            void Display(string source, double &value, double* pointer)
            {
                cout << source << endl;
                cout << left << setw(40) << "Original Double Address: "             << &value   << endl;
                cout << left << setw(40) << "Original Double Value: "               << value    << endl;
                cout << left << setw(40) << "Original Pointer Address: "            << &pointer << endl;
                cout << left << setw(40) << "Original Pointer Value: "              << pointer  << endl;
                cout << left << setw(40) << "Original Dereferenced Pointer Value: " << *pointer << endl << endl;
            }

            void Pointer(double value, double *pointer)
            {
                string source = "Pointer Function";
                value = 1842;
                *pointer = value;
                Display(source, value, pointer);
            }

            void main()
            {
                cout << "Student Name, CO127, Assignment 14.1" << endl << endl;

                string source = "Main";
                double aValue = 921;
                double* pointer = &aValue;

                // Initial Values Displayed
                Display(source, aValue, pointer);

                // Values after passing to function
                Pointer(aValue, pointer);

                // Values from main after being modified in function.
                Display(source, aValue, pointer);

                cout << endl;
                cout << "Answer " << endl;
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T21:19:53.593

Pointer() 确实获得了自己的副本（双精度值），并且更改*它不会*更改主函数中的值。

但是，您还向 Pointer() 传递了一个地址（双 *pointer），并将该地址处的东西也设置为值 (7)，使用“*pointer = value;”。因为你给了 Pointer() aValue (&aValue) 的地址，所以它在 main() 中发生了变化。

编辑：所以你关于通过值传递而不改变原始版本是正确的，但在这种情况下，你已经通过值*和*“引用”（嗯，一个指针，有点像引用），所以它改变了。

还有一些其他的东西：

a）您的缩进有点混乱（尽管可能只是复制和粘贴它） b）通过引用传递指针（double * &pointer）是不必要的，除非您想更改“指针”的值，而不是比它指向的地址的值。可能“双*指针”更好。

干杯

# c# - 有没有办法可以在我的应用程序中实现语音控制？

> ID：15958797
> 
> 赞同：0
> 
> 时间：2013-04-11T21:01:54.580
> 
> 标签：c#, winforms, visual-studio, voice-recognition

我想在我的应用程序中添加语音控制。当我说“添加语音控制”时，我的意思是用户单击一个打开语音控制的按钮，然后如果用户说出一个命令（例如“全选”），它就会执行该命令。我已经编写了应用程序的所有代码。

有人可以给我一个关于如何实现这样一个功能的建议吗？

[这](http://www.youtube.com/watch?v=Gp7qK_WodBQ)是我希望实现的那种东西，但我从来没有在 VB 中编程过，所以我需要一些指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T21:04:38.090

您可以使用[System.Speech.Recognition](http://msdn.microsoft.com/en-us/library/system.speech.recognition.aspx)命名空间中定义的类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T21:05:52.550

看看[这篇文章](http://www.codeproject.com/Articles/483347/Speech-recognition-speech-to-text-text-to-speech-a)。它会告诉你如何去做。它使用内置的 System.Speech.Recognition 类。

# javascript - 使用 Jquery 动态创建的元素？

> ID：15958803
> 
> 赞同：0
> 
> 时间：2013-04-11T21:02:33.133
> 
> 标签：javascript, jquery

我的简单脚本是通过 jquery 附加一些元素。
我想做的是为那些创建的元素添加一些 ajax 调用。
问题是事件永远不会对这些元素起作用，我尝试了很多 Jquery 方法，但都失败了。

```
$("#currentbuild").append('<li class="cancelevent"></li>');
$('.cancelevent').bind("click",function(e) {
                        var eventid = $(this).attr('id');
                        e.preventDefault();
                        alert(eventid);
                }) 
```

我也试过

```
$("#currentbuild").append('<li class="cancelevent"></li>');
$('.cancelevent').on("click",function(e) {
                        var eventid = $(this).attr('id');
                        e.preventDefault();
                        alert(eventid);
                }) 
```

但它从不显示任何东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T21:05:02.140

你几乎是正确的：

```
$("#currentbuild").append('<li class="cancelevent"></li>');
$('#currentbuild').on("click",".cancelevent",function(e) {
    var eventid = $(this).attr('id');
    e.preventDefault();
    alert(eventid);
}); 
```

这会添加一个`click`处理程序`#currentbuild`（它不是动态的，因此总是在 DOM 中）。但是，它不会对自身的点击做出反应，而是只侦听自身内部的点击，并且只侦听具有`cancelevent`. 而且由于您没有将点击处理程序添加到可以动态添加和/或删除的元素，因此处理程序将始终存在。

编辑：正如@tcovo 在下面的评论中指出的那样，您的代码应该可以像您在此处发布的那样工作。我认为这不完全是您的代码，并且`append`作为另一个事件处理程序的结果动态发生（而不是您在示例中建议的页面加载）。

此外，`var eventid = $(this).attr('id');`在您的示例中也不起作用，因为`id`...`<li>`我认为这不是给您带来麻烦的确切代码的另一个原因。:)

# hibernate - hibernate批量插入仍然会产生很多插入语句

> ID：15958804
> 
> 赞同：0
> 
> 时间：2013-04-11T21:02:33.257
> 
> 标签：hibernate

我有这个插入 2k 个对象的休眠代码。我已经设置了 hibernate 来批量处理我的插入和代码，一切看起来就像来自 hibernate 站点的示例。当批处理生效时，我确实看到了改进，但是当我分析我的应用程序时，我实际上看到 2k 插入语句被发送到我的数据库。我有点期望插入语句更少并且形式为

`insert into table1(c1, c2) values (...), (...), ..., (...)`

这是错误的期望还是我的批处理设置有问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T21:06:58.803

是的，这是一个错误的期望。批量更新只是意味着不是将每个插入语句单独发送到数据库，而是将它们[添加到一个批处理](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html#addBatch%28%29)中，并且一旦添加了给定的数字，该批处理就会发送到数据库。

# twitter-bootstrap - Fuel UX 向导组件未正确显示

> ID：15958806
> 
> 赞同：5
> 
> 时间：2013-04-11T21:02:38.923
> 
> 标签：twitter-bootstrap, wizard, fuelux

我正在尝试使用燃料 ux 向导组件，如示例所示：

[http://exacttarget.github.io/fuelux/#wizard](http://exacttarget.github.io/fuelux/#wizard)

但它不能正确显示。

我的代码是：

```
<!doctype html>
<html lang="en">

<head> 
<meta charset="utf-8">
<link href="css/bootstrap.css" rel="stylesheet">
<link href="css/fuelux.css" rel="stylesheet">
<script src="js/jquery-1.9.1.js" type="text/javascript"></script>
<script src="js/fuelux/require.js"></script>
<script src="js/fuelux/all.js"></script>
</head> 

<body>
    <div class="container">
        <div id="workflowWizard" class="wizard">
        <ul class="steps">
        <li data-target="#step1" class="active"><span class="badge badge-info">1</span>Step 1<span class="chevron"></span></li>
        <li data-target="#step2"><span class="badge">2</span>Step 2<span class="chevron"></span></li>
        <li data-target="#step3"><span class="badge">3</span>Step 3<span class="chevron"></span></li>
        <li data-target="#step4"><span class="badge">4</span>Step 4<span class="chevron"></span></li>
        <li data-target="#step5"><span class="badge">5</span>Step 5<span class="chevron"></span></li>
        </ul>
        <div class="actions">
        <button class="btn btn-mini btn-prev"> <i class="icon-arrow-left"></i>Prev</button>
        <button class="btn btn-mini btn-next" data-last="Finish">Next<i class="icon-arrow-right"></i></button>
        </div>
        <div class="step-content">
        <div class="step-pane active" id="step1">This is step 1</div>
        <div class="step-pane" id="step2">This is step 2</div>
        <div class="step-pane" id="step3">This is step 3</div>
        <div class="step-pane" id="step4">This is step 4</div>
        <div class="step-pane" id="step5">This is step 5</div>
        </div>
    </div>
</body> 
```

关于我缺少什么的任何想法？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-12T08:09:24.140

好的，我发现了问题。

标签

```
<html lang="en"> 
```

需要包括fuelux类：

```
<html lang="en" class="fuelux"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-05T12:22:25.800

如果使用 php 预处理，请在 CSS 文件的开头添加这一行：

```
<?php header('content-type: text/css'); ?> 
```

[Lighttpd 和 phph]

# javascript - 用于验证 PRICE 的正则表达式

> ID：15958808
> 
> 赞同：-3
> 
> 时间：2013-04-11T21:02:47.547
> 
> 标签：javascript, regex, validation

我正在尝试验证价格字段：

**不应允许**：

*   空白
*   字母
*   负值

**应该允许**：

*   数字
*   逗号
*   小数点

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-12T09:42:06.227

## 用于验证价格字段的正则表达式：

```
/^(\d*([.,](?=\d{3}))?\d+)+((?!\2)[.,]\d\d)?$/ 
```

解释演示：[http ://regex101.com/r/uG5lI0/1](http://regex101.com/r/uG5lI0/1)

### 要验证的 Javascript 代码：

```
/^(\d*([.,](?=\d{3}))?\d+)+((?!\2)[.,]\d\d)?$/.test(input) 
```

仅在格式正确且在各自位置带有点或逗号的情况下才会进行验证。

en_US 区域设置和美国国家格式的国际格式：

*   134.56
*   1,234.56
*   2,991,234.00

带 2 位小数的意大利国家格式：

*   134,56
*   21.234,56
*   1.234,56
*   9.321.234,56

de_DE 语言环境的国际格式：

*   134,56
*   1234,56
*   98281234,56

小数是可选的，验证整数：

*   1234
*   1,234
*   2,991,234
*   1.234
*   9.321.234

```
function validatePrice(input) {
  return /^(\d*([.,](?=\d{3}))?\d+)+((?!\2)[.,]\d\d)?$/.test(input);
}

['WRONG',
  '1,234,56',
  '1.234.56',
  '-1993',
  '918,27.63',
  '122.42.24',
  '1,89,2',
  '',
  'Intl. format & US national format',
  '2.56',
  '14.56',
  '134.56',
  '1,234.56',
  '2,991,234.00',
  '',
  'Italian national format with 2 decimals',
  '9,56',
  '24,56',
  '134,56',
  '721.234,56',
  '21.234,56',
  '1.234,56',
  '9.321.234,56',
  '69.321.234,56',
  '269.321.234,56',
  '1.269.321.234,56',
  'International format for the de_DE locale',
  '1,56',
  '14,56',
  '134,56',
  '1234,56',
  '98281234,56',
  'No cents',
  '1',
  '14',
  '134',
  '1,234',
  '2,991,234',
  '9',
  '24',
  '134',
  '1.234',
  '9.321.234',
  '1',
  '14',
  '134',
  '1234',
  '98281234'
].forEach(function(n) {
  document.getElementById('results').innerHTML += "'" + n + "' => " + validatePrice(n) + "<br>";
})
```

```
<div id="results"></div>
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-11T21:08:20.710

这个正则表达式应该这样做：

`^[\d\.,]+$`

**编辑：**

这是一个更好的正则表达式，允许更健全的数字格式（美元）。仍然不完美 - 如果不是这样，则需要确切知道您期望什么验证。

`^(\d{1,3})?(,?\d{3})*(\.\d{2})?$`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-11T21:11:01.383

最简单的方法是只包含您想要的内容并排除其他所有内容。看起来您需要数字、逗号和句点。一个正则表达式看起来像`/^[\d.,]+$/`。这没有指定任何格式的顺序。例如，如果您希望逗号仅出现在 3 位数字组中（国际化不是很好，但对美国有用），您需要更多类似的东西`/^\d{,3}(,\d{3})*(\.\d+)?$/`- 0-3 位数字后跟 0 组或更多组 ',NNN' 和可选的'.N'）。

如果你想单独检测你想避免的事情，你可以使用类似的东西`/[-A-z \t]/`——破折号、字母（上下）、空格或制表符。

# android - ListView 中的上标/下标 (android)

> ID：15958812
> 
> 赞同：0
> 
> 时间：2013-04-11T21:03:26.330
> 
> 标签：android, html, listview, superscript

我是android新手，我只是在学习。我想要一些关于如何在 android 的 ListView 中获取上标的帮助。现在，我有一个 TextView，它可以通过 < sup > 标签使用 Html.fromHtml() 函数来获取例如 2 ³。但是现在刚开始学习使用ListView，不知道具体怎么用，但是<sup>标签不起作用。

在 onCreate 我有这个：

```
...
// Create and populate a history list
String[] history = new String[] {};
ArrayList<String> historyList = new ArrayList<String>();
historyList.addAll(Arrays.asList(history));

// Create ArrayAdapter using the history list.
listAdapter = new ArrayAdapter<String>(this, R.layout.history_list, historyList);
// Set the ArrayAdapter as the ListView's adapter.
historyListView.setAdapter(listAdapter); 
```

在 onClick/AsyncTask/onPostExecute 我有这个：

```
...
listAdapter.add(outputToHistory); 
```

在 history_list.xml 我有这个：

```
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/textView"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:textIsSelectable="true" >
</TextView> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T20:45:17.067

根据相关问题的[这个答案](https://stackoverflow.com/a/3543625/72746)，标签应该可以工作：

```
((TextView)findViewById(R.id.text)).setText(Html.fromHtml("X<sup>2</sup>")); 
```

# html - 使用较小的浏览器窗口优雅地为某些元素的左右边缘添加填充

> ID：15958813
> 
> 赞同：0
> 
> 时间：2013-04-11T21:03:28.683
> 
> 标签：html, css, responsive-design, margin, padding

为了便于解释，我将直接跳到代码中。我有一个简单的手风琴菜单，可以自动从另一个 html 文件加载和插入图片库（带有标题文本），如下所示：

```
<section>
    <a class="box-link" href="#.html">Link 1</a>
        <div class="image-gallery">
            <img src="1.jpg"> [...]
            <p>Example loaded paragraph of text</p>
        </div>
    <a class="box-link" href="#.html">Link 2</a>
    <a class="box-link" href="#.html">Link 3</a>
    <a class="box-link" href="#.html">Link 4</a>
</section> 
```

而这个相关的CSS：

```
section {
    width: 100%;
    max-width: 60em;
    margin: 0 auto;
}

.box-link {
    display: block;
    box-sizing: border-box;
    padding: 1em;
    width: 100%;
} 
```

在大型浏览器窗口中，**截面**宽度最大为 60em，并在屏幕上居中。每一点内容都被冲到列的边缘，并且排列得很好。

当浏览器窗口小于 60em 时，所有内容都变为 100% 宽度，这正是我想要的 - 除了**p**标签。在这种状态下，我希望**p**标签在左右两侧有一个额外的 1em 边距或填充，以防止它与页面边缘对接。

添加`padding: 0 1em;`到 section 标记正是我想要的**p**标记，但其他所有东西也得到了填充，这是我不想要的 - 在一个大的浏览器窗口中，宽度仍然限制在 60em。一旦窗口大小减小到 60em 以下，填充是可见的。

*所以，问题是*：是否有办法以这种“自动”方式*仅为* **p**标签实现额外的填充/边距，还是我必须求助于使用媒体查询来应用类似`p { padding: 0 1em; }`较小屏幕的东西？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T21:08:39.843

我认为媒体查询是唯一也是最好的选择-

```
@media screen and (max-width:480px) {
    p { padding: 0 1em; }
} 
```

# android - GLSurfaceView 隐藏不需要的 ImageView

> ID：15958814
> 
> 赞同：1
> 
> 时间：2013-04-11T21:03:32.430
> 
> 标签：android, opengl-es

屏幕上有一个带有“match_parent”参数的 ImageView 和 GLSurfaceView 设置。ImageView 快速填充并显示在屏幕上。然后，GLSurfaceView 被填充在它上面，并对图像进行修改。到目前为止，一切都很好。

然而，这些视图也存在于 ViewPager 中，它们的左右两侧都有图像。在 ImageView 之上引入 OpenGL Surface View 之前，视图将按预期向左和向右过渡。但是在它上面引入 GLSurfaceView 之后，一旦用户开始滑动手指移动到下一个图像，SurfaceView 就会变得透明，导致图像消失。它甚至会强制它下面的图像在 ImageView 中消失。显示父视图的背景。

我不清楚如何处理这个问题。如果纹理像 ImageView 一样滑到一边，甚至是透明的，但让 ImageView 保持可见，那就太好了。

即使 GLSurfaceView.RENDERMODE_CONTINUOSLY 在过渡期间也不会保留纹理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T13:40:35.040

似乎我无法获得我想要达到的效果的原因是因为 GLSurfaceView 总是放置在其他视图后面，导致前景视图透明。因此，GLSurfaceView 将优先于被绘制。为了达到我想要的效果，我可能需要确保在滑动时使用 View.setVisibility() 为不可见，并在 ViewPager 稳定后将其设置回可见。这是我在看到其他几个链接作为不同研究的副产品后得出的当前结论。

[GLSurfaceViews 的 z 顺序](https://groups.google.com/forum/?fromgroups=#!msg/android-developers/fQihJKLki7M/nz4QWV8eyxQJ)

[在 GLSurfaceViews 中滚动](https://groups.google.com/forum/?fromgroups=#!msg/android-developers/zkdnM0G225I/tt_FJGyOkB4J)

看起来 GLSurfaceView 类的性能与我最初期望的视图并不一样。因此，需要格外小心，以便进一步保持 ImageView 在 ViewPager 中的图像之间的可见过渡。

在 viewPager 中，我设法按照以下代码行完成了一些事情。当然，这仍然处于粗略状态，因为它处于测试中间，但它完成了我正在寻找的东西。当我们开始停留在图像上时，纹理开始加载，然后在用户开始离开图像时消失并显示其下方的原始图像。这似乎可以在没有撕裂或闪烁的情况下工作，这就是我期望它的行为方式。

```
@Override
public void onPageScrollStateChanged(int state)
{
    switch(state)
    {
        case ViewPager.SCROLL_STATE_DRAGGING:
            Log.i("photoViewer:","dragging ViewPager");
            if(photoSurfaceView_ != null  && photoViewFrameLayout != null)
            {
                photoSurfaceView_.setAlpha(0);
                photoSurfaceView_.invalidate();
            }
            break;
        case ViewPager.SCROLL_STATE_IDLE:
            photoSurfaceView_.setVisibility(View.VISIBLE);
            photoSurfaceView_.setAlpha(1);
            Log.i("photoViewer:","idle ViewPager");
            break;
        case ViewPager.SCROLL_STATE_SETTLING:
            int childCount = photoViewFrameLayout.getChildCount();
            if(childCount >= 2)
            {
                photoViewFrameLayout.removeViews(1, childCount-1);
            }
            new Thread(new Runnable() {
                @Override
                public void run()
                {
                    Looper.prepare();
                    final Bitmap openGlBitmap = BitmapFactoryUtils.resizeAsNecessaryForOpenGLtexture(photoPaths[photoViewPager_.getCurrentItem()], new BitmapFactory.Options());
                    Rect bounds = BitmapFactoryUtils.calculateBoundsForBitmap(activityContext, openGlBitmap);
                    int scaledHeight = bounds.height();
                    int scaledWidth = bounds.width();
                    photoSurfaceView_ = new PhotoViewSurfaceView(activityContext, openGlBitmap);
                    photoSurfaceView_.setLayoutParams(new LayoutParams(scaledWidth, scaledHeight, Gravity.CENTER));
                    photoSurfaceView_.setVisibility(View.VISIBLE);
                    photoSurfaceView_.setAlpha(0);
                    runOnUiThread(new Runnable() {
                        @Override
                        public void run()
                        {
                            photoViewFrameLayout.addView(photoSurfaceView_);
                        }
                    });
                }
            }).start();

            Log.i("photoViewer:","settling ViewPager");
            break;
    } 
```

***编辑：*** 根据要求，我想提供一些额外的输入，说明如何调整`SurfaceView`将使用`Bitmap`for 输入的 OpenGL 的纹理大小。

以下是该过程中第一步可用的一些代码的快速片段，用于检查当前位图的纹理大小是否适合单个纹理。如果你想平铺纹理以保持图像更大，那么这会变得更加复杂，这不是我的分辨率所需要的。

可以使用以下代码检索纹理大小：

```
private void assignTextureSize()
{
    /* The maximum texture size can be found within the OpenGL context and then shared amongst other applications. */
    int[] maxTextureSize = new int[1];

    GLES20.glGetIntegerv(GLES20.GL_MAX_TEXTURE_SIZE, maxTextureSize, 0);

    maxTextureSize = maxTextureSize[0];
} 
```

但仅在`Renderer`课堂上，对于我的情况，我等到纹理的 onDrawFrame 内完成分配；在为其分配位图之前。

然后，`Bitmap`为我加载的目标是简单地加载我可以加载的内容而不会耗尽内存。为此，我简单地修改了`Options`我将要加载的 Bitmap 并尝试在 try catch 块中加载它。如果内存不足，我会再试一次，但占用空间更小。

```
try
{
    final int sizeFactors[] = { 1, 2, 4, 8, 16, 32 };

    if (new File(bitmapFilePath).exists())
    {
        BitmapFactory.Options options = new BitmapFactory.Options();
        for (int i = 0; i < sizeFactors.length; ++i)
        {
            try
            {
                options.inSampleSize = sizeFactors[i];
                Bitmap bmp = BitmapFactory.decodeFile(bitmapFilePath, options);

                if(bmp.getHeight() > maximumTextureSize ||
                       bmp.getWidth() > maximumTextureSize)
                {
                    continue;
                }

                /*
                 * @category Check against EXIF data if the image needs to be rotated or not for viewing.
                 */
                Matrix matrix = new Matrix ();
                ExifInterface exif = new ExifInterface(bitmapFilePath); 
                int orientation = exif.getAttributeInt (ExifInterface.TAG_ORIENTATION, 1); 
                switch(orientation) 
                { 
                    case ExifInterface.ORIENTATION_NORMAL:
                        break; 
                    case ExifInterface.ORIENTATION_ROTATE_90: 
                        matrix.postRotate (90); 
                        break; 
                    case ExifInterface.ORIENTATION_ROTATE_180: 
                        matrix.postRotate (180);
                        break; 
                    case ExifInterface.ORIENTATION_ROTATE_270:
                        matrix.postRotate (270); 
                        break; 
                    default: 
                } 

                bmp = Bitmap.createBitmap (bmp, 0, 0, bmp.getWidth (), bmp.getHeight (), matrix, true);

                return bmp;
            } catch (OutOfMemoryError outOfMemory)
            {
                //Do nothing, it will return when one that doesn't run out of memory is loaded.  Or you could do additional checking to bail if needed, etc.
            }
        }
        throw new Exception("Not enough memory for loading image");
    }
} catch (Exception exception)
{
    Log.e("CustomLogTag", "Exception for loading the image that was selected for extraction.");
} 
```

有很多方法可以做到这一点，但这是一种可以采用的方法，我想根据要求在上一篇文章中添加清晰度和附加信息，因为它没有包含我所希望的关于我接受的答案的尽可能多的信息。

# vhdl - 借助开关在 7 段 LED 显示屏上显示两个不同的变量 - VHDL 和 FPGA

> ID：15958816
> 
> 赞同：0
> 
> 时间：2013-04-11T21:03:44.447
> 
> 标签：vhdl, fpga

我一直在尝试使用 VHDL 语言在 spartan 3 fpga 上的 7 段 LED 显示屏上显示两个不同的变量。这是我在大学的最后一年项目，我真的很挣扎。有人可以帮忙吗？:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T06:43:04.233

这是给你的代码：

```
if (Swtich_1 = '1') then
  Seven_Seg <= Date_Time;
else
  Seven_seg <= Temperature;
end if; 
```

这就是你所需要的:)

有几件事你需要注意

*   确保你谴责开关并且它是干净的
*   制作一个简单的七段转换器来处理数据（简单的 case 语句应该做或比你在网上找到的过程）。

希望能帮助到你....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T21:40:15.737

Switch 是一个 C 保留字。对于 VHDL，您需要使用 case 来代替。

# php - jQuery AJAX 未在插件中执行

> ID：15958817
> 
> 赞同：1
> 
> 时间：2013-04-11T21:03:45.027
> 
> 标签：php, jquery, ajax, wordpress

我在 Stackexchange 的 Wordpress 端询问了这个问题，但没有任何答案可以引导我去任何地方，所以希望这里有人能提供帮助。对不起，如果这个交叉帖子违反了规则。原件在这里。[https://wordpress.stackexchange.com/questions/95075/jquery-ajax-call-not-executing-in-plugin](https://wordpress.stackexchange.com/questions/95075/jquery-ajax-call-not-executing-in-plugin)

我一直在为我的免费插件开发一个类，它输出一个“捐赠”表单。“不，谢谢”解雇链接隐藏表单并运行 AJAX 调用以更新 WP 选项以跟踪解雇。

我在让被调用的 PHP 函数真正触发时遇到问题。我添加了“成功”函数来输出我添加到由 AJAX 调用的 PHP 函数的回显（通常，该函数没有输出，只有 WP 选项更新），但“数据”始终为 0，并且在数据库。

我在这个插件中有几个其他的 AJAX 调用，所有这些调用都有效，但这是唯一一个在类中的调用。在课程开发的早期，它起作用了，但我不知道我能做些什么来打破它。我什至尝试将其剥离为仅声明 AJAX 注册和输出测试消息但没有成功的函数。

我猜 WP 出于某种原因实际上无法使用该功能。

这是我的 jQuery AJAX 调用的相关部分

```
 // Create the AJAX data
    ajax_call_data = {
            'action': 'dismiss_ppd_dmgr',
            'nonce': $nonce
    };

    // Call the AJAX function to update the options
    jQuery.ajax({
            url: ajaxurl,
            type: 'post',
            data: ajax_call_data,
            success: function(data) { alert( data ) }
     }); 
```

在课堂上，我有一个属性 ajax_call，它是在类实例化时设置的，我正在像这样添加对 Wordpress 的调用。我已验证 $this->ajax_call 已正确填充，并且还尝试对其进行硬编码，而不是使用变量。

```
 add_action( 'wp_ajax_' . $this->ajax_call , array( &$this , 'dismiss_form' ) ); 
```

$this->ajax_call 输出“dismiss_ppd_dmgr”。我回应了 wp_filter 并发现 wp_ajax_dismiss_ppd_dmgr 在我的班级中注册指向dismiss_form()。但结果始终为 0，并且数据库中没有任何更新。

我尝试过的事情：

*   有和没有 &
*   硬编码而不是使用 $this->ajax_call
*   直接在构造函数中调用 add_action 并将其放入由 admin_init 操作调用的函数中
*   在类之外创建 AJAX add_action 作为

    ```
     add_action( 'wp_ajax_dismiss_ppd_dmgr' , array( $ppd_dmgr , 'dismiss_form' ) ); 
    ```

有没有人知道为什么 WP 不喜欢我的 AJAX 调用？

# javascript - 对象不支持属性或方法“nestedSortable”

> ID：15958818
> 
> 赞同：-1
> 
> 时间：2013-04-11T21:03:46.960
> 
> 标签：javascript, jquery, internet-explorer, nested-sortable

有一个 IE9 问题，真的，真的让我精神崩溃。想不通！我真的很讨厌我们必须如何处理这些 IE 问题。

我在 Google 上浏览了大约 20 页来寻找答案，但没有任何效果。我有一个表格，您可以创建一个“部分”。然后可以使用 jquery nestedSortable 插件对这些部分进行重新排序。 [http://mjsarfatti.com/sandbox/nestedSortable/](http://mjsarfatti.com/sandbox/nestedSortable/)

在 IE9 中，没有任何效果。我无法创建部分或对其重新排序，加载页面时出现以下错误：

SCRIPT438：对象不支持属性或方法“nestedSortable”

它指出错误与这里的第二个字符有关：

```
$('#sortable').nestedSortable({
    //disableNesting: 'no-nest',
    listType: 'ul',
    forcePlaceholderSize: true,
    handle: 'div',
    helper: 'clone',
    items: 'li',
    maxLevels: 2,
    opacity: .6,
    placeholder: 'placeholder',
    revert: 250,
    tabSize: 25,
    tolerance: 'pointer',
    toleranceElement: '> div',
    update: function(){
        order_sections();
    }
}); 
```

有任何想法吗？如果我完全删除此代码块，我不会收到任何错误，并且可以很好地创建部分，当然我不能重新排序它们，因为这已被注释掉。

这适用于除 IE9 之外的所有浏览器。不确定它是否适用于旧版本，我们只支持 IE9，因为我们必须这样做。我希望我们可以从我们的应用程序中阻止所有 IE，因为它是一个巨大的垃圾转储。

很抱歉带着一个无聊的 IE 问题来到这里，但我没有想法，深入研究了 3 个小时，但我没有取得任何进展。

我确实看到这个插件的兼容性是 IE6/7/8，他没有提到 9。

已编辑***

我的 javascript 文件包含在页脚中，这里有顺序：

```
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>

<script type="text/javascript" src="js/public/website/application.js?v=1362424015"></script>

<script type="text/javascript" src="js/public/website/bootstrap.js?v=1364410348"></script>

<script type="text/javascript" src="js/public/website/greyScale.js?v=1362424015"></script>

<script type="text/javascript" src="js/public/website/jquery.placeholder.js?v=1362424015"></script>

<script type="text/javascript" src="/js/public/website/jquery.dataTables.js?v=1362424015"></script>

<script type="text/javascript" src="js/common/jquery-ui-1.9.0.custom.min.js?v=1362424015"></script>

<script type="text/javascript" src="js/members/global.js?v=1364396131"></script>

<script type="text/javascript" src="http://dev.clientsky.com/js/members/proposals/proposal.js?v=1364351236"></script>

<script type="text/javascript" src="js/members/proposals/create_proposal_sections.js?v=1365712158"></script>

<script type="text/javascript" src="js/common/jquery.mjs.nestedSortable.js?v=1362424015"></script> 
```

一切对我来说都很好，这是一个大型应用程序，这是我们第一次看到其中一个插件出现这样的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:18:07.577

啊哈解决了这个问题，我在 nestedSortable.js 文件之前用上面的代码加载了 javascript 文件，只需要切换两者。谢谢！

# php - CakePHP Auth 登录错误

> ID：15958821
> 
> 赞同：1
> 
> 时间：2013-04-11T21:03:55.320
> 
> 标签：php, mysql, cakephp, authentication, login

我有用户、组和 users_groups。这是一个 hasAndBelongsToMany 关系。一切都是关联的，但是在登录时会出现 SQL 错误，因为它试图在用户表中查找不存在的 group_id。

关联是通过 users_groups 表进行的。有没有人遇到过这个问题？

它应该加入 users_groups 而不是在 users 表中查找 group_id。

错误：

> SQLSTATE [42S22]：未找到列：1054 'on 子句'中的未知列 'User.group_id'

SQL查询：

```
SELECT `User`.`id`, `User`.`username`, `User`.`password`, `User`.`email`, `User`.`is_active`, `User`.`created`, `User`.`modified`, `Group`.`id`, `Group`.`name`, `Group`.`description`, `Group`.`active`, `Group`.`created`, `Group`.`modified`, `Group`.`parent_id` FROM `seotools`.`sa_users` AS `User` LEFT JOIN `seotools`.`sa_groups` AS `Group` ON (`User`.`group_id` = `Group`.`id`) WHERE `User`.`username` = 'mhardy' AND `User`.`password` = 'f30d110154184d05759871e97bfec0a72e8c317a' LIMIT 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T21:09:57.987

将 HABTM 表更改为“groups_users”，以[遵循蛋糕约定](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#hasandbelongstomany-habtm)。

> 这个新连接表的名称需要包含所涉及的两个模型的名称，按字母顺序排列，并用下划线 (_) 分隔。表的内容应该是两个字段，每个外键（应该是整数）指向所涉及模型的两个主键

或者使用用户和组模型中的覆盖选项将表名保持为“users_groups”。

# ios - 如果没有收到不符合键值的消息，则无法在情节提要中添加新视图

> ID：15958822
> 
> 赞同：0
> 
> 时间：2013-04-11T21:03:55.980
> 
> 标签：ios, uistoryboard

我收到“不符合键值编码的消息”。

我过去曾多次遇到这种情况并且知道这意味着什么并且总是能够解决它，但我不知道为什么我会在这种情况下得到它。我所做的只是： 1）将 UILabel 拖放到主视图上：

![在此处输入图像描述](https://i.stack.imgur.com/qeVk4.png)

2）从UILabel拖拽到view controller，让IB插入并连接一个outlet： ![在此处输入图像描述](https://i.stack.imgur.com/p3EDT.png)

但是当我运行时，我得到“这个类不符合键 currentStatus 的键值编码。”

这是连接：

![在此处输入图像描述](https://i.stack.imgur.com/Q5Vwr.png) ![在此处输入图像描述](https://i.stack.imgur.com/vOYUY.png)

为什么它不起作用，缺少什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T21:15:19.973

您显示的内容没问题，请检查您是否从代码文件 (.h) 中删除了一些插座属性并忘记从 IB 中删除它们的链接。

# linux - SSH 上的毫秒计时

> ID：15958825
> 
> 赞同：2
> 
> 时间：2013-04-11T21:04:12.687
> 
> 标签：linux, ssh, timing

假设我有一个 ncurses 应用程序，它以亚秒的间隔（比方说，每毫秒循环一次）更新我的终端窗口。

```
while(true)
  write_some_value_to_terminal();
  sleep_for_1_millisecond(); 
```

如果我通过 SSH 远程连接到我的机器并运行该程序，这是否意味着 SSH 需要每毫秒执行一次往返以更新我的（远程）窗口？

**编辑**第二个问题，对于我正在编写的代码的实际应用是，我如何确定最佳睡眠值？瞄准亚秒级计时是否有意义？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T21:28:25.433

由于[Nagle 的算法](http://en.wikipedia.org/wiki/Nagle%27s_algorithm)，您很可能根本看不到 1 毫秒间隔的更新。更不用说您的延迟很可能会高于 1 毫秒（除非您在同一个本地网络上），在这种情况下，更新将被常规 TCP ACKing 行为合并。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T21:07:23.527

几乎。写入需要一些时间，之后它将休眠一毫秒，然后再次写入。

# sockets - Hostent 从 char* 返回 null。适用于硬编码地址

> ID：15958828
> 
> 赞同：0
> 
> 时间：2013-04-11T21:04:31.557
> 
> 标签：sockets, char, gethostbyname, hostent

人们。

我知道 hostent 已被弃用，但必须将其用于项目。

出于某种原因，如果我这样做...

```
hp = getbyhostname ("www.google.com"); 
```

hp 工作正常。

但是，如果我这样做：

```
char *addre;
addre = someFunction();
printf ("The address is %s", addre);
hp = gethostbyname (addre); 
```

其中 someFunction() 返回一个 char*，printf 工作正常并正确显示地址，但 hp 返回 null。

有什么建议么？

谢谢。

# c# - C# 泛型：将泛型类型转换为值类型

> ID：15958830
> 
> 赞同：16
> 
> 时间：2013-04-11T21:04:36.063
> 
> 标签：c#, generics, casting, bitconverter

我有一个通用类，它保存指定类型 T 的值。该值可以是 int、uint、double 或 float。现在我想获取值的字节以将其编码为特定的协议。因此我想使用方法 BitConverter.GetBytes() 但不幸的是 Bitconverter 不支持泛型类型或未定义的对象。这就是为什么我要转换值并调用 GetBytes() 的特定重载。我的问题：如何将通用值转换为 int、double 或 float？这不起作用：

```
public class GenericClass<T>
    where T : struct
{
    T _value;

    public void SetValue(T value)
    {
        this._value = value;
    }

    public byte[] GetBytes()
    {
        //int x = (int)this._value;
        if(typeof(T) == typeof(int))
        {
            return BitConverter.GetBytes((int)this._value);
        }
        else if (typeof(T) == typeof(double))
        {
            return BitConverter.GetBytes((double)this._value);
        }
        else if (typeof(T) == typeof(float))
        {
            return BitConverter.GetBytes((float)this._value);
        }
    }
} 
```

是否有可能转换一个通用值？还是有另一种获取字节的方法？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-11T21:11:38.360

首先，这是一种非常糟糕的代码气味。任何时候你在像这样的类型参数上进行类型测试时，你都在滥用泛型。

C# 编译器知道您正在以这种方式滥用泛型，并且不允许将类型 T 的值强制转换为 int 等。您可以通过在将值强制转换为 int 之前将值强制转换为对象来关闭编译器：

```
return BitConverter.GetBytes((int)(object)this._value); 
```

呸。同样，最好找到另一种方法来做到这一点。例如：

```
public class NumericValue
{
    double value;
    enum SerializationType { Int, UInt, Double, Float };
    SerializationType serializationType;        

    public void SetValue(int value)
    {
        this.value = value;
        this.serializationType = SerializationType.Int
    }
    ... etc ...

    public byte[] GetBytes()
    {
        switch(this.serializationType)
        {
            case SerializationType.Int:
                return BitConverter.GetBytes((int)this.value);
            ... etc ... 
```

不需要泛型。*为实际泛型*的情况保留泛型。如果您为每种类型编写了*四次代码，那么您对泛型没有任何收获。*

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-11T21:09:30.970

好吧，让我感到震惊的是，该类型一开始就不是适当的通用类型：它只能是少数类型之一，并且您无法表达该约束。

然后你想`GetBytes`根据 的类型调用不同的重载`T`。泛型不适用于这类事情。您*可以*在 .NET 4 及更高版本中使用动态类型来实现它：

```
public byte[] GetBytes()
{
    return BitConverter.GetBytes((dynamic) _value);
} 
```

...但是这又不是一个很好的设计。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-07-10T06:19:43.500

聚会迟到了，但只是想评论说原始提案是“糟糕的设计”的评论 - 在我看来，原始提案（尽管它不起作用）根本不是“必然”是一个糟糕的设计！

来自强大的 C++（2014 年 3 月 11 日）背景和对模板元编程的深刻理解，我在 C++11 中创建了一个类型通用序列化库，代码重复最少（目标是具有非重复代码，并且我相信我已经完成了 99%）。C++11 提供的编译时模板元编程工具虽然可能变得极其复杂，但有助于实现序列化库的真正类型泛型实现。

然而，非常不幸的是，当我想在 C# 中实现一个更简单的序列化框架时，我正好卡在了 OP 发布的问题上。在 C++ 中，模板类型 T 可以完全“转发”到使用站点，而 C# 泛型不会将实际编译时类型转发到使用站点 - 对泛型类型 T 的任何第二（或更多）级别引用都会使 T成为在实际使用站点根本不可用的独特类型，因此 GetBytes(T) 无法确定它应该调用特定的类型化重载 - 更糟糕的是，C# 中甚至没有好的方法可以说：嘿，我知道 T是int，如果编译器不知道它，“（int）T”是否使它成为int？

此外，与其指责基于类型的开关有一种糟糕的设计气味 - 这是一个很大的误称，每当人们在做一些基于类型的高级框架并且由于语言环境的无能而不得不求助于基于类型的开关时，没有真正了解手头实际问题的约束后，人们开始公然说基于类型的 switch 是一个糟糕的设计——对于大多数传统的 OOP 用例来说是这样，但也有一些特殊情况，大多数时候是高级用例，例如我们在这里谈论的问题，这是必要的。

还值得一提的是，我实际上会责怪 BitConverter 类是以传统且无能的方式设计来满足通用需求的：而不是针对“GetBytes”为每种类型定义一个特定于类型的方法，也许它会更通用友好地定义 GetBytes(T value) 的通用版本 - 可能有一些约束，因此用户通用类型 T 可以被转发并按预期工作，根本不需要任何类型切换！对于所有 ToBool/ToXxx 方法也是如此——如果 .NET 框架以非通用版本的形式提供这些设施，那么人们将如何期望通用框架试图利用这个基础框架——类型切换，或者如果没有类型切换，你就结束了为您尝试序列化的每种数据类型复制代码逻辑 - 哦，

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-03-18T22:55:35.683

很晚的答案，但无论如何......有一种方法可以让它稍微好一点......以这种方式使用泛型：实现另一种为您转换类型的泛型类型。所以你不必关心对象类型的拆箱、强制转换等……它会起作用的。

此外，在您的 GenericClass 中，现在您不必切换类型，您可以使用`IValueConverter<T>`并强制转换它 `as IValueConverter<T>`。这样，泛型将为您找到正确的接口实现，此外，如果 T 是您不支持的对象，则该对象将为 null ......

```
interface IValueConverter<T> where T : struct
{
    byte[] FromValue(T value);
}

class ValueConverter:
    IValueConverter<int>,
    IValueConverter<double>,
    IValueConverter<float>
{
    byte[] IValueConverter<int>.FromValue(int value)
    {
        return BitConverter.GetBytes(value);
    }

    byte[] IValueConverter<double>.FromValue(double value)
    {
        return BitConverter.GetBytes(value);
    }

    byte[] IValueConverter<float>.FromValue(float value)
    {
        return BitConverter.GetBytes(value);
    }
}

public class GenericClass<T> where T : struct
{
    T _value;

    IValueConverter<T> converter = new ValueConverter() as IValueConverter<T>;

    public void SetValue(T value)
    {
        this._value = value;
    }

    public byte[] GetBytes()
    {
        if (converter == null)
        {
            throw new InvalidOperationException("Unsuported type");
        }

        return converter.FromValue(this._value);
    }
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-04-11T21:12:18.967

您可能会使用`Convert.ToInt32(this._value)`or `(int)((object)this._value)`。但总的来说，如果您发现自己必须在通用方法中检查特定类型，那么您的设计就有问题。

在您的情况下，您可能应该考虑创建一个抽象基类，然后为您要使用的类型创建派生类：

```
public abstract class GenericClass<T>
where T : struct
{
    protected T _value;

    public void SetValue(T value)
    {
        this._value = value;
    }

    public abstract byte[] GetBytes();
}

public class IntGenericClass: GenericClass<int>
{
    public override byte[] GetBytes()
    {
        return BitConverter.GetBytes(this._value);
    }
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-04-11T21:20:59.270

如果您的唯一目标是将 GetBytes 方法添加到这些类型，那么将它们添加为扩展方法不是更好的解决方案，如下所示：

```
public static class MyExtensions {
    public static byte[] GetBytes(this int value) {
        return BitConverter.GetBytes(value) ;
    }
    public static byte[] GetBytes(this uint value) {
        return BitConverter.GetBytes(value) ;
    }
    public static byte[] GetBytes(this double value) {
        return BitConverter.GetBytes(value) ;
    }
    public static byte[] GetBytes(this float value) {
        return BitConverter.GetBytes(value) ;
    }
} 
```

如果您确实需要将泛型类用于其他目的，只需执行肮脏的“双重类型转换”，就像 Eric 提到的，您首先将值类型转换为对象。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-04-12T21:29:29.433

会`GenericClass<DateTime>`做什么？相反，您似乎有一组离散的类知道如何获取它们的字节，因此创建一个抽象基类来完成所有常见工作，然后创建 3 个具体类覆盖一个方法来指定在他们：

```
public abstract class GenericClass<T>
{
    private T _value;

    public void SetValue(T value)
    {
        _value = value;
    }

    public byte[] GetBytes()
    {
        return GetBytesInternal(_value);
    }

    protected abstract byte[] GetBytesInternal(T value);
}

public class IntClass : GenericClass<int>
{
    protected override byte[] GetBytesInternal(int value)
    {
        return BitConverter.GetBytes(value);
    }
}

public class DoubleClass : GenericClass<double>
{
    protected override byte[] GetBytesInternal(double value)
    {
        return BitConverter.GetBytes(value);
    }
}

public class FloatClass : GenericClass<float>
{
    protected override byte[] GetBytesInternal(float value)
    {
        return BitConverter.GetBytes(value);
    }
} 
```

这不仅为您的三种已知类型提供了干净、强类型的实现，而且还为其他任何人打开了子类化的大门，`Generic<T>`并提供了`GetBytes`.

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2020-10-30T08:24:50.067

我站在一边，这是一个有趣的现实生活问题，与“糟糕”的设计无关，而是标准的 C# 限制。铸造通过`object`

```
return BitConverter.GetBytes((int)(object)this._value); 
```

或者，在当前语言中为

```
if (this._value is int intValue)
{
    return BitConverter.GetBytes(intValue);
} 
```

有效，但由于 ValueType 装箱而导致性能下降。

此问题的解决方案是System.Runtime.CompilerServices.Unsafe [NuGet](https://www.nuget.org/packages/System.Runtime.CompilerServices.Unsafe/)包中的[Unsafe.As<TFrom,TTo>() ：](https://docs.microsoft.com/en-us/dotnet/api/system.runtime.compilerservices.unsafe.as?view=netcore-3.1#System_Runtime_CompilerServices_Unsafe_As__2___0__)

```
if(typeof(T) == typeof(int))
{
     return BitConverter.GetBytes(Unsafe.As<T, int>(ref this._value));
} 
```

不会显式或隐式强制转换为`object`.

# ssl - jboss-as-maven-plugin 通过 https 部署

> ID：15958831
> 
> 赞同：0
> 
> 时间：2013-04-11T21:04:36.853
> 
> 标签：ssl, deployment, jboss, remoting

我有一个有效的远程部署到 JBOSS AS 7.1。但是，我想使用 ssl 发送这些部署。当我添加标识 ssl 信息的服务器身份标签时，我的 jboss 实例将不会收到部署。

```
<server-identities>
  <ssl>
    <keystore path="xxx/yyy/zzz.jks" password="myFakePassword"/>
  </ssl>
</server-identities> 
```

删除上述内容将允许我进行远程部署，但它不会使用 ssl（我的问题）。

访问管理控制台需要上述身份，所以我知道它可以工作。

这是我的插件配置：

```
<plugin>
    <groupId>org.jboss.as.plugins</groupId>
    <artifactId>jboss-as-maven-plugin</artifactId>
    <version>7.3.Final</version>
    <configuration>
       <force>true</force>
        <hostname>domain.com</hostname>
        <port>9119</port> <!-- not the real port -->
        <username>myFakeUsername</username>
        <password>myFakePassword</password>
        <filename>deployable.war</filename>
     </configuration>
     <executions>
        <execution>
        <phase>install</phase>
        <goals>
          <goal>deploy</goal>
        </goals>
        </execution>
     </executions>
</plugin> 
```

我从部署客户端得到的错误是：

[错误] }'。java.net.ConnectException：JBAS012174：无法连接到远程：//domain.com:9119。连接失败：一般 SSLEngine 问题：PKIX 路径构建失败：sun.security.provider.certpath.SunCertPathBuilderException：无法找到请求目标的有效证书路径

我在服务器日志上得到的错误是：

错误 [org.jboss.remoting.remote.connection] (Remoting "domain.com:MANAGEMENT" read-1) JBREM000200: Remote connection failed: javax.net.ssl.SSLException: Received fatal alert: certificate_unknown

其他相关信息：

证书是自签名的。该证书适用于对管理控制台和托管在 jboss 上的 Web 应用程序的 https 请求。当通过浏览器访问管理控制台时，证书使用上述身份。

任何帮助将不胜感激。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T19:14:25.967

我遇到了这个确切的问题，并通过创建一个信任库，将我的证书添加到它，然后在调用 Maven 部署命令时将该信任库作为 JVM 参数传递来解决它。

1.  创建信任库：

    > keytool -import -file path/to/your/certificate.cert -alias -keystore path/to/myTrustStore

2.  使用该信任库作为 JVM 参数发出命令：

    > mvn jboss-as:deploy -Djavax.net.ssl.trustStore=path/to/myTrustStore

# vb.net - 对象引用未设置为对象错误的实例？注册表编辑

> ID：15958844
> 
> 赞同：0
> 
> 时间：2013-04-11T21:05:14.090
> 
> 标签：vb.net, registry

我之前做过这个没有错误，但是我正在创建一个服务程序，现在我收到了这个错误。

```
Object reference not set to an instance of an object. 
```

有什么问题，如果您需要更多信息，请回复或发送电子邮件给我，希望我能得到它。

这是我试图执行但没有成功的代码：

```
Dim key As Microsoft.Win32.RegistryKey = Microsoft.Win32.Registry.CurrentUser
Dim subkey As RegistryKey
subkey = key.OpenSubKey("HKEY_CURRENT_USER\Software\Microsoft\Windows\Windows Error Reporting", True)
subkey.SetValue("Disabled", 1) 
```

# c - 如何检测 lib 调用者使用的语言？

> ID：15958845
> 
> 赞同：2
> 
> 时间：2013-04-11T21:05:23.357
> 
> 标签：c, fortran

我正在用 C++ 编写一个静态库，期望它被 Fortran 或 C 使用。由于 Fortran 的所有索引都从 1 开始，所以当 Fortran 调用时，我必须在我的库中进行一些索引修改。因为我将一组索引传递给库，这对于进一步计算很重要。

当然，解决这个问题的一种直观方法是在界面上设置一个参数，让用户告诉我他们正在使用什么语言，但我认为这不是一个很酷的方法。

所以我想知道如果它是由 Fortran 或 C 调用的，是否有任何方法可以在我的库中检测？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T21:23:45.933

如果您只是传递数组及其长度，则应该没有任何问题。问题是只有当你传递一个索引时，你才需要知道那个索引是相对于什么的。（在 Fortran 中可以是任何值，如果数组被显式声明为以非 1 的索引开始）。如果你有这种情况，我的建议是为其中一种语言编写粘合例程来转换索引值，然后调用常规库例程。这个解决方案的问题在于它要求“特殊”语言的用户调用特殊的粘合例程。调用常规例程是一个错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T21:16:44.560

任何语言的应用程序和库都将针对相同的 ABI 构建。ABI 定义了调用约定和其他细节，使由不同编译器（可能针对不同语言）构建的两个函数可以相互调用。通话中不应该有任何*明显*的不同，因为已经付出了巨大的努力来避免这些差异。

您可以查找带外信息，例如 FORTRAN 编译器提供的符号（或从其实用程序库中提取）。您将使用该属性声明一些符号，`weak`如果它变得有效，您将知道当前可执行映像中的*某处有**一些*FORTRAN 。但是，您不知道它是直接调用您还是仅仅因为引入了其他库。

 *正确的解决方案似乎是使用显式包装器从 FORTRAN 调用 C： [Calling a FORTRAN subroutine from C](https://stackoverflow.com/questions/8207997/calling-a-fortran-subroutine-from-c)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T22:53:59.227

如果你设置一个开始索引会更好。Fortran 数组不一定要从 1 开始。它们可以从任意数字开始。该数组可能已声明为

```
float, dimension(-20:20):: neg
float, dimension(4:99) pos 
```

因此，为 neg 传递 5 的索引意味着第 26 个元素，为 pos 传递 5 的索引意味着第 2 个元素。*

# c# - C# 和 EF 无法连接到远程 MySql 服务器但 MySql 工作台连接

> ID：15958847
> 
> 赞同：0
> 
> 时间：2013-04-11T21:05:32.080
> 
> 标签：c#, mysql, .net, entity-framework

我在远程托管服务提供商上有这个 Mysql 数据库。我安装了 MySql 工作台并提供以下信息：

```
server,
username,
pw 
```

它连接正常，但是当我尝试使用visualstudio时出现此错误 ![在此处输入图像描述](https://i.stack.imgur.com/B8VGe.png)

我正在使用 MySql 网站上的 MySql 连接器。此外，当尝试连接 EntityFramework 中的以下连接字符串时

```
Server=tango.rdb.superhosting.bg;Database=ulprojec_weatheronmars;Uid=ulpro_georgi_it;Pwd=password; 
```

我收到以下错误

```
An error occurred while getting provider information from the database. This can be caused by Entity Framework using an incorrect connection string. Check the inner exceptions for details and ensure that the connection string is correct. 
```

并且仍然通过 MySql 工作台我可以执行 LINQ 等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T21:14:53.870

根据您的 Visual Studio 屏幕截图，您正在尝试连接 Sql Server 驱动程序。您应该使用 MySql 驱动程序。我的猜测是你对实体框架做同样的事情。

免责声明：我没有使用过 MySql，所以我不知道从哪里获得驱动程序。我相信谷歌会知道的。

# ruby-on-rails - 需要找到类方法的source_location

> ID：15958856
> 
> 赞同：0
> 
> 时间：2013-04-11T21:05:59.097
> 
> 标签：ruby-on-rails

我有一个带有类方法的模型。

喜欢：

```
class School < ActiveRecord::Base
   def self.mymethod
   end
   def instance_something
   end
end 
```

如何在 Ruby 中找到类方法的 source_location？

如果我想要“instance_something”的源位置，我会这样做

```
School.new.method(:instance_something).source_location 
```

但我不能用类方法做到这一点。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T21:13:14.163

我只是在irb中做了这个，它有效。

```
class Foo
  def foo
  end
  def self.bar
  end
end

f = Foo.new
m1 = f.method(:foo)
m1.source_location
 => ["(irb)", 2] 

Foo.method(:bar)
m2 = Foo.method(:bar)
m2.source_location
 => ["(irb)", 4] 
```

# android - 在使用 intellij 的设备上安装 INSTALL_FAILED_CPU_ABI_INCOMPATIBLE

> ID：15958861
> 
> 赞同：38
> 
> 时间：2013-04-11T21:06:23.987
> 
> 标签：android, google-maps, intellij-idea, android-studio

我已经看到了一些关于此的问题，但没有一个真正的答案或细节。这是我的情况：

我有一个使用**Google Maps API v2**的应用程序，它工作得很好。最近我发现我无法将它安装在[这个](http://www.gsmarena.com/motorola_razr_i_xt890-4998.php)不基于 ARM 的设备上。

为了确定问题，我正在使用 SDK 提供的 Google 地图示例 (\sdk\extras\google\google_play_services\samples)

这在安装时给了我相同的错误消息：

`Failure [INSTALL_FAILED_CPU_ABI_INCOMPATIBLE]`

我仅在使用 Intellij (12.1.1) 的真实设备上收到此消息

在真实设备上使用 Eclipse 和在配置有 CPU 的模拟器上使用 Intellij 都可以正常工作：Intel Atom (x86)

任何帮助将不胜感激！

**更新**

正如预期的那样，Android Studio 也会发生同样的事情

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2013-11-25T05:55:32.447

默认情况下，IntelliJ 假定`libs`Android 模块根目录中的文件夹包含本机库，即使它只包含 jars。因此，它将 APK 打包，使其看起来像是本机库。我只是有一个类似的问题，我的应用程序没有本机代码并且可以在默认模拟器上运行，但是在 Genymotion 模拟器上安装时收到 ABI 警告。要解决此问题，请告诉 IntelliJ（或 Android Studio）您的库不是本机代码：

1.  打开`File -> Project Structure`.
2.  单击`Modules`窗口左侧。
3.  对于每个 Android 模块，展开下拉列表并选择`Android`子项。
4.  在`Structure`右侧的选项卡中，删除`Native libs directory`字段的内容（您可以将其留空）。
5.  为项目中的每个 Android 模块完成此操作并应用更改后，您可能需要通过`Build -> Rebuild Project`从 IntelliJ 的全局菜单中进行选择来重建项目以进行更改。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-07-12T10:18:43.033

最新的 Genymotion 不支持 ARM 二进制文件。如果您有为 ARM 编译的本机代码，则可以使用 Genymotion-ARM-Translation。只需将此文件拖放到 Genymotion 主文件夹并重新启动。

参考。 [http://forum.xda-developers.com/showthread.php?t=2528952](http://forum.xda-developers.com/showthread.php?t=2528952)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-07-04T10:04:11.523

在 android studio 中，修复此问题：

1 下载 Genymotion-ARM-Translation_v1.1.zip

下载地址：

[https://forum.xda-developers.com/attachment.php?s=9f1870536cb530a1346794b6ef629e90&attachmentid=2680937&d=1397258016](https://forum.xda-developers.com/attachment.php?s=9f1870536cb530a1346794b6ef629e90&attachmentid=2680937&d=1397258016)

2 将 zip 文件拖到正在运行的虚拟设备中，然后单击确定

3 重启Genymotion虚拟设备

# java - 如何通过 Spring 的 Rest Template 或 URI Builder 使用管道多值查询参数

> ID：15958862
> 
> 赞同：1
> 
> 时间：2013-04-11T21:06:24.350
> 
> 标签：java, spring, resttemplate

我正在寻找一个使用管道字符分隔多个查询参数的 Spring 或 Apache 解决方案。我什至会使用一个库，它将一个数组或字符串集合简化为一个用管道字符分隔的单个字符串。

```
MultiValueMap<String, String> multiValueMap = new HttpHeaders();
multiValueMap.put("arg1", new List<String>(){{
    add("foo");
    add("bar");
}});

URIBuilder uriBuilder = URIBuilder.fromUri("foo.com");
uriBuilder.queryParams( queryArguments );

RestTemplate restTemplate = new RestTemplate();
String lazyResponse = restTemplate.getForObject(uriBuilder.build(), String.class ) 
```

否则我只能做一个轮子了。

```
public String makeHttpParameter(List<String> args, char seperator){
    Iterator<String> iterator = args.iterator();
    StringBuilder builder = new StringBuilder();

    while( iterator.hasNext() ){
        builder.append(iterator.next());
        if(iterator.hasNext()){
            builder.append(seperator);
        }
    }
    return builder.toString();
} 
```

# jquery - CSS/JQuery 选择器：有没有在类中选择类？

> ID：15958876
> 
> 赞同：2
> 
> 时间：2013-04-11T21:07:36.840
> 
> 标签：jquery, css, jquery-selectors, css-selectors

假设我们有以下标记：

```
<div class="t-shirt black blue">Example</div>
<div class="t-shirt white blue">Example</div>
<div class="sweater black blue">Example</div>
<div class="sweater black red">Example</div>
<div class="sweater white red">Example</div>
<div class="hat black blue">Example</div>
<div class="hat black red">Example</div>
<div class="hat white red">Example</div> 
```

有没有用一个选择器选择黑色和蓝色的`t-shirt`OR ？`sweater`我的意思是，不使用逗号分隔的选择器。

例如，我不想执行以下操作：

```
var wanted = $('.t-shirt.black.blue, .sweater.black.blue'); 
```

反正有没有做类似以下的事情？（我知道它不起作用）：

```
var wanted = $('(.t-shirt, .sweater).black.blue'); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T21:09:34.247

不，没有。在 jQuery 和 CSS 中都没有。

即使有用于分组选择器部分的功能性伪类（例如[`:matches()`](http://www.w3.org/TR/selectors4/#matches)Selectors 4 中即将推出的），您仍然需要提供这些类的逗号分隔列表：

```
:matches(.t-shirt, .sweater).black.blue 
```

不用说，上面的选择器在任何浏览器中都不起作用（还）。如果你真的想的话，你*可以* [自己实现它作为一个 Sizzle 扩展，但老实说我不会打扰。](https://github.com/jquery/sizzle/wiki/Sizzle-Documentation)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T21:10:56.357

你可以这样做：

```
var wanted = $('.black.blue').filter('.t-shirt, .sweater'); 
```

但

```
var wanted = $('.t-shirt.black.blue, .sweater.black.blue'); 
```

无论如何可能更有效（虽然我没有测试过）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T21:12:44.000

如果唯一的目标不是使用逗号，您可以这样做：

```
var blackblue = $(".black.blue"),
    tshirts = blackblue.filter(".t-shirt"),
    sweaters = blackblue.filter(".sweater"),
    both = tshirts.add(sweaters); 
```

但是我看不出它有什么更好的地方，除非它能让你更好地组织起来。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T21:27:37.347

```
var selectionLevel1 = $(".t-shirt, .sweater").andSelf();
var finalSelection = $(".black", selectionLevel1); 
```

# java - 用于在 Java 或 C++ 中生成独立 Windows 可执行文件的库

> ID：15958877
> 
> 赞同：1
> 
> 时间：2013-04-11T21:07:38.513
> 
> 标签：java, c++, exe, executable-format, file-generation

我**不是**想将我的源代码编译成可执行文件。请在标记为重复之前阅读。

话虽如此，如果以前有人问过这个问题，我深表歉意。无数“如何将 java | C++ 编译为 exe”的问题填满了我所有的搜索。

我正在寻找一个有助于创建 Windows 可执行 (.exe) 文件的库。具体来说，我希望能够在运行时生成一系列汇编指令（这些将非常简单）并创建一个可执行它们的可执行文件。我可以自己生成程序集；我只想有一个库来帮助处理 .exe 文件的所有标题和其他部分（我开始研究[可移植可执行文件格式](http://msdn.microsoft.com/en-us/library/ms809762.aspx)，但它对我来说太复杂了。我不懒，但是作为一名高级程序员，我觉得这些东西在我的头脑中）。该库的具体机制并不重要，只要它适用于 Java 或 C++。然而，Java 是非常受欢迎的。

任何与任何类型的框架有关的任何知识都将在这方面有所帮助，我们将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T21:26:44.210

为什么不滚动你自己的？发出最小公分母 (CPU) 的代码。通过这样做，您可能会增加很多技能。我目前正在编写一个脚本引擎，并希望引入一个 JIT 编译器来为 Windows 平台生成代码。为此，我将代码清单添加到项目中以查看编译器生成的汇编代码。我知道并不完美，但给出了一个坚实的起始方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-07T16:27:25.417

好的，所以我最终做的是搜索`bin`我的 MASM32 安装文件夹，在那里我找到了汇编程序：`ml.exe`. 然后我将程序集写入文本文件并使用以下命令调用汇编程序`Runtime.exec()`：

```
Runtime.getRuntime().exec(
            "C:/masm32/bin/ml.exe "        //directory of assembler
            +"/coff "                      //create COFF header (needed for Win32)
            +"/Bl C:/masm32/bin/link.exe " //directory of linker 
            +"/Fe src/" + fileName + ".exe " //executable file
            +"/Fo src/" + fileName + ".obj " //object file
            + fileName + ".asm");            //assembly file (source) 
```

[用户 nm](https://stackoverflow.com/users/775806/n-m)给了我这个想法，但由于一个月后他们没有将其发布为答案，我决定自己回答。

# c# - 无法将类型“WebService2.CustomServiceProxy.MemoryStream”隐式转换为“System.IO.MemoryStream”

> ID：15958879
> 
> 赞同：0
> 
> 时间：2013-04-11T21:07:41.087
> 
> 标签：c#, web-services

我在服务器 1 上创建了以下方法：

```
public System.IO.MemoryStream ms(string sessionID, int customerID) 
```

在服务器 2 上，我通过以下方式向此方法发送参数：

```
CustomService customService = new WebService2.CustomServiceProxy.CustomService();
System.IO.MemoryStream MS = customService.ms(s.SessionID, Cust.Id); 
```

CustomServiceProxy 是指向服务器 1 的 Web 引用的名称。

因此，在执行此操作时，我正在接收消息：

> 错误 1 ​​无法将类型“WebService2.CustomServiceProxy.MemoryStream”隐式转换为“System.IO.MemoryStream”

任何想法 ？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T21:17:52.733

我的第一个想法是演员表。像这样的东西：

```
System.IO.MemoryStream MS = (System.IO.MemoryStream)customService.ms(s.SessionID, Cust.ID); 
```

不确定这是否会起作用，但它确实存在。祝你好运

# c# - 收藏已修改；枚举操作可能不会执行 foreach 循环

> ID：15958880
> 
> 赞同：0
> 
> 时间：2013-04-11T21:07:42.117
> 
> 标签：c#, .net

我知道这个问题在这里被问了很多，但我无法根据我的特定循环收集正确的答案。

我正在使用 foreach 循环来循环访问业务实体，如下所示：

```
foreach (Content item in category)
 {
   item.Stats = 55;
   item.Commit();
 } 
```

foreach 循环针对它检索到的第一个项目正确运行并放置了值，但与其他几个相比，我在我的页面标题中得到了错误。我知道我收到了错误，因为在迭代期间无法修改该项目。但是我不知道在这个循环中如何提交到数据库。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T21:10:54.390

您可以使用项目的克隆创建一个相同的集合，而不是修改迭代集合中的项目，而是修改并提交克隆集合中的相应项目。然后在完成后丢弃您的迭代集合，将您的克隆集合视为新的“原件”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T22:25:25.203

最简单的解决方案是添加 ToList() ，这会导致枚举原始枚举的副本。

```
foreach (Content item in category.ToList())
 {
   item.Stats = 55;
   item.Commit();
 } 
```

# android - 如何在“Theme.Sherlock.Dialog”中隐藏标题？

> ID：15958882
> 
> 赞同：1
> 
> 时间：2013-04-11T21:07:50.557
> 
> 标签：android, dialog, styles, actionbarsherlock

我的 DialogActivity 扩展自 SherlockFragmentActivity。所以我必须使用 Sherlock 主题。在`values-v14`我隐藏这样的标题：

```
<style name="Theme.Sherlock.Dialog" parent="@android:style/Theme.Holo.Dialog">
    <item name="android:windowNoTitle">true</item>
</style> 
```

如何`Theme.Sherlock.Dialog`在`values`文件夹中隐藏标题？

默认情况下，它看起来像这样（[github.com](https://github.com/JakeWharton/ActionBarSherlock/blob/master/library/res/values/abs__themes.xml)）：

```
<style name="Theme.Sherlock.Dialog" parent="android:Theme">
    <item name="android:windowFrame">@null</item>
    <item name="android:windowTitleStyle">@style/DialogWindowTitle.Sherlock</item>
    <item name="android:windowBackground">@drawable/abs__dialog_full_holo_dark</item>
    <item name="android:windowIsFloating">true</item>
    <item name="android:windowContentOverlay">@null</item>
    <item name="android:windowAnimationStyle">@android:style/Animation.Dialog</item>
    <item name="android:windowSoftInputMode">stateUnspecified|adjustPan</item>

    <item name="android:windowActionBar">false</item>
    <item name="android:windowActionModeOverlay">true</item>
    <item name="android:windowCloseOnTouchOutside">true</item>
    <item name="android:windowNoTitle">true</item>
    <item name="android:backgroundDimAmount">0.6</item>

    <item name="android:colorBackgroundCacheHint">@null</item>

    <item name="android:textColorPrimary">@color/abs__primary_text_holo_dark</item>
    <item name="android:textColorPrimaryInverse">@color/abs__primary_text_holo_light</item>

    <item name="windowMinWidthMajor">@dimen/abs__dialog_min_width_major</item>
    <item name="windowMinWidthMinor">@dimen/abs__dialog_min_width_minor</item>

    <item name="windowActionBar">false</item>
    <item name="windowContentOverlay">@null</item>
</style> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T14:51:20.140

**解决方案：** 我`abs__dialog_title_holo.xml`通过在以下位置添加两行进行了更改：[https ://github.com/JakeWharton/ActionBarSherlock/blob/master/library/res/layout/abs__dialog_title_holo.xml](https://github.com/JakeWharton/ActionBarSherlock/blob/master/library/res/layout/abs__dialog_title_holo.xml)

```
<com.actionbarsherlock.internal.widget.FakeDialogPhoneWindow xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:fitsSystemWindows="true">
<TextView android:id="@android:id/title" style="?android:attr/windowTitleStyle"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:minHeight="@dimen/abs__alert_dialog_title_height"
    android:visibility="gone" //******** FIRST ******** 
    android:paddingLeft="16dip"
    android:paddingRight="16dip"
    android:gravity="center_vertical|left" />
<View android:id="@+id/abs__titleDivider"
        android:layout_width="fill_parent"
        android:visibility="gone" //******** SECOND ********
        android:layout_height="2dip"
        android:background="@color/abs__holo_blue_light" />
<FrameLayout
    android:layout_width="match_parent" android:layout_height="0dp"
    android:layout_weight="1"
    android:orientation="vertical"
    android:foreground="?attr/windowContentOverlay">
    <FrameLayout android:id="@+id/abs__content"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />
</FrameLayout> 
```

# spring - Spring Security - 具有 user-service-ref 属性的 JEE 标记丢失映射角色

> ID：15958885
> 
> 赞同：2
> 
> 时间：2013-04-11T21:07:58.823
> 
> 标签：spring, jakarta-ee, spring-security

我对 spring 很陌生，让 spring 安全性更不用说了，我一直在查看 Schema 文件，并注意到`<jee>`出现在标签下的`<http>`标签就像某种 preauth 过滤器魔法。使用`mappable-roles`属性，我可以获得我想要的角色，但是，当我指定一个不同的`user-service-ref`属性，指定一个`UserDetailsService`对象时，我失去了角色。

我的猜测是因为当我指定`UserDetailsService`对象时，Spring 假定我不再需要该角色......但我需要！

对此有什么想法吗？我能以某种方式捕捉这些细节吗？如果不使用这个简单`<jee>`的标签，那么`jee`标签会扩展为`custom-filter`s 和 pre-auth 等什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T07:07:04.270

该`<jee>`标签创建（除其他外）一个`PreAuthenticatedAuthenticationProvider`bean，该 bean 委托给已配置的策略以加载用户详细信息。

此策略的默认实现`PreAuthenticatedGrantedAuthoritiesUserDetailsService`将简单地复制它在身份验证令牌中找到的角色。

`UserDetailsService`通过使用您的自定义属性覆盖此默认策略，您`user-service-ref`负责为用户分配角色。如果您想保留有关用户角色的默认行为，您可以简单地从上述类中复制[相关行，因为 Java EE 角色仍然被映射，并且也可以在 auth 令牌中访问您自己的代码。](https://github.com/SpringSource/spring-security/blob/master/web/src/main/java/org/springframework/security/web/authentication/preauth/PreAuthenticatedGrantedAuthoritiesUserDetailsService.java#L44)

# javascript - HTML5 手机应用程序 - 为 Retinas 重新缩放

> ID：15958886
> 
> 赞同：2
> 
> 时间：2013-04-11T21:08:00.647
> 
> 标签：javascript, html, mobile

这是我第一次为移动设备开发 html5。我希望我的应用程序能够通用运行，因此它需要考虑到视网膜显示以及正常显示。

我正在运行这段代码，它在 iPhone3G（正常显示）和 iPhone5（视网膜显示）上看起来都很好：

```
function Setup(){

    $('canvas').css('width', window.innerWidth + 'px');
    $('canvas').css('height', window.innerHeight + 'px');

    if(window.devicePixelRatio == 2) {
        canvas.setAttribute('width', window.innerWidth * 2);
        canvas.setAttribute('height', window.innerHeight * 2);
        ctx.scale(2, 2);
    }
    else{
        canvas.setAttribute('width', window.innerWidth);
        canvas.setAttribute('height', window.innerHeight);
        ctx.scale(1, 1);
    }

    Draw();

} 
```

我真的只是想知道我是否以正确的方式进行此操作？一切看起来都很好，但我不想在经过几天的工作和编码之后发现这是一种错误/坏的方法。

另外，我知道我需要 2 个版本的图像，例如：普通屏幕的 32x32 图像和视网膜的 64x64 图像，但我需要将该图像缩小 50%。正确的？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T01:09:08.430

`ctx.scale`可能会起作用，但可能会使您的图像看起来像狗屎。拉长。

当然，您可以使用视网膜大小的图像并按比例缩小，但随后您在非视网膜设备（例如 3gs）上增加了额外的工作量，这已经很慢了。

我使用的方法是这样的：

```
myCanvas.width = 300;
myCanvas.height = 300;

// you can use variables to get this value: width * window.devicePixelRatio
myCanvas.style.width = "600px";
myCanvas.style.height = "600px"; 
```

当然，您还需要通过 window.devicePixelRatio 缩放所有输入！

# iis-7.5 - IIS 应用程序池的 CPU 上限

> ID：15958891
> 
> 赞同：0
> 
> 时间：2013-04-11T21:08:24.850
> 
> 标签：iis-7.5, windows-server-2008, cpu, application-pool

我一直在尝试为在 Web 服务器 (Win2K8 R2) 上运行的特定 IIS 应用程序池实现 CPU 上限。我曾尝试使用 Windows 系统资源管理器使用几个不同的进程匹配标准，但该进程实际上从未被限制。

## 第一次尝试

我从[这里](http://www.iis.net/learn/manage/managing-performance-settings/using-wsrm-to-manage-iis-7-apppool-cpu-utilization)得到的第一个过程匹配标准。我输入的实际匹配条件是`@w3wp.exe.*MyAppPoolName`

然后我创建了我的资源分配策略，并将其指向上述流程匹配标准。我将 CPU 限制在 25%，启用了策略，启动了我的应用程序池，并启动了在池中运行的应用程序。应用程序池的 CPU 立即飙升至超过 25% 的限制，并且相当稳定地保持在那里。

## 第二次尝试

我尝试的下一个匹配条件来自[这里](http://technet.microsoft.com/en-us/library/cc732948.aspx)。我输入的实际匹配条件是`@.*w3wp\.exe.*MyAppPoolName.*`

我更新了分配策略以指向新的匹配标准，并开始备份所有内容。再次，立即飙升超过限制。

## 第三次尝试

在我的第三次也是最后一次尝试中，我使用了 WSRM 的 Add Rule 对话框中的内置控件。我从下拉列表中选择了 IIS App-Pool，单击了 Select... 按钮，然后选择了我的应用程序池。它生成的匹配标准是`C:\Windows\system32\inetsrv\w3wp.exe * -ap "MyAppPoolName"`

再次，我更新了我的分配策略，并启动了一切。再次，立即飙升超过限制。

* * *

有没有其他人真正成功地实施了这些分配政策之一？它们的设置似乎非常简单，但实际开始工作却是一种痛苦！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T06:37:10.963

[或者使用开箱](http://www.iis.net/learn/get-started/whats-new-in-iis-8/iis-80-cpu-throttling-sand-boxing-sites-and-applications)即用的 IIS 8 更新到 Windows 2012 。IIS 7+ 确实支持 CPU 监控，但仅在应用程序池超过限制时才提供终止应用程序池。

# html - 不想工作的 HTML 格式

> ID：15958911
> 
> 赞同：1
> 
> 时间：2013-04-11T21:09:45.067
> 
> 标签：html, css

简单的 html 格式，我似乎无法正确 gt。

我有以下 div：

```
<div class="fc-event-time" data-hasqtip="true" aria-describedby="qtip-6">
      2:54 - 6:54
    <i class="icos-refresh" style="float: right; margin-top: -17px; margin-right: 2px"></i>
    <i class="icos-acces-denied-sign" style="float: right; margin-top: -17px; margin-right: 2px"></i>
</div> 
```

根据萤火虫有以下css类作用于它：

```
padding-left: 5px;
white-space: nowrap;
font-weight: 500;font-size: 12px !important;
padding: 0px 1px;
color: rgb(0, 0, 0) !important;
cursor: pointer;
direction: ltr;
text-align: left
font-family: "Helvetica Neue",Helvetica,Arial,sans-serif;
line-height: 18px; 
```

现在上面的代码呈现如下：

![在此处输入图像描述](https://i.stack.imgur.com/7xBhQ.png)

如果你能看到，有两个图标在彼此的顶部，`the <i></i> elements', my problem is that I would like to have it side by side. My first thought was to add`display:block;` 但这不起作用。我怎样才能让它们排列而不是叠加？

**更新：**

取出后`margin-top: -17px;`我得到以下结果，但我需要它们（文本和图标）在同一行。

![在此处输入图像描述](https://i.stack.imgur.com/1hWNW.png)

**更新 2：**

最后找出问题并解决了这个问题，结果证明是`2:54 - 6:54`纯文本不允许`<i>`s 进入同一行。我所做的只是修改完整日历源以将时间放在 a 中`<span>`，并给它一个样式属性“float：left”，它现在全部排好并工作。感谢大家的帮助，如果提交了更好的答案（我不需要修改 javascript，我仍然会将其作为答案奖励，因为这将是一种更好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T21:31:10.093

据我所知，您的`i`图标没有应用任何宽度，加上负边距顶部可能会与浮动一起玩。如果您为`i`元素定义实际宽度，则应该没有问题（至少根据我所看到的）。

如果这不起作用，您可能还涉及某种绝对定位。如果是这种情况，并且应用于`i`元素，那么您需要将其删除。

但是如果没有看到应用于`i`元素的样式，这有点不可能。

### 更新

啊，好的，所以负的上边距导致了这个问题。为了让你的文本和你的图标在同一行上对齐，你必须用 span 包裹文本并应用 a `float:left`。

```
<span style="display: block; float:left;">2:54 - 6:54</span>
<i class="icos-refresh" style="float: right; margin-right: 2px"></i>
<i class="icos-acces-denied-sign" style="float: right; margin-right: 2px"></i> 
```

但是，我建议您不要使用内联样式并将它们提取到特定的 css 类中。

# python - bsddb 4.2.52 DBInvalidArgError 22 无效参数

> ID：15958917
> 
> 赞同：1
> 
> 时间：2013-04-11T21:10:20.630
> 
> 标签：python, berkeley-db

我只是尝试使用 bsddb 在 Python 中调用 open 但遇到以下错误。任何想法？如果没有，有没有办法获得更详细的调试错误消息，获取更多信息可能有助于我进一步调查。没有太多细节的错误代码当然没有多大帮助。

> DBInvalidArgError: (22, '无效参数')

资源：

```
import bsddb, bsddb.db

...
try:
    e = bsddb.db.DBEnv()
    e.open('/mydir', bsddb.db.DB_CREATE | bsddb.db.DB_INIT_MPOOL)
... 
```

附加信息：在 /mydir 我有一个 DB_CONFIG 文件：

```
set_data_dir /mydir/current_data
# 128MB
set_cachesize 0 134217728 1 
```

**更新：** 我想我在这里做了一些事情，因为它与 bsddb 和 bsddb.db 版本有关：

```
> $python
> Python 2.5...
> import bsddb, bsddb.db
> print bsddb.__version__, bsddb.db.version()
> 4.4.5 (4, 2, 52)
> bsddb.db.DBEnv().open('/mydir/')
> bsddb.db.DBInvalidArgError: (22, 'Invalid argument')

> $python2.6
> Python 2.6.6...
> import bsddb, bsddb.db
> print bsddb.__version__, bsddb.db.version()
> 4.7.3 (4, 7, 25)
> bsddb.db.DBEnv().open('/mydir/')
> 
```

如果我用 python2.6 运行它没有错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-09T18:00:04.463

是的，BerkeleyDB 曾经在版本不匹配时返回 EINVAL。

最近（如过去 5 年以上）BerkeleyDB 改为返回 DB_VERSION_MISMATCH。

# php - 为什么我不能使用“if”语句在 PHP 函数中返回真/假？

> ID：15958924
> 
> 赞同：2
> 
> 时间：2013-04-11T21:10:44.240
> 
> 标签：php

为什么使用`if`语句来确定函数是否应该返回 true 或 false 不起作用？True 有效，但 false 无效。

这是我的代码：

```
function test($var){
    if($var == "string"){
        return true;
    }else{
        return false;
    }
} 
```

做： 按应有的方式`echo test("string");`返回，`true`但使用`echo test("hello");`应该返回`false`，但什么也不返回，为什么？

应该使用什么来代替返回 true/false 与标准？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T21:20:27.820

好吧，它确实[对我有用](http://sandbox.onlinephpfunctions.com/code/ab6053c64dc7784b43cab90b25b39df4982a50a5)

使用 ：

```
function test($var){
    if($var == "string"){
        return true;
    }else{
        return false;
    }
}

echo "string:";
var_dump(test("string"));
echo "hello:";
var_dump(test("hello")); 
```

导致输出

> 字符串：布尔（真）
> 你好：布尔（假）

当你想看到某些东西的输出时，总是使用[`var_dump()`](http://php.net/manual/fr/function.var-dump.php)as false 直接回显时不会产生任何输出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T21:19:00.310

```
var_dump(test("hello")); 
```

欺骗性地回显假不会产生任何输出。试试`var_dump`吧；它会告诉你真正的价值。

```
bool(false) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-11T21:20:25.883

我看不出您的代码不起作用的原因，但这会更短：

```
function test($var) {
    return ($var == "string");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-11T21:00:58.697

您的代码很危险——这意味着可能是错误的。

使用 === 而不是 ==

```
if ($var === "string") { ... 
```

阅读文档；）

# c# - 我的项目的数据源指南

> ID：15958928
> 
> 赞同：0
> 
> 时间：2013-04-11T21:11:01.127
> 
> 标签：c#, sql, xml, winforms

我是一个新手程序员。我理论知识丰富，但实践落后。好的。我正在尝试制作一个用于向文件添加类别和描述的程序。语言是 C#，它应该在 Windows 7 上运行...

1.类别可以包含子类别。

我不想称它们为“标签”，因为它们是不同的。类别可以是 fx“收藏夹”。但也可以是：“收藏夹->音乐->2013”​​。您可以创建子类别，我将在 WinForm 上使用 TreeView 来执行用户可以使用它们执行的所有操作。

问题：我应该对类别使用 XML 文件吗？

2.每个文件都可以有一个描述和一个或多个类别。然而：

*   即使文件被删除，我也想保留它的描述，以便以后使用。
*   文件夹本身将被省略。文件夹本身不能有类别，也不能有描述。但是包含的文件是的。

我制作了一个非常简单的 SQL Server 数据库，其中包含一个表：！[http://img832.imageshack.us/img832/3931/finalprojectdb.png](http://img832.imageshack.us/img832/3931/finalprojectdb.png)

问题：这是个好主意吗？也许类别列最好是 XML 类型？

欢迎任何关于在这种情况下最好的方法是什么的建议。提前致谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T21:14:34.680

SQL 不适合一次获取嵌套数据。您可以将内容存储在 XML 中，这为您提供了很大的灵活性，但您还必须为其编写解析器或反序列化器。现在人们也只是写了一个小的 Javascript 类，然后使用像 Newtonsoft 这样的东西来自动反序列化它。

如果您想要一个数据库解决方案，如果您不想单独安装数据库，则可以使用嵌入在您的应用程序中的 SQLite 之类的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T21:15:07.797

对于需要跨平台（比如 c# 到 java）、跨 Internet 或跨网络通信的应用程序来说，XML 是一个很好的设计。但作为将数据作为子集存储在表中的一种方式，并非如此。

规范化的数据库是一个了不起的工具。它可以被索引（xml 不能）这允许快速查询数据。如果您通过将 xml 嵌入查询的列中来对数据进行非规范化，那么它会很慢并且更新/维护会很痛苦。

我个人更喜欢外键表。

# c# - 在指定网卡上接收udp数据包c#

> ID：15958930
> 
> 赞同：3
> 
> 时间：2013-04-11T21:11:14.153
> 
> 标签：c#, udp, udpclient, nic

我有 3 个不同的网卡，每个都有各自的职责。其中两张卡正在接收来自类似设备（直接插入每个单独的网卡）的数据包，该设备在同一端口上发送数据。我需要保存数据包，知道它们来自哪个设备。

鉴于我需要不指定向我发送数据包的设备的 IP 地址，我如何才能在给定的网卡上监听？如果需要，我可以为所有 3 个网卡指定一个静态 IP 地址。

示例：nic1 = 169.254.0.27，nic2 = 169.254.0.28，nic3 = 169.254.0.29

现在我有这个从 nic1 和 nic2 接收数据而不知道它来自哪个设备。

```
var myClient = new UdpClient(2000) //Port is random example

var endPoint = new IPEndPoint(IPAddress.Any, 0):

while (!finished)
{
    byte[] receivedBytes = myClient.Receive(ref endPoint);
    doStuff(receivedBytes);
} 
```

我似乎无法以某种方式指定网卡的静态 IP 地址，这样我就可以只从其中一个设备中捕获数据包。如何仅在知道它们来自两个不同的网卡的情况下将这些数据包分开？

谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-11T22:19:14.403

您没有告诉 UdpClient 监听哪个 IP 端点。即使您要更换`IPAddress.Any`网卡的端点，您仍然会遇到同样的问题。

如果要告诉 UdpClient 接收特定网卡上的数据包，则必须在*构造函数*中指定该网卡的 IP 地址。像这样：

```
var listenEndpoint = new IPEndPoint(IPAddress.Parse("192.168.1.2"), 2000);
var myClient = new UdpClient(listenEndpoint); 
```

现在，您可能会问“`ref endPoint`我打电话时有什么作用`myClient.Receive(ref endPoint)`？” 该端点是*客户端*的 IP 端点。我建议用以下代码替换您的代码：

```
IPEndpoint clientEndpoint = null;

while (!finished)
{
    var receivedBytes = myClient.Receive(ref clientEndpoint);
    // clientEndpoint is no longer null - it is now populated
    // with the IP address of the client that just sent you data
} 
```

所以现在你有两个端点：

1.  `listenEndpoint`，通过构造函数传入，指定要监听的网卡地址。
2.  `clientEndpoint`, 作为 ref 参数传入 Receive()，它将[填充客户端的 IP 地址](http://msdn.microsoft.com/en-us/library/system.net.sockets.udpclient.receive.aspx)，以便您知道谁在与您交谈。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T21:25:53.397

看看这个：

```
 foreach (NetworkInterface netInterface in NetworkInterface.GetAllNetworkInterfaces())
  {
    Console.WriteLine("Name: " + netInterface.Name);
    Console.WriteLine("Description: " + netInterface.Description);
    Console.WriteLine("Addresses: ");
    IPInterfaceProperties ipProps = netInterface.GetIPProperties();
    foreach (UnicastIPAddressInformation addr in ipProps.UnicastAddresses)
    {
      Console.WriteLine(" " + addr.Address.ToString());
    }
    Console.WriteLine("");
  } 
```

然后你可以选择从哪个地址开始监听。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T21:37:31.033

看，如果您`IPEndPoint`以以下方式创建您的，它必须工作：

```
IPHostEntry hostEntry = null;

// Get host related information.
hostEntry = Dns.GetHostEntry(server);

foreach(IPAddress address in hostEntry.AddressList)
{
  IPEndPoint ipe = new IPEndPoint(address, port);
  ... 
```

尝试不`0`作为端口传递，而是作为有效端口号传递，如果您运行此代码并在第一次迭代后中断 foreach，您将只创建 1`IPEndPoint`并且您可以在调用中使用该端口：`myClient.Receive`

请注意，`UdpClient`该类有一个名为 Client 的成员，它是一个套接字，尝试探索该对象的属性以找出一些详细信息，我在这里找到了我给你的代码：http: [//msdn.microsoft.com/ en-us/图书馆/system.net.sockets.socket.aspx](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.aspx)

# jquery - 同一域的 HTTP 和 HTTPS 版本之间的 XSS

> ID：15958934
> 
> 赞同：1
> 
> 时间：2013-04-11T21:11:33.667
> 
> 标签：jquery, iframe, https, xss

我想要完成的是使用 ajax 的内联登录，它执行以下操作：

1.  登录链接显示在不安全的 HTTP 页面上，可以说“ [http://www.somedomain.com/somepage/](http://www.somedomain.com/somepage/) ”**这里没有收集登录信息**

2.  单击登录链接时，会创建一个 iframe，其中 src 指向“ [https://www.somedomain.com/rest_api/values/](https://www.somedomain.com/rest_api/values/) ” **这是登录表单首次显示的位置，通过 HTTPS**

3.  在新的 iframe 弹出窗口中，向用户展示了一个登录表单，该表单本身是通过 HTTPS 加载的安全登录表单，用户填写表单并单击继续返回给自己。

4.  假设用户已成功登录，则会对可访问的脚本进行 jquery 调用，通过`window.parent.document`该脚本可使用当前用户小部件更新原始页面，然后调用要销毁的 iframe。

当我强制 iframe 使用相同的域和协议时，这很有效，但是一旦我进入 HTTP 并强制 IFRAME 使用 HTTPS 加载登录脚本，我就会得到可怕的“权限被拒绝访问属性'文档' " 成功登录后 Firebug 中的错误。

我知道`Access-Control-Allow-Origin`需要设置标头，因此它被动态设置为使用请求页面的任何域的 HTTPS 版本，并且我已经在原始页面请求的 Firebug 中的标头响应中验证了这一点。

那么为什么我仍然收到错误，响应标头显示：

```
Access-Control-Allow-Origin: https://www.somedomain.com 
```

那么我需要设置其他东西，还是问题可能在其他地方？

谢谢你的帮助！

* * *

编辑：上面更新指出我并不愚蠢，登录表单确实是安全加载的；）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T18:17:57.853

除了@SLaks 上面提出的“我应该/不应该”问题之外，这是有效的，但是任何网站都需要自己权衡的问题......我面临的技术问题是这个，`Access-Control-Allow-Origin` *它自己*还不够，还需要与以下内容一起设置：

```
Access-Control-Allow-Methods: GET, POST, OPTIONS
Access-Control-Allow-Headers: X-Requested-With 
```

如果第一个对于我描述的确切场景是必要的，我不肯定，因为 jquery 只是在成功的 POST*之后*运行，而不是 POST 或 GET 调用本身，但它供您参考，因为我需要它我们网站的其他用例。

第二个`...Allow-Headers`是踢球者，因为包含标头`X-Requested-With: XMLHttpRequest`是因为它最初是使用jquery中的*XMLHttpRequest调用的，特别是**.ajax()*。

这三个都到位后，我从那以后就没有问题了。希望这可以帮助其他处于相同情况的人！

* * *

编辑：自欺欺人，HTTPS 到 HTTP 仍然不起作用，从剩下的一天我仍然试图弄清楚这一点，很明显它不会，尽管它应该这样做。

所以最终的解决方案是，通过 HTTPS 加载登录页面，通过 HTTPS 提交，并在成功登录后重定向到 HTTP 以向父级发送回调以删除登录 iframe。

# javascript - Jquery animate 回调开始下一个动画

> ID：15958935
> 
> 赞同：0
> 
> 时间：2013-04-11T21:11:36.137
> 
> 标签：javascript, jquery

我怎样才能更简单地做到这一点？

```
var i = 0;
    $(this).find(".ui-stars-star-on-large:eq("+i+")").animate({width: w+'px'}, 200, "swing", function() {
        i++;
        $(this).parent().find(".ui-stars-star-on-large:eq("+i+")").animate({width: w+'px'}, 200, "swing", function() {
            i++;
            $(this).parent().find(".ui-stars-star-on-large:eq("+i+")").animate({width: w+'px'}, 200, "swing", function() {
                i++;
                $(this).parent().find(".ui-stars-star-on-large:eq("+i+")").animate({width: w+'px'}, 200, "swing", function() {
                    i++;
                    $(this).parent().find(".ui-stars-star-on-large:eq("+i+")").animate({width: w+'px'}, 200, "swing", function() {
                        i++;
                    });
                });
            });
        });
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T21:27:09.143

假设你想要动画的东西都在父级下，你可以命名你的动画回调......然后你可以从内部再次触发动画。

```
var $stars = $(this).children('.ui-stars-star-on-large');
var i = 0;

// wrap this whole block in a named function expression, so it can be re-called
(function nextStar() {
    // if you want the animations to loop, remove the if
    // and add a `i %= $stars.length;` after the jquery stuff
    if (i < $stars.length) {
        // .eq(i) works much like the ':eq('+i+')' selector, except
        // it's less hideous and doesn't require building selectors.  :P
        $stars.eq(i++).animate({width: w+'px'}, 200, 'swing', nextStar);
    }
// end the function and immediately call it, starting the first animation
})(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T21:23:08.323

你可以使用递归：

```
var w = 200;    
function animate(count, i) {
    $(this).find(".ui-stars-star-on-large:eq(" + i + ")").animate({
        width: w + "px"
    }, 200, "swing", function () {
        i++;
        if (i < count) animate(count, i);
    }}
}

animate(5, 1); 
```

或使用延迟：

```
for(var i = 0; i < 5; i++) {
     $(this).find(".ui-stars-star-on-large:eq(" + i + ")")
        .delay(i * 200)
        .animate({
            width: w + "px"
        }, 200, "swing")
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T21:51:04.137

`setTimeout`如果您的动画很轻并且具有良好的性能，您可以使用循环

```
var $this = $(this),
    $stars = $this.parent().find(".ui-stars-star-on-large");
for (var i = 0; i < 5; i++) {
    var _i = i;
    setTimeout(function(){
        $stars().eq(_i).animate({width: w+'px'}, 200, "swing")
   }, 200*i);
} 
```

# php - post ajax 中的返回数据不起作用

> ID：15958940
> 
> 赞同：-1
> 
> 时间：2013-04-11T21:11:55.627
> 
> 标签：php, jquery, ajax, post

我正在尝试使用 $.post 检索数据并将其存储为返回类型。但是，我总是得到一个未定义的错误。

如果我做类似的事情：

```
function get_list(){
      $.post('php/reverse.php', function(data){
        alert(data);
      });
  } 
```

一切正常。但是如果我做类似的事情

```
 function get_list(){
          $.post('php/reverse.php', function(data){
            return data;
          });
      }

alert(get_list()); 
```

然后它突然给了我一个未定义的错误。有人可以告诉我我做错了什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T21:15:07.187

您不能在异步上下文中返回此类数据...

您必须传递一些在成功时执行的回调：

```
function get_image_list(handler){
     $.post('php/reverse.php', function(data){
         handler(data);
     });
}

get_image_list(function(data){alert(data);}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T21:18:54.717

您的 get_image_list 实际上不返回任何内容，因为它不包含返回语句。AJAX 调用是异步执行的。为了使您的代码段按预期工作，它必须看起来像：

```
function get_image_list(callback) {
    $.post('php/reverse.php', function(data){
        callback(data);
    });
}

get_image_list(function(data) { alert(data); }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T21:26:57.030

这并不理想，但您似乎还不熟悉异步调用。请调查回调。话虽如此，这是您正在寻找的代码：

```
function getList(){
    var dataToReturn;
    $.ajax({
        url: "php/reverse.php", 
        async: false
    }).done(function(data){
        dataToReturn = data;
    });
    return dataToReturn;
}

alert(getList()); 
```

通过将 async 设置为 false，您将强制代码等待数据准备好使用。这样您就可以分配给“dataToReturn”，并在函数执行结束时返回它。默认情况下，async 为 true，因此在数据准备好之前执行到函数的末尾，因此没有什么可以返回。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T21:15:45.770

这是因为`asynchronous`AJAX 的性质。您不能从回调函数返回值，因为所有其他代码在 AJAX 调用触发回调时早已执行。

# c# - Visual Studio 2012 中的表设计器不起作用

> ID：15958941
> 
> 赞同：1
> 
> 时间：2013-04-11T21:12:02.867
> 
> 标签：c#, visual-studio-2012

我对 Visual Studio 2012 很陌生，我正面临这样的问题：我不能使用表格设计器，我已按照说明进行操作：http: [//msdn.microsoft.com/en-us/library/ms172003.aspx](http://msdn.microsoft.com/en-us/library/ms172003.aspx)但所有按钮都被禁用

提前致谢

# javascript - 画布上的图像时 Canvas.doDataUrl 不起作用

> ID：15958946
> 
> 赞同：0
> 
> 时间：2013-04-11T21:12:27.087
> 
> 标签：javascript, html, canvas, html5-canvas

我知道它仅适用于本地图像。任何人都可以发布执行此操作的工作代码吗？

我试过以下 -

```
 var base_image = new Image();
        base_image.src = ("/img.png");

        base_image.onload = function(){
            var context = canvas.getContext('2d');
            context.drawImage(base_image, 0, 0);

        } 
```

甚至输入我自己的网址

```
base_image.src = ("www.mywebsite.com/img.png"); 
```

其次是 -

```
 var str = canvas.toDataURL("image/png");
    $("#myimg").attr("src", str); 
```

都不工作。

我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T21:14:45.413

放在`base_image.src` **后面** `base_image.onload`：

```
 var base_image = new Image();
    base_image.onload = function(){
        var context = canvas.getContext('2d');
        context.drawImage(base_image, 0, 0);
        var str = canvas.toDataURL("image/png");
        $("#myimg").attr("src", str);
    }
    base_image.src = ("/img.png"); 
```

# sonarqube - 在 Sonar 中，我如何知道代码行添加到了哪里？

> ID：15958947
> 
> 赞同：1
> 
> 时间：2013-04-11T21:12:27.107
> 
> 标签：sonarqube, analysis, lines-of-code

有没有办法深入查看哪些目录/文件添加了代码行？

昨天我看到我的项目添加了 ~5k LOC。我认为 Sonar 很困惑，因为我们没有添加那么多，我们只是将几个文件拆分为一组更大的文件。

我尝试添加 LOC 指标热点无济于事（我认为这会起作用，因为其他热点似乎会根据顶部的下拉列表显示更改）。

我已经尝试深入研究 LOC 参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:52:29.853

根据 [sonar-users] 邮件列表，目前这是不可能的。

[http://jira.codehaus.org/browse/SONAR-3580](http://jira.codehaus.org/browse/SONAR-3580)

# clojure - 我可以配置 CounterClockWise 的 REPL 以便它以源和文档启动吗？

> ID：15958950
> 
> 赞同：5
> 
> 时间：2013-04-11T21:12:31.217
> 
> 标签：clojure, counterclockwise

我觉得奇怪的是 CCW 不以命名空间中的`(source)`or`(doc)`函数启动。它也没有`(e)`。我想不出我不想在我的repl中出现这些情况。有没有办法让我每次启动 CCW repl 时都可以使用这些，而无需`(use)`手动输入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-08-27T09:23:21.427

我认为没有办法，但是您应该能够通过将鼠标悬停在符号上或在光标悬停在符号上时按 F2 来查看文档。

您可以通过 Ctrl+单击符号或在光标位于符号上方时按 F3 导航到源。

最后，在 REPL 中，右上角有一个按钮，用于打印完整的堆栈跟踪，与 (e) 相同。它可能还有一个键绑定，不确定。

# php - 用原始字符串中的字符串替换字符串

> ID：15958951
> 
> 赞同：1
> 
> 时间：2013-04-11T21:12:42.263
> 
> 标签：php, string

我有一个所见即所得的编辑器，我的客户想要使用类似的模式，比如 Wordpress 简码。

实际上，客户想要执行以下操作：

```
 [.class_name]
      /// Some content here
 [/close_container] 
```

我可以使用 str_replace() 轻松替换 [/close_container]，但是由于 class_name 会随着使用的每个简码而改变（比如是 [.green_block]，我首先必须以某种方式捕获 green_block，然后将整个 [.green_block] 替换为`<div class='green_block'>`. 没有预定义的类列表，所以我对如何处理这个有点无能为力。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T21:21:57.370

采用

```
$formated_string= preg_replace("/\[\.(\w\-\s)\]/", "$1", $entire_string); 
```

沙洛姆...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T21:24:11.973

这正是正则表达式最适合的：

```
$string = preg_replace('/\[\.(\w+)\]/i', '<div class="$1">', $string);
$string = str_replace('[/close_container]', '</div>', $string); 
```

显然上面不会有任何错误检查，因此很容易构造格式错误的 html。但是，通过一些额外的工作，您可以解决此问题并构建一些相当稳定的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T21:25:31.553

使用有限的允许输入集（如果不是特殊代码字符`&#91;`[ / `&#93;`]，则使您的客户端需要将它们写在 HTML 实体中：

```
strtr($string, array(
    '[/close_container]' => '</div>', 
    '[.' => '<div class="', 
    ']' => '">'
)); 
```

[奇迹般有效。](http://eval.in/16064)

# .net - .NET XML 序列化与 Unity 中的静态类：InvalidOperationException

> ID：15958953
> 
> 赞同：0
> 
> 时间：2013-04-11T21:12:49.743
> 
> 标签：.net, unity3d, xml-serialization, unityscript

我在 Unity 中使用 Javascript 将数据保存为 XML。我正在导入部分 .NET 库以提供 XML 序列化功能

我正在尝试使用我的静态`Global`类并将其转换为 XML。

我明白了

```
 InvalidOperationException: The type of the argument object 'System.MonoType' is not primitive. 
```

当试图序列化这个

```
static class Global extends System.Object{ 
class buildingData{
    static var posX:int[]=new int[100];
    static var posY:int[]=new int[100];
    static var posZ:int[]=new int[100];
    static var name:String[]=new String[100];
    static var type:int[]=new int[100];
    static var id:int[]=new int[100];
}

class peopleData{
    ///etc. 
```

通过这种方式：

```
var xs : XmlSerializer = new XmlSerializer(typeof(Global));
xs.Serialize(xmlTextWriter, Global); 
```

我的 Global 类是静态的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T07:17:44.673

`MonoType`是类型系统的子类，`Type`代表类型系统。If`Global`是一种类型，我很惊讶`xs.Serialize(xmlTextWriter, Global)`甚至编译，正如`XmlSerializer`预期的那样*object*，并且`Global`那里（而不是`typeof(Global)`）甚至不应该解决 AFAIK。

但是：确实，您不能使用对象序列化程序来序列化静态状态。但是当我阅读它时，`Global`甚至*没有*任何状态。基本上 - 给它一个实际的对象实例。

# .net - 如何制作两个相同高度的GroupBox？

> ID：15958955
> 
> 赞同：0
> 
> 时间：2013-04-11T21:13:03.447
> 
> 标签：.net, winforms, resize, height, groupbox

我正在尝试在 C#/.NET 4.0/WinForms 中构建一个用户控件，该控件将包含两个（或更多）`GroupBox`元素放在彼此之上，第一个元素触摸我的用户控件的顶部边框，而最后一个元素触摸底线。

我还希望这些`GroupBox`元素的高度都相同，除此之外（现在这似乎是困难的部分），当用户更改应用程序窗口的高度时，所有这些都必须完美地工作。到目前为止，我还没有找到任何`Anchor`可以实现这一点的属性组合，所以我开始认为编写自定义调整大小处理程序将是唯一的选择，但在我深入研究这种（在我眼中）肮脏的解决方案之前，我想知道是否有一些简单的方法可以创建符合我描述的用户控件？

[这](http://i.stack.imgur.com/DggXs.png)是我想要完成的说明，[如果](http://i.stack.imgur.com/PSr6l.png)top `GroupBox`has`Top`和`Left` `Anchor`bottom one has会发生什么`Top`，`Bottom`并且`Left`应用程序窗口会稍微调整大小（底部一个占用所有额外空间，而不是两个 GroupBox 平均共享它），最后，如果我使用上一个示例中的属性但将 a 添加到上部[，](http://i.stack.imgur.com/hjQat.png)会发生这种情况。`Bottom` `Anchor``GroupBox`

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T21:22:59.570

将代码添加到 SizeChanged 事件处理程序以确保布局元素按应有的方式显示，这根本不是一个肮脏的解决方案——这是每个 WinFroms UI 开发人员在某些时候都必须做的事情！

解决方案很简单，根据您的调整大小模型和其他周围的 UI 控件设置锚点，然后简单地获取控件的 Height 属性，将其除以 2，删除一个图形以占边距，然后将结果图形分配给每个 GroupBox 的 height 属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T21:30:36.643

您可以让您的容器做一些工作，即使用 a`TableLayoutPanel`作为容器，将其设置为 2 行和 1 列并将 Dock 属性设置为 Fill，然后您可以将您的 Dock 模式设置`GroupBoxes`为的每个单元格添加到`TableLayoutPanel`填充同样，您可能会在 Groupbox 中设置任何子控件的位置，因为如果您设置并列锚点，它将影响控件的大小。玩弄它，看看它是否适合你。

# web-applications - 在设计 Web 应用程序时选择 Javascript 库

> ID：15958962
> 
> 赞同：0
> 
> 时间：2013-04-11T21:13:35.650
> 
> 标签：web-applications, javascript

即使作为一名经验丰富的开发人员（主要是 PHP 和 Java/Android），进入 Web 应用程序开发的世界也有点不知所措。我当然不是第一个说可用的 Javascript 框架的数量是压倒性的。

[https://stackoverflow.com/questions/394601/which-javascript-framework-jquery-vs-dojo-vs](https://stackoverflow.com/questions/394601/which-javascript-framework-jquery-vs-dojo-vs)

[http://www.infoq.com/research/top-javascript-mvc-frameworks](http://www.infoq.com/research/top-javascript-mvc-frameworks)

[http://www.netmagazine.com/features/essential-javascript-top-five-mvc-frameworks](http://www.netmagazine.com/features/essential-javascript-top-five-mvc-frameworks)

但正如任何 Web 应用程序开发人员所知道的那样，可用的 Javascript 库远远超出了 MV* 框架。我发现的一些非常酷且有用的库包括：

[Backbone](http://backbonejs.org/) / [Angujar](http://angularjs.org/) / [Ember](http://emberjs.com/)（MV* 框架）

[JQuery](http://jquery.com/) / [Prototype](http://prototypejs.org/) / [Dojo](http://dojotoolkit.org/) / [MooTools](http://mootools.net/)（DOM 操作）

[下划线](http://underscorejs.org/)/[小胡子](https://github.com/janl/mustache.js/)/[车把](http://handlebarsjs.com/)（模板）

[需要.js](http://requirejs.org/) (AMD)

[引导程序](http://twitter.github.io/bootstrap/)（多个）

[茉莉花](http://pivotal.github.io/jasmine/)（测试）

[jQueryUI](http://jqueryui.com/)（用户界面）

这绝不是一个完整的列表。我敢肯定那里还有数百个其他好的图书馆。更重要的是，这些都是通用库（不是图形、动画、数学等）。

我的问题是，从**设计**的角度来看，新的 Web 应用程序开发人员应该如何选择用于应用程序的通用库？更具体地说，新的 Web 应用程序开发人员应该考虑使用哪些**类型**的库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T21:24:22.310

这取决于您的网络应用程序的大小以及您开发的网络应用程序类型。我从大量经验中发现，JavaScript 库的概念与 JAVA 或 .NET 的概念不同。JavaScript 库是一个不断变化的目标，它们总是在变化，很明显，这些库的作者急于成为第一个推向市场的人，将他们的库作为一种简化 JavaScript 开发的方式，因为他们的库减少了一些具体操作的开发时间。虽然它们是库，但如果你正在开发一个大型 JavaScript Web 应用程序，你会发现这些库最终会花费你更多的时间，因为你有学习库的费用然后是他们一直在做的更新。

对于大型应用程序，至少使用库进行用户交互，不要将它们集成到应用程序的核心中。

对于小型 Web 应用程序，这无关紧要。

JQuery 已经有些年头了，他们真的已经弄清楚了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T21:53:23.187

如何设计整个 Web 应用程序真的很重要。

现在，使用 Javascript 和 HTML5 变得更加强大和丰富。大多数开发人员希望利用浏览器的强大功能并使服务器摆脱 UI 逻辑/生成。在这种情况下，开发人员可以创建单页应用程序（如 gmail）并使用 Web 服务（JSON、XML、JSONP）。开发这样的应用程序可能是选择任何 UI 库的原因

1.  MV/MVC：在 MV/MVC 层中分离/排列代码。
2.  诱惑库：视图层可以利用可用的诱惑库（DRY）

3.  AMD：可用于按需加载文件和模块（优化）

4.  测试框架：Jsmine，编写测试用例

5.  Dom 操作：如果没有，大多数 MC/MVC 库都带有 dom 实用程序，那么它们依赖于其他可用的库，如 Jquery/Dojo/YUI 等（避免重新发明轮子的实用程序）

除此之外，如果 UI 需要简单的 dom 操作、一些 ajax、验证和跨浏览器支持的 UI 效果，那么 jQuery/Prototype/Dojo 等 JS 库很有用。

# elasticsearch - 具有多值字段 geo_point 的 arcDistance 脚本字段过滤器的行为是什么？

> ID：15958963
> 
> 赞同：0
> 
> 时间：2013-04-11T21:13:36.497
> 
> 标签：elasticsearch

脚本过滤器的行为是什么：

```
doc['distance'] >= doc['locations'].arcDistance(lat, lon) 
```

如果位置是 geo_point 类型的多值字段？

如果任何位置符合标准，我希望它匹配。从实验来看，我认为它符合第一点。

返回距离时：

```
doc['locations'].arcDistance(lat, lon) 
```

它会选择哪一点？首先？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T11:39:30.023

我设法在源代码中查找了这一点。它只使用第一个位置。

# javascript - 为什么序列对于矩阵转换很重要，如同时旋转和平移变换

> ID：15958964
> 
> 赞同：0
> 
> 时间：2013-04-11T21:13:37.563
> 
> 标签：javascript, css, matrix, internet-explorer-10

我想同时为 matrix3d 设置旋转和平移的动画。奇怪的是我得到完全不同的结果，首先是旋转或平移。我有两个小提琴来显示差异。我不明白。

[http://jsfiddle.net/wetlip/2nuQu/](http://jsfiddle.net/wetlip/2nuQu/) 翻译前旋转

[http://jsfiddle.net/wetlip/Z3MTX/](http://jsfiddle.net/wetlip/Z3MTX/) 旋转前翻译

```
var el = document.getElementById("aa2");
 var matrix = new MSCSSMatrix(el.style.transform);

    matrix = matrix.rotateAxisAngle(0, 1, 0, 85);
 matrix = matrix.translate(300, 0, 0);

 el.style.transform = matrix; 
```

给出了完全不同的结果

```
var el = document.getElementById("aa2");
 var matrix = new MSCSSMatrix(el.style.transform);

 matrix = matrix.translate(300, 0, 0);
matrix = matrix.rotateAxisAngle(0, 1, 0, 85);

 el.style.transform = matrix; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T21:16:21.630

这些操作是通过不可交换的矩阵乘法应用的。 [http://en.wikipedia.org/wiki/Matrix_multiplication](http://en.wikipedia.org/wiki/Matrix_multiplication)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T21:17:52.300

围绕原点发生旋转。

如果要旋转不在原点的对象，则必须先将其平移到原点，旋转它，然后再将其平移回来。

如果您旋转不在原点的对象，您会以意想不到的方式有效地移动和旋转它。

# java - 泛型和 ArrayList 实现优先级队列

> ID：15958966
> 
> 赞同：0
> 
> 时间：2013-04-11T21:14:03.153
> 
> 标签：java

我被困在一个包括泛型和`ArrayList`. `T`任务是通过定义一个优先级队列类来实现一个能够保存任意类型对象的优先级队列，该类使用`ArrayList`.

要支持的方法是`Add(item, priority)`

并根据优先级`remove()`删除优先级列表中的最高项目。

我创建了 Generic Class，其类型为`T`，已声明`private T data`。使用多个构造函数来设置数据。现在我被困在如何使用这个类和 Use`ArrayList`上，因为我不确定你是否可以`add(string, integer)`更不用说`ArrayList`迭代它。

任何关于如何处理这项作业的提示和想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T21:21:18.090

您只需将数据及其优先级包装在另一个对象中，仅由您的 PriorityQueue 内部使用（就像 LinkedList 使用包装数据的节点和指向下一个节点的指针）。

所以`priorityQueue(T data, int priority)`最终会被实施为

```
Node node = new Node(data, priority);
// find the position where the node must be inserted
arrayList.add(position, node); 
```

# asp.net-mvc-3 - 用部分类扩展类

> ID：15958967
> 
> 赞同：0
> 
> 时间：2013-04-11T21:14:03.717
> 
> 标签：asp.net-mvc-3, entity-framework

在 MVC3 中工作，c#

我想知道模型、类、数据库表和部分类的“层次结构”。

在数据库中，我有一个 UserAccount 表，其结构如下：

USERACCOUNT：用户 ID、名字、姓氏、登录名、密码、电子邮件

在我的项目中，我有一个名为 UserModel 的模型。我正在使用它，所以我可以用数据注释来装饰属性。它被设置为 useraccount 类的元数据类型，如下所示：

```
[MetadataType(typeof(UserModel))]
public partial class useraccount
{
}

public class UserModel
{
    public int UserId { get; set; }

    [Display(Name="First Name")]
    [StringLength(20)]
    [Required]
    public string FirstName { get; set; }

    [Display(Name = "Last Name")]
    [StringLength(30)]
    [Required]
    public string LastName { get; set; }

    [Display(Name = "Email Address")]
    [StringLength(20)]
    [Required]
    public string email { get; set; }

    [Remote("IsUserNameAvailable", "Validation")]
    [Display(Name = "Choose a Login Name")]
    [StringLength(40)]
    [Required]
    public string login { get; set; }

    [Display(Name = "Choose a Password")]
    [StringLength(64)]
    [Required]
    public string password { get; set; }

    [Display(Name = "Enter Password Again")]
    [StringLength(64)]
    [Required]
    public string confirmPassword { get; set; }

} 
```

请注意，在数据库表中有一个“密码”列，但在 UserModel 中没有“确认密码”。

我的想法是 UserAccount 类，使用 UserModel 类作为元数据，现在应该包含“confirmPassword”的定义。

这是我遇到的问题。在注册视图中，我使用 UserModel 作为模型，所以在页面顶部我有：

```
@model OurAgreements.Models.UserModel 
```

当我尝试保存时，问题出现在控制器中。这段代码：

```
 public ActionResult Register(UserModel model)
    {
        var repo = new Repository();

        if (ModelState.IsValid)
        {
            using (var db = new ouragreementEntities())
            {
                db.useraccount.Add(model);
                db.SaveChanges();
            }

            return View();
        } 
```

给出错误，无法将 UserModel 转换为 useraccount。我可以理解这一点，我正在尝试将数据放入与所有列都不匹配的表中。

因此，我想我会将视图上的模型更改为：

```
 @model OurAgreements.Models.useraccount 
```

因为根据我的想法，useraccount 类应该使用 UserModel，但这样做会产生错误，'useraccount has no definition for 'confirmPassword'

所以我有点卡住了。我知道我可以切换回使用 UserModel 作为模型，然后在控制器中我可以构建一个新的用户帐户实例，并用模型中的数据填充它，然后将实例保存到数据库中。

所以我想我的问题是，为什么 useraccount 不包含confirmPassword 的定义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T22:05:16.647

第一件事。更改类的名称。使用 UserAccountMetadata / UserAccount。这使事情更容易阅读和理解。

此外，在确认密码字段中使用比较属性，以便确保它们匹配。数据类型属性应该出现在两个密码字段中。

```
[DataType(DataType.Password)]
[Display(Name = "Confirm Password")]
[Compare("Password", ErrorMessage = "Password and confirm password must be same!")]
public string confirmPassword { get; set; } 
```

您的视图使用的模型应该是 UserAccount。

在将您的视图模型 (UserAccount) 传递给将其保存在数据库中的方法之前，您需要将其映射到该方法采用的对象，这看起来像是您的域模型对象。您可以手动执行此操作，但这很麻烦。使用映射工具（例如 AutoMapper）自动为您执行此操作。您可以告诉 AutoMapper UserAccount 中的哪些字段映射到您的域模型中的哪些字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T22:02:19.867

通过创建一个包含 DataAnnotations 和其他不在数据库中的属性的视图模型，您之前走在正确的道路上。此 ViewModel 及其相关的 DataAnnotations 可帮助您执行业务验证逻辑，并允许您将一个或多个表的数据值映射到视图的单个类。

那么，至于我认为您的总体问题是，为什么数据库中没有确认密码？为什么应该有？在数据库中拥有相同数据的两个副本在存储数据领域是没有意义的。

确认密码是一种业务逻辑/用户输入检查，以确保他们没有“粗手指”密码并将自己锁定在他们的帐户之外。一旦您确认他们输入的密码是他们想要的密码（密码 == confirmPassword），您就可以对密码进行哈希处理并将其放入数据库中。

# grails - Grails 和 Atmosphere：使用 Atmosphere 推送在服务中呈现模板

> ID：15958968
> 
> 赞同：0
> 
> 时间：2013-04-11T21:14:06.397
> 
> 标签：grails, push-notification, atmosphere

我正在使用 Atmosphere 1.0.12 将数据从服务器推送到 Grails 2.2.1 应用程序中的客户端。

该应用程序是一个拍卖网站，我正在推送价格、投标人信息和状态消息等更新。目标是在页面上动态更改信息，而无需重新加载页面。一些信息很容易更新，例如投标后的价格变化。但其他事情需要一些逻辑，例如告诉用户他们是出价最高的人，或者出价过高。

目前我已经实现了一个大气服务（LotPushService）来推送信息。

但是，在这些更新之后，某些信息会丢失，例如用户信息和区域设置，因为这些信息没有随更新一起发送，也没有由服务处理。

是否可以在发送推送更新时使用该服务呈现页面模板，从而保留会话和状态信息？

这种情况有什么最佳实践吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T18:36:04.580

您是否配置了[BroadcasterCache？](https://github.com/Atmosphere/atmosphere/wiki/Understanding-BroadcasterCache)至少你应该为了不丢失消息。

# batch-file - 如何让批处理程序等到它检测到文件

> ID：15958970
> 
> 赞同：2
> 
> 时间：2013-04-11T21:14:19.083
> 
> 标签：batch-file

所以这就是我所拥有的

```
:a
IF EXIST D:\ (
goto copy
) ELSE (
goto wait
)

:wait
timeout /t 300
goto a

:copy
xcopy "D:\photos" "C:\Photos From Cam"
exit 
```

但我不太喜欢这个，因为这意味着它总是在循环，除了 5 分钟的暂停，我想要一种方法来做到这一点，它在检测到文件之前不会运行任何代码。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T21:43:29.680

我认为仅使用 shell 没有比您已经拥有的更好的解决方案。

您将不得不使用一些外部工具
例如参考问题[Windows: File Monitoring Script (Batch/VBS)](https://stackoverflow.com/q/5762064/850848)。

# google-apps-script - 在 Google 电子表格中的工作表移动上执行 GAS

> ID：15958973
> 
> 赞同：0
> 
> 时间：2013-04-11T21:14:27.363
> 
> 标签：google-apps-script, google-sheets

移动工作表（拖放）时，有没有办法执行 GAS（Google 电子表格中的自定义函数）？

我在 Web Applications, [How do I Sum Through Different Sheets](https://webapps.stackexchange.com/a/42960/29140)上写了这个脚本，但是脚本的重新计算相当慢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T01:29:03.807

没有重新排列电子表格选项卡的触发器。您可以获得的最接近的是可安装的 onEdit 触发器，但是触发器排除了许多类型的更改（也称为编辑）。

有关 onEdit 触发器及其不响应的内容的更多信息，请参阅[此答案。](https://stackoverflow.com/questions/15232405/detect-user-inserting-row-or-column-in-a-google-spreadsheet-and-reacting-in-a-sc/15234631#15234631)

# html - 导航栏子菜单显示在图像后面

> ID：15958975
> 
> 赞同：0
> 
> 时间：2013-04-11T21:14:38.843
> 
> 标签：html, css, slider

我有一个带有这个 CSS 代码的 CSS 菜单：

```
#cssmenu ul { margin: 0; padding: 0; text-align: center; }
#cssmenu li { margin: 0; padding: 0;}
#cssmenu a { margin: 0; padding: 0;}
#cssmenu ul {list-style: none;}
#cssmenu a {text-decoration: none;}
#cssmenu {height: 50px; background-color: #f36f25; box-shadow: 0px 2px 3px rgba(0,0,0,.4);}
#cssmenu > ul > li {
    display: inline-block;
    margin-left: 15px;
    position: relative;
}
#cssmenu > ul > li > a {
    color: #ffffff;
    font-size: 15px;
    line-height: 50px;
    padding: 16px 20px;
-webkit-transition: color .15s;
   -moz-transition: color .15s;
     -o-transition: color .15s;
        transition: color .15s;
}
#cssmenu > ul > li > a:hover {color: #ffffff; background-color:#666666; }
#cssmenu > ul > li > ul {
    opacity: 0;
    visibility: hidden;
    padding: 16px 0 20px 0;
    background-color: #eeeeee;
    text-align: left;
    position: absolute;
    top: 30px;
    left: 50%;
    margin-left: -90px;
    width: 180px;
-webkit-transition: all .3s .1s;
   -moz-transition: all .3s .1s;
     -o-transition: all .3s .1s;
        transition: all .3s .1s;
-webkit-border-radius: 5px;
   -moz-border-radius: 5px;
        border-radius: 5px;
-webkit-box-shadow: 0px 1px 3px rgba(0,0,0,.4);
   -moz-box-shadow: 0px 1px 3px rgba(0,0,0,.4);
        box-shadow: 0px 1px 3px rgba(0,0,0,.4);
}
#cssmenu > ul > li:hover > ul {
    opacity: 1;
    top: 50px;
    visibility: visible;
}
#cssmenu > ul > li > ul:before{
    content: '';
    display: block;
    border-color: transparent transparent rgb(250,250,250) transparent;
    border-style: solid;
    border-width: 10px;
    position: absolute;
    top: -20px;
    left: 50%;
    margin-left: -10px;
}
#cssmenu > ul ul > li { position: relative;}
#cssmenu ul ul a{
    color: #000000;
    font-size: 13px;
    background-color: #eeeeee;
    padding: 5px 8px 7px 16px;
    display: block;
-webkit-transition: background-color .1s;
   -moz-transition: background-color .1s;
     -o-transition: background-color .1s;
        transition: background-color .1s;
}
#cssmenu ul ul a:hover {background-color: #f36f25;}
#cssmenu ul ul ul {
    visibility: hidden;
    opacity: 0;
    position: absolute;
    top: -16px;
    left: 206px;
    padding: 16px 0 20px 0;
    background-color: #eeeeee;
    text-align: left;
    width: 160px;
-webkit-transition: all .3s;
   -moz-transition: all .3s;
     -o-transition: all .3s;
        transition: all .3s;
-webkit-border-radius: 5px;
   -moz-border-radius: 5px;
        border-radius: 5px;
-webkit-box-shadow: 0px 1px 3px rgba(0,0,0,.4);
   -moz-box-shadow: 0px 1px 3px rgba(0,0,0,.4);
        box-shadow: 0px 1px 3px rgba(0,0,0,.4);
}
#cssmenu ul ul > li:hover > ul { opacity: 1; left: 196px; visibility: visible;}
#cssmenu ul ul a:hover{
    background-color: #f36f25;
    color: rgb(240,240,240);
} 
```

导航代码下方有一个滑块，但导航上的子菜单显示在滑块上的图像后面，我能做些什么让它们显示在滑块图像前面？

JS Fiddle 的菜单在这里：http: [//jsfiddle.net/JLRte/](http://jsfiddle.net/JLRte/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T21:17:34.250

`z-index`在菜单中添加一个：`#cssmenu *{ z-index: 999 }`小提琴：http: [//jsfiddle.net/JLRte/1/](http://jsfiddle.net/JLRte/1/)

# ruby-on-rails - 在 ERB 渲染布局中嵌套每个循环不会迭代任何元素

> ID：15958979
> 
> 赞同：0
> 
> 时间：2013-04-11T21:14:45.613
> 
> 标签：ruby-on-rails, haml, erb

我有一个常见的子布局，我在我的应用程序的许多页面上使用它。为了渲染它，我使用`render layout: ...`并将视图的其余部分放入块中：

```
<%= render layout: 'layouts/content-box', locals: { header: 'Foo' } do %>
  <% @posts.each do |post| %>
    <%= post.inspect %>
  <% end %>
<% end %> 
```

这会产生一个空模板，实际上循环根本不会迭代。这曾经有效，但我们目前正在从 HAML 迁移：

```
= render layout: 'layouts/content-box', locals: { header: 'Foo' } do
  - @posts.each do |post|
    = post.inspect 
```

我认为我发布的 HAML 是等价的，但显然不是。如果我将循环移到`render`块之外，那么它可以工作。该数组在那里并已填充。我究竟做错了什么？我也尝试过使用`<%- @posts.each %>`（注意连字符）。似乎没有任何工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T21:19:31.990

Gahhhh，这是因为我尝试渲染的布局仍然是 HAML 文件。一旦我也将它转换为 ERB，一切都按预期工作。

# python - 如何确保 Twitter 机器人不会多次转发同一条推文？

> ID：15958980
> 
> 赞同：0
> 
> 时间：2013-04-11T21:14:50.750
> 
> 标签：python, twitter

我正在用 Python 编写一个简单的 Twitter 机器人，想知道是否有人可以为我回答和解释这个问题。

我可以发推文，但我还没有让机器人转发任何人。我害怕多次发布用户的推文。我计划让我的机器人仅基于 Windows 计划任务运行，因此当脚本（例如）第三次运行时，我如何获取它以便脚本/机器人不会再次转发推文？

澄清我的问题：假设有人在下午 5 点 59 分发推文“#computer”。现在我的 twitter 机器人应该转发任何包含 #computer 的内容。假设当机器人在下午 6:03 运行时，它会找到该推文并转发它。但是，当机器人在下午 6 点 09 分再次运行时，它会再次转发同一条推文。我如何确保它不会转发重复的推文？

我是否应该创建一个单独的文本文件并添加推文的 ID 并在每次机器人运行时通读它们？我无法找到有关此的任何答案，也不知道有效的检查方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-31T17:24:47.427

This is how I did it. I grabbed the list of things to retweet and a list of my feed. I cut the lists down to only posts within the past 24 hours. Then for each item in retweetable I check to see if it's in my feed list. If not I post RT @user retweet content.

I also wrote a function to chop the str down to 140 chars (137 + '...')

E.G.

```
TO_RT = 'a post to post'
MYTWT = ('old post', 'other old post')

if TO_RT not in MYTWT
  Tweet(TO_RT) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T21:52:03.750

您应该将处理的最新推文的时间戳存储在某处，这样您就不会两次浏览相同的推文，因此不会转发两次推文。

这也应该使推文处理更快（因为您只处理每条推文一次）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T22:03:01.483

几个月前我用 python 写了一个 twitter 机器人，这个[链接](https://github.com/sixohsix/twitter)帮助很大。我还使用了这个[github 存储库](https://github.com/muffinista/chatterbot/tree/master/lib/chatterbot)，它虽然在 Ruby 中，但对逻辑流很有帮助。这个 repo 使用与您提到的类似的方法，创建以前转发的本地数据存储以与每条推文进行比较。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-27T16:22:56.720

Twitter 的设置使您不能多次转发同一件事。因此，如果您的机器人收到这样的推文，它将被 API 重定向到错误 403 页面。您可以通过将脚本每次运行之间的时间缩短到大约一分钟来测试此策略；这将生成错误 403 链接，因为当前的推文提要保持不变。

# actionscript-3 - flash 只接受输入框中的多个字符

> ID：15958983
> 
> 赞同：0
> 
> 时间：2013-04-11T21:15:02.660
> 
> 标签：actionscript-3, flash-cs6

我试图在文本框中捕获 1 个字母，但是当我输入多个字母时，flash 只会注册，所以如果我输入“G”它不起作用，但如果我输入“GH”那么它会注册。到目前为止，我正在像这样捕捉它。（部分代码）

```
function goToFrame8(event:MouseEvent):void
{

    addChild(answerInput);
    answerInput.x = 350;
    answerInput.y = 350;

    //next 'frame' button
    addChild(next8);
    next8.x = 650;
    next8.y = 520;
    next8.addEventListener(MouseEvent.CLICK, goToFrame9);

    answerInput.randomText.addEventListener(TextEvent.TEXT_INPUT, inputEventCapture);
}

function inputEventCapture(event:TextEvent):void
{
    text1 = answerInput.randomText.text;
}

function goToFrame9(event:MouseEvent):void
{
    trace(text1);
removeChild(answerInput);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T21:39:03.377

尝试使用`KeyboardEvent.KEY_UP`事件而不是`TextEvent.TEXT_INPUT`. KEY_UP 事件在按键被按下然后释放后触发。您添加事件侦听器的对象将需要焦点，但您的文本字段将具有焦点，因为您必须单击文本字段才能在其中键入。

```
function goToFrame8(event:MouseEvent):void
{

    addChild(answerInput);
    answerInput.x = 350;
    answerInput.y = 350;

    //next 'frame' button
    addChild(next8);
    next8.x = 650;
    next8.y = 520;
    next8.addEventListener(MouseEvent.CLICK, goToFrame9);

    answerInput.randomText.addEventListener(KeyboardEvent.KEY_UP, inputEventCapture);
}

function inputEventCapture(event:KeyboardEvent):void
{
    text1 = answerInput.randomText.text;
}

function goToFrame9(event:MouseEvent):void
{
    trace(text1);
    removeChild(answerInput);
} 
```

# python - 将引号添加到参数时，Python MySQLdb 查询返回错误

> ID：15958987
> 
> 赞同：0
> 
> 时间：2013-04-11T21:15:09.503
> 
> 标签：python, mysql

我正在运行以下代码，这给了我一个错误

```
import MySQLdb as mdb

source_sentence = "%Barack Obama%"
filterquery = ""
try:
    con = mdb.connect(MYSQL_HOST, MYSQL_USER, MYSQL_PASSWORD, MYSQL_DB)
    cur = con.cursor()

    print "SELECT sentence_id FROM translation_all WHERE source_sentence LIKE '%s' %s ORDER BY id" % (source_sentence, filterquery)
    cur.execute("SELECT sentence_id FROM translation_all WHERE source_sentence LIKE '%s' %s ORDER BY id", (source_sentence, filterquery))

    uid = cur.fetchone()
    print uid
except mdb.Error, e:
    print "Error %d: %s" % (e.args[0],e.args[1])
    sys.exit(1)
finally:    
    if con:    
        con.close() 
```

错误如下：

```
SELECT sentence_id FROM translation_all WHERE source_sentence LIKE '%Barack Obama%'  ORDER BY id
Error 1064: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '%Barack Obama%'' '' ORDER BY id' at line 1 
```

如果我在查询中用双引号替换单引号，则没有错误，但给出了一个空查询

```
SELECT sentence_id FROM translation_all WHERE source_sentence LIKE "%Barack Obama%"  ORDER BY id
None 
```

有趣的是，上面的两个查询都在通过命令行或 phpmyadmin 直接在 mysql 上执行时返回结果。你知道为什么这可能会失败吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T22:32:37.043

当您将参数传递给`cur.execute`时，dbapi 已经为您进行了引用。这意味着不要使用：

```
... LIKE '%s' %s ORDER BY id 
```

但

```
... LIKE %s ORDER BY id 
```

你会注意到我已经删除了第二个`%s`，因为它在这里是一个错误。当它被`''`查询替换时没有意义。

不要让自己被执行查询之前打印的字符串所迷惑。这不是被执行的查询：

```
"... %s" % ('spam',) 
```

然后做一些与查询完全不同的事情：

```
cursor.execute("... %s", ('spam',)) 
```

# javascript - CouchDB / Couchbase 视图按键数排序

> ID：15958991
> 
> 赞同：1
> 
> 时间：2013-04-11T21:15:21.253
> 
> 标签：javascript, mapreduce, couchdb, couchbase

我正在尝试编写一个视图，显示系统中使用的前 10 个标签。在 reduce 函数中使用 _count 获取数量相当容易，但这不会按数字对列表进行排序。有没有办法做到这一点？

```
function(doc, meta) {
  if(doc.type === 'log') {
    emit(doc.tag, 1);
  }
}
_count 
```

结果，我想拥有：

*   标签3 10
*   标签1 7
*   标签2 3
*   ...

代替

*   标签1 7
*   标签2 3
*   标签3 10

最重要的是，我不想将全套传输到我的应用程序服务器并在那里处理它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T13:24:46.807

在 couchbase 中，您无法在 reduce 中/之后对结果进行排序，因此您无法直接获得“前 10 名”。在 couchbase 视图中，值总是按键排序。最好的方法是：

1.  查询返回键值对的视图：`tag_name - count_value`order by`tag_name`
2.  创建每 N 分钟运行一次的作业，从 [1] 获取结果，对它们进行排序，并将排序结果写入单独的键（即“Top10Tags”）。
3.  在您的应用程序中，您查询关键 Top10Tags。

这可能会减少流量，但结果可能会过时。您还可以在 couchbase 运行的同一台服务器上创建该“作业”（即编写小型 node.js 应用程序或其他东西），并且它只需要环回流量和少量 cpu 用于每 N 分钟排序一次。

此外，如果您使用 _count reduce 函数，则不需要发出任何数字，只需使用 null：

```
function(doc, meta) {
  if(meta.type === "json" && doc.type === 'log') {
    emit(doc.tag, null);
  }
} 
```

如果你想让文档被多个标签标记，比如

```
{
  "type": "log",
  "tags": ["tag1","tag2","tag3"]
} 
```

您的地图功能应该是：

```
function(doc, meta) {
  if(meta.type === "json" && doc.type === 'log') {
    for(var i = 0; i < doc.tags.length; i++){
      emit(doc.tags[i], null);
    }
  }
} 
```

关于top10 名单的另一件事。如果您不想将其存储在磁盘上，可以将其存储在 memcache 存储桶中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T04:33:08.577

您认为很容易但实际上并非如此的事情。

在 couchdb 中，我会使用列表函数，并使用 JavaScript sort() 对结果进行排序。这样它就在服务器端进行了排序，你可以让列表只返回前 10 个。

请记住，对于大型数据集，这将很慢。

# multithreading - 当程序退出并卸载我的 .dll 时，我的工作线程会在我释放它们的内存之前终止

> ID：15958995
> 
> 赞同：1
> 
> 时间：2013-04-11T21:15:37.220
> 
> 标签：multithreading, memory-leaks, exit

我有一个静态链接到 MFC 的 .dll。在正常使用 .dll 期间，它会使用 .dll 创建一个工作线程`AfxBeginThread`。在该线程的函数内部，我创建了两个数组：

```
CByteArray ReadBuffer;
ReadBuffer.SetSize(92);
CByteArray PacketBuffer;
PacketBuffer.SetSize(46); 
```

这些缓冲区将在程序执行期间改变大小（通常更大）。问题是，当程序退出时，线程的函数似乎终止了，而没有机会释放这些数组分配的内存。我`ExitInstance()`在 .dll 中有一个重载来进行其他清理，但是到达它的时间我已经收到了消息：

```
The thread 'Win32 Thread' (0x2208) has exited with code 0 (0x0).
The thread 'Win32 Thread' (0x1e34) has exited with code 0 (0x0).
The thread 'Win32 Thread' (0x1ff8) has exited with code 0 (0x0).
The thread 'Win32 Thread' (0x1fc0) has exited with code 0 (0x0). 
```

这些表明线程在执行过程中被终止，并且似乎没有给它时间调用任何析构函数或进行任何清理。

`CWinThread`我尝试使用重载函数创建自己的对象`ExitInstance()`，但这些线程在调用该函数之前再次退出。

在调用 .dlls 关闭函数并清理内存后，我得到以下信息：

```
Detected memory leaks!
Dumping objects ->
f:\dd\vctools\vc7libs\ship\atlmfc\src\mfc\array_b.cpp(110) : {258} normal block at 0x023686E8, 2048 bytes long.
Data: <                > C6 F9 1D C0 E2 0C 00 00 00 00 AA 00 C0 11 E0 11 
f:\dd\vctools\vc7libs\ship\atlmfc\src\mfc\array_b.cpp(110) : {201} normal block at 0x02366F00, 64 bytes long.
Data: <b           @   > 62 F9 1D C0 81 09 00 00 00 00 7F 00 40 11 E0 10 
Object dump complete. 
```

`ReadBuffer`显示由上方和上方引起的泄漏`PacketBuffer`。在程序退出之前，我找不到正确关闭线程并清理内存的方法。我有办法优雅地终止我可以使用的线程，但是在程序终止之前我找不到执行它的地方。

我不确定这是否是一个大问题，因为程序正在终止，但我一直认为 .dll 应该清理所有自己的内存以确保安全。