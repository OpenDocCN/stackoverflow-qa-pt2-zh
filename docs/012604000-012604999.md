# StackOverflow 问答 12604000-12604999

# sql - 如何比较两个不同表的两个不同行并更新第三个表？

> ID：12604002
> 
> 赞同：0
> 
> 时间：2012-09-26T14:28:27.847
> 
> 标签：sql, oracle

我有两个不同的表 Value(queid, m) 和 Ans(queid1, an)。我想比较 queid 和 queid1，如果它们相同，则 m 和 an 的值，并且必须用正确的值更新第三个表。谢谢一吨。
表结构是
Value表，会有两个属性queid和m。queid 将具有类似 3、4、5、6 的数据，m 将具有 a、v、d、e
Ans 表将具有属性 queid1 和 an。queid1 属性将具有 3、4、3、4、3、3、3、2、3、4 之类的数据，而 an 将具有诸如 a、v、a、a、a、c、e、r、e、d 之类的数据.
现在我想要的是它应该将 queid 的值与 queid1 进行比较。因此，如果我们考虑**3**即 value 表中 queid 的第一个值，那么它应该在 ans 表中找到所有**3**，然后应该比较**a**（即 value 表中 3 对应的行），所有 3 都在 ans 中。并且a的对应的右比较将被存储在第三个表中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T16:41:16.203

这可以通过在 queid 和 queid1 列上加入两个表然后过滤 m 和 an 列相等的任何结果来完成：

```
INSERT INTO NewTable (col1, col2)
    SELECT V.queid, V.m
    FROM Value V
    JOIN Ans A
        ON V.queid = A.queid1
    WHERE V.m = A.an
; 
```

# entity-framework - 刷新模型时如何在 edmx 中保留不可为空的设置？

> ID：12604004
> 
> 赞同：7
> 
> 时间：2012-09-26T14:28:29.157
> 
> 标签：entity-framework, visual-studio-2012

我有一个最近从 VS2010 迁移到 VS2012 的项目。

它包含一个包含我的实体的 EF4.1 edmx 文件。其中一些实体基于视图并且是只读的。虽然视图返回的某些列可以为空，但我在视图中更改了这些列的返回值，以确保它们不会返回 null 使用

```
ISNULL(NumericColumnName, 0) AS NumericValueColumn 
```

通过 VS2010 中的“从数据库更新模型”功能更新模型时，以这种方式返回的列在我的模型中被创建为不可为空。但是，自从迁移到 VS2012 后，情况就不再如此了。

现在，每当我使用“从数据库更新模型”功能时，这些属性都会生成为可为空的。我要做的是手动将列设置为不可为空。但是，下次我运行“从数据库更新模型”时，实体属性将重新生成为可为空。然后我必须再次将它们更新为不可为空。

我尝试过的另一种解决方法是将基于视图的实体移动到它们自己的 edmx 文件中。**但是，在更新任**一 edmx 文件时，我看到了相同的行为。

另一个细节是我正在使用通过 EF4.1 T4 STE 模板生成的自我跟踪实体。

有什么方法可以防止 VS2012 的 EF 设计器覆盖我的基于视图的实体的不可空属性？

**编辑**

事实证明，VS2012 中的设计器试图阻止您朝自己的脚开枪，并因此更改了我的实体中的成员属性。

从以下内容生成成员时：

```
SELECT ISNULL(Quantity,0) * ISNULL(Number, 0) AS Total FROM SomeTable 
```

VS2012 将始终将 SomeTable 实体上的成员 Total 设置为可为空，因为它不明白乘法的结果不可能为 0。为了防止这种行为，请将其更改为：

```
SELECT ISNULL(Quantity * Number, 0) AS Total FROM SomeTable. 
```

注意聚合，因为`ISNULL(SUM(SomeCol),0)`它与`SUM(ISNULL(SomeCol,0))`.

# iphone - 如何将委托设置给另一个控制器

> ID：12604007
> 
> 赞同：0
> 
> 时间：2012-09-26T14:28:40.913
> 
> 标签：iphone, objective-c, ios

我有一个视图控制器 ( `AViewController`)，我有一张桌子。
在该控制器中，我添加了另一个视图控制器视图作为子视图（`BViewController`）：

```
BViewController *barCodeScanner = [[BViewController alloc]init];
[self.view addSubview:barCodeScanner.view]; 
```

`BViewController`里面有一个委托和一个委托方法，它可以工作。
但我想刷新表`AViewController`。
所以我将委托移动到`AViewController`并尝试从以下位置更改委托代码：

```
rdr.readerDelegate = self; 
```

到

```
rdr.readerDelegate = AViewController; 
```

但它不起作用。为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T14:31:59.047

您需要为 AViewController 创建一个实例并将其设置为委托`rdr`：

```
rdr.readerDelegate = aViewControllerInstance; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T14:31:46.713

`AViewController`是一个类型（一个类），而不是该类型的一个*实例*。委托接受类的实例，而不是类名。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T15:13:20.190

嗨，这可能会解决你的问题。

```
AViewController *aView = [[AViewController alloc]init];

rdr.readerDelegate = aView ; 
```

您需要将对象设置`AViewController`为委托。

# c# - 在更大的序列中查找所有出现的模式

> ID：12604010
> 
> 赞同：1
> 
> 时间：2012-09-26T14:28:47.400
> 
> 标签：c#, .net, pattern-matching

我想要一种有效的算法来查找更大序列中所有出现的模式。

例如，给定以下输入：
**模式：** GAS
**序列：** ASDFGASDFGASDFADFASDFGA

**预期输出：** `{4, 9}`

根据接受的[类似问题的](https://stackoverflow.com/questions/283456)[答案](https://stackoverflow.com/a/283648/117870)，实现了实现所需任务的算法。但是，一条[评论](https://stackoverflow.com/questions/283456/byte-array-pattern-search#comment7694244_283648)报告该算法“在大字节数组上很慢”。

在阅读之后，看起来最好的算法是[Boyer-Moore 字符串搜索算法，它在](http://en.wikipedia.org/wiki/Boyer%E2%80%93Moore_string_search_algorithm)[CodeProject](http://www.codeproject.com/Articles/12781/Boyer-Moore-and-related-exact-string-matching-algo)上的 C# 中实现，但我在为通用枚举实现它时遇到了麻烦。

是否有任何基于 Boyer-Moore 算法的现有解决方案来查找.NET中**通用序列中模式的所有出现？**

**注意**
虽然我在示例中使用了字符串，但我想要一个适用于任何实现 IEnumerable 的数据的答案。换句话说，它不仅应该适用于字符串，而且应该适用于任何类型。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T14:43:14.233

当序列是模式的重复并且模式是另一个模式重复 m 次（如果我错了，请纠正我）时，最坏情况的性能是 O(nm)（其中 n = seq.Count）。

```
List<int> LookFor<T>( IEnumerable<T> seq, T[ ] pattern )
        where T : IEquatable<T> {

    var partialMatches = new LinkedList<int>( );
    var matches = new List<int>( );

    int i = 0;
    foreach ( T item in seq ) {
        if ( item.Equals( pattern[ 0 ] ) )
            partialMatches.AddLast( 0 );

        var n = partialMatches.First;
        while(n != null) {
            if ( item.Equals( pattern[ n.Value ] ) ) {
                n.Value += 1;
                if ( n.Value == pattern.Length ) {
                    matches.Add( i - pattern.Length + 1 );

                    var next = n.Next;
                    partialMatches.Remove( n );
                    n = next;

                    continue;
                }
            }
            else partialMatches.Remove( n );

            n = n.Next;
        }

        i += 1;
    }

    return matches;
} 
```

测试：

```
void Main()
{
    var matches = LookFor( "abcabcabcabcabcabcabc", 
        new char[ ] { 'a', 'b', 'c', 'a', 'b', 'c', 'a', 'b', 'c' } );

    foreach ( var x in matches )
        Console.WriteLine( "{0}", x );
} 
```

输出：

```
0
3
6
9
12 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T14:28:47.400

在徒劳地理解 Boyer-Moore 算法之后，我将这段代码放在一起，它通过一次遍历更大的集合来进行模式匹配。

我无法针对 Boyer-Moore 算法对其进行测试，但它的工作效率非常高，当整个序列是模式的重复时， **O(nm)是最坏情况下的性能。**

这是我的实现。让我知道你对此的看法。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            Console.WriteLine("Enter the string you want to search within.");
            string hayStack = Console.ReadLine();
            Console.WriteLine("Enter the string you want to search for.");
            string needle = Console.ReadLine();

            var ps = new PatternSearch<char>(needle.ToCharArray());

            Console.WriteLine();
            Console.WriteLine();

            Console.WriteLine(hayStack);

            var matches = ps.Matches(hayStack.ToCharArray()).ToList();

            for (int i = 0; i < hayStack.Length; i++)
                Console.Write(matches.Contains(i) ? "↑" : " ");

            Console.WriteLine();

            Console.ReadLine();
        }
    }

    /// <summary>Implements a pattern searching algorithm with <b>O(nm)</b> worst-case performance.</summary>
    /// <typeparam name="T">The data type of the array to search.</typeparam>
    public class PatternSearch<T>
    {
        private struct MatchInfo
        {
            public MatchInfo(int startIndex, int matchLength)
            {
                this.StartIndex = startIndex;
                this.MatchLength = matchLength;
            }
            public int StartIndex;
            public int MatchLength;
        }

        private IEnumerable<T> pattern;
        private List<MatchInfo> found;
        private Func<T, T, bool> eqComp;

        //optimization for IEnumerables that do not implement IList
        int patLen = -1;
        int seqLen = -1;

        /// <summary>Initializes a new instance of the <see cref="PatternSearch{T}" /> class.</summary>
        /// <param name="pattern">The pattern that will be searched for.</param>
        public PatternSearch(T[] pattern) : this(pattern, (x, y) => x.Equals(y)) { }

        /// <summary>
        /// Initializes a new instance of the <see cref="PatternSearch{T}"/> class with the specified equality comparer.
        /// </summary>
        /// <param name="pattern">The pattern to be searched for.</param>
        /// <param name="equalityComparer">The equality comparer to use for matching elements in the array.</param>
        public PatternSearch(T[] pattern, Func<T, T, bool> equalityComparer)
        {
            patLen = pattern.Length;

            if (pattern == null)
                throw new ArgumentNullException("pattern", "The search pattern cannot be null.");
            if (equalityComparer == null)
                throw new ArgumentNullException("equalityComparer", "The equality comparer cannot be null.");

            if (patLen <= 0)
                throw new ArgumentException("pattern", "The pattern cannot be empty.");

            // assign the values
            this.pattern = pattern;
            found = new List<MatchInfo>();
            eqComp = equalityComparer;
        }

        /// <summary>
        /// Returns the start index of all occurrences of the search pattern within the specified array.
        /// </summary>
        /// <param name="seq">The larger sequence to find occurrences of the search pattern within.</param>
        public IEnumerable<int> Matches(IEnumerable<T> seq)
        {
            seqLen = seqLen == -1 ? seq.Count() : seqLen;
            return this.Matches(seq, 0, seqLen);
        }

        /// <summary>
        /// Returns the start index of all occurrences of the search pattern within the specified array.
        /// </summary>
        /// <param name="seq">The larger sequence to find occurrences of the search pattern within.</param>
        /// <param name="startIndex">The index in <paramref name="seq"/> to start searching at.</param>
        public IEnumerable<int> Matches(IEnumerable<T> seq, int startIndex)
        {
            seqLen = seqLen == -1 ? seq.Count() : seqLen;
            return this.Matches(seq, startIndex, seqLen);
        }

        /// <summary>
        /// Returns the start index of all occurrences of the search pattern within the specified array.
        /// </summary>
        /// <param name="seq">The larger sequence to find occurrences of the search pattern within.</param>
        /// <param name="count">The maximum number of items in <paramref name="seq"/> to match.</param>
        public IEnumerable<int> Matches(IEnumerable<T> seq, int startIndex, int count)
        {
            patLen = patLen == -1 ? pattern.Count() : patLen;
            seqLen = seqLen == -1 ? seq.Count() : seqLen;
            bool addedNew = false;

            var endPoint = Math.Min(seqLen, startIndex + count);

            if (seq == null ||                      // sequence cannot be null
                seqLen < patLen ||                  // pattern cannot be longer than sequence
                (endPoint - startIndex) < patLen)   // start to end cannot be less than pattern
                yield break;

            for (int i = startIndex; i < endPoint; i++)
            {
                addedNew = false;

                // add the first item if a match is found
                if (eqComp(seq.ElementAt(i), pattern.ElementAt(0)))
                {
                    if (patLen == 1)
                        yield return i;

                    found.Add(new MatchInfo(i, 1));
                    addedNew = true;
                }

                // check incomplete matches
                for (int m = found.Count - 1; m >= 0; m--)
                {
                    //skip the last item added
                    if (addedNew && m == found.Count - 1)
                        continue;

                    var match = found[m];

                    // check incomplete matches
                    if ((i - match.StartIndex < patLen) &&
                        eqComp(seq.ElementAt(i), pattern.ElementAt(match.MatchLength)))
                    {
                        match.MatchLength += 1;
                        found[m] = match;

                        // determine if a complete match has been found
                        if (match.MatchLength == patLen)
                        {
                            yield return match.StartIndex;
                            found.RemoveAt(m);
                        }
                    }
                    else
                        found.RemoveAt(m);
                }
            }
        }

    }
} 
```

# html - @font-face 不适用于 www - firefox

> ID：12604015
> 
> 赞同：0
> 
> 时间：2012-09-26T14:28:57.530
> 
> 标签：html, css, font-face

在我的网站中，我使用带有此代码的特定字体：

```
@font-face {
font-family: 'monotype';
src: url('/static_frontend/monotype.eot'); /* IE9 Compat Modes */
src: url('/static_frontend/monotype.eot?#iefix') format('embedded-opentype'), /* IE6-IE8 */
     url('/static_frontend/monotype.woff') format('woff'), /* Modern Browsers */
     url('/static_frontend/monotype.ttf')  format('truetype'); /* Safari, Android, iOS */
} 
```

当我用 www 打开网站时。字体不加载到 Firefox 中。在其他所有浏览器中，一切都很好。在 firefox 字体中，只有在没有 www 的情况下才能工作。

如果有人遇到过类似的问题，请写信。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-30T14:06:20.230

发现这样做的原因是因为基本 URL 始终设置为没有 www。另一个样式表的链接没有www。同样，使路径相对，它工作得很好！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T14:31:59.007

考虑使用[谷歌字体](http://www.google.com/webfonts)。如果这对您来说还不够可行，那么不久前我遇到了类似的问题。发生这种情况是因为字体位于与原始文件不同的域或子域中。

# html - 在 IE9 中悬停在精灵图像上时悬停不活动

> ID：12604016
> 
> 赞同：2
> 
> 时间：2012-09-26T14:28:59.757
> 
> 标签：html, css, internet-explorer, hover, css-sprites

这是一个顽固的人。

[JSfiddle](http://jsfiddle.net/XvMpK/)

我有一个打开视频播放器的链接（见下文）。同位素水文图像是链接图像，播放按钮图像在a内`span`作为背景图像。

![在此处输入图像描述](../Images/3a15af572acedb26955078d6668d3281.png)

我正在使用 css sprite，以便当有人将鼠标悬停在图像的任何部分上时，播放图像将变为下面的内容。

![在此处输入图像描述](../Images/a31f8444dbc9a8bdb1c1ef5d0e1d7b02.png)

这适用于除 IE 之外的所有浏览器。在 IE9 中，当我将鼠标悬停在同位素水文图像上时，它会改变颜色并且可以点击（如上图）。但是当我将鼠标悬停在实际的播放按钮上时，它会从蓝色的“活动”播​​放按钮（上图）切换到灰色的“非活动”播放按钮（上图），并且不可点击。

**我创建了下面的图像来说明正在发生的事情：**

![在此处输入图像描述](../Images/e6d7cff8246ba81a1381fa654060b30a.png)

这是当您将鼠标悬停在同位素水文图像上时（这是我想要发生的）

![在此处输入图像描述](../Images/792db724fe5f306c1246983c56d6cf88.png)

一旦我将鼠标悬停在播放按钮（这是一个跨度背景图像）上，这就是它的样子。（光标变成文本光标，css sprite 变回非悬停颜色）

对此的任何帮助都会很棒。

这是html：

```
<div id="news-video" class="news-tab">
                        <div id="video-box-left">
                            <div class="video-img">
                                <a href="#" onclick="window.open('http://wwwindex.html','photoessay','scrollbars=no,resizable=yes,width=850,height=722')"><span class="video-play-q-left">play</span><img src="resources-na/images/video-amano-scientific-forum.PNG" alt="Isotope Hydrology - The Fingerprints of Water" width="200" height="155" border="1"></a>
                            </div>
                            <div class="video-text">
                                <p><strong>Food for the Future - Meeting Challenges with Nuclear Applications - Statement to 2012 Scientific Forum</strong><a href="#" onclick="window.open('http://www-','photoessay','scrollbars=no,resizable=yes,width=850,height=722')"></a></p>
                            </div>
                        </div>
                        <div id="video-box-right">
                            <div class="video-img">
                                <a href="#" onclick="window.open('http://www-','photoessay','scrollbars=no,resizable=yes,width=800,height=600')"><img src="resources-na/images/video-isotope-hydrology.jpg" alt="Isotope Hydrology - The Fingerprints of Water" width="200" height="155" border="1"><span class="video-play-q-right">play</span></a>
                            </div>
                            <div class="video-text">
                                <p><strong>Isotope Hydrology - The Fingerprints of Water</strong><a href="#" onclick="window.open('http://.html','photoessay','scrollbars=no,resizable=yes,width=850,height=722')"></a></p>
                            </div>
                        </div> 
```

这是CSS：

```
#news-video {
    color: #8A8A8A;
    font-size: 1.1em;
    line-height: 1.6667;
    padding-left: 0px;
}

#video-box-left{
    margin-left: 10px;
    margin-right: 20px;
    float: left;
    width: 210px;
}
#video-box-right{
    margin-right: 10px;
    float: left;
    width: 210px;
}
.video-img {
    background-color: #EEEEEE;
    border: 1px solid #DDDDDD;
    margin-bottom: 5px;
    padding: 4px;
    width: 200px;
    height: 155px;
}

.video-text {

}

.video-play-q-left {
    background: url("../images/video-play-q-big.png") no-repeat scroll 0 0 transparent;
    background-position: center top;
    height: 50px;
    position: absolute;
    text-indent: -9999em;
    width: 50px;
    left: 100px; 
    top: 127px;
}
.video-play-q-right {
    background: url("../images/video-play-q-big.png") no-repeat scroll 0 0 transparent;
    background-position: center top;
    height: 50px;
    position: absolute;
    text-indent: -9999em;
    width: 50px;
    left: 321px;
    top: 127px;
}

a:hover .video-play-q-right{
    background-position: center bottom;
}

a:hover .video-play-q-left{
    background-position: center bottom;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T13:03:06.110

我的`DOCTYPE`标签迫使 IE 进入“IE9 兼容性视图”。

我改变了标签，它很好。

感谢大家的帮助。

# java - ActionScript 和 Java 程序之间的数据连接

> ID：12604019
> 
> 赞同：0
> 
> 时间：2012-09-26T14:29:08.853
> 
> 标签：java, actionscript-3

我需要将字节流从 Java 程序发送到 ActionScript 程序。我正在寻找选项。我搜索了一些关于读/写文件的信息。AS3 的文件系统包能够做到这一点，但它需要 Adob​​e Air，它确实使我的工作复杂化。我需要做很多测试，我打算通过脚本来做。所以文件系统包不是一个选项AS3中可以进行管道连接吗？或者简单的套接字连接，我可以在 Java 和 AS3 程序之间发送字节？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T19:43:08.870

好的，所以基本上你想要客户端 - 服务器交互。您有很多选择，这完全取决于您的需求。最基本的是使用 AS3 中某种形式的“ [Loader](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Loader.html#includeExamplesSummary) ”类来根据客户端的需要发送和接收数据。如果您需要向客户端发送更多实时数据，您可以查看 AS3 Socket 类。

# java - 西里尔字符，在 utf8 文件中。搞砸了

> ID：12604020
> 
> 赞同：0
> 
> 时间：2012-09-26T14:29:27.367
> 
> 标签：java, spring, unicode

我在集成测试中有以下内容：

```
 myMap.put(Language.RU, "Египет"); 
```

然后将其用作参数，但是当我在代码中 sys 时（使用通过哈希图访问的字符串），它看起来像这样：

```
param is : РљР°РёСЂ% 
```

因此没有返回数据，而实际上应该在使用原始字符串查询数据库时返回。

我以为我一直在使用 utf-8，可能导致问题的原因是什么？[在这里](https://stackoverflow.com/questions/1749064/how-to-find-default-charset-encoding-in-java)使用该技术，一切都确实设置为 UTF-8 ...？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T14:44:47.193

您可能需要使用 -Dfile.encoding=UTF8 设置虚拟机的编码

# actionscript-3 - 如何处理 flex 中的安全错误 2191

> ID：12604024
> 
> 赞同：0
> 
> 时间：2012-09-26T14:29:36.670
> 
> 标签：actionscript-3, apache-flex, flex4, flex3

当与 RichEditableText 组件交互时，尤其是当我单击复制时，我收到以下错误消息：

错误 #2191：Clipboard.generalClipboard 对象只能作为用户交互的结果写入，例如通过鼠标单击或按钮按下。

上述错误有时在 mozilla firefox 浏览器中可重现。它在 IE 中运行良好。谁能告诉我如何处理 flex 中的错误。

从谷歌搜索我发现这是一个错误[http://tech.dir.groups.yahoo.com/group/flexcoders/message/159638](http://tech.dir.groups.yahoo.com/group/flexcoders/message/159638)。

# c# - 用于关联、聚合、组合的 C# 代码

> ID：12604031
> 
> 赞同：43
> 
> 时间：2012-09-26T14:29:59.943
> 
> 标签：c#, oop, uml, class-diagram

我试图确认我对关联、聚合和组合的代码的理解。所以这里。

**聚合**：有一个。它*有*另一个类型的现有对象

```
public class Aggregation
{
    SomeUtilityClass objSC
    public void doSomething(SomeUtilityClass obj)
    {
      objSC = obj;
    }
} 
```

**组成**：由另一个对象组成

```
public class Composition
{
    SomeUtilityClass objSC = new SomeUtilityClass();
    public void doSomething()
    {
        objSC.someMethod();
    }
} 
```

**公会**：我对此有两种看法。

1.  当一个类与另一个类关联时。因此，以上两者都是关联的示例。

2.  关联是一种较弱的聚合形式，其中类不保留对其接收的对象的引用。

    ```
    public class Association
    {
        //SomeUtilityClass objSC   /*NO local reference maintained */
        public void doSomething(SomeUtilityClass obj)
        {
           obj.DoSomething();
        }
    } 
    ```

我的理解正确吗？[我在这里](http://www.c-sharpcorner.com/UploadFile/pcurnow/compagg07272007062838AM/compagg.aspx)和[这里](http://www.codeproject.com/Articles/330447/Understanding-Association-Aggregation-and-Composit)读过相互矛盾的文章，所以我真的不确定该看哪一篇。我的理解似乎与第一个链接一致。我觉得第二个链接是错误的，或者也许我没有正确理解它。

你怎么看？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2014-04-18T16:01:42.830

对于两个对象`Foo`，`Bar`我们有：

**依赖：**

```
class Foo
{
    ...
    fooMethod(Bar bar){}
    ...
} 
```

**协会：**

```
class Foo
{
    private Bar bar;
    ...
} 
```

**作文：（**死时`Foo`也是如此`Bar`）

```
class Foo
{
    ...
    private Bar bar = new Bar();
    ...
} 
```

**聚合：（**当`Foo`死亡时，`Bar`可能继续存在）

```
class Foo 
{
    private List<Bar> bars;
} 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-09-26T14:40:45.247

聚合和组合之间的区别非常模糊，AFAIK 与容器被销毁后“子”对象的逻辑存在有关。因此，在聚合的情况下，容器内的对象在容器对象被销毁后仍然可以存在，而在组合设计的情况下，它们也需要被销毁。一些类比：

*   一个`Car`包含四个对象的`Wheel`对象。通常，如果您破坏汽车（通过调用某种方法来清理它），您还应该在此过程中破坏车轮，因为它们存在于汽车之外几乎没有意义（除非您将它们移动到另一个`Car`物体上）。更实际地，包装输入流的读取器对象也会在内部流自身关闭时关闭。这是**作文**。
*   一个`Person`对象包含（拥有）一个`Radio`对象。如果`Person`死了，它`Radio`可能会被另一个人继承，`Person`即它在没有原始所有者的情况下存在是有意义的。更现实地，一个包含对象的列表并不要求在释放列表本身时释放所有对象。这是**聚合**。

**编辑**：阅读您的链接后，我倾向于使用第一个链接，因为它给出的解释类似于我的。

此外，**关联**只是通过对该对象的引用调用另一个对象的方法（发送消息）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-06-17T01:29:07.297

如果继承给了我们`'is-a'`，组合给了我们`'part-of'`，我们可以说聚合给了我们一个`'has-a'`关系。

==> 简而言之，*关联、聚合和组合是表示对象之间关系的术语*。

1.  **关联**：关联意味着一个对象`"uses"`另一个对象。正如您所说：*“关联是一种较弱的聚合形式，其中类不保留对其接收的对象的引用。”*

```
public class Association
{
    //SomeUtilityClass _obj   /*NO local reference maintained */
    public void doSomething(SomeUtilityClass obj)
    {
       obj.DoSomething();
    }
} 
```

2.  **聚合**：

*   聚合是一种特殊类型的关联。
*   聚合是`"has-a"`对象之间的关系`(white diamond)`
*   例如，*Person 'has-a' Address*。

```
public class Address  
{  
 . . .  
}  
public class Person  
{  
     private Address address;  
     public Person(Address address)  
     {  
         this.address = address;  
     }  
     . . .  
} 
```

如您所见，*Person*不管理*Address*的生命周期。如果 Person 被销毁，Address 仍然存在。

[![在此处输入图像描述](../Images/cc7b0925dbd23dbe838e8214a5b5c921.png)](https://i.stack.imgur.com/hadDo.png)

3.  **组成**：

*   组合是一种特殊类型的聚合，它是一种强类型聚合。
*   构图给了我们一种`'part-of'`关系`(dark diamond)`。例如：发动机是汽车的一部分

```
public class Engine  
{  
 . . .   
}  
public class Car  
{  
    Engine e = new Engine();  
    .......  
} 
```

[![在此处输入图像描述](../Images/fd44ff091fbc752d9954c91b197a741d.png)](https://i.stack.imgur.com/46oRw.png)

请选择以下链接以获取未来信息：

*   [https://www.c-sharpcorner.com/UploadFile/ff2f08/association-aggregation-and-composition/](https://www.c-sharpcorner.com/UploadFile/ff2f08/association-aggregation-and-composition/)
*   [https://www.c-sharpcorner.com/article/difference-between-composition-and-aggregation/](https://www.c-sharpcorner.com/article/difference-between-composition-and-aggregation/)

# java - Activiti Engine 流程定义监听器

> ID：12604032
> 
> 赞同：2
> 
> 时间：2012-09-26T14:30:05.763
> 
> 标签：java, bpmn, activiti

我正在 Activiti Engine (5.9) 之上构建一个解决方案。在部署或取消部署新流程定义 (*.bpmn20.xml) 后，我需要立即采取一些措施。

我在 Activiti 论坛（[此处发帖](http://forums.activiti.org/en/viewtopic.php?f=6&t=2316&p=18102)）中找到了一个帖子，其中包含一些指针，例如用于解析新流程 XML 定义的挂钩或围绕引擎数据库表构建一些逻辑。这篇文章已经快一年了；我希望从那时起情况有所改变。

所以，我的问题是双重的：

对于可能有类似要求的人，您是如何解决问题的，您的解决方案的优缺点是什么？

对于 Activiti 项目所有者，路线图是否考虑过这样的功能？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T21:24:42.957

我们遇到了类似的问题，我们需要“破解”引擎。我们希望 Activiti 会创建一个中央总线或通知，但似乎我们需要一些时间才能理解。[我在这里](http://developer4life.blogspot.co.il/2012/02/extending-task-service-in-activiti.html)写了一篇博文，在那里你可以看到我们做了什么。希望它会有所帮助...

# ruby - “100”的未定义方法`-'：字符串

> ID：12604034
> 
> 赞同：7
> 
> 时间：2012-09-26T14:30:08.383
> 
> 标签：ruby, string, floating-point, integer

这个红宝石代码：

```
income = "100"
bills  = "52"

puts income - bills 
```

抛出错误：

```
./to_f.rb:6: undefined method `-' for "100":String (NoMethodError) 
```

Ruby 在对字符串执行数学运算时不会自动将字符串转换为数字吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-26T14:42:42.483

Ruby 是一种[*动态类型*](https://stackoverflow.com/questions/3462405/terminology-what-features-must-a-language-have-for-it-to-be-considered-a-dynami)、[*严格类型*](https://stackoverflow.com/questions/805168/what-is-a-strictly-typed-language)（或“强类型”）的语言。Lua 是另一种这样的语言。前者意味着变量可以包含任何类型的值。后者——你遇到的——意味着类型强制不会自动发生。

将这些与动态类型和*松散类型*的 JavaScript 进行对比。你可以在 JavaScript 中编写`var x = [] + false;`，它会*尝试*做一些有用的事情。再举一个例子，在 JavaScript 中`"1" + 1 == "11"`但是`"1" - 1 == 0`. Ruby 不会做任何这样的事情。

在您的情况下，您需要：

```
puts income.to_i - bills.to_i 
```

* * *

请注意——因为大多数[操作符在 Ruby 中被实现为方法](http://phrogz.net/ProgrammingRuby/language.html#operatorexpressions)——每个类都可以选择操作符如何处理各种类型的操作数。例如：

```
class Person
  def +( something )
    if something.is_a?(Numeric)
      self.weight += something
    elsif something.is_a?(Time)
      self.age += something
    else
      raise "I don't know how to add a #{something.class} to a Person."
    end
  end
end 
```

然而，大多数时候核心库并没有试图变得如此聪明。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-26T14:30:08.383

因为可以使用 + 运算符连接字符串，所以并不总是很清楚是否要附加或求和两个包含数字值的字符串。

如果您有两个包含数字的字符串，请在对它们进行任何数学运算之前将它们转换为适当的值（int 或 float）：

```
income = "100"
bills  = "52"

puts income.to_f - bills.to_f 
```

# c# - c# OleDbDataAdapter; 出现次数？

> ID：12604037
> 
> 赞同：0
> 
> 时间：2012-09-26T14:30:21.877
> 
> 标签：c#, sql, dataset, oledb, oledbdataadapter

我过去做过一些数据库方面的工作，包括 SQL（虽然我不知道它们是哪些变体）；在其中一个中，我确定有一个“occnum”关键字或类似关键字，它允许表中没有唯一字段的行通过索引来寻址？

在我目前的情况下，几年后和完全不同的工作场所，我面临着编写一个允许编辑公司特定 Access 数据库的 C# 应用程序。这个数据库缺少主键，所以我试图找到一个类似的“出现次数”功能来编辑特定的行，但没有找到任何东西。更改数据库结构不是一种选择，并且没有一个字段是唯一的。

例如，我使用 OleDbDataAdapter 来查询一些行，如下所示：

```
 List<string> result = new List<string>();

        DataSet dataSet = new DataSet();
        OleDbDataAdapter oleDBA = new OleDbDataAdapter(new OleDbCommand("SELECT " + FIELDNAME_ITEMDATA_TAG + " FROM " + TABLENAME_ITEMDATA + " WHERE " + FIELDNAME_ITEMDATA_AREANUMBER + " = " + Area.ToString(), oleDbConnection));
        oleDBA.Fill(dataSet, "ResourceString");

        foreach (DataRow dr in dataSet.Tables[0].Rows)
        {
            result.Add(dr.ItemArray[0].ToString());
        } 
```

然后使用字符串列表填充 ListBox。当列表框中的条目被填充时，我希望能够通过它的出现次数来查询单个行，例如：

```
"SELECT " + FIELDNAME_ITEMDATA_TAG + " FROM " + TABLENAME_ITEMDATA + " WHERE " + FIELDNAME_ITEMDATA_AREANUMBER + " = " + Area.ToString(), oleDbConnection AND OCCNUM = " + OccNum 
```

这是可行的吗？我只是没有找到正确的关键字吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T16:03:28.480

`occnum`是 Oracle 数据库功能，无法通过 Access 访问。

也就是说，IIRC，Access 没有任何内置主键的概念（这确实是您想要的）。你将不得不自己添加它。

也就是说，您应该向您的表添加一个主键，然后在例程中选择主键和标签名称（如果您正在生成查询，您可以在所有表​​中将主键命名为相同 -像上面那样飞行），然后在您想要获取更多信息时通过主键查询。

你还应该弄清楚每个表的[自然键](http://en.wikipedia.org/wiki/Natural_key)是什么，并确保你有一个唯一的索引（或者，如果你愿意，你*可以*将该列作为主键，但我建议不要这样做） .

最后，如果您创建一个作为[代理键](http://en.wikipedia.org/wiki/Surrogate_key)的主键，那么您可以将其设为自动递增列，这样您就不必担心在插入新值时生成键。

# java - 编辑器不包含主要类型 - 搞砸了构建路径配置

> ID：12604038
> 
> 赞同：0
> 
> 时间：2012-09-26T14:30:23.183
> 
> 标签：java, eclipse, sql-server-2008

有谁知道任何完整的指南，显示如何从头开始重新配置 Eclipse 中的“构建路径”？在尝试添加 .jar 文件时，我弄乱了当前配置。或者，如果您认为自愿提供 Eclipse 配置屏幕的图片可能会有所帮助，那也将不胜感激！

我希望我不必重新安装 Eclipse。

我不断收到的错误（对于任何类，也包括那些曾经完美运行的类）是：“编辑器不包含主要类型。” （在任何程序启动之前）。

我已经删除了 JRE，但后来我通过右键单击“包资源管理器”的根目录 - 构建路径 - 添加库 - JRE 系统库来放回 JRE。还是一样的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:40:40.553

“构建路径”->“配置构建路径”工具可用于修复其他构建路径修改技术可能导致的许多问题。

打开该工具并查看选项卡，看看是否可以找到导致问题的条目。请特别注意库选项卡。您可能只想删除此选项卡中的所有条目，然后一一重新添加您需要的条目。构建路径问题通常是此选项卡中的损坏条目。

您也可以尝试查看“运行”->“运行配置”工具并删除与项目关联的任何运行配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T18:45:06.390

I didn't have any source folder added in the Build path configuration. I just went to Build Path configuration and added the folder in the "Source" panel. (I had previously deleted it by mistake.) This solved my problem, now my applets and console classes run perfectly like they used to.

[http://zenverse.net/editor-does-not-contain-a-main-type-error-in-eclipse/](http://zenverse.net/editor-does-not-contain-a-main-type-error-in-eclipse/)

# xcode - 将uilabel从一个视图修改为其他 - iphone sdk

> ID：12604041
> 
> 赞同：0
> 
> 时间：2012-09-26T14:30:41.027
> 
> 标签：xcode, label, uilabel, tableview, transition

我有 TableViewController 和 DetailViewController。我想在 DetailViewController 中修改一个名为“label”的标签。

表视图控制器.h：

```
@interface CodexTableView : UIViewController <UITableViewDelegate,     UITableViewDataSource>
{
 NSMutableArray *listOfItems;
    DetailViewController *vc;

}
@property (nonatomic, retain) DetailViewController *vc;
@property (strong, nonatomic) IBOutlet UITableView *myTable;

@end 
```

以及我的 TableViewController.m 的摘录：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

vc.label.text = @"bonjour";

//UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
//NSLog(@"%@",cell.textLabel.text);

DetailViewController *dvController = [[DetailViewController alloc] initWithNibName:@"DetailViewController" bundle:[NSBundle mainBundle]];

dvController.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
[self presentModalViewController:dvController animated:YES];
[dvController release];
dvController = nil; 
```

}

但它不起作用。有人知道错误吗？请帮我。谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T14:36:47.337

您为详细视图控制器混合了两个变量。删除`dvController`一个并且仅适用于您的`vc`财产，如下所示：

```
vc = [[DetailViewController alloc] initWithNibName:@"DetailViewController" bundle:[NSBundle mainBundle]];
[[vc label] setText:@"bonjour"]; 
```

为您的详细视图控制器创建一个属性，`label`并将其指向您的屏幕标签。

# html - HTML/CSS - 导航栏中 li 元素内的图像

> ID：12604053
> 
> 赞同：0
> 
> 时间：2012-09-26T14:31:12.397
> 
> 标签：html, css

我有一个导航栏，在一个黑色的 div 下方，导航栏中的下拉元素在该 div 下方。这不是黑色div的主要功能。它只是用于设计，但效果非常好。你可以在这里看到我在说什么： http: [//www.ecoloc.ro/interior/test/regeneration](http://www.ecoloc.ro/interior/test/regeneration)。现在，我想要做的是，每次悬停导航栏中的主要元素时，都会出现一个足够大以覆盖主要元素的图像以及它下方的黑色 div 的一部分。您可以在我发布的链接中看到我想要图像的那个黑色间隙。这可以做到吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T14:38:06.977

您可以更改`<a>`内部的尺寸`<li>`并为其设置背景图像。如果您不希望主菜单出现，您只需在 ':hover' 上设置 'text-indent: -9999px' （图像替换技术）。

在悬停时设置修改并在 hout 时恢复正常的最佳方法是使用样式创建不同的类。因此，您在悬停时通过 JavaScript 更改类，自动更改尺寸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T14:43:30.190

因为你已经为你的“子菜单”列表使用了绝对定位，你应该可以用一点 CSS 来做到这一点。

为`background-image:`包含所需图形的列表元素提供一个 set `background-repeat: no-repeat`，设置一个绝对值`height:`并将列表重新定位到正确`top:`的`left:`角。使用`margin:`and`padding:`将列表元素放到正确的位置。

- 更新： -

尝试以下快速而肮脏的第一张草图，看看我是否明白了：

```
<ul id="media" style="position: absolute; top: 108px; left: 1018px; height: 35px; background-color: red; padding-left: 131px; padding-top: 35px; ">
        <li><a href="#" title="" data-description="starts here">presa</a></li>
        <li><a href="#" title="" data-description="starts here">video</a></li>
        <li><a href="#" title="" data-description="starts here">foto</a></li>
</ul> 
```

子菜单涵盖您的主菜单条目和黑色子菜单栏。提供准确覆盖所需区域的图像并微调定位。

# sql-server - 查询忽略 WHERE 子句中的过滤

> ID：12604057
> 
> 赞同：3
> 
> 时间：2012-09-26T14:31:27.137
> 
> 标签：sql-server, schema, left-join, where-clause

**我从对Micrsoft SQL Server 2008** (10.0.1600.22 / Service Pack 2)的查询中得到了意外的结果。

这可能是一个错误吗？

我试图创建一个类似的查询来复制问题 - 没有成功。所以我想查询本身没有问题，但其他原因导致了这种有点奇怪的行为。

我希望对可能导致问题的原因提出一些建议。

首先，看一下这个工作示例：

```
DROP TABLE #TempType
DROP TABLE #TempData

SELECT * INTO #TempType FROM (
    SELECT 1 AS Id, 10 AS TempDataFK, 'Do' AS Name, 'CODE1' AS Type   UNION
    SELECT 2 AS Id, 10 AS TempDataFK, 'Re' AS Name, 'CODE2' AS Type   UNION
    SELECT 3 AS Id, 20 AS TempDataFK, 'Mi' AS Name, 'CODE2' AS Type   UNION
    SELECT 5 AS Id, 10 AS TempDataFK, 'Fa' AS Name, 'CODE3' AS Type   UNION
    SELECT 6 AS Id, 20 AS TempDataFK, 'So' AS Name, 'CODE4' AS Type
) sub

SELECT * INTO #TempData FROM (
    SELECT 10 AS Id, 150 AS Number   UNION
    SELECT 20 AS Id, 150 AS Number   UNION
    SELECT 30 AS Id, 150 AS Number   UNION
    SELECT 40 AS Id, 180 AS Number
) sub

SELECT C1.Name Name1,
       C2.Name Name2,
       C3.Name Name3,
       C4.Name Name4,
       #TempData.Id,
       #TempData.Number
FROM #TempData
    LEFT JOIN #TempType C1 (NOLOCK)
        ON #TempData.Id = C1.TempDataFK 
        AND C1.Type = 'CODE1'
    LEFT JOIN #TempType C2 (NOLOCK)
        ON #TempData.Id = C2.TempDataFK 
        AND C2.Type = 'CODE2'
    LEFT JOIN #TempType C3 (NOLOCK)
        ON #TempData.Id = C3.TempDataFK 
        AND C3.Type = 'CODE3'
    LEFT JOIN #TempType C4 (NOLOCK)
        ON #TempData.Id = C4.TempDataFK 
        AND C4.Type = 'CODE4'
WHERE 1=1
    AND (#TempData.Number = 150)
    AND (C1.Name='Mi' OR C2.Name='Mi' OR C3.Name='Mi' OR C4.Name='Mi') 
```

如您所见，我将表格左加入`TempType`四次`TempData`。每次都给它一个不同的别名。然后，我按某个数字 (150) 进行过滤，并希望至少有一个名称应该是“Mi”。

结果如预期：

```
--------------------------------------------
Name1   Name2   Name3   Name4   Id   Number
NULL    Mi      NULL    So      20   150
-------------------------------------------- 
```

不过，如果我对我的客户数据库运行类似的查询，我会得到：

```
--------------------------------------------
Name1   Name2   Name3   Name4   Id   Number
Do      Re      Fa      NULL    10   150
NULL    Mi      NULL    So      20   150
NULL    NULL    NULL    NULL    30   150
-------------------------------------------- 
```

就好像`(C1.Name='Mi' OR C2.Name='Mi' OR C3.Name='Mi' OR C4.Name='Mi')`过滤中没有使用类似的部分。

**不同的查询，但相同的结构**
在客户端数据库上，表不是临时的，它们已经包含数据。这些表还有其他各种字段，但我仍然只剩下一个加入另一个表。所以和上面的结构一样。

**无法在新数据库**
中复制我试图通过创建一个仅受影响的表和字段的新数据库来复制问题 - 复制问题没有成功。

**Schemas**
值得一提的是客户端数据库包含几个模式。类似于 TempData 和 TempType 的两个表都属于同一个模式（不是 dbo）。此外，类似于 TempType.Type 的字段是另一个模式中另一个表的外键，但由于我们没有加入，我认为它不相关？

**另一个特点**
如果我把 C1.Name 等作为我的 SELECT 的一部分，像这样：

```
SELECT C1.Name Name1,
       C2.Name Name2,
       C3.Name Name3,
       C4.Name Name4,
       #TempData.Id,
       #TempData.Number,
       CASE WHEN (C1.Name = 'Mi' AND C1.Name IS NOT NULL) THEN 1 ELSE 0 END,
       CASE WHEN (C2.Name = 'Mi' AND C2.Name IS NOT NULL) THEN 1 ELSE 0 END,
       CASE WHEN (C3.Name = 'Mi' AND C3.Name IS NOT NULL) THEN 1 ELSE 0 END,
       CASE WHEN (C4.Name = 'Mi' AND C4.Name IS NOT NULL) THEN 1 ELSE 0 END 
```

我得到了针对我的客户数据库的预期结果（只有一行）：

```
Name1   Name2   Name3   Name4   Id   Number   (No column name)   (No column name)   (No column name)   (No column name)
NULL    Mi      NULL    So      20   150        0                  1                  0                  0 
```

*有什么建议可能导致这种情况吗？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T21:36:40.293

请确保`ansi_null`本地数据库设置和客户端的设置相同。像“name is not null”这样的样式将返回所需的结果，而不像依赖于 ansi_null 设置的“name =/<> null”。

检查 ansi_null： http: [//msdn.microsoft.com/en-us/library/ms188048 (v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms188048(v=sql.105).aspx)

# asp.net - asp.net 项目中的 3 层架构

> ID：12604059
> 
> 赞同：0
> 
> 时间：2012-09-26T14:31:28.630
> 
> 标签：asp.net, asp.net-mvc, design-patterns

我有一个 asp.net 项目，我在根目录下创建了三个文件夹。文件夹名称为：“UI”、“Logical”和“DataAccess”。对应的代码被分成不同的文件夹。例如，UI 文件夹只包含演示文稿，DataAccess 包含如何从数据库中检索数据集。

我们可以说它是一个三系架构吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T14:41:09.923

对我来说，对图层进行物理分离很重要。

所以为逻辑创建库

所以为 DataAccess 创建库

和 UI 演示项目。

注意：

这允许简化您的图层，而无需使用您所有的复合材料。

如果您只想重新使用您的 Logical ，您可以只引用您的图层。

您创建了低耦合，它可以减少应用程序中错误的影响

...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T14:42:37.960

请参考以下链接，它可能对您有所帮助

[http://www.codeproject.com/Articles/36847/Three-Layer-Architecture-in-C-NET](http://www.codeproject.com/Articles/36847/Three-Layer-Architecture-in-C-NET)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T15:13:57.037

我发现这本书帮助我正确地组织了我的图层：

[http://www.amazon.co.uk/Microsoft-NET-Architecting-Applications-PRO-Developer/dp/073562609X/ref=sr_1_1?s=books&ie=UTF8&qid=1348672396&sr=1-1](http://www.amazon.co.uk/Microsoft-NET-Architecting-Applications-PRO-Developer/dp/073562609X/ref=sr_1_1?s=books&ie=UTF8&qid=1348672396&sr=1-1)

# html - HTML + CSS：在图标后缩进一段

> ID：12604060
> 
> 赞同：3
> 
> 时间：2012-09-26T14:31:29.377
> 
> 标签：html, css, icons, indentation, paragraph

适合所有网页设计师的...

我想显示一个字符并在其后缩进一个段落 - 就像这里的图表一样：

[http://dl.dropbox.com/u/43015072/indent.jpg](http://dl.dropbox.com/u/43015072/indent.jpg)

诀窍是，我想这样做没有：

*   使用表格
*   指定 div 高度

使用图标字体 (@font-face) 将单个字符呈现为图标。有人对如何仅使用 HTML + CSS 进行此操作有任何建议吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-26T14:41:38.943

我提出了这个：

```
p {
    padding-left:20px; /* adjust it to your custom font needings */
    position:relative;
}
p:before {
    content: "x";
    font-family:Arial; /* add your custom font here */
    position:absolute;
    left:5px; /* adjust it to your custom font needings */
} 
```

[现场演示](http://jsfiddle.net/gionaf/283XX/)

* * *

如果您确实需要边框，请将文本包装在一个跨度中：

```
<p><span>Lorem ipsum dolor sit amet...</span></p>​ 
```

并添加此规则：

```
p {
    /* same as before */
    border:1px solid red;
}
p span {
    display:block;
    border-left:1px solid red;
    padding-left:5px; /* or whatever you want */
} 
```

[现场演示](http://jsfiddle.net/gionaf/NCEQq/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T14:48:31.077

```
 <style type="text/css">
    #con{margin:0 auto; width:700px;}
    #left{height:auto;float:left; width:100px;}
    #right{height:auto; float:right;  width:600px; } 
  </style>
  <div id="con">
    <div id="left"></div>
    <div id="right"></div>
  </div> 
```

# css - 在 ajaxStart 上更改鼠标光标

> ID：12604061
> 
> 赞同：1
> 
> 时间：2012-09-26T14:31:31.190
> 
> 标签：css, jquery

我有以下脚本可以很好地工作：

```
$("#spanLoading").ajaxStart(function () {
    $('#spanLoading').empty().append("<img src='/img/loading.gif' />");
});

$("#spanLoading").ajaxComplete(function () {
    $('#spanLoading').empty();
}); 
```

是否可以稍微改变这些，所以不是在 上加载图像`ajaxStart`，而是鼠标光标改为 css 光标`wait`，然后在`ajaxComplete`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T14:35:28.723

是的，您可以通过更改元素的`cursor`属性来做到这一点：`body`

```
$("#spanLoading").ajaxStart(function () {
    $('body').css('cursor', 'wait');
});

$("#spanLoading").ajaxComplete(function () {
    $('body').css('cursor', 'auto');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T14:35:38.017

是的：

```
$('html').css('cursor', 'wait'); 
```

在`ajaxComplete`你把它改回来。

# javascript - 为什么 Array.indexOf 找不到外观相同的对象

> ID：12604062
> 
> 赞同：52
> 
> 时间：2012-09-26T14:31:32.677
> 
> 标签：javascript, arrays, search, object, indexof

我有对象数组。

像这样的东西：

```
var arr = new Array(
  {x:1, y:2},
  {x:3, y:4}
); 
```

当我尝试：

```
arr.indexOf({x:1, y:2}); 
```

它返回`-1`。

如果我有字符串或数字或其他类型的元素但对象，那么`indexOf()`工作正常。

有谁知道为什么以及我应该怎么做来搜索数组中的对象元素？

当然，我的意思是除了为对象创建字符串哈希键并将其提供给数组之外的方法......

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-09-26T14:33:43.343

> indexOf 使用严格相等将 searchElement 与 Array 的元素进行比较（与 === 或三等号运算符使用的方法相同）。

您不能使用它`===`来检查对象的相等性。

正如[@RobG](https://stackoverflow.com/questions/12604062/javascript-array-indexof-doesnt-search-objects/12604120#comment16989045_12604062)指出的那样

> 请注意，根据定义，两个对象永远不会相等，即使它们具有完全相同的属性名称和值。`objectA === objectB`当且仅当 objectA 和 objectB 引用同一个对象。

您可以简单地编写一个自定义 indexOf 函数来检查对象。

```
function myIndexOf(o) {    
    for (var i = 0; i < arr.length; i++) {
        if (arr[i].x == o.x && arr[i].y == o.y) {
            return i;
        }
    }
    return -1;
} 
```

**演示：http:** [//jsfiddle.net/zQtML/](http://jsfiddle.net/zQtML/)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2018-07-24T08:48:06.890

由于没有人提到内置函数 Array.prototype.findIndex()，我想提一下它完全符合作者的需要。

> findIndex() 方法返回数组中满足提供的测试函数的第一个元素的索引。否则返回 -1。

```
var array1 = [5, 12, 8, 130, 44];

function findFirstLargeNumber(element) {
  return element > 13;
}

console.log(array1.findIndex(findFirstLargeNumber));
// expected output: 3 
```

在您的情况下，它将是：

```
arr.findIndex(function(element) {
 return element.x == 1 && element.y == 2;
}); 
```

或者使用 ES6

```
arr.findIndex( element => element.x == 1 && element.y == 2 ); 
```

有关上述示例的更多信息：[https ://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/findIndex](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/findIndex)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-09-26T14:43:24.107

如前所述，两个对象永远不会相等，但如果它们指向同一个对象，则引用可以相等，因此要使代码执行您想要的操作：

```
var a = {x:1, y:2};
var b = {x:3, y:4};
var arr = [a, b];

alert(arr.indexOf(a)); // 0 
```

### 编辑

这是一个更通用的*specialIndexOf*函数。请注意，它期望对象的值是原始的，否则需要更严格。

```
function specialIndexOf(arr, value) {
  var a;
  for (var i=0, iLen=arr.length; i<iLen; i++) {
    a = arr[i];

    if (a === value) return i;

    if (typeof a == 'object') {
      if (compareObj(arr[i], value)) {
        return i;
      }
    } else {
      // deal with other types
    }
  }
  return -1;

  // Extremely simple function, expects the values of all 
  // enumerable properties of both objects to be primitives.
  function compareObj(o1, o2, cease) {
    var p;

    if (typeof o1 == 'object' && typeof o2 == 'object') {

      for (p in o1) {
        if (o1[p] != o2[p]) return false; 
      }

      if (cease !== true) {
        compareObj(o2, o1, true);
      }

      return true;
    }
  }
}

var a = new String('fred');
var b = new String('fred');

var arr = [0,1,a];

alert(specialIndexOf(arr, b)); // 2 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2015-08-01T03:08:42.767

这无需自定义代码即可工作

```
var arr, a, found;
arr = [{x: 1, y: 2}];
a = {x: 1, y: 2};
found = JSON.stringify(arr).indexOf(JSON.stringify(a)) > - 1;
// found === true 
```

> 注意：这并没有给出实际的索引，它只告诉你的对象是否存在于当前数据结构中

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-09-26T14:36:44.920

这些对象不相等。

您必须实现自己的功能。

例如，您可以这样做：

```
var index = -1;
arr.forEach(function(v, i) {
   if (this.x==v.x && this.y==v.y) index=i;
}, searched); 
```

`searched`您的对象之一在哪里（或不是）。

*（我会用一个简单的循环来实现它，但用 foreach 更漂亮）*

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-10-07T20:57:35.943

因为两个独立的对象`===`彼此不相干，并且`indexOf`使用`===`. （他们也不`==`是彼此。）

例子：

```
var a = {x:1, y:2};
var b = {x:1, y:2};
console.log(a === b);
```

`===`并`==`测试它们的操作数是否引用**相同的对象**，而不是它们是否引用*等效*对象（具有相同原型和属性的对象）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-06-25T20:24:17.573

这是另一种解决方案，您将比较函数作为参数传递：

```
function indexOf(array, val, from, compare) {

  if (!compare) {
    if (from instanceof Function) {
      compare = from;
      from = 0;
    }
    else return array.__origIndexOf(val, from);
  }

  if (!from) from = 0;

  for (var i=from ; i < array.length ; i++) {
    if (compare(array[i], val))
      return i;
  }
  return -1;
}

// Save original indexOf to keep the original behaviour
Array.prototype.__origIndexOf = Array.prototype.indexOf;

// Redefine the Array.indexOf to support a compare function.
Array.prototype.indexOf = function(val, from, compare) {
  return indexOf(this, val, from, compare);
} 
```

然后，您可以通过以下方式使用它：

```
indexOf(arr, {x:1, y:2}, function (a,b) {
 return a.x == b.x && a.y == b.y;
});

arr.indexOf({x:1, y:2}, function (a,b) {
 return a.x == b.x && a.y == b.y;
});

arr.indexOf({x:1, y:2}, 1, function (a,b) {
 return a.x == b.x && a.y == b.y;
}); 
```

好消息是，如果没有传递比较函数，它仍然会调用原始 indexOf。

```
[1,2,3,4].indexOf(3); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-05-25T18:45:18.433

看起来您对这种类型的答案不感兴趣，但对于其他感兴趣的人来说，这是最简单的：

```
var arr = new Array(
    {x:1, y:2},
    {x:3, y:4}
);

arr.map(function(obj) {
    return objStr(obj);
}).indexOf(objStr({x:1, y:2}));

function objStr(obj) {
    return "(" + obj.x + ", " + obj.y + ")"
} 
```

# css - 如何创建 CSS 下拉菜单

> ID：12604065
> 
> 赞同：-3
> 
> 时间：2012-09-26T14:31:33.830
> 
> 标签：css, drop-down-menu

我想为我的博主博客创建一个 CSS 下拉菜单。但是我遇到了很多困难，因为我不是 CSS 专业人士，而且我的博客模板不是我设计的。我尝试了很多东西，但对我没有任何效果。我给你代码，请找出其中的错误。谢谢...

我的导航链接的 HTML 结构：

```
<div id='mainmenu'>
<ul>

<li class='first current_page_item'><a expr:href='data:blog.homepageUrl' title='Home'>Home</a></li>
<li><a href='http://www.technodoze.com/search/label/Physics' title='Amazing Articles about Physics'>Physics</a></li>

<li><a href='http://www.technodoze.com/search/label/Amazing' title='Amazing'>Amazing Stuff</a> 
```

问题所在的下拉元素的代码：

```
 <ul>
    <li><a href='http://www.technodoze.com/search/label/Amazing' title='Amazing'>Amazing Stuff</a></li>
    <li><a href='http://www.technodoze.com/2011/09/write-for-us.html' title='Write For Us'>Write For Us</a></li>        
  </ul> 
```

从这里开始是正常的代码：

```
</li>

<li><a href='http://www.technodoze.com/search/label/Videos' title='Videos'>Videos</a></li>

<li><a href='http://www.technodoze.com/search/label/Downloads' title='Free Downloads'>Download</a></li>
<li><a href='http://www.technodoze.com/search/label/Biggest%20In%20The%20World' title='SG Biggest'>Biggest In The World</a></li>
<li><a href='http://www.technodoze.com/2010/01/author-of-blog.html' title='About Me'>About Me</a></li>

</ul>
</div> 
```

请参阅应用此导航链接的 URL： [www.technodoze.com](http://www.technodoze.com)

现在我的CSS：

```
#mainmenu a {
text-decoration:none;
display:block;
margin:0;
float:left;
background: none;
padding: 9px 15px;
text-transform:uppercase;
color: #CCCCCC;
font-size: 11px;
}

#mainmenu li a:hover,
#mainmenu li a:focus,
#mainmenu a.mainMenuParentBtnFocused{

/*background-color: #1e1e1e;*/
background: url(http://1.bp.blogspot.com/_lxBSX0YJV58/SwQlF623qJI/AAAAAAAAAlc/h7AiX8sx00g/s1600/mainnav-hover.gif) repeat-x left top #666666;
color:#fff;
}

#mainmenu , #mainmenu ul {
padding: 0;
margin: 0;
list-style: none;
line-height: 1em;
}
#mainmenu ul {
/*border around submenu goes here*/  
background: none;
left:0;
}

#mainmenu li {
/*great place to use a background image as a divider*/
background-image:url(http://3.bp.blogspot.com/_lxBSX0YJV58/SwQlNUijg3I/AAAAAAAAAlk/6U-xiY6v8Jo/s1600/mainnav-sep.gif);
background-repeat:no-repeat;
background-position: 100% 0px;
cursor: pointer;
float: left;
margin: 0 0px 0 0px;
padding: 0 2px 0 1px;
height: 30px;
display: inline;

}
#mainmenu {
overflow: hidden;
font-size: 12px;
float: left;
width: 738px;
display: inline;
height: 30px;
} 
```

到这里为止一切都很好......（上面的 CSS 代码仅用于#mainmenu ul li，实际上它运行良好。）

问题从这里开始...

```
#mainmenu li ul {
display: none;
margin:0;
padding 0;
position:absolute;
left:0;

}

#mainmenu li:hover > ul {
display: block;
float:none;
position:absolute;
}

#mainmenu li:hover ul li {
display: block;
}
#mainmenu li ul li {
list-style-type: none;
margin:0;
display: block;
padding:0;
} 
```

我尝试创建一个下拉菜单，但子元素 [#mainmenu ul li ul] 不是下拉形式，而是嵌入在侧面。. （这目前在网站上应用，您可以通过访问 www.technodoze.com 并将鼠标悬停在 Amazing Stuff 导航链接上查看它。）

我确信罕见的错误出现在最后一段 CSS 代码中，但我向您展示了整个场景，以防由于 #mainmenu ul 或任何其他上层元素的浮动而出现此问题......

我会感谢帮助我的人...

谢谢

**更新时间：9 月 27 日，格林威治标准时间 11:00，原因：还有一个问题**

我现在已将代码更改为：

```
#mainmenu {
overflow: hidden;
font-size: 12px;
float: left;
width: 738px;
display: inline;
height: 30px;
}

#mainmenu ul li ul li a {
background-color:#333333;

}

#mainmenu ul li ul .first_li {

-moz-border-top-left-radius: 7px;
-khtml-border-top-left-radius: 7px;
-webkit-border-top-left-radius: 7px;
border-top-left-radius: 7px;

-moz-border-top-right-radius: 7px;
-khtml-border-top-right-radius: 7px;
-webkit-border-top-right-radius: 7px;
border-top-right-radius: 7px;
}
#mainmenu ul li ul .last_li {

-moz-border-bottom-left-radius: 7px;
-khtml-border-bottom-left-radius: 7px;
-webkit-border-bottom-left-radius: 7px;
border-bottom-left-radius: 7px;

-moz-border-bottom-right-radius: 7px;
-khtml-border-bottom-right-radius: 7px;
-webkit-border-bottom-right-radius: 7px;
border-bottom-right-radius: 7px;
}

#mainmenu ul li ul {
-moz-box-shadow: 4px 4px 2px #888;
-webkit-box-shadow: 4px 4px 2px #888;
box-shadow: 4px 4px 2px #888;
-khtml-box-shadow: 4px 4px 2px #888;
border-color: #F1F1F1;
-moz-outline-color: #F1F1F1;

}

#mainmenu a {
text-decoration:none;
display:block;
}

#mainmenu a {
margin:0;
float:left;
background: none;
padding: 9px 15px;
text-transform:uppercase;
color: #CCCCCC;
font-size: 11px;
}

#mainmenu li a:hover, #mainmenu li a:hover ul li,
#mainmenu li a:focus, #mainmenu li a:focus ul li, #mainmenu li:hover > a,
#mainmenu a.mainMenuParentBtnFocused{

/*background-color: #1e1e1e;*/
background: url(http://1.bp.blogspot.com/_lxBSX0YJV58/SwQlF623qJI/AAAAAAAAAlc/h7AiX8sx00g/s1600/mainnav-hover.gif) repeat-x left top #666666;
color:#fff;
}

#mainmenu , #mainmenu > ul {
padding: 0;
margin: 0;
list-style: none;
line-height: 1em;
}
#mainmenu ul {
/*border around submenu goes here*/  
background: none;
left:0;
}

#mainmenu > li {
/*great place to use a background image as a divider*/
background-image:url(http://3.bp.blogspot.com/_lxBSX0YJV58/SwQlNUijg3I/AAAAAAAAAlk/6U-xiY6v8Jo/s1600/mainnav-sep.gif);
background-repeat:no-repeat;
background-position: 100% 0px;
cursor: pointer;
float: left;
margin: 0 0px 0 0px;
padding: 0 2px 0 1px;
height: 30px;
display: inline;

}
#mainmenu li ul {
  display: none;

  margin:0;
  padding 0;
  position:absolute;
  left:0;

}

#mainmenu li:hover > ul {
  display: block;
  float:none;
  position:absolute;
  top:159px;
  left:235px;
}

#mainmenu li:hover ul li {
display: block;
}
#mainmenu li ul li {
  list-style-type: none;
  margin:0;
  display: block;
  padding:0;
} 
```

现在剩下的唯一问题是我在二阶 li 中得到空格，地址为 [#mainmenu ul li ul li]

您可以通过此链接查看[www.technodoze.com](http://www.technodoze.com)

请提出一些解决方案。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:48:23.913

改变 ：

```
#mainmenu li {
/*great place to use a background image as a divider*/
background-image:url(http://3.bp.blogspot.com/_lxBSX0YJV58/SwQlNUijg3I/AAAAAAAAAlk/6U-xiY6v8Jo/s1600/mainnav-sep.gif);
background-repeat:no-repeat;
background-position: 100% 0px;
cursor: pointer;
float: left;
margin: 0 0px 0 0px;
padding: 0 2px 0 1px;
height: 30px;
display: inline;
} 
```

到：

```
 #mainmenu > li {
    /*great place to use a background image as a divider*/
    background-image:url(http://3.bp.blogspot.com/_lxBSX0YJV58/SwQlNUijg3I/AAAAAAAAAlk/6U-xiY6v8Jo/s1600/mainnav-sep.gif);
    background-repeat:no-repeat;
    background-position: 100% 0px;
    cursor: pointer;
    float: left;
    margin: 0 0px 0 0px;
    padding: 0 2px 0 1px;
    height: 30px;
    display: inline;
    } 
```

并添加一些新的东西：

```
#mainmenu li:hover > ul {
display: block;
float:none;
position:absolute;
    top:30px;   /*new line*/
    left:140px; /*new line*/
} 
```

[**演示**](http://jsfiddle.net/JZ6bc/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T14:51:01.713

试试这个下拉菜单[http://www.lwis.net/free-css-drop-down-menu/](http://www.lwis.net/free-css-drop-down-menu/)

# php - 在运行时挂钩到 PHPUnit 的整体测试状态

> ID：12604067
> 
> 赞同：5
> 
> 时间：2012-09-26T14:31:38.093
> 
> 标签：php, unit-testing, phpunit

我有一个 PHPUnit 引导文件，它创建一个用于与数据库相关的单元测试的测试数据库，并注册一个关闭函数以在测试完成后销毁数据库。每次运行都有一个新的数据库！

问题：当测试失败时，我想保留数据库以进行调试。目前，我必须手动禁用我的`register_shutdown_function()`通话，然后重新运行测试。

**如果我可以访问 PHPUnit 运行的最终成功/失败状态，我可以根据 PHPUnit 引导文件中的开关动态触发数据库销毁过程。**

PHPUnit 将此信息存储在某处以触发正确的结果事件，即输出`OK`与`FAILURES!`. 但是，据我发现，此信息不会暴露给用户级引导文件。有人做过这样的事吗？

如果您想探索，这里是您从命令行运行 PHPUnit 时出现的 PHPUnit 堆栈跟踪...

```
PHP   1\. {main}() /usr/bin/phpunit:0
PHP   2\. PHPUnit_TextUI_Command::main() /usr/bin/phpunit:46
PHP   3\. PHPUnit_TextUI_Command->run() /usr/share/php/PHPUnit/TextUI/Command.php:130
PHP   4\. PHPUnit_TextUI_Command->handleArguments() /usr/share/php/PHPUnit/TextUI/Command.php:139
PHP   5\. PHPUnit_TextUI_Command->handleBootstrap() /usr/share/php/PHPUnit/TextUI/Command.php:620
PHP   6\. PHPUnit_Util_Fileloader::checkAndLoad() /usr/share/php/PHPUnit/TextUI/Command.php:867
PHP   7\. PHPUnit_Util_Fileloader::load() /usr/share/php/PHPUnit/Util/Fileloader.php:79
PHP   8\. include_once() /usr/share/php/PHPUnit/Util/Fileloader.php:95
PHP   9\. [YOUR PHPUNIT BOOTSTRAP RUNS HERE] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T02:37:16.580

为了访问 PHPUnit 测试用例的状态，我通常建议使用：

请参阅文档：[`PHPUnit_Framework_TestListener`](https://phpunit.de/manual/current/en/extending-phpunit.html#extending-phpunit.examples.SimpleTestListener.php)以及[如何将其添加到 xml 配置](https://phpunit.de/manual/current/en/appendixes.configuration.html#appendixes.configuration.test-listeners)中。

一个小样本：

### 用这个扩展 XML 文件

```
<listeners>
 <listener class="DbSetupListener" file="/optional/path/to/DbSetupListener.php"/>
</listeners> 
```

### 示例侦听器

```
<?php
class DbSetupListener implements PHPUnit_Framework_TestListener {
    private $setupHappend = false;

    public function addError(PHPUnit_Framework_Test $test, Exception $e, $time) {
        $this->error = true;
    }

    public function addFailure(PHPUnit_Framework_Test $test, PHPUnit_Framework_AssertionFailedError $e, $time) {
        $this->error = true;
    }

    public function addIncompleteTest(PHPUnit_Framework_Test $test, Exception $e, $time) { }
    public function addSkippedTest(PHPUnit_Framework_Test $test, Exception $e, $time) { }
    public function startTest(PHPUnit_Framework_Test $test) { }
    public function endTest(PHPUnit_Framework_Test $test, $time) { }

    public function startTestSuite(PHPUnit_Framework_TestSuite $suite)
    {
        if(!$this->setupHappend) { 
            $this->setupDatabase();
            $this->setupHappend = true;
        }
    }

    public function endTestSuite(PHPUnit_Framework_TestSuite $suite) {
        // If you have multiple test suites this is the wrong place to do anything
    }

    public function __destruct() {
        if($this->error) {
            // Something bad happend. Debug dump or whatever
        } else {
            // Teardown
        }
    }

} 
```

这应该让你很容易。如果您只需要“听”特定的`tests`，`testsuites`那么您可以使用`startTest`and的参数`startTestSuite`。

这两个对象都有一个`getName()`方法，分别为您提供测试套件和测试用例的名称。

# core-data - 基于多个实体的核心数据谓词

> ID：12604070
> 
> 赞同：0
> 
> 时间：2012-09-26T14:31:45.410
> 
> 标签：core-data, join

通常，如果您在 Core Data 中有一对多的关系，我知道您应该将其设置为数据模型中的关系。在这种情况下，由于数据的来源和管理，很难做到。

我试图从本质上完成一个连接。

我想获取一个实体 A，它符合 A 的某些标准，但也符合 B.code 的标准和另一个属性。

选择语句将是

```
select attributeFromA from A, B where A.code = B.code and B.attrib="foo" 
```

有没有一种合理的方法可以在不在核心数据中创建关系的情况下实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T17:33:58.200

我只找到了两个解决方案，都不是很好。根据我的阅读，Core Data 不支持对多个实体的查询，除非它们之间存在关系。

1.  无论如何添加关系。这可能特别糟糕，因为数据来自服务器。从服务器单独更新每个表时，无法轻松维护关系。需要在数据更改时重新创建关系。

2.  在 Core Data 之外手动执行连接。在上述情况下，目的是获取匹配的对象标识符（“代码”）集。一种方法是执行单独的查询，然后获取交集。将每个查询设置为仅检索“代码”，而不是托管对象。

# r - 将 ggplot 绘图图拆分为 3 帧

> ID：12604072
> 
> 赞同：3
> 
> 时间：2012-09-26T14:31:46.410
> 
> 标签：r, split, ggplot2

是否可以提取 ggplot 图形/地图的特定部分并将它们并排放置在辅助图形中，但仍向三个帧添加点，就好像它们仍然是一个图一样，即用于以下地图

![在此处输入图像描述](../Images/54a2963105de68311b1dc18b74856893.png)

创建一个分成 3 个部分的地图，然后可以将其作为一个图形进行操作（即同时向图形的所有三个部分添加点？

![在此处输入图像描述](../Images/b67cf6da6d6d749bb83c0972594086ac.png)

更新：可重现的例子

```
set.seed(1)
dfx<-c(sample(1:1000,100),sample(2000:3000,100),sample(4000:3000,100))
dfy<-c(sample(1:1000,100),sample(2000:3000,100),sample(4000:3000,100))

p<-ggplot()+
coord_fixed()+
geom_point(aes(x=dfx,y=dfy))
p 
```

![在此处输入图像描述](../Images/d20ae457afa06762b4110258a1a63ead.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T15:24:03.057

我可以中途到达那里，但不能保留`coord_equal`或`coord_fixed`同时允许自由秤的效果……希望其他人可以介入并完成剩下的工作。（这以前出现过——[等轴散点图](https://stackoverflow.com/questions/3564044/scatterplot-with-equal-axes)——但我还没有看到解决方案。）

```
dd <- data.frame(dfx,dfy)
dd2 <- transform(dd,panel=cut(dfx,seq(0,4000,by=1000),labels=1:4))
p <- ggplot(dd2)+geom_point(aes(dfx,dfy)) + coord_equal()
p + facet_wrap(~panel,nrow=1,scale="free") 
```

# jquery - 将跨度附加到上一个

> ID：12604074
> 
> 赞同：1
> 
> 时间：2012-09-26T14:31:47.423
> 
> 标签：jquery

我有一个小问题。

```
<li>
    <a></a>
    <span>Description 1</span>
</li>

<li>
    <a></a>
    <span>Description 2</span>
</li> 
```

我想在不使用类或内容的情况下将跨度附加到 prev a。你能帮助我吗？

我尝试过这样的事情，但随后我将跨度复制到每个`<a>`标签中：

```
$('li span').appendTo($('li span').prev()); 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:38:32.737

这是你想要完成的吗？

```
$('li span').each(function(){
    $(this).appendTo( $(this).prev() );
}); 
```

[http://jsfiddle.net/rRsdz/](http://jsfiddle.net/rRsdz/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T14:38:47.557

你可以这样做，

```
​$("li a").append(function(){
   return $(this).next(); 
});​​​​​ 
```

[http://api.jquery.com/append/](http://api.jquery.com/append/)

[http://jsfiddle.net/JH8pg/](http://jsfiddle.net/JH8pg/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T14:40:06.227

试试这个：

```
​$('li').each(function(i, li) {
   $(li).find('a').append($(li).find('span'));
});​​​ 
```

[jsfiddle](http://jsfiddle.net/3RUt3/)。我添加了一些颜色和行为来向您展示它在不查看 dom 的情况下有效

# javascript - 简单的 onclick 不是内联

> ID：12604077
> 
> 赞同：1
> 
> 时间：2012-09-26T14:31:54.260
> 
> 标签：javascript, onclick

我正在使用 interwoven 的 teamsite，我试图弄清楚如何使用一些 javascript，我想做的是一个简单的 onlick 函数，您单击一个 div 并更改另一个 div 的背景颜色。我不想为此使用 jquery。我在这里有一个 jsfiddle [http://jsfiddle.net/yeYZm/1/](http://jsfiddle.net/yeYZm/1/) ，我尝试的脚本是：

```
<script type="text/javascript">
function changeColor (){
btn_div.onClick= changed_div.style.backgroundColor = '#242424';
}
</script> 
```

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:43:53.170

看了涂鸦之后。

```
document.getElementById('btn_div').onclick = function () {
    document.getElementById('changed_div').style.backgroundColor = '#242424';
} 
```

和涂鸦链接[jsfiddle](http://jsfiddle.net/yeYZm/3/)

# css - CSS 相对、绝对定位

> ID：12604080
> 
> 赞同：-4
> 
> 时间：2012-09-26T14:32:00.083
> 
> 标签：css, responsive-design, css-position

我正在尝试为我发布的图片中的布局提出响应式 CSS 代码。基本上，我必须`front picture`在图片库的顶部`<div>`，使用相对和绝对技术，以及灵活的 % 宽度`<divs>`，带导航的徽标应该使用相对绝对技术来实现。
非常感谢你。

这是CSS和HTML代码。有人可以告诉哪个 div 应该是绝对的，哪个是相对的，以实现图像中的布局。非常感谢

```
<body>
    <div id="wrapper">
<header>
<div id="nav">
    <ul>
        <li><a href="default.asp">Home</a></li>
        <li><a href="news.asp">News</a></li>
        <li><a href="contact.asp">Contact</a></li>
        <li><a href="about.asp">About</a></li>
    </ul>
</div>
<div id="logo">
    <h1>Welcome to Origin Cards!</h1>
    <img src="images/Logo.jpg" width="150" height="100"/>
</div>    
</header>
<div id="paragraph">
<p>
    <img src="images/Logo.jpg" />
</p>
</div>
<div id="paragraph2">
    <p>
  It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout.
  The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here,
   content here', making it look like readable English. Many desktop publishing packages and web page editors now use Lorem Ipsum 
   as their default model text, and a search for 'lorem ipsum' will uncover many web sites still in their infancy. Various versions
   have evolved over the years, sometimes by accident, sometimes on purpose (injected humour and the like
   </p>
   </div>
<footer>
<ul>
    <li><a href="default.asp">Home</a></li>
    <li><a href="news.asp">News</a></li>
    <li><a href="contact.asp">Contact</a></li>
    <li><a href="about.asp">About</a></li>
</ul>
 </footer>
</div>

</body>
</html> 
```

和 CSS：

```
body {
font-size: 1em;
border: solid red;
width: 80%; 
margin: 0 auto;
border-radius: 6px; 
list-style: none;   
}

#wrapper{
width: 100%;
background: yellow; 
position: relative;
}

#logo {
float: right;
}

#nav {
list-style: none;
}

#nav li {
float: left;
list-style: none;
}

#nav li a {
display: block;
padding: 8px 15px;
text-decoration: none;
font-weight: bold;
color: #069;
}

#nav li a:hover {
color: #c00;
background-color: #fff; 
}

#paragraph {
width: 30%;
top: 10%;
left: 20%;
z-index: 1;
position: absolute;
}

#paragraph2 {
width: 80%; 
background: #332211;
top: 20%;
left: 10%;
position: absolute;
}

img {
max-width: 100%;
}

footer {

margin: 0 auto;
width: 100%;
background: #123456;
} 
```

![一世](../Images/3564e8f6411598368284f444768b2d6c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T18:32:11.733

您只需要意识到“相对”设置了两个属性集的基础，1：zIndex 和 2：位置。将“front”设为高 zindex 并相对定位。

用相对的块 div 包装元素，使子元素的宽度通过所述块 div 的宽度计算 - 并且还使用包装器的左/顶部的 parentOffset 定位它们。

```
<div style="position:relative; display: inline; display:block; overflow: hidden; clear: both;">
  <div class=front style="position:absolute;left:XXX %; width: 15%; z-index: 100;"></div>
  <div class=other style="width: 100%; z-index: 10">
    <span />         <!-- ,,,, -->
    <ol><li /></ol>
  </div>
</div> 
```

# excel - 保留空间的空电子表格

> ID：12604083
> 
> 赞同：-2
> 
> 时间：2012-09-26T14:32:12.627
> 
> 标签：excel, filesize

我的用户给了我一个电子表格来研究为什么我们的程序无法导入。

*   我一直在慢慢剖析它，到目前为止，我已经删除了除了一个之外的每一列和标签。
*   我已经选择并删除了所有单元格，并确保没有隐藏单元格。
*   我还检查了没有与选项卡关联的代码。

然而，文件大小仍然是 8 兆！如果我创建一个新选项卡以便删除原始选项卡，它会缩小到几 k。

还有什么东西可以隐藏在标签中以保持该大小？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T16:31:39.350

未经测试！

数据转储到 Excel 中经常会创建具有非常少明显内容的超大（字节）工作簿。

一个原因可能是数据中包含了提取代码（检查**Developer, Visual Basic**）。

更可能对大小产生重大影响的是格式，可以通过**编辑、查找和选择、转到特殊、最后一个单元格**来检测，并观察突出显示的单元格距离最后一个“占用”单元格很远。这可以固定如下：

1.  选择最后一个“占用”行正下方的行。
2.  `Ctrl+Shift+Down`.
3.  `Del`.
4.  节省。

**嵌入对象（检查编辑、查找和选择、选择窗格**）以及评论的内容也可能会增加大小，即使这些没有显示。【这个问题的具体答案。】

链接断开的数据透视表也可能是一个原因。

其他原因可能包括明显空白的“最后一个单元格”确实被占用（例如使用与背景匹配的字体颜色）或其他隐藏对象。

Note that in all cases the file size may not reduce in response to ‘deletions’ until it is saved.

# objective-c - 如何使我的应用程序与 iphone 5 的大屏幕兼容？

> ID：12604084
> 
> 赞同：0
> 
> 时间：2012-09-26T14:32:13.143
> 
> 标签：objective-c, iphone-5

> **可能重复：**
> [如何为 iPhone 5 屏幕分辨率开发或迁移应用程序？](https://stackoverflow.com/questions/12395200/how-to-develop-or-migrate-apps-for-iphone-5-screen-resolution)
> [如何处理 iPhone 5 的屏幕尺寸？](https://stackoverflow.com/questions/12396545/how-to-deal-with-iphone-5-screen-size)

我目前在 App Store 上有我的应用程序，但如果我在 iphone 5 中查看它，它的字母加框并且顶部和底部都有黑色区域。我想在不做太多工作的情况下利用全屏。那么谁能解释一下最好的方法是什么？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T14:35:53.640

添加 -568h 启动图像。

将主窗口框架设置为应用程序委托中的 UIScreen mainScreen 边界。

如果您的代码中的所有其他内容都根据您的视图大小自行调整，那么应该没有太多其他事情可做。

这在文档和网络上的许多博客文章中都有介绍。谷歌是你的朋友。

# python - 饼图中的matplotlib mouseclick事件

> ID：12604087
> 
> 赞同：0
> 
> 时间：2012-09-26T14:32:17.303
> 
> 标签：python, matplotlib, wxpython, matplotlib-basemap

matplotlib 和 Python 中有没有办法返回在饼图中单击的值/标签。例如，如果用户点击饼图的条形图 A，返回值 A。如果用户点击 B 饼图的条形图 B，则返回值 B。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T15:03:58.217

```
from matplotlib import pyplot as plt
# make a square figure and axes
plt.figure(figsize=(6,6))
ax = plt.axes([0.1, 0.1, 0.8, 0.8])

labels = 'Frogs', 'Hogs', 'Dogs', 'Logs'
fracs = [15,30,45, 10]

explode=(0, 0.05, 0, 0)
p = plt.pie(fracs, explode=explode, labels=labels, autopct='%1.1f%%', shadow=True)
plt.title('Raining Hogs and Dogs', bbox={'facecolor':'0.8', 'pad':5})

w = p[0][0]
plt.show() 

class PieEventHandler:
    def __init__(self,p):
        self.p = p
        self.fig = p[0].figure
        self.ax = p[0].axes
        self.fig.canvas.mpl_connect('button_press_event', self.onpress)

    def onpress(self, event):
        if event.inaxes!=self.ax:
            return

        for w in self.p:
            (hit,_) = w.contains(event)
            if hit:
                print w.get_label()

handler = PieEventHandler(p[0]) 
```

参考：

[matplotlib的imshow中的颜色值？](https://stackoverflow.com/questions/5836560/color-values-in-imshow-for-matplotlib?lq=1)

[http://matplotlib.org/examples/pylab_examples/pie_demo.html](http://matplotlib.org/examples/pylab_examples/pie_demo.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-15T07:48:22.993

:)

```
import matplotlib.pyplot as plt

def main():
    # Make an example pie plot
    fig = plt.figure()
    ax = fig.add_subplot(111)

    labels = ['Apple', 'Mango', 'Orange']
    wedges, plt_labels = ax.pie([20, 40, 60], labels=labels)
    ax.axis('equal')

    make_picker(fig, wedges)
    plt.show()

def make_picker(fig, wedges):

    def onclick(event):
        wedge = event.artist
        label = wedge.get_label()
        print label

# Make wedges selectable
    for wedge in wedges:
        wedge.set_picker(True)

    fig.canvas.mpl_connect('pick_event', onclick)

if __name__ == '__main__':
    main() 
```

# html - 从 SVG 链接到外部样式表时的“安全限制”（嵌入为图像时）

> ID：12604095
> 
> 赞同：5
> 
> 时间：2012-09-26T14:32:41.647
> 
> 标签：html, css, svg

根据这个[答案](https://stackoverflow.com/a/12585887/981208)“出于安全原因，图像必须是独立文件”。也就是说，当使用`img`标签包含 SVG 文件时，它不能引用任何外部样式表。

我想我在尝试使用 CSS 将 SVG 包含为背景图像时遇到了同样的问题。SVG 链接到其他 SVG 文件并在 Firefox 中直接查看它们时显示正常，但在包含为 CSS 背景图像时无法显示链接的内容。

这些“安全原因”是什么？我在哪里可以找到有关它们的更多信息？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T14:41:35.030

考虑一个允许 SVG 图像作为头像的假设论坛。如果允许外部资源，骗子/恶意用户可以上传包含 `<image xlink:href="http://evilhacker.com/myimage.png">` 和（假设他们控制 evilhacker.com）的 SVG 文件，他们可以执行以下任何和所有操作：

*   每当有人查看他们的个人资料时，都会在他们自己的域中收到一个 ping（并记录查看它的人的 IP 地址）
*   可能会根据 IP 地址、请求标头等为不同的人提供不同外观的头像。
*   可能随意更改其头像的外观（即等待论坛管理员批准，然后将其更改为 NSFW）

有关更多详细信息，请参阅[此 Mozilla 错误](https://bugzilla.mozilla.org/show_bug.cgi?id=628747)和[SVG 集成规范](https://svgwg.org/specs/integration/#referencing-modes)。

# ruby-on-rails-3.1 - 使用 Javascript 进行 Rspec 控制器测试

> ID：12604096
> 
> 赞同：20
> 
> 时间：2012-09-26T14:32:48.473
> 
> 标签：ruby-on-rails-3.1, rspec2, rspec-rails

如果控制器仅使用 javascript 响应，如何在 Rspec 中测试控制器？例如，这将是我的实际代码：

一些view.html.erb

```
link_to 'More Chips', add_chips_path, :remote => true 
```

芯片控制器

```
def add_chips
  Chips.create(:color => :red)
  @chips = Chips.all
end 
```

add_chips.js.erb

```
$('#chip_count').html('<%=j render("chips/list", :chips => @chips) %>'); 
```

Rspec 测试

规格/控制器/chips_controller_spec

```
it "should add chips" do 
  post :add_chips, :format => 'js'
end 
```

当我尝试使用 RSpec 发布到此内容时，我收到 Missing Template 错误，因为它正在发送 HTML 请求但没有 HTML 视图。我试过传递一种格式，但这似乎不起作用。我知道我可以放入一个“虚拟”html 视图以使其通过，但这似乎是一个 hack。

谢谢

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-03-17T10:32:08.290

如果您尝试从控制器规范执行 Ajax 请求，而不是执行`post :add_chips`并将其`format`作为参数传递，您应该执行以下操作：

```
xhr :post, :add_chips, @params 
```

...没有`format`参数。这将执行 JavaScript 请求并使用`.js`模板进行响应。

**更新：**

在最新版本的 Rails/RSpec 中，您应该改为：

```
post :add_chips, params: @params, xhr: true 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-09-28T01:57:25.027

好的，我知道我做错了什么。我在测试中传递了一个参数散列，格式需要包含在同一个散列中。所以而不是这个：

```
@params = {:chip_color => 'red'}
...
post :add_chips, @params, :format => 'js' 
```

它需要看起来像这样

```
@params = {:chip_color => 'red', :format => 'js'}
...
post :add_chips, @params 
```

# python - 返回列表的正元素或负元素的函数

> ID：12604097
> 
> 赞同：1
> 
> 时间：2012-09-26T14:32:48.437
> 
> 标签：python, list

我正在尝试创建一个`splitList`函数，该函数将选项作为输入并返回列表的正元素或负元素。

到目前为止，这就是我所拥有的：

```
def splitList([1,-3,5,7,-9,-11,10,2,-4], option) 
```

*   如果 "option" = 0 我想获得所有积极的元素。
*   如果 "option" = 1 我想得到所有的负面元素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T01:13:44.503

这是一个稍微干燥的替代方案：

```
import operator

def split_list(iterator, positive=True):
    sign_test = operator.gt if positive else operator.lt
    return [i for i in iterator if sign_test(i, 0)] 
```

如果您希望它返回非正数/非负数，则可以将`gt`&`lt`替换为`ge`and `le`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T16:54:59.220

我建议您使用更有意义的词来描述您对正整数或负整数的意图。这是一个示例函数：

```
def split_list(data_set, positive=True):
    if positive:
        return [i for i in data_set if i > 0]
    return [i for i in data_set if i < 0]

example = [1,-3,5,7,-9,-11,0,2,-4]
print split_list(example, True)
print split_list(example, False) 
```

返回：

```
[1, 5, 7, 2]
[-3, -9, -11, -4] 
```

作为旁注，此示例假定 0 既不被认为是积极的也不被认为是消极的——您可以轻松地将 or 调整为 or来`>`调整您的特定需求。`<``>=``<=`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T03:23:11.473

这是另一种选择：

```
import operator

def split_list(iterator, positive=True, sign_test=(operator.lt, operator.gt)):
    return [i for i in iterator if sign_test[positive](i, 0)] 
```

像这样称呼它：

```
>>> split_list([1, -2, 4, 0, -4], False)
[-2, -4] 
```

或者：

```
>>> split_list([1, -2, 4, -0, 4], True, (operator.lt, operator.ge))
[1, 4, 0] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-22T17:10:17.000

这是一种方法：

```
def split_list():
    pos = []
    neg = []

     for i in alist:
        if i < 0:
            pos.append(i)
     print pos
     for i in alist:
        if i > 0:
            neg.append(i)
     print neg

def main():
    alist = [54,26,-93,-17,-77,31,44,55,20]
    manipulate_data(alist)

if __name__ == '__main__':
    main() 
```

# python - Explain a python construction

> ID：12604098
> 
> 赞同：1
> 
> 时间：2012-09-26T14:32:53.113
> 
> 标签：python

I have a list of tuples in 'tups' and have applied the following code to filter. The list of tuples have the format `[(floata,stra1,stra2),(floatb,strb1,strb2),...etc]`

```
keys=sorted({t[2] for t in tups}) 
for key in keys:     
    group=filter(lambda t: t[2]==key,tups)     
    print '{}:\n\tmax: {}\n\tmin: {}'.format(key,max(group),min(group)) 
```

Initially I thought the curly brackets was a mistake and changed them to square brackets. I did not get a syntax error but the code did not work. As a last resort I changed the brackets back and everything was fine. Can someone explain the construction. Is this a dictionary comprehension? Where is this explained in the documentation?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T14:33:55.127

If you mean the curly brackets in the first line, [this is a set comprehension](http://www.youtube.com/watch?v=t85uBptTDYY&list=UUAuqj5Bs5mTTl1mIVDmuAlw&index=1&feature=plcp). This will create a set of the third item from every tuple in `tups`. A set is similar to a list, but without order, and therefore cannot contain duplicates.

If you mean the brackets in the string, this is just [new-style string formatting](http://docs.python.org/library/string.html#formatstrings). Calling `str.format()` changes those braces into the passed values.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T14:38:26.227

Before Python 2.6, you would have used:

```
print '%s:\n\tmax: %s\n\tmin: %s' % (key,max(group),min(group)) 
```

to format a string using placeholders (the `%s`).

Since Python 2.6, you can use the `{}` syntax for the placeholder and `.format` instead:

```
print '{}:\n\tmax: {}\n\tmin: {}'.format(key,max(group),min(group)) 
```

or using positional arguments:

```
print '{0}:\n\tmax: {2}\n\tmin: {1}'.format(key,min(group),max(group)) 
```

(notice that I changed the order of the arguments, but the output is the same: we used `{2}` to represent the third argument...)

Just an advice: when you get a lot of arguments, it's easier to name them, as:

```
print '{key}:\n\tmax: {groupmax}\n\tmin: {groupmin}'.format(key=key,groupmin=min(group),groupmax=max(group)) 
```

The `.format` syntax is more powerful than the `%` one: examples are available in the [documentation](http://docs.python.org/library/string.html#formatstrings).

# authorization - 如何使用 WebApi 和 Ninject 解决 AuthorizeAttribute 内部的依赖关系

> ID：12604100
> 
> 赞同：0
> 
> 时间：2012-09-26T14:32:54.010
> 
> 标签：authorization, ninject, asp.net-web-api

我当前的设置是使用 Ninject 进行简单的 IoC，一切正常，但我无法在`AuthorizeAttribute`. 我需要访问一个执行 ClaimsVerification 的类：

这是我的代码：

国际奥委会配置：

```
 var kernel = new StandardKernel(); // Ninject IoC
        // These registrations are "per instance request".
        // See http://blog.bobcravens.com/2010/03/ninject-life-cycle-management-or-scoping/

        kernel.Bind<RepositoryFactories>().To<RepositoryFactories>()
            .InSingletonScope();

        kernel.Bind<IRepositoryProvider>().To<RepositoryProvider>();
        kernel.Bind<ISmartDocumentorUow>().To<SmartDocumentorUow>();
        kernel.Bind<IClaimsVerification>().To<ClaimsVerification>();
       // kernel
        //kernel.BindFilter<MyAuthorizeAttribute>(FilterScope.Controller, 0).WhenControllerHas<RequireRolesAttribute>();

        // Tell WebApi how to use our Ninject IoC
        config.DependencyResolver = new NinjectDependencyResolver(kernel); 
```

我的授权属性：

```
public class MyAuthorizeAttribute : AuthorizeAttribute
{
    [Inject]
    IClaimsVerification clamisverify { get; set; }

    public MyAuthorizeAttribute()
    {
        //var x = System.Web.Mvc.DependencyResolver.Current.(typeof(IClaimsVerification));
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T14:03:06.570

是的，对不起，问题是注入了在 web api 中不起作用的 iClaimsverification。

我尝试了公共财产，但仍然没有用。

bindfilter 被注释掉，因为它不存在于核心 NInject api (dll) 中，它确实存在于 ninject 的 MVC dll 中，但它适用于 web mvc 中的 Action 过滤器，而不适用于我的 api mvc可以告诉..

我确实解决了这样的问题，尽管我不喜欢很多这样的修复：

```
 private IClaimsVerification verifier
    {
        get
        {
            return (GlobalConfiguration.Configuration.DependencyResolver.GetService(typeof(IClaimsVerification)) as IClaimsVerification);
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T21:58:29.730

您标记的属性`Inject`是私有的 - 您需要使用自定义配置初始化 Ninject 以选择效率低得多的过程

（您没有在问题中说明问题。我看到您正在尝试 BindFilter，但它已被注释掉（为什么？） - 这是正确的方法。我建议阅读有关 BindFilter 的 Ninject.MVC3 wiki 文章作为示例）

# sql - 我可以递归地使用 XML 查询吗？

> ID：12604102
> 
> 赞同：0
> 
> 时间：2012-09-26T14:32:54.810
> 
> 标签：sql, sql-server, xml, recursion

这可能看起来有点傻，但我想尝试一次性解决这个问题。

我在 SQL 数据库中有一个链接回自身的表。它有一个组织 ID 和一个父组织 ID。顶级组织的父 ID 为 0，不同级别的每个组织都有其上一个组织的父组织。组织的级别过去由表中称为组织级别的另一个字段确定。但是，现在级别取决于组织在树下的位置。这样，如果一个组织的父级有另一个父级，则第一个组织将处于第 3 级，第 2 级为父级，第 1 级为祖父级。

我了解我希望我的 SQL 如何工作，但问题是创建一个通用 SQL 语句，它将返回我的组织及其级别。我决定尝试使用 XML 来执行此操作，但这可能不是最好的主意。假设我有这样的组织结构。

```
-Top Org 1
--Second Org 1
--Second Org 2
-Top Org 2
--Second Org 3
--Second Org 4
-Top Org 3
--Second Org 5
--Second Org 6 
```

完成后，我想查询如下所示的 XML：

```
<Organizations>
  <Lvl1 OrgID="1" Name="Top Level 1" Index="1">
    <Lvl2 OrgID="5" Name="Second Level 1" Index="1" />
    <Lvl2 OrgID="6" Name="Second Level 2" Index="2" />
  </Lvl1>
  <Lvl1 OrgID="3" Name="Top Level 2" Index="2">
    <Lvl2 OrgID="7" Name="Second Level 3" Index="1" />
    <Lvl2 OrgID="8" Name="Second Level 4" Index="2" />
  </Lvl1>
  <Lvl1 OrgID="4" Name="Top Level 3" Index="3">
    <Lvl2 OrgID="9" Name="Second Level 5" Index="1" />
    <Lvl2 OrgID="10" Name="Second Level 6" Index="2" />
  </Lvl1>
</Organizations> 
```

如果我知道要查询多少级别，我已经弄清楚了如何正常执行此操作。如果我想查询第一级和第二级，我这样做：

```
SELECT
    Lvl1.Org_ID [@OrgID]
    ,Lvl1.Org_Name [@Name]
    ,Lvl1.Org_SortID [@Index]
    ,(
        SELECT
            Lvl2.Org_ID [@OrgID]
            ,Lvl2.Org_Name [@Name]
            ,Lvl2.Org_SortID [@Index]
        FROM Organizations Lvl2
        WHERE Lvl2.Org_ParentID = Lvl1.Org_ID
        GROUP BY Lvl2.Org_ID, Lvl2.Org_Name, Lvl2.Org_SortID
        ORDER BY Lvl2.Org_SortID
        FOR XML PATH('Lvl2'), TYPE
    )
FROM Organizations Lvl1
INNER JOIN Organizations Child1 ON Lvl1.Org_ID = Child1.Org_ParentID
WHERE Lvl1.Org_ParentID = 0
GROUP BY Lvl1.Org_ID, Lvl1.Org_Name, Lvl1.Org_SortID
ORDER BY Lvl1.Org_SortID
FOR XML PATH('Lvl1'), ROOT('Organizations')
```

但是让我们假装我不知道我将拥有多少关卡。我可能只有两个级别，我可能有 15 个级别。并不是每个组织都可以有相同数量的级别。我想知道的是是否有一种方法可以递归地查看每条记录，并确定它下面是否有任何子项。如果是这样，为这些孩子创建新的 XML 标记并向下钻取一层，然后检查每个孩子，看看他们是否有孩子。等等。

也许没有一个好的方法可以做到这一点，或者让 SQL 做这样的事情需要大量的内存和时间。但如果不是，请告诉我这是可能的，并给我举个例子。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T16:09:06.723

我最近遇到了一个类似的问题，我通过使用递归函数（即它调用自己）解决了这个问题。

我没有做任何测试，但这样的事情应该可以工作：

```
CREATE FUNCTION dbo.GetChildOrganisations (@ParentID INT)
RETURNS XML
AS
BEGIN
    RETURN 
    (   SELECT  Org_ID [@OrgID],
                Org_Name [@Name],
                Org_SortID [@Index],
                dbo.GetChildOrganisations(Org_ID) [ChildOrganisations] 
        FROM    Organizations 
        WHERE   Org_ParentID = @ParentID
        FOR XML PATH('Orgainisations')
    )
END 
```

# jquery - 在下一个页面上删除行后的 DataTable 再次显示

> ID：12604106
> 
> 赞同：1
> 
> 时间：2012-09-26T14:33:04.920
> 
> 标签：jquery, jquery-datatables

我对 DataTables 有奇怪的问题。我正在使用这些东西来删除行并且一切正常（行已从数据库中删除，警报正确显示），并且当我单击上一页并返回最初显示行的页面时，它会从显示中删除行（按页面我的意思是 DataTable 页码或我增加每页的行数） - 它再次显示......（因为它实际上没有被删除）

只有在硬刷新后它才会被删除。为什么会发生这种情况以及如何在不实际刷新浏览器的情况下真正删除它？

这是我用来删除行的代码：

```
function DeletePublisher(element, publisherid) {
jConfirm('Are you sure you want to delete this publisher?', 'Delete publisher', function (r) {
    if (r) $.post('includes/publishers/delete-publisher.php?publisherid=' + publisherid,

    function (data) {
        if ($.trim(data) == 'error') {
            $.jGrowl('This publisher was already deleted', {
                header: '<strong style="text-align:center;">ERROR</strong>'
            });
            $(element)
                .parents('tr')
                .remove();
        } else {
            $(element)
                .parents('tr')
                .remove();
            oTable.fnDeleteRow(element);
            $('tr')
                .removeClass();
            // Now add class names again
            $('tr:odd')
                .addClass('odd');
            $('tr:even')
                .addClass('even');

            $.jGrowl('Publisher deleted');
        }
    });
}); 
```

这是 TR 元素：

```
<td class="action-th">
                    <ul class="button-table-head">
                            <li><div class="button-head edit-icon"><a href="/includes/publishers/edit-publisher.php?editpublisher=<?php echo $publisher_id; ?>" data-fancybox-type="iframe" class="iframe sweet-tooltip" data-text-tooltip="Edit" data-style-tooltip="tooltip-mini-slick"><span>Edit</span></a></div></li>
                        <li><div class="button-head delete-icon"><a href="#" class="sweet-tooltip" data-text-tooltip="Delete" data-style-tooltip="tooltip-mini-slick" onclick="DeletePublisher(this,'<?php echo $publisher_id; ?>')"><span>Delete</span></a></div></li>
                    </ul>
                </td> 
```

所以不确定元素是否首先传递了正确的行 ID？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T15:09:15.567

`$(element).parents('tr').remove();`您可能还想尝试`fnDeleteRow`从 Datatable 中删除行，而不是从 DOM 中删除元素。您可以将参数传递给将告诉 Datatables 重绘表格的方法，这不会强制您回发以刷新数据。

这是Datatables API中[的链接](http://datatables.net/api#fnDeleteRow)`fnDeleteRow`。

**更新：**

尝试这样的事情：

```
function DeletePublisher(element, publisherid) {
jConfirm('Are you sure you want to delete this publisher?', 'Delete publisher', function (r) {
    if (r) $.post('includes/publishers/delete-publisher.php?publisherid=' + publisherid,

    function (data) {
        var nTr = $(element).closest('tr');

        oTable.fnDeleteRow(nTr, null, true);

        if ($.trim(data) == 'error') {
            $.jGrowl('This publisher was already deleted', {
                header: '<strong style="text-align:center;">ERROR</strong>'
            });
        } else {
            $.jGrowl('Publisher deleted');
        }            
    });
}); 
```

# jquery - JQuery 授权不适用于 RESTful 服务

> ID：12604109
> 
> 赞同：0
> 
> 时间：2012-09-26T14:33:16.670
> 
> 标签：jquery, json, restful-authentication

在 RESTful 服务的身份验证成功后，我期望从服务器接收 JSON 响应。

我正在使用下面的代码：

```
 jQuery.ajax({
                        type: "GET",
                        url: "http://dev.ragld.com/hostinfo/",
                        contentType: "json",
                        beforeSend: function(jqXHR){
                            jqXHR.setRequestHeader("Authorization", "Basic cmsdfsdfG~~~~~Q6cmFnbGQ=");
//some characters have been changed for security reasons.
                        },
                        accept: "application/json",
                        async:false,
                        success: function(response){
                            console.log('success called..');
                        },
                        error: function(errorObj){
                            console.log(errorObj);
                        }
    }); 
```

由于某些原因，它没有选择方法为，当我在 FF 中`GET`检查 NET 选项卡时，它显示方法为而不是. 同样，它不会返回我期望的 JSON 数据。`firebug``OPTIONS``GET`

有谁能帮忙吗？

**来自chrome的编辑** 错误，但它并没有说太多： ![在此处输入图像描述](../Images/6255a6a8813d1d8a3d99c81ee13a980a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T15:33:40.383

你的 REST api 有 COORS 吗？否则，您不能对与您不在同一个域中的 URL 进行 AJAX 调用。

# c# - 在 WinRT 中（更新 ModifiedTime）中“触摸”文件的优雅/高性能方式？

> ID：12604110
> 
> 赞同：4
> 
> 时间：2012-09-26T14:33:25.083
> 
> 标签：c#, file-io, windows-runtime, storagefile

在（更新 ModifiedTime）WinRT 中“触摸”文件的优雅/高性能方式？

我有一些代码需要删除超过 30 天的文件。这很好用，但在某些情况下，我需要更新文件上的时间以重置 30 天窗口，并防止删除。在 basicProperties 列表中，ModifiedTime 是只读的，所以我需要找到另一种方法来更新它...

方法一：重命名两次

```
 // Ugly, and may have side-effects depending on what's using the file
    // Sometimes gives access denied...
    public static async Task TouchFileAsync(this StorageFile file)
    {
       var name = file.Name;
       await file.RenameAsync("~" + name).AsTask().ContinueWith(
            async (task) => { await file.RenameAsync(name); }
       );
    } 
```

方法二：修改文件属性

```
 // Sometimes works, but currently throwing an ArgumentException for
    // me, and I have no idea why. Also tried many other properties:
    // http://msdn.microsoft.com/en-us/library/windows/desktop/bb760658(v=vs.85).aspx
    public static async Task TouchFileAsync(this StorageFile file)
    {
        var prop = new KeyValuePair<string, object>("System.Comment", DateTime.Now.Ticks.ToString());
        await file.Properties.SavePropertiesAsync(new[] { prop });
    } 
```

方法 3：通过 P/Invoke 使用 Win32 API？

*   不确定这是否适用于 ARM 设备？
*   通过认证？
*   表现出色？
*   有没有最好的方法来做到这一点？代码示例？

有人有其他想法吗？我有点卡住了:-)

非常感谢，乔恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-09T16:21:31.340

我只是需要这个，这是我的解决方案。

用法

```
await storageFileToTouch.TouchAsync(); 
```

代码

```
public static class StorageFileExtensions
{
    /// <summary>
    ///     Touches a file to update the DateModified property.
    /// </summary>
    public static async Task TouchAsync(this StorageFile file)
    {
        using (var touch = await file.OpenTransactedWriteAsync())
        {
            await touch.CommitAsync();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T14:20:02.623

假设您计划组合 RT 机器上本地存在的文件列表，而不是该云中的某个位置（否则我们不必担心 WinRT doc mod 过程），您可以轻松使用应用程序数据容器提供给每个应用程序以存储非常薄的数据（键值对非常适合）。

通过这种方式，您可以为每个需要持久化的文件存储一个未来的删除日期，以便下次删除它时，在删除过程发生之前，应用程序会检查应用程序存储数据。然后，当您只是想确保它们不会从您的进程中删除时，您无需担心正在迭代的文件的权限。

```
Windows.Storage.ApplicationDataContainer localSettings = Windows.Storage.ApplicationData.Current.LocalSettings;

// Create a setting in a container

Windows.Storage.ApplicationDataContainer container = 
   localSettings.CreateContainer("FilesToPersist", Windows.Storage.ApplicationDataCreateDisposition.Always);

StorageFile file = fileYouWantToPersist; 

if (localSettings.Containers.ContainsKey("FilesToPersist"))
{

   localSettings.Containers["FilesToPersist"].Values[file.FolderRelativeId] = DateTime.Now.AddDays(30);
}

// Read data from a setting in a container

bool hasContainer = localSettings.Containers.ContainsKey("FilesToPersist");
bool hasSetting = false;

if (hasContainer)
{
   hasSetting = localSettings.Containers["FilesToPersist"].Values.ContainsKey(file.FolderRelativeId);
    if(hasSettings)
    {
         string dt =    localSettings.Containers["FilesToPersist"].Values[file.FolderRelativeId];
         if(Convert.ToDateTime(dt) < DateTime.Now)
         {
             //Delete the file
         }
    }
} 
```

资源：

[http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.applicationdata.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.applicationdata.aspx)

[http://lunarfrog.com/blog/2011/10/10/winrt-storage-accesscache/](http://lunarfrog.com/blog/2011/10/10/winrt-storage-accesscache/)

# curl - curl 身份验证标头处理

> ID：12604111
> 
> 赞同：0
> 
> 时间：2012-09-26T14:33:26.807
> 
> 标签：curl, libcurl, basic-authentication, ntlm

我有一个支持 NTLM 和基本身份验证方案的服务器，我正在使用 curl 使用 https 连接到该服务器。

由于某些原因，我希望 curl 在支持 NTLM 和 basic 的情况下使用基本身份验证方案，如果不使用 NTLM，即我想修补 curl，并颠倒身份验证方案的偏好顺序。

我已阅读 curl 源代码中的以下注释：

> 这些检查的顺序是高度相关的，因为这将是存在多个接受类型的情况下的优先顺序。

当然，基本身份验证太简单了，但由于我使用的是 SSL，它不应该影响安全性，不是吗？这种逆转会产生任何不利影响吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T08:27:57.640

请参阅此问题以获取详细答案：

[https://security.stackexchange.com/questions/988/is-basic-auth-secure-if-done-over-https](https://security.stackexchange.com/questions/988/is-basic-auth-secure-if-done-over-https)

# optimization - GNU 内联汇编优化

> ID：12604114
> 
> 赞同：6
> 
> 时间：2012-09-26T14:33:30.687
> 
> 标签：optimization, gcc, x86-64, inline-assembly, icc

我正在尝试为高度优化的 x86-64 位操作代码编写一个小型库，并且正在摆弄内联 asm。

在测试这个特殊案例时引起了我的注意：

```
unsigned long test = 0;
unsigned long bsr;

// bit test and set 39th bit
__asm__ ("btsq\t%1, %0 " : "+rm" (test) : "rJ" (39) );

// bit scan reverse (get most significant bit id)
__asm__ ("bsrq\t%1, %0" : "=r" (bsr) : "rm" (test) );

printf("test = %lu, bsr = %d\n", test, bsr); 
```

在 gcc 和 icc 中编译和运行都很好，但是当我检查程序集时，我发现了差异

`gcc -S -fverbose-asm -std=gnu99 -O3`

```
movq    $0, -8(%rbp)
## InlineAsm Start
btsq    $39, -8(%rbp) 
## InlineAsm End
movq    -8(%rbp), %rax
movq    %rax, -16(%rbp)
## InlineAsm Start
bsrq    -16(%rbp), %rdx
## InlineAsm End
movq    -8(%rbp), %rsi
leaq    L_.str(%rip), %rdi
xorb    %al, %al
callq   _printf 
```

我想知道为什么这么复杂？我正在编写高性能代码，其中指令的数量至关重要。我特别想知道为什么 gcc 在将我的变量`test`传递给第二个内联 asm 之前会对其进行复制？

使用 icc 编译的相同代码给出了更好的结果：

```
 xorl      %esi, %esi                                    # test = 0
    movl      $.L_2__STRING.0, %edi                         # has something to do with printf
    orl       $32832, (%rsp)                                # part of function initiation
    xorl      %eax, %eax                                    # has something to do with printf
    ldmxcsr   (%rsp)                                        # part of function initiation
    btsq      $39, %rsi                                     #106.0
    bsrq      %rsi, %rdx                                    #109.0
    call      printf                                        #111.2 
```

尽管 gcc 决定将我的变量保留在堆栈中而不是寄存器中，但我不明白为什么要`test`在将其传递给第二个 asm 之前进行复制？如果我`test`在第二个 asm 中作为输入/输出变量输入

`__asm__ ("bsrq\t%1, %0" : "=r" (bsr) , "+rm" (test) );`

然后那些线消失了。

```
movq    $0, -8(%rbp)
## InlineAsm Start
btsq    $39, -8(%rbp) 
## InlineAsm End
## InlineAsm Start
bsrq    -8(%rbp), %rdx
## InlineAsm End
movq    -8(%rbp), %rsi
leaq    L_.str(%rip), %rdi
xorb    %al, %al
callq   _printf 
```

这是 gcc 搞砸了优化还是我错过了一些重要的编译器开关？我的生产系统确实有 icc，但是如果我决定在某个时候分发源代码，那么它也必须能够使用 gcc 进行编译。

使用的编译器：

gcc 版本 4.2.1（基于 Apple Inc. build 5658）（LLVM build 2336.1.00）

icc 版本 12.0.2

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T20:02:05.107

`test`我已经像这样在 Linux 上尝试了你的示例（通过`&test`在`printf`:)中使用强制堆栈 ref/loc 使其“邪恶” ：

```
#include <stdio.h>
int main(int argc, char **argv)
{
    unsigned long test = 0;
    unsigned long bsr;
// bit test and set 39th bit
    **asm** ("btsq\t%1, %0 " : "+rm" (test) : "rJ" (39) );
// bit scan reverse (get most significant bit id)
    **asm** ("bsrq\t%1, %0" : "=r" (bsr) : "rm" (test) );
    printf("test = %lu, bsr = %d, &test = %p\n", test, bsr, &test);
    return 0;
}
```

并用各种版本的`gcc -O3`... 编译它，得到以下结果：

```
代码生成的 gcc 版本
==================================================== ===============================
  400630: 48 83 ec 18 sub $0x18,%rsp 4.7.2,
  400634: 31 c0 xor %eax,%eax 4.6.2,
  400636: bf 50 07 40 00 移动 $0x400750,%edi 4.4.6
  40063b: 48 8d 4c 24 08 lea 0x8(%rsp),%rcx
  400640: 48 0f ba e8 27 bts $0x27,%rax
  400645: 48 89 44 24 08 移动 %rax,0x8(%rsp)
  40064a: 48 89 c6 移动 %rax,%rsi
  40064d: 48 0f bd d0 bsr %rax,%rdx
  400651: 31 c0 xor %eax,%eax
  400653：e8 68 fe ff ff callq 4004c0
[ ... ]
-------------------------------------------------- -------------------------------------------
  4004f0: 48 83 ec 18 sub $0x18,%rsp 4.1
  4004f4: 31 c0 xor %eax,%eax
  4004f6: bf 28 06 40 00 移动 $0x400628,%edi
  4004fb: 48 8d 4c 24 10 lea 0x10(%rsp),%rcx
  400500: 48 c7 44 24 10 00 00 00 00 movq $0x0,0x10(%rsp)
  400509: 48 0f ba e8 27 bts $0x27,%rax
  40050e: 48 89 44 24 10 移动 %rax,0x10(%rsp)
  400513: 48 89 c6 移动 %rax,%rsi
  400516: 48 0f bd d0 bsr %rax,%rdx
  40051a: 31 c0 xor %eax,%eax
  40051c：e8 c7 fe ff ff callq 4003e8
[ ... ]
-------------------------------------------------- -------------------------------------------
  400500: 48 83 ec 08 sub $0x8,%rsp 3.4.5
  400504: bf 30 06 40 00 移动 $0x400630,%edi
  400509: 31 c0 xor %eax,%eax
  40050b: 48 c7 04 24 00 00 00 00 movq $0x0,(%rsp)
  400513: 48 89 e1 移动 %rsp,%rcx
  400516: 48 0f ba 2c 24 27 btsq $0x27,(%rsp)
  40051c: 48 8b 34 24 移动 (%rsp),%rsi
  400520: 48 0f bd 1​​4 24 bsr (%rsp),%rdx
  400525：e8 fe fe ff ff callq 400428
[ ... ]
-------------------------------------------------- -------------------------------------------
  4004e0: 48 83 ec 08 sub $0x8,%rsp 3.2.3
  4004e4: bf 10 06 40 00 移动 $0x400610,%edi
  4004e9: 31 c0 xor %eax,%eax
  4004eb: 48 c7 04 24 00 00 00 00 movq $0x0,(%rsp)
  4004f3: 48 0f ba 2c 24 27 btsq $0x27,(%rsp)
  4004f9: 48 8b 34 24 移动 (%rsp),%rsi
  4004fd: 48 89 e1 移动 %rsp,%rcx
  400500: 48 0f bd 1​​4 24 bsr (%rsp),%rdx
  400505：e8 ee fe ff ff callq 4003f8
[ ... ]

```

尽管创建的代码存在显着差异（包括访问是作为寄存器还是`bsr`内存`test`），但没有一个经过测试的版本重新创建您显示的程序集。我怀疑您在 MacOSX 上使用的 4.2.x 版本中存在错误，但是我既没有您的测试用例，也没有可用的特定编译器版本。

**编辑：**`test`上面的代码在强制进入堆栈的意义上显然是不同的；如果*没有*这样做，那么我测试过的所有“普通” gcc 版本都会直接配对`bts $39, %rsi`/ `bsr %rsi, %rdx`。

但是，我发现在`clang`那里创建了不同的代码：

```
140: 50 推%rax
 141: 48 c7 04 24 00 00 00 00 movq $0x0,(%rsp)
 149: 31 f6 异或 %esi,%esi
 14b: 48 0f ba ee 27 bts $0x27,%rsi
 150: 48 89 34 24 移动 %rsi,(%rsp)
 154: 48 0f bd d6 bsr %rsi,%rdx
 158: bf 00 00 00 00 移动 $0x0,%edi
 15d: 30 c0 xor %al,%al
 15f: e8 00 00 00 00 callq printf@plt>
```

所以差异似乎确实在 clang/llvm 的代码生成器和“gcc 正确”之间。

# ruby - 使用 Mountain Lion、Xcode 4.5 和 RVM 安装 Ruby？

> ID：12604119
> 
> 赞同：5
> 
> 时间：2012-09-26T14:33:41.600
> 
> 标签：ruby, rvm, llvm

`rvm install 1.9.3 --with-gcc=clang`（正如[Can't install Ruby under Lion with RVM – GCC issues](https://stackoverflow.com/questions/8032824/cant-install-ruby-under-lion-with-rvm-gcc-issues)所建议的那样）不起作用，因为 Mac OS X 10.8.2 (Mountain Lion) 和 Xcode 4.5 都没有附带`clang`.

是否可以使用 Ruby 编译`llvm`？

根据[Matthias Schmidt 的“如何使用 LLVM 和 rbenv 在 Mac OS X 上安装 Ruby 1.9.3”](http://m-schmidt.eu/2012/02/25/how-to-install-ruby-on-mac-os-x-with-llvm-and-rbenv/)，Ruby 现在与 LLVM 完全兼容。

但是，我仍然得到：`error: C compiler cannot create executables`

### 更新：

实际上，我在`clang`这里找到了`/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang`（感谢[Node.js Installation Wiki](https://github.com/joyent/node/wiki/Installation)）。我只是没有`clang`在我的道路上。

那么，如果我添加`clang`到我的路径中，就`rvm install 1.9.3 --with-gcc=clang`足够了吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-26T17:03:03.493

从 RVM 笔记：

**自制**：

如果您使用[Homebrew](http://mxcl.github.com/homebrew/)，您可以从 homebrew/dupes 安装 apple-gcc42 和所需的库：

```
 brew update
  brew tap homebrew/dupes
  brew install autoconf automake apple-gcc42
  rvm pkg install openssl 
```

这可以与现有的 Xcode 4.2+ 安装或 Xcode 命令行工具并存。

**osx-gcc-安装程序**：

如果您不使用 Homebrew，可以下载并安装 osx-gcc-installer：
[https](https://github.com/kennethreitz/osx-gcc-installer) ://github.com/kennethreitz/osx-gcc-installer 。

希望它会帮助你。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T14:37:42.937

不，ruby 与 llvm 不完全兼容，Fibers 至少存在一个问题，如果 llvm 版本更改，可能会出现其他问题。

Ruby 最适合 gcc-4.2，rvm 提供了如何获取它的信息（+其他重要的东西）：

```
rvm requirements 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T05:44:26.840

我使用了这个：[http](http://railsinstaller.org/mac) ://railsinstaller.org/mac - 这是一个微风。另外我喜欢sublime的文本编辑器，通过这个资源发现……也许我要和macvim说再见了！设想。

# wcf - 动态创建 WCF 客户端

> ID：12604121
> 
> 赞同：0
> 
> 时间：2012-09-26T14:33:43.140
> 
> 标签：wcf, dynamic, runtime, connect

我想创建一个动态连接器，以连接到我的 WCF 服务。我在网上找到了以下代码：

```
BasicHttpBinding basic = new BasicHttpBinding(BasicHttpSecurityMode.TransportCredentialOnly);
basic.Security.Transport.ClientCredentialType = HttpClientCredentialType.Ntlm;
EndpointAddress serviceAddress = new EndpointAddress("http://url.svc");

ServiceClient client = new ServiceClient(basic, serviceAddress); 
```

问题是，在这种情况下，我需要知道“ServiceClient”是什么。是否可以创建没有类型的客户端？

# php - 用 '|' 分割字符串 字符

> ID：12604124
> 
> 赞同：0
> 
> 时间：2012-09-26T14:33:47.120
> 
> 标签：php, split

我想用字符“|”分割以下字符串 但我收到以下错误，有什么想法吗？

错误：

```
Warning: split() [function.split]: REG_EMPTY in E:\AppServ\www\admin\panelActions\editApplication.php on line 39 
```

细绳 ：

```
|../../filesBank/_screenshots/com.beem.project.beem_screenshot_0.jpg|../../filesBank/_screenshots/com.beem.project.beem_screenshot_1.jpg|../../filesBank/_screenshots/com.beem.project.beem_screenshot_2.jpg|../../filesBank/_screenshots/com.beem.project.beem_screenshot_3.jpg|../../filesBank/_screenshots/com.beem.project.beem_screenshot_4.jpg|../../filesBank/_screenshots/com.beem.project.beem_screenshot_5.jpg|../../filesBank/_screenshots/com.beem.project.beem_screenshot_6.jpg|../../filesBank/_screenshots/com.beem.project.beem_screenshot_7.jpg 
```

代码 ：

```
$__screenShots = split("|", $requestRow['appImages']); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T14:36:06.987

形成 PHP DOC 关于[`split`](http://php.net/manual/en/function.split.php)

> 自 PHP 5.3.0 起，该函数已被弃用。强烈建议不要依赖此功能。

尝试

```
$string = '|../../filesBank/_screenshots/com.beem.project.beem_screenshot_0.jpg|../../filesBank/_screenshots/com.beem.project.beem_screenshot_1.jpg|../../filesBank/_screenshots/com.beem.project.beem_screenshot_2.jpg|../../filesBank/_screenshots/com.beem.project.beem_screenshot_3.jpg|../../filesBank/_screenshots/com.beem.project.beem_screenshot_4.jpg|../../filesBank/_screenshots/com.beem.project.beem_screenshot_5.jpg|../../filesBank/_screenshots/com.beem.project.beem_screenshot_6.jpg|../../filesBank/_screenshots/com.beem.project.beem_screenshot_7.jpg' ;
var_dump(explode("|", $string)); 
```

输出

```
array
  0 => string '' (length=0)
  1 => string '../../filesBank/_screenshots/com.beem.project.beem_screenshot_0.jpg' (length=67)
  2 => string '../../filesBank/_screenshots/com.beem.project.beem_screenshot_1.jpg' (length=67)
  3 => string '../../filesBank/_screenshots/com.beem.project.beem_screenshot_2.jpg' (length=67)
  4 => string '../../filesBank/_screenshots/com.beem.project.beem_screenshot_3.jpg' (length=67)
  5 => string '../../filesBank/_screenshots/com.beem.project.beem_screenshot_4.jpg' (length=67)
  6 => string '../../filesBank/_screenshots/com.beem.project.beem_screenshot_5.jpg' (length=67)
  7 => string '../../filesBank/_screenshots/com.beem.project.beem_screenshot_6.jpg' (length=67)
  8 => string '../../filesBank/_screenshots/com.beem.project.beem_screenshot_7.jpg' (length=67) 
```

*** 如果您还想使用`split`***

这是你使用它的方式

```
$string = split("[|]", $string);
var_dump($string); 
```

你可以得到`split() [function.split]: REG_EMPTY`因为你试图像这样使用它

```
 $string = split("|", $string); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T14:42:20.863

如果您使用的函数与某种正则表达式风格有关，您实际上应该明白您在这里使用了一个特殊字符：

> `|`--- 选择（又名交替或集合并集）运算符匹配运算符之前的表达式或运算符之后的表达式。例如，**`abc|def`匹配`"abc"`或`"def"`**.

（[POSIX 基本正则表达式语法](http://en.wikipedia.org/wiki/Regular_expression#POSIX_Basic_Regular_Expressions)）

您要做的是获取文字`|`字符，因此您需要对其进行转义：

```
split('\\|', ...) 
```

请注意 split 函数已被弃用（POSIX 风格的正则表达式函数），并且`explode`您可以在您的情况下实现非常相似的东西。如果没有，请使用`preg_split`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T14:35:13.753

尝试使用 explode() 函数 - 几乎相同

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T14:36:50.743

警告，[*函数*] split() [*声明*] REG_[在 [您的文件] E:\AppServ\www\admin\panelActions\editApplication.php 第 39 行中*是]EMPTY。*

所以，不要使用空的正则表达式。

# ios - 电话间隙中的点赞按钮

> ID：12604131
> 
> 赞同：0
> 
> 时间：2012-09-26T14:34:11.123
> 
> 标签：ios, facebook, cordova, social

我想在 Phone gap 应用程序中创建一个 Facebook Like 按钮，但是当我获得 java 脚本代码并将其放入 index.html 时，当我运行模拟器时，它会打开应用程序，然后自动切换到 safari 并运行 java 脚本代码喜欢按钮。，那是什么问题？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-01T08:14:00.490

请按照流程进行。1- 集成子浏览器插件。\n 2- 集成 facebook 图形 API 的 java script API。\n 3- 如果您没有登录 Facebook 意味着您没有访问令牌，则应用程序在您的子浏览器插件中打开人脸登录页面.\n 4 成功完全登录后获取访问令牌，您可以根据需要使用所有API功能。\n

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T05:09:38.490

这就是它的意思。javascript 链接打开一个到 Facebook 的链接。如果您想使用与 Facebook 进行交互，可以查看 phonegap 的 facebook 插件。

[https://github.com/davejohnson/phonegap-plugin-facebook-connect](https://github.com/davejohnson/phonegap-plugin-facebook-connect)

* * *

# browser - 如何在浏览器中实现文本编辑器

> ID：12604134
> 
> 赞同：0
> 
> 时间：2012-09-26T14:34:19.710
> 
> 标签：browser, text-editor

这纯粹是一种自我改进和教育的练习。我正在尝试在浏览器中实现一个类似于 vi 的文本编辑器的扩展。有没有人知道我会怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:41:00.287

几周前我为一个项目创建了一个非常基本的编辑器。它可以让你开始:) 将此代码放入 JS 文件中，在你的网页上添加对它的引用

将此添加到您的

```
$("#msgBody").SiteRtfEditor(); 
```

将此添加到您的正文 html 中：

```
<textarea id="msgBody"></textarea> 
```

JS代码：

```
(function ($) {
$.fn.SiteRtfEditor = function (options) {

    var defaults = {
        iFrameUrl: "",
        width: "100%",
        height: "100%",
        showModes: true
    };
    var opts = $.extend(defaults, options);

    return this.each(function () {
        var thisControlID = this.id.toString();
        var rtfEditorID = "SiteRtfEditor_" + thisControlID.toString();
        var swatchCommand = "forecolor";

        $("<style type='text/css'>." + rtfEditorID + "_Swatch{display:block;width:13px;height:13px;margin:0;padding:0px;border:1px solid #d3d3d3;border-spacing:0px;border-collapse:collapse;}</style>").appendTo("head");

        //Build HTML
        var htmlOutput = "<div id='rtfEditorControls' style='padding:0px;margin:3px;text-align:left;line-height:21px;vertical-align:middle;white-space:nowrap;'>";            
        htmlOutput += "<select id='" + rtfEditorID + "_FontFamily'>";
        htmlOutput += "<option value='Arial'>Arial</option>";
        htmlOutput += "<option value='Comic Sans MS'>Comic Sans MS</option>";
        htmlOutput += "<option value='Courier New'>Courier New</option>";
        htmlOutput += "<option value='Monotype Corsiva'>Monotype</option>";
        htmlOutput += "<option value='Tahoma'>Tahoma</option>";
        htmlOutput += "<option value='Times'>Times</option>";
        htmlOutput += "</select>&nbsp;&nbsp;<select id='" + rtfEditorID + "_FontSize'>";
        htmlOutput += "<option value='8'>8pt</option><option value='10'>10pt</option><option value='12'>12pt</option><option value='14'>14pt</option>";
        htmlOutput += "<option value='16'>16pt</option><option value='18'>18pt</option><option value='20'>20pt</option><option value='22'>22pt</option>";
        htmlOutput += "<option value='24'>24pt</option><option value='28'>28pt</option><option value='32'>32pt</option><option value='36'>36pt</option>";
        htmlOutput += "</select><br />";
        htmlOutput += "<input type='button' id='" + rtfEditorID + "_Bold' style='height:21px;width:21px;font-weight:bold;margin:2px;padding:0px;border:1px solid #000000;' value='B' />";
        htmlOutput += "<input type='button' id='" + rtfEditorID + "_Italic' style='height:21px;width:21px;font-style:italic;margin:2px;padding:0px;border:1px solid #000000;' value='I' />";
        htmlOutput += "<input type='button' id='" + rtfEditorID + "_Underline' style='height:21px;width:21px;text-decoration:underline;margin:2px;padding:0px;border:1px solid #000000;' value='U' />";
        htmlOutput += "<input type='button' id='" + rtfEditorID + "_BackColor' style='border:0px;height:16px;width:16px;margin:2px 6px 2px 6px;padding:0px;background:#ffffff url(/Images/BackColor.gif) no-repeat;' />";
        htmlOutput += "<input type='button' id='" + rtfEditorID + "_ForeColor' style='border:0px;height:16px;width:16px;margin:2px 6px 2px 6px;padding:0px;background:#ffffff url(/Images/ForeColor.gif) no-repeat;' />";
        htmlOutput += "<div id='" + rtfEditorID + "_ColorPalette' style='position:absolute;z-index:202;display:none;margin:0px;background-color:#ffffff;border:1px solid #a7abb0;'></div>";
        htmlOutput += "</div>";
        htmlOutput += "<div style='position:relative;z-index:200;width:100%;height:100%;margin:0px;padding:0px;'><iframe id='" + rtfEditorID + "_Frame' frameborder='0' marginheight='0' marginwidth='0' scrolling='auto' windowless='true' style='width:99%;height:100%;border-spacing:0px;border-collapse:collapse;border:1px solid #d3d3d3;background-color:#ffffff;padding:0px;margin-left:auto;margin-right:auto;position:relative;z-index:201;'></iframe></div>";

        if (opts.showModes) {
            htmlOutput += "<div style='width:100%;text-align:left;'><input type='button' id='" + rtfEditorID + "_DesignerMode' style='border:0;background:transparent;font-weight:bold;' value='Design' />&nbsp;&nbsp;<input type='button' id='" + rtfEditorID + "_SourceMode' style='border:0;background:transparent;' value='Source' /></div>";
        }

        $("#" + thisControlID).before("<div id='" + rtfEditorID + "' style='position:relative;padding:0px;margin:0px;border:1px solid #d3d3d3;background-color:#f1f1f1;width:" + opts.Width + ";height:" + opts.Height + ";text-align:center;'>");
        $("#" + thisControlID).css("width", "98%").css("height", "100%").css("margin", "auto");
        $("#" + thisControlID).hide();
        $("#" + rtfEditorID).html(htmlOutput);
        $("#" + rtfEditorID + "_Frame").after($("#" + thisControlID));
        BuildColorPalette(rtfEditorID + "_ColorPalette");

        function BuildColorPalette(paletteID) {
            var paletteHtml = "";
            var firstRowList = ["ffffff", "000000", "eeece1", "1f497d", "4f81bd", "c0504d", "9bbb59", "8064a2", "4bacc6", "f79646"];
            var colorcol1 = ["f2f2f2", "d8d8d8", "bfbfbf", "a5a5a5", "7f7f7f"];
            var colorcol2 = ["7f7f7f", "595959", "3f3f3f", "262626", "0c0c0c"];
            var colorcol3 = ["ddd9c3", "c4bd97", "938953", "494429", "1d1b10"];
            var colorcol4 = ["c6d9f0", "8db3e2", "548dd4", "17365d", "0f243e"];
            var colorcol5 = ["dbe5f1", "b8cce4", "95b3d7", "366092", "244061"];
            var colorcol6 = ["f2dcdb", "e5b9b7", "d99694", "953734", "632423"];
            var colorcol7 = ["ebf1dd", "d7e3bc", "c3d69b", "76923c", "4f6128"];
            var colorcol8 = ["e5e0ec", "ccc1d9", "b2a2c7", "5f497a", "3f3151"];
            var colorcol9 = ["dbeef3", "b7dde8", "92cddc", "31859b", "205867"];
            var colorcol10 = ["fdeada", "fbd5b5", "fac08f", "e36c09", "974806"];
            var lastRowList = ["c00000", "ff0000", "ffc000", "ffff00", "92d050", "00b050", "00b0f0", "0070c0", "002060", "7030a0"];

            //First first
            paletteHtml = "<table style='margin:3px;'><tr><td colspan='10'>Theme Colors</td></tr><tr>";
            for (i = 0; i < firstRowList.length; i++) {
                paletteHtml += "<td><input type='button' class='" + rtfEditorID + "_Swatch' title='#" + firstRowList[i] + "' style='background-color:#" + firstRowList[i] + ";' /></td>";
            };
            paletteHtml += "</tr><tr><td colspan='10' style='height:5px;'></td></tr><tr>";

            //Middle shades
            paletteHtml += "<td>" + BuildShadeColumn(colorcol1) + "</td>";
            paletteHtml += "<td>" + BuildShadeColumn(colorcol2) + "</td>";
            paletteHtml += "<td>" + BuildShadeColumn(colorcol3) + "</td>";
            paletteHtml += "<td>" + BuildShadeColumn(colorcol4) + "</td>";
            paletteHtml += "<td>" + BuildShadeColumn(colorcol5) + "</td>";
            paletteHtml += "<td>" + BuildShadeColumn(colorcol6) + "</td>";
            paletteHtml += "<td>" + BuildShadeColumn(colorcol7) + "</td>";
            paletteHtml += "<td>" + BuildShadeColumn(colorcol8) + "</td>";
            paletteHtml += "<td>" + BuildShadeColumn(colorcol9) + "</td>";
            paletteHtml += "<td>" + BuildShadeColumn(colorcol10) + "</td>";

            //Last row
            paletteHtml += "</tr><tr><td colspan='10'>Standard Colors</td></tr><tr>";
            for (i = 0; i < lastRowList.length; i++) {
                paletteHtml += "<td><input type='button' class='" + rtfEditorID + "_Swatch' title='#" + lastRowList[i] + "' style='background-color:#" + lastRowList[i] + ";' /></td>";
            };

            paletteHtml += "</tr></table>";
            $("#" + paletteID).html(paletteHtml);
        }; //BuildColorPalette

        function BuildShadeColumn(colorList) {
            var tempHtml = "<table style='margin:0px;padding:0px;width:13px;'><tr><td>";
            for (i = 0; i < colorList.length; i++) {
                tempHtml += "<input type='button' class='" + rtfEditorID + "_Swatch' title='#" + colorList[i] + "' style='background-color:#" + colorList[i] + ";' />";
            }
            tempHtml += "</td></tr></table>";
            return tempHtml;
        }; //BuildShadeColumn

        $(function () {
            if (opts.iFrameUrl.length != 0) { $("#" + rtfEditorID + "_Frame").attr("src", opts.iFrameUrl.toString()); };

            document.getElementById(rtfEditorID + "_Frame").contentWindow.document.designMode = "on";
            document.getElementById(rtfEditorID + "_Frame").contentWindow.document.close();

            $("#" + rtfEditorID + "_DesignerMode").click(function() {
                $("#" + rtfEditorID + "_SourceMode").css("font-weight", "normal");
                $("#" + rtfEditorID + "_DesignerMode").css("font-weight", "bold");
                $("#" + thisControlID).hide();
                $("#" + rtfEditorID + "_Frame").show();

            });

            $("#" + rtfEditorID + "_SourceMode").click(function() {
                $("#" + rtfEditorID + "_SourceMode").css("font-weight", "bold");
                $("#" + rtfEditorID + "_DesignerMode").css("font-weight", "normal");
                $("#" + thisControlID).show();
                $("#" + rtfEditorID + "_Frame").hide();
            });

            $("#" + rtfEditorID + "_BackColor").click(function () {
                swatchCommand = "backcolor";
                $("#" + rtfEditorID + "_ColorPalette").toggle();
            });

            $("#" + rtfEditorID + "_ForeColor").click(function () {
                swatchCommand = "forecolor";
                $("#" + rtfEditorID + "_ColorPalette").toggle();
            });

            //http://msdn.microsoft.com/en-us/library/ms533049(VS.85).aspx for execCommand options
            $("." + rtfEditorID + "_Swatch").click(function () {
                var edit = document.getElementById(rtfEditorID + "_Frame").contentWindow;
                edit.focus();
                edit.document.execCommand(swatchCommand, false, $(this).attr("title").toString());
                edit.focus();
                $("#" + rtfEditorID + "_ColorPalette").toggle();
            });

            $("#" + rtfEditorID + "_Bold").click(function () {
                var edit = document.getElementById(rtfEditorID + "_Frame").contentWindow;
                edit.focus();
                edit.document.execCommand("bold", false, "");
                edit.focus();
            });

            $("#" + rtfEditorID + "_Italic").click(function () {
                var edit = document.getElementById(rtfEditorID + "_Frame").contentWindow;
                edit.focus();
                edit.document.execCommand("italic", false, "");
                edit.focus();
            });

            $("#" + rtfEditorID + "_Underline").click(function () {
                var edit = document.getElementById(rtfEditorID + "_Frame").contentWindow;
                edit.focus();
                edit.document.execCommand("underline", false, "");
                edit.focus();
            });

            $("#" + rtfEditorID + "_FontFamily").change(function () {
                var edit = document.getElementById(rtfEditorID + "_Frame").contentWindow;
                edit.focus();
                edit.document.execCommand("fontname", false, $("#" + rtfEditorID + "_FontFamily").val());
                edit.focus();
            });

            $("#" + rtfEditorID + "_FontSize").change(function () {
                var edit = document.getElementById(rtfEditorID + "_Frame").contentWindow;
                edit.focus();
                edit.document.execCommand("fontsize", false, $("#" + rtfEditorID + "_FontSize").val());
                edit.focus();
            });

            $("#" + rtfEditorID + "_Frame").blur(function () {
                $("#" + thisControlID).val(frames[rtfEditorID + "_Frame"].document.body.innerHTML.toString());
            }); //update textbox control when editor loses focus

            //Give iFrame default content
            var newIFrame = frames[rtfEditorID + "_Frame"].document;
            newIFrame.open();
            newIFrame.close();
        });

        $.fn.SiteRtfEditorVal = function (htmlValue) {
            if (htmlValue == null | htmlValue == "undefined") {
                //Get
                try {
                    return frames[rtfEditorID + "_Frame"].document.body.innerHTML.toString();
                } catch (err) {
                    return "";
                }
            } else {
                //Set
                $("#" + rtfEditorID + "_Frame").load(function () {
                    $("#" + thisControlID).val(htmlValue);
                    frames[rtfEditorID + "_Frame"].document.body.innerHTML = htmlValue;
                });
                //If already loaded, it seems to skip the callback function, so we 'try' to set it one more time.
                try {
                    $("#" + thisControlID).val(htmlValue);
                    frames[rtfEditorID + "_Frame"].document.body.innerHTML = htmlValue;
                } catch(err) {
                }
            }
        } //rtfEditorHtml

    }); //return this.each
} //$.fn.SiteRtfEditor

})(jQuery); 
```

# vb.net - 我应该使用 SyncLock 还是 Interlocked？

> ID：12604136
> 
> 赞同：0
> 
> 时间：2012-09-26T14:34:28.297
> 
> 标签：vb.net, multithreading, asynchronous, synchronization, synclock

有人可以帮我理解同步锁语句是如何工作的吗？我知道这里还有其他一些关于同步锁的帖子，但我无法很好地理解答案。我正在尝试启动并运行一个简单的多线程示例，但遇到了麻烦。起初我尝试了以下代码。

```
Public Class Class1
    Public list As List(Of Integer) = New List(Of Integer)

    Public Sub addInt(ByVal i As Integer)
        SyncLock list
            list.Add(i)
        End SyncLock
    End Sub

    Public Sub MainLoop()
        While list.Count < 50
            SyncLock list
                For Each i As Integer In list
                    Debug.WriteLine(i.ToString())
                Next
            End SyncLock
        End While
    End Sub
End Class 
```

我有一个带有两个按钮的简单 winform。我使用第一个按钮创建 Class1 的 obj 并在新线程中启动 MainLoop 方法。我使用借调按钮来调用 addInt 方法。但是，该代码可能适用于一两次，然后锁定。在阅读了该表单的其他问题后，我意识到 synclock 语句的 lockobject 并没有像我最初想象的那样工作，它只是一个不应该更改的任意引用对象。我认为 syncLock 语句只是在将处理器控制权传递给新线程之前强制执行整个代码块。所以我尝试使用另一个锁定对象，但现在它只是锁定了。

```
Public Class Class1
    Private padLock As String = "PADLOCK"
    Public list As List(Of Integer) = New List(Of Integer)

    Public Sub addInt(ByVal i As Integer)
        SyncLock padLock
            list.Add(i)
        End SyncLock

    End Sub

    Public Sub MainLoop()
        While list.Count < 50
            SyncLock padLock
                For Each i As Integer In list
                    Debug.WriteLine(i.ToString())
                Next
            End SyncLock
        End While
    End Sub
End Class 
```

有人可以解释为什么上面的代码不起作用吗？在类似的帖子中，有人提到 Interlocked 类会很有用，但我不知道它是什么或如何使用它。一个简短的“傻瓜互锁类”解释也将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T17:14:06.913

好的，我想我找到了问题所在。我不认为我的线程死锁了我认为它只是让我的 Application.Run() 线程资源匮乏。当我在 MainLoop 方法中的 End SyncLock 之后添加 Thread.Sleep(500) 调用时，程序按预期工作。

# c++ - 如何使用 CHOLMOD 将元素添加到三元组矩阵？

> ID：12604142
> 
> 赞同：5
> 
> 时间：2012-09-26T14:34:36.250
> 
> 标签：c++, libraries, linear-algebra, sparse-matrix, suitesparse

谁能给我一个简单的例子，说明如何使用[CHOLMOD](http://www.cise.ufl.edu/research/sparse/cholmod/)将元素添加到三元组矩阵。

我尝试过这样的事情：

```
cholmod_triplet *A;
int k;

void add_A_entry(int r, int c, double x)
{
    ((int*)A->i)[k] = r;
    ((int*)A->j)[k] = c;
    ((double*)A->x)[k] = x;
    k++;
}

int main()
{
    k = 0;
    cholmod_common com;
    cholmod_start(&com);

    A = cholmod_allocate_triplet(202, 202, 202*202, -1, CHOLMOD_REAL, &com);
    add_A_entry(2, 2, 1.);
    add_A_entry(4, 1, 2.);
    add_A_entry(2, 10, -1.);

    cholmod_print_triplet(A, "A", &com);

    cholmod_finish(&com);
    return 0;
} 
```

但是，这不会向矩阵添加任何元素。我只是得到输出：

```
CHOLMOD triplet: A:  202-by-202, nz 0, lower.  OK 
```

当然，我尝试通过搜索和[CHOLMOD 文档](http://www.cise.ufl.edu/research/sparse/cholmod/CHOLMOD/Doc/UserGuide.pdf)找到解决方案，但没有找到任何帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-08T16:08:29.187

`cholmod_allocate_triplet()`sets `A->nzmax`，在您的情况下为 202*202。这只是定义了可用于添加三胞胎的空间。矩阵中的实际三元组数是`A->nnz`，由 设置为零`cholmod_allocate_triplet()`。

`A->nnz`应该使用而不是您的变量`k`。

蒂姆戴维斯（CHOLMOD作者）

# forms - Magento 管理表单重定向到 ?post? 上的仪表板？

> ID：12604143
> 
> 赞同：13
> 
> 时间：2012-09-26T14:34:38.213
> 
> 标签：forms, magento, post, admin

Magento 1.7.0.2：如果不完整，我正在尝试获取一个表单（在后端）以将文件（图片）上传到自身，或者如果完成，则向 adminhtml 控制器上传。我的 JavaScript 验证运行良好，但是当/如果我的表单已发布时，我将被重定向到仪表板。我已经包含了一个表单密钥，并且我的 url 是使用特殊密钥创建的，但我仍然无法通过 POST。谁能帮我？

phtml 模板文件：

```
<script type="text/javascript">
function postSelf(){
    form=document.getElementById('imgSel');
    form.action='<?php Mage::helper("adminhtml")->getUrl("*/*/")?>';
    form.submit();
}    
function validateForm(){

    var name=document.forms["imgSel"]["iName"].value;
    var file=document.forms["imgSel"]["file_upload"].value;
    if (!name){
        alert("You must have an Image Name!");
        postSelf();
    }
    else if (!file){
        alert("You must have a File to upload");
        postSelf();
    }
    else{
        form=document.getElementById('imgSel');
        form.submit();
    } 
}  
    </script>

    <?php Mage::log(Mage::helper("adminhtml")->getUrl("*/*/"), null, ‘layout.log’ );?>

<h3 class="icon-head head-adminhtml-imagegrid">Add an Image:</h3>

<form name="imgSel" id="imgSel" action="<?php Mage::helper("adminhtml")->getUrl("*/*/insert")?>" 
      enctype="multipart/form-data" method="POST">
<!--Form key-->
    <input type="hidden" name="form_key" value="<? echo Mage::getSingleton('core/session')->getFormKey(); ?>" />
    <?php Mage::log(Mage::getSingleton('core/session')->getFormKey(), null, ‘layout.log’ );?>

    <label for="iName">Image Name:</label>
    <input type="text" name="iName">

    <label for="style">Associated Style Name:</label>
    <select name="style">
    <?php
    echo '<option value="-1">None</option>';
    $styles = Mage::getModel('cartonplugin/cartonstyle')->getCollection();
    foreach($styles as $style){
        echo '<option value="'.$style->getId().'"';
        echo '>'.$style->getData('style_name').'</option> ';
    }
    echo '</select><br />';
    ?>
    <input type="hidden" name="MAX_FILE_SIZE" value="40" />
    Upload Image: <input type="file" name="file_upload" />
    <br>
    <!--<input type="submit" value="submit">-->
    <button onClick="validateForm()" class="UploadButton" >Upload</button>
</form> 
```

控制器：只有 insertAction() 函数适用于此表单。剩下的就是处理任何已经上传的图像的 gridview 东西。

```
<?php
class Nationwide_Newcart_Adminhtml_IndexController extends Mage_Adminhtml_Controller_Action
{
    protected function _initAction()
    {
        $this->loadLayout()->_setActiveMenu('igrid/set_time7')
                ->_addBreadcrumb('image Manager','image Manager');
       return $this;
     }

    public function indexAction()
    {
        $this->loadLayout();
        $this->renderLayout();

        //var_dump(Mage::getSingleton('core/layout')->getUpdate()->getHandles());
     }

      public function newAction()
    {
        $this->_forward('edit');
    }

    public function editAction()
    {
        $stId = $this->getRequest()->getParam('id');
        $model = Mage::getModel('newcart/imagemodel')->load($stId);
        if ($model->getId() || $stId == 0)
           {
             Mage::register('image_data', $model);
             $this->loadLayout();
             $this->_setActiveMenu('igrid/set_time7');
             $this->_addBreadcrumb('image Manager', 'image Manager');
             $this->_addBreadcrumb('Image Description', 'Image Description');
             $this->getLayout()->getBlock('head')
                  ->setCanLoadExtJs(true);
             $this->_addContent($this->getLayout()
                  ->createBlock('newcart/adminhtml_imagegrid_edit'))
                  ->_addLeft($this->getLayout()
                  ->createBlock('newcart/adminhtml_imagegrid_edit_tabs')
              );
             $this->renderLayout();
           }
           else
           {
                 Mage::getSingleton('adminhtml/session')
                       ->addError('That Image does not exist');
                 $this->_redirect('*/*/');
            }
       }

    public function saveAction()
    {
         if ($this->getRequest()->getPost())
         {
           try {
                $postData = $this->getRequest()->getPost();
                $model = Mage::getModel('');
                //Mage::log($this->getRequest()->getParam('id'), null, ‘layout.log’ );
                if( $this->getRequest()->getParam('id') <= 0 )
                    $model->setCreatedTime(
                        Mage::getSingleton('core/date')
                                ->gmtDate()
                    );
                $model
                    //->addData($postData) //DO NOT! Includes a form key!
                    ->setUpdateTime(
                            Mage::getSingleton('core/date')
                            ->gmtDate())
                    ->setId($this->getRequest()->getParam('id'));
                $model->setData('image_name', $postData['image_name']);
                $model->setData('style_name', $postData['style_name']);
                $model->save();

                Mage::getSingleton('adminhtml/session')
                            ->addSuccess('successfully saved');
                Mage::getSingleton('adminhtml/session')
                                ->settestData(false);
                $this->_redirect('*/*/');
                return;
          } catch (Exception $e){
                Mage::getSingleton('adminhtml/session')
                                  ->addError($e->getMessage());
                Mage::getSingleton('adminhtml/session')
                 ->settestData($this->getRequest()
                                    ->getPost()
                );
                $this->_redirect('*/*/edit',
                            array('id' => $this->getRequest()
                                                ->getParam('id')));
                return;
                }
              }
              $this->_redirect('*/*/');
            }

    public function deleteAction()
    {
        if($this->getRequest()->getParam('id') > 0)
        {
            try
            {
                $model = Mage::getModel('newcart/imagemodel');
                $model->setId($this->getRequest()
                                    ->getParam('id'))
                            ->delete();
                Mage::getSingleton('adminhtml/session')
                            ->addSuccess('successfully deleted');
                $this->_redirect('*/*/');
                }
                catch (Exception $e)
                {
                        Mage::getSingleton('adminhtml/session')
                            ->addError($e->getMessage());
                        $this->_redirect('*/*/edit', array('id' => $this->getRequest()->getParam('id')));
                }
         }
            $this->_redirect('*/*/');
    }

    public function insertAction(){
        $postData = $this->getRequest()->getPost();
        Mage::log($postData, null, ‘layout.log’ );

        //post checking
        if(empty($postData)){

        }

        $this->_redirect('*/*/');
    }
} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-27T09:27:43.437

您需要检查几件事：

1.  你在`echo`这里错过了：

    ```
    action="<?php Mage::helper("adminhtml")->getUrl("*/*/insert")?>" 
    ```

    应该

    ```
    action="<?php echo Mage::helper("adminhtml")->getUrl("*/*/insert")?>" 
    ```

2.  确保您只使用普通的 PHP 标记 ( `<?php ?>`)。短标签已被证明是一种不好的做法，所以改变

    ```
    <input type="hidden" name="form_key" value="<? echo Mage::getSingleton('core/session')->getFormKey(); ?>" /> 
    ```

    到

    ```
    <input type="hidden" name="form_key" value="<?php echo Mage::getSingleton('core/session')->getFormKey(); ?>" /> 
    ```

除此之外，请确保使用浏览器中的*浏览源*功能将所有数据正确填充到 HTML 中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-04T07:52:55.347

尝试将此字符串添加到您的表单中。

```
<input type="hidden" value="<?php echo Mage::getSingleton('core/session')->getFormKey()?>" name="form_key"/> 
```

这会为请求创建一个隐藏参数，其中包含 Magento 使用的 form_key。此 form_key 用于确保提交的表单来自您的 magento 实例（作为安全措施）。如果不提供此 form_key，您的表单将无法工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T20:03:19.350

埃里克，你的 .phtml 看起来不错......现在你需要看看你的表单的操作 url 是否指向正确的位置，然后像这样做你的控制器：

```
class controller_name extends Mage_Core_Controller_Front_Action{ // must extends this one for frontend controllers and Mage_Adminhtml_Controller_Action to backend controller.
public function insertAction(){
    $_POST['elementName']; //to this to get post information. 
    $this->getRequest()->getPost('elementName'); //or this way.
}
} 
```

# javascript - 使用文本区域作为条目的 raphael 文本操作

> ID：12604145
> 
> 赞同：0
> 
> 时间：2012-09-26T14:34:38.853
> 
> 标签：javascript, textarea, raphael

我正在尝试使用文本区域来收集用户的输入，然后当用户单击完成按钮时。我抓取 textarea 值并将其插入 Raphael 文本对象。很容易。但是，我在文本区域中输入一个段落后意识到发生了许多事情。这是发生的几件事。

1.  尽管在文本区域中它看起来像是在多行上，但实际上只是将它们全部放在一行上。（想了两秒才明白）

2.  当我按回车键时，它会将文本放到一个新行上，但如果我按回车键并在文本上方添加多个新行，它只会忽略它们。

所以基本上我要问的是，有没有人知道最好的方式，或者任何更一致和有效的方式来获取 textarea 文本并正确格式化它以在 Raphael 中看起来相同。提示技巧将不胜感激。

# sql - 表 B 范围内表 A 值的 SQL 连接

> ID：12604146
> 
> 赞同：15
> 
> 时间：2012-09-26T14:34:40.860
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有两张桌子，可以在随附的图片中看到。

*表 A*包含**部门**、**月份**和**平均值**。

*表 B*包含**Month**、**Year**、**RangeStart**、**RangeEnd**和**Color**。

如果您查看*表 B*的屏幕截图，您将看到每个月都有一个绿色、黄色、橙色和红色值。你也有一个范围。

**我需要的.........**

我需要一个名为“颜色”的*表 A*上的新列。在本专栏中，我需要绿色、黄色、橙色或红色。将哪种颜色分配给月份的决定因素将是“平均”列。

例如：

5 月平均值的 DepartmentA 等于`0.96` 在参考*表 B*时，我可以看到第 8`0.75+`行将是适合的范围。因此，红色是我想放在*A 表*中 Mays 平均值旁边的颜色。

我已经将 RangeEnd 保留为每月的最高范围，因为它基本上是 NULL `75+`，任何大于`0.75`这里的插槽。

谁能指出我不太耗时的正确方向。

![在此处输入图像描述](../Images/0a7cdc5ac27f1dfdaf30a3a9c26f840c.png)

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-26T14:40:45.773

你可以直接使用它：

```
select *
from table a
    join table b
        on a.month = b.month
           and a.average between b.rangestart and isnull(b.rangeend,10000) -- 100000 = greater than max value 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T14:39:48.160

所以你真的想要

```
select a.*,b.colour from a 
left join table b on a.month=b.month 
 and ((b.rangeend is null and a.average>b.rangestart) 
    or (a.average between b.rangestart and b.rangeend)) 
```

我不保证它会起作用，因为我没有时间输入一些表格和数据

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T14:54:11.590

如果要将新列添加到 TableA，然后使用表 B 中的值对其进行更新，这是最终的 UPDATE：

```
UPDATE TableA
SET Colour = B.Colour
FROM TableA A
INNER JOIN TableB B ON B.Month = A.Month AND B.RangeStart < A.Average AND (B.RangeEnd IS NULL OR B.RangeEnd > A.Average) 
```

如果表 B 中可能没有给定月份的数据和表 A 中的平均值，则应使用 LEFT OUTER JOIN 并提供默认值。

```
UPDATE TableA
SET Colour = ISNULL(B.Colour, N'SomeColour')
FROM TableA A
LEFT OUTER JOIN TableB B ON B.Month = A.Month AND B.RangeStart < A.Average AND (B.RangeEnd IS NULL OR B.RangeEnd > A.Average) 
```

此外，您应该检查表 B 中的数据是否取决于年份，就像表 A 似乎发生的那样。

在这种情况下，您应该将此字段添加到 Join 的 On 子句中：

```
UPDATE TableA
SET Colour = B.Colour
FROM TableA A
INNER JOIN TableB B ON B.Year = A.Year AND B.Month = A.Month AND B.RangeStart < A.Average AND (B.RangeEnd IS NULL OR B.RangeEnd > A.Average) 
```

在运行更新之前，您可以通过首先运行此查询来检查您是否获得了所需的值：

```
SELECT Department, A.Month, Average, B.Colour
FROM @tableA A
INNER JOIN @tableB B ON B.Month = A.Month AND B.RangeStart < A.Average AND (B.RangeEnd IS NULL OR B.RangeEnd > A.Average) 
```

希望这可以帮助 ：）

# php - codeigniter - 如何创建两个“共享”输入字段的表单

> ID：12604147
> 
> 赞同：1
> 
> 时间：2012-09-26T14:34:43.547
> 
> 标签：php, jquery, html, codeigniter

我想知道如何解决我有一个文本框和两个按钮的问题。每个按钮都需要文本框中的相同数据来完成其任务。

一个按钮用于更新他们正在查看的现有记录（使用文本框中的新值），另一个按钮用于添加新记录（同样，使用文本中的新值）。

我的一个想法是使用 jquery 更新隐藏的文本框，当用户修改可见文本框时，该文本框会更新。

所以是这样的：（这只是伪代码......）

```
 <form name="form1" method="post" action="controller1/method1">
     <input type=text name=visibleTextBoxForForm1></input>
     <button type=submit value=UPdate>
 </form>
 <form name="form2" method="post" action="controller2/method2">
     <input type=hidden name=hiddenTextBoxforForm2></input>
     <button type=submit value=New>
 </form>
 <script>
        $('#visibleTextBoxForForm1').live('change', function() {
             //update a hidden textbox in form2 with value of this textbox.
         });
 </script> 
```

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T18:19:18.877

或者，您可以通过 JQuery 来完成。为每个按钮绑定一个 clicklistener，并在点击时为表单提供正确的 URL。

这是一些快速代码...您必须更正正确的 jquery 查询以获取正确的元素。

```
<form name="form1" method="post">
   <input type=text name=visibleTextBoxForForm1></input>
   <button type=button value=Update>
   <button type=button value=New>
</form>

<script>
    $('update').click(function() {
          $(form1).attr('action', <update url>).submit();
    });

    $('new').click(function() {
          $(form1).attr('action', <new url>).submit(); 
    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T14:41:24.623

如果这是唯一的字段，那么只需有一个带有两个按钮的表单，并根据用于提交它的按钮的名称来处理该文本数据。

```
<form name="form1" method="post" action="controller1/method1">
    <input type="text" name="text" />
    <input type="submit" name="insert" value="Insert New Data" />
    <input type="submit" name="update" value="Update Existing Data" />
</form> 
```

PHP（不是 CodeIgniter，因为我不熟悉那个框架）：

```
if(isset($_POST['insert'])) {
    // insert $_POST['text']
} else if (isset($_POST['update'])) {
    // update $_POST['text']
} else {
    // error
} 
```

# jquery - 使用 jQuery 隐藏封闭的 div

> ID：12604153
> 
> 赞同：1
> 
> 时间：2012-09-26T14:35:01.497
> 
> 标签：jquery

我有一个分步系统，根据您所处的步骤隐藏和显示 div，这里是 jQuery：

```
<script type="text/javascript">
jQuery(function($) {
$(document).ready(function() {    

    // prepend a 'previous' button to all form-rows except the first
    $('<button>').addClass('previous').appendTo($('.form-row').not(':first'));

    // hide all form-rows, but not the first one
    $('.form-row').not(':first').hide();

    // hide on last step
    $('button.next').last().hide();

    // add the submit button to the last form-row
    $('<input>').addClass('submit').prop('type', 'submit').val('My Dashboard').appendTo($('.form-row:last'));

    // handle the previous button, we need to use 'on' here as the
    // previous buttons don't exist in the dom at page load
    $('.form-row').on('click', 'button.previous', function(e) {
        e.preventDefault();
        $(this).parent('div.form-row').hide().prev('div.form-row').show();
    });

    $('button.next').click(function(e) {
        // prevent the next buttons from submitting the form
        e.preventDefault();
        // hide this form-row, and show the next one
        $(this).parent('div.form-row').hide().next('div.form-row').show();
    });    

});
});
</script> 
```

这是我的html：

```
<div class="form-row">
  <h2 style="float:left;margin-left:7px;">
    <?php the_title(); ?>
  </h2>
  <h2 style="float:right;"><?php echo $counter; ?> of <?php echo $total; ?></h2>
  <div class="clear"></div>
  <div id="module-area" style="margin-top:0px!IMPORTANT;">
    <div id="modules-top"></div>
    <div id="modules-repeat">
      <p class="training"><?php echo the_sub_field('introduction'); ?></p>
      <?php if(get_sub_field('training_images')): ?>
      <?php while(has_sub_field('training_images')): ?>
      <img class="training" src="<?php echo the_sub_field('image'); ?>" />
      <?php endwhile; ?>
      <?php endif; ?>
      <p class="training"><?php echo the_sub_field('conclusion'); ?></p>
      <button class="next"></button>
      <div class="clear"></div>
    </div>
    <div style="margin-bottom:5px;" id="modules-bottom"></div>
  </div>
</div> 
```

这一直有效，直到我在`<div class="form-row">`. 我怎样才能让它也隐藏封闭的div？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:44:35.490

尝试使用`parents('div.form-row')`而不是`parent('div.form-row')`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T14:49:49.163

我认为您正在寻找[.closest()](http://api.jquery.com/closest/)方法。

尝试：

```
$('button.next').click(function(e) {
    e.preventDefault();

    var _parent = $(this).closest('div.form-row');

    _parent.hide();
    _parent.next().show();
}); 
```

当涉及到长 jQuery 链接以提高可读性时，我喜欢将事情分解。

# php - PHP中具有不同div类的循环图像

> ID：12604154
> 
> 赞同：0
> 
> 时间：2012-09-26T14:35:03.983
> 
> 标签：php, html, css, loops

假设我有如下代码

```
<?php 
$sql = "SELECT * FROM images";
$query = mysql_query($sql);

while($row = mysql_fetch_assoc($query)) {
    echo '<div class="single">';
    echo '<img src="'.$row['image'].'" alt="'.$row['title'].' " />';
    echo '</div>';
} 
?> 
```

我想在每组 5 个图像中附加`first`和`last`div 类`<div class="single">`，即

```
<div class="single first">
    <img src="image1.jpg" alt="title1" />
</div>

<div class="single">
    <img src="image2.jpg" alt="title2" />
</div>

<div class="single">
    <img src="image3.jpg" alt="title3" />
</div>

<div class="single">
    <img src="image4.jpg" alt="title4" />
</div>

<div class="single last">
    <img src="image5.jpg" alt="title5" />
</div> 
```

如何通过循环做到这一点，请帮助，

谢谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T14:39:09.337

使用[模数](http://en.wikipedia.org/wiki/Modular_arithmetic)：

```
<?php 
$sql = "SELECT * FROM images";
$query = mysql_query($sql);

$i = 0;
$class = "";

while($row = mysql_fetch_assoc($query)) {

    if($i % 5 == 0){
        $class = 'first';
    }else if($i % 5 == 4){
        $class = 'last';
    }else{
        $class = "";
    }

    echo '<div class="single ' . $class . '">';
    echo '<img src="'.$row['image'].'" alt="'.$row['title'].' " />';
    echo '</div>';

    $i++;
} 
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T14:38:03.297

```
<?php 
$sql = "SELECT * FROM images";
$query = mysql_query($sql);

$x=0; 
while($row = mysql_fetch_assoc($query)) {
    $x++;
    if ( $x == 1 ) { $c = ' first'; } 
        elseif ( $x == 5 ) { $c = ' last'; }
        else { $c = ''; }

    echo '<div class="single' . $c . '">';
    echo '<img src="'.$row['image'].'" alt="'.$row['title'].' " />';
    echo '</div>';
} 
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T14:39:04.580

这个怎么样：

```
$index = 0;
while($row = mysql_fetch_assoc($query)) {
    $classes = 'single';
    switch ($index % 5) {
      case 0:
        $classes .= ' first';
        break;
      case 4:
        $classes .= ' last';            
        break;
    }
    echo <<<HTML
<div class="$classes">
  <img src="{$row['image']}" alt="{$row['title']}" />
</div>;
HTML;

    $index++;
} 
```

作为旁注，您是否考虑过使用 CSS`nth-child`属性？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T14:39:04.937

您需要计算您的迭代次数，并使用模函数来获得 5 的部分：

```
$sql = "SELECT * FROM images";
$query = mysql_query($sql);

$i = 0;
while($row = mysql_fetch_assoc($query)) {
    if($i % 5 == 0)
      echo '<div class="single first">';
    else if($i % 5 == 4) 
      echo '<div class="single last">';
    else
      echo '<div class="single">';
    echo '<img src="'.$row['image'].'" alt="'.$row['title'].' " />';
    echo '</div>';
    $i++;
} 
```

# java - 使用 Maven 和 maven-bundle-plugin 在 JAR 清单中添加 SVN 修订时出错

> ID：12604161
> 
> 赞同：3
> 
> 时间：2012-09-26T14:35:27.190
> 
> 标签：java, svn, maven, buildnumber-maven-plugin, maven-bundle-plugin

我正在尝试在我的项目清单中添加 SVN 修订号。为此，我使用了 Maven 内部版本号插件，并在我的 Super POM 中添加了以下几行：

```
<!-- Gets the SVN revision number -->
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>buildnumber-maven-plugin</artifactId>
            <version>1.1</version>
            <executions>
                <execution>
                    <phase>validate</phase>
                    <goals>
                        <goal>create</goal>
                    </goals>
                </execution>
            </executions>
            <configuration>
                <doCheck>false</doCheck>
                <doUpdate>false</doUpdate>
                <providerImplementations>
                    <svn>javasvn</svn>
                </providerImplementations>
            </configuration>
        </plugin>
        <!-- Add the SVN revision number in the manifest (works on Hudson only) -->
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-jar-plugin</artifactId>
            <version>2.1</version>
            <configuration>
                <archive>
                    <manifest>
                        <addDefaultImplementationEntries>true</addDefaultImplementationEntries>
                    </manifest>
                    <manifestEntries>
                        <Implementation-Build>${buildNumber}</Implementation-Build>
                    </manifestEntries>
                </archive>
            </configuration>
        </plugin> 
```

注意配置：

```
<doCheck>false</doCheck>
<doUpdate>false</doUpdate> 
```

我是故意这样做的，因为如果我有本地修改，“doCheck”会阻止我编译（我想在提交工作之前编译和测试）。

“doUpdate”对我来说也是一个问题，因为我不一定想从存储库更新代码。与上述相同的原因，我想在提交之前进行本地测试（并可能解决冲突）。

我的问题是，在清单中，出现的是：

```
Implementation-Build: ${buildNumber} 
```

因此该变量不会被解释。我错过了什么？

谢谢

**编辑：** 问题实际上出在 maven-bundle-plugin 上。我在我的项目中使用它来生成 OSGi 包。

因此，项目的 POM 打包如下：

```
<packaging>bundle</packaging> 
```

代替：

```
<packaging>jar</packaging> 
```

我猜这会与 Maven 生命周期相混淆。当我删除 maven-bundle-plugin 时，一切正常。但我无法删除它，因为我的应用程序是 OSGi 应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T09:43:59.327

问题是混合 maven-bundle-plugin 和 maven-jar-plugin 来操纵 Jar MANIFEST。

解决方案：

在超级 POM 中：

```
<build>
    <pluginManagement>
        <plugins>
            <plugin>
                <groupId>org.apache.felix</groupId>
                <artifactId>maven-bundle-plugin</artifactId>
                <version>2.3.7</version>
                <extensions>true</extensions>
            <configuration>
                <instructions>
                    <Implementation-Build>${buildNumber}</Implementation-Build>
                    </instructions>
            </configuration>
            </plugin>
            ...
        </plugins>
    </pluginManagement>
    <plugins>
        <!-- Gets the SVN revision number -->
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>buildnumber-maven-plugin</artifactId>
            <version>1.1</version>
            <executions>
                <execution>
                <phase>validate</phase>
                <goals>
                <goal>create</goal>
                </goals>
            </execution>
            </executions>
            <configuration>
            <doCheck>false</doCheck>
            <doUpdate>false</doUpdate>
            <providerImplementations>
                <svn>javasvn</svn>
            </providerImplementations>
            </configuration>
        -</plugin>
    </plugins>
</build> 
```

就是这样！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-17T18:20:23.723

而不是使用配置/存档尝试使用配置/指令来添加你的 ${buildNumber}，像这样：

```
<plugin>
   <groupId>org.apache.felix</groupId>
   <artifactId>maven-bundle-plugin</artifactId>
   <extensions>true</extensions>
   <configuration>
      <instructions>
         <Implementation-Build>${buildNumber}</Implementation-Build>
      </instructions>
   </configuration>
</plugin> 
```

使用您的方法和 Maven 2，这一切都奏效了。我们切换到 Maven 3，maven-bundle-plugin 不满意（与您的行为相同）。这种方法成功了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T18:36:20.257

您可以使用[Maven 插件管理](http://maven.apache.org/pom.html#Plugin_Management)。

在超级 pom 中添加插件定义，`<pluginManagement/>`如下所示：

```
<project>
    ...
    <build>
        <pluginManagement>
            <plugins>
                <plugin>
                    <groupId>org.codehaus.mojo</groupId>
                    <artifactId>buildnumber-maven-plugin</artifactId>
                    <version>1.1</version>
                    <executions>
                        <execution>
                            <phase>validate</phase>
                            <goals>
                                <goal>create</goal>
                            </goals>
                        </execution>
                    </executions>
                    <configuration>
                        <doCheck>false</doCheck>
                        <doUpdate>false</doUpdate>
                        <providerImplementations>
                            <svn>javasvn</svn>
                        </providerImplementations>
                    </configuration>
                </plugin>
                <!-- Add the SVN revision number in the manifest (works on Hudson only) -->
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-jar-plugin</artifactId>
                    <version>2.1</version>
                    <configuration>
                        <archive>
                            <manifest>
                                <addDefaultImplementationEntries>true</addDefaultImplementationEntries>
                            </manifest>
                            <manifestEntries>
                                <Implementation-Build>${buildNumber}</Implementation-Build>
                            </manifestEntries>
                        </archive>
                    </configuration>
                </plugin>
            </plugins>
        </pluginManagement>
    </build>
    ...
</project> 
```

然后在要使用这些现在配置的插件的项目中，将其添加到 poms 中：

```
<project>
    ...
    <build>
        <plugins>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>buildnumber-maven-plugin</artifactId>
            </plugin>
            <plugin>
                <artifactId>maven-jar-plugin</artifactId>
            </plugin>
        </plugins>
    </build>
    ...
</project> 
```

那应该为你解决。

# pdf - 使用 AcroForm 技术提交 PDF 表单时的数据编码

> ID：12604171
> 
> 赞同：4
> 
> 时间：2012-09-26T14:35:50.417
> 
> 标签：pdf

当我创建包含 AcroForm 格式（PDF 字典，无 XFA）的文本字段的 PDF 表单（例如使用 Acrobat），并将数据提交到服务器时，如何指定/检索将使用的编码？

例如。当我提交中文字形“测试”（测试）时，我在服务器端收到以下标头和内容：

```
accept: application/x-ms-application, image/jpeg, application/xaml+xml, image/gif, image/pjpeg, application/x-ms-xbap, application/vnd.ms-excel, application/vnd.ms-powerpoint, application/msword, */*
content-type: application/x-www-form-urlencoded
content-length: 23
acrobat-version: 10.1.4
user-agent: Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1; WOW64; Trident/4.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; MDDC; .NET4.0C; AskTbCLA/5.15.1.22229)
accept-encoding: gzip, deflate
connection: Keep-Alive
Song=%b2%e2%ca%d4&Test= 
```

除了 x-www-form-urlencoded 之外，没有对编码的引用。这两个字形表示为四个字节：B2 E2 CA D4。经过一番调查，我知道 B2E2 是第一个字形的 GBK 值，而 CAD4 是第二个字形的 GBK 值，但我无法从请求标头中得出这个。

总是GBK吗？我想通过在 PDF 的字典中设置特定键来更改数据编码，但似乎没有。例如：我想确保 PDF 始终发送 Unicode 字符而不是 GBK。

请注意，我已经通过更改文本字段的默认字体（和编码）进行了试验。我还在 ISO-32000-1 中搜索了字段中的编码，但我发现的只是一种为复选框定义非拉丁字符的方法，以及有关 FDF 文件编码的一些信息。没有一个回答我的问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-16T13:27:49.203

我刚刚自己找到了我的主要问题的答案。我在 ISO-32000-1 或 ISO-32000-2 草案中没有找到任何东西，但是研究了 Acrobat JavaScript 参考，我找到了`cCharset`该`submitForm()`方法可用的参数。该参数定义：

> 提交的值的编码。字符串值为 utf-8、utf-16、Shift-JIS、BigFive、GBK 和 UHC。如果未通过，则应用当前的 Acrobat 行为。对于基于 XML 的格式，使用 utf-8。对于其他格式，Acrobat 会尝试为要提交的值查找最佳主机编码。XFDF 提交忽略此值并始终使用 utf-8。

换句话说：在我的情况下，使用 GBK 是因为它最适合提交汉字。但是，可以通过使用`submitForm()`适当值的 JavaScript 方法来强制使用 UTF-8。

基于这个问题，我已经要求 ISO 委员会在 ISO-32000-2 中解决这个问题。结果，在第 12.7.6.2 节中标题为“*特定于提交表单操作的附加条目”的表中添加了一个额外的可能条目：*

> **字符集**：字符串
> 
> （可选；可继承）可能的值包括：*utf-8*、*utf-16*、 *Shift-JIS*、*BigFive*、*GBK*或*UHC*。

从 PDF 2.0 开始，这个问题将不再存在。

**更新：**我的建议是 ISO 32000-2（又名 PDF 2.0）：

[![在此处输入图像描述](../Images/73982e903ef5825fb283e06435c5ff02.png)](https://i.stack.imgur.com/qTqeI.png)

ISO 32000-1中不存在**CharSet键；**它是在 ISO 32000-2 中引入的。

# javascript - 如何在旋转javascript后获取裁剪坐标

> ID：12604174
> 
> 赞同：4
> 
> 时间：2012-09-26T14:35:56.433
> 
> 标签：javascript, math

我需要在旋转后保留坐标信息，并且正在努力解决必要的数学问题。

我有一张带有某些裁剪坐标的图像。这些坐标以以下对象的形式给出：

```
{
      h:  139.68333435058594,
      w:  139.68333435058594,
      x:  60.31666564941406,
      x2: 200,
      y:  80,
      y2: 219.68333435058594
} 
```

然后我正在旋转这个图像（它是一个画布元素），但我希望新坐标能够准确地反映旋转，保持原始作物完好无损。

例如，如果选择了 400x400 图像的左上角，则返回的坐标将为 x:0、y:0、x2:200、y2:200。向左旋转 -90 度时，新坐标应为：x:0, y:200, x2:200, y:400。

我将如何编写一个函数来计算这些新坐标？

非常感谢。

为了帮助正确地可视化这个问题，我提供了一张快速图片：

![在此处输入图像描述](../Images/0b48752179e25cb9d9d8189bf88b63c0.png)

**编辑：**上图中的大方块是我正在旋转的照片。它围绕其中点旋转，并且裁剪坐标相对于图像本身。旋转时，实际坐标平面在重新计算新坐标之前被重置，这意味着图像/容器的左上角将始终为 0,0。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T14:54:27.047

该函数使用[旋转矩阵](http://en.wikipedia.org/wiki/Rotation_matrix#Rotations_in_two_dimensions)算法

```
function rotate(x, y, xm, ym, a) {
    var cos = Math.cos, sin = Math.sin,
    a = a * Math.PI / 180, // Convert to radians 
    // Subtract midpoints, so that midpoint is translated to origin
    // and add it in the end again
    xr = (x - xm) * cos(a) - (y - ym) * sin(a)   + xm,
    yr = (x - xm) * sin(a) + (y - ym) * cos(a)   + ym;

    return [xr, yr];
}

alert(rotate(0, 0, 200, 200, -90));​ // 0,400 
```

[JSFiddle](http://jsfiddle.net/5AGHR/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T14:52:28.840

左上角将是：

```
0, heightImg - heightCrop 
```

右下角将是：

```
widthCrop, widthImg 
```

这是假设作物在旋转前与左上角紧密贴合。

我稍后会计算出一般数学。

将点 (A) 绕点 (B) 旋转角度 (C) 的公式如下：

```
N.x = (A.x-B.x) * cos(c) - (A.y-B.y) * sin(c) + B.x
N.y = (A.y-B.y) * cos(c) + (A.x-B.x) * sin(c) + B.y 
```

我们可以减少这些，因为我们旋转了 90 度。[cos(90) = 0, sin(90)=1]

```
N.x = 0 - (A.y-B.y) + B.x = B.x + B.y - A.y
N.y = 0 + (A.x-B.x) + B.y = B.y + A.x - B.x 
```

所以使用这个公式和左上角的坐标会给你左下角的点。（x 是正确的，但您必须减去裁剪区域的高度才能获得新左上角的正确 y 值）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T14:56:42.597

围绕 (0,0) 点（在您的坐标系中）逆时针旋转 90 度的矩阵是

```
 0 1
 -1 0 
```

在代码中转换为：

```
new_x = y; new_y = -x; 
```

但是您想围绕 (200,200) 旋转，因此您需要在旋转之前移动点，然后再将它们移回。

```
new_x = (y-200) + 200;
new_y = -(x-200) + 200; 
```

简化，这只是

```
new_x = y; new_y = 400-x; 
```

您应该能够像这样转换所有裁剪坐标。

# jquery - jquery-ui 对话框表没有出现，但是 ul 出现了

> ID：12604179
> 
> 赞同：3
> 
> 时间：2012-09-26T14:36:07.713
> 
> 标签：jquery, jquery-ui, datatables

我有一个简单的网页，对于每一行数据，我可以弹出一个带有该行详细信息的 jQuery UI 对话框。由于子查询中可以有多行，因此表是最佳选择。

jQuery 非常简单：

```
$('#dialog').dialog(
    {   
        autoOpen: false, 
        title: "Backup Job Detail",
        width: 400,
        height: 450
        }
);

$('.row').click( function(){
    $('#dialog').dialog("open");
}); 
```

（生成的）HTML 如下所示：（使用行内容更新）

```
<html>
    <head>
        <title>NAS Execution Groovy Servlet</title>
        <script type='text/javascript' src='js/jquery.js'></script>
        <script type='text/javascript' src='js/jquery-ui-1.8.23.custom.min.js'></script>
        <script type='text/javascript' src='js/jquery.dataTables.min.js'></script>
        <script type='text/javascript' src='js/executions.js'></script>
        <link rel='stylesheet' type='text/css' href='css/jquery.dataTables_themeroller.css'></link>
        <link rel='stylesheet' type='text/css' href='css/jquery-ui.css'></link>
        <link rel='stylesheet' type='text/css' href='css/nas.css'></link>
</head>
<body>
    <div id='results' class='execution-results'>
        <p id='rpt-header'>
           <span class='rpt-header-txt'>Backup Schedule Report for </span>
           <span class='rpt-header-asset'>MyAsset</span>
        </p>
        <table id='nas-table'>
            <thead>
              <tr class='table-header'>
                    <th>Schedule Name</th>
                    <th>Backup Product</th>
                    <th>Size Mb</th>
                    <th>Start Time</th>
                    <th>Duration</th>
                    <th>Expiration Date</th>
                    <th>Wed 14</th>
             </tr>

            </thead>
        <tbody>
          <tr class='row'>
              <td class='row-data'>schedule_name</td>
              <td class='row-data'>backupProduct</td>
              <td id='size-mb' class='row-data'>sizeStr</td>
              <td class='row-data'>start_time</td>
              <td class='row-data'>duration secs</td>
              <td class='row-data'>expiration_date</td>
              <td class='row-center'>
                <a class='tooltip' href='#'>
                  <img id='success-fail' src='img/partial.gif'></img>
                  <span class='classic'>Message returned is : message_text</span>
                </a>
             </td>
        </tr>
              <div id='dialog'>
                <table class='inner-table'>
                  <thead>
                    <tr>
                      <th>JOB_TYPE_NAME</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>Incr Backup</td>
                    </tr>
                  </tbody>
                </table>
              </div>
          </tbody>
        </table>
      </div>
   </body>
</html> 
```

对话框永远不会出现，表格显示在最后。我缩短了要进入对话框的表格的大小，以防万一大小是一个问题，正如一位评论者发布的链接可能暗示的那样。

如果我用列表 (ul) 替换表格，它的行为就完美了。

有什么想法吗？

布赖恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T01:42:42.317

将对话框 DIV 移动到“结果”DIV 下。你不能把你的对话 DIV 放在你的桌子中间，就像你有它一样。

```
<div id='results' class='execution-results'>
...
</div>

<div id='dialog'>
  <table class='inner-table'>
  <thead>
  <tr>
    <th>JOB_TYPE_NAME</th>
  </tr>
  </thead>

  <tbody>
  <tr>
    <td>Incr Backup</td>
  </tr>
  </tbody>
</table>
</div> 
```

# javascript - ios app后退按钮不保存cookie

> ID：12604185
> 
> 赞同：1
> 
> 时间：2012-09-26T14:36:39.503
> 
> 标签：javascript, ios5, ios-simulator, ios4

该功能允许我们在我们的 ios 应用程序上设置特定 cookie 时在语言翻译之间来回切换。目前使用的代码适用于所有浏览器，您可以使用页脚中的两个按钮浏览应用程序并切换 cookie。

一旦我们在 ios 模拟器上测试了功能，就会出现以下问题。当我们在一个页面上并且例如我们选择了英语时，如果我们转到下一页并选择日语，则页面将重新加载日语翻译，然后当我们按下后退按钮转到上一页时，它会恢复为英语并且不再设置cookie。

**返回键：**

```
<div onclick="javascript:createCookie('previousPagePath',location.pathname,(1/24/60)); history.go(-1);">
    <img src="<!--{$rewriteBase}-->images/common/previous.png" alt="" />
    <div>
        <span class="langTranslate">Back//戻る</span>
    </div>
</div> 
```

下面是用于创建 cookie 的 javascript，默认情况下它以英语 ('0') 开头。日语将是（'1'）。

**Javascript：**

```
// language selection

$(function() {
    if(readCookie('langSelect') == null) {
    // create cookie and set it to english by default
    createCookie('langSelect', '0', 1);
}
// set selected language
$('.langBtn').click(function() {
    var selectedLangCode = $(this).attr('data-lang-code');
    createCookie('langSelect', selectedLangCode, 1);
    location.reload();
});
}); 
```

每个页脚中都包含以下 Javascript 您将看到前几行用于将英语与日语分开，因为它出现在我们的数据库中，如下所示：（英语翻译//日语翻译）

```
<script type="text/javascript">
// set current language
$('.langTranslate').each(function() {
    var label = $(this).text(),
    currentLang = parseInt(readCookie('langSelect'), 10),
    delimiter = '//';
    if(label.length >= 4 && label.indexOf(delimiter) != -1) {
        label = label.split(delimiter);
            if(typeof label[currentLang] !== 'undefined') {
                $(this).text(label[currentLang]);
            }
        }
});
</script> 
```

cookie 在任何情况下都会保存在浏览器中，但是当我们按下 ios 上的后退按钮时会被删除，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T03:51:26.073

一旦我们将 Ipad 单元更新到 IOS 6，这个问题就得到了解决

# linq - 是否有任何已知的支持 Find 方法的 IBIndingList 实现，适用于 LINQ？

> ID：12604190
> 
> 赞同：0
> 
> 时间：2012-09-26T14:36:50.817
> 
> 标签：linq, data-binding, bindingsource

似乎只有*DataSet*、*DataTable*和*DataView*可以在您想使用时用作源`BindingSource.Find`。我将*IQueryable*和*IEnumerable*绑定到我的绑定源，但非常希望享受该`BindingSource.Find`方法的“便利性”，而无需自己编写大量代码，因为时间至关重要。

有谁知道现有的实现，或者至少详细的“如何”文章可以帮助我实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T13:29:10.240

您可以使用[Type.GetProperty](http://msdn.microsoft.com/en-us/library/kz0a8sxy.aspx "Type.GetProperty 方法")和[Array.FindIndex](http://msdn.microsoft.com/en-us/library/03y7c6xy.aspx "Array.FindIndex 方法")方法来创建简洁的扩展方法。

```
public static int Find<T>(this IEnumerable<T> items, string propertyName, Object key)
{
    PropertyInfo property = typeof(T).GetProperty(propertyName);
    if(property == null)
    {
        throw new ArgumentException(String.Format("Type {0} contains no property named \"{1}\". ",
                                    typeof(T).Name, propertyName), "propertyName");
    }
    return Array.FindIndex(items.ToArray(), i => Object.Equals(property.GetValue(i, null), key));       
} 
```

# asp.net-mvc - MVC 4 Razor Html 助手 DispayFor 未将字符串检测为布尔值

> ID：12604192
> 
> 赞同：0
> 
> 时间：2012-09-26T14:36:53.893
> 
> 标签：asp.net-mvc, razor

我正在遍历行并尝试使用我的 DataTable 模型。

```
 <td>@Html.DisplayFor(d => d.Rows[i].ItemArray[j])</td> 
```

我每行、每个 ItemArray 传入五个值，前两个是字符串，另外三个是字符串，但要么是“True”，要么是“False”。我认为 DisplayFor 会检测到这一点并为布尔字符串创建一个 CheckBox。

我得到五个字符串。我需要额外的参数吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T14:50:15.437

> 我认为 DisplayFor 会检测到这一点并为布尔字符串创建一个 CheckBox。

DisplayFor 从不创建任何输入字段，除非您编写一个自定义模板来生成一个复选框（但我不会这样做）。这就是显示模板的全部意义所在。它仅用于显示。

如果要生成输入字段，请使用编辑器模板 ( `Html.EditorFor`)。

看看[默认模板](http://bradwilson.typepad.com/blog/2009/10/aspnet-mvc-2-templates-part-3-default-templates.html)的外观。

# html - 如何将html数据转换为xml文件

> ID：12604193
> 
> 赞同：-3
> 
> 时间：2012-09-26T14:36:56.510
> 
> 标签：html, xslt

我有一个要求，比如我需要从 html 输入创建一个 xml 文件。

它有一个巨大的 html 数据，我需要将其转换为 xml 格式，这对于解析其他文件很有用。

## 输入 HTML

```
<html>
<tr>
<td>SG 874/SG 322</td>
<td>Agartala</td>
<td>Chennai</td>
<td>16:30</td>
<td>23:15</td>
<td>Kolkata</td>
<td>Daily</td>
</tr>
<tr>
<td>SG 873/SG 881</td>
<td>Agartala</td>
<td>Delhi</td>
<td>13:00</td>
<td>18:05</td>
<td>Gawahati</td>
<td>Daily</td>
</tr>
<tr>
<td>SG  873/SG 894</td>
<td>Agartala</td>
<td>Delhi</td>
<td>13:00</td>
<td>20:40</td>
<td>Gawahati</td>
<td>Daily</td>
</tr>
</html> 
```

## 需要示例 XML

```
 <?xml version="1.0" encoding="utf-8"?>
 <schedules>

<Routes>
<Flgno>SG 874/SG 322</Flgno>
<org>Agartala</org>
<des>Chennai</des>
<Dept>16:30</Dept>
<Arr>23:15</Arr>
<Via>Kolkata</Via>
<frq>Daily</frq>
</Routes>

<Routes>
<Flgno>SG 873/SG 881</Flgno>
<org>Agartala</org>
<des>Delhi</des>
<Dept>13:00</Dept>
<Arr>18:05</Arr>
<Via>Gawahati</Via>
frq>Daily</frq>
</Routes>

<Routes>
<Flgno>SG  873/SG 894</Flgno>
<org>Agartala</org>
<des>Delhi</des>
<Dept>13:00</Dept>
<Arr>18:40</Arr>
<Via>Gawahati</Via>
<frq>Daily</frq>
</Routes> 
</schedules> 
```

通过示例向我建议转换技术

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T17:33:39.097

为了回答您的具体问题（“建议转换技术”）和您提供的示例输入/结果：

*   看看最基本的 XSLT 设计模式：[`The Identity Transformation`](http://en.wikipedia.org/wiki/Identity_transform#Using_XSLT)
*   此外，查看覆盖此身份转换的技术。一个快速的谷歌搜索会产生[一些](https://stackoverflow.com/questions/8009758/xsl-identity-transform-change-value-of-an-element) [例子](https://stackoverflow.com/questions/6812260/how-to-override-the-values-in-an-xml-using-xsl) [（](https://stackoverflow.com/questions/1008930/selecting-nodes-with-the-default-namespace)全部来自这个网站）。

如果您在尝试应用这些原则后仍有问题，请告诉我们。

# java - 使用 Mockito 读取文件时如何抛出 IOException？

> ID：12604197
> 
> 赞同：5
> 
> 时间：2012-09-26T14:37:07.600
> 
> 标签：java, unit-testing, mocking, mockito

我必须`IOException`为一个方法抛出一个 using Mockito，该方法正在读取如下所示的输入流。有什么办法吗？

```
public void someMethod(){
 try{
  BufferedReader in = new BufferedReader(new InputStreamReader(inputStream));
  firstLine = in.readLine();
 }catch(IOException ioException){
  //Do something
 } 
```

我试着嘲笑

```
 BufferedReader buffReader = Mockito.mock(BufferedReader.class);
  Mockito.doThrow(new IOException()).when(buffReader).readLine(); 
```

但没有成功:(

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-26T14:42:14.310

您正在模拟 BufferedReader，但您的方法不使用您的模拟。它使用自己的新 BufferedReader。您需要能够将模拟注入方法中。

这似乎`inputStream`是包含此方法的类的一个字段。`read()`因此，您可以改为模拟 inputStream，并在调用其方法时（由 InputStreamReader 调用）使其抛出 IOException 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T14:41:39.520

你不能`BufferedReader`在这里模拟，因为它是在方法内部创建的。

尝试模拟`inputStream`并抛出异常`InputStream.read()`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T20:44:54.557

我推荐的方法是有一个额外的类来处理`BufferedReader`. 这个类只有一个方法，里面没有实际的逻辑，所以它不需要任何单元测试。

```
public class BufferedReaderFactory{
  public BufferedReader makeBufferedReader(InputStream input) throws IOException{
    return new BufferedReader(new InputStreamReader(input));
  }
} 
```

现在，将类型的私有字段添加`BufferedReaderFactory`到您正在测试的类中，以及注入它的方法 - setter 方法或备用构造函数。在您的类的标准构造函数中，实例化 a`BufferedReaderFactory`并相应地设置字段。在您的`someMethod()`中，调用`makeBufferedReader()`字段上的方法，而不是使用`new`.

您的课程更具可测试性；因为现在，您可以编写一个测试`BufferedReaderFactory`，在调用`someMethod()`. 在那个模拟上，你可以存根`makeBufferedReader`方法来抛出你想要的异常。

如果您希望我更详细地了解上述任何步骤，请添加评论。您可能还想阅读我在 Mockito wiki 上关于模拟[对象创建的帖子；](http://code.google.com/p/mockito/wiki/MockingObjectCreation)这与此密切相关。

但最重要的信息是，让你的类可测试是非常重要的，你将获得多次这样做的好处。

# android - 区分 GCM 和 C2DM id

> ID：12604201
> 
> 赞同：1
> 
> 时间：2012-09-26T14:37:18.323
> 
> 标签：android, android-c2dm, google-cloud-messaging

我正在将我的应用程序从 C2DM 迁移到 GCM，但我将在其上发送注册 id 的服务器仍将提供 C2DM id。所以我的问题是我可以从我的应用程序中做什么，以便服务器可以识别这是 GCM id。Google 建议随注册 ID 一起发送一个新位。我怎样才能做到这一点。请举个例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T17:23:13.553

如果您不使用 AppEngine，请执行以下操作。

在您的服务器中，您应该已经有一个存储所有注册 id (reg_id) 的表。您需要在此表中添加另一列，例如“is_gcm_reg_id”。您将此列的所有现有行默认为“0”，因为它们当前都是 C2DM reg_id。如果您愿意，也可以只创建一个新表来存储 GCM reg_ids。

然后在您启用 GCM 的应用程序中，您只需要让您的服务器知道 reg_id 是 GCM reg_id。您没有提到如何将 reg_id 上传到服务器（Web 服务调用？简单的 POST 请求？）。如果使用 Web 服务调用，只需创建一个新方法，该方法将由您的新启用 GCM 的应用程序独占使用。如果使用 POST 请求，只需添加另一个键值对，例如“gcm=true”，您的服务器应该会查找此 kvp。

最后，您应该知道 reg_id 是 GCM 所需的所有部分，并相应地更新“is_gcm_reg_id”列字段（或新的 GCM 表）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T15:32:22.137

假设您使用 App Engine 来实现 GCM/C2DM。

在您的 App Engine 的 deviceInfo 实体中，已经有一个“类型”字段。这是您将修改为“ac2dm”或“gcm”的字段。

一个简单的方法是创建一个新的注册请求，它只传递“gcm”而不是“ac2dm”。查看您的 AppEngine 项目并找到 RegistrationInfo 类。查看 register() 方法。只需将“ac2dm”替换为“gcm”即可。

**前任：**

```
 // original
 public void register() {
    log.info("register " + this);
    try {
      doRegister(getDeviceRegistrationId(), "ac2dm", getDeviceId(), getAccountName());
    } catch (Exception e) {
      log.info("Got exception in registration: " + e + " - " + e.getMessage());
      for (StackTraceElement ste : e.getStackTrace()) {
        log.info(ste.toString());
      }
    }
    log.info("Successfully registered");
  }

      // new version
     public void register() {
    log.info("register " + this);
    try {
      doRegister(getDeviceRegistrationId(), "gcm", getDeviceId(), getAccountName());
    } catch (Exception e) {
      log.info("Got exception in registration: " + e + " - " + e.getMessage());
      for (StackTraceElement ste : e.getStackTrace()) {
        log.info(ste.toString());
      }
    }
    log.info("Successfully registered");
  } 
```

您可能必须重新编译 RPC 服务才能使其正常工作。

现在，由您来确保您的服务器检查 deviceInfo 实体的“gcm”标签并采取相应措施。另外，如果您还没有看过它，请阅读它[https://developer.android.com/guide/google/gcm/c2dm.html](https://developer.android.com/guide/google/gcm/c2dm.html)

# java - 不使用标志的方法调用

> ID：12604203
> 
> 赞同：0
> 
> 时间：2012-09-26T14:37:21.477
> 
> 标签：java

我有一个方法，我想从同一个类的两个不同位置调用，其中一个正常调用对话框，另一个调用带有一个禁用字段的对话框。

我知道在调用中传递一个标志并在方法内进行测试是可行的，但是有没有更优化的方法呢？有没有办法在方法内部知道调用发生在哪里？

编辑：

```
 // The part where you call the method passing a flag.
   showItemCustomDialog(true);
   showItemCustomDialog(false);

   // The dialog
   public void showItemCustomDialog(boolean flag) { 
       customDialog = new Dialog(this));
       field.setEnabled(flag);
   } 
```

这是一个很好的例子吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T14:42:33.807

我认为参数化方法可以完成这项工作。为什么说它不是最优的？有一种方法可以检查从哪里调用方法，但是由于这太丑陋了，我什至不想展示如何做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T14:51:33.243

您可以创建异常并分析堆栈跟踪，但您不应该这样做，原因有两个。

1.  异常在计算上是昂贵的。
2.  它违反了方法的一般 java 概念。您没有创建任何人都可以调用的方法，而是创建了一个只能在少数几个地方工作的方法。从长远来看这是一场噩梦，从短期来看是丑陋的。

传递标志是最好的选择——它更干净、更优化和更易于维护。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T14:55:06.983

最终，您将需要进行某种测试以了解是否需要禁用该字段，并对`boolean`值进行测试，因此最简单的方法`boolean`就是简单地通过它。任何类型的参数传递，原语，对象等，都是相对便宜的，所以*性能*方面，这没有任何问题。

在设计方面，使用参数是有意义的，因为这确实是一个`boolean`值的目的，指示做一件事或另一件事是真还是假。

您提出的任何其他解决方案都将是令人讨厌或缓慢的（我在看着您，`Thread.currentThread().getStackTrace()`人们）并且将要求您测试一些值，但是您必须首先*计算*该值，这需要时间.

如果您*真的*不想传递参数，那么也许您可以使用对象中的某种状态来决定这一点，但最终这将只是一个`boolean`字段而不是`boolean`参数，所以实际上，您只是在做一样。另外，如果您在任何类型的并发系统中运行该代码，那么您将不得不添加同步，这只会进一步增加您可以通过将其作为参数传递来避免的代码复杂性。

我想，长话短说，只需使用一个参数。它是明智的、可读的，任何阅读你的代码的人都会立即明白你做了什么。不要在你的代码中做一些模糊的事情，这会妨碍可读性等等，只是因为它会“做一些很酷的事情”，比如 make 它，所以你不必传递参数。可以这样想：如果有人想从您添加的方法之外的其他方法中调用该方法，他们需要多长时间才能弄清楚如何调用它？

**编辑：**另一种选择是重载。您可以提供一些常用的默认值方法和带参数的方法。如果您发现启用该字段的频率高于禁用该字段的频率：

```
public void showDialog() {
    showDialog(true);
}

public void showDialog(boolean fieldEnabled) {
    // Show the dialog
} 
```

然后在启用它的情况下打开对话框的任何地方都将调用第一个方法（或第二个方法`true`），并且希望它被禁用的那些调用第二个方法并且必须通过`false`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T14:51:26.470

那就是调用方法重载

相同方法不同参数

带有可变数字参数的搜索方法重载，

# blackberry - Blackberry (java) 的密码和数字提示

> ID：12604205
> 
> 赞同：2
> 
> 时间：2012-09-26T14:37:36.717
> 
> 标签：blackberry, passwords, numeric

创建一个黑莓应用程序。

只是一个初学者，我已经搜索过但找不到解决方案，尽管它很常见。如果有人能告诉我如何在 Java 中为黑莓应用程序显示密码提示和数字提示。提前致谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T12:26:27.870

```
According to your query , you want a field that shows password hint and a numeric hint for blackberry applications ..

Well blackberry follow some different way , it will not show hint (PopUp Screen). Another way is to put some (information) Text in the [EditField][1] when EditField is empty .Here is the sample code for demonstration :-

*******************************************************
    EditField _userName_edtField = new EditField()
        {
            protected void layout(int width, int height) 
            {
                super.layout(width, height);
                setExtent(150, height);
            };
            protected void paint(Graphics graphics) 
            {
                graphics.setColor(Color.BLACK);

                if(isFocus())
                {
                    if(getTextLength() == 0)
                    {
                        setCursorPosition(0);   
                    }
                }
                else
                {
                    if(getTextLength() == 0)
                    {
                        graphics.drawText("User Name", 0, (getHeight() - getFont().getHeight()) >>1);   
                    }
                }

                invalidate();

                super.paint(graphics);
            }
        };

                add(_userName_edtField);

*******************************************************

this is Just a simple EditField , you can customize the field according to your requirement  if this is empty it will show "User Name"  and if you enter some text the "User Name" will disappear ..
means the EditField is act like a Hint and this will help you ..!!!

  [1]: http://www.blackberry.com/developers/docs/5.0.0api/index.html 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T18:36:32.680

您的问题太宽泛，无法得到具体答案，但从我认为您正在谈论文本字段上方或下方的标签来判断，以让用户知道该字段需要什么。在这种情况下，您可以提供一个确认屏幕，向用户显示字段要求，例如字段不能为空，或者该字段只能包含数值等。

您可以将密码提示存储在设备数据库中，当用户输入错误时，会在屏幕上添加标签字段，将其显示为提示。

像这样的东西：

```
String storedPassword = ApplicationDAO.getStoredPassword();
        if(!enteredPassword.equals(storedPassword)){
           LabelField hintField = new LabelField();
           hintField.setText("Your hint");
           mainBody.add(hintField);
        } 
```

# c# - 标签链接的C#编程？

> ID：12604221
> 
> 赞同：0
> 
> 时间：2012-09-26T14:38:55.993
> 
> 标签：c#, asp.net

好的，这是我的问题[或者你可以坐在尴尬的问题上），我有一个标签，我为它创建了一个链接，工作示例如下：

```
string strLinkBegin = "<a href='";
            //string strLinkMid = "'>";
            string strLinkMid = "' target='_blank'>";
            string strLinkEnd = "</a>";
            string strQuerystring = ""; 
 strQuerystring = "somePage.aspx" + "?AMode=" + "Update" + "&someID=" + hdnsomeLink.Value;
 lblFromDesc.Text = strLinkBegin + strQuerystring + strLinkMid + hdnFromDescText.Value + strLinkEnd; 
```

**真正的问题：** 我可以在标签中编写类似于您在下面看到的代码并在用户单击它时执行的代码吗？我知道我可以通过链接按钮进行编程，但我很感兴趣是否可以在标签中做同样的事情。

```
someclass WTRadWindow = new someclass();
WTRadWindow.OpenUpdateForm(Page, hdnToDescLinkURL.Value, 350, 263); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T15:00:04.227

首先，您可以在这里查看：

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.hyperlink.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.hyperlink.aspx)

至少在我看来，它确实好像您使用了错误的控件来实现您所追求的，因为将 html 链接放入 a`Label`似乎是对控件的轻微滥用。`HyperLink`控件是阅读您的问题时首先想到的。这就是我给你链接的原因。

不管它是不是滥用，我认为这不是很重要，但`HyperLink`控件应该提供你想要的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T15:28:34.070

该`Label`控件不能包含 HTML 文本，它旨在显示纯文本。

正如[另一个答案](https://stackoverflow.com/a/12604684/1159478)中所讨论的，最合适的解决方案是使用`Hyperlink`控件。

如果将 HTML 生成为字符串然后将其添加到页面中对您来说真的很重要，那么您需要使用`LiteralControl`. 如果您只是使用它而不是标签，那么您现有的代码应该可以正常工作。我想提一下，虽然应该谨慎使用文字控件，但在这种情况下确实不合适。ASP 之所以如此出色，很大程度上是因为您*不需要*将 HTML 创建为字符串。

# windows - 用于验证远程 TCP/UDP 端口是否可通过网络访问的 Windows 工具或实用程序？

> ID：12604228
> 
> 赞同：0
> 
> 时间：2012-09-26T14:39:09.300
> 
> 标签：windows, tcp, tcpclient

我正在尝试寻找一些基于 Windows 的工具来帮助我验证远程机器上的 TCP 和 UDP 连接。

# 我的问题（只有一个用例）：

在工作中，我管理着许多运行负载测试的集群服务器。为了获得丰富的测试，我使用了 Jmeter-Plugins，它提供了一个服务器代理，可以在目标远程机器上的端口 4444 上打开一个 TCP 套接字：[http ://code.google.com/p/jmeter-plugins/wiki/ PerfMonAgent](http://code.google.com/p/jmeter-plugins/wiki/PerfMonAgent)

很多时候，当我设置新的负载测试场时，网络、服务器配置或 ServerAgent 本身都可能出现问题，因此不允许负载测试客户端访问该 TCP 连接。

我的问题是我不知道系统的哪一部分坏了。

# 我认为我需要什么：

我想知道如何打开 TCP（不是带有 cUrl 的 HTTP），连接到远程服务器以验证网络是否允许连接，以及服务器防火墙允许远程访问给定的 TCP 连接。

# 我看过的：

这些是我目前看过的一些工具：

*   Nmap [http://nmap.org](http://nmap.org)

*   Ncat [http://sourceforge.net/projects/nmap-ncat/](http://sourceforge.net/projects/nmap-ncat/)

*   TCP/IP 构建器 [http://www.drk.com.ar](http://www.drk.com.ar)

Zenmap 6.01 和 nmap 可能会完成我想要的工作，但是当我 100% 知道服务器可以通过 HTTP 访问时，Zenmap 无法访问某些机器，所以这很奇怪。

我查看了许多工具，或者它们：

*   不允许远程连接
*   似乎不想连接到 TCP 套接字
*   或者我不了解完成上述验证的工具。

我将非常感谢所有评论和建议，以帮助解决我面临的这个再次出现的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T20:47:11.023

米克

Firebind.com 可以做你想做的事。Firebind 是一个基于 Internet 的服务器，可以侦听任何 65535 UDP 或 TCP 端口。它使用基于 java 的客户端从您的机器向服务器发送流量和从服务器发送流量。

卡尔

[www.firebind.com](http://www.firebind.com)

# c# - 回发后从 C# 表单中删除字段？

> ID：12604229
> 
> 赞同：1
> 
> 时间：2012-09-26T14:39:09.863
> 
> 标签：c#, forms, collections, request, postback

我们如何从 Request.Form 集合中删除一个字段

```
 Request.Form.Remove("myfield"); 
```

**给出错误：集合是只读的。**

**编辑：**我正在向外部 API 发送表单，它不需要字段并给出错误。我在内部申请中需要该字段。发送我使用的表格

```
XXX_API.Post(Request.Form, ID); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T15:26:07.733

[HttpRequest.Form](http://msdn.microsoft.com/en-us/library/system.web.httprequest.form.aspx)只是一个[NameValueCollection](http://msdn.microsoft.com/en-us/library/system.collections.specialized.namevaluecollection.aspx)。您可以根据需要提供给 API 的表单中的数据自由创建另一个 NameValueCollection，而忽略您无法发布到 API 的任何字段。然后，您可以将新的 NameValueCollection 发送到 API。

如果要选择键，可以使用以下方法：

```
NameValueCollection formToPost = new NameValueCollection();

formToPost.Add("SomeKey", Request.Form["SomeKey"]);
formToPost.Add("AnotherKey", Request.Form["AnotherKey"]);

XXX_API.Post(formToPost, ID); 
```

或者，如果您想要除一键之外的所有内容，则可以使用以下内容，这更简单一些。它使用了[重载的构造函数](http://msdn.microsoft.com/en-us/library/2s711zk3.aspx)和[Remove](http://msdn.microsoft.com/en-us/library/system.collections.specialized.namevaluecollection.remove.aspx)方法。

```
NameValueCollection formToPost = new NameValueCollection(Request.Form);    
formToPost.Remove("FieldToRemove");

XXX_API.Post(formToPost, ID); 
```

# javascript - jquery如何连接两个变量？

> ID：12604230
> 
> 赞同：4
> 
> 时间：2012-09-26T14:39:13.483
> 
> 标签：javascript, jquery, string

我可以执行以下操作将两个变量连接为一个吗？还是有更好的方法来做到这一点？

```
 $('.row-add').live("click", function () {
          var newContent = $("<span>Example data</span>"+"");
          var newContent2 = $("<span>New Project</span>");
          var content = newContent+newContent2;
          $(this).closest("td").append(content);
        }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T14:41:15.417

您可以使用`.add`

```
content = newContent.add( newContent2 ); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-26T14:44:48.083

如果您`+`在 jQuery 对象之间使用，您将获得字符串表示形式的串联 [[小提琴](http://jsfiddle.net/kzUpP/)]。

如果要附加多个元素，只需执行此操作。

```
$('.row-add').live("click", function () {
       var newContent = $("<span>Example data</span>"+"");
       var newContent2 = $("<span>New Project</span>");
       $(this).closest("td").append(newContent).append(newContent2);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-06T12:19:38.367

```
 ```
$("#submit").click(function(){

              var name = $('#name').val();
              var note = $('#note').val();

              var data = '<h3>' + name + '</h3>' + '<p>' + note + '</p>'; 
                console.log(data); 
          });
```

```
 <script 
  src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

 <form role="form" method="POST" id="reused_form">
                        <div class="row">
                        </div>
                         <div class="row">
                            <div class="col-sm-6 form-group">
                                <label for="name"> Your Name:</label>
                                <input type="text" class="form-control inputVal" value="" id="name" name="name" required>
                            </div>

                        <div class="row">
                            <div class="col-sm-12 form-group">
                                <label for="comments"> Note:</label>
                                <textarea class="form-control inputVal" type="textarea" name="note" id="note" placeholder="Write Somthing" maxlength="6000" rows="7" value=""></textarea>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-sm-12 form-group">
                                <button type="submit" class="btn btn-lg btn-warning btn-block" name="submit" id="submit">Submit </button>
                                 <button type="button" class="btn btn-lg btn-warning btn-block" name="reset" id="reset" onclick="clearLocalStorage()">Reset </button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
``` 
```

**尝试这个**

```
var name = $('#name').val();
var note = $('#note').val();
var data = '<h3>' + name + '</h3>' + '<p>' + note + '</p>'; 
```

# python - 从数据库中替换句子中的单词（Python / Django）

> ID：12604236
> 
> 赞同：0
> 
> 时间：2012-09-26T14:39:29.100
> 
> 标签：python, sql, database, django, views

我有一个这样的字符串句子结构：

从 $Duration% 开始，$Noun$ 将是 $Adjective$

我需要一个视图来检查“$$”中的哪些单词，并将它们替换为从 SQL 文件导入的数据库中的随机单词。

以下是模型/sql 文件：

```
from django.db import models
from django.utils import timezone

class Type(models.Model):
    type = models.CharField(max_length=50)
    value = models.CharField(max_length=1)

class Word(models.Model):
    dict = models.CharField(max_length=200)
    kind = models.CharField(max_length=1)

    def randword(self):
        words = self.objects.all()
        number = randrang(0,len(words))
        return words[number]

class Question(models.Model):
    question = models.CharField(max_length=200)

    def randquest(self):
        quests = self.objects.all()
        numbeq = randrang(0, len(quests))
        return quests[numbeq]

class Meta(models.Model):
    question = models.ForeignKey(Question)
    score = models.ForeignKey("Score")
    user = models.CharField(max_length=200)
    time = models.DateTimeField('date published')

class Score(models.Model):
    word = models.ForeignKey(Word)
    score = models.IntegerField()
    question = models.ManyToManyField(Question, through=Meta)

    def __unicode__(self):
        return self.score 
```

SQL 文件

```
INSERT INTO quest_question (question) VALUES ('Starting in $Duration$, the $Noun$ will be $Adjective$'); 
```

和

```
INSERT INTO quest_word (dict, kind) VALUES ('Coffee Maker', '1');
INSERT INTO quest_word (dict, kind) VALUES ('24 hours', '3');
INSERT INTO quest_word (dict, kind) VALUES ('today', '3');
INSERT INTO quest_word (dict, kind) VALUES ('broken', '2');
INSERT INTO quest_word (dict, kind) VALUES ('Email server', '1');
INSERT INTO quest_word (dict, kind) VALUES ('15 minutes', '3');
INSERT INTO quest_word (dict, kind) VALUES ('tomorrow', '3');
INSERT INTO quest_word (dict, kind) VALUES ('unavailable', '2');

INSERT INTO quest_type (type, value) VALUES ('Noun', '1');
INSERT INTO quest_type (type, value) VALUES ('Adjective', '2');
INSERT INTO quest_type (type, value) VALUES ('Duration', '3'); 
```

我开始写视图。需要一些帮助：

```
from quest.models import Word, Type, Score, Question, Meta
from django.utils import timezone

def question(request):
    sentence = Question.objects.all()
    find_words = re.findall(r"\w+%0-9a-zA-Z%", sentence.question) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:53:09.040

如果您愿意更改符号，您有两种选择：

1.  [使用 Python。](http://docs.python.org/library/stdtypes.html#string-methods)

    ```
    >>> 'Starting in {Duration}, the {Noun} will be {Adjective}'.format(Duration='24 hours', Noun='Coffee Maker', Adjective='broken')
    'Starting in 24 hours, the Coffee Maker will be broken'
    >>> 'Starting in %(Duration)s, the %(Noun)s will be %(Adjective)s' % dict(Duration='24 hours', Noun='Coffee Maker', Adjective='broken')
    'Starting in 24 hours, the Coffee Maker will be broken' 
    ```

2.  [使用 Django。](https://docs.djangoproject.com/en/dev/ref/templates/api/#using-the-template-system)

    ```
    >>> from django.template import Context, Template
    >>> t = Template('Starting in {{Duration}}, the {{Noun}} will be {{Adjective}}') 
    >>> c = Context(dict(Duration='24 hours', Noun='Coffee Maker', Adjective='broken'))
    >>> t.render(c)
    u'Starting in 24 hours, the Coffee Maker will be broken' 
    ```

剩下的就是从数据库中提取并[随机](http://docs.python.org/library/random.html)选择单词，这是最容易的部分。

# c# - 使用 StreamReader 时路径中的非法字符

> ID：12604240
> 
> 赞同：3
> 
> 时间：2012-09-26T14:39:48.183
> 
> 标签：c#, file-io

`StreamReader`我在 C# 中打开对象时遇到问题。我总是收到异常`Illegal characters in path`。我可以让它工作的唯一方法是，如果我使用`@`符号使用整个路径名，而不是转义`\`文件路径中的任何字符。但是，这并没有真正帮助我，因为我从文件路径的两个单独变量和文件名作为另一种方法的输出（不能更改）开始。

我经历了八种排列都失败了，下面将其注释掉以供参考。为了此处的可读性，假装我正在声明`dirIni`而`fileIni`不是从另一个方法接收它们的值作为输出。话虽如此，声明样式 1 和 2 都使用所有四种连接方法都失败了。这里发生了什么？我几乎已经看到所有四种连接方法在其他示例中都有效。

**编辑：** 我已经简化了代码以显示**1 个版本**的中断：

```
string dirIni = @"C:\Users\Dan\AppData\Local\MyApp 4.0\INI\";
string fileIni = @"PWTRANSACTION.INI";

try
{
    string transIniFullFileName = Path.Combine(dirIni, fileIni);

    using (StreamReader file = new StreamReader(transIniFullFileName))
    {
        // do StreamReader stuff...
    }
}
catch (Exception ex)
{
    MessageBox.Show(ex.Message);
} 
```

这是异常的堆栈跟踪：

```
 at System.IO.Path.CheckInvalidPathChars(String path)
   at System.IO.Path.GetFileName(String path)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.StreamReader..ctor(String path, Encoding encoding, Boolean detectEncodingFromByteOrderMarks, Int32 bufferSize)
   at System.IO.StreamReader..ctor(String path)
   at TestApp.Form1.btnTestRead_Click(Object sender, EventArgs e) in C:\Users\Dan\TestApp\Form1.cs:line 4977 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T15:27:16.860

问题是该方法返回的字符串末尾有一个字段分隔符，这是非法字符。我也在我的测试代码中使用了这些字符串。我将代码粘贴到记事本++中并打开“显示隐藏字符”，然后我可以看到 FS 字符。删除 FS 后，一切运行正常。感谢大家帮助我测试代码，尤其是@Dynguss。

任何时候 VS 给出非法字符例外，检查潜在的隐藏字符！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T14:42:09.663

以下应该有效：

```
string dirIni = @"C:\Users\Dan\AppData\Local\MyApp 4.0\INI";
string fileIni = "PWTRANSACTION.INI";
string transIniFullFileName = Path.Combine(dirIni, fileIni); 
```

并避免硬编码本地应用程序数据文件夹：

```
string localAppData = Environment.GetFolderPath(Environment.SpecialFolder.LocalApplicationData);
string dirIni = @"MyApp 4.0\INI";
string fileIni = "PWTRANSACTION.INI";
string transIniFullFileName = Path.Combine(localAppData, dirIni, fileIni); 
```

顺便说一下，以下两个字符串声明**完全相同**：

```
string transIniFullFileName = "C:\\Users\\Dan\\AppData\\Local\\MyApp 4.0\\INI\\PWTRANSACTION.INI";
string transIniFullFileName = @"C:\Users\Dan\AppData\Local\MyApp 4.0\INI\PWTRANSACTION.INI"; 
```

因此，如果您说第一个失败但第二个成功，那么，我猜还有其他失败的地方，您没有向我们展示您的真实代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-14T15:58:16.340

我遇到了同样的错误，对我来说，这是由在 StreamReader 中使用字符串而不是路径引起的

```
string[] blocks = content.Split(';');
        foreach(string block in blocks)
        {
            StreamReader strReader = new StreamReader(block);
            Debug.WriteLine(block);
        } 
```

我删除了 StreamReader 行并得到了我想要的。

```
string[] blocks = content.Split(';');
        foreach(string block in blocks)
        {
            Debug.WriteLine(block);               
        } 
```

# magento - 如何更改magento中的消息位置？

> ID：12604241
> 
> 赞同：1
> 
> 时间：2012-09-26T14:39:49.600
> 
> 标签：magento

我需要更改 magento 中的消息（错误/成功）位置。默认情况下，magento 消息（错误/成功）显示在包装器或内容中。但我需要在页面顶部显示消息。任何人都可以帮我解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T16:06:05.347

有几种方法可以做到这一点。这是一个至少需要一点布局 xml 和一个新模板的...

布局：

```
<layout>
    <default>
        <reference name="after_body_start">
            <block type="core/template" name="top.messages" template="core/messages/top.phtml" before="-" />
        </reference>
    </default>
</layout> 
```

模板：（app/design/frontend/your_package/your_theme/template/core/messages/top.phtml）

```
<?php $_messageCollection = $this->getMessagesBlock()->getMessageCollection() ?>

<?php if ($_messageCollection->count()): ?>
<div>
<?php
    echo $this->getMessagesBlock()->getGroupedHtml();
    $_messageCollection->clear();
?>
</div>
<?php endif; ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T14:45:52.247

您只需在布局 xml 文件中移动块。不幸的是，我手头没有 Magento 来告诉您块名称是什么，以及它是在哪里定义的。

# php - Zend Framework 路由在 URL 上的尾随感叹号引发应用程序错误

> ID：12604242
> 
> 赞同：0
> 
> 时间：2012-09-26T14:39:51.130
> 
> 标签：php, zend-framework, zend-route, zend-router

当访问“http://localhost/public/account/test”时，我的视图可以正常工作，但是当添加感叹号（“http://localhost/public/account/test！”）时，我得到应用程序错误；但是，我预计会发生 404 错误。控制器中只有一个`testAction()`方法，而不是一个`test-Action()`方法（好像 PHP 甚至会让我侥幸逃脱）。我该怎么做才能抛出 404 错误？

以下是我收到的应用程序错误的详细信息：

> 消息：在路径（/website/application/modules/default/views/scripts/）中找不到脚本“account/test-.phtml”

堆栈跟踪：

```
 #0 /Applications/XAMPP/xamppfiles/lib/php/pear/Zend/View/Abstract.php(876): Zend_View_Abstract->_script('account/test-.p...')
    #1 /Applications/XAMPP/xamppfiles/lib/php/pear/Zend/Controller/Action/Helper/ViewRenderer.php(897): Zend_View_Abstract->render('account/test-.p...')
    #2 /Applications/XAMPP/xamppfiles/lib/php/pear/Zend/Controller/Action/Helper/ViewRenderer.php(918): Zend_Controller_Action_Helper_ViewRenderer->renderScript('account/test-.p...', NULL)
    #3 /Applications/XAMPP/xamppfiles/lib/php/pear/Zend/Controller/Action/Helper/ViewRenderer.php(957): Zend_Controller_Action_Helper_ViewRenderer->render()
    #4 /Applications/XAMPP/xamppfiles/lib/php/pear/Zend/Controller/Action/HelperBroker.php(277): Zend_Controller_Action_Helper_ViewRenderer->postDispatch()
    #5 /Applications/XAMPP/xamppfiles/lib/php/pear/Zend/Controller/Action.php(523): Zend_Controller_Action_HelperBroker->notifyPostDispatch()
    #6 /Applications/XAMPP/xamppfiles/lib/php/pear/Zend/Controller/Dispatcher/Standard.php(289): Zend_Controller_Action->dispatch('testAction')
    #7 /Applications/XAMPP/xamppfiles/lib/php/pear/Zend/Controller/Front.php(954): Zend_Controller_Dispatcher_Standard->dispatch(Object(Zend_Controller_Request_Http), Object(Zend_Controller_Response_Http))
    #8 /Applications/XAMPP/xamppfiles/lib/php/pear/Zend/Application/Bootstrap/Bootstrap.php(97): Zend_Controller_Front->dispatch()
    #9 /Applications/XAMPP/xamppfiles/lib/php/pear/Zend/Application.php(366): Zend_Application_Bootstrap_Bootstrap->run()
    #10 /website/public/index.php(42): Zend_Application->run()
    #11 {main}
    Request Parameters:
    array(3) {
      ["controller"]=>
      string(7) "account"
      ["action"]=>
      string(5) "test!"
      ["module"]=>
      string(7) "default"
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T20:39:54.253

ErrorController.php 中有一个地方看起来像这样：

```
public function errorAction()
{
    $errors = $this->_getParam('error_handler');

    switch ($errors->type) {
        case Zend_Controller_Plugin_ErrorHandler::EXCEPTION_NO_CONTROLLER:
        case Zend_Controller_Plugin_ErrorHandler::EXCEPTION_NO_ACTION:

            // 404 error -- controller or action not found
            $this->getResponse()->setHttpResponseCode(404);
            $this->view->message = 'Page not found';
            break;
        default:
            // application error
            $this->getResponse()->setHttpResponseCode(500);
            $this->view->message = 'Application error';
            break;
    }

    $this->view->exception = $errors->exception;
    $this->view->request   = $errors->request;
} 
```

您可以稍微调整一下以涵盖您的情况：

```
 switch ($errors->type) {
        case Zend_Controller_Plugin_ErrorHandler::EXCEPTION_NO_CONTROLLER:
        case Zend_Controller_Plugin_ErrorHandler::EXCEPTION_NO_ACTION:
        case Zend_Controller_Plugin_ErrorHandler::EXCEPTION_OTHER: 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T14:47:33.930

使用 urlencode...

```
 testAction(urlencode("http://localhost/public/account/test!")) 
```

# android - 使用 PhoneGap 的 Google 云消息传递

> ID：12604243
> 
> 赞同：3
> 
> 时间：2012-09-26T14:39:51.347
> 
> 标签：android, cordova, cloud

我正在尝试使用 PhoneGap 在我的 android 应用程序中添加 Google Cloud Messaging。我正在关注这个插件[https://github.com/marknutter/GCM-Cordova](https://github.com/marknutter/GCM-Cordova)

不幸的是，步骤不是很清楚。当我尝试按照以下步骤操作时：“将 GCMIntentService.java 文件添加到应用程序的主包中。” 我最终遇到了很多错误，这个文件中也有其他文件引用。

有没有教程或其他插件可用？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T15:22:12.827

如果您想要推送通知，我建议您使用 PushWoosh，因为我一直在使用它并且运行良好。由于您没有显示插入 GCMIntentService.java 的确切错误，我只能猜测您可能没有将源代码放入正确的包中，或者您的 Cordova 版本不是该插件所需要的。检查您的版本，如果不是，请尝试在 Eclipse 中单击 Fix Tool 或 Clean the project。希望这可以帮助！

# css - 为什么查看源代码时外部样式表显示为内联？

> ID：12604249
> 
> 赞同：2
> 
> 时间：2012-09-26T14:40:07.807
> 
> 标签：css, browser, stylesheet

最近，在开发网站或进行一些调试时，我注意到我的浏览器中有一个奇怪的行为。

当我单击查看源代码以检查站点的 HTML 源代码时，我编码为链接的外部样式表现在显示为内联，即完整显示。

出现的是这样的：

```
<style media="screen" type="text/css" style="display:none">
/*a bunch of CSS styles here, lines and more lines of CSS*/
</style> 
```

...而不是典型的：

```
<link href="mystyle.css" rel="stylesheet" type="text/css"> 
```

它发生在 Firefox、Chrome、Safari、IE ......我使用的任何浏览器上。

你知道伙计们会发生什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:35:55.343

恰好只有当我将 iPhone 用作调制解调器时……不知道为什么。

# php - mySQL SELECT PDOStatement->rowCount

> ID：12604252
> 
> 赞同：1
> 
> 时间：2012-09-26T14:40:14.513
> 
> 标签：php, mysql, select, pdo, rowcount

我只是想知道这个问题的最终答案是什么。PHP PDO 文档警告说，`PDOStatement->rowCount`不能依靠返回`SELECT`语句“受影响”的行数。然而我发现这在一个又一个版本的 mySQL + PHP 版本中继续完美地工作。使用另一个数据库时可能会出现问题，但如果我不想迁移到另一个数据库，我真的应该在意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:49:59.103

是的，您仍然应该关心该方法的使用。不仅仅是数据库，[PHP 本身也可能是个问题](https://stackoverflow.com/questions/769767/pdos-rowcount-not-working-on-php-5-2-6)。

如果你想安全起见，最好只发出 a`SELECT COUNT(*)`代替。

# python - Python - 套接字超时原因？网络连接丢失或没有可阅读的内容？

> ID：12604254
> 
> 赞同：1
> 
> 时间：2012-09-26T14:40:17.210
> 
> 标签：python, twitter, twitter-streaming-api

基本上：有没有办法告诉（Python 2.7）套接字何时超时，是因为没有任何东西传递到套接字还是因为网络连接断开？

我有一个 Python 应用程序，它将长时间（>30 天）连接到 Twitter 流 API。每当发送推文时，应用程序都会从​​套接字的缓冲区中读取，但如果没有发送推文，则读取命令将超时并抛出`SSLError`.

这是发生读取/超时的片段：

```
 try:
        d = resp.read(1)
        return d
    except SSLError as e:
        # the read timed out, nothing was read
        return None
    except Exception as e:
        log.error('Error reading from stream : {0}'.format(e)) 
```

我在创建时设置了超时`HTTPSConnection`，目前设置为 30 秒。因此，如果 30 秒内没有阅读任何推文，则`resp.read`命令将超时并抛出 SSLError，因此我忽略（通过返回 None，这是从该代码段向上处理的一个级别），然后再读取 30 秒。问题是，如果网络断开连接，即使它在不久之后重新连接，套接字似乎也不会再次开始读取，只会继续超时。解决此问题的唯一方法是重新连接，这很好，因为网络断开连接很少见。我可以将超时设置得非常高，并在每次超时时重新连接，但这会增加我的应用程序无法运行的时间，因为有人拔掉了网络电缆。我可以将超时设置为低以最大限度地减少停机时间，但是当没有阅读任何推文时，我会不必要地重新连接。

有没有办法根据抛出的 SSLError 来区分原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T20:21:21.823

在这里。仍然不知道如何区分发生超时的原因，但我确实设法在[Twitter Streaming Docs](https://dev.twitter.com/docs/streaming-apis/connecting)中找到了一些有用的东西来解决我遇到的根本问题。

> **摊位**
> 
> 如果 90 秒后没有收到任何数据（包括换行符），则根据下一节中的退避策略立即断开连接并重新连接。Streaming API 将每 30 秒发送一个 keep-alive 换行符，以防止您的应用程序超时连接。

所以基本上，将超时时间设置为大于 30 秒（Twitter 推荐 90）将解决它，因为他们将每 30 秒发送一次“心跳”以确保客户端流连接仍然存在。然后，只要您确实看到超时，您就可以安全地开始重新连接过程。

仍然想知道 SSLErrors 中是否有任何区别，但以防万一有人遇到同样的问题，我认为这可能会有所帮助。

# database - 使用 Access.Application 对象与数据库连接之间的区别

> ID：12604257
> 
> 赞同：2
> 
> 时间：2012-09-26T14:40:28.773
> 
> 标签：database, excel, vba, ms-access, object

我一直在寻找有关如何从 ACCDB 在 Excel VBA 中添加和查询数据的信息。我遇到了很多答案：来自我的同事的 OpenDatabase()、数据库连接和使用 Access.Application 对象。我想不通的是，使用 Access 对象而不是使用字符串等创建与数据库的连接是否有好处？我确实读到了使用 Access Application 对象，我不需要在运行 VBA 的计算机上安装 Access 引擎，因此我选择这样做。另外，它看起来比使用连接字符串并走这条路要简单得多。我已经实现了访问对象，它就像一个魅力。所以我的问题是，以访问对象方式与以另一种方式进行比较有什么好处或坏处？谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T18:25:38.417

10k 增量添加到 DB 或您的 CSV 输入增加 10K？

如果是前者，那么是的，将其存储在数据库中是个好主意，我会使用 DAO 路由。您注意到没有多少人喜欢启动 Access 应用程序，主要是因为您并没有真正使用 Ms Access 功能（它不仅仅是一个数据存储）。

作为替代方案，跳过 Excel 并将宏放入 Access 中，因为您拥有该应用程序。Access 中有很多好东西可供您利用。

但是，如果您的 CSV 总是满容量，您可能只想在 Excel/VBA 中自己处理数据。我假设“其他”表是参考表。

# windows-phone-7 - 在表情混合（WP7）中以透明颜色书写

> ID：12604258
> 
> 赞同：0
> 
> 时间：2012-09-26T14:40:29.473
> 
> 标签：windows-phone-7, xaml

我正在尝试构建一个 windows phone live tile。我想在瓷砖上添加一些强调色的文字。这意味着我需要在透明的图块上绘制一些文本。我似乎无法用透明颜色书写。

我有一个 173 x 173 像素的用户控件，我将其保存为 png 文件。我使用这个 png 作为动态磁贴的图像。图像的透明位以当前的强调色显示。

任何想法如何在 xaml 中以透明颜色书写？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T15:50:33.893

这种行为是意料之中的。在您最初的问题中，您实际上是在说“在图像上写下隐形文字”，这就是您所得到的（想象在照片上用隐形墨水书写）。您实际上需要做两件事之一。

1）找出哪些像素是您正在编写的文本的一部分，然后从图像中“删除”它们以便背景颜色显示出来，或者
2）以背景颜色写入文本（{StaticResource PhoneAccentBrush}）

*编辑*

您可能可以使用[Opacity Mask](http://msdn.microsoft.com/en-us/library/ms743320.aspx)实现您所需要的。很抱歉仅将其作为链接提供，因为我自己没有这样做。

# objective-c - IOS 5.1 ARC无法识别的选择器发送到实例

> ID：12604259
> 
> 赞同：1
> 
> 时间：2012-09-26T14:40:29.300
> 
> 标签：objective-c, ios, error-handling, uibutton, popover

我一直在看类似的问题，但无法弄清楚问题出在哪里。它似乎应该可以工作，但它给了我错误。

在 IOS 5.1 Ipad Stortyboard 应用程序中，当用户单击弹出视图时，我有一个正确的导航栏项目。我有一个可以工作的弹出窗口视图，但设计不好，所以我用一个新的弹出窗口类替换了它，现在它给了我以下错误

```
-[UIButton view]: unrecognized selector sent to instance 0xa17ba80
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[UIButton view]: unrecognized selector sent to instance 0xa17ba80' 
```

我尝试了以下功能，但到目前为止没有一个有效。当我更改代码时，它给了我类似的错误。

```
- (IBAction)setColorButtonTapped:(id)sender{
- (void)setColorButtonTapped:(id)sender{
- (IBAction)setColorButtonTapped:(id)sender forEvent:(UIEvent*)event {
- (void)setColorButtonTapped:(id)sender forEvent:(UIEvent*)event { 
```

当然我已经改变了关于**ibaction**或**void的ti**

```
[backButton2 addTarget:self action:@selector(setColorButtonTapped:) forControlEvents:UIControlEventTouchUpInside]; 
```

这是代码 my.h 文件

```
#import <UIKit/UIKit.h>
#import "ColorPickerController.h"

@interface MeetingViewController : UITableViewController<UIApplicationDelegate,UIAlertViewDelegate,DropDownListDelegate,MFMailComposeViewControllerDelegate,EGORefreshTableHeaderDelegate,ColorPickerDelegate>{

    UIPopoverController *_popover;
    ColorPickerController *_colorPicker;
    UIPopoverController *_colorPickerPopover;

}
@property (nonatomic, strong) UIPopoverController *popover;
@property (nonatomic, strong) ColorPickerController *colorPicker;
@property (nonatomic, strong) UIPopoverController *colorPickerPopover;

- (IBAction)setColorButtonTapped:(id)sender;
@end 
```

我的.m 文件

```
@synthesize popover = _popover;
@synthesize colorPicker = _colorPicker;
@synthesize colorPickerPopover = _colorPickerPopover;

- (void)viewDidLoad 
{
    [super viewDidLoad];
    //gear button on navigation Bar
    UIImage* imageback2 = [UIImage imageNamed:@"ICON - Gear@2x.png"];
    CGRect frameimgback2 = CGRectMake(0, 0, 40, 40);

    UIButton *backButton2 = [[UIButton alloc] initWithFrame:frameimgback2];
    [backButton2 setBackgroundImage:imageback2 forState:UIControlStateNormal];
    [backButton2 addTarget:self
                    action:@selector(setColorButtonTapped:)
          forControlEvents:UIControlEventTouchUpInside];

    UIBarButtonItem *btn2 = [[UIBarButtonItem alloc] initWithCustomView:backButton2];
    self.navigationItem.rightBarButtonItem = btn2;

}
#pragma mark ColorPickerDelegate

- (void)colorSelected:(NSString *)color {

    [self.colorPickerPopover dismissPopoverAnimated:YES];
}

#pragma mark Callbacks

- (IBAction)setColorButtonTapped:(id)sender {
    if (_colorPicker == nil) {
        self.colorPicker = [[ColorPickerController alloc] initWithStyle:UITableViewStylePlain];
        _colorPicker.delegate = self;
        self.colorPickerPopover = [[UIPopoverController alloc] initWithContentViewController:_colorPicker];
    }
    [self.colorPickerPopover presentPopoverFromBarButtonItem:sender permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
} 
```

实用程序类 ColorPickerController.h

```
#import <UIKit/UIKit.h>

@protocol ColorPickerDelegate
- (void)colorSelected:(NSString *)color;
@end

@interface ColorPickerController : UITableViewController {
    NSMutableArray *_colors;
    id<ColorPickerDelegate> __weak _delegate;
}

@property (nonatomic, strong) NSMutableArray *colors;
@property (nonatomic, weak) id<ColorPickerDelegate> delegate;

@end 
```

实用程序类 ColorPickerController.m

```
#import "ColorPickerController.h"

@implementation ColorPickerController
@synthesize colors = _colors;
@synthesize delegate = _delegate;

#pragma mark -
#pragma mark Initialization

/*
- (id)initWithStyle:(UITableViewStyle)style {
    // Override initWithStyle: if you create the controller programmatically and want to perform customization that is not appropriate for viewDidLoad.
    if ((self = [super initWithStyle:style])) {
    }
    return self;
}
*/

#pragma mark -
#pragma mark View lifecycle

- (void)viewDidLoad {
    [super viewDidLoad];
    self.clearsSelectionOnViewWillAppear = NO;
    self.contentSizeForViewInPopover = CGSizeMake(150.0, 140.0);
    self.colors = [NSMutableArray array];
    [_colors addObject:@"Red"];
    [_colors addObject:@"Green"];
    [_colors addObject:@"Blue"];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    // Override to allow orientations other than the default portrait orientation.
    return YES;
}

#pragma mark -
#pragma mark Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    // Return the number of rows in the section.
    return [_colors count];
}

// Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    // Configure the cell...
    NSString *color = [_colors objectAtIndex:indexPath.row];
    cell.textLabel.text = color;

    return cell;
}

#pragma mark -
#pragma mark Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    if (_delegate != nil) {
        NSString *color = [_colors objectAtIndex:indexPath.row];
        [_delegate colorSelected:color];
    }
}

#pragma mark -
#pragma mark Memory management

- (void)didReceiveMemoryWarning {
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

    // Relinquish ownership any cached data, images, etc that aren't in use.
}

- (void)viewDidUnload {
    // Relinquish ownership of anything that can be recreated in viewDidLoad or on demand.
    // For example: self.myOutlet = nil;
}

- (void)dealloc {
    self.delegate = nil;
}

@end 
```

非常感谢帮助，谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T14:51:44.290

您正在将 a`UIButton`用作 a 的 customView `UIBarButtonItem`。这可能是问题所在。我建议您改用`UIBarButtonItem`'`initWithImage:style:target:action:`初始化程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T01:22:23.283

UIButton 是一个视图，因此没有视图属性或实例方法。

# delphi - CreateProcessAsUser 如何添加权限？

> ID：12604263
> 
> 赞同：2
> 
> 时间：2012-09-26T14:40:43.480
> 
> 标签：delphi, winapi

我正在尝试使用以下代码从另一个用户帐户下的另一个 Windows 应用程序调用执行应用程序：

```
procedure TForm1.Button3Click(Sender: TObject);
var
  userName: string;
  password: string;
  domain: string;
  path: string;
  logonok: boolean;
  impok: boolean;
  hUserToken: THandle;
  ProcessCreatedOK: Boolean;
  startupInfo: TStartupInfo;
  processInfo: TProcessInformation;
  err: DWORD;
begin
    username := 'theusername';
    password := 'thepassword';
    domain := '';
    Path := 'myapp.exe';

    LogonOK := LogonUser(PWideChar(username), PWideChar(domain), PWideChar(password),
      LOGON32_LOGON_INTERACTIVE, LOGON32_PROVIDER_DEFAULT, hUserToken);

    if LogonOK then
    begin
      impOK := ImpersonateLoggedOnUser(hUserToken);

      if impok then
      begin
        FillChar(startupInfo, SizeOf(startupInfo), 0);
        startupInfo.CB := SizeOf(startupinfo);
        startupInfo.dwFlags := STARTF_USESHOWWINDOW;
        startupinfo.wShowWindow := SW_SHOWNORMAL;

        NewState.PrivilegeCount := 1;
        res := LookupPrivilegeValue(
          nil,
          SE_ASSIGNPRIMARYTOKEN_NAME,
          NewState.Privileges[0].Luid);
          Win32Check(res);

        NewState.Privileges[0].Attributes := SE_PRIVILEGE_ENABLED;
        res := AdjustTokenPrivileges(
          hUserToken,
          False,
          NewState,
          SizeOf(NewState),
          nil,
          returnLength);
        Win32Check(res);

        NewState.PrivilegeCount := 1;
        res := LookupPrivilegeValue(
          nil,
          SE_INCREASE_QUOTA_NAME,
          NewState.Privileges[0].Luid);
          Win32Check(res);

        NewState.Privileges[0].Attributes := SE_PRIVILEGE_ENABLED;
        res := AdjustTokenPrivileges(
          hUserToken,
          False,
          NewState,
          SizeOf(NewState),
          nil,
          returnLength);
        Win32Check(res);

        ProcessCreatedOK := CreateProcessAsUser(
           hUserToken,
           nil,
           PChar(path),
           nil, nil,
           false,
           CREATE_NEW_CONSOLE or NORMAL_PRIORITY_CLASS, nil, nil,
           startupInfo, processInfo);

        if GetLastError <> 0 then
        begin
          err := GetlastError;
          ShowMessage(inttostr(err) + ' ' +  SysErrorMessage(err));
        end;
      end;
    end; 
```

我收到 1314“客户端未持有所需权限”错误。

现在通过一些挖掘，我可以看到我需要对模拟帐户应用一些权限：SE_ASSIGNPRIMARYTOKEN_NAME 和 SE_INCREASE_QUOTA_NAME？

有人对如何做到这一点有一些建议吗？

我已经看到了这个 Stackoverflow[答案](https://stackoverflow.com/questions/2746053/delphi-and-createprocessasuser-example)中给出的 JCL 示例，但我在帐户权限方面遇到了类似的问题。

我不想使用 CreateProcessWithLogonW - 我可以根据要求解释原因。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T14:58:16.913

使用[`AdjustTokenPrivileges`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa375202.aspx). 首先，调用[`LookupPrivilegeValue`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa379180.aspx)获取您想要的权限的ID，然后设置它们。这是一个改编自我碰巧拥有的一些 C 代码的示例：

```
var
  NewState: TTokenPrivileges;

NewState.PrivilegeCount := 1;
res := LookupPrivilegeValue(nil, Se_AssignPrimaryToken_Name,
  @NewState.Privileges[0].Luid);
Win32Check(res);

NewState.Privileges[0].Attributes := Se_Privilege_Enabled;
res := AdjustTokenPrivileges(hUserToken, False, @NewState,
  SizeOf(NewState), nil, nil);
Win32Check(res); 
```

# html - 如何在不重定向的情况下使用 GET 删除表单的变量

> ID：12604266
> 
> 赞同：0
> 
> 时间：2012-09-26T14:40:47.323
> 
> 标签：html, forms, search, url-rewriting, get

> **可能重复：**
> [表单提交 URL 格式](https://stackoverflow.com/questions/8012674/form-submit-url-formatting)

我有简单的形式：

```
<form method="GET" action="http://{$smarty.server.SERVER_NAME}/recherche/">
        <input type="text" name="s" value="Recherche" class="text" id="searchbox" />
        <input type="submit" class="search" value="Rechercher !" title="Rechercher !" />
</form> 
```

当我提交表单时，网址会带我进入：

```
http://mywebsite.com/recherche/?s=mysearch 
```

但我像这样正确地重写了网址：

```
# Recherche
RewriteRule ^recherche/([^/]*)$ /index.php?page=recherche&s=$1 [L] 
```

但我不知道如何在**没有重定向的情况下获取正确的 url（没有 &s=）**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T21:21:47.313

您的重写规则：`RewriteRule ^recherche/([^/]*)$ /index.php?page=recherche&s=$1 [L]`仅在服务器内部向一个方向重写。该规则对浏览器没有任何影响，除了响应看起来像`/recherche/something`. 如果您确实希望更改地址栏中的 URL，则需要*通过**重定向**响应request*，而不是在内部进行一些 URI 修改并返回内容。为此，您需要：

```
RewriteCond %{THE_REQUEST} ^GET\ /recherche/\?s=([^&\ ]+)
RewriteRule ^recherche/$ /recherche/%1? [L,R=301] 
```

然后你有你的规则：

```
RewriteRule ^recherche/([^/]*)$ /index.php?page=recherche&s=$1 [L] 
```

他们两个应该一起工作。一种将浏览器重定向到没有查询字符串的 URL，另一种采用没有查询字符串的 URL，并在内部将其重写回查询字符串。

# jquery - 如何选择具有特定类的 li？

> ID：12604267
> 
> 赞同：17
> 
> 时间：2012-09-26T14:40:55.263
> 
> 标签：jquery, jquery-selectors, dom-traversal

```
<ul id="attached_deals_tab" class="nav nav-tabs">
  <li class="active">
    <a data-toggle="tab" href="#Test1">Test1</a>
  </li>
  <li class="">
    <a data-toggle="tab" href="#Test2">Test2</a>
  </li>
</ul> 
```

使用这样的 jquery，我可以说让我获得所有列表项：

```
$('#attached_deals_tab li'); 
```

但是我怎么能说只给我看`li`那个`class="active"`呢？请在一行中。

我知道如何否定它：

```
$('#attached_deals_tab li:not(.active)'); 
```

但不是反过来...

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-26T14:41:39.817

```
$('#attached_deals_tab li.active'); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-26T14:42:05.060

应该这样做，语法与 CSS 中的语法相同：

```
$('#attached_deals_tab li.active'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T14:42:34.217

`ul`一旦指定了 id，您就可以使用该类：

```
$("#attached_deals_tab .active"); 
```

除非你`li`在那里有除 s 以外的东西，并且该类也被应用了一些东西`active`，这会很奇怪。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T15:02:32.837

您应该使用子选择器为将来可能的嵌套列表准备代码：

```
$('#attached_deals_tab > .active') 
```

它将仅选择直接子级。根据规范，an`ul`只能有`li`元素作为它的子元素，所以在使用子选择器时，`.active`应该足够了，不需要指定`li.active`.

通过嵌套列表，我的意思是这样的：

```
<ul id="attached_deals_tab">
    <li class="active"></li>
    <li></li>
    <li>
        <ul>
            <li class="active"></li>
            <li></li>
        </ul>
    </li>
</ul> 
```

阅读[有关 jQuery 选择器的文档](http://api.jquery.com/category/selectors/)也会有很大帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T14:42:16.603

简单，做

```
$('#attached_deals_tab li.active').(...) 
```

# transparency - kineticjs图像背景不透明

> ID：12604271
> 
> 赞同：0
> 
> 时间：2012-09-26T14:41:08.507
> 
> 标签：transparency, html5-canvas, kineticjs

我有一些具有透明背景的 .png 图像，但是，当它们被添加到舞台时，它们具有白色背景。我在这里错过了一个技巧吗？

每个图像都像这样添加：

```
var layer = new Kinetic.Layer();
var book = new Image();

book.onload=function () {
bookImg = new Kinetic.Image ({ x: 885, y: 780, offset: [85.5, 106], image:book, name:book, opacity: 0, /*scale:{x:0.5, y:0.5}*/ });
layer.add(bookImg);
stage.add(layer);
}
book.src = "images/book.png"; 
```

是图层本身是创建白色背景的原因吗？有点迷茫！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T11:43:04.540

难道不是你必须将背景设置为透明吗？不仅是图片本身，还有包含图像的图像对象。也许层也是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T20:50:38.333

您不需要在 Kinetic.Image() 对象上设置不透明度。如果您希望它在最初或放置后不可见，只需使用 hide() （然后使用 show() 重新显示它）。或者在参数中设置可见为false。在舞台上放置图像所需的最小值如下所示：

```
var image = new Kinetic.Image({
    x: 0,
    y: 0,
    image: imageObj,
    width: 300,
    height: 120
  });
layer.add(image);
layer.draw(); 
```

这假设您的图层已添加到 Kinetic.Stage() 并且图像已加载（ imageObj.onload = function(){} ）。包括一个名字很好，偏移量和不透明度（甚至比例）是参数的有效键/值对，但在创建图像时并不是必需的。这些也总是可以在图像添加到图层后设置（使用 KineticJS 库中的许多设置器之一）。

我会尝试使用极简主义的方法来查看图像是否按预期显示，然后从那里开始。

# windows - Excel VBA - 是否有 TextChanging / TextChanged 或类似事件？或者如何在不使用 Enter 的情况下移动选择？

> ID：12604274
> 
> 赞同：1
> 
> 时间：2012-09-26T14:41:10.817
> 
> 标签：windows, events, vba, excel

最近有人问我是否可以在 Excel VBA 中创建一个宏，允许用户输入两个数字并让它自动下降到下一行。这样做的目的是因为他们不擅长打字，因此他们可以一次输入两个数字的考试成绩，而无需按 Enter。

当我第一次听到这个时，他提到它是 Visual Basic，所以我想我只需在单元格范围内使用 TextChanging 或 TextChanged 事件并让它解决这个问题。但是，到目前为止，我还没有在文档中找到任何此类事件或任何类似事件。我遇到的第一件事是 Workbook_Change，但只有在你按 Enter 后才会改变，这对我来说没用。其他人提到有这样一个事件，但无法直接命名，我无法找到他们在说什么。

如果有人有任何关于此类事件是否存在或可能发生的信息，我很想知道。

据我所知，Excel 版本是 2007 年。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T15:45:57.957

在我看来，这需要一个非编程解决方案。我非常同情——看着人们变老是很艰难的——但你必须在某个地方划清界限——为了他们和你。回车键是计算机最基本的部分。您可能会编写一个宏，该宏会在 excel 中的每个偶数（或奇数）击键时自动按回车键 - 但您将遇到其他问题，例如无法正常使用删除。如果你确实想在一个单元格中放一串文本（比如学生的名字）怎么办？也许是时候找到一个非编程的解决方案了。我的意思是有人应该与他坦诚交谈，讨论他想如何解决问题。就个人而言，我愿意为他输入数字，

请参阅有关 excel 中单元格编辑模式限制的讨论： [http ://www.mrexcel.com/forum/excel-questions/524860-call-macro-every-keystroke.html](http://www.mrexcel.com/forum/excel-questions/524860-call-macro-every-keystroke.html)

如果您真的对编程解决方案充满信心，我会推荐某种击键记录插件。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T15:42:05.070

在 Excel 2003 中，（可能在 Excel2007 中有所不同？！）每次更改单元格的值时都会触发 WorkSheet_Change 事件，无论是通过按 Enter、删除、在修改单元格后选择另一个单元格，还是在使用 vba 脚本时更改单元格的值。

我会做这样的事情：

```
Private Sub Worksheet_Change(ByVal Target As Range)
    Dim RefRange As Range
    Set RefRange = Intersect(ActiveSheet.Columns("??????????"), ActiveSheet.UsedRange)
    If Not Intersect(Target, RefRange) Is Nothing Then
        Target.Offset(0, 1).EntireColumn.Range("A1").Select
        'Target.Offset(0, 1).EntireColumn.Range("A65536").End(xlUp).Offset(1,0).Select
    End If
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T14:54:47.563

您可以使用该`Worksheet_SelectionChange`事件。不输入就触发，但是会触发很多。

但是，您也可以创建一个特殊的用户表单来输入数据，但这可能比必要的工作量更大。

使用我建议的事件的主要问题是，在选择下一行时，您将需要它作为触发器并自己触发它，因此在更改选择之前禁用事件处理。

* * *

编辑：

这是一个快速的解决方案（将其粘贴到所需工作表的 vba 代码中）：

```
Private Const clngColumnRightToLastGrade = 5

Private Sub Worksheet_SelectionChange(ByVal Target As Range)
  If Target.Column = clngColumnRightToLastGrade Then
    Application.EnableEvents = False
    'offset selection, one row down, two cols to left
    Target.Offset(1, -2).Select
    Application.EnableEvents = True
  End If
End Sub 
```

`=5`每次您的选择更改为 E 列 ( )时，这会将您向下设置一行并移至 C 列。

当然，您不必使用常量，您可以在工作簿中指定要感知的列，因此您的用户可以自己更轻松地修改它。

要将其作为可选功能，您可以将其扩展为自动生成的代码。我想到的就像一个 Ribbon-Button，它打开一个 setupForm 进行配置，以及一个 Ribbon-Button 来激活配置，它将将此代码放在配置的工作表中。但这可能有点过头了。

# asp.net-mvc - MVC 控制器操作和 ModelState.IsValid 会发生什么

> ID：12604280
> 
> 赞同：1
> 
> 时间：2012-09-26T14:41:19.397
> 
> 标签：asp.net-mvc

在控制器方法调用期间会发生什么？控制器中每个 PUBLIC 方法的 MVC 是否评估/设置 ModelState？它是否测试方法参数中的每个类？

```
public ActionResult Create(Entity myEntity, AnotherEntity, myEntity2)
{
    if (ModelState.IsValid)
    { 
```

如果我返回 int 与 ActionResult：

```
public int Create(Entity myEntity, AnotherEntity, myEntity2)
{
    if (ModelState.IsValid)
    { 
```

还会有带有评估类的 ModelState 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T14:54:25.750

其实不是控制器。这是模型粘合剂。模型绑定器的职责是在给定请求值的情况下实例化相应的模型。所以第一步是模型绑定，第二步是验证。第一步由模型绑定器完成。如果在此步骤中出现错误（例如，您尝试将模型上的整数字段绑定到用户输入任意文本的输入文本），模型绑定器会自动将错误添加到模型状态，因此一旦您输入控制器动作，您可以测试`ModelState.IsValid`.

如果模型绑定成功，那么您将拥有一个模型实例，该实例现在已传递给相应的验证框架。因此，例如，如果您使用数据注释并使用验证属性修饰模型属性，它们将被评估，如果有错误，它们将再次自动添加到 ModelState。

> 如果我返回 int 与 ActionResult：

您将违反 ASP.NET MVC 中所有控制器操作都必须返回 ActionResult 的标准约定。但是返回类型实际上与输入参数的模型绑定和验证无关。返回类型可以是任何可能的 ActionResult 派生类或自定义类。

因此，例如，如果您想呈现模型的 HTML 表示，则返回一个`ViewResult`. 如果要返回模型的 JSON 表示，则返回`JsonResult`. 如果要返回一些静态字符串，则返回`ContentResult`. 如果你想允许用户下载一个文件，你返回一个`FileResult`. 等等。

# mysql - 如何从一个表中返回多个列？

> ID：12604281
> 
> 赞同：1
> 
> 时间：2012-09-26T14:41:19.380
> 
> 标签：mysql

如何从表中返回多个列？

我的课程表：

> | 课程 | 个人身份 | 任务ID | 状态 |
> 
> 计算机 < > User1 <> 1 <> 确认
> 计算机 < >User2 <> 1 <> 未确认
> 计算机 < >User3 <> 1 <> 未确认
> 计算机 < >User1 <> 2 <> 确认
> 计算机 < >User2 <> 2 <> 确认
> 计算机 < >User3 <> 2 <> 未确认

我希望它像这样返回：

> | 个人身份 | 任务_1 | 任务_2 |
> 
> User1 <> 确认 <> 确认
> User2 <> 未确认 <> 确认
> User3 <> 未确认 <> 未确认

问题 2：
我的表中还有其他课程（数学、英语等）的任务多于两个。我需要使用某种迭代来返回任务列吗？因为我不想为每门课程（超过 100 门）进行 SQL 查询。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T14:43:20.720

您可以使用 a`CASE`和聚合：

```
select persid,
  max(case when taskid = 1 then status end) as Task1,
  max(case when taskid = 2 then status end) as Task2
from course
group by persid 
```

如果您想包含课程信息：

```
select persid,
  course,
  max(case when taskid = '1' then status end) as Task1,
  max(case when taskid = '2' then status end) as Task2
from course
group by persid, course
order by course, persid 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/87c3e/3)

如果您有未知数量的任务，那么您可以使用[准备好的语句](http://buysql.com/mysql/14-how-to-automate-pivot-tables.html)来动态生成：

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'max(case when taskid = ''',
      taskid,
      ''' then status end) AS Task_',
      taskid
    )
  ) INTO @sql
FROM course;

SET @sql = CONCAT('SELECT persid, course, ', @sql, ' 
                  FROM course 
                  group by persid, course
                  order by course, persid');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/3769f/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T14:43:51.267

像这样：

```
SELECT 
  PersId,
  MAX(CASE WHEN Taskid = 1 THEN Status END) AS Task_1,
  MAX(CASE WHEN Taskid = 2 THEN Status END) AS Task_2
FROM Courses
GROUP BY persID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T16:07:00.743

使用PIVOTE人的力量

PIVOT 通过将表达式中的一列中的唯一值转换为输出中的多列来旋转表值表达式，并在最终输出中需要的任何剩余列值上执行聚合。

```
SELECT Course, PersId, [1] AS [Task_1], [2] AS [Task_2]
FROM
 (
  SELECT Course, PersId, TaskId, [Status]
  FROM t2
  ) as a
PIVOT
 (
  MAX([Status])
  FOR TaskId IN ([1], [2])
  ) as b 
```

# c# - 通过查询在 Linq 组中包含相关字段

> ID：12604284
> 
> 赞同：1
> 
> 时间：2012-09-26T14:41:28.723
> 
> 标签：c#, linq, group-by

我正在尝试创建一个查询，该查询按第一个表中的字段分组，对第一个表字段求和，并包含第二个字段中的单个字段。尝试从联接表中引用字段时，我不断收到错误消息。

**表 1：用户**

```
Id
DisplayName 
```

**表 2：时间条目**

```
WeekEnding
UserId
Hours 
```

**询问：**

```
from u in Users
join t in TimeEntries on u.Id equals t.UserId
group t by new {t.WeekEnding, t.UserId } into g
select new {WE = g.Key.WeekEnding, User = g.Key.UserId, 
HoursTotal = g.Sum(s => s.Hours), DisplayName = g.First(n => n.DisplayName)} 
```

我尝试了很多方法，但“DisplayName”不是有效字段。对此的任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:46:35.523

这里有几个选项。

```
from t in TimeEntries
group t by new {t.WeekEnding, t.UserId } into g
let firstT = t.First()
select new
{
  WE = g.Key.WeekEnding,
  User = g.Key.UserId
  HoursTotal = g.Sum(x => x.Hours)
  DisplayName = firstT.User.DisplayName
}

from t in TimeEntries
group t by new {t.WeekEnding, t.UserId } into g
let user = (from u in Users where u.UserId == g.Key.UserId select u).Single()
select new
{
  WE = g.Key.WeekEnding,
  User = g.Key.UserId
  HoursTotal = g.Sum(x => x.Hours)
  DisplayName = user.DisplayName
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T14:44:50.643

[`Enumerable.First(IEnumerable<TSource>, Func<TSource, Boolean>)`](http://msdn.microsoft.com/en-us/library/bb535050.aspx)返回序列中满足指定条件的第一个元素。

但我认为这`n.DisplayName`是一个字符串而不是`bool.`

尝试[另一个重载](http://msdn.microsoft.com/en-us/library/bb291976.aspx)，它只返回序列中的第一个元素：

```
DisplayName = g.First().DisplayName 
```

# sql - 循环值，创建动态查询并添加到结果集

> ID：12604291
> 
> 赞同：2
> 
> 时间：2012-09-26T14:41:44.200
> 
> 标签：sql, oracle, resultset

我有以下问题。我是一位经验丰富的 Java 程序员，但在 SQL 和 PL/SQL 方面有点不熟练。

我需要执行以下操作。

1 将一些数组和一些其他变量传入一个过程

2 循环数组中的值（它们都具有相同的项目数）并动态创建 SQL 语句

3 运行此语句并将其添加到结果集中（这是过程的 OUT 参数）

我已经有动态创建 SQL 查询、运行它并将结果添加到结果集（这是一个 REF CURSOR）的经验，但我不确定如何循环并将每次调用的结果添加到查询相同的结果集。我什至不确定这是否可能。

这是我到目前为止所拥有的（为简单起见编辑了代码）。我知道这是错误的，因为我只是用最新的查询结果替换了 RESULT_SET 的内容（这在调用此过程的 Java 中得到了确认）。

任何和所有的帮助将不胜感激。

```
TYPE REF_CURSOR IS REF CURSOR;  

PROCEDURE GET_DATA_FASTER(in_seq_numbers IN seq_numbers_array, in_values IN text_array, in_items IN text_array, list IN VARCHAR2, RESULT_SET OUT REF_CURSOR) AS  
  query_str VARCHAR2(4000);

  seq_number NUMBER;
  the_value VARCHAR2(10);
  the_item VARCHAR2(10);

  BEGIN

    FOR i IN 1..in_seq_numbers.COUNT
    LOOP

      seq_number := in_seq_numbers(i);
      the_value := trim(in_values(i));
      the_item := trim(in_items(i));

      query_str := 'SELECT distinct '||seq_number||' as seq, value, item
      FROM my_table ai';                    

      query_str := query_str || '
      WHERE ai.value = '''||the_value||''' AND ai.item = '''||the_item||'''
      AND ai.param = ''BOOK''
      AND ai.prod in (' || list || ');

      OPEN RESULT_SET FOR query_str;

    END LOOP;

    EXCEPTION WHEN OTHERS THEN
      RAISE;

  END GET_DATA_FASTER; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T15:25:11.120

流水线表函数似乎更适合您的需求，尤其是当您所做的只是检索数据时。请参阅[http://www.oracle-base.com/articles/misc/pipelined-table-functions.php](http://www.oracle-base.com/articles/misc/pipelined-table-functions.php)

您所做的是为输出行创建一个类型。因此，在您的情况下，您将创建一个对象，例如

```
CREATE TYPE get_data_faster_row AS OBJECT(
    seq    NUMBER(15,2),
    value  VARCHAR2(10),
    item   VARCHAR2(10)
); 
```

然后创建一个表类型，它是由上面的行类型组成的表

```
CREATE TYPE get_data_faster_data IS TABLE OF get_data_faster_row; 
```

然后创建以流水线方式返回数据的表函数。Oracle 中的流水线有点像 .net 中的收益回报（不确定您是否熟悉）。您找到所有您想要的行，并在循环中一次将它们“管道”出来。当您的函数完成时，返回的表包含您通过管道输出的所有行。

```
CREATE FUNCTION Get_Data_Faster(params) RETURN get_data_faster_data PIPELINED AS
BEGIN
    -- Iterate through your parameters 
        --Iterate through the results of the select using
        -- the current parameters. You'll probably need a 
        -- cursor for this
        PIPE ROW(get_data_faster_row(seq, value, item));
        LOOP;
    LOOP;
END; 
```

编辑：在下面亚历克斯的评论之后，你需要这样的东西。我无法对此进行测试，但它应该可以帮助您入门：

```
CREATE FUNCTION Get_Data_Faster(in_seq_numbers IN seq_numbers_array, in_values IN text_array, in_items IN text_array, list IN VARCHAR2) RETURN get_data_faster_data PIPELINED AS
    TYPE r_cursor IS REF CURSOR;
    query_results r_cursor;
    results_out get_data_faster_row := get_data_faster_row(NULL, NULL, NULL);

    query_str VARCHAR2(4000);

    seq_number NUMBER;
    the_value VARCHAR2(10);
    the_item VARCHAR2(10);

BEGIN
    FOR i IN 1..in_seq_number.COUNT
    LOOP
        seq_number := in_seq_numbers(i);
        the_value := trim(in_values(i));
        the_item := trim(in_items(i));

        query_str := 'SELECT distinct '||seq_number||' as seq, value, item
        FROM my_table ai';                    

        query_str := query_str || '
        WHERE ai.value = '''||the_value||''' AND ai.item = '''||the_item||'''
        AND ai.param = ''BOOK''
        AND ai.prod in (' || list || ');

        OPEN query_results FOR query_str;

        LOOP
            FETCH query_results INTO 
                results_out.seq,
                results_out.value,
                results_out.item;
            EXIT WHEN query_results%NOTFOUND;
            PIPE ROW(results_out);
        END LOOP;

    CLOSE query_results;

    END LOOP;

END; 
```

下面亚历克斯评论中的额外信息对答案很有用：

> 您可以有来自不同来源的多个循环，并且只要将每个循环中的数据放入相同的对象类型中，您就可以在函数中的任何位置使用管道行语句将它们抽出。调用者将它们视为一个表，其中的行按照您管道的顺序排列。与其调用过程并获取结果集作为输出参数，不如查询为 select seq, value, item from table(package.get_data_faster(a, b, c, d))，当然你仍然可以有一个如果它们的管道顺序不是您想要的，则 order by 子句。

# ios - 在后台播放音频无故停止工作

> ID：12604293
> 
> 赞同：1
> 
> 时间：2012-09-26T14:41:57.383
> 
> 标签：ios, audio, background, avaudioplayer

我有一个可以在后台播放音乐的[应用程序](http://itunes.apple.com/app/meloman-vkontakte/id496224452?mt=8)，但由于某种原因，当应用程序停止在后台播放音乐时，一些用户会遇到问题。我在自己的 iPhone 上多次注意到这个错误，但我不明白为什么会发生这种情况？我正在使用 AVAudioFoundation.framework

首先，我通过子类化为 remoteEvents 注册自己`UIWindow`：

```
@interface MelomanWindow : UIWindow

@property (nonatomic, assign) UIResponder *responder;

- (void)remoteControlReceivedWithEvent:(UIEvent *)event;

@end
--------------------------------------
@implementation MelomanWindow

@synthesize responder = _responder;
- (void)remoteControlReceivedWithEvent:(UIEvent *)receivedEvent {
[self.responder remoteControlReceivedWithEvent:receivedEvent];
}
@end 
```

并在`AplicationDelegate.m`：

```
[application beginReceivingRemoteControlEvents];
self.window.responder = [[ApplicationAudioService sharedInstance] playerViewController]; 
```

之后在我`ViewController`的一个做这个：

```
- (id)init {
...
AVAudioSession *audioSession = [AVAudioSession sharedInstance];
[audioSession setCategory:AVAudioSessionCategoryPlayback error:nil];
[audioSession setActive:YES error:nil];
audioSession.delegate = self;
...
} 
```

杀死应用程序后，Bug 消失。出现此错误时，**遥控器事件**也不起作用。当此错误出现时，状态栏中也未显示“播放”图标。

# python - 从五个项目列表中打印除第四项之外的所有内容，以显示彼此相邻的两个列表 Python

> ID：12604297
> 
> 赞同：0
> 
> 时间：2012-09-26T14:42:06.040
> 
> 标签：python, python-2.7

所以我遇到的这个新问题就是这个。我有两个列表，每个列表有五个项目。

```
listone = ['water', 'wind', 'earth', 'fire', 'ice']
listtwo = ['one', 'two', 'three', 'four', 'five'] 
```

我想要做的是打印字符串中每个列表中的第一个、第二个、第三个和第五个项目：

```
print("the number is %s the element is %s" % (listtwo, listone) 
```

但是他们每次都需要在新行中打印，以便为两个列表中的每个元素运行文本：

```
the number is one the element is water
the number is two the element is wind
the number is three the element is earth
the number is five the element is five 
```

我不知道该怎么做。我尝试使用列表拆分，但由于它是五项中的第四项，我无法弄清楚如何跳过它。我也用它在新行中列出字符串：

```
for x in listone and listtwo:
print("the number is {0} the element is {0}".format(x) 
```

但我不知道如何将它与两个列表一起使用，或者它是否甚至可以与两个列表一起使用。

请帮忙 ：（

编辑：

另外我不知道脚本的元素是什么，所以我只能在列表中使用它们的编号。所以我需要去掉两个列表中的 [4] 。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T14:46:14.010

```
for (i, (x1, x2)) in enumerate(zip(listone,listtwo)):
    if i != 3:
        print "The number is {0} the element is {1}".format(x1, x2) 
```

*解释*

*   给`zip(listone,listtwo)`你一个元组列表`(listone[0],listtwo[0]), (listone[1],listtwo[1])...`
*   给`enumerate(listone)` 你一个元组列表`(0, listone[0]), (1, listone[1]), ...]`

    （你猜对了，这是另一种更有效的方法`zip(range(len(listone)),listone)`

*   通过将两者结合起来，您可以获得所需元素的列表以及它们的索引
*   因为您的第一个元素具有索引`0`并且您不想要第四个元素，所以只需检查索引是否不是`3`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T14:45:59.873

```
for pos in len(listone):
    if(pos != 3):
        print("the number is {0} the element is {1}".format(pos,listone[pos])) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T14:47:29.343

```
listone = ['water', 'wind', 'earth', 'fire', 'ice']
listtwo = ['one', 'two', 'three', 'four', 'five']
z = zip(listone, listtwo)
z1 = z[:3]
z1.append(z[4])
for i, j in z1:
    print "the number is {} the element is {}".format(j, i) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T14:45:51.450

```
for x in zip(list1,list2)[:-1]:
    print("the number is {0} the element is {0}".format(x)) 
```

# c# - C# Datagridview 在新行上创建强制单元格

> ID：12604303
> 
> 赞同：0
> 
> 时间：2012-09-26T14:42:17.270
> 
> 标签：c#, datagridview, cell, required, newrow

我正在寻找一种使单元格成为新行上的强制单元格的方法。该行由 7 个单元格组成。我遇到的问题是，如果用户输入新行，他可以跳过必须包含所需数字的非常重要的第一个单元格。我希望如果用户输入新行，他必须首先在该行中输入所需的单元格，然后才能向第二个单元格添加更多信息，依此类推。我尝试过行验证并检查 DBNull 等，但没有任何效果。最好的解决方案是，如果输入新行，第一个单元格会跳转到编辑模式。如果输入数字，则可以编辑以下单元格，否则不能。如果用户取消添加，则不会添加当前行。

感谢您提供任何建议和信息！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T14:01:20.290

我自己找到了一个简单的解决方案。如果第一个单元格已在新行上填充，只需检查 CellBeginEdit - 否则无法编辑其他单元格，因此不会添加新行。可能其他人也可能需要它。非常感谢您的帮助！

```
private void dgvUsers_CellBeginEdit(object sender, DataGridViewCellCancelEventArgs e)
        {
            if (e.ColumnIndex != 0)
            {
                if ((e.RowIndex == dgvUsers.NewRowIndex) && (dgvUsers[0, e.RowIndex].Value == null))
                {
                    e.Cancel = true;
                }
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T16:52:45.067

根据您所描述的内容，您可以使用[UserAddedRow 事件](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.useraddedrow.aspx)来获取事件并验证新行是否已正确填充。

[您可以通过Rows 属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.rows.aspx)获取 DataGridViewRowCollection 中的数据

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-08T13:30:19.100

我最近遇到了同样的问题。我在 Windows 窗体中间有一个 DGV，它接收紧急联系人 (EC) 信息。它允许用户输入多个 EC。每个 EC 的姓名、电话和电子邮件必须在输入时在每一行上进行验证。

我这样做了：

```
 private void CheckECName(DataGridViewCellValidatingEventArgs newValue)
        {
            StringBuilder _errMsg = new StringBuilder();
            string _cellMsg = "";
            string _eCon_Name = "";
            DataGridViewCell cell = this.dgEmergencyContact.Rows[newValue.RowIndex].Cells[newValue.ColumnIndex];

            if (!String.IsNullOrEmpty(newValue.FormattedValue.ToString()))
            {
                _eCon_Name = newValue.FormattedValue.ToString();
                if (!((_eCon_Name.Trim()).Length == 0))
                {

                    // Match the regular expression pattern against a text string.
                    // Only alphabetic and space characters
                    //Match m = r.Match(wholeName);
                    //if (!m.Success)
                    if (TestInput.IsFullName(_eCon_Name))
                    {
                        string _cellLabel = "Emergency Conact Name";
                        _cellMsg = "Emergency Contact name";
                        NotifyUserAndContinue(_cellLabel, _cellMsg, newValue);
                        return;

                    }
                    else
                    {

                        _cellMsg = "Emergency Contact name";

                        _errMsg.Append("The Emergency Contact Name: " + _eCon_Name + " is entered incorrectly.");
                        _errMsg.AppendLine("Acceptable format: First Last");
                        _errMsg.AppendLine("\n\tFirst MI Last");
                        _errMsg.AppendLine("\n\tFirst Middle Last");
                        _errMsg.AppendLine("\nNo commas or periods, please.");

                        NotifyUserAndForceRedo(_cellMsg, _errMsg.ToString(), newValue);

                        return;
                    }

                }

            }
        }
        private void CheckECEmail(DataGridViewCellValidatingEventArgs newValue)
        {
            StringBuilder _errMsg = new StringBuilder();
            string _cellMsg = "";
            string techEmail = newValue.FormattedValue.ToString().Trim(); 
            DataGridViewCell cell = this.dgEmergencyContact.Rows[newValue.RowIndex].Cells[newValue.ColumnIndex];

            if (!(techEmail.Length == 0))
            {
                // Send the contents of the Personal Email to the tester class
                if (TestInput.IsEmail(techEmail))
                {
                    string _cellLabel = "Emergency Conact Email";
                    _cellMsg = "Emergency Contact email address";
                    NotifyUserAndContinue(_cellLabel, _cellMsg, newValue);
                    return;
                }
                else
                {
                    _cellMsg = "Emergency Contact email address";
                    _errMsg.Append("An invalid email address has been entered.");
                    _errMsg.AppendLine("Format email@server.type (jim@place.com)");

                    NotifyUserAndForceRedo(_cellMsg, _errMsg.ToString(), newValue);

                    return;
                }
            }

        }

        private void CheckECPhone(DataGridViewCellValidatingEventArgs newValue)
        {
            StringBuilder _errMsg = new StringBuilder();
            string _cellMsg = "";
            string techPhone = newValue.FormattedValue.ToString().Trim();
            DataGridViewCell cell = this.dgEmergencyContact.Rows[newValue.RowIndex].Cells[newValue.ColumnIndex];

            if (!(techPhone.Length == 0))
            {
                // Send the contents of the Personal Phone to the tester class
                if (TestInput.IsPhone(techPhone))
                {
                    string _cellLabel = "Emergency Conact Phone";
                    _cellMsg = "Emergency Contact phone number";
                    NotifyUserAndContinue(_cellLabel, _cellMsg, newValue);                
                    return;
                }
                else
                {
                    _cellMsg = "Emergency Contact phone number";
                    _errMsg.Append("An invalid phone number has been entered."); 
                    _errMsg.AppendLine("Acceptable formats: 8606782345");
                    _errMsg.AppendLine("\t860-678-2345");
                    _errMsg.AppendLine("\t(860) 678-2345");
                    _errMsg.AppendLine("\t(860) 678 - 2345");

                    NotifyUserAndForceRedo(_cellMsg, _errMsg.ToString(), newValue);

                    return;
                }

            }
        }

        private void NotifyUserAndForceRedo(string cellMessage, string errorMessage, DataGridViewCellValidatingEventArgs newValue)
        {
            DataGridViewCell cell = this.dgEmergencyContact.Rows[newValue.RowIndex].Cells[newValue.ColumnIndex];

            MessageBox.Show(errorMessage);
            dgEmergencyContact.Rows[cell.RowIndex].ErrorText = String.Format("{0} is entered incorrectly", cellMessage);
            cell.ErrorText = String.Format("{0} is entered incorrectly", cellMessage);
            try
            {
                dgEmergencyContact.EditingControl.BackColor = Color.OrangeRed;
            }
            catch (Exception)
            {
            }            
            newValue.Cancel = true;
        }

        private void NotifyUserAndContinue(string cellLabel, string cellMessage, DataGridViewCellValidatingEventArgs newValue)
        {
            DataGridViewCell cell = this.dgEmergencyContact.Rows[newValue.RowIndex].Cells[newValue.ColumnIndex];
            string _goodMsg = String.Format("A valid {0} has been entered.", cellMessage);
            AutoClosingMessageBox.Show(cellMessage, cellLabel, 2500);
            cell.Style.BackColor = Color.White;
            cell.ErrorText = "";
            dgEmergencyContact.Rows[cell.RowIndex].ErrorText = "";
        }
```

这会在用户选择或输入时验证每个单元格。我在背面有代码对我认为有效的姓名、电话号码和电子邮件进行 regedit 检查，它们返回布尔结果。

希望这会有所帮助，有人。

# android - 是否可以在 Android 中创建“线对象”？

> ID：12604306
> 
> 赞同：2
> 
> 时间：2012-09-26T14:42:21.767
> 
> 标签：android, line

我想画一条线并在上面设置一个点击监听器。当我单击该行时，将显示一个对话框。我知道如何在视图上画一条线，但我想创建类似“线对象”的东西，以便我可以控制和设置监听器。

如果有人知道，请帮助我。谢谢 ：）

# android - 如何开始在 Android 上为 pjsip 创建一个视频渲染器作为 Csipsimple

> ID：12604313
> 
> 赞同：1
> 
> 时间：2012-09-26T14:42:40.097
> 
> 标签：android, android-ndk, video-streaming, sip, pjsip

我想在 Android 上创建自己的视频渲染器，因为 pjsip 没有为 Android 提供视频渲染器。我不知道从哪里开始。我应该覆盖哪个 pjsip 函数。

我知道该`CSipsimple`解决方案有一个视频渲染器，我假设它位于视频插件中，它是一个编译的 .so 文件..没有源代码..所以关于从哪里开始的任何建议。我从来没有处理过`OpenGl`Android NDK。

所以请提供一个简单的解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-08T20:12:52.727

其实你是不正确的， csipsimple 确实提供了来源：

他们使用[webrtc API](http://simonguest.com/2013/08/06/building-a-webrtc-client-for-android/)来获取[摄像头馈送](http://code.google.com/p/csipsimple/source/browse/trunk/CSipSimple#CSipSimple/jni/webrtc/pj_sources%253Fstate%253Dclosed)和[显示](http://code.google.com/p/csipsimple/source/browse/trunk/CSipSimple#CSipSimple/src/org/webrtc/videoengine%253Fstate%253Dclosed)。

# web-services - 如何使用 Grails 和 CXF 在 Web 服务中生成 targetNamespace

> ID：12604319
> 
> 赞同：3
> 
> 时间：2012-09-26T14:43:07.010
> 
> 标签：web-services, grails, namespaces, cxf

我正在使用 Grails (2.1.0) 和 CXF 插件 (0.9.0) 生成 Web 服务端点，并且正在生成我的 wsdl，包名称为 targetNamespace。

根据[本](http://cxf.apache.org/docs/developing-a-service.html#DevelopingaService-CreatingtheSEI)教程，我应该使用 @WebService 注释我的类并使用 targetNamespace 属性使其成为我的需要，但没有奏效。

即使使用服务类中的注释（不使用接口），我生成的 wsdl 第一行也是：

```
<wsdl:definitions name="ServiceName" targetNamespace="http://com.packageName/" xmlns:ns1="http://schemas.xmlsoap.org/soap/http" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tns="http://com.packageName/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:xsd="http://www.w3.org/2001/XMLSchema"> 
```

我应该为正确的 targetNamespace 做些什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T15:04:34.530

`@Web*`仅当您使用时才会阅读各种注释

```
static expose = ['cxfjax'] 
```

在您的服务中。如果您正在使用`expose = ['cxf']`，则需要更改为`cxfjax`.

# pascal - 这个 Pascal 语法有什么问题？

> ID：12604323
> 
> 赞同：1
> 
> 时间：2012-09-26T14:43:18.867
> 
> 标签：pascal

我不明白这里发生了什么。你能帮我个忙吗？这是有问题的代码：

```
While not EOF(Archi) do begin
  index:= index + 1;
  Read(Archi, Alumno[index]);
  Promes[index] := (Alumno[index].nota1 + Alumno[index].nota2) / 2;
  if Promes[index] >= 6 then begin
     alguPromo := true;
     PromosIndex := PromosIndex + 1;
     Promos[PromosIndex]:= Alumno[index];
  end;
  else begin
       if Promes[index] > 4 then cantiRecu:= cantiRecu + 1;
       else begin
            LibresIndex += 1;
            Libres[LibresIndex] := Alumno[index];
            end;
  end;
end; 
```

编译器在此代码的第 10 行标记错误（否则开始）。错误是：致命：语法错误，; 预期但 ELSE 发现。

如果有人想托盘编译这里是整个代码： http: [//pastebin.com/dRg1Lguu](http://pastebin.com/dRg1Lguu)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T14:51:56.737

请注意，在 Pascal 中，分号是*分隔符*，而不是*终止符*。有时这无关紧要，但在某些情况下确实如此，尤其是在`else`. 您的代码应该是：

```
while not EOF(Archi) do
  begin
    index:= index + 1;
    Read(Archi, Alumno[index]);
    Promes[index] := (Alumno[index].nota1 + Alumno[index].nota2) / 2;
    if Promes[index] >= 6 then
      begin
        alguPromo := true;
        PromosIndex := PromosIndex + 1;
        Promos[PromosIndex] := Alumno[index]
      end
    else
      begin
        if Promes[index] > 4 then
          cantiRecu:= cantiRecu + 1
        else
          begin
            LibresIndex := LibresIndex + 1;
            Libres[LibresIndex] := Alumno[index]
          end
      end
  end 
```

Note that I have re-formatted the code into a more conventional style which helps to make the program logic more easily understood and which also makes it more obvious where the semicolons are needed and where they are not.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T14:45:44.887

+= 运算符中的问题

# java - 如何在 Java 中模拟 PHP cURL 请求？

> ID：12604325
> 
> 赞同：3
> 
> 时间：2012-09-26T14:43:20.360
> 
> 标签：java, php, curl, httpurlconnection

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_FILE, $file);
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_URL, $urls[$vidCount]);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
curl_exec($ch);
curl_close($ch); 
```

所以我有一个 cURL 请求，它接受一个 URL 并在文件系统中生成一个文件。

如何在 Java 中模拟上述 PHP cURL 请求？

我试过`HttpURLConnection`了，但我得到了`403 Forbidden`。cURL 中的相同调用可以正常工作。两者之间是否存在一些我需要调和的架构差异？

我相信它可能是 cURL 可能在 Java 没有自动设置的标头中的某些内容。我不太确定，但如果我能得到任何建议，我将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T22:25:43.230

我不确定您为什么要在 Java 中模拟 PHP 行为。如果最终结果确实是您需要达到的，那么请使用 Java HttpURLConnection 甚至 URLConnection。

# javascript - 如何使用 JavaScript 替换文章中的随机匹配文本？

> ID：12604329
> 
> 赞同：1
> 
> 时间：2012-09-26T14:43:35.747
> 
> 标签：javascript, regex, random, string-matching, replace

如果这听起来很傻，我很抱歉，但我是 JavaScript 新手，我想做的是：

假设我有一些带有关键字的文章，例如“**培训**”。文章会是这样的：

> 这里有一些文字**培训**和更多的bla bla bla。我们可以**训练**这个......使用**训练**你可以......

现在我想做的是用“ **runing ”替换“** **training** ” ，但我不希望它们全部替换，我只想替换其中一个（随机一个）。

 **我如何使用 JavaScript 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T14:53:32.443

我为这个“问题”写了一个小于 140 字节的函数：[https ://gist.github.com/3728254](https://gist.github.com/3728254)

**HTML**

```
<div id="str">Some text here training and more bla bla bla. We can training this... Using training you can...</div> 
```

**JS**

```
var replaceR = function(a,b,c,d,e){e=new RegExp(b,"ig");a.innerHTML=a.innerHTML.replace(d?b:e,c)};

    replaceR(document.getElementById('str'), 'training', 'runing', false); 
```

[演示](http://jsfiddle.net/Xvbvx/)

*更新*

```
var string = document.getElementById('str').innerHTML,
    newString = string.replace('training', 'running');

document.getElementById('str').innerHTML = newString; 
```

[http://fiddle.jshell.net/db3yc/](http://fiddle.jshell.net/db3yc/)

**更新 2**

```
var s = "Some text here training and more bla bla bla. We can training this... Using training you can...",
    nth = 0,
    r = (new Date().getSeconds()) % 4;
s = s.replace(/training/g, function(match, i, original) {
    nth++;
    return (nth === r) ? "running" : match;
});
document.write(s); 
```

[http://fiddle.jshell.net/JfYvA/](http://fiddle.jshell.net/JfYvA/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T15:04:51.597

我不是 100% 确定，但经过一些小测试后，这应该可以工作:)

```
function replaceRandom(str, search, replace) {
    var split = str.split(new RegExp("\b?" + search + "\b?")),
        length = split.length - 1,
        rnd = ~~(Math.random() * length),
        result;

    if (length > 0) {
        result = split.map(function(val, idx) {
            return val && (val + (idx === rnd ? replace : search));
        })

        return result.join("").substring(-search.length);
    } else{
        return str;
    }
} 
```

[小提琴](http://jsfiddle.net/ARvcW/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T15:04:58.400

编写了一个函数，该函数在主字符串中构建子字符串位置列表，然后执行单个随机替换：

```
function replaceRandom(str, needle, replacement)
{
    var indices = [],
    re = new RegExp(needle.replace(/[-[\]{}()*+?.,\\^$|#\s]/g, "\\$&"), 'ig');

    // find all string positions where needle occurs
    while (match = re.exec(str)) {
        indices.push(match.index);
    }

    if (indices.length) {
        // determine a random match to do replacement on
        var pos = indices[Math.floor(indices.length * Math.random())];
        return str.substr(0, pos) + replacement + str.substr(pos + needle.length);
    } else {
        return str;
    }
} 
```

调用它：

```
var newStr = replaceRandom('Some text here training and more bla bla bla. We can training this... Using training you can...', 'training', 'running');
// newStr now contains a single replacement 
```**

# xml - 如何从 ColdFusion 提要中获取特定字段的单个元素？

> ID：12604331
> 
> 赞同：1
> 
> 时间：2012-09-26T14:43:38.990
> 
> 标签：xml, coldfusion, feed, atom-feed

我不是 Coldfusion 方面的专家（坦率地说，我对此几乎一无所知），但我的任务是设置 Atom 提要以显示在我们客户的一个网页上。

我已经设法让所有东西都正确连接，并且能够在外部网站上显示提要。我仍然有一个问题——我需要一个帖子的链接，并且提要在该字段下显示一堆指向同一事物的不同链接，用逗号分隔。

我只需要抓住第一个，这样我就可以嵌入它。有没有一种简单的方法可以做到这一点，而无需我只解析字符串的天真方法（我也不知道如何在 CF 中做到这一点）？

这是我现在用来生成内容的代码，该`linkhref`字段是我需要获取的第一个成员：

```
<cfset feedurl="http://*******.blogspot.com/atom.xml" />
<cffeed source="#feedurl#" properties="feedmeta" query="feeditems" />

<ul>
    <cfoutput query="feeditems">
    <li>#title#</li>
        <li>#linkhref#</li>
        <li>#content#</li>
    </cfoutput>
</ul> 
```

我得到的是这样的：`http://*****.blogspot.com/2012/09/****.html,http://****.blogspot.com/feeds/****/comments/default,http://****.blogspot.com/2012/09/****`等等。

任何帮助将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T14:59:59.357

我不确定我是否正确理解了您的问题，但是如果我理解了，您可以使用它`ListFirst()`来获取第一个列表元素，因此`#ListFirst(linkhref)#`会给您第一个 URL。

为清楚起见，我还建议您确定变量的范围，以便您确切知道它们的来源。

```
<cfset feedurl="http://google.blogspot.com/atom.xml" />
<cffeed source="#feedurl#" properties="feedmeta" query="feeditems" />

<ul>
    <cfoutput query="feeditems">
        <li>#feeditems.title#</li>
        <li>#ListFirst(feeditems.linkhref)#</li>
        <li>#feeditems.content#</li>
    </cfoutput>
</ul> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T15:00:57.163

你所拥有的是一个清单。您可以使用 ListFirst() 获取第一项：

```
#ListFirst(feeditems.linkhref)# 
```

# mysql - SQL AVG 和 SUM GROUP BY

> ID：12604332
> 
> 赞同：0
> 
> 时间：2012-09-26T14:43:40.313
> 
> 标签：mysql, subquery, sum, average

我有两张表，比如**Costs**和**Payments**，我需要计算每项费用的每月支付的 AVG。

即 Costs_IdCost = 2 有三笔付款

```
+-----------+--------------+----------+--------+
| IdPayment | Costs_IdCost |   Date   | Amount |
+-----------+--------------+----------+--------+
|     1     |      2       |2012/09/10|  1000  |
+-----------+--------------+----------+--------+
|     2     |      2       |2012/09/20|  3000  |
+-----------+--------------+----------+--------+
|     3     |      2       |2012/10/01|  5000  |
+-----------+--------------+----------+--------+ 
```

现在我不仅需要平均付款（3000），还需要以下平均值：

```
September : (1000+3000)/2 = 2000
October   : 5000 /1 = 5000
AVG       : (2000+5000)/2 = 3500 
```

而且我对 group by 和 subquery 变得非常混乱>_<

谢谢你！

**- - - - - - - - - - 编辑 - - - - - - - - - - - - - -**

我正在使用 mySql，这是我到目前为止所做的：

```
SELECT c.IdCost,
c.Name,
c.Amount,
AVG(p.monthly_sum) Mean,
SUM( p.Amount ) Total,
COUNT( p.IdPayment ) Num
FROM Costs c
LEFT JOIN (SELECT MONTH(Date), 
        YEAR(Date), 
                    Costs_IdCost,
                    IdPayment,
                    Amount,
        AVG (Amount) monthly_sum
    FROM Payments
    GROUP BY YEAR(Date), MONTH(Date) 
     ) p ON p.Costs_IdCost = c.IdCost
GROUP BY c.IdCost 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T16:24:08.863

我不确定这是否正是您正在寻找的，但它会给您带来想要的结果：

```
select date_format(date, '%Y-%m') Month,
  avg(amount) AvgAmount
from costs c
left join payments p
  on c.id = p.costs_idcost
group by date_format(date, '%Y-%m')
union all
select concat(cast(count(*) as char), ' Months Averaged'),
  avg(AvgAmount) TotalAvg
from
(
  select avg(amount) AvgAmount, 
    date_format(date, '%Y-%m') Month
  from costs c
  left join payments p
    on c.id = p.costs_idcost
  group by date_format(date, '%Y-%m')
) x 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/dcc02/39)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T14:53:30.247

您可以按日期的月份部分分组。

```
GROUP BY datepart(MONTH, Cost.Date) 
```

这可能不是最有效的方法，但它可能会很好地工作。BTW datepart 是内置于 MSSQL 的函数中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-14T18:23:04.560

我通过使用选择条目来做类似的事情

```
SELECT format(DATE_TIME,''yyyy-MM'') as [Month], .......

GROUP BY format(DATE_TIME,''yyyy-MM''), ......... 
```

SORT BY 与我使用的 GROUP BY 相同。如果你想举例的话，并不是说一个人甚至可以用这个概念达到小时、分钟和秒的水平： `SELECT format(DATE_TIME,''yyyy-MM-dd.HH'') as [Hour]`

# pdf - 网站自动从较小的 pdf 随机创建 pdf

> ID：12604336
> 
> 赞同：-2
> 
> 时间：2012-09-26T14:43:46.963
> 
> 标签：pdf

我必须创建一个自动创建的网页：

来自较小 pdf（1/8 页）的 pdf（1-2 页）

例如，用户更喜欢他/她想要的预定义类别中的小 pdf 类型，网站会使用网站中的小 pdf 自动创建另一个 pdf，保存并提供新 pdf 的链接。

我想知道我该怎么做。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T14:50:01.527

如果您使用的是 PHP，您可以使用这些库

*   [TCPDF](http://www.tcpdf.org/)

*   [FPDF](http://www.fpdf.org/)

干杯!

# java - 在 java 中读取 char 数组时遇到问题。我究竟做错了什么？

> ID：12604342
> 
> 赞同：1
> 
> 时间：2012-09-26T14:44:01.843
> 
> 标签：java, arrays

当我尝试读取数组值时，出现错误“线程“main”java.lang.NullPointerException 中的异常”。这是我认为导致错误的代码。

```
 class Board
{
    private static char[][] board;

    public Board(int r, int c)
    {
        setRow(r);
        setColumn(c);
        char board[][] = new char[row][column];
    }

    public void getBoard()
    {
        for (int c = 1;c <= getColumn()-1 ;c++)
        {
            System.out.print("\t"+c);
        }
        System.out.print("\n");
        for (int r = 1; r <= getRow()-1; r++)
        {
            System.out.print(r);
            for (int c = 1; c <= getColumn(); c++)
            {
                System.out.print("\t" + board[r][c]);  //I think board[r][c] is causing it.
            }
            System.out.println("");
        }
        return;
    }
} 
```

如果需要，我可以上传整个文件。

任何帮助将不胜感激，这让我昨晚保持清醒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T14:45:47.260

代替

```
char board[][] = new char[row][column]; 
```

和

```
board = new char[row][column]; 
```

在第一个语句中，您将一个值分配给一个局部变量，而不是您的实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T14:48:46.070

您在构造函数中隐藏了成员变量

```
char board[][] = new char[row][column]; 
```

它应该是

```
 board= new char[row][column]; 
```

# function - jstl分割函数

> ID：12604344
> 
> 赞同：0
> 
> 时间：2012-09-26T14:44:24.573
> 
> 标签：function, split, jstl

我想使用 jstl 1.2 拆分给定的字符串，例如：

```
Bean thesis.url contains "http:website1.com : http:website2.com"
which needs to be splited into
http:website1.com
http:website2.com

<c:set var="url">
  <c:out value="${thesis.url}" />
</c:set>  

<c:set var="offUrls" value="${fn:split(url,' : ')}" />
<c:forEach items="${offUrls}" var="link">
    <a href=" <c:out value='${link}' />" target="_blank">
        <c:out value="${link}" />
    </a>
</c:forEach> 
```

但输出不是我想要的
http
website1.com
http
website2.com

我尝试了另一种方法，它也很有效。
`<c:set var="_split" value= " : "/>
<c:set var="offUrls" value="${fn:split(url,_split)}" />`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T17:11:28.573

`fn:split`将在任何分隔符上拆分您的字符串，因此在您的情况下，空格和`:`. 解决方案是先做一个`fn:replace`：

```
<c:set var="urls" value="http://website1.com : http://website2.com"/>
<c:set var="urls" value="${fn:replace(thesis.url, ' : ', '|')}"/> 
```

确保将分隔符替换为字符串中不存在的字符，否则您将遇到同样的问题。现在您可以使用`fn:split(urls, '|')`，但使用起来会更容易[`<c:forTokens/>`](http://docs.oracle.com/javaee/1.4/tutorial/doc/JSTL4.html#wp74001)：

```
<c:forTokens items="${urls}" delims="|" var="url">
  <a href="${url}">${url}</a>
</c:forTokens> 
```

更好的解决方案是简单地在应用程序的后端完成工作并将字符串列表传递给前端。

# sql - Crystal Report XI - 条件总和问题

> ID：12604351
> 
> 赞同：1
> 
> 时间：2012-09-26T14:44:57.337
> 
> 标签：sql, crystal-reports, report

我有一个名为的数据表`InvoiceShipments`。对于发票上装运的每个产品，它会连续一行。每个产品都属于一个产品类别，我可以查询和过滤。一些产品是带有 的成品`Bill of Material`，其中`Bill of Materials`(BOM) 是组合成成品的部件列表。

在`InvoiceShipments`表中，成品列出了价格但没有成本。紧随其后的是成品的组件 (BOM)，这些组件有成本但没有价格。我有一个单独的表格，列出了所有组件项目以及它去往的成品。请注意，组件货物可以属于多个 BOM。

我目前可以`InvoiceShipments`根据产品类别（从连接到不同的表）过滤我想要的产品。我想要做的是获取已完成的好数字，并获取构成该 BOM 的所有零件#s 的列表，然后返回 InvoiceShipments 并汇总与这些组件#s 匹配的所有行的成本和发票＃。但是我使用 Crystal 的时间还不够长，不知道在查询级别做什么、如何处理命令表、如何处理公式等。

[示例截图：](http://imgur.com/a/RbCpJ)

库中的顶部表是 BOM 表，第二个表是`InvoiceShipments`，第三个是期望的结果。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T14:47:04.450

从我收集到的信息中，您希望合并发票编号，但使用成品信息。我做过类似的事情，解决方案有点奇怪，但它有效。您只需要 InvoiceShipments 表

1.  按发票编号分组
2.  为订单 ID、SKU 和产品名称创建公式

    IF Price <> 0 AND Cost = 0 THEN Orider ID '<-根据公式 (SKU, ProductName) ELSE "" 更改此项

3.  在每个公式上插入-> 摘要为最大值，并将其放在分组发票行上。

4.  由于数量是恒定的，您可以将该字段放在分组发票行上。
5.  插入-> 价格汇总，然后使用 SUM 在成本上汇总，并将其放在分组发票行上。
6.  隐藏细节。

这应该会给你你需要的结果。发生的事情是因为您的公式仅打印成品信息，其他项目为空白。因此，当您使用 MAXIMUM 时，将打印非空白项。

希望这可以帮助。

* * *

新解决方案

我没有像您的数据一样设置的任何表或视图，因此我无法测试此解决方案，但希望有足够的信息可以让您制定一个好的解决方案

我注意到您不能使用 InvoiceShipments 中的材料来识别 BillofMaterials 中的成品。材料会重复。我们必须使用成品来识别它们。

1.  添加 InvoiceShipments 并重命名为 InvoiceShipments1（添加表格时，右侧窗口，右键单击表格并重命名。
2.  使用精选专家，隔离您的成品。（价格 <> 0 且成本 = 0）
3.  数据库 -> 数据库专家。添加到您的 BillofMaterials 表中。将 SKU 链接到 ProductSKU。左外连接

现在材料与发票编号相关联，我们可以尝试将 INvoiceShipments 的另一个副本链接到 BOM。这很棘手。

1.  数据库 -> 数据库专家。添加 InvoiceShipments 表，将其重命名为 InvoiceShipments2。将 InvoiceShipments2.invoice# 链接到 InvoiceShipments1.Invoice#，将 InvoiceShipments2.SKU 链接到 Material#。使用左外连接
2.  在 OrderID、SKU 和 ProductName 列上创建一个在 InvoiceShipments1 和 InvoiceShipments2 之间交替的公式

    IF ISNULL({InvoiceShipments1.OrderID}) THEN {InvoiceShipments2.OrderID} ELSE {InvoiceShipments1.OrderID}

3.  创建一个结合 InvoiceShipments2.invoice# 和 SKU 的公式（SKU 公式版本）

4.  在上一步中按公式分组（如果发票包含 2 个成品，它将为一个发票创建 2 行。
5.  在GF上放InvoiceShipments2.invoice#、OrderID（公式版）、SKU（公式版）、ProductNmae（公式版）、InvoiceShipments2.quantity、Summerize(InvoiceShipments2.price)、Summerize(InvoiceShipments2.cost)
6.  隐藏生长激素

希望它有效！

# javascript - 在 javascript 文件中包含 google api 版本

> ID：12604352
> 
> 赞同：0
> 
> 时间：2012-09-26T14:45:01.800
> 
> 标签：javascript, html, google-maps-api-3

我正在开发一个 html/javascript 应用程序，并想构建一个包含 HTML 和 javascript 代码的文件。

有没有办法在不使用**脚本**标签的情况下将 google-map api 包含在同一个文件中？

谢谢，

贝努瓦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T16:30:01.370

是的 - 它被称为异步加载：[https ://developers.google.com/maps/documentation/javascript/tutorial#asynch](https://developers.google.com/maps/documentation/javascript/tutorial#asynch)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T14:55:04.460

我们需要添加脚本标签来访问谷歌地图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T18:15:14.620

还有一个 Google Static Maps API 可以简单地创建图像。它是非交互式的，但无需 JavaScript 即可工作： [https ://developers.google.com/maps/documentation/staticmaps/](https://developers.google.com/maps/documentation/staticmaps/)

# android - Windows 8 上 Visual Studio 2012 的 Monodroid 开发问题 - Android 布局设计画布问题

> ID：12604355
> 
> 赞同：2
> 
> 时间：2012-09-26T14:45:08.177
> 
> 标签：android, mono, xamarin.android, monodevelop, xamarin

我的 Android 解决方案（Android 的 Mono）中的所有 Android 布局`Visual Studio 2012`和`MonoDevelop`Windows 8 机器上的所有 Android 布局都出现错误。
我**没有**在我的 Windows 7 机器 `Visual Studio 2010`中收到此错误消息。`MonoDevelop`

我已经尝试在 VS 2012 和 MonoDevelop 中创建一个新的解决方案，但我仍然在 Android 解决方案（Android 的 Mono）中的默认 Android 布局上收到以下错误。无论设计画布上的错误如何，我都能够编辑 Android 布局的源代码，以及构建和部署应用程序而不会出错。

**错误信息**如下 ：

> “无法加载布局：在当前配置中找不到布尔资源匹配值 0x11100009（解析名称：config_ui_enableFadingMarquee）。”

如果您知道可能导致此问题的原因，请告诉我，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T18:52:53.600

请转到资源/布局并单击 Main.axml

您应该毫无问题地打开它。如果您需要添加更多布局页面，请在此处放置它们。我希望我是有帮助的。

# java - JVM编译类文件以汇编源代码或二进制代码

> ID：12604356
> 
> 赞同：0
> 
> 时间：2012-09-26T14:45:10.420
> 
> 标签：java, jvm

我想知道jvm是如何编译类文件的，当JIT编译jvm处理的类文件时，输出的是汇编源代码或二进制可执行代码。换句话说，JVM是如何编译类文件的，然后会做什么。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T14:56:03.410

这些答案是特定于实现的......

Hotspot JIT 编译器不编译为汇编源代码。相反，它将本机代码指令直接发送到准备执行的内存中。

根据 Hotpot 版本、JVM 切换等，JIT 编译发生在 JVM 使用字节码解释器执行了几次方法之后。在最近的 JVM 中，在初始解释阶段收集统计信息，然后帮助 JIT 编译器生成更好的代码。

# c# - 将 DataTable 中的列值从 byte[] 转换为 String

> ID：12604358
> 
> 赞同：1
> 
> 时间：2012-09-26T14:45:23.107
> 
> 标签：c#, types, datagridview, casting, datatable

总之，我有一个 SQL 解析器和编辑器，我打算将其集成到我的应用程序中。当我运行以下查询时

```
select * from sys.sysprocesses; 
```

返回的列之一是`byte[]`. `DataTable`然而，当我这样做时，这个专栏很高兴被放入

```
bindingSource.DataSource = result.DataTable; 
```

并尝试在`DataGridView`我得到明显的`ArgumentException`. 在这个位置，最好的方法是在 中将 更改`byte[]`为 a`string`以显示`DataTable`？

我可以遍历`DataTable`并做一些类似的事情

```
foreach(DataColumn col in dataTable.Columns)
    if (col.DataType == typeof(byte[]))
        foreach (DataRow row in dataTable.Rows)
            row[col] = Encoding.ASCII.GetString((byte[])row[col]); 
```

但这将尝试将 a`string`放入`byte[]`列中，并且不起作用。我可以克隆`DataTable`然后更改类型，

```
DataTable dtCloned = dataTable.Clone();
dtCloned.Columns[0].DataType = typeof(String);
foreach (DataRow row in dataTable.Rows)
    dtCloned.ImportRow(row); 
```

但我需要一个转换步骤将其转换`byte[]`为十六进制字符串。实现我想要的最好和最好最有效的方法是什么？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T16:42:09.347

这就是我最终做到这一点的方式。

```
public static void PostProcessData(ref DataTable dataTable)
{
    // Convert byte[] columns.
    List<DataColumn> colCollRem = new List<DataColumn>();
    List<DataColumn> colCollAdd = new List<DataColumn>();
    foreach(DataColumn col in dataTable.Columns)
        if (col.DataType == typeof(byte[]))
            colCollRem.Add(col);

    // Remove old add new.
    foreach (DataColumn col in colCollRem)
    {
        int tmpOrd = col.Ordinal;
        string colName = String.Format("{0}(Hex)", col.ColumnName);
        DataColumn tmpCol = new DataColumn(colName, typeof(String));
        dataTable.Columns.Add(tmpCol);
        colCollAdd.Add(tmpCol);
        foreach (DataRow row in dataTable.Rows)
            row[tmpCol] = Utilities.ByteArrayToHexString((byte[])row[col]);
        dataTable.Columns.Remove(col);
        string colNameNew = colName.Replace("(Hex)", String.Empty);
        dataTable.Columns[colName].ColumnName = colNameNew;
        dataTable.Columns[colNameNew].SetOrdinal(tmpOrd);
    }
} 
```

使用此转换

```
public static string ByteArrayToHexString(byte[] p)
{
    byte b;
    char[] c = new char[p.Length * 2 + 2];
    c[0] = '0'; c[1] = 'x';
    for (int y = 0, x = 2; y < p.Length; ++y, ++x)
    {
        b = ((byte)(p[y] >> 4));
        c[x] = (char)(b > 9 ? b + 0x37 : b + 0x30);
        b = ((byte)(p[y] & 0xF));
        c[++x] = (char)(b > 9 ? b + 0x37 : b + 0x30);
    }
    return new string(c);
} 
```

我希望这对其他人有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T15:42:02.130

如果您使用的是 SQL server 2005 或更高版本，您可以使用该`master.sys.fn_varbintohexstr`函数在查询中进行转换。
例子：

```
select 
  spid,
  kpid,
  ....
  master.sys.fn_varbintohexstr(sid)
from 
  sys.sysprocesses; 
```

**编辑**
或者您可以将其包装`DataTable`在一个处理转换的类中，如下所示：（
这假设您的网格不依赖于`DataTable`作为数据源）

```
public class Datasource : IEnumerable
{
    private DataTable _dt;

    public Datasource(DataTable dt)
    {
        _dt = dt;
    }

    public IEnumerator GetEnumerator()
    {
        foreach (DataRow row in _dt.Rows)
        {
            IDictionary<string, object> obj = new ExpandoObject();
            for (int i = 0; i < _dt.Columns.Count; i++)
            {
                var value = row[i];
                if (value is byte[])
                    value = BitConverter.ToString((byte[])value);
                obj[_dt.Columns[i].ColumnName] = value;
            }
            yield return obj;
        }
    }
} 
```

用法：

```
bindingSource.DataSource = new Datasource(result.DataTable); 
```

# objective-c - UIViewController 的默认描述

> ID：12604362
> 
> 赞同：1
> 
> 时间：2012-09-26T14:45:36.230
> 
> 标签：objective-c, uiviewcontroller, string-formatting

UIViewController 的默认描述中的数值是多少？我曾期望它是实例地址，或者可能是哈希，但是当我测试这个理论时，这就是我得到的：

```
NSLog(@"Self [%@]", self);
NSLog(@"Address [%p]", &self);
NSLog(@"Hash [%d]", [self hash]);

2012-09-26 10:28:00.202 QuickList7[85957:c07] Self [<SelectCategoryViewController: 0xa42fc60>]
2012-09-26 10:28:00.202 QuickList7[85957:c07] Address [0xbfffdea8]
2012-09-26 10:28:00.203 QuickList7[85957:c07] Hash [172162144] 
```

我无法在 UIViewController 或其超类的参考资料中找到解释——有人知道吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T14:53:16.380

这确实是实例地址，与`description`使用`NSOBject`' 的默认实现的任何其他实现一样。

但是实例地址已经在`self`变量中，就像`self`类型一样`UIViewController*`，并且已经是一个指针。**像您在示例中所做****的那样打印指针值会打印指针`&self`**的地址（指向指针的指针） ，而不是实例的地址，因为`&self`确实是 type `UIViewController**`。

如果您使用`NSLog(@"%p", self)`代替，`NSLog(@"%p", &self)`您将看到打印的地址与使用的地址相同，`description`并显示为`NSLog(@"%@", self)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T14:52:38.813

它是实例地址。在第二行中，您正在打印指向实例的指针的地址（位于堆栈上，这就是地址以 开头的原因`0xbfff`）。不是实例指针本身。将显示与使用 .作为对象`NSLog(@"%p", self);`打印时显示的值相同的值。`self``%@`

# linux - 如何从 shell 命令中删除目录中的所有其他文件？

> ID：12604366
> 
> 赞同：16
> 
> 时间：2012-09-26T14:45:43.433
> 
> 标签：linux, shell, command-line

我从 png 格式的视频中提取了帧：

```
00000032.png
00000033.png
00000034.png
00000035.png
00000036.png
00000037.png 
```

等等...

我想使用 shell 命令从目录中删除所有其他帧，该怎么做？

## 编辑

我想我的问题并不清楚。我知道我可以手动删除每个文件，例如：

```
rm filename.png
rm filename2.png 
```

ETC...

我需要在一个命令中动态地完成所有这些操作，因为文件夹中有数千张图像。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-09-26T14:51:34.797

这应该可以解决问题：

```
rm -f *[13579].png 
```

这将消灭每个名称以“1”或“3”或“5”或“7”或“9”加上尾随“.png”结尾的文件。

注意：`*`用于模式代表`0 or more characters`so `1.png`will match but so would`foo1.png`

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-09-26T14:47:30.827

```
delete=yes
for file in *.png
do
    if [ $delete = yes ]
    then rm -f $file; delete=no
    else delete=yes
    fi
done 
```

即使文件上的数字不连续，这也会强制进行严格的交替。您可以选择使用以下方式加快速度`xargs`：

```
delete=yes
for file in *.png
do
    if [ $delete = yes ]
    then echo $file; delete=no
    else delete=yes
    fi
done |
xargs rm -f 
```

你的名字看起来很正常（没有空格或其他奇怪的字符要处理），所以你不必担心真正通用工具必须处理的一些细节。你甚至可以使用：

```
ls *.png |
awk 'NR % 2 == 1 { print }' |
xargs rm -f 
```

有很多方法可以达到您想要的结果。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-26T14:47:22.157

```
rm ???????1.png
rm ???????3.png
rm ???????5.png
rm ???????7.png
rm ???????9.png 
```

（但在尝试之前先备份！）。将 dos/windows 的“rm”替换为“erase”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T14:50:57.237

假设所有其他意味着文件的结尾数字为 1、3、5、7 或 9，那么这可以解决您的问题

```
find . -regex '.*[13579]\.png' -exec rm {} \; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T14:51:41.853

除了什么？您可以使用 * 删除多个帧。例如 rm -f *.png 删除所有。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-09-26T15:03:28.303

这个小脚本删除所有 png 文件：

```
$ find . -name "*.png" -exec /bin/rm {} \; 
```

注意**点**，表示当前目录。

它是相同的，但更安全：

```
$ find . -name "*.txt" -delete: 
```

现在，删除所有**没有**png 扩展名的文件：

```
$ find  . ! -name "*.png" -type f -delete 
```

# ruby-on-rails - 根据 ruby on rails 中的另一个下拉列表填充下拉列表

> ID：12604374
> 
> 赞同：2
> 
> 时间：2012-09-26T14:46:04.777
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, models

我的表单中有两个不同的字段，如下所示。

```
 <div class="field">
      <%= f.label :Master_Survey %><br/>
      <%= f.select :master_survey, Condition::MasterSurvey.all.map{|e| [e.Master_Survey_Code]}, { :prompt => 'Please Select' } %>
    </div>

    <div class="field">
      <%= f.label :Element_Code %><br/>
      <%= f.select :Element_Code, Condition::Element.all.map{|e| [e.Element, e.Element_Code]}, { :prompt => 'Please Select' } %>
    </div> 
```

我希望第二个字段应该被禁用，除非第一个被选中。第二个字段`Element code`应根据`Master Survey`所选的第一个字段更改值。我`Master Survey Code`在`Elements`表中有一个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T23:53:57.270

如果这两个模型通过`has_many/belongs_to`或类似的方式相关，最好的办法是使用`grouped_collection_select`下拉菜单的方法。这会将您的下拉列表组织成一个选项卡式列表（使用 optgroup），然后做一些 jQuery 魔术来使 2 个下拉选择动态和链接！

Ryan Bates 有一个[RailsCast](http://railscasts.com/episodes/88-dynamic-select-menus-revised)，它非常详细地解释了如何做到这一点。如果您没有专业订阅 RailsCasts，我强烈建议您购买一个，这样您就可以轻松了解如何执行此类操作 :)

希望这会为您指明正确的方向！

# c++ - Valgrind - 可能失去警告

> ID：12604376
> 
> 赞同：2
> 
> 时间：2012-09-26T14:46:12.293
> 
> 标签：c++, valgrind

我有以下代码：

```
std::string myName = "BLABLABLA";

//check if there are illegal characters
for (unsigned int i = 0; i < myName.length(); i++)
{
    const char& c = myName[i];
    if (!(isalnum(c) || (c == '_') || (c == '-')))
    {
        return 0;
    }      

} 
```

这是 valgrind 在“const char& c = myName[i];”行的输出

```
==17249== 51 bytes in 1 blocks are possibly lost in loss record 116 of 224
==17249==    at 0x4C2714E: operator new(unsigned long) (vg_replace_malloc.c:261)
==17249==    by 0x602A498: std::string::_Rep::_S_create(unsigned long, unsigned long,       
std::allocator<char> const&) (in /usr/lib64/libstdc++.so.6.0.16)
==17249==    by 0x602A689: std::string::_M_mutate(unsigned long, unsigned long,   
unsigned long) (in /usr/lib64/libstdc++.so.6.0.16)
==17249==    by 0x602AFB5: std::string::_M_leak_hard() (in 
/usr/lib64/libstdc++.so.6.0.16)
==17249==    by 0x602B0A4: std::string::operator[](unsigned long) (in /
/usr/lib64/libstdc++.so.6.0.16) 
```

我看不出这有什么不妥……

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T15:10:39.637

是的，这是可怕的 COW 实现！您还可以强制使用 const （因此是非变异的）重载，如下所示：

```
std::string const myName = "BLABLABLA";

//check if there are illegal characters
for (unsigned int i = 0; i < myName.length(); i++)
{
    const char& c = myName[i];
    if (!(isalnum(c) || (c == '_') || (c == '-')))
    {
        return 0;
    }      
} 
```

或（如果您不想修改原始字符串类型）：

```
std::string myName = "BLABLABLA";
std::string const &cref = myName;
//check if there are illegal characters
for (unsigned int i = 0; i < myName.length(); i++)
{
    const char& c = cref[i];
    if (!(isalnum(c) || (c == '_') || (c == '-')))
    {
        return 0;
    }      
} 
```

等等

* * *

[牛参考](https://stackoverflow.com/q/12286841/212858)，因为我知道我在某处写过一些关于它的东西。

# tsql - 获取每次 ID 更改的总数

> ID：12604379
> 
> 赞同：1
> 
> 时间：2012-09-26T14:46:17.737
> 
> 标签：tsql

如何获得每次更换纸张的总张数

例子：

```
select sheetID,
       ..
from SomeTable 
```

结果看起来像这样：

```
sheetID
-----------
1000
1000
1000
1000
3000
3000
3000 
```

所以我想要这样的东西：

```
select sheetID,
       count(sheetID) as TotalsheetCount
from SomeTable 
```

我只是不知道如何分解每次更改 sheetID 的计数。

所以我基本上会这样结束：

```
sheetID   TotalsheetCount
--------  -----------
1000          4
1000          4
1000          4
1000          4
3000          3
3000          3
3000          3 
```

所以4是因为有4个1000，3是因为有3个3000。我想为每一行重复该 sheetID 的总数，即使它在重复，我也想提供它。

更新，这是我根据回复所做的，但现在我得到的结果太多了，因为我之前没有添加分区计数

```
 select MainTable.sheetID,
           COUNT(SomeTable.sheetID)OVER(PARTITION BY SomeTable.sheetID) AS TotalSheetCount
           table2.SomeField1,
           table2.SomeField1
    from MainTable
        join (select distinct Sales.SalesKey from SomeLongTableName_Sales) sales on sales.SheetKey = MainTable.sheetKey
        left outer join Site on MainTable.SiteKey = Site.SiteKey
        join Calendar on sales.Date >= Calendar.StartDate
             and sales.Date < Calendar.EndDate
        group by SomeTable.sheetID 
```

连接和东西对我的真实查询更现实，但为这篇文章格式化以隐藏真实的字段和表名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:49:15.847

在子查询中使用[`GROUP BY`](http://msdn.microsoft.com/en-us/library/ms177673.aspx)子句来选择计数：

```
SELECT sheetID,
       count(sheetID) as TotalsheetCount
FROM SomeTable
GROUP BY sheetID 
```

这将使您的整个查询看起来像这样：

```
SELECT t.sheetID,
       counts.TotalsheetCount
FROM SomeTable t,
    (SELECT sheetID, count(sheetID) as TotalsheetCount FROM SomeTable GROUP BY sheetID) counts
WHERE t.sheetID = counts.sheetID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T14:49:34.530

您可能想使用`GROUP BY`：

```
SELECT sheetID,  COUNT(sheetID) AS TotalsheetCount
FROM dbo.SomeTable
GROUP BY sheetID 
```

> 我想为每一行重复该 sheetID 的总数，即使它在重复，我想提供

如果您至少使用 SQL-Server 2005，则可以使用带有`COUNT`+ [`OVER`-clause](http://msdn.microsoft.com/en-us/library/ms189461.aspx)的 CTE ，否则使用子查询：

```
WITH CTE AS
(
   SELECT sheetID,  
      COUNT(sheetID)OVER(PARTITION BY sheetID) AS TotalsheetCount
   FROM SomeTable
)
SELECT sheetID, TotalsheetCount FROM CTE 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T14:54:54.720

看起来你需要一个 group-by 表达式：

```
select sheetID,
       count(*) as TotalsheetCount
from SomeTable
group by sheetID 
```

是这样吗？

直流

# extjs - ExtJS 项目配置如何在其自身的处理程序中更改？

> ID：12604383
> 
> 赞同：0
> 
> 时间：2012-09-26T14:46:29.757
> 
> 标签：extjs, properties, handler, config

如何在其处理程序中删除此操作列项中的图标？

```
 {
                        header: 'Activate',
                        xtype: 'actioncolumn',
                        align: 'center',
                        width: 30,
                        sortable: false,
                        items: [{
                            icon: './Scripts/extjs/examples/shared/icons/fam/accept.png',
                            tooltip: '',
                            handler: function (grid, rowIndex, colIndex) {
                                var rec = grid.getStore().getAt(rowIndex);

                                if (rec.get('status') == '1') {  // if active, don't show icon
                                    this.up('actioncolumn').icon = '';
                                }

                            }
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:52:51.803

一般来说，它不能 - 配置在初始化时应用，遗憾的是，ExtJS API 并不总是提供像在配置中指定的那样轻松更改事物的方法。

在 ActionColumn 的情况下，您可以[在源代码](http://docs.sencha.com/ext-js/4-0/source/Action3.html#Ext-grid-column-Action)中看到`icon`用于在构造函数中生成渲染器函数，之后无法设置它。

要动态决定是否显示图标，您需要改为使用`iconCls`，请参见[此处](http://www.sencha.com/forum/showthread.php?113590-Hide-icon-in-action-column-for-particular-row)。

# winapi - DirectShow 过滤器以抓取特定窗口

> ID：12604384
> 
> 赞同：1
> 
> 时间：2012-09-26T14:46:32.683
> 
> 标签：winapi, directshow, gdi, screen-capture

我看到另一个听起来几乎相同的问题，但答案似乎是关于整个桌面屏幕截图：[DirectShow Source filter using Dekstop window as source](https://stackoverflow.com/questions/4214786/directshow-source-filter-using-dekstop-window-as-source)。

我已经查看了 PushSource ，是的，它完成了它应该做的事情，但是我希望虚拟网络摄像头抓取一个特定的窗口（类似于您如何选择在 Skype 的共享屏幕中共享一个窗口）。

我将如何选择特定窗口作为虚拟网络摄像头的捕获？DirectShow API 中是否已经存在我不知道的特定方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T16:41:12.673

没有具体的方法。而且从屏幕抓取的样本部分已经在 DirectShow API 之外，而是 GDI。

所以解决方案很简单，你`GetWindowRect`定位你的窗口，然后从屏幕上只抓取这个矩形，而不是整个桌面。或者，您可以发送`WM_PAINT`或`WM_PRINTCLIENT`到窗口，以请求将其绘制到提供的设备上下文中。

# sql - 使用 JOIN 更新表

> ID：12604385
> 
> 赞同：2
> 
> 时间：2012-09-26T14:46:33.137
> 
> 标签：sql, join, db2, ibm-midrange

我正在尝试编写 SQL 语句，但不断收到错误...

这是我的情况：

我有一张带有销售订单的表格和一张带有物品转移的表格。

销售订单有一个订单号和一个扩展名，其中 ID 本身可能不是唯一的，但订单号和扩展名的组合是唯一的。扩展名可以为空。

物料转移表有一个参考号，有时还有一个销售订单号加上扩展名，但并非总是如此。

原因是有时为销售订单转移项目，有时出于其他原因。此外，可以在没有先转移项目的情况下发生销售订单。但是，一份订单只能进行一次转账，反之亦然。

我在销售订单表中添加了一个字段“transref”，以便可以将订单连接到转移（如果适用）。（出于性能原因，无法即时计算此信息。）所以我的表现在看起来像这样（它们实际上更大，但这是重要信息）：

```
SALESORDERS
ORDERNO ORDEXT TRANSREF
1       (null) (null)
2       (null) (null)
2       a      (null)
3       (null) (null)

TRANSFERS
TRANSREF ORDERNO ORDEXT 
t1       1       (null)
t2       (null)  (null)
t3       2       a 
```

现在我需要将 transref 代码放入销售订单表中，使其看起来像这样：

```
SALESORDERS
ORDERNO ORDEXT TRANSREF
1       (null) t1
2       (null) (null)
2       a      t3
3       (null) (null) 
```

我尝试了各种陈述，例如

```
UPDATE SALESORDERS 
INNER JOIN TRANSFERS 
ON SALESORDERS.ORDERNO = TRANSFERS.ORDERNO and (SALESORDERS.ORDEXT = TRANSFERS.ORDEXT or (SALESORDERS.ORDEXT is null and TRANSFERS.ORDEXT is null))
SET SALESORDERS.TRANSREF = TRANSFERS.TRANSREF 
WHERE TRANSFERS.ORDERNO IS NOT NULL 
```

但到目前为止没有任何效果。在尝试了十几个教程和答案之后，有人可以帮我解开我脑海中的结吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T17:12:28.410

由于您多次称它为 AS/400，我将假设您使用的是旧版本的操作系统。您可能需要一个相关的子选择。就像是：

```
update salesorders o
set transref = (select t.transref 
  from transfers t
  where o.orderno = t.orderno
    and (o.ordext = t.ordext or (t.ordext=null and o.ordext=null))
    and t.transref <> null)
where ordext = null; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T14:51:25.037

语法完全取决于您的各种 SQL

例如，这可能有效（SQL Server）

```
UPDATE SALESORDERS  
SET SALESORDERS.TRANSREF = TRANSFERS.TRANSREF  
FROM
SALESORDERS  
INNER JOIN TRANSFERS  
ON SALESORDERS.ORDERNO = TRANSFERS.ORDERNO and (SALESORDERS.ORDEXT = TRANSFERS.ORDEXT or (SALESORDERS.ORDEXT is null and TRANSFERS.ORDEXT is null)) 
WHERE TRANSFERS.ORDERNO IS NOT NULL 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-10T19:56:12.073

MERGE 可以正常工作，无论是嵌入在 SQLRPGLE 中还是与交互式 STRSQL 一起使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T15:48:28.480

您遇到这个问题是因为 DB2 不允许您使用`JOIN`带有简单`UPDATE`语句的 a（它的许多看似任意的限制之一）。

在 DB2 中执行此操作的最佳方法是使用`MERGE`. 像这样的东西应该工作：

```
merge into salesorders
    using transfers
    on transfers.orderno = salesorders.orderno and (
           transfers.ordtext = salesorders.ordtext or (
               transfers.ordtext is null and 
               salesorders.ordtext is null
           )
       )
    when matched then update set
        salesorders.transref = transfers.transref; 
```

# post - 如何使用表单更新 iframe 页面选项卡内容？

> ID：12604387
> 
> 赞同：0
> 
> 时间：2012-09-26T14:46:34.680
> 
> 标签：post, facebook-iframe

我正在尝试使用表单将数据传递到 Facebook iFrame 页面选项卡，但似乎无法弄清楚如何去做。

我的 Facebook 页面上有一个页面选项卡，其中包含多个元素，例如链接和图像，可将用户引导至主网站上的各个页面。这是每周更新一次，所以不是每周更新 HTML 文件并通过 FTP 上传，我想看看我是否可以创建一个表单来将新数据传递给 iframe。

此外，无法在 PHP 中创建 Facebook 页面选项卡，因为服务器正在运行 ASP.NET

如果可能的话，我试图在不使用数据库表的情况下执行此操作，使用 POST 或 GET 会更好。

如果有人知道任何教程或有任何提示，我将不胜感激。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:48:57.673

如果内容与具有 iframe 的父网页位于同一域中，则您只能传递内容或与 iframe 内容进行交互。所有浏览器都有一个“同源策略”，阻止你这样做 - 对不起:(

# php - jquery函数中使用php的正确方法

> ID：12604395
> 
> 赞同：1
> 
> 时间：2012-09-26T14:47:11.823
> 
> 标签：php, jquery

我是否以正确的方式在 jquery 函数中使用 php？因为我使用 NuSphere PhpED 进行编辑，它说“意外'，'”但是如果我运行页面它的工作，我不会收到任何错误。

```
<?php
$luna = $month;
$an = $year;
?>
<script>
$(function() {
    get_data(<?php echo "$luna"; ?>, <?php echo "$an"; ?>);
});
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T14:50:18.360

这应该可以正常工作 - 就 jQuery 而言，它永远不会看到 PHP 标记或代码，只会看到结束值。

看起来 PhpEd 在 Script 标记中的 PHP 标记上阻塞并返回错误错误。

罗宾

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T14:49:30.363

你的报价只是在错误的地方。

```
<?php
$luna = $month;
$an = $year;
?>
<script>
$(function() {
    get_data("<?php echo (int) $luna; ?>", "<?php echo (int) $an; ?>");
});
</script> 
```

# ruby-on-rails-3 - Rails 3 Action Malier 呈现模板并且不发送电子邮件

> ID：12604400
> 
> 赞同：0
> 
> 时间：2012-09-26T14:47:28.330
> 
> 标签：ruby-on-rails-3, actionmailer

可能已经被问过百万次了，但我的情况不同，我已经尝试了所有可以想象的配置选项，并在生产模式下也进行了尝试。电子邮件已呈现，但它没有出现在任何地方。我什至买了 15 美元的 MockSMPT 应用程序来查看电子邮件，但似乎什么也没发生。

以下是 MockSMTP 的配置：

```
config.action_mailer.delivery_method = :smtp
ActionMailer::Base.smtp_settings = {
  :address => "localhost",
  :port => 1025,
  :domain => "whatever.com"
}
config.action_mailer.raise_delivery_errors = true
config.action_mailer.perform_deliveries = true 
```

我已经尝试了每一个`delivery_method`, `:test`, `:file`, 我正在扯掉我的头发，没有任何帮助：

```
Rendered contact_mailer/contact_email.html.erb (2.1ms) 
```

就是这样。

发送代码很简单：

```
def contact_email(contact, house=nil)
  @house=house if house
  @contact=contact
  mail(to: contact.email, subject: "#{contact.name} new inquiry")
end 
```

`Rails 3.2.8`

`contact_controller.rb`：

```
def create
  @contact = Contact.new(params[:contact])
  if @contact.valid?
    @house=House.find_by_id(params[:house_id])
    ContactMailer::contact_email @contact, @house
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T15:24:48.050

你应该写：

`ContactMailer.contact_email(@contact, @house).deliver`

您可以在此处阅读 ActionMailer 文档：

[http://api.rubyonrails.org/classes/ActionMailer/Base.html](http://api.rubyonrails.org/classes/ActionMailer/Base.html)

您的声明只是创建 Mail::Message 对象，deliver 实际发送电子邮件。

# sql-server - SQL Server：xp_cmdshell 的权限非常有限

> ID：12604404
> 
> 赞同：0
> 
> 时间：2012-09-26T14:47:33.260
> 
> 标签：sql-server, permissions, xp-cmdshell

我不知道它是否应该是这样的。当我尝试对`xp_cmdshell`程序做任何事情时，它几乎每次都会给我`Access Denied`。

例如我不能创建新`.txt`文件，不能创建新用户，什么都没有。我以 Windows 管理员用户身份登录。

有没有办法以管理员权限运行此过程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T15:56:18.967

`xp_cmdshell`由 Windows 登录执行是在模拟上下文下执行的。因此，对远程资源的任何访问（例如，访问共享上的文件，对 AD 的操作（如添加用户））都将受到约束委派限制，可能导致访问被拒绝，因为可能不配置约束委派在所有这些资源上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T16:15:35.323

XP_CmdShell 将在运行 SQL Server 服务的服务帐户的上下文中执行。服务帐户需要对外部资源的权限。

但是，我可以指出，启用 xp_cmdshell 不是一个好主意。它打开了许多安全漏洞。例如，如果您的应用程序对 SQL 注入具有未知的脆弱性，那么黑客可能会在您的网络上进行各种您宁愿避免的事情。

如果您必须使用外部资源，那么更好的方法将包括 CLR 过程或调用执行 CMDEXEC 步骤的作业。

# hibernate - hibernate - 从连接表中选择特定列

> ID：12604406
> 
> 赞同：0
> 
> 时间：2012-09-26T14:47:33.930
> 
> 标签：hibernate

我正在运行一个具有正确连接的 hql：

```
select sum(banks.money) from banks right join banks.account where banks.account = :account and (banks.date < :date or banks.date is null) group by banks.account, banks.date 
```

hibernate 把它翻译成这样的：

```
select sum(banks.money) from banks right join accounts on banks.account_id = accounts.account_id where banks.account_id = someId and (banks.date < someDate or banks.date is null) .... 
```

我希望休眠从 accounts 表中获取 account_id 字段（我可以有一个不在银行表中的帐户）而不是从银行表中获取。

有没有办法明确告诉休眠在连接表的哪一列上执行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T15:18:49.110

格式化有帮助...无论如何...

```
select sum(banks.money) 
from banks 
    right join banks.account acct 
where acct = :account 
  and (banks.date < :date or banks.date is null) 
group by banks.account, banks.date 
```

虽然就个人而言，我会将其添加到加入条件中：

```
select sum(banks.money) 
from banks 
    right join banks.account acct 
        with acct.id = :accountId
where banks.date < :date 
   or banks.date is null
group by banks.account, banks.date 
```

在这两种情况下，请特别注意给予加入关联的别名及其作为限定符的用途

# jquery - jqGrid - 子网格：需要使用主网格行中的值作为子网格列标题...如何？

> ID：12604412
> 
> 赞同：0
> 
> 时间：2012-09-26T14:47:56.817
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3, jqgrid

是否有一种“简单/优雅”的方式来设置 jqGrid 子网格的列标题之一（所有其他列标题都可以是常量），基于它从主网格中详细说明的行中的一个单元格的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T15:12:10.290

不确定在显示子网格时是否可以挂钩事件，但似乎可以使用以下内容更改列标签：

```
jQuery("#grid1").jqGrid('setLabel', 0, 'NewLabel'); 
```

取自：[https ://stackoverflow.com/a/4448454/109456](https://stackoverflow.com/a/4448454/109456)

# android - Android - 在 AsyncTask onPostExecute() 中设置的共享首选项并不总是设置？

> ID：12604414
> 
> 赞同：4
> 
> 时间：2012-09-26T14:48:02.363
> 
> 标签：android

我有一些代码在 98% 的时间内有效，并且在我自己的测试期间 100% 有效，因此除了让用户设备遇到此问题外，我无法真正重现该问题。

我在 onPostExecute() 中所做的是设置这样的参数：

```
 SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences( AddProblemActivity.this);
            prefs.edit().putString("recent_problem_id", result ).commit(); 
```

然后进入下一个活动：

```
 Intent myIntent = new Intent(AddProblemActivity.this, ProblemActivity.class);
            AddProblemActivity.this.startActivity(myIntent); 
```

然后尝试像这样在那里获取该参数：

```
SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences( 
              ProblemActivity.this);         

    // display a loading message before problem loads.
    String recent_problem_id = prefs.getString( "recent_problem_id" , null );

    if ( recent_problem_id == null )
    {
        // Sometimes it is null!            
    } 
```

有谁知道为什么会这样？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T20:52:36.320

如果您尝试将数据传递给新活动，为什么不将其作为额外的字符串放在 Intent 中呢？然后，从新活动的意图中获取该字符串。如果您仍需要存储它，您可以在新活动的 onCreate() 将其从 Intent 中拉出后执行此操作。

```
Intent myIntent = new Intent(AddProblemActivity.this, ProblemActivity.class);
//Add results here
myIntent.putExtra("RecentProblemId", result);
AddProblemActivity.this.startActivity(myIntent); 
```

然后，在新 Activity 的 onCreate 中，执行以下操作：

```
String recentProblemId = getIntent().getStringExtra("RecentProblemId"); 
```

现在，如果您仍需要存储此信息，请执行以下操作：

```
if(recentProblemId != null){
    SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences( 
              ProblemActivity.this);         
    prefs.putString("recent_problem_id",recentProblemId).commit();
} 
```

我知道这并不能完全回答您关于为什么字符串并不总是致力于 onPostExecute() 中的首选项的问题。但是，在活动之间传递信息的最佳实践是通过 Intents 和 extras。

我对为什么它可能并不总是对某些用户有效的猜测是，他们的设备在新 Activity 启动并尝试从同一个文件中读取数据之前没有完成将数据写入共享首选项文件。希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T09:09:56.550

首先，请参阅 Raghav Sood 的回答。
有一个微妙的时刻。您可能会开始执行 AsyncTask 而不是旋转设备。Activity 将被重新创建，并且在 PostExecute 中您将有错误的上下文，因此您的首选项将不会被保存。
如果是真的，你应该使用 onRetainNonConfigurationInstance() 来保存适当的任务实例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T15:33:00.643

我不确定这一点，但我认为问题可能是由于您传递的上下文不同。您`AddProblemActivity`首先使用的是 Context，然后是`ProblemActivity`. 尝试使用一组首选项，例如文件名：

```
SharedPreferences prefs = getSharedPreferences("MyPrefs", Context.MODE_PRIVATE); 
```

请注意，[getSharedPreferences()](http://developer.android.com/reference/android/content/Context.html#getSharedPreferences%28java.lang.String,%20int%29)是来自 Context 的方法，因此您需要在 AsyncTask 中引用 Activity 或 Application Context 才能使用它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-29T20:01:46.420

看起来你的代码很好，没有理由不应该工作，唯一的原因是一些可能与设备相关的缺陷。我的想法是，由于共享首选项保存在本地存储中，因此在此过程中可能会出现问题。

正如评论中所建议的那样，添加设备类型日志是必须的，我建议您使用“ACRA”-http: [//code.google.com/p/acra/](http://code.google.com/p/acra/)，它可以以最少的努力为您提供详细的报告（请注意，您可以不必仅在应用程序崩溃时发送报告）。

看看这个线程，他展示了一个你可能也遇到的问题： [SharedPreferences will not save/load in PreferenceActivity](https://stackoverflow.com/questions/6500236/sharedpreferences-will-not-save-load-in-preferenceactivity)。如果是这种情况，解决方案将是手动处理在本地存储上保存这些持久数据或使用数据库解决方案。祝你好运 ：）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-01T12:26:57.527

我认为问题是由于当您尝试从第二个活动中访问共享首选项设置时尚未将其写入您的文件系统。您提到您从`onPostExecute`方法（`AsyncTask`也许？）编写设置。当您启动时，`AsyncTask`不能保证它会立即启动。唯一的保证是它将在后台线程中启动。平台可以并且将决定何时实际运行后台线程，具体取决于系统负载、文件系统块等。当您切换到第二个活动时，您可能`AsyncTask`还没有开始（因此`onPostExecute`尚未调用该方法）。

保存共享首选项在写入文件系统时很棘手。如果你不小心，你最终可能会阻塞主线程。该`SharedPreferences.Editor`对象还有一个`apply`方法，该方法将立即更新共享首选项的内存缓存（使更改立即可用）并启动后台线程以将实际值也保存到文件系统。所以我的建议是，如果你有可能，你应该尝试调用`apply`方法（从你的主线程）而不是`commit`（我假设的） a中的方法`AsyncTask`。该`apply`方法需要 API 级别 9 或更高。

供您参考：http: [//developer.android.com/reference/android/content/SharedPreferences.Editor.html](http://developer.android.com/reference/android/content/SharedPreferences.Editor.html)

***编辑：***

该`commit`方法将根据写入操作的结果返回一个布尔值。您可以（应该？）检查该返回值，以便至少能够对失败采取正确的应对措施（例如显示“无法保存您的设置，请重试”toast 或其他内容）。

干杯，--dbm

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-04T20:17:41.647

我可能是错的。但我相信我的一个朋友曾经遇到过类似的问题。我被这个问题困了几个小时。结果在大约 30% 的情况下不起作用。我相信 onPostExecute() 在实例化 Intent 并调用活动时在单独的线程上运行。这是因为 AsyncTask 是在单独的线程上实现的。根据设备的不同，这将更有可能被调用而不是。我们的平板电脑很少发生，在智能手机上会更常见。

您可以通过调试应用程序并查看 AsyncThread 线程并查看何时进行调用来测试这一点。

是的，最好通过 putExtra() 发送变量。

我希望这可以帮助您理解为什么会发生这种情况。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-06T07:53:39.287

SharePreferences 的提交操作是同步的，所以我认为您正在启动新意图这一事实不会影响它，唯一的问题是提交操作不是故障安全的，它可能会失败。

[http://developer.android.com/reference/android/content/SharedPreferences.Editor.html#commit](http://developer.android.com/reference/android/content/SharedPreferences.Editor.html#commit) ()

> 如果新值已成功写入持久存储，则返回 true。

也许您应该检查该返回值以确保您设法保存了结果。

# apache-flex - Flex：RichTextEditor 在我的文本之前和之后添加了额外的行

> ID：12604417
> 
> 赞同：0
> 
> 时间：2012-09-26T14:48:16.127
> 
> 标签：apache-flex, actionscript, flex4, flex-spark, tlf

我正在使用 RichTextEditor，但找不到解决以下问题的方法：我的文本上方和下方有一个额外的空白行，如下图所示：

这是我使用 RichTextEditor 得到的：

![我使用 RTE 得到什么](../Images/5b16d3e520d4f21b79d1cbf211aa1aab.png)

这就是我想要使用 RichTextEditor 的内容：

![这就是我想要使用 RTE](../Images/a85b3e12037ed67f467c55dbdfe43e33.png)

我怎样才能达到上述结果？任何指针都会有所帮助。

谢谢。

**更多信息**：正在从后端动态加载数据。以下是类似 TextFlow 的示例：

```
<TextFlow whiteSpaceCollapse=\"preserve\" version=\"2.0.0\" xmlns=\"http://ns.adobe.com/textLayout/2008\">\n        <p>\n          <span>Some School Name</span>\n        </p>\n      </TextFlow> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T14:03:50.033

行。经过一些实验，我得到了答案，或者至少得到了它发生的原因。

如果已保存（序列化）文本流，并且您尝试从已保存的 TextFlow 字符串中导入它，则它会在您的文本之前添加这一行。如果您将该字符串转换为 XML 并将其导入，则不会导致该空行问题。

下面的行在文本之前有一行额外的问题：

```
ste.textFlow = TextConverter.importToFlow(textStr, TextConverter.TEXT_LAYOUT_FORMAT); 
```

此行不会导致文本前添加空行：

```
ste.textFlow = TextConverter.importToFlow(XML(textStr), TextConverter.TEXT_LAYOUT_FORMAT); 
```

# iphone - 亚马逊iPhone应用搜索查看说明

> ID：12604418
> 
> 赞同：0
> 
> 时间：2012-09-26T14:48:17.343
> 
> 标签：iphone, objective-c, ios, amazon, uisearchbar

我试图弄清楚如何实现一个新的搜索系统。我的问题是我需要通过查询远程数据库来进行初始搜索。然后我希望能够对结果进行本地搜索。简单的解决方案是有 2 个搜索栏，但这看起来很糟糕：P

所以我检查了亚马逊的应用程序。当您进行搜索时，您会立即看到 resultsView（这就是我所说的），但搜索框会从顶部下降，并且白色背景会淡出 resultsView。然后，您可以对他们的数据库执行查询，视图立即消失，您又回到了结果。

有谁知道他们是如何让搜索栏从顶部降下来的？它是另一个视图还是只是一个动画？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T15:06:04.157

It looks like they added a search bar in a `UIView` and animate the `UIView` from top to bottom. I also think they actually present a new controller that animate the search view and present a `tableView` for the search result from 0 opacity to 1.

# java - 使用 java 将电子邮件转换为其原始格式

> ID：12604420
> 
> 赞同：5
> 
> 时间：2012-09-26T14:48:21.897
> 
> 标签：java, email

到目前为止，我一直尝试`MimeMessage`使用 JavaMail api 创建一个类型的对象，然后获取它的原始表示，但没有成功。我唯一能得到的是电子邮件**内容**的原始表示，但不包括标题、主题或收件人。我对任何可以帮助我创建电子邮件对象并获得其原始表示的建议、任何 java 库都感兴趣。原始表示应如下所示：

```
received: from imta14.emeryville.ca.mail.myisp.net ([nn.nn.30.46])
by alnrmxc19.isp.net (alnrmxc19) with ESMTP
id <20080930215116a19007q9u6e>; Tue, 30 Sep 2008 21:51:16 +0000
X-Originating-IP: [nn.nn.30.46]
Received: from libertatea.go ([nn.nn.161.160])
by IMTA14.mail.isp.net with isp
id M9qy1a00V3TwUto0E9rELB; Tue, 30 Sep 2008 21:51:15 +0000
X-Authority-Analysis: v=1.0 c=1 a=DZlucjOqAY8A:10 a=mnGO974OAAAA:8
a=9MJFf195B83LjESASTQA:9 a=Lm7NQ261g8eJHgoaELoA:7
a=7Narey355jFQWZRww2lj1r9-lCkA:4 a=8COHQAuY8ZYA:10 a=zEVpGHA-kecA:10
a=37WNUvjkh6kA:10
Received: by libertatea.go id hm1nfa0di0sn for <xxx@myisp.net>; Sun,30 Sep 2018 09:36:35
+0300 (envelope-from <Hometown.Quotes_ary@mousemegadot.com>)
Message-ID: <79864795@mousemegadot.com>
Date: Sun, 30 Sep 2018 09:36:35 +0300
From: "Hometown Quotes" <Hometown.Quotes_ary@mousemegadot.com>
To: dummy@myisp.net
Subject: Find Affordable Auto Insurance Today
MIME-Version: 1.0
X-UID: 79864795.modhnrfo.jhhnk.1
Content-Type: multipart/alternative; boundary="0-1411506895-1200484069=:66653"
Content-Transfer-Encoding: 8bit
X-PMFLAGS: 570966272 9 1 PE71PYHD.CNM 
X-UC-Weight: [# ] 51
X-CC-Diagnostic: Test 'LazyHTML Tolerant' (51)

--0-1411506895-1200484069=:66653
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

--0-1411506895-1200484069=:66653
Content-transfer-encoding: 8bit
Content-Type: text/html; charset=iso-8859-1; DelSp="Yes"; format="flowed" 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-26T16:00:03.253

您正在寻找的是[MimeMessag#writeTo](http://docs.oracle.com/javaee/1.4/api/javax/mail/internet/MimeMessage.html#writeTo%28java.io.OutputStream%29/MimeMessage.html#writeTo%28java.io.OutputStream%29)，它将消息输出为 RFC 822 格式流。

使用`writeTo`将 a 转换`MimeMessage`为字符串的示例。

```
MimeMessage mimeMessage;

// mimeMessage get assigned

ByteArrayOutputStream output = new ByteArrayOutputStream();
mimeMessage.writeTo(output);
String rawEmail = output.toString(); 
```

# java - Java 中的泛型枚举

> ID：12604423
> 
> 赞同：5
> 
> 时间：2012-09-26T14:48:25.673
> 
> 标签：java, generics, enums

我有一个基本的配置类，它提供了所有可能的键和枚举中相应值类型的类型，如下所示：

```
public class Configuration {
    public static enum Key {
        FIRST_KEY("actual key 1", Long.class),
        ANOTHER_KEY("actual key 2", Integer.class)

        public final String value;
        public final Class type;

        Key(String value, Class type) {
            this.value = value;
            this.type = type;
        }
    }
} 
```

我想做的是编写一个方法，从字符串中解析给定键的值并将值作为适当的类型返回。基本上是这样的：

```
public <T> T getValue(Key<T> key, String valueStr); 
```

这种尝试在方法声明中已经失败，因为 Java 中的枚举似乎不能有类型参数。关于如何实现与此类似的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T15:30:34.513

你可以简单地

```
public <T> T getValue(Key key, String valueStr); 
```

虽然它缺少编译时检查，所以这将通过编译

```
Short value = getValue(FIRST_KEY, string);  // should be Long 
```

更好的答案？不要使用`enum`！做`Key<T>`一个普通的班级。

```
public static class Key<T>
{
    public static final Key<Long> FIRST_KEY 
                  = new Key("actual key 1", Long.class);
    ...

    public final String value;
    public final Class<T> type;

    Key(String value, Class<T> type) {
        this.value = value;
        this.type = type;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T14:55:01.003

我会在`getValue()`方法中提供类型提示，例如

```
public <T> T getValue(Key k, Class<T> type); 
```

您可以通过检查密钥来检查方法内部的类型是否正确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T14:54:34.037

您可以初始化一个 Map<Class, String>，并为此添加一个方法。

*评论后编辑*

`Map<Class, Enum>`,如果 objectParameter 是`FIRST_KEY`Long`get(objectParameter.getClass())`

当然，如果 Long 有多个 key : `Map<Class, Set< Enum>>`并从您正在工作的环境中选择结果。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-26T14:53:55.547

您必须将枚举类作为参数传递：

```
public <T extends Enum> T getValue(key, Class<T extends Enum> enumClazz) {
    return enumClazz.cast(...);
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-26T15:25:39.950

在你的枚举中有一个 getType 方法，然后用它来帮助你转换你的字符串。

枚举中的 getType()。

```
 public Class getType()
 {      
    return type;    
 } 
```

使用 getType() 方法帮助转换字符串。

```
 public Object getValue(Key key , String strValue)
 {
    return key.getType().cast(strValue) ;   
 } 
```

您可能必须编写一个 IF 语句来确定如何解析不同对象的字符串，例如对于 Integer，使用 Integer.parseInt(s) 方法，否则您将获得 ClassCastExcpetion

# c# - 控制台应用程序停止工作

> ID：12604424
> 
> 赞同：0
> 
> 时间：2012-09-26T14:48:29.870
> 
> 标签：c#

代码是否可以在管理员配置文件上完美运行，而在以其他用户身份登录时根本无法运行？

我在工作中构建某些应用程序，并在以管理员身份登录时进行开发、编码和测试。每个应用程序正常工作。

现在在部署之前，当我执行相同的应用程序，但现在使用特定用户帐户登录时，我只收到错误“控制台应用程序停止工作”等。我已经用自己的消息框处理了所有可能的异常，但是这个错误是我没想到的吗？！

在exe中，我尝试将设置更改为“以管理员身份运行”，没有用！

任何帮助将非常感激。谢谢！

PS - 我从另一个类中重用了某些 FTP 方法。通过处理所有可能的异常，我的意思是，我将为 FTP 方法设置一个 try-catch 块，因此如果部署后遇到错误，受影响的用户可以致电帮助台并通知确切的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T15:40:42.230

`Well, its not the right way to go, but right click and run as Admin, works butter smooth. Should I go ahead and modify all executables to - Run as Administrator under Properties->Compatibility??`

您应该首先调查您的应用程序是否确实需要管理员权限。我能想到的一些应用程序需要管理员权限的场景是写入系统的受保护位置，写入注册表（不包括用户有权访问的区域）。如果您认为不需要管理员访问权限，您总是可以寻求其他方法来使其工作。例如，不要写入受保护的位置，而是在用户的应用程序数据文件夹中为您的应用程序创建一个目录并写入该位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T15:06:09.640

When you launch the application, if you're running on I believe Windows Vista or higher(7 works this way for sure)

You can Right click on the application and click on `Run as Administrator`

And yes, Sometimes the application won't work if you're not running as an administrator. For instance, If it's trying to change files in a protected location.

There are other variances that can cause your program to not work, For me, `"Console Application stopped working"` normally means that you don't have the right version of the .net framework installed, but it can mean any number of things.

# c++ - 从函数返回 STL 向量 - 复制成本

> ID：12604431
> 
> 赞同：19
> 
> 时间：2012-09-26T14:48:52.580
> 
> 标签：c++, stl, stdvector

从函数返回 stl 向量时：

```
vector<int> getLargeArray() {  ...  } 
```

退货会是昂贵的复制操作吗？我记得在某处读到向量赋值很快——我应该要求调用者传递一个引用吗？

```
void getLargeArray( vector<int>& vec ) {  ...  } 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-26T15:00:57.717

假设您的函数构造并返回新数据，您应该按值返回，并尝试确保函数本身有一个返回点返回类型为 的变量`vector<int>`，或者在最坏的情况下有几个返回点都返回相同的变量。

这确保您将在任何可靠的编译器上获得命名的返回值优化，从而消除了*一个*潜在的副本（从函数中的值到返回值的副本）。还有其他方法可以获得返回值优化，但它不是完全可预测的，所以简单的规则很安全。

接下来，您希望消除从返回值到调用者对其进行的任何操作的潜在副本。这是调用者的问题，而不是被调用者的问题，基本上有三种方法可以做到这一点：

*   使用对函数的调用作为 a 的初始化程序`vector<int>`，在这种情况下，任何可靠的 C++ 编译器都会忽略副本。
*   使用`vector`具有移动语义的 C++11。
*   在 C++03 中，使用“交换”。

也就是说，在 C++03*中不要*写

```
vector<int> v;
// use v for some stuff
// ...
// now I want fresh data in v:
v = getLargeArray(); 
```

反而：

```
getLargeArray().swap(v); 
```

这避免了`v = getLargeArray()`. 在 C++11 中不需要它，那里有一个廉价的移动分配而不是昂贵的复制分配，但当然它仍然有效。

要考虑的另一件事是您是否真的想要`vector`作为界面的一部分。您可以改为编写一个函数模板，该模板接受一个输出迭代器，并将数据写入该输出迭代器。想要向量中的`std::back_inserter`数据的调用者然后可以传入 的结果，想要数据在 a 中的调用者也可以传入`deque`or `list`。事先知道数据大小的调用者甚至可以只传递一个向量迭代器（最好是`resize()`d 优先）或一个指向足够大数组的原始指针，以避免`back_insert_iterator`. 有做同样事情的非模板方式，但它们很可能会以一种或另一种方式产生调用开销。如果您担心复制`int`每个元素的成本，那么您会担心每个元素的函数调用成本。

如果你的函数不构造和返回新数据，而是返回一些现有的当前内容`vector<int>`并且不允许更改原始数据，那么当你按值返回时，你不能避免至少一个副本。因此，如果它的性能是一个已证明的问题，那么您需要查看一些 API，而不是按值返回。例如，您可以提供一对可用于遍历内部数据的迭代器，一个按索引在向量中查找值的函数，甚至（如果性能问题严重到需要暴露您的内部），对向量的引用。显然，在所有这些情况下，您都更改了函数的含义——现在不是给调用者“他们自己的数据”，而是提供其他人数据的视图，这可能会改变。

[*] 当然，“好像”规则仍然适用，并且可以想象一个足够聪明的 C++ 实现来实现这一点，因为这是一个可简单复制的类型 ( `int`) 的向量，并且因为您没有使用任何指向任何元素（我假设），然后它可以交换，结果是“好像”它被复制了。但我不会指望它。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-26T14:51:21.667

您很可能会得到[返回值优化](http://en.wikipedia.org/wiki/Return_value_optimization)，具体取决于函数体的结构。在 C++11 中，您还可以从移动语义中受益。按值返回当然具有更清晰的语义，我认为它是首选选项，除非分析证明它的成本很高。[这里](http://cpp-next.com/archive/2009/08/want-speed-pass-by-value/)有一篇很好的相关文章。

这是一个带有冗长虚拟类的小示例，在没有优化或 C++11 支持的情况下使用旧版本的 GCC (4.3.4) 编译：

```
#include <vector>
#include <iostream>
struct Foo
{
  Foo() { std::cout << "Foo()\n"; }
  Foo(const Foo&) { std::cout << "Foo copy\n"; }
  Foo& operator=(const Foo&) { 
    std::cout << "Foo assignment\n"; 
    return *this;
  }
};

std::vector<Foo> makeFoos()
{
  std::vector<Foo> tmp;
  tmp.push_back(Foo());
  std::cout << "returning\n";
  return tmp;
}

int main()
{
  std::vector<Foo> foos = makeFoos();
} 
```

我平台上的结果是所有复制都发生在函数返回之前。如果我使用 C++11 支持进行编译，则 push_back 会导致移动副本而不是 C++03 副本构造。

# asp.net - 我如何使用 <%# Bind("myField") %> 从 asp.net 中的用户控件？

> ID：12604432
> 
> 赞同：0
> 
> 时间：2012-09-26T14:48:55.527
> 
> 标签：asp.net, data-binding, user-controls

正如标题所说，我想将数据从我的用户控件绑定到我的页面的 EntityDataSource。我试过这个：

在我的用户控制中：

```
<asp:Textbox runat="server" id="mytxtbox" Text='<%# Bind("myField") %> 
```

在我的asp页面中：

```
<% Register TagPrefix="uc" TagName="myControl" src="~/MyControl.ascx" %>
...
<asp:EntityDataSource ID="EDS" runat="server" ....></asp:EntityDataSource
<asp:FormView id="FormView1" runat="server" DataKeyNames="id" DataSourceId="EDS">
    <EditItemTemplate>
        <uc:myControl runat="server" id="customControl"/>
        ...
        <asp:LinkButton ID="UpdateButton" runat="server" CausesValidation="True" CommandName="Update" Text="Update" />
        <asp:LinkButton ID="UpdateCancelButton" runat="server" CausesValidation="False" CommandName="Cancel" Text="Cancel" />
    </EditItemTemplate>
    <InsertItemTemplate>
        <uc:myControl runat="server" id="customControl"/>
        ...
        <asp:LinkButton ID="InsertButton" runat="server" CausesValidation="True" CommandName="Insert" Text="Insert" />
        <asp:LinkButton ID="InsertCancelButton" runat="server" CausesValidation="False" CommandName="Cancel" Text="Cancel" />
    </InsertItemTemplate>
    <ItemTemplate>
        <uc:myControl runat="server" id="customControl"/>
        ...
        <asp:LinkButton ID="EditButton" runat="server" CausesValidation="False" CommandName="Edit" Text="Edit" />
        <asp:LinkButton ID="DeleteButton" runat="server" CausesValidation="False" CommandName="Delete" Text="Delete"/>
    </ItemTemplate>
</asp:formview> 
```

使用这种方法，我能够正确显示我的用户控件的字段（使用数据库中的适当内容），但我无法插入/更新数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T15:11:57.243

在 VS2010 中尝试过 detailsview/gridview。我使用 gridview 显示，然后通过传递值将其链接到 detailsview，我可以在 VS2010 中编辑/删除记录。

这可以是一个很大的帮助 [点击这里](http://www.asp.net/web-forms/tutorials/data-access/accessing-the-database-directly-from-an-aspnet-page/inserting-updating-and-deleting-data-with-the-sqldatasource-vb)

另外，看看这个[点击](http://msdn.microsoft.com/en-us/library/stc0szde%28v=vs.80%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T14:54:46.797

1 我建议你对`find`你的控制`Page_Init`，所以你通过你的DataSource（DataTable或其他）

```
var control = (UserControl)this.FindControl("id");
control.Property = .....; 
```

2 例如，您声明您控制的公共财产

3 并且你把你的控件绑定在他的代码后面。

注意：如果您的 userControl 中有网格控件，您可以使用`ItemDataBound`

# asp.net - 从网站下载后，文件上的数字签名消失了

> ID：12604437
> 
> 赞同：4
> 
> 时间：2012-09-26T14:49:06.143
> 
> 标签：asp.net, download, digital-signature, authenticode

我开发了一个软件应用程序，并使用从 Verisign（现为 Symantec）获得的 Authenticode 证书对我的安装程序进行了数字签名。我使用 Visual Studio 附带的 signtool.exe 实用程序对安装程序 (.exe) 进行了签名。当我运行安装程序时，它现在将我的公司名称显示为发布者，而不是“未知”，这是我的目标....成功！

然后我在我的网站上发布了安装程序文件以分发给我的客户。该文件由一个 asp:button 提供服务，单击该按钮将执行以下代码：

```
Response.ContentType = "application/octet-stream";

Response.AppendHeader("Content-Disposition", "attachment; filename=CP11Full_x86.exe");

Response.TransmitFile(Server.MapPath("~/Software/ContainmentPlanner/Files/CP11Full_x86.exe"));

HttpContext.Current.ApplicationInstance.CompleteRequest(); 
```

当我从我的网站下载安装程序文件并运行它时，发布者字段显示“未知”！！！然后我使用 FTP 客户端将文件直接从我的网络服务器复制到我的计算机，下载的文件有签名（即没有显示发布者：未知），所以显然网络服务器上的文件很好。它一定是关于通过网站下载文件的过程，该过程会去除或使数字签名无效。我尝试了 Firefox 和 IE 并得到了相同的结果。

我究竟做错了什么？提前感谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T19:16:06.860

可能是某些 HTML 被写入响应流，从而破坏了下载。试试这个：在调用 TransmitFile 之前，添加

```
Response.Clear(); 
```

在调用 TransmitFile 之后，添加

```
Response.SuppressContent = "true"; 
```

# openlayers - OpenLayers 中的 WMS 图层主题

> ID：12604438
> 
> 赞同：1
> 
> 时间：2012-09-26T14:49:14.373
> 
> 标签：openlayers, mapserver, wms

我有一个 WMS 图层（使用 MapServer），我想用 OpenLayers 中的某些颜色绘制它。

有谁知道怎么做这样的事情？？？

谢谢 ！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T19:41:37.773

您可以使用 SLD 使用自定义样式为 WMS 图层设置主题（即，您在 GetMap 请求中使用 SLD 或 SLD_BODY 参数指定自定义样式）。您可以从[http://mapserver.org/ogc/sld.html中的服务器端支持段落开始](http://mapserver.org/ogc/sld.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T18:52:36.533

如果您在数据库中有几何图形，请尝试制作**WKT**层:)

# jquery - jquery悬停菜单随时间添加类

> ID：12604440
> 
> 赞同：0
> 
> 时间：2012-09-26T14:49:17.850
> 
> 标签：jquery

在某些网站上，我看到了这种效果：如果我悬停某些菜单背景颜色不会立即改变，但它会在某个特定时间改变并且看起来像动画，我怎样才能获得这种效果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T14:55:15.830

这可以通过 css3 `transition`（没有 javascript）轻松完成，或者在旧浏览器上对特定属性进行动画处理

例如[http://jsbin.com/ulayum/3/edit](http://jsbin.com/ulayum/3/edit)

```
a {
   color: 000;
   -webkit-transition: color 2s;
   -msie-transition: color 2s;
   -moz-transition: color 2s;
   -o-transition: color 2s;
   transition: color 2s;
}

a:hover {
   color: #ccc; 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T14:56:06.750

您要研究的是**CSS 过渡效果**。[谷歌搜索结果](https://www.google.co.uk/search?q=css%20transition%20delay&aq=2&oq=css%20transition&sugexp=chrome,mod=5&sourceid=chrome&ie=UTF-8#hl=en&sclient=psy-ab&q=css%20transition%20background%20color&oq=css%20transition%20backgrou&gs_l=serp.3.2.0l4.132349.134764.3.136310.10.3.1.6.7.1.137.348.0j3.3.0.les;..0.0...1c.1.bEwTeooMtEo&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&fp=b42c98eb7706fa70&biw=1440&bih=815)

看看这个基本的[jsFiddle](http://jsfiddle.net/ZhBEg/)当你悬停时，背景颜色会变成红色。

CSS

```
div{ 
    background-color: blue;
    -webkit-transition: background-color 1000ms linear;
     -moz-transition: background-color 1000ms linear;
     -o-transition: background-color 1000ms linear;
     -ms-transition: background-color 1000ms linear;
     transition: background-color 1000ms linear;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T14:53:33.897

这可能是您正在寻找的

```
$("div").hover(function () {
      $(this).effect("highlight", {}, 3000);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T14:53:46.173

您可以使用 javascript 的“setTimeout”函数为效果添加延迟.. 像

使用 jquery 悬停事件的伪代码：

```
.... .hover(function() {

      //on mouseover
      setTimeout(FunctionThatDoesSomethingCool(), 3000); //3000 = delay/milliseconds
},
function() {
       //mouseout
}
}); //end hover event 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T14:53:58.887

我认为您正在寻找的是像这样的插件，所以看看：[hoverintent](http://cherne.net/brian/resources/jquery.hoverIntent.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-26T14:54:19.903

```
$(selector).mouseover(function(){
 // change color   
}).delay('time'); 
```

# php - MySQL、PHP、PDO“找不到驱动程序”错误

> ID：12604441
> 
> 赞同：2
> 
> 时间：2012-09-26T14:49:27.250
> 
> 标签：php, mysql, pdo

我收到“找不到驱动程序”错误....有什么想法吗？我已经盯着这个看了很长时间，所以我需要用新的眼光来看待它。谢谢！

```
<?php

    try {

    $objDb = new PDO('myql:host=localhost;dbname=test',
    '$user', '$pass');
    $objDb->exec('SET CHARACTER SET utf8');

    $sql = "SELECT *    
            FROM 'departments'
            WHERE 'code' = 0";
    $statement = $objDb->query($sql);
    $list = $statement->fetchAll(PDO::FETCH_ASSOC); 

    } catch(PDOException $e) {
    echo $e->getMessage();

     }
    ?> 
```

我不知所措....我家里有所有这些设置，所以我对一切都有根。这是我所知道的：

```
**phpinfo()**

**PDO**
PDO support enabled
PDO drivers     mysql 

**pdo_mysql**
PDO Driver for MySQL    enabled
Client API version  mysqlnd 5.0.10 - 20111026 - $Id: b0b3b15c693b7f6aeb3aa66b646fee339f175e39 $ 

**mysql**
MySQL Support   enabled
Active Persistent Links     0
Active Links    0
Client API version  mysqlnd 5.0.10 - 20111026 - $Id: b0b3b15c693b7f6aeb3aa66b646fee339f175e39 $ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T14:52:16.527

你有`myql`而不是`mysql`.

```
$objDb = new PDO('myql:host=localhost;dbname=test', ... 
```

`PDO`从那里的名称派生要使用的驱动程序，因此它正在寻找`myql`驱动程序。

# c# - 尝试在 C# 中连接到 Excel 电子表格

> ID：12604446
> 
> 赞同：2
> 
> 时间：2012-09-26T14:49:35.127
> 
> 标签：c#, excel, ms-access, connection-string

我正在尝试从电子表格中提取一堆数据，但是我无法在我的 C# 代码中建立成功的连接。乙

下面是连接字符串和我用来建立连接的代码。该程序的目标是从电子表格中提取数据并将其存入 SQL 数据库。我无法通过 connection.open() 命令，但是没有收到此错误消息：

“外部表不是预期的格式”

```
 string connectionString = @"Provider=Microsoft.Jet.OLEDB.4.0;Data Source=C:\Users\nearod\Desktop\TestLoad.xlsx;Extended Properties='Excel 8.0;HDR=Yes;IMEX=1'";
        string queryString = "SELECT * FROM [SQL AgentUnique ID Test Load$]";
        try
        {
            OleDbDataReader reader;
            using (OleDbConnection connection = new OleDbConnection(connectionString))
            {

                OleDbCommand command = new OleDbCommand(queryString, connection);
                connection.Open();
                reader = command.ExecuteReader();

                while (reader.Read())
                {
                    counter++;

                    //Access db values
                    string compCode = "";
                    string agId = "";
                    string fName = "";
                    string lName = "";
                    string nameSuffix = "";

                    compCode = reader.GetValue(0).ToString();
                    agId = reader.GetString(1);
                    fName = reader.GetString(2);
                    lName = reader.GetString(3);
                    nameSuffix = reader.GetString(4);

                    sqlComm.Parameters.Add(companyCode);
                    sqlComm.Parameters.Add(agentID);
                    sqlComm.Parameters.Add(firstName);
                    sqlComm.Parameters.Add(lastName);
                    sqlComm.Parameters.Add(suffix);

                    //Initialize connection objects
                    cm = Dts.Connections["QUAHILSQ03"];
                    sqlConn = (SqlConnection)cm.AcquireConnection(Dts.Transaction);
                    sqlComm = new SqlCommand("AgentResourcesU01.dbo.sp_AgentIdAprCheck", sqlConn);
                    sqlComm.CommandType = CommandType.StoredProcedure;

                    //Execute stored procedure
                    sqlComm.ExecuteNonQuery();

                }
                reader.Close();
                connection.Close();
                OleDbConnection.ReleaseObjectPool();
            } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T14:51:46.987

对于 *.xlsx，您需要 Ace 驱动程序：Microsoft.ACE.OLEDB.12.0

```
string connectionString = @"Provider=Microsoft.ACE.OLEDB.12.0;
 Data Source=C:\Users\nearod\Desktop\TestLoad.xlsx;
 Extended Properties='Excel 8.0;HDR=Yes;IMEX=1'"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T14:56:02.843

很久以前写过这个。它在 WebForms 中，但 .cs 文件显示您想要的： [将 excel 电子表格转换为数据集、数据表和多维数组](http://naspinski.net/post/Converting-an-Excel-Spreedsheet-to-a-DatSet2c-Datatable-and-Multi-Dimensioanl-Array.aspx)

```
string connectionString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source="+FileToConvert+";Extended Properties=Excel 8.0;";
try
{
    OleDbConnection connection = new OleDbConnection(connectionString);
    connection.Open();
    //this next line assumes that the file is in default Excel format with Sheet1 as the first sheet name, adjust accordingly
    OleDbDataAdapter adapter = new OleDbDataAdapter("SELECT * FROM [Sheet1$]", connection);
    DataSet ds = new DataSet();
    DataTable dt = new DataTable();
    adapter.Fill(ds);//now you have your dataset ds now filled with the data and ready for manipulation
    // do stuff
} 
```

# c# - 如何使用 NHibernate 左连接两个不同的表

> ID：12604450
> 
> 赞同：1
> 
> 时间：2012-09-26T14:49:45.613
> 
> 标签：c#, nhibernate, fluent-nhibernate

我有三个表（表 A、B 和 C）。我想做以下事情：左连接 A 和 B，左连接 A 和 C。

现在我使用了 CreateCriteria，使用 jointype 进行连接，该连接工作到一定程度，但会引发 Query 异常。这似乎是因为它似乎试图将 B 与 C 而不是 A 和 C 连接起来。

代码：

```
currencies = session.CreateCriteria(typeof(Currency), "TableA")                 
            .CreateCriteria("FXRates", "TableB",
                            JoinType.LeftOuterJoin, 
                            Expression.Eq("fxrate.RateDate",date))
            .CreateCriteria("FundingRates", "TableC", 
                            JoinType.LeftOuterJoin,
                            Expression.Eq("fundingrate.RateDate", date))
            .Add(Restrictions.IsNotNull("currency.code"))
            .List<Currency>(); 
```

如果我错过了任何内容或没有提供足够的细节，请提前道歉，如果您需要更多信息，请告诉我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T19:36:44.937

您可以使用 NHibernate "QueryOver" 来做到这一点：

```
session.QueryOver<Item_A>()
   .Left.JoinQueryOver(item_A => item_A.Item_B)
   .Left.JoinQueryOver(item_A => item_A.Item_C)
   .TransformUsing(Transformers.DistinctRootEntity)
   .List(); 
```

# android - 库错误 - Aviary - Android

> ID：12604451
> 
> 赞同：0
> 
> 时间：2012-09-26T14:49:46.827
> 
> 标签：android, layer, aviary

我正在尝试将 Aviary API 插入我的应用程序，但我遇到了一些奇怪的错误。

首先，Aviary 提供了一个测试应用程序来展示如何实现 API 以及它应该如何工作。这个应用程序运行良好，但我在 android 4.0 上运行它。

我的应用程序在 2.2 上运行，每当我插入 Android-Feather 库时，我都会收到此错误：

```
[2012-09-26 09:44:24 - The Fotolife App]     (skipping file '.DS_Store' due to ANDROID_AAPT_IGNORE pattern '.*')
[2012-09-26 09:44:24 - The Fotolife App]     (skipping file '.DS_Store' due to ANDROID_AAPT_IGNORE pattern '.*')
[2012-09-26 09:44:24 - The Fotolife App] /Users/BradleyHoffman/Desktop/JavaPrograms/Android-Feather/res/values/styles.xml:5: error: Error: No resource found that matches the given name: attr 'android:layerType'. 
```

这是我的应用程序的清单属性：

```
<uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="14" /> 
```

这是 API 清单：

```
<uses-sdk android:minSdkVersion="8" /> 
```

我将不胜感激任何帮助！提前谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T14:59:03.200

以下链接为您提供了修复 Android aviary 中的库错误的解决方案

[使用 Android 库项目时，如何正确引用 xml 资源？](https://stackoverflow.com/questions/4846056/when-using-an-android-library-project-how-do-you-reference-xml-resources-properl)

# tcp - 您如何读取 tcp 连接上的所有字节？

> ID：12604464
> 
> 赞同：2
> 
> 时间：2012-09-26T14:50:14.157
> 
> 标签：tcp, redis, go

建立连接并要读取来自连接的字节后，如何读取所有字节？根据我的尝试，我可以阅读直到它到达一个分隔符，如换行符。但是如何获得包括换行符在内的所有内容？我正在尝试在 Go 中创建一个 redis 客户端，并且协议用 \r\n 分隔结果，所以在这种情况下，Buffer.ReadLine 或 Buffer.ReadSlice 没有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T15:55:37.777

要从 Reader 读取所有字节（例如您的 TCP 连接），您可以使用[`ioutil.ReadAll`](http://golang.org/pkg/io/ioutil/#ReadAll)，它会读取直到`EOF`从另一端发送 an 或发生错误。

请注意，已经有一些用于 go 的[redis 客户端。](http://redis.io/clients/#Go)

# python - 我应该如何导入一个类模块来测试它

> ID：12604466
> 
> 赞同：5
> 
> 时间：2012-09-26T14:50:22.007
> 
> 标签：python, class, module

在线搜索在这件事上没有那么有用。我正在尝试创建一个包含几个类的模块并对其进行测试。我一直无法通过第一部分。我创建了一个具有 3 个属性及其 getter 方法的简单类，因此我从“主要”方法中看到了它们的属性（我猜）

我需要创建这个类的一些对象，以便稍后使用。

类定义是

```
class Person:
    def __init__(self, n, a, s):
        self.name = n
        self.age = a
        self.sex = s
    def getAge(self):
        return self.age
    def getSex(self):
        return self.sex 
```

我将此文件保存在 test.py 文件中，从我导入的 shell 中保存，但是当我实例化和对象时，我不断收到相同的错误

```
Traceback (most recent call last):
  File "<pyshell#1>", line 1, in <module>
    x = Person('myname', 10, 'm')
NameError: name 'Person' is not defined 
```

test.py 位于 C:/Python3.x 目录中，所以我真的没有收到这个错误。

当我只是在 shell 中键入整个类并实例化对象时，一切正常，但在我的情况下这是无用的，因为模块会随着时间的推移而增长。

请仅在您愿意提供帮助的情况下回答，不要将我发送到相同的教程，这些教程不会在没有外壳的情况下解释任何内容。我需要使用模块并理解我得到的错误的含义。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T14:52:16.300

您的类可能应该派生自`object`，但这不是错误的原因。您可能正在尝试访问未明确导入的名称。您可以导入整个模块，也可以导入模块中的名称。

```
import test
test.Person() 
```

或者

```
from test import Person
Person() 
```

或两者。没有错误，但也没有多大意义。

您可能很想通过键入`from test import *`来模仿其他语言的行为，但在大多数情况下，这在 python 中被认为是不好的风格。显式优于隐式。

要了解有关导入如何工作的更多信息，请尝试`import test`然后`dir(test)`. 或者`import itertools`，`dir(itertools)`或者下载一些不错的代码库，比如[Werkzeug](http://pypi.python.org/pypi/Werkzeug)，阅读代码以了解它的结构，然后尝试通过 REPL 导航它。

# bash - 在 bash 中查找和删除 .txt 文件

> ID：12604468
> 
> 赞同：11
> 
> 时间：2012-09-26T14:50:27.473
> 
> 标签：bash, unix

> **可能重复：**
> [命令行：管道查找结果到 rm](https://stackoverflow.com/questions/11191475/command-line-piping-find-results-to-rm)

最近，我的外部硬盘驱动器上装有我的照片（大多数都在 DVD 上，但是..）通过一些分区 friggery。

幸运的是，我能够将 PhotoRec 与另一个 Unix 分区实用程序和 PDisk 重新组合在一起。

PhotoRec 返回了一千多个文件夹，其中包含从 .txt 文件到重要的 .NEF 的任何内容。

因此，我尝试使用 unix 使排序更容易，因为 OSX Finder 在选择和删除十亿个 .txt 文件的请求下会简单地崩溃。

但是当我尝试查找和删除 txt 文件，或者递归查找所有 jpeg 并将其移动到一个名为 jpegs 的新文件夹中时，我遇到了一些 BS。我是一个unix菜鸟，所以我需要一些帮助。

这是我在 bash 中所做的。（我在 ls 将列出我需要操作的所有文件夹和文件的目录中）。

寻找 。-name *.txt | R M

或者

须藤找到。-name *.txt | rm -f

所以它给了我一些我需要取消链接文件的BS。任何。

我需要递归查找所有 .txt 文件并删除它们最好是详细的。

谢谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-26T14:52:40.727

您不能将文件名通过管道传输到`rm`. 你需要`xargs`改用。另外，请记住引用文件模式`".txt"`，否则 shell 会扩展它。

```
find . -name "*.txt" | xargs rm 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-09-26T14:53:40.323

```
find . -name "*.txt" -exec rm {} \; 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-09-26T15:37:14.510

```
$ find  . -name "*.txt" -type f -delete 
```

# c# - UpdateProgress 中的 ASP.net 文件上传器发送空

> ID：12604472
> 
> 赞同：0
> 
> 时间：2012-09-26T14:50:52.273
> 
> 标签：c#, ajax, file-upload, updatepanel

我正在尝试发送一些数据以写入我们的 SQL 服务器。我添加了一个更新面板，以便用户知道它正在处理。在我添加更新面板之前，所有数据都可以正常发送，在我添加更新面板之后，文本框可以正常发送，但 FileUpload 控件无法发送任何内容。有任何想法吗？谢谢。这是我的aspx代码

```
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
<asp:ToolkitScriptManager ID="ToolkitScriptManager" runat="server">
</asp:ToolkitScriptManager>
       <h2>   
        Upload Your File
        </h2><br />
        <asp:FileUpload ID="FileUploader" runat="server" />
        <br /><br />
        Please Enter a Patient ID: <asp:TextBox ID="PatientIDTextBox" runat="server"></asp:TextBox>
        <br /><br />
        Please Enter a Draw Date: <asp:TextBox ID="DrawDateTextBox" runat="server"></asp:TextBox>
        <asp:CalendarExtender
        ID="CalendarExtender1"
        TargetControlID = "DrawDateTextBox"
        runat="server">
        </asp:CalendarExtender><br />
    <asp:UpdatePanel ID="UpdatePanel1" runat="server">
    <ContentTemplate>
        <asp:Button ID="ProcessFileBtn" runat="server" Text="Process File"  
        OnClick="ProcessFileBtn_OnClick" /><br /><br />
        <asp:Label ID="TestLabel" runat="server" Text=""></asp:Label><br /><br />
    </ContentTemplate>
</asp:UpdatePanel>
<asp:UpdateProgress ID="UpdateProgress1" runat="server">
    <ProgressTemplate>
        <div id="blur">&nbsp;</div>
        <div id="progress" class="center">
            <center>
                <i>Update in progress. Please wait ...<br />
                </img src="Images/MyAjaxLoader.gif" />
            </center>
        </div>  
    </ProgressTemplate>
</asp:UpdateProgress> 
```

# java - 使用@Transactional 确保线程安全

> ID：12604476
> 
> 赞同：7
> 
> 时间：2012-09-26T14:51:08.153
> 
> 标签：java, spring, isolation-level, transaction-isolation

我有一个关于 @Transactional 注释如何单独管理代码和事务执行的问题。给定正确设置的 Spring 应用程序和以下代码：

```
@Transactional
public void withdraw(int amount) {
    if(isEnoughFunds(amount)) {
        decreaseFunds(amount);
    }
} 
```

是否有可能出现以下情况：

*   资金 == 100；金额 == 100
*   线程 A 进入提现/事务 A 开始
*   线程 A 执行 isEnoughFunds 评估结果为 true
*   线程 B 进入提现/事务 B 开始
*   线程 B 执行 isEnoughFunds 评估结果为 true
*   线程 A 执行 reductionFunds / 线程 A 锁定 db 记录
*   线程 B 等待线程 A 提交事务并释放写锁
*   线程 A 退出退出 / 事务 A 提交
*   线程 B 执行 reductionFunds / 线程 B 锁定 db 记录
*   线程 B 退出退出 / 事务 B 提交
*   资金 == -100

如果这是可能的，您将如何防止这种情况发生？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T16:58:52.127

是的，这是可能的，具体取决于隔离级别。为了防止这种情况，您可以在调用 ifEnoughFunds() 之前从数据库中显式获取读锁。锁将在事务结束时释放。在这种情况下，线程 B 将始终等待线程 A 的事务提交，然后再进行检查。

# java - 用于 '？扩展'和'？集合泛型中的 super '

> ID：12604477
> 
> 赞同：6
> 
> 时间：2012-09-26T14:51:08.563
> 
> 标签：java, generics, collections

任何人都可以解释为什么我们`?`在`Collection`泛型中使用。

例如：

```
 List<? extends Number> numberlist;
 List<? super Integer> numberlist; 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-26T15:33:46.590

通配符引入了如何使用集合的限制。

例如，使用`List<? extends Number>`，我无法将新元素添加到列表中。这是因为我只知道列表是 的某种子类型`Number`，但我不知道实际的子类型是什么（所以我怎么知道要添加什么？）。例如，采用以下代码：

```
public void doSomethingWith(List<? extends Number> numbers) {
    numbers.add(Integer.valueOf(0)); // Won't compile
} 
```

这不会编译，因为这两个*方法*调用都是合法的：

```
doSomethingWith(new ArrayList<Integer>());
doSomethingWith(new ArrayList<Double>()); 
```

您*可以*做的是从列表中*读取*元素：

```
// This will all compile
public void doSomethingWith(List<? extends Number> numbers) {
    for (Number number : numbers) {
        // Do something with number
    }
    // OR
    Number number = numbers.get(0);
    // OR
    Number number = numbers.remove(0);
} 
```

对 like 方法的调用`get`将返回某种`Number`，我们知道这是因为 的事实`? extends Number`，所以我们可以这样对待它以用于阅读目的。

另一方面，`List<? super Integer>`却有着完全相反的结果。我不能再从列表中读取，但我可以写入它。我知道不管`?`是什么，它肯定是 的超类`Integer`，所以列表的具体类型肯定会接受`Integer`值。例如：

```
public void doSomethingWith(List<? super Integer> integers) {
    integers.add(Integer.valueOf(0));
} 
```

该代码是完全合法的。但是，如果您想从列表中读取，唯一的方法是使用`Object`，因为其他任何东西都需要强制转换（这需要知道它的具体类型）：

```
for (Object obj : integers)
// OR
Object obj = integers.get(0);
// OR
Object obj = integers.remove(0); 
```

**到底发生了什么**

这是实际发生的事情。当您指定 时`? extends Number`，您正在使任何*将*元素作为参数的方法都无法使用。事实上，如果您尝试在 Eclipse 中使用 Ctrl+Space 自动完成代码，它会在方法等中`List<? extends Number>`显示`null`为参数的类型。`add`同时，所有*返回*元素的方法都保证至少返回某种`Number`，尽管您不会确切知道`Number`它实际上可能是哪个子类。

当您指定 时`? super Integer`，您正在使任何*将*元素作为参数的方法保证它们将接受`Integer`值（以及它们的子类`Integer`）。这允许您调用方法，`add`因为您知道它们将接受`Integer`类型。同时，所有*返回*元素的方法都只保证返回*一些东西*，但我们不知道是什么，所以所有返回元素的方法都只保证返回`Object`。

PECS 是一个很好的首字母缩略词来记住这一点，它的意思是“ **P****生产者**扩展，消费者**S****超级**”。这意味着如果你想让你的列表给你一些东西，它是一个生产者，你应该使用. 如果你想让你的列表接受你的东西，它是一个消费者，所以你使用. 有关更多信息，请参阅[此答案](https://stackoverflow.com/questions/2723397/java-generics-what-is-pecs)。****`extends``super`****

 ******但是如果我有一个没有边界的通配符呢？**

两者兼而有之！`<?>`限制您调用将泛型类型作为参数的方法，*并*导致所有返回泛型类型的方法返回`Object`。这是因为我们不知道类型是什么。例如，所有这些对 a 的赋值`List<?>`都是合法的：

```
List<?> list;
list = new ArrayList<Integer>();
list = new ArrayList<String>();
list = new ArrayList<MyClass>(); 
```

等等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T15:06:36.503

**当您学习通配符和extends**和**super**之间的差异时，只需记住[PECS](https://stackoverflow.com/questions/2723397/java-generics-what-is-pecs)。这条规则包含所有内容，非常简单易记。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T14:55:39.197

它是一个通配符。? 表示任何继承自 number 或者是 Integer 类的超类的类都可以工作。希望这可以帮助。:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T14:53:01.900

`?`意思是任何类

```
? extends MyClass 
```

表示 MyClass 或 MyClass 本身的任何子类。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-26T14:52:02.557

`?`用于在使用泛型时定义[通配符。](http://docs.oracle.com/javase/tutorial/java/generics/wildcards.html)

您在示例中的语句告诉 List 接受任何类型的对象`Number`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-26T15:02:33.263

这是我要说的：

```
List<? extends Number> numberlist; //Any class that is extended from Number class,  for example Integer, BigInt, ... may come

List<? super Integer> numberlist; //Any class that Integer class is extended from. Here for example Number may come 
```

因为：

```
Integer extends Number{
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-26T15:06:49.773

`List<? extends Number>`并且`List<Number>`都允许添加例如整数，但是：`List<Number>`你可以在那里放入整数和任何其他“是”数字的东西。你可以在`List<? extends Number>`那里只放一个具体的运行时类型。无论是整数，那么您就不能添加另一种也是数字的类型。****

# user-interface - 如何记录 Linux 上 GUI 点击的底层 CLI 操作？

> ID：12604481
> 
> 赞同：2
> 
> 时间：2012-09-26T14:51:16.093
> 
> 标签：user-interface, command-line-interface

我经常编写脚本，这也可以通过图形用户界面来完成。做一次，很容易使用 gui。要经常这样做，使用脚本要快得多。

（几乎）所有 gui 应用程序都使用底层 cli 应用程序。例如，切换桌面分辨率很可能会发出 xrandr 调用。

或者一个 gui 点击只是改变了一些底层配置文件，这同样有趣。

阅读 cli 文档并找出相同的结果需要时间。可以改进吗？

我的意思是，我可以记录 Linux 上任何 GUI 点击的底层 CLI 调用吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T12:15:52.907

> （几乎）所有 gui 应用程序都使用底层 cli 应用程序。

这是不真实的。大多数应用程序在自己的代码或其他库中使用对函数的调用。在 Nautilus 中删除文件不会运行`rm(1)`，它会调用`unlink(2)`（参见 参考资料`man 2 unlink`）。使用 xrandr 函数的程序应该使用`Xrandr(3)`而不是`xrandr(1)`. 产生另一个进程来处理这些任务是缓慢、浪费和丑陋的。

尽管如此，您仍然可以使用[auditd](http://www.linuxscrew.com/2012/07/04/track-file-changes-auditd/)捕获相关详细信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T18:18:00.230

一个非常有价值的工具是 strace。这使您可以在给它适当的标志时查看哪些文件正在更改以及正在写入的内容。

见： http: [//www.hokstad.com/5-simple-ways-to-troubleshoot-using-strace.html](http://www.hokstad.com/5-simple-ways-to-troubleshoot-using-strace.html)

如果 GUI 只是按照其他答案的建议调用程序，您会看到它。如果您正在寻找 dbus 和应用程序之间的网络交互，您也会看到这一点。还将看到对套接字文件的访问。

最好使用 netstat -nlp 来找出各个守护进程正在使用的端口，以便您可以轻松地跟踪交互。

如果您感兴趣的是网络流量，那么 tcpdump 当然是答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T22:33:48.017

你是从一个不完全正确的层面来看待这个问题。您所谓的“CLI 应用程序”实际上是任何使用标准 i/o 流而没有 GUI 的软件。CLI 应用程序，作为基于 GUI 的应用程序或 Web 服务器是具有一些执行库和内核调用的逻辑的前端。您可能有一个使用 xrandr 更改分辨率的应用程序。相反，您可能有一个应用程序通过使用一些围绕 X 协议的库来执行此操作，或者使用 X 协议执行此操作的应用程序，甚至是一个使用内核调用来更改分辨率的应用程序（这里我*主要*指的是较旧的内核） ！
正如以前的海报所回答的那样，您可能能够以某种方式拦截到 CLI 应用程序的消息，但我怀疑这就是您所指的。除了使用库拦截您想要测试的软件底层库的工作之外，您无法跟踪每个操作 - 然后您将获得库调用列表，而不是带有参数的 CLI 应用程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T19:41:02.627

我不确定这是否是您所要求的，但有时我会使用此技巧来了解幕后发生的事情。首先，我开始捕获`ps afxu`循环中的输出：

```
counter=0 ; while (true) ; do ps afxu > ps-afxu-capture-step-$counter ; echo "Capturing step $counter..." ; sleep 0.01 ; counter=$((counter + 1)); done 
```

然后我`diff`捕获了“帧”，看看发生了什么变化：

```
for i in `seq 1 100` ; do diff ps-afxu-capture-step-$i ps-afxu-capture-step-$((i+1)) ; done > ps-afxu-capture-diff.txt 
```

我昨天才使用这个技巧来试图**[了解`mk4ht`正在做的事情](https://tex.stackexchange.com/q/75277/19518)**。

呃，最好在`/tmp`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-05T09:51:28.730

这是我曾经用来深入了解传递给 CLI 命令的参数的一个廉价技巧：

在特定位置（如）创建一个*可执行*`~/bin`脚本，打印出命令行参数：

```
#!/bin/sh
echo $@
exit 0 
```

将其命名为与您要模仿的 CLI 可执行文件相同。现在因为可能有两个同名的可执行文件，bash 将按照 PATH 环境变量中指定的顺序执行它找到的第一个可执行文件。

也就是说，暂时更改您的 PATH 以包含`~/bin`在任何其他路径之前：

```
export PATH="$HOME/bin:$PATH" 
```

*现在使用更改的 PATH在*终端中运行 GUI 应用程序，将调用您的脚本而不是原始 CLI 可执行文件。您的脚本将打印出任何传递的参数。

# java - JAVA：JLabel 在事件中没有改变

> ID：12604483
> 
> 赞同：0
> 
> 时间：2012-09-26T14:51:22.153
> 
> 标签：java, user-interface, jlabel

我尝试使用 GUI 下载一个 HTTP 链接，当单击**开始下载**按钮将开始下载时，下载正在工作，但在 ActionListener 中声明的下载开始时标签没有改变。请帮我。

这是代码

标签应在下载开始和完成时更改。

```
public class SwingGUI2 extends javax.swing.JFrame {    
private javax.swing.JLabel jLabel1;
private javax.swing.JButton jButton1;
private URLConnection connect;

private SwingGUI2() {
    setLayout(new FlowLayout());

    jLabel1 = new javax.swing.JLabel();
    jLabel1.setText("");
    add(jLabel1);

    jButton1 = new javax.swing.JButton();
    jButton1.setText("Start Download");
    add(jButton1);

    jButton1.addActionListener(new java.awt.event.ActionListener() {

        @Override
        public void actionPerformed(ActionEvent e) {
            jButton1ActionPerformed(e);
        }
    });

    pack();
}
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {
    jLabel1.setText("Download Started");  //NOT WORKING
    try {
        String DownURL = "http://www.number1seed.com/music/flymetothemoon.mp3";
        URL url = new URL(DownURL);
        connect = url.openConnection();
        File file = new File("download");

        BufferedInputStream BIS = new BufferedInputStream(connect.getInputStream());
        BufferedOutputStream BOS = new BufferedOutputStream(new FileOutputStream(file.getName()));
        int current;
        while((current = BIS.read())>=0) BOS.write(current);
        BOS.close();
        BIS.close();

        jLabel1.setText("Completed");   //NOT WORKING

    } catch (Exception e) {}
}

public static void main(String[] args) throws ClassNotFoundException, InstantiationException {
    try {
        javax.swing.UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
    } catch (IllegalAccessException ex) {
        Logger.getLogger(SwingGUI2.class.getName()).log(Level.SEVERE, null, ex);
    } catch (UnsupportedLookAndFeelException ex) {
        Logger.getLogger(SwingGUI2.class.getName()).log(Level.SEVERE, null, ex);
    }

    java.awt.EventQueue.invokeLater(new Runnable() {
        public void run() {
            SwingGUI2 gui = new SwingGUI2();
            gui.setVisible(true);
            gui.setSize(300,200);
            gui.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        }
    });
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:58:25.533

您正在尝试从 Event Dispatcher Thread 运行下载，导致您的 GUI 在执行任务时冻结。

看看[SwingWorker](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)作为后台线程执行下载任务。你的`actionPerformed`方法应该是这样的：

```
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {
    jLabel1.setText("Download Started"); 
    SwingWorker sw = new SwingWorker() {
            public Object doInBackground(){
                try {
                    // ...
                    // Do the whole download thing
                } catch (Exception e) {
                    e.printStackTrace();
                }

                jLabel1.setText("Completed");
                return null;
            }
        };
    sw.execute();
} 
```

注意：请确保您不要吞下此 catch 中的异常，否则您将无法查看是否发生任何错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T14:58:55.080

您正在错误的事件调度线程下运行下载。这会阻止 EDT 线程执行下载以外的任何操作。

您应该在单独的线程中进行下载，标签将开始更新。

# php - 如何在 drupal 7 中修复此错误

> ID：12604494
> 
> 赞同：0
> 
> 时间：2012-09-26T14:51:43.287
> 
> 标签：php, filter, drupal-7

请有人可以帮助我我在drupal方面没有太多经验我正在制作一个网站我想为用户放置一些过滤器来搜索信息我正在使用views_dependent_filters我有一个包含4个国家的过滤器我希望当用户选择一个国家时另一个领域与这个国家的城市一起显示我认为这是正确的，但我收到了这个错误，我目前正在本地服务器上运行这个网站，这是错误

```
Notice: Undefined index: dependent_exposed_filters in views_dependent_filters_exposed_form_after_build() (line 32 of C:\wamp\www\ukmarketplace\sites\all\modules\views_dependent_filters\views_dependent_filters.module).
Warning: Invalid argument supplied for foreach() in views_dependent_filters_exposed_form_after_build() (line 32 of C:\wamp\www\ukmarketplace\sites\all\modules\views_dependent_filters\views_dependent_filters.module). 
```

过滤器有时可以，有时不行，我已经更新了我的网站，运行 update.php 并没有，清除缓存，如果有人可以帮助我，我将不胜感激，非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T08:51:21.853

模块问题队列中已经存在问题：http: [//drupal.org/node/1441352](http://drupal.org/node/1441352)。请检查[评论 #12 中的补丁](http://drupal.org/files/1441352.views_dependent_filters.exposed-filters-block.patch)。

# .net - 将 Windows 窗体应用程序迁移到 Windows 服务/服务控制器的建议

> ID：12604497
> 
> 赞同：2
> 
> 时间：2012-09-26T14:51:52.503
> 
> 标签：.net, vb.net, windows-services

我在 vb.NET 中开发了一个处理条码扫描的 Windows 窗体应用程序（条码阅读器设置在 comm 端口上 - 应用程序将扫描的代码传递给处理扫描并将结果返回到的 asp.net asmx Web 服务应用程序）。

该应用程序运行良好，但我的任务是允许在 PC 注销时使用条形码扫描仪。

我在 vb.net (.net framework 4.5) 中开发了一个原型 windows 服务，它将接受条形码扫描 - 目前正在将扫描写入 windows 事件日志，但这将连接到 web 服务以处理扫描。

此服务在 PC 已注销的情况下工作。

我现在需要的是一个显示用户界面的应用程序——即我需要在扫描条形码时弹出一个窗口。我还希望能够“读取”服务正在处理的“条形码扫描仪”对象的集合，以便将它们显示给用户。我还需要能够配置 Windows 服务（设置 Web 服务 URL 等）。

任何人都可以就实现这一目标的最佳方式给我任何建议吗？Windows 服务可以将信息“推送”到“客户端”吗？如果是这样，实现这一目标的机制是什么？

Windows 服务可以公开方法（例如“GetScanners”或“GetLastScan”）吗？您将如何设置？

感谢您的任何想法/建议！

克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T15:04:02.640

我会推荐以下两个选项之一：

1.  从窗口的服务中托管 WCF 服务，然后让客户端应用程序引用该 WCF 服务。然后客户端可以调用适当的 WCF 方法来查询服务的当前状态或设置它的属性。
2.  该服务可以从一个常用的数据库读取/写入它的所有状态和设置。然后，客户端可以直接从同一个数据库读取和写入。

第一种选择可以说是更好的选择。它更灵活地满足未来的需求，提供与服务通信的实时方法。但是，WCF 可能需要很长的学习曲线，因此，如果您对 WCF 尚不熟悉，并且选项 2 满足您当前的需求，那么这不是一个糟糕的解决方案。

WCF 的工作原理本质上类似于 Web 服务，但它更强大且更可配置。如您所建议的，如果您需要从 Windows 服务公开诸如“GetScanners”之类的方法，则可以使用此解决方案。

# javascript - JS - 根据内容调整 iframe 的大小，而不使用超时

> ID：12604499
> 
> 赞同：0
> 
> 时间：2012-09-26T14:51:57.600
> 
> 标签：javascript, events, dom, iframe, postmessage

我有一个使用 window.postMessage 与它的父级（在其他域上）通信的 iframe。在父窗口上，我有一个可以从 iframe 调用的调整大小方法。

我想向 Iframe 添加代码，以观察内容维度的变化，并在需要时调用 resize 方法，我宁愿不使用 timeout ... 有“事件方式”吗？ ![在此处输入图像描述](../Images/ae44877fea893f48134e6187e7b602d0.png)

**更新** 我用的是纯JS，想监控内部文档的滚动宽度和高度

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T14:58:06.423

使用 jQuery，您可以在父窗口中触发事件：

```
parent.$("iframe").trigger("resize"); 
```

在父窗口中，您将收听此事件：

```
$("iframe").on("resize", function(){
  // do the magic
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T14:58:48.560

就像 italo.nascimento 说的，用 jQuery 来做：

```
$(window).resize(function() {
    var winW = $(this).width(),
        winH = $(this).height();
    $("iframe").css({
        width: winW,
        height: winH
    });
}).resize(); 
```

# java - 有 ServerSocket 接受连接，连接时要关闭对话框

> ID：12604501
> 
> 赞同：0
> 
> 时间：2012-09-26T14:52:00.713
> 
> 标签：java, multithreading, sockets, runnable

我设置了一个简单的服务器-客户端程序。用户开始侦听连接，并出现一个对话框，其中包含消息“正在侦听连接”和一个取消按钮。如果他点击取消，服务器套接字将关闭。没关系。

我想要的是在建立连接时使“正在侦听...”对话框消失。

目前，ListenDialog 是可运行的，因为我尝试将其`accept()`放入其中，或者`while(true), if socket != null, dispose();...`没有任何效果。对话框设置为模态，否则`accept()`永远不会绘制块和对话框 GUI（即取消按钮）；即使该`run()`方法在停止阻塞之前也不会运行`accept()`，即使它看起来应该在一个单独的线程中。

所以，我可以通过放入`dispose()`对话框的`run()`方法并使对话框成为非模态对话框来获得我想要的关闭功能......但它永远不会绘制 GUI，因此无法使用取消按钮。我可以通过使对话框模态来获取我的 GUI 和取消按钮，但即使在`accept()`停止阻止该`run()`方法之后似乎也没有做任何事情（即对话框只是坐在那里直到手动关闭，甚至`run()`代码都没有播放。）

请告诉我有一些明显的东西我错过了！

```
ListenDialog listener = new ListenDialog();

Thread listenThread = new Thread(listener);
listenThread.start();

try {
    socket = server.accept();
    listener.dispose();
} catch(IOException e1) {
    addMessage("Accept Failed: " + e1.getMessage());
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T20:34:41.123

好吧，我不是 100% 确定这个解决方案是如何工作的，或者与我尝试过的任何其他事情的重要区别是什么......但就是这样。

now的构造函数`ListenDialog`包含为自己创建一个新线程。该`run()`方法包含`accept()`调用，后跟`dispose()`try/catch 块外部。上面显示的所有代码（除了 new 的创建`ListenDialog`）都已移至`ListenDialog`类中。

# hadoop - Hadoop 上的 Kmeans

> ID：12604505
> 
> 赞同：1
> 
> 时间：2012-09-26T14:52:14.517
> 
> 标签：hadoop, reduce, k-means, mapper

1.  在 Kmeans 的每次迭代之后，Hadoop 是否会将作为一堆集群的输出存储到 HDFS 并在下一次迭代中将它们提取到内存中？
2.  制图员将观察结果放在某些集群中。我的意思是每个节点都必须知道所有的数据，而hadoop只分配计算而不是数据，这样每个节点都会给出某个节点的观察集，对吧？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T11:38:54.417

对于这样的迭代处理 Hadoop/MR，由于一次又一次地运行相同的作业直到实现集群点的收敛，因此存在开销。Hadoop 比下面提到的其他框架慢 10 倍。

[使用BSP](http://en.wikipedia.org/wiki/Bulk_synchronous_parallel)可以有效且轻松地完成像 K-Means 这样的迭代处理。[Apache Hama](http://hama.apache.org/)和[Apache Giraph](http://incubator.apache.org/giraph/)都实现了 BSP。虽然 Apache Hama 公开了 BSP 原语，但 Apache Giraph 内部使用 BSP，主要用于图形处理，但不公开 BSP 原语。

Google 发布了一篇关于[Pregel](http://googleresearch.blogspot.com/2009/06/large-scale-graph-computing-at-google.html)进行大规模迭代处理的论文，他们使用 BSP 作为底层模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T16:48:05.590

1.  是的，如果我们要将数据从一个 MR 作业传递到另一个 - HDFS（或者准确地说是 DFS）是唯一的选择。这不是问题，因为我们在这里聚合了集群的带宽

2.  K-Mean 聚类不需要将所有数据发送到所有节点 - 它具有此处描述的非常有效的并行实现。[http://blog.data-miners.com/2008/02/mapreduce-and-k-means-clustering.html](http://blog.data-miners.com/2008/02/mapreduce-and-k-means-clustering.html) 简而言之，如果行到所有中心，则聚合从本地可用组的距离，然后发送少量用于集中处理的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-14T03:45:13.297

Hadoop 和 MR 并不是迭代算法（例如 KMeans）的真正好选择，尽管它仍然可行。我有机会在 Hadoop 上实现马尔可夫决策过程，这给我带来了巨大的痛苦，因为每次迭代都涉及输入和输出的磁盘 IO。除此之外，在 Hadoop 集群中启动一个迭代（一个 MR 作业）需要花费数十秒的时间。

后来我试用了 Spark，这是一个类似 MR 的框架，可以在 Hadoop 上完美运行。它使用集群中所有商用计算机的内存来缓存迭代不变量，而不是反复读取和写回磁盘。您可能想检查一下:-)

# objective-c - iPad 相机照片到网站 - 可以这样做吗？

> ID：12604506
> 
> 赞同：0
> 
> 时间：2012-09-26T14:52:14.083
> 
> 标签：objective-c, ipad

在这里帮助一个朋友，并认为我会玩 iPad 编程。这是要求。

用户（HR）想用iPad（iOS6）拍照，图片无缝上传到公司网页，用户开启。他们完全想跳过您通常浏览和上传照片的部分。

他们只是想拍张照片，然后将照片显示在网页上。什么是最无缝的方式来做到这一点？提供最佳的用户体验？

我的想法是编写一个应用程序来访问相机，然后通过网络服务将图像上传到网站。但是，由于这是我第一次在 iPad 世界编程，我想我会在这里与更有经验的人核实一下。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T15:06:54.793

这绝对是第一个完美的 iPad 编程项目，但一定要拿起一本像样的 iOS 编程书（比如Joe Conway 和 Aaron Hillegass[的](http://www.bignerdranch.com/book/ios_programming_the_big_nerd_ranch_guide_rd_edition_)书），让自己熟悉一个优秀的 iOS 公民的构建块。

然后，您可能想观看有关您的问题[的视频](http://objective-c.wonderhowto.com/how-to/upload-image-website-from-apple-ios-application-333979/)并在 StackOverflow 上提问，以帮助您完成后续步骤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T15:06:55.547

是的，使用应用程序执行此操作是最简单的方法。

请注意实际部署，您可以通过应用商店公开部署（前提是您通过了 Apple 的严格测试），也可以通过 Apple Developer Center 进行部署，这将花费您每年至少 99 美元，这只允许您直接将应用程序部署到最多 100 个设备。

还有一个公司程序，允许您将内部应用程序直接推送到设备上，认为每年大约 300 美元。

此外，您还需要一台 Mac 来为 ios 设备进行开发。

# ruby-on-rails - 如何创建两个对象属于同一个父对象的工厂？

> ID：12604510
> 
> 赞同：1
> 
> 时间：2012-09-26T14:52:19.087
> 
> 标签：ruby-on-rails, testing, rspec, factory-bot

我有以下工厂：

```
factory :user do
    name 'Henk'
    email 'foo@bar.co'
    password 'foobar'
    password_confirmation { |u| u.password }
end

factory :photo do |ph|
    user
    ph.subtitle 'abc'
    ph.photo { fixture_file_upload( Rails.root.join( 'spec', 'fixtures', 'files', 'test-file-one.png' ), 'image/png') }
end

factory :ad do |ad|
    user
    name 'Kip'
    reason 'Ik wil gewoon hele mooie nieuwe, om een beetje van te eten.'
    price 69.15
end 
```

照片和广告都属于用户，但照片也属于广告。这是一个问题，因为每当我测试 Photo 和 Add 之间的关系时，用户验证都会正确地抱怨拥有该电子邮件的用户已经在使用中。如何告诉 rspec 再次使用同一个用户，而不是尝试用同一个工厂创建另一个用户？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T12:48:48.333

确保使用相同父级的最简单方法是在测试期间将父级传递到工厂创建中。例如：

```
@user = FactoryGirl.create(:user)
@photo = FactoryGirl.create(:photo, user: @user)
@ad = FactoryGirl.create(:ad, user: @user) 
```

这将确保两者都`photo`使用`ad`相同`user`的父对象，这样您就可以避免遇到的验证问题。

# vb.net - 查找是否已选择第一列中的单元格？

> ID：12604511
> 
> 赞同：0
> 
> 时间：2012-09-26T14:52:22.090
> 
> 标签：vb.net, visual-studio-2010, datagridview

您好，我使用的是 Visual Basic 2010，

我有一个datagridview，我想要一个列表框来显示第一列中的单元格是否已被选中，所以我需要类似的东西

IF '第一列中的单元格已被选中' then listbox1.show end if

任何帮助将不胜感激，谢谢，

杰克。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T14:01:14.413

将此代码绑定到 DataGridView 的 CellClick 事件

```
 private void dataGridView1_CellClick(object sender, DataGridViewCellEventArgs e) {
        if (e.ColumnIndex == 0) { listBox1.Visible = true; }
        else { listBox1.Visible = false; }
    } 
```

# javascript - 调用 Rails 应用程序时，AJAX 调用会阻止浏览器

> ID：12604516
> 
> 赞同：0
> 
> 时间：2012-09-26T14:52:29.683
> 
> 标签：javascript, jquery, ruby-on-rails, ajax

设置：

Ruby on Rails、Posgresql、Backbone

情况：

我有一个媒体存档应用程序。用户在站点周围移动并选择要打包在 zip 文件中的图像/电影等以供下载。由于 zip 可能会变得相当大，我决定在压缩完成后邮寄下载链接。但是，我仍然必须等待请求完成，然后才能执行其他任何操作。下面的链接描述了同样的问题，但他使用的是 ASP.NET，我在 Rails 文档或谷歌的任何地方都找不到这个会话状态。它甚至被称为 Rails 中的会话状态吗？

[为什么对同一个 ASP.NET MVC 操作的多个同时 AJAX 调用会导致浏览器阻塞？](https://stackoverflow.com/questions/4428413/why-would-multiple-simultaneous-ajax-calls-to-the-same-asp-net-mvc-action-cause)

想法？

# list - 检查元素是否存在

> ID：12604517
> 
> 赞同：-1
> 
> 时间：2012-09-26T14:52:34.500
> 
> 标签：list, common-lisp

我被一个家​​庭作业问题困住了。我正在尝试定义一个函数，该函数使用递归检查列表中是否存在元素。下面是我所拥有的。

```
(defun is-member2 (X S)
"Check if a X is a member of S"
(if  (and (atom X) (not (null S)) (lisp S) (> (length S) 0))

    ;X- is a value, not a set
    (if (equal X (car S))

        ;Located
        (equal 'a 'a)

        ;NotLocated
        (is-memeber2 X (cdr S))

    )

    ;No- X is not a value
    ()
);end if
) 
```

但是，我不断得到它`is-memeber2`是未定义的。这让我相信要么`X`不再是有效元素，要么 ( `cdr S`) 正在发送`nul`，但我的 if 语句不应该抓住这个吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T14:54:40.503

`is-member2`不等于`is-memeber2`。检查你的拼写。

# php - PHP 或 Apache 是否缓存下载的图像？

> ID：12604520
> 
> 赞同：1
> 
> 时间：2012-09-26T14:52:42.663
> 
> 标签：php, apache, gd

**问题**

使用 PHP 在图像更改前后使用相同的 URL 下载远程图像，即使来源不同，也会下载相同的照片。某处图像被缓存。

问题不在于浏览器缓存，因为我在通过 FTP 复制后直接通过 Windows 资源管理器查看照片。

**例子**

下午 1:00：下载照片 URL A -> 下载照片 A

下午 1:30：照片 A 更改为照片 B，但照片 URL 保持不变

2:00 pm：再次下载照片 URL A -> 下载照片 A（但应该是照片 B）

**我的下载脚本**

```
function resampimagejpg( $forcedwidth, $forcedheight, $sourcefile, $destfile )
{

$fw = $forcedwidth;
$fh = $forcedheight;
$is = getimagesize( $sourcefile );
if( $is[0] >= $is[1] )
{
    $orientation = 0;
}
else
{
    $orientation = 1;
    $fw = $forcedheight;
    $fh = $forcedwidth;
}
if ( $is[0] > $fw || $is[1] > $fh )
{
    if( ( $is[0] - $fw ) >= ( $is[1] - $fh ) )
    {
        $iw = $fw;
        $ih = ( $fw / $is[0] ) * $is[1];
    }
    else
    {
        $ih = $fh;
        $iw = ( $ih / $is[1] ) * $is[0];
    }
    $t = 1;
}
else
{
    $iw = $is[0];
    $ih = $is[1];
    $t = 2;
}
if ( $t == 1 )
{
    $img_src = imagecreatefromjpeg( $sourcefile );
    $img_dst = imagecreatetruecolor( $iw, $ih );
    imagecopyresampled( $img_dst, $img_src, 0, 0, 0, 0, $iw, $ih, $is[0], $is[1] );
    if( !imagejpeg( $img_dst, $destfile, 95 ) )
    {
        exit( );
    }
    return true;
}
else if ( $t == 2 )
{
    copy( $sourcefile, $destfile );
    return true;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T15:06:13.953

Apache can cache images, that depends on the setup. The same applies to the browser.

The easiest way to bypass caching for a certain asset, is to add a (reasonably...) unique query string at the end, for example a timestamp:

```
// load image always, assuming output to html
<img src="/path/to/image.jpg?<?php echo time(); ?>"> 
```

Note that `time()` is not exactly unique, it effectively limits caching to 1 second...

# php - 是否可以让 Joom!Fish 将一个项目指向另一个项目而不是翻译其内容？

> ID：12604521
> 
> 赞同：0
> 
> 时间：2012-09-26T14:52:50.777
> 
> 标签：php, joomla, joomla1.5, joomfish

我有三个项目，不是简单地根据语言翻译，而且内容也不同。我想做的是以下几点：

1.  用户来到上述项目。
2.  用户更改语言。
3.  向用户呈现适合所选语言的另一个项目。

我现在在第 3 步所能做的就是向用户展示相同的项目，但要翻译它的内容。

我可以通过做一些“黑客攻击”来实现这一点，但是，我想知道是否有人知道**正确的 Joom!Fish 方式**来做到这一点？

谢谢！

# objective-c - 多表视图 ios 应用程序

> ID：12604541
> 
> 赞同：0
> 
> 时间：2012-09-26T14:53:46.203
> 
> 标签：objective-c, ios, uitableview

我正在开发一个带有多个 TableView 的 iPhone 应用程序。它类似于苹果开发者网站上提供的 SimpleDrillDown 应用程序。

我之前为此使用故事板，但现在决定采用旧方法，因为故事板仅支持 iOs v 5.0 及更高版本:(

有人可以告诉我应该如何继续使用这样的应用程序吗？如果有人可以将我指向具有类似逻辑的现有应用程序，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T15:03:26.993

我没有示例，但基本上，您希望获取情节提要中的每个场景并为其视图控制器创建一个独特的 .xib 文件。然后，您将每个 segue 替换为使用匹配的 nib 初始化控制器的调用，并根据它是导航控制器中的转换还是模态控制器中的转换来推送或呈现新控制器。

# php - XML保存的时间戳不适用于PHP日期？

> ID：12604543
> 
> 赞同：0
> 
> 时间：2012-09-26T14:53:50.977
> 
> 标签：php, xml

我将时间戳存储在我的 xml 文档中，但是当尝试将它们用作与当前时间戳进行比较时，它不起作用？我也试图让它与 date() 一起工作，但它不会？我究竟做错了什么？

XML 看起来像这样：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<data>
  <game id="83832">
    <opponent>Danielle</opponent>
    <oppid>101</oppid>
    <lastdraw>1</lastdraw>
    <turn>1</turn>
    <image>101b.png</image> 
    <nextdraw>1348156426</nextdraw>
    <infopop>0</infopop>
    <playertilesum>89</playertilesum>
    <oppnation>0</oppnation>
  </game>
  <game id="89939">
    <opponent>Bigscreen</opponent>
    <oppid>107</oppid>
    <lastdraw>3</lastdraw>
    <turn>2</turn>
    <image>107a.png</image>
    <nextdraw>1347913606</nextdraw>
    <infopop>0</infopop>
    <playertilesum>101</playertilesum>
    <oppnation>0</oppnation>
  </game>
</data> 
```

我尝试做的是：

```
$timestamp = $_SERVER['REQUEST_TIME'];

$xml=simplexml_load_file('TEST.xml');

foreach ($xml->game as $game) {

    if($game->nextdraw < $timestamp){

         echo '['.$r.'] '.$game->nextdraw.'<br>';

    }
} 
```

我只想显示不早于时间戳的游戏？我做这一切都错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T15:07:34.950

我在您的代码中没有发现任何问题。我运行它并得到：

```
[] 1348156426
[] 1347913606 
```

你得到什么？

**更新：**为了检查条件是否正确执行，请改用以下`foreach`循环。

```
foreach ($xml->game as $game) 
{

    if($game->nextdraw < $timestamp)
    {

        echo "<br> Game's next draw is ". date('m/d/Y h:i:s A', (int)$game->nextdraw);
        echo "<br> Current time is ". date('m/d/Y h:i:s A', (int)$timestamp);
        echo '<br><br>['.$r.'] '.$game->nextdraw;

    } 
```

}

# jquery - 如何从单选按钮列表中找到 jQuery 中选中的单选按钮

> ID：12604544
> 
> 赞同：0
> 
> 时间：2012-09-26T14:53:52.260
> 
> 标签：jquery

在下面的示例中，我希望选择“radios”列表的所有“:checked”单选按钮。如何？

```
var radios = someDiv.find("input[type=radio]");
if (radios.length > 0)
{
    // I wish to find all the checked radio buttons in the
    // "radios" list - this doesn't work:
    var checkedRadios = radios.find(":checked");

    if (checkedRadios.length == 0)
        alert("You have to select an option stoopid");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T14:56:05.467

要使您的代码按原样工作，您只需要替换`find`为`filter`

```
var checkedRadios = radios.filter(":checked"); 
```

除非您有任何特定理由进行两步选择，否则我建议您使用一个选择器来选择单选按钮

```
var checkedRadios = someDiv.find("input[type=radio]:checked"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T14:56:34.780

试试这个

```
if(someDiv.find("input[type=radio]:checked").length == 0)
  alert("You have to select an option stoopid"); 
```

如果你知道 div id

```
if($('#someDivId').find("input[type=radio]:checked").length == 0)
      alert("You have to select an option stoopid"); 
```

如果你知道 div 类，但它会在这个类的所有 div 上运行

```
 if($('.someDivClass').find("input[type=radio]:checked").length == 0)
          alert("You have to select an option stoopid"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T14:55:07.653

`var radios = someDiv.find("input[type=radio]:checked");`应该管用

* * *

**更新**

```
var radios = someDiv.find("input[type=radio]");

// radios are there
if (radios.length > 0)
{
    var numChecked = 0;
    radios.each(function() {
        if($(this).is(':checked')) numChecked++;
    });

    if (numChecked == 0) 
        alert("You have to select an option stoopid");
} 
```

# r - 列的中位数，然后查找其他列值？(右)

> ID：12604547
> 
> 赞同：1
> 
> 时间：2012-09-26T14:34:11.350
> 
> 标签：r, excel, plyr, mean

我有这张桌子：

```
Profession Educational_level Number
Doctor     Low               0
Doctor     Medium            5
Doctor     High              8
Nurse      Low               1
Nurse      Medium            8
Nurse      High              3
[...] 
```

我想找出中等人的教育水平并最终得到这张表：

```
Doctor     High
Nurse      Medium
[...] 
```

问题：

1.  我如何在 R 中做到这一点？
2.  在 Excel 中？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T16:10:18.750

如果依赖其他软件包对您的工作流程来说不是问题，我推荐@PaulHiemstra 的回答。否则，这可能是在基础 R 中最简单的方法：

```
df <- read.csv(text="Profession Educational_level Number
Doctor     Low               0
Doctor     Medium            5
Doctor     High              8
Nurse      Low               1
Nurse      Medium            8
Nurse      High              3", header=TRUE)

results <- by(df, INDICES=dat$Profession, 
   FUN=function(subset) with(subset, Educational_level[which.max(Number)]))
data.frame(names(results), unclass(results)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T15:11:53.420

我不认为你在寻找每个职业的平均教育水平，而是模式，即频率最高的类别。为此，您可以`ddply`从 plyr 包中使用：

```
require(plyr)
ddply(df, .(Profession), summarise, 
          mode_educ = Educational_level[which.max(Number)] 
```

`df`包含您的数据的 data.frame在哪里。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T15:39:44.327

在 Excel 中，您可以使用这样的“数组公式”

`=INDEX(B2:B10,MATCH(1,(A2:A10="Doctor")*(C2:C10=MEDIAN(IF(A2:A10="Doctor",C2:C10))),0))`

用 CTRL+SHIFT+ENTER 确认

这适用于您的示例，但对于真正的中位数，例如，如果有 4 位医生，那么医生的中位数介于第 2 位和第 3 位之间，因此列表中可能没有任何值，那么您如何知道哪个教育要分配的级别？

# php - 从 html 页面获取标题的 Dom Parser 节点

> ID：12604557
> 
> 赞同：0
> 
> 时间：2012-09-26T14:54:20.320
> 
> 标签：php, parsing, dom, simple-html-dom

这是html页面：

```
<div class="gs_ri">
   <h3 class="gs_rt">
     <span class="gs_ctc">
     <span class="gs_ct1">[BOOK]</span>
     <span class="gs_ct2">[B]</span></span>
     <a href="http://example.com" onmousedown="">Title</a></h3>
<div class="gs_a">A</div>
<div class="gs_rs">B</div>
<div class="gs_fl"><a href="">C</a> <a href="">D</a> <a href=""</a></div></div></div>  
<div class="gs_r"><div class="gs_ggs gs_fl"><button type="button" id="gs_ggsB2" class="gs_btnFI gs_in_ib gs_btn_half">
     <span class="gs_wr"><span class="gs_bg"></span>
     <span class="gs_lbl"></span>
     <span class="gs_ico"></span></span></button>
<div class="gs_md_wp" id="gs_ggsW2"><a href="http://example.pdf" onmousedown="" 
```

我对确定节点有点困惑。

我想得到`http://example.com`和`Title`

我认为有两种方法可以获得它们：

它是`<span>`：

```
 foreach($html->find('span[class=gs_ctc2] ') as $link){
    $link = $link->next_sibling();
    echo $link->plaintext;
    echo $link->href;
} 
```

但它不起作用。

第二个，我`<h3 class="gs_rt">`作为父母，所以它是最后一个孩子的兄弟姐妹

```
foreach($html->find('h3[class=gs_rt] a') as $link){
    $link = $link->last_child()->next_sibling();
    echo $link->plaintext;
    echo $link->href;
} 
```

它也不起作用。我认为我还不了解 abot 节点 dom 树。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:57:15.497

您不必选择同级。

`h3[class=gs_rt] a`您已经针对相应的标签`<a>`。所以只需从那里提取所需的值。但是，您可以按如下方式简化该选择器：

```
foreach($html->find('h3.gs_rt a') as $link){
    echo $link->plaintext;
    echo $link->href;
} 
```

**编辑**

关于评论，我认为，你想要的是这样的，但我不确定，你上面的代码很乱（请使用适当的缩进！）

```
foreach($html->find('h3.gs_rt') as $block){
    $link = $block->find( 'a' );
    echo $link->plaintext;
    echo $link->href;

    $otherLink = $block->find( 'div[class=gs_md_wp] a' );
    // do stuff with that $otherLink
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T15:11:47.440

将 id 添加到 href

```
<a id="myid" href="http://example.com" onmousedown="javascript:get_title('#myid')">Title</a></h3>

function get_title(i){
var h =$(i).attr('href');  
var t =$(i).text(); 
 alert('the link is (' + h + ' ) and the title is (' + t + ' )');
        } 
```

# scala - 在函数式 Scala 代码中使用 JDBC PreparedStatement.addBatch

> ID：12604563
> 
> 赞同：3
> 
> 时间：2012-09-26T14:54:28.863
> 
> 标签：scala, jdbc, batch-processing

我需要从一个数据库中读取几百万行并将它们写入另一个。我想用`PreparedStatement.addBatch`大批量（可能是 1000 行）进行写入。我不需要他们参与交易。我正在用 Scala 2.9.2 编写代码。

一种方法如下：

```
val sourceResultSet = ...
val targetStatement = targetConnection.prepareStatement(...)
var rowCount = 0
while (sourceResultSet.next()) {
  // Read values from sourceResultSet and write them to targetStatement
  targetStatement.addBatch()
  rowCount += 1
  if (rowCount % 1000 == 0) {
    targetStatement.executeBatch()
    rowCount = 0
  }
} 
```

我怎样才能以更实用的方式做到这一点，而不使用`var rowCount`? 我还需要考虑 RAM 的使用；我正在读取几百万行，因此任何涉及一次将所有源行都存储在内存中的解决方案都会失败。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T15:18:12.983

是什么类型的`sourceResultSet`？我假设根据您的使用情况使用 Iterator/Stream，但无论哪种方式，您都可以使用 Scala 集合`take`一次获取 1000 个元素（这适用于 Lists、Sets、Iterators、Streams 等）。为了在功能上做到这一点（虽然只是副作用，所以不是纯功能），定义一个内联函数：

```
def processSource(sourceResultSet: Iterator): Unit = {
  if(sourceResultSet.hasNext) {
    sourceResultSet.take(1000).foreach(row => /* Add to batch */)
    targetStatement.executeBatch()
    processResult(sourceResultSet) // How you handle the recursion depends on what sourceResultSet is
  }
}

val sourceResultSet = ...
val targetStatement = targetConnection.prepareStatement(...)
processSource(sourceResultSet) 
```

只要 sourceResultSet 是惰性的（流或迭代器），这将避免一次将其加载到内存中。

# propel - propel-gen：找不到命令

> ID：12604574
> 
> 赞同：0
> 
> 时间：2012-09-26T14:55:00.167
> 
> 标签：propel

我无法使用 Propel 生成我的模型。在我的工作项目中，服务器管理员安装了 propel pear 模块，因此我可以使用 propel-gen 来执行此操作。我为自己的项目遵循了相同的路线，但我在让 propel-gen 命令工作时遇到问题

我正在使用 MAMP。我使用此处的说明：http: [//www.propelorm.org/documentation/01-installation](http://www.propelorm.org/documentation/01-installation)

```
Aaron-Wuggawoos-MacBook-Pro:/ azz0r$ which php
/Applications/MAMP/bin/php/php5.3.6/bin/php
Aaron-Wuggawoos-MacBook-Pro:/ azz0r$ which pear
/Applications/MAMP/bin/php/php5.3.6/bin/pear
Aaron-Wuggawoos-MacBook-Pro:/ azz0r$ pear channel-discover pear.phing.info
Channel "pear.phing.info" is already initialized
Aaron-Wuggawoos-MacBook-Pro:/ azz0r$ sudo pear install phing/phing
Password:
phing/phing is already installed and is the same as the released version 2.4.12
install failed
Aaron-Wuggawoos-MacBook-Pro:/ azz0r$ sudo pear install Log
pear/Log is already installed and is the same as the released version 1.12.7
install failed
Aaron-Wuggawoos-MacBook-Pro:/ azz0r$ cd /Users/azz0r/Sites/Personal\ GIT/wuggawoo/library/ORM 
Aaron-Wuggawoos-MacBook-Pro:ORM azz0r$ sudo propel-gen yaml
Password:
sudo: propel-gen: command not found
Aaron-Wuggawoos-MacBook-Pro:ORM azz0r$ 
```

和

```
Aaron-Wuggawoos-MacBook-Pro:ORM azz0r$ sudo pear channel-discover pear.propelorm.org
Channel "pear.propelorm.org" is already initialized
Aaron-Wuggawoos-MacBook-Pro:ORM azz0r$ sudo pear install -a propel/propel_generator
propel/propel_generator is already installed and is the same as the released version 1.6.7
install failed
Aaron-Wuggawoos-MacBook-Pro:ORM azz0r$ sudo pear install -a propel/propel_runtime
propel/propel_runtime is already installed and is the same as the released version 1.6.7
install failed
Aaron-Wuggawoos-MacBook-Pro:ORM azz0r$ sudo propel-gen
sudo: propel-gen: command not found
Aaron-Wuggawoos-MacBook-Pro:ORM azz0r$ propel-gen
-bash: propel-gen: command not found 
```

还有其他方法可以让这个工作吗？

# asp.net-mvc-3 - asp.net 数据注释字段长度

> ID：12604576
> 
> 赞同：3
> 
> 时间：2012-09-26T14:55:00.433
> 
> 标签：asp.net-mvc-3, data-annotations

我目前在一个字段上有以下数据注释

```
[StringLength(1000, MinimumLength = 6, ErrorMessage = "field must be atleast 6 characters")]
public string myField {get;set;} 
```

我可以更改数据注释，使其仅在用户在字段中键入内容时才有效吗？换句话说，可以将该字段留空，但如果用户在该字段中键入一个值，它的长度应该在 6-1000 个字符之间。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-26T15:02:07.750

`StringLength`属性已经是这种情况。如果您将该字段留空，则模型将有效。你连这个都没试过吗？

模型：

```
public class MyViewModel
{
    [StringLength(1000, MinimumLength = 6, ErrorMessage = "field must be atleast 6 characters")]
    public string MyField { get; set; }
} 
```

控制器：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        return View(new MyViewModel());
    }

    [HttpPost]
    public ActionResult Index(MyViewModel model)
    {
        return View(model);
    }
} 
```

看法：

```
@model MyViewModel

@using (Html.BeginForm())
{ 
    @Html.EditorFor(x => x.MyField)
    @Html.ValidationMessageFor(x => x.MyField)
    <button type="submit">OK</button>
} 
```

您可以将该字段留空，并且不会收到验证错误。

# c# - XML 将重复节点反序列化为对象

> ID：12604581
> 
> 赞同：0
> 
> 时间：2012-09-26T14:55:05.033
> 
> 标签：c#, c#-4.0

我有一个带有名为（“地址”）的重复节点的以下 xml，我需要将这些“地址”节点反序列化为一个对象：

```
<dealer id="8569" ed="0">
  <name hide="0">some name</name>
  <url>http://www.some.com</url>
  <address hide="0" />
  <address>
    <line1>text1</line1>
    <line2>text2</line2>
    <line3>text3</line3>
    <town>Town</town>
    <postcode>Postcode</postcode>
  </address>
</dealer> 
```

我需要将其反序列化为以下类：

```
public class Dealer
{
    public Dealer()
    {
        _address = new Address();
    }

    [XmlAttribute("id")]
    public long Id { get; set; }

    [XmlElement("name")]
    public string Name{ get; set; }

    [XmlElement("url")]
    public string Url{ get; set; }

    [XmlElement("address")]
    public Address Address{ get; set; }

}    
public class Address
{
    [XmlElement("line1")]
    public string Line1{ get; set; }

    [XmlElement("line2")]
    public string Line2 { get; set; }

    [XmlElement("line3")]
    public string Line3 { get; set; }

    [XmlElement("county")]
    public string County{ get; set; }

    [XmlElement("town")]
    public string Town{ get; set; }

    [XmlElement("postcode")]
    public string Postcode{ get; set; }
} 
```

当这个 xml 被反序列化到上面的类时，它总是得到第一个“地址”节点，但是，我需要第二个节点被拾取。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T15:09:48.697

除了更改您的 XML 模式之外，我所能想到的就是让您的`Dealer`类实现`IXmlSerializable`并实现关联的`ReadXml`方法以使用所需的 xml 节点。[http://msdn.microsoft.com/en-us/library/system.xml.serialization.ixmlserializable.readxml.aspx](http://msdn.microsoft.com/en-us/library/system.xml.serialization.ixmlserializable.readxml.aspx)

除此之外，您可以将您的对象更改为与*两种*表示兼容`Dealer.Address`的集合/对象数组，然后在反序列化后忽略/删除集合中的空地址。`Address`

# php - 使用 str_ireplace 时保持原始字符串格式

> ID：12604584
> 
> 赞同：3
> 
> 时间：2012-09-26T14:55:07.320
> 
> 标签：php

我有一个在下面编码的搜索功能，我想知道是否可以保留原始格式。例如，如果我有以下文本，“你好，我是 PHP 新手”，并且在我的搜索框中输入小写“php”，在结果中它会将原来的大写“PHP”更改为小写“php”。无论用户搜索 PhP 还是 pHp 等，是否可以将字符串保留为 PHP 的原始状态？

这是包含'str_ireplace'的函数......

```
function boldText($text, $kword) {
    return preg_replace('/($kword)/i', "<strong><font color='Red'>$kword</font></strong>", $text); 
```

这就是它的名字...

```
 echo "<td width = 130px><b>".boldText($info['company_name'], $kword) . "</b></td> ";
 echo "<td width = 60px>".boldText($info['section_name'], $kword) . " </td>"; 
 echo "<td width = 300px>".boldText($info['question'], $kword) . " </td>";
 echo "<td width = 600px>".boldText($info['answer'], $kword) . " </td></tr>"; 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T15:00:56.813

使用[正则表达式](http://php.net/regex)。修饰符`i`代表*不区分大小写*

```
echo preg_replace('/(php)/i', "<strong><font color='Red'>$1</font></strong>", 'I am new to pHp')
// returns "I am new to <strong><font color='Red'>pHp</font></strong>" 
```

* * *

在您的功能的上下文中：

```
function boldText($text, $kword) {
    return preg_replace('/('.$kword.')/i', "<strong><font color='Red'>$1</font></strong>", $text);
} 
```

**单引号字符串不解析里面的变量！**

所以你需要`'/('.$kword.')/i'`或`"/($kword)/i"`。

内部双引号字符串变量被解析，但总是要注意奇怪的副作用，奇怪的组合。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T15:00:31.737

## 代码

```
$s = 'test Test teSTing ...';
echo preg_replace('~(test)~i', '<b>$1</b>', $s); 
```

## 输出

**测试 测试 测试**...

# c# - 使用序列化在实体框架中的两个 ObjectContext 之间复制实体

> ID：12604585
> 
> 赞同：3
> 
> 时间：2012-09-26T14:55:07.950
> 
> 标签：c#, .net, entity-framework, serialization, xml-serialization

## 前言

我知道这可能已经被认为是[**一个疯狂的问题**](https://stackoverflow.com/q/6925028/1426433)，但我正在寻找有关如何继续将**所有**数据（即所有实体和关系）从一个复制到新创建的支持的最受过教育的建议和**经过验证**的建议。 . **请参阅****[实体框架中的“克隆”EntityConnections 和 ObjectContexts 以](https://stackoverflow.com/q/12589017/1426433)****了解我是如何设置它的。****`ObjectContext``ObjectContext`**

 *** * *

## 介绍

**我[在 Entity Framework 上看到了 Cloning data](https://stackoverflow.com/q/2185155/1426433)，**但是：

1.  我正在寻找**整个 enchilada**，即整个对象图：所有实体和关系。稍后，我将对对象图的哪些部分进行更细粒度的选择）

2.  根据我下面的更新，我没有使序列化工作，但仅在特殊情况下。我觉得这真的是一个不那么复杂的任务，但它具有惊人的挑战性。我绝对需要一些关于如何使它工作的见解。

* * *

## 步骤1

好的，这是我到目前为止所尝试的。

我知道，当我使用`Detach`/ `Attach`power duo 时，关系是有限的——<strong>我实际上想要保留整个对象图。

因此，我正在考虑使用以下选项加载根实体`MergeOption.NoTracking`：

```
var serializer = new DataContractSerializer(typeof(Root));

var query = (ObjectQuery<Root>) sourceContext.Roots
    .Include(d => d.Children.Select(c => c.MoreChildren.Select(r => r.EvenMoreChildren)))
    .Include(d => d.Children.Select(c => c.MoreChildren.Select(r => r.MoreAndMoreChildren)))
    .Include(d => d.Children.Select(c => c.MoreChildren.Select(r => r.Shizzle)));

foreach (var d in query.Execute(MergeOption.NoTracking)) {
    //sourceContext.Detach(d); // not needed
    Print(d);
    using (var ios = new MemoryStream()) {
        serializer.WriteObject(ios, d);
        ios.Seek(0, SeekOrigin.Begin);
        var dd = (Root) serializer.ReadObject(ios);
        //Console.WriteLine(string.Join(",", dd.EntityKey.EntityKeyValues.Select(k => k.Key + "=" + k.Value)));
        targetContext.Roots.AddObject(dd);
    }
} 
```

鉴于我将实体加载为非跟踪，我不再需要调用`sourceContext.Detach(d)`。

该`Print`方法只是打印子对象树，它表明到目前为止一切进展顺利（我不会在这里展示它，因为它很大且无关紧要）。

然而，现在整个事情正在吹@`serializer.WriteObject(ios, d)`以下消息：

**“当使用合并选项返回对象时，只有在或不包含对象`NoTracking`时才能调用 Load 。”`EntityCollection``EntityReference`**

（这有点道理，因为序列化程序可能正在尝试延迟加载相关实体。）

请记住，如果我不使用`NoTracking`，我必须分离实体，但我会失去我的关系......

* * *

## 第2步

当然，我`sourceContext.ContextOptions.LazyLoadingEnabled = false`在执行序列化循环之前尝试过设置，并且修复了上面的错误，但这会导致臭名昭著：

**“无法添加或附加该对象，因为它`EntityReference`的`EntityKey`属性值与该对象的不匹配`EntityKey`。”**

另外，请记住我仍然无法取消注释，`sourceContext.Detach(d)`因为我加载了根`NoTracking`...

* * *

## 第 3 步

我已经尝试`EntityKey = null`在克隆实体上设置序列化之前甚至反序列化之后......都无济于事：

```
sourceContext.ContextOptions.LazyLoadingEnabled = false;

foreach (var d in query.Execute(MergeOption.NoTracking)) {
    //sourceContext.Detach(d);
    Print(d);
    d.EntityKey = null;
    using (var ios = new MemoryStream()) {
        serializer.WriteObject(ios, d);
        ios.Seek(0, SeekOrigin.Begin);
        var dd = (Root) serializer.ReadObject(ios);
        if (dd.EntityKey != null) {
            Console.WriteLine("Deserialized EntityKey: {0}", string.Join(",", dd.EntityKey.EntityKeyValues.Select(k => k.Key + "=" + k.Value)));
            dd.EntityKey = null;
        }
        targetContext.Roots.AddObject(dd);
    }
} 
```

**可疑的是，我什至不知道上面所说的例外是什么该死的“对象”。**

我真的，真的，真的，真的注定要尝试用纯粹的 EF 方法来解决这个问题吗？？？

我完全注定了？！？！？！:(

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T18:10:00.110

@khovanskiiªn - 事情就是这样。尽管您说 EF 的美妙之处，但它并不是为此而设计的。您可以整天对锤子的奇妙之处充满诗意，但如果您的问题需要扳手，它对您无济于事。

有很多解决方案可以满足您的需求，但不要使用 EF 并在 SQL 端执行它，它甚至有一个花哨的名称。它被称为 ETL 或提取/转换/加载，其唯一目的是从一组表中获取数据并将其移动到另一组表中，可能会在两者之间处理数据。

事实上，您可以将这些工具与客户端代码无缝集成。例如，可以从客户端代码执行 SSIS 包，并将参数传递给它以控制处理哪些数据。

事实是，Entity Framework 旨在与单个上下文一起工作，并且它仅跟踪单个上下文中的关系和更改。一旦你将它分开，它就会丢失该信息。

更重要的是，实体框架对于这种事情的效率非常低，因为 EF 适用于单个实体，而不是批量/批量操作。如果你有 100 万条记录，一次操作可能需要一整天，而 sql 端的批处理操作可能需要几分钟。

帮自己一个忙，看看 SSIS（Sql Server 集成服务）。**

# java - android中的文本到pdf转换

> ID：12604588
> 
> 赞同：0
> 
> 时间：2012-09-26T14:55:10.130
> 
> 标签：java, android-ndk

我想在Android中将用户给定的文本信息转换为PDF？我已经使用 iTEXT jar 文件对其进行转换但不能在 Android SDK 中工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T10:28:05.483

考虑使用[Google 云端硬盘](https://developers.google.com/drive/integrate-android-ui)！您的应用程序可以上传文本文件并下载 PDF。奖励 #1：GDrive 可以转换许多其他格式！奖励＃2：文件备份在云端！

# php - 选择元素的 PHP 版本/IE9 CSS 冲突

> ID：12604589
> 
> 赞同：0
> 
> 时间：2012-09-26T14:55:13.567
> 
> 标签：php, css, internet-explorer

我在 PHP 5.4.3 上构建了一个 Web 应用程序，并且我有一个`<select><option>`带有 CSS 属性的元素`border:none`，实际上，当我在 localhost 上的 IE9 上运行该应用程序时，一切正常。但是，应用程序应存储在生产环境中的实际环境已安装 PHP 5.1.6，并且在生产环境中的 IE9 上运行应用程序时，边框看起来像 Windows 应用程序中的深色 3D 边框或文本框边界。我使用不同的 CSS 属性进行了测试，但没有任何影响 - 看起来 IE9 与 PHP 5.1.6 完全忽略了边框 CSS 设置（同样，在我的本地主机上它测试得很好）。

Chrome、FF、Safari 或 Opera 不会发生这种情况——只有 IE 会发生这种情况。

不幸的是，升级生产 PHP 不是一种选择。

截图：

带有 PHP 5.4.3（本地主机）的 IE9 - 无边框。

![在此处输入图像描述](../Images/db7ee2812aa1f84b9b41b3fac455acb5.png)

IE9 与 PHP 5.1.6（生产） - 黑色 3D 边框。

![在此处输入图像描述](../Images/e3b13e9b9556d21889db6de9cacd3690.png)

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T15:00:33.570

IE9 可以记住某些域的呈现模式。如果您在 IE 开发人员工具中手动切换*浏览器模式，它会记住您的选择。*请确保`Browser Mode`并`Document Mode`设置为标记为 的值`Page Default`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-26T14:57:55.477

决定 CSS 和 HTML 如何呈现的不是 PHP。从字面上看，这与它没有任何关系。

# java - Java Swing：如何更改 Grid 布局中一行的大小并允许它仅在水平方向而不是垂直方向动态调整大小？

> ID：12604593
> 
> 赞同：7
> 
> 时间：2012-09-26T14:55:18.703
> 
> 标签：java, swing, layout, grid-layout, gridbaglayout

大家好，我有一个 JFrame，里面有三个组件。

1.  一份菜单
2.  选项卡式窗格
3.  一个有一些按钮的面板

最初我的目标是创建如下设计： ![在此处输入图像描述](../Images/42bb69498233eaee9f80826ea12c70ea.png)

当用户调整应用程序的大小时，所有内容也会调整大小。所以我想也许如果我使用简单的网格布局我的问题会得到解决，所以我决定做以下事情：

1.  选项卡式窗格内部将包含一些面板，这些面板将遵循网格布局。

2.  底部的面板将遵循网格布局。

3.  JFrame 也将遵循网格布局。

结果：

![在此处输入图像描述](../Images/cdb4c4305042249dd13cd7ad38d0714e.png)

正如你所看到的，这不是我想要的，按钮太大了，虽然应用程序调整得很好：

![在此处输入图像描述](../Images/b52f684528b6037e25f9ae5dc0e58a41.png)

按钮也会调整大小，但它们仍然太大。我希望能够为按钮（更具体地说是它们包含的面板）设置一个小尺寸，并且当用户调整应用程序的大小时，按钮只会水平调整大小而不会垂直调整，这意味着只有选项卡式窗格会变大垂直。这是可以实现的吗？我搜索并发现了有关gridbaglayout的信息，我开始玩一点，但我没有取得任何成就。我设法做的就是以下几点：

![在此处输入图像描述](../Images/4c3b586028e2495f482f27e4e50635c8.png)

看起来不错，但是当我调整大小时，这就是我得到的：

![在此处输入图像描述](../Images/43fb73f168b8c838c87801eea898dbb8.png)

提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-26T14:58:18.647

我将`BorderLayout`用于内容窗格。使用 将选项卡式窗格放入其中，使用`BorderLayout.CENTER`将按钮面板放入其中`BorderLayout.SOUTH`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-26T14:58:37.277

> JFrame 也将遵循网格布局。

这是你的问题。相反，使用默认值`BorderLayout`（因此删除将 JFrame 的布局设置为 GridLayout 的调用）和

1.  添加带有约束的按钮面板`BorderLayout.SOUTH`
2.  添加没有任何约束的选项卡式窗格（这意味着约束`BorderLayout.CENTER`）

查看[Swing LayoutManager 教程](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)，特别是有关[BorderLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html#border)的示例。

小例子：

```
import java.awt.BorderLayout;
import java.awt.GridLayout;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;
import javax.swing.JPanel;
import javax.swing.JTabbedPane;
import javax.swing.SwingUtilities;

public class TestLayout {

    protected void initUI() {
        final JFrame frame = new JFrame(TestLayout.class.getSimpleName());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JMenuBar menuBar = new JMenuBar();
        JMenu fileMenu = new JMenu("File");
        JMenuItem newItem = new JMenuItem("New...");
        JMenuItem open = new JMenuItem("Open...");
        fileMenu.add(newItem);
        fileMenu.add(open);
        menuBar.add(fileMenu);
        JTabbedPane tabs = new JTabbedPane();
        tabs.addTab("Tab 1", new JPanel());
        tabs.addTab("Tab 2", new JPanel());
        tabs.addTab("Tab 3", new JPanel());
        JPanel buttonPanel = new JPanel(new GridLayout());
        buttonPanel.add(new JButton("Button-1"));
        buttonPanel.add(new JButton("Button-2"));
        buttonPanel.add(new JButton("Button-3"));
        frame.add(tabs);
        frame.add(buttonPanel, BorderLayout.SOUTH);
        frame.setJMenuBar(menuBar);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TestLayout().initUI();
            }
        });
    }
} 
```

# widget - 编写自己的 swt 小部件 - 如何获取操作系统选择的当前颜色、渐变和其他样式数据？

> ID：12604595
> 
> 赞同：0
> 
> 时间：2012-09-26T14:55:25.837
> 
> 标签：widget, operating-system, styles, swt

我正在编写一个自己的 swt 小部件。现在我已经准备好尝试设置小部件样式的功能。

获取操作系统当前选择的实际颜色/样式的默认策略是什么？

如何在我自己的小部件中模仿操作系统样式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T14:59:54.043

您可以使用以下命令访问 SWT 的所有预定义颜色：

```
Color color = display.getSystemColor(SWT.COLOR_RED); 
```

当然，这适用于所有定义为 的颜色`SWT.COLOR_*`。

操作系统的默认列表背景颜色可以通过以下方式访问：

```
SWT.COLOR_LIST_BACKGROUND 
```

至于模仿问题：

只要您不扩展默认小部件之一，这将很难实现。请在您的问题中添加更多细节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T20:42:52.140

为您的小部件使用以下颜色。您将获得自定义小部件的操作系统特定背景和前景。

```
SWT.java
     * System color used to paint foreground areas (value is 21).
     */
    public static final int COLOR_WIDGET_FOREGROUND = 21;

    /**
     * System color used to paint background areas (value is 22).
     */
    public static final int COLOR_WIDGET_BACKGROUND = 22; 
```

# c# - Automapper 根据源类型中的枚举值解析目标类型

> ID：12604596
> 
> 赞同：9
> 
> 时间：2012-09-26T14:55:27.873
> 
> 标签：c#, .net, automapper

我正在尝试找到一种方法，让 Automapper 根据 Source 类型中设置的 Enum 值来选择调用映射的目标类型...

例如，给定以下类：

```
public class Organisation
{ 
    public string Name {get;set;}
    public List<Metric> Metrics {get;set;}
}

public class Metric
{
   public int NumericValue {get;set;}
   public string TextValue {get;set;}
   public MetricType MetricType {get;set;}
}

public enum MetricType
{
    NumericMetric,
    TextMetric
} 
```

如果我有以下对象：

```
var Org = new Organisation { 
    Name = "MyOrganisation",
    Metrics = new List<Metric>{
        new Metric { Type=MetricType.TextMetric, TextValue = "Very Good!" },
        new Metric { Type=MetricType.NumericMetric, NumericValue = 10 }
    }
} 
```

现在，我想将其映射到具有类的视图模型表示：

```
public class OrganisationViewModel
{ 
    public string Name {get;set;}
    public List<IMetricViewModels> Metrics {get;set;}
}

public NumericMetric : IMetricViewModels
{
    public int Value {get;set;}
}

public TextMetric : IMetricViewModels
{
    public string Value {get;set;}
} 
```

对 AutoMapper.Map 的调用将产生一个包含一个 NumericMetric 和一个 TextMetric 的 OrganisationViewModel。

Automapper 调用：

```
var vm = Automapper.Map<Organisation, OrganisationViewModel>(Org); 
```

我将如何配置 Automapper 来支持这一点？这可能吗？（我希望这个问题很清楚）

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T15:31:26.157

好的，我目前正在考虑实现这一目标的最佳方法是使用 TypeConverter 作为度量部分......类似于：

```
AutoMapper.Mapper.Configuration
        .CreateMap<Organisation, OrganisationViewModel>();

AutoMapper.Mapper.Configuration
        .CreateMap<Metric, IMetricViewModels>()
        .ConvertUsing<MetricTypeConverter>(); 
```

然后 TypeConverter 看起来像这样：

```
public class MetricTypeConverter : AutoMapper.TypeConverter<Metric, IMetricViewModel>
{
    protected override IMetricViewModelConvertCore(Metric source)
    {
        switch (source.MetricType)
        {
            case MetricType.NumericMetric :
                return new NumericMetric  {Value = source.NumericValue};

            case MetricType.TextMetric :
                return new TextMetric  {Value = source.StringValue};
        }

    }
} 
```

这似乎是正确的方法吗？还有其他指导吗？

# django - 是否覆盖 Django 中的用户模型？

> ID：12604597
> 
> 赞同：1
> 
> 时间：2012-09-26T14:55:30.347
> 
> 标签：django

我目前正在使用 Django，我必须让用户可以注册和登录。我已经阅读了许多文档，并且每个文档都建议扩展用户模型。扩展用户模型有限制吗？我是否必须构建自己的应用程序或扩展用户模型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T16:47:47.853

目前，我建议通过开发版使用 Django 1.5 功能。1.5 应该在 11 月底发布（如果我没记错的话）。

有了它，您就有了一种新的特定方式来修改默认用户模型和周围的所有东西，因此您在自定义模型时保留了很多默认优点（如果这是您需要做的）：

[https://docs.djangoproject.com/en/dev/topics/auth/#customizing-the-user-model](https://docs.djangoproject.com/en/dev/topics/auth/#customizing-the-user-model)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T15:47:04.103

[django-registration](https://bitbucket.org/ubernostrum/django-registration)的好处是它在收集足够的信息来注册用户（这将允许他们登录到您的系统）和收集有关该用户的其他信息以构成他们的个人资料之间有所区别，例如性别、出生日期等。第二点可以通过多种不同的方式完成，django-registration 的作者 James Bennet 还编写了[django-profiles](https://bitbucket.org/ubernostrum/django-profiles)，这是一个单独的应用程序，允许您灵活地构建所需的字段组成用户档案。

如果您想推出自己的配置文件解决方案，那么我不建议您实际扩展（在对象继承意义上）Django User 模型，而是简单地在将保存所有配置文件字段的附加模型中指定外键关系，您可以然后从任何 User 实例遵循与此配置文件模型的反向关系。

例如：

```
class Profile(models.Model):
    user = models.ForeignKey(User)
    nickname = models.CharField(max_length=255)

>>> user = User.objects.create_user(username='a_user', email='me@home.com', password='password')
>>> profile = Profile.objects.create(user=user, nickname='example')
>>> user.profile_set.all()[0].nickname #follow the reverse relationship from the fk in Profile
example 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T15:02:14.963

如果您需要存储在用户模型中的更多信息，请查看[此答案](https://stackoverflow.com/questions/6085025/django-user-profile)。

对于用户注册，有一个名为[django-registration](http://pypi.python.org/pypi/django-registration)的应用程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-24T16:23:40.823

django 1.5 将带来自定义用户模型:) [https://docs.djangoproject.com/en/dev/releases/1.5-alpha-1/#configurable-user-model](https://docs.djangoproject.com/en/dev/releases/1.5-alpha-1/#configurable-user-model)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T15:59:30.840

这个答案变成了一个故事，所以这里是简短的部分：

这对我来说效果很好，但是如果你想要你的 User 子类而不是 RequestContext 实例上的 auth.User ，你需要做额外的工作。

**TLDR**：

我过去这样做的目的是从用户名切换到基于电子邮件的登录。这增加了一些开销，因为它还需要一个新的身份验证后端。从好的方面来说，替换 auth 后端会导致 RequestContext.user 和 HTTPRequest.user 成为自定义 User 子类的实例。

以我的经验，扩展用户的难点在于使用 contrib.admin。

诀窍是 contrib.admin 在未经身份验证/未经授权的用户尝试访问其中一个管理员 URL 时使用自己的登录视图。当我登陆不同的登录页面时，这对我来说是显而易见的，但如果你还没有覆盖这些页面，可能就不那么明显了。不过，这也使用了标准的身份验证后端，所以我的 RequestContexts 以 auth.User 实例结束，而不是我的子类。

解决方案是覆盖 AdminSite 并定义一个新的登录方法。我刚刚重定向到我的前端登录页面，带有`?next`.

与其跳过所有这些障碍，一个更简单的解决方案是将 auth.User 留在上下文中，并在您的用户子类上定义一个类方法：

```
@classmethod
def for_auth_user(cls, auth_user):
    return cls.objects.get(user_ptr_id=auth_user.id) 
```

这只是每个页面加载的额外分贝。您甚至可以编写一个中间件在每个请求开始时进行此交换。

# c# - 接口转发 + 泛型 - StructureMap

> ID：12604605
> 
> 赞同：1
> 
> 时间：2012-09-26T14:55:54.943
> 
> 标签：c#, structuremap

我有一个实现两个接口的通用基类。实现不采用类型参数。它像这样在 StructureMap 中注册：

```
asc.ConnectImplementationsToTypesClosing(typeof(Index<>))
    .OnAddedPluginTypes(cpt => cpt.Singleton()); 
```

目前，我将字段保留在声明为 IAmOneOfTheInterfaces 的消费类型中，但切换构造函数以查找 Index。这工作正常，但我希望能够直接传递接口。

是否有任何类似于[此处](https://stackoverflow.com/a/2535346/794)提到的接口转发功能可以与以这种方式注册的泛型一起使用？

# bison - 有没有办法在保持 LALR(1) 的同时减少这种减少中的替代品数量？

> ID：12604616
> 
> 赞同：1
> 
> 时间：2012-09-26T14:56:08.200
> 
> 标签：bison, yacc, lalr

我目前减少了野牛，这意味着将逗号分隔的列表与几个可选的*不同*规则相匹配：

```
arg_list
    :
    | expr_list
    | assignment_list
    | expr_list ',' assignment_list
    | varargs
    | expr_list ',' varargs
    | assignment_list ',' varargs
    | expr_list ',' assignment_list ',' varargs
    | varkwdargs
    | expr_list ',' varkwdargs
    | assignment_list ',' varkwdargs
    | expr_list ',' assignment_list ',' varkwdargs
    | varargs ',' varkwdargs
    | expr_list ',' varargs ',' varkwdargs
    | assignment_list ',' varargs ',' varkwdargs
    | expr_list ',' assignment_list ',' varargs ',' varkwdargs
    ; 
```

如果不清楚，这意味着实现（在伪代码中）：

```
arg_list
    :
    | expr_list [',' assignment_list] [',' varargs] [',' varkwdargs]
    | assignment_list [',' varargs] [',' varkwdargs]
    | varargs [',' varkwdargs]
    | varkwdargs
    ; 
```

这样做的方法是实施，例如：

```
optional_assignment_list:
    :
    | ',' assignment_list
    ; 
```

然而，后一个公式不是 LALR(1)，因为在 Bison 看到逗号的每一步，它必须决定是转移并寻找一个 *assignment_list* 还是减少一个空的 *optional_assignment_list* 并继续前进寻找* optional_varargs *。

我正在尝试寻找是否有更好的方法来表示这一点。我已经能够通过引入 *optional_varkwdargs* 来减少备选方案的数量，但这仍然留下了 9 个备选方案来减少，我猜这比 16 个要好：

```
optional_varkwdargs
    :
    | ',' varkwdargs
    ;

arg_list
    :
    | expr_list optional_varkwdargs
    | assignment_list optional_varkwdargs
    | expr_list ',' assignment_list optional_varkwdargs
    | varargs optional_varkwdargs
    | expr_list ',' varargs optional_varkwdargs
    | assignment_list ',' varargs optional_varkwdargs
    | expr_list ',' assignment_list ',' varargs optional_varkwdargs
    | varkwdargs
    ; 
```

任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T16:24:16.787

好吧，一种可能性是拥有一个更通用的 arglist 解析器，它允许以任何顺序列出任何这些事物：

```
arg_list: arg_item 
          { $$ = CreateSingletonArgList($1); }
        | arg_list ',' arg_item
          { if (CheckArgListOrdering($1, $3))
                $$ = AppendArgList($1, $3);
            else
                $$ = $1; }
        ;

arg_item: expr
        | assignment
        | vararg
        | varkwarg
        ; 
```

然后，您对 arg_list 进行解析后检查，以确保事情不会以错误的顺序出现。这样做的好处是您可以为这些情况提供更好的错误消息（“kwarg must be after vararg”或类似的），而不仅仅是通用的“语法错误”

**编辑**

通过规则中的上述操作，CheckArgListOrdering 函数会检查以确保 arg_item 可以跟踪现有 arg_list 中的所有内容，如果没有，则发出适当的错误消息。返回值告诉解析器是接受新的 arg_item 还是将其丢弃。Create/Append 函数只是将 arg_lists 管理为任何类型的有序集合数据结构（可能是链表、数组或其他任何合适的）。

# python - 从 id 列表中删除单引号

> ID：12604619
> 
> 赞同：2
> 
> 时间：2012-09-26T14:56:26.000
> 
> 标签：python, api

我需要使用 API 调用的 id 列表附加/格式化 URL。

但是，当我将列表放在 API 的末尾时：

```
https://api.twitter.com/1.1/users/lookup.json?user_id=%s'%a 
```

我只是得到一个空字符串作为响应。

我尝试将列表转换为字符串并删除方括号，执行以下操作：

```
a = str(followers['ids'])[1:-1] 
```

但我仍然遇到同样的问题。我假设它是由开头的单引号引起的。

我尝试从字符串中删除撇号：

```
a.replace("'", "") 
```

现在我已经没有想法了。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-26T15:03:29.137

> *我尝试从字符串中删除撇号...*

您可以使用删除字符串中的撇号`s = s.replace("'", "")`。[`.replace()`](http://docs.python.org/library/stdtypes.html#str.replace)返回一个新字符串，但不会更改原始字符串，因此您将存储返回的字符串。

```
>>> string = "he's a jolly good fellow"
>>> string = string.replace("'", "") 
>>> string
'hes a jolly good fellow' 
```

**但我不认为这不是你的问题。**

[id 需要用逗号分隔](https://dev.twitter.com/docs/api/1/get/users/lookup#api-param-lookup_user_ids)，因此您可能希望使用 a[`.join()`](http://docs.python.org/library/stdtypes.html#str.join)从您的 id 列表中创建字符串。例子：

```
>>> ids = ["1", "23", "123"]
>>> ",".join(ids)
'1,23,123' 
```

在您的情况下，假设`followers['ids']`包含一个 id 列表作为字符串，您可以使用以下方法生成您的 URL：

```
ids = ",".join(followers['ids'])  # generate string of ids (comma separated)
url = "https://api.twitter.com/1.1/users/lookup.json?user_id=%s" % ids 
```

如果`followers['ids']`是整数列表而不是字符串，那么还有一些工作要做，因为`.join()`仅适用于字符串序列。这是将这些整数动态转换为字符串的一种方法（使用[生成器表达式](http://www.python.org/dev/peps/pep-0289/)）：

```
ids = ",".join(str(id) for id in followers['ids']) 
```

# android - 从广播接收器启动的活动，尽管已完成，但仍保留最近的任务

> ID：12604620
> 
> 赞同：5
> 
> 时间：2012-09-26T14:56:32.597
> 
> 标签：android, broadcastreceiver, android-activity, back-stack

我有两个无法解决的活动问题：

我有一个使用警报管理器编写警报的 A 活动，警报接收器在 3 秒内启动一个只有一个完成按钮的 B 活动。

如果我从 A 对警报管理器进行编程并按返回按钮完成此活动，则 B 活动将在 3 秒内出现。一切正常。问题如下：如果我通过启动器重新打开应用程序，系统会启动 A 活动，但如果我通过长按主页按钮（最近使用的任务）启动应用程序，我总是打开 B 活动。我需要当我完成 B 活动时，如果我从任何地方重新打开应用程序，A 活动应该打开。

我试图将 noHistory 添加到活动 B，但问题仍然存在。

这是A活动的代码：

```
public class ActivityA extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_a);

    Button b=(Button) findViewById(R.id.initTimer);
    b.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            programTimer();
        }
    });
}

private void programTimer() {
    AlarmManager manager = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
    Intent intent = new Intent(this, AlarmReciver.class);
    PendingIntent pIntent = PendingIntent.getBroadcast(this, 1, intent,  PendingIntent.FLAG_CANCEL_CURRENT);
    manager.set(AlarmManager.RTC_WAKEUP, System.currentTimeMillis()+3000 , pIntent);
} 
```

}

B活动：

```
public class ActivityB extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_b);

    Button button= (Button) findViewById(R.id.bFinish);
    button.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            finish();
        }
    });
} 
```

}

报警接收器：

```
public class AlarmReciver extends android.content.BroadcastReceiver {
private static final String DEBUG_TAG="ReceptorAlarma";
@Override
public void onReceive(Context context, android.content.Intent intent) {     
    //lanzar activity
    Intent i = new Intent(context, ActivityB.class); 
    i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    context.startActivity(i);       
} 
```

}

显现：

```
 <application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".ActivityA"
        android:label="@string/title_activity_activity" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity android:name=".ActivityB">            
    </activity>

    <receiver android:name=".AlarmReciver" >
    </receiver>
</application> 
```

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T16:37:18.230

你写了：

> 如果我从 A 对警报管理器进行编程并按后退按钮完成此活动，则在 3 秒内会出现 B 活动。一切正常。

**注意：**您现在有 1 个正在运行的任务，其中 ActivityB 作为其根活动。

> 问题如下：如果我通过启动器重新打开应用程序，系统会启动一个活动，

**注意：**当您从启动器启动应用程序时，这将启动另一个以 ActivityA 作为其根 Activity 的任务。现在您有 2 个正在运行的任务：一个以 ActivityA 作为根，一个以 ActivityB

> ...但是如果我通过长按主页按钮（最近使用的任务）启动应用程序，我总是打开 B 活动。

**注意：**当长按 HOME 按钮并从最近使用的任务中进行选择时，您选择的是由以 ActivityB 为根的 AlarmReciver 启动的任务

> 我需要当我完成 B 活动时，如果我从任何地方重新打开应用程序，A 活动应该打开。

您应该能够通过在`<activity>`ActivityB 的标签中设置以下内容来获得所需的行为：

```
android:excludeFromRecents="true" 
```

这将确保当您以 ActivityB 作为其根 Activity 启动任务时，该任务**不会**显示在最近任务列表中。这样，启动应用程序的唯一方法是从主屏幕，或者从最近任务列表中选择它（这将**只**包含以 ActivityA 作为根启动的任务）。

# windows-mobile - 如何禁用windows mobile 6.5表单的关闭按钮

> ID：12604625
> 
> 赞同：1
> 
> 时间：2012-09-26T14:56:43.330
> 
> 标签：windows-mobile, windows-mobile-6.5, windows-mobile-6, windows-mobile-6.1

我正在创建一个 Windows 移动应用程序。在应用程序中，我不想显示表单的关闭按钮（出现在屏幕右上角）有什么办法吗？

任何帮助表示感谢提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T15:02:55.027

将表单的`ControlBox`属性设置为`false`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T03:03:57.213

这取决于始终隐藏关闭按钮还是仅隐藏一种或其他形式：

[http://www.hjgode.de/wp/2012/05/10/windows-mobile-kiosk-mode-series-part-1/](http://www.hjgode.de/wp/2012/05/10/windows-mobile-kiosk-mode-series-part-1/)

# google-chrome - iframe 弹出刷新父窗口在 chrome 或 safari 中不起作用

> ID：12604626
> 
> 赞同：1
> 
> 时间：2012-09-26T14:56:51.237
> 
> 标签：google-chrome, iframe, safari, popup

而在 iframe 中，用户提交一个弹出窗口表单。

弹出窗口关闭，父窗口重新加载，将用户重定向回主页。

这是 iframe 代码：

```
<iframe src="iframe.php"></iframe> 
```

这是 iframe 内的弹出窗口：

```
function popupwnd(url, toolbar, menubar, locationbar, resize, scrollbars, statusbar, left, top, width, height)
{
   if (left == -1)
   {
      left = (screen.width/2)-(width/2);
   }
   if (top == -1)
   {
      top = (screen.height/2)-(height/2);
   }
var popupwindow = this.open(url, '', 'toolbar=' + toolbar + ',menubar=' + menubar + ',location=' + locationbar + ',scrollbars=' + scrollbars + ',resizable=' + resize +  ',status=' + statusbar + ',left=' + left + ',top=' + top + ',width=' + width + ',height=' +  height);
}

<a href="javascript:popupwnd()" target="_parent" title="Login into the Site">Login To Buy</a> 
```

这是关闭弹出窗口并将用户重定向到主页的javascript：

```
<script>
    window.opener.location = /; 
    window.close();
</script>'; 
```

这个过程在 chrome 或 safari 中不起作用，但在 IE 和 firefox 中起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T16:16:36.870

在 Chrome 和 Safari 中使用`window.opener.parent.location.href`而不是工作`window.opener.location`

# xcode - 使用 Xcode 4.5 从命令行运行 iOS 单元测试

> ID：12604628
> 
> 赞同：14
> 
> 时间：2012-09-26T14:56:54.813
> 
> 标签：xcode, unit-testing, jenkins, xcodebuild

虽然从命令行运行单元测试（对于 Jenkins 来说是必需的）曾经使用[这个 hack](http://www.raingrove.com/2012/03/28/running-ocunit-and-specta-tests-from-command-line.html)一直工作到 Xcode 4.4.1 ，但它似乎不再适用于 Xcode 4.5。

现在我收到以下错误消息：

```
....MyTests.build/Script-641C6E0115D3BECD004175F...: line 3: 16669 Segmentation fault: 11  "${SYSTEM_DEVELOPER_DIR}/Tools/RunUnitTests" 
```

任何想法如何使它再次工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T21:20:45.557

更新后我遇到了同样的问题。您必须将参数**RUN_UNIT_TEST_WITH_IOS_SIM=YES**传递给命令 xcodebuild 才能使其工作。

# javascript - 谷歌地图 setZoom() 重新加载地图

> ID：12604629
> 
> 赞同：0
> 
> 时间：2012-09-26T14:56:57.153
> 
> 标签：javascript, google-maps-api-3

我正在构建一个基于地图的应用程序，并且我有一堆标记。当用户单击标记时，地图应放大标记并将其设置为中心。这是我正在使用的功能：

```
zoomInto : function(marker,zoom) {
    var pos = marker.getPosition();
    this.map.panTo(pos);
    this.map.setZoom(zoom);
} 
```

这很好用，但问题是当我点击标记时，谷歌会重新加载地图上的所有内容，包括标记，因此看起来有点“不稳定”。

我怎样才能防止这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T16:01:39.120

需要重新加载地图，因为您正在更改地图的缩放级别和位置。

如果您想检查在使用和修改此演示时触发了哪些事件：http: [//gmaps-samples-v3.googlecode.com/svn/trunk/map_events/map_events.html](http://gmaps-samples-v3.googlecode.com/svn/trunk/map_events/map_events.html)

如果您想提高性能，请尝试本文推荐的方法之一： [https ://developers.google.com/maps/articles/toomanymarkers](https://developers.google.com/maps/articles/toomanymarkers)

高温高压

# matlab - 使用 GUIDE 在 MATLAB GUI 中创建透明文本框

> ID：12604633
> 
> 赞同：1
> 
> 时间：2012-09-26T14:57:18.253
> 
> 标签：matlab, user-interface, matlab-guide

在 MATLAB GUI 中，我在背景中有一张图片（在轴上创建），在它上面我想要文本。我放了一个静态文本框，但我需要它是透明的。我可以使用指南吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T15:10:31.717

您不能使用指南来执行此操作，因为文本对象实际上是 uicontrols。尝试使用`text`代码中的函数添加文本。您可能必须在正确的位置试错。

# asp.net - NavigateUrl 分配给 treednode

> ID：12604635
> 
> 赞同：0
> 
> 时间：2012-09-26T14:57:23.570
> 
> 标签：asp.net, treeview

我正在制作一个树视图，我想在单击树视图目录的文件节点时打开一个文件。我在这里做了什么：

```
foreach (FileInfo File in currentDir.GetFiles())
        {
            TreeNode node = new TreeNode(File.Name, File.FullName);
            node.SelectAction = TreeNodeSelectAction.SelectExpand;
            node.PopulateOnDemand = false;
            node.NavigateUrl = ResolveClientUrl(File.FullName); 
            node.ChildNodes.Add(node);
            currentNode.ChildNodes.Add(node);

        } 
```

不幸的是，当我检查 html 时，它呈现如下： href="file:///D:/Training%2520Sessions/Enterprise%2520Portal/Zeeshan%2520H%2520Jafry%2520EP%2520session%2520-%2520Jul%252018%25202011 %252006.39.15%2520PM.wmv"

该目录是本地的，所以我无法访问它。请问这个问题的解决方法是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T15:06:17.787

Firstly the contents of the directory must be available other than only locally - for instance, within a directory under the root of your website as set up in IIS, or a virtual directory somewhere.

Secondly you can't serve files through web pages with absolute local paths - you will need to make these URLs relative to the domain of the website.

So, the principle is to take an absolute path and 'map' it to a virtual path, or URL, the answer to *that* question is answered all over the place and [here's one for example](https://stackoverflow.com/questions/3164/asp-net-absolute-path-back-to-web-relative-path).

`ResolveClientUrl` won't work in this case because...

> The URL returned by this method is relative to the folder containing the source file in which the control is instantiated.

and it looks like your files are just in some arbitrary directory (as far as the web application is concerned).

You have the information that you need to do this, with the knowledge of where this stuff resides and the application exposes knowledge of where it itself resides (for instance, with the `ApplicationPath` of the request context, and so on).

# sql-server - Reporting Services：获取报告元信息（页面高度、宽度、方向等）

> ID：12604636
> 
> 赞同：2
> 
> 时间：2012-09-26T14:57:26.283
> 
> 标签：sql-server, reporting-services, ssrs-2008, reporting

在当前项目中，我需要获取报告元信息，例如页面像素高度/宽度或页面方向。理想情况下，我想在实际呈现报告本身（通过使用`RenderExecutionService.Render2`方法）之前获得这些信息。

这有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T22:11:45.667

我不确定 Web 服务是否提供按原样查询元信息的方法 - 它可能被视为报告的*一部分，*而不是*元*信息。无论如何，我认为您应该能够使用该[`GetItemDefinition`](http://msdn.microsoft.com/en-us/library/reportservice2010.reportingservice2010.getitemdefinition%28v=sql.105%29.aspx)方法来检索 RDL。在 RDL 中，使用 xpath 甚至可能是正则表达式应该很容易提取此元信息。（注意：RDL 文件只是一个 XML 文件。）

# data-structures - 用于范围计数唯一性的良好数据结构？

> ID：12604638
> 
> 赞同：3
> 
> 时间：2012-09-26T14:57:43.353
> 
> 标签：data-structures, counting

我一直在学习用于存储数据和在 n 维空间中执行范围计数的 kd 树。我想知道是否有其他数据结构可以很好地计算沿某个维度的唯一值。因此，例如，假设我有一些购买数据，如下所示：

```
{ "name" : "Bill", "paid_amount" : 10.00 }
{ "name" : "Anne", "paid_amount" : 3.00 }
{ "name" : "Carl", "paid_amount" : 15.00 }
{ "name" : "Bill", "paid_amount" : 8.00 }
... 
```

我想知道有多少人（例如独特的“名字”）购买了超过 10 人。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T18:36:49.213

这是一篇关于[唯一计数的有效数据结构](http://highscalability.com/blog/2012/4/5/big-data-counting-how-to-count-a-billion-distinct-objects-us.html)（以及大小和准确性的权衡）的文章。

[StreamLib](https://github.com/clearspring/stream-lib)的源代码、文档和相当活跃的邮件列表也是一个很好的资源。

# android - 如何在android sql中执行“in”命令

> ID：12604641
> 
> 赞同：-1
> 
> 时间：2012-09-26T14:57:44.987
> 
> 标签：android, sqlite

在 android 的联系人数据库中，我试图获取一组具有相同帐户名称的记录。下面给出的是查询的“选择”。

```
selection = ContactsContract.Contacts.IN_VISIBLE_GROUP + " =  '1' AND " + ContactsContract.Contacts._ID + " IN  ( SELECT  " + RawContacts.CONTACT_ID +" FROM  raw_contacts WHERE " + RawContacts.ACCOUNT_NAME + "= '" + selectionCriteria +"' )" ;

Cursor = managedQuery(Contacts.CONTENT_URI, new String[]{ContactsContract.Contacts._ID,Contacts.DISPLAY_NAME}, selection, null, order); 
```

这在 android 版本 2.3 中运行良好 ..但在 jellybean 中，我不能直接使用数据库名称作为“raw_contacts”，因为它已更改为“value_raw_contacts”。

我怎样才能使用正确的 sql 命令来实现这一点，而不直接提及像“raw_contacts”这样的数据库名称，而不是使用它的 CONTENT_URI 。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T16:50:58.750

```
static String CONTACTS_TABLE_NAME = "raw_contacts";

if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN){
     ThisClass.CONTACTS_TABLE_NAME = "value_raw_contacts";
} 
```

[http://developer.android.com/reference/android/os/Build.VERSION_CODES.html](http://developer.android.com/reference/android/os/Build.VERSION_CODES.html)

# ruby - 带日期的 ruby XL - 规范有效，实际使用无效

> ID：12604645
> 
> 赞同：1
> 
> 时间：2012-09-26T14:57:59.210
> 
> 标签：ruby, excel, rspec, rubyxl

使用 ruby​​XL 处理带有日期的 xlsx 文件。日期处理规范通过了，但是当我尝试在自己的脚本中复制它时，它不起作用。相反，它将日期保留为浮点数/数字（这是日期在 excel 中的存储方式）。[我从 Github](https://github.com/gilt/rubyXL/)下载了ruby​​XL 源代码并运行了规范。与过去日期有关的一切。但是，当我在规范文件之外运行以下内容时，它会表现出错误的行为。

```
require 'rubyXL'

workbook = RubyXL::Workbook.new
worksheet = RubyXL::Worksheet.new(workbook)
workbook.worksheets << worksheet

worksheet.add_cell(0, 0, "0:0")
cell = worksheet[0][0]

date = Date.parse("January 20, 2011")
cell.change_contents(date)

puts cell.is_date? # false -- spec says it should be true
puts cell.value == date # false -- spec says it should be true
puts date # 2011-01-20
puts cell.value # 40563/1 <-- should be a date object 
```

将此与[ruby​​XL 规范测试](https://github.com/gilt/rubyXL/blob/master/spec/lib/cell_spec.rb)进行比较（单元开始时与我在上面所说的完全相同）：

```
it 'should return the value of a date' do
      date = Date.parse('January 1, 2011')
      @cell.change_contents(date)
      @cell.should_receive(:is_date?).any_number_of_times.and_return(true)
      @cell.value.should == date
    end 
```

我什至添加了一些`puts`语句来检查它是否真的在工作——它是（类似于输出`2011-01-01`的东西）。我还尝试删除 spec 文件夹中除 之外的所有其他文件`cell_spec.rb`，以查看是否设置了我丢失的设置。仍然没有改变任何东西。

在这一点上，我很困惑，但我确定我一定错过了一些简单的东西。我只是不明白为什么我不能在常规代码中复制规范行为。

# sql - 拆分固定长度字符串

> ID：12604647
> 
> 赞同：1
> 
> 时间：2012-09-26T14:58:02.803
> 
> 标签：sql, sql-server, sql-server-2008

我需要在 sql server 中拆分一个字符串并将数据插入到表中。字符串是固定长度的，没有逗号分隔。在字符串中，我可以插入 1 条或多条记录，例如：

id = 2 个字符 名称 = 4 个字符

字符串：`01AAAA02BBBB03CCCC`。

在此示例中，我要插入 3 条记录（字符串中只能有一条或多条记录）

id 名称 01 AAAA 02 BBBB 03 CCCC

我需要一种方法将此信息拆分为两个不同的列和三个不同的行。我正在考虑使用 BCP 实用程序，但我不确定，也许我需要拆分并生成一个文件，然后使用 BCP。

任何的想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T15:05:23.893

由于字符串始终具有固定长度，因此您可以这样做：

```
DECLARE @s VARCHAR(50) = '01AAAA02BBBB03CCCC';

SELECT *
FROM
(
    SELECT SUBSTRING(@s, 01, 2) AS ID,  SUBSTRING(@s, 3, 4) AS Name
    UNION ALL
    SELECT SUBSTRING(@s, 7, 2) AS ID,  SUBSTRING(@s, 9, 4) AS Name
    UNION ALL
    SELECT SUBSTRING(@s, 13, 2) AS ID,  SUBSTRING(@s, 15, 4) AS Name
) t; 
```

这会给你：

```
ID  Name
01  AAAA
02  BBBB
03  CCCC 
```

**更新：**如果你想从表的列中获取这个字符串，你可以这样做：

```
DECLARE @t table(name varchar(50));
INSERT INTO @t VALUES
('01AAAA02BBBB03CCCC'),
('01DDDD02BBBB03CCCC'),
('01HHHH02QQQQ03CCCC'),
('01IIII02MMMM03CCCC');

SELECT *
FROM
(
    SELECT SUBSTRING(name, 1, 2) AS ID,  SUBSTRING(name, 3, 4) AS Name
    FROM @t
    UNION ALL
    SELECT SUBSTRING(name, 7, 2) AS ID,  SUBSTRING(name, 9, 4) AS Name
    FROM @t
    UNION ALL
    SELECT SUBSTRING(name, 13, 2) AS ID,  SUBSTRING(name, 15, 4) AS Name
    FROM @t
) t; 
```

这将为您提供以下信息：

```
ID  Name
01  AAAA
01  DDDD
01  HHHH
01  IIII
02  BBBB
02  BBBB
02  QQQQ
02  MMMM
03  CCCC
03  CCCC
03  CCCC
03  CCCC 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T15:13:16.647

以下将处理超过 3 个 id/name 对。但是请注意，没有错误检查。我把它留给你。

```
DECLARE @Input NVARCHAR(18)
SET @Input = '01AAAA02BBBB03CCCC'

DECLARE @Data TABLE 
(
    [Id] NCHAR(2),
    [Name] NCHAR(4)
)

WHILE LEN(@Input) > 0
BEGIN

    DECLARE @CurrentData NCHAR(6)
    SET @CurrentData = LEFT(@Input, 6)  

    DECLARE @CurrentId NCHAR(2)
    SET @CurrentId = LEFT(@CurrentData, 2)  

    DECLARE @CurrentName NCHAR(4)
    SET @CurrentName = RIGHT(@CurrentData, 4)   

    INSERT INTO @Data
    (
        [Id],
        [Name]
    )
    SELECT
        @CurrentId,
        @CurrentName

    SET @Input = RIGHT(@Input, LEN(@Input) - 6)

END

SELECT 
    [Id],
    [Name]
FROM
    @Data 
```

# javascript - JavaScript 测试在 Visual Studio 2012 测试资源管理器中失败，但在 resharper 中成功

> ID：12604648
> 
> 赞同：1
> 
> 时间：2012-09-26T14:58:04.403
> 
> 标签：javascript, unit-testing, visual-studio-2012, chutzpah

我在为当前项目编写 JavaScript 测试时遇到了一个非常烦人的问题。

已安装适用于 Visual Studio 2012 的 Chutzpah 测试适配器（卸载并再次安装）

所有其他 JavaScript 测试都运行顺利，除了一个（我在这里寻求帮助的原因）

如果我在 Resharper 中运行 JavaScript 测试成功，但是当我在 Visual Studio 2012 测试资源管理器中运行它们时，其中之一如上所述）不会成功。

我已经调试了整个代码，重新启动了 Visual Studio，重新启动了我的计算机，删除了我的项目并从我们的 Team Foundation Server 再次下载了它，我还删除并创建了一个新的工作区，但没有任何帮助，这真的很令人沮丧。我在互联网上搜索了所有内容，但没有找到任何偶然发现这个问题的人......

构建很好，应用程序运行完美......

如果您知道为什么这个不起作用，请告诉我！

# git - GIT：查明文件中的更改

> ID：12604649
> 
> 赞同：0
> 
> 时间：2012-09-26T14:58:05.167
> 
> 标签：git

我在 repo 的“master”分支中有一个文件 myFile.txt，其中包含一些内容。开发人员 developerA 创建了一个分支并在其中做了一些事情，其中​​他修改了 myFile.txt。当 developerA 工作时，developerB 在同一个 myFile.txt 中做了一些更改。

他们都被推送到中央仓库，这样我们的 CI 系统就可以构建组件。开发者A推送，然后开发者B推送。出于任何奇怪的原因，可以在文件历史记录“git whatchanged myFile.txt”中看到 developerA 的更改，并且没有显示 developerB。

当我克隆 repo 时，我的“master”分支的 HEAD 会检查 developerB 的更改，但查询历史记录我无法确定更改 developerB 文件内容的提交。

那是怎么发生的？如何找到更改文件内容的提交？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-30T08:23:58.327

您的问题可能是**developerA**和**developerB**的提交位于不同的分支上。

解决问题的最简单方法应该是[`--all`](https://git-scm.com/docs/git-log)使用`git log`.

# java - Android - OnClickListener - 构造函数未被调用

> ID：12604651
> 
> 赞同：0
> 
> 时间：2012-09-26T14:58:12.377
> 
> 标签：java, android, constructor, onclick, onclicklistener

这是我的第一个问题。通常我可以通过 Gogle 找到我的答案，这通常只会让我进入 stackoverflow，但这最终把我推到足以问我自己的问题，可能很明显以前没有人需要问它！

无论如何，这不是特别针对任何事情。只是想掌握一下`onlicklisteners`。在这种情况下，特别是 inner-class `onclicklisteners`。

**问题：**为什么程序会跳过构造函数`MathButtonClicked`？我是一个`CharSequence`，但构造函数永远不会被调用（我通过 logcat 知道这一点）。

```
public class Main extends Activity {

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Button mathButton = (Button) findViewById(R.id.mathButton);
    EditText et = (EditText) findViewById(R.id.inputText);
    CharSequence inputText = et.getText().toString();

    mathButton.setOnClickListener(new MathButtonClicked(inputText));
}

private class MathButtonClicked implements OnClickListener {
    private CharSequence receivedText;

    public MathButtonClicked(CharSequence inputText) {
        this.receivedText=inputText;
        Log.d("Constructor", " " + receivedText);
    }

    public void onClick(View v) {
        Log.d("Onclick", " " + receivedText);
        Intent intent = new Intent(Main.this, Math.class);
        intent.putExtra("inputText", getText());
        startActivity(intent);          
    }

    public CharSequence getText(){
        return receivedText;
    }
    }//end inner class
} //end main 
```

如果参数与参数匹配，构造函数不是总是被调用吗？@_@

另外，我想要完成的是将`EditText`视图中的文本传递给新的意图。

我可以通过在 中创建`EditText`对象来做到这一点`OnClick`，但我想在 main 方法中创建它，然后将信息传递给`OnClick`.

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T15:04:59.417

```
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);

Button mathButton = (Button) findViewById(R.id.mathButton);
EditText et = (EditText) findViewById(R.id.inputText);
CharSequence inputText = et.getText().toString();

 mathButton.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
                     String receivedText=inputText;
         Log.d("Onclick", " " + receivedText);
                     Intent intent = new Intent(getApplicationContext(), Math.class);
                     intent.putExtra("inputText", receivedText);
                     startActivity(intent);

        }
    }); 
```

# jquery - 来自不同页面 Wordpress 的 jQuery 同位素过滤器

> ID：12604652
> 
> 赞同：2
> 
> 时间：2012-09-26T14:58:11.900
> 
> 标签：jquery, wordpress, jquery-isotope

我试图从一个完全不同的页面过滤到我的同位素所在的位置。

目前，我正在成功调用同位素：

```
 $(function() {
    // cache container
    var $container = $('.isotope-container');
    var $defaultfilter = $('.feature-this');
    $('.isotope-container').isotope({
      filter: '.feature-this',
      masonry: { columnWidth: 326, resizesContainer: false }
    });

    // filter items when filter link is clicked
    $('#filters a').click(function(){
      var selector = $(this).attr('data-filter');
      $container.isotope({ filter: selector });
      return false;
    });
    // set selected menu items
   var $optionSets = $('.option-set'),
       $optionLinks = $optionSets.find('a');

       $optionLinks.click(function(){
          var $this = $(this);
    // don't proceed if already selected
    if ( $this.hasClass('selected') ) {
        return false;
    }
   var $optionSet = $this.parents('.option-set');
   $optionSet.find('.selected').removeClass('selected');
   $this.addClass('selected'); 
  });
}); 
```

我想在另一个页面上，在单击链接时过滤结果，其标记如下：

```
 <ul>
        <li><a href="/isotope/#filter=.filter1">Filter 1</a></li>
        <li><a href="/isotope/#filter=.filter2">Filter 2</a></li>
        <li><a href="/isotope/#filter=.filter3">Filter 3</a></li>
        <li><a href="/isotope/#filter=.filter4">Filter 4</a></li>
        <li><a href="/isotope/#filter=.filter5">Filter 5</a></li>
    </ul> 
```

我无法让它工作。它在这里按需要工作，但不是来自不同的页面：

[http://isotope.metafizzy.co/demos/hash-history.html](http://isotope.metafizzy.co/demos/hash-history.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T15:17:51.267

我已经为你找到了答案——我写了一篇关于它的博客文章；

[来自不同 Wordpress 页面的同位素过滤](http://www.mcnab.co/blog/content-management-systems/jquery-isotope-filtering-results-for-url/)

只是为了链接腐烂等，我会在这里复制它。我使用了 jQuery cookie 插件并创建并销毁了一个 cookie，该 cookie 通过过滤器传递到包含同位素的页面。在我的例子中，header.php 中的每个页面上都有一个永久的过滤器主菜单。但是，我使用此代码为菜单提供了不同的类，具体取决于用户是在主页（上面有同位素）还是其他页面上；

```
<?php

if (is_front_page()) {
   echo '<ul id="filters">';
} else {
   echo '<ul id="cookiefilter">';
}

?> 
```

然后更改了 Javascript，以便如果被点击的链接是 cookiefilter 菜单的一部分（即离开同位素页面），则`#cookiefilter a`触发点击事件并创建一个 cookie。下面的代码块根据 cookie 过滤同位素，然后将其销毁。它所在的网站是；

[http://www.face-educationmarketing.co.uk](http://www.face-educationmarketing.co.uk)

在行动中看到它的解释。主页上有同位素，“工作”标题下的所有条目都是同位素过滤器。“关于”标题是一个 WP 菜单，单击“关于”下的其中一个链接，您将被带到不同的 WP 页面。在该页面上，您将检查 Work 过滤器列表中标记的更改 - ul 类已更改，现在是；

```
<ul class="cookiefilter"> 
```

而不是;

```
<ul class="filters"> 
```

这是重要的一点，因为在下面的 JS 中，点击事件的`#filters a`行为与点击事件的行为不同`#cookiefilter a`

在后一种情况下，会创建一个带有过滤器名称的 cookie。onload JS 检查是否存在这样的 cookie，如果存在，则调用 Isotope，使用 cookie 中的值对其进行过滤，然后销毁 cookie，以便正常过滤器工作。这是JS；

```
 // filter items when filter link is clicked
    $('#filters a').click(function(){
        var selector = $(this).attr('data-filter');
        $container.isotope({ filter: selector });
        return false;
    });

    // Set cookie based on filter selector
    $('#cookiefilter a').click(function(){
        var selector = $(this).attr('data-filter');
        $.cookie("listfilter", selector, { path: '/' });
    });

    if ( $.cookie("listfilter") ) {
        $container.isotope({ filter: $.cookie("listfilter") });
        $.cookie("listfilter", null, { path: '/' });
        return false;
    } 
```

**向链接添加“活动”类**

基于评论的更多信息。一个很好的问题，您将如何向活动过滤器添加一个类，以便您可以应用 CSS 向用户显示过滤器处于活动状态？

我已经使用以下 JS在我自己的主页 ( [http://www.mcnab.co ) 上完成了该操作。](http://www.mcnab.co)查看刊头右侧的 Magento、Wordpress、Joomla 部分。这些是同位素过滤器。

当按下链接时，此脚本会清除带有 id 的无序列表中包含的链接中的所有类，`filters`并在重新触发 Isotope 之前将类“活动”添加到单击的链接；

```
 var $filterlist = $('ul#filters');
    // filter items when filter link is clicked
    $('#filters a').click(function(){
        $this = $(this);

        var selector = $(this).attr('data-filter');

        // Remove classes from all filters
        $filterlist.find('a').each(function(){
            $(this).removeClass();
        }); 

        // add active class to clicked filter
        $this.addClass('active');

        // refire isotope using the newly clicked filter
        $container.isotope({ filter: selector });
        return false;
    }); 
```

要从另一个页面执行此操作，您将添加一个类似的脚本，该脚本`#cookiefilter a`找到具有与 cookie 相同的 date-filter 属性的链接，并向其中添加“活动”类。

# actionscript-3 - Flash 中的编译时共享库符号

> ID：12604659
> 
> 赞同：2
> 
> 时间：2012-09-26T14:58:30.587
> 
> 标签：actionscript-3, flash, swc

我们的 Flash 项目具有以下结构。两个带有图形资产（符号）的 FLA 文件，使用 SWC 导入到纯 AS3 代码项目中。

![在此处输入图像描述](../Images/45d31fd08993cfe3e67499194cbb87c0.png)

ui.fla 和 login.fla 中都使用了一些符号，因此我们希望将它们放在共享库中，就像这样。

![在此处输入图像描述](../Images/e8cd5fa46cc8bb444a8528aa8c476888.png)

问题是我们不想在例如 ui.fla 的代码中使用 shared.fla 的符号，而是在创作环境中使用，这样我们就可以将符号从 shared.fla 拖到 ui.fla 的符号中（无需复制）。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T19:52:44.113

可以通过`Remote Shared Library`(RSL) 共享资产。

*但是请注意：我在生产中没有看到这种方式，这只是我几年前的实验。*

这是一个例子：

1.  创建包含共享资产的文档。让它有名字'shared_lib'
2.  创建一些符号。为 RSL 准备：
    *   在 Flash IDE 中选择 Library->your symbol(right click)->Properties...
    *   选择`Export for ActionScript`& `Export in frame 1`，输入符号名称
    *   选择`Export for runtime sharing`。键入该 swf 的名称：'shared_lib.swf'
    *   `OK`
    *   `Publish`它到 SWF 和 SWC

所以，现在我们有了我们的图书馆。让我们创建一些将使用它的资产

1.  创建另一个文档，我们称之为“mainui”。
2.  返回“shared_lib”，在`Library`导出的符号中选择，`CTRL + C`（或右键单击，复制）
3.  返回刚刚创建的“mainui”，粘贴到`Library`.
4.  创建一些其他符号，将其导出为 ActionScript 并将我们导入的符号放入其中
5.  编译它，导出到SWC，SWF。

在这一步，我们有`shared_lib.swf`和。我们也可以使用外部资产。您可以以相同的方式创建另一个资产。`shared_lib.swc``mainui.swc``mainui`

让我们谈谈将使用我们的资产的项目设置。

那么，我们目前究竟拥有什么？`Mainui.swc`有符号，其中包含另一个**“虚拟”**符号。如果您只是尝试`mainui.swf`使用一些分析器在浏览器中加载，您会看到，首先它会加载`mainui.swf`，然后会加载`shared_lib.swf`。

但是，如果您尝试创建一些项目并包含`mainui.swc`，您将收到未定义符号的错误，因为所有具有 mainui - 的只是对来自 shared_lib 的符号的虚拟引用。

要解决它，您必须**完全**包含`shared_lib.swc`在您的项目中。在这种情况下，您将拥有：

*   通过**library-path 指令**：可选包括`mainui.swc`
*   通过**包含库指令**：完全包含`shared_lib.swc`

现在，它将起作用。

希望，这会有所帮助。

# microsoft-metro - 一个 APPX Windows Store 包可以包含多个“应用程序”吗？

> ID：12604663
> 
> 赞同：1
> 
> 时间：2012-09-26T14:58:43.833
> 
> 标签：microsoft-metro, package, windows-store, appx, appxmanifest

我试图更好地理解 APPX 包的 appxmanifest 文件。我注意到对于我看到的每个示例，它都有一个`<Applications>`标签，后跟一个`<Application>`标签。尽管清单中可以包含多个“应用程序”，但似乎。这实际上意味着什么？这实际上是可能的还是微软在设计 AppxManifest 架构时只是考虑向前兼容性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T15:41:00.740

清单确实将其定义为一种可能性，并且通过手动编辑，可以做到这一点。

但是，我相信您不会为此通过商店认证。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-04-02T20:25:35.213

.appxbundle 包是您问题的可能解决方案。

[http://msdn.microsoft.com/en-us/library/windows/apps/bg182885.aspx#two](http://msdn.microsoft.com/en-us/library/windows/apps/bg182885.aspx#two)

# java - JUnit 测试和 Google Guice

> ID：12604666
> 
> 赞同：1
> 
> 时间：2012-09-26T14:58:52.880
> 
> 标签：java, design-patterns, junit

我是 JUnit 和设计模式的初学者，请见谅。

我正在阅读这个技术网页：

[http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&sqi=2&ved=0CB4QFjAA&url=http%3A%2F%2Ftechruminations.wordpress.com%2F2011%2F05%2F30% 2F销售税问题形式-thoughtworks-for-interview%2F&ei=QBVjUIHgDYWAiQefzoHoBQ&usg=AFQjCNFIBDF10v9zEMRpAIgl9Yi7DZ172w&sig2=E-Dwtx9UaU4lBbyD0j9bww](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&sqi=2&ved=0CB4QFjAA&url=http%3A%2F%2Ftechruminations.wordpress.com%2F2011%2F05%2F30%2Fsales-tax-problem-form-thoughtworks-for-interview%2F&ei=QBVjUIHgDYWAiQefzoHoBQ&usg=AFQjCNFIBDF10v9zEMRpAIgl9Yi7DZ172w&sig2=E-Dwtx9UaU4lBbyD0j9bww)

我可以理解实际的编码和班级组织等。唯一让我困惑的是以下与此特定问题相关的两个问题：

1.  它通过使用 Google 的 Guice 使用了一种称为“依赖注入”的设计模式，但是，我发现我可以在不使用这种设计模式的情况下实现相同的功能。我想知道在这个问题中使用依赖注入不是必须的吗？

2.  由于我是 JUnit 的新手，我的理解是他为 cart、item 编写了测试用例并单独测试它们以证明正确性。但是为什么他需要最后的“构建和部署”部分来编译和运行测试程序，因为我可以很容易地做到这一点而无需创建该 xml 文件，只需在 Eclipse 中右键单击并选择“作为 JUnit 测试运行”。

请给我一些关于 JUnit 和设计模式的帮助，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T15:42:35.233

1.  Guice 是一个依赖注入框架，它是一个非常有用的工具，用于管理长链对象及其依赖关系，以及以后更改实现。对于这个问题或任何问题，它并不是绝对必要的，但您可能会发现它在某些情况下非常有用。

    *   在您发布的示例中，ItemIntf 的实现者只有一个，CartIntf 的实现者只有一个，TaxCalculatorIntf 的实现者只有一个。因为这些是与 Guice 绑定的，所以您可以稍后编写 CartIntf 的另一个实现（例如，SessionBasedCart）并通过更改模块中的那一行来更改您的类使用的实现。
    *   同样，如果 Item 需要额外的依赖项，例如 ItemCatalog，则无需更改任何其他文件。Item 可以简单地注入 ItemCatalog。
    *   最后，使用依赖注入框架，您可能会发现您的类更容易测试。对于像 ServiceTaxCalculator 这样的类，如果它调用任何外部依赖项，编写一个传递这些依赖项的测试非常容易（而不是让你的类使用`new`运算符然后稍后替换它们）。
2.  *Build and Deployment*部分引用了一个名为 Ant的工具，它是一种使用 XML 来指定构建指令和依赖项（如 JUnit）的方法。Eclipse 有一组用于管理类路径和管理对 JUnit 的依赖项的内置工具，这意味着您不需要自己构建其中的一个。但是，如果您想在 Eclipse 之外运行测试，您可能需要创建一个与该文件类似的文件。

您可以阅读有关[Apache Ant](http://ant.apache.org/)的更多信息，以确切了解它可以为您的项目做什么，还可以阅读更多有关[Google Guice](http://code.google.com/p/google-guice/wiki/GettingStarted)以及为什么依赖注入对于某些项目可能是一个好主意的信息。

# java - Eclipse 错误：java.library.path 中没有 jogl

> ID：12604670
> 
> 赞同：2
> 
> 时间：2012-09-26T14:58:57.017
> 
> 标签：java, eclipse, compiler-errors

所以我对 Eclipse 还是很陌生（实际上是在尝试使用它来开发东西的第一周。）我尝试从[http://unfoldingmaps.org/](http://unfoldingmaps.org/)导入一个示例项目，并在尝试编译他们的测试项目时遇到错误：

Eclipse 错误：线程“动画线程”中的异常 java.lang.UnsatisfiedLinkError：java.library.path 中没有 jogl

现在我的 $path sys var 看起来像这样：

```
 C:\csvn\Python25\;%SystemRoot%\system32;%SystemRoot%;%SystemRoot%\System32\Wbem;%SYSTEMROOT%\System32\WindowsPowerShell\v1.0\;C:\Program Files\SourceGear\Common\DiffMerge\;C:\Program Files\TortoiseSVN\bin;C:\Program Files\MySQL\MySQL Server 6.0\bin; %JAVA_HOME%;%ANT_HOME%\bin 
```

有什么我想念的吗？Jogl.jar 在项目中，但似乎该项目只是跳过了一些东西.. 帮助？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T15:30:36.137

似乎您的应用程序需要某种本机库，您需要在 eclipse 的 VM args 字段上指定参数 -Djava.library.path=/path/to/libs 。

# json - 如何在一个请求中更新 OData 实体并修改其导航属性？

> ID：12604673
> 
> 赞同：7
> 
> 时间：2012-09-26T14:59:09.003
> 
> 标签：json, wcf-data-services, odata

我正在尝试使用 WCF 数据服务提供的 OData 服务（目前使用 OData V3 application/json;odata=verbose 有效负载格式。我将来可能会使用 JSON Light 格式）来实现我认为的简单场景. 基本场景是这样的：

我有两个实体：

```
class Person 
{ 
  public int ID { get; set; }
  public string Name { get; set; } 
  public virtual PersonCategory Category { get; set; }
}

class PersonCategory
{
  public int ID { get; set; }
  public string Description { get; set; }
  public virtual ICollection<Person> People { get; set; }
} 
```

现在，我想为 Person 创建一个简单的编辑页面。这个编辑页面可能有一个名称输入，以及一个人的类别的输入或下拉列表。

所以，场景是这样的：

1.  代码使用 $expand 为 Category 下载 Person： GET /api.svc/People(1)?$expand=Category
2.  用户编辑人员的名称属性及其类别。
3.  该页面的代码发出一个更新该人员的名称和类别属性的请求。

这里的关键在于“单个请求”。这是我找不到文档的部分。我见过他们将上面的数字 3 分成两个请求的例子。像这样的东西（我不记得确切的格式 - 我也不确定您是否必须在执行 PUT 之前删除类别链接）：

```
PATCH /api.svc/People(1) with content: {"Name": "new name" }
PUT /api.svc/People(1)/$links/Category with content: { "url": "/api.svc/Categories(2)" } 
```

但是，我也听说过，但没有证明，可以通过对 Category 导航属性的更改与对 Person 实体的其他更改一起指定的单个请求来实现此更新。有人可以给我一个如何做到这一点的例子吗？另外，你能告诉我如何使用多对多导航属性来完成，而不是我上面描述的一对多。

最后，我目前使用的是详细的 JSON 格式 V3。如果我改用新的 JSON 灯光格式，您对上述问题的回答会不会有所不同？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-24T07:51:50.273

我发现了两种内联表示导航属性的方法：

**`application/json;odata=verbose`**- `{ "Name": "new name", "Category": { "__metadata": { "uri": "Categories(2)" }}}`

**`application/json`**-`{ "Name": "new name", "Category@odata.bind": "Categories(2)" }`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-03T19:47:42.407

Pratik 的评论就是答案（Pratik 如果您想将此作为答案重新发布，我会这样标记 - 谢谢！）：

> 问题：您是要更新类别实例还是要更新类别实例的某些属性。除了批处理之外，没有其他方法可以做后面的事情。对于前者，您可以执行以下操作：{ "Name" : "new name", "Category" : { "__metadata" : { "uri" : "/api.svc/Categories(2)" }}}。希望这可以帮助。– 普拉蒂克

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-02T14:15:22.980

你不再需要批次了。您可以在一个电话中完成。您只需要发送更改的属性并让存储库处理更改的属性。

```
public class Person 
{
   public string FirstName {get;set;}
   public string LastName {get;set;}
   public int Age {get;set;}
} 
```

假设您注意到名字有错字，Jhon，应该是 John。您可以编辑名字并将其发送出去。所以你有以下对象模型。您可以通过以下两种方式之一获得此信息：

*   有两个参数并设置`BodyStyle = WebMessageBodyStyle.Wrapped`
*   只需创建一个具有两个属性的通用模型对象：属性 1 是类型 T，属性 2 是列表。

所以你会发送这个json：

```
[{ FirstName = 'John' }, ['FirstName']] 
```

现在在服务器端，您可以做您需要做的事情。

如果您不想发送更改的属性，您可以通过选择任何值不是默认属性的属性来猜测更改的属性。

{名字='约翰'}

然后你可以使用一些方法来查看哪些属性发生了变化：

*   每个实体的自定义代码，以确保每个属性不是默认值并设置它。每个实体需要一段代码。
*   反射以确保每个属性都不是默认值。所有实体都需要 1 个类。我在 2014 年在实体框架中做到了这一点：[http ://www.rhyous.com/2014/12/01/entityupdater-generic-helper-for-entity-framework/](http://www.rhyous.com/2014/12/01/entityupdater-generic-helper-for-entity-framework/)

# javascript - 更新：JavaScript 代码显示为子节点

> ID：12604674
> 
> 赞同：0
> 
> 时间：2012-09-26T14:59:08.693
> 
> 标签：javascript, xml, html, document.write

**解决方案：**我想通了。在 zohodiscussions.com 的帮助下，我使用了 jQuery 而不是 JavaScript。

```
Ajax Google plugin:  http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js

**js. file:**
function form_input_classes() {

    jQuery('input[type="text"]').addClass('text');
    jQuery('input[type="password"]').addClass('text');
    jQuery('input[type="checkbox"]').addClass('checkbox');
    jQuery('input[type="radio"]').addClass('radiobutton');
    jQuery('input[type="submit"]').addClass('submit');
    jQuery('input[type="image"]').addClass('buttonImage');

}
function form_labelize() { jQuery(".labelize input:text").clearingInput(); }

var version = jQuery.browser.version;

if (version instanceof Object) { version = version.number(); }

function loadXMLDoc(XMLname) {
    return jQuery.ajax({ async: false, url: XMLname }).responseXML;
}
xmlDoc = loadXMLDoc("demo.xml");
var M = xmlDoc.getElementsByTagName("rotatingImages");
jQuery(function () {
    jQuery('script').remove()
    form_input_classes();
    form_labelize();
    var pauseClicked = function () {
        jQuery('#cycle').cycle('pause');
        jQuery('#play').attr("style", "display:block");
        jQuery('#pause').attr("style", "display:none");
        jQuery('#pause').removeClass("active");
        return false;
    };
    var playClicked = function () {
        jQuery('#cycle').cycle('resume');
        jQuery('#pause').attr("style", "display:block");
        jQuery('#play').attr("style", "display:none");
        jQuery('#pause').addClass("active");
        return false;
    };
    jQuery('#play').attr("style", "display:none");
    jQuery('#pause').attr("style", "display:block");
    jQuery('#pause').click(pauseClicked);
    jQuery('#play').click(playClicked);
    jQuery("#slideNavigation a").focus(function () {
        jQuery(this).blur();
    });

    jQuery('#cycle').cycle({
        fx: 'fade',
        speed: 1000,
        timeout: 5000,
        prev: '#prev',
        next: '#next',
        pager: '#hero-nav ul ',
        pagerAnchorBuilder: function (idx, slide) {
            return '#hero-nav li:eq(' + idx + ') a.page';
        }
    });

})

**HTML references:**
<div id="content" class="clearfix home">
  <div id="hero">
    <div id='rotator'>
      <div id='cycle' class='clearfix'>
       <script type="text/javascript">
        jQuery(M).find('image').each(function (i, img) {
        document.write("<img src='" + jQuery(img).text() + "' />");
        })
       </script>
      </div>
    </div>

     <!--end-rotating-images-->
       <div id="hero-cycle" class="clearfix">
        <div id="hero-nav">
         <ul>
          <script type="text/javascript">
           jQuery(M).each(function (i, item){
           document.write("<li class='hero-text'>");
           document.write("<div class='hero-info clearfix'>");
           document.write("<a href='" +
     jQuery(item).find('filePath').text() + "' target='_blank'>" +
     jQuery(item).find('description').text()
     + "</a>");
           document.write("</div>")
           document.write("<a class='page' href='#'></a></li>")
          })
          </script>

      </ul>
      <div id="annc_controls">
         <a href="#" id="play">
         <img src="images/blue_play.gif" alt="Play" border="0" style="vertical-align: text-bottom"/></a>
         <a href="#" id="pause">
         <img src="images/blue_pause.gif" alt="Stop" border="0" style="vertical-align: text-bottom"/>
         </a>
      </div>
      <!--<div id="slideNavigation"></div>-->
      </div>
      <!-- /#hero-nav -->
      </div>
      <!-- /#hero-cycle -->
      </div>
      <!-- /#hero -->
      </div> 
```

我更新了我的代码，旋转图像与描述一致。我唯一的问题是首先加载 javascript 来代替第一张图片。只有 3 张图像，代码显示第一张图像，然后是图像 #1，依此类推。这是 ActiveXObject 和 IE 9 的浏览器问题吗？我在使用 FireFox 最新版本时遇到了类似的问题。此浏览器中没有显示任何内容。有什么帮助吗？——</p>

.html 文件：

```
<head><script type="text/javascript">
<!--
    function loadXMLDoc(XMLname)
    //
    {
        var xmlDoc;

        if (window.XMLHttpRequest) {
            xmlDoc = new window.XMLHttpRequest();
            xmlDoc.open("GET", XMLname, false);
            xmlDoc.send("");
            return xmlDoc.responseXML;
        }
        // IE 5 and IE 6

        else if (ActiveXObject("Microsoft.XMLDOM")) {
            xmlDoc = new ActiveXObject("Microsoft.XMLDOM");
            xmlDoc.async = false;
            xmlDoc.load(XMLname);
            return xmlDoc;
        }
        alert("Error loading document!");
        return null;
    }

    xmlDoc = loadXMLDoc("demo.xml");

    var M = xmlDoc.getElementsByTagName("rotatingImages");

    //-->

</script>
</head>
<div id="hero">
  <div id='rotator'>
   <div id='cycle' class='clearfix'>
     <script type="text/javascript">
      for (i = 0; i < M.length; i++) {
      document.write("<img src='" + xmlDoc.getElementsByTagName("image")[i].childNodes[0].nodeValue + "' />");
      }
     </script> 
      </div>
     </div>
    </div>
  <!--end-rotating-images-->
   <div id="hero-cycle" class="clearfix">
      <div id="hero-nav">
        <ul>
          <script type="text/javascript">
              for (i = 0; i < x.length; i++) { // Start 3 Rotating Images 
               document.write("<li class='hero-text'>");
               document.write("<div class='hero-info clearfix'>");
               var linkValue = x[i].getElementsByTagName("description")[0].childNodes[0].nodeValue;
               var linkValue = x[i].getElementsByTagName("filePath")[0].childNodes[0].nodeValue;
               document.write("<a href='" + linkValue + "' target='_blank'>");
               linkValue = x[i].getElementsByTagName("description")[0].childNodes[0].nodeValue;
               document.write(linkValue);
               document.write("</a>");
               // End description for Rotating Images
               document.write("</div>");
               document.write("<a class='page' href='#'></a></li>");
          }

       </script>
   </ul>
   <div id="annc_controls">
    <a href="#" id="play">
    <img src="images/blue_play.gif" alt="Play" border="0" style="vertical-align: text-bottom" /></a>
    <a href="#" id="pause">
    <img src="images/blue_pause.gif" alt="Stop" border="0" style="vertical-align: text-bottom" />
    </a>
   </div>
  </div>
 </div>
</div>
</div>
</div>
</div>
<div> 
```

XML 文件：

```
`<?xml version="1.0" encoding="utf-8"?>
<homepage>
  <rotatingImages>
    <item>
      <image>manage/newImages/soldier-sunset.jpg</image>
      <description>My Test 1</description>
      <filePath>http://www.sigar.mil/newsroom/spotlight/12/2012-sep-05-sopko-visits-afghanistan.html </filePath>
    </item>
    <item>
      <image>manage/newImages/2012-04-03-jet.jpg</image>
      <description>My Test3</description>
      <filePath>http://www.sigar.mil/newsroom/spotlight/12/2012-sep-05-sopko-visits-afghanistan.html </filePath>
    </item>
    <item>
      <image>manage/newImages/sigar-brochre.jpg</image>
      <description>My Test2 </description>
      <filePath>http://www.sigar.mil/newsroom/spotlight/12/2012-sep-05-sopko-visits-afghanistan.html </filePath>
    </item>
  </rotatingImages>
 </homepage>` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T14:55:50.557

```
**SOLUTION:** I figured it out. I used jQuery instead of JavaScript with a little help from zohodiscussions.com.

Ajax Google plugin:  http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js

**js. file:**
function form_input_classes() {

    jQuery('input[type="text"]').addClass('text');
    jQuery('input[type="password"]').addClass('text');
    jQuery('input[type="checkbox"]').addClass('checkbox');
    jQuery('input[type="radio"]').addClass('radiobutton');
    jQuery('input[type="submit"]').addClass('submit');
    jQuery('input[type="image"]').addClass('buttonImage');

}
function form_labelize() { jQuery(".labelize input:text").clearingInput(); }

var version = jQuery.browser.version;

if (version instanceof Object) { version = version.number(); }

function loadXMLDoc(XMLname) {
    return jQuery.ajax({ async: false, url: XMLname }).responseXML;
}
xmlDoc = loadXMLDoc("demo.xml");
var M = xmlDoc.getElementsByTagName("rotatingImages");
jQuery(function () {
    jQuery('script').remove()
    form_input_classes();
    form_labelize();
    var pauseClicked = function () {
        jQuery('#cycle').cycle('pause');
        jQuery('#play').attr("style", "display:block");
        jQuery('#pause').attr("style", "display:none");
        jQuery('#pause').removeClass("active");
        return false;
    };
    var playClicked = function () {
        jQuery('#cycle').cycle('resume');
        jQuery('#pause').attr("style", "display:block");
        jQuery('#play').attr("style", "display:none");
        jQuery('#pause').addClass("active");
        return false;
    };
    jQuery('#play').attr("style", "display:none");
    jQuery('#pause').attr("style", "display:block");
    jQuery('#pause').click(pauseClicked);
    jQuery('#play').click(playClicked);
    jQuery("#slideNavigation a").focus(function () {
        jQuery(this).blur();
    });

    jQuery('#cycle').cycle({
        fx: 'fade',
        speed: 1000,
        timeout: 5000,
        prev: '#prev',
        next: '#next',
        pager: '#hero-nav ul ',
        pagerAnchorBuilder: function (idx, slide) {
            return '#hero-nav li:eq(' + idx + ') a.page';
        }
    });

})

**HTML references:**
<div id="content" class="clearfix home">
  <div id="hero">
    <div id='rotator'>
      <div id='cycle' class='clearfix'>
       <script type="text/javascript">
        jQuery(M).find('image').each(function (i, img) {
        document.write("<img src='" + jQuery(img).text() + "' />");
        })
       </script>
      </div>
    </div>

     <!--end-rotating-images-->
       <div id="hero-cycle" class="clearfix">
        <div id="hero-nav">
         <ul>
          <script type="text/javascript">
           jQuery(M).each(function (i, item){
           document.write("<li class='hero-text'>");
           document.write("<div class='hero-info clearfix'>");
           document.write("<a href='" +
     jQuery(item).find('filePath').text() + "' target='_blank'>" +
     jQuery(item).find('description').text()
     + "</a>");
           document.write("</div>")
           document.write("<a class='page' href='#'></a></li>")
          })
          </script>

      </ul>
      <div id="annc_controls">
         <a href="#" id="play">
         <img src="images/blue_play.gif" alt="Play" border="0" style="vertical-align: text-bottom"/></a>
         <a href="#" id="pause">
         <img src="images/blue_pause.gif" alt="Stop" border="0" style="vertical-align: text-bottom"/>
         </a>
      </div>
      <!--<div id="slideNavigation"></div>-->
      </div>
      <!-- /#hero-nav -->
      </div>
      <!-- /#hero-cycle -->
      </div>
      <!-- /#hero -->
      </div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T19:54:24.237

将`jQuery('#cycle').cycle({ … });`代码放入`jQuery(document).ready`函数中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T17:08:56.507

由于`rotator`和`cycle`元素是动态添加的，因此在页面加载和 jQuery 函数运行时它们不存在。您需要委托，`.on()`以便在元素存在时添加处理程序。有关 的信息`.on`，请参阅[http://api.jquery.com/on/](http://api.jquery.com/on/)并向下滚动到有关直接和委托事件的部分。

您的页面的另一个问题是您每次通过 for 循环都使用相同的 ID。ID 必须是唯一的。重复的 ID 来自此代码：

```
for (i = 0; i < x.length; i++) {
   document.write("<div id='rotator'><div id='cycle' class='clearfix'><div class='entry clearfix'>"); 
```

每次通过循环时，它都会添加 ID 为“rotator”、“cycle”、“hero-cycle”和“hero-nav”的 DIV。

# jquery - 将 jquery 与 jsf 集成

> ID：12604676
> 
> 赞同：1
> 
> 时间：2012-09-26T14:59:16.500
> 
> 标签：jquery, jsf

当我有一个带有 jQ​​uery 的 JSP 页面时，执行该页面没有任何问题。当我在带有 JSF 的 Facelets 页面中使用相同的代码时，jQuery 似乎不起作用。它没有识别标签的`id`属性。`<input>`以下是 Facelets 页面的代码。

```
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:a4j="http://richfaces.org/a4j"
    xmlns:rich="http://richfaces.org/rich">

  <style type="text/css">
    h1 {
      font-family: "Times New Roman";
      font-size: 7px;
    }

    pre {
      font-family: "Times New Roman";
      font-size: 25px;
      font-style: bold;
      align: center;
    }
</style>
<script LANGUAGE="JavaScript" SRC="jquery-1.7.min.js"></script>
<script type="text/javascript">
    window.onload = function(e) {
        var counter = 1
        $("#description").blur(function() {
            $.post("newForm.do", {
                alert('inside description')
                name : $("#name").val(),
                description : this.value
            }, function() {

            });
        });

        $("#addQuestion")
                .click(
                        function() {
                            alert('inside addquestion')
                            var question = '<div id="question'+counter+'">Question : <input type="text" name="questionText" value=""/>Answer Type : <input type="text" name="answerType" value=""/><input type="button" name="save" value="Save"/></div>'
                            $("#wrapper").append(question)
                            // only at this point, save button is created
                            $("input[name=save]").click(function(){
                                $.post("addQuestion.do", {
                                    questionText : $(this).siblings("input[name=questionText]").get(0).value ,
                                    answerType : $(this).siblings("input[name=answerType]").get(0).value
                                    }, function() {

                                    });
                            });
                            counter++
                        }

                )

        $("#submit").click(
                function() {    
                    $.post("submitForm.do") 
                });
    }

</script>
</h:head>
<h:body>
    <h:form>

<p:layoutUnit position="center" style="border-width:0px;">
                <h1>
                    <font size="6">
                    <h:outputLabel for="createform"
                            value="Create New Form" /></font>
                </h1>
                <hr width="98%"></hr>
                <table>

                    <tr>
                        <td width="30%"><pre>
                                <h:outputLabel for="name" value="Name of the form : " />
                        </pre></td>
                        <td align="left">
                <input type="text" id="name" value="" />
                        </td>
                    </tr>
                    <tr>
                        <td width="30%"><pre>
                            <h:outputLabel for="desc" value="Description of the form : " />
                            </pre></td>
                        <td align="left">
                    <input type="text" id="description" value="" /> 
                        </td>
                    </tr>

                    <tr>
                    <td></td>
                            <td> 
                            <div id="wrapper"></div>
                             <input type="button" id="addQuestion" value="Add New Question" />
                             <input type="button" id="submit" value="Submit" />
                            </td>
                    </tr>
                </table>
            </p:layoutUnit>
        </p:layout>

    </h:form>
</h:body>

</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2019-04-15T13:49:29.650

JSF 和 jQuery 库的集成示例在以下链接中： [JSF Bootstrap Jquery Integration](https://omernaci.com/jsf-bootstrap-jquery-integration/)

以下是需要注意的几点：

*   您必须添加以下标记以支持来自 JSF 2.2 ( `<html ... xmlns:jsf="http://xmlns.jcp.org/jsf"`) 的 HTML 更多信息：[HTML5-Friendly Markup](https://docs.oracle.com/javaee/7/tutorial/jsf-facelets009.htm)
*   在以下标签之间写下 jQuery 方法的定义：

    `//<![CDATA[ $(document).ready(function() { });
    //]]>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T18:16:45.643

使用以下内容加载脚本，以下任何一项，

```
 <a4j:loadScript src="resource:///jquery/jquery-1.4.2.min.js" />
    <a4j:loadStyle src="/jquery/jquery-ui-1.8.5.custom.css" />
    <a4j:loadScript src="resource:///jquery/jquery-ui-1.8.5.custom.min.js" /> 
```

# c# - 为什么取消订阅 DataContextChanged 由于 Collection Modified 导致 InvalidOperation 异常

> ID：12604677
> 
> 赞同：2
> 
> 时间：2012-09-26T14:59:27.363
> 
> 标签：c#, silverlight

我最近在使用 datacontext changed 事件时偶然发现了 Silverlight 中的一个问题。

如果您订阅了更改的事件，然后立即取消订阅，它将引发异常，

```
DataContextChanged += MainPage_DataContextChanged;
void MainPage_DataContextChanged(object sender, DependencyPropertyChangedEventArgs e)
{
  var vm = e.NewValue as VM;
  if(vm != null)
  {
     DataContextChange-= MainPage_DataContextChanged;//throws invalidoperationexception for collection modified
  }
} 
```

为了解决这个问题，我只是稍后取消订阅该事件，在这种情况下，要求是尽早取消订阅，这样才能正常工作。

```
DataContextChanged += MainPage_DataContextChanged;
void MainPage_DataContextChanged(object sender, DependencyPropertyChangedEventArgs e)
{
  var vm = e.NewValue as VM;
  if(vm != null)
  {
      //forces item onto the dispatcher queue so anything needing to happen with 'collections' happens first
      Dispatcher.BeginInvoke(()=>
        {
     DataContextChange-= MainPage_DataContextChanged;//throws invalidoperationexception for collection modified
         });
  }
} 
```

我猜这些集合是可视化树中所有不同控件的子元素，我猜他们的更新可能发生在调度程序队列上，所以我的问题是：

为什么在触发后取消订阅的事件会影响将在此之后修改或更新的集合？

编辑：经过一番思考，这与事件处理程序调用列表在完成之前被修改有什么关系吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T16:58:08.570

您对正在修改的调用列表的怀疑是正确的。

根据 dotPeek 的反编译，这是触发 DataContextChanged 事件的代码：

```
private void RaisePublicDataContextChanged()
{
  if (this._dataContextChangedInfo == null)
    return;
  object oldValue = this._dataContextChangedInfo.OldValue;
  object dataContext = this.DataContext;
  if (oldValue == dataContext)
    return;
  this._dataContextChangedInfo.OldValue = dataContext;
  List<DependencyPropertyChangedEventHandler>.Enumerator enumerator = this._dataContextChangedInfo.ChangedHandlers.GetEnumerator();
  try
  {
    // ISSUE: explicit reference operation
    while (((List<DependencyPropertyChangedEventHandler>.Enumerator) @enumerator).MoveNext())
    {
      // ISSUE: explicit reference operation
      ((List<DependencyPropertyChangedEventHandler>.Enumerator) @enumerator).get_Current()((object) this, new DependencyPropertyChangedEventArgs(FrameworkElement.DataContextProperty, oldValue, dataContext));
    }
  }
  finally
  {
    enumerator.Dispose();
  }
} 
```

如您所见，代码使用枚举器遍历处理程序集合。因此，当您在调用处理程序期间取消订阅事件时，您会使枚举数无效，从而导致您看到的异常。

# html - 网页“google-code-prettify”中代码片段的语法突出显示不起作用

> ID：12604679
> 
> 赞同：1
> 
> 时间：2012-09-26T14:59:35.720
> 
> 标签：html, prettify, google-code-prettify

我有以下代码，

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <link href="../../../Styles/prettify.css" rel="stylesheet" type="text/css" />
    <script src="../../../Scripts/prettify.js" type="text/javascript"></script>
</head>
<body>

<p>And from code behind write following :</p>

<pre class="prettyprint">
    protected void Page_Load(object sender, EventArgs e)
        {
            lblLoading.Text = "Loading News...";
        }
</pre>
</body>
</html> 
```

我无法在结果中看到代码语法。我错过了什么？

结果是这样的：

![](../Images/b3d6302616bb0c953b3744c2a26601cb.png)

在线演示在这里：http: [//jsfiddle.net/yKss3/](http://jsfiddle.net/yKss3/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T15:03:58.943

改变

```
<body> 
```

到

```
<body onload="prettyPrint()"> 
```

[Prettify 的 README 文件](http://google-code-prettify.googlecode.com/svn/trunk/README.html)说：

> 1.  下载发行版
> 2.  在您的文档中包含脚本和样式表（您需要确保 css 和 js 文件在您的服务器上，并调整脚本和链接标签中的路径） `<link href="prettify.css" type="text/css" rel="stylesheet" />` `<script type="text/javascript" src="prettify.js"></script>`
> 3.  **添加`onload="prettyPrint()"`到文档的`body`标签。**
> 4.  修改样式表以获得您喜欢的颜色

# java - 将 JAX-RS 1.1 升级到 JAX-RS 2.0 需要有关 web.xml 部署的帮助

> ID：12604680
> 
> 赞同：3
> 
> 时间：2012-09-26T14:59:43.147
> 
> 标签：java, rest, jakarta-ee, jquery, jax-rs

我正在开发项目以升级我现有的 Web 应用程序，该应用程序是在 JAX-RS 1.12 中开发并在 tomcat 7 中运行的。现在我正在将其升级到 JAX-RS2.0。在 tomcat 服务器启动期间，我的资源没有被加载？

以下是详细信息。在 JAX-RS 2.0 的 jar 下添加

jersey-client-2.0-m07-1 jersey-common-2.0-m07-1 jersey-container-servlet-2.0-m07-1 jersey-container-servlet-core-2.0-m07-1 jersey-server-2.0-m07- 1 javax.ws.rs-api-2.0-m10 osgi-resource-locator-1.0.1 javax.inject-2.1.28 javax.inject-1 hk2-utils-2.1.28 hk2-locator-2.1.28 hk2-api -2.1.28 guava-13.0 cglib-2.1.28 asm-all-repackaged-2.1.28

在 Web.xml 中

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
id="WebApp_ID" version="2.5">
<display-name>ConfigLiteJersey2</display-name>

<!-- Jersey Servlet to Support JAXRS Services -->
<servlet>
    <servlet-name>ConfigLiteServices</servlet-name>
    <servlet-class>org.glassfish.jersey.servlet.ServletContainer</servlet-class>        
     <init-param>
        <param-name>javax.ws.rs.core.Application</param-name>
        <param-value>com.cisco.config.resource</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>
     <servlet-mapping>
    <servlet-name>ConfigLiteServices</servlet-name>
    <url-pattern>/config/*</url-pattern>
</servlet-mapping> 
```

* * *

我的资源文件

```
@Path("/configset")
public class ConfigSetResource {   
    @POST
@Path("/id{configsetid: (/[^/]+?)?}")
@Consumes({ MediaType.APPLICATION_JSON, MediaType.APPLICATION_XML })
@Produces({ MediaType.APPLICATION_JSON, MediaType.APPLICATION_XML })
public ConfigSetResponse getConfigSet(@PathParam("configsetid") String sConfigSetId)    throws    Exception {
     //Code
    }
    } 
```

* * *

尝试使用以下 URL ipaddress:8080/ConfigLiteJersey2/config/configset/id 访问我的资源 API

获取 HTTP 状态 404 未找到。

看起来我没有在 web.xml 中给出正确的 servletclass 映射。请分享您对此的看法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-02T05:56:27.060

如果您希望 Jersey 扫描您的包以获取资源，请将您的 param-name 更改为：

```
<param-name>jersey.config.server.provider.packages</param-name> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-17T05:06:05.163

我使用的是 Jersey 2.15，下面是工作配置：

```
<servlet>
    <servlet-name>emper</servlet-name>
    <servlet-class>org.glassfish.jersey.servlet.ServletContainer</servlet-class>
    <init-param>
        <param-name>javax.ws.rs.Application</param-name>
        <param-value>com.le.config.ResourceConfiguration</param-value>
    </init-param>
    <init-param>
        <param-name>jersey.config.server.provider.packages</param-name>
        <param-value>com.le.exceptions</param-value>
    </init-param>
</servlet>
<servlet-mapping>
    <servlet-name>emper</servlet-name>
    <url-pattern>/api/*</url-pattern>
</servlet> 
```

我知道的一件好事是，我们可以注册提供程序类，如**Global Exception handler**。因此`com.le.exceptions`包含我的提供者类，它实现`ExceptionMapper`了泽西岛提供的。

另一件事，我们需要创建一个子类`org.glassfish.jersey.server.ResourceConfig`并将其注册为我们的`jax-rs`应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-28T07:40:21.310

If you are using Servlet version 3.0 I would suggest following the example in the jersey manual here: [https://jersey.java.net/documentation/latest/deployment.html#deployment.servlet.3.descriptor](https://jersey.java.net/documentation/latest/deployment.html#deployment.servlet.3.descriptor)

Create a class that implements javax.ws.rs.core.Application, say org.foo.rest.ConfigLiteApplication. Then make your web.xml like the following (adapted from the jersey page slightly to match your example):

```
<web-app>
    <servlet>
        <servlet-name>org.foo.rest.ConfigLiteApplication</servlet-name>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>org.foo.rest.ConfigLiteApplication</servlet-name>
        <url-pattern>/config/*</url-pattern>
    </servlet-mapping>
</web-app> 
```

This should work on both JAX-RS 1.1 and JAX-RS 2.0, and should be neutral to the jersey version as you never need to name any jersey classes. The ConfigLiteApplication class should load the resources you want to include, for example adapted from [http://tomee.apache.org/examples-trunk/rest-example-with-application/README.html](http://tomee.apache.org/examples-trunk/rest-example-with-application/README.html):

```
@ApplicationPath("/config")
public class ConfigLiteApplication extends Application {
    public Set<Class<?>> getClasses() {
        return new HashSet<Class<?>>(Arrays.asList(ConfigSetResource.class));
    }
} 
```

A modern IDE will likely be able to manage this class for you.

Also, if I were you I would be careful to check this regular expression match if you are hoping to match on /id

```
@Path("/id{configsetid: (/[^/]+?)?}") 
```

I would consider splitting this up into multiple functions or otherwise working to try and avoid this kind of regex. For example

```
@POST
@Path("/id")
public ConfigSetResponse getConfigSet() {
     return this.getConfigSet(null);
}
@POST
@Path("/id/{configsetid}")
public ConfigSetResponse getConfigSet(@PathParam("configsetid") String sConfigSetId) {
     //Code
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-02T13:02:38.903

经过长时间的谷歌搜索，我以这种方式配置了我的，它工作得很好

build.gradle 应该是这样的

```
compile 'log4j:log4j:1.2.7'
compile 'org.slf4j:slf4j-log4j12:1.6.6'
compile 'org.glassfish.jersey.containers:jersey-container-servlet:2.6' 
```

ApplicationConfig.java 文件应该是这样的

```
@ApplicationPath("/app")
public class ApplicationConfig extends ResourceConfig {

    public ApplicationConfig() {
        packages("com.flexisaf.resources");

    }
} 
```

你的 web.xml 文件应该是这样的

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <!-- Default page to serve -->

    <session-config>
        <session-timeout>30</session-timeout>
    </session-config>
    <display-name>SAFHRMS</display-name>
    <servlet>
        <servlet-name>com.flexisaf.safhrms.client.config.ApplicationConfig</servlet-name>

        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>com.flexisaf.safhrms.client.config.ApplicationConfig</servlet-name>
        <url-pattern>/app/*</url-pattern>
    </servlet-mapping>

    <welcome-file-list>
        <welcome-file>safhrms.jsp</welcome-file>
    </welcome-file-list>

</web-app> 
```

这解决了我的问题..谢谢

# c++ - 头文件减慢程序

> ID：12604686
> 
> 赞同：-2
> 
> 时间：2012-09-26T15:00:09.200
> 
> 标签：c++

我的程序遇到了一个奇怪的错误：头文件减慢了程序的速度。我用空代码（即 : `main() {}`）测试头文件，运行该空代码需要 40 秒。

头文件 .h

```
#include "stdafx.h" 
#include <string>

#ifndef LZ_H
#define LZ_H

extern int e,i;
extern std::string dic[1000000];
void init();

#endif 
```

函数文件 .cpp

```
#include "lz.h"
#include "stdafx.h"
#include <string>

std::string dic[1000000];
int i=0;
int e=0;
std::string cstr(char c)                            
{  
    return std::string(1,c);  
}

void init()
{        
    for (e=0;e<=255;e++) dic[e]=cstr(e);   
        e=e-1;        
} 
```

测试主文件 .cpp

```
#include "lz.h"  
void main() {} 
```

结果：40 秒。我以前从未遇到过如此奇怪的错误。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-26T15:02:56.687

通过在 .cpp 文件中放置一百万个字符串的全局声明，您将强制编译器放入代码以在程序启动时创建一百万个字符串对象。这就是你减速的原因。

由于您只使用数组的前 256 个元素，因此将其大小更改为 256。

# vb.net - 在 VB 中移动对象类的实例

> ID：12604690
> 
> 赞同：0
> 
> 时间：2012-09-26T15:00:24.987
> 
> 标签：vb.net, instance

我有一个父类：CMove

我有一堆继承 CMove 的子类： M[Name of Move]

我有一本字典：pMoveSet(of Stings, CMove)

字典的值是新的子类：例如 pMoveSet(Key1, New MTackle)

我想将字典中的实例设置为包含子类实例的数组（作为 CMove）：PossMoves(i) = kvp.Value

我在字典上的“For Each”循环中执行此操作，在其中检查键以查看是否需要该值。如果我想要这个值，我将 kvp 的值设置为等于数组的一个元素。

我有一个 msgbox，可以在将子对象添加到数组后直接正确显示数组位置和子对象的名称。

我的代码离开了循环，我想数组应该包含我想要的所有相关的 CMove 子类。

与“For Each”循环中的 msgbox 相同的 msgbox 崩溃，并出现错误“NullReferenceException 未处理。对象引用未设置为对象的实例。”</p>

在循环外再次调用数组时，最初在“For Each”循环中创建并应用于数组的实例似乎丢失了。

我怎样才能解决这个问题？我希望能清楚地了解如何处理这个问题。代码如下。

```
 Dim PossMoves() As CMove, kvp As KeyValuePair(Of String, CMove)
    ReDim PossMoves(0)

    For Each kvp In pMoveSet
        If Val(kvp.Key) < pLvl Then
            PossMoves(UBound(PossMoves)) = kvp.Value
            MsgBox(UBound(PossMoves) & vbCrLf & PossMoves(UBound(PossMoves)).Name)
            ReDim PossMoves(UBound(PossMoves) + 1) 'Will add unused element after the last possible move
        End If
    Next
    ReDim Preserve PossMoves(UBound(PossMoves) - 1) 'Removes blank value at the top of array
    MsgBox(UBound(PossMoves) & vbCrLf & PossMoves(UBound(PossMoves)).Name) 'Error on this line. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T15:37:16.117

问题是您在调整数组大小时没有保留数组。因此，每次调整它的大小以向数组添加新元素时，它都会清除数组。要修复它，只需更改：

```
ReDim PossMoves(UBound(PossMoves) + 1) 
```

至：

```
ReDim Preserve PossMoves(UBound(PossMoves) + 1) 
```

但是，我强烈建议您使用 List(Of CMove) 而不是数组。使用起来会更容易，效率也会更高：

```
Dim PossMoves As New List(Of CMove)()
For Each kvp As KeyValuePair(Of String, CMove) In pMoveSet
    If Integer.Parse(kvp.Key) < pLvl Then
        PossMoves.Add(kvp.Value)
    End If
Next 
```

# listview - 更改 ArrayAdapter 中使用的字符串数组的字体

> ID：12604693
> 
> 赞同：2
> 
> 时间：2012-09-26T15:00:31.677
> 
> 标签：listview, fonts, android-arrayadapter

我已经看到了许多建议的解决方案来处理更改字体的`ArrayAdapter`建议，包括**扩展 ArrayAdapter 类和覆盖 getView() 方法的建议。在这种方法中，您必须为新视图充气或重新使用 convertView 并为此视图设置字体。**

我可以看到它是如何工作的`TextView`。

但是，似乎这些解决方案中的大多数实际上仍然只适用于 a`TextView`内`ArrayAdapter`而不是 a `ListView`。我有一个`String-Array`显示在 a 中的 a `ListView`，我希望能够更改`ListView`（不是 a `TextView`）的字体。

如果没有，或者，有没有办法在 a 中显示字符串数组`TextView`？（对不起，如果这是一个非常基本的问题，但我是 Android 新手）

# sql - 选择所有列和多列时缺少表达式

> ID：12604698
> 
> 赞同：4
> 
> 时间：2012-09-26T15:00:45.813
> 
> 标签：sql, oracle

这种查询在 SQL Server 中可以完美运行，但在 Oracle 中却不行。

```
select issueno, * from SOMETABLE; 
```

我收到的错误消息是：

> ORA-00936：缺少表达式 00936。00000 -“缺少表达式” *原因：
> *操作：行错误：1 列：16

怎么了？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T15:02:09.467

试试这个，在使用 oracle db 时，在使用列名时需要别名`*`

```
select issueno, A.* from SOMETABLE A; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T15:21:46.040

在 Oracle 上，您必须包含表名或别名才能使用 *. 尝试这个：

```
select issueno, SOMETABLE.*
from SOMETABLE; 
```

# asp.net - 正在自动从我的 aspx 文件中删除

> ID：12604705
> 
> 赞同：3
> 
> 时间：2012-09-26T15:01:05.843
> 
> 标签：asp.net, visual-studio-2012

出于某种奇怪的原因，我无法准确确定何时，似乎是随机的，贯穿我的 aspx 文件的这条线被清除了。它是什么文件并不重要。出于某种原因，某些事情会重新触发代码重构，并且总是会丢失相同的行

```
<tr class="TRSpacer"></tr> 
```

谁能指出我正确的方向来帮助解决这个问题？

ASP.Net，Visual Studio 2012，C#，利用母版页。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T15:10:45.073

好吧，其他人确实发现了[这一点](http://www.velocityreviews.com/forums/t726510-re-visual-studio-2010-removing-colspan-from-td.html)-他们将其描述为可怕的错误。似乎它正在删除它认为无效的元素。我认为在您的情况下，缺少`td`标签可能无济于事。

怎么用

```
<tr class="TRSpacer"><td>&nbsp;</td></tr> 
```

它可能更喜欢这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T15:09:49.390

首先确保您的表格行正确放置在表格中

接下来点击 CRTL + F ，搜索`.TRSpacer`，并确保您没有对该类进行任何操作以使其隐藏在您忘记的任何 css 中

# java - Android 开发 - 意图

> ID：12604707
> 
> 赞同：1
> 
> 时间：2012-09-26T15:01:12.163
> 
> 标签：java, android, android-layout, android-intent, android-emulator

我最近开始在 API 版本 16 (4.1) 上进行 Android 开发。根据 developer.android.com 上提供的教程，我开始开发应用程序，它教会了我使用 Intents。问题是，一旦我的应用程序在模拟器上加载，它就会显示应用程序必须关闭的错误。我正在提供我的 xml 代码。有人可以告诉我哪里出错了吗？谢谢。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" 
android:orientation="horizontal">

<EditText
    android:id="@+id/et1"
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:hint="Edit text"
    android:layout_weight="1"
    tools:ignore="HardcodedText" />

<Button
    android:id="@+id/b1"
    android:layout_width="wrap_content"
    android:layout_height="40dp"
    android:text="Press"
    android:onClick="sendMessage"
    tools:ignore="HardcodedText" />

</LinearLayout> 
```

logcat 如下所示。

```
09-26 19:35:03.880: E/Trace(615): error opening trace file: No such file or directory     (2)
09-26 19:35:04.430: D/AndroidRuntime(615): Shutting down VM
09-26 19:35:04.430: W/dalvikvm(615): threadid=1: thread exiting with uncaught exception  (group=0x40a13300)
09-26 19:35:04.471: E/AndroidRuntime(615): FATAL EXCEPTION: main
09-26 19:35:04.471: E/AndroidRuntime(615): java.lang.RuntimeException: Unable to     instantiate activity ComponentInfo{com.learn.training1/com.learn.training1.Training1}:     java.lang.NullPointerException
 09-26 19:35:04.471: E/AndroidRuntime(615):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1983)
09-26 19:35:04.471: E/AndroidRuntime(615):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
09-26 19:35:04.471: E/AndroidRuntime(615):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
09-26 19:35:04.471: E/AndroidRuntime(615):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
09-26 19:35:04.471: E/AndroidRuntime(615):  at android.os.Handler.dispatchMessage(Handler.java:99)
09-26 19:35:04.471: E/AndroidRuntime(615):  at android.os.Looper.loop(Looper.java:137)
09-26 19:35:04.471: E/AndroidRuntime(615):  at android.app.ActivityThread.main(ActivityThread.java:4745)
09-26 19:35:04.471: E/AndroidRuntime(615):  at java.lang.reflect.Method.invokeNative(Native Method)
09-26 19:35:04.471: E/AndroidRuntime(615):  at java.lang.reflect.Method.invoke(Method.java:511)
09-26 19:35:04.471: E/AndroidRuntime(615):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
09-26 19:35:04.471: E/AndroidRuntime(615):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
09-26 19:35:04.471: E/AndroidRuntime(615):  at dalvik.system.NativeStart.main(Native Method)
09-26 19:35:04.471: E/AndroidRuntime(615): Caused by: java.lang.NullPointerException
09-26 19:35:04.471: E/AndroidRuntime(615):  at android.app.Activity.findViewById(Activity.java:1825)
09-26 19:35:04.471: E/AndroidRuntime(615):  at com.learn.training1.Training1.<init>(Training1.java:15)
09-26 19:35:04.471: E/AndroidRuntime(615):  at java.lang.Class.newInstanceImpl(Native Method)
09-26 19:35:04.471: E/AndroidRuntime(615):  at java.lang.Class.newInstance(Class.java:1319)
09-26 19:35:04.471: E/AndroidRuntime(615):  at android.app.Instrumentation.newActivity(Instrumentation.java:1053)
09-26 19:35:04.471: E/AndroidRuntime(615):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1974)
09-26 19:35:04.471: E/AndroidRuntime(615):  ... 11 more
09-26 19:35:32.352: I/Process(615): Sending signal. PID: 615 SIG: 9
09-26 19:39:22.460: E/Trace(664): error opening trace file: No such file or directory (2)
09-26 19:39:22.820: D/AndroidRuntime(664): Shutting down VM
09-26 19:39:22.820: W/dalvikvm(664): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
09-26 19:39:22.846: E/AndroidRuntime(664): FATAL EXCEPTION: main
09-26 19:39:22.846: E/AndroidRuntime(664): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.learn.training1/com.learn.training1.Training1}: java.lang.NullPointerException
 09-26 19:39:22.846: E/AndroidRuntime(664):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1983)
09-26 19:39:22.846: E/AndroidRuntime(664):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
09-26 19:39:22.846: E/AndroidRuntime(664):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
09-26 19:39:22.846: E/AndroidRuntime(664):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
09-26 19:39:22.846: E/AndroidRuntime(664):  at android.os.Handler.dispatchMessage(Handler.java:99)
09-26 19:39:22.846: E/AndroidRuntime(664):  at android.os.Looper.loop(Looper.java:137)
09-26 19:39:22.846: E/AndroidRuntime(664):  at android.app.ActivityThread.main(ActivityThread.java:4745)
09-26 19:39:22.846: E/AndroidRuntime(664):  at java.lang.reflect.Method.invokeNative(Native Method)
09-26 19:39:22.846: E/AndroidRuntime(664):  at java.lang.reflect.Method.invoke(Method.java:511)
09-26 19:39:22.846: E/AndroidRuntime(664):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
09-26 19:39:22.846: E/AndroidRuntime(664):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
09-26 19:39:22.846: E/AndroidRuntime(664):  at dalvik.system.NativeStart.main(Native Method)
09-26 19:39:22.846: E/AndroidRuntime(664): Caused by: java.lang.NullPointerException
09-26 19:39:22.846: E/AndroidRuntime(664):  at android.app.Activity.findViewById(Activity.java:1825)
09-26 19:39:22.846: E/AndroidRuntime(664):  at com.learn.training1.Training1.<init>(Training1.java:15)
09-26 19:39:22.846: E/AndroidRuntime(664):  at java.lang.Class.newInstanceImpl(Native Method)
09-26 19:39:22.846: E/AndroidRuntime(664):  at java.lang.Class.newInstance(Class.java:1319)
09-26 19:39:22.846: E/AndroidRuntime(664):  at android.app.Instrumentation.newActivity(Instrumentation.java:1053)
09-26 19:39:22.846: E/AndroidRuntime(664):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1974)
09-26 19:39:22.846: E/AndroidRuntime(664):  ... 11 more
09-26 19:40:29.130: E/Trace(712): error opening trace file: No such file or directory (2)
09-26 19:40:29.431: D/dalvikvm(712): newInstance failed: Lcom/learn/training1/Training1; not accessible to Landroid/app/Instrumentation;
09-26 19:40:29.431: D/AndroidRuntime(712): Shutting down VM
09-26 19:40:29.431: W/dalvikvm(712): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
09-26 19:40:29.461: E/AndroidRuntime(712): FATAL EXCEPTION: main
09-26 19:40:29.461: E/AndroidRuntime(712): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.learn.training1/com.learn.training1.Training1}: java.lang.IllegalAccessException: access to class not allowed
09-26 19:40:29.461: E/AndroidRuntime(712):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1983)
09-26 19:40:29.461: E/AndroidRuntime(712):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
09-26 19:40:29.461: E/AndroidRuntime(712):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
09-26 19:40:29.461: E/AndroidRuntime(712):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
09-26 19:40:29.461: E/AndroidRuntime(712):  at android.os.Handler.dispatchMessage(Handler.java:99)
09-26 19:40:29.461: E/AndroidRuntime(712):  at android.os.Looper.loop(Looper.java:137)
09-26 19:40:29.461: E/AndroidRuntime(712):  at android.app.ActivityThread.main(ActivityThread.java:4745)
09-26 19:40:29.461: E/AndroidRuntime(712):  at java.lang.reflect.Method.invokeNative(Native Method)
09-26 19:40:29.461: E/AndroidRuntime(712):  at java.lang.reflect.Method.invoke(Method.java:511)
09-26 19:40:29.461: E/AndroidRuntime(712):  at  com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
09-26 19:40:29.461: E/AndroidRuntime(712):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
09-26 19:40:29.461: E/AndroidRuntime(712):  at dalvik.system.NativeStart.main(Native Method)
09-26 19:40:29.461: E/AndroidRuntime(712): Caused by: java.lang.IllegalAccessException: access to class not allowed
09-26 19:40:29.461: E/AndroidRuntime(712):  at java.lang.Class.newInstanceImpl(Native Method)
09-26 19:40:29.461: E/AndroidRuntime(712):  at java.lang.Class.newInstance(Class.java:1319)
09-26 19:40:29.461: E/AndroidRuntime(712):  at android.app.Instrumentation.newActivity(Instrumentation.java:1053)
09-26 19:40:29.461: E/AndroidRuntime(712):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1974)
09-26 19:40:29.461: E/AndroidRuntime(712):  ... 11 more
09-26 19:43:52.020: E/Trace(760): error opening trace file: No such file or directory (2)
09-26 19:43:52.110: D/dalvikvm(760): newInstance failed: Lcom/learn/training1/Training1; not accessible to Landroid/app/Instrumentation;
09-26 19:43:52.110: D/AndroidRuntime(760): Shutting down VM
09-26 19:43:52.110: W/dalvikvm(760): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
09-26 19:43:52.190: E/AndroidRuntime(760): FATAL EXCEPTION: main
09-26 19:43:52.190: E/AndroidRuntime(760): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.learn.training1/com.learn.training1.Training1}: java.lang.IllegalAccessException: access to class not allowed
09-26 19:43:52.190: E/AndroidRuntime(760):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1983)
09-26 19:43:52.190: E/AndroidRuntime(760):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
09-26 19:43:52.190: E/AndroidRuntime(760):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
09-26 19:43:52.190: E/AndroidRuntime(760):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
09-26 19:43:52.190: E/AndroidRuntime(760):  at android.os.Handler.dispatchMessage(Handler.java:99)
09-26 19:43:52.190: E/AndroidRuntime(760):  at android.os.Looper.loop(Looper.java:137)
09-26 19:43:52.190: E/AndroidRuntime(760):  at android.app.ActivityThread.main(ActivityThread.java:4745)
09-26 19:43:52.190: E/AndroidRuntime(760):  at java.lang.reflect.Method.invokeNative(Native Method)
 09-26 19:43:52.190: E/AndroidRuntime(760):     at java.lang.reflect.Method.invoke(Method.java:511)
09-26 19:43:52.190: E/AndroidRuntime(760):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
09-26 19:43:52.190: E/AndroidRuntime(760):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
09-26 19:43:52.190: E/AndroidRuntime(760):  at dalvik.system.NativeStart.main(Native Method)
09-26 19:43:52.190: E/AndroidRuntime(760): Caused by: java.lang.IllegalAccessException: access to class not allowed
09-26 19:43:52.190: E/AndroidRuntime(760):  at java.lang.Class.newInstanceImpl(Native Method)
09-26 19:43:52.190: E/AndroidRuntime(760):  at java.lang.Class.newInstance(Class.java:1319)
09-26 19:43:52.190: E/AndroidRuntime(760):  at android.app.Instrumentation.newActivity(Instrumentation.java:1053)
09-26 19:43:52.190: E/AndroidRuntime(760):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1974)
09-26 19:43:52.190: E/AndroidRuntime(760):  ... 11 more
09-26 19:47:20.550: I/Process(810): Sending signal. PID: 810 SIG: 9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T15:38:00.207

看起来您的活动没有正确声明（也许您没有成功`public`？）。你应该有一个名为的文件`Training1.java`，在这个文件中你应该有类似的东西

```
public class Training1 extends Activity {
    ...your activity code here...
} 
```

请参阅[https://groups.google.com/forum/?fromgroups=#!topic/android-developers/0Gw5WHc1J6g](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/0Gw5WHc1J6g)

**编辑：添加注释**

注意：另外，你不应该有任何构造函数。Android 框架会为您解决这些问题。

# tfs - TFS2010 TF215097：无端点监听

> ID：12604709
> 
> 赞同：1
> 
> 时间：2012-09-26T15:01:20.697
> 
> 标签：tfs

好的，我有一个 TFS2010 构建控制器设置如下

我有 3 个 VM，每个都在运行 TFS 构建主机服务

*   1 有 1 个控制器和 1 个代理
*   2 每个有 2 个构建代理。

大多数时候（7\10 构建）它会返回以下错误消息

```
TF215097: An error occurred while initializing a build for build definition BUILD_DEFINITION: There was no endpoint listening at http://MACHINE1:9191/Build/v3.0/Services/Controller/14 that could accept the message. This is often caused by an incorrect address or SOAP action. See InnerException, if present, for more details. 
```

当我收到此消息时没有错误。以下是我创建的配置文件

```
<configuration>
    <appSettings>
    <add key="traceWriter" value="true"/>
    </appSettings>
    <system.diagnostics>
        <switches>
            <add name="BuildServiceTraceLevel" value="4"/>
            <add name="API" value="4"/>
            <add name="Authentication" value="4"/>
            <add name="Authorization" value="4"/>
            <add name="Database" value="4"/>
            <add name="General" value="4"/>
            <add name="traceLevel" value="4"/>
        </switches>
        <trace autoflush="true" indentsize="4">
            <listeners>
                <add name="myListener" type="Microsoft.TeamFoundation.TeamFoundationTextWriterTraceListener,Microsoft.TeamFoundation.Common, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" initializeData="c:\logs\TFSBuildServiceHost.exe.log" />
         <remove name="Default" />
            </listeners>
        </trace>
    </system.diagnostics>
</configuration> 
```

我在构建过程中确实有自己的自定义活动，但这似乎不是问题，因为有时构建确实会进行。我已尝试按照某些网站的建议刷新模板。

有没有人遇到过这个问题的解决方案？或者任何人都可以告诉我如何在这些错误发生时捕获它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T04:16:03.823

这可能是您的构建代理上的第三方防火墙不允许来自 TFS 服务器的通信的问题。尝试禁用任何防火墙，看看是否能解决您的问题。

# java - Spring - 显示反映和更新 @ModelAttribute 字段的标签

> ID：12604710
> 
> 赞同：2
> 
> 时间：2012-09-26T15:01:24.607
> 
> 标签：java, spring, jstl

我有一个`@ModelAttribute` `account`名为`title`. 我需要在我的 JSP 中显示这个字段，并在下一个调用周期中绑定它。如果我这样做；

```
Title: ${editAccountForm.account.title} <br/> 
```

它只显示值。当有人在JSP 中提交Form 时，`account`又是空的。如何让标签反映价值，就像`form:input`标签一样？

我试过这个：

```
<form:label path="account.issuer">some text</form:label> <br/> 
```

但它不起作用。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T15:06:28.363

你可以放一个

```
<input type="hidden" name="account.title" value="${editAccountForm.account.title}" /> 
```

name 属性必须与 spring form:input 生成的相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T13:11:00.267

但这与正常显示是一样的`${editAccountForm.account.title}`。之后，将值填充到隐藏字段中。这将更新模型中的值

# c# - 用 linq 添加两个 IEnumerable

> ID：12604711
> 
> 赞同：0
> 
> 时间：2012-09-26T15:01:27.747
> 
> 标签：c#, linq, optimization, ienumerable, addition

我想使用 Linq 添加两个 IEnumerable

例子 ：

```
class Calcul
{
    public static IEnumerable<int> Add(IEnumerable<int> firstList, 
                                       IEnumerable<int> secondList)
    {
    }
} 
```

在 Add 函数中，我想从这些列表中添加成员，我知道可以通过使用 Linq（lambda 表达式）在一行中减少。我想知道怎么做。

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-26T15:03:19.867

你可以使用[`Zip`](http://msdn.microsoft.com/en-us/library/dd267698.aspx)：

```
return firstList.Zip(secondList, (a, b) => a + b); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T15:03:36.993

您可以使用[`Enumerable.Concat`](http://msdn.microsoft.com/en-us/library/bb302894.aspx)

```
var result = firstList.Concat(secondList); 
```

如果要创建新列表，可以使用`Enumerable.ToList`：

```
List<int> both = result.ToList(); 
```

如果要删除重复项，可以使用[`Enumerable.Union`](http://msdn.microsoft.com/en-us/library/bb341731.aspx)代替`Concat`.

# sql - 员工表中经理和代表的分组依据

> ID：12604712
> 
> 赞同：1
> 
> 时间：2012-09-26T15:01:41.693
> 
> 标签：sql, sql-server

我有一张员工表，里面有经理和代表。我想要一个存储过程，它可以获取 Manager 1（字母顺序），然​​后是 Manager1 下的所有代表（按字母顺序），然​​后是 Manager 2 和 Manager2 下的所有代表。

对于每个 Rep，在该列中具有 Manager 的 EmployeeID 的所有员工都有一个列“经理”，对于经理，则为 null。还有一个列 ismanager，其中 1 代表经理，0 代表代表。

我试过这样做，但逻辑不正确。这是在`SQL Server 2005`.

先感谢您！！

```
Select * from Employees
groupby IsManager, EmployeeID 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T15:07:31.843

您要做的是按经理 ID 订购，然后按 ismanager desc 订购。由于经理在经理列中没有自己的 ID，因此您可以使用 case 语句来解决此问题。以下是如何在 SQL 中执行此操作的两个示例：

```
WITH fixup AS
(
   SELECT CASE MANAGER = 0 THEN EMPLOYEEID ELSE MANAGER END as ManGroup, *
   FROM Employees
)
SELECT * from fixup
ORDER BY ManGroup, ismanager DESC 
```

或者

```
SELECT * 
FROM Employees
ORDER BY CASE MANAGER = 0 THEN EMPLOYEEID ELSE MANAGER END, ismanager DESC 
```

注意——未测试可能有错别字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T15:10:12.187

```
select  case when isManager=1 then man.name else 'Unmanaged' end as managerName,
        emp.name
from    employees emp left join employees man on emp.manager = man.employeeId
order by case when isManager=1 then 0 else 1 end, 
        case when isManager=1 then man.name else 'Unmanaged' end,
        emp.name 
```

# javascript - 加载页面内容而不刷新/

> ID：12604716
> 
> 赞同：0
> 
> 时间：2012-09-26T15:01:54.730
> 
> 标签：javascript, html, ajax

> **可能重复：**
> [如何开始学习 Ajax？](https://stackoverflow.com/questions/3536609/how-to-start-learning-ajax)

有没有办法在不刷新整个页面的情况下重新加载页面？与 GRAPH API Explorer 中的示例类似

[https://developers.facebook.com/tools/explorer](https://developers.facebook.com/tools/explorer)当您更改输入并提交数据时，它只会刷新页面的一部分，您知道如何做类似的事情吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T15:05:15.140

使用[AJAX](http://www.w3schools.com/ajax/tryit.asp?filename=tryajax_first)。它可以是同步的或异步的。

有关更多信息，请检查`XMLHttpRequest`javascript 中的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T15:03:49.273

该技术称为 Ajax。

它通常通过使用[XMLHttpRequest 对象](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest)向旨在充当 Web 服务端点而不是提供完整文档的 URL 发出请求来实现。

为方便起见，人们经常使用以更友好的界面包装 XHR 的库。选项包括[YUI IO](http://yuilibrary.com/yui/docs/io/)、[jQuery Ajax](http://api.jquery.com/jQuery.ajax/)和[许多其他](http://microjs.com/#ajax)

Web 服务端点通常使用[JSON 格式](http://json.org)呈现数据。

# iphone - 带有图像的 Restkit MultiForm 帖子

> ID：12604717
> 
> 赞同：7
> 
> 时间：2012-09-26T15:01:58.837
> 
> 标签：iphone, objective-c, ios, restkit

# 问题

我一直在尝试使用包含图像附件的多格式请求发布到服务器。我没有遇到问题将图像发送到服务器，这是其他信息未正确发送。

# 细节

从服务器接收对象时，我使用对象映射来配置几个不同的属性：

```
//Using a custom class to map object I receive to
RKObjectMapping * memoryMapper = [RKObjectMapping mappingForClass:[MemoContent class]];
[memoryMapper mapAttributes:@"created", @"user", @"participants", @"tags", @"text", @"kind", @"video", @"location", nil];
[memoryMapper mapKeyPath:@"_id" toAttribute:@"memoryID"];

//MediaMapper handles the data needed for the Image attachments
RKObjectMapping * mediaMapper = [RKObjectMapping mappingForClass:[MemoMedia class]];
[mediaMapper mapKeyPath:@"processed" toAttribute:@"processed"];
[mediaMapper mapKeyPath:@"original" toAttribute:@"original"];
[mediaMapper mapKeyPath:@"mime" toAttribute:@"mimeType"];
[memoryMapper mapKeyPath:@"media" toRelationship:@"rawMedia" withMapping:mediaMapper];

//
[[RKObjectManager sharedManager].mappingProvider setMapping:memoryMapper forKeyPath:@"memories"];
[RKObjectManager sharedManager].serializationMIMEType = RKMIMETypeFormURLEncoded;
[RKObjectManager sharedManager].acceptMIMEType = RKMIMETypeJSON; 
```

然后，当需要发布照片时，我会更新配置如下：

```
 RKObjectMapping * memoryMapper = [RKObjectMapping mappingForClass:[MemoContent class]];
[memoryMapper mapAttributes:@"created", @"participants",  nil];
[[RKObjectManager sharedManager].mappingProvider setSerializationMapping:memoryMapper forClass:[MemoContent class]];
[[RKObjectManager sharedManager].mappingProvider setMapping:memoryMapper forKeyPath:@"memory"]; 
```

参与者是带有照片标签的人。这是我发布它的方式，类似于此[https://github.com/RestKit/RestKit/wiki/Attach-a-File-to-an-RKObjectLoader](https://github.com/RestKit/RestKit/wiki/Attach-a-File-to-an-RKObjectLoader)

```
 [[RKObjectManager sharedManager] postObject:theMemory usingBlock:^(RKObjectLoader * loader){

    RKObjectMapping* serializationMapping = [[[RKObjectManager sharedManager] mappingProvider] serializationMappingForClass:[MemoContent class]];
    NSLog(@"serializationMapping: %@", serializationMapping);
    loader.delegate = APP; //main app delegate posting, updating
    NSError* error = nil;
    RKObjectSerializer * serializer = [[RKObjectSerializer alloc] initWithObject:theMemory mapping:serializationMapping];
    NSDictionary * dictionary = [serializer serializedObject:&error];  
    RKParams * params = [RKParams paramsWithDictionary:dictionary];
    NSData * imageData = UIImagePNGRepresentation(theMemory.photo); //image data
    [params setData:imageData MIMEType:@"image/png" forParam:@"attachment"];
    loader.params = params;
    loader.serializationMIMEType = RKMIMETypeFormURLEncoded;
    }]; 
```

服务器正在按计划接收图像，实际上确实收到了“创建”和“参与者”，不幸的是它的格式很奇怪，服务器无法理解。它包括换行符等`participants (\n 19843589323 \n created: \n 3-31-2012 00:00` （类似的，当我可以访问日志时我会更新。

我会给你任何你需要的额外信息。如果我有足够的能力，我会为它提供声誉；）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-12T20:18:25.747

在[RestKit 0.20.0-pre3](http://restkit.org/api/0.20.0-pre3/Classes/RKObjectManager.html)中，`RKObjectManager`确实有方法`multipartFormRequestWithObject:method:path:parameters:constructingBodyWithBlock:`

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-05-14T15:06:09.920

这个任务的一个例子可以在[RestKit Github 页面](https://github.com/RestKit/RestKit#post-an-object-with-a-file-attachment)找到：

```
Article *article = [Article new];
UIImage *image = [UIImage imageNamed:@"some_image.png"];

// Serialize the Article attributes then attach a file
NSMutableURLRequest *request = [[RKObjectManager sharedManager] multipartFormRequestWithObject:article method:RKRequestMethodPOST path:nil parameters:nil constructingBodyWithBlock:^(id<AFMultipartFormData> formData) {
    [formData appendPartWithFileData:UIImagePNGRepresentation(image)
                                name:@"article[image]"
                            fileName:@"photo.png"
                            mimeType:@"image/png"];
}];

RKObjectRequestOperation *operation = [[RKObjectManager sharedManager] objectRequestOperationWithRequest:request success:nil failure:nil];
[[RKObjectManager sharedManager] enqueueObjectRequestOperation:operation]; // NOTE: Must be enqueued rather than started 
```

# ajax - 为特定请求禁用 ajaxStart() 和 ajaxStop()

> ID：12604722
> 
> 赞同：80
> 
> 时间：2012-09-26T15:02:12.770
> 
> 标签：ajax, jquery, long-polling

我正在使用 .ajaxStart() 和 .ajaxStop() 在发出 ajax 请求时显示模式。（在开始和停止之间）

现在我想添加一个longpoll函数，它会一直等待通知，类似于本站左上角的那个。

我现在的问题在于仅针对长轮询请求禁用此模式。

在处理程序上注册“加载屏幕”：

```
$(document).ajaxStart(handleAjaxStart);
$(document).ajaxStop(handleAjaxStop); 
```

我的长轮询功能：

```
$.ajax({
    timeout: 35000,
    url: longPollUrl,
    success: function(data){
        if(data.queCount) $('#numQueCount').html(data.queCount);
        if(data.queAccept) $('#numQueAccept').html(data.queAccept);
    }, 
    dataType: 'json',
    complete: longpoll
}); 
```

我试过：

```
$().off('ajaxStart');
$().off('ajaxStop'); 
```

..并在开始轮询后重新连接处理程序，但没有乐趣。

我还尝试在函数的第一行返回一个全局变量`handleAjaxStart()`，但这似乎完全杀死了加载屏幕。

有什么想法可以实现吗？

* * *

## 回答 #1

> 赞同：198
> 
> 时间：2012-09-27T14:50:52.593

我想到了..

选项对象中有一个`.ajax()`名为的属性`global`。

如果设置为 false，则不会触发`ajaxStart`调用事件。

```
$.ajax({
    timeout: 35000,
    url: longPollUrl,
    success: function(data){
        if(data.queCount) $('#numQueCount').html(data.queCount);
        if(data.queAccept) $('#numQueAccept').html(data.queAccept);
    }, 
    global: false,     // this makes sure ajaxStart is not triggered
    dataType: 'json',
    complete: longpoll
}); 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2017-09-13T12:19:51.357

在阅读了所有可能的解决方案后，我想结合答案。

## 解决方案 1：绑定/取消绑定

```
//binding
$(document).bind("ajaxStart.mine", function() {
    $('#ajaxProgress').show();
});

$(document).bind("ajaxStop.mine", function() {
    $('#ajaxProgress').hide();
});

//Unbinding
$(document).unbind(".mine"); 
```

这是一个折旧的解决方案。在 jQuery 1.9 之前，ajax 的全局事件如 ajaxStart、ajaxStop、ajaxError 等可以绑定到任何元素。jQuery 1.9 之后：

> 从 jQuery 1.9 开始，jQuery 全局 Ajax 事件的所有处理程序，包括使用 .ajaxStart() 方法添加的处理程序，都必须附加到文档。

因此，我们无法将这些事件绑定/取消绑定到自定义命名空间。

## 解决方案 2：将属性设置`global`为**`false`**

```
$.ajax({
        url: "google.com",
        type: "GET",
        dataType: "json",
        global: false, //This is the key property.
        success: function (data) {
                   console.log(data);
                },
        error: function (data) {
                   console.log(data);
                }
       }); 
```

此解决方案可用于禁用`ajaxStart()/ajaxStop()`事件。但是，它也会使 disable `ajaxComplete(), ajaxError(), ajaxSend(), ajaxSuccess()`。如果您不使用这些全局事件，似乎还可以，但是当需要时，您必须返回并更改您设置的所有页面的解决方案`global: false`。

## 解决方案 3：使用全局变量

```
var showLoadingEnabled = true;
$(document).ready(function () {
    $('#loading')
        .hide()  // at first, just hide it
        .ajaxStart(function () {
            if (showLoadingEnabled) {
                $(this).show();
            }
        })
        .ajaxStop(function () {
            if (showLoadingEnabled) {
                $(this).hide();
            }
        });
});

function justAnotherFunction() {
    window.showLoadingEnabled = false;
    $.ajax({
        url: 'www.google.com',
        type: 'GET',
        complete: function (data) {
            window.showLoadingEnabled = true;
            console.log(data);
        }
    });
} 
```

不应在 javascript 文件中使用全局变量。但是，这是我能找到的最简单的解决方案。

我更喜欢我的项目的第三种解决方案。

# c++ - VS2010：项目已过期

> ID：12604724
> 
> 赞同：0
> 
> 时间：2012-09-26T15:02:14.157
> 
> 标签：c++, visual-studio, visual-studio-2010

每次运行项目 VS2010 都认为项目已过时。我浏览了这篇[文章](https://stackoverflow.com/questions/2762930/vs2010-always-thinks-project-is-out-of-date-but-nothing-has-changed)并通过 debugView 启用了调试输出。debugView 中的相关行如下：

```
00000001    0.00000000  [7792] devenv.exe Information: 0 :  
00000002    0.00001620  [7792] Project 'C:\code\MyProject\MyProject.vcxproj' not up to date because 'C:\PROGRAMDATA\SOPHOS\SOPHOS ANTI-VIRUS\CONFIG\CONFIG.BOPS' was modified at 09/24/2012 12:50:28, which is newer than 'C:\CODE\MyProject\DEBUG\MyProject.BSC' which was modified at 09/24/2012 16:07:24.
00000003    23.05826569 [7792] devenv.exe Information: 0 :  
00000004    23.05829620 [7792] Project 'C:\code\MyProject\MyProject.vcxproj' not up to date because 'C:\PROGRAMDATA\SOPHOS\SOPHOS ANTI-VIRUS\CONFIG\CONFIG.BOPS' was modified at 09/24/2012 12:50:28, which is newer than 'C:\CODE\MyProject\DEBUG\MyProject.BSC' which was modified at 09/24/2012 16:07:24\.    
00000005    26.08067894 [7792] devenv.exe Information: 0 :  
00000006    26.08071709 [7792] Project 'C:\code\MyProject\MyProject.vcxproj' not up to date because 'C:\PROGRAMDATA\SOPHOS\SOPHOS ANTI-VIRUS\CONFIG\CONFIG.BOPS' was modified at 09/24/2012 12:50:28, which is newer than 'C:\CODE\MyProject\DEBUG\MyProject.BSC' which was modified at 09/24/2012 16:07:24\. 
```

首先，VS2010 会查看一些不相关的文件（嗯，微软！），这很糟糕，但我尝试[了这个](https://stackoverflow.com/questions/9412023/vs2010-rebuilds-c-project-because-of-modified-irrelevant-files)解决方案，[这](http://connect.microsoft.com/VisualStudio/feedback/details/649139/vs2010-does-complete-rebuild-based-on-completely-unrelated-file)两者都`<ClNoDependencies>`用来排除不相关的文件，但我没有运气。

我注意到，如果我从一个简单的全新项目开始，它就没有这个烦人的`project is out of date`问题。这似乎是 VS2010 中的一个已知错误，但对我来说，为什么 VS2010 将我的原始项目链接到那个不相关的防病毒文件而不是新项目？这是否意味着我可以在我的原始项目中修复一些东西来取消链接文件？但我不知道会是什么，因为我的项目根本没有引用该防病毒文件。

这个问题有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-03T04:33:43.860

这是 VS2010 和 Sophos 10 中的错误之间的已知冲突

[http://community.sophos.com/t5/Sophos-EndUser-Protection/Buffer-overflow-prevention-system-and-msbuild/td-p/29483](http://community.sophos.com/t5/Sophos-EndUser-Protection/Buffer-overflow-prevention-system-and-msbuild/td-p/29483)

# events - 为什么 DocumentSaved 事件没有针对网站解决方案触发？

> ID：12604732
> 
> 赞同：1
> 
> 时间：2012-09-26T15:02:47.443
> 
> 标签：events, visual-studio-sdk

我一直在尝试让一个简单的视觉工作室添加到工作中。我只想在保存文档时对文件运行一个函数，但由于某种原因，该事件没有针对网站解决方案触发。它在正常项目上按预期工作。

到目前为止，这是我的代码：

```
 DocumentEvents docEvents;
    Events events;

    public void OnConnection(object application, ext_ConnectMode connectMode, object addInInst, ref Array custom)
    {
        _applicationObject = (DTE2)application;
        _addInInstance = (AddIn)addInInst;

        events = _applicationObject.Events;
        docEvents = events.DocumentEvents;

        docEvents.DocumentSaved += new _dispDocumentEvents_DocumentSavedEventHandler(docEvents_DocumentSaved);

    }

    void docEvents_DocumentSaved(Document document)
    {
        //do something here (doesn't reach this)
    } 
```

任何帮助将不胜感激，甚至是指向 DocumentSaved 事件正在处理网站解决方案的简单示例项目的指针。

编辑：我正在使用 Visual Studio 2010

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T08:16:03.980

看看这个（更新）：

[https://gordon-breuer.de/unknown/2010/08/19/visual-studio-2010-extension-unicode-converter-1-0-with-tutorial.html](https://gordon-breuer.de/unknown/2010/08/19/visual-studio-2010-extension-unicode-converter-1-0-with-tutorial.html)

似乎您必须注册您的添加 ID 才能处理某些文件类型。

# wcf - Delphi：WSDL 文件中不包含 WSDL 对象

> ID：12604734
> 
> 赞同：3
> 
> 时间：2012-09-26T15:02:48.917
> 
> 标签：wcf, delphi, c#-4.0, delphi-7

我正在尝试在 C# 中创建一个 WCF 服务，供使用 Delphi 构建的客户端应用程序使用。在 Delphi 中下载 WSDL 时，Delphi 生成的文件中不包含任何对象。

导入 Delphi 时，我必须在 C# 中做什么才能在 WSDL 中声明对象？

**编辑**

我在 C# 中使用 EntityFramework 从数据库生成类（它是一个现有的数据库，所以请不要告诉我我应该先编写代码）。这是其中一个类文件的示例：

```
namespace LeadVendorModel
{
    using System;
    using System.Collections.Generic;
    using System.Data.Entity;

    public partial class T_LeadVendorEmailDetail : DbContext
    {
        public int LeadVendorEmailDetailID { get; set; }
        public int LeadVendorEmailID { get; set; }
        public string Field_label { get; set; }
        public string Field_Data { get; set; }
        public Nullable<System.DateTime> EnteredOn { get; set; }

        public virtual T_LeadVendorEmailHeader T_LeadVendorEmailHeaders { get; set; }
    }
} 
```

我只是在 C# 项目中使用“发布”操作来发布项目。我不确定我还会在哪里定义 Delphi 抱怨的类型/对象。是否有需要添加到 Web.config 的 XML 设置？

我很乐意提供所需的任何其他信息，只是不确定还有什么帮助（第一次使用 EF 和第一次创建 API）。

**结束编辑**

这是生成文件的片段（未创建对象）：

```
unit LeadService;

interface

uses InvokeRegistry, SOAPHTTPClient, Types, XSBuiltIns;

type

  // ************************************************************************ //
  // The following types, referred to in the WSDL document are not being represented
  // in this file. They are either aliases[@] of other types represented or were referred
  // to but never[!] declared in the document. The types from the latter category
  // typically map to predefined/known XML or Borland types; however, they could also
  // indicate incorrect WSDL documents that failed to declare or import a schema type.
  // ************************************************************************ //
  // !:GetFranchiseDetails - "http://tempuri.org/"
  // !:GetFranchiseDetailsResponse - "http://tempuri.org/"
  // !:FranchiseExists - "http://tempuri.org/"
  // !:FranchiseExistsResponse - "http://tempuri.org/"
  // !:GetLeadDetails  - "http://tempuri.org/"
  // !:GetLeadDetailsResponse - "http://tempuri.org/"
  // !:GetLookupList   - "http://tempuri.org/"
  // !:GetLookupListResponse - "http://tempuri.org/"
  // !:SubmitLead      - "http://tempuri.org/"
  // !:SubmitLeadResponse - "http://tempuri.org/"
  // !:SubmitLeadAction - "http://tempuri.org/"
  // !:SubmitLeadActionResponse - "http://tempuri.org/"
  // !:SubmitLeadOutcome - "http://tempuri.org/"
  // !:SubmitLeadOutcomeResponse - "http://tempuri.org/"

  // ************************************************************************ //
  // Namespace : http://tempuri.org/
  // binding   : wsHttpBinding
  // service   : LeadService
  // port      : wsHttpBinding
  // ************************************************************************ //
  ILeadService = interface(IInvokable)
  ['{C61A5600-2BA8-436A-41AA-F81C45A9A738}']
    function  GetFranchiseDetails(const parameters: GetFranchiseDetails): GetFranchiseDetailsResponse; stdcall;
    function  FranchiseExists(const parameters: FranchiseExists): FranchiseExistsResponse; stdcall;
    function  GetLeadDetails(const parameters: GetLeadDetails): GetLeadDetailsResponse; stdcall;
    function  GetLookupList(const parameters: GetLookupList): GetLookupListResponse; stdcall;
    function  SubmitLead(const parameters: SubmitLead): SubmitLeadResponse; stdcall;
    function  SubmitLeadAction(const parameters: SubmitLeadAction): SubmitLeadActionResponse; stdcall;
    function  SubmitLeadOutcome(const parameters: SubmitLeadOutcome): SubmitLeadOutcomeResponse; stdcall;
  end;

function GetILeadService(UseWSDL: Boolean=System.False; Addr: string=''; HTTPRIO: THTTPRIO = nil): ILeadService; 
```

这是另一个 Delphi 生成的文件的片段，其中包括对象定义：

```
interface

uses InvokeRegistry, SOAPHTTPClient, Types, XSBuiltIns;

type

  // ************************************************************************ //
  // The following types, referred to in the WSDL document are not being represented
  // in this file. They are either aliases[@] of other types represented or were referred
  // to but never[!] declared in the document. The types from the latter category
  // typically map to predefined/known XML or Borland types; however, they could also
  // indicate incorrect WSDL documents that failed to declare or import a schema type.
  // ************************************************************************ //
  // !:dateTime        - "http://www.w3.org/2001/XMLSchema"
  // !:int             - "http://www.w3.org/2001/XMLSchema"
  // !:boolean         - "http://www.w3.org/2001/XMLSchema"
  // !:decimal         - "http://www.w3.org/2001/XMLSchema"
  // !:string          - "http://www.w3.org/2001/XMLSchema"

  CompanyID            = class;                 { "http://..." }
  Address              = class;                 { "http://..." }
  Property_            = class;                 { "http://..." }
  AppointmentRequest   = class;                 { "http://..." }

  { "http://..." }
  PersonServiceRoleID = (
      BuyersAgent, 
      SellersAgent, 
      SellersLawyer, 
      BuyersLawyer, 
      Seller,
      Buyer, 
      Owner, 
      Tenant, 
      TransactionCoordinator, 
      RelocationCoordinator, 
      ReferredBy,
      ContractorAdministrator, 
      InsuranceAgent, 
      Contractor,
      PropertyManagement, 
      Buyer1,
      Seller1, 
      Owner1, 
      Tenant1
);

  { "http://..." }
  PersonSearchCriteriaActiveType = (DeletedOnly, Both, UndeletedOnly);

  ArrayOfInt = array of Integer;                { "http://..." }

  // ************************************************************************ //
  // Namespace : http://...
  // ************************************************************************ //
  CompanyID = class(TRemotable)
  private
    FServiceCompanyID: Integer;
  published
    property ServiceCompanyID: Integer read FServiceCompanyID write FServiceCompanyID;
  end;

  // ************************************************************************ //
  // Namespace : http://...
  // soapAction: http://...
  // transport : http://schemas.xmlsoap.org/soap/http
  // binding   : CompanySoap
  // service   : Company
  // port      : CompanySoap
  // URL       : http://...
  // ************************************************************************ //
  CompanySoap= interface(IInvokable)
  ['{44A8B9BE-7E75-8534-279B-46BF5D1674D7}']
    function  GetAvailableAppointments(const appointmentRequest: AppointmentRequest; const companyID: CompanyID): ArrayOfAppointmentSlot; stdcall;
    function  GetQuote(const quoteRequest: QuoteRequest; const companyID: CompanyID): ServiceFee; stdcall;
    function  GetPropertyTypes(const companyID: CompanyID): ArrayOfPropertyType; stdcall;
    function  GetFoundationTypes(const companyID: CompanyID): ArrayOfFoundationType; stdcall;
    function  GetServiceTypes(const companyID: CompanyID): ArrayOfServiceType; stdcall;
    function  GetServiceProfessionals(const companyID: CompanyID): ArrayOfInspectorDetails; stdcall;
    function  ScheduleAppointment(const appointmentslot: AppointmentSlot; const customer: Contact; const companyID: CompanyID; const Quote: QuoteRequest; const agent: ArrayOfServiceAgent): AppointmentInfo; stdcall;
    function  FindAppointment(const contactID: Integer; const companyID: CompanyID): ArrayOfAppointmentInfo; stdcall;
    procedure CancelAppointment(const companyID: CompanyID; const appointmentID: Integer); stdcall;
    function  CustomerLookUp(const criteria: PersonSearchCriteria): ArrayOfContact; stdcall;
    function  AddContact(const customer: Contact; const companyID: CompanyID): Contact; stdcall;
    function  UpdateContact(const customer: Contact; const companyID: CompanyID): Contact; stdcall;
    function  ProcessCompanyID(const serviceCompanyID: CompanyID): CompanyID; stdcall;
  end;

function GetCompanySoap(UseWSDL: Boolean=System.False; Addr: string=''; HTTPRIO: THTTPRIO = nil): CompanySoap; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T12:26:12.587

文件顶部的大注释块解释了未创建的类型以及它们的列表。它解释了为什么没有创建它们 - 因为前导`!`，它表明它们从未被声明过。

评论说这可能表明错误的 WSDL 文档未能声明或导入模式。您的服务是声明一个模式还是从某个地方导入一个模式？所有跳过的类都使用 tempuri.org，这不是在您的服务中使用的有效命名空间。

# qt - 如何从 QTest 单元测试中编辑 QTableView 单元格？

> ID：12604739
> 
> 赞同：9
> 
> 时间：2012-09-26T15:03:11.407
> 
> 标签：qt, qt4, qtableview, qt4.6, qtestlib

我正在使用[QTestLib 框架](http://doc.qt.digia.com/4.6/qtestlib-manual.html)为 QTableView 中的自定义验证器编写单元测试。最基本的测试用例之一可以这样描述：

> 双击第三列第四行的表格单元格，并将数字“5”附加到其内容中。

仅仅改变模型或任何东西中的值是不够的，测试用例应该像这样执行它：

1.  双击表格单元格将其设置为编辑模式
2.  按[结束]键。
3.  按 [5] 键。

注意：[这个问题](https://stackoverflow.com/questions/3681326/how-to-trigger-the-edit-mode-of-an-item-in-a-qtableview)有一个关于如何从代码中将表格单元格设置为编辑模式的答案，但是单元测试应尽量坚持人类用户的可能性，即鼠标/键盘操作。

我发现可以使用[QTableView::columnViewportPosition( int )](http://doc.qt.digia.com/4.6/qtableview.html#columnViewportPosition)和[QTableView::rowViewportPosition( int )](http://doc.qt.digia.com/4.6/qtableview.html#rowViewportPosition)检索单元格的 X/Y 位置。[但是，使用QTest::mouseDClick(...)](http://doc.qt.digia.com/4.6/qtest.html#mouseDClick)在指定位置双击既不会选择单元格，也不会将其设置为编辑模式：

```
// Retrieve X/Y coordinates of the cell in the third column and the fourth row
int xPos = m_pTableView->columnViewportPosition( 2 );
int yPos = m_pTableView->rowViewportPosition( 3 );

// This does not work
QTest::mouseDClick( m_pTableView, Qt::LeftButton, QPoint( xPos, yPos ) ); 
```

如何仅使用鼠标/键盘操作来实现我上面描述的测试用例？

PS：我在 Windows XP 32 位和 Qt 4.6.1 下尝试这个

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-26T15:03:11.407

尝试通过模拟事件在 QTableView 中进行编辑时需要考虑几件事：

QTableView 不直接显示其单元格，它使用它的[viewport()](http://doc.qt.digia.com/4.6/qabstractscrollarea.html#viewport)来显示。同样，双击事件必须发送到视口而不是表视图本身。

现在当你做

```
QTest::mouseDClick( m_pTableView->viewport(), Qt::LeftButton, 
                    NULL, QPoint( xPos, yPos ) ); 
```

单元格将被选中，但不会处于编辑模式（与人为启动的双击不同，即使表格视图之前没有焦点，也会立即将单元格置于编辑模式）。但是，如果您在双击之前在同一位置单击一次，它将起作用！

如果您随后将 [End] 按键发送到视口，则光标不会跳到表格单元格内容的末尾，而是会选择当前行中的最后一个单元格。
为了更改表格单元格内容，您必须改为将事件发送到当前编辑器小部件。最简单的方法是使用[QWidget::focusWidget()](http://doc.qt.digia.com/4.6/qwidget.html#focusWidget)

```
QTest::keyClick( m_pTableView->viewport()->focusWidget(), Qt::Key_End ); 
```

请注意，尽管 focusWidget() 可以返回 NULL，但这样使用它可能是不安全的。

* * *

有了这些知识，测试用例可以编写如下：

```
// Note: The table view must be visible at this point

// Retrieve X/Y coordinates of the cell in the third column and the fourth row
int xPos = m_pTableView->columnViewportPosition( 2 ) + 5;
int yPos = m_pTableView->rowViewportPosition( 3 ) + 10;

// Retrieve the viewport of the table view
QWidget* pViewport = m_pTableView->viewport();

// Double click the table cell to set it into editor mode
// Note: A simple double click did not work, Click->Double Click works, however
QTest::mouseClick ( pViewport, Qt::LeftButton, NULL, QPoint( xPos, yPos ) );
QTest::mouseDClick( pViewport, Qt::LeftButton, NULL, QPoint( xPos, yPos ) );

// Simulate [End] keypress
QTest::keyClick( pViewport->focusWidget(), Qt::Key_End );

// Simulate [5] keypress
QTest::keyClick( pViewport->focusWidget(), Qt::Key_5 ); 
```

（注意：如果要验证这一点，可以在每个事件后添加 QTest::qWait(1000) 命令）

* * *

如果您使用[此处](http://doc.qt.digia.com/4.6/qtestlib-tutorial2.html)所述的 _data() 函数，请注意在创建数据时无法检索 focusWidget()。我通过创建一个`ITestAction`只有纯虚拟“execute()”函数的自定义接口解决了这个问题。然后，我添加了具有与函数类似的构造`QTest::mouseClick(...) etc`函数的子类。这些类只调用 QTest 函数，但使用小部件本身或其焦点小部件作为参数，这取决于附加的布尔标志。_data() 槽然后为每个数据行存储一个 QList< ITestAction* >，实际的测试槽迭代该列表并在执行验证之前对每个项目调用 execute()。

# java - 流口水功能

> ID：12604741
> 
> 赞同：8
> 
> 时间：2012-09-26T15:03:15.877
> 
> 标签：java, function, drools

最近我正在使用流口水，我想对某些对象进行一些特殊检查。我需要使用`when`规则部分中的函数，但出现错误。例子：

```
function boolean newFunction(int a){
  if(a>0)
    return true;
  else
    return false;
}

rule "new rule"
salience 100
dialect "mvel"
when
  eval(newFunction(1))
then
  System.out.println("OK");
end 
```

我总是得到的错误是：

```
unable to resolve method using strict-mode: java.lang.Object.newFunction(java.lang.Integer) 
```

节中的功能不支持流口水`when`吗？

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-26T15:44:49.257

最简洁的答案是不。

这是因为事实需要在工作记忆中。

您可以做的是制定一个规则，从工作记忆中获取某个类的所有类型，在*then*部分应用一个函数并将该新值插入工作记忆中。

# 编辑

`when`这个答案最初发布于 2012 年，由于较新版本的 drools 确实支持该子句的功能，因此并不相关。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-23T17:22:28.230

很可能是 MVEL 或集成错误 - 函数调用适配器没有装箱/拆箱原始类型。我看到这个问题已经很老了，但问题已经解决了（用 6.3.0-SNAPSHOT 测试）。对于旧版本，我会尝试使用盒装类型：function boolean newFunction(Integer a) ...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-03T19:40:23.917

按照上面选择的答案，经过一些实验，我发现可以创建一个外部 java 方法，其类可以导入规则文件，并包装在一个 MVEL 函数包装器（布尔值）中，然后可以从 LHS 作为 eval 语句的参数调用。

```
[External Java POJO_Class.myMethod]

import com.mypackage.POJO_Class;

function Boolean myFunctionName() {
   POJO_Class myClass = new POJO_Class();
   return myClass.myMethod(Parameters);
}

rule "Test Rule"
    when
      eval ( myFunctionName(parameters) )
    then
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-21T13:20:42.467

我不确定您为什么会收到您遇到的错误，但是我昨天在查询中使用以下内容进行了一些调试（LHS，所以我猜测与规则相同）

```
function boolean say(Object s) { 
      Debug.log("Say %s\n", s); 
      return true; 
} 
```

该查询只是`eval(say($object))`帮助我查看它是否被调用过。我正在运行大约一周前的 6.1 快照。也许尝试让它工作（做任何事情）只是从那里获取 Object 并工作 - 它可能是 Number 或 Integer 是你最终在争论而不是 int 的地方？

# zxing - 构建失败 - 未找到架构 armv7 的符号

> ID：12604743
> 
> 赞同：1
> 
> 时间：2012-09-26T15:03:21.937
> 
> 标签：zxing, xcode4.5, armv7, armv6

我正在使用库 ZXingWidget、CocoaTouchBarcodes，当我尝试构建我的项目时出现错误，它在 Xcode 4.5 之前工作，但现在它被丢弃了。

如果我尝试使用 armv6 架构，它只能工作，但使用 armv7 则无法工作......

这里的错误日志：

* * *

```
Undefined symbols for architecture armv7:

  "_OBJC_METACLASS_$_UIControl", referenced from:
      _OBJC_METACLASS_$_UIDickBar in UIDickBar.o
  "_UIGraphicsGetCurrentContext", referenced from:
      -[MBProgressHUD drawRect:] in MBProgressHUD.o
      -[MBRoundProgressView drawRect:] in MBProgressHUD.o
      -[RoundedUITableViewMask drawRect:] in RoundedUITableView.o
      -[GradientButton drawRect:] in GradientButton.o
      -[UIDickBar drawRect:] in UIDickBar.o
      -[Radar drawRect:] in Radar.o
      -[RadarViewPortView drawRect:] in RadarViewPortView.o
      ...

(...)

ld: symbol(s) not found for architecture armv7
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

* * *

我已经搜索过这些链接，但它们对我不起作用。

*   [Xcode中的链接错误](https://stackoverflow.com/questions/2287915/linking-error-in-xcode)
*   [ios6.0上的ZxingWidget存档错误](https://stackoverflow.com/questions/11980618/zxingwidget-archive-error-on-ios6-0)
*   [架构 armv7 的未定义符号](https://stackoverflow.com/questions/6429494/undefined-symbols-for-architecture-armv7)
*   [架构 armv7 的未定义符号，ld：未找到架构 armv7 的符号 - 怎么办？](https://stackoverflow.com/questions/10235993/undefined-symbols-for-architecture-armv7-ld-symbols-not-found-for-architectu)

# postgresql - Postgres 表中列的顺序会影响性能吗？

> ID：12604744
> 
> 赞同：25
> 
> 时间：2012-09-26T15:03:21.967
> 
> 标签：postgresql, performance, database-design, storage, postgresql-performance

`CREATE TABLE`在 Postgres 中，语句中列的顺序会影响性能吗？考虑以下两种情况：

```
CREATE TABLE foo (
  a      TEXT, 
  B      VARCHAR(512),
  pkey   INTEGER PRIMARY KEY,
  bar_fk INTEGER REFERENCES bar(pkey),
  C      bytea
); 
```

对比

```
CREATE TABLE foo2 (
  pkey   INTEGER PRIMARY KEY,
  bar_fk INTEGER REFERENCES bar(pkey),
  B      VARCHAR(512),      
  a      TEXT, 
  C      bytea
); 
```

性能`foo2`会比`foo`列的更好的字节对齐更好吗？当 Postgres 执行时`CREATE TABLE`，它是按照指定的列顺序还是按照字节对齐或性能的最佳顺序重新组织列？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-26T18:21:20.280

### 问题 1

> 的性能`foo2`会比`foo`列的更好的字节对齐更好吗？

是的，列的顺序对性能的影响很小。类型对齐是更重要的因素，因为它会影响磁盘占用空间。您可以最小化存储大小（播放“俄罗斯方块”）并在数据页上压缩更多行——这是提高速度的最重要因素。

通常不值得打扰。使用这个相关答案中的极端示例，您会得到很大的不同：

*   [在 PostgreSQL 中计算和节省空间](https://stackoverflow.com/questions/2966524/calculating-and-saving-space-in-postgresql/7431468#7431468)

类型对齐详细信息：

*   [理解 Postgres 行大小](https://stackoverflow.com/questions/13570613/making-sense-of-postgres-row-sizes/13570853#13570853)

另一个因素是，如果您首先有固定大小的列，则检索列值会稍微快一些。我在这里引用[手册](https://www.postgresql.org/docs/current/storage-page-layout.html)：

> 要读取数据，您需要依次检查每个属性。首先根据空位图检查该字段是否为NULL。如果是，请转到下一个。然后确保你有正确的对齐方式。如果该字段是一个固定宽度的字段，那么所有的字节都被简单地放置。如果它是一个可变长度字段（attlen = -1），那么它会更复杂一些。所有变长数据类型共享一个共同的头结构`struct varlena`，它包括存储值的总长度和一些标志位。

有一个开放的[TODO 项允许对 Postgres Wiki 中的列位置重新排序](https://wiki.postgresql.org/wiki/Alter_column_position)，部分原因是这些原因。

### 问题2

> 当 Postgres 执行时`CREATE TABLE`，它是否遵循指定的列顺序，还是以字节对齐或性能的最佳顺序重新组织列？

列*按定义的顺序*存储，系统不会尝试优化。

我看不到列顺序与[TOAST 表](https://www.postgresql.org/docs/current/storage-toast.html)的任何相关性，就像另一个答案似乎暗示的那样。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-26T16:15:03.157

据我了解，PostgreSQL 在保存记录时遵循您输入列的顺序。这是否会影响性能是值得商榷的。PostgreSQL 将所有表数据存储在每个大小为 8kb 的页面中。8kb 是默认值，但可以在编译时更改。

表中的每一行都将占用页面内的空间。由于您的表定义包含可变列，因此页面可以包含可变数量的记录。您要做的是确保您可以将尽可能多的记录放入一页中。这就是为什么当表具有大量列或列大小很大时，您会注意到性能下降的原因。

话虽如此，声明 varchar(8192) 并不意味着页面将被一条记录填满，但声明 CHAR(8192) 将用完一整页，而与列中的数据量无关。

在声明 TEXT 列等 TOASTable 类型时，还需要考虑一件事。这些是可能超过最大页面大小的列。具有 TOASTable 列的表将具有关联的 TOAST 表来存储数据，并且只有指向数据的指针与表一起存储。这可能会影响性能，但可以通过 TOASTable 列上的适当索引来改善。

最后，我不得不说，列的顺序对表的性能没有太大的影响。大多数查询使用单独存储的索引来检索记录，因此列顺序被否定。它归结为需要读取多少页才能检索数据。

# nginx - 在 Nginx 中重写主机名：82

> ID：12604745
> 
> 赞同：0
> 
> 时间：2012-09-26T15:03:23.310
> 
> 标签：nginx, rewrite

我在 Nginx + tomcat 上设置实例时遇到重定向问题我正在使用 nginx 和 haproxy 和 tomcat

下面是我用于设置虚拟主机的配置 [在 conf.d 下]

```
 server{
            listen 82;
            server_name domain.com;
            rewrite ^/(.*) http://$server_name$1 permanent;
            error_log /var/log/nginx/domain-error.log;
     location / {
            proxy_pass http://localhost:100;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header Host $http_host;
   } 
```

现在，当我将[http://domain.com:82](http://domain.com:82)放在浏览器上时，它会重定向到[https://domain.com](https://domain.com) ，我想将其保留在 :82 端口上

我也尝试了下面的重写规则但没有解决问题[这不是打开页面]

**重写 ^(.*) http://$server_name:82/$1 永久**

请帮我纠正这个问题。

谢谢，阳光

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T17:00:47.537

您实际上创建了一个无限循环。NGINX 已经在收听 :82 由于`listen 82;`. 每次请求进入时，它只是重新初始化请求。您应该能够删除（或注释掉）该`rewrite ^/(.*) http://$server_name$1 permanent;`行以使其正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T15:06:35.990

也许您只是在端口号上出错了？81而不是82？

# c# - LINQ OrderBy 有一个例外

> ID：12604748
> 
> 赞同：1
> 
> 时间：2012-09-26T15:03:26.960
> 
> 标签：c#, .net, linq

我有一个`DataSet`包含一列的列，称它为`Type`包含整数。我正在使用 LINQ 来操作`DataSet`并且我想按`Type`. 该`Type`列现在仅包含 3 个值（1、2、3）。我想排序，以便`Type`2 在列表中排在第一位，然后是 1 和 3。

是否有一个简单的解决方案，或者我将不得不自定义 OrderBy？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T15:05:01.287

几个解决方案：

```
table.AsEnumerable()
.OrderBy(r => r.Field<int>("Type")==2 ? 0 : 1)
.ThenBy(r => r.Field<int>("Type")); 
```

或者可能更好

```
table.AsEnumerable().
OrderBy(r => r.Field<int>("Type")==2 
   ? 0 
   : r => r.Field<int>("Type")) 
```

或者优雅的 Tim Schmelter 的解决方案

```
table.AsEnumerable()
.OrderByDescending(r => r.Field<int>("Type")==2)
.ThenBy(r => r.Field<int>("Type")) 
```

优势或 Tim Schmelter 的解决方案：您不依赖于“伪值”。

在前两个解决方案中，我们断言 0 是（（字段的最小可能值）-1）。

这是真的吗，能不能改变，我们不知道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T15:45:11.563

为了使示例更简单，我删除了我们从 DataTable 开始的事实，这只是一个细节，我认为我们可以这样做：

```
var list = new [] { 1, 3, 5, 2, 4, 6, 9, 8 };
var sorters = new [] { 3, 2, -1 };

var o = from s in sorters
        from l in list.OrderBy(x => x)
        where s == l || (s == -1 && !sorters.Contains(l))
        select l; 
```

排序数组包含首选的排序器，这样我们可以在需要时拥有多个排序器，然后有一个 'jolly' (-1) 表示排序器的结束。欢乐可以以更好的方式处理，就像这样只是为了给你一个想法。在这一点上，算法是通用的，不需要对首选值进行任何硬编码检查（只是快乐）。

有一些潜在的低效率，但我只是想展示这个解决方案的总体思路，通过更多的工作可以更有效地完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T15:58:08.157

在这里，您有 5 种方法可以做到这一点。这是一篇关于如何将值设置为第一个订单的帖子，然后将值设置为较低的值，然后放入高于所选值的值，因此如果您有`{1 2 3 4 5 6}`并选择**第 4**项，则输出：`{4 1 2 3 5 6}`.. 我更喜欢我自己的答案。 . ^_^

[https://stackoverflow.com/a/12580121/920359](https://stackoverflow.com/a/12580121/920359)

# javascript - 在 Symfony2 项目中将 JavaScript 文件放在哪里？

> ID：12604753
> 
> 赞同：0
> 
> 时间：2012-09-26T15:03:37.823
> 
> 标签：javascript, symfony

我有一个 Symfony2 项目，我有一些 JavaScript 代码要执行。

该`.js`文件应该存储在项目中的什么位置以及如何调用该文件（而不是将整个脚本放在`.twig`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T15:07:11.097

将其放入`web/js`，然后通过以下方式在您的 html 中访问它：

```
<script src="{{ asset('js/script.js') }}"></script> 
```

或考虑使用[Assetic](http://symfony.com/doc/current/cookbook/assetic/asset_management.html)。

# javascript - 有没有办法检测浏览器是否具有亚像素精度？

> ID：12604754
> 
> 赞同：43
> 
> 时间：2012-09-26T15:03:38.523
> 
> 标签：javascript, html, css, internet-explorer, internet-explorer-9

有没有办法检测浏览器是否对元素具有亚像素精度？

IE9 与其他任何主流浏览器不同，它的元素具有亚像素精度（元素宽度可以是 50.25 像素），因此，我需要区别对待。

一种方法是使用 jQuery 检测浏览器名称和版本，但这在 jQuery 中已弃用且不推荐，而是建议应针对浏览器名称和版本测试功能的存在。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-09-26T15:41:32.527

我不知道你从哪里知道 IE9 是唯一支持小数像素单位的浏览器，但这种假设是完全不正确的。

从[规范的第 4.3 节](http://www.w3.org/TR/CSS2/syndata.html#values)（强调添加）：

> 长度值的格式（在本规范中用<length> 表示）是一个**<number>**（带或不带小数点），紧跟一个单位标识符（例如，**px**、em 等）。

并定义*<number>*：

> 某些值类型可能具有整数值（由 <integer> 表示）或实数值（由 <number> 表示）。实数和整数仅以十进制表示法指定。<integer> 由一个或多个数字“0”到“9”组成。<number> 可以是 <integer>，也可以是零个或多个数字，后跟一个点 (.)，后跟一个或多个数字。整数和实数前面都可以用“-”或“+”表示符号。-0 相当于 0，不是负数。

因此，根据规范，`px`长度单位*必须*支持小数。

为了证明这一点，请[全屏](http://fiddle.jshell.net/josh3736/tnHxy/show/)查看[这个小提琴](http://jsfiddle.net/josh3736/tnHxy/)并使用浏览器的缩放功能一直放大：

![小提琴截图](../Images/99c94b29d7320bdead86ab28446af793.png)

在这个 Chrome 屏幕截图中，请注意 5.5px 的蓝色框确实高于 5px 的红色框。

* * *

我认为混淆可能源于这样一个事实，即**非标准** `element.clientHeight`返回一个计算的（舍入的）*整*数值，并且舍入在不同的浏览器中发生的方式不同。

在我的小提琴中，对于`clientHeight`蓝色`<div>`，IE9 和 Firefox 15 以 100% 缩放给出`6`. Chrome 22 和 Opera 12 提供`5`. 在所有浏览器中，该属性的值会随着用户更改浏览器的缩放级别而更改。

换句话说，它是不可靠的。

如果要使用元素的实际分数单位进行计算，请使用[`getComputedStyle`](https://developer.mozilla.org/en-US/docs/DOM/window.getComputedStyle).

```
var el = $('#b')[0]; // the actual DOM element
var height = parseFloat(getComputedStyle(el).height); // => 5.5 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T15:14:57.737

您可以创建一个奇数大小的容器并在其中放入两个 50% 宽度的元素，然后查看它们是否已按 50:50 进行拆分。

见[http://jsfiddle.net/alnitak/jzrQ6/](http://jsfiddle.net/alnitak/jzrQ6/)

它`false`在 MacOS X 10.8.2 上的 Chrome 22.0.1229.79 和`true`Firefox 15.0.1 上返回。我没有 MSIE 来测试它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-03T13:36:15.160

[http://jsfiddle.net/KAW3d/1/](http://jsfiddle.net/KAW3d/1/)

*   在 IE6、IE7 和 Opera 12.02 中：100.5px + 100.5px = 200px（两个 100.5px 浮点数适合 200px 容器）
*   在 IE8+、Firefox 15.0.1、Chrome 22 中：100.5px + 100.5px > 200px

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-20T18:46:24.473

最近我们不得不进行一些严格的像素完美计算，我需要检查浏览器是否会支持亚像素布局。我使用其他一些答案作为指南创建了一个用于[Conditionizr](http://conditionizr.com/)或[Modernizr的测试：](http://modernizr.com/)

```
conditionizr.add('subpixel-layout', function() {
    var $testWrap = $(
        '<div style="width: 4px; height: 2px; position: absolute; right: 0; bottom: 0;">' +
            '<div id="subpixel-layout-1" style="width: 2.5px; height: 1px; float: left;"></div>' +
            '<div id="subpixel-layout-2" style="width: 2.5px; height: 1px; float: left;"></div>' +
        '</div>'
    ).appendTo('body');

    var supported = $('#subpixel-layout-1').position().top !== $('#subpixel-layout-2').position().top;
    $testWrap.remove();
    return supported;
}); 
```

然后你可以使用：

```
conditionizr.on('!subpixel-layout', function () {
    // subpixel layout is NOT available
}); 
```

你应该可以在 Modernizr 中用 做同样的事情`Modernizr.addTest()`，但我没有测试它。

显然我在`jQuery`这里使用，但没有它也应该很简单。

# java - 我应该同步我的“假时间”类方法吗？

> ID：12604758
> 
> 赞同：1
> 
> 时间：2012-09-26T15:03:57.043
> 
> 标签：java, time, synchronized

我为我的应用程序创建了一个“假时间”或 TimeSource，关键是这个新类应该控制应用程序的实际时间。这意味着所有使用 Date() 构造函数、System.currentTimeInMillis() 或 Calendar.getInstance() 的方法都应该使用我的类（例如 TimeSource.getInstance.getCurrentTimeInMillis()）。

这样我可以在测试环境中操纵系统的实际时间。

但我想知道我是否应该同步这些方法，或者我应该如何同步。

我可以向您展示以下代码：

```
public class DateTime {

private static final long ONE_MINUTE = 60 * 1000;
private static final long ONE_HOUR = ONE_MINUTE * 60;
private static final long ONE_DAY = ONE_HOUR * 24;
private static final long ONE_MONTH = ONE_DAY * 30;
private static final long ONE_YEAR =  ONE_DAY * 364;

private static DateTime instance;

private Date date;
private Date staticDate;

private boolean isStatic = false;

private long addedTimeInMilliseconds = 0;

public static DateTime getInstance() {
    if (instance == null) {
        instance = new DateTime();
    }
    return instance;
}

private DateTime() {
    date = new Date(System.currentTimeMillis());
    staticDate = new Date(System.currentTimeMillis());
}

public Date getCurrentTime() {
    if (isStatic) {
        return staticDate;
    } else {
        date.setTime(System.currentTimeMillis()+this.addedTimeInMilliseconds);
        return date;
    }
}

public long getCurrentTimeInMillis() {
    if (isStatic) {
        return staticDate.getTime();
    } else {
        return System.currentTimeMillis()+this.addedTimeInMilliseconds;
    }
}

} 
```

我已经对这些方法进行了一些测试——单线程和多线程测试——并且同步方法的性能比没有同步的要差很多。问题是我不确定如果我不同步这些方法将来是否会出现问题。

我还使用了一些方法来添加“当前应用程序的时间”

```
public void addMinutesToDateTime(int minutes) {
     this.addedTimeInMilliseconds += (minutes * ONE_MINUTE);
 } 
```

所以我问了一点建议，或者关于同步的知识，以及天气与否，我应该在我的方法中使用它。

最好的问候 - 马丁。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T15:08:21.940

如果需要，我将只有一个线程更新时间并制作字段`volatile`。

我不会`Date`以可变的方式使用，我会使用`long`.

# prediction - R-预测区间

> ID：12604761
> 
> 赞同：0
> 
> 时间：2012-09-26T15:04:00.360
> 
> 标签：prediction

包含 47 个 obs 和 5 个变量的数据集（男性编码为 0，女性编码为 1）试图预测具有平均地位、收入和语言的男性将花费 95% CI。

我用我`lm<-spending ~ status + income + verbal + sex, teenspend`的来获得平均值。我发现我的系数为：

```
mdl$coefficient
 (Intercept)    sexfemale       status       income 
 22.55565063 -22.11833009   0.05223384   4.96197922 
      verbal 
 -2.95949350 

predict(mdl, sex=0, interval='confidence', level=0.90) 
```

一些问题：我使用了上述预测，但我得到了所有的观察结果，我如何找到我的预测？

```
 fit         lwr      upr
 1 -10.6507430 -21.4372267  0.1357407
 2  -9.3711318 -21.9428731  3.2006095
 3  -5.4630298 -15.0782882  4.1522286
 4  24.7957487  12.5630143 37.0284831 
```

请说清楚？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T14:19:36.337

检查 predict.lm 的文档，您会发现该参数`sex=0`不能在此处使用。predict 方法会忽略该参数，因此您可以获得数据中所有观察值的拟合值加上置信区间。您可以通过以下方式指定预测：
`predict(mdl, newdata=teenspend[teenspend$sex==0,], interval="confidence")`
如果您确实需要预测区间——您在问题的标题中使用它——您应该选择`interval="prediction"`.

# ios - 使用 LLVM 4.1 编译 Xcode 4.5 中的错误 255

> ID：12604766
> 
> 赞同：1
> 
> 时间：2012-09-26T15:04:23.093
> 
> 标签：ios, xcode, llvm, ios6

当构建几乎完成时，我正在尝试使用最新的 xcode + sdk 6.0 编译我的项目，但出现此错误：

```
2012-09-26 16:52:24.714 ibtoold[5603:b03] [MT] DVTAssertions: ASSERTION FAILURE in /SourceCache/IDEInterfaceBuilder/IDEInterfaceBuilder-2840/Framework/Document/IBDocument.m:1514
Details:  Some objects didn't get the ibBeginArchivingDocument:withContext: callback. A class has probably overridden the method without calling through to super.
Object:   <IBCocoaTouchDocument: 0x40072df00>
Method:   -willArchiveWithContext:
Thread:   <NSThread: 0x40010a260>{name = (null), num = 1}
Hints: None
Backtrace:  0  0x000000010550e44c -[DVTAssertionHandler handleFailureInMethod:object:fileName:lineNumber:messageFormat:arguments:] (in DVTFoundatio  
1  0x000000010550e2a5 _DVTAssertionFailureHandler (in DVTFoundatio  
2  0x0000000104b35245 -[IBDocument willArchiveWithContext:] (in IDEInterfaceBuilderKi  
3  0x00000001086407d6 (in IDEInterfaceBuilderCocoaTouchIntegratio  
4  0x0000000108640c3a (in IDEInterfaceBuilderCocoaTouchIntegratio  
5  0x0000000104b44745 __47-[IBDocument compiledPackageWithOptions:error:]_block_invoke_0 (in IDEInterfaceBuilderKi  
6  0x0000000104b5b9a1 -[IBDocument assertIfArbitrationIsScheduledDuring:] (in IDEInterfaceBuilderKi  
7  0x0000000104b44710 -[IBDocument compiledPackageWithOptions:error:] (in IDEInterfaceBuilderKi  
8  0x0000000104a46f90 (in ibtool  
9  0x0000000104a440e8 (in ibtool 
10  0x0000000104a43c5f (in ibtoold 
11  0x0000000104a43b53 (in ibtoold 
12  0x0000000104a50165 (in ibtoold 
13  0x0000000104a43684 (in ibtoold 
14  0x0000000104a448f1 (in ibtoold 
15  0x0000000104a42524 (in ibtoold 
16  0x000000000000000 Command /Applications/Xcode4.5SDK6.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin/ibtool failed with exit code 255 
```

仅对于 XIB，我将无法成功构建...您有解决方案吗？谢谢！达里奥

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T15:54:41.227

注意：我编辑了几次，因为我想到了新的想法，所以我知道它有点生涩。

1）查看命令行工具'ibtool'-有一个手册页-您可以尝试手动翻译xib文件并可能对其进行验证（我已经多年没有使用它了）

2）其他想法（但如果失败了，你应该烧掉一个 DTS 事件 - 你每年得到 2 个 - 并尝试从 Apple 工程师那里获得一些帮助）：

*   清理你的项目
*   删除缓存的数据（组织者->项目->派生数据点击“删除...”
*   确保为此 XIB 设置了正确的版本控制（选择 XIB，右侧的第三个 Xcode 选项卡，文件选项：

![在此处输入图像描述](../Images/df841405bb544a8b9f966d007705b0ce.png)

*   关闭项目
*   退出 Xcode
*   重新打开 Xcode，然后是产品
*   再试一次

如果不这样做，请使用 DTS 事件，或在内部 Apple 列表上发布 - 您必须登录的列表 - 也许那里的人知道问题

3）如果您真的很绝望，请复制您的xib文件。然后开始删除对象，最简单的先，然后尝试构建。在某些时候它可能会编译。然后重新添加其他对象。

4）如果 3 不这样做，将 xib 文件吹走，创建一个新文件，并从本质上重建您拥有的文件。

编辑：（更新原始海报的评论）

5) 重新启动机器并重试。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-27T19:50:37.630

“清理”我的项目解决了我的问题。我正在使用 XCode 4.5。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T00:41:41.187

以下步骤对我有用。

感谢大卫的步骤 #1 到 #4

1.  清理我的项目构建
2.  删除缓存的数据（组织者->项目->派生数据点击“删除...”
3.  关闭项目
4.  退出 Xcode（我确实在这一步停止并尝试重新打开 Xcode，但错误仍然存​​在）
5.  重新启动我的电脑。（之后尝试打开 Xcode，但仍然发生相同的构建错误）
6.  制作 Xcode 的副本（我将副本放在 ~/Desktop 中）
7.  在 /Applications 中删除原始副本
8.  将 Xcode 的副本放回 /Applications
9.  完毕

# java - 在我的 Applet 中加载 DLL 库

> ID：12604767
> 
> 赞同：0
> 
> 时间：2012-09-26T15:04:33.387
> 
> 标签：java, applet

当我尝试在服务器上运行我的小程序时，它似乎永远不会走出第一步，即加载库，当我尝试在 localhost 上运行时，它可以完美运行

**代码**

```
private final static String DEFAULT_DOWNLOAD_PATH = "http://colorfulwolf.com/dev/cam/";

private final static String VERSION_ID = "1.0.0";

// note that this list is windows-specific, so this is not a generic
// solution that works on all OSes
private final static String[] LIBS = { "cv210.dll", "cvaux210.dll",
        "cxcore210.dll", "cxts210.dll", "highgui210.dll", "ml210.dll" };

private final static String LIB_ARCHIVE = "opencv21.zip";

public void loadWebcam() {
        loadingScreen.setMaxProgress(7);
        loadingScreen.setProgress(1, "Loading Librarys..");
        String tmpDir = System.getProperty("java.io.tmpdir");

        File faPath = new File(tmpDir + File.separator + "WebcamApplet_"
                + VERSION_ID.replaceAll("\\.", "-"));
        System.out.println(faPath);     
        System.setProperty("jna.library.path", faPath.getAbsolutePath());

        String downloadPath = this.getParameter("dll_path");
        if (downloadPath == null)
            downloadPath = DEFAULT_DOWNLOAD_PATH;

        try {
            prepareLibraries(faPath, downloadPath);
        } catch (Exception e) {
            e.printStackTrace();
            loadingScreen.setProgress(3, "Erro: " + e.getMessage());
            return;
        }
}

    private void prepareLibraries(File localPath, String downloadPath)
            throws Exception {
        if (localPath.exists()) {
            boolean libMissing = false;
            for (String lib : LIBS) {
                File libFile = new File(localPath.getAbsolutePath()
                        + File.separator + lib);
                if (!libFile.exists()) {
                    libMissing = true;
                    break;
                }
            }

            if (!libMissing)
                return; // We don't have to download
        }

        if (!localPath.exists() && !localPath.mkdirs()) // Error fatal!
            throw new Exception("Can't create the path: " + localPath);

        loadingScreen.setProgress(2, "Downloading library...");
        File file = new File(localPath.getAbsolutePath() + File.separator
                + LIB_ARCHIVE);
        String link = downloadPath + LIB_ARCHIVE;
        download(link, file);

        ZipFile zipFile = new ZipFile(file);
        Enumeration<? extends ZipEntry> entries = zipFile.entries();

        loadingScreen.setProgress(3, "Installing librarys..");
        while (entries.hasMoreElements()) {
            ZipEntry entry = entries.nextElement();
            if (entry.isDirectory())
                continue;

            File tar = new File(localPath.getAbsolutePath() + File.separator
                    + entry.getName());
            InputStream is = zipFile.getInputStream(entry);
            OutputStream os = new FileOutputStream(tar);
            copyStream(is, os);
            os.flush();
            os.close();
            is.close();
        }
        zipFile.close();

        file.delete();
        if (file.exists())
            file.deleteOnExit();
    } 
```

我将 jar 文件放在服务器上的可见`HTTP`路径中

```
<applet code="com.colorfulwolf.webcamapplet.WebcamApplet"        
    archive="http://www.netimoveis.com/teste.jar, http://www.netimoveis.com/core.jar, http://www.netimoveis.com/javacv.jar, http://www.netimoveis.com/javase.jar, http://www.netimoveis.com/jna.jar, http://www.netimoveis.com/customizer.jar, http://www.netimoveis.com/jmf.jar, http://www.netimoveis.com/meidaplayer.jar, http://www.netimoveis.com/multiplayer.jar, http://www.netimoveis.com/sound.jar"
    height="550" width="550">
</applet> 
```

为什么当我尝试在服务器上运行小程序时，它没有离开第一步？

**@更新**

我找到了代码不会移动到下一行代码的行。 `String tmpDir = System.getProperty("java.io.tmpdir");`这一行是我的代码停止的地方，仍然在这一行。Java 当前安装在服务器中。

# templates - Sugarcrm : 如何重写文档 URL

> ID：12604771
> 
> 赞同：0
> 
> 时间：2012-09-26T15:04:49.463
> 
> 标签：templates, url, customization, sugarcrm

**我的版本：**

SugarCRM CE 6.5.2 在 Linux 上运行

**我想做的事 ：**

我通过编写几个逻辑钩子在“custom/modules/Documents”中自定义了 Documents 模块。这些逻辑挂钩在“ressources/”中创建新文件夹，这是我的新上传文件夹。（我已将 config.php 中的“upload_dir”从“./upload”更改为“./ressources”）这是通过在工作室中创建的名为“folder_name”的自定义字段完成的，然后，逻辑挂钩剪切和粘贴文件上传到这个新文件夹。

**我的问题是什么**

所以，有了这一切，我在编辑、详细信息和修订子面板视图中的下载 url 是错误的。我想将其更改为正确的文件夹，例如，在 url 中添加一个文件夹参数，如下所示：

/index.php?entryPoint=download&folder=图片&id=idDoc&type=文档

我试图更改 EditView.tpl 或 DetailView.tpl 中的 a href 链接（如 ），但它不起作用，因为它们位于我的缓存/模块/文档文件夹中，并且在我进行快速修复时被覆盖。

因此，我将 DetailView.tpl 和 EditView.tpl 复制/粘贴到 custom/modules/Documents/tpls 并尝试覆盖 view.edit.php 和 view.detail.php 以链接自定义模板，但它不起作用. 代码 ：

```
<?php

  require_once('include/MVC/View/views/view.detail.php');

  class DocumentsViewDetail extends ViewDetail {

     function DocumentsViewDetail() {
       parent::ViewDetail();
     }

    function display() {
      parent::display();
    }

    function detailViewProcess() {
      $this->processSearchForm();
      $this->lv->searchColumns = $this->searchForm->searchColumns;

      if (!$this->headers)
        return;
      if (empty($_REQUEST['search_form_only']) || $_REQUEST['search_form_only'] == false) {
        //here we are overriding with your custom template            
        $this->lv->setup($this->seed, 'custom/modules/Documents/tpls/DetailView.tpl', $this->where, $this->params);
        echo $this->lv->display();
       }
   }

}

?> 
```

你知道为什么这不起作用吗？

您对我如何重写我的 URL 或覆盖编辑、修订子面板和详细信息视图有任何想法吗？

请回答，这是**紧急的**

提前谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T17:38:53.777

尝试将文件夹参数添加`$file_url`到`fill_in_additional_detail_fields()`.`modules/Documents/Document.php`

[已编辑]

`EditView: include/SugarFields/Fields/File/EditView.tpl`
`DetailView: include/SugarFields/Fields/File/DetailView.tpl`

`<a href="index.php?entryPoint=download&id={$fields.{{$vardef.fileId}}.value}&type={{$vardef.linkModule}}&folder=test" ...`

`ListView: include/SugarFields/Fields/File/ListView.tpl`

`<a href="index.php?entryPoint=download&id={$parentFieldArray.ID}&type={$displayParams.module}{$vardef.displayParams.module}&folder=test" ...`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T10:19:59.900

所以，感谢@air4x，我确实回答了我的问题：覆盖 DetailView.tpl 为了使其升级安全，我从

```
include/SugarFields/Fields/File/DetailView.tpl 
```

至

```
custom/include/SugarFields/Fields/File/DetailView.tpl 
```

有用！

**但是有一个大麻烦来了...**

解释： 1]我创建一个新文档，将image01上传到Folder01。节省。数据库正常。在 DetailView 中，文件夹名称为“Folder01”，链接“//Folder01/image01_id”有效。

2]我创建另一个新文档，将image02上传到Folder02。节省。数据库正常。但是在 DetailView 中，文件夹的名称不是“Folder02”而是“Folder01”。并且链接是 //Folder01/image02_id 所以它不起作用，因为在数据库或我的文件夹中，文件仍在 Folder02 中。

这是我的 custom/include/SugarFields/Fields/File/DetailView.tpl 代码：

```
//BEGIN the code i modified
<span class="sugar_field" id="{{if empty($displayParams.idName)}}{{sugarvar key='name'}}{{else}}{{$displayParams.idName}}{{/if}}">
   <a href="ressources/{$fields.folder_name_c.value}/{$fields.{{$vardef.fileId}}.value}" class="tabDetailViewDFLink" target='_blank'>{{sugarvar key='value'}}</a>
</span>
//END the code i modified

{{if isset($vardef) && isset($vardef.allowEapm) && $vardef.allowEapm}}
    {if isset($fields.{{$vardef.docType}}) && !empty($fields.{{$vardef.docType}}.value) && $fields.{{$vardef.docType}}.value != 'SugarCRM' && !empty($fields.{{$vardef.docUrl}}.value) }
        {capture name=imageNameCapture assign=imageName}
          {$fields.{{$vardef.docType}}.value}_image_inline.png
        {/capture}
        <a href="{$fields.{{$vardef.docUrl}}.value}" class="tabDetailViewDFLink" target="_blank">{sugar_getimage name=$imageName alt=$imageName other_attributes='border="0" '}</a>
   {/if}
{{/if}}
{{if !empty($displayParams.enableConnectors)}}
    {{sugarvar_connector view='DetailView'}}
{{/if}} 
```

我真的不知道为什么我的**$fields.folder_name_c.value**保留在第一个文档中并替换第二个文档中的那个...你知道我如何在 EditView.tpl 中进行 sql 查询来更改它并拥有正确的价值？

拜托，我真的需要帮助。

谢谢

（ps：@air4x，非常感谢，即使我遇到了另一个麻烦，也让我知道如何覆盖 EditView。**谢谢！**）

# codeigniter - Codeigniter 分页链接错误

> ID：12604776
> 
> 赞同：1
> 
> 时间：2012-09-26T15:05:02.427
> 
> 标签：codeigniter, pagination, hyperlink

我正在使用 codeigniter 2.03 及其分页类。它有一个看起来像这样的问题：

1
2
下一个 最后

这是我在控制器中的代码：

```
$config['base_url'] = site_url().'/admin/seesubcategory/'; //set the base url for pagination
$config['total_rows'] = $a; //total rows
$config['per_page'] = '12'; //the number of per page for pagination
$config['uri_segment'] = 3; //see from base_url. 3 for this case
$this->pagination->initialize($config); //initialize pagination
$config['num_tag_open'] = '<div id="pagination">';  
$config['num_tag_close'] = '</div>';
$config['prev_link'] = '&lt;';
$config['prev_tag_open'] = '<div>';
$config['prev_tag_close'] = '</div>'; 
```

这是我打印链接的代码：

```
<?php echo $this->pagination->create_links(); ?> 
```

这是我的CSS：

```
#pagination a, #pagination strong {
    background: #e3e3e3;
    padding: 4px 7px;
    text-decoration: none;
    border: 1px solid #cac9c9;
    color: #292929;
    font-size: 13px;
}

#pagination strong, #pagination a:hover {
    font-weight: normal;
    background: #cac9c9;
    display: inline-block;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T04:54:50.643

你的代码应该是这样的

```
$config['base_url'] = site_url().'/admin/seesubcategory/'; //set the base url for pagination
$config['total_rows'] = $a; //total rows
$config['per_page'] = '12'; //the number of per page for pagination
$config['uri_segment'] = 3; //see from base_url. 3 for this case    
$config['num_tag_open'] = '<div id="pagination">';  
$config['num_tag_close'] = '</div>';
$config['prev_link'] = '&lt;';
$config['prev_tag_open'] = '<div>';
$config['prev_tag_close'] = '</div>';
$this->pagination->initialize($config); //initialize pagination 
```

您需要在所有结束时初始化“配置”

# android - 以较低的 API 在真机上运行应用程序（Android OS 版本）

> ID：12604777
> 
> 赞同：0
> 
> 时间：2012-09-26T15:05:12.940
> 
> 标签：android

我有一台装有 Android 4 的 HTC Wildfire。我正在使用 eclipse（android 2.1，ADT 16，API 7）开发一个 Android 应用程序，因为我希望每个人都从 android 2.1 下载该应用程序到 4。

在 Eclipse 中运行配置（手动选项卡）时，我看不到与目标兼容的设备（2.1）

USB调试被激活。我有电话的驱动程序。问题可能是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T15:24:58.017

您还需要通过 sdk manager 安装 sdk 版本 7，但这只会用于为模拟器创建 avd，如果您在设备上进行测试/调试，则只能调试为 api level 15 (ICS)。

# ios - 什么决定了多个 UITableView 的加载顺序？

> ID：12604779
> 
> 赞同：0
> 
> 时间：2012-09-26T15:05:14.780
> 
> 标签：ios, uitableview

我有一个 UIViewController，上面有 3 个不同的 UITableViews。其中两个表取决于第三个表中的内容。当应用程序启动时，它会在加载独立表之前加载两个依赖表，所以我没有得到预期的行为。如果我继续到另一个屏幕然后回来，我会得到预期的行为，所以我知道我的代码指示行为是正确的。我认为我需要做的是指定`cellForRowAtIndexPath`首先处理哪个表。这可以在`viewDidLoad`或其他任何地方完成吗？它如何确定首先处理哪个表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T15:09:09.317

加载时，您不知道顺序。您可能会猜到，但在不同的 iOS 版本中可能会有所不同，因此不值得付出努力。

要修复它，在您的方法中，只需按您需要的顺序`viewDidLoad`调用表格视图:)`reloadData`

但是，您有表视图的加载顺序这一事实意味着您可能没有充分分离数据和 UI :) 您的表视图不应该相互依赖，它们应该依赖于变量存储在您的视图控制器中，因此可以在任何时候以任何顺序重新加载它们（在理想世界中：）

# java - “构造函数具有私有访问权限”错误消息

> ID：12604782
> 
> 赞同：6
> 
> 时间：2012-09-26T15:05:25.777
> 
> 标签：java, maven, constructor

我正在使用 Java 并遇到了一个非常奇怪的错误。我有一个非常基础的课程如下：

```
public class ClassA{
   private static Logger log = Logger.getLogger(ClassA.class.getName());
   private boolean trace;

   public ClassA(){
      trace = log.isTraceEnabled();
   }

   public void doSomething(){
      //does stuff
   }
} 
```

我可以在我当前的项目中很好地使用这个类。但是，当我构建、打包和安装到本地存储库时（使用 Maven，没有设置远程工件存储库），其他项目无法正确使用此类，因为它们无法实例化它。当我尝试类似的事情时：

```
ClassA classA = new ClassA(); 
```

我收到以下编译错误：

```
ClassA() has private access in [package].ClassA 
```

我已经在我的本地 repo 中反编译了 .jar 以确保构造函数存在并且是公共的 - 它是。我还使用了 -U 标志来强制更新并且编译继续失败。什么可能导致此错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T15:15:21.140

也许您在类路径中的某处还有其他一些 ClassA.class 文件。检查项目使用的所有无法调用构造函数的 jar：其中一个应该包含您的类的旧版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T15:13:10.427

我唯一的想法是你的包裹有问题。确保使用 package 关键字在 classA 的源文件顶部定义包。当您调用它时，请确保该文件在包含关键字的包含列表中。您可能会遇到错误，因为 ClassA 存在于某个默认包中，而这正是您实际调用的，而不是调用本地制作的 ClassA 类。您发布的代码看起来不错，并且您已经仔细检查以确保更改已在您的存储库中生效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-15T02:05:40.000

//对于那些有 Kotlin-Java 混合项目的人：

如果所述文件（带有构造函数）在 Kotlin 中并且正在 Java 中使用：

而不是 A a = new A(); //导致上述错误

使用 A.INSTANCE。…

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-02-26T09:59:59.950

我有这个错误，在类构造函数中写“私有”，而不是“公共”；

# octopress - 如何在 octopress 中创建下载链接

> ID：12604784
> 
> 赞同：4
> 
> 时间：2012-09-26T15:05:29.053
> 
> 标签：octopress

我正在为我的博客使用 Octopress，需要创建一个链接来下载文本文件。

有一个名为 include_code 的内置插件，它呈现链接但也显示文件。我只想要链接。有谁知道我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T06:38:57.160

把你的文本文件放在`source/downloads/code`

然后你可以使用 markdown 语法来显示这样的链接：

```
[link name](url for the txt file) 
```

网址将是`{your blog url}/downloads/code/{name of txt file}`

这是从插件派生的，该`include_code`插件还显示每个代码列表的下载链接。

**更新：** 要从 HTML 中执行此操作，您可以使用

```
<a href ="{your blog url}/downloads/code/{name of txt file}">Text File</a> 
```

# sql-server-2008 - 存储过程编程，在 SQL Server 问题中带有列表和循环

> ID：12604785
> 
> 赞同：1
> 
> 时间：2012-09-26T15:05:38.447
> 
> 标签：sql-server-2008, stored-procedures

我已经编写了自己的快速评论/编程文本，这远非正确，但会说明我想通过 sql 在数据库中做什么。

希望任何具有 SQL Server 编程技能的人 - 存储过程编程。可以帮助我，找出这是否可能。

我在 Oracle 的 PLSQL 方面有一点经验，所以我知道这可能是可能的。

我希望这个例子能自我解释，但如果没有，请让我对我在下面给出的 sql/c#/comment 示例进行深入解释。

```
storedProcedure(firstWeek, lastWeek)
{

  Dictornary list = new OrderdDictornary(); //Key is a week, value is a list of tests

  //Run through each week.
  for(int i = firstWeek; i<=lastWeek; i++)
  {
     var queryList = 
     {
                //All in the database
            SELECT instrumentID
            FROM Tests
            GROUP BY InstrumentID

            EXCEPT

                //All that could be found in this week
            SELECT InstrumentID
            FROM Tests
            WHERE TimeCompleted = // In 'i' week (this week)
            GROUP BY InstrumentID
     }
     list.Add(i, queryList); //Key, Values
  }

  return list;
} 
```

最后我会有一个周键列表，其中的值是按周排序的正确数据。

谢谢阅读！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-06T17:36:46.093

好的，我成功了。做了一个 While 循环，用我返回的数据类型表填充一个全局变量。

# c# - Silverlight Set Custom Tool Tip Programmatically

> ID：12604790
> 
> 赞同：0
> 
> 时间：2012-09-26T15:05:51.303
> 
> 标签：c#, wpf, silverlight, tooltip

I have created the following custom tooltip with the custom template.

```
<ToolTip x:Class="FireFly.Controls.CustomToolTip"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d"
d:DesignHeight="300" d:DesignWidth="400">
<ToolTip.Style>
    <Style TargetType="ToolTip">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ToolTip">
                    <Border>
                        <Border.Background>
                            <RadialGradientBrush>
                                <GradientStop Color="WhiteSmoke"/>
                                <GradientStop Color="#FFE0E0E0" Offset="1"/>
                            </RadialGradientBrush>
                        </Border.Background>
                        <ContentPresenter Content="{TemplateBinding Content}"
                                ContentTemplate="{TemplateBinding ContentTemplate}"
                                Margin="{TemplateBinding Padding}" 
                                VerticalAlignment="Center"/>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</ToolTip.Style> 
```

What i need to do is, from within a behvior i need to set the tooltip of the assosciated object to an instance of my custom tool tip control.

Something like

```
toolTip = new CustomToolTip() {Content = new TextBlock() {Text = text, FontSize = 12}}; 
```

However this isn't working.

Could someone possibly point me in the right direction?

Thanks

Steve

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T09:58:35.237

我使用了另一个 3rd 方工具提示提供程序。内置到.net 框架中的那个还不够好。

# gcc - Why does GCC not follow the System V AMD64 ABI here?

> ID：12604794
> 
> 赞同：2
> 
> 时间：2012-09-26T15:06:10.723
> 
> 标签：gcc, assembly, x86

> **Possible Duplicate:**
> [x86 assembly registers — Why do they work the way they do?](https://stackoverflow.com/questions/228200/x86-assembly-registers-why-do-they-work-the-way-they-do)

I've compiled the following program:

```
#include <stdio.h>

int square(int x) {
    return x * x;
}

int main() {
    int y = square(9);
    printf("%d\n", y);

    return 0;
} 
```

two times with different options on OSX with GCC 4.2.1:

`gcc foo.c -o foo_32.s -S -fverbose-asm -m32 -O1`

`gcc foo.c -o foo_64.s -S -fverbose-asm -m64 -O1`

The result for 32 bit:

```
_square:                                ## @square
## BB#0:                                ## %entry
    pushl   %ebp
    movl    %esp, %ebp
    movl    8(%ebp), %eax
    imull   %eax, %eax
    popl    %ebp
    ret 
```

And for 64-bit:

```
_square:                                ## @square
Leh_func_begin1:
## BB#0:                                ## %entry
    pushq   %rbp
Ltmp0:
    movq    %rsp, %rbp
Ltmp1:
    movl    %edi, %eax
    imull   %eax, %eax
    popq    %rbp
    ret 
```

As is evident, the 32-bit version retrieves the parameter from the stack, which is what one would expect with cdecl. The 64-bit version however uses the `EDI` register to pass the parameter.

Doesn't this violate the System V AMD64 ABI, which specifies that the `RDI, RSI, RDX, RCX, R8, R9, XMM0–7` registers should be used? Or is this only the case for true 64-bit values like long?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T16:09:38.757

`EDI`只是它的下半部分，`RDI`所以编译器将参数传入`RDI`，但参数只有 32 位长，所以它只占用了寄存器的一半。

# objective-c - trouble with an animation

> ID：12604795
> 
> 赞同：0
> 
> 时间：2012-09-26T15:06:11.503
> 
> 标签：objective-c, ios, animation

I subclassed a UIImageView. When it is double tapped, it will enlarge itself by 40%. I also have a UILabel that i place in the custom UIImageView and would like it to enlarge by 40%.

i can't seem to get it to animate correctly.

```
-(void)enlargeImage
{
    CGPoint pointCenter = self.center;
    CGPoint labelCenter = self.displayNameLabel.center;

    [UIView animateWithDuration:1
                          delay:0
                        options:(UIViewAnimationOptionAllowUserInteraction) 
                     animations:^{
                     self.frame = CGRectMake(self.frame.origin.x,
                                             self.frame.origin.y,
                                             self.frame.size.width * (1 + self.sizeMultiplier),
                                             self.frame.size.height * (1 + self.sizeMultiplier));
                         // Commented out after setting the autoresizeMask on the label
                         /*
                         self.displayNameLabel.frame = CGRectMake(self.displayNameLabel.frame.origin.x,
                                                                  self.displayNameLabel.frame.origin.y,
                                                                  self.displayNameLabel.frame.size.width * (1 + self.sizeMultiplier),
                                                                  self.displayNameLabel.frame.size.height * (1 + self.sizeMultiplier));
                         */
                         self.layer.shadowOpacity = 1;
                     }
                     completion:^(BOOL finished)
                     {
                         [self callDelegateSelect];
                     }];

    self.center = pointCenter;

    //self.displayNameLabel.center = labelCenter;
    //self.displayNameLabel.center = CGPointMake((self.frame.size.width / 2), (self.frame.size.height / 2));

    self.isSelected = TRUE;
}

-(void)shrinkImageWithZoomScale:(float)zoomScale
{
    CGPoint pointCenter = self.center;

    CGPoint labelCenter = self.displayNameLabel.center;

    [UIView animateWithDuration:1
                          delay:0
                        options:(UIViewAnimationOptionAllowUserInteraction)
                     animations:^{
                     self.frame = CGRectMake(self.frame.origin.x,
                                             self.frame.origin.y,
                                             (self.originalHeight / zoomScale),
                                             (self.originalHeight / zoomScale));

                         // Commented out after setting the autoresizeMask on the label
                         /*
                         self.displayNameLabel.frame = CGRectMake(self.displayNameLabel.frame.origin.x,
                                                                  self.displayNameLabel.frame.origin.y,
                                                                  ((self.originalLableHeight) / zoomScale),
                                                                  ((self.originalLableHeight) / zoomScale));
                         */
                         self.layer.shadowOpacity = 0;
                     }
                     completion:^(BOOL finished)
                    {
                        [self callDelegateDeselect];
                    }];

    self.center = pointCenter;
    //self.displayNameLabel.center = labelCenter;
    //self.displayNameLabel.center = CGPointMake((self.frame.size.width / 2), (self.frame.size.height / 2));

    self.isSelected = FALSE;
} 
```

the custom UIImageView animates exactly how i want it too, but the UILabel misbehaves.

unselected (UILabel's background is set to orange):

![unselected](../Images/ed85df2f5c3a61a214ad165265581f49.png)

selected:

![selected](../Images/3d9e552e58adb9f02cd80ff36a2e5118.png)

i'm guessing since the UIImageView's point reference is changing, its messing up the points i'm telling the UILabel to be?

EDIT:

the custom UIImageView's:

```
self.autoresizesSubviews = TRUE; 
```

the subview UILabel:

```
self.displayNameLabel.autoresizingMask = (UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight); 
```

this solves the sizing issue, but it does not grow from the center; when growing, it shifts right and animates left to the center. when shrinking, it shifts left and animates right to the center. I also commented out setting the label's frame in the animation code.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T15:17:02.857

如果`UILabel`是 的子视图`UIImageView`，您可以尝试设置 的自动调整大小选项，`UILabel`以便在其父视图发生时自动调整大小。

此外，请确保将 的`autoresizesSubviews`属性`UIImageView`设置为`YES`（顺便说一下，这是默认设置）。

# mysql - 选择语法 - “something = ('this' or 'that' or 'other')” 可以吗？

> ID：12604806
> 
> 赞同：2
> 
> 时间：2012-09-26T15:06:46.010
> 
> 标签：mysql, select, syntax

我正在使用 MySQL v5.5.27。我通常会这样写这个 SELECT 语句：

```
SELECT DISTINCT * 
FROM table 
WHERE something = 'this' 
    OR something = 'that' 
    OR something = 'other' 
    AND thingamajig = 'one' 
    OR thingamajig = 'two' 
```

但是这个 SELECT 语句会提供完全相同的结果吗？

```
SELECT DISTINCT * 
FROM table 
WHERE something = ('this' OR 'that' OR 'other') 
    AND thingamajig = ('one' OR 'two') 
```

我试过运行它，它*似乎*正在工作。只是想确保第二种做事方式不会以某种我想不到的方式返回错误数据。

感谢您的任何见解，帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T15:10:21.607

我建议使用括号来清楚地对搜索条件的顺序进行分组。

你的第二个`SELECT`陈述比你的第一个更清楚。

```
SELECT DISTINCT * 
FROM table 
WHERE something = ('this' OR 'that' OR 'other') 
AND thingamajig = ('one' OR 'two') 
```

请记住，`IN`当您有多个值时，您也可以使用运算符：

```
SELECT DISTINCT * 
FROM table 
WHERE something IN ('this', 'that', 'other') 
AND thingamajig IN ('one', 'two') 
```

此外，使用`IN`运算符的[执行速度](https://stackoverflow.com/questions/782915/mysql-or-vs-in-performance)比使用`OR`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-26T15:11:41.143

`AND` 在`OR`SQL[中优先。](http://dev.mysql.com/doc/refman/5.0/en/operator-precedence.html)这意味着您的第一个查询等同于：

```
SELECT DISTINCT * 
FROM table 
WHERE something = 'this' 
    OR something = 'that' 
    OR (something = 'other' AND thingamajig = 'one') 
    OR thingamajig = 'two' 
```

这显然与您的第二个查询结果不同，并且可能不是您的预期行为。

在这种情况下，您可以使用`IN`，这恰好可以解决您的问题，但总的来说，最好了解运算符优先级，以便您了解各种 AND 和 OR 组合的结果。

因此，为了清楚起见，您可以将第一个查询重写为：

```
SELECT DISTINCT *     
FROM table     
WHERE (something = 'this'         
        OR something = 'that'         
        OR something = 'other')         
    AND (thingamajig = 'one'         
        OR thingamajig = 'two') 
```

然后将其转换为 use`IN`语句对输出没有影响，而且对性能也没有影响，所以更多的是编码风格和优雅的问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T15:09:46.377

Use `IN` instead of `=`.

```
SELECT DISTINCT * 
FROM table 
WHERE something IN ('this', 'that', 'other') AND 
      thingamajig IN ('one', 'two') 
```

`IN` is similar to `OR` so performance is the same. Your second query produces syntax error. Because only `comma` is allowed in `IN` clause.

```
SELECT DISTINCT * 
FROM table 
WHERE something = ('this' OR 'that' OR 'other') 
    AND thingamajig = ('one' OR 'two') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T18:04:04.027

您也可以像这样使用 UNION：

```
SELECT 
  DISTINCT * 
FROM 
   table 
WHERE 
    something = ('this', 'that', 'other') 
UNION
SELECT 
  * 
FROM 
   table 
WHERE 
   thingamajig IN ('one', 'two') 
```

使用每个 SELECT 的标志变量可以更“识别”您的查询...

```
SELECT
  'FOO_CASE_1' as case
FROM
  DUAL
UNION
SELECT
  'FOO_CASE_2' as case
FROM
  DUAL
ORDER BY
  1 
```

这种方式让你的调试更容易；）

# html - 如何在避免 GUID 的同时防止我的 HTML 被利用？

> ID：12604810
> 
> 赞同：6
> 
> 时间：2012-09-26T15:06:52.513
> 
> 标签：html, asp.net-mvc, security

我最近继承了一个 ASP.NET MVC 4 代码库。我注意到的一个问题是在 url 以及 html 表单提交中使用了一些数据库 ID（整数）。当前状态的代码可通过 URL 修补和创建具有不同数字的自定义 HTML 帖子来利用。

现在，虽然我可以通过使用会话状态或其他身份验证检查轻松解决 URL 问题，但我不太确定嵌入到站点吐出的 HTML 中的数据库 ID（即我给他们一个下拉列表来填充）。当 ID 在帖子中返回时，我如何确定我将它们作为有效选项放在那里？就解决这个问题而言，什么被认为是“最佳实践”？

虽然我很感激我可以“引导它”，但我很犹豫这样做，因为我发现在调试数据库时使用它们很痛苦。

我在这里有选择吗？我必须 GUID 以防止轻易猜测 id，还是有某种 DRY 机制可以用来在 id 返回站点时验证它们的使用？

更新：一位评论者询问了我期待的漏洞。假设我吐出了一个 HTML 表单，其中包含一个可以从中导入“宝藏”的所有位置的下拉列表。用户拥有的位置的 id 是 1,2 和 3，这些在 HTML 中提供。但是用户检查了 html，对其进行了修改，并决定将一个 POST 与 4 选择的 id 放在一起。4 不是他的位置，是别人的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-26T15:13:26.477

根据用户可以修改的 ID 验证传递的 ID。

这可能看起来很乏味，但这确实是确保用户可以访问他们尝试修改的内容的唯一方法。使用未经验证的 GUID 是隐蔽的安全性：确定猜测它们很困难，但如果有足够的资源，您可能会猜测它们。

在对发布的数据执行任何其他操作之前，您可以在控制器顶部执行此操作。如果存在违规，只需抛出异常并让您的全局异常处理程序处理它；您不需要以漂亮的方式处理它，因为您可以安全地假设用户正在以不受支持的方式篡改数据。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-26T15:20:08.797

您描述的问题被称为“不安全的直接对象引用”，[OWASP](https://www.owasp.org)小组推荐了两种策略来处理这个问题：

1.  使用基于会话的间接对象引用，以及
2.  验证对对象引用的所有访问。

建议 #1 的一个示例是，您不使用下拉选项 1、2 和 3，而是为每个选项分配一个 GUID，该 GUID 与用户会话中的地图中的原始 ID 相关联。当您从该用户处获得 POST 时，您会检查给定 ID 应该绑定到哪个对象。OWASP 的 ESAPI 有一些库可以用各种语言帮助解决这个问题。

但在许多情况下，建议 #1 实际上适得其反。例如，在许多情况下，您希望拥有可以从一个用户复制/粘贴到另一个用户的 URL。过程#2 通常被视为解决此问题的最简单方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T15:21:24.167

您正在描述带有不安全 ID的[损坏的访问控制。](https://www.owasp.org/index.php/Broken_Access_Control)一旦您确定了威胁并确定了哪些 Id 归某些用户所有，请确保对该服务器端进行检查。

# linux - 汇编语言中的分段错误

> ID：12604811
> 
> 赞同：6
> 
> 时间：2012-09-26T15:06:54.473
> 
> 标签：linux, assembly, x86

我正在学习 AT&T x86 汇编语言。我正在尝试编写一个采用整数 n 的汇编程序，然后返回结果 (n/2+n/3+n/4)。这是我所做的：

```
.text
.global _start
_start:
    pushl $24
    call profit
    movl %eax, %ebx
    movl $1, %eax
    int $0x80

profit:
    popl %ebx
    popl %eax
    mov $0, %esi
    movl $4, %ebp
    div %ebp
    addl %eax, %esi
    movl %ecx, %eax
    movl $3, %ebp
    div %ebp
    addl %eax, %esi
    movl %ecx, %eax
    movl $2, %ebp
    div %ebp
    addl %eax, %esi
    movl %esi, %eax
    cmpl %ecx, %esi
    jg end
    pushl %ebx
    ret

end:
    mov %ecx, %eax
    ret 
```

问题是我遇到了分段错误。哪里有问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-26T15:17:19.547

我认为代码在这里失败：

```
_start:
    pushl $24
    call profit
    movl %eax, %ebx
    movl $1, %eax
    int $0x80

profit:
    popl %ebx
    popl %eax 
```

所以，你`push $24`（4 个字节）然后`call profit`，它推动`eip`并跳转到`profit`. 然后将into的值和`eip`into`ebx`的值弹出。`$24``eax`

然后，最后，如果`jg end`分支到`end:`，那么堆栈将不会保存有效的返回地址并且`ret`会失败。你可能也需要`pushl %ebx`那里。

```
 cmpl %ecx, %esi
    jg end
    pushl %ebx
    ret

end:
    mov %ecx, %eax
    ; `pushl %ebx` is needed here!
    ret 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T15:17:02.093

1.  您`ecx`在没有显式初始化的情况下使用它（我不确定 Linux 是否会保证`ecx`进程启动时的状态 - 如果不是按照规则，看起来就像`0`在实践中一样）
2.  当程序`jg end`接近程序结束时进行跳转时，返回地址不再在堆栈上，因此`ret`会将控制权转移到某个垃圾地址。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T15:33:07.273

您似乎没有正确执行函数调用。您需要阅读并理解 x86 ABI（[32 位](http://Fwww.sco.com/developers/devspecs/abi386-4.pdf)、[64 位](http://www.x86-64.org/documentation/abi.pdf)），尤其是“调用约定”部分。

此外，这不是您的直接问题，而是：不要编写`_start`，`main`就像这是一个 C 程序一样编写。当你开始做一些更复杂的事情时，你会希望 C 库可用，这意味着你必须让它自己初始化。相关地，*不要*进行自己的系统调用；调用 C 库中的包装器。这使您免受内核接口中低级更改的影响，确保其`errno`可用，等等。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-26T16:21:31.330

您的问题是您将返回地址从堆栈中弹出，并且当您分支到结束时您不会恢复它。一个快速的解决方法是在`push %ebx`那里添加。

您应该做的是修改您的过程，以便它正确使用调用约定。在 Linux 中，调用者函数应该从堆栈中清除参数，因此您的过程应该将它们留在原处。

而不是这样做来获取参数，然后稍后恢复返回地址

```
popl %ebx
popl %eax 
```

您应该这样做并将返回地址和参数留在原处

```
movl 4(%esp), %eax 
```

并摆脱将返回地址推回堆栈的代码。然后你应该添加

```
subl $4, %esp 
```

在调用过程后从堆栈中删除参数。如果您希望能够从其他语言调用您的汇编过程，那么正确遵循此约定很重要。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-26T15:17:37.383

在我看来，你在调用利润之前有一个 pushl，然后利润做的第一件事就是执行两个 popl 指令。我希望这会弹出你压入堆栈的值以及返回代码，这样你的 ret 就不起作用了。

push 和 pop 的次数应该相同。

call 将返回地址压入堆栈。

# jquery - AJAX 从 twitter 搜索中读取 JSON 数据不起作用

> ID：12604817
> 
> 赞同：1
> 
> 时间：2012-09-26T15:07:18.703
> 
> 标签：jquery, json, search, twitter

我使用 jquery 从 twitter 检索搜索结果，但它不起作用，你能解决我的代码中的错误吗？这是表单搜索：

```
<label>Enter keyword: </label><input type="text" id="keyword" name="keyword" size="50" autocomplete="off"/>
    <input type="button" name="btnsearch" id="btnsearch" value=" Search " /> 
```

这是jQuery代码：

```
$(document).ready(
        function(){
            $("#keyword").focus();
            $("#btnsearch").click(function(){
                var keyword = $("#keyword").val();                          
                if(keyword == null || keyword == "") return;
                $("#results").html("<img src='loading.gif'/>");                 
                $.ajax({
                    url:'http://search.twitter.com/search.json?q='+keyword+'&rpp=50',
                    dataType:'json',
                    success:function(json){
                        $("#results").remove();
                        alert("Successfull");
                    },  
                    error:function(){
                        alert("cant search");
                    }
                });
            });
        }
    ); 
```

我只是测试它是否有效，当我按下搜索按钮时，它会提示“无法搜索”！

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T15:24:05.990

这是因为您没有使用**dataType: 'jsonp';** 这是访问跨域数据时要添加的代码

下面是工作代码**（我试过了）**

```
$(document).ready(         
function(){             
$("#keyword").focus();            
$("#btnsearch").click(function(){                 
var keyword = $("#keyword").val();                                           
if(keyword == null || keyword == "") return;                 
$("#results").html("<img src='loading.gif'/>");                                  
    $.ajax({ 
    type: 'GET',
    dataType: 'jsonp',
    contentType: "application/json; charset=utf-8",
    url:'http://search.twitter.com/search.json',
    data: 'q='+keyword+'&rpp=50',
    success:function(json){                         
    $("#results").remove();
    alert("Successfull");                     
    },
error:function(){                         
alert("cant search");                     
}                 
});             
});         
}     
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T15:23:57.283

演示：http: [//jsfiddle.net/cAVsS/1/](http://jsfiddle.net/cAVsS/1/)

回调应该是 JSONP： [https ://dev.twitter.com/docs/api/1/get/search](https://dev.twitter.com/docs/api/1/get/search)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T15:17:56.537

您似乎正在尝试从您自己的网页访问 Twitter API。不幸的是，出于安全原因，浏览器不允许这种访问。

您无法使用 Ajax/JSON 访问另一台服务器上的 API。

例如，假设您的网页托管在 www.myserver.com。仅当 API 来自 www.myserver.com 时，您才能访问它们。您无法访问来自 twitter 的 API。

这称为“同源策略”。

解决方案是在您的服务器上使用 PHP/Python/Perl 等服务器端语言创建代理。只需谷歌“ajax代理”即可获得一些解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T15:23:17.657

使用以下 jQuery 代码。它在生产中对我有用

```
$.getJSON('http://search.twitter.com/search.json?q=' + keyword + '_de&callback=?', function(json) {
    alert(JSON.stringify(json));
}); 
```

您必须指定*&callback=?* 参数以让 jQuery 使用 JSON。也许只是添加*&callback=?* 将对您的示例有所帮助，但以上是我的做法。

# html - 有没有办法在 HTML 电子邮件中构造 HTML/CSS，如果图像 X 没有加载，文本 Y 会出现？

> ID：12604818
> 
> 赞同：2
> 
> 时间：2012-09-26T15:07:20.730
> 
> 标签：html, image, html-email

我正在寻找比`<img>`标签的 alt="Newsletter Heading text" 属性更复杂的东西。

因此，如果 Masthead.png 图像由于某种原因无法加载，我希望显示文本，例如 Font: 60px Helvetica Neue Black, Helvetica, ..., Sans Serif text-align: center 出现在表格中间单元格是我的标头，而不仅仅是右上角一些默认小字体的替代文本。我的一个想法是将图像放在文本显示的顶部，但我不知道 z-depth 是否可以在电子邮件 HTML（？4）中使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T15:11:38.687

**更新演示**：http: [//jsfiddle.net/SCfsD/1/](http://jsfiddle.net/SCfsD/1/)

* * *

您可以为标签指定样式，例如`font-family`，`font-size`等等，`<img>`如果它曾经显示，它们将应用于替代文本。您可以使用：

```
<img src="booya.png" alt="Hello World" style="font-family: Arial; font-size: 29px; font-weight: bold"> 
```

**演示**：http: [//jsfiddle.net/9r2us/](http://jsfiddle.net/9r2us/)

*注意*：由于您的用例涉及电子邮件，因此您应该内联样式。我想你已经知道了。

# git - 如何在跳过特定提交时变基？

> ID：12604824
> 
> 赞同：33
> 
> 时间：2012-09-26T15:07:44.320
> 
> 标签：git, rebase, git-rebase, git-interactive-rebase

有没有办法在跳过另一个分支上的特定（冲突）提交时将一个分支重新定位到另一个分支上？

例如，我想变基为`mybranch`，`master`但 master 包含一个与 master 中的提交冲突的提交，所以我更喜欢完全撤消该提交。

```
-o-o-o-o-o-x-o-o-o-o master
     |
     o-o-o-o mybranch 
```

x 标记冲突的提交。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-09-26T15:11:10.280

使用交互式变基：

```
git rebase -i master 
```

将打开一个编辑器，您将拥有一个提交列表，如下所示：

```
pick b8f7c25 Fix 1
pick 273b0bb Fix 2
pick 6aaea1b Fix 3 
```

只需删除您要跳过的提交。在将您的分支重新定位到 master 时，它将被省略。

**PS**如果您看不到编辑器，请参考此问题的解决方案：[如何设置编辑器以在 Windows 上使用 Git？](https://stackoverflow.com/q/10564/1065190)

# mpmovieplayercontroller - 在 MPMoviePlayerController 中进入全屏调用 viewWillDisappear 和 viewDidDisappear

> ID：12604825
> 
> 赞同：12
> 
> 时间：2012-09-26T15:07:49.570
> 
> 标签：mpmovieplayercontroller, ios6

要在我的应用程序中播放视频，我将其设置`MPMoviePlayerController`并添加到子视图中。用户可以使用捏合手势切换到全屏模式。

在这个`viewController`（包含电影播放器​​视图）中，我将`viewWillDisappear`设置对象设置为 nil。

但是，在 iOS 6 中，当激活全屏模式时`MPMoviePlayerController`，包含 Movie Player View 的视图控制器中会调用方法`viewWillDisappear`和`viewDidDisappear`.

在 iOS5 中，这些方法没有被调用。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-26T19:25:23.160

我也遇到了这个问题，这让我很头疼。在修复错误之前，我的临时解决方案是在和/或中检查玩家的`fullscreen`布尔值。如果它返回，则电影正在进入全屏模式，您应该避免做任何可能打断它的事情。`viewWillDisappear:``viewDidDisappear:``YES`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T15:07:49.570

对于每个人都注意到这一点并遇到问题，我在社区 Open Radar 中找到了这份报告：http: [//openradar.appspot.com/12327997](http://openradar.appspot.com/12327997)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T00:50:12.523

我不确定这是一个问题，但如果有人对本文所述的问题有疑问，即有人使用 viewController（包含电影播放器​​视图），我找到了解决方案：

我将视图控制器与电影播放器​​控制器一起使用，然后将此视图控制器呈现为子视图。我刚刚摆脱它并直接使用 MoviePlayer.view 作为子视图，它工作得很好。

iOS 5 不是问题，但现在是。修复它并享受！

# php - 在php中比较时间戳和日期

> ID：12604828
> 
> 赞同：0
> 
> 时间：2012-09-26T15:07:54.043
> 
> 标签：php

我有这个代码，它允许我检索所有关于该信息的时间戳等于另一个日期的信息。

这是代码：

```
$information="SELECT * FROM scheda_anagrafica WHERE FROM_UNIXTIME('time_inserted','%d-%m-%Y') = '" . $giorno_selcted. "'
 "; 
$result1 = mysql_query($information) or die (mysql_error());
while( $row = mysql_fetch_array($result1)) {

    echo $row['information1'];

} 
```

giorno_selected 打印类似：25-09-2012 我在这里做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T15:22:56.940

首先，您不应该在 where 子句中的运算符左侧使用 mysql 函数。这样 mysql 需要读取磁盘上的完整表来计算要比较的值，而不是针对速度和资源使用（IO、cpu）优化查询。

根据您的问题和评论，我了解您正在数据库中查询与您的`$giorno_selected`代表中的字符串具有相同日期的行。因此，您需要在特定日期找到时间戳在 0:00 到 23:59 之间的所有行：

```
$giorno_timestamp_start = date_create_from_format('d-m-Y', $giorno_selected)->getTimestamp();
$giorno_timestamp_end = $giorno_timestamp_start + 86399; //add almost all seconds per day onto the start timestamp

$information="SELECT * FROM scheda_anagrafica WHERE time_inserted BETWEEN " . $giorno_timestamp_start. " AND ". $giorno_timestamp_end; 
$result1 = mysql_query($information) or die (mysql_error());
while( $row = mysql_fetch_array($result1)) {

    echo $row['information1'];

} 
```

如果您的`time_inserted`列是类型`integer`并且包含 unix_timestampds，则此方法有效。如果它是类型`datetime`，或者`timestamp`您需要像这样修改查询：

```
$information="SELECT * FROM scheda_anagrafica WHERE time_inserted BETWEEN FROM_UNIXTIME(" . $giorno_timestamp_start. ") AND FROM_UNIXTIME(". $giorno_timestamp_end .")"; 
```

# maven - Maven + Jaxb 项目 + IntellijIdea 入门

> ID：12604831
> 
> 赞同：1
> 
> 时间：2012-09-26T15:08:07.150
> 
> 标签：maven, jaxb, intellij-idea, maven-jaxb2-plugin, project-settings

我对 IntellijIdea 完全陌生，我正在寻找一些分步过程来设置一个基本项目。

我的项目依赖于 Maven + Jaxb 类，所以我需要一个 Maven 项目，这样当我编译这个项目时，JAXB 对象是由 Maven 插件生成的。现在我开始这样

1.  我创建了一个空白项目说 MaJa 项目
2.  向其中添加了 Maven 模块
3.  在 POM.XML 中添加了以下设置

```
 <?xml version="1.0" encoding="UTF-8"?>
 <project xmlns="http://maven.apache.org/POM/4.0.0"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:schemaLocation="http://maven.apache.org/POM/4.0.0
          http://maven.apache.org/xsd/maven-4.0.0.xsd">

    <modelVersion>4.0.0</modelVersion>

    <groupId>MaJa</groupId>
    <artifactId>MaJa</artifactId>
    <version>1.0</version>

    <dependencies>
        <dependency>
            <groupId>javax.xml.bind</groupId>
            <artifactId>jaxb-api</artifactId>
        </dependency>
        <dependency>
            <groupId>com.sun.xml.bind</groupId>
            <artifactId>jaxb-impl</artifactId>
            <version>2.1</version>
        </dependency>
    </dependencies>

    <build>
        <plugins>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>jaxb2-maven-plugin</artifactId>
                <executions>
                    <execution>
                        <goals>
                            <goal>xjc</goal>
                        </goals>
                    </execution>
                </executions>
                <configuration>
                    <schemaDirectory>${basedir}/src/main/resource/api/MaJa</schemaDirectory>
                    <packageName>com.rimt.shopping.api.web.ws.v1.model</packageName>
                    <outputDirectory>${build.directory}</outputDirectory>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project> 
```

1.  首先，设置是否正确？

2.  我尝试从 Project > Right Click Menu 中单击 Make/Compile 'MaJa'，但它没有做任何事情。

我会期待你的回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T21:10:38.683

您必须单击不`Make/Compile 'MaJa'`
1) 您必须在此处选择 maven Build Lifecycle 阶段之一（不少于`Compile`）。
2）在设置中设置maven的路径。
3) 为`jaxb-api`工件 添加版本

![在此处输入图像描述](../Images/bfa6c9992a45f7d34ee55f2690440af1.png)

我添加`shiporder.xsd`到目录`/src/main/resource/api/MaJa`并且java类生成得很好

```
[jaxb2:xjc]
Generating source...
parsing a schema...
compiling a schema...
com\rim\shopping\api\web\ws\v1\model\ObjectFactory.java
com\rim\shopping\api\web\ws\v1\model\Shiporder.java 
```

# backbone.js - Backbone.js 中的两种方式数据绑定

> ID：12604834
> 
> 赞同：13
> 
> 时间：2012-09-26T15:08:13.080
> 
> 标签：backbone.js

我正在开发一个 jQuery Backbone.js Web 应用程序。
正如在 Adob​​e Flex 中一样，我在我的应用程序中为输入元素/小部件实现了 2 路数据绑定。因此，每个输入元素/小部件都知道其对应的模型和模型属性名称。
当用户点击 tab 或 enter 时，字段值会自动提供给模型。

```
container.model.set(this.attrName, this.value, options); // command 1 
```

另一方面，当模型从后端更新时，输入元素/小部件的视图应该会自动更新：

```
container.model.bind("change:"+ this.attrName, this.updateView, this); // command 2 
```

问题是：
当用户点击回车并自动更新模型时，也会触发“change：abc”并调用this.updateView，而不仅仅是当新模型来自后端时。

到目前为止，我的解决方案是在用户按下 enter（命令 1）时设置模型值时传递一个选项“source：gui”，并在我的 updateView 方法中检查它。但我不再满足于这个解决方案。

有人有更好的解决方案吗？非常感谢
沃尔夫冈

Update:
When the option silent: true is passed, the validate method of the model is not called, so that does not help. 请参阅 Backbone.js 源 0.9.2：

```
_validate: function(attrs, options) {
  if (options.silent || !this.validate) return true; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-26T15:29:02.583

从 Backbone.js 网站：

> 除非将 {silent: true} 作为选项传递，否则将触发“更改”事件

```
options.silent = true;
container.model.set(this.attrName, this.value, options); 
```

**更新：** 您为您的问题添加了一条新评论，所以我只是补充了我的答案以修复您提到的新用例（验证流程）：

```
var ExtendedModel = Backbone.Model.extend({
    uiChange : false,
    uiSet: function (attributes, options, optional) {
        this.uiChange = true;
        this.set(attributes, options, optional);
        this.uiChange = false;
    }
});

var MyModel = ExtendedModel.extend({
});

var model = new MyModel();
model.on('change:name', function(){
  console.log('this.uiChange: ', this.uiChange);
});

//simulates the server side set
model.set({name:'hello'});

//simulates the ui side set you must use it to set from UI
model.uiSet({name:'hello2'}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-09-05T12:31:37.860

双向绑定只是意味着：

1.  当模型中的属性更新时，UI 也会更新。
2.  当 UI 元素更新时，更改会传播回模型。

Backbone 没有 2 选项的“烘焙”实现（尽管您当然可以使用事件侦听器来实现）

在 Backbone 中，我们可以通过将视图的“渲染”方法绑定到其模型的“更改”事件来轻松实现选项 1。要实现选项 2，您还需要向输入元素添加更改侦听器，并在处理程序中调用 model.set。

检查 (jsfiddle.net/sunnysm/Xm5eH/16) jsfiddle 示例，在 Backbone 中设置了双向绑定。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-07T21:45:12.300

`Backbone.ModelBinder`插件非常适合在您的主干视图和模型之间提供双向数据绑定。我写了一篇博客文章，介绍了这个插件的一些基本功能这里是直接链接： http: [//niki4810.github.io/blog/2013/03/02/new-post/](http://niki4810.github.io/blog/2013/03/02/new-post/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-16T21:29:50.923

我想看看与 Backbone.js 进行双向绑定的基本代码是什么。这就是我想出的：

```
var TwoWayBoundView = Backbone.View.extend({
    initialize: function(options) {
        this.options = _.defaults(options || {}, this.options);
        _.bindAll(this, "render");
        this.model.on("change", this.render, this);
        this.render();
    },

    events: {
        "change input,textarea,select": "update"
    },

    // input updated
    update: function(e) {
        this.model.set(e.currentTarget.id, $(e.currentTarget).val());
    },

    // model updated...re-render
    render: function(e) {
        if (e){
            var id = Object.keys(e.changed)[0];
            $('#'+id).val(e.changed[id]);
        }
        else{
            _.each(this.model.attributes, function(value, key){
                $('#'+key).val(value);
            });
        }
    }
}); 
```

以及用法：

```
var model = new Backbone.Model({ prop1: "uno 1", prop2: "dos 2", prop3: "3" });
var view = new TwoWayBoundView({ 
    el: "#myContainer",
    model: model
}); 
```

这是一个 jsbin：http://jsbin.com/guvusal/edit?html,js,console, [output](http://jsbin.com/guvusal/edit?html,js,console,output)

我使用了执行此操作的库，例如 Epoxy.js（仅缩小了 11k）。除此之外，还有其他几个，我会在使用上面的概念证明代码之前很久就推荐它们。

我会对上面的 TwoWayBoundView 类可能带来的潜在缺陷和改进感兴趣（但除了基本的双向绑定之外，别***无所求！即我******不是***在寻找要添加的更多功能。）

# vb.net - 为什么调试我的项目时我的表单在 Visual Studio 2010 中不显示？

> ID：12604837
> 
> 赞同：1
> 
> 时间：2012-09-26T15:08:31.503
> 
> 标签：vb.net, winforms, visual-studio-2010

我正在使用 Visual Studio 2010 Professional。

我有一个表格（及其关联的 vb 文件）和另一个单独的 vb 文件。当我去编译和调试我的代码时，我的构建成功，并且表单显示，但是“球”没有移动。

我的创业班：

```
Public Class Bouncer

    Private bouncingBall As Ball

    Private Sub CST8333_Lab3_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load
        bouncingBall = New Ball(Me)
        'Me.Controls.Add(Ball)
    End Sub

    Private Sub Timer_Tick(sender As System.Object, e As System.EventArgs) Handles Timer.Tick
        bouncingBall.MoveBall()
    End Sub
End Class 
```

我的另一个单独的班级：

```
Public Class Ball

    Private ballX As Integer
    Private ballY As Integer
    Private ballMovementX As Integer
    Private ballMovementY As Integer
    Private _bouncer As Bouncer

    Sub New(bouncer As Bouncer)
        _bouncer = bouncer
        ballX = 50
        ballY = 50
        ballMovementX = 5
        ballMovementY = 5
    End Sub

    Public Function GetBallX() As Integer
        Return ballX
    End Function

    Public Sub MoveBall()
        If (ballX >= _bouncer.Width) Then
            ballMovementX = -ballMovementX
        ElseIf (ballX <= 0) Then
            ballMovementX = -ballMovementX
        End If
        If (ballY >= _bouncer.Height) Then
            ballMovementY = -ballMovementY
        ElseIf (ballY <= 0) Then
            ballMovementY = -ballMovementY
        End If
        ballX += ballMovementX
        ballY += ballMovementY
    End Sub
End Class 
```

我的表格显示，但我的“球”没有移动。我想要的是我的 Ball 类中的变量和子例程来控制我的标签“球”的运动。任何帮助，建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T15:12:56.417

您可能应该使用计时器而不是`While True`循环。`While True`循环没有给 GUI 更新屏幕的机会。

假设`Ball`是一个控件，它需要被添加到表单的集合中：

```
bouncingBall = New Ball(Me)
Me.Controls.Add(bouncingBall)
bouncingBall.MoveBall() 
```

目前尚不清楚您的`Ball`班级在做什么。看起来它只是更新内部变量而不是实际移动控件，这就是我怀疑你正在尝试完成的事情。

# jquery - HTML 加载消息

> ID：12604838
> 
> 赞同：0
> 
> 时间：2012-09-26T15:08:31.907
> 
> 标签：jquery

我有以下脚本，它可以很好地显示加载 ajax 内容的时间：

```
$("#divLoading").ajaxStart(function () {
    $('#divLoading').show();
});

$("#divLoading").ajaxComplete(function () {
    $('#divLoading').hide();
}); 
```

但是，这似乎是从点击事件后的延迟开始到内容显示在屏幕上之前结束的，即以下内容被夸大了，只是为了解释问题：

如果我单击执行 ajaxy 的按钮，加载 div 会在单击按钮后 5 秒出现。div 在屏幕上停留 10 秒，div 消失，并且在 div 消失 5 秒后发生内容更改。

知道为什么会发生这种情况，以及如何在任何点击事件发生后立即显示消息，并且仅在 html 完成在屏幕上加载时消失？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T15:16:27.123

发生这种情况是因为此函数在实际 ajax 调用期间执行，而不是在您的 click 处理程序和回调之前和之后执行，这发生在 ajax 调用的任一端。

如果您查看您的代码，您可能在 ajax 调用之前在按钮的 click 事件中为 ajax 调用做准备，然后在回调中 ajax 调用完成，因此消息被隐藏，但您仍然有代码要完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T15:30:10.473

我不是 JQuery 的专业人士，但是当我需要在我的项目中完成 AJAX 调用后执行某些操作时，我的情况与您的情况类似，而且它的工作方式似乎是这样的：

```
$(document).ajaxStop(function() {
            my_jquery_stuff();
}); 
```

# javascript - 以编程方式创建滚动 html 表格

> ID：12604840
> 
> 赞同：1
> 
> 时间：2012-09-26T15:08:58.390
> 
> 标签：javascript, css, html-table

我对 Web 开发相当陌生，并且一直在搞乱我想添加到我正在处理的网页中的功能。我正在尝试实现一个滚动表，我在其中构建它的行、单元格，并以特定格式以编程方式填充其内容。我让它滚动，已经构建了行/单元格，并且现在已经用虚拟内容填充了它，但我需要一些帮助来**格式化**它以满足我的需要。

**我需要按以下方式对其进行格式化：**

总体而言，这将是一个 9 宽 x 60 长的表格，其中第一列是所有标题，行中接下来的 8 个单元格将是数据。这种模式将持续 60 行。

我希望第一列（最左边的列）是`<th>`内存地址的所有表头，以十六进制 8 的倍数计数（即 00、08、10、18、20，...）一直到 300 基数 16或（768 十进制）。我还想将表格中 20 行的每个块与跨越所有 9 个单元格的附加行分开，将其分成块 1、块 2 和块 3 部分（这会将表格的尺寸更改为9x63)。

**这是我到目前为止所拥有的：**

**HTML：设置 div 和 table**

```
<div id="scrollingDiv">
    <table id="contentTable" border="1">
        <!-- Fill table programmatically -->
    </table>
</div> 
```

**CSS：将div设置为滚动**

```
#scrollingDiv
{
    border: 2px groove black;
    height: 350px;
    width: 350px;
    background: #787878;
    overflow: auto;
}

#contentTable
{
    height: 350px;
    width: 350px;
} 
```

**Javascript：构建表格并用虚拟数据填充它**

```
function buildTable()
{
    var memoryTable =document.getElementById("contentTable");

    var rows = new Array();
    var cells = new Array();

    for( var i = 0; i < 60; i++ )
    {
        rows[i]  = memoryTable.insertRow(i);

        for( var x = 0; x < 9; x++ )
        {
            if( x === 0) // Create header cell with memory address
            {
                cells[rows.length - 1] = rows[rows.length - 1].insertCell(x);
                cells[rows.length - 1].innerHTML = "00".bold(); // how to center this also
            }
            else // Create 8 content cells
            {
                cells[rows.length - 1] = rows[rows.length - 1].insertCell(x);
                cells[rows.length - 1].innerHTML = "\xa0";
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T15:22:59.577

1) 不幸的是，不可能添加一个过`th`孔`insertCell()`——你需要使用普通的`createElement/appendChild`。

2）对于您的样式问题：您不需要插入额外的行，您可以相应地设置每 20 行的样式 - 根据您所考虑的浏览器支持，您有两种可能性：

-> 简单但不那么跨浏览器兼容的方式：

```
tr:nth-of-type(20n){
    /*styling example, change at will*/
    border-bottom:5px solid silver;
} 
```

-> 或将循环中的类应用于每 20 行并相应地设置类的样式

编辑：**[查看您修改后的示例](http://jsfiddle.net/poikl/uTY6n/)**

旁注：尽可能避免使用[`new`构造函数。](https://stackoverflow.com/questions/5224295/javascript-the-good-parts-how-to-not-use-new-at-all)

# sql-server - Sql Server 2012 cal 许可模型

> ID：12604843
> 
> 赞同：2
> 
> 时间：2012-09-26T15:09:02.483
> 
> 标签：sql-server, sql-server-2012, licensing, cal

我目前正在评估是否获得 MSSQL 2012 标准版许可证，但这是我的问题：

我将有大约 100 个不同的用户通过同一服务器 (RDP) 上的同一应用程序登录，因此服务器将看到 100 个具有相同登录名和主机 + 1 个管理用户的连接，这些用户可能位于不同的设备上。

硬件不是新的，所以我们将使用 2 核至强

因为 sql server 将获得 2 个不同的登录，我应该得到：

```
(898) Server licence +<br />
(418) 2 CAL user licences <br />
(1316) Total <br />

is this right?, or the server will see:
(898) Server licence +<br />
(209) 1 CAL device licences <br />
(209) 1 CAL user licences <br />
(1316) Total <br />

or:
(898) Server licence +<br />
(209) 1 CAL device licences <br />
(20,900) 100 CAL user licences <br />
(22,207) Total <br /> 
```

这太夸张了，我最好选择核心许可模型并获得：`<br />` （7,172）一个 4 核心许可模型

你们能否指出有关我应该使用的许可证模型的更多信息？提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T19:37:04.110

你可以从这里开始官方的说法：http: [//www.microsoft.com/licensing/about-licensing/client-access-license.aspx](http://www.microsoft.com/licensing/about-licensing/client-access-license.aspx)

您也可以在这里查看用户解释的答案： [https ://serverfault.com/questions/120276/how-are-sql-server-cals-counted](https://serverfault.com/questions/120276/how-are-sql-server-cals-counted)

对于您的情况，您需要 2 核包中的 CORE 许可证，或**服务器 + 100 个用户 CAL**。您将需要 100 多个设备 CAL，因为如果您的工作人员从多个设备连接到 RDP 服务器，则每个 DISTINCT 终端连接设备将需要 1 个 CAL。

# c# - Opc.Da.Browse 儿童？

> ID：12604846
> 
> 赞同：0
> 
> 时间：2012-09-26T15:09:15.503
> 
> 标签：c#, vb.net, opc

我有这个清单来浏览我的 Opc.Da 服务器的根元素：

```
Dim clone As Opc.Da.Server = m_server 
Dim id As New Opc.ItemIdentifier
Dim filters As New Opc.Da.BrowseFilters
filters.BrowseFilter = Opc.Da.browseFilter.all
Dim pos As Opc.Da.BrowsePosition
Dim elements() As Opc.Da.BrowseElement = clone.Browse(id, filters, pos) 
```

但是如何浏览每个元素的子元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T12:37:44.960

我没有做过任何vb，但通常有一种方法可以“ChangeBrowsePosition”或“MoveUp”或“MoveDown”从一个节点到另一个节点。进入新节点后，获取该节点的元素。

# selenium - Why is my Selenium click() causing a timeout?

> ID：12604848
> 
> 赞同：1
> 
> 时间：2012-09-26T15:09:22.140
> 
> 标签：selenium, timeout, click, webdriver

One of my Selenium tests issues a click on a button to create a new user:

```
seleniumDriver.findElement(By.xpath("//input[@value='Save']")).click(); 
```

However, the validation fails (it is meant to fail!) so that a `<div>` is displayed to inform the user to correct some input fields. This works very well manually, but the automated test aborts with the following error message:

```
com.thoughtworks.selenium.SeleniumException: Timed out waiting for action to finish
    at org.openqa.selenium.internal.seleniumemulation.Timer.run(Timer.java:44)
    at org.openqa.selenium.WebDriverCommandProcessor.execute(WebDriverCommandProcessor.java:145)
    at org.openqa.selenium.WebDriverCommandProcessor.doCommand(WebDriverCommandProcessor.java:75)
    at com.thoughtworks.selenium.DefaultSelenium.click(DefaultSelenium.java:193)
    at com.holcim.logon.admin.web.admin.UserTest.createUser(UserTest.java:354 
```

How is it possible that a click() ends up in a timeout? And how could I possible fix this?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-11T21:35:50.400

我有同样的问题，这是由于加载页面没有足够的延迟

您可以使用以下命令增加加载页面的超时延迟

driver.Manage().Timeouts().SetPageLoadTimeout(new TimeSpan(0,0,0,0,timespan));

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T10:44:43.910

您的问题的可能解决方案：1）而不是 xPath 找到所需元素的 css 选择器。它会是这样的：

```
String cssSelector = "input[value='Save']"; 
```

但在您在firepath中使用它之前，请先验证ffox中所需元素的firebug插件位置是否正确。

![火路验证](../Images/ce886e5bd161f76b59b0c2e1f89f40d6.png)

在我们获得所需的 css 选择器后，我们可以使用始终有效的方法。使用将在所需元素上执行单击的 js 函数。

```
public void jsClick(String cssSelector){
JavascriptExecutor js = (JavascriptExecutor) driver;
        StringBuilder stringBuilder = new StringBuilder();
        stringBuilder.append("var x = $(\'"+cssSelector+"\');");
        stringBuilder.append("x.click();");
        js.executeScript(stringBuilder.toString());
} 
```

希望这对你有用。

# sql-server - Is it possible to escape a single quote in SQL Server without another single quote?

> ID：12604849
> 
> 赞同：0
> 
> 时间：2012-09-26T15:09:37.600
> 
> 标签：sql-server, asp-classic

We have some classic ASP pages that connect to a MS SQL server database. To prevent SQL injection, we just replace all single quotes with a double single quote. This seems to be the method prescribed here: [http://www.4guysfromrolla.com/webtech/061902-1.shtml](http://www.4guysfromrolla.com/webtech/061902-1.shtml)

This still feels dangerous to me. Is there any way to escape the single quote with any other character, potentially opening up the SQL Injection?

EDIT:) We currently have a lot of old code that uses this single quote to double single quote replacement. If that is sufficient to prevent SQL injection, then we won't change anything. My real question is if this method insecure.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-26T15:17:47.630

使用参数化查询。如果您不使用连接来将您的 SQL 语句组合在一起，那么单引号会为您处理好。例子：

```
Set objCommand = CreateObject("ADODB.Command")
With objCommand
.CommandText = "INSERT dbo.Table(Column) values (?)"
.CommandType = adCmdText
.ActiveConnection = "Connection string" or existing open connection
.Parameters.Append .CreateParameter("@p1", adVarChar, adParamInput, 50, "O'Brien")
.Execute
Set .ActiveConnection = Nothing
End With 
```

您当前使用的方法*不安全*。假设您在 ASP 页面中嵌入了以下动态 SQL：

```
sql = "SELECT Name FROM dbo.Students WHERE Id = " & Request("StudentId") 
```

现在假设有人决定尝试将以下内容塞入查询字符串（或表单，或者你有什么）：

```
1; DROP TABLE dbo.Students; 
```

用单引号替换此字符串如何帮助您避免 SQL 注入？在您知道的情况下，您可能会这样做：

```
sql = "SELECT Name FROM dbo.Students WHERE Id = " & CLng(Request("StudentId")) 
```

所以现在你无论如何都必须重新编写这段代码，并找出导致你被注入的数据类型不是字符串的情况。

SQL 注入并不是仅仅通过利用单引号来定义的。根据您构建 SQL 字符串的方式，可能还有十几种其他方法可以做到这一点。如果您只想通过保护这些情况来感到安全，那取决于您。我不会。我会用类型安全正确地参数化所有查询。消除所有问题，即使前期成本可能很大，您也会在晚上睡得更好。

# cross-platform - What is actually the minimal autotools files layout to be shipped with my source

> ID：12604852
> 
> 赞同：1
> 
> 时间：2012-09-26T15:09:40.100
> 
> 标签：cross-platform, autotools

Having made my `configure.ac` and `Makefile.am` files, I see myself having to perform `autoreconf`s so autoconf will not complain about undefined macros such as `AC_INIT_AUTOMAKE`. This fills my directory with files like `aclocal.m4`, `Makefile.in`, `install-sh`, `confdefs.h`, `depcomp`, `autom4te.cache`, and a `.deps` directory.

Having read the documentation I just cannot get what are the minimum number of these files to be shipped with my source code, that are platform independant. Either the documentation is not clear enough, they expect me to read much more or it is me that I don’t have enough time. I am sort of in a rush.

What are these files and what are the tasks that the compiler person, in their system, must perform?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T17:30:37.697

对于只想编译和安装项目 dist 目标系列创建 tarball 的人来说，这些文件就足够了。对于想要参与您的项目的人，我想您必须分发所有未生成的文件，因为这种用户应该已经安装了生成它们所需的所有开发工具

# jquery - Jquery自定义验证 - 最后一个表单字段未验证

> ID：12604856
> 
> 赞同：0
> 
> 时间：2012-09-26T15:09:46.770
> 
> 标签：jquery, validation, error-handling

我在验证表单时遇到问题。**当我将所有字段/textarea 的空白保留在最后一个字段之外时，我的表单对提交操作没有任何作用......当我只有一个 textfield/textarea 需要验证时，也会发生这种情况。**我不知道这是怎么可能的，因为当我注销我的错误时，它会显示所有应该显示的错误，但它不会添加到页面本身。这是我的代码：

1) JQuery 代码（这是在`$(document).ready(function(ev){ initialiseValidation() });`

```
function initialiseValidation()
{

   $('form').each(function()
   {
        var validators = [];
        var form = $(this);
        var textfields = form.find("input[type]").not("input[type=submit]");
        var textareas = form.find("textarea");
        var formfields = $.merge(textfields, textareas);

        formfields.each(function()
        {
            var inputfield = $(this);
            var field = inputfield.find('[name=' + inputfield.attr('name') + ']');
            var type = inputfield.attr('type') == undefined ? 'textarea' : inputfield.attr('type');
            var label = inputfield.attr("name");

            function hide_feedback(message)
            {
                $('.errormessages').remove();
            }

            function show_feedback(message){
                    // Insert own error message
                $(".formulier").before($('<ul/>').addClass('errormessages contact').append($('<li/>').text(message)));
            }

            if(inputfield.length)
            {
                if (inputfield.is("input") || inputfield.is("textarea"))
                {

                    function validator()
                    {
                        var error = undefined;

                             if (!inputfield.val())
                                error = getMessageForLabel(label);

                            else if (label == 'email' && ! inputfield.val().match(/.+@.+\..+/))
                                error = "Gelieve een geldig e-mail adres in te geven.";

                            else if(label == "username" && checkUsername())
                                 error = "Username bestaat niet.";

                                hide_feedback();

                            if (error)
                            {
                                    show_feedback(error);
                                  throw new ValidationError(label, error, function () {
                                                                    field.focus();
                                                                    return false;
                                  });
                            }

                        }

                    // Validator for field.onchange
                    function quick_validate(event)
                    {
                        // Ignore tab-key
                        //log(event.keyCode);
                        if (event.keyCode != 9)
                        {

                            try {

                                validator();
                            }
                            catch(validation_error) {

                            }
                        }
                    }

                    inputfield.change(quick_validate).keyup(quick_validate).blur(quick_validate);

                    // Validator for form.submit
                    validators.push(validator);
                }
            }
        });

          $(this).submit(function(ev)
          {
                var errors = [];

                // Call all validators
                for (var v in validators)
                {
                    try {

                        validators[v]();
                    }
                    catch(validation_error)
                    {

                        errors.push(validation_error);
                    }
                }

               if (errors.length)
               {

                   $('.errormessages').empty();

                       for(var i in errors)
                       {
                           var msg = errors[i]['error_msg'];
                           $(".errormessages").append($('<li/>').text(msg));
                       }

                   return false;

               }

          });

    });

}

function ValidationError(label, error_msg, ok_callback)
{
    this.label = label;
    this.error_msg = error_msg;
    this.ok_callback = ok_callback;
} 
```

2）HTML代码（不是最好的，所有的类都是为了让样式更好……）

```
<form action="index.php?page=contact&amp;action=confirm" method="post" enctype="multipart/form-data" id="contactform">

            {if !empty($errorArr)}
                <ul class="errormessages contact">
                    {foreach $errorArr as $error}
                    <li>{$error}</li>
                    {/foreach}
                </ul>
            {/if}

            <div class="formulier">

                <div class="formblock">
                    <div class="label">
                        <label for="naam">Voornaam:</label>
                    </div>
                    <input type="text" name="naam" id="naam" autocomplete="true" value="{if isset($smarty.post.naam)}{$smarty.post.naam}{/if}"/>
                </div>
                </br>
                <div class="formblock">
                    <div class="label">
                        <label for="familienaam">Naam:</label>
                    </div>
                    <input type="text" name="familienaam" id="familienaam" autocomplete="true" value="{if isset($smarty.post.familienaam)}{$smarty.post.familienaam}{/if}"/>

                </div>
                </br>
                <div class="formblock">
                    <div class="label">
                        <label for="email">E-mail:</label>
                    </div>
                    <input type="text" name="email" id="email" autocomplete="true" value="{if isset($smarty.post.email)}{$smarty.post.email}{/if}"/>

                </div>
                </br>
                <div class="formblock">
                    <div class="label">
                        <label for="bericht">Bericht:</label>
                    </div>
                    <textarea rows="10" cols="50" name="bericht" id="bericht">{if isset($smarty.post.bericht)}{$smarty.post.bericht}{/if}</textarea>

                </div>
                </br>
                <div class="formblock">

                    <input type="submit" value="stuur bericht" name="validateMail" id="validateMail"/>

                </div>

            </div>

        </form> 
```

我在网上搜索了很多，但我找不到这个问题的解决方案，所以如果你有任何提示/解决方案，我们将不胜感激！

# ios - 应用 CGAffineTransformMakeRotation 后如何拖动图像视图

> ID：12604857
> 
> 赞同：0
> 
> 时间：2012-09-26T15:09:47.517
> 
> 标签：ios, uiimageview, rotation, cgaffinetransform, touchesmoved

我正在开发一个应用程序，它具有拖动和旋转图像视图的功能。

我已经使用下面的代码实现了成功拖动和旋转

**In touchesBegan 方法**

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{
UITouch *touch = [[event allTouches] anyObject];

    touchStart = [[touches anyObject] locationInView:imageView];
    isResizingLR = (containerVw.bounds.size.width - touchStart.x < kResizeThumbSize && containerVw.bounds.size.height - touchStart.y < kResizeThumbSize);

} 
```

**在 touchesMoved 方法中**

```
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event{

     CGPoint touchPoint = [[touches anyObject] locationInView:containerVw];
     CGPoint previous=[[touches anyObject]previousLocationInView:containerVw];
     UITouch *touch = [[event allTouches] anyObject];

     if (isResizingLR) {

        CGFloat currA = [self pointToAngleFromCenter:[touch locationInView:containerVw.superview]] ;
        CGFloat prevA = [self pointToAngleFromCenter:[touch previousLocationInView:containerVw.superview]] ;
        // the current value of the rotation angle
        CGFloat tranA = atan2(containerVw.transform.b, containerVw.transform.a) ;
        // the angle difference between last touch and the current touch
        CGFloat diffA = currA - prevA ;
        // the new angle resulting from applying the difference
        CGFloat angle1 = tranA - diffA ;

        CGAffineTransform t = CGAffineTransformMakeRotation(angle1) ;
        containerVw.transform =t;
       }

      if (!isResizingLR) {
         containerVw.center = CGPointMake(containerVw.center.x + touchPoint.x - touchStart.x,           containerVw.center.y + touchPoint.y - touchStart.y);

       }
} 
```

**我的问题**

上面的代码工作正常，直到拖动后旋转图像视图。如果我在旋转图像视图后拖动它。图像视图已从屏幕上消失。

在 touchesEnd 方法中，我尝试打印图像视图框架。例如，我的图像视图框架在开始时是 (100,100,150,149) 旋转后图像视图 160º 框架已更改为 (103,31,182,183) 到现在它工作正常。

如果尝试移动图像视图，则旋转它后，图像视图已从屏幕上消失，现在框架已更改为 (615,-212,182,183)

请指导我如何解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T15:52:07.030

看看[这个项目](https://github.com/elc/iCodeBlogDemoPhotoBoard)。这可能会对您有所帮助。但是在这里，运动是通过手势而不是触摸来处理的。它可能会解决您的问题。

# php - php登录脚本未定义变量：_session脚本

> ID：12604860
> 
> 赞同：2
> 
> 时间：2012-09-26T15:09:52.727
> 
> 标签：php, login

我正在尝试登录脚本 burt 我有这个错误 Undefined variable: _session 见页面下方

//checklogin.php

```
<?php

ob_start();
$host="localhost"; // Host name 
$username="xxxxx"; // Mysql username 
$password="xxxx"; // Mysql password 
$db_name="test"; // Database name 
$tbl_name="members"; // Table name 

// Connect to server and select databse.

mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");

// Define $myusername and $mypassword 

$myusername=$_POST['myusername']; 
$mypassword=$_POST['mypassword']; 

// To protect MySQL injection (more detail about MySQL injection) 

$myusername = stripslashes($myusername);
$mypassword = stripslashes($mypassword);
$myusername = mysql_real_escape_string($myusername);
$mypassword = mysql_real_escape_string($mypassword);
$sql="SELECT * FROM $tbl_name WHERE username='$myusername' and password='$mypassword'";
$result=mysql_query($sql);

// Mysql_num_row is counting table row

$count=mysql_num_rows($result);

// If result matched $myusername and $mypassword, table row must be 1 row

if($count==1){

// Register $myusername, $mypassword and redirect to file "login_success.php"

$_session['name']= myusername;
$_session['pass']= mypassword; 
header("location:login_success.php");
}
 else {
echo "Wrong Username or Password";
}
ob_end_flush();
?> 
```

//login_success.php

```
// Check if session is not registered, redirect back to main page. 
// Put this code in first line of web page. 
<?php
session_start();
if(!$_session['name']= myusername){
header("location:main_login.php");
}
?>

<html>
<body>
Login Successful
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T15:11:31.870

不是`$_SESSION`你`$_session`还需要`session_start()`在页面顶部添加

来自 PHP 文档

> PHP 中的变量由一个美元符号后跟变量名表示。变量名区分大小写。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T15:12:10.557

[`$_SESSION`](http://php.net/manual/en/reserved.variables.session.php)是要大写的。在您的代码中，它都是小写：

```
if(!$_session['name']= myusername){ 
```

更改为（也添加`$`到我的用户名）：

```
if(!$_SESSION['name']= $myusername){ 
```

# actionscript-3 - 在 Flash 列表中使用 url

> ID：12604861
> 
> 赞同：0
> 
> 时间：2012-09-26T15:10:00.300
> 
> 标签：actionscript-3, flash, apache-flex, flash-builder

因此，我有一项服务可以根据针对它提出的请求传递城市列表我需要做的是添加 url 以单击我尝试过的每一行 outerDocument parentDocument 但无法与他们一起获得它我要修改的列表示例

```
 <s:List includeIn="data" x="28" y="10" width="312" height="255" id="list" labelField="city" >
    <s:AsyncListView list="{getCitysResult.lastResult}"/>
 </s:List> 
```

这是输入列表的数据

```
 object[]
     [0]
    citycode:034957
    id:20
    countrycode:GB
    url:http://example.com
    city:lincoln
     [1]............... 
```

无论如何使用这个列表我可以使用每个对象中的url来点击每一行我也尝试使用带有行内按钮的数据网格但我仍然无法获得链接到按钮或行的url

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T21:16:09.833

使用 navigateToUrl(new URLRequest(data.url), "_blank"); 继续为每个打开一个新的浏览器窗口或 navigateToUrl(new URLRequest(data.url), "myWindowName"); 尝试让操作系统重新使用同一个命名的浏览器窗口。

# c++ - 使用 C++ 在 linux 中播放 .mp3 或其他音频文件

> ID：12604862
> 
> 赞同：4
> 
> 时间：2012-09-26T15:10:08.247
> 
> 标签：c++, linux, audio

> **可能重复：**
> [Linux 下 C/C++ 的最佳音频播放 api？](https://stackoverflow.com/questions/772208/best-audio-playback-api-for-c-c-under-linux)

我正在寻找一个库，我可以使用它在 linux 中使用 C++ 代码播放音频文件，有什么建议吗？

编辑：如果可能，请包括一些教程的链接。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-26T16:47:24.453

看看[FMOD](https://www.fmod.com/download)。它是 C++ 的跨平台音频库。

有很多可用的教程，例如：

*   [FMOD 快速指南](http://www.gamedev.net/page/resources/_/technical/game-programming/a-quick-guide-to-fmod-r2098)
*   [FMOD简介](http://jerome.jouvie.free.fr/nativefmodex/tutorials/Tutorial01.php?run=Win)

# linq - 通过 LINQ 订购复杂对象

> ID：12604867
> 
> 赞同：0
> 
> 时间：2012-09-26T15:10:32.640
> 
> 标签：linq, sorting

我有一个复杂的对象：

```
+ Client
     + Products
           + Types
               | TypeId
               | ManagerCode
               | TypeName
                .... 
```

单个客户将与他们购买的产品集合相关联，并且每个产品将具有与其关联的类型集合。

我需要对两个属性的“类型”进行排序——ManagerCode 和 TypeName。

例如：`client.Products.ForEach(o => o.Types.OrderBy(o1 => o1.BaseType.ManagerCode));`

好吧，当我这样做时，一旦返回到前端，列表实际上并没有排序。它保持原来的排序顺序。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T15:13:15.980

`OrderBy`不替换原始集合；它返回一个新排序的集合。

假设`Types`是一个列表，你需要

```
client.Products.ForEach(o =>
    o.Types = o.Types.OrderBy(o1 => o1.BaseType.ManagerCode).ToList()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T15:18:57.553

另一种解决方案是使用该`Sort`方法。

```
client.Products.ForEach(o => o.Types.Sort(
    (x, y) => string.Compare(x.BaseType.ManagerCode, y.BaseType.ManagerCode)); 
```

# java - 无法在外部存储上以编程方式创建文件夹 - Android

> ID：12604868
> 
> 赞同：1
> 
> 时间：2012-09-26T15:10:33.357
> 
> 标签：java, android, android-sdcard, android-file

这是我的代码：

```
boolean success = false;
Log.d(TAG, Environment.getExternalStorageDirectory() + "/" + Environment.DIRECTORY_PICTURES + "/myFolder" );
myFolder = new File( Environment.getExternalStorageDirectory() + "/" + Environment.DIRECTORY_PICTURES + "/myFolder" );

if( myFolder.exists() ){
    Log.d(TAG, "FOLDER EXISTS");
}else{

    success = myFolder.mkdir();

    if( success ){
        // Do something on success

    } else {
        // Do something else on failure 
        throw new RuntimeException("File Error in writing new folder");
} 
```

怎么了？

运行它`HTC Desire HD - android 2.3.5`会导致这个输出：

```
D/DVA_HLUI Application(25723): /mnt/sdcard/Pictures/myFolder
E/AndroidRuntime(25723): FATAL EXCEPTION: main
E/AndroidRuntime(25723): java.lang.RuntimeException: Unable to create application com.DVA_HLUI.DVAHLUI_App: java.lang.RuntimeException: File Error in writing new folder
E/AndroidRuntime(25723):    at android.app.ActivityThread.handleBindApplication(ActivityThread.java:3920)
E/AndroidRuntime(25723):    at android.app.ActivityThread.access$2200(ActivityThread.java:135)
E/AndroidRuntime(25723):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1098)
E/AndroidRuntime(25723):    at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(25723):    at android.os.Looper.loop(Looper.java:150)
E/AndroidRuntime(25723):    at android.app.ActivityThread.main(ActivityThread.java:4385)
E/AndroidRuntime(25723):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(25723):    at java.lang.reflect.Method.invoke(Method.java:507)
E/AndroidRuntime(25723):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:849)
E/AndroidRuntime(25723):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:607)
E/AndroidRuntime(25723):    at dalvik.system.NativeStart.main(Native Method)
E/AndroidRuntime(25723): Caused by: java.lang.RuntimeException: File Error in writing new folder
E/AndroidRuntime(25723):    at com.DVA_HLUI.DVAHLUI_App.onCreate(DVAHLUI_App.java:185)
E/AndroidRuntime(25723):    at android.app.Instrumentation.callApplicationOnCreate(Instrumentation.java:984)
E/AndroidRuntime(25723):    at android.app.ActivityThread.handleBindApplication(ActivityThread.java:3917)
E/AndroidRuntime(25723):    ... 10 more 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T15:27:38.830

我不确定是否只是尝试创建如下文件夹 -

```
success = myFolder.mkdirs(); 
```

代替

```
success = myFolder.mkdir(); 
```

根据[mkdirs()](http://developer.android.com/reference/java/io/File.html#mkdirs%28%29)并且，不要忘记将以下权限添加到您的清单文件中。

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

也看看这个答案 -[如何在 SD 卡上自动创建目录](https://stackoverflow.com/q/2130932/940096)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T15:24:36.863

您应该在 mainfest 文件中使用此权限。

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

# javascript - 寻找 ibooks html 输入替代

> ID：12604869
> 
> 赞同：0
> 
> 时间：2012-09-26T15:10:35.520
> 
> 标签：javascript, html, input, ios6, ibooks

在 iPad 上的 IOS5、iPad2 等 iBooks`<input type="color">`中，当您单击输入字段时，iBooks 被接受为提示键盘显示的一种方式，也就是说，输入问题的答案。我最近刚刚更新到 IOS6，这种解决方法似乎不再有效。我尝试使用在这里找到的 JavaScript - [http://www.linkedin.com/groups/How-Show-iPads-Keyboard-when-3877009.S.84287009](http://www.linkedin.com/groups/How-Show-iPads-Keyboard-when-3877009.S.84287009)

```
<script type="text/javascript"> 

function iPadTouchHandler(event) { 
var type = "", 
button = 0; /*left*/ 

if (event.touches.length > 1) 
return; 

switch (event.type) { 
case "touchstart": 

// OLD: On iPad2 clicking on a text input field did not show the keyboard 
//  if ($(event.changedTouches[0].target).is("select")) { 
// NEW: Now on iPad2 the touchstart-Event on input fields is ignored and everything         works fine 
// change my by Roland Caspers, Scheer Management 
if ($(event.changedTouches[0].target).is("select") ||     $(event.changedTouches[0].target).is("input")) { 

return; 
} 
iPadTouchStart(event); /*We need to trigger two events here to support one touch drag     and drop*/ 
event.preventDefault(); 
return false; 
break; 
</script> 
```

然而，这段代码似乎已经过时并且与 IOS5 相关。我知道一种解决方法，即将带有输入的页面放入 iFrame，在这种情况下您可以只使用 <input type="text">，但是我更愿意远离 iFrame，因为它们往往会移动周围的内容取决于输入框的位置。关于其他可能的解决方案或解决方法的任何想法？泰维姆 :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T08:05:05.550

我在 iOS6 上也面临同样的问题，同样在`<iframe>`标签上工作得很好。但它省略了图像和样式等。

查看代码“ [http://www.linkedin.com/groups/How-Show-iPads-Keyboard-when-3877009.S.84287009](http://www.linkedin.com/groups/How-Show-iPads-Keyboard-when-3877009.S.84287009) ”，我觉得在以下情况下必须修改一些东西：

```
($(event.changedTouches[0].target).is("select") ||     $(event.changedTouches[0].target).is("input")) 
```

如果有人提供较早的回复，我会很棒。

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-18T08:33:58.947

我在 iOS 7 上的 iBooks 中遇到了同样的问题。棘手的部分是，iBooks 可能默认禁用所有文本输入字段。我们正在使用prototype.js，所以这是我为原型编写的解决方案：

```
$('my-input-field-id').observe('touchstart', function(event) {
    var element = event.element();
    if (element.disabled)
        element.disabled = false;
    element.focus();
    event.stop();
}); 
```

因此，只需在输入字段上侦听“touchstart”事件，并在触摸时启用并聚焦该字段。它适用于普通文本字段 ( `<input type="text">`)。简单的 ：-）。

# javascript - HTML5 - 延迟画布绘图

> ID：12604871
> 
> 赞同：2
> 
> 时间：2012-09-26T15:10:39.997
> 
> 标签：javascript, jquery, html

我有一段简单的代码可以在页面中画一条线。我的问题是我对 HTML5 或 JS 不太了解，我需要帮助设置延迟绘制这条线。我希望能够选择是否要在打开页面时立即看到它绘制或将其定义为在绘制之前有 5 秒的延迟。

这里是：

```
<canvas id="myCanvas" width="1250" height="120"></canvas>

<script>

var canvas = $("#myCanvas")[0];
var c = canvas.getContext("2d");
var amount = 0;
var startX = 164;
var startY = 120;
var endX = 1094;
var endY = 120;

setInterval(function() {
    amount += 0.01; // change to alter duration
    if (amount > 1) amount = 1;
    c.clearRect(0, 0, canvas.width, canvas.height);
    c.strokeStyle = "black";
    c.lineWidth=1;
    c.strokeStyle="#707070";
    c.moveTo(startX, startY);
    // lerp : a  + (b - a) * f
    c.lineTo(startX + (endX - startX) * amount, startY + (endY - startY) * amount);
    c.stroke();
}, 0);

</script> 
```

感谢您的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T15:16:00.517

将其包装在 setTimeout 中：

```
var canvas = $("#myCanvas")[0];
var c = canvas.getContext("2d");
var amount = 0;
var startX = 164;
var startY = 120;
var endX = 1094;
var endY = 120;

setTimeout(function() {
    var interval = setInterval(function() {
        amount += 0.01; // change to alter duration
        if (amount > 1) {
            amount = 1;
            clearInterval(interval);
        }
        c.clearRect(0, 0, canvas.width, canvas.height);
        c.strokeStyle = "black";
        c.lineWidth=1;
        c.strokeStyle="#707070";
        c.moveTo(startX, startY);
        // lerp : a  + (b - a) * f
        c.lineTo(startX + (endX - startX) * amount, startY + (endY - startY) * amount);
        c.stroke();
    }, 0);

}, 3000); 
```

以上在开始绘图之前等待 3 秒（3000 毫秒）。此外，每当您使用 setInterval 开始间隔时，您都应该存储返回值，以便稍后停止间隔。上面的代码在使用 clearInterval() 完成绘制后停止间隔。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T15:13:10.830

您需要使用`setTimeout`：

```
setTimeout(function() {
    setInterval(function() {
        amount += 0.01; // change to alter duration
        if (amount > 1) amount = 1;
        c.clearRect(0, 0, canvas.width, canvas.height);
        c.strokeStyle = "black";
        c.lineWidth=1;
        c.strokeStyle="#707070";
        c.moveTo(startX, startY);
        // lerp : a  + (b - a) * f
        c.lineTo(startX + (endX - startX) * amount, startY + (endY - startY) * amount);
        c.stroke();
    }, 0);
}, 5000); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T15:16:45.663

`setInterval`将您的通话包裹在通话中`setTimeout`。`setInterval`重复调用其函数参数，其中第二个参数指定调用之间的延迟。在延迟过去后`setTimeout`调用它的函数参数*一次。*

```
function redraw() {
  amount += 0.01; // change to alter duration
  if (amount > 1) amount = 1;
  c.clearRect(0, 0, canvas.width, canvas.height);
  c.strokeStyle = "black";
  c.lineWidth=1;
  c.strokeStyle="#707070";
  c.moveTo(startX, startY);
  // lerp : a  + (b - a) * f
  c.lineTo(startX + (endX - startX) * amount, startY + (endY - startY) * amount);
  c.stroke();
}

setTimeout(function () { setInterval(redraw, 0) }, 5000); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T15:20:22.777

**简短的回答**

使用[`setTimeout`](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)函数延迟执行。什么[`setTimeout`](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)是设置一个计时器，该计时器将在指定的时间后执行指定的功能。例如

```
setTimeout(function() {
    alert("Hello!");
}, 5000); 
```

将在 5 秒后显示警报（注意时间以毫秒为单位）。

* * *

**长答案**

有两个函数可让您安排函数执行。

*   [setTimeout(func, delay)](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)将在给定延迟后执行给定函数。这个用于一次性执行功能。
*   [setInterval(func, delay)](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval)将在延迟过去后重复执行给定函数。初始延迟后，将执行指定的功能。然后计时器将被重置，一旦延迟再次过去，功能将再次执行，依此类推。

这两个功能都可以使用对应的 ([`clearTimeout`](https://developer.mozilla.org/en-US/docs/DOM/window.clearTimeout)和[`clearInterval`](https://developer.mozilla.org/en-US/docs/DOM/window.clearInterval)) 取消。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T15:18:00.517

您需要使用[setTimeout](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)。setTimeout 在一定延迟后运行调用。

脚本中使用的函数[setInterval](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval)以一定的时间间隔一遍又一遍地运行相同的函数。[斯特莱尔的回答](https://stackoverflow.com/a/12604979/855738)应该对你有所帮助

# sql-server-ce - 使用 VB.net 在 SQL Server Compact Edition 数据库中获取和插入数据

> ID：12604874
> 
> 赞同：1
> 
> 时间：2012-09-26T15:10:57.317
> 
> 标签：sql-server-ce, vb.net-2010

我是 VB.net 的新手并创建了一个应用程序，以便用户需要登录用户名和密码。

我正在使用 SQL Server Compact Edition 数据库。

这是我的完美代码：-

```
Imports System.Data.SqlClient
Imports System.Data.SqlServerCe

Public Class frm_edit_patient
    Dim con As New SqlCeConnection
    Try
        Dim SQLquery As String
        Dim da As SqlCeDataAdapter
        Dim ds As New DataSet
        Dim myConString As String = My.Settings.Database1ConnectionString
        con.ConnectionString = myConString
        MsgBox("Database is now open")
        MessageBox.Show("connected")
    Catch ex As Exception
        MessageBox.Show(ex.ToString)
    End Try
End Sub 
```

上面的代码工作正常并向我展示`connected`

但是，当我添加这段代码时

```
 SQLquery = "SELECT id FROM user where username=John Doe"
        da = New SqlCeDataAdapter(SQLquery, con)
        da = New SqlCeDataAdapter(SQLquery, con)
        da.Fill(ds, "db1") 
```

它给了我这个异常错误：- ![在此处输入图像描述](../Images/ac9c2eebf0f1515a88c5899368de4ef8.png)

这是什么意思？如何获取该特定人的用户标识？

另外，如果我只是将插入查询放入`SQLquery`，它会起作用吗？正如我一直在通过观看一些视频教程来做到这一点，但进一步他们没有关于这方面的教程，我的书也没有解释任何关于紧凑型数据库的内容，而且到目前为止我使用这个应用程序不想切换......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T15:15:33.810

将您的用户名放在单引号之间，**用户**是[Sql Compact 中的保留字](http://msdn.microsoft.com/en-us/library/ms173340.aspx)。
您需要将其括在方括号中

```
SQLquery = "SELECT id FROM [user] where username='John Doe'" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T15:14:30.237

在您的查询周围添加单引号。

```
SQLquery = "SELECT id FROM user where username='John Doe'" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T15:15:18.420

您的 SQL 语句中有错误。字符串必须使用单引号分隔，例如

```
SELECT id FROM user WHERE username = 'John Doe' 
```

# android - Android后退按钮返回搜索结果？

> ID：12604875
> 
> 赞同：0
> 
> 时间：2012-09-26T15:11:00.970
> 
> 标签：android

在我的 android 应用程序中，我有一个搜索界面，可以单击每个列表项，从而启动一个新的 Activity，该 Activity 显示有关该单个项目的更多信息。我在新活动上有一个返回按钮，我想返回搜索结果列表。我尝试了一个可以返回搜索页面的意图，但这会开始一个新的搜索：

```
 Intent backIntent = new Intent(v.getContext(), SearchPage2.class); 
backIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
startActivityForResult(backIntent, 0);
SearchTaDa.this.finish(); 
```

我也试过了`SearchTaDa.this.finish();`，`finish();`但是这两个都关闭了整个应用程序。有人知道我如何通过单击“返回”按钮返回搜索结果吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T15:15:02.437

**不要**使用此代码，因为它会删除堆栈中的所有活动

```
backIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
```

请改用此代码：

```
Intent backIntent = new Intent(v.getContext(), SearchPage2.class); 
startActivityForResult(backIntent, 0);
SearchTaDa.this.finish(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T15:17:11.857

只需执行此操作并尝试按 SearchPage2 上的返回按钮

```
Intent backIntent = new Intent(v.getContext(), SearchPage2.class); 
startActivityForResult(backIntent, 0); 
```

不要清除堆栈，也不要在前一个上调用完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T15:20:46.617

I think the problem is in your other Activity, from which you start the Detail Info Activity. Maybe you are calling finish() there after starting the new Activity, which removes it from the Stack, so you can't go back to it. You should then be able to use finish() in the second Activity to go back.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T15:22:15.180

Basically, you want your button to emulate the devices's BACK button, because pressing devices's BACK button should return you to search results activity.

Not sure if it will work, but here's a trick:
In your "more info" activity override the `onBackPressed()` method which calls the `super.onBackPressed()`, then in the click listener of you back putton call: `onBackPressed()`.

```
@Override
public void onBackPressed() {
    super.onBackPressed();
}

//.........
myBackButton.setOnClickListener(new OnClickListener(){
  public void onClick(){
    onBackPressed()
  }
}); 
```

And remove the `setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);`, when starting the "more info" activity.

# css - 第 N 个孩子瞄准了错误的元素

> ID：12604877
> 
> 赞同：2
> 
> 时间：2012-09-26T15:11:03.963
> 
> 标签：css, css-selectors

我正在使用第 n 个孩子来删除右侧某些元素的边距：

```
.post-list-item:nth-child(3n+3) {
    margin-right: 0px;
} 
```

但不知何故，它似​​乎针对错误的元素： http: [//poachedmag.com/column/entertainment/music/](http://poachedmag.com/column/entertainment/music/)

我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T15:16:04.587

您在父 div 中有另一个 div 标签。所以最右边的元素不是#3、#6 和#9，而是#4、#7 和#10。所以要么删除这个额外的 div 标签，要么将你的 CSS 更改为：

```
.post-list-item:nth-child(3n+4) {
    margin-right: 0;
} 
```

# php - 从类中提取接口的工具

> ID：12604884
> 
> 赞同：2
> 
> 时间：2012-09-26T15:11:24.680
> 
> 标签：php

> **可能重复：**
> [生成 PHP 接口](https://stackoverflow.com/questions/8247482/generate-php-interfaces)

当我想针对接口进行编程时，我正在寻找一种可以从类中提取接口的工具。

假设我有这样的课程：

```
<?php
    class Foo
    {
      public function Bar()
      {
      }
    }
?> 
```

然后我希望结果是这样的：

```
interface IFoo
{
  public function Bar();
} 
```

很明显，对于一个简单的类来说，手工很容易。但是我想从[fpdf 类](http://www.fpdf.org/)中提取一个接口，这是很多工作。

有什么工具可以做到这一点？

注意：在 VS2010 中这很容易，只需点击几下。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T11:27:50.770

有一个基于 PHP 的库，其中还包含一个命令行工具，它能够从类定义中提取接口：

*   [接口蒸馏器](https://github.com/gooh/InterfaceDistiller)

这是相关问题[Extracting just the interface from a PHP application, for code completion](https://stackoverflow.com/questions/3839677/extracting-just-the-interface-from-a-php-application-for-code-completion)中概述的更方便的变体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T15:15:37.787

你的代码看起来像c#，你说的是vs2010，但是问题标签是关于php的？

如果标签有误，Resharper 就是您所需要的。它做到了，还有更多。

[http://www.jetbrains.com/resharper/](http://www.jetbrains.com/resharper/)

它不是免费的，但他们有一个限时版本可供试用。

# regex - 我可以在 SharePoint GetListItems Web 服务中使用正则表达式吗

> ID：12604885
> 
> 赞同：0
> 
> 时间：2012-09-26T15:11:28.270
> 
> 标签：regex, web-services, sharepoint

我需要列出位于一个文档库中与特定命名约定匹配的所有文件：要检索的文档都采用“报告 xxxx-xx-xx”的形式。

我必须使用 GetListItems 网络服务。

有没有办法在一个电话中收集所有这些文件？如何在查询部分编写“where”部分？
我可以在其中使用一些正则表达式吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T15:36:34.740

阅读

*   [http://msdn.microsoft.com/en-us/library/ms471093(v=office.12).aspx](http://msdn.microsoft.com/en-us/library/ms471093(v=office.12).aspx)
*   [http://msdn.microsoft.com/en-us/library/ms414805(v=office.12).aspx](http://msdn.microsoft.com/en-us/library/ms414805(v=office.12).aspx)

条款的构造`WHERE`似乎很清楚：

```
<Query>
  <Where>
    <Geq>
      <FieldRef Name="Expires"/>
      <Value Type="DateTime">
        <Today/>
      </Value>
    </Geq>
  </Where>
  <OrderBy>
    <FieldRef Name="Modified"/>
  </OrderBy>
</Query> 
```

然而，似乎没有办法使用正则表达式。也许您能做的最好的事情是使用`BeginsWith`“报告”上的元素和`Contains`元素来搜索破折号。有一个很好的例子

*   [http://msdn.microsoft.com/en-us/library/ms196501(v=office.12).aspx](http://msdn.microsoft.com/en-us/library/ms196501(v=office.12).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T11:18:09.140

也许您可以在您的文档库中添加一个[计算列](http://office.microsoft.com/en-us/windows-sharepoint-services-help/calculate-data-in-lists-or-libraries-HA010105480.aspx)，对您的标题文本执行字符串操作和/或测试操作，并返回例如可以在您的 where 子句中轻松获取的内容？

这可能有助于限制服务器端的结果集......

`=IF(LEFT([TitleColumn],7)="Report ", if(ISNUMBER(DATEVALUE(RIGHT([TitleColumn],10))), "TRUE", "FALSE"), "FALSE")`

有关计算列中可用的内容，请参阅[Microsoft 的计算字段公式](http://msdn.microsoft.com/en-us/library/bb862071.aspx)。

# dependency-injection - 如何使用 StructureMap 注入 AutoMapper IMappingEngine

> ID：12604896
> 
> 赞同：15
> 
> 时间：2012-09-26T15:11:52.327
> 
> 标签：dependency-injection, automapper, structuremap

我为[Automapper](https://github.com/AutoMapper/AutoMapper/wiki/Getting-started)找到的大多数示例都使用静态 Mapper 对象来管理类型映射。对于我的项目，我需要注入一个 IMapperEngine 作为使用 StructureMap 的对象构造的一部分，以便我们可以在单元测试中模拟映射器，因此我们不能使用静态映射器。我还需要支持配置 AutoMapper Profiles。

我的问题是如何配置 StructureMap 注册表，以便在构造 MyService 实例时它可以提供 IMappingEngine 实例。

这是服务构造函数签名：

```
public MyService(IMappingEngine mapper, IMyRepository myRepository, ILogger logger) 
```

这是 StructureMap 注册表

```
public class MyRegistry : StructureMap.Configuration.DSL.Registry
{
    public MyRegistry()
    {
        For<IMyRepository>().Use<MyRepository>();
        For<ILogger>().Use<Logger>();
        //what to do for IMappingEngine?
    }
} 
```

以及我要加载的配置文件

```
public class MyAutoMapperProfile : AutoMapper.Profile
{
    protected override void Configure()
    {
        this.CreateMap<MyModel, MyDTO>();
    }
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-26T15:34:13.043

该类`Mapper`具有静态属性`Mapper.Engine`。使用它向容器注册引擎：

```
For<IMappingEngine>().Use(() => Mapper.Engine); 
```

如果您需要在注入引擎之前加载配置文件，我会将该配置代码插入到上述代码段旁边。

* * *

**更新**

您的自定义注册表看起来像这样

```
class MyRegistry : Registry
{
  public MyRegistry()
  {
    For<IMyRepository>().Use<MyRepository>();
    For<ILogger>().Use<Logger>();

    Mapper.AddProfile(new AutoMapperProfile());
    For<IMappingEngine>().Use(() => Mapper.Engine);
  }
} 
```

此代码在您的引导程序中运行一次，之后任何类型的依赖项都将使用您的 custom 配置`IMappingEngine`的静态属性的值提供服务。`Mapper.Engine``AutoMapperProfile`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-02-16T11:16:39.883

> *~~静态 API 将在 5.0 版中移除。~~使用 MapperConfiguration 实例并根据需要静态存储。使用 CreateMapper 创建一个映射器实例。*

在新版本（4.2.0 >=）中，我们应该持有并通过 DI 传递**IMapper**。

一个简单的配置服务应该是这样的（ASP.NET Core）

```
services.AddSingleton<IMapper>(_ => new MapperConfiguration(cfg =>
            {
                cfg.CreateMap<Foo,Bar>();
            })
            .CreateMapper()); 
```

和我们的服务层（在构造函数注入的帮助下）：

```
public class CrudService<TDocument> : ICrudService<TDocument>
    {
        private readonly IMapper _internalMapper;
        private readonly IRepository<TDocument> _repository;

        public CrudService(IRepository<TDocument> repository, IMapper mapper)                
        {
            _internalMapper = mapper;
            _repository = repository;
        }

        public virtual ServiceResult<string> Create<TModel>(TModel foo)
        {
            var bar = _internalMapper.Map<TDocument>(foo);

            try
            {
                _repository.Create(bar);
            }
            catch (Exception ex)
            {
                return ServiceResult<string>.Exception(ex);
            }

            return ServiceResult<string>.Okay(entity.Id);
        }
} 
```

`consider TDocument as Bar, and TModel as Foo`

* * *

*更新*：
**AutoMapper 4.2.1 发布——静态又回来了**

> 经过一些反馈和自我反省以及老实说厌倦了处理问题后，此版本中恢复了一些静态 API。您现在（以及将来）可以使用 Mapper.Initialize 和 Mapper.Map

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T18:10:55.377

这是我最终得到的结果，因为我不知道如何在 Mapper.Engine 上设置配置并将其传递给 For().Use。

```
public MyRegistry()
{
    For<IMyRepository>().Use<MyRepository>();
    For<ILogger>().Use<Logger>();

    //type mapping
    For<ConfigurationStore>()
        .Singleton()
        .Use(ctx =>
        {
            ITypeMapFactory factory = ctx.GetInstance<ITypeMapFactory>();
            ConfigurationStore store 
                = new ConfigurationStore(factory, MapperRegistry.AllMappers());
            IConfiguration cfg = store;
            cfg.AddProfile<MyAutoMapperProfile>();
            store.AssertConfigurationIsValid();
            return store;
        });
    For<IConfigurationProvider>().Use(ctx => ctx.GetInstance<ConfigurationStore>());
    For<IConfiguration>().Use(ctx => ctx.GetInstance<ConfigurationStore>());
    For<IMappingEngine>().Singleton().Use<MappingEngine>();
    For<ITypeMapFactory>().Use<TypeMapFactory>();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-06T23:11:53.567

我写了一篇博文，展示了我的 AutoMapper 和 StructureMap 设置。我为 AutoMapper 3.1.0（也适用于 3.1.1）和 3.0.0 和 2.2.1 创建了特定的注册表。

[http://www.martijnburgers.net/post/2013/12/20/My-AutoMapper-setup-for-StructureMap.aspx](http://www.martijnburgers.net/post/2013/12/20/My-AutoMapper-setup-for-StructureMap.aspx)

# mercurial - Mercurial 配置不正确

> ID：12604897
> 
> 赞同：2
> 
> 时间：2012-09-26T15:11:53.977
> 
> 标签：mercurial, tortoisehg

我最近更新到 eclipse juno。我也将 mercurial 更新到了最新版本，但它仍然给我带来了问题。mercurial 插件告诉：“不支持的 hg 版本：1.9.3。预计至少为 2.0.0。” 但它已经更新（见图）。

如果我尝试提交，它会自动打开首选项窗口，其中显示消息：“Mercurial 配置不正确。运行 'hg debuginstall' 进行分析。”。

当我这样做时，它会说：“没有提供用户名”。然后我运行“hg -y debuginstall”，它说没有检测到问题。

我提到的一切都在图片中描绘出来。

![在此处输入图像描述](../Images/68ac9e24cdf1371b7cf47bd441359ac4.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T15:33:27.403

取消选中标记为`Use default (built-in) Mercurial executable`; 然后在下面标记的文本框中`Mercurial executable`，您可以输入`hg.exe`TortoiseHg 2.5 安装的完整路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-29T16:20:00.660

我在安装 Mercurial Eclipse 插件时遇到了同样的错误。我在 mercurial 安装文件夹中找到了配置文件“Mercurial.ini”。就我而言，该文件夹的路径是“E:\eclipse\plugins\com.intland.hgbinary.win32_2.3.2\os\win32”。使用记事本编辑配置文件并添加行“username = your-user-name”，您的用户名可以自由选择。我希望它会有所帮助。

# sql-server - 如何将此 sqlcmd 脚本转换为 Invoke-Sqlcmd 脚本？

> ID：12604902
> 
> 赞同：0
> 
> 时间：2012-09-26T15:12:06.873
> 
> 标签：sql-server, tsql, powershell, cmd, sqlcmd

我有一个设计为由[sqlcmd](http://msdn.microsoft.com/en-us/library/ms162773.aspx)执行的 SQL 脚本，以及一个使用正确参数执行 sqlcmd 的命令脚本。

我想将命令脚本转换为使用[Invoke-Sqlcmd](http://technet.microsoft.com/en-us/library/cc281720.aspx)而不是 sqlcmd 的 PowerShell 脚本。

SQL 脚本、命令脚本和新的 PowerShell 脚本都位于目录中`C:\Users\iain.CORP\SqlcmdQuestion`。

### SQL 脚本

SQL 脚本称为`ExampleQuery.sql`. 它选择一个字符串文字。字符串文字的值由 sqlcmd 在运行时设置为`ComputerName`sqlcmd 脚本变量的值。代码如下所示：

```
SELECT '$(ComputerName)'; 
```

### 命令脚本

命令脚本称为`ExecQuery.cmd`. 它调用 sqlcmd 来执行`ExampleQuery.sql`并将脚本变量`ComputerName`的值设置为环境变量的值`COMPUTERNAME`。代码如下所示：

```
sqlcmd -i ExampleQuery.sql -v ComputerName = %COMPUTERNAME% 
```

当我打开命令提示符时，默认工作目录是`C:\Users\iain.CORP`. 我将 更改为包含文件的目录，然后运行命令脚本：

```
cd C:\Users\iain.CORP\SqlcmdQuestion
ExecQuery.cmd 
```

我看到这个输出：

```
---------
SKYPC0083

(1 rows affected) 
```

该脚本成功地选择了由 sqlcmd 设置的字符串文字。

### PowerShell 脚本

PowerShell 脚本称为 ExecQuery.ps1。它应该与命令脚本执行相同的操作，使用 Invoke-Sqlcmd 而不是 sqlcmd。代码如下所示：

```
Add-PSSnapin SqlServerCmdletSnapin100
Add-PSSnapin SqlServerProviderSnapin100

Invoke-Sqlcmd -InputFile 'ExampleQuery.sql' -Variable "ComputerName = $Env:COMPUTERNAME" 
```

当我打开 PowerShell 提示符时，默认工作目录是`Z:\`. 我切换到包含文件的目录，然后运行 ​​PowerShell 脚本：

```
cd C:\Users\iain.CORP\SqlcmdQuestion
.\ExecQuery.ps1 
```

我看到这个输出：

```
Invoke-Sqlcmd : Could not find file 'Z:\ExampleQuery.sql'.
At C:\Users\iain.CORP\SqlcmdQuestion\ExecQuery.ps1:4 char:14
+ Invoke-Sqlcmd <<<<  -InputFile 'ExampleQuery.sql' -Variable "ComputerName = $Env:COMPUTERNAME"
    + CategoryInfo          : InvalidResult: (:) [Invoke-Sqlcmd], FileNotFoundException
    + FullyQualifiedErrorId : ExecutionFailed,Microsoft.SqlServer.Management.PowerShell.GetScriptCommand 
```

PowerShell 脚本引发错误，因为 Invoke-Sqlcmd 在目录中找不到输入文件，该`Z:\`目录恰好是默认工作目录。

命令脚本在当前工作目录中找到了该脚本。

如何让 Invoke-Sqlcmd 使用当前工作目录而不是默认工作目录？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-28T13:36:05.550

对于这个答案，假设该目录`C:\Users\iain.CORP\SqlcmdQuestion`存在并且`dir`在该位置执行会产生以下输出，正如问题所暗示的那样：

```
 Directory: C:\Users\iain.Corp\SqlcmdQuestion

Mode                LastWriteTime     Length Name
----                -------------     ------ ----
-a---        26/09/2012     15:30         27 ExampleQuery.sql
-a---        26/09/2012     15:30         61 ExecQuery.cmd
-a---        26/09/2012     15:34        172 ExecQuery.ps1 
```

### PowerShell 在设计上忽略了工作目录

我的问题有一个错误的前提：

> 如何让 Invoke-Sqlcmd 使用当前工作目录而不是默认工作目录？

cmdlet 确实使用当前工作目录。问题是我在 PowerShell 会话中根本没有更改工作目录。

在 PowerShell 中，`cd`是`Set-Location`cmdlet 的别名。`Get-Alias`您可以使用cmdlet来证明这一点：

```
Get-Alias cd 
```

输出：

```
CommandType     Name                                                Definition
-----------     ----                                                ----------
Alias           cd                                                  Set-Location 
```

[亚历克斯·安杰洛普洛斯](http://www.windowsitpro.com/article/windows-powershell/why-the-powershell-working-directory-and-the-powershell-location-aren-t-one-in-the-same)解释说：

> [A] 虽然 PowerShell 的位置类似于工作目录，但位置与工作目录不同。事实上，PowerShell 不会触及工作目录。

Set-Location 不设置工作目录。它设置工作*位置*，这是 PowerShell 中类似但不同的概念。

[`Environment.CurrentDirectory`](http://msdn.microsoft.com/en-us/library/system.environment.currentdirectory.aspx)您可以通过在设置工作位置后使用问题中的 .NET 属性检查工作目录来证明这一点`cd`：

```
cd C:\Users\iain.CORP\SqlcmdQuestion
Environment::CurrentDirectory 
```

输出：

```
Z:\ 
```

我猜这个设计决定是一致的。例如，当工作位置设置为注册表配置单元时，工作目录将是未定义的。

### Invoke-Sqlcmd 违反了这个设计原则

Invoke-Sqlcmd 违反了 PowerShell 使用工作位置而不是工作目录的一般设计原则。大多数 cmdlet 使用工作位置来解析相对路径，但 Invoke-Sqlcmd 是一个例外。

使用[ILSpy 反汇编程序](http://ilspy.net/)和一点直觉来检查包含的程序集`Microsoft.SqlServer.Management.PSSnapins`，我相信我已经找到了错误的原因。

我相信cmdlet的参数`-InputFile`是由method实现的`IncludeFileName`。ILSpy 对该方法的反汇编如下所示：

```
// Microsoft.SqlServer.Management.PowerShell.ExecutionProcessor
public ParserAction IncludeFileName(string fileName, ref IBatchSource pIBatchSource)
{
    if (!File.Exists(fileName))
    {
        ExecutionProcessor.sqlCmdCmdLet.TerminateCmdLet(new FileNotFoundException(PowerShellStrings.CannotFindPath(fileName), fileName), "ExecutionFailureException", ErrorCategory.ParserError);
        return ParserAction.Abort;
    }
    BatchSourceFile batchSourceFile = new BatchSourceFile(fileName);
    pIBatchSource = batchSourceFile;
    return ParserAction.Continue;
} 
```

Invoke-Sqlcmd 使用.NET 方法`File.Exists`检查指定的输入文件是否存在。该方法的[文档](http://msdn.microsoft.com/en-us/library/system.io.file.exists.aspx)说明相对路径是使用工作目录解析的：

> path 参数允许指定相对或绝对路径信息。相对路径信息被解释为相对于当前工作目录。要获取当前工作目录，请参阅 GetCurrentDirectory。

这表明`File.Exists`在这种情况下将返回 false，这将导致问题中出现错误消息。您可以通过直接从提示符执行该方法来证明这一点：

```
cd C:\Users\iain.CORP\SqlcmdQuestion
[IO.File]::Exists('ExecQuery.sql') 
```

输出：

```
False 
```

该方法返回 false，因此 cmdlet 以“找不到文件”错误终止。

### 您可以解决异常行为

使用工作目录而不是工作位置来解析相对路径的 Invoke-Sqlcmd 有两种解决方法：

1.  始终使用绝对路径作为`-InputFile`参数的值。[CandiedCode 的回答](https://stackoverflow.com/a/12608335/111424)显示了如何做到这一点。
2.  设置工作目录并使用相对路径。

我通过这样的修改解决了这个问题而没有副作用`ExecQuery.ps1`：

```
Add-PSSnapin SqlServerCmdletSnapin100
Add-PSSnapin SqlServerProviderSnapin100

$RestoreValue = [Environment]::CurrentDirectory
[Environment]::CurrentDirectory = Get-Location
Invoke-Sqlcmd -InputFile 'ExampleQuery.sql' -Variable "ComputerName = $Env:COMPUTERNAME"
[Environment]::CurrentDirectory = $RestoreValue 
```

我看到这个输出：

```
Column1
-------
SKYPC0083 
```

成功！

新脚本在执行 Invoke-Sqlcmd 之前设置工作目录以匹配工作位置。为了避免更改工作目录的意外副作用，脚本在完成之前恢复工作目录值。

[此Channel 9 线程](http://channel9.msdn.com/forums/TechOff/249957-PowerShell-and-the-current-directory/)中描述了设置当前目录。那里的示例使用该[`Directory.SetCurrentDirectory`](http://msdn.microsoft.com/en-us/library/system.io.directory.setcurrentdirectory.aspx)方法，但我发现直接设置属性更简单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T18:42:35.833

您可以完全限定 Inputfile 位置：

```
Invoke-Sqlcmd -InputFile 'C:\Users\iain.CORP\SqlcmdQuestion\ExampleQuery.sql' -Variable "ComputerName = $Env:COMPUTERNAME" 
```

并使用变量来驱动脚本位置：

```
$FileLocation = 'C:\Users\iain.CORP\SqlcmdQuestion\' 
```

# javascript - 如何从 Backbone.LocalStorage 获取/解析数据

> ID：12604906
> 
> 赞同：1
> 
> 时间：2012-09-26T15:12:15.400
> 
> 标签：javascript, backbone.js, local-storage, marionette

我试图`Backbone.LocalStorage`从以下[jagin/todos](https://github.com/jagin/todos)中了解如何使用。

参考[Backbone.Marionette 文档](https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.compositeview.md)，为了渲染待办事项列表，编写以下代码应该足够了：

```
new CompositeView({
  model: someModel,
  collection: someCollection,
  itemView: RowView
}); 
```

因此，参考[jagin/todos](https://github.com/jagin/todos)集合应该是从`backbone.localstorage`.

我的问题是：
我想`collection/models`从 javascript 控制台得到这个。
我确实尝试了以下操作，但它返回的对象与backbone.collection 不同。

```
new Backbone.LocalStorage("todos-marionette"); 
// {"name":"todos-marionette","records":["1244f588-be3d-c493-5c86-b2abb997af82"]} 
```

有任何想法吗？

# java - 字符串中的唯一字节

> ID：12604908
> 
> 赞同：1
> 
> 时间：2012-09-26T15:12:21.813
> 
> 标签：java

我想从字符串值中获取字节（用于加密/解密目的），为此我使用了 getBytes() 方法，但是每次调用 getBytes() 方法时，它每次都会返回一个新的数组字节。我想要一个特定字符串的唯一字节数组。如何 ？另外我想将该信息（字符串或字节）存储在一个文件中，并且我想以字节的形式取回这些信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T15:22:59.547

`getBytes()`不会每次都返回 new byte[] 但内容相同。请检查以下示例

```
 byte[] b1 = "abc".getBytes();
    byte[] b2 = "abc".getBytes();
    if(b1 == b2)
    {
        System.out.println("Equal Not possible");//Not this
    }
    if(Arrays.equals(b1, b2))
    {
        System.out.println("Equal possible");//Gets printed
    } 
```

由于 Array 的内容在这里是相等的，它不应该对整个 Java 世界中任何可能的加密/描述算法产生任何影响！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T15:27:17.050

如果 String 每次都给你相同的字节数组，那就违反了方法的约定。原因如下：

```
String a = "test";
byte[] abytes1 = a.getBytes();
abytes1[0] = 0; // we are modifying the byte array.
                // There is no way to prevent this!

// some other caller later on does this:
byte[] abytes2 = a.getBytes(); 
```

如果`abytes2`是与 相同的数组`abytes1`，它的第一个条目将是 0，并且不会匹配字符串的值。String.getBytes() 每次都必须创建一个新数组，以防调用者决定修改数组。

# python - Pandas：如何更改列的所有值？

> ID：12604909
> 
> 赞同：105
> 
> 时间：2012-09-26T15:12:25.150
> 
> 标签：python, database, pandas

我有一个数据框，其中有一列名为`"Date"`，并希望该列中的所有值都具有相同的值（仅限年份）。例子：

```
City     Date
Paris    01/04/2004
Lisbon   01/09/2004
Madrid   2004
Pekin    31/2004 
```

我想要的是：

```
City     Date
Paris    2004
Lisbon   2004
Madrid   2004
Pekin    2004 
```

这是我的代码：

```
fr61_70xls = pd.ExcelFile('AMADEUS FRANCE 1961-1970.xlsx')

#Here we import the individual sheets and clean the sheets    
years=(['1961','1962','1963','1964','1965','1966','1967','1968','1969','1970'])

fr={}

header=(['City','Country','NACE','Cons','Last_year','Op_Rev_EUR_Last_avail_yr','BvD_Indep_Indic','GUO_Name','Legal_status','Date_of_incorporation','Legal_status_date'])

for year in years:
    # save every sheet in variable fr['1961'], fr['1962'] and so on
    fr[year]=fr61_70xls.parse(year,header=0,parse_cols=10)
    fr[year].columns=header
    # drop the entire Legal status date column
    fr[year]=fr[year].drop(['Legal_status_date','Date_of_incorporation'],axis=1)
    # drop every row where GUO Name is empty
    fr[year]=fr[year].dropna(axis=0,how='all',subset=[['GUO_Name']])
    fr[year]=fr[year].set_index(['GUO_Name','Date_of_incorporation']) 
```

*碰巧在我的 DataFrames 中，例如调用`fr['1961']`的值`Date_of_incorporation`可以是任何东西（字符串、整数等），所以最好完全删除这一列，然后将另一列仅包含年份附加到 DataFrames？*

* * *

## 回答 #1

> 赞同：151
> 
> 时间：2012-09-26T15:20:01.467

正如@DSM 指出的那样，您可以使用[矢量化字符串方法](http://pandas.pydata.org/pandas-docs/stable/basics.html#vectorized-string-methods)更直接地执行此操作：

```
df['Date'].str[-4:].astype(int) 
```

或者使用提取（假设每个字符串的某处只有一组长度为 4 的数字）：

```
df['Date'].str.extract('(?P<year>\d{4})').astype(int) 
```

另一种更灵活的方法可能是使用[`apply`](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.apply.html)（或等效[`map`](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.map.html)地）执行此操作：

```
df['Date'] = df['Date'].apply(lambda x: int(str(x)[-4:]))
             #  converts the last 4 characters of the string to an integer 
```

lambda 函数从 中获取输入`Date`并将其转换为年份。
您可以（也许应该）将其写得更详细：

```
def convert_to_year(date_in_some_format):
    date_as_string = str(date_in_some_format)  # cast to string
    year_as_string = date_in_some_format[-4:] # last four characters
    return int(year_as_string)

df['Date'] = df['Date'].apply(convert_to_year) 
```

*也许“年”是这个专栏更好的名字......*

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2018-02-11T21:52:31.013

您可以使用进行列转换`apply`

定义一个干净的函数来删除美元和逗号并将您的数据转换为浮点数。

```
def clean(x):
    x = x.replace("$", "").replace(",", "").replace(" ", "")
    return float(x) 
```

接下来，像这样在您的列上调用它。

```
data['Revenue'] = data['Revenue'].apply(clean) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-10-21T07:25:36.107

或者，如果想在`lambda`函数中使用`apply`函数：

```
data['Revenue']=data['Revenue'].apply(lambda x:float(x.replace("$","").replace(",", "").replace(" ", ""))) 
```

# reporting-services - 如何从 MDX 将多个值传递给我的 SSRS 报告

> ID：12604912
> 
> 赞同：1
> 
> 时间：2012-09-26T15:12:43.400
> 
> 标签：reporting-services, mdx

我需要在来自 MDX 的 ssrs 报告中将多个值传递给我的参数。
我的尺寸： `[Dimenction].[Heirarchey].[Month].&[09]&[2012]`这是内部参数。

我需要将多个月份名称和单个年份传递给我的参数，然后我的参数将从我的数据集中填充数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T15:06:09.940

一个可能的链接： [http ://social.msdn.microsoft.com/Forums/en-NZ/sqlreportingservices/thread/7f9cc219-1a57-4ddb-8bd5-5135e0aacbe6](http://social.msdn.microsoft.com/Forums/en-NZ/sqlreportingservices/thread/7f9cc219-1a57-4ddb-8bd5-5135e0aacbe6)

# silverlight - 加载组件时出错

> ID：12604917
> 
> 赞同：1
> 
> 时间：2012-09-26T15:13:09.647
> 
> 标签：silverlight

我正在将 Silverlight 3 项目转换为 Silverlight 4。我最近让该项目能够运行，但在实例化搜索窗口时遇到了问题。VS 向我抛出以下错误：

```
Microsoft JScript runtime error: Unhandled Error in Silverlight Application Set property 'System.Windows.FrameworkElement.Style' threw an exception. [Line: 242 Position: 46]   at System.Windows.Application.LoadComponent(Object component, Uri resourceLocator)
   at ESM.Visualization.SearchWindow.InitializeComponent()
   at ESM.Visualization.SearchWindow..ctor(Map mapWindow, String addressServiceUrl, String projectServiceUrl)
   at ESM.Visualization.MainPage.InstantiateSearchWindow()
   at ESM.Visualization.MainPage.MapWindow_Progress(Object sender, ProgressEventArgs e)
   at ESRI.ArcGIS.Client.Map.layersProgressHandler(Object sender, ProgressEventArgs args)
   at ESRI.ArcGIS.Client.LayerCollection.layer_OnProgress(Object sender, ProgressEventArgs args)
   at ESRI.ArcGIS.Client.Layer.ProgressHandler.Invoke(Object sender, ProgressEventArgs args)
   at ESRI.ArcGIS.Client.Layer.OnProgress(Int32 progress)
   at ESRI.ArcGIS.Client.DynamicLayer.bitmap_DownloadProgress(Object sender, DownloadProgressEventArgs e, Image img, EventHandler`1 onProgressEventHandler, Int32 id)
   at ESRI.ArcGIS.Client.DynamicLayer.<>c__DisplayClass7.<getSourceComplete>b__4(Object sender, DownloadProgressEventArgs e)
   at MS.Internal.CoreInvokeHandler.InvokeEventHandler(Int32 typeIndex, Delegate handlerDelegate, Object sender, Object args)
   at MS.Internal.JoltHelper.FireEvent(IntPtr unmanagedObj, IntPtr unmanagedObjArgs, Int32 argsTypeIndex, Int32 actualArgsTypeIndex, String eventName) 
```

我研究了错误并尝试按照[此解决方案](http://forums.silverlight.net/t/195607.aspx/1)重新安装 Silverlight 。但是错误仍然发生。我看了[这个 SO question](https://stackoverflow.com/questions/4166533/problem-converting-silverlight-3-to-4)，但我的 App.xaml 几乎没有 242 行。这是我在第 242 行附近的 MainPage.xaml：

```
<StackPanel Orientation="Vertical" HorizontalAlignment="Left" Grid.Row="2" VerticalAlignment="Bottom">
            <esriToolkit:Navigation x:Name="MapNavigation" Margin="5" Map="{Binding ElementName=MapWindow}" Visibility="Collapsed"  />
            <!--<esri:ScaleBar x:Name="MainScaleBar" Margin="5" MapUnit="DecimalDegrees" Foreground="Black" 
                Map="{Binding ElementName=MapWindow}"
                DisplayUnit="Miles" Visibility="Visible" />-->
</StackPanel> 
```

这是我试图实例化的搜索窗口的 .xaml（在第 242 行左右）：

```
<grid:AgDataGrid x:Name="grdAddressResults" Grid.Row="1" Grid.Column="0" ColumnsAutoWidth="True"
                                 ShowTotals="False" FocusMode="Row" FocusedRowChanged="grdResults_FocusedRowChanged"
                                 IsMultiSelect="False" Margin="0,10,0,0">
                                <grid:AgDataGrid.Columns>
                                    <grid:AgDataGridColumn FieldName="Address" />
                                    <grid:AgDataGridColumn FieldName="X" Visible="False" />
                                    <grid:AgDataGridColumn FieldName="Y" Visible="False" />
                                </grid:AgDataGrid.Columns>
                                <grid:AgDataGrid.TotalSummary>
                                    <grid:AgDataGridSummaryItem FieldName="Address" SummaryType="Count" Title="Matches Found" />
                                </grid:AgDataGrid.TotalSummary>
                            </grid:AgDataGrid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T16:47:30.417

异常告诉

> 设置属性“System.Windows.FrameworkElement.Style”引发异常。

虽然这不在您显示的代码中 - 但我几乎可以肯定您会在代码中的某处找到类似的内容：

```
<SomeControl Style="MyCoolStyle" ... /> 
```

它应该在哪里：

```
<SomeControl Style="{StaticResource MyCoolStyle}" ... /> 
```

# java - 如何配置石英作业以在兵马俑集群上运行？

> ID：12604924
> 
> 赞同：0
> 
> 时间：2012-09-26T15:13:15.120
> 
> 标签：java, quartz-scheduler, terracotta

我正在尝试在 Tomcat 中配置我们的石英作业以在 terracotta 集群上运行。春季兵马俑道具配置看起来像这样

```
<prop key="org.quartz.jobStore.class">org.terracotta.quartz.TerracottaJobStore</prop>
<prop key="org.quartz.jobStore.tcConfigUrl">localhost:9510</prop> 
```

兵马俑服务器正在运行。

当我启动 Tomcat 实例时，出现以下错误

```
java.lang.ClassNotFoundException: org.terracotta.collections.LockStrategy 
```

我在任何地方都找不到这个类，无论是在石英陶罐或陶土工具包罐中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T22:39:41.630

这应该在您的工具包运行时 jar 中。你是说这里面没有？你能提供更多信息吗？喜欢版本和堆栈跟踪？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T15:23:08.780

你用的是什么版本的兵马俑？

快速的[谷歌搜索表明](http://www.jarvana.com/jarvana/inspect/net/sf/ehcache/ehcache-terracotta/2.1.0/ehcache-terracotta-2.1.0-javadoc.jar?folder=org/terracotta/collections/)该课程在`net.sf.ehcache:ehcache-terracotta:2.1.0`- 我不确定更高版本。如果它不在您正在使用的 terracotta jar 的当前版本中，您可能需要仔细检查您没有使用各种库的不兼容版本。

# php - 用php中的子域结构重写URL

> ID：12604925
> 
> 赞同：0
> 
> 时间：2012-09-26T15:13:15.753
> 
> 标签：php, apache, .htaccess, mod-rewrite

我正在尝试创建一个类似 category.\ArticleName 的 URL

这是我在 .htaccess 中写的

```
Options +FollowSymLinks
RewriteEngine on

RewriteCond %{HTTP_HOST} ^(.*).msite.com/([a-zA-Z]+) [NC]
RewriteRule (.*) $1/Html/HomePage.php?Category=%1&name=%2 [NC,QSA] 
```

我实际上试过

```
 RewriteCond %{HTTP_HOST} ^(.*).msite.com$ [NC]
 RewriteRule (.*) $1/Html/HomePage.php?Category=%1 [NC,QSA] 
```

它工作正常意味着启用了通配符子域等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T17:42:40.073

关闭，试试：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{HTTP_HOST} ^(.*).msite.com$ [NC]
RewriteRule (.*) /Html/HomePage.php?Category=%1&name=$1 [L,NC,QSA] 
```

在开始时您需要两个额外的条件，这样有效的请求就不会被路由到 HomePage.php。

# java - JSF + Spring + Hibernate + 现有项目

> ID：12604928
> 
> 赞同：0
> 
> 时间：2012-09-26T15:13:19.130
> 
> 标签：java, spring, hibernate, jsf

事情就是这样。

我从 JSF + PrimeFaces + Spring + Hibernate 开始。

**问题是：**我们有一个桌面应用程序，其中包含所有创建和准备的内容，但现在我们正在转向网络。

好吧，当我尝试加载 applicationContext

```
 <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/applicationContext.xml</param-value>
    </context-param> 
```

它出现了这个

```
Caused by: java.lang.ClassNotFoundException: com.planner.dao.Dao at
 org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1714) at     org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559) ... 69 more
Related cause:
org.springframework.beans.factory.CannotLoadBeanClassException: Error loading class [com.planner.pov.dao.AcaoDaoImpl]
 for bean with name 'acaoDao' defined in URL [/WEB-INF/applicationContext.xml]: problem with class file or dependent class; nested exception is java.lang.NoClassDefFoundError: com/planner/dao/Dao at 
org.springframework.beans.factory.support.AbstractBeanFactory.resolveBeanClass(AbstractBeanFactory.java:1141) 
```

好吧，该类`"com.planner.dao.Dao"`属于另一个项目，我已经将该项目放在构建路径中，但它没有重新调整。

是否还有其他配置。除了导入项目之外做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T16:22:38.490

现在我正在做 Spring + JSF 项目。这对我来说是工作。只需尝试如下：

web.xml

```
 <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/applicationContext.xml</param-value>
    </context-param>
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>
    <listener>
        <listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>
    </listener> 
```

面孔-config.xml

```
 <application>
        <variable-resolver>org.springframework.web.jsf.DelegatingVariableResolver</variable-resolver>   
    </application> 
```

# ios - NSClassFromString 检查是否在 iOS 版本中继续工作

> ID：12604937
> 
> 赞同：1
> 
> 时间：2012-09-26T15:13:45.857
> 
> 标签：ios, ios6

我还没有时间完全进入 iOS 模块和构建，但我需要使用 iOS 5.1 和 4.4 SDK 进行另一个更新。我现在想为 iOS 上的人更改一个显示的按钮。不确定这是否可行。我基本上是通过 NSClassFromString 检查向前而不是向后。此构建是特定的还是仅基于构建的 SDK 版本？我只想查看 iOS 版本以了解要显示的内容和屏幕上的位置。纯粹的老式功能，对于 iOS6 没有什么新东西，但我正在使用 5.1 构建并定位到 3.0（仍然）。

```
if (NSClassFromString(@"UICollectionView")) {

        //  Here is old code to show a simple button
        //  that only shows differently for iOS6

} else {  // same old button that will work as before on older devices

} 
```

感谢您的任何想法...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T15:16:40.280

为什么不直接询问ios版本呢？

```
NSString *version = [[UIDevice currentDevice] systemVersion];
if ([version hasPrefix:@"6"]) {
    //  Here is old code to show a simple button
    //  that only shows differently for iOS6
} else {  // same old button that will work as before on older devices

} 
```

编辑：

未来的 iOS 版本安全代码（是的，不那么漂亮）：

```
NSInteger major = 0;
NSString *version = [[UIDevice currentDevice] systemVersion];
NSRange seperator = [version rangeOfString:@"."];
if (seperator.location != NSNotFound)
    major = [[version subStringToIndex:range.location] integerValue];
else
    major = [version integerValue];

if (major >= 6) {
    //  Here is old code to show a simple button
    //  that only shows differently for iOS6
} else {  // same old button that will work as before on older devices

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T16:14:54.353

要使代码仅在 abc 及更高版本中可用，请将其包装在运行时版本检查中：

```
if ([@"a.b.c" compare:UIDevice.currentDevice.systemVersion options:NSNumericSearch] != NSOrderedDescending) {
    // only available in a.b.c. and after
} 
```

但是，通常最好*不要*对操作系统版本（或设备类型）做出任何假设，而是明确检查要存在的功能。Indeed 用于`NSClassFromString(..)`查看课程是否可用。用于`[object respondsToSelector:]`查看对象是否支持某种方法。

# c# - 无需 wddm 1.1 即可运行 windows 7 模拟器

> ID：12604942
> 
> 赞同：1
> 
> 时间：2012-09-26T15:14:14.043
> 
> 标签：c#, .net, windows, windows-phone-7

我来自android背景。我已经安装了 .net 和 windows phone sdk。当我试图打开 windows phone 模拟器时，它说：

> 我的电脑没有所需的图形单元处理。. . .

我有英特尔 945 显卡。我尝试了 wddm 1.1。但似乎我运气不好。我找不到任何驱动程序。

有没有什么方法可以在不需要 wddm 1.1 的情况下创建 Windows 应用程序？

这真是令人沮丧。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T23:12:22.147

英特尔没有为 945 芯片组提供 WDDM 1.1 驱动程序。

如果这是一台台式机，您总是可以购买 40 美元的中/低端独立显卡适配器，其中大部分支持 WDDM 1.1（例如[http://www.newegg.com/Product/Product.aspx?Item=N82E16814131398](http://www.newegg.com/Product/Product.aspx?Item=N82E16814131398)） . 如果这是笔记本电脑，请寻找新设备：

当运行像 Windows Phone 7 模拟器这样要求苛刻的东西时，一台（现在，有点老了）945 时代的 PC 不会提供可靠的体验。注意：WP7 模拟器是一个完整的设备模拟器，而不是其他移动平台的 SDK 上提供的简单模拟器。

在运行 Windows Phone 8 SDK 时更是如此，因为它的模拟器在 Hyper-V 上运行，需要 64 位 CPU： http: [//www.wpcentral.com/windows-phone-8-emulator%E2%80% 99 年代的硬件要求](http://www.wpcentral.com/windows-phone-8-emulator%E2%80%99s-hardware-requirements)。

我强烈建议瞄准具有支持二级地址转换 (SLAT) 的处理器的 Nehalem 级 PC（即基于 Core-i5/7 的 PC）：这将防止您的 CPU 和 GPU 不必要地刷新 TLB 并减慢您的 PC ：http: [//blogs.msdn.com/b/tvoellm/archive/2009/04/06/why-does-my-desktop-box-slowdown-when-i-install-hyper-v.aspx](http://blogs.msdn.com/b/tvoellm/archive/2009/04/06/why-does-my-desktop-box-slowdown-when-i-install-hyper-v.aspx)。

HTH。

# php - 在 PHP 中没有得到正确的时差

> ID：12604943
> 
> 赞同：1
> 
> 时间：2012-09-26T15:14:13.887
> 
> 标签：php

```
$time1 = "01:00";
$time2 = "04:55";
list($hours1, $minutes1) = explode(':', $time1);
$startTimestamp = mktime($hours1, $minutes1);

list($hours2, $minutes2) = explode(':', $time2);
$endTimestamp = mktime($hours2, $minutes2);

$seconds = $endTimestamp - $startTimestamp;
$minutes = ($seconds / 60) % 60;
$hours = round($seconds / (60 * 60));

echo $hours.':'.$minutes;
exit; 
```

输出 4:55，应该是 3:55 吗？

这里有什么问题？如果是 01:00 和 02:00，它可以正常工作，但不是上面的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T15:15:32.420

使用`floor`代替`round`...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T15:17:40.737

或者只是转换为整数。

```
$hours = (int) ($seconds / (60 * 60)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T15:20:01.330

PHP 可以为您完成的计算过多，同时也减少了出错的可能性

```
$time1 = Datetime::createFromFormat("h:i", "01:00");
$time2 = Datetime::createFromFormat("h:i", "04:55");

$diff = $time1->diff($time2);
var_dump($diff->format("%h %i")); 
```

输出

```
string '3:55' (length=4) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T15:21:20.580

您还可以使用以下方法节省一些时间`strtotime`：

```
$time1 = strtotime("01:00");
$time2 = strtotime("04:55");

$seconds = $time2-$time1;
$minutes = ($seconds / 60) % 60;
$hours = floor($seconds / (60 * 60));

echo $hours.':'.$minutes; 
```

如前所述， using`floor`将产生您需要的结果：

**结果**

```
3:55
```

# ios - 如何检测设备是否为 iPhone 5？

> ID：12604944
> 
> 赞同：18
> 
> 时间：2012-09-26T15:14:20.487
> 
> 标签：ios, xcode

> **可能重复：**
> [如何检测 iPhone 5（宽屏设备）？](https://stackoverflow.com/questions/12446990/how-to-detect-iphone-5-widescreen-devices)

我正在尝试向现有 ios4 项目添加新视图以处理新的 iphone5 屏幕尺寸。

但是我这里没有要测试的iphone，我用来测试屏幕尺寸的代码不起作用，只是想知道是否有另一种检测设备类型的方法？

```
NSLog(@"%f", [ [ UIScreen mainScreen ] bounds ].size.height);

if([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone){
    if([UIScreen mainScreen].bounds.size.height == 568.0)
    {
        //move to your iphone5 storyboard
        [self changeView:splashScreenBIGV viewH:splashScreenH animLength:SCREEN_CHANGE_ANIM_LENGTH];
   }
    else{
        //move to your iphone4s storyboard
        [self changeView:splashScreenV viewH:splashScreenH animLength:SCREEN_CHANGE_ANIM_LENGTH];            
    }
} 
```

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-10-06T18:04:15.800

对于我的通用应用程序[Forex App](http://itunes.apple.com/app/forex-app/id527137098?mt=8)，我只是使用屏幕高度检测概念，如下所示：

```
CGSize screenSize = [[UIScreen mainScreen] bounds].size;

if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone) {
    if (screenSize.height > 480.0f) {
        /*Do iPhone 5 stuff here.*/
    } else {
        /*Do iPhone Classic stuff here.*/
    }
} else {
    /*Do iPad stuff here.*/
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T15:29:24.627

答案在[这里](https://stackoverflow.com/a/12447113/300292)。基本上，你没有。使用 iOS 6 中新的约束布局系统。如果您必须为每台具有不同屏幕尺寸/分辨率的新设备修改布局，您将陷入困境。

# ruby-on-rails - 如何动态生成关联名称？

> ID：12604949
> 
> 赞同：1
> 
> 时间：2012-09-26T15:14:32.683
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, refactoring, squeel

我正在使用 Ruby on Rails 3.2.2 和 Squeel gem。我有以下陈述，我正在尝试重构*Mixin 模块*`my_squeel_query`中的方法（因为它被我的许多模型使用）：

 *```
# Note: 'article_comment_associations' and 'model_as_like_article_comment_associations'
# refer to database table names.

class Article < ActiveRecord::Base
  def my_squeel_query
    commenters.
      .where{
        article_comment_associations.article_id.eq(my{self.id}) & ...
      }
  end
end

class ModelAsLikeArticle < ActiveRecord::Base
  def my_squeel_query
    commenters.
      .where{
        model_as_like_article_comment_associations.article_id.eq(my{self.id}) & ...
      }
  end
end 
```

我的问题是我*无法*通过在 Mixin 模块中生成动态名称来重构`article_comment_associations`和声明。`model_as_like_article_comment_associations`也就是说，如果那是`String`我可以通过使用`"#{self.class.to_s.singularize}_comment_associations"`如下内容动态生成相关名称：

```
class Article < ActiveRecord::Base
  include MyModule
end

class ModelAsLikeArticle < ActiveRecord::Base
  include MyModule
end

module MyModule
  def my_squeel_query
    commenters.
      .where{
        # Note: This code doesn't work. It is just an sample.
        "#{self.class.to_s.singularize}_comment_associations".article_id.eq(my{self.id}) & ...
      }
  end
end 
```

但是，由于这不是我的情况，我不能“建立”名称并使其`my_squeel_query`在模型之间“共享”。

如何动态生成与 Squeel gem 相关的关联名称？我应该考虑以另一种方式重构吗？你有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T16:39:10.347

如果您动态生成方法，则可以执行此操作。`Module.included`为此目的提供了该方法：

```
module ModuleAsLikeArticle
  def self.included(base)
    base.send(:define_method, "#{base.to_s.singularize}_comment_associations") do
      # ...
    end
  end
end 
```

这在导入模块时触发，`include`并允许您创建专门为此定制的方法。

作为注释，您可能希望使用`base.name.underscore.singularize`更具可读性的方法名称。按照惯例，方法名称中不应包含大写字母，尤其是第一个字符。

然而，传统的 Rails 类型应用程序使用不同的方法，而是定义一个可用于按需创建这些的类方法：

```
module ModuleAsLikeArticle
  def has_comments
    base.send(:define_method, "#{base.to_s.singularize}_comment_associations") do
      # ...
    end
  end
end 
```

这将像这样使用：

```
class ModelAsLikeArticle < ActiveRecord::Base
  extend MyModule

  has_comments
end 
```

由于在调用该方法之前不会创建该方法`has_comments`，因此您可以安全地扩展`ActiveRecord::Base`，然后在所有需要该功能的类中插入适当的调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T23:13:48.460

由于 DSL 是 instance_evaled，因此您实际上可以这样说：

```
def my_squeel_query
  base = self
  commenters.
    .where{
      # Note: This code does work. Because it's awesome.
      __send__("#{base.class.to_s.singularize}_comment_associations").
        article_id.eq(my{self.id})
    }
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T16:09:34.630

我想你可能会在 Rails 类 (http://api.rubyonrails.org/classes/ActiveRecord/Reflection/ClassMethods.html) 中找到你需要的东西`Reflection`，正如页面所说，它允许你询问 ActiveRecord 类的关联和聚合。*

# string - 为什么我得到的字符串长度值不正确？

> ID：12604951
> 
> 赞同：2
> 
> 时间：2012-09-26T15:14:38.810
> 
> 标签：string, scala

我的教授正在使用 Horstmann 的书“不耐烦的 Scala”教我们 Scala，我们的一项家庭作业直接来自这本书；第 4 章，练习 2。

我们希望以文本格式阅读电子书，教授指定输入文件应为“Moby Dick”，可从 Gutenberg 项目免费获得：http: [//www.gutenberg.org/ebooks/2701。 txt.utf-8](http://www.gutenberg.org/ebooks/2701.txt.utf-8)

我的代码有效，就计算单词的实例而言。但是，他添加了要求，我们必须将输出格式化为两列，其中单词左对齐，计数右对齐。为此，我正在确定书中最长的单词，以便计算“单词”列的宽度。但是，我得到的字符串长度值是错误的。事实上，它告诉我所有的字符串都是相同的长度。"a" 被报告为长度 26，就像 "Whale"、"Ishmael" 等...

这是代码：

```
object Chapter4Exercise2 extends App {

  //for sorting
  import util.Sorting._

  //grab the file
  val inputFile = new java.util.Scanner(new java.io.File("moby.txt"))

  //create a mutable map where key/values == word/count
  val wordMap = collection.mutable.Map[String, Int]() withDefault (_ => 0)

  //for formatting output (later), the longest word length is relevant
  var longestWord = 0
  var theWord: String = ""

  //start reading each word in the input file
  while (inputFile hasNext) {
    //grab the next word for processing, convert it to lower case, trim spaces and punctuation
    var nextWord = inputFile.next().toLowerCase().trim().filter(Character.isLetter(_))
    //if it's the longest word, update both theWord and longestWord
    if (nextWord.size > longestWord) longestWord = nextWord.size; theWord = nextWord; println(theWord + " " + longestWord)
    //update the map value for the key with same value as nextWord
    wordMap(nextWord) += 1
  }

    println("Longest word is " + theWord + " at " + longestWord + " Characters")
} 
```

这些行的输出：

```
 if (nextWord.size > longestWord) longestWord = nextWord.size; theWord = nextWord; println(theWord + " " + longestWord) 
```

和

```
 println("Longest word is " + theWord + " at " + longestWord + " Characters") 
```

很遥远。它告诉我输入文件中的每个单词都是 26 个字符长！

这是输出的一个小样本：

外壳 26

26日

26

冲浪26

海滩 26

和 26

然后 26

潜水 26

下降 26

进入 26

我错过了什么/做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T15:19:25.450

```
if (nextWord.size > longestWord) longestWord = nextWord.size; theWord = nextWord; println(theWord + " " + longestWord) 
```

你不应该像那样在一行上写多个语句。让我们把它写成多行并正确缩进：

```
if (nextWord.size > longestWord)
    longestWord = nextWord.size
theWord = nextWord
println(theWord + " " + longestWord) 
```

你现在看到问题了吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T15:18:37.333

尝试把你`{`的`}`if 语句替代方案放在周围。

您可以通过以结构化方式格式化代码来避免这种陷阱 - 始终在代码块周围使用大括号。

```
 if (nextWord.size > longestWord) 
 {
      longestWord = nextWord.size; 
      theWord = nextWord; 
      println(theWord + " " + longestWord);
 } 
```

您当前的代码相当于

```
 if (nextWord.size > longestWord) 
 {
      longestWord = nextWord.size; 
 }
 theWord = nextWord; 
 println(theWord + " " + longestWord); 
```

# process - 此代码的进程创建树？

> ID：12604960
> 
> 赞同：0
> 
> 时间：2012-09-26T15:15:05.493
> 
> 标签：process, posix, fork

此代码的进程创建树是什么（假设所有分叉都成功）？

```
if(fork())
    fork();
n = 3;
for(i=1;i<n;++i)
{
    if(pid = fork())
        break;
} 
```

这是我尝试过的：

```
 [0]
         |
         /\
     [1]    [1]
      |      |
     [2]    [2]
      |      |
     [3]    [3]
      |
     [4] 
```

但这甚至不是选择之一！任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T15:43:05.417

第一行：

```
if (fork()) 
```

在这个fork之后，有两个进程，父进程和子进程。在父级中，fork() 返回非零值。在孩子中，fork() 返回零。这意味着下一行将仅在父级中运行。

```
 fork(); 
```

父级再次分叉。现在有三个进程，这三个进程都将运行其余的代码。

```
for(i=1;i<n;++i)
{
    if(pid = fork())
        break;
} 
```

首先，i=1。这三个进程中的每一个都创建一个子进程，看到一个非零结果，然后跳出循环。这样就完成了原来的三个过程。但孩子们会继续前进。

下一次循环，i=2。同样的事情也会发生。三个子进程中的每一个都派生出一个自己的子进程，看到一个非零结果，然后中断。三个新的孩子将继续前进。

依此类推，直到 i=n-1。

我将不再尝试 ASCII 艺术，但生成的树看起来有点像某个熟悉的银器......

# php - 链接到文本字段

> ID：12604965
> 
> 赞同：1
> 
> 时间：2012-09-26T15:15:22.590
> 
> 标签：php, wordpress

我试图通过将未登录的人链接到侧边栏中的登录字段来让他们登录。

到目前为止，我设法做到了这一点：

```
<?php comment_form(array(must_log_in => sprintf(__('You must be <a href="#reg">logged in</a> to comment.')))); ?> 
```

所以我正在使用`Login with AJAX`小部件，或者我可以将插件的模板标签放在那里，即`<?php login_with_ajax() ?>`. 就在我放置的小部件之前`<a name="reg"></a>`，因此当他们单击链接登录时，他们会到达登录表单所在的位置，但它们并未放置在用户名字段中。有没有办法（我怀疑）可以将焦点放在用户名字段中？那就是那里有一个闪烁的光标？

“不可能”也是一个可以接受的答案，所以我可以继续我的下一个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T15:19:05.727

假设像`<input type="text" id="username">`，你可以使用

`document.getElementById("username").focus();`

在 JavaScript 中。

# php - ajax 请求被发送到 PHP 进行一些维护，但是因为它不喜欢 php 标签而出错？

> ID：12604966
> 
> 赞同：0
> 
> 时间：2012-09-26T15:15:23.797
> 
> 标签：php, jquery, ajax

我的 AJAX 请求 ping 服务器和 URL 但返回错误，因为它不喜欢 '<' 作为 php 脚本的打开标记。

AJAX 脚本。

```
 $.ajax({
url: "data.php",
type: "POST",
data: JSON.stringify({"data":transaction}),
dataType: "json",
success: function(data, textStatus, jqXHR){
    alert("success");
    currentProcesses -= 1;
    $("<span>").html("Ajax Call Complete.  Releasing lock for process").appendTo($(body));
},
error: function(jqXHR, textStatus, errorThrown){
    alert("error with ajax call "+textStatus+" "+errorThrown);
}
 }); 
```

脚本

```
 <?php
   $win = $_POST['data'];
 ?> 
```

我是否为 AJAX 调用使用了错误的标志设置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T15:18:28.703

您的 POST 请求的正文被编码为 application/json 而不是 application/x-www-form-urlencoded。

您没有做任何事情来让请求说数据是用 JSON 编码的，并且您没有在 PHP 中做任何事情来尝试解析 JSON。

结果，PHP 无法填充`$_POST`，因为数据格式错误。

解决方案是：不要发送 JSON。只需给 data 属性一个对象作为它的值，jQuery 就会为你将它序列化为 application/x-www-form-urlencoded 数据。

```
data:  { "data": transaction }, 
```

（假设这`transaction`不是复杂的数据类型（如数组或对象）。

此外，`body`变量是`undefined`。您应该使用字符串（使其成为选择器：）`"body"`或直接传递正文元素：`document.body`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T15:19:01.797

它是否因收到的内容而窒息？试试这个……在你的 span 标签上放一个 id 属性，然后引用它。

在页面中：

```
<span id="someName">...</span> 
```

在您的 ajax 调用中：

```
$("#someName").html(... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T15:21:25.680

尝试使用**class**或**id**`span`来制作更独特的

 ****```
<span id="output"></span> 
```

试试这个。

```
$("#output").html("Ajax Call Complete.  Releasing lock for process").appendTo($(body));
} 
```****

# asp.net-mvc-3 - 在 MVC3 中处理 PrincipalPermission 异常

> ID：12604968
> 
> 赞同：1
> 
> 时间：2012-09-26T15:15:33.340
> 
> 标签：asp.net-mvc-3, exception, exception-handling, principalpermission

在我的 MVC 应用程序中，我用这个修饰了我的控制器的一些方法：

```
[PrincipalPermission(SecurityAction.Demand, Role = "Administrator")]
public ActionResult Create(FormCollection collection)
{
    try {
             ...
    }
    catch {
        return View();
    }
} 
```

事实上，如果我没有登录或没有使用正确的角色，MVC 应用程序会抛出异常。问题是我没有将应用程序重定向到错误页面。

我尝试像这样创建一个基本控制器：

```
[HandleError]
public class BaseController : Controller
{
    protected override void OnException(ExceptionContext filterContext)
    {
        // Make use of the exception later
        this.Session["ErrorException"] = filterContext.Exception;

        // Mark exception as handled
        filterContext.ExceptionHandled = true;

        // ... logging, etc

        // Redirect
        filterContext.Result = this.RedirectToAction("Error", "Home");

        base.OnException(filterContext);
    }

} 
```

然后在 Home 控制器中添加 Error 视图以及实际的 View。问题是，当我在 Visual Studio 中尝试此操作时，我首先在输入受保护的操作方法时遇到异常：

```
 SecurityException was unhandled by the application 
```

然后我必须执行 Debug|Continue，然后我才被重定向到 Error 视图，但这在生产应用程序中是不可接受的，因为它应该直接进入 Error 视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T00:26:13.753

只是想知道为什么您不只是使用标准 AuthorizeAttribute。很确定它会做同样的事情并且可以正常工作吗？

例如

```
[Authorize(Roles="Administrator")]
public ActionResult Create(FormCollection collection) 
```

关于一般 MVC 安全性的文章在这里。 [http://www.codeproject.com/Articles/288631/Secure-ASP-NET-MVC3-applications](http://www.codeproject.com/Articles/288631/Secure-ASP-NET-MVC3-applications)

# jsf - Richfaces：丰富：选择点击事件失败

> ID：12604972
> 
> 赞同：0
> 
> 时间：2012-09-26T15:15:39.970
> 
> 标签：jsf, richfaces, ajax4jsf

我正在使用丰富的：选择，我想在页面上单击它时重新填充它。我尝试使用 a4j:ajax 监听 onClick-Event，但似乎从未收到。出于测试目的，我向控件添加了一个警报，该警报在不可预知的点击次数后显示。我的 Backing Bean 中的代码永远不会被调用。

如果我将控件更改为 h:selectOneMenu 它可以工作，但列表会立即折叠，因此用户无法选择项目。此外，手动输入是必需的功能。

我的 JSF 页面中的代码：

```
<rich:select id="auftragsIdsCombo" value="#{einsatzController.einsatz.auftrag.id}" enableManualInput="true" onclick="alert('hi')">
    <f:selectItem itemLabel="" noSelectionOption="true" />
    <f:selectItems value="#{einsatzController.auftragsIds}" />
    <a4j:ajax event="click" render="auftragsIdsCombo" listener="#{einsatzController.loadAuftragsIds()}"/>
</rich:select> 
```

也许还有另一种方法可以做到这一点，我不知道。我只想在单击下拉框后加载项目，以便用户可以选择一个或通过在控件中键入来使用自动完成。

问候

# iphone - 数组 removeObjectsAtIndexes：

> ID：12604973
> 
> 赞同：0
> 
> 时间：2012-09-26T15:15:43.300
> 
> 标签：iphone, xcode, cocos2d-iphone

我有一个问题，从数组中删除项目..

首先：我有一个 int 类型的变量，叫做 zan。在我的 HelloWordScene.h

```
int zan;
NSMutableArray * targets;
NSMutableArray *projectiles; 
```

在我的 HelloWordScene.m 中。我有一个对象，动画：

```
-(id) init {
    if((self = [super init])) {
        [self schedule:@selector(update:)];
        _targets = [[NSMutableArray alloc] init];
        _projectiles = [[NSMutableArray alloc] init];
    }
    [self schedule:@selector(gameLogic:) interval:3];
    return self;
} 
```

在我的选择器中，我增加了 var：

```
-(void)gameLogic:(ccTime)dt {
    [self addTarget];
    zan ++;
} 
```

后来我有一个动画，我有一个 addTarget：

```
// This loads an image of the same name (but ending in png), and goes through the
// plist to add definitions of each frame to the cache.
[[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:@"zancudo.plist"];

// Create a sprite sheet with the images
CCSpriteBatchNode *spriteSheet = [CCSpriteBatchNode batchNodeWithFile:@"zancudo.png"];
[self addChild:spriteSheet];

// Load up the frames of our animation
NSMutableArray *walkAnimFrames = [NSMutableArray array];
for(int i = 0; i <= 4; ++i) {
    [walkAnimFrames addObject:[[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:[NSString stringWithFormat:@"zancu000%d.png", i]]];
}
CCAnimation *walkAnim = [CCAnimation animationWithFrames:walkAnimFrames delay:0.1f];

// Create a sprite for our bear
CGSize winSize = [CCDirector sharedDirector].winSize;
self.bear = [CCSprite spriteWithSpriteFrameName:@"zancu0001.png"];

//random position
int minY = _bear.contentSize.width/2;
int maxY = winSize.width - _bear.contentSize.width/2;
int rangeY = maxY - minY;
int actualX = (arc4random() % rangeY) + minY;

// Create the target slightly off-screen along the right edge,
// and along a random position along the Y axis as calculated above
_bear.position = ccp(actualX,winSize.height + (_bear.contentSize.height/2));

self.walkAction = [CCRepeatForever actionWithAction:[CCAnimate actionWithAnimation:walkAnim restoreOriginalFrame:NO]];

//animation
[spriteSheet addChild:_bear];
//∫aqui pasar un for para poder saber que position es
CCLOG(@"cantidad de zancudos%d",zan);
[_targets insertObject:_bear atIndex:zan]; 
```

我已经为索引删除了一个可变的 _target - 我有一个选择器更新。尝试删除一个可变数组。

```
for (CCSprite *target in targetsToDelete) {
        if (_targets.count!=0) {
            for (int j=1; j==_targets.count; j++) {
                [_targets removeObjectAtIndex:j];
            }

        } 
```

我需要帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T15:23:17.160

您的循环将尝试访问数组边界之外的索引...试试这个

```
for (int j = 0; j == _targets.count - 1; j++) 
{                 
     [_targets removeObjectAtIndex:j];             
} 
```

但是，由于您似乎只是使用此代码删除数组的最后一个元素，因此您可以跳过 for 循环并使用：

```
[_targets removeLastObject]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T15:32:49.613

从 _targets 中删除对象的那一刻，有效计数实际上会发生变化。因此，如果您以 10 的计数开始循环，最终 j 的值将超出范围。我没有很好地遵循您的 if ( == ) 的逻辑，但是如果您尝试删除所有对象，而不是循环：

```
[_targets removeAllObjects]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T10:56:59.037

使用这样的语法进行无崩溃删除；

```
NSArray *array = [NSArray arrayWithArray: _targets];

for(CCSprite *sprite in array)
{
    if(sprite.tag == kToDelete) //mark somewhere in game :or use ur logic here
    {
        [_targets removeObject: sprite];
        [sprite stopAllActions];
        [sprite removeFromParentAndCleanup:YES];
    }
} 
```

# javascript - 页面加载时选框停止并从按钮开始

> ID：12604976
> 
> 赞同：0
> 
> 时间：2012-09-26T15:15:58.287
> 
> 标签：javascript, html, cordova, marquee

我在页面上有一个选框（滚动页面），当您启动页面时它会直接滚动。但是我希望它在我按下按钮时滚动，所以不要直接滚动。它对应于一个音频文件（歌曲文本）。我需要添加什么来停止直接在页面上滚动的文本输入。

这是选框：

```
<marquee behavior="scroll" height="100%" vspace="0%" direction="up" id="mymarquee" scrollamount="0" scolldelay="1000" loop="1"> SONG TEXT GOES HERE </marquee> 
```

这些是我想在音频功能到位的情况下连接到上述脚本的按钮，因此当您进入页面时选取框不会滚动，当您按下播放按钮时开始滚动，当您再次单击按钮时暂停等.

```
<div id=audioplay>
<div id="HTML5Audio"><audio id="myaudio"></audio>
<input id="audiofile" type="text" value="" style="display: none;"/>

<img id="off" src="images/general/sound-off.png" width="40" height="32" onClick="show('on'); hide('off'); playAudio(); document.getElementById('mymarquee').start();" alt="on">

<img id="on" src="images/general/sound-on.png" width="40" height="32" onClick="show('pause'); hide('on'); pauseAudio(); document.getElementById('mymarquee').stop();" style="display:none;" alt="off">

<img id="pause" src="images/general/sound-pause.png" width="40" height="32" onClick="show('on'); hide('pause'); playAudio(); document.getElementById('mymarquee').start();" style="display:none;" alt="on">

</div>     
​&lt;/div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T16:38:03.780

根据您的描述，以下是我能想到的..

```
<marquee behavior="scroll" direction="left" id="mymarquee" >
<p>Go on... press the button!</p>
</marquee>
<input type="button" value="Stop Marquee" onClick="document.getElementById('mymarquee').stop();">
<input type="button" value="Start Marquee" onClick="document.getElementById('mymarquee').start();">

<script>
$(document).ready(function(){
    $("#mymarquee")[0].stop();
})​;
</script> 
```

[演示](http://jsfiddle.net/N5J3W/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T03:02:18.867

通过在正文 onload 中添加 mymarquee.stop()，解决了选取框的自动启动问题。:-)

```
<body onload="document.getElementById('mymarquee').stop();"> 
```

现在我们有一个工作的多切换播放按钮，可以播放和暂停音频文件，同时在整个屏幕上滚动音频的歌曲文本（包括暂停）。奇迹般有效 ：-）

# c# - 在接口方法定义中将函数作为参数传递

> ID：12604981
> 
> 赞同：0
> 
> 时间：2012-09-26T15:16:00.930
> 
> 标签：c#, interface, .net-3.5, parameters, lambda

我目前正在尝试使用（可能）C# 的 Func 或 Action 类型来处理 lambdas。

我想创建一个名为 IMyInterface 的接口，它定义了一个名为 CreateCRUD 的方法。这应该采用 5 个参数。第一个是字符串。接下来的四个是调用创建、读取、更新和删除方法的函数。

```
interface IMyInterface
{
    void CreateCRUD(string name, Action<void> createFunc, Action<void> readFunc, Action<void> updateFunc, Action<void> deleteFunc);
} 
```

四个函数定义应该不带参数并且不返回任何内容。上面的代码无法编译。请指出我正确的方向。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T15:19:44.620

请改用非泛型[`Action`](http://msdn.microsoft.com/en-us/library/system.action.aspx)。

```
interface IMyInterface
{
    void CreateCRUD(string name, Action createFunc, Action readFunc, Action updateFunc, Action deleteFunc);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T15:20:52.700

[`Action<T>`](http://msdn.microsoft.com/en-us/library/018hxwa8.aspx)：

> 封装具有单个参数且不返回值的方法。

因此，您正在尝试使用一个类型的参数强制委托`void`。

您需要做的就是`Action`不带类型使用：

```
interface IMyInterface
{
    void CreateCRUD(string name, Action createFunc, Action readFunc, Action updateFunc, Action deleteFunc);
} 
```

如果你想在你的委托中强制使用参数类型，那么你应该使用`Action<T>`eg `Action<int>`，这*意味着*带有`int`参数的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T15:24:34.057

就像是

```
Public delegate Action<T> MyActionDelegate;

interface IMyInterface 
{     
void CreateCRUD(string name, MyActionDelegate createFunc, MyActionDelegate readFunc, MyActionDelegate updateFunc, MyActionDelegate deleteFunc); 
} 
```

# ios - 如何调用在另一个类中声明的方法

> ID：12604985
> 
> 赞同：-1
> 
> 时间：2012-09-26T15:16:10.123
> 
> 标签：ios

> **可能重复：**
> [如何调用另一个类的方法？](https://stackoverflow.com/questions/3235742/how-to-call-a-method-of-another-class)

我有 2 节课。在第一个中，我声明了一个方法，该方法必须从同一类的数组中删除一个对象。在第二堂课中，我必须从第一堂课中调用此方法。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T15:21:18.470

您的第一个类必须在其 .h 文件中声明此方法才能公开，以便其他人可以调用它。它可能是这样的：

```
-(void)removeObject:(id)object; 
```

现在第二个类的实例可以使用以下方法调用它：

```
[myFirstObject removeObject:someObject]; 
```

当然重要的是第一类的实例（在这种情况下`myFirstObject`）存在并且第二类的实例知道，否则他的调用将无处可去......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T15:31:36.770

在`MySecondClass.m`

```
MyFirstClass *myFirstObject=[[MyFirstClass alloc]init];

[myFirstObject nameOfMethod]; 
```

nameOfMethod 必须在`MyFirstClass.h`

# wordpress - 网站仍在本地主机中

> ID：12604986
> 
> 赞同：0
> 
> 时间：2012-09-26T15:16:11.460
> 
> 标签：wordpress, localhost, wampserver

我将我的网站上传到服务器，并将网站 url 和主页从 localhost 更改为 mysite url。但是如果我关闭 wampserver 它仍然在 localhost 中，它不会显示该网站。当 wamp 服务器打开时告诉我。

顺便说一句，我使用 wordpress cms。

我应该怎么办？

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T16:02:49.933

当我将网站从 localhost 移动到 live 时，我通常使用 4 个查询来更新数据库。在使用它们之前，您需要：

1.  替换`wp_`为您正在使用的表前缀（检查`wp-config.php`文件并查找`$table_prefix = 'wp_';`）
2.  替换`old-domain.com`为`localhost`（或者`localhost/wordpress`如果您在 中安装了您的网站`http://localhost/wordpress`）
3.  替换`new-domain.com`为您的域名。

SQL 查询：

```
UPDATE wp_options SET option_value = REPLACE(option_value, "old-domain.com", "new-domain.com") WHERE option_value LIKE '%old-domain.com%';
UPDATE wp_posts SET post_content = REPLACE(post_content, "old-domain.com", "new-domain.com") WHERE post_content LIKE '%old-domain.com%';
UPDATE wp_posts SET guid = REPLACE(guid, "old-domain.com", "new-domain.com") WHERE guid LIKE '%old-domain.com%';
UPDATE wp_postmeta SET meta_value = REPLACE(meta_value, "old-domain.com", "new-domain.com") WHERE meta_value LIKE '%old-domain.com%'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T17:09:09.940

您必须执行以下步骤：

1.  如果您使用的是自定义主题，请将该文件夹复制到您的主机
2.  复制您的上传文件夹（如果您使用的是默认设置`/PATH_TO_WORDPRESS/wp-content/uploads`）
3.  备份您的数据库，我使用命令行：`mysqldump --host=localhost --user=[your mysql username] -p [your database] > transfer.sql` 因此，如果您的用户名是 user1 并且您的数据库名称是 database1，那么命令将是`mysqldump --host=localhost --user=user1 -p database1 > transfer.sql` 您可以随意命名 transfer.sql，但它必须以 .sql 结尾。
4.  复制，或者最好将您的数据库同步到您的服务器
5.  使用此命令将您的数据库加载到您的服务器：`mysql --host=[whatever your host is] --user=[your user name] -p [your database] < transfer.sql` 这将使用最新的帖子和内容刷新您的站点。
6.  去获取[搜索和替换工具](http://interconnectit.com/124/search-and-replace-for-wordpress-databases/)（这将做 octav 在他的回答中告诉你做的事情 - 我更喜欢使用该工具，因为它可以防止你弄乱你的数据库，不要像我一样学习困难的方式，使用此工具）并将其放置在您的 wordpress 安装中的某个位置。在将数据库复制到服务器之前，我实际上会在本地执行此操作，这样更安全。确保按照网站告诉您的方式重命名文件。在您的网络浏览器中输入该 php 文件的路径。按照说明操作，直到进入搜索和替换页面。将 localhost/path 放在搜索中，将您的 URL 放在替换中。

你的网站应该很好去。您的本地计算机是 Windows 还是 Mac/Linux？传输文件的说明略有不同。让我知道，我会相应地更新。

哦，别忘了查看 WordPress 移动网站的代码：[移动 WordPress](http://codex.wordpress.org/Moving_WordPress)

# python - Django、python、mod_wsgi 和 Apache 工作者

> ID：12604995
> 
> 赞同：6
> 
> 时间：2012-09-26T15:16:36.163
> 
> 标签：python, django, apache, mod-wsgi

我刚刚从 apache prefork 转移到 worker 并开始在守护进程模式下运行 mod_wsgi。到现在为止还挺好。我还没有遇到最大负载，但服务器似乎更加一致，我们没有看到随机请求需要 2 分钟等待 mod_wsgi 响应。内存占用已从 3.5G 变为 1G。这太棒了。我们在具有 6G 内存的单个 VPS 上运行。该服务器上运行着一个 Django 应用程序以及一个内存缓存实例，我们为其分配了 1G 内存。我们有一个单独的 MySql 服务器。

我们的应用程序很庞大，当然可以优化。我们现在正在使用 NewRelic 对一些运行速度较慢的页面进行故障排除。我已经阅读了很多关于优化 mod_wsgi/apache 的内容，但是和其他人一样，我仍然有一些问题。

我们的平均应用程序页面加载时间为 650-750 毫秒。我们的很多页面都在 200 毫秒范围内，但我们有一些狗需要 2-5 秒才能加载。我们在正常加载时间大约 15-20 个请求/秒，在可能持续 30-60 分钟的高峰时间获得 30-40 个请求/秒。

这是我的 apache 配置，正在运行 worker mpm。

```
StartServers        10
MaxClients         400
MinSpareThreads     25
MaxSpareThreads     75
ThreadsPerChild     25
MaxRequestsPerChild  0 
```

我开始使用默认值（StatServers=2 和 MaxClients=150），但我们的网站在最小负载下速度变慢了。我猜随着请求的到来，启动服务器需要很长时间。我们从 s3 提供 90% 的媒体。其他 10% 是通过我们的 https 页面上的 Apache 提供的，或者有人懒惰地指向我们的本地服务器。在标称负载下，最终创建了 15 个工作进程，所以我想我应该只设置 StartServers=15？使用这种配置，我假设我有 15 个工作进程正在运行（我可以用 NewRelic 确认），每个进程有 25 个线程（我不知道如何确认，猜测为 400/15）。

我的 apache/mod_wsgi 指令如下所示：

```
<VirtualHost *:80>
    # Some stuff
    WSGIDaemonProcess app1 user=http group=http processes=10 threads=20
    WSGIProcessGroup app1
    WSGIApplicationGroup app1
    WSGIScriptAlias / /path/to/django.wsgi
    WSGIImportScript /path/to/django.wsgi process-group=app1 application-group=app1    
    # Some more stuff    
</VirtualHost>

<VirtualHost *:443>
    # Some stuff
    WSGIDaemonProcess app1-ssl user=http group=http processes=2 threads=20
    WSGIProcessGroup app1-ssl
    WSGIApplicationGroup app1-ssl
    WSGIScriptAlias / /path/to/django.wsgi
    WSGIImportScript /path/to/django.wsgi process-group=app1-ssl application-group=app1-ssl
    # Some more stuff
</VirtualHost> 
```

在我的网站的 ssl 端有一个不同的 WSGIDaemonProcess/WSGIProcessGroup，好吧，那感觉根本不对。我 100% 确定我在这里搞砸了一些东西。更重要的是，我为 mod_wsgi 分配了 200+40 个线程来处理来自 Apache 的请求，留下 160 个线程来处理需要传递的任何媒体（通过 ssl 或不指向 s3 的懒惰）。

因此，鉴于我们上面的应用程序负载，任何人都可以建议我可以提高网站性能的方法吗？我是否正确处理了 ssl/mod_wsgi 指令？格雷厄姆在哪里？;)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T11:42:36.180

见讨论：

[https://groups.google.com/forum/?fromgroups=#!topic/modwsgi/Hakr6FjRVQM](https://groups.google.com/forum/?fromgroups=#!topic/modwsgi/Hakr6FjRVQM)

# javascript - div不能replcewith jquery函数在firefox上工作

> ID：12604996
> 
> 赞同：0
> 
> 时间：2012-09-26T15:16:37.973
> 
> 标签：javascript, jquery, html

这是我的 JavaScript，我`div`用`li`开始和结束标记替换标记，但是当我在源代码中显示页面时，它显示给我`<li></li>`。

为什么会这样？我想要它，因为它在我的`replaceWith`内容中给出

JavaScript 部分-

```
<script type="text/javascript">
    $(document).ready(function() {
        $(".separator").replaceWith("</li><li>");  
    });
</script> 
```

HTML部分-

```
<li>
    <img src="http://2012.sifasusa.com/images/kolorado-specs03.jpg" width="50%" height="500px" class="imgL zuper"/>
    <div class="caption captionH1" style="text-align: left;color: white;padding:10px;" dataeffects="fade top" dataoffset="30" datadelay="200" dataspeed="normal">
        Weather resistant
    </div>
    <div class="separator">
    </div>
    <img src="http://2012.sifasusa.com/images/kolorado-specs04.jpg" width="50%" height="500px" class="imgL zuper"/>
    <div class="caption captionH2" style="text-align: right;color: black;" dataeffects="fade right" dataoffset="30" datadelay="400" dataspeed="normal">
        White satin-finish methacrylate slats
    </div>
</li> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T15:22:56.350

**演示**：http: [//jsfiddle.net/KLkJ3/2/](http://jsfiddle.net/KLkJ3/2/)

* * *

您可能需要执行以下操作：

```
$('.seperator').each(function() {

    // create a new LI
    // move everything after .seperator to the new LI
    // insert new LI after the current LI
    $('<li/>').append($(this).nextAll()).insertAfter($(this).parent());

    // remove the sperator
    $(this).remove();

}); 
```

# javascript - 主干视图中的覆盖成员

> ID：12604998
> 
> 赞同：0
> 
> 时间：2012-09-26T15:16:42.747
> 
> 标签：javascript, backbone.js

我正在使用 Backbone.js 来管理我的视图。我像这样扩展 Backbone.View：

```
My.Views.PieChart = Backbone.View.extend({
    chartId: '',
    plot: {},
    params: {},
    legendLocation: 's',    // default value
    ...
    render: function() {
        console.log(this.legendLocation);
    }
}); 
```

然后我再次扩展 PieChart 以获取特定对象。

```
My.Views.GenderChart = My.Views.PieChart.extend({
    chartId: 'gender',
    el: '#gender',
    legendPosition: 'e'
}); 
```

但是，当我调用 GenderChart.render() 时，GenderChart.legendPosition 仍然是“s”？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T15:23:35.960

你确定吗？在我看来，变量是两个不同的名称，这可能会造成麻烦。你真的想要`legendLocation`或者`legendPosition`你想要覆盖`legendLocation`超类中的键吗？