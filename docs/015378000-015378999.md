# StackOverflow 问答 15378000-15378999

# tfsbuild - TFS2012 离线构建服务

> ID：15378001
> 
> 赞同：4
> 
> 时间：2013-03-13T05:51:22.363
> 
> 标签：tfsbuild

我配置 TFS2012 团队构建。在配置期间，构建服务显示状态正在运行，稍后（可能是 10 秒）构建控制器和构建代理服务停止。但在管理构建控制器窗口中，我的 TFS2012 控制器和代理显示可用。

所以我触发了为此控制器配置的构建定义，即使在显示“运行 0 秒”并在队列中等待 5 分钟后也是如此。

在事件查看器日志中，我可以看到记录了以下错误：

WebHost 未能处理请求。发件人信息：System.ServiceModel.ServiceHostingEnvironment+HostingManager/39086322 异常：System.ServiceModel.ServiceActivationException：服务'/tfs/queue//Services/v4.0/MessageQueueService2.svc'由于编译过程中的异常而无法激活。异常消息是：这个集合已经包含一个带有 http 方案的地址。此集合中的每个方案最多可以有一个地址。如果您的服务托管在 IIS 中，您可以通过将“system.serviceModel/serviceHostingEnvironment/multipleSiteBindingsEnabled”设置为 true 或指定“system.serviceModel/serviceHostingEnvironment/baseAddressPrefixFilters”来解决问题。参数名称：项目。---> System.ArgumentException：这个集合已经包含一个带有 http 方案的地址。此集合中的每个方案最多可以有一个地址。如果您的服务托管在 IIS 中，您可以通过将“system.serviceModel/serviceHostingEnvironment/multipleSiteBindingsEnabled”设置为 true 或指定“system.serviceModel/serviceHostingEnvironment/baseAddressPrefixFilters”来解决问题。参数名称： System.ServiceModel.UriSchemeKeyedCollection.InsertItem(Int32 index, Uri item) at System.Collections.Generic.SynchronizedCollection`1.Add(T item) at System.ServiceModel.UriSchemeKeyedCollection..ctor(Uri[] 地址) 的项目在 System.ServiceModel.ServiceHost..ctor(Type serviceType, Uri[] baseAddresses) 在 System.ServiceModel.Activation.ServiceHostFactory.CreateServiceHost(Type serviceType, Uri[] baseAddresses) 在 System.ServiceModel.Activation.ServiceHostFactory。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T06:30:22.330

正如异常所暗示的那样，听起来您有两个用于 tfs Web 服务的 http 绑定。

两种选择：

1.  进入 web.config 并删除其中一个 http 绑定。

2.  执行异常中的建议并允许多个站点绑定

**更新以包含用户解决方案**

在“C:\Program Files\Microsoft Team Foundation Server 11.0\Application Tier\Web Services”下的 web.config 文件中添加了以下标记

```
<system.serviceModel>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="True">
    </serviceHostingEnvironment>
</system.serviceModel> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T06:58:52.087

由于我已经为外部访问配置了 FQDN：

在“C:\Program Files\Microsoft Team Foundation Server 11.0\Application Tier\Web Services”下的 web.config 文件中添加了以下标记

```
</serviceHostingEnvironment> 
```

# timer - 将一个快速、不准确的计时器与一个缓慢、精确的计时器同步？

> ID：15378002
> 
> 赞同：0
> 
> 时间：2013-03-13T05:51:23.003
> 
> 标签：timer, measurement

我处于一个有趣的境地。我的芯片需要跟踪微秒时间间隔和小时。不过，我坚持不加晶振，而是内部RC振荡器，频率误差高达10%。

外部信号为 50Hz（猜测来自哪里）。

我可以使用什么软件方法（算法）将两个时钟组合成一个，同时具有高分辨率和准确性？它应该适合小型 8 位处理器并表现出良好的平滑度（例如，不可能出现负持续时间事件）？

# excel - Visual Basics Excel txt 输入文件

> ID：15378003
> 
> 赞同：2
> 
> 时间：2013-03-13T05:51:28.820
> 
> 标签：excel, outlook, vba

“输入 #1，数字（行，列）”行给了我一个运行时错误 9。有什么想法吗？代码中的注释解释了应该发生的事情。

```
Sub InputImage()
'brings a text file to the workbook

Dim Row As Long, Column As Long, Nrow As Long, Ncolumn As Long

    Call MsgBox("Navigate to a folder that contains the file image.txt in the 00_18 folder")
    '   The next statement will open a dialogue box that will let
    '   the user navigate to any folder on their system
    Call Application.GetOpenFilename
Open "image.txt" For Input As #1

Dim Buffer As String
Line Input #1, Buffer 'read a whole line of characters from
    'file #1 into the string variable buffer

Line Input #1, Buffer
Input #1, Buffer, Nrow
Input #1, Buffer, Ncolumn

Dim Numbers(1 To 4, 1 To 4) As Long
For Row = 1 To Nrow
    For Column = 1 To Ncolumn
        Input #1, Numbers(Row, Column)
    Next Column
Next Row

Close #1

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T08:35:23.763

试试下面的代码：

```
Option Base 1
Sub InputImage()
'brings a text file to the workbook
    Dim j As Integer, i As Integer
    Dim Row As Long, Column As Long, Nrow As Long, Ncolumn As Long

    Call MsgBox("Navigate to a folder that contains the file image.txt in the 00_18 folder")
    '   The next statement will open a dialogue box that will let
    '   the user navigate to any folder on their system
    Call Application.GetOpenFilename

    Dim FileNum As Integer
    Dim DataLine As String

    FileNum = FreeFile()
    Open "image.txt" For Input As #FileNum

    j = 1
    While Not EOF(FileNum)
        Line Input #FileNum, DataLine    ' read in data 1 line at a time
        ' decide what to do with dataline,
        ' depending on what processing you need to do for each case
        'you can use split function to split DataLine with required delimiter which will return you an array.
        a = Split(DataLine, vbTab)

        For i = 1 To UBound(a)
            Cells(j, i).Value = a(i)
        Next
        j = j + 1
    Wend

End Sub 
```

假设您的 image.txt 如下图所示。

![在此处输入图像描述](../Images/0d06b5ad9636f18d6aaea71e2c4068cc.png)

# php - 如何优化分页查询？

> ID：15378008
> 
> 赞同：1
> 
> 时间：2013-03-13T05:52:10.270
> 
> 标签：php, cakephp, optimization

这完全是优化问题，我有一个这样的分页查询

```
$this->paginate    = array(
        'fields'    =>  array(
                        'DISTINCT Contact.contact_id',
                        'Contact.first_name',
                        'Contact.last_name',
                        'Contact.email',
                        'Contact.created',
                        'ContactGroup.name',
                      ),  
        'conditions' => array(
                        $this->conditions,
                        'ContactsContactGroup.contact_group_id'=>$viewList,                        
                        isset($keywordQuery)?$keywordQuery:"",
                      ),      
        'limit'      => 5,
         'group'     => array('Contact.contact_id')
                      );
$data = $this->paginate('ContactsContactGroup');
$data = $this->paginate('ContactsContactGroup'); 
```

在每个 if 和 else 语句中都会调用此查询，我有四个条件`if`and `else`，并且在所有条件下都编写了上面的代码。

我想优化，并避免在每种情况下都使用大行代码，我该如何优化它，任何答案都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T06:13:30.050

您可以在类中使用另一种方法，该方法将返回数组，而不是将其发布到任何地方。添加以下代码

```
private function getPaginate($viewList, $keywordQuery) {
  $this->paginate = array( 'fields' => array( 'DISTINCT Contact.contact_id', 'Contact.first_name', 'Contact.last_name', 'Contact.email', 'Contact.created', 'ContactGroup.name', ), 'conditions' => array( $this->conditions, 'ContactsContactGroup.contact_group_id'=>$viewList, isset($keywordQuery)?$keywordQuery:"", ), 'limit' => 5, 'group' => array('Contact.contact_id') );

  //optional: return the result
  return $this->paginate;
} 
```

然后你可以使用

```
$this->getPaginate( $viewlist, $keywordQuery );
$data = $this->paginate('ContactsContactGroup'); 
$data = $this->paginate('ContactsContactGroup'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T06:25:05.110

我在搜索页面上用作常规练习的内容是我不断在 if 和 else 中添加条件，并在最后将其连接到主查询。在您的情况下，我认为我们可以这样做：

```
//here is your if and else statement
$condition = array();
if(someconditions) {
 $condition['user'] = 'suresh'; //your conditions
else if(some conditions)
 $condition['email'] ='abc@gmail.com';

//And than add it to main query 
$this->paginate    = array(
        'fields'    =>  array(
                        'DISTINCT Contact.contact_id',
                        'Contact.first_name',
                        'Contact.last_name',
                        'Contact.email',
                        'Contact.created',
                        'ContactGroup.name',
                      ),  
        'conditions' => array(
                        $condition
                        'ContactsContactGroup.contact_group_id'=>$viewList,                        
                        isset($keywordQuery)?$keywordQuery:"",
                      ),      
        'limit'      => 5,
         'group'     => array('Contact.contact_id')
                      );
$data = $this->paginate('ContactsContactGroup');
$data = $this->paginate('ContactsContactGroup'); 
```

# ruby-on-rails - AngularJS无限滚动调用API有效但不显示新记录

> ID：15378010
> 
> 赞同：3
> 
> 时间：2013-03-13T05:52:18.693
> 
> 标签：ruby-on-rails, ajax, api, angularjs, infinite-scroll

我今天一直在尝试使用 AngularJS 和我的 rails 后端来实现无限滚动。我用过 jsfiddle（和大家一样）[http://jsfiddle.net/vojtajina/U7Bz9/](http://jsfiddle.net/vojtajina/U7Bz9/)

我正在调用 API 并发出请求并且服务器返回正确的内容。这里没有问题。问题是，只显示第一批或结果。每个其他列表项都是空白的（但仍然在记录存在时创建......）

更新：

当我将 HTML 更改为显示 div 而不是列表项时，我注意到每次滚动到底部时都会出现一个新的 div。考虑到我每个请求加载 10 条记录，这很奇怪......

这是代码：

```
<body ng-app="scroll" ng-controller="Main">
  <div id="fixed" when-scrolled="loadMore()">
    <ul class="unstyled">
      <li ng-repeat="user in users">{{user.first_name}}</li>
    </ul>
  </div>
</body> 
```

```
function Main($scope, $http) {
  $http.get('/users.json').success(function(data){
    $scope.users = data;
  });

  var counter = 0;
  $scope.loadMore = function() {
    $http.get('/users/page/'+counter+'.json').success(function(data){
        $scope.users.push(data);
    });
    counter += 1;
    console.log($scope.users);
  };
  $scope.loadMore();
}

angular.module('scroll', []).directive('whenScrolled', function() {
  return function(scope, elm, attr) {
    var raw = elm[0];

    elm.bind('scroll', function() {
        if (raw.scrollTop + raw.offsetHeight >= raw.scrollHeight) {
            scope.$apply(attr.whenScrolled);
        }
    });
  };
}); 
```

无论如何，我都不是 JS wizz，所以我可能错过了一些东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T06:59:57.070

您需要更改`$scope.users.push(data);`为`$scope.users = $scope.users.concat(data);`.

在这里，当您调用`$scope.users.push(data);`一个数组作为项目添加到用户时，因此当加载第 2 页时，`users`前 10 个项目 + 一个数组作为第 11 个项目。这不是您想要的，您想将`users`数组与`data`数组连接起来。

```
function Main($scope, $http) {
    $scope.users = [];

    var page = 1;
    $scope.loadMore = function() {
        $http.get('/users/page/' + page + '.json').success(function(data) {
                    $scope.users = $scope.users.concat(data);
                });
        page += 1;
        console.log($scope.users);
    };
    $scope.loadMore();
} 
```

演示：[您的案例](http://jsfiddle.net/arunpjohny/U7Bz9/436/)，[解决方案](http://jsfiddle.net/arunpjohny/U7Bz9/438/)

# facebook - 在 Facebook 上分享来自特定网站的链接，Facebook 建议喜欢该网站的 Facebook 页面

> ID：15378013
> 
> 赞同：1
> 
> 时间：2013-03-13T05:52:40.037
> 
> 标签：facebook, facebook-like, facebook-sharer

尝试在您的 Facebook 墙上分享[此链接](http://www.mawaly.com/music/Nancy+Ajram/track/9566)（音乐歌曲的），分享后 Facebook 会提示一个窗口，提示您喜欢该网站 (mawaly.com) 的 Facebook 页面。

这怎么可能？

这是我的图片：

![在此处输入图像描述](../Images/27a02b6ba5600b3b7ef73373c927a15e.png)

# javascript - 选择框更改时的动态文本字段

> ID：15378015
> 
> 赞同：1
> 
> 时间：2013-03-13T05:53:05.107
> 
> 标签：javascript, html, textfield

我一直在努力寻找答案，并从我的代码和基本浏览器设置中对其进行了攻击。我想做的是根据选择框的设置来更改文本字段。到目前为止，我汇总的内容正是我希望它在除资源管理器之外的所有浏览器中执行的操作。我需要进一步声明以实现这一目标，还是有另一种方法可以更好地实现我的最终目标？

这就是我目前所拥有的。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<script type="text/javascript">

function changeusf() 
{
    document.getElementById("usf").setAttribute("value",optionsusf.value); 
}
</script>
</head>
<body>

<input type="text" value="" name="usf" id="usf"/>

<select id="optionsusf" name="optionsusf" onchange="changeusf()">
   <option value="--------------------">Select One</option>
   <option value="0.00">No Tax</option>
   <option value="0.18">18% Tax</option>
   <option value="0.07">7% Tax</option>
</select>

</body>
</html> 
```

提前感谢您的宝贵时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T05:55:42.170

你应该只是在做：

`document.getElementById("usf").value = document.getElementById("optionsusf").value;`

而不是使用`setAttribute`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T05:57:29.757

试试这个 ：

```
<select id="optionsusf" name="optionsusf" onchange="changeusf(this.value);">
<option value="--------------------">Select One</option>
<option value="0.00">No Tax</option>
<option value="0.18">18% Tax</option>
<option value="0.07">7% Tax</option>
</select>

function changeusf(val) 
{
    document.getElementById("usf").value = val; 
} 
```

在此我们使用 simple`JavaScript`将值传递`onchange`给`select box`函数，在该函数中我们只是接收值并将其放入`textbox`. 所以我们没有使用任何会在 any 中产生任何问题的东西`browser`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T06:00:08.230

`changeusf`1.在函数中添加以下jquery代码
`$("#usf").val($("#optionsusf option:selected").text())`
记得包含jquery。

# ruby-on-rails - 防止 Rails 3.2.11 资产管道缓存？

> ID：15378018
> 
> 赞同：6
> 
> 时间：2013-03-13T05:53:32.843
> 
> 标签：ruby-on-rails, caching, ruby-on-rails-3.2, asset-pipeline

我已经阅读了很多关于 Rails 资产管道的帖子和文章以及问题和答案，但我仍然没有弄清楚如何完全关闭缓存。

我们正在使用 Rails 3.2.11，在我们的实验室环境（类似于开发）中，我们遇到了问题，因为即使我们没有在资产管道中预编译或指纹资产，它们仍然被缓存在 Rails（机架?) 缓存。这很烦人，因为一些资产是根据其他配置更改的 ERB，因此缓存变得陈旧。为了尝试关闭缓存，我们设置了以下配置：

```
 config.action_controller.perform_caching = false

  config.assets.compress = false

  config.assets.debug = true

  # just in case
  config.cache_store = :file_store, "file_cache" 
```

然而，资产`tmp/cache/assets`无论如何都会出现。我至少希望它们出现在 中`file_cache`，但我真的希望它们根本不会被缓存。

我们如何防止这些资产被缓存？在这种环境中，仅仅删除缓存是不够的。

额外的问题：只要这些文件被缓存，为什么它们在`tmp/`而不是在`file_cache/`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-13T18:53:20.887

要关闭资产缓存：

```
config.assets.cache_store = :null_store 
```

请注意，这是配置。**assets** .cache_store 不是 Rails config.cache_store。

另请注意，Sass 对编译的样式表有一个单独的缓存，默认情况下在 中`tmp/cache/sass`，如果你想禁用它，你必须单独执行：

```
config.sass.cache = false 
```

* * *

当Rails**指南**[说](http://edgeguides.rubyonrails.org/asset_pipeline.html)：

> Sprockets 将使用默认的 Rails 缓存存储来缓存开发和生产中的资产。

我认为他们的意思是*配置*的Rails 缓存存储将被使用。我错了，除非您明确更改*资产缓存，否则它使用**默认*缓存。

 ** * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-13T06:13:45.957

要完全禁用资产管道，您可以在环境文件中添加此指令：

```
config.assets.enabled = false 
```

但是，如果您仍然想享受静态 JS 和 CSS 的资产管道编译和缓存，同时将 ERB 文件用于动态资产，您可以`my_assets_controller`为该控制器创建并创建视图以提供动态内容（具有扩展名的文件`.css.erb`和`.js.erb`）。您只需要包含在您的视图或布局文件中`<%= javascript_path '/my_assets/things_dynamically_generated.js' %>`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-13T06:43:42.950

这听起来像是一个 XY 问题。

**原则 1：**构建必须是确定性的，并且独立于每个环境的配置。

**原则 2：**静态资产编译必须是构建的一部分。

您应该转向拥有纯静态资产。您可以使用 ERB，但只是调用诸如 之类的方法`asset_path`，这些方法是确定性的，并且在给定相同代码库的情况下会产生相同的结果。您可以将基于配置的数据或行为放在那里，但前提是数据或行为在所有部署（开发、测试、暂存、qa、pre-prod 和 prod）中都相同。

来自每个环境配置的任何内容都不应进入静态资产。`<html>`相反，您可以通过 HTTP 标头、元素的属性或其他注入技术来传递它。静态资产代码应该足够聪明，可以在 HTTP 标头或`<html>`属性中查找注入的数据，并根据注入的数据改变其行为。

至于奖金问题，`config.cache_store`不是 sprockets、sass、compass 等缓存的控制配置项。*

# primefaces - 如何禁用primefaces中的命令按钮并需要在某些文本输入上启用

> ID：15378023
> 
> 赞同：0
> 
> 时间：2013-03-13T05:53:49.627
> 
> 标签：primefaces

我需要一些有关 primefaces 的帮助，我有一个命令按钮，最初需要禁用它，当我在 inputtext 字段中输入一些文本时，该按钮应该启用。

有人可以给我一个示例代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T10:09:11.043

您可以将启用和禁用值设置为布尔值......并有一个 ajax 事件来更新它。

您是否尝试过通过 javascript 实现它？启用或禁用按钮最好在客户端使用 javascript 完成，而不是调用托管 bean。

# android - 安卓日期选择器

> ID：15378027
> 
> 赞同：4
> 
> 时间：2013-03-13T05:54:33.667
> 
> 标签：android, datepicker, datepickerdialog

我想限制过去的日期应该被禁用并且日期日期选择器必须显示下一个月的未来日期我该如何修改程序

```
package com.sample.DatePickerExample;

import android.app.Activity;
import java.util.Calendar;
import android.app.DatePickerDialog;
import android.widget.DatePicker;
import android.app.Dialog;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

public class DatePickerExampleActivity extends Activity {

private TextView mDateDisplay;
private int mYear;
private int mMonth;
private int mDay;
static final int DATE_DIALOG_ID = 1;
@Override

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.date_picker);
    mDateDisplay = (TextView) findViewById(R.id.dateDisplay);
    Button pickDate = (Button) findViewById(R.id.pickDate);
    pickDate.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            showDialog(DATE_DIALOG_ID);
        }
    });
    final Calendar c = Calendar.getInstance();
    mDay = c.get(Calendar.DAY_OF_MONTH);
    mMonth = c.get(Calendar.MONTH);
    mYear = c.get(Calendar.YEAR);

    updateDisplay();
}
@Override
protected Dialog onCreateDialog(int id) {
    switch (id) {

    case DATE_DIALOG_ID:
        return new DatePickerDialog(this,
            mDateSetListener,
            mYear, mMonth, mDay);
    }
    return null;
}
protected void onPrepareDialog(int id, Dialog dialog) {
    switch (id) {

    case DATE_DIALOG_ID:
        ((DatePickerDialog) dialog).updateDate(mYear, mMonth, mDay);
        break;
    }
}   
private void updateDisplay() {
    mDateDisplay.setText(
        new StringBuilder()
        // Month is 0 based so add 1

        .append(mDay).append("-")
        .append(mMonth + 1).append("-")
        .append(mYear).append(" "));
}
private DatePickerDialog.OnDateSetListener mDateSetListener =
    new DatePickerDialog.OnDateSetListener() {

    public void onDateSet(DatePicker view, int year, int monthOfYear,
            int dayOfMonth) {
         mDay = dayOfMonth;
        mYear = year;
        mMonth = monthOfYear;

        updateDisplay();
    }
}; 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T06:31:13.030

首先，您可以使用[DatePicker](https://stackoverflow.com/questions/7157401/android-date-picker-should-not-accept-current-date-and-future-dates)小部件来执行此操作。它具有用于设置范围的内置方法。

But since you're using a `DatePickerDialog`,You need have a custom implementation.You need to programmatically change the selected date back to default when an undesired date is selected.

遵循以下代码：

```
public class MyDatePickerDialog extends DatePickerDialog{

private Date maxDate;
private Date minDate;

public MyDatePickerDialog(Context context, OnDateSetListener callBack, int year, int monthOfYear, int dayOfMonth) {
    super(context, callBack, year, monthOfYear, dayOfMonth);        
    init(year, monthOfYear, dayOfMonth);
}

public MyDatePickerDialog(Context context, int theme, OnDateSetListener callBack, int year, int monthOfYear,    int dayOfMonth) {
    super(context, theme, callBack, year, monthOfYear, dayOfMonth);
    init(year, monthOfYear, dayOfMonth);
}

private void init(int year, int monthOfYear, int dayOfMonth){
    Calendar cal = Calendar.getInstance();

    cal.set(1970, Calendar.JANUARY, 1);
    minDate = cal.getTime();

    cal.set(3000, Calendar.JANUARY, 1);
    maxDate = cal.getTime();

    cal.set(year, monthOfYear, dayOfMonth);
}

public void onDateChanged (final DatePicker view, int year, int month, int day){
    Calendar cal = Calendar.getInstance();
    cal.set(year, month, day);
    Date currentDate = cal.getTime();

    final Calendar resetCal = cal; 
    if(!minDate.before(currentDate) ){
        cal.setTime(minDate);
        view.updateDate(resetCal.get(Calendar.YEAR), resetCal.get(Calendar.MONTH), resetCal.get(Calendar.DAY_OF_MONTH));

    }else if(maxDate.before(currentDate)){
        cal.setTime(maxDate);
        view.updateDate(resetCal.get(Calendar.YEAR), resetCal.get(Calendar.MONTH), resetCal.get(Calendar.DAY_OF_MONTH));
    }       
}

public void setMaxDate(Date date){
    this.maxDate = date;
}

public void setMinDate(Date date){
    this.minDate = date;
}   } 
```

归功于Herrmann的[原始工作答案](https://stackoverflow.com/a/10836596/1221203)

# iphone - 是否可以在 Ios 中使用相机找到对象的宽度？

> ID：15378028
> 
> 赞同：4
> 
> 时间：2013-03-13T05:54:34.433
> 
> 标签：iphone, ios, ios5, camera

我想测量 iphone 相机和屏幕上显示的对象之间的距离，并想通过在屏幕上放置两个点来找到对象的宽度。

[https://itunes.apple.com/us/app/orthograph-architect-3d-cad/id464252559?mt=8](https://itunes.apple.com/us/app/orthograph-architect-3d-cad/id464252559?mt=8)

在此应用程序中，当我们将两点放在屏幕上时，它将计算两点之间的距离。

有什么关于寻找距离、宽度和相机角度的建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T06:57:37.747

是的，您可以使用以下 api 链接来实现此目的以及其中提供的详细教程和文档。但这需要时间来度过难关。我在我的 android 应用程序中使用并在增强现实中发现了两个对象之间的距离

[智商引擎](https://www.iqengines.com/smartcamera/)

快乐编码！

# php - 如何重定向到登录页面是会话经验

> ID：15378032
> 
> 赞同：0
> 
> 时间：2013-03-13T05:54:53.107
> 
> 标签：php, cakephp

我是 cakephp 的新手，并且我在我的登录实用程序中使用 auth...我想重定向到登录页面以防万一我的所有操作都经历了会话...我编写了类似\

```
public function index() {        
    if(!$this->Session->read('username'))
        $this->logout();
    $this->set('users', $this->paginate());        
} 
```

但是对于我的所有操作，例如 add(),edit()...每次我需要检查会话变量...如果我在 __construct 中编写条件

```
public function __construct()
{
    if(!$this->Session->read('username'))
        $this->logout();
} 
```

它给了我这样的错误

```
Error: Call to a member function read() on a non-object 
```

谁能建议我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T07:49:08.160

使用`AuthComponent`如果会话过期并且用户尝试访问受保护的页面，他将被自动重定向到登录页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T07:34:54.467

看起来您没有包含 SessionComponent。

尝试添加

`$components = array('Session');`

在你的`AppController`第一个。

然后查看文档以获取更多信息：[http ://api.cakephp.org/2.3/class-SessionComponent.html](http://api.cakephp.org/2.3/class-SessionComponent.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T06:15:40.583

尝试

```
if (!$this->Session->valid()) {
  $this->logout();
} 
```

# javascript - 如何在画布中创建顺序但独特的对象？

> ID：15378033
> 
> 赞同：0
> 
> 时间：2013-03-13T05:54:55.120
> 
> 标签：javascript, canvas, clock

*我的问题可能有点粗略，因为我是编程新手。*

*   我正在画布上画一个时钟。
*   *我使用' for* '语句绘制了编号表盘。

现在，我希望这些表盘成为独特的对象，以便我可以操纵它们。比如，当它接近 1 点时，我可以突出显示编号为 1 的表盘。

我可以这样做吗？我怎样才能做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T05:58:18.500

画布只是一个位图，在您绘制对象之后，它没有对象的概念。

换句话说，画布只是一堆像素。绘制拨号号码后，除了完全重绘（这很好）之外，没有其他方法可以更改它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T05:58:20.073

为什么不将每个刻度盘放在一个数组中？数组是处理多个对象的好工具。

# php - 如何在 Aweber 中创建应用程序？

> ID：15378034
> 
> 赞同：0
> 
> 时间：2013-03-13T05:54:57.693
> 
> 标签：php, api, aweber

[我在https://labs.aweber.com/apps](https://github.com/aweber/AWeber-API-PHP-Library)上创建了一个应用程序，并在他们的 github https://github.com/aweber/AWeber-API-PHP-Library 上下载了 php[代码](https://labs.aweber.com/apps)。我读过他们的文档，但不是那么清楚。我不知道如何开始或先做什么。我只是一个初学者，我以前从未做过应用程序。

我首先尝试在我的页面上创建 PHP 脚本，希望在提交表单时满足所需的功能，但什么也没发生。我联系了他们的支持，但他们建议制作一个应用程序以使其正常工作。

Web 表单提交的流程是这样的。在主页中，用户将输入其姓名、电子邮件、电话，并且有两个单选选项可供选择，当您选择一个时，它将重定向到另一个页面并再次填写表格并提交。我为主页和第二页创建了一个 Web 表单。当您在第二页提交表单时，它应该会在主页上获得详细信息（姓名、电子邮件、电话和选项选择），我得到了它的工作。但是当我在我的 Aweber 帐户上查看订阅者时，第二页中的字段都是空白的。主页上的字段是完整的，每当我填写完第二页上的表格并提交时，Aweber 说该页面已被阻止。

他们建议我为此创建一个应用程序。但我不知道如何开始，因为他们的文档令人难以置信。

如果您能帮助我，我将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-14T17:37:23.880

听起来您确实需要为该功能创建一个 aweber 应用程序。

我正在粘贴 PHP 代码，这有助于我非常快速地进行设置。将其加载到浏览器中并按照说明进行操作。一旦您准备好进行实际的 API 调用，您可以在 labs.aweber.com/snippets/subscribers 看到一些示例。

如果您遇到任何问题，您可以随时通过 api@aweber.com 向 aweber API 支持发送电子邮件。

您需要做的几件事（如果您还没有）：

1.  创建一个实验室帐户 ( [http://labs.aweber.com](http://labs.aweber.com) ) 和一个 aweber 帐户 ( [http://www.aweber.com](http://www.aweber.com) )
2.  创建一个应用程序以在实验室站点获取您的使用者密钥和秘密
3.  从实验室站点下载 AWeber php 库，并确保在下面的 require_once() 中有正确的路径

> ```
> <?php
> require_once('aweber_api/aweber_api.php'); 
> ```

```
// Step 1: assign these values from https://labs.aweber.com/apps
$consumerKey = '';
$consumerSecret = '';

// Step 2: load this PHP file in a web browser, and follow the instructions to set
// the following variables:
$accessKey = '';
$accessSecret = '';
$list_id = '';

if (!$consumerKey || !$consumerSecret){
    print "You need to assign \$consumerKey and \$consumerSecret at the top of this script and reload.<br><br>" .
        "These are listed on <a href='https://labs.aweber.com/apps' target=_blank>https://labs.aweber.com/apps</a><br>\n";
    exit;
}

$aweber = new AWeberAPI($consumerKey, $consumerSecret);
if (!$accessKey || !$accessSecret){
    display_access_tokens($aweber);
}

try { 
    $account = $aweber->getAccount($accessKey, $accessSecret);
    $account_id = $account->id;

    if (!$list_id){
        display_available_lists($account);
        exit;
    }

    print "You script is configured properly! " . 
        "You can now start to develop your API calls, see the example in this script.<br><br>" .
        "Be sure to set \$test_email if you are going to use the example<p>";

    //example: create a subscriber
    /*
    $test_email = '';
    if (!$test_email){
    print "Assign a valid email address to \$test_email and retry";
    exit;
    }
    $listURL = "/accounts/{$account_id}/lists/{$list_id}"; 
    $list = $account->loadFromUrl($listURL);
    $params = array( 
        'email' => $test_email,
        'ip_address' => '127.0.0.1',
        'ad_tracking' => 'client_lib_example', 
        'misc_notes' => 'my cool app', 
        'name' => 'John Doe' 
    ); 
    $subscribers = $list->subscribers; 
    $new_subscriber = $subscribers->create($params);
    print "{$test_email} was added to the {$list->name} list!";
    */

} catch(AWeberAPIException $exc) { 
    print "<h3>AWeberAPIException:</h3>"; 
    print " <li> Type: $exc->type <br>"; 
    print " <li> Msg : $exc->message <br>"; 
    print " <li> Docs: $exc->documentation_url <br>"; 
    print "<hr>"; 
    exit(1); 
}

function get_self(){
    return 'http://' . $_SERVER['HTTP_HOST'] . $_SERVER['REQUEST_URI'];
}

function display_available_lists($account){
    print "Please add one for the lines of PHP Code below to the top of your script for the proper list<br>" .
            "then click <a href='" . get_self() . "'>here</a> to continue<p>";

    $listURL ="/accounts/{$account->id}/lists/"; 
    $lists = $account->loadFromUrl($listURL);
    foreach($lists->data['entries'] as $list ){
        print "<pre>\$list_id = '{$list['id']}'; // list name:{$list['name']}\n</pre>";
    }
}

function display_access_tokens($aweber){
    if (isset($_GET['oauth_token']) && isset($_GET['oauth_verifier'])){

        $aweber->user->requestToken = $_GET['oauth_token'];
        $aweber->user->verifier = $_GET['oauth_verifier'];
        $aweber->user->tokenSecret = $_COOKIE['secret'];

        list($accessTokenKey, $accessTokenSecret) = $aweber->getAccessToken();

        print "Please add these lines of code to the top of your script:<br>" .
                "<pre>" .
                "\$accessKey = '{$accessTokenKey}';\n" . 
                "\$accessSecret = '{$accessTokenSecret}';\n" .
                "</pre>" . "<br><br>" .
                "Then click <a href='" . get_self() . "'>here</a> to continue";
        exit;
    }

    if(!isset($_SERVER['HTTP_USER_AGENT'])){
        print "This request must be made from a web browser\n";
        exit;
    }

    $callbackURL = get_self();
    list($key, $secret) = $aweber->getRequestToken($callbackURL);
    $authorizationURL = $aweber->getAuthorizeUrl();

    setcookie('secret', $secret);

    header("Location: $authorizationURL");
    exit();
}
?> 
```

# java - 为 android 活动类创建头文件

> ID：15378037
> 
> 赞同：6
> 
> 时间：2013-03-13T05:55:09.003
> 
> 标签：java, android, android-activity, android-ndk, java-native-interface

我在我的 android 类中添加了一些本机方法`Activity`。现在我想为它创建头文件`class`。

从命令行创建头文件时出现以下错误。

```
C:\AndroidProjects\JniTest\bin\classes>javah -classpath .;
C:\adt-bundle-windows-x86\sdk\platforms\android.jar com.example.jnitest.JniTest
Error: cannot access android.app.Activity
class file for android.app.Activity not found 
```

基本上无法从 jar 中访问活动类。

请指教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-23T07:39:02.183

在 Eclipse 中尝试以下操作，

转到 > 运行 | 外部工具| 程序下的外部工具配置通过单击小图标创建新配置。

命名它。

位置是：C:\Program Files\Java\jdk1.7.0_04\bin\javah.exe

工作目录将是： ${workspace_loc:/My_First_NDK/bin/classes} 和

参数是：-classpath ${workspace_loc:/My_First_NDK/bin/classes} -bootclasspath "C:\adt-bundle-windows-x86-20140624\sdk\platforms\android-19\android.jar" -v -d $ {workspace_loc:/My_First_NDK/jni} com.mypackage.ndk.HelloNDK

![在此处输入图像描述](../Images/26235582c39f3630cbf30202aeac06cd.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T16:11:00.120

该命令将是（在使用 Windows 时使用反斜杠 ( `\`)，而不是正斜杠 ( ) ）：`/``cmd`

```
javah -bootclasspath $ANDROID_SDK_ROOT/platforms/android-17/android.jar -classpath bin/classes com.example.jnitest.JniTest 
```

您应该使用`-bootclasspath`而不是`-classpath`，因为`android.jar`重新实现了[Java 类库](http://en.wikipedia.org/wiki/Java_Class_Library)。

假设：

*   您当前的目录是：`C:\AndroidProjects\JniTest`;
*   您的 Android SDK 安装在`$ANDROID_SDK_ROOT`（`%ANDROID_SDK_ROOT%`对于 Windows）；
*   您的目标 API 级别是`android-17`.

请相应地修改您的命令。

# c++ - (struct in_addr **) 和 *(struct in_addr *) 之间的区别

> ID：15378040
> 
> 赞同：-3
> 
> 时间：2013-03-13T05:55:34.553
> 
> 标签：c++, c

`(struct in_addr **)`和 和有什么不一样`*(struct in_addr *)`？请举例说明清楚。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T05:57:45.457

该表达式`(struct in_addr **)`正在将某些内容*转换*为指向指向 a 的指针的指针`struct in_addr`。

该表达式`*(struct in_addr *)`将某些内容转换为指向 a 的指针`struct in_addr`，并*取消引用*该指针。

* * *

示例：假设您有一个接受`void`指针的函数，即它可以接受指向*任何东西*的指针，并且您*知道*它实际上是指向其他东西的指针，您可以将该指针转换为正确的指针类型：

```
void some_fun(void *ptr)
{
    /* I know that `ptr` is really a pointer to a pointer to a `struct in_addr` */
    /* In other words, an array of pointers to `struct in_addr` */
    struct in_addr **addresses = (struct in_addr **) ptr;

    /* Do something with the array of pointers in `addresses` */
} 
```

其他示例：如果您有另一个函数也需要指向 的指针`void`，但您知道它指向 a `struct in_addr`，并且您希望将其转换为普通结构而不使用指针访问：

```
void some_other_fun(void *ptr)
{
    /* I know that `ptr` is really a pointer to a `struct in_addr` */
    /* Copy the data from that structure into my own structure */
    struct in_addr addr = *(struct in_addr *) ptr;

    /* Use `addr`... */
} 
```

在第一个示例中，您告诉编译器一种类型的指针实际上是*另*一种类型的指针。

在第二个示例中，您*首先*告诉编译器该指针是不同类型的指针（`(struct in_addr *)`部分），*然后*您取消引用该指针以使用一元运算符获取实际结构`*`。

* * *

请注意这里使用的类型转换是旧的 C 样式类型转换。在 C++ 中，您将使用 eg[`reinterpret_cast`](http://en.cppreference.com/w/cpp/language/reinterpret_cast)代替，例如：

```
in_addr** addresses = reinterpret_cast<in_addr**>(ptr); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T05:58:49.890

`(struct in_addr **)`是一个 C 风格的强制转换运算符，将其右侧的任何内容转换为指向类型结构`in_addr`（通用网络地址）的指针的指针。

`*(struct in_addr *)`是一个 C 风格的强制转换运算符，后跟一个取消引用运算符（从右到左读取），将其右侧的任何内容转换为指向 an 的指针`in_addr`，然后取消引用该指针。

# php - 替换 Joomla 自定义模块中的短标签

> ID：15378041
> 
> 赞同：0
> 
> 时间：2013-03-13T05:55:35.400
> 
> 标签：php, joomla, joomla2.5, joomla-extensions, joomla3.0

在一个自定义模块中，我编写了如下内容。这个模块放置在页面的顶部。

```
(650) 123-1232
950 Queen Dr Suite 110, Daly City CA, 94015 
```

在另一个自定义模块中，我编写了相同的内容，但更改如下。这个模块放置在页面的底部。

```
950 Queen Dr Suite 110, Daly City CA, 94015
(650) 123-1232 
```

问题是我在自定义模块中一遍又一遍地重复相同的内容，并且很可能会发生错误。所以我想做的是使用下面的短标签。

```
{phone}
{address} 
```

如果我在自定义模块中编写如上所述的短标签，我希望将它们替换为整个站点的一些特定值。{phone} 与 (650) 123-1232 和 {address} 与 950 Queen Dr Suite 110, Daly City CA, 94015。假设值已在数据库中。

这可以通过编写 Joomla 插件来实现吗？或者我应该怎么做？如何才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T08:14:28.970

如果为模块执行插件，您可以使用它，例如

```
class plgContentShorttags extends JPlugin
{

    public function onContentPrepare($context, &$row, &$params, $page = 0)
    {
        // Don't run this plugin when the content is being indexed
        if ($context == 'com_finder.indexer') {
            return true;
        }

        if (JString::strpos($text, '{phone}') !== false) {
            $row->text = JString::str_ireplace('{phone}', '(650) 123-1232', $row->text);
        }

        if (JString::strpos($text, '{address}') !== false) {
            $row->text = JString::str_ireplace('{phone}', 'your address', $row->text);
        }

        return true;
    }
} 
```

您只需要添加插件 xml 并安装它。您甚至可以向插件添加参数以通过后端设置详细信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T08:20:57.173

[ReReplacer](http://extensions.joomla.org/extensions/edition/replace/4336) - 在您的网站输出中搜索和替换。这可以完成工作。

> ReReplacer 是一个 Joomla！组件和系统插件，使您能够替换 Joomla 中的任何内容！网站的输出随心所欲。
> 
> ReReplacer 将在您的页面的文本 (html) 中搜索您的搜索请求，并将其替换为您告诉它执行的操作。这些替代品是即时的。这意味着它们不是永久性的。每次您在网站中请求网页时，它们都会完成。
> 
> 这为您提供了操纵站点输出的巨大可能性和能力。

# java - Spring使用域对象创建队列

> ID：15378044
> 
> 赞同：0
> 
> 时间：2013-03-13T05:55:52.277
> 
> 标签：java, spring

我有一个要求，我必须创建一些像 10 这样的域对象并将它们放入队列中。域对象可能使用其他对象（使用弹簧加载）。

实现这一目标的最佳方法是什么？我应该使用 new 运算符实例化域对象并填充队列，还是有一个弹簧功能来实现这一点。

谢谢 ：-）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T06:01:55.780

您可以通过 Spring 创建这些域对象并通过 Java 源代码中的 ApplicationContext 获取它们

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T08:36:56.490

您可以创建一些`QueuedDomainObject`没有任何方法的接口，在每个域对象中实现它并将它们放入队列中

```
@Inject
List<QueuedDomainObject> queue; 
```

# php - 如何使用 str_replace、WordPress 钩子和 WooCommerce 函数

> ID：15378045
> 
> 赞同：0
> 
> 时间：2013-03-13T05:55:54.533
> 
> 标签：php, wordpress, hook, woocommerce

在 WooCommerce 中，有一个主模板，一切都跑了。

这里：[https ://github.com/woothemes/woocommerce/blob/master/woocommerce-template.php#L1315](https://github.com/woothemes/woocommerce/blob/master/woocommerce-template.php#L1315)

`line 1315`上下我们开始 html 进行结帐，但问题是所有内容都在标签`<p>`中。我想将其更改为`<div>`或`<li>`或`<dd>`（未定）。尽管如此，我想更改标签。

我希望通过 a`str_replace("<p","<div",$some_variable);`和 a来做到这一点，`str_replace("/p>","/div>",$some_variable);`但我对要调用什么钩子感到非常困惑。

哦，我不编辑主文件的原因是因为插件的每次更新都会被覆盖且效率低下：]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T06:11:31.947

在 Switch 的末尾，您可以编辑 if 语句，使其看起来像这样替换第 1468 行

从：

```
if ( $args['return'] ) return $field; else echo $field; 
```

到：

```
if ( $args['return'] ) {
    str_replace("<p","<div",$field);
    str_replace("/p>","/div>",$field);
    return $field;
} else {
    str_replace("<p","<div",$field);
    str_replace("/p>","/div>",$field);
    echo $field;
} 
```

**或者您可以在休息**前将其添加到每个**案例中**

 **```
case "country" :

    ...
    ...
    ...

    str_replace("<p","<div",$field);
    str_replace("/p>","/div>",$field);
break; 
```

* * *

您可以尝试编辑模板

[http://docs.woothemes.com/document/template-structure/](http://docs.woothemes.com/document/template-structure/)

> 您可以通过覆盖以安全升级的方式编辑这些文件。只需将其复制到主题中名为 /woocommerce 的目录中，并保持相同的文件结构。
> 
> 示例：要覆盖管理员订单通知，请将：woocommerce/templates/emails/admin-new-order.php 复制到 yourtheme/woocommerce/emails/admin-new-order.php
> 
> 复制的文件现在将覆盖 WooCommerce 默认模板文件。不要在核心插件本身中编辑这些文件，因为它们在升级过程中会被覆盖，并且任何自定义都将丢失。**

# python-2.7 - 如何在 python 中建立一个计数器？

> ID：15378046
> 
> 赞同：1
> 
> 时间：2013-03-13T05:55:56.840
> 
> 标签：python-2.7

我想拥有它，这样每次我按空格键时，终端中的数字都会增加一，这样我就可以在脑海中记住一个数字而不会忘记它。但是，如果我为此使用 raw_input，则每次都必须按 Enter，这很烦人。我怎样才能使我建立一个计数器，每次按下空格键时都会增加一个变量？

这就是我所拥有的。

```
x=0

while x<10000000:
    press = raw_input()
    if  press == "z":
        x=x+1
        print x 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T15:16:05.890

如果您使用的是 Windows，则有 msvcrt 模块。所以，

```
import msvcrt

while x = True:
    keypress = msvcrt.getch()
    if keypress == "z":
        x=x+1
        print x 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T19:00:06.263

如果您使用的是 Linux/Unix，则有[curses](http://docs.python.org/2/library/curses.html)模块。

```
import curses

def check_press(scr):
    c = None
    x = 0
    while c != 120: # exit on x
        c = scr.getch()
        if c == 122: # count on 'z'
            x += 1
            scr.addstr(0, 0, "%5d" % x)
            scr.refresh()

if __name__ == '__main__':
    curses.wrapper(check_press) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-30T12:41:55.450

```
import os

while True:
    cmd = "read -n 1 c; print $c"
    key = os.popen(cmd).read()
    if key[0] == "z":
        x=x+1
        print x 
```

# c# - 访问范围外的对象

> ID：15378054
> 
> 赞同：-1
> 
> 时间：2013-03-13T05:56:31.300
> 
> 标签：c#, loops, for-loop, foreach, scope

我有一个看起来像这样的 foreach 循环

```
foreach (Student newSortedStudent in studentWithData)
{
    newSortedStudent.Fees = newSortedStudent.Fees.OrderBy......ToArray();
} 
```

但现在我需要访问这个 newSortedStudent 对象并对其进行更多操作。

如果我做这样的事情

```
foreach (Student newSortedStudent in studentWithData)
{
    newSortedStudent.Fees = newSortedStudent.Fee.OrderBy......ToArray();
}

foreach(Student studentData in **newSortedStudent**)
{
    ....
} 
```

我会得到一个错误 newSortedStudent 在当前上下文中不存在。

那么如何在 foreach 循环之外访问 newSortedStudent 呢？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T06:06:30.783

您可以在内部循环中使用嵌套`loop`和使用外部对象，如下所示。`loop`

```
foreach (Student newSortedStudent in studentWithData)
{
    foreach(Student studentData in newSortedStudent.Fee.OrderBy......ToArray())
    {
        ....
    }    
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T05:59:57.750

您需要访问哪个`newSortedStudent`？您只是循环浏览了它们的集合。它超出范围是有原因的。我建议：

1) 将其设置为您尝试使用的范围内存在的变量（即在 foreach 循环之前定义一个变量，然后确定使用哪个变量`newSortedStudent`进行设置）。或者您可以将它的索引存储在一个变量中并使用它来查找它`studentWithData`

或者

2）当你在上下文中时，在循环中做你需要做的事情。

在不确切知道您要做什么的情况下，很难知道是否需要这些或其他解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T06:00:41.397

您需要在循环*之前*定义一个变量。将 newSortedStudent 对象存储在循环*内*的该变量中。然后在循环*后*访问该变量！

所以这就像

```
Student s = new Student();

foreach (Student newSortedStudent in studentWithData)
{
    newSortedStudent = newSortedStudent.Fee.OrderBy......ToArray();
    s = newSortedStudent;
}

// Use s for your manipulations 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T06:07:13.927

```
foreach (Student newSortedStudent in studentWithData)
{
    foreach(Student studentData in newSortedStudent)
   {
       ....
   }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T06:08:47.980

尝试这个，

```
 Student sortedStudent = null;

    foreach (Student newSortedStudent in studentWithData)
    {
        sortedStudent = newSortedStudent.Fee.OrderBy......ToArray();
    }

 if(sortedStudent != null){
    foreach(Student studentData in sortedStudent)
    {
        ....
    }
  } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-13T07:26:15.323

有很多方法可以让变量/对象超出范围。1.一种方法是使用带有一些标志的嵌套循环。2.第二次公开创建Student类型对象，然后将newStoreStudent分配给这个对象，当newStoreStudent被填充新值时。

# android - 在android中通话来电显示

> ID：15378061
> 
> 赞同：2
> 
> 时间：2013-03-13T05:56:51.437
> 
> 标签：android, android-intent, android-contacts

我希望在 android 中制作一个应用程序，它应该在来电时说出来电者姓名或号码。我不知道我应该从哪里开始。谁能帮我？我可以将android的默认语音应用程序包含到我的应用程序中吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T06:20:08.427

我没有这样做，但你可以试试这个东西

首先注册 MyPhoneStateListener。

```
private class MyPhoneStateListener1 extends PhoneStateListener {
    @Override
    public void onCallStateChanged(int state, String incomingNumber) {
        super.onCallStateChanged(state, incomingNumber);
        if (state == TelephonyManager.CALL_STATE_RINGING) {
                           // the incoming number is is the one you wanted
        }
    }
} 
```

现在使用一些[TextToSpeech](http://developer.android.com/reference/android/speech/tts/TextToSpeech.html) api 将传入的数字转换为语音。我没有使用过 TextToSpeech，所以无法提供更多建议。

如果您想获取姓名，请使用以下内容获取联系人姓名

```
Uri uri = Uri.withAppendedPath(PhoneLookup.CONTENT_FILTER_URI, Uri.encode(phoneNumber));
 resolver.query(uri, new String[]{PhoneLookup.DISPLAY_NAME} .....) 
```

# ios - 集合视图的自定义单元格上的 iOS 异常

> ID：15378069
> 
> 赞同：0
> 
> 时间：2013-03-13T05:57:33.990
> 
> 标签：ios, xcode, uicollectionview

我有一个包含图像值路径的数组，我想在`collection view`单元格中动态显示这些图像。但我遇到了一个例外。

我的代码是：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    data=[MyDatabase new];
    imagearray=[data OpenMyDatabase:@"SELECT pic_url FROM interior":@"pic_url"];

    gallerycollection.dataSource=self;
    [[self gallerycollection]setDelegate:self];
    gallerycollection.backgroundColor=[UIColor clearColor];
}

-(UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier=@"Cell";
    customcell *cell=[collectionView dequeueReusableCellWithReuseIdentifier:CellIdentifier forIndexPath:indexPath];
   // [[cell nyimage]setImage:[UIImage imageNamed:[imagearray objectAtIndex:indexPath.row]]];
    UIImageView *recipeImageView = (UIImageView *)[cell viewWithTag:1];
    recipeImageView.image=[imagearray objectAtIndex:indexPath.section * 1 + indexPath.row];
    return cell;

} 
```

我得到了例外

```
2013-03-13 11:22:30.662 Home[3371:c07] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[customcell setImage:]: unrecognized selector sent to instance 0x9f7e410 
```

* * *

@Mithun MP：这些是我的数据库文件

```
MyDatabase.h

#import "FMDatabase.h"
@interface MyDatabase : NSObject
@property (strong,nonatomic) NSString *databaseName,*databasePath;
-(NSMutableArray *) OpenMyDatabase: (NSString *) query: (NSString *) column;
-(FMDatabase *)openDatabase: (NSString *)databasename;
-(NSMutableArray *) storeDatabaseColumnInArray: (FMDatabase *) database: (NSString *) sqlStatement: (NSString *) columnName;
@end

MyDatabase.m

#import "MyDatabase.h"
#import "FMDatabase.h"

@implementation MyDatabase

-(NSMutableArray *)OpenMyDatabase: (NSString *)query: (NSString *)column
{
    //store the database name here
    self.databaseName=@"App_Database.sqlite";

    //get the reference of the database to be stored in device or emulator
    FMDatabase *database=[self openDatabase: self.databaseName];

    //open the database
    [database open];

    //fetch a collumn from database and store it in array
   // NSArray *nsarr= [self storeDatabaseColumnInArray: database: @"select id from kas":@"id"];
    NSArray *nsarr= [self storeDatabaseColumnInArray: database: query: column];

    //close the database
    [database close];
    return nsarr;
}

- (FMDatabase *)openDatabase: (NSString *)databasename
{

    NSFileManager *fm = [NSFileManager defaultManager];
    NSString *documents_dir = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
    NSString *db_path = [documents_dir stringByAppendingPathComponent: databasename ];
    NSString *template_path = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent: databasename];

    if (![fm fileExistsAtPath:db_path])
        [fm copyItemAtPath:template_path toPath:db_path error:nil];
    FMDatabase *db = [FMDatabase databaseWithPath:db_path];
    if (![db open])
        NSLog(@"Failed to open database!");
    return db;
}
-(void) createAndCheckDatabase
{
    BOOL success;

    NSFileManager *fileManager=[NSFileManager defaultManager];
    success=[fileManager fileExistsAtPath:_databasePath];
    NSString *databasePathFromApp=[[[NSBundle mainBundle] resourcePath]
                                   stringByAppendingPathComponent:self.databaseName ];
    [fileManager copyItemAtPath:databasePathFromApp toPath:_databasePath error:nil];

}

-(NSMutableArray *) storeDatabaseColumnInArray : (FMDatabase *) database: (NSString *) sqlStatement: (NSString *) columnName
{

    NSMutableArray *mutablearray = [NSMutableArray array];
    FMResultSet *results = [database executeQuery: sqlStatement];

    while([results next]) {

        NSString *rowValue = [results stringForColumn:columnName];

        [mutablearray addObject:results];
         NSLog(@"row value %@",rowValue);
    }

    //convert the nsmutable array to nsarray

    NSMutableArray *temparr=[NSMutableArray arrayWithArray:mutablearray];
       return temparr;

}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T06:05:24.633

由于这条线，问题正在发生：

```
UIImageView *recipeImageView = (UIImageView *)[cell viewWithTag:1]; 
```

我认为您将标签设置为自定义单元格而不是图像视图。

# math - 查找角度 theta 的代码

> ID：15378070
> 
> 赞同：0
> 
> 时间：2013-03-13T05:57:33.923
> 
> 标签：math, vector, geometry, trigonometry

所以我有 3 个 3D 向量，W、T1 和 T2，它们满足关系 W = T1*cos(theta) + T2*sin(theta)。

我需要想出一个算法，可以在给定这 3 个向量的情况下找到 theta。但是我被卡住了，甚至不知道从哪里开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T08:23:24.887

如果 T1 和 T2 不共线，则可以使用叉积：

*   W = T1*cos(theta) + T2*sin(theta)
*   [W,T1]=[T2,T1]*sin(θ)
*   [W,T2]=[T1,T2]*cos(θ)

如果它们是共线的，只需将它们投影在一条线上并求解标量方程`A=B*cos(theta)+C*sin(theta)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T06:39:42.217

使用线性代数的技术来求解 cos(theta) 和 sin(theta) 的可能性。

```
[ T1_1  |  T2_1  |  W_1 ]
[ T1_2  |  T2_2  |  W_2 ]

[ 1     |  T2_1 / T1_1  |  W_1 / T1_1 ]
[ T1_2  |  T2_2         |  W2         ]

[ 1     |  T2_1 / T1_1                |  W_1 / T1_1             ]
[ 0     |  T2_2 - T1_2 * T2_1 / T1_1  |  W2 - T1_2 * W_1 / T1_1 ]

[ 1     |  T2_1 / T1_1                |  W_1 / T1_1                                             ]
[ 0     |  1                          |  (W2 - T1_2 * W_1 / T1_1) / (T2_2 - T1_2 * T2_1 / T1_1) ]

[ 1     |  0                          |  W_1 / T1_1 - T2_1 / T1_1 * (W2 - T1_2 * W_1 / T1_1) / (T2_2 - T1_2 * T2_1 / T1_1)              ]
[ 0     |  1                          |  (W2 - T1_2 * W_1 / T1_1) / (T2_2 - T1_2 * T2_1 / T1_1)                                         ] 
```

所以，

```
cos(theta) = alpha * W_1 / T1_1 - T2_1 / T1_1 * (W2 - T1_2 * W_1 / T1_1) / (T2_2 - T1_2 * T2_1 / T1_1)
sin(theta) = alpha * (W2 - T1_2 * W_1 / T1_1) / (T2_2 - T1_2 * T2_1 / T1_1) 
```

我们知道

```
cos(theta)^2 + sin(theta)^2 = 1 
```

将前面的方程代`cos(theta)`入`sin(theta)`最后一个方程，我们可以求解`alpha`。知道了这一点，我们可以`theta`使用反正弦或反正弦来计算 的实际值。

* * *

请注意，我没有在任何这些步骤中检查我的工作，因此我不对方程式的准确性做出任何保证。我把它留给你作为练习。

# phpexcel - 如何生成具有动态文件名的 .xls 文件

> ID：15378071
> 
> 赞同：0
> 
> 时间：2013-03-13T05:57:34.850
> 
> 标签：phpexcel

我通过加载现有的 .xls 文件并在 Excel 工作表表单中执行一些单元格映射填充值来生成 .xls 文件。在保存它时，我给了一个静态文件名以将它保存在服务器中。现在我希望文件名以这种方式动态化，我在 URl 中传递了一些 request_id 来运行我的代码，并且我希望将该代码附加到生成的文件中。

例如，在我的代码中，我通过 $objWriter->save('Form.xls'); 保存它

在运行我的代码时，我传递了一个 request_id，例如 /Form.php?request_id=377

因此，我希望将 request_id 附加到保存的 excel 文件中，即 Form_377.xls

请指教。提前致谢！克里希纳

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T06:00:36.237

你应该做这个 ：

```
$objWriter->save('Form_'.$_GET['request_id'].'.xls'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T06:00:43.493

```
$objWriter->save('Form' . $_GET['request_id'] . '.xls'); 
```

[您通过$_GET['param']](http://php.net/manual/en/reserved.variables.get.php)从 url 获取参数，因此您可以将其用于您的目的。

# oracle - 在查询给出 DB CPU 利用率影响之后，我可以减少表中的数据将帮助我降低 DB CPU 性能吗

> ID：15378075
> 
> 赞同：0
> 
> 时间：2013-03-13T05:57:57.533
> 
> 标签：oracle, oracle11g

我正在使用以下查询，其中被引用的表有 5000 万+条记录。通过创建历史表将帮助我获得更好的 CPU 性能？或者除了分区之外还有其他选项吗？或者查询计划调整是唯一的选择？

```
SELECT MIN(minbkt),
       maxbkt,
       SUBSTRB(DUMP(MIN(val), 16, 0, 32), 1, 120) minval,
       SUBSTRB(DUMP(MAX(val), 16, 0, 32), 1, 120) maxval,
       SUM(rep) sumrep,
       SUM(repsq) sumrepsq,
       MAX(rep) maxrep,
       COUNT(*) bktndv,
       SUM(CASE
               WHEN rep = 1 THEN
                1
               ELSE
                0
           END) unqrep
  FROM (SELECT val,
               MIN(bkt) minbkt,
               MAX(bkt) maxbkt,
               COUNT(val) rep,
               COUNT(val) * COUNT(val) repsq
          FROM (SELECT
                /*+ no_parallel(t) no_parallel_index(t) dbms_stats cursor_sharing_exact use_weak_name_resl dynamic_sampling(0) no_monitoring */
                 "VERSION_LABEL" val,
                 NTILE(75) OVER(ORDER BY NLSSORT("VERSION_LABEL", 'NLS_SORT = binary')) bkt
                  FROM "User"."AUDITTRAIL" t
                 WHERE "VERSION_LABEL" IS NOT NULL)
         GROUP BY val)
 GROUP BY maxbkt
 ORDER BY maxbkt 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T09:39:31.390

看起来这是一个与在审计表的 version_label 列上收集直方图相关的查询。

我希望您几乎可以肯定不需要存在这样的直方图，并且您可以修改统计信息收集以仅收集此类表上的简单统计信息 - 即。没有直方图。最好的方法是基于您的版本和触发统计信息收集的方式，但如果您需要帮助，请扩展问题以包含这些详细信息或开始另一个问题。

# c# - C#：导出到excel时如何取消合并gridview单元格

> ID：15378078
> 
> 赞同：0
> 
> 时间：2013-03-13T05:58:01.867
> 
> 标签：c#, asp.net, gridview, export-to-excel

我有一个gridview，其中一列将日期和时间存储在一起。我想将该列分成两列，一列存储日期，另一列存储时间。有没有办法做到这一点？谢谢。

这是我用来将gridview导出到excel的代码。

```
protected void exportBtn_Click(object sender, EventArgs e)
{
    loadGridViewContent();
    Response.Clear();
    Response.AddHeader("content-disposition", "attachment;filename=report.xls");
    Response.Charset = "";

    Response.Cache.SetCacheability(HttpCacheability.NoCache);
    Response.ContentType = "application/vnd.xls";
    Response.Write(@"<style> TD {mso-number-format:\@;}</style>");
    System.IO.StringWriter stringWrite = new System.IO.StringWriter();
    System.Web.UI.HtmlTextWriter htmlWrite = new HtmlTextWriter(stringWrite);

    HtmlForm frm = new HtmlForm();
    gvResult.Parent.Controls.Add(frm);
    frm.Controls.Add(gvResult);
    frm.RenderControl(htmlWrite);

    Response.Write(stringWrite.ToString());
    Response.End();
} 
```

这是我目前拥有的。

> ```
>  |----------------------|
>    | 13-MAR-2013 14:24:05 |
>    |----------------------| 
> ```

这就是我想要完成的。

> ```
>  |-------------|----------|
>    | 13-MAR-2013 | 14:24:05 |
>    |-------------|----------| 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T06:15:30.933

> 您可以这样做：

```
<asp:GridView runat="server" ID="gv" AutoGenerateColumns="false" >
    <Columns>
        <asp:BoundField DataField="YourDateTimeColumn" HeaderText="Date" DataFormatString="{0:MM/dd/yyyy}"/>
        <asp:BoundField DataField="YourDateTimeColumn" HeaderText="Time" DataFormatString="{0:hh:mm:tt}" />
    </Columns>
</asp:GridView> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T06:41:15.980

为此，您需要进行一些返工。要导出到 excel，您需要使用一个虚拟的网格视图，您要为其分配日期和时间的单独列。你会[在这里找到有用的代码](http://www.aspsnippets.com/Articles/Export-GridView-To-Word-Excel-PDF-CSV-Formats-in-ASP.Net.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T06:48:37.840

尝试通过添加另外两列来保存日期和时间值，通过在这些列上将可见属性设置为 false 来隐藏它们。

在您租用之前将这两列设置为可见并隐藏 DateTime 列并呈现它。

隐藏列

```
gvResult.Columns[columnsIndex1].visible = false; 
```

显示列

```
gvResult.Columns[columnsIndex2].visible = true;

gvResult.DataBind(); 
```

最后渲染它。

```
gvResult.RenderControl(htmlWrite); 
```

# php - 通过 $_Files 读取表单输入元素名称

> ID：15378087
> 
> 赞同：2
> 
> 时间：2013-03-13T05:58:48.770
> 
> 标签：php

我有一个输入类似于此的表单：

```
<p><label>Image 1: </label><input type="file" name="candy"></p>
<p><label>Image 2: </label><input type="file" name="apple"></p>
<p><label>Image 3: </label><input type="file" name="red"></p> 
```

使用 $_Files 循环，我想知道是否可以获取上传文件的输入元素的输入字段名称（不是值）？

```
foreach($_FILES as $file) {
  /*
  do image processing here, but would like to save as 
  'candy.jpg' rather than $file['name'].
  */
} 
```

所以我希望能够在不知道它是什么的情况下获得字段名称“糖果”或“苹果”。到目前为止，我所看到的一切都假设在处理文件时已经知道“糖果”。

换句话说，我想从上传的文件向后工作到它上传的元素。这可以用PHP吗？

更新了解决方案：

```
foreach($_FILES as $key=>$file) { 
  $image = new Imagick($file['tmp_name']); 
  // do some processing 
  $image->writeImage($key.'.jpg'); 
} 
```

将根据输入字段名称给出“candy.jpg”或“apple.jpg”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T06:01:33.333

尝试

```
foreach($_FILES as $nameOfInputFile => $file) {

    // your stuff

} 
```

`$_FILES`是一个数组，其索引为您的输入的名称（文件类型）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T06:02:32.093

`foreach`您可以在语句中请求密钥。

```
foreach($_FILES as $key=>$file) {

} 
```

# java - 有没有更好的方法来处理国家名单及其州/省/地区？

> ID：15378091
> 
> 赞同：2
> 
> 时间：2013-03-13T05:59:16.233
> 
> 标签：java, javascript, spring-mvc

我有 Web 应用程序，其中有国家的下拉列表以及州/省/地区的下拉列表。

如果我选择国家，则应动态填充其相关的州\省\地区。

人口是容易的事情。

但是随着国际化，我们应该如何以及在哪里维护这些庞大的数据

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T06:08:53.900

```
step 1 : create data base for country names and related state names
step 2 : make ajax call on select box for country on onchange event
step 3 : the ajax call hits the db and return with the state names
step 4 : set the value for state select box with the received response from ajax call 
```

# java - 注册前/某事/ /

> ID：15378092
> 
> 赞同：0
> 
> 时间：2013-03-13T05:59:16.267
> 
> 标签：java, regex

我想要一个比较字母数字和“-”的正则表达式。并从下面的字符串返回 123ABC-4CDE56。我试过下面的代码，但它不起作用。

```
 String regex = "^/[a-zA-Z0-9-_]+$";

        Pattern pattern = Pattern.compile(regex);

        String str = "/something/123ABC-4CDE56/somethingmoretobeignored";

        Matcher matcher = pattern.matcher(str);

        if(matcher.reset(str).find()){
            System.out.println(matcher.group(1));
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T06:03:49.470

`^`和`$`分别表示行的开始和结束。所以：

```
String regex = "/[a-zA-Z0-9-_]+/"; 
```

另外，您是说`.group(1)`，这将返回括号中的第一件事，而括号`()`中没有。所以你想改变你的正则表达式：

```
String regex = "/([-a-zA-Z0-9_]+)/"; 
```

要正确匹配字符串的开头和结尾：

```
String regex = "(^|/)([-a-zA-Z0-9_]+)(/|$)"; 
```

现在请记住，您必须使用`.group(2)`.

而且`something`和`somethingmoretobeignored`都是字母数字，可能忽略小写：

```
String regex = "(^|/)([A-Z0-9_]+)(/|$)"; 
```

# php - 将日期转换为 1990-03-20 到 19900320 并检查文本框值小于 xml attr 值的输入

> ID：15378095
> 
> 赞同：0
> 
> 时间：2013-03-13T05:59:29.470
> 
> 标签：php, html, xpath, xquery

这是我的 xml 格式：-

```
<products>
  <product_id value="nokia">
    <tab_id value="3550">
      <individual_born_from value="1990-03-20"/>
    </tab_id>
  <products_id>
  <product_id value="samsung">
    <tab_id value="3650">
      <individual_born_from value="1990-03-20"/>
    </tab_id>
  <products_id>
</products> 
```

我的代码：-

```
<html>
<head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script>
        var xml;
        $.get(
        "xml_converted.xml",
        null,
        function (data) {
            xml = data;
        },
        "xml"
    );
        function get_list() {
        var elName = $('#select').val();
            var xPath = '//product_id["' + elName + '" ' + 
            ' < translate(tab_id/individual_born_from/@value,"-","")]/@value';
            var iterator = xml.evaluate(xPath, xml.documentElement, null,
                XPathResult.UNORDERED_NODE_ITERATOR_TYPE, null);
            var thisNode = iterator.iterateNext();
            var str = '';
            while (thisNode) {
                if (str) {
                    str += ', ';
                }
                str += thisNode.textContent;
                thisNode = iterator.iterateNext();
            }
            $("#result").text(str);
        }
    </script>
</head>
<body>
    <input type="text" id="select">
    <input type="button" name="button" value="Search" onclick="get_list()">
    <div id="result">
    </div>
</body>
</html> 
```

这是我的 xpath：-

```
var xPath = '//product_id["' + elName + '" ' + 
            ' < translate(tab_id/individual_born_from/@value,"-","")]/@value'; 
```

在这里我想输出类似的东西： -

如果用户在文本框中输入日期，
如果文本框值小于 xml `individual_born_from="1990-03-20"`
，则显示输出：- `1,2` b'coz of 1 是第一个`<product_id>`attr 值，2 是第二级`<prodcut_id>`attr 值，这两个日期都比用户在文本框中输入的要大...
如果可能使用 xpath 的 php 代码然后也帮助我添加标签 PHP 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T08:14:18.007

XPath 表达式

```
//individual_born_from/(number(translate(@value,'-','')) 
```

在 XPath 2.0 中有效，但在 XPath 1.0 中无效，这将“/”之后可能出现的内容限制为一个简单的步骤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T06:15:17.637

请试试这个：

```
var xPath = '//product_id["' + elName + '" ' + 
            ' < translate(tab_id/individual_born_from/@value,"-","")]/@value'; 
```

# c - 如何在C中获取某个进程的进程ID

> ID：15378097
> 
> 赞同：0
> 
> 时间：2013-03-13T05:59:36.967
> 
> 标签：c, windows-7, driver, wdk

我正在尝试在 Windows 7 32 位中创建驱动程序。

我正在用 C 编写驱动程序。在驱动程序代码中，我试图获取`notepad.exe`.

我不知道如何获取该进程的 id，如果我使用`GetProcessesByName` 我会收到类似`PROCESS undeclared identifier`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:33:25.143

CreateToolhelp32Snapshot 和相关函数是您所需要的。可以在[此处](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686701%28v=vs.85%29.aspx)找到使用这些函数的示例代码。请注意，PROCESSENTRY32 结构包含 EXE 文件名，因此您正在寻找“notepad.exe”。您可能应该获得链接中描述的完整路径，并确保它位于 \windows\system 目录中。

# c# - 如何在 VS 2010 安装项目 c# 之前进行目标系统要求测试

> ID：15378098
> 
> 赞同：3
> 
> 时间：2013-03-13T05:59:40.290
> 
> 标签：c#, installation, setup-deployment, performance-testing

我有一个需要使用 Oracle 32 位版本的应用程序。我了解，我可以将此添加为先决条件，如果它尚未安装在目标机器上，它将被下载并安装完成。

**其实我的要求是**“我需要做系统性能测试，比如**内存大小、处理器速度、鼠标可用性、键盘可用性、打印机可用性、系统最大屏幕分辨率支持……等等。** ”

是否有可能在设置之前测试所有信息？

我是部署项目的新手，你能告诉我从哪里开始吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T07:05:08.460

我不确定如何使用这些单独的功能，但以下是检查不同事物的功能：

```
 //Get system RAM
        private double GetSystemRam()
        {
            var searcher = new ManagementObjectSearcher("Select * From Win32_ComputerSystem");
            double total_Ram_Bytes = 0;
            foreach (ManagementObject Mobject in searcher.Get())
            {
                total_Ram_Bytes = (Convert.ToDouble(Mobject["TotalPhysicalMemory"]));
                Console.WriteLine("RAM Size in Giga Bytes: {0}", total_Ram_Bytes / 1073741824);

            }
            return total_Ram_Bytes;
        }

        //Get system processor speed
        private int GetprocessorSpeed()
        {
            var searcher = new ManagementObjectSearcher("select MaxClockSpeed from Win32_Processor");
            int processorSpeed = 0;
            foreach (var item in searcher.Get())
            {
                processorSpeed = Convert.ToInt32(item["MaxClockSpeed"]);
                Console.WriteLine("Processor Speed is(GHz):" + processorSpeed);
            }
            return processorSpeed;
        }

        //Get system maximum resolution
        private void GetMaxResolution()
        {
            using (var searcher = new System.Management.ManagementObjectSearcher("SELECT * FROM CIM_VideoControllerResolution"))
            {
                var results = searcher.Get();
                UInt32 maxHResolution = 0;
                UInt32 maxVResolution = 0;

                foreach (var item in results)
                {
                    if ((UInt32)item["HorizontalResolution"] > maxHResolution)
                        maxHResolution = (UInt32)item["HorizontalResolution"];

                    if ((UInt32)item["VerticalResolution"] > maxVResolution)
                        maxVResolution = (UInt32)item["VerticalResolution"];
                }

                Console.WriteLine("Max Supported Resolution " + maxHResolution + "x" + maxVResolution);
            }
        }

        //Check for availability of keyboard 
        private bool IsKeyboardAvailable()
        {
            bool isKeyboardAvailable = false;
            var searcher = new ManagementObjectSearcher("select * from Win32_Keyboard");

            List<string> keyBoardName = new List<string>();
            foreach (var item in searcher.Get())
            {
                keyBoardName.Add(Convert.ToString(item["Name"]));
                Console.WriteLine("KeyBoard name is :" + item["Name"]);
                isKeyboardAvailable = true;
            }
            return isKeyboardAvailable;
        }

        //Check for availability of printer
        private bool IsPrinterAvailable()
        {
            bool isPrinterAvailable = false;
            var searcher = new ManagementObjectSearcher("Select * from Win32_Printer");
            List<string> printerName = new List<string>();
            foreach (var item in searcher.Get())
            {
                printerName.Add(item["Name"].ToString().ToLower());
                Console.WriteLine("Printer name is :" + item["Name"]);
                isPrinterAvailable = true;
            }
            return isPrinterAvailable;
        }

        //Check for availability of mouse
        private bool IsMouseAvailable()
        {
            bool isMouseAvailable = false;
            var searcher = new ManagementObjectSearcher("Select * from Win32_PointingDevice");
            List<string> mouseType = new List<string>();
            foreach (var item in searcher.Get())
            {
                mouseType.Add(item["Name"].ToString().ToLower());
                Console.WriteLine("Mouse type is :" + item["Name"]);
                isMouseAvailable = true;
            }
            return isMouseAvailable;
        } 
```

**注意：**我只是使用 Console.WriteLine 以便您可以查看值并使用 LIST，因此如果您愿意，可以进一步使用这些项目。

还可以阅读一些文章，例如[如何获取硬件信息（CPU ID、主板信息、硬盘序列、系统信息……）](http://www.codeproject.com/Articles/17973/How-To-Get-Hardware-Information-CPU-ID-MainBoard-I)

# c# - c# xml用特定的格式化程序序列化字符串成员

> ID：15378100
> 
> 赞同：0
> 
> 时间：2013-03-13T05:59:50.493
> 
> 标签：c#, xml, serialization, linq-to-xml

我有浮动成员，当我将它序列化为文件时，我希望它具有特定格式（例如

```
 string.Format("{0:0.00}",someFloat) 
```

我可以将格式化程序放在该成员的 xml 属性中吗？如果是这样，它的确切语法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T06:18:33.330

序列化用于将数据转换为通用可读和可口的格式。序列化时不需要格式化。您可以在 UI 中显示时对其进行格式化。如果你真的需要这样做，请检查这个 SO 答案[你能指定日期时间的 XmlSerialization 的格式吗？](https://stackoverflow.com/questions/1118833/can-you-specify-format-for-xmlserialization-of-a-datetime)

# javascript - 多次点击停止动画子菜单

> ID：15378107
> 
> 赞同：0
> 
> 时间：2013-03-13T06:00:06.250
> 
> 标签：javascript, jquery, jquery-animate

我有一个子菜单，它从屏幕左侧（左侧：-662px）向左侧滑动：342px。这是在单击主菜单项时触发的。

如果再次单击主菜单，子菜单将退回到 -662px。我的问题是，如果主菜单项快速连续单击，则子菜单元素会一次在页面上移动 342 像素。它没有像预期的那样来回移动。

这只发生在元素动画期间 - 在子菜单完成动画后单击主菜单项，它会按原样移回 -662px。

我试过添加 .stop() 没有影响。有谁知道如何解决这个问题？

```
//IF IS SHOWN, HIDE
$("#menu ul li").click(function() {
  $("#menu ul li ul").each(function() {
   //GET SUBMENUS CURRENT POSITION  
    var sub2pos = $(this).css('left');
       //IF MARGIN IS GREATER THE 340PX HIDE THE MENU
        sub2pos = parseInt(sub2pos);
        if(sub2pos > 340){
         $(this).stop().animate({ left: '-=662px' }, 400 );
      }
  });//END EACHFUNCTION
});//END 1st CLICK FUNCTION

//IF IS HIDDEN, SHOW
$("#menu ul li").click(function() {
      //GET SUBMENUS CURRENT POSITION
      var sub2pos = $(this).children('ul').css('left');
      //IF MARGIN IS LESS THEN 342PX SHOW THE MENU
       sub2pos = parseInt(sub2pos);
      if(sub2pos < 342){
           $(this).children('ul').delay(500).stop().animate({ left: '+=662px' }, 400 );
      }
});//END 2nd CLICK FUNCTION 
```

编辑：我在这里创建了一个小提琴。[http://jsfiddle.net/q5Htx/19/](http://jsfiddle.net/q5Htx/19/)注意如果你快速点击菜单项会发生什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T07:41:48.097

我建议几点：

将显示和隐藏逻辑移至带有 if-elseif 块的函数，以决定执行哪一个。

```
function menuClickHandler(menu){//logic goes here} 
```

然后只绑定一次 .click 事件并调用该函数。

```
$(document).ready(function(){ 
    $("#menu ul li").on('click', function(e) { 
        menuClickHandler($(this)); 
    });
}); 
```

然后在动画菜单之前和之后在您的函数中编排单击事件的取消绑定/绑定。

更多代码[在这里](http://jsfiddle.net/q5Htx/28/)更新你的小提琴

-注意我在代码中使用了开/关。使用绑定/取消绑定来解释，因为它们在语法上听起来是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T07:02:28.193

我相信我发现了问题：

我应该在子菜单滑出的第二个 if 语句中更具体。而不是`<342`我应该指定元素的负位置：`<= -662`。`left 150px`这样，如果 div 位于，例如，或介于 +342 和 -662 之间的任何其他位置，则不会触发动画。

# javascript - 传递给 JS 方法的参数无效

> ID：15378113
> 
> 赞同：0
> 
> 时间：2013-03-13T06:00:25.127
> 
> 标签：javascript

有人能告诉我这个片段有什么问题吗？

```
<!DOCTYPE html>
<html>
<head>
<script>
function anotherWindow(msg, myWidth, myHeight)
{
 theWindow=window.open('','','width=myWidth,height=myHeight');
 theWindow.document.write(msg);
 theWindow.focus();
}
</script>
</head>
<body>

<input type="button" value="One more window" onclick="anotherWindow('Here is the  window',200,100)" />

</body>
</html> 
```

虽然第一个参数 (msg) 已成功传递给方法 .write，但方法 .open 中与窗口大小相关的两个参数没有带来任何结果——该方法坚持一些默认值。

我对变量传递的理解有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T06:02:39.480

论点以正确的方式传递，但它们不是`used`正确的方式。

```
theWindow=window.open('','','width=myWidth,height=myHeight'); 
```

你有`myWidth`和`myHeight`引号不会告诉javascript这些是变量。这两个必须是外部引号。

像这样：

```
theWindow=window.open('','','width='+myWidth+',height='+myHeight); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T06:02:50.037

您需要实际替换变量的值。

```
theWindow=window.open('','','width='+myWidth+',height='+myHeight); 
```

# android - 水平滚动视图中的自定义视图不滚动

> ID：15378121
> 
> 赞同：2
> 
> 时间：2013-03-13T06:00:51.753
> 
> 标签：android, android-view, android-custom-view, horizontalscrollview

我正在处理自定义视图。**当我将自定义视图放在水平滚动视图中时，水平滚动不起作用。我认为我在编写MeasureSpec**时犯了错误， 但我不知道如何为自定义视图编写**MeasureSpec**

我的视图类代码是这样的

```
public class Makecell extends ViewGroup{
    private int line_height;  
    private int line_width;
    Context mContext;
    subview sub;
    int left,right,top,bottom;
    MainActivity main;
    public Makecell(Context context) {
        super(context);
        mContext=context;
        // TODO Auto-generated constructor stub
    }

    public Makecell(Context context, AttributeSet attrs){
        super(context, attrs);
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        // TODO Auto-generated method stub
        super.onMeasure(widthMeasureSpec, heightMeasureSpec);

         final int width = MeasureSpec.getSize(widthMeasureSpec) - getPaddingLeft() - getPaddingRight();
            int height = MeasureSpec.getSize(heightMeasureSpec) - getPaddingTop() - getPaddingBottom();

            final int count = getChildCount();
            int line_height = 0;
            int line_width=0;

            int xpos = getPaddingLeft();  
            int ypos = getPaddingTop();
            for (int i = 0; i < count; i++) {
                 final View child = getChildAt(i);
                 if (child.getVisibility() != GONE) {

                     child.measure(
                             MeasureSpec.makeMeasureSpec(width, MeasureSpec.UNSPECIFIED),
                             MeasureSpec.makeMeasureSpec(height, MeasureSpec.AT_MOST));

                     final int childw = child.getMeasuredWidth();
                     final int childh = child.getMeasuredHeight();
                     line_height = Math.max(line_height, child.getMeasuredHeight());
                     line_width=Math.max(line_width, child.getMeasuredWidth());
                     if (xpos + childh > height) {
                         xpos = getPaddingLeft();
                         ypos += line_width; 
                     }
                     xpos += childw;
                 }
            }

            this.line_width=line_width;

    }

    @SuppressLint("DrawAllocation")
    @Override
    protected void onLayout(boolean changed, int l, int t, int r, int b) {
        // TODO Auto-generated method stub

          final int count = getChildCount();
          final int width = r - l;
          final int hight = b - t;  
          int xpos = 0;
          int ypos = 0;

          for (int i = 0; i < count; i++) {
              final View child = getChildAt(i);
              if (child.getVisibility() != GONE) {
                  final int childw = child.getMeasuredWidth();
                  final int childh = child.getMeasuredHeight();
//                
                  if (xpos + childh > hight) {
                      xpos = getPaddingLeft();
                      ypos += line_width;

                  }
                child.layout(ypos, xpos,ypos + childw, xpos + childw );
                xpos += childh;

              }
          }
    }
} 
```

和 xml 看起来像这样

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >
   <HorizontalScrollView 
       android:layout_height="match_parent"
       android:layout_width="match_parent"
       android:fillViewport="true"
       android:id="@+id/rootlin"
       > 
   </HorizontalScrollView>
</RelativeLayout> 
```

在代码中添加视图看起来像

```
cell=new Makecell(getApplicationContext());
        mainlin=(HorizontalScrollView)findViewById(R.id.rootlin);
        LinearLayout lin=new LinearLayout(this);
        lin.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.MATCH_PARENT));
        lin.setOrientation(LinearLayout.HORIZONTAL);
        for(int i=0;i<100;i++)
        {
            text=new TextView(this);
            text.setText("Text "+i);
            text.setTextSize(15);
            text.setBackgroundColor(Color.CYAN);
            text.setWidth(screenwidth/2);
            cell.addView(text);
        }
        lin.addView(cell);
        mainlin.addView(lin); 
```

谁能帮我找到我做错的地方

提前致谢..

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-13T06:41:26.920

他们两个都工作：

在java中：

```
 LinearLayout lin=new LinearLayout(this);
    lin.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.MATCH_PARENT));
    lin.setOrientation(LinearLayout.HORIZONTAL);
    lin.setHorizontalScrollBarEnabled(true); 
```

并在 xml 文件中：

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
      xmlns:tools="http://schemas.android.com/tools"
      android:layout_width="match_parent"
      android:layout_height="match_parent"
      android:scrollbars="horizontal"
      android:orientation="horizontal"
      tools:context=".MainActivity" >
   </LinearLayout> 
```

# asp.net-mvc - 是否可以通过 Web API 返回 json 数据？

> ID：15378125
> 
> 赞同：0
> 
> 时间：2013-03-13T06:01:12.333
> 
> 标签：asp.net-mvc, json, asp.net-web-api

我有一个返回 JSON 数据的控制器操作。它可以通过 getJSON 方法轻松访问。但我希望通过 Web API 检索 JSON 数据。

我的控制器代码是

```
public ActionResult GetProfile(string profileName)
    {
        var profileDataService = new BokingEngine.MasterDataService.GetProfileDataService();
        var request = new ProfileSearchCriteria { Name = profileName };
        var profileDetails = profileDataService.GetList(request);
        return Json(profileDetails, JsonRequestBehavior.AllowGet);

    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T07:11:00.863

在 Web API 中，这将是您的操作：

```
public class ProfileController : ApiController {
    public ProfileData Get(string profileName)
    {
        var profileDataService = new BokingEngine.MasterDataService.GetProfileDataService();
        var request = new ProfileSearchCriteria { Name = profileName };
        var profileDetails = profileDataService.GetList(request);
        return profileDetails;
    }
} 
```

然后你的客户应该指定他们想要的数据类型。如果指定了 Accept: application/json 标头，则 Web API 返回 JSON。接受：text/xml 将产生 XML。

更多信息：[http ://www.asp.net/web-api/overview/formats-and-model-binding/media-formatters](http://www.asp.net/web-api/overview/formats-and-model-binding/media-formatters)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T10:10:08.897

将您的 ActionResult 更改为 JsonResult，以便它返回 Json。如果你想让 Web API 特定，你应该创建一个继承 ApiController 的 Controller。

# java - 无法连接到 SMTP 主机：smtp.gmail.com，端口：465，响应：-1

> ID：15378133
> 
> 赞同：23
> 
> 时间：2013-03-13T06:02:09.383
> 
> 标签：java, smtp, gmail

发送邮件时出现此错误

> java.lang.RuntimeException: javax.mail.SendFailedException: 发送失败；嵌套异常是：类 javax.mail.MessagingException：无法连接到 SMTP 主机：smtp.gmail.com，端口：465，响应：-1

我的代码是：

```
Properties props = new Properties();
props.put("mail.smtp.host", "smtp.gmail.com");
props.put("mail.smtp.starttls.enable","true");
props.put("mail.smtp.socketFactory.port", "465");
props.put("mail.smtp.auth", "true");
props.put("mail.smtp.port", "465");

Session session = Session.getDefaultInstance(props,
        new javax.mail.Authenticator() {
                protected PasswordAuthentication getPasswordAuthentication() {
                        return new PasswordAuthentication("email","password");
                }
        });

try {

        Message message = new MimeMessage(session);
        message.setFrom(new InternetAddress("email"));
        message.setRecipients(Message.RecipientType.TO,
                        InternetAddress.parse(this.to));
        message.setSubject("Testing");
        message.setText("Hey, this is the testing email.");

        Transport.send(message); 
```

任何帮助，将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-07-20T10:18:42.880

您需要告诉它您正在使用 SSL：

```
props.put("mail.smtp.socketFactory.class", "javax.net.ssl.SSLSocketFactory"); 
```

万一你错过了什么，这里是工作代码：

```
String  d_email = "address@gmail.com",
            d_uname = "Name",
            d_password = "urpassword",
            d_host = "smtp.gmail.com",
            d_port  = "465",
            m_to = "toAddress@gmail.com",
            m_subject = "Indoors Readable File: " + params[0].getName(),
            m_text = "This message is from Indoor Positioning App. Required file(s) are attached.";
    Properties props = new Properties();
    props.put("mail.smtp.user", d_email);
    props.put("mail.smtp.host", d_host);
    props.put("mail.smtp.port", d_port);
    props.put("mail.smtp.starttls.enable","true");
    props.put("mail.smtp.debug", "true");
    props.put("mail.smtp.auth", "true");
    props.put("mail.smtp.socketFactory.port", d_port);
    props.put("mail.smtp.socketFactory.class", "javax.net.ssl.SSLSocketFactory");
    props.put("mail.smtp.socketFactory.fallback", "false");

    SMTPAuthenticator auth = new SMTPAuthenticator();
    Session session = Session.getInstance(props, auth);
    session.setDebug(true);

    MimeMessage msg = new MimeMessage(session);
    try {
        msg.setSubject(m_subject);
        msg.setFrom(new InternetAddress(d_email));
        msg.addRecipient(Message.RecipientType.TO, new InternetAddress(m_to));

Transport transport = session.getTransport("smtps");
            transport.connect(d_host, Integer.valueOf(d_port), d_uname, d_password);
            transport.sendMessage(msg, msg.getAllRecipients());
            transport.close();

        } catch (AddressException e) {
            e.printStackTrace();
            return false;
        } catch (MessagingException e) {
            e.printStackTrace();
            return false;
        } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-10-25T18:14:49.010

我在使用 NetBeans 进行调试时遇到了这个问题，甚至执行了实际的 jar 文件。防病毒软件会阻止发送电子邮件。您应该在调试期间暂时禁用防病毒软件，或者将 NetBeans 和实际的 jar 文件排除在扫描范围之外。就我而言，我使用的是 Avast。

请参阅此链接以了解如何排除：[如何将文件/网站异常添加到 avast！杀毒软件 2014](http://www.getavast.net/support/managing-exceptions/)

这个对我有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-08-26T17:55:21.697

就我而言，是 Avast Antivirus 干扰了连接。禁用此功能的操作：Avast -> 设置 -> 组件 -> Mail Shield（自定义）-> SSL 扫描 -> 取消选中“扫描 SSL 连接”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T16:45:10.550

端口 465 用于“smtp over SSL”。

[http://javamail.kenai.com/nonav/javadocs/com/sun/mail/smtp/package-summary.html](http://javamail.kenai.com/nonav/javadocs/com/sun/mail/smtp/package-summary.html)

```
[...] For example, use
    props.put("mail.smtp.port", "888");
to set the mail.smtp.port property, which is of type int.

Note that if you're using the "smtps" protocol to access SMTP over SSL, 
all the properties would be named "mail.smtps.*" 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-04-12T17:19:03.720

我所做的是我注释掉了

```
props.put("mail.smtp.starttls.enable","true"); 
```

因为显然对于 G-mail，您不需要它。然后，如果您还没有这样做，您需要在 G-mail 中为您的程序创建一个应用程序密码。我做到了，而且效果很好。此处此链接将向您展示如何操作：https: [//support.google.com/accounts/answer/185833](https://support.google.com/accounts/answer/185833)。

# android - Android - 滚动我的列表视图时出现问题

> ID：15378135
> 
> 赞同：0
> 
> 时间：2013-03-13T06:02:14.723
> 
> 标签：android, listview, background-color

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View row = convertView;
    ViewHolder holder = null;

    if (row == null) {
        LayoutInflater inflater = ((Activity) context).getLayoutInflater();
        row = inflater.inflate(layoutResourceId, parent, false);
        LinearLayout root_view = (LinearLayout) row
                .findViewById(R.id.list_root_view);

        int evenRow = position % 2;
        if (evenRow == 0) {
            root_view.setBackgroundColor(context.getResources().getColor(
                    android.R.color.darker_gray));
        }

        holder = new ViewHolder();
        holder.date = (TextView) row.findViewById(R.id.dateTextView);
        holder.time = (TextView) row.findViewById(R.id.timeTextView);
        holder.breachNo = (TextView)row.findViewById(R.id.breachNoTextView);
        holder.fee = (TextView) row.findViewById(R.id.feeTextView);
        holder.orderCheckBox =CheckBox)row.findViewById(R.id.orderCheckBox);
        row.setTag(holder);
    } else {
        holder = (ViewHolder) row.getTag();
    }

    historyData = arraylist.get(position);
    holder.date.setText(historyData.getDate() + "");
    holder.time.setText(historyData.getTime().toString());
    holder.breachNo.setText(historyData.getBreachNo() + "");
    holder.fee.setText(historyData.getFee() + "");
    holder.orderCheckBox.setEnabled(true);

    return row;
} 
```

在上面的代码中我有一些问题。我想`listview`交替设置我的项目颜色。（例如蓝色的奇数行和灰色的偶数行）。在加载活动时，我得到了完美的颜色。问题是滚动我 `listview`的项目颜色随机变化。谁能帮我解决..？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T06:08:09.717

在

> 获取视图

设置背景颜色，在 setTag 之外，如果 else 块。是的，也可以添加 else 。

喜欢

```
if (row == null) {
        LayoutInflater inflater = ((Activity) context).getLayoutInflater();
        row = inflater.inflate(layoutResourceId, parent, false);
        LinearLayout root_view = (LinearLayout) row
                .findViewById(R.id.list_root_view);

        int evenRow = position % 2;
        if (evenRow == 0) {
            root_view.setBackgroundColor(context.getResources().getColor(
                    android.R.color.darker_gray));
        }

        holder = new ViewHolder();
        holder.date = (TextView) row.findViewById(R.id.dateTextView);
        holder.time = (TextView) row.findViewById(R.id.timeTextView);
        holder.breachNo = (TextView)row.findViewById(R.id.breachNoTextView);
        holder.fee = (TextView) row.findViewById(R.id.feeTextView);
        holder.orderCheckBox =CheckBox)row.findViewById(R.id.orderCheckBox);
        row.setTag(holder);
    } else {
        holder = (ViewHolder) row.getTag();
    }

int evenRow = position % 2;
        if (evenRow == 0) {
            root_view.setBackgroundColor(context.getResources().getColor(
                    android.R.color.darker_gray));
        } else {
              root_view.setBackgroundColor(context.getResources().getColor(
                    android.R.color.blue)); 
```

}............

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T06:28:53.383

您可以使用

```
 @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View row = convertView;
        ViewHolder holder = null;

        if (row == null) {
            LayoutInflater inflater = ((Activity) context).getLayoutInflater();
            row = inflater.inflate(layoutResourceId, parent, false);

            holder = new ViewHolder();
            holder.root_view = (LinearLayout) row
            .findViewById(R.id.list_root_view);
            holder.date = (TextView) row.findViewById(R.id.dateTextView);
            holder.time = (TextView) row.findViewById(R.id.timeTextView);
            holder.breachNo = (TextView)row.findViewById(R.id.breachNoTextView);
            holder.fee = (TextView) row.findViewById(R.id.feeTextView);
            holder.orderCheckBox =CheckBox)row.findViewById(R.id.orderCheckBox);
            row.setTag(holder);
        } else {
            holder = (ViewHolder) row.getTag();
        }

        int evenRow = position % 2;
        historyData = arraylist.get(position);
        holder.date.setText(historyData.getDate() + "");
        holder.time.setText(historyData.getTime().toString());
        holder.breachNo.setText(historyData.getBreachNo() + "");
        holder.fee.setText(historyData.getFee() + "");
        holder.orderCheckBox.setEnabled(true);

        if (evenRow == 0) {
            holder.root_view.setBackgroundColor(context.getResources().getColor(
                        android.R.color.darker_gray));
            }
        else
            holder.root_view.setBackgroundColor(context.getResources().getColor(
                        android.R.color.blue));

        return row;
    } 
```

你也应该`LinearLayout`在`ViewHolder`课堂上添加你的

```
class ViewHolder{
        LinearLayout root_view;
        ...
        ...
        ...
    } 
```

# c# - 实体框架（.NET 完整框架）订购包括

> ID：15378136
> 
> 赞同：65
> 
> 时间：2013-03-13T06:02:16.530
> 
> 标签：c#, linq, entity-framework, entity-framework-5

我正在尝试使以下内容起作用：

```
_dbmsParentSections = FactoryTools.Factory.PdfSections
                        .Include(x => x.Children.OrderBy(y => y.Order).ToList())
                        .Include(x => x.Hint).Include(x => x.Fields)
                        .Where(x => x.FormId == FormId && x.Parent == null)
                        .OrderBy(o => o.Order)
                        .ToList(); 
```

导致异常的部分是：

```
.Include(x => x.Children.OrderBy(y => y.Order).ToList()) 
```

**编辑：**

经过进一步观察，

```
_dbmsParentSections.ForEach(x => x.Children = x.Children.OrderBy(y => y.Order).ToList()); 
```

为我完成了这项工作（在最初的`Factory`电话之后并且没有`Children.OrderBy`）。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-03-13T06:17:00.683

您似乎无法对查询中的子集合进行排序。在查询之后排序或在第二个查询中加载子项。

类似的问题和答案[在这里](https://stackoverflow.com/questions/9938956/entity-framework-loading-child-collection-with-sort-order)

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2021-04-07T23:17:16.733

根据[此](https://docs.microsoft.com/en-us/ef/core/querying/related-data/eager#filtered-include)文档，从 EF Core 5.0 开始，您可以按包含实体的属性进行排序：

```
 await context.Parents
    .OrderBy(parent => parent.Order)
    .Include(parent => parent.Children.OrderBy(child => child.Order))
    .ToListAsync(); 
```

上面的示例按其 Order 对父实体进行排序，并按子实体的 Order 属性对它们的子实体进行排序。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-03-13T15:17:20.327

扩展方法`Include`只是对[`DbQuery.Include`](http://msdn.microsoft.com/en-us/library/system.data.entity.infrastructure.dbquery.include%28v=vs.103%29.aspx). 在内部，它不*执行*表达式，而只是*解析*它们，即它获取它们的成员表达式并将它们转换为字符串形式的路径。该路径用作 的输入`DbQuery.Include`。

以前曾要求增强 的功能`Include`，例如通过包含`Where`子句来允许部分加载的集合。订购可能是另一个变更请求。但正如您所看到的，由于`Include`整个机制的内部工作将不得不重新设计以实现此类增强功能。[我在当前的路线图](http://entityframework.codeplex.com/wikipage?title=Roadmap)上没有看到它，所以可能需要一段时间......

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-01-24T13:39:58.703

根据用例，您可能不需要在单独的查询中加载或之后进行排序。

在我的情况下，我需要在视图中循环时订购它们，所以我只是在那里订购

```
@foreach (var subObject in Object.SubObjects.OrderBy(x=>x.Order)) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-11-12T00:10:56.720

我使用此代码订购包含，使用选择和函数来订购集合。不是最好的，但如果子集合很小，则可以正常工作

```
 // GET: api/Tareas
    [HttpGet]
    public IEnumerable<Tarea> GetTareas()
    {
        var result = _context.Tareas
            .Include(p => p.SubTareas)
            .Select(p => SortInclude(p));
        return result;
    }

    private Tarea SortInclude(Tarea p)
    {
        p.SubTareas = (p.SubTareas as HashSet<SubTarea>)?
            .OrderBy(s => s.Position)
            .ToHashSet<SubTarea>();
        return p;
    } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-13T06:18:34.620

这永远行不通。EF 包含尝试理解并将所有内容转换为 SQL，但您希望从中得到很多。加载所有实体而不进行排序和 .ToList()-ing，并为 IEnumerable 编写扩展方法以获得有序结果。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-05-09T21:48:50.470

通常，如果您使用一堆包含，那是因为您需要访问视图中的子属性。当我需要在视图中访问子集合时，我要做的是订购子集合。

例如，我可能会为主/明细表单构建一些包含语句。在最初的 EF 查询中排序是没有意义的。相反，当您实际访问它们时，为什么不在视图级别对这些子记录进行排序呢？

我可能有一个包含多个调查问题的调查。如果我想在将模型子集合传递给局部视图时在局部视图级别以特定顺序呈现问题。

```
@Html.Partial("_ResponsesPartial",Model.SurveyResponses.OrderBy(x => 
x.QuestionId)) 
```

* * *

## 回答 #8

> 赞同：-4
> 
> 时间：2016-05-10T08:41:14.223

您不应该将`IQueryable`类型转换为`IEnumerable`并调用`Include`，因为类型`Include`不支持`IEnumerable`。

简而言之，永远不要在之后调用 Include`ToList`

```
IQueryable = server side call (SQL)
IEnumerable = client side (loaded in memory) 
```

# python - 红黑树中的插入

> ID：15378138
> 
> 赞同：2
> 
> 时间：2013-03-13T06:02:18.370
> 
> 标签：python, data-structures, red-black-tree

我正在尝试按照 CLRS 教科书实现红黑树。TreeNode 类定义节点并具有定义节点的函数，确定节点是右节点还是左节点。BST 类用于树。当程序运行（按顺序打印）时，它进入一个无限循环，并且未检测到节点 self.nil。这使我怀疑问题出在“insertFix”方法中。我可能在那里搞砸了。

```
class TreeNode:
    def __init__(self,val,left = None,right = None, parent = None,color = None):
        self.val = val
        self.leftChild = left
        self.rightChild = right
        self.parent = parent
        self.color = color

    def hasLeftChild(self):
        return self.leftChild

    def hasRightChild(self):
        return self.rightChild

    def isLeftChild(self):
        return (self.parent and (self.parent.leftChild == self))

    def isRightChild(self):
        return (self.parent and (self.parent.rightChild == self))

class BST(TreeNode):
    def __init__(self):
        self.root = None
        self.size = 0
        self.nil = TreeNode(None)
        self.nil.color = "black"

    def addNode(self,val):
        self.size += 1
        y = self.nil
        x = self.root
        if self.root == None:
            self.root = TreeNode(val,self.nil,self.nil,self.nil,"black")
        else:
            z = TreeNode(val,self.nil,self.nil, None, "red")
            while x!=self.nil:
                y = x
                if z.val < x.val:
                    x = x.hasLeftChild()
                else:
                    x = x.hasRightChild()
            z.parent = y 
            if y == self.nil:
                self.root = z
            elif z.val < y.val:
                y.leftChild = z
            else:
                y.rightChild = z
            self.treeInsFixer(z)

    def treeInsFixer(self,z):
        while z.parent.color == "red":
            if z.parent == z.parent.parent.leftChild:
                y = z.parent.parent.rightChild
                if y.color == "red":
                    z.parent.color = "black"
                    y.color = "black"
                    z.parent.parent.color = "red"
                    z = z.parent.parent
                else:
                    if z == z.parent.rightChild:
                        z = z.parent
                        self.leftRotate(z)
                    z.parent.color = "black"
                    z.parent.parent.color = "red"
                    self.rightRotate(z.parent.parent)
            elif z.parent == z.parent.parent.rightChild:
                y = z.parent.parent.leftChild
                if y.color == "red":
                    z.parent.color = "black"
                    y.color = "black"
                    z.parent.parent.color = "red"
                    z = z.parent.parent
                else:
                    if z == z.parent.leftChild:
                        z = z.parent
                        self.rightRotate(z)
                    z.parent.color = "black"
                    z.parent.parent.color = "red"
                    self.leftRotate(z.parent.parent)
        self.root.color = "black"               

    def leftRotate(self,x):
        y = x.rightChild
        x.rightChild = y.leftChild
        if y.leftChild != self.nil:
            y.leftChild.parent = x
        y.parent = x.parent
        if x.parent == self.nil:
            self.root = y
        elif x == x.isLeftChild():
            x.parent.leftChild = y
        else:
            x.parent.rightChild = y
        y.leftChild = x
        x.parent = y

    def rightRotate(self,x): 
        y = x.leftChild
        x.leftChild = y.rightChild
        if y.rightChild != self.nil:
            y.rightChild.parent = x
        y.parent = x.parent
        if x.parent == self.nil:
            self.root = y 
        elif x == x.isRightChild():
            x.parent.rightChild = y
        else:
            x.parent.leftChild = y
        y.rightChild = x 
        x.parent = y

    def inOrder(self,x):
        if(x!=self.nil):
            self.inOrder(x.leftChild)
            print(x.val, x.color)
            self.inOrder(x.rightChild)

a = BST()
a.addNode(5)
a.addNode(7)
a.addNode(4)
a.addNode(14)
a.addNode(6)
a.addNode(11)
a.addNode(9)
a.addNode(17)
a.addNode(2)
a.addNode(10)
a.addNode(8)
a.inOrder(a.root) 
```

我知道这是要处理的大量代码，但我完全不顾一切地试图找出问题所在。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-29T13:15:57.180

问题在这里：

```
def inOrder(self,x):
    if(x!=self.nil):
        self.inOrder(x.leftChild)
        print(x.val, x.color)
        self.inOrder(x.rightChild) 
```

它总是`True`。因为 Python 通过比较对象的 id 来做到这一点，直到您覆盖`__eq__` `__cmp__` `__ne__`以比较 Node 的值。

*   [好文章](http://push.cx/2006/equality-for-python)
*   [文档](http://docs.python.org/2/reference/expressions.html#comparisons)

# magento - Magento Magic __set() 方法表现怪异

> ID：15378141
> 
> 赞同：1
> 
> 时间：2013-03-13T06:02:31.200
> 
> 标签：magento

Magento 设置功能不适用于除 faq_question、faq_answer 之外的任何其他列。主键只是继续增加，但数据没有插入到列中。

不管我给列名起什么名字，但它只是继续显示为空。奇怪的是，如果我手动填充该文件并使用它，`getFaqJugaad()`那么它就可以工作。我可以从数据库中获取值。但没有设置请帮忙。谢谢

配置文件

```
 <?xml version="1.0" encoding="UTF-8"?>

<config>
    <modules>
        <Gagan_Faq>
            <version>0.2.0</version>
        </Gagan_Faq>
    </modules>

<frontend>
    <routers>
        <faq>
            <use>standard</use>
            <args>
                <module>Gagan_Faq</module>
                <frontName>faq</frontName>
            </args>
        </faq>
    </routers>
   <layout>
        <updates>
            <faq>
                <file>gaganfaq.xml</file>
            </faq>
        </updates>
    </layout>
</frontend>

<global>
    <blocks>
        <faq>
            <class>Gagan_Faq_Block</class>
        </faq>
    </blocks>
    <helpers>
        <faq>
            <class>Gagan_Faq_Helper</class>
        </faq>
    </helpers>
    <models>
        <faq>
            <class>Gagan_Faq_Model</class>
            <resourceModel>faq_mysql4</resourceModel>
        </faq>
        <faq_mysql4>
            <class>Gagan_Faq_Model_Mysql4</class>
            <entities>
                <dinkchika>
                    <table>gagan_faq</table>
                </dinkchika>
                <dinkchika02>
                    <table>gagan_faq_creation</table>
                </dinkchika02>
            </entities>
        </faq_mysql4>
    </models>

   <resources>
        <faq_setup>
            <setup>
                <module>Gagan_Faq</module>
            </setup>
            <connection>
                <use>core_setup</use>
            </connection>
        </faq_setup>
        <faq_write>
            <connection>
                <use>core_write</use>
            </connection>
        </faq_write>
        <faq_read>
            <connection>
                <use>core_read</use>
            </connection>
        </faq_read>
    </resources>        
</global> 
```

这是我的安装脚本

```
<?php

$installer = $this;
$installer->startSetup();
$installer->run("

CREATE TABLE IF NOT EXISTS {$this->getTable('faq/dinkchika')} (
  `faq_id` int(11) NOT NULL AUTO_INCREMENT,
  `faq_question` varchar(255) DEFAULT NULL,
  `faq_answer` varchar(255) DEFAULT NULL,
  `faq_jugaad` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`faq_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

");

$installer->endSetup(); 
```

索引控制器

```
<?php

class Gagan_Faq_IndexController extends Mage_Core_Controller_Front_Action
{
    public function indexAction()
    {
        $this->loadLayout();
        $mod = Mage::getModel('faq/faq');
        $mod->setFaqQuestion('how are 5454you?');
        $mod->setFaqAnswer('gooddsfsfsdfsfdffsd?');
        $mod->setFaqJugaad('sfsfdsfsfsdfsfdffsd?');
        $mod->save();

        $this->renderLayout();
    }
} 
```

数据库表

![在此处输入图像描述](../Images/06d50b471b72363ef5d2c723b17034b1.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T11:23:13.370

如果 Magento 模型在运行 SQL 设置脚本后似乎无法正常工作，例如模型没有将值保存到 SQL 脚本明确添加的字段中，那么您很可能被 Magento 的[DDL](http://en.wikipedia.org/wiki/Data_Definition_Language)缓存所困。

除了其他东西（如`CREATE`,`INDEX`和`FOREIGN KEY`语句），Magento 还缓存耗时`DESCRIBE table`语句的结果。然后 Magento 模型使用这些缓存的结果（例如保存时）以获得更好的性能。

现在，如果由于某种原因您的系统在运行更改表方案 () 的 SQL 脚本后未能更新此 DDL 缓存`ALTER, ADD, DROP`，您的模型仍将使用旧缓存，不知道有任何更改。

不幸的是，Magento 管理后端中*没有*一个清除缓存按钮/链接允许您按需清除 DDL 缓存。既不明确也不含蓄（至少afaik，如果我错了，请纠正我）。

### 清除 DDL 缓存

要清除 DDL 缓存，您可以使用瑞士军刀方法并简单地手动删除您的`var/cache/*`文件夹。请注意，这将清除*所有*现有的 Magento 缓存，而不仅仅是 DDL 缓存。

或者您可以调用`Varien_Db_Adapter_Pdo_Mysql::resetDdlCache()`它的许多衍生物之一，例如`Mage_Core_Model_Resource_Setup::getConnection()->resetDdlCache()`.

该`resetDdlCache()`方法允许您为单个表或一次为所有表重置 DDL 缓存。但请注意，这取决于`_isDdlCacheAllowed`属性的当前状态，是否会处理重置。

# linux - 关于将数据复制到/从 Linux 内核中的问题

> ID：15378142
> 
> 赞同：2
> 
> 时间：2013-03-13T06:02:31.857
> 
> 标签：linux, linux-kernel, operating-system, kernel

我正在完成 OS 类的项目，无法弄清楚与安全地将数据从用户空间复制到内核并从内核复制回用户空间有关的几件事，以及如何正确丢弃这些信息。

假设我有几个系统调用：

```
//copies data into kernel space
long sys_into(void __user *data, long length);
// copies data into user space
long sys_from(void __user *data, long length); 
```

在这两种情况下`long length`都是要复制的字节数。

到目前为止我能够弄清楚的事情：
1\. 验证指针`*data`不是`null`.
2\. 验证`length < 0`
3\. 我需要使用`access_ok`. 但是，我不确定是否需要将它用于这两个函数或仅用于`long sys_into()`
3。当使用 kmalloc(length) 复制到内核时分配字节数并确保我可以实际分配此内存。
4\. 最后使用`copy_from_user`&`copy_to_user`复制数据。

到目前为止，我发现的信息很少。1.[来自“Linux内核编程”的源代码示例](https://stackoverflow.com/questions/6515227/source-code-example-from-linux-kernel-programming)（正如所指出的，*Linux内核开发*中的示例是危险的）。2\. [http://www.quora.com/Linux-Kernel/How-does-copy_to_user-work](http://www.quora.com/Linux-Kernel/How-does-copy_to_user-work)

谢谢 ！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T06:42:31.420

我认为您的考虑是正确的，我提供了一些代码如下：

```
#define MAXIMUM_LENGTH 128
char kaddr[MAXIMUM_LENGTH];

int sys_into(void __user *uaddr, int len)
{
    if (len < 0 || len > MAXIMUM_LENGTH)
        return -EINVAL;
    if (len == 0)
        return 0;

    if (copy_from_user(kaddr, uaddr, len))
        return -EFAULT;

    /* handling */

    return len;
}

int sys_from(void __user *uaddr, int len)
{
    if (len > MAXIMUM_LENGTH)
        len = MAXIMUM_LENGTH;

    if (len < 0 || len > MAXIMUM_LENGTH)
        return -EINVAL;
    if (len) {
        if (copy_to_user(uaddr, kaddr, len))
            return -EFAULT;
}

    return len;
} 
```

其他考虑： (1)如果副本大小可能真的很大并且变化很大，您应该考虑使用 get_user()/put_user() 检查，这意味着您必须将 sys_from() 参数表更改为 int sys_from(void __user * uaddr, int __user *ulen)，代码将更改为：

```
int sys_from(void __user *uaddr, int __user *ulen)
{
    int err;
    int len;

    err = get_user(len, ulen);
    if (err)
        return err;
    if (len > MAXIMUM_LENGTH)
        len = MAXIMUM_LENGTH;
    if (len < 0 || len > MAXIMUM_LENGTH)
        return -EINVAL;
    if (len) {
        if (copy_to_user(uaddr, kaddr, len))
            return -EFAULT;
}

    return __put_user(len, ulen);
} 
```

(2) 如果可能，最好不要频繁动态地进行 kmalloc/kfree 缓冲。虽然最好在初始化期间使用一个足够大的内核缓冲区 kmalloc。

# android - 为什么要使用额外的布局文件来呈现 ListView？

> ID：15378150
> 
> 赞同：-1
> 
> 时间：2013-03-13T06:03:08.130
> 
> 标签：android, android-listview

我是 android 技术和通过网络教程学习的新手。在绑定列表视图时，我很困惑为什么我们创建一个单独的布局文件并在 arrayadapter 中调用该布局文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T06:06:45.817

为列表视图的每一行创建单独的 xml。listview 需要显示项目，因此应该使用诸如 textview、imageview 之类的视图来显示......所以根据需要，您需要该布局。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T06:10:28.150

下面显示的代码来源：[http ://www.vogella.com/articles/AndroidListView/article.html](http://www.vogella.com/articles/AndroidListView/article.html)

当你创建一个简单的`ListView`，你会使用这样的东西：

XML:

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ListView
        android:id="@+id/mylist"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
    </ListView>

</LinearLayout> 
```

爪哇：

```
ListView listView = (ListView) findViewById(R.id.mylist);
String[] values = new String[] { "Android", "iPhone", "WindowsMobile",
        "Blackberry", "WebOS", "Ubuntu", "Windows7", "Max OS X",
        "Linux", "OS/2" };

// Define a new Adapter
// First parameter - Context
// Second parameter - Layout for the row
// Third parameter - ID of the TextView to which the data is written
// Forth - the Array of data

ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
        android.R.layout.simple_list_item_1, android.R.id.text1, values);

// Assign adapter to ListView
listView.setAdapter(adapter); 
```

创建 custom`ListView`时，您通常会执行以下操作：

```
package de.vogella.android.listactivity;

import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.ImageView;
import android.widget.TextView;

public class MySimpleArrayAdapter extends ArrayAdapter<String> {
    private final Context context;
    private final String[] values;

    public MySimpleArrayAdapter(Context context, String[] values) {
        super(context, R.layout.rowlayout, values);
        this.context = context;
        this.values = values;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        LayoutInflater inflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View rowView = inflater.inflate(R.layout.rowlayout, parent, false);
        TextView textView = (TextView) rowView.findViewById(R.id.label);
        ImageView imageView = (ImageView) rowView.findViewById(R.id.icon);
        textView.setText(values[position]);
        // Change the icon for Windows and iPhone
        String s = values[position];
        if (s.startsWith("iPhone")) {
            imageView.setImageResource(R.drawable.no);
        } else {
            imageView.setImageResource(R.drawable.ok);
        }
        return rowView;
    }
} 
```

在此示例中，如果您查看以下行： `View rowView = inflater.inflate(R.layout.rowlayout, parent, false);`，这`R.layout.rowlayout`是您的自定义布局，用于显示您的自定义`ListView`。

有关`ListView's`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T06:11:51.940

您不必创建单独的布局。您可以在运行时创建布局。

# c# - MVC中的复杂结构多视图

> ID：15378152
> 
> 赞同：0
> 
> 时间：2013-03-13T06:03:33.977
> 
> 标签：c#, asp.net-mvc, razor

我即将在 mvc 中设计一个非常大的页面。下面是结构。

```
Tab1
>> Sub tab1
>> Sub tab2
>> Sub tab3
>> Sub tab4
Tab2
Tab3
>> Sub tab1
Tab4 
```

单个保存按钮。那么在上述情况下哪种方法是最好的方法？我可以使用部分或渲染部分吗？我还需要在上面显示填充数据的页面。每次选项卡单击都应加载子选项卡视图和信息？我对结构有点困惑。

# javascript - 为您的网站异步加载 Google 翻译小部件的方法？

> ID：15378154
> 
> 赞同：8
> 
> 时间：2013-03-13T06:03:53.123
> 
> 标签：javascript, asynchronous, google-translate

有没有办法为您的网站异步加载谷歌翻译小部件？

我尝试将其放在页面底部，但 #google_translate_element 容器仍然是空的。

```
<!-- Asynchronous Google Translate -->
<script type="text/javascript">
function googleTranslateElementInit() {
  new google.translate.TranslateElement({pageLanguage: 'en', includedLanguages: 'ar,bg,bn,de,el,eo,es,en,fr,hi,id,it,iw,ja,ko,pl,pt,ru,th,tr,vi,zh-CN', layout: google.translate.TranslateElement.InlineLayout.SIMPLE, gaTrack: true, gaId: 'UA-1234-1'}, 'google_translate_element');
}

(function() {
  var googleTranslateScript = document.createElement('script');
  googleTranslateScript.type = 'text/javascript';
  googleTranslateScript.async = true;
  googleTranslateScript.src = '//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit';
  ( document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0] ).appendChild( googleTranslateScript );
})();
</script> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T08:00:29.320

您的代码似乎有几个问题。但你的基本想法是合理的。

假设`<div id="google_translate_element"></div>`在 script 标签之前定义，以下应该工作：

```
<!-- Asynchronous Google Translate -->
<script type="text/javascript">
  function googleTranslateElementInit() {
    new google.translate.TranslateElement({pageLanguage: 'en',
      includedLanguages: 'ar,bg,bn,de,el,eo,es,en,fr,hi,id,it,iw,ja,ko,pl,pt,ru,th,tr,vi,zh-CN',
      layout: google.translate.TranslateElement.InlineLayout.SIMPLE,
      gaTrack: true, gaId: 'UA-37652767-1'}, 'google_translate_element');
  }

  var googleTranslateScript = document.createElement('script');
  googleTranslateScript.type = 'text/javascript';
  googleTranslateScript.async = true;
  googleTranslateScript.src = 'http://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit';
  ( document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0] ).appendChild(googleTranslateScript);
</script> 
```

至少当我将它全部放在 HTML 文件中并加载到 chrome 中时，它对我有用。

当然，可以将`var`声明和后面的行放在`$(document).ready`函数中（或者如果您不使用 jQuery，则以其他方式）。那么 和 之间的顺序`div`将`script`不再重要。

# angularjs - 双向绑定不起作用，需要调用 $apply 才能使其起作用

> ID：15378155
> 
> 赞同：1
> 
> 时间：2013-03-13T06:03:54.907
> 
> 标签：angularjs

环境：

在 Angular1.0.5、1.1.2 中尝试过

问题：

我的双向绑定不会立即更新我的视图，我必须在 $scope.is_pic 设置器之后调用 $scope.$apply 才能看到它反映在浏览器中。

[http://jsfiddle.net/rV4LW/2/](http://jsfiddle.net/rV4LW/2/)

上传一张图片，看到文件输入反映了文件名。在上面的文本框中输入，然后调用 ng-model 上的 $digest，神奇地浏览器现在更新为控制器中的内容。

如果您将“if”语句更新为：

```
if (e.target.result.indexOf('data:image') !== -1) {
        $scope.apc.is_pic = true;
      return $scope.$apply();
    } else {
        $scope.apc.is_pic = false;
      return $scope.$apply();
    } 
```

你会发现它突然起作用了。为什么这对我来说失败了？

注意：javascript 是由 coffeescript 生成的，这就是它看起来很棒的原因。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T07:19:50.740

这是因为模型更新是在回调中完成的，即不在 Angular 上下文中。双向绑定仅在 Angular 内部更新模型变量时才有效，否则您应该显式调用 $apply 方法。

# android - Android 支持 lib v4 或 v13

> ID：15378158
> 
> 赞同：24
> 
> 时间：2013-03-13T06:04:46.830
> 
> 标签：android, android-support-library

我已经使用 API 13 和 min-sdk 以及 API 13 开发了一个 Android 应用程序构建。我想合并跨选项卡的滑动，为此我使用[v4 支持库](http://developer.android.com/tools/extras/support-library.html)。

我有以下问题，

1.  我应该使用 v4 还是 v13 哪个支持库？
2.  我应该将目标更改为 API 14 吗？更重要的是我如何决定，哪个应该是我的目标 API 来编译？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-13T07:45:01.423

对于问题 1：正如@StinePike 所说，根据您使用的最低限度，如果您的 min sdk >=13，您应该使用 v4 的 min-sdk = 4-12 可以使用 v13。
**更新**正如弗兰克在评论中所述，所有支持库的 minsdk 修订版 26.0.0 及以上版本为 API 级别 14。请参阅[https://developer.android.com/topic/libraries/support-library/index.html# api 版本](https://developer.android.com/topic/libraries/support-library/index.html#api-versions)以获取更多详细信息。

对于问题2：最佳目标取决于您打算做什么，如果您想提供一些在更高sdk级别中引入的功能，您必须使用更高的target-sdk，但请确保您检查android版本不是在具有较旧 android 版本的设备上使用更高 sdk 版本中引入的 android api

```
if(Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
    // safe to use api 11 / Android 3.0 stuf
} else {
    // only use api level <= 10 stuff
} 
```

对于 min-sdk 也是一样的。如果你需要 api 级别 >= 10 的东西，你必须使用 min-sdk 10

~~*我的意见：不要使用 api 级别 < 10，它不值得... 10 可以达到 90% 的 android 设备*~~
*我的意见（截至 2016 年 4 月）：不要使用 api 级别 < 16，它不值得它...使用 16 台，您可以覆盖约 95% 的 Android 设备*

用于检查 android OS 版本检查的分布：[https ://developer.android.com/about/dashboards/index.html](https://developer.android.com/about/dashboards/index.html)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-13T06:08:45.737

从[开发者网站](http://developer.android.com/tools/extras/support-library.html)你可以找到

> 注意：支持包包含多个支持库。每个都有不同的最低 API 级别。例如，一个库需要 API 级别 4 或更高级别，而另一个库需要 API 级别 13 或更高级别（v13 是 v4 的超集，并包含额外的支持类以使用 v13 API）。最低版本由目录名称表示，例如 v4/ 和 v13/。

我认为这清楚地回答了你的问题。如果您想支持较低的操作系统版本（4 或更高版本）并且 v4 库 api 满足您的目标，请使用它，否则使用 v13

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-24T12:01:25.860

由于 android 2.3.3 - 2.3.7 现在在[martet](https://developer.android.com/about/dashboards/index.html#Platform)中占 23.6% ，我建议为这些设备设置 minSdk = 10，尤其是 google 为开发人员提供了一个很好的解决方案，通过使用支持 v4 和 v7 可以更好地练习。

对于您的问题，我发布[的详细答案可能会有所帮助。](https://stackoverflow.com/a/20173951/1251276)

# perl - 在 Perl 中执行后将数据从子级传递给父级

> ID：15378161
> 
> 赞同：6
> 
> 时间：2013-03-13T06:04:53.700
> 
> 标签：perl, ipc

我想`child.pl`在另一个 perl 程序中调用一个 perl 程序`parent.pl`，并希望从 to 传递数据`child.pl`并`parent.pl`打印这些数据`parent.pl`。 `system("perl child.pl")`可能不起作用，因为 parent.pl 在`child.pl`完成之前不会做任何事情。我阅读[了 perlipc 的在线文档](http://perldoc.perl.org/perlipc.html)，它似乎`pipe()`并且`fork()`可以满足我的一些需求，但是我没有找到一种方法将数据从子进程传递到父进程之后`exec`。这是代码`parent.pl`：

```
#!/usr/bin/perl -w

pipe(FROM_CHILD, TO_PARENT);  

$pid = fork();  

if ($pid == 0) {  
    # We're in the child process.  
    close(FROM_CHILD);  
    # Send data to parent.  
    print TO_PARENT "Hello, parent\n"; #  I can pass data to parent before exec
    exec("perl child.pl");             #  But how what should I do after exec, in child.pl?
    exit(0);  # Terminate child.  
} 
elsif (undef $pid) {  
    print "Not defined: means an error.";  
} 
else {  
    # Parent process.  
    close(TO_PARENT);  
    $data = <FROM_CHILD>;  
    print "From child: $data\n";  
    $id = wait();  
    print "Child $id is dead.\n"; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T06:47:37.687

这可能会有所帮助：

```
#!/usr/bin/perl
open (my $child, "-|","./child.pl") or die("$!");
while (<$child>) {
  print "P: $_";
}
close($child); 
```

打开函数，[来自 perldoc](http://perldoc.perl.org/functions/open.html)：

> 对于三个或更多参数，如果 MODE 是 |- ，则文件名被解释为输出要通过管道传输的命令，**如果 MODE 是 -|** ，文件名被解释为通过管道输出给我们的命令。

如果您不想触摸标准输出，那么您需要孩子的合作，然后您可以使用命名管道：

**父.pl**

```
#!/usr/bin/perl
use strict;
use warnings;
use Fcntl;
use POSIX;
my $fpath = '.named.pipe';

mkfifo($fpath, 0666) or die "mknod $!";
system("perl child.pl &");
sysopen(my $fifo, $fpath, O_RDONLY) or die "sysopen: $!";

while (<$fifo>) {
  print "P: $_";
}
close($fifo);
unlink($fifo); 
```

**孩子.pl**

```
#!/usr/bin/perl
use strict;
use warnings;
use Fcntl;
use POSIX;

my $fpath = '.named.pipe';
sysopen(my $fifo, $fpath, O_WRONLY) or die "sysopen: $!";
print "screen hello\n";
print $fifo "parent hello\n";
close($fifo); 
```

# asp.net - Hidden Field 不能跨 prostback 保持价值？

> ID：15378165
> 
> 赞同：0
> 
> 时间：2013-03-13T06:05:16.363
> 
> 标签：asp.net, jquery-ui-tabs, hidden-field

我正在使用`jquery ui` `tabs`。在使用选项卡时，我遇到了一个场景，在回发过程中，选项卡不会维护所选索引。我搜索它并找到了解决方案。我的问题是隐藏字段中的值在回发期间设置为 null因此，在回发期间无法维护选定的索引`jquery ui` `tabs`。

我该如何解决这个问题？

这是我的代码

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script type="text/javascript" src="http://code.jquery.com/ui/1.10.1/jquery-ui.js">

<script type="text/javascript"> 
    $(function(){        

    //maintaining selected tab during postback    
        var selectedIndex=$("#<%=hFieldTabIndex.ClientID %>").val();
        alert(selectedIndex)//here value is always set to null
        if(selectedIndex==""){
            $("#tabs").tabs({active:0});
        }
        else{
             $("#tabs").tabs({active:1});
        }

    //Change the text of the button on tab change    
        $("#tabs").on("tabsactivate",function(){
           var index=$("#tabs").tabs("option","active");
           $("#<%=hFieldTabIndex.ClientID %>").val(index);//setting the hiddenfield value
           alert($("#<%=hFieldTabIndex.ClientID %>").val());//showing currect tab index
           if(index=="0"){
                $("#btnNext").attr('value','Next>>')
            }
           else{
                $("#btnNext").attr('value','<<Prev')
            }
        }) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T06:19:10.747

您可以使用以下代码

```
<script type="text/javascript" language="javascript">
$(function() {
    $("#example").tabs({
        show: function() {
            var sel = $('#example').tabs('option', 'selected');
            $("#<%= hidLastTab.ClientID %>").val(sel);
        },
        selected: <%= hidLastTab.Value %>
    });
}); 
```

如果它不起作用，则尝试使用脚本全局变量，例如`var tabNo=0;`设置和获取与隐藏字段相同的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T08:25:06.110

终于得到了解决方案，我在页面加载中编写了一些代码来存储 hiddenfield 的值。

```
protected void Page_Load(object sender, EventArgs e)
{
    hFieldTabIndex.Value = Request.Form[hFieldTabIndex.UniqueID];
} 
```

# c++ - 如果我单击 exe，使我的 cpp 应用程序不打开 cmd 提示符

> ID：15378171
> 
> 赞同：0
> 
> 时间：2013-03-13T06:05:34.277
> 
> 标签：c++, c, netbeans, mingw

我有一个简单的 c++ 应用程序，它是在 Windows 环境中使用“mingw”和 Netbeans 开发的。当我单击“exe”时，我的应用程序窗口中会出现一个命令提示符。我不想要这个“命令提示符窗口”。如何限制此窗口并仅打开我的应用程序窗口。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T06:21:02.757

从 mingw 常见问题解答（[http://www.mingw.org/wiki/FAQ](http://www.mingw.org/wiki/FAQ)）：

> 如何删除 DOS 命令窗口？
> 
> 在链接步骤中，将“-mwindows”开关添加到命令行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T06:21:23.537

Windows 应用程序可以使用`CONSOLE`子系统或`WINDOWS`子系统。

`WINDOWS`子系统用于 GUI 应用程序。它要求你有`WinMain()`作为入口点。在 MinGW 中，您可以使用`-mwindows`编译器命令行参数启用 Windows 子系统。

`CONSOLE`子系统用于命令行控制台应用程序。它要求您有`main()`（或`wmain()`）作为入口点。但是，您可以通过调用快速释放控制台`FreeConsole()`。您的应用程序仍会很快闪烁，但应用程序似乎没有任何控制台，您实际上可以创建正常的窗口和小部件。这可用于创建可在命令行或 GUI 模式下运行的双模式应用程序。

# javascript - 如何从表格中获取所有数据（包括文本框）？

> ID：15378176
> 
> 赞同：0
> 
> 时间：2013-03-13T06:06:02.373
> 
> 标签：javascript, html, web, dhtml, w3c

我想缓存一个包含多个文本框的动态表，用户可以在其中输入一些值。关键是：缓存的数据应该包含用户输入的内容。

我可以通过尝试为每个文本框一一获取表行和 getElementById 以提取其中的值来实现这一点。

但我觉得这是一个艰难的方式，有点愚蠢。

然后我试图通过获取表对象来获取数据，它是innerHTML。它几乎可以工作，但问题是：文本框值是默认值，而不是用户输入的值。

例如：

```
<table>
  <tr>
    <td>
      <input type="textbox" value="defaultValue">
    </td>
  <tr>
  <tr>
    <td>
      <input type="textbox" value="defaultValue">
    </td>
  </tr>
  <tr>
    <td>
      some info 
    </td>
  </tr>
  <tr>
    <td>
       <input type="textbox" value="defaultValue">
    </td>
  </tr>
</table> 
```

和用户在第一个文本框中键入 111 在第二个文本框中键入 222 在第三个文本框中键入 333

我认为我的聪明计划（innerHTML）只会得到令我失望的 defaultValue。

有人对此有线索吗？或任何更好的解决方案来获取整个数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T07:33:58.417

您可以对每个函数使用 jquery 来遍历每个输入字段并使用它们做您喜欢的事情。您可以使用 jquery 选择器来获取内部 html、值或任何您喜欢的内容，并将其存储在数组中。例如：

jQuery

```
function formHandler(){

$('input').each(function() {
  //do stuff here for each input, increment an array, store data at that index, etc...
  var innerHTML = $(this).html(),
      value = $(this).val();
}

}//end formHandler funciton 
```

然后只需在需要时调用该函数，或在页面加载时运行它......

# html - Div bg 与 Body bg 不匹配

> ID：15378177
> 
> 赞同：0
> 
> 时间：2013-03-13T06:06:12.027
> 
> 标签：html, css

我有一个网站，通过加入 body 标签的 bg 和 div 标签的 bgs 来完成布局。但是，根据您使用的浏览器和操作系统，由于滚动条，它们似乎无法准确匹配。（我已经通过添加 overflow:hidden; 到 body 元素进行测试，一切都完美匹配）

有没有办法解决这个问题？

差距是如此之小：

![](../Images/628ecf94720e1dc2e8f6e974a2165c11.png)

```
<body>
<div id="content">
<div id="contentL>
...
</div>
<div id="contentR">
...
</div>
<div style="clear:both;"></div>
</div>
</body>

body{ background:url('bg.jpg') top center no-repeat #000; }
#content{ width:980px; margin:0 auto; }
#contentL{ width:220px; padding:20px; float:left; background:url('left.jpg'); }
#contentR{ width:680px; padding:20px; float:right; background:url('right.jpg'); } 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T08:14:12.700

我认为您的意思是您在`div`使用 IE 时在两个内部内容之间存在差距。如果是这样，这是由于 IE 和其他浏览器之间的盒子模型不同 - IE 将您的填充包含在宽度内，而其他浏览器将其添加到宽度的外部。

所以你的解决方法是删除填充。`div`但也许您仍然希望在这些s的内容之间进行一些分离。为此，您可以在内容 L 和 R 中添加另一个 div `div`，然后在它们上添加填充 - 不要在这些内部`div`s 上放置特定宽度，因为那样您会遇到同样的问题，但只需确保它们是显示块，就是这样它们将在所有浏览器的宽度内填充可用宽度。

我就是这样做的，但可能有更好的方法，包括特定样式表和盒子模型破解——只需谷歌就可以获取盒子模型和处理 IE 的信息。

# apache-flex - flash builder，如何释放声音和图像对象？

> ID：15378181
> 
> 赞同：0
> 
> 时间：2013-03-13T06:06:25.160
> 
> 标签：apache-flex, mobile, flash-builder

在“abc.mxml”中，我创建了如下所示的图像和声音对象，并动态分配了真实数据。

```
<s:Image id="imgGoodJob" horizontalCenter="0" verticalCenter="0" 
         scaleMode="stretch" visible="false" click="onGoodJobClicked()" />
<mm:Sound2 id="sndEndingBgm" /> 
```

我使用下面的代码在“onDeActive（）”函数中将其释放到内存中

```
imgGoodJob = null;
sndEndingBgm = null;
flash.system.System.gc(); 
```

但是，当我在分析中观察内存使用情况时，该内存并没有被释放！我不知道发生了什么.. 是否有另一种正确的方法来释放内存上的对象？

请让我知道！

*   此外，在分析“Vector.<*>”时，内存使用量几乎占一半。我怎样才能释放这个对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:25:29.367

自答。

在设置为“null”并调用 gc(); 之前，有一些已播放且未停止的动画；

停止所有动画后 gc() 效果很好:)

# unix - 从本地机器到unix的文件传输

> ID：15378184
> 
> 赞同：0
> 
> 时间：2013-03-13T06:06:34.070
> 
> 标签：unix, web-deployment, file-transfer

有没有办法通过使用来自 unix 服务器内的命令（而不是来自 windows 命令提示符）将本地机器（Windows 操作系统）中的文件传输到 unix 服务器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T09:35:40.887

你可以在windows上使用ssh，只需安装一个软件--putty。或者你也可以在winscp目录下进行传输。注意：unix 服务器必须已经安装了 ssh。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T10:52:41.840

您可以下载 Filezilla 将文件从 Windows 传输到 Unix 服务器。

[http://filezilla-project.org/download.php](http://filezilla-project.org/download.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T16:13:56.037

从unix服务器内部？然后您需要在 Windows 上启用共享，无论是 SMB（最简单，但您需要在 unix 服务器上使用 samba 或 smbfs）、FTP 或其他。

# linux - 从 ArcGIS 地图发出系统命令

> ID：15378188
> 
> 赞同：0
> 
> 时间：2013-03-13T06:07:09.733
> 
> 标签：linux, shell, arcgis

我有一个托管在 linux 机器上的基于 ArcGIS Javascript API 的地图。地图有许多弹出窗口，每个弹出窗口又都有一个按钮。是否可以通过单击弹出窗口中的按钮来运行 shell 脚本或系统命令？谢谢！

编辑：添加了代码片段！

```
 function pageReady() {
            var popup = new esri.dijit.Popup({
              fillSymbol: new esri.symbol.SimpleFillSymbol(esri.symbol.SimpleFillSymbol.STYLE_SOLID, new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID, new dojo.Color([255,0,0]), 2), new dojo.Color([255,255,0,0.25]))
            }, dojo.create("div"));

            var initExtent = new esri.geometry.Extent({"xmin":-13626637,"ymin":4550020,"xmax":-13624728,"ymax":4551042,"spatialReference":{"wkid":102100}});
            map = new esri.Map("map",{
              infoWindow:popup,
              outFields: ["*"]
            });

            dojo.addClass(map.infoWindow.domNode, "myTheme");

            dojo.connect(map,"onClick",function(evt){
              var query = new esri.tasks.Query();
              query.geometry = pointToExtent(map,evt.mapPoint,10);

              var deferred = featureLayer.selectFeatures(query,esri.layers.FeatureLayer.SELECTION_NEW);

               map.infoWindow.setFeatures([deferred]);
               map.infoWindow.show(evt.mapPoint);

            });

            var basemap = new esri.layers.ArcGISTiledMapServiceLayer("http://server.arcgisonline.com/ArcGIS/rest/services/ESRI_Imagery_World_2D/MapServer");
            map.addLayer(basemap); 
```

内存

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T16:17:50.037

我使用了网络套接字并解决了这个问题。感谢大家的投入！

# iphone - 将故事板中的手势添加到单元格

> ID：15378189
> 
> 赞同：0
> 
> 时间：2013-03-13T06:07:11.453
> 
> 标签：iphone, ios, objective-c, uigesturerecognizer

我已经在情节提要中初始化了一个 longPressGesture，我想将它添加到`collectionView`.

**问题是**：手势仅适用于最后添加的单元格`collectionView`

这是我的代码：

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath
{
     MyCollectionCell *cell = (MyCollectionCell*)[collectionView dequeueReusableCellWithReuseIdentifier:@"MyCell" forIndexPath:indexPath];
    [cell addGestureRecognizer:longPressGesture];
    return cell;
} 
```

.h 文件：

```
IBOutlet UILongPressGestureRecognizer *longPressGesture; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T13:20:39.350

如果您的手势目标方法对所有单元格执行相同的操作，则`UILongPressGesture`每次都创建新并将其分配给单元`UICollectionView`格

```
-(UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath {

     MyCollectionCell *cell = (MyCollectionCell*)[collectionView dequeueReusableCellWithReuseIdentifier:@"MyCell" forIndexPath:indexPath];

     UILongPressGestureRecognizer *longPressGesture = [[UILongPressGestureRecognizer alloc] 
                                          initWithTarget:self action:@selector(handleGesture:)];
     longPressGesture.minimumPressDuration = 1.5; 

    [showUserMap addGestureRecognizer:lpgr];

    [cell addGestureRecognizer:longPressGesture];
    return cell;
} 
```

# java - Codes for Arrow Keys

> ID：15378193
> 
> 赞同：-2
> 
> 时间：2013-03-13T06:07:34.027
> 
> 标签：java

In a java program I've added keylistener and I want to check if anyone has pressed the arrow keys or not.Can anyone please help me since I dont know any ascii codes for arrow keys? If possible please give a sample program also.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T06:08:41.013

`KeyEvent.VK_UP` `KeyEvent.VK_DOWN` `KeyEvent.VK_LEFT` `KeyEvent.VK_RIGHT`

These are the conditions that you test `e.getKeyCode()` for.

```
public void keyPressed(KeyEvent e) {
    int key = e.getKeyCode();
    switch( key ) { 
        case KeyEvent.VK_UP:
            // up 
            break;
        case KeyEvent.VK_DOWN:
            // down 
            break;
        case KeyEvent.VK_LEFT:
            // left
            break;
        case KeyEvent.VK_RIGHT :
            // right
            break;
     }
} 
```

EDIT: I just see now a duplicate of this question here [How to check if the key pressed was an arrow key in Java KeyListener?](https://stackoverflow.com/questions/616924/how-to-check-if-the-key-pressed-was-an-arrow-key-in-java-keylistener)

# php - ajax加载后如何检查div是否为空

> ID：15378197
> 
> 赞同：0
> 
> 时间：2013-03-13T06:07:46.097
> 
> 标签：php, jquery, html, ajax

我在 div 中加载一个 php 页面，并想在加载后检查 div 是否有 html 内容，但每次显示为空时，使用每种方法检查它是否有 html，但没有得到任何结果。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T06:12:53.913

尝试这个：

```
if($('div.dataDiv').is(':empty'))
{
   alert('div empty');
} 
```

文档`is` [http://api.jquery.com/is/](http://api.jquery.com/is/)

[使用 if 语句检查 div 是否为空的](https://stackoverflow.com/questions/4665466/using-an-if-statement-to-check-if-a-div-is-empty)可能重复项

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-13T06:13:04.660

您可以使用各种选项签入 jquery，例如

要检查是否没有文本：

```
if ($('#headermenu').text() == '') 
```

检查是否没有子元素或文本：

```
if ($('#headermenu').contents().length == 0) 
```

或者，

```
if ($('#headermenu').html() == '') 
```

其中#headermenu 作为您的 div ID。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T06:13:08.950

检查 document.getElementById("divId").innerHTML.length()

# excel - 在 VBA 中查找数组的模式

> ID：15378210
> 
> 赞同：2
> 
> 时间：2013-03-13T06:08:54.023
> 
> 标签：excel, vba

我试图在 VBA 中找到数组的模式。

假设有电影标题的动态列表。A:A，还有一个和 B:B 一样长的列表，它是电影“类型”的列表。

我试图找到某种类型的重复次数最多的标题。

注意：A:A 是一个动态列表，我不知道它的长度。

```
---------------------------------
-Finding Nemo  - Cartoon 
-Finding Nemo  - Cartoon
-Finding Nemo  - Cartoon
-Finding Nemo  - Cartoon
-Finding Nemo  - Cartoon
-Inception     - Action
-Inception     - Action
-Inception     - Action
-Dragon Ball   - Cartoon
-Dragon Ball   - Cartoon
-Dragon Ball   - Cartoon 
--------------------------------- 
```

以这张表为例，海底总动员是出现次数最多的标题。但是现在我要编写一个函数来返回该结果吗？

我假设一个类似的功能：

```
=movieMode(5) 
```

其中 5 指定了我想要返回的“顶级”结果的数量。

这里的问题是当 A:A 处于动态长度时我不知道该怎么做。以及如何控制要返回多少个结果。我应该设置一个过滤器，默认情况下只搜索“卡通”。

请分享一些关于这一点的信息。

**更新**

经过一番研究，我找到了这个公式。

```
=INDEX(A2:A177,MATCH(MAX(COUNTIF(A2:A177,A2:A177)),COUNTIF(A2:A177,A2:A177),0)) 
```

这将在 2 个条件下返回出现次数最多的标题。

1.  我使用 Ctrl+Shift+Enter （这似乎是循环遍历范围？）
2.  我指定的范围内没有空格。

我需要改进这个公式，使其采用 E:E，其中`type`是卡通，并且当 A'x' 不为空时。（当范围为空时，此公式似乎不起作用。

这是我使用 excel 公式的第一天，我已经遇到过这个问题。哈哈

**进一步更新**

考虑到我上面给出的场景，我希望使用 =movieMode(2)

结果应该是

```
----------------------------
-Finding Nemo    - 5 
-Dragon Ball     - 3
---------------------------- 
```

我希望默认情况下将“卡通”过滤器设置为函数。我从不希望动作出现在任何时候，也不希望它成为变量。

但是，如果我使用

```
-movieMode(1) 
```

预期结果是

```
-------------------
-Finding Nemo  - 5
------------------- 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:23:57.850

这是一个使用 Scripting 对象的解决方案`Dictionary`，而不是`Range`最后的高效处理。但是我习惯于`Application.ScreenUpdating = False`保持一些性能提升并消除*闪烁的*屏幕更新.....这是一个`Sub`地方，因为您也可以通过为`Top N`.

```
Option Explicit

Sub getTopN()
Dim ws As Worksheet
Dim rng As Range
Dim vArr As Variant, d As Object, aL As Object
Dim i As Integer, j As Integer, lastRow As Long
Dim topN As Integer

Set d = CreateObject("Scripting.Dictionary")
Set ws = Sheets(1)
Set rng = ws.Range("A2")
topN = ws.Range("B2").Value '-- for testing it's 2
'-- get last used row dynamically
lastRow = ws.Cells(ws.Rows.Count, "A").End(xlUp).Row
'--since data starting with row 2
lastRow = lastRow - 1
vArr = WorksheetFunction.Transpose(rng.Resize(lastRow).Value)

For i = LBound(vArr) To UBound(vArr)
    If Not d.Exists(RTrim(vArr(i))) Then
        j = 1
        d.Add RTrim(vArr(i)), j
    Else
        d.Item(RTrim(vArr(i))) = d.Item(RTrim(vArr(i))) + 1
    End If
Next i

'-- screen updating false
Application.ScreenUpdating = False

'-- output items, keys in to sheet
Set rng = ws.Range("C2")
rng.Resize(UBound(d.keys) + 1) = Application.Transpose(d.keys)
rng.Offset(0, 1).Resize(UBound(d.items) + 1) = Application.Transpose(d.items)

'-- sort this new range , top N
Set rng = rng.Resize(UBound(d.items) + 1, 2)
rng.Sort key1:=Range("D2"), order1:=xlDescending, header:=xlNo
'-- copy topN rows into a temp range
ws.Range("E2").Resize(topN, 2) = rng.Resize(topN, 2).Value
'-- clean up everything other than top N rows
rng.ClearContents
rng.Resize(topN, 2).Value = ws.Range("E2").Resize(topN, 2).Value
ws.Range("C1").Value = "Top N Movies"
ws.Range("E2").Resize(topN, 2).ClearContents
'-- release memory
Set d = Nothing

Application.ScreenUpdating = True
End Sub 
```

输出：

![在此处输入图像描述](../Images/41a807e7e7e7e77986256e324ff470e1.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T08:35:54.933

使用[cpearson.com](http://www.cpearson.com/excel/distinctvalues.aspx)中的此 VBA 函数返回一个仅包含不同值的数组。一旦你有了它，你就可以实现下面的逻辑（类似于你已经拥有的公式）来生成你的结果。这些是工作表公式，但您应该能够在 VBA 中完成同样的事情。顺便说一句，[cpearson 网站](http://www.cpearson.com/Excel/Topic.aspx)是 VBA 的一个很好的资源。

```
title genre       distinct  cpearsonVBA     count                tieBreak         rank            #_of_results   filter_array        result
----------------------------------------------------------------------------------------------------------------------------------------------------
Finding Nemo      Cartoon   Finding Nemo    =COUNTIFS(A:A,C:C)   =ROW()^-9+D:D    =RANK(E:E,E:E)   2             =IF(F:F<=$G$2,1,0)  =IF(H:H,C:C,"")
Finding Nemo      Cartoon   Inception       =COUNTIFS(A:A,C:C)   =ROW()^-9+D:D    =RANK(E:E,E:E)                 =IF(F:F<=$G$2,1,0)  =IF(H:H,C:C,"")
Finding Nemo      Cartoon   Dragon Ball     =COUNTIFS(A:A,C:C)   =ROW()^-9+D:D    =RANK(E:E,E:E)                 =IF(F:F<=$G$2,1,0)  =IF(H:H,C:C,"")
Finding Nemo      Cartoon              
Finding Nemo      Cartoon              
Inception         Action             
Inception         Action             
Inception         Action             
Dragon Ball       Cartoon              
Dragon Ball       Cartoon              
Dragon Ball       Cartoon 
```

# javascript - 如何循环在不同时间显示问候的函数

> ID：15378213
> 
> 赞同：0
> 
> 时间：2013-03-13T06:09:05.753
> 
> 标签：javascript, loops

我是新来的，也是 js 的新手。

我想问是否可以循环以下 getGreeting 函数一定次数，比如 20 次。所以根据一天中的时间，你会得到 20 个早上好！或 20 个下午好等等。

谢谢

```
window.onload = function() {
    var date = new Date();
    var hours = date.getHours();
    document.getElementById("greeting").innerHTML = getGreeting(hours);
};

function getGreeting(hours) {
    var greetingText;
    if (hours >=6 && hours < 12) {
        greetingText = "Good morning!";
    } else if (hours >= 12 && hours < 17) {
        greetingText = "Good afternoon!";
    } else if (hours >= 17 && hours < 23) {
        greetingText = "Good Evening!";
    } else if (hours >= 23 || hours < 6) {
        greetingText = "Go to sleep!";
    }
    return greetingText;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T06:11:23.247

```
for(var i=0;i<21;i++)
{
  document.getElementById("greeting").innerHTML = getGreeting(hours);
  // Maybe you want this
  document.getElementById("greeting").innerHTML = document.getElementById("greeting").innerHTML + "\n" + getGreeting(hours); // This will show 20 Greetings in the field
} 
```

但它的目的是什么？您甚至不会注意到 20 次重复，因为您正在更新相同`greeting`元素的 InnerHTML。

# php - 什么更适合开发游戏

> ID：15378214
> 
> 赞同：0
> 
> 时间：2013-03-13T06:09:10.477
> 
> 标签：php, jquery, flash, game-engine

我对 jquery 和 js 和 PHP 有很好的命令，但我不知道 flash。但我所看到的是，Flash 中有游戏而不是 jquery 或 js。请告诉我什么对我来说更好地进行游戏开发。我对Java也有一点了解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T06:15:12.457

jQuery 中有游戏——这里有 10 个简单的源代码[http://www.emanueleferonato.com/2010/04/13/17-jquery-powered-web-games-with-source-code/](http://www.emanueleferonato.com/2010/04/13/17-jquery-powered-web-games-with-source-code/)

甚至流行的旧游戏（如 Quake、Doom）也已移植到 javascript/HTML5。

Flash 不再是唯一的做事方式，但对于您的问题，它实际上取决于您打算做什么。仍然有一些事情需要闪存。

**编辑：**这里是一些 js 游戏引擎之间的比较[https://github.com/bebraw/jswiki/wiki/Game-Engines](https://github.com/bebraw/jswiki/wiki/Game-Engines)

# android - 在另一个活动中关闭对话框时如何重新加载活动？

> ID：15378215
> 
> 赞同：2
> 
> 时间：2013-03-13T06:09:15.597
> 
> 标签：android, android-intent, android-activity

在我的应用程序中，我使用了一个对话框。当用户按下 OK 时，它通过传递一个意图进入另一个活动。这是我的代码：

```
dialogButton.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {
        Intent intent = new Intent(EditDeleteReqCardList.this, RequestcardList.class);
        startActivity(intent);
        dialog.dismiss();    
    }
}); 
```

传递到 时`RequestcardList.class`，我还想重新加载`RequestcardList`页面。如何在对话框的`onclick`侦听器中执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T18:46:14.807

尝试：受保护的无效onNewIntent（意图意图）

[http://developer.android.com/reference/android/app/Activity.html#onNewIntent%28android.content.Intent%29](http://developer.android.com/reference/android/app/Activity.html#onNewIntent%28android.content.Intent%29)

> 您可以使用 setIntent(Intent) 将其更新为这个新的 Intent。

# sql - Postgresql 包含在 where 子句中

> ID：15378216
> 
> 赞同：9
> 
> 时间：2013-03-13T06:09:19.817
> 
> 标签：sql, postgresql, select, where-clause, contains

postgres 中是否有类似的功能**`contains`**？可用于`where clause`检查传递的字符串是否包含在列中？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-13T08:09:50.987

你可以用[`position()`](http://www.linuxtopia.org/online_books/database_guides/Practical_PostgreSQL_database/PostgreSQL_x8973_003.htm#AEN10365)它。如果未找到子字符串，则返回零：

```
position(col2 in col1) <> 0 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-13T09:06:49.670

有很多方法可以解决这个问题：

1.  与 || 一起使用`like`、`ilike`和/或。`SIMILAR TO`要处理列，例如：

    ```
    WHERE col1 ilike '%' || col2 || '%'; 
    ```

2.  使用职位作为 NPE 的答案

3.  您也可以使用`regexp_matches`，但这更复杂。

# ruby - 覆盖红宝石中的“=”运算符

> ID：15378217
> 
> 赞同：4
> 
> 时间：2013-03-13T06:09:27.287
> 
> 标签：ruby

我有一个有方法的类：

```
def value=(valueIN)
  some code
end 
```

这正是我想要的：

```
(class instance).value="new data" 
```

如果我可以覆盖这个类似乎会更干净，`=`所以我不必这样做`value=`。首先，我试过：

```
def =(valueIN)
  some code
end 
```

但这给了我一个错误，所以我尝试了：

```
def self=(valueIN)
  some code
end 
```

这不会导致错误，但是当我这样做时它不起作用：

```
(class instance)="new data" 
```

作业是在班级级别不可更改的吗？如果无法做到这一点，那并不是什么大不了的事，但我希望我错过了一些基本的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T06:16:06.113

`=`不是 Ruby 中可以被覆盖的运算符。Ruby（和我们一起）玩的把戏是，

```
self.value = "Me"
self.value= "You"
self.value=("He") 
```

都是一样的解释，让你可以自由使用你最喜欢的版本。因为这些都是方法调用，所以您可以定义或覆盖`value=`一个参数的工作方式。

*仅*将其用于分配对象的属性是一种习惯用法，但是 Ruby 允许您在需要的地方使用它。

所以没有机会覆盖`=`运营商（我认为这是一个好主意）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-13T06:16:24.297

对不起，你不能这样做。当您编写 时`foo = bar`，您只是分配一个变量，而不是调用任何方法。只是`something.foo = bar`对方法调用进行了脱糖，就像其他任何地方一样，该方法调用的接收者是点之前的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T06:16:35.847

`=`根据上下文以两种方式之一解释。

*   表单方法的一部分`foo=`
*   变量赋值运算符

您可以在表单中定义自己的方法`foo=`，在这种情况下`=`，前面有一个字母，但您不能重新定义变量赋值运算符`=`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T06:17:48.623

如果您尝试为类级值提供 setter 方法，则可以使用以下方法：

```
class MyClass
  def self.my_class_attribute=(value)
    @my_class_attribute = value
  end
end 
```

然后你可以像这样分配它：

```
MyClass.my_class_attribute = "new value" 
```

这会调用 上的`.my_class_attribute=`方法`MyClass`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-13T06:18:41.837

没有办法做你所说的。您无法更改 的值`self`，因此没有 的类级别覆盖`=`。

不过，我不完全确定您为什么要这样做。它可能有用的场景将需要创建该类的新实例。您可以通过克隆对象（通过`.dup`或其他方式）并修改新对象来完成类似的事情，或者创建自定义类方法来复制对象并返回一个新的，可能是修改后的实例。我在猜测，但想不出一个好的例子。

# windows-phone-7 - 使用套接字发送和接收文件（mp3 音乐文件）

> ID：15378219
> 
> 赞同：0
> 
> 时间：2013-03-13T06:09:38.813
> 
> 标签：windows-phone-7, sockets, mp3

我目前正在开发一个 WP7.5 项目，在这个项目中，我需要将一个 mp3 文件从 PC（桌面应用程序）发送到 WP7.5 应用程序。

我为此使用 TCP 套接字，但使用套接字我只能发送和接收文本消息。任何人都可以通过提供通过套接字发送和接收文件的示例代码（WP7.5 及更高版本）来帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T06:58:58.963

您几乎可以通过套接字发送任意数量的数据。您基本上是在发送字节，这意味着您可以对文本进行编码或发送任何内容的字节表示，例如音乐文件。

查看[这篇文章](http://mobile.dzone.com/articles/tcp-based-sockets-windows)以获取有关如何在 WP 中使用 TCP 的更多详细信息。

# java - 如果 Map 的键具有相似的属性但顺序不同，它们如何被视为相等？

> ID：15378221
> 
> 赞同：0
> 
> 时间：2013-03-13T06:09:54.270
> 
> 标签：java, map, hashmap

我有一个 Pair 课程和 -

```
Map<Pair<String, String>, String> map = new HashMap<Pair<String, String>, String>();
map.put(new Pair("name1", "address1"), "Young");
map.put(new Pair("name2", "address2"), "Old");
.
.
. and so on. 
```

现在我有一个要求，我必须将两对视为平等

```
pair1 = new Pair("name1", "address1");
pair2 = new Pair("address1", "name1"); 
```

请注意，`pair2`in 不是映射中的键，而是`pair1`。所以当我这样做的时候

```
map.get(pair1);
map.get(pair2); 
```

给我同样的结果`"Young"`；

我应该做哪些额外的事情来实现它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T06:13:24.277

您将不得不在 Pair 类中覆盖`equals()`和。`hashcode()`另请参阅这些[https://stackoverflow.com/a/2265637/869488](https://stackoverflow.com/a/2265637/869488)

[https://stackoverflow.com/a/27609/869488](https://stackoverflow.com/a/27609/869488)（检查这些答案的“还记得”标题）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T06:16:19.847

在类中重写`hashCode()`和`equals()`方法，`Pair`以便，

```
pair1 = new Pair("name1", "address1");
pair2 = new Pair("address1", "name1"); 
```

将在哈希图中的相同哈希桶中。当您正确覆盖该`hashCode()`方法以确保相等的对象获得相等的哈希码时，hashmap 能够找到两个相等的对象并将它们放在同一个哈希桶中。

# java - 使用正则表达式匹配第二个子字符串

> ID：15378225
> 
> 赞同：1
> 
> 时间：2013-03-13T06:10:23.550
> 
> 标签：java, regex

我需要一个匹配第二个的正则`"abc"`表达式`"abcasdabchjkabc"`。我尝试编写这样的代码，

```
Pattern p = Pattern.compile("(?<=abc(.*?))abc"); 
```

但它抛出一个`java.util.regex.PatternSyntaxException`：

```
Look-behind group does not have an obvious maximum length near index 11
(?<=abc(.*?))abc
           ^
    at java.util.regex.Pattern.error(Pattern.java:1713)
    at java.util.regex.Pattern.group0(Pattern.java:2488)
    at java.util.regex.Pattern.sequence(Pattern.java:1806)
    at java.util.regex.Pattern.expr(Pattern.java:1752)
    at java.util.regex.Pattern.compile(Pattern.java:1460)
    at java.util.regex.Pattern.<init>(Pattern.java:1133)
    at java.util.regex.Pattern.compile(Pattern.java:823) 
```

请给我看正确的！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T06:14:55.443

您不能在后视断言中使用`*`或`+`。

*   [为什么这个正则表达式中的后视表达式没有“明显的最大长度”？](https://stackoverflow.com/q/7679393/139010)
*   [Java中没有明显最大长度的正则表达式后视](https://stackoverflow.com/q/1536915/139010)

你真的想匹配两个`abc`s 之间的所有内容吗？

```
Pattern.compile("abc(.*?)abc"); 
```

还是您只想检查是否有*两个*s `abc`？

```
Pattern.compile("abc.*?abc"); 
```

在这两种情况下，我都认为*不需要*向后看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T06:30:35.497

一个简单的选择是匹配您的模式*两次*：

```
String input = "abcXYabcZRabc";

Pattern p = Pattern.compile("abc");
Matcher m = p.matcher(input);

m.find(); // what to do when there is no match?
m.find(); // what to do when there is only one match?

System.out.println("Second match is between " + m.start() + " and " + m.end()); 
```

工作示例：http: [//ideone.com/uVZL3j](http://ideone.com/uVZL3j)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T06:27:08.997

我猜你想要类似的东西：

```
java.util.regex.Pattern.compile("(?<=abc.{1,99})abc"); 
```

它找到第二个 abc。

# javascript - 当第一个文本框的值为 maxLenght=3 时如何将焦点转移到第二个文本框

> ID：15378228
> 
> 赞同：0
> 
> 时间：2013-03-13T06:10:29.120
> 
> 标签：javascript, textbox, focus, maxlength, onkeypress

我有 2 个文本框并排放置在线申请表上的电话号码字段。

第一个文本框的 maxLenght 为 = 3，因此在用户输入值后，它必须关注第二个文本框。

我将此函数添加到我的输入类型文本框，但它只允许一个值，然后它已经专注于第二个文本框。

```
onkeypress="if(value.lenght==3)return false;
            document.getElementById('TelNumber2').focus();" 
```

我也试过这个功能，但同样的事情发生

```
onkeypress="if(event.keyCode==3)return false;
            document.getElementById('TelNumber2').focus();" 
```

这些是我的文本框：

第一个文本框：

```
input type="textbox" id="TelNumber1" name="TelNumber1" value="" maxLenght="3" 
style="width:40px; border: 1px solid #b5b6b5" size="3" 
onKeyDown="limitText(this,3);" onKeyUp="MaxText(this,3);" /> 
```

第二个文本框：

```
input type="textbox" id="TelNumber2" name="TelNumber2" value="" maxLenght="7"
style="width:115px; border: 1px solid #b5b6b5" size="7" 
onKeyDown="MaxText(this,7);" onKeyUp="MaxText(this,7);" /> 
```

将不胜感激任何帮助

卡梅罗内

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T06:32:09.690

你只是拼写错误的长度。这工作正常。

```
<input onkeyup='if (this.value.length >= 3) { document.getElementById("TelNumber2").focus(); }' /> 
```

编辑：我的立场得到纠正。看起来当代码在这样的属性中时，您不需要使用`this`. `value`已经在范围内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T06:14:31.697

您在设置焦点之前返回。因此，您设置焦点的代码，即`document.getElementById('TelNumber2').focus();`根本没有被调用。

试试下面的。不要使用 return 语句。

```
onkeypress="if(value.length==3) document.getElementById('TelNumber2').focus();" 
```

干杯! :)

# ios - 如何在输入字段中输入任何文本时向上移动视图

> ID：15378234
> 
> 赞同：0
> 
> 时间：2013-03-13T06:10:55.450
> 
> 标签：ios, ipad, landscape

我有我想要的应用程序，当用户输入任何数据时，视图应该向上滑动。我正在编写此代码，此代码在另一个应用程序中运行良好，但在此应用程序中不起作用。我遵循相同的方式。

```
-(void)showAnimationBack{

    NSLog(@"Back Animation is Working");

    [UIView animateWithDuration:0.5 
                     animations:^{
                         self.subViewLand.frame = CGRectMake(0,-10,1024,768);

                     }];

}

-(void) showAnimationPests{

    NSLog(@" Animation is Working");

    [UIView animateWithDuration:0.5 
                     animations:^{
                         self.subViewLand.frame = CGRectMake(0,-200,1024,768);

                     }];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T06:17:05.950

```
- (void)textFieldDidBeginEditing:(UITextField *)textField
{
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.5];
    self.subViewLand.frame  = CGRectMake(0,-200,1024,768); // or to self.view.frame  = CGRectMake(0,-200,1024,768);
    [UIView commitAnimations];
}

- (void)textFieldDidEndEditing:(UITextField *)textField{
        [UIView beginAnimations:nil context:NULL];
        [UIView setAnimationDuration:0.5];
        self.subViewLand.frame = CGRectMake(0,-200,1024,768); // or to self.view.frame  = CGRectMake(0,-200,1024,768);
        [UIView commitAnimations];
} 
```

此代码将起作用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T06:16:26.457

在 textfielddidBeginEditing 方法中设置这样的视图框架

```
 - (void)textFieldDidBeginEditing:(UITextField *)textField
{
   [self.subViewLand setFrame:CGRectMake(0, -200, 320, 480)];
} 
```

在 textfielddidEndEditing 方法中按原样设置视图框架。

```
- (void)textFieldDidEndEditing:(UITextField *)textField{
    [self.subViewLand setFrame:CGRectMake(0, 0, 320, 480)];
} 
```

它肯定会奏效。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T06:22:32.217

在`textFieldDidBeginEditing()`调用你的方法`showAnimationPests()`和类似的`textFieldDidEndEditing()`调用`showAnimationBack()`。

这对你来说很好。

# android - 如何知道来电是否被拒绝或错过

> ID：15378237
> 
> 赞同：0
> 
> 时间：2013-03-13T06:11:21.917
> 
> 标签：android

我想检测呼叫是否未接或使用呼叫状态被拒绝。

```
public void onCallStateChanged(int state, String incomingNumber) {
    super.onCallStateChanged(state, incomingNumber);

    switch (state) {
        case TelephonyManager.CALL_STATE_IDLE:
            //when Idle i.e no call   
            if(flag==2){
                Toast.makeText(context,"Missed Call", Toast.LENGTH_LONG).show();
            flag=0;
            }else{
                Toast.makeText(context, "Phone state Idle", Toast.LENGTH_LONG).show();
            }

            break;
        case TelephonyManager.CALL_STATE_OFFHOOK:
            // flag=0;
            // when Off hook i.e in call
            // Make intent and start your service here
            Toast.makeText(context, "Phone state Off hook", Toast.LENGTH_LONG).show();
            flag=1;
            break;
        case TelephonyManager.CALL_STATE_RINGING:
            //when Ringing
            Toast.makeText(context, "Phone state Ringing", Toast.LENGTH_LONG).show();
            flag=2;
            break;
        default:
            break;
    }               
} 
```

以及如何弹出 Call_STATE_RINGING 的对话框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T06:19:28.330

当您在振铃阅读通话记录后达到理想状态并获得呼叫类型时，如果未接，则类型为 3，如果被拒绝，则类型为 5

# windows - 无法从 Windows 的 XML-SAX-ExpatXS-1.31 包生成 ExpatXS.dll

> ID：15378241
> 
> 赞同：0
> 
> 时间：2013-03-13T06:11:27.517
> 
> 标签：windows, perl

在 Windows 上运行应用程序时遇到此错误。经过大量的研发，我发现我需要ExpatXS.dll，这是这里缺少的组件（模块的可加载对象）

`Can't locate loadable object for module XML::SAX::ExpatXS in @INC (@INC contains : C:/perl/site/lib C:/perl/lib .) at (eval 63) line 1 Compilation failed in require at (eval 63) line 1.`

所以，现在我在我的 x86 机器上安装了草莓 perl，我还有 XML-SAX-ExpatXS-1.31 包，其中包含一个 Makefile.PL 和一些头文件 encoding.h 以及我猜是 perl 的 ExpatXS.pm 文件生成 ExpatXS.dll 所需的模块（对吗？）

谁能让我知道我应该如何编译这个包以获得 Windows 的 ExpatXS.dll。我的主要目标是为 Windows 生成 ExpatXS.dll。

这与使用cpan有关吗？我对此了解不多。所以，请通俗地解释一下。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T06:47:51.197

做就是了

```
cpan XML::SAX::ExpatXS 
```

# alfresco - 通过 CMIS 从 Alfresco 下载私有工作副本时出现 CmisInvalidArgumentException

> ID：15378244
> 
> 赞同：1
> 
> 时间：2013-03-13T06:11:28.810
> 
> 标签：alfresco, cmis, opencmis

我[的开源应用程序](http://CmisSync.com)下载[Alfresco](http://www.alfresco.com)文件夹的文件（通过[CMIS](http://en.wikipedia.org/wiki/Content_Management_Interoperability_Services)）。
算法很简单：

1.  [使用Folder.getChildren()](http://chemistry.apache.org/java/0.8.0/maven/apidocs/org/apache/chemistry/opencmis/client/api/Folder.html#getChildren%28%29)列出文件夹的内容
2.  [使用Document.getContentStream()](http://chemistry.apache.org/java/0.8.0/maven/apidocs/org/apache/chemistry/opencmis/client/api/Document.html#getContentStream%28%29)下载每个

它工作正常，除了包含文件[工作副本](http://docs.alfresco.com/4.1/topic/com.alfresco.enterprise.doc/concepts/cuh-content-workingcopy.html)的文件夹，在这种情况下，Alfresco 说：

```
org.apache.chemistry.opencmis.commons.exceptions.CmisInvalidArgumentException: Stream id is invalid: workspace://SpacesStore/8b9a58ba-652f-4a18-8d26-aba06df98d25;pwc
    at org.alfresco.opencmis.CMISConnector.getContentStream(CMISConnector.java:1199)
    at org.alfresco.opencmis.AlfrescoCmisServiceImpl.getContentStream(AlfrescoCmisServiceImpl.java:1795)
    at sun.reflect.GeneratedMethodAccessor700.invoke(Unknown Source) 
```

可能的`;pwc`意思是“私有工作副本”，这是 CMIS 协议中的一个特例。当 Alfresco Share 用户单击文档上的“脱机编辑”（也称为签出/签入）时，会创建工作副本。

我的算法有缺陷吗？还是可能是 Alfresco/OpenCMIS 中的错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:48:08.550

我不确定细节，因为您没有在此处粘贴触发异常的代码，并且您没有提及您正在使用的化学版本。[无论如何，如果我在CMIS 工作台](http://chemistry.apache.org/java/developing/tools/dev-tools-workbench.html)v0.8.0中运行以下 groovy 代码，它会成功打印所有文件内容：

```
def obj = session.getObjectByPath("/cc");
def children = obj.getChildren();
for (doc in children) {
  def s = doc.getContentStream();
  def i = s.getStream();
  println(i.text);
} 
```

上面使用的`cc`文件夹是我在[Alfresco CMIS 实例](http://cmis.alfresco.com)中创建的文件夹，我在其中放置了一个文件并签出以创建 PWC。我认为您的代码存在一些问题，因为上面的代码使用了相同的 API。

# php - php正则表达式如何删除重复的字符串

> ID：15378246
> 
> 赞同：2
> 
> 时间：2013-03-13T06:11:30.947
> 
> 标签：php, regex

这是一个长字符串，例如“abc,adbc,abcf,abc,adbc,abcf”

我想使用正则表达式删除以逗号分隔的重复字符串

以下是我的代码，但结果不是我所期望的。

```
$a='abc,adbc,abcf,abc,adbc,abcf';
$b=preg_replace('/(,[^,]+,)(?=.*?\1)/',',',','.$a.',');
echo $b; 
```

输出：，adbc，abc，adbc，abcf，

它应该是：,abc,adbc,abcf,

请指出我的问题。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T06:17:18.707

在这里，我分享的是简单的 php 逻辑而不是正则表达式

```
$a='abc,adbc,abcf,abc,adbc,abcf';

$pieces = explode(",", $a);
$unique_values = array_unique($pieces);
$string = implode(",", $unique_values); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T06:22:30.350

尝试这个....

```
$string='abc,adbc,abcf,abc,adbc,abcf';
$exp = explode(",", $string);
$arr = array_unique($exp);
$output=implode(',', $arr); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T06:18:19.187

你也可以试试

```
echo implode(",", array_unique(preg_split(",", $yourLongString))); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T06:15:06.753

这是针对 OP 问题的基于正则表达式的解决方案的积极前瞻基础尝试。

```
$arr = array('ball ball code', 'abcabc bde bde', 'awycodeawy');
foreach($arr as $str)
   echo "'$str' => '" . preg_replace('/(\w{2,})(?=.*?\\1)\W*/', '', $str) ."'\n"; 
```

输出

```
'ball ball code' => 'ball code'
'abcabc bde bde' => 'abc bde'
'awycodeawy' => 'codeawy' 
```

对于输入“awycodeawy”，您可以将其变为“codeawy”而不是“awycode”。原因是可以找到可变长度的前瞻，而后瞻是不可能的。

# java - 休眠嵌套查询

> ID：15378248
> 
> 赞同：0
> 
> 时间：2013-03-13T06:11:41.977
> 
> 标签：java, hibernate, spring-mvc, hql

我们正在尝试为下面创建休眠特定查询 `lSession.createQuery(lQueryString.toString());` ............

```
INSERT INTO EMPLOYEE_HISTORY (emp_status,
                              createdBy,
                              releasedate,
                              year)
   SELECT CASE n.emp_Status WHEN 0 THEN 'Draft' ELSE 'Final' END,
          m.createdBy,
          m.releasedate,
          m.year
     FROM EMPLOYEE m, (SELECT COUNT (1) EMPLOYEE_HISTORY   b,EMPLOYEE a where a.emplid=b.emplid and a.year=b.year and b.year=2012 and a.doc_id='XYZ') n 
     where a.doc_id='xyz'

getting following exception,I guess it because of below statement in query
(SELECT COUNT (1) EMPLOYEE_HISTORY   b,EMPLOYEE a where a.emplid=b.emplid and a.year=b.year and b.year=2012 and a.doc_id='XYZ') n

org.hibernate.hql.ast.QuerySyntaxException: unexpected token: ( near line 1, column 374 
INSERT INTO EMPLOYEE_HISTORY (emp_status,
                              createdBy,
                              releasedate,
                              year)
   SELECT CASE n.emp_Status WHEN 0 THEN 'Draft' ELSE 'Final' END,
          m.createdBy,
          m.releasedate,
          m.year
     FROM EMPLOYEE m, (SELECT COUNT (1) EMPLOYEE_HISTORY   b,EMPLOYEE a where a.emplid=b.emplid and a.year=b.year and b.year=2012 and a.doc_id='XYZ') n 
     where a.doc_id='xyz' 
```

例外

```
at org.hibernate.hql.ast.QuerySyntaxException.convert(QuerySyntaxException.java:54)
    at org.hibernate.hql.ast.QuerySyntaxException.convert(QuerySyntaxException.java:47)
    at org.hibernate.hql.ast.ErrorCounter.throwQueryException(ErrorCounter.java:82)
    at org.hibernate.hql.ast.QueryTranslatorImpl.parse(QueryTranslatorImpl.java:284)
    at org.hibernate.hql.ast.QueryTranslatorImpl.doCompile(QueryTranslatorImpl.java:182)
    at org.hibernate.hql.ast.QueryTranslatorImpl.compile(QueryTranslatorImpl.java:136)
    at org.hibernate.engine.query.HQLQueryPlan.<init>(HQLQueryPlan.java:101)
    at org.hibernate.engine.query.HQLQueryPlan.<init>(HQLQueryPlan.java:80)
    at org.hibernate.engine.query.QueryPlanCache.getHQLQueryPlan(QueryPlanCache.java:124)
    at org.hibernate.impl.AbstractSessionImpl.getHQLQueryPlan(AbstractSessionImpl.java:156)
    at org.hibernate.impl.AbstractSessionImpl.createQuery(AbstractSessionImpl.java:135)
    at org.hibernate.impl.SessionImpl.createQuery(SessionImpl.java:1770) 
```

如果有任何建议/意见，请提供。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:48:35.450

看起来，就像您将 SQL 而不是 HQL 传递给 Session.createQuery(...) 方法。

见：[http ://docs.jboss.org/hibernate/orm/3.3/reference/en/html/objectstate.html#objectstate-querying-executing](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/objectstate.html#objectstate-querying-executing)

例如在：

```
INSERT INTO EMPLOYEE_HISTORY (...) 
```

'EMPLOYEE_HISTORY' 应该是实体类名（如 EmployeeHistory）而不是表名。

同样在 HQL 中，您可以使用在实体中定义的引用来通过关联避免通过 id 进行隐式连接，就像您在此处所做的那样

```
where a.emplid=b.emplid and ... 
```

考虑上面 URL 中的示例：

```
select mother from Cat as cat join cat.mother as mother where cat.name = ? 
```

# c# - 根据当前用户角色动态隐藏 Web 部件

> ID：15378249
> 
> 赞同：0
> 
> 时间：2013-03-13T06:11:44.297
> 
> 标签：c#, asp.net, web-parts

如何在 asp.net 中动态隐藏/显示 web 部件。我正在使用[它](http://forums.asp.net/t/1188712.aspx/1)来做同样的事情，但是在本文中，它们在控件的 AuthorizationFilter 属性上具有硬编码的角色，而我希望角色应该在运行时分配。我还尝试了另一种替代方法，我在 .cs 文件中声明了变量“角色”，并在运行时将值分配给角色变量（并使用类似**AuthorizationFilter='<%# roles %>'**）但它对我不起作用每次我将 AuthorizationFilter 的值设为空白* *（如果我*在标签上使用 Text='<%# roles %>' * 则它会显示其值，但值不会分配给 **AuthorizationFilter）**。我也试过

```
 if (User.IsInRole("Admin"))
        Label2.Visible = true; 
```

但它仍然在 Web 部件区域内显示 Web 部件标题。

# c# - 如何仅修改 LINQ 投影中的一个或两个字段？

> ID：15378257
> 
> 赞同：6
> 
> 时间：2013-03-13T06:12:30.870
> 
> 标签：c#, linq, projection

我有这个 LINQ 查询：

```
List<Customers> customers = customerManager.GetCustomers();

return customers.Select(i => new Customer {
    FullName = i.FullName,
    Birthday = i.Birthday, 
    Score = i.Score,
    // Here, I've got more fields to fill
    IsVip = DetermineVip(i.Score)
}).ToList(); 
```

换句话说，我只希望在我的业务方法中根据条件修改客户列表的一两个字段。我有两种方法可以做到这一点，

1.  使用`for...each`循环，遍历客户并修改该字段（势在必行的方法）
2.  使用 LINQ 投影（声明式方法）

在 LINQ 查询中是否可以使用任何技术，仅修改投影中的一个属性？例如，类似：

```
return customers.Select(i => new Customer {
    result = i // telling LINQ to fill other properties as it is
    IsVip = DetermineVip(i.Score) // then modifying this one property
}).ToList(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T06:19:34.810

您可以使用

```
return customers.Select(i => {
    i.IsVip = DetermineVip(i.Score);
    return i;
}).ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T06:17:34.277

你“可以”，如果你创建一个复制构造函数，它用现有对象的值初始化一个新对象：

```
partial class Customer
{
    public Customer(Customer original)
    {
        this.FullName = original.FullName;
        //...
    }
} 
```

然后你可以这样做：

```
return customers.Select(i => new Customer(i) { IsVip = DetermineVip(i.Score)})
    .ToList() 
```

但是这里的缺点是您将基于每个现有对象*创建一个新`Customer`对象，而不是**修改*现有对象 - 这就是我将“can”放在引号中的原因。我不知道这是否真的是你想要的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-13T06:30:00.917

与其他答案相反，您可以通过调用 Select 语句中的方法来修改 linq 中的源内容（请注意，EF 不支持此操作，尽管这对您来说应该不是问题）。

```
return customers.Select(customer => 
{
    customer.FullName = "foo";
    return customer;
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T06:16:05.797

不，Linq 旨在迭代集合而不影响源可枚举的内容。

但是，您可以创建自己的方法来迭代和改变集合：

```
public static void ForEach<T>(this IEnumerable<T> enumeration, Action<T> action)
{
    foreach(T item in enumeration)
    {
        action(item);
    }
} 
```

然后，您可以按如下方式使用：

```
return customers.ToList()
                .ForEach(i => i.IsVip = DetermineVip(i.Score))
                .ToList(); 
```

请注意，第一个 ForEach 将克隆源列表。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T06:27:46.080

由于客户已经是一个列表，您可以使用 ForEach 方法：

```
customers.ForEach(c => c.IsVip = DetermineVip(c.Score)); 
```

# iphone - 你能从 ios 的照片库中将照片分享到你的应用程序吗

> ID：15378258
> 
> 赞同：1
> 
> 时间：2013-03-13T06:12:32.987
> 
> 标签：iphone, ios6, file-sharing

大家好，我是 iPhone 和 iPad 开发的新手。我听说`ios 6`有一项功能允许用户将照片从库共享到特定的`iOS Applications`. 就像我们在照片库中打开照片并按下按钮进行分享一样，我们发现那里有图标`Facebook,twitter`和更多标准选项。我们可以将我们的应用程序图标放在那里以将照片分享到我们的应用程序吗？

等待答复。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T06:45:46.567

好吧，我认为这并不容易，但并非不可能。要实现这一点，您必须在 SocialFramework 中进行一些更改。

# javascript - 在 HTML 中排列元素并使用 Javascript

> ID：15378260
> 
> 赞同：0
> 
> 时间：2013-03-13T06:12:42.523
> 
> 标签：javascript, html, css

我对 JavaScript 很陌生。我一直在这里为我的网站制作表格，但我遇到了一个非常不寻常的问题。

我想要元素名称，男/女，出生日期并排..！当我将它们并排浮动时，给它们宽度，它似乎并没有改变它..!! 我尝试在 Google 和 stackoverflow 上搜索，但它在这里不起作用。

让我粘贴下面的 HTML 和 CSS 代码，以便大家帮助我.. !!

HTML 代码：

```
 <div id="form_container" class="WarpShadow WLarge WNormal">

        <img src = "header.png" width="100%" />
        <form id="form_3" class="appnitro top_label"  method="post" data-highlightcolor="#f5d678" action="#main_body">
                    <div class="form_description">
            <h2>SWIM TEAM REGISTRATION FEES</h2>
            <p>(One check can be written for all children including any required fees for Junior Memberships.)</p>
        </div>                        
            <ul >
                        <li id="pagination_header" class="li_pagination">
             <table class="ap_table_pagination" width="100%" border="0" cellspacing="0" cellpadding="0">
              <tr> 
                  <td align="center"><span id="page_num_1" class="ap_tp_num ap_tp_num_active">1</span><span id="page_title_1" class="ap_tp_text ap_tp_text_active">Fees</span></td><td align="center" class="ap_tp_arrow">&gt;</td>
<td align="center"><span id="page_num_2" class="ap_tp_num">2</span><span id="page_title_2" class="ap_tp_text">Registration</span></td><td align="center" class="ap_tp_arrow">&gt;</td>
<td align="center"><span id="page_num_3" class="ap_tp_num">3</span><span id="page_title_3" class="ap_tp_text">Release</span></td><td align="center" class="ap_tp_arrow">&gt;</td><td align="center"><span id="page_num_4" class="ap_tp_num">4</span><span id="page_title_4" class="ap_tp_text">Payment</span></td>
              </tr>
            </table>
        <li id="li_2" >
        <label class="description" for="element_2"><input type="checkbox"> $120 for 1st child </label>
        </li>        
        <li id="li_3" >
        <label class="description" for="element_2"><input type="checkbox"> $110 for 2nd child </label>
        </li>    
        <div id="moveleft">    
        <li id="li_4" >
        <label class="description4" for="element_2">Names </label>
        <input id="element_2" name="element_2" class="element text small" type="text" maxlength="255" value="">
        </li>
        <li id="li_5">
            <div>
                <label class="description5" for="element_5">Male / Female</label>
                <select class="element select small" id="element_5" name="element_5"> 
                <option value="" selected="selected"></option>
                <option value="Male">Male</option>
                <option value="Female">Female</option>
                </select>
            </div> 
        </li>
        <li id="li_8" class="date_field">
        <label class="description">DOB </label>
        <span class="date_mm">
            <input id="element_8_1" name="element_8_1" class="element text" size="2" maxlength="2" value="" type="text" /> /
            <label for="element_8_1">MM</label>
        </span>
        <span class="date_dd">
            <input id="element_8_2" name="element_8_2" class="element text" size="2" maxlength="2" value="" type="text" /> /
            <label for="element_8_2">DD</label>
        </span>
        <span class="date_yyyy">
             <input id="element_8_3" name="element_8_3" class="element text" size="4" maxlength="4" value="" type="text" />
            <label for="element_8_3">YYYY</label>
        </span>
            </div>

        </li> 
```

由于页面变大，我无法在此处附加 CSS 代码..！！但我已经制作了一个文件，您可以在这里下载：[CSS 文件](http://ankitsuryawanshi.in/projects/form/form1/view.css)或只是在新选项卡中打开它，整个文件都可以查看..！！

请帮我解决这个问题..!!!

您还可以在此处找到工作示例：

[http://www.ankitsuryawanshi.in/projects/form/form1/form.html](http://www.ankitsuryawanshi.in/projects/form/form1/form.html)

非常感谢您的时间和答案..!!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T07:23:36.467

这可能是您正在寻找将表单拆分为 2 列的内容：

```
<li>
<div class="left"><label class="description4" for="element_2">Names </label></div>
<div class="right"><input id="element_2" name="element_2" class="element text small" type="text" maxlength="255" value=""></div>
</li> 
```

主要元素是`<div class="left">`和`<div class="right">`

在你的css文件中

```
.left{float:left;}
.right{float:right;} 
```

玩一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T06:25:39.087

这是快速修复：

```
<li id="li_4" style="">
<label class="description" for="element_2">Names </label>
<input id="element_2" name="element_2" class="element text small" type="text" maxlength="255" value="">
<label class="description" for="element_5">Male / Female</label>
<select class="element select small" id="element_5" name="element_5"> 
<option value="" selected="selected"></option>
<option value="Male">Male</option>
<option value="Female">Female</option>
</select>
</li> 
```

并`display:block`从下面的 css 类中删除。与行内元素不同，块元素占据每一行。

```
#main_body label.description {
border: none;
color: #222;
display: block;
font-size: 95%;
font-weight: 700;
line-height: 150%;
padding: 0 0 1px;
} 
```

# opengl-es - 在 Windows phone 8 中使用 OpenGL

> ID：15378263
> 
> 赞同：1
> 
> 时间：2013-03-13T06:13:04.093
> 
> 标签：opengl-es, windows-phone-8, windows-phone

我正在为 windows phone 8 开发应用程序我想在 android 和 iOS 中使用 OpenGl 我在互联网上搜索但没有找到对我有帮助的东西请建议我是否可以使用 WP8？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T06:15:42.787

不幸的是，Windows Phone 不支持 OpenGL。您可以在 Windows Phone 8 中使用 Direct3D 或在 Windows Phone 7/8 中使用 XNA。

编辑/更新：

如果你想在 Windows Phone 8 上使用 OpenGL，你可以使用[ANGLE](https://code.google.com/p/angleproject/)项目，它是一个建立在 DirectX 之上的 OpenGL API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T14:19:43.270

*Windows Phone尚不*支持 OpenGL ，但据 Marmalade 称，他们将在“2013 年初”为 Windows Phone 8 和 Windows 8 提供 OpenGL ES。

在以下链接阅读他们的公告并下载 Marmalade 以在可用时获得通知：http: [//www.madewithmarmalade.com/windows8? utm_source=fronpage-carousel&utm_medium=site-internal&utm_campaign=windows8-announce](http://www.madewithmarmalade.com/windows8?utm_source=fronpage-carousel&utm_medium=site-internal&utm_campaign=windows8-announce)

请注意，果酱不是免费的——即使是社区版也是 149 美元/座/年。

# php - 作业跟踪的批处理通知

> ID：15378266
> 
> 赞同：4
> 
> 时间：2013-03-13T06:13:14.347
> 
> 标签：php, mysql

目前我们正在使用三个嵌套的 foreach 循环来获取运行批处理的信息。但是，我相当确定我们可以使用带有连接和子查询的单个 MySQL 语句来获取信息。

我们有大约 30 个类别，有 2000 个用户。我们的目标是大约 100 个类别和 100000 个用户，但显然 foreach 循环并不理想（即使现在它们需要大约一分钟才能运行）。

**情况：** 用户希望在某个区域有可用于交易的工作时收到通知

**目标：** 要放入发件箱的批处理（每日、每周等）通知

**技术：** PHP、MySQL

**到目前为止我所拥有的：**

**数据库：**

```
 "table.notification_options" : [id][user_id][category]
 "table.user" : [id][user_id][method_of_contact][contact_frequency][center_of_work_area_long][center_of_work_area_lat][distance_from_center]
 "table.work" : [id][post_date][longitude][latitude][category] 
```

**代码：**

```
foreach user{
    foreach category tracked{
        foreach job in category posted <> $current_date-$batch_frequency{
            if job inside workspace{
                notify_user(job);
            }
        }
   }
} 
```

期望的结果是一个 job_ids 数组，其中 user_id 作为键 [user_id]=>{jobs}

**例如**

```
 {
        [user1]{
                 job1,
                 job4,
                 job28
               },
        [user34]{
                 job3,
                 job4,
                 job34,
                 job78
                }
     { 
```

**编辑：**

我可以更高效地为一个用户选择所有作业。但它仍然需要一个 foreach 用户。

```
 $category_id = get_category_from_notification_options($userid);
   $user_distance = get_user_work_distance($userid);
    "SELECT DISTINCT work.ID as workID, ( 6371 * acos( cos( radians(-46.409939) ) * cos( radians( jobs.lat ) ) * cos( radians( jobs.lng ) - radians(168.366180) ) + sin( radians(-46.409939) ) * sin( radians( jobs.lat ) ) ) ) 
        AS distance 
        FROM work,user
        WHERE work.categoryID == $category_id
        HAVING distance < $user_distance
        ORDER BY distance"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T14:45:19.270

在我看来，您获取的距离似乎是从用户表中获取的（distance_from_center 字段？）

```
SELECT DISTINCT ser.user_id, work.ID as workID, ( 6371 * acos( cos( radians(-46.409939) ) * cos( radians( jobs.lat ) ) * cos( radians( jobs.lng ) - radians(168.366180) ) + sin( radians(-46.409939) ) * sin( radians( jobs.lat ) ) ) ) AS distance 
FROM notification_options
INNER JOIN jobs ON notification_options.category = jobs.category
INNER JOIN user ON notification_options.user_id = user.user_id
HAVING distance < user.distance_from_center
ORDER BY distance 
```

编辑-如果您只想按距离顺序为每个用户列出工作列表（如果需要，您可以分解为一个数组以在 php 中进行处理-尽管可能更容易使用上述查询来构建数组），那么您可以使用像这样的东西： -

```
SELECT user_id, GROUP_CONCAT(workID ORDER BY distance)
FROM (
SELECT DISTINCT ser.user_id, work.ID as workID, ( 6371 * acos( cos( radians(-46.409939) ) * cos( radians( jobs.lat ) ) * cos( radians( jobs.lng ) - radians(168.366180) ) + sin( radians(-46.409939) ) * sin( radians( jobs.lat ) ) ) ) AS distance 
FROM notification_options
INNER JOIN jobs ON notification_options.category = jobs.category
INNER JOIN user ON notification_options.user_id = user.user_id
HAVING distance < user.distance_from_center) Sub1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T09:59:15.020

我认为您应该以相反的方式进行操作以提高效率。下面我将向您展示我用来创建查询的过程。所以只有最后的查询是你需要的。但我解释了这些步骤，所以它可能会在未来帮助你。

First I would select all jobs. Most likely there are a lot less jobs then users if your goal is 100.000 users.

```
select JOB.id, JOB.category
FROM table.work JOB 
```

Now we have all the jobs, lets see which users want to be notified about it.

```
select JOB.id, JOB.category, NOTIFY.user_id
FROM table.work JOB
LEFT JOIN table.notification_options NOTIFY
ON JOB.category=NOTIFY.category
WHERE NOTIFY.user_id IS NOT NULL 
```

This creates a list with for each job, all the userID's that want to be notified about it. I added the `WHERE` clause to remove all jobs from the list nobody wants to see. Now we can `JOIN` the users table to get user details aswell.

```
select JOB.id
     , JOB.post_date
     , JOB.longitude
     , JOB.latitude
     , USR.user_id
     , USR.method_of_contact
     , USR.contact_frequency
     , USR.center_of_work_area_long
     , USR.center_of_work_area_lat
     , USR.distance_from_center
     , ((ACOS(SIN(USR.center_of_work_area_lat * PI() / 180) * SIN(JOB.latitude * PI() / 180) + COS(USR.center_of_work_area_lat * PI() / 180) * COS(JOB.latitude * PI() / 180) * COS((USR.center_of_work_area_long – JOB.longitude) * PI() / 180)) * 180 / PI()) * 60 * 1.1515) AS `distance`
FROM table.work JOB
LEFT JOIN table.notification_options NOTIFY
ON JOB.category=NOTIFY.category
LEFT JOIN table.user USR
ON NOTIFY.user_id=USR.user_id
WHERE NOTIFY.user_id IS NOT NULL
HAVING `distance`<=USR.distance_from_center
ORDER BY USR.user_id ASC, distance ASC 
```

I included the distance in the query. Notice that I use `HAVING` to check if the distance is smaller then the user supplied. If you would add it to the `WHERE` clause you would get an error saying `distance` is an unknown column. I also added the `ORDER BY` class to first sort it on user ID and then on distance. This will make it easier to create the array you want in PHP.

Now there are a lot of ways to implement the daily/weekly intervals. One of them is to create seperate scripts for each interval and only select the users that set it. For example, you could create a script 'daily.php' which you run each day and have the following query

```
select JOB.id
     , JOB.post_date
     , JOB.longitude
     , JOB.latitude
     , USR.user_id
     , USR.method_of_contact
     , USR.contact_frequency
     , USR.center_of_work_area_long
     , USR.center_of_work_area_lat
     , USR.distance_from_center
     , ((ACOS(SIN(USR.center_of_work_area_lat * PI() / 180) * SIN(JOB.latitude * PI() / 180) + COS(USR.center_of_work_area_lat * PI() / 180) * COS(JOB.latitude * PI() / 180) * COS((USR.center_of_work_area_long – JOB.longitude) * PI() / 180)) * 180 / PI()) * 60 * 1.1515) AS `distance`
FROM table.work JOB
LEFT JOIN table.notification_options NOTIFY
ON JOB.category=NOTIFY.category
LEFT JOIN table.user USR
ON NOTIFY.user_id=USR.user_id
WHERE NOTIFY.user_id IS NOT NULL
AND USR.contact_frequency = 'daily'
HAVING `distance`<=USR.distance_from_center
ORDER BY USR.user_id ASC, distance ASC 
```

Now we have the query, lets create the PHP code for it. We can loop trough all the rows and create the array. Obviously instead of creating the array you could also directly process the result. Because if you create an array first, you do need to loop trough that array again afterwards.

```
<?php
$arNotify = array();
foreach ($queryresult as $row) {
  $userid = $row->user_id;
  $jobid = $row->id;

  //check if there is an entry for the user in the database, else create it
  if (!array_key_exists($userid, $arNotify))
    $arNotify[$userid] = array();

  //and then push the job
  $arNotify[$userid][] = $jobid;

  //the array is being created, but I still like to process the job directly
  //notify_user($userid, $jobid);

}

var_dump($arNotify);
?> 
```

There you go, the array as you want with the jobs sorted on closest first.

# javascript - 如何从 gmail 中检索用户名/登录名？

> ID：15378267
> 
> 赞同：0
> 
> 时间：2013-03-13T06:13:20.347
> 
> 标签：javascript, authentication, google-api, oauth-2.0

我正在使用谷歌登录自定义网站。在这里我为它写了代码

```
var sOAuthServiceEndPoint = "https://accounts.google.com/o/oauth2/auth?scope=http://gdata.youtube.com https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email&response_type=token&";
var sOAuthRedirectURL = "http://example.com/testpage/test.html";
var termsAndCondURL = "termsandcondition.html";
var sOAuthClientID = "294016263542.apps.googleusercontent.com"; 
var sAuthenticationURL = sOAuthServiceEndPoint + "redirect_uri=" + sOAuthRedirectURL + "&client_id=" + sOAuthClientID; 
```

即使我使用以下功能获得了访问令牌

```
 function fnOnLoad() {
      //alert("Form Loaded");
      var sAccessToken = '';
      var params = {}, queryString = location.hash.substring(1),regex = /([^&=]+)=([^&]*)/g, m;
      while (m = regex.exec(queryString)) {
            params[decodeURIComponent(m[1])] = decodeURIComponent(m[2]);
        }
        if(params.error){
            if(params.error == "access_denied"){
                sAccessToken = "access_denied";
                alert(sAccessToken);
            }
        }else{
                sAccessToken = params.access_token;
                alert(sAccessToken);
        }
        window.opener.fnAuthorisationSuccess(sAccessToken);
        window.close();
    } 
```

它工作成功并重定向到我想要的其他页面。但我的问题是如何检索用户登录名..？

我正在为此使用javascript。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T06:40:44.603

这可以在[文档](https://developers.google.com/accounts/docs/OAuth2Login#userinfocall)中找到。

> 在您的应用程序获取访问令牌并（如有必要）对其进行验证后，您可以在向 Google API 发出请求时使用该访问令牌。如果访问令牌请求中包含[https://www.googleapis.com/auth/userinfo.profile](https://www.googleapis.com/auth/userinfo.profile)范围，则您可以使用访问令牌通过调用 UserInfo 端点获取用户的基本配置文件信息。
> 
> **端点：** `https://www.googleapis.com/oauth2/v1/userinfo`
> 
> 返回基本的用户配置文件信息，包括姓名、用户 ID、性别、出生日期、照片、区域设置和时区。如果请求中存在[https://www.googleapis.com/auth/userinfo.email](https://www.googleapis.com/auth/userinfo.email)范围，则响应中也将存在用户的电子邮件。如果电子邮件已经过验证，那么还有一个字段表明该电子邮件是经过验证的地址。

# javascript - 创建 DOM 元素和追加的替代编写方法

> ID：15378271
> 
> 赞同：0
> 
> 时间：2013-03-13T06:13:44.177
> 
> 标签：javascript, jquery, dom

如果我想在文档中附加一个带有我的图片的按钮，我会写：

```
$('#story_pages').append('<div><button value="'+window_value+'" onclick="reload_to_canvas(this.value)" > <img id= "w'+window_value+'", src="../pic/white_img.png", width="110px", height="110px"/> </button></div>'); 
```

它太长且难以调试。但是我怎样才能创建一个 img 标签，然后用一个按钮标签和 div 标签包装它......

请在 jQuery 的帮助下提出任何清晰简单的方法。

**更新**：story_pages 是 jQuery UI 对话框的 ID。不知道有没有影响。

**更新：** 我发现了问题。我想要按钮上显示的图像而不是按钮和图像。

你给我的脚本将导致：

```
<div>
<button value="1"></button>
<img ......./>
</div> 
```

img 标签必须由按钮标签包裹，例如：

```
<button>
    <img.../>
</button> 
```

所以图像将**附加**在按钮上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T06:20:45.297

这个怎么样：

```
var $button = $('<button>', {
  value: window_value,
  click: function() { reload_to_canvas(this.value); }
});

var $img = $('<img>', {
  id : 'w'+ window_value,
  src: '../pic/white_img.png'
})
.css({ height: '100px', width: '100px'});

$('#story_pages').append($('<div>').append($button, $img)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T06:22:00.073

> 如果一个字符串作为参数传递给 $()，jQuery 会检查该字符串是否看起来像 HTML（即，它以 开头）。如果不是，则字符串被解释为选择器表达式，如上所述。但是如果字符串看起来是一个 HTML 片段，jQuery 会尝试按照 HTML 的描述创建新的 DOM 元素。然后创建并返回一个引用这些元素的 jQuery 对象。

试试这个

```
 var div=$('<div>'); // creates new div element

  //updated here
  var img = $('<img />') .attr({   // create new img elementand adds the mentioned attr
                   id:'w'+window_value , 
                   src:"../pic/white_img.png",
                   width:"110px", 
                   height:"110px"});

  var button= $('<button/>',  //creates new button
  {   
    value: window_value,  //add text to button
    click: function(){ reload_to_canvas(this.value)} //and the click event
  }).html(img);   /// and <-- here... pushed the created img to buttons html

 div.append(button); //append button ,img to div
 $('#story_pages').append(div);   //finally appends div to the selector 
```

[更新的示例小提琴](http://jsfiddle.net/bipen/4rB3y/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T07:12:05.560

```
$('#story_pages').append(
    $('<div>').append(
        $('<button>', {
            value : window_value
        }).click(function() {
            reload_to_canvas(this.value);
        }).append(
            $('<img>', {
                id : 'w' + window_value,
                src : '../pic/white_img.png'
            }).width(110)
              .height(110)
        )
    )
); 
```

# php - 根据星期几自动显示自定义 Wordpress 分类标签？

> ID：15378274
> 
> 赞同：1
> 
> 时间：2013-03-13T06:14:02.617
> 
> 标签：php, wordpress

我有一个客户想在 Wordpress 中按星期几自动显示自定义分类标签。基本上，我们将有一个名为“产品”的自定义帖子类型，并将有一个名为“日”的分类。在“day”中，我们将有七个标签，一个用于一周中的每一天，任何带有一周中特定日期的标签都将显示在主页上的那一天。

因此，例如，如果产品 A、B 和 C 在分类“day”中都被分配了一个标签“Wednesday”并且今天是星期三，那么这些项目将显示在主页上。如果产品 D、E 和 F 分配到星期四，它们将在星期四出现，依此类推。

尽管如此，我需要帮助的部分是编写一个循环，可以检测星期几，然后查询正确的分类标记。有谁知道该怎么做？我真的找不到这方面的任何参考资料，而且我的 PHP 技能充其量只是初级。：-/

这是我目前用来按自定义帖子类型、分类和术语手动显示产品的循环：

```
<?php query_posts('post_type=products&taxonomy=day&term=wednesday&posts_per_page=10'); ?>
<?php if(have_posts()) : while (have_posts() ) : the_post(); ?>
<div class="archivecustompost">
<div class="archivecustomleftblock">
<a href="<?php the_permalink() ?>" rel="bookmark"><?php the_post_thumbnail( array(150,150) ); ?></a>
</div>
<div class="archivecustomrightblock">
<h2><?php the_title(); ?></h2>
<?php the_excerpt(); ?>
<p class="button"><a href="<?php the_permalink() ?>" rel="bookmark">Learn More</a></p>
</div>
</div>
<?php endwhile; endif; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T06:34:00.163

你应该尝试这样的事情，

使用**WP_Query**

```
$day = date("l"); // Gives the todays day.
$wpq = array (post_type =>'product','taxonomy'=>'day','term'=>$day);
$query = new WP_Query ($wpq); 
```

使用**query_post**：

```
$day = date("l");
$args = 'post_type=products&taxonomy=day&term='.$day.'&posts_per_page=10';
query_posts($args); 
```

# android - 如何在android中进行SOAP解析列表

> ID：15378278
> 
> 赞同：3
> 
> 时间：2013-03-13T06:14:29.063
> 
> 标签：android, parsing, soap

我有文本视图 Java 代码和肥皂。

但我想要一个ListView。如何在 Android 中解析肥皂列表。

SOAP 1.1 请求和响应

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
<soap:Body>
<HelloWorldResponse xmlns="http://tempuri.org/">
  <HelloWorldResult>
    <FormModel>
      <Text1>string</Text1>
      <Text2>string</Text2>
      <Text3>string</Text3>
    </FormModel>
    <FormModel>
      <Text1>string</Text1>
      <Text2>string</Text2>
      <Text3>string</Text3>
    </FormModel>
  </HelloWorldResult>
</HelloWorldResponse>
</soap:Body>
</soap:Envelope> 
```

我正在连接到在线网络服务。帮助我如何使用 Ksoap2 解析 xml。

解析soap，就像只显示列表中的数据一样。

邮件.java

```
public class Main extends Activity {

private static String SOAP_ACTION = "http://tempuri.org/HelloWorld";

private static String NAMESPACE = "http://tempuri.org/";
private static String METHOD_NAME = "HelloWorld";

private static String URL = "http://sygnetinfosol.com/webservice.asmx?WSDL";

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    //Initialize soap request + add parameters
    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);        

    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope.setOutputSoapObject(request);

    // Make the soap call.
    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
    try {

        //this is the actual part that will call the webservice
        androidHttpTransport.call(SOAP_ACTION, envelope);        
    } catch (Exception e) {
        e.printStackTrace(); 
    } 

    // Get the SoapResult from the envelope body.       
    SoapObject result = (SoapObject)envelope.bodyIn;

    if(result != null){
        TextView t = (TextView)this.findViewById(R.id.resultbox);
        t.setText("SOAP response:\n\n" + result.getProperty(0).toString());
    }

}
} 
```

日志猫

```
03-13 06:50:57.077: I/Choreographer(2933): Skipped 114 frames!  The application may be doing too much work on its main thread.
03-13 06:50:57.669: I/Choreographer(2933): Skipped 82 frames!  The application may be doing too much work on its main thread.
03-13 06:50:57.787: I/Choreographer(2933): Skipped 91 frames!  The application may be doing too much work on its main thread.
03-13 07:16:37.837: E/Trace(3374): error opening trace file: No such file or directory (2)
03-13 07:16:39.008: I/System.out(3374): MY SOAP RESPONE ISanyType{FormModel=anyType{Text1=12.9174948; Text2=77.5989675; Text3=JayDeva Hospital,Karnataka,Bangalore,India; }; FormModel=anyType{Text1=12.9274529; Text2=77.590597; Text3=9th Block,Central Mall,Jayanagar,Karnataka,Bangalore,India; }; FormModel=anyType{Text1=12.9285212; Text2=77.5834339; Text3=Jayanagar 4th Block,Karnataka,Bangalore,India; }; FormModel=anyType{Text1=12.961085; Text2=77.60469269; Text3=BTM Layout,Richmod Towr,Karnataka,Bangalore,India; }; }
03-13 07:16:39.117: D/dalvikvm(3374): GC_CONCURRENT freed 177K, 11% free 2590K/2908K, paused 80ms+5ms, total 201ms
03-13 07:16:39.438: I/Choreographer(3374): Skipped 347 frames!  The application may be doing too much work on its main thread.
03-13 07:16:39.458: D/gralloc_goldfish(3374): Emulator without GPU emulation detected.
03-13 07:16:39.638: I/Choreographer(3374): Skipped 44 frames!  The application may be doing too much work on its main thread.
03-13 07:16:40.437: I/Choreographer(3374): Skipped 74 frames!  The application may be doing too much work on its main thread. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T06:43:06.053

试试下面的链接

[http://android.vexedlogic.com/2011/04/30/android-lists-v-accessing-and-sumption-a-soap-web-service-ii/](http://android.vexedlogic.com/2011/04/30/android-lists-v-accessing-and-consuming-a-soap-web-service-ii/)

合适的代码试试这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T06:35:19.497

你可以参考下面的链接，它解释了如何用 ksoap 处理复杂的对象数组：

[http://seesharpgears.blogspot.in/2010/10/web-service-that-returns-array-of.html](http://seesharpgears.blogspot.in/2010/10/web-service-that-returns-array-of.html)

在这个例子中，他解释了如何从肥皂响应中获取对象列表，

之后，如果您想在列表视图中显示数据，可以将该列表传递给您的列表视图

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T14:12:46.857

尝试使用“androidHttptransport.responseDump”，因为它提供 xml 格式并使用 Dom Parser 解析 responsedump 并根据需要放入 listView。

```
 String response = androidHttpTransport.responseDump;
        DocumentBuilderFactory dbf = DocumentBuilderFactory
                    .newInstance();

            db = dbf.newDocumentBuilder();
            InputSource is = new InputSource();
            is.setCharacterStream(new StringReader(response));

            doc = db.parse(is);
            doc.getDocumentElement().normalize();
            // Node hh=doc.getElementsByTagName("hhCompany").item(0).;

            org.w3c.dom.Element ee = doc.getDocumentElement(); 
```

# ios - 如何从 UIView 的某些部分删除边框？

> ID：15378290
> 
> 赞同：6
> 
> 时间：2013-03-13T06:15:22.337
> 
> 标签：ios, uiview, calayer

我有一个`UIView`包含其他子视图的。我正在对此应用边框，`UIView`并且边框将应用于整个`UIView`. 为此，请参见第一张图片。

![在此处输入图像描述](../Images/9850e561e57f19ea454dbc4deac0267d.png)

但不希望在标题周围出现边框`"Leaderboard"`。我怎样才能只删除该部分的边框。请参见下图，其中看到标题排行榜周围没有边框。

![在此处输入图像描述](../Images/816fb404b3ce1b378b9f446cebd42180.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T06:29:41.130

不，`CALayer`边框不支持这种行为。

但是，如果您需要实现此功能，您可以尝试另一种方法，尝试在主视图的每一侧添加一个 n 点宽的不透明子视图，并将所需的边框颜色作为其背景颜色。

添加此代码：

```
CGSize mainViewSize = theView.bounds.size;
CGFloat borderWidth = 2;
UIColor *borderColor = [UIColor redColor];
CGFloat heightfromTop = 25;
UIView *leftView = [[UIView alloc] initWithFrame:CGRectMake(0, heightfromTop borderWidth, mainViewSize.height-heightfromTop)];
UIView *rightView = [[UIView alloc] initWithFrame:CGRectMake(mainViewSize.width - borderWidth, heightfromTop, borderWidth, mainViewSize.height-heightfromTop)];
leftView.opaque = YES;
rightView.opaque = YES;
leftView.backgroundColor = borderColor;
rightView.backgroundColor = borderColor;

[mainView addSubview:leftView];
[mainView addSubview:rightView]; 
```

这只会在两侧添加边框。对顶部和底部也重复相同的想法。

**注意**：`heightfromTop`是您不希望出现边框视图的顶部的高度，您可以根据需要更改它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T06:41:01.213

您可以子类化`UIView`并实现`drawRect`类似：

```
- (void)drawRect:(CGRect)rect
{       
      float borderSize = 3.0f;

     //draw the bottom border
     CGContextSetFillColorWithColor(context, [UIColor blueColor].CGColor);
     CGContextFillRect(context, CGRectMake(0.0f, self.frame.size.height - borderSize, self.frame.size.width, borderSize));

     //draw the right border
    CGContextSetFillColorWithColor(context, [UIColor blueColor].CGColor);
    CGContextFillRect(context, CGRectMake(0.0f,0.0f, borderSize,self.frame.size.height));

     //draw the left border 
    CGContextSetFillColorWithColor(context, [UIColor blueColor].CGColor);
    CGContextFillRect(context, CGRectMake(self.frame.size.width - borderSize,0.0f, borderSize,self.frame.size.height));
} 
```

现在，您需要使用子类`UIView`来创建所需的视图。

# gtk - 我可以用 glade 开发一个动态 GUI 吗？

> ID：15378291
> 
> 赞同：2
> 
> 时间：2013-03-13T06:15:23.027
> 
> 标签：gtk, glade

这是一个新手问题，所以请原谅我，但我很困惑。

假设，作为一个简单的例子，我希望有一个 GUI，它有一个按钮，可以根据需要向界面添加一些组件（比如文件选择器小部件）。（如果您希望更务实地思考，也许还有另一个按钮可以删除最后一个）。我将如何使用 glade 设计这样的东西？有什么办法可以让按钮在林间空地本身“工作”？

我的猜测是我只能设计默认界面，然后手动负责添加和删除组件的回调。然而，我的 GUI 在 Glade 内将是静态的，因此我只能在运行时对其进行测试。这是基本的想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:06:49.440

你是对的，没有办法测试 glade 本身的回调，你只能在运行时测试它。

# regex - 如何用空格替换 G？

> ID：15378294
> 
> 赞同：0
> 
> 时间：2013-03-13T06:15:39.233
> 
> 标签：regex, perl

我必须检查磁盘卷上的可用空间并使用命令`df -h`，它会产生以下输出：

```
Filesystem            Size  Used Avail Use% Mounted on
/dev/md0               27G   24G  2.1G  92% /
udev                  506M  112K  506M   1% /dev
/dev/sda1             102M   40M   63M  39% /boot 
```

这段脚本

```
my (@space, @freesp);
@space = grep /\/dev\/md0/,`df -h`;
print "@space\n"; 
```

在给我

```
/dev/md0               27G   24G  2.1G  92% / 
```

我可以在空格上拆分，给出中的值`$freesp[0]`，`$freesp[1]`等等。

但我想`G`用空格删除或替换它，以便我可以`$freesp[3]`与某个值进行比较并继续执行我的脚本。

那么我必须使用什么正则表达式来实现这一点，或者有没有其他更好的方法来做到这一点？

这段代码对我有用，但我正在寻找我提到的方向。

```
#!/usr/bin/perl

use strict;
use warnings;

my (@space, @freesp);

@space = grep /\/dev\/md0/, `df`;

print "@space\n";

for (@space) {
    chomp;
    @freesp = split /\s+/, $_;
}

if ($freesp[3]/1024/1024 < 2.0) {
    print "Space is less\n";
}
else {
    print "Space is OK\n";
}

#print ($freesp[3]/1024/1024); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-13T06:22:56.320

如果您打算使用脚本解析输出，真正的解决方案是[不使用该`-h`选项。`df`](http://linux.die.net/man/1/df)这样一来，输出就不会首先包含“人类可读” `K`//后缀`M`。`G`

您可能希望改用该`-B1`选项，这会导致所有大小都以字节为单位报告。

* * *

**编辑：**要回答字面问题，您*可以*删除后缀并适当地重新调整值，如下所示：

```
my %units = (K => 2**10, M => 2**20, G => 2**30, T => 2**40,
             P => 2**50, E => 2**60, Z => 2**70, Y => 2**80);

s/^(\d+(?:\.\d+)?)([KMGTPEZY])$/$1 * $units{$2}/e for @freesp[1 .. 3]; 
```

但是，使用`-B1`switch 而不是`-h`更容易得到相同的结果，更不用说更准确和可靠了。

# javascript - setTimeout() 不会延迟

> ID：15378302
> 
> 赞同：1
> 
> 时间：2013-03-13T06:16:16.317
> 
> 标签：javascript

我在我的[网站](http://www.fbstatussearch.com) `setTimeout()`中使用以下一段 JavaScript不会将函数调用延迟`5`几秒钟。

```
function myFunction() {
    param = $('#search').val();
    //alert("I am an alert box!");
    if (param != "") {
        $("#status").show();
        //alert("Show ");
        var u = 'https://graph.facebook.com/search/?callback=&limit=5&q='+param;
        $("#data").empty();     
        alert("Wait for 5 sec?");
        setTimeout(getResults(u),50000);    // this line
        //getResults(u);
        //alert("When myFunction runs show more line 20");
        $("#more").show(); 
        }

    $("#more").click(function () { 
    $("#status").show();
    //alert("Show ");
    $("#more").hide();  
    pageTracker._trackPageview('/?q=/more');
    var u = nexturl;
    getResults(u);
  });
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T06:17:17.843

您正在调用函数本身而不是传递一个函数`setTimeout`来调用，请尝试

```
 setTimeout(function(){
    getResults(u);
 },5000);//note time is in miliseconds, so 5 seconds is 5000 not 50000 
```

代替`setTimeout(getResults(u),50000);`

我创建了一个[小小提琴](http://jsfiddle.net/akqJJ/)来说明这是如何工作的。

这是[MDN 文章](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)关于`setTimeout`. 它有很好的例子来说明它是如何工作的。

# c++ - 序列化指针本身而不是目标对象

> ID：15378306
> 
> 赞同：0
> 
> 时间：2013-03-13T06:16:31.407
> 
> 标签：c++, boost, boost-serialization

我有一个要使用 boost 序列化程序保存和加载的数据类。

该类包括两个成员`En *sender`，`En *receiver`两个对象已在我的系统中创建。我不需要再次创建它们。我只需要发送（序列化）它们的`address`, 以用作另一端的参考。

`En *sender`如果我使用像,这样的普通指针 `En *receiver`，boost 将序列化整个对象（我不想要）。

所以我想我应该使用`En **sender`，`En **receiver` 这会产生错误。我可以知道我应该如何修改课程以达到我的目的吗？

非常感谢。

```
class dataMessage
{

    friend class boost::serialization::access;
    template<class Archive>
    void serialize(Archive &ar, const unsigned int version)
    {            
        ar & sender;
        ar & receiver;
    }
    //I figured I should user pointer to pointer coz in case of the normal pointer,
    //the serilizer would serializes the object that the pointer is pointing to;
    //whereas I just need to save the 'pointer' to object so that we
    //can use it as a reference at the other end.
    En **sender;
    En **receiver;
public:
    dataMessage(){
        sender = receiver = 0;
    }
    void setDataClassType();
    virtual void registerType(boost::archive::text_oarchive &oa)
    {
        oa.register_type(static_cast<dataMessage *>(NULL));
    }

    virtual void registerType(boost::archive::text_iarchive &ia)
    {
        ia.register_type(static_cast<dataMessage *>(NULL));
    }
}; 
```

部分错误：

```
error: request for member ‘serialize’ in ‘t’, which is of pointer type ‘En*’ (maybe you meant to use ‘->’ ?) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T10:15:30.713

似乎没有办法手动存储地址，否则 boostserializer 将序列化目标对象。所以我将发送者接收者类型修改为：

```
class dataMessage
{

 //......
public:
//.....
    //a proper size of integer is used coz in case of the normal pointer,
    //the serilizer serializes the object that the pointer is pointing to
    //whereas we just need to save the 'pointer' to object so that we
    //can use it as a reference at the other end. so instead of storing 'sim_mob::Entity *'
    //we store:
#if __x86_64__  //64 bit
    unsigned long sender;
    unsigned long receiver;
#else          //32 bit
    unsigned int sender;
    unsigned int receiver;

#endif

    dataMessage(){
        sender = receiver = 0;
    }
//...
}; 
```

稍后在使用指针时，我将对适当的指针类型进行简单的转换。

# jsf - primefaces弹出窗口关闭

> ID：15378307
> 
> 赞同：0
> 
> 时间：2013-03-13T06:16:32.960
> 
> 标签：jsf, primefaces

我必须在 primefaces 对话框中实现搜索功能。提交搜索命令按钮后，搜索旁边的表格需要更新。但是每次我点击搜索按钮时，弹出窗口都会关闭。请指导。以下是我的代码片段供参考：

```
 ......
  <p:commandButton id="search" value="Search" actionListener="#{createTicketBaseBean.searchUserFromList}" update="@form" onclick="dlg.show()"></p:commandButton>

       </h:panelGrid>

    </h:panelGroup> 
<h:panelGroup style="float:right" >

       <p:dataTable id="table" var="user" value="#{createTicketBaseBean.userList}" selection="#{createTicketBaseBean.selectedUser}" selectionMode="single" rowKey="#{user.email}" >
        <p:column headerText="Name"   >

       <p:commandLink id="nameselect" value="#{user.name}" onclick="dlg.hide()"/>  

        </p:column>

        <p:column headerText="Email">
            <h:outputText value="#{user.email}" />
        </p:column>

        <p:column headerText="Department">
            <h:outputText value="#{user.department}" />
        </p:column>

    </p:dataTable> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T09:05:42.097

`onclick`在你的替换`p:commandbutton`为`oncomplete`. `onclick`单击按钮时立即发生事件。由于这是 AJAX 按钮（在 Primefaces 中这是默认设置），因此在 AJAX 请求和对话框打开之间会有竞争条件。使用`oncomplete`时会在 AJAX 请求完成后调用。

# jquery - 使用javascript自动刷新div

> ID：15378310
> 
> 赞同：0
> 
> 时间：2013-03-13T06:16:35.970
> 
> 标签：jquery, joomla2.5

**情况**我正在尝试自动刷新在 Joomla 2.5 的文章中定义的标签

```
 <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.0/jquery.min.js">         </script> 
     <script> 
     var auto_refresh = setInterval(
     function()
     {
     alert("testing");
     $('#results').fadeOut('slow').load('#results').fadeIn("slow");
     }, 20000);
     </script-->

     <div id="results">
     {szakitable  csv = "http://127.0.0.1/msedcl/Archives/status2.csv" csvseparator=","  width= 430}
     {/szakitable}
     </div> 
```

上面的代码使用了一个名为 szaki 表的扩展，它允许将 csv 文件直接嵌入到文章中。我要求 div 应该每 20 秒重新加载一次，以便在 csv 文件中所做的更改反映在网页上。 **问题**当我调用 "$('#results').fadeOut('slow').load('#results').fadeIn("slow");" 发生的是整个页面在 div 区域内重新加载。这不是我需要的。

请有任何建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T06:25:54.593

### 你试过这个吗？

```
$('#results').fadeOut('slow').load('{current_page.html} #results').fadeIn("slow"); 
```

将 {current_page.html} 替换为文档的文件名

### 使用回调的另一种方式

```
$('#results').fadeOut('slow', function(){
    $(this).load('index.html #results').fadeIn("slow")
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T06:45:10.063

需要查看`.load()`才能将外部数据从其他页面加载到当前页面而不刷新整个页面。

当我看到您的代码时，您正在加载`#results`根本不起作用的 div。

## 从文档：

### `Loading Page Fragments:`

这`.load() method, unlike $.get(), allows us to specify a portion of the remote document to be inserted.`是通过 url 参数的特殊语法实现的。如果字符串中包含一个或多个空格字符，则假定字符串中第一个空格之后的部分是确定要加载的内容的 jQuery 选择器。

### `example:`

```
$('#result').load('ajax/test.html #container'); 
```

这将加载的是 this`gets the test.html`并将其加载到当前页面`find the element with id of container`的元素内。`result`

* * *

## 所以在你的情况下：

```
var auto_refresh = setInterval(function(){
   alert("testing");
   $('#results').fadeOut('slow').load('targetpage.php #results').fadeIn("slow");
 }, 20000); //-------------------------^^^^^^^^^^^^^^---required 
```

或者，如果您以其他方式加载它，那么您可以这样做：

```
$('#results').fadeOut('slow').fadeIn("slow"); 
```

# ruby - RVM 安装错误（没有校验和.. 无法验证它）

> ID：15378312
> 
> 赞同：10
> 
> 时间：2013-03-13T06:16:43.413
> 
> 标签：ruby, rubygems, rvm

在运行命令时

```
rvm install 1.9.2    # or 1.9.3 or 2.0.0 all report the same. 
```

我收到以下错误：

> [“ http://production.cf.rubygems.org/rubygems/rubygems-1.8.25.tgz](http://production.cf.rubygems.org/rubygems/rubygems-1.8.25.tgz) ”或“rubygems-1.8.25.tgz”没有校验和，无法验证。如果您希望继续进行未经验证的下载，请在命令后添加“--verify-downloads 1”。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-13T07:36:12.087

您需要更频繁地更新 RVM：

```
rvm get stable # OR:
rvm get head 
```

它不仅会更新 RVM 代码，还会更新所有`ruby`和`rubygems`定义，包括 ruby​​gems 的校验和。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-13T06:16:43.413

哈，我只需要更新 RubyGems！

```
gem update --system 
```

# r - R 是一种资源匮乏的语言吗？

> ID：15378316
> 
> 赞同：1
> 
> 时间：2013-03-13T06:17:16.440
> 
> 标签：r, resources, bigdata

我从很多人那里听说，**R**是为处理 PB 级数据而构建的。然而，另一方面，我也经常听到，如果你想处理例如 8 GB 的数据，你最好有至少 8 GB 的内存，否则你会遇到一些问题。

我的问题是，如果我需要处理 20 GB 的数据（我认为这在许多项目中相当普遍），我`Memory`还`Processor`需要多少？如果您以前有任何经验，我很高兴知道 2 PB 的数据应该如何处理。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T06:37:11.510

我认为你不能一次用任何语言处理 2 PB 的数据（也许你可以使用一些特定的软件和/或硬件）。始终需要并行解决方案或小块加工。在 R 中，对象存储在虚拟内存中，因此您可以在 R 中同时拥有多少数据有一个明确的限制。检查[R 中的内存限制](http://stat.ethz.ch/R-manual/R-devel/library/base/html/Memory-limits.html)。

# android - 来自测试应用程序的隐含意图

> ID：15378322
> 
> 赞同：0
> 
> 时间：2013-03-13T06:17:34.753
> 
> 标签：android, android-intent

我是android的隐式意图部分的新手。

在我的应用程序中，我注册了如下意图：

```
<activity
    android:name="ihpc.mocha.fakertt.view.MainActivity"
    android:label="@string/app_name"
    android:screenOrientation="reverseLandscape" >

    <intent-filter>

        <action android:name="android.intent.action.MAIN" />

        <category android:name="android.intent.category.LAUNCHER" />

        <data
            android:host="mocha"
            android:path="/RTT/reset"
            android:scheme="content" />
    </intent-filter>

</activity>
<activity
    android:name="ihpc.mocha.fakertt.view.SessionTimeOutActivity"
    android:label="@string/app_name"
    android:screenOrientation="reverseLandscape" >

    <intent-filter>

        <action android:name="android.intent.action.VIEW" />

        <category android:name="android.intent.category.DEFAULT" />

        <data
            android:host="mocha"
            android:path="/RTT/sessionTimeOut"
            android:scheme="content" />
    </intent-filter>

</activity> 
```

现在我想从一些测试应用程序中触发这些意图，但我不知道如何实现？我尝试用谷歌搜索，但找不到合适的解决方案。请建议这样做的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T06:27:33.843

您的意图过滤器将使用“android.intent.action.VIEW”键捕获所有意图。因此，如果任何应用程序发送带有此意图的意图，您的应用程序将收到。要从另一个测试应用程序测试，试试这个

```
intent = new Intent("android.intent.action.VIEW");
// if needed put some extra data
startActivity(intent); 
```

# java - 将 Java 代码添加到工作灯适配器

> ID：15378323
> 
> 赞同：0
> 
> 时间：2013-03-13T06:17:35.457
> 
> 标签：java, ibm-mobilefirst, worklight-adapters

我需要从工作灯适配器调用 Java 函数。我遵循了“将 Java 添加到工作灯适配器”文档，但我的问题没有得到解决。我无法调用该函数。

我拥有的Java代码的结构如下：

```
server/java
com.worklight.custonmode           package name
loginfunction.java                     java 
login                              java method in class loginfunction 
```

从适配器，我打电话：

```
function loginmodules(username, passwd) {   
    return {
        result : com.worklight.custonmode.loginfunction.login()
    };
} 
```

我收到的错误是：

> 响应 [/apps/services/api/erLight/common/query] 成功：/- *secure- {"responseID":"2","errors":["Ecma 错误：TypeError：无法在对象 [JavaPackage com 中调用属性登录.worklight.custonmode.loginfunction]。它不是函数，它是“对象”。(C%3A%5CUsers%5CADMIN%5CworkspaceM11%5CMobileClient%5Cadapters%5CAdapter/Adapter-impl.js#103)"], “成功”：假，“警告”：[]，“信息”：[]}* /
> 
> worklight.js（第 1112 行）
> 
> 过程调用错误。Ecma 错误：TypeError：无法在对象 [JavaPackage com.worklight.custonmode.loginfunction] 中调用属性登录。它不是一个函数，它是“对象”。（C%3A%5CUsers%5CADMIN%5CworkspaceM11%5CMobileClient%5Cadapters%5CAdapter/Adapter-impl.js#103）

# c# - 如何使用 EPPlus 填充 ExcelTable

> ID：15378325
> 
> 赞同：9
> 
> 时间：2013-03-13T06:17:37.793
> 
> 标签：c#, excel, epplus

我正在尝试修改现有的 Excel 工作表。确切地说，我想在工作表中存在的表中添加几行（使用格式作为表创建）。我试过了

```
var table = sheet.Tables["PositionsTable"]; 
```

但是这样创建的“表”只是实际表的元数据，我不能向其中添加行。如果我尝试

```
sheet.Cells[table.Address.Address.ToString()].LoadFromCollection(positions); 
```

然后我没有得到表格的格式。

任何人都知道我如何在表格中添加行！谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-26T21:40:22.143

我们在我们公司使用类似以下的东西。基本上这个想法是，对于您要输出的每条记录，您创建一个数据对象数组以加载到 excel 中，然后调用 LoadFromArrays。

```
 using (var excelPkg = new ExcelPackage())
        {
            var name = "Sheet1";
            //You will probably pass the columns to output into this function
            var headerArray = new string[] { "Column1", "Column2" };
            var data = positions
                .Select(i => headerArray.Select(h => GetValue(i, h)).ToArray());
            var ws = excelPkg.Workbook.Worksheets.Add(name);
            ws.Cells["A1"].LoadFromArrays(
                ((object[])headerArray).ToSingleItemEnumerable().Union(data));
            ws.Row(1).Style.Font.Bold = true; //set header to bold
            excelPkg.SaveAs(stream, "password");
        }

    private static object GetValue(Position item, string field)
    {
        //Your logic goes here
        return null;
    }

    public static IEnumerable<T> ToSingleItemEnumerable<T>(this T o)
    {
        yield return o;
    } 
```

# php - Zend 框架中的页面未找到错误

> ID：15378328
> 
> 赞同：-1
> 
> 时间：2013-03-13T06:17:57.330
> 
> 标签：php, zend-framework

我收到以下错误

```
An error occurred
Page not found
Exception information:

Message: Action "index" does not exist and was not trapped in __call()``

Stack trace: 0 /var/www/square/library/Zend/Controller/Action.php(518): Zend_Controller_Action->__call('indexAction', Array) 
1 /var/www/square/library/Zend/Controller/Dispatcher/Standard.php(295): Zend_Controller_Action->dispatch('indexAction')
2 /var/www/square/library/Zend/Controller/Front.php(954):   Zend_Controller_Dispatcher_Standard->dispatch(Object(Zend_Controller_Request_Htt‌​p), Object(Zend_Controller_Response_Http)) 
3 /var/www/square/library/Zend/Application/Bootstrap/Bootstrap.php(97): Zend_Controller_Front->dispatch()
4 /var/www/square/library/Zend/Application.php(366): Zend_Application_Bootstrap_Bootstrap->run() 
5 /var/www/square/public/index.php(26): Zend_Application->run() 
6 {main} Request Parameters: array ( 'module' => 'catalog', 'controller' => 'item', 'action' => 'index', ) 
```

我尝试使用的 URL 是：

```
/square/public/catalog/item/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T06:59:47.433

在您的代码中，您指定的控制器是`ItemController`，当您尝试运行程序时，执行的操作是 indexAction。首先检查您是否`indexAction`在控制器中编写了问题..并尝试发布您的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T07:07:21.977

除了已经说过的事情之外，我看到您正在使用模块。您是否在 ZF 配置中启用了此功能（或直接在源代码中的某个位置，例如 Boostrap）？

在 application.ini 中，你应该有这样的东西：

```
resources.frontController.moduleDirectory = APPLICATION_PATH "/modules" 
```

模块（我认为）也必须包含它自己的 Boostrap 类（扩展 Zend_Application_Module_Bootstrap）

# msbuild - 调用 MSbuild 发布

> ID：15378338
> 
> 赞同：0
> 
> 时间：2013-03-13T06:18:37.847
> 
> 标签：msbuild, publishing

是否可以在构建期间或在构建前事件或构建后事件中调用 MSbuild publish？我正在尝试从解决方案中发布两个 Web 项目。我正在使用文件系统发布。这里的要求是，构建解决方案应该负责发布这两个 Web 项目。有人可以建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T14:06:22.163

我不会在构建后事件中放置太多部署逻辑。它变得“脆弱”。

创建一个单独的 .msbuild 文件，并在其中执行“额外”逻辑，而不是过多地使用 .csproj 文件。

下面是一个基本的例子。将下面的 xml 放在名为“MyBuildAndDeploy.msbuild”的文件中，将其放在与 .sln（或 .csproj）文件相同的文件夹中，然后从命令行使用 msbuild.exe“MyBuildAndDeploy.msbuild”。

因此，下面是构建主要解决方案然后将文件复制到某处的基本示例。

```
<?xml version="1.0" encoding="utf-8"?>
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003" DefaultTargets="AllTargetsWrapper">

    <PropertyGroup>
        <!-- Always declare some kind of "base directory" and then work off of that in the majority of cases  -->
        <WorkingCheckout>.</WorkingCheckout>
        <BuildResultsRootFolder>$(WorkingCheckout)\..\BuildResults</BuildResultsRootFolder>
    </PropertyGroup>

    <Target Name="AllTargetsWrapper">

        <CallTarget Targets="BuildSolution" />
        <CallTarget Targets="CopyBuildOutputFiles" />

    </Target>

    <Target Name="BuildSolution">

        <MSBuild Projects="$(WorkingCheckout)\MySuperCoolSolution.sln" Targets="Build" Properties="Configuration=$(Configuration)">
            <Output TaskParameter="TargetOutputs" ItemName="TargetOutputsItemName"/>
        </MSBuild>
        <Message Text="BuildSolution completed" />

    </Target>   

    <Target Name="CopyBuildOutputFiles">

        <MakeDir Directories="$(BuildResultsRootFolder)\$(Configuration)" Condition="!Exists('$(BuildResultsRootFolder)\$(Configuration)\')"/>  

        <ItemGroup>
            <BuildOutputFilesExcludeFiles Include="$(WorkingCheckout)\**\*.doesnotexist" />
            <BuildOutputFilesIncludeFiles Include="$(WorkingCheckout)\**\*.dll" Exclude="@(BuildOutputFilesExcludeFiles)" />    
            <BuildOutputFilesIncludeFiles Include="$(WorkingCheckout)\**\*.exe" Exclude="@(BuildOutputFilesExcludeFiles)" />    
            <BuildOutputFilesIncludeFiles Include="$(WorkingCheckout)\**\*.config" Exclude="@(BuildOutputFilesExcludeFiles)" />
            <BuildOutputFilesIncludeFiles Include="$(WorkingCheckout)\**\*.pdb" Exclude="@(BuildOutputFilesExcludeFiles)" />
        </ItemGroup>  

        <Copy SourceFiles="@(BuildOutputFilesIncludeFiles)" 
            DestinationFolder="$(BuildResultsRootFolder)\$(Configuration)\"/>

    </Target>

</Project> 
```

# android - Windows Azure 网站与安卓设备通信

> ID：15378343
> 
> 赞同：0
> 
> 时间：2013-03-13T06:18:54.270
> 
> 标签：android, azure

项目需求：**windows azure网站和android设备使用azure移动服务进行通信**

1）网站是在VB.NET中使用Microsoft Windows Azure（服务器端）构建的

2）Android应用程序在Android设备（客户端）

客户端（Android 用户）应该能够将数据从 android 设备（客户端）发送到网站（服务器端），反之亦然为了使这成为可能，即客户端和服务器之间的通信我正在使用 Microsoft Windows Azure 提供的移动服务（服务器端）使用 GCM（谷歌云消息）

我已按照文档执行所有步骤

[http://www.windowsazure.com/en-us/develop/mobile/tutorials/get-started-with-push-android/](http://www.windowsazure.com/en-us/develop/mobile/tutorials/get-started-with-push-android/)

还遵循上述 Microsoft windows azure 链接文档中提供的所有步骤

但是当我尝试从 Android 设备向网站发送消息时，会发生以下错误

*错误：* **com.microsoft.windowsazure.mobileservices.MobileServiceException：处理请求时出错**

注意：GCM (Google Cloud Messaging) 为我们提供了一个 gcm.jar 文件，该文件在 android 应用程序中用于向服务器即网站发送数据

创建代码

```
 @Override
       public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_to_do);

    GCMRegistrar.checkDevice(this);
    GCMRegistrar.checkManifest(this);
    mRegistationId = GCMRegistrar.getRegistrationId(this);
    if (mRegistationId.equals("")) {
        GCMRegistrar.register(this, SENDER_ID);
    }

    mProgressBar = (ProgressBar) findViewById(R.id.loadingProgressBar);

    // Initialize the progress bar
    mProgressBar.setVisibility(ProgressBar.GONE);

    try {
        // Create the Mobile Service Client instance, using the provided
        // Mobile Service URL and key
        mClient = new MobileServiceClient(
                "url of website",
                "POBHgxwAktyxUdeRRpcFyqEcsppwiS99",
                this).withFilter(new ProgressFilter());

        // Get the Mobile Service Table instance to use
        mToDoTable = mClient.getTable(ToDoItem.class);

        mTextNewToDo = (EditText) findViewById(R.id.textNewToDo);

        // Create an adapter to bind the items with the view
        mAdapter = new ToDoItemAdapter(this, R.layout.row_list_to_do);
        ListView listViewToDo = (ListView) findViewById(R.id.listViewToDo);
        listViewToDo.setAdapter(mAdapter);

        // Load the items from the Mobile Service
        refreshItemsFromTable();
                    }
                    catch (MalformedURLException e) {
                    createAndShowDialog(new Exception("There was an error creating the Mobile Service. Verify the URL"), "Error");
                }
                } 
```

在按钮单击事件 addItem() 被调用

```
 public void addItem(View view) {
    if (mClient == null) {
        return;
    }

    try
    {

    // Create a new item
    ToDoItem item = new ToDoItem();

    item.setText(mTextNewToDo.getText().toString());
    item.setComplete(false);

    // Insert the new item
    mToDoTable.insert(item, new TableOperationCallback<ToDoItem>() {

        public void onCompleted(ToDoItem entity, Exception exception, ServiceFilterResponse response) {

            if (exception == null) {
                if (!entity.isComplete()) {
                    mAdapter.add(entity);
                }
            } else {
                createAndShowDialog(exception, "Error");
            }

        }
    });

    item.setRegistrationId(mRegistationId.equals("") ?
            GCMIntentService.getRegistrationId() : mRegistationId);
    mTextNewToDo.setText("");
    }
    catch(Exception ex)
    {

    }
}

            public void checkItem(ToDoItem item) {
    if (mClient == null) {
        return;
    }

    // Set the item as completed and update it in the table
    item.setComplete(true);

    mToDoTable.update(item, new TableOperationCallback<ToDoItem>() {

        public void onCompleted(ToDoItem entity, Exception exception, ServiceFilterResponse response) {
            if (exception == null) {
                if (entity.isComplete()) {
                    mAdapter.remove(entity);
                }
            } else {
                createAndShowDialog(exception, "Error");
            }
        }

    });
}

            private void refreshItemsFromTable() {

    // Get the items that weren't marked as completed and add them in the
    // adapter
    mToDoTable.where().field("complete").eq(val(false)).execute(new TableQueryCallback<ToDoItem>() {

        public void onCompleted(List<ToDoItem> result, int count, Exception exception, ServiceFilterResponse response) {
            if (exception == null) {
                mAdapter.clear();

                for (ToDoItem item : result) {
                    mAdapter.add(item);
                }

            } else {
                createAndShowDialog(exception, "Error");
            }
        }
    });
}

private void createAndShowDialog(Exception exception, String title) {
    createAndShowDialog(exception.toString(), title);
}

private void createAndShowDialog(String message, String title) {
    AlertDialog.Builder builder = new AlertDialog.Builder(this);

    builder.setMessage(message);
    builder.setTitle(title);
    builder.create().show();
}

             private class ProgressFilter implements ServiceFilter {

    @Override
    public void handleRequest(ServiceFilterRequest request, NextServiceFilterCallback nextServiceFilterCallback,
            final ServiceFilterResponseCallback responseCallback) {
        runOnUiThread(new Runnable() {

            @Override
            public void run() {
                if (mProgressBar != null) mProgressBar.setVisibility(ProgressBar.VISIBLE);
            }
        });

        nextServiceFilterCallback.onNext(request, new ServiceFilterResponseCallback() {

            @Override
            public void onResponse(ServiceFilterResponse response, Exception exception) {
                runOnUiThread(new Runnable() {

                    @Override
                    public void run() {
                        if (mProgressBar != null) mProgressBar.setVisibility(ProgressBar.GONE);
                    }
                });

                if (responseCallback != null)  responseCallback.onResponse(response, exception);
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-21T13:12:22.660

发现本教程使用的是“而不是”，这在我的情况下是问题。问题出在天蓝色的插入脚本中。希望它可以帮助你:-)

# c# - C#、.NET 中的 Google Api OAuth

> ID：15378344
> 
> 赞同：6
> 
> 时间：2013-03-13T06:19:01.030
> 
> 标签：c#, .net, oauth, dotnetopenauth, google-oauth

我只想使用 Gmail OAuth 身份验证登录到我开发的应用程序，我需要列出其中的各种输入，例如

1.  名
2.  姓
3.  电子邮件地址
4.  多布

我使用的第三方是：DotNetOpenAuth.dll

我用谷歌搜索并没有找到任何解决方案？

等待您的宝贵意见和建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T07:39:48.600

Google 有一个 .NET 客户端库

[https://code.google.com/p/google-api-dotnet-client/wiki/OAuth2](https://code.google.com/p/google-api-dotnet-client/wiki/OAuth2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T06:22:57.640

DotNetOpenAuth 文档展示了如何创建 OpenID 依赖方（[使用 ASP.NET WebForms 或 MVC](https://github.com/DotNetOpenAuth/DotNetOpenAuth/wiki/Creating-an-openid-relying-party-%28programatically%29)），以及[如何](https://github.com/DotNetOpenAuth/DotNetOpenAuth/wiki/Getting-user-attributes)从 OAuth IDP 返回的令牌中提取用户属性。

# python - Python & MongoDb：查询在执行时不起作用

> ID：15378349
> 
> 赞同：0
> 
> 时间：2013-03-13T06:19:24.983
> 
> 标签：python, django, mongodb

我在 mongo db 中保存了一个令牌，例如 .

```
db.user.findOne({'token':'7fd74c28-8ba1-11e2-9073-e840f23c81a0'}['uuid'])
{
    "_id" : ObjectId("5140114fae4cb51773d8c4f8"),
    "username" : "jjj51@gmail.com",
    "name" : "vivek",
    "mobile" : "12345",
    "is_active" : false,
    "token" : BinData(3,"hLL6kIugEeKif+hA8jyBoA==")
} 
```

当我在 mongo db 命令行界面中执行时，上述查询工作正常。

当我尝试在 Django 视图中运行时相同的查询。

```
get_user = db.user.findOne({'token':token}['uuid'])
or `get_user = db.user.findOne({'token':'7fd74c28-8ba1-11e2-9073-e840f23c81a0'}['uuid'])` 
```

我收到一个错误

```
KeyError at /activateaccount/
'uuid' 
```

请帮我弄清楚为什么我会收到这个错误。

**我的数据库**

```
 db.user.find()
{ "_id" : ObjectId("5140114fae4cb51773d8c4f8"), "username" : "ghgh@gmail.com", "name" : "Rohit", "mobile" : "12345", "is_active" : false, "token" : BinData(3,"hLL6kIugEeKif+hA8jyBoA==") }
{ "_id" : ObjectId("51401194ae4cb51773d8c4f9"), "username" : "ghg@gmail.com", "name" : "rohit", "mobile" : "12345", "is_active" : false, "token" : BinData(3,"rgBIMIugEeKQBuhA8jyBoA==") }
{ "_id" : ObjectId("514012fcae4cb51874ca3e6f"), "username" : "ghgh@gmail.com", "name" : "rahul", "mobile" : "8528256", "is_active" : false, "token" : BinData(3,"f9dMKIuhEeKQc+hA8jyBoA==") } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T07:01:23.843

**TL;DR**你的查询有问题。

更长的解释：

```
{'token':'7fd74c28-8ba1-11e2-9073-e840f23c81a0'}['uuid'] 
```

转换为`undefined`，因为您试图`uuid`从不具有该属性的对象中获取该属性。在使用 Javascript 的 Mongo shell 中，它转换为以下查询：

```
db.user.findOne(undefined) 
```

你会得到一些随机的（好吧，不是那么随机，可能是第一个）结果。

当您尝试从字典中获取未知键时，Python 会更加严格：

```
{'token':token}['uuid'] 
```

由于`uuid`不是字典中的有效键，因此当您尝试访问它时`{'token':token}`会得到一个。`KeyError`

**编辑：**由于您使用 Python`UUID`类型将令牌存储在数据库中，因此您还需要在查询中使用相同的类型：

```
from uuid import UUID

token = '7fd74c28-8ba1-11e2-9073-e840f23c81a0'
get_user = db.user.find_one({'token' : UUID(token) }) 
```

# c - 为什么以下代码中的竞争条件

> ID：15378352
> 
> 赞同：-5
> 
> 时间：2013-03-13T06:19:33.817
> 
> 标签：c, race-condition

为什么下面的代码有竞态条件？

```
static int i=0;
void some_fun()
{
  ++i;
  if(2==i)
  {
    printf("some message");
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T06:25:45.820

假设这个函数是从多个线程调用的，它有一个竞争条件，因为变量`i`有一个静态的存储持续时间并且它在所有线程之间共享，所以多个线程可以在它们之间竞争来修改这个变量。

问题是一个相同的变量在多个线程之间共享，这与每个线程一个的局部/自动变量不同。

如果你想避免竞争条件，你需要通过使用同步结构来同步对这个共享变量的访问，这里最简单和最相关的是互斥锁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T06:30:31.837

`Race condition`当多个线程或进程同时访问共享资源时发生。

在您的代码中，共享资源是 i 变量。通常，我们称之为`critical section`。

因此，如果这段代码被多个线程或进程同时访问，并对其进行修改。例如，他们将其一增加一减少。因此，数据将不一致。

希望这有帮助:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T07:16:23.390

假设这是从多个线程调用的，静态变量 i 需要受到保护。这可以通过前面提到的锁来完成，或者在这种情况下使用更有效的原子增量操作。如果你使用 gcc 编译器，它看起来像这样：

```
static int i=0;
void some_fun()
{
  int local_i = __sync_add_and_fetch(&i, 1);
  if(2==local_i)
  {
    printf("some message");
  }
} 
```

__sync_add_and_fetch() 函数将第二个参数添加到第一个参数并返回总和。所有这一切都作为一个原子操作。这比获取和释放锁更有效

# jqgrid - jqgrid 不使用“数据”元素数据显示/填充表格

> ID：15378360
> 
> 赞同：0
> 
> 时间：2013-03-13T06:20:19.347
> 
> 标签：jqgrid

运行时数据“queryData”与示例数据“myData”完全相同，“queryData”是来自 ajax 的运行时数据，但表中没有填充数据。如果我在 jqGrid“数据：queryData”的数据元素中将“queryData”替换为“myData”，则表正在填充。我没有收到“queryData”的任何错误，并且没有填充表格。

```
function populateTable(dataToPopulate){ 
    var queryData = JSON.stringify(dataToPopulate);
    alert('--query data is:'+queryData);
    $("#searchResultsGrid").jqGrid({         
         data: queryData,
         datatype: 'local',                     
         colNames: ['Claim Number', 'Injury date', 'Last Name', 'First name', 'MI', 'SSN'],
         colModel: [{name: 'claimNumber', index: 'claimNumber', width: 110, align: 'left',sortable:true},    {name: 'doi', index: 'doi', width: 130, sortable:true},   {name: 'lastName', index: 'lastName', width: 120, sortable:true},   {name: 'firstName', index: 'firstName', width: 65, sortable:true}, {name: 'miName', index: 'miName', width: 60, align: 'center', sortable:true},{name: 'ssn', index: 'ssn', width: 95, align: 'center', sortable:true}   ],
         caption: 'Search Results',
         height: '100%',
         width: '100%',
         rownumbers: true,
         sortname : 'doi',
         sortorder : 'desc',
         viewrecords : true,
         autowidth: true,
         hidegrid: false
    });     
}
//sample local data
var myData = [  {"claimNumber":"NF873673", "doi":"12/12/2012", "lastName":"Doe", "firstName":"John", "miName":"null", "ssn":"123-456-7890"},{"claimNumber":"NF873673", "doi":"12/12/2012", "lastName":"Doe", "firstName":"John", "miName":"X", "ssn":"123-456-7890"},   {"claimNumber":"NF873673", "doi":"12/12/2012", "lastName":"Doe", "firstName":"John", "miName":"X", "ssn":"123-456-7890"} ]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T07:33:40.797

您的代码中存在一些问题。

更改`data: queryData`为`datastr: queryData`_

更改`datatype: 'local'`为`datatype: "jsonstring"`_

添加 `jsonReader: { repeatitems: false },`到您的网格选项

json 字符串应采用以下格式

```
var myData = {
                "page": "1",
                "records": "2",
                "rows": [ 
                         {"claimNumber":"NF873673", "doi":"12/12/2012", "lastName":"Doe", "firstName":"John", "miName":"null", "ssn":"123-456-7890"},
                         {"claimNumber":"NF873673", "doi":"12/12/2012", "lastName":"Doe", "firstName":"John", "miName":"X", "ssn":"123-456-7890"},   
                         {"claimNumber":"NF873673", "doi":"12/12/2012", "lastName":"Doe", "firstName":"John", "miName":"X", "ssn":"123-456-7890"} ]}; 
```

下面给出的是您的代码的工作版本

```
function populateTable(queryData){ 
            var queryData = JSON.stringify(queryData);
            alert('--query data is:'+queryData);
            $("#searchResultsGrid").jqGrid({         
                datastr:  queryData,
               //  pager:'#searchResultsGridPagingTool',
                 datatype: "jsonstring",               
                 colNames: ['Claim Number', 'Injury date', 'Last Name', 'First name', 'MI', 'SSN'],
                 colModel: [{name: 'claimNumber', index: 'claimNumber', width: 110, align: 'left',sortable:true},
                            {name: 'doi', index: 'doi', width: 130, sortable:true},   
                            {name: 'lastName', index: 'lastName', width: 120, sortable:true},   
                            {name: 'firstName', index: 'firstName', width: 65, sortable:true}, 
                            {name: 'miName', index: 'miName', width: 60, align: 'center', sortable:true},
                            {name: 'ssn', index: 'ssn', width: 95, align: 'center', sortable:true}   ],
                 caption: 'Search Results',
                 height: '100%',
                 width: '100%',
                 rownumbers: true,
                 jsonReader: { repeatitems: false },
                 sortname : 'doi',
                 sortorder : 'desc',
                 viewrecords : true,
                 autowidth: true,
                 hidegrid: false
            });     
        }
        //sample local data
        var myData = {
                "page": "1",
                "records": "2",
                "rows": [ 
                         {"claimNumber":"NF873673", "doi":"12/12/2012", "lastName":"Doe", "firstName":"John", "miName":"null", "ssn":"123-456-7890"},
                         {"claimNumber":"NF873673", "doi":"12/12/2012", "lastName":"Doe", "firstName":"John", "miName":"X", "ssn":"123-456-7890"},   
                         {"claimNumber":"NF873673", "doi":"12/12/2012", "lastName":"Doe", "firstName":"John", "miName":"X", "ssn":"123-456-7890"} ]};

        populateTable(myData); 
```

# javascript - javascript数据结构人员矩阵

> ID：15378367
> 
> 赞同：0
> 
> 时间：2013-03-13T06:21:00.880
> 
> 标签：javascript, date, object, calendar

我想存储每个工作人员每周计划在每个项目上工作的小时数。

我将用这些数据填充一个表格，并让用户编辑每周的小时数。

我为每个元素创建了对象：

```
//project
function project(name, number, staff)
{
    this.name = name;
    this.number = number;
    this.staff = staff;

}

//staff
function staff(name, date)
{
    this.name = name;
    this.date = date;
    this.addDate = function(){};
    this.removeDate = function(){};
}

//date
function date(year, month, week, hours)
{
    this.year = year;
    this.month = month;
    this.week = weed;
    this.hours = hours;
} 
```

保存和访问日期所附时间的最佳方法是什么？是否有如何在某处执行此操作的示例？

# iphone - 从通讯录中仅获取 facebook 联系人

> ID：15378371
> 
> 赞同：2
> 
> 时间：2013-03-13T06:21:25.687
> 
> 标签：iphone, ios, facebook, abaddressbook

我只需要从通讯录中获取 facebook 联系人。我经历了很多线程并提出了以下代码。

```
- (IBAction)buttonPressed:(id)sender {
if (ABAddressBookRequestAccessWithCompletion) { // if in iOS 6

    // Request authorization to Address Book
    ABAddressBookRef addressBookRef = ABAddressBookCreateWithOptions(NULL, NULL);

    if (ABAddressBookGetAuthorizationStatus() == kABAuthorizationStatusNotDetermined) {
        ABAddressBookRequestAccessWithCompletion(addressBookRef, ^(bool granted, CFErrorRef error) {
                    [self getFacebookContacts:addressBookRef];
        });
    }
    else if (ABAddressBookGetAuthorizationStatus() == kABAuthorizationStatusAuthorized) {
                [self getFacebookContacts:addressBookRef];
    }
    else {
        // The user has previously denied access
        // Send an alert telling user to change privacy setting in settings app
    }
}
else{ // if not in iOS 6

    ABAddressBookRef addressBookRef = ABAddressBookCreate();
            [self getFacebookContacts:addressBookRef];
    NSLog(@"Not ios 6");
    }
 }

-(void) getFacebookContacts:(ABAddressBookRef) addressBookRef
{
    CFArrayRef allContacts = ABAddressBookCopyArrayOfAllPeople(addressBookRef);
    CFIndex contactCount = CFArrayGetCount(allContacts);
    // Traverse through contacts
    for(int i=0; i<contactCount; i++)
    {
        ABRecordRef ref = CFArrayGetValueAtIndex(allContacts, i);
        //Check if contact has social profile
        ABMultiValueRef social = ABRecordCopyValue(( ABRecordRef)ref, kABPersonSocialProfileProperty);
        if (social) {
            // *****   This is coming as 0     **********
            CFIndex count = ABMultiValueGetCount(social); 
            for (int i = 0 ; i < count; i++) {
                CFDictionaryRef socialValue = ABMultiValueCopyValueAtIndex(social, i);
                if(CFStringCompare( CFDictionaryGetValue(socialValue, kABPersonSocialProfileServiceKey), kABPersonSocialProfileServiceFacebook, 0)==kCFCompareEqualTo) {
                    NSLog(@"Facebook Contact %d : %@",i, (NSString*) CFDictionaryGetValue(socialValue, kABPersonSocialProfileUsernameKey));
                }
            }
        }
    }
} 
```

因为我得到的社交资料计数为 0，所以我无法获取任何联系人。从设置->Facebook同步我的Facebook帐户后，地址簿中添加了许多联系人

请检查代码，如果有任何建议或我做错了什么，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-05T09:07:42.683

您正在尝试获取 kABPersonSocialProfileUsernameKey，但它可以为空。尝试使用 kABPersonSocialProfileUserIdentifierKey。

# dynamic - 数组中的数字总和

> ID：15378377
> 
> 赞同：0
> 
> 时间：2013-03-13T06:22:02.040
> 
> 标签：dynamic

我是编程新手，我尝试解决在线评审系统中的问题。有一个问题，看起来非常有趣和重要，但不幸的是我不知道如何解决。我会很感激任何提示。

问题是：给定一个数组作为输入。如果有两个具有相同数字和的子数组，则打印 1，否则打印 0。

输入：2 1 1 输出：1 输入：3 2 5 3 输出：1 输入：3 1 4 7 输出：0

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T06:29:19.453

这被称为分区问题（或至少是分区问题的一种变体）。这是一个需要所谓的动态规划解决方案的问题。对于刚开始学习如何编程的人来说，这是一个相当高级的问题。我建议从一些更简单的挑战开始。

但是，如果您有兴趣解决这个问题，请查看此链接： http: [//people.csail.mit.edu/bdean/6.046/dp/](http://people.csail.mit.edu/bdean/6.046/dp/)。此页面上指向“分区问题”的链接显示了一个有效解决方案的视频说明。

# jsf - 是否可以从客户端机器上从 java Web 读取注册表键值？

> ID：15378379
> 
> 赞同：0
> 
> 时间：2013-03-13T06:22:13.733
> 
> 标签：jsf, jakarta-ee, seam

我想从 Web 服务器的 Windows 注册表机器中读取特定的键值。我正在使用`jsf`和`seam`。我只是想检查客户端计算机上是否已经安装了某个应用程序，我想从服务器端代码中检查它。

这可能吗？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T06:31:27.090

要访问注册表，您需要使用[Java Native Access (JNA)](http://jna.java.net/) 注册表库。

对于读取客户端注册表，我认为您需要使用 Applet 并提供适当的安全权限

看看[这个 SO 帖子](https://stackoverflow.com/questions/62289/read-write-to-windows-registry-using-java)

# android - 使用Android设备的汽车加速和减速

> ID：15378390
> 
> 赞同：1
> 
> 时间：2013-03-13T06:23:15.140
> 
> 标签：android, accelerometer, sensors

我尝试`location.getSpeed();`在Android中使用GPS找到汽车的速度和位置，现在我想找到汽车的加速和减速。为此，我是否有任何 Android 设备参数，例如 GPS，还是需要根据速度和时间计算我现在拥有的？我开始知道设备中有加速度，它正在给出坐标。我想知道如何计算汽车的加速和减速。帮助一些锻炼或任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T06:25:46.420

使用安卓传感器`TYPE_LINEAR_ACCELERATION`

# blackberry-10 - 以编程方式从 bar-descriptor.xml 文件中提取版本号

> ID：15378391
> 
> 赞同：0
> 
> 时间：2013-03-13T06:23:16.033
> 
> 标签：blackberry-10, blackberry-cascades

[有没有办法通过PackageManager](http://developer.android.com/reference/android/content/pm/PackageManager.html)中的[getPackageInfo()](http://developer.android.com/reference/android/content/pm/PackageManager.html#getPackageInfo%28java.lang.String,%20int%29)从文件中提取版本号和其他信息，`bar-descriptor.xml`类似于它在 Android 世界中的操作方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T08:01:56.973

由于某种原因错过了允许这样做的课程：

*   [包信息](https://developer.blackberry.com/cascades/reference/bb__packageinfo.html)
*   [应用信息](https://developer.blackberry.com/cascades/reference/bb__applicationinfo.html)

# java - 如果删除 + 和 ++ 运算符之间的空格会发生什么？

> ID：15378392
> 
> 赞同：7
> 
> 时间：2013-03-13T06:23:20.527
> 
> 标签：java, integer, operators, string-concatenation, addition

**编辑 1**

免责声明：*我知道这* `+++` *不是真正的运算符*，而是没有空格的`+`and运算符。`++`我也知道没有理由使用它；这个问题只是出于好奇。

* * *

所以，我很想看看Java中是否需要`+`和之间的空间。`++var`

这是我的测试代码：

```
int i = 0;
System.out.println(i);
i = i +++i;
System.out.println(i); 
```

这打印出来：

```
0
1 
```

正如我所期望的那样工作，就像 first 和 second 之间有一个空格一样`+`。

然后，我尝试了字符串连接：

```
String s1 = "s " + ++i;
System.out.println(s1);
// String s2 = "s " +++i; 
```

这打印出来：

```
s 2 
```

但是如果第三行没有注释，代码就无法编译，报错：

```
Problem3.java:13: unexpected type
required: variable
found   : value
    String s2 = "s " +++i;
                ^
Problem3.java:13: operator + cannot be applied to <any>,int
    String s2 = "s " +++i;
                     ^ 
```

是什么导致字符串连接和整数加法之间的行为差​​异？

* * *

**编辑 2**

正如[Abhijit 的后续问题](https://stackoverflow.com/questions/15382171/is-its-just-a-post-fix-increment-followed-by-an-infix-always)中所讨论的，人们提到的规则（首先解析较大的标记 ++，在较短的标记 ++ 之前）在[本演示文稿](https://docs.google.com/presentation/d/1h49gY3TSiayLMXYmRMaAEMl05FaJ-Z6jDOWOz3EsqqQ/preview?sle=true#slide=id.gcfd0be4a_219)中进行了讨论，它似乎被称为 Munchy Munchy 规则。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-13T06:27:48.770

没有`+++`操作员。你有一个后缀`++`运算符，后跟一个中缀`+`运算符。这是一个编译错误，因为 postfix`++`只能应用于变量，而`"s "`不是变量。

由于您的真正意思是中缀`+`运算符后跟前缀`++`运算符，因此您需要在运算符之间放置空格。

实际上，无论如何你都应该这样做。 `+++`是对可读性的犯罪！！！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-13T10:06:14.853

编译器在解析源代码时会生成尽可能长的标记，因此当遇到**+++**时，它会将其视为**++ +**。

所以代码

```
a +++ b 
```

将永远相同

```
(a++) + b 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-13T06:27:45.037

三倍加号本身不是运算符，它是两个运算符的组合：

三倍加的实际作用是：

a+++1 == a++ + 1；

您要做的是 ++ 一个未定义的字符串。

永远不要在代码中使用没有空格的 +++；几乎没有人会知道它的作用（没有咨询网络）。此外，大约一周后，您将不知道它自己实际做了什么。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T06:28:08.947

`+++`本身不是运算符。

`i = i +++i;`产生 的*预增量*值`i`，然后将其添加到 的值中`i`并将其存储在 中`i`。

使用字符串，`+`并不意味着加法，因此您尝试将字符串和整数连接在一起。

# android - android chrome上的Jquery-Layout，可拖动时拖动时不一致可见

> ID：15378393
> 
> 赞同：0
> 
> 时间：2013-03-13T06:23:20.323
> 
> 标签：android, google-chrome

在此处修补 jquery 可拖动对象、jquery-layout 和流星：

[编辑] 现在在 androiddragissue.meteor.com

在 chrome 的手机 (G7100) 上，图片是可拖动的，但尽管 zindex 很高，但并不总是出现在“顶部”。

将它拖到左边，它就会变得可见，将它拖回页面的垂直中心，它就会消失。

我正在使用一个库来使用触摸事件作为点击，jquery.ui.touch-punch.min，它在过去运行良好。

一些咖啡..

```
if Meteor.isClient
  Meteor.startup ->
    $(document).ready ->
      console.log !$('.ui-draggable'), new Date
      $('.face').draggable
        helper: (ev,ui) ->
          $(this).clone().appendTo("body")
          .css
            "z-index": 99999
            "position": 'absolute'
          .show() 
```

这个问题似乎是 android 的本地问题，例如 ios 设备可以正常工作。有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T12:40:54.007

这似乎是一个 Chrome for Android GPU 分层错误。我将尝试创建一个简化的案例并发布票证链接，但与此同时，这里有一个解决方法：

```
.face {
  -webkit-transform: translateZ(0);
} 
```

作为奖励，这会将图像提升到 GPU，使其在页面上的移动更加顺畅。

# regex - 简单的 Perl 正则表达式

> ID：15378398
> 
> 赞同：-1
> 
> 时间：2013-03-13T06:24:02.413
> 
> 标签：regex, perl

嗨，我对 Perl 很陌生，现在正在寻求帮助来解析一行简单的代码。

我需要解析的是

```
#include "filename" 
```

我只需要正则表达式来获取文件名。

我知道 Python 中有 split 方法可以做到这一点，不知道 Perl 中是否有类似的 func

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T06:26:06.043

```
my ($fn) = $include =~ /"([^"]*)"/; 
```

或者

```
my ($fn) = $include =~ /^\s*#\s*include\s*"([^"]*)"/; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T09:12:12.907

你*可以*`split`在 Perl 中做到这一点：

```
my $fn = (split('"', $include_line))[1]; 
```

...但这是一种非常迟钝的方式。我会选择

```
my ($fn) = $line =~ /^#include +"([^"]+)"/; 
```

相反，如果您的输入文件包含带有双引号文本的任何其他行，则它更清晰，并且还具有在非`#include`行上不返回任何内容而不是返回误报的优点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T07:25:07.290

如果您真正需要的是从一堆 c/c++ 文件中提取标头，您可以使用[ack](http://betterthangrep.com/)轻松完成：

```
ack --cc '#include "([^"]+)' -h --output=\$1  | sort | uniq 
```

# text - 使用批处理文件创建文本文件，每个文件中都有文本

> ID：15378402
> 
> 赞同：2
> 
> 时间：2013-03-13T06:24:59.340
> 
> 标签：text, batch-file

我知道标题听起来很疯狂。无论如何，这是我的场景：

我需要为 500 个不同的文件创建大约 500 个文本文件。每个文本文件都将包含我在下面的示例中看到的信息。有没有一种简单的方法可以将其放入单个批处理文件中而无需复制和粘贴 500 多次？

我正在尝试做的例子......

```
echo ^<filename 1^> >> filename1.txt
echo. >> filename1.txt
echo. >> filename1.txt
echo No OCR Found >> filename1.txt 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T06:49:07.823

对文件使用随机数...

```
@echo off
set loop=0
:loop
set num=%random%
if exist filename%num%.txt (
    echo ^<filename %num%^>
    echo.
    echo.
    echo No OCR Found
) > filename%num%.txt else (
    goto loop
)
set /a num+=1
if %loop%==500 goto end
goto loop
:end 
```

**注意：**
文件的最大数量为 32767。

要更改创建的文件数量，请更改最后一条`if`语句中的数字（例如：要使其创建 80 个文件，您将更`if %loop%==500 goto end`改为`if %loop%==80 goto end`）。

# c++ - 错误 MSB6006：“cmd.exe”以代码 3 退出

> ID：15378407
> 
> 赞同：23
> 
> 时间：2013-03-13T06:25:14.040
> 
> 标签：c++, qt

尝试构建使用 QT 的 C++ 项目时出现此错误。

![我的错误](../Images/056cbf85f3c728e99154e1fb0e0e1e33.png)

我检查了以下链接，但用户没有说出解决方案。

[http://social.msdn.microsoft.com/Forums/en-US/msbuild/thread/5b0be7be-1b6e-44c2-91ca-b5a9a55a2c41/](http://social.msdn.microsoft.com/Forums/en-US/msbuild/thread/5b0be7be-1b6e-44c2-91ca-b5a9a55a2c41/)

出现的警告是：

警告 1

> [命名空间“ http://schemas.microsoft.com/developer/msbuild/2003](http://schemas.microsoft.com/developer/msbuild/2003) ”中的元素“PropertyGroup”在命名空间“ [http://schemas.microsoft.com/developer/msbuild/2003](http://schemas.microsoft.com/developer/msbuild/2003) ”中具有无效的子元素“IntDirTrailingSlashWarning”'。预期的可能元素列表：'Property、AllowUnsafeBlocks、AppConfigForCompiler、ApplicationIcon、ApplicationRevision、ApplicationVersion、AppDesignerFolder、AspNetConfiguration、AssemblyKeyContainerName、AssemblyKeyProviderName、AssemblyName、AssemblyOriginatorKeyFile、AssemblyOriginatorKeyFileType、AssemblyOriginatorKeyMode、AssemblyType、AutorunEnabled、BaseAddress、BootstrapperComponentsLocation、BootstrapperComponentsUrl、BootstrapperEnabled、CharacterSet、CheckForOverflowUnderflow , CLRSupport, CodePage, 配置, ConfigurationName, ConfigurationOverrideFile, CreateDesktopShortcut, CreateWebPageOnPublish, CurrentSolutionConfigurationContents, DebugSecurityZoneURL, DebugSymbols, DebugType, DefaultClientScript, DefaultHTMLPageLayout, DefaultTargetSchema, DefineConstants, DefineDebug,

和

警告 59

> 未声明“ToolArchitecture”属性。C:\Program Files\MSBuild\Microsoft.Cpp\v4.0\Microsoft.CppCommon.targets 713

这是有错误的文件： [错误文件](https://www.dropbox.com/s/d5gc9399p3m279o/Microsoft.CppCommon.targets)
这是日志文件： [日志文件](https://www.dropbox.com/s/gp4vrmd2aiet9d7/QtDataAcquisition.log)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T07:07:27.350

在您的构建日志中，缺少一些文件，因此构建操作失败。查看这些错误：

```
"\bin\rcc.exe" -name "qtdataacquisition" -no-compress "D:\hussein\KinectQtDataAcquisition\KinectQtDataAcquisition\qtdataacquisition.qrc" -o .\GeneratedFiles\qrc_qtdataacquisition.cpp
         The system cannot find the path specified.
         Moc'ing qtdataacquisition.h...
         Uic'ing qtdataacquisition.ui...
         The system cannot find the path specified.
         Moc'ing DataCollector.h...
         The system cannot find the path specified.
         The system cannot find the path specified.
         Rcc'ing qtdataacquisition.qrc...
     1>C:\Program Files\MSBuild\Microsoft.Cpp\v4.0\Microsoft.CppCommon.targets(151,5): error MSB6006: "cmd.exe" exited with code 3. 
```

# html - 如何将 html 网页的布局从表格替换为使用 div

> ID：15378409
> 
> 赞同：0
> 
> 时间：2013-03-13T06:25:30.490
> 
> 标签：html, css

我已经通过主页中的 Html 表进行了页面布局。

布局很好，虽然我读到表格不是要走的路（SEO，也许不仅如此）

所以我需要使用div，布局如下（我在RTL Lang /style /direction）

![在此处输入图像描述](../Images/cdf7a0d9dc480fc9ac9975335e1b9e52.png)

**我的问题是** 任何人都可以尝试并简化如何或举例说明这样的布局

并更详细地解释：

我认为“我的生活”是如此简单，当我必须了解表格的结构时，为了便于说明，请使用以下标记：

```
<table>
     <tr> <td>1</td> <td>2</td> </tr>
     <tr> <td>3</td> <td>4</td> </tr>
</table> 
```

在这里你不需要想太多来分析这将是 2 x 2 表

但是当涉及到 div 时，我没有按我的计划放置它们的结果，我想知道如何让我变得简单，因为它对我来说是一张桌子。

2 现在我正在尝试通过 div 实现该布局（不涉及表）并使其工作，以便布局将是跨浏览器，这意味着至少对于 3 个主要浏览器`IE8&9`// `FF`（`Chrome`仅我的偏好）看起来相同

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T06:50:07.170

![在此处输入图像描述](../Images/95396c22e12913578407dd11ac14d790.png)
我努力制作你想要的模板。我希望你会喜欢它。按分区标签查看我的布局。我还附上了一个基于我的 div 逻辑创建的屏幕截图。我认为它会很清楚为你。

```
<div id="main" >
    <div style="background-color:Blue; text-align:center; ">
    Main banner
    </div>
    <div style="background-color:Green; text-align:center; " >
    Top menu
    </div>
    <div style="background-color:Gray; text-align:center; width:300px; float:right; height:200px; " >
    Right side menu
    </div>
    <div style="background-color:Red; text-align:center; height:200px;" >
    <div style="background-color:Fuchsia; text-align:center; width:300px; float:right; height:100px; ">
    contend2
    </div>
    <div style="background-color:Lime; text-align:center;height:100px;   ">
     contend1
    </div>
    <div style="background-color:Aqua; text-align:center; width:300px; float:right; height:100px; ">
    contend4
    </div>
    <div style="background-color:Orange; text-align:center;height:100px;   ">
     contend3
    </div>
    </div>
    <div style="background-color:Silver; text-align:center;   " >
    Footer
    </div>
    </div>

**In case if you want external css then use** 
<div id="main" >
    <div id="mainbanner">
    Main banner
    </div>
    <div id="topmenu" >
    Top menu
    </div>
    <div id="rsm" >
    Right side menu
    </div>
    <div id="maincontend" >
    <div id="c2" >
    contend2
    </div>
    <div id="c1">
     contend1
    </div>
    <div id="c4">
    contend4
    </div>
    <div id="c3">
     contend3
    </div>
    </div>
    <div id="footer">
    Footer
    </div>
    </div>
**CSS................**

#Main   
{
}

#mainbanner
{
    background-color:Blue;
    text-align:center;
}

#topmenu
{
    background-color:Green; 
    text-align:center;
}
#rsm
{
    background-color:Gray; 
    text-align:center; 
    width:300px; 
    float:right; 
    height:200px;
}
#maincontend
{
    background-color:Red; 
    text-align:center;
    height:200px;
}
#c2
{
   background-color:Fuchsia; 
   text-align:center; 
   width:300px; 
   float:right; 
   height:100px;  
}
#c1
{
   background-color:Lime; 
   text-align:center;
   height:100px; 
}
#c4
{
    background-color:Aqua; 
    text-align:center; 
    width:300px; 
    float:right; 
    height:100px;
}
#c3
{
    background-color:Orange; 
    text-align:center;
    height:100px;
}
#footer
{
    background-color:Silver; 
    text-align:center;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T06:48:06.947

你不能要求完整的布局，但我写了两个教程，它们肯定会帮助你获得制作它们所需的技能：[如何在 CSS 中定位](http://conijnwebdesign.nl/tutorials/how-to-position-divs-with-css.php)和使用 CSS[创建固定（“粘性”）页脚](http://conijnwebdesign.nl/tutorials/how-to-get-100-height-css.php)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T07:53:36.680

检查这个

```
<div id="wrapper">
        <div id="header">
            <p>This is the Header</p>
        </div>
        <div id="navigation">
            <p>This is the Menu</p>
        </div>
        <div id="leftcolumn">
            <div class="row">
            <div>1st block</div>
            <div>2nd block</div>
            </div>
            <div class="row">
            <div>3rd block</div>
            <div>4th block</div>
            </div>
        </div>

        <div id="rightcolumn">
            sfsf
        </div>
        <div id="footer">
            <p>This is the Footer</p>
        </div>
    </div> 
```

**[演示](http://jsfiddle.net/uEpmj/1/)**

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-04-08T13:47:18.693

HTML-Cleaner 有一个很好的功能，可以用 DIV 替换 HTML 表格：http://www.html-cleaner.com/features/replace-html-table-tags-with-divs/[确保](http://www.html-cleaner.com/features/replace-html-table-tags-with-divs/) 包含提供的 css 代码。

# c++ - 如何编写“列表 “在 C++ 中？

> ID：15378411
> 
> 赞同：0
> 
> 时间：2013-03-13T06:25:34.040
> 
> 标签：c++

我正在尝试制作以下 C# 代码的 C++ 等效代码，主要是因为我正在学习 C# 中的教程，而且我更喜欢使用 C++。我的思考过程可能是制作一个外部数组，然后将一个新数组分配到代表矩阵大小的每个索引中。这可以吗，还是有更好的方法可以在 C++ 中实现它？

```
// current C# code
List<int[,]> pieces;

pieces = new List<int[,]>();

/* I Piece */
pieces.Add(new int[4, 4] {
    {0, 0, 0, 0},
    {1, 1, 1, 1},
    {0, 0, 0, 0},
    {0, 0, 0, 0}
});

/* J Piece */
pieces.Add(new int[3, 3] {
    {0, 0, 1},
    {1, 1, 1},
    {0, 0, 0}
});

/* O Piece */
pieces.Add(new int[2, 2] {
    {1, 1},
    {1, 1}
});

/* S Piece */
pieces.Add(new int[3, 3] {
    {0, 1, 1},
    {1, 1, 0},
    {0, 0, 0}
});

/* T Piece */
pieces.Add(new int[3, 3] {
    {0, 1, 0},
    {1, 1, 1},
    {0, 0, 0}
});

/* Z Piece */
pieces.Add(new int[3, 3] {
    {1, 1, 0},
    {0, 1, 1},
    {0, 0, 0}
}); 
```

我的初始代码是在数组中创建一个矩阵。由于我不想改变游戏本身的“棋子”数量，所以固定数组应该没问题。所以这就是我写的等价物。显然，它不起作用，说它不能分配给 int 的实体：

```
int pieces [7];

//I piece
pieces [0] = new int [4][4];
pieces [0] = {
                {0, 0, 0, 0},
                {1, 1, 1, 1},
                {0, 0, 0, 0},
                {0, 0, 0, 0}
             }

/* And so on for each piece */ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T07:01:26.793

对于这样一个简单的构造，IMO 一个向量的向量似乎有点麻烦。

我可能会假设所有东西都是 4x4，最大的尺寸，然后将碎片嵌入其中，在这种情况下，您将拥有

```
#include <vector>
struct Piece { int v[4][4]; };
std::vector<Piece> pieces { 
     // I piece
     { {
        {0,0,0,0},
        {1,1,1,1},
        {0,0,0,0},
        {0,0,0,0}
     } },
     // J piece
     { {
       {0, 0, 1},  // This is OK since extra element will be 0 initialised by default.
       {1, 1, 1},
       {0, 0, 0}
       // Dont need a row here either as it will be 0 initialised.
     } }
     //Others omitted for now..
  }; 
```

或者对于非 C++11 兼容的编译器：

```
#include <vector>
struct Piece { int v[4][4]; };
Piece raw_pieces[] = {
     { {
        {0,0,0,0},
        {1,1,1,1},
        {0,0,0,0},
        {0,0,0,0}
     } },
     { {
       {0, 0, 1},  // This is OK since extra element will be 0 initialised by default.
       {1, 1, 1},
       {0, 0, 0}
       // Dont need a row here either as it will be 0 initialised.
     } }
};

std::vector<Piece> pieces(raw_pieces, raw_pieces + sizeof(raw_pieces)/sizeof(Piece)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T06:32:08.763

尝试`std::list<std::vector<std::vector<int> > >`或按照建议尝试 `std::vector<std::vector<std::vector<int> > >`

这是一个完整的示例`vector<vector<vector<int>>>`，但请记住，您必须像这样编译：**`g++ -std=c++0x t.cpp`**

```
#include <vector>
#include <iostream>

using namespace std;

int main()
{
    vector<vector<vector<int>>> A = {
      {
        {0, 0, 0, 0},
        {1, 1, 1, 1},
        {0, 0, 0, 0},
        {0, 0, 0, 0}
      },
      {
        {0, 0, 1},
        {1, 1, 1},
        {0, 0, 0}
      },
      {
        {1, 1},
        {1, 1}
      },
      {
        {0, 1, 1},
        {1, 1, 0},
        {0, 0, 0}
      },
      {
        {0, 1, 0},
        {1, 1, 1},
        {0, 0, 0}
      },
      {
        {1, 1, 0},
        {0, 1, 1},
        {0, 0, 0}
      }
    };

    for(int i=0;i<A.size();i++) {
      for(int j=0;j<A[i].size();j++) {
        for(int k=0;k<A[i][j].size();k++) {
          std::cout<<A[i][j][k];
        };
        std::cout<<std::endl;
      };
      std::cout<<std::endl;
    };
} 
```

或者，如果您不喜欢一次性初始化所有内容，并且希望在运行时进行。你可以随时使用自带的`push_back`方法`std::vector`

```
#include <vector>
#include <iostream>

using namespace std;

int main()
{
    vector<vector<vector<int>>> A;
    A.push_back(vector<vector<int>>(
      {
        {0, 0, 0, 0},
        {1, 1, 1, 1},
        {0, 0, 0, 0},
        {0, 0, 0, 0}
      }
    ));

    A.push_back(vector<vector<int>>(
      {
        {0, 0, 1},
        {1, 1, 1},
        {0, 0, 0}
      }
    ));

    A.push_back(vector<vector<int>>(
      {
        {1, 1},
        {1, 1}
      }
    ));

    A.push_back(vector<vector<int>>(
      {
        {0, 1, 1},
        {1, 1, 0},
        {0, 0, 0}
      }
    ));

    A.push_back(vector<vector<int>>(
      {
        {0, 1, 0},
        {1, 1, 1},
        {0, 0, 0}
      }
    ));

    A.push_back(vector<vector<int>>(
      {
        {1, 1, 0},
        {0, 1, 1},
        {0, 0, 0}
      }
    ));

    for(int i=0;i<A.size();i++) {
      for(int j=0;j<A[i].size();j++) {
        for(int k=0;k<A[i][j].size();k++) {
          std::cout<<A[i][j][k];
        };
        std::cout<<std::endl;
      };
      std::cout<<std::endl;
    };
} 
```

# java - 如何根据 vaadin 中的操作重新加载或刷新选项卡的内容

> ID：15378425
> 
> 赞同：2
> 
> 时间：2013-03-13T06:26:25.307
> 
> 标签：java, tabs, actionlistener, vaadin

选项卡的内容在应用程序加载时形成并显示。稍后，选项卡的内容可能会被其他操作更改。我想在每次操作后显示更新的内容。每次单击标签页时，内容都应该刷新/更新。但我失败了。

```
 //the content of the tab from the "reprintsTab" class
    //in the "reprintsTab" it query data from database and print out
    //later I update the data in the database from somewhere else, and I want the tab shows the new content
    //I want to click the tab sheet to reload the "reprintTab" class and print out the new content

    //here is what I did:

    public TabSheet sheet;

    //add tab and add the content from "reprintTab" into this tab
    sheet.addTab(new reprintsTab());

    //add the listener 
    sheet.addListener(new TabSheet.SelectedTabChangeListener() {

        @Override
        public void selectedTabChange(SelectedTabChangeEvent event) {

        //I know it does not work, because it only reload the class. but not put the content under the tab I want
        new reprintsTab();

        }
    }); 
```

我该怎么办？请帮助我，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T07:56:55.043

您可以使用[TabSheet.replaceComponent](https://vaadin.com/api/com/vaadin/ui/TabSheet.html#replaceComponent%28com.vaadin.ui.Component,%20com.vaadin.ui.Component%29)方法来执行此操作：

```
//Field to store current component
private reprintsTab currentComponent; 

//during initialization
currentComponent = new reprintsTab();
sheet.addTab(currentComponent);

sheet.addListener(new TabSheet.SelectedTabChangeListener() {
    @Override
    public void selectedTabChange(SelectedTabChangeEvent event) {
        reprintsTab newComponent = new reprintsTab();
        sheet.replaceComponent(currentComponent, newComponent);
        currentComponent = newComponent;
    }
}); 
```

此外，您可能希望仅在显示此选项卡时才重新加载此选项卡：

```
sheet.addListener(new TabSheet.SelectedTabChangeListener() {
        @Override
        public void selectedTabChange(SelectedTabChangeEvent event) {
            if (event.getTabSheet().getSelectedTab() == currentComponent) {
                //here goes the code
            }
        }
}); 
```

这应该对你有用，但我会建议一种更简洁的方法：实现`reprintsTab`为组件的容器，创建方法`reload`或`buildInterface`方法来刷新它的状态，所以你可以调用：

```
currentComponent.reload(); 
```

当您需要更新界面时。

Also, I hope `reprintsTab` is just an example name, java class names starting with lowercase letter look ugly.

# php - 我如何循环php数组

> ID：15378427
> 
> 赞同：0
> 
> 时间：2013-03-13T06:26:39.990
> 
> 标签：php, arrays, loops

这是我的`product`阵列 -

```
Array
(
    [0] => Array
        (
            [0] => 'Product1'
            [1] => 
            [2] => 
            [3] => 
            [4] => 'Product2'
            [5] => 
            [6] => 
            [7] => 'Product3'
            [8] => 'Product4'
            [9] => 'Product5'
        )
) 
```

这是`category`产品的阵列 -

```
Array
(
    [0] => Array
        (
            [0] => 'cat1'
            [1] => 'cat2'
            [2] => 'cat3'
            [3] => 'cat4'
            [4] => 'cat5'
            [5] => 'cat6'
            [6] => 'cat7'
            [7] => 
            [8] => 
            [9] => 
        )
) 
```

需要这种格式的最终​​输出 -

```
Array
(
'Product1' => Array(
           [0] => 'cat1',
           [1] => 'cat2',
           [2] => 'cat1',
           [3] => 'cat4'
           ),
'Product2' => Array(
           [0] => 'cat5',
           [1] => 'cat6',
           [2] => 'cat7'
           ),
'Product3' => Array(
           [0] => 'No Cat'
           ),
'Product4' => Array(
           [0] => 'No Cat'
           ),
'Product5' => Array(
           [0] => 'No Cat',
           )
) 
```

我试过了，但这没有形成正确的输出——

```
$newarr = array();
foreach( $productData[0] as $arr1 )
{

    if( $arr1 != '' )
    {
        foreach( $catData[0] as $catnames ){
        $newarr[$arr1] = array($compnames);
        }
    }

}
echo "<pre>";print_r($newarr); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T06:43:52.537

试试这个。。

```
$newarr = array();
foreach( $productData[0] as $key => $product )
{

    if( $product != '' )
    {
        $newarr[$product] = array();
        $currentProduct = $product;

    }

    if( isset($catData[0][$key]) && ($catData[0][$key] != '') )
    {
        $newarr[$currentProduct][] = $catData[0][$key];
    }
    else
    {
         $newarr[$currentProduct][] = 'No Cat';
    }

}
echo "<pre>";print_r($newarr); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T06:41:50.533

如果 count($productData[0]) == count($catData[0]) 您可以使用 for 循环。如果 $productData[0][0] 总是包含产品名称，那么这应该可以工作。

```
<?php
// array to return
$a = array();
// loop thru array
for($i = 0; $i < count($productData[0]); $i++) {
  // if the product name exists its time to start a new array entry
  if($productData[0][$i] != '') {
    // get the product name as we need might need this for the next iteration
    $current = $productData[0][$i];
    // create the new array
    $a[$current] = array();

    if($catData[0][$i] != '') {
      // and save the category at this iteration into the new array
      $a[$current][] = $catData[0][$i];
    } else {
      $a[$current][] = 'No Cat';
    }
  } else {
    // product name was blank, and $current should be set, append the category.
    $a[$current][] = $catData[0][$i];
  }
}

echo "<pre>";
print_r($a);
echo "</pre>"; 
```

# vmware-player - Clibboard 交换在 VMware 播放器 5 中不起作用

> ID：15378429
> 
> 赞同：2
> 
> 时间：2013-03-13T06:26:50.057
> 
> 标签：vmware-player

我在 Dell Latitude E6510 上的 VMware player 5 上有一个 Kubuntu 12.10 64 位作为主机和 CentOS 6 32 位作为来宾系统。尽管安装了 VMware 工具，剪贴板交换仍无法正常工作。

我在 VirtualBox 中使用了一个非常相似的来宾系统，并且 cliboard 交换工作正常。

有人遇到过与我类似的配置吗？是否有可能是访客系统而不是播放器导致了问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-11T11:38:17.257

我发现暂停然后重新播放 VM 将重新启用剪贴板交换。剪贴板交换将在 VM 和主机之间以及 VM 本身之间进行。（VMWare 播放器 5.0、Windows 7）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T08:41:00.450

在安装了几个这样的星座后，我体验到，总的来说它可以工作，我可以双向交换剪贴板，甚至桌面大小也适应 VM 窗口的大小，但仍然时不时出现这种情况它不起作用，而且还听说过许多其他人经历过这种情况。

所以，如果有人能在这一点上启发我，我会很高兴，但我在此结束我的问题。

# html - 在画布上绘图时，是否应该相对于笛卡尔平面坐标进行计算？

> ID：15378430
> 
> 赞同：0
> 
> 时间：2013-03-13T06:26:50.637
> 
> 标签：html, math, canvas, html5-canvas

我最近看到了很多与画布图形相关的 javascript 项目和库，想知道它们如何处理坐标系。**在画布上绘制形状和矢量时，点是基于笛卡尔平面计算并为画布转换的，还是一切都直接为画布计算？**

我尝试通过绘制所有切线来绘制一个圆，直到线的交点开始类似于曲线，并发现我熟悉的笛卡尔平面与 Web 浏览器使用的坐标系之间的差异非常令人困惑。圆的函数，例如，“y^2 + x^2 = r^2”需要转换为“(y-1)^2 + (x-1)^2 = r^2”可以在画布上看到。然后负斜率是画布上的正斜率，一切都会颠倒：/。

对我来说，最简单的思考方法是假装笛卡尔平面的原点位于画布的中心，并相应地调整我的坐标。在 500 x 500 的画布上，中心是 250,250，所以如果我最终在 50,50 处绘制一个点，它将在 (250 + 50, 250 - 50) = (300, 200) 处绘制。

我觉得我把这件事复杂化了，但我无法用干净的方式来使用画布。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T09:10:38.170

当前的实践也许可以通过 David Flanagan 的书“JavaScript : The Definitive Guide”中的一句话来举例说明，它说

> 某些画布操作和属性（例如提取原始像素值和设置阴影偏移）始终使用此默认坐标系

（默认坐标系是画布的坐标系）。它继续

> 在大多数画布操作中，当您指定一个点的坐标时，它会被视为当前坐标系中的一个点 *[例如您提到的笛卡尔平面@Walkerneo]*，而不是默认坐标系中的一个点。

为什么使用“当前坐标系”比直接使用画布 cs 更有用？

首先，我相信，因为它独立于画布本身，它与屏幕相关联（更具体地说，默认坐标系尺寸以像素表示）。例如，使用笛卡尔（正交）坐标系可以让您（嗯，对我来说，显然 :-D）很容易根据您想要绘制的内容来指定您的绘图，而将如何绘制它的任务留给Canvas API 提供的转换。特别是，您可以用绘图的自然单位表达尺寸，并执行缩放和平移以适合（或不适合，视情况而定......）您的绘图到画布。

此外，使用转换通常是构建绘图的更清晰的方法，因为它允许您从底层坐标系统“更远”并根据更高级别的操作（“缩放”、“旋转”、“平移”和更一般的“转换”）。上面提到的书提供了一个非常好的例子来展示这种方法的强大功能，使用画布坐标用更少的线条绘制科赫（分形）雪花是可能的（如果有的话）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T07:16:20.313

HTML5 画布与大多数图形系统一样，使用坐标系，其中 (0,0) 位于左上角，x 轴和 y 轴分别从左到右和自上而下。如果您考虑如何创建一个只有一块内存的图形系统，这是有道理的：将坐标 (x,y) 映射到内存插槽的最简单方法是取`x+w*y`，其中 w 是一条线的宽度。

这意味着画布坐标系与您在数学中使用的坐标系在两个方面有所不同：(0,0) 不是像通常那样的中心，并且 y 向下而不是向上增长。最后一部分是什么让你的数字颠倒了。

您可以在画布上设置[转换](https://developer.mozilla.org/en-US/docs/HTML/Canvas/Tutorial/Transformations)，使坐标系更像您习惯的：

```
var ctx = document.getElementById('canvas').getContext('2d');
ctx.translate(250,250);   // Move (0,0) to (250, 250)
ctx.scale(1,-1);          // Make y grow up rather than down 
```

# ruby-on-rails - 尝试为我的 Rails 生产服务器使用Passenger/Nginx，403 错误

> ID：15378434
> 
> 赞同：0
> 
> 时间：2013-03-13T06:27:13.073
> 
> 标签：ruby-on-rails, linux, ruby-on-rails-3, nginx, ubuntu-12.04

我正在尝试让我的生产服务器在我的 Ubuntu 12.04 LTS 服务器上启动并运行，我一步一步按照本教程进行操作，

[http://excid3.com/blog/setting-up-ubuntu-12-04-with-ruby-1-9-3-nginx-passenger-and-postgresql-or-mysql/#.UUAVdhnZVQI](http://excid3.com/blog/setting-up-ubuntu-12-04-with-ruby-1-9-3-nginx-passenger-and-postgresql-or-mysql/#.UUAVdhnZVQI)

但是当我加载 nginx 时，我只会收到 403 错误。这是我的`namei -om /home/deploy(user)/app`

```
 drwxr-xr-x root   root     /
 drwxr-xr-x deploy www-data home
 drwxr-xr-x deploy www-data deploy
 drwxr-xr-x deploy www-data knowyourroute 
```

然后在我的 nginx.conf 中，我在最上面

`user deploy www-data;`

然后在`server {`我有

```
listen 80;
server_name 10.0.0.30;
root /home/deploy/knowyourroute/public;
passenger_enabled on;

location / {
   root html;
   index index.html index.htm;
}

error_page 500 502 503 504 /50x.html;
location = /50x.html {
root html;
} 
```

我已经用谷歌搜索了它的废话，尝试更改权限、组、以 root 身份运行或以用户身份运行，`deploy`但如果有人有任何想法会很棒，我仍然没有什么可以尝试的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T08:16:50.313

您需要在 location 块中重新指定passenger_enabled。

# java - 如何根据双值确定颜色深浅？

> ID：15378435
> 
> 赞同：0
> 
> 时间：2013-03-13T06:27:16.563
> 
> 标签：java, colors, rgb

我有一个带有双值的 ArrayList，这些值我写到表中。我想根据其双值对每一行着色（一种颜色 - 例如绿色或红色），较高的值将具有较深的阴影，反之亦然。也许我可以改变亮度 - 这是正确的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T06:38:39.307

您可以创建一个基于双精度值创建颜色的函数。像这样的东西：

```
Color getColor(double val, double min, double max) {
  int red = 100;
  int green = 100;
  int blue = val/(max-min) * 256;

  return new Color (red, green, blue);
} 
```

您可以通过将蓝色计算移动到其他颜色来更改基色。或者完全做一个不同的方程。这个想法保持不变。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-13T06:35:21.200

好吧，这不是“错误”的说法。这有点奇怪。就个人而言，如果您尝试表示颜色并且不想使用 Color 类，我会使用 int 而不是 double。一个 int 有 32 位，红色、绿色、蓝色和 alpha 各 8 位。我不确定您如何将双精度转换为颜色。

# jsp - 在jsp中单击不同的菜单项时，如何在同一页面的一个iframe中重定向不同的页面？

> ID：15378436
> 
> 赞同：-1
> 
> 时间：2013-03-13T06:27:20.510
> 
> 标签：jsp, iframe

现在我在做jsp页面。有垂直菜单和一个 iframe。单击相应的菜单项后，我必须在 iframe 中显示相应的页面。由于框架集的一些限制，我不能使用框架集。我该怎么做？请问你能给我代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T07:55:39.077

您可以使用给定的代码。

```
<iframe src="default.html" name="myframe">
<p>Supported</p>
</iframe>
<ul>
<li><a href="page1.html" target="myframe">Page1</a></li>
<li><a href="page2.html" target="myframe">Page2</a></li>
<li><a href="page3.html" target="myframe">Page3</a></li>
<li><a href="page4.html" target="myframe">Page4</a></li>
</ul> 
```

详细了解[iframe 名称属性](http://www.w3schools.com/tags/att_iframe_name.asp)

# sql-server - SQL Server 数据优化技术

> ID：15378437
> 
> 赞同：0
> 
> 时间：2013-03-13T06:27:20.607
> 
> 标签：sql-server, indexing

我想在我的 SQL 数据库上实现一种数据优化技术。我更喜欢先创建索引，为此我使用了 Tuning Advisor。调优顾问向我推荐了许多非聚集索引。

我应该创建所有这些索引来提高性能吗？或者可以创造那些尺寸更小的？

请建议我..因为我对这个领域很陌生..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-07-05T15:57:58.987

至于你在实现索引的问题，你必须知道，监控和智能响应索引使用需求的第一步是收集和维护一个简单易用的索引使用指标数据集。

此数据集应允许您快速搜索可能考虑删除或更改索引的常见场景：

*   未使用的索引
*   最少使用的索引
*   写入的索引远多于读取的索引
*   经常扫描的索引，但很少作为搜索的目标
*   非常相似且可以组合的索引

SQL Server 提供了一个动态管理视图来跟踪所有索引的使用情况：`sys.dm_db_index_usage_stats`.

此视图是针对索引的操作的累积总数，并在 SQL Server 服务重新启动时重置。

要了解更多信息，请参阅本文[https://www.sqlshack.com/sql-server-index-performance-tuning-using-built-in-index-utilization-metrics/](https://www.sqlshack.com/sql-server-index-performance-tuning-using-built-in-index-utilization-metrics/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T12:38:51.400

我建议您在尝试实施任何事情之前多阅读一下这个主题，因为如果应用不当，这实际上可能会造成负面影响。

您关于实施索引的问题缺乏额外的数据。正如其他人已经指出的那样——在实现索引之前，您需要查看最常用的查询。否则它可能只会导致退化。

这里有一些文章可以帮助您入门。

[https://www.simple-talk.com/sql/performance/](https://www.simple-talk.com/sql/performance/)

[http://www.codeproject.com/Articles/22853/SQL-Server-Performance-Tips-and-Guidelines](http://www.codeproject.com/Articles/22853/SQL-Server-Performance-Tips-and-Guidelines)

# ruby-on-rails - 在没有原始 SQL 的情况下，如何在多态关联中查询上游？

> ID：15378438
> 
> 赞同：0
> 
> 时间：2013-03-13T06:27:20.760
> 
> 标签：ruby-on-rails, activerecord, polymorphic-associations

在我的锻炼应用程序中，用户可以“检查”一个锻炼来完成它。如果我知道 checkable_type 是 'Exercise' 并且有 checkable_id，我如何查询练习名称？

我不确定在我的控制器中放入什么来获得“已完成练习”的列表以及基于 checkable_type 和 id 的名称。

```
class Exercise < ActiveRecord::Base
    attr_accessible :name 
    has_many :checks, :as => :checkable
end

class Check < ActiveRecord::Base
    belongs_to :checkable, :polymorphic => true
    attr_accessible :checkable, :checkable_id, :checkable_type
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T06:39:11.460

只是加入另一个模型会给你你想要的吗？

```
completed_exercises = Exercise.joins(:checks) 
```

这应该会产生一个内部连接，并且 AR 已经知道如何将多态关联作为查询的一部分包含在内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T08:30:04.777

您可以定义范围`checkable_type`

```
scope :checkable_type, lambda { |class_name| where("checkable_type = ?", class_name) } 
```

我猜你想要带有类型的多态记录，`'Exercise'`并且只有在练习完成时才会创建，或者你可以在`completed_at`时间戳列中维护它。

然后您可以拉出所有已完成练习的列表

```
scope :completed, where('completed_at IS NOT NULL')

completed_exercises = Check.checkable_type('Exercise').completed 
```

`completed`如果不是这种情况，您可以忽略范围

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T22:36:35.680

弄清楚了！

```
class Exercise < ActiveRecord::Base
  attr_accessible :exercise_name
  has_many :checks, as: :checkable
end

class Check < ActiveRecord::Base
  belongs_to :checkable, polymorphic: true
  attr_accessible :checkable_id, :checkable_type, :exercise_name
end 
```

我意识到我需要在调用练习模型中的所需属性之前调用**.checkable 。**

```
<% @checks.each do |check| %>
  <%= check.checkable.exercise_name %>
  <%= check.checkable.created_at %>
<% end %> 
```

这会从练习表中提取正确的练习名称和“完成时间”（通过 created_at）。

# django - 我应该如何为几个相互重定向的 consective 视图设计 url？

> ID：15378439
> 
> 赞同：1
> 
> 时间：2013-03-13T06:27:28.137
> 
> 标签：django, django-urls

我有四个视图从一个重定向到另一个，这就是正在做的事情，但网址不起作用。

```
def show_item(request,id):
        a = Item.objects.get(pk=id)
        form = PartialOrderItemForm(request.POST,instance=a)
        # check validation of posted data
        if form.is_valid():
            order.add_to_order(request,a)
            url =urlresolvers.reverse('order_index',kwargs={'id':a.id})
            # redirect to order page
            return HttpResponseRedirect(url)
        ......
    return render_to_response('item.html',context,context_instance=RequestContext(request)) 
```

上面的视图重定向到下面的这个，

```
def show_order(request,id):
    item = Item.objects.get(pk=order_id)
    if request.method == 'POST':
        postdata = request.POST.copy()
        if postdata['submit'] == 'Remove':
            order.remove_from_order(request)
        if postdata['submit'] == 'Update':
            order.update_order(request)
        if postdata['submit'] == 'checkout':
            return HttpResponseRedirect(urlresolvers.reverse('checkout',kwargs={'id':order_id})) 
```

`show_order`重定向到`show_checkout`下面

```
def show_checkout(request,id):
    ......
    if request.method == 'POST':
        resto = Restaurant.objects.get(pk=id)
        postdata = request.POST.copy()
        form = forms.CheckoutForm(request.POST,postdata)
        if form.is_valid():
            order_created = create_order(request,resto)
            ....
            if postdata['submit'] == 'place order':
                reciept_url = urlresolvers.reverse('checkout_reciept')
                return HttpResponseRedirect(reciept_url)
    return render(request,'checkout/checkout.html',context) 
```

网址.py,

```
url(r'^your_order/(\d+)/$',show_order,name="order_index"),
    url(r'^item/(?P<id>\d+)/$',show_item, name="item_order"),
    url(r'^checkout/(?P<id>\d+)/$',show_checkout,name="checkout"), 
```

所有这一切都在第一次重定向给出错误时中断`NoReverseMatch`。我做得不对，我非常接受关于如何构建用于搜索场景的 url 的简要说明。

错误的完整追溯

```
Traceback:
File "/home/matsinvasion/projects/f4l/env/local/lib/python2.7/site-packages/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/home/matsinvasion/projects/f4l/f4l/live/views.py" in show_item
  140\.          url =urlresolvers.reverse('order_index',kwargs={'id':a.id})
File "/home/matsinvasion/projects/f4l/env/local/lib/python2.7/site-packages/django/core/urlresolvers.py" in reverse
  476\.     return iri_to_uri(resolver._reverse_with_prefix(view, prefix, *args, **kwargs))
File "/home/matsinvasion/projects/f4l/env/local/lib/python2.7/site-packages/django/core/urlresolvers.py" in _reverse_with_prefix
  396\.                 "arguments '%s' not found." % (lookup_view_s, args, kwargs))

Exception Type: NoReverseMatch at /orders/item/3/
Exception Value: Reverse for 'order_index' with arguments '()' and keyword arguments '{'id': 3}' not found. 
```

> 按照凯瑟琳的建议解决问题，导致异常 DoesNotEXist 在`Show_checkout`

```
Traceback:
File "/home/matsinvasion/projects/f4l/env/local/lib/python2.7/site-packages/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/home/matsinvasion/projects/f4l/f4l/live/views.py" in show_checkout
  59\.       resto = Restaurant.objects.get(pk=id)
File "/home/matsinvasion/projects/f4l/env/local/lib/python2.7/site-packages/django/db/models/manager.py" in get
  131\.         return self.get_query_set().get(*args, **kwargs)
File "/home/matsinvasion/projects/f4l/env/local/lib/python2.7/site-packages/django/db/models/query.py" in get
  366\.                     % self.model._meta.object_name)

Exception Type: DoesNotExist at /orders/checkout/3/
Exception Value: Restaurant matching query does not exist 
```

完全的`checkout_view`

```
def show_checkout(request,id):
    """checkout form to collect order information"""
    if order.is_empty(request):
        cart_url = urlresolvers.reverse('order_index')
        return HttpResponseRedirect(cart_url)
    if request.method == 'POST':
        resto = Restaurant.objects.get(pk=id)
        postdata = request.POST.copy()
        form = forms.CheckoutForm(request.POST,postdata)
        if form.is_valid():
            order_created = create_order(request,resto)
            order_number = order_created.id
            if order_number:
                request.session['order_number'] = order_number
            if postdata['submit'] == 'place order':
                reciept_url = urlresolvers.reverse('checkout_reciept')
                return HttpResponseRedirect(reciept_url)
    else:
        form = forms.CheckoutForm
    context = {
        'form':form,
    }
    return render(request,'checkout/checkout.html',context) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T07:11:52.827

您定义`order_id`而不是`id`. `order_id`没有价值。

```
def show_order(request,id):
    item = Item.objects.get(pk=id)
    .......

url(r'^your_order/(?P<id>\d+)/$',show_order,name="order_index"),
url(r'^item/(?P<id>\d+)/$',show_item, name="item_order"),
url(r'^checkout/(?P<id>\d+)/$',show_checkout,name="checkout"), 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T08:46:48.300

> 整个问题是如何解决的..感谢凯瑟琳 `show_order`必须有项目 ID 而不是 order_id 即应该是

```
def show_order(request,id):
    item = Item.objects.get(pk=id) 
```

并不是，

```
def show_order(request,id):
    item = Item.objects.get(pk=order_id) 
```

同样在 show_checkout 我必须以不同的方式获取餐厅 ID

不是这个

```
def show_checkout(request,id):
    ......
    if request.method == 'POST':
        resto = Restaurant.objects.get(pk=id) 
```

但是这个

```
def show_checkout(request,id):
    .......
    if request.method == 'POST':
        item = Item.objects.get(pk=id)
        postdata = request.POST.copy()
        form = forms.CheckoutForm(request.POST,postdata)
        if form.is_valid():
            order_created = create_order(request,item) 
```

并且在`create_order`

```
 def create_order(request,obj):
        """create new order containing each orderitem instance,save order and empty the order."""
        anon_user = User.objects.get(id=settings.ANONYMOUS_USER_ID)
        resto = Item.objects.get(pk=obj.id)
        orders = Order()

        checkout_form = forms.CheckoutForm(request.POST,instance=orders)
        checkout = checkout_form.save(commit=False)

        checkout.created_by = anon_user
        checkout.modified_by = anon_user
        checkout.restaurant = resto.owner 
```

# ruby-on-rails - 使用 capistrano 部署时隐藏 mysql2 密码的好方法是什么

> ID：15378446
> 
> 赞同：4
> 
> 时间：2013-03-13T06:27:57.763
> 
> 标签：ruby-on-rails, ruby-on-rails-3, deployment, capistrano

所以，这是我的 capistrano 文件

```
load 'deploy/assets'
require "bundler/capistrano" 
set :application, "XXXXXX"
set :repository,  "XXXXXX"

set :scm, :git # You can set :scm explicitly or Capistrano will make an intelligent guess based on known version control directory names
# Or: `accurev`, `bzr`, `cvs`, `darcs`, `git`, `mercurial`, `perforce`, `subversion` or `none`
set :repository , "XXXXXX"

role :web, "XXXXXX"                          # Your HTTP server, Apache/etc
role :app, "XXXXXX"                          # This may be the same as your `Web` server
role :db,  "XXXXXX", :primary => true # This is where Rails migrations will run
#role :db,  "your slave db-server here"

set :user, 'root'
set :use_sudo, false
set :deploy_to, "/var/www/#{application}"
set :deploy_via, :remote_cache
set :normalize_asset_timestamps, false

# if you want to clean up old releases on each deploy uncomment this:
# after "deploy:restart", "deploy:cleanup"

# if you're still using the script/reaper helper you will need
# these http://github.com/rails/irs_process_scripts

# If you are using Passenger mod_rails uncomment this:
namespace :deploy do

  task :start do ; end
  task :stop do ; end
  task :restart, :roles => :app, :except => { :no_release => true } do
    run "touch #{File.join(current_path,'tmp','restart.txt')}"
  end
end 
```

现在当我运行时`cap deploy`出现错误

```
Access denied for user 'root'@'localhost' (using password: NO) 
```

我假设那是因为我的 database.yml 文件是

```
development:
  adapter: sqlite3
  database: db/development.sqlite3
  pool: 5
  timeout: 5000

# Warning: The database defined as "test" will be erased and
# re-generated from your development database when you run "rake".
# Do not set this db to the same as development or production.
test:
  adapter: sqlite3
  database: db/test.sqlite3
  pool: 5
  timeout: 5000

production:
    adapter: mysql2
    encoding: utf8
    database: XXXXX
    username: root
    password: 
    socket: /tmp/mysql.sock 
```

现在因为我有一个公共 github 帐户。我不想传递我的密码并将其发布到 github。如果我不输入密码，我将无法部署该应用程序。

处理这个问题的好方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T06:31:32.953

您还需要确保您的 SSH 系统得到很好的保护，以防止人们以 Capistrano 机器人的身份登录。我建议限制对受密码保护的密钥对的访问。

加密服务器上的 .yml 文件是没有用的，因为您必须给机器人提供密钥，该密钥将被存储。. . 在同一台服务器上。在您的机器上加密它可能是一个好主意。Capistrano 可以在发送前对其进行解密。

或者

我解决这个问题的方法是将数据库密码放在一个文件中，该文件仅对我运行我的应用程序的用户具有读取权限。然后，在 database.yml 中，我使用 ERB 读取文件：

```
production:
  adapter: mysql
  database: my_db
  username: db_user
  password: <%= begin IO.read("/home/my_deploy_user/.db") rescue "" end %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T06:36:33.117

我会推荐以下内容：

1.  移至`config/database.yml`您`config/database.yml.sample`的仓库
2.  删除 中的所有敏感信息`config/database.yml.sample`，例如密码，并将
    “示例”配置文件提交到您的存储库。
3.  添加`config/database.yml`到您的`.gitignore`文件中，因此无法将其提交到 repo
4.  在您的服务器上，**手动**复制 `config/database.yml.sample`到Capistrano 为您创建的目录中`config/database.yml`。`shared/`这应该**在**您运行`cap deploy:setup`创建顶级目录`shared`和`releases`目录的命令后完成。这应该在设置应用程序时手动完成一次。
5.  在`shared/config/database.yml`服务器上，填写**实际**的数据库详细信息，包括密码。`chmod`该文件因此不应该被那些不应该访问的人读取。
6.  将以下内容添加到您的部署脚本中：

    ```
    namespace(:customs) do
       task :symlink_db, :roles => :app do
        run <<-CMD
          ln -nfs #{shared_path}/config/database.yml #{release_path}/config/database.yml
        CMD
      end
    end
    after "deploy:update_code", "customs:symlink_db" 
    ```

# javascript - 在javascript中获取id作为数字..？

> ID：15378447
> 
> 赞同：2
> 
> 时间：2013-03-13T06:28:04.763
> 
> 标签：javascript

一个简单的问题..

```
var x = document.getElementById('xNum');
var y = document.getElementById('xNum');
var result = x * y;

document.write(result); 
```

和

```
<div id="xNum">20</div>
<div id="yNum">50</div> 
```

它显示 20 和 50。为什么不计算 20 * 50？为什么它会以整数形式出现，或者如何在 div 中获取数字？

谢谢！

我没有得到任何结果：

```
var x = document.getElementById('xNum').innerHTML;
var y = document.getElementById('xNum').innerHTML;
var result = parseInt(x) * parseInt(y);

document.write(result); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-13T06:29:52.927

使用[parseInt](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt)并在其 HTML 上处理它，

```
var result = parseInt(x.innerHTML) * parseInt(y.innerHTML) 
```

如果你不需要支持IE9之前的浏览器，你应该使用`textContent`innerHTML来代替。

如果您的数字可能是浮点数，则应改为检查[parseFloat](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseFloat)

如果您需要能够处理数字，`012`您应该指定 radix 参数，因为它们可能会被`parseInt`. 在这种情况下，您应该使用`parseInt(x.innerHTML,10)`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-13T06:30:22.953

它应该是

```
var x = document.getElementById('xNum').innerHTML;
var y = document.getElementById('yNum').innerHTML;
var result = x * y;

document.write(result); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-13T06:31:09.103

将它们解析为整数：

```
var x = document.getElementById('xNum');
var y = document.getElementById('yNum');

var result = parseInt(x.innerHTML, 10) * parseInt(y.innerHTML, 10); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-13T06:30:35.247

您获得的值是一个字符串，因此为了将其用作数字，您应该将其转换为整数（或浮点数）：

```
var x = +document.getElementById('xNum').innerHTML;
var y = +document.getElementById('xNum').innerHTML;
var result = x * y; 
```

我使用了一元运算`+`符，还有其他方法`parseInt`，例如`Number`构造函数等。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-13T06:47:54.000

到目前为止，可能的方法已经用尽了，但这里有一个例子`textContent`：

```
var x = document.getElementById('xNum'),
y = document.getElementById('yNum'),
toIntNum = function(element) {
    return parseInt(element.textContent || element.innerText || 0, 10);
},
result;

result = toIntNum(x) * toIntNum(y); 
```

[**演示**](http://jsfiddle.net/hMSCW/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-13T06:30:15.453

JS：

```
var x = document.getByElementId('xNum').innerHTML;
var y = document.getByElementId('xNum').innerHTML;
var result = parseInt(x) * parseInt(y);

document.write(result); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-13T06:32:16.190

您必须转换为 int 才能完成计算。默认情况下，该值视为 string 。

```
 var x = document.getByElementId('xNum');
var y = document.getByElementId('xNum');
var result = parseInt(x) * parseInt(y);  //use parseInt or parseDouble 

document.write(result); 
```

和

`<div id="xNum">20</div> <div id="yNum">50</div>`

它给 1000

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-13T06:34:57.953

您必须`parseInt()`在 javascript 中使用函数来解析字符串以返回整数。

你的代码应该是这样的：

```
 var x = document.getElementById('xNum');
   var y = document.getElementById('yNum');
   var result = parseInt(x.innerHTML) * parseInt(y.innerHTML); 

   document.write(result); 
```

# android - 值配置限定符不起作用

> ID：15378454
> 
> 赞同：5
> 
> 时间：2013-03-13T06:28:40.510
> 
> 标签：android, android-layout

我试图在 dimensions.xml 中设置边距的尺寸。所以为了支持不同的屏幕尺寸，我创建了像这样的文件夹

```
 values
        dimensions.xml
    values-land
        dimensions.xml
    values-small
        dimensions.xml 
```

但它似乎没有从各个文件夹中获取值，例如，在横向模式下，它没有从 values-land 文件夹中获取边距值。

谢谢你。

# jquery-mobile - jQuery移动自动完成加载图标

> ID：15378456
> 
> 赞同：1
> 
> 时间：2013-03-13T06:28:53.943
> 
> 标签：jquery-mobile, autocomplete

当我们在 jquery mobile 1.3 自动完成中进行远程调用时，是否可以在“X”明文图标之前的过滤器输入的最右侧显示加载图标。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T03:46:28.220

**更新：**

最**简单**的方法是`delete`在进行远程调用之前替换 jQM 搜索小部件的图标，然后在完成处理后将其返回。*从用户体验来看，恕我直言，这比添加第二个图标更有意义。*

**首先**为我们的 ajax 图标定义类

```
.ui-icon-ajax {
    background-image: url(http://code.jquery.com/mobile/1.3.0/images/ajax-loader.gif);
    background-size: 18px 18px;
} 
```

**在我们进行 ajax 调用之前的**第二个替换图标****

 **```
$("form.ui-listview-filter a span.ui-btn-inner span.ui-icon")
    .removeClass("ui-icon-delete")
    .addClass("ui-icon-ajax"); 
```

**第三次**返回删除图标返回

```
$("form.ui-listview-filter a span.ui-btn-inner span.ui-icon")
    .removeClass("ui-icon-ajax")
    .addClass("ui-icon-delete"); 
```

**这是工作[jsFiddle 示例](http://jsfiddle.net/pmatseykanets/dcRJe/)****

# regex - Solr 查询不适用于带有空格的输入，尽管分析阶段的输出似乎可以正常工作

> ID：15378457
> 
> 赞同：1
> 
> 时间：2013-03-13T06:28:53.930
> 
> 标签：regex, solr, analysis, pattern-finding

我遇到了这里详述的问题。我有一个将床和浴室信息存储到其中的文本字段，同时索引我分别为 2 个床和 3 个浴室存储 2b 3bt 之类的值。最后，我需要支持“2beds 3baths”、“beds 2 3baths”、“2bed rooms 3baths”、“2bd 3bth”等查询。

为此，我使用 text_general 类型的文本字段，如下所示

```
 <field name="text" type="text_general" indexed="true" stored="false" multiValued="true"/>

    <fieldType name="text_general" class="solr.TextField" positionIncrementGap="100">
    <analyzer type="index">
       <tokenizer class="solr.StandardTokenizerFactory"/>
       <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="true" />       
       <filter class="solr.LowerCaseFilterFactory"/>
    </analyzer>
    <analyzer type="query">
       <charFilter class="solr.PatternReplaceCharFilterFactory" pattern="(?i)((\d\.?\d{0,2})\s*(bed\s*rooms|bed\s*room|beds|bed|bdr|bd|br|b)|(bed\s*rooms|bed\s+room|beds|bed|bdr|bd|br|b)\s*(\d\.?\d{0,2}))" replacement="$2$5b" />
       <charFilter class="solr.PatternReplaceCharFilterFactory" pattern="(?i)((\d\.?\d{0,2})\s*(bath\s*rooms|bath\s*room|baths|bath|bth|bt|bh|ba)|(bath\s*rooms|bath\s*room|baths|bath|bth|bt|bh|ba)\s*(\d\.?\d{0,2}))" replacement="$2$5bt" />     
       <tokenizer class="solr.StandardTokenizerFactory"/>
       <filter class="solr.TrimFilterFactory" updateOffsets="true"/>        
       <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="true" />        
       <filter class="solr.LowerCaseFilterFactory"/>
    </analyzer>
    </fieldType> 
```

我尝试使用管理界面进行 Solr 查询，它几乎适用于所有组合，除了中间空间的情况，如“6 床 6 浴室”或“6 卧室 6 浴室”同时“6 床 6 浴室”让我正确结果。这是我为这个查询传递给 solr 的参数的 url

```
 /solr/select?q=6b+6ba&wt=xml&indent=true&q.op=AND 
```

我检查了每个案例的 Solr 管理分析界面，并没有发现任何差异。由于分析阶段产生了相同的结果，我希望这两个查询的工作方式相似。谁能指导我，为什么这两个查询的行为方式不同？

这就是我在 solr 管理分析界面上看到的两个有问题的查询

```
 For input : 6 beds 6 bath room,

    PRCF 6b 6bath room
    PRCF 6b 6bt
    ST   6b | 6bt
    TF   6b | 6bt
    SF   6b | 6bt
    LCF  6b | 6bt

    For input : 6b 6bt
    PRCF 6b 6bt
    PRCF 6b 6bt
    ST   6b | 6bt
    TF   6b | 6bt
    SF   6b | 6bt
    LCF  6b | 6bt 
```

**示例输入和输出**- 这是我尝试使用上面已经提到的字段定义的一些示例输入，注意：(#) 只是序列号，不是输入的一部分

```
 (1) 2beds 3baths Fresno
   (2) 3baths 2beds Fresno
   (3) Fresno 2bedroom 3bathroom
   (4) beds2 3baths Fresno
   (5) beds2 bathrooms3 Fresno 
```

即使现在，上述所有内容都可以正常工作，以下是当前字段定义对我来说仍然值得关注的一些输入

```
 (6) 2 beds 3 baths Fresno
   (7) 2 bed rooms 3 baths Fresno
   (8) Fresno 2 bed room  3 baths
   (9) Fresno 3baths 2   bed rooms 
```

我期望在分析阶段之后以相同的序列号顺序对上述输入的输出如下（在索引 2beds 3 baths 时，我将数据索引为 2b 3bt），

```
 (1) 2b 3bt Fresno
   (2) 3bt 2b Fresno
   (3) Fresno 2b 3bt
   (4) 2b 3bt Fresno
   (5) 2b 3bt Fresno
   (6) 2b 3bt Fresno
   (7) 2b 3bt Fresno
   (8) Fresno 2b 3bt
   (9) Fresno 3bt 2b 
```

但到目前为止，我认为我做得很好，因为我可以生成与我通过 Solr 管理分析界面确认的完全相同的分析输出，这里真正的问题是我可以获取查询以获取正确的搜索结果输入的第一部分（即）到 #5 但对于从 #6 到 #9 的输入我没有得到任何结果

这是我尝试输入 #1 的示例查询格式，即 2beds 3baths Fresno

```
 /solr/collection1/select?q=2beds+3baths+Fresno&wt=xml&indent=true&q.op=AND 
```

而这个为#6，即）2 床 3 浴室弗雷斯诺

```
/solr/collection1/select?q=2+beds+3+baths+Atlanta&wt=xml&indent=true&q.op=AND 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T04:33:28.017

我在这里应用的最终解决方案如下，

我从查询时间分析器中删除了床和浴室的 PatternReplaceCharFilterFactory，并对来自我的 servlet 的输入文本进行了类似的模式替换。

所以现在对于以下输入文本

```
 2 beds 3 baths Fresno 
```

从我的 servlet 代码中，我将其转换为

```
 2b 3bt Fresno 
```

这就是我然后传递给 solr 的工作......现在工作正常

这是 text_general 字段的修改后的字段类型定义，

```
 <fieldType name="text_general" class="solr.TextField" positionIncrementGap="100">
      <analyzer type="index">
         <tokenizer class="solr.StandardTokenizerFactory"/>
         <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="true" />
         <filter class="solr.LowerCaseFilterFactory"/>
     </analyzer>
     <analyzer type="query">
        <tokenizer class="solr.StandardTokenizerFactory"/>
    <filter class="solr.TrimFilterFactory" updateOffsets="true"/>       
        <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="true" />
        <filter class="solr.LowerCaseFilterFactory"/>
     </analyzer>
  </fieldType> 
```

# c# - 在 C#.NET 中以特定格式创建 DateTime 对象的类型

> ID：15378459
> 
> 赞同：1
> 
> 时间：2013-03-13T06:29:05.863
> 
> 标签：c#, .net, date, datetime

在我的项目中，我需要创建`DateTime`以下格式的对象。

**"MM/dd/yy hh:mm tt"**（不带秒和两位数格式的年份）

当我使用字符串（如`"7/12/12 04:50 AM"`）创建日期时间对象时，创建的日期时间对象采用完整日期时间结构的格式。`(7/12/2012 04:50:00 AM)`

有没有办法以特定格式创建日期时间对象（不是字符串格式）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T06:38:22.333

不，它具有预定义*的日期和时间值（例如年、月和日，或刻度数）。*

除了以您需要的格式将其转换为字符串之外，别无他法。

```
DateTime dat1 = new DateTime();
// The following method call displays 1/1/0001 12:00:00 AM. 
```

它使用默认`DateTime.ToString()`方法使用短日期和长时间模式显示日期和时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T06:34:03.980

DateTime 对象没有任何格式。它有成员，这些成员将具有价值。如果不提供这些值，它们将为 0。隐藏它们的唯一方法是将 DateTime 对象格式化为不会显示这些值的字符串。但是在 DateTime 对象本身中，它们仍然会存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T06:34:07.630

不，该`DateTime`对象以预定格式*存储日期和时间。*

*在显示*日期时，您应该真正尝试做的事情。

也许如果您解释您要解决的真正问题，有人可以提出更好的选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T11:28:09.717

您可以尝试将其转换为字符串并给出您指定的格式，如下所示：

```
datetime dt=new datetime();
string dateval=dt.tostring("MM/dd/yy hh:mm tt") 
```

谢谢。

# java - JPA merge() 仅更新某些字段。其他更改无法识别

> ID：15378460
> 
> 赞同：5
> 
> 时间：2013-03-13T06:29:09.627
> 
> 标签：java, hibernate, jpa, merge, persistence

这是我的第一篇文章。所以，我希望这个问题是令人兴奋的。我有一个使用 Swing+JPA 处理 PostgreSQL 数据库的 java 程序。我使用 EclipseLink JPA 2.0 作为我的 Persistence Provider。我的实体类是由 Netbeans 7.2.1 自动生成的

我面临的问题是：在更新期间，我更改了使用 find() 检索到的对象的四个字段，然后使用 merge() 更新数据库中的对象。表中识别并更新了四项更改中的三项，但其中一项未更新。

我尝试了几件事来解决这个问题：我尝试更改与我的持久单元的同步策略相关的选项，更改代码中的行位置（随着其他字段的更新），我还尝试为实体类字段添加前缀带有注释 @Basic(optional = false).. 我的任何一个尝试都有效。

这是我的**实体类**（Senha.java）的代码：

```
package model;

import java.io.Serializable;
import java.util.Date;
import javax.persistence.Basic;
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.NamedQueries;
import javax.persistence.NamedQuery;
import javax.persistence.Table;
import javax.persistence.Temporal;
import javax.persistence.TemporalType;
import javax.xml.bind.annotation.XmlRootElement;

/**
 *
 * @author Diego Dias
 */
@Entity
@Table(name = "senha")
@XmlRootElement
@NamedQueries({
    @NamedQuery(name = "Senha.findAll", query = "SELECT s FROM Senha s"),
    @NamedQuery(name = "Senha.findById", query = "SELECT s FROM Senha s WHERE s.id = :id"),
    @NamedQuery(name = "Senha.findByGuiche", query = "SELECT s FROM Senha s WHERE s.guiche = :guiche"),
    @NamedQuery(name = "Senha.findByStatus", query = "SELECT s FROM Senha s WHERE s.status = :status"),
    @NamedQuery(name = "Senha.findByHchamada", query = "SELECT s FROM Senha s WHERE s.hchamada = :hchamada"),
    @NamedQuery(name = "Senha.findByAtendente", query = "SELECT s FROM Senha s WHERE s.atendente = :atendente"),
    @NamedQuery(name = "Senha.findByHcriacao", query = "SELECT s FROM Senha s WHERE s.hcriacao = :hcriacao"),
    @NamedQuery(name = "Senha.findByDtcriacao", query = "SELECT s FROM Senha s WHERE s.dtcriacao = :dtcriacao"),
    @NamedQuery(name = "Senha.findByNumeracao", query = "SELECT s FROM Senha s WHERE s.numeracao = :numeracao"),
    @NamedQuery(name = "Senha.findByNchamadas", query = "SELECT s FROM Senha s WHERE s.nchamadas = :nchamadas"),
    @NamedQuery(name = "Senha.findByPainel", query = "SELECT s FROM Senha s WHERE s.painel = :painel"),
    @NamedQuery(name = "Senha.findMaxNumeracaoByDtcriacao", query = "SELECT MAX(s.numeracao) FROM Senha s WHERE s.dtcriacao = :dtcriacao"),
    @NamedQuery(name = "Senha.findByStatusAndHchamadaAndHcriacao", query = "SELECT s FROM Senha s WHERE s.status = :status AND s.hchamada <= :hchamada AND s.hcriacao >= :hcriacao")})
public class Senha implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Basic(optional = false)
    @Column(name = "id")
    private Integer id;
    @Column(name = "guiche")
    private String guiche;
    @Column(name = "status")
    private Character status;
    @Column(name = "hchamada")
    @Temporal(TemporalType.TIME)
    private Date hchamada;
    @Column(name = "atendente")
    private Integer atendente;
    @Column(name = "hcriacao")
    @Temporal(TemporalType.TIME)
    private Date hcriacao;
    @Column(name = "dtcriacao")
    @Temporal(TemporalType.DATE)
    private Date dtcriacao;
    @Column(name = "numeracao")
    private Integer numeracao;
    @Column(name = "nchamadas")
    private Integer nchamadas;
    @Column(name = "painel")
    private Boolean painel;

    public Senha() {
    }

    public Senha(Integer id) {
        this.id = id;
    }

    public Integer getId() {
        return id;
    }

    public void setId(Integer id) {
        this.id = id;
    }

    public String getGuiche() {
        return guiche;
    }

    public void setGuiche(String guiche) {
        this.guiche = guiche;
    }

    public Character getStatus() {
        return status;
    }

    public void setStatus(Character status) {
        this.status = status;
    }

    public Date getHchamada() {
        return hchamada;
    }

    public void setHchamada(Date hchamada) {
        this.hchamada = hchamada;
    }

    public Integer getAtendente() {
        return atendente;
    }

    public void setAtendente(Integer atendente) {
        this.atendente = atendente;
    }

    public Date getHcriacao() {
        return hcriacao;
    }

    public void setHcriacao(Date hcriacao) {
        this.hcriacao = hcriacao;
    }

    public Date getDtcriacao() {
        return dtcriacao;
    }

    public void setDtcriacao(Date dtcriacao) {
        this.dtcriacao = dtcriacao;
    }

    public Integer getNumeracao() {
        return numeracao;
    }

    public void setNumeracao(Integer numeracao) {
        this.numeracao = numeracao;
    }

    public Integer getNchamadas() {
        return nchamadas;
    }

    public void setNchamadas(Integer nchamadas) {
        this.nchamadas = nchamadas;
    }

    public Boolean getPainel() {
        return painel;
    }

    public void setPainel(Boolean painel) {
        this.painel = painel;
    }

    @Override
    public int hashCode() {
        int hash = 0;
        hash += (id != null ? id.hashCode() : 0);
        return hash;
    }

    @Override
    public boolean equals(Object object) {
        // TODO: Warning - this method won't work in the case the id fields are not set
        if (!(object instanceof Senha)) {
            return false;
        }
        Senha other = (Senha) object;
        if ((this.id == null && other.id != null) || (this.id != null && !this.id.equals(other.id))) {
            return false;
        }
        return true;
    }

    @Override
    public String toString() {
        return "model.Senha[ id=" + id + " ]";
    }

} 
```

这是**更新我的对象的方法的相关代码**。里面的代码...不影响对象。

```
EntityManagerFactory emf = ctrlCreateEntityManager();
EntityManager em = emf.createEntityManager();

...

current = em.find(Senha.class, getCurrentId());
if (current.getStatus().equals('W')) {
    em.getTransaction().begin();
    current.setStatus(current.getNchamadas() >= 2 ? 'L' : current.getStatus());
    current.setHchamada(Calendar.getInstance().getTime());
    current.setNchamadas(current.getNchamadas() + 1);
    current.setPainel(true);
    em.merge(current);
    em.getTransaction().commit();
    frame.getLbNumeroSenha().setText(formatSenha(current.getNumeracao()));
} 
... 
em.close();
emf.close(); 
```

当我查看数据库时，Status Hchamada、Nchamadas 字段已更新，但 Painel 字段（布尔类型）未更新。跟随我展示了来自 JPA/EclipseLink 的日志摘录：

```
**begin transaction**

**[EL Fine]**: 
Thread(Thread[AWT-EventQueue-1,4,file:...-threadGroup])--UPDATE senha SET
 hchamada = ?, nchamadas = ? WHERE (id = ?)
    bind => [02:15:49, 2, 4]

**[EL Finer]**:
Thread(Thread[AWT-EventQueue-1,4,file:...-threadGroup])

**commit transaction** 
```

查看代码，我在更改值之前放置了一个 if，以查看 JPA 管理的实体是否已经具有我想要设置的值。下面是修改后的代码：

```
EntityManagerFactory emf = ctrlCreateEntityManager();
EntityManager em = emf.createEntityManager();

...

current = em.find(Senha.class, getCurrentId());
if (current.getStatus().equals('W')) {
    em.getTransaction().begin();
    current.setStatus(current.getNchamadas() >= 2 ? 'L' : current.getStatus());
    current.setHchamada(Calendar.getInstance().getTime());
    current.setNchamadas(current.getNchamadas() + 1);
    if (current.getPainel()) {
        System.out.println("Painel is already true");
    } 
    current.setPainel(true);
    em.merge(current);
    em.getTransaction().commit();
    frame.getLbNumeroSenha().setText(formatSenha(current.getNumeracao()));
} 
... 
em.close();
emf.close(); 
```

当我运行代码时，我收到一条消息，表明我的实体已经设置了我想在数据库中写入的值。因此，我认为如果 JPA/EclipseLink 相对于由它管理的实体类没有更改，则它不会更新该值。但是，在运行代码之前，我手动将数据库字段painel 更新为false。然后：

1.  我不明白为什么在检索实体时无法识别此更新。
2.  如何强制 JPA 更新所有字段（即使不会更改）？

**可能（不是很好）的解决方案：**

就在发布此消息的那一刻，我意识到了一个可能的解决方案（不太好）。在更新之前修改代码以从数据库中删除实体（给予提交），然后启动其他事务，更新对象。它是，再次删除和持久化对象。有用。

在我尝试在同一个事务中使用 remove() 和 merge() 之前，它没有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-31T21:46:01.467

根据实现，在您的情况下为 EclipseLink，JPA**将始终插入所有映射的列，并且只会更新已更改的列**。如果需要替代操作，则可以使用 API、SQL 或存储过程自定义用于这些操作的查询。

您可以使用 Hibernate dynamicInsert 和 dynamicUpdate 修改此行为，但不能使用 EclipseLink。这些迁移指南告诉你。

*   [http://wiki.eclipse.org/EclipseLink/Examples/JPA/Migration/Hibernate/V3Annotations#Dynamic_Insert.2FUpdate](http://wiki.eclipse.org/EclipseLink/Examples/JPA/Migration/Hibernate/V3Annotations#Dynamic_Insert.2FUpdate)
*   [http://www.eclipse.org/eclipselink/documentation/2.5/solutions/migrhib002.htm](http://www.eclipse.org/eclipselink/documentation/2.5/solutions/migrhib002.htm)

# ios - Facebook iOS SDK 3.2 重新打开会话总是失败

> ID：15378461
> 
> 赞同：2
> 
> 时间：2013-03-13T06:29:13.523
> 
> 标签：ios, facebook, session, sdk

基本上我浏览了这个页面并实现了我的 Facebook 登录。

[https://developers.facebook.com/docs/howtos/login-with-facebook-using-ios-sdk/](https://developers.facebook.com/docs/howtos/login-with-facebook-using-ios-sdk/)

接下来，当用户再次打开应用程序时，我尝试重新打开会话：

```
[appDelegate openSessionWithAllowLoginUI:NO];

//The method is:

- (BOOL)openSessionWithAllowLoginUI:(BOOL)allowLoginUI {
    NSArray *permissions = [[NSArray alloc] initWithObjects:
        @"email", 
        @"user_likes",
        nil];
    return [FBSession openActiveSessionWithReadPermissions:permissions
                                              allowLoginUI:allowLoginUI
                                         completionHandler:^(FBSession *session,
                                                         FBSessionState state,
                                                         NSError *error) {
                                         [self sessionStateChanged:session
                                                             state:state
                                                             error:error];
                                     }];
} 
```

但是 FBSessionState 总是为 0：

```
/*! One of two initial states indicating that no valid cached token was found */
    FBSessionStateCreated                   = 0, 
```

我几乎尝试了所有方法，使用 FBSessionTokenCachingStrategy 存储和恢复令牌数据，但都没有奏效。如果我打电话

```
[appDelegate openSessionWithAllowLoginUI:YES]; 
```

并在会话开始时显示 LoginUI，但我不想每次都显示 LoginUI。你能帮助我吗？

# asp.net-mvc - 如何使用mvc 2中的路由隐藏url中的参数

> ID：15378465
> 
> 赞同：0
> 
> 时间：2013-03-13T06:29:32.257
> 
> 标签：asp.net-mvc, asp.net-mvc-2, asp.net-mvc-routing

我有网址： [http ://www.abc.com/Results?Id=1111-11&Name=abcd](http://www.abc.com/Results?Id=1111-11&Name=abcd)

我想要如下网址： [http ://www.abc.com/US/Name/abcd](http://www.abc.com/US/Name/abcd)

我如何隐藏操作名称（结果）以及参数（Id，名称）。我只想隐藏不删除。id、name 和 action name 应该传递给控制器​​。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T07:06:34.847

您无法删除该 ID。如果您将其从路由中删除，则无法再将其传递给服务器。你认为它会来自哪里？您可以做的是具有以下 SEO 友好的 url 模式：

```
http://www.abc.com/US/1111-11/abcd 
```

就像 StackOverflow 用问题做的那样。查看地址栏，您将看到：

```
https://stackoverflow.com/questions/15378465/how-to-hide-parameter-in-url-using-routing-in-mvc-2 
```

你有身份证和名字。

为了实现这一点，您可以具有以下路由定义：

```
routes.MapRoute(
    name: "ResultsRoute",
    url: "us/{id}/{name}",
    defaults: new { controller = "Search", action = "Results" }
); 
```

您可能遇到的下一个问题是名称是否包含一些特殊字符。Scott Hanselman 在他的[`blog post`](http://www.hanselman.com/blog/ExperimentsInWackinessAllowingPercentsAnglebracketsAndOtherNaughtyThingsInTheASPNETIISRequestURL.aspx). 解决这个问题的正确方法是从名称中删除所有危险字符。这[`for example the filtering function`](https://stackoverflow.com/a/25486/29407)是 StackOverflow 使用的。所以想法是通过这个过滤函数传递名称并生成一个所谓的*slug*，它对 SEO 友好，但在您的控制器操作中不需要，因为您已经有了相应的 id：

```
public ActionResult Results(int id)
{
    ...
} 
```

# ruby-on-rails - 为 rails ActiveRecord 模型对象设置实例变量不起作用

> ID：15378467
> 
> 赞同：1
> 
> 时间：2013-03-13T06:29:38.557
> 
> 标签：ruby-on-rails, ruby

在 Ruby on Rails 模型类中：

```
class DeliveryItem < ActiveRecord::Base
  attr_accessible :state
end

item=DeliveryItem.new
item.instance_variable_set "@name","apple" 
```

> NoMethodError：未定义的方法“名称”#

我该如何进行这项工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T07:01:54.067

你可以试试这个：

```
item.instance_variable_set(:@attributes, {'name' => 'apple'}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T07:06:26.090

该错误意味着您没有`name`. `DeliveryItem`这意味着没有 setter 方法，`name`或者您没有`name`列。所以要解决这个问题，你必须要么

*   添加一`name`列或
*   `name`为or创建一个 setter 方法
*   使用`attr_accessor`或`attr_writer`为您完成工作

将以下内容添加到您的模型中

```
class DeliveryItem < ActiveRecord::Base
  attr_accessor :name
end 
```

那么你应该能够使用你的代码

```
item = DeliveryItem.new
item.instance_variable_set "@name","apple"

# or just use item.name=
item.name = 'apple' 
```

# android - 如何从android中的javascript函数调用本机cordova插件？

> ID：15378469
> 
> 赞同：5
> 
> 时间：2013-03-13T06:29:42.193
> 
> 标签：android, cordova

我创建了一个扩展 CordovaPlugin 的 java 类。

例如，

```
public class SampleCardovaPlugin extends CordovaPlugin {
    @Override
    public boolean execute(String action, JSONArray args, CallbackContext callbackContext) throws JSONException {
        if (action.equals("echo")) {
            String message = args.getString(0); 
            this.echo(message, callbackContext);
            return true;
        }
        return false;
    }
private void echo(String message, CallbackContext callbackContext) {
    if (message != null && message.length() > 0) { 
        callbackContext.success(message);
    } else {
        callbackContext.error("Expected one non-empty string argument.");
    }
} 
```

}

我正在使用cordova2.5.0。

我如何从我的 javascript 函数中调用这个插件？请只做那些需要的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-22T14:57:40.143

您必须首先在 res 文件夹中的 config.xml 中注册您的插件。

然后在javascript中：

```
cordova.exec(
    function(winParam) {},
    function(error) {},
    "service",
    "action",
    ["firstArgument", "secondArgument", 42, false]); 
```

所以在你的情况下

```
cordova.exec(
    function(data) { console.log(data);},
    function(error) { console.log(error);},
    "SampleCardovaPlugin",
    "echo",
    ["echo"]); 
```

您还必须确保设备已准备就绪

看看[http://docs.phonegap.com/en/2.0.0/guide_plugin-development_index.md.html](http://docs.phonegap.com/en/2.0.0/guide_plugin-development_index.md.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-12T09:09:24.543

**您必须创建插件**（java 类、package.json、plugin.xml ...）没有更简单的方法可以做到这一点。但是您可以创建非常简单的一个（比文档中的那个容易得多）->**[在我的博客上阅读更多内容](https://filipmolcik.com/how-to-call-cordova-android-function-from-javascript/)。**

然后你在 JS 中这样调用它：

```
cordova.exec(function(success) {},          //success callback
         function(error) {},                //error callback
         "Example",                         //class name
         "YOUR_ACTION_NAME_PARAMETER",      //action name 
         ["Dog", "Pig", 42, false]);        //args 
```

# javascript - 无需单击清除按钮即可清除过滤

> ID：15378470
> 
> 赞同：5
> 
> 时间：2013-03-13T06:29:45.557
> 
> 标签：javascript, kendo-ui

我的应用程序中有 kendo-grid。它具有可过滤的“真”。当我们应用过滤时，网格项目会被过滤，网格大小也会重新调整大小。当我们清除过滤器列中的文本然后自动网格显示页面加载中显示的项目而不按清除按钮。这可能吗？我的网格代码是

```
var grid = $("#grid").kendoGrid({
  dataSource: {
    type  : "odata",
    transport      : {
      read: "http://demos.kendoui.com/service/Northwind.svc/Orders"
    },
    schema         : {
      model: {
        fields: {
          OrderID  : { type: "number" },
          Freight  : { type: "number" },
          ShipName : { type: "string" },
          OrderDate: { type: "date" },
          ShipCity : { type: "string" }
        }
      }
    },
    pageSize       : 10
  },
  filterable: true,
  sortable  : true,
  pageable  : true,
  columns   : [
    {
    field     : "OrderID",
    filterable: false
  },
  "Freight",
  {
    field : "OrderDate",
    title : "Order Date",
    width : 100,
    format: "{0:MM/dd/yyyy}"
  },
  {
    field: "ShipName",
    title: "Ship Name",
    width: 200
  },
  {
    field: "ShipCity",
    title: "Ship City"
  }
  ]
}).data("kendoGrid"); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-13T08:55:39.423

您需要使用网格数据源的[过滤方法：](http://docs.kendoui.com/api/framework/datasource#filter)

```
$("#grid").data("kendoGrid").dataSource.filter([]); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-01-27T18:17:36.380

如果你打电话

```
grid.dataSource.filter({}) 
```

有可能您会删除整个 dataSource 过滤器，而不仅仅是网格中的字段。我的意思是 dataSource 可以出于某种原因进行预过滤。

我开发了一种方法，它只删除网格的过滤器。

```
kendo.ui.Grid.prototype.clearFilters = function(args){
    var ignore = [];
    // test arguments
    if(typeof args === 'object'){
        if(args.hasOwnProperty('ignore')){
            if(args.ignore.length > 0){
                ignore = args.ignore;
            }
        }
    }

    // get dataSource of grid and columns of grid
    var fields = [], filter = this.dataSource.filter(), col = this.columns;
    if( $.isEmptyObject(filter) || $.isEmptyObject(filter)) return;

    // Create array of Fields to remove from filter and apply ignore fields if exist
    for(var i = 0, l = col.length; i < l; i++){
        if(col[i].hasOwnProperty('field')){
            if(ignore.indexOf(col[i].field) === -1){
                fields.push(col[i].field)
            }
        }
    }

    if($.isEmptyObject(fields)) return;

    // call "private" method
    var newFilter = this._eraseFiltersField(fields, filter)

    // set new filter
    this.dataSource.filter(newFilter);
} 
```

这是第二种方法。它是分开的，因为它可以递归调用：

```
kendo.ui.Grid.prototype._eraseFiltersField = function(fields, filter){
    for (var i = 0; i < filter.filters.length; i++) {

        // For combination 'and' and 'or', kendo use nested filters so here is recursion
        if(filter.filters[i].hasOwnProperty('filters')){
            filter.filters[i] = this._eraseFiltersField(fields, filter.filters[i]);
            if($.isEmptyObject(filter.filters[i])){
                filter.filters.splice(i, 1);
                i--;
                continue;
            }
        }

        // Remove filters
        if(filter.filters[i].hasOwnProperty('field')){
            if( fields.indexOf(filter.filters[i].field) > -1){
                filter.filters.splice(i, 1);
                i--;
                continue;
            }
        }
    }

    if(filter.filters.length === 0){
        filter = {};
    }

    return filter;
} 
```

方法可以这样调用：

```
$('#my-grid').data('kendoGrid').clearFilters({
    ignore: ['Field1', 'Field2']
}) 
```

存在递归是因为 dataSource 过滤器看起来像：

```
{
    logic: "and"
    filters: [
        {
            logic: "or"     
            filters:[
                        {
                            field: "Field1"
                            operator: "contains"
                            value: "val1"
                        },
                        {
                            field: "Field1"
                            operator: "contains"
                            value: "val2"
                        }
            ],
        },
        {
            field: "Field3"
            operator: "contains"
            value: "val3"
        }
    ],
} 
```

和方法在所有嵌套的“过滤器”数组上递归调用。上面的过滤器是这样的：

```
("Field3" === "val3" && ("Field1" === "val1" || "Field1" === "val2" ) ) 
```

该方法并不完美，并且经过了一些测试。我希望这可以帮助别人。

# jakarta-ee - 我们可以自定义 Liferay 选项卡以在选项卡中动态包含图像以进行区分吗？

> ID：15378472
> 
> 赞同：1
> 
> 时间：2013-03-13T06:29:50.507
> 
> 标签：jakarta-ee, liferay

我想修改 Liferay 选项卡，因为我有三类选项卡，我想通过动态添加图标到每个选项卡来区分它们。可能吗？

以下是我的代码片段。

```
if(Integer.parseInt(group[4].toString())==1){
    tabNames += group[1].toString() + " - (Club),";
}else{
    tabNames += group[1].toString() + ",";
} 
```

我可以添加图像吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T09:59:29.197

如果您指的是`<liferay-ui:tabs>`标签，这似乎没有对添加图像的开箱即用支持。但是，它看起来会尝试为您提供的值查找翻译。当您只为您的选项卡提供一个翻译键并将图像标签包含在该键的实际翻译中时，您*可能会作弊。*我没有对此进行测试，但是从快速查看源代码来看，这些值似乎没有被转义（因为它们是完全在服务器端生成的）。

当然，如果您的组是完全运行时可配置的，这将不会真正起作用 - 因为显然您不会为该选项卡中可能出现的所有内容提供正确的翻译键。

如果您要求除此之外的任何其他选项卡实现，请重新表述您的问题，否则只需将本地化挂钩添加到您正在实现此选项卡的 portlet 插件。

# java - 无法读取 struts2 拦截器中的属性文件

> ID：15378473
> 
> 赞同：0
> 
> 时间：2013-03-13T06:29:50.647
> 
> 标签：java, struts2

我定义了一个拦截器和一个拦截器堆栈，如下所示：

```
<package name="interceptor" extends="struts-default">
    <interceptors>
        <interceptor name="log"
            class="com.log.LogInterceptor" />
        <interceptor-stack name="interceptorStack">
            <interceptor-ref name="defaultStack" />
            <interceptor-ref name="log" />
        </interceptor-stack>
    </interceptors>

    <default-interceptor-ref name="interceptorStack" />
</package> 
```

LogInterceptor 类是这样的：

```
package com.log;

import java.io.IOException;
import java.io.InputStream;
import java.util.Properties;

import com.opensymphony.xwork2.ActionInvocation;
import com.opensymphony.xwork2.interceptor.AbstractInterceptor;

public class LogInterceptor extends AbstractInterceptor {

private static final long serialVersionUID = 1L;
private Properties prop;

@Override
public void init() {
    InputStream in = Object.class.getResourceAsStream( "/com/log/interceptor.properties" );
    try {
        prop.load( in );
    } catch (IOException e) {
        e.printStackTrace();
    }
    System.out.println( "init" );
}

@Override
public String intercept(ActionInvocation invocation) throws Exception {
    String actionName = invocation.getInvocationContext().getName();
    System.out.println( actionName );
    long startTime = System.currentTimeMillis();
    invocation.invoke();
    long endTime = System.currentTimeMillis();
    System.out.println( endTime - startTime );
    return null;
}
} 
```

我想在 init() 中读取一个属性文件。但是当我启动 tomcat 时，我得到了这个：

```
Caught Exception while registering Interceptor class com.log.LogInterceptor - interceptor - file:/C:/Program%20Files/Apache%20Software%20Foundation/Tomcat%206.0/webapps/EnergySystem/WEB-INF/classes/struts.xml:28:50
at org.apache.struts2.impl.StrutsObjectFactory.buildInterceptor(StrutsObjectFactory.java:77)
at com.opensymphony.xwork2.config.providers.InterceptorBuilder.constructInterceptorReference(InterceptorBuilder.java:70)
at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.lookupInterceptorReference(XmlConfigurationProvider.java:1043)
at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.loadInterceptorStack(XmlConfigurationProvider.java:860)
at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.loadInterceptorStacks(XmlConfigurationProvider.java:873)
at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.loadInterceptors(XmlConfigurationProvider.java:896)
at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.addPackage(XmlConfigurationProvider.java:476)
at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.loadPackages(XmlConfigurationProvider.java:286)
at org.apache.struts2.config.StrutsXmlConfigurationProvider.loadPackages(StrutsXmlConfigurationProvider.java:112)
at com.opensymphony.xwork2.config.impl.DefaultConfiguration.reloadContainer(DefaultConfiguration.java:234)
at com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.java:66)
at org.apache.struts2.dispatcher.Dispatcher.init_PreloadConfiguration(Dispatcher.java:390)
at org.apache.struts2.dispatcher.Dispatcher.init(Dispatcher.java:437)
at org.apache.struts2.dispatcher.ng.InitOperations.initDispatcher(InitOperations.java:74)
at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.init(StrutsPrepareAndExecuteFilter.java:51)
at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:295)
at org.apache.catalina.core.ApplicationFilterConfig.setFilterDef(ApplicationFilterConfig.java:422)
at org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:115)
at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4072)
at org.apache.catalina.core.StandardContext.start(StandardContext.java:4726)
at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:799)
at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:779)
at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:601)
at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:675)
at org.apache.catalina.startup.HostConfig.deployDescriptors(HostConfig.java:601)
at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:502)
at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1317)
at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:324)
at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:142)
at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1065)
at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
at org.apache.catalina.core.StandardService.start(StandardService.java:525)
at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
Caused by: java.lang.NullPointerException
at com.log.LogInterceptor.init(LogInterceptor.java:29)
at org.apache.struts2.impl.StrutsObjectFactory.buildInterceptor(StrutsObjectFactory.java:57)
... 41 more 
```

读取属性的代码看起来是正确的，因为如果我把这段代码放在其他类中并在main（）中调用它，我可以成功读取文件。我想知道为什么它会在init（）中失败。请帮助我，谢谢！

解决方案：我对实例化道具太粗心了，现在我做了`Properties prop = new Properties()`然后我使用了。然后`LogInterceptor.class.getResourceAsStream`它工作了！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:36:27.763

尝试使用您的类而不是 Object 类来加载资源。

```
LogInterceptor.class.getResourceAsStream("interceptor.properties"); 
```

# php - 更改服务器后 Codeigniter 路由不起作用

> ID：15378476
> 
> 赞同：0
> 
> 时间：2013-03-13T06:29:59.723
> 
> 标签：php, .htaccess, codeigniter, mod-rewrite

我已经将一个 codeigniter 网站投入生产，但我遇到了一个我无法调试的奇怪行为。

我正在使用 mod rewrite 并且所有页面始终指向主页（默认路由），除非我在 url 中使用 index.php。

例子。

```
mywebsite.com/class/method -> all points to the same page
mywebsite.com/index.php/class/method -> points to the right page. 
```

在配置中： $config['index_page'] = "";

这是我的 htaccess。

```
RewriteEngine on
RewriteCond $1 !^(index\.php|lib|robots\.txt|upload)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

网站已从一台服务器复制到另一台服务器 1:1（具有不同的数据库配置）。我越来越绝望，因为我不知道这里发生了什么。在 hte 服务器上启用了 mod_rewrite。

谢谢你的帮助，你会让我免于精神崩溃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T10:40:37.160

几乎放弃后，我发现了问题。

服务器不支持 $_SERVER['PATH_INFO'] 因为它在 apache 中被禁用。

为了快速修复，您可以在 config.php 中将设置更改为 AUTO

另请阅读：[Codeigniter $config['uri_protocol'] 问题](https://stackoverflow.com/questions/1872505/codeigniter-configuri-protocolproblem)

# java - 关于进口声明

> ID：15378479
> 
> 赞同：2
> 
> 时间：2013-03-13T06:30:08.317
> 
> 标签：java, import, classloader, heap-memory

我想知道在哪里可以检查类加载器已加载了多少类。我想知道，`import`带有标记的类中的语句是否`*`会在堆的perm区域中加载那么多类？或者只有当我们声明特定类型的引用时才会加载以下两个类？
前任。

```
Map m = new HashMap(); //only these two classes loaded??? 
```

如果我们像这样写 import 语句会怎样

```
java.util.*; 
```

类加载器会加载`java.util`包下的所有类吗？java中有没有类卸载过程？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T06:45:41.910

不，导入与类加载无关。它只是语法糖。以下两个程序将产生完全相同的字节码：

```
import java.util.Map;
import java.util.HashMap;
import java.util.List;
import java.util.ArrayList;
import java.util.prefs.*;

public class Foo
{
    private Map map = new HashMap ();
} 
```

和

```
public class Foo
{
    private java.util.Map map = new java.util.HashMap ();
} 
```

加载类的时间由 JVM 决定。Java 规范只保证类在首次使用前被加载和初始化。

例如，一个 JVM 可能决定在应用程序启动之前以递归方式加载所有由主类直接或间接引用的类。这种行为对于需要避免由类加载导致的程序执行中的不确定性暂停的实时应用程序可能很方便。另一个 JVM 可能会推迟类加载，直到该类被实际使用，并在不再使用后立即卸载该类。这在关注内存占用的嵌入式应用程序中可能很方便。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T06:45:40.193

`import`ed 类（或通配符）实际上并未由类加载器加载。导入语句只是一个“别名”语句（或类似“隐式前缀”语句，以防您导入通配符）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T06:41:21.610

这个工具[VisualVM](http://visualvm.java.net/)将帮助你。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T07:02:18.133

如果您想查看在运行时加载的类，请尝试以下操作：

```
java -verbose:class 
```

你应该看看问题[是否有办法获取 ClassLoader 加载了哪些类？](https://stackoverflow.com/questions/1432180/is-there-a-way-to-get-which-classes-a-classloader-has-loaded)

# php - 从多步表单中将数据插入相应的表中

> ID：15378480
> 
> 赞同：0
> 
> 时间：2013-03-13T06:30:10.580
> 
> 标签：php, codeigniter, grocery-crud

我有一个称为“卡片”的多步骤表格

此表格必须包含一个人的多个信息，一个人做了什么，该人的工作，该人使用的工具等。

为了解决这个问题并让它更酷，我制作了一个多表单步骤表单，因此当用户完成为第一个表填充数据（用于实例化他使用的工具的信息）时，用户单击下一步按钮，然后显示来自其他表的输入（项目人已经工作了）......这一直持续到用户填写所有必要的数据。为了节省工作，我正在使用杂货店。

```
<form method="post" action="<?php echo base_url();?>controller/save" name="form"/>
  <label>User Name</label>
  <input type="text" name="Username">   
  <input type="submit" value="Add"/>
  <!--#######################
       Several more data to store in distict tables
   #######################
   -->    
</form>   

in controller:

  function save
    {
      $arrData["Username"] = $this->input->post("Username");
      $this->User_model->Add($arrData); 
    } 

in User_model

function Add($arrData) { 
        if($this->db->insert(tableName, $arrData))
          return true;
        else
          return false;
    } 
```

重定向到控制器时，如果我只填写一张表，一切都会正常工作。

问题是我不知道如何将相应的数据存储到其他涉及的表中。**因此，如果我在tableName**中插入一个新注册表，则会分配一个新 ID。现在我想使用这个最近分配的 ID 将它用作其他表中的其他必需字段（相关表有这个 ID 作为外键）

如何解决这个问题是这样的：

```
$last_id = $user->id; 
```

所以我不断将数据插入到其他表中，

使用会有用吗

```
$crud->set_relation('column','table','column'); 
```

也许是回调或其他东西，有没有人做过类似从一个表格插入多个相关表格的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:58:21.390

因此，如果我对您的理解正确，您需要在第一次插入后保留 userId 以插入多个表中吗？这很容易，只需将 id 保存到会话中（如果此人登录到您的应用程序，您应该在登录时执行此操作）。

在初始插入运行后，您可以调用它：

```
$this->session->set_userdata('userId',$this->db->insert_id()); 
```

然后，例如，任何时候您需要该 ID 时，只需将其从会话中拉回即可。

```
$array = (
    'tool'=>'hammer',
    'userId'=>$this->session->userdata('userId')
);
$this->db->insert('tool_table',$array); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T07:05:12.620

首先，我建议您使用单个表来存储所有信息。但是由于它的多步骤操作，因此您创建了几个表来存储它们，因为您将数据保存在块中。

这是一个快速的想法。

而不是将数据存储到多个表中，而是将其保存在单个表中。当您插入第一个表单时，您将获得 id 并将此 id 存储在 session/other_techniques 中。在此之后，您可以使用更新查询将其余信息插入同一张表中。

好处是，当您想要获取信息时，您不必进行连接，并且连接会减慢查询速度。

# android - 如何在特定条件下显示 Spinner 项目？

> ID：15378484
> 
> 赞同：0
> 
> 时间：2013-03-13T06:30:28.243
> 
> 标签：android, android-spinner

我的应用程序中有一个`Spinner`。我想自动显示所有微调器项目。在这种情况下，我什至没有触摸/单击 Spinner 来选择项目。

**`Spinner`当某些特定情况发生时，是否可以调用以自动显示其项目？**

请指导我如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T07:20:20.380

每当您的特定情况发生时，您可以尝试调用包含以下代码的函数。只需更改数组的内容并删除以前的项目并将新的项目应用于您的微调器。

```
ArrayAdapter<String> spinnerArrayAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_dropdown_item, spinnerArray);
spinner.setAdapter(spinnerArrayAdapter); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T10:09:33.180

是的，你可以使用

```
 spinner.performclick(); 
```

当出现特定情况时。

# c# - C# 将项目从 listview1 复制/移动到 listview2 与数量

> ID：15378486
> 
> 赞同：0
> 
> 时间：2013-03-13T06:30:34.630
> 
> 标签：c#, listview, copy

我想知道如何将双击项目从**listview1**复制到**listview2**，到目前为止，我在**listview1**鼠标双击事件上使用了此代码。

```
foreach (ListViewItem item in lvItemlist.SelectedItems)
        {
            lvItemBuy.Items.Add((ListViewItem)item.Clone());
        } 
```

当我双击该项目时，它会将有关所选项目的所有内容复制到我的**listview2**，无论如何这并不是我真正想要的......让我在**listview1**中说我得到了这个项目：

```
ID   |  ITEMNAME | QUANTITY
1    |  ITEM1    | 100 
```

我想要的是每次双击**listview1**上的项目，数量应该减少 1，所以它会在 listview1 上是这样的：

```
ID   |  ITEMNAME | QUANTITY
1    |  ITEM1    | 99 
```

然后将所选项目添加到**listview2**中，数量为 1，如下所示：

```
ID   |  ITEMNAME | QUANTITY
1    |  ITEM1    | 1 
```

再次双击同一个项目后，它在**listview1**上做同样的事情，但我不希望它复制**listview2**上的项目。只需 +1 数量。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T07:07:20.130

有两种不同的方式。

如果要将项目从 listview1 复制到 listview2：

```
private static void CopySelectedItems(ListView source, ListView target)
{
    foreach (ListViewItem item in source.SelectedItems)
    {
        target.Items.Add((ListViewItem)item.Clone());
    }
} 
```

如果要将项目从 listview1 移动到 listview2：

```
private static void MoveSelectedItems(ListView source, ListView target)
{    
    while (source.SelectedItems.Count > 0)
    {
        ListViewItem temp = source.SelectedItems[0];
        source.Items.Remove(temp);
        target.Items.Add(temp);
    }            
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T06:44:20.260

有很多方法可以做到这一点。您可以为 listviewItems 引入 Id。不要直接关闭 ListViewItem，而是编写一个将属性从第一个 listviewitem 复制到第二个的方法。在这种方法中，您可以减少数量并检查所选列表视图项是否已经在第二个列表视图中

# android - IllegalStateException：在使用此类之前调用 CookieSyncManager::createInstance() 或创建 webview

> ID：15378488
> 
> 赞同：1
> 
> 时间：2013-03-13T06:30:35.347
> 
> 标签：android, cookiemanager

我打电话时得到**ISE**`CookieManager.getInstance().getCookie(url)`

```
I/dalvikvm( 1022): java.lang.IllegalStateException: Call CookieSyncManager::createInstance() or create a webview before using this class
I/dalvikvm( 1022):     at android.webkit.JniUtil.checkInitialized(JniUtil.java:45)
I/dalvikvm( 1022):     at android.webkit.JniUtil.getDatabaseDirectory(JniUtil.java:66)
I/dalvikvm( 1022):     at android.webkit.CookieManager.nativeGetCookie(Native Method)
I/dalvikvm( 1022):     at android.webkit.CookieManager.getCookie(CookieManager.java:496)
I/dalvikvm( 1022):     at android.webkit.CookieManager.getCookie(CookieManager.java:460) 
```

谁能指出它为什么会发生以及如何解决它？

提前非常感谢！

# heroku - IronMQ 推送队列订阅者作为 Heroku 工作者

> ID：15378491
> 
> 赞同：2
> 
> 时间：2013-03-13T06:30:57.120
> 
> 标签：heroku, ironmq, push-queue

IronMQ[支持推送队列](http://blog.iron.io/2013/01/ironmq-push-queues-reliable-message.html)，但[Heroku 推送队列订阅者示例](https://github.com/treeder/push_queue_demo_app/blob/master/Procfile)是作为 web dyno 实现的。这感觉很尴尬，因为我需要一个 Heroku 项目来使用服务 Web 请求的 Web dyno，以及处理耗时需求的工作 dyno。这就是 Heroku 的设计方式。

IronMQ [API](http://dev.iron.io/mq/reference/api/)指示推送队列订阅者应该可以[通过可公开访问的 URL 访问](http://dev.iron.io/mq/reference/api/#add_subscribers_to_a_queue)；这就是为什么需要网络测功机。

是否有任何（干净的）方法可以在单个 Heroku 项目中获取 IronMQ 推送队列发布者和订阅者？

是否有另一个队列服务确实支持这样的事情（即使是[长轮询订阅者](http://en.wikipedia.org/wiki/Push_technology#Long_polling)也可以）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T13:44:43.507

如果您想从无法通过 Web 访问的服务器使用 IronMQ，我最好的建议是使用拉取队列。启动你的工作人员测功机，让它每隔 X 秒拉下所有可用的消息。有 1000 万个免费请求，如果您每秒检查一次消息，您只使用了 26% 的免费配额。

如果你仍然想做推送队列并且有一个 TCP 端口监听 worker dyno，你总是可以使用推送队列并让每个消息在 IronWorker 上启动一个 worker，它将消息转换为 TCP 连接而不是 HTTP 连接。

希望有帮助！

# android - 如何使用单独的线程部分重绘自定义 SurfaceView 而不会丢失以前的编辑？

> ID：15378493
> 
> 赞同：2
> 
> 时间：2013-03-13T06:31:08.340
> 
> 标签：android, multithreading, user-interface, surfaceview

我目前无法`SurfaceView`从不在我的主 UI 上的线程绘制到自定义。这`SurfaceView`会占据整个屏幕（Galaxy S3 全屏），并且必须从多个来源进行更新。

问题是自定义`SurfaceView`不会保存 UI 更新之间的更改。

自定义`SurfaceView`类在使用它的活动中定义，并且运行定期检查更新的线程（我们称之为它`DrawingThread`）在自定义`SurfaceView`类中定义。我已经完成了类似于[本教程](http://danielnadeau.blogspot.com/2012/01/android-canvas-beginners-tutorial.html)的操作。

另一个外部线程正在更新必须对 UI 进行的更改列表。`DrawingThread`每 50 毫秒左右检查一次该列表，如果该列表不为空，则计算一个必须重绘的矩形。

```
// Thread waits for change request to UI or kill order
// Build Rect at point of Touch
try {
    Canvas = _surfaceHolder.lockCanvas(Rect); 
    synchronized (_surfaceHolder) {
        postInvalidate(); //Calls custom SurfaceView's onDraw() with the correct Canvas
    }
} finally {
    if (Canvas != null) {
        _surfaceHolder.unlockCanvasAndPost(Canvas);
    }
}
// Loop 
```

我`onDraw()`的自定义`SurfaceView`方法如下：

```
@Override
public void onDraw(Canvas canvas) {
    // Initialize vars for rectangle
    Paint.setStyle(Style.FILL);

    for (MapChanges change : ExternalClass.getMapChanges()) {
        // Build Rect at point of Touch
        // Select Color for Paint   
        canvas.drawRect(Rect, Paint);
        ExternalClass.removeMapChange(change); //Thread safe
    }
} 
```

`onDraw()`除了忘记任何先前调用的更改之外，这可以完美地工作。我目前正在使用`OnTouchListener`.

据我了解的代码过程：

*   Touch 将 UI 的更改请求添加到`ExternalClass`.
*   `DrawingThread`看到列表不再为空，安全地抓取 Canvas，并`postInvalidates()`调用 custom`SurfaceView`的`onDraw()`.
*   `onDraw()`更新 UI 并从`ExternalClass`.
*   `DrawingThread`发布`Canvas`并返回等待。

我的预期行为是，我将通过连续触摸在屏幕上累积点。取而代之的是，每次触摸都会清除屏幕，给我留下背景和我最后一次触摸屏幕的一个点。

我发现这非常令人困惑，因为`lockCanvas(Rect)`特别提到它将通过指定“脏”部分来保存锁之间的更改。谷歌搜索让我相信大多数用户发现了相反的问题：他们想要`View`重绘，但每次更新都必须手动进行。

尽管我指定了一个“脏”部分来重绘，为什么程序在`SurfaceView`每次 UI 更新时都从头开始绘制？

毫无疑问，有人会参考我[之前回答的这个问题](https://stackoverflow.com/questions/2949036/android-how-to-get-a-custom-view-to-redraw-partially)，建议程序员使用位图。我试图避免这种情况，因为我对此很陌生，而且我不想使用大量内存（更新 UI 只是我代码的一小部分）。直接在 a 上使用简单的形状`View`对我来说是理想的。此外，它作为一种解决方法提供。这是 Android API 中的缺陷吗？

已经在这里和谷歌搜索了几个小时了。希望我没有错过任何明显的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T21:01:25.977

我设法通过`OnDraw()`排除等式找到了解决方法。下面的新`DrawingPanel`内容：

```
class DrawingPanel extends SurfaceView implements Runnable, SurfaceHolder.Callback {

    Thread thread = null;
    SurfaceHolder surfaceHolder;
    volatile boolean running = false;

    private Paint myPaint = new Paint(Paint.ANTI_ALIAS_FLAG);
    Random random;

    public DrawingPanel(Context context) {
        super(context);
        getHolder().addCallback(this);

        surfaceHolder = getHolder();
    }

    @Override 
    public void surfaceChanged(SurfaceHolder holder, int format, int width,
        int height) { 

    }

    @Override
    public void surfaceCreated(SurfaceHolder holder) {          
        setWillNotDraw(false); //Allows us to use invalidate() to call onDraw()

        if (!running) {
            running = true;
            thread = new Thread(this);
            thread.start();
        }
    }

    @Override
    public void surfaceDestroyed(SurfaceHolder holder) {
        try {
            running = false;    //Tells thread to stop
            thread.join();      //Removes thread from mem.
        } catch (InterruptedException e) {}
    }   

    @Override
    public void run() {
        Canvas canvas;
        Rect myRect = new Rect();
        boolean firstRun = true;

        ChangeRequest ChangeReq;

        myPaint.setStyle(Style.FILL);

        while(running) {
            try {
                Thread.sleep(50);
            } catch (Exception e) {}

            canvas = null;

            ChangeReq = getUIChangeRequests();

            if (!ChangeReq.isEmpty() || (firstRun)) {                   
                if(surfaceHolder.getSurface().isValid()) {
                    if (!firstRun) {  

                        // Calculate dirty space for editing
                        x = ChangeReq.getX();
                        y = ChangeReq.getY();

                        try {
                            myRect.set(x*RectSize, y*RectSize, x*RectSize + RectSize, y*RectSize + RectSize);
                            myPaint.setColor(Color.RED);

                            canvas = surfaceHolder.lockCanvas(myRect);

                            synchronized (surfaceHolder) {
                                // Draw
                                canvas.drawRect(myRect, myPaint);

                            }

                            // Remove ChangeRequest
                            ChangeReq.remove();

                        } finally {
                            if (canvas != null) {
                                surfaceHolder.unlockCanvasAndPost(canvas);
                            }
                        }
                    } else {
                        try {
                            // Initialize canvas as all one color
                            myRect.set(0, 0, getWidth(), getHeight());
                            myPaint.setColor(Color.DKGRAY);

                            canvas = surfaceHolder.lockCanvas();

                            synchronized (surfaceHolder) {
                                //Draw
                                canvas.drawRect(myRect, myPaint); 
                            }

                            firstRun = false;
                        } finally {
                            if (canvas != null) {
                                surfaceHolder.unlockCanvasAndPost(canvas);
                            }
                        }
                    }
                }
            }
        }
    }   
} 
```

这解决了我的绘图问题，但提出了一个有趣的问题，即为什么我必须初始化使用`surfaceHolder.lockCanvas();`，然后才能使用绘图，`surfaceHolder.lockCanvas(Rect);` 我将在另一个问题中问这个问题。

# android - 如何以编程方式启动系统应用程序或如何过滤掉可启动的系统应用程序？

> ID：15378495
> 
> 赞同：3
> 
> 时间：2013-03-13T06:31:10.163
> 
> 标签：android, system, installed-applications, android-applicationinfo

我想列出已安装和系统应用程序。系统应用程序是指预安装的应用程序（在制造时安装的应用程序）。为此，我对所有使用的应用程序进行了分类`(ApplicationInfo.flags & ApplicationInfo.FLAG_SYSTEM) != 0`——它们是系统应用程序，其他是已安装的应用程序。现在我的问题是我想在单击列表项时启动这些应用程序。但我无法启动系统应用程序，如联系人、拨号器等......

如何以编程方式启动系统应用程序或如何过滤掉可启动的系统应用程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T08:43:08.307

我找不到确切的答案。但我认为这会有所帮助

```
List<PackageInfo> list = packageManager.getInstalledPackages(0);
for (PackageInfo pi : list) {
 try {
    ApplicationInfo appInfo = getPackageManager() .getApplicationInfo(pi.packageName, 0);
        //check whether the app is launchable or not
    if (packageManager .getLaunchIntentForPackage(appInfo.packageName) != null) {
     //check whether the app is an installed / system app
     if ((appInfo.flags & ApplicationInfo.FLAG_SYSTEM) != 0) {
        //system apps.........
     } else {
        //installed apps............
     }
    }

   } catch (Exception e) {}
} 
```

# ios - AFNetworking 中 DidReceiveData 的回调

> ID：15378509
> 
> 赞同：1
> 
> 时间：2013-03-13T06:32:16.087
> 
> 标签：ios, objective-c, afnetworking

我有一个 GET 服务调用，我必须在收到响应时执行某些操作。

据我所知，委托方法实际上`AFNetworking`只在请求完成或完全失败时通知。

通过深入研究`AFNetworking`，我发现`AFURLConnectionOperation`得到回调

```
- (void)connection:(NSURLConnection __unused *)connection
didReceiveData:(NSData *)data; 
```

现在，我的问题是，如何在发起请求的类中获取此回调？

PS我厌倦了发送`NSNotification`使用`NSNotificationCenter`，我确实收到了通知。但是，由于多个同时请求被发送到服务器，我无法区分哪个请求的响应是我被通知的。

**编辑**

我注意到它`AFHTTPRequestOperation`是继承自的，`AFURLConnectionOpertaion`所以我可以实现`connection:didReceiveData`的方法，`NSURLConnectionDelegate`但问题再次是，我如何从那里发送回调。:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T19:26:44.997

这是一个完整的示例，它有效：

```
 NSMutableURLRequest *request = [[HTTPClient sharedInstance] requestWithMethod:@"GET" path:iurl parameters:nil];
    AFHTTPRequestOperation *operation = [[HTTPClient sharedInstance] HTTPRequestOperationWithRequest:request success:^(AFHTTPRequestOperation *operation, id responseObject) {
        NSLog(@"success");
    } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
        NSLog(@"failure");
    }];
    [operation setDownloadProgressBlock:^( NSUInteger bytesRead , long long totalBytesRead , long long totalBytesExpectedToRead )
     {
         NSLog(@"%lld of %lld", totalBytesRead, totalBytesExpectedToRead);
     }
     ];
    [[HTTPClient sharedInstance] enqueueHTTPRequestOperation:operation]; 
```

# python - 优化 python / pypy 中的蛮力过程以查找 One-Child 数字

> ID：15378514
> 
> 赞同：4
> 
> 时间：2013-03-13T06:32:44.463
> 
> 标签：python, optimization, multiprocessing, brute-force, pypy

蛮力方法的目的不是解决问题，而是帮助其研究。我正在研究一个[Project Euler](http://projecteuler.net/)问题，该问题让我找到从 X 到比 Y 小一的所有数字，这些数字恰好有一个“子字符串”可以被数字中的位数整除。

这些被称为独生子女号码。104是独生子女号码。在它的子串中，[1, 0, 4, 10, 04, 104] 只有 0 可以被 3 整除。问题要求找出出现小于 10* *17 的单子数的数量。蛮力方法不是正确的方法；但是，我有一个理论要求我知道在 10* *11 之前出现的一个子数字的数量。

即使在我的笔记本电脑开机半天后，我也没有成功找到这个号码。我尝试了 Cython，假设我是一个对 C 一无所知的新手程序员。结果真的很糟糕。我什至尝试过云计算，但我的 ssh 管道总是在进程完成之前中断。

如果有人可以帮助我确定一些不同的方法或优化来针对这个问题执行*BRUTE FORCE* 方法，直到 10**11，将不胜感激。

请不要...

给我一些关于数论的建议或你对这个问题的答案，因为我已经研究了很长时间，我真的希望自己得出结论。

```
## a one child number has only one "substring" divisable by the
## number of digits in the number. Example: 104 is a one child number as 0
## is the only substring which 3 may divide, of the set [1,0,4,10,04,104]

## FYI one-child numbers are positive, so the number 0 is not one-child

from multiprocessing import Pool
import os.path

def OneChild(numRange): # hopefully(10*11,1)
    OneChild = []
    start = numRange[0]
    number = numRange[1]

    ## top loop handles one number at a time
    ## loop ends when start become larger then end
    while number >= start:

        ## preparing to analayze one number
        ## for exactly one divisableSubstrings
        numberString = str(start)
        numDigits = len(numberString)
        divisableSubstrings = 0
        ticker1,ticker2 = 0, numDigits

        ## ticker1 starts at 0 and ends at number of digits - 1
        ## ticker2 starts at number of digits and ends +1 from ticker1
        ## an example for a three digit number: (0,3) (0,2) (0,1) (1,3) (1,2) (2,3)
        while ticker1 <= numDigits+1:
            while ticker2 > ticker1:
                if int(numberString[ticker1:ticker2]) % numDigits == 0:
                    divisableSubstrings += 1
                    if divisableSubstrings == 2:
                        ticker1 = numDigits+1
                        ticker2 = ticker1

                ##Counters    
                ticker2 -= 1
            ticker1 += 1
            ticker2 = numDigits             
        if divisableSubstrings == 1: ## One-Child Bouncer 
            OneChild.append(start) ## inefficient but I want the specifics
        start += 1 
    return (OneChild)

## Speed seems improve with more pool arguments, labeled here as cores
## Im guessing this is due to pypy preforming best when task is neither
## to large nor small
def MultiProcList(numRange,start = 1,cores = 100): # multiprocessing
    print "Asked to use %i cores between %i numbers: From %s to %s" % (cores,numRange-start, start,numRange)
    cores = adjustCores(numRange,start,cores)
    print "Using %i cores" % (cores)

    chunk = (numRange+1-start)/cores
    end = chunk+start -1 
    total, argsList= 0, []
    for i in range(cores):
        # print start,end-1
        argsList.append((start,end-1))
        start, end = end , end + chunk
    pool = Pool(processes=cores)
    data = pool.map(OneChild,argsList)
    for d in data:
        total += len(d)
    print total

##    f = open("Result.txt", "w+")
##    f.write(str(total))
##    f.close()

def adjustCores(numRange,start,cores):
    if start == 1:
        start = 0
    else:
        pass
    while (numRange-start)%cores != 0:
        cores -= 1
    return cores

#MultiProcList(10**7)
from timeit import Timer
t = Timer(lambda: MultiProcList(10**6))
print t.timeit(number=1) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:41:11.920

这是我最快的蛮力代码。它使用 cython 来加速计算。它不是检查所有数字，而是通过递归找到所有 One-Child 数字。

```
%%cython
cdef int _one_child_number(int s, int child_count, int digits_count):
    cdef int start, count, c, child_count2, s2, part, i
    if s >= 10**(digits_count-1):
        return child_count
    else:
        if s == 0:
            start = 1
        else:
            start = 0
        count = 0
        for c in range(start, 10):
            s2 = s*10 + c
            child_count2 = child_count
            i = 10
            while True:
                part = s2 % i
                if part % digits_count == 0:
                    child_count2 += 1
                    if child_count2 > 1:
                        break
                if part == s2:
                    break
                i *= 10

            if child_count2 <= 1:
                count += _one_child_number(s2, child_count2, digits_count)
        return count 

def one_child_number(int digits_count):
    return _one_child_number(0, 0, digits_count) 
```

求F(10**7)的个数，大约需要100ms才能得到结果277674。

```
print sum(one_child_number(i) for i in xrange(8)) 
```

**您需要 64 位整数来计算较大的结果。**

**编辑：**我添加了一些评论，但我的英语不好，所以我将代码转换为纯 python 代码，并添加一些打印以帮助您弄清楚它是如何工作的。

`_one_child_number`从左到右`s`递归地加数， 是的`child_count`子数`s`，`digits_count`是 的最后一位数`s`。

```
def _one_child_number(s, child_count, digits_count):
    print s, child_count
    if s >= 10**(digits_count-1): # if the length of s is digits_count
        return child_count # child_count is 0 or 1 here, 1 means we found one one-child-number.
    else:
        if s == 0: 
            start = 1 #if the length of s is 0, we choose from 123456789 for the most left digit.
        else:
            start = 0 #otherwise we choose from 0123456789 
        count = 0 # init the one-child-number count
        for c in range(start, 10): # loop for every digit
            s2 = s*10 + c  # add digit c to the right of s

            # following code calculates the child count of s2
            child_count2 = child_count 
            i = 10
            while True:
                part = s2 % i
                if part % digits_count == 0:
                    child_count2 += 1
                    if child_count2 > 1: # when child count > 1, it's not a one-child-number, break
                        break
                if part == s2:
                    break
                i *= 10

            # if the child count by far is less than or equal 1, 
            # call _one_child_number recursively to add next digit.
            if child_count2 <= 1: 
                count += _one_child_number(s2, child_count2, digits_count)
        return count 
```

这是他的输出`_one_child_number(0, 0, 3)`，3位数的单子数的计数是第一列是3位数的第二列的总和。

```
0 0
1 0
10 1
101 1
104 1
107 1
11 0
110 1
111 1
112 1
113 1
114 1
115 1
116 1
117 1
118 1
119 1
12 1
122 1
125 1
128 1
13 1
131 1
134 1
137 1
14 0
140 1
141 1
142 1
143 1
144 1
145 1
146 1
147 1
148 1
149 1
15 1
152 1
155 1
158 1
16 1
161 1
164 1
167 1
17 0
170 1
171 1
172 1
173 1
174 1
175 1
176 1
177 1
178 1
179 1
18 1
182 1
185 1
188 1
19 1
191 1
194 1
197 1
2 0
20 1
202 1
205 1
208 1
21 1
211 1
214 1
217 1
22 0
220 1
221 1
222 1
223 1
224 1
225 1
226 1
227 1
228 1
229 1
23 1
232 1
235 1
238 1
24 1
241 1
244 1
247 1
25 0
250 1
251 1
252 1
253 1
254 1
255 1
256 1
257 1
258 1
259 1
26 1
262 1
265 1
268 1
27 1
271 1
274 1
277 1
28 0
280 1
281 1
282 1
283 1
284 1
285 1
286 1
287 1
288 1
289 1
29 1
292 1
295 1
298 1
3 1
31 1
311 1
314 1
317 1
32 1
322 1
325 1
328 1
34 1
341 1
344 1
347 1
35 1
352 1
355 1
358 1
37 1
371 1
374 1
377 1
38 1
382 1
385 1
388 1
4 0
40 1
401 1
404 1
407 1
41 0
410 1
411 1
412 1
413 1
414 1
415 1
416 1
417 1
418 1
419 1
42 1
422 1
425 1
428 1
43 1
431 1
434 1
437 1
44 0
440 1
441 1
442 1
443 1
444 1
445 1
446 1
447 1
448 1
449 1
45 1
452 1
455 1
458 1
46 1
461 1
464 1
467 1
47 0
470 1
471 1
472 1
473 1
474 1
475 1
476 1
477 1
478 1
479 1
48 1
482 1
485 1
488 1
49 1
491 1
494 1
497 1
5 0
50 1
502 1
505 1
508 1
51 1
511 1
514 1
517 1
52 0
520 1
521 1
522 1
523 1
524 1
525 1
526 1
527 1
528 1
529 1
53 1
532 1
535 1
538 1
54 1
541 1
544 1
547 1
55 0
550 1
551 1
552 1
553 1
554 1
555 1
556 1
557 1
558 1
559 1
56 1
562 1
565 1
568 1
57 1
571 1
574 1
577 1
58 0
580 1
581 1
582 1
583 1
584 1
585 1
586 1
587 1
588 1
589 1
59 1
592 1
595 1
598 1
6 1
61 1
611 1
614 1
617 1
62 1
622 1
625 1
628 1
64 1
641 1
644 1
647 1
65 1
652 1
655 1
658 1
67 1
671 1
674 1
677 1
68 1
682 1
685 1
688 1
7 0
70 1
701 1
704 1
707 1
71 0
710 1
711 1
712 1
713 1
714 1
715 1
716 1
717 1
718 1
719 1
72 1
722 1
725 1
728 1
73 1
731 1
734 1
737 1
74 0
740 1
741 1
742 1
743 1
744 1
745 1
746 1
747 1
748 1
749 1
75 1
752 1
755 1
758 1
76 1
761 1
764 1
767 1
77 0
770 1
771 1
772 1
773 1
774 1
775 1
776 1
777 1
778 1
779 1
78 1
782 1
785 1
788 1
79 1
791 1
794 1
797 1
8 0
80 1
802 1
805 1
808 1
81 1
811 1
814 1
817 1
82 0
820 1
821 1
822 1
823 1
824 1
825 1
826 1
827 1
828 1
829 1
83 1
832 1
835 1
838 1
84 1
841 1
844 1
847 1
85 0
850 1
851 1
852 1
853 1
854 1
855 1
856 1
857 1
858 1
859 1
86 1
862 1
865 1
868 1
87 1
871 1
874 1
877 1
88 0
880 1
881 1
882 1
883 1
884 1
885 1
886 1
887 1
888 1
889 1
89 1
892 1
895 1
898 1
9 1
91 1
911 1
914 1
917 1
92 1
922 1
925 1
928 1
94 1
941 1
944 1
947 1
95 1
952 1
955 1
958 1
97 1
971 1
974 1
977 1
98 1
982 1
985 1
988 1 
```

# php - 使用 PHP 从服务器下载 MIDI 文件

> ID：15378516
> 
> 赞同：0
> 
> 时间：2013-03-13T06:32:49.410
> 
> 标签：php, download

我有一个 PHP 脚本用于从服务器下载 MIDI 文件，下载成功但我无法打开下载文件（我收到错误：文件格式不正确）。这是我的代码：

```
<?php
$id = $_GET["id"];
if($id == "")
{
print("Invalid download code!");
}
else
{

include_once("libs/htdu_core.php");
$exec_mysql = new execute_mysql_query();
$escape_array = $exec_mysql->escape_string(array($id));
$query = sprintf("select songpath from songs, downloads where downloadcode = '%s' and  songs.songnum = downloads.songnum",$escape_array[0]);
$path = $exec_mysql->execute($query, 1);
if($path == "")
{
print("Invalid download code!");
}
else
{
$fname = substr($path, strpos($path, '/')+1);
//$query = sprintf("update downloads set isdownload = 1 where downloadcode = '%s'",$escape_array[0]);
//$exec_mysql->execute($query, 0);
header("Pragma: public");
header("Expires: 0");
header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
header("Cache-Control: public");
header("Content-Description: File Transfer");
header("Content-Type: audio/midi");
header("Content-Disposition: attachment; filename='".$fname."'");
header("Content-Transfer-Encoding: binary");
header("Content-Length: " . filesize($path));
set_time_limit(0);
readfile($path);
exit;
}
}
?> 
```

感谢帮助！

# android - 按钮单击不会更改 textview 值

> ID：15378517
> 
> 赞同：4
> 
> 时间：2013-03-13T06:32:54.400
> 
> 标签：android, eclipse, textview

这是 XML 代码：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
tools:context=".MainActivity" >

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:gravity="center"
    android:text="Your total is 0"
    android:textSize="20dp" />

<Button
    android:id="@+id/button2"
    android:layout_width="250dp"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/button1"
    android:layout_centerVertical="true"
    android:text="Subtract one"
    android:textSize="20dp" />

<Button
    android:id="@+id/button1"
    android:layout_width="250dp"
    android:layout_height="wrap_content"
    android:layout_below="@+id/textView1"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="62dp"
    android:text="Add one"
    android:textSize="20dp" /> 
```

这是java代码：

```
package com.example.helloworld;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
}

int counter;
Button add, sub;
TextView display;

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    counter = 0;
    add = (Button) findViewById(R.id.button1);
    sub = (Button) findViewById(R.id.button2);
    display = (TextView) findViewById(R.id.textView1);
    add.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            counter++;

            display.setText("Your total is " + counter);
        }
    });

    sub.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            counter--;

            display.setText("Your total is " + counter);
        }
    });

    return true;
}

} 
```

当我按下按钮时，textview 文本根本没有任何反应。

请帮忙。我希望显示器根据按下的按钮在加减后显示计数器的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T06:40:47.940

您将代码放置在错误的位置。你没有在这里处理菜单，所以你不需要把你`public boolean onCreateOptionsMenu(Menu menu) {}`的按钮放在按钮中不会得到任何动作/触发

移动这个

```
counter = 0;
    add = (Button) findViewById(R.id.button1);
    sub = (Button) findViewById(R.id.button2);
    display = (TextView) findViewById(R.id.textView1);
    add.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            counter++;

            display.setText("Your total is " + counter);
        }
    });

    sub.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            counter--;

            display.setText("Your total is " + counter);
        }
    }); 
```

到您的 onCreate() 方法并尝试再次运行它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T06:39:34.553

**问题：**

android[文档](http://developer.android.com/reference/android/app/Activity.html)本身说应该`findViewById`在onCreate本身中使用：

> onCreate(Bundle) 是您初始化活动的地方。最重要的是，在这里您通常会使用定义 UI 的布局资源调用 setContentView(int)，并使用 findViewById(int) 检索该 UI 中需要以编程方式与之交互的小部件。

但是您在 CreateOptionsMenu 中使用它们。执行以下步骤：

首先使这些声明类级别：

```
public class MainActivity extends Activity {
int counter;
  Button add, sub;
 TextView display;
//......more code below 
```

将这段代码移动到您的`onCreate(Bundle savedInstanceState) {`而不是`onCreateOptionsMenu(Menu menu) {`. 尤其是计数器代码

```
 @Override
    protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

   //assigning initial value to counter

 counter = 0;//counter set

//getting the controls

    add = (Button) findViewById(R.id.button1);
    sub = (Button) findViewById(R.id.button2);
    display = (TextView) findViewById(R.id.textView1);

//setting Listeners

    add.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        counter++;

        display.setText("Your total is " + counter);
    }
});

sub.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        counter--;

        display.setText("Your total is " + counter);
    }
});
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T06:40:09.063

```
public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        counter = 0;
        add = (Button) findViewById(R.id.button1);
        sub = (Button) findViewById(R.id.button2);
        display = (TextView) findViewById(R.id.textView1);
        add.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                counter++;

                display.setText("Your total is " + counter);
            }
        });

        sub.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                counter--;

                display.setText("Your total is " + counter);
            }
        });

    }

    int counter;
    Button add, sub;
    TextView display;

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);

        return true;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T06:42:17.663

执行 onCreate 方法中的所有内容，而不是 onCreateOptionsMenu，如下所述

// 下面的代码

```
int counter;
Button add, sub;
TextView display;

@Override
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);

counter = 0;
add = (Button) findViewById(R.id.button1);
sub = (Button) findViewById(R.id.button2);
display = (TextView) findViewById(R.id.textView1);
add.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        counter++;

        display.setText("Your total is " + counter);
    }
});

sub.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        counter--;

        display.setText("Your total is " + counter);
    }
});

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {

return true;
}

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T06:47:33.487

您必须在 onCreate 方法中完成您的任务。onCreateOptionsMenu(Menu menu) 方法用于在选项菜单中设置任务。因此，在 onCreate 方法中替换您的代码。完整的代码如下。更换它并试一试。希望它会工作:)

```
 package com.example.helloworld;

        import android.os.Bundle;
        import android.app.Activity;
        import android.view.Menu;
        import android.view.View;
        import android.widget.Button;
        import android.widget.TextView;

        public class MainActivity extends Activity {

int counter;
Button add, sub;
TextView display;

   @Override
  protected void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
   setContentView(R.layout.activity_main);
    counter = 0;
   add = (Button) findViewById(R.id.button1);
   sub = (Button) findViewById(R.id.button2);
   display = (TextView) findViewById(R.id.textView1);
   add.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        counter++;

        display.setText("Your total is " + counter);
    }
});

sub.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        counter--;

        display.setText("Your total is " + counter);
    }
});
}

     @Override
     public boolean onCreateOptionsMenu(Menu menu) {
     // Inflate the menu; this adds items to the action bar if it is present.
      getMenuInflater().inflate(R.menu.main, menu);

       return true;
   }

  } 
```

# ios - 如何使用 UItableViewCell 重用标识符

> ID：15378522
> 
> 赞同：2
> 
> 时间：2013-03-13T06:33:48.893
> 
> 标签：ios, objective-c, cocoa-touch, uitableview

我想使用`UITableviewCell`重用，我有一个自定义`UITableViewCell`和使用 ARC，我`UITableViewCell` 的不同。我的代码是：

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

PostCount *post=[listArr objectAtIndex:indexPath.row];

static NSString *CellIdentifier = @"TimeLineViewCell";

TimeLineViewCell *cell = (TimeLineViewCell*)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if(cell==nil){

    cell = [[TimeLineViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"CellIdentifier11"];
}
cell.tag=indexPath.row+1000;
cell.lab_time.text=[ModelClass intervalSinceNow:post.when btime:0];
cell.delegate=self;
[cell setViewStyle:post];
post=nil;
return cell;
} 
```

你知道我是否使用

```
cell = [[TimeLineViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] 
```

反而

```
cell = [[TimeLineViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"CellIdentifier11"]; 
```

我的手机总是在错误的位置。为什么我不能使用相同的`reuseIdentifier`. 如果我使用不同的重用标识符，如果我的单元格不重用。

对于其他 Viewcontroller 视图，当单元格的高度相同并且我使用相同时，`reuseIdentifier`一切正常。有人可以帮我解决这个问题吗？

**编辑：**我的自定义单元格代码：

```
#import "TimeLineViewCell.h"

@implementation TimeLineViewCell

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {

        imageView_t=[[UIImageView alloc]initWithFrame:CGRectMake(5, 5, 40, 40)];
        imageView_t.hidden=YES;

        imageIcon=[[UIImageView alloc]initWithFrame:CGRectMake(295, 5, 16, 16)];

        self.lab_time = [[UILabel alloc] initWithFrame:CGRectMake(210, 5, 80, 20)];
        self.lab_time.textColor=[UIColor grayColor];
        self.lab_time.font=[UIFont systemFontOfSize:12];
        self.lab_time.textAlignment=UITextAlignmentRight;
        self.lab_time.backgroundColor=[UIColor clearColor];

        whoscreenName = [[UILabel alloc] initWithFrame:CGRectMake(60, 5, 145, 20)];
        whoscreenName.textColor=[UIColor blackColor];
        whoscreenName.font=[UIFont systemFontOfSize:18];
        whoscreenName.lineBreakMode = UILineBreakModeTailTruncation;
        whoscreenName.numberOfLines = 0;
        whoscreenName.backgroundColor=[UIColor clearColor];

        myWhat = [[UITextView alloc] init];
        myWhat.textColor=[UIColor blackColor];

        myWhat.backgroundColor=[UIColor clearColor];
        [myWhat setScrollEnabled:NO];
        [myWhat setEditable:NO];
        myWhat.dataDetectorTypes=UIDataDetectorTypeLink;
        [myWhat setCanCancelContentTouches:NO];

        self.myWhaticon=[[UIView alloc]init];

        myImageView=[[UIImageView alloc]init];
        myImageView.hidden=YES;

        myIndicatorView=[[UIActivityIndicatorView alloc ]initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
        myIndicatorView.hidden=YES;

        whoBgView=[[UIImageView alloc]init];

        whoBgView.image = [[UIImage imageNamed:@"timeline_rt_border_t.png"] stretchableImageWithLeftCapWidth:130 topCapHeight:7];

        whoWhat = [[UITextView alloc] init];
        whoWhat.textColor=[UIColor blackColor];

        whoWhat.backgroundColor=[UIColor clearColor];
        [whoWhat setScrollEnabled:NO];
        [whoWhat setEditable:NO];

        whoWhat.dataDetectorTypes=UIDataDetectorTypeLink;//url
        [whoWhat setCanCancelContentTouches:NO];

        whoImageView=[[UIImageView alloc]init];
        whoImageView.hidden=YES;

        activityIndicatorView=[[UIActivityIndicatorView alloc ]initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];

        activityIndicatorView.hidden=YES;

        myWhat.font=[UIFont systemFontOfSize:15];
        whoWhat.font=[UIFont systemFontOfSize:14];

    }
    return self;
}

- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
    [super setSelected:selected animated:animated];

    // Configure the view for the selected state
}

- (void)layoutSubviews
{
    [super layoutSubviews];

     [self addSubview:imageView_t];
    [self addSubview:imageIcon];
     [self addSubview: self.lab_time];
    [self addSubview:whoscreenName];
     [self addSubview:myWhat];
    [self addSubview:self.myWhaticon];
    [self addSubview:myImageView];
    [self addSubview:myIndicatorView]; 
    [self addSubview:whoBgView];

    [whoBgView addSubview:whoWhat];
    [whoBgView addSubview:whoImageView];
    [whoBgView addSubview: activityIndicatorView];

    whoImageView=nil;
    whoWhat=nil;
}

-(void)my_imag_btnClick:(UIButton *)btn{

    [self.delegate my_imag_btnClick:btn.tag];

}

-(void)who_imag_btnClick:(UIButton *)btn{
     NSLog(@"who_imag_btnClick");
    [self.delegate who_imag_btnClick:btn.tag];

}

- (void)dealloc
{
    imageView_t.image=nil;
    imageView_t=nil;

    imageIcon.image=nil;
    imageIcon=nil;

    whoscreenName=nil;

    self.lab_time=nil;
    whoscreenName=nil;
    myWhat=nil;

    self.myWhaticon=nil;
    myImageView.image=nil;
    myImageView=nil;

    whoBgView.image=nil;
    whoBgView=nil;

    whoImageView.image=nil;
    whoImageView=nil;

}

-(void)setViewStyle:(PostCount *)post{

    //时间
    if (self.btime==1) {
        self.lab_time.text=[ModelClass intervalSinceNow:post.when btime:1 ];
    }else{
        self.lab_time.text=[ModelClass intervalSinceNow:post.when btime:0];
    }

    imageView_t.hidden=NO;

    //     imageView_t.isRoundIcon=YES;
    imageView_t.layer.cornerRadius = 5;
    imageView_t.layer.masksToBounds = YES;
    //给图层添加一个有色边框
    imageView_t.layer.borderWidth = 0.8;
    imageView_t.layer.borderColor = [[UIColor colorWithRed:230.0/255 green:230.0/255 blue:230.0/255 alpha:1.0] CGColor];

    if(![GlobalVariable isBlankString:post.who.avatarbig])
    {

        [imageView_t setImageWithURL:[NSURL URLWithString:post.who.avatarbig]
                    placeholderImage:[UIImage imageNamed:@"default_user.png"]];

    }
    else{
        imageView_t.image=[UIImage imageNamed:@"default_user.png"];
    }

    //icon
    imageIcon.image=[UIImage imageNamed:[ModelClass returnimage_source:post.source]];
    whoscreenName.text=post.who.screenName;

    CGSize size_myWhat =[ModelClass heightForTextView:[UIFont systemFontOfSize:15] WithText:post.what weith:250];

    myWhat.frame=CGRectMake(50, 25, 250, size_myWhat.height);
    myWhat.text=[NSString stringWithFormat:@"%@",post.what];
    self.myWhaticon.frame=myWhat.frame;

    if(![GlobalVariable isBlankString:post.img_small])
    {

        CGSize size_myImageView=CGSizeMake(80, 80);

        myImageView.frame=CGRectMake(50, 30+size_myWhat.height, size_myImageView.width, 80);
        myImageView.hidden=NO;

        myIndicatorView.center=myImageView.center;
        myIndicatorView.hidden=NO;
        [myIndicatorView startAnimating];
        __block UIActivityIndicatorView *indicatorView=myIndicatorView;

        __block UIImageView *myImage = myImageView;
        [myImageView setImageWithURL:[NSURL URLWithString:post.img_small]
                    placeholderImage:nil
                             success:^(UIImage *image){

                                 CGRect  sFrame=myImage.frame;
                                 //缩放
                                 CGSize newSize=image.size;

                                 if (newSize.height>80) {
                                     newSize.height=80;
                                     newSize.width=newSize.width*80.0/image.size.height;

                                 }else{
                                     if (newSize.width>80) {
                                         newSize.height=newSize.height *80.0/image.size.width;
                                         newSize.width=80;
                                     }else{//2个都小于80
                                         newSize.height=newSize.height;
                                         newSize.width=newSize.width;

                                     }

                                 }
                                 sFrame.size=newSize;
                                 myImage.frame=sFrame;

                                 indicatorView.hidden=YES;
                                 [indicatorView stopAnimating];
                                 [indicatorView removeFromSuperview];
                             }
                             failure:^(NSError *error){
                                 indicatorView.hidden=YES;
                                 [indicatorView stopAnimating];
                                 [indicatorView removeFromSuperview];
                             }];

        UIButton * myImageBtn=[[UIButton alloc]init];
        myImageBtn.frame= CGRectMake(50, 30+size_myWhat.height, size_myImageView.width, 80);
        [myImageBtn addTarget:self action:@selector(my_imag_btnClick:) forControlEvents:UIControlEventTouchUpInside];
        myImageBtn.tag=self.tag-1000;
        //        myImageBtn.backgroundColor=[UIColor blueColor];
        [self addSubview:myImageBtn ];

    }

    if ([post.sourceTweet.what length]>0) {
        whoWhat.text=[NSString stringWithFormat:@"@%@: %@",post.sourceTweet.who.screenName,post.sourceTweet.what];

    }

    CGSize size_whoWhat =[ModelClass heightForTextView:[UIFont systemFontOfSize:14] WithText:whoWhat.text weith:250];

    whoWhat.frame=CGRectMake(10, 10, 250, size_whoWhat.height);

    if(![GlobalVariable isBlankString:post.sourceTweet.img_small])
    {

        CGSize size_whoImageView=CGSizeMake(80, 80);
        whoImageView.frame=CGRectMake(30, 15+size_whoWhat.height, size_whoImageView.width, 80);
        whoImageView.hidden=NO;

        activityIndicatorView.center=whoImageView.center;
        activityIndicatorView.hidden=NO;
        [activityIndicatorView startAnimating];
          __block UIActivityIndicatorView *indicatorView = activityIndicatorView;

        __block UIImageView *whoImage = whoImageView;

        [whoImageView setImageWithURL:[NSURL URLWithString:post.sourceTweet.img_small]
                     placeholderImage:nil
                              success:^(UIImage *image){

                                  CGRect  sFrame=whoImage.frame;
                                  //缩放
                                  CGSize newSize=image.size;

                                  if (newSize.height>80) {
                                      newSize.height=80;
                                      newSize.width=newSize.width*80.0/image.size.height;

                                  }else{
                                      if (newSize.width>80) {
                                          newSize.height=newSize.height *80.0/image.size.width;
                                          newSize.width=80;
                                      }else{//2个都小于80
                                          newSize.height=newSize.height;
                                          newSize.width=newSize.width;

                                      }

                                  }
                                  sFrame.size=newSize;
                                  whoImage.frame=sFrame;

                                  indicatorView.hidden=YES;
                                  [indicatorView stopAnimating];
                                  [indicatorView removeFromSuperview];

                              }
                              failure:^(NSError *error){
                                  indicatorView.hidden=YES;
                                  [indicatorView stopAnimating];
                                  [indicatorView removeFromSuperview];
                              }];

        UIButton * whoImageBtn=[[UIButton alloc]init];
        int myimageHeight=0;
        if (myImageView.frame.size.height>0) {
            myimageHeight=5+80;
        }
        whoImageBtn.frame=CGRectMake(30+42, 40+size_myWhat.height+size_whoWhat.height+myimageHeight, 80, 80);
        whoImageBtn.backgroundColor=[UIColor clearColor];
        [whoImageBtn addTarget:self action:@selector(who_imag_btnClick:) forControlEvents:UIControlEventTouchUpInside];
        whoImageBtn.tag=self.tag-1000;
        [self addSubview:whoImageBtn ];
    }

    if (size_whoWhat.height<20) {
        whoBgView.hidden=YES;
    }else{

        int myimageHeight=0;
        if (myImageView.frame.size.height>0) {
            myimageHeight=5+80;
        }

        whoBgView.frame=CGRectMake(42, 25+size_myWhat.height+myimageHeight, 270, 20+size_whoWhat.height+whoImageView.frame.size.height);

    }

}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T22:56:01.190

要么不重复使用单元格，要么给每个单元格一个自定义标识符。

对于自定义标识符，请替换：

```
static NSString *CellIdentifier = @"TimeLineViewCell";

TimeLineViewCell *cell = (TimeLineViewCell*)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if(cell==nil){

    cell = [[TimeLineViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"CellIdentifier11"];
} 
```

有了这个：

```
TimeLineViewCell *cell = (TimeLineViewCell*)[tableView dequeueReusableCellWithIdentifier:[NSString stringWithFormat:@"%i", indexPath.row]];
if(cell==nil){
     cell = [[TimeLineViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:[NSString stringWithFormat:@"%i", indexPath.row]];
} 
```

否则，不要出队，每次都创建一个新单元格。

注意：基于单元格的 indexPath.row 的自定义标识符仅在用户没有进行表格编辑时才有效。如果他们将编辑表格，请不要重复使用单元格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T17:02:45.787

@Praveen 提供的博客有正确的答案。您必须像@Sean D. 提到的那样实现以下方法：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath 
```

这是设置 TableViewCells 高度的正确方法。您必须根据单元格的内容确定行的高度。如您所知 indexPath，您可以通过 indexPath.row 确定每一行的高度

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T13:41:29.823

`- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath`像@Sean 提到的那样实施。应该是这样的：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return [self calculateRowHeighForIndexPath:indexPath];
}

- (CGFloat)calculateRowHeighForIndexPath:(NSIndexPath *)indexPath
{
    //return height of corresponding image here
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T06:43:48.940

我正在按照以下方式重用`UITableViewCell`标识符

```
- (UITableViewCell *)tableView:(UITableView *)tv cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
  UITableViewCell *cell;
  UILabel *label = nil;

  cell = [tv dequeueReusableCellWithIdentifier:@"Cell"];
  if (cell == nil)
  {
    cell = [[[UITableViewCell alloc] initWithFrame:CGRectZero reuseIdentifier:@"Cell"] autorelease];

    label = [[UILabel alloc] initWithFrame:CGRectZero];
    [label setLineBreakMode:UILineBreakModeWordWrap];
    [label setMinimumFontSize:FONT_SIZE];
    [label setNumberOfLines:0];
    [label setFont:[UIFont systemFontOfSize:FONT_SIZE]];
    [label setTag:1];

    [[label layer] setBorderWidth:2.0f];

    [[cell contentView] addSubview:label];
  }

  NSString *text = [items objectAtIndex:[indexPath row]];

  CGSize constraint = CGSizeMake(CELL_CONTENT_WIDTH - (CELL_CONTENT_MARGIN * 2), 20000.0f);

  CGSize size = [text sizeWithFont:[UIFont systemFontOfSize:FONT_SIZE] constrainedToSize:constraint lineBreakMode:UILineBreakModeWordWrap];

  if (!label)
    label = (UILabel*)[cell viewWithTag:1];

  [label setText:text];
  [label setFrame:CGRectMake(CELL_CONTENT_MARGIN, CELL_CONTENT_MARGIN, CELL_CONTENT_WIDTH - (CELL_CONTENT_MARGIN * 2), MAX(size.height, 44.0f))];

  return cell;
} 
```

[从这个](http://www.cimgf.com/2009/09/23/uitableviewcell-dynamic-height/)博客中提取的代码。它可能会帮助你！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-18T14:20:58.403

我认为错误在这里：

> cell.tag=indexPath.row+1000;

当您重用单元格时，您将用新值覆盖它的标签。最好检查手机号码

> [tableView indexPathForCell:cell];

请注意，它将仅为可见单元格返回正确的 indexPath。

# android - 媒体记录器 setprofile() 不适用于 nexus 手机

> ID：15378523
> 
> 赞同：0
> 
> 时间：2013-03-13T06:33:52.787
> 
> 标签：android, android-camera, mediarecorder, android-mediarecorder

> 我已经在三星平板电脑上测试了我的代码并注意，但相同的代码在 nexus 上不起作用。
> 
> 我知道nexus只有前置摄像头，并且摄像头正在打开，但是单击开始录制按钮它会崩溃....我通过setProfile上的错误检查了它。
> 
> 我的代码：

```
public boolean prepareVideoRecorder() {
      Toast.makeText(context, "Please wait..", Toast.LENGTH_SHORT).show();
//   mCamera = getCameraInstance();
    mMediaRecorder = new MediaRecorder();
    // Step 1: Unlock and set camera to MediaRecorder
     mCamera.stopPreview();
    mCamera.unlock();
    mMediaRecorder.setCamera(mCamera);
    // Step 2: Set sources
    mMediaRecorder.setAudioSource(MediaRecorder.AudioSource.CAMCORDER);
    mMediaRecorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);
     int layout = getResources().getConfiguration().screenLayout
                & Configuration.SCREENLAYOUT_SIZE_MASK;
        if (layout == Configuration.SCREENLAYOUT_SIZE_XLARGE) {

    switch (((WindowManager) getSystemService(WINDOW_SERVICE))
            .getDefaultDisplay().getOrientation()) {
    case ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE: {
    //  Toast.makeText(context, "SCREEN_ORIENTATION_LANDSCAPE", Toast.LENGTH_SHORT).show();
        int degrees = 0;
        android.hardware.Camera.CameraInfo info = new android.hardware.Camera.CameraInfo();
        int result;
        if (info.facing == Camera.CameraInfo.CAMERA_FACING_FRONT) {
            result = (info.orientation + degrees) % 360;
            result = (360 - result) % 360; // compensate the mirror
    //      Toast.makeText(context, "SCREEN_ORIENTATION_LANDSCAPE 1111", Toast.LENGTH_SHORT).show();
        } else { // back-facing
            result = (info.orientation - degrees + 360) % 360;
    //      Toast.makeText(context, "SCREEN_ORIENTATION_LANDSCAPE 222-- "+ result, Toast.LENGTH_SHORT).show();
        }

        mMediaRecorder.setOrientationHint(result);

        break;
    }
    case ActivityInfo.SCREEN_ORIENTATION_PORTRAIT: {
    //  Toast.makeText(context, "SCREEN_ORIENTATION_PORTRAIT", Toast.LENGTH_SHORT).show();
        int degrees = 270;
        android.hardware.Camera.CameraInfo info = new android.hardware.Camera.CameraInfo();
        int result;
        if (CurrentValues.cur_cam_face == 1) {
        //  Toast.makeText(context, "SCREEN_ORIENTATION_PORTRAIT 111", Toast.LENGTH_SHORT).show();
            result = (info.orientation + degrees) % 360;
            result = (360 - result) % 360; // compensate the mirror
            // System.out.println("FRONT CAMERA )))))))");

        } else { // back-facing
        //  Toast.makeText(context, "SCREEN_ORIENTATION_PORTRAIT 222", Toast.LENGTH_SHORT).show();
            result = degrees;// (info.orientation - degrees + 360) % 360;
            // System.out.println("BACK CAMERA )))))))");
        }

        mMediaRecorder.setOrientationHint(result);
        break;
    }
    case Configuration.ORIENTATION_LANDSCAPE: {
    //  Toast.makeText(context, "ORIENTATION_LANDSCAPE", Toast.LENGTH_LONG).show();
        int degrees = 180;
        android.hardware.Camera.CameraInfo info = new android.hardware.Camera.CameraInfo();
        int result;
        if (info.facing == Camera.CameraInfo.CAMERA_FACING_FRONT) {
        //  Toast.makeText(context, "ORIENTATION_LANDSCAPE 111", Toast.LENGTH_SHORT).show();
            result = (info.orientation + degrees) % 360;
            result = (360 - result) % 360; // compensate the mirror
        } else { // back-facing
        //  Toast.makeText(context, "ORIENTATION_LANDSCAPE 22", Toast.LENGTH_SHORT).show();
            result = (info.orientation - degrees + 360) % 360;
        }

        mMediaRecorder.setOrientationHint(result);
        break;
    }
    default: {
        //Toast.makeText(context, "DEFAULT 11", Toast.LENGTH_SHORT).show();
        int degrees = 90;
        android.hardware.Camera.CameraInfo info = new android.hardware.Camera.CameraInfo();
        int result;
        if (CurrentValues.cur_cam_face == 1) {
            result = (info.orientation + degrees) % 360;
            result = (360 - result) % 360; // compensate the mirror
        } else { // back-facing
            result = degrees;// (info.orientation - degrees + 360) % 360;
        }

        mMediaRecorder.setOrientationHint(result);
    }

        }
        }else if (layout == Configuration.SCREENLAYOUT_SIZE_LARGE) {
            switch (((WindowManager) getSystemService(WINDOW_SERVICE))
                    .getDefaultDisplay().getOrientation()) {

            case ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE: {
                Toast.makeText(context, "PORTRAIT " + ActivityInfo.SCREEN_ORIENTATION_PORTRAIT, Toast.LENGTH_SHORT).show();
                int degrees = 0;
                android.hardware.Camera.CameraInfo info = new android.hardware.Camera.CameraInfo();
                int result;
                if (info.facing == Camera.CameraInfo.CAMERA_FACING_FRONT) {
                    result = (info.orientation + degrees) % 360;
                    result = (360 - result) % 360; // compensate the mirror
                Toast.makeText(context, "SCREEN_PORTRAIT 1111", Toast.LENGTH_SHORT).show();
                } else { // back-facing
                    result = (info.orientation - degrees + 360) % 360;
                    Toast.makeText(context, "SCREEN_PORTRAIT 222-- "+ result, Toast.LENGTH_SHORT).show();
                }
                mMediaRecorder.setOrientationHint(result);
                break;
            }
            case ActivityInfo.SCREEN_ORIENTATION_PORTRAIT: {

                Toast.makeText(context, "else LANDSCAPE " +ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE, Toast.LENGTH_SHORT).show();
                int degrees = 90;
                android.hardware.Camera.CameraInfo info = new android.hardware.Camera.CameraInfo();
                int result;
                if (CurrentValues.cur_cam_face == 1) {
                    result = (info.orientation + degrees) % 360;
                    result = (360 - result) % 360; // compensate the mirror
                } else { // back-facing
                    result = degrees;// (info.orientation - degrees + 360) % 360;
                }
                mMediaRecorder.setOrientationHint(result);

                break;
        }
            }

    }else
        {
            switch (((WindowManager) getSystemService(WINDOW_SERVICE))
                    .getDefaultDisplay().getOrientation()) {
            case ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE: {
                Toast.makeText(context, "PORTRAIT " + ActivityInfo.SCREEN_ORIENTATION_PORTRAIT, Toast.LENGTH_SHORT).show();
                int degrees = 0;
                android.hardware.Camera.CameraInfo info = new android.hardware.Camera.CameraInfo();
                int result;
                if (info.facing == Camera.CameraInfo.CAMERA_FACING_FRONT) {
                    result = (info.orientation + degrees) % 360;
                    result = (360 - result) % 360; // compensate the mirror
                Toast.makeText(context, "SCREEN_PORTRAIT 1111", Toast.LENGTH_SHORT).show();
                } else { // back-facing
                    result = (info.orientation - degrees + 360) % 360;
                    Toast.makeText(context, "SCREEN_PORTRAIT 222-- "+ result, Toast.LENGTH_SHORT).show();
                }
                mMediaRecorder.setOrientationHint(result);
                break;
            }
            case ActivityInfo.SCREEN_ORIENTATION_PORTRAIT: {

                Toast.makeText(context, "else LANDSCAPE " +ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE, Toast.LENGTH_SHORT).show();
                int degrees = 90;
                android.hardware.Camera.CameraInfo info = new android.hardware.Camera.CameraInfo();
                int result;
                if (CurrentValues.cur_cam_face == 1) {
                    result = (info.orientation + degrees) % 360;
                    result = (360 - result) % 360; // compensate the mirror
                } else { // back-facing
                    result = degrees;// (info.orientation - degrees + 360) % 360;
                }
                mMediaRecorder.setOrientationHint(result);

                break;
        }
            }
        }

    // Step 3: Set a CamcorderProfile (requires API Level 8 or higher)
    CamcorderProfile camcorderProfile_HQ;
    if (CurrentValues.cur_cam_face == 1)
        camcorderProfile_HQ = CamcorderProfile.get(CamcorderProfile.QUALITY_LOW);
    else
        camcorderProfile_HQ = CamcorderProfile.get(CamcorderProfile.QUALITY_HIGH);
    mMediaRecorder.setProfile(camcorderProfile_HQ);
    // Step 4: Set output file
    mMediaRecorder.setOutputFile(getOutputMediaFile(MEDIA_TYPE_VIDEO)
            .toString());
    // Step 5: Set the preview output
    mMediaRecorder.setPreviewDisplay(mPreview.getHolder().getSurface());

    // Step 6: Prepare configured MediaRecorder
    try {
        mMediaRecorder.prepare();
    } catch (IllegalStateException e) {
        Log.d(TAG,
                "IllegalStateException preparing MediaRecorder: "
                        + e.getMessage());
        releaseMediaRecorder();
        return false;
    } catch (IOException e) {
        Log.d(TAG, "IOException preparing MediaRecorder: " + e.getMessage());
        releaseMediaRecorder();
        return false;
    }
    return true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T17:16:11.587

假设您正在尝试 latest `Nexus 7`，我觉得问题可能是`QUALITY_HIGH`您的设备中**未定义**的问题。[我在这里](https://android.googlesource.com/device/asus/grouper/+/android-4.2.2_r1/media_profiles.xml)`media_profiles.xml`检查了`AOSP`树，发现只有、和它们的延时版本已被定义。您可以通过查看设备上的来确认这一点。`CIF``QCIF``480p``media_profiles.xml``/etc/media_profiles.xml`

您可以调整您的代码以使用`CamcorderProfile.QUALITY_480P`而不是`CamcorderProfile.QUALITY_HIGH`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-29T20:46:56.727

我发现您的代码存在一些问题，其中任何一个都可能导致您的错误。

首先，仅仅创建一个 CameraInfo 对象是不够的，你必须调用：

```
Camera.getCameraInfo(cameraId, info); 
```

如果没有这个调用，你总是会得到 0 来表示朝向和方向（默认整数值）。

其次，您还应该使用接受 cameraId 的方法获取配置文件：

```
CamcorderProfile.get(cameraId, quality); 
```

我假设您正在正确使用 Camera.open(int cameraId) 方法，否则您可能无法让任何前置摄像头工作。

此外，这只是惯例，但我建议您将 switch 语句中的方向代码分解为函数以提高可读性。理想情况下，开关盒应该只有一行，但几行仍然可以。

# c - 在 FIFO 到达时从 FIFO 中读取数据（linux）

> ID：15378524
> 
> 赞同：0
> 
> 时间：2013-03-13T06:33:58.050
> 
> 标签：c, linux, ipc, pipe, fifo

我有两个用 C 编写的程序。程序 A 生成到 FIFO 的输出，程序 B 从 FIFO 读取该输出并决定进行相应的处理。现在在程序 A 中，我已将 stdout 重定向到 FIFO，以便每个 printf 方法都将输出抛出到 FIFO。

在程序 B 中，我打开 FIFO（在读取模式下）并开始使用 fgets() 逐行读取进程 A 的输出。现在问题出现在这里，因为我期望的行为不是我得到的。

我预计一旦进程 A 将某些行打印到 FIFO，进程 B 应该立即得到它（就像进程 A 中发生的事情的实时更新）但我得到的是进程 B 中不会读取 FIFO 中的内容直到进程 A 关闭了 FIFO 连接，因此我批量获取数据，而不是在进程 A 将某些内容打印到 FIFO 时立即获取数据。

我想知道它是否是FIFO的默认行为（即写入端关闭连接时批量读取数据）？

我希望我现在有代码，但我是从我的家用电脑上发布的。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T16:29:33.380

正如对我的问题的评论中所建议的那样，我在程序 A 中使用了 fflush 并解决了问题。谢谢以上所有。

# pointers - 托管指针与 Rust 中无限生命周期的借用指针有何不同？

> ID：15378530
> 
> 赞同：2
> 
> 时间：2013-03-13T06:34:05.053
> 
> 标签：pointers, language-design, lifetime, rust

Rust 使用*托管指针*，写`@T`的，它引用堆上将被垃圾收集的对象。

它还使用*借来的指针*，写入`&T`或`&lifetime/T`。

在我看来，这`@T`实际上类似于借来的指针，但具有特殊的无限寿命。这是正确的还是有一些我还没有得到的微妙之处？如果这是正确的，为什么 Rust 的设计者要创建一种新类型的指针而不是引入一个神奇的生命周期？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T11:36:16.637

**前言**：Rust 仍在开发中，自从回答了这个问题以来，语言已经发生了很大变化。

一方面，@指针即将从语言中删除，取而代之的是标准库提供的[Gc](http://static.rust-lang.org/doc/master/std/gc/index.html)和[Rc智能指针。](http://static.rust-lang.org/doc/master/std/rc/index.html)

其次，生命周期的语法是 now `&'a pointer`。[References and Lifetimes Guide](http://static.rust-lang.org/doc/master/guide-lifetimes.html)是关于该主题的全面且编写良好的资源。

如果您考虑到这两点，我的回答内容仍然是相关的。

* * *

在 Rust 中，有 3 种分配内存的方式：

*   在堆栈上 ( `T`)。这与 C 中的相同。
*   在任务的堆 ( `@T`) 上。这个内存是垃圾收集的，就像在任何 GC 语言中一样。
*   在交换堆 ( `~T`) 上。这段记忆的寿命取决于谁拥有它。

然后，根据分配的类型，您可以使用`@`指针（仅用于`@`分配的值）、`~`指针（仅用于`~`分配的值）、`&`指针（借用指针）或`*`指针（不安全）来保存对值的引用指针）。

```
let x: @int = @2; 
```

在这个例子中，第一个`@`表示指针类型，而第二个表示分配类型。这是一个`@`指向 GC 值的指针。

```
let y: &int = @2; 
```

这是一个`&`指向 GC 值的指针。

`&`指针很有用，因为它们可以引用任何类型的内存。当你写一个函数时，你当然希望将参数声明为`&`-pointer，因为调用者可以调用函数，并以他想要的方式分配值。如果您的函数将参数声明为`@`-pointer，则调用者别无选择，只能将堆分配的值传递给它。

`&`-pointers 引入了生命周期的概念。这是编译器用来保证这些指针永远不会超过分配的内存的概念（从而使其成为“安全”指针）。

编译器不知道 -allocated 值的“生命周期” `@`：它不是由编译器静态确定，而是由运行时动态确定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T09:31:44.597

我不是 Rust 方面的专家，只是对它感到好奇，所以不要把我的回答算作最终的真实。

据我了解，可能无法定义潜入指针的生命周期，只能推断。并且该声明`&lifetime/Pointer`仅帮助检查器确定它应该在生命周期分析中使用的真正指针的生命周期。所以你不能说你的一些隐藏指针有无限的生命周期，你只能使用已经存在的生命周期。

我想说的是，在其他语言中，隐藏指针可能被认为是弱指针，只是它们被静态证明总是指向有效内存。因此，具有无限生命周期的潜入指针与托管指针不同，因为它们不拥有对象。

我关于这个主题的信息来源是：[Rust Borrowed Pointers Tutorial](http://static.rust-lang.org/doc/tutorial-borrowed-ptr.html)。你读过吗？

# java - 出现数字格式异常

> ID：15378533
> 
> 赞同：0
> 
> 时间：2013-03-13T06:34:10.797
> 
> 标签：java

我正在为我的 Web 应用程序使用 java 和 flex，这些应用程序将用于研究所。如果我的结果是 mark 那么，小于 60 将是 Re Appear RA。对于等级系统，U将重新出现。但我面临的`NumberFormatException`结果是成绩系统。特此附上我的代码。请尽快就此提出建议。

```
XMLProcess xp = new XMLProcess();
try {
    Document doc = xp.processXml(xml);
    Element el = doc.getDocumentElement();
    NodeList nl = el.getElementsByTagName("batch");

    if (nl != null && nl.getLength() > 0) {
        for (int i = 0; i < nl.getLength(); i++) {

            Element el1 = (Element) nl.item(i);
            NodeList nl1 = el1.getElementsByTagName("student");
            String schKey = el1.getAttribute("schkey");
            if (nl1 != null && nl1.getLength() > 0) {
                for (int j = 0; j < nl1.getLength(); j++) {
                    String reAppear = "";
                    String sms = "";
                    Element el2 = (Element) nl1.item(j);
                    String studentName = el2.getAttribute("name");
                    String studentId = el2.getAttribute("id");
                    String studentKey = el2.getAttribute("key");
                    sms += "" + studentName + "\n";
                    sms += "Sem "
                            + sem.substring(sem.indexOf("-") + 1, sem.length())
                            + " "
                            + course
                            + "\n";
                    sms += "" + exam + "\n";

                    sms += (el2.getAttribute("mrg").equalsIgnoreCase("G")
                            ? "Sub: Grade"
                            : "Sub: Marks")
                            + "\n";
                    for (int k = 0;
                            k < el2.getAttributes().getLength();
                            k++) {
                        String aName =
                                el2.getAttributes().item(k).getNodeName();
                        if (aName.equalsIgnoreCase("key")
                                || aName.equalsIgnoreCase("key")
                                || aName.equalsIgnoreCase("id")
                                || aName.equalsIgnoreCase("name")
                                || aName.equalsIgnoreCase("status")
                                || aName.equalsIgnoreCase("total")
                                || aName.equalsIgnoreCase("percentage")
                                || aName.equalsIgnoreCase("mrg")) {
                        } else {

                            sms += el2.getAttributes().item(k).getNodeName().substring(
                                    1)
                                    + ": "
                                    + (el2.getAttribute("mrg").equalsIgnoreCase("G")
                                    ? (el2.getAttributes().item(k).getNodeValue())
                                    : (Integer.parseInt(
                                    el2.getAttributes().item(k).getNodeValue())
                                    < 60
                                    ? "RA"
                                    : el2.getAttributes().item(k).getNodeValue()))
                                    + "\n";

 /***Here exception occurs***/             if (Integer.parseInt(
                                    el2.getAttributes().item(k).getNodeValue())
                                    <= 60) {
                                reAppear = "SM";

                            }
                            if (el2.getAttributes().item(k).getNodeValue()
                                    == "U") {
                                reAppear = "SG";

                            }

                        }
                    }
                    if (reAppear.equalsIgnoreCase("SM")) {
                        sms += "RA : FAIL LESS 60 marks. ";
                        sms += "Meet Principal/Director/HOD";
                    }
                    if (reAppear.equalsIgnoreCase("SG")) {
                        sms += "U - Fail Re Appear. ";
                        sms += "Meet Principal/Director/HOD";
                    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T06:38:08.327

`Integer.parseInt(..)`当它接收的字符串表达式为 null 或不是有效整数时产生此异常。您有 2 个地方可以使用此电话。您对 XML 节点中包含的数据的假设似乎不正确。该节点不存在，或者它的值不是整数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T06:44:33.693

```
 if (Integer.parseInt(el2.getAttributes().item(k).getNodeValue())<= 60) 
```

这条线给你带来了问题。您需要编写类似的代码

```
if (el2.getAttributes().item(k).getNodeValue()
                                    == "U") {
                                reAppear = "SG";

 }else if (Integer.parseInt(
                 el2.getAttributes().item(k).getNodeValue())
                                    <= 60) {
               reAppear = "SM";

      } 
```

# php - 带有参数的 Facebook 帖子

> ID：15378534
> 
> 赞同：2
> 
> 时间：2013-03-13T06:34:16.600
> 
> 标签：php, facebook, facebook-graph-api

我需要使用参数发布 Facebook 帖子。我从这里使用了解决方案： [Generating Facebook Open Graph meta tags](https://stackoverflow.com/questions/8431694/dynamic-generation-of-facebook-open-graph-meta-tags?rq=1) dynamic and here：[Dynamic Facebook og Meta Tags in Wordpress PHP](https://stackoverflow.com/questions/11075694/dynamic-facebook-og-meta-tags-in-wordpress-php?lq=1)

最终工作代码：

```
<?php

$params = array();
if(count($_GET) > 0) {
    $params = $_GET;
} else {
    $params = $_POST;
}
// defaults
if($params['title'] == "") $params['title'] = "default_title";
if($params['score'] == "") $params['score'] = "1234567";

?>

<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US"
  xmlns:fb="https://www.facebook.com/2008/fbml"> 

<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# pathoflight: http://ogp.me/ns/fb/pathoflight#">
  <meta property="fb:app_id"         content="MY_APP_ID" /> 
  <meta property="og:type"           content="pathoflight:level" /> 
  <meta property="og:url"            content="<?php echo 'https://path-of-light.herokuapp.com'.$_SERVER['REQUEST_URI']; ?>"/>
  <meta property="og:image"          content="https://fbstatic-a.akamaihd.net/images/devsite/attachment_blank.png" /> 
  <meta property="og:title"          content="<?php echo $params['title']; ?>" /> 
  <meta property="pathoflight:score" content="<?php echo $params['score']; ?>" />
</head> 
```

它在浏览器和 Facebook 调试器中完美运行，但我通过 Facebook API Explorer 发布的帖子总是会导致 和 的默认`title`值`score`。如何让 Facebook 读取我*的真实*参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:50:13.863

问题还在于，如果您发布这样的帖子，Facebook API Explorer 会跳过参数

```
me/pathoflight:complete?level=https://path-of-light.herokuapp.com/level_new.php?title=my_title&score=223322 
```

这种方法有效：

```
me/pathoflight:complete
Add a field
level     https://path-of-light.herokuapp.com/level_new.php?title=my_title&score=223322 
```

# python - Django/Python - 用文字而不是数字显示月份

> ID：15378537
> 
> 赞同：0
> 
> 时间：2013-03-13T06:34:28.160
> 
> 标签：python, django

我在用文字而不是数字显示月份时遇到了一点问题。对，我的博客显示“13-03-2013”​​，但我希望它是“2013 年 3 月 13 日”

以下是我现在所做的事情：我在模型中添加了日期：

```
pub_date = models.DateTimeField("Gepubliceerd", auto_now_add=True) 
```

当我在博客模板中调用变量 pub_date 时，它​​以数字显示（13-03-2013）。

有没有一种简单的方法可以将数字更改为实际的月份名称？我一直在考虑创建一个包含每个月份名称的元组，让它检查 pub_date 中的月份数，并据此使用元组中的正确月份。

但出于某种原因，我觉得必须有一个更简单的方法。但到目前为止，我还没有成功找到另一种解决方案。

希望一些有经验的人有这方面的经验！

提前谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T06:46:27.403

`date`您应该使用Django 提供的模板过滤器。请参阅有关如何使用它的[文档。](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#date)

如果您想在这个地方使用这种日期格式，只需使用

```
{{ pub_date|date:'d-F-Y' } 
```

如果这是您希望随处使用的默认格式，请使用`DATE_FORMAT`和`SHORT_DATE_FORMAT`设置。阅读文档以获取更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T10:33:33.360

因此，在这篇文章之后（我应该在提出这个问题之前完成）之后进行了一些研究之后，我得出了以下结论：

```
{{ pub_date|date:'d-m-Y' }} 
```

这就是我如何称呼日期。在其中，您可以使用 Django 本身提供的日期格式。如果将“m”更改为大写“M”，它将以字母显示月份。但是这里解释了更多的可能性：

[在此处阅读有关 Django 日期格式的所有信息](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#date)

再一次，很抱歉快速提出问题

# ios - 如何制作不透明的 UIButton？

> ID：15378541
> 
> 赞同：0
> 
> 时间：2013-03-13T06:34:48.123
> 
> 标签：ios, xcode, ipad

我想为我的应用程序在按钮的右上角创建一个带有文本的不透明按钮。我尝试了以下方法来实现不透明度，但无法获得不透明度。

通过以下方法，我在背景中得到了白色按钮

```
1\.      UIButton *Button = [[UIButton buttonWithType:UIButtonTypeRoundedRect] retain];
        Button.frame = CGRectMake(offset, height/4, buttonWidth, buttonHeight);
        [Button setTitle:ButtonLabel forState:UIControlStateNormal];
         Button.backgroundColor = [UIColor clearColor];
        [Button addTarget:self action:@selector(action:)forControlEvents:UIControlEventTouchUpInside];
        [self.view addSubview:Button];

2\.  CALayer *layer = Button.layer;
    layer.backgroundColor = [[UIColor clearColor] CGColor];
    layer.borderColor = [[UIColor blackColor] CGColor];
    layer.cornerRadius = 8.0f;
    layer.borderWidth = 2.0f; 
```

我知道这可能是重复的，但是链接中给出的建议没有任何效果

另外请建议如何在按钮的右下角设置标题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T07:05:44.803

对于**`opacity`**，您可以`setAlpha`设置`UIButton`

对于文本对齐，您可以使用`contentHorizontalAlignment`和`contentVerticalAlignment`

**这是编辑后的代码：**

```
UIButton *Button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
Button.frame = CGRectMake(10, 10, 200, 100);
[Button setTitle:@"myButton" forState:UIControlStateNormal];
Button.backgroundColor = [UIColor clearColor];
[Button setAlpha:0.42];
Button.contentHorizontalAlignment = UIControlContentHorizontalAlignmentRight;
Button.contentVerticalAlignment = UIControlContentVerticalAlignmentBottom;
[Button addTarget:self action:@selector(action:)forControlEvents:UIControlEventTouchUpInside];
[self.view addSubview:Button]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T07:02:12.303

`UIButtonTypeCustom`当您不需要特殊样式的 RoundRect、InfoDark 等时使用buttonType。您将能够使用 Quartz 添加边框颜色和/或圆角

```
 #import <QuartzCore/QuartzCore.h>

_button.contentHorizontalAlignment = UIControlContentHorizontalAlignmentRight;
_button.contentVerticalAlignment = UIControlContentVerticalAlignmentBottom;
_button.layer.borderColor = [[UIColor blackColor] CGColor];
_button.layer.borderWidth = 1;
_button.layer.cornerRadius = 10; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T07:04:51.177

只需使用自定义类型创建按钮，而不是`UIButtonTypeRoundedRect`.

```
UIButton *button = [[UIButton buttonWithType:UIButtonTypeCustom] retain]; 
```

# mysql - MySQL load data infile for auto increment field 的预期行为是什么？

> ID：15378542
> 
> 赞同：1
> 
> 时间：2013-03-13T06:34:48.847
> 
> 标签：mysql, primary-key, auto-increment

我有一个生产 MySQL 数据库，出于某种原因，我需要从具有相似架构的开发数据库中加载一些数据。数据通过 mysql -e "select * from :>somefile 方法输出。

目标表的模式有一个 ID，它是 auto_increment 并且是主键。提交的 ID 的可能行为是什么？

案例1.两个db中没有相同的ID，会直接加载没有任何影响吗？任何未来的插入都从最大的 ID 开始？

情况2，两个db中的ID相同，这会产生错误吗？

谢谢。

# iphone - iPhone - InApp 购买恢复产品提示登录提醒两次

> ID：15378543
> 
> 赞同：3
> 
> 时间：2013-03-13T06:34:51.780
> 
> 标签：iphone, ios, in-app-purchase, app-store-connect, restore

我正在为非消耗性产品提供恢复功能。当我点击恢复时，它会提示登录警报，我使用现有的 Apple Id 进行登录，在输入用户 ID 和密码后，点击确定，然后再次提示登录警报。

为什么输入用户信息后又提示？

![登录提醒](../Images/93b94c1d83c3023622c3c5c269c94bde.png)

**编辑：恢复过程代码：**

```
-(void)RestorePurchasedItems
{
    [[SKPaymentQueue defaultQueue] addTransactionObserver:self];
    [[SKPaymentQueue defaultQueue] restoreCompletedTransactions];
}

- (void)paymentQueue:(SKPaymentQueue *)queue updatedTransactions:(NSArray *)transactions
{
    NSLog(@"=======%@",transactions);
}

- (void)paymentQueue:(SKPaymentQueue *)queue restoreCompletedTransactionsFailedWithError:(NSError *)error
{
    if (error.code == SKErrorPaymentCancelled) {

    }
}
- (void)paymentQueueRestoreCompletedTransactionsFinished:(SKPaymentQueue *)queue
{
    NSMutableArray* purchasableObjects  = [[[NSMutableArray alloc] init] autorelease];   
    for (SKPaymentTransaction *transaction in queue.transactions)
    {
        NSString *productID = transaction.payment.productIdentifier;
        [purchasableObjects addObject:productID];
    }
    self.OnSuccessRestored(purchasableObjects); //Block Call to access the products
} 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-03-14T06:20:31.893

不知道 iTunes 连接问题发生了什么神奇地消失了 :) :)

# apache - 如何理解“缓存控制机制”部分中 RFC2616 的“语义透明”？

> ID：15378546
> 
> 赞同：3
> 
> 时间：2013-03-13T06:35:12.620
> 
> 标签：apache, http, http-headers, cache-control, http-caching

1.RFC2616的“1.3术语”中“语义透明”的定义

语义透明

```
 A cache behaves in a "semantically transparent" manner, with
  respect to a particular response, when its use affects neither the
  requesting client nor the origin server, except to improve
  performance. When a cache is semantically transparent, the client
  receives exactly the same response (except for hop-by-hop headers)
  that it would have received had its request been handled directly
  by the origin server. 
```

2.我看不懂RFC2616“13.1.3 Cache-control Mechanisms”这句话

Cache-Control 标头允许客户端或服务器在请求或响应中传输各种指令。这些指令通常会覆盖默认缓存算法。**作为一般规则，如果标头值之间存在任何明显的冲突，则应用最严格的解释**（即最有可能保持语义透明性的解释）。

我混淆了“Cache-Control”标头中的**那些冲突值**。

3.我通过Apache web server测试了一些例子

3.1 网络拓扑

Telnet（客户端）<->HTTP 代理（Apache 以代理模式工作，S1）<->Web 服务器（Apache，S2）

3.1.1 S1 配置（作为缓存代理）：

```
<Location />
    ProxyPass http://10.8.1.24:80/
</Location>

<IfModule mod_cache.c>

        <IfModule mod_mem_cache.c>
            CacheEnable mem /
            MCacheSize 4096
            MCacheMaxObjectCount 100
            MCacheMinObjectSize 1
            MCacheMaxObjectSize 2048
        </IfModule>

        CacheDefaultExpire 86400
</IfModule> 
```

3.1.2 S2配置（作为真正的Web服务器工作）：

```
<filesMatch "\.(html|png)">
    Header set Cache-Control "max-age=5, max-age=15"
</filesMatch> 
```

3.2 测试用例

3.2.1 两个“max-age”值

```
GET /index.html HTTP/1.1
Host: haha
User-Agent: telnet

HTTP/1.1 200 OK
Date: Wed, 13 Mar 2013 03:40:25 GMT
Server: Apache/2.2.23 (Win32)
Last-Modified: Sat, 20 Nov 2004 20:16:24 GMT
ETag: "63e62-2c-3e9564c23b600"
Accept-Ranges: bytes
Content-Length: 44
Cache-Control: max-age=5, max-age=35, must-revalidate
Age: 3
Content-Type: text/html

<html><body><h1>It works!</h1></body></html> 
```

应用值“max-age=5”。这里我认为应用了“max-age=35”，因为这个值可以在缓存和服务器中存储更长时间的内容，以便后续请求从“语义透明”概念提高性能。

3.2.2 max-age=35 并且必须重新验证

```
GET /index.html HTTP/1.1
Host: haha
User-Agent: telnet

HTTP/1.1 200 OK
Date: Wed, 13 Mar 2013 03:41:24 GMT
Server: Apache/2.2.23 (Win32)
Last-Modified: Sat, 20 Nov 2004 20:16:24 GMT
ETag: "63e62-2c-3e9564c23b600"
Accept-Ranges: bytes
Content-Length: 44
Cache-Control: max-age=35, must-revalidate
Age: 10
Content-Type: text/html

<html><body><h1>It works!</h1></body></html> 
```

应用值 max-age=35。在这里，我认为应该应用价值“必须重新验证”。

3.2.3 max-age=35 且无存储

```
GET /index.html HTTP/1.1
Host: haha
User-Agent: telnet

HTTP/1.1 200 OK
Date: Wed, 13 Mar 2013 03:45:04 GMT
Server: Apache/2.2.24 (Unix)
Last-Modified: Sat, 20 Nov 2004 20:16:24 GMT
ETag: "63e62-2c-3e9564c23b600"
Accept-Ranges: bytes
Content-Length: 44
Cache-Control: max-age=35, no-store
Content-Type: text/html

<html><body><h1>It works!</h1></body></html> 
```

应用值“无存储”。

3.2.4 max-age=36 和无缓存

```
GET /index.html HTTP/1.1
Host: haha
User-Agent: telnet

HTTP/1.1 200 OK
Date: Wed, 13 Mar 2013 06:22:14 GMT
Server: Apache/2.2.24 (Unix)
Last-Modified: Sat, 20 Nov 2004 20:16:24 GMT
ETag: "63e62-2c-3e9564c23b600"
Accept-Ranges: bytes
Content-Length: 44
Cache-Control: max-age=35, no-cache
Content-Type: text/html

<html><body><h1>It works!</h1></body></html> 
```

应用值“无缓存”。

参考：RFC2616 [https://www.rfc-editor.org/rfc/rfc2616](https://www.rfc-editor.org/rfc/rfc2616)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T07:03:19.877

我将您提供的示例解释如下：

*   `max-age=5, max-age=15`:`max-age=5`获胜，因为它的缓存时间更短，限制性更强

*   `max-age=5, max-age=35, must-revalidate`：`must-revalidate`获胜，因为它要求客户端始终重新验证请求。[第 14.9.4 节](https://www.rfc-editor.org/rfc/rfc2616#section-14.9.4)说：

    ```
     The must-revalidate directive is necessary to support reliable
      operation for certain protocol features. In all circumstances an
      HTTP/1.1 cache MUST obey the must-revalidate directive; 
    ```

*   `max-age=35, no-store`:`no-store`获胜，因为它基本上意味着不应该执行缓存，这当然是最严格的。

*   `max-age=35, no-cache`:`no-cache`获胜，因为它类似于`no-store`并且不指定任何字段名称，这意味着缓存不能将响应重用于后续请求，这是两者中限制性更强的。

# android - Android 设备如何唤醒

> ID：15378550
> 
> 赞同：2
> 
> 时间：2013-03-13T06:35:24.743
> 
> 标签：android, wakelock

Android 设备可以通过两种方式进入“睡眠”模式。一种是让屏幕超时并自动关闭。在这种情况下，不清楚 CPU 是否仍在运行应用程序（当然，除非它们具有部分唤醒锁定）。另一种情况是当您按下电源按钮并且屏幕熄灭时。我不清楚这是否与让屏幕超时相同。

但我真正想知道的是真正发生了什么。例如，如果我按下电源按钮但有电话打进来，设备将唤醒并亮起并启动电话应用程序。这只是带有部分唤醒锁定功能的手机应用程序，还是制造商使用自定义硬件功能来识别手机响铃并使其退出睡眠模式？

我之所以感兴趣是因为如果它是硬件控制的，那么出现的问题是是否有其他硬件相关的功能以同样的方式控制。例如，GPS 接收器是否有可能保持活动状态但仅在接收到有效位置时才唤醒设备？

为了节省电池消耗，如果我们可以在某些硬件功能被激活时唤醒设备，那就太好了。我对 WakeLock 功能的印象是它只是一个软件功能，对电源按钮的支持很少。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T06:46:13.553

根据我的经验，电话和 GPS 等会广播`Intents`，您可以使用`BroadcastReceiver`. 该设备将保持足够长的时间来广播它们。

（从技术上讲，Android 固件处理设备的功率级别，并为某些功能提供唤醒锁。这给人的印象是硬件信号允许您的代码运行，但实际上硬件信号允许 Android 运行，这允许您的代码运行.)

因此，您将注册这些意图并在您的`BroadcastReceiver`子类中收到通知。设备将在您的接收器内短暂唤醒，足够长的时间让您控制并创建自己的`WakeLock`.

所以：

1.  该设备确实具有您所追求的功能 - 尽管具体来说它是由 Android 固件控制的，而不是完全由硬件控制。这意味着不同的固件版本可以做不同的事情。在不同设备上查看 GPS 跟踪应用程序上的调试日志输出时，这一点非常明显——查看固件 GPS 的使用情况。

2.  你可以 hook`Intent`并且会有时间实现你自己的`WakeLock`.

我会查看@Commonsware 的 WakefulIntentService，并利用它。

*   [https://github.com/commonsguy/cwac-wakeful](https://github.com/commonsguy/cwac-wakeful)

否则，他在他的书中写了一些关于它的非常好的信息。

* * *

**`BroadcastReceiver`我用来监听更新的示例`LocationProvider`**

这是从生产代码改编的示例代码 - 我已经删除了其中的一些部分，但将其留在这里以表明该接收器将运行，尽管其中没有任何特殊代码。

```
/**
 * Receives broadcasts from the {@link LocationProvider}s. The providers
 * hold a {@link PowerManager.WakeLock} while this code executes. The
 * {@link MyService} code needs to also hold a WakeLock for code that
 * is executed outside of this BroadcastReceiver.
 */
private BroadcastReceiver locationEventReceiver = new BroadcastReceiver()
{

    @Override
    public void onReceive(Context context, Intent intent)
    {
        // get location info
        Bundle extras = intent.getExtras();
        if (extras != null)
        {
            Log.d("mobiRic", "LOCATION RECEIVER CALLBACK");

            // check if this is a new location
            Location location = (Location) extras
                .get(android.location.LocationManager.KEY_LOCATION_CHANGED);
            Log.d("mobiRic", "  - intent = [" + intent + "]");
            Log.d("mobiRic", "  - location = [" + location + "]");
            if (location != null)
            {
                updateCurrentLocation(location, false);
            }
        }
    }
}; 
```

* * *

**我如何设置`BroadcastReceiver`获取 GPS 事件的示例**

这是我用来确保`Service`获取位置事件的 2 种（已编辑）方法。

```
/**
 * Starts listening for {@link LocationManager#GPS_PROVIDER} location
 * updates.
 */
void doStartLocationListeningGps()
{
    Intent intent = new Intent("MY_INTENT_GPS");
    PendingIntent pendingIntentGps = PendingIntent.getBroadcast(getApplicationContext(),
        action.hashCode(), intent, PendingIntent.FLAG_UPDATE_CURRENT);

    getLocationManager().requestLocationUpdates(LocationManager.GPS_PROVIDER,
        LOCATION_UPDATE_TIME_GPS, 0, pendingIntentGps);
}

/**
 * Registers the {@link #locationEventReceiver} to receive location events.
 */
void registerLocationReceiver()
{
    IntentFilter filter = new IntentFilter();

    /* CUSTOM INTENTS */
    filter.addAction("MY_INTENT_GPS");
    registerReceiver(locationEventReceiver, filter);
} 
```

# asp.net - 如何将连接字符串绑定到我的 SqlDataSource

> ID：15378551
> 
> 赞同：0
> 
> 时间：2013-03-13T06:35:30.230
> 
> 标签：asp.net, c#-4.0

我的 web.config 和 gridview 中有一个连接字符串。下面是我如何配置我的 gridview 的代码。

```
<asp:GridView ID="GridView1" OnRowDataBound="GridView1_RowDataBound" 
```

……

```
<asp:SqlDataSource ID="SqlDataSource1" runat="server" 
        ConnectionString="<%$ ConnectionStrings:sb_cpdConnectionString %>" 
        SelectCommand="SELECT colID, lname, fname, address, hobby from table1 where column like '%' ">
<SelectParameters>
            <asp:ControlParameter ControlID="TextBox1" Name="lname" PropertyName="Text" 
                Type="String" />
            <asp:ControlParameter ControlID="TextBox1" Name="fname" PropertyName="Text" 
                Type="String" />
        </SelectParameters>
    </asp:SqlDataSource> 
```

由于我想显示来自我的子数据源的另一个 gridview 并且我现在使用后面的代码，我如何将我的 SqlDataSource 绑定到我的数据库，就像我在我的 aspx 代码中所做的那样。

以下是我到目前为止所做的事情。

```
private SqlDataSource ChildDataSource(string strCustometId, string strSort)
{
    string strQRY = "";
    SqlDataSource ds = new SqlDataSource();
    string connectionString = WebConfigurationManager.ConnectionStrings["sb_cpdConnectionString"].ConnectionString;
    SqlConnection myConnection = new SqlConnection(connectionString);
    myConnection.Open();
strQRY = "SELECT [ID], [QuizNo]," +
                            "[Status],[CertificateNo],[Received] FROM [cpd_certificates]" +
                            " WHERE [ID] = '" + strCustometId + "'" +
                            "HAVING COUNT(*)=0 " + strSort;
   // this is where I need help to bind connection string. 
```

我收到一个错误：connectionString 属性已被初始化。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T06:46:39.340

您应该将连接字符串分配给数据源的连接字符串属性

```
string connectionString = WebConfigurationManager.ConnectionStrings["sb_cpdConnectionString"].ConnectionString;
ds.ConnectionString = connectionString; 
```

# .htaccess - 如何在服务器中启用 .zip 扩展名

> ID：15378554
> 
> 赞同：1
> 
> 时间：2013-03-13T06:36:07.687
> 
> 标签：.htaccess, zip, extension-methods, php

我想`.zip`在我的服务器中启用扩展。我在文件中添加了以下代码`php.ini`。但该网站将采用默认`php.ini`文件。

```
extension=php_zip.dll
extension=zip.so 
```

如果我将它上传到我网站的根目录。有什么办法可以把上传的 php.ini 代替 default`php.ini`吗？

或者是否有任何其他方式（`.htaccess`）在服务器中启用 .zip 扩展？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T07:09:04.500

> 如果我将它 [php.ini 文件] 上传到我网站的根目录。有什么办法可以把上传的 php.ini 代替 default`php.ini`吗？

您需要联系您的托管商它提供哪些选项。默认情况下，只需上传一个 (php.ini) 文件，就会将该文件放在您的 webroot 中，以便访问者可以下载它，但它不会影响您的 PHP 配置。

> 或者是否有任何其他方式（`.htaccess`）在服务器中启用 .zip 扩展名？

不，`.htaccess`因为无法启用 .zip 扩展名。[`extension`PHP ini 指令](http://www.php.net/ini.core#ini.extension)*`php.ini`*仅用于。

您需要联系您的托管商并讨论该问题，许多托管商提供为您安装扩展程序，并且他们还提供了一些机制来允许您指定自己的 php.ini，但如何完成取决于托管商。

# ruby-on-rails - 如何自定义social_stream gem？

> ID：15378555
> 
> 赞同：0
> 
> 时间：2013-03-13T06:36:14.007
> 
> 标签：ruby-on-rails, social-stream

我已经成功实现了 social_stream，但我无法将其功能整合到我的应用程序中。我无法理解 github 上的内容。任何实施过 Social_Stream 的人，请帮助我。我想改变我的应用程序的外观。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:05:48.160

看看[Rails 引擎](http://edgeguides.rubyonrails.org/engines.html)的工作方式。

这是自定义引擎时应注意的[railscast](http://railscasts.com/episodes/277-mountable-engines)。（与使用 social_stream 的方式完全相同）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T18:59:24.620

Social Stream 的 wiki 提供了有关如何自定义应用程序的详细信息。看看[https://github.com/ging/social_stream/wiki/How-to-change-controllers%2C-models%2C-views%2C-assets-and-locales](https://github.com/ging/social_stream/wiki/How-to-change-controllers%2C-models%2C-views%2C-assets-and-locales)

# php - 从 PHP 创建存储过程

> ID：15378558
> 
> 赞同：0
> 
> 时间：2013-03-13T06:36:33.500
> 
> 标签：php, mysql, procedures

我正在创建一个数据库设置脚本，它可以即时创建和设置数据库。我使用的 mysql 用户具有创建存储过程的完全权限。我的数据库服务器与我的应用程序服务器不同。

我能够创建用户，然后是数据库，然后选择数据库，然后创建表，然后将一些数据插入表中，然后创建视图等。但最后，当我创建存储过程时，我遇到了问题。

按照sql创建过程

```
CREATE DEFINER=`newuser`@`192.168.0.10` PROCEDURE `AppCounts_Stagewise_Monthly_Weekly` (IN FILTERTYPE INTEGER)
BEGIN
IF(FILTERTYPE = 0) THEN
SELECT base_user_id, stage, COUNT(vw_application.id) AS app_counts, WEEK(DATE) AS `week`, YEAR(DATE) AS `year`
    FROM vw_application 
    WHERE DATE_SUB(CURDATE(),INTERVAL 7 DAY) <= DATE(DATE) 
    AND DATE(DATE) <= CURDATE() GROUP BY vw_application.stage, base_user_id;
ELSE    
    SELECT base_user_id, stage, COUNT(vw_application.id) AS app_counts, MONTH(DATE) AS `month`, YEAR(DATE) AS `year`
    FROM vw_application 
    WHERE DATE_SUB(CURDATE(),INTERVAL 30 DAY) <= DATE(DATE) AND DATE(DATE) <= CURDATE() GROUP BY vw_application.stage, base_user_id;
END IF; 
END; 
```

上面的`create procedure`s SQL 用一个特殊的分隔符分隔并放在一个文件中。我打开文件并通过分隔符分解每个创建脚本以获取数组中的每个创建语句并使用 zend db 适配器执行它们。

```
$data = file_get_contents($this->_specimenDbFiles['ROUTINES']);
$data = explode('--', $data);

foreach($data as $key => $value) {
    $clientDbAdaptor->query($value); 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T09:46:13.207

我刚刚设法让这个工作。

基本上我所做的是在我的数据库服务器上运行，并且错误已解决。

```
mysql_upgrade -u root -p 
```

# java - 如何查找 IType 是否为抽象类

> ID：15378560
> 
> 赞同：6
> 
> 时间：2013-03-13T06:36:39.747
> 
> 标签：java, eclipse-jdt

我有一个类的 IType 对象。我想知道该类是否是抽象类。IType 或 ICompilationUnit 中是否有任何方法可以确定相同的（反射除外）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-13T13:59:02.120

```
IType type = ...;
boolean isAbstract = Flags.isAbstract(type.getFlags()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T09:07:40.737

您可以获取 IType 的完全限定名称（可能使用 IType.getTypeQualifiedName()），然后在该名称上使用 Class.forName() 来获取 Class 对象，然后按照其他人的建议使用 Modifier.isAbstract()。

Java 的 Class 对象是反射套件的一部分，所以这种方式仍然有点使用反射......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T06:42:56.857

```
Class clazz = IType.class;
Modifier.isAbstract(clazz.getModifiers()) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T06:44:29.600

添加以下导入：

```
import java.lang.reflect.Modifier; 
```

然后使用以下方法对其进行测试：

```
if(Modifier.isAbstract(IType.class.getModifiers()))
    //do something... 
```

# php - 使用PHP以内联样式删除元素的最佳方法？

> ID：15378563
> 
> 赞同：-1
> 
> 时间：2013-03-13T06:37:17.383
> 
> 标签：php, css, inline

因为我正在制作我的数据库驱动网站的移动版本。您能否告诉使用 PHP 过滤元素的内联样式属性中的所有浮点数的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T06:40:48.380

我猜没有这样的命令，使用`fopen`php中`find-replace`的命令和 css 键值读取文件的最佳方法..并将输出包含到您的移动版本页面中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T06:59:25.107

```
// $rawHTML : This is the assumed variable containing the HTML to be filtered/displayed

$filteredHTML = preg_replace(
  array(
    '/style=["\'](.*)float\s*:\s*(?:left|right|none);?\s*(.*)["\']/' ,
    '/\s*style=["\']{2}/'
  ) ,
  array(
    'style="$1$2"' ,
    ''
  ) ,
  $rawHTML
); 
```

此代码将产生以下内容：

```
$rawHTML = '<div style="float:left">Whatever</div>';
$filteredHTML = '<div>Whatever</div>' 
```

它也将保持任何其他风格不变

```
$rawHTML = '<div style="float:left;color:red">Whatever</div>';
$filteredHTML = '<div style="color:red">Whatever</div>' 
```

和

```
$rawHTML = '<div style="font-weight:bold;float:left;color:red">Whatever</div>';
$filteredHTML = '<div style="font-weight:bold;color:red">Whatever</div>' 
```

# email - CRM 2011 普通用户发信时出现邮件路由器错误

> ID：15378564
> 
> 赞同：1
> 
> 时间：2013-03-13T06:37:25.897
> 
> 标签：email, dynamics-crm-2011, crm, microsoft-dynamics

我不明白为什么电子邮件路由器也能正常工作。我正在尝试为 CRM 2011 中的所有用户设置电子邮件分发设置。我也设法为系统管理员配置了电子邮件路由器，但是当我尝试使用用户帐户发送一封信时它不起作用

在事件日志中，我得到了两种类型的错误：

1.  电子邮件路由器服务无法使用程序集处理提供者工作项
2.  您指定的访问凭据没有足够的委托权限来发送电子邮件。请联系您的 Microsoft Exchange 管理员以授予所需的权限。

好吧，但是电子邮件路由器中的测试访问运行没有任何错误。

有没有人有同样的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T08:23:13.810

每个人 =) 最终，那里写的说明帮助 [http://www.interactivewebs.com/blog/index.php/server-tips/crm-2011-email-router-setup-and-settings/](http://www.interactivewebs.com/blog/index.php/server-tips/crm-2011-email-router-setup-and-settings/)

另外，喜欢这篇文章“CRM 2011 电子邮件路由器问题——她是个善变的婊子”，关于如何解决电子邮件路由器的一些问题

[http://www.interactivewebs.com/blog/index.php/server-tips/crm-2011-email-router-problemsshes-a-fickle-bitch/](http://www.interactivewebs.com/blog/index.php/server-tips/crm-2011-email-router-problemsshes-a-fickle-bitch/)

PS 它与 CRM 2011 电子邮件路由器问题有关！

# asp-classic - 无法让 ASP Classic global.asa 文件在 IIS 7.5 下运行

> ID：15378566
> 
> 赞同：2
> 
> 时间：2013-03-13T06:37:30.903
> 
> 标签：asp-classic, iis-7.5

我正在尝试对运行 IIS 7.5 的 Windows 7 计算机上的 ASP 应用程序进行故障排除。

ASP 经典应用程序有一堆在 global.asa 文件中配置的东西，但在 IIS 7.5 上似乎根本没有处理。

例如这个：

```
<OBJECT RUNAT=Server SCOPE=Session ID=ums_dict PROGID="Scripting.Dictionary">
</OBJECT> 
```

在服务器上创建一个名为 ums_dict 的字典对象，该对象在我的 PC 上不可用。还有一个不运行的 Sub Session_OnStart。

我已经把它做成了自己的应用程序并确保它位于应用程序的根目录中，我还将应用程序池设置为 Classic .NET AppPool，尝试了 2.0 框架和 4.0 框架，以及 32 位与 64 位应用程序水池。我还确保应用程序池处于经典模式。

还有什么我可以尝试的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-17T22:19:20.427

这是我将所有站点从 IIS 6 迁移到 IIS 7.x 时构建的清单：

(1) 不要以 .com 结尾的站点文件夹命名。

（2）创建用户账号：-【应用池用户身份】为app_pool_blahblahblah，密码：xxxxxx

(3) 在服务器管理器中，右键单击“Web 服务器（IIS）”并选择“添加角色服务”。添加 IIS 6 管理兼容性。

(4) 在服务器管理器功能下添加 SMTP 服务器。安装 IIS6 Resource Kit，以便您可以使用 Metabase Explorer。授予 [app pool user identity] 用户对 IIS Metabas 中 /Local Machine/SmtpSvc/ 和 /Local Machine/SmtpSvc/1/ 节点的读取权限

(5) 在应用程序池中，高级设置： - 将 .Net Framework 版本设置为“v2.0”<-- 修复了默认 asp doc 不起作用的问题！- 将“启用 32 位应用程序”设置为 TRUE。- 将托管管道模式设置为“经典”。- 在 Process Model 下，将 Identity 更改为我们创建的“[app pool user identity]”帐户。- 确保“加载用户配置文件”设置为 FALSE。- 确保“最大工作进程”为“1”。

(6) 邮件：在 IIS 6 管理控制台中：http: [//intellitect.com/configuring-windows-smtp-server-on-windows-2008-for-relay/](http://intellitect.com/configuring-windows-smtp-server-on-windows-2008-for-relay/) - 在 SMTP 虚拟服务器属性下： -- “访问”选项卡--> 中继：添加此框的IP，包括127.0.0.1 --“交付”选项卡-->高级：为“完全限定域名”放置框的名称--“交付”选项卡-->高级：为“ smart host" put "dedrelay.secureserver.net" -- "Delivery" 标签 --> Outbound connections：确保限制设置为 100。 -- "Security" 标签 --> 添加 "[app pool user identity]" 和IIS_IUSRS

(7) 在网站下的 IIS 7.5 中： - 在 ASP 下： -- 仅当问题时：将启用缓冲设置为“false” -- 在限制下将最大请求实体和缓冲限制更改为 1024000000 -- 将脚本语言设置为“vbscript” - - 将“向浏览器发送错误”设置为 true - 身份验证 -> 编辑“匿名身份验证”并设置为应用程序池标识。
- 仅在出现问题时：在错误页面下：在 404 下设置为“/home.asp”和“执行 URL” - 仅在出现问题时：编辑 c:\windows\system32\inetsrv\config\applicationHost.config：更改为“允许” - 在管理（底部）下进入“配置编辑器”。-- 在下拉列表中转到 System.web --> http 运行时并将 maxRequestLength 更改为 1024000000 -- 在下拉列表中转到 System.

(8) 为以下文件夹设置“修改”权限： - windows\temp - inetpub\temp - inetpub\mailroot - 仅在出现问题时：windows\serviceprofiles\networkservice\AppData\Local\Temp？

并在注册表中设置权限：-仅在出现问题时：HKLM\SOFTWARE\Wow6432Node\Microsoft\Jet\4.0\Engines?

对于这些用户帐户： - IIS_IUSRS - [应用程序池用户身份] - 网络服务

(9) 安装和使用Process Monitor查找权限问题——过滤器

# iphone - 在 ios 中使用 avcapturesession 仅捕获音频？

> ID：15378569
> 
> 赞同：2
> 
> 时间：2013-03-13T06:37:54.820
> 
> 标签：iphone, ios, objective-c, jailbreak, avcapturesession

我是 avcapture 会话的新手。我不明白如何只录制音频。我从苹果网站找到了以下代码，但它只记录图像。有人可以帮我吗？

**编辑：**我赞成每条评论或答案:)

```
// Create and configure a capture session and start it running
- (void)setupCaptureSession 
{
    NSError *error = nil;

    // Create the session
    AVCaptureSession *session = [[AVCaptureSession alloc] init];

    // Configure the session to produce lower resolution video frames, if your 
    // processing algorithm can cope. We'll specify medium quality for the
    // chosen device.
    session.sessionPreset = AVCaptureSessionPresetMedium;

    // Find a suitable AVCaptureDevice
    AVCaptureDevice *device = [AVCaptureDevice
                             defaultDeviceWithMediaType:AVMediaTypeVideo];

    // Create a device input with the device and add it to the session.
    AVCaptureDeviceInput *input = [AVCaptureDeviceInput deviceInputWithDevice:device 
                                                                    error:&error];
    if (!input) {
        // Handling the error appropriately.
    }
    [session addInput:input];

    // Create a VideoDataOutput and add it to the session
    AVCaptureVideoDataOutput *output = [[[AVCaptureVideoDataOutput alloc] init] autorelease];
    [session addOutput:output];

    // Configure your output.
    dispatch_queue_t queue = dispatch_queue_create("myQueue", NULL);
    [output setSampleBufferDelegate:self queue:queue];
    dispatch_release(queue);

    // Specify the pixel format
    output.videoSettings = 
                [NSDictionary dictionaryWithObject:
                    [NSNumber numberWithInt:kCVPixelFormatType_32BGRA] 
                    forKey:(id)kCVPixelBufferPixelFormatTypeKey];

    // If you wish to cap the frame rate to a known value, such as 15 fps, set 
    // minFrameDuration.
    output.minFrameDuration = CMTimeMake(1, 15);

    // Start the session running to start the flow of data
    [session startRunning];

    // Assign session to an ivar.
    [self setSession:session];
}

// Delegate routine that is called when a sample buffer was written
- (void)captureOutput:(AVCaptureOutput *)captureOutput 
         didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer 
         fromConnection:(AVCaptureConnection *)connection
{ 
    // Create a UIImage from the sample buffer data
    UIImage *image = [self imageFromSampleBuffer:sampleBuffer];

     < Add your code here that uses the image >

}

// Create a UIImage from sample buffer data
- (UIImage *) imageFromSampleBuffer:(CMSampleBufferRef) sampleBuffer 
{
    // Get a CMSampleBuffer's Core Video image buffer for the media data
    CVImageBufferRef imageBuffer = CMSampleBufferGetImageBuffer(sampleBuffer); 
    // Lock the base address of the pixel buffer
    CVPixelBufferLockBaseAddress(imageBuffer, 0); 

    // Get the number of bytes per row for the pixel buffer
    void *baseAddress = CVPixelBufferGetBaseAddress(imageBuffer); 

    // Get the number of bytes per row for the pixel buffer
    size_t bytesPerRow = CVPixelBufferGetBytesPerRow(imageBuffer); 
    // Get the pixel buffer width and height
    size_t width = CVPixelBufferGetWidth(imageBuffer); 
    size_t height = CVPixelBufferGetHeight(imageBuffer); 

    // Create a device-dependent RGB color space
    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB(); 

    // Create a bitmap graphics context with the sample buffer data
    CGContextRef context = CGBitmapContextCreate(baseAddress, width, height, 8, 
      bytesPerRow, colorSpace, kCGBitmapByteOrder32Little | kCGImageAlphaPremultipliedFirst); 
    // Create a Quartz image from the pixel data in the bitmap graphics context
    CGImageRef quartzImage = CGBitmapContextCreateImage(context); 
    // Unlock the pixel buffer
    CVPixelBufferUnlockBaseAddress(imageBuffer,0);

    // Free up the context and color space
    CGContextRelease(context); 
    CGColorSpaceRelease(colorSpace);

    // Create an image object from the Quartz image
    UIImage *image = [UIImage imageWithCGImage:quartzImage];

    // Release the Quartz image
    CGImageRelease(quartzImage);

    return (image);
} 
```

# java - FontMetrics 生成 NullPointerException

> ID：15378579
> 
> 赞同：3
> 
> 时间：2013-03-13T06:38:28.143
> 
> 标签：java, null, nullpointerexception, fontmetrics

我为 Java 中的簿记程序创建的 GUI 的一部分需要显示不同的字符串。在显示此字符串之前，它必须在适当的地方添加换行符。为此，我创建了一个扩展 JTextArea 的类，并像这样重写了 setText() 方法：

```
public class ContentPane extends JTextArea {

private FontMetrics fm;

public ContentPane() {
    super();
    // Instatiate FontMetrics
}

public ContentPane(String string) {
    super(string);
    // Instatiate FontMetrics
}

@Override
public void setText(String text) {
    int n;
    String remainder;

    while (fm.stringWidth(text) > maxStringWidth()) {
        n = numberOfCharsToCut(text);
        remainder = text.substring(text.length() - n);
        text = text.substring(0, text.length() - n) + "\n" + remainder;
    }

    super.setText(text);
}

private int numberOfCharsToCut(String str) {
    String newStr = str;
    int i = 0;
    while (fm.stringWidth(newStr) > maxStringWidth()) {
        newStr = str.substring(0, str.length() - i);
        i++;
    }
    return i;
}

private int maxStringWidth() {
    return fm.stringWidth("@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@lll");
}
} 
```

代替“// Instatiate FontMetrics”，我尝试了一些不同的东西。起初我尝试使用“new”创建一个 FontMetrics 对象......

```
fm = new FontMetrics(); 
```

...只是发现您无法以这种方式实例化 FontMetrics。我尝试使用 getFontMetrics(font) 检索 FontMetrics 对象，从这个问题的答案中获取默认的 swing 字体：

[如何获得 Swing JTabbedPane 标签的默认字体？](https://stackoverflow.com/questions/1434201/default-font-for-swing-text)

我的代码如下所示：

```
fm = getFontMetrics(UIManager.getDefaults().getFont("TabbedPane.font")); 
```

这引发了 NullPointerException。我也试过：

```
fm = getGraphics().getFontMetrics(UIManager.getDefaults().getFont("TabbedPane.font")); 
```

这也给了我一个 NullPointerException。也许我不明白如何使用 FontMetrics。任何见解都会受到赞赏。

编辑：好的，现在我又再次尝试了上面的两个片段，将 UIManager.getDefaults().getFont(...) 替换为 getFont()。抛出相同的 NullPointerException。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T07:04:44.083

要确定问题出在哪里，您应该尝试将引发异常的物理行中的每个逻辑行分开。例如，

```
UIDefaults uiDefaults = UIManager.getDefaults();
Font font = uiDefaults.getFont("TabbedPane.font");
Graphics graphics = getGraphics();
fm = graphics.getFontMetrics(font); 
```

我怀疑问题在于 UI 默认值中没有使用“TabbedPane.font”键注册的字体。为了克服这个问题，您应该能够通过该`Component#getFont`方法直接从您的组件中获取字体。无论如何，这确实是您想要的字体。

# android - ArrayList 添加项。我的代码有什么问题？

> ID：15378582
> 
> 赞同：-3
> 
> 时间：2013-03-13T06:38:39.947
> 
> 标签：android, arraylist

向 ArrayList 添加元素时出错。我`mArrayList.add(oneToolkit);`在其他活动中遇到错误，相同的方法工作正常。当我评论 `mArrayList.add(oneToolkit);`每件事都很好。Foolowing 是我的 AsyncTask 代码和其中调用的方法。

```
private void getToolkits(){     
    JSONObject jsonObject = JSONParser.getJsonObject(URL);
    Log.d(Constants.TAG,"jsonObject: "+jsonObject.toString());
    try {
        JSONArray AllResults = jsonObject.getJSONArray("AppTrainee");
        //Log.d(Constants.TAG,"External Training: "+ AllResults.toString() + " Length: "+ AllResults.length());
        JSONObject newObject = AllResults.getJSONObject(0);
        JSONArray newArray = newObject.getJSONArray("Training Toolkits");
        Log.d(Constants.TAG, "Lenght: "+newArray.length());
        for(int i=0;i<newArray.length();i++){
                JSONObject oneResult = newArray.getJSONObject(i);
                Log.d(Constants.TAG,"Name "+i+" : "+oneResult.getString("ToolkitName"));
                Toolkit oneToolkit = new Toolkit();
                oneToolkit.setToolkitID(Integer.parseInt(oneResult.getString("ToolkitID")));
                oneToolkit.setToolkitName(oneResult.getString("ToolkitName"));
                oneToolkit.setDisplayOrder(Integer.parseInt(oneResult.getString("DisplayOrder")));
                oneToolkit.setButtonImage(oneResult.getString("Tk_ButtonImage"));
                mArrayList.add(oneToolkit);

        }
        Log.d(Constants.TAG, "Done");
    } catch (JSONException e) {
        e.printStackTrace();
    }

}

private void showToolkits(){
    //mAdapter = new ToolkitsAdapter(getApplicationContext(), mArrayList);
    //mGridView.setAdapter(mAdapter);
}

private class GetDataTask extends AsyncTask<String, Void, Void> {
    private final ProgressDialog dialog = new ProgressDialog(ToolkitsActivity.this);

    // can use UI thread here
    protected void onPreExecute() {
        this.dialog.setMessage("Loading...");
        this.dialog.setCancelable(false);
        this.dialog.show();
    }

    // automatically done on worker thread (separate from UI thread)
    protected Void doInBackground(final String... args) {
        getToolkits();
        return null;
    }

    // can use UI thread here
    protected void onPostExecute(final Void unused) {
        if (this.dialog.isShowing()) {
            this.dialog.dismiss();
            showToolkits();
        }
    }
} 
```

日志猫

```
03-07 22:25:27.758: W/dalvikvm(1041): threadid=9: thread exiting with uncaught exception (group=0x40015560)
03-07 22:25:27.788: E/AndroidRuntime(1041): FATAL EXCEPTION: AsyncTask #1
03-07 22:25:27.788: E/AndroidRuntime(1041): java.lang.RuntimeException: An error occured while executing doInBackground()
03-07 22:25:27.788: E/AndroidRuntime(1041):     at android.os.AsyncTask$3.done(AsyncTask.java:200)
03-07 22:25:27.788: E/AndroidRuntime(1041):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:274)
03-07 22:25:27.788: E/AndroidRuntime(1041):     at java.util.concurrent.FutureTask.setException(FutureTask.java:125)
03-07 22:25:27.788: E/AndroidRuntime(1041):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:308)
03-07 22:25:27.788: E/AndroidRuntime(1041):     at java.util.concurrent.FutureTask.run(FutureTask.java:138)
03-07 22:25:27.788: E/AndroidRuntime(1041):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
03-07 22:25:27.788: E/AndroidRuntime(1041):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
03-07 22:25:27.788: E/AndroidRuntime(1041):     at java.lang.Thread.run(Thread.java:1019)
03-07 22:25:27.788: E/AndroidRuntime(1041): Caused by: java.lang.NullPointerException
03-07 22:25:27.788: E/AndroidRuntime(1041):     at uk.org.humanfocus.ToolkitsActivity.getToolkits(ToolkitsActivity.java:60)
03-07 22:25:27.788: E/AndroidRuntime(1041):     at uk.org.humanfocus.ToolkitsActivity.access$0(ToolkitsActivity.java:43)
03-07 22:25:27.788: E/AndroidRuntime(1041):     at uk.org.humanfocus.ToolkitsActivity$GetDataTask.doInBackground(ToolkitsActivity.java:87)
03-07 22:25:27.788: E/AndroidRuntime(1041):     at uk.org.humanfocus.ToolkitsActivity$GetDataTask.doInBackground(ToolkitsActivity.java:1)
03-07 22:25:27.788: E/AndroidRuntime(1041):     at android.os.AsyncTask$2.call(AsyncTask.java:185)
03-07 22:25:27.788: E/AndroidRuntime(1041):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
03-07 22:25:27.788: E/AndroidRuntime(1041):     ... 4 more
03-07 22:25:30.008: E/WindowManager(1041): Activity uk.org.humanfocus.ToolkitsActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@4052f1a0 that was originally added here
03-07 22:25:30.008: E/WindowManager(1041): android.view.WindowLeaked: Activity uk.org.humanfocus.ToolkitsActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@4052f1a0 that was originally added here
03-07 22:25:30.008: E/WindowManager(1041):  at android.view.ViewRoot.<init>(ViewRoot.java:258)
03-07 22:25:30.008: E/WindowManager(1041):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:148)
03-07 22:25:30.008: E/WindowManager(1041):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
03-07 22:25:30.008: E/WindowManager(1041):  at android.view.Window$LocalWindowManager.addView(Window.java:424)
03-07 22:25:30.008: E/WindowManager(1041):  at android.app.Dialog.show(Dialog.java:241)
03-07 22:25:30.008: E/WindowManager(1041):  at uk.org.humanfocus.ToolkitsActivity$GetDataTask.onPreExecute(ToolkitsActivity.java:82)
03-07 22:25:30.008: E/WindowManager(1041):  at android.os.AsyncTask.execute(AsyncTask.java:391)
03-07 22:25:30.008: E/WindowManager(1041):  at uk.org.humanfocus.ToolkitsActivity.onCreate(ToolkitsActivity.java:39)
03-07 22:25:30.008: E/WindowManager(1041):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
03-07 22:25:30.008: E/WindowManager(1041):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
03-07 22:25:30.008: E/WindowManager(1041):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
03-07 22:25:30.008: E/WindowManager(1041):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
03-07 22:25:30.008: E/WindowManager(1041):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
03-07 22:25:30.008: E/WindowManager(1041):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-07 22:25:30.008: E/WindowManager(1041):  at android.os.Looper.loop(Looper.java:123)
03-07 22:25:30.008: E/WindowManager(1041):  at android.app.ActivityThread.main(ActivityThread.java:3683)
03-07 22:25:30.008: E/WindowManager(1041):  at java.lang.reflect.Method.invokeNative(Native Method)
03-07 22:25:30.008: E/WindowManager(1041):  at java.lang.reflect.Method.invoke(Method.java:507)
03-07 22:25:30.008: E/WindowManager(1041):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
03-07 22:25:30.008: E/WindowManager(1041):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
03-07 22:25:30.008: E/WindowManager(1041):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T06:50:42.207

你 mArrayList 是空的。只是尝试初始化它

```
List<Toolkit> mArrayList= new ArrayList<Toolkit>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T06:41:43.420

这是此错误的原因。

```
Caused by: java.lang.NullPointerException 03-07 22:25:27.788: 
```

可能缺少创建此对象 `mArrayList`

调试你的代码，我认为你发现了错误。

# php - Codeigniter中的PHP Mysql查询

> ID：15378583
> 
> 赞同：1
> 
> 时间：2013-03-13T06:38:49.163
> 
> 标签：php, mysql, codeigniter

我有两张表，一张是“forum_topic”，第二张是“forum_comments”

我想要一个 CodeIgniter 查询来获取 forum_topic 详细信息，例如我有一个查询“select * from forum_topic where topic_id = 1”然后我想要基于“forum_comments.topic_id = forum_topic.topic_id”的 forum_comments 表中的所有评论，但是论坛评论应该是树形视图格式，因为我们也有每条评论的 n 级回复，这些回复也存储在“forum_comments”表中，您可以在 forum_comments 表中看到一个字段“parent”，其中包含“comment_id”的回复制成。

**1 - 论坛主题**

```
CREATE TABLE IF NOT EXISTS `forum_topic` (
  `topic_id` int(11) NOT NULL AUTO_INCREMENT,
  `title` varchar(255) NOT NULL,
  `category` int(11) NOT NULL,
  `content` text NOT NULL,
  `created_by` int(11) NOT NULL,
  `created_date` datetime NOT NULL,
  `view_count` int(11) NOT NULL,
  `last_activity` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `status` enum('publish','unpublish') NOT NULL,
  PRIMARY KEY (`topic_id`)
) 
```

**2 - 论坛评论**

```
CREATE TABLE IF NOT EXISTS `forum_comments` (
  `comment_id` int(11) NOT NULL AUTO_INCREMENT,
  `comment_by` int(11) NOT NULL,
  `topic_id` int(11) NOT NULL,
  `parent` int(11) NOT NULL DEFAULT '0',
  `comment` text NOT NULL,
  `commented_date` datetime NOT NULL,
  `commented_type` enum('user','admin') NOT NULL DEFAULT 'user',
  `status` enum('publish','unpublish','block') NOT NULL,
  PRIMARY KEY (`comment_id`) 
```

)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T06:45:29.077

如果您正在寻找大量循环或连接的效率，我会说对“forum_comments”表使用“左右树”格式：

[http://www.sitepoint.com/hierarchical-data-database-2/](http://www.sitepoint.com/hierarchical-data-database-2/)

[http://en.wikipedia.org/wiki/Nested_set_model](http://en.wikipedia.org/wiki/Nested_set_model)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T06:55:29.773

您可以将这样的模型函数与查询一起使用

```
function getComments($topic_id){
    $query  =   "   SELECT
                        fc.*
                    FROM forum_topic AS ft
                    INNER JOIN forum_comments AS fc ON ft.topic_id  =   fc.topic_id
                    WHERE ft.topic_id   =   $topic_id
                    ORDER BY fc.parent";
    return $this->db->query($query)->result();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T06:57:32.020

你可以试试这个查询，看看它是否有效：

```
Select top.*,com.* from forum_topic as top left join forum_comments as com on com.topic_id = top.topic_id where top.topic_id = 1 order by top.topic_id desc 
```

# c++ - GCC 4.4.3 编译器链接问题

> ID：15378584
> 
> 赞同：-1
> 
> 时间：2013-03-13T06:38:54.823
> 
> 标签：c++, gcc, linker

好的，所以我试图找回 c++，并从一个基本程序开始。

```
#include <iostream>

using namespace std;

int main()
{
 cout << "So This Is It.";
 cout << "\n";
 return 0;
} 
```

这是结果：

```
-->gcc -g -o HELLO HELLO.cpp
/tmp/ccLZLm5N.o: In function `main':
/root/Programming/Learning/C++/HELLO.cpp:9: undefined reference to `std::cout'
/root/Programming/Learning/C++/HELLO.cpp:9: undefined reference to `std::basic_ostream<char, std::char_traits<char> >& std::operator<< <std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*)'
/root/Programming/Learning/C++/HELLO.cpp:10: undefined reference to `std::cout'
/root/Programming/Learning/C++/HELLO.cpp:10: undefined reference to `std::basic_ostream<char, std::char_traits<char> >& std::operator<< <std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*)'
/tmp/ccLZLm5N.o: In function `__static_initialization_and_destruction_0':
/usr/include/c++/4.4/iostream:72: undefined reference to `std::ios_base::Init::Init()'
/usr/include/c++/4.4/iostream:72: undefined reference to `std::ios_base::Init::~Init()'
/tmp/ccLZLm5N.o:(.eh_frame+0x12): undefined reference to `__gxx_personality_v0'
collect2: ld returned 1 exit status 
```

我的编译器：

```
-->gcc --version
gcc (Ubuntu 4.4.3-4ubuntu5.1) 4.4.3
Copyright (C) 2009 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. 
```

那么我可以请有关修复的一些信息吗？或者。如果我遇到任何更简单的语法问题，我该如何找到正确的信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T06:40:29.820

您使用了`C`编译器而不是`C++`编译器。`gcc`适用于 C，`g++`适用于 C++。GCC 的链接器将链接到 C 标准库，该标准库不包含 C++ 标准库提供的函数，从而导致未定义的引用。

所以使用正确的`g++`：

```
g++ -g -o HELLO HELLO.cpp 
```

### 补充说明：

通常`gcc`这样标识 C++ 源代码。`g++`但是，如果您没有自己安装，很可能您的 Ubuntu 安装尚未安装。请您的主管安装`g++`或自行安装`g++`：

```
sudu apt-get install g++ 
```

而且由于您已经在安装东西，请获取`gdb`并`valgrind`进行调试。

# c# - DisplayDocumentActionTaskPane 和 Visible 属性之间的区别

> ID：15378586
> 
> 赞同：1
> 
> 时间：2013-03-13T06:38:59.290
> 
> 标签：c#, excel, vsto, excel-interop, vba

我正在研究 excel vsto 解决方案。

无法理解以下属性之间的确切区别。

```
1\. Application.DisplayDocumentActionTaskPane 
2\. Application.CommandBars["Task Pane"].Visible = false;
3\. Workbook.ActionsPane.Visible 
```

这有什么区别吗？

# javascript - 用 fancybox 扩展 Javascript 确认框

> ID：15378588
> 
> 赞同：2
> 
> 时间：2013-03-13T06:39:03.743
> 
> 标签：javascript, fancybox

我`alert`像这样用fancybox扩展了我的所有东西

```
window.alert = function(message){
    $("#alert_message_box .warmsg span").html(message);
    $.fancybox({'href':'#alert_message_box'});
    return false;
} 
```

并且工作正常。我也尝试`confirm`像这样扩展盒子

```
 window.confirm = function(message){
    $("#confirm_message_box .warmsg span").html(message);
    $.fancybox({'href':'#confirm_message_box'});
} 
```

`confirm_message_box`div 包含两个按钮，`Yes`和`No`.

`if(confirm(alert_msg)){ }` 在这种情况下，如何`confirm`调用函数以及如何返回`true`和`false`调用函数

我不知道覆盖这些函数是否有任何问题。

这是一个带有 jquery 的 jsfiddle 演示（此处未使用 fancybox）

[http://jsfiddle.net/fzTa3/](http://jsfiddle.net/fzTa3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T06:45:05.040

在这种情况下，您将不得不更改您的工作流程，因为 Fancybox 版本的确认不是模式对话框（它不会暂停脚本执行）。您必须使用回调来调用相应的按钮点击：

```
window.confirm = function(message, onYes, onNo) {
    $("#confirm_message_box .warmsg span").html(message);
    $.fancybox({
        href: '#confirm_message_box'
        afterLoad: function() {
            this.inner.find('.btn-yes').click(onYes);
            this.inner.find('.btn-no').click(onNo);
        }
    });
} 
```

您需要将`onYes`函数绑定到按钮`Yes`和您的 fancybox 初始化。`onNo``No`

用法是这样的：

```
confirm('Are you sure?', function() {
    // he is sure
}, function() {
    // cancel something
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-04T08:31:10.467

不同意[@dfsq 的回答](https://stackoverflow.com/a/15378672/692942)，但我发现是，没有回调方法过于严格，而我自己在处理这个问题时发现了一种更灵活的方法来解决这个问题。

*示例用法：*

```
confirm("Do you wish to continue?", 
    {
        /* 
        Define your buttons here, can handle multiple buttons 
        with custom title and values
        */
        buttons: [
            { class: "yes", type: "button", title: "Yes", value: "yes" },
            { class: "no", type: "button", title: "No", value: "no" },
            { class: "maybe", type: "button", title: "Maybe?", value: "maybe" }
        ],
        modal: true
    }, 
    function(resp) {
        alert("You clicked " + resp);
    }
); 
```

*   [回答 Fancybox 的 Javascript/Jquery 回调 是 否 确认](https://stackoverflow.com/a/19659981/692942)

*   经典 是，不是 -`[jsfiddle](http://jsfiddle.net/lankymart/zLBNH/)`

*   不太通用的例子`[jsfiddle](http://jsfiddle.net/lankymart/zLBNH/9/)`

# javascript - Ember.js IE TextField 为空值显示“null”

> ID：15378591
> 
> 赞同：1
> 
> 时间：2013-03-13T06:39:30.663
> 
> 标签：javascript, ember.js

我在 IE 中遇到了一个奇怪的错误（9 及以下，尚未测试 10），其中控制器中的空值将在文本字段中显示为空字符串。

我已经能够在以下小提琴中隔离问题：http: [//jsfiddle.net/AyKarsi/3bGN4/50/](http://jsfiddle.net/AyKarsi/3bGN4/50/)

仅当我使用 ajax 调用填充控制器内容时才会出现此问题，因此

```
Ember.run.next(this, .. 
```

模拟ajax调用。

Chrome 和 Firefox 工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T02:35:40.947

如果您用 null 替换现有的文本字段绑定值，它实际上会在 IE 中打印一个 null 字符串，检查更新的小提琴以在 IE 中查看：

[http://jsfiddle.net/T4jxW/](http://jsfiddle.net/T4jxW/)

我不知道这是故意的还是错误的，但我已经通过以下方式解决了这个问题：

```
this.set('property', ''); 
```

而不是 this.set('property', null);

如果我找不到在 IE（所有版本）中发生这种情况的某种原因，我会报告它，有时在非 IE 浏览器中设置为 null 根本不会改变绑定值，如果你没有看到一致的值已经报告让我知道

# php - 在heroku上托管文件

> ID：15378599
> 
> 赞同：1
> 
> 时间：2013-03-13T06:40:09.807
> 
> 标签：php, heroku, filesystems, hosting, host

我目前正在开发 Facebook 应用程序，我需要执行以下操作： 创建一个包含“key”、“user”和“link”字段的哈希。**链接**字段应该包含一个字符串，即 json 文件的地址。

现在，我的问题如下：我从 facebook 收集数据并将其存储在 json 文件中。当一个事件被调度（例如用户点击一个按钮）时，如何在 heroku 上创建一个文件**DIRECLTY ，有点像一个文件夹，并将 URL 放入链接字段的哈希中？**我的位置应该看起来像`.../[user]/myfile.json`

或者，如果不是heroku，你能推荐另一个我可以做同样事情的主机吗？

注意：我是刚开始接触数据库，对SQL只有**非常基础**的了解，数据库还没有做完。我对postgres一无所知，但如果喜欢的话，我可以学习。我的应用程序主要是用*php*开发的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T13:44:16.353

[正如@hakre 所说，Heroku 在Ephemeral 文件系统](https://devcenter.heroku.com/articles/dynos#ephemeral-filesystem)上运行应用程序。这意味着当实例重新启动时，您的本地存储将丢失。

根据您要存储的数据，有多种存储方式可供选择。

1.  Cookie：以 cookie 的形式发回，让浏览器处理。如果数据由用户创建并且在某个时间点过期，这是可行的。
2.  PostgreSQL：如果您在应用程序中使用 SQL 数据库，它可以去那里。作为反序列化的行或`TEXT`字段。
3.  CDN：如果数据要对所有人公开，您可以将其上传到例如 Amazon S3 或 Rackspace CloudFiles 并发布容器。然后你可以通过 URL 引用它。
4.  云存储：如果数据需要一些访问控制，您仍然可以将其上传到 S3 或 CloudFiles，并在请求时以编程方式从那里提取。如果存在性能问题，您可以将其缓存在 Memcache 或其他一些缓存插件中。
5.  文档数据库：将数据存储`MondoDB`为`CouchDB`JSON 文档。两者都有很多功能。写作和阅读是两者的基本操作。如果您需要版本历史记录，`CouchDB`请为您执行此操作（默认情况下它存储 JSON 的所有修订版本。
6.  浏览器本地存储：现在我们有了 HTML5，您可以在浏览器上存储数据。它有点流血，并且不适用于仍然存在的一些较旧的浏览器。

除了文件之外，还有很多其他方法可以将 JSON 文档存储在其他位置。这些只是冰山一角。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T06:55:02.790

要直接在 heroku 上创建文件，您需要在源代码树中创建文件，然后在发布应用程序时将其存储在 heroku 上。

当然，这不适用于您要在应用程序运行时创建的文件。Heroku 不支持在同一服务器上运行时创建文件。至少不会因为文件系统不是持久的（对于不属于源树的任何内容）而将它们留在那里。

您需要在数据库或其他远程位置（如[Amazon S3](https://devcenter.heroku.com/articles/s3) ）中创建这些“文件” 。

另见：

*   [如何使用 heroku 的临时文件系统 (Stackoverflow)](https://stackoverflow.com/questions/12416738/how-to-use-herokus-ephemeral-filesystem)
*   [Heroku 临时文件系统和临时文件 (Stackoverflow)](https://stackoverflow.com/questions/14935497/heroku-ephemeral-filesystem-and-temporary-files)
*   [Heroku部署自动删除服务器文件？（堆栈溢出）](https://stackoverflow.com/questions/14031971/heroku-deploy-deletes-server-files-automatically)
*   [使用 Heroku 的潜在缺点是什么？（知乎）](http://www.quora.com/What-are-the-potential-downsides-of-using-Heroku)

# c# - 如何从下拉列表框中获取值

> ID：15378602
> 
> 赞同：2
> 
> 时间：2013-03-13T06:40:15.263
> 
> 标签：c#, asp.net, winforms

我想要的是从下拉列表中的选定项目中获取值，并在按钮单击事件中使用它来查询（选择表）。

```
 protected void DropDownList1_SelectedIndexChanged(object sender, EventArgs e)
    {
        if (DropDownList1.SelectedIndex == 1)
        {
            using (SqlConnection con = new SqlConnection(DBcon))
            {

               SqlCommand sqlCommand = new SqlCommand("Select * from tbl_WinApps_FileHeader");
               sqlCommand.Connection = con;

               SqlDataReader read = sqlCommand.ExecuteReader();

                GridView1.DataSource = read;
                GridView1.DataBind();

            }
        }
    }

  <asp:DropDownList ID="DropDownList1" runat="server" 
        onselectedindexchanged="DropDownList1_SelectedIndexChanged">
        <asp:ListItem>ER00 - File Header</asp:ListItem>
        <asp:ListItem>ER01 - Expense Report Trans</asp:ListItem>
        <asp:ListItem>ER02 - Expense Report Item Trans</asp:ListItem>
        <asp:ListItem>ER03 - Expense Report Item Tax Trans</asp:ListItem>
        <asp:ListItem>ER04 - Expense Report Item</asp:ListItem>
    </asp:DropDownList> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T06:43:23.130

```
DropDownList1.SelectedValue.ToString(); 
```

或者

```
DropDownList1.Text; 
```

或者

```
DropDownList1.SelectedValue.ToString(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T06:41:49.277

您可以使用[SelectedValue](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.selectedvalue.aspx)的属性`DropDownList`。要查看如何在 where 子句中向 select 查询添加参数，请参阅这篇[文章](https://stackoverflow.com/questions/4535327/adding-parameters-to-the-where-clause-of-a-sql-query)。

```
protected void DropDownList1_SelectedIndexChanged(object sender, EventArgs e)
{
    string sel = DropDownList1.SelectedValue.ToString();
  //  if (DropDownList1.SelectedIndex == 1)
  //  {
        using (SqlConnection con = new SqlConnection(DBcon))
        {

            SqlCommand sqlCommand = new SqlCommand("Select * from tbl_WinApps_FileHeader");
            sqlCommand.Connection = con;
            SqlDataReader read = sqlCommand.ExecuteReader();
            GridView1.DataSource = read;
            GridView1.DataBind();
        }
    //}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T06:42:35.587

你应该使用[`SelectedValue`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.selectedvalue.aspx)财产。

> 获取列表控件中选定项的值，或选择列表控件中包含指定值的项。

```
DropDownList1.SelectedValue.ToString(); 
```

喜欢;

```
string val = DropDownList1.SelectedValue.ToString();
using (SqlConnection con = new SqlConnection(DBcon))
{
    SqlCommand sqlCommand = new SqlCommand("Select * from tbl_WinApps_FileHeader");
    sqlCommand.Connection = con;

    SqlDataReader read = sqlCommand.ExecuteReader();

    GridView1.DataSource = read;
    GridView1.DataBind();
} 
```

如果你想把它用作你的参数`SqlCommand`，你可以像这样使用它；

```
SqlCommand sqlCommand = new SqlCommand("Select * from tbl_WinApps_FileHeader WHERE val = @val");
sqlCommand.Parameters.AddWithVAlue("@val", val);
sqlCommand.Connection = con;
SqlDataReader read = sqlCommand.ExecuteReader(); 
```

# mysql - mysql join 一张表的两列

> ID：15378610
> 
> 赞同：1
> 
> 时间：2013-03-13T06:40:45.080
> 
> 标签：mysql, sql, select, join

你好，我有一张桌子`tbl_relations`，看起来像

```
 -----------------------------------
 | id  |  source_id  |  target_id  |
 -----------------------------------
 | 2   |   2         |   4         |
 -----------------------------------
 | 3   |   5         |   7         | 
 -----------------------------------
 | 4   |   7         |   4         |
 ----------------------------------- 
```

`tbl_looksup`和其他看起来像的桌子

```
------------------------------
| id   |  language  |  value  |
------------------------------
| 1    |  1         |   abc   |
------------------------------
| 1    |  2         |   abc   |
------------------------------
| 2    |  1         |   abc   |
-------------------------------
| 2    |  2         |   abc   |
-------------------------------
| 5    |  1         |   abc   |
-------------------------------
| 5    |  2         |   abc   |
-------------------------------
| 7    |  1         |   abc   |
-------------------------------
| 7    |  1         |   abc   |
------------------------------- 
```

`tbl_relations``tbl_looksup`以这样的方式映射到`tbl_relations.source_id`并且`tbl_relations.target_id`是`id of tbl_looksup`

**我的问题** 我需要找出那些记录在`tbl_relations`whoes`source_id`或`target_id`不存在于`tbl_looksup`. 这意味着 中不`id`存在`tbl_looksup`。更详细地说， tbl_relations 的第一条记录`target_id = 4`在`tbl_looksup`. 这是错误的记录。我需要找出这些记录。

**到目前为止我做了什么**

```
 SELECT 
  tbl_relations.source_id,
  tbl_relations.target_id,
  tbl_relations.id,
  tbl_looksup.`id` AS tblid 
FROM
  tbl_relations
  LEFT JOIN tbl_looksup 
   ON tbl_relations.`source_id` != tbl_looksup.`id` 
   OR tbl_relations.`target_id` != tbl_looksup.`id` 
GROUP BY tbl_relations.id 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T06:43:28.783

为了获得您想要的结果，您需要加入`tbl_looksup`两次，因为有两列取决于该表。

```
SELECT  DISTINCT a.*
FROM    tbl_relations a
        LEFT JOIN tbl_looksup  b
            ON a.source_id  = b.id
        LEFT JOIN tbl_looksup  c
            ON a.target_id = c.id
WHERE   b.id IS NULL OR 
        c.id IS NULL 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/6a2c2/2)

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

输出

```
╔════╦═══════════╦═══════════╗
║ ID ║ SOURCE_ID ║ TARGET_ID ║
╠════╬═══════════╬═══════════╣
║  2 ║         2 ║         4 ║
║  4 ║         7 ║         4 ║
╚════╩═══════════╩═══════════╝ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T06:45:00.063

```
SELECT 
  tbl_relations.source_id,
  tbl_relations.target_id,
  tbl_relations.id 
FROM
  tbl_relations 
   WHERE tbl_relations.source_id not in (select id from tbl_looksup)
      OR tbl_relations.target_id not in (select id from tbl_looksup) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T06:45:50.760

尝试添加这个：

> 在哪里 tbl_relations。`target_id`一片空白

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T06:47:09.870

```
SELECT tbl_relations.id FROM tbl_relations 
  LEFT JOIN tbl_looksup 
    ON tbl_looksup.id = tbl_relations.source_id OR tbl_looksup.id = tbl_relations.target_id 
  WHERE tbl_looksup.id IS NULL 
```

# c# - 如何通过从组合框中选择任何表来填充 DataGridView

> ID：15378628
> 
> 赞同：0
> 
> 时间：2013-03-13T06:41:45.750
> 
> 标签：c#, .net

我使用以下代码在组合框中显示我的 SQL 数据库表的名称。

现在我希望当我从组合框中单击任何这些表名时，我的 DGV 会填充该表的内容。

```
private void Form1_Load(object sender, EventArgs e)
{
    String strConnection = "Data Source=HP\\SQLEXPRESS;database=MK;Integrated Security=true";

    SqlConnection con = new SqlConnection(strConnection);
    try
    {
        con.Open();

        SqlCommand sqlCmd = new SqlCommand();

        sqlCmd.Connection = con;
        sqlCmd.CommandType = CommandType.Text;
        sqlCmd.CommandText = "Select table_name from information_schema.tables";

        SqlDataAdapter sqlDataAdap = new SqlDataAdapter(sqlCmd);

        DataTable dtRecord = new DataTable();
        sqlDataAdap.Fill(dtRecord);
        comboBox1.DataSource = dtRecord;
        comboBox1.DisplayMember = "TABLE_NAME";
        con.Close();
    }
    catch (Exception ex)
    {
        MessageBox.Show(ex.Message);
    }
} 
```

然后我使用以下代码填充我的 DGV，但它不起作用；请帮忙。

```
private void PopulateGridView()
{
    String strConnection = "Data Source=HP\\SQLEXPRESS;database=MK;Integrated Security=true";
    SqlConnection con = new SqlConnection(strconnection);

    try
    {
        con.Open();

        SqlCommand sqlCmd = new SqlCommand();

        sqlCmd.Connection = con;
        sqlCmd.CommandType = CommandType.Text;
        sqlCmd.CommandText = "select * from " + comboBox1.SelectedText;

        SqlDataAdapter sqlDataAdap = new SqlDataAdapter(sqlCmd);

        DataTable dtRecord = new DataTable();
        sqlDataAdap.Fill(dtRecord);
        dataGridView1.AutoGenerateColumns = true;
        dataGridView1.DataSource = dtRecord;
        dataGridView1.AutoResizeColumns(DataGridViewAutoSizeColumnsMode.AllCells);
        con.Close();
    }
    catch (Exception ex)
    {
        MessageBox.Show(ex.Message);
    }
}

private void comboBox1_SelectedIndexChanged(object sender, EventArgs e)
{
    if (comboBox1.SelectedValue != null)
    {
        PopulateGridView(comboBox1.SelectedValue.ToString());
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T06:53:56.203

试试这个：

```
 private void comboBox1_SelectedIndexChanged(object sender, EventArgs e)
    {
        if (comboBox1.SelectedValue != null)
        {
           string strConnection = "Data Source=HP\\SQLEXPRESS;database=MK;Integrated Security=true";
            SqlConnection con = new SqlConnection(strconnection);
            try
            {
                con.Open();
                SqlCommand sqlCmd = new SqlCommand();

                sqlCmd.Connection = con;
                sqlCmd.CommandType = CommandType.Text;
                sqlCmd.CommandText = "select * from " + comboBox1.SelectedValue;
                SqlDataAdapter sqlDataAdap = new SqlDataAdapter(sqlCmd);

                DataTable dtRecord = new DataTable();
                sqlDataAdap.Fill(dtRecord);
                dataGridView1.AutoGenerateColumns = true;
                dataGridView1.DataSource = dtRecord;
                dataGridView1.AutoResizeColumns(DataGridViewAutoSizeColumnsMode.AllCells);
                con.Close();
            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message);
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T07:09:48.600

试试这个：在表单加载中更新您的代码，如下所示：

```
 private void Form1_Load(object sender, EventArgs e)
 {
    String strConnection = "Data Source=HP\\SQLEXPRESS;database=MK;Integrated Security=true";
    SqlConnection con = new SqlConnection(strConnection);
    try
    {
        con.Open();
        SqlCommand sqlCmd = new SqlCommand();

        sqlCmd.Connection = con;
        sqlCmd.CommandType = CommandType.Text;
        sqlCmd.CommandText = "Select table_name from information_schema.tables";

        SqlDataAdapter sqlDataAdap = new SqlDataAdapter(sqlCmd);
        DataTable dtRecord = new DataTable();
        sqlDataAdap.Fill(dtRecord);
        comboBox1.DataSource = dtRecord;
        comboBox1.DisplayMember = "table_name";
        comboBox1.ValueMember = "table_name";
        con.Close();
   }
   catch (Exception ex)
   {
        MessageBox.Show(ex.Message);
   }
} 
```

所以基本上你已经多加了一行 `comboBox1.ValueMember = "table_name";`

并使您的 PopulateGridView 方法如下所示：

```
 private void PopulateGridView(string tblName)
        {
            String strConnection = "Data Source=HP\\SQLEXPRESS;database=MK;Integrated Security=true";
            SqlConnection con = new SqlConnection(strConnection);

            try
            {
                con.Open();

                SqlCommand sqlCmd = new SqlCommand();

                sqlCmd.Connection = con;
                sqlCmd.CommandType = CommandType.Text;
                sqlCmd.CommandText = "select * from " + tblName;

                SqlDataAdapter sqlDataAdap = new SqlDataAdapter(sqlCmd);

                DataTable dtRecord = new DataTable();
                sqlDataAdap.Fill(dtRecord);
                dataGridView1.AutoGenerateColumns = true;
                dataGridView1.DataSource = dtRecord;
                dataGridView1.AutoResizeColumns(DataGridViewAutoSizeColumnsMode.AllCells);
                con.Close();
            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message);
            }
        } 
```

它必须工作。另外，我知道，您正在`SqlConnection`到处创建对象，包括`SqlCommand`and `SqlDataAdapter`。

尝试将它们包装在静态方法中，即

```
 - public static SqlConnection OpenConnection()
 - public static DataTable ExecuteSelectQuery(string Query)
 - public static bool ExecuteModifyQuery(string Query) 
```

尽量少写代码。

# objective-c - 如何在 NSMutableArray 中添加所有十进制数

> ID：15378633
> 
> 赞同：1
> 
> 时间：2013-03-13T06:42:10.220
> 
> 标签：objective-c, nsarray, nsdecimalnumber

我有一个`NSMutableArray`里面有一些`NSDecimalNumber`，比如`(500,50.80,70,8000)`

现在我想把所有这些加`decimal numbers`在一起。

我试过用

```
for (NSDecimalNumber *number in self.numbersArray)
{
    NSDecimal *sum += [number decimalValue]
} 
```

但是失败了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T10:54:06.107

`NSNumber`在数组中添加所有 s 的简单方法是（类似于@Mahonor 在评论中所说的）：

```
NSArray *myArray = ... // array of NSNumber (or NSDecimalNumber) objects
NSNumber *sum = [myArray valueForKeyPath:@"@sum.self"]; 
```

* * *

与[Collection Operators: sum](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueCoding/Articles/CollectionOperators.html#//apple_ref/doc/uid/20002176-178593)状态相反，数组中的数字*不是*转换为`double`，而是转换为`NSDecimal`。因此，添加十进制数时***不会丢失精度。***即使`NSNumber`不是十进制数的对象也会转换`NSDecimal`为加法。求和的结果是 的一个实例`NSDecimalValue`。

我以两种不同的方式验证（或尝试）了这一点。首先，我运行了这段代码

```
NSNumber *a = [NSNumber numberWithDouble:1.2];
NSNumber *b = [NSDecimalNumber decimalNumberWithString:@"-5.7"];
NSArray *myArray = @[a, b];
id sum = [myArray valueForKeyPath:@"@sum.self"]; 
```

并通过设置环境变量“NSObjCMessageLoggingEnabled=YES”来激活 Objective-C 消息记录。从创建的“/tmp/msgSends-NNNN”文件中可以看出，`decimalNumber`（而不是`doubleValue`）被发送到两个数字对象。

其次，我创建了一个实现`decimalValue`和的自定义类`doubleValue`，并将其应用于`@sum.self`自定义类的对象数组：

```
@interface MyClass : NSObject
@property (nonatomic, assign) double value;
@end

@implementation MyClass

- (NSDecimal)decimalValue
{
    return [[NSNumber numberWithDouble:self.value] decimalValue];
}

- (double)doubleValue
{
    return self.value;
}

@end

MyClass *a = [MyClass new]; a.value = 1.2;
MyClass *b = [MyClass new]; b.value = -5.7;
NSArray *myArray = @[a, b];
id sum = [myArray valueForKeyPath:@"@sum.self"]; 
```

通过在这两种方法中设置断点，可以看出 only`decimalValue`用于求和（`valueForKeyPath:@"@sum.self"`如果类没有实现则抛出异常`decimalValue`）。

也可以看出`decimalValue`是从

```
-[NSArray(NSKeyValueCoding) _sumForKeyPath:] 
```

并且此方法的汇编代码显示`NSDecimalAdd`用于添加数字。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T06:53:29.460

利用`- (NSDecimalNumber *)decimalNumberByAdding:(NSDecimalNumber *)decimalNumber`

看看[NSDecimalNumber 类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDecimalNumber_Class/Reference/Reference.html)

```
NSDecimalNumber *lNumber = [NSDecimalNumber zero];
for (NSDecimalNumber *number in self.numbersArray)
{
    lNumber = [lNumber decimalNumberByAdding:number];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T07:11:03.050

Manohar 在评论中的建议还不错。您确实可以使用[KVC 集合运算符](http://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/KeyValueCoding/Articles/CollectionOperators.html)来制作单线：`[myArray valueForKeyPath:@"@sum.doubleValue"];`，但您可能会丢失精度（取决于您存储的数字）。

您基本上是在寻找“减少”功能；您需要链接调用，`decimalNumberByAdding:`以便每个调用都将数组的后续元素作为其参数。这样做`NSArray`很容易，使用`performSelector:withObject:`

```
@implementation NSArray (Reduce)
- (id)reduceUsingSelector: (SEL)sel
{
    id res = [self objectAtIndex:0];
    for( id obj in [self subarrayWithRange:(NSRange){1, [self count]-1}] ){
        res = [res performSelector:sel withObject:obj];
    }

    return res;
}
@end 
```

像这样使用它：`NSDecimalNumber * sum = [myArray reduceUsingSelector:@selector(decimalNumberByAdding:)];`

您拥有的代码不成功，因为[`NSDecimal`](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Miscellaneous/Foundation_DataTypes/Reference/reference.html%23//apple_ref/doc/c_ref/NSDecimal)它是一个结构，而不是一个对象；它不应该被声明为指针，如果不是，您将无法添加它。这不是解决问题的正确途径。

# java - Eclipse 中的 win32com.dll 出错

> ID：15378634
> 
> 赞同：2
> 
> 时间：2013-03-13T06:42:10.357
> 
> 标签：java, eclipse, win32com

关于我的 win32com.dll 文件，我在 Eclipse 中遇到错误。从错误看来，我正在尝试使用 32 位 .dll 而不是 64 位，但不幸的是，我无法在任何地方找到 64 位 win32com.dll 文件，我不知所措在如何进行。今晚我真的下载了 Eclipse，这是我第一次用 Java 编写，所以请温柔一点。

谢谢！

> 加载 win32com 时出错：java.lang.UnsatisfiedLinkError: C:\Program Files\Java\jre6\bin\win32com.dll: Can't load IA 32-bit .dll on a AMD 64-bit platform

**编辑：**我认为 Java 停止了对 Java Communications API 的支持，但我不确定还能做些什么来解决这个问题。谁能指出一个好的串行端口 Java 示例？我在任何地方都找不到...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T20:17:05.097

所以我放弃了这个并切换到[RXTX](http://rxtx.qbang.org/wiki/index.php/Main_Page)。我认为很多人都这样做了，因为我所有的研究都指向了这一点，而不是弄清楚我最初想要什么。

简而言之，您需要做的是从[这里](http://rxtx.qbang.org/eclipse/downloads/)下载正确的文件。

将文件安装在以下目录中：

`rxtxParallel.dll`& `rxtxSerial.dll`-->`Program Files/Java/jre6/bin`

`RXTXComm.dll`-->`Program Files/Java/jre6/lib/ext`

请注意，这仅适用于 64 位环境。希望这对将来在我职位上的任何人有所帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-03T10:17:58.820

通过在我的 Windows 7 64 位中安装 32 位 JDK 而不是 64 位，我得到了同样的结果。希望它有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T18:07:52.603

你可以在这个地址下载你需要的文件：http:
[//llk.media.mit.edu/projects/picdev/software/javaxcomm.zip](http://llk.media.mit.edu/projects/picdev/software/javaxcomm.zip)

确保将 jar 作为库添加到您的项目中。

使用此 API，此示例似乎足够详细：
[http ://www.java2s.com/Code/Java/Development-Class/ReadfromaSerialportnotifyingwhendataarrives.htm](http://www.java2s.com/Code/Java/Development-Class/ReadfromaSerialportnotifyingwhendataarrives.htm)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T06:59:34.653

重新安装 JDK 32bit 如果你使用的是 64bit 版本

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-08T09:41:30.433

安装 32 位**jdk**并在 jre 选项卡中更改 eclipse**运行配置**选择 Alternate JRE 然后添加 32 位 jdk 的 bin 路径

# gwt - 如何在运行时更改 GWT/SmartGWT 主题

> ID：15378635
> 
> 赞同：1
> 
> 时间：2013-03-13T06:42:14.660
> 
> 标签：gwt, smartgwt

我想在运行时从代码更改我的 SmartGWT 应用程序的主题

我可以在 SmartGWT 展示中看到这个功能，但在 SmartGWT 展示中我看不到任何代码。

我现在正在做的是

这是我的 XML 类

```
<?xml version="1.0" encoding="UTF-8"?>
         <inherits name="com.smartgwt.SmartGwtNoTheme"/>
         <inherits name="com.smartclient.theme.graphite.Graphite"/>
         <inherits name="com.smartclient.theme.blackops.BlackOps"/>
         <inherits name="com.smartclient.theme.enterprise.Enterprise"/>
         <inherits name="com.smartclient.theme.enterpriseblue.EnterpriseBlue"/> 
```

这是我的 HTML 类片段

```
 <title>My Web</title>

              <script>
          function readCookie(name) {
        var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for ( var i = 0; i < ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0) == ' ')
            c = c.substring(1, c.length);
        if (c.indexOf(nameEQ) == 0)
            return c.substring(nameEQ.length, c.length);
    }
    return null;
}

// Determine what skin file to load
var currentSkin = readCookie('skin');
if (currentSkin == null){
    currentSkin = "Enterprise";
}
alert(currentSkin);
        </script>
           <script type="text/javascript">
        document.write("<" + "script src=testtheme/sc/skins/"
        + currentSkin + "/load_skin.js><"+"/script>");
           </script> 
```

这是我的 Java 类

```
 SelectItem selectItem = new SelectItem("skin", "Choose Skin");
    DynamicForm df = new DynamicForm();
    hpnlMain.add(df);
    df.setItems(selectItem);
    selectItem.setWidth(130);
    java.util.LinkedHashMap<String, String> valueMap = new java.util.LinkedHashMap<String, String>();
    valueMap.put("Enterprise", "Enterprise");
    valueMap.put("EnterpriseBlue", "EnterpriseBlue");
    valueMap.put("TreeFrog", "TreeFrog");
    valueMap.put("BlackOps", "BlackOps");
    valueMap.put("Graphite", "Graphite");

    selectItem.setValueMap(valueMap);

    String currentSkin = Cookies.getCookie("skin");

    if (currentSkin == null) {
        currentSkin = "Enterprise";
    }
    selectItem.setDefaultValue(currentSkin);
    selectItem.addChangedHandler(new ChangedHandler() {

        @Override
        public void onChanged(ChangedEvent event) {
            // TODO Auto-generated method stub
            Cookies.setCookie("skin", event.getValue().toString());
            Window.Location.reload();
        }
    }); 
```

预期的结果是，当我选择任何皮肤形式`SelectItem`时，应该应用该皮肤，但我没有效果。

请查看我的 HTML 文件中的这一行

```
 <script type="text/javascript">
document.write("<" + "script src=testtheme/sc/skins/"
        + currentSkin + "/load_skin.js><"+"/script>"); 
```

在这里我不确定确切的路径是什么，我的类路径中有 smatgwt-skins.jar

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:52:27.190

当您更改皮肤并重新加载应用程序时，您的 html 文件中的“alert(currentSkin)”行会显示什么？它是否显示新选择的皮肤名称？

看起来您正在使用 SmartGWT 展示中的代码，或者它恰好看起来与它几乎相同。

[http://code.google.com/p/smartgwt/source/browse/trunk/samples/showcase/src/com/smartgwt/sample/showcase/client/Showcase.java](http://code.google.com/p/smartgwt/source/browse/trunk/samples/showcase/src/com/smartgwt/sample/showcase/client/Showcase.java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T14:26:51.330

也许这会有所帮助：[这里](http://forums.smartclient.com/showthread.php?t=15692)

检查 Smartclient 论坛以了解这种情况，有很多关于它的信息。

# python - 为什么在没有调用函数的情况下创建了一个窗口？

> ID：15378654
> 
> 赞同：0
> 
> 时间：2013-03-13T06:43:39.020
> 
> 标签：python, tkinter

我是 Tkinter 编程的新手。

**数据**

我有以下 tkinter 代码：

```
##Program to print something or exit

def say_hi():
    second = Tk()
    Label1 = Label(second,text="HI!")
    Label1.pack()

from Tkinter import *

root = Tk()

r = Button(root,text="QUIT",fg="red",command=quit)
r.pack()

b = Button(root,text="Say something",fg="red",bg="black",command=say_hi())
b.pack()

root.mainloop() 
```

这给出了以下输出：

[![](../Images/e4fd1c83c2d9d84db3e39b6906892042.png)](https://i.stack.imgur.com/iLks6.jpg)

在将窗户移到后面时：

[![](../Images/37b3804c16a4972d76daa136c39ad2d9.png)](https://i.stack.imgur.com/sOn1N.jpg)

**怀疑**

为什么在`second`没有调用函数的情况下打开窗口`say_hi()`？

**如何解决这个问题？**

如何在当前窗口中启动新窗口或框架或在当前窗口中打印标签以便`HI`仅在按下按钮后打印。

我不想在控制台上打印它，因为大多数时候它都被忽视了。

**眼镜**

可视化 Python Tkinter IDE 2.6

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T06:51:25.543

删除`()`之后`say_hi`，`say_hi()`会调用函数：

```
b = Button(root,text="Say
        something",fg="red",bg="black",command=say_hi) b.pack() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T06:59:20.557

代码中有一个错误：

进去`()`之后就不在了`say_hi``command`

修改后的代码如下：

```
##Program to print something or exit

def say_hi():
    second = Tk()
    Label1 = Label(second,text="HI!")
    Label1.pack()

from Tkinter import *

root = Tk()

r = Button(root,text="QUIT",fg="red",command=quit)
r.pack()

b = Button(root,text="Say something",fg="red",bg="black",command=say_hi)
b.pack()

root.mainloop() 
```

# ruby-on-rails - 安装 Ruby/Rails 时出现问题，即使使用 RVM

> ID：15378658
> 
> 赞同：0
> 
> 时间：2013-03-13T06:43:51.293
> 
> 标签：ruby-on-rails, ruby, rvm

所以这就是发生的事情：我开始为一家公司工作，并获得了一个 macbook pro 用于工作。我为 Exceptional/Airbrake 提供客户支持，所以我需要学习 Ruby/Rails。所以这台笔记本电脑有一个以前的主人，我不知道他用它做了什么。

我尝试安装 Ruby 和 Rails 并不断出错，然后尝试使用 rvm 进行安装，我认为它可以运行，因为我可以运行 irb 甚至使用 ruby​​ 执行测试程序。我厌倦了在命令行上看到以前的所有者名称，所以我更改了主文件夹，我很确定这就是事情变得糟糕的地方。我把 rvm 的内容和所有东西都从旧文件移到了我的用户文件中，然后删除了旧文件。

一切似乎仍然运行良好，但是当我也想开始使用 rails 时，它不起作用。所以我想我会卸载所有东西并重新开始，我尝试了 rvm implode 并删除了所有 gem。当我运行“gem list”时，我得到了空，我无法在任何地方找到 ruby​​，但是当我运行 irb 时，它仍然有效。所以我尝试使用 rvm 重新安装，但我不断收到错误消息。

发生的第一个错误是：

```
No binary rubies available for: osx/10.7/x86_64/ruby-2.0.0-p0.
Continuing with compilation. Please read 'rvm mount' to get more information on binary rubies. 
```

第二个错误是：

```
Error running 'env GEM_PATH=/Users/robertmroz/.rvm/gems/ruby-2.0.0-p0:/Users/robertmroz/.rvm/gems/ruby-2.0.0-p0@global:/Users/robertmroz/.rvm/gems/ruby-2.0.0-p0:/Users/robertmroz/.rvm/gems/ruby-2.0.0-p0@global GEM_HOME=/Users/robertmroz/.rvm/gems/ruby-2.0.0-p0 /Users/robertmroz/.rvm/rubies/ruby-2.0.0-p0/bin/ruby /Users/robertmroz/.rvm/src/rubygems-2.0.3/setup.rb', please read /Users/robertmroz/.rvm/log/ruby-2.0.0-p0/rubygems.install.log 
```

最后一个错误是：

```
ERROR:  Loading command: install (LoadError)
cannot load such file -- openssl
ERROR:  While executing gem ... (NoMethodError)
undefined method `invoke_with_build_args' for nil:NilClass 
```

我已经经历了几十次谷歌搜索，其中大多数将我带到这里，关于这些错误中的每一个，有时某些错误似乎已修复，但最终我无法让它工作。我是否应该擦除操作系统并重新开始，因为我已经尝试完成这几天了。

顺便说一句，我不知道为什么要安装 2.0.0 我以为 rvm 默认安装了最新版本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T06:53:57.643

在你炸毁系统之前，我会：

1.  卸载 rvm ( `rvm implode`, `gem uninstall rvm`) 看到[这个问题](https://stackoverflow.com/questions/3558656/how-to-remove-rvm-ruby-version-manager-from-my-system)
2.  你应该只剩下基础红宝石。那应该是唯一剩下的了。
3.  重新安装 rvm（`\curl -L https://get.rvm.io` **不带**Rails）。
4.  使用 rvm ( `rvm install 1.9.2`) 安装您想要的 ruby​​ 版本，暂时不要使用 2.0。
5.  确保安装并选择了您的 ruby​​ 版本。
6.  安装你想要的 rails 版本。

希望这能解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-14T06:07:43.727

我在安装 Ruby 时也遇到了同样的问题，但是在谷歌上搜索了很多之后我找到了解决方案。遵循以下流程：

1.  如果您已经安装了任何东西，请使用 Revo 安装程序或其他方式卸载所有这些，否则转到第 2 步。
2.  接下来访问[http://rubyinstaller.org/](http://rubyinstaller.org/)并按下下载按钮。
3.  您将找到 ruby​​ 版本列表，单击最新版本（如果您运行的是 64 位机器，请使用 (x-64) 安装链接，否则安装不带括号的版本。
4.  下载并设置后接受所有默认值并勾选所有复选框，它将安装在 C:\ 名称为 Ruby22 （取决于其版本）
5.  转到开始菜单类型 cmd ，使用不带括号的命令“cd C:\”，它将带你到 C:\ 驱动器
6.  检查 ruby​​ -v ，你应该得到版本号，否则再次重复上述过程。
7.  现在使用命令“gem install rails”，它将安装所有rails要求，这需要很多时间。
8.  现在使用命令“gem install webrick”安装网络服务器
9.  现在转到某个浏览器，访问[http://rubyinstaller.org/downloads/](http://rubyinstaller.org/downloads/)，在页面底部下载 DevKit 并将其解压缩到某个文件夹（例如在 C:\DevKit 中创建 DevKit 文件夹后在 C:\ 中）
10.  以相同的顺序使用以下命令
    "ruby dk.rb init"
    "ruby dk.rb install" "gem install rdiscount --platform=ruby"
11.  现在已安装 Rails。
12.  在 C:\ 创建一个文件夹以创建您的 Rails 应用程序并命名该文件夹（ex Rails _Apps）使用命令 cd C:\Rails_apps 到那里并使用命令“rails new sample_rails_app”创建一个名为“Rails 应用程序” sample_rails_app”。
13.  它做了很多事情，您现在可以使用 Ruby on Rails。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T06:51:41.280

Ruby 2.0.0-p0 是最近发布的，所以从技术上讲，这是最新版本，尽管我有点怀疑您是否真的想要最新版本，因为它太新了，而且您的公司可能仍在运行像 1.9.3 这样的旧版本。您是否尝试过安装 1.9.3-p392（当前的 1.9.3 版本）？

如果您仍然收到 1.9.3 的错误，我会尝试[RVM 网站](https://rvm.io/packages/openssl/)上显示的说明：

```
$ rvm pkg install openssl
$ rvm reinstall 1.9.2 --with-openssl-dir=$rvm_path/usr 
```

# android - 如何创建与画廊视图相同的功能。我使用了galleryview，但它已被弃用

> ID：15378662
> 
> 赞同：1
> 
> 时间：2013-03-13T06:43:54.247
> 
> 标签：android, animation

我还使用了带有页面容器的视图寻呼机，但我只希望以循环方式滚动一侧。如何停止从左到右滚动或任何其他选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T06:47:59.603

设置`setOnPageChangeListener`为您的 ViewPager

并且在

```
@Override
public void onPageSelected(int arg0) {
    if(lastPage>arg0)
      {//User Move to left}
    else(lastPage<arg0) 
     {//User Move to right}
      lastPage=arg0
} 
```

# ios - 嵌入在 UINavigationView/TableView 中的自定义 UIScrollview 崩溃 - 关于动画

> ID：15378666
> 
> 赞同：0
> 
> 时间：2013-03-13T06:44:24.543
> 
> 标签：ios, objective-c, uitableview, segue

在 UITableView 上推送到详细视图控制器，无论我做什么`prepareForSegue`都无法获得被选中的行。我试过了：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {

NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow]; 
```

但结果为零。我试过了：

```
 NSIndexPath *indexPath = [self.tableView indexPathForCell:sender]; 
```

问题是发件人正在通过，正如我从日志中看到的那样：

```
 Sender is <ARASpecialCell: 0x75cd6d0; baseClass = UITableViewCell; frame = (0 44; 320 44); text = 'Late Night'; autoresize = W; layer = <CALayer: 0x75c98c0>> 
```

特殊单元格是因为我尝试对单元格进行子类化并添加公共属性，但在访问它时遇到问题。

我试图只获取文本标签并使用它，但产生了错误：

```
 "property "textlabel" not found on object of type '__strong id'" 
```

我尝试“在索引路径中选择行”来加载下一个视图控制器，但是详细视图控制器是从情节提要上的另一个控制器设置的，重新配置会很麻烦。

这个 TableViewController 没有什么特别之处。任何关于出现问题的建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T08:08:45.437

您需要在控制器中使用 @property 来保存所选项目。例如，您选择单元格并在`didSelectCellAtIndexPath`您的 selectedItem 属性中保存适当的数据对象。然后你必须调用你在界面生成器中创建的 segue。

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
     self.selectedItem = [self.fetchedResultsController objectAtIndexPath:indexPath];
     [self performSegueWithIdentifier:@"Item Details Segue" sender:self];
} 
```

然后在您的 performSegueWithIdentifier 中，您可以对 selectedItem 做任何您想做的事情：

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
     if ([segue.identifier isEqualToString:@"News Details Segue"])
    {
        NewController *controller = segue.destinationViewController;
        NewController.item = self.selectedItem;
    }
} 
```

# asp.net-mvc - 无法将模型从视图传递到控制器。

> ID：15378669
> 
> 赞同：0
> 
> 时间：2013-03-13T06:44:31.357
> 
> 标签：asp.net-mvc

我真的进去`Model`了`Http Request`。但它没有被加载到控制器中。

**模型**

```
public class ConfigurableItemsModel 
{
   public IList<State> State { get; set; }
   public IList<Country> Country { get; set; }
   public IList<AccountType> AccountTypes { get; set; }
   public IList<AddressSource> AddressSources { get; set; }
   public IList<StopCode> StopCodes { get; set; }

   public State state { get; set; }
   public Country country { get; set; }
   public AccountType accountType { get; set; }
   public AddressSource addressSource { get; set; }
   public StopCode stopCode { get; set; }     
 } 
```

**控制器方法（获取）**

```
public ActionResult Edit(string ConfigName)
{
  ConfigurableItemsClient client = new ConfigurableItemsClient();
  ConfigurableItemsModel configItemsModel = new ConfigurableItemsModel();
  List<ConfigurableItemsModel> configItemsModelList = new List<ConfigurableItemsModel>();

   switch (ConfigName)
   {
                case "Country":
                    List<Country> countryList = new List<Country>();                   
                    countryList = client.GetAllCountries().ToList();

                    int count = countryList.Count;

                    for (int i = 0; i < count; i++)
                    {
                        configItemsModel.Country = new List<Country>();
                        configItemsModel.Country = countryList;
                    }
                    configItemsModelList.Add(configItemsModel);
                    TempData["temporaryCountry"] = configItemsModel;
                    ViewBag.NoOfTimes = count;
                    ViewBag.ConfigItem = "Country";
                    return View(configItemsModelList);
                    break;
                case "State":
                    List<State> stateList = new List<State>();
                    stateList = client.GetAllStates().ToList();  
                    configItemsModelList.Clear();

                    for (int i = 0; i < stateList.Count; i++)
                    {
                        configItemsModel.State = new List<State>();
                        configItemsModel.State = stateList;
                    }
                    configItemsModelList.Add(configItemsModel);
                    ViewBag.NoOfTimes = stateList.Count;
                    ViewBag.ConfigItem = "State";
                    return View(configItemsModelList);
                    break;
                case "Account Type":
                    List<AccountType> accountTypeList = new List<AccountType>();
                    accountTypeList = client.GetAllAccountType().ToList();
                    configItemsModelList.Clear();
                    for (int i = 0; i < accountTypeList.Count; i++)
                    {
                        configItemsModel.AccountTypes = new List<AccountType>();
                        configItemsModel.AccountTypes = accountTypeList;
                    }
                    configItemsModelList.Add(configItemsModel);
                    ViewBag.NoOfTimes = accountTypeList.Count;
                    ViewBag.ConfigItem = "AccountType";
                    return View(configItemsModelList);
                    break;
                case "Stop Code" :
                    List<StopCode> stopCodeList = new List<StopCode>();
                    stopCodeList = client.GetAllStopCodes().ToList();
                   configItemsModelList.Clear();
                   for (int i = 0; i < stopCodeList.Count; i++)
                    {
                        configItemsModel.StopCodes = new List<StopCode>();
                        configItemsModel.StopCodes = stopCodeList;
                    }
                    configItemsModelList.Add(configItemsModel);
                    ViewBag.NoOfTimes = stopCodeList.Count;
                    ViewBag.ConfigItem = "StopCode";
                    return View(configItemsModelList);
                    break;
                case "Address Source":
                    List<AddressSource> addressSourceList = new List<AddressSource>();
                    addressSourceList = client.GetAllAddressSources().ToList();
                    configItemsModelList.Clear();
                    for (int i = 0; i < addressSourceList.Count; i++)
                    {
                        configItemsModel.AddressSources = new List<AddressSource>();
                        configItemsModel.AddressSources = addressSourceList;
                    }
                    configItemsModelList.Add(configItemsModel);
                    ViewBag.NoOfTimes = addressSourceList.Count;
                    ViewBag.ConfigItem = "AddressSource";
                    return View(configItemsModelList);
                    break;
            }

   return View(); 
} 
```

**控制器方法（后）**

```
[HttpPost]
public ActionResult Edit(ConfigurableItemsModel modelFromView, string EditViewButton)
{
            ConfigurableItemsClient client = new ConfigurableItemsClient();
            switch (EditViewButton)
            {
                case "Add":
                    return View();
                    break;
                case "Edit":
                    return View();
                    break;
                case "Save":
                    //if(ViewBag.ConfigItem == "Country")
                    //{

                        int i = 0;
                        Country NewCountry = new Country();
                        NewCountry.CountryId = modelFromView.Country[i].CountryId;
                        NewCountry.CountryCode = modelFromView.Country[i].CountryCode;
                        NewCountry.CountryName = modelFromView.Country[i].CountryName;
                        NewCountry.WorkStationId = 1;
                        NewCountry.CreatedBy = 1;
                        NewCountry.CreatedOn = DateTime.Now;
                        NewCountry.ModifiedBy = 1;
                        NewCountry.ModifiedOn = DateTime.Now;
                        client.AddNewCountry(NewCountry);
                    //}
                    return View(modelFromView.Country);
                    break;
            }
            return View();
 } 
```

**查看页面**

```
@model IEnumerable<Models.ConfigurableItemsModel>
@{
    ViewBag.Title = "Edit";
}

@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>Country</legend>
        @if (ViewBag.ConfigItem == "Country")
        {
            <h2>Country</h2>
            int k = 0;

            <table>
                <tr>
                    <th>
                        <label>Select</label>
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.Country[k].CountryId)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.Country[k].CountryName)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.Country[k].CountryCode)
                    </th>
                </tr>

                @foreach (var item in Model)
                {
                    for (int j = 0; j < item.Country.Count; j++)
                    {

                    <tr>
                        <th>
                            <input type="checkbox" name="chkCountry" /></th>
                        <th>
                            @Html.EditorFor(model => item.Country[j].CountryId)
                        </th>
                        <th>
                            @Html.EditorFor(model => item.Country[j].CountryName)
                        </th>
                        <th>

                            @Html.EditorFor(model => item.Country[j].CountryCode)
                        </th>
                    </tr>

                    }

                }

            </table>   
            <input type="submit" value="Save" name="EditViewButton" /> 

        }
    </fieldset>
}

@if (ViewBag.ConfigItem == "State")
{
    <h2>State</h2>
    int k = 0;
    <table>
        <tr>
            <th>
                <label>Select</label>
            </th>
            <th>
                @Html.DisplayNameFor(model => model.State[k].StateId)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.State[k].CountryId)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.State[k].StateName)
            </th>
        </tr>

        @foreach (var item in Model)
        {
            for (int i = 0; i < ViewBag.NoOfTimes; i++)
            {
            <tr>
                <th>
                    <input type="checkbox" name="chkState" /></th>
                <th>
                    @Html.DisplayFor(model => item.State[i].StateId)
                </th>
                <th>
                    @Html.DisplayFor(model => item.State[i].CountryId)
                </th>
                <th>
                    @Html.DisplayFor(model => item.State[i].StateName)
                </th>
            </tr>
            }
        }
    </table>             

}

@if (ViewBag.ConfigItem == "AddressSource")
{
    <h2>Address Source</h2>
    int k = 0;
    <table>
        <tr>
            <th>
                <label>Select</label>
            </th>
            <th>
                @Html.DisplayNameFor(model => model.AddressSources[k].Value)

            </th>
            <th>
                @Html.DisplayNameFor(model => model.AddressSources[k].ValueDescription)

            </th>
            <th>
                @Html.DisplayNameFor(model => model.AddressSources[k].DisplayOrder)

            </th>
            <th>
                @Html.DisplayNameFor(model => model.AddressSources[k].IsActive)

            </th>
        </tr>

        @foreach (var item in Model)
        {
            for (int i = 0; i < ViewBag.NoOfTimes; i++)
            {
            <tr>
                <th>
                    <input type="checkbox" name="chkAddressSource" /></th>
                <th>
                    @Html.DisplayFor(model => item.AddressSources[i].Value)
                    @Html.HiddenFor(model => item.AddressSources[i].Value)
                </th>
                <th>
                    @Html.DisplayFor(model => item.AddressSources[i].ValueDescription)
                    @Html.HiddenFor(model => item.AddressSources[i].ValueDescription)
                </th>
                <th>
                    @Html.DisplayFor(model => item.AddressSources[i].DisplayOrder)
                    @Html.HiddenFor(model => item.AddressSources[i].DisplayOrder)
                </th>
                <th>
                    @Html.DisplayFor(model => item.AddressSources[i].IsActive)
                    @Html.HiddenFor(model => item.AddressSources[i].IsActive)
                </th>
            </tr>
            }
        }
    </table>             

}

@if (ViewBag.ConfigItem == "AccountType")
{
    <h2>Account Type</h2>
    int k = 0;
    <table>
        <tr>
            <th>
                <label>Select</label>
            </th>
            <th>
                @Html.DisplayNameFor(model => model.AccountTypes[k].Value)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.AccountTypes[k].ValueDescription)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.AccountTypes[k].DisplayOrder)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.AccountTypes[k].IsActive)
            </th>
        </tr>

        @foreach (var item in Model)
        {
            for (int i = 0; i < ViewBag.NoOfTimes; i++)
            {
            <tr>
                <th>
                    <input type="checkbox" name="chkAccountType" /></th>
                <th>
                    @Html.DisplayFor(model => item.AccountTypes[i].Value)
                </th>
                <th>
                    @Html.DisplayFor(model => item.AccountTypes[i].ValueDescription)
                </th>
                <th>
                    @Html.DisplayFor(model => item.AccountTypes[i].DisplayOrder)
                </th>
                <th>
                    @Html.DisplayFor(model => item.AccountTypes[i].IsActive)
                </th>
            </tr>
            }
        }
    </table>             

}

@if (ViewBag.ConfigItem == "StopCode")
{
    <h2>Stop Code</h2>
    int k = 0;
    <table>
        <tr>
            <th>
                <label>Select</label>
            </th>
            <th>
                @Html.DisplayNameFor(model => model.StopCodes[k].Code)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.StopCodes[k].StopCodeName)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.StopCodes[k].StopCodeDescription)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.StopCodes[k].IsActive)
            </th>
        </tr>

        @foreach (var item in Model)
        {
            for (int i = 0; i < ViewBag.NoOfTimes; i++)
            {
            <tr>
                <th>
                    <input type="checkbox" name="chkStopCode" /></th>
                <th>
                    @Html.DisplayFor(model => item.StopCodes[i].Code)
                    @Html.EditorFor(model => item.StopCodes[i].Code)
                </th>
                <th>
                    @Html.DisplayFor(model => item.StopCodes[i].StopCodeName)
                    @Html.EditorFor(model => item.StopCodes[i].StopCodeName)
                </th>
                <th>
                    @Html.DisplayFor(model => item.StopCodes[i].StopCodeDescription)
                    @Html.EditorFor(model => item.StopCodes[i].StopCodeDescription)
                </th>
                <th>
                    @Html.DisplayFor(model => item.StopCodes[i].IsActive)
                    @Html.EditorFor(model => item.StopCodes[i].IsActive)
                </th>
            </tr>
            }
        }
    </table>             

}

<table>
    <tr>
        <th>                
                <input type="submit" value="Delete" name="EditViewButton" />          
        </th>
        <th>                  
                <input type="submit" value="De-Activate" name="EditViewButton" />           
        </th>
        <th>
            @using (Html.BeginForm("Index", "ConfigurableItems", FormMethod.Get))
            {
                <input type="submit" value="Cancel" />
            }
        </th>
        <th>                 
                <input type="submit" value="Add" name="EditViewButton" />          
        </th>
        <th>                 
                <input type="submit" value="Edit" name="EditViewButton" />            
        </th>
        <th>                 
                <input type="submit" value="Save" name="EditViewButton" />           
        </th>
    </tr>
</table>

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
} 
```

当我单击`Save`Country 下的按钮时，我可以看到 Country 相关值并且`EditViewButton`正在请求中传递，但它没有出现在 Controller 操作 HTTPPOST`Edit`方法中。

我被这个问题困扰了两天，谷歌并没有太大帮助。感谢您在这方面的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T08:59:52.340

您不能将任何值列表从视图发布到控制器。

您需要使用 ModelBinder 并设置为 Global.asax Application_Start()

```
 protected void Application_Start()
    {
       System.Web.Mvc.ModelBinders.Binders.Add(typeof(ConfigurableItemsModel), new ConfigurableItemsModelBinder());
    } 
```

现在获取一个类“ConfigurableItemsModelBinder”实现“IModelBinder”并将模型与视图中的值绑定。

```
public class ConfigurableItemsModelBinder: IModelBinder
{
   public object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
     {
          List<Models.ConfigurableItemsModel> listModel=new List<Models.ConfigurableItemsModel>();
       for(int i=0;i<listModel.Count;i++)
         {
          //now get the value from view with the control name of view page.
          string CountryId=Convert.ToString(bindingContext.ValueProvider.GetValue(Country[i].CountryId).AttemptedValue)  //Country[i].CountryId it is the control name(dynamic) which your View HTML actually rendered. 
         // now put the CountryId into the model.
           Country[i].CountryId=CountryId;
         }

     }
} 
```

控制器：您需要在后期将模型列表传递给控制器

```
[HttpPost]
public ActionResult Index(IEnumirable<ConfigurableItemsModel> model,string EditViewButton)
    {
       Return View();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T06:58:02.850

问题是您的输入字段不尊重[`naming convention`](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)for 绑定到列表。这样做的原因是因为您使用`foreach`外部循环而不是`for`循环。

解决这个问题的方法是让你的视图强类型化到一个索引集合（例如`IList<T>`or `T[]`）：

```
@model IList<Models.ConfigurableItemsModel> 
```

然后用`foreach`循环替换你的`for`循环：

```
@for (var i = 0; i < Model.Count; i++)
{
    for (int j = 0; j < Model[i].Country.Count; j++)
    {
        <tr>
            <th>
                <input type="checkbox" name="chkCountry" />
            </th>
            <th>
                @Html.EditorFor(model => model[i].Country[j].CountryId)
            </th>
            <th>
                @Html.EditorFor(model => model[i].Country[j].CountryName)
            </th>
            <th>
                @Html.EditorFor(model => model[i].Country[j].CountryCode)
            </th>
        </tr>
    }
} 
```

现在，当您查看生成的标记，更具体地说是输入字段的名称时，您会注意到它们的名称是正确的。例如，您将看到：

```
<input type="text" name="[1].Country[2].CountryId" value="123" /> 
```

而不是你目前拥有的和错误的：

```
<input type="text" name="Country[2].CountryId" value="123" /> 
```

# c# - 如何使用三角形拾取来确定三角形在世界空间坐标中的确切位置？

> ID：15378673
> 
> 赞同：0
> 
> 时间：2013-03-13T06:45:05.623
> 
> 标签：c#, xna, path-finding, raycasting

我试图在我的游戏中实现指向和点击运动，但目前我很难为我如何选择网格的一部分供玩家步行。

所以我所做的是我的游戏中有一个导航网格，我可以从中选择点，但我想要做的是能够实时选择导航网格并能够告诉玩家去哪里导航网格，我该如何实现？

我认为三角形选择可能是一种方法来确定我用鼠标 unproject 选择网格的位置，但我认为我需要比这更高的准确性，不是吗？

如何实时实现指向并单击导航网格？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T07:35:30.100

免责声明；我自己还没有使用导航网格。但我认为它会像这样工作：

我猜你应该在某种数据结构中拥有这个网格，使空间搜索变得容易（四/八叉树）。然后，您将从鼠标指针沿相机投射光线。

[https://gamedev.stackexchange.com/questions/26106/screen-space-to-world-space](https://gamedev.stackexchange.com/questions/26106/screen-space-to-world-space)

然后，您在网格中进行搜索，使用数据结构来减少需要检查的点数。

如果您的网格基本上是平的，您也可以只使用一个虚构的平面。当您获得一个 3d 位置时，这极大地简化了这些操作，您可以搜索最近的导航点而不是检查与之相交的射线。

在 3D 中进行选择的另一种方法是使用屏幕外渲染目标，每个可选对象都会向其绘制特殊颜色。然后，您只需要检查您单击的颜色并在字典或其他内容中查找。不过，不知道这将如何与导航网格一起使用。

编辑（四叉树）；在这种情况下，四叉树基本上是一种按位置在游戏中分配元素的方式。通常它们是轴对齐的，并位于世界原点 ([0,0,0]) 周围。他们所做的基本上是根据它们存在于 xz 平面上的世界的哪个象限，将您的元素列表分成 4 个。我们称这些节点。因此，如果您寻找一个靠近 [10,0,15] 处的元素的元素，您将在列表中查找属于象限 [>0,*,>0] 的节点。

当您的节点在其列表中获得大量对象时，您再次将它们拆分为 4 个。因此，如果您的节点是 [0, -100, 0] 到 [100, 100, 100]，则子节点将是：

n0: [0,-100,0] 到 [50,100,50]
n1: [50,-100,0] 到 [100,100,50]
n2: [0,-100,50] 到 [50,100,100]
n3: [50 ,-100,50] 到 [100,100,100]

所有节点都有一个 BoundingBox，您可以使用它来检查交集以确定是否应该继续在节点内搜索。

案例：Object@[20,10,20] 想要在一个世界中找到 10 个单位内的对象，其中 1.000 个对象分布在 [-100,-100,-100] 到 [100,100,100] 之间；

*   在半径为 10 的位置周围创建一个 BoundingSphere。
*   交叉测试 4 个顶级节点。n1 返回真（[0,-100,0] 到 [100,100,100]）
*   n1 有自己的孩子，所以我们也与他们相交。n0 返回真（[0,-100,0] 到 [50,100,50]）
*   n1/n0 没有子对象，因此我们检查其列表中的 62 个对象并返回那些具有与范围球相交的边界球/框的对象。

这样，我们搜索 62 个对象的列表，而不是 1.000 个对象。为了将相交检查的次数减少 937（无论如何我们都不会检查对象本身），我们只需要进行 8 次相交测试；所有顶级节点 (4) 和 n0 的子节点 (4)。

所以相交测试从 999 到 70。这就是进步 :)

# jquery - 树形菜单中的圆角

> ID：15378675
> 
> 赞同：0
> 
> 时间：2013-03-13T06:45:15.413
> 
> 标签：jquery, css

当我尝试为带有一些菜单项背景的树形菜单设置圆角时，我遇到了这个问题。请在此处找到示例[http://jsfiddle.net/ardeezstyle/WqGgh/](http://jsfiddle.net/ardeezstyle/WqGgh/)。

HTML 代码

```
<div class="tree">
    <ul>
        <li>
            <span>Menu One</span>
            <ul>
                <li>Sub Menu One</li>
                <li>Sub Menu Two</li>
                <li>Sub Menu Three</li>
            </ul>
        </li>
        <li class="expanded">
            <span>Menu Two</span>
            <ul>
                <li>Sub Menu One</li>
                <li>Sub Menu Two</li>
                <li>Sub Menu Three</li>
            </ul>
        </li>
        <li>
            <span>Menu Three</span>
            <ul>
                <li>Sub Menu One</li>
                <li>Sub Menu Two</li>
                <li>Sub Menu Three</li>
            </ul>
       </li>
       <li>
            <span>Menu Four</span>
            <ul>
                <li>Sub Menu One</li>
                <li>Sub Menu Two</li>
                <li>Sub Menu Three</li>
            </ul>
       </li>
  </ul> 
```

CSS 代码

```
.tree {
border: 1px solid #bababb;
border-radius:4px;
width: 300px;
}
.tree ul {
    list-style:none;
    padding:0;
    margin:0;
}

.tree ul li span{
    display: block;
    padding: 5px 10px 5px 20px;
    background:#f0f0f0;
    border-top: 1px solid #bababb;
    cursor:pointer;
}

.tree ul li:first-child span{
    border-top: none;
}

.tree ul ul li{
    display: block;
    padding: 5px 10px 5px 20px;
    border-top:1px solid #bababb;
}

.tree ul ul li.hover{
    background: #f5f5f5;
}

.tree ul li ul{
    display: none;

}

.tree ul li.expanded ul{
    display: block;
}

.tree ul li.expanded span{
    background: #e1e2e3;
} 
```

JS代码

```
$(function(){
$('.tree ul li span').click(function(){
    $('.tree ul li').removeClass('expanded');
    $(this).parent('li').addClass('expanded');
});

$('.tree li').bind('mouseover', function(){
    $(this).addClass('hover');
});
$('.tree li').bind('mouseout', function(){
    $(this).removeClass('hover');
});
}); 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T07:24:29.410

我能想到的唯一问题是角落的“缺失”边框颜色......

如果这应该是问题：孩子的背景颜色覆盖了角落的边框颜色。

您必须为第一个和最后一个“.tree ul li span”元素赋予与“.tree”容器相同的边框半径和边框颜色。

```
.tree ul li span:first-of-type {
    border-top-left-radius:15px;
    border-top-right-radius:15px;}

.tree ul li + li span:first-of-type {
    border-radius:0px
}

.tree ul li span:last-of-type {
    border-bottom-left-radius:15px !important; /* instead of "!important you should use another selector for higher specificity to overwrite the preceding ".tree ul li + li span:first-of-type"-definition */
    border-bottom-right-radius:15px !important;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T08:19:06.110

碰巧很简单。我刚刚为类*树添加了***溢出：隐藏**。它解决了我的问题。我已经在 Windows 中检查了 IE9、IE10、FF、Chrome、Opera 和 Mac OS 中的 FF、Safari、Chrome 等浏览器。请在此处找到[http://jsfiddle.net/ardeezstyle/WqGgh/1/](http://jsfiddle.net/ardeezstyle/WqGgh/1/)

 *```
.tree {
    overflow: hidden;
} 
```

感谢所有的回复。赞赏他们。*

# symfony - Symfony 2注册一个学说监听器不起作用

> ID：15378684
> 
> 赞同：2
> 
> 时间：2013-03-13T06:45:52.217
> 
> 标签：symfony, doctrine-orm, doctrine

服务.xml 文件：

```
<?xml version="1.0" ?>

    <container xmlns="http://symfony.com/schema/dic/services"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://symfony.com/schema/dic/services http://symfony.com/schema/dic/services/services-1.0.xsd">  

        <services>
            <service id="task.task_history_insertion" class="Acme\Bundle\EventListener\TaskHistoryInsertion">
                <argument type="service" id="service_container" />
                <tag name="doctrine.event_listener" event="postPersist" method="postPersist"/>
            </service>
        </services>
    </container> 
```

TaskHistoryInsertion.php

```
class TaskHistoryInsertion implements EventSubscriber
{

    protected $container;
public function __construct(ContainerInterface $container)
{
    $this->container = $container; 
}

public function getSubscribedEvents()
{
    return array(
        Event::postPersist
    );
}

public function postPersist(LifecycleEventArgs $args)
{
         //not being called
        }
} 
```

关于为什么 postPersist 在坚持后没有被调用的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T07:19:27.090

确保为您的服务使用正确的**标签**。您需要使用`doctrine.event_subscriber`：

```
<service id="task.task_history_insertion" class="Acme\Bundle\EventListener\TaskHistoryInsertion">
    <argument type="service" id="service_container" />
    <tag name="doctrine.event_subscriber"/>
</service> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T07:15:16.423

您正在混合事件订阅者和事件侦听器！

我会去找一个事件监听器：

消除

```
implements EventSubscriber 
```

和

```
public function getSubscribedEvents()
{
    return array(
        Event::postPersist
    );
} 
```

确保你使用

```
use Doctrine\ORM\Event\LifecycleEventArgs; 
```

并且 services.xml 被加载到 src/Acme/Bundle/DependencyInjection/AcmeExtension.php 中。

清除缓存，它应该可以工作。

官方文档可以在 [http://symfony.com/doc/current/cookbook/doctrine/event_listeners_subscribers.html找到](http://symfony.com/doc/current/cookbook/doctrine/event_listeners_subscribers.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T10:14:20.740

当您想实现 eventListener 时 - 您应该将侦听器类中的方法命名为与事件完全相同。在您的示例中-您应该有名为 postPersist 的公共方法。并且监听器类不应该实现 EventSubscriber。有一个链接可以让您更清楚地了解这个主题[http://docs.doctrine-project.org/en/latest/reference/events.html](http://docs.doctrine-project.org/en/latest/reference/events.html)

# c# - 在 C# 中将 "\\' 替换为 '\'

> ID：15378687
> 
> 赞同：1
> 
> 时间：2013-03-13T06:45:54.817
> 
> 标签：c#, asp.net

我正在使用 PayWay 支付网关。我想将支付证书文件路径放在 web.config 文件中。所以我这样添加

```
 <add key="PayWayPath" value="c:\payway\ccapi.q0&amp;logDirectory=c:\payway"/> 
```

我像这样在我的网络表单中调用。

```
 String initParams = WebConfigurationManager.AppSettings["PayWayPath"]; 
```

我的 initParams 像这样

```
initParams  = c:\\payway\\ccapi.q0&amp;logDirectory=c:\\payway 
```

但我需要得到这样的输出。

```
initParams  = c:\payway\ccapi.q0&amp;logDirectory=c:\payway 
```

我试试这个东西。但非工作

```
 initParams = initParams.Replace("\\\\", "\\");  
 initParams = Regex.Replace(initParams, @"[\\ ]", "\"); 
```

那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T06:57:48.630

**你什么都不需要。**

第一个只出现在IDE上，当你写它时，它不会有斜线..

让我们试试吧；

```
string s = "c:\\payway\\ccapi.q0&amp;logDirectory=c:\\payway";
Console.WriteLine(s); 
```

输出将是；

```
c:\payway\ccapi.q0&amp;logDirectory=c:\payway 
```

这是一个[`DEMO`](http://ideone.com/2PJyJB).

无关紧要，但如果你想准确地写出你的字符串，你可以使用`@`被称为*[逐字字符串文字](http://msdn.microsoft.com/en-us/library/aa691090%28v=vs.71%29.aspx)*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T06:51:41.117

如果我理解正确，您将无需再做任何事情。如果字符串已经转义了斜杠，当您“打印”该值时，它将按照您的意愿显示（即仅单斜杠）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T06:59:08.040

你可以这样做

```
initParams = initParams.Replace("\\\\", "\\"); 
```

# python - 来自概念工程的 PythonSDK

> ID：15378699
> 
> 赞同：1
> 
> 时间：2013-03-13T06:46:54.343
> 
> 标签：python, linux

有人有使用他们的 linux 包从 Conceptive Engineering 安装 PythonSDK (2.7.2) 的经验吗？

Windows 版本有一个安装程序，运行良好。现在也想在 linux box 上使用。

linux 版本作为存档发布。它似乎不像典型的 python 安装站点那样组织。顶层没有文档/自述文件/可执行文件（因此似乎没有安装程序脚本）。

他们的技术支持有点慢，文档很少。希望有人有亲身经历。

谢谢

# asp.net - 在本地调试生产 asp.net 应用程序

> ID：15378701
> 
> 赞同：3
> 
> 时间：2013-03-13T06:47:00.840
> 
> 标签：asp.net, remote-debugging

我在我的开发盒上制作了一个asp.net应用程序，该应用程序部署在生产环境中。我可以在带有公共域的生产 URL 上看到我的应用程序，例如[https://www.myapp.com](https://www.myapp.com)（示例）。

是否可以通过以下方式从我的 Visual Studio 开发环境中附加进程来调试应用程序 - 转到调试，然后通过选择显示[https://www.myapp.com](https://www.myapp.com)的浏览器附加进程？

我尝试了它并附加了进程，但它没有达到 VS2010 中的调试点。谁能告诉我是否可以这样做？

提前致谢！君尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:00:20.227

听起来您只是在调试浏览器。如果要调试远程计算机，则需要在该计算机上运行的代码的调试版本和在远程计算机上运行的 MSVSMON.EXE。您最好阅读[http://msdn.microsoft.com/en-us/library/bt727f1t.aspx](http://msdn.microsoft.com/en-us/library/bt727f1t.aspx) 然后在这里研究 MSVSMON 问题。

# python - 将多个输入行放到控制台| 诅咒

> ID：15378705
> 
> 赞同：2
> 
> 时间：2013-03-13T06:47:25.520
> 
> 标签：python, unix, posix, curses

我已经开始用 Python 语言编写控制台。这是惊人的。但是，我尝试创建`curses`如下所示的输入框。我一直坚持如何放置输入线并将输入写入控制台的输入位置。你能帮我做这部分吗？我忘了问_是否可以使用***curses****创建如下所示的输入框？如果没有，我应该使用什么？*

 **我只想查看方法/算法，而不是完整的代码。

```
 sketch of console 

 |------------------------------------------------------|
 |                                                      |
 |                                                      |
 |                                                      |
 |                                                      |
 |     username  ===>                                   | // user can write name
 |     password  ===>                                   | // user can write password
 |     procedure ===>                                   | // user can write proc name
 |                                                      |
 |                                                      |
 |                                                      |
 |                                                      |
 |                                                      |
 |------------------------------------------------------| 
```

我正在 Linux 平台上开发（Ubuntu 12.04 lts）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:55:15.030

不知怎的，我之前的答案被删除了...

要在 Python 中获取用户输入，请将变量分配给内置[`input()`](http://docs.python.org/3/library/functions.html?#input)函数的结果：

```
user_input = input("Type something: ")
print("You typed: " + user_input) 
```

在 Python 2 中，该[`raw_input()`](http://docs.python.org/2/library/functions.html?#raw_input)函数也可用，并且优于`input()`.

要在不回显到屏幕的情况下获取密码，请使用以下[`getpass`](http://docs.python.org/3/library/getpass.html)模块：

```
import getpass
user_password = getpass.getpass("Enter password: ") 
```

我对 不太熟悉`curses`，但您似乎可以定位光标，然后调用`input()`or `getpass.getpass()`。只需简要阅读[文档](http://docs.python.org/2/howto/curses.html)，显然有一些选项可以随意打开和关闭屏幕回显，因此这些可能是更好的选择。阅读精美手册:)**

# javascript - 跟踪隐藏的 div

> ID：15378714
> 
> 赞同：3
> 
> 时间：2013-03-13T06:47:57.323
> 
> 标签：javascript

我创建了一个[网络应用程序](http://www.fbstatussearch.com)。我已经尽我最大的努力找出为什么在`more`搜索项目时命名的 div 会被隐藏（您可以从评论和警报中看到我的努力）但我无法追踪它。如果有人可以指导我，我将不胜感激。谢谢

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:og="http://opengraphprotocol.org/schema/" xmlns:fb="http://www.facebook.com/2008/fbml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="shortcut icon" href="images/favicon.png" />
<script type="text/javascript">
var nexturl ="";
var lastid ="";
var param;
<!--Trace more-->
function myFunction() {
    param = $('#search').val();
    //alert("I am an alert box!");
    if (param != "") {
        $("#status").show();
        //alert("Show ");
        var u = 'https://graph.facebook.com/search/?callback=&limit=5&q='+param;
        $("#data").empty();     //empty the data div
        //alert("Wait for 5 sec?");
        setTimeout(function(){
                    getResults(u)},
                200);
        //getResults(u);
        //alert("When myFunction runs show more line 20");
        $("#more").show(); 
        }

    $("#more").click(function () { 
    $("#status").show();
    //alert("Show ");
    $("#more").hide();  
    pageTracker._trackPageview('/?q=/more');
    var u = nexturl;
    getResults(u);
  });
}
</script>
<title>Facebook Status Search - Search Facebook Status in Real Time</title>
<meta name="description" content="Facebook status search, search status facebook, facebook status real time, Fahad Uddin Facebook status search, Facebook update search">
<meta name="distribution" content="global">
<link rel="stylesheet" type="text/css" media="screen" href="style.css">
<script type="text/javascript" src="jquery.min.js"></script>
<script type="text/javascript" src="jquery.cuteTime.min.js"></script>
<script type="text/javascript" src="ofs.js"></script>
<script type="text/javascript" src="ga.js"></script>
<link rel="stylesheet" href="font/stylesheet.css" type="text/css" charset="utf-8" />
</head>
<body style="margin:0px;padding:0px;">
        <div id="container">
        <div id="header" style="height:39px; background-color:#3B5998; margin-bottom: 10px; ">
        <div id="logo" style="display:inline;">
                                <h1 style="display:inline; font-family: 'klavika_boldbold_tf';color: #FFFFFF;padding-left:50px;padding-left: 50px;font-size:30px;" ><a style="color:#fff;" href="http://www.fbstatussearch.com">facebook status search</a></h1>
        </div>
        <div style="margin-bottom:10px;float:right;">
                <form action="" method="get" id="searchform" onsubmit="return false;">
                <input name="q" type="text" id="search" onClick="this.select();" size="32" maxlength="128" class="txt"  style="padding: 0 5px;" >
                <input type="button" id="hit" value="Search" onclick="myFunction();return false" class="btn">
                </form>
        </div>
        </div>
        <div id="data_container">
        <div id="data">
            <div id="status_container">
          <div id="status"><img src="loader.gif" alt="loading facebook status search"/></div>
          </div>
        </div>
        <div id="more" style="text-align:center;">More Posts <img src="DownTriangleIcon_8x8.png" alt="more status" /></div>
        </div>
        <div id="sidebar" style="float:right;">
                        <div style=" background-color: #fcf7da;
                                    border-radius: 5px 5px 5px 5px;
                                    color: #735005;
                                    padding: 8px;margin-bottom:10px;" >
                                        <h4>Share it with the World</h4>
                                        <!-- AddThis Button BEGIN -->
                                <div class="addthis_toolbox addthis_default_style ">
                                    <a class="addthis_button_preferred_1"></a>
                                    <a class="addthis_button_preferred_2"></a>
                                    <a class="addthis_button_preferred_3"></a>
                                    <a class="addthis_button_preferred_4"></a>
                                    <a class="addthis_button_compact"></a>
                                    <a class="addthis_counter addthis_bubble_style"></a>
                                </div>
                                <script type="text/javascript">var addthis_config = {"data_track_addressbar":true};</script>
                                <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-4fe772f550658645"></script>
                                <!-- AddThis Button END -->
                                </div>

                                <div style=" background-color: #FFEFC6;
                                    border-radius: 5px 5px 5px 5px;
                                    color: #735005;
                                    padding: 8px;margin-bottom:10px;" >
                                        <h4>How To Use</h4>
                                        <p>Write down the tag to be searched in the top search area. For example,type in,<br>
                                        <strong>Yahoo</strong><br>
                                        and you will get the latest relevant Facebook updates of <strong>all the people around the world</strong> that have used the word <strong>"Yahoo"</strong>.</p>
                                </div>
                            <!--    <div style=" background-color: #FFE1C0;
                                    border-radius: 5px 5px 5px 5px;
                                    color: #735005;
                                    padding: 8px;margin-bottom:10px;" >
                                        <h4>Why Use it?</h4>
                                        <p>Here is why you would <em>love it</em>.</p>
                                </div>
                                -->
                                <div style=" background-color: #EEEEEE;
                                    border-radius: 5px 5px 5px 5px;
                                    color: #735005;
                                    padding: 8px;" >
                                        <h4>Copyright</h4>
                                        <p>Copyright 2013\. All rights reserved. We are not linked with Facebook.<br>
                                        Created by <a href="http://www.facebook.com/fahd92">Fahad Uddin</a>.
                                        </p>
                                </div>

                        </div>  <!--Sidebar Ends-->

        <div id="adverise" width="336px;padding:0 auto; float:left;">
                        <script type="text/javascript"><!--
                        google_ad_client = "ca-pub-8542523573222680";
                        /* FbStatusSearch1 */
                        google_ad_slot = "8229888765";
                        google_ad_width = 336;
                        google_ad_height = 280;
                        //-->
                        </script>
                        <script type="text/javascript"
                        src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
                        </script>
                          </div>

                <div id="footer">
                    <p style="font-size:12px;">Copyrights 2013.Created by <a href="http://www.facebook.com/fahd92">Fahad Uddin</a>. All Rights Reserved.</p>
                </div>  <!--Footer Ends-->
</div>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-16080447-1");
pageTracker._trackPageview();
} catch(err) {}</script>
<script type="text/javascript">
$(document).ready(function () {
$("#search").keyup(function(e){
$("#status").empty();
/*
var keyCode = e.keyCode || e.which;

if(keyCode == 13) {*/
myFunction();
//}
});
//alert("On Page load hide more Line 151 ");
$("#status").hide();
//$("#more").hide(); 
});
</script>
</body></html> 
```

这是JS，

```
function getResults(u) {
//$("#status").show();  
$("#data").empty();                                                 // print that we are in
    $.ajax({
        dataType: "jsonp", 
        url: u,
        success: function(res) {                                                        // take an object res
                $("#data").empty(); 
              $("#status").show();                                                      // show status
              //$("#more").show();  
              if (res.data.length) {                                                    // check length of res
                                                                    // print if >0
                nexturl = res.paging.next;                                              // calculate next url
                  $.each(res.data, function(i,item){
                    if (item.id != lastid) {
                        lastid = item.id;
                        var html ="<div class=\"post\">";

                        html += "<div class=\"message\"><a href=\"http:\/\/www.facebook.com\/profile.php?id="+item.from.id+"\">"+item.from.name+"</a> ";

                        if (item.message) { 
                            html += item.message+"<\/div>";
                        } else {
                            html += "<\/div>";
                        }
                        if (item.picture) { 
                            html += "<div class=\"image\"><img src=\""+item.picture+"\"></div>";
                        } else {
                            html += "<div class=\"image\"><\/div>";
                        };
                        if (item.link) { 
                            html += "<div class=\"link\"><a href=\""+item.link+"\">"+item.name+"</a></div>";

                            if (item.caption) { 
                                    html += "<div class=\"caption\">"+item.caption+"</div>";
                            };
                            if (item.description) { 
                                    html += "<div class=\"description\">"+item.description+"</div>";
                            };

                        };

                        html += "<div class=\"meta\">";

                        if (item.icon) { 
                            html += "<span class=\"icon\"><img src=\""+item.icon+"\"></span> ";
                        };
                        var t = item.created_time;
                        var time = t.substring(0,19)+"\+00:00";
                        html += "<span class=\"time\">"+$.cuteTime({},time)+"<\/span> ";
                        html += " <\/div>";

                        html +="</div>";
                        $("#data").append(html) ;
                    }
                  });
                    $("#more").appendTo("#data");
                    $("#more").show();
                    $("#status").appendTo("#data");

            } else {
                $("#data").append("<h3 class=\"none\">No entries found. Please try another search.</h3>");
            }; 
        } 

    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T07:12:01.780

你的问题是：

```
$("#more").appendTo("#data"); 
```

起初`more`坐在`data_container`，然后你通过这一行将它移动到数据中： `$("#more").appendTo("#data");`然后当他再次来到它时，它与这一行 一起`success`删除： 并且当你想再做一次时 找不到。`more``data``$("#data").empty();``$("#more").appendTo("#data");`

我认为您应该更改为：

```
 $("#more").appendTo("#data_container"); 
```

或者先保存`more`在 `$("#data").empty();`变量中，然后将变量附加到`data`.

# windows - 无论区域设置如何，在批处理文件中拆分 %date%

> ID：15378719
> 
> 赞同：11
> 
> 时间：2013-03-13T06:48:27.933
> 
> 标签：windows, date, batch-file, cmd, regional-settings

有没有办法`%date%`在批处理文件中拆分（例如，在 3 个环境变量中），但不管区域设置如何？今天的日期`3/13/2013`适用于美国，但使用我的区域设置是`13.3.2013`-**分隔符已更改，顺序也已更改**。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2017-08-29T12:55:58.767

四年过去了，但这个问题并没有变老，我认为现在有一个比使用 wmic 更好的答案（在 win7 上）。

```
for /F "tokens=1,2,3 delims=_" %%i in ('PowerShell -Command "& {Get-Date -format "MM_dd_yyyy"}"') do (
    set MONTH=%%i
    set DAY=%%j
    set YEAR=%%k
)
echo %MONTH% %DAY% %YEAR% 
```

使用 powershell `Get-Date`，您可以微调所需的格式（短、长、数字、名称等）。在此示例中，“MM_dd_yyyy”将为您提供一个带有前导零的数字日期，以防单个数字月或日

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-13T06:59:32.330

您可以[使用 wmic](http://ss64.com/nt/syntax-getdate.html)来完成（但 WMIC 不包含在 XP Home 中）：

```
@ECHO OFF
:: Check WMIC is available
WMIC.EXE Alias /? >NUL 2>&1 || GOTO s_error

:: Use WMIC to retrieve date and time
FOR /F "skip=1 tokens=1-6" %%G IN ('WMIC Path Win32_LocalTime Get Day^,Hour^,Minute^,Month^,Second^,Year /Format:table') DO (
   IF "%%~L"=="" goto s_done
      Set _yyyy=%%L
      Set _mm=00%%J
      Set _dd=00%%G
      Set _hour=00%%H
      SET _minute=00%%I
)
:s_done

:: Pad digits with leading zeros
      Set _mm=%_mm:~-2%
      Set _dd=%_dd:~-2%
      Set _hour=%_hour:~-2%
      Set _minute=%_minute:~-2%

:: Display the date/time in ISO 8601 format:
Set _isodate=%_yyyy%-%_mm%-%_dd% %_hour%:%_minute%
Echo %_isodate%

GOTO:EOF

:s_error
Echo GetDate.cmd
Echo Displays date and time independent of OS Locale, Language or date format.
Echo Requires Windows XP Professional, Vista or Windows 7
Echo.
Echo Returns 6 environment variables containing isodate,Year,Month,Day,hour and minute. 
```

您可以通过[解析 date 命令](http://www.robvanderwoude.com/amb_datetime.php)来查找当前所需的日期格式。

第一个链接表明您可能需要在 Win7 上编辑第二个链接中的代码，以处理短日期/长日期表单周围的一些额外皱纹。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-13T08:27:01.883

我已经修改了`sashoalm`'s version 以处理被抑制的前导零情况：

```
@Echo OFF
SETLOCAL
If "%Date%A" LSS "A" (Set _NumTok=1-3) Else (Set _NumTok=2-4)
:: Default Delimiter of TAB and Space are used
For /F "TOKENS=2*" %%A In ('REG QUERY "HKCU\Control Panel\International" /v iDate') Do Set _iDate=%%B
For /F "TOKENS=2*" %%A In ('REG QUERY "HKCU\Control Panel\International" /v sDate') Do Set _sDate=%%B
IF %_iDate%==0 For /F "TOKENS=%_NumTok% DELIMS=%_sdate% " %%F In ("%Date%") Do CALL :procdate %%H %%F %%G
IF %_iDate%==1 For /F "TOKENS=%_NumTok% DELIMS=%_sdate% " %%F In ("%Date%") Do CALL :procdate %%H %%G %%F
IF %_iDate%==2 For /F "TOKENS=%_NumTok% DELIMS=%_sdate% " %%F In ("%Date%") Do CALL :procdate %%F %%G %%H
endlocal&SET YYYYMMDD=%YYYYMMDD%
GOTO :eof

::
:: Date elements are supplied in Y,M,D order but may have a leading zero
::
:procdate
:: if single-digit day then 1%3 will be <100 else 2-digit
IF 1%3 LSS 100 (SET YYYYMMDD=0%3) ELSE (SET YYYYMMDD=%3)
:: if single-digit month then 1%2 will be <100 else 2-digit
IF 1%2 LSS 100 (SET YYYYMMDD=0%2%YYYYMMDD%) ELSE (SET YYYYMMDD=%2%YYYYMMDD%)
:: Similarly for the year - I've never seen a single-digit year
IF 1%1 LSS 100 (SET YYYYMMDD=20%YYYYMMDD%) ELSE (SET YYYYMMDD=%1%YYYYMMDD%)
GOTO :eof 
```

根据您的意愿返回 YYYYMMDD - 子字符串。

有趣的是，插入之后`SETLOCAL`

```
IF NOT "%1"=="" set date=%1 
```

将允许将本地序列中的任何日期（没有日期名称）解码为 YYYYMMDD（但请注意 yy 形式提供的 19xx 日期将显示为 20xx - 如果您认为有必要，可以轻松补偿）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-13T12:16:01.267

我对 robocopy 有一个额外的建议：

```
@echo off &setlocal enabledelayedexpansion
set "day="
for /f "tokens=3,4,8skip=4delims=: " %%i in ('robocopy') do if not defined day (
    set "month=%%i"
    set "day=0%%j"
    set "year=%%k"
)
set /a cnt=0
for %%i in (Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec) do (
    set /a cnt+=1
    if "%%i"=="%month%" set "month=0!cnt!"
)
set "day=%day:~-2%"
set "month=%month:~-2%"
echo.%day%.%month%.%year%
endlocal 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-07-28T01:00:53.690

试试这个：Set_date.cm

```
@echo off&goto :start
:Set_Date DateEnv [Date] or [/p="Prompt for Date: "] [/r]
echo.
echo.Usage: Set_Date.cmd DateEnv [Date] or [/p="Prompt for Date: "]
echo.Populates date variables labeled: 'DateEnv_???', see below
echo.Accepted date formats:
echo.        m-d-y, m/d/y, yyyymmdd, dd-Mon-yy or 7 digit julian date
echo.        If "%%date%%" is passed as the 2nd arg it will be interpreted
echo.        according to the current regional date setting ie. day dd/mm/yyyy
echo.        If /r is passed then the date contained in the DateEnv variable
echo.        and/or the [Date] argument will be interpreted in regional format
echo.        The /r option should be placed at the end of the list if used
echo.        The /r option should only be used if date input is not included
echo.        in one of the default listed formats or unexpected consequences...
echo.
echo.DateEnv, if passed alone may be a valid defined date variable or if
echo.undefined then todays date will be used to populate the variables
echo.Two digit years input 'XX' are interpreted as the year '20XX'
echo.Valid dates must be in the year 1601 or greater for the validity check
echo.Returns 0 in errorlevel if the date is valid, else non-zero
echo.
echo.If DateEnv is valid or if [Date] is passed DateEnv_??? will be set to:
echo.DateEnv_mdy will be set to mm-dd-yyyy
echo.DateEnv_ymd will be set to yyyymmdd
echo.DateEnv_y.m.d will be set to yyyy.mm.dd
echo.DateEnv_dte will be set to the current active regional date format
echo.DateEnv_jul will be set to the 7 digit Julian date
echo.DateEnv_dow will be set to day of week, ie. Monday, Tuesday, etc.
echo.DateEnv_vrb will be set to Verbose Date, ie. Saturday, August 20th, 2011
echo.DateEnv_dd will be set to the 2 digit day
echo.DateEnv_mm will be set to the 2 digit month
echo.DateEnv_yyyy will be set to the 4 digit year
echo.DateEnv_month will be set to the month, ie. February or December
echo.DateEnv_mon will be set to the 3 letter month, ie. Jan or Aug
echo.
echo.DateEnv itself will not be changed regardless if its a valid date or not
echo.Also formats yyyymmdd or 7 digit julian date input to desired output
echo.Example: Set_Date today "%%date%%" or Set_Date newyear99 01-Jan-99
echo.
echo.Finally:
echo.If DateEnv is not defined and there is no second argument then %%date%% in
echo.the current regional format will be used to populate the variables
echo.If /p is passed as 2nd argument then quoted 3rd argument will prompt for date
echo.
echo.Examples:
echo.         set "AprilsFools=4/1/1"
echo.         set_date AprilFools
echo.         echo Aprils fools date for 2001 in Julian format is: %%AprilFools_jul%%
echo.         echo Aprils fools date in 2001 was on a %AprilFools_dow% ^(Sunday^)
echo.         Set_Date birthday /p="Enter your birth date: "
echo.         ECHO You were born on a %%birthday_dow%%
echo.         set "today="
echo.         Set_Date today
echo.         echo today is %%today_dte%% or %%today_jul%% in Julian format
echo.
echo.If the '/p' option is used then the _GetString.cmd routine must be in the PATH
echo.         or else set/p routine will ask for date with no validity checking
exit /b 1

:start
set "jul="&set "Format="&set "Sep="&set "reg="
if "%~1"=="" exit /b 255
if /i "%~1" equ "/?" goto :Set_Date Syntax
SetLocal EnableDelayedExpansion
echo %*|find /i "/r">nul
if %errorlevel% equ 0 set/a reg=1&if /i "%~1" equ "/r" shift
if defined %~1 (call set jul=%%%~1%%) else (
  if "%~2"=="" set "jul=%date%"
)
if not "%~2"=="" (
  if /i "%~2" neq "/r" (
    set "jul=%~2"&set "args=%~3"
  )
) else (if not defined %~1 set/a reg=1)
call :RegDateFmt Format Separator yy mm dd jul
if %errorlevel% neq 0 goto :BadDate
if /i "%~2" equ "%date%" set/a reg=1
if defined reg (
  set "jul=!mm!-!dd!-!yy!"
)
if /i "%jul%" equ "/p" (
  call :_GetString.cmd "%args%" jul /d
  if !errorlevel! gtr 0 goto :BadDate
) else if /i "%jul:~0,1%" gtr "9" (
  if defined args set "jul=%jul% %args%"
  set "jul=!jul:* =!"
) else if /i "%jul:~3,1%" gtr "9" (
  set "Mon=%jul:~3,3%"
  call :month_convert Mon
  if !errorlevel! gtr 0 goto :BadDate
  set "jul=!Mon!-%jul:~0,2%-%jul:~-2%"
)
set mdy=%jul:/=%
set mdy=%mdy:-=%
if /i %mdy% equ %jul% (
  call :strlen %mdy%
  if /i !errorlevel! equ 7 ( 
    call :date_cvt mdy /j
  ) else (call :date_cvt jul /j)
) else (call :date_cvt jul /j)
if /i %errorlevel% equ 0 (
  set/a mdy=%jul%
  set/a dow=%jul% %% 7&call :set_day dow
) else (goto :BadDate)
call :date_cvt mdy /j
set "vrb=%mdy%"
call :format_verbose vrb dow month
set/a ymd=%errorlevel%
set "mon=%month:~0,3%"
set/a dte=%ymd%
call :setRegDate dte Format Separator dow mon
if /i %errorlevel% gtr 0 goto :BadDate
Endlocal&(
  call set "%~1_mdy=%mdy%"&call set "%~1_ymd=%ymd%"&call set "%~1_jul=%jul%"
  call set "%~1_vrb=%vrb%"&call set "%~1_dow=%dow%"&call set "%~1_dd=%ymd:~-2%"
  call set "%~1_mm=%mdy:~0,2%"&call set "%~1_yyyy=%ymd:~0,4%"
  call set "%~1_mon=%mon%"&call set "%~1_yy=%ymd:~2,2%"&call set "%~1_dte=%dte%"
  call set "%~1_y.m.d=%ymd:~0,4%.%mdy:~0,2%.%ymd:~-2%"&call set "%~1_month=%month%"
  exit /b 0
)
:BadDate
Endlocal&(
  call set "%~1_mdy="&call set "%~1_ymd="&call set "%~1_dte="&call set "%~1_jul="
  call set "%~1_vrb="&call set "%~1_dow="&call set "%~1_vrb="&call set "%~1_y.m.d="
  call set "%~1_month="
)&exit /b %errorlevel%

::**********************************::
::*******||  SUBROUTINES   ||*******::
::**********************************::

:set_day
SetLocal&call set/a tkn=%%%~1%%+1
for /f "tokens=%tkn%" %%a in ("Monday Tuesday Wednesday Thursday Friday Saturday Sunday") do (
  set "dayofwk=%%a"
)
EndLocal&call set %~1=%dayofwk%&exit /b 1

:Date_Cvt DateEnv [/Julian] Date_env is converted
if "%~1"=="" exit /b 1
SetLocal&call set "mdy=%%%~1%%"
set ech=&set "arg="
if not "%~2"=="" (set arg=%~2&set arg=!arg:~0,2!)
xcopy /d:%mdy% /h /l "%~f0" "%~f0\">nul 2>&1
if /i %errorlevel% equ 0 (
  for /f "tokens=1-3 delims=/- " %%a in ("%mdy%") do (
    set m=%%a&set d=%%b&set "y=%%c"
    if /i 1!m! lss 20 set "m=0!m!"
    if /i 1!d! lss 20 set "d=0!d!"
    if /i 1!y! lss 20 set "y=0!y!"
    if /i !y! lss 80 (set y=20!y!) else (if !y! lss 100 set y=19!y!)
    set "mdy=!m!-!d!-!y!"
  )
) else (
  set /a rc=1
  for /f "tokens=1-3 delims=0123456789" %%a in ("%mdy%") do set "rc=%%a"
  if /i !rc! neq 1 set /a err=2&goto :end
  call :strlen %mdy%
  if /i !errorlevel! gtr 8 set /a err=3&goto :end
)
set "mdy=%mdy:/=-%"
set "ymd=%mdy:-=%"
if %ymd%==%mdy% (
  call :strlen %ymd%
  set /a err=!errorlevel!
  if /i !err! equ 7 if /i "%arg%" equ "/j" (
    call :gdate %ymd%
    set /a ymd=!errorlevel!
    set /a err=8&set "arg="
  )
  if /i !err! neq 8 goto :end
  set mdy=!ymd:~4,2!-!ymd:~6,2!-!ymd:~0,4!&set "ech=!mdy!"
) else (
  set ymd=%ymd:~4,4%%ymd:~0,4%&set "ech=!ymd!"
)
xcopy /d:%mdy% /h /l "%~f0" "%~f0\">nul 2>&1
set /a err=%errorlevel%
if /i %err% neq 0 (set ech=)
if /i %err% equ 0 if /i "%arg%" equ "/j" (
  call :jdate %ymd%
  set /a ech=!errorlevel!
)
:end
EndLocal&call set "%~1=%ech%"&exit /b %err%

:Strlen Returns length of string in errorlevel
setlocal&set "#=%*"
if not defined # exit /b 0
set/a len=0
:loop
set/a len+=1
set "#=!#:~1!"&if not defined # endlocal&exit/b %len%
goto :loop

:jdate
SetLocal
set "yyyymmdd=%~1"
set "yyyy=%yyyymmdd:~0,4%"
set "mm=%yyyymmdd:~4,2%"
set "dd=%yyyymmdd:~6,2%"
if %mm:~0,1% equ 0 set "mm=%mm:~1%"
if %dd:~0,1% equ 0 set "dd=%dd:~1%"
set /a Month1=(%mm%-14)/12
set /a Year1=%yyyy%+4800
set /a JDate=1461*(%Year1%+%Month1%)/4+367*(%mm%-2-12*%Month1%)^
             /12-(3*((%Year1%+%Month1%+100)/100))/4+%dd%-32075
EndLocal&exit /b %JDate%

:gdate
SetLocal
set /a p      = %1 + 68569
set /a q      = 4 * %p% / 146097
set /a r      = %p% - ( 146097 * %q% +3 ) / 4
set /a s      = 4000 * ( %r% + 1 ) / 1461001
set /a t      = %r% - 1461 * %s% / 4 + 31
set /a u      = 80 * %t% / 2447
set /a v      = %u% / 11
set /a GYear  = 100 * ( %q% - 49 ) + %s% + %v%
set /a GMonth = %u% + 2 - 12 * %v%
set /a GDay   = %t% - 2447 * %u% / 80
if /i 1%GMonth% lss 20 set "GMonth=0%GMonth%"
if /i 1%GDay%   lss 20 set "GDay=0%GDay%"
set "GDate=%GYear%%GMonth%%GDay%"
EndLocal&exit /b %GDate%

:Format_Verbose M/D/Y dayofweek to verbose date
SetLocal&call set "dte=%%%~1%%"
set "dow=%%%~2%%"
set "st="
set "day=%dte:~3,2%"
set "mon=%dte:~0,2%"
set "year=%dte:~6,4%"
set "ymd=%year%%mon%%day%"
set "dy=%day:~1%"
if %day:~0,1% equ 0 set "day=%day:~1%"
if %mon:~0,1% equ 0 set "mon=%mon:~1%"
set months=January February March April May June^
 July August September October November December
for /f "tokens=%mon%" %%a in ("%months%") do set "month=%%a"
if /i %dy% equ 0 set "st=th"
if /i %dy% gtr 3 set "st=th"
if /i %day% geq 11 if /i %day% leq 13 set "st=th"
if defined st goto :end
set/a rst=%day% %% 10
for /f "tokens=%rst%" %%s in ("st nd rd") do set "st=%%s"
:end
set "dow=%dow%, %month% %day%%st%, %year%"
EndLocal&call set %~1=%dow%&call set %~3=%month%&exit /b %ymd%

:_GetString.cmd
set p0=%0&set "p0=!p0:~1!"
if not exist _GetString.cmd (
  call :checkpath %p0%
  if !errorlevel! neq 0 (
    set/p %~2="%~1"
    exit/b 0
  )
)
call _GetString.cmd "%~1" %~2 %~3
exit/b %errorlevel%

:checkpath
if exist "%~$PATH:1" exit/b 0
exit/b 1

:RegDateFmt Format Separator y m d dte
if "%~2"=="" exit/b 1
setlocal EnabledelayedExpansion
set "Day="&set "Mon="&set "dte="
if not "%~6"=="" set "dte=!%~6!"
if not defined dte set "dte=%date%"
for /f "tokens=2 delims=:" %%A in ('date^<nul') do set Format=%%A&goto :next
:next
set "Format=%Format: =%"
for %%A in (/ - . ,) do (
  echo %Format%|find "%%A">nul&if !errorlevel! equ 0 set "Separator=%%A"
)
if /i %Format:~0,1% gtr 9 set "Day=Day "
for /f "skip=1 tokens=2-4 delims=(-)" %%a in ('date^<nul') do (
  set "Format=%Day%%%a%Separator%%%b%Separator%%%c"
  for /f "tokens=1-3 delims=.-/ " %%d in ("%dte:* =%") do (
    set %%a=%%d&set %%b=%%e&set "%%c=%%f"
    echo !yy:~3!|find "ECHO">nul
    if /i "!errorlevel!" neq "0" set "Format=!Format:yy=yyyy!"
    if /i "!mm:~0,1!" gtr "9" (
      set "Format=!Format:mm=Mon!"
      call :month_convert mm
      if /i "!errorlevel!" neq "0" endlocal&exit/b 1
    )
  )
)
endlocal&(
  call set "%~1=%Format%"
  call set "%~2=%Separator%"
  if not "%~3"=="" call set "%~3=%yy%"
  if not "%~4"=="" call set "%~4=%mm%"
  if not "%~5"=="" call set "%~5=%dd%"
)&exit/b 0

:month_convert
set "months=Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec"
call set "month=%%%~1%%"
set/a mnum=0
for %%m in (%months%) do set/a mnum+=1&if /i %month% equ %%m call set "%~1=!mnum!"&exit /b 0
exit/b 1

:setRegDate dte format sep dow mon
setlocal EnableDelayedExpansion
if /i "%~5"=="" exit/b 1
set mon=!%~5!&set dow=!%~4!&set "dow=!dow:~0,3! "
set sep=!%~3!&set "format=!%~2!"&set "dte=!%~1!"
set yyyy=%dte:~0,4%&set yy=%dte:~2,2%&set mm=%dte:~4,2%&set "dd=%dte:~-2%"
set "toks=2-4"
echo %format%|find " ">nul
if %errorlevel% equ 1 set "dow="& set "toks=1-3"
for /f "tokens=%toks% delims=%sep% " %%a in ("%format%") do (
  set "dte=%dow%!%%a!%sep%!%%b!%sep%!%%c!"
)
endlocal&call set "%~1=%dte%"&exit/b 0 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-13T07:02:25.033

我在[http://forums.techguy.org/dos-other/837046-solved-date-format-bat-file.html找到了这个](http://forums.techguy.org/dos-other/837046-solved-date-format-bat-file.html)

我已经对其进行了一些修改，以将其实际拆分为 3 个环境变量。

缺点是它需要查询注册表，可能要找出订单的日期、月份和年份。

```
@Echo Off
Set _Date=%date%
If "%_Date%A" LSS "A" (Set _NumTok=1-3) Else (Set _NumTok=2-4)
:: Default Delimiter of TAB and Space are used
For /F "TOKENS=2*" %%A In ('REG QUERY "HKCU\Control Panel\International" /v iDate') Do Set _iDate=%%B
For /F "TOKENS=2*" %%A In ('REG QUERY "HKCU\Control Panel\International" /v sDate') Do Set _sDate=%%B
IF %_iDate%==0 For /F "TOKENS=%_NumTok% DELIMS=%_sDate% " %%B In ("%_Date%") Do Set _fdate=%%D%%B%%C
IF %_iDate%==1 For /F "TOKENS=%_NumTok% DELIMS=%_sDate% " %%B In ("%_Date%") Do Set _fdate=%%D%%C%%B
IF %_iDate%==2 For /F "TOKENS=%_NumTok% DELIMS=%_sDate% " %%B In ("%_Date%") Do Set _fdate=%%B%%C%%D
Set _Month=%_fdate:~4,2%
Set _Day=%_fdate:~6,2%
Set _Year=%_fdate:~0,4%
Echo _Year=%_Year%
Echo _Month=%_Month%
Echo _Day=%_Day% 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-13T07:34:30.213

`REG QUERY`如果 sShortDate 设置为类似`dd yy`. 使用`REG ADD`：

```
@echo off &setlocal
for /f "tokens=2*" %%a in ('reg query "HKCU\Control Panel\International" /v sShortDate^|find "REG_SZ"') do set "ssShortDate=%%b"
reg add "HKCU\Control Panel\International" /f /v sShortDate /d "dd MM yyyy" >nul
set "cdate=%date%"
reg add "HKCU\Control Panel\International" /f /v sShortDate /d "%ssShortDate%" >nul
for /f "tokens=1-3" %%i in ("%cdate%") do set "day=0%%i"&set "month=0%%j"&set "year=%%k"
set "day=%day:~-2%"
set "month=%month:~-2%"
echo.%day%.%month%.%year%
endlocal 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-05-12T19:20:18.070

此功能应适用于所有地区。

**评论：**

以文本格式返回 MMM 区域的月份

```
@echo off
  call :GetDateIntl year month day 
  echo/Using GetDateIntl you get: %year%-%month%-%day%
goto:eof

:::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
:GetDateIntl yy mm dd [/A]
:: Returns the current date on any machine with regional-independent settings
:: Arguments:
::   yy = variable name for the year output
::   mm = variable name for the month output
::   dd = variable name for the day output
::   /A = OPTIONAL, removes leading 0 on days/months smaller than 10 (example: 01 becomes 1)
:: Remarks:
::  Will return month in text format in regions with MMM month
::
SETLOCAL ENABLEEXTENSIONS
if "%date%A" LSS "A" (set toks=1-3) else (set toks=2-4)
for /f "tokens=2-4 delims=(-)" %%a in ('echo:^|date') do (
  for /f "tokens=%toks% delims=.-/ " %%i in ('date/t') do (
    set '%%a'=%%i
    set '%%b'=%%j
    set '%%c'=%%k
  )
)
if /I "%'yy'%"=="" set "'yy'=%'aa'%"
if /I "%'yy'%"=="" ( set "'yy'=%'jj'%" & set "'dd'=%'tt'%" )
if %'yy'% LSS 100 set 'yy'=20%'yy'%
endlocal&set %1=%'yy'%&set %4 %2=%'mm'%&set %4 %3=%'dd'%&goto :EOF
::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::: 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-13T08:55:33.787

下面有一个纯批处理解决方案，它只使用 DATE 命令和 %DATE% 变量，因此它适用于任何 Windows 版本。为了使这个程序真正通用，只需添加其他语言的 DATE 命令第二行显示的日期和月份部分的名称，并用斜杠括起来。例如，假设在德语中，日部分显示为 TT，因此您只需修改此值：`set DayNames=/dd/tt/`以便在德语 Windows 中也使用该程序（除了所有使用 DD 作为日部分的语言）。

```
@echo off
setlocal EnableDelayedExpansion

rem GetStdDate.bat: Get date in standard format independently of Regional Settings
rem Antonio Perez Ayala

rem Set Day and Month names shown by second line of DATE command, enclosed in slashes (add any missing language):
set DayNames=/dd/
set MonthNames=/mm/

rem Get date NAMES from second line of date COMMAND, enclosed in parentheses
for /F "skip=1 tokens=2 delims=()" %%n in ('date ^< NUL') do (
   rem Separate and store date names
   for /F "tokens=1-3 delims=/-.:" %%a in ("%%n") do (
      set one=%%a& set two=%%b& set three=%%c
      rem Get date VALUES from %date% VARIABLE
      for /F "tokens=1-3 delims=/-.:" %%x in ("%date%") do (
         rem Assign date values to date names
         set %%a=%%x& set %%b=%%y& set %%c=%%z
      )
   )
)

rem Identify locale date format and assemble StdDate=YYYY/MM/DD
if "!DayNames:/%one%/=!" neq "%DayNames%" (
   rem Locale format is DD/MM/YYYY
   set StdDate=!%three%!/!%two%!/!%one%!
) else if "!MonthNames:/%one%/=!" neq "%MonthNames%" (
   rem Locale format is MM/DD/YYYY
   set StdDate=!%three%!/!%one%!/!%two%!
) else (
   rem Locale format is YYYY/MM/DD
   set StdDate=!%one%!/!%two%!/!%three%!
)

echo Standard date: %StdDate% 
```

# jquery - 带有 DateAxisRenderer 和 ajax 的 jqPlot

> ID：15378723
> 
> 赞同：2
> 
> 时间：2013-03-13T06:49:03.170
> 
> 标签：jquery, jqplot

我在尝试在 jqPlot 图表上结合 DateAxisRenderer 和 ajax 时遇到了困难。下面的代码不会产生任何错误，但它会创建一个没有网格线的图表，y 轴上没有标签，也没有绘制数据点。只有一个空白的白色图表背景，两个 x 轴标签都写着 69 年 12 月 31 日。

如果我换掉 ajaxDataRenderer 并使用数组中的数据，就像在这个例子中所做的那样（[http://www.jqplot.com/tests/date-axes.php](http://www.jqplot.com/tests/date-axes.php)），一切都会正确呈现。

这是我的Javascript：

```
var ajaxDataRenderer = function(url, plot, options) {
   var ret = null;
   $.ajax({
        async: false,
        url: url,
        type: "GET",
        dataType:"json",
        success: function(data) {
            ret = data;
        },
        error:function (xhr, ajaxOptions, thrownError){
            alert(xhr.responseText);
        }
   });
   return ret;
};

var jsonurl = "http://localhost:8080/chartdata";
var plot2 = $.jqplot('chart2', jsonurl, {
    title:'Customized Date Axis',
    dataRenderer: ajaxDataRenderer,
    axes:{
        xaxis:{
           renderer:$.jqplot.DateAxisRenderer,
           tickOptions:{formatString:'%b %#d, %y'}
        }
    }
}); 
```

返回的 JSON`jsonurl`如下所示：

```
[["2008-09-30 4:00PM",15],["2008-10-30 4:00PM",8],["2008-11-30 4:00PM",17],["2008-12-30 4:00PM",10]] 
```

任何想法将不胜感激！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T06:58:23.220

我解决了这个问题。从服务器返回的 JSON 需要包裹在另一组方括号中。

它应该看起来像：

```
[[["2008-09-30 4:00PM",15],["2008-10-30 4:00PM",8],["2008-11-30 4:00PM",17],["2008-12-30 4:00PM",10]]] 
```

# iphone - MFMessageComposeViewController 不是 4 英寸屏幕的全屏

> ID：15378728
> 
> 赞同：0
> 
> 时间：2013-03-13T06:49:21.780
> 
> 标签：iphone, ios, objective-c, fullscreen, messages

我的应用程序使用 MFMessageComposeViewController 发送消息，这是我的代码：

```
MFMessageComposeViewController *controller = [[[MFMessageComposeViewController alloc] init] autorelease];

if([MFMessageComposeViewController canSendText])
{
    controller.body = content;
    controller.recipients = [[NSArray alloc] initWithObjects:nil, nil];
    controller.messageComposeDelegate = self;
    [self presentModalViewController:controller animated:YES];
} 
```

这在 3.5 英寸屏幕上效果很好，但是我在 4 英寸屏幕上遇到问题，键盘不在底部，看起来这个视图仍然用于 3.5 英寸屏幕，在模态视图之后，MessageComposeView 在底部有一个空白区域。

# asp.net - Internet Explorer 每晚构建

> ID：15378730
> 
> 赞同：0
> 
> 时间：2013-03-13T06:49:40.180
> 
> 标签：asp.net, internet-explorer, browser

我可以在哪里下载 IE 的夜间版本？

我搜索了谷歌，一无所获。

如果微软提供夜间/独立构建，那就太好了。

大多数优秀的浏览器，如 Firefox、Chrome、Safari 都提供夜间构建。

IE 有开发版本吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T07:09:46.597

你误会了。

Chrome 不提供夜间构建，尽管他们确实有一个名为 Chromium 的开源项目，它确实提供夜间构建（Chrome 基于 Chromium，但它们并不相同）。

同样，Safari 也不提供夜间构建，尽管他们有一个基于 WebKit 的开源项目。

事实上，唯一提供夜间构建的主要浏览器是 Firefox。许多次要浏览器（通常基于 gecko 或 webkit）也提供夜间构建，但并不是特别重要。

IE、Opera、Chrome、Safari 等仅在开发周期的各个阶段提供开发人员快照。

所以你断言因为 IE 不提供夜间构建它一定是一个坏的浏览器不是一个有效的论点。

编辑：

IE11 还没有任何开发版本，我也不希望至少有一年的时间。微软刚刚正式发布了适用于 Windows 7 的 IE10，并且从 11 月开始就推出了适用于 Windows 8 的 IE10。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T07:47:04.377

没有通用的 IE 开发版本。微软根本不这样做。

他们确实在发布新版本之前提供了 IE 的 beta 版本——对于 IE9 和 IE10，在一般发布之前都有一系列的预发布，但这个过程是由微软精心控制的——只有少数几个预发布；当然不是夜间构建。

主要原因是IE不是开源的。开源浏览器的开发人员有一种文化和更频繁地发布的动机，而每晚构建就是这样的结果。微软的文化和发布策略完全不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-22T11:32:29.350

有 Internet Explorer 11（未正式发布，您可以将其视为夜间构建），但现在它仅在 Windows 8.1 Preview 上。

# android - 如何在小部件开发中更新我的 android 应用小部件列表视图

> ID：15378731
> 
> 赞同：2
> 
> 时间：2013-03-13T06:49:46.620
> 
> 标签：android, android-intent, android-widget, widget

我是 android 应用小部件开发的新手。我想为我的应用程序创建应用程序小部件。

我在我的应用小部件开发中使用了这个 Github 项目。

[https://github.com/commonsguy/cw-advandroid/tree/master/AppWidget/LoremWidget](https://github.com/commonsguy/cw-advandroid/tree/master/AppWidget/LoremWidget)

**要求：**

**1.**我的listview的数据是动态的，意味着数据与我的应用程序数据同步。如果应用程序数据发生变化，则自动小部件数据更新/删除。

我正在搜索很多天，​​但没有得到任何解决方案。

如果有人有解决方案，请提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-04T06:39:32.960

@Harshid This code can help you .Just check it out and try this.

```
package com.automatic.widget;

import android.app.PendingIntent;
import android.appwidget.AppWidgetManager;
import android.appwidget.AppWidgetProvider;
import android.content.ComponentName;
import android.content.Context;
import android.content.Intent;
import android.widget.RemoteViews;

public class Widget extends AppWidgetProvider {

private static final String SYNC_CLICKED    = "automaticWidgetSyncButtonClick";

@Override
public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {
    RemoteViews remoteViews;
    ComponentName watchWidget;

    remoteViews = new RemoteViews(context.getPackageName(), R.layout.widget_layout);
    watchWidget = new ComponentName(context, Widget.class);

    remoteViews.setOnClickPendingIntent(R.id.sync_button, getPendingSelfIntent(context, SYNC_CLICKED));
    appWidgetManager.updateAppWidget(watchWidget, remoteViews);
}

@Override
public void onReceive(Context context, Intent intent) {
    // TODO Auto-generated method stub
    super.onReceive(context, intent);

    if (SYNC_CLICKED.equals(intent.getAction())) {

        AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(context);

        RemoteViews remoteViews;
        ComponentName watchWidget;

        remoteViews = new RemoteViews(context.getPackageName(), R.layout.widget_layout);
        watchWidget = new ComponentName(context, Widget.class);

        remoteViews.setTextViewText(R.id.sync_button, "TESTING");

        appWidgetManager.updateAppWidget(watchWidget, remoteViews);

    }
}

protected PendingIntent getPendingSelfIntent(Context context, String action) {
    Intent intent = new Intent(context, getClass());
    intent.setAction(action);
    return PendingIntent.getBroadcast(context, 0, intent, 0);
}
} 
```

# java - Hibernate OneTOMany 映射错误

> ID：15378733
> 
> 赞同：0
> 
> 时间：2013-03-13T06:50:00.940
> 
> 标签：java, hibernate, jpa

我有 2 个名为 Enquiry.java 和 EnquiryItem.java 的类

当生成 enuiry 时，我将其项目保存在 EnquiryItems 中。

下面是我在 POJO 类中的映射文件。

查询.java

```
@OneToMany(fetch=FetchType.LAZY,cascade = CascadeType.ALL,mappedBy="enquiryId")
@JoinColumn(name = "enq_id",  referencedColumnName = "id")
private List<EnquiryItem> enquiryItems=new ArrayList<EnquiryItem>(); 
```

查询项目.java

```
@ManyToOne
@JoinColumn(name="enq_id")
private Enquiry enquiryId; 
```

我无法找到我做错的地方。请帮我。

编辑：保存查询时，enquiry_id 在数据库中保存空值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T07:00:57.377

问题是您需要在将其保存到数据库之前设置 enquiryId。这是必需的，因为您使用了 mappedBy 属性。你需要做的是。

当您将 EnquiryItem 对象添加到列表时，请通过调用它的 setter 方法来设置 enquiryId。编辑：

如下所示：

```
EnquiryItem.setEnquiryId(enquiry ) 
```

编辑2：

```
Enquiry enquiry= new Enquiry(bus,prListNo,enquiryNo,user,new java.util.Date(),enquiryItemsList); 
for(EnquiryItem item:enquiryItemsList)
 item.setEnquiryId(enquiry); 
```

# java - 从 Java 列表中随机选择 []

> ID：15378735
> 
> 赞同：0
> 
> 时间：2013-03-13T06:50:12.037
> 
> 标签：java, arrays, list, random

我有一个我在方法中使用的 14 个项目的列表。我想知道如何从列表中随机选择不同的项目，而不是通过列表编号 [0] 等强制选择。方法中的代码是这样的。

```
stats.list[0].clone (); 
```

我需要它像..

```
stats.list[RANDOMNUMBER/DECISION].clone (); 
```

我的列表代码就像

```
 list [0]  = new Ped (names.getString("idc"), "C");
 list [1]  = new Ped (names.getString("id"), "D"); 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T06:53:44.327

```
Random r = new Random();
int randomNum = r.nextInt(sizeOfList);
stats.list[randomNum].clone (); 
```

使用随机类。

# android - 仅按钮左侧的边框

> ID：15378740
> 
> 赞同：5
> 
> 时间：2013-03-13T06:50:42.223
> 
> 标签：android, button, styles, border

这是我的 button_style.xml，我将其包含在我的按钮中。但是，我似乎仍然无法获得左侧的边框。任何人都可以在这里帮助我吗？

ps - 我的背景应该是透明的

```
<?xml version="1.0" encoding="utf-8"?>
<selector  xmlns:android="http://schemas.android.com/apk/res/android" >
    <layer-list>
            <item android:left="2dp">
                <shape android:shape="rectangle"> 
                    <stroke
                        android:width="1dp"
                        android:color="#999999"/>
                </shape>
        </item>
    </layer-list>

</selector> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-12-27T15:19:39.717

Try this

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >

    <item>
        <shape android:shape="rectangle" >
            <solid android:color="@android:color/transparent" />
        </shape>
    </item>
    <item
        android:bottom="-2dp"
        android:right="-2dp"
        android:top="-2dp">
        <shape>
            <solid android:color="@android:color/transparent" />

            <stroke
                android:width="2dp"
                android:color="#FFF" />
        </shape>
    </item>

</layer-list> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-10-13T12:53:41.957

按钮的边框存在一些继承问题。但我找到了最好的方法。假设您只想要按钮左侧的边框。在放置按钮的 MainActivity xml 文件中这样做 -

```
 <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/newstyle"
        android:orientation="vertical" >

                <Button
                    android:id="@+id/button3"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:background="@null"
                    android:gravity="center_vertical"
                    android:paddingLeft="10sp"
                    android:text="Button"
                    android:textAllCaps="false"
                    android:textColor="#939393"
                    android:textSize="20sp" />
   </LinearLayout> 
```

对于将位于可绘制对象中的 newstyle.xml 文件，请使用以下代码 -

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >

    <item
        android:bottom="0sp"
        android:left="-2sp"
        android:right="-2sp"
        android:top="-2sp">
        <shape android:shape="rectangle" >
            <solid android:color="#ffffff" />

            <stroke
                android:width="1sp"
                android:color="#d6d6d6" />
        </shape>
    </item>
</layer-list> 
```

**所以整个想法是 -** 将按钮的背景保持为@null，并将按钮保持在 linera 布局中。为衬里布局提供背景，瞧，它完成了..:)..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-07T06:49:45.667

尝试这个

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item>
       <shape>
           <padding android:left="1dp" />
           <solid android:color="#999999" />
       </shape>
   </item>
 <item>
    <shape android:shape="rectangle">
           <solid android:color="@android:color/transparent" />
    </shape>
  </item>
</layer-list> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T06:58:57.733

```
 <?xml version="1.0" encoding="utf-8"?>
<selector  xmlns:android="http://schemas.android.com/apk/res/android" >
    <layer-list>
            <item android:left="2dp"
                  android:right="0dp"
                  android:top="0dp"
                  android:bottom="0dp"
                  >
                <shape android:shape="rectangle"> 
                    <stroke
                        android:width="1dp"
                        android:color="#999999"/>
                </shape>
        </item>
    </layer-list>

</selector> 
```

试试这个可能有用

# c# - c# - 如何使用linq从c#中的xml元素添加自定义属性值？

> ID：15378742
> 
> 赞同：0
> 
> 时间：2013-03-13T06:50:57.223
> 
> 标签：c#, .net, visual-studio-2010, linq, linq-to-xml

嗨，我有一个 xml 文档

```
<task>
<directory path="C:\Backup\"/>
<days value="2" />
</task> 
```

我想在 c# 中使用 linq 获取目录的路径和天值，我该如何实现呢？

```
The output should be 
C:\Backup\ and 2 
```

到目前为止，我已经尝试过类似下面的 xdocument 是我的 xml 文件的路径，它工作正常

```
 var directory = xdocument.Descendants("task")
                              .Elements("directory")
                              .Attributes("path"); 
```

但这部分不起作用。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T06:53:27.613

检查这个，因为`Descendants()`并`Elements()`返回`IEnumerable`结果

```
var directory = xdocument.Descendants("task").First().
                              .Elements("directory").First().
                              .Attribute("path").Value; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T07:04:16.107

你可以试试这个：

```
var directory = xdoc.DescendantsAndSelf("task") 
                  .Select(c => new 
                  {
                    Path = c.Elements("directory").Attributes("path").First().Value,
                    Day = c.Elements("days").Attributes("value").First().Value,
                  }); 
```

或者如果你想要一个字符串：

```
var directory = xdoc.DescendantsAndSelf("task") 
                  .Select(c => new 
                  {
                    Complete = c.Elements("directory").Attributes("path").First().Value +
                    c.Elements("days").Attributes("value").First().Value
                  }); 
```

**编辑** 你可以像这样遍历它们：

```
foreach(var item in directory)
{
   Console.WriteLine(item.Path+ " + item.Day);
} 
```

# css - 谷歌浏览器无法正确呈现页面

> ID：15378745
> 
> 赞同：2
> 
> 时间：2013-03-13T06:51:09.853
> 
> 标签：css, google-chrome, rendering

这是链接 [http://demo.elxer.com/new_eco/](http://demo.elxer.com/new_eco/)

谷歌浏览器中的标题（页面的菜单和徽标部分在滚动时无法正确重新构建）......它与其他浏览器和一些谷歌浏览器版本一起工作正常我目前正在使用谷歌浏览器版本版本 25.0.1364.152 m，请帮助。可能是一些 css 问题，也可能是 jquery 或浏览器渲染问题，我尝试了很多搜索但找不到任何答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T07:04:02.857

恐怕你无能为力。有时唯一帮助我的是强制使用 3D 模式

```
-webkit-transform: translate3d(0, 0, 0); 
```

我试图将其设置为您的 div 下`#overlay`：

```
<div style="position: relative; top: 0px; min-width: 1150px; max-width: 1280px; height: 4245px; overflow: hidden; margin:0 auto; -webkit-transform: translate3d(0, 0, 0);"> 
```

这对我有用，但带来了另一个宽度问题。也许这更容易解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T07:42:04.053

它对我有用，谢谢，只需添加 `-webkit-transform: translate3d(0, 0, 0);`到`div#overlay`. 实际上`div#overlay`是罪魁祸首，但可惜它与标题的任何部分无关。我让它由谷歌团队检查。

**检查此工作链接** [http://demo.elxer.com/eco_new/](http://demo.elxer.com/eco_new/)

很抱歉使用您的代码并复制它。邻居 ：）

# jquery - JQuery 无法呈现到页面，但没有错误

> ID：15378753
> 
> 赞同：0
> 
> 时间：2013-03-13T06:51:46.543
> 
> 标签：jquery

我正在使用 JQuery 来修改和替换以下 HTML

```
<div class="weather-feed">
    <img src="http://l.yimg.com/a/i/us/we/52/32.gif"/><br />
    <b>Current Conditions:</b><br />
    Sunny, 17 C<BR />
    <BR /><b>Forecast:</b><BR />
    Wed - Mostly Sunny. High: 27 Low: 14<br />
    Thu - Mostly Sunny. High: 25 Low: 14<br />
    Fri - Partly Cloudy. High: 26 Low: 15<br />
    Sat - Partly Cloudy. High: 27 Low: 17<br />
    Sun - Partly Cloudy. High: 28 Low: 17<br />
    <br />
    <a href="http://us.rd.yahoo.com/dailynews/rss/weather/Pretoria__SF/*http://weather.yahoo.com/forecast/SFXX0044_c.html">Full Forecast at Yahoo! Weather</a><BR/><BR/>
    (provided by <a href="http://www.weather.com" >The Weather Channel</a>)<br/>
</div> 
```

此代码通过 PHP 会话检索到页面（特别是 div 中）。div 只是用来帮助选择（以及稍后的样式）。

因为很多这些 HTML 没有任何可识别的容器，所以我使用正则表达式来隔离某些文本（例如天气状况和预报）：

```
$(document).ready(function() {
    var src = $(".weather-feed");

    // remove line feeds
    src.find("br").remove();

    // get weather conditions    
    var result = "<div class=\"weather-conditions\">";
    result += src.html().match(/<\/b>([^<]*)<b>/)[1].trim();
    result += "</div>";

    // get weather icon
    result += "<div class=\"weather-icon\"><img src=\"" + src.find("img").attr("src") + "\" /><span><?php echo($city); ?></span></div>";

    // more button
    result += "<div class=\"weather-more-button\">+</div>";

    // get weather forecast
    result += "<div class=\"weather-extra\">";
    result += "<div class=\"weather-forecast\">";
    result += src.html().match(/<\/b>([^<]*)<a/)[1].trim().replace("\n", "<br />");
    result += "</div>"; 

    // get addition forecast link
    result += "<div class=\"weather-detail\">";
    result += $("<div/>").html(src.find('a').first()).html();
    result += "</div></div>";

    console.log(result);

    // write new code to page           
    src.empty();
    src.append(result);
}); 
```

不幸的是，虽然 jquery 没有产生错误并`result`正确记录（见下文）到控制台，但新代码并未呈现到页面。我所看到的仍然是 PHP 返回的原始代码。

```
<div class="weather-conditions">
    Sunny, 17 C
</div>
<div class="weather-icon">
    <img src="http://l.yimg.com/a/i/us/we/52/32.gif" />
    <span>Pretoria</span>
</div>
<div class="weather-more-button">+</div>
<div class="weather-extra">
    <div class="weather-forecast">
        Wed - Mostly Sunny. High: 27 Low: 14<br />
        Thu - Mostly Sunny. High: 25 Low: 14
        Fri - Partly Cloudy. High: 26 Low: 15
        Sat - Partly Cloudy. High: 27 Low: 17
        Sun - Partly Cloudy. High: 28 Low: 17
    </div>
    <div class="weather-detail">
        <a href="http://us.rd.yahoo.com/dailynews/rss/weather/Pretoria__SF/*http://weather.yahoo.com/forecast/SFXX0044_c.html">Full Forecast at Yahoo! Weather</a>
    </div>
</div> 
```

此外（我认为这很有可能是相关的），在天气预报部分下替换`\n`with并不能超过第一场比赛，我不知道为什么会这样。`<br />`

如果有人能以任何方式在这里提供帮助，我将不胜感激。

这是一个小提琴，所以你可以看到发生了什么：http: [//jsfiddle.net/4UyAj/](http://jsfiddle.net/4UyAj/)

# android - 使用 google map api v2 后，Google Places api 不起作用

> ID：15378756
> 
> 赞同：1
> 
> 时间：2013-03-13T06:51:59.803
> 
> 标签：android, google-maps-api-2

由于谷歌已经更新了它的地图 API，我已经实现了这个新的谷歌地图 API V2。我的地图出现在我的应用程序中，但地点未显示在我的安卓地图上。当我调试我的代码时，在我的代码中的某一时刻，它对地方 api 说“访问被拒绝”。我在地方 api 代码中使用了我的新地图 api 密钥。

任何人都可以在这方面指导我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T08:45:53.907

我刚刚查看了我的代码并发现了以下内容：

我为 Google Places 通话使用了不同的密钥。它**不是**Google Maps 键。在“API 访问”页面上的 Google API 控制台中，它被称为

> 浏览器应用程序的密钥（带有引用者）

我将此密钥附加到我的 Places API 调用的 URL。这些调用是通过 HTTP 完成的。我不确定是否有不同的方式来获得这些地方。

尝试生成这种密钥并将其用于您的应用程序。

# c# - 无法打印文档

> ID：15378757
> 
> 赞同：0
> 
> 时间：2013-03-13T06:52:07.957
> 
> 标签：c#, printing

我使用的一种方法：

```
 PrintDocument doc = new PrintDocument();
                doc.PrinterSettings.PrinterName = "printername";

                string[] files = Directory.GetFiles("D:\\Invoice");
                foreach (string file in files)
                {
                    string fname = Path.GetFileName(file);
                    doc.DocumentName = fname;
                    doc.Print();
                    Console.WriteLine(file);
                } 
```

这在 doc.Print() 行上给出了一个例外。

> “访问打印机 'printername' 的设置无效。”

我使用的另一种方法：

```
 Process printJob = new Process();
                printJob.StartInfo.FileName = @"C:\Program Files (x86)\Adobe\Reader 10.0\Reader\AcroRD32.exe";
                printJob.StartInfo.UseShellExecute = false;
                printJob.StartInfo.Verb = "Print";
                printJob.StartInfo.CreateNoWindow = true;
                printJob.StartInfo.WindowStyle = ProcessWindowStyle.Hidden;
                printJob.StartInfo.Arguments = "\"" + printerAddress + "\"";
                string[] files = Directory.GetFiles("D:\\Invoice");
                foreach (string file in files)
                {
                    string fname = Path.GetFileName(file);
                    printJob.StartInfo.WorkingDirectory = Path.GetDirectoryName(fname);
                     printJob.Start();

                    //Console.WriteLine(fname);
                } 
```

这会在 printJob.Start() 之后出现错误。由于它是 pdf 文件，它会打开 Adob​​e 阅读器并在那里显示错误消息。它如何解释。

> “打开文档时出错。找不到文件。”

谁能帮我解决这些问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T07:09:18.763

在第二个片段中，这似乎是错误的：

```
string fname = Path.GetFileName(file);
printJob.StartInfo.WorkingDirectory = Path.GetDirectoryName(fname);
printJob.Start(); 
```

你刚刚设置`WorkingDirectory`。如何`printJob`获得实际的文件名？

* * *

在第一个片段中，您可能没有设置所有内容。你检查[过 MSDN 文档](http://msdn.microsoft.com/en-us/library/system.drawing.printing.printdocument.printersettings.aspx?cs-lang=csharp)吗？在向 SO 提问之前，尝试查找、阅读并尝试理解文档通常是一个好主意……

# jquery - 如何在 jquery 中为旋钮对象指定边框属性？

> ID：15378758
> 
> 赞同：0
> 
> 时间：2013-03-13T06:52:09.523
> 
> 标签：jquery, jquery-ui, jquery-knob

我有这个代码片段来扩展我的旋钮属性......

```
 thickness : this.$.data('thickness') || 0.29,
                width : this.$.data('width') || 70,
                height : this.$.data('height') || 70, 
```

如何包含边框属性说，边框= 1px 实心#000; .... 这里

# php - Magento 数量问题

> ID：15378760
> 
> 赞同：0
> 
> 时间：2013-03-13T06:52:13.777
> 
> 标签：php, magento

当我们更新产品属性所有简单的产品数量1000并配置产品数量0。是否有可能恢复旧数量

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T07:42:11.153

这是在数据库中更新的，因此您可以与您的托管公司联系以进行备份，许多托管公司都有此选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T06:54:49.467

仅当您在更改之前备份了数据库。

# sql - 如何将表从转储恢复到数据库？

> ID：15378761
> 
> 赞同：3
> 
> 时间：2013-03-13T06:52:23.370
> 
> 标签：sql, postgresql

我使用 pg_dump 创建了一个表转储：

```
pg_dump -h server1 -U postgres -t np_points gisurfo > D:\np_point.sql 
```

在我进入 psql 并说：

```
-f D:\np_point.sql 
```

但是获取标准 PostgreSQL 表的列表。

接下来我尝试在 pgAdmin 中执行 np_point.sql 并得到错误：

```
ERROR:  Syntax error (near: "1")
LINE 78: 1 Сухово 75244822005 75644000 Челябинская обл. Нязепетровски... 
```

我得到错误的这个 sql 的片段：

```
COPY np_point (gid, full_name, okato, oktmo, obl_name, region_nam, the_geom) FROM stdin;
1   Сухово  75244822005 75644000    Челябинская обл.    Нязепетровский район    0101000020E6100000312A7936BD9F4D402A3C580DE9FF4B40 
```

如何从 sql 文件中恢复表？

**更新**

PostgreSQL 8.4

以及 sql 文件的第一部分。

```
PostgreSQL database dump

SET statement_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = off;
SET check_function_bodies = false;
SET client_min_messages = warning;
SET escape_string_warning = off;

SET search_path = public, pg_catalog;

SET default_tablespace = '';

SET default_with_oids = false;

--
-- Name: np_point; Type: TABLE; Schema: public; Owner: postgres; Tablespace: 
 --

CREATE TABLE np_point (
gid integer NOT NULL,
full_name character varying(254),
okato character varying(254),
oktmo character varying(254),
obl_name character varying(254),
region_nam character varying(254),
the_geom geometry,
CONSTRAINT enforce_dims_the_geom CHECK ((st_ndims(the_geom) = 2)),
CONSTRAINT enforce_geotype_the_geom CHECK (((geometrytype(the_geom) = 'POINT'::text) OR (the_geom IS NULL))),
CONSTRAINT enforce_srid_the_geom CHECK ((st_srid(the_geom) = 4326))
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T07:42:05.213

您是否在目的地数据库中安装了 posgis？如果没有，先安装postgis。</p>

如果你安装了 postgis 仍然有问题，尝试转储一个没有几何文件的表并在另一个数据库中恢复它，看看问题是否仍然出现。

# asp.net-mvc - 绑定多个模型asp,net mvc

> ID：15378767
> 
> 赞同：-2
> 
> 时间：2013-03-13T06:53:14.967
> 
> 标签：asp.net-mvc

我有一个模型，其中有多个其他模型。

```
public class mainmodel
{
 public entity1 ();
 public entity2 ();
} 
```

发布视图后，我得到 entity1 实体为空？运气好的话。我做错了吗？我的问题是：[在一个视图中使用 MVC 多个模型的 Asp.net（创建、更新）](https://stackoverflow.com/questions/5267152/asp-net-with-mvc-multiple-model-in-one-view-create-update) 如何在模型中获取这些类实体？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T08:08:31.607

视图模型（索引视图模型）：

```
public class IndexViewModel
{
   public mainmodel model1 {get;set;}
   public anotherclass model2 {get;set;}
} 
```

控制器（家庭控制器）：

```
public ActionResult Index()
 {
    IndexViewModel model=new IndexViewModel();
    return View(model);
 }

[HttpPost]
public ActionResult Index(IndexViewModel model)
 {
    return View(model);
 } 
```

查看（首页/索引）：

```
@model IndexViewModel
@using (Html.BeginForm("Index","Home",FormMethod.Post))
{
  <input type="submit" value="Submit" />
} 
```

现在您可以获取 HttpPost 中的所有值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T07:05:52.540

控制器（家庭控制器）：

```
public ActionResult Index()
    {
        mainmodel model=new mainmodel();
        return View(model);
    }

[HttpPost]
public ActionResult Index(mainmodel model)
    {
        return View(model);
    } 
```

查看（首页/索引）：

```
@model mainmodel
@using (Html.BeginForm("Index","Home",FormMethod.Post))
 {
   <input type="submit" value="Submit" />
 } 
```

# c# - 'ref' 属性不能存在。C#中的验证错误

> ID：15378774
> 
> 赞同：3
> 
> 时间：2013-03-13T06:53:29.810
> 
> 标签：c#, .net, xml, xsd, xsd-validation

我根据以下方法做了一些 xml Xsd 验证： [Xml validation using XSD schema](https://stackoverflow.com/questions/572853/xml-validation-using-xsd-schema)

```
 .......................................................
 XmlReaderSettings settings = new XmlReaderSettings();
 settings.Schemas.Add(null, xsdFilePath);
 settings.ValidationType = ValidationType.Schema;
 settings.ValidationEventHandler += new System.Xml.Schema.ValidationEventHandler(settings_ValidationEventHandler);
 XmlDocument document = new XmlDocument();
 document.Load(xmlFilePath);
 XmlReader rdr = XmlReader.Create(new StringReader(document.InnerXml), settings);

 while (rdr.Read())
 {

 }
 ........................................................... 
```

它给了我错误消息：“'ref'属性不能存在”

我的 XSD 看起来像：

```
...........
<xs:element name="totals" minOccurs="0" ref="DocTotal"/>
..................................

<xs:element name="DocTotal">
    <xs:complexType>
        <xs:sequence>
            <xs:element name="totalQty" minOccurs="0" type="xs:decimal"/>
            <xs:element name="totalTax" minOccurs="0" type="xs:decimal"/>
        </xs:sequence>
        <xs:attribute name="id" type="xs:string" use="required"/>
    </xs:complexType>
</xs:element> 
```

我的 xml 看起来像：

```
<totals>
    <totalQty>800</totalQty>
    <totalTax>0.00<totalTax>
</totals> 
```

我相信这个错误的发生是因为**“名称”**和**“参考”**：属性存在于相同的元素中：但是我认为这在 XSD 中并没有错（感谢您对此的评论）：在这种情况下，有什么方法可以验证这一点带有 xml 的 XSD：

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T07:43:34.523

在我看来，它`DocTotal`应该是一个类型，而不是一个元素：

```
<xs:element name="totals" minOccurs="0" type="DocTotal"/>
..................................

<xs:complexType name="DocTotal">
    <xs:sequence>
      <xs:element name="totalQty" minOccurs="0" type="xs:decimal"/>
      <xs:element name="totalTax" minOccurs="0" type="xs:decimal"/>
    </xs:sequence>
    <xs:attribute name="id" type="xs:string" use="required"/>
</xs:complexType> 
```

如果你想在某处定义一个元素的*结构*（但不是它的名字），并在其他地方引用它，它应该是一个类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T11:52:08.133

您的架构无效，因为`ref`顶级元素声明中不允许使用属性。

这至少可以在模式的模式中看到，这是 W3C XML 模式推荐的规范部分。[http://www.w3.org/TR/xmlschema-1/#normative-schemaSchema](http://www.w3.org/TR/xmlschema-1/#normative-schemaSchema)

该`ref`属性用于引用全局（=在顶层定义）元素、类型、属性、组等。如果要全局定义两个具有相同类型但名称不同的元素，您可以声明一个全局（命名）类型，然后在元素声明中引用该类型。这是通过使用`type`属性来完成的，就像@Damien_The_Unbeliever 在他们的回答中所做的那样。

# video - Raspberry Pi 的 Gstreamer 视频接收器

> ID：15378776
> 
> 赞同：4
> 
> 时间：2013-03-13T06:53:34.923
> 
> 标签：video, gstreamer, raspberry-pi, openmax

我正在使用安装了 gstreamer 1.0 的 Raspberry pi 开发板。我正在板上测试一些管道。但在 Raspberry pi 中，视频接收器无法正常工作。我尝试了不同的视频接收器，例如`ximagesink, xvimagesink, autovideosink etc`

但是这些视频接收器都不能播放视频。

我得到的错误是

```
ERROR: from element /GstPipeline:pipeline0/GstXvImageSink:xvimagesink0: Could not initialise Xv output
Additional debug info:
xvimagesink.c(1290): gst_xvimagesink_xcontext_get (): /GstPipeline:pipeline0/GstXvImageSink:xvimagesink0: 
```

是否有任何其他可以与 Raspberry pi 一起使用的视频接收器，以便我可以使用 gstreamer 查看视频？

是否有专门为 Broadcom 2835 制作的视频接收器或 openmax 是否提供任何视频接收器？

有没有人知道解决这个 XvOutput 问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T18:49:04.733

该错误消息向我暗示未安装 Xv 库。我不确定您在 Raspberry Pi 上运行的是哪种类型的发行版，但如果它是 Debian/Ubuntu 类型的发行版，Xv 的软件包名称似乎是“libxv1”。

但是，您表示 ximagesink 不起作用。我希望 ximagesink 能够工作，只要有 X 服务器在运行。X 服务器是否正在运行？

另外，运行'gst-inspect | grep sink' 以查找所有已安装的接收器（至少，所有在元素名称中带有“sink”的 GStreamer 元素）。

# html - 与 iframe jquery 事件中的其他页面相同的 iframe 加载

> ID：15378786
> 
> 赞同：0
> 
> 时间：2013-03-13T06:54:04.770
> 
> 标签：html, jsp, iframe, jquery

```
 <iframe id="iframe"  style=" width:100%; height:500px" src="other.jsp"  frameborder="0"  name="myone">
<html>
<head>
<script>
 $(function() {
                    $("#adduser1").click(function() {    
                        alert("hiiii");                 
                        $('#iframe').attr('src', 'adduser.jsp');
                    }); 
                });
</script>
</head>
<body>
            <input type="button" name="AddUser" id="adduser1" value="AddUser"/> 
</body>
</html>   
    </iframe> 
```

在这里，我想在触发相同 iframe 的内部事件时与其他 jsp adduser.jsp 加载相同的 iframe（它已经加载了 other.jsp），它的警报使用“hiiii”但不加载 jsp 页面

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T07:08:46.337

你不应该使用

```
$('#iframe').attr('src', 'adduser.jsp'); 
```

在自我 iframe 中。采用

```
window.location = 'adduser.jsp' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T07:39:09.673

查看您的代码，它应该可以工作并且对我有用。

约束可能是文件的路径。如果不是这样。

请尝试重新加载您的 iframe。

```
//Reload iframe
$('#iframe').attr('src', $('#iframe').attr('src')); 
```

试试这个......这可能对你有帮助！

[**演示...**](http://jsfiddle.net/Dwzc9/63/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T09:33:12.170

您正在尝试从本身位于 iframe 内部的按钮加载 iframe，它永远不会那样工作。你应该使用`window.location`这个

```
$(function() {
    $("#adduser1").click(function() {    

        window.location = 'adduser.jsp'
    }); 
}); 
```

希望这可以帮助 ：）

# elasticsearch - elasticsearch custom_score 乘法不准确

> ID：15378787
> 
> 赞同：0
> 
> 时间：2013-03-13T06:54:07.300
> 
> 标签：elasticsearch

我插入了一些文档，除了一个名为`a`.

当查询`script`的`custom_score`设置为 just`_score`时，匹配某些字段的特定查询的结果分数为 0.40464813。对于同一个查询，当然后更改为 (mvel)，其中为`script`9.908349251612433 ，最终得分变为 4.0619955。`_score * a``a`

现在，如果我通过 Chrome 的 JS 控制台运行这个计算，我得到 4.009394996051871。

*   4.0619955（弹性搜索）
*   4.009394996051871（铬）

这是一个很大的差异，并且会产生不正确的结果排序。为什么会这样，有没有办法纠正它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:56:57.330

如果我使用您提供的数字运行一个简单的计算，那么我会得到您期望的结果。

```
curl -XPOST 'http://127.0.0.1:9200/test/test?pretty=1'  -d '
{
   "a" : 9.90834925161243
}
'

curl -XGET 'http://127.0.0.1:9200/test/test/_search?pretty=1'  -d '
{
   "query" : {
      "custom_score" : {
         "script" : "0.40464813 *doc[\u0027a\u0027].value",
         "query" : {
            "match_all" : {}
         }
      }
   }
}
'

# {
#    "hits" : {
#       "hits" : [
#          {
#             "_source" : {
#                "a" : 9.90834925161243
#             },
#             "_score" : 4.009395,
#             "_index" : "test",
#             "_id" : "lPesz0j6RT-Xt76aATcFOw",
#             "_type" : "test"
#          }
#       ],
#       "max_score" : 4.009395,
#       "total" : 1
#    },
#    "timed_out" : false,
#    "_shards" : {
#       "failed" : 0,
#       "successful" : 5,
#       "total" : 5
#    },
#    "took" : 1
# } 
```

我认为您在这里遇到的是跨多个分片测试的数据太少。

默认情况下，按分片计算文档频率。因此，如果您在 shard_1 上有两个相同的文档，在 shard_2 上有一个文档，那么 shard_1 上的文档得分将低于 shard_2 上的文档。

随着更多的数据，文档频率往往会超过分片。但是在测试少量数据时，您要么想创建一个只有一个分片的索引，要么添加`search_type=dfs_query_then_fetch`到查询字符串参数中。

这会在计算分数之前计算所有相关分片的全局文档频率。

如果您在查询中设置`explain`为`true`，那么您可以准确地看到您的分数是如何计算的

# ios - 我如何在同一个 xib 中使用自定义 UITableViewCell 和 UITableView

> ID：15378788
> 
> 赞同：4
> 
> 时间：2013-03-13T06:54:15.697
> 
> 标签：ios, uitableview

我想在同一个 xib 中使用自定义 UITableviewCell 和 UITableView 而不创建 UITableViewCell 类？

正如您在下面看到的，我为 UITableViewCell 设置了标识符并像这样使用它：

![UITableView 和 UITableViewCell 在同一个 xib](../Images/2809475008f02f3362b309db59ab8d0c.png)

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
  {
    static NSString *CellIdentifier = @"CustomIdentifier";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
  }

} 
```

但不工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T07:18:55.350

将 UITableViewCell *customCell 属性添加到您的视图控制器（例如，您的文件 ShowUsers.h）...

```
@property (nonatomic, strong) IBOutlet UITableViewCell *customCell; 
```

并将其连接到您的 xib 中的自定义单元格。然后在 cellForRow 中使用以下代码（例如，您的文件 ShowUsers.m）：

```
if (cell == nil) {
    [[NSBundle mainBundle] loadNibNamed:@"NibName" owner:self options:nil];
    cell = self.customCell;
    self.customCell = nil;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T07:08:55.513

是的，您可以按照以下代码进行操作

在 ViewDidLoad 或 ViewWillAppear 下

```
label1Array=[NSMutableArray arrayWithObjects:@"A",@"B",nil];
label2Array=[NSMutableArray arrayWithObjects:@"C",@"D",nil];
label3Array=[NSMutableArray arrayWithObjects:@"E",@"F",nil]; 
```

UITableViewDelegate

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

static NSString *CellIdentifier = @"aCell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil) {
cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
UILabel *label1=[[UILabel alloc]init];
label1.frame=CGRectMake(0,0,40,40);
label1.text=[label1Array objectAtIndex:indexPath.row];
................
[cell.contentView addSubView: label1];

UILabel *label2=[[UILabel alloc]init];
label2.frame=CGRectMake(50,0,40,40);
label2.text=[label2Array objectAtIndex:indexPath.row];
[cell.contentView addSubView: label2];

UILabel *label3=[[UILabel alloc]init];
label3.frame=CGRectMake(100,0,40,40);
label3.text=[label3Array objectAtIndex:indexPath.row];
[cell.contentView addSubView: label3];
} 
```

希望这可以帮助 ！！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T08:08:42.667

看..你可以这样做。在这里，您使用 XIB 在一个 TableView 中添加两个 UITableViewCell。

在 Class.h 文件中：-

为单元数声明一个可变数组。

```
 {
         NSMutableArray * sectionRows;
      }

    @property (nonatomic,retain) IBOutlet UITableViewCell *addTvc1;
    @property (nonatomic,retain) IBOutlet UITableViewCell *addTvc2; 
```

在 Class.m 中：-

```
 @synthesize addTvc1, addTvc2;

    - (void)viewDidLoad
      {
        [super viewDidLoad];

         sectionRows = [[NSMutableArray alloc] init];

         [sectionRows addObject:[[NSMutableArray alloc] 
                        initWithObjects:addTvc1, nil]];

         [sectionRows addObject:[[NSMutableArray alloc] 
                        initWithObjects:addTvc2, nil]];

     } 
```

在 UITableViewDelegate 方法中 -

添加这个 -

```
 - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
    {
       return [sectionRows count];
    }

   - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:       
                                                      (NSInteger)section
   { 
      return [[sectionRows objectAtIndex:section] count];
   }

   - (UITableViewCell*)tableView:(UITableView *)tableView cellForRowAtIndexPath:
                                                      (NSIndexPath  *)indexPath
  { 
      return [[sectionRows objectAtIndex:indexPath.section] 
                               objectAtIndex:indexPath.row];
  } 
```

连同代码一起，在 Class 的 XIB 中拖放两个 UITableViewCell，它们应该在视图之外，并使用 Files Owner 添加这些单元格。它将完美地工作。这里不需要创建一个单独的自定义 UITableViewCell 类。

# bash - 从 bash 脚本中启动的命令中检索错误代码

> ID：15378789
> 
> 赞同：0
> 
> 时间：2013-03-13T06:54:19.227
> 
> 标签：bash, error-handling

好的，我对 bash 脚本编写 [高级的东西] 有点陌生，我需要一点帮助。我什至不知道如何准确表达这一点，所以我只会解释我在做什么以及我需要了解的内容。在我的脚本中，我运行 ./configure 并且我需要能够捕获配置中是否存在错误并在 bash 脚本中做出相应的反应。

代码是：

```
function dobuild {
echo -e "\e[1;35;40mExecuting Bootstrap and Configure\e[0m"
cd /devel/xbmc
if [ $Debug = "1" ];
then
#either outputs to screen or nulls output
./bootstrap >/dev/null
/usr/bin/auto-apt run ./configure --prefix=/usr --enable-gl --enable-vdpau --enable-crystalhd --enable-rtmp --enable-libbluray  >/dev/null
else
./bootstrap
/usr/bin/auto-apt run ./configure --prefix=/usr --enable-gl --enable-vdpau --enable-crystalhd --enable-rtmp --enable-libbluray
fi
} 
```

并说配置返回错误 1 ​​或 2 我如何捕获并采取行动？

TIA

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T08:58:51.147

在执行每个 shell 命令后，它的返回值是一个介于 0 和 255 之间的数字，可在 shell 变量中使用`?`。您可以通过在该变量前面加上运算符来获取该变量的值`$`。

你必须小心一点`?`，因为它会被每个命令重置，**甚至是测试**。例如：

```
some_command
if (( $? != 0 ))
then
   echo "Error detected! $?" >&2
fi 
```

给出：`Error detected! 0`因为`?`被测试条件重置。`?`如果您以后要使用它，最好将它存储在另一个变量中，*其中包括对其进行多次测试*。

要在 bash 中进行数字测试，请使用`(( ... ))`数字测试结构：

```
some_command
result=$?
if (( $result == 0 ))
then
   echo "it worked!"
elif (( $result == 1 ))
then
    echo "Error 1 detected!" >&2
elif (( $result == 2 ))
then
    echo "Error 2 detected!" >&2
else
    echo "Some other error was detected: $result" >&2
fi 
```

或者使用`case`语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T06:57:43.037

命令执行后，返回值存储在 shell 变量 $? 中。所以你必须将它与成功和失败的返回值相匹配

```
if [ $? == 1 ]
then
    #do something
else
    #do something else
fi 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T14:51:42.947

关于$的其他答案？很棒（尽管要小心假设 0 和非 0 以外的值 - 不同的命令。或者同一命令的不同版本可能会因不同的值而失败），但如果您只需要立即对成功或失败采取行动，您可以简化事物：

```
if command ; then
    # success code here
else
    # failure code here
fi 
```

或者，如果您只想对失败采取行动，这里有一个针对旧 shell 的 hack（冒号是一个空命令，但它满足 then 子句）：

```
if command ; then : 
else
    # failure code here
fi 
```

但在像 bash 这样的现代 shell 中，这更好：

```
if ! command ; then   # use the ! (not) operator 
    # failure code here
fi 
```

而且，如果您只需要做一些简单的事情，您可以使用“短路”运算符：

```
 command1 && command2_if_command1_succeeds
   command1 || command2_if_command1_fails 
```

那些只适用于单个命令，字符串更多 && 和 || 在大多数情况下，它们不会像你想象的那样做，所以大多数人都会避免这种情况。但是，如果将它们分组，则可以执行多个命令：

```
 command1 && { command2; command3; command4; } 
```

这可能很难阅读，因此如果您全部使用它，最好保持简单：

```
 command1 || { echo "Error, command1 failed!" >&2; exit 1; } 
```

# java - libgdx 纹理过滤器和 mipmap

> ID：15378791
> 
> 赞同：9
> 
> 时间：2013-03-13T06:54:35.617
> 
> 标签：java, textures, libgdx, mipmaps

当我尝试在 LibGDX 中使用 mipmap 过滤时，没有图像出现。

我是 LibGDX 的新手，我有一个简单的 2d 场景，其中包含三个旋转、缩放的圆圈。为了消除它们的锯齿，我想使用线性过滤。作为建议，我查看了[这篇文章](http://www.badlogicgames.com/wordpress/?p=1403)，它说，对于大规模缩放的图像，可以使用 mipmap 来提高速度或质量。

第一个意外的出现是，尽管我的所有图像都按比例缩小，但如果 magFilter 是线性的，我只会看到线性过滤器。换句话说：

**此代码将显示缩小图像的线性过滤器：**

```
parentTexture.setFilter(TextureFilter.Nearest, TextureFilter.Linear); 
```

**虽然此代码不会：**

```
parentTexture.setFilter(TextureFilter.Linear, TextureFilter.Nearest); 
```

**这似乎与 libGDX 功能相反：**

```
void com.badlogic.gdx.graphics.Texture.setFilter(TextureFilter minFilter, TextureFilter magFilter) 
```

这不会打扰我，只是它表明 libgdx 是错误的（不太可能），文章是错误的（不太可能），或者我不了解纹理过滤器。当我尝试 mipmap 过滤器时，后者似乎特别有可能。

**此代码不显示任何内容**

```
parentTexture.setFilter(TextureFilter.MipMapLinearLinear, TextureFilter.Linear); 
```

**此代码显示，但最近过滤**

```
parentTexture.setFilter(TextureFilter.Linear, TextureFilter.MipMapLinearLinear); 
```

任何我错在哪里的解释将不胜感激。我在其他地方搜索过，但 libGDX 中的纹理过滤器非常具体，所以除了文章之外，我没有找到太多帮助。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-08-05T21:01:59.817

我遇到了同样的问题，结果发现修复非常简单。创建 时`Texture`，需要指定它使用 mipmap。

您所要做的就是将第二个参数传递给`Texture`构造函数，如下所示：

`Texture myTexture = new Texture(Gdx.files.internal("myImage.png"), true);`

您可以`Texture`在此处查看 API 文档中的所有类构造函数：http: [//libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/graphics/Texture.html](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/graphics/Texture.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-18T14:08:11.313

就像 Mitesh 在他的[回答](https://stackoverflow.com/a/17328882/1072678)中所说， mipmaps 过滤器不起作用，因为您没有告诉 Libgdx 生成 mipmap。

如果您使用资产管理器，代码将是这样的

```
 TextureParameter param = new TextureParameter();
 param.genMipMaps = true; // enabling mipmaps

 manager.load("path/to/texfile.png", Texture.class, param);

 Texture tex = manager.get("path/to/texfile.png", Texture.class);
 tex.setFilter(TextureFilter.MipMap, TextureFilter.Nearest); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-26T19:33:27.323

您的图像可能存在多个问题：

1.  它应该是 2 的幂，如果您使用的是 354X420 等尺寸的图像，它将不起作用。在这种情况下，您需要拍摄 512X512 或 2 的任何其他幂的图像。

2.  当你想启用 Mipmap 过滤时，你需要使用布尔值 genMipMaps 来启用它，它告诉 libgdx 是否生成 mapmaps。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T20:25:04.960

尝试使用相同的 minFilter 和 maxFilter。我有一个类似的问题，如果我放置 TextureFilter.Linear、TextureFilter.Linear 或同时放置 MipMap，问题就解决了。希望这可以帮助。

# oracle - SUM 使用 3 个表和 OUTER 连接

> ID：15378792
> 
> 赞同：2
> 
> 时间：2013-03-13T06:54:47.373
> 
> 标签：oracle, oracle11g

基于三个表之间的连接的 sum 问题。在下面的示例中，Ref 每月包含 11 个条目。Errors 是除 error_count 之外的所有列的聚合。Items 是除 item_count 之外的所有列的聚合。错误和项目之间的关键是 id 和月份年份。Ref 和 Errors 之间的关键是 error_code 和 month_year。Ref 和 Items 之间的键是 month_year。

我希望在 Result 中看到一个条目，该条目基于 Ref 中的每个原始条目，即每个 id 每月 11 个条目。运行下面的代码，当找不到 Ref 和 Errors 之间的匹配项时，不会创建任何条目，但我希望在这种情况下，total_error_count 输出零，因为它还可以根据对 Items 的连接输出 total_item_count 中的实际总和。

id = 1 缺少 10 行，id = 2 缺少 27 行。请指教，谢谢大家。

[SQL小提琴](http://sqlfiddle.com/#!4/ae412/1)

**Oracle 11g R2 模式设置**：

```
create table Ref(
  month_year varchar2(6),
  error_code number(2)
)
/

create table Errors(
  id number(18),
  month_year varchar2(6),
  error_code number(2),
  include_ind varchar2(1),
  exclude_ind varchar2(1),
  error_count number
  )
/

create table Items(
  id number(18),
  month_year varchar2(6),
  include_ind varchar2(1),
  exclude_ind varchar2(1),
  item_count number
  )
/
create table Result(
  id number(18),
  error_code number(2),
  partition varchar2(10),
  month_year varchar2(6),
  total_error_count number,
  total_item_count number,
  rate number,
  query_timestamp varchar2(19)
)
/
INSERT INTO ref(month_year,error_code) VALUES ('201212','11');
INSERT INTO ref(month_year,error_code) VALUES ('201212','12');
INSERT INTO ref(month_year,error_code) VALUES ('201212','13');
INSERT INTO ref(month_year,error_code) VALUES ('201212','14');
INSERT INTO ref(month_year,error_code) VALUES ('201212','16');
INSERT INTO ref(month_year,error_code) VALUES ('201212','17');
INSERT INTO ref(month_year,error_code) VALUES ('201212','3');
INSERT INTO ref(month_year,error_code) VALUES ('201212','4');
INSERT INTO ref(month_year,error_code) VALUES ('201212','5');
INSERT INTO ref(month_year,error_code) VALUES ('201212','6');
INSERT INTO ref(month_year,error_code) VALUES ('201212','8');
INSERT INTO ref(month_year,error_code) VALUES ('201301','11');
INSERT INTO ref(month_year,error_code) VALUES ('201301','12');
INSERT INTO ref(month_year,error_code) VALUES ('201301','13');
INSERT INTO ref(month_year,error_code) VALUES ('201301','14');
INSERT INTO ref(month_year,error_code) VALUES ('201301','16');
INSERT INTO ref(month_year,error_code) VALUES ('201301','17');
INSERT INTO ref(month_year,error_code) VALUES ('201301','3');
INSERT INTO ref(month_year,error_code) VALUES ('201301','4');
INSERT INTO ref(month_year,error_code) VALUES ('201301','5');
INSERT INTO ref(month_year,error_code) VALUES ('201301','6');
INSERT INTO ref(month_year,error_code) VALUES ('201301','8');
INSERT INTO ref(month_year,error_code) VALUES ('201302','11');
INSERT INTO ref(month_year,error_code) VALUES ('201302','12');
INSERT INTO ref(month_year,error_code) VALUES ('201302','13');
INSERT INTO ref(month_year,error_code) VALUES ('201302','14');
INSERT INTO ref(month_year,error_code) VALUES ('201302','16');
INSERT INTO ref(month_year,error_code) VALUES ('201302','17');
INSERT INTO ref(month_year,error_code) VALUES ('201302','3');
INSERT INTO ref(month_year,error_code) VALUES ('201302','4');
INSERT INTO ref(month_year,error_code) VALUES ('201302','5');
INSERT INTO ref(month_year,error_code) VALUES ('201302','6');
INSERT INTO ref(month_year,error_code) VALUES ('201302','8');
INSERT INTO items(id,month_year,include_ind,exclude_ind,item_count) VALUES ('1','201212','Y','N','30');
INSERT INTO items(id,month_year,include_ind,exclude_ind,item_count) VALUES ('1','201301','Y','N','30');
INSERT INTO items(id,month_year,include_ind,exclude_ind,item_count) VALUES ('1','201302','Y','N','30');
INSERT INTO items(id,month_year,include_ind,exclude_ind,item_count) VALUES ('2','201212','Y','N','30');
INSERT INTO items(id,month_year,include_ind,exclude_ind,item_count) VALUES ('2','201301','Y','N','30');
INSERT INTO items(id,month_year,include_ind,exclude_ind,item_count) VALUES ('2','201302','Y','N','30');
INSERT INTO errors(id,month_year,error_code,include_ind,exclude_ind,error_count) VALUES ('1','201212','3','Y','N','30');
INSERT INTO errors(id,month_year,error_code,include_ind,exclude_ind,error_count) VALUES ('1','201212','4','Y','N','30');
INSERT INTO errors(id,month_year,error_code,include_ind,exclude_ind,error_count) VALUES ('1','201212','5','Y','N','30');
INSERT INTO errors(id,month_year,error_code,include_ind,exclude_ind,error_count) VALUES ('1','201212','6','Y','N','30');
INSERT INTO errors(id,month_year,error_code,include_ind,exclude_ind,error_count) VALUES ('1','201212','11','Y','N','30');
INSERT INTO errors(id,month_year,error_code,include_ind,exclude_ind,error_count) VALUES ('1','201212','12','Y','N','30');
INSERT INTO errors(id,month_year,error_code,include_ind,exclude_ind,error_count) VALUES ('1','201212','13','Y','N','30');
INSERT INTO errors(id,month_year,error_code,include_ind,exclude_ind,error_count) VALUES ('1','201212','14','Y','N','30');
INSERT INTO errors(id,month_year,error_code,include_ind,exclude_ind,error_count) VALUES ('1','201301','3','Y','N','30');
INSERT INTO errors(id,month_year,error_code,include_ind,exclude_ind,error_count) VALUES ('1','201301','5','Y','N','30');
INSERT INTO errors(id,month_year,error_code,include_ind,exclude_ind,error_count) VALUES ('1','201301','6','Y','N','30');
INSERT INTO errors(id,month_year,error_code,include_ind,exclude_ind,error_count) VALUES ('1','201301','11','Y','N','30');
INSERT INTO errors(id,month_year,error_code,include_ind,exclude_ind,error_count) VALUES ('1','201301','12','Y','N','30');
INSERT INTO errors(id,month_year,error_code,include_ind,exclude_ind,error_count) VALUES ('1','201301','13','Y','N','30');
INSERT INTO errors(id,month_year,error_code,include_ind,exclude_ind,error_count) VALUES ('1','201301','14','Y','N','30');
INSERT INTO errors(id,month_year,error_code,include_ind,exclude_ind,error_count) VALUES ('1','201302','3','Y','N','30');
INSERT INTO errors(id,month_year,error_code,include_ind,exclude_ind,error_count) VALUES ('1','201302','4','Y','N','30');
INSERT INTO errors(id,month_year,error_code,include_ind,exclude_ind,error_count) VALUES ('1','201302','5','Y','N','30');
INSERT INTO errors(id,month_year,error_code,include_ind,exclude_ind,error_count) VALUES ('1','201302','6','Y','N','30');
INSERT INTO errors(id,month_year,error_code,include_ind,exclude_ind,error_count) VALUES ('1','201302','11','Y','N','30');
INSERT INTO errors(id,month_year,error_code,include_ind,exclude_ind,error_count) VALUES ('1','201302','12','Y','N','30');
INSERT INTO errors(id,month_year,error_code,include_ind,exclude_ind,error_count) VALUES ('1','201302','13','Y','N','30');
INSERT INTO errors(id,month_year,error_code,include_ind,exclude_ind,error_count) VALUES ('1','201302','14','Y','N','30');
INSERT INTO errors(id,month_year,error_code,include_ind,exclude_ind,error_count) VALUES ('2','201212','3','Y','N','30');
INSERT INTO errors(id,month_year,error_code,include_ind,exclude_ind,error_count) VALUES ('2','201212','6','Y','N','30');
INSERT INTO errors(id,month_year,error_code,include_ind,exclude_ind,error_count) VALUES ('2','201301','3','Y','N','30');
INSERT INTO errors(id,month_year,error_code,include_ind,exclude_ind,error_count) VALUES ('2','201301','6','Y','N','30');
INSERT INTO errors(id,month_year,error_code,include_ind,exclude_ind,error_count) VALUES ('2','201302','3','Y','N','30');
INSERT INTO errors(id,month_year,error_code,include_ind,exclude_ind,error_count) VALUES ('2','201302','6','Y','N','30'); 
```

**查询 1**：

```
BEGIN

INSERT INTO result

  SELECT 
        errors.id,
        ref.error_code,
        to_char(sysdate,'YYYY-MM-DD'),
        ref.month_year,
        SUM(errors.error_count),
        SUM(items.item_count),
        SUM(errors.error_count) / SUM(items.item_count),
        to_char(sysdate,'YYYY-MM-DD HH24:MI:SS')
FROM    ref
        RIGHT OUTER JOIN errors
        ON REF.error_code = errors.error_code
        AND REF.month_year = errors.month_year
           RIGHT OUTER JOIN items
           ON items.id = errors.id
           AND items.month_year = errors.month_year
WHERE   errors.include_ind = 'Y'
AND     errors.exclude_ind = 'N'
GROUP   BY
        errors.id,
        ref.error_code,
        ref.month_year,
        sysdate;
END; 
```

**[结果][2]**：

**查询 2**：

```
select  *
from    result
order   by id, error_code, month_year 
```

**[结果][3]**：

```
| ID | ERROR_CODE |  PARTITION | MONTH_YEAR | TOTAL_ERROR_COUNT | TOTAL_ITEM_COUNT | RATE |     QUERY_TIMESTAMP |
-----------------------------------------------------------------------------------------------------------------
|  1 |          3 | 2013-03-13 |     201212 |                30 |               30 |    1 | 2013-03-13 06:43:16 |
|  1 |          3 | 2013-03-13 |     201301 |                30 |               30 |    1 | 2013-03-13 06:43:16 |
|  1 |          3 | 2013-03-13 |     201302 |                30 |               30 |    1 | 2013-03-13 06:43:16 |
|  1 |          4 | 2013-03-13 |     201212 |                30 |               30 |    1 | 2013-03-13 06:43:16 |
|  1 |          4 | 2013-03-13 |     201302 |                30 |               30 |    1 | 2013-03-13 06:43:16 |
|  1 |          5 | 2013-03-13 |     201212 |                30 |               30 |    1 | 2013-03-13 06:43:16 |
|  1 |          5 | 2013-03-13 |     201301 |                30 |               30 |    1 | 2013-03-13 06:43:16 |
|  1 |          5 | 2013-03-13 |     201302 |                30 |               30 |    1 | 2013-03-13 06:43:16 |
|  1 |          6 | 2013-03-13 |     201212 |                30 |               30 |    1 | 2013-03-13 06:43:16 |
|  1 |          6 | 2013-03-13 |     201301 |                30 |               30 |    1 | 2013-03-13 06:43:16 |
|  1 |          6 | 2013-03-13 |     201302 |                30 |               30 |    1 | 2013-03-13 06:43:16 |
|  1 |         11 | 2013-03-13 |     201212 |                30 |               30 |    1 | 2013-03-13 06:43:16 |
|  1 |         11 | 2013-03-13 |     201301 |                30 |               30 |    1 | 2013-03-13 06:43:16 |
|  1 |         11 | 2013-03-13 |     201302 |                30 |               30 |    1 | 2013-03-13 06:43:16 |
|  1 |         12 | 2013-03-13 |     201212 |                30 |               30 |    1 | 2013-03-13 06:43:16 |
|  1 |         12 | 2013-03-13 |     201301 |                30 |               30 |    1 | 2013-03-13 06:43:16 |
|  1 |         12 | 2013-03-13 |     201302 |                30 |               30 |    1 | 2013-03-13 06:43:16 |
|  1 |         13 | 2013-03-13 |     201212 |                30 |               30 |    1 | 2013-03-13 06:43:16 |
|  1 |         13 | 2013-03-13 |     201301 |                30 |               30 |    1 | 2013-03-13 06:43:16 |
|  1 |         13 | 2013-03-13 |     201302 |                30 |               30 |    1 | 2013-03-13 06:43:16 |
|  1 |         14 | 2013-03-13 |     201212 |                30 |               30 |    1 | 2013-03-13 06:43:16 |
|  1 |         14 | 2013-03-13 |     201301 |                30 |               30 |    1 | 2013-03-13 06:43:16 |
|  1 |         14 | 2013-03-13 |     201302 |                30 |               30 |    1 | 2013-03-13 06:43:16 |
|  2 |          3 | 2013-03-13 |     201212 |                30 |               30 |    1 | 2013-03-13 06:43:16 |
|  2 |          3 | 2013-03-13 |     201301 |                30 |               30 |    1 | 2013-03-13 06:43:16 |
|  2 |          3 | 2013-03-13 |     201302 |                30 |               30 |    1 | 2013-03-13 06:43:16 |
|  2 |          6 | 2013-03-13 |     201212 |                30 |               30 |    1 | 2013-03-13 06:43:16 |
|  2 |          6 | 2013-03-13 |     201301 |                30 |               30 |    1 | 2013-03-13 06:43:16 |
|  2 |          6 | 2013-03-13 |     201302 |                30 |               30 |    1 | 2013-03-13 06:43:16 | 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T07:40:48.090

您可以利用 COALESCE(a,b) 将 a 的空值替换为 b。然后，使用外部连接，您将有足够的行

```
SELECT it.ID,
    r.MONTH_YEAR,
    r.ERROR_CODE,
    COALESCE(SUM(ERROR_COUNT),0) "TOTAL ERRORS",
    SUM(ITEM_COUNT) "TOTAL ITEMS",
    COALESCE(SUM(ERROR_COUNT),0)/SUM(ITEM_COUNT) "RATE"
FROM ITEMS it
    JOIN REF r
        ON (it.MONTH_YEAR = r.MONTH_YEAR)
    LEFT OUTER JOIN ERRORS er
        ON (r.MONTH_YEAR = er.MONTH_YEAR
            AND er.ERROR_CODE = r.ERROR_CODE
            AND er.ID = it.ID)
GROUP BY it.ID, 
    r.MONTH_YEAR, 
    r.ERROR_CODE
ORDER BY it.ID,
    r.MONTH_YEAR,
    r.ERROR_CODE 
```

# java - Java中的二进制矩阵乘法

> ID：15378811
> 
> 赞同：-1
> 
> 时间：2013-03-13T06:56:04.090
> 
> 标签：java, math, matrix, jar

我想用Java做二进制矩阵乘法。是否有任何类或 jar 可用于执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T07:01:28.020

以下 java 包可能会有所帮助[http://math.nist.gov/javanumerics/jama/](http://math.nist.gov/javanumerics/jama/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T06:09:56.923

我需要的代码在[Binary Matrix](http://en.literateprograms.org/Binary_matrix_%28Java%29)中找到。

推荐给我的`uba`

# c++ - x 次循环后退出 while 循环

> ID：15378814
> 
> 赞同：0
> 
> 时间：2013-03-13T06:56:42.257
> 
> 标签：c++, loops, while-loop, break

我有两层地图，第二层指向一个队列。我想从队列（以及地图）中提取一定数量的项目，但在正确的位置插入中断/返回/退出（我不确定在这种情况下使用哪个）似乎有问题.

这是代码：

```
#include <iostream>
#include <queue>
#include <map>

using namespace std;

int main()
{
    typedef std::queue<int> MessageQueue;
    typedef std::map<int, MessageQueue> PriorityMap;
    typedef std::map<int, PriorityMap> ClientMap;

    ClientMap clients;

    int priorities = 7;

    clients[10][1].push(1);
    clients[10][1].push(2);
    clients[10][5].push(3);
    clients[10][7].push(3);

    for (int j = 1; j<3; j++) //this determines how many times an element will be 'popped' from a queue
    {
        while (!clients[10].empty())
        {
            for (int i = priorities; i > 0; i--)
            {
                while (clients[10].find(i) != clients[10].end())
                {
                    cout << "priority " << i << endl;
                    cout << clients[10][i].front() << endl;
                    clients[10][i].pop();

                    if (clients[10][i].empty())
                        clients[10].erase(i);

                }

            }

            break; //I don't know where this should go in order for the while loop to stop executing after an element has been popped
        }

    }

    return 0;
} 
```

有了这个结果

```
priority 7
3
priority 5
3
priority 1
1
priority 1
2 
```

但我想要的结果是

```
priority 7
3
priority 5
3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T07:11:49.563

在`main`方法的上下文中，`exit`基本上*会*`return`做同样的事情。都不建议在循环中间进行。

 *我的建议：

```
bool done = false;
for (...; ... && !done; ...)
{
   while (... && !done)
   {
      ...
      done = true;
      ...
   }
} 
```

或者，在您的问题的背景下：

```
int count = 2;
for (int j = 1; j<3 && count > 0; j++)
{
   while (!clients[10].empty() && count > 0)
   {
      for (int i = priorities; i > 0 && count > 0; i--)
      {
         while (clients[10].find(i) != clients[10].end() && count > 0)
         {
            ...
            count--;
            ...
         }
      }
   }
} 
```

我知道你可以`&& count`代替`&& count > 0`，但后者更具可读性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T07:11:36.830

而不是外部循环，使用计数器和`goto`：

```
int countRemoved = 0;
while (!clients[10].empty())
{
    for (int i = priorities; i > 0; i--)
    {
        while (clients[10].find(i) != clients[10].end())
        {
            cout << "priority " << i << endl;
            cout << clients[10][i].front() << endl;
            clients[10][i].pop();
            if (clients[10][i].empty())
               clients[10].erase(i);
            if( ++countRemoved == 2 ) goto stop;
       }
    }
}
stop: 
```*

# mysql - how to deal with multiple values for a single field in table?

> ID：15378817
> 
> 赞同：0
> 
> 时间：2013-03-13T06:56:51.430
> 
> 标签：mysql, database, database-design

i have 1 table in phpmyadmin `users` which contains below fields.

`users`:

## uid | name | contact.no

There can be more then one contact number for a single user.
One way to solve it is using one more table for contact number and pass its primary key to `users` table.
Is there any other way other then this one. Can we implement array structure in `contact.no` field?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T06:59:10.353

您可以将逗号放在那里并保存多个数字，但它会扼杀`RDMS`and的整个概念`Normalization`。那将不是一个好的数据库设计。因此，建议对表格进行规范化，而不是将如此多的信息存储在一个字段中。如果您还有 1 个表，数据库并不会真正强调自己。

可以[在 Microsoft 网站上找到写得很好的解释](http://support.microsoft.com/kb/283878)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T08:51:15.970

您不必为每种类型的条目创建多个表，只需一个更健壮的表结构。确保需要规范化的信息格式一致。

**用户：** uid | 姓名 | 用户名

```
1,Bob,bcratchet 
```

**信息：** iid | 类型 | 图标内容 | uid

```
1,cell,000.000.0000
2,home,000.000.0000    
3,home_addr,1234 Anystreet, anytown USA
4,work_addr,4567 Anystreet, anytown USA 
```

select * from Users u,Info i where u.uid=i.uid and name="Bob";

在任何应用程序中将其拉入多维数组中，您就可以开始了。

***编辑****** 理想情况下，它会走得更远，并显示一个像 typepes 这样的表格，您可以在其中进一步规范化类型，如下所示：**

 ****类型：** itype_id | 类型

```
1,cell
2,home
3,home_addr
4,work_addr 
```

然后在 Info 表中它会说“itype_id”而不是“itype”。**

# linux - debug symbol file for linux kernel

> ID：15378819
> 
> 赞同：0
> 
> 时间：2013-03-13T06:57:08.977
> 
> 标签：linux, debugging, linux-kernel, gdb, qemu

I want to debug both my QEMU source code and Linux kernel source code(ported to a particular board) when trying to boot the kernel image on QEMU.

So i start something like this :

Step 1 : $gdb qemu-system-arm

step 2 : $break { list of breakpoints in qemu src }

step 3 : $run {kernel image} {boot loader image}

step 4 : open another console

step 5 : $arm-none-eabi-gdb

step 6 : $file {load debug symbol file for compiled kernel src}

Ques : what file in the compiled kernel src contains the debug symbols ?

If i load the same kernel image, it says file format not recognized.

I tried this with a sample bare metal code and i was able to debug.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T09:39:04.710

符号通常可以在[System.map](http://en.wikipedia.org/wiki/System.map)中找到。关于“无法识别的文件格式”，请确保您没有尝试加载压缩图像。

# visual-studio - 是否可以在 VS2012 中将 ASP.NET MVC4 Web 应用程序转换为可执行文件

> ID：15378820
> 
> 赞同：-1
> 
> 时间：2013-03-13T06:57:10.260
> 
> 标签：visual-studio, asp.net-mvc-4

我在 Visual Studio 2012 中创建了一个 mvc4 应用程序，是否可以将此应用程序转换为可执行文件？

像[VS 2005 Web 部署](http://weblogs.asp.net/scottgu/archive/2005/11/06/429723.aspx)

任何帮助和指导表示赞赏..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T07:14:40.530

> 是否可以将此应用程序转换为可执行文件？

不，这是不可能的，而且几乎没有任何意义。ASP.NET MVC 应用程序需要托管在 Web 服务器上。

# jakarta-ee - java.util.ConcurrentModificationException when iterating over a hashmap with struts iterator

> ID：15378821
> 
> 赞同：2
> 
> 时间：2013-03-13T06:57:18.903
> 
> 标签：jakarta-ee, struts2, ognl, struts-tags

I am trying to use a hashmap to populate textfields in a jsp and bring back the modified values in the action class through the same hashmap i used to populate. In spite of many different approaches, i am failing to do so. I tried sending back an object list but i failed in that too(see [this thread](https://stackoverflow.com/questions/15338286/editing-arraylist-of-objects-with-struts-2-form-tag/15343980?noredirect=1)). Its not necessary that i use the following approach, but **i just want to take a modified list back to action class through struts tags**. Please help me in this i already wasted a lot of time in this.

**Action class code**

```
private HashMap<String,Integer> coursesMarks;
//getters and setters

public String editCoursePage() {
        this.student = studentService.getStudent(rollNo);
        this.courseList = courseService.getStudentCourses(rollNo);
        coursesMarks = new HashMap<String, Integer>();

        for(Course c: courseList) {
            coursesMarks.put(c.getCourse(), c.getMarks());
        }
        return ActionSupport.SUCCESS;
    }

    public String editCourseAction() {

        System.out.print("inside of student action "
                + coursesMarks.size() + "\n\n\n");

        return ActionSupport.SUCCESS;
    } 
```

**Inside the jsp**

```
<s:form action="editCourseAction" validate="true">
 Courses: 

<s:iterator value="coursesMarks" status="st">
<s:label ><s:property value="course" /></s:label>
<s:textfield name="coursesMarks[%{#st.index}].value" theme="simple"/>
<br />

</s:iterator>
<s:submit action="editCourseAction" value="submit" />
 </s:form> 
```

Running this code throws this error...

```
 Mar 13, 2013 12:09:23 PM org.apache.catalina.core.ApplicationDispatcher invoke
SEVERE: Servlet.service() for servlet jsp threw exception
java.util.ConcurrentModificationException
    at java.util.HashMap$HashIterator.nextEntry(HashMap.java:793)
    at java.util.HashMap$EntryIterator.next(HashMap.java:834)
    at java.util.HashMap$EntryIterator.next(HashMap.java:832)
    at org.apache.struts2.components.IteratorComponent.end(IteratorComponent.java:334)
    at org.apache.struts2.views.jsp.IteratorTag.doAfterBody(IteratorTag.java:87)
    at org.apache.jsp.pages.editCourse_jsp._jspx_meth_s_005fiterator_005f0(editCourse_jsp.java:251)
    at org.apache.jsp.pages.editCourse_jsp._jspx_meth_s_005fform_005f0(editCourse_jsp.java:174)
    at org.apache.jsp.pages.editCourse_jsp._jspService(editCourse_jsp.java:104)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
        .....and a long long list of error lines below this 
```

If i use the following code

```
 <s:iterator value="coursesMarks" >
<s:label ><s:property value="course" /></s:label>
<s:textfield name="value" theme="simple"/> 
```

It displays the values correctly but does not pass them back to the action class. Could you please tell me how to accomplish my task

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T09:37:00.837

在 JSP 中迭代地图的键，在`<s:textfield>`标签中使用键来获取值。您的 JSP 应该如下所示：

```
<s:form action="editCourseAction" validate="true">
 Courses: 

  <s:iterator value="coursesMarks.keys" var="coursekey">
    <s:label ><s:property value="course" /></s:label>
    <s:textfield name="coursesMarks['%{#coursekey}']" theme="simple"/>
    <br />

  </s:iterator>
  <s:submit action="editCourseAction" value="submit" />
</s:form> 
```

或者像你一样迭代地图并使用`key`关键字来获取值。

```
<s:iterator value="coursesMarks">
  <s:textfield name="coursesMarks['%{key}']" theme="simple"/>
</s:iterator> 
```

# javascript - 如果值在数组中，则选中复选框

> ID：15378822
> 
> 赞同：0
> 
> 时间：2013-03-13T06:57:24.997
> 
> 标签：javascript, jquery, checkbox

```
var ds = $("#recDay").val().split(/ +/); 
var weekArray = [];
for (var i=0; i<ds.length; i++){
    weekArray = ds[i];
} // i =0 , weekArray = Sunday; i=1, weekArray = tuesday; i=2, weekArray = Wednesday

<table>
<tr>
<td width="3%"></td>
<td><input type="checkbox" name="weeklyDay" id="sunday" value="sunday"> Sunday</td>      
<td><input type="checkbox" name="Day" id="monday" value="monday"> Monday</td>                                                                               
<td><input type="checkbox" name="Day" id="tuesday" value="tuesday"> Tuesday</td>                                                                                
<td><input type="checkbox" name="Day" id="wednesday" value="wednesday">Wednesday</td>                                                                              
</tr>                                                                            
<tr>                                                                                
<td width="3%"></td>                                                                                
<td><input type="checkbox" name="Day" id="thursday" value="thursday" > Thursday</td>                                                                                   
<td><input type="checkbox" name="Day" id="friday" value="friday"> Friday</td>                                                                                 
<td><input type="checkbox" name="Day" id="saturday" value="saturday"> Saturday</td>                                                                         
</tr>                                                                       
</table> 
```

如何仅选中 weekArray 中的复选框？我试过的代码是

```
$('select[name="Day"] option').filter(function(){
         if(weekArray.indexOf((this).text(), 0) != -1);
         return $(this);
    }).prop("checked", true); 
```

但这不起作用。任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T07:09:10.367

您正在使用`select`选择器`checkbox` ??????..

```
 $('#divID input:checkbox').each(function(){
     if($.inArray($(this).val(), weekArray) != -1){
       $(this).prop("checked", true);
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T07:13:06.650

你可以这样做，

**[现场演示](http://jsfiddle.net/5xkJp/)**

```
var weekArray = ["saturday","monday","tuesday","friday" ];
$('.weekdays').filter(function () {    
    if (weekArray.indexOf(this.id) != -1)
          return $(this).closest('td').find(':checkbox');
}).prop("checked", true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T07:09:42.110

```
for (var i=0; i<ds.length; i++){
    weekArray = ds[i];
}

$("form input:checkbox").each(function(){
if(jQuery.inArray($(this).attr('id'), weekArray )!=-1)
$(this).prop('checked', true);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T07:07:15.050

```
if(in_array(document.getElementById("CheckBoxId"), $yourArray)) { CheckBox.Checked } 
```

# extjs - 即使 url 返回 {"success":true}，Extjs 表单成功函数也不会执行

> ID：15378824
> 
> 赞同：0
> 
> 时间：2013-03-13T06:57:34.547
> 
> 标签：extjs, extjs4, extjs4.1

1.  php代码

    ```
     <?php
       Class semester extends CI_Controller
       {
         public function index()
          {
            echo '{"success":true}';
          }
       }
     ?> 
    ```

2.  ExtJS 代码

    ```
    var form=this.up('form').getForm();
    form.url = 'http://localhost/anju/index.php/semester';
    form.method = 'POST'; 
    form.submit({
          success: function (form, action) {
             alert("Success: " );
         },
         failure: function (form, action) {
             alert("Failure: " );
         }
       }); 
    ```

到目前为止，我无法发出成功消息:(有人可以告诉我为什么它失败了吗？

# javascript - 使用 JS 将表单字段标记为只读

> ID：15378834
> 
> 赞同：0
> 
> 时间：2013-03-13T06:58:11.310
> 
> 标签：javascript, jquery, forms, readonly

我有一个表格，可以根据用户选择的会员级别来收取付款。当他们选择级别时，JS 会自动填写表格上的金额。我还想做的是`readonly`在他们选择一个选项后将该字段标记为。但是有一个问题！有一个输入自定义金额的选项（我设置了最低金额）。如果选择了此选项，那么我希望单独保留金额字段以允许用户输入他们的金额。

`readonly` *除非*他们选择自定义金额，否则我如何让该字段自动填充并标记为？

这是我的 HTML 和 JS（注意：我只显示涉及的两个字段的 HTML，而不是整个表单。）

***HTML***

```
<!-- MEMBERSHIP SELECT -->
<div><label for="CAT_Custom_320540">Membership Level <span class="req">*</span></label></div>
  <select class="cat_dropdown" id="CAT_Custom_320540" name="CAT_Custom_320540">
    <option value=" ">-- Please select --</option>
    <option value="20.00">Basic $20</option>
    <option value="35.00">Regular $35</option>
    <option value="50.00">Advocate $50</option>
    <option value="100.00">Dedicated $100</option>
    <option value="250.00">Big Time $250</option>
    <option value="3500.00">Lifetime $3500</option>
    <option value="">Custom Amount</option>
    </select>

<!-- AMOUNT -->
<div><label for="Amount">Amount<span class="req">*</span> <span id="constraint-300-label"> (minimum: <span id="constraint-300">20.00</span>)</span></label></div>
<input name="Amount" type="text" class="cat_textbox" id="Amount"  /> 
```

***JS***

```
var select = document.getElementById('CAT_Custom_320540');
var input = document.getElementById('Amount');
    select.onchange = function() {
        input.value = select.value;
} 
```

如您所见，我已自动填充了“金额”字段，但我不知道如何标记为只读*，并且*如果选择了“自定义金额”，则*无法*将该字段保留为只读。

我在网站上使用 jQuery 1.8.3 并且愿意使用 jQuery 是为了做我对 vanilla JS 所做的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T07:15:19.153

我认为您可以测试该值并在`disabled`该值不为空时使用该属性：

```
var select = document.getElementById('CAT_Custom_320540');
var input = document.getElementById('Amount');
    select.onchange = function() {
        input.value = select.value;
        if ($.trim(input.value).length)
         input.setAttribute('disabled',true);
        else
         input.removeAttribute('disabled');
} 
```

[**JSFiddle**](http://jsfiddle.net/KooiInc/UwdAJ/)

# cmd - 尝试通过命令提示符 ren 命令重命名一堆文件，但它没有提供所需的输出

> ID：15378835
> 
> 赞同：0
> 
> 时间：2013-03-13T06:58:12.460
> 
> 标签：cmd

我正在尝试通过命令提示符的命令重命名一堆 htm 文件，`ren`但它没有提供所需的输出。

我有名为`xyz_alb.htm`, `xyz_bla.htm`...等的文件位于不同的不同文件夹中，并希望将它们重命名为`zxy_alb.htm`,`zxy_bla.htm`等等。

我试过下面的代码：

```
for /r %x in (xyz*.htm) do ren "%x" zxy*.htm 
```

但它正在替换整个文件名，我得到这样的输出：

```
zxy.htm, zxy.htm... 
```

如何修改此代码以获得所需的输出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T07:11:42.407

尝试

```
ren xyz_???.htm zxy_???.htm 
```

或者

```
ren xyz_*.* zxy_*.* 
```

不需要循环。第一个模式在 xyz_ 之后查找 3 个字符，后者匹配最多 '.' 的任意数量的字符。.

对于当前目录类型的多个子目录：

```
for /r %d in (xyz_*.*) do ren %d zxy_*.* 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T07:02:02.493

在尝试了这么久之后没有得到正确的解决方案，所以在我的同事的帮助下通过 java 进行了尝试......感谢他。

如果有人需要，也愿意分享。

```
import java.io.File;

/**
 * This class is search with start file character sequence and replace the file name with new character. 
 * @author nitin.choube
 *
 */

public class  SearchAndReplaceFileName
{
    public static void main(String[] args) 
    {
        //Parent file path from start searching files
        File dir = new File("D:\\WS\\Upload");
        // replace character string
        final String replaceChar="XYZ";
        // replace character string with
        final String replaceCharWtih="ALB";         
        // file extension
        final String fileExtension=".htm";

        if(dir.isDirectory()){

            File[] children = dir.listFiles();
            iterateFile(children,replaceChar,replaceCharWtih,fileExtension);

        }       
    }

    /**
     * This method is allow to search and replace file name.
     * @param children
     * @param replaceChar
     * @param replaceCharWtih
     * @param fileExtension
     */
    public static void iterateFile(File[] children,String replaceChar,String replaceCharWtih,String fileExtension){
        try {

            for (int i=0; i<children.length; i++) {

                // Get filename of file or directory

                File file = children[i];

                System.out.println("Getting all files in " + file.getCanonicalPath() + " including those in subdirectories");

                  if(file.isDirectory()){

                      File[] child = file.listFiles();

                      iterateFile(child,replaceChar,replaceCharWtih,fileExtension);

                  }else if(file.isFile()){

                      String extension = file.getName().substring(file.getName().lastIndexOf("."));

                      System.out.println("extracted file name is "+file.getName()+" and extension is ="+extension);

                      if(extension.equals(fileExtension)){

                          String fileName=file.getName().substring(0,file.getName().lastIndexOf(fileExtension));

                          if(fileName.startsWith(replaceChar)){

                              String newFileName=fileName.replace(replaceChar,replaceCharWtih);
                              file.renameTo(new File(file.getCanonicalPath().substring(0,file.getCanonicalPath().lastIndexOf("\\"))+"\\"+newFileName+fileExtension));

                          }else if(fileName.contains("_"+replaceChar+"_")){

                              String newFileName=fileName.replace(replaceChar,replaceCharWtih);
                              file.renameTo(new File(file.getCanonicalPath().substring(0,file.getCanonicalPath().lastIndexOf("\\"))+"\\"+newFileName+fileExtension));
                          }
                      }
                  }
            }

        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

# iphone - 如何将日期的年份更改为当前年份？

> ID：15378836
> 
> 赞同：2
> 
> 时间：2013-03-13T06:58:12.897
> 
> 标签：iphone, ios, date, calendar

我有一个数组，如下所示

```
Birthdates(
"03/12/2013",
"03/12/2013",
"08/13/1990",
"12/09/1989",
"02/06",
"09/08",
"03/02/1990",
"08/22/1989",
"03/02",
"05/13",
"10/16",
"07/08",
"08/31/1990",
"04/14/1992",
"12/15/1905",
"08/14/1989",
"10/07/1987",
"07/25",
"07/17/1989",
"03/24/1987",
"07/28/1988",
"01/21/1990",
"10/13"
 ) 
```

都是 NSString

现在我想从中制作另一个数组，如果该日期即将到来，并且如果日期已经过去，那么所有年份都应该是 2013 年，然后将年份更改为 2014 年？

在上面的句子中，我们没有考虑年份，我们只考虑日和月，然后看看今年是否已经过去了？

例如，如果日期为“12/15/1905”，则将其转换为另一个数组，如“12/15/2013”​​，但如果日期为“01/01/1990”，则将其转换为另一个数组，如“01/01/2014” “因为它已经过了当前日期，请帮助提前谢谢你:)

我更愿意做一些代码不仅适用于 2013 年和 2014 年的事情，它也应该适用于未来的未来。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T07:09:08.383

此代码将为您做：

```
NSArray *Birthdates=@[
                      @"03/12/2013",
                      @"03/12/2013",
                      @"08/13/1990",
                      @"12/09/1989",
                      @"02/02",
                      @"09/08",
                      @"03/02/1990",
                      @"08/22/1989",
                      @"03/02"];
NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
NSDateComponents *components = [gregorian components:NSYearCalendarUnit fromDate:[NSDate date]];
NSInteger currentYear = [components year];

NSMutableArray *newBirthDates=[NSMutableArray new];

for(NSString *str in Birthdates){
    NSArray *array=[str componentsSeparatedByString:@"/"];
    if(array.count==2){
        NSString *tempString=[NSString stringWithFormat:@"%@/%d",str,currentYear];
        NSDateFormatter *dateFormatter=[NSDateFormatter new];
        [dateFormatter setDateFormat:@"MM/dd/yyyy"];
        NSDate *date=[dateFormatter dateFromString:tempString];
        if ([[NSDate date] isGreaterThanOrEqualTo:date]) {
            NSLog(@"passed->%@ *** %@",date, str);
            [newBirthDates addObject:[NSString stringWithFormat:@"%@/%d",str,currentYear+1]];
        }
        [newBirthDates addObject:tempString];
    }
    else{
        NSString *dateString=[NSString stringWithFormat:@"%@/%@/%d",array[0],array[1],currentYear];
        NSDateFormatter *dateFormatter=[NSDateFormatter new];
        [dateFormatter setDateFormat:@"MM/dd/yyyy"];
        NSDate *date=[dateFormatter dateFromString:dateString];
        if ([[NSDate date] isGreaterThanOrEqualTo:date]) {
            dateString=[NSString stringWithFormat:@"%@/%@/%d",array[0],array[1],currentYear+1];
        }

        [newBirthDates addObject:dateString];
    }
}
NSLog(@"%@",newBirthDates); 
```

这是输出：

```
DocumentBased[6632:303] (
    "03/12/2014",
    "03/12/2014",
    "08/13/2013",
    "12/09/2013",
    "02/02/2014",
    "09/08/2013",
    "03/02/2014",
    "08/22/2013",
    "03/02/2014"
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T07:05:03.267

我认为您知道如何使用 NSDateFormatter 来格式化日期，单独更改年份，只需检查此链接[NSDateComponents](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDateComponents_Class/Reference/Reference.html)。请查看有关如何将日期拆分为 NSDateComponents 的[StackOverflow 问题。](https://stackoverflow.com/questions/6478651/nsdatecomponents-of-an-nsdate)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T08:51:58.953

此代码与将所有日期字符串提取为一种格式的 Anoop Vaidya 代码相同。但是在 Anoop 代码中失败的日期比较逻辑在这里结束了，即当 count == 2..

这是我对 Anoop 的编辑代码

```
 NSArray *Birthdates=@[
        @"03/12/2013",
        @"03/12/2013",
        @"08/13/1990",
        @"12/09/1989",
        @"02/06",
        @"09/08",
        @"03/02/1990",
        @"08/22/1989",
        @"03/02"];

NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
        [dateFormatter setDateFormat:@"yyyy"];
        NSString *curYear = [dateFormatter stringFromDate:[NSDate date]];
        NSString *nextYear = [NSString stringWithFormat: @"%d", ([curYear intValue] + 1)];
        [dateFormatter setDateFormat:@"MM/dd/yyyy"];

        NSMutableArray *newBirthDates=[NSMutableArray new];
        for(NSString *str in Birthdates){
            NSArray *array=[str componentsSeparatedByString:@"/"];
            if(array.count==2){
                [newBirthDates addObject:[NSString stringWithFormat:@"%@/%@",str,curYear]];
            }
            else{
                [newBirthDates addObject:[NSString stringWithFormat:@"%@/%@/%@",array[0],array[1],curYear]];
            }
        }

        for(int i = 0; i < [newBirthDates count]; i++)
        {
            NSString *dateStr = [newBirthDates objectAtIndex:i];
            NSComparisonResult comResult = [[dateFormatter dateFromString:dateStr] compare:[NSDate date]];
            if(comResult == NSOrderedAscending)
            {
                [dateStr stringByReplacingOccurrencesOfString:curYear withString:nextYear];
                [newBirthDates replaceObjectAtIndex:i withObject:dateStr];
            }
        }

        NSLog(@"%@",newBirthDates); 
```

这将适用于所有场景......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T07:13:56.863

I think You can check it directly without using dateFormatter.

Steps to do: First find the current date with NSDate.Convert it into string and make the format as same the array you have, by using NSDateFormatter.

Next compare one by one by making condition . Separate the string by "/" . if([myArray objectAtIndex:i]string separate by@"/" objectAtIndex:0 ) and the check the next one ... Make the condition as you want

I hope if you do like this with less lines of code you can achieve what you want.

# mysql - 我可以从 .sql 创建初始 CodeIgniter 数据库迁移吗？

> ID：15378839
> 
> 赞同：8
> 
> 时间：2013-03-13T06:58:24.180
> 
> 标签：mysql, codeigniter, migration

我有一个 CodeIgniter 应用程序，我刚刚了解了迁移。这听起来很有用，我想开始使用它。但是我已经有一个相当复杂的数据库设置。有人可以建议一种合理的方法来从我的 MYSQL .sql 模式文件创建可靠的初始迁移吗？

用 dbforge 手动重新创建整个数据库似乎有些过分，但也许这就是我应该做的。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-06-27T21:33:14.857

回复有点晚，但我破解了一个快速库，它应该从您当前的数据库中为您生成基本迁移文件。它仍然是测试版，但适用于我的系统 40 个表+

[https://github.com/liaan/codeigniter_migration_base_generation](https://github.com/liaan/codeigniter_migration_base_generation)

大号：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T10:02:56.900

我手动处理 SQL 文件，然后我发现了 Jamie Rumbelow 的模式库。它使模式操作比 DBForge 更易于管理，但仍需要手动输入。

[https://github.com/jamierumbelow/codeigniter-schema](https://github.com/jamierumbelow/codeigniter-schema)

有人提出了他的基本模型和模式库的混搭，它使原型设计更快

[https://github.com/williamknauss/schema_base_model_magic](https://github.com/williamknauss/schema_base_model_magic)

这允许您自动化 CRUD 模型操作和模式

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-24T21:51:44.463

访问[https://github.com/fastworkx/ci_migrations_generator](https://github.com/fastworkx/ci_migrations_generator)

你会得到类似applications/migration/001_create_base.php的东西。

```
public function up() {

    ## Create Table sis_customer
    $this->dbforge->add_field(array(
        'id' => array(
            'type' => 'VARCHAR',
            'constraint' => 40,
            'null' => FALSE,

        ),
        'ip_address' => array(
            'type' => 'VARCHAR',
            'constraint' => 45,
            'null' => FALSE,

        ),
        'timestamp' => array(
            'type' => 'INT',
            'unsigned' => TRUE,
            'null' => FALSE,
            'default' => '0',

        ),
        'data' => array(
            'type' => 'BLOB',
            'null' => FALSE,

        ),
        '`datetime_reg` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ',
    ));

    $this->dbforge->create_table("sessions", TRUE);
    $this->db->query('ALTER TABLE  `sessions` ENGINE = InnoDB');
    ));

public function down()  {

    ### Drop table sessions ##
    $this->dbforge->drop_table("sessions", TRUE);
} 
```

# asp.net - 从 IOS 连接到 ASP.Net Webservce

> ID：15378841
> 
> 赞同：1
> 
> 时间：2013-03-13T06:58:26.600
> 
> 标签：asp.net, objective-c, web-services, ios5

我正在编写一个需要连接到返回和整数的 web 服务的 iPad 应用程序，如下所示：

```
<int xmlns="http://schemas.microsoft.com/2003/10/Serialization/">0</int> 
```

我的代码看起来像这样

```
 NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:[NSURL URLWithString:verficationURL]];
    [request setHTTPMethod:@"GET"];

    NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self];

}

-(void) connection: (NSURLConnection *)connection didReceiveData:(NSData *)data{

    [self.responseData appendData:data];

}

-(void)connectionDidFinishLoading:(NSURLConnection *)connection {

    NSString *result = [[NSString alloc] initWithData:self.responseData encoding:NSUTF8StringEncoding];

    NSLog(@"array: %s", result);

} 
```

连接确实完成了加载，但我无法从结果中获取值 0。这样做的正确方法是什么。谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T07:43:26.477

我假设你得到了结果，所以只会回应解析。

我通常使用[XMLReader](https://github.com/amarcadet/XMLReader)来轻松解析 xml。您还可以使用或直接使用其他第三方库`NSXMLParsing`，但是，您需要为此编写更多代码。

使用它，解析代码如下所示：

```
NSError *error = nil;
NSDictionary *dict = [XMLReader dictionaryForXMLData:self.responseData error:&error];
NSNumber *result = [dict valueForKey:@"int"];
if(error||!result){
    // handle error (either the result is not xml format, or the xml doesn't contain a 'int' key)
}
else {
    // handle result
} 
```

我没有测试过这个确切的代码，但它应该是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T08:47:26.307

请创建基于 REST 的 Web 服务，因为它变得非常容易与数据库交互并转移到 JSON。

# xaml - 如何在 Mvvm Silverlight 5 中发送命令参数

> ID：15378845
> 
> 赞同：2
> 
> 时间：2013-03-13T06:58:41.257
> 
> 标签：xaml, mvvm, silverlight-5.0, icommand

我已经在我的 mvvm 架构中将 Icommand 实现为 SimpleCommand.cs

```
 public class SimpleCommand<T1, T2> : ICommand
{
    private Func<T1, bool> canExecuteMethod;
    private Action<T2> executeMethod;

    public SimpleCommand(Func<T1, bool> canExecuteMethod, Action<T2> executeMethod)
    {
        this.executeMethod = executeMethod;
        this.canExecuteMethod = canExecuteMethod;
    }

    public SimpleCommand(Action<T2> executeMethod)
    {
        this.executeMethod = executeMethod;
        this.canExecuteMethod = (x) => { return true; };
    }

    public bool CanExecute(T1 parameter)
    {
        if (canExecuteMethod == null) return true;
        return canExecuteMethod(parameter);
    }

    public void Execute(T2 parameter)
    {
        if (executeMethod != null)
        {
            executeMethod(parameter);
        }
    }

    public bool CanExecute(object parameter)
    {
        return CanExecute((T1)parameter);
    }

    public void Execute(object parameter)
    {
        Execute((T2)parameter);
    }

    public event EventHandler CanExecuteChanged;

    public void RaiseCanExecuteChanged()
    {
        var handler = CanExecuteChanged;
        if (handler != null)
        {
            handler(this, EventArgs.Empty);
        }
    }
} 
```

并在我的 viewModel 中实现了这个 ICommand 如下：

```
private ICommand printCommand;

    public ICommand PrintCommand
    {
        get { return printCommand; }
        set { printCommand = value; }
    }

myviewmodel() // in Constructor of ViewModel
 {

   this.PrintCommand = new SimpleCommand<Object, EventToCommandArgs>(ExecutePrintCommand);
}

 } 
```

在 XAML 上：我调用了 Command="{Binding PrintCommand}"

```
<Button Content="Print Button" Command="{Binding PrintCommand}" Width="120" Height="25" Margin="3"></Button> 
```

它完美地工作......

但是当我尝试将 CommandParameter 发送到 Command As 时：

```
<Button Content="Print Button" Command="{Binding PrintCommand}" Width="120" Height="25" Margin="3" CommandParameter="{Binding ElementName=grdReceipt}"></Button> 
```

然后命令没有执行。并给出错误：

> 无法将“System.Windows.Controls.Grid”类型的对象转换为“PropMgmt.Shared.EventToCommandArgs”类型。

请帮助。在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T07:58:17.150

问题是您的 SimpleCommand 实现中的这一部分

```
public void Execute(object parameter){
  Execute((T2)parameter);
} 
```

`T2`在你的情况下是 type `EventToCommandArgs`，但作为参数

```
CommandParameter="{Binding ElementName=grdReceipt}" 
```

您正在传递 a `System.Windows.Controls.Grid`，这会导致您提到的异常。

也是您对命令的执行不正确。传递给 CanExecute 和 Execute 的参数是同一个对象。以下实现仅使用一种泛型类型。

```
public class SimpleCommand<T1> : ICommand
{
    private Func<T1, bool> canExecuteMethod;
    private Action<T1> executeMethod;

    public SimpleCommand(Func<T1, bool> canExecuteMethod, Action<T1> executeMethod)
    {
        this.executeMethod = executeMethod;
        this.canExecuteMethod = canExecuteMethod;
    }

    public SimpleCommand(Action<T1> executeMethod)
    {
        this.executeMethod = executeMethod;
        this.canExecuteMethod = (x) => { return true; };
    }

    public bool CanExecute(T1 parameter)
    {
        if (canExecuteMethod == null) return true;
        return canExecuteMethod(parameter);
    }

    public void Execute(T1 parameter)
    {
        if (executeMethod != null)
        {
            executeMethod(parameter);
        }
    }

    public bool CanExecute(object parameter)
    {
        return CanExecute((T1)parameter);
    }

    public void Execute(object parameter)
    {
        Execute((T1)parameter);
    }

    public event EventHandler CanExecuteChanged;

    public void RaiseCanExecuteChanged()
    {
        var handler = CanExecuteChanged;
        if (handler != null)
        {
            handler(this, EventArgs.Empty);
        }
    }
} 
```

使用此实现，您可以定义：

```
this.PrintCommand = new SimpleCommand<object>(ExecutePrintCommand); 
```

由于您的 ExecutePrintCommand 获取一个对象作为参数，因此您需要进行类型检查或强制转换为您需要的类型。在您的情况下，您将获得一个`System.Windows.Controls.Grid`.

```
public void ExecutPrintCommand(object parameter) {
    System.Windows.Controls.Grid grid = parameter as System.Windows.Controls.Grid;

    if (grid != null) {
      // do something with the Grid
    }
    else {
      // throw exception or cast to another type you need if your command should support more types.
    }
  } 
```

# java - Jackson - 仅覆盖特定字段的自定义序列化程序

> ID：15378853
> 
> 赞同：20
> 
> 时间：2013-03-13T06:59:05.183
> 
> 标签：java, serialization, jackson

我知道如何在 Jackson 中使用自定义序列化程序（通过扩展`JsonSerializer`），但我希望默认序列化程序适用于所有字段，除了 1 个字段，我想使用自定义序列化程序覆盖它。

注释不是一个选项，因为我正在序列化一个生成的类（来自 Thrift）。

编写自定义杰克逊序列化程序时，如何仅指定要覆盖的某些字段？

*更新：*

这是我要序列化的类：

```
class Student {
    int age;
    String firstName;
    String lastName;
    double average;
    int numSubjects

    // .. more such properties ...
} 
```

上面的类有很多属性，其中大部分使用原生类型。我只想覆盖自定义序列化程序中的一些属性，让 Jackson 像往常一样处理其余的。例如，我只想将“年龄”字段转换为自定义输出。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-13T07:24:09.200

假设您的目标类是

```
public class Student {
    int age;
    String firstName;
    String lastName;
    double average;
    int numSubjects;

    public int getAge() {
        return age;
    }

    public void setAge(int age) {
        this.age = age;
    }

    public String getFirstName() {
        return firstName;
    }

    public void setFirstName(String firstName) {
        this.firstName = firstName;
    }

    public String getLastName() {
        return lastName;
    }

    public void setLastName(String lastName) {
        this.lastName = lastName;
    }

    public double getAverage() {
        return average;
    }

    public void setAverage(double average) {
        this.average = average;
    }

    public int getNumSubjects() {
        return numSubjects;
    }

    public void setNumSubjects(int numSubjects) {
        this.numSubjects = numSubjects;
    }

} 
```

您需要编写一个自定义序列化程序，如下所示

```
public class MyCustomSerializer extends JsonSerializer<Student> {

    @Override
    public void serialize(Student value, JsonGenerator jgen,
            SerializerProvider provider) throws IOException,
            JsonProcessingException {
        if (value != null) {
            jgen.writeStartObject();
            jgen.writeStringField("age", "Age: " + value.getAge()); //Here a custom way to render age field is used
            jgen.writeStringField("firstName", value.getFirstName());
            jgen.writeStringField("lastName", value.getLastName());
            jgen.writeNumberField("average", value.getAverage());
            jgen.writeNumberField("numSubjects", value.getNumSubjects());
            //Write other properties
            jgen.writeEndObject();
        }
    }

} 
```

然后将其添加到 ObjectMapper

```
ObjectMapper mapper = new ObjectMapper();
SimpleModule module = new SimpleModule("custom",
        Version.unknownVersion());
module.addSerializer(Student.class, new MyCustomSerializer());
mapper.registerModule(module); 
```

然后像使用它

```
Student s = new Student();
s.setAge(2);
s.setAverage(3.4);
s.setFirstName("first");
s.setLastName("last");
s.setNumSubjects(3);

StringWriter sw = new StringWriter();
mapper.writeValue(sw, s);
System.out.println(sw.toString()); 
```

它会产生 ao/p 之类的

> {"age":"Age: 2","firstName":"first","lastName":"last","average":3.4,"numSubjects":3}

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-13T23:57:10.903

仅仅因为你不能修改类并不意味着你不能使用注释：只需使用混合注释。例如，请参阅[此](http://www.cowtowncoder.com/blog/archives/2009/08/entry_305.html)博客条目（或使用“jackson mixin annotations”获取更多信息）以了解如何使用它。

我专门将 Jackson 与 protobuf 和 thrift 生成的类一起使用，它们工作得很好。对于较早的 Thrift 版本，我必须禁用“is-setters”的发现，Thrift 生成的方法以查看是否已明确设置特定属性，但除此之外一切正常。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-13T09:21:31.220

我遇到了同样的问题，我用[CustomSerializerFactory](https://fasterxml.github.io/jackson-core/javadoc/1.9/org/codehaus/jackson/map/ser/CustomSerializerFactory.html)解决了它。

这种方法允许您忽略所有对象或特定类型的某些特定字段。

```
public class EntityCustomSerializationFactory extends CustomSerializerFactory {

    //ignored fields
    private static final Set<String> IGNORED_FIELDS = new HashSet<String>(
            Arrays.asList(
                    "class",
                    "value",
                    "some"
            )
    );

    public EntityCustomSerializationFactory() {
        super();
    }

    public EntityCustomSerializationFactory(Config config) {
        super(config);
    }

    @Override
    protected void processViews(SerializationConfig config, BeanSerializerBuilder builder) {
        super.processViews(config, builder);

        //ignore fields only for concrete class
        //note, that you can avoid or change this check
        if (builder.getBeanDescription().getBeanClass().equals(Entity.class)){
            //get original writer
            List<BeanPropertyWriter> originalWriters = builder.getProperties();

            //create actual writers
            List<BeanPropertyWriter> writers = new ArrayList<BeanPropertyWriter>();

            for (BeanPropertyWriter writer: originalWriters){
                String propName = writer.getName();

                //if it isn't ignored field, add to actual writers list
                if (!IGNORED_FIELDS.contains(propName)){
                    writers.add(writer);
                }
            }

            builder.setProperties(writers);
        }

    }
} 
```

之后你可以使用它，如下所示：

```
objectMapper.setSerializerFactory(new EntityCustomSerializationFactory());
objectMapper.writeValueAsString(new Entity());//response will be without ignored fields 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-04-05T09:27:37.677

如果你不想用注释污染你的模型，你可以使用 mixins。

```
ObjectMapper mapper = new ObjectMapper();
SimpleModule simpleModule = new SimpleModule();
simpleModule.setMixInAnnotation(Student.class, StudentMixin.class);
mapper.registerModule(simpleModule); 
```

并且您想覆盖 id 字段，例如：

```
public abstract class StudentMixin {
    @JsonSerialize(using = StudentIdSerializer.class)
    public String id;
} 
```

做任何你需要的领域：

```
public class StudentIdSerializer extends JsonSerializer<Integer> {
    @Override
    public void serialize(Integer integer, JsonGenerator jsonGenerator, SerializerProvider serializerProvider) throws IOException {
        jsonGenerator.writeString(String.valueOf(integer * 2));
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-12T06:28:36.837

在@JsonView 的帮助下，我们可以决定要序列化的模型类的字段满足最低标准（我们必须定义标准），就像我们可以拥有一个具有 10 个属性的核心类，但只能序列化 5 个客户需要的属性只要

通过简单地创建以下类来定义我们的视图：

```
public class Views
{
    static class Android{};
    static class IOS{};
    static class Web{};
} 
```

带视图的注释模型类：

```
public class Demo 
{
    public Demo() 
    {
    }

@JsonView(Views.IOS.class)
private String iosField;

@JsonView(Views.Android.class)
private String androidField;

@JsonView(Views.Web.class)
private String webField;

 // getters/setters
...
..
} 
```

现在我们必须通过简单地从 spring 扩展 HttpMessageConverter 类来编写自定义 json 转换器：

```
 public class CustomJacksonConverter implements HttpMessageConverter<Object> 
    {
    public CustomJacksonConverter() 
        {
            super();
        //this.delegate.getObjectMapper().setConfig(this.delegate.getObjectMapper().getSerializationConfig().withView(Views.ClientView.class));
        this.delegate.getObjectMapper().configure(MapperFeature.DEFAULT_VIEW_INCLUSION, true);
        this.delegate.getObjectMapper().setSerializationInclusion(Include.NON_NULL);

    }

    // a real message converter that will respond to methods and do the actual work
    private MappingJackson2HttpMessageConverter delegate = new MappingJackson2HttpMessageConverter();

    @Override
    public boolean canRead(Class<?> clazz, MediaType mediaType) {
        return delegate.canRead(clazz, mediaType);
    }

    @Override
    public boolean canWrite(Class<?> clazz, MediaType mediaType) {
        return delegate.canWrite(clazz, mediaType);
    }

    @Override
    public List<MediaType> getSupportedMediaTypes() {
        return delegate.getSupportedMediaTypes();
    }

    @Override
    public Object read(Class<? extends Object> clazz,
            HttpInputMessage inputMessage) throws IOException,
            HttpMessageNotReadableException {
        return delegate.read(clazz, inputMessage);
    }

    @Override
    public void write(Object obj, MediaType contentType, HttpOutputMessage outputMessage) throws IOException, HttpMessageNotWritableException 
    {
        synchronized(this) 
        {
            String userAgent = ((ServletRequestAttributes) RequestContextHolder.getRequestAttributes()).getRequest().getHeader("userAgent");
            if ( userAgent != null ) 
            {
                switch (userAgent) 
                {
                case "IOS" :
                    this.delegate.getObjectMapper().setConfig(this.delegate.getObjectMapper().getSerializationConfig().withView(Views.IOS.class));
                    break;
                case "Android" :
                    this.delegate.getObjectMapper().setConfig(this.delegate.getObjectMapper().getSerializationConfig().withView(Views.Android.class));
                    break;
                case "Web" :
                    this.delegate.getObjectMapper().setConfig(this.delegate.getObjectMapper().getSerializationConfig().withView( Views.Web.class));
                    break;
                default:
                    this.delegate.getObjectMapper().setConfig(this.delegate.getObjectMapper().getSerializationConfig().withView( null ));
                    break;
                }
            }
            else
            {
                // reset to default view
                this.delegate.getObjectMapper().setConfig(this.delegate.getObjectMapper().getSerializationConfig().withView( null ));
            }
            delegate.write(obj, contentType, outputMessage);
        }
    }

} 
```

现在需要告诉spring使用这个自定义的json转换，只需将它放在dispatcher-servlet.xml中

```
<mvc:annotation-driven>
        <mvc:message-converters register-defaults="true">
            <bean id="jsonConverter" class="com.mactores.org.CustomJacksonConverter" >
            </bean>
        </mvc:message-converters>
    </mvc:annotation-driven> 
```

这就是您能够决定要序列化哪些字段的方式。

谢谢

# javascript - 使用数组中的 javascript mouseover 时出错？

> ID：15378862
> 
> 赞同：1
> 
> 时间：2013-03-13T06:59:37.517
> 
> 标签：javascript

```
<a href=""></a>
<textarea></textarea>
<object></object>
<img src="" />
<div id="content">content</div>
<div class="test">test</div> 
```

和 javascript

```
oj = ['a', '#content', '.test'];
oj.forEach(function(val) {
   val.onmouseover = function() {
      alert("Mouseouver !!!");
   }
}); 
```

当我将鼠标悬停在此对象上时，结果不警报，如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T07:13:15.263

如果您要使用 jQuery：

```
$(document).ready(function(){
    $('a, #content, .test').on("mouseover", function(){
        alert("Mouseouver !!!");
    });
}); 
```

[http://jsfiddle.net/jcWLn/](http://jsfiddle.net/jcWLn/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T07:07:12.710

您没有解决 dom 对象，这是第一个问题。数组内容指向 css 类。您必须获取单个对象并将 onMouseOver 函数附加到它们。看看 document.getElementById() 函数...

# javascript - 删除文本选框中的间隙

> ID：15378864
> 
> 赞同：1
> 
> 时间：2013-03-13T06:59:47.093
> 
> 标签：javascript, jquery, marquee

有谁知道我是否可以在滚动时让第一项在最后一项之后立即出现，而不是在第一项出现之前等待最后一项消失？

我试过用谷歌搜索解决方案，我知道我必须使用 Javascript 或 JQueries 来创建选取框而不是选取框标记。但是，我对此完全陌生。谁能指导我如何实施这些解决方案或提供我可以使用的代码？太感谢了！

这是我目前拥有的代码。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" 

"http://www.w3.org/TR/html4/strict.dtd">
<html>
 <head>
<Title> Hello </Title>

    <style>

#content-wrapper{
  display:table;
}

#content{
  display:table-row;
}

#content>div{
  display:table-cell
}

/*adding some extras for demo purposes*/
#content-wrapper{
  width:100%;
  height:100%;
  top:0px;
  left:0px;
  position:absolute;
}
#nav{
  width:25%;
  background:white;
}
#body{
  background:white;
}
</style>

  </head>

<body>

<marquee behavior="scroll" direction="up" scrollamount="2" 

    <div id="content-wrapper">
      <div id="content">
        <div id="nav">
A <br>
B <br>
C <br>
D <br>
E <br>
        </div>
        <div id="body">
1 <br>
2 <br>
3 <br>
4 <br> 
5 <br>
        </div>
      </div>
    </div>

</marquee>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T07:17:15.203

根据您需要的精确程度，最简单的方法是将滚动延迟设置为非常低的数字，例如 0.01，如果您这样做，则必须设置滚动速度，否则该数字将被四舍五入。

如果这不令人满意，您可以终止选取框的默认循环并自己制作。在一定的时间、距离之后，或者您可以调用 onFinish() 并在之后立即触发相同的选取框。就像那部电影里魔术师让自己消失，没人知道他是怎么做到的？那个人叫什么名字？

第三种选择是您可以减小选取框滚动的宽度并将其偏移以向其进入的一侧倾斜，这是三个选项中最草率的，但请尝试一下。你的眼睛太兴奋了，看不到另一个你甚至没有注意到第一个从未离开页面的选框

# node.js - node.js child_process.send utf-8 char 问题

> ID：15378871
> 
> 赞同：0
> 
> 时间：2013-03-13T07:00:08.203
> 
> 标签：node.js

今天我将我的node.exe升级到最新版本：0.10.0。但是发现一个奇怪的问题：无法发送中文字符，代码是：

master.js：

```
//master.js
var cp = require('child_process');

var n = cp.fork(__dirname + '/sub.js');

n.on('message', function(m) {
console.log('PARENT got message:', m);
});

n.send('中文'); 
```

和：

```
//sub.js
process.on('message', function(m) {
console.log('CHILD got message:', m);
});

process.send({ foo: 'bar' }); 
```

运行master.js时，出现错误：

undefined:1 "d8-f" ^ SyntaxError: Unexpected token at Object.parse (native) at Pipe.channel.onread (child_process.js:335:28)

谁能给点建议？</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T08:31:30.513

我可以重现它。

尽管这似乎是一个错误（因为它在 Node 0.8 中运行良好），但这可以作为修复：

```
// master.js
...
n.send(new Buffer('中文'));

// sub.js
process.on('message', function(m) {
  console.log('CHILD got message:', new Buffer(m).toString());
});
.... 
```

# c# - C# Socket 异常：试图以访问权限禁止的方式访问套接字

> ID：15378876
> 
> 赞同：2
> 
> 时间：2013-03-13T07:00:33.757
> 
> 标签：c#, sockets

这是我正在使用的代码。这是我从互联网上获得的代码，他们说它工作正常。对此的评论也很好，但我不明白为什么它对我不起作用。还有一件事我将此应用程序用作用户模式而不是管理员模式。

```
private void btnStart_Click(object sender, EventArgs e)
    {
        if (cmbInterfaces.Text == "")
        {
            MessageBox.Show("Select an Interface to capture the packets.", "MJsniffer", 
                MessageBoxButtons.OK, MessageBoxIcon.Error);
            return;
        }
        try
        {
            if (!bContinueCapturing)        
            {
                //Start capturing the packets...

                btnStart.Text = "&Stop";

                bContinueCapturing = true;

                //For sniffing the socket to capture the packets has to be a raw socket, with the
                //address family being of type internetwork, and protocol being IP
                Console.WriteLine("1");
                mainSocket = new Socket(AddressFamily.InterNetwork,
                    SocketType.Raw, ProtocolType.IP);
                Console.WriteLine("2");
                //Bind the socket to the selected IP address
                mainSocket.Bind(new IPEndPoint(IPAddress.Parse(cmbInterfaces.Text), 0));
                Console.WriteLine("3");
                //Set the socket  options
                mainSocket.SetSocketOption(SocketOptionLevel.IP,            //Applies only to IP packets
                                           SocketOptionName.HeaderIncluded, //Set the include the header
                                           true);                           //option to true
                Console.WriteLine("4");
                byte[] byTrue = new byte[4] {1, 0, 0, 0};
                byte[] byOut = new byte[4]{1, 0, 0, 0}; //Capture outgoing packets

                //Socket.IOControl is analogous to the WSAIoctl method of Winsock 2
                mainSocket.IOControl(IOControlCode.ReceiveAll,              //Equivalent to SIO_RCVALL constant
                                                                            //of Winsock 2
                                     byTrue,                                    
                                     byOut);

                //Start receiving the packets asynchronously
                mainSocket.BeginReceive(byteData, 0, byteData.Length, SocketFlags.None,
                    new AsyncCallback(OnReceive), null);
            }
            else
            {
                btnStart.Text = "&Start";
                bContinueCapturing = false;
                //To stop capturing the packets close the socket
                mainSocket.Close ();
            }
        }
        catch (SocketException ex)
        {
            Console.WriteLine("5");
            MessageBox.Show(ex.Message, "MJsniffer", MessageBoxButtons.OK, MessageBoxIcon.Error);
        }
        catch (Exception ex)
        {
            Console.WriteLine("6");
            MessageBox.Show(ex.Message, "MJsniffer", MessageBoxButtons.OK, MessageBoxIcon.Error);
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T07:59:46.687

> 还有一件事我将此应用程序用作用户模式而不是管理员模式。

这是行不通的。以下是为 Win32 api 编写的，但由于这是 .NET 调用的内容，因此同样适用[：](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms740548%28v=vs.85%29.aspx)

> 要使用类型的套接字`SOCK_RAW`需要管理权限。运行使用原始套接字的 Winsock 应用程序的用户**必须是本地计算机上管理员组的成员**，否则原始套接字调用将失败，错误代码为[`WSAEACCES`](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms740668%28v=vs.85%29.aspx#WSAEACCES). 在 Windows Vista 和更高版本上，对原始套接字的访问是在创建套接字时强制执行的。在早期版本的 Windows 中，对原始套接字的访问是在其他套接字操作期间强制执行的。

（**我的重点**）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T07:37:59.350

您能否检查 SocketException.SocketErrorCode 并更新您的问题？
我假设您收到 10013 - 这些是[代码说明](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740668%28v=vs.85%29.aspx)。很可能其他应用程序已经在访问套接字，或者您的权限丢失，

# ruby-on-rails - NoMethodError：未定义的方法“substitute_at”用于 nil:NilClass

> ID：15378877
> 
> 赞同：2
> 
> 时间：2013-03-13T07:00:36.033
> 
> 标签：ruby-on-rails, activerecord, associations

我在销毁对象时遇到了这个问题。

```
NoMethodError: undefined method `substitute_at' for nil:NilClass
from /usr/local/rvm/gems/ruby-1.9.3-p194@clu2/gems/activerecord-3.2.11/lib/active_record/persistence.rb:135:in `destroy'
from /usr/local/rvm/gems/ruby-1.9.3-p194@clu2/gems/activerecord-3.2.11/lib/active_record/locking/optimistic.rb:103:in `destroy'
from /usr/local/rvm/gems/ruby-1.9.3-p194@clu2/gems/activerecord-3.2.11/lib/active_record/callbacks.rb:254:in `block in destroy'
from /usr/local/rvm/gems/ruby-1.9.3-p194@clu2/gems/activesupport-3.2.11/lib/active_support/callbacks.rb:480:in `_run__348799253__destroy__466331341__callbacks'
from /usr/local/rvm/gems/ruby-1.9.3-p194@clu2/gems/activesupport-3.2.11/lib/active_support/callbacks.rb:405:in `__run_callback'
from /usr/local/rvm/gems/ruby-1.9.3-p194@clu2/gems/activesupport-3.2.11/lib/active_support/callbacks.rb:385:in `_run_destroy_callbacks'
from /usr/local/rvm/gems/ruby-1.9.3-p194@clu2/gems/activesupport-3.2.11/lib/active_support/callbacks.rb:81:in `run_callbacks'
from /usr/local/rvm/gems/ruby-1.9.3-p194@clu2/gems/activerecord-3.2.11/lib/active_record/callbacks.rb:254:in `destroy'
from /usr/local/rvm/gems/ruby-1.9.3-p194@clu2/gems/activerecord-3.2.11/lib/active_record/transactions.rb:254:in `block in destroy'
from /usr/local/rvm/gems/ruby-1.9.3-p194@clu2/gems/activerecord-3.2.11/lib/active_record/transactions.rb:313:in `block in with_transaction_returning_status'
from /usr/local/rvm/gems/ruby-1.9.3-p194@clu2/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
from /usr/local/rvm/gems/ruby-1.9.3-p194@clu2/gems/activerecord-3.2.11/lib/active_record/transactions.rb:208:in `transaction'
from /usr/local/rvm/gems/ruby-1.9.3-p194@clu2/gems/activerecord-3.2.11/lib/active_record/transactions.rb:311:in `with_transaction_returning_status'
from /usr/local/rvm/gems/ruby-1.9.3-p194@clu2/gems/activerecord-3.2.11/lib/active_record/transactions.rb:254:in `destroy'
from (irb):1
from /usr/local/rvm/gems/ruby-1.9.3-p194@clu2/gems/railties-3.2.11/lib/rails/commands/console.rb:47:in `start'
from /usr/local/rvm/gems/ruby-1.9.3-p194@clu2/gems/railties-3.2.11/lib/rails/commands/console.rb:8:in `start'
from /usr/local/rvm/gems/ruby-1.9.3-p194@clu2/gems/railties-3.2.11/lib/rails/commands.rb:41:in `<top (required)>'
from script/rails:6:in `require' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T10:50:08.177

我已经解决了这个问题，我的应用程序的关联名称之一是连接，它是活动记录 gem 中的保留字：

参见第 135 行 [https://github.com/rails/rails/blob/3-2-stable/activerecord/lib/active_record/persistence.rb](https://github.com/rails/rails/blob/3-2-stable/activerecord/lib/active_record/persistence.rb)

我将关联名称从连接更改为其他名称，现在一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T07:10:58.897

我发现这是一个 Rails 问题[https://github.com/rails/rails/pull/9371](https://github.com/rails/rails/pull/9371)。我认为它现在已修复。你可以更新你的rails

# ios - 将聊天消息传递给离线用户的问题

> ID：15378878
> 
> 赞同：0
> 
> 时间：2013-03-13T07:00:36.000
> 
> 标签：ios, quickblox

当其中一位用户“离线”时，我在聊天中传递消息时遇到问题。当初始化一对一聊天并且两个用户正在聊天时，正在传递消息并且一切正常，但是当其中一个用户的应用程序进入后台时，另一个用户继续发送消息。看起来消息正在发送，保存到历史记录和缓存中（我记录它），但是当其他用户重新联机并检索历史记录时 - 这些消息不会出现。

在日志中，我看到它们在应用程序重新启动后出现延迟：

```
2013-03-13 01:14:42.983 MyApp[2314:1103]
QBChat/xmppStreamDidReceiveMessage: 
<message   xmlns="jabber:client" id="0" type="chat" from="XXXXX-XXXX@chat.quickblox.com"
to="XXXXXX-XXXX@chat.quickblox.com">
<body>I try again</body>
<delay xmlns="urn:xmpp:delay" from="chat.quickblox.com" stamp="2013-03-13T07:58:14.455+0000"> 
```

整个消息传递过程是使用 SimpleSample 聊天中的代码构建的（另外，我还没有使用推送通知）。

你能在这个问题上给我一些建议吗？

谢谢你。

更新：重新安装应用程序后，不会检索与用户的消息历史记录，这意味着，我猜，我所说的历史记录存储在缓存中。好像我在从服务器检索历史记录时遇到问题。我在“ChatDidReceiveMessage”中尝试了“message.delayed = 1”，但没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:50:11.133

进入后台时必须退出聊天，进入前台时必须重新登录。

在这种情况下，您的消息将可以正常接收

# mysql - 为每个条目选择最新的答案 MySQL

> ID：15378879
> 
> 赞同：0
> 
> 时间：2013-03-13T07:00:36.477
> 
> 标签：mysql, group-by, greatest-n-per-group

我觉得这应该很容易做到，因为我只是在某个地方犯了一些小错误。可能应该补充一点，我是一名教师，而不是编码员，所以我不太精通 SQL。此外，我确实在这里查看了一堆问题，但没有一个很有效。

我有表格，`student_answers(id, student_id, question_id, answer, result, date_time)`我想得到`question_id`,和学生为每个问题输入的最后一个答案。因此，如果他们对问题 7 回答了 3 次，我只想看到最后一个并且他们输入了。`answer``result``date_time``answer``result`

出于教学目的，我不能在他们重新输入答案时简单地更新每一行。

我尝试了以下查询

```
SELECT id, question_id, answer, result, date  FROM Student_Answers
WHERE student_id = 505 AND question_id in (select id from Test_Questions q where q.test_id = 37) 
Group by question_id
having date = max(date)
ORDER BY Student_Answers`.`question_id` ASC 
```

但这根本不包括有多个答案的问题，只有我505学生回答过一次的问题。学生 505 回答了问题 3 和 4 两次，其余的只回答了一次，我只看到了 1、2 和 5 的结果。

我试过这个查询

```
SELECT
    b.*
FROM
    (
        SELECT question_id, MAX(date) AS maxdate
        FROM TP_Student_Answers
        GROUP BY question_id
    ) a
INNER JOIN
    TP_Student_Answers b ON 
        a.question_id = b.question_id AND 
        a.maxdate = b.date 
        and b.student_id = 505 
        and b.question_id in (select id from TP_Questions q where q.test_id = 37)
ORDER BY
    b.question_id 
```

但这只给了我3和4，而他只尝试过一次。任何帮助将不胜感激！

这是一个数据样本：

```
id   student_id question_id answer  result      date 

7133     505    1      a    correct 2012-11-16 09:03:58

7134    505 2      c    wrong   2012-11-16 09:03:58

7135    505 3      e    wrong   2012-11-16 09:03:58

7136    505 3      d    wrong   2013-12-16 09:03:58

7137    505 4      c    correct 2012-11-16 09:03:58

7138    505 4      d    wrong   2013-12-16 09:03:58

7139    505 5       blank   2012-11-16 09:03:58 
```

当我运行查询时，我想看到：

```
7133      505   1      a    correct 2012-11-16 09:03:58

7134    505 2      c    wrong   2012-11-16 09:03:58

7136    505 3      d    wrong   2013-12-16 09:03:58

7138    505 4      d    wrong   2013-12-16 09:03:58

7139    505 5       blank   2012-11-16 09:03:58 
```

注意条目 7135 和 7137 被省略，因为每个问题都有稍后的答案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T07:54:11.790

检查此查询：（为所有学生提供所有问题的最新答案）

```
SELECT id, student_id, question_id, answer, result, date_time
  FROM (SELECT *,
               CASE
                  WHEN (@prevQ = question_id AND @prevS = student_id)
                  THEN
                     @marker := 0
                  ELSE
                     @marker := 1
               END
                  AS marker,
               @prevS := student_id,
               @prevQ := question_id
                  FROM student_answers
                ORDER BY student_id ASC, question_id ASC, date_time DESC) aView,
               (SELECT @prevQ = -1, @prevS = -1) a
 WHERE marker = 1; 
```

对于一个特定的`student_id`和特定`question_id`的 s：

```
SELECT id, student_id, question_id, answer, result, date_time
  FROM (SELECT *,
               CASE
                  WHEN (@prevQ = question_id AND @prevS = student_id)
                  THEN
                     @marker := 0
                  ELSE
                     @marker := 1
               END
                  AS marker,
               @prevS := student_id,
               @prevQ := question_id
          FROM student_answers
         WHERE     student_id = 501
               AND question_id IN (SELECT id
                                     FROM TP_Questions q
                                    WHERE q.test_id = 37)
        ORDER BY student_id ASC, question_id ASC, date_time DESC) aView,
       (SELECT @prevQ = -1, @prevS = -1) a
 WHERE marker = 1; 
```

# jquery - JQGrid列自定义..在运行时添加列

> ID：15378880
> 
> 赞同：2
> 
> 时间：2013-03-13T07:00:54.797
> 
> 标签：jquery, jqgrid

我是 J Query 的新手，我正在尝试[http://www.trirand.com/blog/jqgrid/jqgrid.html](http://www.trirand.com/blog/jqgrid/jqgrid.html)中的一些示例，我看到列名是用 JS 编写的，它们显示在 Grid 中。

我对 JQGrid 有这个要求，以显示他们每次搜索的列。

示例：我有一组标准列要显示在网格中，例如学生姓名、地址、电话号码。

假设如果用户按学生 ID 搜索，我需要将学生 ID 作为列添加到结果中。

我应该表现得像

```
"student name, Address,Phone number,StudentID" 
```

如果他们按总计搜索

我应该表现得像

```
"student name, Address,Phone number,Total" 
```

为了简化，我需要在用户单击搜索后向 JQGrid 添加一列。

我可以在 JQGrid 中执行此操作吗？我该如何实现呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T07:36:35.217

此答案取自[Oleg 的旧版答案](https://stackoverflow.com/questions/4232038/jqgrid-add-new-column/4232168#4232168)：

> 无法`jqGrid`动态添加列。您必须重新创建整个网格并`colModel`增加一列。如果你使用单独`colNames`的，那么数组的大小也必须增加。`GridDestroy`例如，您可以使用破坏现有网格。您实际上可以像往常一样绑定一个额外的列，但您可以在运行时使用`jquery`. 因此，您可以添加一列并根据您的要求使用隐藏/显示它。

```
 $("#grid").showCol("column_name");
        $("#grid").hideCol("column_name"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-05T22:40:41.113

我相信您从数据库中获得了额外的列，它是记录集的一部分。

检查这个小提琴

[http://jsfiddle.net/jqwidgets/6X3EZ/](http://jsfiddle.net/jqwidgets/6X3EZ/)

现在在上面的链接中，您可以看到按钮单击列可以并且确实会更改。

您现在要做的就是，在获取记录集的代码部分中，编写一个带有 var 列的脚本元素，并在这个名为 columns 的变量中填写 jqxgrid 的列名和相关参数。

完成此操作后，在准备好编写网格的文档中添加变量。

```
$("#jqxgrid").jqxGrid({
 width: 500,
 theme: 'energyblue',
 source: adapter,
 columns: columns}); 
```

希望这可以帮助。

# java - jQuery 是否有内置函数来进行长轮询？

> ID：15378885
> 
> 赞同：0
> 
> 时间：2013-03-13T07:01:12.953
> 
> 标签：java, jquery, long-polling

我在做`Java Chat application`。

当我的应用程序启动时，我将`pingAction()`在我的外部 Jquery 中调用。

我使用此站点作为 JQUERY 长轮询的参考 - [http://techoctave.com/c7/posts/60-simple-long-polling-example-with-javascript-and-jquery](http://techoctave.com/c7/posts/60-simple-long-polling-example-with-javascript-and-jquery)

将`Jquery pingAction`是，

```
function pingAction(){

    $.ajax(
            {
                type: "post",
                url: "PingAction",
                async:     false,
                data : "userId="+encodeURIComponent(userId)+"&secureKey="+encodeURIComponent(secureKey)+"&sid="+Math.random() ,
                cache:false,
                complete: pingAction,
                timeout: 5000 ,
                contentType: "application/x-www-form-urlencoded; charset=utf-8",
                scriptCharset: "utf-8" ,
                dataType: "html",

                error: function (xhr, ajaxOptions, thrownError) {
                alert("xhr.status : "+xhr.status);

                if(xhr.status == 12029 || xhr.status == 0){
                    //alert("XMLHttp status : "+xhr.status);
                    $("#serverMsg").css("backgroundColor" , "yellow");
                    $("#serverMsg").text("Your Network connection is failed !");
                    $("#serverMsg").show();
                }
                //setTimeout('pingAction()', 5000);
                xhr.abort();
            },

            success: function( responseData , status){
                if($("#serverMsg").text() == "" || $("#serverMsg").text() == "Your Network connection is failed !"){
                    disableServerMessage();
                }

                if(responseData != "null" && responseData.length != 0  && responseData != null){

                    var stringToArray = new Array;
                    stringToArray = responseData.split("<//br//>");
                    var len = stringToArray.length;
                    for(var i=0;i<len-1;i++){
                        getText(stringToArray[i]);

                    }
                }

                //setTimeout('pingAction()', 5000);
            } 

            }                           
    );

} 
```

在使用 之前`Long Poling`，我将`pingAction() in javaScript`使用 . 每 5 秒调用一次`setTimeInterval()`。

现在我需要`LONG POLLING concept`在聊天应用程序中使用`(Wait until the server gives the new messages)`。所以我修改`Jquery pinAction()`了你在上面看到的内容。

有什么`built in method`可以做的`Long polling`吗`JQUERY`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T07:07:36.690

不，jQuery 中没有内置方法来进行长轮询。您将不得不开发自己的代码或找到解决您问题的现有代码。

如果您正在寻找想法，可以从[Google 搜索](https://www.google.com/search?q=how%20to%20implement%20long%20polling%20in%20jquery&rlz=1C1TSNP_enUS471US471&aq=f&oq=how%20to%20implement%20long%20polling%20in%20jquery&aqs=chrome.0.57j62l3.9155&sourceid=chrome&ie=UTF-8)“jQuery 中的长轮询”开始。有很多例子可以借鉴。

# android - 预测文本输入（单词建议）在 Android 应用程序开发中的 AutoCompleteTextView 中不起作用

> ID：15378887
> 
> 赞同：0
> 
> 时间：2013-03-13T07:01:17.847
> 
> 标签：android, mobile

我拿了一个`AutoCompleteTextView`和我`xml`一样的

```
 <AutoCompleteTextView
            android:id="@+id/myautocomplete"
            android:layout_width="120dp"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:completionThreshold="1"
            android:ems="10" >
        </AutoCompleteTextView> 
```

我想要那个，在这个输入`autocompletetextview`应该像`editText`在预测模式下一样工作。

当我`editText`在 android 中控制时，它会自动启用预测文本输入（单词建议）。
要禁用它，我必须`TextNowordSuggestions`在`inputtype`属性中使用。

我知道，我们必须绑定`autocompletetextview`到适配器才能获取数据，但是现在该接口还没有准备好。

那么有什么方法吗，该适配器现在可以是android默认的预测文本输入或其他方式。

我可以稍后在我的下一个版本的应用程序中进行更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T11:48:21.190

我尝试了很多东西，但最后我将`editText`其作为控制来启用预测文本。 `autocompletetextview`可用于使用这样的适配器加载建议

```
 AutoCompleteTextView textView = (AutoCompleteTextView) findViewById(R.id.autocomplete_words);
        MyAdapter adapter = new MyAdapter(MyActivity.this, R.layout.my_row, myWords);
        textView.setAdapter(adapter); 
```

我希望`myWords`在上面的代码中替换以获得 android 字典建议。但最后我采取了`editText`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-12T18:57:02.980

设置文本后，只需执行 requsetfocus ......它对我来说很好......

```
search.addTextChangedListener(new CustomAutoCompleteTextChangedListener(
                this));

ArrayList<String> result = data
                        .getStringArrayListExtra(RecognizerIntent.EXTRA_RESULTS);
                search.setText(result.get(0));
                search.setSelection(search.getText().toString().length());
                search.requestFocus(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-21T14:19:11.613

这对我有用：

```
 AutoCompleteTextView myAutoComplete = (AutoCompleteTextView) findViewById(R.id.myAutoComplete);
    int inputType = myAutoComplete.getInputType();
    myAutoComplete.setRawInputType(inputType &= ~EditorInfo.TYPE_TEXT_FLAG_AUTO_COMPLETE); 
```

# jquery - 在fancybox中加载动态内容时如何触发html滚动

> ID：15378896
> 
> 赞同：0
> 
> 时间：2013-03-13T07:01:57.850
> 
> 标签：jquery, fancybox, fancybox-2

我有一个自定义的fancybox（fancybox2），其中的内容是动态加载的。然而，随着内容的增长，该框仍然固定在浏览器窗口中，并且不会触发 html 的滚动条。

但是，如果我运行`$.fancybox.update()`它会调整并显示滚动条。如何在不运行上述行的情况下自动执行此操作？

我的fancybox定义如下

```
$.fancybox({

    href     : '#mycontainer'
    autoSize : true,
    maxWidth :  760,
    fitToView: false,
    padding  : 0,
    fixed    : true,
    autoCenter : true,
    beforeShow :  function(){
       $('.fancybox-overlay-fixed').css({'overflow-y':'auto'});
    },
    afterShow :  function(){
       $('.fancybox-overlay-fixed').css({'overflow-y':'auto'});
    },
 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T07:26:18.883

根据文档：

`$.fancybox.update()`- 自动调整fancyBox 的大小`height`以匹配内容的高度。

`autoWidth`: 如果设置为 true，对于 'inline'、'ajax' 和 'html' 类型的内容高度是自动确定的。布尔值；默认值：`false`

您可以尝试使用***`autoWidth:true`***fancybox 配置对象吗？

# c# - 如何将 IEnumerable 类型作为对象返回

> ID：15378898
> 
> 赞同：0
> 
> 时间：2013-03-13T07:02:02.053
> 
> 标签：c#, oop, ienumerable, var

我有一个 var (IEnumerable)，我想返回一个类。

```
public Myclass method(string str)
    {
        ...................
        var p1 = some data;
        return ?            
    }

public class Myclass
{
    public string a { get; set; }
    public string b { get; set; }
    public bool c { get; set; }
    ...........................
} 
```

我的意图是通过 webAPI 返回值。为了以 webAPI 的形式返回，我创建了一个模型类，其中包含我想通过 webAPI 返回的变量——即“Myclass”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T07:03:00.460

更新以返回 IEnumerable 类型

```
public List<Myclass> method(string str)
{
 var p1 = new MyClass();
 return p1.ToList();
} 
```

* * *

利用[`typeof(boject)`](http://msdn.microsoft.com/en-us/library/58918ffs%28v=vs.71%29.aspx)c# 中已有的

你也可以这样做`Type t = t1.GetType();`

在此之后，您可以获得这样的类型的全名`MessageBox.Show(t.FullName);`

为你编码它 p1 应该是`MyClass`你返回它 的类型

```
public Myclass method(string str)
{
 var p1 = new MyClass();
 return p1;
} 
```

**需要注意的是`var`类型变量是转换为您分配的类型。**

[来自 MSDN`var`](http://msdn.microsoft.com/en-us/library/bb383973.aspx)

隐式类型的局部变量是强类型的，就像您自己声明了类型一样，但编译器确定类型。i 的以下两个声明在功能上是等效的：

```
var i = 10; // implicitly typed
int i = 10; //explicitly typed 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T07:06:55.193

实际上，var 不是类型，而是关键字，C# 是静态类型的，这意味着编译器将运行您的程序并为每个 var 确定其真正的类型

所以对于您的问题，您已经知道某些数据的类型，您只需将其写为返回类型（不要偷懒:)）

[在此处](http://www.programmersheaven.com/2/CSharp3-1)阅读有关此问题的更多信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T07:06:25.457

`var`只是一个简短的任务。`var`总是有类型。

**`var`**

> 隐式类型的局部变量是强类型的，就像您自己声明了类型一样，但编译器确定类型。

您可以返回对象。如果您不确定`DataType`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T07:08:15.823

@mike z 在他的评论中是正确的：'var' 成为其分配的类型。因此，如果您这样做，它将起作用：

```
var result = new MyClass();
return result; 
```

# red5 - 如何实时上传.flv到远程red5服务器LIVE？

> ID：15378902
> 
> 赞同：0
> 
> 时间：2013-03-13T07:02:17.313
> 
> 标签：red5, live-streaming

我想做一些仪式的现场网络直播。我可以使用我的网络摄像头和 ffmpeg 软件录制 .flv 文件。现在，如果我从某个托管公司租用 red5 媒体服务器，以便访问者可以从该网站下载。现在我的问题是如何实时上传 .flv 文件（当视频拍摄仍在进行时）请帮助如何实现这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T15:53:51.643

我假设通过录制它们意味着您将它们保存到磁盘而不是流式传输视频？如果是这种情况，您只需要使用上传表单或拥有对托管服务器的 ftp / scp 访问权限。选择一个已安装的应用程序并将您的 flv 文件放在应用程序“流”目录中。一旦文件就位，您将需要一种播放它们的方法，这将需要一个播放器（那里有很多免费的播放器，比如 jwplayer）。希望这就是你要找的。

# c++ - 经典 C++ 中的数据文件处理（很像 C）

> ID：15378904
> 
> 赞同：0
> 
> 时间：2013-03-13T07:02:18.837
> 
> 标签：c++, file, file-io

我做了以下程序。粗体部分有误。我得到的输出中的计数值为零。编译代码时没有错误。

```
#include<iostream.h>
#include<conio.h>
#include<fstream.h>
void main()
{
    clrscr();
    void count();
    fstream file("STORY.TXT",ios::in|ios::out);
    file<<"He is playing in the ground. She\nis playinbg with her dolls.\n";
    file.close();
    count();
    getch();
}
void count()
{
    ifstream file("STORY.TXT");
    file.seekg(0);int count=0;
    while(!file.eof())
    {
        char line[10];
        **file.get(line,10,' ');
        cout<<line<<"\n";
        if(line=="HE")
            ++count;**
    }
    cout<<count;
    file.close();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T07:05:51.440

字符串比较不是通过`==`. 那只是比较地址替换

```
if(line=="HE") 
```

和

```
if(!strcmp(line, "HE")) 
```

**编辑**

对于不区分大小写

```
if(!strcmpi(line, "HE")) 
```

# java - 预定执行者准确性

> ID：15378905
> 
> 赞同：1
> 
> 时间：2013-03-13T07:02:20.680
> 
> 标签：java, threadpoolexecutor

我在 java 中的 ScheduledExecutorService 有问题（几天前我没有遇到这个问题，这让我觉得很奇怪）。请找到下面的代码和控制台输出。重复执行任务之间的延迟是 1 毫秒，所以理想情况下我应该达到每秒 1000 的计数（给或需要几毫秒），但这只是没有发生。请帮忙..

代码：

```
import java.text.DateFormat;
import java.text.SimpleDateFormat;
import java.util.Calendar;
import java.util.concurrent.Executors;
import java.util.concurrent.ScheduledExecutorService;
import java.util.concurrent.TimeUnit;

public class SchedulerTest {

     private static final ScheduledExecutorService executor =       Executors.newScheduledThreadPool(2);
     static DateFormat df= new SimpleDateFormat("dd-MMM-yyyy HH:mm:ss.SSS");

     private static class TestRunnable1 implements Runnable{
         private int count=0;

         @Override
          public void run() {
           count++;
           if(count1 % 1000==0){
              System.out.println(count1+"  "+df.format(Calendar.getInstance().getTime()));
            }

         }
    }

   public static void main(String[] args){
      Runnable localService = new TestRunnable1();
      try{
           executor.scheduleWithFixedDelay(localService, 0, 1, TimeUnit.MILLISECONDS);
         }catch(Exception e){
           e.printStackTrace();
        }
   }
 } 
```

控制台输出

1000 2013 年 3 月 13 日 14:43:54.477 2000 2013 年 3 月 13 日 14:44:10.296 3000 2013 年 3 月 13 日 14:44:26.381 4000 2013 年 3 月 13 日 14:44:42.621 5000 2013 年 3 月 13 日14:44:55.907 6000 2013 年 3 月 13 日 14:44:58.516 7000 2013 年 3 月 13 日 14:45:05.896 8000 2013 年 3 月 13 日 14:45:10.292 9000 2013 年 3 月 13 日 14:00:15.129 10 2013 年 3 月 13 日 14:45:18.187

谢谢， 阿比纳夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T07:15:20.203

你想使用`ScheduledExecutorService#scheduleAtFixedRate`而不是`ScheduledExecutorService#scheduleWithFixedDelay`.

如果您使用固定延迟进行调度，则在最后一次执行完成的时间和下一次执行开始的时间之间必须经过 1 毫秒。因此，完成 1000 次迭代所需的挂钟时间至少是 1 秒*加上*1000 次迭代的执行时间。

# jquery - 更改可拖动项目或如何以正确的方式删除可拖动数据

> ID：15378909
> 
> 赞同：0
> 
> 时间：2013-03-13T07:02:25.093
> 
> 标签：jquery, draggable, jquery-ui-draggable

我需要允许一些对象是可拖动的，但每次都是一组不同的对象。如何从上一组中删除可拖动数据？

PS`$('.draggable').draggable('destroy');`返回错误`Uncaught TypeError: Cannot read property 'options' of undefined`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T07:06:21.410

尝试这个：

```
$( ".selector" ).draggable( "disable" ); 
```

[http://api.jqueryui.com/draggable/#method-disable](http://api.jqueryui.com/draggable/#method-disable)

~KP

# c# - C# 作为用于 HTML5 websocket 连接的 Websocket 服务器

> ID：15378912
> 
> 赞同：4
> 
> 时间：2013-03-13T07:02:30.743
> 
> 标签：c#, html, websocket

我想现在是我问别人的时候了。是否可以使用 C# 和来自 HTML5 代码的服务器请求创建 websocket 服务器？

我目前正在为 websocket 使用系统包。我有一个通过互联网下载的代码，这里是：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace WebSocketChatServer
{
    using WebSocketServer;

    class ChatServer
    {
        WebSocketServer wss;
        List<User> Users = new List<User>();
        string unknownName = "john doe";

        public ChatServer()
        {

            // wss = new WebSocketServer(8181, "http://localhost:8080", "ws://localhost:8181/chat");

            wss = new WebSocketServer(8080, "http://localhost:8080", "ws://localhost:8080/dotnet/Chats");

            wss.Logger = Console.Out;
            wss.LogLevel = ServerLogLevel.Subtle;
            wss.ClientConnected += new ClientConnectedEventHandler(OnClientConnected);
            wss.Start();
            KeepAlive();

        }

        private void KeepAlive()
        {
            string r = Console.ReadLine();
            while (r != "quit")
            {
                if(r == "users")
                {
                    Console.WriteLine(Users.Count);
                }
                r = Console.ReadLine();
            }
        }

        void OnClientConnected(WebSocketConnection sender, EventArgs e)
        {
            Console.WriteLine("test");
            Users.Add(new User() { Connection = sender });
            sender.Disconnected += new WebSocketDisconnectedEventHandler(OnClientDisconnected);
            sender.DataReceived += new DataReceivedEventHandler(OnClientMessage);

        }

        void OnClientMessage(WebSocketConnection sender, DataReceivedEventArgs e)
        {
            Console.WriteLine(sender);
            User user = Users.Single(a => a.Connection == sender);
            if (e.Data.Contains("/nick"))
            {
                string[] tmpArray = e.Data.Split(new char[] { ' ' });
                if (tmpArray.Length > 1)
                {
                    string myNewName = tmpArray[1];
                    while (Users.Where(a => a.Name == myNewName).Count() != 0)
                    {
                        myNewName += "_";
                    }
                    if (user.Name != null)
                        wss.SendToAll("server: '" + user.Name + "' changed name to '" + myNewName + "'");
                    else
                        sender.Send("you are now know as '" + myNewName + "'");
                    user.Name = myNewName;
                }
            }
            else
            {
                string name = (user.Name == null) ? unknownName : user.Name;
                wss.SendToAllExceptOne(name + ": " + e.Data, sender);
                sender.Send("me: " + e.Data);
            }
        }

        void OnClientDisconnected(WebSocketConnection sender, EventArgs e)
        {
            try
            {

                User user = Users.Single(a => a.Connection == sender);
                string name = (user.Name == null) ? unknownName : user.Name;
                wss.SendToAll("server: "+name + " disconnected");
                Users.Remove(user);
            }
            catch (Exception exc)
            {

                Console.WriteLine("ehm...");
            }

        }
    }
} 
```

我有这个客户端代码：

```
<!HTML>
    <head>

        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js">
        </script>

        <script language="javascript" type="text/javascript">  

        jQuery(document).ready(function(){
            var socket = new WebSocket("ws://localhost:8080");  
            socket.onopen = function(){  
                alert("Socket has been opened!");  
            }  
        });
        </script>  
    </head>
</HTML> 
```

当我运行我的 C# 控制台应用程序并加载客户端页面时，该应用程序告诉我有人连接到它正在侦听的端口。但是在我的客户端，当我查看萤火虫的控制台时，它给了我初学者的经典错误：

```
Firefox can't establish a connection to the server at ws://localhost:8080/ 
```

我想要实现的是首先建立一个成功的 websocket 连接并将值从我的服务器推送到我的客户端。

我考虑过 Alchemy，但我拥有的版本是 Visual Studio express 2010，免费版本，它说“此版本的应用程序不支持解决方案文件夹”。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-31T07:43:05.307

我已经为 JavaScript/HTML 5 游戏开发服务器大约 7 个月了，现在您是否研究过 Alchemy Websockets？它很容易使用。

例子：

```
using Alchemy;
using Alchemy.Classes;
namespace GameServer
{
    static class Program
    {
        public static readonly ConcurrentDictionary<ClientPeer, bool> OnlineUsers = new ConcurrentDictionary<ClientPeer, bool>();
        static void Main(string[] args)
        {
            var aServer = new WebSocketServer(4530, IPAddress.Any)
            {
                OnReceive = context => OnReceive(context),
                OnConnected = context => OnConnect(context),
                OnDisconnect = context => OnDisconnect(context),
                TimeOut = new TimeSpan(0, 10, 0),
                FlashAccessPolicyEnabled = true
            };
        }
        private static void OnConnect(UserContext context)
        {
            var client = new ClientPeer(context);
            OnlineUsers.TryAdd(client, false);
            //Do something with the new client
        }
    }
} 
```

正如您所看到的，它非常易于使用，而且我发现他们的文档非常好（注意 ClientPeer 是我的一个自定义类，仅将其用作示例）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T07:06:46.487

如果你看看[ASP.NET SignalR ，你想要实现的目标会容易得多](http://signalr.net)

它支持高级集线器以实现实时通信，并且还具有持久连接低级类以对通信进行细粒度控制。

如果通信两端不支持 websockets，则支持多种客户端类型和回退（它可以选择使用长轮询或永久帧）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T07:45:49.857

此错误的原因是（可能）因为您没有响应握手。一旦建立连接，浏览器会发送一些数据，服务器必须做出适当的响应（否则浏览器将关闭连接）。[您可以在wiki](http://en.wikipedia.org/wiki/WebSocket#WebSocket_protocol_handshake)上或直接在[规范](https://www.rfc-editor.org/rfc/rfc6455)中阅读更多相关信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T08:07:37.537

我修改了我在网上下载的代码，这就是我现在得到的：

```
using System;
using System.Collections.Generic;
using System.Net.Sockets;
using System.Net;
using System.IO;
using System.Security.Cryptography;
using System.Threading;

namespace WebSocketServer
{
    public enum ServerLogLevel { Nothing, Subtle, Verbose };
    public delegate void ClientConnectedEventHandler(WebSocketConnection sender, EventArgs e);

    public class WebSocketServer
    {
        #region private members
        private string webSocketOrigin;     // location for the protocol handshake
        private string webSocketLocation;   // location for the protocol handshake
        #endregion
        static private string guid = "258EAFA5-E914-47DA-95CA-C5AB0DC85B11";
        static IPEndPoint ipLocal;

        public event ClientConnectedEventHandler ClientConnected;

        /// <summary>
        /// TextWriter used for logging
        /// </summary>
        public TextWriter Logger { get; set; }     // stream used for logging

        /// <summary>
        /// How much information do you want, the server to post to the stream
        /// </summary>
        public ServerLogLevel LogLevel = ServerLogLevel.Subtle;

        /// <summary>
        /// Gets the connections of the server
        /// </summary>
        public List<WebSocketConnection> Connections { get; private set; }

        /// <summary>
        /// Gets the listener socket. This socket is used to listen for new client connections
        /// </summary>
        public Socket ListenerSocker { get; private set; }

        /// <summary>
        /// Get the port of the server
        /// </summary>
        public int Port { get; private set; }

        public WebSocketServer(int port, string origin, string location)
        {
            Port = port;
            Connections = new List<WebSocketConnection>();
            webSocketOrigin = origin;
            webSocketLocation = location;
        }

        /// <summary>
        /// Starts the server - making it listen for connections
        /// </summary>
        public void Start()
        {
            // create the main server socket, bind it to the local ip address and start listening for clients
            ListenerSocker = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.IP);
            ipLocal = new IPEndPoint(IPAddress.Loopback, Port);
            ListenerSocker.Bind(ipLocal);
            ListenerSocker.Listen(100);

            LogLine(DateTime.Now + "> server stated on " + ListenerSocker.LocalEndPoint, ServerLogLevel.Subtle);

            ListenForClients();
        }

        // look for connecting clients
        private void ListenForClients()
        {
            ListenerSocker.BeginAccept(new AsyncCallback(OnClientConnect), null);
        }

        private void OnClientConnect(IAsyncResult asyn)
        {

            byte[] buffer = new byte[1024];
            string headerResponse = "";

            // create a new socket for the connection
            var clientSocket = ListenerSocker.EndAccept(asyn);
            var i = clientSocket.Receive(buffer);
            headerResponse = (System.Text.Encoding.UTF8.GetString(buffer)).Substring(0, i);
            //Console.WriteLine(headerResponse);

            if (clientSocket != null)
            {

                // Console.WriteLine("HEADER RESPONSE:"+headerResponse);
                var key = headerResponse.Replace("ey:", "`")
                              .Split('`')[1]                     // dGhlIHNhbXBsZSBub25jZQ== \r\n .......
                              .Replace("\r", "").Split('\n')[0]  // dGhlIHNhbXBsZSBub25jZQ==
                              .Trim();
                var test1 = AcceptKey(ref key);
                var newLine = "\r\n";
                var name = "Charmaine";
                var response = "HTTP/1.1 101 Switching Protocols" + newLine
                         + "Upgrade: websocket" + newLine
                         + "Connection: Upgrade" + newLine
                         + "Sec-WebSocket-Accept: " + test1 + newLine + newLine
                         + "Testing lang naman po:" + name
                         ;

                // which one should I use? none of them fires the onopen method
                clientSocket.Send(System.Text.Encoding.UTF8.GetBytes(response));
            }

            // keep track of the new guy
            var clientConnection = new WebSocketConnection(clientSocket);
            Connections.Add(clientConnection);
            // clientConnection.Disconnected += new WebSocketDisconnectedEventHandler(ClientDisconnected);
            Console.WriteLine("New user: " + ipLocal);
            // invoke the connection event
            if (ClientConnected != null)
                ClientConnected(clientConnection, EventArgs.Empty);

            if (LogLevel != ServerLogLevel.Nothing)
                clientConnection.DataReceived += new DataReceivedEventHandler(DataReceivedFromClient);

            // listen for more clients
            ListenForClients();

        }

        void ClientDisconnected(WebSocketConnection sender, EventArgs e)
        {
            Connections.Remove(sender);
            LogLine(DateTime.Now + "> " + sender.ConnectionSocket.LocalEndPoint + " disconnected", ServerLogLevel.Subtle);
        }

        void DataReceivedFromClient(WebSocketConnection sender, DataReceivedEventArgs e)
        {
            Log(DateTime.Now + "> data from " + sender.ConnectionSocket.LocalEndPoint, ServerLogLevel.Subtle);
            Log(": " + e.Data + "\n" + e.Size + " bytes", ServerLogLevel.Verbose);
            LogLine("", ServerLogLevel.Subtle);
        }

        /// <summary>
        /// send a string to all the clients (you spammer!)
        /// </summary>
        /// <param name="data">the string to send</param>
        public void SendToAll(string data)
        {
            Connections.ForEach(a => a.Send(data));
        }

        /// <summary>
        /// send a string to all the clients except one
        /// </summary>
        /// <param name="data">the string to send</param>
        /// <param name="indifferent">the client that doesn't care</param>
        public void SendToAllExceptOne(string data, WebSocketConnection indifferent)
        {
            foreach (var client in Connections)
            {
                if (client != indifferent)
                    client.Send(data);
            }
        }

        /// <summary>
        /// Takes care of the initial handshaking between the the client and the server
        /// </summary>

        private void Log(string str, ServerLogLevel level)
        {
            if (Logger != null && (int)LogLevel >= (int)level)
            {
                Logger.Write(str);
            }
        }

        private void LogLine(string str, ServerLogLevel level)
        {
            Log(str + "\r\n", level);
        }

        private static string AcceptKey(ref string key)
        {
            string longKey = key + guid;
            byte[] hashBytes = ComputeHash(longKey);
            return Convert.ToBase64String(hashBytes);
        }
        static SHA1 sha1 = SHA1CryptoServiceProvider.Create();
        private static byte[] ComputeHash(string str)
        {
            return sha1.ComputeHash(System.Text.Encoding.ASCII.GetBytes(str));
        }

        private void ShakeHands(Socket conn)
        {
            using (var stream = new NetworkStream(conn))
            using (var reader = new StreamReader(stream))
            using (var writer = new StreamWriter(stream))
            {
                //read handshake from client (no need to actually read it, we know its there):
                LogLine("Reading client handshake:", ServerLogLevel.Verbose);
                string r = null;
                while (r != "")
                {
                    r = reader.ReadLine();
                    LogLine(r, ServerLogLevel.Verbose);
                }

                // send handshake to the client
                writer.WriteLine("HTTP/1.1 101 Web Socket Protocol Handshake");
                writer.WriteLine("Upgrade: WebSocket");
                writer.WriteLine("Connection: Upgrade");
                writer.WriteLine("WebSocket-Origin: " + webSocketOrigin);
                writer.WriteLine("WebSocket-Location: " + webSocketLocation);
                writer.WriteLine("");
            }

            // tell the nerds whats going on
            LogLine("Sending handshake:", ServerLogLevel.Verbose);
            LogLine("HTTP/1.1 101 Web Socket Protocol Handshake", ServerLogLevel.Verbose);
            LogLine("Upgrade: WebSocket", ServerLogLevel.Verbose);
            LogLine("Connection: Upgrade", ServerLogLevel.Verbose);
            LogLine("WebSocket-Origin: " + webSocketOrigin, ServerLogLevel.Verbose);
            LogLine("WebSocket-Location: " + webSocketLocation, ServerLogLevel.Verbose);
            LogLine("", ServerLogLevel.Verbose);

            LogLine("Started listening to client", ServerLogLevel.Verbose);
            //conn.Listen();
        }

    }
} 
```

连接问题已解决，接下来是向客户端发送数据。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-04T11:08:18.523

只需使用以下代码在解决方案中更改 WebSocketServer.cs 文件中的握手，您的错误就会消失..

```
private void ShakeHands(Socket conn)
    {
        using (var stream = new NetworkStream(conn))
        using (var reader = new StreamReader(stream))
        using (var writer = new StreamWriter(stream))
        {
            //read handshake from client (no need to actually read it, we know its there):
            LogLine("Reading client handshake:", ServerLogLevel.Verbose);
            string r = null;
            Dictionary<string, string> headers = new Dictionary<string, string>();
            while (r != "")
            {
                r = reader.ReadLine();
                string[] tokens = r.Split(new char[] { ':' }, 2);
                if (!string.IsNullOrWhiteSpace(r) && tokens.Length > 1)
                {
                    headers[tokens[0]] = tokens[1].Trim();
                }
                LogLine(r, ServerLogLevel.Verbose);
            }

            //string line = string.Empty;
            //while ((line = reader.ReadLine()) != string.Empty)
            //{
            //    string[] tokens = line.Split(new char[] { ':' }, 2);
            //    if (!string.IsNullOrWhiteSpace(line) && tokens.Length > 1)
            //    {
            //        headers[tokens[0]] = tokens[1].Trim();
            //    }
            //}

            string responseKey = "";
            string key = string.Concat(headers["Sec-WebSocket-Key"], "258EAFA5-E914-47DA-95CA-C5AB0DC85B11");
            using (SHA1 sha1 = SHA1.Create())
            {
                byte[] hash = sha1.ComputeHash(Encoding.UTF8.GetBytes(key));
                responseKey = Convert.ToBase64String(hash);
            }

            // send handshake to the client
            writer.WriteLine("HTTP/1.1 101 Web Socket Protocol Handshake");
            writer.WriteLine("Upgrade: WebSocket");
            writer.WriteLine("Connection: Upgrade");
            writer.WriteLine("WebSocket-Origin: " + webSocketOrigin);
            writer.WriteLine("WebSocket-Location: " + webSocketLocation);
            //writer.WriteLine("Sec-WebSocket-Protocol: chat");
            writer.WriteLine("Sec-WebSocket-Accept: " + responseKey);
            writer.WriteLine("");
        }

        // tell the nerds whats going on
        LogLine("Sending handshake:", ServerLogLevel.Verbose);
        LogLine("HTTP/1.1 101 Web Socket Protocol Handshake", ServerLogLevel.Verbose);
        LogLine("Upgrade: WebSocket", ServerLogLevel.Verbose);
        LogLine("Connection: Upgrade", ServerLogLevel.Verbose);
        LogLine("WebSocket-Origin: " + webSocketOrigin, ServerLogLevel.Verbose);
        LogLine("WebSocket-Location: " + webSocketLocation, ServerLogLevel.Verbose);
        LogLine("", ServerLogLevel.Verbose);

        LogLine("Started listening to client", ServerLogLevel.Verbose);
        //conn.Listen();
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-01-12T21:10:43.967

您还可以查看[WebSocketRPC](http://websocket-rpc.net)库，它应该非常易于使用，用于“原始”连接和 RPC 连接（消息也可以混合）。

* * *

以下内容可能对您有用：
负责发送/接收原始消息的代码位于[Connection 类](https://github.com/dajuric/websocket-rpc/blob/master/Source/WebSocketRPC.Base/ClientServer/Connection.cs)中。在存储库中，您还可以找到[基本 JavaScript 客户端](https://github.com/dajuric/websocket-rpc/tree/master/Source/WebSocketRPC.JS/Resources)的实现方式。

免责声明：我是作者。

# f# - F# 中的自标识符是否有标准命名约定？

> ID：15378914
> 
> 赞同：8
> 
> 时间：2013-03-13T07:02:40.627
> 
> 标签：f#, naming-conventions, this, self

关于 F# 自标识符，如下所示：

```
type MyClass2 =
   let data = 123

   member whateverYouWant.PrintMessage() =
       printf "MyClass2 with Data %d" data 
```

[F# 类文档](http://msdn.microsoft.com/en-us/library/dd233205.aspx)说：

> 与其他 .NET 语言不同，您可以随意命名自我标识符；你不限于诸如self、Me或this之类的名字。

[（对 F# 中这种灵活的“自我标识符”有什么好处？](https://stackoverflow.com/questions/5355334/what-are-the-benefits-of-such-flexible-self-identifiers-in-f)这个问题的答案解释了这个问题的可能用处。）

我的问题是，是否有一个非官方的标准来命名自我标识符？也就是说，虽然可能没有*规定性*约定，但是否有关于F# 程序员在野外做什么的*描述性约定？*`this`? `x`? `self`?

**更新**

看起来这可能会关闭，但另一个问题的答案几乎不是答案，因为它只是显示了我已经知道的多个选项。我正在寻找共识。此外，这个问题是在 2009 年提出的，当时可能没有达成共识，而现在可能有。

同样有趣的是Don Syme所著的[Expert F# 3.0一书在示例中没有使用一致的自我标识符。](https://rads.stackoverflow.com/amzn/click/com/1430246502)相反，它似乎更喜欢单字母自我标识符，尤其是 letter `x`。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T07:11:47.447

```
type MyClass2 as self =
   let data = 123

   let privatePrintMessage() = self.PrintMessage()

   member this.PrintMessage() =
       printf "MyClass2 with Data %d" data 
```

有些人使用`member x.Name`, 但这是错误的，因为`x`没有解释它是什么，而且对于 F# 中最常用的名称之一 - 自我标识符应该是不言自明的！

有些人还选择在`member __.Name`不需要自我标识符时编写。这些通常是确保没有未使用的标识符的人（易于使用`--warnon:1182`）。其他人说这很奇怪，或者会导致不一致 - 选择你喜欢的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T09:04:50.233

有几个选项——人们经常写`this`or `self`or `x`。我认为`x`可能是最不具描述性的一个，但它经常被使用——也许这是一个错误的事情！另一个不错的选择是使用一个标识符来引用类的名称（例如，`person`或`point`），因为它提供了很多信息。

```
type Point(x:float, y:float) =
  member point.X = x
  member point.Y = y 
```

但我同意，当您实际上不使用自引用时，感觉有点多余。所以使用`__`是有意义的。我认为你不能只使用普通（单一）有点不幸`_`。

因此，总而言之，可能没有单一的推荐标准——但有一些常见的模式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T20:17:46.257

一个不同的答案（如果你喜欢的话）：

不，自我标识符没有标准命名约定。您应该为每个项目选择一个，并执行它。

# android - ViewPager（ViewPager）用作ListItem时无法正确切换页面

> ID：15378917
> 
> 赞同：1
> 
> 时间：2013-03-13T07:02:50.017
> 
> 标签：android, listview, android-viewpager

自过去 2 天以来，我一直在努力解决 ViewPager 页面滚动问题。请尝试帮助我。

我在 listView 中使用 ViewPager 作为 ListItem。每个 ListItem 都有不同的 ViewPager。我创建这个 ListView 和绑定 ViewPagers 的方式如下所示。

MainActivity -> ListAdapter -> 从 listView getView() 方法设置 PagerAdapter。我认为这个流程是正确的。

现在，我面临 ViewPager 的滚动问题。很难移动到下一页。当我尝试通过按住 ViewPager 来滚动时，下一页将到达一半（大约）并返回。

我已经将触摸事件从 ListView 重新路由到 ViewPager Listener。我请求您仔细阅读下面粘贴的代码并尝试帮助我。非常感谢你的帮助。

```
dash_board_list=(ListView)findViewById(R.id.dash_list);
    dash_board_list.addHeaderView(upFooter);

    // Getting adapter by passing xml data ArrayList
    dash_borad_adapter=new DashBoardAdapter(DashBoard.this,MENUITEMS, IMAGEIDS,mEmpId);        
    dash_board_list.setAdapter(dash_borad_adapter);
    dash_board_list.setSmoothScrollbarEnabled(false);
    dash_board_list.setScrollContainer(false);
    dash_board_list.setHorizontalScrollBarEnabled(false);
    dash_board_list.setVerticalScrollBarEnabled(false);

    dash_board_list.setOnTouchListener(new OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            // TODO Auto-generated method stub
            int id = (int) ((ListView)v).getSelectedItemId();
            DashBoardAdapter.listener.onTouch(v,event);
            return false;
        }
    }); 
```

My ListAdapter 和 ViewPager（列表适配器的内部类）如下所示。

```
public DashBoardAdapter(Context cont, String[] titles, int[] images, String empId) {

    titleData= titles;
    imageData = images;
    context = cont;
    mEmpId = empId;
    listRowView = new View[titleData.length]; 

}

public int getCount() {
    return titleData.length;
}

public Object getItem(int position) {
    return position;
}

public long getItemId(int position) {

    return position;
}

public View getView(int position, View convertView, ViewGroup parent) {

    View rowView ;

    View vi=convertView;   

    if(convertView==null){
        LayoutInflater inflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        rowView = inflater.inflate(R.layout.dash_board_list_row, parent, false); 

        PageViewer pager = new PageViewer(position,rowView);
        listRowView[position] = rowView;

    }
    else{
        rowView = convertView;
    }

    return rowView;
} 
public class PageViewer extends ViewPager{

/*  @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
    }*/

    public PageViewer(Context context) {
        super(context);
        // TODO Auto-generated constructor stub
    }

    public PageViewer(int position, View rowView) {
        super(context);
        myPager[position] = (ViewPager) rowView.findViewById(R.id.threepageviewer);
        // TODO Auto-generated constructor stub
        MyPagerAdapter adapter = new MyPagerAdapter(myPager[position],position, rowView);

    //  pager.setOffscreenPageLimit(3);
    //  pager.setAdapter(context);

        class ViewFlipperTouchListener implements OnTouchListener {

            @Override
            public boolean onTouch(View v, MotionEvent event) {
                // TODO Auto-generated method stub
                float  x2, y2, dx, dy;
                String direction;
                switch(event.getAction()) {
                    case(MotionEvent.ACTION_DOWN):
                        downXvalue = event.getX();
                        downYvalue = event.getY();
                        break;
                    case(MotionEvent.ACTION_UP):
                    {
                        x2 = event.getX();
                        y2 = event.getY();
                        dx = x2-downXvalue;
                            dy = y2-downYvalue;

                            // Use dx and dy to determine the direction
                        if(Math.abs(dx) > Math.abs(dy)) {
                            if(dx>0) {
                                direction = "right";
                                //pager.setCurrentItem(0,true);
                            }
                            else {
                                direction = "left";
                            //  pager.setCurrentItem(1,true);
                            }
                        } else {
                            if(dy>0) {
                                direction = "down";
                            }
                            else {
                                direction = "up";
                            }
                        }

                   //    int currPage = ((ListView)v).getSelectedItemPosition();

                    }

                }
                return false;
            }

       }

        listener = new ViewFlipperTouchListener();

        myPager[position].setOnTouchListener(listener);

    }
    @Override
    public boolean onInterceptTouchEvent(MotionEvent event) {

        if(true){
            Log.d("Dash","onInterceptTouchEvent");
        }
            return super.onInterceptTouchEvent(event);

    }

}

    public class MyPagerAdapter extends PagerAdapter {

    int iListPosition = -1;
    ViewPager myPager1;
    public int getCount() {
            return 3;
    }

    public MyPagerAdapter(View pager, int listPos, View rowView){
        iListPosition = listPos;
        //currentListRowView = rowView;

        myPager1 = (ViewPager) pager;
        myPager1.setOffscreenPageLimit(3);
        myPager1.setAdapter(this);
    //  myPager1.setCurrentItem(0,true);
        rowView.setId(listPos);   // to know the listpos which is used in reloading the graphs.
        //need to check whether it is conflicting with the actual ids
        myPager1.setTag(rowView);
        initButton(rowView);

           myPager1.setOnPageChangeListener(new OnPageChangeListener() {

            @Override
            public void onPageSelected(int arg0) {
                // TODO Auto-generated method stub
            }

            @Override
            public void onPageScrolled(int arg0, float arg1, int arg2) {
                // TODO Auto-generated method stub
            }
            @Override
            public void onPageScrollStateChanged(int arg0) {
                // TODO Auto-generated method stub
                if(arg0 ==ViewPager.SCROLL_STATE_DRAGGING) {
                 }
            }
        });
    }

enter code here 
```

# database - 在没有 RAD 组件的情况下创建表格和显示

> ID：15378920
> 
> 赞同：-2
> 
> 时间：2013-03-13T07:03:04.470
> 
> 标签：database, delphi, tquery

我的工作给了我一个挑战来做以下事情……我仍然是一个菜鸟，我会尽可能快地学习，但我有这个曲线球，但我无法完全理解它。

如果不是很麻烦...我如何创建、修改和显示表格，但有以下例外？

RAD 出来了。没有任何类型的数据集、查询或表组件。例如，不要使用：DataSource、DataSet、DBGrid、DBText、DBEdit 等）像 TADOConnection 这样的连接组件是可以接受的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T08:09:25.037

您可以使用该`ADOConnection.Execute`方法从查询中获取数据，然后以某种方式进行迭代和显示，例如使用 TStringGrid 或著名的 TVirtualTreeView

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T08:51:35.883

如果您可以使用 adoconnection，您可能可以使用 ADOQuery 组件。

然后你会得到这样的东西：

```
sl.Clear;
ADOQuery.Close;
try
  ADOQuery.SQL.Text:='SELECT names FROM phonebook';
  ADOQuery.Open;
  While not ADOQuery.Eof do begin
    sl.Add(AdoQuery.FieldByName('names').AsString);
    ADOQuery.Next;
  end;
finally
  ADOQuery.Close;
end; 
```

或者：

```
ADOQuery.Close;
try
  ADOQuery.SQL.Text := 'INSERT INTO phonebook (name,number)VALUES'+QuotedStr(NameString) +',' + QuotedStr(numberstring) +')'
  ADOQuery.ExecSQL;
finally
  ADOQuery.Close;
end; 
```

（这使用非参数化查询，使用参数化查询当然更好。）

# ios - 在iOS中解析JSON时是否可以检索描述以及状态码

> ID：15378928
> 
> 赞同：2
> 
> 时间：2013-03-13T07:03:25.640
> 
> 标签：ios, json, web-services

在我的 iPhone 应用程序中，我使用`JSON`. 在返回数据中，我得到一个状态码（200、404 等），以及它们正在发送的消息。

这是我在 Rest 客户端中得到的结果：

```
Status Code: 401 Invalid Access token
Cache-Control: private
Connection: Keep-Alive, Proxy-Support
Content-Length: 0
Date: Wed, 13 Mar 2013 06:37:26 GMT
Proxy-Support: Session-Based-Authentication
Server: Microsoft-IIS/7.5
Via: 1.1 WIN-JO3AMACI965
X-AspNet-Version: 4.0.30319
X-Powered-By: ASP.NET 
```

在此，我想得到消息“无效的访问令牌”以及状态码 401。这可能吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:05:43.347

假设您`NSURLConnection`用于发送请求，您可以从响应中获取状态码：

```
NSError* error = nil;
NSHTTPURLResponse* response = nil;

NSData* data = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];
int statusCode = response.statusCode;
NSString* statusText = [NSHTTPURLResponse localizedStringForStatusCode:statusCode]; 
```

如果您不使用同步请求，则可以使用[此处](https://stackoverflow.com/questions/6918760/nsurlconnectiondelegate-getting-http-status-codes)描述的委托方法。

希望有帮助。

# c - C“反斜杠编码/解码”特殊字符，如引号、制表符、转义符、换行符等

> ID：15378933
> 
> 赞同：0
> 
> 时间：2013-03-13T07:03:49.377
> 
> 标签：c, printf, terminology, encode, backslash

我想采用像 "Bob[TAB]John[TAB]Harry "The Hammer" Jones" 和 "反斜杠" 这样的字符串编码字符串：

"鲍勃\t约翰\t哈利\"锤子\"琼斯"

所以我可以读/写单行引用的值到文件中，而不会像 ESC、TAB、换行符这样的常见嫌疑人把它弄乱，但仍然存储在字符串中。

a）是否有“标准”方法来代替或重新发明轮子？b) 我在寻找什么“词”来描述我想要做什么？我觉得这当然应该是一个“重复”，但如果是这样的话，我不知道正确的术语。对于 URL，这将是 URLEncode/Decode，但是“反斜杠编码 C 中的特殊字符”这个词是什么？

# ruby - vagrant 不会使用 rbenv ruby 版本

> ID：15378937
> 
> 赞同：0
> 
> 时间：2013-03-13T07:04:07.747
> 
> 标签：ruby, bundler, vagrant, chef-solo

我正在使用 Vagrant 框：

[https://dl.dropbox.com/u/14292474/vagrantboxes/precise64-ruby-1.9.3-p194.box](https://dl.dropbox.com/u/14292474/vagrantboxes/precise64-ruby-1.9.3-p194.box)

它在 rbenv 下安装了 ruby​​1.9.3。我正在尝试测试一个 rails 应用程序，并且在我拥有的 chef-solo 配置器中（除其他外），这个块：

```
execute 'install' do
  action :run
  command "bundle install --path #{node.app_name.lib_path}/vendor/bundle --binstubs"
  cwd node.app_name.path 
end 
```

rbenv 安装在 vagrant 用户下，并指示全局使用 1.9.3。*出于某种原因，当在vagrant up*期间运行 bundler 时，它仍然使用 1.8.7，它只能在 /opt/vagrant_ruby 中找到。

我如何告诉 vagrant 我想使用 rbenv ruby​​ 来执行所有任务。我需要在*执行*块的*env*选项中传递一些东西吗？

 ** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T22:22:09.480

首先开始在你的服务器中获取 bundle 的路径：

```
$ which bundle
/opt/rbenv/shims/bundle 
```

然后，知道在厨师中包含 rbenv 食谱时，常数`RBENV_ROOT`等于 /opt/rbenv，修改您的命令如下：

```
command "#{RBENV_ROOT}/shims/bundle install --path #{node.app_name.lib_path}/vendor/bundle --binstubs" 
```

因此，您确保在安装时使用正确版本的 bundle。

您可以做的第二件事是在您与 chef- 一起使用的用户的 ~/.bashrc 顶部添加 rbenv 的路径（可以位于 /etc/profile.d/rbenv 但取决于您的安装）独奏

例如，如果您使用的是“部署程序”，请编辑 /home/deployer/.bashrc 以在文件顶部添加：

```
#Rbenv path for remote shells
source /etc/profile.d/rbenv.sh    # <--- adapt this to your installation

# If not running interactively, don't do anything
[ -z "$PS1" ] && return    # <--- remote shell (ssh connection) will stop at this line 
```*

# php - 尽管成功加载，但加载 php 页面后总是将 div 的 innerHTML 变为空

> ID：15378942
> 
> 赞同：0
> 
> 时间：2013-03-13T07:04:31.963
> 
> 标签：php, jquery, ajax

我通过 jquery 加载一个 div

```
$('#Detailvolunteer').load("http://localhost/../somepage.php") 
```

现在加载后我得到空的 div 内容，虽然它已成功加载。innerHTML 没有显示任何内容。我想要的是检查数据并隐藏 div 如果为空。但它总是显示为空。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T07:06:44.147

您需要为负载提供回调函数。 [加载（）](http://api.jquery.com/load/)

> 如果提供了“完成”回调，则在执行后处理和 HTML 插入后执行。回调会为 jQuery 集合中的每个元素触发一次，并依次设置为每个 DOM 元素。

```
$('#Detailvolunteer').load("http://localhost/../somepage.php",function(data){
   //hrere do some logic to replace. 
}); 
```

甚至像这样更好地使用

```
$('#result').load('ajax/test.html #container'); 
```

当这个方法执行时，它会检索 ajax/test.html 的内容，然后 jQuery 会解析返回的文档以找到 ID 为 container 的元素。该元素及其内容被插入到 ID 为 result 的元素中，其余检索到的文档将被丢弃。

# android - 使用 JavaScript 在 Unity 中进行客户端服务器编程

> ID：15378946
> 
> 赞同：0
> 
> 时间：2013-03-13T07:04:37.807
> 
> 标签：android, networking, unity3d, client-server, unityscript

我是网络编程的新手[`Unity3D`](http://unity3d.com/)，基本上我想通过 WiFi 使用[`Client Server Model`](http://www.hassanpur.com/blog/2010/09/android-development-implementing-a-simple-client-server-model/). 我有一些问题..比如

*   如何创建具有特定 IP 地址的服务器？
*   我怎样才能创建一个客户端，谁将连接到该服务器？
*   如何在客户端和服务器之间传输消息？

任何帮助，将不胜感激.. .......

我已经写了这个简单的代码......

```
function OnGUI()
{
  if(GUILayout.Button(" Initlized server"))
  {
   Network.InitializeServer(32,25001,false);
   Debug.Log("Server has been Initlized");
  }
  if(GUILayout.Button("connect to server"))
  {
    Network.Connect("127.0.0.1",25001);
  }
}
function OnConnectedToServer() {
    Debug.Log("Connected to server");
    // Send local player name to server ...
} 
```

我已经写了这个简单的代码，但 OnConnectedToServer 没有给我任何回应......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T17:20:05.317

> 如何创建具有特定 IP 地址的服务器？

对于 IP 地址部分，您将需要一个静态 IP。如果您在路由器后面，这意味着您必须首先确保您的 ISP 为您提供静态 IP。如果没有，您应该尝试使用[FreeDNS](http://freedns.afraid.org/)等服务，它将您的动态 IP 路由到一个网址。然后，您需要将特定端口端口转发到服务器，该服务器应具有静态本地 IP，以便于端口转发。

至于代码本身，我强烈建议你看看这个网站。它有关于使用 Unity 的内置网络制作客户端-服务器游戏的精彩视频教程。 [http://www.gamertogamedeveloper.com/](http://www.gamertogamedeveloper.com/)

至于您的代码，您没有说明如何运行该代码。你不应该让客户端和服务器在同一个实例中运行。您需要做的是在 Unity3d 调试器中运行服务器，然后构建客户端并将其作为独立应用程序运行。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-13T08:46:33.867

Raknet 看起来很有趣，看看这里：

*   [拉克网](http://en.wikipedia.org/wiki/RakNet)
*   [unity-Raknet](http://forum.unity3d.com/threads/13827-RakNet-amp-Unity-compatibility)

# php - 3个不同的代码错误

> ID：15378949
> 
> 赞同：0
> 
> 时间：2013-03-13T07:04:43.447
> 
> 标签：php, windows, mysqli

我的代码中有这 3 个错误。我该如何修复它们？

> 警告：mysqli_query() 期望参数 1 为 mysqli，整数在 D:\hosting....\html\template_signupfunctions.php 第 14 行给出
> 
> 警告：mysqli_num_rows() 期望参数 1 为 mysqli_result，在第 15 行给出的 inD:\hosting....\html\template_signupfunctions.php 为空
> 
> 警告：mysqli_num_rows() 期望参数 1 为 mysqli_result，布尔值在 D:\hosting....\html\template_signupfunctions.php 第 48 行给出
> 
> 警告：mysqli_num_rows() 期望参数 1 为 mysqli_result，布尔值在 D:\hosting....\html\template_signupfunctions.php 第 52 行给出

这是我的代码。

```
 session_start();
// If user is logged in, header them away
if(isset($_SESSION["username"])){
    header("location: message.php?msg=NO to that weenis");
    exit();
}

// Ajax calls this NAME CHECK code to execute
if(isset($_POST["usernamecheck"])){
    $db_conx = include_once("php_includes/db_connect.php");
    $username = preg_replace('#[^a-z0-9]#i', '', $_POST['usernamecheck']);
    $sql = "SELECT id FROM users WHERE username='$username' LIMIT 1";
    $query = mysqli_query($db_conx, $sql); 
    $uname_check = mysqli_num_rows($query) ;
    if (strlen($username) < 3 || strlen($username) > 16) {
        echo '<strong style="color:#F00;">3 - 16 characters please</strong>';
        exit();
    }
    if (is_numeric($username[0])) {
        echo '<strong style="color:#F00;">Usernames must begin with a letter</strong>';
        exit();
    }
   if ($uname_check < 1) {
        echo '<strong style="color:#009900;">' . $username . ' is OK</strong>';
        exit();
    } else {
        echo '<strong style="color:#F00;">' . $username . ' is taken</strong>';
        exit();
    }
}

// Ajax calls this REGISTRATION code to execute
if(isset($_POST["u"])){
    // CONNECT TO THE DATABASE
    $db_conx = include_once("php_includes/db_connect.php");
    // GATHER THE POSTED DATA INTO LOCAL VARIABLES
    $u = preg_replace('#[^a-z0-9]#i', '', $_POST['u']);
    $e = mysqli_real_escape_string($db_conx, $_POST['e']);
    $p = $_POST['p'];
    $g = preg_replace('#[^a-z]#', '', $_POST['g']);
    $c = preg_replace('#[^a-z ]#i', '', $_POST['c']);
    // GET USER IP ADDRESS
    $ip = preg_replace('#[^0-9.]#', '', getenv('REMOTE_ADDR'));
    // DUPLICATE DATA CHECKS FOR USERNAME AND EMAIL
    $sql = "SELECT id FROM users WHERE username='$u' LIMIT 1";
    $query = mysqli_query($db_conx, $sql); 
    $u_check = mysqli_num_rows($query);
    // -------------------------------------------
    $sql = "SELECT id FROM users WHERE email='$e' LIMIT 1";
    $query = mysqli_query($db_conx, $sql); 
    $e_check = mysqli_num_rows($query);
    // FORM DATA ERROR HANDLING
    if($u == "" || $e == "" || $p == "" || $g == "" || $c == ""){
        echo "The form submission is missing values.";
        exit();
    } else if ($u_check > 0){ 
        echo "The username you entered is alreay taken";
        exit();
    } else if ($e_check > 0){ 
        echo "That email address is already in use in the system";
        exit();
    } else if (strlen($u) < 3 || strlen($u) > 16) {
        echo "Username must be between 3 and 16 characters";
        exit(); 
    } else if (is_numeric($u[0])) {
        echo 'Username cannot begin with a number';
        exit();
    } else {
    // END FORM DATA ERROR HANDLING
        // Begin Insertion of data into the database
        // Hash the password and apply your own mysterious unique salt
        $cryptpass = crypt($p);
        include_once ("php_includes/randStrGen.php");
        $p_hash = randStrGen(20)."$cryptpass".randStrGen(20);
        // Add user info into the database table for the main site table
        $sql = "INSERT INTO users (username, email, password, gender, country, ip,      signup, lastlogin, notescheck)       
                VALUES('$u','$e','$p_hash','$g','$c','$ip',now(),now(),now())";
        $query = mysqli_query($db_conx, $sql); 
        $uid = mysqli_insert_id($db_conx);
        // Establish their row in the useroptions table
        $sql = "INSERT INTO useroptions (id, username, background) VALUES ('$uid','$u','original')";
        $query = mysqli_query($db_conx, $sql);
        // Create directory(folder) to hold each user's files(pics, MP3s, etc.)
        if (!file_exists("user/$u")) {
            mkdir("user/$u", 0755);
        }
        // Email the user their activation link
        $to = "$e";                          
        $from = "auto_responder@dragonsdengamming.com";
        $subject = 'Dragons Den Gaming Account Activation';
        $message = '<!DOCTYPE html><html><head><meta charset="UTF-8"><title>Dragons Den Gaming</title></head><body style="margin:0px; font-family:Tahoma, Geneva, sans-serif;"><div style="padding:10px; background:#333; font-size:24px; color:#CCC;"><a href="http://www.yoursitename.com"><img src="images/logo.png" width="200" height="200" alt="yoursitename" style="border:none; float:left;"></a>yoursitename Account Activation</div><div style="padding:24px; font-size:17px;">Hello '.$u.',<br /><br />Click the link below to activate your account when ready:<br /><br /><a href="http://www.yoursitename.com/activation.php?id='.$uid.'&u='.$u.'&e='.$e.'&p='.$p_hash.'">Click here to activate your account now</a><br /><br />Login after successful activation using your:<br />* E-mail Address: <b>'.$e.'</b></div></body></html>';
        $headers = "From: $from\n";
        $headers .= "MIME-Version: 1.0\n";
        $headers .= "Content-type: text/html; charset=iso-8859-1\n";
        mail($to, $subject, $message, $headers);
        echo "signup_success";
        exit();
    }
    exit();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T07:18:40.160

好吧，看来这个问题碰巧比我一开始想的更难解决。

include 无法按照您使用它的方式工作。
它不返回任何内容，只是从包含的文件中运行代码。
所以，很可能你必须以这种方式运行它

```
include_once("php_includes/db_connect.php"); 
```

如果您已`$db_conx`在此文件中设置 - 一切都会正常。

但还有其他问题

1.  您没有使用准备好的语句
2.  您正在使用 mysqli，而必须使用 PDO

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-13T07:08:33.047

也许您应该查看有关如何设置数据库连接的手册：http: [//php.net/manual/de/mysqli.query.php](http://php.net/manual/de/mysqli.query.php)

php_includes/db_connect.php 的来源是什么？

# c# - 如何在使用imagebutton时在c#的编辑模式下禁用gridview中的输入键

> ID：15378955
> 
> 赞同：2
> 
> 时间：2013-03-13T07:04:57.940
> 
> 标签：c#, asp.net

单击一个按钮，我正在显示这个`gridview`，问题是当我输入时

`Enter`当gridview处于编辑模式时，它正在更新gridview的第一行..我知道

如何禁用整个页面的输入，但不知道如何为`image button`.

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
                  DataKeyNames="st_id"  OnRowEditing="EditRecord"

                OnRowCancelingEdit="CancelRecord" OnRowUpdating="UpdateRecord" 
                       CellPadding="4" EnableModelValidation="True" ForeColor="Black" 
                       GridLines="Vertical" BackColor="White" BorderColor="#DEDFDE" 
                       BorderStyle="None" BorderWidth="1px">
                       <AlternatingRowStyle BackColor="White" />
                    <Columns>
                        <asp:CommandField EditImageUrl="~/Styles/image/Icon-edit-22x22.png" ShowEditButton="true" 
                            ButtonType="Image"  CancelImageUrl="~/Styles/image/cancel.png" 
                            UpdateImageUrl="~/Styles/image/update.png" CausesValidation="true"  ValidationGroup="bottom" />
                       ------ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T07:36:21.137

> 一个简单的`jquery`功能将为您解决问题。

```
<script src="Scripts/jquery-1.8.2.js" type="text/javascript"></script>
<script type="text/javascript">

    $(document).ready(function () {
        $("#GridView1").keydown(function (e) {
            if (e.keyCode == 13) {
                return false;
            }
        });

    });

</script> 
```

# zend-form - ZF2表格元素说明

> ID：15378957
> 
> 赞同：0
> 
> 时间：2013-03-13T07:05:09.443
> 
> 标签：zend-form, zend-framework2, zend-form-element

在 ZF1 表单和表单元素中，有一个在视图`setDescription`中输出的方法`<p>description here</p>`.... ZF2 似乎没有这个方法，所以我的问题是如何向表单元素添加描述？

这是我的观点：

```
<div>
    <?
    $form = $this->form;
    $form->prepare();
    echo $this->form()->openTag($form);

    foreach ($form->getElements() as $el) {
        ?>
        <div class="form_element">
            <?=$this->formRow($el);?>
        </div>
        <?
    }
    echo $this->partial('system/form/buttons_form_part.phtml', array('form' => $form));
    echo $this->form()->closeTag();
    ?>
</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T22:04:02.130

使用 ZF 2.1.5，一种解决方案可能是`setOptions()`.

在形式定义中：

```
$file = new Element\File('file');
$file->setLabel('Photo (.jpg, .gif, .png)');
$file->setOptions(array('description' => 'test description'));
… 
```

渲染表单元素时：

```
$element = $form->get(…);    
var_dump($element->getOptions()); 
```

将让您访问：

```
array(1) { ["description"]=> string(16) "test description" } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T21:10:18.133

如果您的意思是元素的标签，您可以`setLabel`在创建表单时使用该方法（在控制器中）。

```
$name = new Element('name');
$name->setLabel('Your name'); 
```

或者，如果您使用数组来创建表单元素，请使用：

```
array(
        'spec' => array(
            'name' => 'name',
            'options' => array(
                'label' => 'Your name',
            ),
            'attributes' => array(
                'type'  => 'text'
            ),
        )
    ), 
```

这是一个链接：

[在此处输入链接描述](https://zf2.readthedocs.org/en/latest/modules/zend.form.quick-start.html)

# iphone - UITableView 更新不删除节标题

> ID：15378969
> 
> 赞同：0
> 
> 时间：2013-03-13T07:06:14.113
> 
> 标签：iphone, uitableview, uikit

我有一个表格视图，当显示超过 X 个项目时，它会显示部分标题：

[![30](../Images/1269150454cf3f97bca3c81324ab94e3.png)](https://i.stack.imgur.com/OuWPq.png)

当我删除最后一项低于 X （并因此删除部分标题）时，标题视图高度得到正确更新，但视图本身仍然存在：

[![无标题](../Images/e072d14ac5916ba4bdb2c0917bacce02.png)](https://i.stack.imgur.com/QZqNC.png)

一旦我开始滚动表格视图，它们就会消失。

关于如何解决这个问题的任何想法？（调用`reloadData`显然可以，但似乎是一个讨厌且不必要的昂贵解决方案）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T07:16:07.237

你是调用[setNeedsLayout 还是 setNeedsDisplay](https://stackoverflow.com/questions/14506968/setneedslayout-and-setneedsdisplay)来触发子视图的重绘？

# android - UIThread 的 Looper 和 Android 应用执行机制

> ID：15378970
> 
> 赞同：0
> 
> 时间：2013-03-13T07:06:18.460
> 
> 标签：android

当我启动应用程序时发生了什么，在 UIThread、Looper 等之间触摸屏幕

这是我推测的。请纠正我

android将每个activity生命周期方法放入uithread的looper中，由uithread执行。例如：

用户启动了应用程序 - android 将启动器活动`onCreate()`放入队列中，uithread 执行它，稍后类似 onStart()。

当用户触摸屏幕时会发生什么，android是否运行“用户界面事件循环”，将相应的事件侦听器的方法类似地放入队列中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T09:02:48.210

我认为当一个应用程序启动时，您可以在 android 开发者网站上了解活动生命周期

[资源](http://developer.android.com/training/basics/activity-lifecycle/index.html)

关于触摸和事件发生，UI 都是用 Android 操作系统编写的，其黄皮书没有被 Google 发布。我们可以做的是，我们可以执行操作，修改操作系统的行为等等。

# continuous-integration - Teamcity - 首先是最短的工作？

> ID：15378974
> 
> 赞同：2
> 
> 时间：2013-03-13T07:06:29.813
> 
> 标签：continuous-integration, teamcity, scheduling

我们有一个 teamcity 服务器和数量有限的构建代理。一些构建配置运行时间很长，而另一些则很短。

有没有办法可以配置 Teamcity 以实现[最短作业优先](http://en.wikipedia.org/wiki/Shortest_job_next)或类似算法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T12:18:32.803

[目前，您可以使用此](http://confluence.jetbrains.com/display/TCD7/Ordering+Build+Queue#OrderingBuildQueue-ManagingBuildPriorities)管理构建队列创建优先级类。此功能是作为开源插件构建的。[您可以在此处](http://confluence.jetbrains.com/display/TW/Build+Queue+Priorities)阅读相关内容，源代码在[此处](http://svn.jetbrains.org/teamcity/plugins/priority-queue/trunk/)。因此，如果当前功能对您来说还不够，您可以尝试根据现有功能编写自己的插件。

# ruby-on-rails - 登录或创建 Devise on Rails？

> ID：15378981
> 
> 赞同：1
> 
> 时间：2013-03-13T07:07:13.943
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

我打算在 Devise on Rails 上构建自定义逻辑。逻辑如下：用户可以尝试登录，如果不存在，则为用户创建帐户。只是跳过注册过程。

现在确定如何入侵设计。请帮忙！

先感谢您！

编辑：对不起，我说得不够清楚：我已经在用户模型上实现了 on-create-validation 以向另一个系统进行身份验证。逻辑是：如果另一个系统的验证器成功，则使用相同的密码和登录用户创建一个新用户。

否则登录失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T07:15:16.367

您知道如果有人打错字，他会创建新帐户并且会因为他/她的所有东西都消失而生气吗？当用户数量很少时，这不是问题。但是，当您的社会发展壮大时，它可以使您成为一些黑公关。您应该通过 AJAX 调用检查是否有用户使用该电子邮件/用户名/昵称，如果没有，则显示注册表单，但另一方面，如果您的用户使用电子邮件或电子邮件等非公开数据登录，这可能是安全问题如果用户名与您页面上显示的昵称不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T07:18:13.843

如果他们不小心输入了错误的密码或用户名怎么办？然后你只是自动为他们创建一个帐户？IMO 那将是一个糟糕的用户体验。您要么知道您的帐户，要么不知道。如果您有一个帐户但不记得了，那么您可以使用“忘记我的...”。如果你没有帐户，那么你去注册。您可以实施 oAuth 并使用来自多个站点（即 Github、Twitter、Facebook 等）的帐户，这将使其更容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T07:37:39.447

为什么要跳过注册过程？我没有看到任何好处。

首先，用户可能不小心输入了错误的用户名或密码。其次，用户可以输入正确的用户名，但输入错误的密码。所以他/她已经是注册用户，但仍然获得一个新帐户。第三，当一个新用户被自动注册时，用户现在实际上是他的用户名，或者更重要的是，他的密码是什么？

就个人而言，为什么不添加“记住我”或“忘记密码”？到您的登录表单。如果出于任何原因，用户不想输入他的登录数据或根本不知道登录所需的密码，他可以使用这些选项。

或者，如果您正在使用权限，为什么不在有人未登录的情况下创建访客用户？

# android - SQLite 数据库在 Android 中被删除

> ID：15378989
> 
> 赞同：1
> 
> 时间：2013-03-13T07:07:46.823
> 
> 标签：android, database, sqlite

大家好，

我已经构建了一个示例应用程序，它从用户那里获取输入并将其保存在数据库的表中。我为我的应用程序创建了自己的数据库并将数据保存在其中。每件事似乎都很好。前几天，我启动了 Eclipse IDE 并开始运行我的应用程序。我无法在我的应用程序中看到任何数据。

当我在文件资源管理器（DDMS）中看到时，没有数据库（我的数据库、表、其中的所有数据都丢失了）。我听说 SQLite 数据库是持久的。我使用通用语法来创建数据库和表。请任何人告诉我为什么会这样。

这是我的 MainActivity.java，

```
 public class MainActivity extends Activity {

public final android.content.Context Context = MainActivity.this;
public String ReadingMode = "";
public String Value = "";
public String DialogStatus = "";

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);     

    Button saveWaterReadingToDB = (Button) findViewById(R.id.saveReading);
    saveWaterReadingToDB.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {

            final String TABLE_NAME = "WaterElectricity";
            String COLUMN_NAME_READING_ID = "_Id";
            String COLUMN_NAME_READING_MODE = "ReadingMode";
            String COLUMN_NAME_PASTDATETIME = "StartDateTime";
            String COLUMN_NAME_READINGVALUE = "ReadingValue";

            final SQLiteDatabase DB = Context.openOrCreateDatabase(
                    "WaterElectricityReadingDataBase.db",
                    MODE_WORLD_READABLE, null);

            final String CREATE_TABLE = "create table if not exists "
                    + TABLE_NAME + " (" + COLUMN_NAME_READING_ID
                    + " integer primary key autoincrement,"
                    + COLUMN_NAME_READING_MODE + " text not null,"
                    + COLUMN_NAME_PASTDATETIME + " date not null, "
                    + "EndDateTime date not null, "
                    + COLUMN_NAME_READINGVALUE + " integer not null" + ");";

             DB.execSQL(CREATE_TABLE);
                         }
        }); 

       } 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T07:33:18.553

每次恢复/重新运行模拟器时，所有数据库都可能会被删除。

关闭 eclipse与您的数据库删除**无关，因为它都保存在您的 emulators 目录中。**

您的模拟器数据库实际上存储在一块虚拟内存上。要查看此内容（在 Windows 中），请转到 username/.android/avd，您将看到所有 AVD 设置为目录（包含与该模拟器有关的所有文件）

## 确保未选中：

![确保未选中此项](../Images/e1b688b54b65b6163a1248804ccef99b.png)

## 带文件的文件路径：

![带文件的文件路径](../Images/c9756486576b3aaab8c5d99c621c66b5.png)

## SD卡img文件（包含实际的db）？：

* * *

**这只是我对哪个文件是实际 sdcard 文件的有根据的猜测。有人随时纠正我。**

* * *

![在此处输入图像描述](../Images/d6d3d46d0c84f3ba4c798aff529ca23c.png)

# php - 解析 Google Maps API 的纬度和经度

> ID：15378991
> 
> 赞同：1
> 
> 时间：2013-03-13T07:07:51.263
> 
> 标签：php, json, google-maps-api-3

我正在尝试使用 Google 地图 API 获取地址的纬度/经度。我无法解析 JSON 结果，只是将 lat 和 lng 值存储为 PHP 变量。谁能帮我解析这个？

**这是我到目前为止所拥有的：**

```
<?php

$jsonObject = file_get_contents(
"http://maps.googleapis.com/maps/api/geocode/json?
address=1600+Amphitheatre+Parkway,+Mountain+View,+CA&sensor=true");

$object = json_decode($jsonObject);

$lat = $object->results[0]->geometry[0]->location[0]->lat;
$lng = $object->results[0]->geometry[0]->location[0]->lng;

echo "$lat, $lng";

?> 
```

**这是 JSON 提要（lat/lng 值大约是代码的三分之二）：**

```
 {
"results" : [
  {
     "address_components" : [
        {
           "long_name" : "1600",
           "short_name" : "1600",
           "types" : [ "street_number" ]
        },
        {
           "long_name" : "Amphitheatre Parkway",
           "short_name" : "Amphitheatre Pkwy",
           "types" : [ "route" ]
        },
        {
           "long_name" : "Mountain View",
           "short_name" : "Mountain View",
           "types" : [ "locality", "political" ]
        },
        {
           "long_name" : "Santa Clara",
           "short_name" : "Santa Clara",
           "types" : [ "administrative_area_level_2", "political" ]
        },
        {
           "long_name" : "California",
           "short_name" : "CA",
           "types" : [ "administrative_area_level_1", "political" ]
        },
        {
           "long_name" : "United States",
           "short_name" : "US",
           "types" : [ "country", "political" ]
        },
        {
           "long_name" : "94043",
           "short_name" : "94043",
           "types" : [ "postal_code" ]
        }
     ],
     "formatted_address" : "1600 Amphitheatre Parkway, Mountain View, CA 94043, USA",
     "geometry" : {
        "location" : {
           "lat" : 37.4216410,
           "lng" : -122.08550160
        },
        "location_type" : "ROOFTOP",
        "viewport" : {
           "northeast" : {
              "lat" : 37.42298998029150,
              "lng" : -122.0841526197085
           },
           "southwest" : {
              "lat" : 37.42029201970850,
              "lng" : -122.0868505802915
           }
        }
     },
     "types" : [ "street_address" ]
  }
],
"status" : "OK"
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T07:46:27.570

`geometry`并且`location`不是数组，请尝试

```
$lat = $object->results[0]->geometry->location->lat;
$lng = $object->results[0]->geometry->location->lng; 
```

# wix - 如何从构建服务器设置版本和内部版本号并使用此版本更新程序集？

> ID：15378993
> 
> 赞同：1
> 
> 时间：2013-03-13T07:07:54.193
> 
> 标签：wix, continuous-integration

我想创建一个基于 WiX 的安装项目，它执行以下操作（以及创建安装包）：

*   可从运行在 CI 构建服务器 (Hudson) 上的**msbuild**调用
*   从安装项目或主程序集中的某些资产中获取版本号
*   从 CI 系统获取当前版本号
*   创建完整的产品版本号 [version].[build] 例如 1.3.432
*   将此值存储在资产（例如主程序集）中，以便可以在运行时读取并显示在启动窗口上

我尝试了多种方法并搜索了很多，但没有找到可行的解决方案。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T14:53:33.707

WiX 工具集通过在 MSBuild 期间创建 a `version.cs`、 a`version.h`和 a`version.wxi`然后将这些文件包含在所有项目中来实现此目的。这样，当您运行类似的东西时，我们的可执行文件可以打印出它们的版本，`candle.exe -?`并且所有捆绑包和 .msi 包的版本都设置正确。

`tools\WixBuild.Version.targets`你可以在（[这里](https://github.com/wixtoolset/wix3/blob/develop/tools/WixBuild.Version.targets)）看到我们是如何做到这一点的。如果需要，可以直接`WixBuild.Version.targets`使用通过 Hudson 通过命令行传递给 MSBuild 的属性来覆盖属性。

# queue - 队列中的作业在 Gearman 中意外删除

> ID：15378995
> 
> 赞同：2
> 
> 时间：2013-03-13T07:08:15.420
> 
> 标签：queue, gearman

我现在正在处理一个非常奇怪的问题。

由于我一次将超过 1,000 个作业排队，因此 Gearman 到目前为止无法正常工作......

问题是，当我在后台模式下保留作业时，我可以看到作业已从监视页面（齿轮监视器）正确排队，但在没有将其交付给工作人员的情况下立即耗尽。（几秒钟之内）毕竟，工作永远不会被工作人员执行，只是从队列（作业服务器）中消失了。

所以我尝试完全重新启动服务器，并重新安装 gearman 以及 php 库。（我使用的是 1 个 CentOS，1 个带有 PHP gearman 库的 Ubuntu，版本是 0.34 和 1.0.2）但是还没有运气......正如我在 aobve 中解释的那样，作业服务器行为不端。

我现在该怎么办？我可以检查工人的状态，或者查看和监控从排队工作到交付给工人的整个过程吗？当我尝试使用类似以下选项的 gearmand 时：'gearmand -vvvv' 当我将工作人员注册到服务器并使用客户端代码（PHP）运行作业时，它从不在屏幕上打印任何内容

任何评论将不胜感激。

供您参考，我暂时不考虑使用 MySQL 或 SQLite 的持久队列，因为它有时会出现执行缓慢的性能问题。

# solr - 如何让 Solr 不区分“John”和“JOHN”

> ID：15378998
> 
> 赞同：1
> 
> 时间：2013-03-13T07:08:31.620
> 
> 标签：solr

在 solr 中，我必须在我的数据库的“名称”字段中获取 uniqque 值。

出于这个原因，我阅读了关于分组的内容，我得到了想要的结果

```
{
  "responseHeader":{
    "status":0,
    "QTime":16,
    "params":{
      "indent":"true",
      "q":"name:И*",
      "group.field":"name",
      "group":"true",
      "wt":"json"}},
  "grouped":{
    "name":{
      "matches":2231,
      "groups":[{
          "groupValue":"ИВАН",
          "doclist":{"numFound":1144,"start":0,"docs":[
              {
                "obshtina":"ПЛОВДИВ",
                "phone":"032/670309",
                "timestamp":"2013-03-04T08:43:53.553Z"}]
          }},
        {
          "groupValue":"ИЛИЯ",
          "doclist":{"numFound":177,"start":0,"docs":[
              {
                "obshtina":"БРЕЗОВО",
                "phone":"(3191)2265",
                .............................. 
```

问题是现在我注意到不幸的是我有 2 个组实际上是相同的 'Иван' 和 'ИВАН' 。问题是我的“名称”字段应该是字符串类型，所以我可以使用我需要的通配符，所以我不能让它成为例如文本并使用小写过滤器

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T08:12:50.687

您可以使用[KeywordTokenizerFactory](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.KeywordTokenizerFactory)（绝对没有标记化，就像字符串字段一样）和[LowerCaseFilterFactory](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.LowerCaseFilterFactory)来获得您想要的。

您仍然可以执行通配符搜索。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T10:18:00.397

添加到上一个答案中，您可以使用如下新的 Solr 文本类型，在索引时只需将值存储为小写的单个标记。在搜索时，只需将搜索文本视为小写的单个标记。这样就可以得到想要的效果。

```
 <fieldType name="lcase" class="solr.TextField" positionIncrementGap="100">
     <analyzer type="index">
             <tokenizer class="solr.KeywordTokenizerFactory"/>
             <filter class="solr.LowerCaseFilterFactory" />
         </analyzer>
         <analyzer  type="query">
             <tokenizer class="solr.KeywordTokenizerFactory"/>
             <filter class="solr.LowerCaseFilterFactory" />
         </analyzer>
      </fieldType> 
```