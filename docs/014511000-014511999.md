# StackOverflow 问答 14511000-14511999

# javascript - Angular.js 与 Sinatra

> ID：14511002
> 
> 赞同：10
> 
> 时间：2013-01-24T21:20:10.827
> 
> 标签：javascript, sinatra, angularjs

我想在我的 Sinatra 应用程序中使用 Angular.js。不幸的是，我找不到任何有用的提示。我确实找到了一些 Rails 示例，但是与 Sinatra 的简约哲学相比，我一直发现 Rails 和 Padrino 很难处理。

我观看了一些视频（通过谷歌搜索 angular.js 找到），但仍然发现很难应用于 Sinatra。

到目前为止，我发现的最全面的教程是[来自](http://www.yearofmoo.com/2012/08/use-angularjs-to-power-your-web-application.html)yearofmoo.com 的教程。

但是我仍然在尝试将其应用于 Sinatra 时迷失了方向，并且破解我的方法似乎不是一种选择，因为任何地方的简单错误都可能让我走上正确的道路。我迷路了，我承认！！

如果您分享任何基于您尝试做类似事情的经验的帮助，我们将不胜感激。在这一点上，我需要的只是将我的 JSON 从 Sinatra 应用程序引导到 angular.js 驱动的页面。

谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-24T22:06:08.620

正如我在上面的评论中所说，应用程序结构将不再依赖服务器来模板化 UI 或生成标记。您的服务器本质上是一个数据和文件主机。

好的..假设您在 Sinatra 中有一些路由设置为返回以下 json（内容类型：application/json）：

```
[
  { "id": 1, "name": "Foo" },
  { "id": 2, "name": "Bar" }
] 
```

然后，您将在 Angular 中使用类似的东西来加载该数据（基本上）：

应用程序.js

```
//create your application module.
var app = angular.module('myApp', []);

//add a controller to it
app.controller('MyCtrl', function($scope, $http) {

   //a scope function to load the data.
   $scope.loadData = function () {
      $http.get('/Your/Sinatra/Route').success(function(data) {
         $scope.items = data;
      });
   };

}); 
```

然后在你的标记中你会这样做：

```
<!DOCTYPE html>
<html ng-app="myApp">

  <head>
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.0.3/angular.min.js"></script>
    <script src="app.js"></script>
  </head>

  <body ng-controller="MyCtrl">
    <button ng-click="loadData()">Load Data From Server</button>
    <ul>
         <li ng-repeat="item in items">ID: {{item.id}}, Name: {{item.name}}</li>
    </ul>
  </body>

</html> 
```

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-26T00:41:15.360

I found [this Sinatra tutorial](http://net.tutsplus.com/tutorials/javascript-ajax/building-single-page-web-apps-with-sinatra-part-1/) was helpful even though it uses Knockout.js not Angular. It helps you build a Sinatra application that returns JSON, and it was quite straightforward to take the concepts and code from the [Angular tutorial](http://docs.angularjs.org/tutorial/) to connect to this simple backend.

# php - 用 MySQL 中的几个词填充下拉列表

> ID：14511004
> 
> 赞同：1
> 
> 时间：2013-01-24T21:20:11.080
> 
> 标签：php, mysql

使用包含两个或多个单词的字段填充 MySQL 的下拉列表时出现问题。

例如，当我使用名称填充下拉列表时，它显示为 John Smith，但是当我从该下拉列表中将数据输入到另一个表中时，只有 John 存储在没有 Smith 的数据库中。

可能是什么问题呢？

这是代码：

```
<td>
  <select name="opstina">
    <option value=></option>
    <?php
        $query = mysql_query("SELECT * FROM opstine");
        while($podaci = mysql_fetch_array($query))
        {
            echo "<option value= {$podaci['naziv']}>{$podaci['naziv']}</option>";
        }
    ?>
  </select>
</td> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T22:28:10.887

您可能需要引用您的价值观...

```
<td>
    <select name="opstina"> 
    <option value=""></option> 
    <?php 
        $query = mysql_query("SELECT * FROM opstine"); 
        while($podaci = mysql_fetch_array($query)) { 
            echo '<option value="' . $podaci['naziv'] . '">' . $podaci['naziv'] . '</option>'; 
        }
    ?> 
    </select>
</td> 
```

否则它最终会出现`<option value=John Smith>`在 HTML 中，并且只有 John 会被分配给这个值......你希望它是`<option value="John Smith">`......

# eclipse - 无法启动 Rational Software Architect [eclipse]

> ID：14511008
> 
> 赞同：0
> 
> 时间：2013-01-24T21:20:22.013
> 
> 标签：eclipse, rational-rsa

我已经更新了理性软件架构师的 eclipse [3.6 到 3.7]。更新它后，我无法启动理性的软件架构师，虽然窗口任务管理器显示了一个名为 eclipse 的进程，但没有出现任何内容。当我启用控制台日志时，它向我显示以下消息并开始

```
 C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp\bootProfile_278dcaa46b40_91b46910b12
!SESSION 2013-01-24 16:11:27.765 -----------------------------------------------
eclipse.buildId=M20120208-0800
java.fullversion=JRE 1.6.0 IBM J9 2.4 Windows XP x86-32 jvmwi3260sr9-20110726_87724 (JIT enabled, AOT enabled)
J9VM - 20110726_087724
JIT  - r9_20101028_17488ifx17
GC   - 20101027_AA
BootLoader constants: OS=win32, ARCH=x86, WS=win32, NL=en_US
Framework arguments:  -product com.ibm.rational.rsa4ws.product.v80.ide
Command-line arguments:  -os win32 -ws win32 -arch x86 -product com.ibm.rational.rsa4ws.product.v80.ide -consoleLog

!ENTRY org.eclipse.equinox.common 4 0 2013-01-24 16:11:30.328
!MESSAGE FrameworkEvent ERROR
!STACK 0
org.osgi.framework.BundleException: The bundle "org.eclipse.equinox.common_3.6.0.v20100503 [1630]" could not be resolved. Reason: Another singleton version selected: org.eclipse.equinox.common_3.6.0.v20110523, Another singleton version selected: org.eclipse.equinox.common_3.6.0.v20110523
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.getResolverError(Unknown Source)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.getResolutionFailureException(Unknown Source)
    at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(Unknown Source)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.resume(Unknown Source)
    at org.eclipse.osgi.framework.internal.core.Framework.resumeBundle(Unknown Source)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.resumeBundles(Unknown Source)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.resumeBundles(Unknown Source)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.incFWSL(Unknown Source)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.doSetStartLevel(Unknown Source)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.dispatchEvent(Unknown Source)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.dispatchEvent(Unknown Source)
    at org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(Unknown Source)
    at org.eclipse.osgi.framework.eventmgr.EventManager$EventThread.run(Unknown Source) 
```

谁能建议我应该怎么做才能实现正常启动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T22:29:11.017

您可能有更多版本的相同插件。您应该删除旧版本。也许对您来说，对所有内容进行全新安装会变得更容易。

# javascript - 映射路线历史

> ID：14511012
> 
> 赞同：-1
> 
> 时间：2013-01-24T21:20:36.247
> 
> 标签：javascript, google-maps-api-3

我需要显示一条由 1,000-2,000（纬度/经度）点组成的路线。

我尝试这样做，但我认为显示这么多点的路线不是一个好的解决方案；请建议最好的方法。

```
function calcRoute() {    
    var request = {
        origin:new google.maps.LatLng(37, -97),
        waypoints: [
        {
            location:new google.maps.LatLng(39, -97),
            stopover:false
        },{
            location:new google.maps.LatLng(32, -95),
            stopover:false
        }],
        destination:new google.maps.LatLng(37, -97),
        travelMode: google.maps.DirectionsTravelMode.DRIVING
    };    

    directionsService.route(request, function(response, status) {
        if (status == google.maps.DirectionsStatus.OK) {
            directionsDisplay.setDirections(response);
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T09:19:59.227

除了将整个结果传递给 DirectionsRenderer 之外，您还可以使用[**google.maps.DirectionsRoute**](https://developers.google.com/maps/documentation/javascript/reference#DirectionsRoute)对象的 overview_path（已简化）并将折线直接添加到地图中，例如：

```
directionsService.route(request,plot);

function plot(result,status){
    if (status == google.maps.DirectionsStatus.OK) {
        for (var n = 0 ;n < result.routes.length ; n++ ){
            addLine(result.routes[n].overview_path);
        }
    }
}

function addLine(path){
    var line = new google.maps.Polyline ({
    path: path,
    map: map
    });
} 
```

# java - 如何在 JavaFX 中使用来自另一个控制器的变量

> ID：14511016
> 
> 赞同：4
> 
> 时间：2013-01-24T21:20:47.043
> 
> 标签：java, controller, javafx-2, javafx, viewcontroller

我有两个场景 Login.fxml 和 MainView.fxml 以及两个不同的控制器 LoginController.java 和 MainViewControler.java

在 LoginController 中，我完成了登录并获取 JSessionID 的值并将其存储在对象中的整个过程，如下所示：

```
loginGateway = loginGateway(gateway); 
```

现在在 MainViewController 中，我需要使用这个对象（loginGateway）来获取 JSessionID 并向服务器发出其他请求。但是我怎样才能在另一个控制器类（MainViewController.java）中访问这个对象？？？？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T22:44:02.063

[在传递参数 JavaFX FXML](https://stackoverflow.com/questions/14187963/passing-parameters-javafx)中使用解决方案的变体。

设置一个`LoginManager`同时引用`LoginController`和 的`MainViewController`.

1.  使用`loginManager`创建登录屏幕`loginController`，并将对自身的引用传递给`loginController`.
2.  当登录通过时，`loginController`通知`loginManager`登录`sessionID`。
3.  然后`loginManager`可以创建一个`MainViewController`，传递`mainViewController`并`sessionID`用主视图替换场景内容。

这是[一些示例代码](https://gist.github.com/4631319)的链接，用于演示这种方法。 ![登录屏幕](../Images/7c22b00e07df1831a19b2d1f6d679dcb.png) ![主视图屏幕](../Images/e0fe98260bc8cec48b5c1a7cbbd49e1d.png)

# sql - 由于空格字符，Where 子句在 SQL 中不起作用

> ID：14511018
> 
> 赞同：0
> 
> 时间：2013-01-24T21:21:01.327
> 
> 标签：sql, sql-server-2008-r2

```
Select Name from tblAnimal where Id=1 
```

回报：我的宠物

```
Select Id from tblAnimal where Name='My Pet'  --I copy/pasted this value in SSMS! 
```

返回空变更集（为什么？）

经过一番研究，我发现它可以是 Char(10) 和 Char(13)。所以，我想，当我复制粘贴 My Pet 时，它会自动将 Char(10) 转换为 Windows 环境下的 Space？

因为这：

```
Select id from tblAnimal where Name like '%My%' 
```

返回 1 而

```
select id from Animal where Name like '%My %' 
```

什么都不返回。

问题。
1\. 为什么会这样？
2.如何解决这个问题（生产数据库，几百万条记录）
3.如何防止这种情况发生？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T22:53:24.243

要清理数据，请将 CR/LF 对替换为空格：

```
UPDATE dbo.table
  SET column = REPLACE(REPLACE(column, CHAR(10), ''), CHAR(13), ' ')
  WHERE CHARINDEX(CHAR(10), column) + CHARINDEX(CHAR(13), column) > 0; 
```

并且首先要解决有关*阻止*这些数据的问题，您*当然可以*阻止它，这就是应该开始预防的地方 - 尽可能接近数据，因为您对所有外部方式的控制较少人们可以把垃圾塞进你的桌子。假设您已经有一张桌子：

```
CREATE TABLE dbo.blat(col VARCHAR(32)); 
```

添加约束很简单：

```
ALTER TABLE dbo.blat ADD CONSTRAINT ck_col_NoCRLF
  CHECK(CHARINDEX(CHAR(10), col) + CHARINDEX(CHAR(13), col) = 0); 
```

现在：

```
INSERT dbo.blat(col) SELECT NULL; 
```

作品。

```
INSERT dbo.blat(col) SELECT 'howdy'; 
```

作品。

```
INSERT dbo.blat(col) SELECT 'howdy
    partner'; 
```

失败：

> 消息 547，级别 16，状态 0，第 1 行
> INSERT 语句与 CHECK 约束“ck_col_NoCRLF”冲突。冲突发生在数据库“test”、表“dbo.blat”、列“col”中。
> 该语句已终止。

您还可以考虑添加各种其他特殊字符 - `CHAR(9)`( `tab`) 也是一种常见的字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T21:29:38.047

char 10 和 char 13 是换行符和回车符——它们不是空格，即使它们在网格结果中显示为这样。如果您在 SSMS 中查看结果，最好告诉它以文本形式查看您的结果（ctrl+T，或在您的工具栏上）。如果你这样做，你会看到结果是否真的是：

```
My Pet 
```

或者

```
My
Pet 
```

网格的结果将显示为`My Pet`一行，因为这就是网格的工作方式。结果文本将显示新行，即使是单个记录，因此您会更好地查看表中的确切数据。

# delphi - Delphi TMonthCalendar - 停止自动滚动，我在几月？

> ID：14511020
> 
> 赞同：0
> 
> 时间：2013-01-24T21:21:07.503
> 
> 标签：delphi, vcl, comctl32

将 TMonthCalendar 控件拖放到窗体上。设置为显示一个月。使用美国英语语言环境（星期日作为一周的第一天）。查看 2013 年 1 月。您的日历实际上显示 2012 年 12 月 30 日至 2013 年 2 月 9 日，因为它显示总共 42 天。将您的 MaxSelCount 设置为 42 并将 MultiSelect 设置为 true，以便您可以选择这些天数。

问题 1 - 单击 12 月 31 日，并按住鼠标。拖到 1 月 1 日，然后放开。您选择了两天。按预期工作。通过选择一月份的另一个日期来清除此选择。现在再次选择相同的两天，但这次选择 1 月 1 日 FIRST，然后向左拖动以突出显示 12 月 31 日。注意日历是如何向左滚动到 12 月的？如何阻止日历滚动？？？

问题 2 - 在上述两种情况下，您选择了相同的两个日期，但显示的日历月份完全不同。如何判断日历实际显示的月份？

第 3 期 - 选择 1 月 24 日至 2 月 1 日。日历现在滚动到 2 月，然后将 24 日、25 日和 26 日从视图中删除。似乎完全崩溃了。

我还尝试过作为包装器的 Jedi 控件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T21:31:44.580

最容易的是第二个。您可以简单地使用[`MCM_GETMONTHRANGE`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb760981%28v=vs.85%29.aspx)消息——或者更简单地说，[`MonthCal_GetMonthRange`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb774701%28v=vs.85%29.aspx)“宏”——来获取这些信息。

例如 ( `uses CommCtrl`),

```
procedure TForm1.FormClick(Sender: TObject);
var
  st: array[0..1] of TSystemTime;
begin
  MonthCal_GetMonthRange(MonthCalendar1.Handle, GMR_VISIBLE, @st);
  Caption := IntToStr(st[0].wMonth);
end; 
```

# php - 基本迭代器类和字符串遍历

> ID：14511027
> 
> 赞同：2
> 
> 时间：2013-01-24T21:21:30.927
> 
> 标签：php, string, iterator

我知道这是一个简单的，但我就是不知道顺序错在哪里。

```
<?php

class StringIterator implements \Iterator
{
private $_string;
private $_length;   
private $_position;

public function __construct($string)
{
    if(empty($string))
    {
        throw new \InvalidArgumentException(sprintf('The specified string is empty'));
    }//end if

        $this->_string = $string;
        $this->_length = strlen($this->_string);
        $this->rewind(); //setting the initial position instead of having it all over the place.

}//end func 

public function current()
{
 return $this->_string[$this->_position];

}//end func

public function key()
{
    return $this->_position;
}//end func

public function rewind()
{
    $this-> _position = -1;
}//end func

public function next()
{
    $this-> _position++;
}//end func

public function valid()
{   //why is it that your doing this instead of...
/*
*   return isset(this->_string[this->_position]);
*
*
*/
    return $this->_position < $this->_length;
}//end func 
```

}//结束类

```
TEST CLASS
<?php

require_once __DIR__. '/../src/Iterators/StringIterator.php';

class StringIteratorTest extends PHPUnit_Framework_TestCase
{
    //each method must begin with TEST
public function testInitializing()
{

    $iterator = new \Iterators\StringIterator("Hello World");

    $this->assertEquals(true,$iterator->valid()); 

}//end func

/**
*   @expectedException InvalidArgumentException
*/
public function testInitException()
{

$iterator = new \Iterators\StringIterator("");

}//end func

public function testTraverse()
{
    $string ="Hello World";
    $iterator = new \Iterators\StringIterator($string);
    $count =0;

    $iterator->rewind();
    //test to make sure the next() runs.

    //The iterator interface defines the method Key key()= $key
    //Iterator::current() = $char (gets the current value at the position)
    foreach($iterator as $key=>$char)
    {
        $this->assertEquals($count,$key);
        $this->assertEquals($string[$count],$char);
        ++$count;
         $this->next();
    }//end 4e

}//end func

//tests that the internal pointer (it) is at a valid position in that container that is being iterated
public function testValid()
{
$iterator = new \Iterators\StringIterator($string);

}//end func

//tests the rewind method back to the start of the container.

public function testRewind()
{
$string="Bye";

$iterator = new \Iterators\StringIterator($string); 

for( $i = 0; $i< strlen($string) + 1; ++$i){

$iterator->next();

}//end for
$this->assertEquals(false,$iterator->valid());
$iterator->rewind();
$this->assertEquals(true,$iterator->valid());

}

} 
```

有问题的问题：当我运行测试（`phpunit test`）时，它说明实际测试组件`current() (return line)`的循环和循环中存在错误`foreach`

```
foreach($iterator as $key=>$char)
{
    $this->assertEquals($count,$key);
    $this->assertEquals($string[$count],$char);
    ++$count;
    $this->next();
}//end 4e 
```

根据我的研究，我知道这与我在`foreach`循环中调用 next 的顺序有关，我可以准确地弄清楚它需要什么......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T22:16:36.477

这里似乎有很多错误：

*   你在`$this->next()`里面打电话`StringIteratorTest::testTraverse()`。这种方法没有这种`next()`方法。该方法属于`StringIterator`该类。这应该是一个致命错误。
*   即使此代码在类*中*运行`StringIterator`，您仍然不需要`next()`从`foreach`循环中调用。`foreach`调用所有`Iterator`-defined 方法本身。这就是重点。`next()`在 a 内调用`foreach`只会产生跳跃位置的效果。
*   你的`rewind()`方法不正确。它将位置设置为负值。字符串中没有负数。如果你要调用`current()`它，你会得到一个错误，因为它正在尝试调用`$_string[-1]`不存在的 。
*   您的`valid()`方法也不正确，因为它只检查位置是否超出上限，而不是下限。这就是为什么即使您的方法将位置设置为无效状态 `valid()`也会返回的原因。`TRUE``rewind()`
*   您的`testValid()`方法应该已经捕捉到了这一点，但该函数实际上并未测试该`valid()`方法。它只是创建一个新对象并且什么都不做。
*   您的测试方法在方法上很糟糕`testRewind()`。而不是检查`valid()`，您应该调用`current()`并检查它是否返回“B”，这是字符串中的第一个字符。该`rewind()`方法的主要功能是将对象的内部指针重置回起点，因此您应该明确地进行测试。

# azure - 如何从具有 SAS 的存储 URL 获取 Azure CloudBlockBlob？

> ID：14511030
> 
> 赞同：1
> 
> 时间：2013-01-24T21:21:35.400
> 
> 标签：azure, azure-storage, azure-blob-storage

我正在尝试重构我们的 MVC 代码，它有很多页面使用下载 url，这些 url 指向一个带有 SAS 的 blob。如果能够将 Url 传递给控制器​​并使用它来定位关联的 Blob，那就太好了。例如，有一个将下载 URL 作为其唯一输入参数的操作。我还可以创建一个链接助手，仅在 SAS 公开删除等时显示删除链接。

如果我可以将 Url 传递给 Azure 并获得 CloudBlockBlob 作为回报，那将是一个很大的帮助。所以我可以删除它、更新它、获取元数据等。

我目前能做到的唯一方法是使用类似的技术

```
 var deleteBlobRequest = BlobRequest.Delete(new Uri(fileUrl), 30, null, DeleteSnapshotsOption.IncludeSnapshots, "");
     deleteBlobRequest.GetResponse().Close(); 
```

这行得通，但似乎很奇怪。

我无法弄清楚从 Uri 获取 CloudBlockBlob 的代码。

有任何想法吗？我目前正在使用 Azure 存储 1.7

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T04:33:27.070

你不必做任何特别的事情。如果您使用 SAS Uri 构建 blob，存储客户端库会为您处理此问题。例如，使用以下代码：

```
 CloudBlockBlob cloudBlockBlob = new CloudBlockBlob("http://127.0.0.1:10000/devstoreaccount1/temp/sastest.txt?sr=b&st=2013-01-25T04%3A28%3A09Z&se=2013-01-25T05%3A28%3A09Z&sp=rwd&sig=jIWWFwZ6MXaL6FD%2F2%2FpqPl1g4f0ElFrr1fKNg5U%2FAkg%3D");
        cloudBlockBlob.Delete(); 
```

这会很好用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T23:46:15.447

这是获取 SAS 密钥权限的代码（假设 blobUrl 是带有 SAS 密钥的 url）：

```
// Get permssions for current SAS key.
var queryString = HttpUtility.ParseQueryString(blobUrl);
var permissionsText = queryString["sp"];
var permissions = SharedAccessBlobPermissions.None;
if (permissionsText.Contains("w"))
    permissions = permissions | SharedAccessBlobPermissions.Write;
if (permissionsText.Contains("r"))
    permissions = permissions | SharedAccessBlobPermissions.Read;
if (permissionsText.Contains("d"))
    permissions = permissions | SharedAccessBlobPermissions.Delete;
if (permissionsText.Contains("l"))
    permissions = permissions | SharedAccessBlobPermissions.List; 
```

这将获得一个基于**带有**SAS 键的 URL 的 ICloudBlob（假设 blobUrl 是带有 SAS 键的 url）：

```
// Get the blob reference.
var blobUri = new Uri(blobUrl);
var path = String.Format("{0}{1}{2}{3}", blobUri.Scheme, Uri.SchemeDelimiter, blobUri.Authority, blobUri.AbsolutePath);
var blobClient = new CloudBlobClient(new Uri(path), new Microsoft.WindowsAzure.Storage.Auth.StorageCredentials(blobUri.Query));
ICloudBlob blobReference = blobClient.GetBlobReferenceFromServer(new Uri(path)); 
```

# android - 在哪里创建位图等

> ID：14511033
> 
> 赞同：4
> 
> 时间：2013-01-24T21:21:42.150
> 
> 标签：android, constructor, bitmap, delay

随着我的应用程序（游戏）越来越大，我开始遇到问题。

我有一个带有“开始游戏”按钮的菜单活动 - 当用户按下此按钮时，它会启动主游戏活动 - 现在在这个活动中，我正在构造函数中创建位图等，但是现在有很多活动开始时，在游戏实际开始之前会有轻微的延迟 - 大约 2 秒。

我显然做错了什么 - 请有人建议如何解决这个问题，以便延迟（显然，必须发生） - 不会被用户注意到。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T21:26:26.150

立即加载您需要的。将其余部分加载到后台线程（可能是 AsyncTask）上。如果您在加载之前需要它，请根据需要暂停或放置加载屏幕。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T21:27:51.443

您可以在菜单活动的背景中开始加载位图，甚至在使用[后台线程或`AsyncTask`](http://android-developers.blogspot.com/2009/05/painless-threading.html). 您仍然需要某种加载屏幕，以防用户在您加载完所有位图之前导航到主游戏活动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-27T19:29:08.440

您还可以启动 IntentService 来加载位图。加载位图后，IntentService 可以使用 LocalBroadcastManager 发送广播。然后每个关心结果的组件都可以向 LocalBroadcastManager 注册一个 BroadcastReceiver。

# ffmpeg - 我的 FFMPEG 转换器不允许 mp4 到 webm 的转换。

> ID：14511034
> 
> 赞同：2
> 
> 时间：2013-01-24T21:21:52.343
> 
> 标签：ffmpeg, mp4, webm

继承人的命令：

```
ffmpeg -i videos/test.mp4 -c:v libvpx -level 216 -profile 0 -qmax 42 -qmin 10 -c:a libvorbis -f webm out.webm 
```

我不断收到此错误：

```
Error while opening encoder for output stream #0:0 - maybe incorrect parameters such as bit_rate, rate, width or height 
```

这是完整的回复

```
# ffmpeg -i videos/test.mp4 -c:v libvpx -level 216 -profile 0 -qmax 42 -qmin 10 -c:a 

libvorbis -f webm out.webm
ffmpeg version N-49225-g7e059c9 Copyright (c) 2000-2013 the FFmpeg developers
  built on Jan 24 2013 05:14:06 with gcc 4.1.2 (GCC) 20080704 (Red Hat 4.1.2-54)
  configuration: --enable-version3 --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libvpx --enable-libfaac --enable-libmp3lame --enable-libtheora --enable-libvorbis --enable-libx264 --enable-libxvid --enable-gpl --enable-postproc --enable-nonfree
  libavutil      52\. 15.101 / 52\. 15.101
  libavcodec     54\. 90.100 / 54\. 90.100
  libavformat    54\. 61.104 / 54\. 61.104
  libavdevice    54\.  3.102 / 54\.  3.102
  libavfilter     3\. 33.100 /  3\. 33.100
  libswscale      2\.  2.100 /  2\.  2.100
  libswresample   0\. 17.102 /  0\. 17.102
  libpostproc    52\.  2.100 / 52\.  2.100
Input #0, mov,mp4,m4a,3gp,3g2,mj2, from 'videos/test.mp4':
  Metadata:
    major_brand     : mp42
    minor_version   : 1
    compatible_brands: mp42avc1
    creation_time   : 2010-08-12 15:42:21
  Duration: 00:00:34.20, start: 0.000000, bitrate: 358 kb/s
    Stream #0:0(eng): Audio: aac (mp4a / 0x6134706D), 44100 Hz, stereo, fltp, 100 kb/s
    Metadata:
      creation_time   : 2010-08-12 15:42:21
      handler_name    : Apple Sound Media Handler
    Stream #0:1(eng): Video: h264 (Main) (avc1 / 0x31637661), yuv420p, 640x320, 251 kb/s, 29.97 fps, 29.97 tbr, 2997 tbn, 5994 tbc
    Metadata:
      creation_time   : 2010-08-12 15:42:21
      handler_name    : Apple Video Media Handler
Please use -profile:a or -profile:v, -profile is ambiguous
File 'out.webm' already exists. Overwrite ? [y/N] y
v0.9.6
[libvpx @ 0x7e38d20] Failed to initialize encoder: ABI version mismatch
Output #0, webm, to 'out.webm':
  Metadata:
    major_brand     : mp42
    minor_version   : 1
    compatible_brands: mp42avc1
    Stream #0:0(eng): Video: vp8, yuv420p, 640x320, q=10-42, 200 kb/s, 90k tbn, 29.97 tbc
    Metadata:
      creation_time   : 2010-08-12 15:42:21
      handler_name    : Apple Video Media Handler
    Stream #0:1(eng): Audio: none, 44100 Hz, stereo, fltp
    Metadata:
      creation_time   : 2010-08-12 15:42:21
      handler_name    : Apple Sound Media Handler
Stream mapping:
  Stream #0:1 -> #0:0 (h264 -> libvpx)
  Stream #0:0 -> #0:1 (aac -> libvorbis)
Error while opening encoder for output stream #0:0 - maybe incorrect parameters such as bit_rate, rate, width or height 
```

有人知道发生了什么吗？我完全迷路了。我尝试了很多不同的命令。从 mp4 转换为 ogg 工作正常，我之前有 mp4 到 webm 工作，但我重新安装了 ffmpeg 以使 mp4 到 ogg 工作，现在我失去了我的 mp4 到 webm 转换。>.< 整个安装过程简直就是一场噩梦。有没有人有一个很好的centos安装ffmpeg的教程，适用于mp4 ogg和webm？我使用了来自 ffmpeg 网站的 centos tut，但它让我失望了。如果有人有任何想法可以为我指明正确的方向，我将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T10:14:10.447

真正的问题不在于您使用的设置。这是您的 FFmpeg 配置：

```
[libvpx @ 0x7e38d20] Failed to initialize encoder: ABI version mismatch 
```

这是应用程序二进制接口。您构建的源代码显然与编码时使用的实际库不同。

看来您安装了多个版本`libvpx`。删除所有这些，但最新的除外，然后尝试重新编译 FFmpeg。[或者从下载页面](http://ffmpeg.org/download.html)下载一个静态版本，其中`libvpx`已经包含了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-02T07:33:26.477

从版本输出中，您使用的是`FFmpeg`从官方源代码树编译的。

`v0.9.6 [libvpx @ 0x7e38d20] Failed to initialize encoder: ABI version mismatch`

从您的输出日志中，似乎`FFmpeg`request `libvpx`version `0.9.6`，`libvpx`您当前集成的不是`0.9.6`，因此`FFmpeg`抱怨错误。

`libvpx`您可以从[这里](https://storage.googleapis.com/downloads.webmproject.org/releases/webm/index.html)找到匹配的版本，下载并重新编译。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T21:51:36.493

您的输入文件具有向后的音频和视频流。您将不得不重新映射它们以进行此转换。

添加

```
-map 0:1 -map 0:0 
```

为了告诉 ffmpeg 当它默认输出为 V,A 时输入是 A,V

# requirejs - 如何更改 Require.js 中的模块超时？

> ID：14511036
> 
> 赞同：37
> 
> 时间：2013-01-24T21:22:05.700
> 
> 标签：requirejs

当我使用慢速移动宽带时，我有时会得到：

```
Uncaught Error: Load timeout for modules: goog!maps,3,other_params:sensor=false_unnormalized2,goog!maps,3,other_params:sensor=false,async!http://www.google.com/jsapi 
```

我想提高与我有时使用 mbb 的类似用户的超时时间。

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-01-25T04:10:30.290

请参阅`waitSeconds`RequireJS 文档中的配置值：

[http://requirejs.org/docs/api.html#config-waitSeconds](http://requirejs.org/docs/api.html#config-waitSeconds)

根据文档，默认值为 7 秒。您可以像这样在 require.config 调用中设置它：

```
require.config( { 
  waitSeconds : 30,
  paths : {
      //etc..
  }, 
```

# internet-explorer - 不支持合适的 http 状态码来说明浏览器？

> ID：14511044
> 
> 赞同：14
> 
> 时间：2013-01-24T21:22:41.733
> 
> 标签：internet-explorer, http, rest, cross-browser, http-headers

我不支持 IE8 及以下版本，并且根据用户代理检查，从这些浏览器之一发出的所有请求都被引用到我解释原因并显示指向受支持浏览器的链接的页面。

是否有一个 HTTP 状态代码与之配套？200 不正确，因为用户没有得到他请求的页面，并且 505（不支持的版本）指的是过时的 HTTP 版本，但事实并非如此。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-24T21:28:18.807

我投票给

403 Forbidden “服务器理解请求，但拒绝执行”

但对此没有明确的答案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-03T09:22:05.300

400 错误请求

从[这里](https://msdn.microsoft.com/en-us/library/system.net.httpstatuscode.aspx)：

> BadRequest 相当于 HTTP 状态 400。BadRequest 表示服务器无法理解该请求。**如果没有其他错误适用**，或者确切的错误未知**或没有自己的错误代码**，则发送 BadRequest 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T21:25:40.127

我会使用：406 不可接受

注意：这在技术上具有误导性，因为它不是客户端的 Accept 标头的正式问题，您只是试图阻止特定的浏览器。

无论您做什么，都使用 4xx 代码。5xx 用于服务器问题，而 4xx 用于客户端问题——在这种情况下，不使用受支持的浏览器。

# twitter-bootstrap - Twitter Bootstrap Scrollspy 根本不工作

> ID：14511045
> 
> 赞同：12
> 
> 时间：2013-01-24T21:22:44.887
> 
> 标签：twitter-bootstrap, scroll

我之前问过一个关于 Bootstrap ScrollSpy 的问题，这是我试图让它工作的最后一次尝试。

我想要实现的是在该部分滚动时更改导航栏标签的颜色。我尝试了很多方法，甚至有一个[Jsfiddle](http://jsfiddle.net/richlewis14/NySg6/)工作，但即使我的应用程序中的设置也不起作用

这就是我所拥有的

JS

```
$('#spyOnThis').scrollspy(); 
```

身体

```
<body data-spy="scroll" data-target="#spyOnThis"> 
```

看法

```
<div class="container">
 <div class="row show-grid clear-both">
  <div id="left-sidebar" class="span3 sidebar">
  <div class="side-nav sidebar-block">
    <h3 class="resultTitle fontSize13">Release Dates</h2>
    <ul class="date">
      <% @response.each_pair do |date, movie| %>
      <li><i class="icon-chevron-right"></i><%= link_to date_format(date), "#d_#{date}", :id=> '#d_#{date}' %></li>
    <% end %>
    </ul>
  </div>
</div>
<div class="span9">
  <div id="dateNav">
    <ul class="nav">
      <li><% @response.each_pair do |date, movie| %><%= link_to date_format(date), "#d_#{date}" %><% end %></li>
    </ul>
  </div>
  <div id="spyOnThis">
  <% @response.each_pair do |date, movie| %>
    <h3 class="resultTitle fontSize13" id="d_<%= date %>">Available on&nbsp;<%= date_format(date) %></h3>
    <% movie.each do |m| %>
      <div class="thumbnail clearfix">
        <img class="pull-left" src=<% if m.image_link %> <%= m.image_link %> <% else %> "/assets/noimage.jpg" <% end %>>
        <div class="caption pull-right">
          <%= link_to m.name, m.title_id, :class => 'resultTitle fontSize11' %>
          <p class="bio"><%= m.bio %></p>
          <p class="resultTitle">Cast</p>
          <p class="bio"><%= m.cast.join(", ") unless m.cast.empty? %></p>
          <%= link_to "Remind me", reminders_path(:title_id => m.title_id), :method => :post, :class => 'links button' %>
        </div>
      </div>

    <% end %>
  <% end %>
  </div>
</div><!--span9-->
</div><!--Row-->
</div><!--/container--> 
```

CSS

```
#dateNav{
position: fixed;
top: 0; left: 20px;
width: 100%;
background:none;
text-align:center;
}

#spyOnThis {
 height:100%;
 overflow:auto;
}

 .nav > li > a {
  display:block;
  }

.nav > li.active > a {
 display:block;
 color: red;
 text-decoration: underline;
 } 
```

我知道高度 100% 可能会导致问题，但我的滚动条的高度将取决于内容并且它可以改变。

我现在要拔头发了，我读到这个scrollspy有很多错误，但肯定它必须像他们网站上的演示一样工作

编辑

```
$('#dateNav').scrollspy();

<body data-spy="scroll" data-target="#dateNav"> 
```

HTML

```
ul class="nav">
 <li>
 <a href="#d_2013-01-09">9th Jan 2013</a>
 <a href="#d_2013-01-11">11th Jan 2013</a>
 <a href="#d_2013-01-18">18th Jan 2013</a>
 <a href="#d_2013-01-23">23rd Jan 2013</a>
 <a href="#d_2013-01-25">25th Jan 2013</a>
 <a href="#d_2013-01-30">30th Jan 2013</a>
 </li> 
```

```
<div id="spyOnThis">
 <h3 id="d_2013-01-09" class="resultTitle fontSize13">Available on 9th Jan 2013</h3>
 <div class="thumbnail clearfix">
 <h3 id="d_2013-01-11" class="resultTitle fontSize13">Available on 11th Jan 2013</h3>
 <div class="thumbnail clearfix">
 <div class="thumbnail clearfix">
 <div class="thumbnail clearfix">
 <div class="thumbnail clearfix">
 <h3 id="d_2013-01-18" class="resultTitle fontSize13">Available on 18th Jan 2013</h3>
 <div class="thumbnail clearfix">
 <div class="thumbnail clearfix">
 <h3 id="d_2013-01-23" class="resultTitle fontSize13">Available on 23rd Jan 2013</h3>
 <div class="thumbnail clearfix">
 <h3 id="d_2013-01-25" class="resultTitle fontSize13">Available on 25th Jan 2013</h3>
 </div> 
```

这会将所有链接变为红色，因此它们现在都处于活动状态？

我的身体也是 100% 的粘性页脚，不确定这是否会有所不同帮助真的很感激

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-24T22:25:03.653

您需要从正文中移动 data-spy 和 data-target 属性：

```
<body data-spy="scroll" data-target="#dateNav"> 
```

并将它们移动到 div“spyOnThis”：

```
<div id="spyOnThis"> 
```

应该：

```
<div id="spyOnThis" data-spy="scroll" data-target="#dateNav"> 
```

根据[文档](http://twitter.github.com/bootstrap/javascript.html#scrollspy%3a)：

“要轻松地将 scrollspy 行为添加到您的顶栏导航，只需将 data-spy="scroll" 添加到您要监视的元素（通常是正文）和 data-target=".navbar" 以选择哪个导航使用。你会想要使用带有 .nav 组件的 scrollspy。

根据您的 HTML，您还需要修复一些问题：

您的列表标签未关闭：

```
<ul class="nav">
    <li>
        <a href="#d_2013-01-09">9th Jan 2013</a>
        <a href="#d_2013-01-11">11th Jan 2013</a>
        <a href="#d_2013-01-18">18th Jan 2013</a>
        <a href="#d_2013-01-23">23rd Jan 2013</a>
        <a href="#d_2013-01-25">25th Jan 2013</a>
        <a href="#d_2013-01-30">30th Jan 2013</a>
    </li>
</ul> 
```

应该：

```
<ul class="nav dateNav">
    <li><a href="#d_2013-01-09">9th Jan 2013</a></li>
    <li><a href="#d_2013-01-11">11th Jan 2013</a></li>
    <li><a href="#d_2013-01-18">18th Jan 2013</a></li>
    <li><a href="#d_2013-01-23">23rd Jan 2013</a></li>
    <li><a href="#d_2013-01-25">25th Jan 2013</a></li>
    <li><a href="#d_2013-01-30">30th Jan 2013</a></li>
</ul> 
```

您的 div 也没有正确关闭：

```
<div id="spyOnThis">
 <h3 id="d_2013-01-09" class="resultTitle fontSize13">Available on 9th Jan 2013</h3>
 <div class="thumbnail clearfix">
 <h3 id="d_2013-01-11" class="resultTitle fontSize13">Available on 11th Jan 2013</h3>
 <div class="thumbnail clearfix">
 <div class="thumbnail clearfix">
 <div class="thumbnail clearfix">
 <div class="thumbnail clearfix">
 <h3 id="d_2013-01-18" class="resultTitle fontSize13">Available on 18th Jan 2013</h3>
 <div class="thumbnail clearfix">
 <div class="thumbnail clearfix">
     <h3 id="d_2013-01-23" class="resultTitle fontSize13">Available on 23rd Jan 2013</h3>
     <div class="thumbnail clearfix">
     <h3 id="d_2013-01-25" class="resultTitle fontSize13">Available on 25th Jan 2013</h3>
 </div> 
```

应该是（只显示其中几个）：

```
<div class="thumbnail clearfix">
     <h3 id="d_2013-01-23" class="resultTitle fontSize13">Available on 23rd Jan 2013</h3>
</div>
<div class="thumbnail clearfix">
     <h3 id="d_2013-01-25" class="resultTitle fontSize13">Available on 25th Jan 2013</h3>
</div> 
```

此外，似乎 100% 的高度会导致它仅突出显示导航栏列表中最底部的条目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T22:27:29.047

好吧，首先你的导航链接应该单独包装在`li`标签中，即

```
 <div id="dateNav">
      <ul class="nav">
        <li><a href="#d_2013-01-09">9th Jan 2013</a></li>
        <li><a href="#d_2013-01-11">11th Jan 2013</a></li>
        <li><a href="#d_2013-01-18">18th Jan 2013</a></li>
        <li><a href="#d_2013-01-23">23rd Jan 2013</a></li>
        <li><a href="#d_2013-01-25">25th Jan 2013</a></li>
        <li><a href="#d_2013-01-30">30th Jan 2013</a></li>
      </ul>
    </div> 
```

其次，您的`<div id="spyOnThis">`div 缺少很多结束 div 标记，因此它们都嵌套而不是彼此下方。我只是删除了您的`<div class="thumbnail clearfix">`分歧，留下以下内容：

```
 <div id="spyOnThis">
      <h3 id="d_2013-01-09" class="box resultTitle fontSize13">Available on 9th Jan 2013</h3>
      <h3 id="d_2013-01-11" class="box resultTitle fontSize13">Available on 11th Jan 2013</h3>
      <h3 id="d_2013-01-18" class="box resultTitle fontSize13">Available on 18th Jan 2013</h3>
      <h3 id="d_2013-01-23" class="box resultTitle fontSize13">Available on 23rd Jan 2013</h3>
      <h3 id="d_2013-01-25" class="box resultTitle fontSize13">Available on 25th Jan 2013</h3>
    </div> 
```

您可以重新添加分隔线，但请确保关闭它们，否则 ScrollSpy 将无法正确跟踪它并且会中断。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-09T17:00:00.497

如果您深入研究此插件的代码，那么选择 .nav 的父级实际上非常重要

```
this.selector = (this.options.target
      || ((href = $(element).attr('href')) && href.replace(/.*(?=#[^\s]+$)/, '')) //strip for ie7
      || '') + ' .nav li > a' 
```

# mysql - MySQL Query 为每个连接表行创建行

> ID：14511048
> 
> 赞同：2
> 
> 时间：2013-01-24T21:22:52.403
> 
> 标签：mysql

```
SELECT deals.id, 
       deals.partner_id 
FROM   deals 
       LEFT JOIN deals_partners 
              ON ( deals.id = deals_partners.deal_id ) 
WHERE  1 
       AND ( `deals`.`partner_id` = 222 
              OR CASE 
                   WHEN deals.partner_count = 1 THEN 
                   deals_partners.partner_id = 222
                 end ) 
ORDER  BY deals.id ASC 
```

我想获取与合作伙伴相关的交易。

他们可以是交易的主人，deals.partner_id = 222，或者他们可以在交易合作伙伴中拥有一行，在那里他们与交易相关联。

以上对我有用，但由于我拥有的交易合作伙伴的数量，给了我多个相同的交易。我把它做成了左连接，我不明白为什么它仍然不断地从交易伙伴那里抢行？

更新：

表：**交易**，列：**ID、标题、名称、partner_id**

表**deal_partners**，列：**deal_id，partner_id**

我想显示合作伙伴 222 的交易。要找出合作伙伴有哪些交易，他的 partner_id 可以在交易行中的 partner_id 列中，或者他可以在 deal_partners 中有一行，其中他的 partner_id 链接到 deal_id。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T21:42:51.280

尝试类似的东西：（希望它有效）

```
SELECT deals.id, 
       deals.partner_id 
FROM   deals 
       LEFT JOIN deals_partners 
              ON deals.id = deals_partners.deal_id AND
                 deals_partners.partner_id = 222
WHERE `deals`.`partner_id` = 222 OR deals_partners.partner_id = 222
ORDER BY deals.id ASC 
```

这假设只有一个匹配`deals.id = deals_partners.deal_id AND deals_partners.partner_id = 222`. 否则，您需要添加`GROUP BY deals.id, deals.partner_id, deals_partners.partner_id`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T21:32:29.053

当您加入一个表并匹配多条记录时，您将返回多条记录。您可以使用 IN 子句来防止这种情况。

```
SELECT deals.id, 
       deals.partner_id 
FROM   deals 

WHERE  `deals`.`partner_id` = 22
       OR id in 
        (SELECT deal_id
         FROM deals_partners
         WHERE partner_id = 222)

ORDER  BY deals.id ASC 
```

# asp.net - SessionFactory.Evict 的副作用？

> ID：14511050
> 
> 赞同：1
> 
> 时间：2013-01-24T21:23:07.030
> 
> 标签：asp.net, asp.net-mvc, nhibernate, caching, syscache2

每隔一段时间，我的任务就是对数据库中可能已经缓存在内部应用程序中的一个或多个业务实体进行更改。为了让应用程序在不循环应用程序池的情况下反映这些更改，我想我应该嵌入开发/管理员从应用程序 UI 中逐出缓存的功能（完全或某些对象），但我注意到了该方法说明以下...

```
/// <summary>
/// Evict an entry from the process-level cache.  This method occurs outside
///     of any transaction; it performs an immediate "hard" remove, so does not respect
///     any transaction isolation semantics of the usage strategy.  Use with care.
/// </summary>
void ISessionFactory.Evict(Type persistentClass, object id); 
```

这到底是什么意思呢？如果我试图驱逐一个或多个交易中可能涉及的对象，可能会出现什么问题，如果它们具有破坏性，是否有办法避免这些副作用？我目前正在使用 SysCache2 并正在寻找有关如何使用 SqlDependency 的实现细节，但同时我仍然对 Evict 效果感到好奇。

**更新：**仔细查看评论后，似乎从进程级缓存中删除，并`SessionFactory.Evict()`从二级缓存中删除。然而，这两种口味都存在相同的免责声明。所以我原来的问题仍然存在。如果实体当前正在另一个事务中使用，那么从缓存（进程或二级）中逐出实体有什么危险？`SessionFactory.EvictCollection()``SessionFactory.EvictEntity()`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T06:36:19.467

Evict 将实体从会话中分离出来。

```
private static Book CreateAndSaveBook(ISessionFactory sessionFactory)
{
    var book = new Book()
    {
        Name = "Book1",
    };

  using (var session = sessionFactory.OpenSession())
  {
    using (var tx = session.BeginTransaction())
    {
         session.Save(book);
         tx.Commit();
         session.Evict(book);
    }
  }
 return book;
} 
```

在 CreateAndSaveBook 中，我们创建一本书并将其保存到数据库中。我们提交我们的事务，从会话中驱逐这本书，关闭会话，然后返回这本书。这设置了我们的问题。我们现在有一个没有会话的实体。不会跟踪对此实体的更改。它只是一个普通的书籍对象。

我们继续更改 book 对象，现在我们要保存这些更改。NHibernate 不知道我们对这本书做了什么。它可能已经通过大型应用程序的其他层或层。我们不知道它与哪个会话相关联，如果有的话。我们甚至可能不知道这本书是否存在于数据库中。

# php - CodeIgniter 表单验证，按顺序显示错误

> ID：14511057
> 
> 赞同：2
> 
> 时间：2013-01-24T21:23:13.870
> 
> 标签：php, codeigniter

假设我有一个登录表单，其中包含用户名和密码字段。这两个字段都需要填写，当您提交表单时，它们有两个不同的行。

用户名字段是必需的。密码字段是必需的。

我想要做的是只显示用户名字段错误，当他们没有任何用户名字段错误时，它将显示密码字段错误。

这将如何完成？

另外，我记得有一种方法可以仅显示有关字段的错误，它的代码段是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T22:41:29.447

我建议使用仅绑定到一个输入的自定义回调函数，它检查两个输入并有条件地设置所需的消息。

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class YourController extends CI_Controller {

    public function save() 
    {
        //.... Your controller method called on submit

        $this->load->library('form_validation');

        // Build validation rules array
        $validation_rules = array(
                                array(
                                    'field' => 'username',
                                    'label' => 'Username',
                                    'rules' => 'trim|xss_clean|callback_required_inputs'
                                    ),
                                array(
                                    'field' => 'password',
                                    'label' => 'Password',
                                    'rules' => 'trim|xss_clean'
                                    )
                                );
        $this->form_validation->set_rules($validation_rules);
        $valid = $this->form_validation->run();

        // Handle $valid success (true) or failure (false)
        if($valid)
        {
            //
        }
        else
        {
            //
        }
    }

    public function required_inputs()
    {
        if( ! $this->input->post('username'))
        {
            $this->form_validation->set_message('required_inputs', 'The Username field is required');
            return FALSE;
        }
        else if ($this->input->post('username') AND ! $this->input->post('password'))
        {
            $this->form_validation->set_message('required_inputs', 'The Password field is required');
            return FALSE;
        }

        return TRUE;
    }
} 
```

# php - 使用初始默认值记住表单复选框状态

> ID：14511062
> 
> 赞同：1
> 
> 时间：2013-01-24T21:23:49.067
> 
> 标签：php, html, forms, post

我有一个带有复选框的表格。当用户第一次访问该页面时，我希望该复选框被“选中”。但是，如果他们取消选中该框然后提交页面，我希望它保持未选中状态（并且如果他们在提交页面时保持选中状态）。

为了确定何时检查并提交表单，我目前正在做：

```
<input type='checkbox' class='seeAll' name='seeAll' value='true' <?php if ($_POST['seeAll'] == 'true') echo checked; ?>> 
```

这对于在需要时选中该框非常有用，但是，如果他们以这种方式提交它，我将如何确保它保持未选中状态，同时在他们重新访问该页面时也被检查（例如通过重新输入 URL）？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T15:07:58.310

我不知道为什么我花了这么长时间才想出这个答案，但是在努力解决这个问题之后，我意识到我可以`$_POST`像以前一样通过 来检查复选框的值，*并且*可以检查用户是否到达通过提交按钮以外的其他方式在页面上执行以下操作：

```
<?php if(($_POST['seeAll'] == 'true') || !isset($_POST['submit'])) echo checked; ?> 
```

如果用户提交了表单，`isset($_POST['submit'])`那么这将是真的，所以如果是这样*并且* `$_POST['seeAll']`是空的，那么他们显然用户提交了一个未选中的框。如果`isset($_POST['submit'])`为 false，则用户在没有提交表单的情况下到达页面，我应该将复选框选中为“默认”。

那么我的整个`<input>`标签看起来像这样：

```
<input type='checkbox' class='seeAll' name='seeAll' value='true' <?php if(($_POST['seeAll'] == 'true') || !isset($_POST['submit'])) echo checked; ?>> 
```

按我的需要工作！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T21:33:05.610

注意:: 这与 OP 的问题不同，因为即使用户离开页面（例如，到 www.facebook.com）然后返回页面，它也会记住复选框的值。OP 希望它只在页面发布到时记住复选框的值。

如果你想要一个非永久的方法，你可以使用 $_SESSION ：

```
<?php
    if (!isset($_SESSION)) {
        session_start();
    }   

    if ($_POST['seeAll'] == 'true' || !isset($_SESSION['seeAll'])) {
        $_SESSION['seeAll'] = true;
    } else {
        $_SESSION['seeAll'] = false;
    }
?>

<form method="POST">
    <input type='checkbox' class='seeAll' name='seeAll' value='true' 
        <?php if ($_SESSION['seeAll']) echo 'checked'; ?>
    />
    <input type='submit'/>
</form> 
```

见： http: [//php.net/manual/en/session.examples.basic.php](http://php.net/manual/en/session.examples.basic.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-10T16:58:55.670

一种解决方案是同时使用`$_SESSION[""]`和`$_POST[""]`。（*见下面的解释和代码*）

解释

1.  如果`$_SESSION["loadcount"]`未设置，则将其设置为 0。
2.  每`if (isset($_POST["submit"]`增加`$_SESSION["load count"]`1 个。
3.  在输入 type="checkbox" 的 'checked' 选项中，回显 PHP。如果`if ($_SESSION["loadcount"] == 0)`回显“检查”。（将复选框设置为初始选中状态。）
4.  否则，如果`(isset($_POST["agree"]`echo 'checked'，则记住用户检查的状态。（记住用户设置的检查状态。

代码

```
<?php
session_start();
?>
<!DOCTYPE html>
<html>
    <body>
        <?php  // session_firstload.php

            // Check if $_SESSION is not set, set $_SESSION loadcount to 0
            if (!isset($_SESSION["loadcount"])) 
                $_SESSION["loadcount"] = 0;

            // When the user submits using POST Method
            if (isset($_POST["submit"]))
            {
                // Increase $_SESSION["loadcount"] by +1
                $_SESSION["loadcount"] = $_SESSION["loadcount"] + 1;
            }

            // Echoing for Debugging / Understanding
            echo $_SESSION["loadcount"];
        ?>

        <form action="session_firstload.php" method="post">
            <input id="agree" type="checkbox" name="agree" 
            <?php 
                // If Check the Checkbox is $_SESSION["loadcount"] == 0
                // Else 'remember' with (isset($_POST["agree"]
                if ($_SESSION["loadcount"] == 0) 
                        echo "checked";
                    else
                    {
                        if (isset($_POST["agree"]))
                            echo "checked";
                    }
            ?>
            >I Agree<br>
            <input type="submit" name="submit">
        </form>
    </body>
</html> 
```

# windows - 除非指定端口 443，否则通过 SSL 的“网络使用”失败

> ID：14511065
> 
> 赞同：5
> 
> 时间：2013-01-24T21:23:59.237
> 
> 标签：windows, networking, ssl, dns, webdav

我们正在尝试通过 SSL使用*net use连接到 WebDAV 服务器。*在某些服务器上，我们看到只有在 URL 中指定端口 443 时此连接才会成功的问题。

**地图**

`net use * "https://example.com:443/folder"`
`net use * "\\example.com@SSL@443\folder"`

而且，奇怪的是，这也是： `net use * "\\example.com@SSLasdf\folder"`

**不映射**

`net use * "https://example.com/folder"`
`net use * "\\example.com@SSL\folder"`

在非工作情况下，我们始终收到以下错误：

`System error 67 has occured.`
`The network name cannot be found.`

我们注意到一些可能有用的信息：

*   我们有一个测试服务器，它的配置方式与 prod 服务器相同，它按预期工作。
*   在非工作情况下，在 prod 服务器上看不到来自故障主机的传入请求。
*   所有客户端都基于相同的图像。
*   这个问题并不是在所有客户端上都一致地表现出来——有些工作，有些不工作。
*   客户端 DNS 缓存中存在一个针对 example.com 的现有有效条目。
*   刷新受影响服务器的客户端 DNS 缓存并不能解决问题。
*   一旦问题出现，它似乎会坚持下去。也就是说，如果我执行其中一个工作映射，将其删除，然后立即执行其中一个非工作映射，问题仍然存在。

我们完全被难住了。有什么理论吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-06-15T17:22:01.703

您会看到不同的行为，因为您使用不同的名称进行连接。一旦名称被尝试并失败，WebClient（这是启用 WebDAV 的服务）将缓存响应一段时间。要清除缓存，请在服务控制台中找到 WebClient 服务并重新启动它。或者从管理命令提示符执行以下命令：

```
net.exe stop webclient && net.exe start webclient 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T21:10:24.000

我们最终确定我们误解了`System Error 67`正在`net use`返回的内容。我们发现了两件有趣的事情：

1.  如果 WebDAV 在初始根文件夹上返回 404 或 50x `PROPFIND`，`net use`将（正确地）将此解释为根文件夹不可用。它说找不到网络*名称*的事实让我们相信问题出在名称解析上，但实际上只是在说，“嘿，我在这条路径上找不到任何东西。”

2.  如果“网络使用”由于 404/50x 而失败，它似乎会在短时间内自动使同一主机的任何其他映射失败，*而不发出请求*。例如，如果`net use http://me.com/foo`返回 404，那么`net use http://me.com/bar`如果在第一次调用之后快速连续进行，则会立即失败，并且在 WebDAV 服务器日志中不会看到任何请求记录。

我最好的猜测是附加`@443`端口并没有真正的区别。它可能*所做*的是欺骗`net use`认为它正在与不同的主机交谈，至少出于其“自动失败”功能的目的。但这只是一个猜测。

# c# - 在接口中声明成员函数

> ID：14511067
> 
> 赞同：10
> 
> 时间：2013-01-24T21:24:03.557
> 
> 标签：c#, interface, member

首先，我对 C# 很陌生。我想要一个接口声明一个成员函数，如下面的代码

```
interface IMyInterface {
    void MyAction() {
        // do stuff depending on the output of function()
    }
    void Function();
} 
```

这里`Function`是纯虚拟的，应该由`IMyInterface`. 我可以使用抽象类而不是接口，但是我不能从其他类继承......例如，`MyAction`递归搜索目录中的文件并应用于`Function`找到的任何文件以使我的示例清晰。

如何改变我的设计以克服接口无法实现类的限制？

编辑：在 C++ 中，我会使用这样的模板

```
template<class A>
static void MyAction(const A& a) {
    // do stuff depending on the output of A::Function()
};

class MyClass {
    void Function();
}; 
```

我想知道是否有一种优雅的方法可以使用 C# 中的接口来做到这一点。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-24T21:27:49.283

直接处理这个问题的唯一方法是使用抽象类，因为接口不能包含任何形式的“逻辑”，而仅仅是一个契约。

然而，另一种选择是创建一个接口和一个静态类。然后，您可以使用该接口将您的逻辑放在扩展方法中。

```
public interface IMyInterface {
    void Function();
}

public static class MyInterfaceExtensions {
    public static void MyAction(this IMyInterface object)
    {
       // use object.Function() as needed
    }
} 
```

这里的主要缺点是类型更多，这降低了可维护性，并且缺乏可发现性。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-24T22:13:58.227

在 C# 中，您没有多重继承。您可以通过使用**composition**来规避此限制。

像这样定义你的接口（`Function`这里不需要定义）：

```
public interface IMyInterface
{
    void MyAction();
} 
```

用一个抽象声明一个抽象类`Function`并实现这个接口：

```
public abstract class MyInterfaceBase : IMyInterface
{
    public void MyAction()
    {
        // Do stuff depending on the output of Function().
        Function();
    }

    protected abstract void Function();
} 
```

从这个抽象类中，您可以派生一个具体的实现。这还不是您的“最终”课程，但它将用于编写它。

```
public class ConcreteMyInterface : MyInterfaceBase
{
    protected override void Function()
    {
        Console.WriteLine("hello");
    }
} 
```

现在让我们来看看你的“最终”组成的课程。它将源自`SomeBaseClass`并`IMyInterface`通过集成以下功能来实现`ConcreteMyInterface`：

```
public class SomeBaseClass
{
}

public class MyComposedClass : SomeBaseClass, IMyInterface
{
    private readonly IMyInterface _myInterface = new ConcreteMyInterface();

    public void MyAction()
    {
        _myInterface.MyAction();
    }
} 
```

* * *

**更新**

在 C# 中，您可以声明本地类。这更接近于多重继承，因为您可以在组合类中派生所有内容。

```
public class MyComposedClass : SomeBaseClass, IMyInterface
{
    private readonly IMyInterface _myInterface = new ConcreteMyInterface();

    public void MyAction()
    {
        _myInterface.MyAction();
    }

    private class ConcreteMyInterface : MyInterfaceBase
    {
        protected override void Function()
        {
            Console.WriteLine("hello");
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-24T21:28:49.480

您可以定义`MyAction`为[扩展方法](http://msdn.microsoft.com/en-us/library/vstudio/bb383977.aspx)：

```
public interface IMyInterface
{
   void Function();
}

public static class MyInterfaceExtensions
{
    public static void MyAction(this IMyInterface obj)
    {
        obj.Function();
    }
} 
```

*例子：*

```
public class HelloWorld : IMyInterface
{
    public void Function()
    {
        Console.WriteLine("Hello World");
    }

    public static void Main(string[] args)
    {
        new HelloWorld().MyAction();
    }
} 
```

*输出：*

```
你好世界
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-24T21:25:52.743

接口不能实现任何行为，它们只是合同。如果你想在定义合约时实现一些逻辑，你可以使用抽象类。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-24T21:37:19.573

为了这个目的 。你需要定义抽象类。您可以提供默认实现，也可以将实现留给派生类。

如果派生类想要覆盖某些东西，他们总是可以这样做。这使他们可以灵活地使用 base 以及他们想要覆盖的更改。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-24T21:30:10.207

在接口中声明函数的接口（签名和返回类型），然后创建一个定义为实现该接口的抽象类，并在抽象类中实现一个基本的默认实现。然后，创建从抽象类继承的其他具体类，但在必要时，用不同的实现覆盖抽象类的基本实现。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-24T21:35:43.887

*最好通过分离外部*行为来克服这类问题；`MyAction`在这种情况下，从内部实现；`MyFunction`.

这里的重点是理解什么应该是这个类和其他类之间的接口/契约的一部分，以及什么应该是该契约的实现的一部分。

在这里，定义了这个对象和它的消费者之间的契约；

```
interface IMyInterface
{
    void MyAction();
} 
```

现在，一个实现这个接口的基类，也执行一个特定的行为；

```
abstract class BaseClass : IMyInterface
{
    public void MyAction()
    {
        // do some commmon action

        // call derived implementation to deal with the outcome
    }

    protected abstract void MyFunction();
} 
```

最后，一个具体的实现，它以某种特定的方式处理 MyFunction 的结果；

```
class ConcreteClass : BaseClass
{
    protected override void MyFunction()
    {
         // concrete implementation here
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-24T21:30:56.753

接口是契约，不能包含实现。

从你上面的陈述：

> 我可以使用抽象类而不是接口，但是我不能从其他类继承

我相信您遇到了“为什么 C# 不支持多重继承”的问题。

[这是一篇关于C# 的模拟多重继承](http://www.codeproject.com/Articles/10072/Simulated-Multiple-Inheritance-Pattern-for-C)的 CodeProject 文章。您应该能够遵循此模式来解决 C# 的简单继承模型。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-06-23T05:06:55.537

这是 C# 8.0 的建议功能：

```
interface IA
{
    void M() { WriteLine("IA.M"); }
}

class C : IA { } // OK

IA i = new C();
i.M(); // prints "IA.M"` 
```

[https://github.com/dotnet/csharplang/blob/master/proposals/default-interface-methods.md](https://github.com/dotnet/csharplang/blob/master/proposals/default-interface-methods.md)

# html - 360°地球与鼠标threejs

> ID：14511071
> 
> 赞同：1
> 
> 时间：2013-01-24T21:24:22.400
> 
> 标签：html, three.js, webgl

我有个问题 。

我想用鼠标 360° 移动地球，但没有任何反应。

但是，当我使用鼠标旋转 360 时，我希望世界是固定的并且不会移动。

等待回应。

```
<!DOCTYPE html> 
```

```
 <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <style>
        body {
            color: #808080;
            font-family:Monospace;
            font-size:13px;
            text-align:center;

            background-color: #000000;
            margin: 0px;
            overflow: hidden;
        }

        #info {
            position: absolute;
            top: 0px; width: 100%;
            padding: 5px;
        }

        a {

            color: #0080ff;
        }

    </style>
</head>
<body>

    <div id="container"></div>
    <div id="info"><a href="http://threejs.org" target="_blank">three.js</a> - earth demo</div>

    <script src="../build/three.min.js"></script>
    <script src="js/libs/stats.min.js"></script>

    <script>

        var container, stats;
        var camera, scene, renderer;
        var group;
        var mouseX = 0, mouseY = 0;

        init();
        animate();

        function init() {

            container = document.getElementById( 'container' );

            camera = new THREE.PerspectiveCamera( 45, window.innerWidth / window.innerHeight, 1, 10000 );
            camera.position.z = 900;

            scene = new THREE.Scene();

            group = new THREE.Object3D();
            scene.add( group );

            // earth

            var earthTexture = new THREE.Texture();
            var loader = new THREE.ImageLoader();

            loader.addEventListener( 'load', function ( event ) {

                earthTexture.image = event.content;
                earthTexture.needsUpdate = true;

            } );

            loader.load( 'textures/1.jpg');

            var geometry = new THREE.SphereGeometry( 250, 55, 55 );
            var material = new THREE.MeshBasicMaterial( { map: earthTexture, overdraw: true } );

            var mesh = new THREE.Mesh( geometry, material );
            group.add( mesh );

            // shadow

            var canvas = document.createElement( 'canvas' );
            canvas.width = 128;
            canvas.height = 128;

            var context = canvas.getContext( '2d' );
            var gradient = context.createRadialGradient( canvas.width / 2, canvas.height / 2, 0, canvas.width / 2, canvas.height / 2, canvas.width / 2 );
            gradient.addColorStop( 0.1, 'rgba(210,210,210,1)' );
            gradient.addColorStop( 1, 'rgba(255,255,255,1)' );

            context.fillStyle = gradient;
            context.fillRect( 0, 0, canvas.width, canvas.height );

            var texture = new THREE.Texture( canvas );
            texture.needsUpdate = true;

            var geometry = new THREE.PlaneGeometry( 300, 300, 3, 3 );
            var material = new THREE.MeshBasicMaterial( { map: texture, overdraw: true } );

            renderer = new THREE.CanvasRenderer();
            renderer.setSize( window.innerWidth, window.innerHeight );

            container.appendChild( renderer.domElement );

            stats = new Stats();
            stats.domElement.style.position = 'absolute';
            stats.domElement.style.top = '0px';
            container.appendChild( stats.domElement );

            document.addEventListener( 'mousemove', onDocumentMouseMove, false );

            //

            window.addEventListener( 'resize', onWindowResize, false );

        }

        function onWindowResize() {

            windowHalfX = window.innerWidth / 2;
            windowHalfY = window.innerHeight / 2;

            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();

            renderer.setSize( window.innerWidth, window.innerHeight );

        }

        function onDocumentMouseMove( event ) {

            mouseX = ( event.clientX - windowHalfX );
            mouseY = ( event.clientY - windowHalfY );

        }

        //

        function animate() {

            requestAnimationFrame( animate );

            render();
            stats.update();

        }

        function render() {

            camera.position.x += ( mouseX - camera.position.x ) * 0.50;
            camera.position.y += ( - mouseY - camera.position.y ) * 0.50;
            camera.lookAt( scene.position );

            group.rotation.y -= 0.01;

            renderer.render( scene, camera );

        }
    // add subtle ambient lighting
    var ambientLight = new THREE.AmbientLight(0x555555);
    scene.add(ambientLight);

    </script>

</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T22:42:56.567

您遇到的问题是，当相机是 3D 实体时，您只能在 X 和 Y 方向移动相机。

为了进行旋转，您需要将鼠标坐标从 3D 球坐标转换（如纬度、经度、高度，假设高度不变，您可以将 X 分配给经度，将 Y 分配给纬度）。

然后将 3D 笛卡尔坐标分配给您的相机：

公式是（替换您在渲染函数中的内容）：

（假设海拔为 960，适用于您的模型）

```
camera.position.x = 960 * Math.sin(mouseX) * Math.cos(mouseY);
camera.position.y = 960 * Math.sin(mouseX) * Math.sin(mouseY);
camera.position.z = 960 * Math.cos(mouseX); 
```

下一个警告是 sin 和 cos 采用弧度（范围从 -pi 到 pi（-3.14159 到 3.14159）......所以您需要将 onDocumentMouseMove 事件调整为类似

```
mouseX = -Math.PI + (event.clientX)/(windowHalfX*2)*Math.PI*2;
mouseY = -Math.PI + (event.clientY)/(windowHalfY*2)*Math.PI*2; 
```

这将导致鼠标在纬度/经度坐标中运行（如果您正在看世界之巅，这仍然会有点奇怪。您可以限制 mouseY=0，那么 X 旋转将始终在赤道上。

如果您希望将鼠标移动到移动框架上而不是我展示的地球中心框架上，那么数学会稍微复杂一些。但这至少应该是一个开始。

# oracle - 新手的perl连接问题

> ID：14511080
> 
> 赞同：0
> 
> 时间：2013-01-24T21:25:27.427
> 
> 标签：oracle, perl

一位perl专家可以告诉我我在这里做错了什么吗？

我还在学习 perl，所以这个新手..无论我做什么，我的连接字符串都不起作用。

1.  尝试在 cmd 提示符下使用以下参数将 oracle 数据库与 perl 脚本连接。

    `$ list_tables /@testdb`

2.  查询用户ABC的dba_tables并列出表

3.  还可以在日志文件中获取输出

```
#!/usr/local/bin/perl -w      
use strict;
use Getopt::Std;
use OracleAgent;
use OracleLoginString;

my exitStatus = 0;
my %options = ();
my $oracleLogin;

getopts("o",\%options);

if (defined $options{o}) {
    $oracleLogin = $options{o};
}
else {
    exitWithError());
}

my $db = DBI->connect('dbi:Oracle:',$oracleLogin,'')
    or die "Can't connect to Oracle database: $DBI::errstr\n";

exit($exitStatus); 
```

基本上，当我执行脚本时，我只想提供实例名称而不是密码。

自从使用 oracle 登录后，我可以在没有密码的情况下从 sqlplus 提示符连接，例如`$sqlplus "/@testdb"`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T21:38:30.880

1.  添加[DBD::Oracle](http://p3rl.org/DBD%3a%3aOracle)

    ```
    use DBD::Oracle; 
    ```

2.  写一个正确的连接字符串：

    ```
    my $db = DBI->connect("dbi:Oracle:host=$host;sid=$sid", $user, $passwd); 
    ```

# backbone.js - 骨干美味和骨干。离线

> ID：14511084
> 
> 赞同：2
> 
> 时间：2013-01-24T21:25:41.763
> 
> 标签：backbone.js, local-storage, tastypie

我有一个美味的 API，现在我正在玩 backbone.js 。为了让两者很好地结合在一起，我使用了[主干-tastypie](https://github.com/PaulUithol/backbone-tastypie)。

这很好用。

现在我想通过使用[主干线](https://github.com/Ask11/backbone.offline)添加离线功能。这是我在backbone.js 中的模型和资源：

```
var Pizza = Backbone.Model.extend({
    urlRoot: '/api/v1/pizza/',
});

var Topping = Backbone.Model.extend({
    urlRoot: '/api/v1/topping/'
});

var PizzaCollection = Backbone.Collection.extend({
    model: Pizza,
    url: '/api/v1/pizza/',

    initialize: function() {
        this.storage = new Offline.Storage('pizza', this);
    }
});

var ToppingCollection = Backbone.Collection.extend({
    model: Topping,
    url: '/api/v1/topping/',

    initialize: function() {
        this.storage = new Offline.Storage('topping', this);
    }
}); 
```

然后，如果我创建一个集合并对存储对象进行增量同步，则针对 API 的请求会正常加载，但集合中仍然没有模型：

```
var pizzas = new PizzaCollection();
pizzas.storage.sync.incremental(); 
```

有人可以在这里帮助我了解将骨干美味和骨干网结合在一起的知识吗？

# jquery - 使用jquery向左滑出文本

> ID：14511085
> 
> 赞同：0
> 
> 时间：2013-01-24T21:25:42.717
> 
> 标签：jquery

我在一个页面上并排有 3 个图标。我想要的是当用户将鼠标悬停在图标上时，一个小的文本跨度会滑到左侧。

所以（没有悬停）：[IMG]

悬停（文本滑出）：一些文本 [IMG]

我为每个图标使用此代码：

```
<div class="cgs"><span class="cgstext">1\. Connect</span><a href="#"><img src="images/cgs/connect70h.png" width="69" height="70" alt="Connect"></a></div> 
```

如果图标在左侧，文本在右侧，我会简单地使用 jQuery animate 来扩展外部 div ......但我不确定如何使左侧的跨度滑到左侧。我希望它优雅地滑出，如果它在 2 个图标之间，则空间可以优雅地扩展（并在悬停时优雅地收缩）。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T21:34:25.507

这应该足以让你到达那里。我不得不更改您的 html、css 并添加一些 js。不要使用跨度，因为您无法在其上设置宽度。从而使`animate`无用。相反，我将其设置为 div `inline-block`。然后，您可以正确地为其设置动画。其余的只是 javascript，听起来你已经知道如何去做了。

将鼠标悬停在图像上。

[http://jsfiddle.net/Mx2JS/3](http://jsfiddle.net/Mx2JS/3)

```
<div class="cgs">
    <div class="cgstext">1\. Connect</div>
    <a href="#"><img src="http://placehold.it/69x70" width="69" height="70" alt="Connect"></a>
    <a href="#"><img src="http://placehold.it/69x70" width="69" height="70" alt="Connect"></a>
    <a href="#"><img src="http://placehold.it/69x70" width="69" height="70" alt="Connect"></a>
</div>

$('a').hover( function() {
    $('div.cgstext').animate( { width:100 }, 500);
}, function() {
    $('div.cgstext').animate( { width:0 }, 500);
}); 
```

# javascript - jQuery Fancybox 无法识别元素

> ID：14511090
> 
> 赞同：0
> 
> 时间：2013-01-24T21:25:55.457
> 
> 标签：javascript, jquery, fancybox, fancybox-2

```
<a id="attachment3655" rel="Lightbox_109160" href="https://xenogamers.org/attachment.php?attachmentid=3655&d=1350682390">
<img class="thumbnail" border="0" style="float:CONFIG" alt="Click image for larger version.  Name: 253635_10150631007825720_595485719_18819556_7955719_n.jpg  Views: 32  Size: 100.9 KB  ID: 3655" src="https://xenogamers.org/attachment.php?attachmentid=3655&d=1359000187&thumb=1" title="Click image for larger version.  Name: 253635_10150631007825720_595485719_18819556_7955719_n.jpg  Views: 32  Size: 100.9 KB  ID: 3655">
</a>

$(document).ready(function () {
    $("#attachment3655").fancybox({
        openEffect: 'none',
        closeEffect: 'none'
    });
}); 
```

它根本无法识别 a id，我不知道为什么。我无法轻易更改上面的源代码，所以我无法找到仅使用 jquery 的方法。

我一直在这里工作：http: [//jsfiddle.net/2k8EP/226/](http://jsfiddle.net/2k8EP/226/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T21:33:12.297

只需添加`type: "image"`到您的 API 选项

```
$(document).ready(function () {
    $("#attachment3655").fancybox({
        openEffect: 'none',
        closeEffect: 'none',
        type: "image"
    });
}); 
```

你的**[分叉 jsfiddle](http://jsfiddle.net/zkHUj/)**

顺便说一句，在[此处](http://www.fancyapps.com/fancybox/#support)记录，选项卡常见问题解答，第 5 号。

# android - (FrameLayout)findViewById(...) 给出 null

> ID：14511098
> 
> 赞同：1
> 
> 时间：2013-01-24T21:26:23.880
> 
> 标签：android, android-layout, android-widget

我是android新手，非常感谢任何帮助。我正在尝试使用背景作为我的视图，并假设我想创建一个简单的 Credits 页面，其中包含以下文件： credits.xml Credits.java

学分.java：

```
public class Credits extends Activity implements OnTouchListener
{   
    private FrameLayout fl;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            fl = (FrameLayout)findViewById(R.id.credits_screen);
            if ( fl == null ) Log.e("Credits", "fl is null");
            else {
                  fl.setOnTouchListener(this);
                  setContentView(fl);
            }
    }
    @Override 
    public boolean onTouch(View v, MotionEvent event) {
        return true;
    }
} 
```

在我的 credits.xml 中，我有：

```
<?xml version="1.0" encoding="utf-8"?>

<FrameLayout  xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="fill_parent" android:layout_height="fill_parent"
 android:focusable="true" android:id="@+id/credits_screen">

<ImageView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent" android:layout_height="fill_parent"
android:src="@drawable/credits" android:scaleType="fitXY" />

</FrameLayout> 
```

显然，fl 在 (FrameLayout)findViewById() 处返回 null。虽然我看到 R.id.credits_screen 是在 R 文件中生成的。我可以知道我的代码有什么问题吗？为什么它无法找到 FrameLayout？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T21:30:13.623

您需要在 findViewById() 之前调用 setContentView()。

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.credits);
    fl = (FrameLayout) findViewById(R.id.credits_screen);
    fl.setOnTouchListener(this);
} 
```

# ios - 通过 iTunes 同步大型内部应用程序时 iOS 同步错误 0xE8000004

> ID：14511103
> 
> 赞同：2
> 
> 时间：2013-01-24T21:26:52.170
> 
> 标签：ios, in-house-distribution

我的企业应用程序有一个非常大的 IPA 文件，尝试通过 iTunes 同步时出现此错误，无论是 Mac 还是 PC，都没有关系。

该应用程序从 Xcode 安装并运行良好，但 IPA 为 6.7GB。除了 2GB 应用商店限制外，我找不到任何大小限制指南，iTunes 不会抱怨应用大小，但不会同步文件。

关于这个错误，我只能找到各种 USB 连接问题，如果不是通过 iTunes 而是通过 Xcode 安装，该应用程序运行良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T22:07:19.393

大文件更有可能出现此问题（因为有更多时间失败），但您的应用程序没有任何问题。这是同步数据的问题。

我假设您已经查看了 Apple 支持文章[iOS: Unknown error contains '0xE' when connected to a Windows PC](http://support.apple.com/kb/TS3221)。

如果这不能解决问题，您能否打开设备控制台并在同步期间发布相关设备日志？

# wcf-data-services - 如何在 MVC 中使用 WCF 数据服务 WebGet 方法？

> ID：14511108
> 
> 赞同：0
> 
> 时间：2013-01-24T21:27:04.020
> 
> 标签：wcf-data-services

假设我有一个 WebGet 方法：

```
[WebGet]
public IQueryable<State> GetStatesStartingWithLetter(string letter)
{
     return CurrentDataSource.States.Where(s => s.Name.Substring(0, 1).Equals(letter.Substring(0, 1),
            StringComparison.InvariantCultureIgnoreCase)).OrderBy(s => s.Name);
} 
```

我可以像这样在浏览器中使用它：

```
http://localhost:55576/WcfDataService.svc/GetStatesStartingWithLetter?letter='a' 
```

但是，我必须在 MVC3 控制器中做什么才能调用该方法？我已经添加了服务引用，我可以毫无问题地使用上下文。下面的代码在 /Controller/States URL 处向屏幕显示状态列表。

```
public ActionResult States()
{
    MyDbContext ctx = new MyDbContext(new Uri("http://localhost:55576/WcfDataService.svc/"));

    var temp = from state in ctx.States
               select state;

    return View(temp);
} 
```

我没有看到任何简单的方法来调用 WebGet 方法，它没有像我期望的那样暴露在服务上。我错过了什么吗？我可以通过这样做得到结果：

```
public ActionResult States()
{
    WhelenDbContext ctx = new WhelenDbContext(new Uri("http://localhost:55576/WcfDataService.svc/"));

    var temp = ctx.Execute<State>(new Uri("http://localhost:55576/WcfDataService.svc/GetStatesStartingWithLetter?letter='a'"));

    return View(temp);
} 
```

..但这似乎有点荒谬。任何建议都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T21:31:00.777

“添加服务引用”功能无法识别服务操作（即，在服务上使用 [WebGet] 声明的方法）。您可以使用`ctx.Execute<T>()`（就像您一样）或`ctx.CreateQuery<T>()`，但我认为您希望的强类型解决方案都不是。

有关详细信息，请参阅[此页面](http://msdn.microsoft.com/en-us/library/hh230677.aspx)。

# javascript - JavaScript 调用带参数的 VBA 例程

> ID：14511109
> 
> 赞同：2
> 
> 时间：2013-01-24T21:27:07.850
> 
> 标签：javascript, excel, hta, vba

1.  我需要将参数从 HTA 的 JavaScript 传递给 Excel VBA 代码。

    1.  我可以成功调用 VBA 函数，但无法正确传递字符串参数。
    2.  JavaScript 函数可以传递不同的字符串参数。
    3.  下面是简单和演示形式的代码。
    4.  Excel-VBA代码

    ```
    Sub subTest(strName As String)
    MsgBox strName
    End Sub 
    ```

带有 Javascript 的 HTA 代码

```
<!DOCTYPE html>
<html>
<head>
<title>HTA</title>
<hta:application 
id="oHta"
applicationname="htaNavi"
border="1"
borderstyle = normal
contextmenu = "yes"
caption="Navigator"
sysmenu="yes"
WINDOWSTATE="maximize"
>
</head>
<body>
<input type="button" value="testing" onclick="funRun('testng string')" />
<input type="button" value="testing second" onclick="funRun('testng')" />
</body>

<script>

var objExl;
var objWb;
var objExl =new ActiveXObject("Excel.Application");
objExl.Visible = true;
var objWb = objExl.Workbooks;
var strpath = '\path\testing_excel_web.xls';
objWb.Open(strpath);

function funRun(strName)
{
alert(strName);
objWb.Application.Run('testing_excel_web.xls!subTest(strName)');
}
</script>
</html> 
```

我可以调用 subTest，但消息框将 strName 填充为字符串，而不是将“测试字符串”填充为文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T21:30:33.030

我想你想要：

```
objWb.Application.Run('testing_excel_web.xls!subTest("' + strName + '")'); 
```

这样，变量的值将`strName`连接到您尝试运行的命令。

我对 VBA 函数的调用一无所知，所以我不确定你是否需要我提供`"`的类似的东西。`strName`

另外，为了安全起见，如果你的`strName`值包含`"`，你应该使用这个：

```
objWb.Application.Run('testing_excel_web.xls!subTest("' + strName.replace(/"/g, "\"") + '")'); 
```

希望有了这个，价值`strName`可能是

```
The word "testing" here
or
"Here's a quote" 
```

它仍然可以工作。

关键是如果字符串包含`"`，Javascript 会/可能会失败。如果它绝对永远不会包含`"`，那就忘记它。但我认为这是必要的，因为任何`"`值`strName`都会破坏它作为参数的传递。

# emacs - 你如何在emacs中为特定字母着色？

> ID：14511111
> 
> 赞同：2
> 
> 时间：2013-01-24T21:27:14.127
> 
> 标签：emacs, elisp

在一个新的并且希望非常简单的 emacs 模式中，我希望“a”的每个实例都是 #0000FF，而“b”是 #DF0101。到目前为止，尽管进行了很多谷歌搜索，但我还没有找到一种方法来做到这一点。理想情况下，它会在您键入时实时发生。

[http://www.gnu.org/savannah-checkouts/gnu/emacs/manual/html_node/emacs/Highlight-Interactively.html](http://www.gnu.org/savannah-checkouts/gnu/emacs/manual/html_node/emacs/Highlight-Interactively.html)

[http://www.gnu.org/savannah-checkouts/gnu/emacs/manual/html_node/emacs/Font-Lock.html#Font-Lock](http://www.gnu.org/savannah-checkouts/gnu/emacs/manual/html_node/emacs/Font-Lock.html#Font-Lock)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T21:42:38.423

我将它用于我的 Navi 次要模式：

```
;; Adding Navi to the syntax highlighting of emacs mode. 
```

首先用他们的颜色制作新面孔，在我的例子中，绿色代表字母“t”的成功字体，青色代表“Navi”和“navi”。

如果需要，请阅读有关[font-lock 的](http://www.gnu.org/software/emacs/manual/html_node/emacs/Font-Lock.html)信息。

```
(make-face 'font-lock-Navi-face)
(set-face-foreground 'font-lock-Navi-face "cyan")

(make-face 'font-lock-success-face)
(set-face-attribute 'font-lock-success-face nil :foreground "green") 
```

现在添加要附加的“关键字”（[regexp](https://www.google.nl/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDEQFjAA&url=http://emacswiki.org/emacs/RegularExpression&ei=C6wBUajhFM3B0gX96ICgDQ&usg=AFQjCNHx2-NZoAFnTO98yPQd9RWNOPbybQ&bvm=bv.41524429,d.d2k)）：

```
(defun add-custom-keywords()
  "adds a few keywords for emacs mode"
  ;
  (font-lock-add-keywords nil
                     '(
                       ("Navi\\|navi" . 'font-lock-Navi-face)

 ;; here you can see that I highlight the letter "t" in " t " when spaced, 
 ;; or with a parenthesis\newline around it

                       ("\\s-t\\s-\\|\\s-t)\\|\\s-t\n" . 'font-lock-success-face)
                       )
                     )
) 
```

`"\\|"`您可以简单地用您的字母“a”或“b”替换 Navi（“或”在这里）或 navi `"a\\|b"`，然后给它面子。

```
; This is the hook to activate when the mode is triggered
(add-hook 'emacs-lisp-mode-hook 'add-custom-keywords) 
```

最后一部分确保此字体将是“实时的”，并且每次打开文件时。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-24T22:49:33.613

`add-font-lock-keywords`主要用于用户自定义。如果您自己编写模式，最好设置`font-lock-defaults`一个适当的值。

`sample-mode`在 emacswiki 上查看一些示例。

# wpf - 防止数据网格组标题水平滚动

> ID：14511113
> 
> 赞同：4
> 
> 时间：2013-01-24T21:27:24.313
> 
> 标签：wpf, datagrid, header, scroll, grouping

刚刚检查了[这个](https://stackoverflow.com/questions/10361791/how-to-retain-datagrid-group-headers-from-scrolling-in-wpf)，它非常相似，但垂直滚动不是水平的。

我有一个包含分组数据的数据网格，如下所示：

![](../Images/57c34e84c2fdc2027c9ecc6a969702f6.png)

我只想在水平滚动列时保持组标题信息可见。但标题滚动出窗口：

![在此处输入图像描述](../Images/f3e46cf1559509d1d2ab5fb113616d58.png)

这是 xaml（最初来自[此处](http://wpftutorial.net/DataGrid.html#grouping)），仅适用于 datagrid 组样式...如果您需要更多信息，请让我知道！

```
<DataGrid.GroupStyle>
    <GroupStyle>
        <GroupStyle.HeaderTemplate>
            <DataTemplate>
                <StackPanel>
                    <TextBlock Text="{Binding Path=ReferralDate}" FontWeight="Bold" Padding="3"/>
                </StackPanel>
            </DataTemplate>
        </GroupStyle.HeaderTemplate>
        <GroupStyle.ContainerStyle>
            <Style TargetType="{x:Type GroupItem}">
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type GroupItem}">
                            <Expander IsExpanded="True">
                                <Expander.Header>
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type GroupItem}}, 
                                            Converter={StaticResource ResourceKey=groupTitleVisitsConverter}}" 
                                            Foreground="White" FontWeight="Bold"/>
                                    </StackPanel>
                                </Expander.Header>
                                <ItemsPresenter />
                            </Expander>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
        </GroupStyle.ContainerStyle>
    </GroupStyle>
</DataGrid.GroupStyle> 
```

# javascript - 放大/缩小时使用 Google Maps API 更改 Google Fusion Table API 中的图标

> ID：14511124
> 
> 赞同：1
> 
> 时间：2013-01-24T21:27:55.437
> 
> 标签：javascript, google-maps-api-3, google-fusion-tables

我正在使用 Google Fusion Table API 和 Google Maps API。多亏了 Google Maps API，我有了我的地图，然后我使用 Google Fusion Table API 创建了一个图层，效果很好。

当我创建图层时，我定义标记应该是“small_red”（小红点），thants 也很好用。

```
var layer = new google.maps.FusionTablesLayer({query: {select: 'coordenadas', from: '1-zmpFV_oI7OBiq3iEyHyze7QBiBDZzdrxby_TYM', where: 'hide!=0'},map: map, suppressInfoWindows: true, styles: [{ markerOptions: {iconName: "small_red" }}]}); 
```

现在，正如您在下面看到的，我想在用户放大时将图标更改为“large_red”（谷歌地图的正常图标），并在用户放大时更改回“small_red”（同样是红点）。

```
google.maps.event.addListener(map, 'zoom_changed', function() {
    if(map.getZoom()>14){
        //Change icon to large_red
    } else {
        //Back to small_red
    }
}); 
```

最后一个代码识别放大或缩小事件，然后我有一个 if 子句来验证缩放是向上还是向下，然后，问题是，我不知道如何从图层上的标记更改图标地图。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T21:50:44.433

我找到了解决方案，很简单：

```
google.maps.event.addListener(map, 'zoom_changed', function() {
    if(map.getZoom()>14){
        layer.setOptions({styles: [{markerOptions:{ iconName:"large_red"}},]});
    } else {
        layer.setOptions({styles: [{markerOptions:{ iconName:"small_red"}},]});
    }
}); 
```

# python - 为什么我不能创建图像并将其设置为 OpenCV 中的背景？

> ID：14511135
> 
> 赞同：1
> 
> 时间：2013-01-24T21:28:33.290
> 
> 标签：python, opencv, computer-vision

所以，这就是我正在尝试的：

```
 import cv2
    import cv2.cv as cv
    cv2.namedWindow(threeDWinName, cv2.CV_WINDOW_AUTOSIZE)
    img2 = cv.CreateImage((320, 240), 32, 1)
    cv2.imshow(threeDWinName,img2) 
```

有人知道这是怎么回事吗？我明白了`TypeError: <unknown> is not a numpy array`

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T22:00:44.037

更新版本的 OpenCV，`cv2`使用 numpy 数组来存储图像，之前的版本`cv`使用 opencv 的特殊 Mat's。在您的代码中，您`Mat`使用旧`cv`函数创建了一个图像`CreateImage`，然后尝试使用较新的`cv2.imshow`函数查看它，但`cv2.imshow`需要一个 numpy 数组...

...所以您需要做的就是导入 numpy，然后将您`CreateImage`的行更改为：

```
img2 = np.zeros((320,240),np.float32) 
```

然后应该没问题:)

# git - 为什么 git (bash) 会在我的新文件中插入一堆废话？

> ID：14511137
> 
> 赞同：5
> 
> 时间：2013-01-24T21:28:38.770
> 
> 标签：git, github, git-bash

所以。我向 git 存储库添加了一些新文件，这些文件我已经几个月没有碰过。出于*某种原因*，在合并、拉取和推送我的更改到 github 之后，我注意到所有新文件都插入了如下文本：

```
>>>>>>>>
HEAD
c0d3234k2jl423;lk4j232;l34jk32;l23j4 
```

在新添加的文件中，这些*行*是随机插入的，但可能不是完全随机插入的。幸运的是，没有太多新文件，我能够通过，相当容易地清理它们，然后重新添加/提交/推送，现在我相信问题已经过去了。

但是发生了什么事？我对 git 和 github 还是很陌生。我怎样才能避免将来发生这种情况？我在 Windows XP 上使用 git bash 控制台。

另外——因为这可能是相关的——当我之前尝试通过我的 PHPStorm CLI 界面提交文件时，我会点击“提交”并且提交永远不会完成。只是不断地尝试和尝试。所以我一直不得不中止该命令，然后进入并手动删除 index.lock 文件以及 COMMIT_EDITMSG.swp 文件。

另外，这最后一次（插入废话时），我收到一条错误消息，说

```
E138: can't write viminfo file u:_viminfo!
Press enter or type command to continue 
```

也许这也有关系？就像我说的，这个问题现在似乎已经过去了，只是想知道出了什么问题以及将来如何避免它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T22:43:00.723

评论太长了，所以：

如果你做了一些提交并且远程有*不同*的提交，你*总是*必须合并（或*做某事*） 。*只有当它只会*在远程已经拥有的内容之上添加新提交时，您才能推送。（这称为“快进”。）

 **只有你，所以遥控器不应该有不同的提交。但是，如果您一直在搞恶作剧`rebase`或强行推动而不了解自己在做什么，那么您可能已经创造了将分支合并到自身中的令人愉快的荒谬情况。

因此，这是一个速成课程，其中包含您将学会讨厌的提交图之一：

```
 H <- merge
        / \
you -> G   E <- github
       |   |
       F   D
        \ /
         C
         |
         B
         |
         A 
```

这就是提交历史的样子，如果您确实使用 C，然后其他人（或您在另一台计算机上）添加 D 和 E 并推送它们，然后您再次开始从 C 开始工作并执行 F 和 G。您可以不要像这样推动，因为您当地的分支机构对历史`D`以及`E`它们与历史的关系一无所知；你只有`A-B-C-F-G`.

但是如果你先合并创建`H`，你现在有一个分支，上面有你和 github 的*所有*提交，并且 github 可以通过向上“移动”它的箭头来更新。您无法在远程执行此工作，因为它涉及更改文件以创建合并版本，并且远程计算机实际上没有文件的物理副本。（另外，你无法解决冲突。）

`git log --graph --oneline --decorate`是一个非常有用的视图，它应该向您展示您正在合并的内容。上图将如下所示：

```
* H (master)
|\
*| G
*| F
|* E (origin/master)
|* D
|/
* C
* B
* A 
```

git 会告诉你合并后是否存在冲突，并且`git status`（你应该*虔诚*地运行）总是会以可怕的红色显示冲突的文件。发生这种情况时，git 几乎肯定会在这些文件中注入冲突标记，您需要解决问题并完成合并。（当它告诉你有冲突时，git 会告诉你如何完成合并。）

如果冲突标记之间的东西真的是垃圾，那么您的 IDE 可能会搞砸并损坏文件。git 非常可靠，永远不应该破坏数据（当然，除非你无意中要求它这样做）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T22:15:48.240

下次尝试使用解决冲突的工具，例如`git mergetool -t kdiff3`. 它相当快速和直观，在有大量小冲突时有很大帮助。

kdiff3 的视觉[说明](http://www.gitguys.com/topics/merging-with-a-gui/)。**

# twitter-bootstrap - 流体容器的脚手架问题

> ID：14511138
> 
> 赞同：0
> 
> 时间：2013-01-24T21:28:43.337
> 
> 标签：twitter-bootstrap

我有一些适合我的网页的问题，因为我想使用引导程序脚手架。

我正在使用它`fluid layout`来构建一个简单的页面，左侧是菜单，右侧是内容。

尝试执行此操作时遇到两个问题：

1.  我的两个主要容器之间没有空间。
2.  我们可以在两个容器中使用脚手架吗（下面有一些代码）？还是我们必须在`<div class="2">`and中使用浮点数`<div class="10">`？

这是我的代码

```
 <div class="container-fluid">
    <div class="row-fluid">

      <script type="text/template" id="sidebar-template">
        ****** SIDE BAR ******
      </script>
      <div class="span2">
        <div id='sidebar-container'></div>
      </div>

      <script type="text/template" id="content-template">
        <p>****** CONTENT ******</p>
      </script>
      <div class="span10">
        <div id='content-container'></div>
      </div>
    </div>
  </div> 
```

这是我第一个问题的 3 个屏幕截图。

[侧边栏](http://hpics.li/8003ae0) [内容](http://hpics.li/6aa83af) [容器](http://hpics.li/cf8bacf)

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T21:52:19.570

查看您的代码时，我看到了主容器之间的预期左边距（见下面的小提琴）。你在某处覆盖它吗？此外，您应该在现有行中
添加另一个以使用脚手架。`row-fluid``span`

[jsFiddle](http://jsfiddle.net/Qsd98/)
[Bootstrap 嵌套脚手架示例](http://twitter.github.com/bootstrap/examples/fluid.html)（查看源码）

**编辑**
您的内容在容器 div 之外。试试这个：

```
<div class="container-fluid">
    <div class="row-fluid">
        <div class="span2">
            <div id='frontend-header-container'>
                <script type="text/template" id="frontend-header-template">
                    ****** SIDE BAR ******
                </script>
            </div>
        </div>
        <div class="span10">
            <div id='home-container'>
                <script type="text/template" id="home-template">
                    <p>****** CONTENT ******</p>
                </script>
            </div>
        </div>
    </div>
</div> 
```

# ruby - Ruby 中的字符串到日期

> ID：14511141
> 
> 赞同：3
> 
> 时间：2013-01-24T21:28:57.150
> 
> 标签：ruby, string, date

我有很多看起来像“1999 年 3 月 31 日”的字符串值。

有没有一种简单的方法可以将此字符串格式转换为 Ruby 日期？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-24T21:30:42.200

您可以使用以下`Date.parse`方法：

```
> Date.parse "Mar 31, 1999"
=> Wed, 31 Mar 1999 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T21:49:39.060

您可以使用`Date.parse`. 对于更复杂的日期字符串，您可以使用[`strptime`](http://ruby-doc.org/stdlib-1.9.3/libdoc/date/rdoc/Date.html#method-c-strptime)：

```
require 'date'
puts Date.strptime('Mar 31, 1999', '%b %d, %Y') #->1999-03-31 
```

`strptime`有点相反[`strftime`](http://ruby-doc.org/stdlib-1.9.3/libdoc/date/rdoc/Date.html#method-i-strftime)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T02:49:14.437

要解析各种日期字符串，请查看[慢性](https://github.com/mojombo/chronic)

# jquery - 在灯箱中显示链接

> ID：14511142
> 
> 赞同：1
> 
> 时间：2013-01-24T21:28:57.447
> 
> 标签：jquery, jquery-ui, jquery-plugins, lightbox, lightbox2

在灯箱中，我试图从数据标题中检索数据，当我提供 p 标签、div 标签时它工作正常，但它不适用于在灯箱中带有 href 的标签我想显示重定向到的链接其他页面

在下面提供我的小提琴

[http://jsfiddle.net/ZrpLT/88/](http://jsfiddle.net/ZrpLT/88/)

```
<div data-caption="&lt;a href="http://www.w3schools.com/" &gt;Create&lt;/a&gt; &lt;div&gt;View/Edit&lt;/div&gt; &lt;div&gt;Labels&lt;/div&gt;" data-image="http://www.defie.co/designerImages/thumbnails/inventory.png"></div>
<div data-caption="<div>Paul Scholes</div> <div>Wayne Rooney</div> <div>Sir Alex Ferguson</div>" data-image="http://www.defie.co/designerImages/thumbnails/search.png"><div>ko kopkopwkop</div></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T21:49:10.537

HREF 属性周围的双引号会破坏数据标题。单引号工作：

[http://jsfiddle.net/hansvedo/pRvjC/1/](http://jsfiddle.net/hansvedo/pRvjC/1/)

```
<div data-caption="&lt;a href='http://www.w3schools.com/' &gt;Create&lt;/a&gt; &lt;div&gt;View/Edit&lt;/div&gt; &lt;div&gt;Labels&lt;/div&gt;" data-image="http://www.defie.co/designerImages/thumbnails/inventory.png"></div> 
```

# php - css高度调整后计算宽度

> ID：14511148
> 
> 赞同：1
> 
> 时间：2013-01-24T21:29:23.663
> 
> 标签：php, jquery, css, resize

我正在构建一个从 XML 中提取的水平图像页面。当图像加载时，它们在屏幕高度上减去一个小值以留出一些空间。我正在获取图像的宽度，以便将它们相加并设置 div 容器的宽度。目前，总宽度是完整未调整大小的图像的大小，在最后一张图像的末尾留有空白。如何获取所有调整大小的图像的宽度？

这是我的代码

```
 <script>

 $(document).ready(function () {
$.ajax({
    type: "GET",
    url: "xml.xml",
    dataType: "xml",
    success: xmlParser
});

 });

function xmlParser(xml) {
var $heightb = $(window).height() - 45;
var $widthb = 0;
$(xml).find("image").each(function () {
    $url = $(this).attr("url");
    $(".main").append('<div class="image" style="height='+$heightb+'px"><div class="title"><img height="'+$heightb+'px" src="' + $url + '" title="' + $(this).attr("desc") + '" /></div><div class="description">' + $(this).attr("desc") + '</div></div>');
    $(".image").fadeIn(1000);
    $widthb += $(".image").width();
});
$(".main").css('width', $widthb);
} 
```

我正在处理的页面是[http://www.spitznagel.ch/mobile.php](http://www.spitznagel.ch/mobile.php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T21:35:56.403

您可能只需为每个图像创建元素并在附加之前获取其大小。像这样的东西（未经测试的代码；希望你明白）

```
function xmlParser(xml) {
    var $heightb = $(window).height() - 45;
    var $widthb = 0;
    var imgDiv;
    var width;

    $(xml).find("image").each(function () {
        $url = $(this).attr("url");
        imgDiv = $('<div class="image" style="height='+$heightb+'px"><div class="title"><img height="'+$heightb+'px" src="' + $url + '" title="' + $(this).attr("desc") + '" /></div><div class="description">' + $(this).attr("desc") + '</div></div>');
        $(".main").append(imgDiv);
        width = imgDiv.width();
        imgDiv.fadeIn(1000);
        $widthb += width;
    });
    $(".main").css('width', $widthb);
} 
```

# python - Google AppEngine 与服务帐户融合表

> ID：14511158
> 
> 赞同：2
> 
> 时间：2013-01-24T21:30:01.737
> 
> 标签：python, google-app-engine, google-fusion-tables, google-api-python-client

迁移到 /v1 Fusion Table API 的游戏迟到了，但不再拖延。

我在 AppEngine 上使用 Python 并尝试使用 Google 服务帐户连接到 Google Fusion Tables（OAuth2 的更复杂的表亲，用于使用 JSON Web 令牌的服务器端应用程序）

我发现了另一个问题，该问题向我指出了一些将服务帐户与 Google Prediction API 结合使用的文档。 [Fusion Table 和 Google 服务帐号](https://stackoverflow.com/questions/10338497/fusion-table-and-google-service-accounts)

到目前为止我有

```
import httplib2
from oauth2client.appengine import AppAssertionCredentials
from apiclient.discovery import build

credentials = AppAssertionCredentials(scope='https://www.googleapis.com/auth/fusiontables')
http = credentials.authorize(httplib2.Http(memcache)) #Http(memcache)
service = build("fusiontables", "v1", http=http)

# list the tables
tables = service.table().list().execute() # <-- ERROR 401 invalid credentials here 
```

有没有人有使用他们可以共享的服务帐户连接到 AppEngine 上的 Fusion Tables 的示例？或者网上有什么好看的？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T17:32:00.090

这确实有效。重要的部分是您必须授予应用引擎服务帐户访问您的融合表的权限。如果您正在写入，则该帐户需要写入权限。如需帮助，请参阅：[https](https://developers.google.com/api-client-library/python/start/installation) ://developers.google.com/api-client-library/python/start/installation （查找入门：快速入门）

您的应用引擎服务帐户类似于 your-app-id@appspot.gserviceaccount.com

您还必须使应用引擎服务帐户成为 api 控制台中的团队成员，并赋予其“可以编辑”权限。

```
SCOPE='https://www.googleapis.com/auth/fusiontables'
PROJECT_NUMBER = 'XXXXXXXX' # REPLACE WITH YOUR Project ID

# Create a new API service for interacting with Fusion Tables
credentials = AppAssertionCredentials(scope=SCOPE)
http = credentials.authorize(httplib2.Http())
logging.info('QQQ: accountname: %s' % app_identity.get_service_account_name())
service = build('fusiontables', 'v1', http=http, developerKey='YOUR KEY HERE FROM API CONSOLE')

def log(value1,value2=None):
    tableid='YOUR TABLE ID FROM FUSION TABLES'
    now = strftime("%Y-%m-%d %H:%M:%S", gmtime())
    service.query().sql(sql="INSERT INTO %s (Temperature,Date) values(%s,'%s')" % (tableid,value1,now)).execute() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-11T23:49:23.877

澄清 Ralph Yozzo 的回答：您需要将创建 service_account 凭据时下载的 json 文件中的“client_email”的值（`ServiceAccountCredentials.from_json_keyfile_name('service_acct.json')`与新的 oauth2client 库一起使用时加载的相同文件）添加到表的共享对话框屏幕（点击 1 然后在 2 中输入电子邮件地址）

[![单击共享，然后输入电子邮件地址](../Images/2de91df24966648b8ec536b97abceb4b.png)](https://i.stack.imgur.com/YNAt2.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-14T23:46:55.380

我找到的帮助将 Python AppEngine 连接到使用 Oauth2 的 Fusion Tables API 的最佳在线资源是 [Google APIs Client Library for Python](https://developers.google.com/api-client-library/python/guide/aaa_oauth)

幻灯片演示有助于理解在线示例，为什么使用装饰器。

对于了解是否使用应用程序的服务帐户或用户帐户进行身份验证也很有用： [使用 OAuth 2.0 访问 Google API](https://developers.google.com/accounts/docs/OAuth2)

考虑安装[适用于 Python 的 Google API 客户端库](https://developers.google.com/api-client-library/python/start/installation#appengine)

除了范围之外，Oauth2 或多或少对所有 Google API 都通用，而不仅仅是融合表。

一旦 oauth2 工作，请参阅[Google Fusion Tables API](https://developers.google.com/fusiontables/docs/sample_code)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T21:22:38.180

由于 Fusion Tables 的表属于个人 Gmail 帐户，而不是与 API 控制台项目关联的服务帐户，因此 AppAssertionCredentials 可能不起作用。不过，它会提出一个有趣的功能请求：

[http://code.google.com/p/fusion-tables/issues/list](http://code.google.com/p/fusion-tables/issues/list)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-06T21:45:39.433

[如果您希望它在 Google App Engine 或 Google Compute Engine 之外的其他主机上工作（例如，从 localhost 进行测试），那么您应该使用从您可以从您的服务帐户页面](https://console.cloud.google.com/iam-admin/serviceaccounts)生成和下载的 json 密钥文件创建的 ServiceAccountCredentials 。

```
scopes = ['https://www.googleapis.com/auth/fusiontables']
keyfile = 'PATH TO YOUR SERVICE ACCOUNT KEY FILE'
FTID = 'FUSION TABLE ID'

credentials = ServiceAccountCredentials.from_json_keyfile_name(keyfile, scopes)
http_auth = credentials.authorize(Http(memcache))
service = build('fusiontables', 'v2', http=http_auth)

def insert(title, description):
    sqlInsert = "INSERT INTO {0} (Title,Description) values('{1}','{2}')".format(FTID, title, description)
    service.query().sql(sql=sqlInsert).execute() 
```

有关说明，请参阅[Google 的服务帐户页面](https://developers.google.com/api-client-library/python/auth/service-accounts)。

# php - PHP 严格标准：非静态方法 Fatal::dbError()

> ID：14511163
> 
> 赞同：1
> 
> 时间：2013-01-24T21:30:13.903
> 
> 标签：php, exception, methods, standards, strict

我正在对 PHP 中的一个错误进行故障排除，但我不知道如何解决它。我没有任何PHP知识。

这是代码：

```
function _act($sql) {
   if (!$this->_link) {
      Fatal::internalError('Tried to make database query before connection.');
   }

   $r = mysql_query($sql, $this->_link);

   if ($r === false) {
      Fatal::dbError($sql, "Database query failed", mysql_error());
   }
   return $r;
 } 
```

在错误日志中，我得到以下信息：

> [24-Jan-2013 13:25:38 America/Denver] PHP 严格标准：非静态方法 Fatal::dbError() 不应静态调用，假设 $this 来自 /home1/flcclear/public_html/Library 中的不兼容上下文/classes/Query.php 第 91 行

我试图让它成为一个对象调用，`$r->mysql_error();`但这导致了一个不同的错误。我不是试图重写这段代码，只是试图纠正一所小学/中学的错误，这等于没有钱，志愿者时间。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T21:36:58.283

使 Fatal::internalError,Fata::dbError （以及您正在使用的其他方法，例如“Fatal::methodName”）静态

例子 ：

```
class Fatal
{
    public static dbError($sql,$message){
    //method body
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T21:37:19.473

但错误消息指的是`Fatal::dbError`而不是`mysql_error`。

`Fatal::dbError`是为你设计的课程吗？尝试这个：

```
Class Fatal{
  ...
  static public dbError(...){...}
  ...
} 
```

# teamcity - Teamcity 服务器迁移 - 代理更改

> ID：14511164
> 
> 赞同：2
> 
> 时间：2013-01-24T21:30:15.260
> 
> 标签：teamcity, teamcity-7.0

我计划将我的 teamcity 服务器迁移到一个新的物理位置。该过程非常简单，导出数据库，安装 vanilla teamcity 服务器并通过maintaindb.sh 导入数据库。

由于我有一个大型安装，我决定只备份服务器设置、项目和构建配置、插件。我的观点是我可以稍后手动移动构建日志和工件（我宁愿不尝试从 500GB 的 zip 文件中恢复）。但是，在导入备份后，我无法在代理池中看到任何构建代理。

有任何想法吗？您是否必须因为服务器迁移到新位置而从头开始安装每个构建代理？您是否只需将代理指向新服务器就可以了（如果是这样，为什么服务器上的代理池看起来是空的）

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T22:32:08.737

如果您在迁移中更改服务器 URL，根据您的问题，我假设您是，那么您将需要编辑每个构建代理的属性。

在您的`~TeamCity\Install\buildAgent\conf`中，您将有一个`buildAgent.properties`文件。您需要修改此文件以通过值指向您的新 Teamcity 位置`serverURL`。然后，您将需要重新启动构建代理服务器，并从您的 Teamcity 界面授权和启用构建代理。

[在“将 TeamCity 安装移动到新机器”部分的](http://confluence.jetbrains.net/display/TCD7/How+To...#HowTo...-MoveTeamCityInstallationtoaNewMachine)底部有一个非常简短的解释。

并回答您关于为什么代理池似乎为空的问题 - 这是因为代理没有在其新位置寻找服务器。

# distributed - ZeroMQ，如何连接到外部 tcp 套接字？

> ID：14511165
> 
> 赞同：6
> 
> 时间：2013-01-24T21:30:25.977
> 
> 标签：distributed, zeromq, pyzmq

您能告诉我如何使用 ZeroMQ 在位于不同服务器上的两个程序之间使用一些通用套接字发送消息吗？与所有本地套接字程序一起工作，但我不明白它们如何传播到不同的地方。因为爬升错误：

```
Traceback (most recent call last):
  File "/Users/*****/Projects/*****/workers/internal_links_parser.py", line 20, in <module>
    socket.bind("tcp://***.***.***.***:5000")
  File "socket.pyx", line 447, in zmq.core.socket.Socket.bind (zmq/core/socket.c:4312)
zmq.core.error.ZMQError: Can't assign requested address 
```

请解释一下，如果不难举个例子。谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-24T21:41:30.393

从 zmq[套接字手册](http://zeromq.github.com/pyzmq/api/generated/zmq.core.socket.html)上`Socket.bind`；

> 这会导致套接字在网络端口上侦听。此连接另一端的套接字将使用 Socket.connect(addr) 连接到此套接字。

换句话说，这将告诉 0mq 侦听本地端口以获取传入连接；您应该使用类似的东西`socket.bind("tcp://0.0.0.0:5000")`来监听端口 5000 上的所有机器 IP 地址。

连接的另一端应该使用`Socket.connect`类似于`socket.connect("tcp://remoteip:5000")`连接到另一端监听的 URL。

从错误消息中可以看出，您正在尝试访问`bind`远程地址，而不是绑定到本地并连接到远程。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-04T15:57:30.043

不要忘记检查防火墙。它应该是不活动的。

此外，您可以通过以下方式检查服务器是否可访问**`telnet`**：

```
telnet serverIPaddress serverPortNo 
```

# google-calendar-api - 谷歌日历以不同的方式处理相同的 ics 文件作为导入与作为 webcal 流

> ID：14511166
> 
> 赞同：0
> 
> 时间：2013-01-24T21:30:27.290
> 
> 标签：google-calendar-api, icalendar, webcal

我创建了一个 webcal 流，Google 日历成功读取它，并创建了事件。但是，它创建的事件比应有的时间早 5 小时。例如，下面的事件在下午 1 点出现。

如果我采用相同的 webcal 流并将其保存为 .ics 文件，然后将该文件导入 Google 日历，则所有时间都是正确的。

为什么 Google 日历会以不同的方式处理这些问题？在 Mac 日历应用程序中，事件在正确的时间出现，无论我是通过 webcal 流添加它们，还是通过导入 .ics 文件。

Google 日历和 Mac 日历都知道我在 EST 中（通过日历设置 - ICS 文件中没有任何声明，如您所见）。

我希望 Google 能够正确处理 webcal 流，以便在我添加更多事件时它会自动更新。

此处列出了 ICS 文件的开头和单个事件。它在下午 6 点出现在 Mac 日历中，在下午 1 点出现在 Google 日历中。

```
BEGIN:VCALENDAR
CALSCALE:GREGORIAN
METHOD:PUBLISH
PRODID:iCalendar-Ruby
VERSION:2.0
BEGIN:VEVENT
DESCRIPTION: football game on Sunday at 6pm, on NBC, with dinner
DTEND:20121208T233000Z
DTSTAMP:20130124T200858
DTSTART:20121208T230000Z
CLASS:PUBLIC
SEQUENCE:0
SUMMARY:sunday 6pm football game
UID:2013-01-24T20:08:58+00:00_945022440@e8deb599-a4b6-40a3-b82c-d1baf5e9109e
END:VEVENT
END:VCALENDAR 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T21:34:35.033

这是因为谷歌日历不做浮动时区，所以当没有指定时区时，它假定为 UTC。当您导入未在 ics 文件中指定特定时区的内容时，Mac 日历会假定您的时区。因此，您必须将时区信息添加到您的文件中。

[Google 日历如何处理时区](http://support.google.com/calendar/bin/answer.py?hl=en&answer=2367918)

[为包括 Google 在内的多个客户编写 ICS 文件](https://stackoverflow.com/questions/3763503/writing-ics-files-for-multiple-clients-including-google)

在文件中添加 VTIMEZONE 部分应该会有所帮助：

```
BEGIN:VTIMEZONE
TZID:Eastern
BEGIN:STANDARD
DTSTART:16011104T020000
RRULE:FREQ=YEARLY;BYDAY=1SU;BYMONTH=11
TZOFFSETFROM:-0400
TZOFFSETTO:-0500
END:STANDARD
BEGIN:DAYLIGHT
DTSTART:16010311T020000
RRULE:FREQ=YEARLY;BYDAY=2SU;BYMONTH=3
TZOFFSETFROM:-0500
TZOFFSETTO:-0400
END:DAYLIGHT
END:VTIMEZONE 
```

# jquery - 存储特定元素以供以后操作

> ID：14511170
> 
> 赞同：0
> 
> 时间：2013-01-24T21:30:46.497
> 
> 标签：jquery, jquery-selectors

我正在尝试切换特定的元素选择。我想根据选择隐藏元素，然后显示那些完全相同的元素。我尝试使用此代码，但行不“显示”，因为它似乎重新检查哪些是可见的。

```
jQuery(function($){
        $('input[id^=_cmb_api_use_defaults_]').click(function(){
                var $rows = $(this).parents('tr:first').nextAll('tr:visible');
                if($(this).is(':checked')){
                        $rows.hide();
                } else {
                        $rows.show();
                }
        });
}); 
```

如何存储这些特定元素，以便以后可以操作完全相同的表行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T21:33:37.187

只需使用在函数外部声明的变量：

```
jQuery(function($){
        $('input[id^=_cmb_api_use_defaults_]').each(function(i, input) {
            var $rows = $(input).parents('tr:first').nextAll('tr:visible');
            $(input).click(function() {
                    if($(this).is(':checked')){
                            $rows.hide();
                    } else {
                            $rows.show();
                    }
            });
        });
}); 
```

# javascript - 如何删除谷歌文档电子表格单元格中的空格？

> ID：14511172
> 
> 赞同：0
> 
> 时间：2013-01-24T21:31:04.067
> 
> 标签：javascript, google-apps-script

我在谷歌电子表格（通过表单）中以字符串的形式输入。我需要确保此字符串前后没有空格...

我试过使用 Javascript 命令

```
mystring = mystring.replace(/(^\s+|\s+$)/g,' '); 
```

但它似乎在这里不起作用。

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-11T13:05:25.873

如果您的字符串在谷歌文档表中，您可以在导入应用程序之前对其应用 TRIM() 函数吗？TRIM() 完全符合您的要求，并删除了导致格式化的重复中间空格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T21:37:14.407

这个怎么样？

`s.replace(/\s+/g, ' ');`

**编辑：**

`mystring = mystring.replace(/(^\s+|\s+$)/g,' ');`

这将删除字符串开头或结尾的所有空格...

# jquery - jquery mobile 无法在 IE 上运行，但可以在其他浏览器上运行

> ID：14511173
> 
> 赞同：-1
> 
> 时间：2013-01-24T21:31:13.570
> 
> 标签：jquery, jquery-mobile

我已经设置了一个 jQuery 移动页面，由于某种原因，它不适用于某些版本的 IE，但可以与 chomp 或 firefox 一起使用。我不确定是头部还是身体部分代码错误，。示例链接是：

[http://www.xuanyinwen.com/test9.html](http://www.xuanyinwen.com/test9.html)

代码如下：

```
<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1"> 

    <title>RE/MAX Leaders Licensed Real Estate Agent (REAA 2008)</title> 

<script type="text/javascript" src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
<link href="http://code.jquery.com/mobile/1.0rc2/jquery.mobile-1.0rc2.min.css" rel="stylesheet"  />
    <script type="text/javascript" src="http://code.jquery.com/mobile/1.0rc2/jquery.mobile-1.0rc2.min.js"></script>
<script type="text/javascript" src="http://computersforpeople.info/websites/scripts/jquery/lib/klass.min.js"></script>  
    <link href="http://computersforpeople.info/websites/scripts/jquery/photoswipe.css" type="text/css" rel="stylesheet" />

    <script type="text/javascript" src="http://computersforpeople.info/websites/scripts/jquery/code.photoswipe-3.0.5.min.js"></script>

    <script type="text/javascript">

        (function(window, $, PhotoSwipe)
        {
            $(document).ready(function()
            {
                $("#gallery a").photoSwipe(
                {
                    enableMouseWheel: false,
                    enableKeyboard: false
                });

                $("#gallery a:first").click();
            });
        }(window, window.jQuery, window.Code.PhotoSwipe));

</script>

<script type="text/javascript">

$('a').live('click', function() {
    var $this = $(this);
    if ( !$this.attr('rel') || $this.attr('rel') != 'external' )
        $(document.getElementById( $this.attr('href') )).remove();
});

</script>
<style type="text/css">
<!--
.style1 {font-size: large}
-->
</style>
</head> 

<body> 

<div data-role="page" data-add-back-btn="true" data-back-btn-text="Back" >
<div data-role="header" >
        <h1 style="white-space:normal"></h1>
        <div align="center"> 
</div>

  </div>
  <ul  data-role="listview" data-inset="true" data-filter="false">
        <li><a href="/users/337/properties">Properties</a></li>

                <ul data-role="listview"  data-filter="false" id="test-more">

                          <table>

    <li ><a href="/users/337/properties/56920">
<img src="/media/2013/01/23/015609_48016.jpg?m=resize&o[geometry]=80x60&s=b439018cf179642b"/>           

<h3>Karori, 28A Duthie Street</h3>
                <p>Tender</p>
            </a></li>  

    <li ><a href="/users/337/properties/56948">
<img src="/media/2013/01/23/020339_47985.jpg?m=resize&o[geometry]=80x60&s=4252c33b91339630"/>           

<h3>Miramar, 1/50 Darlington Road</h3>
                <p>Tender</p>
            </a></li>  

</table>

    </ul>
    <br />

<li><a href="#contact_us" data-role="button" data-icon="info" data-iconpos="left" data-rel="dialog" data-transition="pop" id="contact">Contact Kahn May</a></li>

</ul>

    <div data-role="footer" align="center">

    <h6 style="font-size: 55%;font-family:calibri">
  RE/MAX Leaders Real Estate (1987) Ltd Licensed Under REAA 2008</h6>
    </div>
    <!-- /footer -->

    </div>  

<!-- /page -->

<div data-role="page" id="contact_us" data-title="Contact Us">
            <div data-role="header">
                <h1></h1>
            </div>
            <div data-role="content">
                <p class="style1"><strong>Kahn May</strong></p>
                <p><a href="tel:021 931 381">021 931 381</a><br>
                  <br>
                  <a href="mailto:kmay@leaders.co.nz">kmay@leaders.co.nz</a></p>
  </div>
            <div data-role="footer">

            </div>
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T22:08:07.610

因为内容代码有标签，它使页面无法在 IE 上运行。

# java - 启动新的 Android 应用程序

> ID：14511174
> 
> 赞同：-3
> 
> 时间：2013-01-24T21:31:15.540
> 
> 标签：java, android

考虑到 Java 开发不是我最擅长的方面，我即将开始新的 Android 应用程序，我想要一些关于从哪里开始的建议。问题不在于 Android API，而在于正确的工具和代码组织。

*   [我应该使用像Android Bootstrap](https://github.com/donnfelker/android-bootstrap)这样的模板应用程序吗？还有比这更好的吗？
*   我应该如何组织我的代码，以便在应用程序增长时有意义。
*   还有其他可能有帮助的库吗？

该应用程序将用于下载音乐，并且是免费的。将有一个服务器 API 来传递内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T21:41:37.990

1.  在我看来，你应该从一个空白项目开始，尝试学习 Java 并了解 Android 中的类是如何工作的。使用模板并不是学习编程的最佳方式，因为您很容易感到困惑并且无法理解代码的作用。

2.  您使用域、存储库、控制器和用户界面的包来实现经典的[3 层架构。](http://en.wikipedia.org/wiki/Multitier_architecture#Three-tier_architecture)这样您就可以保持井井有条并轻松改进您的应用程序。

3.  阅读 Android 论坛、文档并查看您需要使用哪些库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T21:42:02.530

首先在 Java 开发上变得更强大，[通过 Java SE 教程](http://docs.oracle.com/javase/tutorial/)。然后你可以看看[Android Development Getting Started 页面](http://developer.android.com/training/index.html)。

我还建议您投资一些好的编程书籍

# wpf - 如何让一个控件扩展/填充到最大高度，然后在 WPF 中扩展/填充另一个控件？

> ID：14511176
> 
> 赞同：1
> 
> 时间：2013-01-24T21:31:23.873
> 
> 标签：wpf, layout, grid, dockpanel

我有以下 XAML 源代码来演示我的工作。

我希望，在垂直调整组大小时，让第一个 groupbox 展开，直到其最大高度，然后，当达到最大高度时，展开第三个 groupbox。第三个 groupbox 也有一个 min height 属性。

```
<UserControl
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" x:Name="Screen_1_Name"   
    x:Class="TestExpansionScreens.Screen_1"
    Width="400" Height="400">

    <Grid x:Name="LayoutRoot" Background="White" Margin="0,0,0,0">
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <GroupBox Header="Thing1" Background="LightGreen" Grid.Row="0" Grid.Column="0" MaxHeight="350">
            <Button Content="Stuff1"  />
        </GroupBox>

        <GroupBox Header="Thing2" Background="LightBlue" Grid.Row="1" Grid.Column="0">
            <TextBox Text="Stuff2" Height="60" />
        </GroupBox>

        <GroupBox Header="Thing3" Background="Pink" Grid.Row="2" Grid.Column="0">           
            <TextBox Text="Stuff3"  />          
        </GroupBox>
    </Grid>
</UserControl> 
```

通常，当我只想扩展单个控件以填充可用空间时，我使用 DockPanel。我已经用各种各样的网格和停靠面板构建了这个示例，但是，我无法解决如何使它工作。关于如何实现它的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T03:29:58.363

您必须在第一个 RowDefinition 上设置 MaxHeight，而不是在 GroupBox 上。该行将增长到该高度，然后所有多余的空间将被第三行占据。您还可以将 MinHeight 添加到第三行。

```
 <Grid x:Name="LayoutRoot" Background="White" Margin="0,0,0,0">
        <Grid.RowDefinitions>
            <RowDefinition MaxHeight="350" />
            <RowDefinition Height="Auto"/>
            <RowDefinition MinHeight="150" />
        </Grid.RowDefinitions>

        <GroupBox Header="Thing1" Background="LightGreen" Grid.Row="0" Grid.Column="0">
            <Button Content="Stuff1"  />
        </GroupBox>

        <GroupBox Header="Thing2" Background="LightBlue" Grid.Row="1" Grid.Column="0">
            <TextBox Text="Stuff2" Height="60" />
        </GroupBox>

        <GroupBox Header="Thing3" Background="Pink" Grid.Row="2" Grid.Column="0">
            <TextBox Text="Stuff3"  />
        </GroupBox>
    </Grid> 
```

# javascript - 对简单的 for 循环感到困惑

> ID：14511177
> 
> 赞同：0
> 
> 时间：2013-01-24T21:31:26.507
> 
> 标签：javascript, google-maps, for-loop

好的，这是一个主要的编辑。我想我可以通过给出一个类似的简单代码的例子来实现，但这并没有帮助。

我有一个显示谷歌地图的工作功能，然后用信息窗口放置标记。这一切都很好。然后我决定我想稍微延迟标记的丢弃，而不是一次全部丢弃，它们会暂停 xx 毫秒，然后再丢弃下一个。我无法让它工作，我困惑的主要原因是我似乎对 for 循环在 JavaScript 中的工作方式感到困惑。

我正在使用 setTimeout，无法使其正常工作，意识到我的困惑与 setTimeout 无关，所以我将其拉出并用警报替换它，我得到了相同的行为。我不是在找人来写我的代码，我只是不明白我在这里缺少什么。

我希望在 for 循环中是这种行为......

For do something do something else do another thing next

我所看到的似乎我得到了这种行为......

对于做某事做其他事情（并通过代码为每个循环做）接下来做另一件事

所以这里是代码：

```
 function delaydropmarkers()
    {
        alert("delaydropmarkers");
    }

    function marker(location) 
    {

        geocoder = new google.maps.Geocoder();
        var latlng = new google.maps.LatLng(37.5, -98.35);
        var mapOptions = 
        {
            zoom: 5,
            center: latlng,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        }

        map = new google.maps.Map(document.getElementById('googleMap'), mapOptions);

        var infowindow = new google.maps.InfoWindow(), marker, i;

        for (i = 0; i < location.length; i++) 
        {

            marker = new google.maps.Marker(
            {
                position: new google.maps.LatLng(location[i][1], location[i][2]),
                animation: google.maps.Animation.DROP,
                map: map
            }
            );

            delaydropmarkers();

            google.maps.event.addListener(marker, 'click', (function (marker, i) 
            {
                return function () 
                {
                    infowindow.setContent(location[i][0]);
                    infowindow.open(map, marker);
                }
            }
            )(marker, i));

        }

    } 
```

所以我调用了应该创建一个标记的标记函数，转到 delaydropmarkers 函数（它现在只有一个警报），然后添加监听器。我让所有标记都同时运行。我会提前道歉我知道这是我已经感到愚蠢的事情，但我只是没有看到问题。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T21:35:52.190

第一个错误是使用 W3Schools。[http://ryanblunden.com/please-dont-use-w3schools](http://ryanblunden.com/please-dont-use-w3schools)

使其成为您可以在需要时递归调用的自己的函数：

```
function showCars(cars, index) {
    index = index || 0;
    if (index < cars.length) {
        console.log(cars[index]);
        setTimeout(function () {
            showCars(cars, ++index);
        }, 2000);
    }
}

var my_cars = ["BMW", "Volvo", "Saab", "Ford"];
showCars(my_cars); 
```

[http://jsfiddle.net/UcWTH/4/](http://jsfiddle.net/UcWTH/4/)

我使用`console.log`而不是`document.write`您在代码中使用它的原因是因为`document.write`应该**只**在呈现页面时使用，而不是之后。幸运的是，在你的情况下确实如此。不幸的是，`setTimeout`否定了这一点。

Using`setTimeout`意味着您为第一个参数提供的代码将在 X 毫秒后**异步执行。**到那时，如果您使用`setTimeout`得当，您的页面将被渲染，您将覆盖文档。所以就像我说的，因为`setTimeout`是异步的，它**实际上并没有阻止/暂停/停止 Javascript 处理**。我认为这是你困惑的根源。您希望它“延迟” 2 秒，但如果您真的想这样做，您会将浏览器冻结 2 秒。`setTimeout`让您在不冻结浏览器的情况下执行此操作。但是您不能以您认为的正常方式使用它……这就是为什么我上面的代码不是正常`for`循环的原因。

# c# - 如何从 MVC 应用程序外部解析 url 路径

> ID：14511180
> 
> 赞同：0
> 
> 时间：2013-01-24T21:31:29.117
> 
> 标签：c#, asp.net-mvc

我有一个 MVC 应用程序并填充路由表有这样的方法：

```
public static void RegisterRoutes(RouteCollection routes){
   routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
    ....
   routes.MapRoute("default", "{controller}/{action}/{id}", new { controller = "Home", action = "index", id="" });
   ... etc
}

//and in global.asax it gets called like:
RegisterRoutes(RouteTable.Routes); 
```

现在，如果我从 MVC 应用程序外部调用该方法（在某些控制台应用程序中，只是为了获取路由），我将传递一个新的空集合，它将填充 MVC 应用程序中使用的路由，但它有什么用呢？我可以仅基于路由集合，识别给定控制器名称、操作和其他参数的 url 吗？（再次，从网络应用程序的外部）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-10T18:53:00.797

我还希望能够从控制台应用程序（站点地图生成器）中的路由集合生成 url，并且有太多的路由来做简单的替换。我最终写了一个围绕 UrlHelper.GenerateUrl 的包装器......

```
public class UrlGenerator
{
    protected string Protocol;
    protected string HostName;
    protected RequestContext RequestContext;
    public RouteCollection RouteCollection;

    public UrlGenerator(string protocol, string hostName, Action<RouteCollection> registerRoutes)
    {
        Protocol = protocol;
        HostName = hostName;
        RouteCollection = new RouteCollection();
        registerRoutes(RouteCollection);
        // Construct a request context with as little as possible
        RequestContext = new RequestContext(new HttpContextWrapper(new HttpContext(new HttpRequest(null, "http://x.com", null), new HttpResponse(null))), new RouteData());
    }

    public string GetUrl(string action, string controller, object routeData)
    {
        return GetUrl(action, controller, new RouteValueDictionary(routeData));
    }
    public string GetUrl(string action, string controller, RouteValueDictionary routeData)
    {
        return UrlHelper.GenerateUrl(null, action, controller, Protocol, HostName, null, routeData, RouteCollection, RequestContext, false);
    }
} 
```

现在你可以做...

```
UrlGenerator g = new UrlGenerator("https", "myurl.com", RouteConfig.RegisterRoutes);
Console.WriteLine(g.GetUrl("Index", "Home", new { product = "toad-for-oracle" })); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T22:12:44.600

我认为 routes[0].GetVirtualPath() 是您正在寻找的。但是，您必须将 RequestContext 和 RouteValueDictionary 传递给它。如果路由无法处理您的输入，它将返回 null

# ruby-on-rails - 单击 rails link_to 链接不会从服务器生成响应

> ID：14511182
> 
> 赞同：0
> 
> 时间：2013-01-24T21:31:32.950
> 
> 标签：ruby-on-rails, ruby-on-rails-3

这让我难住了，我有一个：

```
<%= link_to 'Login', users_path %> 
```

这会生成 html：

```
<a href="/users" class="ui-link">Login</a> 
```

当我点击它时，我没有得到服务器的响应。地址栏显示正确的 url `http://localhost:3000/users`，但没有任何反应。当我单击地址栏并按 Enter 键时，我会收到响应并被定向到用户页面。

在我的 routes.rb 中，用户条目很简单：`resources :users`

看起来它也`localhost:3000/#/users`放入了地址栏中，而 Chrome 删除了 #，这可能是原因吗？为什么将哈希放在那里？

我运行 Fiddler 来查看是否正在发送 http 请求，果然，两者都发送到了服务器。

谁能解释这种现象？我所有的链接都以这种方式运行，任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T21:50:49.813

您使用的是设计还是其他一些用户管理工具？那么 /users 可能没有 root 权限。

您可以运行以下命令来查看哪些路由可用：

```
rake routes 
```

如果您使用的是 devise，请尝试以下 URL 以了解它是否有效：

```
http://localhost:3000/users/sign_in 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T22:51:39.083

在这里找到答案： [Jquery Mobile all links ignore data-role="none"](https://stackoverflow.com/questions/9283490/jquery-mobile-all-links-ignore-data-role-none)

您必须使用`rel="external"`或`data-ajax="false"`。

# ektron - 如何在 Ektron 中添加新文件类型

> ID：14511183
> 
> 赞同：1
> 
> 时间：2013-01-24T21:31:33.597
> 
> 标签：ektron

爱克创 8.01 SP1

我有一个想要上传 .m4a 文件的客户。我在设置中添加了扩展名，并验证它现在在 AssetManagement.config 文件中，但尝试保存时仍然出现错误，我收到“无效扩展名...”弹出错误消息。

其他地方有没有其他设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T21:34:29.423

AssetManagement 配置仅适用于 DMS 资产。如果您要向库中添加“文件”，则可以在库 > 库（根文件夹）> 属性中找到该配置。

如果您*使用*的是 DMS，您是否在 Workarea > Settings > Asset Server Setup 中验证了您的更改？

# apache - 如何使用 MODx 的 URL 重写来处理重定向？

> ID：14511184
> 
> 赞同：0
> 
> 时间：2013-01-24T21:31:41.420
> 
> 标签：apache, .htaccess, url-rewriting, modx-evolution

我使用 MODx Evolution 创建的新网站与旧网站具有不同的文件名和 URL 结构。我必须将旧 URL 重定向到新站点中的页面。

我尝试了在不同论坛中找到的不同解决方案，但似乎 MODx 的 URL 重写干扰了我的重写规则。

有谁知道如何妥善处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T21:46:58.167

我在 MODx 内部找到了一个不同的解决方案来解决这个问题。我在 MODx 中创建了一个与事件“OnPageNotFound”挂钩的插件。在那里，我使用了一个数组，它将旧的 url 作为键，将新的 url 作为数组。该脚本根据密钥中的旧 url 选择新 url。然后我使用新的 url 作为 PHP 标头中新位置的位置。

# typo3 - Typo3：使用 PHP 代码创建侧边栏

> ID：14511190
> 
> 赞同：0
> 
> 时间：2013-01-24T21:32:19.367
> 
> 标签：typo3, sidebar, typoscript

我有一段 PHP 代码，我想将它集成到 Typo3 作为我编写的自定义扩展的侧块。

有人可以告诉我如何将 PHP 代码集成到 Typo3 中，或者将我指向一些我可以查看的示例代码。我不想使用打字稿或类似的东西，只是简单的 PHP 代码，但到目前为止我一直无法找到这样做的方法。

任何提示我都会非常感激。

问候/谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T04:13:58.500

我认为您需要使用typo3“userfunc”。以下链接可能对您有所帮助：

[http://www.typo3wizard.com/en/snippets/common-problems-and-solutions/simple-userfunc.html](http://www.typo3wizard.com/en/snippets/common-problems-and-solutions/simple-userfunc.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T13:17:59.293

[使用TYPO3 Extension kickstarter](http://typo3.org/extensions/repository/view/kickstarter)创建一个小扩展，并将其作为内容元素插入到您网站的“sideblock 部分”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T09:33:05.147

您还可以考虑使用 tscobj 扩展 (http://typo3.org/extensions/repository/view/tscobj)，它允许您包含一个对象，例如 Sankar V 提供的由typo3wizards userfunc-code 创建的对象，作为内容元素在TYPO3的编辑环境中。记得使用“lib”。作为顶级标识符而不是“temp.”，就像在typo3wizard 的代码段中所做的那样。

# javascript - 优化 HTML5 画布中的像素设置

> ID：14511199
> 
> 赞同：4
> 
> 时间：2013-01-24T21:32:51.590
> 
> 标签：javascript, html5-canvas, pixel-manipulation

HTML5 Canvas 没有明确设置单个像素的方法。

到目前为止我知道的解决方案是：

*   使用`getImageData`，`putImageData`但由于性能低，动画效率太低`putImageData`

*   `rect`使用像或这样的重物`putImageData`来绘制单个像素，但是当有很多像素要绘制时，性能似乎要差得多。

我已经看到这个`drawImage`函数真的比 快`putImageData` ，而且如果我们用 替换`putImageData`，`drawImage(new Image(w,h))`它真的很快。但是，我不知道有什么解决方案可以将图像放在`drawImage`可以快速逐像素设置的参数上。

她是慢代码的一个例子

HTML：

```
<canvas id="graph1" width="1900" height="1000"></canvas> 
```

Javascript：

```
 var canvas=document.getElementById("graph1"),
        ctx=canvas.getContext("2d"),
        imageData,
        data,
        w=canvas.width,
        loop=0,
        t=Date.now();

    window.requestAnimFrame = (function(callback) {
        return window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame ||
        function(callback) {
          window.setTimeout(callback, 1000 / 60);
        };
      })();

    function animate() {
        imageData=ctx.createImageData(w, canvas.height);
        data=imageData.data;
        for(i=0;i<30000;i++) { // Loop fast enough
            x=Math.round(w*Math.random());
            y=Math.round(canvas.height*Math.random());   
            data[((w * y) + x) * 4]=255;
            data[((w * y) + x) * 4+1]=0;
            data[((w * y) + x) * 4+2]=0;
            data[((w * y) + x) * 4+3]=255;
        }
        ctx.putImageData(imageData, 0, 0); //Slow
        //ctx.drawImage(new Image(canvas.width, canvas.height),0,0);// Would be about 4x faster even if ImageData would be also blank

        requestAnimFrame(function() {
                loop++;
                if(loop<100)
                    animate();
                else
                    alert('finish:'+(Date.now()-t));
            });
    }
    animate(); 
```

如果有人有提高性能的线索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T23:58:08.250

`putImageData`是您想要使用的，（如果您计划使用 html5 画布）。它和 一样快`drawImage`。

如果`drawImage`和`putImageData`方法都有相似的图像要重新绘制，那么它们最终的速度相同。您正在将完全随机像素的重绘速度与一遍又一遍地重绘空白进行比较。如果您需要证明这一点，我可以举个例子。

# amazon-ec2 - 使用 ec2 开发人员工具导入 vmdk 文件时出错

> ID：14511202
> 
> 赞同：7
> 
> 时间：2013-01-24T21:33:11.057
> 
> 标签：amazon-ec2, ec2-api-tools

虽然 ec2-import-instance 工具支持 vmdk 磁盘格式，但每次我尝试对 vmdk 文件运行该命令时，都会收到以下错误：

```
 ERROR: File uses unsupported compression algorithm 0 
```

我以以下格式调用该工具：

```
 ec2-import-instance -f vmdk -o <ACCESS KEY> -w <SECRET KEY> <VMDK file> 
```

我正在使用 ec2 工具版本 1.6.6.1。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T01:43:02.167

看起来它与“压缩算法”无关，而是更多地与支持的 vmdk 格式有关，如[http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/VMImportPrerequisites.html中所述](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/VMImportPrerequisites.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-27T16:24:17.163

错误：文件使用不支持的压缩算法 0。VMDK 是使用 OVA 格式而不是 OVF 格式创建的。

解析度

以 OVF 格式创建 VMDK。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-04T04:17:39.590

我通过从 VirtualBox（我创建它的地方）导出我的 VM 为自己解决了这个问题。这将其导出为 OVF 格式（我必须将默认扩展从 OVA 更改为 OVF）。然后 ec2-import-instance 工作。

当使用 qemu-img 转换为 RAW 不起作用时，[这让我走上了正确的轨道。](https://forums.aws.amazon.com/message.jspa?messageID=552284)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-16T10:31:04.057

这个 ec2 迁移工具适用于 VMware 工作站和 ESX [http://cloudscraper.migrate2iaas.com/](http://cloudscraper.migrate2iaas.com/) 只需从正在运行的服务器运行它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-12T20:55:59.937

我遇到过同样的问题。我的解决方案：使用 StarWind V2V 转换器将 VMDK 转换为 RAW (-f RAW) 或 VHD (-f VHD)。

# php - Millennial Media PHP 设置（代码集成）

> ID：14511206
> 
> 赞同：0
> 
> 时间：2013-01-24T21:33:19.363
> 
> 标签：php, wordpress, millennial-media

我知道对于具有良好 PHP 知识的人来说，这将是一个非常简单的问题。

我有一个自托管的 WordPress 网站。我为移动设备设计了它，我想在其中安装 Millennial Media 广告。Millennial Media 并没有真正提供详细的说明，而且奇怪的是没有网络资源！

我有 HTML、CSS 和 JavaScript 方面的知识，但 PHP 很差 :( 。任何方式我都可以对 PHP 进行一些更改以实现我想要的，但我不能从零开始编写它们并自行集成它们。

好的长话短说这是千禧媒体提供的代码：

```
<?php 
/*--------------------------------------------------------------*/ 
/* Millennial Media PHP Ad Coding, v.7.4.20                     */ 
/* Copyright Millennial Media, Inc. 2006                        */ 
/*                                                              */ 
/* The following code requires PHP >= 4.3.0 and                 */ 
/* allow_url_fopen 1 set in php.ini file.                       */ 
/*                                                              */ 
/* NOTE:                                                        */ 
/* It is recommended that you lower the default_socket_timeout  */ 
/* value in the php.ini file to 5 seconds.                      */ 
/* This will prevent network connectivity from affecting        */ 
/* page loading.                                                */ 
/*--------------------------------------------------------------*/ 

/*------- Publisher Specific Section -------*/ 
$mm_placementid = 123456; 
$mm_adserver = "ads.mp.mydas.mobi"; 

/* The default response will be echo'd on the page     */
/* if no Ad is returned, so any valid WML/XHTML string */
/* is acceptable.                                      */
$mm_default_response = "";

/*------------------------------------------*/

/*----------- BEGIN AD INITIALIZATION ----------*/
/*----- PLEASE DO NOT EDIT BELOW THIS LINE -----*/
$mm_id = "NONE";
$mm_ua = "NONE";
@$mm_ip = $_SERVER['REMOTE_ADDR'];

if (isset($_SERVER['HTTP_USER_AGENT'] )){
     $mm_ua = $_SERVER['HTTP_USER_AGENT'];
}

if (isset($_SERVER['HTTP_X_UP_SUBNO'])) {
          $mm_id = $_SERVER['HTTP_X_UP_SUBNO'];
} elseif (isset($_SERVER['HTTP_XID'])) {
          $mm_id = $_SERVER['HTTP_XID'];
} elseif (isset($_SERVER['HTTP_CLIENTID'])) {
          $mm_id = $_SERVER['HTTP_CLIENTID'];
} else {
          $mm_id = $_SERVER['REMOTE_ADDR'];
}

$mm_url = "http://$mm_adserver/getAd.php5?apid=$mm_placementid&auid="
          . urlencode($mm_id) . "&uip=" . urlencode($mm_ip) . "&ua="
          . urlencode($mm_ua);
/*------------ END AD INITIALIZATION -----------*/
?>

<?php
/* Place this code block where you want the ad to appear */
/*------- Reusable Ad Call -------*/
@$mm_response = file_get_contents($mm_url);
echo $mm_response != FALSE ? $mm_response : $mm_default_response;
/*--------- End Ad Call ----------*/
?> 
```

我希望广告出现在页脚区域（我将在 21 个主题中编辑 footer.php）但我想知道我应该将这些代码放在 wordpress 文件中的什么位置，或者我应该创建一个新的以及命名什么他们？

有人可以帮我解决这个问题，并为我提供需要编辑的文件名以及它们最终的样子吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T21:38:31.957

在页面中的任何位置，您希望广告出现的位置，比如说在 a`<div>`中，使用：

```
<div>
   <?php include('thatfiletheysentyou.php'); ?>
</div> 
```

这将使该文件的输出出现在哪里`include`。

**编辑：完全重写：**

这是footer.php 的内容。我刚刚为你安装了 wordpress，花了 3 分钟。我编辑了footer.php，包括`<?php include('ads.php'); ?>`（见下文），它出现在页脚中，如预期的那样

```
<?php
/**
 * The template for displaying the footer.
 *
 * Contains the closing of the id=main div and all content after
 *
 * @package WordPress
 * @subpackage Twenty_Eleven
 * @since Twenty Eleven 1.0
 */
?>

    </div><!-- #main -->

    <footer id="colophon" role="contentinfo">

            <?php
                /* A sidebar in the footer? Yep. You can can customize
                 * your footer with three columns of widgets.
                 */
                if ( ! is_404() )
                    get_sidebar( 'footer' );
        ?>

        <div id="site-generator">
        <div>
         <?php include('ads.php'); ?>
        </div>
    <?php do_action( 'twentyeleven_credits' ); ?>
    <a href="<?php echo esc_url( __( 'http://wordpress.org/', 'twentyeleven' ) ); ?>" title="<?php esc_attr_e( 'Semantic Personal Publishing Platform', 'twentyeleven' ); ?>"><?php printf( __( 'Proudly powered by %s', 'twentyeleven' ), 'WordPress' ); ?></a>
        </div>
</footer><!-- #colophon -->
</div><!-- #page -->

<?php wp_footer(); ?>

</body>
</html> 
```

现在，如果您从广告公司获得文件，请在`ads.php`上面更改为此文件名。如果您粘贴了代码（我不知道，电子邮件，网站） - 创建一个文件`ads.php`并粘贴您从他们那里获得的任何内容。将该文件放在子文件`twentyeleven`夹中。我的文件如下所示：

```
<?php
  echo 'HEHEHE!';
  //instead of this just paste your code here
?> 
```

在页面上是这样的： [1 http://www.spzozwolsztyn.internetdsl.pl/wpress.jpg](http://www.spzozwolsztyn.internetdsl.pl/wpress.jpg)

如果您厌倦了它们，请从 footer.php 中删除包含行。

# c++ - 为什么将文本添加到 RichEdit 窗口会冻结它？

> ID：14511225
> 
> 赞同：0
> 
> 时间：2013-01-24T21:35:02.153
> 
> 标签：c++, winapi, richedit

在我用鼠标触摸richedit 窗口之前，它的内容是实时更新的，但是将鼠标悬停在它上面会将箭头变成沙漏光标。然后，该窗口不会对随后通过标题栏移动它的三到四次尝试做出反应。当它最终对鼠标拖动做出反应时，它移动正常但停止刷新其内容并且标题栏变为空。类似的效果是当我尝试单击窗口的客户区时。这次点击几下后没有反应窗口也停止更新，其标题栏变为*（不响应）*。

当循环最终停止时，程序会返回窗口更新并“活着”返回。在更新客户区时如何操作窗口（并看到它正在更新内容）？

```
#include <windows.h>
#include <sstream>

int main() {
  using namespace std;
  LoadLibrary("Msftedit.dll");
  HWND richeditWindow = CreateWindowExW (
    WS_EX_TOPMOST,
    L"RICHEDIT50W", 
    L"window text",
    WS_SYSMENU | WS_VSCROLL | ES_MULTILINE | ES_NOHIDESEL | WS_VISIBLE,
    50, 50, 500, 500,
    NULL, NULL, NULL, NULL
  );

  for (int i = 0 ; i<100000; i++) {
    wstringstream wss;
    wss << i << L", ";
    SendMessageW(richeditWindow, EM_REPLACESEL, FALSE, (LPARAM) wss.str().c_str());
  }

  MSG msg;
  while( GetMessageW( &msg, richeditWindow, 0, 0 ) ) {
    TranslateMessage(&msg);
    DispatchMessageW(&msg);
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T23:16:52.760

您正在紧密循环中填充丰富的编辑窗口，而不是为您的消息队列提供服务。除非您的进程定期处理其消息队列，否则系统会认为您的应用程序已停止响应。好吧，它已经停止响应了！

为了保持您的应用程序响应，您必须抽出您的消息队列。我真的不知道您的实际程序正在尝试做什么。如果您想将该文本放入丰富的编辑中，您只需使用一条`EM_REPLACESEL`消息即可。

如果您确实有一个长时间运行的任务，那么它属于不同的线程。然后你必须处理同步回 GUI 线程。如果您所做的只是调用 SendMessage，那么系统会负责同步它。

底线是必须及时泵送您的消息队列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T23:28:06.680

找到答案这是我修改后的代码，看看`PeekMessageW`和`DispatchMessageW`.

```
#include <windows.h>
#include <iostream>
#include <sstream>

int main() {
  using namespace std;
  LoadLibrary("Msftedit.dll");
  HWND richeditWindow = CreateWindowExW (
    WS_EX_TOPMOST,
    L"RICHEDIT50W", 
    L"window text",
    WS_SYSMENU | WS_VSCROLL | ES_MULTILINE | ES_NOHIDESEL | WS_VISIBLE,
    50, 50, 500, 500,
    NULL, NULL, NULL, NULL
  );

  MSG msg;
  for (int i = 0 ; i<100000; i++) {
    wstringstream wss;
    wss << i << L", ";
    SendMessageW(richeditWindow, EM_REPLACESEL, FALSE, (LPARAM) wss.str().c_str());
    if (PeekMessageW(&msg, richeditWindow, 0, 0, PM_REMOVE)) {
      TranslateMessage(&msg);
      DispatchMessageW(&msg);
    }
  }

  while( GetMessageW( &msg, richeditWindow, 0, 0 ) ) {
    TranslateMessage(&msg);
    DispatchMessageW(&msg);
  }
} 
```

# vba - 获取数据透视表的源范围

> ID：14511227
> 
> 赞同：3
> 
> 时间：2013-01-24T21:35:05.473
> 
> 标签：vba, excel, excel-2010, pivot-table

我正在为一些对 Excel (2010) 中的透视图和透视表不太了解的用户构建一组每天更新的报告。我从我们的数据库中提取了已经自动化的数据，但是为了使这些信息有用（并且更易于使用），我想使用 VBA 生成数据透视。

我已经很好地生成了数据透视表，并且可以手动操作它们来创建相关图表。当我创建表格（全部在一张纸上）时，我正在标记它们（如果这有助于解决我的问题）。我遇到麻烦的地方是创建数据透视图，特别是设置数据源。

由于图表基于可能会根据存在的数据而改变大小的枢轴，因此我不能只指定一个固定范围作为源。命名范围也有同样的问题，因为我仍然不知道要分配名称的范围，除非我可以将 PT 分配为范围。

我已经尝试过这样的事情，但没有奏效，因为我没有在看一个实际的“范围”对象：

```
Dim MyChartObject As ChartObject
Dim MyChart As Chart

'These variables are assigned elsewhere in the code.
Set MyChartObject = wksMainCharts.ChartObjects.Add( _
    iChartLeft, iChartTop, iChartWidth, iChartHeight)
Set MyChart = MyChartObject.Chart
MyChart.SetSourceData wksMainPivot.PivotTables(PivotName).SourceData 'Fails; requires Range object
'More code to follow... 
```

我确实知道这是错误范围的字符串表示，但我正在玩我自己能想到的东西。

基本上我想要的是这个问题的反面[，](https://stackoverflow.com/q/4079081/698590)**它**试图在指定范围内找到数据透视表。我也回顾了[这个问题](https://stackoverflow.com/q/13055801/698590)，但这并不是我想要的（也没有提供答案）。

另外：我在这里要求一种获取 PT 范围的方法，我认为这会很有趣，但最终，我只想创建数据透视图，所以如果有人想提供比什么更好的方法我已经开始了，我也对此完全开放。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T21:48:09.483

这是你想要达到的目标吗？

```
Sub Sample()
    Dim Chrt As Chart, pvtTbl As PivotTable

    Set pvtTbl = ActiveSheet.PivotTables(1)

    Set Chrt = ActiveSheet.ChartObjects(1).Chart

    Chrt.SetSourceData Source:=pvtTbl.TableRange1
End Sub 
```

所以你的这条线

```
MyChart.SetSourceData wksMainPivot.PivotTables(PivotName).SourceData 
```

变成

```
MyChart.SetSourceData wksMainPivot.PivotTables(PivotName).TableRange1 
```

# c++ - 逐位运算和严格混叠

> ID：14511230
> 
> 赞同：3
> 
> 时间：2013-01-24T21:35:14.033
> 
> 标签：c++, pointers, bit-manipulation, simd

逐位运算和严格对齐

我正在尝试为基于位的操作编写一些高性能函数，以利用硬件的最新功能，我面临的问题是：

我想包括一个按位计数操作，在这种情况下，我使用 Intel`SSE4.2`只`popcnt`接受整数类型值。

同时，如果我需要执行其他按位逻辑运算，则`AVX`支持 256 位宽的按位逻辑运算`VORPD`（而不是`SSE2`128 位宽的按位逻辑运算），但仅限于浮动数据。

再加上按位设置/重置操作的事实，char 是最快的，所以我可能需要至少三种类型的指针指向相同的内存位置：**char 类型，long long**（64 位整数以获得最佳位-明智计数）和**浮点类型**指针，但是整数和浮点类型指针的共存打破了严格的别名规则。

有什么建议可以解决这个问题吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T21:37:42.780

您是否正在使用`gcc`或`clang`行为类似的东西？他们必须[`__attribute__((__may_alias__))`](http://gcc.gnu.org/onlinedocs/gcc/Type-Attributes.html)解决这些问题。

# jquery - jquery-动态创建列的总和

> ID：14511236
> 
> 赞同：0
> 
> 时间：2013-01-24T21:35:52.427
> 
> 标签：jquery, html

我有一个动态创建行的表。现在我需要计算其中一列的总和。此代码仅适用于第一行：

```
$('.class').each(function() {
     sum += parseFloat($(this).val());
     sum = sum.toFixed(2);
}); 
```

我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T21:39:43.120

将您的计算代码包装在如下函数中，

```
function calculateTotal () {
  var sum = 0;
  $('.class').each(function() {
     sum += parseFloat($(this).val());
     sum = sum.toFixed(2);
  });
  return sum;
} 
```

现在`calculateTotal()`，只要您想获取更新的值，就调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T22:01:25.547

你可以这样做...

```
var sum = 0;
$.each($('.class').map(function () { return $(this).val(); }).get(), function (i, v) { sum += v; });
sum = sum.toFixed(2); 
```

# javascript - var 在 "if" 语句之后不会改变

> ID：14511237
> 
> 赞同：-2
> 
> 时间：2013-01-24T21:35:55.227
> 
> 标签：javascript, jquery, html

我正在尝试在表单中构建一个简单的开关。它只能以一种方式工作。我在这里缺少什么阻止此代码工作？

**HTML**

```
<div id="SlideJoinDiv" align="right" style="background-image: url(img/buttons/SchuifNederlandsBG.png">
<img width="87px" height="53px" src="img/buttons/SchuifjeKnop.png" id="SlideJoin" />
</div> 
```

**jQuery**

```
$(document).ready(function () {
  $('#SlideJoinDiv').click(function () {
    var waardeStart = 'gast';
    var waardeType = $('#TypeAccount').attr('value');
    if (waardeType = waardeStart) {
      $('#SlideJoinDiv').attr('align', 'left');
      $('#TypeAccount').attr('value', 'artist');
    } else {
      $('#SlideJoinDiv').attr('align', 'right');
      $('#TypeAccount').attr('value', 'gast');
    }
  }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T21:38:33.773

```
waardeType = waardeStart 
```

应该：

```
waardeType == waardeStart 
```

现在你正在分配，你需要比较。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-24T21:38:44.387

问题在`if`

```
if (waardeType = waardeStart){ 
```

应该：

```
if (waardeType == waardeStart){ 
```

说明：一个等号（=）是赋值，两个等号（==）是比较。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-24T21:38:44.970

```
if (waardeType = waardeStart) 
```

是错的。

采用

```
if (waardeType == waardeStart) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-24T21:41:01.700

应该是“==”而不是“=”比较与分配

此外，背景图像的样式定义中的小错别字。

```
style="background-image: url('img/buttons/SchuifNederlandsBG.png');" 
```

代替

```
style="background-image: url(img/buttons/SchuifNederlandsBG.png" 
```

# jquery - 使用 JQTouch 在无窗口 iPhone 模式下进行 FB 身份验证时的白页

> ID：14511240
> 
> 赞同：0
> 
> 时间：2013-01-24T21:36:02.230
> 
> 标签：jquery, oauth-2.0, jqtouch, fbjs

我正在尝试使用带有 facebook 登录的 jqtouch 构建一个不错的 Web 应用程序。让它工作到一定程度。但是当将应用程序拉到 iPhone 的主屏幕（无窗口查看，jqt）并验证/登录到 FB 时，它会给出一个带有正确 FB 链接的白页。它提供了一个正确的链接（就像我在任何地方寻找答案一样），但我找到并尝试过的修复都没有工作。

使用浏览器时不会发生此问题。FB 弹出窗口正确关闭。使用 safari mobile 时，浏览器会打开另一个选项卡，显示为白色，然后将其关闭并移回浏览器中的原始选项卡。但它不会打开选项卡。它只是坐在那里等待我抱歉的屁股再次单击它并激活选项卡。重新加载时，它已登录。因此该操作有效，但返回页面无效。在无框架模式 (jqt) 下，它不会打开额外的选项卡。它只是用白页覆盖我的页面，并没有关闭它。我没有收到 JS 的萤火虫错误。

在产生问题的同时，我使代码尽可能基本：

```
<!doctype html>
<html xmlns:fb="https://www.facebook.com/2008/fbml">
  <head>
    <title>My Facebook Login Page</title>
    <script type="text/javascript" src="[my domain]/modules/js/jquery-1.8.3.min.js"></script>
    <script src="[my domain]/modules/jqtouch-1.0-b4-rc/src/jqtouch-jquery.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="[my domain]/modules/jqtouch-1.0-b4-rc/src/jqtouch.min.js" type="text/javascript" charset="utf-8"></script>
    <script type="text/javascript" charset="utf-8">
    // JQT
    var jQT = new $.jQTouch({
        //icon: "jqtouch.png", // Will show an "app" picture now
        addGlossToIcon: false,
        //startupScreen: "jqt_startup.png", // No startup pic
        statusBar: "white",
    });
    </script>

  </head>
  <body>
    <div id="fb-root"></div>
    <script src="http://connect.facebook.net/en_US/all.js"></script>
    <script>
       FB.init({ 
          appId:'[my app id]', cookie:true, 
          status:true, xfbml:true 
       });
    </script>

    <div id="jqt">
        <div id="main" class="current">
            <fb:login-button>Login with Facebook</fb:login-button>
            Random text to have something on the screen
        </div>
    </div>
  </body>
</html> 
```

我已经做了大约 5 天了，而且非常疯狂。某种解决方案将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T08:13:02.493

好吧，找到了替代方案。使用 php SDK。但起初它仍然加载了另一个标签。但是使用时：

```
<a onclick="top.location.href='[facebook login url]'">login</a> 
```

它确实奏效了。它实际上在同一个应用程序的同一个窗口中打开。您需要这样做，因为您无法将目标更改为 target=_self

玩得开心！

# .net - 我可以在 vb.net 中将 xslt（xml 控件输出）保存为 pdf

> ID：14511241
> 
> 赞同：0
> 
> 时间：2013-01-24T21:36:05.470
> 
> 标签：.net, xml, vb.net, xslt, pdf

我想将用户在屏幕上看到的内容保存为 pdf 文件。我正在使用一个 xml 控件，用户正在查看一个 xslt 的输出，所有这些输出都按照我希望它在 pdf 上显示的方式很好地格式化。我宁愿不购买任何 3rd 方控件，但如果它们确实解决了我的问题，任何建议都将被标记为答案。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T05:43:38.900

FO.net 是 XSL-FO 格式化对象的 .net 实现 (http://en.wikipedia.org/wiki/XSL_Formatting_Objects)。[http://fonet.codeplex.com/](http://fonet.codeplex.com/)。
我的团队使用它在 .net 应用程序中从 XML 生成 PDF 输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T05:01:35.047

您可以使用 Interop.PDFActiveX.dll 将 Excel 文件另存为 PDF

或者

你可以**[参考](https://stackoverflow.com/questions/7906722/save-entire-workbook-as-pdf-excel-2010-c)**

# javascript - JavaScript get_postBackElements().cells 在 Firefox 中不起作用

> ID：14511242
> 
> 赞同：0
> 
> 时间：2013-01-24T21:36:08.287
> 
> 标签：javascript, asp.net, visual-studio-2010, web-applications

Visual Studio 2010：Asp.Net 4.0

我正在尝试使用以下 JavaScript 函数在回发时获取 GridView 的单元格集合的第一个单元格 [0]。它适用于 IE8 和 IE9，但不适用于 Firefox 或 Safari。

* * *

```
function onBeginRequest(sender, args) {
    var send = args.get_postBackElement().id;

    if (args.get_postBackElement().cells != null) {
        var menu = args.get_postBackElement().cells[0].innerHTML;
        if (menu.indexOf("vehicles") != -1) {
            send = "ProjectClick";
        }
    }

    if (displayWait(send) == "yes") {
        $find('PleaseWaitPopup').show();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T13:08:28.090

使用 getElementById 方法并获取控件 tagName 或验证 Id。我检查了标签名称。

```
function pageLoad(sender, args) {
    var sm = Sys.WebForms.PageRequestManager.getInstance();
    if (!sm.get_isInAsyncPostBack()) {
        sm.add_beginRequest(onBeginRequest);
        sm.add_endRequest(onRequestDone);
    }
}

function onBeginRequest(sender, args) {
    var send = args.get_postBackElement().id;
    var gv = document.getElementById(send);

    if (gv != null && gv.tagName == "TABLE") {
        var menu = gv.rows[0].cells[0].innerHTML;
        if (menu.indexOf("vehicle") != -1) {
            send = "ProjectClick";
        }
    }

    if (displayWait(send) == "yes") {
        $find('PleaseWaitPopup').show();
    }
}

function onRequestDone() {
    $find('PleaseWaitPopup').hide();
}

function displayWait(send) {
    switch (send) {
        case "ProjectClick":
            return ("yes");
            break;
        default:
            return ("no");
            break;
} 
```

# mysql - 从终端执行 MySQL 查询而不打印结果

> ID：14511243
> 
> 赞同：3
> 
> 时间：2013-01-24T21:36:12.080
> 
> 标签：mysql, terminal

我正在执行一些具有非常大结果集的 MySQL 查询。我想看看他们需要多长时间，但我不希望所有的输出都打印在我的终端上，因为它占用了大量的空间和时间。我可以通过编写一个脚本来执行和计时查询来做到这一点，但我想知道是否有办法直接通过终端上的 MySQL 来做到这一点。谢谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-08-15T10:05:19.760

更改 mysql 中的寻呼机，如下所示：[http ://www.mysqlperformanceblog.com/2013/01/21/fun-with-the-mysql-pager-command/](http://www.mysqlperformanceblog.com/2013/01/21/fun-with-the-mysql-pager-command/)

`mysql> pager cat > /dev/null`将丢弃输出，`mysql> pager`并将其放回原处。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-24T22:22:23.943

将您的查询包装在`set @foo = (select count(*) from ( ..... ) foo)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T21:42:57.487

只需运行 mysql 控制台实用程序，然后输入**源文件名**（其中文件名包含 sql 命令）

# playframework-1.x - 播放框架 1.2.5 的路由查询

> ID：14511245
> 
> 赞同：0
> 
> 时间：2013-01-24T21:36:24.670
> 
> 标签：playframework-1.x

我需要为以下语法添加路由：

```
http://www.testsite.com/select?term=query1 
```

在我的路线文件中，我尝试使用以下内容

```
GET    /select/{term} 
```

但是，上面没有捕获 URL - 而是转到配置中的另一个处理程序（放置在 select/{term} 的处理程序下方：

```
 GET     /{auth} 
```

任何有关修复或故障排除的想法都将受到欢迎。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T21:41:08.740

?term= 表示 term 是一个参数 - 不是您尝试匹配的路线的一部分

所以你会写

```
GET       /select              YourControllerClass.yourMethod 
```

……

```
YourControllerClass extends Controller { 

public static void yourMethod(String term){ 
     Logger.debug("term=" + term);
 }
} 
```

如果您的 URL 是`http://www.testsite.com/select/query1`您在上面提供的路由定义应该可以工作

# matlab - MATLAB：如何在矩阵中设置颜色

> ID：14511249
> 
> 赞同：4
> 
> 时间：2013-01-24T21:36:40.223
> 
> 标签：matlab, colors, matrix

我有一个矩阵 N*N，具有三个不同的值，例如 0、0.5、1。如何将图像打印到屏幕上，每个值代表不同的颜色？重要提示：矩阵是一个循环，因此值可能会改变（我想每次迭代都打印矩阵）。

我尝试使用颜色图，如果所有三个值都在矩阵中，它可以正常工作，但是当只保留一个或两个值时，颜色会改变。

我希望它如何工作：值为 0、0.5、1 的矩阵在屏幕上打印一个矩阵，其中每个单元格包含 0 个黑色、0.5 个绿色、1 个黄色。

非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T21:44:06.660

只需创建您自己的只有三个可能值的颜色图：

```
a = [1 0.5 0;1 .5 0;0.5 0 1];
b = [1 0 1;1 1 0;0 0 1];
cmap = [0,0,0;0,1,0;1,1,0];
clims = [0 1];
imagesc(a,clims); colormap(cmap);
imagesc(b,clims); colormap(cmap); 
```

一个给出：

![一个](../Images/43f1f04a9b7ada62749d506c7e661a2b.png)

b 给出：

![在此处输入图像描述](../Images/f236e2d52810250dd581420076a61255.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T21:46:21.350

我可能会尝试 imagsec。或任何其他颜色缩放。从灰度开始。RGB 会稍微复杂一些

# twitter-bootstrap - rel="tooltip"，这是不好的做法吗？

> ID：14511250
> 
> 赞同：17
> 
> 时间：2013-01-24T21:36:57.793
> 
> 标签：twitter-bootstrap, w3c

在工具提示的引导文档中，它使用`<a href="#" rel="tooltip" title="first tooltip">hover over me</a>`. 工具提示只是装饰性的。不是 css 样式，而只是一些 JS 来更改标题属性的呈现方式。

“rel”属性用于告诉机器人（例如 google）链接的性质。选项包括备用、作者、书签、帮助、许可证、下一个、nofollow、noreferrer、预取、上一个、搜索和标记。

`rel = "tooltip"`由于工具提示是装饰性的，没有说明链接的性质，并且不是机器人或浏览器可以解释的，因此使用它是不是不好的做法？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-25T07:54:46.687

使用`rel="tooltip"`您的文档**不会**通过 W3C 网络标准验证。

您将从[W3C 验证器](http://validator.w3.org/)收到此错误：

> *元素 a 上属性 rel 的错误值工具提示：不是绝对 IRI。字符串工具提示不是注册的关键字或绝对 URL。*

最好**使用以下类****标识工具提示**链接： **`<a href="#" class="tooltip" title="first tooltip">hover over me</a>`**

 ***   但是，正如您已经提到的，浏览器不会以任何方式使用 rel 属性，但它**可能会影响您在搜索引擎中的排名**。[Google 建议](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=100782)验证您的文档并“编写好的、干净的 HTML”。
*   rel 属性对于屏幕阅读器等**可访问性工具也可能很有趣。**

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-10-13T07:56:38.190

或者很容易你可以`rel`用`data-rel`属性替换（这是绝对有效的）。

例子：

```
$("a[data-rel]").tooltip(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-23T16:27:51.627

Bootstrap[文档](http://getbootstrap.com/javascript/#tooltips)建议使用`data-toggle="tooltip"`，例如：

```
<button type="button" class="btn btn-default" data-toggle="tooltip" data-placement="left" title="Tooltip on left">Tooltip on left</button> 
```

并通过以下方式启用它们：

```
$(function () {
  $('[data-toggle="tooltip"]').tooltip()
}) 
```**

# jquery - 我可以在 JQuery 中访问 ColdFusion 会话吗？

> ID：14511256
> 
> 赞同：1
> 
> 时间：2013-01-24T21:37:28.340
> 
> 标签：jquery, coldfusion

我有一个用于登录的 ColdFusion 页面。登录按钮的单击由 JQuery 函数处理。身份验证本身是假的，并且发生在函数本身内部。成功后，我将另一个 ColdFusion 页面中的内容加载到第一页中。我可以以任何方式从 JQuery 在 ColdFusion 会话中设置一个变量吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T00:45:15.840

从最严格的意义上说，不，jQuery/javaScript 不能直接访问 ColdFusion 变量，Kevin B 是正确的。但是，您可以使用 AJAX（它是 JavaScript，而不是 jQuery，尽管 jQuery 有一些方法可以简化它）将数据发送到 ColdFusion，而无需在浏览器中进行完整的往返。这样做会导致 ColdFusion根据您选择的方法在`URL`和范围内创建变量。`FORM`不幸的是，`FORM`变量`URL`仅在请求期间存在，因此您将使用 ColdFusion 设置`SESSION`您需要使用刚刚发送的`URL`或变量设置的任何变量。`FORM`

jQuery 有一些方法可以做到这一点。

*   [jQuery.ajax() 或 $.ajax()](http://api.jquery.com/jQuery.ajax/)
*   [jQuery.post() 或 $.post()](http://api.jquery.com/jQuery.post/)
*   [jQuery.get() 或 $.get()](http://api.jquery.com/jQuery.get/)

一个非常简单的例子可能看起来像这个 jQuery：

```
<script>
   var myName = "Travis";
   $.get('setVariable.cfm?someVar='+myName, // Send a value to the server in the URL.
      function(data){ // tell the user what the server said (optional).
         alert(data);  //data is whatever was returned by the server.
      }
   );   
</script> 
```

setVariable.cfm 中的 CF 代码可能看起来像

```
<cftry>
    <cfset session.userName = url.someVar>
    Session user was set.
    <cfcatch>
        <cfoutput>
            Oh, Crap! Something bad happened! (#cfcatch.message#)
        </cfoutput>
    </cfcatch>
</cftry> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-24T21:41:18.910

不，您在客户端只能访问会话/客户端令牌 cookie。但是，您可以设置自定义 cookie 的值，然后使用 Coldfusion 访问该 cookie。

# python - 在 lxml.html 中使用 cssselect 的 innerhtml 等效项

> ID：14511257
> 
> 赞同：1
> 
> 时间：2013-01-24T21:37:38.947
> 
> 标签：python, html-parsing, css-selectors, lxml, innerhtml

> **可能重复：**
> [使用 lxml.html 解析 HTML 时等效于 InnerHTML](https://stackoverflow.com/questions/6123351/equivalent-to-innerhtml-when-using-lxml-html-to-parse-html)

使用 lxml.html 和 python 2.7 的 cssselect 的 innerHTLML 是什么？

```
import lxml.html, cssselect

doc = lxml.html.document_fromstring(htmldocstring)
e = doc.cssselect('div.mainl')[0]
print e.innerHTML #This doesn't work 
```

如何获取 e 的内部/外部 html？

**外部 html** 要获取外部 html，请执行以下操作：

```
print lxml.html.tostring(e) 
```

仍然不知道如何获取innerHTML。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T21:40:04.400

弄清楚了...

```
print lxml.html.tostring(e) 
```

# authentication - 发布到自托管 NuGet 服务器时如何修复 401 身份验证错误

> ID：14511260
> 
> 赞同：7
> 
> 时间：2013-01-24T21:37:54.107
> 
> 标签：authentication, nuget, nuget-server

我按照这些[说明在我们的 Intranet 上托管了 NuGet 服务器](http://docs.nuget.org/docs/creating-packages/hosting-your-own-nuget-feeds)（版本 2.2.2）。就列出包并在 VS 2012 中检索它们而言，它非常有用。但是当我使用 Nuget 包资源管理器创建包并尝试发布它时，我会收到一个提示输入凭据的 Windows 安全对话框。无论我输入什么凭据，它都会不断重新提示我输入用户名和密码，并返回 401 身份验证错误。为什么 NuGet 服务器提示我输入 Windows 凭据，我该如何摆脱它？它仅用于发布而不是其他任何东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-18T04:26:45.327

除了 Packages 文件夹的权限配置之外，还有一件事。在我的情况下，我必须使用类似的 URL

```
http://<server>/<nuget_virtual_dir>/api/v2/package/ 
```

用于推动。在我的情况下，这是唯一的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-27T15:07:20.490

当您使用 NuGet 推送时，您需要将 /api/v2/package 放在 NuGet 服务器 URL 之后（例如[http://myhost/myNuGetServer/api/v2/package](http://myhost/myNuGetServer/api/v2/package)）

如果您使用 NuGet 用户界面（NuGet 包资源管理器），您只需要放置服务器 url 而不是 URL（例如[http://myhost/myNuGetServer/](http://myhost/myNuGetServer/)）

还要注意 Web.config 中的 apikey 配置并在 NuGet 推送中使用它！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T10:23:09.643

我认为找到了解决方案（至少解决了我的问题）：

我放弃了 Nuget 问题，并专注于 ISS 401 错误。然后，我将权限授予用户“IIS AppPool\DefaultAppPool”到应用程序的根目录（或使用该应用程序的 AppPool，在我的情况下为“ASP.NET v4.0”）。然后它就像魅力一样工作！

更多信息（以及关于问题的良好解释）：[IIS7 401 错误中的 ApplicationPoolIdentity](https://stackoverflow.com/questions/1644093/applicationpoolidentity-in-iis7-401-errors)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-19T01:01:20.463

您可能会发现[此 SO 答案](https://stackoverflow.com/questions/17928112/configuring-nuget-server-to-use-authentication/20658725#20658725)很有帮助，因为它涵盖了如何在发布工作站（或构建服务器，但在任何一种情况下都是准确的信息）上配置凭据。

# java - 无法将 JSON 反序列化为 POJO（使用 Jackson）

> ID：14511262
> 
> 赞同：4
> 
> 时间：2013-01-24T21:37:59.477
> 
> 标签：java, json, jackson

我`Jackson`用来将以下内容反序列`JSON`化为 POJO：

```
{
    "etag": "\"SomeETag\"",
    "jobComplete": true,
    "jobReference": {
        "jobId": "someJobId",
        "projectId": "someProjectId"
    },
    "rows": [
        {
            "f": [
                {
                    "v": "101"
                },
                {
                    "v": "FirstService"
                },
                {
                    "v": "firstAPI"
                }
            ]
        },
        {
            "f": [
                {
                    "v": "102"
                },
                {
                    "v": "SecondService"
                },
                {
                    "v": "SecondAPI"
                }
            ]
        }
    ],
    "totalRows": "2"
} 
```

这是我正在使用的 POJO：

```
 @JsonAutoDetect
    @JsonIgnoreProperties(ignoreUnknown = true)
    public class Response {

        public String etag;
        public boolean jobComplete;
        public List<FWrapper> rows = new ArrayList<FWrapper>();
    }

    class FWrapper {
        public F f; 
    }

    class F {
        public List<VWrapper> vWrappers = new ArrayList<VWrapper>();       
    }

    class VWrapper {
        public String v;
    } 
```

我正在使用这段代码进行映射：

```
 ObjectMapper mapper = new ObjectMapper();
    Response response = mapper.readValue(response, Response.class); 
```

这是我得到的错误：

> `org.codehaus.jackson.map.JsonMappingException`：无法从 [Source: java.io.StringReader@11563ff; 的 START_ARRAY 令牌中反序列化 mypackage.F 的实例；行：1，列：227]（通过引用链：mypackage.Response["rows"]->mypackage.FWrapper["f"]）

我检查了几个有类似错误的旧问题，但还没有解决我的问题。[正如正确的回答所说，这个](https://stackoverflow.com/questions/11747370/jackson-how-to-process-deserialize-nested-json) 看起来与我的非常相似`Your data is problematic in that you have inner wrapper objects in your array`，我认为我的数据也是如此。但是我仍然无法进行正确的 POJO 映射。任何指针将不胜感激。

编辑：更正了一个错字（`Json`我使用的是有效的）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T21:58:08.393

您的类模型与您的 JSON 不匹配。

在您的 JSON 中， f 是一个数组而不是一个对象。在您的 F 类中，是一个包含内容列表的对象。

像这样的映射应该可以工作（未经测试）

```
public class Response {

    public String etag;
    public boolean jobComplete;
    public List<F> rows;
}

public class F {
    public List<V> f;
}

public Class V {
    public String v;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T21:50:16.057

您的“行”数组没有右方括号**]**。

它使 JSON 无效。

仔细阅读错误信息：

org.codehaus.jackson.map.JsonMappingException：无法从[Source: java.io.StringReader@11563ff;**的 START_ARRAY 令牌中反序列化 mypackage.F 的实例；**行：1，列：227]（通过引用链：mypackage.Response[ **"rows"** ]->mypackage.FWrapper["f"]）

* * *

现在我看到您修改了 JSON - 添加了它。

你还有同样的问题吗？

# jquery - 每个 jQuery 函数

> ID：14511263
> 
> 赞同：3
> 
> 时间：2013-01-24T21:38:01.803
> 
> 标签：jquery, each

在一个文档中，我有大约 25 个 DIV，其中包含各种名称的表单。DIV 都具有相同的类名，如下所示：

```
<div class="swoop" style="display:none">
  <form name="myFormXYZ" method="post">
    <input name="caption" type="hidden" value="19">
  </form>
</div> 
```

我想编写 jQuery 代码，它将检查所有具有“swoop”类的 DIV，如果任何 DIV 包含一个名为“caption”的输入字段，其值为 x，那么这些 DIV 的显示属性应设置为“block ”。x 将是 1 到 1000 之间的整数。

到目前为止，我想出了这个：

```
$('.swoop').each(function() {
    var capt = $( ? ? ? ).attr('value()');
    if (capt == x) {$(this).css.(display','block')}
}); 
```

jQuery 函数甚至可以遍历显示设置为无的 DIV 吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T21:43:39.397

还有一种方式：

```
$('.swoop').has('input[name=caption][value=' + x + ']').show(); 
```

这使用[属性选择器](http://api.jquery.com/attribute-equals-selector/)来查找具有特定值的输入元素。[`.has`](http://api.jquery.com/has/)通过具有与传递的选择器匹配的后代的元素过滤元素，并且`.show`应该是不言自明的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T21:43:08.767

```
$('.swoop input[name="caption"]').each(function() {
    var capt = $(this).val();
    if (capt == x) {
        $(this).closest('.swoop').css('display','block')
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T21:40:13.160

你需要：

```
$('.swoop').each(function() {
    var capt = $('input[name=caption]', this).val();
    if (capt == x) {$(this).css.('display','block')}
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-24T21:41:12.977

```
var someInt = 7;    
$('.swoop').each(function() {
    var capt = $('input[name=caption]', this).val());
    if (capt == someInt) {$(this).css('display','block');}
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T21:55:43.500

```
var v = 19;    
$('.swoop input[name=caption]').each(function () {
            var capt = $(this).attr('value');
            if (capt == v) { 
            $(this).parents("div").andSelf().css('display', 'block');
            $(this).attr({ type: '' }); }
        }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-24T21:42:49.050

是的，即使元素被隐藏，jQuery 也可以访问它们。

在 jQuery 调用中使用当前项目作为上下文来查找其中的元素。使用该`val`方法获取输入的值，并且您希望解析该值以将字符串转换为数字：

```
var capt = parseInt($('input[name=caption]', this).val(), 10);
if (capt == x) { $(this).css('display','block'); } 
```

# c++ - 提神气——条件解析

> ID：14511266
> 
> 赞同：2
> 
> 时间：2013-01-24T21:38:26.130
> 
> 标签：c++, boost, boost-spirit, boost-spirit-qi

我需要匹配一些输入，构造一个复杂的对象，然后根据一些道具以两种方式匹配其余输入。的构造对象。我试过 qi::eps(/ *condition* /) >> p1 | p2 但结果对我来说很明显。简化代码[http://liveworkspace.org/code/1NzThA](http://liveworkspace.org/code/1NzThA) $6

在代码片段中，我匹配输入中的 int_ 并且如果值 == 0 尝试匹配“a” - 'b' 但对于“0b”输入，我已经确定了！我试过玩牙套，但没有运气。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T08:30:08.853

我个人不会轻易使用语义动作（或凤凰）。这不是齐的“精神”（双关语）。

*   [Boost Spirit：“语义行为是邪恶的”？](https://stackoverflow.com/questions/8259440/boost-spirit-semantic-actions-are-evil/8259585#8259585)

这是我的看法：

```
rule<char const*, char()> r = 
   (omit [ int_(0) ] >> char_('a')) |
   (omit [ int_(1) ] >> char_('b'))
   ; 
```

看？干净多了。另外：自动属性传播。[在http://liveworkspace.org/code/1T9h5](http://liveworkspace.org/code/1T9h5)上实时查看

输出：

```
ok: a
fail
fail
ok: b 
```

完整示例代码：

```
//#define BOOST_SPIRIT_DEBUG
#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/phoenix.hpp>

namespace qi = boost::spirit::qi;
namespace phoenix = boost::phoenix;

template <typename P>
inline
void test_parser(char const* input, P const& p, bool full_match = true)
{
    char const* f(input);
    char const* l(f + strlen(f));
    char result;
    if (qi::parse(f, l, p, result) && (!full_match || (f == l)))
        std::cout << "ok: " << result << std::endl;
    else
        std::cout << "fail" << std::endl;
}

int main()
{
   int p;
   using namespace qi;
   rule<char const*, char()> r = 
       (omit [ int_(0) ] >> char_('a')) |
       (omit [ int_(1) ] >> char_('b'))
       ;

   BOOST_SPIRIT_DEBUG_NODE(r);

   test_parser("0a", r); //should match
   test_parser("0b", r); //should not match
   test_parser("1a", r); //should not match
   test_parser("1b", r); //should match
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T10:07:11.010

这是你的规则：

```
qi::rule<char const*> r =
    qi::int_ [phoenix::ref(p) = qi::_1]
    >> (qi::eps(phoenix::ref(p) == 0)
        >> qi::char_('a') | qi::char_('b')) 
```

这对我来说是：接受'0a'或任何以'b'结尾的东西。这与您在代码片段中获得的结果相匹配。

我承认我不完全理解您的问题，但是如果您试图让某种“排他性或”事情发生（如您的代码片段中的注释所示），那么此规则是不完整的。您在评论中提出的解决方法（实际上更像是“修复”而不是“解决方法”）是一种解决方案，尽管您不需要，`qi::lazy`因为基于凤凰城的 Qi 当地人已经很懒惰，但您走在正确的轨道上. 这是另一个（更具可读性？）解决方案。

```
qi::rule<char const*> r =
    qi::int_ [phoenix::ref(p) = qi::_1]
    >> ((qi::eps(phoenix::ref(p) == 0) >> qi::char_('a')) | 
        (qi::eps(phoenix::ref(p) == 1) >> qi::char_('b')))
; 
```

如果您更喜欢使用您在评论中添加的 locals<>，那也可以，但是使用引用 to`p`会减少代码的开销，只要您记住不要`p`在语法中的其他任何地方设置，并且您不最终构建了一个递归该规则的语法:)

# hadoop - 为 hadoop/PIG 输出数据分配 ID

> ID：14511271
> 
> 赞同：1
> 
> 时间：2013-01-24T21:38:33.607
> 
> 标签：hadoop, apache-pig, hdfs

我正在研究 PIG 脚本，该脚本对原始交易执行繁重的数据处理并提出各种交易模式。

假设其中一种模式是 - 查找一天内收到跨境交易的所有账户（包括总交易量和交易量）。

我的预期输出应该是两个数据文件 1) 汇总数据——比如账户 A1 从国家 AU 收到了 50 笔交易。2) 原始交易 - A1 的所有交易超过 50 笔。

我的 PIG 脚本当前正在创建以下格式的输出数据源

账户国家 TotalTxns RawTransactions

A1 AU 50 [(Txn1), (Txn2), (Txn3)....(Txn50)]

A2 JP 30 [(Txn1), (Txn2)....(Txn30)]

现在的问题是，当我从 Hadoop 系统（到某个数据库）中获取这些数据时，我想在我的汇总记录（A1、AU、50）与所有 50 个原始事务（如用作外国的汇总记录的 ID 1）之间建立链接所有 50 个相关 Txns 的密钥）。

我知道分布式的 Hadoop 不应该用于分配 ID，但是是否有任何选项可以分配非唯一 ID（不需要顺序）或其他方式来链接这些数据？

**编辑**（使用 DataFu 中的枚举后）这里是 PIG 脚本

```
register /UDF/datafu-0.0.8.jar
define Enumerate datafu.pig.bags.Enumerate('1');
data_txn = LOAD './txndata' USING PigStorage(',') AS (txnid:int, sndr_acct:int,sndr_cntry:chararray, rcvr_acct:int, rcvr_cntry:chararray);
data_txn1 = GROUP data_txn ALL;
data_txn2 = FOREACH data_txn1 GENERATE flatten(Enumerate(data_txn));
dump data_txn2; 
```

运行这个之后，我得到

错误 org.apache.pig.tools.pigstats.SimplePigStats - 错误 2997：无法从支持的错误重新创建异常：java.lang.NullPointerException at datafu.pig.bags.Enumerate.enumerateBag(Enumerate.java:89) at datafu.pig .bags.Enumerate.accumulate(Enumerate.java:104) ....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T22:09:48.313

您的行中有什么独特之处？帐户 ID 和国家/地区代码似乎是您在 Pig 脚本中分组的内容，那么为什么不使用它们创建一个复合键呢？就像是

```
CONCAT(CONCAT(account, '-'), country) 
```

当然，您可以编写一个 UDF 以使其更优雅。如果您需要一个数字 ID，请尝试编写一个 UDF，该 UDF 将创建上述字符串，然后调用其`hashCode()`方法。当然，这不能保证唯一性，但你说没关系。您始终可以构建自己的方法将字符串转换为唯一的整数。

但话虽如此，为什么您需要一个 ID 密钥？如果您想稍后连接两个表的字段，您可以一次连接多个字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-03T05:19:21.570

DataFu 在 Enumerate 中有一个 bug，该 bug 在 0.0.9 中已修复，因此请使用 0.0.9 或更高版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T22:27:37.373

我经常在 Hadoop 作业中分配随机 ID。您只需要确保生成包含足够数量的随机位的 id，以确保冲突的概率足够小（http://en.wikipedia.org/wiki/Birthday_problem）。

根据经验，我使用 3*log(n) 随机位，其中 n = 需要生成的 ID 数。

在许多情况下，Java 的 UUID.randomUUID() 就足够了。

[http://en.wikipedia.org/wiki/Universally_unique_identifier#Random_UUID_probability_of_duplicates](http://en.wikipedia.org/wiki/Universally_unique_identifier#Random_UUID_probability_of_duplicates)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T00:12:19.040

如果您的 ID 是数字并且您不能使用 UUID 或其他基于字符串的 ID。[LinkedIn ( DataFu](https://github.com/apache/incubator-datafu) ) 有一个UDF 的 DataFu 库，其中包含一个非常有用的 UDF [Enumerate](https://github.com/apache/incubator-datafu/blob/master/datafu-pig/src/main/java/datafu/pig/bags/Enumerate.java)。所以你可以做的就是将所有记录分组到一个包中，然后将包传递给 Enumerate。这是我脑海中的代码：

```
register jar with UDF with Enumerate UDF
inpt = load '....' ....;
allGrp = group inpt all;
withIds = foreach allGrp generate flatten(Enumerate(inpt)); 
```

# google-maps - 如何在 Google Maps API 上的 kml/kmz 文件中使用透明度？

> ID：14511277
> 
> 赞同：1
> 
> 时间：2013-01-24T21:38:40.743
> 
> 标签：google-maps, google-maps-api-3

我正在使用 kml 或 kmz 文件测试嵌入式 Google 地图，但无法获得任何透明度。kml / png 在 Google 地球中显示透明度，但在 Google 地图中不显示。kml 文件中的第一个颜色字节 ( `<color>88ffffff</color>`) 对透明度没有影响。

有没有办法在谷歌地图和谷歌地球中获得透明度？

```
function initialize() {
  var mapProp = {
    center: new google.maps.LatLng(36.31, -95.37),
    zoom: 11,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  };
  var map = new google.maps.Map(document.getElementById("googleMap"), mapProp);
  var kmzLayer = new google.maps.KmlLayer('http://xpda.com/coverage.kml');
  kmzLayer.setMap(map);
}  
google.maps.event.addDomListener(window, 'load', initialize); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T01:10:41.830

Google 地图中的 KML 图层不[**支持**](https://developers.google.com/kml/documentation/kmlelementsinmaps)`<color>`GroundOverlays的- 元素。

您可以改为存储具有所需 alpha 透明度的 PNG。

# windows - 通过注册表更新禁用所有设备的扫描仪和相机向导 - Windows XP

> ID：14511285
> 
> 赞同：0
> 
> 时间：2013-01-24T21:39:06.897
> 
> 标签：windows, camera, windows-xp, wizard, wia

有没有一种已知的方法可以通过注册表更新完全禁用 Windows 扫描仪和相机向导？我不想通过 GUI 为每个设备禁用它，而是希望能够完全禁用它，因此它不会出现在任何设备上。我尝试禁用 Windows 图像采集 (WIA) 服务，但这会阻止 Windows 看到摄像头。

**在第一次插入相机后将**以下条目添加到注册表将解决问题，但我们需要在第一次插入相机*之前*禁用它。

```
[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Class\{6BDD1FC6-810F-11D0-BEC7-     08002BE2092F}\0000\Events\Connected]
@="Digital camera connected"
"GUID"="{A28BBADE-64B6-11d2-A231-00C04FA31809}"
"LaunchApplications"="*"
"DefaultHandler"="{E0372B7D-E115-4525-BC55-B629E68C745A}"

[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Class\{6BDD1FC6-810F-11D0-BEC7-08002BE2092F}\0000\Events\Connected\{E0372B7D-E115-4525-BC55-B629E68C745A}]
"Name"="internal"
"Desc"="internal handler"
"Icon"="wiashext.dll, -101" 
```

上面的一个是针对已经插入相机的计算机运行的，向导不再打开。如果您在第一次插入相机之前运行此注册表修复程序，相机将创建一个新的注册表项，向导仍将打开。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T03:02:22.613

将 wiaacmgr.exe 重命名为 wiaacmgr_old.exe 创建虚拟文件 wiaacmgr.exe 你可以使用这个程序：

```
// dummy.c --  rename the exe to %WINDIR%/system32/wiaacmgr.exe
int __stdcall WinMain(void*a, void*b, void*v, int d) {} 
```

你应该得到纯粹的禅宗沉默，我用 iPhone 测试过。也许有人可以从 windows 文件夹中建议现有的 exe。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-01T14:11:02.060

进入服务并禁用 Windows Image Acquisition (WIA) 服务。

# python - scipy.sparse 矩阵上的布尔运算

> ID：14511291
> 
> 赞同：11
> 
> 时间：2013-01-24T21:39:28.387
> 
> 标签：python, scipy, sparse-matrix

我有一组填充了布尔值的稀疏矩阵，我需要对它们执行逻辑运算（主要是元素或）。

与 numpy 一样，使用 dtype='bool' 对矩阵求和给出了元素 OR，但是有一个讨厌的副作用：

```
>>> from scipy import sparse
>>> [a,b] = [sparse.rand(5,5,density=0.1,format='lil').astype('bool')
...  for x in range(2)]
>>> b
<5x5 sparse matrix of type '<class 'numpy.bool_'>'
    with 2 stored elements in LInked List format>
>>> a+b
<5x5 sparse matrix of type '<class 'numpy.int8'>'
    with 4 stored elements in Compressed Sparse Row format> 
```

数据类型更改为“int8”，这会导致未来操作出现问题。这可以通过说来解决：

```
(a+b).astype('bool') 
```

但我的印象是，所有这些类型的更改都会导致性能下降。

为什么结果的 dtype 与操作数不同？
有没有更好的方法在 python 中对稀疏矩阵进行逻辑运算？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T22:31:02.190

稀疏矩阵不支持逻辑运算，但转换回“布尔”并不是那么昂贵。实际上，如果使用 LIL 格式矩阵，由于性能波动，转换可能会出现负时间：

```
a = scipy.sparse.rand(10000, 10000, density=0.001, format='lil').astype('bool')
b = scipy.sparse.rand(10000, 10000, density=0.001, format='lil').astype('bool')

In [2]: %timeit a+b
10 loops, best of 3: 61.2 ms per loop

In [3]: %timeit (a+b).astype('bool')
10 loops, best of 3: 60.4 ms per loop 
```

您可能已经注意到，您的 LIL 矩阵在将它们相加之前已转换为 CSR 格式，请查看返回格式。如果您已经开始使用 CSR 格式，那么转换开销会变得更加明显：

```
In [14]: %timeit a+b
100 loops, best of 3: 2.28 ms per loop

In [15]: %timeit (a+b).astype(bool)
100 loops, best of 3: 2.96 ms per loop 
```

CSR（和 CSC）矩阵有一个`data`属性，它是一个一维数组，它保存稀疏矩阵的实际非零条目，因此重铸稀疏矩阵的成本将取决于矩阵的非零条目的数量，而不是它的大小：

```
a = scipy.sparse.rand(10000, 10000, density=0.0005, format='csr').astype('int8')
b = scipy.sparse.rand(1000, 1000, density=0.5, format='csr').astype('int8')

In [4]: %timeit a.astype('bool') # a is 10,000x10,000 with 50,000 non-zero entries
10000 loops, best of 3: 93.3 us per loop

In [5]: %timeit b.astype('bool') # b is 1,000x1,000 with 500,000 non-zero entries
1000 loops, best of 3: 1.7 ms per loop 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-03-06T11:59:47.287

您可以通过以下方式轻松表达布尔运算。然后它适用于稀疏矩阵。

```
a.multiply(b) #AND
a+b           #OR
(a>b)+(a<b)   #XOR
a>b           #NOT 
```

**所以**支持布尔运算。

# android - ANDROID radiogroup 不保存 oncheckedchangeListener

> ID：14511294
> 
> 赞同：0
> 
> 时间：2013-01-24T21:39:38.533
> 
> 标签：android, radio-group

**我尝试过的代码片段：**

```
 String servng, mealname, strDate;

public void onClick(View v) {
    // TODO Auto-generated method stub
    switch(v.getId()){
    case R.id.btFoodVegetableSave:
        mealname = selected;
        String serving  = calories.getText().toString();
        int i = Integer.parseInt(serving.replaceAll("[\\D]", ""));

        servng = String.valueOf(i);

        SimpleDateFormat sdf = new SimpleDateFormat("MM-dd-yyyy");
        strDate = sdf.format(new Date());

        if ( ( mealname.isEmpty() || servng.isEmpty() ) ){

            // call for custom toast
            viewErrorToast();
        }

        else {

        boolean didItWork = true;

        try{

            rgMeal.setOnCheckedChangeListener(new RadioGroup.OnCheckedChangeListener() {

                public void onCheckedChanged(RadioGroup group, int checkedId) {
                    // TODO Auto-generated method stub
                    switch( checkedId ){
                    case R.id.rbBreakfast:
                        BreakFastLog bfLog = new BreakFastLog(Bread_Dark.this);
                        bfLog.open();
                        bfLog.createEntry(mealname, servng, strDate);
                        bfLog.close();
                        break;
                    case R.id.rbMorningSnack:
                        MorningSnackLog msLog = new MorningSnackLog(Bread_Dark.this);
                        msLog.open();
                        msLog.createEntry(mealname, servng, strDate);
                        msLog.close();
                        break;
                    case R.id.rbLunch:
                        LunchLog lunchLog = new LunchLog(Bread_Dark.this);
                        lunchLog.open();
                        lunchLog.createEntry(mealname, servng, strDate);
                        lunchLog.close();
                        break;
                    case R.id.rbAfternoonSnack:
                        AfternoonSnackLog asLog = new AfternoonSnackLog(Bread_Dark.this);
                        asLog.open();
                        asLog.createEntry(mealname, servng, strDate);
                        asLog.close();
                        break;
                    case R.id.rbDinner:
                        DinnerLog dinnerLog = new DinnerLog(Bread_Dark.this);
                        dinnerLog.open();
                        dinnerLog.createEntry(mealname, servng, strDate);
                        dinnerLog.close();
                        break;
                    case R.id.rbEveningSnack:
                        EveningSnackLog esLog = new EveningSnackLog(Bread_Dark.this);
                        esLog.open();
                        esLog.createEntry(mealname, servng, strDate);
                        esLog.close();
                        break;
                    }
                }
            });

            }
            catch(Exception e){
                didItWork = false;
                viewErrorToast();
            }finally{
                if (didItWork){
                    viewBMRSavedToast();
                }

            }
        } // end of if else statement
        break; 
```

**xml布局：**

```
<LinearLayout
android:layout_width="match_parent"
android:layout_height="481dp"
android:background="@drawable/ihealthfirst"
android:orientation="vertical" >

<include
    android:layout_width="fill_parent"
    android:layout_height="match_parent"
    layout="@layout/tabs_menu" />

<TextView
    android:id="@+id/tvFoodVegetable"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/cabbage"
    android:layout_marginLeft="15dp"
    android:layout_marginTop="10dp"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

<EditText
    android:id="@+id/etAmount"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_margin="10dp"
    android:text="@string/one"
    android:inputType="number" >

    <requestFocus android:layout_height="wrap_content" />

</EditText>

<Spinner
    android:id="@+id/spFoodVegetable"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_margin="10dp"
    android:prompt="@string/white_bread_prompt" />

</LinearLayout>

<Button
    android:id="@+id/btFoodVegetableCalories"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/done"
    android:layout_margin="15dp"
    android:textColor="@color/darkgreen"
    android:textSize="@dimen/padding_extralarge"
    android:background="@drawable/btn_meal_selected" />

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="15dp"
    android:text="@string/choosemeal"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<RadioGroup
          android:paddingLeft="10dp"
          android:id="@+id/rgSelectMeal"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:orientation="vertical" >

<RadioButton
    android:id="@+id/rbBreakfast"
    android:layout_width="128dp"
    android:layout_height="wrap_content"
    android:text="@string/breakfast"
    android:checked="true" />

<RadioButton
    android:id="@+id/rbMorningSnack"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/morningsnack" />

   <RadioButton
       android:id="@+id/rbLunch"
       android:layout_width="128dp"
       android:layout_height="wrap_content"
       android:text="@string/lunch" />

<RadioButton
    android:id="@+id/rbAfternoonSnack"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/afternoonsnack" />

<RadioButton
    android:id="@+id/rbDinner"
    android:layout_width="127dp"
    android:layout_height="wrap_content"
    android:text="@string/dinner" />

<RadioButton
    android:id="@+id/rbEveningSnack"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/eveningsnack" />

</RadioGroup>

<Button
    android:id="@+id/btFoodVegetableSave"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/save"
    android:drawableLeft="@drawable/save24"
    android:background="@drawable/nutrition_button_gradiant"
    android:textColor="@color/white"
    android:layout_gravity="center"
    android:layout_marginBottom="15dp" />

</LinearLayout> 
```

当用户从单选组检查并单击保存按钮时，它会转到我的 FINALLY 语句：

```
 finally{
            if (didItWork){
                viewBMRSavedToast();
            } 
```

但是当我检查摘要（插入/保存到数据库的记录列表）时，它没有被保存:(我在这里处理无线电组有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T22:27:38.627

如果我理解正确，您希望用户单击单选按钮，然后在用户按下“保存”时创建一个新的 BreakFastLog。您当前正在做的是在单击“保存”按钮*后为无线电组创建一个 checkChangedListener 。*这将导致事件链以与您想要的（您所看到的）相反的顺序发生。为了让用户选择一个单选按钮然后单击“保存”，您只需要在单选组中检索当前选中的单选按钮，而不是进行 checkChangedListener。这可以通过以下方式完成：

```
 int checkedId = rgMeal.getCheckedRadioButtonId()
   switch( checkedId ){
      case R.id.rbBreakfast:
          BreakFastLog bfLog = new BreakFastLog(Bread_Dark.this);
          bfLog.open();
          bfLog.createEntry(mealname, servng, strDate);
          bfLog.close();
          break;
      case R.id.rbMorningSnack:
          MorningSnackLog msLog = new MorningSnackLog(Bread_Dark.this);
          msLog.open();
          msLog.createEntry(mealname, servng, strDate);
                   .
                   .
                   .
                   .
     } 
```

`

# bash - Bash 整数比较

> ID：14511295
> 
> 赞同：49
> 
> 时间：2013-01-24T21:39:40.840
> 
> 标签：bash, comparison, integer

我想编写一个 Bash 脚本来检查是否至少有一个参数，如果有，该参数是 0 还是 1。

这是脚本：

```
#/bin/bash
if (("$#" < 1)) && ( (("$0" != 1)) ||  (("$0" -ne 0q)) ) ; then
    echo this script requires a 1 or 0 as first parameter.
fi
xinput set-prop 12 "Device Enabled" $0 
```

这会产生以下错误：

```
./setTouchpadEnabled: line 2: ((: ./setTouchpadEnabled != 1: syntax error: operand expected (error token is "./setTouchpadEnabled != 1")
./setTouchpadEnabled: line 2: ((: ./setTouchpadEnabled -ne 0q: syntax error: operand expected (error token is "./setTouchpadEnabled -ne 0q") 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-01-24T22:05:52.620

这个脚本有效！

```
#/bin/bash
if [[ ( "$#" < 1 ) || ( !( "$1" == 1 ) && !( "$1" == 0 ) ) ]] ; then
    echo this script requires a 1 or 0 as first parameter.
else
    echo "first parameter is $1"
    xinput set-prop 12 "Device Enabled" $0
fi 
```

但这也有效，此外还保留了 OP 的逻辑，因为问题是关于计算的。这里只有[*算术表达式*：](http://wiki.bash-hackers.org/syntax/arith_expr)

```
#/bin/bash
if (( $# )) && (( $1 == 0 || $1 == 1 )); then
    echo "first parameter is $1"
    xinput set-prop 12 "Device Enabled" $0
else
    echo this script requires a 1 or 0 as first parameter.
fi 
```

输出相同¹：

```
$ ./tmp.sh 
this script requires a 1 or 0 as first parameter.

$ ./tmp.sh 0
first parameter is 0

$ ./tmp.sh 1
first parameter is 1

$ ./tmp.sh 2
this script requires a 1 or 0 as first parameter. 
```

[*[1] 如果第一个参数是字符串，则第二个失败*]

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-01-25T05:10:23.077

更简单的解决方案；

```
#/bin/bash
if (( ${1:-2} >= 2 )); then
    echo "First parameter must be 0 or 1"
fi
# rest of script... 
```

**输出**

```
$ ./test 
First parameter must be 0 or 1
$ ./test 0
$ ./test 1
$ ./test 4
First parameter must be 0 or 1
$ ./test 2
First parameter must be 0 or 1 
```

**解释**

*   `(( ))`- 使用整数评估表达式。
*   `${1:-2}`- 使用参数扩展来设置`2`if undefined 的值。
*   `>= 2`- 如果整数大于或等于二，则为真`2`。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-01-24T21:42:04.917

shell 命令的第零个参数是命令本身（或有时是 shell 本身）。你应该使用`$1`.

```
(("$#" < 1)) && ( (("$1" != 1)) ||  (("$1" -ne 0q)) ) 
```

您的布尔逻辑也有点混乱：

```
(( "$#" < 1 && # If the number of arguments is less than one…
  "$1" != 1 || "$1" -ne 0)) # …how can the first argument possibly be 1 or 0? 
```

这可能是你想要的：

```
(( "$#" )) && (( $1 == 1 || $1 == 0 )) # If true, there is at least one argument and its value is 0 or 1 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-01-25T15:03:30.390

我知道这已经得到解答，但这是我的，因为我认为案例是一个未被充分重视的工具。（也许是因为人们认为它很慢，但它至少和 if 一样快，有时更快。）

```
case "$1" in
    0|1) xinput set-prop 12 "Device Enabled" $1 ;;
      *) echo "This script requires a 1 or 0 as first parameter." ;;
esac 
```

# java - Servlet 更改数据库后刷新 JSP

> ID：14511303
> 
> 赞同：1
> 
> 时间：2013-01-24T21:40:14.803
> 
> 标签：java, jsp, jakarta-ee, servlets, refresh

我的 Java EE 项目中有一个关于刷新 jsp 页面的问题。每次 Servlet 在我的项目中修改数据库时，这些更改都不会出现在 jsp 页面中。它们仅在用户注销后出现。

有没有办法在数据库 MySQL 发生更改后刷新会话？（我使用服务器 JBoss）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T03:09:58.727

不要将从数据库检索到的数据存储在会话范围内。将其存储在请求范围内。这样，最终用户将获得每个 HTTP 请求的最新数据。

如果您担心性能，请寻找另一种解决方案，而不是将 HTTP 会话滥用为某种低效且难以管理的缓存。例如，为了在 1ms 而不是 200~500ms 内与 DB 连接的 DB 连接池，或者是基于 Java 的 2 级 DB 缓存，例如 Terracotta 和 Ehcache，以便拥有一个健全且可管理的共享缓存，而不是低效地复制与您现在所做的不同 HTTP 会话中的所有用户的数据完全相同。

如果您使用 JPA 而不是“普通的旧”JDBC，这一切都会更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T14:12:44.070

我以这种方式解决了：当我为我的个人资料设置新参数时，我`request.getSession.setAttribute(user);`在制作`getRequestDispatcher(myPage.jsp);`. 非常感谢！！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-06-05T14:35:27.297

*   我删除了需要更新的数据库条目
*   我复制了数据库条目的所有字段
*   我添加了应该更新的字段的数据点
*   我添加了新的数据库条目

# c# - 创建一个包含 UTC 总天数的日期范围

> ID：14511307
> 
> 赞同：2
> 
> 时间：2013-01-24T21:40:33.773
> 
> 标签：c#, datetime

我正在尝试为一个查询创建一个时间段，其中包括世界上任何地方特定日期的所有时间。

我在获取基本“UTC”时间来进行计算时遇到问题。

我有：

```
var baseDate = new DateTime(2013, 1, 17);

var minDate = baseDate.AddHours(-12);
var maxDate = baseDate.AddHours(14); 
```

这是错误的，因为新的 DateTime 考虑了我的本地时区，而不是 2013 年 1 月 17 日的 12 AM UTC。

如何将 baseDate 设置为 2013 年 1 月 17 日凌晨 12 点 UTC？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T21:45:11.040

```
new DateTime(2013, 1, 17, 0,0,0, DateTimeKind.Utc) 
```

# ios - NSScanner 到 NSArray 输入计算

> ID：14511308
> 
> 赞同：0
> 
> 时间：2013-01-24T21:40:34.320
> 
> 标签：ios, objective-c

我希望能够将输入字符串标记为数组（或一些有效的方法，接受建议），这将使我能够轻松地解释和更改给定的输入。

例如，假设我们正在处理一个计算器，输入是

```
 55+63.7/7-(6+5)/9+(3-6.5)/(5-2) 
```

我需要创建一个数组或一系列令牌，就像

```
 {"55","+","63.7","/","7","-","(","6","+","5","... } 
```

最佳实践？我试过研究 parseKit 和 NSScanner，两者看起来都非常合理，但如果可能的话，我想要一个例子来缩短让这个东西正常工作所需的时间。

编辑：

基本上我正在寻找的是一组简单的“解析器”逻辑......

如果我要自己构建一个完整的解析器/扫描器，我可以使用类似的伪代码

```
 char c
 NSMutableString temp
 NSMutableArray parsed 
 For each c in input {
    if is_number(c)
       while is_number(c)
          add c to temp
       parsed addObject:temp
       reset temp
    if is_operation(c) //single character operations like +, -, /, 
       add c to temp 
       parsed addObject:temp
       reset temp
    if is_letter(c)
       while is_letter(c)
          add c to temp
       if is_keyword(temp) //like sin, cos, tan
           parsed addObject:temp
       else
           input misunderstood //not necessary, really, just useful
       reset temp
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-07T15:58:15.437

我想你是对的。您想要的顶级构建是一个简单的递归体面解析器。我刚刚创建了一个尽可能简单的 Bencoding 解析器。也许你可以得到一些想法

[https://github.com/mmick66/KDBencoding](https://github.com/mmick66/KDBencoding)

# python - 是否有提供电子邮件匿名化的 Django 或 Python 包？

> ID：14511309
> 
> 赞同：0
> 
> 时间：2013-01-24T21:40:43.243
> 
> 标签：python, django, email

我正在开发一个 django 应用程序，该应用程序的功能类似于 craigslist 在发布帖子时选择使用“匿名”选项隐藏他们的电子邮件时所做的事情。是否有一个 python 包已经做了类似的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T04:03:01.770

一个包将是矫枉过正。为什么不直接使用带有匿名标志的模型？

```
class Item(models.Model):
    user = models.ForeignKey(User)
    anonymous = models.BooleanField()

    def get_email(self):
        return "Anonymous" if self.anonymous else self.user.email 
```

# asp.net - 即使我不处理这些事件，我是否可以获得我的页面触发的所有 ASP.net 控制事件的日志？

> ID：14511315
> 
> 赞同：2
> 
> 时间：2013-01-24T21:41:05.117
> 
> 标签：asp.net, logging, webforms, trace

我有一个带有几个控件（ListViews、Buttons 等）的 asp.net 页面。

我想生成一个日志（可能输出到跟踪日志）：

1.  事件是由用户在回发时引起的（例如 Clicks、SelectedIndexChanging 等）
2.  不是由用户引起的事件，而是由每个控件触发的事件（例如 init）或由于编程操作（例如，由编程数据绑定引起的 ListView 的 ItemDataBound 事件）。

例如，即使我没有专门处理 ListView 的 ItemDataBound 事件，我也希望看到一个日志条目显示它已触发。

我知道这可能是一个非常长的列表（即每个控件触发许多事件并且每页有许多控件），但如果可能的话仍然希望看到它。

我希望这个是为了提供信息，也可能是为了调试目的，这样我就可以看到每个控件在做什么。它也可能给我一个处理事件的想法。我知道理论上 API 文档提供了这些信息，但我想要一个特定于我的 ASP.net 页面的交互式日志。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T23:08:29.107

您是否探索过 ASP.NET 的跟踪功能？这听起来与您想要的非常相似。概述在[这里](http://msdn.microsoft.com/en-us/library/bb386420%28v=vs.100%29.aspx)。

您可以选择在页面底部或在单独的跟踪查看器中查看跟踪数据。您也可以通过编程方式访问它。

现在，这只会列出触发的事件：通常，大多数 ASP.NET Web 控件的编写方式是，如果没有事件处理程序，则代码不会引发它。因此，您可能只会看到正在处理的事件。

# python - 使用 wxPython 使用位图时出现大量屏幕撕裂/闪烁

> ID：14511320
> 
> 赞同：0
> 
> 时间：2013-01-24T21:41:25.923
> 
> 标签：python, wxpython

我的应用程序中出现了相当疯狂的闪烁。正如您在下面看到的，如果我调整主窗口或其中一个子`SplitterWindow`窗框的大小，整个程序就会分崩离析。

![调整大小撕裂 001](../Images/ef406f69edfa4349e06c6e3c821462c5.png) ![调整大小撕裂002](../Images/348fa194e0e7b4e0a9685281540579db.png) ![在此处输入图像描述](../Images/cbc528d368f500f40d6a3f9d0a0c386f.png)

我怀疑这主要是由于我正在使用的背景图像。我正在使用[此处](http://www.blog.pythonlibrary.org/2010/03/18/wxpython-putting-a-background-image-on-a-panel/)找到的代码，我还将在下面粘贴。我想这是一个缓冲问题？但是我通读了缓冲部分并感到困惑。更不用说，我不明白绘制背景的代码到底在做什么，所以很难确定导致问题的原因。

```
def OnEraseBackground(self, evt):
    """
    Add a picture to the background
    """
    # yanked from ColourDB.py
    dc = evt.GetDC()

    if not dc:
        dc = wx.ClientDC(self)
        rect = self.GetUpdateRegion().GetBox()
        dc.SetClippingRect(rect)
    dc.Clear()
    bmp = wx.Bitmap("butterfly.jpg")
    dc.DrawBitmap(bmp, 0, 0) 
```

有谁知道如何降低 wxpython 应用程序中的闪烁率？

# algorithm - 适当的分区计数算法的解释？

> ID：14511322
> 
> 赞同：6
> 
> 时间：2013-01-24T21:41:27.990
> 
> 标签：algorithm, math, combinatorics, partition-problem

我一直在解决一些算法编程问题，并且有一个问题。问题与此问题中引用的问题相同：[USACO: Subsets (Inefficient)](https://stackoverflow.com/questions/6447959/usaco-subsets-inefficient)

我能够编写一些对于高 N 来说太慢的（非动态）解决方案。不得不作弊并在线查找一些解决方案。事实证明，快速算法非常简单，但即使知道答案，我仍然看不出如何从问题中得到答案。我可以看到等和子集形成的模式，但我看不到这些模式与算法解决方案之间的联系。

问题（上面的链接）是：

> 给定一组从 1 到 N (1 <= N <= 39) 的连续整数，有多少种方法可以将该集合划分为两个总和相同的子集？例如，{1,2,3} 可以以一种方式分区：{1,2} {3}。

对于较大的集合，答案要么是 0（当 N*(N+1)/2 为奇数时），要么由以下简单算法给出：

```
 arr = array of int with (N*(N+1)/4)+1 elements
  arr[0]=1  // all other elements initialized to 0
  for i = 1 to N
    for j = N*(N+1) / 4 downto i
      add arr[j-i] to arr[j]
  subsetpaircount = arr[N*(N+1)/4] / 2 
```

再一次，我可以看到算法是如何工作的，我什至插入了打印语句，所以我可以“观察”它是如何工作的。我只是看不出算法的操作如何与生成两组分区的不同方式的模式联系起来。

链接问题中的回答可能是相关的，但我也无法连接它是如何工作的：“这与在多项式 (x^1+1/x)(x) 中找到系数 x^0 项相同^2+1/x^2)...(x^n+1/x^n)..."

任何人都可以为我澄清联系，或者向我指出一些解释这个特定问题的参考资料吗？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T23:09:26.237

如果该集合`S = {1,...,N}`被划分为两个总和相等的子集，则该总和必须是 的总和的一半`S`；的总和`S`是`N(N+1)/2`所以分区中每个子集的总和必须是`N(N+1)/4`。它也必须是整数，因此`N(N+1)/2`必须是偶数。

所以问题归结为找到总和为 的 S 的子集的数量`N(N+1)/4`。分区的总数正好是这个数字的一​​半，因为每个分区包含两个这样的子集，并且没有两个分区共享一个子集。

这应该是显而易见的。

现在，让我们列出任何和任何集合的`S`总和的子集。任何这样的子集都必须有一个最大值，它必须是 的一个元素。最大值必须是 的最大元素，或者必须小于 的最大元素。这两组子集是不同的，所以我们可以分别列举出来。我们称 为 的最大元素。`k``k``S``S``S``S``S` `S[max]`

第二组很简单：它只是总和为的子集。我们可以通过递归调用子集列表器来找到它们。但是第一组几乎一样简单：组中的每个集合都包括，其其余元素是一些集合，其中加起来为，我们可以再次递归列出。为了完成递归，我们注意到 if是空集，那么 if ，恰好有一个合格子集（空集本身），如果 k 不为 0，则不存在合格子集。每次递归都会从 中删除一个元素，因此最终必须达到终止条件。`S - { S[max] }``k``S[max]``S - { S[max] }``k - S[max]``S``k = 0``S`

应该清楚，`S`上述递归函数将使用的子集只是从`1`to的数字，因此我们可以完全摆脱，并将递归编写如下：`S[max]``S`

`Subsets(min, max, k) =
  Subsets(min, max - 1, k)
  ⋃ { {max, P} | P ∈ Subsets(min, max - 1, k - max) }` 

但是我们只想要分区数的计数，所以我们可以稍微简化一下：

`Count_Subsets(min, max, k) =
  Count_Subsets(min, max - 1, k)
  + Count_Subsets(min, max - 1, k - max)` 

我们需要通过添加结束条件来完成递归：

`If min > max, Count_Subsets(min, max, k) = 1 if k = 0; otherwise 0`

（事实上​​，很容易证明递归意味着`1`当 k 递减到`0`并且`0`如果`k`小于时该值将是`0`，因此我们可以使终止条件更早发生。）

That gives us the simple recursion for the count. But since it calls itself twice, it would be better to work backwards ("dynamic programming"). We need to compute `Count_Subsets(1, N, N*(N+1)/4)`, which will require us to compute values of `Count_Subsets(1, max, k)` for all values of max from 1 to N, and from all values of k from 0 to N*(N+1)/4\. We do that by starting with max = 0, and working up until we reach min = N. And that's precisely what your algorithm does; `i` is `max`, and the array is the set of values for k from 0 to `N(N+1)/4`.

By the way, as should be apparent from the above description, `a[j]` should be incremented by `a[j - i]`, not by `a[j - 1]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T23:04:10.040

我认为您的伪代码中可能有一个错误导致了混乱。我希望这条线

```
add arr[j-1] to arr[j] 
```

成为

```
add arr[j-i] to arr[j] 
```

假设是这种情况，那么考虑这个问题的方法是，在 i 上循环的每次迭代开始时，数组 arr[j] 包含选择整数 1,2 的子集的方法数， ...,i-1 使得所选整数的总和正好是 j。

开始时，i=1，因此子集的唯一选择是总和等于 1 的空子集。

这就是为什么 arr[0]=1（表示使用空子集得到总和为 0）而所有其他条目为 0（因为无法获得非零和）的原因。

从那时起，每次迭代都考虑将数字 i 添加到子集中。获得总和 j 的方法的数量取决于是否包含 i。

如果 i 不包括在内，那么我们有与以前相同数量的方式（即 arr[j]）。

如果包含 i，那么为了得到包含 i 的 j 的总和，我们必须将 i 添加到 1,..,i-1 的所有子集，这些子集的总和为 ji。按照设计，如果我们查看索引 ji，我们的数组正好包含这个数字。

所以得到j和的方法总数变成arr[j]+arr[ji]。

当 i 循环完成时，arr 会为您提供选择子集并获得所需总和的方法的数量。我们知道 1,2,..,n 的总和是 n*(n-1)/2，所以如果我们计算有多少子集达到该值的一半，那么我们将分区计算为相等的总和。

实际上，这多算了 2 倍，因为它将 {1,2}/{3] 和 {3}/{1,2} 计为单独的解决方案，因此最终答案除以 2。

# php - 在 Wordpress 的数组中存储动态数组

> ID：14511333
> 
> 赞同：0
> 
> 时间：2013-01-24T21:42:09.050
> 
> 标签：php, arrays, wordpress

所以我有一个自定义元框，我试图通过它来提取动态内容。我需要能够遍历一些帖子，拉取该信息，然后将其存储到一个数组中，然后将这些数组放在下面显示的选项数组中。

这是我到目前为止的地方..

```
array(
        'label' => 'Overseeing Pastor',
        'id'    => $prefix.'pastor',
        'type'  => 'select',
        'options' => array (
            $args = array('post_type' => 'employee', 'position' => 'pastor');   
            $pastorList = new WP_Query($args); while ($pastorList->have_posts()) : $pastorList->the_post();
                array (
                    'label' => get_the_title(),
                    'value' => get_the_ID()
                ),
            endwhile; wp_reset_postdata();
        )
), 
```

选项部分是我需要帮助的。我知道这显然行不通。有没有办法将数组存储为其他地方的变量，然后在选项数组中调用它？感谢任何帮助，我正在把头发扯掉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T21:48:59.213

像这样的东西？

```
$options = array();
$pastors = get_posts($args);

foreach ($pastors as $post) {
    $options[] = array(
        'label' => $post->post_title,
        'value' => $post->ID,
    );
} 
```

还是这样？

```
foreach ($pastors as $post) {
    $options[$post->post_title] = $post->ID;
} 
```

# config - 配置文件的rpm升级处理

> ID：14511334
> 
> 赞同：20
> 
> 时间：2013-01-24T21:42:09.973
> 
> 标签：config, upgrade, rpm

我正在使用 rpm -upgrade 命令并注意到 rpm 有不同的方式来处理修改后的配置文件，因此它不会在升级过程中丢失。据我了解，如果修改了配置文件并使用 rpm -U 升级了软件包，则 rpm 会将原始属性文件重命名为 {file}.rpmsave 并使用原始文件名 {file} 安装新配置文件。

但是，当我尝试使用我创建的包运行 rpm -U 时，我实际看到的是原始配置文件被删除，新配置文件被重命名为 {file}.rpmsave。这是预期的行为吗？在我的安装脚本中，我还使用“sed”修改了配置文件中的一些文本。这会干扰 rpm 在升级期间处理配置文件的方式吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-24T23:50:12.723

这是预期的行为。如果您希望配置文件永远不会被覆盖（并移至 .rpmsave），请在 rpm .spec 文件中使用`%config(noreplace)`而不是，`%config`该文件将不会被替换。相反，来自 rpm 包的新文件将被创建为 .rpmnew，而其中的文件将被单独保留。

# python - 每次查询后重新打开sqlite数据库的效率

> ID：14511337
> 
> 赞同：12
> 
> 时间：2013-01-24T21:42:19.157
> 
> 标签：python, sqlite

我目前正在使用 tornado 中的 Web 服务器，但是在尝试同时访问数据库的不同代码位时遇到问题。

我通过简单地使用一个基本上可以做到这一点的查询功能来简化这一点（但稍微高级一些）：

```
def query(command, arguments = []):
    db = sqlite3.open("models/data.db")
    cursor = db.cursor()
    cursor.execute(command, arguments)
    result = cursor.findall()
    db.close()
    return result 
```

我只是想知道在每次查询后重新打开数据库的效率如何（我猜这是一个非常大的恒定时间操作，或者它会缓存一些东西吗？），以及是否有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-25T11:15:25.157

我正在添加自己的答案，因为我不同意当前接受的答案。它声明该操作不是线程安全的，但这是完全错误的[——SQLite 使用适合其当前平台的文件锁定](http://www.sqlite.org/lockingv3.html)来确保所有访问都符合[ACID](http://en.wikipedia.org/wiki/ACID)。

在 Unix 系统上，这将是`fcntl()`或`flock()`锁定，这是每个文件句柄的锁定。结果，每次建立新连接的代码总是会分配一个新的文件句柄，因此 SQLite 自己的锁定将防止数据库损坏。这样做的结果是，在 NFS 共享或类似设备上使用 SQLite 通常是个坏主意，因为这些通常不能提供特别可靠的锁定（不过，它确实取决于您的 NFS 实现）。

正如@abernert 已经在评论中指出的那样，[SQLite 存在线程问题](http://docs.python.org/2/library/sqlite3.html#multithreading)，但这与线程之间共享单个连接有关。正如他还提到的那样，这意味着如果您使用应用程序范围的池，如果第二个线程从池中拉出回收的连接，则会出现运行时错误。这些也是您在测试中可能没有注意到的那种恼人的错误（轻负载，可能只有一个线程在使用），但以后很容易引起头痛。Martijn Pieters 后来关于线程本地池的建议应该可以正常工作。

正如版本**3.3.1的**[SQLite FAQ](http://www.sqlite.org/faq.html#q6)中所述，只要线程不持有任何锁，在线程之间传递连接实际上是安全的 - 这是 SQLite 的作者添加的一个让步，尽管它对线程的使用持批评态度一般的。任何明智的连接池实现都将始终确保在替换池中的连接之前所有内容都已提交或回滚，因此实际上如果不是 Python 检查共享，应用程序全局池可能是安全的*，*我相信即使使用了更新版本的 SQLite，它仍然存在。当然，我的 Python 2.7.3 系统有一个报告**3.7.9**的模块，但它仍然抛出一个***`sqlite3``sqlite_version_info`**`RuntimeError`如果您从多个线程访问它。*****

 *****在任何情况下，当检查存在时，即使底层 SQLite 库支持，连接也无法有效地共享。

至于你原来的问题，每次创建一个新连接肯定比保持一个连接池效率低，但是已经提到这需要一个线程本地池，实现起来有点麻烦。创建与数据库的新连接的开销本质上是打开文件并读取标题以确保它是有效的 SQLite 文件。实际执行语句的开销更高，因为它需要查看并执行相当多的文件 I/O，因此大部分工作实际上被推迟到语句执行和/或提交。

然而，有趣的是，至少在 Linux 系统上，我查看过执行语句的代码会重复读取文件头的步骤——因此，打开一个新的连接并不会因为最初的读取而变得那么糟糕打开连接时，会将标头拉入系统的文件系统缓存。所以它归结为打开单个文件句柄的开销。

我还应该补充一点，如果您希望您的代码能够扩展到高并发，那么 SQLite 可能是一个糟糕的选择。正如[他们自己的网站所指出](http://www.sqlite.org/whentouse.html)的那样，它并不真正适合高并发，因为随着并发线程数量的增加，必须通过单个全局锁来压缩所有访问的性能开始受到影响。如果您为了方便而使用线程，那很好，但如果您真的期望高度并发，那么我会避免使用 SQLite。

简而言之，我认为你每次打开的方法实际上并没有那么糟糕。线程本地池可以提高性能吗？可能是。这种性能提升会很明显吗？在我看来，除非你看到相当高的连接率，而且那时你会有很多线程，所以你可能还是想离开 SQLite，因为它不能很好地处理并发。如果您决定使用一个，请确保它在将连接返回到池之前清理连接 - [SQLAlchemy](http://www.sqlalchemy.org/)具有一些[连接池](http://docs.sqlalchemy.org/en/latest/core/pooling.html)功能，即使您不希望所有 ORM 层都在顶部，您也可能会发现这些功能很有用。

**编辑**

正如相当合理地指出的那样，我应该附上真实的时间。这些来自功率相当低的 VPS：

```
>>> timeit.timeit("cur = conn.cursor(); cur.execute('UPDATE foo SET name=\"x\"
    WHERE id=3'); conn.commit()", setup="import sqlite3;
    conn = sqlite3.connect('./testdb')", number=100000)
5.733098030090332
>>> timeit.timeit("conn = sqlite3.connect('./testdb'); cur = conn.cursor();
    cur.execute('UPDATE foo SET name=\"x\" WHERE id=3'); conn.commit()",
    setup="import sqlite3", number=100000)
16.518677949905396 
```

您可以看到大约 3 倍的差异，这并不是微不足道的。但是，绝对时间仍然是亚毫秒，所以除非您对每个请求进行大量查询，否则可能还有其他地方需要首先优化。如果您进行大量查询，一个合理的折衷方案可能是每个请求建立一个新连接（但没有池的复杂性，每次都重新连接）。

对于读取（即SELECT），则每次连接的相对开销会更高，但挂钟时间的绝对开销应该是一致的。

正如在这个问题的其他地方已经讨论过的那样，您应该使用真实的查询进行测试，我只是想记录我为得出结论所做的工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T23:49:55.227

如果您想知道某件事的效率有多低，请编写一个测试并自己看看。

一旦我修复了错误以使您的示例首先工作，并编写代码来创建一个测试用例来运行它，弄清楚如何计时它[`timeit`](http://docs.python.org/2/library/timeit.html)就像通常一样微不足道。

见[http://pastebin.com/rd39vkVa](http://pastebin.com/rd39vkVa)

那么，当你运行它时会发生什么？

```
$ python2.7 sqlite_test.py 10000
reopen: 2.02089715004
reuse:  0.278793811798
$ python3.3 sqlite_test.py 10000
reopen: 1.8329595914110541
reuse:  0.2124928394332528
$ pypy sqlite_test.py 10000
reopen: 3.87628388405
reuse:  0.760829925537 
```

因此，打开数据库所花费的时间大约是对几乎没有返回任何内容的空表运行简单查询的时间的 4 到 8 倍。这是你最坏的情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T21:50:39.820

这是非常低效的，并且启动时不是线程安全的。

改用一个不错的连接池库。[`sqlalchemy`](http://docs.sqlalchemy.org/en/rel_0_8/core/pooling.html)提供池和更多功能，或者为 sqlite 找到一个更轻量级的池。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-01T01:20:30.447

为什么不每隔 N 秒重新连接一次。在我的 30-40 行瓶子的 ajax 前瞻/数据库服务中，我每小时重新连接一次以获取更新，如果您需要处理实时数据，有更好的数据库适合：

```
t0 = time.time()
con = None
connect_interval_in_sec = 3600

def myconnect(dbfile=<path to dbfile>):
    try:
        mycon = sqlite3.connect(dbfile)
        cur = mycon.cursor()
        cur.execute('SELECT SQLITE_VERSION()')
        data = cur.fetchone()
    except sqlite3.Error as e:
        print("Error:{}".format(e.args[0]))
        sys.exit(1)
    return mycon 
```

在主循环中：

```
if con is None or time.time()-t0 > connect_interval_in_sec:
    con = myconnect()
    t0 = time.time()
<do your query stuff on con> 
```*****

# python - 查找字符串中第一个不重复的字符

> ID：14511340
> 
> 赞同：3
> 
> 时间：2013-01-24T21:42:22.630
> 
> 标签：python, algorithm

我阅读了一个工作面试问题，为以下内容编写了一些代码：

> 编写一个高效的函数来查找字符串中第一个不重复的字符。例如，“total”中第一个不重复的字符是“o”，“teeter”中第一个不重复的字符是“r”。讨论算法的效率。

我在 Python 中提出了这个解决方案；但是，我相信还有更漂亮的方法可以做到这一点。

```
word="googlethis"
dici={}

#build up dici with counts of characters
for a in word:
    try:
        if dici[a]:
            dici[a]+=1
    except:
        dici[a]=1

# build up dict singles for characters that just count 1 

singles={}
for i in dici:
    if dici[i]==1:
        singles[i]=word.index(i)

#get the minimum value

mini=min(singles.values())

#find out the character again iterating...

for zu,ui in singles.items():
    if ui==mini:
        print zu 
```

有没有更简洁有效的答案？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-24T21:46:06.800

```
In [1033]: def firstNonRep(word):
   ......:     c = collections.Counter(word)
   ......:     for char in word:
   ......:         if c[char] == 1:
   ......:             return char
   ......:         

In [1034]: word="googlethis"

In [1035]: firstNonRep(word)
Out[1035]: 'l' 
```

**编辑**：如果您想在不使用帮助器的情况下实现相同的功能，例如`Counter`：

```
def firstNonRep(word):
    count = {}
    for c in word:
        if c not in count:
            count[c] = 0
        count[c] += 1
    for c in word:
        if count[c] == 1:
            return c 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T21:45:29.497

```
sorted(word,key=lambda x:(word.count(x),word.index(x)) )[0] 
```

我认为还是 DSM 的也同意

```
next(c for c in word if word.count(c) == 1) 
```

这稍微更有效

```
>>> word = "teeter"
>>> sorted(word,key=lambda x:(word.count(x),word.index(x)) )[0]
'r'
>>> word = "teetertotter"
>>> sorted(word,key=lambda x:(word.count(x),word.index(x)) )[0]
'o'
>>> word = "teetertotterx"
>>> sorted(word,key=lambda x:(word.count(x),word.index(x)) )[0]
'o' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-24T21:47:34.767

```
from collections import defaultdict
word="googlethis"
dici=defaultdict(int)

#build up dici with counts of characters
for a in word:
    if dici[a]:
        dici[a]+=1
for a in word:
    if didic[a] < 2:
        return a 
```

那不行吗？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-03-04T19:19:00.597

更优雅的方式

```
def NotRepeatingCharacter(s):
    for c in s:
        if s.find(c) == s.rfind(c):
            return c
    return '_' 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-05-08T06:51:17.837

问题：字符串中的第一个非重复字符

方法一：制作计数数组

```
a = "GGGiniiiiGinaaaPrrrottiijayi"
count = [0]*256
for ch in a: count[ord(ch)] +=1
for ch in a :
    if( count[ord(ch)] == 1 ):
        print(ch)
        break 
```

方法2：列表理解

```
# 1st  non repeating character
pal = [x for x in a if a.count(x) == 1][0]
print(pal) 
```

方法三：字典

```
d={}
for ch in a: d[ch] = d.get(ch,0)+1
aa = sorted(d.items(), key = lambda ch  :ch[1])[0][0]
print(aa) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-24T23:11:36.750

我的解决方案。我无法说出它的效率。我认为它在 n^2 时间内运行。

```
>>> def fst_nr(s):
...     collection = []
...     for i in range(len(s)):
...             if not s[i] in collection and not s[i] in s[i+1:]:
...                     return s[i]
...             else:
...                     collection+=[s[i]]
... 
>>> fst_nr("teeter")
'r'
>>> fst_nr("floccinaucinihilipilification")
'u'
>>> fst_nr("floccinacinihilipilification")
'h'
>>> fst_nr("floccinaciniilipilification")
'p'
>>> fst_nr("floccinaciniiliilification")
't'
>>> fst_nr("floccinaciniiliilificaion")
>>> 
```

对一个不起眼的 Stack 菜鸟有什么建议吗？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-01-12T21:43:58.653

我认为最坏的情况是 O(n^2) 但对我来说很清楚：

```
def firstNonRep(word):
    """the first non-repeating character in a string: "ABCA" -> B """
    for (i, c) in enumerate(word):
        residual = word[i+1:]
        if not c in residual:
            return c 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-02-09T20:40:29.483

Python; O(N+N) 我认为。

```
def find_first_non_occuring(test_str):
    results = {}
    for letter in test_str:
        if letter in results.keys():
            if results[letter] == 1:
                results[letter] = results[letter]+1
        else:
            results[letter] = 1 

    for letter in test_str:
        if results[letter] is 1:
            return letter
test_str = 'afixuboshafe fafd weagdgdg'
print find_first_non_occuring(test_str) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-12-29T20:05:39.393

三行python代码即可得到解决方案：

```
word="googlethis"
processedList = [x for x in word if word.count(x)==1]
print("First non-repeated character is: " +processedList[0]) 
```

或者，

```
word="googlethis"
print([x for x in word if word.count(x)==1][0]) 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-01-12T17:08:13.707

以下代码仅遍历字符串一次。这是一个简单易行的问题解决方案，但同时空间复杂性受到影响。

```
def firstNonRepeating(a):
    inarr = []
    outarr = []

    for i in a:
        #print i
        if not i in inarr:
            inarr.append(i)
            outarr.append(i)
        elif i in outarr:
            outarr.remove(i)
        else:
            continue
    return outarr[0]

a = firstNonRepeating(“Your String”)
print a 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-09-25T06:52:46.717

```
def firstnonrecur(word):

    for c in word:
        if word.count(c) == 1:
            print(c)
            break

firstnonrecur('google') 
```

这个怎么样？

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-10-30T03:30:20.447

由于我们需要第一个不重复的字符，最好使用集合中的 OrderedDict，因为 dict 不保证键的顺序

```
from collections import OrderedDict
dict_values = OrderedDict()
string = "abcdcd"

for char in string:
   if char in dict_values:
   dict_values[char] += 1
else:
    dict_values[char] = 1

for key,value in dict_values.items():
    if value == 1:
       print ("First non repeated character is %s"%key)
       break
    else:
       pass 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-11-27T11:10:08.667

```
def non_repeating(given_string):
    try:
        item = [x for x in given_string[:] if given_string[:].count(x) == 1][0]
    except:
        return None
    else:
        return item

# NOTE: The following input values will be used for testing your solution.
print non_repeating("abcab") # should return 'c'
print non_repeating("abab") # should return None
print non_repeating("aabbbc") # should return 'c'
print non_repeating("aabbdbc") # should return 'd' 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-12-15T10:31:25.827

def firstNotRepeatingCharacter(s):

    对于 s 中的 c：

        如果 s.find(c) == s.rfind(c)：

            返回 c

    返回 '​​_'

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-08-28T16:32:20.477

```
input_str = "interesting"
#input_str = "aabbcc"
#input_str = "aaaapaabbcccq"

def firstNonRepeating(param):
    counts = {}        
    for i in range(0, len(param)):

    # Store count and index repectively
        if param[i] in counts:
            counts[param[i]][0] += 1
        else:
            counts[param[i]] = [1, i]

    result_index = len(param) - 1
    for x in counts:
        if counts[x][0] == 1 and result_index > counts[x][1]:
            result_index = counts[x][1]
    return result_index

result_index = firstNonRepeating(input_str)
if result_index == len(input_str)-1:
    print("no such character found")
else:
    print("first non repeating charater found: " + input_str[result_index]) 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-02-07T15:29:14.467

```
# I came up with another solution but not efficient comment?
str1 = "awbkkzafrocfbvwcqbb"
list1 = []
count = 0
newlen = len(str1)
find = False

def myfun(count, str1, list1, newlen):

    for i in range(count, newlen):

        if i == 0:

            list1.append(str1[i])

        else:
            if str1[i] in list1:
                str1 = str1.translate({ord(str1[i]): None})
                print(str1)
                newlen = len(str1)
                count =0
                i = count
                list1.pop()
                myfun(count,str1,list1,newlen)
            else:
                pass

    if str1.find(list1[0], 1, len(str1)) != -1 :
        pass
    else:
        print(list1[0]+" is your first non repeating character")
        exit()

myfun(count, str1, list1, newlen) 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2020-03-10T11:28:08.407

简单的Python3解决方案

```
def findFirstUniqueChar(s):
    d = {}
    for c in s:
        if c in d:
            d[c] += 1
        else:
            d[c] = 1

    for c in s:
        if d[c] == 1:
            return s.index(c)
    return -1 
```

* * *

## 回答 #18

> 赞同：-1
> 
> 时间：2014-04-08T01:37:43.787

这里的想法是使用一些默认值初始化一个数组，例如 0。当您遇到字符串中的特定字符时，您只需使用您最初定义的数组中该字符的 ASCII 值来增加计数器。

在传递字符串时，您必须更新数组中字符的相应计数器。现在需要再遍历一次数组，并检查是否有任何等于 1 的值，如果有的话 - 只需将该字符作为给定字符串中的第一个非重复字符返回。

 `````
class FindFirstUniqueChar
{
    private static char ReturnFirstUniqueChar(string sampleString)
    { 
        // Initialize a sample char array and convert your string to char array.           
        char[] samplechar = sampleString.ToCharArray();

        // The default array will have all value initialized as 0 - it's an int array. 
        int[] charArray = new int[256];

        // Go through the loop and update the counter in respective value of the array 
        for (int i = 0; i < samplechar.Length; i++)
        {
          charArray[samplechar[i]] = charArray[samplechar[i]] + 1;
        }

        // One more pass - which will provide you the first non-repeated char.
        for (int i = 0; i < charArray.Length; i++)
        {

            if (charArray[samplechar[i]] == 1)
            {
                return samplechar[i];
            }
        }

        // Code should not reach here. If it returns '\0'
        // that means there was no non-repeated char in the given string. 
        return '\0';
    }

    static void Main(string[] args)
    {
        Console.WriteLine("The First Unique char in given String is: " +                         
                          ReturnFirstUniqueChar("ABCA"));
        Console.ReadLine();
    }
} 
````  `我只提供了一个示例代码。它不包括错误检查和边缘情况。对于那些有兴趣了解给定算法的时间复杂度的人 - 它是 O(N) + O(N) = O(2N)，几乎是 O(N)。它确实使用了额外的内存空间。欢迎您的反馈。

* * *

## 回答 #19

> 赞同：-1
> 
> 时间：2016-08-16T05:40:15.743

在 Java 中，1) 创建字符计数哈希图。对于每个字符，如果字符中没有存储值，则将其设置为 1。否则将字符的值增加 1。

2）然后我扫描每个字符的字符串。如果 hashmap 中的计数为 1，则返回字符。如果没有字符计数为 1，则返回 null。

```
package com.abc.ridhi;
import java.util.HashMap;
import java.util.Scanner;

public class FirstNonRepeated {

    public static void main(String[] args) {
        System.out.println(" Please enter the input string :");
        Scanner in = new Scanner(System.in);
        String s = in.nextLine();
        char c = firstNonRepeatedCharacter(s);
        System.out.println("The first non repeated character is :  " + c);
    }

    public static Character firstNonRepeatedCharacter(String str) {
    HashMap<Character, Integer> map1 = new HashMap<Character, Integer>();
        int i, length;
        Character c;
        length = str.length(); 
        // Scan string and build hashmap
        for (i = 0; i < length; i++) {
            c = str.charAt(i);
            if (map1.containsKey(c)) {
                // increment count corresponding to c
                map1.put(c, map1.get(c) + 1);
            } else {
                map1.put(c, 1);
            }
        }
        // Search map in order of string str

        for (i = 0; i < length; i++) {
            c = str.charAt(i);
            if (map1.get(c) == 1){
                return c;
        }
        }
        return null;
    }
} 
```

* * *

## 回答 #20

> 赞同：-1
> 
> 时间：2017-12-29T16:12:04.587

```
str = "aabcbdefgh"
lst = list(str)

for i in [(item, lst.count(item)) for item in set(lst)]:
    if i[1] == 1:
        print i[0], 
```

* * *

## 回答 #21

> 赞同：-1
> 
> 时间：2018-04-08T09:27:54.147

```
enter code here 
```

公共类 FirstRepeatingAndNonRepeatingElements {

```
/**
 * 
 * @param elements
 * @return
 */
private int firstRepeatedElement(int[] elements) {
    int firstRepeatedElement = -1;
    if(elements!=null && elements.length>0) {
        Set<Integer> setOfElements = new HashSet<>();
        for(int i=elements.length-1;i>=0;i--){
            if(setOfElements.contains(elements[i])) {
                firstRepeatedElement = elements[i];
            } else {
                setOfElements.add(elements[i]);
            }
        }
    }
    return firstRepeatedElement;
}

private int  firstNonRepeatedHashSet(int [] elements)  {
    int firstNonRepatedElement = -1;
    Set<Integer> hashOfElements = new HashSet<>();
    if(elements!=null && elements.length>0) {
        for(int i=elements.length-1;i>=0;i--) {
            if(!hashOfElements.contains(elements[i])) {
                hashOfElements.add(elements[i]);
                firstNonRepatedElement = elements[i];
            }
        }
    }
    return firstNonRepatedElement;
}

/**
 * @param args
 */
public static void main(String[] args) {
    FirstRepeatingAndNonRepeatingElements firstNonRepeatingElement = 
            new FirstRepeatingAndNonRepeatingElements();
    int[] input = new int[]{1,5,3,4,3,5,6,1};

    int firstRepeatedElement = firstNonRepeatingElement.
            firstRepeatedElement(input);

    System.out.println(" The First  Repating Element is "
            + firstRepeatedElement);

    int firstNonRepeatedElement = firstNonRepeatingElement.
            firstNonRepeatedHashSet(input);

    System.out.println(" The First Non Repating Element is "
            + firstNonRepeatedElement);

} 
```

* * *

## 回答 #22

> 赞同：-1
> 
> 时间：2021-01-10T06:07:26.600

```
import java.util.LinkedHashMap;

public class FirstNonRepeatedCharacter {

    public static void main(String[] args) {

        String str = "sasasasafng";

        firstNonRepeatedCharacterUsingCollection(str);

    }

    private static void firstNonRepeatedCharacterUsingCollection(String str) {

        LinkedHashMap<Character, Integer> hm = new LinkedHashMap<Character, Integer>();

        for (int i = 0; i < str.length(); i++) {
            char ch = str.charAt(i);
            if (hm.containsKey(ch)) {
                hm.put(ch, hm.get(ch) + 1);
            } else {
                hm.put(ch, 1);
            }
        }

        for (Character c : hm.keySet()) {
            if (hm.get(c) == 1) {
                System.out.println(c);
                return;
            }
        }

    }
} 
```

通过使用 LinkedHashset，我们可以获得插入顺序。``

# binary - 对于通过原点的决策平面，权重向量始终指向正侧

> ID：14511341
> 
> 赞同：0
> 
> 时间：2013-01-24T21:42:23.883
> 
> 标签：binary, classification

我有一个决策边界（例如）：

```
5 x1 + x2 - 3 = 0 
```

权重向量为`[5 1]`。要确定该平面中的某个点是位于边界的正侧还是负侧，我们可以将该点代入方程中并检查它是否为正。但是是否可以从数学上证明，如果决策平面通过原点，那么权向量总是指向正侧？

我搜索了几个站点并找到了一个（[http://www.cs.utah.edu/~piyush/teaching/8-9-print.pdf](http://www.cs.utah.edu/~piyush/teaching/8-9-print.pdf)），据说权重向量总是指向积极的一面，但是没有找到数学证明。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-02-25T05:39:42.103

迟到了，但也许可以帮助别人。确实，您会发现许多消息来源说它“必须”是积极的一面，但它们从未真正说明原因。为了证明这一点，必须有一些约束，而不是任意向量空间中的任意超平面。我敢肯定，因为您在谈论决策边界，所以您处于参数空间的上下文中，例如感知器或类似的东西。参数空间是唯一的，因为超平面总是经过原点。为什么？因为偏置项本身就是参数空间中的一个维度。它不再是一个恒定的偏移量。在参数空间中，我们有一个独特的超平面构造。超平面维度的系数是向量 x 中的特征，包括偏置维度。

w*x + w0 = 0

我想举一个二维的例子来说明一个概念，然后快速跳回到任意维度更一般。对于二维示例，您将拥有 w0 与 w1。

假设你有两个特征：

x1 = 2

x2 = -1

如果要在参数空间中绘制这些特征，则将它们构造为 [x 1]，结果为：

x1 -> [2 1]

x2 -> [-1 1]

这将导致参数空间（权重空间）中的超平面为：

x1 -> (2)w1 + (1)w0 = 0

x2 -> (-1)w1 + (1)w0 = 0

在我们的二维示例中，我们将 w0 和 w1 视为我们的传统 y 与 x 并求解“y”。

[在参数空间中绘制的参数超平面](https://i.stack.imgur.com/lW0d5.png)

现在，您可以看到其中一条线的参数向量（权重向量）点

[带参数向量点的参数超平面](https://i.stack.imgur.com/k5Rqs.png)

可以看到，超平面的正面和负面都被标记了。所以想想是什么造就了积极和消极的一面。嗯，这是关于 w0 的。如果 w0 的值大于超平面上 w0 的值（反之为负），我们就说它是超平面的正面。现在，要理解的另一个关键点是所有参数点都必须经过 w0=1 这条线。这可以在下面看到：

[具有参数向量点的参数超平面](https://i.stack.imgur.com/efbPj.png)

现在，我们做一个直观的陈述，因为我们知道正面或负面取决于 w0。将 x 视为任意大小的特征向量。“如果参数向量 x 的 w0 的值大于在 x 位置评估的超平面上的 w0 的值，那么我们就在超平面的正侧。” 请记住，位置 x 处的 w0 始终为 1。那么，w0 在超平面上的值是多少？

w *x + w0 = 0 -> w0 = -w* x

超平面上 w0 的值为 -w*x。现在，如果我们想在向量 x 处计算超平面上 w0 的值，我们有

w0 = -x*x

-x*x = -<x, x> = -||x||^2

我们知道内积，等价的范数平方必须是正数或零。因此，负数乘以该值必须是负数或零。因此，当在位置 x 的超平面上进行评估时，w0 <= 0。请记住，在同一个位置 x，而不是在超平面上，参数向量告诉我们 w0 = 1。由于 1 总是大于负数或零，所以 w0 的参数向量位置总是高于关于w0。这个证明被限制在通过原点的决策边界上，但保证决策边界通过参数空间中的原点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T02:08:29.170

我不熟悉这些术语，但听起来你只是在问，如果你有一个形式为 ax + by = 0 的方程，是否为 [xy] 插入 [ab] 是否总是给出一个正数？当然，因为 aa + bb 只是实数平方的总和，而实数平方总是给出非负数。如果您的系数 a, b 必须为非零，则至少有一个，否则您并没有真正定义边界。

编辑：由 ax + by + c = 0 形式的方程定义的“边界”当且仅当 c = 0 时才通过原点（只需插入 x = y = 0 即可查看为什么会这样），其中这就是为什么我只考虑 ax + by = 0 形式的方程，而不是 ax + by + c = 0。OP 提到的例子有 c = -3。

# model-view-controller - 模型中字段的最佳实践

> ID：14511343
> 
> 赞同：2
> 
> 时间：2013-01-24T21:42:30.207
> 
> 标签：model-view-controller, model, controller, field

我想知道是否有最佳实践来设置模型将检索的字段。在这两种不同的方法之间（伪代码）：

1.  在控制器中定义值并将它们发送到模型。

    ```
    Controller::get()
    {
        $fields = ['id_user', 'name', 'etc'];
        Model::get_by_email($email, $fields);
    }

    Model::get_by_email($email, array $fields)
    {
        return fetch('SELECT $fields FROM user');
    } 
    ```

2.  模型方法定义要检索的字段。

    ```
    Controller::get()
    {
        Model::get_by_email($email);
    }

    Model::get_by_email($email)
    {
        $fields = [self::ID_USER, self::NAME, self::ETC);
        return fetch('SELECT $fields FROM user');
    } 
    ```

每种方法都有不同的优点和缺点。你怎么看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T21:47:18.017

在我见过的大多数应用程序中，都没有使用任何方法，它是这样的：

```
Controller::get()
{
    Model::get_by_email($email);
}

Model::get_by_email($email)
{
    return fetch('SELECT user, name, etc FROM user where email=$email');
} 
```

因此，选定的字段在查询中是硬编码的。它要么检索表中的每一列（某种“通用”请求），要么每个服务都有一个特定的请求来检索它需要的内容。

根据您使用的堆栈，您还将在控制器和模型之间有一个“服务”层（例如，在 Java 应用程序中）。IMO 控制器不应该要求他们想要什么，他们只是假设服务/模型给了他们他们需要的东西。由于它是底层的某种形式的“客户端”，它不应该提出任何要求，而是使用提供的内容。

您的第二种方法与我所描述的非常相似，但对我来说，`$fields`数组似乎没有必要，因为正如您所描述的，它的内容是静态的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T06:19:49.633

这两种方法都是错误的，因为在这两种情况下，您都将域逻辑或存储逻辑暴露给表示层。

另外，你到底是从哪里读到需要控制器来检索数据的 MVC 描述的？控制器的唯一职责是决定如何将用户输入传递给模型层（以及在少数情况下传递给当前视图）。

# c# - 该属性尚未在实体框架中的类型 XXX 异常上声明

> ID：14511352
> 
> 赞同：1
> 
> 时间：2013-01-24T21:43:08.063
> 
> 标签：c#, entity-framework, exception-handling, enums

我有一个文件 Unit.cs

```
public class Unit
{
    public UnitType UnitTypeState {get;set;}
}

public enum UnitType
{
    Folder = 0,
    Teststeps = 1,
} 
```

当我将枚举定义放入像 UnitDTO 这样的另一个类时，我得到了这个异常：

> 属性“UnitTypeState”不是类型“Unit”的声明属性。使用 Ignore 方法或 NotMappedAttribute 数据注释验证该属性是否已从模型中显式排除。确保它是有效的原始属性。

好吧，那不是真的，呵呵，属性 UnitTypeState 是 Unit 类中的已声明属性。

如何在不将枚举移回 Unit 类的情况下解决这个问题？

**更新**

我仍然对该错误进行了一些研究：

“在创建模型时不能使用上下文。”

奇怪的是，我在作为具有 UnitTyeState 属性的实体的父实体的实体上得到了这个异常？！

```
using (var context = new ITMS.DataAccess.ITMSContext())
{
   return context.Templates.ToList();
} 
```

所以似乎创建了模板实体然后抛出了这个异常？或者 EF 的行为是这样的：在所有每个实体或整个模型的第一次数据库访问中创建？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T23:17:22.650

EF 当前不支持嵌套类型 - 适用于 StructuralType（即实体和复杂类型）和枚举类型。

添加指向与此问题完全相关的 EF 工作项的链接：http: [//entityframework.codeplex.com/workitem/119](http://entityframework.codeplex.com/workitem/119)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T03:47:04.717

尝试使用以下内容，也许枚举只需要从原语派生即可工作？

```
public enum UnitType : int
{
    Folder = 0,
    Teststeps = 1
} 
```

# cloudbees - CloudBees Jenkins 中的模板菜单选项在哪里？

> ID：14511359
> 
> 赞同：0
> 
> 时间：2013-01-24T21:43:33.383
> 
> 标签：cloudbees

我按照这里的说明进行操作：http: [//www.cloudbees.com/jenkins-enterprise-by-cloudbees-download.cb](http://www.cloudbees.com/jenkins-enterprise-by-cloudbees-download.cb)用于 RH6 安装，我看到模板项目插件安装在 Manage Jenkins->Manage Plugins->Installed詹金斯的页面。为什么我在左窗格中没有看到模板选项？我错过了什么？

例如，我不能按照这里的教程[http://jenkins-enterprise.cloudbees.com/docs/user-guide-bundle/template.html#](http://jenkins-enterprise.cloudbees.com/docs/user-guide-bundle/template.html#)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T22:03:05.593

解决方案：您毕竟没有运行 Jenkins Enterprise。

# android - Android、Eclipse 和 SVN，我怎样才能让他们都满意？

> ID：14511360
> 
> 赞同：2
> 
> 时间：2013-01-24T21:43:36.690
> 
> 标签：android, eclipse, svn

我正在与其他团队一起创建一个 Android 应用程序。通常我使用netbeans，我从来没有遇到过netbeans 或svn 的问题。但是由于eclipse有android插件，所以我们使用的是eclipse。

我需要做的是签入我当前的一个 android 应用程序，以便我的团队成员都可以签出它（作为一个 android 项目）并继续在他们自己的计算机上开发和测试。

当前，当我们从 SVN 签出项目时，eclipse 无法将该项目识别为 android 项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T00:04:50.653

我最近也遇到了这个问题。问题是“.project”文件没有在SVN中导入；因为这个 Eclipse 将在您从 SVN 签出项目时添加一个新的“.project”文件；问题的另一部分是设计不佳的“来自现有代码的 Android 项目”选项。

解决方案：
- 从您的工作副本中删除 .project 文件
- [“可选”] 将项目文件夹移至其他位置（因为如果您尝试在同一位置创建项目，“来自现有代码的 Android 项目”选项将不起作用）
- 创建新项目并选择“现有代码中的Android项目”

创建项目后，将新生成的 .project 文件提交到 SVN；这样其他人就可以简单地单击“签出”并开始工作:)

注意：确保同时提交其他 android 相关文件（例如 project.properties）

# asp.net - 虚拟主机有奇怪的设置，需要替代会话状态建议

> ID：14511363
> 
> 赞同：2
> 
> 时间：2013-01-24T21:43:50.257
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4, session-state, sql-session-state

我正在为一个体育俱乐部建立一个网站。俱乐部对将他们的主机转移到不同的网络主机不感兴趣，所以我坚持使用当前主机。我将新的 Web 应用程序部署到主机上，但经过几个小时的测试，很明显在登录和会话状态方面有些奇怪。

每当我闲置超过 10 分钟时，我的 MVC 验证令牌就会突然停止解密。我进入 IIS 并将机器密钥设置为静态值，这个问题就消失了，但很明显他们将 ASP.NET 空闲超时设置设置为 10 分钟。这意味着如果站点上没有活动，每 10 分钟 InProc 会话数据就会被销毁。我向主机提交了支持票，但他们不愿意在我的应用程序池中为我更改该设置，并指出“目前无法在服务器上更改该设置，因为增加这可能会影响性能关闭（原文如此）服务器”。

俱乐部有点小，最多有 500 名俱乐部成员，很少有成员会经常访问该网站，所以我几乎可以保证每天会发生多次 10 分钟超时，而且我有会话超时设置为 60 分钟，因此如果站点的唯一用户在给定时间空闲 10 分钟，则让站点清除会话不是一个好主意。

我的第一个想法是使用 SQL 会话存储。我从未使用过它，但我知道它存在。但是，存在的一个警告是我们被限制为 350mb 的 SQL 存储。虽然这可能超出了该站点现在的需要，但我想我们可能会接近达到极限。我预计不会在会话中存储太多数据，仅在与贝宝和购物车交互时存储少量数据（可能这里或那里也有系统消息），所以也许这不是一个大问题？

我们*确实*有无限的磁盘空间，所以我想到的另一种选择可能是编写一个自定义的基于磁盘的会话存储解决方案。有什么理由这可能不是比 SQL 更好的主意吗？

最后，我有一个完全离谱的“天哪，我不敢相信我正在考虑这样做”的想法，即定期在每个页面上进行 AJAX 调用（例如，每 8 分钟一次）“ ping" 一个非缓存的轻量级 MVC 操作，只是为了让服务器保持活动状态。我认为，这可能会起作用，除了某人的一种情况：

1.  转到购物页面并创建购物车
2.  被转移到贝宝
3.  无论出于何种原因在贝宝屏幕上花费 10 多分钟，而网站上没有其他人
4.  回来看到他们的购物车消失了。

在这种情况下，我可能只是将购物车移动到数据库中。

所以......想法，评论，建议？对于东道主不让我改变这个设置，我真的很沮丧，我的第一反应是寻找另一个东道主，但正如我之前所说，俱乐部对东道主有一些奇怪的依恋，不想搬到其他地方。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T21:54:36.813

一些想法：

**关于问题：**会话在负载平衡系统上“丢失”是很常见的。这可以通过移动到单个指定服务器来解决（如果托管公司现在不这样做并提供选项

**Cookie 会话：**如果您使用 .Net Membership，您可以更改登录过程以使用 cookie。这伴随着*一些明显的用户不允许 cookie*陷阱。再次，一个考虑。目前在他们希望用户保持登录状态的学校网站上工作。

** 使用 Cookie，您的登录是稳定的，但您的会话不会得到更好的保存。所以你运气不好在会话状态中承载了很多东西。

最终结果是您可以通过 IP 或 Cookie 跟踪用户，但除非这是一个可修复的负载平衡问题，否则您将走向无会话应用程序。

# resharper - 在多台计算机之间自动同步 resharper 7 设置/实时模板

> ID：14511364
> 
> 赞同：0
> 
> 时间：2013-01-24T21:43:51.650
> 
> 标签：resharper, resharper-7.1

是否可以在计算机之间自动同步设置，尤其是 LiveTemplates？

基本上，如果我在计算机上添加 LiveTemplate，我希望它会自动添加到所有其他开发团队的机器上。目前，我管理的唯一选项是将设置导出到文件 (.DotSettings)，然后在另一台机器上重新导入它们。但是，如果您有计算机，这将非常乏味。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T07:26:34.527

1.  将所有设置显式移动到解决方案层。这将在“*.sln”文件附近创建“.DotSettings”文件。

2.  将此“.DotSettings”文件签入源代码管理。

3.  之后，使用“保存到”将您的设置更改保存到该图层（并在实时模板资源管理器中选择该图层）。

现在，对设置的每项更改现在都会通过源代码控制自动传播到您的所有团队计算机。[在http://blogs.jetbrains.com/dotnet/tag/resharper-settings/](http://blogs.jetbrains.com/dotnet/tag/resharper-settings/)阅读更多相关信息

# javascript - 视频流：WebRTC 与 VLC 与其他？

> ID：14511367
> 
> 赞同：3
> 
> 时间：2013-01-24T21:44:05.877
> 
> 标签：javascript, html, video-streaming, webrtc

我正在尝试创建一个媒体流应用程序，并正在考虑使用哪种方法从 PC 上的本地目录流式传输视频。我正在考虑通过 HTML5 和 Javascript 使用 WebRTC。这样做真的很酷，我知道 WebRTC 是用于双向通道的，但是看看它在本地媒体内容的单向流中如何公平会很有趣。但是，我正在寻找有关此的输入。它会比 VLC 流媒体或其他形式的流媒体慢得多吗？如果 WebRTC 是个坏主意，有人能指出我正确的方向吗？

谢谢！

# django - Bottle - Django 风格的 URL 和传递参数

> ID：14511371
> 
> 赞同：1
> 
> 时间：2013-01-24T21:44:27.390
> 
> 标签：django, url, variables, routes, bottle

我发现这段代码可以让 Bottle 中的路由以与 Django 类似的方式存储：

```
from bottle import route

# Assuming your *_page view functions are defined above somewhere
urlpatterns = (
    # (path, func, name)
    ('/', home_page, 'home'),
    ('/about', about_page, 'about'),
    ('/contact', contact_page, 'contact'),
)

for path, func, name in urlpatterns:
    route(path, name=name)(func) 
```

我正在尝试将`name`传递给页面视图功能。浏览了 Bottle 的源代码后，我看不到如何`name`将其发送到该函数，甚至无法看到为什么要使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T14:29:52.117

该名称用于引用其他页面（例如 for `app.get_url`）。当前请求回调的名称可通过`request['bottle.route'].name`. 此外，您可以使用`route(..., callback=...)`参数来避免装饰器的双重调用。

# javascript - jQuery 错误 - 生成未定义

> ID：14511374
> 
> 赞同：1
> 
> 时间：2013-01-24T21:45:18.037
> 
> 标签：javascript, jquery, html, css

所以我有一个在我的网站上注册的用户列表，第一列，第二列是他们的电子邮件地址，旁边有一个复选框。在此页面上，用户可以选中该框（或多个）并单击提交按钮。一旦他们这样做，它将生成一个以分号分隔的电子邮件列表。

我的问题是在他们点击提交列表生成之后，但第一个电子邮件地址旁边写有“未定义”..所以不是说“domain1@test.com; domain2@test.com”而是“未定义的domain1@test .com; domain2@test.com”。

这是我的 jQuery：

```
jQuery(document).ready(function() {
jQuery('#memberSubmit').click(function() {
    var emailList;
    jQuery('.email-members input:checked').each(function() {
        var $this = jQuery(this);
        emailList += $this.next('a').html() + "; ";
    });
    jQuery('.email-message').hide();
    jQuery('.email-members').hide();
    jQuery('.email-checks').hide();
    jQuery('#memberSubmit').hide();
    jQuery('.email-results a').attr('href', "mailto: " + emailList).fadeIn(2000);
    jQuery('.email-results .email-list p').html(emailList).fadeIn(2000);
    jQuery('.email-results h2').fadeIn(2000);
    jQuery('.email-results p').fadeIn(2000);
    jQuery('.email-list h2').fadeIn(2000);
    //console.info('Emails: ' + emailList);
});
}); 
```

我认为我的错误就行了：`emailList += $this.next('a').html() + "; ";` 但我不确定......有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T21:47:57.057

首先初始化`emailList`变量，这意味着它不会在`undefined`您第一次执行时开始。巧合的是，当您第一次调用`+=`时，它实际上正在转换`undefined`为字符串，这意味着您的字符串始终以该字符串开头。

```
var emailList = ""; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T21:48:21.637

尝试用`emailList`以下代码替换 's 声明：

```
var emailList = ""; 
```

那是因为一`emailList`开始就`undefined`好像你没有初始化它。因此`undefined + "this is a test"`会变成`undefinedthis is a test`。

# asp.net-mvc - SignalR 请求抛出“无法解析集线器”。

> ID：14511376
> 
> 赞同：7
> 
> 时间：2013-01-24T21:45:23.030
> 
> 标签：asp.net-mvc, asp.net-mvc-4, signalr

我从早期版本开始就一直在使用 SignalR，并且一直在升级，但是我已经将我的应用程序部署到了我的 Windows Server 2008 R2 生产服务器，现在应用程序因“无法解决集线器而崩溃”。例外。

编辑：StackTrace 添加：

```
[InvalidOperationException: 'stockitems' Hub could not be resolved.]
Microsoft.AspNet.SignalR.Hubs.HubManagerExtensions.EnsureHub(IHubManager hubManager,  String hubName, IPerformanceCounter[] counters) +426
Microsoft.AspNet.SignalR.Hubs.HubDispatcher.Initialize(IDependencyResolver resolver, HostContext context) +716
Microsoft.AspNet.SignalR.Owin.CallHandler.Invoke(IDictionary`2 environment) +1075
Microsoft.AspNet.SignalR.Owin.Handlers.HubDispatcherHandler.Invoke(IDictionary`2 environment) +363
Microsoft.Owin.Host.SystemWeb.OwinCallContext.Execute() +68
Microsoft.Owin.Host.SystemWeb.OwinHttpHandler.BeginProcessRequest(HttpContextBase httpContext, AsyncCallback callback, Object extraData) +414

[TargetInvocationException: Exception has been thrown by the target of an invocation.]
Microsoft.Owin.Host.SystemWeb.CallContextAsyncResult.End(IAsyncResult result) +146
System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +606
System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +288 
```

在我的开发机器和本地测试服务器上，我没有遇到任何问题。

有问题的集线器非常简单：

```
 [HubName("StockItems")]
public class StockItemHub : Hub
{

} 
```

最初我认为这是 HubName 的问题，因此将其删除，但它仍然会爆炸。

最初我认为这是由于依赖注入，所以我将 Global.asax 更改为如下所示：

```
 var signalRResolver = new SignalRDependencyResolver();
        GlobalHost.DependencyResolver = signalRResolver;

        var configuration = new HubConfiguration { Resolver = signalRResolver };
        RouteTable.Routes.MapHubs(configuration);

        AreaRegistration.RegisterAllAreas();

        FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters, config.Filters);
        RouteConfig.RegisterRoutes(RouteTable.Routes);
        BundleConfig.RegisterBundles(BundleTable.Bundles); 
```

编辑：什么是 SignalRDependencyResolver？SignalRDependencyResolver 在我尝试解决此问题之前并不存在。因为我相信它是一个依赖注入问题，所以我包装了 DefaultDependencyResolver 覆盖 GetService 和 GetServices 以首先检查我的 Ninject 内核的类型，如果没有回退到 DefaultDependencyResolver

有任何想法吗？

服务器正在运行 IIS7、Windows Server 2008 和 .Net 4.5 该应用程序是 MVC 4 .Net 4.5

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2015-07-30T16:28:41.500

I had this same error due to my `Hub` class being `internal`, therefore SignalR couldn't find it within my assembly.

Setting the hub to `public` solved the issue.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-02-21T16:38:05.247

我刚刚遇到这个问题，我深入挖掘了一点，并且刚刚找到了一个可能的解决方案。我的中心类不在 Web 项目的程序集中，它们在一些引用的程序集中。这是多层应用程序中非常常见的场景。

启动时，signalR 将尝试通过 IAssemblyLocator 实例查找集线器类。在 IIS 站点中部署时，此 IAssemblyLocator 实例会查找所有引用的程序集。但是此时，应用程序只是在启动期间，这意味着许多（已引用但尚未加载）程序集可能尚未被 owin 主机环境收集。因此，中心类的查找失败。

因此，只需将您的程序集添加到 Web.Config 的 system.web/compilation/assemblies 部分：

```
<system.web>
  <compilation targetFramework="4.5">
    <assemblies>
      <add assembly="HubAssembly, Version=1.0.0.0, Culture=neutral"/>
    </assemblies>
  </compilation>
</system.web> 
```

或者，如果您愿意，也可以通过实现自定义 IAssemblyLocator 类来解决此问题，在调用 app.MapSignalR 后立即将其注册到依赖解析器中。

```
using Microsoft.AspNet.SignalR.Hubs;
public class AssemblyLocator : IAssemblyLocator {
     public IList<System.Reflection.Assembly> GetAssemblies()
     {
         // list your hubclass assemblies here
         return new List<System.Reflection.Assembly>(new []{typeof(HubAssembly.HubClass).Assembly});
     }
}

// add following code to OwinStartup class's Configuration method
app.MapSignalR();
GlobalHost.DependencyResolver.Register(typeof(Microsoft.AspNet.SignalR.Hubs.IAssemblyLocator), () => new AssemblyLocator()); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-23T12:52:14.450

这是一个古老的问题，但本周末它再次抬起了丑陋的头。在花了很多时间调查之后，我发现 SignalR 不是部署中唯一被破坏的东西，我的 WebAPI 也抛出了找不到控制器异常。

原来这是由 SignalR 和 WebApi 的内部反映了 Sites 程序集中的所有类型引起的。一个 TypeLoadException 被抛出，在我的情况下，由于有一个类派生 RoleEntryPoint 这是一个 Azure 类型，但是当站点被部署在非 Azure 环境中时，事情就崩溃了。只需从非 Azure 版本中排除此类型即可解决该问题。

如果这些 TypeLoadExceptions 更明显，那就太好了，但它确实存在。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-23T22:12:38.240

与@Jijie Chen 类似，当我遇到这个问题时，我发现它无法加载包含我的集线器的程序集。不过，对我来说，解决方法更简单。就我而言，我有三个项目。包括集线器在内的所有逻辑都在它自己的项目中，我有两个项目打算使用 owin 托管。一个是运行良好的控制台项目。然后我将其调整为 Windows 服务来托管它。好吧，不知何故，我设法忘记了包含对包含我的集线器的项目的引用。这仍然编译得很好，因为主机代码依赖于在运行时而不是编译时加载集线器的信号器/owin 映射函数。因此，当我启动服务并尝试连接时，我得到了集线器没有定义的错误，因为它找不到我的集线器的程序集。

# c++ - 从 fstream 中读取包括空格在内的整行

> ID：14511378
> 
> 赞同：1
> 
> 时间：2013-01-24T21:45:28.867
> 
> 标签：c++, fstream

我目前正在用 C++ 做一个小项目，现在有点困惑。我需要从使用 ifstream in() 的文件中读取一行中的一定数量的单词。它现在的问题是它一直忽略空格。我需要计算文件中的空格数量来计算字数。反正有 in() 不忽略空白吗？

```
ifstream in("input.txt");       
ofstream out("output.txt");

while(in.is_open() && in.good() && out.is_open())
{   
    in >> temp;
    cout << tokencount(temp) << endl;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T21:55:37.847

要计算文件中的空格数：

```
std::ifstream inFile("input.txt");
std::istreambuf_iterator<char> it (inFile), end;
int numSpaces = std::count(it, end, ' '); 
```

要计算文件中的空白字符数：

```
std::ifstream inFile("input.txt");
std::istreambuf_iterator<char> it (inFile), end;
int numWS = std::count_if(it, end, (int(*)(int))std::isspace); 
```

作为替代方案，您可以计算*words ，而不是计算**空格*。

 *```
std::ifstream inFile("foo.txt);
std::istream_iterator<std::string> it(inFile), end;
int numWords = std::distance(it, end); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T22:20:45.883

这是我的做法：

```
std::ifstream fs("input.txt");
std::string line;
while (std::getline(fs, line)) {
    int numSpaces = std::count(line.begin(), line.end(), ' ');
} 
```

一般来说，如果我必须为文件的每一行做一些事情，我发现 std::getline 是最不挑剔的方法。如果我需要来自那里的流运算符，我最终会从那条线中制作一个字符串流。这远不是最有效的做事方式，但我通常更关心的是把它做好并为这类事情继续生活。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T22:46:57.377*

# sql - 如何强制 SQLAlchemy 包含重复的列？

> ID：14511379
> 
> 赞同：3
> 
> 时间：2013-01-24T21:45:30.340
> 
> 标签：sql, sqlalchemy

我正在学习 SQLAlchemy 表达式语言，并且正在尝试执行一个简单的查询，该查询通过以下方式返回单个重复的列`select([users.c.id, users.c.id])`：

```
from sqlalchemy import create_engine, Table, Column, Integer, String, MetaData, insert, select
engine = create_engine('sqlite:///:memory:', echo=True)
conn = engine.connect()
metadata = MetaData()
users = Table('users', metadata,
Column('id', Integer, primary_key=True),
Column('name', String),
Column('fullname', String),
)
metadata.create_all(engine)
conn.execute(users.insert(), [
{'id': 1, 'name' : 'jack', 'fullname': 'Jack Jones'},
{'id': 2, 'name' : 'wendy', 'fullname': 'Wendy Williams'},
])
print(list(conn.execute(select([users.c.id, users.c.id])))) 
```

哪个输出：

```
[(1,), (2,)] 
```

即，只有两个请求的列之一。我期望：

```
[(1, 2), (2, 2)] 
```

为了仔细检查我的期望是否正确，我直接在 sqlite3 和 PostgreSQL 9.2（下面的 [1] 和 [2]）中运行了等效查询，它们都正确返回了重复的 id。我正在使用 SQLAlchemy 版本 0.8.0b2、Python 3.2.3、sqlite3 3.6.12 以及 Mac OS X 10.6 和 10.7。

提前致谢！

[1] sqlite3

```
$ sqlite3 temp.db
CREATE TABLE users(id INTEGER, name TEXT, fullname TEXT);
INSERT INTO users VALUES(1, 'jack', 'Jack Jones');
INSERT INTO users VALUES(2, 'wendy', 'Wendy Williams');
SELECT id, id FROM users;
->
1|1
2|2 
```

[2] PostgreSQL

```
$ /Library/PostgreSQL/9.2/bin/psql -U postgres
CREATE DATABASE temp;
CREATE TABLE users(id INTEGER, name TEXT, fullname TEXT);
INSERT INTO users VALUES(1, 'jack', 'Jack Jones');
INSERT INTO users VALUES(2, 'wendy', 'Wendy Williams');
SELECT id, id FROM users;
->
1 |  1
2 |  2 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T21:51:16.507

至少有一个列需要一个标签来区分两者。

```
print(list(conn.execute(select([users.c.id, users.c.id.label('id2')])))) 
```

# google-app-engine - Google 应用引擎和 primefaces 布局/布局单元不起作用

> ID：14511381
> 
> 赞同：1
> 
> 时间：2013-01-24T21:45:56.077
> 
> 标签：google-app-engine, primefaces

我正在使用 primefaces 和谷歌应用引擎。我发布此代码是因为布局不起作用。最初，我尝试使用模板 facelets（组合、包含、插入、集合）但均未成功。我熟悉 facelets 和 jsf，因为它们可以在另一个环境中使用。所以我决定尝试布局和layoutunit，但一无所获。

谢谢你。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"

 xmlns:h="http://java.sun.com/jsf/html"
   xmlns:f="http://java.sun.com/jsf/core"
   xmlns:ui="http://java.sun.com/jsf/facelets"
   xmlns:p="http://primefaces.org/ui">

<f:view contentType="text/html">

<head>
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
   <title>Inicio</title>
</head>
   <h:body>
      <p:layout fullPage="true">
         <p:layoutUnit position="top" height="75" header="Top">
            <h:outputText value="North unit content1aaaa." />
         </p:layoutUnit>

         <p:layoutUnit position="center">
            <h:form>
              This fullPage layout consists of five different layoutUnits which are                
                 resizable and closable by default.
              </h:form>
         </p:layoutUnit>

         <p:layoutUnit position="bottom" height="75" header="Bottom">
            <h:outputText value="South unit content." />
         </p:layoutUnit>
      </p:layout>
   </h:body>
</f:view>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T22:02:33.153

您的代码中有一些错误。

LayoutUnits 的值不能是顶部或底部。允许的值为：

```
<p:layoutUnit position="north"/>
<p:layoutUnit position="west"/>
<p:layoutUnit position="east"/>
<p:layoutUnit position="south"/> 
```

第二件事是关于

```
<f:view contentType="text/html"> 
```

不要在此标签下包含您的所有内容。直接关闭即可（如果真的需要的话）

```
<f:view contentType="text/html"/> 
```

然后你必须编辑你的头标签

```
<h:head>...</h:head> 
```

只需参考 Primefaces 示例： http: [//www.primefaces.org/showcase/ui/layoutFull.jsf](http://www.primefaces.org/showcase/ui/layoutFull.jsf)

这是您的工作代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:p="http://primefaces.org/ui">

<h:head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <title>Inicio</title>
</h:head>

<h:body>
  <p:layout fullPage="true">
     <p:layoutUnit position="north" height="75" header="Top">
        <h:outputText value="North unit content1aaaa." />
     </p:layoutUnit>

     <p:layoutUnit position="center">
        <h:form>
          This fullPage layout consists of five different layoutUnits which are                
             resizable and closable by default.
          </h:form>
     </p:layoutUnit>

     <p:layoutUnit position="south" height="75" header="Bottom">
        <h:outputText value="South unit content." />
     </p:layoutUnit>
  </p:layout>
 </h:body>

</html> 
```

# php - 通过 PHP CURL 添加 Google 联系人

> ID：14511385
> 
> 赞同：2
> 
> 时间：2013-01-24T21:46:23.347
> 
> 标签：php, curl, google-api

我已经成功地通过 Zend 框架和 PHP 将联系人添加到谷歌。我也希望能够通过 CURL 做到这一点。有没有人有关于如何做到这一点的好教程？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T22:09:21.637

我终于能够通过 CURL 和访问令牌做到这一点。首先，我想说[OAuth Playground](https://developers.google.com/oauthplayground/)非常有用。执行此操作需要 2 个主要组件：首先，您需要正确格式化 XML。其次，您需要将访问令牌放入 CURL 实例的标头中。下面是我使用的代码，它工作得很好：

```
session_start();
$temp = json_decode($_SESSION['token'], true);
$access = $temp['access_token'];

$contactXML = '<?xml version="1.0" encoding="utf-8"?>
<atom:entry xmlns:atom="http://www.w3.org/2005/Atom" xmlns:gd="http://schemas.google.com/g/2005">
<atom:category scheme="http://schemas.google.com/g/2005#kind" term="http://schemas.google.com/contact/2008#contact"/>
<gd:name>
<gd:givenName>Jackie</gd:givenName>
<gd:fullName>Jackie Frost</gd:fullName>
<gd:familyName>Frost</gd:familyName>
</gd:name>
<gd:email rel="http://schemas.google.com/g/2005#home" address="jackfrost@gmail.com"/>
<gd:phoneNumber rel="http://schemas.google.com/g/2005#home" primary="true">1111111111</gd:phoneNumber>
</atom:entry>';

$headers = array(
'Host: www.google.com',
'Gdata-version: 3.0',
'Content-length: '.strlen($contactXML),
'Content-type: application/atom+xml',
'Authorization: OAuth '.$access
);

$contactQuery = 'https://www.google.com/m8/feeds/contacts/default/full/';

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $contactQuery );
curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "POST");
curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $contactXML);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, false);
curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 10);
curl_setopt($ch, CURLOPT_TIMEOUT, 10);
curl_setopt($ch, CURLOPT_FAILONERROR, true);
curl_exec($ch); 
```

我希望这对正在寻找此答案的其他人有所帮助。使用 Playground 将帮助您找到要使用的正确 URL 以及标头中所需的正确参数。

# optimization - 确定字节中最显着设置位的位置

> ID：14511386
> 
> 赞同：1
> 
> 时间：2013-01-24T21:46:23.723
> 
> 标签：optimization, bit-manipulation, bitflags

我有一个`byte`用来存储位标志的。我需要计算字节中最高有效位的位置。

**示例字节：** =>是最高有效位的位置`00`**`1`**`01101``6`

**紧凑的十六进制映射：**

```
[0x00]      => 0x00
[0x01]      => 0x01
[0x02,0x03] => 0x02
[0x04,0x07] => 0x03
[0x08,0x0F] => 0x04
[0x10,0x1F] => 0x05
[0x20,0x3F] => 0x06
[0x40,0x7F] => 0x07
[0x80,0xFF] => 0x08 
```

**C中的测试用例：**

```
#include <stdio.h>

unsigned char check(unsigned char b) {
  unsigned char c = 0x08;
  unsigned char m = 0x80;
  do {
    if(m&b) { return  c; }
    else    { c -= 0x01; }
  } while(m>>=1);
  return 0; //never reached
}
int main() {
  unsigned char input[256] = {
    0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,0x0a,0x0b,0x0c,0x0d,0x0e,0x0f,
    0x10,0x11,0x12,0x13,0x14,0x15,0x16,0x17,0x18,0x19,0x1a,0x1b,0x1c,0x1d,0x1e,0x1f,
    0x20,0x21,0x22,0x23,0x24,0x25,0x26,0x27,0x28,0x29,0x2a,0x2b,0x2c,0x2d,0x2e,0x2f,
    0x30,0x31,0x32,0x33,0x34,0x35,0x36,0x37,0x38,0x39,0x3a,0x3b,0x3c,0x3d,0x3e,0x3f,
    0x40,0x41,0x42,0x43,0x44,0x45,0x46,0x47,0x48,0x49,0x4a,0x4b,0x4c,0x4d,0x4e,0x4f,
    0x50,0x51,0x52,0x53,0x54,0x55,0x56,0x57,0x58,0x59,0x5a,0x5b,0x5c,0x5d,0x5e,0x5f,
    0x60,0x61,0x62,0x63,0x64,0x65,0x66,0x67,0x68,0x69,0x6a,0x6b,0x6c,0x6d,0x6e,0x6f,
    0x70,0x71,0x72,0x73,0x74,0x75,0x76,0x77,0x78,0x79,0x7a,0x7b,0x7c,0x7d,0x7e,0x7f,
    0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8a,0x8b,0x8c,0x8d,0x8e,0x8f,
    0x90,0x91,0x92,0x93,0x94,0x95,0x96,0x97,0x98,0x99,0x9a,0x9b,0x9c,0x9d,0x9e,0x9f,
    0xa0,0xa1,0xa2,0xa3,0xa4,0xa5,0xa6,0xa7,0xa8,0xa9,0xaa,0xab,0xac,0xad,0xae,0xaf,
    0xb0,0xb1,0xb2,0xb3,0xb4,0xb5,0xb6,0xb7,0xb8,0xb9,0xba,0xbb,0xbc,0xbd,0xbe,0xbf,
    0xc0,0xc1,0xc2,0xc3,0xc4,0xc5,0xc6,0xc7,0xc8,0xc9,0xca,0xcb,0xcc,0xcd,0xce,0xcf,
    0xd0,0xd1,0xd2,0xd3,0xd4,0xd5,0xd6,0xd7,0xd8,0xd9,0xda,0xdb,0xdc,0xdd,0xde,0xdf,
    0xe0,0xe1,0xe2,0xe3,0xe4,0xe5,0xe6,0xe7,0xe8,0xe9,0xea,0xeb,0xec,0xed,0xee,0xef,
    0xf0,0xf1,0xf2,0xf3,0xf4,0xf5,0xf6,0xf7,0xf8,0xf9,0xfa,0xfb,0xfc,0xfd,0xfe,0xff };

  unsigned char truth[256] = {
    0x00,0x01,0x02,0x02,0x03,0x03,0x03,0x03,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04, 
    0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05,0x05, 
    0x06,0x06,0x06,0x06,0x06,0x06,0x06,0x06,0x06,0x06,0x06,0x06,0x06,0x06,0x06,0x06, 
    0x06,0x06,0x06,0x06,0x06,0x06,0x06,0x06,0x06,0x06,0x06,0x06,0x06,0x06,0x06,0x06, 
    0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07, 
    0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07, 
    0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07, 
    0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x07, 
    0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,
    0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,
    0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,
    0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,
    0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,
    0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,
    0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,
    0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08};

  int i,r;
  int f = 0;
  for(i=0; i<256; ++i) {
    r=check(input[i]);
    if(r !=(truth[i])) {
      printf("failed %d : 0x%x : %d\n",i,0x000000FF & ((int)input[i]),r);
      f += 1;
    }
  }
  if(!f) { printf("passed all\n");  }
  else   { printf("failed %d\n",f); }
  return 0;
} 
```

我想简化我的`check()`功能以不涉及循环（或最好分支）。是否有一些小技巧或散列查找表解决方案来计算字节中最重要的设置位的位置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T00:39:38.180

您的问题是关于计算`log2`价值的有效方法。而且因为您似乎想要一个不限于 C 语言的解决方案，所以我有点懒惰并调整了一些 C# 代码。

您想要计算`log2(x) + 1`并且对于`x = 0`（其中`log2`未定义）您将结果定义为 0（例如，您创建了一个特殊情况 where `log2(0) = -1`）。

```
static readonly Byte[] multiplyDeBruijnBitPosition = new Byte[] {
  7, 2, 3, 4,
  6, 1, 5, 0
};

public static Byte Log2Plus1(Byte value) {
  if (value == 0)
    return 0;

  var roundedValue = value;
  roundedValue |= (Byte) (roundedValue >> 1);
  roundedValue |= (Byte) (roundedValue >> 2);
  roundedValue |= (Byte) (roundedValue >> 4);
  var log2 = multiplyDeBruijnBitPosition[((Byte) (roundedValue*0xE3)) >> 5];
  return (Byte) (log2 + 1);
} 
```

这个小技巧取自[Find the log base 2 of an N-bit integer in O(lg(N)) operations with multiply and lookup](http://graphics.stanford.edu/~seander/bithacks.html#IntegerLogDeBruijn)，您可以在其中看到 32 位值的等效 C 源代码。此代码已适用于处理 8 位值。

但是，您可以使用非常有效的内置函数（在许多 CPU 上使用一条指令，如[位扫描反向](http://css.csail.mit.edu/6.858/2011/readings/i386/BSR.htm)）来为您提供结果的操作。问题的答案[Bit twiddling：设置了哪个位？](https://stackoverflow.com/a/3465130/98607)有一些关于此的信息。答案中的引用提供了解决此问题的低级别支持的一个可能原因：

> 像这样的事情是许多 O(1) 算法的核心，例如内核调度程序，它们需要找到由位数组表示的第一个非空队列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T20:06:36.823

我敢肯定，其他人早就转移到其他主题了，但我的脑海里有一些东西表明，必须有一个更有效的无分支解决方案，而不仅仅是在我发布的其他解决方案中展开循环。[快速浏览我的Warren](https://rads.stackoverflow.com/amzn/click/com/0201914654)副本让我走上了正确的轨道：二分搜索。

这是我基于这个想法的解决方案：

```
 Pseudo-code:

  // see if there's a bit set in the upper half   
  if ((b >> 4) != 0)  
  {
      offset = 4;
      b >>= 4;   
  }   
  else
      offset = 0;

  // see if there's a bit set in the upper half of what's left   
  if ((b & 0x0C) != 0)   
  {
    offset += 2;
    b >>= 2;   
  }

  // see if there's a bit set in the upper half of what's left   
  if > ((b & 0x02) != 0)   
  {
    offset++;
    b >>= 1;   
  }

  return b + offset; 
```

无分支 C++ 实现：

```
static unsigned char check(unsigned char b)
{    
  unsigned char adj = 4 & ((((unsigned char) - (b >> 4) >> 7) ^ 1) - 1);
  unsigned char offset = adj;
  b >>= adj;
  adj = 2 & (((((unsigned char) - (b & 0x0C)) >> 7) ^ 1) - 1);
  offset += adj;
  b >>= adj;
  adj = 1 & (((((unsigned char) - (b & 0x02)) >> 7) ^ 1) - 1);
  return (b >> adj) + offset + adj;
} 
```

是的，我知道这都是学术性的:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T02:24:39.287

这是一个有趣的小挑战。我不知道这个是否完全可移植，因为我只有 VC++ 可以测试，我当然不能确定它是否比其他方法更有效。这个版本是用循环编码的，但可以毫不费力地展开。

```
static unsigned char check(unsigned char b)
{
  unsigned char r = 8;
  unsigned char sub = 1;
  unsigned char s = 7;
  for (char i = 0; i < 8; i++)
  {
      sub = sub & ((( b & (1 << s)) >> s--) - 1);
      r -= sub;
  }
  return r;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T23:20:42.673

在纯 C 语言中这是不可能的。我建议的最好的方法是**check**的以下实现。**尽管相当“丑陋”，但我认为它比问题中的ckeck**版本运行得更快。

```
int check(unsigned char b)
{
    if(b&128) return 8;
    if(b&64)  return 7;
    if(b&32)  return 6;
    if(b&16)  return 5;
    if(b&8)   return 4;
    if(b&4)   return 3;
    if(b&2)   return 2;
    if(b&1)   return 1;
              return 0;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T23:41:29.833

*编辑：我找到了实际代码的链接：[http](http://www.hackersdelight.org/hdcodetxt/nlz.c.txt) ://www.hackersdelight.org/hdcodetxt/nlz.c.txt 下面的算法`nlz8`在该文件中命名。你可以选择你最喜欢的黑客。*

```
/*
From last comment of: http://stackoverflow.com/a/671826/315052
> Hacker's Delight explains how to correct for the error in 32-bit floats
> in 5-3 Counting Leading 0's. Here's their code, which uses an anonymous
> union to overlap asFloat and asInt: k = k & ~(k >> 1); asFloat =
> (float)k + 0.5f; n = 158 - (asInt >> 23); (and yes, this relies on
> implementation-defined behavior) - Derrick Coetzee Jan 3 '12 at 8:35
*/

unsigned char check (unsigned char b) {
    union {
        float    asFloat;
        int      asInt;
    } u;
    unsigned k = b & ~(b >> 1);
    u.asFloat = (float)k + 0.5f;
    return 32 - (158 - (u.asInt >> 23));
} 
```

*编辑——不完全确定询问者的语言独立是什么意思，但下面是 python 中的等效代码。*

```
import ctypes

class Anon(ctypes.Union):
    _fields_ = [
        ("asFloat", ctypes.c_float),
        ("asInt", ctypes.c_int)
    ]

def check(b):
    k = int(b) & ~(int(b) >> 1)
    a = Anon(asFloat=(float(k) + float(0.5)))
    return 32 - (158 - (a.asInt >> 23)) 
```

# java - 处理字符串的正确方法是什么：Java客户端和C++服务器

> ID：14511387
> 
> 赞同：0
> 
> 时间：2013-01-24T21:46:26.113
> 
> 标签：java, c++, string, networking, tcp

我正在编写一个运行良好的 C++ 服务器/客户端应用程序 (TCP)，但我很快将不得不编写一个 Java 客户端，它显然必须与它所连接的 C++ 服务器兼容。

至于现在，当服务器或客户端接收到字符串（文本）时，它会循环遍历这些位，直到找到一个 '\0'，这标志着字符串的结尾......

这是一个问题：在通过 Java/C++ 而不是 C++/C++ 进行通信时，以这种方式处理字符串仍然是一种好习惯吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T21:51:20.210

您应该阅读一件事：编码。基本上，可以用不同的方式解释相同的字节序列。只要你用 C++ 或 Java 传递事物，事物的含义就会一致，但是当使用网络（即字节流）时，你必须下定决心。如果有疑问，请阅读并使用 UTF-8。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T21:51:07.053

考虑使用[Protocol Buffers](http://code.google.com/p/protobuf/)或[Thrift](http://thrift.apache.org)而不是滚动您自己的协议。

# php - 继承的 PHP 站点未找到资产

> ID：14511388
> 
> 赞同：0
> 
> 时间：2013-01-24T21:46:27.897
> 
> 标签：php, redirect, webserver

我从另一个开发人员那里继承了一个 PHP 站点，但无法完全弄清楚出了什么问题。我怀疑某处有某种重写规则，但我不确定在哪里寻找（或具体寻找什么......）

我已经安装了 MAMP，它工作正常。我有几个站点在 MAMP 目录中运行，没有任何问题。

当我将此站点放入并尝试运行页面时，我得到的页面没有 CSS、JavaSCript 或图像。当我“右键单击”图像并在新选项卡中打开它时，找不到图像，因为浏览器会尝试在目录中上一层到 MAMP 目录，而不是查看站点根目录。

指向其他页面的链接也是如此，它们都试图进入 MAMP htdocs 目录。

例如，在 htdocs 中，我的站点的根文件夹带有索引页：'htdocs/mysite.com/index.php'

页面上有指向另一个页面的链接`<li class="nav_company"><a href="/company/index.php" title="Company">Company</a>`

单击“公司”会导致浏览器转到 htdocs 文件夹并查找“/company/index.php”，这当然不存在。

我去哪里寻找这件事的罪魁祸首？是否有一个术语或什么我可以搜索站点文件？如果我只知道要寻找什么，我正在使用 Dreamweaver 和冷利用查找和替换工具...

*编辑*这是站点根文件夹中的（已清理的）.htaccess 文件

```
Options +FollowSymLinks 
RewriteEngine on
RewriteCond %{HTTP_HOST} ^sitename\.com
RewriteRule (.*) http://www.sitename.com/$1 [R=301,L] 
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /([^/]+/)*index\.html\ HTTP/ 
RewriteRule ^(([^/]+/)*)index\.html$ http://www.sitename.com/$1 [R=301,L] 

Redirect 301 /products/ http://www.sitename.com/plastic-handles/
Redirect 301 /plastic/index.html http://www.sitename.com/plastic/plastic.html
Redirect 301 /applicator/index.html http://www.sitename.com/applicator/applicators.html
Redirect 301 /company/index.html http://www.sitename.com/company/about-us.html
Redirect 301 /contact/index.html http://www.sitename.com/contact/contact-us.html
Redirect 301 /news/index.html http://www.sitename.com/news/news.html
Redirect 301 /trade/index.html http://www.sitename.com/trade/tradeshows.html 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T21:55:32.657

您的资产和链接似乎都指向根目录，因此 /contact/index.php 将查看`http://localhost/contact/index.php`而不是`http://localhost/mysite.com/contact/index.php`

查看设置虚拟主机以指向新站点目录。

否则，将所有链接和资产更改为完整 URL，例如`http://localhost/mysite.com/contact/index.php`

希望这可以帮助

编辑：这是设置虚拟主机[http://sawmac.com/mamp/virtual/的指南](http://sawmac.com/mamp/virtual/)

编辑 2：响应您的编辑，当您单击链接或服务器查找将在 htdocs/ 中查找的资产时，.htaccess 不会产生影响。它不会再进一步​​，因此不会到达您的 .htaccess。

# .net - 在终端服务器上为用户开发一个winform？

> ID：14511389
> 
> 赞同：0
> 
> 时间：2013-01-24T21:46:28.527
> 
> 标签：.net, winforms, remote-desktop

我将在 Windows Server 2012 上运行一个 winform 应用程序，其中有多个用户通过远程桌面运行。

如果我将我的应用程序放在一个文件夹中，我将如何更新它？我猜很多文件正在使用中，无法更新。

你会怎么做？

谢谢魔乔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T22:24:03.677

我遇到了这个确切的问题并发现了一个有趣的解决方法。Windows 将允许您**移动**正在使用的文件。

我所做的是`Old`在程序的安装目录中创建一个名为的文件夹，然后将 exe 移动到该文件夹​​并复制我的新 exe。

任何登录的新用户都使用新的 exe，我给它一天让所有老用户注销（我们的 RDP 服务器上的超时时间会在 4 小时后踢出不活跃的人，所以每个人通常都会在一夜之间注销）然后我删除我一开始制作的`Old`文件夹。

# spring-security - 使用 OpenAM 的 Spring 安全性

> ID：14511392
> 
> 赞同：0
> 
> 时间：2013-01-24T21:46:39.570
> 
> 标签：spring-security, saml-2.0, openam

目前，我们有一个使用 spring Security 进行基于角色的身份验证和授权的 web 应用程序。由于我们想使用 SSO，我看到这个示例将 Spring 与 Openam 集成[https://wikis.forgerock.org/confluence/display/openam/OpenSSO+Spring+Security+%28Acegi%29+Integration](https://wikis.forgerock.org/confluence/display/openam/OpenSSO+Spring+Security+%28Acegi%29+Integration) 所以就像

我的 Web 应用程序（使用 spring 与 openam 对话）<===> IDP 代理 <====> IDP

但是，当我使用 SAML 跟踪器（用于 Firefox 跟踪 SAML 请求/响应的插件）时，我在我的 Web 应用程序和 IDP 代理之间看不到任何 SAML 有效负载。是不是 Spring 使用 SOAP 请求通过从 AMConfig.properties 中选择 url 来与 IDP 代理通信？

我曾想过使用 Fedlet，但阅读 Fedlet 的 saml 响应并将其与 Spring Security 集成是不可行的。如果 Spring security3 不使用 SAML2，使用 spring 框架与 openam 对话是个好主意吗？任何输入？

提前谢谢拉姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T18:47:11.633

好的，伙计们，我们通过与 Spring SAML 扩展和 Spring Security 以及 open am 集成使我们的 JSF2 Web 应用程序正常工作。Spring SAML 扩展在这里 - ( [https://github.com/SpringSource/spring-security-saml](https://github.com/SpringSource/spring-security-saml) )

所以现在我们使用 Openam 作为 IDP 从 LDAP 中提取所有用户角色，并且 saml 请求和响应由 spring saml 扩展处理。应用程序中基于角色的访问由 Spring Security 控制。

我要感谢 Vladimir Schaefer - Spring Saml 的作者，Stefan - 来自 opensaml 团队，Peter Major - 来自 Openam @ forge rock。

想要添加此注释以让其他人知道可以对 JSF 应用程序或任何其他 Web 应用程序进行集成，并且它使用 Spring 安全 SAML 扩展（端到端使用 SAML 2.0）。我们终于有单点登录工作了。我将很快发表一篇关于此的文章，并将更新这篇文章。

我可以添加更多注释，请参阅我关于与 Openam 概念相关的通用信息的文章 [http://reddymails.blogspot.com/2013/03/sso-for-java-or-net-web-based.html](http://reddymails.blogspot.com/2013/03/sso-for-java-or-net-web-based.html)

使用 Spring SAML 扩展和 Spring Security 将 JSF 2 Web 应用程序与 Openam 集成的步骤。 [http://reddymails.blogspot.com/2013/06/integrating-jsf-web-application-with.html](http://reddymails.blogspot.com/2013/06/integrating-jsf-web-applicataion-with.html)

谢谢拉姆

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T07:19:21.547

> I don't see any SAML payloads between My web app and IDP proxy

According to the page, the integration is very similar to a normal agent approach. This probably means that you app talks to OpenAM using SOAP and OpenAM talks to the IDP using SAML.

> But when I use the SAML tracer (The plugin for Firefox to track SAML requests/Responses) I don't see any SAML payloads between My web app and IDP proxy. Is it that Spring is using SOAP request to talk to IDP proxy by picking urls from AMConfig.properties ?

If things are working correctly you should see a SAML authentication request when you are forwarded to the IDP. What you should do is probably start plowing through the OpenAM debug logs. Especially the Federation log.

> I thought of using Fedlet but reading the saml response from Fedlet and integrating that with Spring Security is not feasible. If Spring security3 doesn't use SAML2 is it a good idea to use spring framework to talk to openam ? Any inputs ?

There is an spring extension that allows you to use SAML directly. [http://static.springsource.org/spring-security/site/extensions/saml/index.html](http://static.springsource.org/spring-security/site/extensions/saml/index.html)

You could have a look at that.

# sql - 如何在 sas 中使用 proc sql 查找丢失的案例？

> ID：14511394
> 
> 赞同：1
> 
> 时间：2013-01-24T21:46:53.160
> 
> 标签：sql, sas, missing-data

我想`proc sql`在 sas 中使用来确定案例或记录​​是否缺少某些信息。我有两个数据集。一个是整个数据收集的记录，显示访问期间收集了哪些表格。第二个是在访问期间*应*收集哪些表格的规范。我尝试了很多选项，包括数据步骤和 sql 代码使用`not in`无济于事......

示例数据如下

* * *

```
*****  dataset crf is a listing of all forms that have been filled out at each visit ;
*****  cid is an identifier for a study center  ;
*****  pid is an identifier for a participant  ;

data crf;
  input visit cid pid form ;
cards;
1 10 101 10
1 10 101 11
1 10 101 12
1 10 102 10
1 10 102 11
2 10 101 11
2 10 101 13
2 10 102 11
2 10 102 12
2 10 102 13
;
run;

*****  dataset crfrule is a listing of all forms that should be filled out at each visit  ;
*****  so, visit 1 needs to have forms 10, 11, and 12 filled out  ;
*****  likewise, visit 2 needs to have forms 11 - 14 filled out  ;

data crfrule;
  input visit form ;
cards;
1 10
1 11
1 12
2 11
2 12
2 13
2 14
;
run;

*****  We can see from the two tables that participant 101 has a complete set of records for visit 1 ;
*****  However, participant 102 is missing form 12 for visit 1 ;
*****  For visit 2, 101 is missing forms 12 and 14, whereas 102 is missing form 14  ;

*****  I want to be able to know which forms were **NOT**  filled out by each person at each visit (i.e., which forms are missing for each visit)  ;

*****  extracting unique cases from crf ;
proc sql;
  create table visit_rec as
    select distinct cid, pid, visit
      from crf;
quit;

*****  building the list of expected forms by visit number ;
proc sql;
  create table expected as 
    select  x.*,
            y.*

    from visit_rec as x right join crfrule as y
      on x.visit = y.visit

    order by visit, cid, pid, form;
quit;

*****  so now I have a list of which forms that **SHOULD** have been filled out by each person  ;

*****  now, I just need to know if they were filled out or not...  ; 
```

* * *

我一直在尝试的策略是合并`expected`回`crf`表格，并带有一些指示每次访问缺少哪些表格。

最理想的情况是，我想生成一个包含以下内容的表：visit、cid、pid、missing_form

非常感谢任何指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T21:54:55.413

除了会做你想做的事。我不一定知道这是一般最有效的解决方案（如果你在 SAS 中这样做，几乎可以肯定不是），但鉴于你到目前为止所做的，这确实有效：

```
create table want as
    select cid,pid,visit,form from expected
    except select cid,pid,visit,form from crf
; 
```

请注意 EXCEPT - 它非常挑剔（请注意， select * 不起作用，因为您的表格顺序不同）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T06:45:40.350

我建议使用嵌套查询，也可以分两步完成。这个如何：

```
proc sql;
   create table temp as
   select distinct c.*
        , (d.visit is null and d.form is null and d.pid is null) as missing_form 
   from (
      select distinct a.pid, b.* from
      crf a, crfrule b
      ) c 
   left join crf d
   on     c.pid = d.pid 
      and c.form = d.form 
      and c.visit = d.visit
   order by c.pid, c.visit, c.form
   ;
quit; 
```

它为您提供了一个列表，其中包含 pid、form、visit 和一个指示它是否存在的布尔值的所有可能（即预期）组合。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T09:31:59.423

您可以使用左连接并使用 where 子句过滤掉右表中缺少记录的记录。

```
 select 
  e.* 
 from
  expected e left join 
  crf c on
   e.visit = c.visit and 
   e.cid = c.cid and
   e.pid = c.pid and
   e.form = c.form
 where c.visit is missing
; 
```

# c# - 如何触发 PrintPreviewDialog？

> ID：14511397
> 
> 赞同：0
> 
> 时间：2013-01-24T21:46:58.247
> 
> 标签：c#, print-preview

```
using (PrintDialog printDialog1 = new PrintDialog())
{
   if (printDialog1.ShowDialog() == DialogResult.OK)
   {
       System.Diagnostics.ProcessStartInfo info = new System.Diagnostics.ProcessStartInfo(saveAs.ToString());
       info.Arguments = "\"" + printDialog1.PrinterSettings.PrinterName + "\"";
       info.CreateNoWindow = true;
       info.WindowStyle = System.Diagnostics.ProcessWindowStyle.Hidden;
       info.UseShellExecute = true;
       info.Verb = "PrintTo";
       System.Diagnostics.Process.Start(info);
   }
} 
```

上面的代码工作正常。我只是不知道如何更改代码，以便我可以先预览 Word 文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T21:58:56.000

好的，所以我昨晚回家后在做这个，我相信我想通了。它**并不**完美，但它确实让你朝着正确的方向前进。顺便说一句，我为此创建了一个简单的`WinForms`应用程序，您需要编辑代码以满足您的需求。

编码：

```
namespace WindowsFormsApplication1
{
using System;
using System.Drawing;
using System.Windows.Forms;
using System.IO;

public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        System.Drawing.Printing.PrintDocument doc = new System.Drawing.Printing.PrintDocument();
        PrintPreviewDialog dlg = new PrintPreviewDialog();
        dlg.Document = doc;
        doc.PrintPage += new System.Drawing.Printing.PrintPageEventHandler(this.PrintPage);
        dlg.ShowDialog();
    }

    private void PrintPage(object sender, System.Drawing.Printing.PrintPageEventArgs e)
    {
        try
        {
            string fileName = @"C:\Users\brmoore\Desktop\New Text Document.txt";
            StreamReader sr = new StreamReader(fileName);
            string thisIsATest = sr.ReadToEnd();
            sr.Close();
            System.Drawing.Font printFont = new System.Drawing.Font("Arial", 14);
            e.Graphics.DrawString(thisIsATest, printFont, Brushes.Black, 100, 100);
        }

        catch (Exception exc)
        {
            MessageBox.Show(exc.ToString());
        }
    }
} 
```

}

# sql - 'SELECT IN' 项目列表包含重复项

> ID：14511398
> 
> 赞同：-4
> 
> 时间：2013-01-24T21:46:57.980
> 
> 标签：sql, tsql, select

我正在做

```
SELECT Name WHERE Id IN (3,4,5,3,7,8,9) 
```

在这种情况下，“3”ID 是重复的。查询会自动排除重复的项目，而对我来说将它们全部获取很重要。有没有办法直接在 SQL 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T21:51:46.277

该查询不排除重复项，只是没有要排除的重复项。表中只有一条 id 为 3 的记录，因为集合中有一个 3 `in ()`，所以它被包含在内，但由于集合中存在两次，所以它没有包含两次。

要获得重复项，您必须创建一个具有重复项的表结果，并根据该表加入表。例如：

```
select t.Name
from someTable t
inner join (
  select id = 3 union all
  select 4 union all
  select 5 union all
  select 3 union all
  select 7 union all
  select 8 union all
  select 9
) x on x.id = t.id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T21:52:15.357

尝试这个：

```
SELECT Name FROM Tbl 
    JOIN
     (
       SELECT 3 Id UNION ALL
       SELECT 4 Id UNION ALL
       SELECT 5 Id UNION ALL
       SELECT 3 Id UNION ALL
       SELECT 7 Id UNION ALL
       SELECT 8 Id UNION ALL
       SELECT 9 Id
     ) Tmp
     ON tbl.Id = Tmp.Id 
```

# algorithm - 使用单个数据库更新处理项目

> ID：14511408
> 
> 赞同：0
> 
> 时间：2013-01-24T21:47:37.993
> 
> 标签：algorithm, sorting

假设您正在 Netflix 上重新排序队列中的项目。对于我见过的每一个这样的例子，当你将最后一项移到顶部时，它会更新数据库中的每条记录，一次一条。

```
1\. One Fine Day              ==> change sort order from 1 to 2
2\. Two and a Half Men        ==> change sort order from 2 to 3
3\. Three Kings (move to top) ==> change sort order from 3 to 1 
```

有一个更好的方法吗？也许每次您重新订购商品时只需要一次数据库更新？考虑一下：

```
1\. One Fine Day              ==> do nothing (sort order stays at 1)
2\. Two and a Half Men        ==> do nothing (sort order stays at 2)
3\. Three Kings (move to top) ==> change sort order from 3 to 0 
```

在其他两个项目之间移动一个项目将拆分排序顺序之间的差异：

```
1\. One Fine Day              ==> do nothing (sort order stays at 1)
2\. Two and a Half Men        ==> do nothing (sort order stays at 2)
3\. Three Kings (move to mid) ==> change sort order from 3 to 2.5 
```

更进一步，我们可以使用比数字更大的字符集，可能会使用 base64 并按字母顺序排序，这将使您在必须重新排序所有项目以保持项目之间的工作空间之前几乎可以无限使用。

**无论如何，在求助时打你的数据库的最聪明的方法是什么？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T22:23:19.047

据我了解，您的情况如下：

1.  为简单起见，让我们假设我们有 3 个表`Movies`,`Users`和`UserPreferenes`(最后一个，带有列`UserId`,`MovieId`和`Ordinal`)。
2.  每次用户改变他对他最喜欢的电影排序的偏好时，我们都应该更新`UserPreferences`表格。
3.  但这通常需要更新**至少 2 条记录**`Ordinal`的列（有一些例外，但我不会将整体逻辑缩小到这些情况）
***   那么问题来了：我们如何才能避免多次更新而只更新一条记录呢？**

 **如果上述情况正确，则解决方法是[**denormalization**](http://en.wikipedia.org/wiki/Denormalization)。没有通用的解决方案，并且您选择的每个方向都有警告的风险，我建议您应该考虑以下几种替代方案：

1.  要在 中没有三列，而只有两列`UserPreferences`，通过保留该`UserId`列并将用户最喜欢的电影 ID 的序列存储在另一列中，`OrderedMovieIds`.

2.  要将`Ordinal`列转换为表示用户偏好的有限列数：`Ordinal1`, `Ordinal2`, ... `OrdinalN`（当然这受表最大列数的限制）。**

# html5-video - 如何快速处理 HTML5 中的视频帧？

> ID：14511410
> 
> 赞同：2
> 
> 时间：2013-01-24T21:47:43.547
> 
> 标签：html5-video

我正在测试 HTML5 的视频 API。计划是播放带有效果的视频，例如将其设置为黑白。我有并且使用缓冲区一起工作。我获取当前视频帧并复制到暂存缓冲区，我可以在其中处理它。问题在于它的运行速度。

HTML5 的视频 API 有 'timeupdate' 事件。我尝试使用它来让处理程序处理帧，每帧一次，但它的运行速度比视频慢。

有什么想法可以加快处理帧的速度吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-25T04:29:44.703

[您可以通过使用requestAnimationFrame](http://paulirish.com/2011/requestanimationframe-for-smart-animating/)来确定何时更新您的画布，而不是依赖每 200-250 毫秒更新一次的 ，您可以获得更频繁的重绘`timeupdate`。对于精确到帧的动画来说，这绝对是不够的。`requestAnimationFrame`最多每 16 毫秒更新一次（大约 60 fps），但浏览器会根据需要对其进行节流并与视频缓冲区绘制调用同步。这几乎正​​是你想要的这种东西。

即使帧速率更高，使用 2D 画布处理视频帧也会非常缓慢。一方面，您在 CPU 中按顺序处理每个像素，运行 Javascript。另一个问题是您正在复制大量内存。无法直接访问视频元素中的像素。相反，您必须先将整个框架复制到画布中。然后，您必须调用`getImageData`，这不仅会再次复制整个帧，而且还必须再次分配整个内存块，因为它`ImageData`每次都会创建一个新的。如果您可以复制到现有缓冲区中会很好，但您不能。

事实证明，您可以使用 WebGL 进行极快的图像处理。为此，我编写了一个名为[Seriously.js的库。](https://github.com/brianchirls/Seriously.js)查看[wiki](https://github.com/brianchirls/Seriously.js/wiki)以获取常见问题解答和教程。您可以使用一个色相/饱和度插件 - 只需将饱和度降至 -1 即可让您的视频变为灰度。

代码将如下所示：

```
var composition = new Seriously();
var effect = composition.effect('hue-saturation');
var target = composition.target('#mycanvas');
effect.source = '#myvideo';
effect.saturation = -1;
target.source = effect;
composition.go(); 
```

使用 WebGL 的最大缺点是并非所有浏览器或计算机都支持它 - Internet Explorer 已经过时，任何带有旧的或奇怪的视频驱动程序的机器也是如此。大多数移动浏览器不支持它。你可以在[这里](http://webglstats.com/)和[这里](http://caniuse.com/#search=webgl)得到很好的统计数据。但是你可以在相当大的视频上获得非常高的帧速率，即使是更[复杂的效果](http://seriouslyjs.org)。

（还有一个浏览器错误的小问题，奇怪的是，它同时出现在[Chrome](http://code.google.com/p/chromium/issues/detail?id=96160)和[Firefox](https://bugzilla.mozilla.org/show_bug.cgi?id=686955)中。您的画布通常会在视频后面一帧，这只有在视频暂停时才会出现问题，并且是最令人震惊的如果您跳过。唯一的解决方法似乎是继续强制更新，即使您的视频被暂停，这样效率较低。请随时投票给这些票，以便他们得到一些关注。）

# c# - 使用获取 System.Windows.Baml2006.TypeConverterMarkupExtension 错误的触发器更改图像

> ID：14511412
> 
> 赞同：0
> 
> 时间：2013-01-24T21:47:48.503
> 
> 标签：c#, wpf, triggers

我写了这段代码：

```
<Image>
   <Image.Style>
      <Style TargetType="{x:Type Image}">
         <Style.Triggers>
            <DataTrigger Binding="{Binding MyProperty}" Value="Play">
               <Setter Property="Source" Value="bin\debug\Tasto Play.jpeg"/>
            </DataTrigger>
            <DataTrigger Binding="{Binding MyProperty}" Value="Pause">
               <Setter Property="Source" Value="bin\debug\Tasto Pause.jpeg"/>
            </DataTrigger>
         </Style.Triggers>
       </Style>
   </Image.Style>
</Image> 
```

但是当我运行调试时，会出现错误。错误是 System.Windows.Baml2006.TypeConverterMarkupExtension。

MyProperty 是字符串。

有人能帮我吗？

谢谢，雅各布。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T15:20:05.337

要将图像作为资源添加到项目中，您必须单击“Visual Studio 菜单栏”中的“项目”，然后单击“项目属性”。然后会在您的屏幕上打开一个带有各种工具栏（如互联网）的窗口。选择“资源工具栏”（在[http://i.stack.imgur.com/IjC0w.jpg](http://i.stack.imgur.com/IjC0w.jpg)查看图像）并单击窗口顶部的“添加资源”按钮附近的箭头。单击“添加现有文件”并选择文件。然后进入“探索解决方案窗口”并打开将包含新资源的“调试文件夹”。在您添加的新资源上单击“鼠标右键”，然后单击“属性”。在您的屏幕左侧将出现一个“属性窗口”。

您必须在“资源”项中选择“编译操作”。现在您可以将图像用作 wpf 中的资源。

我希望这会有所帮助。雅格布

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T23:32:28.597

我认为可能是`MyProperty`属性类型：如果是字符串，则没有问题，但如果是，例如枚举，则必须设置类型：

```
 <Image>
   <Image.Style>
      <Style TargetType="{x:Type Image}">
         <Style.Triggers>
            <DataTrigger Binding="{Binding MyProperty}" Value="{x:Type namespace:EnumType.Play}">
               <Setter Property="Source" Value="bin\debug\Tasto Play.jpeg"/>
            </DataTrigger>
            <DataTrigger Binding="{Binding MyProperty}" Value="{x:Type namespace:EnumType.Pause">
               <Setter Property="Source" Value="bin\debug\Tasto Pause.jpeg"/>
            </DataTrigger>
         </Style.Triggers>
       </Style>
   </Image.Style>
</Image> 
```

也许可能是 setter 属性，源（我认为）是 Uri 类型，也许你没有很好地格式化字符串，也许你必须使用绝对 uri（用于测试），但我认为它不是一个格式化良好的字符串路径，因此 Xaml 的转换器无法正确创建 Uri 类型。

希望这可以帮助，或者给你一些想法。

# javascript - removeClass 不适用于 $(this).attr('class') 但 $(this).attr('id')

> ID：14511417
> 
> 赞同：0
> 
> 时间：2013-01-24T21:47:59.247
> 
> 标签：javascript, jquery, removeclass

我有这个问题，因为我减少了我的 jQuery 代码的大小。基本功能是验证表单，如果为空`addClass('highlight')`或`removeClass('highlight')`. 如果我使用它可以正常工作`$(this).attr('id')`，但是当我尝试使其整洁并更改为 时`$(this).attr('class')`，`removeClass('highlight')`停止工作。我唯一注意到的是有三个`.text` `class`，我无法找出原因。请帮忙。

问题代码： http: [//jsfiddle.net/designpromote/GRG2J/](http://jsfiddle.net/designpromote/GRG2J/) 工作代码（$(this).attr('id')）：http: [//jsfiddle.net/designpromote/GRG2J/4/](http://jsfiddle.net/designpromote/GRG2J/4/) or /3/ (无开关）

我使用`switch{}`是因为我需要验证不同类型的输入。

代码列表如下：

```
<!doctype html>
<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script>
$(function() {
$('#myform :input').blur(function() {
    switch($(this).attr('class')) {
        case  'text': 
            if($(this).val() == "") { console.log($(this),  $(this).val()); $(this).addClass('highlight');}
            else {console.log($(this), $(this).val()); $(this).removeClass('highlight');}
            break;
        default:
            break;
    }http://stackoverflow.com/editing-help
});
 })
 </script>
 <style>
.highlight {
border: 2px solid red;
}
</style>
</head>
<body>
<form id="myform">
<input type='text' name='business' id='business' class='text'><br>
<input type='text' name='address' id='address' class='text'><br>
<input type='text' name='city', id='city' class='text'>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T22:08:39.750

使用数据属性存储字段“类型”

[http://jsfiddle.net/GRG2J/8/](http://jsfiddle.net/GRG2J/8/)

```
<form id="myform">
    <input type='text' name='business' id='business' data-type='text'><br>
    <input type='text' name='address' id='address' data-type='text'><br>
    <input type='text' name='city', id='city' data-type='text'>
    </form>

$(function() {
    $('#myform').on('blur', ':input', function() {
        var $this = $(this),
            val = $this.val();
        switch($this.data('type')) {
            case  'text': 
                $this.toggleClass('highlight', !val);
                break;
            default:
                break;
        }
    })
}) 
```

并运行任何 js minifier 进行生产

```
$(function(){$("#myform").on("blur",":input",function(){var a=$(this),b=a.val();switch(a.data("type")){case"text":a.toggleClass("highlight",!b);break;default:break}})}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T21:55:54.780

该函数将返回您拥有的所有类，从而返回`text highlight`不是您的选项之一。您可能想改用该功能`hasClass`。

[http://jsfiddle.net/GRG2J/6/](http://jsfiddle.net/GRG2J/6/)

编辑：我刚刚意识到您提到您有多个类，因此使用 a `switch`，这可能会给您当前的实现带来问题，因为`highlight`除了类之外还添加了您的`text`类。这也解释了为什么 ID 会起作用，因为您只能为每个元素分配一个 ID。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T22:09:45.723

这个解决方案可能很冗长，但下个月更容易维护。

```
$(function() {
  var theClass = 'highlight';
  $('#myform .text').blur(function() {
    // set meaningful variables
    var element = $(this)
      , isEmpty = (element.val() == '')
      , isHighlighted = element.hasClass(theClass)
      ;
    // perform action
    if (isEmpty && !isHighlighted) element.addClass(theClass);
    if (!isEmpty && isHighlighted) element.removeClass(theClass);
  });
}); 
```

# android - 锁屏上的活动 - 关闭它会恢复以前的活动

> ID：14511419
> 
> 赞同：5
> 
> 时间：2013-01-24T21:48:05.193
> 
> 标签：android, android-activity, lockscreen, keyguard

假设我的应用程序运行正常，显示 Activity A。然后用户锁定手机。A 尽职尽责地睡觉 ( `onPause()`)。在屏幕关闭的某个时候，我需要向用户展示一些东西。因此，从我的后台代码（服务）中，我为 B 调用 startActivity，并传递以下标志：

```
FLAG_ACTIVITY_CLEAR_TOP
FLAG_ACTIVITY_NEW_TASK 
```

在`onCreate()`B 中，我添加了以下窗口标志

```
FLAG_SHOW_WHEN_LOCKED 
FLAG_TURN_SCREEN_ON 
FLAG_DISMISS_KEYGUARD 
```

一切正常 - B 现在出现在键盘保护的顶部。

稍后，我希望解雇 B，因此在 BI call`dismiss()`中，按预期工作。这就是问题所在：我现在没有返回锁定屏幕，而是在锁定屏幕顶部运行了 A。

当我解雇 B 时，如何阻止操作系统恢复 A？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T07:20:10.027

如果我猜对了，Android 只会在属于您的应用的 Activity 堆栈上显示下一个 Activity。我会尝试调用另一个应用程序，例如 Activity B 退出时的主屏幕，这样锁屏就会跳到前面。

您也可以尝试使用标志[`FLAG_ACTIVITY_EXCLUDE_FROM_RECENTS`](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_EXCLUDE_FROM_RECENTS)：

> 如果设置，则新活动不会保留在最近启动的活动列表中。

# php - 根据复选框将参数附加到 URL

> ID：14511421
> 
> 赞同：0
> 
> 时间：2013-01-24T21:48:17.803
> 
> 标签：php, javascript

所以我在一个表单中有一个包含 8 个复选框的列表。这些复选框应该控制将在框架中加载的链接。但是我不知道从哪里开始...
Checkbox1(appendThis1) - 检查
Checkbox2(appendThis2)
Checkbox3(appendThis3) - 检查
Checkbox4(appendThis4)
Checkbox5(appendThis5) - 检查
Checkbox6(appendThis6)
Checkbox7(appendThis7)
Checkbox8(appendThis8)

因此，基于此，我将有一个基本 URL，例如[http://www.google.com](http://www.google.com)，并且由于 checkbox1、3 和 5 检查了 appendThis1、appendThis2、appendThis3 将被添加到 url 的末尾，但没有一个其他复选框会将任何内容附加到 URL。每个复选框都会向 URL 添加或删除其特定参数。
同样，每当检查复选框时，它将重新加载URL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T22:10:36.937

我会这样做的方式如下

*   确保在您的 html 表单中，所有复选框都具有相同的名称，最后带有空方括号，这样您将在 php.ini 中返回一个数组。作为值，您应该设置要附加到 html 的字符串。像这样的东西：

`<input type="checkbox" value="q=something" name="myCheckboxes[]" /> option 1
<input type="checkbox" value="lang=en" name="myCheckboxes[]" /> option 2
...`

*   在您的 php 代码中，只需将您通过帖子返回的 内爆 te 数组，并将其附加到您的 html 中。（在此处查看更多信息[http://www.html-form-guide.com/php-form/php-form-checkbox.html](http://www.html-form-guide.com/php-form/php-form-checkbox.html)）。伪代码如下所示：

    `$url = 'http://www.google.com?';
    $checkboxes = $_POST['myCheckboxes'];
    $url .= implode('&', $checkboxes);`

*   对于选中复选框时的自动提交，您将需要一些客户端脚本。我的选择是 jQuery，它看起来像这样：

    `$('#myForm input[type="checkbox"]').change(function() {
    $('#myForm').submit();
    };`

请注意，没有任何代码经过测试，但它应该可以正常工作，或者至少可以为您指明正确的方向。当然欢迎指正！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T22:10:52.540

原始 Javascript 示例。您可以使用生成的 URL 来加载 iframe。

[jsFiddle](http://jsfiddle.net/d47uW/1/)

```
<script language='javascript'>

arr_sel = new Array();

function constructURL(cv)
{
  if (arr_sel.length==0)
  {
     arr_sel.push(cv);
  } else {

    if (inArray(cv, arr_sel))
    {
        key = getKey(cv, arr_sel);
        arr_sel.splice(key,1);
    } else {
        arr_sel.push(cv);
    }

  }
  makeURL(arr_sel);

}
function inArray(val, arr) 
{
    var length = arr.length;
    for(var i = 0; i < length; i++) {
        if(arr[i] == val) return true;
    }
    return false;
}

function getKey(val, arr)
{
  for (var i = 0; i < arr.length; i++) 
  {
    if (arr[i]==val)
      return i
  }
}

function makeURL(arr_sel)
{

  opts = new String; 
  arr_opts = new Array();
  for (var i = 0; i < arr_sel.length; i++) 
  {
    arr_opts.push(arr_sel[i]);
  }
  url = 'http://google.com?' + arr_opts.join('&');

  document.getElementById('myurl').innerHTML = url;

}
</script>

<input type=checkbox name=whatever value='opt1=foo' onClick="constructURL(this.value)"> foo <br>
<input type=checkbox name=whatever value='opt2=bar' onClick="constructURL(this.value)"> bar <br>

<div id='myurl'>http://google.com?</div> 
```

# javascript - Javascript Pre-defined Function

> ID：14511426
> 
> 赞同：-3
> 
> 时间：2013-01-24T21:48:54.673
> 
> 标签：javascript

```
function processForm() {

    var temperature = document.tempForm.temp.value;

} 
```

According to designed button,I want to take temperature value from text field and to convert numeric value then store it in variable "temperature" that I defined.

JavaScript has a built-in function called Number(). It converts the value in parentheses to a number that can be used in calculations. If it is not a number, it will return NaN (Not a Number).

How can I do this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T21:50:44.137

```
temperature = temperature *1; 
```

or

```
temperature = +temperature; 
```

temperature will be NaN if it is not a number

# java - 代理的原始类名（无需手动字符串操作）

> ID：14511433
> 
> 赞同：10
> 
> 时间：2013-01-24T21:49:12.493
> 
> 标签：java, class, jakarta-ee, proxy, cdi

在 Java 中，如何获取 Java EE (CDI) 代理的原始类对象和/或类名？

在代理实例上使用`getName()`时，返回的名称类似于

```
com.company.employeemgmt.EmployeeManager$Proxy$_$$_WeldSubclass 
```

Java SE (7) 或 EE (6) 中是否有一些功能会返回原始的、未代理的类实例或其名称？

我需要：

```
com.company.employeemgmt.EmployeeManager 
```

当然，我可以简单地使用字符串操作，但我想知道这样的功能是否已经是 Java-(EE) 内置的。

我已经找到了`java.reflect.Proxy`，我可以用它来检测代理：

```
public static void doSomething( Class<? implements Serializable> managerClass )
{
    if ( Proxy.isProxyClass( managerClass ) )
    {
        // unproxy how?
        managerClass = managerClass.getUnproxiedClass();
    }

    // delegate
    doSomething( managerClass.getName() );
}

public static void doSomething( String prefix )
{
    // do real work
    ...
} 
```

...，但你会如何取消引用原来的类？

**更新：**

诀窍是访问`MyUtil.doSomething( EmployeeManager.class )`（或 `MyUtil.doSomething( EmployeeManager.class.getName() )`），但我想从所有客户端使用/传递`MyUtil.doSomething( this.getClass() )`（或 `MyUtil.doSomething( this.getClass().getName() )`），因为无需手动更改即可复制此代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-03-18T06:37:49.217

由于代理类继承自原始类，我认为可以通过获取代理超类来获取原始类。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-25T11:57:06.723

*这取决于*. 您可以使用[Proxy.getInvocationHandler(manager)](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/Proxy.html#getInvocationHandler%28java.lang.Object%29)获取代理的[InvocationHandler](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/InvocationHandler.html)。唉，InvocationHandler 是一个只有一个方法的接口，没有让你获得目标类的功能；这一切都取决于实施。`invoke`

例如，CXF web servcie 框架有一个[Client](http://grepcode.com/file/repo1.maven.org/maven2/org.apache.cxf/cxf-api/2.7.0/org/apache/cxf/endpoint/Client.java#Client)并使用[ClientProxy](http://grepcode.com/file/repo1.maven.org/maven2/org.apache.cxf/cxf-rt-frontend-simple/2.7.0/org/apache/cxf/frontend/ClientProxy.java#ClientProxy)作为关联的调用处理程序，您可以这样获取 Client：

```
ClientProxy handler = (ClientProxy)Proxy.getInvocationHandler(proxiedObject);
Client client = handler.getClient(); 
```

雪上加霜的是，您可能正在使用的[WeldInvocationHandler](http://grepcode.com/file/repository.jboss.org/nexus/content/repositories/releases/org.jboss.ws/jbossws-jboss600/4.0.0.Alpha1/org/jboss/webservices/integration/weld/WeldInvocationHandler.java)似乎只是将调用委托给[org.jboss.wsf.spi.invocation.InvocationHandler](http://grepcode.com/file/repository.jboss.org/nexus/content/repositories/releases/org.jboss.ws/jbossws-spi/2.0.0.Alpha2/org/jboss/wsf/spi/invocation/InvocationHandler.java#InvocationHandler)，它将其委托存储在私有字段中。所以你需要用反射做一些魔法来找出目标对象的实际类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-03T13:29:39.500

由于代理实现了它代理的接口，因此您可以使用它`Class<?>[] Class.getInterfaces()` 来找出代理类。

```
private Class<?> findProxiedClass(Object proxiedObject) {

    Class<?> proxiedClass = proxiedObject.getClass();

    if (proxiedObject instanceof Proxy) {
        Class<?>[] ifaces = proxiedClass.getInterfaces();
        if (ifaces.length == 1) {
            proxiedClass = ifaces[0];
        } else {
            // We need some selection strategy here
            // or return all of them
            proxiedClass = ifaces[ifaces.length - 1];
        }
    }
    return proxiedClass;
} 
```

测试它

```
@Test
public void testProxies() {

    InvocationHandler handler = new InvocationHandler() {
        @Override
        public Object invoke(Object proxy, Method method, Object[] args)
                throws Throwable {
            return null;
        }
    };

    RandomAccess proxiedIface = (RandomAccess) Proxy.newProxyInstance(
            RandomAccess.class.getClassLoader(),
            new Class[] { RandomAccess.class },
            handler);

    Assert.assertEquals(RandomAccess.class, findProxiedClass(proxiedIface));
    Assert.assertEquals(Object.class, findProxiedClass(new Object()));
} 
```

# python - Python - 从长路径获取文件名

> ID：14511435
> 
> 赞同：2
> 
> 时间：2013-01-24T21:49:22.227
> 
> 标签：python, path

我有很长的文件路径，例如：

```
D:%5CMedia%5CMusic%20Videos%5CAlexis%20Jordan%20-%20Good%20Girl%2Emkv 
```

从那里获取文件名的最佳方法是什么，所以我最终得到：

```
Alexis Jordan - Good Girl 
```

从那里我想将艺术家和标题分成单独的部分，但我可以做到:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T22:00:26.567

首先，您需要解码 URL 编码，[`urllib.unquote()`](http://docs.python.org/2/library/urllib.html#urllib.unquote)然后使用[`os.path`模块](http://docs.python.org/2/library/os.path.html)拆分文件名和扩展名：

```
import os
import urllib

path = urllib.unquote(path)
filename = os.path.splitext(os.path.basename(path))[0] 
```

where[`os.path.basename()`](http://docs.python.org/2/library/os.path.html#os.path.basename)删除目录路径，并[`os.path.splitext()`](http://docs.python.org/2/library/os.path.html#os.path.splitext)为您提供文件名和扩展名元组。

然后，这将为您提供文件名：

```
>>> import os
>>> import urllib
>>> path = 'D:%5CMedia%5CMusic%20Videos%5CAlexis%20Jordan%20-%20Good%20Girl%2Emkv'
>>> path = urllib.unquote(path)
>>> path
'D:\\Media\\Music Videos\\Alexis Jordan - Good Girl.mkv'
>>> filename = os.path.splitext(os.path.basename(path))[0]
>>> filename
'Alexis Jordan - Good Girl' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T21:59:53.657

```
from urllib2 import unquote
from os.path import basename

p = 'D:%5CMedia%5CMusic%20Videos%5CAlexis%20Jordan%20-%20Good%20Girl%2Emkv'
fname = basename(unquote(p)) 
```

# soap - 将 Rails SOAP 响应错误从模型传回控制器

> ID：14511439
> 
> 赞同：0
> 
> 时间：2013-01-24T21:49:54.590
> 
> 标签：soap, ruby-on-rails-3.2, savon

我有一个正在开发的 Rails 应用程序，它采用提交的表单，使用 SAVON gem 通过 SOAP 调用发送它，然后收到一条错误消息。

我的问题是：如何将模型中收到的返回错误消息传递回控制器，我可以在其中闪烁它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T07:05:13.650

经过数小时的工作、令人难以置信的挫败感以及对我所知道的基础的质疑，它最终成为了一个错字。

对于那些在这里找到自己的方式的人，这是将错误从模型传递到控制器的一种方法，该错误随后会显示在您的视图中：

```
# In your model
self.errors.add(:base, "#{error.to_s}")

# In your controller
flash.now[:error] = "#{@user.errors.full_messages.to_sentence}"

# In your view
<%= content_tag(:div, flash[:error], :id => "flash_error") if flash[:error] %> 
```

# sql - delphi 有 ExecSQL 成功还是失败

> ID：14511442
> 
> 赞同：3
> 
> 时间：2013-01-24T21:50:06.240
> 
> 标签：sql, delphi, ms-access

您好，我有这个功能可以使用 TUniQuery 更新我的 Access DB：

```
var
  Res:Boolean;
begin
Res:=false;
  try
  with MyQuery do
  begin
    Active := false;
    SQL.Clear;
    SQL.Add('Update MYTABLE');
    SQL.Add('set username='+QuotedStr(NewUserName));
    SQL.Add(',password='+QuotedStr(NewPassword));
    SQL.Add('where username='+QuotedStr(ACurrentUserName));
    ExecSQL;
    Res:=true;
  end;
  except
  Res:=False;
  end ;
  Result:=Res;
end; 
```

是否使用 Try...except 足以知道“ExecSQL”何时成功或失败？

还是有其他更好的方法？

谢谢你

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-24T21:57:43.663

如果没有引发异常，您可能希望认为更新成功。这意味着数据库可以响应并解析并执行您的语句，而不会出现语法错误。

在如图所示的语句中，您可能还想确保恰好**更新了一行**，因为我认为这是您的意图。

要检查这一点，您可以使用 ExecSQL 方法的结果，该方法返回受语句执行影响的行数。因此，您可以将代码更改为：

```
begin
  with MyQuery do
  begin
    Active := false;
    SQL.Clear;
    SQL.Add('Update MYTABLE');
    SQL.Add('set username='+QuotedStr(NewUserName));
    SQL.Add(',password='+QuotedStr(NewPassword));
    SQL.Add('where username='+QuotedStr(ACurrentUserName));
    Result := ExecSQL = 1; //exactly 1 row updated
  end;
end; 
```

我还更改了无条件异常处理程序，因为它可能不是处理任何异常的适当位置，并且还删除了存储结果的局部变量，因为这确实没有必要。

阅读您添加的文字并重新思考您的问题后：

> 是否使用 Try...except 足以知道“ExecSQL”何时成功或失败？

你真的必须改变你对异常处理和从这个例程返回布尔值的想法。异常是作为一个全新概念引入的，关于如何解决程序中的异常和错误情况，但是您正在扼杀这种全新的（恕我直言）方法，并诉诸旧方法来返回指示成功或失败的值。

特别是`try/exception`吃掉任何异常的块是一种不好的做法，因为您将杀死可能由于太多原因引发的异常：内存不足、网络问题（如与数据库的连接丢失等）。

您必须重新考虑您的方法并在应用程序的适当级别处理这些异常或错误情况。

我的建议是：

*   将其从函数更改为过程，新合约是：仅在成功时才返回，否则引发异常。
*   如果发生异常，让它飞出常规并在其他地方处理这种情况
*   如果没有准确地更新 1 行，请提出您自己的异常
*   更改查询以使用参数（避免 sql 注入）

例程可能如下所示：

```
procedure TMySecurityManager.ChangeUserNameAndPassword();
begin
  MyQuery.SQL.Text := 'Update MYTABLE'
              + '   set username = :NewUserName'
              + '       , password = :NewPassword'
              + ' where username = :username';
  MyQuery.Params.ParamByName('NewUserName').AsString := NewUserName;
  MyQuery.Params.ParamByName('NewPassword').AsString := NewPassword;
  MyQuery.Params.ParamByName('username').AsString := ACurrentUserName;
  if MyQuery.ExecSQL <> 1 then
      raise EUpdateFailed.Create('A internal error occurred while updating the username and password');
  //EUpdateFailed is a hypotetical exception class you defined.
end; 
```

# php - 从 URL 获取 PDF 的原始创建日期

> ID：14511443
> 
> 赞同：2
> 
> 时间：2013-01-24T21:50:08.503
> 
> 标签：php, url, date, pdf

我正在使用此 URL 末尾的 pdf

```
https://www2.blackrock.com/webcore/litService/search/getDocument.seam?venue=PUB_INS&source=CONTENT&serviceName=PublicServiceView&ContentID=51648 
```

通过查看它，我们可以看到它是`12/31/2012`版本。有没有办法可以在 pdf 本身上获取一些时间戳数据？上传日期、创建日期、修改日期，以及该范围内的任何内容？

我已经尝试了以下并且都返回`12/31/1969`

```
$pdfURL = 'https://www2.blackrock.com/webcore/litService/search/getDocument.seam?venue=PUB_INS&source=CONTENT&serviceName=PublicServiceView&ContentID=51648';
$rawPDF = file_get_contents($pdfURL);
echo date("F d Y H:i:s.", filemtime($pdfURL));

-AND-

echo date("F d Y H:i:s.", filemtime($rawPDF)); 
```

我也试过

```
$headerArray = array();
$headerArray = get_headers($pdfURL, 1);
echo "<PRE>";
var_dump($headerArray);
echo "</PRE>"; 
```

但是`Last-Modified`在标头数组中不存在

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T19:35:49.497

我之前回答过，因为我只提供了一个链接，版主删除了我的答案并转换为评论。现在让我们根据我们的评论尝试更完整的答案：

根据我的分析，给定链接的 HTTP 标头包含 Last-modified 字段。但前提是链接直接指向文件。但是，当您看到链接是那种类型时`somepage.pgp?file=file.pdf`，Last-modified 将不存在。在第一种情况下，`get_headers()`可以使用 php 函数来读取相关字段。我是后一种情况，恐怕我帮不了你。

# sql - 试图在sql server中将所有'NULL'的字符串值更新为NULL

> ID：14511444
> 
> 赞同：4
> 
> 时间：2013-01-24T21:50:08.970
> 
> 标签：sql, sql-server

我有一个从其中包含的 csv 文件导入的数据库表`NULL`，因此当它被导入而不是字段为 NULL 时，它们包含字符串 value `'NULL'`。

CSV 文件太大，无法在文本编辑器中打开以编辑所有内容，`NULL`因此我试图创建一个 SQL 查询来更新表的每一列。

到目前为止我有这个

```
Alter PROCEDURE [dbo].[sp_fixnulls]
     @column nvarchar(100) 
AS
BEGIN
     SET NOCOUNT ON;
     UPDATE my_table
     SET @column=''
     WHERE @column = 'NULL'
END 

---------------

sp_fixnulls (SELECT column_name FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME  ='my_table') 
```

但这不起作用。我收到错误消息

> *消息 201，级别 16，状态 4，过程 sp_fixnulls，第 0 行
> 过程或函数“sp_fixnulls”需要未提供的参数“@column”。*

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-24T21:52:52.227

@column 是一个变量。它不能动态地将其内容换出到 SQL 中。您需要使用 TSQL 来完成此操作，从而将 SQL 生成为字符串然后执行它。如：

```
DECLARE @sql VARCHAR(MAX)
SET @sql = '
UPDATE my_table
SET ' + @column + '=''''
WHERE ' + @column + ' = ''NULL''
'

EXEC (@sql) -- don't forget the parentheses 
```

一个小提示，我的代码将列设置为空字符串，这与 NULL 不同。我选择了您现有的示例。如果你想要NULL，那么

```
SET ' + @column + '= NULL 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-24T22:56:40.590

> “消息 201，级别 16，状态 4，过程 sp_fixnulls，第 0 行过程或函数“sp_fixnulls”需要参数“@column”，但未提供。

您收到的错误是因为您试图将 select 语句作为参数传递给存储过程。如果您只将一列的名称传递给存储过程，您将克服该错误。

然后你不会得到另一个错误，但你不会得到你想要的结果。如果您按照 Eli 的建议修复您的存储过程（正如我评论的那样`@sql`，在`EXEC`语句中添加括号），它将起作用。

然后你需要用游标包装你的存储过程（大多数人不推荐，但在需要时可以使用）。或者，您可以只选择所有列名并生成一堆执行语句，然后运行这些语句。

```
SELECT 'EXECUTE sp_fixnulls N''' + column_name + ''';'
        FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'my_table'; 
```

这将生成如下语句（假设表具有列`id`、`name`和`date`）。

```
EXECUTE sp_fixnulls N'id';
EXECUTE sp_fixnulls N'name';
EXECUTE sp_fixnulls N'date'; 
```

另一种选择是完全放弃存储过程。

```
SELECT 'UPDATE my_table SET ' + column_name
        + ' = NULL WHERE ' + column_name + ' = ''NULL'';'
        FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'my_table'; 
```

这将生成如下语句。

```
UPDATE my_table SET id = NULL WHERE id = 'NULL';
UPDATE my_table SET name = NULL WHERE name = 'NULL';
UPDATE my_table SET date = NULL WHERE date = 'NULL'; 
```

# xcode - 了解核心数据查询（搜索数据以获取唯一属性）

> ID：14511449
> 
> 赞同：0
> 
> 时间：2013-01-24T21:50:43.403
> 
> 标签：xcode, core-data, one-to-many

由于我来自那些广泛使用 sqlite 的程序员，也许我很难理解 Core Data 如何管理多对多关系。

对于我的游戏，我在纸上有一个简单的数据库模式。

```
Entity: Level - this will be the table that has all information about each game level

Attributes: levelNumber(String), simply the level number
          : levelTime(String), the amount of time you have to finish the level(this time will vary with the different levels)
          : levelContent(String), a list of items for that level(and that level only) separated by commas
          : levelMapping(String), how the content is layed out(specific for a unique level) 
```

所以基本上在核心数据中我想设置数据库，所以我可以在我的 fetchRequest 中说：

> 给我级别 1 的 levelTime、levelContent 和 levelMapping。（或我想要的任何级别）

我将如何建立我的关系以便我可以进行这种类型的 fetchRequest？此外，我已经准备好所有数据并提前知道它是什么。有没有办法在 XCode 中填充实体及其属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T22:20:13.793

正如您所描述的，它是一个单一的核心数据实体，称为`Level`具有四个字符串属性。因为只有一个实体，所以没有关系。您将创建一个实体并添加属性，使其看起来就像您在上面描述的一样：

![在此处输入图像描述](../Images/ebb60aa70ac454feb619af2e20c2f412.png)

只获取一个`Level`是基本的核心数据获取：

```
NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"Level"];
NSString *levelNumber = @"1";
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"levelNumber = %@", levelNumber];
[request setPredicate:predicate];

NSError *error = nil;
NSArray *results = [[self managedObjectContext] executeFetchRequest:request error:&error];
NSManagedObject *level = nil;
if ([results count] > 0) {
    level = [results objectAtIndex:0];
}

// Use level... 
```

如果是我，我会使用其中一种数字类型`levelNumber`，但也许你有一些理由在那里使用字符串。我也可能会拆分`levelContent`成一个单独的实体，因为（a）逗号分隔的字符串很难看，无论您如何切片它们，并且（b）您可能希望这些项目具有更多属性，并且一个单独的实体将持有那些。

# r - 如何将高斯拟合到R中的直方图？

> ID：14511454
> 
> 赞同：1
> 
> 时间：2013-01-24T21:50:54.197
> 
> 标签：r, curve-fitting

> **可能重复：**
> [将密度曲线拟合到 R 中的直方图](https://stackoverflow.com/questions/1497539/fitting-a-density-curve-to-a-histogram-in-r)
> [最佳拟合曲线来自 R 中的绘图](https://stackoverflow.com/questions/7502027/best-fitting-curve-from-plot-in-r)

我有一组数据，当绘制在直方图中时是高斯分布。我已从 .csv 文件中读取数据，如下所示：

```
"values"
1.29989
1.15652
1.27818
1.19699
1.28243
1.19433
1.10991
... 
```

using `data<-read.csv("~/peak.csv")`... 所以我使用 . 创建一个直方图`hist(data$values)`。我希望能够将高斯拟合到该直方图，并将拟合函数的 sigma 和均值与从数据计算的 sigma 和均值进行比较。

我看过的所有地方都提到了`nls`，`glm`但我无法弄清楚如何使用这些函数将高斯拟合到直方图，即使在执行`?nls`and之后也是如此`?glm`。请帮忙？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T22:29:03.607

如果你想使用内置函数，你可以这样做：

```
library("MASS")
data<-read.csv("~/peak.csv")
fitdistr(data, "normal") 
```

请记住，对于高斯，这只是计算平均值和标准偏差。

# php - 从地址栏调用 URL

> ID：14511455
> 
> 赞同：0
> 
> 时间：2013-01-24T21:51:04.787
> 
> 标签：php, url, frame

我正在开发一个链接隐藏器，其中一个功能是“添加这个”社交书签小部件。它使您有机会定义将与此代码共享的 URL：

```
<div class="addthis_toolbox addthis_default_style " addthis:url="THE URL"> 
```

正如它在顶部框架中显示的那样，我希望“THE URL”成为地址栏中的 URL。事实上，它只是“共享”它所在的顶部框架的 URL。

这是示例：

[http://1max.us/go/test](http://1max.us/go/test)

我可以用什么 PHP 替换“THE URL”，让它占据整个页面，而不仅仅是顶部框架？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T07:02:00.093

I got it to work. This is what did the trick:

```
<? echo $url="".$_SERVER['HTTP_REFERER']; ?> 
```

# android - Android应用程序在启动时不断崩溃

> ID：14511462
> 
> 赞同：2
> 
> 时间：2013-01-24T21:51:27.120
> 
> 标签：android, android-layout, onclick, onclicklistener, findviewbyid

Android应用程序在启动时不断崩溃。不过，在我看来一切都很好。

堆栈跟踪：

```
01-24 21:23:41.417: I/Process(767): Sending signal. PID: 767 SIG: 9
01-24 21:41:36.316: W/Trace(890): Unexpected value from nativeGetEnabledTags: 0
01-24 21:41:36.485: W/Trace(890): Unexpected value from nativeGetEnabledTags: 0
01-24 21:41:36.515: W/Trace(890): Unexpected value from nativeGetEnabledTags: 0
01-24 21:41:36.515: D/dalvikvm(890): newInstance failed: p0 i0 [0 a1
01-24 21:41:36.515: D/AndroidRuntime(890): Shutting down VM
01-24 21:41:36.515: W/dalvikvm(890): threadid=1: thread exiting with uncaught     exception (group=0x40a70930)
01-24 21:41:36.635: E/AndroidRuntime(890): FATAL EXCEPTION: main
01-24 21:41:36.635: E/AndroidRuntime(890): java.lang.RuntimeException: Unable to     instantiate activity ComponentInfo{com.example.bmisummative/com.example.bmisummative.MainActivity}:     java.lang.InstantiationException: can't instantiate class     com.example.bmisummative.MainActivity
01-24 21:41:36.635: E/AndroidRuntime(890):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2106)
01-24 21:41:36.635: E/AndroidRuntime(890):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
01-24 21:41:36.635: E/AndroidRuntime(890):  at android.app.ActivityThread.access$600(ActivityThread.java:141)
01-24 21:41:36.635: E/AndroidRuntime(890):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
01-24 21:41:36.635: E/AndroidRuntime(890):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-24 21:41:36.635: E/AndroidRuntime(890):  at android.os.Looper.loop(Looper.java:137)
01-24 21:41:36.635: E/AndroidRuntime(890):  at android.app.ActivityThread.main(ActivityThread.java:5039)
01-24 21:41:36.635: E/AndroidRuntime(890):  at java.lang.reflect.Method.invokeNative(Native Method)
01-24 21:41:36.635: E/AndroidRuntime(890):  at java.lang.reflect.Method.invoke(Method.java:511)
01-24 21:41:36.635: E/AndroidRuntime(890):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-24 21:41:36.635: E/AndroidRuntime(890):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-24 21:41:36.635: E/AndroidRuntime(890):  at dalvik.system.NativeStart.main(Native Method)
01-24 21:41:36.635: E/AndroidRuntime(890): Caused by: java.lang.InstantiationException: can't instantiate class com.example.bmisummative.MainActivity
01-24 21:41:36.635: E/AndroidRuntime(890):  at java.lang.Class.newInstanceImpl(Native Method)
01-24 21:41:36.635: E/AndroidRuntime(890):  at java.lang.Class.newInstance(Class.java:1319)
01-24 21:41:36.635: E/AndroidRuntime(890):  at android.app.Instrumentation.newActivity(Instrumentation.java:1054)
01-24 21:41:36.635: E/AndroidRuntime(890):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2097)
01-24 21:41:36.635: E/AndroidRuntime(890):  ... 11 more
01-24 21:46:36.745: I/Process(890): Sending signal. PID: 890 SIG: 9 
```

`MainActivity`班级：

```
package com.example.bmisummative;

import android.app.Activity;
import android.content.DialogInterface;
import android.view.View.OnClickListener;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public abstract class MainActivity extends Activity implements OnClickListener {
/** Called when the activity is first created. */
Button btn,btn1,btn2;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    btn = (Button) findViewById(R.id.buttonBMI);
    btn.setOnClickListener(this);
    btn1 = (Button) findViewById(R.id.buttonGain);
    btn1.setOnClickListener(this);
    btn2 = (Button) findViewById(R.id.buttonLoss);
    btn2.setOnClickListener(this);

}

@Override
public void onClick(View v) {
  if (v.getId() == R.id.buttonBMI) {
    startActivity(new Intent(this, MainActivity.class));
  }
  if (v.getId() == R.id.buttonGain) {
    startActivity(new Intent(this, weightgain.class));
  }
  if (v.getId() == R.id.buttonLoss) {
        startActivity(new Intent(this, weightgain.class));
      }

}

}

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    tools:context=".StartingPoint" 
    android:background="@drawable/grunge">

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Main Menu"
        android:textSize="45dp"
        android:layout_gravity="center"
        android:gravity="center" 
        android:textColor="#FFFFFF"
        android:id="@+id/tvDisplay"/>

    <Button
        android:id="@+id/buttonBMI"
        android:layout_width="250dp"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:text="BMI Calculator"
        android:textSize="20dp" />

    <Button
        android:id="@+id/buttonLoss"
        android:layout_width="250dp"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:text="Weight Loss Workouts"
        android:textSize="20dp" />

    <Button
        android:id="@+id/buttonGain"
        android:layout_width="250dp"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:text="Muscle Gain Workouts"
        android:textSize="20dp" />

</LinearLayout>

<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.bmisummative"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.bmisummative.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.example.bmiworking.calculator"
            android:label="@string/app_name" >
            </activity>

            <activity
            android:name="com.example.bmiworking.weightgain"
            android:label="@string/app_name" >
            </activity>
            <activity
            android:name="com.example.bmiworking.weightloss"
            android:label="@string/app_name" >
            </activity>
            </application> 
</manifest> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T21:53:52.037

当您在清单中声明您的活动时，请尝试删除活动名称之前的包，这样您就`android:name=".MainActivity"`可以对其他活动进行同样的操作。

好吧，我的第一个答案是错误的。您的应用程序崩溃的原因是因为您已将主要活动声明为抽象删除它并且您的应用程序应该运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T22:12:05.693

你的活动不应该是抽象的。

您还应该习惯于将函数包装在至少

```
try {
   /// Do some work
} catch (Throwable t) {
   Log.e(TAG, t.getMessage(), t);
} 
```

在我的活动课程中，我将 TAG 定义为：

```
public static final String TAG = "NameMeSomethingUnique"; 
```

将字符串的值更改为通常的活动名称。

**编辑**

而不是显示你的整个班级都被重写了。我只是为 try/catch 修改 onCreate 并将 TAG 常量添加为类成员。您可以以相同的方式将 try/catch 块添加到其他方法中。

```
public class MainActivity extends Activity implements OnClickListener { // REMOVED abstract keyword - EJN
/** Called when the activity is first created. */
Button btn,btn1,btn2;
private static final String TAG = "MainActivity"; // Used to make logging easier - EJN

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    try { // Wrapped to trap any possible exceptions so we don't just crash - EJN
        setContentView(R.layout.activity_main);
        btn = (Button) findViewById(R.id.buttonBMI);
        btn.setOnClickListener(this);
        btn1 = (Button) findViewById(R.id.buttonGain);
        btn1.setOnClickListener(this);
        btn2 = (Button) findViewById(R.id.buttonLoss);
        btn2.setOnClickListener(this);
    } catch (Throwable t) {
        Log.e(TAG, t.getMessage(), t);
    }
} 
```

# asp.net - 从 HTML 编码输出中停止 ASP.NET Web 控件 > 具体来说，列出项目符号列表中的项目

> ID：14511463
> 
> 赞同：1
> 
> 时间：2013-01-24T21:51:29.070
> 
> 标签：asp.net, html-encode

我有一个 ASP.NET 项目符号列表控件，它是对列表项进行 html 编码的。

`<strong>First Name</strong> is required and must consist of letters only.`

不会导致“名字”以粗体文本输出。

如何阻止项目符号列表控件对其列表项输出进行 html 编码？

网络表单中的行是： `<asp:BulletedList ID="bltUserDetailsErrors" runat="server"></asp:BulletedList>`

然后是错误消息的中间列表：

```
userDetailsMessageList.Add(
                "<strong>First Name</strong>is required, must contain only letters, " +
                "and be no more than 50 letters."); 
```

然后将其添加到项目符号列表中：

```
bltUserDetailsErrors.Items.Clear();
            foreach (string message in userDetailsMessageList)
            {
                bltUserDetailsErrors.Items.Add(new ListItem(message));
            } 
```

是的，它绝对是 html 编码输出。

`<li>&lt;strong&gt;First Name&lt;/strong&gt;is required, must contain only letters, and be no more than 50 letters.</li>`

如何获取项目符号列表以呈现`<strong></strong>`标签，以便文本在浏览器中以粗体显示。

# android - 如何调试无障碍服务？

> ID：14511464
> 
> 赞同：9
> 
> 时间：2013-01-24T21:51:29.297
> 
> 标签：android, android-debug, accessibilityservice, android-a11y

我在调试**AccessibilityService**时遇到了一些问题并且找不到解决方案 - 每次从 Eclipse**部署/调试时，****服务都不会自动重新启动**，它需要手动重新启动服务。

我现在被迫做的事情：

1.  我正在添加一些新代码并使用 Eclipse 进行部署/调试。
2.  应用程序已正确部署并启动，但未启动**新版本的服务**（来自服务的消息未显示且断点不起作用）。
3.  我正在**手动**打开设置-> 可访问性并看到我的服务运行。
4.  我正在**手动**停止和启动服务 - 现在服务正在运行。

我想以更快的方式做到这一点：

*   我正在添加一些代码并进行部署，重新启动服务，然后断点工作，无需任何**手动无聊的重新启动**！

您能否建议如何在不手动重新启动的情况下调试无障碍服务？

# excel - 我可以使用 Offset 和 Match 在一系列结果中找到 MIN 值吗？

> ID：14511465
> 
> 赞同：0
> 
> 时间：2013-01-24T21:51:35.943
> 
> 标签：excel, match, excel-formula, offset, min

我有一个包含 2 个工作表的工作簿，`Sheet1`并且`Sheet2`.

`Sheet1`有一个要查找的值（产品代码）和一个要填充的空单元格：

```
A      B
A100
A200
B150
C3AB 
```

`Sheet2`有一堆产品代码和成本：

```
A      B
A100   35.00
A100   14.00
A100   50.00
A200   10.00
A200   12.00
etc, etc, etc 
```

我正在使用以下内容查找工作表之间的匹配项并`column B`填充`Sheet1`：

```
=IFERROR(OFFSET(Sheet2!$B$1,MATCH(A1,Sheet2!$A:$A,0)-1,0), "") 
```

我可以`MIN`在某处扔一个以提取其中的最低值`column B`吗`Sheet2`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T22:02:02.250

试试这个

将此数组公式放入`B1`of`Sheet1`并按`CTL`+ `SHIFT`+`ENTER`

```
=MIN(IF(Sheet2!$A$1:$A$5=A1,Sheet2!$B$1:$B$5)) 
```

我假设您的数据范围`Sheet2`来自`A1:B5`. 根据需要进行更改。

**截屏**

![在此处输入图像描述](../Images/9e1f890d1fc892d576ade284f53cc178.png)

# java - Java/Android - 根据字符串模式验证字符串 JSON

> ID：14511468
> 
> 赞同：16
> 
> 时间：2013-01-24T21:51:47.750
> 
> 标签：java, android, json, jsonschema

我很难找到针对给定 JSON 模式字符串验证 JSON 字符串的最简单方法（作为参考，这是在 Java 中，在 Android 应用程序中运行）。

理想情况下，我只想传入一个 JSON 字符串和一个 JSON 模式字符串，它会返回一个关于它是否通过验证的布尔值。通过搜索，我发现了以下 2 个有希望的库来实现这一点：

[http://jsontools.berlios.de/](http://jsontools.berlios.de/)

[https://github.com/fge/json-schema-validator](https://github.com/fge/json-schema-validator)

然而，第一个似乎相当过时，支持不佳。我在我的项目中实现了该库，即使使用他们的 JavaDocs，我也无法判断如何正确构建“验证器”对象以进行验证。

与第二个类似的故事，似乎是最新的，具有良好的测试代码。但是，对于我想做的事情，这很简单，对于如何具体完成我想要的事情似乎有点令人生畏和困惑（即使在查看了[ValidateServlet.java](https://github.com/fge/json-schema-validator-demo/blob/master/src/main/java/com/github/fge/jsonschema/servlets/ValidateServlet.java)文件之后）。

好奇是否有人对完成此任务的好方法有任何其他建议（从看起来），需要的简单任务，或者我是否需要坚持上面的第二个选项？提前致谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-03-07T18:05:19.530

非常感谢 Douglas Crockford 和 Francis Galiegue 编写了基于 java 的 json 模式处理器！[http://json-schema-validator.herokuapp.com/index.jsp](http://json-schema-validator.herokuapp.com/index.jsp)的在线测试器很棒！我真的很喜欢有用的错误消息（我只发现了一个失败的示例），尽管行和列和/或上下文会更好（现在，您只能在 JSON 格式错误期间获得行和列信息（由 Jackson 提供） ). 最后，我要感谢 Michael Droettboom 的*精彩*教程（即使他只涵盖了 Python、Ruby 和 C，而明显地忽略了所有语言中最好的语言 :-)）。

对于那些错过它的人（就像我一开始所做的那样），在 github.com/fge/json-schema-processor-examples 上有一些示例。虽然这些示例令人印象深刻，但它们并不是最初要求的简单 json 验证示例（我也在寻找）。简单示例位于 github.com/fge/json-schema-validator/blob/master/src/main/java/com/github/fge/jsonschema/examples/Example1.java

上面 Alex 的代码对我不起作用，但很有帮助；我的 pom 正在提取最新的稳定版本 2.0.1，并在我的 maven pom.xml 文件中插入了以下依赖项：

```
<dependency>
    <groupId>com.github.fge</groupId>
    <artifactId>json-schema-validator</artifactId>
    <version>2.0.1</version>
</dependency> 
```

然后下面的java代码对我来说很好：

```
import java.io.IOException;
import java.util.Iterator;
import com.fasterxml.jackson.core.JsonParseException;
import com.fasterxml.jackson.databind.JsonNode;
import com.github.fge.jsonschema.exceptions.ProcessingException;
import com.github.fge.jsonschema.main.JsonSchema;
import com.github.fge.jsonschema.main.JsonSchemaFactory;
import com.github.fge.jsonschema.report.ProcessingMessage;
import com.github.fge.jsonschema.report.ProcessingReport;
import com.github.fge.jsonschema.util.JsonLoader;

public class JsonValidationExample  
{

public boolean validate(String jsonData, String jsonSchema) {
    ProcessingReport report = null;
    boolean result = false;
    try {
        System.out.println("Applying schema: @<@<"+jsonSchema+">@>@ to data: #<#<"+jsonData+">#>#");
        JsonNode schemaNode = JsonLoader.fromString(jsonSchema);
        JsonNode data = JsonLoader.fromString(jsonData);         
        JsonSchemaFactory factory = JsonSchemaFactory.byDefault(); 
        JsonSchema schema = factory.getJsonSchema(schemaNode);
        report = schema.validate(data);
    } catch (JsonParseException jpex) {
        System.out.println("Error. Something went wrong trying to parse json data: #<#<"+jsonData+
                ">#># or json schema: @<@<"+jsonSchema+">@>@. Are the double quotes included? "+jpex.getMessage());
        //jpex.printStackTrace();
    } catch (ProcessingException pex) {  
        System.out.println("Error. Something went wrong trying to process json data: #<#<"+jsonData+
                ">#># with json schema: @<@<"+jsonSchema+">@>@ "+pex.getMessage());
        //pex.printStackTrace();
    } catch (IOException e) {
        System.out.println("Error. Something went wrong trying to read json data: #<#<"+jsonData+
                ">#># or json schema: @<@<"+jsonSchema+">@>@");
        //e.printStackTrace();
    }
    if (report != null) {
        Iterator<ProcessingMessage> iter = report.iterator();
        while (iter.hasNext()) {
            ProcessingMessage pm = iter.next();
            System.out.println("Processing Message: "+pm.getMessage());
        }
        result = report.isSuccess();
    }
    System.out.println(" Result=" +result);
    return result;
}

public static void main(String[] args)
{
    System.out.println( "Starting Json Validation." );
    JsonValidationExample app = new JsonValidationExample();
    String jsonData = "\"Redemption\"";
    String jsonSchema = "{ \"type\": \"string\", \"minLength\": 2, \"maxLength\": 11}";
    app.validate(jsonData, jsonSchema);
    jsonData = "Agony";  // Quotes not included
    app.validate(jsonData, jsonSchema);
    jsonData = "42";
    app.validate(jsonData, jsonSchema);
    jsonData = "\"A\"";
    app.validate(jsonData, jsonSchema);
    jsonData = "\"The pity of Bilbo may rule the fate of many.\"";
    app.validate(jsonData, jsonSchema);
}

} 
```

我从上面的代码得到的结果是：

```
Starting Json Validation.
Applying schema: @<@<{ "type": "string", "minLength": 2, "maxLength": 11}>@>@ to data: #<#<"Redemption">#>#
 Result=true
Applying schema: @<@<{ "type": "string", "minLength": 2, "maxLength": 11}>@>@ to data: #<#<Agony>#>#
Error. Something went wrong trying to parse json data: #<#<Agony>#># or json schema: @<@<{ "type": "string", "minLength": 2, "maxLength": 11}>@>@. Are the double quotes included?
 Result=false
Applying schema: @<@<{ "type": "string", "minLength": 2, "maxLength": 11}>@>@ to data: #<#<42>#>#
Processing Message: instance type does not match any allowed primitive type
 Result=false
Applying schema: @<@<{ "type": "string", "minLength": 2, "maxLength": 11}>@>@ to data: #<#<"A">#>#
Processing Message: string is too short
 Result=false
Applying schema: @<@<{ "type": "string", "minLength": 2, "maxLength": 11}>@>@ to data: #<#<"The pity of Bilbo may rule the fate of many.">#>#
Processing Message: string is too long
 Result=false 
```

享受！

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-24T22:18:37.613

这本质上就是您链接到的 Servlet 所做的，因此它可能不是单行的，但它仍然具有表现力。

`useV4`和`useId`在 servlet 上指定，用于为`Default to draft v4`和指定验证选项`Use id for addressing`。

可以在线查看：http: [//json-schema-validator.herokuapp.com/](http://json-schema-validator.herokuapp.com/)

```
public boolean validate(String jsonData, String jsonSchema, boolean useV4, boolean useId) throws Exception {
   // create the Json nodes for schema and data
   JsonNode schemaNode = JsonLoader.fromString(jsonSchema); // throws JsonProcessingException if error
   JsonNode data = JsonLoader.fromString(jsonData);         // same here

   JsonSchemaFactory factory = JsonSchemaFactories.withOptions(useV4, useId);
   // load the schema and validate
   JsonSchema schema = factory.fromSchema(schemaNode);
   ValidationReport report = schema.validate(data);

   return report.isSuccess();
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-10-13T02:18:08.930

@Alex 的回答在 Android 上对我有用，但要求我使用 Multi-dex 并添加：

```
 packagingOptions {
        pickFirst 'META-INF/ASL-2.0.txt'
        pickFirst 'draftv4/schema'
        pickFirst 'draftv3/schema'
        pickFirst 'META-INF/LICENSE'
        pickFirst 'META-INF/LGPL-3.0.txt'
    } 
```

对我`build.gradle`

# spring - SpringMVC 会话范围的对象在对控制器的后续调用之间没有被持久化

> ID：14511472
> 
> 赞同：0
> 
> 时间：2013-01-24T21:52:09.090
> 
> 标签：spring, session, spring-mvc

我有一个控制器

```
@Controller
@Scope("request")
public class CartManagementController
{
   @Autowired
   private ShoppingCart cart;

   @RequestMapping("/addToCart")
   public ModelAndView addToCart(@RequestParam("id") int id)
   {
      // now just use the cart
   }  
} 
```

和一个会话范围的bean：

```
@Component
@Scope("session")
public class ShoppingCart
{
   // just a plain java class - member variables and methods as usual
} 
```

我遇到了一个间歇性问题，即会话在对 addToCart() 的后续请求之间没有持续存在。在第一次通话时，购物车可用并添加了一些东西。在下一个请求中，正在创建一个新的购物车对象。结果，只有在两次调用 addToCart 之后，购物车中才只有一件商品。在第二次调用后，会话按预期持续。只有第一个调用没有被持久化。

# dart - DART：配置设置的最佳做法是什么

> ID：14511474
> 
> 赞同：4
> 
> 时间：2013-01-24T21:52:14.643
> 
> 标签：dart, dart-webui

PHP 等解释性语言允许使用单独的文件（通常称为 config.php）来包含字符串常量，例如服务器名称。这有助于部署，因为在更新代码时根本不会上传配置文件——服务器名称（例如 REST 事务）在部署环境中通常是不同的。

在 Dart 中，由于是编译的，所以这种方式是行不通的。如果在 HTML 中通过 {{ }} 引用了服务器名称**常量**，则似乎必须在部署之前重新编译代码。

有没有办法以这种方式指定字符串常量以避免这种重新编译要求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T10:03:19.257

我能想到几个选择：

一个技巧是将配置放入以主机名为键的映射中。在运行时，使用 window.location 作为键从地图中查找配置。这将允许将配置烘焙到 Dart 源中，但仍然允许为不同的环境指定不同的值。

如果您希望能够在编译后更改您的配置，您可以将它作为 JSON 嵌入到 HTML 源代码中，或者通过 HTTP 请求加载它。（这不是按照要求使用常量，但是，根据定义，编译后不可能更改常量）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T13:25:39.013

好的，所以简短的回答是“你不能” - 目前。但是 Dart 团队意识到了这个限制，并根据上面的评论在 dartlang 中讨论它。

# ios - 使用 Magical Record 获取不同实体的计数

> ID：14511477
> 
> 赞同：0
> 
> 时间：2013-01-24T21:52:15.730
> 
> 标签：ios, objective-c, magicalrecord

我正在尝试将 Magical Record 合并到我的项目中，并且我非常喜欢它，但是我无法弄清楚如何做的一件事是获取请求的计数。我知道您可以执行获取请求，但据我所知，Magical Record 无法对一个执行计数。我觉得它必须是一个请求的原因是因为我只想要不同对象的计数。

有谁知道有效地做到这一点的方法？即以一种不需要我实际对对象执行提取并计算结果数组的计数的方式。这个 fetch 必须尽可能快地运行，因为它有可能被相当频繁地调用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T22:23:45.787

你看过类方法吗：

```
+ (NSNumber *) MR_numberOfEntities;
+ (NSNumber *) MR_numberOfEntitiesWithContext:(NSManagedObjectContext *)context;
+ (NSNumber *) MR_numberOfEntitiesWithPredicate:(NSPredicate *)searchTerm;
+ (NSNumber *) MR_numberOfEntitiesWithPredicate:(NSPredicate *)searchTerm inContext:(NSManagedObjectContext *)context;

+ (NSUInteger) MR_countOfEntities;
+ (NSUInteger) MR_countOfEntitiesWithContext:(NSManagedObjectContext *)context;
+ (NSUInteger) MR_countOfEntitiesWithPredicate:(NSPredicate *)searchFilter;
+ (NSUInteger) MR_countOfEntitiesWithPredicate:(NSPredicate *)searchFilter inContext:(NSManagedObjectContext *)context; 
```

# php - 为 Zend_Controller_Router_Route_Module 的默认路由添加前缀

> ID：14511479
> 
> 赞同：1
> 
> 时间：2013-01-24T21:52:26.457
> 
> 标签：php, zend-framework, module, routes, zend-controller-router

我想知道是否可以将 :module/:controller/:action/* 的默认路由更改为 /my/prefix/:module/:controller/:action/* 之类的东西，保持不指定的可能性模块和/或控制器和/或动作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T22:41:25.987

您可以在 application.ini 中设置 baseUrl

```
resources.frontController.baseUrl = "my/prefix/" 
```

你当然可以不指定模块/控制器/视图，但除非你设置不同的默认模块/控制器/视图，否则它将是默认值 = 默认值/索引/索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T10:48:05.927

您必须在应用程序 ini 中设置前端控制器资源。

```
resources.frontController.baseurl = "/my/prefix/" 
```

您可以做的另一件事是将前缀添加到资源路由器中的每个路由，如下所示：

```
resources.router.routes.route-name.route = "/my/prefix/module/controller/action"
resources.router.routes.route-name.defaults.module = "module"
resources.router.routes.route-name.defaults.controller = "controller"
resources.router.routes.route-name.defaults.action = "action" 
```

# c# - 如何从 XDocument 获取 XML 节点的特定值

> ID：14511483
> 
> 赞同：0
> 
> 时间：2013-01-24T21:52:29.810
> 
> 标签：c#, .net, linq, linq-to-xml

我问的问题与这篇文章中的问题基本相同：[如何从 XDocument 获取 XML 节点，](https://stackoverflow.com/questions/752271/how-to-get-xml-node-from-xdocument)除了尝试在一行代码中一次性返回 CData 值。我正在尝试使以下函数中的返回正常工作：

```
private string RetrieveFormattedString(string controlId)
{
    return template.Descendants("Template")
      .Where(templateNode => templateNode.Value == controlId)
      .Where(tmp => tmp.Name == "Format").Select(y => y.Value).ToString();
} 
```

我在下面有以下 XML：

```
<?xml version="1.0" encoding="utf-8" ?>
  <Templates>
    <Template>
      <Name>NodeName1</Name>
        <Parameter Type="TextBox" Name="conferenceID">{__otcConferenceID__}</Parameter>
        <Parameter Type="TextBox" Name="conferenceCode">{__otcConferenceCode__}</Parameter>
        <Format>
          <![CDATA[ <b>NodeName1</b><br /> <table><tr><td>iPhone</td><td>{__otcConferenceID__},#,{__otcConferenceCode__}</td></tr></table>]]>
        </Format>
     </Template>
     <Template>
        <Name>NodeName2</Name>
        <Parameter Type="TextBox" Name="conferenceID">{__otcConferenceID__}</Parameter>
        <Parameter Type="TextBox" Name="conferenceCode">{__otcConferenceCode__}</Parameter>
        <Format>
            <![CDATA[ <b>NodeName2</b><br /> <table><tr><td>iPhone</td><td>{__otcConferenceID__},#,{__otcConferenceCode__}</td></tr></table>]]>
        </Format>
    </Template>
</Templates> 
```

我知道我做错了，并希望得到更多的关注。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T22:05:24.887

```
private string RetrieveFormattedString(XDocument xDoc, string nodeName)
{
    return xDoc.Descendants("Template")
                .First(t => t.Element("Name").Value == nodeName)
                .Element("Format").Value;
} 
```

# c - 是否有一个 API（如 dup）来复制 fstream 以便它可以

> ID：14511484
> 
> 赞同：0
> 
> 时间：2013-01-24T21:52:40.183
> 
> 标签：c, linux

我想将一个流写入一个 FILE *fp，同时该流也应该被复制到另一个 fp 是否有更好的方法通过消除一个 fprintf 来编写我的调试函数？

```
const int logflag=1;
#define debug(args ...) if (logflag) { FILE *flog = fopen("test.log", "a+"); fprintf( flog, args); fclose(flog); } fprintf(stderr, args); 

int main()
{

    debug("test"); // writes test into both stderr and flog 
    debug("test2");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T22:31:52.803

简短的回答是否定的，它是两个不同的文件指针，您一次只能写入一个。实际上，`dup`仍然对您没有帮助，因为它关闭了重复的文件描述符：

```
"dup2() makes newfd be the copy of oldfd, closing newfd first if necessary"

from the dup2 man-pages 
```

但是，如果您的目标是同时将日志记录到屏幕和文件中，那么最好使用 Linux 已经为您提供的工具。一个普遍的好习惯（我不记得它的来源）是让程序打印其输出并调试到`stdout`/`stderr`并让调用用户确定如何处理输出。

在此之后，如果您的所有输出都转到`stderr`，您可以在执行程序时执行以下操作：

```
$ ./program 2>&1 | tee file.log 
```

# java - 需要帮助将特定供应商的 Javadoc 集成到 Eclipse

> ID：14511486
> 
> 赞同：1
> 
> 时间：2013-01-24T21:52:41.690
> 
> 标签：java, eclipse, javadoc

我正在开发大型 Java 企业软件（如果您介意的话，可以使用[MatrixOne / ENOVIA V6](http://www.3ds.com/products/enovia/products/enovia-v6/)）。维护人员提供了某种 Javadoc，它看起来很普通的 Javadoc，我可以在浏览器中将其作为 HTML 阅读。

但是，我无法将它集成到 Eclipse 中，这很痛苦，因为我必须往返于我的浏览器。在 Eclipse 中，我只是害怕`Note: This element neither has attached source nor attached Javadoc and hence no Javadoc could be found.`： ![在此处输入图像描述](../Images/77c97e9b53a6541632b097863e46b80a.png)

在[了解到](https://superuser.com/questions/167458/how-to-add-javadocs-to-eclipse)可以在项目和`.jar`级别定义 Javadoc 之后，我尝试同时执行这两种操作，因为我知道：

1.  javadoc 文件夹包含[一个`package-list`文件](https://dl.dropbox.com/u/13140569/enovia-javadoc-missing-eclipse/package-list)，它似乎合理地定义了文档包
2.  javadoc 文件夹包含典型的文件夹/子文件夹包结构，它本身包含`ClassName.html`文件。例如`com.matrixone.apps.domain`，我的文件的行与包含大量文件`package-list`的结构匹配`com/matrixone/apps/domain``ClassName.html`
3.  javadoc 文件夹不包含`index.html`文件

当我尝试定义我的 Javadoc 时，`Validate...`由于缺少`index.html`. 然后，如果我创建一个虚拟`index.html`文件，则验证有效，但在悬停供应商类/方法时我仍然看不到 Javadoc。

所以我的问题是：*让这个倾斜的 Javadoc 在 Eclipse 中显示缺少什么？*我此时看到的子问题是：

1.  创建一个虚拟`index.html`文件是个坏主意吗？如果是，我该怎么办？（即 Eclipse 期望什么标签/元信息？）
2.  对标准 Javadoc 文件 ( [`String.html`](https://dl.dropbox.com/u/13140569/enovia-javadoc-missing-eclipse/String.html)) 与其中一个供应商 Javadoc ( [`DomainObject.html`](https://dl.dropbox.com/u/13140569/enovia-javadoc-missing-eclipse/DomainObject.html)) 的快速比较表明，我的 javadoc 中没有 Eclipse 可能使用的元信息。例如，我的供应商 Javadoc 不包含 Javadoc 中存在的许多`<meta>`标签。 →**有人知道**Eclipse 用于获取方法/类 Javadoc 的逻辑/启发式方法吗？**也许指向我的代码？**有了这些信息，我或许能够找出我的 Javadoc 出了什么问题，并希望能够修复它。`String.html``<head>`

*****   如果您遇到过类似的问题，您认为合适的任何东西。****

 ****我目前在 Windows 7 下的 Java 7 上使用 Eclipse Juno SR1。

当然，请随时发表评论以询问我忘记包含的信息。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-13T18:37:16.887

我有类似的问题；但是，我没有尝试通过使用 JavaDoc for JDOM 的本地副本来解决它。相反，我尝试使用适当的 URL（当前 JDOM 版本的 JavaDoc URL 是[http://jdom.org/docs/apidocs/](http://jdom.org/docs/apidocs/)）。因此，在我的 Eclipse 项目的 Java 构建路径配置中的 jdom.jar 库上，我配置了 URL 并点击了验证按钮。Eclipse 似乎认为它是有效的，但我仍然遇到同样的错误，即没有任何附加的 JavaDoc。

然后我发现 jdom.org 也有用于旧版本 JDOM 的 JavaDoc ( [http://www.jdom.org/docs/apidocs.1.1/](http://www.jdom.org/docs/apidocs.1.1/) )。因此，我在 jdom.jar 库 JavaDoc 配置上进行了尝试，并且成功了！

我学到的教训是，当 Eclipse 决定是否使用配置的 JavaDoc 时（考虑是否附加），库的版本似乎被考虑在内。 **确保库版本与库的 JavaDoc 版本相匹配**（现在我已经找到它似乎很明显）。

希望这可以帮助。****

# regex - 路径变量的子字符串

> ID：14511490
> 
> 赞同：4
> 
> 时间：2013-01-24T21:53:03.693
> 
> 标签：regex, r

我有这样的路径`../some/thing/foobar/foobar.happening`，我想要`character`最后一个`/`和`.`.

我意识到这对某些人来说很容易，但我还不熟悉正则表达式等。我也可能自己用`strsplit`.

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T22:02:39.257

`basename`会给你最后一个斜线后的部分。然后，你可以在点上分割（你必须用两个来逃避`\`）

```
> (name <- basename("../some/thing/foobar/foobar.happening"))
[1] "foobar.happening"
> unlist(strsplit(name, "\\."))
[1] "foobar"    "happening" 
```

然后选择第一个元素

```
> unlist(strsplit(name, "\\."))[1]
[1] "foobar" 
```

* * *

我看到您实际上要求的是除`strsplit`. 这是一个正则表达式

```
> sub(".*/([^/]+)\\..*", "\\1", "../some/thing/foobar/foobar.happening")
[1] "foobar" 
```

*   它寻找任何事物的零次或多次出现`.*`
*   后跟一个正斜杠`/`
*   后跟任何不是正斜杠的内容`[^/]`（在括号内，`^`表示“不是”），一次或多次`+`。
*   后跟一个点`\\.`
*   其次是零次或多次`.*`。

然后它只用括号内的东西替换它，`[^/]+`即正斜杠和点之间的所有内容。`\\1`表示第一组括号内的内容。（在这种情况下只有一组，但如果有第二组，我们可以用 引用它`\\2`）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-24T22:44:01.017

您可以使用`basename()`和的组合`file_path_sans_ext()`。（后者来自于基本 R 发行版附带的**工具**包。）

```
path <- "../some/thing/foobar/foobar.happening"

library(tools)
file_path_sans_ext(basename(path))
# [1] "foobar"

## Or, if you don't want to load the tools package
tools::file_path_sans_ext(basename(path))
# [1] "foobar" 
```

# magento - Magento 类别的问题

> ID：14511492
> 
> 赞同：0
> 
> 时间：2013-01-24T21:53:10.467
> 
> 标签：magento, magento-1.7, categories

我在安排 magento 中的类别时遇到问题。该系统有3000多个类别。有 4 个级别类别，这意味着：Parent>Level1>Level2>Level3>Level4。

所有产品都位于 4 级类别中，而 1、2 和 3 级只是空的。

我要做的是在 level2 下使用静态块显示其子类别，然后在 level 3 下显示来自 level 4 的类别。

第二个问题是我不想在主菜单栏中显示所有类别，因为加载 3000 个类别会杀死服务器。

我想做类似的事情：[http ://www.staples.ca/ENG/Catalog/cat_super.asp?catids=%2C&name=CA_SU_Office+Supplies](http://www.staples.ca/ENG/Catalog/cat_super.asp?catids=%2C&name=CA_SU_Office+Supplies)

这是该网站的链接： bindersnink(dot)ca

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T04:43:43.747

从我在您添加的 Staples 链接中可以看到，它们仅在主菜单导航栏上显示顶级类别。您可以通过简单地更改配置值在 Magento 商店中执行此操作。只需登录到您的后端，转到系统 > 配置，然后单击左侧面板中的目录 > 目录部分。在该页面上，您将看到一个名为 Category Top Navigation 的部分。将最大深度更改为 1。这样只有您的顶级类别会显示在菜单中。

请注意，如果您希望子类别中的所有产品都显示在顶级类别页面上，则需要转到编辑类别页面，转到“显示设置”选项卡，并确保“是锚”设置为“是”。

# windows-8 - 在 Windows 上安装：“访问被拒绝”

> ID：14511495
> 
> 赞同：2
> 
> 时间：2013-01-24T21:53:20.510
> 
> 标签：windows-8, go, goinstall

我是 Go 编程新手。对于我的一个问题，我真的很想得到您的帮助。

我需要在一个文件上*进行安装*，该文件的可执行文件（在 Windows 中）是在一个名为*GOPATH\bin*的文件夹中创建的。

到目前为止，我通常遵循常规：`go install <file>.go` ---> `<file>.exe`。但是，这次似乎在执行之后 `<file>.exe`，exe没有完成执行一段时间，当我再次*安装*时出现以下错误。

> C:\Users\Rahul\Desktop\Compilers\src\cs553s2013\mylexer>go install is_digit.go go install command-line-arguments: open C:\Users\Rahul\Desktop\Compilers\bin\is_digit.exe: 访问被拒绝。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-04-27T05:38:47.357

请参阅[http://grokbase.com/t/gg/golang-nuts/135fyje5d9/go-nuts-go-build-access-is-denied-windows-7x64](http://grokbase.com/t/gg/golang-nuts/135fyje5d9/go-nuts-go-build-access-is-denied-windows-7x64)

完全不知道为什么，但上面的建议奏效了。必须在 Windows 7 上启用“应用程序体验”Windows 服务才能解决此问题。

我禁用了此服务，并且在我的项目的二进制文件上看到了类似奇怪的 2-3 分钟“权限被拒绝”（在 Windows 资源管理器视图中，通过 $GOPATH/bin 的 alt+F2 刷新后，该二进制文件也会消失Eclipse + Goclipse 构建我的二进制文件的 $GOPATH/bin）。我注意到，在执行之后，在二进制文件最终消失之前，它被更改为由某个未知用户拥有（在资源管理器中，它不属于编译用户、管理员甚至 SYSTEM）。

我只能推测——也许 Windows 会在文件系统上保留任何 .exe，如果它在没有向 Windows 内核提供某种未记录的“一切正常”状态的情况下退出，假设它“崩溃”，那么应用程序体验服务可以发送它作为 Microsoft 的诊断数据——如果该服务被禁用，则应用程序体验服务无法完成 NTFS 或资源管理器正在等待的任何握手，以允许文件被后续编译覆盖。因此，golang .exe 就坐在那里，具有提升的权限，具有一些系统/未定义的用户，Eclipse 无法删除，直到 Explorer 执行某些操作将其标记为绝对已死。

# node.js - node.js node-http-proxy，带有 url 编码数据的代理

> ID：14511498
> 
> 赞同：3
> 
> 时间：2013-01-24T21:53:42.973
> 
> 标签：node.js, node-http-proxy

我是 Node.js 的新手，并且很难理解如何为给定的路由/url 创建一个简单的代理。

我试图通过在我的 node.js（带有 express）服务器上使用代理来避免前端 javascript 日志记录框架的跨域问题。我正在使用`node-http-proxy`模块，但遇到了 request.body 始终为 JSON 的问题。我需要向日志服务器端点发送 url 编码的数据，而不是 JSON。因此，即使我将 url 编码的数据作为请求的主体发送到代理，代理也会将 JSON 数据作为请求的主体发送到日志服务器。

我尝试在代理中将正文转换为 url 编码的字符串，但它更奇怪的是在正文的开头添加了一个引号字符。一个单双引号。

谢谢您的帮助。这是我的路线：

```
this.match('/proxy/logging', function(req, res, next){
    req.url = build.logging_url.path;
    req.body = require('querystring').stringify(req.body);
    req.headers['content-length'] = req.body.length;
    proxy.proxyRequest(req, res, {
      host: build.logging_url.host
      , port: build.logging_url.port
    });
}, { via: 'POST' }); 
```

我在 jquery 中的 ajax 调用是：

```
$.ajax({
    type: 'POST',
    url: POSTURL,
    data: {foobar : "foobar"},
    success: on_post_success,
    error: on_post_error
}); 
```

# wordpress - wordpress - htaccess 密码目录影响所有页面

> ID：14511499
> 
> 赞同：1
> 
> 时间：2013-01-24T21:53:44.953
> 
> 标签：wordpress, .htaccess, password-protection

我试图对 wp 主根目录下的特定文件夹进行密码保护......这里发生的情况是弹出密码出现在我网站的所有页面上。

主要的 htaccess 是 wp 默认值：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule> 
```

我的特定文件夹上的 htaccess 是：

```
AuthType Basic
AuthName "whatever-name-here"
AuthUserFile "path-to-my-passwd"
require valid-user 
```

你能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T10:33:16.390

尝试，

```
<Files /PathToDirectory/*>
AuthType Basic
AuthName "whatever-name-here"
AuthUserFile "path-to-my-passwd"
require valid-user
</Files> 
```

# delphi - 如何在不使用 Indy 或 WinINet 的情况下发送 HTTP 请求？

> ID：14511502
> 
> 赞同：-2
> 
> 时间：2013-01-24T21:54:00.253
> 
> 标签：delphi, delphi-7

我正在为 HTTP 请求寻找 IdHTTP 的轻量级替代品。最好是不使用 WinINet 的。我需要向我拥有的网站发送请求（这样我就可以配置任何可能需要的设置）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T22:08:13.213

为了最大程度的控制和最少的开销，只需直接使用 WinSock API 并手动发送您自己的 HTTP 请求。有关 HTTP 协议的详细信息，请阅读[RFC 2616](https://www.rfc-editor.org/rfc/rfc2616)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T02:33:38.340

除非您真的知道自己在做什么，否则我不建议您将 HTTP 的东西做得太低级。

转到命令提示符，然后键入：

```
telnet www.yoursite.com 80 
```

等到你连接上。现在输入

```
GET / 
```

好的，这很容易。

但在此之后它变得更加复杂。您必须解析标头、处理重定向、超时、缓存、代理等。对于最简单的单线程实现，您的应用程序可能会冻结，直到您的下载完成。

您可能能够在应用程序中做您需要做的事情，但作为一个通用的 HTTP 客户端，您的实现会很糟糕，除非您花大量时间在它上面做正确的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T02:30:03.043

试试[SynapseLib](http://synapse.ararat.cz/doku.php)。不过，我不确定它是否使用 WinInet。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T15:07:49.463

就我个人而言，我喜欢导入 MSXML2_TLB 并使用 CoServerXmlHTTPRequest.Create，尤其是当我在同一个项目中仍然需要 XML 时。

# php - WebDAV（在 Windows 2008 R2 IIS 7.5 上）不允许我编写 PHP，但适用于所有其他文件（TXT、HTM、ZIP、XYZ）。为什么？

> ID：14511504
> 
> 赞同：0
> 
> 时间：2013-01-24T21:54:09.297
> 
> 标签：php, iis, webdav, windows-server

这是我的设置：

*   Windows Server 2008 R2（最新补丁，IIS 7.5）
*   在 IIS 中的虚拟目录上启用了 WebDAV

我可以从外部网络连接到服务器并上传/下载/删除一个 .txt 文件就好了。我可以对 .htm、.html、.zip、.xyz 做同样​​的事情。没有问题，没有错误。

当我尝试对 .php 文件执行相同操作时，我收到 PUT 的 405 错误，并且无法上传该死的文件。

我知道它必须是某个地方的设置，它只是阻止了 PHP 扩展。有谁知道它可能在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T22:10:21.683

看起来我必须在我的 PHP53_via_FastCGI 处理程序首先处理它之前拦截 WebDAV 处理程序对 .php 扩展名的处理。

1.  转到在 IIS 中启用了 WebDAV 的虚拟目录。
2.  搜索并转到处理程序映射。
3.  单击右侧窗格中的“查看有序列表”。
4.  将 WebDAV 移至任何 PHP 扩展上方的列表顶部。忽略有关未从父处理程序继承的任何警告。

问题解决了。

# c# - 翻转视图，里面有一个表格？

> ID：14511505
> 
> 赞同：0
> 
> 时间：2013-01-24T21:54:22.413
> 
> 标签：c#, xaml, windows-8

我试图弄清楚如何制作一个包含表格的翻转视图。基本上我想要一张包含那天信息的表格。然后你可以翻到第二天或前一天，然后会加载一个新表。

我不确定如何在 Xaml 中执行此操作。我最终将拥有一个连接到该表并提取正确信息的数据源，但首先我需要弄清楚如何编写 xaml 以使该表位于翻转视图中。

我不确定我应该使用“网格”还是“网格布局”。

**编辑**

我尝试了这两个控件，但不确定如何使其具有列格式或如何获取它，因此翻转视图认为有多个表（因此它会给控件以进入下一个表） .

**编辑2**

这就是我要实现的目标（稍后进行更多样式设置，每个部分有 x 行数，没有边框线）

![在此处输入图像描述](../Images/894728923b81b7a9ab172dcf702db8cc.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T22:40:49.883

The documentation for the [`Grid`](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.ui.xaml.controls.grid.aspx) class shows how to add rows, columns etc. You can use `Grid` to do a layout with other elements placed in a few rows/columns. To use more than a few or to bind a collection - various ItemsControl classes are better - `ListView` & `GridView` are probably most common on Windows 8.

# asp.net-mvc-4 - Windows Azure：是否可以在云中的 App_Data 中编辑文件

> ID：14511508
> 
> 赞同：2
> 
> 时间：2013-01-24T21:54:29.960
> 
> 标签：asp.net-mvc-4, azure-storage, file-permissions

我正在尝试 Windows Azure 云托管。我已将我的应用程序部署到云端。

我的部分应用程序逻辑需要编辑云中**App_Data目录中的文件**

当我尝试该功能时，它给了我错误提示

> 访问路径被拒绝

这在本地完美运行。

所以，这是我的问题

1.  我可以在云上编辑目录权限吗？
2.  在 App_Data 目录中有可编辑内容是最佳做法吗？

应用环境：ASP.NET MVC 4.0 Razor 视图引擎

# asp.net-mvc - ASP .NET MVC4 向视图和模型绑定添加新项目

> ID：14511510
> 
> 赞同：0
> 
> 时间：2013-01-24T21:54:36.467
> 
> 标签：asp.net-mvc, asp.net-mvc-4, model-binding

我为我的妻子创建了一个网站。她是一名教师，她希望有机会为他们的学生创建练习。例如，她想创建以下练习：

> 练习 1：使用正确的单词填写句子：
> 
> 1.  我的妻子今年 30 岁......
> 2.  我在这座城市住了 30 年......

我有以下模型：

```
public class Exercise
       {
           [Key]
           public Guid Id { get; set; }

           public string Name { get; set; }

           public string Description { get; set; }

           public ExerciseType Type { get; set; }

           public DifficulityLevel DifficulityLevel { get; set; }

           public List<ExerciseItem> Items { get; set; }

           public DateTime TimeOfCreation { get; set; }

           public DateTime TimeOfModification { get; set; }

       }

public class ExerciseItem
    {
        [Key]
        public Guid Id { get; set; }

        public string Content { get; set; }

        public List<ExerciseItemOption> Options { get; set; }

        public ExerciseItemOption CorrectSelection { get; set; }

    } 
```

我为我的练习创建了一个视图。我可以填写名称、描述、难度级别和类型等基本属性。然后我想创建一个按钮“添加锻炼项目”。单击时，应动态添加部分视图（或其他内容），其中可以提供新的练习项。我试图关注：我添加了一个按钮

```
@Ajax.ActionLink("Add exercise item", 
                        "AddExerciseItem",
                        "Exercise", new AjaxOptions() { HttpMethod="GET", InsertionMode = InsertionMode.InsertBefore, UpdateTargetId="ExerciseItems"}) 
```

和适当的div：

```
<div id="ExerciseItems"></div> 
```

我的操作方法如下所示：

```
public ActionResult AddExerciseItem()
        {
            return PartialView("ExerciseItem", new ExerciseItem());
        } 
```

和部分观点：

```
@model ElangWeb.Models.ExerciseItem
<fieldset>
    <legend>ExerciseItem</legend>

    @Html.HiddenFor(model => model.Id)

    <div class="editor-label">
        @Html.DisplayNameFor(model => model.Content)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Content, new { style = "width:200px" })
    </div>
</fieldset> 
```

它工作正常。但是，当我单击按钮创建整个练习时，我的模型中没有练习项集合：

```
public ActionResult Create(Exercise exercise)
        {
            using (PersistanceManager pm = new PersistanceManager())
            {
                exercise.Id = Guid.NewGuid();
                exercise.TimeOfCreation = DateTime.Now;
                exercise.TimeOfModification = DateTime.Now;
                pm.ExcerciseRepository.Add(exercise);
            }
            return RedirectToAction("Index");
        } 
```

我应该如何更改代码以便将添加的 ExerciseItem 对象列表绑定到我的模型练习？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T22:26:29.483

查看[这篇](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)关于模型绑定的文章。您基本上需要为练习项目创建特殊名称，以便正确绑定它们。

例如部分：

```
@model ElangWeb.Models.ExerciseItem
<fieldset>
    <legend>ExerciseItem</legend>
    <label>content</label>
    <input type="hidden" name="ExcersiseItem.Index" value="SomeUniqueValueForThisItem" />
    <input type="text" name="ExcersiseItem[SomeUniqueValueForThisItem].Name" value="@Model.Content" />
</fieldset> 
```

您还可以查看我对[MVC3 Non-Sequential Indices and DefaultModelBinder](https://stackoverflow.com/questions/8598214/mvc3-non-sequential-indices-and-defaultmodelbinder)这个问题的回答。感谢 Yarx 找到它，我实际上是在尝试找到它 :)

# function - ASM x86 FASM 中的函数参数

> ID：14511516
> 
> 赞同：2
> 
> 时间：2013-01-24T21:55:11.963
> 
> 标签：function, assembly, parameters, x86, fasm

如何将参数传递给 Assembly 中的函数？我确实推动了最后一个参数，推动了第二个参数，推动了第一个参数..

但是我无法访问`Meh`函数中的参数。我正在做的事情使程序崩溃了。

```
format PE console                                ;Format PE OUT GUI 4.0
entry main

include 'macro/import32.inc'

section '.idata' import data readable           ;Import Section.
library msvcrt,'msvcrt.dll'
import msvcrt, printf, 'printf',\
exit,'exit', getchar, 'getchar'

section '.data' data readable writeable         ;Constants/Static Section.
InitialValue dd 0

section '.code' code readable executable
main:    
   push 67
   push 66
   push 65
   call MEH

   call [getchar]
   mov eax, 0
   ret 0

MEH:
   push ebx
   mov ebp, esp
   sub esp, 0

   mov eax, [ebp + 8]   ; Trying to print first parameter..
   push eax
   call [printf]
   add esp, eax

   mov esp, ebp
   pop ebx
ret 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T07:05:51.480

小的附加说明。该过程的正确页眉/页脚使用 push/pop ebp：

```
MEH:
   push ebp
   mov ebp, esp

   mov esp, ebp
   pop ebp
   ret 
```

原因是我们需要在将 ebp 寄存器用作指向参数和局部变量的指针之前保存/恢复它。

其次，调用者在过程返回后恢复堆栈指针的 CCALL 调用约定对于 C/C++ 语言很常见，但不适用于汇编编程。原因很明显 - 编译器可以正确计算有多少参数被压入堆栈。在手写汇编程序中，使用这种约定会使代码不清晰。

更好的方法是使用 STDCALL 调用约定：

```
MEH:
   push ebp
   mov  ebp, esp

   mov  esp, ebp
   pop  ebp
   retn 12   ; how many bytes to be automatically 
             ; removed from the stack after return. 
```

更好的做法是使用一些宏来自动创建标准过程元素并为参数和局部变量提供人类可读的标签。例如，[FreshLib](http://fresh.flatassembler.net)库中提供的宏具有以下语法：

```
proc MEH, .arg1, .arg2, .arg3
; define local variables here, if needed.
begin
     ; place your code here without headers and footers
     return  ; will clean the stack automatically.
endp

; pushes the arguments in the stack and call MEH
stdcall MEH, 65, 66, 67 
```

FASM 包提供的标准宏库的语法略有不同，[FASM 程序员手册](http://flatassembler.net/docs.php?article=manual)对此进行了详细介绍。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T22:13:53.930

让我们来看看...

假设你的 ESP 一开始是 0x00180078，然后在你有三个推动之后

```
00180078: 67
00180074: 66
00180070: 65 
```

然后你调用 MEH，它会立即推送 ebx，所以现在你有堆栈

```
00180078: 67
00180074: 66
00180070: 65
0018006C: return address
00180068: ebx value 
```

您现在使用 ESP = 00180068 加载 EBP

```
sub esp,0 does nothing

mov eax, [ebp+8] ~ 00180068 + 8 = 00180070 = 65 
```

所以不是第一个而是最后一个论点

```
 call [printf] 
```

但是，您的问题来了：

```
 add esp, eax 
```

这应该有什么好处？假设 printf 保留了传入的这个参数（偶然不需要这样做），为什么要将参数添加到堆栈指针？那肯定会搞砸你的回报。您要做的是将 esp 恢复为 ebp 的值并弹回保存的 ebx 值。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-25T04:38:51.273

如果 for 的调用约定`printf()`是正确的（它适用于 Linux 上的 32 位 MinGW 和 32 位 gcc），那么您完全忽略了函数的预期，并且没有得到所需的输出也就不足为奇了。

该函数的原型是：

```
int printf(const char* format, ...); 
```

`format`，第一个参数，是一个指向 ASCIIZ 字符串的指针，它包含要打印的文本和/或特殊标记，例如用对 .`%d`后面的可选参数的适当解释来替换`format`。

所以，如果你想`printf()`打印`'A'`，那么这就是你需要在 C 中做的事情：

```
printf("A"); 
```

或者

```
printf("%c", 'A'); 
```

以下是你在装配中如何做同样的事情：

```
myformatstring db "A", 0 ; this line goes into section .data

push myformatstring ; push address of the string
call [printf]
add esp, 4 ; remove all parameters from the stack 
```

或者

```
myformatstring db "%c", 0 ; this line goes into section .data

push 'A'    
push myformatstring ; push address of the string
call [printf]
add esp, 2*4 ; remove all parameters from the stack 
```

# iphone - 如何着色活跃的resp。选择标签栏的图像？

> ID：14511520
> 
> 赞同：0
> 
> 时间：2013-01-24T21:55:21.457
> 
> 标签：iphone, objective-c, cocoa, uikit

我有一个标签栏驱动的应用程序。我设法为我想要的几乎所有 UI 元素着色。

只有一件事。选项卡栏有标题和图标（png 图像，在故事板/IB 中指定命名）。当我将标签栏着色如下时，两者都很好地着色：

```
// Tab Bar
UITabBarController *tabController = (UITabBarController *)self.window.rootViewController;
tabController.tabBar.tintColor = self.colorTabBar; 
```

目前我正在使用一些绿色主题。但是突出显示的唯一一个标签栏图标，即处于活动状态的标签之一，漂亮而有光泽，但偏蓝。而这种淡蓝色与其他颜色根本不符。

如果这很重要，我正在为应用程序编写故事板。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T00:10:47.673

请参阅 上的[`selectedImageTintColor`](http://developer.apple.com/library/ios/documentation/uikit/reference/UITabBar_Class/Reference/Reference.html#//apple_ref/occ/instp/UITabBar/selectedImageTintColor)属性`UITabBar`。

# jquery - 删除 JQuery 手风琴行为？

> ID：14511525
> 
> 赞同：1
> 
> 时间：2013-01-24T21:55:38.997
> 
> 标签：jquery, jquery-ui-accordion

我需要使用或不使用手风琴来显示内容。有没有办法轻松添加和删除手风琴行为？换句话说，我可以将应用于我的 div 的样式和行为恢复到“手风琴化”之前的状态吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T21:57:47.207

是的，使用破坏方法。

```
$("#accordion").accordion("destroy") 
```

[http://api.jqueryui.com/accordion/#method-destroy](http://api.jqueryui.com/accordion/#method-destroy)

大多数（如果不是全部）官方 jQuery UI 小部件都有这种方法。

# vim - 为什么关闭 Vim 后“*.txt~”文件仍然存在？

> ID：14511531
> 
> 赞同：0
> 
> 时间：2013-01-24T21:55:49.520
> 
> 标签：vim

> **可能重复：**
> [为什么 Vim 使用 ~ 扩展名保存文件？](https://stackoverflow.com/questions/607435/why-does-vim-save-files-with-a-extension)

我有一个简单的问题，我无法在此处或 Vim 帮助手册中找到答案。

当我编辑文本文件时，`filename.txt~`会在文件夹中创建一个文件。我理解这是缓冲区的 SWAP 文件，因为我在 Vim 中处理它时要对其进行编辑。

我的问题是为什么在我编写文件并退出后这个文件仍然存在`:wq`？是为了在我下次编辑它时保留撤消功能，还是类似的东西？如果是这样，有没有办法关闭它？

我对 Vim 很陌生，并且`.vimrc`仍然是 Windows 二进制安装程序中提供的那个。我还没有编辑它。这会是那里的一个选择吗？

在此先感谢，斯科特

# mysql - 如何根据“偏好”从表中获取价值

> ID：14511536
> 
> 赞同：-7
> 
> 时间：2013-01-24T21:55:56.230
> 
> 标签：mysql, if-statement

我正在尝试从基于“首选项”的表中获取值。

我有一个表“t1”，包括两列“id”和“alphabet”

样本数据

```
1 A
1 B
2 A
3 A
3 B 
```

这意味着每个 id 都有默认值“A”，有些有“B”）。

现在我想根据“B”的偏好获取“id”的值。因此，如果一个 ID 同时具有 A 和 B，我想要 B 行。如果没有找到 B 行，则应返回默认 A。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T22:33:30.023

这可能会稍微偏离，因为 mysql 方言总是让我失望。由于 B 在字母排序中位于 A 之后，如果您按 ID 分组然后选择最大值，它将为您提供它们存在的所有 B 行，否则您将获得 A 行。

```
SELECT
    ID,
    MAX(alphabet) AS preference
FROM
    t1
GROUP BY
    ID 
```

现在，如果您的数据比您所指示的更复杂，您将需要检查 MAX 逻辑是否仍然适用。

# robocopy - 在 robocopy 中使用 /mir /xd 开关时如何排除目标中的子目录

> ID：14511537
> 
> 赞同：26
> 
> 时间：2013-01-24T21:56:03.243
> 
> 标签：robocopy

有一个脚本正在运行，它将一堆文件夹从一个卷镜像到另一个卷。问题是现在在目的地的那些文件夹中会有子目录，它们不是原始镜像脚本的一部分。它们是独立的子目录，一旦镜像启动，我不希望它们被清除。我有没有办法`/xd`在 robocopy 中使用开关，我可以在其中排除目标子目录。

例子：

```
robocopy "\\hq04t2fis202\archive\dr" "\\hq04t3fis202\archive\dr" /mir /xd "\\hq04t3fis202\archive\dr\*\hq04s2dba301" 
```

在上面的示例中，有几个目录`\\hq04t2fis202\archive\dr`正在被镜像。在目的地，一旦这些目录从源镜像，就会有另一个脚本转储每个目录中的单独子目录。所以我想要做的是以某种方式使用 /xd 开关来避免在目的地清除这些子目录。此外，在上面的示例中，在`/xd`交换机中，我使用`"*"`通配符表示我想包含`"\\hq04t3fis202\archive\dr"`位于目标根文件夹下的所有目录。

需要有关这是否可行的帮助和建议，如果可行，我该怎么做。到目前为止，我已经尝试并测试了许多其他开关，例如`/xo`, `/xx`，但没有一个能解决我的目的。此外，`/xx`除了现在它根本不会删除目的地的任何文件夹并且它不会镜像之外，它也可以工作。

希望我不会过度混淆这里的每个人。如果您有任何问题，请告诉我。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2014-08-31T11:25:54.780

当我尝试使用 /XD 的解决方案时，我发现要排除的路径应该是源路径 - 而不是目标路径。

例如这个作品

```
robocopy c:\test\a c:\test\b /MIR /XD c:\test\a\leavethisdiralone\ 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-05-07T15:35:58.260

您可以向 /XD 开关提供完整的目标路径，以保持目标目录不变，而不是在源中创建要排除的空目录

```
robocopy "%SOURCE_PATH%" "%DEST_PATH%" /MIR /XD "%DEST_PATH%"\hq04s2dba301 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-01-20T04:17:00.230

在使用 /mir 时排除目标目录的方法是确保目标目录也存在于源中。我进入我的源驱动器并创建了与目标相同名称的空白目录，然后将该目录名称添加到 /xd。它成功地镜像了所有内容，同时排除了源上的目录，从而使目标上的目录保持不变。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-02-04T10:32:59.703

问题是即使我们添加了一个文件夹到跳过列表，如果它不存在，它也会被删除。

**解决方案是使用完整路径添加目标文件夹和源文件夹。**

根据我的经验，我将尝试解释不同的场景以及下面会发生什么。

**起始文件夹结构：**

```
d:\Temp\source\1.txt
d:\Temp\source\2\2.txt 
```

**命令：**

```
robocopy D:\Temp\source D:\Temp\dest /MIR 
```

这将复制所有丢失的文件和文件夹，并删除源中找不到的所有文件和文件夹

让我们添加一个新文件夹，然后将其添加到命令中以跳过它。

**新结构：**

```
d:\Temp\source\1.txt
d:\Temp\source\2\2.txt
d:\Temp\source\3\3.txt 
```

**命令：**

```
robocopy D:\Temp\source D:\Temp\dest /MIR /XD "D:\Temp\source\3" 
```

如果我在源文件夹中添加 /XD 并运行命令，这一切似乎都很好，命令不会将其复制过来。

**现在将文件夹添加到目标以获取此设置：**

```
d:\Temp\source\1.txt
d:\Temp\source\2\2.txt
d:\Temp\source\3\3.txt

d:\Temp\dest\1.txt
d:\Temp\dest\2\2.txt
d:\Temp\dest\3\4.txt 
```

如果我运行命令它仍然很好， 4.txt 停留在那里 3.txt 没有被复制过来。一切皆好。

但是，**如果我删除源**文件夹“d:\Temp\source\3” ，那么即使它在跳过列表中**，目标文件夹和文件也会被删除**

```
 1    D:\Temp\source\
    *EXTRA Dir        -1    D:\Temp\dest\3\
      *EXTRA File                  4        4.txt
                       1    D:\Temp\source\2\ 
```

如果我更改命令以跳过目标文件夹，那么当源中缺少该文件夹时，该文件夹不会被删除。

```
robocopy D:\Temp\source D:\Temp\dest /MIR /XD "D:\Temp\dest\3" 
```

另一方面，如果文件夹存在并且有文件，它将复制它们并删除它们：

```
 1    D:\Temp\source\3\
          *EXTRA File                  4        4.txt
100%        New File                   4        3.txt 
```

**为确保始终跳过该文件夹并且即使缺少源文件夹或目标文件夹也不会复制任何文件，我们必须将两者都添加到跳过列表中：**

```
robocopy D:\Temp\source D:\Temp\dest /MIR /XD "d:\Temp\source\3" "D:\Temp\dest\3" 
```

此后，无论源文件夹丢失还是目标文件夹丢失，robocopy 都会保持原样。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-03-22T01:33:09.007

参数顺序似乎很重要......为了排除子目录，我使用了

```
robocopy \\source\folder C:\destinationfolder /XD * /MIR 
```

...这对我有用（来自 Windows Server 2016 的 Windows 10 副本）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-05-09T01:10:53.817

试试我的方法：

> robocopy.exe "Desktop\Test 文件夹 1" "Desktop\Test 文件夹 2" /XD "C:\Users\Steve\Desktop\Test 文件夹 2\XXX 不要触摸" /MIR

必须放在`/XD`前面`/MIR`，而在后面直接包含完整的目标源`/XD`。

# javascript - 简单的 jQuery getJSON 调用 Twitter

> ID：14511538
> 
> 赞同：3
> 
> 时间：2013-01-24T21:56:06.317
> 
> 标签：javascript, jquery, twitter

我在这里阅读了许多 Twitter 和 jQuery 问题，但似乎没有人回答我的问题。我只是想从公共用户那里获取 5 条“推文”。在这一步我没有对数据做任何事情，但我的回调函数永远不会触发。

```
 $.getJSON("https://api.twitter.com/1.1/statuses/user_timeline.json?callback=?",
    {
        screen_name: 'dojo',
        count: '5'
    },

    function (data) {
        alert("IT WORKED!");
    }); 
```

[这是 jsFiddle 上的相同代码](http://jsfiddle.net/sCneb/)

感谢您的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T21:57:34.513

这是行不通的，因为 Twitter 现在要求您进行身份验证才能获取给定用户的推文。

参考：[https](https://dev.twitter.com/docs/api/1.1/get/statuses/user_timeline) ://dev.twitter.com/docs/api/1.1/get/statuses/user_timeline查看“身份验证”信息。

您需要使用[库](https://dev.twitter.com/docs/twitter-libraries)来帮助获取 oauth 签名并提出请求。

# css - 在 Chrome 中打印时 Div 元素大小发生变化

> ID：14511542
> 
> 赞同：9
> 
> 时间：2013-01-24T21:56:27.580
> 
> 标签：css, google-chrome, printing

我正在编写一个要打印的页面，并且样式与我的应用程序中的其余页面不同。本质上，我正在尝试创建一个带有登录信息的钱包卡，供用户打印、剪切和保存。

我只试过用 chrome 和 IE 打印我的登录卡。IE 完美地得到了它，但不幸的是 chrome 使卡片太大了。不确定它是否重要（我不是 CSS 专家）但我尝试使用不同的单位；英寸、像素和点。

当我在 chrome 中使用开发人员工具时，我看到像素计算正确。我检查了浏览器是否在 div 中添加了额外的填充。

这是我的登录卡元素。

```
<div id="divLoginCard">
    <div id="divLoginCardHeader">
        <h3>User Login - <span id="spnUserName"></span></h3>
    </div>
    <div id="divLoginCardContent">
        <div class="fieldRow">
            <span class="fieldLabel">Website:</span>
            <span class="fieldValue">http://www.xxx.zzz</span>
        </div>
        <div class="fieldRow">
            <span class="fieldLabel">ID:</span>
            <span class="fieldValue" id="spnUserID"></span>
        </div>
        <div class="fieldRow">
            <span class="fieldLabel">Contact's Name:</span>
            <span class="fieldValue" id="spnContactsName"></span>
        </div>        
    </div>
</div> 
```

这是我的 CSS 样式。我正在尝试实现 3.5" x 2" 的物理尺寸，这是标准的美国名片尺寸。

```
#divLoginCard
{
    margin:0 auto;
    width:252pt;
    height:144pt;
    border-style:dashed;
    border-color:gray;
}

#divLoginCardHeader
{
    text-align:center;
}

#divLoginCardContent
{
    margin-left:25px;
    margin-right:15px;
    padding-top:15px;
}

.fieldRow
{
    margin-bottom: 3px;
    display: table;
    width: 100%;
}

.fieldLabel
{
    font-weight: bold;
    width: 96px;
    text-align: left;
    display: table-cell;
}

.fieldValue
{
    min-width: 100%;
    display: table-cell;
    word-wrap: break-word;
    width: 200px;
}

body
{
    font-family:Arial;
} 
```

自然，我更愿意为此提供一个跨浏览器解决方案，我不必使用很多浏览器特定的样式规则，但在这种情况下这可能是不可能的。

我是否需要某种 CSS 重置才能正确调整其大小以使用任何浏览器进行打印？

**更新**

Chrome 在打印时将我的 html 呈现为 PDF 文档。我注意到 chrome 中的打印对话框只是页面顶部的模式窗口。我检查了开发人员工具中的元素，打印预览是一个 pdf 文档。html 提供源 URL (chrome://my_path/print.pdf)，它是由打印机打印的完整文档。

所以，长话短说；我的问题似乎是 chrome 如何将我的 html 呈现为 pdf。有没有办法控制它如何呈现 html 或者我可以使用的一些 chrome 友好的 CSS？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T17:58:34.777

在您的 CSS 中尝试使用 @media 打印规范。Chrome 可能会使用打印 CSS 来覆盖您的屏幕 CSS，该打印 CSS 会调整元素的大小以适合打印页面。

```
@media print { 
   /* put your fixes here */
} 
```

我认为这比 Chrome 正在翻译为 pdf 更可能是问题所在。

# python - Python xml.etree.ElementTree 解析多个.xml文件

> ID：14511546
> 
> 赞同：0
> 
> 时间：2013-01-24T21:57:03.330
> 
> 标签：python, xml-parsing, elementtree

我正在尝试使用 Python ElementTree 解析多个 xml 文件。我的部分代码如下：

```
dirSelected = tkFileDialog.askdirectory()

# User names the output csv file
csvFile = raw_input('Enter the name for the result csv file ')
csvFile = csvFile + ".csv"
resultCSV = open(csvFile, "w+")

# Formation of a long string that becomes the header of the csv file
resultCSV_header = 'header,' + 'header2,'
print (resultCSV_header, file = resultCSV)  

for root, dirs, files in os.walk(dirSelected):
    for fi in files:
        #parse S1.xml files       
        if (fi.endswith('.xml') and fi.startswith('S')):
            filePath = os.path.join(root, fi)
            #Parse XML directly from the file path
            tree = ET.parse(filePath)
            #Get the root node
            doc = tree.getroot()
            column1 = doc.find('.//TAG1').text
            ...
            resultCSV_recipe = (column1 + "," + column2 + ...)
                print (resultCSV_xml)
                print (resultCSV_xml, file=resultCSV) 
```

我的问题是我试图解析多个 *.xml 文件并将数据放入 *.csv 输出文件的一行。例如，我在所选文件夹中有 S1.xml、S2.xml、C1.xml、C2.xml，我希望将 S1.xml 和 C1.xml 中的数据放入输出文件的一行中。我的输出文件是一个简单的 *.csv 文件，我希望用 Excel 打开它，其中的行和列由我自己定义。

我目前可以将所有标签从 S1.xml 解析到输出，并且工作正常，但是当我尝试通过遍历所选文件夹中的所有文件和目录来解析 C1.xml 时，我在 for 循环中遇到了一些问题，并且输出参数。显示“赋值前引用的局部变量 'column1'”。

是否可以使用 Python 在一个文件夹中连接多个 *.xml 文件。或者有更好的解析 *.xml 文件的功能。谢谢大家为此！！！

# python - 如何自动从 Scribd.com 下载 .txt 文件

> ID：14511548
> 
> 赞同：0
> 
> 时间：2013-01-24T21:57:05.353
> 
> 标签：python, download, scribd

这是一个关于是否有可能以及如何自动下载 scribd.com 搜索结果文档的一般问题。

设想：

我有一个 Scribd 帐户并找到我想要的文档。我通常然后必须单击下载按钮才能开始下载。

有什么自动化的想法吗？我正在使用 scribd api 和 python 来根据自动查询自动提取文档 ID，但是一旦我得到 doc_id，我必须亲自去每个文档页面并单击下载按钮以获取物理 txt/pdf 文件。我也想自动化这一步。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T22:11:00.480

查看[`python-scribd`文档](http://code.google.com/p/python-scribd/wiki/User)或[`scribd`API 参考](http://www.scribd.com/developers/platform/api)，任何可以为您提供文档 ID 或网站 URL 的对象也可以为您提供下载 URL。或者，如果您已经有一个文档 ID，您可以调用`get`来获取一个可以为您提供下载 URL 的对象。

很可能，你有一个[`Document`](http://code.google.com/p/python-scribd/wiki/Document)对象，它有这个方法：

> `get_download_url`（自我，doc_type='原始'）
> 
> 返回可用于下载文档静态版本的链接。

所以，无论你在哪里打电话`get_scribd_url`，只要打电话`get_download_url`。

然后，为了下载结果，Python在标准库中内置了[`urllib2`](http://docs.python.org/2/library/urllib2.html)(2.x) 或(3.x)，或者您可以使用或任何其他第三方库来代替。[`urllib.request`](http://docs.python.org/3/library/urllib.request.html)[`requests`](http://pypi.python.org/pypi/requests)

把它们放在一起作为一个例子：

```
# do all the stuff to set up the api_key, get a `User` object, etc.

def is_document_i_want(document):
    return document.author == "Me"

urls = [document.get_download_url() for document in user.all()
        if is_document_i_want(document)]

for url in urls:
    path = urllib.parse.urlparse(url).path
    name = os.path.basename(path)
    u = urllib.request.urlopen(url)
    with open(name, 'w') as f:
        f.write(u.read())
    print('Wrote {} as {}'.format(url, name)) 
```

大概你会想要使用类似的东西`user.find`而不是`user.all`. 或者，如果您已经编写了获取文档 ID 的代码并且不想更改它，您可以使用`user.get`每个代码。

如果您想对结果进行后过滤，您可能希望使用基本属性之外的属性（或者您只是将它们传递给查询），这意味着您需要先调用`load`每个文档才能访问它们（所以在函数`document.load()`顶部添加`is_document_i_want`）。但实际上，这里没有什么复杂的。

# user-interface - 如何确定 KendoUI Grid 是否处于分组状态？

> ID：14511552
> 
> 赞同：1
> 
> 时间：2013-01-24T21:57:11.487
> 
> 标签：user-interface, asp.net-mvc-4, grid, kendo-ui, grouping

当 KendoUI 网格折叠时，我需要在我的页面上执行操作。我知道当网格被分组时会触发 dataBound 事件，但是当网格加载或排序时也会触发此事件。在我的 onDataBound 事件处理程序中，我如何判断网格是否处于分组状态。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T07:25:22.180

要在组折叠时收到通知，您可以使用委托事件，例如：

```
$('#gridName tbody').on('click','.k-i-collapse',function(){
     console.log('Group collapsed!')
}) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T09:14:20.763

在[DataBound事件中，您可以使用 DataSource](http://docs.kendoui.com/api/web/grid#databound)[组方法](http://docs.kendoui.com/api/framework/datasource#group)检查当前是否对网格进行了分组：

```
function onDataBound(e) {
    gridDataSource = e.sender.dataSource;
    if (gridDataSource.group().length > 0) {
        //the grid is grouped
        debugger;
    }
} 
```

# android - Android：是否可以重新启动 Thread 的 Looper？

> ID：14511553
> 
> 赞同：0
> 
> 时间：2013-01-24T21:57:21.110
> 
> 标签：android, multithreading, looper

我有一个简单的问题：如果 (re-loop()) 线程的 Looper 之前退出，是否可以重新启动它。例如，我设计了我的线程如下：

```
public class ProvaThread extends Thread implements Runnable{

        public void run(){

            Looper.prepare();
            Handler handler = new Handler(){
                Log.d(TAG, "handle message..");
                @Override
                public void handleMessage(Message msg){

                    getLooper().quit();
                }
            };

            Looper.loop(); //loop 1

            Log.d(TAG, "thread continue (1)...");

            Looper.loop(); //loop 2

            Log.d(TAG, "thread continue (2)...");

        }
    } 
```

我已经尝试过这段代码，但是当我第二次尝试向处理程序发布消息（第二次之后不调用）时，我得到了一个`RuntimeException`（*向死线程上*的处理程序发送消息）。我得出的结论是，何时调用是否可以召回但无法处理新消息，否则会引发异常）。这是对的吗？`handleMessage()``loop()``getLooper().quit()``loop()`

我应该使用 wait()/notify() 来做这个吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T22:06:06.650

让我先解释一下为什么您的示例代码不起作用。Looper 只处理一个，也只有一个，MessageQueue。当您调用 Looper.prepare() 时会创建此 MessageQueue，并在您调用 Looper.loop() 时处理消息。一旦你调用了 Looper.quit() ，就会发生两件事：

1.  Looper 的 MessageQueue 处于最终终端状态，不会处理任何传入的消息；抛出 RuntimeException。
2.  当 Looper 尝试检索消息时，它只会返回“null”作为消息。

因此，(1) 是 RuntimeException 的原因，(2) 允许您尝试使用 Looper.loop() 重新启动消息检索，但仅从 MessageQueue 返回“null”对象。

其次，让我建议一种更好的方法来解决 UI 和工作线程之间的持续通信：

1.  为 UI 线程创建一个 Handler，称为 mUiHandler。
2.  创建一个工作线程，例如HandlerThread，并暴露一个Handler，称为mWorkerHandler。

现在，让两个处理程序通过来回发送消息进行通信。为后台任务向 mWorkerHandler 发布消息，并让工作线程在显示或删除对话框时向 mUiHandler 发布消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T22:22:39.577

我认为您应该阅读这篇短文[http://mindtherobot.com/blog/159/android-guts-intro-to-loopers-and-handlers/](http://mindtherobot.com/blog/159/android-guts-intro-to-loopers-and-handlers/)。它解释了 Looper 的工作原理以及如何使用它。

# javascript - 为网站创建 API

> ID：14511555
> 
> 赞同：-1
> 
> 时间：2013-01-24T21:57:35.200
> 
> 标签：javascript, api

大家好，我是 http 新手，我有以下代码

```
var htpquest = new XMLHttpRequest();
htpquest.open("GET", "http://www.herbiesheadshop.com/", false);
htpquest.send(); 
```

但我在尝试连接到网站时似乎收到 101 错误。我不确定该网站是否没有 xml 或 JSON，但这样做的主要目的是尝试建立连接，然后我将使用 JavaScript 来整理他们出售的不同商品。几乎可以比较它们。如果有人能指出我正确的方向，将不胜感激。谢谢你，迦勒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T21:59:57.347

这很可能是一个跨域请求，除非另有说明，否则通常是不允许的。因此，您会遇到错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T22:03:10.017

一方面，您遇到了[相同的来源策略](http://en.m.wikipedia.org/wiki/Same_origin_policy "同源政策")限制。您无法与随机网站建立连接，因为这代表安全问题。您只能向托管 JavaScript 文件本身的网站发出请求。

# html - 仅 CSS 水平子导航

> ID：14511557
> 
> 赞同：2
> 
> 时间：2013-01-24T21:57:43.903
> 
> 标签：html, css, navigation, multi-level, horizontallist

我正在构建一个只有 CSS 的两级水平导航栏，其相对于父级的子导航。所有菜单项都是内联的。根据“右”或“左”类，子导航与父导航对齐。到目前为止，这是我设法完成的：

html:

```
<body>
    <div class="navbar">
        <ul class="topnav left">
            <li>nav</li>
            <li>menu1
                <span class="subnav">
                    <ul class="subnav subnav-left">
                        <li>item1-1</li>
                        <li>item1-2</li>
                        <li>item1-3</li>
                    </ul>
                </span>
            </li>
            <li>menu2
                <span class="subnav">
                    <ul class="subnav subnav-left">
                        <li>item2-1</li>
                        <li>item2-2</li>
                        <li>item2-3</li>
                    </ul>
                </span>
            </li>
        </ul>
        <ul class="topnav right">
            <li class="right">menu3
                <span class="subnav subnav-right">
                    <ul class="subnav subnav-left">
                        <li>item3-1</li>
                        <li>item3-2</li>
                        <li>item3-3</li>
                    </ul>
                </span>
            </li>
            <li class="right">menu4
                <span class="subnav subnav-right">
                    <ul class="subnav subnav-left">
                        <li>item4-1</li>
                        <li>item4-2</li>
                        <li>item4-3</li>
                    </ul>
                </span>
            </li>
        </ul>
    </div>
</body> 
```

CSS：

```
body {
    font-family: arial;
    margin: 0;
}

.navbar {
    height: 40px;
    background-color: black;
}

ul.topnav {
    margin: 0;
    padding: 0;
}

.subnav {
    position: absolute;
}

.subnav-right {
    right: 0;
}

ul.subnav {
    position: relative;
    margin: 4px 0 0 -8px;
    padding: 0;
    display: none;
}

ul.topnav  li{
    list-style: none;
    display: inline-block;
    color: white;
    padding: 4px 8px;
    font-weight: bold;
    line-height: 32px;
    float: left;
    clear: none;
    box-sizing: border-box;
}

ul.subnav li {
    background-color: red;
    list-style: none;
    display: inline-block;
    color: white;
    padding: 4px 8px;
    font-weight: bold;
    position: relative;
    line-height: 32px;
    float: left;
    clear: none;
    box-sizing: border-box;
}

.topnav li:hover {
    background-color: red;
}

.topnav li:hover ul.subnav {
    display: inline-block;
    background-color: red;
}

.nav ul li:hover {
    background-color: black;
}

.nav ul li {
    width: 100%;
}

.nav li ul {
    display: inline-block;
    clear: none;
    position: absolute;
    background-color: red;
    margin: 4px 0 0 -8px;
    padding: 0;
}

.left {
    float: left;
}

.right {
    float: right;
} 
```

jsfiddle：

[jsfiddle.net/aLZqZ](http://jsfiddle.net/aLZqZ/)

这是我要完成的工作：

[图像导航菜单](http://fartinginelevators.com/wp-content/uploads/2013/01/nav.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-02T07:50:31.597

我给你这个[http://jsfiddle.net/aLZqZ/99/](http://jsfiddle.net/aLZqZ/99/)。在不到 100 次尝试中，也是。我变得有点着迷，总共花了至少 5 个小时。对我来说是一个很好的挑战，我以前从未真正摆弄过子导航。

**这个问题有三个方面：**

*   根据我的经验，将 float:right 用于水平导航栏通常不好，因为它会导致意想不到的问题，如果相同的元素相对或绝对定位，它也会被浏览器否定和忽略（你有很多多余的代码，顺便说一句） . 我在必要时将 float:right 更改为 text-align:right 。请参阅我最近为某人修复的水平导航：[将导航栏向右对齐/浮动](https://stackoverflow.com/questions/14553995/aligning-floating-my-nav-bar-to-the-right)*   包含子菜单的 li 元素未定位，因此，其中 ul 上的 position:absolute 和 right:0 根据最近的包含元素 position:absolute 或 :relative 移动。在这种情况下，没有一个元素是 html；因此 ul 将被一直推到页面的末尾。我添加了 position:relative 到这些 li 元素，然后让 right:0 的行为符合预期，但没有将所有 li 元素放在一行上而是堆叠它们。*   当 :inline 可以做到时，您有带有 display:inline-block 的标签，但更重要的是，没有人真正提到 white-space:nowrap 在相同的元素上执行您在此处尝试的操作很重要。inline-block 和 nowrap 一起应该强制一个 line block 像你可以对齐或浮动的元素，就好像它们是一个段落一样。顺便说一句，IE7 需要特别注意内联块。见这里：[http ://robertnyman.com/2010/02/24/css-display-inline-block-why-it-rocks-and-why-it-sucks/](http://robertnyman.com/2010/02/24/css-display-inline-block-why-it-rocks-and-why-it-sucks/)

    我在你的小提琴底部制作了特殊的 css 来分隔左右导航，我基本上不理会你原来的 css。我还稍微调整了html。一切都在这里。

    **右侧导航的 HTML（遵循左侧导航的 HTML）：**

    ```
     <ul class="rightNav">
                <li>menu3
                        <ul class="rightSubNav">
                            <li>item3-1</li>
                            <li>item3-2</li>
                            <li>item3-3</li>
                        </ul>
                </li>
                <li>menu4
                        <ul class="rightSubNav">
                            <li>item4-1</li>
                            <li>item4-2</li>
                            <li>item4-3</li>
                        </ul>
                </li>
            </ul> 
    ```

    **我添加的用于分隔左右导航的 CSS：**

    ```
     ul.rightNav {
            margin:0;
            padding:0;
            text-align: right;
        }

        .rightNav li:hover {
            background-color: red;
        }

        ul.rightNav  li{
            list-style: none;
            display: inline-block;
            color: white;
            padding: 4px 8px;
            font-weight: bold;
            line-height: 32px;
            position:relative;
        }

        ul.rightSubNav {
            position: absolute;
            right:0;
            margin: 4px 0 0 -20px;
            padding: 0;
            display: none;
            white-space:nowrap;
        }
        ul.rightSubNav li {
            background-color: red;
            list-style: none;
            display: inline;
            color: white;
            padding: 4px 8px;
            font-weight: bold;
            position: relative;
            line-height: 32px;
        }

        .rightNav li:hover ul.rightSubNav {
            display: inline-block;
            background-color: red;
        } 
    ```

    如果这有帮助，我将不胜感激投票和答案选择。如果你想出了别的东西并让它以不同的方式工作，请发布。我很乐意看看。

# mercurial - Mercurial，拉一根树枝

> ID：14511560
> 
> 赞同：0
> 
> 时间：2013-01-24T21:57:49.390
> 
> 标签：mercurial

我有两个 Mercurial repos C1 和 C2，它们都是前一段时间从同一个父 P 派生的，但后来有了不同的开发线。另外，在C2 中，有一个名为B2 的分支，它发生在分流之后。我只想将分支 B2 拉入 C1，我可以使用 hg pull C2 --branch B2 轻松完成。

现在 B2 在 C2 存储库的默认分支中分支了一些点。因此，即使我只是想拉分支 B2，C2 中的那些默认变更集也会被拉入 C1。（我可以理解，因为它们是 B2 变更集的祖先）。

在上述拉取之后，我将在 C1 的默认分支上有两个头，原始头和由那些因拉出 B2 而被拉出的默认变更集组成的头。我想保持 C1 的默认分支不变，否则我有两个头，不断被告知更新“跨分支”并告诉我必须合并。（我将把新的默认分支从其他外部仓库拉到 C1 中）。

我怎样才能做到以上，这样我就没有默认的两个头？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T10:58:27.550

想想这个问题，我认为你有这样的事情是对的吗？

```
@  4[tip]:1   439255c536ee   2013-01-25 10:42 +0000   rob
|    More changes on original default branch
|
|   o  3   379f384c1d73   2013-01-25 10:41 +0000   rob
|   |   Changes on named branch B2
|  /
| o  2:0   d225da266931   2013-01-25 10:40 +0000   rob
| |    Changes on cloned default
| |
o |  1   7088660d3ba6   2013-01-25 10:41 +0000   rob
|/     Changes on original default branch
|
o  0   a02a921256b3   2013-01-25 10:39 +0000   rob
     Project Start 
```

您所描述的问题是，当您想保留`B2`分支时，您不希望两个头朝上`default`：

```
$ hg heads default --style=compact
4[tip]:1   439255c536ee   2013-01-25 10:42 +0000   rob
  More changes on original default branch

2:0   d225da266931   2013-01-25 10:40 +0000   rob
  Changes on cloned default 
```

我可以看到两种“解决”这个问题的可能性。一种是简单地关闭“克隆”默认分支（至少在您的存储库中）：

```
$ hg update 2
$ hg commit -m "Closing cloned default" --close-branch
$ hg heads default --style=compact
4[tip]:1   439255c536ee   2013-01-25 10:42 +0000   rob
  More changes on original default branch 
```

这意味着如果你发出一个`hg update default`，它*不应该*是模棱两可的，我猜这是问题的一部分。

另一种方法是从另一个默认分支执行“[空合并”：](http://mercurial.selenic.com/wiki/TipsAndTricks#Keep_.22My.22_or_.22Their.22_files_when_doing_a_merge)

```
$ hg update
$ hg -y merge --tool=internal:fail 2
$ hg revert --all --rev .
$ hg resolve -a -m
$ hg commit -m "Merged cloned default" 
```

这些方法的主要区别在于，使用该`--close-branch`选项时，您仍然可以在使用时看到额外的头`hg heads -c`……它仍然是头，但它只是在元数据中设置了一个标志，表示它已关闭。你仍然可以更新到关闭的分支，甚至提交对它的更改。进行合并你根本看不到头部，因为它不再是头部。

这两种方法都意味着您仍然可以将更改拉到 B2 分支 - 但是，如果在您要从中拉出的存储库中，他们会在默认情况下进行更改并将这些更改合并到 B2（通常在修复错误等时使用），您将点击以后有同样的问题，只好重复上面的。

我希望这是有道理的。当然，如果您稍后推送到另一个仓库，您也将推送关闭/合并的变更集。明智的做法是克隆您的存储库并在本地尝试这些方法以检查这是否是您真正想要的。

# iis-7 - IIS7 URL 将模块规则重写为不友好的 url

> ID：14511561
> 
> 赞同：1
> 
> 时间：2013-01-24T21:57:49.757
> 
> 标签：iis-7, url-rewrite-module

我在为 URL 重写模块创建重写规则时遇到问题，因为我正在尝试将 url 从友好重写为查询字符串。

我有一个这样的网址：domain.com/item/1234

我需要将其重定向到：domain.com/item?id=1234

如果您想知道为什么我需要它，因为我想在第三方网站中显示友好的 url 并使用查询字符串加载页面，这样我就可以在不使用 Javascript 回发的情况下更改页面中的参数。

我找到的所有文档都显示了如何使 url 友好而不是相反。

谢谢！

# c# - 如何从asp获取文件的完整路径：文件上传？

> ID：14511570
> 
> 赞同：2
> 
> 时间：2013-01-24T21:58:21.900
> 
> 标签：c#, asp.net, file-upload

我正在尝试使用 asp.net 中的文件上传功能获取文件的完整路径。我正在使用 Visual Basic 2010 中的 C# 开发一个网站项目。我想要完整路径的原因是因为我实际上是在尝试获取有关包含该文件的*文件夹*的信息，因为计划是比较两个文件的内容使用第三方比较工具 UltraCompare 的文件夹，然后将该比较的结果传输到我们的数据库中。

理想情况下，我想要一个功能，使用户能够浏览文件夹而不是文件，但据我从谷歌搜索得知，这在我正在使用的版本 .net 4.0 中是不可能的.

我不确定是否有必要使用文件上传控件，因为我只需要目录的文件路径。但是，我希望用户能够使用 GUI 浏览器窗口搜索文件，而不是输入完整的文件路径。

我显然是 C# .net 和一般编程的大菜鸟，所以任何建议或建议将不胜感激。这是我从其他地方复制并粘贴的一些示例代码。评论中的内容只是我尝试（不成功）获取文件路径的不同方法。

```
if (File1.HasFile)
        {
            try
            {
                //string filepath1 = Path.GetFullPath(File1.PostedFile.FileName);
                string filepath1 = Path.GetFileName(File1.FileName);
                File1.SaveAs(Server.MapPath("~/") + filepath1);
                //StatusLabel.Text = "Upload status: File(s) uploaded!";
                Response.Write("Upload status: File(s) uploaded! <br />");
                Response.Write(filepath1);
            }
            catch (Exception ex)
            {
                StatusLabel.Text = "Upload status: The file(s) could not be uploaded. The following error occured: " + ex.Message;
                //Response.Write("Upload status: The file(s) could not be uploaded. The following error occured: " + ex.Message + "<br />");
            } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T22:02:26.783

除了原始文件名之外，html 不会为您提供任何内容。任何附加信息，例如文件夹路径或属性，都将违反客户的安全和隐私。您需要使用其他东西，例如 activex 控件或 adobe flash 来获取您想要的数据。

# maven - Maven POM - 在具有向后兼容性的 RHEL6 上构建 rpm？

> ID：14511571
> 
> 赞同：0
> 
> 时间：2013-01-24T21:58:23.763
> 
> 标签：maven, pom.xml, rpmbuild

Maven 菜鸟在这里。我们有数十个带有构建 rpm 的 POM 的存储库，最近将我们的 CI 系统移至 CentOS 6。因此，rpm 构建不再向后兼容 RHEL 5。显然我需要在规范或 maven POM 中声明：

```
<defineStatement>_source_filedigest_algorithm md5</defineStatement>
<defineStatement>_binary_filedigest_algorithm md5</defineStatement> 
```

我可以以某种方式将其添加到我们的父 POM 中吗？否则，我需要编写脚本将这些行添加到大量存储库中，这会很快变得丑陋且容易出错。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T01:15:34.033

那是财产吗？那是插件的配置项吗？如果它是一个属性，您可以在构建它的每台机器上定义一个活动配置文件。如果它根据运行构建的机器而改变，这将是合适的。该配置文件将在 Maven 安装的 conf/settings.xml 中定义，如果它应该应用于所有构建，则将其定义为活动的。但是，不知道该值将被发送到哪里，我现在只能猜测。

# c# - 使用 Autofac 解析 MVC3 中组件内部的控制器

> ID：14511574
> 
> 赞同：2
> 
> 时间：2013-01-24T21:58:31.167
> 
> 标签：c#, asp.net-mvc-3, autofac

我有一个组件可以检查当前登录的用户是否可以访问控制器的操作。

```
public class ControllerAccessChecker : IControllerAccessChecker
{
    ILifetimeScope _scope;

    public ControllerAccessChecker(ILifetimeScope scope)
    {
        _scope = scope;
    }

    public bool IsAccessible<TController>(Expression<Action<TController>> action, RequestContext requestContext) where TController : Controller
    {
        var actionName = GetActionName(action);
        var result = false;

        using (var childScope = _scope.BeginLifetimeScope())
        {
            var controller = childScope.Resolve<TController>(); 
            result = HasActionPermission(requestContext, actionName, controller);
        }
        return result;
    }

    private static string GetActionName(LambdaExpression actionExpression)
    {
        object operand;
        if (actionExpression.Body as UnaryExpression != null)
        {
            operand = ((UnaryExpression)actionExpression.Body).Operand;
        }
        else
        {
            operand = actionExpression.Body;
        }
        MethodCallExpression methodCallExpression = (MethodCallExpression)operand;
        return methodCallExpression.Method.Name;
    }

    private static bool HasActionPermission(RequestContext requestContext, string actionName, ControllerBase controller)
    {
        var controllerContext = new ControllerContext(requestContext, controller);

        var controllerDescriptor = new ReflectedControllerDescriptor(controller.GetType());

        var actionDescriptor = controllerDescriptor.FindAction(controllerContext, actionName);

        return ActionIsAuthorized(controllerContext, actionDescriptor);
    }

    private static bool ActionIsAuthorized(ControllerContext controllerContext, ActionDescriptor actionDescriptor)
    {
        if (actionDescriptor == null)
            return false;

        AuthorizationContext authContext = new AuthorizationContext(controllerContext, actionDescriptor);

        foreach (Filter authFilter in FilterProviders.Providers.GetFilters(controllerContext, actionDescriptor).Where(x => x.Instance is IAuthorizationFilter))
        {
            ((IAuthorizationFilter)authFilter.Instance).OnAuthorization(authContext);

            if (authContext.Result != null)
                return false;
        }

        return true;
    }
} 
```

如您所见，我正在注入`ILifetimeScope`构造函数，但我不确定这是否是一种好习惯。另外我不确定我是否在`IsAccessible`方法中做正确的事情。这种 Autofac 的作用域层次方法让我很困惑。

我在考虑某种控制器的抽象工厂，但用 Autofac 实现似乎并不容易。`IIndex<,>`我在这里找到了一些关于使用和注册的文章和答案，`.Keyed()`但我不认为这真的是在这种情况下应该使用的。我的意思是我知道我需要什么类型，所以只要提出要求就应该很容易。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:28:40.320

您可以使用而不是注入生命周期范围`AutofacDependencyResolver.Current.RequestLifetimeScope`- 除非您在 Web 上下文之外使用它，否则我可能会使用它。

关于这个设计的一件事：`IsAccessible`你正在解析实际的控制器，这也意味着你正在解析和实例化它的所有依赖项，一直到整个链条。如果您在菜单系统中执行此操作，或者在某个地方对每个请求都执行大量此类操作，那么这就是很多控制器（和控制器依赖项）。而且，如果您的控制器依赖项是数据库连接或 WCF 服务代理……那么，仅检查可访问性可能会变得非常昂贵。需要考虑的事情。

# java - 如何完全设置背景图像填充屏幕？

> ID：14511576
> 
> 赞同：1
> 
> 时间：2013-01-24T21:58:50.530
> 
> 标签：java, blackberry

我有一个背景图像，并在一个屏幕上覆盖了 2 个 LabelField、一个 BasicEditField 和一个 ButtonField。我的问题是我的背景图像在按钮底部后被切断，而不是完全填满屏幕。（为了便于阅读，我删除了多余的代码）

```
 VerticalFieldManager bgManager = new VerticalFieldManager(Manager.USE_ALL_WIDTH | 
                                                              Manager.NO_VERTICAL_SCROLL | 
                                                              Manager.NO_VERTICAL_SCROLLBAR) {

        //Override the paint method to draw the background image.
        public void paint(Graphics graphics)
        {
            //Draw the background image and then call super.paint
            //to paint the rest of the screen.
            graphics.drawBitmap(0, 0, Display.getWidth(), Display.getHeight(), backgroundBitmap, 0, 0);
            super.paint(graphics);
        }
    };
    this.add(bgManager);

    LabelField header = new LabelField("", LabelField.USE_ALL_WIDTH | DrawStyle.HCENTER);
    header.setText("Search by Drug Name");
    bgManager.add(header);

    LabelField subtitle = new LabelField("", LabelField.USE_ALL_WIDTH | DrawStyle.HCENTER);
    subtitle.setText("(brand name or generic)");
    bgManager.add(subtitle);

    HorizontalFieldManager hfm = new HorizontalFieldManager();

    final BasicEditField edit = new BasicEditField("", "", 50, EditField.EDITABLE | BasicEditField.NO_NEWLINE) {
        //code to make background of text box white
        }
    };
    hfm.add(edit);

    ButtonField search = new ButtonField("Search");
    search.setChangeListener(new FieldChangeListener() {

        public void fieldChanged(Field field, int context) {
            //do something
        }
    }); 
```

如果我添加`Manager.USE_ALL_HEIGHT`到，我的背景图像会完全填满屏幕`bgManager`，但随后我的整个屏幕变得可无限滚动。没有`Manager.USE_ALL_HEIGHT`，我的屏幕根本无法滚动（正确），但背景图像在内容末尾被切断。

如何构建此屏幕，使其不可滚动并具有占据整个可见屏幕的背景图像？

这看起来是错误的：

![在此处输入图像描述](../Images/237a63feb643c5036ab6c639f2e28de9.png)

这是正确的（但滚动不正确）：

![在此处输入图像描述](../Images/559fbf259f11b743cc591d88abbdda7a.png)

这是我正在使用的背景图片：

![在此处输入图像描述](../Images/4258f29e004741805004b05c6ee0d255.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T23:08:48.153

我相信更改代码的最简单方法实际上是使用`USE_ALL_HEIGHT`标志。

```
 VerticalFieldManager bgManager =
    new VerticalFieldManager(Manager.NO_VERTICAL_SCROLL | 
                             Manager.NO_VERTICAL_SCROLLBAR | 
                             Manager.USE_ALL_WIDTH | 
                             Manager.USE_ALL_HEIGHT) { 
```

这将用背景图像填充您的屏幕。

您没有显示此代码，但我猜问题不是`bgManager`实际上允许滚动，而是`Screen`它所在的位置允许垂直滚动。因此，请确保您将代码放入的容器禁用滚动。像这样的东西：

```
public class BgCropScreen extends MainScreen {

   public BgCropScreen() {
      super(MainScreen.NO_VERTICAL_SCROLL);  // <<<<<< THIS IS THE CRITICAL LINE !!!!!!

      VerticalFieldManager bgManager = new VerticalFieldManager(Manager.NO_VERTICAL_SCROLL | Manager.NO_VERTICAL_SCROLLBAR | Manager.USE_ALL_WIDTH | Manager.USE_ALL_HEIGHT) {
         // to draw the background image.
         public void paint(Graphics graphics) {
            graphics.drawBitmap(0, 0, Display.getWidth(), Display.getHeight(), backgroundBitmap, 0, 0);
            super.paint(graphics);
         }                
      };
      this.add(bgManager); 
```

[这是执行此操作的文档](http://supportforums.blackberry.com/t5/Java-Development/Use-a-background-image-in-application-screens/ta-p/445197)。它指出，在较新版本的操作系统中，使用`BackgroundFactory`创建背景、使用位图、渐变、颜色等方法可能更容易。不过，这只是另一种选择。

# gdb - GDB：在 Fortran 子例程中打印传递的变量

> ID：14511582
> 
> 赞同：1
> 
> 时间：2013-01-24T21:59:12.297
> 
> 标签：gdb, fortran90

我正在调试 prog.f90，它有一个模块 mod.f90。如何打印参数变量值？

该模块有一个在循环中调用的子例程。它接受参数，将一个存储在局部变量中，计算参数的新值，将其存储在另一个局部变量中，然后使用局部变量来测试某个条件。参数的新值被传递回 main。

我正在尝试在子例程中打印所有变量的值。我可以打印局部变量，但打印参数变量会给我一个参考地址。

```
(gdb)print temp_curr
$1 = 4
(gdb)print arg1
$2 = (REF TO -> ( real8 )) @0x7fffffffe0a0: -nan(0x8000000000000) 
```

我试过了...

```
(gdb)print $arg1
$3 = VOID 
```

子程序看起来像这样......

```
SUBROUTINE sub(arg1, arg2)
IMPLICIT NONE
REAL, INTENT(inout):: arg1, arg2
REAL               :: temp_prev, temp_curr

temp_prev = arg1

arg1 = (a bunch of calculations)/arg2

temp_curr = arg1

IF (temp_curr < temp_prev) THEN
    stop
END IF

END SUBROUTINE sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T09:39:50.193

gdb 中的`$arg1`变量仅在 gdb 脚本中使用（请参阅[GDB 文档](http://sourceware.org/gdb/current/onlinedocs/gdb/Define.html#Define)）。如果您引用被调试程序的变量，请仅使用`arg1`.

`print MODULENAME::VARNAME`如果您想从另一个模块 (MODULENAME) 打印变量 (VARNAME)，请尝试

# ios - Cocos2d 环境下运行定时器精度

> ID：14511596
> 
> 赞同：0
> 
> 时间：2013-01-24T22:00:10.487
> 
> 标签：ios, cocos2d-iphone, timing

我有一个带有可见运行计时器的游戏，但只能达到小数点后 2 位的精度（#.##）。这是框架的限制，还是有解决方法？我试图在这个计时器上达到 4-6 位的准确度（#.######）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T22:04:07.210

iOS 上的计时器以 60Hz 的最大频率运行，这就是为什么您只能获得 2 位精度的原因。

您可以通过花时间和活动开始来解决问题，然后在活动结束时花时间并计算差异。不过，这次不会考虑帧率下降、暂停和进入后台等因素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T22:05:14.433

这是底层系统的限制。iOS 不是一个实时系统，定时器在所谓的运行循环中被调度，一旦定时器到期就会调度定时器。然而，为了让计时器准确调度，运行循环必须足够频繁地运行并在每次迭代时检查计时器。然而，运行循环也运行其他东西，例如整个事件机制、消息和网络都在运行循环上运行，所以你的计时器不会每隔几纳秒检查一次（而且，运行循环不会持续运行，但会给出一些时间也回到系统）

# javascript - SelectIndexChanged 未将参数传递给 webpart 连接

> ID：14511597
> 
> 赞同：0
> 
> 时间：2013-01-24T22:00:18.717
> 
> 标签：javascript, parameter-passing, web-parts, sharepoint-designer, webpart-connection

在 newform.aspx 中，我有 webpart 连接。我将员工姓名传递给 webpart，这个 webpart 呈现员工详细信息。员工姓名字段是文本框。

一切正常，直到我将员工姓名更改为查找字段并且页面呈现时它变成了下拉列表。因此，connected-webpart 在页面加载期间始终显示下拉列表中的第一条记录，并且在更改下拉索引时不会刷新。

整个 newform.aspx 是使用共享点设计器定制的。

我猜，我需要编写 javascript(jquery/json) 代码并使用共享点设计器放入 newform.aspx？

请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T22:10:25.763

Web 部件连接在页面加载时建立。员工选择的更改不会重新加载页面，因此不会更新连接。

对于这种客户端行为，JavaScript/jQuery 肯定是一个不错的选择。我建议您查看 Codeplex 上的 SPServices，特别是对于您的案例[SPServices.SPDisplayRelatedInfo](http://spservices.codeplex.com/wikipage?title=%24%28%29.SPServices.SPDisplayRelatedInfo&referringTitle=Documentation)

# java - Java垃圾收集和C++对象销毁有什么区别？

> ID：14511598
> 
> 赞同：-6
> 
> 时间：2013-01-24T22:00:19.733
> 
> 标签：java, c++, garbage-collection, destruction

我在某处读到垃圾收集不像破坏（在 C++ 意义上）。它们有何不同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T22:02:22.283

C++ 销毁是确定性的，垃圾收集不是。

在 C++ 中，您可以保证何时调用析构函数，而在 Java 中根本没有这样的保证。事实上，你的析构函数可能永远不会在 Java 中被调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T22:02:51.687

*   在对象即将被删除之前调用析构函数（无论是在堆栈还是堆上）
*   垃圾收集会不时地通过你的程序，然后检查是否有任何变量不再被使用并删除它们

# excel - Excel 2010 VBA公式1引用命名范围*或*单元格位置，其中选项卡名称的变量

> ID：14511601
> 
> 赞同：0
> 
> 时间：2013-01-24T22:00:40.840
> 
> 标签：excel, vba, range

在 VBA (Excel 2010) 中，我是

1.  动态创建命名范围列表
2.  使用该列表在另一列中创建下拉选项

创建下拉列表时，（a）使用命名范围似乎不起作用，并且（b）如果我不使用命名范围 - 并且需要通过工作表名称和单元格引用进行引用，我会遇到麻烦因为我的工作表刚刚被重命名为今天的日期。

这很混乱，我知道，但这是我目前所拥有的：

```
' find the name of the worksheet and replace it with today's date
Dim vTabOriginalName As String
Dim vTabDateName As String

Dim vRangeName As String

vRangeName = "StageListChoices"

vTabOriginalName = ActiveSheet.Name
vTabDateName = Format(Now(), "yyyy-mmm-dd")
ActiveSheet.Name = vTabDateName

'create a drop down list for the stage (col K)

Range("AK3").Value = "NO ACTIVITY"
Range("AK4").Value = "SOLICITATION"
Range("AK5").Value = "OPPORTUNITY"

ActiveWorkbook.Names.Add Name:="StageListChoices", RefersToR1C1:=(vTabDateName & "!R3C37:R5C37")

'~~> Creates the list
With Range("K2:K" & vReportRowCount).Validation  'report row count known earlier
    .Delete
    .Add Type:=xlValidateList, AlertStyle:=xlValidAlertStop, Operator:=xlBetween, Formula1:="=StageListChoices"  
    .IgnoreBlank = True
    .InCellDropdown = True
    .InputTitle = ""
    .ErrorTitle = ""
    .InputMessage = ""
    .ErrorMessage = ""
    .ShowInput = True
    .ShowError = True
End With 
```

当我创建命名区域时录制的宏很有意义：

```
ActiveWorkbook.Names.Add Name:="StageListChoices", RefersToR1C1:= _
    "=2013-JAN-24!R3C37:R14C37"
ActiveWorkbook.Names("StageListChoices").Comment = "" 
```

最初，我一直在使用 String 变量在 VBA 中创建下拉列表，但是“真实”列表有 15 个项目长，并且在重新打开文件时出现错误，表明验证时间太长（？），所以已经打开离开。

基本上，我尝试过类似的事情：

```
Formula1:="=StageListChoices"

Formula1:=vRangeName

Formula1:="=vRangeName"

Formula1:=vTabDateName & "!R3C37:R5C37" 
```

我查找的所有内容都表明第一个 (Formula1:="=StageListChoices") 应该有效 - 但它没有。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T22:14:17.253

改变

`ActiveWorkbook.Names.Add Name:="StageListChoices", RefersToR1C1:=(vTabDateName & "!R3C37:R5C37")`

到

`ActiveWorkbook.Names.Add Name:="StageListChoices", RefersToR1C1:=("='" & vTabDateName & "'!R3C37:R5C37")`

你错过了`=`和`'`

# ruby-on-rails - FactoryGirl 与协会

> ID：14511609
> 
> 赞同：2
> 
> 时间：2013-01-24T22:01:13.583
> 
> 标签：ruby-on-rails, ruby, factory-bot

我有 2 个模型，产品和类别。产品有`category_id`属性。所以，Product属于Category，Category里面有很多Products。

```
<!-- language: rb -->
class Product < ActiveRecord::Base
  belongs_to :category
  validates :category, presence: true
end

class Category < ActiveRecord::Base
  has_many :products
end 
```

如何为两个模型定义工厂（FactoryGirl rails）？特别有趣的是如何为产品模型执行此操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T22:07:49.173

您可能想要使用两种方案。

**如果您不需要与产品关联的特定类别：**

```
FactoryGirl.define do
  factory :category do
    # category fields
  end
  factory :product do
    # other product fields here
    category
  end
end 
```

然后你可以`create(:product)`，它会在创建时获得一个分配给它的**新类别。**

**如果您需要在产品中重复使用已知类别：**

在这种情况下，您需要显式创建对象。您可以使用上面相同的工厂，但像这样创建它们：

```
category = create(:category)
product = create(:product, category: category) 
```

这样，您就可以为多个产品重复使用该类别，或分别操作这两个产品。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T22:10:06.063

如果你使用 Mongodb，你可以在你的 Factory 中嵌入数据。例如 ：

```
factory :category do
  name "My Category"
  product {{
    "name" => "My product",
    "price" => "12"
  }}
end 
```

在这种情况下，不要忘记`accepts_nested_attributes_for :products`在`Categories`模型内部。

# javascript - Backbone.js 如何实现事件？

> ID：14511614
> 
> 赞同：2
> 
> 时间：2013-01-24T22:01:46.947
> 
> 标签：javascript, backbone.js

**澄清：**

我只针对支持 createEvent、addEventListener 等的现代浏览器......

**问题**

我的意思是原生的，在 JavaScript 中。搜索显示他们没有使用`createEvent()`.

我在[文档](http://backbonejs.org/#Events-listenTo)中寻找答案，但没有找到任何答案。

`createEvent()`我在这里的[源](http://backbonejs.org/backbone.js)中进行了搜索，但没有命中。

骨干如何从母语角度实现事件？

他们是否使用[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)？

如果 JavaScript 已经有自定义事件（ via `createEvent()`）可用，并且事件监听器也可用（`addEventListener()`为什么不使用内置事件？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-24T22:19:24.833

### 为什么 Backbone 不使用原生事件？

将本机事件用于除了主干视图之外的任何东西都没有任何意义。Backbone 为[模型](http://backbonejs.org/#Model)、[集合](http://backbonejs.org/#Collection)和[一般情况下提供事件管理。](http://backbonejs.org/#Events)

本机事件（通过`createEvent`, `addEventListener`）绑定到 DOM 节点。模型和集合与 DOM 节点无关——您必须跳过许多不必要的障碍才能重用该代码。

### Backbone 事件是否遵循观察者模式？

不是真的，不。 `Backbone.Events`更接近[发布-订阅模式](http://en.wikipedia.org/wiki/Publish%E2%80%93subscribe_pattern)。一个对象维护一个命名事件的事件侦听器列表（通过`on`），然后该对象`trigger`在它想要触发事件时触发对这些侦听器的调用。

### Backbone 事件是如何实现的？

在其核心，Backbone 为每个事件维护一组事件侦听器（在旧版本的主干中，它曾经使用链表；这更慢）。每个对象都维护自己的侦听器列表；没有中央登记处。

On `trigger`，主干调用为该事件注册的所有侦听器；它还为特殊`all`事件调用任何侦听器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T22:17:39.283

Backbone 就是[这样做](https://github.com/documentcloud/backbone/blob/0.9.10/backbone.js#L64-L227)的。这是 163 行代码，包括空格和注释。

澄清**如何**

*   基本的东西，如用于拆分事件名称的正则表达式、绑定侦听器的简单注册表，这些侦听器是简单的对象文字
*   `on|bind`, `off|unbind`, `trigger`, `once`, `listenTo`,的 api`stopListening`

至于**为什么**，这是基于作者和贡献者做出的设计决策，他们觉得适合项目的目标和风格。考虑到主干模型、集合和视图使用的常见模式，命名空间和多事件绑定是很好的便利。

**是**的，他们正在使用观察者模式。所有基于事件的系统都包含观察者模式的实现。从广义上讲，事件、pub/sub 和观察者是同义词，尽管有些人可能会发现在详细讨论时区分它们很重要。

# php - Curl 的用户 IP 而不是服务器 IP

> ID：14511619
> 
> 赞同：0
> 
> 时间：2013-01-24T22:02:16.087
> 
> 标签：php, php-curl

我的一个脚本中有下面的代码，但每次运行它都会使用我的 IP 地址。我怎样才能让它使用用户的IP地址？我正在阅读有关`curl_setopt()`允许您设置 IP 地址的信息。有人可以帮助我吗？

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, '' . $stuff_link[0] . '');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_REFERER, '' . $stuff_refurl . '');
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
// curl_setopt($ch, CURLOPT_HEADER, true);
curl_setopt($ch, CURLOPT_AUTOREFERER, false);
$html = curl_exec($ch);
curl_close ($ch); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T22:03:23.913

简短的回答是：你不能那样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T22:06:26.133

这是 - 幸运的是 - 不可能的。

事实上，如果您的用户安装了[http 代理服务器](http://en.wikipedia.org/wiki/Proxy_server)，您可以...

# c++ - OpenGL 缺少 Glut32

> ID：14511625
> 
> 赞同：0
> 
> 时间：2013-01-24T22:02:33.700
> 
> 标签：c++, windows, opengl, glut

我正在尝试通过《OpenGL 5th Edition》一书学习如何将 OpenGL 与 C++ 结合使用。在第一个示例中，它们包括文件 GLTools.h 和 GLShaderManager.h。我正在尝试提取书籍内容并对其进行编译，但是遇到了很多错误，因此我尝试在这些文件之前包含文件 glew.h 或 Windows.h，在包含此文件后，我只收到 1 个错误. “错误LNK1104：无法打开文件'glut32.lib'”所以我尝试用谷歌搜索它，我发现我必须添加到Microsoft Sdks库所以我做到了但没有任何改变。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T22:07:22.687

尝试安装[GLUT 实现](http://freeglut.sourceforge.net/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T20:08:46.780

您需要链接到`Glut32.lib`项目属性。

# mysql - 将facebook用户生日存储到mysql

> ID：14511626
> 
> 赞同：0
> 
> 时间：2013-01-24T22:02:35.743
> 
> 标签：mysql, facebook, codeigniter, date

我正在使用 Codeigniter 和 mysql。

我得到了 01/23/1999 格式的 facebook 用户生日

我在 mysql 表中得到日期 YYYY/M/D 格式。

我怎样才能插入它？

我试过了，但我得到了 0000/00/00 并且还尝试了 str_to_date() 但不知道为什么 codeigniter 不能通过它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T22:05:33.613

$datetoputinmysql = date('Ymd', strtotime($facebookvariable))

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T22:05:33.893

```
$mysql_date = date("Y/m/d", strtotime('01/23/1999')); 
```

# gwt - 尝试使用 context2d.arc() 绘制圆弧总是会产生一个完整的圆

> ID：14511632
> 
> 赞同：0
> 
> 时间：2013-01-24T22:03:04.123
> 
> 标签：gwt, canvas, drawing

我正在学习如何使用 GWT 构建 Web 应用程序。我想画一条弧线，但无论起点和终点角度如何，我总是得到一个完整的圆。我试过了

```
context2d.arc((double)cx, (double)cy, 40., 0., 180., true);
context2d.stroke(); 
```

和

```
context2d.beginPath();
context2d.arc((double)cx, (double)cy, 40., 0., 180., true);
context2d.closePath();
context2d.stroke(); 
```

每次我得到一个完整的圆圈。我什至在`context2d.save()`之前和`context2d.restore()`之后添加了一个完整的圆圈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T22:09:17.453

从[文档](http://google-web-toolkit.googlecode.com/svn/javadoc/2.2/com/google/gwt/canvas/dom/client/Context2d.html#arc%28double,%20double,%20double,%20double,%20double%29)

```
startAngle - the start angle, measured in radians clockwise from the positive x-axis
endAngle - the end angle, measured in radians clockwise from the positive x-axis 
```

0 和 180 以度为单位。

尝试使用 3.14159265 代替 180 （实际上是 180 弧度）

# python - SQLAlchemy ORM 从子查询中选择多个实体

> ID：14511633
> 
> 赞同：5
> 
> 时间：2013-01-24T22:03:05.327
> 
> 标签：python, sqlalchemy

我需要`session.query(Entity1, Entity2)`仅从子查询而不是直接从表中查询多个实体，例如 。文档有一些关于[从子查询中选择一个实体的内容，](http://docs.sqlalchemy.org/en/rel_0_8/orm/tutorial.html?highlight=window#selecting-entities-from-subqueries)但我找不到如何选择多个实体，无论是在文档中还是通过实验。

我的用例是我需要通过窗口函数过滤映射类底层的表，这在 PostgreSQL 中只能在子查询或 CTE 中完成。

编辑：子查询跨越两个表的 JOIN 所以我不能只做`aliased(Entity1, subquery)`.

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-24T22:39:05.647

```
from sqlalchemy import *
from sqlalchemy.orm import *
from sqlalchemy.ext.declarative import declarative_base

Base = declarative_base()

class A(Base):
    __tablename__ = "a"

    id = Column(Integer, primary_key=True)
    bs = relationship("B")

class B(Base):
    __tablename__ = "b"

    id = Column(Integer, primary_key=True)

    a_id = Column(Integer, ForeignKey('a.id'))

e = create_engine("sqlite://", echo=True)
Base.metadata.create_all(e)
s = Session(e)
s.add_all([A(bs=[B(), B()]), A(bs=[B()])])
s.commit()

# with_labels() here is to disambiguate A.id and B.id.
# without it, you'd see a warning
# "Column 'id' on table being replaced by another column with the same key."
subq = s.query(A, B).join(A.bs).with_labels().subquery()

# method 1 - select_from()
print s.query(A, B).select_from(subq).all()

# method 2 - alias them both.  "subq" renders
# once because FROM objects render based on object
# identity.
a_alias = aliased(A, subq)
b_alias = aliased(B, subq)
print s.query(a_alias, b_alias).all() 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-03-30T15:14:18.940

我试图做类似原始问题的事情：使用外连接将过滤表与另一个过滤表连接起来。我一直在苦苦挣扎，因为如何：

*   创建一个从两个表中返回实体的 SQLAlchemy 查询。@zzzeek 的回答向我展示了如何做到这一点：`get_session().query(A, B)`。
*   在此类查询中将查询用作表。@zzzeek 的回答也向我展示了如何做到这一点：`filtered_a = aliased(A).filter(...).subquery()`。
*   在两个实体之间使用 OUTER 连接。使用`select_from()`after`outerjoin()`会破坏表之间的连接条件，从而导致交叉连接。从@zzzeek 回答我猜如果`a`是别名（），那么您可以包含`a`在查询（）和.outerjoin（a）中，它不会再次加入，这似乎有效。

遵循@zzzeek 建议的任何一种方法都直接导致交叉连接（组合爆炸），因为我的一个模型使用继承，并且 SQLAlchemy 在内部 SELECT 之外添加了父表，没有任何条件！我认为这是 SQLAlchemy 中的一个错误。我最终采用的方法是：

```
filtered_a = aliased(A, A.query().filter(...)).subquery("filtered_a")
filtered_b = aliased(B, B.query().filter(...)).subquery("filtered_b")
query = get_session().query(filtered_a, filtered_b)
query = query.outerjoin(filtered_b, filtered_a.relation_to_b)
query = query.order_by(filtered_a.some_column)

for a, b in query:
    ... 
```

# jsp - 重新加载嵌入在 JSP 中的 struts2 动作

> ID：14511638
> 
> 赞同：4
> 
> 时间：2013-01-24T22:03:30.727
> 
> 标签：jsp, struts2

好的，我会尽量让它简短易懂。

我正在使用 JQuery 完整日历并向用户显示事件。我在页面上有一个过滤器操作，允许用户根据不同的条件过滤显示的事件。这些标准之一是事件名称。最终目标是让过滤器从完整日历视图中重新加载可选择的“事件名称”选项。

我有这一切工作，但它不同步。

我的 JSP 包含过滤器是这样的：

```
<div id="popUpFilterInfo" class="filterPopUp">      
<s:action name="ScheduleFilter" executeResult="true" id="scheduleFilter"></s:action>        
</div> 
```

这将返回另一个包含过滤器表单的 JSP 页面。Struts 在页面渲染时运行，所以这个过滤器是在构建视图之前构建的。当用户选择一个按钮时，这个过滤器会被 jQuery 隐藏/显示。

页面操作与过滤器操作不同，因为此过滤器操作需要包含在多个页面中

加载完整日历后，它将日期发送回页面操作，页面操作将这些日期存储到应用程序全局上下文中的过滤器对象中。

我遇到的问题是，当视图更改时，我无法让页面重新加载过滤器。如果我重新加载整个页面，那么过滤器确实包含来自前一个视图的数据，所以我知道我只需要告诉页面重新呈现 ScheduleFilter 表单。我尝试使用 jQuery 来做到这一点：

```
var filter = "<s:action name=\"ScheduleFilter\" executeResult=\"true\" id=\"scheduleFilter\"></s:action>";
jQuery('#popUpFilterInfo').children().remove();
jQuery('#popUpFilterInfo').append(filter); 
```

这会在过滤器变量被实例化的行上抛出一个 JasperException 说 'quote symbol expected'。就在“name”中间指定字符“m”是问题所在。

有谁知道如何在不重新加载整个页面的情况下重新加载这样的嵌入式动作？

**答案**：

正如 Dave 在下面所说，不要将操作嵌入到`<s:action>`标签中。我对此进行了切换，而是使用 Ajax 调用该操作，并在成功后使用 jQuery 将返回的数据插入到我的过滤器表单 div 中。我检查了 div 是否为空，如果 div 中已经有过滤器，则清除它。下面是一个例子

我的过滤器 div：

```
<div id="popUpFilterInfo" class="filterPopUp"></div> 
```

行动号召：

```
function loadFilter() {
    if(!jQuery('#popUpFilterInfo').is(':empty')){
        jQuery('#popUpFilterInfo').children().remove();         
    }
    jQuery.ajax({
        url:'Filter.action',
        data:"",
        dataType: "",
        type: "GET",
        success: function(filter) {
            jQuery('#popUpFilterInfo').append(filter); 
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-08T01:49:18.120

我代表@Nathan24 发布此答案。

正如 Dave 在下面所说，不要将操作嵌入到标签中。我对此进行了切换，而是使用 Ajax 调用该操作，并在成功后使用 jQuery 将返回的数据插入到我的过滤器表单 div 中。我检查了 div 是否为空，如果 div 中已经有过滤器，则清除它。下面是一个例子

我的过滤器 div：

```
<div id="popUpFilterInfo" class="filterPopUp"></div> 
```

行动号召：

```
function loadFilter() {
    if(!jQuery('#popUpFilterInfo').is(':empty')){
       jQuery('#popUpFilterInfo').children().remove();         
  }
    jQuery.ajax({
       url:'Filter.action',
       data:"",
       dataType: "",
       type: "GET",
       success: function(filter) {
           jQuery('#popUpFilterInfo').append(filter); 
    }
});
 } 
```

我认为这可能对其他一些人将其作为答案发布有用，因此人们不会错过这个问题。如果我错了，请告诉我，我将删除此答案。谢谢你。

# ios - 如何以编程方式和动态地为 UIButton 的背景图像着色？

> ID：14511639
> 
> 赞同：7
> 
> 时间：2013-01-24T22:03:40.970
> 
> 标签：ios, objective-c, cocoa, uibutton, uisegmentedcontrol

我正在开发一个应用程序 - 或者更确切地说是一些可重复使用的“框架”，一旦它工作，我很乐意分享。在这个应用程序中，用户应该能够从颜色主题列表中进行选择。因此，应用程序必须能够以某种相当动态的方式为其 UI 元素着色。

对于按钮，所有着色都不起作用。必须在此处提供适当着色的背景图像。但是为每个人准备一组背景图像只是第二好的。它不够动态和灵活。

最后，解决方案可能归结为为选定的正常状态提供一个单色（灰色）渐变图像，并使用 CoreGraphics 或 OpenGL 以编程方式为该图像着色。但坦率地说，我不知道从哪里开始。渐变应该是什么样子，然后我将如何以任何给定的颜色以编程方式对其进行着色？

几乎适用于 UISegmentedControls，只是稍微复杂一点。:) 任何涵盖 UISegementedControls 的通用解决方案都受到高度赞赏。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-10-20T01:24:49.893

在iOS7中可以`imagedWithRenderingMode:`结合使用方法`setTintColor:`

但是，请务必使用它，`UIImageRenderingModeAlwaysTemplate`因为它将 a 上的所有非透明颜色替换`UIImage`为 tint 颜色。默认值为`UIImageRenderingModeAutomatic`.

**UIImageRenderingModeAlwaysTemplate**

```
Always draw the image as a template image, ignoring its color information. 
```

目标-C：

```
UIImage * image = [myButton.currentImage imageWithRenderingMode:UIImageRenderingModeAlwaysTemplate];
[myButton setImage:image forState:UIControlStateNormal]; 
```

迅速：

```
let image = myButton.currentImage?.withRenderingMode(.alwaysTemplate)
myButton.setImage(image, for: .normal) 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-10-16T20:18:33.720

我在另一篇我找不到的帖子之后创建了一个 UIImage 类别，该帖子采用图像并将其着色如下：

```
- (UIImage *)tintedImageWithColor:(UIColor *)tintColor {
    UIGraphicsBeginImageContextWithOptions(self.size, NO, [[UIScreen mainScreen] scale]);
    CGContextRef context = UIGraphicsGetCurrentContext();

    CGContextTranslateCTM(context, 0, self.size.height);
    CGContextScaleCTM(context, 1.0, -1.0);

    CGRect rect = CGRectMake(0, 0, self.size.width, self.size.height);

    // draw alpha-mask
    CGContextSetBlendMode(context, kCGBlendModeNormal);
    CGContextDrawImage(context, rect, self.CGImage);

    // draw tint color, preserving alpha values of original image
    CGContextSetBlendMode(context, kCGBlendModeSourceIn);
    [tintColor setFill];
    CGContextFillRect(context, rect);

    UIImage *coloredImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return coloredImage;
} 
```

这将获取图像并使用给定颜色的 alpha 值填充所有区域。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-10-20T13:37:51.367

我使用 horsejockey 的代码创建了一个 UIButton 类别： [https ://github.com/filipstefansson/UITintedButton](https://github.com/filipstefansson/UITintedButton)

以下是新方法：

```
-(void)setImageTintColor:(UIColor *)color;
-(void)setBackgroundTintColor:(UIColor *)color forState:(UIControlState)state;
+(void)tintButtonImages:(NSArray *)buttons withColor:(UIColor *)color;
+(void)tintButtonBackgrounds:(NSArray *)buttons withColor:(UIColor *)color forState:(UIControlState)state; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-24T23:18:22.273

这是您问题的部分答案。这是我编写的一个辅助方法，可以为灰度图像着色：

```
// baseImage is the grey scale image. color is the desired tint color
+ (UIImage *)tintImage:(UIImage *)baseImage withColor:(UIColor *)color {
    UIGraphicsBeginImageContextWithOptions(baseImage.size, NO, baseImage.scale);

    CGContextRef ctx = UIGraphicsGetCurrentContext();
    CGRect area = CGRectMake(0, 0, baseImage.size.width, baseImage.size.height);

    CGContextScaleCTM(ctx, 1, -1);
    CGContextTranslateCTM(ctx, 0, -area.size.height);

    CGContextSaveGState(ctx);
    CGContextClipToMask(ctx, area, baseImage.CGImage);

    [color set];
    CGContextFillRect(ctx, area);
    CGContextRestoreGState(ctx);

    CGContextSetBlendMode(ctx, kCGBlendModeOverlay);

    CGContextDrawImage(ctx, area, baseImage.CGImage);

    UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();

    UIGraphicsEndImageContext();

    // If the original image was stretchable, make the new image stretchable
    if (baseImage.leftCapWidth || baseImage.topCapHeight) {
        newImage = [newImage stretchableImageWithLeftCapWidth:baseImage.leftCapWidth topCapHeight:baseImage.topCapHeight];
    }

    return newImage;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T22:28:04.257

我正在向您推荐一个 SO 问题，该问题似乎是您正在寻找的内容，并且有答案。

[如何在 iPhone 中为透明的 PNG 图像着色？](https://stackoverflow.com/q/3514066/463478)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-10T15:27:13.250

我从“horsejockey”中修改了一些东西：

```
+(UIImage *)getTintedImage:(UIImage*)image withColor:(UIColor *)tintColor
{
    UIGraphicsBeginImageContextWithOptions(image.size, NO, [[UIScreen mainScreen] scale]);
    CGContextRef context = UIGraphicsGetCurrentContext();

    CGContextTranslateCTM(context, 0, image.size.height);
    CGContextScaleCTM(context, 1.0, -1.0);

    CGRect rect = CGRectMake(0, 0, image.size.width, image.size.height);

    // draw alpha-mask
    CGContextSetBlendMode(context, kCGBlendModeNormal);
    CGContextDrawImage(context, rect, image.CGImage);

    // draw tint color, preserving alpha values of original image
    CGContextSetBlendMode(context, kCGBlendModeSourceIn);
    [tintColor setFill];
    CGContextFillRect(context, rect);

    UIImage *coloredImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return coloredImage;
}
```

# java - 程序启动后无法检测到 USB 端口

> ID：14511642
> 
> 赞同：1
> 
> 时间：2013-01-24T22:03:51.753
> 
> 标签：java, usb, javax.comm

当设备已经连接时，我的程序`CommPortIdentifier.getPortIdentifiers()`从调用`javax.comm`，我得到了 USB 端口。但是，如果程序启动然后我连接 USB 设备，`CommPortIdentifier.getPortIdentifiers()`则无法识别它。

有什么问题？

# signalr - SignalR-rc2 不再支持 IConnectionIdPrefixGenerator

> ID：14511645
> 
> 赞同：0
> 
> 时间：2013-01-24T22:04:08.367
> 
> 标签：signalr, signalr-hub

从 signalr-rc2 开始，不支持 IConnectionIdPrefixGenerator？如果支持，有计划稍后公开吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T22:17:06.020

不，我们拥有连接 ID。如果你想要额外的数据，你需要使用查询字符串。

# java - 实例化通用接口

> ID：14511649
> 
> 赞同：2
> 
> 时间：2013-01-24T22:04:27.800
> 
> 标签：java, generics, anonymous-inner-class

我有一个界面

```
public interface Foo<T> {
    public void bar(String s, T t);
} 
```

我想写一个方法

```
public void baz() {
    String hi = "Hello";
    String bye = "Bye";
    Foo<String> foo = new Foo() {
        public void bar(String s, String t) {
            System.out.println(s);
            System.out.println(s);
        }
    };
    foo.bar(hi,bye);
} 
```

我收到一个错误

```
<anonymous Test$1> is not abstract and does not override abstract method bar(String,Object) in Foo
    Foo<String> foo = new Foo() { 
```

我对Java相当陌生，我敢肯定这是一个简单的错误。我怎么写这个？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T22:07:22.813

如果您使用的是 java 7，则**类型推断**不适用于此处。您还必须**在构造函数调用中提供 Type 参数**。

```
 Foo<String> foo = new Foo<String>() {
        public void bar(String s, String t) {
            System.out.println(s);
            System.out.println(s);
        }
    };
    foo.bar(hi,bye); 
```

**编辑：**刚刚注意到您使用`new Foo()`的基本上是原始类型，您必须为构造函数调用提供泛型类型，`new Foo<String>()`

[**相关链接**](https://stackoverflow.com/questions/13821586/why-cant-diamond-infer-types-on-anonymous-inner-classes)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T22:08:13.260

你忘记了一个`<String>`

```
public void baz() {
    String hi = "Hello";
    String bye = "Bye";
    Foo<String> foo = new Foo<String>() {
        public void bar(String s, String t) {
            System.out.println(s);
            System.out.println(s);
        }
    };
    foo.bar(hi,bye);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T22:07:55.787

```
Foo<String> foo = new Foo<String>() {
  @Override
  public void bar(String s, String t) {
    System.out.println(s);
    System.out.println(s);
  }
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T22:11:21.593

使用以下代码进行更改，它可以完美地编译和运行。

```
 Foo<String> foo = new Foo<String>() { 
```

# iphone - iPhone 应用程序只显示网站

> ID：14511650
> 
> 赞同：-1
> 
> 时间：2013-01-24T22:04:45.443
> 
> 标签：iphone, web

是否可以制作仅显示网站的 iphone 应用程序？所以我创建了网站 example.com，应用程序打开了 example.com。每当我点击一个链接时，它应该只关注应用程序中的所有链接，而不是 safari。这可能吗？如何？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T22:06:40.203

这称为“添加到主屏幕”，您可以对您的网站进行编程以支持添加为“HTML 应用程序”。但是，存在一些限制，包括无法保存您所在的页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T23:02:31.087

看看 ui webview 它可以渲染 HTML、PDF 并且可以用作网络浏览器。它允许显示图像和链接，并且可以存储在您的应用程序包中或在线，

# ruby-on-rails-3 - IE8 和 Chrome 中不显示 Fontawesome 图标（仅限 Windows）

> ID：14511653
> 
> 赞同：2
> 
> 时间：2013-01-24T22:04:54.870
> 
> 标签：ruby-on-rails-3, internet-explorer, google-chrome, heroku, font-awesome

我正在构建的 Rails 应用程序遇到问题。我正在使用 fontawesome 来渲染一些图标。rails 应用程序在 Heroku 上运行。

问题是在 Chrome/Win 和 IE8 上，图标没有呈现。没有盒子 - 什么都没有。它们在 IE9、Firefox/Win 中呈现，并且它们在 OS X 中的所有浏览器上呈现。

我有以下内容`application.rb`：

```
config.assets.paths << Rails.root.join("app", "assets", "fonts")
config.assets.precompile += %w( .svg .eot .woff .ttf ) 
```

字体文件位于 assets/font 目录中，SCSS 文件有：

```
@font-face {
  font-family: 'FontAwesome';
  src: url('<%= asset_path('fontawesome-webfont.eot?') %>');
  src: url('<%= asset_path('fontawesome-webfont.eot?#iefix') %>') format('embedded-opentype'), url('<%= asset_path('fontawesome-webfont.woff') %>') format('woff'), url('<%= asset_path('fontawesome-webfont.ttf') %>') format('truetype');
  font-weight: normal;
  font-style: normal;
} 
```

有没有人遇到过类似的问题？（我读过的大多数帖子要么显示不是问题的框，要么围绕字体在 Firefox 中不起作用的问题。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T11:58:11.957

将此包含在您的头文件中

```
link rel="stylesheet" href="../css/font-awesome.min.css" 
```

对于 IE7 支持请添加

```
 link rel="stylesheet" href="../css/font-awesome.min.css"
 !--[if IE 7] 
 link rel="stylesheet" href="assets/css/font-awesome-ie7.min.css"
 ![endif]-- 
```

您在 css 中使用 less 或 scss 什么？

# java - 检查一个 ArrayList 是否包含来自另一个 ArrayList（或集合）的所有元素

> ID：14511655
> 
> 赞同：65
> 
> 时间：2013-01-24T22:05:05.003
> 
> 标签：java, arraylist, comparison, contains

可能有一个简单的单线，我在这里找不到，但这是我的问题：

如何检查一个 ArrayList 是否包含另一个 ArrayList 中的所有对象？我正在寻找（如果存在的话）以下内容：

```
//INCORRECT EXAMPLE:
if(one.contains(two))
{
    return true;
}
else
{
    return false;
} 
```

例如：

```
ArrayList one = {1, 2, 3, 4, 5}

ArrayList two = {1, 2, 3} --> True
ArrayList two = {} --> True
ArrayList two = {1, 2, 3, 4, 5} --> True
ArrayList two = {1, 5, 2} --> True
ArrayList two = {1, 7, 4} --> False
ArrayList two = {0, 1, 3} --> False
ArrayList two = {4, 5, 6} --> False
ArrayList two = {7, 8, 9} --> False 
```

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2013-01-24T22:07:29.250

接口`containsAll`中声明了一个方法调用。`java.util.Collection`在您的设置中`one.containsAll(two)`给出所需的答案。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-01-24T22:07:31.207

根据列表界面：

```
myList.containsAll(...); 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-01-24T22:07:52.480

`containsAll(Collection<?> c)`从`List`接口看方法。我想这就是你要找的。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-08-12T15:35:06.713

这是另一个使用 containsAll() 的示例，我用它来断言 JUnit 测试中两个数组相等：

```
List<String> expected = new ArrayList<String>();
expected.add("this");
expected.add("that");
expected.add("another");

List<String> actual = new ArrayListString();
actual.add("another");
actual.add("that");
actual.add("this");

Assert.assertTrue("The lists do not match!", expected.containsAll(actual)); 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-01-24T22:09:11.173

您可以使用`containsAll`列表的方法进行检查。然而，这是一个线性操作。如果列表很大，则应`HashSet`先将其转换为，然后执行`containsAll`：

```
HashSet tmp = new HashSet(one);
if (tmp.containsAll(two)) {
    ...
} 
```

如果`one`是`N`的长度和两个的长度是`M`，这个解的时间复杂度是`O(M+N)`；"plain"`containsAll`的复杂度为`O(M*N)`，可能会更糟。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-01-24T22:07:21.640

您在示例中的代码没有意义，但无论如何这里有一个示例。

```
ArrayList<Integer> one, two;
//initialize
boolean good = true;
for (int i = 0; i < two.size(); i ++) {
    if (!(one.contains(two.get(i))) {
        good = false;
        break;
    }
} 
```

它只是循环遍历所有`two`的元素并检查它们是否在`one`.

然后布尔值`good`包含您想要的值。

请参阅[ArrayList#contains](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html#contains%28java.lang.Object%29)。

**编辑**：哦，哇，我完全忘记了[containsAll](http://docs.oracle.com/javase/7/docs/api/java/util/AbstractCollection.html#containsAll%28java.util.Collection%29)。哦，好吧，如果您真的想了解它，这是另一种方法。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2021-05-14T11:49:28.957

这也可以使用 Java 中的流来完成

```
 List<String> employeeList = Arrays.asList("Marc","john");
    List<String> masterEmployeeList = Arrays.asList("Marc", "Stacy", "john");
    System.out.println(employeeList.stream().allMatch(masterEmployeeList::contains)); 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2020-08-19T07:02:20.103

在 org.apache.commons.collections.CollectionUtils 中声明的 isEqualCollection() 方法为您提供集合是否相同。

if (CollectionUtils.isEqualCollection(collectionA,collectionB)) { 做 smt... }

# sql - 将 2 个表的日期范围合并为一个表

> ID：14511662
> 
> 赞同：3
> 
> 时间：2013-01-24T22:05:59.453
> 
> 标签：sql, sql-server

希望是一个直截了当的问题（但我怀疑答案很困难）。我有 2 个日期范围涵盖相同“整体”范围的表，但 TABLE_A 的范围最初细分得更多，而 TABLE_B 稍后将其细分：

```
CREATE TABLE #TABLE_A (
START_DT datetime,
END_DT datetime)

INSERT INTO #TABLE_A VALUES ('4/1/1993', '4/29/1993');
INSERT INTO #TABLE_A VALUES ('4/29/1993', '5/12/1993');
INSERT INTO #TABLE_A VALUES ('5/13/1993', '5/26/1993');
INSERT INTO #TABLE_A VALUES ('5/27/1993', '8/18/1993');
INSERT INTO #TABLE_A VALUES ('2/10/1994', '2/23/1994');
INSERT INTO #TABLE_A VALUES ('2/25/1994', '3/9/1994');
INSERT INTO #TABLE_A VALUES ('3/10/1994', '5/5/1994');

CREATE TABLE #TABLE_B (
START_DT datetime,
END_DT datetime)

INSERT INTO #TABLE_B VALUES ('4/1/1993', '5/12/1993');
INSERT INTO #TABLE_B VALUES ('5/13/1993', '8/18/1993');
INSERT INTO #TABLE_B VALUES ('2/10/1994', '2/22/1994');
INSERT INTO #TABLE_B VALUES ('2/24/1994', '3/23/1994');
INSERT INTO #TABLE_B VALUES ('3/24/1994', '4/20/1994');
INSERT INTO #TABLE_B VALUES ('4/21/1994', '5/5/1994'); 
```

我想要的是一个结合了这些范围的 TABLE_C：

```
START DT      END DT    
4/1/1993       4/29/1993      FROM TABLE A
4/29/1993      5/12/1993      FROM TABLE A
5/13/1993      5/26/1993      FROM TABLE A
5/27/1993      8/18/1993      FROM TABLE A
2/10/1994      2/22/1994      FROM TABLE A or TABLE B
2/23/1994       3/9/1994      FROM TABLE A
3/10/1994      3/23/1994      START DT FROM TABLE A, END DT FROM TABLE B
3/24/1994      4/20/1994      FROM TABLE B
4/21/1994       5/5/1994      FROM TABLE B 
```

我愿意接受有关如何创建 TABLE_C 的任何建议。我曾尝试使用 MERGE、SSIS、游标等，但一直陷入困境或认为必须有更简单的方法。关于如何解决这个问题的任何建议？我查看了“类似问题”，但似乎找不到我的特定问题。如果这基本上已经被问到，我很抱歉。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T22:12:22.173

你不会找到一个简单的答案。您将不得不制作一个包含您想要的确切逻辑的自定义函数或过程。对不起。想象一下基于 start_dt 和每个元组的时间长度的一些软迭代。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T03:08:04.787

select distinct START_DT, END_DT from ( select START_DT, END_DT from #TABLE_A union select START_DT, END_DT from #TABLE_b )b

您可以根据需要更改日期格式并将所选数据插入表中。它正在显示合并的数据。

# c# - 为什么我在覆盖和调用虚函数时没有得到 stackoverflow 异常？

> ID：14511663
> 
> 赞同：1
> 
> 时间：2013-01-24T22:06:06.727
> 
> 标签：c#, overriding, stack-overflow, virtual-functions

```
class Program
{
    static void Main(string[] args)
    {
        B foo = new B();
        foo.DoWork();
        Console.ReadLine();
    }
}

public class A
{
    public virtual void DoWork() { Console.WriteLine("A"); }
}
public class B : A
{
    public override void DoWork() { base.DoWork();  Console.WriteLine("B"); }
} 
```

为什么我没有得到 StackOverflow 异常？据我了解，调用 foo.DoWork()，然后调用 base.DoWork()，它是虚拟的并在类 B.DoWork() 方法中被覆盖，它将再次重复调用 base.DoWork()，直到堆栈溢出. 当使用 this 而不是 base（调用 self 的循环循环）时，很容易实现这种溢出。在这种情况下，是什么阻止了虚函数覆盖？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-24T22:08:22.637

不，当您使用`base`它时，它*不会*进行虚拟通话。*重点是即使您已经覆盖*`base`了实现，也能够调用它。

 *如果您查看生成的 IL，您会发现它没有使用`callvirt`：

```
IL_0002:  call       instance void A::DoWork() 
```

从 C# 5 规范的第 7.6.8 节（强调我的）：

> 当基本访问引用虚拟函数成员（方法、属性或索引器）时，在运行时（第 7.5.4 节）调用哪个函数成员的确定会改变。**被调用的函数成员是通过查找函数成员相对于 B 的最派生实现（第 10.6.3 节）来确定的（而不是相对于 this 的运行时类型，这在非基础访问）。**因此，在虚函数成员的覆盖中，可以使用基本访问来调用函数成员的继承实现。如果基本访问引用的函数成员是抽象的，则会发生绑定时错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T22:08:27.920

`A.DoWork`是虚拟的。但是名为 by 的方法`base.`永远*不是*虚拟的。该语法会生成一个非虚拟调用，因此调用的是确切的方法，而不是最派生的版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T22:08:17.783

虚拟方法只是一种可以被覆盖并且包含代码的方法。当你打电话时，`base.DoWork()`你明确声明你想打电话`A.DoWork()`。然后，`A.DoWork()`被调用。

尝试制作`A.DoWork()`抽象然后它不能包含代码。然后，您将遇到编译错误，`base.DoWork()`因为在`base.DoWork()`.*

# asp.net-mvc - MVC DropDownListFor 变量类型问题

> ID：14511666
> 
> 赞同：2
> 
> 时间：2013-01-24T22:06:18.497
> 
> 标签：asp.net-mvc, selectlist, dropdownlistfor

这是我的问题：

我正在开发一个 MVC 互联网应用程序，并尝试管理用户。首先，我的编辑视图显示所选用户的用户名和角色。可以选择用户的角色在我的 HTML 视图中的 DropDownListFor 中列出。当我单击“编辑此用户”时，出现一个错误，显示我：

具有键 «RoleId» 的 ViewData 元素是类型 «System.Int32» 但必须是 «IEnumerable»。

这是我的视图模型：

```
using GestionStages.Models;
using System;
using System.Collections.Generic;
using System.ComponentModel.DataAnnotations;
using System.Linq;
using System.Web;
using System.Web.Mvc; >

> namespace GestionStages.Areas.Stages.ViewModels
{
    public class UserRoleViewModel
    {
        public RegisterModel Register { get; set; }
        public SelectList Roles { get; set; }
        public UserProfile User { get; set; }
        public String CurrentUserName { get; set; }

        [Required(ErrorMessage = "A role is required")]
        public int RoleId { get; set; }
    }
} 
```

这是我的 HTML 编辑视图的一部分：

```
<div class="form_row">
     @Html.Label("Roles")
     @Html.DropDownListFor(x => x.RoleId,  Model.Roles)
</div> 
```

这是我的控制器中的编辑方法：

```
public ActionResult Edit(int id = 0)
{
    UserRoleViewModel model = new UserRoleViewModel();
    model.User = db.UserProfiles.Find(id);

    if (model.User == null)
    {
        return HttpNotFound();
    }

    model.Roles = new SelectList(db.webpages_Roles.ToList(), "RoleId", "RoleName");
    model.CurrentUserName = model.User.UserName;
    model.RoleId = model.User.webpages_Roles.FirstOrDefault().RoleId;

    return View(model);
}

//
// POST: /Sales/Sale/Edit/5

[HttpPost]
public ActionResult Edit(UserRoleViewModel model)
{
    if ((model.User.UserName != model.CurrentUserName && db.UserProfiles.Where(x => x.UserName == model.User.UserName).Any()))
    {
        ModelState.AddModelError("", "The user is already in the database");
    }
    if (ModelState.IsValid)
    {
        db.Entry(model.User).State = EntityState.Modified;
        db.SaveChanges();
        return RedirectToAction("Index");
    }
    return View(model);
} 
```

谢谢您的帮助

# python - 如何查看 Google Drive 文件夹中的内容是否已更改

> ID：14511669
> 
> 赞同：3
> 
> 时间：2013-01-24T22:06:32.997
> 
> 标签：python, google-drive-api

我目前正在开发一个应用程序，该应用程序可以同步用户 Google Drive 中的一个特定文件夹。我需要查找该特定文件夹中的任何文件/文件夹何时发生更改。实际的同步过程很简单，但我不想每隔几秒就进行一次完全同步。我正在考虑以下方法之一：

1) 监视更改源并查找任何文件更改
此方法很简单，但如果驱动器中的任何文件发生更改，它将导致同步。

2）经常请求整个驱动器中的所有文件，例如。service.files().list().execute() 并在特定树中查找更改。这是一种蛮力方法。如果用户的驱动器中有 1000 个文件，这将太慢。

3) 从特定文件夹开始，然后向下移动文件夹树以查找更改。如果特定树中只有几个目录，这种方法会很快，但仍然会导致大量的 API 请求。

有没有更好的方法来查找特定文件夹及其内容是否已更改？是否有任何优化可以应用于方法 1,2 或 3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T06:18:55.260

正如您正确指出的那样，您需要保留（或制定）已更改文件的文件层次结构，以了解文件在文件夹树中是否已更改。

无法直接从更改提要中知道文件夹中的深层嵌套文件是否已更改。对不起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-19T15:09:47.060

有几个技巧可能会有所帮助。

首先，如果您的应用程序使用 drive.file 范围，那么它只会看到自己的文件。根据您的具体情况，这可能等同于您的文件夹层次结构。

其次，文件可以有多个父级。所以在folder-top/folder-1/folder-1a/folder-1ai中创建文件时。您可以将 folder-1ai**和**folder-top 都声明为父级。然后你只需要检查文件夹顶部。

# php - PHP 的读写器接口

> ID：14511675
> 
> 赞同：2
> 
> 时间：2013-01-24T22:06:49.023
> 
> 标签：php, interface, dependency-injection, software-design

我创建了两个非常基本的接口，名为 ReaderInterface 和 WriterInterface，但我从这个示例中删除了 WriterInterface，因为没有必要说明我的难题。

**读者界面.php**

```
interface ReaderInterface
{
    public function read();
} 
```

我有一个名为 Datatable 的具体类：

**数据表.php**

```
class Datatable
{
    protected $cols;
    protected $rows;

    protected $reader;

    public function __construct()
    {
        $this->cols = array();
        $this->rows = array();

        $this->reader = null;
    }

    public function setReader(ReaderInterface $reader)
    {
        $this->reader = $reader;
    }

    public function load()
    {
        //Contents to follow below.
    }
} 
```

我实例化一个数据表实例如下：

```
$db = new PDO("mysql:host=localhost;port=3306;dbname=test", "user", "pass"); //Let's pretend this is a good connection.

$datatable = new Datatable();
$datatable->setReader(new DatatableReader($db));
$datatable->load(); 
```

我的问题是关于实现 DatatableReader 以便它可以从我传入的数据库中读取，`$this->cols`并`$this->rows`在我的 Datatable 对象中写入和写入。

我马上就看到了两种方法。

**1.依赖注入**

```
class DatatableReader implements ReaderInterface
{
    protected $db;
    protected $datatable;

    public function __construct(Datatable &$datatable, PDO &$db)
    {
        $this->datatable = $datatable;
        $this->db = $db;
    }

    public function read()
    {
        //Execute prepared statement which returns 5 records.
        //Get the columns, and place them into an array.

        foreach ($columns as $col) {
            $this->datatable->addColumn($col); //Add a column to the datatable.
        }
    }
} 
```

然后，我的`Datatable::load()`方法将实现为：

```
public function load()
{
    if ($this->reader != null)
        $this->reader->read();
} 
```

**2\. read() 的弱类型返回。**

```
class DatatableReader implements ReaderInterface
{
    protected $db;

    public function __construct(PDO &$db)
    {
        $this->db = $db;
    }

    public function read()
    {
        //Execute prepared statement which returns 5 records.
        //Get the columns, and place them into an array.
        return $columns;
    }
} 
```

然后我会`load()`按如下方式调用我的方法：

```
public function load()
{
    if ($this->reader != null) {
        $retval = $this->reader->read();

        //Do stuff with the array of information returned from the reader.
    }
} 
```

**问题**

1.  在这两个选项中，哪个是最好的设计？
2.  我忽略了第三种选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T22:41:22.107

我会选择选项 2。使用选项 1 你会产生一个递归：`DatatableReader`包含对象`Datatable`，反之亦然。

选项 1 的另一个坏处是您滥用该`read`方法写入另一个对象。并且只有具体的实现 ( `DatatableReader`) 知道该对象。所有实现接口的对象都应该以相同的方式做出反应。

# magento - Magento - 在含税的产品上显示奖励积分

> ID：14511701
> 
> 赞同：3
> 
> 时间：2013-01-24T22:08:28.077
> 
> 标签：magento, discounts

我们运行一个基于 Magento 的电子商务网站。它正在运行 Magento Enterprise 1.10。

我们在英国 - 所以我们喜欢显示所有价格，包括税 (VAT)。我们的商店设置了包含增值税的输入价格，Magento 在结帐时反算增值税。

该网站使用内置的企业奖励积分功能，并为客户每消费 1​​ 英镑提供 10 积分。

显示奖励积分（目前在目录和购物篮中使用函数“echo $this->getRewardPoints()”）显示包含税的奖励积分（因此 £15 = 150 积分）但在结帐时，使用相同的函数显示项目的潜在积分计算项目的奖励积分减去税（因此 15 英镑 = 120 积分）。

下订单后，奖励积分将添加到客户帐户中减去税款。这显然让用户感到困惑。

作为一项临时措施，我已停止在

**我们正在寻找：**

**a)**让 Magento 始终显示包含增值税的积分 - 并在下订单时添加正确数量的积分（并保持积分 - 英镑比率不变） **b)**让 Magento 始终显示和添加不包括增值税的积分 - 因此我们会把积分-磅比提高来补偿。

对此的任何帮助或指示将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T16:03:21.007

我有一个客户也需要这个，所以我编写了一个自定义模块，它覆盖了仅计算税前奖励的函数，允许它也计算价格+税。我刚刚在奖励配置区域添加了一个新选项，以允许计算包括税是或否。

不想经历描述如何创建自定义模块的过程（有很多资源），但执行计算的实际函数在这个文件中：code/core/enterprise/reward/model/action /OrderExtra.php

如果您想快速而肮脏地进行操作，请找到 getPoints 函数并将 $monetaryAmount 计算更改为（如果有 $quote）：

```
$monetaryAmount = $quote->getBaseGrandTotal() - $address->getBaseShippingAmount(); 
```

和（如果没有 $quote）

```
$monetaryAmount = $this->getEntity()->getBaseTotalPaid() - $this->getEntity()->getBaseShippingAmount(); 
```

希望有帮助！

编辑： getPoints 函数的实际代码应如下所示：

```
if ($this->_quote) {
        $quote = $this->_quote;
        // known issue: no support for multishipping quote
        $address = $quote->getIsVirtual() ? $quote->getBillingAddress() : $quote->getShippingAddress();
        // use only money customer spend - shipping & tax
        $monetaryAmount = $quote->getBaseGrandTotal() - $address->getBaseShippingAmount();

        // *****CALCULATE POINTS INCLUDING TAX
        $monetaryAmount -= $address->getBaseTaxAmount();

        // set points to 0 if calcualtion is negative
        $monetaryAmount = $monetaryAmount < 0 ? 0 : $monetaryAmount;
    } else {
      // use only money customer spend - shipping
        $monetaryAmount = $this->getEntity()->getBaseTotalPaid() - $this->getEntity()->getBaseShippingAmount();

        // *****CALCULATE POINTS INCLUDING TAX
        $monetaryAmount -= $this->getEntity()->getBaseTaxAmount();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-26T16:57:26.993

遇到了同样的问题，但发现只删除运费税更简单。

```
$monetaryAmount = $quote->getBaseGrandTotal()
- $address->getBaseShippingAmount()
- $address->getBaseShippingTaxAmount(); 
```

并更改 else 函数。完美运行

```
$monetaryAmount = $this->getEntity()->getBaseTotalPaid()
- $this->getEntity()->getBaseShippingAmount()
- $this->getEntity()->getBaseShippingTaxAmount(); 
```

# javascript - Javascript - 从子继承和调用父方法

> ID：14511702
> 
> 赞同：3
> 
> 时间：2013-01-24T22:08:30.107
> 
> 标签：javascript, methods, call, prototype, parent

我在 javascript 中与 oop 争论了几天，但我没有找到解决方案。

我创建了 3 个对象，一个超类，一个子类和一个继承管理器，它们应该对我的子类执行所有“原型”魔术。

继承管理器：

```
Inheritance_Manager = {};
Inheritance_Manager.extend = function(subClass, baseClass) {
    function inheritance() {
    }
    inheritance.prototype = baseClass.prototype;
    subClass.prototype = new inheritance();
    subClass.prototype.constructor = subClass;
    subClass.baseConstructor = baseClass;
    subClass.superClass = baseClass.prototype;
}; 
```

超级（父）类：

```
SDSection = function(sectionId, resourceId) {

    this.self = this;
    this.sectionId = sectionId;
    this.resourceId = resourceId;

    ...
};

SDSection.prototype.doSetups = function() {
        ...
}; 
```

子类：

```
TypedSectionHandler = function(sectionId, resourceId) {
    SDSection.call(this, sectionId, resourceId);
        ...
};

Inheritance_Manager.extend(TypedSectionHandler, SDSection);

TypedSectionHandler.prototype.doSetups = function() {
        ...
    SDSection.doSetups.call(this);
        ...
}; 
```

我想做的很简单，用其他编程语言，如 php 或 java。我想从“TypedSectionHandler”类型的子类中的方法“doSetups”调用父类“SDSection”中覆盖的“doSetups”方法。

我在这个问题上苦苦挣扎了大约 1 周，我尝试了不同的解决方案，从基本到更复杂，但似乎没有任何效果。

每次在chrome或firefox中执行脚本时，我都会收到错误“无法调用未定义的方法调用”或更简单，“SDSection.doSetups”未定义。

至少我从[这里](http://www.cyberminds.co.uk/blog/articles/how-to-implement-javascript-inheritance.aspx)选择了上述方法并根据我的需要对其进行了调整，但无论如何它都不起作用，并且浏览器正在退出并出现同样的错误。慢慢地，我变得非常疯狂。:)

有人知道我做错了什么以及可行的解决方案如何？

谢谢

你做

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T22:24:34.770

您需要调用`doSetups`属于父类的`prototype`.

```
TypedSectionHandler.prototype.doSetups = function() {
        ...
    SDSection.prototype.doSetups.call(this);
        ...
}; 
```

如果您想了解不同的继承技术（特别是一种不需要调用者知道父类型的技术），您可能需要查看 CoffeeScript 的`__extends`函数，以及它是如何执行继承的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T22:35:37.250

如果您使用纯 JavaScript，请使用 voithos 的解决方案。我喜欢在我当前的项目中使用 John Resig 的[简单继承片段。](http://ejohn.org/blog/simple-javascript-inheritance/)[在minification](http://closure-compiler.appspot.com/home)之后只有 521 个字节，没有依赖关系，在你的情况下，它会像这样工作：

```
SDSection = Class.extend({
    init: function(sectionId, resourceId) {

        this.sectionId = sectionId;
        this.resourceId = resourceId;

        ...
    },
    doSetups: function(){
        ...
    }
});

TypedSectionHandler = SDSection.extend({
    doSetups: function(){
        ...
        this._super();
        ...
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T23:14:54.963

如果你想自己做，你可以像**voithos**说的那样走——自己写有助于你肯定地理解 js OOP。

如果您想要**更舒适**（= 不必使用`apply`和`call`- 如果您在 Visual Studio 2012 中开发 - **base-methods/-constructor intellisense 支持**）我希望您查看我写的一个框架：**[jsframework](http://sourceforge.net/projects/jsframework/)**

有了它，您可以非常轻松地编写示例：

```
SDSection = new Class(Object, function(base, baseConstructor)
{
    // member fields for prototype
    this.self = null;
    this.sectionId = -1;
    this.resourceId = -1;

    // constructor
    this.init = function(sectionId, resourceId)
    {
        this.self = this;
        this.sectionId = sectionId;
        this.resourceId = resourceId;
    };

    // member functions
    this.doSetups = function() 
    {
        console.log("SDSection doSetups: " + this.sectionId + "/" + this.resourceId);
    };
});

TypedSectionHandler = new Class(SDSection, function(base, baseConstructor)
{
    this.anotherId = -2;

    // constructor
    this.init = function(sectionId, resourceId, anotherId) 
    {
        baseConstructor(sectionId, resourceId);

        this.anotherId = anotherId;
    };

    // member functions
    this.doSetups = function() 
    {
        // call base function
        base(this).doSetups();
        console.log("TypedSectionHandler doSetups: " + this.anotherId);
    };
});

var t = new TypedSectionHandler(1, 2, 3);
t.doSetups();
console.log(t instanceof TypedSectionHandler);
console.log(t instanceof SDSection); 
```

这是一个有效的jsfiddle：http: [//jsfiddle.net/QYXSr/1/](http://jsfiddle.net/QYXSr/1/)

输出：

```
SDSection doSetups: 1/2
TypedSectionHandler doSetups: 3
true
true 
```

## 免责声明：

正如我所说，我是这个框架的开发者；）

# c# - 与 RGN 相比时的浮点精度问题

> ID：14511703
> 
> 赞同：0
> 
> 时间：2013-01-24T22:08:39.407
> 
> 标签：c#, floating-accuracy

> **可能重复：**
> [C# 的浮点比较函数](https://stackoverflow.com/questions/3874627/floating-point-comparison-functions-for-c-sharp)

我已经阅读了浮点精度的所有问题，并且从我所阅读的内容来看，答案是四舍五入。在我的情况下，我有一个值为 0.07 的双精度值，它实际上存储为 0.070000000000000007。我需要将 .07 与 0 和 1 之间的 RGN 进行比较，这也是一个双精度数。我解决问题的方法是将两个数字四舍五入到 15 位，然后对它们进行比较。这是正确的方法吗？

Math.Round(RGN, 15) >= Math.Round(双倍, 15)

谢谢您的帮助！！

加里

# ruby-on-rails - 每当 Gem 无法在 Capistrano 中正确运行“bundle exec”时

> ID：14511706
> 
> 赞同：3
> 
> 时间：2013-01-24T22:08:47.410
> 
> 标签：ruby-on-rails, ruby-on-rails-3, capistrano, bundler, whenever

我在使用 Capistrano 将Whenever gem 部署到我的生产环境时遇到问题。

问题源于`bundle exec whenever`触发一些“缺少 gem”问题的命令（但从 shell 运行 bundle install 表明一切都在那里！）。

我的感觉是发生了两件事之一：`bundle exec`在调用之前 Bundler 没有完全加载，或者在错误的位置运行它的路径问题。

这是发生了什么：

```
 * executing `deploy'
  * executing `deploy:update'
 ** transaction: start
  * executing `deploy:update_code'
    executing locally: "git ls-remote git@my-source-repository:mysource.git HEAD"
    command finished in 1847ms
  * executing "git clone -q git@my-source-repository:mysource.git /domains/myapp/releases/20130124211036 && cd /domains/myapp/releases/20130124211036 && git checkout -q -b deploy 90238bbcb993e3e7df2374ffaa13e7ed701c202e && (echo 90238bbcb993e3e7df2374ffaa13e7ed701c202e > /domains/myapp/releases/20130124211036/REVISION)"
    servers: ["myip"]
    [myip] executing command
 ** [myip :: out] Enter passphrase for key '/home/deploy/.ssh/id_rsa':
 ** [myip :: out]
    command finished in 9294ms
  * executing `deploy:finalize_update'
    triggering before callbacks for `deploy:finalize_update'
  * executing `whenever:update_crontab'
  * executing "cd /domains/myapp/releases/20130124211036 && bundle exec whenever --update-crontab My App --set environment=production --roles db"
    servers: ["myip"]
    [myip] executing command
 ** [out :: myip] Could not find carrierwave-0.5.8 in any of the sources
 ** [out :: myip] Run `bundle install` to install missing gems.
    command finished in 1967ms
*** [deploy:update_code] rolling back
  * executing "rm -rf /domains/myapp/releases/20130124211036; true"
    servers: ["myip"]
    [myip] executing command
    command finished in 998ms
failed: "rvm_path=/usr/local/rvm /usr/local/rvm/bin/rvm-shell '1.9.3' -c 'cd /domains/myapp/releases/20130124211036 && bundle exec whenever --update-crontab My App --set environment=production --roles db'" on myip 
```

您可以看到失败来自此行：

```
bundle exec whenever --update-crontab 
```

这又由我的 Capistrano deploy.rb 运行。

```
# Your Application's "Name"
set :application, [My App]

# The URL to your application's repository
set :repository, [repo]
set :scm, :git
set :scm_passphrase, [password]

# The user you are using to deploy with (This user should have SSH access to your server)
set :user, "deploy"

# We want to deploy everything under your user, and we don't want to use sudo
set :use_sudo, false

# Where to deploy your application to.
set :deploy_to, "/domains/myapp/"

# Load RVM's capistrano plugin.    
require "rvm/capistrano"

set :rvm_ruby_string, '1.9.3'
set :rvm_type, :system  # use system-wide RVM

# Require that we use bundler to install necessary gem dependencies
require "bundler/capistrano"

set :whenever_command, "bundle exec whenever"
require "whenever/capistrano"

# -------------------------------- Server Definitions --------------------------------
# Define the hostname of your server.  If you have multiple servers for multiple purposes, we can define those below as well.
set :server_name, [server]

# We're assuming you're using a single server for your site, but if you have a seperate asset server or database server, you can specify that here.
role :app, server_name
role :web, server_name
role :db,  server_name, :primary => true

# -------------------------------- Final Config --------------------------------
# This configuration option is helpful when using svn+ssh but doesn't hurt anything to leave it enabled always.
default_run_options[:pty] = true 

namespace :deploy do
  desc "Tell Passenger to restart the app."
  task :restart do
    run "touch #{deploy_to}current/tmp/restart.txt"
  end

  task :start do
    run "cd #{deploy_to} && ln -s current/public public_html"
    run "touch #{deploy_to}current/tmp/restart.txt"
  end

  task :symlink do
    run "cd #{deploy_to} && rm current ; ln -s releases/#{release_name} current"
  end

  task :stop do
    run "rm #{deploy_to}public_html"
  end

  namespace :web do
    task :disable do
      run "cd #{deploy_to} && rm public_html && ln -s static_site public_html"
    end

    task :enable do
      run "cd #{deploy_to} && rm public_html && ln -s current/public public_html"
    end
  end

  desc "Symlink shared configs and folders on each release."
  task :symlink_shared do
    run "ln -nfs #{shared_path}/config/database.yml #{release_path}/config/database.yml"
    run "ln -nfs #{shared_path}/assets #{release_path}/public/assets"

    # create symlink to uploads folder for Carrierwave resources (i.e., book cover images)
    run "ln -nfs #{shared_path}/uploads  #{release_path}/public/uploads"
  end

  desc "Sync the public/assets directory."
  task :assets do
    system "rsync -vr --exclude='.DS_Store' public/assets #{user}@#{application}:#{shared_path}/"
  end

end

after "deploy", "deploy:migrate"

after 'deploy:update_code', 'deploy:symlink_shared'

after(:setup) do
  run "rm -rf #{deploy_to}public_html"
  run "mkdir #{deploy_to}static_site"
end 
```

现在，我得到的关于 CarrierWave 的错误是虚假的——我已经使用 CarrierWave 很长时间了——而且问题显然源于（正如你可以从触发错误的命令中看到的那样）来自任何时候本身或 Bundler。

而且我认为它实际上可能与与 RVM 相关的路径有关。无论如何，这`bundle exec whenever`是行不通的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T16:40:55.420

事实证明，有几个问题需要解决：

*   每当 ~> 0.8 引入了 Capistrano 角色的错误
*   每当 cap 任务在 bundle:install 之前触发（这在您上面的代码中得到确认）

在此处查看问题：[https](https://github.com/javan/whenever/issues/275) ://github.com/javan/whenever/issues/275和此处：[https ://github.com/javan/whenever/issues/269](https://github.com/javan/whenever/issues/269)

要解决此问题，您很可能需要

*   更新服务器上的捆绑程序 (-v 1.2.3)
*   Update bundler locally
*   Update to the newest Whenever (-v 0.8.2)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T11:27:33.520

@ideaoforder's answer helped me too, previously though I had the same trouble caused by `require 'whenever/capistrano'` being on the top of the `config/deploy.rb` followed by `require 'bundler/capistrano'`. Swapping those two helped.

I have `require 'bundler/capistrano'` always on top of the deploy script as a rule.

# php - file_get_contents 和 ajax 请求

> ID：14511707
> 
> 赞同：2
> 
> 时间：2013-01-24T22:08:48.780
> 
> 标签：php, ajax, proxy, file-get-contents

我有 php 代理脚本，它使用 file_get_contents 来获取网站并输出它......只要网站是静态的，一切都在工作，但只要我使用一些使用 ajax 请求来更新其内容的网站，就像 twitter，9gag ，youtube ...没有添加新内容我在控制台中收到此错误：

*XMLHttpRequest 无法加载[http://9gag.com/new/json?list=hot&id=6408098](http://9gag.com/new/json?list=hot&id=6408098)。Access-Control-Allow-Origin 不允许 Origin。*

由于 9gag 站点现在是由我的本地代理提供服务的本地站点，因此它无法从原始 9gag 站点访问新内容，这是跨域问题....

所以我的问题是我如何接受 ajax 请求并将它们通过我的本地代理服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T23:11:51.010

这是一项安全功能。这样做是为了防止您尝试执行的此类请求。如我所见，您只有两种可能性：

1.  将站点添加到`hosts`文件以将其转发到您的代理。这样，您必须确保您的代理以这种方式正确响应。但我不知道除了检查域之外是否还有其他一些浏览器端检查。如果只考虑域，一切都会好起来的。
2.  将操作系统设置为使用您的代理站点作为系统代理。这样，您应该使其作为常规代理服务器进行响应。

PS 使用一些现成的透明代理实用程序可能会更好吗？

# hadoop - Hbase 架构嵌套实体

> ID：14511708
> 
> 赞同：14
> 
> 时间：2013-01-24T22:08:52.853
> 
> 标签：hadoop, schema, hbase

有没有人有关于如何使用嵌套实体创建 Hbase 表的示例？

例子

```
UserName (string)
SSN  (string)
  + Books (collection) 
```

例如，书籍收藏看起来像这样

图书

```
isbn
title
etc... 
```

我找不到一个例子是如何创建这样的表。我看到很多人都在谈论它，以及它在某些情况下如何成为最佳实践，但我无法在任何地方找到如何做到这一点的示例。

谢谢...

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-24T22:37:26.287

嵌套实体不是 HBase 的官方特性；这只是一些人谈论一种使用模式的一种方式。在此模式中，您使用 HBase 中的“列”实际上只是一个大映射（一堆键/值对）这一事实，让您通过在每个“行”中添加一列来对行*内*的基数维度进行建模嵌套实体。

模式方面，您不需要对表本身做太多事情；在 HBase 中创建表时，只需指定名称和列族（以及相关属性），如下所示（在 hbase shell 中）：

```
hbase:001:0> create 'UserWithBooks', 'cf1' 
```

然后，由您决定在其中放入什么，按列排列。您可以插入如下值：

```
hbase:002:0> put 'UsersWithBooks', 'userid1234', 'cf1:username', 'my username'
hbase:003:0> put 'UsersWithBooks', 'userid1234', 'cf1:ssn', 'my ssn'
hbase:004:0> put 'UsersWithBooks', 'userid1234', 'cf1:book_id_12345', '<isbn>12345</isbn><title>mary had a little lamb</title>'
hbase:005:0> put 'UsersWithBooks', 'userid1234', 'cf1:book_id_67890', '<isbn>67890</isbn><title>the importance of being earnest</title>' 
```

列名完全由您决定，并且您可以拥有的数量没有限制（在合理范围内：有关此内容的更多信息，请参阅 HBase 参考指南）。当然，这样做，你必须做你自己的跑腿工作：输入和输出值（你可能会用 java 客户端做这件事，比我用这些 shell 命令做的更复杂，他们）仅用于解释目的）。虽然您可以通过键有效地扫描表中的一部分列（使用列分页过滤器），但除了将单元格的内容拉出并在其他地方解析它们之外，您无法对单元格的内容做太多事情。

你为什么要这样做？可能只是如果您想要一个父行的所有嵌套行周围的原子性。这不是很常见，您最好的选择可能是首先将它们建模为单独的表，并且只有在您真正了解权衡时才使用这种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-02T07:26:11.887

对此有一些限制。首先，这种技术只适用于一层：嵌套实体本身不能有嵌套实体。您仍然可以在单个父项中拥有多个不同的嵌套子实体，并且列限定符是它们的标识属性。其次，与访问另一表中的行相比，访问存储为行内嵌套列限定符的单个值效率不高，正如您在本章前面所了解的那样。尽管如此，仍有一些令人信服的案例表明这种模式设计是合适的。如果您获得子实体的唯一方法是通过父实体，并且您希望对父实体的所有子实体进行交易保护，那么这可能是正确的方法。

# asp.net-mvc - json 时间跨度返回对象

> ID：14511709
> 
> 赞同：1
> 
> 时间：2013-01-24T22:09:00.233
> 
> 标签：asp.net-mvc, json, asp.net-mvc-3, asp.net-mvc-2, asp.net-mvc-4

我使用 Asp.net MVC4 (C#)，我想从控制器加载数据以查看。从控制器返回视图中的对象，该对象具有 TimeSpan (HH:DD:MM) 类型的属性这是我的功能：

```
public JsonResult Buscar(string id){
        string Mensaje = "";
        Models.cSinDenuncias oDenuncia = new Models.cSinDenuncias();
        oDenuncia.sd_iddenuncia = id;
        var denuncia = Servicio.RecuperaDenuncia<Models.cSinDenuncias>(ref Mensaje, oDenuncia.getPk(), oDenuncia);
        return Json(denuncia);
    } 
```

denuncia.sd_horadenuncia 有例如这个值 18:03:53 但是当我在视图中显示时我无法加载这个值这是视图中的值 [OBJECT OBJECT] (Html.TextBoxFor)：

```
$('#HoraDen').val(data.sd_horadenuncia); 
```

我怎样才能恢复正确的值？(HH:MM:SS) 而不是 [OBJECT OBJECT]

问候里卡多

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T13:50:27.133

TimeSpan 是一种复杂类型。这意味着在您的 JSON 中，它是这样序列化的：

```
{
    "sd_horadenuncia": {
        "Ticks": 3000000000,
        "Days": 0,
        "Hours": 0,
        "Milliseconds": 0,
        "Minutes": 5,
        "Seconds": 0,
        "TotalDays": 0.003472222222222222,
        "TotalHours": 0.08333333333333333,
        "TotalMilliseconds": 300000,
        "TotalMinutes": 5,
        "TotalSeconds": 300
    }
} 
```

您正试图将这个复杂的对象分配给一个显然没有意义的文本字段。

您可以在控制器操作上使用视图模型来预先格式化值：

```
public ActionResult Buscar(string id)
{
    string Mensaje = "";
    Models.cSinDenuncias oDenuncia = new Models.cSinDenuncias();
    oDenuncia.sd_iddenuncia = id;
    var denuncia = Servicio.RecuperaDenuncia<Models.cSinDenuncias>(ref Mensaje, oDenuncia.getPk(), oDenuncia);
    return Json(new 
    { 
        formattedHoradenuncia = denuncia.sd_horadenuncia.ToString() 
    });
} 
```

然后在您的视图中，您可以使用新属性：

```
$('#HoraDen').val(data.formattedHoradenuncia); 
```

另一种可能性是访问这个复杂对象的各个属性并自己格式化值：

```
var hours = data.sd_horadenuncia.Hours;
var minutes = data.sd_horadenuncia.Minutes;
var seconds = data.sd_horadenuncia.Seconds;
$('#HoraDen').val(hours + ':' + minutes + ':' + seconds); 
```

# javascript - 如何获取特定类的表数据总数？(jQuery)

> ID：14511711
> 
> 赞同：0
> 
> 时间：2013-01-24T22:09:06.563
> 
> 标签：javascript, jquery

假设我有下表：

```
<table class="table questions">
    <tr>
        <td class="someClass">Some data</td>
        <td class="someOtherclass">Some data</td>
    </tr>
    <tr>
        <td class="someOtherClass">Some data</td>
        <td class="someOtherclass">Some data</td>
    </tr>
    <tr>
        <td class="someOtherClass">Some data</td>
        <td class="someClass">Some data</td>
    </tr>
</table> 
```

我将如何获得具有 someClass 类值的表数据的总数？例如，对于这张桌子，总数将是两个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T22:11:17.170

只需使用 .length 找出有多少

```
$('.questions .someClass').length // will return 2 since there are 2 rows 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T22:11:34.470

假设您要计算表中元素的数量`.someClass`

```
$('.someClass', '.questions').length 
```

或者

```
$('.questions').find('.someClass').length //faster 
```

# wpf - 定义默认布局属性

> ID：14511718
> 
> 赞同：0
> 
> 时间：2013-01-24T22:09:44.940
> 
> 标签：wpf, templates, user-interface

我想在整个视图中的所有控件中设置一致的边距。我目前使用 XAML：

```
<Window.Resources>
    <Thickness x:Key="ConsistentMargins">0,10,0,0</Thickness>
</Window.Resources>

<!-- ... -->
<!-- ... -->
<!-- ... -->

<MyControl1 Margin="{StaticResource ConsistentMargins}">
<MyControl2 Margin="{StaticResource ConsistentMargins}">
<MyControl3 Margin="{StaticResource ConsistentMargins}"> 
```

有没有办法为控件设置一个默认的布局样式来避免上面显示的重复代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T22:36:21.400

您可以创建自己的样式，`TargetType`该样式将分配给您在 中指定的所有类型的对象`TargetType`。但在这种情况下，您创建的样式将仅适用于指定类型的对象，而不适用于派生类型。

例如，您可以为所有按钮创建样式，如下所示：

```
<Style TargetType="{x:Type Button}">
    <Setter Property="Margin" Value="0,10,0,0" />
</Style> 
```

我认为没有从基类应用样式是有道理的，因为我想说“我的所有按钮看起来像......”，但我不想说“一切看起来像......”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T22:39:57.970

您可以为 FrameworkElement 创建一个基本默认样式，并让其他元素类型的默认样式扩展基本样式：

```
<Window.Resources>
    <Style TargetType="FrameworkElement">
        <Setter Property="Margin" Value="0,10,0,0"/>
    </Style>
    <Style TargetType="TextBlock" BasedOn="{StaticResource {x:Type FrameworkElement}}"/>
    <Style TargetType="TextBox" BasedOn="{StaticResource {x:Type FrameworkElement}}"/>
    <Style TargetType="Label" BasedOn="{StaticResource {x:Type FrameworkElement}}"/>
    ...
</Window.Resources> 
```

# html - HTML5-Reset 和 cfforms 的问题

> ID：14511725
> 
> 赞同：0
> 
> 时间：2013-01-24T22:10:13.680
> 
> 标签：html, coldfusion, cfform

我在 ColdFusion 应用程序的页面中使用 HTML5-Reset。头部标签如下所示：

```
<head id="swipeapp" data-template-set="html5-reset"> 
```

页面中也有一个`<cfform>`。浏览器会忽略`data-template-set`并`id`在浏览器本身上打印内容。我发现这是因为`<cfforms>`并发现添加`<cfcontent type="text/html; charset=utf-8">`解决了这个问题。

通过这一更改，该页面可以在 Chrome 和 Firefox 上运行，但 html5-reset 也会被删除。对齐方式和样式在 IE 7 和 8 中折腾。

有什么办法可以保留`html5-reset`和使用`cfforms`吗？

# c++ - 这个数组转换是如何工作的（使用字符串小写到大写）？

> ID：14511727
> 
> 赞同：0
> 
> 时间：2013-01-24T22:10:22.880
> 
> 标签：c++, string, uppercase, lowercase

我让程序按预期工作，但谁能解释它是*如何*工作的？

```
#include <iostream>

using namespace std;

int main(void) {
    int exit;     
    string name;
    cin >> name;

    for (int i = 0; i < name.length(); i++) {
        // the line below is the one I don't understand 
        if ('a' <= name[i] && name[i] <= 'z') name[i] = char(((int)name[i]) - 32);
    }
    cout << name;
    cin >> exit;
    return 0;
 } 
```

**编辑**：让我改述一下：

我不明白的是字符串到数组的交易是如何工作的，如： `'a'<= name[i]`. 这到底是什么比较以及如何比较？

**EDIT2** 感谢你们的快速回复，爱你们。我想到了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T22:13:17.307

这是行：

```
 if('a'<=name[i] && name[i]<='z')name[i]=char(((int)name[i])-32); 
```

分解：

```
 if( 'a'<=name[i] ) {
   if( name[i]<='z' ) {
     // name_int is a temporary, which the above code implicitly creates,
     // but doesn't give a name to:
     int name_int = name[i];
     name_int = name_int - 32;
     name[i] = char(name_int);
   }
 } 
```

并注意在您使用的字符编码中`32`恰好相等。`'a'-'A'`

（技术上`name_int`应该是`int&&`这样的，但没必要那么混乱。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T22:25:00.427

我从您评论中的编辑中假设您想知道如何将其`[]`应用于`string`对象。运算符`[]`重载用于`string`返回对表示字符串的指定位置偏移处的字符的引用。不需要将 直接转换为`string`数组。实现重载的代码很可能是遍历链表。这取决于如何`string`实施。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T22:11:57.113

它假定 ASCII 字符格式从小写转换为大写，您从原始 ASCII 值中减去 32。这是因为大写的 ASCII 值小于小写的 ASCII 值，并且它是和之间的恒定差异，`A`依此类推。`a``B``b`

供参考：[http ://www.asciitable.com/](http://www.asciitable.com/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-24T22:22:38.550

```
'a' <= name[i] && name[i] <= 'z' 
```

这一行正在比较这两个字符的相应 ASCII 值。`'a'`在 ASCII 中是 97 和`'z'`122。如果`name[i]`是从`'a'`到`'z'`表达式的字符之一，则返回 true。这通常用于检查变量是否为字母。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T22:48:07.350

```
if ('a' <= name[i] && name[i] <= 'z') 
```

`char`对象是类似于整数的数值。因此`'a' <= name[i]`，只需测试 的数值`'a'`是否小于或等于您正在检查的字符。结合`name[i] <= 'z'`和 您正在测试 的数值`name[i]`是否介于 和 的值`'a'`之间`'z'`。现在，最常见的为`char`s 分配数值的方案，称为“美国信息交换标准代码”（ASCII），是按顺序排列的字母表。`'a' + 1 = 'b'`, `'b' + 1 = 'c'`, 等等。因此，确定字符是否介于两者之间`'a'`并`'z'`告诉您它是否是小写字母。

```
name[i] = char(((int)name[i]) - 32); 
```

一旦您知道`char`s 只是数值，您就可以从我们在小学时学到的算术的基本属性推断出`'a' + ('A' - 'a')`值`'A'`。此外，ASCII 具有与小写字母类似的大写字母排列，因此`'A' + 1`= 'B' `, etc. So taking any`char `in the lower case alphabet and adding`'A' - 'a' `will result in the upper case version of that letter. In ASCII`'A' - 'a'` 恰好具有值 -32。因此，取小写字母的数值，减去 32，得到大写字母的数值。

为了比较，这里有一个不依赖于 ASCII 的代码版本：

```
auto l = std::locale();

if (std::islower(name[i], l))
    name[i] = std::tolower(name[i], l); 
```

# flash - Flash Pro CS5.5 中的图形设计 某些图像未正确发布

> ID：14511728
> 
> 赞同：0
> 
> 时间：2013-01-24T22:10:23.893
> 
> 标签：flash, graphics, flash-cs5, flash-cs5.5

我正在使用 Flash Professional CS5.5 进行海报设计。我基本上画了这些小卡片作为边框。在 Flash 里面，我把所有的东西都布置得很完美，而且看起来还不错。但是，当我点击导出为图像或发布为图像时，一些牌的花色符号不正确。他们要么根本不出来，要么让卡片空白，要么在他们的图像中填充一个黑色矩形。

我想让每个西装都成为一个影片剪辑，以便以后更容易进行更改，但最好使用影片剪辑或图形？

这是在预览中打开的导出图像的屏幕截图。对于大多数海报来说，它看起来不错。这也很奇怪，因为有些黑桃出现了，有些变坏了。它不像一套西装就是问题西装。：/

![http://gamesfromjames.weebly.com/uploads/1/4/1/5/14151840/607005_orig.jpg](../Images/5299586e0ac64bd1f371a05d59e71b2e.png)

@dene - 我拿走了西装后面的所有图像，htey 仍然没有出现在图像文件中。

@mori57 - 一个原因是我没有 Ilustrator。我主要使用 Flash 制作游戏、应用程序和动画。但是，我认为设计海报并将其打印出来会很酷。我可以在 Flash 中完成我需要的一切，那么为什么要使用 Illustrator？

谢谢 你知道问题可能是什么吗？会不会是舞台上的画面太多，闪光灯都处理不了？我认为 Flash 能够处理更复杂的事情。

# entity-framework - 实体框架/MVC4 - 与多列键的关系

> ID：14511731
> 
> 赞同：0
> 
> 时间：2013-01-24T22:10:41.810
> 
> 标签：entity-framework, asp.net-mvc-4

我是 EF 的新手，无法确定如何在我的主表 Investors、联系信息和每个投资者可以有许多注释的表 Notes 之间建立关系。以下是模型：

```
public class Investor
{
    public int Id { get; set; }
    public string Name { get; set; }
    public string Company { get; set; }
    public string Email { get; set; }
    public string Phone { get; set; }
    public string Cell { get; set; }
    public string Fax { get; set; }
    [Display(Name="Address 1")]
    public string Address1 { get; set; }
    [Display(Name = "Address 2")]
    public string Address2 { get; set; }
    public string City { get; set; }
    [StringLength(2, ErrorMessage = "State must be 2 characters")]
    public string State { get; set; }
    public string Zip { get; set; }
    public string ContactTableId { get; set; }
    [ForeignKey("ContactTableId, ContactId")]
    public virtual List<Note> Notes { get; set; }
}

public class Note
{
    [Key]
    [Column(Order = 0)]
    public string ContactTableId { get; set; }
    [Key]
    [Column(Order = 1)]
    public int? ContactId { get; set; }
    public string note { get; set; }
    public DateTime? DateCreated { get; set; }
} 
```

如上所述，我进行设置的尝试生成了错误“关系约束中的从属角色和主要角色中的属性数量必须相同。” 关于声明：

```
public ActionResult Index()
{
    return View(db.Investors.ToList());
} 
```

在控制器中。我如何设置它以使其自动提取注释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T22:59:44.100

外键不是“ContactTableId，ContactId”，它是`Investor_Id`表`Note`（或Notes）中的单个字段。EF 认为您尝试将单个键映射到两个字段并创建这个有点难以捉摸的异常消息。但只需删除该`ForeignKey`属性，EF 将使用`Note`.

# c# - Resharper 的代码清理可以将条件运算符转换为 if/then/else 吗？

> ID：14511733
> 
> 赞同：0
> 
> 时间：2013-01-24T22:10:53.057
> 
> 标签：c#, resharper, conditional-operator

在 Cleanup 代码功能中，ReSharper 是否可以将所有条件运算符语句转换为 if/then/else？

ReSharper 7.1

**更新** 为什么？我不喜欢他们。更容易阅读 if/then/else 语句。没有研究？我进行了互联网搜索并查看了所有选项，没有找到任何东西。Cédric Bignon 的评论似乎证实了我没有找到任何东西。所以我想我已经问过这里的专家了，因为我已经使用 Resharper 2 天了，我想也许我错过了一些东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T07:17:45.420

不，从 7.1 开始没有这样的功能。如果您希望实现它，请在[http://youtrack.jetbrains.com上记录您的请求](http://youtrack.jetbrains.com)

# c# - 我可以在单层或每个使用的层中注册所有 IoC 容器组件吗？

> ID：14511734
> 
> 赞同：2
> 
> 时间：2013-01-24T22:10:57.637
> 
> 标签：c#, inversion-of-control, unity-container

我正在使用 Unity IoC 框架，并`Bootstrapper.cs`在我的主机 MVC 层中有一个类来注册所有组件。然而，在我的架构中，我在 MVC 层下方有一个“服务”层，它也使用 DI，并且注入了存储库*接口*（MVC 层中不使用存储库接口 - 它具有注入其控制器的服务层接口） .

所以我的问题如下：我是否仍然可以在整个应用程序的 MVC/UI 层中将存储库接口注册到它的具体类型，或者我是否添加另一个对 Unity 的引用并`Bootstrapper.cs`在我的“服务”层中创建另一个类来定义接口*该特定*层使用的类型？

即使答案是*我可以*在 UI 层注册接口，我仍然想知道常见的做法。我*不*喜欢在 MVC/UI 层中注册该类型的事情是我必须添加对 Repository 层的引用才能进行注册，即使知道它没有在该层中使用。它用于服务层。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T07:46:14.907

每个应用程序都应该有自己的**Composition Root**，即您配置应用程序的地方（[有关详细信息，请参阅此答案](https://stackoverflow.com/a/1410738/274340)）。

这取决于上下文，但一般来说，如果您在层之间拆分容器配置，您将决定层的配置过于靠近层，您可能会失去总体视图。

例如，在您的一个业务逻辑层中，您正在注册一项服务：

```
container.RegisterType<ISercice1, MyImplementation1>(new PerThreadLifetime()) 
```

但是当在 Web 应用程序中使用该层时，您可以决定 PerSession 或 PerRequest 的生命周期会更好。这个决定应该只在一个地方而不是通过层传播。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T22:41:51.427

我把你的问题转过来了。

如果您在类库中添加对 Unity 的引用，您将向您正在使用的框架添加依赖项。这与你想要达到的目标完全相反。

您的类应该需要的唯一调整是支持构造函数或使用公共属性 - 在接口上。就是这样！

所以你的应用程序入口点应该做所有的“引导”。请注意，入口点可以是不同的应用程序以及不同的测试项目。他们可以有不同的配置和模拟场景。

如果您的 bootstrap.cs 变大，出于可读性原因，您可以将其拆分为更小的部分。但是我拒绝让班级知道他们正在被引导/moqed/注入的事实以及被什么。

考虑重复使用。您当前的库正在使用 Unity。它们可以在使用 StructureMap 的项目中使用。或者为什么不 Ninject。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-24T22:16:09.507

简而言之，是的，可以将配置保持在流程的顶部或本地化到每个模块。但是，必须为过程中的整个对象图解决所有依赖关系。

通过将配置保存在每个模块（程序集）中来本地化配置通常是一个好主意，因为您允许服务层对其自己的配置负责。恕我直言，我对[这个问题的回答是一个很好的做法。](https://stackoverflow.com/questions/10104821/is-it-possible-to-have-castle-windsor-resolve-property-dependancies-when-you-don/10105288#10105288)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-10T16:04:23.580

是的，应用程序在入口点应该有一个组合根。但是将类的注册保留在实现它们的层内可能是一个好习惯。然后从组合根的层中提取这些注册，逐层注册实现。这就是为什么：

1.  层内的注册可以在其他地方重新定义，例如在入口点。大多数 IoC 库的工作方式是稍后完成的注册会抹去之前完成的注册。因此，层内的注册只定义了一个可以轻松覆盖的默认行为。
2.  您不需要在所有项目\层中引用 IoC 库，即使您在这些层中定义了注册。一组非常简单的包装类将允许您从除入口点之外的任何地方抽象出 IoC 细节。
3.  当您的应用程序有多个入口点时，可重复使用的注册将极大地帮助防止重复相同的注册。这个复制\粘贴总是不好的。应用程序经常有几个入口点。例如，考虑跨平台应用程序的场景，它的每个目标平台都有一个单独的入口点。或在网站和后台进程中重用的业务逻辑。
4.  通过可重复使用的注册，您可以构建一个非常有效的测试系统。您将能够从测试中运行整个层，以自动化方式模拟整个层，并且非常有效地执行此操作，从而最大限度地减少编写测试的工作量。

请参阅[我的博客文章](http://www.blog.yumasoft.com/node/155)，通过工作示例更详细地说明这些要点。

# sql - 带有 2 个查询的 MySQL 触发器

> ID：14511738
> 
> 赞同：1
> 
> 时间：2013-01-24T22:11:17.760
> 
> 标签：sql, triggers, phpmyadmin

我想对某个表进行触发，以便当我将数据插入该表时，其他两个表会被更新。我正在尝试在 phpMyAdmin 的触发部分做这样的事情：

```
INSERT INTO db.tableOne (id, name, country) VALUES (NEW.id, NEW.name, NEW.country);

INSERT INTO db.tableTwo (id, colour, price) VALUES (NEW.id, NEW.colour, NEW.price); 
```

它给了我一个语法错误。

我尝试为该表上的同一操作创建 2 个不同的触发器，但它说我不能为同一操作创建 2 个触发器。任何帮助都深表感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T12:54:27.497

好的，解决了。对于任何有同样问题的人来说，实际上很容易：只需在“INSERT”语句之前放一个“BEGIN”语句，然后在“END”语句之后。

# github - 搞砸了我在 Github 上的 master 分支

> ID：14511741
> 
> 赞同：0
> 
> 时间：2013-01-24T22:11:22.230
> 
> 标签：github, github-for-mac

在为我的一个 github 项目做贡献时。我将更改提交到我的 repo 的 master 分支。我错误地从项目的回购中提取了数据。现在，当我从我的 repo 做 PR 时，它也包括这些更改。我不希望发生这种情况，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T22:13:54.120

只需重置您的本地主机并将其推回即可。

```
$ git checkout master
$ git reset <last_good_commit>
$ git push 
```

# java - 从处理接收字符串到arduino

> ID：14511743
> 
> 赞同：0
> 
> 时间：2013-01-24T22:11:32.893
> 
> 标签：java, arduino, processing

我想从处理中接收一个字符串到 arduino。我正在写一个字符串（基本上是一个字符串形式的单个数字数组，例如：<0213> 是一个数组：0 2 1 3）。我可以将其写入端口，但如何在 arduino 上接收它？以下代码将发送到 arduino。

```
int[] send={0,2,3,1};
myPort =new Serial(this,"/dev/ttyACM0", 9600);
String theStg = "<" + nf(send[0], 3) +
                   " " + nf(send[1], 3) +
                   " " + nf(send[2], 3) +
                   " " + nf(send[3], 3) +
                   ">";
myPort.write(theStg); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T22:45:00.440

如果您使用的是 char* 字符串，而不是 String 类，那么您可以使用[avrlibc 的 strtok()](http://www.nongnu.org/avr-libc/user-manual/group__avr__string.html#ga6ace85338eafe22a0ff52c00eb9779b8)命令。

之前已经解决了这个问题[（点击这里）](https://stackoverflow.com/questions/11915914/splitting-a-comma-delimited-string-of-integers-c-arduino)

这[是一个不错的函数](https://github.com/despild/SplitStringExample/blob/master/SplitStringExample.ino)，您可以简单地将其添加到代码中，以执行与 strtok() 等效的操作，但在 String 对象上。

# javascript - 访问 jquery find 内部的内部“this”

> ID：14511747
> 
> 赞同：0
> 
> 时间：2013-01-24T22:11:50.130
> 
> 标签：javascript, jquery, popover

基本上，我有一个拖放应用程序，并希望在放置到位时在某些元素上设置引导弹出框。这是我到目前为止设置的内容（之后我激活了.popover）：

```
 $(this).find(".simple-editable").attr({
                "rel":"popover",
                "data-html":"true",
                "data-content":"<div class='simple-edit-box'><form>" +
                    "<input type='text' placeholder='" + $(this).html() + "'>" +
                    "<button type='save' class='btn-success'>Save</button> </form></div>",
                "data-placement":"top"
            }) 
```

然而 $(this).html() 正在拉入整个 DIV（就像它应该的那样），但我想要的占位符只是那个特定的 .simple-editable 类中的内容。所以我的基本问题是，在使用 .find() 时，有没有办法访问 jquery 当前正在修改的变量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T22:14:05.803

```
var simpleEditable = $(this).find(".simple-editable");
simpleEditable.attr({
    "rel":"popover",
    "data-html":"true",
    "data-content":"<div class='simple-edit-box'><form>" +
    "<input type='text' placeholder='" + simpleEditable.html() + "'>" +
        "<button type='save' class='btn-success'>Save</button> </form></div>",
    "data-placement":"top"
}); 
```

* * *

更一般地说，在您想要在重新分配“this”关键字的范围内访问“this”的情况下，缓存对它的引用，如下所示：

```
var self = $(this);
self.find(".simple-editable").attr({
   // in here, self.find(".simple-editable") works 
   // whereas $(this).find(".simple-editable") will return an empty array
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T22:14:08.987

我不相信。您需要缓存 find 查询，然后应用该元素的`.html()`.

# exception - Sitecore.NET 6.4.1“/”应用程序中的服务器错误

> ID：14511748
> 
> 赞同：0
> 
> 时间：2013-01-24T22:11:51.207
> 
> 标签：exception, controls, system, sitecore, trace

每当我尝试使用 sitecore 内容管理系统以预览模式查看网页时，都会弹出此错误：

> 你调用的对象是空的。

描述：

> 当前 Web 请求执行期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详情：

> System.NullReferenceException：对象引用未设置为对象的实例。

源错误：

> 在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。

堆栈跟踪：

```
[NullReferenceException: Object reference not set to an instance of an object.]
NLC.Website.layouts.SubLayouts.Body_Header.Page_Load(Object sender, EventArgs e) in D:\src\tfs2010\Sitecore.ATS\Dev\1.0\NLC.Website\layouts\SubLayouts\PageStructure\Body-Header.ascx.cs:52

System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t, EventArgs e) +24
System.Web.UI.Control.LoadRecursive() +70
System.Web.UI.Control.LoadRecursive() +189
System.Web.UI.Control.LoadRecursive() +189
System.Web.UI.Control.LoadRecursive() +189
System.Web.UI.Control.LoadRecursive() +189
System.Web.UI.Control.LoadRecursive() +189
System.Web.UI.Control.LoadRecursive() +189
System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +3063 
```

我是使用这个程序的新手，目前正在试验它。我在编程方面的知识有限，但我愿意学习！所以，如果你有任何建议，我会全力以赴！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T22:28:01.033

检查第 52 行`NLC.Website\layouts\SubLayouts\PageStructure\Body-Header.ascx.cs`是否有一个为空的对象。在 Sitecore 站点中，这有时是一个不存在的项目。

`NullReferenceException`有关和调试它的更多信息，请参阅以下 SOF 问题。

[什么是 NullReferenceException，我该如何解决？](https://stackoverflow.com/questions/4660142/what-is-a-nullreferenceexception-in-net)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T14:01:57.927

您调用或设置值的任何对象都`NULL`在 Body-Header.ascx.cs 中（第 52 行）。

# c# - 对 IEnumerable 进行排序 by property and ordered array of those properties Given the following: public class Foo { /* other properties */ public Int32 Id { get; set; } } var listOfFoo = new[]{ new Foo { Id = 1 } 问问题 问问题 2013-01-24T22:11:53.983 6099 次 This question shows research effort; it is useful and clear 2 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. Given the following: public class Foo { /* other properties */ public Int32 Id { get; set; } } var listOfFoo = new[]{ new Foo { Id = 1 }, new Foo { Id = 2 }, new Foo { Id = 3 } }; var sortOrderIds = new[]{ 2, 3, 1 }; If I wanted to sort listOfFoo to have the Ids end up in the same order as presented in sortOrderIds, what's the best way? I assume I could sort using something like: Int32 SortUsingIdArrayAsReference(Foo x, Foo y) { // creative license on "IndexOf", bear with me return Int32.CompareTo(sortOrderids.IndexOf(x.Id), sortOrderIds.indexOf(y.Id)); } But is that really the best way to do this? I was hoping LINQ may have something better I could use, but if not oh well. Just looking for other input and see if anyone else has a better way. You can use List.IndexOf var ordered = listOfFoo.OrderBy(o => sortOrderIDs.IndexOf(o.Id)); Edit: Since sortOrderIDs is an array: var ordered = listOfFoo.OrderBy(o => Array.IndexOf(sortOrderIds, o.Id)); Or, if you want to use the same for lists and arrays, cast it to IList: var ordered = listOfFoo.OrderBy(o => ((IList)sortOrderIds).IndexOf(o.Id)); c#linqsorting 4 2 回答 2 This answer is useful 4 您可以使用List.IndexOf var ordered = listOfFoo.OrderBy(o => sortOrderIDs.IndexOf(o.Id)); 编辑：因为sortOrderIDs是一个数组： var ordered = listOfFoo.OrderBy(o => Array.IndexOf(sortOrderIds, o.Id)); 或者，如果您想对列表和数组使用相同的内容，请将其转换为IList： var ordered = listOfFoo.OrderBy(o => ((IList)sortOrderIds).IndexOf(o.Id)); 于 2013-01-24T22:13:45.503 回答 This answer is useful 3 You could use something like this: var ordered = listOfFoo.OrderBy(x => Array.IndexOf(sortOrderIds, x.Id)); This would sort them according to the order of the IDs in sortOrderIds. Foo objects whose IDs are not found will be at the very top of the resulting list. If you want them to be at the bottom, change the code like this: var ordered = listOfFoo.OrderBy(x => { var idx = Array.IndexOf(sortOrderIds, x.Id); return idx == -1 ? int.MaxValue : idx; }); 于 2013-01-24T22:14:11.203 回答 Related 2 vbulletin - 我的 vBulletin 用户如何知道他们有付费订阅 3 algorithm - 队列减少算法？ 2 javascript - ipad 上的 Javascript 加载缓慢 1 iphone - 对多个 NSURLConnection 响应进行故障排除 1 c# - 保存加密配置部分时防止 IIS 应用程序重新启动？ 1 mysql - 修改表列外键？ 2 unix - 为什么我的脚本需要永远运行？ 1 c++ - 将 boost lambda 与复合表达式一起使用 1 json - Web 服务不返回 json 数据 2 c - 两个功能起作用，但当我把它们放在一起时不起作用 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：14511749
> 
> 赞同：2
> 
> 时间：
> 
> 标签：c#, linq, sorting

Given the following:

```
public class Foo
{
  /* other properties */

  public Int32 Id { get; set; }
}

var listOfFoo = new[]{
  new Foo { Id = 1 },
  new Foo { Id = 2 },
  new Foo { Id = 3 }
};
var sortOrderIds = new[]{
  2, 3, 1
}; 
```

If I wanted to sort `listOfFoo` to have the `Id`s end up in the same order as presented in `sortOrderIds`, what's the best way? I assume I could sort using something like:

```
Int32 SortUsingIdArrayAsReference(Foo x, Foo y)
{
  // creative license on "IndexOf", bear with me
  return Int32.CompareTo(sortOrderids.IndexOf(x.Id), sortOrderIds.indexOf(y.Id));
} 
```

But is that really the best way to do this? I was hoping LINQ may have something better I could use, but if not oh well. Just looking for other input and see if anyone else has a better way.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T22:13:45.503

您可以使用[`List.IndexOf`](http://msdn.microsoft.com/en-us/library/bb352278.aspx)

```
var ordered = listOfFoo.OrderBy(o => sortOrderIDs.IndexOf(o.Id)); 
```

**编辑**：因为`sortOrderIDs`是一个数组：

```
var ordered = listOfFoo.OrderBy(o => Array.IndexOf(sortOrderIds, o.Id)); 
```

或者，如果您想对列表和数组使用相同的内容，请将其转换为`IList`：

```
var ordered = listOfFoo.OrderBy(o => ((IList)sortOrderIds).IndexOf(o.Id)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T22:14:11.203

You could use something like this:

```
var ordered = listOfFoo.OrderBy(x => Array.IndexOf(sortOrderIds, x.Id)); 
```

This would sort them according to the order of the IDs in `sortOrderIds`. `Foo` objects whose IDs are not found will be at the very top of the resulting list.

If you want them to be at the bottom, change the code like this:

```
var ordered = listOfFoo.OrderBy(x => 
                                {
                                    var idx = Array.IndexOf(sortOrderIds, x.Id);
                                    return idx == -1 ? int.MaxValue : idx;
                                }); 
```

# cmake - 定义全局包含的 CMake 函数？

> ID：14511751
> 
> 赞同：2
> 
> 时间：2013-01-24T22:11:57.530
> 
> 标签：cmake

我想定义一个可以在全局范围内与该函数一起使用的自定义`include`函数。是否有一些位置可以放置可以在全球范围内包含的其他 cmake 源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T14:38:34.203

您可以结合使用 [find_file](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#command%3afind_file)和 [CMAKE_MODULE_PATH](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#variable%3aCMAKE_MODULE_PATH)

```
find_file( common_file File.cmake path1 path2 path3 )
if( common_file STREQUAL "common_file-NOTFOUND" )
    message( FATAL_ERROR "Missing common cmake file" )
else()
    LIST(APPEND CMAKE_MODULE_PATH common_file )
endif() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T22:25:40.100

除了将其作为文件添加到 CMake 自己的安装目录（不推荐）之外，您还可以[`CMAKE_MODULE_PATH`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#variable%3aCMAKE_MODULE_PATH)在 CMakeLists.txt 的开头定义（或通过命令行使用`-D`）来提供要搜索 CMake 模块的目录的位置。

# python - pandas 3x3 scatter-matrix missing labels

> ID：14511752
> 
> 赞同：5
> 
> 时间：2013-01-24T22:12:04.517
> 
> 标签：python, matplotlib, pandas

I create a pandas scatter-matrix usng the following code:

```
import numpy as np
import pandas as pd

a = np.random.normal(1, 3, 100)
b = np.random.normal(3, 1, 100)
c = np.random.normal(2, 2, 100)

df = pd.DataFrame({'A':a,'B':b,'C':c})
pd.scatter_matrix(df, diagonal='kde') 
```

This result in the following scatter-matrix: ![enter image description here](../Images/7d4c4ef2ecc6e5cf751edaf1e30cd5a6.png)

The first row has no ytick labels, the 3th column no xtick labels, the 3th item 'C' is not labeled.

Any idea how to complete this plot with the missing labels ?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T23:09:21.387

Access the subplot in question and change its settings like so.

```
axes = pd.scatter_matrix(df, diagonal='kde')
ax = axes[2, 2] # your bottom-right subplot
ax.xaxis.set_visible(True)
draw() 
```

You can inspect how the scatter_matrix function goes about labeling at the link below. If you find yourself doing this over and over, consider copying the code into file and creating your own custom scatter_matrix function.

[https://github.com/pydata/pandas/blob/master/pandas/tools/plotting.py#L160](https://github.com/pydata/pandas/blob/master/pandas/tools/plotting.py#L160)

**Edit, in response to a rejected comment:**

The obvious extensions of this, doing `ax[0, 0].xaxis.set_visible(True)` and so forth, do not work. For some reason, scatter_matrix seems to set up ticks and labels for axes[2, 2] without making them visible, but it does not set up ticks and labels for the rest. If you decide that it is necessary to display ticks and labels on other subplots, you'll have to dig deeper into the code linked above.

Specifically, change the conditions on the if statements to:

```
if i == 0
if i == n-1
if j == 0
if j == n-1 
```

respectively. I haven't tested that, but I think it will do the trick.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-25T00:35:02.743

Since I can't reply above, the non-changing source code version for anybody googling is:

```
n = len(features)

for x in range(n):
    for y in range(n):
        sax = axes[x, y]
        if ((x%2)==0) and (y==0):
            if not sax.get_ylabel():
                sax.set_ylabel(features[-1])       
            sax.yaxis.set_visible(True)

        if (x==(n-1)) and ((y%2)==0):
            sax.xaxis.set_visible(True)

        if ((x%2)==1) and (y==(n-1)):
            if not sax.get_ylabel():
                sax.set_ylabel(features[-1])       
            sax.yaxis.set_visible(True)

        if (x==0) and ((y%2)==1):
            sax.xaxis.set_visible(True) 
```

features is the list of column names

# iphone - iphone震动

> ID：14511754
> 
> 赞同：0
> 
> 时间：2013-01-24T22:12:06.460
> 
> 标签：iphone, sdk, iphone-vibrate

有没有办法减少iphone在打电话时的振动时间

```
AudioServicesPlaySystemSound (kSystemSoundID_Vibrate); 
```

当时是 2 秒，我需要它是 0.5 秒。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T22:34:30.500

不幸的是，使用官方 SDK 无法自定义振动。

对于 iOS 6 私有 API，请参阅此答案：[https ://stackoverflow.com/a/13047464/983912](https://stackoverflow.com/a/13047464/983912)

# ember.js - EmberJS 路由器和嵌套视图

> ID：14511757
> 
> 赞同：1
> 
> 时间：2013-01-24T22:12:21.373
> 
> 标签：ember.js

我正在构建一个包含几层子视图的应用程序，我对如何构建我的路由器感到困惑。我对所有被自动替换到最上面的 {{outlet}} 的平面视图很好，但现在我的子视图将拥有自己的子视图。

是否有新的（pre4）EmberJS 路由器处理子视图树的示例？[路由器指南](http://emberjs.com/guides/routing/defining-your-routes/)介绍了“资源”的概念，但我不知道那是什么，我不知道它是否对我有帮助。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T23:45:05.233

这是一个关于如何在 Ember 中使用资源方法的示例。这个想法是将逻辑上适合的路由组合在一起。如果你想描述一个交互，比如说产品，你想列出、创建、编辑和删除产品。那么你的路线应该被定义为

```
APP.Router.map(function(match) {
  this.resource("products", function(){
    this.route('new');
    this.route('edit',{path:'/edit/:id'});
    this.route('delete',{path:'/delete/:id'});
  });  
}); 
```

然后您可以通过以下 url 与相关视图进行交互

```
/#/products
/#/products/new
/#/products/edit/1
/#/products/delete/1 
```

在某种程度上，这将帮助您根据状态和子状态来描述您的应用程序。

# c# - 在 Exchange 中添加替代文本视图

> ID：14511759
> 
> 赞同：2
> 
> 时间：2013-01-24T22:12:21.847
> 
> 标签：c#, exchange-server, exchange-server-2007

我正在使用`ExchangeService`和`EmailMessage`类来发送电子邮件。

有没有办法让我向 EmailMessage 对象添加替代文本视图？如果是这样，显示如何做到这一点的代码片段会很棒。

我知道`System.Net.Mail.MailMessage`上课是可能的。

谢谢您的帮助。

# mysql - 需要 MySQL 解决方法来将变量 \ 参数传递到视图中吗？

> ID：14511760
> 
> 赞同：3
> 
> 时间：2013-01-24T22:12:28.147
> 
> 标签：mysql, view, sql-view

我想将变量\参数传递到视图中以按日期范围进行过滤。由于我在视图中进行分组，因此无法将 where 子句放在视图外部。

我已经阅读了很多关于这个的帖子，但还没有让它工作。我见过的将参数传递到视图中的大多数解决方法都涉及使用函数来返回值，这就是我卡住的地方。

```
/* My current view that I want to pass in start and end dates */
CREATE VIEW Total_Sales_By_Product_Num AS
SELECT products_all_fields.*,
    Sum(<a bunch of code removed for this sample>) AS Item_Qty_Requested_Total, 
    Sum(<a bunch of code removed for this sample>) AS Item_Qty_Accepted_Total,  
    Sum(<a bunch of code removed for this sample>) AS Total_Sales_Dollars
FROM products_all_fields
    LEFT OUTER JOIN (web_orders_items
        INNER JOIN web_orders_header
            ON  web_orders_items.Web_Order_Num = web_orders_header.Web_Order_Num )
        ON  products_all_fields.Product_Num = web_orders_items.Product_Num
WHERE web_orders_header.Order_Date BETWEEN fn_GetStartDate() AND fn_GetEndDate()
GROUP BY products_all_fields.Product_Num
ORDER BY products_all_fields.Description 
```

将参数返回给视图的函数：

```
CREATE FUNCTION fn_GetStartDate ()
    RETURNS DATE
    DETERMINISTIC NO SQL
BEGIN
    RETURN @StartDate;
END

CREATE FUNCTION fn_GetEndDate ()
    RETURNS DATE
    DETERMINISTIC NO SQL
BEGIN
    RETURN @EndDate;
END 
```

这不起作用，它不返回任何数据，我知道我在做一些愚蠢的事情

```
set @fn_StartDate := '2012-01-01';
set @fn_EndDate := '2012-02-01';
select * from Total_Sales_By_Product_Num 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T22:23:03.947

啊啊啊！！！我得到了它的工作，我觉得自己像个白痴，但是在我的一个日期作业中我使用了双引号而不是单引号。它现在似乎起作用了。我会将这篇文章留给未来寻找如何做到这一点的人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-07-17T13:28:17.170

它应该如下工作：

```
set @StartDate := '2012-01-01';
set @EndDate := '2012-02-01';
select * from Total_Sales_By_Product_Num; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T22:18:25.990

你需要

```
SET @fn_StartDate = fn_GetStartDate('2012-01-01') 
```

与@fn_EndDate 相同

然后在你看来

```
WHERE web_orders_header.Order_Date BETWEEN @fn_StartDate..... 
```

但是，这只是如何调用函数的语法。据我所知，您仍在尝试将参数传递给视图，这是不可能的。尝试将所有视图逻辑放在函数中。

# intuit-partner-platform - C# 版本的 HelloIntuitAnywhere 演示 - 有人知道要使用的 Intuit 应用程序 URL 吗？

> ID：14511764
> 
> 赞同：2
> 
> 时间：2013-01-24T22:12:39.733
> 
> 标签：intuit-partner-platform

QuickBooks 集成的全新功能，大家好。

遵循 Hello World（intuit_anywhere 演示应用程序）的 java 分步说明，因为似乎没有 .Net 版本的文档。

它告诉您要做的第二件事是转到“我的开发中心”并创建一个应用程序。它说使用以下值；

*   应用名称：HelloWorldIA
*   主机名域：您的 Web 服务器的主机和域
*   应用网址：http:///HelloWorldIA
*   **断开**URL：http:///HelloWorldIA/disconnect.jsp
***   管理用户 URL：http: **///HelloWorldIA/manageusers.jsp***   OpenID URL：http:///HelloWorldIA/ **LoginInitServlet******

 **问题是最后三个中使用的页面在 C# 版本中不存在，我不知道要输入什么。

有没有人做过 C# 版本并且知道这些值？

非常感谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T22:25:19.810

```
Disconnect URL: http://HelloWorldIA/Disconnect.aspx
Manage Users URL: http://HelloWorldIA <- Not used
OpenID URL: http://HelloWorldIA/DirectConnectToIntuit.aspx 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T02:23:46.150

如果您使用的是 ASP.Net MVC 示例应用程序，您可以使用：

```
Open ID Url: http://HelloWorldIA/OpenId 
```

当使用网页上的“通过 Intuit 登录”按钮时，这将使流程正常工作。**

# android - 带有 RSA/ECC 的 NFC 卡/标签

> ID：14511765
> 
> 赞同：2
> 
> 时间：2013-01-24T22:12:40.647
> 
> 标签：android, nfc, smartcard, mifare

我正在寻找一种能够与 Android 设备通信并执行以下操作的 NFC 标签/卡类型（型号）：

1.  接收数据信息
2.  使用存储在卡上的密钥对其进行签名或加密
3.  将签名/加密的数据发送回设备。
4.  此外，卡应该能够通过请求返回打开密钥

是否有任何 NXP 或其他芯片能够完成这项任务？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-04-05T15:27:32.187

NXP 芯片 J3A041、J3A081、J3D081 等可能符合您的要求。以及其他厂商的芯片，如 AT90SC20818RCFV、SLE77CLFX2400PM、S3CT9KA、SA23YR18、M7794 等。

你会为此开发自己的操作系统吗？使用 JCOP、CONVEGO Join、JK2​​1 等解决方案来使用 Java Card 进行卡端开发看起来更实用。

如果您只想将精力集中在 Android 方面 - 像[NFCCipher](http://nfccipher.com)这样的现成标签可能适合您。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T17:42:40.133

搭载非对称协处理器的 NXP SmartMX 系列芯片应该能够做到这一点。如果您想设计自己的协议，那么 Java Card 解决方案（如 NXP 上的 JCOP）应该可以解决问题。签名生成通常在高端处理器型号上可用，但它们之间应该有很多选择。

# java - 链表 toString()

> ID：14511767
> 
> 赞同：1
> 
> 时间：2013-01-24T22:12:48.450
> 
> 标签：java, linked-list, subclass

我已经实现了一个将集合存储在`Linkedlist`. 例如，当我打印出链接列表时，我会得到`[1,2,3,4,5]`.

我想要的是将方括号更改为大括号，例如 '{' & '}'

我不能使用字符串操作，所以我必须重写该`toString`方法。

除了我知道我必须创建一个子类之外，我对如何做到这一点一无所知。让我困惑的是方法本身。

```
public class outputSets
    {    
        @SuppressWarnings({ "unchecked", "rawtypes", "unused" })
        public static void main(String args[]) 
        {    
        LinkedList x0 = new LinkedList();
        LinkedList x1 = new LinkedList();
        LinkedList x2 = new LinkedList();
        LinkedList x3 = new LinkedList();
        LinkedList x4 = new LinkedList();
        LinkedList x5 = new LinkedList();
        LinkedList x6 = new LinkedList();

        x0.add(new Integer(8));

        for(int i=1; i<8; i++)
        {
            x1.add(new Integer(i));
        }

        x1.add((x0.getFirst()));

        x2.addAll(x1);
        x2.add(new Pair(1, x1));

        x3.add(new Pair(x2,x1));

        //x4.addAll(tree.union(x3, x2));

        //x5.add(tree.difference(x4, x1));

        //x6.add(tree.intersection(x4, x1));
        /*
        Iterator i0 = x0.listIterator();
        Iterator i1 = x0.listIterator();
        Iterator i2 = x0.listIterator();
        Iterator i3 = x0.listIterator();
        Iterator i4 = x0.listIterator();
        Iterator i5 = x0.listIterator();
        Iterator i6 = x0.listIterator();
        */

        System.out.print(x0.getFirst());
        System.out.println();
        SetArray(x1);
        System.out.println();
        SetArray(x2);

        System.out.println();
        System.out.println();
      }

    @SuppressWarnings("rawtypes")
    private static void SetArray(LinkedList x0)
    {
        for(int index=0; index < x0.size() ; index++)
        {
            if (index == 0)
            {
                System.out.print(x0.get(index));
            }
            else
            {
                System.out.print(", " +
                        "" + x0.get(index));
            }
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T22:20:08.550

您还可以创建一个辅助方法，该方法将`List`对象作为属性并返回`String`此列表的串联内容。这样继承是多余的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T22:18:15.380

输出完全取决于[`AbstractCollection.toString()`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/AbstractCollection.java#AbstractCollection.toString%28%29)- which `LinkedList`（以及除地图之外的大多数其他集合）继承的实现。这个实现看起来像这样（稍微简化）：

```
public String toString() {
    Iterator<E> it = iterator();
    if (! it.hasNext())
        return "[]";

    StringBuilder sb = new StringBuilder();
    sb.append('[');
    for (;;) {
        E e = it.next();
        sb.append(e);
        if (! it.hasNext())
            return sb.append(']').toString();
        sb.append(", ");
    }
} 
```

以此为指导，您应该非常简单地创建自己的不包含方括号的实现。您可以创建自己的覆盖集合，`toString()`也可以使用单独的实用程序方法将您`LinkedList input`作为参数（在这种情况下显然替换`iterator()`为`input.iterator()`）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T22:15:54.597

创建一个`extends LinkedList`包含如下方法的类：

```
@Override
public String toString() {

} 
```

该方法可以像这样访问列表项：

```
Iterator<Integer> it = this.iterator();

while(it.hasNext()) {
    Integer nextItem = it.next();
} 
```

# c# - FlickrNet API - 从 PhotosSearch 获取集合名称

> ID：14511768
> 
> 赞同：4
> 
> 时间：2013-01-24T22:12:49.313
> 
> 标签：c#, asp.net, repeater, flickr

我正在使用 FlickrNet c# 库，该库迄今为止被证明是一个巨大的成功。

但是，我有一个问题。我可以获取用户 ID 的所有照片，但如果不进行另一个 api 调用，我无法获取特定照片所属的集合名称。这个单独的电话给我带来了巨大的性能问题。主页需要 30 秒才能加载 40 张图片。这只会增加。

当我使用同位素显示图像时，我需要为每张照片设置名称。

我只是从 api 抓取图像并将它们绑定到中继器。

这是我的代码。

C＃

```
Flickr f = FlickrManager.GetAuthInstance();
    protected void Page_Load(object sender, EventArgs e)
    {
        string userID = f.PeopleFindByEmail("me@yahoo.com").UserId;

        PhotoSearchOptions options = new PhotoSearchOptions
                                         {
                                             UserId = userID,
                                             Extras = PhotoSearchExtras.AllUrls | PhotoSearchExtras.Description | PhotoSearchExtras.Tags,
                                             SortOrder = PhotoSearchSortOrder.Relevance,
                                         };

        var photos = f.PhotosSearch(options);

        rptPhotos.DataSource = photos;
        rptPhotos.DataBind();
    }

    protected string GetSetNameForImageID(string imageID)
    {
        var sets = f.PhotosGetAllContexts(imageID).Sets;
        return sets[0].Title.ToLower().Replace(" ", "-");            
    } 
```

HTML

```
<asp:Repeater runat="server" ID="rptPhotos">
    <ItemTemplate>
        <section class="<%# GetSetNameForImageID( Convert.ToString( Eval("PhotoID") ) ) %> item">
        <%--<a href="@Url.Action("Image", "Home", new {id = item.PhotoId})">--%>
        <a href="/View.aspx?pid=<%# DataBinder.Eval(Container.DataItem, "PhotoID") %>">
            <div>
                <div class="item_hover">
                    <header>         
                        <span>D</span>
                        <%--<p title="@item.Description" class="tiptip">_</p>  --%>
                        <p title="<%# DataBinder.Eval(Container.DataItem, "Description") %>" class="tiptip">_</p>  
                        <hgroup>
                            <%--<h2>@item.Title</h2>
                            <h3>@item.Tags[0]</h3>--%>

                            <h2><%# DataBinder.Eval(Container.DataItem, "Title") %></h2>
                            <h3><%# DataBinder.Eval(Container.DataItem, "Tags[0]") %></h3>
                        </hgroup>
                    </header>
                </div>
                <%--<img src="@item.Small320Url" alt="Video sit amet consectetur" />--%>
                <img src="<%# DataBinder.Eval(Container.DataItem, "Small320Url") %>" alt="Video sit amet consectetur" />
            </div>
        </a>
    </section>
    </ItemTemplate>
</asp:Repeater> 
```

在没有 GetSetNameForImageID 和后续 api 调用的情况下，是否有更快的方法来获取每个图像的集合名称？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T09:10:52.307

我注意到的一件事`PhotosGetAllContexts`是`Sets`您正在使用的属性是`ContextSet`对象的集合，这些对象又存储 a`PhotoSetId`和 a `Title`。

将[PhotosetsGetList](http://www.flickr.com/services/api/flickr.photosets.getList.html)和[PhotosetsGetPhotos](http://www.flickr.com/services/api/flickr.photosets.getPhotos.html)方法结合起来怎么样？我认为您可以使用这两个来避免您当前使用该`PhotosGetAllContexts`方法遇到的开销。

免责声明：未经测试的代码。

```
var photoSets = f.PhotosetsGetList(userId);
Dictionary<string, List<Photo>> photoSetPhotoMap = new Dictionary<string, List<Photo>>();

foreach (var photoSet in photoSets)
{
    var photoSetPhotos = f.PhotosetsGetPhotos(photoSet.PhotosetId,
        PhotoSearchExtras.AllUrls | PhotoSearchExtras.Description | PhotoSearchExtras.Tags);

    photoSetPhotoMap.Add(photoSet.PhotosetId, photoSetPhotos.ToList());
}

var photos =
    from kvp in photoSetPhotoMap
    from photo in kvp.Value
    select new
    {
        SetTitle = kvp.Key, PhotoId = photo.PhotoId, Description = photo.Description,
        PhotoTitle = photo.Title, Tags = photo.Tags[0], Small320Url = photo.Small320Url
    };

rptPhotos.DataSource = photos;
rptPhotos.DataBind(); 
```

我认为这种方法的主要困难是有效地实现分页 - 根据照片集的大小（您可以通过`NumberOfPhotos`属性确定），您可能会遇到页面在照片集中途中断的情况。

为了解决这个问题，我建议使用该`NumberOfPhotos`属性来计算照片的总数，然后使用您的页面大小乘以页码来计算出`PhotoSets`满足请求所需的数量和数量。

# .net-4.5 - 与 UserNameWSTrustBinding 等效的 .NET 4.5 是什么？

> ID：14511769
> 
> 赞同：16
> 
> 时间：2013-01-24T22:12:53.497
> 
> 标签：.net-4.5, wif

我正在将活动配置文件 STS 转换为新的 .NET 4.5 System.IdentityModel 框架。我的代码使用了新框架中似乎不存在的 UserNameWSTrustBinding。有什么建议么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-06-27T11:51:13.660

虽然这是一个老问题，但我在互联网上找不到任何非第三方的答案，所以这里是：

要在 .NET 4.5 中替换`UserNameWSTrustBinding`，请使用以下命令：

```
var binding = new WS2007HttpBinding(SecurityMode.{what it was before});
binding.Security.Message.ClientCredentialType = MessageCredentialType.UserName; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T22:43:16.517

我将 WCF 绑定移植到 thinktecture 身份模型：

[https://github.com/thinktecture/Thinktecture.IdentityModel.45](https://github.com/thinktecture/Thinktecture.IdentityModel.45)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-09T18:20:32.380

我也很难为 .NET 4.5 找到不是第三方库的东西。但是我遇到了[这个链接](http://www.fancy-development.net/wstrust-bindings-for-adfs-2-0-in-net-4-5)，你可以在你的项目中包含代码。

# c++ - 在 Ubuntu 上启动 C++ CORBA 服务器时出现问题，CORBA::SystemException

> ID：14511770
> 
> 赞同：1
> 
> 时间：2013-01-24T22:13:02.413
> 
> 标签：c++, ubuntu, ubuntu-12.04, corba

我正在尝试在 Ubuntu 12.04 上运行 C++ 中的 CORBA 示例： [http ://www.yolinux.com/TUTORIALS/CORBA.html](http://www.yolinux.com/TUTORIALS/CORBA.html)

当我尝试运行时仍然出现错误：

```
 $ ./Server
'IOR:010000001600000049444c3a446174612f53657276696365413a312e3000000001000000000000006800000001010200100000003139322e3136382e3135392e31323900b1aa00000e000000fe4ba4015100001a19000000000000000200000000000000080000000100000000545441010000001c00000001000000010001000100000001000105090101000100000009010100'
Caught CORBA::SystemException. 
```

在启动服务器之前，我生成了一个日志文件：

```
omniNames -start 2812 -logdir ~/Desktop -errlog ~/Desktop/omniNamesError.txt 
```

这给了我一个文件 ~/Desktop/omniNamesError.txt 如下：

```
Thu Jan 24 22:54:34 2013:

Starting omniNames for the first time.
Wrote initial log file.
Read log file successfully.
Root context is IOR:010000002b00000049444c3a6f6d672e6f72672f436f734e616d696e672f4e616d696e67436f6e746578744578743a312e30000001000000000000007400000001010200100000003139322e3136382e3135392e31333000fd0a00000b0000004e616d6553657276696365000300000000000000080000000100000000545441010000001c0000000100000001000100010000000100010509010100010000000901010003545441080000009aad015101004982
Checkpointing Phase 1: Prepare.
Checkpointing Phase 2: Commit.
Checkpointing completed. 
```

接下来我在文件中添加：

```
/etc/omniORB.cfg 
```

生成文件中的行：

```
InitRef = NameService=IOR:000100010000000100010509010100010000000901010003545\
441080000005ea5015101002002010000002b00000049444c3a6f6d672e6f72672f436f734e61\
6d696e672f4e616d696e67436f6e746578744578743a312e30000001000000000000007400000\
001010200100000003139322e3136382e3135392e31333000fd0a00000b0000004e616d655365\
7276696365000300000000000000080000000100000000545441010000001c000000010000000\
1000100010000000100010509010100010000000901010003545441080000009aad0151010049\
82 
```

我还设置了环境变量：

```
$ export OMNIORB_CONFIG=/etc/omniORB.cfg 
```

教程中编写的所有内容，编译的文件（经过 2 次修改：我在 CRequestServiceA.cpp添加了： *#include并将**$(CC) $(CPPFLAGS) $(INCLUDES) DataSK.cc 更改*为*$(CC) $(CPPFLAGS ) $(INCLUDES) DataSK.cc && mv DataSK.o Data.o* in MakeServer）但我仍然有一个错误，正如我所说的。

**请帮我解决这个问题，我从许多 CORBA C++ 教程中学习，但没有任何效果**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T03:29:29.280

配置文件中的那些反斜杠可能会导致问题。为避免将冗长的 IOR（会更改）粘贴到您的配置文件中出现问题，请尝试`InitRef`在您的配置文件中设置如下（假设您在与测试程序相同的机器上运行名称服务）。

```
InitRef = NameService=corbaname::localhost 
```

或者您可以尝试将 IOR 粘贴为一行（不要打破行或添加反斜杠）。

或者你可以像这样运行你的服务器：

```
$ ./Server -ORBInitRef NameService=corbaname::localhost 
```

或者

```
$ ./Server -ORBInitRef NameService=IOR:010000002b00000049444c3a6f6d672e6f72672f436f734e616d696e672f4e616d696e67436f6e746578744578743a312e30000001000000000000007400000001010200100000003139322e3136382e3135392e31333000fd0a00000b0000004e616d6553657276696365000300000000000000080000000100000000545441010000001c0000000100000001000100010000000100010509010100010000000901010003545441080000009aad015101004982 
```

如果您确实使用了 IOR 字符串，请意识到每次运行命名服务时它几乎肯定会发生变化，因此请确保您使用的是最新的。

请参阅[omniORB 文档](http://omniorb.sourceforge.net/omni41/omniORB/)以获取更多信息。

**看到您的评论后编辑：**

该教程可能已过时且已过时。尝试更改此行：

```
CORBA::Object_var obj1=orb->resolve_initial_references("OmniNameService"); 
```

对此

```
CORBA::Object_var obj1=orb->resolve_initial_references("NameService"); 
```

您可能还希望完成[omniORB 文档](http://omniorb.sourceforge.net/omni41/omniORB/omniORB002.html)中的Echo 示例。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-03-29T21:20:31.207

我想我解决了这个问题：我更改`OmniNameService`为`NameService`, 并在我的 omniORB.cfg 文件中添加：

```
InitRef = NameService=IOR:00010.... 
```

（IOR 名称来自 omniNamesError.txt），然后像这样运行服务器：

```
./Server corbaloc:rir:/NameService 
```

# c# - 协调主/详细数据网格视图

> ID：14511773
> 
> 赞同：0
> 
> 时间：2013-01-24T22:13:17.413
> 
> 标签：c#, winforms, datagridview, master-detail

我在 WinForms 中有一对 Master/Detail Datagridviews，显示来自以下类设计的信息：

```
public class Roads
{
   private List<CrossStreets> _crossStreets = new List<CrossStreets>();
   public string RoadName { get; set; }
   public List<CrossStreet> CrossStreets { get { return _crossStreets;} }        
}

public class CrossStreet
{
   public string CrossStreetName { get; set;}
} 
```

我的实现允许我插入、更新和删除记录，而 BindingSource() 的魔力似乎可以让我的数据关系在幕后保持同步。我遇到的一个困难是当用户单击详细信息视图中的记录，将其保持选中状态，然后单击主视图中不是父记录的记录时。此时，程序会抛出 System.IndexOutOfRangeException，因为它似乎正在尝试将子记录的当前索引应用于新的父记录。

我认为在诸如 RowValidating 之类的事件中我可以做些什么来捕捉这个，但我不确定是什么。目前，我只是对新行和数据验证进行基本检查，如下所示：

```
 private void dataGridSegmentConfig_RowValidating(object sender, DataGridViewCellCancelEventArgs e)
        {

            if (dataGridViewSegmentConfig.Rows[e.RowIndex].IsNewRow)
            {
                return;
            }

//data validation logic here.
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T17:42:53.867

datagridview 正在尝试根据选定的父行设置子行的索引。如果父行中的记录少于子行的选定索引，则抛出 IndexOutOfRangeException。为了解决这个问题，如果父行发生更改，我确保将子单元格设置为 null。

```
 private void dataGridRouteConfig_RowStateChanged(object sender, DataGridViewRowStateChangedEventArgs e)
        {
            //fix for clicking the detail and then clicking a different parent.
            dataGridViewSegmentConfig.CurrentCell = null;

        } 
```

# php - PHP 未定义索引/我如何“定义”html 数组

> ID：14511776
> 
> 赞同：-2
> 
> 时间：2013-01-24T22:13:36.840
> 
> 标签：php, arrays, forms

嗨，关于 PHP 的快速问题，我仍在学习为什么下面代码中的 $html[$firstname] 在服务器错误日志中作为未定义索引出现............快速回答会很棒......

嗨，为了清楚起见，这是所有代码，让我知道 PDO 的代码是否足够好并且不需要转义，我猜在我从数据库中输出数据之前不需要 html 实体通过php到浏览器。

```
<?php

$firstname = "";
$lastname = "";
$username = "";
$email = "";
$password = "";
$confirm_password = "";
$_POST['firstname'] = $firstname;
$_POST['lastname'] = $lastname;
$_POST['username'] = $username;
$_POST['email'] = $email;
$_POST['password'] = $password;
$_POST['confirm_password'] = $confirm_password;
$clean =  array();
if(ctype_alnum($firstname)){
  $clean[$firstname] = $firstname;
};
if(ctype_alnum($lastname)){
  $clean[$lastname] = $lastname;
};
if(ctype_alnum($username)){
  $clean[$username] = $username;
};

if(isset($email)){
  filter_var($email, FILTER_SANITIZE_EMAIL);
};
//initialize an array for escaped data
$html = array();
//escape the filtered data
$html[$firstname] = htmlentities($clean[$firstname], ENT_QUOTES, 'UTF-8');
$html[$lastname] = htmlentities($clean[$lastname], ENT_QUOTES, 'UTF-8');
$html[$username] = htmlentities($clean[$username], ENT_QUOTES, 'UTF-8');
$html[$email] = htmlentities($email, ENT_QUOTES, 'UTF-8');
$html[$password] = htmlentities($password, ENT_QUOTES, 'UTF-8');
$html[$confirm_password] = htmlentities($confirm_password, ENT_QUOTES, 'UTF-8');
//
//write function to generate random salt for every password, + bcrypt allpasswords, then store in db

$salt = substr(str_replace('+', '.', base64_encode(pack('N4', mt_rand(),  mt_rand(), mt_rand(), mt_rand()))), 0, 22);
$hash = crypt($html[$password], '$2a$10$'.$salt.'$');

$currentPassword = '$2a$15$Ku2hb./9aA71tPo/E015h.LsNjXrZe8pyRwXOCpSnGb0nPZuxeZP2';
$checkPassword = $password;
if(crypt($checkPassword, $currentPassword) === $currentPassword){
    echo 'You are in!';
}else{
    echo 'You entered the wrong password';
}

// store everything in the database execute prepare, then send back the email verification, do not send
//new password to email, and don't send forgotten password to email, just get them to remember it and click the link'
//connect to the database
$user = "*****";
$dbpassword = "****";
$db = new PDO('mysql:host=localhost;dbname=_virtualpiersclose', $user, $dbpassword);
$statement = $db->prepare("INSERT INTO users (firstname, lastname, username, email, password)
    VALUES (:firstname, :lastname, :username, :email, :password)");
$statement->bindParam(':firstname', $html[$firstname]);
$statement->bindParam(':lastname', $html[$lastname]);
$statement->bindParam(':username', $html[$username]);
$statement->bindParam(':email', $html[$email]);
$statement->bindParam(':password',$html[$password]);

$statement->execute();

$db = NULL;

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T22:16:37.703

我想你想要的是：

```
$html['firstname'] 
```

话虽如此，您的代码有点疯狂，没有多大意义。以下是一些访问模式：

```
$ar = array(
    'firstname' => 'Joe',
    'hello' => 'Hi there!'
);

$n = 'firstname';  // assign the string 'firstname' to $n
$x = $ar['firstname'];  // $x becomes 'Joe'
$x = $ar[$n]; // also $x becomes 'Joe', because $n is 'firstname'
$x = $ar[$firstname]; // doesn't return anything, because the variable $firstname is not assigned.  Will trigger a warning, too.
$firstname = 'hello'; // assign 'hello' to $firstname
$x = $ar[$firstname]; // $x becomes 'Hi there!'
$ar['hello'] = 'Good Bye.'; // Change $ar['hello']
$ar[$firstname] = 'So long!'; // Also changes $ar['hello'] 
```

你也有你的赋值语句倒退。等号左侧的变量接收来自右侧的值。我认为您希望将 的内容`$_POST['firstname']`保存在变量中`$firstname`。这里有几行可能需要修复：

```
$firstname = $_POST['firstname'];
$lastname = $_POST['lastname'];
// ... etc ...
if(ctype_alnum($firstname)){
    $clean['firstname'] = $firstname;
}; 
```

# javascript - Chrome 扩展 iFrame 之外的所有操作

> ID：14511779
> 
> 赞同：-1
> 
> 时间：2013-01-24T22:13:53.963
> 
> 标签：javascript, html, ajax, google-chrome, google-chrome-extension

我正在制作 chrome 扩展程序，并且正在使用`iFrame`. 但是，我希望来自它的所有操作（例如，用户单击链接，搜索是否有搜索框）在没有 iFrame 的情况下进行（离开 iFrame 并正常加载其他页面）。

其他

如果我不使用任何 iFrame 而是使用 div 或其他东西来在其上加载网页，则可能会出现这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T22:19:49.490

您可以使用带有值的 Javascript`top.location=<url>`来突破 iframe 并将其加载到 URL 栏中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T22:20:42.133

您应该能够将 iframe 域的权限添加到扩展程序的清单中，并为该域实现内容脚本。

使用 Google API 进行消息传递，在两个域的内容脚本之间传递信息（因为普通页面的同源策略不允许这样做）

[在此处](http://developer.chrome.com/extensions/messaging.html)查看消息传递文档

# c# - 如何将数据表导出到excel 2002？

> ID：14511783
> 
> 赞同：0
> 
> 时间：2013-01-24T22:13:55.260
> 
> 标签：c#, visual-studio-2010, export-to-excel

我编写的代码可以正常工作。该代码涉及将图像和文本传输到 excel 单元格，并且在她得到错误的一台客户端计算机上工作正常：

```
System.IO.FileNotFoundException: Could not load file or assembly 'Microsoft.Office.Interop.Excel, Version=12.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c' or one of its dependencies. The system cannot find the file specified.
File name: 'Microsoft.Office.Interop.Excel, Version=12.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c' 
```

将数据表导出到 Excel 的代码：

```
 string ImageFolderPath = Path.GetDirectoryName(System.Windows.Forms.Application.ExecutablePath) + "\\Images\\";

        SaveFileDialog saveFileDialog1=new SaveFileDialog();
        saveFileDialog1.Filter = "Excel (*.xls)|*.xls";
       // saveFileDialog1.Title = "Select Empty Excel Sheet";
        if (saveFileDialog1.ShowDialog() == DialogResult.OK)
        {
            if (!saveFileDialog1.FileName.Equals(String.Empty))
            {
                FileInfo f = new FileInfo(saveFileDialog1.FileName);
                if (f.Extension.Equals(".xls") || f.Extension.Equals(".xlsx"))
                {
                    Microsoft.Office.Interop.Excel.Application xlApp;
                    Microsoft.Office.Interop.Excel.Workbook xlWorkBook;
                    Microsoft.Office.Interop.Excel.Worksheet xlWorkSheet;
                    object misValue = System.Reflection.Missing.Value;

                    xlApp = new Microsoft.Office.Interop.Excel.ApplicationClass();
                    xlWorkBook = xlApp.Workbooks.Add(misValue);
                    xlWorkSheet = (Microsoft.Office.Interop.Excel.Worksheet)xlWorkBook.Worksheets.get_Item(1);
                    int i = 0;
                    int j = 0;

                    xlWorkSheet.Cells[3, 1] = "SKU";
                    xlWorkSheet.Cells[3, 2] = "EAN IPC";
                    xlWorkSheet.Cells[3, 3] = "ASIN";
                    xlWorkSheet.Cells[3, 4] = "CONDITION";
                    xlWorkSheet.Cells[3, 5] = "PRICE";
                    xlWorkSheet.Cells[3, 6] = "PRODUCT TITLE";
                    xlWorkSheet.Cells[3, 7] = "STATUS";
                    xlWorkSheet.Cells[3, 8] = "PRODUCT IMAGE";
                    xlWorkSheet.Cells[3, 9] = "PRODUCT URL";
                    xlWorkSheet.Cells[3, 10] = "IMAGE NAME";

                    xlWorkSheet.Cells[2, 1] = "Accept Value :";
                    xlWorkSheet.Cells[2, 2] = textBox1.Text;

                    xlWorkSheet.Cells[2, 4] = "Location :";
                    xlWorkSheet.Cells[2, 5] = "Amazon.co.uk";

                    for (i = 0; i <= resultSheet.Rows.Count - 1; i++)
                    {
                        for (j = 0; j <= resultSheet.Columns.Count - 1; j++)
                        {

                            if (j == 7)
                            {
                                string imagString = Path.GetDirectoryName(System.Windows.Forms.Application.ExecutablePath) + "\\Images\\";
                                imagString = imagString + resultSheet.Rows[i][j+2].ToString();
                                Microsoft.Office.Interop.Excel.Range oRange = (Microsoft.Office.Interop.Excel.Range)xlWorkSheet.Cells[i + 5, j + 1];
                                float Left = (float)((double)oRange.Left);
                                float Top = (float)((double)oRange.Top);
                                const float ImageSize = 32;
                                xlWorkSheet.Shapes.AddPicture(imagString, Microsoft.Office.Core.MsoTriState.msoFalse, Microsoft.Office.Core.MsoTriState.msoCTrue, Left, Top, ImageSize, ImageSize);
                                oRange.RowHeight = ImageSize + 2;

                            }
                            else
                            {
                                xlWorkSheet.Cells[i + 5, j + 1] = resultSheet.Rows[i][j].ToString();

                            }
                        }
                    }

                    xlWorkBook.SaveAs(saveFileDialog1.FileName, Microsoft.Office.Interop.Excel.XlFileFormat.xlWorkbookNormal, misValue, misValue, misValue, misValue, Microsoft.Office.Interop.Excel.XlSaveAsAccessMode.xlExclusive, misValue, misValue, misValue, misValue, misValue);
                    xlWorkBook.Close(true, misValue, misValue);
                    xlApp.Quit();

                    Marshal.ReleaseComObject(xlWorkSheet);
                    Marshal.ReleaseComObject(xlWorkBook);
                    Marshal.ReleaseComObject(xlApp);
                    MessageBox.Show("Excel file created , you can find the file " + saveFileDialog1.FileName);
                }
                else
                {
                    MessageBox.Show("Invalid file type");
                }
            }
            else
            {
                MessageBox.Show("You did pick a location " +
                                "to save file to");
            }
        } 
```

客户使用的是excel 2002，所以不知道该怎么办！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T08:48:49.677

这是一个关于如何使用 Excel 进行后期绑定的快速示例。这篇文章还包括以下内容

1.  添加新工作表（根据您的要求）
2.  重命名新添加的工作表
3.  写入单元格

我已经评论了代码，所以你理解它应该没有任何问题:)

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Reflection;

namespace WindowsFormsApplication6
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            object xlApp;
            object xlWbCol;
            object xlWb;
            object xlSheet;
            object xlRange;
            object xlWsCol;

            //~~> create new Excel instance
            Type tp;
            tp = Type.GetTypeFromProgID("Excel.Application");
            xlApp = Activator.CreateInstance(tp);

            object[] parameter = new object[1];
            parameter[0] = true;
            xlApp.GetType().InvokeMember("Visible", BindingFlags.SetProperty, null, xlApp, parameter);
            xlApp.GetType().InvokeMember("UserControl", BindingFlags.SetProperty, null, xlApp, parameter);

            //~~> Get the xlWb collection
            xlWbCol = xlApp.GetType().InvokeMember("Workbooks", BindingFlags.GetProperty, null, xlApp, null);

            //~~> Create a new xlWb
            xlWb = xlWbCol.GetType().InvokeMember("Add", BindingFlags.InvokeMethod, null, xlWbCol, null);

            //~~> Get the worksheet collection
            xlWsCol = xlWb.GetType().InvokeMember("WorkSheets", BindingFlags.GetProperty, null, xlApp, null);

            //~~> Create a new workxlSheet
            xlSheet = xlWb.GetType().InvokeMember("Add", BindingFlags.InvokeMethod, null, xlWsCol, null);

            //~~> Rename the workxlSheet to your SO Handle
            xlSheet.GetType().InvokeMember("Name", BindingFlags.SetProperty, null, xlSheet, new object[] { "confusedMind" });

            //~~> Assign cell D10 to xlRange object
            xlRange = xlSheet.GetType().InvokeMember("Range", BindingFlags.GetProperty, null, xlSheet, new object[] { "D10" });

            //~~> Write to cell D10
            xlRange.GetType().InvokeMember("Value", BindingFlags.SetProperty, null, xlRange, new object[] { "Blah Blah" });

            //~~> Release the object
            System.Runtime.InteropServices.Marshal.ReleaseComObject(xlApp);
        }
    }
} 
```

**截屏**

![在此处输入图像描述](../Images/b7b3ff3632061bd244a83ee57832badb.png)

**跟进**

要添加图像，请使用它。根据需要进行更改

```
object xlShape;
xlShape = xlSheet.GetType().InvokeMember("Shapes", BindingFlags.GetProperty, null, xlSheet,null);
String imagString = @"C:\Image.jpg";
xlSheet.GetType().InvokeMember("AddPicture", BindingFlags.InvokeMethod, null, xlShape,
new object[] {imagString, false, true, 10, 10, 200, 200 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T22:31:03.430

信息很清楚；构建您的应用程序所需的 Excel (2007) 版本比客户端安装的 Excel (2002) 版本更新。

将您的客户端升级到较新版本的 Excel (2007)，或降级您的应用程序所需的 Excel 互操作程序集（如果您可以找到适用于旧版 Excel 的程序集），或者改用 Excel 的 COM 自动化。

# c# - 正则表达式正确实现

> ID：14511784
> 
> 赞同：0
> 
> 时间：2013-01-24T22:13:56.633
> 
> 标签：c#, sql, regex

这应该很简单，但请耐心等待。我忽略了什么？我要做的就是接受一个作为 SQL 查询一部分的值，我想检查以确保它的值是整数。如果是，那么我允许将其传递给 SQL Server。我收到一条通知，说我的 Regex 方法有无效参数。在此先感谢您对我犯错的地方有所了解。

```
 string valid2Regex = @"\d{4}"; // regex to check for 4 integers
 Regex rgx = new Regex(valid2Regex);
 string idCheck = id;

 if (rgx.Matches(idCheck, rgx))
        {
            parameters.Add(DataAccess.CreateParameter("@YEAR", SqlDbType.NVarChar, HttpContext.Request.QueryString.Get("Year")));
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T22:15:26.667

```
^\d{4}$ 
```

这将其限制为仅 4 位数。否则，字符串中的任何 4 位数字都可以与您的数字一起使用。

此外，[没有采用这两个参数的实例重载](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.matches%28v=vs.100%29.aspx)，而是使用[IsMatch](http://msdn.microsoft.com/en-us/library/axa83z9t%28v=vs.100%29.aspx)：

```
if (rgx.IsMatch(idCheck))
{
    ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T22:52:24.447

谈到语法，您可以通过不同的方式使用 Regex：

```
string match = rgx.Match(idCheck); 
```

在这种情况下，您查找表达式并期望一个结果，例如：

```
expr:"\d{4}"   text:"asdfas1234asdfasd"  -> "1234"
expr:"\d{4}"   text:"1234"               -> "1234"
expr:"^\d{4}$" text:"asdfas1234asdfasd"  -> null
expr:"^\d{4}$" text:"1234"               -> "1234" 
```

如果您只想检查字符串是否匹配，您可以使用：

```
bool found = rgx.IsMatch(idCheck); 
```

它的工作原理是：

```
expr:"\d{4}"   text:"asdfas1234asdfasd"  -> true
expr:"\d{4}"   text:"1234"               -> true
expr:"^\d{4}$" text:"asdfas1234asdfasd"  -> false
expr:"^\d{4}$" text:"1234"               -> true 
```

代码中的方法 (Matches) 用于查找多个实例并返回 MatchCollection：

```
MatchCollection result = rgx.Matches(idCheck, 0); 
```

可能您的错误与第二个参数有关，根据[MSDN](http://msdn.microsoft.com/en-us/library/z9ekkwhs.aspx) ，它是一个整数，表示字符串中的起始位置。

# powershell - 当用户在没有参数参数的情况下调用我的 powershell 脚本时，如何抑制发生的错误

> ID：14511789
> 
> 赞同：4
> 
> 时间：2013-01-24T22:14:11.843
> 
> 标签：powershell, parameters, arguments, parameter-passing, powershell-2.0

例如，我的脚本可以这样调用：

```
.\MyScript.ps1 -s <hostname1> 
```

如果我在没有传递带有 -s 参数的参数的情况下调用它，我会收到一个错误：

```
.\MyScript.ps1 -s

C:\MyScript.ps1 : Missing an argument for parameter 'sql'. Specify a pa
rameter of type 'System.String' and try again.
At line:1 char:18
+ .\MyScript.ps1 -s <<<<
    + CategoryInfo          : InvalidArgument: (:) [MyScript.ps1],     ParameterBindingException
    + FullyQualifiedErrorId : MissingArgument,MyScript.ps1 
```

有没有办法抑制这个错误，或者出现自定义错误：

```
.\MyScript.ps1 -s

Please pass a hostname with the s argument:
.\MyScript.ps1 -s <hostname> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T23:29:11.057

你可以做两件事中的一件。

将该参数标记为必填，然后powershell会自动向用户查询它：

```
PARAM(  [Parameter(Mandatory=$true)][string]$sql )
PROCESS
{
    "You entered: " + $sql
} 
```

这使：

```
# C:\Temp> .\prompt.ps1 
cmdlet prompt.ps1 at command pipeline position 1
Supply values for the following parameters:
sql: asdsaa
You entered: asdsaa 
```

或者您可以提供一个表达式作为查询用户输入的默认参数：

```
PARAM(  [string]$sql = (read-host "Enter a value for sql parameter") )

PROCESS
{
    "You entered: " + $sql
} 
```

这使：

```
# C:\Temp> .\prompt.ps1 
Enter a value for sql parameter: hello
You entered: hello 
```

**编辑：**

回应您的评论。我能想到的唯一解决方法是不指定参数并自己处理 $args 参数。或者，您可以使用 hack 将作业推送到将参数解析为单独的函数，然后捕获调用该函数时可能发生的任何错误。因此，您的脚本将如下所示：

```
function parsePrompt ( [string]$sql)
{
    $sql
}

$cmd = "parsePrompt $($args -join " ")"
try
{
    $sql = invoke-expression $cmd
}
catch [System.Management.Automation.ParameterBindingException]
{
    $sql = read-host "Enter a value for sql parameter"
}
"You entered: " + $sql 
```

这使：

```
# C:\Temp> .\Prompt.ps1 -s
Enter a value for sql parameter: dsfds
You entered: dsfds

# C:\Temp> .\Prompt.ps1 -s dfds
You entered: dfds 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T07:30:16.907

您可以尝试使用**陷阱处理程序**在未传递参数时提供自定义消息，然后从那里继续。陷阱处理程序适用于当前范围，因此您只需在脚本顶部定义它来处理您的错误。

例如：

```
trap [ArgumentException] {
    write-host "Please pass a hostname with the s argument"
    break
} 
```

您还可以通过设置告诉 PowerShell 在此脚本中发生错误时不要警告您

`$ErrorActionPreference = SilentlyContinue`

这将使 PowerShell 安静地抑制错误并尝试继续执行脚本。但是，出于显而易见的原因，抑制错误可能不是最好的主意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T14:57:23.163

参数（[参数（强制=$true，helpmessage=“你这个傻山羊。”）]$SQL）

请原谅简洁，在电话上；）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T19:38:16.983

如果我正确地阅读了您的意图，您想要错误，而不是提示......所以：

```
# MyScript
param (
    $sql = $(throw @"
    Oops!
    Dude, this script requires SQL parameter!
    Run it like that: .\MyScript -s <hostname>
"@)
)
    "Got $sql"
} 
```

您可以使用 v1“强制”参数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-11T00:53:56.623

MyScript.ps1 的简单方法：

```
Param( [switch]$sql, [string]$_ValueSql )
if ($_ValueSql){​​​​​​​
    [String]$sql=$_ValueSql
}​​​​​​​ else {​​​​​​​
    [String]$sql=""
}​​​​​​​
"sql=$sql"

Results:

.\MyScript.ps1
sql=

.\MyScript.ps1 -s
sql=

.\MyScript.ps1 -s abcd
sql=abcd 
```

# windows-phone-8 - WP7.1 应用程序不会部署到 WP8 设备

> ID：14511791
> 
> 赞同：3
> 
> 时间：2013-01-24T22:14:23.243
> 
> 标签：windows-phone-8, windows-phone

我有一个 wp7.1 应用程序，我正在编译 vs 2012。我可以部署到 Wp7 和 Wp8 模拟器，但我不能部署到我的 HTC 8x（WP8 设备）。我还可以将应用程序部署到旧的 7.1 设备。

我能够将一个空项目部署到 Wp8 设备。

我得到的错误是：

> 应用程序安装失败。发生运行时错误。修复 WMAppManifest.xml 文件中的功能。

自从在 Vs2010 中编译以来，这些功能没有改变。

任何想法这可能是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T00:20:32.890

您可以尝试仅打开所有功能并查看是否可以解决问题。如果是这样，您可以开始关闭不需要的那些。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T02:20:54.847

听起来 HTC 的某个人在将 WP7.1 应用程序部署到 HTC 8X 上落空了。这种情况在 Lumia 手机上运行良好。

无论如何，这可能是因为一些 WP7.5 功能已被弃用以支持新的 WP8 功能。具体来说，ID_CAP_MEDIALIB 在 ID_CAP_MEDIALIB_AUDIO、ID_CAP_MEDIALIB_PHOTO、ID_CAP_MEDIALIB_VIDEO 和 ID_CAP_MEDIALIB_PLAYBACK 中被弃用了。删除该功能并用新功能替换它可能会解决您的问题。什么时候

请参阅 WP8 大写的完整列表 @ [http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206936(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206936(v=vs.105).aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-29T09:19:48.080

由于`<Capability Name="ID_CAP_NETWORKING_ADMIN" />`存在和缺失，我遇到了类似的问题

```
<ScreenResolution Name="ID_RESOLUTION_WXGA"/> 
```

如果您按照以下步骤操作，它应该可以解决所有问题：

[1) 在http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206936%28v=vs.105%29.aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206936%28v=vs.105%29.aspx)删除任何未为您的目标 wp 指定的功能

2）添加默认值。注意 ID_CAP_MEDIALIB，它已更改，需要更详细地指定您需要的内容。例如，在我的项目中，我有：

```
<Capability Name="ID_CAP_NETWORKING" />
  <Capability Name="ID_CAP_LOCATION" />
  <Capability Name="ID_CAP_SENSORS" />
  <Capability Name="ID_CAP_MICROPHONE" />
  <Capability Name="ID_CAP_MEDIALIB_PLAYBACK" />
  <Capability Name="ID_CAP_GAMERSERVICES" />
  <Capability Name="ID_CAP_PHONEDIALER" />
  <Capability Name="ID_CAP_PUSH_NOTIFICATION" />
  <Capability Name="ID_CAP_WEBBROWSERCOMPONENT" />

  <Capability Name="ID_CAP_IDENTITY_DEVICE"/>
  <Capability Name="ID_CAP_IDENTITY_USER"/>

  <Capability Name="ID_CAP_ISV_CAMERA"/>
  <Capability Name="ID_CAP_CONTACTS"/>
  <Capability Name="ID_CAP_APPOINTMENTS"/> 
```

3）确保您启用了正确的分辨率， http: [//msdn.microsoft.com/en-us/library/windowsphone/develop/ff769509%28v=vs.105%29.aspx#BKMK_SCREENRESOLUTIONSelement](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff769509%28v=vs.105%29.aspx#BKMK_SCREENRESOLUTIONSelement)

```
<ScreenResolutions>
  <ScreenResolution Name="ID_RESOLUTION_WVGA"/>
  <ScreenResolution Name="ID_RESOLUTION_WXGA"/>
  <ScreenResolution Name="ID_RESOLUTION_HD720P"/>
</ScreenResolutions> 
```

# autofac - Autofac多种实现xml配置

> ID：14511792
> 
> 赞同：1
> 
> 时间：2013-01-24T22:14:25.880
> 
> 标签：autofac

是否可以使用 autofac xml 配置配置同一接口的多个实现？

我想要完成的是执行多个作业的 Windows 服务。我有 2 个工作，它们通过短信或电子邮件从队列中发送消息。每项工作都是不同的装配。它们都依赖于 IQueuedMessageProvider。一项工作需要电子邮件实现，另一项需要短信实现。两个工作的构造函数如下所示（为问题而简化）：

```
 public SendSmsJob(IQueuedMessageProvider queuedMessageProvider)
    {
        _queuedMessageProvider= queuedMessageProvider;
    }
 public SendEmailJob(IQueuedMessageProvider queuedMessageProvider)
    {
        _queuedMessageProvider= queuedMessageProvider;
    } 
```

在 app.config 我注册了像这样的实现

```
<component type="MyApp.Plugin.Sms.Verizon.VerizonSmsService, MyApp.Plugin.Sms.Verizon" service="MyApp.Model.Messages.QueuedMessages.Providers.IQueuedMessageProvider, MyApp.Model" />
<component type="MyApp.Plugin.Email.Smtp.EmailService, MyApp.Plugin.Email" service="MyApp.Model.Messages.QueuedMessages.Providers.IQueuedMessageProvider, MyApp.Model" /> 
```

如何确保作业获得 de IQueuedMessageProvider 的正确实现？[我已阅读有关使用名称和密钥https://code.google.com/p/autofac/wiki/TypedNamedAndKeyedServices](https://code.google.com/p/autofac/wiki/TypedNamedAndKeyedServices)解决此类问题的信息。

另一种选择是注册所有实现并使 IQueuedMessageProvider 成为 IEnumerable 并在构造函数中采用正确的实现。但我更喜欢在它自己的配置中解决它。甚至有可能，或者您对解决这个问题有什么更好的建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:22:14.687

在撰写本文时，Autofac 的 XML 配置能够为服务指定名称/键（如您的消息提供程序），但不能在不同服务的构造函数（“作业”类）上指定给定类型与特定名称相关联。

你实际上有三个选择。

**选项 1：重新设计界面**

拥有接口（或抽象/基类）的重点是您可以互换使用实现。（*请参阅：[Liskov 替代原则](http://en.wikipedia.org/wiki/Liskov_substitution_principle)。*）如果您的设计无法做到这一点（这就是它的外观），那么重新研究该设计会很好。对于不同的任务，您可能需要不同的界面。

查看提供的小片段，我可能会考虑为每种传输方法（`ISmsProvider`, `IEmailProvider`）设置不同的接口，以便处理器“作业”类可以按类型适当地键入。

**选项 2：使用 Autofac 模块**

如果您有不同的“已知配置”（例如，一种用于开发，一种用于生产），那么您可以为每种配置[创建不同的 Autofac 模块](https://code.google.com/p/autofac/wiki/StructuringWithModules)。您可以在模块中比在 XML 配置中灵活得多，并且它允许您执行您需要做的花哨的按命名实例连接的事情。

您可以像注册类型一样使用 XML 配置来注册模块，因此不要根据您的不同需求切换 XML 配置类型注册，而是更改 XML 配置以注册不同的模块。

**选项 3：实现您自己的 XML 配置解析器**

从 Autofac 3.0 开始，配置机制可以编写自己的机制来解析和注册 XML 配置。该网站上的文档尚未完全更新，也没有“食谱”或示例，因此您必须对源代码进行一些探索，但从技术上讲这是可能的。在深入研究这个选项之前，我可能会先看看前两个选项之一。

# ios - 如何像 Facebook 应用程序签入视图一样在屏幕外为 UITableView 设置动画

> ID：14511793
> 
> 赞同：0
> 
> 时间：2013-01-24T22:14:27.053
> 
> 标签：ios, objective-c, facebook, sdk

在 iOS 的 facebook 应用程序中，在附近的视图中，有一个 UITableView，顶部有一张地图，当用户在桌子上拉下时，桌子向下动画，地图占据整个屏幕。使用向上的手势，表格视图将重新显示在视图中。 [（来源：][[elandroidelibre.com](https://www.elandroidelibre.com/wp-content/uploads/2012/12/DisplayMedia-289x600.png)][）][![脸书应用](../Images/07fb6476a83b22b4e84f92d2ee6601b3.png)](https://i.stack.imgur.com/BJOnO.png)

我的问题是，如何以优雅的方式实现这一点。我玩过 ContentOffset 和 ContentInset，但我尝试过的都没有真正奏效。有什么想法或建议吗？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T22:48:02.310

看起来 UITableView 的 backgroundView 包含一个 MKMapView，因此当您向下滑动表格视图单元格时，会显示更多的 backgroundView。换句话说，包含表格视图单元格的 UIScrollView 正在向上和向下滚动，从而显示背景视图。看起来 mapView 中心正在更改，以将当前位置保持在可见背景区域的中心。

# sql - 在 SQL Create 语句中添加命名外键约束

> ID：14511796
> 
> 赞同：55
> 
> 时间：2013-01-24T22:14:36.367
> 
> 标签：sql, sql-server, postgresql, constraints, create-table

我目前有：

```
CREATE TABLE  galleries_gallery (
    id              INT NOT NULL PRIMARY KEY IDENTITY,
    title           NVARCHAR(50) UNIQUE NOT NULL,
    description     VARCHAR(256),
    templateID      INT NOT NULL REFERENCES galleries_templates(id),
    jsAltImgID      INT NOT NULL REFERENCES libraryImage(id)
    jsAltText       NVARCHAR(500),
    dateCreated     SMALLDATETIME NOT NULL,
    dateUpdated     SMALLDATETIME NOT NULL,
    lastUpdatedBy   INT,
    deleted         BIT NOT NULL DEFAULT 0
); 
```

但这会添加具有自动生成名称的约束，这使得以后很难删除约束。为了命名约束，我需要添加什么？

上面的例子是 SQL Server，我在 PostgreSQL 中也需要它。

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2013-01-24T22:22:15.783

在 SQL Server 中，您可以使用`constraint`关键字内联定义外键并同时为其命名。

这是更新的脚本：

```
CREATE TABLE  galleries_gallery (
    id              INT NOT NULL PRIMARY KEY IDENTITY,
    title           NVARCHAR(50) UNIQUE NOT NULL,
    description     VARCHAR(256),
    templateID      INT NOT NULL 
        CONSTRAINT FK_galerry_template 
        REFERENCES galleries_templates(id),
    jsAltImgID      INT NOT NULL 
        CONSTRAINT FK_gallery_jsAltImg
        REFERENCES libraryImage(id)
    jsAltText       NVARCHAR(500),
    dateCreated     SMALLDATETIME NOT NULL,
    dateUpdated     SMALLDATETIME NOT NULL,
    lastUpdatedBy   INT,
    deleted         BIT NOT NULL DEFAULT 0
); 
```

我刚刚做了一个测试，显然同样的事情也适用于 PostgreSQL：[http ://www.sqlfiddle.com/#!12/2ae29](http://www.sqlfiddle.com/#!12/2ae29)

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2013-01-24T22:19:42.250

```
CREATE TABLE  galleries_gallery (
    id              INT NOT NULL,
    title           NVARCHAR(50) NOT NULL,
    description     VARCHAR(256),
    templateID      INT NOT NULL,
    jsAltImgID      INT NOT NULL,
    jsAltText       NVARCHAR(500),
    dateCreated     SMALLDATETIME NOT NULL,
    dateUpdated     SMALLDATETIME NOT NULL,
    lastUpdatedBy   INT,
    deleted         BIT NOT NULL DEFAULT 0,
    CONSTRAINT galleries_gallery_id_pk PRIMARY KEY (id),
    CONSTRAINT galleries_gallery_title_uk UNIQUE (title),
    CONSTRAINT galleries_gallery_tmpltid_fk FOREIGN KEY (templateID) REFERENCES galleries_templates (id),
    CONSTRAINT galleries_gallery_jsAltImgIDfk FOREIGN KEY (isAltImgID) REFERENCES libraryImage (id)
); 
```

使用 CONSTRAINT 关键字来指定约束名称。IMO 执行此表结尾而不是内联（两者都是可以接受的，如第二个答案所示）更清洁、更易读，这还允许您在多个列以及多个 FK 上创建 UNIQUE 约束到同一张桌子。CONSTRAINT 关键字不能用于非空；对非空约束的更改需要 ALTER TABLE MODIFY COLUMN ... null。约束名称必须少于或等于 30 个字符。使用标准命名约定。就个人而言，我总是使用列名前面的表名，如果约束名称超过 30 个字符，则将其删除，然后是约束类型（pk、fk、uk 等）

# asp.net - 上传大文件时出现 404 错误 (4mb+) - asp.net

> ID：14511798
> 
> 赞同：1
> 
> 时间：2013-01-24T22:14:40.297
> 
> 标签：asp.net, vb.net, web-config

我基本上浪费了我一整天的时间来做这件事。以前似乎大型上传工作，但现在他们没有，即使我在我的网络配置中拥有我应该需要的所有设置。每次我上传时，它都会非常简短地处理然后给我一个 404 - 找不到文件或目录。我已经广泛搜索，似乎无法弄清楚这一点。如果我将限制降低到文件大小以下，它会抛出一个实际的系统异常，但是当我再次提高它时，它会返回 404。

以下是我不久前添加到 web.config 文件中的部分：

到基地：

```
<httpRuntime executionTimeout="900" maxRequestLength="4000000" /> 
```

和 system.webServer 部分：

```
<security>
   <requestFiltering>
       <requestLimits maxAllowedContentLength="4000000" />
    </requestFiltering>
</security> 
```

我还覆盖了 applicatioHost.config 设置，以允许 Web 配置覆盖机器级别的设置。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-06T13:21:50.693

```
<httpRuntime executionTimeout="900" maxRequestLength="4000000" />

<security>
   <requestFiltering>
       <requestLimits maxAllowedContentLength="4000000" />
    </requestFiltering>
</security> 
```

两种不同的设置有不同的单位：

maxRequestLength 以千字节为单位 maxAllowedContentLength 以字节为单位

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T22:44:03.903

我回答了我自己的问题。这两个限制都太低了。两者都增加，成功。

# php - 循环生成的数组，将其分配给试图作为一个整体返回的变量

> ID：14511799
> 
> 赞同：1
> 
> 时间：2013-01-24T22:14:45.367
> 
> 标签：php

我有一个生成数组的函数，所以我可以进一步这样做：

```
while ($this->stmt->fetch()) // $row is generated here
{
   .....
} 
```

如果我在这个while循环中编写`print_r($row)`它可以正常显示不同的数组

但是..如果我在那里写，`$return[] = $row`那么`$return`数组里面有所有重复的条目

这怎么可能？我非常筋疲力尽，无法弄清楚。

**更新**

```
public function bind_array($stmt, &$row)
{
      $md = $stmt->result_metadata();

      $params = array();
      while($field = $md->fetch_field()) {
         $params[] = &$row[$field->name];   
      }

   call_user_func_array(array($stmt, 'bind_result'), $params);
}

public function results($method = 'assoc', $close_stmt = false)
{
   $this->bind_array($this->stmt, $row);

   while ($this->stmt->fetch())
   {
      $ret[] = $row; // if write here print_r($row) instead everything is good
   }
   print_r($ret); // all are duplicate, 'id' are same, etc..
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T22:35:08.787

我不知道怎么解决的，但我是这样解决的：

```
while ($this->stmt->fetch())
{
    foreach ($row as $k => $v)
    {
        $r[$k] = $v;
    }
    $ret[] = $r;
}

print_r($ret); // It gave different results, finally! 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T23:47:48.440

只是一个想法，我认为更简单（用数组填充数组）；

```
// $row = array("foo" => "the foo");
foreach ($row as $k => $v) $ret[] = array($k => $v); 
```

给;

```
Array
(
    [0] => Array
        (
            [foo] => the foo
        )

) 
```

# javascript - 堆叠的图像集，每个图像的偏移量增加

> ID：14511801
> 
> 赞同：0
> 
> 时间：2013-01-24T22:14:52.603
> 
> 标签：javascript, jquery, html, css

我有一个图像列表，我想堆叠它们，一个在彼此的顶部，然后将每个图像从顶部和左侧偏移 30px。

```
<ul>
   <li><img src="#"></li>
   <li><img src="#"></li>
   <li><img src="#"></li>
   <li><img src="#"></li>
   <li><img src="#"></li>
</ul> 
```

我发现了一个类似效果的 jsFiddle（[http://jsfiddle.net/BrAbs/1/](http://jsfiddle.net/BrAbs/1/)），但也需要为每个图像（0px、30px、60px、90px）等偏移和增加左侧位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T22:21:19.233

使用 jQuery：

```
$('li').each(function (i) {
    $(this).css({
        left: 30 * i
    });
}); 
```

[**小提琴**](http://jsfiddle.net/BrAbs/15/)

需要`position:relative`您将`left`CSS 属性设置为的元素。

* * *

根据要求，如果您需要堆栈效果而不设置s ，您还可以使用`absolute`相对于`relative`ly 定位的祖先的 ly 定位：`height``li`

```
.ulClass {
    position: relative; /*resets the absolute positioning of descendant li(s)*/
}
.ulClass li {
    position: absolute; /*absolute positioning relatively to ancestor .ulClass*/
} 
```

然后更新的 JS 添加`top`偏移量：

```
$('li').each(function (i) {
    $(this).css({
        top: 30 * i,
        left: 30 * i
    });
}); 
```

[**小提琴**](http://jsfiddle.net/BrAbs/17/)

# asp.net - 如何将 Devexpress Skin 应用于 devexpress 文本框控件？

> ID：14511802
> 
> 赞同：0
> 
> 时间：2013-01-24T22:14:54.693
> 
> 标签：asp.net, themes, devexpress

我使用 Devexpress Theme Builder 来创建主题。我成功应用了这个主题。当我有不同宽度的 aspx:textboxes 时出现了问题。我决定在 Theme Builder 中创建皮肤，只更改宽度。我使用 SkinID 属性在文本框上设置皮肤，但我没有看到效果。我用以下代码注册了我的主题。

```
BundleConfig.RegisterBundles(BundleTable.Bundles);
ThemeAssembly.ThemesProviderEx.Register(); 
```

我应该为我的皮肤进行类似的注册吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T21:40:19.020

在标记上设置 SkinID 时，还应定义皮肤所在的主题。

例如

```
<dx:aspxcombobox Theme="MyTheme" SkinID="MySkin" /> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-18T16:30:58.773

使用主题名称 dll 设置文件 Web.Config 主题标签：

> ```
> <themes enableThemesAssembly="TRUE" styleSheetTheme="" theme="ThemeAssembly" />
> <compression enableHtmlCompression="false" enableCallbackCompression="true" enableResourceCompression="true" 
> ```
> 
> enableResourceMerging="true" />

# asp.net - 是否有任何理由将 DLL 添加到您的 /bin 目录，但不添加对它的引用？

> ID：14511803
> 
> 赞同：0
> 
> 时间：2013-01-24T22:15:02.583
> 
> 标签：asp.net, visual-studio-2010

我知道从项目中添加对程序集的引用会使被引用程序集的命名空间/类型/类可用于您的代码。但是，您是否有理由将程序集添加到您的 /bin，但不需要从您的项目中添加对它的引用？

我的意思是，在添加引用之前，DLL 几乎没有用处吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T22:17:30.527

一点也不。反射允许在运行时加载程序集而无需任何事先参考。想想这在插件架构中如何有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T22:16:19.830

如果您正在构建 ASP 网站，那么您只需将 dll 放在 bin 中。

如果您正在创建一个 ASP Web 应用程序，那么您需要将其添加为参考。

# phantomjs - phantomjs - page.onError - 跟踪总是一个空对象？

> ID：14511804
> 
> 赞同：4
> 
> 时间：2013-01-24T22:15:03.390
> 
> 标签：phantomjs

在**phantomjs**的文档中，他们说如下：

***错误处理** 为了轻松捕获网页中发生的错误，无论是语法错误还是其他抛出的异常，都为 WebPage 对象添加了 onError 处理程序。这种处理程序的一个例子是：*

```
page.onError = function (msg, trace) {
    console.log(msg);
    trace.forEach(function(item) {
        console.log('  ', item.file, ':', item.line);
    })
} 
```

*现在，如果页面打开一个带有一些 JavaScript 异常的站点，则会打印出详细信息（包括堆栈跟踪）。*

好吧，我创建了一些“损坏”页面（javascript 导致异常的页面），我得到了抛出的错误，但在跟踪中什么也没有

有人可以帮忙吗？

这是我遇到的一个案例的示例：

html:

```
<!docType>
<html><head></head>
<body>
<script src='broken.js'></script> 
</body>
</html> 
```

脚本：break.js

```
1\. // this script is broken at line 5.
2\. // 
3\. var i=20;
4\. 
5\. i = somethingThatDontExist
6\. 
7\. // we will never be here...
8\. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-03T21:08:13.423

您可能错过了测试设置中的某些内容，但一切正常。你可能忘记了 phantomJS 调用是异步的。

这是我的测试设置：

**测试.html**

```
<!docType>
<html><head></head>
  <body>
    <script src='broken.js'></script>
  </body>
</html> 
```

**破碎的.js**

```
var i = 20;
i = somethingThatDontExist; 
```

**测试错误.js**

```
var page = require('webpage').create();
page.onError = function (msg, trace) {
  console.log(msg);
  trace.forEach(function(item) {
    console.log(' ', item.file, ':', item.line);
  })
}
page.open('test.html',function(){phantom.exit()}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-25T18:27:26.340

这是一个老问题，但仍然是一个问题（我最近遇到了这个问题）。OP 可能使用的是旧版本。

有几件事要检查...

**1) `console.log`phantomjs 2.1.1 和 2.5.0 之间的 API 发生了变化。在 2.5.0`console.log`中只打印第一个参数（在 2.1.1 中它将打印全部）。**

为了安全起见，首先尝试构建一个字符串并将其记录为单个参数，以确保这不仅仅是一个日志记录问题。即`console.log(concatenatedString)`不是`console.log(var1, var2, var3,...)`

`JSON.stringify(object)`如果要连接对象和数组，请使用。

**2）根据我的经验，phantomjs 在页面上下文中捕获错误的方式不一致。**

例如，如果（在页面中）一个 javascript catchblock 执行了`console.log('message', error)`，则 phantomjs`page.onConsoleMessage`回调将获取消息的字符串和字符串“[object Object]”...因此，该对象中包含的有关错误的任何数据都会在页面上下文和 phantomjs。

（`console.error`可能具有与 不同的行为`console.log`，但我没有对其进行测试。）

**3)`page.onError`目前在 phantomjs 2.5.0 中被破坏。它永远不会被调用，而是出现错误`page.onConsoleMessage`但错过了错误对象（参见＃2）。**

如果您确实需要知道页面上是否存在 javascript 错误，请暂时使用 phantomjs 2.1.1。

请参阅下面的错误以获取说明 2.1.1 和 2.5.0 之间在`page.onError`,`page.onResourceError`和`page.onConsoleMessage`.

[https://github.com/ariya/phantomjs/issues/14776](https://github.com/ariya/phantomjs/issues/14776)

# c# - 在 MVC 中使用 DI 时的大量控制器构造函数参数列表

> ID：14511811
> 
> 赞同：4
> 
> 时间：2013-01-24T22:15:36.053
> 
> 标签：c#, asp.net-mvc-3, dependency-injection, autofac

我正在研究使用依赖注入和 autofac 的 ASP.NET MVC3 解决方案。我们的控制器是由 autofac 正确创建的，并且所有需要的对象都被正确传入。这些对象通常包括将域对象转换为 MVC（视图）模型的服务、存储库和映射器。所以控制器构造函数看起来有点像：

```
public abcController(
        ILogger logger,
        IabcRepository abcRepository,
        IabcService abcService,
        IMapper<AbcDomain, AbcViewModel> abcMapper,
        ...
        ) 
```

不幸的是，这些构造函数参数列表往往会很快增长。我们的一些控制器现在需要 60 个或更多参数。

我们是否在这里创建了一些反模式？

**编辑**

我应该提到我们尝试遵循薄控制器模式。此外，这些参数中的大多数往往是映射器——大约 66%。控制方法通常非常简单，并遵循以下任一模式：

*   基于参数调用适当的服务或存储库
*   使用映射器将结果转换为适当的视图模型
*   将视图模型传递给视图

或者这种模式：

*   从 post action 接收模型
*   使用映射器将其转换为适当的域对象
*   使用域对象调用适当的服务或存储库

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-25T16:01:07.973

我真的不能说你应该如何重新设计你的控制器，尽管我同意大多数其他答案——60 个传入参数很多。

Autofac 拥有[的聚合服务支持](https://code.google.com/p/autofac/wiki/AggregateService)可能有助于减少参数数量而不是依赖项数量。

您可以采用一个包含 60 个属性的聚合参数，而不是直接采用 60 个参数。

您创建一个带有依赖项的接口（只是接口，您实际上不必实现它）：

```
public interface IMyAggregateService
{
  IFirstService FirstService { get; }
  ISecondService SecondService { get; }
  IThirdService ThirdService { get; }
  IFourthService FourthService { get; }
} 
```

然后修改您的控制器以采用该聚合接口：

```
public class SomeController
{
  private readonly IMyAggregateService _aggregateService;

  public SomeController(
    IMyAggregateService aggregateService)
  {
    _aggregateService = aggregateService;
  }
} 
```

您可以注册聚合服务接口、依赖项和控制器，当您解析控制器时，聚合服务接口将自动为您实现和解析。

```
var builder = new ContainerBuilder();
builder.RegisterAggregateService<IMyAggregateService>();
builder.Register(/*...*/).As<IFirstService>();
builder.Register(/*...*/).As<ISecondService>();
builder.Register(/*...*/).As<IThirdService>();
builder.Register(/*...*/).As<IFourthService>();
builder.RegisterType<SomeController>();
var container = builder.Build(); 
```

同样，它并没有涉及需要那么多依赖项的更大问题，但是如果您只是想简化构造函数和控制器上的属性数量以便更易于管理，这是 Autofac 提供的一种策略来帮助解决这个问题.

[查看 wiki 页面了解更多详情。](https://code.google.com/p/autofac/wiki/AggregateService)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-24T22:29:34.240

60个或更多的参数很多。

在您的问题中，您说“..这些对象通常包括将域对象转换为 MVC（视图）模型的服务、存储库和映射器......”

你有一个胖控制器（不是 Thomas The Task Engine 那种），而是一个做得太多的控制器。

我寻找的平衡是 Fat Model 瘦控制器。[伊恩·库珀（Ian Cooper）在这篇博文中谈得](http://codebetter.com/iancooper/2008/12/03/the-fat-controller/)很好

您还可以查看诸如哪些参数实际上是横切关注点。

例如，在我看来，映射和日志记录是交叉问题，因此您可能会使用操作过滤器来清理您的控制器。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-24T22:18:13.990

（免责声明：这个答案是关于参数列表的大小。它不会减少控制器内的依赖关系）

在这种情况下，您将注入一个工厂。

例如：

```
interface IABCFactory {
    ILogger CreateLogger();
    IABCRepository CreateRepo();
    // .. etc
} 
```

然后您的构造函数变为：

```
private ILogger _logger;

public abcController(IABCFactory factory) {
    _logger = factory.CreateLogger();
    // .. etc
} 
```

请注意，您可以注入公共属性。但是否要将其公开给外界取决于您。如果你不想打破封装，那么你会去工厂。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-24T22:45:00.907

如果其中很多都归结为创建视图模型，那么这个问题和答案可能会有所帮助。

[MVC - 具有多个选择列表的控制器](https://stackoverflow.com/questions/9136091/mvc-controller-with-multiple-select-lists/9141989#9141989)

我还想看看 Manning 的 MVC 4 in Action。它涵盖了创建自动化映射的 ActionResult。

在我的应用程序中，我的大多数控制器操作都是一行。拉出一个实体并将其传递给自动映射并丰富视图结果，或者接收命令并将其传递给处理它的操作结果

Jimmy 的这篇博客文章涵盖了一些 POST 方面 [http://lostechies.com/jimmybogard/2011/06/22/cleaning-up-posts-in-asp-net-mvc/](http://lostechies.com/jimmybogard/2011/06/22/cleaning-up-posts-in-asp-net-mvc/)

基本上我得到一个域对象（来自 repo 或其他方法）并返回一个映射到适当 VM 的自动映射视图结果。

```
return AutoMappedView<ExaminationCreateModel>(new Examination ( _assetRepository.Find(assetId))); 
```

映射器 ViewResult 然后将其传递给丰富器（如果发现实现 IModelEnricher。请参阅其他堆栈问题。

返回时，它会作为命令发回，然后命令的处理方式有点像 Bogard post。

```
 public virtual ActionResult Create(AddAssetExaminationCommand addAssetExaminationCommand, ICommandHandler<AddAssetExaminationCommand> addExaminationHandler) 
    {
        return ProcessForm(
            addAssetExaminationCommand,
            addExaminationHandler,
            RedirectToAction(MVC.OnboardAsset.Examinations.Create()),
            RedirectToAction(MVC.OnboardAsset.Examinations.Index(addAssetExaminationCommand.AssetId)));
    } 
```

如果验证失败，则重定向到 GET 并合并 Modelstate（PRG 模式使用类似的东西[）](http://www.motowilliams.com/Getting-started-with-MVCContrib-Filters/)，因此错误仍然存​​在。如果它是有效的命令处理程序处理它，我们将重定向到成功页面

# jquery-ui - UI 可排序的令人难以置信的延迟

> ID：14511812
> 
> 赞同：0
> 
> 时间：2013-01-24T22:15:41.810
> 
> 标签：jquery-ui

我建立了一个使用 jQuery Sortable 的系统；但是，移动元素有很大的延迟（我们所说的移动元素大约需要 8 秒）。

在那个页面上，我们有大约 2000 个可以接收东西的可拖动项目/口袋，但是没有元素有隐藏的东西（正如我所读到的那样会导致延迟）并且没有真正使用 CSS3。

这是一个将被拖动的元素的示例：

```
<div data-runtime="30" data-name="1600 Penn" data-color="#00B3FF" data-id="751" class="pocket color2" style="">
    <h4 style="">1600 Penn</h4>
    <p>NBC</p>
    <div class="clear"></div>
    <div class="pocket_actions">
        <div class="timer timer1" data-timered="1" data-id="751"></div>
        <div class="public onpublic" data-id="751"></div>
        <div data-id="751" class="note"></div>
        <a style="float:left;" class="edit fancybox.iframe" href="schedule.php?action=edit&amp;id=751">
            <img src="includes/images/edit.png">
        </a>
        <div class="delete" data-id="751"></div>
    </div>
</div> 
```

有人对如何减少这种滞后有任何想法吗？即使拿起一件物品也需要大约 2 秒，这简直是疯了！

# vim - Vim：用 ctrl 和 shift 以外的键映射“按住”键盘组合？（任意修饰符）

> ID：14511815
> 
> 赞同：1
> 
> 时间：2013-01-24T22:15:55.770
> 
> 标签：vim

我可以为 j(按住)+l 创建一个映射，这与快速键入 j 然后 l 是分开的吗？

这与[vim 映射普通键（如 shift](https://stackoverflow.com/questions/3124998/vim-mapping-normal-keys-like-shift) ）有些重复，但我在 Windows 上，所以没有 xmodmap。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T22:30:47.003

不，你不能在 Vim 中通过简单的映射来做到这一点。您可以按`j`然后`l`，但不能同时按两者。

[但是有一个插件。](http://www.vim.org/scripts/script.php?script_id=2425)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T21:04:51.653

我已经能够用 AutoHotkey 做我想做的事。我从键盘上去掉了空格键，现在我可以用拇指访问很多修饰符（而不仅仅是空格和 AltGr）。这是我的 ahk 脚本。它将所有字母向上移动一排并将 v 映射到空格，b 映射到退格，n 映射到输入。请注意，我才刚刚开始研究这个，它是为瑞士德国布局而设计的。

```
#If WinActive("ahk_class Notepad")
v::space
variable := ""
n:: variable .= ""

#If GetKeyState("n", "P") == 0 && WinActive("ahk_class Notepad")

b::Backspace
1::q
2::w
3::e
4::r
5::t
6::z
7::u
8::i
9::o
0::p
q::a
w::s
e::d
r::f
t::g
z::h
u::j
i::k
o::l
p::SC027
a::y
s::x
d::c
f::v
g::b
h::n
j::m
k::,
l::.
SC027::-
return 
#If

#If GetKeyState("n", "P") == 1 && WinActive("ahk_class Notepad")

b::Enter
k::;
1::+q
2::+w
3::+e
4::+r
5::+t
6::+z
7::+u
8::+i
9::+o
0::+p
q::+a
w::+s
e::+d
r::+f
t::+g
z::+h
u::+j
i::+k
o::+l
p::+SC027
a::+y
s::+x
d::+c
f::+v
g::+b
h::+n
j::+m
l:::
SC027::+-

return 
#If 
```

# asp.net-mvc - MVC、WCF、REST 和 JSON

> ID：14511817
> 
> 赞同：0
> 
> 时间：2013-01-24T22:15:57.840
> 
> 标签：asp.net-mvc, json, wcf, rest

我们目前正在重新编写一个系统，该系统目前使用 asp.net c# webforms 和 web 服务。

由于当前系统臃肿，重写正在进行，我们正在考虑将 UI 和 WCF 作为服务转换为 MVC，而不是使用 Web 表单进行重写。（我意识到这已经有一段时间了，但是，这对我们来说是新技术）

在对网络和信息过载进行了几天的调查之后，我只是想与经验丰富的 MVC/WCF 程序员核实一下，我们正在为新系统的架构走上正确的道路，任何建议/建议将不胜感激.

*   REST WCF 将提供数据层（Entity Framework）和业务层
*   MVC 将提供 UI 层

WCF 应用程序将托管在 IIS 中，并为任何查询返回 JSON。

JQuery 将成为 Ajax 的选定框架。

MVC 应用程序将对 WCF 进行 JQuery Ajax 调用（因此 wcf 返回 JSON）以进行部分页面加载。

所以，我的问题是，我们是否走在正确的轨道上？还是有其他建议需要考虑？

感谢您的任何意见

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T22:33:29.123

我知道我工作的公司使用这种方法，

我们将 WCF 层用于所有业务和数据层活动，即验证、其他业务规则、插入、更新、删除等。

但是我们使用 UI 层中的控制器来访问那些 WCF 服务。我们还使用 API 控制器让任何 JSON 数据动态返回到页面，但它再次通过控制器到达服务。

这为您提供了一定程度的安全性，因为您不需要将 WCF 服务公开给更广泛的 Internet（仅将 WCF 作为内部服务），但仍允许其他应用程序通过 api 控制器进行连接。

# html - 使用 CSS 悬停时显示 div

> ID：14511821
> 
> 赞同：0
> 
> 时间：2013-01-24T22:16:21.683
> 
> 标签：html, css

当我将鼠标悬停在 div“post-wrap”中时，我想显示一个隐藏的 div“删除按钮”（#post-wrap）。我怎样才能用 CSS 做到这一点？

这是我到目前为止所做的：http: [//jsfiddle.net/ksvrY/2/](http://jsfiddle.net/ksvrY/2/)

```
#delete-button{
position: absolute;
right: 10px;
top: 10px;
margin: 0px 0px 0px 0px;
height: 30px;
width: 225px;
overflow: auto;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T22:18:29.570

见：http: [//jsfiddle.net/ksvrY/4/](http://jsfiddle.net/ksvrY/4/)

```
 #post-wrap:hover #delete-button{
        display:inherit;
    } 
```

还隐藏按钮：

```
#delete-button{
        display:none;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T22:19:07.490

这将起作用：

```
#post-wrap:hover #delete-button { 
     display:block;    
}

#delete-button { display:none; } 
```

...并且如果您想很好地使用它（根据需要附加必要的供应商前缀）：

```
#post-wrap:hover #delete-button { 
     opacity:1;    
}

#delete-button { -webkit-transition:all 1s ease-in; opacity:0; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T22:19:38.377

```
#button-delete {display: none;}
#post-wrap:hover #button-delete {display: block;} 
```

[http://jsfiddle.net/ksvrY/5/](http://jsfiddle.net/ksvrY/5/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T22:21:24.137

及其现在的工作:)

html

```
<div id="post-wrap">
    <div id="delete-button">
        <button id="button-delete"><p> Remove </p></button>
    </div>
</div> 
```

CSS

```
#post-wrap {
    position: relative;
    margin: 20px 0px 0px 20px;
    padding: 10px 10px 10px 10px;
    height: auto;
    min-height: 150px;
    width: 200px;
    border: 1px solid #ddd;
    border-radius: 4px 4px 4px 4px;
    background-color: #fff;
/*  box-shadow: rgba(0, 0, 0, 0.247059) 0px 3px 8px 0px; */
    -webkit-box-shadow: rgba(0, 0, 0, 0.2) 0px 1px 3px 0px
}

#delete-button{
    position: absolute;
    right: 10px;
    top: 10px;
    margin: 0px 0px 0px 0px;
    height: 30px;
    width: 225px;
    overflow: auto;
}

#button-delete {
    cursor: pointer;
    float: right;
    height: 30px;
    width: auto;
    border: 1px solid #bbb;
    border-radius: 4px 4px 4px 4px;
    background-color: #eee;
    background-image: -webkit-linear-gradient(top, rgba(255, 255, 255, 0.2) 0%, rgba(255, 255, 255, 0) 100%);
    -webkit-box-shadow: rgba(0, 0, 0, 0.2) 0px 1px 3px 0px;
    display:none;
}

#button-delete p {
    margin: 0px 0px 0px 0px;
    padding: 0px 0px 0px 0px;
    font-family: calibri;
    font-weight: bold;
    font-size: 16px;
    color: #444;
}

#post-wrap:hover #button-delete{
    display:block;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T22:21:41.990

使用悬停

[http://jsfiddle.net/Ptxfy/](http://jsfiddle.net/Ptxfy/)

```
#post-wrap:hover #delete-button { 
     display:block;    
}

#delete-button { display:none; } 
```

我不会使用直接子选择器，因为它不是必需的，并且可能会导致问题。

# ajax - IIS wordpress ajax 请求失败

> ID：14511826
> 
> 赞同：0
> 
> 时间：2013-01-24T22:16:45.033
> 
> 标签：ajax, wordpress, iis, xmlhttprequest

我们在 linux 服务器上开发了一个网站。一切都在处理它，但是当我们将它迁移到生产 IIS 服务器时，一些 ajax 请求开始失败。

如果您在浏览器上独立尝试 url，则 url 可以工作，但是在 ajax 请求中，即使请求的状态为 200，我也会收到错误消息。

[您可以在开发版http://ismapps.net/frisbysite/](http://ismapps.net/frisbysite/)的主页轮播中看到请求

并看到它在生产版本中失败
[http://www.frisby.com.co/](http://www.frisby.com.co/)

这是正常工作的网址之一
[http://www.frisby.com.co/menu/frisdelicias/frisbandeja/?ajax=true](http://www.frisby.com.co/menu/frisdelicias/frisbandeja/?ajax=true)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T23:00:06.617

您正在从生产服务器向开发服务器进行 ajax 调用，这会导致违反同源策略。

> XMLHttpRequest 无法加载[http://ismapps.net/frisbysite/wp-content/themes/handcrafted/get-thumbnail.p](http://ismapps.net/frisbysite/wp-content/themes/handcrafted/get-thumbnail.p) …1389,2099,1391,1400,1393,1394,1395,1401,1397,1398,1399,2070 ,2072,2074,2073,。Access-Control-Allow-Origin 不允许来源[http://www.frisby.com.co 。](http://www.frisby.com.co)

您必须将 ajax 请求的 url 更改为生产 url，或者如果实际上假设使用该 url，则将跨源资源共享标头添加到开发服务器。

# c - if 语句中的 MPI_Bcast？

> ID：14511833
> 
> 赞同：-1
> 
> 时间：2013-01-24T22:17:17.920
> 
> 标签：c, parallel-processing, mpi

我正在试验 MPI，当我在命令行上通过 mpirun 运行它时，我一直收到这个错误。

```
----------------------------------------------------------------------------------------------
mpirun noticed that the job aborted, but has no info as to the process
that caused that situation.
---------------------------------------------------------------------------------------------- 
```

我不知道为什么，因为其他 mpi 程序运行得很好。

这是我的代码。

```
#include <stdio.h>
#include <mpi.h>

int func(int num){
    int rank;
    MPI_Comm_rank(MPI_COMM_WORLD, &rank);
    if (num == 0){
        num = 5;
        MPI_Bcast(&num, 1, MPI_INT, rank, MPI_COMM_WORLD);
    }
    return num;
}

int main(int argc, char **argv){
    int rank, size;
    MPI_Init(&argc, &argv);
    MPI_Comm_rank(MPI_COMM_WORLD, &rank);
    MPI_Comm_size(MPI_COMM_WORLD, &size);
    printf("On processor %d, func returns %d\n", rank, func(rank));
    MPI_Finalize();
    return 0;
} 
```

该程序仍然给我同样的错误。if 语句中的 MPI_Bcast 是否无效？如果您在不是 root 时尝试广播，它仍然有效吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T22:42:01.053

The signature of `MPI_Bcast` as I see it in any reference document is `int MPI_Bcast(void* buffer, int count, MPI_Datatype datatype, int root, MPI_Comm comm)`. However, you are passing only four arguments, and looks like you forgot either about the first or second argument.

What is `num` in your case, and what is your buffer? The answer to this will likely resolve your question, but I am also not sure why your code even compiles. If `num` is what you want to broadcast, try if `MPI_Bcast(& num, 1, MPI_INT, rank, MPI_COMM_WORLD)` works for you.

There is another, **very serious** independent problem. You have some `int rank;` on your stack and pass this to `MPI_Bcast` before you ever initialize it. Who is sending? If root is, you could just as well pass `0`, or initialize properly by `int rank = 0;`.

Undetermined values for `rank` are almost certainly the reason for your job to abort because instances will be randomly sending or receiving.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T13:19:24.153

这段代码没有意义。`MPI_Bcast`是**集体通信调用**，这意味着，为了成功完成操作，提供的通信器（`MPI_COMM_WORLD`在您的情况下）中的所有等级都**必须**调用它。`MPI_Bcast`也是一个有*根*操作，即有一个指定的信息源，即具有指定等级的进程。所以除了所有等级都必须调用的要求之外`MPI_Bcast`，它们还**必须为***root*提供相同的等级。

您的程序`MPI_Bcast`仅在`num`参数`func`is时调用`0`，这仅发生在 rank 中`0`。在所有其他行列`func`中不调用`MPI_Bcast`，他们只是完成库并退出。这会导致`MPI_Bcast`最终失败，因为它会尝试将消息发送到不再可用的进程，最终导致错误（“最终”，因为该标准允许早期本地完成，并且在某些情况下，尤其是像您的情况那样的小消息，发送被缓冲）。默认情况下，MPI 通过中止作业而不是返回错误代码来处理错误。

没有什么可以阻止您从条件中调用任何 MPI 集合函数，但是您必须小心并确保所有等级最终都会进行集合调用，无论他们采用什么代码路径来执行此操作。

你的正确版本`func`是：

```
int func(int num) {
    if (num == 0) {
        num = 5;
    }
    MPI_Bcast(&num, 1, MPI_INT, 0, MPI_COMM_WORLD);
    return num;
} 
```

使用“条件内的调用”可能是：

```
int func(int num) {
    int rank;
    MPI_Comm_rank(MPI_COMM_WORLD, &rank);
    if (rank == 0) {
        num = 5;
        MPI_Bcast(&num, 1, MPI_INT, 0, MPI_COMM_WORLD);
    }
    else
        MPI_Bcast(&num, 1, MPI_INT, 0, MPI_COMM_WORLD);
    return num;
} 
```

（但这完全没有必要）

# java - 我的项目中缺少 R.Java，并且不会重新生成

> ID：14511834
> 
> 赞同：0
> 
> 时间：2013-01-24T22:17:20.513
> 
> 标签：java, android, eclipse, r.java-file

我开始制作一个新项目，就在我将按钮链接到 java 时，我注意到我的 R 无法解析并发现我的 R.java 文件不存在。我看过其他类似的问题，他们说要清理我所做的项目，但它仍然不起作用。这是我无法解决的页面中的代码。谢谢！

发票 Java

```
package com.invoice;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;

public class InvoiceActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.splash);
        Thread logoTimer = new Thread(){
            public void run(){
                try{
                    sleep(5000);
                    Intent menuIntent = new Intent("com.invoice.MENU");
                    startActivity(menuIntent);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
                finally{
                    finish();
                }
            }
        };
        logoTimer.start();
    }
} 
```

作业.java

```
package com.invoice;

import android.app.Activity;
import android.os.Bundle;

public class Job extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.job);
    }
} 
```

菜单.java

```
package com.invoice;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;

public class menu extends Activity{
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Button job = (Button) findViewById(R.id.button4);
        job.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                startActivity(new Intent("com.invoice.job"));

            }
        });
    }

    @Override
    protected void onPause() {
        // TODO Auto-generated method stub
        super.onPause();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T22:34:31.680

您可能在 xml 文件中有错误。如果有 xml 错误，将不会生成 R.java。查看 Manifest.xml 以及 res 中的所有布局、值和任何其他 xml 文件。

找到并修复错误后，清理项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T10:18:55.450

您可能在资源文件夹中有问题，首先解决错误。图像的数字名称会产生错误。解决错误后，只需清理您的项目或构建您的项目。如果错误得到修复，R.java 再次构建。

# ruby - 使用 nokogiri 或 mechanize 解析使用 JavaScript 呈现的电子邮件

> ID：14511835
> 
> 赞同：1
> 
> 时间：2013-01-24T22:17:21.560
> 
> 标签：ruby, ruby-on-rails-3, html-parsing, nokogiri, mechanize

我想解析以这种方式呈现的电子邮件地址：

```
<p class="email">
"Email: "
<script type="text/javascript"><!--
 document.write('f'+'o'+'<wbr/>@'+'e'+'x'+'p'+'.'+'c'+'o'); //-->
</script>
</p> 
```

我正在使用这段代码：

```
task import_emails: :environment do
  require 'mechanize'
  agent = Mechanize.new
  agent.get("URL")
  agent.page.search(".email").each do |email|
    puts email.text.strip
  end
end 
```

它只返回“电子邮件：”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T23:53:56.357

Nokogiri/Mechanize 不处理 JavaScript，因此您添加的电子邮件文本`document.write`对他们不可见，这就是您只能`Email:`返回的原因。

如果要选择使用 JavaScript 呈现的元素或文本，则必须考虑实际驱动浏览器的工具，以便获得使用 JavaScript 呈现的页面。[Watir](http://watir.com/)就是一个例子。另外，看看[Capybara](https://github.com/jnicklas/capybara)和[Capybara webkit](https://github.com/thoughtbot/capybara-webkit)。

有关详细信息，请参阅“[如何使用 Mechanize 处理 JavaScript？](https://stackoverflow.com/questions/802225/how-do-i-use-mechanize-to-process-javascript) ”。

# python - pd.read_clipboard() 段错误

> ID：14511839
> 
> 赞同：2
> 
> 时间：2013-01-24T22:17:41.700
> 
> 标签：python, clipboard, pandas

我似乎无法使用 read_clipboard()。我尝试复制我的一些数据，文档中的示例数据，最后只是数字 1。如您所见：

```
In [1]: %paste
1
## -- End pasted text --
Out[1]: 1

In [2]: pd.read_clipboard()
Segmentation fault (core dumped) 
```

我究竟做错了什么？其他人使用这个有问题吗？

我使用 IPython 0.12.1 和最新的 pandas 开发版本。我在 Ubuntu 12.04 上。

```
In [1]: pd.__version__
Out[1]: '0.10.1' 
```

为了安全起见：

```
dallan@dielectric-pc:~/pandas-danielballan$ git fetch upstream master
From git://github.com/pydata/pandas
 * branch            master     -> FETCH_HEAD
dallan@dielectric-pc:~/pandas-danielballan$ git merge upstream/master
Already up-to-date.
dallan@dielectric-pc:~/pandas-danielballan$ git status
# On branch master
nothing to commit (working directory clean)
dallan@dielectric-pc:~/pandas-danielballan$ 
```

# wcf - 是否可以在常规 WCF 服务中使用 oData 过滤、排序、分页？

> ID：14511846
> 
> 赞同：0
> 
> 时间：2013-01-24T22:18:22.500
> 
> 标签：wcf, odata, asp.net-web-api

我需要创建一个支持过滤的 Web 服务。排序和分页。我查看了 WCF oData 服务。它具有所有这些功能，并且需要最少的设置。但是，我认为您不能在服务中编写业务逻辑，因此 oData 仅适用于只读服务（并且可能适用于不涉及业务逻辑的读写服务）。

后来我通过使用方法的返回类型作为 IQueryable 来查看支持 oData 样式过滤等的 MVC Web API。知道这一点后我很高兴，直到我发现您无法为服务自动生成客户端代码。我不想处理 HTTP 的东西。我需要自动生成客户端。

所以我想知道相同的 IQueryable 是否可以在常规 WCF 服务中工作，因为它支持自动客户端生成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T18:25:08.877

如果 asp.net MVC 应用程序具有 $metadata 端点，那么您可以使用现有的 Microsoft.Data.Services.Client 来访问此服务。您可以通过提供 $metadata 端点在 Vistual Studio 中使用添加服务引用来创建客户端代码。然后它将创建一个用于访问服务的客户端层。

附件是指向使用 ASP.net MVC 的 OData 服务的博客文章的链接。

[http://blogs.msdn.com/b/alexj/archive/2012/12/07/odata-in-webapi-rc-release.aspx](http://blogs.msdn.com/b/alexj/archive/2012/12/07/odata-in-webapi-rc-release.aspx)

要创建客户端层，您可以按照此处的演练跳到“创建客户端应用程序”标题：http: [//msdn.microsoft.com/en-us/library/vstudio/cc668184.aspx](http://msdn.microsoft.com/en-us/library/vstudio/cc668184.aspx)

您可以使用带有 OData 的 ASP.net MVC 进行过滤、分页（客户端和服务器分页）。

# php - 尝试创建超链接时未定义的通知

> ID：14511853
> 
> 赞同：0
> 
> 时间：2013-01-24T22:18:41.567
> 
> 标签：php, html

尝试为每个图像名称设置超链接时，我在`imgitem`超链接中收到未定义的通知。我是否将`<a>`标签放置在错误的位置？

```
echo '<td width="11%" class="imagetd">';
if (empty($arrImageFile[$key])) {
    echo '&nbsp;';
} else {
    echo '<ul class="qandaul"><li><a href="previewImage.php?imgId=[$imgitem]" target="_blank">';
    echo implode("</li>\n<li></a><a href='previewImage.php?imgId=[$imgitem]' target='_blank'>", array_map(function($imgitem){
    return htmlspecialchars($imgitem);
},  $arrImageFile[$key]));
    echo '</li></ul></a>';
}
echo '</td>'; 
```

**更新：**

当前代码不起作用：

```
 <table id="tableqanda" cellpadding="0" cellspacing="0">
    <thead>
    <tr>
        <th width="11%" class="image">Image</th>
    </tr>
    </thead>
    </table>
    <div id="tableqanda_onthefly_container">
    <table id="tableqanda_onthefly" cellpadding="0" cellspacing="0">
    <tbody>
        <?php

function imageName( $imgitem ) {
    return htmlspecialchars($imgitem); //432
}

          foreach ($arrQuestionId as $key=>$question) {
        echo '<tr class="tableqandarow">'.PHP_EOL;
        echo '<td width="11%" class="imagetd">';

        if (empty($arrImageFile[$key])) {
            echo '&nbsp;';
        } else {
    echo '<ul class="qandaul"><li><a href="previewImage.php?imgId=[' . $imgitem . ']" target="_blank">'; //line 456
    echo implode('</li>\n<li></a><a href="previewImage.php?imgId=[' . $imgitem . ']" target="_blank">', imageName($arrImageFile[$key]) ); //line 457
    echo '</li></ul></a>';
        }
        echo '</td>';
        echo '</tr>'.PHP_EOL;
        }
?>
    </tbody>
    </table>
    </div> 
```

收到的错误：

警告：htmlspecialchars() 期望参数 1 是字符串，数组在第 432 行的 ... 中给出

注意：未定义的变量：imgitem in ... 第 456 行

注意：未定义的变量：imgitem in ... 第 457 行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T22:20:43.310

使用单引号将返回文字值。

```
echo '<ul class="qandaul"><li><a href="previewImage.php?imgId=[$imgitem]" target="_blank">'; 
```

改成：

```
echo '<ul class="qandaul"><li><a href="previewImage.php?imgId=[' . $imgitem . ']" target="_blank">'; 
```

**更新**

```
function imageName( $imgitem ) {
    return htmlspecialchars($imgitem);
}

echo '<td width="11%" class="imagetd">';

if( empty($arrImageFile[$key]) ) {
    echo '&nbsp;';
} else {
    echo '<ul class="qandaul"><li><a href="previewImage.php?imgId=[' . $imgitem . ']" target="_blank">'; //line 443
    echo implode('</li>\n<li></a><a href="previewImage.php?imgId=[' . $imgitem . ']" target="_blank">', imageName($arrImageFile[$key]) );
    echo '</li></ul></a>';
}

echo '</td>'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T01:08:39.007

我会将您的结构更改为这样的结构：

```
 function CreateLink($filename, $type){
 if($type == 'image'){
  return '<a href="previewimage.php?filename='.$filename.'" title="Click to view in New window" target="_blank">'.htmlspecialchars($filename).'</a>';
 }
}

......................

        $img_result = '';
        if(empty($arrImageFile[$key])){
          $img_result = '&nbsp;';
        }else{
          $img_result .=  '<ul class="qandaul">';
           if(is_array( $arrImageFile[$key] )){
            foreach($arrImageFile[$key] as $filename){
             $img_result.= '<li>' . CreateLink($filename, "image") . '</li>';
            }
           }else{
            $img_result.= CreateLink($arrImageFile[$key], "image");
           }
           $img_result.= '</ul>';
        }
        //end:procedure image

        echo '<td width="11%" class="imagetd">'.$img_result.'</td>' . PHP_EOL; 
```

# javascript - Fancybox 与 Jquery 冲突

> ID：14511855
> 
> 赞同：1
> 
> 时间：2013-01-24T22:18:51.050
> 
> 标签：javascript, jquery, fancybox

我遇到了一些冲突的 javascripts 问题。我有一个创建下拉菜单的脚本，以及一组使 fancybox 工作的脚本。但是，当两组脚本都在我的标头代码中时，它们会发生冲突，并且只有一个函数可以工作。无论我在代码中首先放置的哪个脚本都是行不通的。

我对 javascript/jquery 知之甚少，我只是在使用一些脚本，这些脚本是有人给我的，用于放入我的 HTML（我对此非常了解）。如果有人可以提供答案（并且对我来说有点愚蠢:)），那将非常有帮助。

我曾尝试使用控制台检查我的脚本中的冲突，但我有点迷茫，不确定我应该在那里查看什么。如果有人想告诉我如何正确检查控制台中的问题，那也可以，尽管我不能保证仅此一项就可以帮助我。

这是我的主页html文件头中的代码，首先是fancybox（这样，fancybox不起作用，但下拉菜单可以）：

```
<!--dropdown menu script starts here--> 
<script type="text/javascript" src="/common/js/jquery-1.8.3.min.js"></script>
<script type="text/javascript" src="/common/js/jquery.main.js"></script>
<!--dropdown menu script ends here-->   

<!--fancybox script starts here-->      
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>
<script type="text/javascript" src="/common/js/fancybox/lib/jquery-1.7.2.min.js"></script>  
<script type="text/javascript" src="/common/js/fancybox/lib/jquery.mousewheel-3.0.6.pack.js"></script>  
<script type="text/javascript" src="/common/js/fancybox/source/jquery.fancybox.js?v=2.0.6"></script>
<link rel="stylesheet" type="text/css" href="/common/js/fancybox/source/jquery.fancybox.css?v=2.0.6" media="screen" />
<link rel="stylesheet" href="/common/js/fancybox/source/helpers/jquery.fancybox-buttons.css?v=1.0.2" type="text/css" media="screen" />
<script type="text/javascript" src="/common/js/fancybox/source/helpers/jquery.fancybox-buttons.js?v=1.0.2"></script>
<script type="text/javascript" src="/common/js/fancybox/source/helpers/jquery.fancybox-media.js?v=1.0.0"></script>
<link rel="stylesheet" href="/common/js/fancybox/source/helpers/jquery.fancybox-thumbs.css?v=2.0.6" type="text/css" media="screen" />
<script type="text/javascript" src="/common/js/fancybox/source/helpers/jquery.fancybox-thumbs.js?v=2.0.6"></script>
<script type="text/javascript">
$(document).ready(function() {

    // fancybox for vimeo
    $(".vimeo").fancybox({
    width: 781,
    height: 440,
    type: 'iframe',
    fitToView : false,
    wrapCSS : 'fancybox-nav-video'
    });

    $('.fancybox').fancybox(
    {
    padding : 0,
    openEffect  : 'elastic'
    }
    );
    $(".fancybox").fancybox(
    {
    wrapCSS    : 'fancybox-custom',
    closeClick : true,
    helpers : {
    overlay : {
    css : {
    'background-color' : '#000'
    }
    },
    thumbs  : {
    width   : 50,
    height  : 50
    }
    }
    }
    );
    }
    );

    $("a[href$='.jpg'],a[href$='.jpeg'],a[href$='.png'],a[href$='.gif']").attr('rel', 'gallery').fancybox();      
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T22:21:42.450

您加载了 jQuery 库两次，版本号也略有不同（1.7 与 1.7.2）。

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>
<script type="text/javascript" src="/common/js/fancybox/lib/jquery-1.7.2.min.js"></script> 
```

正如评论中提到的，您也在其他地方加载它。一次就够了！

**编辑**

您也在此处加载 jQuery（两次）：

```
<script type="text/javascript" src="/common/js/jquery-1.8.3.min.js"></script>
<script type="text/javascript" src="/common/js/jquery.main.js"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T22:31:21.917

首先，正如您从其他人那里看到的那样，您的 JQuery 太多了。不过，Fancybox 与 JQuery 1.8 有问题，所以你要坚持使用 1.7 版。删除下拉区域顶部的 1.8 脚本，暂时删除 google 的 cdn 版本，只需使用 fancybox 附带的 1.7.2 即可。最后，将剩下的 Jquery 行移动到页面顶部，它必须首先加载。我不知道下拉代码，但 JQuery 1.7 应该没问题。不确定这是否会解决您的问题，但这是一个更清晰的起点。

# prolog - 如何从 prolog 中列表变量的所有统一选项中获取最短列表？

> ID：14511856
> 
> 赞同：4
> 
> 时间：2013-01-24T22:18:52.497
> 
> 标签：prolog, graph-theory, shortest-path

所以我试图获得树中两个节点之间的最短路径。我有一个谓词`path(Start,End,Path)`将路径统一为从开始到结束的所有可能路线。因为我想要最短的路线，所以我想获得最短的路径。我应该如何“循环”通过 Path 可以获得的所有选项？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T07:41:22.043

一个更“经典”的答案是使用一个超逻辑谓词`setof/3`,`bagof/3`和`findall/3`。`setof/3`特别是可以通过巧妙的技巧重新用于计算最小值，但根据内部变量是否存在量化`setof/3`，可能会违反直觉多次返回。`bagof/3`

假设我们使用的是经典的圣经亲子关系数据库。我们可以有：

```
father(abraham, isaac).
father(isaac, jacob).
father(jacob, joseph).
father(jacob, benjamin). 
```

等等。假设你想要父亲的名单。这是一种方式：

```
?- findall(Father, father(Father, _), Fathers).
Fathers = [abraham, isaac, jacob, jacob]. 
```

但后来你注意到`jacob`那里有两次。你想，我知道，我会用`setof/3`. 然后你得到这个：

```
?- setof(Father, father(Father, _), Fathers).
Fathers = [jacob] ;
Fathers = [abraham] ;
Fathers = [isaac] ;
Fathers = [jacob]. 
```

这里发生的事情是 Prolog 统一`_`了一些价值，而那个价值限制了结果。换句话说，`jacob`因为他有两个孩子，所以出现了两次，每个孩子都是`_`. 解决方案是使用一些特殊的语法来指定存在量化：

```
?- setof(Father, Child^father(Father, Child), Fathers).
Fathers = [abraham, isaac, jacob]. 
```

语法有一种告诉 Prolog的`Child^`方法：有一些值绑定了这个变量，但我不在乎它是什么，我不希望我的结果受到它的约束。这样我们就得到了预期的结果。

所以现在我们可以在一个地方获得 path(Start, End, Path) 的所有解决方案：

```
?- findall(Path, path(Start, End, Path), Paths). 
```

如果您在阅读时遇到困难，我们所说的是“在表达式 path(Start, End, Path) 中查找所有 Path 绑定，并将它们收集到一个新的变量 Paths 中。”

从这里开始，我们可以像对待任何其他列表一样对待它，并通过手动排序或扫描列表来找到最小值，或者两者兼而有之。

我之前提到过，我们有时可以欺骗`setof/3`进行最小化。如果您确信`path/3`将在合理的时间内终止——换句话说，`findof/3`应用到`path/3`不会产生无限循环——我们可以执行以下技巧：

```
setof((Len,Path), (path(Start, End, Path), length(Path, Len)), [(_,ShortestPath)|_]). 
```

再放纵我一秒钟。之前我提到的第一个参数`setof/3`是要查找的变量，它实际上是一个与第二个参数的每个成功结果统一的表达式。所以我们说要在表达式 (Len,Path) 中收集 Len 和 Path 变量。**注意**：这*不是*元组！这只是使用`,/2`运算符构建的表达式。我更倾向于这样写：

```
setof(Len-Path, (path(Start, End, Path), length(Path, Len)), [_-ShortestPath|_]). 
```

使用 Len-Path 或 (Len,Path) 或任何其他语法来组合 Len 和 Path 没有区别。重要的是它们以某种表达方式——任何表达方式——在一起。Prolog 不会自动进行算术运算，`-/2`也不会自动将事物“和”在一起，`,/2`所以我们可以自由地这样做。另一个重要的细节是我们首先需要长度，因为这`setof/3`是要排序的。

第三个参数看起来很糟糕，所以让我们分解一下：

```
[(_, ShortestPath)|_]   % or: [_-ShortestPath|_] 
```

这只是嵌套在模式中的模式。我们知道至少会有一个结果，所以我们在`[Head|Tail]`这里使用列表模式。只是我们不关心尾部，所以我们有`[...|_]`，所以我们将列表的第一个元素分开。然后我们知道这个列表中的每个项目都将具有`(Len, Path)`第一个子句的结构。所以我们在这里所做的是期望得到如下所示的结果：

```
[(3, <path>), (4, ...), (5, ...), ...] 
```

我们只想`<path>`摆脱第一个元素。

请注意，我们不必处理其他情况，因为如果没有解决方案，我们无论如何都会失败！

**现在**说了这么多，如果您可以访问像聚合这样的库来为您完成这项工作，那么请务必使用它。我主要认为知道一个人的选择是有启发性的。（这个`seto/3`技巧来自 Covington 等人的*Prolog Programming in Depth*一书）。

**编辑**：直接走解决方案列表

*Prolog的*优点之一——甚至可能是优点——是通过回溯，它将生成所有解决方案。这使得*编写*最小化查询变得非常简单，例如：

```
age(abraham, 103).  age(isaac, 45).
age(jacob, 88).     age(joseph, 46).

youngest(Person) :-
    age(Person, Age),
    \+ (age(_, Younger), Younger < Age). 
```

从逻辑上讲，最年轻的人是年龄为 Age 的人，因此没有其他人的年龄比 Age 更年轻。这是解决问题的一种非常可爱的方法；问题是它必须为每个事实遍历整个数据库，直到找到解决方案。可悲的是效率低下。

为了更有效地做到这一点，我们必须让自己对我们想做的事情更加明确。现在，下一个最明确且可能最清晰的解决方案是用于`findall/3`生成所有可能性，然后通过递归处理列表来选择正确的一个。代码可能如下所示：

```
youngest(Youngest) :-
    findall((Person, Age), age(Person, Age), [(FirstPerson,FirstAge)|People]),
    youngest_loop(FirstPerson, FirstAge, People, Youngest).

youngest_loop(Youngest, _, [], Youngest).
youngest_loop(CurrentPerson, CurrentMinimumAge, [(NextPerson,NextAge)|People], Youngest) :-
    (   (CurrentMinimumAge > NextAge) ->
        youngest_loop(NextPerson, NextAge, People, Youngest)
    ;   youngest_loop(CurrentPerson, CurrentMinimumAge, People, Youngest)). 
```

第一条规则只是将事实数据库转换为对列表，第二条规则是以预期的方式处理该列表，通过携带当前最小值并将每个与当前最小值进行比较以确定它是否替换它. 取决于你在做什么，这可能更有效或更少，但这是一个更大的话题。

**注意**:`setof/3`和是标准 Prolog `bagof/3`，`findall/3`应该随处可用。这与其说是一个库例程，不如说是一个内置例程。

**现在**，关于中间有一个可调用目标的奇怪行为。这里实际上没有魔法，它只是常规的统一。您可以通过编写一个看起来相似的谓词来自己证明这一点，比如说一个用数字像循环一样重复调用目标的谓词：

```
loopy(Start, Stop, Var, Goal) :-
    numlist(Start, Stop, Numbers),
    member(Var, Numbers),
    Goal.

?- loopy(1, 10, X, (write('Generating '), write(X), nl)).
Generating 1
X = 1 ;
Generating 2
X = 2 ;
...etc... 
```

通过将 Var 和 Goal 放在一起，我们能够使用 Var 建立绑定`member/2`，然后让 Prolog “证明” Goal。目标可能是任何 Prolog 表达式，因此括号中的表达式“刚刚工作”。重要的是 Var 匹配 Goal 中使用的变量，否则你会得到这个看起来很奇怪的行为：

```
?- loopy(1, 10, Y, (write('Generating '), write(X), nl)).
Generating _G811
Y = 1 ;
Generating _G811
Y = 2 ;
...etc... 
```

希望这能回答你的问题！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T06:53:58.257

您可以使用库（[聚合](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%27A.1%27,swi%28%27/doc/Manual/aggregate.html%27%29%29)）。

```
shorter_path(Start, End, MinPath) :-
   aggregate(min(Len, Path),
     (path(Start, End, Path), length(Path, Len)),
     min(Len, MinPath)). 
```

# c++ - 迭代时擦除多图中的元素

> ID：14511860
> 
> 赞同：13
> 
> 时间：2013-01-24T22:19:06.773
> 
> 标签：c++, iterator, multimap

我正在写一个节点寻路算法。我需要运行一个多图并在某些条件下从中删除元素，但要继续遍历多图。下面是我到目前为止的代码，它似乎大部分时间都可以工作，但是在执行 nct_it++ 时偶尔会出错。在递增迭代器之前从表中擦除迭代器指针是否安全？

```
std::list<SinkSourceNodeConn>::iterator it;
std::multimap<SysNode*, SysNode*>::iterator nct_it;
SysNode* found_node = NULL;
nct_it = node_conn_table.begin();
while(nct_it != node_conn_table.end()) {

    // Find the node in the ever shrinking node connection table...
    if(nct_it->first == parent_node)
        found_node = nct_it->second;

    // Remove the table entry if we have found a node
    if(found_node) {
        // Search for the node in the expanded list. If it's not found, add it.
        bool found_the_node = false;
        for(it = m_sink_source_nodes_.begin(); it != m_sink_source_nodes_.end(); it++) {
            if(it->sink_source == sink_source && it->node == found_node)
                found_the_node = true;
        }
        if(!found_the_node) {
            recursion_list.push_back(found_node);
            recursion_list.unique();
            SinkSourceNodeConn ssnc;
            ssnc.node = found_node;
            ssnc.sink_source = sink_source;
            m_sink_source_nodes_.push_back(ssnc);
            if(found_node->GetPotential() < sink_source->GetPotential())
                found_node->SetPotential(sink_source->GetPotential());
        }
        found_node = NULL; // Unset the found node...
        node_conn_table.erase(nct_it);
        nct_it++;
    } else
        nct_it++;

} 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-24T22:30:51.137

> 在递增迭代器之前从表中擦除迭代器指针是否安全？

不，`erase`会使迭代器无效，之后你不应该增加它。

要正确执行此操作，请使用`erase`- 最后一个删除元素之后的迭代器的返回值：

```
std::multimap<int, int> m;

for (auto it = m.begin(); it != m.end(); ) {
   if (condition)
       it = m.erase(it);
   else
       ++it;
} 
```

在 C++03 中，`erase`不返回任何内容，因此您必须手动执行此操作，方法是保存迭代器的副本并在擦除原始副本之前将其递增：

```
std::multimap<int, int> m;
typedef std::multimap<int, int>::iterator Iter;¸

for (Iter it = m.begin(); it != m.end(); ) {
   if ( /* some condition */ ) {
       Iter save = it;
       ++save;
       m.erase(it);
       it = save;
   } else
       ++it;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-30T20:27:40.840

这不是更好吗？

```
std::multimap<int, int> m;
typedef std::multimap<int, int>::iterator Iter;¸

for (Iter it = m.begin(); it != m.end(); ) {
    if ( /* some condition */ ) {
        Iter save = it;
        ++it;
        m.erase(save);
    } else
       ++it;
} 
```

# iphone - 当 UITextField 成为FirstResponder 时得到通知

> ID：14511862
> 
> 赞同：28
> 
> 时间：2013-01-24T22:19:09.547
> 
> 标签：iphone, ios, uitextfield, first-responder, becomefirstresponder

我怎样才能得到通知`UITextField` `becomeFirstResponder`？

我可以通过以下方式查看喜欢`isFirstResponder`或设置成为第一响应者`becomeFirstResponder`

当用户将此文本字段设为第一响应者时，我想得到通知或处理事件。

谢谢。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-01-24T22:21:14.807

您将需要成为文本字段的委托并实现此可选委托方法：

```
- (void)textFieldDidBeginEditing:(UITextField *)textField; 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-24T23:09:31.607

除了实现`UITextFieldDelegate`方法之外`textFieldDidBeginEditing:`，您还可以注册`UITextFieldTextDidBeginEditingNotification`通知。

通知方法可以是：

```
- (void)someTextFieldDidBeginEditing:(NSNotification *)notification {
    UITextField *textField = (UITextField *)notification.object;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-02T02:32:25.070

代表绝对是要走的路。不幸的是，在我的情况下我不能使用它，因为控制器是我的 UITextField 子类的代表，我需要修改它的占位符文本。相反，我覆盖了方法`- (BOOL)canBecomeFirstResponder;`& `- (BOOL)resignFirstResponder;`。一定要打电话给超级。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-03-05T22:14:53.633

对于 OSX，您应该注意在依赖`NSControlTextDidBeginEditingNotification`.

当您开始编辑时，按一些按钮，然后继续编辑文本字段，当您继续编辑时，您将没有一秒钟的`NSControlTextDidBeginEditingNotification`时间。

如果此行为导致问题，`UITextFieldTextDidChangeNotification`则可能是一种替代方法。

# php - utf-8 的 preg_match 规则

> ID：14511866
> 
> 赞同：2
> 
> 时间：2013-01-24T22:19:35.180
> 
> 标签：php, utf-8, preg-match

我必须为 full_name 字段使用什么 pregmach 规则？
我希望用户只输入字符而不是 html 或 php 代码值以及
我可以使用的 3 到 11 个字符之间的空格：

```
<?php
if (preg_match("%^[A-Za-z0-9-_]{3,10}$%", $_REQUEST['usr'])) {
//do something like 
mysql_query('insert into user(name) values(this field)');
//damn what is this for: It does not meet our quality standards.!!!
//i must insert more code? i dont have ! let me go !
}
else{
//do something else!
die('get out !:D');
}
?> 
```

但是这个用户不能输入像“مسیحارسطوئی”
这样的UTF-8字符，那么我必须对UTF-8使用什么preg_match规则？
或者我可以使用什么其他代码，比如 preg_match ？
我希望用户可以
在 3 到 10 个字符之间插入不是 <>{}[] 或 $%^&* 的字符！！！谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T23:16:09.960

像这样使用`u`修饰符：

```
preg_match('/pattern_with_unicode_symbols/u'); 
```

此修饰符打开与 Perl 不兼容的 PCRE 的附加功能。模式字符串被视为 UTF-8。

并使用 "\x{2460}" 语法定义 utf-8 字符

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T23:24:43.870

这将给出“0”，因为 cos`مسیح ارسطوئی`不仅包含 3-10 个字符；

```
$x = preg_match('~^([\pL]{3,10})$~u', 'مسیح ارسطوئی');
echo $x ? 1 : 0; 
```

但这会在您的情况下给出结果；

```
preg_match('~([\pL]+)~u', 'مسیح ارسطوئی', $m);
print_r($m);

Array
(
    [0] => مسیح
    [1] => مسیح
) 
```

在此处查看更多详细信息：[PHP：Unicode 字符属性](http://php.net/manual/en/regexp.reference.unicode.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-30T09:04:33.700

```
preg_match_all('/#(\pL*)/u', 'this is #مثال text', $matches);
print_r($matches); 
```

'u', '\pL'：字符串被视为 UTF-8。

# html - 如何在 HTML/CSS 中显示树？嵌套的左浮动 div 和换行

> ID：14511872
> 
> 赞同：0
> 
> 时间：2013-01-24T22:20:02.060
> 
> 标签：html, tree, css-float, css

在 HTML/CSS 中，我想以以下形式显示数据树：根节点位于左侧。父节点位于子节点的左侧，第一个子节点始终与父节点位于同一行。兄弟节点位于下面的行中。

请参阅此示例。这些线在这里只是说明性的，以了解这些关系。

```
1 - 1.1 - 1.1.1
  \     ` 1.1.2
   `1.2 - 1.2.1
2 - 2.1
   `2.2 
```

我想让子节点与其父节点连接，这样，当我拖放父节点时，所有连接的子节点也会移动。这就是我选择嵌套方法的原因。

**我的做法：**

```
<div><p> some text </p><div> recursively add the children here </div></div> 
```

我这样添加的每个节点

```
$(document.createElement('div'))
    .appendTo(parent)
    .css('overflow', 'auto')
    .append($(document.createElement('p'))
        .css('float', 'left')
        .html(some text)
    .append($(document.createElement('div'))
        .css('overflow', 'auto')); 
```

**我对这种方法的问题：** 当树比容器大时，它会换行到下一行。但是我想要溢出的效果：隐藏。容器上的这个 css 标签对左浮动项目没有影响。

**jsFiddle：** 参见这个 jsFiddle 的例子： http: [//jsfiddle.net/Afasv/8/](http://jsfiddle.net/Afasv/8/) 第一个是树在一个太紧的容器中的样子，第二个它有足够的空间，第三个我正在使用hack 我将树放在比外部容器大的 div 中。

任何解决方案的想法将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T22:43:11.243

以及评论的其他人，我不确定您的问题是什么。我的猜测是您正在寻找`display: inline-block`and `white-space: nowrap`。这样，无论可用空间如何，列表都只会在您希望它们出现的位置有换行符。

如果你真的想要`overflow: hidden`你仍然可以将它添加到第一级 ol. 尽管大部分时间隐藏内容并不符合用户的最佳利益。（`overflow: auto`也许？）

[http://jsfiddle.net/QGkKD/1/](http://jsfiddle.net/QGkKD/1/)

你真的应该使用列表来标记列表。

还有一件事。如果您对 HTML 和 CSS 有疑问，那么显示任何 Javascript 代码实际上是没有用的。它只是掩盖了实际问题

# haskell - Haskell 列表迭代

> ID：14511874
> 
> 赞同：1
> 
> 时间：2013-01-24T22:20:05.653
> 
> 标签：haskell, functional-programming

我有一个列表`[a,b,c,d,e]`和一个初始值`u`（显然`a,b,c,d,e`代表值）。我想将一个函数应用于`e`and `u`，比如说`f(e,u)`。然后我想应用该函数`f(d, f(e, u))`，然后`f(c, f(d, f(e, u)))`等等。我看过“迭代”，但我无法弄清楚如何将迭代应用到列表中的每个元素。

我的列表：

```
a = take 101 (0 : concat [[(1%1),(2*k%1),(1%1)] | k <- [1..40]]) 
```

我将如何在 Haskell 中实现这一点？

谢谢，山姆。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T22:29:25.023

你想要`foldr :: (a -> b -> b) -> b -> [a] -> b`。这是列表数据结构的一般折叠。将其视为用两个提供的参数替换列表中的所有`(:)`和构造函数。`[]`

例如，如果我们要对`[1, 2, 3]`构造为的列表的数字求和`1 : (2 : (3 : []))`，我们可以找到 and 的替代*品*，就像and一样，即。因此，我们可以实现as 。`(:)``[]``+``0``1 + (2 + (3 + 0))``sum :: Num a => [a] -> a``foldr (+) 0`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T22:26:54.153

您描述的功能称为“[折叠](http://en.wikipedia.org/wiki/Fold_%28higher-order_function%29)”，在这种情况下为“右折叠”，因为它是从右向左应用的。它在 Prelude 中作为[`foldr`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#v%3afoldr)函数实现。

例如，如果我们采用`(++)`连接两个字符串的函数，并将其应用于初始元素和字符串列表：

```
Prelude> foldr (++) "u" ["a", "b", "c", "d", "e"]
"abcdeu" 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-26T00:40:46.250

干得好，你自己发现`foldr`的！（我希望这听起来不是嘲讽之类的，这不是那个意思；大多数人都觉得褶皱不自然，并且必须非常努力地思考才能理解它！）

我建议你处理这些情况的方法是尝试自己编写你想要的函数，并找出类型，然后在[Hoogle](http://www.haskell.org/hoogle/)中搜索该类型以查看是否已经存在这样的函数。

在这种情况下，您可以尝试以这种方式编写函数。我们称之为`foo`：

```
-- If we see an empty list the result should be u
foo u f [] = u
-- If we're given a a non-empty list we recurse down the list to get a partial 
-- result, then "add on" to it:
foo u f (x:xs) = f x (foo u f xs) 
```

一旦你定义了这个函数，你可以加载它`ghci`并使用它的`:t`命令来找到它的类型：

```
*Main> :load "../src/scratch.hs"
[1 of 1] Compiling Main             ( ../src/scratch.hs, interpreted )
Ok, modules loaded: Main.
*Main> :t foo
foo :: t1 -> (t -> t1 -> t1) -> [t] -> t1 
```

现在我们可以[在 Hoogle 中搜索 type`t1 -> (t -> t1 -> t1) -> [t] -> t1`](http://www.haskell.org/hoogle/?hoogle=t1+-%3E+%28t+-%3E+t1+-%3E+t1%29+-%3E+%5Bt%5D+-%3E+t1)。最上面的结果是`foldr`，它的类型是`(a -> b -> b) -> b -> [a] -> b`- 相同，`foo`但变量重命名并且参数顺序颠倒了。搜索结果还告诉我们该函数在`Prelude`模块中——Haskell 默认加载的模块。您可以单击结果以在文档中找到[其定义，该文档](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#v%3afoldr)使用以下等式对其进行了描述：

```
foldr f z [x1, x2, ..., xn] == x1 `f` (x2 `f` ... (xn `f` z)...) 
```

他们将该`f`函数用作中缀运算符，我希望这不会让您感到困惑，但以防万一我们可以将其重写为：

```
foldr f z [x1, x2, ..., xn] == f x1 (f x2 ... (f xn z) ...) 
```

这正是您想要的行为。

* * *

为什么我在`foldr`上面做了这么大的事情？因为`foldr`实际上是拆分列表的最基本功能。以这种方式查看类型：

```
foldr :: (a -> b -> b)  -- ^ What to do with a list node
      -> b              -- ^ What to do with the empty list
      -> [a]            -- ^ A list
      -> b              -- ^ The final result of "taking the list apart." 
```

事实证明，很多列表函数可以很容易地写成`foldr`：

```
map f = foldr step []
    where step x rest = (f x):rest

-- | Append two lists
xs (++) ys = foldr (:) ys xs

-- | Filter a list, keeping only elements that satisfy the predicate.
filter pred = foldr step []
    where step x rest | pred x    = x:rest
                      | otherwise = rest

-- | Find the first element of a list that satisfies the predicate.
find pred = foldr step Nothing
    where step x r | pred x    = Just x
                   | otherwise = r 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-24T22:27:43.473

右折看起来不错。

```
foo :: (a -> b -> b) -> b -> [a] -> b
foo f u xs = foldr (\x acc -> f x acc) u xs 
```

我发现在学习一门语言时，人们经常会问“有没有更简单的方法可以做到这一点？” 答案几乎总是肯定的。

# php - 从 DIV 加载 PHP 脚本

> ID：14511876
> 
> 赞同：0
> 
> 时间：2013-01-24T22:20:12.067
> 
> 标签：php, javascript, html

我可以帮忙从 DIV 调用加载 PHP 文件吗？

这是我的代码：

```
<html>
<head>

</head>
<body>
    <script class="code" type="text/javascript">

        $("#LoadPHP").load("fb_marketing.php");

    </script>
    <div id="LoadPHP">Load PHP Here</div>
</body>
</html> 
```

如果你不能告诉我要做什么，我会解释它。基本上，当引用网页上的 DIV 时，我想加载“fb_marketing.php”文件。

上面的代码不起作用。我可以请一些帮助让它工作吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T22:23:08.610

我相信你错过了你的 jQuery 库。为了调用作为`load`jQuery 库一部分的函数，您需要将该库包含在`head`.

`$.ready(function() { //code here });`此外，我会通过将代码包装在一个方法中来等到整个 DOM 被首先加载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T22:24:24.540

这是你想要的？

```
<div id="LoadPHP">
<?php
echo "this is where your php would go";
?>
</div> 
```

或者

```
<div id="LoadPHP">
<?php
include 'testPHP.php';
?>    
</div> 
```

# javascript - 如何从下拉菜单中获取一个元素，将其与存储的变量相关联，并将该变量写入网页的另一个位置？

> ID：14511880
> 
> 赞同：0
> 
> 时间：2013-01-24T22:20:17.117
> 
> 标签：javascript, javascript-events

正如问题中所说，我试图从下拉菜单中获取一个元素并将其与存储的变量相关联，然后使用 if 语句将变量放在网页上的另一个位置。我在下面的示例有一个包含月份的下拉列表，我想使用“getElementByID”发布天数。什么是使这项工作的好方法？ARRGH 我是一个完全的新手......任何帮助将不胜感激。这是我的 html/javascript，不包括 CSS 好坏-

```
<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<title>JS Bin</title>
   <script language="javascript">
        function displayDaysInTheMonth()
        {
            var  thirty = document.monthForm.30
            var thirtyone = document.monthForm.31
            var twentyeight = document.monthForm.28
            if (thirty == 'true' )
            {
                document.monthForm.getElementById('a').innerHTML = "has 30 days";
                return;
            }
            else if (thirtyone == 'true' )
            {
                document.monthForm.getElementById('b').innerHTML = "has 31 days";
                return;
            }
            else if (twentyeight == 'true' )
            {
                document.monthForm.getElementById('c').innerHTML = "has 28 days";
                return;
            }

        }
  </script>  
</head>
<body>
<div class='container'>
        <h2> David Platt's</h2>
        <h2>Monthly Day Count</h2>
        <form name='monthForm'>
            <select name='months' onchange='displayDaysInTheMonth();' style='float: left; margin: 0 10px 10px 15px;'>
                <option name = '31'>January</option>
                <option name = '28'>February</option>
                <option name = '31'>March</option>
                <option name = '30'>April</option>
                <option name = '31'>May</option>
                <option name = '30'>June</option>
                <option name = '31'>July</option>
                <option name = '31'>August</option>
                <option name = '30'>September</option>
                <option name = '31'>October</option>
                <option name = '30' >November</option>
                <option name = '31'>December </option>
            </select>
            <div name='result' class='result' id = 'a' id = 'b' id = 'c' >has # days.</div>
            <div class='clear'></div>
        </form>
    </div>  
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T13:31:15.090

实际上，我找到了一种仅使用 javascript 的方法，它可以与除日历日期之外的其他数字集相关：

```
<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<title>JS Bin</title>
   <script language="javascript">
        function displayDaysInTheMonth()
        {
        var numberOfDays = document.monthForm.months.value;
    var element = document.getElementById('a')
    element.innerHTML= "has " + numberOfDays + " days";
        }
  </script>  
</head>
<body>
<div class='container'>
        <h2> David Platt's</h2>
        <h2>Monthly Day Count</h2>
        <form name='monthForm'>
            <select name='months' onchange='displayDaysInTheMonth();' style='float: left; margin: 0 10px 10px 15px;'>
                <option value = '31'>January</option>
                <option value = '28'>February</option>
                <option value = '31'>March</option>
                <option value= '30'>April</option>
                <option value = '31'>May</option>
                <option value = '30'>June</option>
                <option value = '31'>July</option>
                <option value = '31'>August</option>
                <option value = '30'>September</option>
                <option value = '31'>October</option>
                <option value = '30' >November</option>
                <option value = '31'>December </option>
            </select>
            <div name='result' class='result' id = 'a' id = 'b' id = 'c' >has # days.</div>
            <div class='clear'></div>
        </form>
    </div>  
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T22:28:36.650

您可以使用[jquery API](http://jquery.com/)来执行此操作：

要获取下拉值并将 Div 值设置为选定值，请执行此操作

```
function displayDaysInTheMonth()
{
       var days = $('#months option:selected').val(); //gets dropdown value
       $("#a").html("has " + days + " days"); //sets div value here
} 
```

将您的 div 更改为

```
<div name='result' class='result' id = 'a'>has # days.</div> 
```

将下拉更改为

```
<select name='months' onchange='displayDaysInTheMonth();' 
  style='float: left; margin: 0 10px 10px 15px;'>
    <option value='31'>January</option>
    <option value='28'>February</option>
    <option value='31'>March</option>
    <option value='30'>April</option>
    <option value='31'>May</option>
    <option value='30'>June</option>
    <option value='31'>July</option>
    <option value='31'>August</option>
    <option value='30'>September</option>
    <option value='31'>October</option>
    <option value='30' >November</option>
    <option value='31'>December </option>
</select> 
```

# css - Safari 边框颜色悬停错误

> ID：14511881
> 
> 赞同：4
> 
> 时间：2013-01-24T22:20:24.653
> 
> 标签：css, safari, hover, border-color

因此，当您将鼠标悬停在 Safari（版本 6.0.2）中的某个元素上时，我目前面临一个问题，该元素上的边框颜色似乎有点奇怪。为了让您了解我所做的事情，该元素只是一个简单的列表元素，除了左侧之外，它的所有边都具有相同的边框颜色。

这是一个例子： [http ://cl.ly/MPkG](http://cl.ly/MPkG)

悬停时，我向元素添加了一个简单的 CSS3 缩放过渡，并将边框颜色更改为较深的灰色阴影（不包括左侧）。

这是一个真正粗略的小提琴来显示这个问题：http: [//jsfiddle.net/dannykeane/N4jF5/](http://jsfiddle.net/dannykeane/N4jF5/)

这在除 Safari（版本 6.0.2）之外的所有现代浏览器中都可以正常工作。我也尝试将 a 添加`backface-visibility:hidden;`到此元素，但它的行为仍然相同。

任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:41:30.340

这*可能是*Safari 中的一个未知错误，尽管该错误很有意义，因为您试图**在左侧放置**比框的其余边更厚的边框。有明确的出血是可见的`border-radius`。如果四面的厚度相等，即使有边界半径，也不会有任何溢出的边界。

您可能还会注意到，如果您调整左侧的边框粗细，出血将不可见，除非您放大/缩小页面。也许调整值也无济于事，因为这将是不稳定的并且是临时解决方案。

我们无法对浏览器特定的错误做任何事情，但有一种解决方法。我们可以将较粗的边框与围绕您的内容的下一个 div 分开。并且不要忘记删除父 div 上留下的 1px 边框：

```
border-left: 0; 
```

像这个基本的小提琴：http: [//jsfiddle.net/bgYhQ/](http://jsfiddle.net/bgYhQ/)

# unicode - 对 ASCII 范围之外的字符进行编码时，UTF-16 或 UTF-32 是否具有不可打印的 ASCII 范围内的字节值？

> ID：14511884
> 
> 赞同：1
> 
> 时间：2013-01-24T22:20:35.160
> 
> 标签：unicode

在使用 Unicode 编码方案编码的文本的原始字节流中查找不可打印的 ASCII 字符时，我希望采取一些捷径。

例如，我知道在 UTF-8 编码中，如果一个字符使用多个字节编码，每个字节将始终 => 128，因此如果一个字节的值 < 32 我知道它是一个不可打印的 ASCII 字符。我想知道是否可以使用 UTF-16 和 UTF-32 采取类似的捷径。

我知道 UTF-16 和 UTF-32 对编码的 ASCII 字符使用零填充，但想知道非 ASCII 范围字符中的单个字节是否可能小于 32。

基本上我想知道我是否可以可靠地扫描低于 32 的 ASCII 字符的字节（就像使用 UTF-8 一样），而不必将流解码为字符。

作为参考，我正在寻找换行符 (10, 13) 以将文本索引到行中，并寻找最佳方法，即不解码为字符。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T22:26:20.890

UTF-32 是一种简单明了的编码。每个字符直接由其 32 位代码点表示。没有像 UTF-8 那样的规定，即永远不会在非 ASCII 字符中间找到 ASCII 字节。当“编码”为 UTF-32 时，任何形式`\uxxxxxx10`为 、`\uxxxx10xx`、`\uxx10xxxx`或的代码点都`\u10xxxxxx`将包含该字节。`0x10`

但是，由于每个字符始终是完整的 32 位，因此您*可以*读取 4 字节块中的流并查看 4 字节值`0x00000010`或`0x00000013`.

# c# - 将鼠标处理程序添加到 c# 上的自定义对象类

> ID：14511885
> 
> 赞同：0
> 
> 时间：2013-01-24T22:20:35.933
> 
> 标签：c#, winforms, mouseevent

我有一个**WindowsForm**应用程序。在这个应用程序中，我画了一些圆圈，所以我有一个名为**“Circle”**的自定义类 ，它知道自己画（在这个类中有一个方法**public void draw(Graphics g)**）

现在当表单正在加载并且我画了一些圆圈时，我想让用户能够拖动圆圈..

所以我的问题是如何将 mouseHandler 添加到自定义类**Circle**？我认为这个类应该有它自己的 mouseHandler 但我不明白该怎么做..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T22:46:32.060

让您的 Circle 对象直接处理鼠标事件需要它从 Control 类派生。那将是一个很大的错误，Control 类有几个不受欢迎的属性，使其不适合形状 doodah。从它是一个矩形窗口开始，并且不能很好地支持重叠。这些东西是可以修复的，但它是相当痛苦的，它只会给已经非常昂贵的类增加昂贵的开销。

相反，让它只是一个类。用一个方法`bool HitTest(Point pos)`。和一个方法`void Move(Size dist)`。并创建另一个名为 ShapeCollection 的类来存储形状列表。同样使用 Paint 和 HitTest 方法，它们只是迭代形状的集合。

您现在可以轻松实现表单的 Paint 事件，调用 ShapeCollection.Paint 方法。您可以实现 MouseDown 事件，调用 HitTest 并记住返回 true 的形状的索引。并实现 MouseMove 事件，在所选形状上调用 Move 并调用 Invalidate 以便形状将自身绘制在新位置。

在 WPF 中更容易上手，它没有与 Control 类相同的问题，并且内置了形状支持。

# android - ImageButton 忽略将父级与源图像对齐

> ID：14511902
> 
> 赞同：0
> 
> 时间：2013-01-24T22:21:50.673
> 
> 标签：android, user-interface

我希望我的图像按钮保持它们的纵横比，所以我关注了[https://stackoverflow.com/a/7966838/135135](https://stackoverflow.com/a/7966838/135135)

并将背景设置为空，然后将图像按钮源图像设置为图像按钮。现在的问题是图像按钮不再像以前那样与父级对齐。如何使它再次与父右边缘对齐？

```
 ImageButton bt = new ImageButton(this);        
        bt.setImageResource(R.drawable.next_button);
        bt.setBackgroundDrawable(null); 

        bt.setAdjustViewBounds(true);
        RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
        params.addRule(RelativeLayout.ALIGN_PARENT_RIGHT, RelativeLayout.TRUE);
        params.addRule(RelativeLayout.CENTER_VERTICAL, RelativeLayout.TRUE);

        bt.setLayoutParams(params);        
        return bt; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T20:48:18.320

我最终只是硬编码了 dp 中按钮的尺寸。我搜索了一堆，除了这个之外找不到任何有好的解决方案的人。

# database - 票务应用程序的数据库系统或 .CSV 文件？

> ID：14511903
> 
> 赞同：0
> 
> 时间：2013-01-24T22:21:51.557
> 
> 标签：database, csv

我正在尝试为不同的活动或客户构建一个售票应用程序。除了了解我自己研究过的 DBMS 和 .csv 文件的工作原理之外，我不知道这些工具是如何在现实世界中实际部署以创建这样的应用程序的。假设我想为不同的事件生成几批票（可能有不同的格式）：例如 2000 张票、3000 张票、5000 张等。我的问题是：

我是否为每批工单创建一个 .csv 文件，然后将它们存储在数据库表的工单列中？

或者

我应该创建一个门票表（或表格，具体取决于格式），然后将门票的每个字段（例如：ticket-no、gate-no、seat-no 等）存储到相应的 table-column 中吗？

我相信这两个系统都会起作用，但我更关心在现实世界中的有效性和效率方面的最佳实践是什么。这些只是我想到的想法，但我会很感激任何关于我可能遗漏的指针。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T22:23:47.437

首先，我建议在您的代码中写入接口。这样你就可以有一个 CSV 实现，一个数据库实现，任何你想要的。您的代码总是使用接口读取/写入。

其次，我建议将*所有内容*存储在数据库中，而不将任何内容存储在 CSV 文件中。如果您以后需要 CSV 文件，您可以简单地将它们从数据库中导出。您可以直接从表中或使用查询来执行此操作。

# browser - 读取 USB 数据并在浏览器中显示

> ID：14511908
> 
> 赞同：0
> 
> 时间：2013-01-24T22:22:20.843
> 
> 标签：browser, cross-browser, usb, usbserial

我们有一个 USB 秤，它可以发送非常简单的二进制数据来表示其重量。

我们希望在 Web 表单上自动填充这些数据。将字节转换为十进制数需要做一些工作。

哪种编程语言最容易实现？我们将需要一个基于客户端的解决方案，该解决方案最好与许多浏览器兼容。

我们在使用技术方面非常灵活。我在想一个java小程序可能是最简单的？以前有人尝试过这样的事情吗？

谢谢，加雷斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T22:27:21.230

如果您想通过浏览器访问低级 API，您应该实现将在浏览器上下文中运行的 BHO 或 ActiveX，并且可以对 USB 设备等 Windows API 进行低级访问。

总的来说，您需要浏览器扩展，但实现和使用方法取决于您。

我建议你使用 ActiveX，但不要忘记它只是在 IE 中运行。您可以创建一个可以与 Firefox 扩展、chrome 扩展甚至 IE 扩展（BHO 或 ActiveX）通信的 Windows 应用程序

您可以选择，如果您想了解更多详细信息，可以在这里询问。

# c++ - 在编译时在浮点和双精度之间切换

> ID：14511910
> 
> 赞同：3
> 
> 时间：2013-01-24T22:22:28.113
> 
> 标签：c++, floating-point-precision, double-precision

如果我想在编译时在浮点和双精度之间切换，我应该在哪里查看。就像，如果用户想要浮点数而不是双精度，我如何保持这种灵活性？换句话说，我应该如何定义一个可以有条件地为浮点或双精度的变量？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-24T22:25:51.597

如果可以在编译时进行切换，那么简单的`typedef`做法是：

```
#ifdef USE_DOUBLES
typedef double user_data_t;
#else
typedef float user_data_t;
#endif 
```

`user_data_t`在您的代码中使用，并在编译时设置`USE_DOUBLES`是否需要：`doubles`

```
g++ -DUSE_DOUBLES=1 myprogram.cpp 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T22:25:04.920

在不确切知道您打算如何使用数据的情况下，很难推荐正确的解决方案。

看看**联合**日期类型。

[http://msdn.microsoft.com/en-us/library/5dxy4b7b(v=VS.80).aspx](http://msdn.microsoft.com/en-us/library/5dxy4b7b(v=VS.80).aspx)

**根据使用情况，**模板也是一个可行的选择。****

 **[http://msdn.microsoft.com/en-us/library/y097fkab.aspx](http://msdn.microsoft.com/en-us/library/y097fkab.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T22:59:05.353

我不想`#define`在我的代码中包含 s。

我将有两个不同的标头和两个不同`typedef`的 s，并允许构建选项选择包含哪个标头。**

# ios - 从超类按钮以编程方式执行 Segue

> ID：14511917
> 
> 赞同：2
> 
> 时间：2013-01-24T22:23:05.897
> 
> 标签：ios, uinavigationcontroller, uibutton, uistoryboard, superclass

所有，我的应用程序要求我在不同的视图控制器/屏幕上使用自定义按钮。由于我不想在情节提要上多次创建它们，然后多次进行任何所需的修改，我创建了一个在 viewdidload 中有按钮的超类，然后我在不同的视图控制器中继承了这个类。现在，我想从这些按钮执行转场。我希望它工作的方式是每个按钮都将转到同一个控制器/视图，而不管它点击的视图是什么。现在，我知道就编程方式的 segues 而言，我有两个选择，performeguewithidentifier 和 pushviewController。我不完全确定这两种方法在我的情况下如何工作？此刻，我 我试图通过从情节提要中的超类控制器创建一个segue来使用performeguewithidentifier，但随后编译，然后当我点击按钮时，我的应用程序崩溃，给我一个无法识别的选择器发送到实例异常。我不能真正使用 pushviewController 选项，因为这个超类控制器本身不是我的导航控制器的一部分。知道如何做我的按钮 segues 以便它们被继承给其他控制器吗？

为了完全澄清情况，还有一些其他细节：我的超类在故事板上确实有一个相应的视图控制器，但这不是我的导航控制器堆栈的一部分，因此没有连接到其他任何东西。我这样做的原因是因为我的超类只是为了继承按钮，它实际上没有任何其他目的。继承它的所有其他视图控制器都在故事板中，并且是导航堆栈的一部分。我为按钮选择这条路线的原因是因为我将它们作为我应用程序中每个屏幕的一部分，并且我不想在情节提要中多次创建它们，因为那样我想做的任何更改都必须进行所有控制器。使用超类控制器，我只需要更改一次。我不是 不确定如何继承 UIButton 然后使用 segues。这是我应该考虑的选择吗？

# ruby-on-rails - 如何在集合中更新或创建对象

> ID：14511918
> 
> 赞同：0
> 
> 时间：2013-01-24T22:23:06.970
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2

我有一个`User`可以存储答案和课程列表的课程

```
 has_many :answers
  has_many :lessons, :through => :answers 
```

答案类：

```
class Answer < ActiveRecord::Base
    belongs_to :user
    belongs_to :lesson

    attr_accessible :finished, :current_solution
end 
```

每次用户学习课程时，我都想存储他的最新答案。我试着这样做：

```
if current_user
  @lesson = Lesson.find(params[:id])
  @code = request.request_parameters["code"]
  @user = User.find(session[:user_id])
  begin     # retrieve an old answer, if possible
    @answer = Answer.find [params[:id], session[:user_id]]
  rescue
  end
  if not @answer  # else create a new one
    @answer = Answer.new
    @answer.lesson_id = @lesson.id
    @answer.user_id = @user.id
    @user.answers << @answer  # store it in the user's answers list
  end

  @validation_passed = @lesson.validate( @code ) 
  @answer.finished = @validation_passed # update answer
  @answer.current_solution = @code 
```

数据库架构：

```
 create_table "answers", :id => false, :force => true do |t|
    t.integer "lesson_id",        :null => false
    t.integer "user_id",          :null => false
    t.string  "finished"
    t.string  "current_solution"
  end

  add_index "answers", ["lesson_id", "user_id"], :name => "index_answers_on_lesson_id_and_user_id", :unique => true 
```

我得到一个异常`columns lesson_id, user_id are not unique`，或者`columns lesson_id, user_id are not unique: INSERT INTO "answers" ("current_solution", "finished", "lesson_id", "user_id") VALUES (?, ?, ?, ?)`，但我不明白为什么会发生这种情况，因为我只创建一个新对象，如果找不到相应坐标的对象..

如果有人能告诉我我做错了什么，我会很高兴。

提前致谢！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T22:36:03.960

您查找`Answer`from 参数的查询不正确 - 它应该是：

```
@answer = Answer.find_by_lesson_id_and_user_id(@lesson.id, @user.id) 
```

这样做时，您也可以跳过`begin`--块。`rescue``end`

如果您搜索关联，您可以进一步简化这一点：

```
@answer = @user.answers.where(:lesson_id => @lesson).first 
```

`Answer`此外，如果这是常见的查找，您可以向类添加范围：

```
class Answer < ActiveRecord::Base
  scope :for_lesson, lambda{ |lesson| where(:lesson_id => lesson) }
end 
```

然后您可以将其简化为：

```
@answer = @user.answers.for_lesson(@lesson).first 
```

# mysql - 从同一张表中选择计数

> ID：14511923
> 
> 赞同：1
> 
> 时间：2013-01-24T22:23:32.500
> 
> 标签：mysql

我有一个任务表，每个任务都有一`task_id`列和一`parent_id`列。
我正在尝试构建一个查询，该查询返回每个，它在父列中显示`task_id`的次数。 我试过这个查询： `id``id`

```
SELECT
     task_id, parent_id, 
     (SELECT COUNT( * ) 
      FROM  `tasks` 
      WHERE parent_id = task_id) AS count_parents 
FROM tasks 
```

此查询无效。我希望这个问题足够清楚。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T22:29:24.007

如果您想包括所有任务，无论它们是否是父级，

```
select tasks.task_id,count(parent.parent_id)
from tasks
left join tasks parent on tasks.task_id=parent.parent_id
group by tasks.task_id; 
```

如果您只想要作为父母的任务，那是微不足道的：

```
select parent_id,count(*)
from tasks
group by parent_id; 
```

（后者可能需要一个`where parent_id is not null`或这样的，这取决于你如何表示没有父任务的任务）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T22:26:28.160

看起来你想要这个：

```
SELECT task_id, 
  parent_id, 
  COUNT(parent_id) AS count_parents
FROM tasks
GROUP BY task_id, parent_id 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T22:28:29.577

尝试这个：

```
select task_id,parent_id, count(parent_id) as count_parents 
from `tasks` 
group by task_id,parent_id; 
```

在这种情况下，您需要一个分组依据，希望对您有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T22:27:15.717

```
SELECT t2.task_id, t2.parent_id, 
     (SELECT COUNT( * ) FROM  `tasks` t1 
         WHERE t1.parent_id = t2.task_id) AS count_parents 
 FROM tasks t2 
```

我认为从你的问题

# iphone - NSMutable Array 不更新 UITextView

> ID：14511925
> 
> 赞同：1
> 
> 时间：2013-01-24T22:23:38.683
> 
> 标签：iphone, ios6, nsmutablearray

我正在尝试使用 NSMutable 数组更新 UITextview 文本，但 String1 没有使用 String2、String3 等进行更新。我在编码时做错了什么。

```
Array = [[NSMutableArray alloc]initWithObjects:@"String1",@"String2",@"String3",@"String4", @"String5",..... nil];           

[NSTimer scheduledTimerWithTimeInterval:2.0
                                 target:self
                               selector:@selector(updateText)
                               userInfo:nil
                                repeats:YES];

self.textView.text = @"String1";

- (void)updateText {
int index = [Array count];

for(int i = index; i < Array.count; i++){

self.textView.text = [Array objectAtIndex:i];
}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T23:11:57.123

不能`Array`用作变量名。那是一个保留字。此外，您正在将标准数组初始化为 NSMutableArray。如果您想要标准数组的可变副本，只需执行以下操作：

```
NSMutableArray *yourMutableArray = standardArray.mutableCopy; 
```

或者只是将其初始化为 mutableArray：

```
NSMutableArray *yourMutableArray = [[NSMutableArray alloc]initWithObjects:@"String1",@"String2",@"String3",@"String4", @"String5",..... nil]; 
```

查看上面的 updateText 函数：您在数组末尾开始循环，并且循环仅到达数组末尾。它甚至不会进入循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T03:38:30.283

以下代码工作正常（用此替换您的 updateText 并检查）

```
- (void)updateText {
   static int counter=0;
   int index = [Array count];
   counter=++counter%index;//increase the counter...but make sure that if it gets greater than the number of strings in array....it gets back to 0
   self.textView.text = [Array objectAtIndex:counter];    
} 
```

你的代码有一些错误：
1）第一行中的点必须离开（我猜你知道..只是说）
2）在updateText中你说（我写了计算机会看到的......当试图执行你的代码时！）

```
int index = [Array count];//5 for example
for(int i = 5; i < 5; i++){
   self.textView.text = [Array objectAtIndex:i];
} 
```

所以这条线

```
self.textView.text = [Array objectAtIndex:i]; 
```

永远不会被执行；

3）最后，即使您将 for 循环更改为：

```
int index = [Array count];//5 for example
for(int i = 0; i < index; i++){
   self.textView.text = [Array objectAtIndex:i];
} 
```

会发生什么（例如，我假设 Array 中有 5 个字符串）： 当 updateText 运行时....for 循环立即执行....i 变得非常快并且 2..3..4..5文本从“String1”变为“String2”......“String3”..“String4”......最后是“String5”，速度如此之快，以至于您只能看到从“String1”变为“String5”
之后......每 2 秒.....updateText 再次执行......同样的事情也会发生。所以你看到的是......文本“改变”......从“String5”......到“String5”......所以你看不到任何事情发生！
希望那很清楚。

# python - ArcGIS 地理处理 - 如何为数据设置条件

> ID：14511932
> 
> 赞同：0
> 
> 时间：2013-01-24T22:24:12.777
> 
> 标签：python, arcgis

我想用 Python 编写一个脚本来获取数据并用它做一些事情。

到目前为止，我已经编写了以下代码：

```
import arcpy
arcpy.env.workspace = "C:\wody.gdb"
arcpy.env.overwriteOutput = True
fcList = arcpy.ListFeatureClasses()
bufferList = []
for fc in fcList:
   if fc == "RZEKI":
       arcpy.Buffer_analysis(fc, fc + "Buffer", "200 meters")
       bufferList.append(fc + "Buffer") 
```

现在，我只想在河长于某物的情况下使用 RIVERS (RZEKI)（他们不以米为单位提供数据，而是以单位为单位，所以我只想看看一个看起来像 river_long > WHATEVER 的例子）

先感谢您 ：）

# c# - Timer Elapsed Event 不执行所有操作

> ID：14511937
> 
> 赞同：2
> 
> 时间：2013-01-24T22:24:39.177
> 
> 标签：c#, wpf, multithreading, timer, backgroundworker

我有一个后台工作者，它从数据库中收集大量数据。我想在线程上设置一个超时限制，以便如果它在设定的时间后没有返回结果，则取消该过程。

我在启动 BackgroundWorker 的同时在主线程上启动了一个计时器。

如果我故意让 BGW 进入睡眠状态，计时器就会过去并调用 .Elapsed 事件。然后它取消后台工作人员，但是它没有成功完成我希望它完成的其他操作，即更新 GUI 上的状态栏并抛出 MessageBox。我不明白为什么不，有人可以帮忙吗？

超时和睡眠是专门为测试设置的。

```
 /// <summary>
        /// loads Assets by group ID
        /// Populates Grid on asset listing page
        /// </summary>
        /// <param name="groupId"></param>
        /// <param name="user"></param>
        internal void PopulateGridAssetsByGroup(int groupId, User user)
        {
            //update statusbar
            AfMainWindow.MainWindow.UpdateStatusBar("Loading Assets...");

            //setup BG worker
            populateGridAssetsWorker = new BackgroundWorker {WorkerSupportsCancellation = true, WorkerReportsProgress = false};
            populateGridAssetsWorker.DoWork += populateGridAssetsWorker_DoWork;
            populateGridAssetsWorker.RunWorkerCompleted += populateGridAssetsWorker_RunWorkerCompleted;

            //setup timer which will cancel the background worker if it runs too long
            cancelTimer = new Timer {Interval = 2000, Enabled = true, AutoReset = false};
            cancelTimer.Elapsed += cancelTimer_Elapsed;
            cancelTimer.Start();

            populateGridAssetsWorker.RunWorkerAsync(groupId); //start bg worker
        }

        void cancelTimer_Elapsed(object sender, ElapsedEventArgs e)
        {
            populateGridAssetsWorker.CancelAsync();
            cancelTimer.Stop();

            AfMainWindow.MainWindow.UpdateStatusBar("Could not load assets, timeout error");

            MessageBox.Show("Operation Timed Out\n\nThe Server did not respond quick enough, please try again",
                            "Timeout", MessageBoxButton.OK, MessageBoxImage.Exclamation, MessageBoxResult.OK);

            AfMainWindow.MainWindow.Busy.IsBusy = false;

        }

        /// <summary>
        /// when bg worker complete, update the AssetGrid on Asset Listing Page with results
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="e"></param>
        void populateGridAssetsWorker_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
        {

            cancelTimer.Stop();

            //my thread complete processing

        }        
        /// <summary>
        /// Perform the DB query and collect results for asset listing
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="e"></param>
        void populateGridAssetsWorker_DoWork(object sender, DoWorkEventArgs e)
        {
            var assetListByGroup = new List<AssetLinked>();

            Thread.Sleep(5000);

            if (populateGridAssetsWorker.CancellationPending)
            {
                return;
            }

            try
            {

              //My SQL actions 

            if (populateGridAssetsWorker.CancellationPending)
            {
                return;
            }
            }
            catch (Exception ex)
            {
                Globals.AFWideSettings.GeneralErrorMessage(ex.Message);
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T22:46:49.343

我*想当*`cancelTimer_Elapsed`您尝试从另一个线程更新 GUI 时，您的方法会静默崩溃。后台线程中抛出的异常有时很难在不调试的情况下找到，Visual Studio 设置为在所有异常上中断 - 您可以在菜单中设置它`Debug > Exceptions`并检查所有 CLR 异常。或者，您可以将方法体包装在一个`try`块中，并将断点放在 catch 块中。

```
void cancelTimer_Elapsed(object sender, ElapsedEventArgs e)
{
   try
   {
        populateGridAssetsWorker.CancelAsync();
        cancelTimer.Stop();

        AfMainWindow.MainWindow.UpdateStatusBar("Could not load assets, timeout error");

        MessageBox.Show("Operation Timed Out\n\nThe Server did not respond quick enough, please try again",
                        "Timeout", MessageBoxButton.OK, MessageBoxImage.Exclamation, MessageBoxResult.OK);

        AfMainWindow.MainWindow.Busy.IsBusy = false;
    }
    catch(Exception ex)
    {
        int breakpoint = 42;
    }
} 
```

我不确定是否是这种情况，但我认为值得一试。

# macos - 在 OSX 上连接到 EnterpriseDB 的 postgres

> ID：14511939
> 
> 赞同：0
> 
> 时间：2013-01-24T22:24:42.667
> 
> 标签：macos, postgresql

我有 postgres 服务器在我的机器上本地运行。更新并重新启动后，我似乎无法运行它。

```
$ psql
psql: could not connect to server: No such file or directory
    Is the server running locally and accepting
    connections on Unix domain socket "/tmp/.s.PGSQL.5432"?

$ pg_ctl start -D /Library/PostgreSQL/9.1/data/
pg_ctl: could not open PID file "/Library/PostgreSQL/9.1/data/postmaster.pid": Permission denied

$ sudo ls /Library/PostgreSQL/9.1/data/
PG_VERSION  global      pg_hba.conf pg_log      pg_notify   pg_stat_tmp pg_tblspc   pg_xlog     postmaster.opts
base        pg_clog     pg_ident.conf   pg_multixact    pg_serial   pg_subtrans pg_twophase postgresql.conf postmaster.pid 
```

显然服务器正在运行。

```
$ ps aux | grep postmaster
postgres    63   0.0  0.0  2480820   7320   ??  Ss    4:39PM   0:00.27 /Library/PostgreSQL/9.1/bin/postmaster -D/Library/PostgreSQL/9.1/data
xxxxx      636   0.0  0.0  2435116    524 s000  R+    5:22PM   0:00.00 grep postmaster 
```

我不是 data/ 的所有者，postgres 是：

```
$ ls -alth /Library/PostgreSQL/9.1/data/
ls: : Permission denied
$ sudo ls -alth /Library/PostgreSQL/9.1/data/
Password:
total 88
drwx------   3 postgres  daemon   102B Jan 24 20:04 pg_stat_tmp
drwx------  42 postgres  daemon   1.4K Jan 24 16:41 global
drwxr-xr-x   4 postgres  daemon   136B Jan 24 16:40 pg_log
drwx------   3 postgres  daemon   102B Jan 24 16:40 pg_notify
-rw-------   1 postgres  daemon    70B Jan 24 16:40 postmaster.opts
-rw-------   1 postgres  daemon    75B Jan 24 16:40 postmaster.pid
drwx------  20 postgres  daemon   680B Jan 24 16:39 .
drwxr-xr-x  14 root      daemon   476B Jan 24 16:34 ..
drwx------   5 postgres  daemon   170B Jan 24 16:34 base
-rw-r--r--   1 postgres  wheel     19K Jan 24 16:34 postgresql.conf
-rw-------   1 postgres  daemon     4B Jan 24 16:34 PG_VERSION
drwx------   3 postgres  daemon   102B Jan 24 16:34 pg_clog
-rw-------   1 postgres  daemon   4.1K Jan 24 16:34 pg_hba.conf
-rw-------   1 postgres  daemon   1.6K Jan 24 16:34 pg_ident.conf
drwx------   4 postgres  daemon   136B Jan 24 16:34 pg_multixact
drwx------   2 postgres  daemon    68B Jan 24 16:34 pg_serial
drwx------   3 postgres  daemon   102B Jan 24 16:34 pg_subtrans
drwx------   2 postgres  daemon    68B Jan 24 16:34 pg_tblspc
drwx------   2 postgres  daemon    68B Jan 24 16:34 pg_twophase
drwx------   4 postgres  daemon   136B Jan 24 16:34 pg_xlog 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:08:34.383

我要做的第一件事是尝试通过环回适配器进行连接。`psql -h localhost`是一个很好的起点。

除此之外，您还想找到合适的套接字文件。您可以尝试在 finder 中查找套接字文件。注意`-h`可以用来指定socket所在的文件目录。

# android - HTTP 请求因超时而失败

> ID：14511947
> 
> 赞同：0
> 
> 时间：2013-01-24T22:25:24.433
> 
> 标签：android, httprequest

我尝试用这个简单的代码在 Android 上执行一个简单的 http 请求：

```
 HttpPost httpPost = new HttpPost(url);  
        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        return EntityUtils.toString(httpEntity); 
```

在我测试的每台设备上，它都可以正常工作（Android 2.3.6 +），但是我今天测试的 HTC Desire（Android 2.3.5）因超时而失败。但这仅发生在我的特定网址上，如下所示：

```
http://api.mydomain.com/some/path/index.php?param=value+number&param2=value 
```

如果我尝试另一个网址，例如：

```
http://www.google.com 
```

它可以工作，即使在 HTC 上也是如此。有没有人知道，为什么我只在这些设备/网址上超时？

# c++ - 透明 constexpr int 作为类型 id

> ID：14511951
> 
> 赞同：3
> 
> 时间：2013-01-24T22:26:01.333
> 
> 标签：c++, templates, c++11

我有一个结构`Foo`。我想添加某种 id（占位符？）以从传递给不同`Foo`对象的值元组中静态选择。理想情况下，我不会将其设为模板类型，因为它会触发其他位置的许多更改。

[我尝试向它添加一个整数并使用 constexpr 表达式（演示）](http://liveworkspace.org/code/3LZ0Fe%2421)

```
#include <tuple>

using namespace std;

struct Foo {
private:
  const int pl;

public:
  constexpr Foo (int c) : pl(c) {}

  constexpr int place() {return pl;}

  template <typename... T>
  constexpr int extract(std::tuple<T ...> const &vals) {
    // I would like to uncomment the following but it fails compiling
    // return std::get<pl>(vals);
    return std::get<0>(vals);
  }
};

int main(void) {
   constexpr Foo f(1);
   constexpr std::tuple<int, int> test = std::make_tuple(0, 10);

   // The following passes
   static_assert(f.place() == 1, "ERROR");
   // The following fails
   static_assert(f.extract(test) == 10, "ERROR");
} 
```

我期待我可以使用`constexpr place()`in `get<>`，我错过了什么？

不使用模板我有出路吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T22:52:34.513

第一个障碍是[std::get](http://de.cppreference.com/w/cpp/utility/tuple/get) is not `constexpr`，因此即使`std::get<0>`对您有用，也不必这样做。（归功于@Nate Kohl）

`tuple`您可以尝试使用访问器编写自己的`constexpr`方法，但这种方法也会失败。*每个*函数`constexpr`也*必须*可以在没有`constexpr`参数的情况下调用（或 constexpr this）。目前没有办法在 constexpr 上重载。

所以，倒霉。这在 C++11 中是不可能的。

# unit-testing - factory_boy 中的多对多关系？

> ID：14511953
> 
> 赞同：18
> 
> 时间：2013-01-24T22:26:11.303
> 
> 标签：unit-testing, django-testing, factory-boy

我正在尝试使用 factory_boy 测试两个 Django 模型之间的多对多关系。factory_boy 文档似乎没有讨论这个问题，我无法弄清楚我做错了什么。当我运行第一个测试时，我收到错误“AttributeError: 'Pizza' object has no attribute 'topping'”。我在第二次测试中遇到了类似的错误。

当我在调试器中运行测试时，我可以看到一个“toppings”对象，但它不明白如何从中获取名称。我是否正确定义了 PizzaFactory 的 _prepare 方法？当您具有多对多关系时，如何从另一个表访问一个表中的名称？

谢谢。

## 模型.py：

```
from django.db import models

class Topping(models.Model):
    name = models.CharField(max_length=50)

    def __unicode__(self):
        return self.name

class Pizza(models.Model):
    name = models.CharField(max_length=100)
    toppings = models.ManyToManyField(Topping)

    def __unicode__(self):
        return self.name 
```

## 工厂.py：

```
import factory
from models import Topping, Pizza

class ToppingFactory(factory.Factory):
    name = 'mushrooms'

class PizzaFactory(factory.Factory):
    name = 'Vegetarian'

    @classmethod
    def _prepare(cls, create, **kwargs):
        topping = ToppingFactory()
        pizza = super(PizzaFactory, cls)._prepare(create, **kwargs)
        pizza.toppings.add(topping)
        return pizza 
```

## 测试.py

```
from django.test import TestCase
import factory
from app.models import Topping, Pizza
from app.factories import ToppingFactory, PizzaFactory

class FactoryTestCase(TestCase):

    def test_pizza_has_mushrooms(self):
        pizza = PizzaFactory()
        self.assertTrue(pizza.topping.name, 'mushrooms')

    def test_mushrooms_on_pizza(self):
        topping = ToppingFactory()
        self.assertTrue(topping.pizza.name, 'Vegetarian') 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-11-20T10:41:52.770

我相信你需要使用`@factory.post_generation`装饰器：

```
class PizzaFactory(factory.Factory):
    name = 'Vegetarian'

    @factory.post_generation
    def toppings(self, create, extracted, **kwargs):
        if not create:
            # Simple build, do nothing.
            return

        if extracted:
            # A list of groups were passed in, use them
            for topping in extracted:
                self.toppings.add(topping) 
```

然后你会在 tests.py 中调用它`pizza = PizzaFactory.create(toppings=(topping1, topping2, tooping3))`

来自[https://factoryboy.readthedocs.org/en/latest/recipes.html](https://factoryboy.readthedocs.org/en/latest/recipes.html)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-04-30T12:24:09.150

只需使用混合器：

```
from mixer.backend.django import mixer

# Generate toppings randomly
pizza = mixer.blend(Pizza, toppings=mixer.RANDOM)

# Set toppings
toppings = mixer.cycle(3).blend(Topping)
pizza = mixer.blend(Pizza, toppings=toppings)

# Generate toppings with name=tomato
pizze = mixer.blend(Pizza, toppings__name='tomato') 
```

简单、可配置、更快、无模式、声明性，您可以在一些测试中得到您想要的。

# javascript - NodeJS 中的数组推导

> ID：14511954
> 
> 赞同：4
> 
> 时间：2013-01-24T22:26:18.337
> 
> 标签：javascript, node.js, ecmascript-6

我听说 Node.JS 有很多 EcmaScript 6 特性。似乎默认情况下不存在数组推导。

Node.JS 有数组解析吗？如果是这样，我该如何启用它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T22:34:05.327

我不认为 V8（NodeJS 使用的 JavaScript 引擎）支持数组解析，至少根据[这个问题报告](http://code.google.com/p/v8/issues/detail?id=890)不支持。那里的 V8 项目成员似乎在说，在它们真正标准化之前，它们不是优先事项。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-04T11:57:11.933

你可以使用[Spider-node](http://canuckistani.ca/blog/2011/06/07/spidernode-let-yield-and-array-comprehensions-in-node-js/) ...它基本上是node，使用mozila的spider monkey而不是google的v8。

# php - CakePHP 重定向到外部绝对 URL

> ID：14511962
> 
> 赞同：1
> 
> 时间：2013-01-24T22:26:41.740
> 
> 标签：php, url, cakephp, redirect, cakephp-2.0

在 CakePHP 中，$this->redirect 可以很好地重定向到带有内部 url 的内部页面。有没有办法将用户重定向到外部页面？

例如：$this->redirectTo('http://google.com');

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T22:42:56.230

`$this->redirect()`也适用于外部 URL。

```
$this->redirect('http://www.example.com'); 
```

[http://book.cakephp.org/2.0/en/controllers.html#flow-control](http://book.cakephp.org/2.0/en/controllers.html#flow-control)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T04:16:24.653

试试这个。

`$this->redirect('http://www.google.com', null, true);`

# c# - 使用运算符“new”声明值类型

> ID：14511963
> 
> 赞同：0
> 
> 时间：2013-01-24T22:26:45.477
> 
> 标签：c#

据说值类型存储在堆栈中。但是当我们用 声明一个值类型时会发生什么`new`呢？例如

> 诠释一个;

存储在堆栈中，但是

> 诠释 b=新诠释（）；

b 存储在哪里？堆还是栈？这让我很困惑。它就像一个引用，但它是一个值类型。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-24T23:02:41.900

> 据说值类型存储在堆栈中

这是经常说的，但显然是错误的。当您创建一个包含 100 个整数的数组时，这些整数是位于堆栈还是堆中？

存储的生命周期与存储类型有关的想法是完全错误的。正确的说法是*可以从 short-term storage 分配已知短生命周期的值类型变量，*当您这样说时，这听起来很明显。

确保你清楚这一点：这`int i;`意味着“在堆栈上分配 i”是错误的。意思是“为 i 分配存储空间”；如果已知该存储寿命很短，则可以在短期存储上分配它。否则，它会在长期存储中分配。

> 但是当我们用 new 声明一个值类型时会发生什么？

您认为“新”会导致从堆中分配新存储。它不是。将“new”视为“获取存储然后调用构造函数”的意思。

为类类型获得的存储总是在堆上，因为类数据的生命周期不知道是短的。为值类型获得的存储被记录为在堆栈上，然后将该值*复制*到其最终目的地，可能在堆栈或堆上。但是，如果编译器可以确定这样做是安全的，则可以复制省略该分配和复制。

这里有一些文章会有所帮助：

[http://blogs.msdn.com/b/ericlippert/archive/2010/09/30/the-truth-about-value-types.aspx](http://blogs.msdn.com/b/ericlippert/archive/2010/09/30/the-truth-about-value-types.aspx)

[https://ericlippert.com/2010/10/11/debunking-another-myth-about-value-types/](https://ericlippert.com/2010/10/11/debunking-another-myth-about-value-types/)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-24T22:29:05.817

堆栈或堆，这是一个实现细节。您实际上无法保证 even`int`只会在堆栈上 - 运行时可以决定在堆上分配任何值类型，如果它认为在性能方面会更好。

你可以在 Eric Lippert 的**[博客上阅读它](http://blogs.msdn.com/b/ericlippert/archive/2009/04/27/the-stack-is-an-implementation-detail.aspx)**

# javascript - window.location.href 不呈现 Facelets 页面，返回原始源代码

> ID：14511982
> 
> 赞同：1
> 
> 时间：2013-01-24T22:27:47.483
> 
> 标签：javascript, jsf, facelets

我在从 Javascript 加载 Facelets 页面时遇到问题。我正在使用 Netbeans 7.2、Glassfish 3.1.2 和 Java EE 6。

我做了一个简单的测试页面：

```
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://java.sun.com/jsf/html">
<h:head>
    <script type="text/javascript">
        window.location.href = "index.xhtml";
    </script>
    <title>winq match!</title>
</h:head>
<h:body>
    <h1>WING MATCH!!</h1>
    <h:form>
        <h:commandButton id="Next" value="weiter" action="index"/> 
    </h:form>
</h:body> 
```

`index.xhtml`应该加载的页面`window.location.href`是：

```
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:f="http://java.sun.com/jsf/core">
<h:head>
    <title>Facelet Title</title>
</h:head>
<h:body>
    <h:form>
        <h:outputText value="TestTestTestTestTest"/>
        msg <h:inputText id="ema" value="#{testBean.inputValue}" maxlength="1" />      
        <h:commandButton id="but" value="Submit" action="index"/>
    </h:form>
</h:body> 
```

页面已加载但未解析，因此`h:`浏览器不会解释标签。在网上搜索后，似乎我是唯一一个遇到这种问题的人。也许我误解了 JSF 的某些方面。我希望能得到一些建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T02:35:28.423

您需要确保请求 URL 与`FacesServlet`webapp 中定义的 URL 模式匹配`web.xml`。它就是负责执行所有 JSF/Facelets 工作的人。

例如，如果您已将其映射到`*.jsf`，那么您应该在该 URL 模式上打开页面，以便`FacesServlet`正确调用并定位`index.xhtml`文件并执行所有必要的操作。

```
window.location.href = "index.jsf"; 
```

或者，您也可以将 的 URL 模式更改`FacesServlet`为`*.xhtml`。这样您就无需担心虚拟 URL。

### 也可以看看：

*   [JSF Facelets：有时我看到 URL 是 .jsf，有时是 .xhtml。为什么？](https://stackoverflow.com/questions/3008395/jsf-facelets-sometimes-i-see-the-url-is-jsf-and-sometimes-xhtml-why/)

# c# - 允许用户在 Windows 控制台中键入任意数量的字符串，然后显示有关已键入字符串中的字母数和行号的信息

> ID：14511987
> 
> 赞同：2
> 
> 时间：2013-01-24T22:28:07.007
> 
> 标签：c#, arrays, string, if-statement, while-loop

我正在尝试做 Windows 控制台应用程序，它允许用户在一行中写入任意数量的字母（字符串），然后单击“Enter”移动到下一行等。如果用户在控制台“showme”中写入，那么它应该显示他信息：行号和该行中字符串中的字母数（图像）。还有应该关闭控制台的“结束”功能，但它已经完成了。我的问题是如何存储用户字符串键入的内容并使用此类信息从“显示”中调用它们（我尝试使用数组）

我做过类似的事情，但它根本不起作用。

```
 class Text
  {
    static void Main(string[] args)
    {
        Boolean endless = true;
        ArrayList array = new ArrayList();
        String s;

        while (endless)
        {
            if(Console.ReadLine() == "showme")
            {
                Console.WriteLine("--------------");
            }
            if(Console.ReadLine() == "end")
            {
                Environment.Exit(0);
            }
                s = Console.ReadLine() + "\n";
                array.Add(s);
        }

        s = Console.ReadLine();
    }
} 
```

[![输出](../Images/41e1f2407e578b4cb98534982fe548e5.png)](https://i.stack.imgur.com/zuj6r.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T22:36:37.417

几件事：

考虑使用`List<>`vs. `ArrayList`（可选）

此外，您永远不会将 ArrayList 的值添加`Console.ReadLine()`到 ArrayList 中，因为它位于您的循环之外。

```
static void Main(string[] args)
{
    // Consider using a list instead of an ArrayList (optional)
    List<string> lines = new List<string>();

    while (true)
    {
        string input = Console.ReadLine();

        if (input == "showme")
        {
            // Here we print each string and stats.
            foreach (string s in lines)
            {
                Console.WriteLine(s); // Write the line.
                Console.WriteLine("{0} contains {1} letters", s, s.Length); // Write the stats.
            }
        }
        else if (input == "end")
        {
            Environment.Exit(0);
        }
        else
        {
            // This is where you add your input string to the collection above.
            lines.Add(input);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T22:39:27.167

你能试一下吗：

```
 if(Console.ReadLine() == "showme")
        {
            Console.WriteLine("--------------");
            for(int i =0; i < array.count; i++)
            {
                Console.WriteLine("Index["+i+"]+" "+array[i]);
            }
        } 
```

# java - 根据列将getString结果拆分为多个值

> ID：14511990
> 
> 赞同：0
> 
> 时间：2013-01-24T22:28:14.933
> 
> 标签：java, jsp, getstring

```
<%
  st = con.createStatement();
  rs = st.executeQuery("select pf_nm from portfolio");

  while(rs.next())
  {
    out.print(rs.getString(1)); //divide the result into multiple values
  }
 %> 
```

上述代码中的结果可能会根据获取的数据而有所不同。结果示例如下：

```
Google Facebook
or
Google
or 
Google Facebook Apple 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T23:43:42.333

如果我理解你的问题和评论正确，那么你可以做这样的事情

```
ArrayList<String> cols = new ArrayList<String>();
while(rs.next())
  {
    cols.add(rs.getString(1));
    // Do something..
  } 
```

**编辑**：我从你之前的问题中了解到的

```
String result = rs.getString(1); // gives "Google Facebook Apple AT&T" as result
String[] names = result.split("\\s"); // Split the line by whitespace 
```

如果你愿意，你也可以使用 ArrayList。如果您需要键值关联（我不确定您想要什么），您也可以使用 hashMap。以下是一些有用的链接

[1.在java中拆分字符串](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String%29)

[2.Java中如何使用ArrayList](http://www.java-samples.com/showtutorial.php?tutorialid=234)

[3\. Java中的HashMap示例](http://www.java-samples.com/showtutorial.php?tutorialid=369)

这是给你的完整的伪代码。

```
public class StringSplit {

    public static void main(String [] sm){
        String str = "Google Facebook Apple AT&T";
        // If you have more than one whitespace then better use \\s+
        String[] names = str.split("\\s");
        for(int i =0; i<names.length; i++){
            System.out.println(i +" : " + names[i]);
        }
    }
} 
```

我希望这可以帮助你。

# string - NaN Node.Js 回调问题

> ID：14511997
> 
> 赞同：0
> 
> 时间：2013-01-24T22:28:45.160
> 
> 标签：string, node.js, variables, math

我已经在这个问题上摸索了好几个星期，但我无法解决这个问题。

我花了几天时间试图找到可以在原始 .js 文件之外调用实际函数的地方。

我想要做的`node.js`就是创建一个函数，该函数能够在特定参数（例如（1-10 或 1-100））内生成随机数，并将其传递回控制台或由指定的变量用户。

这是我拥有的当前代码：

**服务器.js**

```
var myModule = require("./my_module.js");
console.log("your random number is" + myModule.hello(10));  //<-- the 10 represents the TOP number that will generate, if you look in the proceeding file, it adds a 1 to it as required by the code 
```

**my_module.js**

```
function hello(foo) {
return Math.floor((Math.random()*foo)+1);
}

module.exports.hello = hello; 
```

这里强调的问题是我从控制台得到一个 NaN，（不是数字）。我意识到这意味着在翻译的某个地方，这个数字可能会变成一个字符串，并且不能被 mathFloor 字符串读取。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T02:43:43.250

虽然 Erik 的回答解决了问题，但它不会告诉您字符串的来源。您可以使用 console.trace 使您的调试生活更轻松。

```
function hello(foo) {
   var result = Math.floor((Math.random()*parseInt(foo))+1);
   if (isNaN(result)) {
      console.trace("result is NaN")
   }
   return result;
}

> hello("a")
Trace: NaN
    at hello (repl:4:9)
    at repl:1:2
    at REPLServer.self.eval (repl.js:109:21)
    at Interface.<anonymous> (repl.js:248:12)
    at Interface.EventEmitter.emit (events.js:96:17)
    at Interface._onLine (readline.js:200:10)
    at Interface._line (readline.js:518:8)
    at Interface._ttyWrite (readline.js:736:14)
    at ReadStream.onkeypress (readline.js:97:10)
    at ReadStream.EventEmitter.emit (events.js:126:20)
    at emitKey (readline.js:1058:12)
    at ReadStream.onData (readline.js:807:7)
NaN
> 
```

通过查看堆栈跟踪，您将能够找到提供非数字参数的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T22:35:07.483

您可以使用 jQuery 方法 isNumeric 来验证他们是否给了您一个数字。[http://api.jquery.com/jQuery.isNumeric/](http://api.jquery.com/jQuery.isNumeric/)

要确保它仍然是一个数字并且您没有无意中将其设为字符串，请使用 parseInt() 或 parseFloat()。

```
function hello(foo) {
return Math.floor((Math.random()*parseInt(foo))+1);
} 
```