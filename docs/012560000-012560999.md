# StackOverflow 问答 12560000-12560999

# jquery - 为什么我不能在 Wordpress 中使用 jQuery 添加新的 div？

> ID：12560000
> 
> 赞同：0
> 
> 时间：2012-09-24T06:38:07.610
> 
> 标签：jquery, wordpress

我正在尝试基于 CSV 文件动态生成页面内容。

一切都很好，但似乎我无法在页面上创建新的 div。

```
<script type="text/javascript"><!--//--><![CDATA[//><!--
$(document).ready(function() {
 $.ajax({
        type: "GET",
        url: "celebs.csv",
        dataType: "text",
        success: function(data) {
             var newData = processData(data);
             for (var i in newData){
                buildCeleb(newData[i]);
             }
        },
        error: function(){
             alert('error');
        }
     });
function processData(allText) {
    var allTextLines = allText.split(/\r\n|\n/);
    var headers = allTextLines[0].split(',');
    var lines = [];
    for (var i=1; i<allTextLines.length; i++) {
        var data = allTextLines[i].split(',');
        if (data.length == headers.length) {
            var tarr = [];
            for (var j=0; j<headers.length; j++) {
                tarr.push(headers[j]+":"+data[j]);
            }
            lines.push(tarr);
        }
    }
    // alert(lines);
    return lines;
}
function buildCeleb(celeb){
var name = celeb[0].split(':')[1];
var facebook = celeb[1].split(':')[1];
var twitter = celeb[2].split(':')[1];
var reach = celeb[3].split(':')[1];
var profession = celeb[4].split(':')[1];
var photo = celeb[5].split(':')[1];
$("#cy-container").append("<div></div>");
}
});
 //--><!]]></script> 
```

这`$("#cy-container").append("<div></div>");`是似乎被打破的部分。如果我将 div 替换为 say、`name`or`facebook`或什至是硬编码的字符串文字，它会起作用并出现在页面上。

现在，我对 Wordpress 了解不多，但是我想做的事情有问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T06:43:11.570

那个 div**里面应该有一些值**才能显示出来..尝试给

```
$("#cy-container").append("<div>Hello "+name+"</div>"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T07:31:27.763

尝试这样的事情

```
$("#cy-container").append($("<div></div>")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T16:21:11.377

尝试这个

```
$('#cy-container').append("<div/>"); 
```

# html - 固定菜单下的命名 URL 位置

> ID：12560007
> 
> 赞同：0
> 
> 时间：2012-09-24T06:38:33.650
> 
> 标签：html, twitter-bootstrap

两页，一页带有`<a href='some_url#some_name'>`，第二页在`some_url`，带有`<a name='some_name'>`。

所以点击 URL1 后，页面 2 加载，并且 URL2 在页面的顶部。

现在关于问题：这个 URL2 隐藏在`twitter-bootstrap`'s 的顶部菜单下，它有固定的位置。

但是，当我检查 Twitter Bootstrap 网站上的命名链接时，没有出现这样的问题。

我尝试了 Firefox 和 Opera，似乎没有浏览器依赖。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T10:20:32.983

> 但是，当我检查 Twitter Bootstrap 网站上的命名链接时，没有出现这样的问题。

我猜您指的是每个页面左侧导航范围中的链接。如果您查看 css，特别是`docs.css`包含文档网站样式规则的文件，您会发现每个部分都有一个`padding`，这就是它们没有出现在导航栏下方的原因。

![Twitter Bootstrap 文档网站截图](../Images/cd9984b5b1342d67033c16fb0aaa4806.png)

如您所见，该部分确实开始被导航栏隐藏，但填充将内容向下移动，使其变得可见。

希望这可以帮助。

# android - Android Socket 被绞死

> ID：12560011
> 
> 赞同：2
> 
> 时间：2012-09-24T06:39:18.110
> 
> 标签：android, sockets

我创建了一个服务，该服务又创建了一个套接字，但是一旦尝试读取从服务器发送的数据，它就会挂起，另一方面，如果我不使用服务而是使用普通活动，则相同的代码会运行？

```
 import android.app.*;
        import android.content.*;
        import android.os.*;
        import android.util.*;
        import java.net.*;
        import java.io.*;
        import android.widget.*;

     public class BackgroundService extends Service
            {
                    private Socket socket=null;
                    private  InputStreamReader  in=null;
                    private String ip;

                    private String tag="BackgroundService";

                    public IBinder onBind(Intent p1)
                    {
                            // TODO: Implement this method
                            return null;
                    }

             public void onCreate(){
                     super.onCreate();

             }
            public void onStart(Intent i,int id){
             super.onStart(i,id);
                    ip=i.getStringExtra("Ip");

             Log.v(tag,"Ip "+i.getStringExtra("Ip"));
                    try
                    {
                            socket = new Socket(ip.trim(), 8888);
                            new Runnable() {

                                    public void run()
                                    { 
//                                        Hangs in this block.....
                                            try
                                            {
                                                    in = new InputStreamReader (socket.getInputStream());
                                            BufferedReader bf=new BufferedReader (in);
        //                                 Never Reaches this messge
                                            Log.v(tag,"mess:"+bf.readLine() );
                                            }
                                            catch (IOException e)
                                            {
                                                    e.printStackTrace();
                                            }

                                    }

                            }.run();

                    }
                    catch (IOException e)
                    {
                            e.printStackTrace();
                    }

            }

            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T08:52:30.077

Log.v 是它不允许您打印值的问题，因此使用 System.out.println() 和 bf.printline 将包含消息

# iphone - UIwebview 不会在第一次加载 PDF 文件

> ID：12560015
> 
> 赞同：0
> 
> 时间：2012-09-24T06:39:39.180
> 
> 标签：iphone, pdf

我正在开发一个应用程序。在那我正在加载 uiwebview 中的 pdf，如下所示。

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *filename1 = [[paths objectAtIndex:0] stringByAppendingPathComponent:[default1 objectForKey:@"KeyToSelectedFile"]];
NSString *fileName=[filename1 stringByAppendingPathComponent:[default1 objectForKey:@"keyToAppearfile"]];
NSLog(@"%@",fileName);
//NSString *bookpath=[filename1 stringByAppendingPathComponent:book];
NSURL *url = [NSURL fileURLWithPath:fileName];
NSURLRequest *request = [NSURLRequest requestWithURL:url];
web=[[UIWebView alloc]initWithFrame:CGRectMake(20,80, 980, 690)];
web.delegate=self;
[web loadRequest:request];
web.backgroundColor=[UIColor clearColor];
[self.view addSubview:web]; 
```

第一次这会使应用程序崩溃。从第二次开始，它将正确显示 pdf。应用程序崩溃时没有显示任何错误。我不明白有什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T06:56:08.673

您还可以使用 Documents 交互控制器。这是使用它查看 pdf 文件的更好方法。它的实现也很简单。这是它的参考链接：http: [//developer.apple.com/library/ios/#documentation/UIKit/Reference/UIDocumentInteractionController_class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIDocumentInteractionController_class/Reference/Reference.html) 我希望它可以帮助你。干杯！！

```
- (UIDocumentInteractionController *) setupControllerWithURL: (NSURL) fileURL
usingDelegate: (id <UIDocumentInteractionControllerDelegate>) interactionDelegate {

   UIDocumentInteractionController *interactionController =
    [UIDocumentInteractionController interactionControllerWithURL: fileURL];
   interactionController.delegate = interactionDelegate;

   return interactionController;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T06:57:04.533

只需花一些时间从 Web 服务器加载 PDF。在该加载过程中，您也可以添加一个 ACTIVITY INDICATOR ......

# mongodb - 需要 MongoDB mapreduce 函数来拆分数据（字段包含逗号分隔值）

> ID：12560016
> 
> 赞同：1
> 
> 时间：2012-09-24T06:39:52.260
> 
> 标签：mongodb

我需要 mapreduce 来拆分包含 mongodb 中逗号分隔值的字段并计算字段中的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T06:49:40.637

我创建了如下所示的示例文档。

```
{ "_id" : ObjectId("5060017f6fd0f104e16540a2"), "field" : "1,2,3,4,5" }
{ "_id" : ObjectId("506001866fd0f104e16540a3"), "field" : "1,2,3" }
{ "_id" : ObjectId("5060018e6fd0f104e16540a4"), "field" : "1,2,3,7,8,9,0,4,3" }
{ "_id" : ObjectId("506001926fd0f104e16540a5"), "field" : "1" }
{ "_id" : ObjectId("506001966fd0f104e16540a6"), "field" : "1,5" } 
```

然后你可以运行下面的 map/reduce 查询来实现你想要的。

```
map = function() {
    var array = this.field.split(',');
    emit(this.field, array.length);
}

reduce = function(key, values) {
    return values;
}

result = db.runCommand({
        "mapreduce" : "comma", 
        "map" : map,
        "reduce" : reduce,
        "out" : "comma_result"
}); 
```

结果是：

```
> db.comma_result.find();
{ "_id" : "1", "value" : 1 }
{ "_id" : "1,2,3", "value" : 3 }
{ "_id" : "1,2,3,4,5", "value" : 5 }
{ "_id" : "1,2,3,7,8,9,0,4,3", "value" : 9 }
{ "_id" : "1,5", "value" : 2 } 
```

# android - 为什么使用 android:weightSum？

> ID：12560026
> 
> 赞同：2
> 
> 时间：2012-09-24T06:41:21.043
> 
> 标签：android, android-layout

如果未指定[weightSum](http://developer.android.com/reference/android/widget/LinearLayout.html#attr_android%3aweightSum)，Android 只会将孩子的权重相加。那么，真的有理由使用 weightSum 吗？有不应该使用的情况吗？

它比简单地让android自己增加权重更有效吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T06:48:15.283

参考文档描述中的重要词是“single”：“这可以用于例如通过将 layout_weight 设置为 0.5 并将 weightSum 设置为 1.0来为**单个子项提供总可用空间的 50%。”** 在这种情况下，孩子（在这种情况下，只有孩子）的权重之和与 weightSum 不同。

因此，当您不一定让孩子填充整个 LinearLayout 时，您只需要使用 weightSum。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T06:54:21.863

例如，您可以为布局设置 weightSum = 3，为两个子视图设置 weight = 1。结果，您的视图将占布局中所有位置的 66.6%。

祝你好运！

# javascript - 使用 JavaScript 设置字符集元标记

> ID：12560027
> 
> 赞同：16
> 
> 时间：2012-09-24T06:41:28.533
> 
> 标签：javascript, html, utf-8, character-encoding, epiceditor

我试图在这里追踪一个错误：[https ://github.com/OscarGodson/EpicEditor/issues/184#issuecomment-8805982](https://github.com/OscarGodson/EpicEditor/issues/184#issuecomment-8805982)

根据所有信息，这*似乎*是因为浏览器默认为用户的本机字符集（在本例中为`ISO-8859-1`），而`UTF-8`不像我的机器和美国的其他机器上那样。我猜一个解决方法是使用 HTML 来强制编码`UTF-8`：

```
 <meta charset='utf-8'> 
```

或者

```
<meta http-equiv='Content-Type' content='Type=text/html; charset=utf-8'> 
```

但是，JS 不工作。在第一个示例中：

```
charsetMetaTag = self.editorIframeDocument.createElement('meta');
charsetMetaTag.charset = 'utf-8';
self.editorIframeDocument.getElementsByTagName('head')[0].appendChild(charsetMetaTag); 
```

我刚刚返回注入 DOM 的以下内容：

```
<meta> 
```

在第二个示例中，`http-equiv`未设置：

```
charsetMetaTag = self.editorIframeDocument.createElement('meta');
charsetMetaTag['http-equiv'] = 'Content-Type';
charsetMetaTag['content'] = 'text/html; charset=utf-8';
self.editorIframeDocument.getElementsByTagName('head')[0].appendChild(charsetMetaTag); 
```

我得到以下 HTML：

```
<meta content="text/html; charset=utf-8"> 
```

是的，我需要动态地执行此操作，因为我动态地创建 iframe。这甚至可能不是问题，但这就是它的样子。我能想到的唯一“黑客”是以某种方式使用innerHTML ...

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-24T07:00:35.383

您不能通过设置 charset 属性来设置 charset 内容属性，因为它们不会相互反映。事实上，没有任何属性可以反映 charset 内容属性。

http-equiv 内容属性由 httpEquiv 属性反映，因此

```
 charsetMetaTag['httpEquiv'] = 'Content-Type'; 
```

将正确创建元元素。

但这都不重要。字符集是由解析器建立的，所以在解析完 HTML 之后在 JavaScript 中构造 meta 元素对文档的字符集完全没有影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-17T16:48:56.520

正如 Alohci 所说，从 JS 创建与字符集相关的元标记不会对当前页面产生太大影响。

在我的用例中，我需要能够将当前页面序列化为字符串并将其保存到某个后端。附加缺少的字符集元标记（如果不存在）对于这样的用例很有用。

作为一个侧节点，不要忘记字符集元标记应该在HTML5 规范**的开头。**看到[这个答案](https://stackoverflow.com/questions/1987065/what-are-best-practices-to-order-elements-in-head)。这个简单的细节导致了我的应用程序中的一个重要错误:)

你应该使用：

```
document.head.insertBefore(charsetMetaTag,document.head.firstChild); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-03T23:29:57.253

我同意@alohci 和@sebastien-lorber 的回答。

但只是解决你的原始问题只是得到

```
<meta> 
```

使用 setAttribute 方法

```
charsetMetaTag.setAttribute("charset", "UTF-8"); 
```

并遵循@sebastien-lorber 的建议，将输出

```
<meta charset="UTF-8"> 
```

作为头部的第一个子元素

# jquery - jQuery：向元素添加标题属性并从以下元素插入文本

> ID：12560032
> 
> 赞同：2
> 
> 时间：2012-09-24T06:41:55.740
> 
> 标签：jquery, image, attributes, title

我什至不确定这是否可能，但让我们试一试。

我为每个图像动态生成了这个 HTML：

```
<a href="image.jpg" class="thickbox">
    <img src="thumb.jpg" title="This is the title" alt="" />
</a> 
```

不知何故，我需要从 thumb.jpg 中获取 title 属性并将其复制到周围的锚点，这将产生以下结果：

```
<a href="image.jpg" class="thickbox" title="This is the title" alt="">
    <img src="thumb.jpg" title="This is the title" alt="" />
</a> 
```

如果这可以用 jQuery 实现，我会很高兴。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T06:46:02.410

```
$('a.thickbox img').each(function(key,$elem){
    $(this).parent().attr('title',$(this).attr('title'));
}); 
```

如果您有多个图像，则循环使用每个图像。否则使用函数中的行并替换`$(this)`为`$('a.thickbox img')`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T06:45:30.717

您可以将函数传递给[attr()](http://api.jquery.com/attr/)（或[prop()](http://api.jquery.com/prop/)）并编写如下内容：

```
$("a.thickbox").attr("title", function() {
    return $(this).find("img").attr("title");
}); 
```

（我`attr()`在上面的代码中使用来强调我们正在创建一个 HTML 属性的事实。`prop()`创建或更新 DOM 属性会给出相同的结果）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T06:57:40.090

使用 and 循环缩略图[`.each()`](http://api.jquery.com/each/)，对于那些有`<a>`父级的，将父级标题设置为 img 的标题。

```
$("img[src='thumb.jpg']").each( function() {
    $(this).parent('a.thickbox').attr('title', this.title);
}); 
```

# iphone - 如何解决“找不到图像”的错误？

> ID：12560039
> 
> 赞同：0
> 
> 时间：2012-09-24T06:42:55.250
> 
> 标签：iphone, ipad, ios-universal-app, assetslibrary

我正在研究通用项目（iPhone/iPad），其中我使用的代码在 iphone 和 ipad 上是相同的。该代码在 iphone 中运行良好，但在 iPad 中无法运行。

它返回以下错误。

> dyld：库未加载：/System/Library/Frameworks/AssetsLibrary.framework/AssetsLibrary 引用自：/Users/mac/Library/Application Support/iPhone Simulator/3.2/Applications/AFE91FFD-27A4-41A9-B5AF-C4336F10A9F3/Move On Inspirational Quotes.app/Move On Inspirational Quotes 原因：找不到图像

谁能告诉我如何解决这个错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T06:58:30.797

由于 AssetsLibrary 框架仅存在于 iOS 4.0 及更高版本，尝试在早期（即 3.XX）iOS 上运行使用它的应用程序将导致崩溃。要么尝试从你的应用程序中消除对这个框架的使用，要么继续并仅支持 iOS 4.0 及更高版本*。*

# string - VBA Excel 字符串

> ID：12560040
> 
> 赞同：0
> 
> 时间：2012-09-24T06:42:57.813
> 
> 标签：string, vba, listbox

在使用 Excel 的 VBA 时，我遇到了字符串数据类型的运行时错误。

我有一个声明为字符串的变量，并试图从电子表格中的单元格中读取一个值并作为一个项目添加到列表框中。特定单元格中存在的数据大于 2000 个字符。我的 vba 能够从单元格中读取值并在调试窗口中打印。*当我尝试在列表框中添加项目时，它无法添加。它引发运行时错误*。

运行时错误代码为***“-2147352571 (80020005): Type Mismatch”***。

有没有办法解决这类问题。

```
Public Sub update_form()
Dim a1, b1, c1, d1 As Single
Dim a2, b2, c2, d2 As String
Dim a3, b3, c3, d3 As String
Dim a4, c4, d4 As String
Dim i As Single
Dim b4$

    a2 = req_no.Value
    Sheets("Design Trace - Current").Select
        Range("A1").Activate
        Columns("A:A").Select
        Selection.Find(What:=a2, After:=ActiveCell, LookIn:=xlFormulas, _
            LookAt:=xlPart, SearchOrder:=xlByRows, SearchDirection:=xlNext, _
            MatchCase:=False, SearchFormat:=False).Activate
        a1 = ActiveCell.Row
    b2 = Sheets("Design Trace - Current").Cells(a1, 2).Value

    c2 = "A" & a1
    d2 = "BBB" & a1
    b1 = Application.WorksheetFunction.CountA(Range(c2, d2))
    For i = 2 To b1 Step 3
        a4 = Cells(a1, i).Value
        b4 = Cells(a1, i + 1).Value
        d1 = Len(b4)
        Debug.Print " Length : " & d1
        c4 = Cells(a1, i + 2).Value

        design_ele.Text = a4
        reverse_req.Text = b4
        code_file_name.Text = c4
        Debug.Print "a4 : " & a4
        Debug.Print "b4 : " & b4
        Debug.Print "c4 : " & c4

        If (Len(a4) > 500) Then
            ListBox1.AddItem "Refer Value"
        Else
            ListBox1.AddItem a4
        End If

        ListBox2.AddItem b4

        If (Len(c4) > 500) Then
            ListBox3.AddItem "Refer Value"
        Else
            ListBox3.AddItem c4
        End If

    Next
End Sub 
```

这是一个用户表单，excel的版本是2007。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T11:48:15.453

单个列表框项有 ~2000 个字符的限制。

如果要避免错误，请在添加时限制长度：

```
listbox3.additem left$(a4, 2000) 
```

如果要将全文存储在数组中。

# javascript - 如何使用单选按钮禁用组合框（javascript）

> ID：12560043
> 
> 赞同：1
> 
> 时间：2012-09-24T06:43:04.600
> 
> 标签：javascript, combobox, radio-button

我的 HTMl 中有 3 个单选按钮和 3 个不同的组合框。我希望 Crtl 通过单选按钮启用/禁用组合框。例如，当我单击 G1 单选按钮时，只有 g1 组合框处于启用状态，而其他组合框处于禁用状态。我怎么用 JS 做这个！？

```
<input type="radio" name="g1" value="g1"> G1
<input type="radio" name="g2" value="g2"> G2
<input type="radio" name="g3" value="g3"> G3

<select name="g1">
<option value="one">one</option>
<option value="two">two</option>
<option value="three">three</option>

<select name="g2">
<option value="one">one</option>
<option value="two">two</option>
<option value="three">three</option>

<select name="g3">
<option value="one">one</option>
<option value="two">two</option>
<option value="three">three</option> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T07:02:45.090

在 jQuery 中尝试这段代码，效果很好：

```
<script type="text/javascript" language="javascript">
    $(document).ready(function(){
        $('.radio').click(function(){
            $('.radio').not(this).removeAttr("checked");
            var id="select_"+$(this).attr('id');
            $('select').removeAttr("disabled");
            $('select').not("#"+id).attr('disabled','true');
        });
    });
</script> 
```

html:

```
<input type="radio" name="g1" value="g1" class="radio" id="g1"> G1
<input type="radio" name="g2" value="g2" class="radio" id="g2"> G2
<input type="radio" name="g3" value="g3" class="radio" id="g3"> G3

    <select name="g1" id="select_g1">
    <option value="one">one</option>
    <option value="two">two</option>
    <option value="three">three</option>
    </select>

    <select name="g2" id="select_g2">
    <option value="one">one</option>
    <option value="two">two</option>
    <option value="three">three</option>
    </select>

    <select name="g3" id="select_g3">
    <option value="one">one</option>
    <option value="two">two</option>
    <option value="three">three</option>
    </select> 
```

**JSFIDDLE：** * *[http://jsfiddle.net/Xbcvh/](http://jsfiddle.net/Xbcvh/)* *

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T07:07:19.387

试试这个：

[http://jsfiddle.net/VeaVh/1/](http://jsfiddle.net/VeaVh/1/)

您可以编写更好的选择器，这只是一个示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T06:47:50.807

您需要将 id 添加到下拉字段以使用 javascript 访问它。

然后您可以使用其 ID 禁用它，

通过`onclick`单选按钮的事件，您可以运行脚本来启用/禁用按钮

`document.getElementById('your_select_id').disabled = true;`

# c# - 如何处理 Varbinary 和 asp.net 更新

> ID：12560046
> 
> 赞同：0
> 
> 时间：2012-09-24T06:43:13.950
> 
> 标签：c#, asp.net, sql-server

在 ASP.NET 表单中，我有一个 ListView 控件，其中一列是一个`Varbinaty(max)`值。

问题是当我尝试处理这个值时。

在选择之后：

```
SELECT CODICE_ARTICOLO, DESCRIZIONE, UM, FOTO, TIPO_ART FROM TBL_ARTICOLI 
```

`FOTO`在哪里`Varbinary(max)`。

这是`UPDATE`命令：

```
UpdateCommand="UPDATE [TBL_ARTICOLI] SET [DESCRIZIONE] = @DESCRIZIONE, [UM] = @UM, [FOTO] = @FOTO, [TIPO_ART] = @TIPO_ART WHERE [CODICE_ARTICOLO] = @CODICE_ARTICOLO">

        <UpdateParameters>
            <asp:Parameter Name="DESCRIZIONE" Type="String" />
            <asp:Parameter Name="UM" Type="String" />
            <asp:Parameter Name="FOTO" Type="Object" />
            <asp:Parameter Name="TIPO_ART" Type="String" />
            <asp:Parameter Name="CODICE_ARTICOLO" Type="String" />
        </UpdateParameters> 
```

当我尝试更新项目时，出现以下错误：

> *La conversione implicita del tipo di dati da sql_variant 一个 varbinary(max) 非同意。Per eseguire la query, utilizzare la funzione CONVERT.*

用英语告诉我它不能从`sql_variant`to转换`varbynary(max)`，但是如果我使用这样的转换：

```
[FOTO] = CAST(@FOTO AS VARBINARY(MAX)) 
```

我收到以下错误：

> *I dati di tipo string o binary verrebbero troncati。L'istruzione è stata interrotta。*

所以字符串或二进制将被截断命令被中断。

我试图转换`varbinary`十六进制字符串，但每次我得到最后一个错误。

有人可以帮助我吗？

谢谢

皮尔卡洛

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T07:04:48.860

尝试使用 SqlBinary 作为类型？（不确定，也无法访问开发机器 atm。）

```
<asp:Parameter Name="FOTO" Type="SqlBinary" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T07:11:34.040

我在这里建议的是，尝试在 sql server 中创建一个 sproc 来更新 varbinary 字段。从 asp.net 只需将参数传递给 sproc，而对于 varbinary 字段，只需使用 asp.net 中的字符串数据类型。我的意思是分配值到字符串数据类型并将其传递给存储过程。

现在 sproc 将更新表中的必填字段。

# php - 将值从一个页面传递到另一个页面，无需表单且不传入 URL

> ID：12560055
> 
> 赞同：1
> 
> 时间：2012-09-24T06:43:57.280
> 
> 标签：php, forms, url, post, submit

我正在做一个项目，我需要始终访问干净的 URL，即不能在 URL 中传递任何参数来获取另一个页面上的值。

任何人都可以建议“表单提交”方法以外的替代方法。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T06:49:01.757

用于`$_SESSION`此目的。

使用`$_SESSION`您可以在多个页面中随心所欲地使用变量。

`// assigning variable`

`$_SESSION['name']="variable";`

`//retrieving`

`echo $_SESSION['name'];`

写`session_start()`在页面顶部你想要`$_SESSION`变量的地方

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T06:49:49.887

[会话](http://php.net/manual/en/ref.session.php)可以帮助，或者ajax调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T06:49:52.633

对于 Clean URL，我更喜欢您可以使用**HTTP POST**方法。希望有帮助。

```
<form name="frmApp" method="POST" action="/action.php">
</form> 
```

否则，您可以使用**AJAX**和**jQuery**将值提交到另一个页面。

```
$.ajax({url:"action.php",success:function(result){
  $("div").html(result);
}}); 
```

查看 w3schools 以开始使用 AJAX：[http ://www.w3schools.com/jquery/jquery_ajax.asp](http://www.w3schools.com/jquery/jquery_ajax.asp)

不支持**SESSION**，因为我不喜欢在我的网页中编写**php代码。**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-24T06:52:13.410

对于使用干净的 url，您可以在表单中使用 post 方法

```
 <form name='' method='POST' action=''> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T06:52:09.710

您可以尝试将资源映射到 url。

假设您想获取客户的邮寄地址，那么您可以写信。

http://[baseurl]/[customerId]/mailingaddress。

[在这里](http://www.artima.com/weblogs/viewpost.jsp?thread=153170)阅读更多

# php - htaccess rewriteRule 修复

> ID：12560062
> 
> 赞同：1
> 
> 时间：2012-09-24T06:44:39.383
> 
> 标签：php, rewrite

我在这里有一点问题

```
http//site.com/detial.php?verifyID=$parametre 
```

我想要这样的短网址：

```
http://site.com/$parametre 
```

我们该怎么办？谢谢

```
Options +FollowSymLinks
RewriteEngine on

RewriteRule ^([^/]*)\$ /detial.php?parametre=$1 [L]
# Error Pages
ErrorDocument 404 /404.php
<Files 403.shtml>
order allow,deny
allow from all
</Files> 
```

我正在使用它但给出 404 错误我们该如何解决

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T07:02:53.403

试试下面的代码。

```
RewriteEngine On
RewriteRule ^([a-zA-Z0-9_-]+)$ detial.php?parametre=$1
RewriteRule ^([a-zA-Z0-9_-]+)/$ detial.php?parametre=$1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T07:10:34.920

假设 PHP

```
header("content-type: text/plain");
if (isset($_GET['q']))
  echo $_GET['q'];
else
  echo "empty"; 
```

`$_GET['q']`您可以通过以下方式获取URL

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.*)$ index.php?q=$1 [QSA,L]
</IfModule> 
```

请注意，它还将检查请求的资源是否不是文件系统中的现有文件`!-f`或目录`!-d`

# php - 如何在 xpath 查询中使用多个条件？

> ID：12560065
> 
> 赞同：2
> 
> 时间：2012-09-24T06:44:49.913
> 
> 标签：php, xml, xpath

```
 $elements = $xpath->query(
   "//message[(@sender ='".$from." and @receiver = '".$username."') or
   (@receiver='unread' and @sender = '".$username."')]"
  ); 
```

这段代码有什么问题？`SELECT data WHERE ((sender == from AND receiver = username)OR(sender == username AND receiver = from))`我的 xml 文件中需要这样的东西

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T06:56:50.020

改为使用[`sprintf`](http://php.net/sprintf)。它不那么混乱，更容易发现错误。

```
$query = sprintf(
    '//message[
        (@sender = "%1$s" and @receiver = "%2$s") or
        (@receiver="unread" and @sender = "%2$s")
    ]',
    $from,
    $receiver
); 
```

此外，请确保清理`$from`并`$receiver`防止[XPath 注入攻击](https://www.owasp.org/index.php/XPATH_Injection)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T06:48:18.360

在此部分之后，您缺少一个结束单引号：

```
(@sender ='".$from." 
```

你的一般方法没有错。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T08:06:36.973

您的代码的问题之一是您将自己暴露在注入攻击之下。你真的相信 $from 和 $username 是简单的字符串吗？与使用字符串连接构建查询相比，设置参数化查询（其中参数由外部提供）要安全得多（也更快）。我不知道您使用的 PHP API 是否允许您这样做。

# android - 通过 Android 和 iOS 应用程序在 MS-word 文件中发布内容的最佳策略是什么

> ID：12560067
> 
> 赞同：-1
> 
> 时间：2012-09-24T06:44:52.753
> 
> 标签：android, ios, ms-word

我们在 MS-word 文件中有很多内容。我们想通过 Android 和 iOS 应用程序发布此内容。在 Android 和 iOS 应用程序中以 MS-word 文件发布内容的最佳策略是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T09:25:40.010

所以它是doc文件？

如果我没记错的话，因为没有 api，因为微软拥有许可，你必须以某种方式转换它们并查看它们。应该是pdf。您打算将它们保存在本地还是服务器上？

# c# - 如何在标签中显示多页图像？

> ID：12560070
> 
> 赞同：0
> 
> 时间：2012-09-24T06:45:11.053
> 
> 标签：c#, html, reportviewer

我已经从 ReportViewer 创建了一个图像字节数组，如下所示

```
bytes=  reportViewer.ServerReport.Render("Image", null, out mimeType, out encoding, out extension, out streamids, out warnings); 
```

我使用下面的代码保存在物理路径中，该代码创建了一个包含 12 页的图像。

```
System.IO.File.WriteAllBytes(@"C:\test.jpeg", bytes); 
```

我想在`<img>`标签中显示这张图片，所有页面一个接一个。

我试过`<img src="c://test.jpeg" />`只显示第一页。

谁可以帮我这个事 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T07:03:50.117

要显示多张图片，请使用 html`<img>`标签。

要显示独特的图片，我建议您将图片重新标记为 img1、img2、img3 等，以便在您的 img 标签中执行以下操作：

```
<img src="folder/img<?php echo rand(1,10); ?>.jpg" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T11:55:07.260

在下面找到我用来解决此问题的答案。找到步骤

首先-从图像流中获取所有帧作为图像列表

```
public List<Image> GetAllFrames(Stream sm)
        {
            List<Image> images = new List<Image>();
            Bitmap bitmap = new Bitmap(sm);
            int count = bitmap.GetFrameCount(FrameDimension.Page);
            for (int idx = 0; idx < count; idx++)
            {
                bitmap.SelectActiveFrame(FrameDimension.Page, idx);
                MemoryStream byteStream = new MemoryStream();
                bitmap.Save(byteStream, ImageFormat.Tiff);

                images.Add(Image.FromStream(byteStream));
            }
            return images;
        } 
```

第二 - 将所有帧组合成一个位图。

```
public Bitmap CombineAllFrames(List<Image> test)
        {
            int width = 0;
            int height = 0;
            Bitmap finalImage = null;
            try
            {
                foreach (Bitmap bitMap in test)
                {
                    height += bitMap.Height;
                    width = bitMap.Width > width ? bitMap.Width : width;
                }
                finalImage = new Bitmap(width, height);
                using (System.Drawing.Graphics gc = Graphics.FromImage(finalImage))
                {
                    gc.Clear(Color.White);
                    int offset = 0;
                    foreach (Bitmap bitmap in test)
                    {
                        gc.DrawImage(bitmap, new Rectangle(0, offset, bitmap.Width, bitmap.Height));
                        offset += bitmap.Width;
                    }
                }
            }
            catch (Exception)
            {
                throw;
            }
            return finalImage;
        } 
```

此方法创建一个位图，它将所有帧垂直附加到单个帧中。如果你想让它水平更新它

```
 width += bitmap.Width;
           height = bitmap.Height > height ? bitmap.Height : height;
g.DrawImage(image, 
           new System.Drawing.Rectangle(offset, 0, image.Width, image.Height)); 
```

第三步 - 现在，如果您想要创建图像的字节数组，请调用以下方法。

```
public byte[] GetBytesFromImage(Bitmap finalImage)
        {
            ImageConverter convertor = new ImageConverter();
            return (byte[])convertor.ConvertTo(finalImage, typeof(byte[]));
        } 
```

我认为这将有助于一些真正需要的人。如果有人找到简单的方法，请发布。

# php - php中的基本pdo oop

> ID：12560071
> 
> 赞同：2
> 
> 时间：2012-09-24T06:45:15.787
> 
> 标签：php, oop, pdo

我是 php oop 的新手。我在显示我的字段值时遇到了麻烦。我这里有 ff 课程。

```
public static function getAll()
{

    self::conn();

    try
    {

        $sql = "SELECT * FROM dbo.guitar";

        $q = self::$db->prepare($sql);
        $q->execute();
        $results = $q->fetchAll(PDO::FETCH_CLASS | PDO::FETCH_PROPS_LATE,
                "Guitar",
                array('id', 'make', 'model', 'colour', 'price'));

    }
    catch (Exception $e)
    {
        print "Error!: " . $e->getMessage();
    }

    return $results;    
} 
```

我希望它从差异字段中显示。这是我的代码：

```
$guitars = Guitar::getAll(); 
```

当我尝试使用`print_r`

我想要的是这样的。

```
echo $row['field1'];  echo $row['field2']; 
```

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T06:54:05.160

您正在将结果作为对象获取，因此您可以这样做：

```
$guitars = Guitar::getAll();
foreach ($guitars as $guitar) {
  echo $guitar->getId();
  echo $guitar->getMake();
  // ... and so on
} 
```

***补充：***

您需要有构造函数来设置属性，并提供公共方法来访问该属性。

```
class Guitar {
  private $id;
  private $make;
  private $model;
  private $color;
  private $price;

  public function __construct($id, $make, $model, $color, $price) {
    $this->id = $id;
    $this->make = $make;
    $this->model = $model;
    $this->color = $color;
    $this->price = $price;
  }

  public function getId() {
    return $this->id;
  }

  public function getMake() {
    return $this->make;
  }
  // and so on...
} 
```

# c# - 在 asp.net (findcontrol) 中处理动态控制

> ID：12560074
> 
> 赞同：0
> 
> 时间：2012-09-24T06:45:40.080
> 
> 标签：c#, asp.net, dynamic

我使用更新面板和脚本管理器向表格添加新行，每行有 4 个文本框。现在，如果已将它们添加到表格中，我该如何处理并使用它们！

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server">
            <ContentTemplate>
                <asp:Table ID="Table5" runat="server" Width="100%">
                    <asp:TableHeaderRow>
                        <asp:TableHeaderCell ID="TableHeaderCell1" runat="server">1</asp:TableHeaderCell><asp:TableHeaderCell
                            ID="TableHeaderCell2" runat="server">2</asp:TableHeaderCell><asp:TableHeaderCell
                                ID="TableHeaderCell3" runat="server">3</asp:TableHeaderCell><asp:TableHeaderCell
                                    ID="TableHeaderCell4" runat="server">4</asp:TableHeaderCell></asp:TableHeaderRow>
                    <asp:TableRow>
                    </asp:TableRow>
                </asp:Table>
                <center>
                    <asp:ImageButton ID="ImageButton1" runat="server" OnClick="ImageButton1_Click"
                    ImageUrl="~/Images/add.jpg" ValidationGroup="AddSavabegh" /></center>
                <br />
            </ContentTemplate>
        </asp:UpdatePanel> 
```

后面的代码：

```
 private void GenerateTable(int rowsCount)
    {
        const int colsCount = 4;
        for (int i = 0; i < rowsCount; i++)
        {
            TableRow row = new TableRow();
            for (int j = 0; j < colsCount; j++)
            {
                TableCell cell = new TableCell();
                TextBox tb = new TextBox();
                tb.ID = "txtSabeghe_" + (i+1) + "Col_" + (j+1);
                cell.Controls.Add(tb);
                row.Cells.Add(cell);
            }
            Table5.Rows.Add(row);
        }
        SetPreviousData(rowsCount, colsCount);
        rowsCount++;
        ViewState["RowsCount"] = rowsCount;
    } 
```

我使用了这个，但它返回 null ：

```
protected void Button1_Click(object sender, EventArgs e)
    {
        for (int i = 0; i < 3; i++)
        {
            for (int j = 0; i < 4; i++)
            {
                TextBox tb = (TextBox)UpdatePanel1.FindControl("txtSabeghe_" + (i+1) + "Col_" + (j+1));
                Response.Write(tb.Text);
            }
        } 

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T07:30:07.893

`GenerateTable`在您之前回发 Button1 单击事件时调用`FindControl()`..

# .net - 托管 ASP.Net Web 服务

> ID：12560079
> 
> 赞同：1
> 
> 时间：2012-09-24T06:45:54.913
> 
> 标签：.net, web-services, visual-studio-2008

我不知道如何在网络托管中托管网络服务。我一步一步找不到任何解释。我尝试了很多事情来做到这一点。

我在 Visual Studio 2008 中创建了 Web 服务，并设法在本地使用它。我可以在本地添加对我的应用程序的 Web 引用。但是当我将网络服务上传到我的主机时，我无法使用它。我将它上传到 php 和 windows 服务器，但它在那里不起作用。

有什么办法（当然有）可以做到这一点。任何链接来解释如何做到这一点？

谢谢你的帮助。

# c# - 实体框架中“此RelationshipManager无法返回RelatedEnd”异常的根本原因是什么？

> ID：12560081
> 
> 赞同：5
> 
> 时间：2012-09-24T06:46:03.147
> 
> 标签：c#, .net, entity-framework-4.3

我正在使用 ASP .NET MVC 3.0 Web 应用程序中的 Entity Framework 4.3.1，我有一些代码可以分离旧对象并将其替换为如下所示的新对象：

```
public void UpdateUnattached(T entryToUpdate, T updatedEntry)
{
    var ctx = (EntityFrameworkContext) _context;           
    ctx.ChangeObjectState(EntityState.Detached, entryToUpdate);
    _set.Attach(updatedEntry);       
    ctx.ChangeObjectState(EntityState.Modified, updatedEntry);
} 
```

这一直有效，除了一种情况，当我得到下面的异常时`_set.Attach`。

> 此RelationshipManager 不能返回RelatedEnd。对于由 ObjectStateManager 跟踪或实现 IEntityWithRelationships 的对象，RelatedEnd 只能由 RelationshipManager 返回。

对象图非常深，我认为它告诉我有一个属性已设置为未在某处跟踪更改的对象（如果我错了，请纠正我）。所以，我的问题是...

**如何找出此异常的根本原因是什么？**

我尝试在它周围放置一个 try/catch 并调用`GetValidationErrors`catch ，但这也会引发相同的异常。

来自异常的更多信息（`InnerException`为空）...

```
Type: System.InvalidOperationException 
Source: System.Data.Entity 
Target site: GetRelatedEndInternal 
Stacktrace: at System.Data.Objects.DataClasses.RelationshipManager.GetRelatedEndInternal(String relationshipName, String targetRoleName) 
at System.Data.Objects.EntityEntry.FindRelatedEntityKeysByForeignKeys(Dictionary`2& relatedEntities, Boolean useOriginalValues) 
at System.Data.Objects.EntityEntry.TakeSnapshotOfForeignKeys() 
at System.Data.Objects.ObjectStateManager.PromoteKeyEntryInitialization(EntityEntry keyEntry, IEntityWrapper wrappedEntity, IExtendedDataRecord shadowValues, Boolean replacingEntry) 
at System.Data.Objects.ObjectContext.AttachSingleObject(IEntityWrapper wrappedEntity, EntitySet entitySet, String argumentName) 
at System.Data.Objects.ObjectContext.AttachTo(String entitySetName, Object entity) 
at System.Data.Entity.Internal.Linq.InternalSet`1.ActOnSet(Action action, EntityState newState, Object entity, String methodName) 
at System.Data.Entity.Internal.Linq.InternalSet`1.Attach(Object entity) 
at System.Data.Entity.DbSet`1.Attach(TEntity entity) 
at ... snip ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-05T07:03:24.923

通过查看错误消息，我猜测您正在尝试附加与 ObjectStateManager 未跟踪的其他对象（即可能不是实体）有关系的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-01T05:17:15.453

这更像是一种解决方法，而不是实际的解决方案......

我已经能够确定问题与作为集合的属性有关。我怀疑 Linq 可能正在尝试填充空集合。

检查有问题的对象，我发现我可以解决这样的问题：

旧代码：

```
var myObject = db.MyObjectCollection.Find(x=>x.id = myId); 
```

新代码

```
 var myCollection = db.MyObjectCollection.Where(x=>x.id = myId);
 if(myCollection != null && myCollection.Count() > 0){
     var myObject = myCollection.First();
 } 
```

这解决了错误。但是，此解决方案的问题在于它仅在引发错误的单一情况下解决了问题，并且不能保证它不会在其他地方出现。事实上，这有点像玩 Whack-Em-All，因为错误在其他情况下会再次出现。

# c# - 不是为多线程设计的 Asp.Net Mvc 和 Win32 dll

> ID：12560086
> 
> 赞同：0
> 
> 时间：2012-09-24T06:46:53.457
> 
> 标签：c#, asp.net-mvc, com, thread-safety, mta

我需要构建一个 Web 应用程序 (MVC)，它使用第三方 win32 dll 作为所有业务逻辑的网关（包含登录机制、功能和维护一些状态）。此 dll 不是为多线程设计的。在 MTA 方案中，dll 在一定时间后发生故障。推荐的解决方案是在 ASP-Classic 模式下运行 ASP.NET MVC（STA 使用 Asp-CompatHandler）。我成功地尝试了这个 - 一切运行稳定。问题是，会有很多并发用户，一些函数调用需要几秒钟（最多 10 秒！）。如果所有用户互相阻止，这将变得可怕。在同一应用程序中最小化阻塞效应的最佳方法是什么？说只有十个用户应该互相阻止？

最好是： ...网络在 MTA 中运行 ...网络只需部署一次 ...一切都在同一个进程中运行

谁能给我一些建议来解决这个问题？

谢谢！马丁

**更新 - 找到解决方案：** 感谢 Ami Bar 的“智能线程池”，我可以（轻松）完成我正在寻找的行为。我实现了一个工作者概念（特定数量的用户共享一个工作者并在该工作者中相互阻塞），对于每个工作者，我现在拥有自己的线程池实例，其中一个线程的最大和最小数量。好吧，这不是线程池的想法，但它使处理工作项变得非常容易，并且它还有一些不错的其他功能。Web 应用程序现在正在 MTA 上运行。我将准备一些负载测试，看看它在几个小时内是否稳定。见这里： http: [//www.codeproject.com/Articles/7933/Smart-Thread-Pool](http://www.codeproject.com/Articles/7933/Smart-Thread-Pool)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T11:13:46.983

不幸的是，如果 dll 不是为并行请求而设计的，则不能将它用于并行请求。

我为您看到的在不让应用程序并行运行的情况下增加并发用户数量的唯一解决方案是让应用程序的多个实例同时运行，在它们前面可能有一个负载均衡器来分派查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T11:11:03.003

答案很简单，尽管我认为您不会很喜欢：您不能在多线程环境中使用并非设计用于多线程环境的东西。

2种可能性：

*   与 STA 一起生活
*   将单线程 COM 对象替换为打算在 Web 应用程序中使用的对象

# java - 随机访问文件java

> ID：12560087
> 
> 赞同：-1
> 
> 时间：2012-09-24T06:47:02.053
> 
> 标签：java, random-access

我从 .csv 文件中读取，并且在每行的开头都得到了这个奇怪的数字

12195820118109888100071.53 这样的东西，你认为这可能是我的错误

```
while ((line = bufRdr.readLine()) != null) {
    input = line.split(",");
    System.out.println(line); 
```

这就是我使用和打印每一行的内容。第一行是正确的，但从第二行开始，我看到一串数字，如下所示：`69363520177627835700077.119`. 请帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T07:04:44.327

通常 CSV 文件内容用逗号分隔，但在某些情况下，它可能是制表分隔格式、MySQL 或 excel 生成格式。您可以使用[Apache Commons CSV](http://commons.apache.org/csv/)，它可以处理 csv 文件的 DEFAULT、EXCEL、MYSQL 或 TDF 格式。例如 -

```
Reader in = new StringReader("a,b,c");
for (String[] line : CSVFormat.DEFAULT.parse(in)) {
    for (int i = 0; i < line.length; i++) {
        System.out.println("value " + i + "=" + line[i]);
    }
} 
```

*   DEFAULT - 标准逗号分隔格式
*   EXCEL - Excel 文件格式
*   MYSQL - 默认 MySQL 格式
*   TDF - 制表分隔格式

# html - IE、Firefox、Chrome、Safari和Opera、Nginx服务器中的交叉兼容视频格式

> ID：12560089
> 
> 赞同：1
> 
> 时间：2012-09-24T06:47:04.367
> 
> 标签：html, video, nginx, flask

我正在使用 video.js 插件在 html5 视频标签的浏览器中播放 Mp4 和 flv。我的研究发现视频的格式很重要，我的视频格式现在不是问题。虽然在本地开发服务器（Flask）的IE、safari、firefox、chrome中播放flv和mp4，但是nginx中的远程服务器在safari中播放flv和在IE中播放mp4时出现问题。有什么建议么？

# php - 减小 WWW-Authenticate Box 的宽度

> ID：12560096
> 
> 赞同：1
> 
> 时间：2012-09-24T06:47:30.457
> 
> 标签：php, basic-authentication

只是想问一下这个 php 基本访问身份验证，是否有减少宽度或更改文本“正在请求用户名和密码`http://localhost`。该站点说：“本地站点””。

这是一个示例：http: [//imageshack.us/a/img542/7557/auth.jpg](http://imageshack.us/a/img542/7557/auth.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T06:53:53.117

不，您不能向该窗口添加设计。但是您可以更改部分文本。

在 apache 配置（或 .htaccess 文件）中，您有如下内容：

```
<Location /secure>
AuthType basic
AuthName "private area"
AuthBasicProvider dbm
AuthDBMType SDBM
AuthDBMUserFile /www/etc/dbmpasswd
Require valid-user
</Location> 
```

AuthName 指令是在您的配置中显示“本地站点”的部分。在这里，您可以输入您想对用户说的任何内容。

一旦站点被部署并通过真实的主机名访问，主机名就会改变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T06:50:32.880

来自 PHP 网站**NO**。

唯一的方法是在 Firefox 中重建 XUL。

> [Firefox 安装文件夹]\omni.ja\xul\chrome\toolkit\content\global\commonDialog.css
> 
> [Firefox 安装文件夹]\omni.ja\xul\chrome\toolkit\content\global\commonDialog.xul

# android - ksoap2 的 request.addproperty 中信封的最大大小

> ID：12560109
> 
> 赞同：1
> 
> 时间：2012-09-24T06:48:53.663
> 
> 标签：android, ksoap2

尝试使用 ksoap2 上传 base64 编码图像时出现以下错误，我需要帮助

org.xmlpull.v1.XmlPullParserException：意外类型（位置：END_DOCUMENT null@1:1 in java.io.InputStreamReader@4101e708）

当我尝试上传小图像时它工作正常，甚至当我尝试上传 1MB 图像时它工作正常。

以下是场景：我在资产文件夹中创建了数据包文件夹。我使用以下代码访问我的图像：

```
AssetManager am = getAssets();
            // am.open("packet/sky.png", MODE_PRIVATE);
            InputStream is = am.open("packet/sky.png", MODE_PRIVATE); 
```

如果我将图像放在 res 文件夹中并写入：

```
getResources().openRawResource(R.drawable.sky); 
```

它工作正常，但当我尝试使用 AssetManager 时却不行。

我有以下用于 ksoap 调用的代码

```
SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
        request.addProperty("xml", param);

        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                SoapEnvelope.VER11);
        envelope.setOutputSoapObject(request);

        HttpTransportSE transportSE = new HttpTransportSE(URL);

        transportSE.call(SOAP_ACTION, envelope);

        SoapObject result = (SoapObject) envelope.bodyIn; 
```

我得到 XMLPullParserException。

ksoap2 请求有大小限制吗？

# javascript - 需要知道屏幕上显示的是哪个 div

> ID：12560110
> 
> 赞同：0
> 
> 时间：2012-09-24T06:48:58.340
> 
> 标签：javascript, jquery

我正在实现滑动效果，但通过计算 x、y 坐标来移动上 div 的位置，然后用屏幕宽度移动包装器（最上面的 div），所以它看起来像滑动效果。

现在我的问题是我不知道屏幕上显示的下一个 div 中的哪个，我需要对其进行操作，有什么方法可以获取当前显示在 DIV 上的 div id。

下面是我的 JS 代码

```
 (function() {
   var swipey = {
      slideContainer: null, //<ul> element object that holds the image slides
      wrapper: null, //meant for masking/clipping
      slides: null, //array of all slides i.e <li> elements
      distanceX: 0, //distance moved in X direction i.e left or right
      startX: 0, //registers the initial touch co-ordinate
      preferredWidth: 0, //dynamic variable to set width
      preferredHeight: 0, //dynamic variable to set height
      direction: "", //direction of movement
      timer: null, //timer that set starts when touch starts
      timerCounter: 0, //counter variable for timer
      hasSwipeStarted: false, //boolen to chk whether touch has started
      maxDistance: 0, //maximum distance in X direction that slide container can move
      currentDistance: 0, //current distance moved by slide container through translate

      //detect touch and then automatically assign events
      isTouchSupported: 'ontouchstart' in window.document,

      initSwipey: function() {
         //         alert('in initSwipey');
         //scroll the window up to hide the address bar of the browser.
         window.setTimeout(function() {
            window.scrollTo(0, 1);
         }, 100);

         /*mapping touch events to mouse events. Automatic registration of event
            based on the device. If touch enabled then touch event is registered.
            and if desktop browser then mouse event is registered.*/
         swipey.startEvent = swipey.isTouchSupported ? 'touchstart' : 'mousedown',
         swipey.moveEvent = swipey.isTouchSupported ? 'touchmove' : 'mousemove',
         swipey.endEvent = swipey.isTouchSupported ? 'touchend' : 'mouseup',

         //get all the instances of the HTML elements
         swipey.wrapper = document.getElementById("wrapper");
         swipey.slideContainer = document.getElementById("sitePageContainer");
         //swipey.slides = slideContainer.getElementsByTagName("li");
         swipey.slides = document.getElementsByClassName("sitePage");

         //for iPhone, the width and height
         swipey.preferredWidth = window.innerWidth;
         //            alert("swipey.preferredWidth: " + swipey.preferredWidth);
         swipey.preferredHeight = window.innerHeight; //510 for android
         //            alert("swipey.preferredHeight: " + swipey.preferredHeight);
         //setting the width and height to our wrapper with overflow = hidden
         swipey.wrapper.style.width = swipey.preferredWidth + "px";
         //            alert("swipey.wrapper.style.width: " + swipey.wrapper.style.width);
         swipey.wrapper.style.height = swipey.preferredHeight + "px";
         //            alert("swipey.wrapper.style.height: " + swipey.wrapper.style.height);
         //setting the width to our <ul> element which holds all the <li> elements
         swipey.slideContainer.style.height = swipey.preferredHeight + "px";
         //            alert("swipey.slideContainer.style.height: " + swipey.slideContainer.style.height);
         swipey.slideContainer.style.width = swipey.slides.length *  swipey.preferredWidth + "px";
         //            alert("swipey.slideContainer.style.width: " + swipey.slideContainer.style.width);
         //display the <ul> container now
         swipey.slideContainer.style.display = "inline-block";
         //setting width and height for <li> elements - the slides
         for(var i=0;i<swipey.slides.length;i++)
         {
            swipey.slides[i].style.width = swipey.preferredWidth + "px";
            swipey.slides[i].style.height = swipey.preferredHeight + "px";
         }
         //calculating the max distance of travel for Slide Container i.e <ul> element
         swipey.maxDistance = swipey.slides.length * swipey.preferredHeight;
         //initialize and assign the touch events
         swipey.initEvents();
      },
      initEvents: function() {
         //registering touch events to the wrapper

         //$('#wrapper').bind(swipey.startEvent, swipey.startHandler );
         $('#wrapper').bind(swipey.startEvent, function(e){
            $('#wrapper').bind(swipey.moveEvent, swipey.moveHandler );
         } );

         $('#wrapper').bind(swipey.endEvent, swipey.endHandler );
      //swipey.wrapper.addEventListener(swipey.startEvent, swipey.startHandler, false);
      //swipey.wrapper.addEventListener(swipey.moveEvent, swipey.moveHandler, false);
      //swipey.wrapper.addEventListener(swipey.endEvent, swipey.endHandler, false);
      },
      //funciton called when touch start event is fired i.e finger is pressed on the screen
      startHandler: function(event) {
         //create appropriate event object to read the touch/mouse co-ordinates
         var eventObj = swipey.isTouchSupported ? event.touches[0] : event;

         //stores the starting X co-ordinate when finger touches the device screen
         swipey.startX = eventObj.pageX;
         //timer is set on
         swipey.timer = setInterval(function() {
            swipey.timerCounter++;
         }, 10);
         swipey.hasSwipeStarted = true;
         event.preventDefault(); //prevents the window from scrolling.
      },
      //funciton called when touch move event is fired i.e finger is dragged over the screen
      moveHandler: function(event) {
         if (swipey.hasSwipeStarted) {
            //create appropriate event object to read the touch/mouse co-ordinates
            var eventObj = swipey.isTouchSupported ? event.touches[0] : event;

            swipey.distanceX = eventObj.pageX - swipey.startX;
            //move the slide container along with the movement of the finger
            swipey.slideContainer.style.webkitTransform = "translate3d(" + (swipey.distanceX + swipey.currentDistance) + "px, 0,0)";
         }else{
            swipey.startHandler(event);
         }
      },
      //funciton called when touch end event is fired i.e finger is released from screen
      endHandler: function(event) {
         $('#wrapper').unbind(swipey.moveEvent, swipey.moveHandler );
         clearInterval(swipey.timer); //timer is stopped
         if(swipey.distanceX == 0) //if the intention is to tap on the image then open a link
         {
            var link_url = event.target.getAttribute("link"); //read the link from <img /> element
         //  window.open(link_url,"_blank");
         }
         else
         {
            if (swipey.distanceX > 0) {
               swipey.direction = "right";
            }
            if (swipey.distanceX < 0) {
               swipey.direction = "left";
            }
            //the following conditions have been discussed in details
            if ((swipey.direction == "right" && swipey.currentDistance == 0) || (swipey.direction == "left" && swipey.currentDistance == -(swipey.maxDistance - swipey.preferredWidth))) {
               swipey.comeBack();
            }
            else if (swipey.timerCounter < 30 && swipey.distanceX > 10) {
               swipey.moveRight();
            }
            else if (swipey.timerCounter < 30 && swipey.distanceX < -10) {
               swipey.moveLeft();
            }
            else if (swipey.distanceX <= -(swipey.preferredWidth / 2)) { //-160
               swipey.moveLeft();
            }
            else if (swipey.distanceX >= (swipey.preferredWidth / 2)) { //160
               swipey.moveRight();
            }
            else {
               swipey.comeBack();
            }
         }
         swipey.timerCounter = 0; //reset timerCounter
         swipey.hasSwipeStarted = false; //reset the boolean var
         swipey.distanceX = 0; //reset the distance moved for next iteration

         //alert(event.screenX+"::"+event.screenY);
         var element = document.elementFromPoint(event.screenX, event.screenY);
         var $element = $(element);

         alert($element.attr('id'));
         $("div.fixHeader").hide();
         $("#"+$element.attr('id')+" div.fixHeader").show();

      },
      moveLeft: function() {
         swipey.currentDistance += -swipey.preferredWidth;
         swipey.slideContainer.style.webkitTransitionDuration = 300 + "ms";
         //using CSS3 transformations - translate3d function for movement
         swipey.slideContainer.style.webkitTransform = "translate3d(" + swipey.currentDistance + "px, 0,0)";
      },
      moveRight: function() {
         swipey.currentDistance += swipey.preferredWidth;
         swipey.slideContainer.style.webkitTransitionDuration = 300 + "ms";
         swipey.slideContainer.style.webkitTransform = "translate3d(" + swipey.currentDistance + "px, 0,0)";
      },
      comeBack: function() {
         swipey.slideContainer.style.webkitTransitionDuration = 250 + "ms";
         swipey.slideContainer.style.webkitTransitionTimingFunction = "ease-out";
         swipey.slideContainer.style.webkitTransform = "translate3d(" + swipey.currentDistance + "px, 0,0)";
      }
   }; //end of swipey object
   window.swipeyObj = swipey; //expose to global window object
})();

window.onload = function() {
   swipeyObj.initSwipey();
}  //invoke the init method to get started 
```

**更新：**

下面是结构，现在我正在滑动sitePageContainer，并且sitePage出现在屏幕上，现在我想知道屏幕上显示的是哪个div（partypicturespage1或partypicturespage2）

```
<div id="wrapper">
         <div id="sitePageContainer">
            <div class="sitePage" id="partypicturespage1"></div>
            <div class="sitePage" id="partypicturespage2"></div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T07:00:54.573

您可以通过以下方式选择可见的 div：

```
$("div.fixHeader:visible") 
```

**更新：**

如果您的所有 div 都可见，则使用自定义 data-* 属性来跟踪当前视图中的 div。您可以通过以下方式进行操作：

```
$("div.fixHeader").attr('data-visible', true); 
```

并通过以下方式选择它：

```
$("div.fixHeader[data-visible=true]"); 
```

并且您删除了该属性，因此您不会选择不再显示的 div：

```
$("div.fixHeader[data-visible=true]").attr('data-visible', false); 
```

**更新#2：**

如果通过设置容器的 left 属性来滚动页面，那么通过以下伪代码计算来确定哪个 div 在视图中：

```
ceil(scrollContainer.left / divWidth) // if index starts from 1
floor(scrollContainer.left / divWidth) // if index starts from 0 
```

# javascript - 在phonegap中使用css html的标签

> ID：12560114
> 
> 赞同：0
> 
> 时间：2012-09-24T06:49:08.793
> 
> 标签：javascript, html, css, cordova

我正在使用 css 和 html 为移动设备制作标签。我当前的代码显示了一些奇怪的行为。我当前的代码显示了如下图所示的选项卡。您可以看到所有选项卡都放错了位置，并且这些选项卡内的图标略微位于右侧，但我希望它位于选项卡的中心。我可以将该图标向左移动以使其出现在 Photoshop 的中心，但如果我在更大屏幕的移动设备上测试此应用程序，则此图标将出现在左侧。我希望他们始终处于中心位置。所以请告诉我如何才能像普通移动应用程序一样制作更好的标签？

这是mu html代码

```
<footer>
    <ul>
        <li class="tabs"><a href="#"></a></li>
        <li class="tabs"><a href="#"></a></li>
        <li class="tabs"><a href="#"></a></li>
    </ul>
</footer> 
```

这是我的CSS

```
footer {
  position: absolute;
  z-index: 2;
  bottom: 0;
  left: 0;
  width: 100%;
  height: 50px;
  padding: 0;
  background: #535353; 
}
footer ul {
   list-style-type: none;
   margin: 0;
   padding: 0; 
}
footer ul li {
  display: inline-block;
  width: 31%;
  height: 50px; 
}
footer ul li a {
  display: block;
  text-decoration: none;
  height: 100%;
  width: 100%;
  background: #fff;
  background: url(../../../img/tabs.png) top left no-repeat; 
} 
```

这是图像：

![图片](../Images/def45fe844042ac1c6d3e835bddb4cd5.png)

**更新**

这是我的新 CSS

```
footer {
position: absolute;
z-index: 2;
bottom: 0;
left: 0;
width: 100%;
height: 50px;
padding: 0;
background: #ccc; }
footer ul {
  list-style-type: none;
  margin: 0;
  padding: 0;
  text-align: center; }
  footer ul li {
    display: block;
    float: left;
    width: 33.33%;
    line-height: 50px;
    text-align: center;
    overflow: hidden; }
    footer ul li a {
      display: block;
      text-decoration: none;
      margin: 1px;
      height: 100%;
      width: 100%;
      background: url(../../../img/tabs.png) center no-repeat;
      /*
      &.home {
        background: url(../../../img/tabs.png) top left no-repeat;
      }
      &.profile {
        background: url(../../../img/tabs.png) top left no-repeat;
      }
      &.cam {
        background: url(../../../img/tabs.png) top left no-repeat;
      }*/ }
      footer ul li a.current {
        margin-top: 5%;
        height: 80%;
        width: 80%;
        background-color: #ccc;
        text-indent: -9999px;
        border-radius: 5px;
        -webkit-box-shadow: inset 0 0 50px #666;
        -moz-box-shadow: inset 0 0 50px #666;
        box-shadow: inset 0 0 50px #666; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T07:33:53.940

这是一个[演示小提琴](http://jsfiddle.net/ymKkK/1/)。我做了什么

*   `text-align: center`到`ul`，所以这是继承的，一切都居中
*   `line-height`设置为`width`，所以一切都垂直居中
*   列表元素是`display:block`,`width: 33.33%`和`float:left`- 我还添加了`overflow:hidden`
*   `a`元素有`width: 100%`和`margin: 1px`

您现在可以通过添加图像和/或真实文本来使用它。

# iphone - iPhone Storyboard - 将类分配给情节提要中的视图控制器

> ID：12560117
> 
> 赞同：2
> 
> 时间：2012-09-24T06:49:19.993
> 
> 标签：iphone, ios, storyboard, uistoryboard, uistoryboardsegue

我使用情节提要创建了一个简单的应用程序。在故事板文件中，我拖了一个视图控制器。我想为新添加的视图控制器分配一个类。为此，我单击 Xcode 中的新文件，单击`Objective c class`，输入类名`MyViewController`，子类属于 UIViewController。我回到故事板并单击`Custom class`类型并在类选项卡中给出 MyViewController。但它不接受这个。如果我取消选择视图控制器并选择，自定义类再次显示“UIView”。

我正在使用 Xcode 版本 4.3.3 (4E3002)。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-05T16:32:41.733

即使一切都很好，xcode 也会解决这个问题。关闭您的 xcode 项目，然后退出 xcode。重新开始，您将能够在下拉菜单中找到该课程。

# iphone - 在尝试将 ios 应用程序发布到应用程序商店之前需要完成的事情

> ID：12560119
> 
> 赞同：0
> 
> 时间：2012-09-24T06:49:35.490
> 
> 标签：iphone, objective-c, ios, ipad, app-store

我正在尝试在 App Store 上发布一个应用程序。根据 Apple 的说法，几乎没有什么事情需要验证以确保您的应用程序获得 Apple 的批准。因此，我想知道在尝试将 ios 应用程序发布到应用商店之前，我需要了解或使用我的应用程序做什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T06:55:21.663

此 URL 将为您提供“添加新的 iOS 或 OS X 应用程序”的完整信息

[添加新的 iOS 或 OS X 应用程序](http://developer.apple.com/library/ios/#documentation/LanguagesUtilities/Conceptual/iTunesConnect_Guide/8_AddingNewApps/AddingNewApps.html)

# lotus-notes - 注释错误：服务器上不生成索引。（查看名称）

> ID：12560125
> 
> 赞同：0
> 
> 时间：2012-09-24T06:49:54.417
> 
> 标签：lotus-notes

我有一个需要动态视图的数据库。视图选择将根据用户角色而改变。我正在使用“共享，首次使用时私有”视图来执行此操作，以便当用户第一次打开它时，会为她创建一个新的单独视图。

如果我不是第一次将数据库作为已在我的机器上创建的私有视图打开，它会起作用。问题来自第一次用户。如果他们是第一次访问数据库，他们将收到以下错误消息：

注释错误：服务器上不生成索引（“*视图名称*”）

请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T10:20:45.807

检查数据库 ACL。有一个标记为“创建个人文件夹/视图”的复选框。是否为您的用户选中此框？

# android - 银河系中的相机意外崩溃

> ID：12560126
> 
> 赞同：12
> 
> 时间：2012-09-24T06:50:05.767
> 
> 标签：android, camera

使用galaxy nexus进行测试时，我的相机应用程序中有一个奇怪的问题..尝试启动相机活动时它只会崩溃..但它几乎适用于所有其他设备..这些是我的功能.....

```
@Override
public void surfaceCreated(SurfaceHolder holder) {
 // TODO Auto-generated method stub

     try {
        camera = Camera.open();
        camera.setPreviewDisplay(holder);

    Camera.Parameters parameters = camera.getParameters();
        if (Integer.parseInt(Build.VERSION.SDK) >= 8)
            setDisplayOrientation(camera, 90);
        else
            parameters.set("orientation", "portrait");
        parameters.setPictureFormat(PixelFormat.JPEG);
        camera.setParameters(parameters);

    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IllegalArgumentException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (SecurityException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 

}
@Override
public void surfaceChanged(SurfaceHolder holder, int format, int width,
  int height) {
 // TODO Auto-generated method stub
 if(previewing){
  camera.stopPreview();
  previewing = false;
 }

 if (camera != null){
  try {

   camera.setPreviewDisplay(surfaceHolder);
   camera.startPreview();
   previewing = true;
  } catch (IOException e) {
   // TODO Auto-generated catch block
   e.printStackTrace();
  }
 }
} 
```

谁能帮我 ？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-12T04:46:24.643

终于我得到了答案..Nexus有前端和后端摄像头。所以问题是用于打开摄像头的代码（需要为前端摄像头设置摄像头ID），我们还需要设置适当的预览大小..这是修改后的代码..

```
@Override
public void surfaceChanged(SurfaceHolder holder, int format, int width,
  int height) {

    List<Size> sizes = parameters.getSupportedPreviewSizes();
    Size optimalSize = getOptimalPreviewSize(sizes, width, height);
    parameters.setPreviewSize(optimalSize.width, optimalSize.height);

    camera.setParameters(parameters);
    camera.startPreview();
     startPreview();

}

   @Override
public void surfaceCreated(SurfaceHolder holder) {

     try {

         if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.GINGERBREAD) {
              Camera.CameraInfo info=new Camera.CameraInfo();

              for (int i=0; i < Camera.getNumberOfCameras(); i++) {
                Camera.getCameraInfo(i, info);

                if (info.facing == Camera.CameraInfo.CAMERA_FACING_FRONT) {
                  camera=Camera.open(i);
                  defaultCameraId = i;
                }
              }
            }

            if (camera == null) {
              camera=Camera.open();
            }

            try {
                camera.setPreviewDisplay(surfaceHolder);
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            Camera.Parameters parameters = camera.getParameters();
            android.hardware.Camera.CameraInfo info =
                    new android.hardware.Camera.CameraInfo();
            android.hardware.Camera.getCameraInfo(defaultCameraId, info);
            int rotation = this.getWindowManager().getDefaultDisplay()
                    .getRotation();
            if (Integer.parseInt(Build.VERSION.SDK) >= 8)
            {

                 int degrees = 0;
                 switch (rotation) {
                     case Surface.ROTATION_0: 
                         degrees = 0; break;
                     case Surface.ROTATION_90: 
                         degrees = 90; break;
                     case Surface.ROTATION_180: 
                         degrees = 180; break;
                     case Surface.ROTATION_270: 
                         degrees = 270; break;
                 }
                 int result;
                 if (info.facing == Camera.CameraInfo.CAMERA_FACING_FRONT) {
                     result = (info.orientation + degrees) % 360;
                     result = (360 - result) % 360;  
                 } else {  // back-facing
                     result = (info.orientation - degrees + 360) % 360;
                 }
                 camera.setDisplayOrientation(result);

            }
            else
            {
                parameters.set("orientation", "portrait");
            }

            camera.setParameters(parameters);

    } catch (IllegalArgumentException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (SecurityException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 

}

    private Size getOptimalPreviewSize(List<Size> sizes, int w, int h) {
                final double ASPECT_TOLERANCE = 0.1;
                double targetRatio = (double) w / h;
                if (sizes == null) return null;

                Size optimalSize = null;
                double minDiff = Double.MAX_VALUE;

                int targetHeight = h;

                for (Size size : sizes) {
                    double ratio = (double) size.width / size.height;
                    if (Math.abs(ratio - targetRatio) > ASPECT_TOLERANCE) continue;
                    if (Math.abs(size.height - targetHeight) < minDiff) {
                        optimalSize = size;
                        minDiff = Math.abs(size.height - targetHeight);
                    }
                }

                if (optimalSize == null) {
                    minDiff = Double.MAX_VALUE;
                    for (Size size : sizes) {
                        if (Math.abs(size.height - targetHeight) < minDiff) {
                            optimalSize = size;
                            minDiff = Math.abs(size.height - targetHeight);
                        }
                    }
                }
                return optimalSize;
            } 
```

# facebook - facebook 连接 + Phonegap

> ID：12560132
> 
> 赞同：1
> 
> 时间：2012-09-24T06:50:37.377
> 
> 标签：facebook, cordova, phonegap-plugins

我按照phonegap插件集成facebook使用

[https://github.com/davejohnson/phonegap-plugin-facebook-connect#ios-mac-os-x](https://github.com/davejohnson/phonegap-plugin-facebook-connect#ios-mac-os-x)

它运行良好。但是当我尝试为我的 iOS 应用程序制作构建或 ipa 文件时，它总是在管理器窗口中显示为 mac 应用程序存档。我如何使用这个插件来构建 iOS 应用程序？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T06:34:27.727

实际上我错误地添加了所有提供的文件，这些文件真的没用。我删除了未使用的文件，它工作了。

# php - last() SQL 函数是如何工作的？

> ID：12560135
> 
> 赞同：-1
> 
> 时间：2012-09-24T06:51:00.237
> 
> 标签：php, mysql

这就是我尝试使用它的方式：

```
<?php
$post_title_edited=$post1 . "vs" . $post2;

$con2=mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name2")or die("cannot select DB");

// Create table
$create = 'CREATE TABLE  '. $post_title_edited .' 
(
  id INT NOT NULL AUTO_INCREMENT PRIMARY KEY, 
  user VARCHAR(30) NOT NULL, 
  user_post VARCHAR(2000) NOT NULL, 
  date VARCHAR(30) NOT NULL
)';

// Execute query
mysql_query($create,$con2);

echo $post_title_edited;

$query='SELECT LAST(id) as LastId FROM '.$post_title_edited.'';
$last=mysql_query($query);

echo $last;
?> 
```

post1 和 post2 是用户输入。该表已创建并且第一个回声有效。第二个没有。我想这可能是一个疯狂的地方来测试这个代码，因为表是空的，我已经在一个类似的表上测试了它，有 5 个条目并且得到了相同的结果，什么都没有。从我能够在谷歌上舀起的那一刻起，我就正确地使用了它。我什至在这个上使用了必应，以防谷歌错过了什么。我似乎找不到如何使用它的可靠解释。提前致谢。

不管代码如何，我真的很想解释 last() 或 first() 如何工作，我已经看到了一些其他方法来查找 sql 列的第一个或最后一个值。但是这些又被解释得很糟糕

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T06:53:19.993

为什么不`ORDER`和`LIMIT`：

```
$query='SELECT id as LastId FROM '.$post_title_edited.' ORDER BY LastId DESC LIMIT 1'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T06:56:58.640

mysql中没有这个`LAST()`功能。

[http://bugs.mysql.com/bug.php?id=2020](http://bugs.mysql.com/bug.php?id=2020)

如果你想要最后一条记录，查询是由 Mihai Lorga 发布的，请使用它。

# wxpython - 如何构建我的代码？

> ID：12560140
> 
> 赞同：0
> 
> 时间：2012-09-24T06:51:09.137
> 
> 标签：wxpython

编辑：我只是将所有问题合并为一个大问题：[https ://stackoverflow.com/questions/12604139/need-tutorial-for-menubar-handling-panel-building](https://stackoverflow.com/questions/12604139/need-tutorial-for-menubar-handling-panel-building)

我有一个“更大”的问题：我是 python 新手，我开始创建一个小程序->“边做边学”；）我的程序可以工作（它还不是太大），但代码已经有点令人困惑：我只有一个类和很多很多功能，它们相互引用。所以我的问题是：谁能给我提示我如何构建我的代码？我想我必须创建更多的课程......但是在哪里？我应该将代码的哪一部分合并到一个新类中？关于我的程序的简短描述（完成后应该做什么）：这是一种足球//足球经理游戏；您创建了一个由 3 名不同属性的球员组成的球队，您可以指导他们（提高他们的属性）并与其他（计算机）球队比赛。

```
# -*- coding: cp1252 -*-
import wx

class myclass(wx.Frame):

    def __init__(self,parent,id):
        self.title='Click Kick'
        bgcolour=(170,255,170)

        wx.Frame.__init__(self,parent,id,self.title,size=wx.DisplaySize())
        self.displayw=wx.DisplaySize()[0]
        self.displayh=wx.DisplaySize()[1]

        self.startpanel=wx.Panel(self,size=wx.DisplaySize())
        titlefont = wx.Font(10, wx.MODERN, wx.NORMAL, wx.NORMAL, False, u'Consolas')
        self.SetBackgroundColour(bgcolour)
        self.dateinewgamepanel=wx.Panel(self,size=wx.DisplaySize())
        self.dateiloadgamepanel=wx.Panel(self,size=wx.DisplaySize())
        self.teamoverviewpanel=wx.Panel(self,size=wx.DisplaySize())
        self.trainingpanel=wx.Panel(self,size=wx.DisplaySize())
        self.spielpanel=wx.Panel(self,size=wx.DisplaySize())
        self.regelnpanel=wx.Panel(self,size=wx.DisplaySize())
        self.infopanel=wx.Panel(self,size=wx.DisplaySize())

        self.teamname=''

        ID_newgame=01
        ID_loadgame=02
        ID_overview=11
        ID_training=21
        ID_spiel=31
        ID_regeln=41
        ID_ueber=42
        #status=self.CreateStatusBar()
        menubar=wx.MenuBar()
        self.datei=wx.Menu()
        self.team=wx.Menu()
        self.training=wx.Menu()
        self.spiel=wx.Menu()
        self.info=wx.Menu()
        self.datei.Append(ID_newgame,"Neues Spiel")
        self.datei.Append(ID_loadgame,"Spiel laden...")
        self.team.Append(ID_overview,"Übersicht")
        self.training.Append(ID_training,"Trainieren")
        self.spiel.Append(ID_spiel,"Spielen")
        self.info.Append(ID_regeln,"Regeln")
        self.info.Append(ID_ueber,"Info")
        menubar.Append(self.datei,"Datei")
        menubar.Append(self.team,"Mannschaft")
        menubar.Append(self.training,"Training")
        menubar.Append(self.spiel,"Spiel")
        menubar.Append(self.info,"Info")
        self.SetMenuBar(menubar)

        self.titletext=wx.StaticText(self.startpanel, -1, self.title, (220,130))
        self.titletext.SetFont(titlefont)
        self.newgame = wx.Button(self.startpanel,label="Neues Spiel",pos=(215,160),size=(80,40))
        self.loadgame = wx.Button(self.startpanel,label="Spiel laden",pos=(305,160),size=(80,40))

        self.Bind(wx.EVT_BUTTON, self.dateinewgamepanelbuild, self.newgame)
        self.Bind(wx.EVT_BUTTON, self.dateiloadgamepanelbuild, self.loadgame)

        wx.EVT_MENU(self, ID_newgame, self.dateinewgamepanelbuild)
        wx.EVT_MENU(self, ID_loadgame, self.dateiloadgamepanelbuild)
        wx.EVT_MENU(self, ID_overview, self.teamoverviewpanelbuild)
        wx.EVT_MENU(self, ID_ueber, self.infopanelbuild)

    def hideallpanels(self):
        self.startpanel.Hide()
        self.dateinewgamepanel.Hide()
        self.dateiloadgamepanel.Hide()
        self.teamoverviewpanel.Hide()
        self.trainingpanel.Hide()
        self.spielpanel.Hide()

    def infopanelbuild(self,event):
        self.hideallpanels()
        self.infopanel.Show()
        wx.StaticText(self.infopanel,-1,"Autor: Steffen Becker")

    def dateinewgamepanelbuild(self,event):
        # panel neu zusammensetzen (mit aktuellen Werten), panel zeigen, alle anderen panels verstecken
        w=0
        h=-20
        self.hideallpanels()
        self.dateinewgamepanel.Show()
        #wx.StaticBitmap(self.dateinewgamepanel).SetBitmap(wx.Bitmap('pics/defaultplayer.bmp'))
        wx.StaticText(self.dateinewgamepanel, -1, "Neues Spiel", (5+w,25+h)).SetFont(wx.Font(16, wx.MODERN, wx.NORMAL, wx.BOLD))
        wx.StaticText(self.dateinewgamepanel, -1, "Teamname:", (self.displayw/4+10+w,self.displayh/10+20+h))
        self.teamnameinput = wx.TextCtrl(self.dateinewgamepanel, pos=(self.displayw/4+10+w,self.displayh/8+20+h), size=(280,22))

        wx.StaticText(self.dateinewgamepanel, -1, "Name 1\. Spieler", (self.displayw/16+w,self.displayh/2+h))
        self.player1input = wx.TextCtrl(self.dateinewgamepanel, pos=(self.displayw/16+w,self.displayh/2+20+h), size=(130,20))
        wx.StaticText(self.dateinewgamepanel, -1, "Spielertyp", (self.displayw/16+w,self.displayh/2+60+h))
        self.player1typeinput = wx.Choice(self.dateinewgamepanel,id=-1,pos=(self.displayw/16+w,self.displayh/2+80+h))
        player1typelist = ['Dribbler', 'Spielgestalter', 'Balleroberer']
        self.player1typeinput.AppendItems(strings=player1typelist)
        self.player1typeinput.SetSelection(0)
        picplayer1=wx.Image("pics\defaultplayer.bmp", wx.BITMAP_TYPE_BMP).ConvertToBitmap()
        picbutplayer1=wx.BitmapButton(self.dateinewgamepanel,-1,picplayer1,pos=(self.displayw/16+w,self.displayh/2-140+h))

        wx.StaticText(self.dateinewgamepanel, -1, "Name 2\. Spieler", (self.displayw*5/16+w,self.displayh/2+h))
        self.player2input = wx.TextCtrl(self.dateinewgamepanel, pos=(self.displayw*5/16+w,self.displayh/2+20+h), size=(130,20))
        wx.StaticText(self.dateinewgamepanel, -1, "Spielertyp", (self.displayw*5/16+w,self.displayh/2+60+h))
        self.player2typeinput = wx.Choice(self.dateinewgamepanel,id=-1,pos=(self.displayw*5/16+w,self.displayh/2+80+h))
        player2typelist = ['Dribbler', 'Spielgestalter', 'Balleroberer']
        self.player2typeinput.AppendItems(strings=player2typelist)
        self.player2typeinput.SetSelection(0)
        picplayer2=wx.Image("pics\defaultplayer.bmp", wx.BITMAP_TYPE_BMP).ConvertToBitmap()
        picbutplayer2=wx.BitmapButton(self.dateinewgamepanel,-1,picplayer2,pos=(self.displayw*5/16+w,self.displayh/2-140+h))

        wx.StaticText(self.dateinewgamepanel, -1, "Name 3\. Spieler", (self.displayw*9/16+w,self.displayh/2+h))
        self.player3input = wx.TextCtrl(self.dateinewgamepanel, pos=(self.displayw*9/16+w,self.displayh/2+20+h), size=(130,20))
        wx.StaticText(self.dateinewgamepanel, -1, "Spielertyp", (self.displayw*9/16+w,self.displayh/2+60+h))
        self.player3typeinput = wx.Choice(self.dateinewgamepanel,id=-1,pos=(self.displayw*9/16+w,self.displayh/2+80+h))
        player3typelist = ['Dribbler', 'Spielgestalter', 'Balleroberer']
        self.player3typeinput.AppendItems(strings=player3typelist)
        self.player3typeinput.SetSelection(0)
        picplayer3=wx.Image("pics\defaultplayer.bmp", wx.BITMAP_TYPE_BMP).ConvertToBitmap()
        picbutplayer3=wx.BitmapButton(self.dateinewgamepanel,-1,picplayer3,pos=(self.displayw*9/16+w,self.displayh/2-140+h))

        #bmp = wx.Image('pics/defaultplayer.bmp', wx.BITMAP_TYPE_BMP).ConvertToBitmap()
        #wx.StaticBitmap(self.dateinewgamepanel, -1, bmp, (1100, 500))

        self.playerok = wx.Button(self.dateinewgamepanel,label="Team erstellen",pos=(self.displayw*5/16-20+w,self.displayh/2+170+h),size=(170,30))
        self.Bind(wx.EVT_BUTTON, self.onteamok, self.playerok)
        self.teamnameerror=wx.StaticText(self.dateinewgamepanel, -1, "Gib bitte überall einen Namen ein!", (self.displayw*5/16-15+w,self.displayh/2+210+h))
        self.teamnameerror.Hide()

    def dateiloadgamepanelbuild(self,event):
        self.hideallpanels()
        self.dateiloadgamepanel.Show()        
        wx.StaticText(self.dateiloadgamepanel, -1, "Noch nicht implementiert", (20,70))

    def teamoverviewpanelbuild(self,event):
        self.hideallpanels()
        self.teamoverviewpanel.Show()        
        wx.StaticText(self.teamoverviewpanel, -1, self.teamname, (120,10))
        wx.StaticText(self.teamoverviewpanel, -1, self.player1, (40,40))
        wx.StaticText(self.teamoverviewpanel, -1, self.player2, (120,40))
        wx.StaticText(self.teamoverviewpanel, -1, self.player3, (200,40))

    def onteamok(self,event):
        if self.teamnameinput.GetValue() == '' or self.player1input.GetValue() == '' or self.player2input.GetValue() == '' or self.player3input.GetValue() == '':
            self.teamnameerror.Show()
        else:
            self.teamname = self.teamnameinput.GetValue()
            self.player1 = self.player1input.GetValue()
            self.player2 = self.player2input.GetValue()
            self.player3 = self.player3input.GetValue()
            self.teamoverviewpanelbuild(event)

    def onloadgame(self,event):
        self.startpanel.Hide()
        self.dateinewgamepanel.Hide()
        self.dateiloadgamepanel.Show()

if __name__=='__main__':
    app=wx.PySimpleApp()
    frame=myclass(parent=None,id=-1)
    frame.Show()
    app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T18:39:02.887

以下是我的建议：

*   您已经熟悉从`wx.Frame`. 您可以`wx.Panel`对检索玩家的数据执行相同的操作，并根据需要对其进行参数化。这将消除代码重复并使其更方便。

    ```
    class PlayerPanel(wx.Panel):
        def __init__(self, name, *args, **kwargs):
            wx.Panel.__init__(self, *args, **kwargs)
            wx.StaticText(self, -1, name)
            ..etc... 
    ```

*   `wx.Frame`从游戏创建和实际玩的方面派生出另一个类并将其分开；摆脱隐藏/显示面板。

*   了解布局管理。当我想熟悉你的代码时，小部件位置的绝对计算对我来说是不可接受的。[Zetcode](http://zetcode.com/wxpython/)上有很好的例子。

*   将所有游戏逻辑重构为单独的模块。该模块可以包含 MVC（模型-视图-控制器）模式的模型和控制类。视图是用 wxPython 编写的，游戏逻辑可以在一个单独的类中，而模型是例如玩家的另一个类（姓名，年龄，...）。

*   使用 a[`wx.MessageBox`](http://zetcode.com/wxpython/dialogs/)表示错误消息和 about 对话框。

# c# - 获取文本框光标的位置

> ID：12560144
> 
> 赞同：0
> 
> 时间：2012-09-24T06:51:38.747
> 
> 标签：c#, .net, wpf, vb.net

**注意：我说的是文本框光标（也就是显示您正在输入的位置的垂直线。不是鼠标）**

正如上面漂亮的注释所说，我试图将文本光标的位置作为一个点，以便我可以在它下面显示一个弹出窗口。我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T06:54:32.303

文本框有一个`GetRectFromCharacterIndex`可以使用的方法。例如：

```
textbox.GetRectFromCharacterIndex(textbox.CaretIndex) 
```

# file - 如何在 Aptana Studio 的应用程序资源管理器中隐藏某些文件类型

> ID：12560146
> 
> 赞同：0
> 
> 时间：2012-09-24T06:51:43.777
> 
> 标签：file, types, hide, aptana

我需要防止某种文件类型出现在我的 Aptana Studio 的应用程序资源管理器中。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-20T15:42:58.167

你有两个选择：

1.  您可以从*App Explorer*将过滤器应用于文件夹，但这只会将过滤器应用于该文件夹，并且您可能希望将过滤器应用于整个项目；
2.  将过滤器应用到*项目资源管理*器中的项目根目录，这将影响整个项目；

以下是将过滤器应用于上述任一选项的方法：

1.  右键单击要应用过滤器的文件夹/项目
2.  选择`Properties`
3.  在该`Resource Filters`部分中单击`Add`按钮
4.  在弹出的窗口中选择`Exclude All`过滤*器类型*部分
5.  *从“应用于”*部分（可能是文件）中选择一个选项
6.  `All children (recursive)`如果要将过滤器应用于所选文件夹/项目的所有子项，请勾选该选项
7.  在*文件和文件夹属性*部分选择您想要的选项（可能`Name`和`matches`
8.  在*文件和文件夹属性*部分的输入字段中，键入您想要的过滤器

**示例过滤器：**

*   `*~`- 隐藏所有以 a 结尾的文件`~`
*   `*.json`- 隐藏所有 json 文件

**注意**：这些说明适用于当前版本的 Aptana 3.4

# iphone - 将现有应用程序转换为与 iphone5 兼容？

> ID：12560147
> 
> 赞同：4
> 
> 时间：2012-09-24T06:51:51.493
> 
> 标签：iphone, ios, iphone-5

> **可能重复：**
> [如何为 iPhone 5 屏幕分辨率开发或迁移应用程序？](https://stackoverflow.com/questions/12395200/how-to-develop-or-migrate-apps-for-iphone-5-screen-resolution)

**我在iPhone**中有一些应用程序。现在我希望它们与**iPhone5 兼容。在某个**地方我读到我需要将启动屏幕更改为 4 英寸。我需要在我的所有 xib 中更改它，还是仅启动。目前我是使用xcode4.2。我正在获取IPhone5 模拟器，这是否足够或者我需要安装任何更高版本才能获得正确的模拟器。我将从哪里获得最新的iPhone5 模拟器。任何人都可以帮助我完成此过渡的确切步骤吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T08:54:40.920

您肯定需要安装 XCode 4.5，并为 4 英寸屏幕创建一个新的启动图像，名为`Default-568h@2x.png`.

你不应该改变你的 xib 的大小，因为你会希望你的应用程序在新旧手机上都可以工作。但是，您可能希望更改 xib 中某些视图的自动调整大小掩码，以便它们拉伸以填充更大的屏幕。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T11:49:29.160

这里是要点 *如果您想利用 iPhone5 的全高创建大小正好为 640x1136 像素的启动屏幕，名称为 default-568h@2x.png *如果您有旋转问题，请检查 a)window.rootViewController = firstViewcontroller （不要将视图添加到您的窗口） b）实现新的 rorate 委托功能

*使用 viewDidLayoutSubviews 而不是 viewDidLoad 来设置相对于窗口的小部件尺寸 *您可以手动检查屏幕尺寸并加载正确的图像，如下所示：

```
 UIImage* myImage;
CGFloat screenHeight = [UIScreen mainScreen].bounds.size.height;
if ([UIScreen mainScreen].scale == 2.f && screenHeight == 568.0f) {
   myImage = [UIImage imageNamed:@"myImage-568h@2x.png"];
} else {
} 

myImage = [UIImage imageNamed:@"myImage.png"]; 
```

或使用以下 GIT 要点中的分类[https://gist.github.com/3719620](https://gist.github.com/3719620)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T07:32:33.473

如果您想使用带有 4 英寸显示屏的 IOS 6 模拟器测试您的应用程序，您需要从开发者中心安装 Xcode 4.5。

更新：您可以参考讨论 [Xcode 4.3.2 是否足以为 iOS 6 构建应用程序？](https://stackoverflow.com/questions/10986186/will-xcode-4-3-2-suffice-to-build-apps-for-ios-6)

# iphone - UIButton 没有出现在 UItableView 中最后一部分的最后一行

> ID：12560148
> 
> 赞同：0
> 
> 时间：2012-09-24T06:51:54.457
> 
> 标签：iphone, ios, uitableview

我正在尝试在每个部分中使用 4 个单元格来实现表格视图，并且部分的数量也是 2。我在每个部分的最后两行中添加了购买按钮，并使其隐藏，直到未选择行。当我点击第一部分的最后一行时，会出现购买按钮。但是，只要我点击第二部分（最后一部分）的最后一行，它就不会出现。这是我的代码。

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath 
 *)indexPath 
 {

static NSString *CellIdentifier = @"Cell"; 
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) 
{
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle 
    reuseIdentifier:CellIdentifier];

// some code for cell properties

    if(indexPath.section==0)
    {   
      if(indexPath.row==2)
        {                
            //some code for property of buy button1

            cell.accessoryType = UITableViewCellAccessoryNone;
            cell.accessoryView = buyButton1;
            [buyButton1 setHidden:YES];
        }
      if(indexPath.row==3)
        {                              
          //some code for property of buy button2
          cell.accessoryType = UITableViewCellAccessoryNone;
          cell.accessoryView = buyButton2;
          [buyButton2 setHidden:YES];
        }
    }    

    if(indexPath.section==1)
    {   
       if(indexPath.row==2)
        {

            //some code for property of buy button3
            [cell addSubview:buyButton3];
            [buyButton3 setHidden:TRUE];

        }
        if(indexPath.row==3)
        {

            buyButton4= [UIButton buttonWithType:UIButtonTypeRoundedRect];
            buyButton4.frame = CGRectMake(194, 4, 70, 37);
            [buyButton4 setTitle:@"Buy" forState:UIControlStateNormal];

            [buyButton4 addTarget:self action:@selector(buyButtonTapped:) forControlEvents:UIControlEventTouchUpInside];
            buyButton4.tag = 4;
            [cell addSubview:buyButton4];
            [buyButton4 setHidden:TRUE];

        }
    } 

}
if(indexPath.section == 0)
{
  cell.textLabel.text = [privateArray objectAtIndex:indexPath.row];
}    
else
{
  cell.textLabel.text = [workArray objectAtIndex:indexPath.row];

}
return cell;
} 
```

这是我选择行的代码

```
- (void)tableView:(UITableView *)tableview didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
{

[tableViewForOccasion deselectRowAtIndexPath:indexPath animated:NO];

NSArray *visibleCells = [tableViewForOccasion visibleCells];

for (UITableViewCell *aCell in visibleCells) 
{
    aCell.accessoryType = UITableViewCellAccessoryNone;
}
if(indexPath.section==1)
{
  if(indexPath.row==3)
   {
     [buyButton4 setHidden:FALSE];
   }
}
} 
```

![在此处输入图像描述](../Images/1aa92d4f240f2f91174ee38095244d5f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T07:24:26.880

因为您在谈论第二部分的最后一行，所以您的检查条件是错误的

```
if(indexPath.section==1)
{
  if(indexPath.row==3) // you have mistake in this part where you had if(indexPath.row==2)
   {
     [buyButton4 setHidden:FALSE];
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T07:29:35.173

```
I think you forgot the `buyButton4` allocation and `setHidden = FALSE`. 

//Replace Your Code

if(indexPath.row==3)
        {
        UIButton * buyButton4 =[[UIButton alloc] init];
            buyButton4= [UIButton buttonWithType:UIButtonTypeRoundedRect];
            buyButton4.frame = CGRectMake(194, 4, 70, 37);
            [buyButton4 setTitle:@"Buy" forState:UIControlStateNormal];

            [buyButton4 addTarget:self action:@selector(buyButtonTapped:) forControlEvents:UIControlEventTouchUpInside];
            buyButton4.tag = 4;
            [cell addSubview:buyButton4];
            [buyButton4 setHidden:FALSE];

        } 
```

# xcode - XCode 4.5 中的框架未链接

> ID：12560150
> 
> 赞同：0
> 
> 时间：2012-09-24T06:51:57.687
> 
> 标签：xcode, xcode4.5

我将 iAd 框架添加到我的应用程序中，该应用程序有两个目标。我能够编译并运行我的一个目标，但另一个无法编译。（在一种情况下无法编译的代码在另一种情况下会编译。）显然，该框架未被识别或链接。

我在 Build Phases 中检查了两个目标的链接库，并列出了框架。我的大多数其他库都是在我拆分另一个目标之前添加的，而且大多数库都没有这个问题。我记得以前发生过一次类似的事情，我回到构建阶段并删除并重新添加了框架。这解决了问题。（不过，我不记得我到底做了什么。）我又试了一次，但它仍然不起作用。

我可以寻找什么来查看正在发生的事情以及如何解决它？

我正在使用 SDK 6.0 为带有 iOS 5.0 的目标进行编译。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T06:56:05.403

确保将您的 iAD 框架设置为第二个目标的成员。

换句话说，查看 iAD 框架的文件检查器并确保选中***两个***目标的复选标记。

这是 .m 文件的样子……对于框架来说也是一样的：

![检查某些成员资格](../Images/3de01792e318221e4ea8defcb8a75392.png)

# mysql - MySQL 查询为什么我的 INNER JOIN 组日期结果

> ID：12560152
> 
> 赞同：0
> 
> 时间：2012-09-24T06:52:10.790
> 
> 标签：mysql, date, join

我有以下数据库表和列：

```
students
+------------+-------------------+------------------+
| student_id | student_firstname | student_lastname |
+------------+-------------------+------------------+
|         95 | John              | Doe              |
+------------+-------------------+------------------+

studentcourseplan
+--------+------------+
| cpl_id | student_id |
+--------+------------+
|    209 |         95 |
|    273 |         95 |
+--------+------------+

studentdates
+------------+-------------------+-----------------+
| student_id | student_startdate | student_enddate |
+------------+-------------------+-----------------+
|         95 | 2012-07-02        | 2012-08-17      |
|         95 | 2012-08-20        | 2012-11-16      |
+------------+-------------------+-----------------+ 
```

如果我运行此查询...

```
SELECT 
    scp.cpl_id,
    s.student_id,
    s.student_firstname,
    s.student_lastname,
    sd.student_startdate,
    sd.student_enddate
FROM
    studentcourseplan scp
        INNER JOIN
    students s ON s.student_id = scp.student_id
        INNER JOIN
    studentdates sd ON sd.student_id = s.student_id 
```

...我得到以下输出：

```
+--------+------------+-------------------+------------------+-------------------+-----------------+
| cpl_id | student_id | student_firstname | student_lastname | student_startdate | student_enddate |
+--------+------------+-------------------+------------------+-------------------+-----------------+
| 209    |         95 | John              | Doe              | 2012-07-02        | 2012-08-17      |
| 273    |         95 | John              | Doe              | 2012-07-02        | 2012-08-17      |
+--------+------------+-------------------+------------------+-------------------+-----------------+ 
```

请注意与表中的值相比的结果日期`studentdates`。他们错了。我想要类似以下输出的东西：

```
+--------+------------+-------------------+------------------+-------------------+-----------------+
| cpl_id | student_id | student_firstname | student_lastname | student_startdate | student_enddate |
+--------+------------+-------------------+------------------+-------------------+-----------------+
| 209    |         95 | John              | Doe              | 2012-07-02        | 2012-08-17      |
| 273    |         95 | John              | Doe              | 2012-08-20        | 2012-11-16      |
+--------+------------+-------------------+------------------+-------------------+-----------------+ 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T06:55:36.673

您需要`cpl_id`使用`studentdates`. 您可以向`studentdates`名为 cpl_id 的列添加一列，然后相应地更改查询。

# android - Shp 层到 Fusion Table

> ID：12560154
> 
> 赞同：0
> 
> 时间：2012-09-24T06:52:16.473
> 
> 标签：android, google-maps, arcgis, shapefile

我需要在 Fusion 表中存储一个 .shp 文件（矢量数据文件），然后从 fusion 表中“获取”他并将其用作我在 android 中的 MapView 上的图层/叠加层（使用 google map Api）

可能吗 ？如何做到这一点的样本会有所帮助......

提前致谢 ！汤姆。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T02:26:53.147

我使用[shpescape.com](http://shpescape.com)将 shapefile 转换为 Fusion Tables，非常有用。在 MapView 中获取它有点棘手，因为在 SDK 中没有“官方”的方式来做到这一点。[你可以在这里](https://stackoverflow.com/questions/9432198/android-link-to-google-fusion-table)和[这里](http://code.google.com/p/fusion-tables-android/)找到一些答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T20:11:24.597

Gady P 分享的网址有效，但这里有一些替代选项：

您需要将 shapefile 转换为 KML 格式。您可以使用 ArcGIS 中的图层转 KML 工具。它可以在工具箱 > 系统工具箱 > 转换工具 > 从 KML > KML 到图层中找到。

您还可以使用 GDAL/ogr2ogr 将 shapefile 转换为 KML。几个月前，我在 GISCollective 网站上写了一个关于这样做的教程......

[http://giscollective.org/tutorials/gis-techniques/spatial-data-conversion-using-python/](http://giscollective.org/tutorials/gis-techniques/spatial-data-conversion-using-python/)

引导您完成如何将其转换为 KML 就足够了。

将其转换为 KML 后，只需转到 Google Drive 并创建您的 Fusion Table，然后从您的计算机上传 KML。

编辑：重新阅读我的教程后，我似乎举了一个将 shapefile 转换为 KML 的示例，所以这应该正是您所需要的

# c++ - C 或 C++ 中的 Com 端口库

> ID：12560155
> 
> 赞同：2
> 
> 时间：2012-09-24T06:52:22.240
> 
> 标签：c++, c, serial-port

我需要通过 Tomcat 网络服务器管理 COM 打印机端口。我尝试了很多 java 解决方案，例如 RxTx 库，但我遇到了很多麻烦：当我关闭打印机时，jvm 崩溃了！现在我想使用由 JNA 链接的 jvm 外部库，所以我需要一个**带有原始方法的 C 或 C++ 库来读取和写入 COM 端口**。这个库**应该在 windows 或 linux 下编译**。我能找到已经完成的事情吗？（我不能用 C 或 C++ 编写程序）。

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T07:06:55.150

使用[Boost Asio](http://www.boost.org/doc/libs/1_51_0/doc/html/boost_asio.html)！

它保证完全便携。它也非常可靠。我实际上已经在我自己的应用程序中使用了它（使用 AT 命令通过 gsm 设备发送短信）。

另请参阅：[以平台无关的方式访问串口](https://stackoverflow.com/questions/12088071/access-the-serial-port-in-a-platform-independant-way/12088633#12088633)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T06:19:20.577

尝试另一个库：[http](http://code.google.com/p/qextserialport/) ://code.google.com/p/qextserialport/ 该项目针对 Qt 用户。同时支持Qt4和Qt5！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-11T17:31:07.257

如果您正在寻找没有其他依赖项的轻量级东西，我想插入我自己的库[https://github.com/nullpunktTUD/SerialPort](https://github.com/nullpunktTUD/SerialPort)

它是完全跨平台的并支持枚举。

# javascript - 如何用dom元素动态绑定facebox对象

> ID：12560156
> 
> 赞同：0
> 
> 时间：2012-09-24T06:52:25.847
> 
> 标签：javascript, jquery, jquery-plugins, facebox

```
function test()
{
    //load some data through ajax call 
    html = '<a rel="facebox_edit" href="www.google.com">abc</a>';
    $('#id_fv').html(html);
}

jQuery(document).ready(function($) {
                $('a[rel*=facebox_edit]').facebox({
                    loadingImage : full_path+'images/loading.gif',
                    closeImage   : full_path+'images/closelabel.png'
                });
            }); 
```

在正文加载时，我调用函数 test()，现在当我单击链接时，它直接转到 www.google.com 页面，而不是在 Facebook 中加载它。如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T06:56:40.103

这样写。。

```
function test()
{
    //load some data through ajax call 
    html = '<a rel="facebox_edit" href="www.google.com">abc</a>';
    $('#id_fv').html(html);
}

jQuery(document).ready(function($) {
                test();
                $('a[rel*=facebox_edit]').facebox({
                    loadingImage : full_path+'images/loading.gif',
                    closeImage   : full_path+'images/closelabel.png'
                });
            }); 
```

# wpf - 使用 Installshield 创建 setup.exe

> ID：12560157
> 
> 赞同：0
> 
> 时间：2012-09-24T06:52:26.983
> 
> 标签：wpf, visual-studio-2010, installshield

我开发了一个带有指纹读取器的 WPF 系统。现在我将使用 Installshield 制作安装文件。所以开发的系统需要指纹读取器的驱动程序，我需要的是开发一个安装文件，同时为目标机器安装驱动程序。

我能做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T11:43:09.497

是的，你可以做到这一点。您还可以添加执行任意自定义 dll 代码的自定义操作，以便在需要时进行额外设置。

如果您需要添加自定义操作，您需要转到自定义操作和序列并在那里添加操作。

你也可以从一个动作中执行一个可执行文件——这个可执行文件可能是驱动程序的安装程序。

根据您的情况，还有一些其他选项，[这里](http://forum.installsite.net/index.php?showtopic=15898)讨论了一些选项。

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T11:43:29.877

> > 我能做到这一点吗？

是的

[安装设备驱动程序](http://helpnet.installshield.com/installshield17helplib/Langref_Installing_Drivers.htm)

[设备驱动程序向导](http://helpnet.installshield.com/installshield17helplib/DeviceDriverWizard.htm)

如果这不起作用，您可以编写自定义操作。

# javascript - 仅在显示列表时更新列表 dom

> ID：12560159
> 
> 赞同：0
> 
> 时间：2012-09-24T06:52:32.743
> 
> 标签：javascript, sencha-touch, sencha-touch-2

有时我们为几个视图（列表，轮播，数据视图）使用一个存储，当我们刷新（加载，过滤）存储数据时，使用该存储的所有视图的dom都将被重建，但此时某些视图不显示，并且可能不会显示这些数据。我们如何仅在显示时刷新列表 dom，而不是每次存储刷新时刷新？问题示例

```
Ext.define("Test.view.Main", {
    extend: 'Ext.tab.Panel',
    config: {
        tabBarPosition: 'bottom',

        items: [ ]
    },

    constructor : function(){
        this.callParent(arguments);
        var store = Ext.create('Ext.data.Store',{
                data :[
                    {title : 'One'},
                    {title : 'Two'},
                    {title : 'Three'}
                ]
            }),
            firstList = Ext.create('Ext.List',{
                title : 'tab1',
                store : store,
                itemTpl : '{title}',
                onItemDisclosure : function(){
                    store.add({title : 'Four'});
                }
            }),

            secondList = Ext.create('Ext.List',{
                title : 'tab2' ,
                store : store,
                itemTpl : '{title}'

            }),

             thirdList = Ext.create('Ext.List',{
                title : 'tab3',
                store : store,
                itemTpl : '{title}'

            });

        this.add([
            firstList,
            secondList,
            thirdList
        ]) ;
    }
}); 
```

当点击第一个列表中的项目时，商店中将添加新项目。尽管没有显示第二和第三个列表，但所有列表的 dom 都将发生变化，我看到了一个选项。创建一个主商店并为每个视图创建单独的商店。当视图显示从主商店填充它时。但是看起来不太好。还有其他想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T21:36:24.920

据我所知，没有“开箱即用”的解决方案。[**文档**](http://docs.sencha.com/touch/2-0/#!/api/Ext.dataview.DataView-event-refresh)说刷新事件是可以预防的，但我还没有测试过这个理论。

另一种想法是查看[**数据视图源**](http://docs.sencha.com/touch/2-0/source/DataView.html#Ext-dataview-DataView)并覆盖其中的一部分。

起点可能是查看您可以在那里找到的商店事件挂钩：

```
storeEventHooks: {
    beforeload: 'onBeforeLoad',
    load: 'onLoad',
    refresh: 'refresh',
    addrecords: 'onStoreAdd',
    removerecords: 'onStoreRemove',
    updaterecord: 'onStoreUpdate'
} 
```

然而，完善它可能是乏味的工作。

另一方面，当添加新记录时，您的 DOM 不应该为其他列表刷新，它应该只向每个列表添加一个新列表项，因此禁用 addrecords 事件，然后在其他列表时完全刷新它们都显示可能会更无效？

# xsd - 如何提供具有 mininclusive 和 maxinclusive 值的单位值

> ID：12560161
> 
> 赞同：0
> 
> 时间：2012-09-24T06:52:41.137
> 
> 标签：xsd

我有一个 DTD

```
<parameter name="ReferenceSignalPower" access="readWrite">
  <syntax>
    <int>
      <range minInclusive="-60" maxInclusive="50" />
      <units value="dBm">
      </units>
    </int>
  </syntax>
</parameter> 
```

我是 XML 架构的新手，我不知道如何使用此 XML 架构提供单位值

```
<xs:element name="ReferenceSignalPower">
  <xs:simpleType>
    <xs:restriction base="xs:unsignedInt">
      <xs:minInclusive value="-60"/>
      <xs:maxInclusive value="50"/>
    </xs:restriction>
  </xs:simpleType>
</xs:element> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T21:04:49.857

XML 模式没有测量单位的概念，您可以定义 XML 属性或 XML 元素以包含具有某些限制的数字（或其他标准数据类型，如日期等），但读取XML 将此类数字解释为特定度量单位中的值。

如果您想在架构中添加测量单位信息，您可以使用`appInfo`元素来完成 - 例如：

```
<xs:element name="ReferenceSignalPower">
  <xs:simpleType>
    <xs:annotation>
      <xs:appinfo>
        <units value="dBm"/>
      </xs:appinfo>
    </xs:annotation>
    <xs:restriction base="xs:int">
      <xs:minInclusive value="-60"/>
      <xs:maxInclusive value="50"/>
    </xs:restriction>
  </xs:simpleType>
</xs:element> 
```

但是你必须自己解析和解释这些信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T17:04:19.950

你没有说你的问题是什么，但我想问题是“为什么这不起作用？”

您的声明几乎是正确的，但并不完全正确。当您希望最小值为 -60 时，为什么要使用 unsignedInt 作为基本类型？unsignedInt 的最小值已经设置为零。

XSD 规范假定如果您尝试将最小值设置为不属于您的类型的值空间的值，那么某处会出现错误。

所以：要么使用有符号整数类型作为基本类型，要么将最小值设置为基本类型中实际存在的值。

# perl - 将文件直接下载到 FTP 服务器

> ID：12560165
> 
> 赞同：1
> 
> 时间：2012-09-24T06:53:00.860
> 
> 标签：perl, ubuntu, wget

我想从普通的 http 链接下载一个大文件到 ftp 服务器（在 ubuntu 下），而不在本地存储文件（因为我的本地存储太小）。

你有什么想法如何用 wget 或一个小的 perl 脚本来做到这一点？（我在本地机器上没有 sudo 权限）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T09:11:19.277

这是我的看法，在命令行上结合[`wget`](http://www.gnu.org/software/wget/manual/wget.html#Advanced-Usage)和[Net::FTP](https://metacpan.org/module/Net%3a%3aFTP)。

```
wget -O - http://website.com/hugefile.zip | perl -MNet::FTP -e 'my $ftp = Net::FTP->new("ftp.example.com"); $ftp->login("user", "pass"); $ftp->put(\*STDIN, "hugefile.zip");' 
```

* * *

当然，您也可以将其放入文件 ( `ftpupload.pl`) 中并运行它。

```
#!/usr/bin/perl
use strict;
use warnings;
use Net::FTP;

my $ftp = Net::FTP->new("ftp.example.com"); # connect to FTP server
$ftp->login("user", "pass"); # login with your credentials

# Because of the pipe we get the file content on STDIN
# Net::FTP's put is able to handle a pipe as well as a filehandle
$ftp->put(\*STDIN, "hugefile.zip"); 
```

像这样运行它：

```
wget -O - http://website.com/hugefile.zip | perl ftpupload.pl 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T07:36:21.707

当然，还有一个 CPAN 模块，它使 FTP 的生活变得轻松：

[http://search.cpan.org/search?mode=module&query=Net%3A%3AFTP](http://search.cpan.org/search?mode=module&query=Net%3A%3AFTP)

WWW::Mechanize 查找文件、跟踪链接等。

有了这些模块，我认为您可以解决您的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T08:55:39.593

您可以尝试使用[wput](http://wput.sourceforge.net/)。它不是很知名的工具，但我认为你可以使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T07:19:23.403

使用 wget 的输出文档选项

```
wget -O /dev/null http://foo.com/file.uuu 
```

从 wget 的手册页：

```
"-O file
       --output-document=file
           The documents will not be written to the appropriate files, but all will be
concatenated together and written to file.  If - is used as file, documents will be
printed to standard output, disabling link conversion.  (Use ./- to print to a file 
literally named -.)

       Use of -O is not intended to mean simply "use the name file instead of the 
one in the URL;" rather, it is analogous to shell redirection: wget -O file http://foo is
intended to work like wget -O - http://foo > file; file will be truncated immediately, 
and all downloaded content will be written there." 
```

但是，我看不出这样做的目的是什么

# java - 这 4 行 java 代码在 android 应用程序中意味着什么？

> ID：12560180
> 
> 赞同：5
> 
> 时间：2012-09-24T06:54:16.767
> 
> 标签：java, android, android-emulator, android-windowmanager

在我的 java 应用程序中，我有这个代码

```
@Override
public void onAttachedToWindow()
  {
  this.getWindow().setType(WindowManager.LayoutParams.TYPE_KEYGUARD_DIALOG);
  super.onAttachedToWindow();
  } 
```

**当我为android 2.3（10 级）**构建它时， 它可以编译并且工作正常。但是当我为**android 4.0（15 级）**构建它时，它会编译并在运行时让我崩溃并出现以下错误

```
07-16 14:00:03.090: E/AndroidRuntime(29487): FATAL EXCEPTION: main
07-16 14:00:03.090: E/AndroidRuntime(29487): java.lang.IllegalArgumentException: Window type can not be changed after the window is added. 
```

当我评论这条线并构建它时，它工作正常，没有问题..

```
//this.getWindow().setType(WindowManager.LayoutParams.TYPE_KEYGUARD_DIALOG); 
```

所以我不明白为什么会发生这种情况以及这段代码是什么意思？

**编辑：** 这里有一些参考

[当我在手机上运行应用程序时。版本是 android 4.0.3](https://stackoverflow.com/questions/11498938/when-i-run-app-on-my-phone-the-version-is-android-4-0-3#comment16888792_11498938)

[Android上的幼儿安全应用程序](https://stackoverflow.com/questions/8072866/toddler-safe-app-on-android#comment16888776_8072866)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-15T07:07:43.927

```
@Override
public void onAttachedToWindow()
  {
  this.getWindow().setType(WindowManager.LayoutParams.TYPE_KEYGUARD_DIALOG);
  super.onAttachedToWindow();
  } 
```

用于**禁用android中的主页按钮，**但

此**安全漏洞已在较新版本的 Android 中得到修复，**因此它在 ICS 和果冻豆中不起作用......！！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-14T18:26:01.030

我已经解决了这个问题

```
this.getWindow().setType(WindowManager.LayoutParams.TYPE_KEYGUARD_DIALOG); 
```

在调用 super.onCreate 之前。

```
 protected void onCreate(Bundle savedInstanceState) {

        this.getWindow().setType(WindowManager.LayoutParams.TYPE_KEYGUARD_DIALOG);

        super.onCreate(savedInstanceState);
} 
```

Saludos desde 麦德林

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T07:02:56.743

```
@Override    
public void onWindowFocusChanged(boolean hasFocus) {
    this.getWindow().setType(WindowManager.LayoutParams.TYPE_KEYGUARD_DIALOG);    
    super.onWindowFocusChanged(hasFocus);
} 
```

我对 windowAttached 也有一些问题，请尝试改用 windowFocusChanged。

# embedded-resource - C++ Builder XE2 - 将资源与组件链接

> ID：12560187
> 
> 赞同：0
> 
> 时间：2012-09-24T06:54:55.597
> 
> 标签：embedded-resource, custom-component, c++builder-xe2

我已经基于类*TCustomControl*派生了我自己的组件。我需要嵌入到以 .png 格式存储的组件位图资源中。我在项目文件*resources.rc*中添加了以下内容：

```
AP_LOGO RCDATA .\AP_logo_RGB_transparent.png 
```

编译成功。组件静态链接到项目。当我运行应用程序时，它会在尝试访问嵌入式资源时引发以下错误：

```
Project raised exception class EResNotFound with message 'Resource AP_LOGO not found'. 
```

源代码中的以下行访问位图资源：

```
 Graphics::TBitmap *bmp = new Graphics::TBitmap();
  HINST handle = FindClassHInstance(__classid(TVctDiag2));
  bmp->LoadFromResourceName(handle, L"AP_LOGO"); // <----- exception apppers there 
```

当我使用资源编辑器打开可执行文件时，没有任何名为“AP_LOGO”的资源。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T20:03:52.913

它不起作用，因为这些`TBitmap::LoadFromResource...()`方法`BITMAP`只查找资源，但是您已经定义了一个`RCDATA`资源。如果您不更改资源类型，那么您将不得不使用`TResourceStream`，例如：

```
HINST handle = FindClassHInstance(__classid(TVctDiag2));
TResourceStream *strm = new TResourceStream(handle, L"AP_LOGO", RT_RCDATA);
Graphics::TBitmap *bmp = new Graphics::TBitmap();
bmp->LoadFromStream(strm);
delete strm; 
```

使用该 saif，您无法将 PNG 资源加载到 a`TBitmap`中。如果您必须使用 PNG 资源，那么您必须使用 PNG 类，例如`TPngImage`.

# php - 在 php 中休息 web 服务

> ID：12560188
> 
> 赞同：-4
> 
> 时间：2012-09-24T06:54:57.670
> 
> 标签：php, rest

谁能告诉我如何在 REST Web 服务中编写该方法，要求：用户输入将在文本框中给出。现在我们必须调用 Web 服务并将相同的文本回显给用户，而无需刷新页面。请任何人尽快回答。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T06:57:53.710

这是一个 PHP REST 微框架： http: [//peej.github.com/tonic/](http://peej.github.com/tonic/)

# c++ - C++ - SQLite3 在多线程环境中泄漏句柄

> ID：12560189
> 
> 赞同：2
> 
> 时间：2012-09-24T06:54:59.543
> 
> 标签：c++, sqlite, resource-leak

我写了一个简单的程序，它产生 10 个线程，每个线程打开一个数据库（所有线程通用），或者如果打开失败，则创建它（使用“Write-Ahead Log”选项），在数据库上创建一个表然后它去进入一个无限循环，在该循环中它一次将一行添加到其表中。我发现程序每 5 分钟泄漏大约 2 个句柄，我尝试了一个名为 Memory Verify 的工具，它告诉我泄漏的句柄是 SQLite3 文件锁（版本 3.7.13 上的第 34034 行），但我不确定这个错误是否在 SQLite 或我使用它的方式中。

我没有指定任何编译器选项来构建 SQLite3，因此它被构建为多线程，据我所知，多线程在我的情况下应该可以正常工作，因为每个线程都有自己的 SQLite 连接。

要打开或创建数据库，我使用以下代码：

```
 bool Create()
   {
      int iFlags = 0;
      iFlags = iFlags | SQLITE_OPEN_READWRITE | SQLITE_OPEN_NOMUTEX | SQLITE_OPEN_CREATE;
      return sqlite3_open_v2(dbName_sm.c_str(), &pHandle_m, iFlags, 0) == SQLITE_OK;
   }

   bool Open()
   {
      int iFlags = 0;
      iFlags = iFlags | SQLITE_OPEN_READWRITE | SQLITE_OPEN_NOMUTEX;
      return sqlite3_open_v2(dbName_sm.c_str(), &pHandle_m, iFlags, 0) == SQLITE_OK;
   } 
```

每个线程中的硬循环调用 ExecuteQuery，它会准备、执行和完成 INSERT 语句：

```
 bool ExecuteQuery(const std::string& statement)
   {
      bool res = Prepare(statement);
      if(!res)
      {
         return false;;
      }
      SQLiteStatus status = Step();
      Finalize();
      res = (ESuccess == status || EDatabaseDone == status);
      return res;
   }

   bool Prepare(const std::string& statement)
   {
      return sqlite3_prepare_v2(pHandle_m, statement.c_str(), -1, &pStmt_m, 0) == SQLITE_OK;
   }

   enum SQLiteStatus { ESuccess, EDatabaseDone, EDatabaseTimeout, EDatabaseError };
   SQLiteStatus Step()
   {
      int iRet = sqlite3_step(pStmt_m);
      if (iRet == SQLITE_DONE)
      {
         return EDatabaseDone;
      }
      else if (iRet == SQLITE_BUSY)
      {
         return EDatabaseTimeout;
      }
      else if (iRet != SQLITE_ROW)
      {
         return EDatabaseError;
      }
      return ESuccess;
   }

   bool Finalize()
   {
      int iRet = sqlite3_finalize(pStmt_m);
      pStmt_m = 0;
      return iRet == SQLITE_OK;
   } 
```

你们在我的代码中看到任何错误还是 SQLite 中的已知问题？我试图用谷歌搜索它几天，但我找不到任何关于它的信息。

非常感谢您的帮助。

问候，

安德烈亚

PS我忘了说我在WinXP 64bit PC上运行我的测试，编译器是VS2010，应用程序是32位编译的，SQLite版本是3.7.13...

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-19T10:13:39.640

在每个 sqlite3_step 之后检查您是否有 sqlite3_reset，因为这是一种可能导致泄漏的情况。在使用 sqlite3_prepare 准备语句并使用 sqlite3_step 执行它之后，您需要始终使用 sqlite3_reset 重置它。

# android - 当我们单击 android 设备中的后退按钮时，Sencha 触摸选择字段没有关闭

> ID：12560193
> 
> 赞同：0
> 
> 时间：2012-09-24T06:55:12.680
> 
> 标签：android, sencha-touch, extjs, sencha-touch-2

我已经使用 sencha touch 2 完成了应用程序。**后页逻辑通过应用程序中的路由进行维护。**后置逻辑在 ipad/android 设备中运行得非常好。当我们单击设备中的后退按钮未关闭弹出选择字段弹出窗口时，一个问题是在 android 设备中引起问题。在此页面中，我有选择字段，当单击选择字段时，它将显示带有选项**取消**和**完成**的选择字段弹出窗口，我不会直接选择任何选项，我将按下 android 设备中的后退按钮。它没有关闭弹出窗口，但它会返回上一页，但选择字段弹出窗口仍然打开而不关闭。**单击 android 设备中的后退按钮时，我需要关闭底部选择字段弹出窗口。**谁能告诉我如何实现这一目标。我附上了选择字段弹出窗口的屏幕截图以供更多参考。![在此处输入图像描述](../Images/597f163df8823c826a33ac3de5061f3e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T22:17:41.077

在没有看到任何代码的情况下，我猜测您要么创建了自己的弹出窗口，要么在选择字段上将 usePicker 设置为 false。

为什么这样？不会设置 usePicker: true，足以满足您的解决方案吗？

无论如何，请务必处理手头的问题，并根据您提供的信息，我会在您的弹出窗口（或 css 类）上设置一个 id，使您能够识别它并在任何相关的路由功能中隐藏它们，如果它们是可见的

```
var popupElement = findYourPopup(); //Ext.getCmp("popup") || ParentEl.query("cssclass") etc.
if (popupElement && !popupElement.isHidden()) {
    popupElement.hide();
} 
```

希望这会对您有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-25T23:42:49.240

您还可以像这样处理硬件后退按钮：

```
if (Ext.os.is('Android')) {
    document.addEventListener("backbutton", Ext.bind(onBackKeyDown, this), false);

    function onBackKeyDown(eve) {   
        eve.preventDefault();

        //do something
        alert('back button pressed');

    }
} 
```

# java - Lingo JMS Producer 无法自动重新连接到 WLS JMS

> ID：12560195
> 
> 赞同：1
> 
> 时间：2012-09-24T06:55:16.997
> 
> 标签：java, jms, spring-jms

我使用 WLS 10.3.4.0 作为我的 JMS 提供程序。我的应用程序使用 Lingo 和 Spring Remoting 配置了生产者和消费者。我的 Producer 是`org.logicblaze.lingo.jms.JmsProxyFactoryBean`，而我的 Consumer 是`org.logicblaze.lingo.jms.JmsServiceExporterMessageListener`。我在 WLS 上为生产者和消费者启用了自动重新连接。奇怪的是，我所有的消费者都自动重新连接，但我的生产者似乎没有。

我尝试使用重置连接`javax.jms.ExceptionListener`的方法配置一个。`onException`但是，一旦 WLS JMS 再次可用并且生产者未重新连接，则永远不会触发异常侦听器。`LostServerException`但是当我尝试使用生产者发送消息时，我确实看到了多个s。这让我相信 WLS 根本没有通知连接工厂，关于重新连接。我尝试过使用`javax.jms.ConnectionFactory`带有 no`ExceptionListener`和`org.springframework.jms.connection.CachingConnectionFactory`with 的普通旧版本`ExceptionListener`。

以下是相关代码：

`CachingConnectionFactory`配置

```
<bean id="cachedTestQueueConnectionFactory" class="org.springframework.jms.connection.CachingConnectionFactory">
    <property name="targetConnectionFactory" ref="wlsQueueConnectionFactory" />
        <property name="sessionCacheSize" value="1"/>
    <property name="reconnectOnException" value="true" />
    <property name="exceptionListener" ref="exceptionListener" />
</bean>

<bean id="exceptionListener" class="com.test.ExceptionListenerTest">
    <property name="cachingConnectionFactory" ref="cachedTestQueueConnectionFactory"/>
</bean>

<bean name="myProducerConfig" class="org.logicblaze.lingo.jms.JmsProducerConfig" lazy-init="true">
  <property name="deliveryMode" value="2"/>
</bean> 
```

在我的 tomcat 容器内的多个 Web 应用程序中使用的通用 JNDI 查找

```
<bean id="baseWlsJndiObjectFactory"
  class="com.test.common.jndi.BasicJndiObjectFactoryBean"
  abstract="true">
    <property name="initialContextFactory" value="weblogic.jndi.WLInitialContextFactory" />
    <property name="providerURL" value="t3://localhost:8001" /> 
</bean>

<bean id="wlsQueueConnectionFactory" parent="baseWlsJndiObjectFactory" lazy-init="true">
   <property name="expectedType" value="javax.jms.ConnectionFactory" />
   <property name="jndiName" value="MyQueueConnectionFactory" />
</bean>

<bean id="defaultJMSDestination" parent="baseTibcoJndiObjectFactory"
  abstract="true">
  <property name="expectedType" value="javax.jms.Destination" />
</bean>

<bean id="lingoMetadataStrategy"
    class="org.logicblaze.lingo.SimpleMetadataStrategy"
    lazy-init="true">
  <property name="oneWayForVoidMethods" value="true" />
</bean>

<bean id="defaultJMSTaskExecutorPool" class="org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor">
    <property name="corePoolSize" value="25"/>
    <property name="keepAliveSeconds" value="5"/>
    <property name="queueCapacity" value="20"/>
    <property name="daemon" value="true"/>
</bean>

<bean id="baseMsgListenerContainer" class="org.springframework.jms.listener.DefaultMessageListenerContainer" abstract="true">
    <property name="concurrentConsumers" value="1"/>
    <property name="maxConcurrentConsumers" value="1"/>
    <property name="taskExecutor" ref="defaultJMSTaskExecutorPool"/>
    <property name="connectionFactory" ref="wlsQueueConnectionFactory"/>
</bean> 
```

我的生产者和消费者配置：

```
<bean id="myJMSDestination" class="com.test.common.jndi.BasicJndiObjectFactoryBean"
    parent="defaultJMSDestination" lazy-init="true">
    <property name="jndiName"
        value="queue.lingo.com.test.myqueue" />
</bean>

<bean id="myJMSProducer" class="org.logicblaze.lingo.jms.JmsProxyFactoryBean"
    depends-on="myJMSConsumer" lazy-init="true" destroy-method="destroy">
    <property name="serviceInterface"
        value="com.test.common.service.MyService" />
    <!--property name="connectionFactory" ref="wlsQueueConnectionFactory" /-->
    <property name="connectionFactory" ref="cachedTestQueueConnectionFactory" />
    <property name="destination" ref="myJMSDestination" />
    <property name="metadataStrategy" ref="lingoMetadataStrategy" />
    <property name="producerConfig" ref="myProducerConfig" />
</bean>

<bean id="myJMSConsumer"
    class="org.logicblaze.lingo.jms.JmsServiceExporterMessageListener"
    destroy-method="destroy">
    <property name="service" ref="myService" />
    <property name="serviceInterface"
        value="com.test.common.service.MyService" />
    <property name="connectionFactory" ref="wlsQueueConnectionFactory" />
</bean>

<bean id="myServiceMsgContainer" parent="baseMsgListenerContainer">
    <property name="messageListener" ref="myJMSConsumer"/>
    <property name="connectionFactory" ref="wlsQueueConnectionFactory"/>
    <property name="destination" ref="myJMSDestination"/>
    <property name="maxConcurrentConsumers" value="5"/>
</bean> 
```

`callProducer`我的部分业务逻辑通过反射调用 myService异步方法。

在我的应用程序保持活动状态的同时重新启动 WLS JMS 后，我看到一系列消息说`"DefaultMessageListenerContainer - Successfully refreshed JMS Connection"`. 然后，当我尝试通过生产者发送消息时，我在我的 tomcat 日志中发现了一系列 WLS jms 异常。

```
 JmsClientInterceptor - Remote access error: ReflectiveMethodInvocation: public abstract void com.test.common.service.MyService.callProducer(com.test.common.context.ApplicationContext,java.io.Serializable); target is null
weblogic.jms.common.LostServerException: [JMSClientExceptions:055169]Network connection to server was lost.
    at weblogic.jms.client.JMSSession.checkClosed(JMSSession.java:4883)
    at weblogic.jms.client.JMSSession.createObjectMessage(JMSSession.java:1123)
    at weblogic.jms.client.WLSessionImpl.createObjectMessage(WLSessionImpl.java:634)
    at org.logicblaze.lingo.jms.marshall.DefaultMarshaller.createRequestMessage(DefaultMarshaller.java:60)
    at org.logicblaze.lingo.jms.JmsClientInterceptor.invoke(JmsClientInterceptor.java:139)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:171)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:204)
    at $Proxy59.callProducer(Unknown Source)

Caused by: weblogic.jms.common.LostServerException: server connection in state STATE_NO_RETRY
    at weblogic.jms.client.ReconnectController.attachReasonToException(ReconnectController.java:609)
    at weblogic.jms.client.ReconnectController.analyzeExceptionAndReconnect(ReconnectController.java:540)
    at weblogic.jms.client.ReconnectController.computeJMSSession(ReconnectController.java:630)
    at weblogic.jms.client.WLSessionImpl.createObjectMessage(WLSessionImpl.java:641)
    ... 35 more
Caused by: weblogic.jms.common.LostServerException: java.lang.Exception: weblogic.rjvm.PeerGoneException: ; nested exception is:
        java.io.EOFException
        at weblogic.jms.client.JMSConnection.dispatcherPeerGone(JMSConnection.java:1541)
        at weblogic.messaging.dispatcher.DispatcherWrapperState.run(DispatcherWrapperState.java:692)
        at weblogic.messaging.dispatcher.DispatcherWrapperState.timerExpired(DispatcherWrapperState.java:617)
        at weblogic.timers.internal.TimerImpl.run(TimerImpl.java:273)
        at weblogic.work.ExecuteRequestAdapter.execute(ExecuteRequestAdapter.java:21)
        at weblogic.kernel.ExecuteThread.execute(ExecuteThread.java:145)
        at weblogic.kernel.ExecuteThread.run(ExecuteThread.java:117)
Caused by: java.lang.Exception: weblogic.rjvm.PeerGoneException: ; nested exception is:
        java.io.EOFException
        at weblogic.messaging.dispatcher.DispatcherWrapperState.onDisconnect(DispatcherWrapperState.java:396)
        at weblogic.rjvm.RJVMImpl$DisconnectEventDeliverer.run(RJVMImpl.java:1654)
        ... 3 more
Caused by: weblogic.rjvm.PeerGoneException: ; nested exception is:
        java.io.EOFException
        at weblogic.rjvm.ResponseImpl.unmarshalReturn(ResponseImpl.java:234)
        at weblogic.rmi.cluster.ClusterableRemoteRef.invoke(ClusterableRemoteRef.java:348)
        at weblogic.rmi.cluster.ClusterableRemoteRef.invoke(ClusterableRemoteRef.java:259)
        at weblogic.jndi.internal.ServerNamingNode_1033_WLStub.lookup(Unknown Source)
        at weblogic.jndi.internal.WLContextImpl.lookup(WLContextImpl.java:405)
        at weblogic.jndi.internal.WLContextImpl.lookup(WLContextImpl.java:393)
        at weblogic.rmi.cluster.BasicReplicaHandler.refreshReplicaList(BasicReplicaHandler.java:507)
        at weblogic.rmi.cluster.BasicReplicaHandler.failOver(BasicReplicaHandler.java:207)
        at weblogic.rmi.cluster.ClusterableRemoteRef.invoke(ClusterableRemoteRef.java:264)
        at weblogic.jms.frontend.FEConnectionFactoryImpl_1030_WLStub.connectionCreateRequest(Unknown Source)
        at weblogic.jms.client.JMSConnectionFactory.setupJMSConnection(JMSConnectionFactory.java:224)
        at weblogic.jms.client.JMSConnectionFactory.createConnectionInternal(JMSConnectionFactory.java:285)
        at weblogic.jms.client.JMSConnectionFactory.createConnection(JMSConnectionFactory.java:191)
        at org.springframework.jms.support.JmsAccessor.createConnection(JmsAccessor.java:188)
        at org.springframework.jms.listener.AbstractJmsListeningContainer.createSharedConnection(AbstractJmsListeningContainer.java:209)
         at org.springframework.jms.listener.DefaultMessageListenerContainer.refreshConnectionUntilSuccessful(DefaultMessageListenerContainer.java:701)
        at org.springframework.jms.listener.DefaultMessageListenerContainer.recoverAfterListenerSetupFailure(DefaultMessageListenerContainer.java:683)
        at org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.run(DefaultMessageListenerContainer.java:835)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.Thread.run(Thread.java:662)
Caused by: java.io.EOFException
        at weblogic.rjvm.t3.MuxableSocketT3.endOfStream(MuxableSocketT3.java:338)
        at weblogic.socket.SocketMuxer.deliverExceptionAndCleanup(SocketMuxer.java:768)
        at weblogic.socket.SocketMuxer.deliverEndOfStream(SocketMuxer.java:702)
        at weblogic.socket.SocketMuxer.readReadySocketOnce(SocketMuxer.java:890)
        at weblogic.socket.SocketMuxer.readReadySocket(SocketMuxer.java:830)
        at weblogic.socket.JavaSocketMuxer.processSockets(JavaSocketMuxer.java:339)
        at weblogic.socket.SocketReaderRequest.run(SocketReaderRequest.java:29)
        at weblogic.work.ExecuteRequestAdapter.execute(ExecuteRequestAdapter.java:21)
        at weblogic.kernel.ExecuteThread.execute(ExecuteThread.java:145)
        at weblogic.kernel.ExecuteThread.run(ExecuteThread.java:117)
        at org.springframework.jms.listener.AbstractJmsListeningContainer.refreshSharedConnection(AbstractJmsListeningContainer.java:197)
        at org.springframework.jms.listener.DefaultMessageListenerContainer.refreshConnectionUntilSuccessful(DefaultMessageListenerContainer.java:701)
        at org.springframework.jms.listener.DefaultMessageListenerContainer.recoverAfterListenerSetupFailure(DefaultMessageListenerContainer.java:683) 
```

有什么想法吗？这个问题已经挑战了我一整天。

PS - 相关代码将有助于那些尝试将 WLS JMS 与 Spring 应用程序客户端一起使用的人。除了生产者的自动重新连接外，我已经完成了端到端的工作。

# xamarin.ios - 是否可以使用 C# 以外的语言编译 MonoTouch 项目？

> ID：12560203
> 
> 赞同：2
> 
> 时间：2012-09-24T06:55:44.827
> 
> 标签：xamarin.ios, xamarin

例如，我将如何使用 F# 或 J#？我不确定在项目的编译器设置中要掌握什么。

我可以遵循一系列命令行步骤来编译我可能解释为替换 C# 步骤但告诉其他编译器使用正确的平台详细信息等的 MonoTouch 项目吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T07:10:24.663

很不幸的是，不行。在“[使用 MonoTouch 为 iPhone 和 iPad 开发 C# 应用程序](https://rads.stackoverflow.com/amzn/click/com/1430231742)”一书中，您可以看到文本（[证明](http://books.google.ru/books?id=lFe0EwHUREEC&pg=PA6&lpg=PA6&dq=monotouch%20%20only%20.NET%20language%20available%20for%20writing%20MonoTouch&source=bl&ots=-SPiq1F-V5&sig=tAXMCLLRC9mdUF5UJXPPLuWmZoY&hl=ru&sa=X&ei=LQZgULfiGrPP4QTk6YCwDg&ved=0CDsQ6AEwAw#v=onepage&q=monotouch%20%20only%20.NET%20language%20available%20for%20writing%20MonoTouch&f=false)）：

***C# 是目前唯一的语言***

*此外，目前唯一可用于编写 MonoTouch 应用程序的 .NET 语言是 C#。*

自那本书出版以来，一切都没有改变。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T08:54:14.400

Maxim Korobov 是对的，MonoDevelop 在为 MonoTouch 编写时只支持 C#。

但这并不是全部事实：MonoDevelop 还（初步）支持便携式库项目 (PLP)。这意味着您可以在 Visual Studio 中创建和编译 PLP 项目（使用 Visual Studio 支持 PLP 项目的任何语言），然后在 MonoDevelop 中引用该库。请记住，PLP 支持目前是初步的，您可能会在途中遇到一些障碍。

# android - 选择列表项时如何将 listView 链接到另一个类？

> ID：12560207
> 
> 赞同：0
> 
> 时间：2012-09-24T06:56:08.650
> 
> 标签：android, class, listview, binding, onitemclick

您好我正在尝试制作一个应用程序，该应用程序使用 listView 显示项目列表，并且当用户从列表中选择一个项目时。该应用程序将调用链接到所选项目的特定类，但是我在第二个@override 遇到错误，说覆盖必须覆盖超类。这是我的类和 xml 代码。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 android:orientation="vertical" >

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:src="@drawable/botanicgate" />

<ListView
    android:id="@+id/listView"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >
</ListView>

</LinearLayout>

 package com.fyp.gulliver;

 import android.app.ListActivity;
 import android.content.Intent;
 import android.os.Bundle;
 import android.view.View;
 import android.widget.AdapterView;
 import android.widget.AdapterView.OnItemClickListener;
 import android.widget.ArrayAdapter;
 import android.widget.ImageView;
 import android.widget.ListView;
 import android.widget.TextView;

 public class HotSpot extends ListActivity{
/** Called when the activity is first created. */
String places[] =  {"BotanicGarden", "Sentosa"};
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.hotspot);
    ListView listView = (ListView) findViewById(R.id.listView);
    listView.setAdapter(new ArrayAdapter
            (HotSpot.this, android.R.layout.simple_list_item_1, 
                    places));
    listView.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position,
                long id) {
            // TODO Auto-generated method stub
            Class ourClass;
            String item = ((TextView)view).getText().toString();
            try {
                ourClass = Class.forName
                        ("com.fyp.gulliver." + item);
                Intent ourIntent = new Intent(HotSpot.this, ourClass);
                startActivity(ourIntent);
            } catch (ClassNotFoundException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    }); 
     }
    } 
```

由于我还是 android 的新手，因此我不知道我犯了什么错误，如果其他人可以帮助我解决我的错误，我将不胜感激谢谢：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T07:06:47.043

尝试改变这个：

```
listView.setOnItemClickListener(new OnItemClickListener(); 
```

到

```
listView.setOnItemClickListener(new AdapterView.OnItemClickListener(); 
```

并删除第二个`@Override`

# ios5 - 从 iOS 中的设置登录 Twitter 不起作用

> ID：12560209
> 
> 赞同：2
> 
> 时间：2012-09-24T06:56:15.143
> 
> 标签：ios5, twitter

我在通过设置应用程序登录 iOS 中的 Twitter 时遇到了一些问题。我正在尝试在设置中添加帐户，但尽管输入了正确的用户名和密码，但应用程序仍不允许成功登录。我确实检查了多个帐户，但没有工作。iOS中的twitter框架有什么问题吗？

谢谢，

# python-3.x - Python 3：记录模块

> ID：12560210
> 
> 赞同：0
> 
> 时间：2012-09-24T06:56:17.407
> 
> 标签：python-3.x

我研究如何记录我的代码。所以，我准备了一个文件 docstrings.py 并将它放在一个目录中。现在我想看看我记录的内容。换句话说，我想输入 help(docstrings.square) 并在我的模块中获取有关 square 函数的文档。

```
>>> import sys
>>> sys.path.append("C:\Users\Michael\PycharmProjects\Docstrings") 
```

结果：

**SyntaxError: (unicode error) 'unicodeescape' codec can't decode bytes in position 2-4: truncated \UXXXXXXXX escape**

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T07:03:04.083

反斜杠必须在[字符串文字](http://docs.python.org/reference/lexical_analysis.html#string-literals)中加倍：

```
>>> sys.path.append("C:\\Users\\Michael\\PycharmProjects\\Docstrings") 
```

除非您使用*原始字符串*：

```
>>> sys.path.append(r"C:\Users\Michael\PycharmProjects\Docstrings") 
```

# c# - 不使用 HttpWebRequest 对 ASP.NET 通用处理程序进行单元测试

> ID：12560213
> 
> 赞同：0
> 
> 时间：2012-09-24T06:56:24.107
> 
> 标签：c#, asp.net, unit-testing, generic-handler

我需要为我的 ASP.NET 通用处理程序创建单元测试用例。我的处理程序代码如下：

```
 public class MyHandler : IHttpHandler
    {

        public void ProcessRequest(HttpContext context)
        {
            context.Response.ContentType = "text/plain";
            context.Response.Write("Hello World");
            var data = context.Request.InputStream;
            //Here logic read the context.Request.InputStream
            //All the data will be posted to this Stream
            //Calling of business logic layer Methods
        }

        public bool IsReusable
        {
            get
            {
                return false;
            }
        }
    } 
```

现在，我需要为这个 Handler 创建单元测试用例。我尝试过以下方法来做单元测试用例。

*   对此句柄进行`HttpWebRequest`处理并将所有数据写入请求流。我不想继续这样做，因为我们有单独的工具可以`HttpWebRequest`测试所有处理程序
*   为业务方法创建单元测试用例，但在此我无法检查在处理程序级别编写的一些逻辑。

我试图模拟 HttpContext 但它不允许模拟它（是否可以模拟 HttpContent？）。我尝试过
[这种](http://www.mattwrock.com/post/2011/12/07/Unit-Testing-ASPNet-Http-Handlers-and-a-discussion-of-Auto-Mocking-and-the-Testable-pattern.aspx)方式，但这也需要对我的处理程序进行修改，但我没有这样做的准备。

最后我的问题是，还有其他方法来单元测试处理程序吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T08:14:51.153

模拟上下文可以做的是创建一个使用 HttpContextBase 的附加方法，并仅转发来自接口方法的调用。HttpContextBase 可以使用 HttpContextWrapper 调用，这将使您可以模拟上下文

```
public void ProcessRequest(HttpContext context)
    {
       ProcessRequestBase(new HttpContextWrapper(context));
    }
    public void ProcessRequestBase(HttpContextBase ctx)
    {

    } 
```

可以通过点击 ProcessRequestBase 方法进行测试。我们必须假设 ProcessRequestBase 按预期工作，但这很难避免。然后你可以使用这样的调用来测试它

```
HttpContextBase mock = new Mock<HttpContextBase>(); //or whatever syntax your mock framework uses
handler.ProcessRequest(mock.Object); 
```

# objective-c - 播放列表中的 Youtube GData 视频

> ID：12560220
> 
> 赞同：1
> 
> 时间：2012-09-24T06:56:56.613
> 
> 标签：objective-c, ios5, youtube-api, gdata-api

美好的一天，我是这个 Youtube GData api 的新手，**我无法访问特定播放列表的视频列表。**

我首先做的是获取特定用户的播放列表列表。它返回了这样的东西`GDataEntryYouTubePlaylistLink 0x888ea20: {v:2.1 title:Playlist Title summary: contentSrc:https://gdata.youtube.com/feeds/api/playlists/PL5......92D127 etag:W/"D04N.....WhJVEU8." authors:1 categories:1 links:related,alternate,self id:tag:youtube.com,2008:user:MyYoutubeUser:playlist:PL5......92D127 countHint:7 unparsed:<media:group>}`

我了解到 countHint 是该播放列表中的视频数量。现在，我想得到那些视频。

我尝试创建一个可以这样做的函数，但我不知道我将使用什么 FeedID：

```
 GDataServiceGoogleYouTube *service = [self youTubeService];

NSString *feedID = kGDataYouTubeUserFeedIDPlaylists; //this was the feedID i used to get the list of playlist of a user
NSURL *feedURL = [GDataServiceGoogleYouTube youTubeURLForUserID:@"MyYoutubeUser"
                                                        userFeedID:feedID];

[service fetchFeedWithURL:feedURL
                 delegate:self
        didFinishSelector:@selector(request:finishedLoading:error:)]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T02:20:28.753

我能够找到我的问题的解决方案。我希望它也可以帮助你。

在我的 viewDidLoad 中，我调用了 loadYoutube 和 loadYoutubePlaylist 函数。

*   loadYoutube -> 为我们提供给定用户的 URL 和 feedID。在我的例子中，feedID 是 kGDataYouTubeUserFeedIDUploads 因为我只想获取用户上传的播放列表和视频。
*   loadYoutubePlaylist -> 为我们提供用户播放列表的 URL。feedID 是 kGDataYouTubeUserFeedIDPlaylists
*   loadYoutubeVideosPerPlaylist -> 为我们提供每个播放列表的视频 URL。

这是代码的样子：

```
- (void)loadYoutube
{
    GDataServiceGoogleYouTube *service = [self youTubeService];

    NSString *uploadsID = kGDataYouTubeUserFeedIDUploads;
    NSURL *feedURL = [GDataServiceGoogleYouTube youTubeURLForUserID:@"USERNAME"
                                                         userFeedID:uploadsID];
    NSLog(@"loadYoutube URL: %@", feedURL);
    [service fetchFeedWithURL:feedURL
                     delegate:self
            didFinishSelector:@selector(request:finishedLoadingYoutubeWithFeed:error:)];
}

- (void)loadYoutubePlaylist
{
    GDataServiceGoogleYouTube *service = [self youTubeService];

    NSString *feedID = kGDataYouTubeUserFeedIDPlaylists;
    NSURL *feedURL = [GDataServiceGoogleYouTube youTubeURLForUserID:@"USERNAME"
                                                            userFeedID:feedID];
    NSLog(@"loadYoutubePlaylist URL: %@", feedURL);
    [service fetchFeedWithURL:feedURL
                     delegate:self
            didFinishSelector:@selector(request:finishedLoadingPlaylistWithFeed:error:)];
}

- (void)loadYoutubeVideosPerPlaylist:(NSString *)urlString
{
    GDataServiceGoogleYouTube *service = [self youTubeService];
    NSURL *feedURL = [NSURL URLWithString:urlString];

    NSLog(@"loadYoutubeVideosPerPlaylist URL: %@", feedURL);

    [service fetchFeedWithURL:feedURL
                     delegate:self
            didFinishSelector:@selector(request:finishedLoadingYoutubeVideosPerPlaylistWithFeed:error:)];
} 
```

这是 Youtube 请求..

```
#pragma mark - Youtube Requests

- (void)request:(GDataServiceTicket *)ticket finishedLoadingYoutubeWithFeed:(GDataFeedBase *)aFeed error:(NSError *)error
{

}

- (void)request:(GDataServiceTicket *)ticket finishedLoadingPlaylistWithFeed:(GDataFeedBase *)aFeed error:(NSError *)error
{
    if (kGDataYouTubeUserFeedIDPlaylists) {
        self.playlistFeed = (GDataFeedYouTubeVideo *)aFeed;

        NSArray *feedArray = [self.playlistFeed entries];
        for (int i = 0; i < [feedArray count]; i++) {
            GDataEntryBase *entry = [[self.playlistFeed entries] objectAtIndex:i];
            NSString *title = [[entry title] stringValue];
            [playlist addObject:NSLocalizedString(title, @"playlistTitle")];
            NSLog(@"%@", [[entry content] sourceURI]);
            [videoPlaylistURLArray addObject:[[entry content] sourceURI]];
        }
    }
    if (!error) {
        [self addMenuButtons];
        [self setPlaylistIndex:0];
        [SVProgressHUD showSuccessWithStatus:@"Success!"];
    }else{
        [SVProgressHUD showErrorWithStatus:@"Failed Fetching Playlist."];
    }
}

- (void)request:(GDataServiceTicket *)ticket finishedLoadingYoutubeVideosPerPlaylistWithFeed:(GDataFeedBase *)aFeed error:(NSError *)error
{
    self.feed = (GDataFeedYouTubeVideo *)aFeed;
    [self.youtubeTable reloadData];
} 
```

# c# - 为什么单击 Web 控件后关闭我的 jQuery 对话框？

> ID：12560222
> 
> 赞同：0
> 
> 时间：2012-09-24T06:57:00.493
> 
> 标签：c#, jquery, asp.net, modal-dialog, jquery-dialog

我使用 ASP.NET 和 jQuery，我使用对话框。在此对话框中，我有 Web 控件。如果我单击对话框中的按钮，则对话框关闭，但如果我在此对话框中搜索用户，我不希望对话框关闭:(

**这是我的问题的一个例子：**

如果我单击 lupe 符号，我可以在我们的 Active Directory 中打开一个用于搜索用户的对话框。

![在此处输入图像描述](../Images/b6392640e61d2d539e8fede694e1ce59.png)

但是如果我点击对话框上的搜索按钮，那么它首先关闭，如果我打开对话框，我可以看到找到的用户：/

![在此处输入图像描述](../Images/ede20907883cad4948c0f79ab1ecc97a.png)

如果我单击选项卡“Signatur”，我会遇到同样的问题如果我单击按钮，则页面会使用选项卡“Abwesenheit”加载新页面，但是如果我单击选项卡“signatur”agein，则会创建 Signatur :(

我的代码：（对话框的 jquery 代码）

```
$(document).ready(function () {
    $("#dialog").dialog({
        autoOpen: false,
        modal: true,
        resizable: false,
        height: 450,
        width: 600,
        closeOnEscape: false,
        buttons: {

        }
    });

    $("#dialog").parent().appendTo($("form:first"));

    $("#DialogOpen").click(function () {
        $("#dialog").dialog("open");
        $("#dialog").parent().appendTo($("form:first"));
        return false;
    });
}); 
```

这是我的 ASPX：

```
<div id="dialog" title="Vertreterliste">
            <asp:TextBox ID="txtBox" runat="server" ></asp:TextBox>

            <asp:ImageButton ID="imageSearch" runat="server" 
                ImageUrl="~/Theme/Pictures/lupe.jpg" Height="24px" Width="25px" 
                onclick="imageSearch_Click" />

                <hr />

             <asp:ListView runat="server" ID="myListView" OnItemCommand="myListView_ItemCommand" 
                   OnSelectedIndexChanging="myListView_SelectedIndexChanging">

      ....

        </asp:ListView>

        </div> 
```

如果我单击 Web 控件，我该怎么做才能使对话框不关闭：/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T07:03:06.690

您的对话框正在关闭，因为您的 Web 控件正在回发，因此，整个页面正在发布到服务器，并且当它再次返回时，它没有对话框是否打开的信息。

因此，您可以通过使用 UpdatePanels 或通过 ajax 发送请求来停止关闭 Web 控件的对话框。

或者您可以将对话框打开状态存储在隐藏字段中，当页面加载回来时，检查此隐藏字段值并根据值再次使用客户端脚本打开您的对话框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T07:19:03.457

我在 div 下面打开。当我单击删除按钮中的删除按钮时，我有类似“lnkDelete”的类。

```
<div id="dialog-confirm" title="Delete Country">
        <p>
            Are you soure you wont to delete this record ?</p>
    </div> 

<script type="text/javascript">
        $(function () {
            $(".lnkDelete").button();
            $("#dialog-confirm").dialog({
                autoOpen: false,
                model: true,
                width: 300,
                resizable: false,
                height: 200
            });

            $(".lnkDelete").click(function (e) {
                e.preventDefault();
                var targeturl = $(this).attr("href");

                $("#dialog-confirm").dialog({
                    buttons: {
                        "Confirm": function () {
                            window.location.href = targeturl;
                        },
                        "Cancel": function () {
                            $(this).dialog("close");
                        }
                    }
                });
                $("#dialog-confirm").dialog("open");
            });
        });
    </script> 
```

我想这会对你有所帮助......

# ios - exc_BAD_ACCESS(code=1) 应用程序在 iOS6 上崩溃

> ID：12560223
> 
> 赞同：0
> 
> 时间：2012-09-24T06:57:03.000
> 
> 标签：ios, ios6

我最近接管了一个 iOS 项目，当我通过单击部分 curl 从我的 PDWViewController 返回到上一个视图时，该项目似乎崩溃了。我收到以下错误：

![http://i.imgur.com/xow29.png](../Images/2088f99b729b48c2ec3a82083254f39e.png)

我很抱歉我能够提供的信息量不足，但因为我最近才开始为 iOS 开发并在不到一周前接管了整个项目。这是我认为相关的内容：

**PDFViewController**

```
- (void)viewDidLoad
{

[super viewDidLoad];
// Do any additional setup after loading the view.

itemObjectsInApp =[CoreDataHelper getObjectsForEntity:@"Item" withSortKey:nil andSortAscending:YES andContext:managedObjectContext];

Item *selectedItem = nil;

for(Item *item in itemObjectsInApp){
    if(item.isSelectedItem == [NSNumber numberWithInt:1]){
        selectedItem = item;
    }
}

NSString *path = [[NSBundle mainBundle] pathForResource:selectedItem.pathToPdfFile ofType:@"pdf"];
NSURL *targetURL = [NSURL fileURLWithPath:path];
NSURLRequest *request = [NSURLRequest requestWithURL:targetURL];

[self.pdfView loadRequest:request];

[selectedItem release];
} 
```

**主视图控制器**

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
PdfViewController *pdfViewController = (PdfViewController *)[segue destinationViewController];
pdfViewController.managedObjectContext = managedObjectContext;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T19:26:11.437

EXC_BAD_ACCESS 是由不正确的内存访问引起的。

尝试删除它

```
[selectedItem release]; 
```

看看它是否有效。

比，如果它有效，您将不得不在使用后释放该对象，可能使用自动释放或其他方式。

# cordova - Jquery Mobile & PhoneGap - Android 端口问题

> ID：12560232
> 
> 赞同：0
> 
> 时间：2012-09-24T06:57:58.530
> 
> 标签：cordova, jquery-mobile

在某些型号的安卓手机上遇到问题。整个应用程序正常工作，但一直得到“内容出现然后消失”的一致报告。基本上内容会闪烁然后消失。我已经能够在我的设备上重现这一点（运行 cyanogenmod 的 HP 触摸板）。不知道如何调试它，但如果内容区域设置为 data-position="fixed"，则内容显示的成功有限，但显然这会破坏许多其他屏幕元素。在这一点上，我什至不确定从这里去哪里，我希望有人遇到它或者可能能够为我指明正确的方向。

提前感谢并感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T07:30:58.633

我想我明白了。在这里发布它，以便它可以帮助其他人..

我的 iOS 版本出现闪烁问题，因此添加了 -webkit-backface-visibility: hidden; 对于 body 标签，但这是导致某些 android 设备/版本出现空白屏幕的原因。所以对于 android 端口，摆脱 -webkit-backface-visibility: hidden;

如果有其他问题会在这里发布...

# objective-c - prepareForSegue 没有传递正确的 PFFile

> ID：12560233
> 
> 赞同：1
> 
> 时间：2012-09-24T06:58:04.580
> 
> 标签：objective-c, ios, parse-platform

将 PFFile 传递到新视图时，我要么没有得到图像，要么没有得到错误的图像。

这是 prepareForSegue 方法

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {

    if ([[segue identifier] isEqualToString:@"ShowWine"]) {

        NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];
        PFObject *object = [self.objects objectAtIndex:indexPath.row];
        PFFile *file = [object objectForKey:@"image"];
        [[segue destinationViewController] setFile:file];

    }
} 
```

而我的相关实现文件的其余部分，我只是认为我没有在正确的部分找到正确的行？

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return self.sections.allKeys.count;
}

- (NSString *)wineTypeForSection:(NSInteger)section {
    return [self.sectionToWineTypeMap objectForKey:[NSNumber numberWithInt:section]];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    NSString *wineType = [self wineTypeForSection:section];
    NSArray *rowIndecesInSection = [self.sections objectForKey:wineType]; return  rowIndecesInSection.count;
}

- (void)objectsDidLoad:(NSError *)error {
    [super objectsDidLoad:error];

    [self.sections removeAllObjects];
    [self.sectionToWineTypeMap removeAllObjects];

    NSInteger section = 0;
    NSInteger rowIndex = 0;
    for (PFObject *object in self.objects) {
        NSString *wineType = [object objectForKey:@"wineType"];
        NSMutableArray *objectsInSection = [self.sections objectForKey:wineType];
        if (!objectsInSection) {
            objectsInSection = [NSMutableArray array];

            [self.sectionToWineTypeMap setObject:wineType forKey:[NSNumber numberWithInt:section++]];
        }

        [objectsInSection addObject:[NSNumber numberWithInt:rowIndex++]];
        [self.sections setObject:objectsInSection forKey:wineType];
    }
}

- (PFObject *)objectAtIndexPath:(NSIndexPath *)indexPath {
    NSString *wineType = [self wineTypeForSection:indexPath.section];

    NSArray *rowIndecesInSection = [self.sections objectForKey:wineType];

    NSNumber *rowIndex = [rowIndecesInSection objectAtIndex:indexPath.row];
    return [self.objects objectAtIndex:[rowIndex intValue]];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T10:08:09.083

您应该尝试执行以下操作：

1.  创建实例变量 (PFFile *aFile)
2.  在`didSelectRowAtIndexPath:`，调用你的`objectAtIndexPath:`方法，并设置`aFile`返回值
3.  仍然在`didSelectRowAtIndexPath:`，调用你的`performSegueWithIdentifier:`和 in `prepareForSegue:`，只需将目标文件设置为你的 var `[[segue destinationViewController] setFile: aFile];`:。

试试这个，看看它是否效果更好。如果没有，请告诉我！

# javascript - webkitTransform 不适用于 ios Phonegap

> ID：12560234
> 
> 赞同：1
> 
> 时间：2012-09-24T06:58:05.610
> 
> 标签：javascript, html, ios, cordova

我有一个 Phonegap 应用程序，我必须用“计数器”增量旋转我的 IMG 箭头。此代码在 semulator 4.2 和更高版本的 phonegap 1.0.0 上运行良好。现在我有 phonegap 1.4.1 和模拟器 5.0 和 5.1。为什么没有发生旋转。

document.getElementById("userguideArrow").style.webkitTransform='rotate('+counter+'deg)';

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T08:25:42.310

奇怪的问题：S ...我使用以下方法使其工作：

```
var str = new String('rotate(' + counter + 'deg)');
document.getElementById("userguideArrow").style['-webkit-transform'] = str; 
```

它使用 iPhone 5 模拟器为我工作。

希望这对你也有用。让我知道你的结果伙伴。

# wpf - 如何在 WPF 中循环 ItemsControl？

> ID：12560235
> 
> 赞同：2
> 
> 时间：2012-09-24T06:58:08.280
> 
> 标签：wpf, itemscontrol

如何循环遍历此 ItemsControl 并在此 Xaml 的代码隐藏页面中更改它的 TextBlock 背景。我是 WPF 的新手。

```
 <ItemsControl ItemsSource="{Binding Path= HeaderList}" Name="Headers">
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <TextBlock Name="Data"   Text="{Binding }" Width="100" HorizontalAlignment="Left" PreviewMouseLeftButtonDown="MouseLeftButtonDown_Handler" 
                            MouseEnter="MouseEnter_Handler" MouseLeave="MouseLeave_Handler">
                </TextBlock>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl> 
```

提前致谢！！

实际上我的要求是在不同的鼠标事件上更改单个 TextBlock 的背景颜色。所以我需要在后面的代码中访问 TextBlock，根据登录我可以相应地更改 Textblock 的背景颜色。所以我认为需要迭代ItemsControl。如果我绑定背景属性，那么所有属性更改都会影响该 ItemsControl 中的所有文本块。我不想这样。我想以不同的方式设置和更改每个单独的文本块的颜色。

我可以访问导致该事件的事件处理程序中的单个，但我想访问 itemscontrol 中的所有文本块并根据某些逻辑更改它们的颜色

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T07:57:08.163

如果我正确理解您的问题，您希望将 TextBlock 背景绑定到数据上下文中的值，并在鼠标事件中更改该值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T09:16:04.400

使用 axelle 建议的背景绑定解决方案：您可以遍历 HeaderList 中的项目并设置背景属性。Header 类必须实现 INotifyPropertyChanged 接口

```
<Window
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:WpfApplication1" x:Class="WpfApplication1.MainWindow"
    Title="MainWindow" Height="350" Width="525">

<ItemsControl ItemsSource="{Binding Path=HeaderList}">
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <TextBlock Text="{Binding Text}" Background="{Binding Background}" />
        </DataTemplate>
    </ItemsControl.ItemTemplate>
</ItemsControl> 
```

```
public partial class MainWindow : Window
{
    public class Header : NotificationObject
    {
        public string Text { get; set; }
        public Brush Background { get; set; }
    }

    public IList<Header> HeaderList { get; set; }

    public MainWindow()
    {
        HeaderList = new List<Header>
        {
            new Header {Text = "header1", Background = Brushes.Red},
            new Header {Text = "header2", Background = Brushes.Blue},
            new Header {Text = "header3", Background = Brushes.Chartreuse},
        };

        DataContext = this;

        InitializeComponent();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T07:56:57.870

不要循环通过项目控件，最好使用触发器将更改应用于您的文本块:)

```
<ItemsControl ItemsSource="{Binding Path= HeaderList}" Name="Headers">
<ItemsControl.ItemTemplate>
    <DataTemplate>
        <TextBlock Text="{Binding}">
            <TextBlock.Style>
                <Style TargetType="TextBlock">
                    <Style.Triggers>
                        <Trigger Property="IsMouseOver" Value="true">
                            <Setter Property="Background" Value="Red" />
                        </Trigger>
                    </Style.Triggers>
                </Style>
            </TextBlock.Style>
        </TextBlock>
    </DataTemplate>
</ItemsControl.ItemTemplate> 
```

# mysql - sql事务，为什么用户可以更新

> ID：12560237
> 
> 赞同：1
> 
> 时间：2012-09-24T06:58:28.450
> 
> 标签：mysql

我正在学习 mysql 中的事务。我无法理解行为。我的数据库的隔离级别是可重复读取的。数据库架构：

```
creade database my_db;
use my_db;
create table locktest(
    id integer,
    val integer,
    primary key (id)
);
insert into locktest (id, val) values (3,6); 
```

我创建了两个用户。用户 1 下一步：

```
start transaction;
select * from locktest where id = 3; 
```

得到 id = 3，val = 6；

然后，user2 更新：

```
update locktest set val = 7 where id = 3;
select * from locktest where id = 3; 
```

结果是 id = 3，val = 7；

用户 1 选择：

```
select * from locktest where id = 3; 
```

ID = 3，验证 = 7

所以，我的问题是为什么 user2 可以更新表，不应该被 user1 锁定？为什么在最后一次从 user1 中选择它得到更新的值，不应该根据[可重复的读取隔离级别](http://dev.mysql.com/doc/refman/5.0/en/set-transaction.html#isolevel_repeatable-read)保持一致？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T07:26:59.600

你需要[innodb吗，看这个答案](https://stackoverflow.com/a/9242049/842935)。

您应该将您的 SQL 操作封装到事务中以确保隔离，这足以封装`User 1`您的测试操作。请记住在两个单独的会话中执行命令，例如两次打开 MySQL 工具，您无法使用 phpmyadmin 进行测试：

```
User 1:                                         User 2:
SET SESSION TRANSACTION 
 ISOLATION LEVEL
 REPEATABLE READ;

START TRANSACTION;                              START TRANSACTION;

select * 
 from locktest where id = 3;

                                                update locktest 
                                                  set val = 7 where id = 3;
                                                select * from locktest 
                                                  where id = 3;

select * 
 from locktest where id = 3;

--Result must be the same than
--previus query.

COMMIT;

                                                COMMIT; 
```

# android - Android呼叫意图多号码选择

> ID：12560239
> 
> 赞同：3
> 
> 时间：2012-09-24T06:58:43.857
> 
> 标签：android, android-intent, call

我有一个触发呼叫意图的 ImageButton。我想知道是否可以将 2 个号码作为数据传递，这样当您点击按钮时，它会自动打开一个弹出窗口，让您选择要拨打的号码。这应该是您联系人的默认 Android 行为，如果您有多个号码与您尝试呼叫的联系人相关联，它会为您提供选项。

我的代码是这样的：

```
 Intent callIntent = new Intent(Intent.ACTION_CALL);
 callIntent.setData(Uri.parse("1234567890"));
 startActivity(callIntent); 
```

我试图用分号分隔多个数字，但不工作：

```
 Intent callIntent = new Intent(Intent.ACTION_CALL);
 callIntent.setData(Uri.parse("1234567890;0987654321"));
 startActivity(callIntent); 
```

有人对此有解决方案吗？

谢谢曼努埃尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T07:10:15.427

我不认为以编程方式退出任何这样的事情。

但是你可以尝试这样的事情，点击图像按钮：

1）如果只有1个数字，请使用您编写的代码。

2）如果有多个号码，打开一个对话框（您需要自己创建）并让用户选择号码，然后将号码重定向到您的代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-26T11:37:35.833

```
 import android.Manifest;
    import android.content.Context;
    import android.content.Intent;
    import android.content.pm.PackageManager;
    import android.net.Uri;
    import android.support.v4.app.ActivityCompat;
    import android.support.v7.app.AppCompatActivity;
    import android.os.Bundle;
    import android.telephony.PhoneStateListener;
    import android.telephony.TelephonyManager;
    import android.text.Html;
    import android.text.method.LinkMovementMethod;
    import android.util.Log;
    import android.view.View;
    import android.widget.TextView;

    import java.util.ArrayList;
    import java.util.regex.Matcher;
    import java.util.regex.Pattern;

    public class MainActivity extends AppCompatActivity {

        TextView tv;

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);
            attachUi();
            //getPattern();
        }

        private void attachUi() {
            tv = (TextView) findViewById(R.id.textview);
            tv.setOnClickListener(clk);
        }

        private View.OnClickListener clk = new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                gotoCall();
            }
        };

        private void gotoCall() {
            ArrayList<String> list = new ArrayList<String>();
            list.add("08698511503");
            list.add("07666175151");
            list.add("0548554552");

            TelephonyManager TelephonyMgr = (TelephonyManager) this.getSystemService(Context.TELEPHONY_SERVICE);
            TelephonyMgr.listen(new PhoneCallListener(this, list), PhoneStateListener.LISTEN_CALL_STATE);

            if (ActivityCompat.checkSelfPermission(this, Manifest.permission.CALL_PHONE) != PackageManager.PERMISSION_GRANTED) {
                // TODO: Consider calling
                //    ActivityCompat#requestPermissions
                // here to request the missing permissions, and then overriding
                //   public void onRequestPermissionsResult(int requestCode, String[] permissions,
                //                                          int[] grantResults)
                // to handle the case where the user grants the permission. See the documentation
                // for ActivityCompat#requestPermissions for more details.
                return;
            }
            //startActivity(callIntent);
        }
    }

    // create new class

    class PhoneCallListener extends PhoneStateListener {
        int count = 0;
        Context context;
        ArrayList<String> list;

        public PhoneCallListener(MainActivity mainActivity, ArrayList<String> list) {
            this.context = mainActivity;
            this.list = list;
        }

        @Override
        public void onCallStateChanged(int state, String incomingNumber) {
            super.onCallStateChanged(state, incomingNumber);
            Log.v(this.getClass().getSimpleName(), "List Size ::" + list);
            switch (state) {
                case TelephonyManager.CALL_STATE_RINGING:
                    Log.v(this.getClass().getSimpleName(), "Inside Ringing State::");
                    break;
                case TelephonyManager.CALL_STATE_IDLE:
                    String phone_number = null;
                    Log.v(this.getClass().getSimpleName(), "Inside Idle State::");
                    if (list.size() > count) {
                        phone_number = list.get(count);
                        count++;
                    }
                    if (phone_number != null) {
                        nextCalling(phone_number);
                    }
                    break;
                case TelephonyManager.CALL_STATE_OFFHOOK:
                    Log.v(this.getClass().getSimpleName(), "Inside OFFHOOK State::");
                    break;
                default:
                    break;
            }
        }

        private void nextCalling(String phone_number) {
            Intent callIntent1 = new Intent(Intent.ACTION_CALL);
            callIntent1.setData(Uri.parse("tel:" + phone_number));
            if (ActivityCompat.checkSelfPermission(context, Manifest.permission.CALL_PHONE) != PackageManager.PERMISSION_GRANTED) {
                // TODO: Consider calling
                //    ActivityCompat#requestPermissions
                // here to request the missing permissions, and then overriding
                //   public void onRequestPermissionsResult(int requestCode, String[] permissions,
                //                                          int[] grantResults)
                // to handle the case where the user grants the permission. See the documentation
                // for ActivityCompat#requestPermissions for more details.
                return;
            }
            context.startActivity(callIntent1);
        }
    }

// in manifest add permission..

<uses-permission android:name="android.permission.CALL_PHONE" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE" /> 
```

# java - Java 文件夹或 I/O

> ID：12560242
> 
> 赞同：-1
> 
> 时间：2012-09-24T06:59:17.250
> 
> 标签：java

那里

我的任务是一个需要我从文件夹中读取文件的项目。每个文本文件 .txt 都与一个 .a1 .a2 文件（称为注释）相关联，它在整个文件夹中包含多个此文件。

是否可以将 .txt 存储在字符串缓冲区中？

如何读取一行文件的开始和结束偏移量？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T07:04:12.773

像这样的东西...

*   使用 listFiles() 发现目录中的内容
*   使用 BufferedReader 逐行读取文件
*   StringBuilder 是较新版本的 StringBuilder（未同步）。

代码

```
File dir = new File("path/to/files");
for (File f : dir.listFiles()) {
    if (f.getName().endsWith(".txt")) {
        StringBuilder builder = new StringBuilder();
        BufferedReader reader = new BufferedReader(new FileReader(f));
        String line = null;
        while ((line = reader.readLine()) != null) {
            builder.append(line);
        }
        reader.close();
    } else if (f.getName().endsWith(".a1")) {
        // something else
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T07:32:33.317

[Apache Common I/O](http://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html)将有助于读取文件并将其转换为字符串，并且始终建议使用免费的开源实用程序而不是新鲜编写

# c - 在 Visual Studio 中使用 threadprivate 指令

> ID：12560243
> 
> 赞同：1
> 
> 时间：2012-09-24T06:59:24.923
> 
> 标签：c, multithreading, visual-studio-2010, openmp, extern

Visual Studio 2010 中的 OpenMP 实现似乎有一个严重的错误，不允许将外部变量作为 threadprivate。以下代码无法编译：

文件.c

* * *

```
#include <omp.h>

/* Declaration of external variable. */

extern int My_Var;

#pragma omp threadprivate (My_Var) 

void MyFunc(void) { My_Var = 1;} 
```

* * *

错误信息是：

```
error C3053:
'My_Var' : 'threadprivate' is only valid for global or static data tems. 
```

显然，编译器对变量的链接属性感到困惑。

在多个文件中引用全局变量是最常见的。所以这个问题使得`threadprivate`指令在任何实际程序中都无法使用。

我想知道是否有技巧来处理这个错误。不幸的是，就我而言，这个问题使我无法完全使用 OMP。

谢谢，

亚历克斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T09:39:47.773

这似乎是（又一次）违反了 VC++ 编译器中的 OpenMP 标准。幸运的是`threadprivate`，VC++ 中的子句直接实现为`thread` `__declspec`属性的应用，您可以简单地替换：

```
extern int My_Var;

#pragma omp threadprivate (My_Var) 
```

和

```
extern __declspec(thread) int My_Var; 
```

您仍然必须在声明它的所有翻译单元中提供相同的`__declspec(thread)`属性（或`#pragma omp threadprivate`pragma）`My_Var`（根据 OpenMP 规范 - “OpenMP 2.0”规范的第 2.7.1 节也需要）。

# mysql - MySQL 查询的奇怪问题

> ID：12560244
> 
> 赞同：0
> 
> 时间：2012-09-24T06:59:28.800
> 
> 标签：mysql, function, count

我正在尝试查找以下查询返回的行数：

```
SELECT Count(id) AS fcount, 
       user_id 
FROM   customer_followups 
WHERE  id > 0 
       AND Date(followup_date) >= Str_to_date("24-09-2012", "%d-%m-%y") 
       AND Date(followup_date) <= Str_to_date("24-09-2012", "%d-%m-%y") 
GROUP  BY user_id 
ORDER  BY user_id 
```

它返回我 5 行。

但是，如果我在没有计数功能的情况下触发查询，我只会得到一条记录。见下文：

```
SELECT id, 
       user_id 
FROM   customer_followups 
WHERE  id > 0 
       AND Date(followup_date) >= Str_to_date("24-09-2012", "%d-%m-%y") 
       AND Date(followup_date) <= Str_to_date("24-09-2012", "%d-%m-%y") 
GROUP  BY user_id 
ORDER  BY user_id 
```

可能是什么原因？理想情况下，计数应该返回 1 ??

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T07:07:56.383

[`COUNT`](http://www.tizag.com/mysqlTutorial/mysqlcount.php)为您提供满足条件的组的记录数。

```
The COUNT function is an aggregate function that simply counts all the items that
are in a group. 
```

而在您的第二个查询中，您只需找到该组的 id 和 user_id。请记住，如果该组具有不同的用户 ID，它将返回其中任何一个以查找您可以使用的所有用户 ID，[`GROUP_CONCAT()`](http://mahmudahsan.wordpress.com/2008/08/27/mysql-the-group_concat-function/)即 GROUP_CONCAT(user_id)

# java - 如何在我自己的 Android 应用程序中添加推送通知

> ID：12560246
> 
> 赞同：17
> 
> 时间：2012-09-24T06:59:46.343
> 
> 标签：java, android, push-notification, android-c2dm

我在`Android`本教程中开发了一个推送通知应用程序：[android app 中的推送通知](http://www.vogella.com/tutorials/GoogleCloudMessaging/article.html)。运行应用程序时会显示注册按钮。当我点击注册按钮时，当注册成功时，我的设备上会显示一条通知。

如何将它包含在我自己的应用程序中？我的应用程序有一个 xml 解析示例应用程序。在这里，当添加任何新项目时，我希望在设备上显示（显示新订单）通知消息。它在这里自动生成。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-24T07:33:28.070

我正在发布[Google Cloud Messaging](http://developer.android.com/guide/google/gcm/index.html)的演示应用程序。

确保使用 Google API 创建 API 级别等于或高于**Android OS 2.2 的演示应用程序**

用户必须至少登录一个 Google 帐户才能使用此服务。

首先，您必须添加[GCM 库](http://developer.android.com/guide/google/gcm/gs.html#libs)。

比在我命名的类上创建`GCMIntentService`扩展[GCMBaseIntentService](http://developer.android.com/guide/google/gcm/client-javadoc/com/google/android/gcm/GCMBaseIntentService.html)如下：

```
package com.example.gcmdemo;

import android.content.Context;
import android.content.Intent;
import android.util.Log;

import com.google.android.gcm.GCMBaseIntentService;
import com.google.android.gcm.GCMConstants;

public class GCMIntentService extends GCMBaseIntentService {

     private static final String TAG = "Push Notification Demo GCMIntentService";

    @Override
    protected void onError(Context context, String errorId) {

        if(GCMConstants.ERROR_ACCOUNT_MISSING.equalsIgnoreCase(errorId)) {
            Log.v(TAG, "Error Account Missing");
        } else if(GCMConstants.ERROR_AUTHENTICATION_FAILED.equalsIgnoreCase(errorId)) {
            Log.v(TAG, "Error Authentication Failed");
        } else if(GCMConstants.ERROR_INVALID_PARAMETERS.equalsIgnoreCase(errorId)) {
            Log.v(TAG, "Error Invalid Parameters");
        } else if(GCMConstants.ERROR_INVALID_SENDER.equalsIgnoreCase(errorId)) {
            Log.v(TAG, "Error Invalid Sender");
        } else if(GCMConstants.ERROR_PHONE_REGISTRATION_ERROR.equalsIgnoreCase(errorId)) {
            Log.v(TAG, "Error Phone Registration Error");
        } else if(GCMConstants.ERROR_SERVICE_NOT_AVAILABLE.equalsIgnoreCase(errorId)) {
            Log.v(TAG, "Error Service Not Available");
        } 
    }

    @Override
    protected void onMessage(Context context, Intent intent) {

        // App Server Sends message as key value pairs 
        String value1 = intent.getStringExtra("key1");
        String value2 = intent.getStringExtra("key2");

        Log.v(TAG, "key1: "+value1 );
        Log.v(TAG, "key2: "+value2 );
    }

    @Override
    protected void onRegistered(Context context, String regId) {

        Log.v(TAG, "Successfull Registration : "+regId);
    }

    @Override
    protected void onUnregistered(Context context, String regId) {

        Log.v(TAG, "Successfully Unregistred : "+regId);
    }

    @Override
    protected String[] getSenderIds(Context context) {
        return super.getSenderIds(context);
    }

    @Override
    protected void onDeletedMessages(Context context, int total) {
        super.onDeletedMessages(context, total);
    }

    @Override
    protected boolean onRecoverableError(Context context, String errorId) {
        return super.onRecoverableError(context, errorId);
    }
} 
```

以下是在以下演示活动中检查注册的方法：

```
package com.example.gcmdemo;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.Menu;

import com.google.android.gcm.GCMRegistrar;

public class MainActivity extends Activity {

    private static final String TAG = "Push Notification Demo Activity";
    private static final String SENDER_ID = "1069713227710";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        GCMRegistrar.checkDevice(this);
        GCMRegistrar.checkManifest(this);
        final String regId = GCMRegistrar.getRegistrationId(this);
        if (regId.equals("")) {
          GCMRegistrar.register(this, SENDER_ID);
        } else {
          Log.v(TAG, "Already registered : "+regId);
        }
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

最后是演示清单：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.gcmdemo"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="8" />

    <permission
        android:name="com.example.gcmdemo.permission.C2D_MESSAGE"
        android:protectionLevel="signature" />

    <uses-permission android:name="com.example.gcmdemo.permission.C2D_MESSAGE" />

    <!-- App receives GCM messages. -->
    <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
    <!-- GCM connects to Google Services. -->
    <uses-permission android:name="android.permission.INTERNET" />
    <!-- GCM requires a Google account. -->
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />
    <!-- Keeps the processor from sleeping when a message is received. -->
    <uses-permission android:name="android.permission.WAKE_LOCK" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <receiver
            android:name="com.google.android.gcm.GCMBroadcastReceiver"
            android:permission="com.google.android.c2dm.permission.SEND" >
            <intent-filter>
                <action android:name="com.google.android.c2dm.intent.RECEIVE" />
                <action android:name="com.google.android.c2dm.intent.REGISTRATION" />

                <category android:name="com.example.gcmdemo" />
            </intent-filter>
        </receiver>

        <service android:name=".GCMIntentService" />
    </application>

</manifest> 
```

此外，您还需要[此处指定的第三方服务器端脚本](http://developer.android.com/guide/google/gcm/gcm.html#server)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-12-20T11:45:25.190

> ***使用 FCM 发送推送通知***

**Google 弃用了 Google Cloud Messaging (GCM) 并推出了新的推送通知服务器，即 Firebase Cloud Messaging (FCM)。FCM 和 GCM 一样，FCM 也是移动平台的跨平台消息解决方案**

Firebase Cloud Messaging 可以发送三种类型的消息（[消息类型](https://firebase.google.com/docs/cloud-messaging/concept-options)）

**1.通知消息**

**2.数据信息**

**3.带有通知和数据的消息**

> **Firebase 云消息传递集成步骤：-**

1.在 Firbase 控制台中设置新项目或导入项目( ***[https://firebase.google.com/](https://firebase.google.com/)*** )

2.在Firebase App中添加与App同名的包名。

3.获取“google-services.json”文件并将该文件放入您项目的应用程序文件夹。该文件包含Google服务的所有网址和密钥，因此不要更改或编辑此文件。

4.在 Project for Firebase 中添加新的 Gradle 依赖项。

```
//app/build.gradle
dependencies {
  compile 'com.google.firebase:firebase-messaging:9.6.0'
}

apply plugin: 'com.google.gms.google-services' 
```

5.创建一个包含我们在应用程序中用于 FCM 的所有常量值的类。

```
public class Config {
 public static final String TOPIC_GLOBAL = "global";
 // broadcast receiver intent filters
public static final String REGISTRATION_COMPLETE = "registrationComplete";
public static final String PUSH_NOTIFICATION = "pushNotification";

// id to handle the notification in the notification tray
public static final int NOTIFICATION_ID = 100;
public static final int NOTIFICATION_ID_BIG_IMAGE = 101;
public static final String SHARED_PREF = "ah_firebase";
 } 
```

6\. 创建一个名为 MyFirebaseInstanceIDService.java 的类，它将接收每个应用程序唯一的 firebase 注册 ID。注册 id 用于向单个设备发送消息。

```
 public class MyFirebaseInstanceIDService extends FirebaseInstanceIdService {
    private static final String TAG = MyFirebaseInstanceIDService.class.getSimpleName();

    @Override
    public void onTokenRefresh() {
        super.onTokenRefresh();
        String refreshedToken = FirebaseInstanceId.getInstance().getToken();

        // Saving reg id to shared preferences
        storeRegIdInPref(refreshedToken);

        // sending reg id to your server
        sendRegistrationToServer(refreshedToken);

        // Notify UI that registration has completed, so the progress indicator can be hidden.
        Intent registrationComplete = new Intent(Config.REGISTRATION_COMPLETE);
        registrationComplete.putExtra("token", refreshedToken);
        LocalBroadcastManager.getInstance(this).sendBroadcast(registrationComplete);
    }

    private void sendRegistrationToServer(final String token) {
        // sending gcm token to server
        Log.e(TAG, "sendRegistrationToServer: " + token);
    }

    private void storeRegIdInPref(String token) {
    SharedPreferences pref =     getApplicationContext().getSharedPreferences(Config.SHARED_PREF, 0);
        SharedPreferences.Editor editor = pref.edit();
        editor.putString("regId", token);
        editor.commit();
    }
    } 
```

7.再创建一个名为 MyFirebaseMessagingService.java 的服务类。这将接收 firebase 消息。

```
public class MyFirebaseMessagingService extends FirebaseMessagingService {

    private static final String TAG = MyFirebaseMessagingService.class.getSimpleName();

    private NotificationUtils notificationUtils;

    @Override
    public void onMessageReceived(RemoteMessage remoteMessage) {
        Log.e(TAG, "From: " + remoteMessage.getFrom());

        if (remoteMessage == null)
            return;

        // Check if message contains a notification payload.
        if (remoteMessage.getNotification() != null) {
            Log.e(TAG, "Notification Body: " + remoteMessage.getNotification().getBody());
            handleNotification(remoteMessage.getNotification().getBody());
        }
    }
 private void handleNotification(String message) {
        if (!NotificationUtils.isAppIsInBackground(getApplicationContext())) {
            // app is in foreground, broadcast the push message
            Intent pushNotification = new Intent(Config.PUSH_NOTIFICATION);
            pushNotification.putExtra("message", message);
            LocalBroadcastManager.getInstance(this).sendBroadcast(pushNotification);

            // play notification sound
            NotificationUtils notificationUtils = new NotificationUtils(getApplicationContext());
            notificationUtils.playNotificationSound();
        }else{
            // If the app is in background, firebase itself handles the notification
        }
    }
 /**
     * Showing notification with text only
     */
    private void showNotificationMessage(Context context, String title, String message, String timeStamp, Intent intent) {
        notificationUtils = new NotificationUtils(context);
        intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TASK);
        notificationUtils.showNotificationMessage(title, message, timeStamp, intent);
    }

    /**
     * Showing notification with text and image
     */
    private void showNotificationMessageWithBigImage(Context context, String title, String message, String timeStamp, Intent intent, String imageUrl) {
        notificationUtils = new NotificationUtils(context);
        intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TASK);
        notificationUtils.showNotificationMessage(title, message, timeStamp, intent, imageUrl);
    }
} 
```

8.在AndroidManifest.xml中添加这两个firebase服务MyFirebaseMessagingService和MyFirebaseInstanceIDService。

```
 <!-- Firebase Notifications -->
        <service android:name=".service.MyFirebaseMessagingService">
            <intent-filter>
                <action android:name="com.google.firebase.MESSAGING_EVENT" />
            </intent-filter>
        </service>

        <service android:name=".service.MyFirebaseInstanceIDService">
            <intent-filter>
                <action android:name="com.google.firebase.INSTANCE_ID_EVENT" />
            </intent-filter>
        </service>
        <!-- ./Firebase Notifications --> 
```

现在只需[发送您的第一条消息](https://firebase.google.com/docs/cloud-messaging/android/first-message)

> **备注：**
> 
> ***1.阅读 Google Doc for [Firebase Cloud Messaging](https://firebase.google.com/docs/cloud-messaging/) ***
> 
> ***2.如果您想将适用于 Android 的 GCM 客户端应用程序迁移到 Firebase 云消息传递，请按照以下步骤和文档（[迁移 GCM 客户端应用程序](https://developers.google.com/cloud-messaging/android/android-migrate-fcm)）***
> 
> ***3.Android示例教程和代码（[接收重新参与通知](https://codelabs.developers.google.com/codelabs/firebase-android/#9)）***

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-06T15:11:33.347

个人建议您，除了 GCM 之外，还有其他名为[Parse](https://parse.com/tutorials/android-push-notifications) for PushNotification 的库，它的工作原理与 Google Cloud Messaging 相同，但它比 GCM 简单得多

您只需下载 JAR 文件和简单的两三行代码即可实现 PUSH-NOTIFICATION

学习使用这个网站[https://parse.com/tutorials/android-push-notifications](https://parse.com/tutorials/android-push-notifications)

即使您不必使用 PHP 或它为您提供便利的任何类型的服务器端代码

看我给你演示

```
 Parse.initialize(this, "YOUR_APP_ID", "YOUR_CLIENT_KEY");
  PushService.setDefaultPushCallback(this, YourDefaultActivity.class); 
```

从上面的代码足以**接收推送通知**

如果您想**发送通知**，他们会提供漂亮的用户界面，请查看他们提供的用户界面图片

![在此处输入图像描述](../Images/e1bae60c971d420ad5fad268abe96821.png)

# android - 将 Android 版本从 2.2 更改为 2.1

> ID：12560247
> 
> 赞同：2
> 
> 时间：2012-09-24T06:59:48.677
> 
> 标签：android

我在`2.2`. 我通过`https`. 我使用`ssl`认证来访问这些服务。它工作正常`version 2.2`，但现在我的客户想要它`2.1`。所以我更改了版本和最小 sdk 级别，但是当我在 2.1 中运行应用程序时，它给了我`SSl socket exception`. 现在在我的项目根文件夹中显示`2.1`版本。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T08:25:55.950

android OS 2.1 到 2.2 的变化与 SSL 证书有关。但现在找不到网址。

为了避免您可以捕获异常，并且在 SSLException 上，您可以使用非安全连接重新连接服务器。保持共享偏好以防将来使用非安全连接将始终避免双重连接。

它不是那么优雅或安全的方式，但它对我有用。

# c# - c#代码隐藏中的数据模板

> ID：12560249
> 
> 赞同：4
> 
> 时间：2012-09-24T06:59:57.263
> 
> 标签：c#, wpf, datatemplate

我搜索一个选项以在 c# 代码中构建数据模板。我曾经使用过：

```
DataTemplate dt = new DataTemplate(typeof(TextBox));

        Binding bind = new Binding();
        bind.Path = new PropertyPath("Text");
        bind.Mode = BindingMode.TwoWay;

        FrameworkElementFactory txtElement = new FrameworkElementFactory(typeof(TextBox));
        txtElement.SetBinding(TextBox.TextProperty, bind);

        txtElement.SetValue(TextBox.TextProperty, "test");

        dt.VisualTree = txtElement;

        textBox1.Resources.Add(dt, null); 
```

但它不起作用（它被放置在窗口的加载方法 - 所以我的文本框应该在窗口开始时显示单词“test”）。任何想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-24T07:15:21.927

每个元素都需要添加到当前的可视化树中。例如：

```
ListView parentElement; // For example a ListView

// First: create and add the data template to the parent control
DataTemplate dt = new DataTemplate(typeof(TextBox));
parentElement.ItemTemplate = dt;

// Second: create and add the text box to the data template
FrameworkElementFactory txtElement = 
    new FrameworkElementFactory(typeof(TextBox));
dt.VisualTree = txtElement;

// Create binding
Binding bind = new Binding();
bind.Path = new PropertyPath("Text");
bind.Mode = BindingMode.TwoWay;

// Third: set the binding in the text box
txtElement.SetBinding(TextBox.TextProperty, bind);
txtElement.SetValue(TextBox.TextProperty, "test"); 
```

# javascript - 如何在 JSP 字符串变量中插入 JavaScript 变量

> ID：12560252
> 
> 赞同：0
> 
> 时间：2012-09-24T07:00:14.253
> 
> 标签：javascript, jsp

如何在 JSP 字符串变量中插入 JavaScript 变量。

```
<script>
    <%!
        String host_name = "tst" + location.host;
    %>
</script>

<%=host_name%> <!-- getting error --> 
```

感谢帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T07:01:21.347

Javascript 在浏览器中执行，而 JSP 在服务器上执行。所以你不能直接从 javascript 获取一个值到 JSP (java) ：当 javascript 被执行时，JSP 已经完成了它的执行并发送了结果。

根据您的需要，您可能希望使用 ajax 从浏览器向服务器发送一个值，但如果不知道您为什么尝试这样做，就不可能定义适用的策略。

如果你想要的只是在 java/jsp 中有你的主机名，我建议你按照以下方式做一些事情

```
<%
InetAddress addr = InetAddress.getLocalHost();
String hostname = addr.getHostName();
%> 
```

# c# - 为 null 重载 == 运算符

> ID：12560253
> 
> 赞同：5
> 
> 时间：2012-09-24T07:00:15.787
> 
> 标签：c#, .net, null, operator-overloading, equals-operator

我有一个名为`Message`重载这些运算符的类：

```
public static bool operator ==(Message left, Message right)
public static bool operator !=(Message left, Message right)

public static bool operator ==(Message left, string right)
public static bool operator !=(Message left, string right)

public static bool operator ==(string left, Message right)
public static bool operator !=(string left, Message right) 
```

我希望`==`and运算符继续比较and but`!=`以外的类型的引用，`String``Message`

```
var message = new Message();
var isNull = message == null; 
```

给了我这个：

> 以下方法或属性之间的调用不明确：'Message.operator ==(Message, Message)' 和 'Message.operator ==(Message, string)'

我知道这是因为`Message`和`String`都是引用类型并且它们都可以是`null`，但我希望能够使用`==`opreator 来检查消息是否为空。

我可以`==`为空值重载吗？我尝试重载它`object`并调用`object.ReferenceEquals(object, object)`重载，但这没有帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T07:06:18.607

提供一个实现`operator ==(Message left, object right)`并检查它的类型`right`以查看它是空值、字符串还是消息。

或者，为 Message 定义一个采用字符串的隐式构造函数。有关示例，请参阅[运算符重载和不同类型。](https://stackoverflow.com/questions/7054894/operator-overloading-and-different-types)

# c# - 如何在 C# 中使用动态变量解析 JSON

> ID：12560262
> 
> 赞同：0
> 
> 时间：2012-09-24T07:01:01.600
> 
> 标签：c#, json, json.net

我已经尝试了多种方法，但似乎找不到合适的解决方案。我试图解析的 JSON 看起来像这样

```
{
  "data":
  {
      "random1":
      {
          "language": "en",
          "state": "fl"
      },
      "completelyrandom":
      {
          "language": "fr",
          "state": "wa"
      }
   }
} 
```

目前我正在使用下面的 JSON.NET 反序列化为动态对象，这使我可以访问“语言”、“状态”，但我不知道父对象是什么。

```
var jsonSerializer = new JsonSerializer();
dynamic value = jsonSerializer.Deserialize(new JsonTextReader(new StringReader(json)));

foreach (var obj in value.data)
{
    var myObj = obj.First;
    string language = myObj.language;
} 
```

如何访问“random1”和“完全随机”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T07:15:28.750

是的，把它全部写出来让我头脑清醒。obj.Name 给了我容器。

# ios - 准备应用程序在 iTunes Connect 中的含义

> ID：12560266
> 
> 赞同：0
> 
> 时间：2012-09-24T07:01:22.250
> 
> 标签：ios, itunes

我刚刚完成了我的第一个应用程序并完成了我看到的所有说明，所以将其上传到 iTunes。现在，我在`Itunes>Manage Your Application`

```
Version1.0
Status  Prepare for Upload
Date CreatedSep 23, 2012 
```

应用程序图标旁边。

我是否需要做任何其他事情，或者它只是等待苹果的批准？

我知道这不是一个编程问题，但我不知道在哪里询问和搜索它什么也没给我。

我发现准备上传意味着：

```
Prepare for Upload (Yellow) 
Appears as the first status for your app. This status means that you should enter or edit metadata, screenshots, pricing, In-App Purchases, Game Center, iAd network settings, etc., to prepare your app for upload to the App Store. 
```

但我已经提交了添加数据和截图。我怎样才能进入下一个级别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T07:41:54.067

准备提交的应用程序意味着配置它的元数据，或者在应用程序购买中相关，或者如果它是一个游戏然后配置游戏中心，所以一旦你完成了你的应用程序的开发，那么你就可以将它提交给 iTunes 应用商店审查。因此，在您的情况下，您可以按照[此](http://www.slideshare.net/nefairious/ansca-app-store-presentation)链接将您的应用上传到应用商店。希望这会有所帮助。

# php - 如果我的 php 值等于选项值，我想选择该选项值

> ID：12560272
> 
> 赞同：0
> 
> 时间：2012-09-24T07:02:27.653
> 
> 标签：php, html

如果我的 php 值等于选项值，我想选择该选项值。我该怎么做？

假设我有这组选项值：

```
 <select id="updateBirthmonth" class="birth-date">
<?php $selected-value = 'May'; ?>
                    <option>Month:</option>
                    <option>January</option>
                    <option>February</option>
                    <option>March</option>
                    <option>April</option>
                    <option>May</option>
                    <option>June</option>
                    <option>July</option>
                    <option>August</option>
                    <option>October</option>
                    <option>November</option>
                    <option>December</option>
                </select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T07:17:48.317

```
Hey @Brained Washed option do have values.

$updateBirthmonth = $_REQUEST['updateBirthmonth'];

<select id="updateBirthmonth" class="birth-date">
    <option value="">Select Month</option>
    <option value="1" <?php if($updateBirthmonth=="1") { echo 'selected="selected"'; } else { echo ''; } ?>>January</option>
    <option value="2" <?php if($updateBirthmonth=="2") { echo 'selected="selected"'; } else { echo ''; } ?>>February</option>
    <option value="3" <?php if($updateBirthmonth=="3") { echo 'selected="selected"'; } else { echo ''; } ?>>March</option>
    <option value="4" <?php if($updateBirthmonth=="4") { echo 'selected="selected"'; } else { echo ''; } ?>>April</option>
    <option value="5" <?php if($updateBirthmonth=="5") { echo 'selected="selected"'; } else { echo ''; } ?>>May</option>
    <option value="6" <?php if($updateBirthmonth=="6") { echo 'selected="selected"'; } else { echo ''; } ?>>June</option>
    <option value="7" <?php if($updateBirthmonth=="7") { echo 'selected="selected"'; } else { echo ''; } ?>>July</option>
    <option value="8" <?php if($updateBirthmonth=="8") { echo 'selected="selected"'; } else { echo ''; } ?>>August</option>
    <option value="9" <?php if($updateBirthmonth=="9") { echo 'selected="selected"'; } else { echo ''; } ?>>September</option>
    <option value="10" <?php if($updateBirthmonth=="10") { echo 'selected="selected"'; } else { echo ''; } ?>>October</option>
    <option value="11" <?php if($updateBirthmonth=="11") { echo 'selected="selected"'; }  else { echo ''; } ?>>November</option>
    <option value="12" <?php if($updateBirthmonth=="12") { echo 'selected="selected"'; } else { echo ''; } ?>>December</option>
</select>

I hope this would help you. :) 
```

# jquery - 带有数据绑定到数据表的 jquery 手风琴与 ajax 手风琴

> ID：12560273
> 
> 赞同：0
> 
> 时间：2012-09-24T07:02:27.867
> 
> 标签：jquery, ajax

我构建了一个 ajax 手风琴，它从数据表中获取数据，并且在数据表内部，用户可以执行操作并将数据发送到数据库。使用 ajax 是有限制的，而且不是很舒服。我想到了 jquery，因为它看起来更好，而且我知道它可以更开放地进行更改。有人可以告诉我使用 jquery 还是 ajax 更好吗？感谢所有人

# c# - C# Linq：按不同实体的不同列分组

> ID：12560278
> 
> 赞同：0
> 
> 时间：2012-09-24T07:02:52.417
> 
> 标签：c#, linq, entity-framework

我有三个实体 ClassC、ClassS 和 ClassSA。我想通过使用 LINQ 来应用组。

```
using (var db = new SEntities())
{
    var result = from c in db.ClassC
    join s in db.ClassS on c.ID equals s.CID
    join sa in db.ClassSA on s.SAID equals sa.ID
    group sa by
    new { c.Type, s.Date.Year}
    into g
    select new ClassSAY { Year = g.Key.Year, CI = g.Key.CIType, Count = g.Count(sa => sa.ID)};
} 
```

我想加入ClassC、ClassS和ClassSA；按两个不同类的两个不同属性分组，并将结果的一部分存储在另一个类的属性中。我只按一个类的属性搜索了找到的组。

它给出了错误：

1.  无法将 lambda 表达式转换为委托类型“System.Func<SG.DAL.SA,bool>”，因为块中的某些返回类型不能隐式转换为委托返回类型

2.  无法将类型“long”隐式转换为“bool”

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T07:25:12.780

尝试使用喜欢

```
Count = g.Count() 
```

代替

```
Count = g.Count(sa => sa.ID) 
```

# c# - 哪个 NoSQL 数据库可以保护数据？

> ID：12560283
> 
> 赞同：4
> 
> 时间：2012-09-24T07:03:00.737
> 
> 标签：c#, wpf, security, nosql, data-protection

我正在为 Windows 编写 C# (WPF) 应用程序。我需要为这个应用程序存储数据（我认为在数据库中）。但我需要保护这些数据（不被修改）。我打算分发这个应用程序，所以文件系统保护不适合这种情况。我也想使用 NoSql 数据库。我的问题是哪个 NoSQL 数据库支持数据保护并且可以像嵌入应用程序数据库一样轻松安装？

Upd：那么，对于可再分发的 WPF 应用程序，哪个单用户 NoSQL DB 更好，没有安全性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T15:05:39.043

当数据在用户硬盘上时，没有办法阻止用户访问它。

以不常见的格式存储它，就像一些不常见的数据库一样，不会让它变得更难。即使加密数据库也不是不可逾越的障碍。您需要将解密密钥存储在应用程序中的某个位置，一个有决心的黑客会在搜索它足够长的时间时找到它。

当您真的想保护您的数据时，没有办法将其存储在您自己的服务器上并让程序通过 Internet 访问它。我建议为此使用网络服务。

当然，这对您来说意味着一些额外的费用，因为您必须为服务器付费。但是您还可以获得一些额外的好处：

*   您可以给每个用户一个自己的用户名和密码。这使得盗版您的产品变得更加困难（来自不同网络的太多 IP 使用相同的用户名 = 可能是软件盗版）
*   更新数据库不需要在用户机器上进行任何部署
*   你可以在你的营销材料上写下“云”:)

# c++ - 快速按需 C++ 编译

> ID：12560287
> 
> 赞同：1
> 
> 时间：2012-09-24T07:03:33.537
> 
> 标签：c++, compiler-construction, jit

我正在研究构建一个系统的可能性，当查询到达服务器时，我们将查询转换为 C++ 代码，将其编译为共享对象并运行代码。

编译本身的时间需要很短才值得。我的代码可以生成相应的 c++ 代码，但是如果我必须将它写在磁盘上，然后调用 gcc 来获取一个 .so 文件然后运行它，这似乎不值得。

有什么方法可以让我编译一小段代码并快速准备好作为共享对象（在查询到达之前可能有很长的启动时间）。如果这样的工具有一个许可许可证，那就更棒了。

编辑：我有一种用户可以使用的非常严格的查询语言，因此安全威胁无关紧要。我自己的代码将查询转换为 C++ 代码。提到clang的答案是完美的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T07:10:33.187

在 JIT 模式下运行 Clang 应该提供您需要的速度，示例可以在[这里](http://llvm.org/viewvc/llvm-project/cfe/trunk/examples/clang-interpreter/)找到，另一方面，安全是另一回事......

[Ch](http://www.softintegration.com/)还添加了 JIT，并将其视为解释器，它可能提供更简单的沙盒/受控环境。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T08:06:16.417

除了 Necrolis 答案之外，还有专门的 C++ 解析器[Cling](http://root.cern.ch/drupal/content/cling)。可能会派上用场。

# javascript - 如何使用javascript检测可见（视图中）元素

> ID：12560288
> 
> 赞同：2
> 
> 时间：2012-09-24T07:03:37.170
> 
> 标签：javascript, jquery, performance, jquery-ui, internet-explorer

我的 div (#diagram) 比浏览器中的实际可见区域大。#diagram 包含多达 1500 个“框”（其他 div 元素），我想知道这 1500 个框中的哪些实际上对用户是真正可见的，以便我可以在它们出现时使用 ajax 填充它们。我实际上确实有一些工作代码，但它会遍历由 onscroll() 事件触发的所有元素。这在 Chrome 中如此有效，但我的客户端当然必须使用邪恶的浏览器 IE8，在该浏览器中，滚动时所有元素的循环完全迫使我的应用程序跪下。

当元素进入视野或检测“真实”可见性的任何其他选项时，是否会触发某种事件？

环境：jQuery/jQueryUI（最新）、Internet Explorer 8

提前致谢 ：-）

./cj

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T07:49:34.777

如果您在所有框被渲染后只浏览一次并将它们分组为“页面” - 对 DOM div 的引用集合，这些引用在父 div 的 [y1, y2] 垂直坐标之间可见。你会有`<total height of parent div> / <visible height of parent div>`页面。
您预加载第一页的内容，然后在每个滚动事件中检查是否应加载下一页框的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T07:09:41.097

参考 -

[**元素“在视图中”事件插件**](http://remysharp.com/2009/01/26/element-in-view-event-plugin/)

当窗口滚动时，该事件会根据视口高度和 scrollTop 位置检查元素的位置。

和

[**延迟加载插件**](http://www.appelsiini.net/projects/lazyload)

Lazy Load 是一个用 JavaScript 编写的 jQuery 插件。它延迟了长网页中图像的加载。在用户滚动到它们之前不会加载视口之外的图像（网页的可见部分）

# c++ - 在 C++ 中设置默认浮点打印精度

> ID：12560291
> 
> 赞同：28
> 
> 时间：2012-09-24T07:03:51.973
> 
> 标签：c++, floating-point, default, precision, rounding

我想在比较期间控制双精度，然后使用 C++ 回到默认精度。

我打算用来`setPrecision()`设置精度。那么将精度设置回默认值的语法（如果有）是什么？

我正在做这样的事情

```
std::setPrecision(math.log10(m_FTOL)); 
```

我做了一些事情，之后我想回到默认的双重比较。

我是这样修改的，还是有一些错误

```
std::streamsize prec = std::ios_base::precision();
std::setprecision(cmath::log10(m_FTOL)); 
```

编译时为`cmath`假，编译时`std::ios_base`也为假。你能帮忙吗？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-09-24T07:10:12.947

您可以在更改*之前*获得精度`std::ios_base::precision`，然后使用它稍后将其更改回来。

您可以通过以下方式看到这一点：

```
#include <ios>
#include <iostream>
#include <iomanip>

int main (void) {
    double d = 3.141592653589;
    std::streamsize ss = std::cout.precision();
    std::cout << "Initial precision = " << ss << '\n';

    std::cout << "Value = " << d << '\n';

    std::cout.precision (10);
    std::cout << "Longer value = " << d << '\n';

    std::cout.precision (ss);
    std::cout << "Original value = " << d << '\n';

    std::cout << "Longer and original value = "
        << std::setprecision(10) << d << ' '
        << std::setprecision(ss) << d << '\n';

    std::cout << "Original value = " << d << '\n';

    return 0;
} 
```

输出：

```
Initial precision = 6
Value = 3.14159
Longer value = 3.141592654
Original value = 3.14159
Longer and original value = 3.141592654 3.14159
Original value = 3.14159 
```

上面的代码显示了两种设置精度的方法，第一种是调用`std::cout.precision (N)`，第二种是使用流操纵器`std::setprecision(N)`。

* * *

但是您需要记住，精度是用于通过流*输出*值，它不会直接影响值本身与代码的比较，例如：

```
if (val1== val2) ... 
```

换句话说，即使*输出*可能是`3.14159`，值本身仍然是完整的`3.141592653590`（当然要受到正常的浮点限制）。

如果你想这样做，你需要检查它是否足够接近而不是相等，代码如下：

```
if ((fabs (val1 - val2) < 0.0001) ... 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-12-07T16:47:03.517

**保存整个状态`std::ios::copyfmt`**

[`std::ios::copyfmt`](https://en.cppreference.com/w/cpp/io/basic_ios/copyfmt)在这些情况下，您可能还希望恢复整个先前的状态，如： [Restore the state of std::cout after manipulating it](https://stackoverflow.com/questions/2273330/restore-the-state-of-stdcout-after-manipulating-it)

主文件

```
#include <iomanip>
#include <iostream>

int main() {
    constexpr float pi = 3.14159265359;
    constexpr float e  = 2.71828182846;

    // Sanity check default print.
    std::cout << "default" << std::endl;
    std::cout << pi << std::endl;
    std::cout << e  << std::endl;
    std::cout << std::endl;

    // Change precision format to scientific,
    // and restore default afterwards.
    std::cout << "modified" << std::endl;
    std::ios cout_state(nullptr);
    cout_state.copyfmt(std::cout);
    std::cout << std::setprecision(2);
    std::cout << std::scientific;
    std::cout << pi << std::endl;
    std::cout << e  << std::endl;
    std::cout.copyfmt(cout_state);
    std::cout << std::endl;

    // Check that cout state was restored.
    std::cout << "restored" << std::endl;
    std::cout << pi << std::endl;
    std::cout << e  << std::endl;
    std::cout << std::endl;
} 
```

[GitHub 上游](https://github.com/cirosantilli/linux-kernel-module-cheat/blob/bf1ca6460da45526ea928fd20e53b3b4b2a22bf0/userland/cpp/copyfmt.cpp).

编译并运行：

```
g++ -ggdb3 -O0 -std=c++11 -Wall -Wextra -pedantic -o main.out main.cpp
./main.out 
```

输出：

```
default
3.14159
2.71828

modified
3.14e+00
2.72e+00

restored
3.14159
2.71828 
```

在 Ubuntu 19.04、GCC 8.3.0 上测试。

**使用 C++20`std::format`而`{:.2}`不是`std::setprecision`**

最后，一旦您可以使用它，这将是最佳选择：

```
#include <format>
#include <string>

int main() {
    std::cout << std::format("{:.2} {:.3}\n", 3.1415, 3.1415);
} 
```

预期输出：

```
3.14 3.145 
```

因此，这将完全克服修改`std::cout`状态的疯狂。

也可以看看：

*   [如何使用 cout 以全精度打印双精度值？](https://stackoverflow.com/questions/554063/how-do-i-print-a-double-value-with-full-precision-using-cout/65266570#65266570)
*   [std::string 格式化，如 sprintf](https://stackoverflow.com/questions/2342162/stdstring-formatting-like-sprintf/57286312#57286312)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-24T07:11:14.947

您需要跟踪当前的精度，然后在使用所需的修改精度完成操作后重置回相同的精度。为此，您可以使用**[std::ios_base::precision](http://www.cplusplus.com/reference/iostream/ios_base/precision/)**：

```
streamsize precision ( ) const;
streamsize precision ( streamsize prec ); 
```

第一个语法返回流的当前浮点精度字段的值。
第二种语法也将它设置为一个新值。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-24T07:12:48.263

setprecision() 只能用于输出操作，不能用于比较

要比较浮点数 a 和 b ，您必须像这样明确地进行：

```
 if( abs(a-b) < 1e-6) {   
  }
  else {
  } 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-05-26T02:35:37.790

您可以使用`cout << setprecision(-1)`

# xcode - Xcode 注释自动补全（appledoc 风格）

> ID：12560292
> 
> 赞同：5
> 
> 时间：2012-09-24T07:04:01.613
> 
> 标签：xcode

我发现记录我的界面特别痛苦，因为我需要自己输入所有内容。所以我想我一定不是唯一这样的人，并开始寻找一种方法来减轻我的痛苦，但没有找到太多。

我的问题是，有没有捷径或方法让 Xcode 自动完成我的评论？例如，我非常希望我输入`/** + [tab]`它会自动完成：

```
/**
 * [cursor here]
 * 
 * (maybe some pre-populate a list of arguments for the method below)
 */
- (void)test:(NSString *)testString another:(NSString *)another; 
```

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-24T07:18:24.900

使用 Xcode 的片段功能。您可以使用您想要的任何文本创建一个片段，并在要填充的文本中添加项目。要创建一个片段，只需在 Xcode 编辑器中选择一些文本并将其拖到片段库中。您可以设置完成快捷方式，因此`m-comment`可能是您的标准方法注释：

![片段编辑器](../Images/31e9019038350afa62122b015597a940.png)

键入 then 的第一位`m-comment`显示整个快捷方式（以及任何其他补全），并接受补全会添加一个注释，其中包含等待填写的参数化部分。像往常一样，您可以从一个选项卡到下一个选项卡：

![插入评论](../Images/3137f6fa47fe67b73ba157a939e7ae30.png)

`<#`您通过将文本的给定部分用和括起来来指示文本的给定部分是要填写的字段`#>`，例如：`<#method name#>`。

当然，Objective-C 的优势之一是方法名称通常会告诉您参数是什么。在评论中重复这一点似乎是不必要的额外工作。Xcode 3 更好地支持脚本，包括自动生成带有参数的 HeaderDoc 注释的脚本。不过，它们并没有被广泛使用，可能是因为这些评论并不是真的有用。

# c# - 如何创建与 GridView 的列一样多的 HTML div 标签？

> ID：12560298
> 
> 赞同：0
> 
> 时间：2012-09-24T07:04:28.593
> 
> 标签：c#, html

我有一个包含许多列的网格视图。我想知道如何创建`<div>`与 gridView 中的数据一样多的标签。

gridView 数据来自 sql 数据库。

我想显示与产品评论相对应的数据。它几乎就像许多网页都有的评论区。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T09:17:48.317

你可能想改变你所有`BoundField`的`TemplateField`

```
<asp:GridView runat="server" ID="gvProducts">
<Columns>
   <asp:TemplateFied HeaderText="ProductName">
       <div><%# Eval("ProductName")</div>

       <div class="CommentArea"> Some text here </div>
   </asp:TemplateField>

   <asp:TemplateFied HeaderText="Column2">
       <div><%# Eval("Column2Data")</div>

       <div class="CommentArea"> Some text here </div>
   </asp:TemplateField>

   <asp:TemplateFied HeaderText="Column3">
       <div><%# Eval("Column3Data")</div>

       <div class="CommentArea"> Some text here </div>
   </asp:TemplateField>

   ...

</Columns>
</asp:GridView> 
```

# objective-c - Objective-Zip ARC

> ID：12560306
> 
> 赞同：1
> 
> 时间：2012-09-24T07:05:05.717
> 
> 标签：objective-c, ios, zip

Objective c 的新手，喜欢使用 Objective-zip 框架来解压和压缩文件。

[https://code.google.com/p/objective-zip/](https://code.google.com/p/objective-zip/)

显然，当我用 arc 编译它时，它给了我很多警告。所以我为objective-zip文件夹中的所有文件设置了no arc标志（现在编译得很好，没有警告）。

我的问题是，由于 tarball 中的示例使用手动内存管理，我是否应该更改任何文件以将其与 ARC（objective-zip 类文件）一起使用？

或者这就是我所做的一切？

[从文档目录中的文件夹创建 ZIP 文件 - Objective C (ARC)](https://stackoverflow.com/questions/11649468/creating-a-zip-file-from-a-folder-in-documents-directory-objective-c-arc)

我也希望有人就如何处理这些事情提供一般指导。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T00:19:23.597

我最终在 xcode 中使用了 arc 转换器，效果很好！

谢谢赞清！

```
 IMHO, dup to http://stackoverflow.com/questions/12171922/switching-the-non-arc-project-into-arc

    ~ZhangChn 
    Sep 24 at 7:28
    (on stack overflow) 
```

# json - 带有弹簧 MVC 的 Json

> ID：12560309
> 
> 赞同：0
> 
> 时间：2012-09-24T07:05:34.540
> 
> 标签：json, spring, spring-mvc

我在使用 JSON 的 Spring MVC 中遇到问题我试图从我的控制器返回一个数组列表，但我无法返回它

```
function getCategory() {
    alert("Test"); 
    $.getJSON("getCategoryList.do", { message: "Test Message" }, function(value) {
        alert(value[1]);
        alert("inside Json"); 
        alert(JSON.stringify(value));;
        for(var i=0;i<value.length;i++){

        }

    });

} 
```

我检查在我的控制器中打印消息它的工作，但是当我尝试在我的 jsp 页面中设置值时，我无法确定控制器代码是

```
@RequestMapping(value="admin/getCategoryList", method=RequestMethod.GET)public  @ResponseBody ArrayList<String> receiveCategoryList(@RequestParam String message) {
        ArrayList<String> arrayList = new ArrayList<String>();
        arrayList.add(name);
        arrayList.add("success");
        System.out.println("Inside Method");
        System.out.println(name);
        return arrayList;
    } 
```

任何人都可以帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-16T06:29:34.967

To return json data from spring you need to include jackson jars in your pom and than you have to just declare

@Responsebody in your method where you returning json data That its , you can than directly use that object in your view ,

I tried it with Angular Its working .

```
@RequestMapping(value="/getTeamManager",method=RequestMethod.GET) 
```

public @ResponseBody List getEmployees (Model model){

```
Employee employee1 =new Employee ();
employee1.setName("Himanshu");
employee1.setState("Haryana ");
employee1.setCountry("India ");

Employee employee2 =new Employee ();
employee2.setName("Vijay");
employee2.setState("Haryana ");
employee2.setCountry("India ");

Employee employee3 =new Employee ();
employee3.setName("Himanshu");
employee3.setState("Haryana ");
employee3.setCountry("India ");

List<Employee> employeeList =new ArrayList<Employee>();

employeeList.add(employee1);
employeeList.add(employee2);
employeeList.add(employee3);

return employeeList; 
```

}

# actionscript-3 - AS3：大量定时器滞后闪烁

> ID：12560312
> 
> 赞同：0
> 
> 时间：2012-09-24T07:05:59.407
> 
> 标签：actionscript-3, flash, optimization, actionscript, timer

我有大量对象（472）需要一个计时器来检查变量状态变化之间需要多长时间。下面的代码是我到目前为止所拥有的，但是运行的许多计时器肯定会影响应用程序的性能，是否有更好的优化方法来衡量这一点？

```
import flash.utils.Timer;

var active_:Boolean;
var matched:Boolean;
var vacated:Boolean;

var circ:Shape=new Shape();
this.addChild(circ);
circ.x = 0;
circ.y = 0;
var circRad:Number = 5;
var mat= new Matrix();
var busyColors = [0xFFFF00,0xFFCC00];
var idleColors = [0xCCCCCC,0x000000];
var matchedColors = [0x0099FF,0x0066FF];
var vacatedColors = [0xFF0000,0x990000];
var busyAlphas = [1,1];
var idleAlphas = [0.5,0.5];
var ratios = [0,255];
var prev:int = 0;
var time:Timer = new Timer(1000,0);
//time.start();
mat.createGradientBox(2*circRad,2*circRad,0,-circRad,-circRad);
circ.graphics.lineStyle();
if (active_ == false)
{
    if (prev != 0)
    {
        setAverage(prev,false);
        prev = 0;
    }
    circ.graphics.clear();
    circ.graphics.beginGradientFill(GradientType.RADIAL,idleColors,idleAlphas,ratios,mat);
    circ.graphics.drawCircle(0,0,circRad);
    circ.graphics.endFill();
}
else if (active_ == true && matched == true)
{
    if (prev != 1)
    {
        setAverage(prev,true);
        prev = 1;
    }
    circ.graphics.clear();
    circ.graphics.beginGradientFill(GradientType.RADIAL,matchedColors,busyAlphas,ratios,mat);
    circ.graphics.drawCircle(0,0,circRad);
    circ.graphics.endFill();
}
else if (active_ == true && vacated == false && matched == false)
{
    if (prev != 2)
    {
        setAverage(prev,true);
        prev = 2;
    }
    circ.graphics.clear();
    circ.graphics.beginGradientFill(GradientType.RADIAL,busyColors,busyAlphas,ratios,mat);
    circ.graphics.drawCircle(0,0,circRad);
    circ.graphics.endFill();
}
else if (active_ == true && vacated == true)
{
    if (prev != 3)
    {
        setAverage(prev,true);
        prev = 3;
    }
    circ.graphics.clear();
    circ.graphics.beginGradientFill(GradientType.RADIAL,vacatedColors,busyAlphas,ratios,mat);
    circ.graphics.drawCircle(0,0,circRad);
    circ.graphics.endFill();
}

function setAverage(i:int, a:Boolean)
{
    time.stop();
    switch (i)
    {
        case 0 :
            break;

        case 1 :
            MovieClip(root).avgMat.push(uint(time.currentCount));
            break;

        case 2 :
            MovieClip(root).avgBusy.push(uint(time.currentCount));
            break;

        case 3 :
            MovieClip(root).avgVac.push(uint(time.currentCount));
            break;
    }
    if(a == true){
        //time.reset();
        //time.start();
    }   
} 
```

注释掉由于问题而启动的计时器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T07:33:31.820

您可以在您的对象上创建像“tick()”这样的公共函数，并从外部的 1 个通用计时器循环调用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T09:17:23.073

考虑执行以下操作：

在顶部，导入 getTimer

```
import flash.utils.Timer; 
```

创建一个包含开始时间的变量（而不是执行 timer.start），执行以下操作：

```
var timerStart : int = getTimer(); 
```

而不是这样做： time.currentCount

只需这样做：

```
(getTimer() - timerStart) / 1000 
```

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T22:37:58.353

您可以使用 EVENT FRAME 类型的 addEventListener 更改所有计时器

```
var counter:Number = 0;
addEventListener(Event.ENTER_FRAME, counting);
function counting (e:Event):void
{
     counter++
} 
```

所以计数器会在每一帧上递增。现在你必须找到fps。现在将 fps 乘以您希望计时器运行的时间。所以它应该是这样的：

```
var counter:Number = 0;
addEventListener(Event.ENTER_FRAME, counting);
function counting (e:Event):void
{
     counter++
     if(counter == 60) //60 fps means this line will run after 1 sec.
     {
          //do something
     }
     If(counter == 120) //60 fps; 2 sec
     {
          //do something
     }
} 
```

这种方法更准确，系统不会那么过载。当您在动画开始后需要延迟时，这可以特别帮助您使用 addChild 设置舞台。

您可以制作更多的“计时器”，但这取决于游戏的需求，但我确信它会比数百个计时器更快地工作。

# c# - 使用 SqlTransaction 和 IsolationLevel 进行冗长的读取操作？

> ID：12560321
> 
> 赞同：8
> 
> 时间：2012-09-24T07:06:20.363
> 
> 标签：c#, sql-server, ado.net, transactions, isolation-level

作为报告模块的一部分，我正在执行几个长时间运行的 SQL 查询。这些查询是在运行时动态构建的。根据用户的输入，它们可能是单语句或多语句，具有一个或多个参数并在一个或多个数据库表上进行操作——换句话说，它们的形式不能轻易预料。

目前，我只是在普通`SqlConnection`的 IE上执行这些语句

```
using (SqlConnection cn = new SqlConnection(ConnectionString)) {
    cn.Open();
    // command 1
    // command 2
    // ...
    // command N
} 
```

因为这些查询（实际上是批量查询）可能需要一段时间才能执行，所以我担心表上的锁会阻碍其他用户的读/写。如果这些报告的数据在批处理执行期间发生变化，这不是问题；报表查询不应优先于这些表上的其他操作，也不应锁定它们。

对于大多数涉及修改数据的长时间运行/多语句操作，我会使用事务。此处的区别在于这些报表查询不会修改任何数据。`SqlTransaction`为了控制它们的隔离级别，我是否正确包装这些报告查询？

IE：

```
using (SqlConnection cn = new SqlConnection(ConnectionString)) {
    cn.Open();

    using (SqlTransaction tr = cn.BeginTransaction(IsolationLevel.ReadUncommitted)) {
        // command 1
        // command 2
        // ...
        // command N

        tr.Commit();
    }
} 
```

这会达到我想要的结果吗？即使没有修改任何数据，提交事务是否正确？还有另一种方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T07:13:31.200

另一种方法可能是针对连接发出：

```
SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED; 
```

它实现了相同的意图，而不会弄乱事务。或者，您可以`WITH(NOLOCK)`在查询中使用表上的提示，其优点是根本不更改连接。

重要的是，请注意（不寻常地）：***无论***它被更改（事务、事务范围、显式`SET`等），在从池中获取同一底层连接时，隔离级别***不会在使用之间重置。***这意味着如果您的代码更改了隔离级别（直接或间接），那么**您的代码都不**知道新连接的隔离级别是什么：

```
using(var conn = new SqlConnection(connectionString)) {
    conn.Open();
    // isolation level here could be **ANYTHING**; it could be the default
    // if it is a brand new connection, or could be whatever the last
    // connection was when it finished
} 
```

这使得`WITH(NOLOCK)`相当诱人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T07:20:01.617

我同意 Marc 的观点，但您也可以在受影响的表上使用 NOLOCK 查询提示。这将使您能够按表级别在表上控制它。

在不使用共享锁的情况下运行任何查询的问题在于，您让自己对“非确定性”结果持开放态度，并且不应根据这些数据做出业务决策。

更好的方法可能是调查 SNAPSHOT 或 READ_COMMITED_SNAPSHOT 隔离级别。这些为您提供了针对事务异常的保护，而无需锁定。权衡是它们增加了针对 TempDB 的 IO。这些级别中的任何一个都可以应用于 Marc 建议的会话或我建议的表格。

希望这可以帮助

# postgresql - Rails：将开发环境从 windows(mingw32) 迁移到 OS X 山狮

> ID：12560333
> 
> 赞同：0
> 
> 时间：2012-09-24T07:07:11.300
> 
> 标签：postgresql, ruby-on-rails-3.2, osx-mountain-lion, rmagick, gemfile

我有一个 rails 3.2.3 应用程序，我正在我的 windows 机器上使用 git_bash 作为 cli 和 mingw32 作为环境（使用 railsinstaller 安装这个环境）和 postgres 作为 db。但是 rmagick 存在一些问题并且无法使用它，尽管 minimagick 可以按预期工作。

现在，我要将应用程序移动到运行 OS X 山狮的新 mac 机器上。我已经使用 rvm 在 OS X 上安装了 rails 3.2.8 和 ruby​​。我需要做什么才能将我的应用程序更新到 rails 3.2.8 并设置 db 和其他 gem，我应该删除还是不删除 gemfile.lock 以及我需要删除或添加或更改版本号的 gem。等等

我是rails新手，请帮忙

谢谢！

我应该使用自制软件安装 postgres 还是从[http://www.postgresql.org/download/macosx/](http://www.postgresql.org/download/macosx/)下载， 这是安装 postgres 的首选方式，这些方法的优缺点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T07:18:41.740

只要您的应用程序中没有任何 Windows/机器特定的代码，您只需要做`bundle install`.

关于 Postgres，你从哪里得到它并不重要，只要它在你的`$PATH`. 如果您已经在使用 Homebrew，那么只需执行`brew install postgres`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T06:49:28.763

`Gemfile.lock`给出一个 gem 列表，用于确保应用程序的所有副本使用相同的 gem 版本。

因为我是唯一一个在这个应用程序上工作的人，它还没有投入生产。所以，对我来说，核对 Gemfile.lock 并指定我现在想要的 gem 的更新版本更有意义。

**我做过的事情**

在清理了我的 tmp/ 目录中的一些数据后，从我的 Windows 机器上复制了我的应用程序目录（tmp/ 目录有 100M 的数据）。

安装`imagemagick`使用`brew install imagemagick`

安装`postgresql`使用`brew install postgresql`

`rails new blog -d postgresql` 根据 postgresql使用 Changed database.yml 文件生成了一个示例应用程序，因为它要求我的 mac 用户是用户名。运行示例博客应用程序，它运行良好。创建了一个脚手架并输入了数据，一切正常。

从博客应用程序复制**Gemfile.lock**的内容并粘贴到我的应用程序的 Gemfile.lock

*将我的 Gemfile*中的 rails 版本从 3.2.3 更改为最新版本 3.2.8。*更改了其他一些 gems 的版本。将 'minimagick' 替换为 'rmagick'。（我在 Windows 上安装 rmagick gem 时遇到问题，minimagick gem 以某种方式在具有旧版本 imagemagick 的 Windows 上工作）。更改了 database.yml。*

 *运行`rake db:create:all`以创建所有数据库。

跑`rake db:migrate`

运行`bundle`并安装所有依赖项。

跑`rails s`

现在一切正常:)*

# php - php继续用换行符写入文件

> ID：12560334
> 
> 赞同：-3
> 
> 时间：2012-09-24T07:07:13.580
> 
> 标签：php, file

每次将数据写入文本文件后，如何换行？

该文件是在无换行符中显示记录：

> countryId:20, productId:332, status:1, opId:188, xId:pdgje9876, countryId:20, productId:334, status:0, opId:188, xId:pfgje3455,

这是我需要的输出：

> countryId:20, productId:332, status:1, opId:188, xId:pdgje9876,
> 
> countryId:20, productId:334, status:0, opId:188, xId:pfgje3455,

```
$txt = "log.txt";
$fh = fopen($txt, 'a') or die("can't open file");

foreach($obj as $key => $value) {
    print "$key => $value<br>";

    $stringData = $key.":".$value.", ";
    fwrite($fh, $stringData);

}
fclose($fh); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T07:11:17.233

`"\n"`在每一行末尾添加。

```
$txt = "log.txt";
$fh = fopen($txt, 'a') or die("can't open file");

foreach ($objects as $obj) {
  foreach($obj as $key => $value) {
    print "$key => $value<br>";

    $stringData = $key.":".$value.", ";
    fwrite($fh, $stringData);
  }
  fwrite($fh, "\n");
}
fclose($fh); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T07:11:54.103

您可能希望在行尾添加“\n”。

```
$txt = "log.txt";
$fh = fopen($txt, 'a') or die("can't open file");

foreach($obj as $key => $value) {
    print "$key => $value<br>";
    if ($key == "xld") {
        $stringData = $key.":".$value.",\n"; // Will add new line after xld key
    } else {
        $stringData = $key.":".$value.", ";
    }
    fwrite($fh, $stringData);

}
fclose($fh); 
```

# python - 通过计算变换计算元素位置

> ID：12560339
> 
> 赞同：3
> 
> 时间：2012-09-24T07:07:27.087
> 
> 标签：python, opencv, transformation

这个问题与[两组点之间的转换](https://stackoverflow.com/questions/11687281/transformation-between-two-set-of-points)有关。但是，这是更好地指定，并添加了一些假设。

我有元素图像和一些模型。

我在两者上都检测到了轮廓

```
contoursModel0, hierarchyModel = cv2.findContours(model.copy(), cv2.RETR_LIST,   
                                                  cv2.CHAIN_APPROX_SIMPLE);
contoursModel = [cv2.approxPolyDP(cnt, 2, True) for cnt in contoursModel0];    
contours0, hierarchy = cv2.findContours(canny.copy(), cv2.RETR_LIST,  
                                        cv2.CHAIN_APPROX_SIMPLE);
contours = [cv2.approxPolyDP(cnt, 2, True) for cnt in contours0]; 
```

然后我将每个轮廓相互匹配

```
modelMassCenters = [];
imageMassCenters = [];
for cnt in contours:
for cntModel in contoursModel:
    result = cv2.matchShapes(cnt, cntModel, cv2.cv.CV_CONTOURS_MATCH_I1, 0);
    if(result != 0):
        if(result < 0.05):
           #Here are matched contours
           momentsModel = cv2.moments(cntModel);
           momentsImage = cv2.moments(cnt);
           massCenterModel = (momentsModel['m10']/momentsModel['m00'],  
                              momentsModel['m01']/momentsModel['m00']); 
           massCenterImage = (momentsImage['m10']/momentsImage['m00'], 
                              momentsImage['m01']/momentsImage['m00']); 
           modelMassCenters.append(massCenterModel);
           imageMassCenters.append(massCenterImage); 
```

匹配的轮廓类似于特征。

现在我想检测这两组点之间的转换。假设：单元为刚体，只有旋转、位移和尺度变化。

某些特征可能会被漏检，如何消除它们。我曾经使用过`cv2.findHomography`，它需要两个向量并计算它们之间的单应性，即使有一些未匹配。

`cv2.getAffineTransformation`只需要三分（无法应对不匹配），这里我有多个功能。我在上一个问题中的回答说如何计算这种转换，但不会出现不匹配。另外我认为可以从算法中返回一些质量水平（通过检查有多少点不匹配，在从其余部分计算一些转换之后）

最后一个问题：我应该采用所有矢量点来计算变换还是只将这种形状的质心视为特征？

为了展示它，我添加了简单的图像。带有绿色的特征是红色坏匹配中的好匹配。此处的匹配应根据 3 个绿色特征计算，红色不匹配应影响匹配质量。

![在此处输入图像描述](../Images/2c1a48cb31f01694d476b09d4c83e9b3.png)

我正在添加我现在想出的解决方案片段（但我认为它可以做得更好）：

```
for i in range(0, len(modelMassCenters) - 1):
for j in range(i + 1, len(modelMassCenters) - 1  ):
    x1, y1 = modelMassCenters[i];
    x2, y2 = modelMassCenters [j];
    modelVec = (x2 - x1, y2 - y1);
    x1, y1 = imageMassCenters[i];
    x2, y2 = imageMassCenters[j];
    imageVec = (x2 - x1, y2 - y1);
    rotation = angle(modelVec,imageVec);
    rotations.append((i, j, rotation)); 
    scale = length(modelVec)/length(imageVec);
    scales.append((i, j,  scale)); 
```

在计算每对对应线给出的比例和旋转之后，我将找到旋转的中值和平均值，它们与中值的差异不超过一些增量。规模也一样。然后，将这些值用于计算的点将用于计算位移。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T21:16:35.280

如果特征具有相似的形状，您的第二步（通过成对的形状比较将轮廓相互匹配）听起来很容易出错，例如，您有几个相似大小的圆形轮廓。然而，如果您有一个仅在一个象限中具有 5 个圆形特征的刚体，那么如果您将刚体及其特征视为一个整体，您可以获得对仿射变换的非常稳健的估计。所以在匹配特征的时候，不要从整个身体的中心丢弃特征的范围和方向等信息。这些在关联特征方面至少与单个轮廓的大小和形状一样重要。

我会尝试类似（未经测试的伪代码）：

```
"""
Convert from rectangular (x,y) to polar (r,w)
    r = sqrt(x^2 + y^2)
    w = arctan(y/x) = [-\pi,\pi]
"""
def polar(x, y):        # w in radians
    from math import hypot, atan2, pi
    return hypot(x, y), atan2(y, x)

model_features = []
model = params(model_body_contour)    # return tuple (center_x, center_y, area)
for contour in model_feature_contours:
    f = params(countour)
    range, angle = polar(f[0]-model[0], f[1]-model[1])
    model_features.append((angle, range, f[2]))

image_features = []
image = params(image_body_contour)
for contour in image_feature_contours:
    f = params(countour)
    range, angle = polar(f[0]-image[0], f[1]-image[1])
    image_features.append((angle, range, f[2]))

# sort image_features and model_features by angle, range
#
# correlate image_features against model_features across angle offsets
#    rotation = angle offset of max correlation
#    scale = average(model areas and ranges) / average(image areas and ranges) 
```

如果您有非常具有挑战性的图像，例如由 6 个等距大小相似的特征组成的环，其中 5 个具有相同的形状和一个不同的特征（例如 5 个圆形和一个星形），您可以添加额外的参数，例如偏心率和锐度到特征参数列表，并在搜索旋转角度时将它们包含在相关性中。

# php - 如何存储动态生成的输入值和选择字段

> ID：12560340
> 
> 赞同：0
> 
> 时间：2012-09-24T07:07:27.607
> 
> 标签：php, jquery, html, dom

我正在创建一个页面，用户可以通过单击 addrow 和 delrow 按钮添加或删除行，它工作正常。现在的问题是我想使用 post 方法存储动态生成的字段的值。`这里是代码.. function addRow(tableID) {

```
 var table = document.getElementById(tableID);
        //var cargo_id = new Array();
        //var quantity_id = new Array();
        var rowCount = table.rows.length;
        var row = table.insertRow(rowCount);

        //var i = <?php// echo $index; ?>;
        //var name = "cargo_quantity" + i;

        var cell1 = row.insertCell(0);
        var element1 = document.createElement("input");
        element1.type = "checkbox";
        cell1.appendChild(element1);

        var cell2 = row.insertCell(1);
        cell2.innerHTML = rowCount++;

        var nameCount = rowCount-1;

        //quantity cell
        var cell3 = row.insertCell(2);
        var element3 = document.createElement("input");
        element3.type = "text";

        element3.name = "cargo_quantity"+nameCount;
        element3.id =  "cargo_quantity"+nameCount;

        //element3.setAttribute("value","");
        //element3.value = "<?//=(isset($row->cargo_quantity))?$row->cargo_quantity:''?>"
        cell3.appendChild(element3);

        //cargo type cell
        var cell4 = row.insertCell(3);
        var element4 = document.createElement("select");//name="cargo_type_id" id="cargo_type_id" field="List Cargo Type" class="border" style="width:150px;" >
       //name = "cargo_id" + i;
        element4.name = "cargo_id" + nameCount;
        element4.id = "cargo_id" + nameCount;
        element4.field = "List Cargo Type";

        element4.className = "border";

        //first option
        //create an option
        theOption=document.createElement("OPTION");
        //make some text
        theText=document.createTextNode("Cargo Type");
        //add the text to the option
        theOption.appendChild(theText);
        //add the option to the select
        element4.appendChild(theOption);
        theOption.setAttribute("selected","selected");

        <?php 
                      $pquery_pCargoType = "SELECT * FROM ".DB_PRE."tbl_cargo_type WHERE status='1' ";
                      $errNo_pCargoType = $con->DML_executeQry($pquery_pCargoType);
                      while($row_pCargoType = mysql_fetch_object($errNo_pCargoType)){
         ?>

          <option <?php if(isset($row->cargo_type_id) && $row->cargo_type_id==$row_pCargoType->cargo_type_id){?> selected="selected"<?php }?> value=""></option>

        //create an option
        theOption=document.createElement("OPTION");
        //make some text
        theText=document.createTextNode("<?php echo $row_pCargoType->name;?>");
        //add the text to the option
        theOption.appendChild(theText);
        //add the option to the select
        element4.appendChild(theOption);
        <?php if(isset($row->cargo_type_id) && $row->cargo_type_id==$row_pCargoType->cargo_type_id){?>
        theOption.setAttribute("selected","selected");
        <?php }?>

        theOption.setAttribute("value","<?php echo $row_pCargoType->cargo_type_id;?>");<?php } ?>

        //weight cell
        cell4.appendChild(element4);

        var cell5 = row.insertCell(4);
        var element5 = document.createElement("input");
        element5.type = "text";
        //name = "cargo_weight" + i;
        element5.name = "cargo_weight" + nameCount;
        element5.id = "cargo_weight" + nameCount;
        cell5.appendChild(element5);

        //Volume cell
        var cell6 = row.insertCell(5);
        var element6 = document.createElement("input");
        element6.type = "text";
        //name =  + i;
        element6.name = "cargo_volume" + nameCount;
        element6.id = "cargo_volume" + nameCount;
        cell6.appendChild(element6);         

    } 

    function deleteRow(tableID) {
        try {
        var table = document.getElementById(tableID);
        var rowCount = table.rows.length;

        for(var i=0; i<rowCount; i++) {
            var row = table.rows[i];
            var chkbox = row.cells[0].childNodes[0];
            if(null != chkbox && true == chkbox.checked) {
                table.deleteRow(i);
                rowCount--;
                i--;
            }

        }
        }catch(e) {
            alert(e);
        }
    } 
```

`

```
<form method ="post">
<table id ="dataTable"  border="1">

                        <tr>
                        <td>Select </td>
                        <td>Sr.No.</td>
                        <td>Quantity</td>
                        <td>Type</td>
                        <td>Weight (KG per container)</td>
                        <td>Volume (cbm)</td>            
                        </tr>

                        <tr>
                        <td><input type="checkbox" name = "chk"</td>
                        <td>1</td>
                        <td><input type="text" field="Cargo Quantity" name="cargo_quantity1" id="cargo_quantity1" value="<?=(isset($row->cargo_quantity))?$row->cargo_quantity:''?>" style="width:150px;" class="border" /></td>

                        <td><select name="cargo_type_id" id="cargo_type_id" field="List Cargo Type" class="border" style="width:150px;" >
                        <option selected="selected" value="">Cargo Type</option>
                        <?php 
                          $pquery_pCargoType = "SELECT * FROM ".DB_PRE."tbl_cargo_type WHERE status='1' ";
                          $errNo_pCargoType = $con->DML_executeQry($pquery_pCargoType);
                          while($row_pCargoType = mysql_fetch_object($errNo_pCargoType)){
                        ?>

                        <option <?php if(isset($row->cargo_type_id) && $row->cargo_type_id==$row_pCargoType->cargo_type_id){?> selected="selected"<?php }?> value="<?php echo $row_pCargoType->cargo_type_id;?>"><?php echo $row_pCargoType->name;?></option>

                        <?php }?>
                        </select></td>
                        <td><input type="text" field="Cargo Weight" name="cargo_weight1" id="cargo_weight1" value="<?=(isset($row->cargo_weight))?$row->cargo_weight:''?>" style="width:150px;" class="border" /></td>

                  <td><input type="text" field="Cargo Volume" name="cargo_volume1" id="cargo_volume1" value="<?=(isset($row->cargo_volume))?$row->cargo_volume:''?>" style="width:150px;" class="border" /></td>            
                        </tr>
   </table>

</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T07:10:15.900

您可以根据您的 fieldName 将值存储在 json 中，并且您可以通过迭代到 json 再次将值带回 ypur 字段

# c# - 如何在 .NET C# 中取消长时间运行的 Amazon Glacier 文件上传操作

> ID：12560345
> 
> 赞同：3
> 
> 时间：2012-09-24T07:08:01.550
> 
> 标签：c#, asynchronous, task-parallel-library, .net-4.5, amazon-glacier

我是亚马逊 AWS 和 Glacier 的新手。我正在尝试编写一个基于 WPF Windows 的 C# 客户端，它将我的存档备份数据上传到冰川云。但是，API 参考似乎没有提供取消命令。只能上传、下载、列出。

我想要做的是使用 TPL 异步运行每个上传操作（对于大文件可能需要 1 小时或更长时间）。但是我希望上传是可取消的，.NET 4.5 会很好地支持，但 Amazon API 不支持。

有没有办法做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T06:51:22.243

[在Amazon Glacier](http://aws.amazon.com/glacier/)（以及[Amazon S3](http://aws.amazon.com/s3/)以及顺便说一句）中处理您的场景的推荐方法是通过*Multipart Upload 分段**上传档案*，请参阅[在 Amazon Glacier 中上传档案](http://docs.amazonwebservices.com/amazonglacier/latest/dev/uploading-an-archive.html)：

 *> 根据您上传的数据大小，Amazon Glacier 提供以下选项：
> 
> *   **分批上传大型档案（分段上传）** — 在一次操作中，您可以上传 1 字节到最大 4 GB 大小的档案。**但是，我们鼓励 Amazon Glacier 客户使用分段上传来上传大于 100 MB 的档案。**[...] *[强调我的]*
>     
>     
> *   **分段上传档案**— 使用分段上传 API，您可以上传大型档案，最大约为 40,000 GB (10,000 * 4 GB)。

[分部分上传大型档案（分段上传）](http://docs.amazonwebservices.com/amazonglacier/latest/dev/uploading-archive-mpu.html)提供了后者的详细信息，特别是关于**完整（或中止）分段上传**：

> 上传所有存档部分后，您可以使用完整的操作。[...]
> 
> 如果您中止分段上传，则无法使用该分段上传 ID 上传更多分段。与中止的分段上传相关的任何部分消耗的所有存储空间都将被释放。**如果任何部分上传正在进行中，即使在您中止之后，它们仍然可以成功或失败。** *[强调我的]*

因此，您仍然无法中止正在进行的部分的上传，因此所需的用户体验和/或减少网络带宽的关键是选择足够小的部分大小。

根据您的用例，您可能还想查看[List Multipart Uploads (GET multipart-uploads)](http://docs.amazonwebservices.com/amazonglacier/latest/dev/api-multipart-list-uploads.html)：

> 此分段上传操作列出指定保管库的正在进行的分段上传。正在进行的分段上传是由[发起分段上传 (POST multipart-uploads)](http://docs.amazonwebservices.com/amazonglacier/latest/dev/api-multipart-initiate-upload.html)请求启动但尚未完成或中止的分段上传。[...]*

# android - Android：wifiManager.isWifiEnabled() 返回 TRUE 但 WiFi 被禁用

> ID：12560348
> 
> 赞同：1
> 
> 时间：2012-09-24T07:08:40.407
> 
> 标签：android, wifi

在这里，一台装有 Android 4.0 的平板电脑。

```
wifiManager.isWifiEnabled() 
```

返回`true`，但如果我查看 Android 默认 Wifi 设置，Wifi 仍处于关闭状态...

如何在不使用的情况下检查 WiFi 是否打开`isWifiEnabled()`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T07:13:51.670

您可以尝试使用`getWifiState()`
获取 Wi-Fi 启用状态。
返回：, , , ,
之一`WIFI_STATE_DISABLED``WIFI_STATE_DISABLING``WIFI_STATE_ENABLED``WIFI_STATE_ENABLING``WIFI_STATE_UNKNOWN`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T07:12:57.067

试试下面的代码。

```
SupplicantState supState; 
wifiManager = (WifiManager) getSystemService(Context.WIFI_SERVICE);
WifiInfo wifiInfo = wifiManager.getConnectionInfo();
supState = wifiInfo.getSupplicantState(); 
```

**在您调用 getSupplicantState(); 时将返回其中一种状态；**

```
ASSOCIATED - Association completed.

ASSOCIATING - Trying to associate with an access point.

COMPLETED - All authentication completed.

DISCONNECTED - This state indicates that client is not associated, but is likely to start looking for an access point.

DORMANT - An Android-added state that is reported when a client issues an explicit DISCONNECT command.

FOUR_WAY_HANDSHAKE - WPA 4-Way Key Handshake in progress.

GROUP_HANDSHAKE - WPA Group Key Handshake in progress.

INACTIVE - Inactive state.

INVALID - A pseudo-state that should normally never be seen. SCANNING - Scanning for a network.

UNINITIALIZED - No connection. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-16T13:02:36.147

您可以使用 Settings.Global.WIFI_ON

```
public boolean isWiFiSettingOn() {
        boolean isOn = false;
        try {
            isOn = Settings.Global.getInt(mContentResolver, Settings.Global.WIFI_ON) != 0;
        } catch (Settings.SettingNotFoundException e) {
            e.printStackTrace();
            // This should never happen
            Log.e(TAG, "Couldn't retrieve status of Settings.Global.WIFI_ON - returning the default value FALSE")`enter code here`;
        }

        Log.d(TAG, "isWiFiSettingOn? - " + isOn);
        return isOn;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-31T19:03:16.783

您还必须在 AndroidManifest.xml 中检查您是否拥有该权限

```
 <uses-permission android:name="android.permission.ACCESS_WIFI_STATE" /> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T07:16:39.420

```
 ConnectivityManager cm =    (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);  
    NetworkInfo netInfo = cm.getActiveNetworkInfo(); 
    State wifi = cm.getNetworkInfo(ConnectivityManager.TYPE_WIFI).getState(); 
```

并检查 wifi.states....

# jquery - 上传错误 8070000c。仅在 IE 浏览器中

> ID：12560350
> 
> 赞同：4
> 
> 时间：2012-09-24T07:08:48.563
> 
> 标签：jquery, internet-explorer, uploadify

使用 jQuery uploadify 时，出现错误：

```
SCRIPT16389: Could not complete the operation due to error 8070000c.
jquery.uploadify.v2.1.4.js, line 292 character 5 
```

从第二次尝试开始。这只发生在 IE 浏览器上。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T13:39:16.393

根据此处找到的[另一个答案](https://stackoverflow.com/a/12060034/855738)，在 StackOverflow 上，这似乎是一个导致[undefined expando property](http://msdn.microsoft.com/en-us/library/ie/gg622931)[的 jQuery 错误](http://bugs.jquery.com/ticket/8485)。您可以在先前链接的站点以及解决方案上找到更多信息。

它也可能[与 Flash 有关](https://github.com/moxiecode/plupload/issues/323#issuecomment-2424012)，据我了解，jQuery uploadify 也使用它作为 HTML5 的替代品。

[为了将来参考，在这种情况下，我会在Google](https://www.google.com/search?client=opera&rls=en&q=Could%20not%20complete%20the%20operation%20due%20to%20error%208070000c&sourceid=opera&ie=utf-8&oe=utf-8&channel=suggest)或[StackOverflow](https://stackoverflow.com/search?q=8070000c&submit=search)上搜索错误代码（在本例中*为 8070000c*）或错误消息的简短描述（例如*，由于错误 8070000c 无法完成操作*），通常我总能找到一些相关信息

# java - Java如何写入并行端口（Windows 7）-代码不起作用

> ID：12560351
> 
> 赞同：1
> 
> 时间：2012-09-24T07:08:51.867
> 
> 标签：java, windows-7, parallel-port

我必须（写入）将数据“0x01”输出到并行端口。我正在使用以下代码写入端口，但它没有写入，程序只是运行，没有任何反应。

```
import java.io.*;
import javax.comm.CommPortIdentifier;
import javax.comm.NoSuchPortException;
import javax.comm.ParallelPort;
import javax.comm.PortInUseException;

public class ParallelIO {

    private static OutputStream outputStream;
    private static InputStream inputStream;
    private static ParallelPort parallelPort;
    private static CommPortIdentifier port;
    static byte dat = 0x02;
    public static final String PARALLEL_PORT = "LPT1";

    public ParallelIO() {
        try {
            //detec the port
            System.out.println("Port : " + PARALLEL_PORT + " is detected");
            // get the parallel port connected to the output
            port = CommPortIdentifier.getPortIdentifier(PARALLEL_PORT);
            //port identified
            System.out.println("Port identified : " + port);
            // open the parallel port --
            //port(App name, timeout);
            parallelPort = (ParallelPort) port.open("0x0378", 50);
            //port opened
            System.out.println("Port opened : " + parallelPort);
            outputStream = parallelPort.getOutputStream();
            //get output
            System.out.println("Out put taken : " + outputStream);
            outputStream.write(dat);
            //data written
            System.out.println("Data Written : " + dat);
            outputStream.flush();
            outputStream.close();

        } catch (NoSuchPortException nspe) {
            System.out.println("\nPrinter Port LPT1 not found :     NoSuchPortException.\nException:\n" + nspe + "\n");
        } catch (PortInUseException piue) {
            System.out.println("\nPrinter Port LPT1 is in use : " +     "PortInUseException.\nException:\n" + piue + "\n");
        } catch (IOException ioe) {
            System.out.println("\nPrinter Port LPT1 failed to write : " + "IOException.\nException:\n" + ioe + "\n");
        } catch (Exception e) {
            System.out.println("\nFailed to open Printer Port LPT1 with exception : " + e +   "\n");
        } finally {
            if (port != null && port.isCurrentlyOwned()) {
                parallelPort.close();
            }
            System.out.println("Closed all resources.\n");
        }
    }

    public static void main(String[] args) {
        ParallelIO parr = new ParallelIO();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T21:18:20.510

你有 comm.jar、win32.dll 和 javax.comm.properties 吗？

您必须将这些文件放入此通行证

1.  程序文件\Java\jdk1.7.0_21\lib
2.  程序文件\Java\jdk1.7.0_21\bin
3.  程序文件\Java\jdk1.7.0_21\jre\bin
4.  程序文件\Java\jdk1.7.0_21\jre\lib
5.  程序文件\Java\jdk1.7.0_21\jre\lib\ext

# c++ - VCL 显示不同的形式

> ID：12560352
> 
> 赞同：0
> 
> 时间：2012-09-24T07:09:06.353
> 
> 标签：c++, forms, vcl

我正在创建一个具有多个表单的 VCL 表单应用程序。我创建了一个名为 formCreateAppointment 的新表单。

我正在尝试通过 menuItem 中的此代码加载表单：

```
formCreateAppointment.Show(); 
```

我收到此错误：

E2451 未定义的符号'formCreateAppointment'

我是否必须将此表单声明为“全局”对象或类似的东西？

谢谢

**更多信息**

表单“formCreateAppointment”位于项目->选项->自动创建表单下。当我使用代码时：

```
formCreateAppointment->Show(); 
```

我的代码将无法编译，并且出现以下错误：

E2451 未定义的符号'formCreateAppointment'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T20:14:44.430

当您在 IDE 中创建新的 Form 类时，生成的 .hpp 文件包含一个全局指针，例如：

```
#ifndef Unit2H
#define Unit2H

#include <Classes.hpp>
//...

class TformCreateAppointment : public TForm
{
    //...
}; 

extern PACKAGE TformCreateAppointment *formCreateAppointment; // <-- here

#endif 
```

听起来您还没有`#include`将 .hpp 文件添加到您的主代码中，例如：

```
#include "Unit2.hpp" // (or whatever you decided to name that Form's unit as) 
```

如果您在项目选项中将该表单设置为自动创建，则该全局指针将在程序启动时为您自动实例化（通过`Application->CreateForm()`在项目`WinMain()`函数中插入调用）。否则，您必须使用`new`运算符在代码中手动实例化它。

无论哪种方式，变量都是一个指针。VCL 对象不能在栈上实例化，只能在堆上实例化。您必须使用`->`运算符来访问 Form 对象的成员，例如：

```
formCreateAppointment->Show(); 
```

如果要改用`.`运算符，则必须先取消引用指针：

```
(*formCreateAppointment).Show(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T07:18:49.517

显然，您已将表单创建为其他地方的局部变量，这就是为什么您无法从尝试调用它的位置访问它的原因。

您可以使用三种方法来解决此问题：

*   在要显示它的确切位置创建表单。但是，这仅在您要从一个地方调用表单时才有效
*   将其创建为全局变量。
*   在堆中创建它，并在主窗体中存储指向它的指针。例如：

    ```
    class MyMainForm
    {
    public:
        MyMainForm()
        {
            //create the form in the constructor
            formCreateAppointment = new myOtherForm();
        }
        ~MyMainForm()
        {
            delete formCreateAppointment;
        }
        //code
    private:
        myOtherForm * formCreateAppointment;
    } 
    ```

# objective-c - 如何使用 JSON 解析一个对象中的 5 个数组

> ID：12560356
> 
> 赞同：0
> 
> 时间：2012-09-24T07:09:30.613
> 
> 标签：objective-c, ios, xcode, xcode4

我被这个问题困住了，JSOn的输出是

```
"forecast":[ 
{"day":"Today","condition":"MostlyClear","high_temperature":"94","low_temperature":"70"},
{"day":"Tomorrow","condition":"Sunny","high_temperature":"95","low_temperature":"69"},
{"day":"Saturday","condition":"Sunny","high_temperature":"94","low_temperature":"71"},
{"day":"Sunday","condition":"Sunny","high_temperature":"93","low_temperature":"70"},
{"day":"Monday","condition":"Sunny","high_temperature":"94","low_temperature":"70"}
] 
```

我需要条件键来显示表格视图单元格中的值。我的代码是

```
temp=[[NSString alloc] initWithData:[dataLoader httpData] encoding:NSUTF8StringEncoding];
NSLog(@"Patient Details %@",temp);

array = [[temp JSONValue] objectForKey:@"forecast"];

NSDictionary* dic = [array objectAtIndex:[indexPath row]];
NSString *strDay = [dic objectForKey:@"day"];
NSString *stringCondition = [dic objectForKey:@"condition"];
NSLog(@"condition is %@", stringCondition);
NSString *stringTemp = [dic objectForKey:@"high_temperature"];
NSString *stringLow = [dic objectForKey:@"low_temperature"]; 
```

但它只显示一个条件值，我一次想要所有五个条件。我也尝试使用`NSArray`而不是`NSString`条件，但没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T07:27:03.657

```
 array = [[temp JSONValue] objectForKey:@"forecast"]; 
```

在这个地方做一个 for 循环：

```
for(NSUInteger index = 0; index<[array count]; index++)
{

 NSDictionary* dic = [array objectAtIndex:index];
 NSString *strDay = [dic objectForKey:@"day"];
 NSString *stringCondition = [dic objectForKey:@"condition"];
 NSLog(@"condition is %@", stringCondition);
 NSString *stringTemp = [dic objectForKey:@"high_temperature"];
 NSString *stringLow = [dic objectForKey:@"low_temperature"];
} 
```

希望这会有所帮助...

# actionscript-3 - 如何摆脱已经实例化的对象的非空 hitTestObject 错误？

> ID：12560357
> 
> 赞同：0
> 
> 时间：2012-09-24T07:09:32.483
> 
> 标签：actionscript-3, flash, hittest, tween

我是一名初学者/中级 AS3“程序员”，试图为大学评估完成一个类似 skeeball 的基于 flash 的游戏，我正在给自己造成严重的精神伤害，试图让基本的物体（球）碰撞与得分目标一起工作我的舞台。我正在使用功率棒类型变量来确定球滚动的力，该力被转换为补间，以在我的“车道”上创建平滑的移动并进入得分区域（这是头顶视角）。目标是由游戏表的所有组件组成的较大影片剪辑中的影片剪辑实例。即使在我释放球时我的游戏桌和计分组件已经被实例化，我还是得到了典型的非空错误：

> 球速为 552
> 
> targetArray 值为 [object upperScoringAreaCTarget_mc]
> 
> TypeError：错误 #2007：参数 hitTestObject 必须为非空。
> 
> > 在 flash.display::DisplayObject/_hitTest()
> > 
> > 在 flash.display::DisplayObject/hitTestObject()
> > 
> > 在 SkeeBlast_7_fla::MainTimeline/ballTargetScore()
> > 
> > 在 SkeeBlast_7_fla::MainTimeline/rollBall()
> > 
> > 在 SkeeBlast_7_fla::MainTimeline/releaseBall()

这是我的球释放功能：

```
function releaseBall(event:MouseEvent):void
{
    rollBall();
    gameElements.removeEventListener(MouseEvent.MOUSE_MOVE, moveBall);
}

function rollBall():void
{
    ballSpeed = rollPower * 12;
    trace("ballSpeed is " + ballSpeed);
    ballFriction();
    ballGravity();
    //ball.y -= ballSpeed;
    //var myBallTween:Tween = new Tween(ball,"y",Strong.easeOut,ball.y,ball.y -     ballSpeed,3,true);
    myBallTween = new Tween(ball,"y",Strong.easeOut,ball.y,ball.y - ballSpeed,3,true);
    myBallTween.start();
    ballTargetScore();

} 
```

和我的碰撞检测和评分功能：

```
 //match targets to scoring values which should be tied to determineScore()
function ballTargetScore():void
{
var targetValue:String;
var targetArray:Array = new Array(gameTable.upperScoringArea.upperScoringAreaCTarget,
  gameTable.upperScoringArea.upperScoringAreaLtTarget,
  gameTable.upperScoringArea.upperScoringAreaRtTarget,
  gameTable.middleScoringArea.middleScoringAreaTargetTop,
  gameTable.middleScoringArea.middleScoringAreaTargetMiddle,
  gameTable.middleScoringArea.middleScoringAreaTargetLower,
  gameTable.lowerScoringArea.lowerScoringAreaTarget);

if (ball.hitTestObject(gameTable.tableDisplay))
{
    myBallTween.stop();
}
else
{
    for (var i:uint; i < targetArray.length; i++)
    {
        if (targetArray[i] != null)
        {
            trace("targetArray value is " + targetArray[i]);

            if (ball.hitTestObject(gameTable.upperScoringArea.upperScoringAreaCTarget))
            {
                targetValue = gameTable.upperScoringArea.upperScoringAreaC_text.text;
            }
            if (ball.hitTestObject(gameTable.upperScoringArea.upperScoringAreaLtTarget))
            {
                targetValue = gameTable.upperScoringArea.upperScoringAreaLt_text.text;
            }
            if (ball.hitTestObject(gameTable.upperScoringArea.upperScoringAreaRtTarget))
            {
                targetValue = gameTable.upperScoringArea.upperScoringAreaRt_text.text;
            }
            if (ball.hitTestObject(gameTable.upperScoringArea.middleScoringAreaTargetTop))
            {
                targetValue = gameTable.middleScoringArea.middleScoringAreaU_text.text;
            }
            if (ball.hitTestObject(gameTable.upperScoringArea.middleScoringAreaTargetMiddle))
            {
                targetValue = gameTable.middleScoringArea.middleScoringAreaM_text.text;
            }
            if (ball.hitTestObject(gameTable.upperScoringArea.middleScoringAreaTargetLower))
            {
                targetValue = gameTable.middleScoringArea.middleScoringAreaL_text.text;
            }
            if (ball.hitTestObject(gameTable.upperScoringArea.lowerScoringAreaTarget))
            {
                targetValue = gameTable.lowerScoringArea.lowerSA_text.text;
            }
            else
            {
                trace("no hit");
            }
        }
    }
}

//gameElements.removeEventListener(Event.ENTER_FRAME, ballTargetScore);
determineScore(targetValue);
//return targetValue;
} 
```

当我试图找到正确的组合时，这一切仍然有点混乱。

我需要首先让一个基本的球<->目标或边界碰撞正常工作，但最终，我想尝试弄清楚如何有条件地控制碰撞，因为许多目标像 skeeball 表一样垂直对齐。我可以在补间/滚动时测量球的速度吗？我是否能够正确应用重力以使球落下，并且如果它抓住得分目标下方的弧线之一，它将沿着弧线滚动直到它“落入洞中”？我认为我的对象的边界框会出现问题。

谢谢你的帮助，

艾伦

* * *

这是对 Vesper 的回复，其中包含已清理的功能（谢谢）和新错误。

```
function ballTargetScore():void
{
    var targetValue:String;
    var targetArray:Array = new Array(gameTable.upperScoringArea.upperScoringAreaCTarget,
      gameTable.upperScoringArea.upperScoringAreaLtTarget,
      gameTable.upperScoringArea.upperScoringAreaRtTarget,
      gameTable.middleScoringArea.middleScoringAreaTargetTop,
      gameTable.middleScoringArea.middleScoringAreaTargetMiddle,
      gameTable.middleScoringArea.middleScoringAreaTargetLower,
      gameTable.lowerScoringArea.lowerScoringAreaTarget);
    var targetTextArray:Array =  new Array(gameTable.upperScoringArea.upperScoringAreaC_text.text,
        gameTable.upperScoringArea.upperScoringAreaLt_text.text,
        gameTable.upperScoringArea.upperScoringAreaRt_text.text,
        gameTable.middleScoringArea.middleScoringAreaU_text.text,
        gameTable.middleScoringArea.middleScoringAreaM_text.text,
        gameTable.middleScoringArea.middleScoringAreaL_text.text,
        gameTable.lowerScoringArea.lowerSA_text.text);

    for (var i:uint; i < targetArray.length; i++)
    {
        if (targetArray[i] != null)
        {
            trace("targetArray value is " + targetArray[i]);
            if (ball.hitTestObject(targetArray[i]))
            {
                targetValue = targetTextArray[i];
                trace('targetValue becomes',targetValue);
            }
        }
    }

    determineScore(targetValue);
} 
```

和错误：

> 球速为 432
> 
> targetArray 值为 [object upperScoringAreaCTarget_mc]
> 
> targetArray 值为 [object upperScoringAreaLtTarget_mc]
> 
> targetArray 值为 [object upperScoringAreaRtTarget_mc]
> 
> targetArray 值为 [object middleScoringAreaTargetTop_mc]
> 
> targetArray 值为 [object middleScoringAreaTargetMiddle_mc]
> 
> targetArray 值为 [object middleScoringAreaTargetLower_mc]
> 
> targetArray 值为 [object lowerScoringAreaTarget_mc]
> 
> ArgumentError：错误 #2025：提供的 DisplayObject 必须是调用者的子对象。
> 
> > 在 flash.display::DisplayObjectContainer/removeChild()
> > 
> > 在 SkeeBlast_7_fla::MainTimeline/determineScore()
> > 
> > 在 SkeeBlast_7_fla::MainTimeline/ballTargetScore()
> > 
> > 在 SkeeBlast_7_fla::MainTimeline/rollBall()
> > 
> > 在 SkeeBlast_7_fla::MainTimeline/releaseBall()

感谢您的帮助。

* * *

我确信这些规则是必要的，这让我把这个问题变成了一个很长的问题。:)

无论如何，我有点弄清楚了有关 DisplayObject 的错误，但程序仍然无法正常工作。

我通过将我的 gameElements MC 添加到确定Score 函数中的 removeChild 调用来修复错误，如下所示；但是，即使错误消失了，球仍然没有被移除，并且 targetValue 和 score 永远不会更新（或显示在上面的跟踪中）。

```
function determineScore(scoreEvent:String):void
{
    if ( scoreEvent == "D-O" || scoreEvent == "2XB" || scoreEvent == "?")
    {
        if (scoreEvent == "D-O")
        {
            ballCount +=  1;
            gameTable.tableDisplay.BR_text.text = ballCount - 1;
            gameTable.tableDisplay.BR_text.embedFonts = false;
            gameElements.removeChild(ball);
            if (ballCount > 0 )
            {
                initBall();
            }
            else
            {
                drawEnd();
            }
        }
        else if (scoreEvent == "2XB")
        {
            ballCount +=  2;
            gameTable.tableDisplay.BR_text.text = ballCount - 1;
            gameTable.tableDisplay.BR_text.embedFonts = false;
            gameElements.removeChild(ball);
            if (ballCount > 0 )
            {
                initBall();
            }
            else
            {
                drawEnd();
            }
        }
        else
        {
            determineScore(allRandomScore(allScoresArray));
        }
    }
    else
    {
        scoreTotal +=  Number(scoreEvent);
        ballScore = Number(scoreEvent);
        gameTable.tableDisplay.Score_text.text = scoreTotal;
        gameTable.tableDisplay.Score_text.embedFonts = false;
        gameElements.removeChild(ball);
        if (ballCount > 0 )
        {
            initBall();
        }
        else
        {
            drawEnd();
        }
    }
} 
```

谢谢你看这个。我觉得我终于取得了一点进步。

* * *

好的，继续进行另一个更新。

gameElements 是我添加所有其他 MC（如游戏桌和球）的主要空 MC，这样当我返回主菜单时，我可以立即删除所有内容。

```
var gameElements:MovieClip = new MovieClip();
var gameTable:MovieClip = new table_mc();
var ball:MovieClip = new blastBall(); 
```

并从我的 drawGame 功能：

```
...
stage.addChildAt(gameElements, 1);
gameElements.addChild(gameTable);
initBall();
... 
```

和初始化球：

```
function initBall():void
{
    //resize ball
    ball.height = 18;
    ball.width = 18;
    //place ball on table in correct location
    ball.x = gameTable.x;
    ball.y = gameTable.height - 20;
    gameElements.addChild(ball);
    //reduce number of remaining balls;
    ballCount -=  1;
    //hide the mouse and connect its movement to ball
    Mouse.hide();
    gameElements.addEventListener(MouseEvent.MOUSE_MOVE, moveBall);
} 
```

* * *

希望这个条目没有限制。:)

这是我在确定得分中添加的一点点，以从 ballTargetScore 中获取“结果”（或者实际上没有）：

```
if (scoreEvent == null)
    {
        trace("scoreEvent is null");
        gameTable.tableDisplay.BR_text.text = ballCount - 1;
        gameTable.tableDisplay.BR_text.embedFonts = false;
        gameElements.removeChild(ball);
        if (ballCount > 0)
        {
            initBall();
        }
        else
        {
            drawEnd();
        }
    } 
```

（还没有清理其他任何东西）仍然试图让第一次碰撞工作。当我开始捕捉空值时，initBall 和 drawEnd 开始工作（好吧，它仍然没有真正做我想要的，但至少有一个响应）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T10:10:52.900

好吧，你有一个目标数组，你收到的错误意味着它的一些元素是空的。但是，当您遍历数组时，出于某种原因，您会检查整个目标集，而不是检查它们中的任何一个是否为空。我不明白为什么。看到如果检测到命中，您需要分配一个文本变量，我建议您制作另一个具有相应索引的数组，其中包含您要分配的所有文本。

```
var targetTextArray:Array=(gameTable.upperScoringArea.upperScoringAreaC_text.text,
    gameTable.upperScoringArea.upperScoringAreaLt_text.text,
    gameTable.upperScoringArea.upperScoringAreaRt_text.text,
    gameTable.middleScoringArea.middleScoringAreaU_text.text,
    gameTable.middleScoringArea.middleScoringAreaM_text.text,
    gameTable.middleScoringArea.middleScoringAreaL_text.text,
    gameTable.lowerScoringArea.lowerSA_text.text); 
```

然后，当您遍历 targetArray 时，您不再需要检查目标是什么来检索正确的文本。你做：

```
for (var i:uint; i < targetArray.length; i++)
{
    if (targetArray[i] != null)
    {
        trace("targetArray value is " + targetArray[i]);
        if (ball.hitTestObject(targetArray[i])) {
            targetValue=targetTextArray[i];
            trace('targetValue becomes',targetValue);
        }
    }
} 
```

更新：好的，让我们清理您的 determineScore() 函数。看起来你正确地添加和移除了你的球，但你可能会这样做两次。将球移出两次而不将其放回原处将使您出现此错误。`gameElements.removeChild(ball);`目前，如果在该函数中被调用两次，我无法获得。

```
function determineScore(scoreEvent:String):void
{
    var reBall:Boolean=false; // should we make another ball roll, given the score
    var reDisplay:Boolean=false; // should we set new text
    if ((scoreEvent==null)||(scoreEvent=="")) return; // we haven't scored
    if ( scoreEvent == "D-O" || scoreEvent == "2XB" || scoreEvent == "?")
    {
        if (scoreEvent == "D-O")
        {
            ballCount +=  1;
            reBall=true;
            reDisplay=true;
        } 
        else if (scoreEvent == "2XB")
        {
            ballCount +=  2;
            reBall=true;
            reDisplay=true;
        }
        else
        {
            determineScore(allRandomScore(allScoresArray));
            // hey, what are we doing here? We seemingly receive a "?" as an input,
            // and we roll a random value out of a set given elsewhere. Okay
            return; // as good measure, because we don't have to do anything more
        }
    }
    else
    { // if we're here, we assume we have a numeric score passed inside, right?
        scoreTotal +=  Number(scoreEvent);
        ballScore = Number(scoreEvent);
        reBall=true;
        reDisplay=true;
    }
    // Now look, we always have to launch a new ball or display end, and
    // we always have to redraw score textfield. But look, you are always calling 
    // determineScore with some value, while you should do it only if you hit something!
    // So I added starting clause of "if null or empty string".
    if (reDisplay) {
        // we have to update text
        gameTable.tableDisplay.BR_text.text = ballCount - 1;
        gameTable.tableDisplay.BR_text.embedFonts = false;
    }
    if (reBall) {
        // we have to remove ball and launch another, if we have any left
        gameElements.removeChild(ball);
        if (ballCount > 0 )
        {
            initBall();
        }
        else
        {
            drawEnd();
        }
    }
} 
```

# javascript - 我想要一个日期选择器文本字段的日历。我希望我的日历应该将当前日期显示为我的服务器当前日期。怎么做...？

> ID：12560360
> 
> 赞同：0
> 
> 时间：2012-09-24T07:09:43.253
> 
> 标签：javascript, jsp

现在我正在使用一个`js`包含该日历代码某些功能的文件，但我的日历总是将当前日期显示为客户日期。我尝试了很多，但最后我知道 javascript 的日历总是采用客户端日期和时间。所以你能告诉我我的 web 应用程序日历如何将当前日期显示为服务器当前日期而不是旧客户端当前日期

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T07:26:13.523

您可以在页面加载期间简单地读取它一个变量，例如：

$startOfMonth= date("01-mY");

并将其分配给您的日期选择器字段，例如

">

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T07:19:27.967

如您所知，js 总是采用客户端日期，因此您必须为它制造技巧

我去的一个技巧是

在呈现 html 时，我会将服务器端日期放入隐藏字段，当 jquery 调用当前日期时，我会将其作为当前日期传递

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T07:20:44.830

您可以从保存当前服务器时间的服务器发送一个值，并在客户端创建一个保存该值的新日期对象，从而有效地显示服务器上的日期。

但是，这样做必须有一个很好的理由，因为这可能会让用户感到非常困惑。此外，您的服务器现在可能位于一个时区，明天可能位于另一个时区（如果您移动到另一个提供商），因此如果您保存用户的响应，日期可能会不一致。
如果您变得更大并且需要跨数据中心的冗余，那么您肯定会有不同的时区，因为您希望数据中心在地理上分布。

因此，通常最好的做法是向用户显示他自己的时间，并将其转换为服务器上您想要的任何内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T07:21:53.247

请试试这个

`$( ".selector" ).datepicker({ defaultDate: "<?php date("m-d-y"); ?>" });`

# wpf - 为了使用 MVVM Light Tool Kit 显示一些数据，在模态窗口和对话框之间有什么好的选择？

> ID：12560361
> 
> 赞同：1
> 
> 时间：2012-09-24T07:09:45.117
> 
> 标签：wpf, mvvm, popup, modal-dialog, mvvm-light

我是 MVVM 世界的新手。我有一个关于子窗口的问题，我想要一些解释。我收集了一些数据，并将其显示在主窗口的**数据网格中。**我想从集合中选择一个项目，并希望在某些**Modal Window**、**Dialog**或**Popup**中显示该数据。我想编辑该数据，这些更改应反映在主窗口的数据网格中。

谁能告诉我**模态窗口**、**对话框**和**弹出**窗口中什么是好的选择。我正在使用 MVVM Light Toolkit。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T09:51:41.187

在我看来，模态窗口和非模态窗口之间的选择仅取决于您想要实现的 UI 体验。如果由于某种原因，行项目的更新不能与网格项目上的其他操作同时进行，则需要模态之一。

如此处所述[对话框概述](http://msdn.microsoft.com/en-us/library/aa969773.aspx)

> 当函数需要用户提供额外数据才能继续时，函数会显示模式对话框。因为该功能依赖于模式对话框来收集数据，所以模式对话框还可以防止用户在应用程序保持打开状态时激活应用程序中的其他窗口。

模态对话框将是更简单的解决方案，因为您不需要对正在编辑的行进行额外验证 - 您只需一次编辑一行（我假设您在编辑中编辑时无法在主视图中删除此行窗户）。

如果您想在主网格中反映子窗口中的更改，只需在主视图中使用可观察的项目集合，并将该集合中的某些项目作为子窗口的 DataContext 传递。

# mysqldump - 在 mysql 中转储数据库

> ID：12560362
> 
> 赞同：0
> 
> 时间：2012-09-24T07:09:46.883
> 
> 标签：mysqldump

当我运行下面的语句时，mysql 抱怨有错误。

```
mysqldump --triggers --routines -u root -p mydb > mydb_20120924.dmp; 
```

mysql版本：5.1.34

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'mysqldump --triggers --routines -u root -p mydb > mydb_20120924.dmp' 附近使用正确的语法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T13:12:42.897

看起来您正在尝试从 mysql 命令行解释器内部运行 mysqldump 命令。

mysqldump 命令的提示符是否显示“mysql>”？然后你正在运行 mysql 命令行解释器。它应该用于——事实上，它只能用于——运行 mysql 命令。

mysqldump 是一个单独的命令，必须从 shell 运行。

通过键入“exit”退出 mysql - 您将看到一个 shell 提示。然后 mysqldump 命令将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T07:39:23.277

如果你有一个名为“mydb”的数据库，这应该可以工作。您可以尝试使用 --database 专门：

> mysqldump --triggers --routines -u root -p --database mydb > mydb_20120924.dmp;

# sed - sed 递归运行，无法重新分配内存

> ID：12560373
> 
> 赞同：1
> 
> 时间：2012-09-24T07:10:34.603
> 
> 标签：sed

我是 sed 命令的新手.....我正在尝试一些命令，但它总是在递归......在某些情况下它说“无法重新分配内存”

**无限递归输出：**

```
echo -e 'hell\nnautanki\nwtf' | sed -e '1h;1!H;$!d' -e 'x;l;D' 
```

**内存重新分配问题：**

```
echo -e 'hell\nnautanki\nwtf'| sed -e '1h;1!H;$!d' -e 'x;D' 
```

错误：

```
sed: couldn't re-allocate memory 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T09:01:58.750

正如*paulsm4*所指出的，您已经创建了一个无限循环，它在每次迭代时分配内存，第一个示例只是第二个示例的较慢版本，由于打印，它最终也会出错`couldn't re-allocate memory`。

让我们分解一下：

```
1h
1!H
$!d 
```

将所有输入保存到保持空间，注意`d`开始下一个循环。

最后两个命令`x; D`仅在到达最后一行时执行。这是运行之前的情况：

```
PS: wtf
HS: hell\nnautanki\nwtf 
```

`x`交换它们并`D`删除`hell\n`并重新启动循环，因为模式空间不为空。遗嘱在新的`1!H`模式空间上执行，结果是：

```
PS: nautanki\nwtf
HS: wtf\nnautanki\nwtf 
```

即每次迭代时内存使用量略有增加。

有两行输入，情况有点不同：

```
PS: nautanki
HS: hell\nnautanki 
```

变成：

```
PS: nautanki
HS: nautanki 
```

以此类推到无穷大。

一行输入导致：

```
PS: hell
HS: hell 
```

然后：

```
PS: 
HS: hell 
```

就这样终止了。

# php - 在php中使用xpath搜索特定节点的兄弟？

> ID：12560376
> 
> 赞同：1
> 
> 时间：2012-09-24T07:10:40.717
> 
> 标签：php, xml, xpath

我有两个不同的 xml doxument，我从 web 服务获得。

通过提交第一个请求，我得到了包含酒店基本信息并具有这样的结构的 xml

```
<offers>
<offer>
    <city_id>5</city_id>
    <city>Barcelona</city>
    <name>EnGrande test hotel</name>
    <address>Calle Muntaner 262</address>
    <price_no_vat>80</price_no_vat>
    <currency>EUR</currency>
    <type>Hotel</type>
    <description>
        A fantastic hotel at a fantastic price in a fantastic location.
    </description>
    <image_url>http://www.somesite.com/photos/hotels/bcn30_accomodation_1220_1.jpg</image_url>
    <offer_url>http://www.somesite.com/eg_offer_detail.php?hotel_id=191&checkin=2009-05-01&checkout=2009-05-02&city_id=5&guests=2</offer_url>
    <distance>3.175</distance>
</offer> 
```

第二个 xml 文档，其中包含酒店的详细信息并具有这样的结构

```
<hotels>
<hotel> 
    <hotel_id>191</hotel_id> 
    <name>Test hotel</name> 
    <type>hostel</type> 
    <category>2</category> 
    <street>C/ de la Victoria, 2 - 4th floor left door. Madrid 28012.</street> 
    <postcode>28012</postcode> 
    <city>Madrid</city> 
    <city_id>5</city_id> 
    <description>This is a fantastic hotel</description> 
    <url>http://www.somesite.com/madrid-hostel-191-test-hotel.html</url> 
    <pppn>27.10</pppn> 
    <currency>EUR</currency> 
    <longitude>-3.701687097549</longitude> 
    <latitude>40.416587829590</latitude> 
    <images>
        <image>http://www.somesite.com/photos/hotels/30mad_accomodation_5_1.jpg</image>
        <image>http://www.somesite.com/photos/hotels/30mad_accomodation_5_2.jpg</image>
        <image>http://www.somesite.com/photos/hotels/30mad_accomodation_5_3.jpg</image>
        <image>http://www.somesite.com/photos/hotels/30mad_accomodation_5_4.jpg</image>
        <image>http://www.somesite.com/photos/hotels/30mad_accomodation_5_5.jpg</image>
        <image>http://www.somesite.com/photos/hotels/30mad_accomodation_5_6.jpg</image>
        <image>http://www.somesite.com/photos/hotels/30mad_accomodation_5_7.jpg</image>
        <image>http://www.somesite.com/photos/hotels/30mad_accomodation_5_8.jpg</image>
        <image>http://www.somesite.com/photos/hotels/30mad_accomodation_5_9.jpg</image>
    </images>
    <amenities>
        <amenity>Elevator / lift</amenity>
        <amenity>Laundry / washing machine</amenity>
        <amenity>TV lounge</amenity>
        <amenity>Left-luggage office</amenity>
        <amenity>Reception available</amenity>
        <amenity>24h reception</amenity>
        <amenity>Credit cards accepted</amenity>
        <amenity>TV</amenity>
        <amenity>Telephone</amenity>
        <amenity>Fans</amenity>
        <amenity>Heating</amenity>
        <amenity>Hair dryer</amenity>
        <amenity>Towels & sheets</amenity>
    </amenities>
</hotel> 
```

现在第二个 xml 文档包含同一个城市的许多酒店。我想在第二个 xml 文档中搜索带有名称的酒店并显示其详细信息。我为此创建了一个 php 代码，如下所示

```
<?php 
$city_id = 6;

$request =  "http://www.somewebsite.com/feeds/phpfile.php?vendor_key=xxx&checkin=26-11-2012&checkout=30-11-2012&guests=3&city_id=".$city_id;

$same_city_hotels_request = "http://www.somewebsite.com/feeds/get-hotels.php?vendor_key=xxx&city_id=".$city_id; 

$offerxml = simplexml_load_file($request);
$same_city = simplexml_load_file($same_city_hotels_request);

$hotel = $offerxml->offer;

for($i=0;$i<=10;$i++){   

$hotel_info = $same_city->xpath("//hotel/name[contains(text(),'".$hotel[$i]->name."')]");

{
?>

<tr><td>name</td><td>category</td><td>city</td><td>Address</td><td>price</td><td>Image</td></tr>
<tr><td> <?php echo $hotel[$i]->name; ?></td>
<td><?php echo $hotel_info[$i]->category; ?></td>
<td> <?php echo $hotel[$i]->city; ?> </td>
<td><?php echo $hotel[$i]->address; ?></td><td><?php echo $hotel[$i]->price; ?></td>
<td><?php echo $hotel_info[$i]->image; ?></td></tr>

<?php } ?> 
```

任何人都可以告诉我我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T14:21:12.363

您的 XPath 正在返回一个`name`元素：

```
$hotel_info = $same_city->xpath(
    "//hotel/name[contains(text(),'".$hotel[$i]->name."')]"
); 
```

但是您的 PHP 代码随后会尝试使用该元素，就好像它是一个`hotel`元素一样。

使 XPath 返回`hotel`元素，而不是`name`元素。以下任何一种形式都应该这样做。

```
"//hotel/name[contains(text(),'".$hotel[$i]->name."')]/parent::*"
"//hotel[name[contains(.," . $hotel[$i]->name . ")]]"
"//hotel[contains(string(name)," . $hotel[$i]->name . ")]" 
```

# objective-c - CocosDenshion 无法播放录制的声音

> ID：12560384
> 
> 赞同：1
> 
> 时间：2012-09-24T07:11:41.600
> 
> 标签：objective-c, ios, cocos2d-iphone, avaudiorecorder

我使用 AVAudioRecorder 录制声音（使用本教程[http://www.tumblr.com/tagged/avaudiorecorder?before=1300075871](http://www.tumblr.com/tagged/avaudiorecorder?before=1300075871)），然后尝试使用 CocosDenshion 播放录制的声音：

```
CDSoundEngine* soundEngine = [[CDSoundEngine alloc] init];
NSArray *defs = [NSArray arrayWithObjects: [NSNumber numberWithInt:1],nil];
[soundEngine defineSourceGroups:defs];
//......
[soundEngine loadBuffer:1 filePath:[recorder.url path]];
[soundEngine playSound:1 sourceGroupId:0 pitch:2.0f pan:0 gain:1.0f loop:NO]; 
```

此代码在模拟器上运行良好，但在设备（iPad 2、iOS 5.1.1）上 - 没有播放声音。我会尝试用 AVAudioPlayer 播放录制的声音——它播放得很好，但我需要调整声音，发现使用 CocosDenshion 是最简单的方法。我应该检查或修复哪些设置或其他设置才能播放录制的声音？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T07:42:00.193

问题解决了，首先我改变了创建 CDSoundEngine 实例的方式，使用 CDAudioManager：

```
CDSoundEngine = [CDAudioManager sharedManager].soundEngine; 
```

然后，在播放 CDAudioManager 的录制声音之前将模式设置为 kAMM_PlayAndRecord：

```
[CDAudionManager sharedManager] setMode:kAMM_PlayAndRecord]; 
```

最后将 AudioSession 重定向到扬声器：

```
UInt32 audioRouteOverride = kAudioSessionOverrideAudioRoute_Speaker;
AudioSessionSetProperty (kAudioSessionProperty_OverrideAudioRoute, sizeof (audioRouteOverride),&audioRouteOverride); 
```

一切正常。

# java - 爪哇。从 Java 创建 Microsoft Outlook 电子邮件

> ID：12560388
> 
> 赞同：-4
> 
> 时间：2012-09-24T07:12:05.620
> 
> 标签：java, email, outlook

我正在创建 Java 应用程序，它将打开已输入“收件人”、“抄送”、“主题”、“附件”字段的 Outlook 电子邮件。但是有一个条件：应用程序必须具有添加多个附件的能力。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T07:19:04.860

尝试使用[j-Exchange](http://sourceforge.net/projects/j-xchange/)和[SyncEx](http://www.syncex.com/api/j2ee-java-api-exchange-domino.html)。

# ios - Frank(黄瓜) iOS 测试元素位置

> ID：12560391
> 
> 赞同：1
> 
> 时间：2012-09-24T07:12:37.410
> 
> 标签：ios, position, cucumber, orientation, frank

我想测试一个 UI 元素在重新定位后是否重新定位。该元素的可访问性标签是“大应用程序图标”，它是一个 UIImageView。我该怎么说：

```
element("view marked:'large app icon'").frame should_be([ [0,0], [250, 250] ]) 
```

?

# ruby-on-rails - sql distinct语句和在rails上使用多个表

> ID：12560392
> 
> 赞同：0
> 
> 时间：2012-09-24T07:12:44.020
> 
> 标签：ruby-on-rails

您将如何以“rails 方式”编写此行？

```
unique_attendees = CourseSessionsUser.count_by_sql(["SELECT count(DISTINCT csu.user_id) AS count_user_id FROM course_sessions_users csu, course_sessions cs WHERE cs.course_id = ? AND csu.course_session_id = cs.id"], @course.id) 
```

查询本身是：

```
SELECT count(DISTINCT csu.user_id) AS count_user_id 
FROM  course_sessions_users csu, 
      course_sessions cs 
WHERE cs.course_id = ? 
AND csu.course_session_id = cs.id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T07:31:52.493

[`count`](http://api.rubyonrails.org/v2.3.8/classes/ActiveRecord/Calculations/ClassMethods.html#M001700)导轨的使用方法

```
 count = CourseSessionsUser.count('csu.user_id',
  :distinct => true, :conditions => ["cs.course_id = ?", @course.id]
  :joins => "cs LEFT JOIN course_sessions_users csu ON cs.id = csu.course_session_id") 
```

如果条件匹配，这将直接返回非零整数，否则返回零

# asp.net-mvc - 检索组合框项目的数据 -Telerik MVC

> ID：12560396
> 
> 赞同：0
> 
> 时间：2012-09-24T07:13:00.203
> 
> 标签：asp.net-mvc, combobox, telerik-mvc

我的应用程序是 asp.net MVC，我正在使用 Telerik MVC Combobox，使用 ViewData，我将项目发送为：

```
 people.Add(new Person { Id = 1, Name = "John", viewed = true });

<% Html.Telerik().ComboBox()
       .Name("ComboBox")
       .BindTo(new SelectList((IEnumerable<Person>)ViewData["people"], "Id", "Name"))
       .ClientEvents(events => events.OnChange("ComboBox_onChange")
       .OnLoad("ComboBox_onLoad")
       .OnOpen("ComboBox_OnOpen"))
       .Render();
%> 
```

我可以使用以下方法获取特定项目的文本：

```
 var item = combobox.dropDown.$items.eq(0);
 alert(item.text()); 
```

知道如何获取此项目的数据以检查查看的值是否为真或假。我试过了：

```
 alert(item.Value.split('|')); 
```

但收到此错误：无法获取属性“拆分”的值：对象为空或未定义

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T16:50:25.690

这是[客户端 API 文档](http://www.telerik.com/help/aspnet-mvc/telerik-ui-components-combobox-client-api-and-events.html#ClientMethods)

基本上你需要先获得对组合框插件的引用：

```
var combo = $('#ComboBox').data('tComboBox'); 
```

然后你可以调用你需要的任何方法：

```
alert( combo.value() ); 
```

编辑：

您的组合框当前绑定到`SelectList`是`Value`Person.Id 和`Text`是 Person.Name 的位置。“已查看”属性未存储在任何地方。您可以将其作为 的一部分包含在内，`Value`如上所述检索值，然后`split()`获取“已查看”部分：

```
Html.Telerik().ComboBox()
    .Items(items =>
    {
        // pseudo-code
        foreach (person)
            items.Add().Text(person.Name).Value(person.Id + "_" + person.Viewed)
    })
    ... 
```

# ios - 如何在 Xcode 4.5 上安装 iOS 4.3 模拟器？

> ID：12560399
> 
> 赞同：8
> 
> 时间：2012-09-24T07:13:23.757
> 
> 标签：ios, xcode, sdk, ios-simulator

我通过 App Store 安装了 Xcode 4.5，它支持 iOS 5.1 和 6.0，但不支持 iOS 4.3。它也不能在“首选项”的“下载”选项卡中下载。[如 Dominik Porada 所述，](http://pieces.dominikporada.com/post/31915100911/simulator)我尝试从另一台计算机上抓取它并将其放在这台计算机上，但可惜没有用。也许我还需要其他文件？如何取回 iOS 4.3 SDK？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-28T06:59:19.400

[正如Dominik Porada 所述，](http://pieces.dominikporada.com/post/31915100911/simulator)我实际上只是通过将`iPhoneSimulator4.3.sdk`文件复制到`Xcode.app`包中而使 4.3 出现在 Xcode 4.3 菜单中。我想我只需要再次重新启动 Xcode，就可以了！

但它不起作用。[正如这个问题](https://stackoverflow.com/questions/11651773/how-to-install-simulator-sdk-4-3-to-xcode-4-4-on-mountain-lion/11743817)的答案所指出的，Mountain Lion 不支持 iOS 4.3。不过，Lion 可能工作得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T07:25:45.093

这是在 XCode 4.2 中运行 iOS 5.1 的解决方案。尝试遵循相同的程序。尝试从以前版本的 XCode 中复制它。我自己没有尝试过。但是看看它是否有效。

要让 Snow Leopard 上的 Xcode 4.2 在运行 iOS 5.1 的设备上运行代码，您可以执行以下操作：

如果您有另一台 Mac 运行 Lion 和 Xcode 4.3.1，您可以从以下位置复制文件：

```
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/DeviceSupport/5.1 (9B176) 
```

将复制的文件放在 Snow Leopard Mac 上的相同位置：可能

```
/Developer/Platforms/iPhoneOS.platform/DeviceSupport 
```

同样复制此目录中的 iOS 5.1 SDK 文件：

```
/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk 
```

还将“version.plist”从 iPhoneOS.platform 文件夹中的 Lion 机器复制到 Snow Leopard 机器。

在 Snow Leopard 机器上重新启动 Xcode 并重新连接设备，看起来很开心。

如果您无法访问装有 Lion 和 Xcode 4.3.1 的机器：

您可以从 4.3.1 DMG 中获取文件，该文件可在此处从 Apple 下载：Apple Developers 下载。

挂载 DMG，在 Xcode 图标上显示包内容并向下钻取

```
/Volumes/Xcode/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/DeviceSupport 
```

请按照上述步骤操作。

您可能会发现在终端窗口中使用 Apple 专有的同上方法 (sudo ditto src dest) 来复制文件夹更方便。

# .net - Parallel.For 是否能够处理异常？

> ID：12560400
> 
> 赞同：0
> 
> 时间：2012-09-24T07:13:26.570
> 
> 标签：.net, c#-4.0, task-parallel-library

在我当前的项目中，我使用的是 Parallel.For 循环而不是普通的 For 循环。我的问题是如果 Parallel.For 循环中的一次迭代失败，它是否能够处理异常？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T07:22:35.047

**更新：**基于[akton](https://stackoverflow.com/users/1634846/akton)的评论。

不，`Parrellel.For`不处理异常。您应该自己处理异常。

有关简要说明，请参见[此处](http://msdn.microsoft.com/en-us/library/dd460695.aspx)

# javascript - 使用 onmouseover 作为

> ID：12560403
> 
> 赞同：0
> 
> 时间：2012-09-24T07:13:44.040
> 
> 标签：javascript, html, image, onmouseover, alternating

我有一个连续循环的交替图像，只要鼠标在图像上，我希望能够中断并使用鼠标悬停效果显示与当前显示的图片相对应的新图片。

作为一个更好地描述我的问题的示例，我希望每五秒钟在屏幕上交替显示一堆图像（我已经可以做到）。然后当鼠标悬停事件发生时，让图像停止交替并显示一个与刚刚显示的图像相对应的新图像（它将是另一个描述刚刚显示的图像的图像）。当鼠标悬停在图像上时，我还希望图像停止交替。

到目前为止，我可以让第一张图像显示其相应的图像，但我似乎无法让其余的工作。此外，当鼠标仍在图像上时，我无法让交替图像停止。

这是我到目前为止所拥有的：

```
<body>

    <img src="image1.jpeg" alt="Image1" width="344" height="311" id="rotator" onmouseover="this.src='imageText1.jpeg'" onmouseout="this.src='image1.jpeg'">

    <script type="text/javascript">
     (function()  {
        var rotator = document.getElementById("rotator");
        var imageDir = '';
        var delayInSeconds = 5;

        var images = ["image2.png", "image3.gif", "image4.png", "image5.jpeg","image6.gif", "image7.jpeg", "image1.jpeg"];

        var num = 0;
        if (rotator.onmouseover ==  )
        var changeImage = function()  {
            var len = images.length;
            rotator.src = imageDir + images[num++];
            if (num == len)  {
                num = 0;
            }
        };
        setInterval(changeImage, delayInSeconds * 1000);
    })();
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T08:17:21.047

```
if (rotator.onmouseover ==  )
{

} 
```

如果条件，我们必须检查一些东西。空状态是一个问题。请检查它。

# c# - 在控制器上找不到公共操作方法

> ID：12560406
> 
> 赞同：3
> 
> 时间：2012-09-24T07:13:52.043
> 
> 标签：c#, asp.net-mvc

我正在处理 asp.net MVC3 上的一个项目，当我运行我的项目并登录时，我有一个名为 UserProfile 的控制器，它显示错误 A public action method images was not found on controller UserProfile

我的任何控制器中都没有任何名为 images 的操作方法，下面是我的 UserProfile 的索引方法

```
[CustomAuthorizeAttribute]
    public ActionResult Index()
    {
        var userName = string.Empty;
        if (SessionHelper.GetSession("login") != null)
        { userName = SessionHelper.GetSession("login").ToString(); }
        else
        { return View(); }

        SessionHelper.SetSess("issetup", null);
        UserProfileModel model = GetUserProfileData(userName);
        StateandCityDropdown();
        return View(model);
    } 
```

我在用户配置文件索引视图上有两个表单，一个带有一些文本框和其他用于输入数据的字段，第二个用于上传图像

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T08:21:18.183

在我看来，这些路线正在获取您拥有的网址并将它们误认为是一项操作。可能是您有一个指向与您的控制器匹配的目录下的图像目录的链接，例如 /User/Images 会导致此错误，因为当您没有时，路由会期望您执行 Images 操作。检查页面源中是否有任何链接到图像文件夹但不包含图像的内容。另一种选择是路线正在拾取图像以及您希望它们执行的操作。如果您的 Global.asax.cs 文件中出现这种情况，请检查 RegisterRoutes 方法是否忽略了图像。

```
 routes.Ignore("{*allpng}", new { allpng = @".*\.png(/.*)?" });
       routes.Ignore("{*allgif}", new { allgif = @".*\.gif(/.*)?" });
       routes.Ignore("{*alljpg}", new { alljpg = @".*\.jpg(/.*)?" }); 
```

希望这可以帮助安迪

# javascript - 从 iframe 调用后菜单无法正确显示

> ID：12560409
> 
> 赞同：5
> 
> 时间：2012-09-24T07:14:30.857
> 
> 标签：javascript, html, css, iframe, menu

我在页面上显示 iframe 时遇到问题。

我有一个顶部框架，顶部显示一个徽标（这很好）我在页面左侧有一个菜单。（我遇到了问题）我在菜单右侧有一个框架，将显示我的页面。

我的 index.htm 页面正在加载所有框架，如下所示：

```
<script language="javascript">  
    function win_resize()
    {
        var _docHeight = (document.height !== undefined) ? document.height : document.body.offsetHeight; 
            document.getElementById('leftMenu').height = _docHeight - 90;
    }
</script>

<body onresize="win_resize()">
     <!-- Header -->
    <div id="header">
        <div>
            <img src="logo.png">
        </div>
    </div>

     <!-- Left Menu -->
    <div id="left-sidebar" >
        <iframe id="leftMenu" src="menu.htm" STYLE="top:72px; left:0px; position:absolute;" NAME="menu" width="270px" frameborder="0"></iframe>
    </div>

     <!-- Main Page --> 
    <div id="content">
        <iframe src="users1.htm" STYLE="top:72px" NAME="AccessPage" width="100%" height="100%" frameborder="0"></iframe>
    </div>
</body> 
```

我的 menu.htm 页面有以下代码：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">

<html lang="en-GB">

<head>
    <link rel="stylesheet" type="text/css" href="_styles.css" media="screen">
</head>
<body>

    <ol class="tree">
        <li>
            <li class="file"><a href="file1.htm">File 1</a></li>
            <li class="file"><a href="file2.htm">File 2</a></li>
            <li class="file"><a href="file3.htm">File 3</a></li>
            <li class="file"><a href="file4.htm">File 4</a></li>
            <li class="file"><a href="file5.htm">File 5</a></li>

        </li>
    <li>
            <label for="folder2">My Test 1</label> <input type="checkbox" id="folder2" /> 

            <ol>
            <li class="file"><a href="status.htm">Settings</a></li>
                <li>

                    <label for="subfolder2">test1</label> <input type="checkbox" id="subfolder2" /> 
                    <ol>
                        <li class="file"><a href="">file1</a></li>
                        <li class="file"><a href="">file2</a></li>
                        <li class="file"><a href="">file3</a></li>
                        <li class="file"><a href="">file4</a></li>
                        <li class="file"><a href="">file5</a></li>
                        <li class="file"><a href="">file6</a></li>
                    </ol>
                </li>
                <li>
                    <label for="subfolder2">test2</label> <input type="checkbox" id="subfolder2" /> 
                    <ol>
                        <li class="file"><a href="">file1</a></li>
                        <li class="file"><a href="">file2</a></li>
                        <li class="file"><a href="">file3</a></li>
                        <li class="file"><a href="">file4</a></li>
                        <li class="file"><a href="">file5</a></li>
                        <li class="file"><a href="">file6</a></li>
                    </ol>
                </li>
                <li>
                    <label for="subfolder2">test3</label> <input type="checkbox" id="subfolder2" /> 
                    <ol>
                        <li class="file"><a href="">file1</a></li>
                        <li class="file"><a href="">file2</a></li>
                        <li class="file"><a href="">file3</a></li>
                        <li class="file"><a href="">file4</a></li>
                        <li class="file"><a href="">file5</a></li>
                        <li class="file"><a href="">file6</a></li>
                    </ol>
                </li>
    </li>
    <li>
            <label for="folder2">My Test 2</label> <input type="checkbox" id="folder2" /> 

            <ol>
            <li class="file"><a href="status.htm">Settings</a></li>
                <li>

                    <label for="subfolder2">test1</label> <input type="checkbox" id="subfolder2" /> 
                    <ol>
                        <li class="file"><a href="">file1</a></li>
                        <li class="file"><a href="">file2</a></li>
                        <li class="file"><a href="">file3</a></li>
                        <li class="file"><a href="">file4</a></li>
                        <li class="file"><a href="">file5</a></li>
                        <li class="file"><a href="">file6</a></li>
                    </ol>
                </li>
                <li>
                    <label for="subfolder2">test2</label> <input type="checkbox" id="subfolder2" /> 
                    <ol>
                        <li class="file"><a href="">file1</a></li>
                        <li class="file"><a href="">file2</a></li>
                        <li class="file"><a href="">file3</a></li>
                        <li class="file"><a href="">file4</a></li>
                        <li class="file"><a href="">file5</a></li>
                        <li class="file"><a href="">file6</a></li>
                    </ol>
                </li>
                <li>
                    <label for="subfolder2">test3</label> <input type="checkbox" id="subfolder2" /> 
                    <ol>
                        <li class="file"><a href="">file1</a></li>
                        <li class="file"><a href="">file2</a></li>
                        <li class="file"><a href="">file3</a></li>
                        <li class="file"><a href="">file4</a></li>
                        <li class="file"><a href="">file5</a></li>
                        <li class="file"><a href="">file6</a></li>
                    </ol>
                </li>
    </li>
</body>
</html> 
```

我的 _styles.css 文件具有以下内容：

```
/* Just some base styles not needed for example to function */
*, html { font-family: Verdana, Arial, Helvetica, sans-serif; }

body, form, ul, li, p, h1, h2, h3, h4, h5
{
    margin: 0;
    padding: 0;
}
body { background-color: #606061; color: #ffffff; margin: 0; }
img { border: none; }
p
{
    font-size: 1em;
    margin: 0 0 1em 0;
}

html { font-size: 100%; /* IE hack */ }
body { font-size: 1em; /* Sets base font size to 16px */ }
table { font-size: 100%; /* IE hack */ }
input, select, textarea, th, td { font-size: 1em; }

/* CSS Tree menu styles */
ol.tree
{
    padding: 0 0 0 30px;
    width: 300px;
}
    li 
    { 
        position: relative; 
        margin-left: -15px;
        list-style: none;
    }
    li.file
    {
        margin-left: -1px !important;
    }
        li.file a
        {
            background: url(document.png) 0 0 no-repeat;
            color: #fff;
            padding-left: 21px;
            text-decoration: none;
            display: block;
        }
        li.file a[href *= '.pdf']   { background: url(document.png) 0 0 no-repeat; }
        li.file a[href *= '.html']  { background: url(document.png) 0 0 no-repeat; }
        li.file a[href $= '.css']   { background: url(document.png) 0 0 no-repeat; }
        li.file a[href $= '.js']        { background: url(document.png) 0 0 no-repeat; }
    li input
    {
        position: absolute;
        left: 0;
        margin-left: 0;
        opacity: 0;
        z-index: 2;
        cursor: pointer;
        height: 1em;
        width: 1em;
        top: 0;
    }
        li input + ol
        {
            background: url(toggle-small-expand.png) 40px 0 no-repeat;
            margin: -0.938em 0 0 -44px; /* 15px */
            height: 1em;
        }
        li input + ol > li { display: none; margin-left: -14px !important; padding-left: 1px; }
    li label
    {
        background: url(folder-horizontal.png) 15px 1px no-repeat;
        cursor: pointer;
        display: block;
        padding-left: 37px;
    }

    li input:checked + ol
    {
        background: url(toggle-small.png) 40px 5px no-repeat;
        margin: -1.25em 0 0 -44px; /* 20px */
        padding: 1.563em 0 0 80px;
        height: auto;
    }
        li input:checked + ol > li { display: block; margin: 0 0 0.125em;  /* 2px */}
        li input:checked + ol > li:last-child { margin: 0 0 0.063em; /* 1px */ } 
```

该页面似乎正确显示，除了左侧的菜单显示一个复选框，它不应该并且应该与 + 或 - 图标一起释放。

如果我自己打开menu.htm，它会正确显示

![在此处输入图像描述](../Images/192642096181aea9357dafa9caaa748d.png)

但是，当我查看我的 index.htm 页面（在 iframe 中加载菜单）时，它没有正确显示菜单，如下所示：

![在此处输入图像描述](../Images/a942046e48ba841e311928e8fc5583e5.png)

但是，只要我添加以下代码，它就会正确显示菜单：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"> 
```

但是，它没有使用我的 win_resize 函数正确显示我的文档高度。

我猜最后一段代码是阻止我的文档高度代码显示正确的高度。

我需要该功能，以便它可以在页面上正确显示我的菜单框架。

有谁知道我哪里出错了，因为它本身可以正常工作，但是一旦我从 iframe 调用它，它就无法正确显示？

我在我的函数中使用正确的代码来完整地获取文档高度，或者是否有一个 CSS 可以用来获取文档高度？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T01:40:34.337

希望您已准备好接受长篇回答:) 关于为什么您会以自己的方式处理事情，但会将此作为您正在从事的项目的限制，我有很多问题。/*咳嗽*/为什么没有jQuery或类似的？/*咳嗽*/

**首先是您的 iFrame 高度问题：** 我只是更改了您的代码以包含经过测试的跨浏览器高度检测功能，如下所示

```
<script language="javascript">

    function win_resize()
    {   
        var _docHeight = getDocHeight();
        document.getElementById('leftMenu').height = _docHeight - 90;
    }

    //This fixes your calculation of height issue
    //Cross browser doc height calculator **Credit to http://james.padolsey.com**
    function getDocHeight() {
        var D = document;
        return Math.max(
            Math.max(D.body.scrollHeight, D.documentElement.scrollHeight),
            Math.max(D.body.offsetHeight, D.documentElement.offsetHeight),
            Math.max(D.body.clientHeight, D.documentElement.clientHeight)
        );
    }
</script> 
```

我还为这个函数添加了一个 onload 和 onresize 调用，这样你就可以在正确的高度初始化，并重新调整到正确的高度......

```
<body onload="win_resize()" onresize="win_resize()"> 
```

* * *

**其次，您的伪“已检查”类将无法在 ie8 或更低版本中运行**- 我假设您正在尝试支持它，因为我只在 ie 中看到了可见的复选框错误。

为了解决这个问题，我添加了一些基本脚本来将类名切换到选定的输入......

```
<script type="text/javascript">
    function getCheckedState(e){
    var inputId = e.id;
    var getCheckedState = document.getElementById(inputId).checked;

    if (getCheckedState == true) {
        /*if checked add class*/
        e.className += " " + 'checked';
    } else {
        /*if not checked set class to empty string*/
        e.className = "";
    }
}

</script> 
```

您还需要将 .checked 类添加到您的 css 中的相关样式中，例如

```
li input:checked + ol, li input.checked + ol 
```

* * *

**第三，那些讨厌的可见复选框** 这很简单，只需在输入的 css 中添加不透明度和不透明度过滤器即可。

```
li input {
cursor:pointer;
...
opacity: 0;
filter:alpha(opacity=0);
} 
```

* * *

**最后——也许是最重要的**

我会认真地质疑很多关于这个构建以及这个导航是如何工作的。当然，您可以使用其他方法，使用原生 html 元素和跨浏览器测试的 JS 库（如 jQuery）来获得更好的兼容性。更不用说比 iFrame 更好的构造方法了！

再说一遍 - 我假设你只是在这里受到限制。

我觉得我应该指出的另一件事是我用来触发输入状态更改的“onclick”功能再次是出于兼容性考虑的选择 - 支持“onchange”功能，但直到失去 onblur 才会更新该输入使其不同步（有关[更改复选框测试页面](http://krijnhoetmer.nl/stuff/javascript/checkbox-onchange/)的更多信息）

我希望这个答案能帮助你，即使它的一部分让你朝着正确的方向前进。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T09:16:24.623

使用重置的 css 文件。[http://meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/)

猜猜它会帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T07:29:17.567

该示例非常复杂，但看起来可能是这一行：

```
li input + ol > li { display: none; margin-left: -14px !important; padding-left: 1px; } 
```

（或对输入边距值的其他修改）

尝试修改输入的边距值，看看它是否提供了所需的结果。我的猜测是 iframe 在添加时将输入值推向左侧太远。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-11T18:17:05.593

尝试使您的所有 id 唯一，复选框 2 更改其中两个，您可能会没事，因为 ie 非常喜怒无常。标签的标签也是HTML5，您现在应该知道，即讨厌。

# ssis - SSIS 包配置需要重新配置

> ID：12560410
> 
> 赞同：0
> 
> 时间：2012-09-24T07:14:32.740
> 
> 标签：ssis

我在客户端服务器环境中工作.. 我有一个带有 xml 配置的 SSIS 包，当我在客户端上配置它并执行它时，它可以找到，但是当我复制该配置的包并尝试从另一个客户端执行它时没有执行并且需要重新配置，重新配置后它可以工作找到......我也尝试使用sql server配置并且同样的问题也存在......

有什么方法可以让我在一台电脑上配置 ssis 包并且可以从任何客户端执行，这意味着当我将它复制到另一个客户端时不需要重新配置......

提前致谢....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T20:02:28.093

创建 xml 文件配置时，您提供了到该文件的连接。但是，当您将包移动到新客户端时，您还必须拥有配置连接。更不用说配置了，您需要为您引用的每个对象正确设置连接。

那是我能理解为什么你的包裹失败的唯一原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T21:35:25.430

> 从任何客户端执行

很可能不是。您将需要有效权限（数据库、文件系统、??）来执行您的包所执行的操作，并且简单地复制包和配置文件不会自动创建这些权限。

您可能想要创建一个 SSIS 代理帐户，向代理授予必要的权限，然后使用代理运行包。如果这都是内部的，您可以在需要运行包的任何客户端系统上启用代理帐户。如果您将其分发给客户，请向他们提供设置代理的说明，他们也可以这样做。

# c# - WinRT 应用程序和区域设置。根据用户的区域设置格式化日期和数字的正确方法？

> ID：12560412
> 
> 赞同：21
> 
> 时间：2012-09-24T07:14:58.130
> 
> 标签：c#, xaml, windows-runtime, currentculture, windows-store-apps

我在 Windows 8 Metro 应用程序（XAML 和 C#）中遇到了一些关于用户区域设置的问题。似乎这些**应用程序不会尊重用户的区域设置**，因此即使您的 Windows 8 设置为以芬兰格式显示日期和时间，这些应用程序仍将使用美国格式显示它们。但这是一个如此大的问题，一定有我遗漏的东西吗？

为了测试这一点，我首先创建了一个**WPF-application**。该应用程序只打印出 CurrentCulture 和格式化的 DateTime.Now：

```
 private void Culture_Loaded_1(object sender, RoutedEventArgs e)
    {
        this.Culture.Text = System.Globalization.CultureInfo.CurrentCulture.DisplayName;
    }

    private void Date_Loaded_1(object sender, RoutedEventArgs e)
    {
        this.Date.Text = DateTime.Now.ToString();
    } 
```

这是我的默认区域设置： ![区域设置](../Images/e8803a7576dc503ecb774b6d4bce370d.png)

运行时，应用程序以芬兰语格式显示日期：

![芬兰语格式](../Images/eb74eee1d53a2a5a51dc619eb486adfa.png)

然后我将区域设置更改为美国： ![美国地区设置](../Images/1a0fd6ead0c2fa454e4808087b3c9a31.png)

当应用程序再次运行时，文化和格式发生了变化： ![美国 wpf 格式](../Images/4d619e56b78808223b5a7a18f446aef2.png)

这是**我期望**的一切工作，这也是我期望 WinRT 应用程序工作的方式。

因此，下一步，我使用相同的代码创建了一个 WinRT（XAML 和 C#）应用程序，并将区域设置恢复为芬兰语。问题：

![Winrt 格式化](../Images/eaca204fab2512f3cfa121bfe2a1c0c3.png)

即使我通过区域设置定义了格式应该是“芬兰语”，WinRT 应用程序也会使用美国格式显示日期时间。然后我修改了应用程序的项目文件并将**fi-FI 设为默认语言**：

![默认语言](../Images/dbd2f3401b504d70870b92792f4ccead.png)

此更改还修改了应用程序的文化：

![芬兰语 winrt 格式](../Images/d3b033cafc7ce4490e49bc8348854ea2.png)

奇怪的。我将默认语言更改回其默认值，并且格式恢复为美国。然后我在项目中创建了文件夹“Strings - fi-FI”，并在项目中添加了一个**空的“Resources.resw”**。这个空文件似乎就足够了，因为我现在正在获取芬兰语格式：

![资源文件](../Images/d10b474c515e021118cf76bd1f672b32.png) ![芬兰语格式](../Images/5928e09c19f7b19aa8814fd45290b9b5.png)

一旦我删除了空的资源文件，格式就会恢复为 US：

![资源文件已移除](../Images/ff823467cd7d4ab4a2e20a9e487ea4bd.png) ![美国格式化winrt](../Images/b29a7a9ad7f3e08c7f4bee3e57c9fb7c.png)

很奇怪。

这会导致几个问题，但我认为主要的问题是：WinRT 应用程序是否有意不遵循 WPF 应用程序那样的用户区域设置？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-29T23:02:01.420

已经有一段时间了，但这个问题还没有完全回答，所以让我分享一下我的小研究。Depechie 基本上是对的，但他只提供了一个链接，并不确定。

是的，这种意想不到的变化是故意的。我们不应再使用 CultureInfo，因为它包含遗留代码，而微软希望我们改用 Windows.Globalization API。

要获取当前区域，我们可以使用：

```
GeographicRegion userRegion = new GeographicRegion();
string regionCode = userRegion.CodeTwoLetter; 
```

但我注意到它只包含区域信息，没有语言代码。要获得语言，我们可以使用：

```
string langRegionCode = Windows.Globalization.Language.CurrentInputMethodLanguageTag; // depends on keyboard settings
List<string> langs = Windows.System.UserProfile.GlobalizationPreferences.Languages; // all user  languages, like in languages control panel
List<string> applicationlangs = Windows.Globalization.ApplicationLanguages.Languages; // application languages (user languages resolved against languages declared as supported by application) 
```

如果语言有方言，它们会以语言区域格式返回 BCP47 语言标签，如“en-US”，如果语言没有主要方言，则返回“pl”之类的语言。

我们还可以设置一种主要语言来覆盖所有其他语言：

```
Windows.Globalization.ApplicationLanguages.PrimaryLanguageOverride = "en-US"; 
```

（这是一个持久设置，应该在用户请求时使用）

还有用于日期、时间和数字的新 API：

```
Windows.Globalization.DateTimeFormatting.DateTimeFormatter dtf = new DateTimeFormatter("longdate", new[] { "en-US" }, "US", CalendarIdentifiers.Gregorian, ClockIdentifiers.TwentyFourHour);
string longDate = dtf.Format(DateTime.Now);

Windows.Globalization.NumberFormatting.DecimalFormatter deciamlFormatter = new DecimalFormatter(new string[] { "PL" }, "PL");
double d1 = (double)deciamlFormatter.ParseDouble("2,5"); // ParseDouble returns double?, not double 
```

Windows.Globalization API 中确实有更多内容，但我认为这为我们提供了总体思路。进一步阅读：

*   日期和时间格式示例： [http ://code.msdn.microsoft.com/windowsapps/Date-and-time-formatting-2361f348/sourcecode?fileId=52070&pathId=561085805](http://code.msdn.microsoft.com/windowsapps/Date-and-time-formatting-2361f348/sourcecode?fileId=52070&pathId=561085805)
*   数字格式和解析示例：
    [http ://code.msdn.microsoft.com/windowsapps/Number-formatting-and-bb10ba3d/sourcecode?fileId=52249&pathId=1462911094](http://code.msdn.microsoft.com/windowsapps/Number-formatting-and-bb10ba3d/sourcecode?fileId=52249&pathId=1462911094)
*   msdn 上还有一篇不错的文章，标题为“如何使用模式来格式化日期和时间”，但我只能添加 2 个链接

您还可以在 Windows 8 开发中心论坛上找到一些有关该问题的主题以及一些 Microsoft 员工的答案，但它们主要将您发送到文档。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-07T21:43:28.797

这是故意的。微软正在不再强制应用程序使用操作系统的语言。相反，每个应用程序使用应用程序声明的信息（清单语言，可在 Windows.Globalization.ApplicationLanguages.ManifestLanguages 观察）和用户声明的信息（用户语言，可在 Windows.System.UserProfile.GlobalizationPreferences.Languages 观察）来确定如何显示资源和全球化的日期和时间。这组语言称为应用程序语言（可在 Windows.Globalization.ApplicationLanguages.Languages 中观察到）。您看到的行为是因为您在摆弄用户语言和清单语言，您将获得不同的应用程序语言。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T17:13:37.633

难道我们现在需要查询其他类吗？就像这里给出的例子：[http ://code.msdn.microsoft.com/windowsapps/Globalization-preferences-6654eb36/sourcecode?fileId=52104&pathId=236099476](http://code.msdn.microsoft.com/windowsapps/Globalization-preferences-6654eb36/sourcecode?fileId=52104&pathId=236099476)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-07T19:33:09.260

尽管两年前有人问过这篇文章，但它似乎仍然具有相关性。我只是在寻找关于同一件事的答案时偶然发现了它。我还想在我的 WP8.1 WinRT 应用程序中以区域格式显示日期。此处发布的信息有所帮助，但将其拼凑起来有点困难。

这就是我想出的，它似乎对我有用，作为我需要的答案：

```
using Windows.Globalization;
using Windows.Globalization.DateTimeFormatting;

private string FormatDate(int year, int month, int day)
{
    GeographicRegion userRegion = new GeographicRegion();
    string regionCode = userRegion.CodeTwoLetter;
    var formatter = new DateTimeFormatter("year month day", new[] { regionCode });
    DateTime dateToFormat = new DateTime(year, month, day);
    var formattedDate = formatter.Format(dateToFormat);
    return formattedDate;
} 
```

# java - 错误 Red5 服务器流式传输包含 Java 中的封面或专辑封面的文件

> ID：12560414
> 
> 赞同：0
> 
> 时间：2012-09-24T07:15:00.570
> 
> 标签：java

我正在使用 red5 服务器来传输 mp3 文件或其他格式的文件。如果我的文件不包含任何封面艺术或专辑封面，它工作正常。如果它包括封面艺术或专辑艺术，我会得到以下例外。

```
[ERROR] [pool-4-thread-2] org.red5.server.messaging.InMemoryPullPullPipe - exception when pulling message from provider
java.lang.IllegalArgumentException: null
    at java.nio.Buffer.position(Buffer.java:235) [na:1.6.0_20]
    at org.apache.mina.core.buffer.AbstractIoBuffer.position(AbstractIoBuffer.java:368) [mina-core-2.0.0-RC1.jar:na]
    at org.red5.io.mp3.impl.MP3Reader.analyzeKeyFrames(MP3Reader.java:603) [red5.jar:na]
    at org.red5.io.mp3.impl.MP3Reader.<init>(MP3Reader.java:242) [red5.jar:na]
    at org.red5.io.mp3.impl.MP3.getReader(MP3.java:48) [red5.jar:na]
    at org.red5.server.stream.provider.FileProvider.init(FileProvider.java:232) [red5.jar:na]
    at org.red5.server.stream.provider.FileProvider.pullMessage(FileProvider.java:126) [red5.jar:na]
    at org.red5.server.messaging.InMemoryPullPullPipe.pullMessage(InMemoryPullPullPipe.java:70) [red5.jar:na]
    at org.red5.server.stream.PlayEngine$PullAndPushRunnable.run(PlayEngine.java:1538) [red5.jar:na]
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471) [na:1.6.0_20]
    at java.util.concurrent.FutureTask$Sync.innerRunAndReset(FutureTask.java:351) [na:1.6.0_20]
    at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:178) [na:1.6.0_20]
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:165) [na:1.6.0_20]
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:267) [na:1.6.0_20]
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) [na:1.6.0_20]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) [na:1.6.0_20]
    at java.lang.Thread.run(Thread.java:636) [na:1.6.0_20] 
```

# php - 如果没有元描述，我如何使用 p 标签的 20 个字符

> ID：12560417
> 
> 赞同：4
> 
> 时间：2012-09-24T07:15:22.977
> 
> 标签：php

是的，我已经建立了一个网络爬虫。它扫描链接、标题和元描述。它扫描链接并将它们保存在 $link 中。它扫描链接的标题并将它们保存在 newArray 中的 [title] 中。现在在这个数组中，我想让它知道如果没有元标记，它可以扫描第一个 p 标记并使用它。唯一的问题是它似乎根本没有保存任何信息。

```
function getMetas($link) {
$str1 = file_get_contents($link);    

    if (strlen($str1)>0) {
 preg_match_all( '/<meta.*?name=("|\')description("|\').*?content=("|\')(.*?)("|\')/i', $str1, $description);
   if (count($description) > 1) {
    return $description[4];   
   }

   }
 return '';
   if ($description == '') {
$html = file_get_contents($link);    
preg_match('%(<p[^>]*>.*?</p>)%i', $html, $re);
$res = get_custom_excerpt($re[1]);
echo "\n";
echo $res;
echo "\n";

}

    function get_custom_excerpt($return, $option = 30, $sentance = false) {
    $marks = Array(".","!","?");

   $return = strip_tags($return);

  if($sentance == true) {
$start = implode(" ", array_slice(preg_split("/\s+/", $return), 0, $option ));
$start .= ' ';
$end = implode(" ", array_slice(preg_split("/\s+/", $return), $option));

$cut = Array();
foreach($marks AS $m => $mark){
  $mark = strpos($end, $mark);
  if($mark != false) $cut[$m] = $mark;
}

if($cut[0] != "")
  $chop = min($cut);
    else
      $chop = $option;
$rest = substr($end, 0, $chop);

$key = array_search($chop, $cut);

$return = $start.$rest;

   }else{
$return = implode(" ", array_slice(preg_split("/\s+/", $return), 0, $option));
   }
  $return .= $marks[$key];

  return $return; 
   }  

   }

 $output = Array();

 foreach ($links as $thisLink) {
 $output[] = array("link" => $thisLink, "title" => Titles($thisLink), "description" => getMetas($thisLink), getMetas($res));
 } 
  print_r($output); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T07:29:53.863

您的正则表达式可能不起作用。属性可能不是您想要的顺序。它可能是`<meta name="" content="">`或`<meta content="" name="">`。

为什么不使用 XML 解析器？大多数 HTML 都足以用于解析。

请看一下[PHP Parse HTML 代码](https://stackoverflow.com/questions/3627489/php-parse-html-code)

# c# - C# asp.net 中 WebForm 中 Winform 的 Textbox.KeyDown 的备用事件是什么？

> ID：12560418
> 
> 赞同：0
> 
> 时间：2012-09-24T07:15:23.760
> 
> 标签：c#, asp.net, textbox, keydown

在 winfrom 应用程序中，我可以拥有

```
textbox1.keydown 
```

事件，但我想在 webform (asp.net) 中实现相同的目标，那么我该怎么做呢？我需要从数据库中检索有关此事件的数据...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T07:24:36.390

您可以使用 onkeydown 事件，然后该事件将调用您的客户端函数。在客户端函数内部，您可以进行 ajax 调用以从数据库中填充数据。

```
 <asp:TextBox ID="txtName" runat="server" onkeydown="javascript: callMe();" />

    function callMe()
    {
        $.ajax({
          url: 'URLOFTHEFUNCTION',
          type: 'GET',
          cache: false,
          success: function (result) {
              alert(result)
          }
       });
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T07:38:37.353

在 Win Forms 中，您使用正在运行的机器并与之交互，因为您编写 smth`keydown`事件被触发，但在 Web 表单中，一旦客户端文件从服务器发送到多个客户端（例如 stackoverflow.com 及其用户），则没有服务器可以在没有 javascript 的情况下触发附带事件。**为了实现您的目标**，我建议您在 JS 中捕获 keyUp 事件并通过[回调](http://msdn.microsoft.com/en-us/library/ms178208%28v=vs.100%29.aspx)发送数据，然后将所需的数据从服务器返回到客户端，并在 JS 中处理该数据。
**第二种方法** 是`protected void TextBox1_**TextChanged**(object sender, EventArgs e)` 使用此事件，但它会在每次按键时刷新页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T07:39:37.307

在 Web 应用程序中，您在客户端执行一些操作，而在服务器中执行一些操作。

我现在不知道你取得了什么成就，但我认为在大多数情况下，keydown 事件将出现在客户端中。

所以，有一个很棒的库叫做 JQUERY (javascript) 可以帮助你做这种工作人员。

查看[KEYDOWN的文档](http://api.jquery.com/keydown/)

我为你写了一个[例子](http://jsfiddle.net/TXqKK/)

HTML 代码

```
<input id="txtBox" type="text" />​ 
```

JQUERY (javascript) 代码

```
$(document).ready(function() {

$("#txtBox").keydown(function() {   
   $.ajax({
   url: "URLTOTHEFUNCTIONINTHESERVER",
   type: 'GET',
   cache: false
   }).done(function( html ) {
    alert(html);
    });
});

});​ 
```

OK解释代码

*   第一行我正在检查文件是否准备好
*   然后我缓存keydown事件并触发一个函数
*   在函数内部，我正在调用 jquery 的 ajex 函数，在函数内部，您将看到一个“完成”函数和一个名为 html 的 var，它保存从服务器返回的内容

# mongodb - 如何通过 Id 在 MongoDB 中查找元素？（斯卡拉/电梯）

> ID：12560420
> 
> 赞同：1
> 
> 时间：2012-09-24T07:15:34.283
> 
> 标签：mongodb, lift

我正在尝试通过 id 从 MongoDB 中查找值：

```
var id = S.param("id") openOr ""
val qry = QueryBuilder.start("id").is(id).get
def render = {
    val items = Delegacja.findAll(qry)   

    ".my_list *" #> items.map(e => 
      ".my_list_item" #> <li>{e.gdzie_od1}</li> &
      ".my_list_item_id" #> <li>{e.id}</li>
    )
} 
```

模型：

```
package code.model
import _root_.net.liftweb.record.field._
import net.liftweb.mongodb.record._
import net.liftweb.mongodb.record.field.ObjectIdPk

class Delegacja private() extends MongoRecord[Delegacja] with ObjectIdPk[Delegacja]{
  def meta = Delegacja

  object gdzie_od1 extends StringField(this, 30)
  object gdzie_do1 extends StringField(this, 30)
  object data_od1 extends StringField(this, 500)
  object data_do1 extends StringField(this, 500)
}

object Delegacja extends Delegacja with MongoMetaRecord[Delegacja] 
```

或只是`val items = Delegacja.find("Id" -> id)`或`val items = Delegacja.find("Id" -> id.toString)`或`val items = Delegacja.find("id", id)`没有发现，ID 很好，当我按某个名称查找时它可以，但按 id 没有结果。有人可以告诉我我做错了什么吗？

* * *

嗯，我想有一些线索。（而且真的`find`改变`id`为`_id`;））

当我在做：

```
val md1 = Delegacja.createRecord.gdzie_od1(gdzie_od1).gdzie_do1(gdzie_do1).save
S.notice(md1.id.is.toString)
val md = Delegacja.find("_id", md1.id.is.toString)
S.notice(md.is.toString) 
```

我从中得到`Empty`，`S.notice(md.is.toString)`但是当我更改`val md = Delegacja.find("_id", md1.id.is.toString)`为没问题时`val md = Delegacja.find("_id", md1.id.is)`，`viewitem.scala`我需要以某种方式将`string ( id )`我从链接中获得的参数转换为`oibjectid`，如何处理它？

```
class ViewItem {

  var id = S.param("id") openOr ""
          val qry = QueryBuilder.start("_id").is(id).get
  def render = {

    val items = Delegacja.find("_id", id) // THIS id.ToObjectIdPK some how ..
     S.notice(items.toString)

    ".my_list *" #> items.map(e => 
      ".my_list_item" #> <li>{e.gdzie_od1}</li> &
      ".my_list_item_id" #> <li>{e.id}</li>
    )
  }
...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T08:11:03.420

Ah mean while I get answer:

need new import:

```
import org.bson.types.ObjectId 
```

And :

```
 val items = Delegacja.find("_id", new ObjectId(id)) 
```

This is the needed conersion ;]

# c# - 需要从文本框创建文件名

> ID：12560424
> 
> 赞同：-2
> 
> 时间：2012-09-24T07:15:46.330
> 
> 标签：c#

我制作了一个程序，我想在其中将文件从一个文件夹复制到另一个文件夹。但我想从文本框中命名该文件。我正在使用下面的代码。请帮我

```
FileInfo receipt = new FileInfo(@"C:\ssds\Receipt.xml");
receipt.CopyTo(@"C:\");
MessageBox.Show("XML Is created"); 
```

在`receipt.CopyTo`我需要从文本框中写下名称。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T07:17:37.180

```
receipt.CopyTo(Path.Combine(@"C:\", textBox1.Text)); 
```

如果您只想将文件复制到指定的文件夹，您可以只从该文本框中提取文件名：

```
receipt.CopyTo(Path.Combine(@"C:\", Path.GetFileName(textBox1.Text))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T07:17:42.613

如果只是添加文件名，则使用[string.Format](http://msdn.microsoft.com/en-us/library/xh1dzhdx.aspx)

```
receipt.CopyTo(string.Format(@"C:\{0}",textBox1.Text)); 
```

或[stringConcat](http://msdn.microsoft.com/ru-ru/library/0wkb0y3w.aspx)

```
receipt.CopyTo(string.Concat(@"C:\",textBox1.Text)); 
```

如果它可能包含部分路径或绝对路径（在您使用某些[SaveFileDialog](http://msdn.microsoft.com/ru-ru/library/system.windows.forms.savefiledialog.aspx)的情况下），那么 Darin 使用[Path](http://msdn.microsoft.com/ru-ru/library/system.io.path.aspx)类的答案就是您所需要的

# sql - 在 ms 访问中使用多个 where 条件计数

> ID：12560426
> 
> 赞同：1
> 
> 时间：2012-09-24T07:15:51.713
> 
> 标签：sql, ms-access, count

我有以下查询；

```
Select count(*) as poor
from records where deviceId='00019' and type='Poor' and timestamp between #14-Sep-2012 01:01:01# and #24-Sep-2012 01:01:01# 
```

桌子就像；ID。deviceId、类型、时间戳

数据就像；

数据就像；

```
1, '00019', 'Poor', '19-Sep-2012 01:01:01'
2, '00019', 'Poor', '19-Sep-2012 01:01:01'
3, '00019', 'Poor', '19-Sep-2012 01:01:01'
4, '00019', 'Poor', '19-Sep-2012 01:01:01' 
```

我正在尝试计算具有特定特定类型的设备。

请帮助..访问总是返回错误的数据。它返回 1 而 00019 有 4 个穷人条目

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T16:12:31.593

类型和时间戳都是保留字，因此请在查询中将它们括在方括号中，如下所示：`[type]`和`[timestamp]`. 我怀疑这些保留字是您问题的原因，但是很难准确预测保留字何时会导致查询问题，因此只需使用方括号排除这种可能性。

除此之外，存储的文本值有时包含额外的不可见字符。检查存储的文本值的长度以查看是否有任何比预期的长。

```
SELECT
    Len(deviceId) AS LenOfDeviceId,
    Len([type]) AS LenOfType,
    Len([timestamp]) AS LenOfTimestamp
FROM records; 
```

在评论中，您在存储值中提到了空格（ASCII 值 32）。我一直认为我们正在处理其他不可打印/不可见的字符。如果在存储`deviceId`值的开头和/或结尾有一个或多个实际空格字符，该`Trim()`函数将丢弃它们。因此，此查询将在两列中为您提供不同的长度数字：

```
SELECT
    Len(deviceId) AS LenOfDeviceId,
    Len(Trim(deviceId)) AS LenOfDeviceId_NoSpaces
FROM records; 
```

如果存储的值*还*可以在字符串中包含空格（不仅仅是在开头和/或结尾处），`Trim()`则不会删除那些。在这种情况下，您可以使用该`Replace()`函数丢弃所有空格。但是请注意，使用的查询`Replace()`必须在 Access 应用程序会话中运行——您不能从 Java 代码中使用它。

```
SELECT
    Len(deviceId) AS LenOfDeviceId,
    Len(Replace(deviceId, ' ', '')) AS LenOfDeviceId_NoSpaces
FROM records; 
```

如果该查询在两列中返回相同长度的数字，那么我们处理的不是实际的空格字符（ASCII 值 32）……而是一些看起来“类似空格”的其他类型的字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T07:18:55.250

如果您想计算具有特定类型的设备而不考虑设备 ID，请使用以下命令：

```
Select count(*) as excellent
from records where type='Poor' 
```

如果您想计算具有特定设备 ID 的设备而不考虑类型，请使用以下命令：

```
Select count(*) as excellent
from records where deviceId='00019' 
```

# java - 从 Android 向 PLC 发送布尔值

> ID：12560429
> 
> 赞同：6
> 
> 时间：2012-09-24T07:16:13.223
> 
> 标签：java, android, boolean, plc, modbus

我能够与 PLC 建立连接以从中读取数据。现在有一个问题，我必须编写一种方法来修改来自 PLC 的数据。为此，我必须向 PLC 发送两个值：一个 int 值和一个 boolean 值。我通过 net.wimpi.modbus 包中的类解决了 int 值。但是当谈到布尔值时，我不知道该怎么做。

如果有人和我现在有同样的问题，你能否给我一个参考，我可以找到一个解决方案或一个非常好的教程的链接来解决我的问题？[有人在这个问题](https://stackoverflow.com/questions/12490661/modbus-tcp-andriod-application)中发布了几个链接，但它让我看到了与与 PLC 的通信以及如何处理 PLC 的数据没有太大关系的教程。

**编辑**

我与 Modicon M340 PLC 建立了连接，我使用 net.wimpi.modbus 包的类进行连接。`ModbusTCPTransaction`我通过类和在我的代码中建立连接，并通过类和`TCPMasterConnection`读取值。`ReadMultipleRegistersRequest``ReadMultipleRegistersResponse`

我为连接制作的代码：

```
 private InetAddress m_Address;
private ModbusTCPTransaction m_Transaction = null;
private TCPMasterConnection m_Connection = null;

int port = Modbus.DEFAULT_PORT;
private Activity activity;

public ModbusConnection(Activity activity, String ip)
{
    this.activity = activity;

    try {
        m_Address = InetAddress.getByName(ip); 
    } catch (UnknownHostException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } // the slave'saddress
}

public void getTransaction(InetAddress inet) throws Exception
{
    /*Variables for the reading of the PLC data*/
    int port = Modbus.DEFAULT_PORT;

    /*Data initialization for the reading of the PLC data*/
    m_Connection = new TCPMasterConnection(inet);
    m_Connection.setPort(port);
    m_Connection.connect();
    m_Transaction = new ModbusTCPTransaction(m_Connection);
} 
```

为了读取这些值，我一直调用下一个代码。我只通过从 PLC 上声明的偏移量读取的字来完成读取和写入 int、String 和 float 值：

```
 private ReadMultipleRegistersResponse readValues(int offset, int count) 
{
    ReadMultipleRegistersRequest rReq = null; // the request
    ReadMultipleRegistersResponse rRes = null; // the response

    try {

        rReq = new ReadMultipleRegistersRequest(offset, count);
        m_Transaction.setRequest(rReq);
        m_Transaction.execute();
        rRes = (ReadMultipleRegistersResponse) m_Transaction.getResponse();

    } catch (Exception e) {
        e.printStackTrace();
        Log.i("AsyncTask", "doInBackground: Exception");
    }
    return rRes;    
} 
```

**编辑 2**

我想我完成了我想要的。我使用 4 个类来读取线圈：

`ReadCoilsRequest` `ReadCoilsResponse` `WriteMultipleCoilsRequest` `WriteMultileCoilsResponse`

我所做的是将线圈读写到 PLC 中的两种方法：

```
 private ReadCoilsResponse readBytes(int offset, int count) 
{
    ReadCoilsRequest rReq = null; // the request
    ReadCoilsResponse rRes = null; // the response

    try {

        rReq = new ReadCoilsRequest(offset, count);
        m_Transaction.setRequest(rReq);
        m_Transaction.execute();
        rRes = (ReadCoilsResponse) m_Transaction.getResponse();

    } catch (Exception e) {
        e.printStackTrace();
        Log.i("AsyncTask", "doInBackground: Exception");
    }
    return rRes;    
}

    public void writeBytes(int wordNumber, BitVector b) {
    try {               
        WriteMultipleCoilsRequest wReq = null; //
        WriteMultipleCoilsResponse wRes = null; //

        wReq = new WriteMultipleCoilsRequest(211, b);
        m_Transaction.setRequest(wReq);
        m_Transaction.execute();    
    } catch (Exception e) {
        e.printStackTrace();
        Log.i("AsyncTask", "doInBackground: Exception");
    }
} 
```

另外，我创建了一个使用 Coils 类读取 BitVector 变量的方法：

```
 public BitVector readBitVector(int offset, int count) 
{
    BitVector myBitVector;  

    ReadCoilsResponse rRes = readBytes(offset, count);
    rRes = (ReadCoilsResponse) m_Transaction.getResponse();
    myBitVector = rRes.getCoils();

    return myBitVector; 
} 
```

在此之后，我用来将位设置为 1 或 0 的方法是在我的代码中使用来自 net.wimpi.modbus.util 包的 BitVector 类的本机函数：

```
test.setBit(2, true); 
```

注意：重要的是要记住，每次您要向 PLC 读取或写入值时，最好的方法是打开关闭与 PLC 的连接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T07:24:51.027

我的明确答案是：您必须将寄存器视为位。因此，如果您想在代码中写入以 int 值表示的寄存器的第二位，则必须执行以下操作：

```
intValue = m_Data[1].getValue();
intValue = intValue | 2;
m_Data[1].setValue(intValue); 
```

第二行修改了我想在我的 PLC 中写入的位。

# android - 如何为 Android 应用程序开发应用内计费应用程序

> ID：12560431
> 
> 赞同：-1
> 
> 时间：2012-09-24T07:16:17.567
> 
> 标签：android, in-app

我开发了一个小型安卓应用程序。在该应用程序中，我需要订阅计费。我集成了地下城示例代码并添加了计费权限。但它仍然显示未找到项目错误。我将apk上传到开发控制台并创建了产品，然后将计费权限和地下城的示例代码添加到我的应用程序中。

在将 apk 上传到开发控制台之前，需要添加计费权限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T07:43:59.707

不是必需的。

您可能没有将产品 ID 添加到您的应用程序中，首先将 productId 添加到您的应用程序中，它可能会起作用

```
CATALOG = new CatalogEntry[] {
new CatalogEntry(monthly_product,R.string.subscription_monthly, Managed.SUBSCRIPTION),
new CatalogEntry(yearly_product, R.string.subscription_yearly,  Managed.SUBSCRIPTION), }; 
```

这里monthly_product,yearly_product 是在google play store 中创建的productId

# eclipse - 包含在 Eclipse Juno 上不起作用的目录规范

> ID：12560438
> 
> 赞同：0
> 
> 时间：2012-09-24T07:16:56.077
> 
> 标签：eclipse, include-path, rhel

我正在使用最新的 32 位 Eclipse Juno。我看过很多关于文件夹包含的帖子，但没有一个对我有用。

问题：

```
#include<iostream>  
#include<osgDB/ReadFile>
#include<osgViewer/Viewer> 
```

编译器 (GCC) 报告`"unresolved inclusion <iostream>"`ReadFile 和 Viewer 的相应未解决包含错误。

我尝试了什么来解决它：
在`Project properties > C/C++ General > Paths and symbols > Includes`. 我添加`/usr/include/c++/4.4.4/`了`all configurations`和`all languages`。这会自动导致其中的值`C/C++ Build > Settings > GCC C compiler and GCC C++ compiler's includes > include paths`包含相同的值。

未解决的包含错误仍然存​​在。

然后我尝试添加`iostream`到该`include files`部分下方的`include paths`部分。还是没用。甚至尝试在更改后关闭并重新打开 Eclipse。还是没用。

唯一的其他选择是指定有效的绝对路径：

```
#include "/home/nav/osg/osg/include/osgDB/ReadFile"
#include "/home/nav/osg/osg/include/osgViewer/Viewer"
#include "/usr/include/c++/4.4.4/iostream" 
```

但这不是正确的方法。任何人都可以帮助以正确的方式指定包含路径吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-28T16:38:59.737

我有类似的问题，它是由索引器没有使用正确的构建配置引起的。默认情况下，索引器设置为使用全局设置，而不是特定于项目的设置（我使用的是 Nsight，Nvidia 的 Eclipse 版本）。

去

> 项目属性 -> 常规 -> 索引器

打钩

> 启用项目特定设置

选择

> 使用主动构建配置

这可能与您无关。我在多台机器/操作系统上编译同一个项目，因此每个构建配置都有不同的包含路径。

# sql - sqlite 查询需要调整一下

> ID：12560439
> 
> 赞同：0
> 
> 时间：2012-09-24T07:17:01.993
> 
> 标签：sql, html, sqlite

嗨，目前我有代码，它将以 10 分钟的间隔显示最后一小时的记录总和。

```
SELECT SUM(NO_OF_ADULT) AS ADULT
     , SUM(NO_OF_ADULT_F) AS ADULT_F
     , SUM(NO_OF_CHILDREN) AS CHILDREN
     , SUM(NO_OF_CHILDREN_F) AS CHILDREN_F
     , SUM(NO_OF_SENIOR_CITIZEN) AS SENIOR
     , SUM(NO_OF_SENIOR_CITIZEN_F) AS SENIOR_F
     , SUM(NO_OF_INFANT) AS INFANT
     , SUM(NO_OF_INFANT_F) AS INFANT_F
     , SUBSTR(END_TIME_OF_SERVICE, 1, 4) || '0 - ' || SUBSTR(END_TIME_OF_SERVICE, 1, 4) || '9' AS TIME_SLOT
  FROM CLNT_RESERVATION RES
      , CLNT_ORDER ORD
      , CLNT_ORDER_CHEQUE_RESERVATION_MAPPING RM
  WHERE RES.START_DATE_OF_SERVICE ="2012-09-24"
    AND ORD.ENT_CODE="****"
    AND ORD.BRANCH_CODE="******"
    AND ORD.STATION_CODE="*******"
    AND RES.STATION_CODE=ORD.STATION_CODE 
    AND ORD.ORDER_STATUS <> 111 
    AND ORD.ORDER_ID=RM.ORDER_ID 
    AND (ORD.CREATE_TIME LIKE "2012-09-24%" OR ORD.UPDATE_TIME LIKE "2012-09-24%")
    AND ORD.STATUS_FLG ="A"
    AND ORD.DELETE_FLG="N" 
    AND RM.RESERVATION_ID = RES.RESERVATION_ID 
    AND (strftime("%H:%M", RES.END_TIME_OF_SERVICE) BETWEEN strftime("%H:%M",TIME("now","localtime","-1 hour","-00 minutes")) 
    AND strftime ("%H:%M",TIME("now","localtime")) OR strftime("%H:%M", RES.END_TIME_OF_SERVICE) BETWEEN strftime("%H:%M",TIME("now","localtime","-1 hour","-00 minutes")) 
    AND strftime("%H:%M",TIME("now","localtime")) ) 
GROUP BY 9 
```

这将给出以下输出

```
ADULT  ADULT_F  CHILDREN CHILDREN_F SENIOR SENIOR_F INFANT INFANT_F  TIME_SLOT

 0       0         0       0          1        1      0      0     12:00 - 12:09
 1       0         0       0          0        1      0      0     12:30 - 12:39 
```

现在您可以看到 12:10 - 12:29 的值不在数据库中，因此也不会显示。

我期待的是： - 1）需要创建行并在所有字段中简单地填写 0。(high) 2) time_slot 应该从当前的 time_stamp 计算。(medium)

帮助这很有帮助，请给我一些解决方案，非常感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T08:05:45.283

1.  数据库不会为不存在的数据创建记录。
    如果您想获取所有时隙的记录（并且在读取结果时无法在应用程序中处理此问题），则必须将填充为零的记录添加到表中。（您可以对所有需要的时间段盲目地执行此操作，因为总和不会受到影响。）
2.  对于 SQL 中的字符串，请始终使用“单引号”。SQLite 将接受双引号以与其他一些 SQL 引擎兼容，但是如果您曾经有一些具有相同名称的列，您将遇到难以发现的错误。
3.  你不需要那些`TIME(...)`电话；你可以`strftime('%H:%M','now','localtime')`直接使用。
4.  要根据当前时间获得十分钟的时间段，您必须在不将时间拆分为 h/m/s 字段的情况下进行计算。这已经在上[一个问题](https://stackoverflow.com/questions/12476074/sqlite-query-to-get-sum-of-fields-for-every-10mins)中显示：

```
SELECT DATETIME(strftime('%s', SERVICE) +
                ((strftime('%s', 'now') - strftime('%s', SERVICE))
                 % (60 * 10)),
                'unixepoch') ... 
```

# java - 从 Jquery 调用 Bean 方法

> ID：12560441
> 
> 赞同：1
> 
> 时间：2012-09-24T07:17:19.750
> 
> 标签：java, jquery, jsf

是否可以从 Jquery 调用 Bean？我的要求如下，

我有一个基于 JSF 1.2 的 Servlet。

如果用户闲置了一段时间，就会使用户的会话无效。在会话无效前 1 分钟显示 Jquery 对话框。用户在对话框中有 2 个选项。“是的，我想继续”将延长会话。“不，我想注销”将注销用户。

当用户单击“不，我想注销”时，我想调用更新数据库并使会话无效的 bean 方法。

下面是代码，

```
'No, Log out': function(){
 $j.idleTimeout.options.onTimeout.call($j.post('//This is where am stuck',function() 
```

我想在 $j.post 中调用 bean，以便我可以在我的 bean 中进行一些清理活动。

如何做到这一点？

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T07:31:13.717

您可以使用一个 hidden( `style="display:none"`) commandButton 和一个指向 bean 中方法的动作，`.click()`然后从 jquery 调用它

像这样的东西

```
<h:commandButton id="myButton" action="#{myBean.myInvalidateMethod}" style="display:none"/> 
```

jQuery

```
&("#myButton").click();//possible myForm prefix appear before the id so use #myForm\\:myButton selector 
```

或者您可以从您的 jsf 页面调用 servlet，类似于此答案[Calling a Servlet from a JSP page using jQuery Ajax](https://stackoverflow.com/a/3617631/617373)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T07:20:35.903

您不能直接访问这些方法，您必须让您的 servlet 处理您的请求并为您调用该方法并以 json 格式返回数据，例如

# sql-server - SQL Server Express 数据库大小/BLOB 存储

> ID：12560443
> 
> 赞同：2
> 
> 时间：2012-09-24T07:17:34.910
> 
> 标签：sql-server, sql-server-express

我正在阅读有关 SQL Server 中的外部 blob 存储的信息，并且想知道这与数据库大小有何关系。在谈论 SQL Server Express 时，您的数据库大小是有限制的（我相信 2008 年是 10GB）。那么您的 ESB 存储呢？是否考虑到此限制，还是仅计算实际`.mdf`文件本身？想一想，`.ldf`日志文件呢？

我正在考虑与 SharePoint 相关的问题。由于内容数据库的主要部分通常由较大的 blob 对象（文档）组成，因此将这些对象迁移到 ESB 可能会非常划算，如果这样可以节省完整的 SQL Server 许可证。

**更新：**在此处发布了有关 SharePoint Foundation - SQL Express 的可能节省选项：http: [//blog.repsaj.nl/index.php/2012/09/sp2010-saving-yourself-a-full-sql-license/](http://blog.repsaj.nl/index.php/2012/09/sp2010-saving-yourself-a-full-sql-license/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T07:28:19.550

10gb 大小限制`.mdf`涉及`.ldf`.

此外，在 SQL Server 2008 中 - 数据库大小限制**不适**用于存储`FILESTREAM`在数据库中的数据（请参阅[FILESTREAM 兼容性](http://msdn.microsoft.com/en-us/library/bb895334.aspx)：*SQL Server Express 支持 FILESTREAM。10 GB 的数据库大小限制不包括 FILESTREAM 数据容器*）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T07:29:01.310

FILESTREAM 大小[不计入 10Gb 总限制大小](http://technet.microsoft.com/en-us/library/bb895334.aspx#SQLServerExpress)。

> SQL Server Express 支持 FILESTREAM。10 GB 的数据库大小限制不包括 FILESTREAM 数据容器。

但是[远程 Blob 存储](http://msdn.microsoft.com/en-us/library/gg316768%28v=sql.105%29.aspx)包依赖于 SQL 代理作业，例如垃圾收集和孤立扫描，并且 SQL Express 版没有 SQL 代理。它需要企业版：

> RBS 需要 SQL Server Enterprise 作为存储 BLOB 元数据的主数据库服务器。但是，如果使用提供的 FILESTREAM 提供程序，则可以将 BLOB 本身存储在 SQL Server Standard 上。

# finite-automata - 这种语言是正规的吗？

> ID：12560445
> 
> 赞同：0
> 
> 时间：2012-09-24T07:17:40.103
> 
> 标签：finite-automata

对于每个 n 接受 n(n-1)(n-2)/6+n(n-1)/2+1 多个 {0,1}^n 的语言是常规语言吗？

我有一个问题要绘制那些语言的 dfa，但我什至不确定它是否是常规语言。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T12:37:27.683

这听起来像家庭作业，我猜问题是：绘制一个完全接受 n(n-1)(n-2)/6+n(n-1)/2+1 个长度为 n 的单词的 DFA（超过字母表 {0,1}）。让我们将自动机构造为两个 DFA 的交集。

第一个自动机接受长度为 n 的单词。这很容易——有 n+1 个状态链。第一个状态是初始状态，只有最后一个状态是接受，每个状态都有一个标记为 0,1 的转换到链中的下一个状态。接受状态没有传出转换。

第二个自动机接受有一个、两个或三个 1 的单词。此外，非常简单——我们需要 4 个状态：q_0、q_1、q_2、q_sink。状态 q_0 是初始状态，状态 q_0,q_1,q_2 正在接受，它们有一个带 0 的自循环。有转换 q_0 --1--> q_1 --1--> q_2 --1-- > q_sink。最后，q_sink 被拒绝，它有一个 0,1 的自循环。

为了构造自动机的交集，我们需要两个自动机的乘积。这是一个通用的结构，也不是很难。

# email - gerrit sendemail“服务器拒绝正文”

> ID：12560447
> 
> 赞同：0
> 
> 时间：2012-09-24T07:17:44.213
> 
> 标签：email, smtp, gerrit

在我用我们的 SMTP 服务器配置我的 gerrit 服务器后，我无法发送电子邮件，有人可以帮忙吗？

我试图用 SMTP 服务器配置我的 gerrit，在使用命令“gsasl --smtp -a --connect=10.4.103.110:25 -p passwrod”检查后，我确认我与 SMTP 服务器的连接是正确的。

在我将它配置到 gerrit.config 之后，然后重新启动 gerrit。我尝试通过 webUI 修改我的第一个帐户的联系信息，我遇到了“服务器 xxxx 拒绝正文”之类的问题。然后我检查了日志，发现文件“SmtpEmailSender.java”中的行在204，代码如下：

 **```
w = new BufferedWriter(w);

for (Map.Entry<String, EmailHeader> h : hdrs.entrySet()) {
  if (!h.getValue().isEmpty()) {
     w.write(h.getKey());
     w.write(": ");
     h.getValue().write(w);
     w.write("\r\n");
  }
}

w.write("\r\n");
w.write(body);
w.flush();
w.close();

if (!client.completePendingCommand()) {
   throw new EmailException("Server " + smtpHost + " rejected body");
} 
```*  ** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T04:49:17.733

我解决了这个问题是因为我试图将我的电子邮件地址显示为非相对地址。

我的地址是 aaa@mymail.com，我尝试将用户配置为 bbb@mymail.com，SMTP 服务器拒绝了我的发送电子邮件请求。**

# php - 如何使用 xpath 从 xml 获取第二个兄弟姐妹

> ID：12560450
> 
> 赞同：2
> 
> 时间：2012-09-24T07:17:52.920
> 
> 标签：php, xml, xpath, nodes

这是我的结构：

```
<Users>
    <User>
        <username>admin</username>
        <server>10.xx.xx.xx</server>
        <image>images/pic.png</image>
    </User>
    <User>
        <username>bob</username>
        <server>10.xx.xx.xx</server>
        <image>images/pic2.png</image>
    </User>
</Users> 
```

现在我有这段代码可以从节点获取服务器值，该节点具有我正在搜索的特定用户名。

```
$query = '//Users/User/username[. =  "'.$_SESSION['SESS_FIRST_NAME'].'"]';
$entries = $xpath->query($query);

foreach ($entries as $entry) {
    //Getting the "server" node value
    $server=$entry->nextSibling->nextSibling->nodeValue; 
    //I wanted to have one more variable here which will save me the image string in the global php variable
    $images=$entry->nextSibling->nextSibling->nextSibling->nodeValue; //this is giving me a server value instead of image value 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T07:40:21.910

除非文档的架构明确说明，否则我不会依赖元素的顺序，而是通过将用户元素作为上下文节点传递来通过 xpath 查询元素（参见示例）或遍历用户元素的子元素并获取需要什么（例如在 php 数组中）。

```
<?php
$doc = new DOMDOcument;
$doc->loadxml( getData() );

$xpath = new DOMXPath( $doc );

$query = '/Users/User[username=  "'.'bob'.'"]';
foreach( $xpath->query($query) as $user ) {
    $username = singleNodeValue($xpath->query('username', $user)); // ok, you already have this one....
    $server = singleNodeValue($xpath->query('server', $user));
    $image = singleNodeValue($xpath->query('image', $user));

    printf("%s, %s, %s\r\n", $username, $server, $image);
}

function singleNodeValue($nodeset) {
    // add tests here....
    return $nodeset->item(0)->nodeValue;
}

function getData() {
    return <<< eox
<Users>
    <User>
        <username>admin</username>
        <server>10.xx.xx.xx</server>
        <image>images/pic.png</image>
    </User>
    <User>
        <username>bob</username>
        <server>10.xx.xx.xx</server>
        <image>images/pic2.png</image>
    </User>
</Users>
eox;
} 
```

印刷

```
bob, 10.xx.xx.xx, images/pic2.png 
```

# javascript - 使用 Jquery Sortable 时出错

> ID：12560451
> 
> 赞同：0
> 
> 时间：2012-09-24T07:18:12.163
> 
> 标签：javascript, jquery-ui, jquery

```
<div>
<ul id="sortable">
</ul></div>
<script>
    $(document).ready(function(){
        // Your code here
        $( "#sortable" ).sortable();
        $('#sortable').sortable( "disable" );
        $( "#sortable" ).disableSelection();
    });

</script> 
```

这是我目前在我的 html 中的代码。现在列表将在用户填写几个表格后动态更新。我使用 innerhtml 函数将“li”附加到 ul。然后调用：

```
$('#sortable').sortable( "refresh" );
$('#sortable').sortable( "enable" ); 
```

启用 jquery 排序，但由于某种原因它不起作用。当我在 javascript 函数中使用上述两个函数时，我收到错误“可排序不是函数。但如果我不使用它并且不首先禁用可排序，则不会发生任何事情！任何帮助将不胜感激谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T07:19:15.487

这是错误

```
<div>
<ul id="sortable"
</ul></div>       ^------missing the closing ">" 
```

应该

```
<div>
<ul id="sortable">
</ul></div> 
```

并且由于[@nbrooks](https://stackoverflow.com/users/803925/nbrooks)错误是“可排序不是函数”，因此似乎不是 HTML 格式错误的结果（尽管这是一个问题）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T08:03:45.887

“可排序不是函数”错误消息指向可排序库导入问题没有歧义：

*   未导入 jQuery UI
*   构建 UI 库时未选中“可排序”
*   在文档准备好之前执行的代码

# eclipse-rcp - Eclipse RCP - 通过拖放箭头组合表行

> ID：12560452
> 
> 赞同：0
> 
> 时间：2012-09-24T07:18:13.590
> 
> 标签：eclipse-rcp

我是 RCP 开发的新手。

我想创建两个表，每个表包含不同的数据。来自两个表的数据具有 1 对 1、1 对多或多对 1 的关系。这可以通过在两个表之间绘制箭头来完成。例如，

```
 **Row 1**                  **Row 2**
           R1 V1                      R2 V1
           R1 V2                      R2 V2
           R1 V3                      R2 V3 
```

我想绘制从 R1V1 到（ R2V1 和 R2V3 ）的箭头，反之亦然。如何以图形方式显示它。

我怎样才能找到由箭头组合的行。

任何帮助表示赞赏。

--- 曼达尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T10:33:25.693

这是一个很难实现的组件，前段时间我为 Tibco Business Studio 做了一个。

您需要在两个表格之间放置一个画布来绘制链接。您可能有两个表的数据模型，您还需要第三个模型来存储链接并确保对该模型的任何修改都会触发 Canvas 的刷新。

接下来为两个表添加[拖放](http://www.eclipse.org/articles/Article-Workbench-DND/drag_drop.html)支持，将表 1 中的项目拖放到表 2 中应该会在链接模型中创建一个新项目（从而触发 Canvas 刷新以绘制链接）。

实际上在正确的位置绘制链接你必须自己解决，但希望这能给你一些想法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T15:57:38.777

这是基于尼克提出的想法的代码。这只是为那些可能想知道从哪里开始实施如下所示的东西的人提供一个想法

![在此处输入图像描述](../Images/500dc02ee4504d7b0f31b45bc7e84093.png)

这将让您单击左侧表格上的任何列，然后在鼠标移向右侧表格时画一条线，并在选择右侧表格上的列后立即锚定该线。它在一个链表中保持一个左表行和右表行之间的映射作为映射数据模型。

```
package sample;

import java.util.LinkedList;

import org.eclipse.draw2d.AutomaticRouter;
import org.eclipse.draw2d.ColorConstants;
import org.eclipse.draw2d.Figure;
import org.eclipse.draw2d.FreeformLayeredPane;
import org.eclipse.draw2d.FreeformLayout;
import org.eclipse.draw2d.LightweightSystem;
import org.eclipse.draw2d.MarginBorder;
import org.eclipse.draw2d.PolylineConnection;
import org.eclipse.draw2d.PolylineDecoration;
import org.eclipse.draw2d.XYAnchor;
import org.eclipse.draw2d.geometry.PointList;
import org.eclipse.swt.SWT;
import org.eclipse.swt.events.MouseEvent;
import org.eclipse.swt.events.MouseMoveListener;
import org.eclipse.swt.graphics.Point;
import org.eclipse.swt.graphics.Rectangle;
import org.eclipse.swt.layout.GridData;
import org.eclipse.swt.layout.GridLayout;
import org.eclipse.swt.widgets.Canvas;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Event;
import org.eclipse.swt.widgets.Listener;
import org.eclipse.swt.widgets.Shell;
import org.eclipse.swt.widgets.Table;
import org.eclipse.swt.widgets.TableColumn;
import org.eclipse.swt.widgets.TableItem;

public class GraphicTableMapper {
    private static Point sourcePosition;
    private static PathFigure currentPath;
    private static Figure bf;
    private static Canvas canvas;
    private static int sourceRow;
    private static int targetRow;
    private static LinkedList<RowMapper> rowmapList = new LinkedList<RowMapper>();

    public static void main(String[] args) {
        Display display = Display.getDefault();
        final Shell shell = new Shell(display);
        shell.setSize(550, 500);
        shell.setLayout(new GridLayout(3, false));
        final Table table = new Table(shell, SWT.MULTI | SWT.BORDER
                | SWT.FULL_SELECTION);
        table.setLinesVisible(true);
        table.setHeaderVisible(true);
        final String[] titles = { "Serial Number", "Whatever" };
        for (int i = 0; i < titles.length; i++) {
            TableColumn column = new TableColumn(table, SWT.NONE);
            column.setText(titles[i]);
        }
        int count = 100;// create 100 rows in table
        for (int i = 0; i < count; i++) {
            TableItem item = new TableItem(table, SWT.NONE);
            item.setText(0, "x");
            item.setText(1, "y");
            item.setText(2, "!");
            item.setText(3, "this stuff behaves the way I expect");
            item.setText(4, "almost everywhere");
            item.setText(5, "some.folder");
            item.setText(6, "line " + i + " in nowhere");
        }
        for (int i = 0; i < titles.length; i++) {
            table.getColumn(i).pack();
        }
        table.addListener(SWT.MouseDown, new Listener() {
            public void handleEvent(Event event) {
                Point pt = new Point(event.x, event.y);
                TableItem item = table.getItem(pt);
                if (item == null)
                    return;
                for (int i = 0; i < titles.length; i++) {
                    Rectangle rect = item.getBounds(i);
                    if (rect.contains(pt)) {
                        int index = table.indexOf(item);
                        System.out.println("Item " + index + "-" + i);
                        sourcePosition = pt;
                        sourceRow = index;
                        currentPath = new PathFigure();
                        currentPath.setSourceAnchor(new XYAnchor(
                                new org.eclipse.draw2d.geometry.Point(-10,
                                        event.y)));
                        currentPath
                                .setTargetAnchor(new XYAnchor(
                                        new org.eclipse.draw2d.geometry.Point(
                                                0, pt.y)));
                        bf.add(currentPath);
                    }
                }
            }
        });

        table.addMouseMoveListener(new MouseMoveListener() {
            public void mouseMove(MouseEvent arg0) {
                if (currentPath != null) {
                    ((XYAnchor) (currentPath.getTargetAnchor()))
                            .setLocation(new org.eclipse.draw2d.geometry.Point(
                                    0, arg0.y));
                }
            }
        });

        canvas = new Canvas(shell, SWT.None);       
        canvas.setBackground(shell.getDisplay().getSystemColor(SWT.COLOR_GREEN));
        LightweightSystem lws = new LightweightSystem(canvas);
        bf = new BaseFigure();
        lws.setContents(bf);

        canvas.addMouseMoveListener(new MouseMoveListener() {
            public void mouseMove(MouseEvent arg0) {
                if (currentPath != null) {
                    ((XYAnchor) (currentPath.getTargetAnchor()))
                            .setLocation(new org.eclipse.draw2d.geometry.Point(
                                    arg0.x > canvas.getSize().x - 5 ? canvas
                                            .getSize().x - 5 : arg0.x, arg0.y));
                }
            }
        });
        GridData data2 = new GridData();
        data2.verticalAlignment = SWT.TOP;
        data2.grabExcessHorizontalSpace = false;
        data2.grabExcessVerticalSpace = true;
        data2.horizontalIndent = -10;
        data2.widthHint = 200;
        data2.heightHint = 1000;
        canvas.setLayoutData(data2);
        final Table table2 = new Table(shell, SWT.MULTI | SWT.BORDER
                | SWT.FULL_SELECTION);
        table2.setLinesVisible(true);
        table2.setHeaderVisible(true);
        data2 = new GridData();
        data2.grabExcessHorizontalSpace = false;
        data2.horizontalIndent = -10;
        table2.setLayoutData(data2);
        final String[] titles2 = { "Serial Number", "Whatever" };
        for (int i = 0; i < titles.length; i++) {
            TableColumn column = new TableColumn(table2, SWT.NONE);
            column.setText(titles[i]);
            canvas.redraw();
        }
        table2.addMouseMoveListener(new MouseMoveListener() {
            public void mouseMove(MouseEvent event) {
                if (currentPath != null) {
                    Point pt = new Point(event.x, event.y);
                    TableItem item = table2.getItem(pt);
                    if (item == null)
                        return;
                    for (int i = 0; i < titles2.length; i++) {
                        Rectangle rect = item.getBounds(i);
                        if (rect.contains(pt)) {
                            ((XYAnchor) (currentPath.getTargetAnchor()))
                                    .setLocation(new org.eclipse.draw2d.geometry.Point(
                                            canvas.getSize().x - 5, event.y));
                        }
                    }
                }
            }
        });

        int count2 = 100;// create 100 rows in table 2
        for (int i = 0; i < count2; i++) {
            TableItem item = new TableItem(table2, SWT.NONE);
            item.setText(0, "x");
            item.setText(1, "y");
            item.setText(2, "!");
            item.setText(3, "this stuff behaves the way I expect");
            item.setText(4, "almost everywhere");
            item.setText(5, "some.folder");
            item.setText(6, "line " + i + " in nowhere");
        }
        for (int i = 0; i < titles.length; i++) {
            table2.getColumn(i).pack();
        }
        table2.addListener(SWT.MouseDown, new Listener() {
            public void handleEvent(Event event) {
                try {
                    Point pt = new Point(event.x, event.y);
                    TableItem item = table2.getItem(pt);
                    if (item == null)
                        return;
                    for (int i = 0; i < titles2.length; i++) {
                        Rectangle rect = item.getBounds(i);
                        if (rect.contains(pt)) {
                            int index = table2.indexOf(item);
                            targetRow = index;
                            System.out.println("Item " + index + "-" + i);
                            if (sourcePosition != null) {
                                add(event);
                            }
                        }
                    }
                } finally {
                    sourcePosition = null;
                    sourceRow = -1;
                    targetRow = -1;
                }
            }
        });
        shell.open();
        while (!shell.isDisposed()) {
            if (!display.readAndDispatch())
                display.sleep();
        }
    }

    public static void add(Event event) {
        bf.remove(currentPath);
        PathFigure figure = new PathFigure();
        figure.setSourceAnchor(currentPath.getSourceAnchor());
        figure.setTargetAnchor(currentPath.getTargetAnchor());
        bf.add(figure);
        currentPath = null;
        RowMapper mapper = new RowMapper();
        mapper.sourceRow = sourceRow;
        mapper.targetRow = targetRow;
        if (!rowmapList.contains(mapper)) {
            rowmapList.add(mapper);
        }
    }

    class BaseFigure extends FreeformLayeredPane {
    public BaseFigure() {
        setLayoutManager(new FreeformLayout());
        setBorder(new MarginBorder(5));
        setBackgroundColor(ColorConstants.white);
        setOpaque(true);
    }
}

class PathFigure extends PolylineConnection {
    public PathFigure() {
        setTargetDecoration(new PolylineDecoration());
        setConnectionRouter(new AutomaticRouter() {
            @Override
            protected void handleCollision(PointList list, int index) {
            }
        });
    }
}

class RowMapper {
    int sourceRow;
    int targetRow;

    @Override
    public boolean equals(Object obj) {
        if (obj instanceof RowMapper) {
            RowMapper mapper = (RowMapper) obj;
            return (sourceRow == mapper.sourceRow && targetRow == mapper.targetRow);
        }
        return false;
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T09:28:43.353

我是否认为这个实现使用鼠标位置来绘制箭头？因此，如果您想保存/加载关系，则必须保存箭头的 x,y 位置，并且必须确保组件始终保持相同大小？

# eclipse - 我在构建工作区时遇到 java 堆空间错误，有什么解决方案吗？

> ID：12560456
> 
> 赞同：-2
> 
> 时间：2012-09-24T07:18:25.970
> 
> 标签：eclipse

我收到 java.lang.OutOfMemoryError: Java heap space error in eclipse 每当我尝试构建我的工作区时我尝试了许多内存规范但没有任何工作请帮助以下是我的 eclipse.ini

```
-startup
plugins/org.eclipse.equinox.launcher_1.2.0.v20110502.jar
--launcher.library
plugins/org.eclipse.equinox.launcher.win32.win32.x86_1.1.100.v20110502
-product
org.eclipse.epp.package.jee.product
--launcher.defaultAction
openFile
--launcher.XXMaxPermSize
512M
-showsplash
org.eclipse.platform
--launcher.XXMaxPermSize
256m
--launcher.defaultAction
openFile
-vmargs
-Dosgi.requiredJavaVersion=1.5
-Xms512m
-Xmx1024m
--vm
C:\Program Files\Java\jdk1.6.0_24\bin\javaw.exe -vmargs -Xms512m -Xmx1024m 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T14:42:59.773

您指定 --launcher.XXMaxPermSize 两次，您可能想要删除第二次。此外，您应该在最后一行删除“-vmargs ...”，它必须是每行一个参数。而且我很确定运行时参数只是“-vm”而不是“--vm”，它必须在-vmargs之前。

私服

# c - 是否有任何资源或书籍可用于理解函数 load_elf_binary？

> ID：12560457
> 
> 赞同：0
> 
> 时间：2012-09-24T07:18:35.767
> 
> 标签：c, linux-kernel, elf

请建议一些好的资源来理解函数 load_elf_binary ...我已经尝试过关于该主题的 googlin，但找不到任何有用的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T07:39:57.040

John Levine 的[“链接器和加载器” 。](https://rads.stackoverflow.com/amzn/click/com/1558604960)

# asp.net - 在 asp.net 中输入一堆数据的最佳做法是什么？

> ID：12560458
> 
> 赞同：0
> 
> 时间：2012-09-24T07:18:35.483
> 
> 标签：asp.net, vb.net

一次上传一堆数据（多行）的最佳做法是什么。我不想在服务器上上传任何文件。有一个文本区域来输入具有预定义结构（格式）的数据是否很好。并创建一个小型解析器来读取和分析该输入以将其插入数据库。

**编辑：** 我在`excel`文件中有数据集。我想将它存储在数据库中，我不想上传服务器。

**数据样本：**

```
 id             fid              sid               name
      --------------------------------------------------------------
  1-  3a3458         2a2125           3a4541            John Smith
  2-  313547         3a4541           212145            Albert koku
      .....................
      ............... 
      .........
100-  ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T07:24:49.990

由于数据已经有预定义的结构，为了避免手动错误和解析，我会构建一个包含 a 的界面，`<table>`用户将填写相应的数据，然后将其提交给服务器。

但是，如果您不想费心指导用户并帮助他，那么您当然可以使用`<textarea>`用户可以在其中以某种已知形式输入数据的方法：CSV、JSON、XML ......然后进行解析在服务器上。

# mysql - MySQL：触发调用过程

> ID：12560460
> 
> 赞同：0
> 
> 时间：2012-09-24T07:18:38.887
> 
> 标签：mysql, database, stored-procedures, triggers

我已经在我的数据库中成功定义了以下过程，但不知何故它没有按预期工作。

```
CREATE PROCEDURE `mod_prefer`(IN sid INT)
BEGIN
declare s1 int;
declare s2 int;
SELECT SUM(c_load) INTO s1 FROM course WHERE id IN (SELECT course_id FROM prefer WHERE staff_id = sid) AND sem = 1;
SELECT SUM(c_load) INTO s2 FROM course WHERE id IN (SELECT course_id FROM prefer WHERE staff_id = sid) AND sem = 2;
IF s1>s2 THEN
UPDATE staff SET sem = 1 WHERE id = sid;
ELSE
UPDATE staff SET sem = 2 WHERE id = sid;
END IF;
END 
```

使用触发器调用上述过程，如下所示（它是插入后触发器）：

```
CALL mod_prefer(new.staff_id); 
```

结果是，程序没有`sem`为给定的工作人员设置值，而是将所有 sem 值更新为 2，而不管逻辑应该如何工作，即即使 sem 的值实际上应该是 1。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T07:02:27.423

试试这个代码 -

```
SELECT
  SUM(IF(sem = 1, c_load, NULL)), SUM(IF(sem = 2, c_load, NULL)) s2
  INTO s1, s2
FROM course c
  JOIN prefer p
    ON p.course_id = c.id
  WHERE staff_id = sid;

UPDATE staff SET sem = IF(s1 > s2, 1, 2) WHERE id = sid; 
```

# xml - Quickbooks OAuth - 入门指南和 API 参考 - 我在哪里可以找到它们

> ID：12560462
> 
> 赞同：0
> 
> 时间：2012-09-24T07:18:46.700
> 
> 标签：xml, api, quickbooks

QuickBook OAuth 文档和 API。我想为 Quickbooks 实现 OAuth。我正在寻找入门指南和最新的 API 文档。

QuickBooks 使用 OAuth。我以前使用过 OAuth，但从未使用过快速手册。
我想要一份使用 OAuth 的 QuickBooks 指南。对于代码，我将使用 Google Apps 脚本 (JavaScript)。我不确定是否需要使用 XML，或者是否存在用于 JS/GAS 的代码。

我确实找到了这个： [https ://member.developer.intuit.com/qbsdk-current/samples/readme.html](https://member.developer.intuit.com/qbsdk-current/samples/readme.html)

但它看起来并不是最好的起点。

涡流。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T07:26:16.513

[这个链接](https://code.intuit.com/sf/projects/qb_javascript_sdk/)和[这个链接](https://www.quickbase.com/api-guide/index.html)是我为 QuickBooks Javascript SDK 找到的最好的资源。在我的工作时间里，我一直找不到其他任何东西。

# scala - 在 Scala 中返回

> ID：12560463
> 
> 赞同：95
> 
> 时间：2012-09-24T07:18:48.590
> 
> 标签：scala, return

我是一个新手 scala 程序员，遇到了一个奇怪的行为。

```
def balanceMain(elem: List[Char]): Boolean =
  {
    if (elem.isEmpty)
      if (count == 0)
        true;
      else false;

    if (elem.head == '(')
      balanceMain(elem.tail, open, count + 1);.... 
```

以上基本上我想返回 true if`elem.isEmpty`和`count == 0`。否则，我想返回 false。

现在上面我已经读到不需要在 scala 中添加 return 语句。所以我在`return`上面省略了。但它不返回布尔值。如果我将 return 语句添加为`return true`. 它完美地工作。为什么会这样？

另外，为什么在 scala 中有 return 语句被认为是一种不好的做法

* * *

## 回答 #1

> 赞同：152
> 
> 时间：2012-09-24T07:24:54.387

这并不像省略`return`关键字那么简单。在 Scala 中，如果没有，`return`则将最后一个表达式作为返回值。因此，如果最后一个表达式是您想要返回的，那么您可以省略`return`关键字。但是如果你想要返回的*不是*最后一个表达式，那么 Scala**就不会知道你想要返回它**。

一个例子：

```
def f() = {
  if (something)
    "A"
  else
    "B"
} 
```

这里函数的最后一个表达式`f`是一个 if/else 表达式，它的结果是一个字符串。由于没有显式`return`标记，Scala 将推断您想要返回这个 if/else 表达式的结果：一个字符串。

现在，如果我们在 if/else 表达式*之后添加一些内容：*

```
def f() = {
  if (something)
    "A"
  else
    "B"

  if (somethingElse)
    1
  else
    2
} 
```

现在最后一个表达式是一个计算结果为 Int 的 if/else 表达式。所以返回类型`f`将是 Int。如果我们真的希望它返回字符串，那么我们就有麻烦了，因为 Scala**不知道**这就是我们想要的。因此，我们必须通过将字符串存储到变量并在第二个 if/else 表达式之后返回它来修复它，或者通过更改顺序以使字符串部分最后发生。

`return`最后，即使使用像您这样的嵌套 if-else 表达式，我们也可以避免使用该关键字：

```
def f() = {
  if(somethingFirst) {
    if (something)      // Last expression of `if` returns a String
     "A"
    else
     "B"
  }
  else {
    if (somethingElse)
      1
    else
      2

    "C"                // Last expression of `else` returns a String
  } 
```

}

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2016-08-17T10:12:00.077

如迄今为止的答案中所述，该主题实际上要复杂一些。[Rob Norris 的](https://tpolecat.github.io/2014/05/09/return.html)这篇博文更详细地解释了它，并举例说明了何时使用 return 会实际破坏您的代码（或至少具有不明显的影响）。

在这一点上，让我引用这篇文章的精髓。最重要的陈述就在开头。将此打印为海报并将其贴在墙上 :-)

> `return`关键字不是“可选的”或“推断的”；它改变了你程序的含义，你永远不应该使用它。

它给出了一个例子，当你内联一个函数时，它实际上破坏了一些东西

```
// Inline add and addR
def sum(ns: Int*): Int = ns.foldLeft(0)((n, m) => n + m) // inlined add

scala> sum(33, 42, 99)
res2: Int = 174 // alright

def sumR(ns: Int*): Int = ns.foldLeft(0)((n, m) => return n + m) // inlined addR

scala> sumR(33, 42, 99)
res3: Int = 33 // um. 
```

因为

> 表达式在`return`计算时会放弃当前计算并返回给`return`出现的方法的调用者。

这只是链接帖子中给出的示例之一，它是最容易理解的。还有更多，我强烈鼓励你去那里，阅读和理解。

当您来自 Java 等命令式语言时，起初这可能看起来很奇怪，但一旦您习惯了这种风格，它就会变得有意义。让我以另一句话结束：

> 如果您发现自己处于想要提前返回的情况，则需要重新考虑定义计算的方式。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-24T07:29:50.930

默认情况下，将返回函数的最后一个表达式。在您的示例中，该点之后还有另一个表达式，您想要返回值。如果您想在最后一个表达式之前返回任何内容，您仍然必须使用`return`.

您可以像这样修改您的示例，以`Boolean`从第一部分返回 a

```
def balanceMain(elem: List[Char]): Boolean = {
  if (elem.isEmpty) {
    // == is a Boolean resulting function as well, so your can write it this way
    count == 0
  } else {
    // keep the rest in this block, the last value will be returned as well
    if (elem.head == "(") {
      balanceMain(elem.tail, open, count + 1)
    }
    // some more statements
    ...
    // just don't forget your Boolean in the end
    someBoolExpression
  }
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-09-24T07:22:35.593

我不会对 Scala 进行编程，但我使用另一种具有隐式返回的语言（Ruby）。你的代码`if (elem.isEmpty)`块后面有代码——最后一行代码是返回的，这就是为什么你没有得到你所期望的。

编辑：这也是编写函数的一种更简单的方法。只需使用 isEmpty 和 count 的布尔值自动返回 true 或 false：

```
def balanceMain(elem: List[Char]): Boolean =
{
    elem.isEmpty && count == 0
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-09-24T18:35:26.587

不要写`if`没有对应的语句`else`。一旦你添加`else`到你的片段中，你会看到你的`true`and`false`实际上是函数的最后一个表达式。

```
def balanceMain(elem: List[Char]): Boolean =
  {
    if (elem.isEmpty)
      if (count == 0)
        true
      else
        false
    else
      if (elem.head == '(')
        balanceMain(elem.tail, open, count + 1)
      else.... 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-03-01T20:52:10.970

用于早期返回目的的用例匹配。它将强制您显式声明所有返回分支，防止忘记在某处写返回的粗心错误。

# wcf - WCF 中终结点行为的执行顺序是什么？

> ID：12560468
> 
> 赞同：4
> 
> 时间：2012-09-24T07:18:56.297
> 
> 标签：wcf, enterprise-library, endpointbehavior

WCF 中端点行为的执行顺序是什么？我希望仅当请求通过验证块时才会发生日志记录。但就我而言，即使验证失败，审计拦截器也会记录请求。

我有两个行为扩展：

```
<behaviorExtensions>
<add name="validation"/>
<add name="Auditing"/>
</behaviorExtensions> 
```

然后在我的行为中：

```
<behaviors>
<endpointBehaviors>
<validation ruleset"AuthenticationRuleSet"/>
<Auditing />
</endpointBehaviors>
</behaviors> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T14:13:48.083

来自 MSDN

> 评估令
> 
> System.ServiceModel.ChannelFactory 和 System.ServiceModel.ServiceHost 负责根据编程模型和描述构建运行时。如前所述，行为有助于服务、端点、合同和操作的构建过程。
> 
> ServiceHost 按以下顺序应用行为：
> 
> 服务
> 
> 合同
> 
> 端点
> 
> 手术
> 
> 在任何行为集合中，**都不能保证顺序**。
> 
> ChannelFactory 按以下顺序应用行为：
> 
> 合同
> 
> 端点
> 
> 手术
> 
> 同样，在任何行为集合中，**都不能保证顺序**。

出于验证目的，也许你应该看看 Message Inspectors

# php - 主题例程生成器 (PHP) 的逻辑

> ID：12560474
> 
> 赞同：1
> 
> 时间：2012-09-24T07:19:17.137
> 
> 标签：php, mysql, logic, scheduling, routines

我正在开发一个 php 应用程序来管理我大学的科目和教师时间安排。但是，我无法理解正确时间管理背后的想法（逻辑）。

课程时长 50 到 100 分钟，从早上 7 点到下午 2:30 开始。

我希望我的申请根据学科、学期和年份来分配教师，并且学科也被分配为年份和学期。教师分配时不应发生时间冲突。

我现在为我的应用程序设置了基本的表设置

用于管理员登录的管理员用户表：

1) id 2) 用户名​​ 3) 密码

科目表

1) 编号 2) 姓名 3) 年级 4) 学期 5) 理论标记 6) 实践标记

教师表

1)id 2)name 3)position 4)subject_id 5)teacher_time 6)year（哪一年的科目是第一或第二或第三） 7)day（星期日、星期一等）

我的第一个想法是非常基本的，只为一天分配一个不同的表格，其中包括作为日期名称和标志的列以及主题 ID，以了解该主题的日期是活跃的还是不活跃的。和不同表中的时间作为列名，如上午 7 点、上午 730 点等。但是这也不能解决分配标志的逻辑，因为有些主题的长度为 100 分钟，而有些主题的长度仅为 50 分钟。

我怎样才能做到这一点？现在我对如何为科目和教师管理时间的逻辑一无所知。拜托，任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T07:53:47.983

所有课程都在上午 7 点到下午 2:30 之间进行，我们说的是 7.5 小时。这是450分钟。现在缺少输入：可以在 7-2:30 之间的任何时间安排课程？或仅在特定时间，例如：上午 7 点、上午 8 点、...、下午 1 点？

为简单起见（并且也使其有意义），我假设课程只能在特定时间进行。

所以现在，当您想安排一个新课程时，您必须调用一个类似于以下内容的 PHP 函数：

```
function schedule_class($teacher_id, $subject_id, $day, $hour, $length){
    ...
} 
```

该课程将首先`SELECT`从数据库中获取该老师当天在以下时间范围内上的所有课程：
`[$hour - $length, $hour + $length]`

只有当你得到一个空的`resultset`- 你可以继续并跟随一个`INSERT`.
否则，您应该输出到屏幕，例如：

```
"Class <$subject_name> cannot be scheduled at <$day>/<$hour> 
 since it overlaps with <$subject_name of the conflict-class>" 
```

另外，我会接受@Havelock 的建议并将 and`subjects`分开`teachers`。
此外，我会在`subjects`表格中添加字段`start_time`，`end_time`以便您更轻松地检查两个类是否存在冲突。

# c - c中的易失性和局部变量有什么区别？

> ID：12560476
> 
> 赞同：1
> 
> 时间：2012-09-24T07:19:25.343
> 
> 标签：c

> **可能重复：**
> [谁能解释这些未定义的行为（i = i++ + ++i，i = i++ 等……）](https://stackoverflow.com/questions/949433/could-anyone-explain-these-undefined-behaviors-i-i-i-i-i-etc)

代码 1：

```
 main()
  {
   int a=5;
   printf("Value : %d %d %d %d\n",a++,a++,++a,a++);
  }
  ANS:
  Value : 8 7 9 5 
```

代码 2：

```
 main()
  {
   volatile int a=5;
   printf("Value : %d %d %d %d\n",a++,a++,++a,a++);
  }
  ANS:
  Value : 8 7 7 5 
```

代码 3：

```
 main()
  {
   int a;
   scanf("%d",&a);
   printf("Value : %d %d %d %d\n",a++,a++,++a,a++);
  }
  INPUT is 5
  ANS:
  Value : 8 7 7 5 
```

上述程序如何获得不同的输出？

我尝试了 volatile variable ，它用于防止编译器优化。所以我理解了代码 2。但我想知道代码 1 和 3 是如何工作的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T07:24:46.423

`volatile`是告诉编译器每次都从内存中读取值，而不是作为优化的一部分对值进行任何缓存。

您的代码表现出未定义的行为，无论如何都不会通过使用`volatile`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T07:25:07.710

你所拥有的是一个**未定义的行为**。
您的代码多次修改变量而没有中间序列点。
您不能使用此代码得出任何结论。它只保证一件事：输出是**Undefined**。

**[我的这个](https://stackoverflow.com/a/10782963/452307)**答案详细解释了为什么这是未定义的行为。请注意，尽管答案适用于 C++，但 C 也存在完全相同的推理和规范。

> **c中的易失性和局部变量有什么区别？**

使用关键字`volatile`告诉编译器通过使用寄存器缓存来限制任何优化。

好读：
[**Herb Sutter 的优秀文章*“易失性与易失性”***](http://www.drdobbs.com/parallel/volatile-vs-volatile/212701484)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T07:24:13.487

这是未定义的行为。没有人能预测出正确的输出

```
printf("%d %d",a++,++a); 
```

无论对于不同的编译器或不同的场景，它是否是不同的输出，`a++`都会首先执行哪一个。`++a`

# html - 当外部div固定宽度并水平滚动时，如何使内部div宽度适合文本？

> ID：12560478
> 
> 赞同：1
> 
> 时间：2012-09-24T07:19:28.317
> 
> 标签：html, css, text, width

## html

```
<div class="outer">
    <ul>
        <li>
            <div>text</div>
        </li>
        <li>
            <div>longlonglonglonglonglonglonglonglonglonglonglonglong</div>
        </li>
    </ul>
</div> 
```

## CSS

```
.outer {
    width: 300px;
    height: 200px;
    background-color: #ddd;
    overflow: scroll;
}

li {
    margin: 5px;
}

li>div {
    cursor: pointer;
    height: 30px;
    line-height: 30px;
    border: 1px solid #369;
    background-color: #fff;
} 
```

[JSFiddle](http://jsfiddle.net/gf9xk/1/)

**需要：**

内部 div 宽度适合文本。文本只是单行。并且内部 div 不使用固定宽度。

像这样（这个demo LI's margin not work.） [JSFiddle](http://jsfiddle.net/afshinprofe/gf9xk/19/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T08:00:45.230

放

```
float:left;
margin:5px; 
```

在 li>div 样式

[演示](http://jsfiddle.net/afshinprofe/gf9xk/19/)

或[演示 2](http://jsfiddle.net/afshinprofe/gf9xk/22/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T07:39:09.097

**HTML**

```
<div class="outer">
    <ul>
        <li>
            <div>text</div>
        </li>
        <li>
            <div>longlonglonglonglonglonglonglonglonglonglonglonglong</div>
        </li>
    </ul>
</div> 
```

**CSS**

```
.outer {
    width: 300px;
    height: 200px;
    background-color: #ddd;
    overflow: scroll;
}

li {
    margin: 5px;
}

li>div {
    cursor: pointer;
    height: 30px;
    width:400px;
    line-height: 30px;
    border: 1px solid #369;
    background-color: #fff;

} 
```

检查这个[小提琴](http://jsfiddle.net/venkateshwar/gf9xk/20/)。

如果您不想破坏文本，则可以使用`overflow-x:scroll`属性

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T07:22:36.623

你好现在习惯了

```
word-break: break-all; 
```

......

```
li>div {
    word-break: break-all; // add this line
    height:30px; // remove this line
} 
```

并**删除** `height`你的`li>div`

***[现场演示](http://jsfiddle.net/gf9xk/8/)***

**演示中的 HTML**

```
<div class="outer">
    <ul>
        <li>
            <div>text</div>
        </li>
        <li>
            <div>longlonglonglonglonglonglonglonglonglonglonglonglong</div>
        </li>
    </ul>
</div> 
```

**演示中的 CSS**

```
.outer {
    width: 300px;
    height: 200px;
    background-color: #ddd;
    overflow: scroll;
}

li {
    margin: 5px;
}

li>div {
    cursor: pointer;
    line-height: 30px;
    border: 1px solid #369;
    background-color: #fff;
     word-break: break-all;
} 
```

# javascript - 使用嵌入手机中的图像创建幻灯片，就好像它们是屏幕截图一样

> ID：12560480
> 
> 赞同：-1
> 
> 时间：2012-09-24T07:19:46.260
> 
> 标签：javascript, slideshow

我正在尝试创建图像幻灯片。这些图像将是安卓手机的屏幕截图，然后我想要一张手机的实际图片来循环浏览这些图像，就好像它们是手机上显示的一样。

所以这将是一个带有应用程序图像的手机幻灯片。

对此的任何帮助都会很棒。我可以创建一个简单的幻灯片，其中每 2 秒更改三张图像，但我只希望这些图像位于手机图像之上。

这是我到目前为止所拥有的：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T07:38:57.777

Yu 需要一张屏幕部分被剪掉的手机图像。将手机另存为 PNG 文件，以便屏幕切口部分变得透明。然后您需要将 PNG 放入 HTML 文档中。并给 PNG 一个具有样式属性的类

```
position: absolute;
width: xxx px;
height:xxx px;
top:xxx px;
left:xxx px;
z-index: 2; 
```

显然，将上面的 xxx 值调整为您在屏幕上的资产和位置。基本上，部分透明的 PNG 将位于具有正确 z 索引的幻灯片上。根据需要增加 z 索引。

# javascript - ClientID 和 document.getElementById() 有什么区别？

> ID：12560482
> 
> 赞同：-2
> 
> 时间：2012-09-24T07:19:49.060
> 
> 标签：javascript, asp.net

我有一个 asp.net 文本框，我得到了文本框的 ID 使用

```
var tbFilterValueClientID = "<%= tbFilterValue.ClientID %>"; 
```

但是当我使用它时，我会这样做

```
var tbFilterValue = document.getElementById(tbFilterValueClientID); 
```

之后，我能够执行并获得它的价值，例如：

```
var filterValue = tbFilterValue.value.toString().trim(); 
```

所以任何人都可以解释为什么我需要

> document.getElementById

和控制通行证？为什么我不能使用

> tbFilterValueClientID

直接地？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T07:36:26.453

因为您通过使用 var "<%= tbFilterValue.ClientID %>" 得到一个 STRING not OBJECT

如果你想要一个文本框的值，你需要对象而不是对象的 id。

要获取对象，您需要该对象的客户端 ID。

因此，您必须先获取 Id，然后通过该 Id 获取 Object，最后从该 Object 获取 TextBox 的值。

客户端 ID 与服务器 ID 不同，因为可以存在具有相同服务器 ID 的控件（嵌套），但客户端 ID 始终是唯一的，因此在 javascript 中您需要一个唯一的 ID 来获取控件。

因此，ClientId 和 document.getElementById 的输出之间没有这种区别，除了 ClientId 在服务器端工作而 getElementById 在客户端工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T14:11:21.507

如果将脚本存储在 js 文件中，则该脚本将不起作用。

```
var divID = document.getElementById('<%= infoDiv.ClientID %>'); 
```

当这在 ASPX 页面上时，`<%= infoDiv.ClientID %>`将转换为`'ctl00_ContentPlaceHolder1_infoDiv'`页面呈现时间。

其中，`<%= infoDiv.ClientID %>`在 js 文件中将永远`<%= infoDiv.ClientID %>`不会被转换。

因此，如果您想使用`<%= infoDiv.ClientID %>`，您的功能必须驻留在 ASPX 页面上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T07:30:03.070

请理解 document.getElementById 需要一个 ID，js 引擎可以通过该 ID 找到 dom 对象。

为 getElementById 传递的 ID 是控件的给定唯一标识符。

Client ID 是服务器端asp.net 控件为控件生成的ID，现在您将此ID 传递给getElementById 以获取对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T07:25:25.983

clientid 仅提供该特定控件的客户端 id，该控件在服务器端具有 id tbFilterValue 并且您不能对 id 执行操作作为其唯一属性

您总是对控件执行任何操作，当您调用 getelementbyid 时，您将获得控件（元素）

# php - 使用php将英文翻译成中文

> ID：12560487
> 
> 赞同：0
> 
> 时间：2012-09-24T07:19:59.243
> 
> 标签：php, translation

> **可能重复：**
> [php中的语言翻译](https://stackoverflow.com/questions/1163454/language-translation-in-php)

我有数据以英文存储在数据库中。我想用中文给他们看。

我怎样才能做到这一点？我已经尝试过`iconv`了，但这似乎是用来更改编码而不是用于翻译。想知道如何使用 PHP 执行此操作

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T07:41:13.367

如果您想翻译您的网站，有两种类型的内容：

- 可以由 IntlExtension 处理的可格式化内容，例如日期或消息。例如

```
$today = new DateTime;
//if you do not use Intl 
echo $today->format('Y-m-D');//in english :-(
//with IntlDateFormatter
$formatter = new IntlDateFormatter( "de-DE" ,IntlDateFormatter::FULL,
 IntlDateFormatter::FULL, 
'America/Los_Angeles',IntlDateFormatter::GREGORIAN  );
echo $formatter->format($today);//in german 
```

如果您想翻译不可格式化的字符串，例如标题，甚至内容，您有两种解决方案：

*   [谷歌翻译 API](https://developers.google.com/translate/)

*   使用您通过为自己提供所有翻译来配置的翻译工具。有[gettext](http://php.net/manual/fr/book.gettext.php)或[Symfony 翻译器组件](https://github.com/symfony/Translation)

# java - 将数据库字段值加载到 JCombobox

> ID：12560489
> 
> 赞同：2
> 
> 时间：2012-09-24T07:20:08.253
> 
> 标签：java, oracle, swing, jdbc, jcombobox

如何将值从 Oracle db 加载到 JComboBox 以使用户更容易从中选择 我试过这个：

```
 Connection dbcon = null;
    try {
        Class.forName("oracle.jdbc.driver.OracleDriver");
        dbcon = DriverManager.getConnection("
             jdbc:oracle:thin:@localhost:1521:XE", "USERNAME", "PASSWORD");
        Statement st = dbcon.createStatement();
        String combo = "Select EMP_IDNUM from employees";
        ResultSet res = st.executeQuery(combo);
        while(res.next()){
            String ids = res.getString("EMP_IDNUM");
            String [] str = new String[]{ids};
            cboId = new JComboBox(str);
        }
    } catch (Exception d) {
        System.out.println(d);
    } 
```

这只是让我第一个值进入 JComboBox cboID。将整个字段数据 (EMP_IDNUM) 加载到 Jcombobox 中的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T07:33:59.747

```
String [] str = new String[]{ids}; 
```

这意味着您的 String 数组只有一个您已加载的 ids 值`String ids = res.getString("EMP_IDNUM");`

```
if(rs.getRow()>0){
 String [] str = new String[res.getRow()];
 int i=0;
 while(res.next()){
   str[i++] = res.getString("EMP_IDNUM");
 }
}
JComboBox jcb = new JComboBox(str); 
```

除了数组，您还可以使用 Vector 来创建 JComboBox。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T07:50:53.853

有三个重要领域

a）关闭所有`JDBC Objects`的`finally block`，因为这些`Object`不是，从来没有`GC'ed`

```
try {

} catch (Exception d) {
    System.out.println(d);
} finally {
    try {
        st.close()
        res.close() 
        dbcon.close()
    } catch (Exception d) {
        //not important
    }
} 
```

b）不要创建任何`Objects`内部`try - catch - finally`，之前准备好

意义`cboId = new JComboBox(str);`

c) 将所有数据从 JDBC 放到`ComboBoxModel`, 之前准备好

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T07:25:57.767

您可以使用以下代码：

```
Vector v = new Vector();
while(res.next()){
    String ids = res.getString("EMP_IDNUM");
    v.add(ids)
}
JComboBox jcb = new JComboBox(v); 
```

在此代码中，您使用 . 创建一个`Vector`，`Strings`然后直接调用[`JComboBox(Vector items)`JComboBox 的构造函数](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComboBox.html#JComboBox%28java.util.Vector%29)

# jquery - 移动设备响应式设计布局

> ID：12560493
> 
> 赞同：0
> 
> 时间：2012-09-24T07:20:52.873
> 
> 标签：jquery, cordova, jquery-mobile

我刚刚从原生 iOS 开发人员转移到跨平台。我正在使用 phonegap，我想根据设备屏幕尺寸和方向创建不同的布局。我想做的是类似于此代码

```
if(orientation == LANDSCAPE)
{
    if(screen.width < 320)
    {
        //use css #1
    }
    else
    {
        //use css #2
    }
}
else //orientation is PORTRAIT
{
    if(screen.width < 320)
    {
        //use css #3
    }
    else
    {
        //use css #4
    }
} 
```

或者，如果这不是进行设计的适当方式，那我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T07:35:06.000

这很大程度上取决于你想做什么。如果您打算根据设备的分辨率或屏幕方向更改逻辑或从 DOM 中添加/删除元素，请使用 JS 方式。如果您使用的是 jQuery，那么它很简单，如下所示：

```
var deviceWidth = $(window).width();
var deviceHeight = $(window).height(); 
```

然而，CSS 本身提供了根据屏幕大小设置条件样式的方法。这些被称为`media-queries`（[http://www.w3.org/TR/css3-mediaqueries/](http://www.w3.org/TR/css3-mediaqueries/)），您可以按如下方式使用它们：

```
@media only screen and (max-device-width: 480px) {
    body {
        font-size: 2em;
        /* etc. these styles will be applied only when device's screen is smaller than 480px */
    }
} 
```

您可以使用更多属性。`max-device-width`只是和例子。此外，如果设备的大小不合适，您可以完全阻止浏览器加载样式文件：

```
<link rel="stylesheet" media="only screen and (max-width-device: 480px)" href="480-device.css" /> 
```

查看 w3c 文档或仅搜索`media-queries`. 它们现在几乎与所有浏览器兼容：http: [//caniuse.com/#feat=css-mediaqueries](http://caniuse.com/#feat=css-mediaqueries)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T07:39:11.660

鉴于 PhoneGap 将 Web 应用程序包装到本机外壳中，此时您实际上是在进行 Web 开发。您需要查看[媒体查询](http://www.w3.org/TR/css3-mediaqueries/)。对于您发布的代码，适当的媒体查询类似于以下内容：

```
/* Landscape */
@media screen and (orientation: landscape) {
    /* Landscape styles */
}

/* Portrait */
@media screen and (orientation: portrait) {
    /* Portrait styles */
}

/* Portrait and screen width < 320 */
@media screen 
and (orientation: portrait)
and (max-width: 320px) {
    /* Portrait styles for screen smaller than 320 pixels */
} 
```

媒体查询规范说您应该能够嵌套媒体查询，这将更紧密地匹配您的控制语句的结构，但[不幸的是大多数现代浏览器还不支持这一点](https://stackoverflow.com/questions/7668301/is-it-possible-to-embed-media-queries-within-media-queries)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T07:44:43.967

我想你可以试试下面的 JS 代码：

```
function _orientationHandler() {
    if(event.orientation){
        if(event.orientation == 'portrait'){
            if(screen.width < 320)
            {
                //use css #1
            }
            else
            {
                //use css #2
            }
    }
    else if(event.orientation == 'landscape') {
        if(screen.width < 320)
        {
            //use css #1
        }
        else
        {
            //use css #2
        }
    }
}

$(window).bind('orientationchange', _orientationHandler); 
```

# jmeter - JMeter 基本认证

> ID：12560494
> 
> 赞同：53
> 
> 时间：2012-09-24T07:20:56.293
> 
> 标签：jmeter, authorization, http-authentication

我试图暗示使用 JMeter 的 Web 服务的基本身份验证过程。但每次它抛出一个错误401：未经授权。我尝试使用 HTTP 标头管理器向其添加标头授权和值。它仍然不起作用。我也尝试过使用 HTTP 授权管理器。仍然没有运气。有人可以帮忙吗。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-03-21T21:24:17.887

我通过调试来自 JMeter 的请求发现 HTTP 授权管理器模块没有正确编码用户名和密码。它在用户名之后放置一个换行符。

要针对受基本身份验证保护的端点运行 JMeter 测试，请包含 HTTP 标头管理器并自己添加基本身份验证标头：

### 手动编码凭证

*   从 MacOS 或 Linux：

    `echo -n "username:password" | base64`

*   从 Windows：

    去[这里](http://www.base64decode.org)编码你的“用户名：密码”字符串

### 添加授权标头

在 HTTP 标头管理器中，添加一个名为“Authorization”且值为“Basic [来自上面的编码凭据]”的条目

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2016-01-12T15:11:09.483

**为 JMeter 3.2 编辑 2017 年 8 月 19 日**：

*   使用答案[https://stackoverflow.com/a/12563623/460802](https://stackoverflow.com/a/12563623/460802)

基本上要绕过基本授权，您需要添加值为**Basic base64(username:password)的****Authorization**标头。问题是 JMeter 没有嵌入 base64 函数。

 **解决方案是：

**Step1**添加*BeanShell PreProcessor*（PreProcessor --> BeanShell Preprocessor）

[![在此处输入图像描述](../Images/39f54019e2e369b1c4ec6cd713b54918.png)](https://i.stack.imgur.com/FEmkH.png)

**Step2**将以下脚本添加到 PreProcessor

```
import org.apache.commons.codec.binary.Base64;
byte[] encodedUsernamePassword = Base64.encodeBase64("neo4j:1234".getBytes());
vars.put("base64HeaderValue",new String(encodedUsernamePassword)); 
```

[![在此处输入图像描述](../Images/5889fbe0ae677b613b84dcb68c660b4a.png)](https://i.stack.imgur.com/YM4O5.png)

**Step3**添加HTTP头管理器

[![在此处输入图像描述](../Images/01f158f57cebac6d8fde26762442087b.png)](https://i.stack.imgur.com/1sHx0.png)

**Step4**添加具有正确值的授权标头

header 名称**Authorization**
header value **Basic ${base64HeaderValue}** （base64HeaderValue 变量由 BeanShell 预处理器初始化）

[![在此处输入图像描述](../Images/5128455c7dd2ddec463d723ef957dc7c.png)](https://i.stack.imgur.com/AijYC.png)

所以最后当你创建一个 http 请求时，Authorization 标头将使用 base64 编码的字符串传递给服务器

[![在此处输入图像描述](../Images/3b8047cc19633ff49367621089a2998c.png)](https://i.stack.imgur.com/FlmsA.png)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-09-24T10:59:22.233

请执行下列操作：

*   1/使用所有必填字段正确配置[HTTP 授权管理器](http://jmeter.apache.org/usermanual/component_reference.html#HTTP_Authorization_Manager)

*   2/ 选项 1：**使用 HTTP 4：（**默认）

*   从 JMeter 3.2 开始，无需使用授权管理器进行任何进一步配置即可

选项 2：**使用 HTTP 3.1：（**已弃用）

*   在 jmeter.properties 中，取消注释：

    ```
    httpclient.parameters.file=httpclient.parameters 
    ```

*   在 httpclient.parameters 中，取消注释：

    ```
    http.authentication.preemptive$Boolean=true 
    ```

如果你想学习 JMeter，这[本书](https://leanpub.com/master-jmeter-from-load-test-to-devops)由项目的 3 位开发人员编写，将为你提供帮助

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-06-11T11:32:09.330

确保为基本 URL 提供协议，即：“ [http://localhost](http://localhost) ”而不是“localhost”

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-08-29T13:10:48.640

正如 Ryan T 所说，在 HTTP 标头管理器中，添加一个带有名称`"Authorization"`和值`"Basic [encoded credentials from above]"`但没有`[]`.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-03-04T12:53:20.523

如果您得到响应代码为 401，则添加“HTTP 授权管理器”配置元素 [![在此处输入图像描述](../Images/e56b436b526a3cff73860f258db6a3fd.png)](https://i.stack.imgur.com/hqvnr.png)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-03T05:08:30.600

您可以轻松地在 auth 请求中使用**JSON Extractor**进行身份验证，以将令牌存储在变量中，然后您只需要在需要**令牌**时使用它，为了使用它，您将需要一个使用该变量的**HTTP 标头管理器**可以按照屏幕截图获得明确的说明。

**JSON 提取器配置：** **HTTP 标头管理器配置：**[![JSON 提取器](../Images/42f477fbe90d7c8ec907e021d303b01b.png)](https://i.stack.imgur.com/ipJ6t.png) ** [![HTTP 标头管理器](../Images/ed37d2a6cf7fbd912a314a6c3b670071.png)](https://i.stack.imgur.com/qOTLC.png)**

 *** * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-10-04T17:41:07.950

添加使用用户定义变量中的用户名和密码的@yurko 的细微变化。（对于 3.2 之前的 Jmeter）

```
import org.apache.commons.codec.binary.Base64;
String username = vars.get("USERNAME");
String password = vars.get("PASSWORD");
String combineduserpass = username + ":" + password;
byte[] encodedUsernamePassword = Base64.encodeBase64(combineduserpass.getBytes());
vars.put("base64HeaderValue",new String(encodedUsernamePassword)); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-02-11T16:08:41.920

参考上面的第一个答案，现在必须修复您提到的不正确编码问题，因为 Apache 3.1 确实在 HTTP Auth Manager 中正确编码了 username:password

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-11-20T19:01:12.260

我正在使用 Jmeter 3.3

转到 Jmeter on User 选择 add 然后 HTTP Authorization Manager

[![在此处输入图像描述](../Images/70d3bb443cb7a1eb5ec8da5b8c11822f.png)](https://i.stack.imgur.com/NfjAM.png)

然后添加你的网址，用户名，密码

[![在此处输入图像描述](../Images/e6569f3e49ea90ab631d853a9ac8733a.png)](https://i.stack.imgur.com/esjf9.png)

如果响应类型为 json，则添加 HTTP 标头管理器

[![在此处输入图像描述](../Images/21fb1cf3b708658c5c1ba24fc7f7f9f3.png)](https://i.stack.imgur.com/RzNcI.png)

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2016-01-08T20:25:55.777

更新您 2013 年答案的良好发现：

**添加 HTTP Header Manager 行后**，HTTP4 选项也适用于当前 Jmeter 版本 2.13 ，其中包含：****

 **```
name="Authorization", value="Basic [base64-encoded user/password string]" 
```

*在当前主机 amazon linux 上验证，具有从 apache 2.4 到 tomcat8 的反向代理；tomcat8 识别用户凭据而不是抛出 401 状态。*******

# android - 在 android 4.0 及更高版本中使用 datepicker 时..如何避免日历视图

> ID：12560495
> 
> 赞同：4
> 
> 时间：2012-09-24T07:21:05.343
> 
> 标签：android, android-datepicker

我在 android 2.2 中完成了一个项目，其中包含一个日期选择器并根据他的屏幕大小为其设置属性，但是当我在 android 4.0 中安装它时...日期选择器视图包括一个日历视图 ....what to避免在 android 4.0 中使用日历视图和日期选择器...下面是 2.2 和 4.1 中日期选择器的图像

![日期选择器的 android 2.2 图像](../Images/faa04297b669a4f7a6c463ccd8aa1e82.png)

![日期选择器的 android 4.1 图像](../Images/84dd4b00b2e6e02f48c3c5541fedb223.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-24T07:25:38.820

您可以使用`yourDatepicker.setCalendarViewShown(false);`

此方法适用于`Api >= 11`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T23:24:04.310

使用 Raval 的代码。但要在 Android 版本 11 以下运行它，请执行以下操作：

```
int currentapiVersion = android.os.Build.VERSION.SDK_INT;
        if (currentapiVersion >= 11) {
          try {
            Method m = datePicker.getClass().getMethod("setCalendarViewShown", boolean.class);
            m.invoke(datePicker, false);
          }
          catch (Exception e) {} // eat exception in our case
        } 
```

现在您可以在所有 Android 版本上使用它（API > 3 以上）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-10T13:11:56.130

如果你有 DatePicker 的实例，你必须在你的方法中只写这个`

```
 int currentapiVersion = android.os.Build.VERSION.SDK_INT;
        if (currentapiVersion >= 11) {
            yourDatePickerInstance.setCalendarViewShown(false);
        }` 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-21T08:08:53.333

为以后的 API 避免 DatePicker 中的日历

添加

```
android:datePickerMode="spinner" 
```

代替

```
android:calenderViewShown="false" 
```

在 DatePicker 小部件的布局 XML 中。

# sockets - 非阻塞套接字上的发送操作何时完成？

> ID：12560496
> 
> 赞同：0
> 
> 时间：2012-09-24T07:21:43.403
> 
> 标签：sockets, nonblocking

假设这`sock`是一个以非阻塞模式打开的 unix 套接字和以下函数

```
void send_int(int sock, int flags) {
    int x = 0xff;
    send(sock, &x, sizeof(int), flags);
} 
```

这段代码“正确”吗？我不确定缓冲区（`x`）是否在发送返回之前被复制到某个发送缓冲区中，或者有可能返回得太早，`send`然后`send_int`使用不存在的缓冲区，因为它只在堆栈上......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T09:38:15.957

不，在非阻塞模式下完成发送操作之前，不必保留用户发送缓冲区。所以你的代码很好。

在内部，发送缓冲区被复制到套接字缓冲区 (SKB) 发送队列并复制到内核空间。

参考：

*   [发送手册页](http://www.kernel.org/doc/man-pages/online/pages/man2/sendmsg.2.html)没有提到这种需要
*   Dave Miller 的[SKB 工作原理](http://vger.kernel.org/~davem/skb.html)

# load-balancing - 使用 Akka 在多个后端服务器之间负载均衡 HTTP SOAP 请求

> ID：12560497
> 
> 赞同：0
> 
> 时间：2012-09-24T07:21:46.000
> 
> 标签：load-balancing, akka, sticky

我正在从事一个具有以下要求的项目：

1.  在多个后端服务器上执行基于粘性的负载平衡（基于 SOAP 会话 ID）。
2.  可以插入我自己的基于自定义的负载均衡器。
3.  易于编写和部署。
4.  一个中央配置文件（可能是一个 XML），用于处理所有后端服务器。
5.  从此配置文件中轻松提取节点（可能使用 xpath）。

我尝试使用骆驼一段时间，但无法使用它执行某些任务。所以想试试阿卡。akka 有可能满足上述要求吗？

如果是这样，akka 或代理示例中是否有负载平衡示例？

非常感谢一些反馈。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T13:54:50.730

你可以用 Akka 做所有你描述的事情。

你没有提到你正在使用什么语言，Scala 或 Java。我已经包含了 Scala 文档的链接。

在你对 Akka 做任何事情之前，你必须阅读文档并了解 Akka 是如何工作的。

[http://doc.akka.io/docs/akka/2.0.3/](http://doc.akka.io/docs/akka/2.0.3/)

这样做，您会发现 Akka 非常适合您所描述的项目，但需要注意一些小问题。

阅读文档后，以下答案应该很有意义。

> 在多个后端服务器上执行基于粘性的负载平衡（基于 SOAP 会话 ID）。

负载平衡已经是框架的一部分（在 Akka 中称为路由[http://doc.akka.io/docs/akka/2.0.3/scala/routing.html](http://doc.akka.io/docs/akka/2.0.3/scala/routing.html)）和远程处理（http://doc.akka.io /docs/akka/2.0.3/scala/remoting.html) 将负责后端服务器。您可以轻松地将两者结合起来。

据我所知，粘性负载平衡的想法不是 Akka 的一部分，但我可以设想这是通过使用会话 ID 作为键和 Actor 名称（或路径）作为值的 Map 来实现的。一个快速的 actorFor 将负责其余的工作。没有经过深思熟虑，但应该让您很好地了解从哪里开始。

> 可以插入我自己的基于自定义的负载均衡器。

请参阅路由文档。

> 易于编写和部署。

这取决于您的能力和努力，但是在您阅读文档的某些部分后，您应该在几个小时内构建概念验证。

部署可能有点令人沮丧，主要是因为文档在使用远程组件部署 Akka 网络方面并不是很好。但是，网络上有足够多的示例，您可以弄清楚如何完成它......最终。一旦你做了一次，这没什么大不了的。

> 一个中央配置文件（可能是一个 XML），用于处理所有后端服务器。

Akka 使用 Typesafe Config (https://github.com/typesafehub/config)，它比 XML 更容易使用（但我讨厌 XML，所以请谨慎对待）。至于中央配置，我不确定您要完成什么，但这听起来像是可以使用远程参与者创建来解决的问题。再次，请参阅远程处理文档。

> 从此配置文件中轻松提取节点（可能使用 xpath）。

Akka 提供了一个查找方法 .actorFor。系统启动并运行后，无需转到配置文件。

> 如果是这样，akka 或代理示例中是否有负载平衡示例？

谷歌是你的朋友。

# javascript - 所有浏览器都支持文件大小验证代码

> ID：12560509
> 
> 赞同：0
> 
> 时间：2012-09-24T07:23:01.127
> 
> 标签：javascript

我有一个应用程序，我需要检查文件大小是否小于或等于 1MB。为此，我正在编写一个 javascript 函数，如下所示 -

```
function getFileSize1()
{ 
 var myFSO = new ActiveXObject("Scripting.FileSystemObject");
 var filepath = document.form1.attachment.value;
 var error="";

 if(filepath=="")
    return error;
 else
{
    var selectedfile = myFSO.getFile(filepath);
    var size = selectedfile.size;

    if(size >= 1048576)
    {
        error="File size of First Attachment should be less than or Equal to 1 MB \n";
    }
    return error;
}
} 
```

以上代码在IE6下运行，但不适用于IE9、Mozila最新版和Chome。任何人都可以告诉如何在所有浏览器中运行上述代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T07:25:12.900

Activex 仅在 IE 中受支持，其他浏览器不支持，您可能需要检查类似的线程

[Firefox 或 Chrome 中的 ActiveXObject（不是 IE！）](https://stackoverflow.com/questions/7022568/javascript-activexobject-in-firefox-or-chrome-not-ie)

# solr - 如何配置自定义 solr 实例以使用 Morfologik？

> ID：12560515
> 
> 赞同：2
> 
> 时间：2012-09-24T07:23:26.513
> 
> 标签：solr, polish

我有一个在 tomcat 中运行的自定义 solr 实例。我遵循 SolrWiki 中的 tomcat 部署教程。我想索引我的波兰语数据，我想使用 Morfologik。所以我关注[了 http://solr.pl/en/2012/04/02/solr-4-0-and-polish-language-analysis/](http://solr.pl/en/2012/04/02/solr-4-0-and-polish-language-analysis/)。我在 SOLR_HOME 中创建了 lib 文件夹，将所有库添加到此文件夹，更改架构以使用 solr.MorfologikFilterFactory 但我仍然收到这样的错误：

'collection1：org.apache.solr.common.SolrException：org.apache.solr.common.SolrException：[schema.xml] 字段类型“text_pl”的插件初始化失败：[schema.xml] 分析器/过滤器的插件初始化失败：加载类“solr.MorfologikFilterFactory”时出错

我认为路径有问题。我希望如此，因为如果不是这样，它可能很难解决......

任何人都可以帮助我吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T12:24:46.203

您可以将 lib 路径添加到 solrconfig.xml - 请参阅随示例提供的 xml。你是使用 SolrCloud 模式还是独立模式？

# android - Android 将数据传递给 Activity 类？

> ID：12560516
> 
> 赞同：0
> 
> 时间：2012-09-24T07:23:34.860
> 
> 标签：android

当我们启动一个活动时，无论如何都可以访问类的对象，以便我可以调用类中的设置数据。就像是

```
 Intent intent=new Intent (a.this, b.class);
  startActivity(intent); 
```

现在我知道堆上应该有一个 b.class 的对象，并且在创建对象的 onCreate 之前，我想将一些数据传递给该类。现在我知道我可以对 Bundles 做同样的事情，但是通过 Bundles 传递对象变得很难看。如果我有对 b.class 的引用，我可以调用类的方法吗？我说得有道理吗。这可能吗 ？

亲切的问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T07:38:23.997

“这可能吗？” - 大概是。如果两个活动都“存在”在同一个进程中，您可以从 A 获取/持有对 B 的引用并调用任何公共方法和/或写入任何公共变量。然而：

“我说得有道理吗？” - 可能：没有。对于初学者来说，保持一个活动对另一个活动的引用可能意味着您的内存占用量将大于所需（并且可能也比您预期的要大：您的活动 B 可能用于膨胀 B 的布局，如果B 留在附近）。另外，如果您的活动是由 A 以外的其他组件启动的，您会怎么做？每个这样的组件是否都需要引用 B 才能事先调用必要的公共方法/变量？不大好。

通常，应根据可用于启动它的 Intent 来描述活动的界面。这包括：启动它的操作、应该对其执行操作的数据以及设置活动的附加信息。既然您已经说过您知道如何使用捆绑包（另一个相当不完整的答案为您提供了一个简单的示例），我只会说：去吧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T07:26:22.797

这将是您的清单，此类可用于设置值，然后在任何项目 java 类中获取值

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="package name"
      android:versionCode="1"
      android:versionName="1.0">
    <application android:icon="@drawable/somee" android:label="@string/app_name" android:noHistory="true" android:name="MainApplication" >
        <activity android:name=".first Page" android:noHistory="true"
                  android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity> 
```

然后在您的主应用程序中

```
public class MainApplication extends Application{

    private static MainApplication instance;
    private String _sUserId;

    @Override
    public void onCreate(){
        super.onCreate();
        instance=this;
    }

    public static Main Application getInstance(){
        return instance;
    }

    public void setUserId(String s){
        _sUserId=s;
    }

    public String getUserId(){
        return _sUserId; 
```

}

您可以在任何 java 文件中获取值和设置值，例如

```
 MainApplication o=((MainApplication)getApplicationContext());
        Integer UserID=o.getUserID();//you need to set user where you want to  to get the value of user id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T08:11:46.377

您可以使用带关键字的全局变量`static`。在您的类中定义您的对象，例如SampleClass，然后在onCreate 方法中调用变量SampleClass.yourObject。

# android - OnClick 事件仅在 edittext 上第二次起作用

> ID：12560519
> 
> 赞同：59
> 
> 时间：2012-09-24T07:24:06.823
> 
> 标签：android

我有一个编辑文本，当用户单击此编辑文本时，我想显示一个警报对话框。
我的代码如下：

```
 edt.setInputType(InputType.TYPE_NULL);
            edt.setFocusableInTouchMode(true);
            edt.requestFocus();

            edt.setCursorVisible(false);

            edt.setOnClickListener(new OnClickListener() {

                public void onClick(View v) {
                    CommentDialog.buildDialog(mContext, identifier, false, edt.getId());
                }
            }); 
```

我不希望用户单击编辑文本时出现键盘，因此我将 inputtype 设置为 TYPE_NULL。
但是当edittext没有焦点并且我点击它时，onClick事件不会被执行。当我再次单击它时，警报对话框正确显示。

我该如何解决？

* * *

## 回答 #1

> 赞同：134
> 
> 时间：2012-09-24T07:30:49.197

只需尝试将其添加到您的`XML`文件中。`widget`获得焦点时，您的键盘会弹出。因此，为了防止这种行为将 focusable 设置为`false`. 然后正常使用`OnClickListener`。

```
<EditText
  android:focusable="false"
  ...
/> 
```

现在，它应该可以工作了。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-09-24T07:29:46.590

您可以使用`onTouch`代替`onClick`，因此是否`EditText`有焦点都没有关系。

```
edt.setOnTouchListener(new OnTouchListener() {
    @Override
    public boolean onTouch(View v, MotionEvent event) { 
        CommentDialog.buildDialog(mContext, identifier, false, edt.getId());                    
        return false;
    }
}); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-24T07:40:13.657

没什么可做的，你只需要

```
edt.setFocusable(false); 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-07-01T11:28:38.130

如果 focusableInTouchMode 为 true，则仅在第二次触摸时触发触摸，因此除非您希望在这种情况下使用 false 作为 focusableInTouchMode。如果您想在视图中启用可聚焦性，请设置 focusable true

```
<EditText android:focusable="true"  android:focusableInTouchMode="false" ... /> 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-09-24T07:30:37.057

使您的**警报对话框**出现在

> setOnFocusChangedListener()

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-10-03T22:52:58.967

您应该添加 onFocusChangeListener：

```
edt.setKeyListener(null);
edt.setOnFocusChangeListener(new View.OnFocusChangeListener() {
    @Override
    public void onFocusChange(View v, boolean hasFocus) {
        if(hasFocus)
        {
            edt.callOnClick();
        }
    }
});
edt.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View v) {
        CommentDialog.buildDialog(mContext, identifier, false, edt.getId());
    }
}); 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-11-07T19:33:47.110

避免使用 a `FocusChangeListener`，因为当你真的不需要它时（例如，当你进入一个活动时）它会表现得不规律。只需像这样设置`OnTouchListener`一个`OnClickListener`：

```
 @Override
    public boolean onTouch(View view, MotionEvent event) {
        switch (event.getAction()) {
            case MotionEvent.ACTION_DOWN:
                view.requestFocus();
                break;
        }
        return false;
    } 
```

这将导致您`EditText`在 onClick 调用之前获得焦点。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-09-24T07:30:28.543

如果您不需要键盘，则不要设置输入类型，而是使用“Editable=false”和“Focus=false”。

也许对你有帮助。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2017-06-07T13:38:14.057

当软键盘弹出时，尝试从 EditText 再现“点击”声音时，这对我来说是一个真正的问题；我每秒钟只有一次点击。为我解决的问题与@neaGaze 的工作相反。这在 my_layout.xml 中对我有用：

```
<EditText android:focusable="true"  android:focusableInTouchMode="true" ... /> 
```

它允许每次用户输入 EditText 时发生单击声音/事件，同时还允许显示软键盘。当然，您必须处理 OnClickListener 才能发生这种情况，即使您什么都不做，就像这样：

```
myEditText = (EditText) findViewById(R.id.myEditText);
...

// implement the onClick listener so we get the click sound and event if needed
myEditText.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View view) {
        //do something or nothing; up to you
    }
}); 
```

说到那个讨厌的软键盘，如果我从 Dialog 风格的 Activity 中完成，软键盘向上，无论我尝试什么，当我返回 MainActivity 时，键盘仍然向上。我已经尝试了所有常见的建议，例如[关闭/隐藏 Android 软键盘](https://stackoverflow.com/questions/1109022/close-hide-the-android-soft-keyboard)、[如何以编程方式关闭 Android 软键盘](https://stackoverflow.com/questions/8785023/how-to-close-android-soft-keyboard-programmatically)等。这些都不起作用。

就我而言，我不需要 MainActivity 中的软键盘。在我的 AndroidManifest.xml 文件中的 MainActivity 部分中起作用的是以下内容

```
<activity

    android:name=".MainActivity"
    android:windowSoftInputMode="stateAlwaysHidden">

</activity> 
```

# android-4.0-ice-cream-sandwich - 使用意图 android 4.0 打开相机？

> ID：12560523
> 
> 赞同：1
> 
> 时间：2012-09-24T07:24:37.777
> 
> 标签：android-4.0-ice-cream-sandwich, android-camera-intent

我试图创建一个简单的应用程序来捕获图像并向用户发送电子邮件。它工作正常<4.0。但是当我在 4.0 及更高版本（如 htc me 4.03）上对其进行测试时：

按钮单击事件以捕获图像：

```
Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
                cameraIntent.putExtra(MediaStore.EXTRA_SCREEN_ORIENTATION, ActivityInfo.SCREEN_ORIENTATION_PORTRAIT); 
                cameraIntent.putExtra(MediaStore.EXTRA_OUTPUT,Uri.fromFile(new File(imagepath)));
                startActivityForResult(cameraIntent, CAM_REQUREST); 
```

和 onActivityResult

```
Log.d("System out", "i am here..");
    if(resultCode == RESULT_OK){
        if(requestCode == CAM_REQUREST ){
            Log.i("System out","successfully captured an image");
        }
    }else{
        Log.i("System out","Cancel...");
    } 
```

但是当我单击按钮捕获图像时 onActivityResult 代码执行而无需等待使用意图捕获或取消图像。

虽然我在 i-tab（intex 4.03）上测试了相同的应用程序，但它工作正常。

是设备特定的问题吗？我该如何解决这个问题？

onActivityResult() 在返回 RESULT_OK 或 CANCEL 之前调用。

谢谢。

# mysql - 如何在 MySQL 中获取 2 列的所有不同组合

> ID：12560525
> 
> 赞同：2
> 
> 时间：2012-09-24T07:24:39.520
> 
> 标签：mysql, sql

我有一个`t`包含值的表

```
+------+------+------+
| col1 | col2 | col3 |
+------+------+------+  
|    1 |    2 | x    |
|    1 |    3 | x    |
|    1 |    4 | x    |
|    2 |    1 | x    |
|    2 |    3 | x    |
|    2 |    4 | x    |
+------+------+------+ 
```

我需要这个结果：

```
+------+------+------+
| col1 | col2 | col3 |
+------+------+------+  
|    1 |    2 | x    |
|    1 |    3 | x    |
|    1 |    4 | x    |
|    2 |    3 | x    |
|    2 |    4 | x    |
+------+------+------+ 
```

注 (1,2) 与 (2,1) 相同

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T07:36:20.937

为了使用该`DISTINCT`子句，您需要手动对前两列进行排序：

```
SELECT DISTINCT
    CASE WHEN (col1 < col2) THEN col1 else col2 END AS Col1,
    CASE WHEN (col1 < col2) THEN col2 else col1 END AS Col2,
    col3
FROM t 
```

[看到这个 SQLFiddle](http://sqlfiddle.com/#!2/4f65f/9)

# php - 点击获取超链接url

> ID：12560528
> 
> 赞同：-3
> 
> 时间：2012-09-24T07:24:48.313
> 
> 标签：php, html

如上所述，我希望一旦用户单击超链接，它应该复制到 PHP 中的变量中。有可能做到吗？

这是我尝试过的，但似乎没有任何结果？

**代码：**

```
 <script type="text/javascript">
    function getdl(){
        var dlink = (document.getElementById('getdllink').getAttribute('onclick'))
         <? $url ?> = var dlink
    }
    </script>

<a id="getdllink" onclick="getdl()" href="#"><strong>Master Prospectus</strong></a></font>
            <? echo $url; ?> 
```

我做错事情了？请帮忙。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T07:26:51.940

你在做什么是不可能的......但它可以通过ajax来完成。

php的作用是：

![在此处输入图像描述](../Images/ce72eeadccea98fb74dfd6843dfbbc76.png)

因此，您需要进行 ajax 调用并将其分配给 php 变量。

我建议你使用jquery。它非常简单有效。

您可以通过以下方式发送数据

jQuery：

```
$("id or class of link").live("click",function(){
var val = $("#getdllink").val();

$.ajax({
  type: "POST",
  url: "some.php",
  data: { value :  val    }
}).done(function( msg ) {
  alert( "Data Saved: " + msg );
});
 return false; // Prevent browser from visiting link
}) 
```

在 some.php 中

```
$var = $_POST['value']; 
```

**上述方法不需要刷新页面**

通过 url 发送这个检查@PLB 的答案，这很好

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T07:27:12.770

是的，你做错了。PHP是服务器端的，所以它在客户端之前执行。这意味着您不能直接将 javascript 变量分配给 php 变量，因为它已经被解释过了。您必须使用 ajax 发送它。

这是示例：

```
var http = new XMLHttpRequest();
var myVar = 'myValue';
http.onreadystatechange=function(){
    if (http.readyState==4 && http.status==200){
        //Do whatever you want with respnse you'll get in http.responseText
        //http.responseText will contain text what php will print. In this
        //example value of myVar.
    }
}
http.open("GET","yourScript.php?myvar=" + myVar);
http.send(); 
```

在 PHP 方面，您可以执行以下操作：

```
echo $_GET['myvar']; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T07:31:32.620

下面是如何在没有 AJAX 或 PHP 的情况下做到这一点......

```
<script type="text/javascript">
function getdl(){
    var dlink = (document.getElementById('getdllink').getAttribute('href'))
    document.getElementById('dest').innerHTML = dlink
    return false
}
</script>

<a id="getdllink" onclick="return (getdl())" href="http://www.google.com"><strong>Master Prospectus</strong></a><br />

<span id="dest"></span> 
```

# java - 将 javascript 变量分配给速度模板变量

> ID：12560541
> 
> 赞同：2
> 
> 时间：2012-09-24T07:25:23.663
> 
> 标签：java, javascript, velocity

在我的速度模板中，我有一个 javascript 变量，例如

```
var workflowInstanceNameText = document.getElementById('workflowInstanceName').value; 
```

我想将 javascript 变量分配给速度模板变量。

```
#set(workflowName = 'someexpression here'); 
```

在某些表达式中，我尝试如下但它没有赋值

```
 #set(workflowName = workflowInstanceNameText);
 #set(workflowName = $workflowInstanceNameText); 
```

任何帮助表示赞赏。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T09:08:29.517

速度在服务器端工作。JavaScript 在客户端（浏览器）上工作。您可以使用 Velocity 生成 JavaScript，但反之则不行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T09:08:10.163

速度模板发生在服务器端。因此，如果您希望客户端的 javascript 变量在服务器端的速度模板阶段可用，则必须将该变量作为请求参数发送到服务器端 servlet/action 并引用该请求速度模板中的参数。

# php - 如何获取有关从服务器请求页面的客户端的信息？

> ID：12560544
> 
> 赞同：2
> 
> 时间：2012-09-24T07:25:38.890
> 
> 标签：php, mysql, bash, shell, webserver

我需要获取有关从服务器请求页面的客户端的信息。我需要获取有关客户端 IP 以及请求哪个页面的信息？我更喜欢控制台应用程序，即 linux[Ubuntu] 中的 Shell 或 Bash 脚本。如果请求页面，控制台或终端会立即打印消息。在该消息中，它应该包含所请求的 IP 地址和页面。我还想通过 MySQL 将 IP 地址和请求的页面保存到数据库中。感谢您的回答和解决方案。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T09:00:53.213

尝试在网络服务器访问日志上使用`watch`++ 。就我而言，它是`grep``date`

```
watch -n -1 'd=`date +"%d/%b/%Y:%T"`;grep $d /pgms/nginx1117/logs/access.log ' 
```

您必须注意访问日志中的日期格式。输出也会在一秒钟内消失。

[编辑：使用以下将显示时间延长至 3 秒。再次，您将不得不根据您的配置对其进行自定义。]

```
watch -n 1 '
  d0=`date +"%S"`;
  if [ $d0 -ne 0 ]; then d1=$(printf %02d `expr $d0 - 1`); else d1=59; fi ; 
  if [ $d1 -ne 0 ]; then d2=$(printf %02d `expr $d1 - 1`); else d2=59; fi ; 
  d=`date +"%d/%b/%Y:%H:%M:"`;
  grep -e "$d$d0" -e "$d$d1" -e "$d$d2" /pgms/nginx1117/logs/access.log | awk "{ print \$1,\$7 }" 
' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T07:28:04.903

你必须`$_SERVER[]`在 php.ini 中使用。

这将为您提供所需的客户端和服务器的所有信息。

[http://php.net/manual/en/reserved.variables.server.php](http://php.net/manual/en/reserved.variables.server.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T07:34:40.317

```
For all the server variable use You have to use $_SERVER[] in php.
@Yogesh Suthar is absolutely correct and being specific you can use these variables.

For IP address
$_SERVER['REMOTE_ADDR'];

For Request Page 
$_SERVER["HTTP_REFERER"]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-24T12:10:35.100

嘿，我的问题解决了。刚刚从@air4X 得到线索

```
watch -n -1 'd=`date +"%d/%b/%Y:%T"`;tail -n 20 /opt/lampp/logs/access_log ' 
```

感谢您的大力帮助....

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-12-25T14:14:02.810

运行这个小的 PHP 脚本：

```
<?php
foreach($_SERVER as $key => $value){
echo '$_SERVER["'.$key.'"] = '.$value."<br />";
}
?> 
```

# xcode - Xcode 是从 Internet 下载的应用程序。

> ID：12560559
> 
> 赞同：5
> 
> 时间：2012-09-24T07:26:41.003
> 
> 标签：xcode

我是 Mac 新手。我下载了 XCode_4.5.dmg。当我双击它时，它会打开一个新窗口并显示一个文件 - XCode。当我双击它时，我收到一条警告：“Xcode 是从 Internet 下载的应用程序。您确定要打开它吗？”

我想我没有正确安装 XCode。所以我尝试了 Control + Click 但没有任何安装选项。那么，我该如何安装呢？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T07:29:03.907

安装 XCode 的最佳方式是使用 Mac App Store。这将为您处理安装和设置，以及处理您的更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T07:38:21.300

[如果您从安全的地方（例如Apple Connect](http://connect.apple.com)）下载 DMG 文件，请不要担心警告消息。该消息来自 Mac OS X，它会警告您确认您确实要打开该文件。

打开 DMG 文件后，您需要将 Xcode 应用程序包拖到 Mac 的 Applications 文件夹中。

安装 Xcode 的一种更简单的方法是使用**App Store**。App Store 适用于 Lion (10.7)、Mountain Lion (10.8) 和 Snow Leopard (10.6) 的一些最新版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T07:38:07.113

这是 Mac 上的常见消息。对于下载的所有程序，当您第一次运行它时，您将看到该消息。您单击“确定”，该消息将不再显示。

现在您实际要做的是将 XCode 图标从 .dmg 中拖到 Applications 文件夹中（您可以在侧边、底部或左侧的任务栏中看到它，具体取决于您的系统配置方式。这需要几分钟将文件解压缩并移动到应用程序。然后当您单击应用程序时，XCode 应该在那里。当然，第一次单击它时，Mac 会问同样的问题：'XCode 是从 Internet 下载的应用程序。 ...'说好，你就准备好了。祝你好运！

# jquery - Handsontable中的反向列和行标题

> ID：12560565
> 
> 赞同：1
> 
> 时间：2012-09-24T07:27:04.420
> 
> 标签：jquery, html, handsontable

通常[HandsOnTable](http://handsontable.com/)在列标题中有 A、B、C..，在行标题中有 1、2、3..。

我想反转它。即，A,B,C.. 用于行标题，1,2,3.. 用于列标题。

谢谢桑托什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T15:18:23.117

您可以呈现自定义行/列标题。以下代码片段来自文档。您可以使用标题准备一个适当的数组，然后将其传递给 colHeaders / rowHeaders：

```
$container.handsontable({
  colHeaders: [
    "<b>Bold</b> and <em>Beautiful</em>",
    "Some <input type='checkbox' class='checker'> checkbox"
  ]
}); 
```

这是文档的链接：http: [//handsontable.com/demo/renderers_html.html#header](http://handsontable.com/demo/renderers_html.html#header)

# java - 在负载下使用 netty 3.2.7 和 3.3.1 观察到 ClosedChannelException

> ID：12560567
> 
> 赞同：3
> 
> 时间：2012-09-24T07:27:16.263
> 
> 标签：java, ssl, netty, nio

当我的 netty 服务器未加载时，一切正常。但是在负载下它开始失败。目前我正在使用所有默认设置（没有设置任何选项）。请建议我是否需要设置任何选项来处理 2k+ 并发连接（在加载期间可能会非常频繁地关闭和打开）

这是 netty 3.2.7 的堆栈跟踪。我升级到 netty 3.3.1 ，但仍然失败。

> 2012-09-19 16:17:54,864 新的 I/O 服务器工作者 #1-11 调试 org.jboss.netty.handler.ssl.SslHandler 42 在写入非应用程序数据 java.nio.channels.ClosedChannelException 时吞下异常: null at org.jboss.netty.channel.socket.nio.NioWorker.cleanUpWriteBuffer(NioWorker.java:645) ~[netty-3.2.7.Final.jar:na] at org.jboss.netty.channel.socket。 nio.NioWorker.writeFromUserCode(NioWorker.java:372) ~[netty-3.2.7.Final.jar:na] at org.jboss.netty.channel.socket.nio.NioServerSocketPipelineSink.handleAcceptedSocket(NioServerSocketPipelineSink.java:137) ~ [netty-3.2.7.Final.jar:na] 在 org.jboss.netty.channel.socket.nio.NioServerSocketPipelineSink.eventSunk(NioServerSocketPipelineSink.java:76) ~[netty-3.2.7.Final.jar:na]在 org.jboss.netty.channel.Channels.write(Channels.java:632) ~[netty-3.2.7.Final.jar:na] 在 org.jboss。netty.channel.Channels.write(Channels.java:593) ~[netty-3.2.7.Final.jar:na] at org.jboss.netty.handler.ssl.SslHandler.wrapNonAppData(SslHandler.java:831) ~ [netty-3.2.7.Final.jar:na] at org.jboss.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:915) ~[netty-3.2.7.Final.jar:na] at org .jboss.netty.handler.ssl.SslHandler.wrapNonAppData(SslHandler.java:849) ~[netty-3.2.7.Final.jar:na] at org.jboss.netty.handler.ssl.SslHandler.unwrap(SslHandler. java:915) ~[netty-3.2.7.Final.jar:na] at org.jboss.netty.handler.ssl.SslHandler.decode(SslHandler.java:620) ~[netty-3.2.7.Final.jar :na] 在 org.jboss.netty.handler.codec.frame.FrameDecoder.callDecode(FrameDecoder.java:282) ~[netty-3.2.7.Final.jar:na] 在 org.jboss.netty.handler.codec .frame.FrameDecoder.messageReceived(FrameDecoder.java:216) ~[netty-3.2.7.Final.jar:na] 在 org.jboss。netty.channel.Channels.fireMessageReceived(Channels.java:274) ~[netty-3.2.7.Final.jar:na] at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:261) ~[netty -3.2.7.Final.jar:na] at org.jboss.netty.channel.socket.nio.NioWorker.read(NioWorker.java:351) ~[netty-3.2.7.Final.jar:na] at org .jboss.netty.channel.socket.nio.NioWorker.processSelectedKeys(NioWorker.java:282) ~[netty-3.2.7.Final.jar:na] at org.jboss.netty.channel.socket.nio.NioWorker。运行（NioWorker.java:202）~[netty-3.2.7.Final.jar:na] at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source) [na:1.6.0_26] at java.util。 concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) [na:1.6.0_26] at java.lang.Thread.run(Unknown Source) [na:1.6.0_26]na] 在 org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:261) ~[netty-3.2.7.Final.jar:na] 在 org.jboss.netty.channel.socket.nio.NioWorker。在 org.jboss.netty.channel.socket.nio.NioWorker.processSelectedKeys 上读取（NioWorker.java:351）~[netty-3.2.7.Final.jar:na]（NioWorker.java:282）~[netty-3.2 .7.Final.jar:na] at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:202) ~[netty-3.2.7.Final.jar:na] at java.util .concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source) [na:1.6.0_26] at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) [na:1.6.0_26] at java.lang.Thread.run （来源不明）[na:1.6.0_26]na] 在 org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:261) ~[netty-3.2.7.Final.jar:na] 在 org.jboss.netty.channel.socket.nio.NioWorker。在 org.jboss.netty.channel.socket.nio.NioWorker.processSelectedKeys 上读取（NioWorker.java:351）~[netty-3.2.7.Final.jar:na]（NioWorker.java:282）~[netty-3.2 .7.Final.jar:na] at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:202) ~[netty-3.2.7.Final.jar:na] at java.util .concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source) [na:1.6.0_26] at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) [na:1.6.0_26] at java.lang.Thread.run （来源不明）[na:1.6.0_26]2.7.Final.jar:na] 在 org.jboss.netty.channel.socket.nio.NioWorker.processSelectedKeys(NioWorker.java:282) ~[netty-3.2.7.Final.jar:na] 在 org.jboss。 netty.channel.socket.nio.NioWorker.run(NioWorker.java:202) ~[netty-3.2.7.Final.jar:na] at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source) [na :1.6.0_26] 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) [na:1.6.0_26] at java.lang.Thread.run(Unknown Source) [na:1.6.0_26]2.7.Final.jar:na] 在 org.jboss.netty.channel.socket.nio.NioWorker.processSelectedKeys(NioWorker.java:282) ~[netty-3.2.7.Final.jar:na] 在 org.jboss。 netty.channel.socket.nio.NioWorker.run(NioWorker.java:202) ~[netty-3.2.7.Final.jar:na] at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source) [na :1.6.0_26] 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) [na:1.6.0_26] at java.lang.Thread.run(Unknown Source) [na:1.6.0_26]ThreadPoolExecutor$Worker.run(Unknown Source) [na:1.6.0_26] at java.lang.Thread.run(Unknown Source) [na:1.6.0_26]ThreadPoolExecutor$Worker.run(Unknown Source) [na:1.6.0_26] at java.lang.Thread.run(Unknown Source) [na:1.6.0_26]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T23:25:10.900

我相信这个问题可能是由netty中的一个错误引起的。[我在这里](https://github.com/Datomic/datomic-java-examples/wiki/Hornet-SSL-Oddity)创建了一个可重现的测试用例，并且该错误现在已修复在netty的[3 分支上。](https://github.com/netty/netty/commit/e784a773f7dbfc4bba49e4ce88ddde82ec3c4e52)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T11:10:36.173

`ClosedChannelException`表示您继续使用自己关闭的频道。请注意，它并不指受对等方影响的连接状态：即，它并不暗示对等方已关闭连接。您已关闭此频道。

# java - Java Properties file. Problems with setProperty() method

> ID：12560572
> 
> 赞同：5
> 
> 时间：2012-09-24T07:27:42.893
> 
> 标签：java, properties, properties-file

I try to overwrite existing property value in `Properties` file using `Properties#setProperty()` method.

But I get an extra backslash...

For example I have following entry inside Properties file:

```
#url to server
url=http://192.22.222.222 
```

and when I try to overwrite value `http://192.22.222.222` by new value `http://192.33.333.333` I get followong result: `http\://192.33.333.333`

i.e. first backlash is unnecessary. I

Where is problem?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T07:32:09.460

There's no problem. When you load the file again, you won't see a backslash in the property value. The escaping code is choosing to escape all colons (and probably all equals signs) regardless of whether it's strictly required. (When they're not part of the key, you don't *have* to escape them, but it probably makes the code simpler to do so.)

So long as you're always loading the code using one of the `Properties.load` methods, you should see no problems at all.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T07:32:37.967

From [the doc](http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html#load%28java.io.Reader%29):

> The key contains all of the characters in the line starting with the first non-white space character and up to, but not including, the first unescaped `'='`, `':'`, or white space character other than a line terminator. All of these key termination characters may be included in the key by escaping them with a preceding backslash character; for example,
> 
> `\:\=`
> 
> would be the two-character key `":="`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T07:34:57.680

Java properties will escape some characters like colon when writing a property value. See [Properties#store](http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html#store%28java.io.Writer,%20java.lang.String%29).

This is considered a feature because the Properties format allows colons as key/value separators (see the source of Properties#load method)

# c# - 将新项目插入 ListBox 并将其作为第一个条目放置并选择它

> ID：12560574
> 
> 赞同：-2
> 
> 时间：2012-09-24T07:27:55.197
> 
> 标签：c#, visual-studio-2010, listbox

目前，我有以下内容：

1.  一个`SqlDataSource`被调用`SqlDataSourceVenue`（它被配置为从 SQL Server 2008 内的表中检索数据）
2.  一个名为 ListBox 的列表框`ListBoxVenue`（也可以`SqlDataSourceVenue`通过使用`Choose Data Source`插图 A 中的 来配置使用）
3.  一个代码（代码 A），它将一个项目插入到操作属性（图 B）`DataBound`选项下的列表框中。

**插图 A**

![在此处输入图像描述](../Images/85545302fdbaf9f6285deb581fc6ceab.png)

**代码 A**

```
 protected void BoundedItemsVenue(object sender, EventArgs e)
    {
        ListBoxVenue.Items.Add("{BLANK}");

    } 
```

**图 B**

![在此处输入图像描述](../Images/fdd525e4b0f64c1e5f6033c8e9749b45.png)

当前的问题是新的Item`{BLANK}`将始终作为ListBox 的最后一个条目放置。

是否可以让我的新项目作为我的列表框中的第一个条目出现或放置，并且还可以选择该新项目？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T07:34:35.310

```
ListBoxVenue.Items.Insert(0, new ListItem("","{BLANK}"));
ListBoxVenue.SelectedIndex = 0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T07:31:58.190

你可以这样做

```
ListBoxVenue.Items.Insert(0, new ListItem("","{BLANK}")); 
```

# sql - 添加一个 . SELECT 中每第三个数字/填充 0

> ID：12560581
> 
> 赞同：1
> 
> 时间：2012-09-24T07:28:52.163
> 
> 标签：sql, ms-access, ms-access-2007

在一个 MS Access 2007 项目中，我有一个包含以下记录源的报告：

```
SELECT SomeTable.SomeCol FROM SomeTable; 
```

`SomeCol` *长度应*为 1、2、3、6 或 9 位。

让我们先来看看 3、6 和 9。说它是`123`- 这应该保持为`123`. 如果是`123456`，则应将其更改为`123.456`。如果是`123456789`，则应将其更改为`123.456.789`。如果是`1`, 或`65`，则应分别更改为`001`和`065`。

如何修改我`SELECT`的以执行这些更改？如果长度不是 1、2、3、6 或 9，则字符串应保持不变。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T07:55:07.737

我找到了一个解决方案，虽然它不是很漂亮。

实际上，`SomeTable.SomeCol`它是一个很长的字符串，因此在我的系统上看起来更糟。这`SELECT`是一个更大的查询的一部分，有多个`JOIN`，所以`SomeTable`是必需的。我觉得这是最好的解决方案：

```
SELECT switch(
    len(SomeTable.SomeCol) < 3,
        format(SomeTable.SomeCol, '000'),
    len(SomeTable.SomeCol) = 6,
        format(SomeTable.SomeCol, '000\.000'),
    len(SomeTable.SomeCol) = 9,
        format(SomeTable.SomeCol, '000\.000\.000'),
    true,
        SomeTable.SomeCol
) as SomeCol
FROM SomeTable; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T08:28:12.833

我不知道你的语言环境，所以我不知道数字是默认为停止还是逗号：

```
SELECT IIf(Len([atext])<4,Format([atext],"000"),Replace(Format(Val([atext]),"#,###"),",",".")) AS FmtNumber
FROM Table2 AS t; 
```

您可以使用类似格式的语句，而无需将报表基于查询，但请确保在将控件设置为函数之前更改控件的名称。

# smooks - Smooks CSV 和 ftl

> ID：12560586
> 
> 赞同：0
> 
> 时间：2012-09-24T07:29:09.470
> 
> 标签：smooks

我有一个 csv 文件，我必须将其转换为带有 smooks 的 xml，我的 csv 文件具有以下格式：

> 名字，姓氏，性别，年龄，国家

我必须将其转换为

```
<Message>
<record>
<name>firstname</name>
</record>
...
</Message> 
```

我将我的 smooks 配置写为：

```
<smooks-resource-list xmlns="http://www.milyn.org/xsd/smooks-1.1.xsd"
    xmlns:core="http://www.milyn.org/xsd/smooks/smooks-core-1.4.xsd"
    xmlns:csv="http://www.milyn.org/xsd/smooks/csv-1.2.xsd"
    xmlns:ftl="http://www.milyn.org/xsd/smooks/freemarker-1.1.xsd">

    <csv:reader fields="firstname,lastname,gender,age,country"
        separator=",;" rootElementName="Message" recordElementName="record" />

    <ftl:freemarker applyOnElement="Message">
        <ftl:template>
        <!--
            <ImageMessage>
                <record>${Message.record.firstname}</record>
            </Message>
         -->
         </ftl:template>
    </ftl:freemarker>

    <core:exports>
        <core:result type="org.milyn.payload.StringResult" />
    </core:exports>

</smooks-resource-list> 
```

但这会引发错误。如果我删除我的代码的一部分，那么对 xml 的基本转换就可以了，所以我想我以错误的方式使用 ftl。有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T07:27:19.433

在使用`FreeTemplateMarker`.

# image - 如何将richtextbox放在xaml中的图像上？

> ID：12560587
> 
> 赞同：0
> 
> 时间：2012-09-24T07:29:12.413
> 
> 标签：image, xaml, richtextbox

我正在尝试在图像上放置一个富文本框，如果这很重要，它的不透明度会降低到 0.8。现在，我想要一个图像上的richtextbox 来显示一些不断下载的信息。我准备好了richtextbox，但设计视图不允许我将richtextbox 放在图像上，图像向下滑动。我已经浏览了richtextbox的所有属性，一一更改，没有工作。我怎样才能做到这一点？换句话说，也许我想知道如何控制彼此？在 msdn 上也找不到太多...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T14:34:52.833

这是一个文本框（滚动）在图像上的示例。它应该与 RichTextBox 一起使用。

```
 <Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>
    <Grid.Background>
        <ImageBrush ImageSource="{StaticResource yourImage}" Opacity=".3">
            <ImageBrush.RelativeTransform>
                <ScaleTransform ScaleX=".5" ScaleY=".5" CenterX=".5" CenterY=".5"/>
            </ImageBrush.RelativeTransform>
        </ImageBrush>
    </Grid.Background>                   
    <ScrollViewer Grid.Row="1"  VerticalScrollBarVisibility="Auto">
        <TextBlock  x:Name="YourTextBox" Grid.Row="1" Background="Transparent"  Margin="3,6,3,0" Text="{Binding YourMessage}" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" TextWrapping="Wrap"/>
    </ScrollViewer>
</Grid> 
```

# javascript - Javascript - 获取文档宽度

> ID：12560589
> 
> 赞同：1
> 
> 时间：2012-09-24T07:29:28.457
> 
> 标签：javascript, jquery

我想使用 javascript（可用 jQuery）获取文档的宽度，我可以简单地使用`document.width`. 当内容以负值定位时会出现问题，因为`document.width`将检索小于该值的宽度（您可以在[http://jsfiddle.net/McgzK/1/](http://jsfiddle.net/McgzK/1/)中看到此行为）。那么，有没有办法让我直接获得文档的宽度，或者我应该做类似的事情`document.width - parseInt($(container).css('left'))`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T07:43:51.577

没有直接的方法来获得该宽度。这个宽度没有任何意义。`document.width`是文档宽度的值。如果您将某些内容放在文档布局之外，则它不包含在文档宽度中，因为**它不在文档中**。因此，对于您的*总宽度*，您必须添加该部分。

使用元素的[scrollWidth](https://developer.mozilla.org/en-US/docs/DOM/element.offsetWidth)属性并添加`left`css 位置的绝对值。

见[http://jsfiddle.net/McgzK/11/](http://jsfiddle.net/McgzK/11/)

笔记：

1.  如果你想要内容使用`scrollWidth`属性的宽度。
2.  如果要获取*元素*的宽度，请 使用`offsetWidth`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T07:34:15.230

尝试在 CSS 中将正文宽度设置为 100%，然后使用 jQuery 获取正文而不是文档的宽度。

# android - Android 应用程序在崩溃/强制关闭时重新启动

> ID：12560590
> 
> 赞同：55
> 
> 时间：2012-09-24T07:29:31.247
> 
> 标签：android, crash, stack, forceclose

我的 android 应用程序在强制关闭后重新启动，通过我的整个应用程序（包括 20 个活动），我依赖于在主要活动上创建的静态数据。因此，一旦应用程序崩溃，我的所有静态数据都会丢失，并且当应用程序自动重新启动时，它实际上没有任何基本数据可供操作。

我的问题是，在崩溃时我希望这件事发生

1.  如果应用程序崩溃，我不希望应用程序重新启动，而是希望与此应用程序相关的所有堆栈/任务都被清除内存。用户可以重新从头开始
2.  如果我不能阻止应用重新启动，至少我想保留必要的数据，以便在应用重新启动时我可以将它们分配回来。此外，当它重新启动时，我希望我的应用程序从主要活动开始。

我知道当活动崩溃时，android 系统会将堆栈中的下一个活动带到前台，这就是我的应用程序产生冗余结果的原因。我也通过了 android 开发人员，但我只知道在 Manifest 中设置一个属性`android:finishOnTaskLaunch="true"`。但不幸的是，这对我没有帮助。感谢您对解决此问题的帮助，并让我知道原因和分析。

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-09-24T07:45:22.830

1.  最好的解决方案是不使用静态数据，而是使用`Shared Preferences`或存储数据，`Database`如果发生任何`uncaught Exception`情况，显示一条消息`Application has crashed and a report is sent to the admin`，然后重新启动导致崩溃的 Activity。这样用户可以继续使用该应用程序。

2.  做同样的事情，但不要重新启动导致异常重新启动应用程序的 Activity。

创建一个用于处理的类`unCaughtException`

```
public class MyExceptionHandler implements
        java.lang.Thread.UncaughtExceptionHandler {
    private final Context myContext;
    private final Class<?> myActivityClass;

    public MyExceptionHandler(Context context, Class<?> c) {

        myContext = context;
        myActivityClass = c;
    }

    public void uncaughtException(Thread thread, Throwable exception) {

        StringWriter stackTrace = new StringWriter();
        exception.printStackTrace(new PrintWriter(stackTrace));
        System.err.println(stackTrace);// You can use LogCat too
        Intent intent = new Intent(myContext, myActivityClass);
        String s = stackTrace.toString();
        //you can use this String to know what caused the exception and in which Activity
        intent.putExtra("uncaughtException",
                "Exception is: " + stackTrace.toString());
        intent.putExtra("stacktrace", s);
        myContext.startActivity(intent);
        //for restarting the Activity
        Process.killProcess(Process.myPid());
        System.exit(0);
    }
} 
```

并在每个活动中创建此类的对象并将其设置为`DefaultUncaughtExceptionHandler`

```
 Thread.setDefaultUncaughtExceptionHandler(new MyExceptionHandler(this,
            YourCurrentActivity.class)); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-02-12T19:47:12.717

```
public class MyApp extends Application {
    private static final String TAG = "MyApp";
    private static final String KEY_APP_CRASHED = "KEY_APP_CRASHED";

    @Override
    public void onCreate() {
        super.onCreate();

        final UncaughtExceptionHandler defaultHandler = Thread.getDefaultUncaughtExceptionHandler();
        Thread.setDefaultUncaughtExceptionHandler( new UncaughtExceptionHandler() {
            @Override
            public void uncaughtException(Thread thread, Throwable exception) {
                // Save the fact we crashed out.
                getSharedPreferences( TAG , Context.MODE_PRIVATE ).edit()
                    .putBoolean( KEY_APP_CRASHED, true ).apply();
                // Chain default exception handler.
                if ( defaultHandler != null ) {
                    defaultHandler.uncaughtException( thread, exception );
                }
            }
        } );

        boolean bRestartAfterCrash = getSharedPreferences( TAG , Context.MODE_PRIVATE )
                .getBoolean( KEY_APP_CRASHED, false );
        if ( bRestartAfterCrash ) {
            // Clear crash flag.
            getSharedPreferences( TAG , Context.MODE_PRIVATE ).edit()
                .putBoolean( KEY_APP_CRASHED, false ).apply();
            // Re-launch from root activity with cleared stack.
            Intent intent = new Intent( this, MyRootActivity.class );
            intent.addFlags( Intent.FLAG_ACTIVITY_CLEAR_TASK | Intent.FLAG_ACTIVITY_NEW_TASK );
            startActivity( intent );
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-11T09:47:05.697

```
 setContentView(R.layout.current);

  Thread.setDefaultUncaughtExceptionHandler(new UncaughtExceptionHandler() {

  @Override
  public void uncaughtException(Thread t, Throwable e) {
        android.os.Process.killProcess(android.os.Process.myPid());
        System.exit(0);
  }

  code.... 
```

（参考：Archie.bpgc）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-09-20T17:16:26.420

不要将数据存储在静态字段中。您的进程可能会因内存不足事件而停止，您将失去一切。如果用户再次切换到您的应用程序，您的活动将从保存状态恢复，但您的静态变量不会恢复。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-12-01T09:14:07.557

好吧，应用程序不仅仅是界面（活动）。想象一下，您有一些复杂的企业应用程序，使用 SQL 事务、安全性、Web 身份验证等。仅使用共享首选项使每个活动都能够恢复整个应用程序上下文几乎是不可能的。所以在这种情况下，我使用这段代码：

```
public class MyApplication extends Application {
  private static final String TAG = "my.app";   
  public static final String MainActivityName = "my.app.top.activity";

  @Override
  public void onCreate() {

    try{
        ActivityManager am = (ActivityManager) this .getSystemService(ACTIVITY_SERVICE);
        List<ActivityManager.RunningTaskInfo> taskInfo = am.getRunningTasks(1);
        ComponentName componentInfo = taskInfo.get(0).topActivity;
        if (MainActivityName.length()>0 && !componentInfo.getClassName().equals(MainActivityName)){
            Log.d(TAG, "Partial Restart Not Supported! : " +componentInfo.getClassName());
            android.os.Process.killProcess(android.os.Process.myPid());
            System.exit(0);
            return;
        }else
            Log.d(TAG, "!!! BCSApplication topActivity=" +componentInfo.getClassName());
    }catch(Exception eee){}

    super.onCreate();
    /*
    ....
    */
 }
/*
    ....
*/
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-24T07:41:05.833

如果用户强制停止您的应用程序（从设置 > 应用程序 > 应用程序信息，或从最近的应用程序列表）或操作系统正在停止您的应用程序，那么您可以使用[`onSaveInstanceState()`](http://developer.android.com/reference/android/app/Activity.html#onSaveInstanceState%28android.os.Bundle%29).

但是，如果您的应用程序崩溃，那么您无能为力（除了定期将重要内容保存到首选项/数据库/等）。最好专注于防止崩溃，而不是尝试处理崩溃！

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2016-01-07T06:47:33.750

当它崩溃时，我的应用程序也以空白屏幕恢复。为了解决这个问题，我检查了我主要活动的 onCreate 方法上的 savedInstanceState 对象，如果它不为空（意味着它被 android 系统重新启动），那么我完成了我的活动。像这样的东西：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    if (savedInstanceState != null) {
        finish();
    }
} 
```

它也可能对您的情况有所帮助。

# javascript - Javascript空间函数

> ID：12560593
> 
> 赞同：4
> 
> 时间：2012-09-24T07:29:47.730
> 
> 标签：javascript, jquery

我有一个 JS 代码，它的功能是验证表单，现在我要做的是添加 1 个函数来防止文本框用户名中的空格以及消息，“不允许空格”。到目前为止，这是我的 JS 代码：

```
$().ready(function()
    {
        $("#signupForm").validate(
        {
            rules:
            {
                full_name: "required",
                username: {
                    required: true,
                    minlength: 2
                },
                password: {
                    required: true,
                    minlength: 5
                },
                email: {
                    required: true,
                    email: true
                },
            },
            messages:
            {
                full_name: "Please enter your full name",
                username:
                {
                    required: "Please enter a username",
                    minlength: "Your username must consist of at least 2 characters"
                },

                password:
                {
                    required: "Please provide a password",
                    minlength: "Your password must be at least 5 characters long"
                },

                email: "Please enter a valid email address"
            }
        });
    }); 
```

任何人都可以给我的想法？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T07:41:33.533

试试这个

* * *

添加一个名为 noSpace 的方法

```
jQuery.validator.addMethod("noSpace", function(value, element) {
    return !value.match(/\s/g);
}, "Spaces are not allowed"); 
```

将其设置为用户名的规则

```
rules: {
    // ...
    username: {
        // ...
        noSpace: true,
        // ...
    },
    // ... 
```

如果要覆盖默认消息，请设置自定义消息

```
messages: {
    // ...
    username: {
        // ...
        noSpace: "Username should not contain spaces",
        // ...
    }, 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-24T07:37:13.807

```
<script type="text/javascript">
function nospaces(t) {
    if(t.value.match(/\s/g)) {
        alert('Sorry, you are not allowed to enter any spaces');
    }
}
</script> 
```

将以下属性添加到文本输入框

```
onkeyup="nospaces(this)" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T07:45:18.087

```
jQuery.validator.addMethod("noSpace", function(value, element) { 
    return value.indexOf(" ") < 0 && value != ""; 
}, "No space allowed");

$("#signupForm").validate({
    rules: {
        username:
           {
              required: "Please enter a username",
              minlength: "Your username must consist of at least 2 characters",
              noSpace: true
           }
     }
}); 
```

# python - 创建一个新文件，文件名包含循环变量，python

> ID：12560600
> 
> 赞同：20
> 
> 时间：2012-09-24T07:30:34.060
> 
> 标签：python, file

我想在循环上运行一个函数，并且我想将输出存储在不同的文件中，这样文件名就包含循环变量。这是一个例子

```
for i in xrange(10):
   f = open("file_i.dat",'w')
   f.write(str(func(i))
   f.close() 
```

我怎样才能在python中做到这一点？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-24T07:32:33.910

只需用`+`和构造文件名`str`。如果需要，您还可以使用[旧式](http://docs.python.org/library/stdtypes.html#string-formatting)或[新式格式](http://docs.python.org/library/stdtypes.html#str.format)来执行此操作，因此文件名可以构造为：

```
"file_" + str(i) + ".dat"
"file_%s.dat" % i
"file_{}.dat".format(i) 
```

请注意，您当前的版本没有指定编码（[您应该](http://www.joelonsoftware.com/articles/Unicode.html)），并且在错误情况下不会正确关闭文件（`with`语句[会这样做](http://docs.python.org/tutorial/inputoutput.html#methods-of-file-objects)）：

```
import io
for i in xrange(10):
   with io.open("file_" + str(i) + ".dat", 'w', encoding='utf-8') as f:
       f.write(str(func(i)) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-24T07:33:04.360

将变量连接`i`到字符串，如下所示：

```
f = open("file_"+str(i)+".dat","w") 
```

或者

```
f = open("file_"+`i`+".dat","w") # (`i`) - These are backticks, not the quotes. 
```

有关其他可用技术，请参见[此处](http://www.skymind.com/~ocrow/python_string/)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-24T07:33:14.443

使用`f = open("file_{0}.dat".format(i),'w')`. 实际上，您可能想要使用类似 的东西`f = open("file_{0:02d}.dat".format(i),'w')`，它会将名称补零以将其保持为两位数（因此您会得到“file_01”而不是“file_1”，这对于以后的排序很有用）。请参阅[文档](http://docs.python.org/library/string.html#formatstrings)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-24T07:33:27.943

试试这个：

```
for i in xrange(10):
   with open('file_{0}.dat'.format(i),'w') as f:
       f.write(str(func(i))) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-20T20:26:52.337

## 使用 f 字符串

*   这是字符串格式化的最简单和最新的实现。
*   [f-Strings：一种在 Python 中格式化字符串的新方法和改进方法](https://realpython.com/python-f-strings/#f-strings-a-new-and-improved-way-to-format-strings-in-python)
*   [PEP 498 - 文字字符串插值](https://www.python.org/dev/peps/pep-0498/)
*   字符串前面有一个`f`，变量在字符串引号内，由 . 包围`{}`。
    *   `f"file_{i}.dat"`
*   [读取和写入文件](https://docs.python.org/3/tutorial/inputoutput.html#reading-and-writing-files)
    *   优点是文件在其套件完成后正确关闭，即使在某个时候引发了异常。
*   对于 python 3，这个使用`range`不是`xrange`
*   `f.write(f'{func(i)}')`或者`f.write(str(func(i)))`

```
def func(i):
    return i**2

for i in range(10):
    with open(f"file_{i}.dat", 'w') as f:
        f.write(f'{func(i)}') 
```

# java - 如何在 Android 中停止 SurfaceView？

> ID：12560602
> 
> 赞同：1
> 
> 时间：2012-09-24T07:30:45.657
> 
> 标签：java, android, surfaceview

最近在写游戏的时候遇到了一个问题。在我的游戏中，我使用`SurfaceView`并使用了`while(true)`作为条件。按下主页按钮后，程序退出并看到日志。但我发现循环 `While(true)` 仍在运行。为什么Activity停止后循环还在运行？谁能帮忙告诉我原因。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T07:37:01.490

更好的解决方案可能是设置一个布尔值来保存应用程序的状态，然后在游戏退出时将其设置为 false。

```
while(appActive)
    //do game logic 
```

***编辑**：感谢 Braj 和 Fildor 的反馈*

在 onPause() 事件处理程序中添加一行

```
appActive = false; 
```

（（注意：我没有做过任何Android开发，这纯粹是理论上的回应））

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T07:56:45.517

我在我现在正在开发的游戏中这样做：

```
 //Makes the thread draw until the state of running is set to false
    while(this.running)
    {
            //Draw
    }
    this.thread.interrupt(); 
```

在 onPause 中：

```
//Stop the thread that is responible for the drawing.
this.worker.running = false; 
```

在 onResume 中：

```
//Creates a new thread instance which sets this.running to true and calls the drawing method again
this.worker.restart(); 
```

# iphone - 如何在目标 c 中使用 AES 256 加密和 base 64 编码创建 NSMutableURLRequest？

> ID：12560609
> 
> 赞同：1
> 
> 时间：2012-09-24T07:31:04.040
> 
> 标签：iphone, objective-c, ios

我必须`NSMutableURLRequest`在客户端服务器上发布一个带有 json 的请求正文。我正在做的是

`json`1)用加密`AES 256 Encryption`。

2）`Base 64 encoding`加密的数据。

3）再次将编码字符串转换 为请求的“”`NSData`并将其设置为“ `setHTTPBody`”。

现在，我从服务器得到的是响应`status code "500"`。

我不知道问题的确切原因是什么。请帮帮我。

PS：-在加密时，我将字符串作为加密密钥。是不是我也需要在服务器上提到的东西（关键）？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T07:43:12.720

实际上，您需要做的是检查您的服务器正在接收数据的编码。很奇怪，你需要在发送 Json 字符串之前进行 Base64 编码。像往常一样，您应该只使用 UTF8 编码或服务器支持的其他编码发送数据。最好先使用 Fiddler 之类的代理程序来测试服务器。然后，当您收到状态码为“200”的正确答案时，您将知道如何正确操作。另一个提示。您是否为数据设置内容长度？

```
NSString *msgLength = [NSString stringWithFormat:@"%d", [yourData length]];
[req addValue:msgLength forHTTPHeaderField:@"Content-Length"]; 
```

# .net - .NET Git 忽略空格

> ID：12560611
> 
> 赞同：0
> 
> 时间：2012-09-24T07:31:18.900
> 
> 标签：.net, visual-studio-2010, git

我在工作开发中使用 .NET、Visual Studio 2010 和 Git。由于我们团队之间的编码风格不同，我正在寻找一种让 git 忽略空格的方法。

为了可读性，我的一些同事确实需要有一些空白，而另一些则不需要。

例如，我们中的一些人将代码编写为：

```
var b = new B(); 
```

而其他人则将其写为：

```
var b = new B( ); 
```

由于 git 不理解这些空白，因此它会威胁到它们的变化。但是，这会导致一些合并冲突和难以查看代码中的实际更改。是否有可能“让” git 明白这个空白应该被忽略？

感谢您的任何想法！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T07:51:31.163

解决这个问题的正确方法是让所有开发人员都同意相同的约定。

正如 Jeow Li Huan 所指出的，您可以使用 StyleCop 来强制人们实际遵守这些约定。

# java - Java进程占用越来越多的内存

> ID：12560612
> 
> 赞同：0
> 
> 时间：2012-09-24T07:31:24.017
> 
> 标签：java, linux, memory-management, memory-leaks, process

全部，

我有一个 Java 内存进程，它随着时间的推移开始占用越来越多的内存。为了设置堆空间使用上限，我将 -Xmx 选项设置为 512M。慢慢地过了一段时间Process内存使用量达到了2GB。

我已经使用 MAT 和 YOURKIT 等各种工具分析了代码中可能存在的内存泄漏，并发现 Java 代码中没有这种可能的泄漏。该代码还使用了一个看起来无泄漏的本机函数。

我有以下问题：

1.  是否有可能对 Java 进程可以使用的总内存设置上限？
2.  除了 Heap 之外，JVM 的其他内存使用是什么？
3.  Linux 是否在 Windows 的“工作集”内存模型上工作，其中一个进程在进入后台时会释放它的内存。
4.  即使在使用带有 512M 的 -Xmx 选项后，如果堆使用量增加，JVM 也不应该抛出“内存不足”。这让我怀疑除了堆空间之外的其他东西正在泄漏内存。从内存转储看来，堆内存没有增加。

感谢你的回答。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T07:38:11.333

您如何测量内存使用情况？

通常有3种内存使用：

*   VIRT -- 虚拟内存大小 (KiB) 任务使用的虚拟内存总量。它包括所有代码、数据和共享库以及已换出的页面和已映射但未使用的页面。
*   RES -- 驻留内存大小 (KiB) 任务已使用的非交换物理内存。
*   SHR——共享内存大小 (KiB) 它只是反映可能与其他进程共享的内存。

虚拟内存大小可以变得比您使用 -Xmx 指定的更大（几 GB），但这不会造成任何损害。RES 加 SHR 是您应该关注的。

除了堆之外，还有另一类内存使用不受 -Xmx (permgen) 的影响。但这通常以几 MB 为上限。您可能想阅读[HotSpot GC Tuning Guide](http://www.oracle.com/technetwork/java/javase/gc-tuning-6-140523.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T13:02:39.833

如果您怀疑您的 java 应用程序中存在内存泄漏，您绝对应该尝试[Plumbr](http://plumbr.eu)。它非常好，可以发现它们并提供非常有用的报告。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T19:59:52.853

让我用一个成熟的“回应”来补充我的“评论”。

如果你正在做很多字符串操作，你绝对*不*应该使用“String”类。无论发生什么，Java 都有许多很棒的工具（包括但不限于 JConsole），可以让您智能地分析问题。你的两个新[BFF](http://www.netlingo.com/word/bff.php)应该是：

*   [StringBuilder](http://docs.oracle.com/javase/tutorial/java/data/buffers.html) （有效地操作字符串）和

*   [JConsole](http://docs.oracle.com/javase/1.5.0/docs/guide/management/jconsole.html)（研究程序的行为；包括堆分配和垃圾回收）。

而且，正如 user643011 正确指出的那样，还有许多其他可能会“泄漏”的事情：包括文件未关闭、大量线程使用大量堆栈空间等。

这是另一个很好的链接：

*   [如何调试 Java OutOfMemory 异常？](https://stackoverflow.com/questions/4512147/how-to-debug-java-outofmemory-exceptions)

# android - 使用cropimage库的类转换异常

> ID：12560615
> 
> 赞同：0
> 
> 时间：2012-09-24T07:31:38.693
> 
> 标签：android, image, crop, classcastexception

我从[这里下载了一个库](https://github.com/lvillani/android-cropimage)

当我尝试使用它时，我遇到了异常

```
09-24 11:24:23.428: E/ActivityThread(31526): Activity com.android.internal.app.ChooserActivity has leaked IntentReceiver com.android.internal.app.ResolverActivity$1@41fb9d48 that was originally registered here. Are you missing a call to unregisterReceiver()?
09-24 11:24:23.428: E/ActivityThread(31526): android.app.IntentReceiverLeaked: Activity com.android.internal.app.ChooserActivity has leaked IntentReceiver com.android.internal.app.ResolverActivity$1@41fb9d48 that was originally registered here. Are you missing a call to unregisterReceiver()?
........
09-24 11:24:25.278: E/AndroidRuntime(31526): java.lang.RuntimeException: Unable to start activity ComponentInfo{ru.digitalclick.saler/ru.digitalclick.saler.utils.crop.CropImage}: java.lang.ClassCastException: android.widget.ImageView cannot be cast to ru.digitalclick.saler.utils.crop.CropImageView 
```

我做错了什么？

任何帮助，请

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T07:35:39.333

我认为您正在尝试`ImageView`输入`CropImageView`，因此会发生此错误。

**使用`CropImageView`而不是`ImageView`.**

# haskell - 位不是从Num派生的吗？

> ID：12560619
> 
> 赞同：6
> 
> 时间：2012-09-24T07:32:05.847
> 
> 标签：haskell, ghc

尝试编译 data-memocombinators 0.4.3，得到以下错误：

```
Data/MemoCombinators.hs:119:10:
    Could not deduce (Num a) arising from a use of `IntTrie.apply'
    from the context (Ord a, Bits a) 
```

我认为`Bits`曾经源自`Num`. 也许它很糟糕并且依赖被删除了，但现在包被破坏了。有什么已知的解决方法吗？也许我正在使用一个坏版本的东西？

我暂时`Num a`在我的包副本中添加了函数签名，但从长远来看，这不可能是正确的。

我正在使用 GHC 7.6.1，基础是 4.6.0.0。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-24T07:42:02.107

GHC 7.6.1 （基础 4.6.0.0）[的更新日志中提到了](http://www.haskell.org/ghc/docs/7.6.1/html/users_guide/release-7-6-1.html#id9281219)它。

> 该类`Bits`不再有`Num`超类。
> 
> 您可以通过以下方式编写适用于 Haskell98/Haskell2010 和 GHC 的代码：
> 
> *   每当你创建一个`Bits`类型的实例时，也要创建`Num`实例，并且
> *   每当你给一个函数、实例或类一个`Bits t`约束时，也要给它一个`Num t`约束。

有关此决定的更多信息，请参阅[GHC #5593](http://hackage.haskell.org/trac/ghc/ticket/5593)和[邮件列表讨论](http://www.haskell.org/pipermail/libraries/2011-October/016899.html)。

# blackberry - BlackBerry 本地化：选择特定资源区域设置问题

> ID：12560621
> 
> 赞同：1
> 
> 时间：2012-09-24T07:32:13.160
> 
> 标签：blackberry, localization, internationalization, blackberry-jde

我需要知道是否可以为我的语言选择特定的资源语言环境。

我可以根据某些条件在代码中使用它，而不是更改手机的语言设置吗？

这是我写的一段代码：用户应该能够更改语言并在应用程序本身中看到它的效果。

```
String appLocale = LanguageManager.getCurrentUserSelectedLanguage();

if (appLocale.equals("en" /*or "de" or "es" etc */)) {
    ResourceBundle _resources = ResourceBundle.getBundle(BUNDLE_ID, BUNDLE_NAME);
    localizedString = _resources.getString(key);
} ...

return localizedString; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T10:52:21.590

最后我能够解决这个问题！这是给所有感兴趣的人的。这是代码：

```
if(appLocale.equals("en")){
ResourceBundle _resources = ResourceBundle.getBundle(LocalizationResource.BUNDLE_ID, LocalizationResource.BUNDLE_NAME).getBundle(Locale.get(Locale.LOCALE_en));
localizedString = _resources.getString(key);
}
else if(appLocale.equals("es")){
ResourceBundle _resources = ResourceBundle.getBundle(LocalizationResource.BUNDLE_ID, LocalizationResource.BUNDLE_NAME).getBundle(Locale.get(Locale.LOCALE_es));
localizedString = _resources.getString(key);
} 
```

`Locale.LOCALE_es`我只使用了一个资源文件（.rrh），并`Locale.LOCALE_en` 根据我从用户那里收到的应用程序语言简单地选择了语言包 。

# php - PHP中比较变量的位置

> ID：12560627
> 
> 赞同：2
> 
> 时间：2012-09-24T07:32:54.387
> 
> 标签：php

以下两种情况哪个更优化？

```
if ($var == 'value') {} 
```

和

```
if ('value' == $var) {} 
```

抱歉，如果这与另一个问题重复，但我无法通过谷歌搜索答案。

谢谢

[更新]

这称为尤达条件，更多信息[在这里](http://wiert.me/2010/05/25/yoda-conditions-from-stackoverflow-new-programming-jargon-you-coined/)。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T07:36:33.440

没有实际的区别。第二个用于保护自己免受拼写错误`if ($var = 'value')`但不是真正可读的。主要使用第一个，除非你太累了以至于在打字时会错过字符。

如果你写代码

```
if ($var = 'val') echo $var; //Output will be "val" 
```

但如果你这样做

```
if ('val' = $var) echo $var; 
```

你会得到语法错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T07:35:38.427

`'value' == $var`称为尤达条件。而且一般不使用，因为它的可读性较差。

在性能方面，我不确定，但我猜你的解释器会生成完全相同的操作码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T07:37:47.697

最常用的一个是`$var=="value"`，如果你想优化它而不是`==`使用`===`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T07:37:33.877

我建议使用

```
$var == 'value' 
```

增加可读性的表格。我认为两者之间没有真正的性能差距，php.net 没有任何信息（或者我找不到它）。

# java - Java将多头转换为货币

> ID：12560629
> 
> 赞同：19
> 
> 时间：2012-09-24T07:33:03.833
> 
> 标签：java, currency, long-integer, number-formatting

我无法将 long（美分）转换为货币格式。

我的代码：

```
long doublePayment = 1099;  //Should equal $10.99
DecimalFormat dFormat = new DecimalFormat();
String formattedString = dFormat.format(doublePayment);
System.out.println(formattedString); 
```

输出：1,099

我也试过：

```
long doublePayment = 1099;
NumberFormat n = NumberFormat.getCurrencyInstance(Locale.US); 
String s = n.format(doublePayment);
System.out.println(s); 
```

因为这是美分，所以输出应该是 10.99 或 10.99 美元。

无法弄清楚我做错了什么。谢谢！！！

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-09-24T08:07:06.663

如果你开始的时间很长，你仍然应该使用 java.math.BigDecimal。

```
 long doublePayment = 1099;
    BigDecimal payment = new BigDecimal(doublePayment).movePointLeft(2);
    System.out.println("$" + payment); // produces: $10.99 
```

*再次大声说出来：永远不应该使用浮点变量来存储货币/货币价值。*

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-09-24T08:11:55.840

要将美分转换为美元，您可以使用

```
long doublePayment = 1099;
NumberFormat n = NumberFormat.getCurrencyInstance(Locale.US); 
String s = n.format(doublePayment / 100.0);
System.out.println(s); 
```

这将是准确的高达 70 万亿美元。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-09-24T07:51:30.920

您的文字是`1099`，即*一千九十九*，处理整数文字的 Java 规则。根据您的 JVM 语言环境，此数字用 表示`1,099`。如果你在欧洲，那就是`1.099`。所以，这不是你的*输出*问题，而是你的*输入*问题。

问题是你必须表示一个**定点**值，但你不知道[`java.math.BigDecimal`](http://docs.oracle.com/javase/1.5.0/docs/api/java/math/BigDecimal.html)并试图伪造它。当您进行一些计算时，事情就会崩溃。不要这样做。

这是你应该做的。很简单（代码也少得多）：

```
BigDecimal payment = new BigDecimal("10.99");
System.out.println(String.format("$%.2f", payment)); 
```

请注意您如何真正使用**String初始化***数字*。此外，将处理[当前的 locale](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#format%28java.lang.String,%20java.lang.Object...%29)，或者您可以通过重载方法提供所需的语言环境。**`String.format()`**

 *** * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-01-26T04:23:51.207

这些答案都没有考虑到不同地区的货币具有不同的小数位数。例如，日元的小数位数为零，约旦第纳尔的小数位数为 3，当然，美元也有 2 个。我相信这是一个更合适的解决方案：

```
 long payment = 1099L;
    BigDecimal bd = new BigDecimal(payment);

    Locale jpLocale = new Locale("ja", "JP");//Japan

    Currency jpCurrency = Currency.getInstance(jpLocale);
    NumberFormat jpnf = NumberFormat.getCurrencyInstance(jpLocale);
    int jpNumFractionalDigits = jpCurrency.getDefaultFractionDigits();

    BigDecimal jpbd = bd.movePointLeft(jpNumFractionalDigits);

    Locale usLocale = new Locale("en", "US");//United States

    Currency usCurrency = Currency.getInstance(usLocale);
    NumberFormat usnf = NumberFormat.getCurrencyInstance(usLocale);
    int usNumFractionalDigits = usCurrency.getDefaultFractionDigits();

    BigDecimal usbd = bd.movePointLeft(usNumFractionalDigits);

    System.out.println(jpnf.format(jpbd)); //prints ￥1,099
    System.out.println(usnf.format(usbd));//prints $10.99 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-24T07:42:25.193

这不是格式的问题，而是输入的问题。将您的输入除以 100，一切就绪。

```
float payment = 1099 / ((float) 100); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-24T07:41:49.157

`double doublePayment = 10.99;`您需要提供这样的货币。`NumberFormat`除非它看到小数点，否则将无法理解您是以美分还是美元提供它

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-24T07:43:44.857

使用货币格式化程序：

```
NumberFormat nf = NumberFormat.getCurrencyInstance(Locale.ENGLISH);
String output = nf.format(value);
System.out.println(value + " " + output); 
```**

# javascript - 将值传递给 Javascript 函数

> ID：12560632
> 
> 赞同：-1
> 
> 时间：2012-09-24T07:33:17.340
> 
> 标签：javascript

A或B更好，为什么？

A) var myvar = this.value(); myFunc(myvar);

B) myFunc(this.value());

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T07:37:02.660

`B`更好，因为您不会用*一次性*变量污染当前函数的范围。但是，您应该能够自己弄清楚这些事情。

此外，正如其他人指出的那样，它是 2 行代码与 1 行代码。没有那么显着的改善，但仍然......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T07:36:24.127

如果`myvar`只使用一次，则`B`简洁明了。

如果`myvar`需要多次使用，最好保存`this.value()`到局部变量中，`A`效果更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T07:36:25.607

B 更好，因为它会节省分配变量 myVar 的内存。此外，B 中的代码更清晰。

# c++ - std::map 和函数指针作为值

> ID：12560634
> 
> 赞同：0
> 
> 时间：2012-09-24T07:33:21.690
> 
> 标签：c++, stl

我正在尝试使用`std::map`with `value`as `function pointer`，但出现奇怪的编译错误。我在做什么错。以下是我的代码。

```
#include <map>
#include <string>

typedef void (*fptrCmdHandler)(std::string&);
typedef std::map<std::string, fptrCmdHandler> Cmd2FnMap;
typedef std::map<std::string, Cmd2FnMap>      Mode2CmdFnMap;
Mode2CmdFnMap gMode2CmdFnMap;

class SystemCommands {
public:
    static void Help(std::string& result) {
        result.append("connect").append("\n");
        result.append("addserver").append("\n");
        result.append("help").append("\n");
    }
};
int main( int argc, char **argv) {
    //Initialize Global Commands
    gMode2CmdFnMap.insert(std::make_pair("System", std::make_pair("help", &SystemCommands::Help)));
} 
```

错误是

```
1>------ Build started: Project: test, Configuration: Debug Win32 ------
1>  test.cpp
1>c:\program files (x86)\microsoft visual studio 10.0\vc\include\utility(163): error C2664: 'std::map<_Kty,_Ty>::map(const std::map<_Kty,_Ty> &)' : cannot convert parameter 1 from 'std::pair<_Ty1,_Ty2>' to 'const std::map<_Kty,_Ty> &'
1>          with
1>          [
1>              _Kty=std::string,
1>              _Ty=fptrCmdHandler
1>          ]
1>          and
1>          [
1>              _Ty1=const char *,
1>              _Ty2=void (__cdecl *)(std::string &)
1>          ]
1>          and
1>          [
1>              _Kty=std::string,
1>              _Ty=fptrCmdHandler
1>          ]
1>          Reason: cannot convert from 'std::pair<_Ty1,_Ty2>' to 'const std::map<_Kty,_Ty>'
1>          with
1>          [
1>              _Ty1=const char *,
1>              _Ty2=void (__cdecl *)(std::string &)
1>          ]
1>          and
1>          [
1>              _Kty=std::string,
1>              _Ty=fptrCmdHandler
1>          ]
1>          No user-defined-conversion operator available that can perform this conversion, or the operator cannot be called
1>          c:\program files (x86)\microsoft visual studio 10.0\vc\include\utility(255) : see reference to function template instantiation 'std::_Pair_base<_Ty1,_Ty2>::_Pair_base<_Ty,std::pair<const char *,void (__cdecl *)(std::string &)>>(_Other1 &&,_Other2 &&)' being compiled
1>          with
1>          [
1>              _Ty1=const std::string,
1>              _Ty2=Cmd2FnMap,
1>              _Ty=const char *,
1>              _Other1=const char *,
1>              _Other2=std::pair<const char *,void (__cdecl *)(std::string &)>
1>          ]
1>          c:\program files (x86)\microsoft visual studio 10.0\vc\include\xmemory(208) : see reference to function template instantiation 'std::pair<_Ty1,_Ty2>::pair<const char*,std::pair<const char *,void (__cdecl *)(std::string &)>>(std::pair<const char *,std::pair<const char *,void (__cdecl *)(std::string &)>> &&)' being compiled
1>          with
1>          [
1>              _Ty1=const std::string,
1>              _Ty2=Cmd2FnMap
1>          ]
1>          c:\program files (x86)\microsoft visual studio 10.0\vc\include\xmemory(280) : see reference to function template instantiation 'void std::allocator<_Ty>::construct<std::pair<_Ty1,_Ty2>>(std::pair<const _Kty,std::map<_Kty,fptrCmdHandler>> ,_Other &&)' being compiled
1>          with
1>          [
1>              _Ty=std::pair<const std::string,Cmd2FnMap>,
1>              _Ty1=const char *,
1>              _Ty2=std::pair<const char *,void (__cdecl *)(std::string &)>,
1>              _Kty=std::string,
1>              _Other=std::pair<const char *,std::pair<const char *,void (__cdecl *)(std::string &)>>
1>          ]
1>          c:\program files (x86)\microsoft visual studio 10.0\vc\include\xtree(592) : see reference to function template instantiation 'void std::_Cons_val<std::allocator<_Ty>,_Ty,std::pair<_Ty1,_Ty2>>(_Alloc &,std::pair<const _Kty,std::map<_Kty,fptrCmdHandler>> *,std::pair<_Ty1,_Ty2> &&)' being compiled
1>          with
1>          [
1>              _Ty=std::pair<const std::string,Cmd2FnMap>,
1>              _Ty1=const char *,
1>              _Ty2=std::pair<const char *,void (__cdecl *)(std::string &)>,
1>              _Alloc=std::allocator<std::pair<const std::string,Cmd2FnMap>>,
1>              _Kty=std::string
1>          ]
1>          c:\program files (x86)\microsoft visual studio 10.0\vc\include\xtree(755) : see reference to function template instantiation 'std::_Tree_nod<_Traits>::_Node *std::_Tree_val<_Traits>::_Buynode<_Ty>(_Valty &&)' being compiled
1>          with
1>          [
1>              _Traits=std::_Tmap_traits<std::string,Cmd2FnMap,std::less<std::string>,std::allocator<std::pair<const std::string,Cmd2FnMap>>,false>,
1>              _Ty=std::pair<const char *,std::pair<const char *,void (__cdecl *)(std::string &)>>,
1>              _Valty=std::pair<const char *,std::pair<const char *,void (__cdecl *)(std::string &)>>
1>          ]
1>          e:\avinash\test\test\test.cpp(19) : see reference to function template instantiation 'std::pair<_Ty1,_Ty2> std::_Tree<_Traits>::insert<std::pair<const char *,std::pair<const char *,void (__cdecl *)(std::string &)>>>(_Valty &&)' being compiled
1>          with
1>          [
1>              _Ty1=std::_Tree_iterator<std::_Tree_val<std::_Tmap_traits<std::string,Cmd2FnMap,std::less<std::string>,std::allocator<std::pair<const std::string,Cmd2FnMap>>,false>>>,
1>              _Ty2=bool,
1>              _Traits=std::_Tmap_traits<std::string,Cmd2FnMap,std::less<std::string>,std::allocator<std::pair<const std::string,Cmd2FnMap>>,false>,
1>              _Valty=std::pair<const char *,std::pair<const char *,void (__cdecl *)(std::string &)>>
1>          ]
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T07:37:53.253

您正在尝试在需要地图的位置插入一对。对插入很好，但它应该是`pair<string, map<string, F>>`.

为什么不直接说：

```
gMode2CmdFnMap["System"]["help"] = &SystemCommands::Help; 
```

在这里你不必太担心效率——这段代码在你的程序运行期间会执行多少次？

# python - 读取 ASCII 文件（要求输入文件名），检查它是否有两个以上的单词并打印出文件的前两个单词

> ID：12560635
> 
> 赞同：0
> 
> 时间：2012-09-24T07:33:23.890
> 
> 标签：python, python-2.7, ascii

我是 Python 新手，以上是我正在尝试解决的家庭作业练习问题。在做了一些研究并玩弄了一些东西之后，我遇到了模块 ASCIItable，它允许我读取数据文件（不仅仅是 int - 最初我正在尝试 numpy，但由于我的文件同时包含 str/int 而遇到了问题）

我的第一个问题是，ASCII 在哪里查找文件？我的文本文件应该放在哪里。

我从问题的第一部分开始

```
name = str(raw_input("Please enter the name of the file: ")) 
```

寻找一些关于从这里去哪里的帮助。（我一直在使用的链接作为参考[http://cxc.harvard.edu/contrib/asciitable/](http://cxc.harvard.edu/contrib/asciitable/)）

编辑：我将假设该文件虽然没有提到，但只是通过空格分隔的 Str

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T07:41:02.783

默认情况下，Python 脚本将在当前目录中查找文件（当然，除非您提供绝对路径）。这通常与您的脚本所在的目录相同，但这取决于您如何调用它。

# jquery - Jquery 插件在 JSfiidle 中工作，而不是在我的页面中

> ID：12560637
> 
> 赞同：-1
> 
> 时间：2012-09-24T07:33:26.450
> 
> 标签：jquery, onload, jsfiddle

我在这个 jquery 插件上缺少一些东西，它适用于 jsfiddle 而不是我的页面。

这是一个用于收银机效果的 Jquery 插件。看[这里](http://jsfiddle.net/z2qps/13/)，你可以在 VALOR LIQUIDATIVO 下面的数字上看到这种效果。

我在我的[页面](http://tommywebdesigner.com/Producto.html)中粘贴了相同的代码，但插件无法正常工作。[正如我在这个线程](https://stackoverflow.com/questions/4637873/code-working-in-jsfiddle-but-not-in-browser)中看到的那样，运行脚本代码“onload”的选项可能存在问题， 但我没有弄清楚问题所在。我如何修改浏览器的文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T07:57:58.500

`jsfiddle`这是我的复制粘贴的结果`notepad++`

```
$(document).ready(function() {
    $('#valorliquidativo').cashRegister();
});? //<--- 
```

请注意`?`，它与代码块一起粘贴并出现错误。尝试使用`backspace`或手动编写此代码块来删除代码块中的空行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T07:51:25.533

您的问题似乎是语法错误。如果发现语法错误，通常 javascript 会中断，虽然我真的没有办法测试是否是这种情况，但我相信这是你的问题。

正如我在评论中所说，当将数据从 jsfiddle 复制到实际脚本时，由于 jsfiddle 格式化文本的方式，它往往会复制可能破坏事物的不可见字符。

当我将您的代码从您的网页复制到 Notepad++（代码编辑器）中时，我在您的函数调用后直接在线找到了一个隐藏字符`347`。这当然显示为问号，如下所示：

```
$(document).ready(function() {

    $('#valorliquidativo').cashRegister();

});​
  ^ hidden character directly after this semi-colon 
```

Chrome 的 javascript 控制台说上面是非法字符，所以删除该行，手动输入，然后重试。看看它是否有效。

# mysql - 国家列表的最佳实践（SQL、XML、...）

> ID：12560641
> 
> 赞同：2
> 
> 时间：2012-09-24T07:33:44.000
> 
> 标签：mysql, sql, xml, database-design

在开发网站或 Web 应用程序时，我想知道当您需要世界国家/地区列表时最佳实践是什么——在 SQL 中使用国家表，将所有值存储到 XML 或其他东西更好吗？

例如，假设我需要为每个用户存储国家（在 SQL 中），并且我需要在我的网站上的一个（或多个）下拉列表中使用国家列表。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T10:39:01.713

如果您想为每个用户存储国家/地区（可能最好将 CountryId 保存在用户表中），您应该为国家/地区提供单独的表，以及`FOREIGN KEY`从用户表到国家/地区表的引用。您还可以在国家名称更改时使用管理面板添加/更改国家名称。

但有趣的是，您需要在每次页面加载时查询数据库，以获取所有“几乎不变”的国家/地区名称！！。

这种情况的解决方法是首先获取所有国家/地区名称并相应地缓存它们。当您第二次填充国家组合时，从缓存中获取国家列表。

*   如果缓存为空，则从国家表中获取所有国家并缓存它们
*   如果缓存项存在，则使用缓存国家（无数据库查询）
*   当您从管理部分更改国家名称时，也重新生成国家缓存

> 如果您不喜欢每次页面加载 200 多条*几乎不变且很少更新*的记录时都查询数据库，则这种方法最适合。这种方法也减少了数据库开销。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T10:08:11.590

假设您希望您的用户*仅*具有该列表中的国家/地区，DBMS 将需要强制从用户到列表的[FOREIGN KEY](http://www.w3schools.com/sql/sql_foreignkey.asp)，并且只有当列表位于数据库表中时才有可能。

如果您需要的话，您还可以更轻松地过滤或 JOINING ¹与数据库表。

哦，顺便说一句，[国家确实会发生变化](http://en.wikipedia.org/wiki/Geographical_renaming#Changes_resulting_from_splits_and_mergers)，所以你不能让这个列表完全保持不变，这是将它存储在数据库表中的一个额外参数。

* * *

*¹例如，用户表可能只存储国家/地区代码，在这种情况下，您必须将其与国家/地区表连接以获取完整的国家/地区名称。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T07:53:27.130

我认为，有很多好方法可以做到这一点。为了满足您的要求，您应该描述您到底需要什么（翻译？）

如果您将您的国家/地区存储在 SQL 数据库中，geonames.org 上有一个准备导入的解决方案，可以在此处下载转储：http: [//download.geonames.org/export/dump/](http://download.geonames.org/export/dump/)

在我看来，这是一个很好的起点。

# quartz-scheduler - 调度程序启动时来自quartz-job.xml 的Quartz 作业运行

> ID：12560643
> 
> 赞同：0
> 
> 时间：2012-09-24T07:33:53.060
> 
> 标签：quartz-scheduler

我正在运行从quartz-config.xml 配置的石英作业，预计每5 秒运行一次。作业运行良好，但问题是当我运行启动调度程序的主程序时，有时程序在启动调度程序后立即运行作业，有时在预定义间隔（即 5 秒）后运行作业。

```
<cron-expression>*/5 * * * * ?</cron-expression> 
```

我怎样才能让它在我启动调度程序后所说的间隔后运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T12:20:58.927

您可以延迟调度程序的启动（[http://quartz-scheduler.org/api/2.1.5/org/quartz/Scheduler.html#startDelayed(int](http://quartz-scheduler.org/api/2.1.5/org/quartz/Scheduler.html#startDelayed(int) )）

HIH

# javascript - http.get() 中的每秒请求数 - Node.js

> ID：12560645
> 
> 赞同：1
> 
> 时间：2012-09-24T07:33:53.990
> 
> 标签：javascript, node.js

我正在做一个超级基本的 http 请求应用程序`node.js`。

```
var http = require('http');

var options = {
  host: 'www.domain-here.com',
  port: 80,
  path: '/index.html'
};

for(var i = 0; i < 500; i++) {
    http.get(options, function(res) {
            console.log("[" + this.count + "] Response: " + res.statusCode);
    }.bind({ count: i })).on('error', function(e) {
            console.log("[" + this.count + "] Error: " + e.message);
    }.bind({ count: i }));
} 
```

不过，我需要获取每秒的 http 请求数。知道我如何每秒获取请求吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T07:51:16.917

```
// begin timestamp
var begin = new Date();

for(var i = 0; i < 500; i++) {
    http.get(options, function(res) {
            console.log("[" + this.count + "] Response: " + res.statusCode);
    }.bind({ count: i })).on('error', function(e) {
            console.log("[" + this.count + "] Error: " + e.message);
    }.bind({ count: i }));
}

// end timestamp
var end = new Date();

// Then, you need a simple calculation
var reqPerSec = i / ( end - begin ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T07:44:29.020

使用该`Date`对象记录时间并随后分析数字。

或者`setInterval`，如果您需要实时数据，您可以将 a 与计数器变量结合使用。

# c# - 具有默认 ID 的 Asp.Net Mvc 路由问题

> ID：12560646
> 
> 赞同：1
> 
> 时间：2012-09-24T07:33:54.160
> 
> 标签：c#, asp.net-mvc

我有一个带有列表控制器的 Asp.Net Mvc 网站。路线如下所示：

```
routes.MapRoute(
    "Default", // Route name
    "{controller}/{action}/{id}", // URL with parameters
    new { controller = "Home", action = "Index", id = UrlParameter.Optional },
    new string[] { "MySite.Web.Controllers" }
); 
```

很标准。现在我的列表控制器中有许多控制器操作。我希望能够转到 /listing/84 并将其转到 Index 操作或转到 /listing/create、/listing/edit、/listing/favorite 或 /listing/others 并将其转到相应的动作。对于我的大多数路线，情况已经如此。这是我的控制器代码：

```
public ActionResult Index(long? id)
{
    // my code that never gets hit
} 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T07:46:50.957

您可以为此定义一个特定的路由并为 id 定义一个约束：

```
routes.MapRoute(
    "ActionLess",
    "{controller}/{id}",
    new { controller = "Home", action = "Index" },
    new { id = @"^[0-9]+$" },
    new string[] { "MySite.Web.Controllers" }
);

routes.MapRoute(
    "Default", // Route name
    "{controller}/{action}/{id}", // URL with parameters
    new { controller = "Home", action = "Index", id = UrlParameter.Optional },
    new string[] { "MySite.Web.Controllers" }
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T07:43:03.307

您可以为其创建两条新路线

用于 lisitng/Create 用于导航 Create Action

```
routes.MapRoute(
     "listingCreate", // Route name
     "listing/Create", // URL with parameters
      new { controller = "listing", action = "Create" } 
); 
```

传递 Id 时的索引操作

```
routes.MapRoute(
     "lisingid", // Route name
     "listing/{Id}", // URL with parameters
      new { controller = "listing", action = "Index", id = UrlParameter.Optional } 
); 
```

我希望，它会帮助你。

# ios - 如何使用 Storyboard 以编程方式更改 rootViewController？

> ID：12560647
> 
> 赞同：1
> 
> 时间：2012-09-24T07:33:57.057
> 
> 标签：ios, xcode, storyboard, rootview

我在 xcode 中使用 storyBoards，我正在制作一个作为免责声明的 alertView。当按下所选按钮（是/否）时，我想切换并保存 rootViewController。我的意思是，当按下是时，我希望下次启动应用程序时使用不同的 rootViewController 启动。但是，如果在使用情节提要时 rootViewController 由 MainStoryBoard 中的箭头指定，我该怎么做？先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-12T14:25:05.140

您可以设置一个 cookie（例如使用 NSUserDefaults）告诉您需要从不同的视图控制器开始。然后在您的应用程序委托中，您可以检查此 cookie 值并像这样更改情节提要的初始视图控制器

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
// Register User Defaults Values
[[NSUserDefaults standardUserDefaults] registerDefaults:@{@"tutorial_already_displayed":@NO}];

if ([[NSUserDefaults standardUserDefaults] boolForKey:@"tutorial_already_displayed"] == NO)
{
    UIStoryboard*       storyboard = [UIStoryboard storyboardWithName:@"Storyboard" bundle:nil];
    UIViewController*   rootViewController = [storyboard instantiateViewControllerWithIdentifier:@"Tutorial"];
    self.window.rootViewController = rootViewController;
    [[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"tutorial_already_displayed"];
}

return YES;
} 
```

如果 rootViewController 未更改，则情节提要中的设置将是初始设置。

因此，在您单击按钮的操作中，您可以添加：

```
[[NSUserDefaults standardUserDefaults] setBool:NO forKey:@"tutorial_already_displayed"]; 
```

所以本教程将作为第一个视图控制器出现

希望它有所帮助！祝你好运。

ps：我知道这个问题很久以前就被问过了，但由于没有可接受的答案，对于下一个寻找这个答案的开发人员来说还为时不晚 ;-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T08:21:47.727

通常，您不能在情节提要中重用视图或视图控制器。它们是连接到 awakeFromNIB 中的代码的静态表示。

即使您想将不同的视图控制器连接到情节提要中的视图，您也无法做到。我会假设出于同样的原因也无法更改情节提要中的 rootViewController。

Storyboard 是很好的抽象，然而，在它们下面是一个普通的旧 nib，如果你想灵活地将任何 VC 编码到任何视图，并替换你的 rootViewController，你将需要创建另一个包含这些视图的 nib，因为故事板将不允许您即时重新配置它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T07:51:44.947

我这样做的方法是在 RootViewController viewDidLoad 方法中检查类似的情况。

您可以检查用户是否接受了条款等...（将其存储在 NSUserDefaults 或其他东西中）

如果他们在 RootViewController 的 viewDidLoad 中执行 segue 到您希望在应用程序启动时将它们带到的 viewController。

这种转场将在屏幕上出现任何内容之前发生，因此用户会认为应用程序已直接启动到新屏幕中。

此外，现在您的 popToRootViewController 方法会将您带到错误的屏幕。所以看看放松动作。这是一种无需多次弹出即可返回堆栈中任何位置的 viewController 的方式。

如果您需要，我可以找到一个链接，其中包含有关放松操作的更多信息。

# .net - 错误地解析引用

> ID：12560649
> 
> 赞同：2
> 
> 时间：2012-09-24T07:34:02.620
> 
> 标签：.net, vb.net, itextsharp

我正在尝试使用 iTextSharp 库为我们在公司的旧项目生成 PDF，一切正常，除了将 Imports 添加到使用 RadioButtonList 的表单时，它将此 RadioButtonList 视为 iTextSharp 对象而不是System.Web.UI.WebControls 并给我以下错误

重载解析失败，因为无法使用这些参数调用可访问的“添加”：

```
'Public Sub Add(item As System.Web.UI.WebControls.ListItem)': Value of type 'iTextSharp.text.ListItem' cannot be converted to 'System.Web.UI.WebControls.ListItem'.
'Public Sub Add(item As String)': Value of type 'iTextSharp.text.ListItem' cannot be converted to 'String' 
```

该控件定义如下：

```
<asp:RadioButtonList ID="rblChargeOrNot" runat="server" AutoPostBack="True" RepeatDirection="Horizontal" Width="60%"></asp:RadioButtonList> 
```

和同样的

```
 <asp:DropDownList ID="ddlnumber" runat="server"></asp:DropDownList> 
```

使用的技术是 vb.net framework 3.5

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T07:40:34.407

不，它正在处理您已声明为`ListItem`as`iTestSharp.text.ListItem`而不是`System.Web.UI.WebControls.ListItem`.

您没有显示构造此`ListItem`对象的代码 - 但您需要完全限定名称，或者考虑更改此类的`Import`s ，这样它就不会假定您`iTextSharp.text.ListItem`在声明此对象时的意思。

即你可能有这样的代码：

```
Import System
Import System.Web.UI
Import iTextSharp.text

...

Dim li as ListItem 
```

请注意，`iTextSharp.text`命名空间是导入的，但`System.Web.UI.WebControls`不是。VB 决定该`ListItem`对象属于`iTextSharp.text`。如果您已导入`System.Web.UI.WebControls`，您将收到一条关于该声明不明确的错误消息。您可以使用以下方法修复它：

```
Dim li as System.Web.UI.WebControls.ListItem 
```

# xcode - 我无法在应用程序购买中重新购买 - 消耗品

> ID：12560653
> 
> 赞同：1
> 
> 时间：2012-09-24T07:34:32.343
> 
> 标签：xcode, transactions, in-app-purchase, payment

我正在做一个“应用内购买 - 消耗品”系统。第一次可以正常购买，但是下次尝试购买时，就不行了。所以我换了一个测试用户，它也只能第一次购买。显示“SK payment transaction state failed”，我该如何解决？

```
- (void)buyProduct:(int)myNumber{
    SKPayment *payment = [SKPayment paymentWithProductIdentifier:[appDelegate.ArrayProductName objectAtIndex:myNumber]];
    [[SKPaymentQueue defaultQueue] addPayment:payment];
    [[SKPaymentQueue defaultQueue] addTransactionObserver:self];
}

- (void)paymentQueue:(SKPaymentQueue *)queue updatedTransactions:(NSArray *)transactions
{
    for (SKPaymentTransaction *transaction in transactions){
        switch (transaction.transactionState) {
            case SKPaymentTransactionStatePurchasing:

                break;
            case SKPaymentTransactionStatePurchased:
                [self completeTransaction:transaction];
                [[SKPaymentQueue defaultQueue] finishTransaction: transaction];
                break;
            case SKPaymentTransactionStateRestored:
                [self restoreTransaction:transaction];
                [[SKPaymentQueue defaultQueue] finishTransaction: transaction];
                break;
            case SKPaymentTransactionStateFailed:
                if (transaction.error.code != SKErrorPaymentCancelled){
                    NSLog(@"An error encounterd : %@",transaction.error.code);
                }
                break;
            default:
                break;
        }
    }
}

- (void)completeTransaction:(SKPaymentTransaction *)transaction { 
    [self verifyReceipt:(SKPaymentTransaction *)transaction];
}

- (void)restoreTransaction:(SKPaymentTransaction *)transaction {

}

- (BOOL)verifyReceipt:(SKPaymentTransaction *)transaction {
    NSString* jsonObjectString =  [self encode:(uint8_t *)transaction.transactionReceipt.bytes length:transaction.transactionReceipt.length];    
    NSString* completeString = [NSString stringWithFormat: @"myurl?receipt=%@", jsonObjectString];
    NSURL* urlForValidation = [NSURL URLWithString: completeString];
    NSMutableURLRequest* validationRequest = [[NSMutableURLRequest alloc] initWithURL: urlForValidation];
   [validationRequest setHTTPMethod: @"GET"];
    NSData * responseData = [NSURLConnection sendSynchronousRequest:validationRequest  returningResponse: nil  error: nil];
    NSString* responseString = [[NSString alloc] initWithData: responseData encoding: NSUTF8StringEncoding];
    NSLog(@"return data : %@",responseString);
    int success = [responseString intValue];
    return (success == 0);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T03:44:20.513

我试着买。系统提示“您已购买但尚未下载。点击确定立即下载”

我们是否需要先将数据发送到Apple的服务器才能使用PHP作为链接重新购买完整的系统？

[http://www.phpriot.com/articles/verifying-app-store-receipts-php-curl](http://www.phpriot.com/articles/verifying-app-store-receipts-php-curl)

[http://developer.apple.com/library/ios/#releasenotes/StoreKit/IAP_ReceiptValidation/_index.html#//apple_ref/doc/uid/TP40012484](http://developer.apple.com/library/ios/#releasenotes/StoreKit/IAP_ReceiptValidation/_index.html#//apple_ref/doc/uid/TP40012484)

# jquery - 如何避免 ASP 按钮单击事件的回发

> ID：12560655
> 
> 赞同：0
> 
> 时间：2012-09-24T07:34:37.977
> 
> 标签：jquery, asp.net, jquery-ui

我正在使用 jQuery 多选，因为我正在使用按钮单击事件，该事件进入服务器端并填充另一个下拉列表中的值。根据下拉列表中选中的选择，它会填充另一个下拉列表中的值。

问题：

例如：在第一个 jQuery 多选下拉列表中，如果我选择 3 个值并根据这三个检查值关闭下拉列表，则会在另一个 jQuery 多选下拉列表中获取详细信息，但仅检查最后一个选中的值并保留。我认为这是因为按钮单击事件发生了异步回发并且值没有保留。他们是否有任何选项可以防止按钮单击事件中的回发，但应该调用单击然后只保留值。

对于这些，我附上屏幕截图：

![在此处输入图像描述](../Images/7d5993ba00bab201efc15ec8490b48be.png)

基于这三个值，它被加载到另一个下拉列表中，但它显示“1 selected”，即默认的“Select”。

![在此处输入图像描述](../Images/7545ed38a7720af580317fae0e5b95a2.png)

但是第二个下拉列表我可以获得在第一个下拉列表中选中的值：

![在此处输入图像描述](../Images/760d4f58faea6706471500295688ffc0.png)

这是我的 javascript：

```
 $(document).ready(function () {

            $('.department').multiselect({
                show: ["bounce", 5], hide: ["blind", 1],

                close: function () {
                    debugger;
                    var values = new Array();

                    $(this).multiselect("getChecked").each(function (index, item) {
                        values.push($(item).val());
                    });
                    $("input[id*=selectedValues]").val(values.join(","));
                    document.getElementById("<%=hdnDepartment.ClientID %>").value = values;
                    if (document.getElementById("<%=hdnDepartment.ClientID %>").value != "") {
                        **$("#<%=Button1.ClientID %>")[0].click();**

                    }
                }

            })
        .multiselectfilter();
        });

protected void Button1_Click(object sender, EventArgs e)
    {
        Populate();
    } 
```

如果我错了，请纠正我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T07:56:39.337

您可以使用 OnClientClick 并根据您的要求返回 false 或 true。当 OnClientClick 返回 true 时将发生回发，否则不会回发

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T10:43:28.243

```
 <script type="text/javascript">
      function pageLoad() {
           $("#<%= DepartmentsListBox.ClientID %>").multiselect({
                create: function () {
                     $(this).data("initValues", $.map($("option:selected", this), function (option) { return option.value; }).join(","));
                },
                close: function () {
                     var selectedValues = $.map($("option:selected", this), function (option) { return option.value; }).join(",");
                     if (selectedValues !== $(this).data("initValues")) {
                          __doPostBack("<%= DepartmentsListBox.UniqueID %>", "");
                     }
                }
           });

           $("#<%= EmployeesListBox.ClientID %>").multiselect();
      }
 </script>

 <asp:UpdatePanel runat="server" UpdateMode="Always">
      <ContentTemplate>
           <asp:ListBox runat="server" ID="DepartmentsListBox" DataValueField="DepartmentId"
                SelectionMode="Multiple" DataTextField="Name" Width="300px"></asp:ListBox>
           <br />
           <asp:ListBox runat="server" ID="EmployeesListBox" Width="300px" SelectionMode="Multiple" AppendDataBoundItems="true"
                DataValueField="EmployeeId" DataTextField="Name"></asp:ListBox>
           <br />
           <asp:Button runat="server" ID="SubmitButton" Text="Submit" />
      </ContentTemplate>
 </asp:UpdatePanel> 
```

服务器代码

```
private static Random rnd = new Random();

private string[] selectedDepartments;
private string[] SelectedDepartments
{
    get
    {
        return selectedDepartments ?? (selectedDepartments = DepartmentsListBox.Items.OfType<ListItem>().Where(item => item.Selected).Select(item => item.Value).ToArray());
    }
}

protected void Page_Init(object sender, EventArgs e)
{
    EmployeesListBox.PreRender += new EventHandler(EmployeesListBox_PreRender);
    DepartmentsListBox.SelectedIndexChanged += new EventHandler(DepartmentsListBox_SelectedIndexChanged);
}

protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        BindDepartments();
    }
}

void EmployeesListBox_PreRender(object sender, EventArgs e)
{
    if (EmployeesListBox.Items.Count > 0)
    {
        EmployeesListBox.Attributes.Remove("disabled");
    }
    else
    {
        EmployeesListBox.Attributes["disabled"] = "disabled";
    }
}

private void BindDepartments()
{
    var departments = Enumerable.Range(1, 10)
        .Select(id => new { DepartmentId = id, Name = "Department " + id.ToString() });
    DepartmentsListBox.DataSource = departments;
    DepartmentsListBox.DataBind();
}

void DepartmentsListBox_SelectedIndexChanged(object sender, EventArgs e)
{
    var employees = Enumerable.Range(1, 10)
        .Select(id => new { EmployeeId = id, DepartmentId = rnd.Next(1, 10), Name = "Employee #" + id.ToString() })
        .Where(emp => SelectedDepartments.Contains(emp.DepartmentId.ToString())).ToList();

    for (int itemIndex = EmployeesListBox.Items.Count - 1; itemIndex >= 0; itemIndex--)
    {
        var employee = employees.FirstOrDefault(emp => emp.EmployeeId.ToString() == EmployeesListBox.Items[itemIndex].Value);
        if (employee == null)
        {
            EmployeesListBox.Items.RemoveAt(itemIndex);
        }
        else
        {
            employees.Remove(employee);
        }
    }

    EmployeesListBox.DataSource = employees;
    EmployeesListBox.DataBind();
} 
```

# javascript - 如何在 Javascript 中进行年/月计算？

> ID：12560659
> 
> 赞同：1
> 
> 时间：2012-09-24T07:34:52.427
> 
> 标签：javascript, jquery

我们有一个年/月 HTML 控件。基础价值保留为小数。例如：15 年零 2 个月等于“15.02”。

我们希望根据 2 年/月控制（加/减）进行计算。

只做基本的数学计算是行不通的：

```
 Value1 : 65.00
  Value2 : 47.09
  65.00 - 14.09 = 17.91 

 (is wrong, but should be 17.03 or (64.12 - 47.09)) 
```

是否有任何 Javscript/Jquery 函数或我可以用来进行年/月计算的库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T07:37:58.020

看看 DateJS：[http ://code.google.com/p/datejs/wiki/APIDocumentation](http://code.google.com/p/datejs/wiki/APIDocumentation)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T07:46:18.837

你用小数计算的方式行不通！因为，JS认为这是一个数字而不是一个日期..

要计算年或月（基本上是任何时间/日期系统），您需要正确的语法。 [访问这个](http://msdn.microsoft.com/en-us/library/ee532932%28v=vs.94%29.aspx)以获取语法

希望这对你有用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T07:51:22.480

只需将月份部分转换为常规小数（除以 12），进行数学运算，然后将小数部分转换回月份（乘以 12）。

您必须使用类似`var bits = Value1.split(".");`. 年份是`bits[0]`和月份`bits[1]`。

例如`47.09`将是`47 + (9 / 12 = 0.75) = 47.75`。

所以`65 - 47.75 = 12.25`。

将小数部分转换回月份：`0.25 * 12 = 0.3`. 所以答案是`47.03`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T08:01:07.617

[JavaScript 不支持运算符重载](https://stackoverflow.com/questions/4700085/can-i-define-custom-operator-overloads-in-javascript)，因此我认为您无法找到一种解决方案，让您可以逐字地使用`+`复合`-`年/月值。

但是，您可以使用加法和减法定义自己的年/月对象类型：

```
function YearsMonths(years, months) {
    this.years = years;

    if (months > 11) {
        this.years = this.years += Math.floor(months/12);
        this.months = months % 12;
    }
    else {
        if (months < 0) {
            this.months = 12 + (months % -12);
            this.years -= (Math.floor(months/-12) + 1);
        }
        else {
            this.months = months;
        }
    }
}

YearsMonths.prototype.add = function (otherYearsMonths) {
    newYears = this.years + otherYearsMonths.years;
    newMonths = this.months + otherYearsMonths.months;

    return new YearsMonths(newYears, newMonths);
}

YearsMonths.prototype.subtract = function (otherYearsMonths) {
    var newYears = this.years - otherYearsMonths.years,
        newMonths = this.months - otherYearsMonths.months;

    return new YearsMonths(newYears, newMonths);
} 
```

然后像这样使用它：

```
value1 = new YearsMonths(65, 0);
value2 = new YearsMonths(47, 9);

value3 = value1.subtract(value2);
value4 = value1.add(value2);

value3.years;
# 17
value3.months;
# 3

value4.years;
# 112
value4.months;
# 9 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T08:21:14.127

在这里你可以试试这个。它基本上检查您的数字是年还是月。脚本只是一个模板，你可以继续它并改进它，从中创建一个函数，或者定义你自己的原型。只需检查代码，希望它有帮助。

[http://jsfiddle.net/6pRGv/](http://jsfiddle.net/6pRGv/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-24T08:27:32.490

```
var a = '65.00'.split('.');
var b = '47.09'.split('.');
a = a[0] * 12 + Number(a[1]);
b = b[0] * 12 + Number(b[1]);
c = a - b;
c = Math.floor(c / 12) + (c % 12) / 100; 
```

# c# - 例外：“不支持 URI 格式”

> ID：12560664
> 
> 赞同：89
> 
> 时间：2012-09-24T07:35:28.230
> 
> 标签：c#, .net, .net-4.0

我有一个指向目录的绝对本地路径：`"file:\\C:\\Users\\john\\documents\\visual studio 2010\\Projects\\proj"`

但是，当我尝试将其放入`DirectoryInfo`ctor 时，我得到“不支持 URI 格式”异常。

我用谷歌搜索并查看了 SO，但我只看到远程路径的解决方案，而不是本地路径。我期望某种转换方法...

* * *

## 回答 #1

> 赞同：190
> 
> 时间：2012-09-24T07:37:49.440

```
string uriPath =
    "file:\\C:\\Users\\john\\documents\\visual studio 2010\\Projects\\proj";
string localPath = new Uri(uriPath).LocalPath; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-27T07:32:11.810

试试这个

```
ImagePath = "http://localhost/profilepics/abc.png";
   HttpWebRequest request = (HttpWebRequest)WebRequest.Create(ImagePath);
          HttpWebResponse response = (HttpWebResponse)request.GetResponse();
            Stream receiveStream = response.GetResponseStream(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-24T01:08:25.790

我用 Path.Combine(MapPath()) 解决了同样的错误，以获取物理文件路径而不是[http:///](http:///) www 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-10T11:25:27.230

```
 string ImagePath = "";

        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(ImagePath);
        string a = "";
        try
        {
            HttpWebResponse response = (HttpWebResponse)request.GetResponse(); 
            Stream receiveStream = response.GetResponseStream();
            if (receiveStream.CanRead)
            { a = "OK"; }
        }

        catch { } 
```

# html - 如何使用 Twitter Bootstrap 使网站适合移动设备？

> ID：12560680
> 
> 赞同：3
> 
> 时间：2012-09-24T07:36:30.517
> 
> 标签：html, css, mobile, twitter-bootstrap

我正在使用 Twitter Bootstrap，当我在移动设备中打开它时，我的网站出现了一些问题。

我的标题看起来很糟糕，当我调整窗口大小时，它看起来像这样：

![](../Images/880e99c6405ff7bd3489a5fc27e5b620.png)

在所有设备中应该是这样的：

![](../Images/e53a4610cbece2b031bde4bb217c2b6f.png)

这是我的 HTML：

```
 <ul class="nav pull-right">

          <li><a href="index.html"><b>Home</b></a></li>
          <li class="divider-vertical"></li>

          <li class="dropdown">
          <a href="#" class="dropdown-togle" data-toggle="dropdown">
          <b>Download</b>
          <b class="caret"></b></a>
          <ul class="dropdown-menu">
          <li><a href="downloading_link.html">Meepo for iPhone</a></li>
            <li><a href="#" id="not_active">Android coming soon</a></li>
            </ul>
            </li>

          <li class="divider-vertical"></li>
          <li><a href="faq.html"><b>F.A.Q.</b></a></li>
          <li class="divider-vertical"></li>
          <li><a href="support/index.html" id="last_link"><b>Support</b></a>
          </li>  
        </ul> 
```

和 CSS：

```
 .navbar .nav.pull-right {
   margin-left: 10px;
   margin-top:40px;
   margin-right: 0;
   background-image: url('../img/menuBG.png');
   background-repeat: no-repeat;
   height:57px;
   } 
```

我想我需要在这里删除背景图片，以使其在移动设备上可用。

我可以让它在移动设备上看起来更好（与 PC 相同）吗？我只需要为手机写一些新的 CSS 吗？也许我不应该使用响应式 css 来调整大小？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T08:38:25.807

这是为了溢出。

您需要将溢出设置为隐藏或无；您还可以采取其他一些措施来防止这种情况发生。

正确设置视口元标记会有所帮助，看起来像这样：

```
<meta name='viewport' content='user-scalable=no'> 
```

您还可以对缩放良好的菜单项使用关系值，例如 em 或百分比。将 px 值转换为 em 的一种快速方法是除以父元素的字体大小（通常主体为 16px 左右）

所以你的 CSS 现在看起来像这样：

```
.navbar .nav.pull-right {
   margin-left: 0.625em;
   margin-top: 2.5em;
   margin-right: 0;
   background-image: url('../img/menuBG.png');
   background-repeat: no-repeat;
   height:3.5em;
} 
```

# ruby - Rails Logger -Rails logrotate 自动

> ID：12560681
> 
> 赞同：1
> 
> 时间：2012-09-24T07:36:33.080
> 
> 标签：ruby, ruby-on-rails-3

我这样使用，config.logger = Logger.new(Rails.root.join('log', "#{Rails.env}.log"), 10, 10*1024)。它工作得很好。它清除日志文件达到 10240 字节。

我备份了日志文件，文件名是“development.log.0”，“development.log.1”..现在我想要“development.log.0.2012-09-24”（即我想在文件名末尾添加Time.now。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:41:13.580

这完全取决于您要部署到的堆栈，但我认为轮换日志不应该成为 Rails 应用程序的问题。我建议在操作系统级别使用`logrotate`（如果您在 *nix 上）每天通过`cron`.

[http://linuxcommand.org/man_pages/logrotate8.html](http://linuxcommand.org/man_pages/logrotate8.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T07:58:41.753

尝试这个

```
config.logger = Logger.new(Rails.root.join('log', "#{Rails.env}.log.#{Date.today.to_s}"), 10, 10*1024) 
```

# jquery - jquery 下拉列表值设置为 0

> ID：12560683
> 
> 赞同：0
> 
> 时间：2012-09-24T07:36:33.550
> 
> 标签：jquery, asp.net-mvc-3

我有 1 个控件如下

```
<div>
        Country<br />
        @Html.DropDownListFor(model => model.CountryId, new SelectList(Model.CountriesList, "CountryId", "CountryName"), "Please select one", new { style = "width: 250px;" })
    </div> 
```

我正在使用 jquery 来清空这个字段

```
$('#CountryId').val('');
$('#CountryId').val('0');
$('#CountryId').text('');
$("#CountryId option[value='0']").val('');
$("input[name='CountryId']").val(''); 
```

我尝试了所有的方法来清空下拉列表的值，但它们都没有帮助。

也是很重要的一点。我在课堂上的国家/地区使用必填字段验证器。所以这可能是问题所在。

请告诉我如何将下拉列表的值设置为 0；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T11:12:17.997

创建一个模型类，如下所示

```
public class Country
{
    [RegularExpression("([^0]*$)",ErrorMessage="please select country")]
    public int? Country_ID { get; set; }

    public List<SelectListItem> CountryName{ get; set; }
} 
```

现在在您的控制器操作中编写以下代码...

```
 public ActionResult actionName()
    {
    Country model = new Country();
    var query = (from a in DbContext.Country
                         select new 
                         {
                             C_ID = a.ID,
                             Name = a.Name
                         }).ToList();
                model.CountryName = new SelectList(query, "C_ID", "Name").ToList();
                model.CountryName.Insert(0, new SelectListItem { Text = "--Select--", Value = "0" });

return View(model);
    } 
```

现在像下面这样装饰你的视图

```
<%: Html.DropDownListFor(m => m.Country_ID, Model.CountryName, new { id = "drpCountryId", Style = "width:150px;" })%>
<%:Html.ValidationMessageFor(m => m.Country_ID, null, new { @class = "field-validation-message" })%> 
```

我希望这可以帮助你....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T07:38:09.277

您的选择列表看起来如何.. 它的值是否首先为 0 ？试试这个

```
$("#CountryId option:eq(0)").attr('selected', true) 
```

检查这个[小提琴](http://jsfiddle.net/sushanth009/2Cg8C/)

选择了下拉列表中的第 5 项选项

**更新代码**

对于选择，如果未提及该值且仅存在文本，**则它将文本视为值**..

所以这应该适用于你的情况

```
$("#CountryId").val('Please select one')​ 
```

检查[更新的小提琴](http://jsfiddle.net/sushanth009/2Cg8C/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T07:47:32.503

检查这个[**小提琴**](http://jsfiddle.net/nf3rm/)

```
$("select#CountryId")[0].selectedIndex = 1; 
```

**HTML 小提琴**

```
<select id="priority" name="priority">
<option value="0">0</option>
<option value="">-- Select Priority --</option>
<option value="1" selected="selected">1</option>
<option value="2">2</option>
<option value="3">3</option>
<option value="4">4</option>
<option value="5">5</option>
<option value="6">6</option>
<option value="7">7</option>
<option value="8">8</option>
<option value="9">9</option>
<option value="10">10</option>
</select>​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T07:47:43.743

您可以使用以下任何方法清除选定的值/设置要选择的第一个值：

```
$('#CountryId option').first().prop('selected', true); 
```

或者：

```
$('#CountryId').find('option').prop('selected',false); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T07:53:59.247

下面的代码将第一个选项“请选择一个”设置为值`0`

```
$("#CountryId option:eq(0)").val(0).attr("selected", true); 
```

# ajax - 使用 ajax 进行 Ajax 上传。XMLHttpRequest 无法加载错误

> ID：12560684
> 
> 赞同：0
> 
> 时间：2012-09-24T07:36:34.303
> 
> 标签：ajax, youtube, youtube-api

我正在开发一个 Youtube API，可以将视频从我的网站上传到用户 Youtube Acount。我设法上传了一个视频。但是当我尝试使用 ajax 上传视频时，会出现此错误。

> XMLHttpRequest 无法加载 [http://uploads.gdata.youtube.com/action/FormDataUpload/AIwbFAS4G0YorrPAcesbCbdDeRnONQ6PJsamMbLu2_KU8EZm_8jjn-Eq7C7oHPRMnbFwoZlMUuJNYOP2IVzJ1J0OL1nkC3a8kg?nexturl=https://mysitewebsite.com/test/](http://uploads.gdata.youtube.com/action/FormDataUpload/AIwbFAS4G0YorrPAcesbCbdDeRnONQ6PJsamMbLu2_KU8EZm_8jjn-Eq7C7oHPRMnbFwoZlMUuJNYOP2IVzJ1J0OL1nkC3a8kg?nexturl=https://mysitewebsite.com/test/)。Access-Control-Allow-Origin 不允许来源[http://mysitewebsite.com 。](http://mysitewebsite.com)

我使用这个[http://pixelcone.com/jquery/ajax-file-upload-script/](http://pixelcone.com/jquery/ajax-file-upload-script/) jquery 上传脚本来进行我喜欢的上传。

预先感谢您提供任何可以解决此错误的答案。顺便一提。我正在开发这是本地主机。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T19:43:14.283

uploads.gdata.youtube.com 还不支持 CORS。很快，希望。

同时，您可以按照以下示例进行操作，该示例使用标准 HTML 表单提交完成上传：http: [//gdata-samples.googlecode.com/svn/trunk/gdata/youtube_upload_cors.html](http://gdata-samples.googlecode.com/svn/trunk/gdata/youtube_upload_cors.html)

# ruby - Lib Xml Ruby:Error `parse': undefined method `read' for "file.xml":String (NoMethodError)

> ID：12560688
> 
> 赞同：0
> 
> 时间：2012-09-24T07:37:04.050
> 
> 标签：ruby, xml-parsing, libxml2, libxml-ruby

```
require 'xml/libxml'
require 'libxml/document'
$release_date
doc=LibXML::XML::Parser.io(file.xml).parse 
doc.root.each_element('//ABCD/xyz/') do |elem|
    elem.each_element do |node|             
        node.each_element do |child|
           if child.content=="ABCD"
               $release_date=node['date']
           else 
               if node['type']=="Original"
                   $release_date=node['date']
               end
           end  
        end    
    end 
end
puts "Release date : #{$release_date}" 
```

这是我为根据我的要求从 XML 文件中提取特定日期而编写的代码。我使用了 lib xml 库，但出现以下错误：

```
`parse': undefined method `read' for "file.xml":String (NoMethodError) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T08:18:13.990

根据[libxml 文档](http://libxml.rubyforge.org/rdoc/classes/LibXML/XML/Parser.html)，解析文件：

```
LibXML::XML::Parser.file('file.xml').parse 
```

或者

```
LibXML::Parser.io(File.open('file.xml')).parse 
```

另外，`each_element` [不带任何参数](http://libxml.rubyforge.org/rdoc/classes/LibXML/XML/Node.html#M000252)。如果你想做一个 XPath 查询，看看[find](http://libxml.rubyforge.org/rdoc/classes/LibXML/XML/Document.html#M000475)：

```
require 'xml'
doc = LibXML::XML::Parser.file("/tmp/test.xml").parse 
nodes = doc.find('//test')
nodes.each do |n|
  puts n.content
end 
```

# qt - 如何启用禁用的按钮

> ID：12560691
> 
> 赞同：4
> 
> 时间：2012-09-24T07:37:17.927
> 
> 标签：qt, button

我有一个工具按钮，我想在单击它时禁用它（如果它已启用）并在单击它时启用它（它已被禁用）。问题是当点击它时，我写了相应的插槽并且它正在禁用按钮。到目前为止，它正在工作。但是一旦禁用并且您单击它，它就不会跳转到插槽，它会永远完全禁用。我使用了错误的功能还是错误的信号？

```
...
bool mEnable = true;

void Test::OnEnableButtonTriggered() {
  mEnable = !mEnable;
  ui.OnEnable->setEnabled(mEnable);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T07:42:10.137

您不能直接触发禁用的按钮，但即使可以，您也很可能不应该这样做，因为这很烦人。

我建议您使用 QCheckbox 来实现您想要实现的目标。

如果您仍想使用禁用的按钮，您可能需要查看这篇文章：

[Qt 4.4：禁用接收鼠标事件的小部件](https://stackoverflow.com/questions/8467527/qt-4-4-disabled-widgets-receiving-mouse-events)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-05T19:04:54.080

`QPushButton`s 可以设置为可*检查*。使用`isChecked()`您可以读出按钮的状态。连接到`toggled()`插槽以处理此状态的更改。

正如 Mark 指出的那样，通过单击来*禁用（或启用）一个项目是不常见的。*禁用某个项目是一种表示单击它根本不会执行任何操作的方式。

（在发布此之前，我没有阅读 Mark 的回答下面的评论）

# jquery-mobile - jQuery Mobile 动态内容和浏览器历史

> ID：12560693
> 
> 赞同：1
> 
> 时间：2012-09-24T07:37:46.293
> 
> 标签：jquery-mobile, browser-history, dynamic-content

我正在使用 jquery mobile 开发一个移动应用程序，并且我有一个从 AJAX Web 服务调用动态填充的页面。这会创建一个链接列表，然后进一步过滤页面。例如，第一次加载页面时，它会获取分配给根类别的所有类别（在本例中为 0）。然后每个列表项都包含一个类别参数，该参数是每个类别 ID。但这意味着当您单击列表中的子项目时，它会向下加载下一个级别。

我遇到的问题是历史。如果我向下钻取列表并单击后退按钮，它会将我带回类别列表页面，但参数为 0 而不是我所在的最后一页可能是类别 ID 2。

创建动态页面时，jquery mobile 是否无法正确保留历史记录。

我已经按照这个例子，无法弄清楚为什么历史不能正常工作[http://jquerymobile.com/test/docs/pages/page-dynamic.html](http://jquerymobile.com/test/docs/pages/page-dynamic.html)。

我在导航栏中有此代码，可将您带到初始类别列表页面：

```
<li><a href="#category_page?category=0" id="shop-button" data-icon="custom" data-transition="none">Shop</a></li> 
```

然后，我使用以下代码填充页面：

```
var webServiceURL = "http://localhost/GV/mobileservices/AppsWebService.asmx";

function getCategories(parentId) {
var parameters = "{'parentID':" + parentId + "}";
$.mobile.showPageLoadingMsg();
$('#categoriesList').empty();
$.ajax({
    type: "POST",
    url: webServiceURL + "/GetCategories",
    data: parameters,
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    success: function (data) {

        var t = "";
        data = $.parseJSON(data.d);
        categoriesJSON = data;
        $.mobile.hidePageLoadingMsg();
        $.each(data, function (index, item) {
            t = t + "<li><a href=\"#category_page?category=" + item.CategoryID + "\" title=\"" + item.CategoryTitle + "\">" + item.CategoryName + "</a></li>";
        });
        $('#categoriesList').append(t).listview('refresh');
        $('#categoriesContent').iscrollview("refresh");
        $.mobile.hidePageLoadingMsg();
    },
    error: function (XMLHttpRequest, textStatus, errorThrown) {
        $.mobile.hidePageLoadingMsg();
        alert(errorThrown);
    }
});    
};

function showCategory(urlObj, options) {
var categoryID = urlObj.hash.replace(/.*category=/, "");
var pageSelector = urlObj.hash.replace(/\?.*$/, "");
var $page = $(pageSelector),
$header = $page.children(":jqmData(role=header)");

$header.find("div").find("h3").html("Category");
$page.page();
options.dataUrl = urlObj.href;
$.mobile.changePage($page, options);
setTimeout("getCategories(" + categoryID + ")", 100);
}

// Listen for any attempts to call changePage().
$(document).bind("pagebeforechange", function (e, data) {

if (typeof data.toPage === "string") {
    var u = $.mobile.path.parseUrl(data.toPage),
        re = /^#category_page/;
    if (u.hash.search(re) !== -1) {
        showCategory(u, data.options);
       e.preventDefault();
    }
}
}); 
```

有人可以帮我吗 ？创建动态页面时，我可以手动将每个页面/网址添加到历史记录吗？

谢谢，

克里斯

# sql - SQL：在时间范围内跟踪 MAX 值的变化

> ID：12560699
> 
> 赞同：0
> 
> 时间：2012-09-24T07:38:03.183
> 
> 标签：sql, oracle10g, group-by

我们有一个相当复杂的新产品评估流程。产品针对不同的区域和应用进行评估。在每个评估步骤之后，产品都会获得一个新的结果分数。这个分数（介于 0 到 10 之间）表示产品在流程中的进展程度。对于每个步骤，它保持不变或增加但从不减少，并且不均匀的数字标记未通过评估的产品。最高分称为产品状态。

我不想选择在 startDate （包括该状态）具有偶数状态（2、4、8、10）的所有产品以及时间范围的 endDate 状态。

（我还想选择在该时间范围内进入流程的所有新产品，但我认为这可以在第二个语句中轻松完成。）

我遇到的问题是如何在输出中包含两个初始状态。这是我的 SQL 语句：

```
SELECT 
  MyTable.product_id, 
  MyTable.REGION, 
  MyTable.SEGMENT,
  Max(MyTable.result) AS NEW_STATUS
  FROM 
     MyTable INNER JOIN (
     SELECT
      product_id, 
      REGION, 
      SEGMENT, 
      Max(result) AS INITIAL_STATUS
    FROM
      MyTable
    WHERE
      DATE <= to_date(:startDate)
    GROUP BY
      product_id, REGION, SEGMENT
    HAVING
      Max(result) IN(2,4,8,10)
   ) initial_status ON MyTable.product_id = initial_status.product_id    
  WHERE
    MyTable.DATE <= to_date(:endDate)
  GROUP BY
    MyTable.product_id, 
    MyTable.REGION, 
    MyTable.SEGMENT; 
```

如何在不影响 max/group by 的情况下在输出中包含 initial_status？（是甲骨文，但我不是专家，所以也许一些甲骨文特定的东西可以提供帮助）

编辑：

数据是一对多的关系。1个产品，很多评价。每个评估都有一个区域、细分、结果和评估日期（加上这里不相关的其他数据）。这里非规范化一些示例数据：

```
product_id    Region    Segment    Result    date
    1           US         AB         2    20.05.2012
    1           EU         TS         4    13.06.2012
    1           US         AB         4    01.09.2012
  234           US         AB         2    09.09.2012 
```

上述样本的预期输出，日期范围从 26.08.2012 到 21.09.2012：

```
product_id    Region    Segment    Initial_Status    New_Status
    1            US        AB             2              4
    1            EU        TS             4              4 (this did not change)
  234            US        AB           (null)           2 ( new entry) 
```

我知道我当前的 SQL 无法做到这一点。特别是显示新的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T12:33:17.710

这听起来像您需要一个子查询中的[分析函数和一个](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions004.htm#SQLRF06174)[UNION](http://docs.oracle.com/cd/E11882_01/server.112/e26088/queries004.htm#SQLRF52341)集合操作。分析函数的好处是您只需要进行一次表扫描。

> 我现在想选择在 startDate 具有偶数状态 (2,4,8,10) 的所有产品

这将是：

```
select product_id, region, segment, initial_status, new_status
  from ( select product_id, region, segment, initial_status, date
                -- The maximum status over all time per product_id,
                -- region and segment
              , max(initial_status) over 
                   ( partition by product_id, region, segment ) as new_status
           from my_table
                )
       -- Restrict on where 
 where ( date <= to_date(:start_date, <format model>)
          -- If you only want even you can use mod
         and mod(initial_status, 2) = 0
             )
    or new_status = initial_status 
```

然后，您可以获得所有新内容：

```
select product_id, region, segment, initial_status, new_status
  from ( select product_id, region, segment, initial_status
              , initial_status as new_status, date
                -- Minimum date this product_id, region, segment
                -- combination was entered
              , min(date) over 
                   ( partition by product_id, region, segment ) as min_date
                -- Find the most recent record for this combination
              , rank() over ( partition by product_id, region, segment
                                  order by date desc ) as rnk
           from my_table
                )
       -- By putting this condition in the outer-select
       -- you ensure you only get completely new records
 where min_date >= to_date(:startdate, <format_model>)
       -- If you have multiple records that were entered for a single pk
       -- between startdate and enddate you only want the most recent one.
   and rnk = 1 
```

最后，您可以使用 UNION 将这些添加在一起。如果您可以保证不会有重叠，那么请改用 UNION ALL，因为这不会执行 DISTINCT 操作，因此会提高查询的性能。

```
select query1
 union
select query2 
```

请注意如何将这些组合在一起成为一个查询，它看起来并不漂亮，但可能会更有效：

```
select product_id, region, segment, initial_status, new_status
  from ( select product_id, region, segment, initial_status
              , min(date) over 
                   ( partition by product_id, region, segment ) as min_date
              , rank() over ( partition by product_id, region, segment
                                  order by date desc ) as rnk
              , max(initial_status) over 
                   ( partition by product_id, region, segment ) as new_status
           from my_table
                )
 where ( min_date >= to_date(:startdate, <format_model>)
         and rnk = 1
             )
    or ( ( date <= to_date(:start_date, <format model>)
            and mod(initial_status, 2) = 0
                )
        or new_status = initial_status
           ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T07:10:46.987

只是为了文档，我想出了以下查询。我知道它包含最初问题中未提出的某些要求。其中一些是由于处理错误的数据。

```
SELECT 
  product_id, 
  REGION, 
  SEGMENT,
  initial_status,
  NEW_STATUS,
  "Comment",
  Count("Comment")  OVER (PARTITION BY 
      "Comment"
    ) "Counter"
from(
SELECT DISTINCT
  myTable.product_id, 
  myTable.REGION, 
  myTable.SEGMENT,
  initial_status.initial_status,
  Max(myTable.result) 
    OVER (PARTITION BY 
      myTable.product_id, 
      myTable.REGION, 
      myTable.SEGMENT
    ) NEW_STATUS,
  CASE WHEN initial_status.initial_status <> Max(myTable.result) 
    OVER (PARTITION BY 
      myTable.product_id, 
      myTable.REGION, 
      myTable.SEGMENT
    ) THEN 'Changed' ELSE 'Same' END as "Comment"  
  FROM 
    myTable INNER JOIN (
     SELECT
      product_id, 
      REGION, 
      SEGMENT, 
      Max(result) AS INITIAL_STATUS
    FROM
      myTable
    WHERE
      DATE <= to_date(:startDate)
      OR DATE is null
    GROUP BY
      product_id, REGION, SEGMENT
    HAVING
      Max(result) IN(2,4,8,10)
   ) initial_status 
    ON 
      myTable.product_id = initial_status.product_id
      AND myTable.REGION = initial_status.REGION
      AND (
        myTable.SEGMENT = initial_status.SEGMENT
        OR (myTable.SEGMENT is null AND initial_status.SEGMENT is null)
      )
  WHERE
    myTable.DATE <= to_date(:endDate)
UNION ALL
SELECT 
  myTable.product_id, 
  myTable.REGION, 
  myTable.SEGMENT,
  null AS initial_status,
  Max(myTable.result) 
    OVER (PARTITION BY 
      myTable.product_id, 
      myTable.REGION, 
      myTable.SEGMENT
    ) NEW_STATUS,
'New' As "Comment"
FROM myTable
WHERE evaluation_date BETWEEN to_date(:startDate) + 1 AND to_date(:endDate)
AND stage <> 'Stage 0')
ORDER BY
    product_id ASC; 
```

# c# - Visual Studio 2010 表单设计错误

> ID：12560702
> 
> 赞同：0
> 
> 时间：2012-09-24T07:38:06.467
> 
> 标签：c#, visual-studio-2010, dotnetbar

我正在使用`DotNetBar`我在 VS 2010 中开发的应用程序。

我已经删除了`DotNetBar`一次并打开了使用该`DotNetBar`组件的表单，但它显示了这个错误。

> 为了防止在加载设计器之前可能丢失数据，必须解决以下错误：

我已经重新安装`DotNetBar`，但是当我打开该表单时错误并没有消失 - 所有其他表单都可以正常工作而没有任何错误。我已经尝试重建和清理解决方案，但结果是一样的！

任何人都可以帮忙吗？

![在此处输入图像描述](../Images/8cad949414da7dec85bb7f9579d68235.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T07:42:56.103

您是否尝试过删除 .suo 文件？如果没有，请关闭 Visual Studio，然后删除 .suo 文件（以及在您使用该文件时再次删除 bin 和 obj 文件夹）。

# asp.net - 谷歌地图使用多边形突出显示有边界的国家

> ID：12560706
> 
> 赞同：3
> 
> 时间：2012-09-24T07:38:19.720
> 
> 标签：asp.net, google-maps, google-maps-api-3

我正在使用谷歌地图，并希望使用其国家边界线 lat lng 信息突出显示多个国家。我正在绘制多边形，但我想要每个国家边界的信息。

我从哪里可以获得这些信息以使用多边形突出显示国家/地区？或者还有其他突出国家的好方法吗？

下面的链接显示了我想要做什么.. [http://www.dynemetry.com/web/WorldRegion.aspx](http://www.dyngeometry.com/web/WorldRegion.aspx)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T12:01:48.727

终于搞定了。。

[http://www.icgg.org/corruption.cpi_2008_worldmap.html](http://www.icgg.org/corruption.cpi_2008_worldmap.html)

上面的链接包含所有数据和国家/地区的边界坐标。

# java - 我正在使用轴来生成客户端类。我需要在我的应用程序中使用 log4j

> ID：12560711
> 
> 赞同：0
> 
> 时间：2012-09-24T07:38:26.700
> 
> 标签：java, log4j, axis2

但是，当我使用 Logger.debug 时，轴生成的类也会写入我的日志文件中。我只想要项目的日志信息。谁可以帮我这个事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T08:20:30.383

我认为，您应该为应用程序的类配置不同的记录器。

在属性配置中应该是这样的：

```
log4j.rootLogger=ERROR,stdout
log4j.logger.com.yourapp.rootpackage=INFO,logfile 
```

我的意思是**stdout**是一个控制台附加程序，而**logfile**是一个文件附加程序。包**com.yourapp.rootpackage**是应用程序类的根包。

如您所见，只有与应用程序类关联的记录器才会写入日志文件附加程序。根记录器（与所有类关联的记录器）正在写入控制台。

我建议您了解有关配置和 log4j 的所有可能性的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T08:01:57.387

将以下代码添加到您的 log4j.xml 将阻止轴生成的类将日志写入您的调试文件。

`<logger name="org.apache.axis"> <level value="info"/> </logger>`

如果您使用属性文件来配置使用

```
log4j.category.org.apache.axis=INFO 
```

# windows-mobile - 扫描文本（光学字符识别）

> ID：12560715
> 
> 赞同：0
> 
> 时间：2012-09-24T07:38:50.517
> 
> 标签：windows-mobile, windows-mobile-6.5

是否可以为 windows mobile 6.5 开发可以扫描/读取文本（光学字符识别）的应用程序？或者如果有这样的应用程序存在？我即将开发一个需要该功能的应用程序，并且对 Windows Mobile 不熟悉，我真的不知道这是否可能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T03:35:37.577

有一些解决方案。由于 windows mobile 的资源有限，一些解决方案是使用服务器上传图像并取回文本文件。

其他解决方案仅在设备上运行。我用 Abby Finereader SDK for Windows CE 做了一些测试（他们提供了一个 PC 测试应用程序）。但结果并不令人满意。Windows 移动设备中的彩色相机（测试高达 5MP）太糟糕了。

Intermec 在一些较新的加固型手持设备上提供 eMDI（增强型移动文档成像）。使用该软件拍摄时，这种特殊的成像会自动校正文档图片的闪电和透视。这是归档最大 A4 纸张大小的文档的绝佳解决方案。

另一个可行的解决方案是名为 VERDEX 的地址标签读取软件。该软件拍摄地址标签的图像（相机），对其进行 OCR 并根据数据库验证地址。如果找不到地址，则代表您标签的 OCR 结果。

~约瑟夫

# php - 合并 PHP 和 HTML 中的行

> ID：12560717
> 
> 赞同：6
> 
> 时间：2012-09-24T07:38:53.033
> 
> 标签：php, html, css

我有一个 PHP 数组，它有几个不同的字段。对于某些行 id 和 name 是相同的，其余数据是不同的。

我想在 HTML 表格中显示数据，而不是多次列出重复的数据。我意识到我可以使用 colspan/rowspan 来合并表格单元格，但我不确定如何根据匹配值进行计数/求和。

下面是我的桌子的样子：

```
Id      Name     value1      value2       value3
2312     ABC     test        test2         test3   
2312     ABC     XYz          122           211
2455     XYZ     val11        val2          val3 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T07:59:10.217

我可以建议你创建一个新的多维数组并合并具有相同 ID 的数组......其余的会很容易。看看我做的例子

```
<?
 $init_array = array(
  array('id'=>2312, 'name'=>'ABC', 'value1'=>'asda', 'value2'=>'sdf', 'value3'=>'dfg'),
  array('id'=>2312, 'name'=>'ABC', 'value1'=>'asd', 'value2'=>'fgd', 'value3'=>'ret'),
  array('id'=>2455, 'name'=>'XYZ', 'value1'=>'sdgg', 'value2'=>'rew', 'value3'=>'gdg'),
 );
 $formatted_array = array();

 foreach( $init_array as $element ) {
  $formatted_array[ $element['id'] ][] = $element;
 }
?>

<table border="2">
 <? foreach($formatted_array as $row ): ?>
   <tr>
     <td rowspan="<?=count($row)?>"><?=$row[0]['id']?></td>
     <td rowspan="<?=count($row)?>"><?=$row[0]['name']?></td>
     <? foreach( $row as $value ): ?>
      <td><?=$value['value1']?></td>
      <td><?=$value['value2']?></td>
      <td><?=$value['value3']?></td>
      </tr><tr>
     <? endforeach; ?>
   </tr>
 <? endforeach; ?>
</table> 
```

[CodePad](http://codepad.org/oSUN6dAo)中的示例

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T08:53:30.910

关键是使用一个二维数组来存储每个单元格的大小（行跨度）值，如果我们不需要一个单元格，它的大小为零。

这是一个示例代码。您可能需要先对数组进行排序。

```
<?php
$rows = array(
    array(2312, 'ABC', 'asda', 'sdf', 'dfg'),
    array(2312, 'ABCD', 'asd', 'fgd', 'ret'),
    array(2313, 'ABCD', 'asd', 'fgd', 'ret'),
    array(2455, 'XYZ', 'sdgg', 'rew', 'gdg'),
);

function try_merge_col( &$rows, &$trs, &$tr, $row_i, $col_i )
{
    $row = $rows[$row_i];
    $old = $rows[$row_i-1];
    if( $row[$col_i] == $old[$col_i] )
    {
        $tr[$col_i]=0; //throw it
        for( $k = $row_i-1; $k>=0; $k-- ) //from down to up
        {
            if( $trs[$k][$col_i] > 0 ) { //do merge
                $trs[$k][$col_i]++;
                break;
            }   
        }   
    }   
}   

function get_table( $rows )
{
    $ret = "";
    $trs = array(
        array(1,1,1,1,1)
        ); //used to store cell size
    $last_row = null;
    for( $i = 1; $i < count($rows); $i++ )
    {
        $this_tr = array(1,1,1,1,1);
        try_merge_col( $rows, $trs, $this_tr, $i, 0 ); //id
        try_merge_col( $rows, $trs, $this_tr, $i, 1 ); //name
        array_push( $trs, $this_tr );
    }   
    for( $i = 0; $i < count($rows); $i++ )
    {
        $tr = $trs[$i];
        $ret .= "<tr>";
        for( $j=0 ; $j<5 ; $j++ )
        {
            if( $tr[$j] >= 1 )
            {
                if( $tr[$j] > 1 ) $ret .= "<td rowspan=\"".$tr[$j]."\">";
                else $ret .= "<td>";   
                $ret .= $rows[$i][$j]; 
                $ret .= "</td>";
            }   
        }   
        $ret .= "</tr>";
    }   
    return $ret;
}   

echo get_table( $rows );
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T07:50:07.970

看起来您可能只需要在考虑每一行和每一列的情况下运行一个 for 循环。

一些粗略的伪代码：

```
idArray = [];
idVal_Dict = {};

for col in table{ // Run through each Column ..
    if col == 1{
        for id in col1{
            if ! id == 1{ // If we're on the first column ..
                idArray.append(id.value()); // append id value ..
            }
        }
    }else{
        for val in col{ // For Other columns, find the matching ID & store to a dictionary ..
            idVal_Dict[val.value()] = idArray[val];
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T07:47:38.633

对数组进行[排序。](http://php.net/manual/en/function.ksort.php)

每次保存ID和名称，然后在每行的开头，检查ID和名称是否与最后一个相同。如果是 - 合并行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T08:00:57.963

我实际上不知道您打算在表格中显示什么，在两行中具有相同 ID 的不同数据。但我认为你应该在你的 php 代码中合并值（而不是在视图中），然后将它们作为清晰的数据发送到视图。因此，您可以在合并之前检查相等的 ID 值并获得它们的总和。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-09-24T07:51:00.103

使用 PHP 的 if else 语句检查 ID 的计数，然后应用 foreach 循环来显示信息。我认为它应该这样工作。您使用计数作为

```
count($data[id]); 
```

# c# - NumericUpDown 区分上下

> ID：12560720
> 
> 赞同：1
> 
> 时间：2012-09-24T07:38:58.127
> 
> 标签：c#, winforms, numericupdown

我有一个带有一些 numreicUpDown 控件的 WinForm，我想知道该值是增加还是减少。控件触发两种情况下更改的事件值，据我所知，程序调用方法 UpButton 和 DownButton。有没有其他方法可以知道值是如何更改的，或者我是否必须使用这种方法来执行此操作（例如触发事件或在 Up-Down-Button 中实现我的代码）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T07:46:49.663

没有标准的方法可以做到这一点。我建议记住旧值并将其与新值进行比较

```
decimal oldValue;

private void ValueChanged(object sender, EventArgs e)
{
    if (numericUpDown.Value > oldValue)
    {
    }
    else
    {
    }
    oldValue = numericUpDown.Value;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-16T22:02:18.497

创建您自己的控件来覆盖这些 UpButton 和 DownButton 方法：

```
using System.Windows.Forms;
public class EnhancedNUD : NumericUpDown
{
    public event EventHandler BeforeUpButtoning;
    public event EventHandler BeforeDownButtoning;
    public event EventHandler AfterUpButtoning;
    public event EventHandler AfterDownButtoning;

    public override void UpButton()
    {
        if (BeforeUpButtoning != null) BeforeUpButtoning.Invoke(this, new EventArgs());
        //Do what you want here...
        //Or comment out the line below and do your own thing
        base.UpButton();
        if (AfterUpButtoning != null) AfterUpButtoning.Invoke(this, new EventArgs());
    }
    public override void DownButton()
    {
        if (BeforeDownButtoning != null) BeforeDownButtoning.Invoke(this, new EventArgs());
        //Do what you want here...
        //Or comment out the line below and do your own thing
        base.DownButton();
        if (AfterDownButtoning != null) AfterDownButtoning.Invoke(this, new EventArgs());
    }
} 
```

然后，当您在表单上实现控件时，您可以连接一些事件，让您知道单击了哪个按钮或按下了键（上/下）。

# c# - ANTLR ID 与词法分析器规则混合

> ID：12560726
> 
> 赞同：2
> 
> 时间：2012-09-24T07:39:16.467
> 
> 标签：c#, parsing, antlr, abstract-syntax-tree, lexer

我一直在研究一种语法很长一段时间，但现在当我在一个大型代码库上尝试它时，我遇到了这个烦人的问题。当我试图解析一个 ID 时，例如“INDEX”，并且我有另一个查找“INDEX”的规则，解析器会失败。我创建了一个示例语法来说明问题：

```
public variable : '@' ID '=' STRING;
index : INDEX;
WS : (' '|'\r'|'\t'|'\u000C'|'\n') {Skip();};
INDEX : 'INDEX';    
ID  :   ('a'..'z'|'A'..'Z'|'_') ('a'..'z'|'A'..'Z'|'0'..'9'|'_')*;
STRING : '\'' ( ESC_SEQ | ~('\\'|'\'') )* '\''; 
```

所以当我试图解析“ `@some = 'some'`”它工作正常，但“ `@index = 'some'`”给了我`{<mismatched token: [@1,1:5='index',<8>,1:1], resync=@index='some'>}`

输出是 C# 中的 AST。关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T08:54:05.567

你能创建一个变量名词法分析器规则吗？

```
public VARIABLENAME : '@' ID 
```

这样关键字仍然可以工作，但不会干扰变量名。

该`variable`规则将被修改为：

```
public variable : VARIABLENAME '=' STRING; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T08:08:23.967

Try to use your grammar without "INDEX" rule and check this rule manually in your C# code of AST traversal.

# windows - 在 Windows 2008 上将 myprogram.exe 作为服务运行时出现问题

> ID：12560727
> 
> 赞同：4
> 
> 时间：2012-09-24T07:39:17.167
> 
> 标签：windows, windows-services

MyProgram.exe 用于侦听来自管道的请求并使用命令提示符来完美运行，但我尝试使用 Windows 服务来工作，但没有成功我在 Windows Server 2008 Enterprise 上尝试了以下步骤：

```
> sc create MyService binPath= "C:\test\MyProgram.exe" DisplayName= "MyProgramService"
>[SC] CreateService SUCCESS

>sc start MyService 
[SC] StartService FAILED 1053:

The service did not respond to the start or control request in a timely fashion. 
```

[参考](http://support.microsoft.com/kb/251192)

所以我在一个博客上读到我们需要为它创建注册表项然后我尝试了以下步骤

> 我在以下位置找到了我新创建的服务：HKEY_LOCAL_MACHINE\SYSTEM\ControlSet001\Services\MyService
> 
> 1.  从 regedit 的菜单中单击名为 MyService 的键（它看起来像一个文件夹）。选择“编辑”和“新建”，然后选择“密钥”。这将创建一个新密钥，您应该将其命名为“参数”。接下来，右键单击刚刚命名为“Parameters”的键并选择“new”，然后选择“string value”。将值命名为“应用程序”。双击字符串值，会弹出一个框。在“价值数据”下的框中，您需要输入 Dropbox 的完整路径。就我而言，路径是：C:\test\MyProgram.exe\MyProgram.exe
>     
>     
> 2.  启动您的新服务。导航到控制面板管理工具中的服务列表，或者在运行框中输入 services.msc。在列表中找到 DropBox 并启动它。新服务应设置为自动启动，但请随时检查以确定。

但是该服务启动了几秒钟并被终止。当我从 services.msc 手动启动服务时，它会出错

> 启动服务失败 1053：
> 
> 服务未及时响应启动或控制请求。

不知道为什么有人在这方面工作，请指导以使其成为服务。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T09:13:43.483

您不能将任何 EXE 作为 Windows 服务运行。您必须有一个 exe，它了解作为服务的含义并与 Windows 服务控制管理器进行适当的通信。

请参阅 Microsoft 文档，从[http://msdn.microsoft.com/en-us/library/windows/desktop/ms686953(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686953(v=vs.85).aspx)开始。

# autocomplete - Kendo UI AutoComplete 数据源传输只读取一次

> ID：12560736
> 
> 赞同：14
> 
> 时间：2012-09-24T07:39:56.460
> 
> 标签：autocomplete, datasource, kendo-ui, transport

我对 Kendo UI AutoComplete 组件感到疯狂。我正在使用自己的函数通过 jQuery 访问数据，因此我必须将 AutoComplete dataSource.transport.read 设置为函数。代码是这样的。

```
minLengthAtocomplete = 3;

$('#autocomplete').kendoAutoComplete({
    minLength : 3,
    filter : "contains",
    dataValueField : "key",
    dataTextField : "value",
    dataSource : new kendo.data.DataSource({
        transport : {
            read : _OnTransportRead
        },
        schema : {
            /* object schema */
        }
    })
});

function _OnTransportRead(e) {
    var text = $.trim(e.data.filter.filters[0].value);

    if (text && text.length >= minLengthAtocomplete) {
        _GetUsers(
            text,
            function onSuccess(data) {
                var users = [];
                 /* sets users with info in data */
                e.success(users);
            },
            function onError(error) {
                /* stuff with error */
            }
        );
    }
}

function _GetUsers(userName, onSuccess, onError) {
    /* Ajax to get users from DB */
} 
```

此代码运行完美，但**dataSource.transport.read**仅被调用一次。我使用文本*“michae”*进行第一次搜索， AutoComplete 组件按预期运行其 dataSource.transport.read。然后，我再添加一个字母来搜索*'michael'*，并且不再调用 dataSource.transport.read 。太令人沮丧了！

我尝试使用 autoSync dataSource 属性，手动 dataSource Sync，在 AutoComplete dataBound 上设置新的 dataSource 对象，但没有运气。

我究竟做错了什么？我忘记了什么？

提前致谢。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-24T20:32:04.313

您应该启用[serverFiltering](http://docs.kendoui.com/api/framework/datasource#serverfiltering%20booleandefault)以便数据源每次都发出请求。

```
$('#autocomplete').kendoAutoComplete({
    minLength : 3,
    filter : "contains",
    dataValueField : "key",
    dataTextField : "value",
    dataSource : new kendo.data.DataSource({,
        serverFiltering: true, 
        transport : {
            read : _OnTransportRead
        },
        schema : {
            /* object schema */
        }
    })
}); 
```

# java - Hibernate-Criteria：在“ON 子句”中使用多个条件

> ID：12560739
> 
> 赞同：0
> 
> 时间：2012-09-24T07:40:04.623
> 
> 标签：java, sql, hibernate, hibernate-criteria

我有一种情况，我需要在使用 Hibernate Criteria 时在 ON 子句中应用另一个 Condition。

我正在编写我的 MySQL，但我无法找到任何合理的方式在 Hibernate Criteria 中转换它。

```
SELECT s.StudentID AS StudentID, sc.CourseID AS CourseID
FROM Student s 
     LEFT JOIN StudentCourse sc ON 
          (sc.StudentID = s.StudentID AND sc.CourseID = 'XXX') 
```

**我在这个查询中做什么**

我希望所有学生列表都注册或不注册指定课程。

如果我有四个学生并且只有一个学生参加了一门课程，那么结果应该是

```
StudentID, CourseID
1          NULL
2          XXX
3          NULL
4          NULL 
```

**到目前为止，我所做**的是

```
Criteria cr = getSession().createCriteria(Student.class);
cr.createAlias("studentCourse", "sc", CriteriaSpecification.LEFT_JOIN)
    .add(Restrictions.eq("sc.CourseID", 'XXX')); 
```

通过运行此语句，我得到与以下查询等效的查询

```
SELECT *
FROM Student s
     LEFT JOIN StudentCourse sc ON (sc.StudentID = s.StudentID)
WHERE sc.CourseID = 'XXX' 
```

现在这个查询不符合查询的目的。它只返回 CourseID 不为空的一行。

**编辑**

休眠版本 3.4.0GA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T07:54:49.680

您可以将第二个标准移动到一般 WHERE 子句中，例如

```
WHERE (sc.CourseID = 'XXX' or sc.CourseID is null) 
```

# glassfish-embedded - GlassFish 安装错误

> ID：12560740
> 
> 赞同：0
> 
> 时间：2012-09-24T07:40:05.557
> 
> 标签：glassfish-embedded

我已经安装了 NetBeans 7.1.1 。我最初安装了 Tomcat 并删除了 Glassfish f 。但我需要开发一些企业应用程序。因此，我已经成功单独下载并安装了 Glassfish 3.1。当我在 localhost:8080 中运行时，它显示 GlassFish 服务器正在运行。但是当我去 New Projects->Java EE -> Enterprise Application ->.. 填写项目位置文件夹详细信息后，它会显示消息

> IDE 中未注册任何服务器。要注册服务器，请单击“添加...”按钮。

它要求我再次添加 Glassfish 服务器。即使我安装它说不能添加 glassfish 服务器实例......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T07:50:42.583

你在运行什么操作系统？这听起来很熟悉另一个曾经围绕 Windows 的问题。

这可能是一个粗略的解决方案，但是否考虑过升级到 Netbeans 7.2 并进行完全重新安装？我认为您应该能够相当简单地迁移您的设置。立即安装 EE 数据包，一切都应该为您准备好：http: [//netbeans.org/downloads/index.html](http://netbeans.org/downloads/index.html)

# authentication - 一个进程如何进行身份验证并与同一主机上的另一个进程安全通信

> ID：12560741
> 
> 赞同：0
> 
> 时间：2012-09-24T07:40:05.717
> 
> 标签：authentication, ssl, process, ipc, rmi

我试图通过 SSL 使用 Java RMI 来做到这一点，但后来我发现 SSL 证书将提供主机级别的身份验证，而不是进程级别的身份验证。

另外，我将密钥库的密码存储在配置中；因此证书可以被另一个攻击者进程使用，并且可以通过身份验证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T10:33:23.117

用于 SSL/TLS 的 X.509 证书可能用于识别主机名以外的其他内容（这通常已用于客户端证书）。

与服务器建立 SSL/TLS 连接时涉及两种类型的验证：

*   证书验证本身：这将验证证书在使用时是否受信任且对所需目的有效，通常使用 RFC 3280/RFC 5280 中描述的 PKI。
*   主机名验证：一旦它相信证书是真实的，客户端就会检查它是否适用于它正在寻找的服务器。这是特定于协议的（例如 RFC 2818，HTTPS 的第 3.1 节），但在 RFC 6125 中已针对大多数协议进行了概括。（这类似于检查护照上的图片是否与您面前的姓名匹配，而不仅仅是接受任何有效护照。）

默认情况下，Java`SSLSocket`不会执行第二步，除非您添加一些内容来执行此操作。（在 Java 7 中，一些新的 SSL 参数允许您在信任管理器中这样做，但仅限于特定协议。）

您需要找到一种方法来定义您希望如何识别您的其他应用程序和进程，使用主机名以外的其他内容，使用这些命名约定颁发证书，并让您的客户端应用程序检查这一点。

您应该能够在一个中实现您自己的身份验证机制`SSLSocketFactory`，在每个方法中返回套接字之前，将该工厂用于您的 RMI 应用程序，如下所述：[https ://blogs.oracle.com/lmalventosa/entry/using_the_ssl_tls_based1](https://blogs.oracle.com/lmalventosa/entry/using_the_ssl_tls_based1)

# linux - Linux上的gstreamer音频错误

> ID：12560744
> 
> 赞同：2
> 
> 时间：2012-09-24T07:40:19.227
> 
> 标签：linux, gstreamer

我在 Ubuntu 操作系统上使用 g streamer-0.10 将网络摄像头视频流式传输到 rtmp 服务器上，我得到了视频输出，但它们在音频方面存在问题。下面的命令用于流式传输

> gst-launch-0.10 v4l2src ！视频缩放方法=0！视频/x-raw-yuv,width=852,height=480,framerate=(fraction)24/1 ！ffmpeg色彩空间！x264enc pass=pass1 threads=0 bitrate=900 tune=zerolatency ！flvmux 名称=多路复用器！rtmpsink location='rtmp://..../live/testing' 解复用器。alsasrc device="hw:0,0" ！音频重采样！音频/x-raw-int,rate=48000,channels=2,depth=16 ！pulseaudiosink 块引用

通过运行上面的命令，我得到了一个错误

> gstbaseaudiosrc.c(840): gst_base_audio_src_create (): /GstPipeline:pipeline0/GstAlsaSrc:alsasrc0: 丢弃 13920 个样本。这很可能是因为下游无法跟上并且消耗样本太慢。块引用

所以音频是听不见的。

帮我解决这个问题。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T00:18:11.457

我不明白你的管道。什么是“解复用器”。在中间？您面临的问题是因为您没有使用队列分隔元素。在接收器之前和源之后保留一个队列，以便让其余所有单独的线程运行。它应该允许摆脱这个问题。

由于我的系统中没有脉冲音频或 rtmp 接收器，我已经测试了以下内容并且它可以工作。

```
gst-launch-0.10 v4l2src ! ffmpegcolorspace ! queue ! x264enc pass=pass1 threads=0 bitrate=900000 tune=zerolatency ! queue ! flvmux name=mux ! fakesink  alsasrc ! queue ! audioresample !  audioconvert !  queue ! autoaudiosink 
```

您可以相应地更改并使用它。为了使它工作并消除您面临的错误，我唯一要做的就是添加队列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-27T07:01:08.867

`audioresample`对我来说（带有 GStreamer 1.4.4 的 Raspberry Pi3 上的 Logitech c920）我能够通过将采样率设置为喜欢的`alsasrc`东西来摆脱“丢弃样本”警告。`flvmux`从`gst-inspect-1.0 flvmux`看来，它似乎`flvmux`只支持x-raw 和mp4`5512, 11025, 22050, 44100`的采样率。`5512, 8000, 11025, 16000, 22050, 44100`这是我的工作管道

```
gst-launch-1.0 -v -e \
    uvch264src initial-bitrate=800000 average-bitrate=800000 iframe-period=2000 device=/dev/video0 name=src auto-start=true \
    src.vidsrc ! video/x-h264,width=864,height=480,framerate=30/1 ! h264parse ! mux. \
    alsasrc device=hw:1 ! 'audio/x-raw, rate=32000, format=S16LE, channels=2' ! queue ! audioresample ! "audio/x-raw,rate=44100" ! queue ! voaacenc bitrate=96000 ! mux. \
    flvmux name=mux ! rtmpsink location="rtmp://live-sea.twitch.tv/app/MYSTREAMKEY" 
```

我很惊讶`flvmux`没有抱怨获得不支持的采样率的音频源。不确定这是否是预期的行为。

# javascript - 将 Moment.js 与 Twig 一起使用

> ID：12560746
> 
> 赞同：3
> 
> 时间：2012-09-24T07:40:20.620
> 
> 标签：javascript, twig, momentjs

我正在使用[Moment.js](http://momentjs.com/docs)和 Twig 来计算时间前，

**代码（Twig）** -
我在变量中有日期，`post_date_gmt`我正在使用它，

```
<div class="time">
  <time datetime="{{ post_date_gmt| date('Y-m-d H:i:s')}}">moment.unix({{ post_date_gmt }}).local().fromNow()</time>
</div> 
```

这给了我输出：

```
<div class="time">
    moment.unix(1331845445).local().fromNow()  
</div> 
```

当我尝试在控制台中运行以上字符串时，它运行良好 - '*一个月前*'。
我不明白为什么 twig 没有给我正确的输出？
难道我做错了什么？。谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T11:39:32.607

moment 是一个 javascript 函数，您尝试从 HTML 块而不是 javascript 块调用它。有几种方法可以做到这一点，但一个简单的技巧是：

```
<div class="time">
  <time datetime="{{ post_date_gmt| date('Y-m-d H:i:s')}}">
<script type="text/javascript">document.write(moment.unix({{ post_date_gmt }}).local().fromNow());</script></time>
</div> 
```

我不建议使用 document.write 那样。最好将其作为类似这样的一个单独的 javascript 块来执行（以 jquery 为例）：

```
<div class="time">
  <time id="time" datetime="{{ post_date_gmt| date('Y-m-d H:i:s')}}"></time>
</div>  

--- snip ---

<script type="text/javascript">
$(function(){
  $('#time').val( moment.unix({{ post_date_gmt }}).local().fromNow() );
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-03T09:41:39.980

```
<li><p class="created"></p></li>                            
<script type="text/javascript">
$(function(){
  $(".created").html(moment.unix({{ post_date_gmt| date('U') }}).local().fromNow());  
});
</script> 
```

# qt - 在 Qt 的 keyPressEvent 中手动生成 QMouseEvent

> ID：12560750
> 
> 赞同：0
> 
> 时间：2012-09-24T07:40:49.640
> 
> 标签：qt, events, user-interface, mouseevent, keyevent

我已经`contentsMousePressEvent`像这样覆盖了我的列表视图中的。

```
void AppListView::contentsMousePressEvent(QMouseEvent *e)
{
    AppGenericListView::contentsMousePressEvent(e);
    if (e->button() == Qt::RightButton)
        emit rightClicked();
    emit multiSelection();
} 
```

这是我的`keyPressEvent`。

```
void AppListView::keyPressEvent(QKeyEvent * e)
{
    AppGenericListView::keyPressEvent(e);
    if ((e->key() == Qt::Key_Up) || (e->key() == Qt::Key_Down))
    {
        QListViewItem * item = currentItem();
        if (item)
        {
            const QRect rect = itemRect(item);
            QMouseEvent mEvt(QEvent::MouseButtonPress, rect.center(), Qt::LeftButton, Qt::LeftButton);
            contentsMousePressEvent(&mEvt);
        }
    }
} 
```

目前，这段代码运行良好。请注意，我不是在创建动态`QMouseEvent`对象。我想知道的是这会导致未来崩溃吗？`contentMousePressEvent`需要动态对象吗？Qt doc对此并没有多说。有任何想法吗 ....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:46:07.027

事件处理程序不拥有他们收到的事件的所有权。所以你当前的代码很好。

[`QCoreApplication::postEvent`](http://doc.qt.digia.com/stable/qcoreapplication.html#postEvent)如果您将其传递给异步发送，它将被自动删除（并导致崩溃） 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T14:15:56.740

它不会崩溃，因为您没有使用事件循环。但我认为你应该这样做，原因有两个：

1.  您正在模拟鼠标按下事件，但您并未将其提供给对象。例如，您不会将假鼠标事件提供给`mousePressEvent()`. 因此，对于“自然”鼠标按下事件和您的模拟事件，应用程序的行为会有所不同。而且您可能会忘记为什么会这样，并且当您的代码发展时，您可能会遇到莫名其妙的崩溃。

2.  处理鼠标按下事件将阻止原始系统按键事件处理。您无法知道谁（哪个线程）将对`connect()`您从覆盖的鼠标事件处理程序发出的信号进行处理。如果您遇到僵局，请不要感到惊讶。

这种半生不熟的捷径只能作为临时解决方案。从长远来看，他们会在你的背后开枪。如果您真的想要一个快捷方式，请停止假装它是鼠标事件并实现一个特殊的单独方法，该方法也将从“真实”鼠标事件中调用。如果您想要正确处理的真实鼠标事件，请创建一个动态 QMouseEvent 并将其排入事件循环中。

```
QMouseEvent* evt = new QMouseEvent(QEvent::MouseButtonPress,
  rect.center(),this->mapToGlobal(rect.center()),
 Qt::LeftButton, Qt::LeftButton);
QCoreApplication::postEvent(this,evt); 
```

# eclipse - 在 Eclipse Buildpath-Libraries & WEB-INF/lib 文件夹中添加 jar 的区别

> ID：12560751
> 
> 赞同：2
> 
> 时间：2012-09-24T07:40:59.607
> 
> 标签：eclipse

我最近在 Eclipse Helios IDE 中部署基于 Spring 3.0 的 Web 应用程序时遇到了一个问题。我在**BuildPath -> Libraries -> Add External Jars** from my local repository（maven local repo）中包含了 spring 及其依赖项 jar 文件。当我试图启动服务器时，它会抛出 ClassNotFoundException，

**注意：我可以在Eclipse Buildpath-Libraries**中找到我的 Spring-web jar 。

```
SEVERE: Error configuring application listener of class org.springframework.web.context.ContextLoaderListener
java.lang.ClassNotFoundException: org.springframework.web.context.ContextLoaderListener
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1387)
    at `enter code here`org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1233)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:3786)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4342)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:719)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:443)
    at org.apache.catalina.core.StandardService.start(StandardService.java:516)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:710)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:578)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:288)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:413) 
```

**.classpath 文件：**

```
<?xml version="1.0" encoding="UTF-8"?>
<classpath>
    <classpathentry kind="src" path="rest-client/src/main/java"/>
    <classpathentry kind="src" path="rtsocketdatamonitor/src/main/java"/>
    <classpathentry kind="src" path="rtsocketdatamonitor/src/main/resources"/>
    <classpathentry kind="src" path="rest-client/src/main/resources"/>
    <classpathentry kind="var" path="M2_REPO/commons-lang/commons-lang/2.2/commons-lang-2.2.jar" sourcepath="M2_REPO/commons-lang/commons-lang/2.2/commons-lang-2.2-sources.jar"/>
    <classpathentry kind="var" path="M2_REPO/log4j/log4j/1.2.14/log4j-1.2.14.jar" sourcepath="M2_REPO/log4j/log4j/1.2.14/log4j-1.2.14-sources.jar"/>
    <classpathentry kind="var" path="M2_REPO/org/slf4j/slf4j-api/1.6.2/slf4j-api-1.6.2.jar" sourcepath="M2_REPO/org/slf4j/slf4j-api/1.5.6/slf4j-api-1.5.6-sources.jar"/>
    <classpathentry kind="var" path="M2_REPO/commons-collections/commons-collections/3.1/commons-collections-3.1.jar" sourcepath="M2_REPO/commons-collections/commons-collections/3.1/commons-collections-3.1-sources.jar"/>
    <classpathentry kind="var" path="M2_REPO/dom4j/dom4j/1.6.1/dom4j-1.6.1.jar" sourcepath="M2_REPO/dom4j/dom4j/1.6.1/dom4j-1.6.1-sources.jar"/>
    <classpathentry kind="var" path="M2_REPO/org/hibernate/hibernate-commons-annotations/3.2.0.Final/hibernate-commons-annotations-3.2.0.Final.jar" sourcepath="M2_REPO/org/hibernate/hibernate-commons-annotations/3.2.0.Final/hibernate-commons-annotations-3.2.0.Final-sources.jar"/>
    <classpathentry kind="var" path="M2_REPO/org/hibernate/javax/persistence/hibernate-jpa-2.0-api/1.0.0.Final/hibernate-jpa-2.0-api-1.0.0.Final.jar" sourcepath="M2_REPO/org/hibernate/javax/persistence/hibernate-jpa-2.0-api/1.0.0.Final/hibernate-jpa-2.0-api-1.0.0.Final-sources.jar"/>
    <classpathentry kind="var" path="M2_REPO/javax/transaction/jta/1.1/jta-1.1.jar" sourcepath="M2_REPO/javax/transaction/jta/1.1/jta-1.1-sources.jar"/>
    <classpathentry kind="var" path="M2_REPO/org/hibernate/hibernate-entitymanager/3.6.0.Final/hibernate-entitymanager-3.6.0.Final.jar" sourcepath="M2_REPO/org/hibernate/hibernate-entitymanager/3.6.0.Final/hibernate-entitymanager-3.6.0.Final-sources.jar"/>
    <classpathentry kind="var" path="M2_REPO/cglib/cglib/2.2/cglib-2.2.jar" sourcepath="M2_REPO/cglib/cglib/2.2/cglib-2.2-sources.jar"/>
    <classpathentry kind="var" path="M2_REPO/javassist/javassist/3.12.0.GA/javassist-3.12.0.GA.jar" sourcepath="M2_REPO/javassist/javassist/3.12.0.GA/javassist-3.12.0.GA-sources.jar"/>
    <classpathentry exported="true" kind="var" path="M2_REPO/org/slf4j/slf4j-log4j12/1.5.6/slf4j-log4j12-1.5.6.jar" sourcepath="M2_REPO/org/slf4j/slf4j-log4j12/1.5.6/slf4j-log4j12-1.5.6-sources.jar"/>
    <classpathentry kind="var" path="M2_REPO/org/springframework/spring-aop/3.0.5.RELEASE/spring-aop-3.0.5.RELEASE.jar" sourcepath="M2_REPO/org/springframework/spring-aop/3.0.5.RELEASE/spring-aop-3.0.5.RELEASE-sources.jar"/>
    <classpathentry kind="var" path="M2_REPO/aopalliance/aopalliance/1.0/aopalliance-1.0.jar" sourcepath="M2_REPO/aopalliance/aopalliance/1.0/aopalliance-1.0-sources.jar"/>
    <classpathentry kind="var" path="M2_REPO/org/springframework/spring-asm/3.0.5.RELEASE/spring-asm-3.0.5.RELEASE.jar" sourcepath="M2_REPO/org/springframework/spring-asm/3.0.5.RELEASE/spring-asm-3.0.5.RELEASE-sources.jar"/>
    <classpathentry kind="var" path="M2_REPO/org/springframework/spring-beans/3.0.5.RELEASE/spring-beans-3.0.5.RELEASE.jar" sourcepath="M2_REPO/org/springframework/spring-beans/3.0.5.RELEASE/spring-beans-3.0.5.RELEASE-sources.jar"/>
    <classpathentry kind="var" path="M2_REPO/org/springframework/spring-core/3.0.5.RELEASE/spring-core-3.0.5.RELEASE.jar" sourcepath="M2_REPO/org/springframework/spring-core/3.0.5.RELEASE/spring-core-3.0.5.RELEASE-sources.jar"/>
    <classpathentry kind="var" path="M2_REPO/commons-logging/commons-logging/1.1.1/commons-logging-1.1.1.jar" sourcepath="M2_REPO/commons-logging/commons-logging/1.1.1/commons-logging-1.1.1-sources.jar"/>
    <classpathentry kind="var" path="M2_REPO/org/springframework/spring-aspects/3.0.5.RELEASE/spring-aspects-3.0.5.RELEASE.jar" sourcepath="M2_REPO/org/springframework/spring-aspects/3.0.5.RELEASE/spring-aspects-3.0.5.RELEASE-sources.jar"/>
    <classpathentry kind="var" path="M2_REPO/org/springframework/spring-context/3.0.5.RELEASE/spring-context-3.0.5.RELEASE.jar" sourcepath="M2_REPO/org/springframework/spring-context/3.0.5.RELEASE/spring-context-3.0.5.RELEASE-sources.jar"/>
    <classpathentry kind="var" path="M2_REPO/org/springframework/spring-expression/3.0.5.RELEASE/spring-expression-3.0.5.RELEASE.jar" sourcepath="M2_REPO/org/springframework/spring-expression/3.0.5.RELEASE/spring-expression-3.0.5.RELEASE-sources.jar"/>
    <classpathentry kind="var" path="M2_REPO/org/springframework/spring-context-support/3.0.5.RELEASE/spring-context-support-3.0.5.RELEASE.jar" sourcepath="M2_REPO/org/springframework/spring-context-support/3.0.5.RELEASE/spring-context-support-3.0.5.RELEASE-sources.jar"/>
    <classpathentry kind="var" path="M2_REPO/org/springframework/spring-test/3.0.5.RELEASE/spring-test-3.0.5.RELEASE.jar" sourcepath="M2_REPO/org/springframework/spring-test/3.0.5.RELEASE/spring-test-3.0.5.RELEASE-sources.jar"/>
    <classpathentry kind="var" path="M2_REPO/org/springframework/spring-jdbc/3.0.5.RELEASE/spring-jdbc-3.0.5.RELEASE.jar" sourcepath="M2_REPO/org/springframework/spring-jdbc/3.0.5.RELEASE/spring-jdbc-3.0.5.RELEASE-sources.jar"/>
    <classpathentry kind="var" path="M2_REPO/org/springframework/spring-tx/3.0.5.RELEASE/spring-tx-3.0.5.RELEASE.jar" sourcepath="M2_REPO/org/springframework/spring-tx/3.0.5.RELEASE/spring-tx-3.0.5.RELEASE-sources.jar"/>
    <classpathentry kind="var" path="M2_REPO/org/springframework/spring-orm/3.0.5.RELEASE/spring-orm-3.0.5.RELEASE.jar" sourcepath="M2_REPO/org/springframework/spring-orm/3.0.5.RELEASE/spring-orm-3.0.5.RELEASE-sources.jar"/>
    <classpathentry kind="var" path="M2_REPO/org/springframework/spring-web/3.0.5.RELEASE/spring-web-3.0.5.RELEASE.jar" sourcepath="/SPRING_SOURCE_3.0.1/org.springframework.web-sources-3.0.1.RELEASE-A.jar"/>
    <classpathentry kind="var" path="M2_REPO/commons-codec/commons-codec/1.4/commons-codec-1.4.jar"/>
    <classpathentry kind="lib" path="D:/ProgramJR/spring/servlet-api-2.5.jar" sourcepath="C:/Users/sasikumar.s/.m2/repository/javax/servlet/servlet-api/2.5/servlet-api-2.5-sources.jar"/>
    <classpathentry kind="con" path="org.eclipse.jdt.launching.JRE_CONTAINER/org.eclipse.jdt.internal.debug.ui.launcher.StandardVMType/JavaSE-1.6">
        <attributes>
            <attribute name="owner.project.facets" value="java"/>
        </attributes>
    </classpathentry>
    <classpathentry kind="con" path="org.eclipse.jst.j2ee.internal.web.container"/>
    <classpathentry kind="output" path="build/classes"/>
</classpath> 
```

但是，当我在 WEB-INF/lib 文件夹中添加 jar 时，应用程序运行正常。（找不到上述错误）

请澄清“在构建路径中添加 jars”和 WEB-INF/lib 文件夹之间的区别。我对向每个项目添加 jar 不感兴趣。

感谢你的帮助。

# twitter - Twitter Profile Image API deprecated

> ID：12560753
> 
> 赞同：11
> 
> 时间：2012-09-24T07:41:03.470
> 
> 标签：twitter

I am using Twitter API version 1 and replacing them to v1.1.
Then I cannot find users/profile_image/:screen_name API on version 1.1.

```
https://api.twitter.com/1/users/profile_image/shonanshachu 
```

Does anyone know which API can be the best practice for replacing users/profile_image?
What I want is list of profile images or simple url with parameter of Twitter ID or screen name.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T03:02:26.627

I haven't found a great solution to this yet. The closest thing I have found is the [twitter API 1.1 docs for users/show](https://dev.twitter.com/docs/api/1.1/get/users/show), but that is an authenticated call (requiring a user context) which is rate-limited (180 requests per 15 minutes). They mention this about getting the profile image url on the page about uploading a new photo:

> You can either update your local cache the next time you request the user's information, or, at least 5 seconds after uploading the image, ask for the updated URL using GET users/show.

I imagine once the 1.0 API is shut off in March 2013, this question will get a lot of votes. :)

There are [some hints](https://dev.twitter.com/discussions/12098) that twitter is adding methods to their API to aid in retrieving images. We'll have to wait and see.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T10:23:31.133

Maybe this will be useful for you. Those calls return all the info you need, including the image link. If you need only one user's image for a given user_id or user_screen, then you can read more from here: [https://dev.twitter.com/docs/user-profile-images-and-banners](https://dev.twitter.com/docs/user-profile-images-and-banners)

[https://api.twitter.com/1.1/followers/list.json](https://api.twitter.com/1.1/followers/list.json) (you can replace followers with friends)

# windows-services - 强制 Windows 服务失败

> ID：12560758
> 
> 赞同：1
> 
> 时间：2012-09-24T07:41:13.843
> 
> 标签：windows-services, windows-server-2012

每当特定的 Windows 服务失败时，我都想运行我自己创建的程序。但是，我根本找不到故意让它失败的方法，这样我就可以实际测试一切是否正常。

请注意，有问题的服务不是我自己编写的，所以我不能从代码内部以编程方式使其失败。但是，我不介意编写一个可以使服务失败的程序。

当然，我更喜欢在 services.msc 中的某处有一个“使服务失败”按钮 ... ;)

我正在执行此操作的服务器正在运行 Windows Server 2012。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-23T01:52:01.467

如果您不想使用命令行：

以管理员身份打开 Windows 任务管理器，在“服务”选项卡中找到您要测试的服务。右键单击该服务，然后单击 Go to process。所选进程（如果有）是与您的服务相对应的进程。终止此进程以模拟服务故障。

请注意，以这种方式终止进程可能会导致问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T07:44:47.697

定义“失败”。如果您希望进程结束，只需使用[pskill](http://technet.microsoft.com/en-us/sysinternals/bb896683.aspx)或可以终止提升的进程的类似工具（作为管理员）。

# api - 用于检索域名的 Google Apps API

> ID：12560760
> 
> 赞同：0
> 
> 时间：2012-09-24T07:41:32.430
> 
> 标签：api, google-apps

我正在寻找允许我检索与 Google Apps 实例关联的所有域名的 Google Apps API。我正在寻找与此等效的程序：https: [//www.google.com/a/cpanel/gcompany.nl/DomainSettingsDomains](https://www.google.com/a/cpanel/gcompany.nl/DomainSettingsDomains)

作为一个额外的好处，如果还有一种方法可以检查给定的域名是用作别名还是用于多域配置，那将是非常好的。

其他要求：

*   我需要使用 Google App Engine 应用程序 (Java) 提供此 API。
*   API*必须*允许使用 OAUTH 进行身份验证。
*   该应用的所有者不是 Google Apps 转销商（没有特权）。
*   该应用程序只需要只读访问权限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T21:30:43.337

你的答案是正确的。请求 API 调用以检索与实例关联的域时出现问题。我建议主演： [http ://code.google.com/a/google.com/p/apps-api-issues/issues/detail?id=2278](http://code.google.com/a/google.com/p/apps-api-issues/issues/detail?id=2278)

检索所有用户的“最轻量级”功能是检索所有组织用户，因为每个用户只返回主电子邮件和组织，而不是名字和姓氏、暂停状态、管理员状态等详细信息： [https://developers。 google.com/google-apps/provisioning/#retrieving_organization_users_experimental](https://developers.google.com/google-apps/provisioning/#retrieving_organization_users_experimental)

当然，此功能不会返回没有用户的域别名和辅助域。

周杰伦

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T12:52:08.267

我找不到执行此操作的 Google Apps API。太糟糕了。

下一个最好的方法是使用 Provisioning API 或 User Profiles API，获取所有（用户）条目，获取每个条目的 PRIMARY 电子邮件地址并解析它以获取域名。

这很混乱，特别是如果您有一个拥有数万用户的 Google Apps 域。

# c++ - 删除阻止插入

> ID：12560762
> 
> 赞同：1
> 
> 时间：2012-09-24T07:41:34.900
> 
> 标签：c++, sql, multithreading, deadlock, informix

**操作系统**：Solaris
**数据库**：Informix

我有一个有 2 个线程的进程：

线程 1 处理新事务并执行 DB INSERTS
线程 2 处理现有事务并执行 DB DELETES

**问题**

线程 1 不断在表上执行 INSERTS（添加新事务）。
线程 2 不断地根据主键从同一个表中执行 DELETES（删除过期事务）

`244`由于页/表锁定而发生的 Informix 错误，INSERTS 失败。

我猜，DELETE 是在做一个表锁而不是行锁，并阻止插入工作。

有什么办法可以防止这种死锁吗？

* * *

**编辑**

我发现了另一个线索。该`244`错误是由`SELECT`查询引起的。在执行操作之前，and
操作都会从频繁更新的表中执行一次。`insert``delete``select`

隔离设置为`COMMITTED READ`。当我`select`从 dbaccess 手动对这个表执行操作时，当删除发生时，我得到了同样的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T08:00:40.027

如果在通过主键删除单个元素时 DELETE 正在执行全表锁定，我会感到非常惊讶。相反，由于修改的行数，一个（或两个）事务本身的寿命最终可能会触发表锁。通常，您可以通过消除每个事务中除单行之外的所有操作，并确保您的事务模型是读提交的，来避免此类易失性表中的死锁。至少我的经验是这样的。

# visual-studio-2010 - vs2010如何打开vs 2008解决方案

> ID：12560776
> 
> 赞同：1
> 
> 时间：2012-09-24T07:42:39.693
> 
> 标签：visual-studio-2010, visual-studio-2008, projects-and-solutions

请帮助我如何在 Visual Studio 2010 中打开 Visual Studio 2008 解决方案，以及我必须在 web.config 文件中进行哪些更改。

```
<add assembly="CrystalDecisions.CrystalReports.Engine, Version=10.5.3700.0, Culture=neutral, PublicKeyToken=692fbea5521e1304"/> 
```

当我在 VS2010 中运行解决方案时，此行显示错误

# database - 通过 Yii 框架将数据插入外部 MSSQL 数据库

> ID：12560777
> 
> 赞同：1
> 
> 时间：2012-09-24T07:42:44.113
> 
> 标签：database, insert, yii, external

我正在使用 Yii 框架来创建我的项目。我需要将一些数据从 MySQL（我的项目）导出到同一网络上的外部 Microsoft SQL 服务器。

基本上，用户需要在我的视图中单击一个按钮（它将执行导出插入），结果应该会显示 - 成功（如果查询成功）或失败（如果出现问题）。结果部分非常简单，因为我将使用“setFlash”来显示适当的消息，但我想知道如何通过 Yii 将数据插入外部数据库。

你知道如何做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T08:47:55.403

好吧，我同意@SuVeRa 在定义两个`db`实例的第一部分，`config.php`但我认为**sql 命令**部分是不必要的（另外我讨厌写 sql :D）

**相反，您可以这样做：**

```
class SomeModel extends CActiveRecord 
{
  ...
  // Override the getDbConnection() function to use the ms sql db connection
  public function getDbConnection()
  {
     return Yii::app()->ms_sql_db_connection; // The name of the connection in config.php
  }

  public function transfer()
  {
    // Here you can do all the transferring logic using normal Yii Active Record functions
  }
} 
```

查看上的[文档](http://www.yiiframework.com/doc/api/1.1/CActiveRecord#getDbConnection-detail)`getDbConnection()`。

# bash - 以特定字符或行尾结尾的 sed 模式

> ID：12560791
> 
> 赞同：0
> 
> 时间：2012-09-24T07:43:51.107
> 
> 标签：bash, sed, grep

我使用`grep v2.5.1`并且我想在 grep 输出中为文件名着色。

我可以使用另一个带有模式的 grep 命令`/[^/:]*\(:\|$\)`：

```
grep --color=always something */*    | grep --color '/[^/:]*\(:\|$\)' 
```

同样的模式也适用于列出文件：

```
grep --color=always something */* -l | grep --color '/[^/:]*\(:\|$\)' 
```

但我更喜欢命令，`sed`我不知道如何翻译:-(`\(:\|$\)``sed`

例如：

```
echo 'dir/file: xxxx' | sed 's|/\([^/:]*\)(:|$)|/\o033[1;35m\1\o033[0m\2|' 
```

仅供参考，我的完整功能`~/.bashrc`

```
gg() {
    find . -name .svn -prune -o -type f '(' -name '*.java' -o -name '*.h' -o -name '*.cpp' -o -name 'Make*' -o -name '*.sh' ')' -print0 |
    xargs -0 grep --color=always "$@" |
    sed 's|/\([^/:]*\)(:|$)|/\o033[1;35m\1\o033[0m\2|'
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T07:49:03.070

在尝试了其他一些可能性后，我终于找到了：
**`grep`pattern is same as `sed`pattern for this purpose**

我的完整功能是：

```
gg ()
{
   find . -path '*/.svn' -prune -o -type f '(' -name '*.java' -o -name '*.h' -o -name '*.hpp' -o -name '*.hxx' -o -name '*.cpp' -o -name '*.cxx' -o -name '*.c' -o -name '[Mm]akefi*[^~]' -o -name '*.sh' -o -iname '*.xml' ')' -exec grep --color=always "$@" '{}' '+' | 
   sed -u 's_\(/\|^\)\([^/:]*\)\(:\|$\)_\1\o033[1;37m\2\o033[0m\3_'
} 
```

我仍然愿意接受任何评论、建议、改进、贡献……
干杯 ;-)

# c# - 从 C# 迁移到 Java

> ID：12560792
> 
> 赞同：0
> 
> 时间：2012-09-24T07:43:55.730
> 
> 标签：c#, java, dataset, resultset

我很想知道这条线是什么意思：

```
 diferencias.Tables[0].Rows[0]["dif_cpu"].ToString() 
```

这是否意味着我从 dif_cpu 列中获得了第一行？非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T08:02:38.803

```
diferencias.Tables[0].Rows[0]["dif_cpu"].ToString() 
```

它将第一行和列下单元格的内容转换`dif_cpu`为字符串。

![在此处输入图像描述](../Images/4a56b7e839b8e1613e2f133bd887e0d7.png)

`X`将使用标有 的单元格的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T07:46:50.173

它获取 DataSet 的第一个表，选择 dif_cpu 列的第一行并将值转换为字符串。

# vb.net - 在 OpenNetCF 中将字符串转换为 PhysicalAddress

> ID：12560793
> 
> 赞同：0
> 
> 时间：2012-09-24T07:44:06.727
> 
> 标签：vb.net, windows-ce, opennetcf, smart-device

我有将 Mac 地址获取到 IPAddress 的示例代码，我正在尝试调用该函数，但我没有得到。

我有 Mac 地址

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click

    Dim macadd As String = "00:19:70:7a:78:e0"

    '' HOW DO I CONVERT STRING VALUE TO PHYSICALADDRESS OBJECT, because Physical.Parse i not available

    ''MsgBox(GetAdapterForMac(macaddress)) '' I want to Pass mac address here
End Sub

Private Function GetAdapterForMac(ByVal mac As PhysicalAddress) As IPAddress
    Dim intf As NetworkInterface = (From n In NetworkInterface.GetAllNetworkInterfaces() _
        Where n.GetPhysicalAddress().Equals(mac) _
    Select n).FirstOrDefault()
    If intf Is Nothing Then
        Return Nothing
    End If
    Return intf.CurrentIpAddress()
End Function 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T01:43:27.510

Something along these lines will do it:

```
public static PhysicalAddress Parse(string data)
{
    var bytes = new List<byte>();
    foreach(var b in data.Split(':'))
    {
        bytes.Add(byte.Parse(b, System.Globalization.NumberStyles.HexNumber));
    };
    return new PhysicalAddress(bytes.ToArray());
} 
```

# c++ - 我应该通过迭代器还是访问运算符来迭代向量？

> ID：12560796
> 
> 赞同：5
> 
> 时间：2012-09-24T07:44:24.383
> 
> 标签：c++, performance, for-loop, stdvector

我有一个向量声明为

```
std::vector<int> MyVector;
MyVector.push_back(5);
MyVector.push_back(6);
MyVector.push_back(7); 
```

我应该如何在 for 循环中使用它？

通过使用迭代器对其进行迭代？

```
for (std::vector<int>::iterator it=MyVector.begin(); it!=MyVector.end(); ++it)
{
    std::cout << "Vector element (*it): " << *it << std::endl;
} 
```

还是通过它的访问迭代器？

```
for (std::vector<int>::size_type i=0; i<MyVector.size(); i++)
{
    std::cout << "Vector element  (i) : " << MyVector.at(i) << std::endl;
} 
```

在我在互联网上找到的示例中，它们都被使用。在所有条件下，其中一个是否优于另一个？如果不是，我什么时候应该更喜欢其中一个而不是另一个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T07:47:33.533

第一种格式是用于迭代标准库容器的***更通用格式，因此更常见和直观。***如果您需要更改容器，则此迭代代码不会受到影响。它将适用于每种标准库容器类型，因此它为您提供更通用的代码。

在第二种格式中，`std::vector::at()`每次迭代时都会检查边界，因此它可能***对性能有点不利***。第一种格式中不存在此开销，因为不涉及边界检查。请注意，使用的情况也是如此`operator[]`。
请注意，除非您处理大量数据，否则性能滞后并没有您注意到的那么多。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T07:51:50.090

使用`std::vector's [] operator`可能更快，因为`std::vector::at()`在 for 循环中使用会检查向量的大小两次（在 for 循环和 std::vector::at() 的边界检查中）。

第一种方法可以在其他容器中使用，因此可以在您更改容器类型时为您提供很大帮助。

如果您使用 C++11，请使用基于范围的循环。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T07:55:51.647

首先，如果您有 C++11，请使用基于范围的：

```
for (auto i : MyVector)
{
    std::cout << i;
} 
```

或者`BOOST_FOREACH`在 C++03 中：

```
BOOST_FOREACH(int& i, MyVector)
{
  std::cout << i;
} 
```

或者`std::copy`：

```
std::copy(MyVector.begin(),
          MyVector.end(), 
          std::ostream_iterator<int>(std::cout, "\n")); 
```

至于手头的问题，`at()`检查索引是否在界限内，如果不在则抛出异常。所以，除非你需要额外的检查，否则不要使用它。您拥有它的第一种方式是标准的并且效果很好。有些人很迂腐，甚至是这样写的：

```
for (std::vector<int>::iterator it=MyVector.begin(), end = MyVector.end(); it!= end; ++it)
{
    std::cout << "Vector element (*it): " << *it << std::endl;
} 
```

在上面我缓存了`end`迭代器而不是调用`end()`每个循环。这是否真的会产生性能差异，我不知道。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-24T08:53:19.297

没有“一个优于另一个”（除了你几乎不想使用`at()`-`at()`只有当你真的可以做一些事情来从错误中恢复时才合适）。迭代器与索引的使用主要是一种风格，以及您传递的信息。更惯用的 C++ 做事方式是迭代器，但来自其他背景的人（例如，数学家）会发现索引更惯用。

有一个真正的区别：

*   迭代器习语将适用于其他类型的容器。如果您确实有可能使用其他容器，这可能是相关的。

*   索引习惯用法可以为多个不同的容器使用单个索引。如果您要遍历多个`vector`具有相同大小的元素，使用索引习惯用法可以更清楚地表明您正在访问每个`vector`. （同样，这似乎最常发生在数学应用中。）

*   最后，任何时候你真的在做随机访问，或者以任何方式计算元素，使用索引可能更直观。（在这种情况下，您可能希望在 中进行计算`int`，仅`size_t`在最后一刻转换为。）

# html - 谷歌浏览器：某些网页上的垂直滚动条消失，可能是由于工具栏奇怪

> ID：12560797
> 
> 赞同：12
> 
> 时间：2012-09-24T07:44:27.650
> 
> 标签：html, google-chrome

我的一位客户无法查看我们网站上的某些页面。具体来说，它是垂直滚动条，在某些页面上消失了。

她正在使用谷歌浏览器，如下图所示，Chrome 也有一个奇怪的工具栏。

在这第一张图片上，滚动没有问题

[http://i45.tinypic.com/3444bqe.png](http://i45.tinypic.com/3444bqe.png)

接下来，滚动条消失了，尽管页面上有很多内容。

[http://i47.tinypic.com/125qdlv.png](http://i47.tinypic.com/125qdlv.png)

我试图在我自己的机器上使用相同的 Chrome 版本重现该错误，但这是不可能的。所以我怀疑奇怪的工具栏是罪魁祸首。

有人知道哪个扩展提供了这个栏吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-15T07:40:03.877

始终打开滚动条对我有用：

```
body {
  overflow-y: scroll;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-01-22T12:21:42.117

我通过关闭“在可用时使用硬件加速”修复了我丢失的滚动条问题它位于 chrome://settings/system

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-14T17:41:49.357

禁用扩展解决了我的问题，谢谢！这是一个额外的建议。要快速暂时“禁用”您的扩展程序，只需在 Chrome 中**打开一个新的隐身窗口。**

```
Menu -> "New incognito window" 
```

或者

`Ctrl`+ `Shift`+`N`

干杯! 乔什

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-07T09:17:17.763

我做了与@Carey Pico 相同的事情，它可以
**禁用扩展**。
今天打开雅虎新闻页面时，我第一次遇到了这个缺少右滚动条的问题。我禁用了所有扩展
`(access tools --> extensions)`
并将我的右滚动条恢复到它应该在的位置。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-12T19:52:36.047

我遇到了这种情况，我的“雅虎财经”页面失去了滚动条（重新安装 Chrome 后）。我只剩下一个正在运行的扩展程序（我信任的一个）。它是 AVG Secure Search（我使用了 AVG 防病毒软件）。我禁用它，下次打开雅虎财经时出现滚动条。有趣的是，我打开了丢失的旧滚动条页面。它不受影响。

因此，AVG Secure Search 扩展会干扰雅虎产品。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-03-28T02:04:46.607

我验证了我运行了哪些扩展程序，导致问题的一个是我的 Avira Safebrowsing 扩展程序 - 禁用了扩展程序并且一切正常。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-09-22T15:22:09.590

对我来说，问题的根源是 Ghostery 扩展。安装“Ghostery fixer”扩展滚动条后重新出现。

# iphone - 为什么资源包将 .png 复制为 .tiff 图像？

> ID：12560799
> 
> 赞同：19
> 
> 时间：2012-09-24T07:44:28.767
> 
> 标签：iphone, ios, ipad, uiimageview, resourcebundle

我创建了一个静态库和一个资源包，用于跨多个项目重用代码和资产。

在静态库中，我有一个管理器类，其唯一目的是创建 other `UIViewControllers`，其视图是从`.xib`文件创建的（使用通用`initWithNibName:bundle:`方法）。

当我在 Interface Builder 中创建视图时，图像正确显示。但是，当我在模拟器上运行应用程序时，出现此错误：

```
 Could not load the "<image_name.png>" image referenced from a nib in the 
    bundle with identifier "com.<my_company>.<app_identifer>" 
```

经过几个小时的打磨，我终于检查了资源包，发现 .png 文件不在其中！取而代之的是同名的**.tiff文件（不包括 @2x 版本）。**

所有图像都包含在包的构建阶段中，位于**复制包资源**下，并且我在其他 iOS 项目中使用了这些图像（因此它们没有损坏）。

有没有其他人经历过这个？假设图像将始终作为**.tiff**添加到包中是否安全？（如果是这样，将界面生成器中的图像名称更改为**.tiff**是否安全？）或者我在这里做错了什么？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-24T08:11:09.190

对于资源包的问题，​​请参阅此链接，因为它有几个类似的查询。

[转换资源包](https://stackoverflow.com/questions/12244494/image-resources-for-ios)

告诉我哪个答案真正帮助您解决了这个问题。谢谢。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-03-18T06:04:44.823

这解决了我的问题

> **在你的捆绑目标转到，**
> 
> 构建设置 > COMBINE_HIDPI_IMAGES 并设置为**NO**

# jquery-datatables - 什么决定了基于 Datatables 的数据表中的列数？

> ID：12560800
> 
> 赞同：1
> 
> 时间：2012-09-24T07:44:33.123
> 
> 标签：jquery-datatables

我是 DataTables 插件的新手，
它如何确定要显示的列数？
基于 HTML 表？还是基于数据源？
还是两者的某种组合？

我可以在 DataSource 中有未呈现为列的列吗？（但例如用作另一列的工具提示）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T14:39:45.037

> 它如何确定要显示的列数？

答案实际上取决于您如何配置表格（继续阅读以了解我的意思）。

> 基于 HTML 表？还是基于数据源？还是两者的某种组合？

如果您创建一个基于 DOM 的 HTML 表，其中已经包含所有数据，那么您可以从[零配置示例](http://datatables.net/release-datatables/examples/basic_init/zero_config.html)中看到它只会显示您提供的所有列。

> 我可以在 DataSource 中有未呈现为列的列吗？（但例如用作另一列的工具提示）？

您可以使用表配置的或设置中的`bVisible`参数进一步配置表以隐藏某些列。请参阅[此示例了解如何隐藏列](http://datatables.net/release-datatables/examples/basic_init/hidden_columns.html)。 `aoColumnDefs``aoColumns`

然后，您可以使用`mrender`以特定方式呈现列。

假设您的数据有两列，ID 和名称，并且您希望显示名称，但仅在用户将鼠标悬停在名称单元格上时将 ID 显示为工具提示。在您的`aoColumns`对象中，将`bVisible`ID 列设置为 false 并`mrender`为 Name 列设置如下：

```
"mrender": function(data, type, full) {
    return '<span title="' + full.ID + '">' + data + '</span>';
} 
```

请注意，如果您使用的数据源不是加载时嵌入 DOM 中的数据（例如 AJAX），您可能还需要`mdata`为每个`aoColumns`定义指定参数，[如本示例所示](http://datatables.net/release-datatables/examples/ajax/objects_subarrays.html)。

祝你好运！

# c# - C# 组合框数据排序

> ID：12560803
> 
> 赞同：0
> 
> 时间：2012-09-24T07:44:43.430
> 
> 标签：c#, sorting, combobox

我使用 DataTable 作为我的 ComboBox 的数据源，我需要将数据排序为严格的顺序。问题是我不需要升序或降序，这是客户将物品视为优先事项的方式，因此也没有任何逻辑。

我是否需要创建一个具有排序值的列，然后按该列对数据进行排序？我只是在寻找最好的方法来做到这一点。随着时间的推移，可能会添加更多项目，并且可能需要更改排序。这是我想要实现的目标，而无需每次都进行硬编码。

数据目前只有两列，如下所示：-

> 应用名称 | 申请类型

我只需要这样做的最佳方法。

谢谢

# email - 如何在 iOS 5 + 中以编程方式从地址簿编辑电子邮件和电话号码值

> ID：12560810
> 
> 赞同：1
> 
> 时间：2012-09-24T07:45:07.163
> 
> 标签：email, ios5, abaddressbook, phone-number

我想以编程方式从 iOS 5 + 的地址簿中发送电子邮件和电话号码值。我尝试了以下代码。它会更改名字和姓氏，但不会更改电子邮件和电话号码。这是我的代码

```
ABAddressBookRef addressBook=ABAddressBookCreate();
ABRecordRef record = ABAddressBookGetPersonWithRecordID(addressBook, [userInfo.userId intValue]);
NSNumber *recordId = [NSNumber numberWithInteger:ABRecordGetRecordID(record)];
NSLog(@"recordId:- %d",[recordId intValue]);

// First & Last name
ABRecordSetValue(record, kABPersonFirstNameProperty, (__bridge void*)userInfo.firstName , nil); 
ABRecordSetValue(record, kABPersonLastNameProperty, (__bridge void*)userInfo.lastName, nil);

//Phone number is a list , so create a multivalue    
ABMutableMultiValueRef phoneNumberMultiValue =
ABMultiValueCreateMutable(kABPersonPhoneProperty);
ABMultiValueAddValueAndLabel(phoneNumberMultiValue ,(__bridge void*)userInfo.phoneNumbers,(__bridge void*)userInfo.phoneNumberLabel, NULL);

// Email address is a list , so create a multivalue
ABMutableMultiValueRef emailMultiValue =
ABMultiValueCreateMutable(kABPersonEmailProperty);
ABMultiValueAddValueAndLabel(emailMultiValue ,(__bridge void*)userInfo.emailAddress,(__bridge void*)userInfo.emailAddressLabel, NULL);

// Save Address Book
BOOL isContactEdited = ABAddressBookSave(addressBook, nil);
CFRelease(addressBook);
return isContactEdited; 
```

在我上面的代码 phonenumberlabel 和 emailAddressLabel 是电话号码和电子邮件地址的标签值。例如“移动”或“家庭”等。

我找不到像用于名字和姓氏一样设置多值引用的方法。任何形式的帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T19:01:25.097

首先，当您从 PeoplePickerNavigationController 中选择联系人时：

```
- (BOOL)peoplePickerNavigationController: (ABPeoplePickerNavigationController *)peoplePicker shouldContinueAfterSelectingPerson:(ABRecordRef)person {    

    self.selectedPerson = ABRecordGetRecordID(person);

    (...)

} 
```

然后在我的 .h

```
@property (nonatomic) ABRecordID selectedPerson; 
```

// 将电子邮件添加到本地联系人

然后回到.m

```
ABAddressBookRef addressBook = ABAddressBookCreate();
CFErrorRef error = nil;
ABMutableMultiValueRef emailMultiValue = ABMultiValueCreateMutable(kABPersonEmailProperty);
bool didAddEmail = ABMultiValueAddValueAndLabel(emailMultiValue, (__bridge CFTypeRef)(email), kABOtherLabel, NULL);

if(didAddEmail){
    ABRecordSetValue(ABAddressBookGetPersonWithRecordID(addressBook, self.selectedPerson),
                     kABPersonEmailProperty,
                     emailMultiValue,
                     nil);
} else {
    NSLog(@"Error adding email: %@", error);
    error = nil;
} 
```

然后，您必须将地址簿保存在代码中的某个位置...

```
bool bSuccess = ABAddressBookSave(addressBook, &error);
if (!bSuccess) {
    NSLog(@"Could not save to address book: %@", error);
} 
```

# c# - 检测输入设备类型 .NET

> ID：12560815
> 
> 赞同：2
> 
> 时间：2012-09-24T07:45:15.410
> 
> 标签：c#

我正在用 .NET 4 编写 C# 应用程序。在应用程序中，我有 2 个文本框 - 一个用于用户输入，另一个用于来自 USB 扫描仪的输入。是否有某种方法可以检测输入来自哪个设备 - 来自键盘或扫描仪（扫描仪从条形码发送字符并最终输入）。有什么办法可以做到这一点。到目前为止，我试图在文本框`onKeyDown` `onKeyPress`触发器中捕捉它，但没有成功。我只得到字符。

我想我必须在反射中寻找某个地方，但自 3 天以来我什么也没找到。

谢谢，米哈伊尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T08:55:07.737

条形码扫描仪提供字符的速度通常比人类打字快得多，通常每 10 毫秒左右。一个不雅但有效的解决方案是覆盖，`OnKeyDown`或者`OnKeyPress`，如果最后一个事件发生在不久之前，则将其视为条形码扫描仪输入的字符序列。

# iphone - 在 iphone 中排列 NSDictionary 唯一值

> ID：12560818
> 
> 赞同：-1
> 
> 时间：2012-09-24T07:45:26.480
> 
> 标签：iphone, objective-c, nsarray, nsdictionary

嗨，我收到了这样的 Json 回复

```
{"items":[{"f":"djay","m":"hi ajay","d":"2012-9-22","id":"16"},{"f":"djay","m":"hi","d":"2012-9-22","id":"25"},{"f":"Chithri","m":"hi","d":"2012-9-23","id":"26"},{"f":"ChithriAtchibabu","m":"gig","d":"2012-9-23","id":"27"}]} 
```

我想像这样安排我的阵列

```
 [{"time":"2012-9-22","data":[{"m":"hiajay"},{"m":hi}]},{"time":"2012-9-23","data":[{"m":"hi"},{"m":gig}]}] 
```

谁能指导我如何安排我的阵列

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T08:01:11.307

NSDictionary 是一个未排序的集合。

对其中的数据进行排序是没有意义的。

您在帖子中所做的完全是从另一本词典中重建一系列词典。

此外，字典不能有重复的键。

为此，您必须遍历第一个字典中的数组“项目”，然后为每个新日期创建一个新字典，然后在其中放置一个包含项目的数组。或者其他的东西...

# java - 如何知道文件类型？

> ID：12560824
> 
> 赞同：1
> 
> 时间：2012-09-24T07:45:50.220
> 
> 标签：java, android, file, file-type

我想知道文件是**音频**（`mp3`、`aac`等）、视频（**、、、**等`mp4`）`wmv`、文档`3gp`（**、、、、、、、、**等`txt`）`rtf`还是未知（没有扩展名和其他特定于单个应用程序的自定义扩展名）不久的将来）`doc``docx``xls``xlsx``ppt``html`

我需要在 Android 中实现它。我想我可以找到文件的扩展名并识别它的类型？或者我不需要知道扩展名？

我只想知道文件类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T08:21:12.837

```
import java.net.FileNameMap;
import java.net.URLConnection;

public class FileUtils {

public static String getMimeType(String fileUrl)
  throws java.io.IOException {
      FileNameMap fileNameMap = URLConnection.getFileNameMap();
      String type = fileNameMap.getContentTypeFor(fileUrl);

     return type;
}

public static void main(String args[]) throws Exception {
      System.out.println(FileUtils.getMimeType("file://c:/temp/test.TXT"));
     // output :  text/plain
   }
} 
```

[http://www.rgagnon.com/javadetails/java-0487.html](http://www.rgagnon.com/javadetails/java-0487.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T07:51:11.287

在 Android 上，您可以尝试以下操作：

```
File f = <YOUR FILE>

String path = f.getAbsolutePath();
String fileExtension = null;
int dotPos = path.lastIndexOf('.');
if (0 <= dotPos) {
    fileExtension = path.substring(dotPos + 1);
}

if (!TextUtils.isEmpty(fileExtension )) {
    String mime = MimeTypeMap.getSingleton().getMimeTypeFromExtension(fileExtension.toLowerCase());
    if (!TextUtils.isEmpty(mime)) {
        if (mime.startsWith("text")) {
        // TEXT FILE
        } else if (mime.startsWith("image")) {
        // IMAGE FILE
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T07:51:13.070

您可以使用 尝试从文件扩展名中猜测文件类型[`guessContentTypeFromName()`](http://developer.android.com/reference/java/net/URLConnection.html#guessContentTypeFromName%28java.lang.String%29)，也可以使用 尝试从内容中猜测文件类型[`guessContentTypeFromStream()`](http://developer.android.com/reference/java/net/URLConnection.html#guessContentTypeFromStream%28java.io.InputStream%29)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T09:08:33.370

您可以使用[mime-util](http://sourceforge.net/projects/mime-util/)库。我的示例代码将获取文件的 mime 类型。

```
 String imagePath = "/tmp/test.txt";
    File file = new File(imagePath);

    if (MimeUtil.getMimeDetector(MagicMimeMimeDetector.class.getName()) == null)  {
        MimeUtil.registerMimeDetector(MagicMimeMimeDetector.class.getName());
    }
    Collection<MimeType> mimeTypes = MimeUtil.getMimeTypes(file);
    for (MimeType mimeType : mimeTypes) {
        System.out.println(mimeType.getMediaType());
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-13T05:23:18.047

找出文件扩展名的最短方法是使用`lastIndexOf('.')`假设文件名包含扩展名。检查以下代码

```
String fileName = "test.jpg";
int i = fileName.lastIndexOf('.');
String fileExtension = fileName.substring(i+1);
Log.v("FILE EXTENSION: ",fileExtension); 
```

# ios - iOS - 从另一个选项卡转到某个选项卡的第二个 uiviewcontroller

> ID：12560825
> 
> 赞同：1
> 
> 时间：2012-09-24T07:45:53.793
> 
> 标签：ios, uiviewcontroller, uinavigationcontroller, uitabbarcontroller, storyboard

我正在使用 Storyboard 开发 iOS 5 应用程序。

我有`UITabBarController`3 个标签。每个选项卡都有自己的`UINavigationController`. `UINavigationController`第一个选项卡的有一个`UITableViewController`与另一个选项卡相连的第二个选项卡只有一个`UIViewController`。`UINavigationController``UIViewController`

我想要实现的是在第二个选项卡中发生某些操作时导航到`UIViewController`（第一个选项卡中的第二个视图） 。`UINavigationController``UIViewController`

我尝试使用 push segue 来完成此操作，但导航堆栈与不同选项卡的视图控制器混合在一起（目标视图控制器中的后退按钮指向另一个选项卡的视图控制器）。

所以我想知道在不同选项卡的视图控制器之间完成这种转换的“正确方法”是什么。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T08:15:21.530

您不能使用通知，因为第一个选项卡的第一个 viewController 甚至可能没有加载。

所以你可以做到的一种方法是保存首选项（也许是nsuserdefaults），然后将选项卡切换到第一个选项卡，并在第一个选项卡的第一个viewController中检查viewDidAppear或viewWillAppear中的此首选项，如果已设置则重置首选项（下次）并自动导航（推送）到第二个 viewController。

```
BOOL shouldAutoPush=YES;
[[NSUserDefaults standardUserDefaults] shouldAutoPush forKey:@"shouldAutoPush"];
[[NSUserDefaults standardUserDefaults] synchronize]; 
[self.tabBarController setSelectedIndex:0];

-(void)viewWillAppear:(BOOL)animated {
     if ( [[NSUserDefaults standardUserDefaults] objectForKey:@"shouldAutoPush"] ) {
        BOOL shouldAutoPush=NO;
        [[NSUserDefaults standardUserDefaults] shouldAutoPush forKey:@"shouldAutoPush"];
        [[NSUserDefaults standardUserDefaults] synchronize]; 
        [self.navigationController pushViewController:secondViewController animated:YES];                
     }
} 
```

# jquery - $.ajax jquery 没有显示成功函数数据函数中可能有什么问题

> ID：12560827
> 
> 赞同：0
> 
> 时间：2012-09-24T07:46:03.960
> 
> 标签：jquery, handler

我正在使用如下所示的 jquery，它将转到 ?Handler 正确执行代码并返回格式为（例如：[{"res":1}]）的 json，所以我想检查我是否成功检索到任何内容功能所以最初只是发出警报，但警报本身没有显示，所以可能出了什么问题？你能帮忙提前谢谢你吗....

```
 <script type="text/javascript">

function DoneClick() {
    alert("OO");
    var checkLocation = "";
    var txtMM = document.getElementById("hdn_Tagging").value; ///Id s of textbox assigned in code behind MB--
    txtMM = txtMM.slice(0, - 1);
    var arrTxtMM = txtMM.split(",");

    for (var j = 0; j < arrTxtMM.length; j++) {
        var Loc = document.getElementById(arrTxtMM[j]).value;
        if (Loc == "") {
            checkLocation = "";
            break;
        } else {
           checkLocation += Loc + ":";
        }
    }
    if (checkLocation != "")
    {
        var url = 'Handler/newExifDetails.ashx?Id=' + txtMM + '&Location=' + checkLocation + '';
        alert(url);
        alert("yes");
         $(document).ready(function() {
            var url = 'http://localhost:4880/Handler/newExifDetails.ashx?Id=' + txtMM + '&Location=' + checkLocation + '';
                                $.ajax({
                                url : url,
                                type: "POST",
                                dataType: "json",
                                success: function(data) {
                                alert(data);
                                alert("yeah");
                                },
                                error: function(data) { alert("error"); }
                               });
                                }); 
          });

    }
     else
     {
        alert("Please pick the locations for all objects");
    }
}
                    </script> 
```

这里的问题是，处理程序页面被调用，就好像我将断点放在处理程序页面中它正确地运行和执行......并且 response.write 在那里我得到了 json 字符串：例如：[{“res” :1}] 现在成功了：在 $.ajax 中，如果我写了一个警报，它没有显示出什么可能是错的？？？

处理程序代码如下：

```
using System;
using System.Collections;
using System.Data;
using System.Linq;
using System.Web;
using System.Web.Services;
using System.Web.Services.Protocols;
using System.Xml.Linq;
using System.Web.Script.Serialization;
using System.Collections.ObjectModel;
using ClassLib_BLL;
using System.IO;
using System.Web.UI;
using System.Net;
using System.Collections.Generic;

namespace QlixooWeb.handler
{
    /// <summary>
    /// Summary description for $codebehindclassname$
    /// </summary>
    [WebService(Namespace = "http://tempuri.org/")]
    [WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]

    public class UserUploadsDTO
    {
        private int _res;
        public int res { get { return _res; } set { _res = value; } }
    }

    public class newExifDetails : IHttpHandler
    {
        public static readonly UserUploadsBLL oUserUploadsBll = new UserUploadsBLL();
        string[] splitQueryStr, arId, arLocation;
        public string Id1, Location1;

        public void ProcessRequest(HttpContext context)
        {
            //context.Response.ContentType = "text/plain";
            //context.Response.Write("Hello World");
            Collection<UserUploadsDTO> collection = new Collection<UserUploadsDTO>();
            UserUploadsDTO dto;
            string RId = context.Request.QueryString["Id"].ToString();
            string RLocation = context.Request.QueryString["Location"].ToString();
            //string json = new StreamReader(context.Request.InputStream).ReadToEnd();//Location = Bangalore%2C+Karnataka%2C+India%3AChittur%2C+Kerala%2C+India %3A  &  Id=4%2C94
            //splitQueryStr = json.Split('&');
            //Location1 = splitQueryStr[0];
            //Id1 = splitQueryStr[1];
            //string Location = RLocation.Substring(Location1.IndexOf('=', 0) + 1);
            string Location = RLocation;
            //Location = Location.Replace("%2C+", ",");
            //Location = Location.Replace("%3A", ":");
            //Location = Location.Replace("+", " ");
            Location = Location.TrimEnd(':');
            arLocation = Location.Split(':');
            string Id = RId;
            //string Id = RId.Substring(Id1.IndexOf('=', 0) + 1);
            //Id = Id.Replace("%2C", ",");
            arId = Id.Split(',');
            int res = 0;
            for (int i = 0; i < arId.Length; i++)
            {
                int UpId = Convert.ToInt32(arId[i]);
                Coordinate coordinate = Geocode.GetCoordinates(arLocation[i]);
                decimal latitude = coordinate.Latitude;
                decimal longitude = coordinate.Longitude;
                res = oUserUploadsBll.TaggingImages(latitude, longitude, UpId);
            }
            if (res > 0)
            {
                dto = new UserUploadsDTO();
                dto.res = res;
                collection.Add(dto);
            }
                //context.Response.Redirect("~/UserUploads.aspx");
                //context.Response.Write(res);
            else
                context.Response.Write("false");
            JavaScriptSerializer serializer = new JavaScriptSerializer();
            string jsonString = serializer.Serialize(collection);
            context.Response.Write(jsonString);

        }
        public interface ISpatialCoordinate
        {
            decimal Latitude { get; set; }
            decimal Longitude { get; set; }
        }
        /// <summary>
        /// Coordiate structure. Holds Latitude and Longitude.
        /// </summary>
        public struct Coordinate : ISpatialCoordinate
        {
            private decimal _latitude;
            private decimal _longitude;
            public Coordinate(decimal latitude, decimal longitude)
            {
                _latitude = latitude;
                _longitude = longitude;
            }
            #region ISpatialCoordinate Members
            public decimal Latitude
            {
                get { return _latitude; }
                set { this._latitude = value; }
            }
            public decimal Longitude
            {
                get { return _longitude; }
                set { this._longitude = value; }
            }
            #endregion
        }
        public class Geocode
        {
            private const string _googleUri = "http://maps.google.com/maps/geo?q=";
            private const string _googleKey = "AIzaSyB4UgLW37a1jhxnnz5J27KPNaHIDmapSYk";
            private const string _outputType = "csv"; // Available options: csv, xml, kml, json
            private static Uri GetGeocodeUri(string address)
            {
                address = HttpUtility.UrlEncode(address);
                return new Uri(String.Format("{0}{1}&output={2}&key={3}", _googleUri, address, _outputType, _googleKey));
            }
            public static Coordinate GetCoordinates(string address)
            {
                WebClient client = new WebClient();
                Uri uri = GetGeocodeUri(address);
                /* The first number is the status code, 
                * the second is the accuracy, 
                * the third is the latitude, 
                * the fourth one is the longitude.
                */
                string[] geocodeInfo = client.DownloadString(uri).Split(',');
                return new Coordinate(Convert.ToDecimal(geocodeInfo[2]), Convert.ToDecimal(geocodeInfo[3]));
            }
        }

        public bool IsReusable
        {
            get
            {
                return false;
            }
        }
    }
} 
```

同样在 aspx 页面中，我使用了 2 个脚本标签：

```
<script src="https://maps.googleapis.com/maps/api/js?sensor=false&libraries=places"></script>

<script src="js/jquery-latest.js" type="text/javascript"></script> 
```

这在 aspx 页面的 head 标记中使用......我从这里调用处理程序..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T07:56:10.403

您还可以尝试以下方法：

```
$.post("http://localhost:4880/Handler/newExifDetails.ashx", { "Id": txtMm },
   function(data){
      alert('test');
   }
   ,"json"
); 
```

[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

这是写你现在写的东西的另一种方式。如果这不起作用，您可以尝试 FireBug 并查看 FireBug 所说的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T07:56:52.043

尝试更改`type:'GET'`

因为您将其设置为 POST 它会期望数据中的参数而不是查询字符串

```
var url = 'http://localhost:4880/Handler/newExifDetails.ashx;

     $.ajax({
         url: url,
         type: "POST",
         data : {'Id' : txtMM , 'Location' : checkLocation}, 
```

或者

```
var url = 'http://localhost:4880/Handler/newExifDetails.ashx?Id=' + txtMM + '&Location=' + checkLocation + '';

 $.ajax({
     url: url,
     type: "GET", 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T07:58:50.363

在您发布的代码中没有任何问题。我用小提琴试了一下，它工作正常，在这里看到它：http: [//jsfiddle.net/zk8Nk/](http://jsfiddle.net/zk8Nk/)

您可能在页面中有一些其他脚本妨碍您，但如果不查看整个页面，我将无法帮助您。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-08T12:27:30.427

问题可能是 jQuery ajax 调用无法处理字符串中的“%2c”。

# c# - 以当前用户身份启动 IE 进程以这种方式工作，但不能以其他方式工作

> ID：12560830
> 
> 赞同：1
> 
> 时间：2012-09-24T07:46:21.737
> 
> 标签：c#, internet-explorer

我想打开 IE（它打开的网站无关紧要），但我发现使用以下代码：

```
 System.Diagnostics.Process proc = new System.Diagnostics.Process();
        proc.EnableRaisingEvents = false;
        proc.StartInfo.FileName = "http://www.google.com";
        proc.Start(); 
```

将以当前用户身份启动浏览器，但使用以下代码：

```
 ProcessStartInfo startInfo = new ProcessStartInfo();

        startInfo.FileName = "C:\\Program Files\\Internet Explorer\\iexplore.exe";
        Process process = new Process();

        process.StartInfo = startInfo;

        process.Start(); 
```

不会的，这是为什么呢？是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T07:50:39.643

将代码包装在 try catch 中并查看引发的异常，这应该有助于找出它为什么不起作用。

# ios - 滚动 UIScrollView 中对象的可见坐标后

> ID：12560832
> 
> 赞同：0
> 
> 时间：2012-09-24T07:46:35.030
> 
> 标签：ios, ipad, uiview, uiscrollview, uibutton

我有一个包含 12 个按钮的 UIScrollView。一次只能看到 5 个按钮，其余按钮均不可见。当用户单击按钮时，我正在从按钮的位置为 UIView 设置动画。因此，当我滚动隐藏按钮并单击视图动画时，动画从其原始坐标的底部开始，而不是从按钮的可见坐标开始。

当用户滚动时，我想知道按钮的可见坐标（包含在 uiscrollview 中），以便我可以从按钮可见位置进行动画处理。或者任何人都可以建议哪个是实现这个动画的最佳方式。

注意：我的 Scrollview 是 viewcontroller 的一部分。我无法将滚动视图自定义为父类。请帮助我尽快解决它，因为我在应用程序开发结束时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T06:53:14.803

我刚刚使用 Scrollview `convertPoint:toView`API 解决了它。这是解决方案：

`CGPoint aPtInScrollView = [viewA convertPoint:aPoint toView:self.view];`

*   `aPoint`scrollview '位置中的对象在哪里

# python - python中的编码

> ID：12560840
> 
> 赞同：1
> 
> 时间：2012-09-24T07:47:16.277
> 
> 标签：python

我在将文件中的字符串与我在程序中输入的字符串进行比较时遇到问题，我应该知道它们是相等的，但是无论我是否使用 decode('utf-8') 我都会发现它们不相等。这是代码：

```
final = open("info", 'r')
exported = open("final",'w')
lines = final.readlines()
for line in lines:
    if line == "Wykształcenie i praca": #error
    print "ok" 
```

以及我如何保存我尝试读取的文件：

```
comm_p = bs4.BeautifulSoup(comm)
comm_f.write(comm_p.prettify().encode('utf-8'))

for string in comm_p.strings:
      #print repr(string).encode('utf-8')
      save = string.encode('utf-8') #  there is how i save
      info.write(save)
      info.write("\n")        

info.close() 
```

在文件的顶部我有 # - *- coding: utf-8 -* -

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T07:57:15.093

这应该做你需要的：

```
# -- coding: utf-8 --
import io

with io.open('info', encoding='utf-8') as final:
    lines = final.readlines()

for line in lines:
    if line.strip() == u"Wykształcenie i praca": #error
        print "ok" 
```

您需要使用正确的编码打开文件，并且由于您的字符串不是 ascii，因此您应该将其标记为 unicode。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T07:50:50.010

可能差异在于“\ n”字符

[readlines](http://docs.python.org/tutorial/inputoutput.html#methods-of-file-objects)不会剥离 '\n' - 请参阅[在 Python 中读取换行符分隔文件并丢弃换行符的最佳方法？](https://stackoverflow.com/questions/544921/best-method-for-reading-newline-delimited-files-in-python-and-discarding-the-new)

一般来说，将 Unicode 字符串放入代码中不是一个好主意，最好从资源文件中读取它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T07:54:50.120

首先，您需要一些有关编码的基本知识。[这是一个很好的起点](http://kunststube.net/encoding/)。您不必立即阅读所有内容，但请尽可能多地阅读。

关于您当前的问题：

您正在读取 UTF-8 编码文件（可能），但您正在将其作为 ASCII 文件读取。`open()`不会为您进行任何转换。

所以你需要做的（至少）：

*   用于`codecs.open("info", "r", encoding="utf-8")`读取文件
*   使用 Unicode 字符串进行比较：`if line.rstrip() == u"Wykształcenie i praca":`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T07:59:05.747

使用 unicode 进行字符串比较

```
>>> s = u'Wykształcenie i praca'
>>> s == u'Wykształcenie i praca'
True
>>> 
```

说到字符串 unicode 是最聪明的举动:)

# c# - 无法通过 Windows 7 服务发送电子邮件

> ID：12560843
> 
> 赞同：1
> 
> 时间：2012-09-24T07:47:32.913
> 
> 标签：c#, windows-7

为什么通过windows 7服务发送电子邮件，我必须去服务的属性>登录。然后从“本地系统帐户”更改为“此帐户”（当然使用正确的凭据）。在我的 windows 2008 R2 中（与我的 windows 7 在同一个网络中），一切都很好。

我确定问题出在凭据中，但两个平台都实现了同一行：

```
SmtpClient smtp = new SmtpClient();    
smtp.UseDefaultCredentials = true;   
smtp.Timeout = 5000;  
smtp.DeliveryMethod = SmtpDeliveryMethod.Network; 
```

# sql - Sql Query 按天检查可用性和最大人数

> ID：12560847
> 
> 赞同：0
> 
> 时间：2012-09-24T07:47:49.040
> 
> 标签：sql, sql-server, tsql

您好，这是我的数据库中的 2 个表： ![在此处输入图像描述](../Images/8763efa320f06ba2d61d0099bab789a4.png)

我试图让酒店在一段时间内可用。在 Rooms 表中定义了房间的类型：例如 Signe:max_guests=1, Triple : max_guests=3 所以对于 10 人预订，我需要类似的东西：

```
SELECT  SUM(rooms.max_guests * av.RoomAvailable) AS maxPeople 
FROM av AS av INNER JOIN rooms 
ON av.room = rooms.ID AND av.DateofDays BETWEEN '09/28/2012' AND '10/03/2012' 
GROUP BY av.userid
HAVING Count(*) >= 6 
```

但这并不真正符合我的要求..它返回给我可用的 max_people/userID 我只需要检查每个 userID(hotel) 每天是否有 >= 10 (max_people) 可用

谢谢你的帮助

更新：如果我使用这个查询：

```
SELECT  av.userid, av.DateofDays, SUM(rooms.max_guests * 

av.RoomAvailable) AS maxPeople 
FROM av AS av INNER JOIN rooms 
ON av.room = rooms.ID AND av.DateofDays BETWEEN '09/28/2012' 

AND '10/03/2012' 
GROUP BY av.userid, av.DateofDays
ORDER BY av.userid, av.DateofDays 
```

我明白了： ![在此处输入图像描述](../Images/6203909376fffea50b5fe8e8d4474b5b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T08:18:19.280

您必须手动输入天数。

```
WITH cte AS (
SELECT  av.userid, av.DateofDays, SUM(rooms.max_guests * av.RoomAvailable) AS maxPeople 
FROM av AS av INNER JOIN rooms 
ON av.room = rooms.ID AND av.DateofDays BETWEEN '09/28/2012' AND '10/03/2012' 
GROUP BY av.userid, av.DateofDays
HAVING SUM(rooms.max_guests * av.RoomAvailable) >= 10 
)
select cte.userid 
from cte 
group by av.userid 
having COUNT(*) = 6 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T07:53:48.233

只需将 dateofdays 添加到您的 SELECT 和 GROUP BY。这将只返回天数/酒店 >=10

# android - 在 ListFragment 中过滤后 ListView 未更新

> ID：12560852
> 
> 赞同：0
> 
> 时间：2012-09-24T07:48:24.483
> 
> 标签：android, listview, filter, filtering

我有一个列表视图和一个用于过滤的编辑文本。我能够在 String[] subItems 中过滤和保存结果，但列表视图没有更新。我在谷歌上搜索，但我没有找到解决方案。

这是代码片段。

OnActivityCreated

```
 public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);

    setRetainInstance(true);
    setHasOptionsMenu(true);

    lv = getListView();  
    lv.setTextFilterEnabled(true);
    lv.setCacheColorHint(Color.TRANSPARENT);
    lv.setFastScrollEnabled(true);

    lv.setDivider(getResources().getDrawable(android.R.color.black));
    lv.setDividerHeight(1);
//lv.setBackgroundColor(Color.parseColor("#f7f9c3")); //#ffddb0
    lv.setBackgroundDrawable(getResources().getDrawable(R.drawable.merge));
    lv.setScrollingCacheEnabled(false);
    lv.setSmoothScrollbarEnabled(false);    

   adapter  = new IconicAdapter();

    setListAdapter(adapter);

  } 
```

OnCreateView

```
 @Override
  public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)
  {
      View view = inflater.inflate(R.layout.toc, null);

      filterText = (EditText) view.findViewById(R.id.editTextFilter);
      filterText.addTextChangedListener(filterTextWatcher);
      return view;
  } 
```

FilterTextWatcher

```
private TextWatcher filterTextWatcher = new TextWatcher() {

    public void afterTextChanged(Editable s) {

    }

    public void beforeTextChanged(CharSequence s, int start, int count,
            int after) {
    }

    public void onTextChanged(CharSequence s, int start, int before,
            int count) {
        adapter.getFilter().filter(s);
        adapter.notifyDataSetChanged();
    }

}; 
```

自定义 ListView 类

```
 public class IconicAdapter extends ArrayAdapter {

  public String[] allItems;
  public String[] subItems;
  //public ArrayList <String> allItems = new ArrayList<String>();
  //public ArrayList <String> subItems = new ArrayList<String>();

  private TOCFilter filter;  

TextView tx = null;

IconicAdapter() {
super(getActivity(), R.layout.toc_list, Constants.TOC);

this.subItems = new String[Constants.TOC.size()];
this.subItems = Constants.TOC.toArray(this.subItems);
    this.allItems = this.subItems;
}

@Override
public Filter getFilter() {
    if (filter == null){
      filter  = new TOCFilter();
    }
    return filter;
  }

@Override
public int getCount() {
//return Constants.TOC.size();
    return subItems.length;
    } 

@Override
 public String getItem(int position) {
     return subItems[position];
 }

public View getView(int position, View convertView,ViewGroup parent) {
        //LayoutInflater inflater= getLayoutInflater();
    View row = getActivity().getLayoutInflater().inflate(R.layout.toc_list, parent, false);
    //View row=inflater.inflate(R.layout.toc_list, parent, false);
        try
        {
            tx=(TextView)row.findViewById(R.id.mainList);

            tx.setText(Constants.TOC.get(position).toString());
            tx.setTextSize(Constants.txtSize);
            tx.setTextColor(Color.BLACK);
        if(Constants.UKDebug)
        {
            if(position == 0 || position == 1)
            {
               Log.d("iconicadapter", Constants.TOC.get(position) + "");    
            }
        }

            }
            catch (Exception e) {Log.d("main","iconadapter"); e.printStackTrace();}
        return(row);

    } 
```

过滤器类，它是客户列表视图适配器的一部分

```
private class TOCFilter extends Filter{

    @Override
    protected FilterResults performFiltering(CharSequence constraint) {
         FilterResults results = new FilterResults();
         ArrayList<String> i = new ArrayList<String>();
         String[] contents;

          if (constraint!= null && constraint.toString().length() > 0) {

              for (int index = 0; index < allItems.length; index++) {
                  String si = allItems[index];
                  if(si.toLowerCase().startsWith(constraint.toString())){
                    i.add(si);  
                  }
              }
              contents = new String[i.size()];
              i.toArray(contents);
              results.values = contents;
              results.count = contents.length;                   
          }
          else{
              synchronized (allItems){
                  results.values = allItems;
                  results.count = allItems.length;
              }
          }
          return results;
    }

    @Override
    protected void publishResults(CharSequence constraint,
            FilterResults results) {
        // TODO Auto-generated method stub
        subItems =  (String[]) results.values;
        notifyDataSetChanged();
    }
} 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T18:05:08.913

我按照以下教程解决了这个问题。

[http://justcallmebrian.com/?p=149](http://justcallmebrian.com/?p=149)

# r - 在 ggplot2 中使用 coord_flip() 和 facet_wrap(scales = "free_y") 似乎会给出意想不到的刻面轴刻度线和刻度线标签

> ID：12560858
> 
> 赞同：12
> 
> 时间：2012-09-24T07:48:49.927
> 
> 标签：r, ggplot2

我正在尝试创建一个带有翻转坐标的多面图，其中一个且只有一个轴允许为每个方面变化：

```
require(ggplot2)
p <- qplot(displ, hwy, data = mpg)
p + facet_wrap(~ cyl, scales = "free_y") + coord_flip() 
```

![在此处输入图像描述](../Images/f2b80339d6d03ca997502fa7f36f60b3.png)

这个图对我来说并不满意，因为每个图都重复了错误的刻度线和刻度线标签。我想要每个水平轴上的刻度线而不是每个垂直轴上的刻度线。

这是出乎意料的行为，因为该图暗示顶部面板的水平轴刻度线与底部面板的水平轴刻度线相同，但事实并非如此。要查看此运行：

```
p <- qplot(displ, hwy, data = mpg)
p + facet_wrap(~ cyl, scales = "fixed") + coord_flip() 
```

所以我的问题是：有没有办法删除右侧刻面的垂直轴刻度线并将水平轴刻度线和标签添加到顶部刻面？

正如 Paul 在下面有见地指出的那样，我给出的示例可以通过在 qplot() 中交换 x 和 y 并避免 coord_flip() 来解决，但是这不适用于所有几何图形，例如，如果我想要一个免费的水平刻面条形图我可以运行的水平轴：

```
c <- ggplot(diamonds, aes(clarity, fill=cut)) + geom_bar()
c + facet_wrap(~cut, scales = "free_y") + coord_flip() 
```

![图片](../Images/90dddd35a8c03944b09e1f3b601aa1cd.png)

这些构面具有可变的水平轴，但重复的垂直轴刻度线而不是重复的水平轴刻度线。我认为 Paul 的技巧在这里不会奏效，因为与散点图不同，条形图不是旋转对称的。

我很想听到任何部分或完整的解决方案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-24T07:53:08.950

`coord_flip`结合使用是`facet_wrap`问题所在。首先，您将某个轴定义为自由轴（`x`轴），然后交换轴，使`y`轴自由。现在这在 ggplot2 中没有很好地再现。

在您的第一个示例中，我建议不要使用`coord_flip`，而只是在您的调用中交换变量`qplot`，并使用`free_x`：

```
p <- qplot(hwy, displ, data = mpg)
p + facet_wrap(~ cyl, scales = "free_x") 
```

![在此处输入图像描述](../Images/d2bb059f2eeef4188216591cd9db6ddd.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-07-10T21:19:35.770

这是我自己第二次或第三次遇到这个问题。我发现我可以通过定义自定义几何来破解自己的解决方案。

```
geom_bar_horz <- function (mapping = NULL, data = NULL, stat = "bin", position = "stack", ...) {
  GeomBar_horz$new(mapping = mapping, data = data, stat = stat, position = position, ...)
}

GeomBar_horz <- proto(ggplot2:::Geom, {
  objname <- "bar_horz"

  default_stat <- function(.) StatBin
  default_pos <- function(.) PositionStack
  default_aes <- function(.) aes(colour=NA, fill="grey20", size=0.5, linetype=1, weight = 1, alpha = NA)

  required_aes <- c("y")

  reparameterise <- function(., df, params) {
    df$width <- df$width %||%
      params$width %||% (resolution(df$x, FALSE) * 0.9)
    OUT <- transform(df,
              xmin = pmin(x, 0), xmax = pmax(x, 0),
              ymin = y - .45, ymax = y + .45, width = NULL
    )
    return(OUT)
  }

  draw_groups <- function(., data, scales, coordinates, ...) {
    GeomRect$draw_groups(data, scales, coordinates, ...)
  }
  guide_geom <- function(.) "polygon"
}) 
```

这只是从 ggplot2 github 复制 geom_bar 代码，然后切换**x**和**y**引用以在标准笛卡尔坐标系中制作水平条形图。

请注意，您**必须**使用`position='identity'`并且可能还`stat='identity'`为此工作。如果您需要使用身份以外的位置，则必须编辑[碰撞功能](https://github.com/hadley/ggplot2/blob/master/R/position-collide.r)才能使其正常工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-10-23T01:39:14.457

我一直在尝试做一个水平条形图，并在我想要的地方遇到了这个问题`scales = "free_x"`。最后，创建常规（垂直）条形图似乎更容易，旋转文本，这样如果你把头向左倾斜，它看起来就像你想要的图。然后，一旦你的情节完成，旋转 PDF/图像输出（！）

```
ggplot(data, aes(x, y)) +
  geom_bar(stat = "identity") +
  facet_grid(var ~ group, scale = "free", space = "free_x", switch = "both") +
  theme(axis.text.y  = element_text(angle=90), axis.text.x = element_text(angle = 90),
                     strip.text.x = element_text(angle = 180)) 
```

执行此操作的主要键是 to `switch = "both"`，它将分面标签移动到另一个轴，以及`element_text(angle=90)`旋转轴标签和文本。

# image - Windows 8 Metro - 显示 PDF 图像的最佳方式

> ID：12560861
> 
> 赞同：1
> 
> 时间：2012-09-24T07:49:11.297
> 
> 标签：image, xaml, pdf, windows-8, microsoft-metro

我有几个包含地图的 PDF 文档。其中哪一个是最好的选择，我该如何实现它：

1.  启动 PDF 文件以显示地图。我认为这不是最佳做法，但我认为您可能需要安装 Adob​​e Reader（对此不确定）。
2.  将图像转换为图像并在 ScrollViewer 中显示。但是，我无法将其转换为分辨率足够高的图像。如果我这样做，我应该使用什么分辨率？
3.  我知道可以将 PDF 转换为 XAML。然后我可以直接在 ScrollViewer 中显示 XAML。但是，此过程缓慢且费力，并且生成的 XAML 将非常庞大。不知道表演会是什么样子。
4.  第四个选项是将地图转换为 XPS 格式，然后尝试启动文档。我不确定这是否可行以及 XPS 是否得到普遍支持。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T08:25:32.883

1.  是的，客户端需要安装一些 PDF 阅读器并默认设置为在这种情况下打开 .pdf 文件。如果你想这样做，只需使用**Process.Start(pdfFilePath)**。如果用户没有与 pdf 关联的应用程序，这将引发异常。如果您想显示“打开方式”对话框，请[使用 ProcessStartInfo.ErrorDialog](http://www.vbforums.com/showthread.php?560003-2008-Show-Windows-quot-Open-With-quot-dialog-when-no-file-association-found&p=3460455&viewfull=1#post3460455)。

2.  ~~这可能是最好的选择。您需要将 PDF 渲染成具有良好分辨率的图像。所以你需要一个PDF库。我猜您使用的是 C#，因此您可以使用 PdfSharp 或 ITextSharp，但请注意，如果您在商业应用程序中使用 ITextSharp，则需要付费。我不知道您对分辨率的要求，但您可以尝试[获取用户的屏幕分辨率](https://stackoverflow.com/questions/5082610/get-and-set-screen-resolution)并做出决定。~~
    您需要 pdf 光栅化，检查[http://code.google.com/p/lib-pdf](http://code.google.com/p/lib-pdf)或[http://stefanochizzolini.it/en/projects/clown](http://stefanochizzolini.it/en/projects/clown)

3.  据我所知，在自动模式下这样做是不可能的。PDF 是一种非常复杂的格式，它允许非常疯狂的格式，这很难用其他任何东西来重现。[有一些方法](https://stackoverflow.com/questions/3551180/processing-illustrator-or-pdf-files-into-xaml)可以从 pdf 生成 xaml，但是在转换后它们需要人工来修复 xaml 问题，所以我想这不是你想要渲染地图的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T07:57:29.433

经过进一步调查。最好的选择是将您的 PDF 转换为 XPS 格式。然后启动这些文件。每个 Windows 8 安装都内置了一个 XPS 查看器。这样做的主要优点是它将支持任何屏幕分辨率并且非常容易实现。

# java - 内部/匿名类的最佳实践

> ID：12560862
> 
> 赞同：6
> 
> 时间：2012-09-24T07:49:17.813
> 
> 标签：java, inner-classes, anonymous-class

匿名类和静态内部类的最佳实践（设计和性能方面）是什么？

就我个人而言，我想认为静态内部类提供更好的封装，并且应该提供更好的性能，因为它们无法访问其类之外的最终变量。但我从来没有真正质疑过这一点。

我找到了一篇关于这个的帖子，但我觉得它实际上并没有回答这个问题，只是人们个人的想法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T08:12:02.020

内部类（静态或非静态）对其封闭类的字段和方法具有与匿名类完全相同的访问权限，静态内部类（实际上称为嵌套类）和（常规、非静态）内部类之间的区别在于静态需要明确引用封闭类的实例才能访问某些内容。当然，当您需要这样做时，通常是在创建内部类的封闭类的实例上，因此使用非静态内部类更加容易和清晰。

例子：

*   内部类（非静态）

    ```
    class A {
        private int field;

        private class B {
            public void doSomething() {
                field++; // Valid
            }
        }
    } 
    ```

*   嵌套类（即“静态内部类”）

    ```
    class A {
        private int field;

        private static class B {
            public void doSomething(A a) {
                a.field++; // Valid
            }
        }
    } 
    ```

*   匿名类

    ```
    class A {
        private int field;

        public void doSomething() {
            new Runnable() {
                @Override
                public void run() {
                    field++; // Valid
                }
            }
        }
    } 
    ```

您是否使用该可访问性是另一个问题。如果您确实访问封闭类的私有字段，则会生成一个访问器，因此它*可能会*影响性能，因为调用方法的成本与访问字段的成本不同，但在大多数情况下它可能可以忽略不计. 在进行不基于任何测量的微优化之前，您应该始终首先编写正确的代码（在设计和功能方面）。JIT 编译器无论如何都会为您做很多事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T07:59:29.653

查看 Java 源代码 Collections 和 Pattern 以获得示例（它们位于 JDK 目录中的 src.zip 中。在 Eclipse 中，您可以通过内联帮助阅读代码

读一本[Effective Java](http://www.amazon.co.uk/Effective-Java-Second-Joshua-Bloch/dp/0321356683)的书，寻找 *内部类*以了解其工作原理`static`，`inner`以及其他有用`interface`的`enum`类和其他类

# c# - 使用默认构造函数初始化类型 C#

> ID：12560863
> 
> 赞同：3
> 
> 时间：2012-09-24T07:49:18.817
> 
> 标签：c#

> **可能重复：**
> [最佳实践：在构造函数或声明中初始化类字段？](https://stackoverflow.com/questions/24551/best-practice-initialize-class-fields-in-constructor-or-at-declaration)

请问你这样做有什么优势吗

```
public class MyClass
{
  List<string> list;
  public MyClass
  {
     list = new List<string>();
  }
} 
```

在做这个

```
public class MyClass
{
  List<string> list = new List<string>();
  public MyClass
  {

  }
} 
```

我想都是一样的。因此构造函数比这些简单的情况更重要

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T07:53:53.930

在第一个示例中，您选择的正是初始化列表的时间。如果构造函数中有其他代码，您负责将初始化定位在正确的位置。

此外，如果该类具有基类，则将在初始化列表之前调用基类构造函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T07:54:11.970

首先所有初始化程序按从派生到基的顺序运行，然后所有构造函数按从基到派生的顺序运行。

阅读Eric Lippert 的[这篇](http://blogs.msdn.com/b/ericlippert/archive/2008/02/18/why-do-initializers-run-in-the-opposite-order-as-constructors-part-one.aspx)文章。

# css - CSS nth-child 应用奇偶规则，但每 4 项切换一次

> ID：12560864
> 
> 赞同：3
> 
> 时间：2012-09-24T07:49:20.543
> 
> 标签：css, css-selectors

我有一个`divs`连续出现 4 个类的列表，我想创建一个棋盘背景样式，意思是：

*   为奇数和偶数应用不同的背景颜色`divs`
*   将每行的奇偶切换为奇偶

我试过这个

```
.boxwrapper:nth-child(2n-1), .boxwrapper:nth-child(2n) {
    background:#ff0000;
}
.boxwrapper:nth-child(4n-2), .boxwrapper:nth-child(4n-3) {
    background:#0000ff;
} 
```

它适用于奇偶 div，但不能让它每 4 个项目切换一次。我对 4n-1、4n+1 的东西感到头疼，如果我能做到这一点，瞧！

结果应如下所示：

![在此处输入图像描述](../Images/4f33353105294185674a178fcf4c718f.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T07:54:39.920

### 演示

[http://jsfiddle.net/mykhA/1/](http://jsfiddle.net/mykhA/1/)

### HTML

```
<div class="container">
    <div class="box"></div><div class="box"></div><div class="box"></div><div class="box"></div>
    <div class="box"></div><div class="box"></div><div class="box"></div><div class="box"></div>
    <div class="box"></div><div class="box"></div><div class="box"></div><div class="box"></div>
    <div class="box"></div><div class="box"></div><div class="box"></div><div class="box"></div>
</div>​ 
```

### CSS

```
.container {
    width: 100px;
    height: 100px;
}

.line {
    width: 100px;
    height: 25px;
}

.box {
    width: 25px;
    height: 25px;
    float: left;
}

.box:nth-child(8n+2) {
    background-color: red;
}

.box:nth-child(8n+4) {
    background-color: red;
}
.box:nth-child(8n+5) {
    background-color: red;
}

.box:nth-child(8n+7) {
    background-color: red;
}

.box:nth-child(8n+1) {
    background-color: blue;
}

.box:nth-child(8n+3) {
    background-color: blue;
}

.box:nth-child(8n+6) {
    background-color: blue;
}

.box:nth-child(8n) {
    background-color: blue;
}
​ 
```

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T08:09:38.397

Just after the solution from @Miszy, I also found a jQuery solution that does the same thing regardless of how many divs will appear on the page:

```
$(document).ready(function() {
    $(.boxwrapper:nth-child(8n+3), .boxwrapper:nth-child(8n+5), .boxwrapper:nth-child(8n+8), .boxwrapper:nth-child(8n+10)").css({"background-color":"red"});
}); 
```

Either one will work fine.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-18T09:40:44.007

您也可以只使用 4 个选择器来切换背景颜色。（答案类似于@MichałMiszczyszyn => 更短的方法）

重复模式在 2 行 4 个元素上进行，选择`:nth-child(8n)`确实是要处理的基本模式，例如：

```
:nth-child(8n-1),
:nth-child(8n-3),
:nth-child(8n-6),
:nth-child(8n-12){
background:/* switch to the other value here */;
} 
```

```
.square {
  width:25%;
  margin:auto;
  background:turquoise;
  counter-reset:div;
  overflow:hidden; /* to deal with float */
}

.square div {
  float:left;
  width:25%;
  text-align:center;
  background:green;
}
.square div:nth-child(8n-1),
.square div:nth-child(8n-3),
.square div:nth-child(8n-6),
.square div:nth-child(8n-12){
background:tomato;
}

/* demo purpose */
body:hover div div {
background:initial;/* resets to none to show parents background */
}
.square div:before {
  content:'';
  padding-top:100%;
  display:inline-block;
  vertical-align:middle;
}
.square div:after {
  counter-increment:div;
  content:counter(div);
  display:inline-block;
  vertical-align:middle;
  font-size:2vw;
}
```

```
<div class="square">
  <div></div>
  <div></div>
  <div></div>
  <div></div>
  <div></div>
  <div></div>
  <div></div>
  <div></div>
  <div></div>
  <div></div>
  <div></div>
  <div></div>
  <div></div>
  <div></div>
  <div></div>
  <div></div>
</div>
<hr/>
<div class="square">
  <div></div>
  <div></div>
  <div></div>
  <div></div>
  <div></div>
  <div></div>
  <div></div>
  <div></div>
  <div></div>
  <div></div>
  <div></div>
  <div></div>
  <div></div>
  <div></div>
  <div></div>
  <div></div>
  <div></div>
  <div></div>
  <div></div>
  <div></div>
  <div></div>
  <div></div>
  <div></div>
  <div></div>
  <div></div>
  <div></div>
  <div></div>
  <div></div>
  <div></div>
  <div></div>
  <div></div>
  <div></div>
</div>
```

该模式将每 8 个元素重复一次。

请注意，您可以保留`background-color`正方形的首字母并使用父背景。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-20T08:55:31.033

这是css棋盘格（damier）的响应版本，从每线1到每行5。

[http://jsfiddle.net/Choufourax/pb09o5fa/1/](http://jsfiddle.net/Choufourax/pb09o5fa/1/)

CSS

```
div.grid {
  display: grid;
}
div.grid > div {
    color: red;
    height: 200px;
    background-color: gray;
    /* comment these 3 lines if you don't need to center content */
    display: flex;
    align-items: center;
    justify-content: center;
}
/* Default => 1 per ligne */
@media only screen and (max-width: 600px)   {

  div.grid > div:nth-child(odd) {
    background-color: black;
  }
}

/* 50%  => 2 per ligne */
@media only screen and (max-width: 840px) and (min-width: 600px)  {
  div.grid {
   grid-template-columns: 1fr 1fr; 
  }
  div.grid > div:nth-child(4n+1), div.grid > div:nth-child(4n+4) {
    background-color: black;
  }
}

/* 33%  => 3 per ligne */
@media only screen and (max-width: 1024px) and (min-width: 840px)  {
  div.grid {
   grid-template-columns: 1fr 1fr 1fr; 
  }
  div.grid > div:nth-child(6n+1), div.grid > div:nth-child(6n+3), div.grid > div:nth-child(6n+5)  {
    background-color: black;
  }
}

/* 25% => 4 per ligne */ 
@media only screen and (max-width: 1140px) and (min-width: 1024px)  {
  div.grid {
   grid-template-columns: 1fr 1fr 1fr 1fr; 
  }
  div.grid > div:nth-child(8n+1), div.grid > div:nth-child(8n+3), div.grid > div:nth-child(8n+6), div.grid > div:nth-child(8n+8) {
    background-color: black;
  }
}

/* 20% => 5 per ligne */ 
@media only screen and (min-width: 1141px)  {
  div.grid {
   grid-template-columns: 1fr 1fr 1fr 1fr 1fr; 
  }
  div.grid > div:nth-child(10n+1), div.grid > div:nth-child(10n+3), div.grid > div:nth-child(10n+5), div.grid > div:nth-child(10n+7), div.grid > div:nth-child(10n+9) {
    background-color: black;
  }
} 
```

网页：

```
<div class="grid">
    <div>1</div>
    <div>2</div>
    <div>3</div>
    <div>4</div>
    <div>5</div>
    <div>6</div>
    <div>7</div>
    <div>8</div>
    <div>9</div>
    <div>10</div>
    <div>1</div>
    <div>2</div>
    <div>3</div>
    <div>4</div>
    <div>5</div>
    <div>6</div>
    <div>7</div>
    <div>8</div>
    <div>9</div>
    <div>10</div>
    <div>1</div>
    <div>2</div>
    <div>3</div>
    <div>4</div>
    <div>5</div>
    <div>6</div>
    <div>7</div>
    <div>8</div>
    <div>9</div>
    <div>10</div>
</div> 
```

# javafx - 让 javafx 阶段成为 JDialog 的所有者？

> ID：12560865
> 
> 赞同：2
> 
> 时间：2012-09-24T07:49:21.247
> 
> 标签：javafx, jdialog

从 javafx 应用程序菜单项单击显示一个`JDialog`包含Jasper 报告的摆动。`JRViewer`但是`JDialog`即使之后它也不是 MODAL，`setModal(true)`因为它不属于 javafx 阶段。如何使 javafx 阶段成为 a 的所有者`JDialog`？或者，如何在 javafx 舞台、场景中显示 Jasper 报告？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T20:11:42.653

不要使用 JDialog。在 JavaFX 中，您使用[Stages](http://docs.oracle.com/javafx/2/api/javafx/stage/Stage.html)。将 Jasper 报告放入[Scene](http://docs.oracle.com/javafx/2/api/javafx/scene/Scene.html)中，将 Scene 放入 Stage 中。我认为您不能将 Swing 组件放入 JavaFX 组件中，因此您必须检查此链接：[将 JavaFX 集成到 Swing 应用程序中](http://docs.oracle.com/javafx/2/swing/swing-fx-interoperability.htm)

制作 JavaFX 对话框的代码：

```
 Stage stage = new Stage();
            stage.setTitle("Title");
            stage.setResizable(false);
            stage.initModality(Modality.APPLICATION_MODAL);
            stage.initOwner(primaryStage);
            stage.initStyle(StageStyle.UTILITY);

            (...)

            Scene scene = new Scene(...);
            stage.setScene(scene); 
```

在上面的代码中，舞台的行为与对话框完全一样。

还要检查这个：

[如何创建 JavaFX 对话框？](https://stackoverflow.com/questions/14168064/how-to-create-a-javafx-dialog/)

[你好世界，JavaFX 风格](http://docs.oracle.com/javafx/2/get_started/hello_world.htm)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-01-09T12:51:13.833

回到第一个（基本）问题：不可能让 Stage 成为 JDialog 的所有者。但是，设置好 SwingNode 的内容后

```
swingNode.setContent(xxx); 
```

您可以获取 xxx 的父级（也可能是 xxx 的父级的父级......），直到找到（AWT-）框架或（AWT-）对话框。在 SwingNode 的情况下，它是一个 JLightweightFrame。您可以使用此对象作为所有者来创建您的 JDialog。

但是，我认为 JavaFX SwingNode 机制中存在错误。如果将 JDialog 设置为模态 ( `setModal(true)`)，则 JDialog 在功能上显示为模态，但它可能会出现在主 (JavaFX) 窗口的后面。仍然可以移动主窗口，把它放在前面等等，如果有一个模态对话框，这应该是不可能的。但这是另一个话题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-31T03:56:50.057

在 javafx ( jdk 1.8> ) 阶段查看 Jasper 报告

```
JasperPrint jp = JasperFillManager.fillReport(reportsource, params,getCon());

                SwingNode swingNode = new SwingNode();
                swingNode.setContent(new JRViewer(jp));

                AnchorPane anchorPane = new AnchorPane();

                AnchorPane.setTopAnchor(swingNode,0.0);
                AnchorPane.setBottomAnchor(swingNode,0.0);
                AnchorPane.setLeftAnchor(swingNode,0.0);
                AnchorPane.setRightAnchor(swingNode,0.0);

                anchorPane.getChildren().add(swingNode);
                Scene scene = new Scene(anchorPane);
                Stage stage = new Stage();
                        stage.setHeight(550);
                        stage.setWidth(600);
                        stage.setAlwaysOnTop(true);
                        stage.setScene(scene);
                        stage.showAndWait(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T14:14:00.140

> Alternatively how to display a Jasper report inside a javafx stage, scene?

[Output HTML from your Jasper report](https://stackoverflow.com/questions/1547334/how-to-export-jasper-report-to-html) and load the report in a JavaFX [WebView](http://docs.oracle.com/javafx/2/api/javafx/scene/web/WebView.html).

> Make a javafx stage the owner of a JDialog?

I don't think this is possible. What should work instead is to make your application a Swing application and host your JavaFX content inside a [JFXPanel](http://docs.oracle.com/javafx/2/api/javafx/embed/swing/JFXPanel.html) inside a Swing JFrame. Then you have no Stage and the owner of the JDialog can be the JFrame hosting the JFXPanel.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-12T10:12:27.647

我在 JavaFX 8 中编写了一个 JasperReports 打印预览阶段类。它是纯 JavaFX 代码，不需要使用[SwingNode](http://docs.oracle.com/javase/8/javafx/api/javafx/embed/swing/SwingNode.html)类。

与 JRViewer 相比，它不支持链接和部件，但打印预览窗口无论如何也不需要它。另一方面，代码要短得多，因此很容易理解并进一步满足每个人的需求。

此类的源代码可在[GitHub 存储库](https://github.com/vitomirs/JRPrintPreview)中免费获得。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-11-26T13:39:55.093

现在可以做到了，
您现在需要的是安装 jdk 8
，因为 javafx 中的 swing 内容是在 jdk8 中引入的

```
@FXML
private SwingNode swingNode;
...
JasperPrint jasperPrint = JasperFillManager.fillReport(FileName, hash, connect);
swingNode.setContent(new JRViewer(jasperPrint)); 
```

oracle 只需为此添加教程，
接下来您可以点击此链接
[oracle tutorial embed swing in javaFX](https://docs.oracle.com/javase/8/javafx/interoperability-tutorial/embed-swing.htm)

# php - PHP数组按多个值排序

> ID：12560866
> 
> 赞同：1
> 
> 时间：2012-09-24T07:49:20.867
> 
> 标签：php, multidimensional-array

我有以下要排序的多维数组。

我想按 total_points 对最里面的数组进行排序，然后是 tiebraker1、2 和 3

例子：

```
Array
(
        [1] => Array
                (
                        [1] => Array
                                (
                                        [userid] => 17
                                        [total_points] => 16
                                        [tiebraker1] => 1
                                        [tiebraker2] => 2
                                        [tiebraker3] => 1
                                )

                        [2] => Array
                                (
                                        [userid] => 29
                                        [total_points] => 16
                                        [tiebraker1] => 1
                                        [tiebraker2] => 2
                                        [tiebraker3] => 9
                                )
                )

        [2] => Array
                (
                        [1] => Array
                                (
                                        [userid] => 26
                                        [total_points] => 26
                                        [tiebraker1] => 2
                                        [tiebraker2] => 2
                                        [tiebraker3] => 4
                                )

                        [2] => Array
                                (
                                        [userid] => 17
                                        [total_points] => 26
                                        [tiebraker1] => 3
                                        [tiebraker2] => 2
                                        [tiebraker3] => 4
                                )
                )
) 
```

结果：

```
Array
(
        [1] => Array
                (
                        [1] => Array
                                (
                                        [userid] => 29
                                        [total_points] => 16
                                        [tiebraker1] => 1
                                        [tiebraker2] => 2
                                        [tiebraker3] => 9
                                )               
                        [2] => Array
                                (
                                        [userid] => 17
                                        [total_points] => 16
                                        [tiebraker1] => 1
                                        [tiebraker2] => 2
                                        [tiebraker3] => 1
                                )

                )

        [2] => Array
                (
                        [1] => Array
                                (
                                        [userid] => 17
                                        [total_points] => 26
                                        [tiebraker1] => 3
                                        [tiebraker2] => 2
                                        [tiebraker3] => 4
                                )               
                        [2] => Array
                                (
                                        [userid] => 26
                                        [total_points] => 26
                                        [tiebraker1] => 2
                                        [tiebraker2] => 2
                                        [tiebraker3] => 4
                                )

                )
) 
```

我尝试使用 array_multisort 但我无法正确配置它。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T08:16:58.147

要使用`array_multisort`您的数据，您需要不同的结构。具体来说，您需要按“分数类型”进行分组（或以数学方式表示，转置数组）。例如像这样使用你的第一个例子：

```
array(5) {
    // $userid
    [0] => array(2) {
        [0] => 17
        [1] => 29
    }

    // $total_points
    [1] => array(2) {
        [0] => 16
        [1] => 16
    }

    // $tiebreaker1
    [2] => array(4) {
        [0] => 1
        [1] => 1
    }

    // $tiebreaker2
    [3] => array(2) {
        [0] => 2
        [1] => 2
    }

    // $tiebreaker3
    [4] => array(2) {
        [0] => 1
        [1] => 9
    }
} 
```

然后你可以使用`array_multisort()`如下：

```
array_multisort($ar[1], SORT_DESC, SORT_NUMERIC,
                $ar[2], SORT_DESC, SORT_NUMERIC,
                $ar[3], SORT_DESC, SORT_NUMERIC,
                $ar[4], SORT_DESC, SORT_NUMERIC,
                $ar[0], SORT_ASC, SORT_NUMERIC); 
```

如果您无法更改数组的结构，则可以`usort()`改用并手动定义比较标准。

```
function cmp($a, $b)
{
    if ($a['total_points'] != $b['total_points']) {
        return ($a['total_points'] > $b['total_points']) ? -1 : 1;
    } elseif ($a['tiebreaker1'] != $b['tiebreaker1']) {
        return ($a['tiebreaker1'] > $b['tiebreaker1']) ? -1 : 1;   
    } elseif ($a['tiebreaker2'] != $b['tiebreaker2']) {
        return ($a['tiebraker2'] > $b['tiebreaker2']) ? -1 : 1;   
    } elseif ($a['tiebreaker3'] != $b['tiebreaker3']) {
        return ($a['tiebreaker3'] > $b['tiebreaker3']) ? -1 : 1;   
    } else {
        return 0;
    }
}

usort($array, "cmp"); 
```

免责声明：我并不声称我的实现`cmp`是最优雅的。但它应该可以解决问题。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T08:16:24.730

来自 PHP.net 的文档：

```
<?php
$ar = array(
       array("10", 11, 100, 100, "a"),
       array(   1,  2, "2",   3,   1)
      );
array_multisort($ar[0], SORT_ASC, SORT_STRING,
                $ar[1], SORT_NUMERIC, SORT_DESC);
var_dump($ar);
?> 
```

在本例中，排序后，第一个数组将转换为“10”、100、100、11、“a”（按升序排序为字符串）。第二个将包含 1, 3, "2", 2, 1（按数字排序，按降序排列）。

```
array(2) {
  [0]=> array(5) {
    [0]=> string(2) "10"
    [1]=> int(100)
    [2]=> int(100)
    [3]=> int(11)
    [4]=> string(1) "a"
  }
  [1]=> array(5) {
    [0]=> int(1)
    [1]=> int(3)
    [2]=> string(1) "2"
    [3]=> int(2)
    [4]=> int(1)
  }
} 
```

# php - 创建自动登录用户的第二个登录页面

> ID：12560870
> 
> 赞同：4
> 
> 时间：2012-09-24T07:49:36.847
> 
> 标签：php, jquery, login

我有一个登录页面如下：

```
<form action="?" method="post" id="frm-useracc-login" name="frm-useracc-login" >

    <div id="login-username-wrap" >

        <div class="login-input-item left">

            <div class="div-search-label left">

                <div id="div-leftheader-wrap">

                    <p class="a-topheader-infotext left"><strong>Username: </strong></p>

                </div>

            </div>

            <div class="login-input-content left div-subrow-style ui-corner-all">

                <input type="text" tabindex="1" name="txt-username" id="txt-username" class="input-txt-med required addr-search-input txt-username left">

            </div>

        </div>

    </div>

    <div id="login-password-wrap" >

        <div class="login-input-item left">

            <div class="div-search-label left">

                <div id="div-leftheader-wrap">

                    <p class="a-topheader-infotext left"><strong>Password: </strong></p>

                </div>

            </div>

            <div class="login-input-content left div-subrow-style ui-corner-all">

                <input type="password" tabindex="1" name="txt-password" id="txt-password" class="input-txt-med required addr-search-input txt-password left">

            </div>

        </div>

    </div>

    <div id="login-btn-bottom" class="centre-div">

        <div id="login-btn-right">

            <button name="btn-login" id="btn-login" class="btn-med ui-button ui-state-default ui-button-text-only ui-corner-all btn-hover-anim btn-row-wrapper left">Login</button>
            <button name="btn-cancel" id="btn-cancel" class="btn-med ui-button ui-state-default ui-button-text-only ui-corner-all btn-hover-anim btn-row-wrapper left">Cancel</button><br /><br />

        </div>

    </div>

</form> 
```

这里是我的 session.controller.php 文件：

[点击这里](http://www.oswestrytaxis.com/session.controller.zip)

基本上，我想要做的是创建第二个登录页面，该页面自动将值传递给会话控制器并登录。例如，如果我去 login-guest.php，我将输入用户名和密码的默认值和然后有一个jquery点击事件，自动记录他们使用`$("#btn-login").trigger('click');`

问题是，如果会话超时，会话控制器会自动返回 login.php，我不确定如何实现这一点。任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T10:58:39.220

正如您在评论中提到的那样，您必须首先知道用户是如何登录的（登录或登录访客），因此无论如何您都需要为每个用户提供某种状态。

现在，如果您不能将会话超时增加到无限，您可能需要将登录类型存储在 cookie 中的其他位置，或者作为 url 中的查询字符串。

在 cookie 的情况下，它将是这样的：

在您的登录部分`login-guest.php`：

```
...
$expire = 60 * 60 * 24 * 30 * 24 + time(); // 2 years
setcookie('logintype', 'guest', $expire); 
```

这是您将用户发送到登录页面的地方：

```
if(isset($_COOKIE['logintype']) && $_COOKIE['logintype']=='guest'){
    header('Location: login-guest.php');
} else {
    header('Location: login.php');
} 
```

我不认为 cookie 可以有无限的生命，所以我将有效期设置为两年，你可以更改。显然，如果用户删除 cookie 或使用其他浏览器，它不会持续存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T13:20:20.333

您应该使用登录类型（例如：已注册、访客）在每个登录表单上添加一个额外字段来解决您的问题，并使用此值执行所需的重定向或您需要的任何其他逻辑？

您还可以将此登录类型保留在会话/cookie 中以供进一步使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T16:11:55.320

您可以为每个表单添加一个简单的隐藏输入：

```
<input type="hidden" name="login_type" value="guest" /> 
```

然后，您将根据执行的登录类型进行重定向：

```
if($_POST['login_type'] == 'guest') {
    header('Location: login-guest.php');
}
else {
    header('Location: login.php');
} 
```

当然有更好的解决方案，你应该总是过滤输入等，但为了简单起见，你去吧。

# vb.net - WCF 服务传递 TimeZoneInfo

> ID：12560871
> 
> 赞同：2
> 
> 时间：2012-09-24T07:49:38.663
> 
> 标签：vb.net, wcf, service

我有一个 Silverlight 应用程序，它调用我的 WCF 服务以从服务器获取时区列表。所有时区都在服务器上的函数中检索，但我需要知道如何将这些传递回 Silverlight。

我在服务器上的调用如下，但我认为我需要以某种方式将 TimeZoneInfo 序列化为 Know Type，然后才能将其传回。这就是我卡住的地方。

请问有人可以帮忙吗？

```
Public Function GetTimezones() As ReadOnlyCollection(Of TimeZoneInfo) Implements ITimezoneService.GetTimezones

   Dim timeZones As ReadOnlyCollection(Of TimeZoneInfo) = TimeZoneInfo.GetSystemTimeZones()

   Return timeZones

End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T11:46:23.200

有关要添加以允许序列化的已知类型的列表，请参阅此[http://social.msdn.microsoft.com/Forums/en/wcf/thread/f164f185-ae18-4775-a2ff-a814813d262d 。](http://social.msdn.microsoft.com/Forums/en/wcf/thread/f164f185-ae18-4775-a2ff-a814813d262d)`TimeZoneInfo`

[这将适用于整个框架，但我并不真正推荐它，我宁愿使用 ID 或c# TimeZoneInfo serialization](https://stackoverflow.com/questions/7704891/c-sharp-timezoneinfo-serialization)中建议的内置字符串序列化。

相反，Silverlight 框架有自己的轻量级版本，`TimeZoneInfo`因此无法反`TimeZoneInfo`序列化整个框架的序列化（因为它不是相同的类型定义）。

您还应该注意，默认情况下，安全参数 Silverlight 只能访问`UTC`和`Local`（Silverlight 客户端运行机器区域设置）TimeZoneInfo，并且要使用其他时区，您需要以提升的权限运行 Silverlight，因为时区信息是基于注册表的。请参阅[silverlight 时区转换](https://stackoverflow.com/questions/4618107/silverlight-time-zone-converting)和[http://forums.silverlight.net/t/186363.aspx/1](http://forums.silverlight.net/t/186363.aspx/1)。

最后，有些人确实在他们自己的 Silverlight 应用程序中重写了整个或部分 TimeZoneInfo 类（我们也必须这样做）。请参阅[http://forums.silverlight.net/t/165067.aspx/1](http://forums.silverlight.net/t/165067.aspx/1)。Silverlight 尚不支持本地到 UTC 或 UTC 到本地时区转换。

# fonts - 在商业应用中使用“Times New Roman”

> ID：12560872
> 
> 赞同：1
> 
> 时间：2012-09-24T07:49:54.477
> 
> 标签：fonts, jasper-reports

我在商业应用程序中使用 Jasper Reports。我需要在生成的文档中使用（嵌入）“Times New Roman”字体。我在[这里](http://www.microsoft.com/typography/fonts/font.aspx?FMID=1653)发现这个字体可以嵌入（`Embedding: Editable embedding allowed`）。这是什么意思 ？我可以`times.ttf`仅嵌入应用程序或文档中吗？有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T08:02:13.427

Microsoft 网站上有一个常见问题解答条目，其中提供了有关如何重用字体的信息。本质上，权限在字体文件属性中——在我的系统上，Times New Roman 可嵌入可编辑文档。Microsoft 网站上有[一个常见问题解答](http://www.microsoft.com/typography/RedistributionFAQ.mspx)，其中将可嵌入性级别定义为：

嵌入允许字体与文档一起移动。与 Microsoft 产品一起分发的大多数字体都允许嵌入。要检查字体的嵌入权限，请右键单击字体文件并选择“属性”。

> 嵌入权限有 4 个级别：
> 
> “打印和预览”字体可以嵌入到文档中，前提是阅读文档的用户不能编辑文档的内容。
> 
> “可编辑”字体可以嵌入用户可以编辑的内容中。
> 
> 文档中的“可安装”字体可以由阅读文档的用户或客户端应用程序永久安装。实际上，大多数客户端应用程序将可安装字体视为可编辑字体。
> 
> “无嵌入权限”可防止将字体嵌入到文档中。

# sql - 递归查询排序

> ID：12560874
> 
> 赞同：0
> 
> 时间：2012-09-24T07:50:08.250
> 
> 标签：sql, tsql

我有一个标准表，它与父、子类别关系......就像这样。

```
id, parent, catName, sort 
```

我使用以下查询来创建递归树

```
;WITH cte AS (
    SELECT 0 AS lvl, id, catName, parent,levels,sort,
        CAST(id AS VARCHAR(128)) AS path
    FROM CategoriesMap WHERE parent =0
    UNION ALL
    SELECT p.lvl + 1, c.id, c.catName, c.parent,c.levels,c.sort,
        CAST(p.path + '_' + CAST(c.id AS VARCHAR) AS VARCHAR(128))
    FROM CategoriesMap c
    INNER JOIN cte p ON p.id = c.parent
)
SELECT 
    id, 
    catName AS catName, 
    lvl,
    levels,
    path,
    parent,
    sort
FROM cte 
ORDER BY path 
```

输出如下图：

![在此处输入图像描述](../Images/609d70bc3d06661c06c1cb3b45a72951.png)

查找值为 ASP.NET 和 CLASSIC ASP 的行，这些是技术 > 软件（父级）的最后一个叶子（子级），我想对任何给定父级（最后一个父级）的 LAST CHILDREN 进行排序。对于给定节点（最后一个孩子），我可以有多个父母，**我关心的是使用“排序”列对最后一个孩子（叶子）进行排序。**

所以基本上“Classic Asp”应该在“Asp.Net”之前（最后一列是我图像中的 SORT 列）。

我的查询很好，它按预期返回结果......唯一的挑战是我想使用表中的 SORT 列对最后一个节点进行排序，最后一个节点可以有 3 或 4 个我想要排序的子节点，所有节点都在最后一个节点之上节点是它的父母（它们的顺序已经正确）。

> 我想要这样的输出.... Internet > ISP's > CableVision (1) : Verizon (2) 如您所见 CableVision 和 Verizon 的排序值为 1 和 2，现在假设我们有购物 > 优惠券 > Macys(0 ) : Sears (2)，同样的事情....我希望对 Macys & Sears 进行分类...而且很明显他们的父母是购物 > 优惠券。

@Richard aka cyberkiwi，在应用您的代码后，我对类别表的排序非常随机。输出低于 ![在此处输入图像描述](../Images/0e8215e5b273879b05feb3b82d5fad0d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T08:17:13.493

这个[SQL Fiddle](http://sqlfiddle.com/#!3/8972e/23/0)应该给你你需要的东西。诀窍真的是当你把树叶和树枝混合在一起的时候。在我的解决方案中，树叶总是出现在树枝之前，并且在树叶内（即使与树枝混合在一起），它们`sort`当然是按列排序的。

DDL

```
create table CategoriesMap(
    id int, parent int, catname varchar(20), sort int);
insert CategoriesMap select
    1, 0, 'Activities', null union all select
    2, 0, 'Property', null union all select
    3, 2, 'For rent', null union all select
    4, 2, 'For sale', null union all select
    12, 0, 'Technology', 3 union all select
    15, 12, 'Hardware', null union all select
    21, 12, 'Phones', null union all select
    22, 15, 'Computers', null union all select
    18, 12, 'Software', null union all select
    19, 18, 'Asp.net', 2 union all select
    20, 18, 'SQL', 3 union all select
    23, 18, 'Php', 4 union all select
    24, 18, 'Classic ASP', 1; 
```

询问

```
;WITH leaves AS (
    SELECT A.id
      FROM CategoriesMap A
 LEFT JOIN CategoriesMap B ON A.id=B.parent
     WHERE B.id is null
)
,cte AS (
    SELECT 0 AS lvl, id, catName, parent,sort,
           CAST(id AS VARCHAR(MAX)) AS path,
           '/'+CAST(id AS VARCHAR(MAX))+'/' AS hier
      FROM CategoriesMap
     WHERE parent =0
 UNION ALL
    SELECT p.lvl + 1, c.id, c.catName, c.parent,c.sort,
           p.path + '_' + CAST(c.id AS VARCHAR(MAX)),
           p.hier + CAST(c.id AS VARCHAR(MAX)) + '/'
      FROM CategoriesMap c
      JOIN cte p ON p.id = c.parent
)
    SELECT c.id,
           c.catName,
           c.lvl,
           --levels,
           c.path,
           --c.hier,
           c.parent,
           c.sort
      FROM cte c
 LEFT JOIN leaves l on l.id=c.id
  ORDER BY CASE WHEN l.id is null
                then cast(hier as hierarchyid)
                else cast(hier as hierarchyid).GetAncestor(1)
                END,
           CASE WHEN l.id is null then 0 else 1 end,
           sort 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T08:19:50.720

延迟`path`一级的计算，因此最终结果集有`ppath`可用的父路径（ ）：

```
;WITH cte AS (
    SELECT 0 AS lvl, id, catName, parent,levels,sort,
        CAST('' AS VARCHAR(128)) AS ppath
    FROM CategoriesMap WHERE parent =0
    UNION ALL
    SELECT p.lvl + 1, c.id, c.catName, c.parent,c.levels,c.sort,
        CAST(p.ppath + '_' + CAST(p.id AS VARCHAR) AS VARCHAR(128))
    FROM CategoriesMap c
    INNER JOIN cte p ON p.id = c.parent
)
SELECT 
    id, 
    catName, 
    lvl,
    levels,
    CAST(ppath + '_' + CAST(id AS VARCHAR) AS VARCHAR(128)) AS path,
    parent,
    sort
FROM cte
ORDER BY 
    CASE WHEN sort IS NULL
           THEN path
           ELSE ppath
    END
  , sort ; 
```

不太确定为什么上面会出错。这不会：

```
ORDER BY 
    CASE WHEN sort IS NULL
      THEN CAST(ppath + '_' + CAST(id AS VARCHAR) AS VARCHAR(128))
      ELSE ppath
    END
  , sort ; 
```

# mysql - 如何从mysql中检索一系列图像并在JSP中显示它们

> ID：12560876
> 
> 赞同：2
> 
> 时间：2012-09-24T07:50:13.687
> 
> 标签：mysql, jsp, servlets

我正在尝试通过从 mysql 获取数据来构建一个数组。该数组包括文本和图片。到目前为止一切顺利，但现在我不知道如何在 JSP 页面上显示 memolist 中的这些图片。我所能看到的只是一堆字节。让我们来看看：

我的 DBQueries 看起来像这样：

```
public static ArrayList<Memo> selectAllMemoList()
{
    DBConnectionPool pool = DBConnectionPool.getInstance();
    Connection connection = pool.getConnection();
    PreparedStatement ps = null;
    ResultSet rs = null;

    String query = "SELECT Users.picture, Users.username, Messages.subject, Messages.date, Messages.msg_id " +
            "FROM Messages, Users " +
            "WHERE Messages.uid_fk = Users.uid " +
            "ORDER BY date DESC";
    try
    {
      ps = connection.prepareStatement(query);
      rs = ps.executeQuery();

      ArrayList<Memo> memolist = new ArrayList<Memo>(); 

      String dbSqlTimestamp = "";

      while (rs.next()) {
         m.setUserpicture(rs.getString("picture"));
         m.setUsername(rs.getString("username"));
         m.setSubject(rs.getString("subject"));
         m.setDate(dbSqlTimestamp = new SimpleDateFormat("dd-MM-yy HH:mm").format(rs.getTimestamp("date")));
         m.setMessageid(rs.getInt("msg_id"));
         memolist.add(m);
      }

        return memolist;
    }
    catch (SQLException e){
        e.printStackTrace();
        return null;
    }        
    finally
    {
        DBUtil.closeResultSet(rs);
        DBUtil.closePreparedStatement(ps);
        pool.freeConnection(connection);
    }
} 
```

我的 MemoShowAll 看起来像这样：

```
@Override
protected void doPost(HttpServletRequest request, 
          HttpServletResponse response)
          throws ServletException, IOException 
{   

    HttpSession session = request.getSession(); 

    ArrayList<Memo> memolist = DBQueries.selectAllMemoList();

    request.setAttribute("listmemo", memolist);

    String url = "/restricted/MemoList.jsp";

    // forward the request and response to the view
    RequestDispatcher dispatcher = getServletContext().getRequestDispatcher(url);
    dispatcher.forward(request, response); 

} 
```

备忘录列表.jsp

```
<z:rows>
    <core:forEach var="each" items="${listmemo}">
    <z:row>
        <img src="${each.userpicture}" border=0 >
        <z:label value="${each.username}"/>
        <z:label value="${each.subject}"/>
        <z:label value="${each.date}"/>
    </z:row>
    </core:forEach>
</z:rows> 
```

干杯，BB

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T11:27:17.587

我绕过这个问题的方法是使用 servlet 将图像公开给客户端。为此，您应该将从数据库检索到的图像字节存储到用户的`session`对象中。

在我有`< img src="/imageRender?id=someimageid"/ >`

因此，当浏览器尝试渲染图像时，它会调用 `/imageRender`我的 servlet 侦听的位置。servlet 将读取输入参数，然后根据参数从会话对象中渲染图像。

一些有用的链接是：

1)[使用会话属性将 servlet 显示为 img src](https://stackoverflow.com/questions/8410002/display-servlet-as-img-src-using-session-attribute)

2)[以最佳性能将图像写入 servlet 响应](https://stackoverflow.com/questions/2979758/writing-image-to-servlet-response-with-best-performance)

特别注意链接 2 @BalusC 对它所说的地方的回答`In the ImageDAO#find() you can use ResultSet#getBinaryStream() to get the image as an InputStream from the database.`

在您的情况下，您可以创建一个 DAO 对象列表，这些对象将代表 db 中的每一行。

# ios - 应用升级后 Localizable.strings 不起作用

> ID：12560877
> 
> 赞同：1
> 
> 时间：2012-09-24T07:50:25.960
> 
> 标签：ios, nslocalizedstring, localizable.strings

我在应用商店中有不使用 localizable.strings 的应用。目前我将发布一个新版本，但在“更新模拟”应用程序后看不到 Localizable.strings。每个本地化字符串都显示为 NSLocalizedString 的键。我需要做什么来修复它？

# php - Php 遍历数组和更新 mysql 的最快方法？

> ID：12560878
> 
> 赞同：0
> 
> 时间：2012-09-24T07:50:30.520
> 
> 标签：php, mysql, magento, magento-1.7

我为 Magento 编写了一个产品价格/库存更新脚本。我将 csv 加载到一个数组中，然后遍历它。当前代码大约需要 10 分钟才能完成 5,000 种产品，有没有更快的方法来做到这一点？我已经绕过 Magento 的 API，因为它的速度非常慢，并切换到直接更新数据库，因为它的表不多且速度更快。使用定时器记录时间，foreach循环大概需要10分钟，reindexALL大概需要2分钟

```
$con = mysql_connect("localhost","root","");
$selected = mysql_select_db("magento",$con);

$processes = Mage::getSingleton('index/indexer')->getProcessesCollection();
$processes->walk('setMode', array(Mage_Index_Model_Process::MODE_MANUAL));
$processes->walk('save');

foreach($all_rows as $final)
{

$sql = mysql_query("SELECT entity_id from catalog_product_entity where sku = '".$final[ITEM]."'");

if ($row = mysql_fetch_array($sql)) {

//update price
$pricenew = $final['PRICE'] + ($final['PRICE']*.30);
mysql_query("UPDATE catalog_product_entity_decimal SET value = '$pricenew' where attribute_id = 75 AND entity_id = '".$row[entity_id]."' ");

//update retail price
$retailprice = $final['RETAIL'];
mysql_query("UPDATE catalog_product_entity_decimal SET value = '$retailprice' where attribute_id = 120 AND entity_id = '".$row[entity_id]."' ");

//update stock quantity and is in stock
$stockquantity = $final['QTY'];
$stockquantity = number_format($stockquantity, 4, '.', '');
mysql_query("UPDATE cataloginventory_stock_item SET qty = '$stockquantity', SET is_in_stock = 1 where product_id = '".$row[entity_id]."' ");

}

$processes->walk('reindexAll');
$processes->walk('setMode', array(Mage_Index_Model_Process::MODE_REAL_TIME));
$processes->walk('save');

mysql_close($con); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T07:59:59.703

如果您的表`catalog_product_entity_decimal`有索引，它涵盖了 id （显然是） - 那么您没有其他方法可以加快它的速度。因为这里最慢的是值的物理变化。可能您可以设置一个`WHERE`子句来避免将价格更新为相同的值。

其他想法：虽然大多数人关注语句的性能优化，`SELECT`但`UPDATE`语句`DELETE`经常被忽略。**这些可以从分析查询执行计划**(QEP)的原则中受益。您只能运行`EXPLAIN`on`SELECT`语句，但是可以重写`UPDATE`or`DELETE`语句以像`SELECT`语句一样执行。

要优化`UPDATE`，请查看`WHERE`子句。如果您使用的是`PRIMARY KEY`，则无需进一步分析。如果您不是，则将您的`UPDATE`语句重写为`SELECT`语句并获得`QEP`先前详述的 a 以确保使用最佳索引是有益的。例如：

```
UPDATE t
SET c1 = ‘x’, c2 = ‘y’, c3 = 100
WHERE c1 = ‘x’
AND d = CURDATE() 
```

`UPDATE`您可以将此语句重写`SELECT`为 using 的语句`EXPLAIN`：

```
EXPLAIN SELECT c1, c2, c3 FROM  t WHERE c1 = ‘x’ AND    d = CURDATE() 
```

您现在应该应用与优化`SELECT`语句时相同的原则。

# php - Javascript 在从 ajax 调用获取结果之前执行

> ID：12560879
> 
> 赞同：0
> 
> 时间：2012-09-24T07:50:37.333
> 
> 标签：php, javascript, ajax

我有以下显示会话数据的代码。面临的问题是即使会话具有值并且 ajax 获取该数据，我在函数调用 getValFromSession(qes) 下方放置的警报始终显示空数据。我认为这是由于在javascript中异步执行ajax。所以我放了一些额外的代码，如函数
getValFromSession（qid）所示。如何克服这个异步问题？

```
var qes=$('#qsid_'+q).val();
var res=getValFromSession(qes);

alert(res);//always shows null value

$('#select_'+).val(parseInt(res));   

function getValFromSession(qid)
{
 return $.ajax({
       url  : site_url_js+"controller/getValFromSession",
       type : "POST",
       data : "qid="+qid,   
       cache: false,
       async:   false
}).responseText;
}

/*controller*/
function getValFromSession()
{
   echo $_SESSION['time'][$_REQUEST['qid']];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T07:55:32.230

尝试这个：

```
var qes=$('#qsid_'+q).val();
var res=getValFromSession(qes);

function getValFromSession(qid)
{
   $.ajax({
       url  : site_url_js+"controller/getValFromSession",
       type : "POST",
       data : "qid="+qid,   
       cache: false,
       async:   false,
       success: function(data) {
            alert(data); // alert here in successHandler
            $('#select_'+).val(parseInt(data)); 
       }
   })
}

/*controller*/
function getValFromSession()
{
   echo $_SESSION['time'][$_REQUEST['qid']];
} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T07:55:10.883

`$.ajax`为您提供`success`,`error`和`complete`回调处理程序。在这些处理程序中填充您的响应文本，因为您实现的方式是同步的，并且会立即执行，而不是在请求完成后执行。

[文档](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T07:56:06.923

您可以将您的代码放入一个函数中，并在 AJAX 的成功事件中调用该函数，如下所示

```
---
---
return $.ajax({         
url  : site_url_js+"controller/getValFromSession",         
type : "POST",         
data : "qid="+qid,            
false,      
async:   false,
success: finalfunction
---
---

function finalfunction(res)
{
  alert(res);//always shows null value        
  $('#select_'+).val(parseInt(res)); 
} 
```

# cuda - CUDA H.264解码器初始化问题

> ID：12560882
> 
> 赞同：1
> 
> 时间：2012-09-24T07:50:46.043
> 
> 标签：cuda, h.264, decoder

我正在尝试基于 NVIDIA GPU Computing SDK 4.2 中的 cudaDecodeD3D9 示例开发多流 H.264 视频播放器。

应用程序可以在几个流中正常工作，但它会在 cuvidCreateDecoder 函数中为 12 个分辨率为 800x600 的流或 9 个分辨率为 1920x1080 的流引发断言 (CUDA_ERROR_OUT_OF_MEMORY)。cudaMemGetInfo 返回 387MB（1GB 显卡）和 1.3Gb（2GB 显卡）可用内存。内存碎片会导致这种情况吗？如何使用可用内存？

```
VideoDecoder::VideoDecoder(const CUVIDEOFORMAT & rVideoFormat, 
                       CUcontext &rContext, 
                       cudaVideoCreateFlags eCreateFlags, 
                       CUvideoctxlock &vidCtxLock) 
: m_VidCtxLock(vidCtxLock)
{
// get a copy of the CUDA context
m_Context          = rContext;
m_VideoCreateFlags = eCreateFlags;

// Fill the decoder-create-info struct from the given video-format struct.
memset(&oVideoDecodeCreateInfo_, 0, sizeof(CUVIDDECODECREATEINFO));
        // Create video decoder
oVideoDecodeCreateInfo_.CodecType           = rVideoFormat.codec;
oVideoDecodeCreateInfo_.ulWidth             = rVideoFormat.coded_width;
oVideoDecodeCreateInfo_.ulHeight            = rVideoFormat.coded_height;
oVideoDecodeCreateInfo_.ulNumDecodeSurfaces = FrameQueue::cnMaximumSize;

        // Limit decode memory to 24MB (16M pixels at 4:2:0 = 24M bytes)
while (oVideoDecodeCreateInfo_.ulNumDecodeSurfaces * rVideoFormat.coded_width * rVideoFormat.coded_height > 16*1024*1024)
{
    oVideoDecodeCreateInfo_.ulNumDecodeSurfaces--;
}
oVideoDecodeCreateInfo_.ChromaFormat        = rVideoFormat.chroma_format;
oVideoDecodeCreateInfo_.OutputFormat        = cudaVideoSurfaceFormat_NV12;
oVideoDecodeCreateInfo_.DeinterlaceMode     = cudaVideoDeinterlaceMode_Adaptive;

        // No scaling
oVideoDecodeCreateInfo_.ulTargetWidth       = oVideoDecodeCreateInfo_.ulWidth;
oVideoDecodeCreateInfo_.ulTargetHeight      = oVideoDecodeCreateInfo_.ulHeight;
oVideoDecodeCreateInfo_.ulNumOutputSurfaces = MAX_FRAME_COUNT;  // We won't simultaneously map more than 8 surfaces
oVideoDecodeCreateInfo_.ulCreationFlags     = m_VideoCreateFlags;
oVideoDecodeCreateInfo_.vidLock             = m_VidCtxLock;

size_t available, total;
cudaMemGetInfo(&available, &total);

        // create the decoder
CUresult oResult = cuvidCreateDecoder(&oDecoder_, &oVideoDecodeCreateInfo_);
assert(CUDA_SUCCESS == oResult);
} 
```

cuvidCreateDecoder 可以在超过 1920x1080 的分辨率下工作吗？当我尝试 2560x1920 流时 cuvidCreateDecoder 断言 CUDA_ERROR_INVALID_SOURCE。

### 我的环境

*   硬件：NVidia GTX 550 Ti 1Gb、NVidia GT 610 2Gb、驱动程序版本 306.23
*   视窗 7 x64
*   视觉工作室 2010 SP1
*   视窗 SDK 7.1
*   NVIDIA GPU 计算工具包 v.4.2、v.5.0
*   NVIDIA GPU 计算 SDK 4.2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T02:52:38.337

有关内存问题，请参阅[此答案](https://stackoverflow.com/a/8686409/749748)。

关于分辨率的问题，Compute Capability 2.0 及更早的 GPU 不支持大于 HD 的分辨率`cudaDecodeD3D9`。这就是您无法解码 2560x1920 流的原因。

Kepler GPU 可以支持更大的分辨率。

# c++ - 多个定义错误：如何在头文件中声明引用？

> ID：12560903
> 
> 赞同：1
> 
> 时间：2012-09-24T07:52:43.317
> 
> 标签：c++, qt, reference, header

```
qtGUI.o:(.bss+0x0): multiple definition of `R'
rWidgetPlots.o:(.bss+0x0): first defined here
qtGUI.o:(.rodata+0x0): multiple definition of `qtToR'
rWidgetPlots.o:(.rodata+0x0): first defined here
main.o:(.bss+0x0): multiple definition of `R'
rWidgetPlots.o:(.bss+0x0): first defined here
main.o:(.rodata+0x0): multiple definition of `qtToR'
rWidgetPlots.o:(.rodata+0x0): first defined here
moc_qtGUI.o:(.bss+0x0): multiple definition of `R'
rWidgetPlots.o:(.bss+0x0): first defined here
moc_qtGUI.o:(.rodata+0x40): multiple definition of `qtToR'
rWidgetPlots.o:(.rodata+0x0): first defined here 
```

**rWidgetPlots.h**

```
#ifndef RWIDGETPLOTSH
#define RWIDGETPLOTSH

#include <iostream>
#include <RInside.h>
#include <Rcpp.h>
#include <vector>
#include <limits>
#include <QRect>
#include <fstream>
#include "zoomAndCornerDatabaseParser.h"

RInside R (0, NULL);
RInside & qtToR (R);

typedef struct
{
        double       latitude;
        double       longitude;
        unsigned int vehicleId;
} vehicle;

extern std :: vector <vehicle> vehicleInfo;

typedef struct
{
    float latitude;
    float longitude;
} coordinate;

extern std :: vector <coordinate> previousPoints;

class rdaTilesOnR
{
    public:
        static std :: string returnCenterPoint    (std :: string fileName);
        static std :: string findPanningDirection (float newLatitude, float newLongitude,
                        std :: string topLeftLat, std :: string topLeftLng, 
                        std :: string northEastLat, std :: string northEastLng, 
                    std :: string bottomRightLat, std :: string bottomRightLng, 
                    std :: string southWestLat, std :: string southWestLng);

        static void storeVehicleInfo  (float latitude, float longitude, unsigned int vehicleId);

        static void loadNewTileAndPlotPointsOnRWidget (unsigned short option, float newLongitude, float newLatitude);

        static std :: string doesPointLieInBoundaries  (unsigned short option, float newLatitude, float newLongitude, float currentCenterLatitude, float currentCenterLongitude);
};

#endif 
```

**qtGUI.h**

```
#ifndef QTGUIH
#define QTGUIH

#include <QApplication>
#include <QMainWindow>
#include <QtCore>
#include <QtGui>
#include <QPushButton>
#include <unistd.h>
#include <iostream>
#include <string.h>

#include "rWidgetPlots.h"

class controlRThroughQt : public QWidget
{
    Q_OBJECT  

    QTextEdit  *textEdit;

    public:
        void qtInterface ();

    public slots:
        void slotPanLeft     ();
        void slotPanRight   ();
        void slotPanTop      ();
        void slotPanBottom ();
        void slotZoomIn      ();
        void slotZoomOut    ();
        void slotRefresh      ();
        void findInfoByClicking ();
};

#endif 
```

**`qtToR`这是一个参考。它必须在当时和那里进行定义。如何解决此错误？**使用`extern`没有帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T07:55:53.070

> 它必须在当时和那里进行定义。

那么，它不能完成。如果您愿意将其留在标题中：

```
extern RInside R;
extern RInside & qtToR; 
```

并将定义移动到单个实现文件中：

```
//somecpp.cpp
RInside R (0, NULL);
RInside & qtToR (R); 
```

就可以了。

# asp.net - URL 结构需要在 ASP.NET 中修改

> ID：12560905
> 
> 赞同：2
> 
> 时间：2012-09-24T07:52:54.303
> 
> 标签：asp.net, iis, url-rewriting, canonical-link

我有一个网站，即[www.exhibitionsnow.com](http://www.exhibitionsnow.com)，它的 URL 结构不好。我是 ASP.NET 的新手。有人可以建议重写 URL 的正确程序，以及应用规范 URL 的代码是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T08:49:31.647

有一篇关于[URL 重写](http://www.addedbytes.com/articles/for-beginners/url-rewriting-for-beginners/)的文章。您可以简单地将其应用于您的网站

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T08:25:41.450

IIS 的URL 重写模块**EXISTS**，如果您不需要（我确定您不需要）动态 URL 重写，它使用起来非常简单。

[检查这个链接](http://www.iis.net/learn/extensions/url-rewrite-module)

# android - 在 Android 中经常保存首选项有什么缺点吗？

> ID：12560907
> 
> 赞同：1
> 
> 时间：2012-09-24T07:53:02.303
> 
> 标签：android, sharedpreferences, persistent-storage

我的 Android 应用程序中有相当少量的状态，我希望确保永久保存。它很小，大约有 50 个字符。

查看[Android Storage Options 页面](http://developer.android.com/guide/topics/data/data-storage.html)，他们提供了一些选择，最简单的似乎是共享首选项。现在这些实际上并不是应用程序*偏好，*而是应用程序所在位置的简短指示。

我担心的是，偏好预计不会经常变化，因此可能的用例可能无法处理很多变化。很多时候，我的意思是大约每秒一次达到峰值，具体取决于用户活动。

所以我想确定两件事。

* * *

首先是上面链接的那个页面上的示例代码具有在方法中写出的首选项`onStop`。我们是否保证它会在应用程序退出时运行，无论如何？

如果是这样，我可以在内存中维护状态并使用它来持久保存，那么这个更新频率问题就消失了。

基本上，我想确保我的应用程序在没有保存其状态的情况下无法停止（当然没有灾难性的故障）。

否则，我宁愿在状态发生变化时保存它，以免丢失任何东西。

* * *

其次，只有在每次更改状态时都必须保存状态时，这很重要，将首选项保存到每秒一次是否有任何缺点？如前所述，我不确定它是否是为频繁更新而设计的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T08:18:40.003

如果应用程序正常退出，`onStop()`则调用。如果应用程序是后台的（即使用主页按钮/被调用）`onPause()`，则调用`onStop()`. 如果应用程序退出（即使用后退按钮），`onPause()`则调用它，它调用`onStop()`，它调用`onDestroy()`。但是，当应用程序崩溃时（即通过`nullpointerException`,`onStop()`未调用，应用程序只会崩溃）。

就个人而言，我主要使用`settingsContainerObject`某种类型的，只是将我的偏好写入`onStop()`方法中的内部存储。效果很好。

简而言之：是的，`onStop()`总是在应用程序后台运行或退出时调用。

您还可以分`try/catch`块停止应用程序，以始终保存您的设置。

# c# - 如何将值添加到 sharepoint 中的查找字段？

> ID：12560911
> 
> 赞同：6
> 
> 时间：2012-09-24T07:53:25.043
> 
> 标签：c#, sharepoint, sharepoint-2007, moss

嗨，我在 sharepoint 2007 中有两个列表。我在列表中有一个查找列，它看起来另一个字段。我想使用 sharepoint 对象模型将项目添加到第二个列表。如何设置查找字段值。（该值已经在另一个列表中）。？

```
SPListItem Employee = web.Lists["Employee"].Items.Add();
Employee["Name"] = account.Name;
Employee["Department"] = <lookup value must come here>
Employee.Update(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T09:34:10.370

查找字段将包含行的 id 和要显示的列的值的组合，用 分隔`:#`，在您的情况下可以是`1:#HumanResources`或`12:#Engineering`。

因此，要引用查找仅设置 id 是不够的，而是需要设置上述字符串。幸运的是，SharePoint 提供了`SPFieldLookupValue`完全执行此操作的类：

```
var department = web.Lists["Department"].GetItemById(1);
var employee = web.Lists["Employee"].Items.Add();
employee["Name"] = account.Name;
employee["Department"] = new SPFieldLookupValue(department.ID, department.Title);
employee.Update(); 
```

# c# - 一旦创建了边框对象，如何在 Windows Phone 7 中更改边框对象的属性，例如颜色

> ID：12560914
> 
> 赞同：0
> 
> 时间：2012-09-24T07:53:26.583
> 
> 标签：c#, windows-phone-7

我有一个类似网格（表格）的结构，带有行和列，并且我正在使用该`border`对象为每个单元格分配背景颜色。

如何更改网格中每个单元格的背景颜色？

这是我的方法：

*   删除边框对象并为其分配一个新对象。

*   我也尝试创建一个新`Border`对象并添加它。但它会抛出`InvalidOperationException`声明“元素已经是另一个元素的子元素”。

如何更改特定表格行的背景颜色？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T11:13:29.603

现在我更好地理解了你的问题......

以下代码将为您提供 Row`r`和 Column中的边框`c`。

```
var border = myGrid.Children.OfType<Border>().Where(x => Grid.GetRow(x) == r && Grid.GetColumn(x) == c).FirstOrDefault();
border.Background = [...]; 
```

希望这可以帮助。

# java - Richfaces 4，a4j:command 渲染另一个 h:form

> ID：12560915
> 
> 赞同：0
> 
> 时间：2012-09-24T07:53:36.750
> 
> 标签：java, jsf-2, richfaces, seam2

如何渲染另一个？`a4j:commandLink`_ 在中，当我单击部门编辑时，无法渲染部门。我也尝试使用它不起作用并且没有显示任何错误。我不知道为什么。`dataTable``UI Component``h:form``tableForm``a4j:commandLink``datatable``ajax``entryForm``ajax:region`

```
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:s="http://jboss.org/schema/seam/taglib"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:a4j="http://richfaces.org/a4j"
    template="/layout/adminTemplate.xhtml">
    <ui:define name="body">
        <h:form id="entryForm">
            <h:outputText value="Edit Department" styleClass="subTitle"/>
            <h:panelGrid columns="2">
                <h:outputText value="Name : " styleClass="inputLabel"/>
                <h:inputText value="#{ManageDepartmentAction.department.name}" styleClass="inputText"/>

                <h:outputText value="Description : " styleClass="inputLabel"/>
                <h:inputTextarea value="#{ManageDepartmentAction.department.description}" cols="50" rows="6"/>      
            </h:panelGrid>
            <h:commandButton id="editBtn" value="Edit"  action="#{ManageDepartmentAction.editDepartment}"/>     
        </h:form> <br/>
        <h:form id="tableForm">
            <rich:dataTable value="#{ManageDepartmentAction.departmentList}" var="dep" id="departmentTable"
                            style="width:100%" rowKeyVar="index">
                <rich:column sortBy="#{dep.id}" style="width:200px;">
                    <f:facet name="header">
                        <h:outputText value="Department ID"/>
                    </f:facet>
                    <h:outputText value="#{dep.id}" styleClass="tableContent"/>
                </rich:column>
                <rich:column sortBy="#{dep.name}">
                    <f:facet name="header">
                        <h:outputText value="Name"/>
                    </f:facet>
                    <h:outputText value="#{dep.name}" styleClass="tableContent"/>
                </rich:column>
                <rich:column sortBy="#{dep.description}">
                    <f:facet name="header">
                        <h:outputText value="Description"/>
                    </f:facet>
                    <h:outputText value="#{dep.description}" styleClass="tableContent"/>
                </rich:column>
                <rich:column style="width:100px;text-align:center;">
                    <a4j:commandLink value="Edit-1" action="#{ManageDepartmentAction.prepareEditDepartment(dep)}" render="entryForm"/>

                    <a4j:commandLink value="Edit-2" action="#{ManageDepartmentAction.prepareEditDepartment(dep)}" render=":entryForm"/>

                    <a4j:commandLink value="Edit-3" action="#{ManageDepartmentAction.prepareEditDepartment(dep)}" render="tableForm :entryForm"/>
                </rich:column>
            </rich:dataTable>
        </h:form>
    </ui:define>
</ui:composition>

@Scope(CONVERSATION)
@Name("ManageDepartmentAction")
public class ManageDepartmentAction {

    public List<Department> departmentList;

    @In("#{DepartmentService}")
    private IDepartmentService departmentService;

    @Out(value = "department", required = false)
    private Department department;

    public Department getDepartment() {
        return department;
    }

    public void setDepartment(Department department) {
        this.department = department;
    }

    public boolean isCreateNew() {
        return createNew;
    }

    @Begin(nested = true)
    public void init() {
        departmentList = departmentService.findAllDepartments();
    }

    public List<Department> getDepartmentList() {
        return departmentList;
    }

    public void prepareEditDepartment(Department department) {
        this.department = department;
    }

    public void editDepartment() {
        System.out.println("Edit Department Name : " + department.getName());
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T13:41:20.237

您应该传递要使用 ajax 呈现的控件的完整 ID。一个基本的例子：

```
<h:form id="form1">
    <h:inputText id="txtSomeName" value="#{bean.name}" />
    <a4j:commandButton value="Click me" render=":form2:txtName" />
</h:form>
<h:form id="form2">
    <h:inputText id="txtName" value="#{bean.name}" />
</h:form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T11:04:19.870

尝试使用属性 render="@all"。请使用 firebug 验证表单的渲染 ID 是否仅为“entryForm”，或者是否添加了一些 JSF 前缀。这可能是 render="entryForm" 不起作用的原因。

# android - 具有快速滚动和字母部分索引的 Android ListView

> ID：12560919
> 
> 赞同：13
> 
> 时间：2012-09-24T07:53:52.160
> 
> 标签：android, android-layout, android-intent, android-emulator, android-widget

触摸右侧字母面板上的字母时如何添加测试视图，如图所示？请你帮助我好吗？下面是我的代码。

详细地说，我正在寻找一个与下图完全相同的示例。目前我对数据进行了排序。当我单击右侧字母面板时，它会正确显示数据。但问题是当触摸右侧字母面板上的字母时，我需要显示他正在按的大尺寸字母，如图（E）所示。我该怎么做，你能帮帮我吗？先感谢您！

![所需 UI 的屏幕截图](../Images/5bb0e71e53705af2f289f6a7249a64bb.png)

```
// MainActivity.java
public class MainActivity extends Activity implements
                          SearchView.OnQueryTextListener,
                          SearchView.OnCloseListener {

    private IndexableListView listView;
    private SearchView search;
    EfficientAdapter objectAdapter;
    EfficientAdapter2 objectAdapter1;
    int textlength = 0;
    private CheckBox checkStat, checkRoutine, checkTat;
    private ArrayList<Patient> patientListArray;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.homempleb);
        Log.i("scan"," txtScanResult ");

        ActionItem nextItem = new ActionItem();
        final QuickAction quickAction = new QuickAction(this, QuickAction.VERTICAL);
        quickAction.addActionItem(nextItem);
        quickAction.setOnDismissListener(new QuickAction.OnDismissListener() {
            @Override
            public void onDismiss() {
                Toast.makeText(getApplicationContext(), "Dismissed", Toast.LENGTH_SHORT).show();
            }
        });

        listView = (IndexableListView) findViewById(R.id.homelistView);
        listView.setTextFilterEnabled(true);
        listView.setFastScrollEnabled(true);
        listView.setFastScrollAlwaysVisible(true);
        objectAdapter = new EfficientAdapter(this);
        listView.setAdapter(objectAdapter);
    }

    @Override
    public boolean onClose() {
        return false;
    }

    @Override
    public boolean onQueryTextChange(String newText) {
        return false;
    }

    @Override
    public boolean onQueryTextSubmit(String query) {
        return false;
    }
} 
```

...

```
// EfficientAdapter.java
public class EfficientAdapter extends BaseAdapter implements SectionIndexer {

    private String mSections = "#ABCDEFGHIJKLMNOPQRSTUVWXYZ";
    ArrayList<Patient> patientListArray;
    private LayoutInflater mInflater;
    private Context context;

    public EfficientAdapter(Context context) {
        mInflater = LayoutInflater.from(context);
        this.context=context;
        String patientListJson = CountriesList.jsonData;
        JSONObject jssson;
        try {
            jssson = new JSONObject(patientListJson);
            patientListJson = jssson.getString("PostPatientDetailResult");
        } catch (JSONException e) {
            e.printStackTrace();
        }
        Gson gson = new Gson();
        JsonParser parser = new JsonParser();
        JsonArray Jarray = parser.parse(patientListJson).getAsJsonArray();
        patientListArray = new ArrayList<Patient>();
        for (JsonElement obj : Jarray) {
            Patient patientList = gson.fromJson(obj, Patient.class);
            patientListArray.add(patientList);
            Collections.sort(patientListArray, new Comparator<Object>() {
                @Override
                public int compare(Object o1, Object o2) {
                     Patient p1 = (Patient) o1;
                     Patient p2 = (Patient) o2;
                    return p1.getName().compareToIgnoreCase(p2.getName());
                }
            });
        }
    }

    public int getCount() {
        return patientListArray.size();
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder;
        if (convertView == null) {
            convertView = mInflater.inflate(R.layout.homemplebrowview, null);
            holder = new ViewHolder();
            holder.text1 = (TextView) convertView.findViewById(R.id.name);
            holder.text2 = (TextView) convertView.findViewById(R.id.mrn);
            holder.text3 = (TextView) convertView.findViewById(R.id.date);
            holder.text4 = (TextView) convertView.findViewById(R.id.age);
            holder.text5 = (TextView) convertView.findViewById(R.id.gender);
            holder.text6 = (TextView) convertView.findViewById(R.id.wardno);
            holder.text7 = (TextView) convertView.findViewById(R.id.roomno);
            holder.text8 = (TextView) convertView.findViewById(R.id.bedno);
            holder.btnList = (Button) convertView.findViewById(R.id.listbutton);
            holder.btnList.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {
                    // Intent next=new Intent(context, SeviceDetails.class);
                    // context.startActivity(next);
                }
            });
            convertView.setTag(holder);

        } else {
            holder = (ViewHolder) convertView.getTag();
        }
        holder.text1.setText(Util.formatN2H(patientListArray.get(position).getName()));
        holder.text2.setText(patientListArray.get(position).getMrnNumber());
        holder.text3.setText(Util.formatN2H(patientListArray.get(position).getRoom()));
        holder.text4.setText(Util.formatN2H(patientListArray.get(position).getAge()));
        holder.text5.setText(Util.formatN2H( patientListArray.get(position).getGender()));
        holder.text6.setText(Util.formatN2H(patientListArray.get(position).getWard()));
        holder.text7.setText(Util.formatN2H(patientListArray.get(position).getRoom()));
        holder.text8.setText(Util.formatN2H(patientListArray.get(position).getBed()));
        return convertView;
    }

    static class ViewHolder {
        public Button btnList;
        public TextView text8;
        public TextView text7;
        public TextView text6;
        public TextView text5;
        public TextView text4;
        public TextView text1;
        public TextView text2;
        public TextView text3;
    }

    @Override
    public void notifyDataSetChanged() {
        super.notifyDataSetChanged();
    }

    //@Override
    public int getPositionForSection(int section) {
        // If there is no item for current section, previous section will be selected
        for (int i = section; i >= 0; i--) {
            for (int j = 0; j < getCount(); j++) {
                if (i == 0) {
                    // For numeric section
                    for (int k = 0; k <= 9; k++) {
                        if (StringMatcher.match(String.valueOf(patientListArray.get(j).getName().charAt(0)), String.valueOf(k)))
                            return j;
                    }
                } else {
                    if (StringMatcher.match(String.valueOf(patientListArray.get(j).getName().charAt(0)),
                                            String.valueOf(mSections.charAt(i))))
                        return j;
                }
            }
        }
        return 0;
    }

    //@Override
        public int getSectionForPosition(int position) {
        return 0;
    }

    //@Override
    public Object[] getSections() {
        String[] sections = new String[mSections.length()];
        for (int i = 0; i < mSections.length(); i++)
            sections[i] = String.valueOf(mSections.charAt(i));
        return sections;
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T08:08:58.577

Hear is one cool example of what you need [https://github.com/woozzu/IndexableListView](https://github.com/woozzu/IndexableListView)

IN order to compile the project and get rid of korean text update the `StringMatcher` class

```
package com.woozzu.android.util;

public class StringMatcher {
    public static boolean match(String value, String keyword) {
        if (value == null || keyword == null)
            return false;
        if (keyword.length() > value.length())
            return false;

        int i = 0, j = 0;
        do {
            int vi = value.charAt(i);
            int kj = keyword.charAt(j);
            if (isKorean(vi) && isInitialSound(kj)) {
            } else {
                if (vi == kj) {
                    i++;
                    j++;
                } else if (j > 0)
                    break;
                else
                    i++;
            }
        } while (i < value.length() && j < keyword.length());

        return (j == keyword.length())? true : false;
    }

    private static boolean isKorean(int i) {
        return false;
    }

    private static boolean isInitialSound(int i) {
        return false;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T08:17:06.973

如果您想将单击的字母显示为 Toast（如图像中所示的自定义 toast），请使用：

```
view.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
        LayoutInflater inflater = getLayoutInflater();
        View layout = inflater.inflate(R.layout.toast_custom_layout,
        (ViewGroup) findViewById(R.id.toast_layout_root));
        Toast toast = new Toast(getApplicationContext());
        toast.setGravity(Gravity.BOTTOM, 0, 0);
        // to position the Toast on the screen
        toast.setDuration(Toast.LENGTH_LONG);
        // to set the duration, the toast should appear
        toast.setView(layout);
        // a custom layout for the toast
        toast.show();
    }
}); 
```

你`toast_custom_layout.xml`将是一个 100 x 100 的大文本布局

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-08T12:53:14.497

我已经在片段中显示了列表，如果你想在主活动中显示，那么你可以传递它，而不是 getActivity()

```
//method to display the side indexed scroll list of alphabets 
    public void displayAlphabetsList() {
        final List<String> listOfAlphabet = new ArrayList<>();
        for (int i = 0; i < 26; i++) {
            char alphabet = (char) (ASCII_VALUE_OF_A + i);
            listOfAlphabet.add(String.valueOf(alphabet));
        }

        ArrayAdapter<String> adapter = new ArrayAdapter<>(getActivity(), android.R.layout.simple_list_item_1, listOfAlphabet);
       alphabets_List_View.setAdapter(adapter);

        alphabets_List_View.setOnItemClickListener(new AdapterView.OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
                ///scroll the recycler view to that position where matching letter was found
                int positionToScroll = 0;
                for (int i = 0; i < mContacts.size(); i++) {
                    if (mContacts.get(i).getFirstName().startsWith(listOfAlphabet.get(position)))
                        break;
                    else
                        positionToScroll++;
                }
                recyclerView.scrollToPosition(positionToScroll);
            }
        });
    } 
```

# html - iPad / ios6不渲染png背景图片

> ID：12560921
> 
> 赞同：7
> 
> 时间：2012-09-24T07:53:58.653
> 
> 标签：html, css, ipad, png, ios6

在 ios5 上，网站加载正常并且看起来正确。

自 ios6 以来，我网站的一部分使用 png 图像作为其背景开始在 iPad 上呈现，但随后背景无缘无故地变为黑色（注意所有其他部分保持正确的颜色）。

代码：

```
<section id="showcase">
    <section class="container">
    <img src="images/usp.jpg" alt="USP Screen" id="screen">

    <h2>title</h2>    

    <p>the text.</p>

    <p>The text.</p>
    </section></section> 
```

CSS：

```
#showcase           { background: url(../images/showcasebg.png) repeat-x #ededed; height: 600px; position: relative; top: 87px; }
#showcase h2        { float: left; max-width: 422px; font-family: 'Lobster', cursive; font-size: 36px; margin-top: 20px; }
#showcase p         { float: left; max-width: 422px; margin-top: 20px; } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T16:39:02.810

我在我们的一个网站上也遇到了这个问题。我有一个使用背景 PNG 图像进行渐变的移动网站，在 iOS6（Chrome 和 Safari 应用程序）上显示为黑条。

我通过将网络图像重新保存为

*   ***至少***10px宽
*   将它们保存***为非隔行***PNG

这立即解决了我的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T02:04:09.937

更改我的 img 的大小似乎可行，但是缩放时会出现一些奇怪的问题......最终，对我来说最好的解决方案是将图像保存为 jpg。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T22:18:24.467

我不确定它是否直接相关，但昨晚我遇到了类似的问题。我使用图像的相对 URL，发现 iOS6 将图像路径中的空格编码为 %2520 而不是 %20。这对我来说是个问题，因为我正在模拟器上的应用程序的 Web 视图中查看图像资源，因此模拟器提供的资源路径中有空格。这在设备上不是问题，路径中没有空格。

我发现新的远程检查器（此处提到：[http](http://www.mobilexweb.com/blog/iphone-5-ios-6-html5-developers) ://www.mobilexweb.com/blog/iphone-5-ios-6-html5-developers ）对于确定发生的事情非常有用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-22T04:28:09.807

我刚刚在网络服务器上遇到了这个。解决方案是将 PNG 从 8 位整数精度更改为 32 位。显然 iOS 无法正确处理 8 位；我不知道16位。我认为由于图像的低复杂性（简单的渐变），Photoshop 可能会自动完成此操作。在 GIMP 中很容易修复：`Image -> Precision -> 32-bit integer`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T10:33:29.437

刚刚遇到同样的问题，在 iOS6 Safari 下。显示为黑色的 repeat-x .PNG 背景图像。在巨大的时间压力下，我将其保存为 .JPG 并解决了渲染问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-26T14:57:02.010

类似的问题在这里。[我的网站 ( http://paulcremoux.com/en/trabajo/](http://paulcremoux.com/en/trabajo/) )的工作部分下的所有页面都有一个长 png。通常图像在完成之前就停止加载；其他时候他们加载然后崩溃。（你必须看几页，因为一开始它似乎工作得很好。）

只发生在ios6上。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-27T01:50:02.483

我们遇到了类似的问题。

我们只是在 PhotoShop 中打开 PNG 并重新保存它，然后它显示正常。我们没有更改颜色配置文件或类似的东西 - 只是打开它，让所有设置保持不变，然后再次保存，然后就很好了。

我们的网站上有许多 PNG 背景，但只有两个特定的 PNG 没有正确显示。所以我们认为这两个特别是在他们第一次创建时被小故障或其他东西保存了。

谁知道。*耸耸肩*

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-06T01:30:21.730

对我有用的东西对所有人都不一样：

*   一些图像通过消除隔行扫描起作用
*   一些图像我删除了隔行扫描，但随后也必须删除透明度，这似乎解决了问题
*   我试图弄乱宽度，但我也不认为是这样。

只是我的经验

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-10-22T12:40:41.460

刚刚遇到与此相同的问题，重新保存`.png`并删除隔行扫描解决了问题。

# oracle11g - 尝试检索错误 ORA-01019 的文本时出错

> ID：12560925
> 
> 赞同：9
> 
> 时间：2012-09-24T07:54:31.040
> 
> 标签：oracle11g

我有一个与甲骨文有关的问题。我有一台之前安装了 Oracle 客户端的机器。我能够使用客户端连接到我的 oracle 服务器。

现在我最近在同一台机器上安装了 oracle 11g DB。现在我安装了一个客户端和 Oracle 11g DB。但是有些我无法再连接到 oracle 服务器了。这似乎有点问题，因为我在路径和注册表项中有两个 oracle home 和东西。

我在连接时遇到的错误是 [Microsoft][ODBC driver for Oracle][Oracle]Error while trying to retrieve text for error ORA-01019

注意：我曾经遇到过类似的问题，但是一旦我卸载了 oracle 数据库服务器并删除了 ORACLE_HOME 条目，事情就开始正常工作了。

你能帮我解决这个问题吗？如果您需要更多信息，请告诉我

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-24T09:32:36.103

好，

刚刚解决了。虽然有两个安装，但我们有两个 ORACLE_HOME 目录，并且都有 SQAORA32.dll 文件。在查找 ORACLE_HOME 时，我的应用程序变得混乱..我刚刚删除了 Client oracle home 条目，因为 oracle 客户端默认存在于 oracle DB 中现在它正在工作...谢谢！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-08-17T14:42:14.903

更正 ORACLE_HOME 路径。

系统中可能有两个 oracle 客户端。

我有同样的问题，原因是我的 ORACLE_HOME 指向没有 tns.ora 文件的 oracle 安装。

将 ORACLE_HOME 更改为具有 tns.ora 解决它的 Oracle 目录。

tns.ora 位于 client2\network\admin\

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-03-11T05:33:49.277

## 发生 ORA-01019 错误时

1.  检查 TNSPING ，如果没有响应，则在 tns.ora 文件中添加服务名称条目。
2.  检查防火墙，如果启用则禁用它。
3.  添加环境。变量 ORACLE_HOME 到 oracle 客户端目录的路径，直到 'c:\oracle...\client1'，这个解决方案肯定会起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-16T02:46:39.007

我有同样的问题。我的解决方案是删除环境变量中的 oracle 路径之一。我还更改了 inventory.xml 并指向我的环境路径变量中的 oracle home 版本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-15T11:38:45.650

就我而言，我只需要在服务器上安装 oracle 10g 客户端，因为有 11g 版本。

Ps：我什么都不需要unistall，我只是安装了10g版本并更新了tnsnames文件（C:\oracle\product\10.2.0\client_1\NETWORK\ADMIN）

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2018-03-17T03:50:59.173

你可以参考这个[链接](https://community.dynamics.com/crm/b/crminogic/archive/2016/12/26/steps-to-connect-ssis-to-oracle)。

安装 ODAC 32 位后使用 CMD 安装 ODAC 64 位驱动程序：

1.  使用 CMD 转到 install.bat 文件所在的 ODAC 位文件夹。
2.  键入`install.bat all c:/oracle odac`命令并按`Enter`。

    安装文件将位于“c:/oracle”文件夹中。

安装 Oracle 11g 客户端 32 位和 64 位时，必须更改 oracle 基本路径：“c:/oracle”

# c - 投射 char/unsigned char 会安全吗？

> ID：12560926
> 
> 赞同：1
> 
> 时间：2012-09-24T07:54:32.583
> 
> 标签：c

通过强制转换修复下面的警告是否安全，或者我可以简单地更改原型以返回 a`u_char`吗？

> 警告：从结果类型为 'char *' 的函数返回 'u_char [256]' 在指向具有不同符号的整数类型的指针之间转换 [-Wpointer-sign]

```
char   * whatever(unsigned char *text)
{
        static u_char retval[256];
        int pos = 0;

        *retval = 0;
        if (!text)
                return retval;

        for (; *text && (pos < 254); text++, pos++) {
                if (*text < 32) {
                        retval[pos++] = '^';
                        retval[pos] = *text + 64;
                } else if (*text == 127) {
                        retval[pos++] = '^';
                        retval[pos] = '?';
                } else
                        retval[pos] = *text;
        }

        retval[pos] = 0;
        return retval;
} 
```

我也对其他可能性持开放态度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T07:55:32.913

当然，如果您认为数据是无符号的，您应该更改返回类型。

一般来说，您的代码看起来有点吓人，因为它似乎硬编码了基于 ASCII 值的字符假设。这不是我建议做的事情，请查看 `isprint()`功能和朋友以获取检查字符的便携方式。并且文本通常被假定为`const char *`，而不是`const unsigned char *`。

最后，当然返回指向 `static`缓冲区的指针也可能有点危险，代码不是线程安全的，如果进行了多次调用，很难在外部跟踪返回值并意识到它何时被后续调用覆盖.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T08:11:45.917

由于您的函数将 a`unsigned char*`作为输入，因此返回输出似乎是合理的`unsigned char*`，除非该函数的部分预期目的是从 转换`unsigned char`为`char`。如果这是目的的一部分，那么`retval`应该是一个数组`char`，而不是一个数组`u_char`。

从`unsigned char`to转换`char`可能对 2 的补码实现（几乎全部）是无操作的。但它实际上并不能保证，即使是 2 的补码。对于大于`CHAR_MAX`（通常为 127）的值，允许转换以更改位模式甚至引发信号。在从`unsigned char`to转换`char` *不是*无操作（几乎没有）的实现中，从`unsigned char*`to 转换`char*`是不安全的，因此会发出警告。

所以实际上，警告告诉您需要决定（并记录）您的函数正在处理的字符类型。不要通过强制转换来避免该决定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T08:57:25.003

有数百万行代码将`char*`和`unsigned char*`视为可互换的，而 C 标准并未强制要求它们是可互换的。这是否“安全”取决于您所说的这个词......如果您认为您可以将您的代码移植到当前不存在且它们不可互换的符合实现之一，或者如果您订阅那些说任何不符合 C 标准的东西都可能会毁掉你的硬盘的迂腐说法。

但是编写正确的类型安全代码是更好的做法，在这种情况下甚至不会出现问题。换句话说，不要因为“不安全”而避免强制转换，而是因为它是不好的编码习惯而避免使用它。坏处的一部分是任何演员都可以隐藏一个错误......例如，假设你认为`char*`你正在转换的`unsigned char*`实际上是其他类型，比如an`int`或an `int*`......你刚刚阻止了编译器告诉你它。类型和类型安全是通过在编译时及早发现错误来避免错误的强大工具。

# entity-framework - 使用自定义类重载 EF 验证

> ID：12560929
> 
> 赞同：0
> 
> 时间：2012-09-24T07:54:41.413
> 
> 标签：entity-framework, c#-4.0, asp.net-mvc-2

我正在使用实体框架，并且有一个视图，它是 tblAuthorMaster 类型的强类型视图模型。在 Post ModelState 上返回以下错误：

```
值“0”对状态无效。

```

这里状态是 DB/EF 中的布尔数据类型，并且在查看它的下拉列表（TEXT="active/inactive"，VALUE="1/0"），所以每当我发布我的表单时，我都会收到上述错误消息。

我已经尝试了一些解决方案来克服这个问题，但它似乎没有正常工作。

以下是我的代码库：

这里 tblAuthorMaster 是 EF 类，AuthorModel 是我的自定义类，我将其用于一些自定义验证和其他内容。

```
    [元数据类型(typeof(AuthorModel))]
    公共部分类 tblAuthorMaster { }

    公共类 AuthorModel
    {
        [必需（错误消息 =“*”）]
        公共字符串作者姓名 { 获取；放; }
        [必需（错误消息 =“*”）]
        公共布尔状态{获取；放; }        

    }

```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T07:55:54.723

为了使其正常工作，下拉列表中的 VALUE 必须是`true/false`而不是`1/0`。由于您尚未展示如何生成 doropdown，因此很难提供帮助，但它可能看起来像这样：

```
<%= Html.DropDownListFor(
    x => x.Status,
    new[] 
    {
        new SelectListItem { Value = "true", Text = "active" },
        new SelectListItem { Value = "false", Text = "inactive" },
    }
) %> 
```

另外，使用具有 2 个可能值的下拉菜单有什么意义？HTML 为您提供了用于此目的的复选框：

```
<%= Html.CheckBoxFor(x => x.Status) %> 
```

最后一句话：您在问题中所说的*视图模型*根本不是视图模型。这是一个自动生成的 EF 域模型。视图模型是您专门为给定视图的要求设计的类，它们不是由某些向导自动生成的。

# android - 如何一次只显示一个对话框？

> ID：12560931
> 
> 赞同：11
> 
> 时间：2012-09-24T07:54:46.407
> 
> 标签：android, customdialog

我的 Android 应用程序在单击按钮时显示 AlertDialog。当我多次单击该按钮时，会创建一个以上的对话框。我怎样才能解决这个问题？

这是我的代码：

```
button.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {
        dialog =  new AlertDialog.Builder(context);             
        dialog.show();
    }
}); 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-12-01T11:30:36.167

您需要检查对话框是否正在显示

Dialog 有一个 isShowing() 方法，如果对话框当前可见，该方法应该返回。

```
public AlertDialog myDialog;

public void showDialog(Context context) {
    if( myDialog != null && myDialog.isShowing() ) return;

    AlertDialog.Builder builder = new AlertDialog.Builder(context);
    builder.setTitle("Title");
    builder.setMessage("Message");
    builder.setPositiveButton("ok", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int arg1) {
                dialog.dismiss();
            }});
    builder.setCancelable(false);
    myDialog = builder.create();
    myDialog.show();
  } 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-24T08:07:19.253

如果显示对话框，您可以创建一个设置为 true 的全局标志（布尔值）？如果用户单击“确定”、“是”、“否”或任何内容，则对话框关闭并且您将标志设置为 false。

所以像：

```
boolean dialogShown;

If(dialogShown)
{
  return;
}
else
{
  dialogShown = true;
  dialog =  new AlertDialog.Builder(context);              
  dialog.show();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T08:06:09.003

每次按下按钮，您都会调用该方法。所以这就是它被多次显示的原因。

最简单的方法是在您的代码类中定义一个实例变量，例如：

```
boolean alertIsBeingShown = false; 
```

然后在像这样显示警报时将其设置为 true

```
button.setOnClickListener(new OnClickListener() {
           @Override
        public void onClick(View v) {
               if (alertIsBeingShown) return;
               alertIsBeingShown = true;
               dialog =  new AlertDialog.Builder(context);              
               dialog.show();

    }
 }); 
```

并在代码中将变量设置为 false，您可以在其中按 OK 使其消失。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T08:06:35.320

为其创建一个肯定或否定按钮，然后将其称为 OK 并使用它来关闭。就像是 ：

```
AlertDialog.Builder builder = new AlertDialog.Builder(this);
builder.setMessage("Look at this dialog!")
       .setCancelable(false)
       .setPositiveButton("OK", new DialogInterface.OnClickListener() {
           public void onClick(DialogInterface dialog, int id) {
                //do things
           }
       });
AlertDialog alert = builder.create();
alert.show(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-08T12:38:29.597

当我遇到这个问题时，我无法使用标志。我必须在 RecyclerView 中为单击的列表项显示一个对话框。

在**onclick 方法**中，我为对话框创建了一个变量，然后在构建对话框时，我用 if 语句将其括起来，该语句检查 AlertDialog 变量是否为空。当用户第一次点击列表项时出现对话框，因为该变量为空，即使用户点击一个项目两次也只会出现一个对话框，因为第二次点击后AlertDialog变量不再为空。当用户关闭 AlertDialog 时，变量再次设置为 null。

```
AlertDialog alertDialog;

if(alertDialog == null) {

            alertDialog = new AlertDialog.Builder(MyActivity.this)
                    .setTitle("Title for Dialog")
                    .setMessage("Dialog Message")
                    .setPositiveButton("Okay", null)
                    .setNegativeButton("No", null)
                    .setOnDismissListener(new DialogInterface.OnDismissListener() {
                        @Override
                        public void onDismiss(DialogInterface dialogInterface) {

                            alertDialog = null;

                        }
                    })
                    .show();
        } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-02-21T02:55:38.303

```
boolean dialogShown;

if (!dialogShown) {

  dialogShown = true;
  dialog =  new AlertDialog.Builder(context);  
  dialog .setNegativeButton(...)
  dialog .setCancelable(false);
  dialog.show();
} 
```

内部否定点击：

```
dialogShown=false; 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-06-13T09:57:52.340

在 try-catch-block 中创建对话框，如下所示：

```
 try {
        dialog.setVisible(true);
    } catch (NullPointerException e) {
        dialog =  new AlertDialog.Builder(context);              
        dialog.show();
    } 
```

第一次执行此操作时，会引发 NullPointerException 并创建对话框。在接下来的时间里，什么都不会真正发生。

# android - 如何在不点击广告的情况下获取 Admob 网址？

> ID：12560934
> 
> 赞同：2
> 
> 时间：2012-09-24T07:54:59.603
> 
> 标签：android, admob

我想在不点击的情况下获取广告网址。

在admob中可以吗？？

我尝试了各种来源，但无法得到答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T09:03:56.303

在 logcat 中，您可以看到广告是从哪个地址获取的。也许这可能是一个小费。

# sql - 每天多个条目，转换为每天和每天的平均值

> ID：12560935
> 
> 赞同：2
> 
> 时间：2012-09-24T07:55:06.890
> 
> 标签：sql

在 SQL 中，3 个表连接在一起，检索 3 个值：`value`, `time`, `value_name`. 值是我想要按天平均的值，`time`大约 10 分钟的日期时间格式 - 我希望它每天转换，每天产生一行 - 我的 value_name 女巫可以是任何选定的值。

这是我的语法：

```
select time.entry_time, value_type.value_name, 
       avg(value.value) AVG_VALUE
FROM Value
inner join time on value.time_id = time.id
inner join value_type on value.type_id = value_type.id
WHERE value_type.value_name = 'CUSTOM'
GROUP BY DATEPART(DAY, time.entry_time) 
```

在这里我得到一个错误：

> 选择列表中的列`time.entry_time`无效，因为它既不包含在聚合函数中，也不包含在`GROUP BY`子句中。

你能帮我用这个语法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T08:02:06.273

两个问题：

1.  您选择`time.entry_time`，但正在分组`DATEPART(DAY, time.entry_time)`。你想要哪个入场时间？您的意思是改为选择`DATEPART(DAY, time.entry_time)`吗？

2.  您没有按 分组`value_type.value_name`。您需要将此添加到`GROUP BY`子句中。（是的，即使只有一个值“CUSTOM”）。

尝试：

```
select DATEPART(DAY, time.entry_time), value_type.value_name, 
       avg(value.value) AVG_VALUE
FROM Value
inner join time on value.time_id = time.id
inner join value_type on value.type_id = value_type.id
WHERE value_type.value_name = 'CUSTOM'
GROUP BY DATEPART(DAY, time.entry_time), value_type.value_name 
```

# java - 在本地和网络打印机中打印 Jasper 报告

> ID：12560940
> 
> 赞同：1
> 
> 时间：2012-09-24T07:55:23.007
> 
> 标签：java, printing

我有一个使用 Struts2 框架运行的 Web 应用程序。要求是

一个。用户执行各种交易。湾。每笔交易都需要打印。C。每个事务都有一个附加的 jrxml（使用属性文件配置）。d。一旦用户完成交易，打印应该会无缝进行。

可以通过两种方式进行打印。1\. 如果为该特定用户和交易配置了网络打印机，则将在该特定网络打印机中触发打印。2\. 如果为用户配置了本地打印机（连接到桌面），则应在其本地打印机中进行打印。

我已经使用 Java Print Services 实现了第一部分（网络）打印。但需要围绕当地印刷要求的解决方案。对于本地打印，一旦用户完成 txn，报告应打印到他的本地打印机，无需任何用户干预。用户可能在他的本地机器上安装了不止一台打印机，基于 txn 类型的路由将发生在适当的本地打印机上。我一直在寻找使用 JavaScript 的选项，但没有得到明确的解决方案，不希望使用任何弹出窗口或 iframe。

任何帮助或建议都会有很大帮助。

# jquery - Insert and Load Record using jQuery and Ajax

> ID：12560941
> 
> 赞同：0
> 
> 时间：2012-09-24T07:55:27.637
> 
> 标签：jquery, ajax

I'm trying to learn jQuery and Ajax and have found a great tutorial to insert and load records.

[The tutorial](http://www.9lessons.info/2009/05/insert-and-load-record-using-jquery-and.html)

But I have not managed to make it load records when I refresh the page. The comments that I have added are stored on the database but they are not displayed when I refresh the page.

Anyway I can make display the inserted records?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T08:02:47.533

three way to set record after insert.

1.  after insert record, **return inserted record and append in list.**

2.  after insert record, **just get value text box and add in list.**

3.  after insert record, **list return and add to list or div.**

# php - $totalCorrect++ 不适用于 $_SESSION

> ID：12560950
> 
> 赞同：0
> 
> 时间：2012-09-24T07:56:11.927
> 
> 标签：php, session, post, count

我正在尝试通过填写一些测验来获得分数。但是，我正在使用 SESSIONS 并且我的分数数据不会总结。我看到一个 3 出现了，但是有 6 个问题，每个好的答案都值得 3 分。因此，如果所有答案都正确，总分应该是 18。

有人可以告诉我如何解决这个问题吗？

QUIZ.PHP

```
<?php
session_start();

$_SESSION["vraag1_antwoorden"] = $_POST["vraag1_antwoorden"];
$_SESSION["vraag2_antwoorden"] = $_POST["vraag2_antwoorden"];
$_SESSION["vraag3_antwoorden"] = $_POST["vraag3_antwoorden"];
$_SESSION["vraag4_antwoorden"] = $_POST["vraag4_antwoorden"];
$_SESSION["vraag5_antwoorden"] = $_POST["vraag5_antwoorden"];
$_SESSION["vraag6_antwoorden"] = $_POST["vraag6_antwoorden"];
?> 
```

结果.PHP

```
<?php
session_start();

$answer1 = $_SESSION['vraag1_antwoorden'];
$answer2 = $_SESSION['vraag2_antwoorden'];
$answer3 = $_SESSION['vraag3_antwoorden'];
$answer4 = $_SESSION['vraag4_antwoorden'];
$answer5 = $_SESSION['vraag5_antwoorden'];
$answer6 = $_SESSION['vraag6_antwoorden'];

$totalCorrect = 0;

if ($answer1 == "A") { $totalCorrect += 3;}
if ($answer2 == "C") { $totalCorrect += 3;}
if ($answer3 == "C") { $totalCorrect += 3;}
if ($answer4 == "C") { $totalCorrect += 3;}
if ($answer5 == "B") { $totalCorrect += 3;}
if ($answer6 == "C") { $totalCorrect += 3;}    

echo $_SESSION['totalcorrect'] = $totalCorrect;

session_destroy();
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T08:04:03.703

看起来您需要在使用它之前从会话中对其进行初始化（当前每个页面都从 0 开始）：

目前您有：

```
$totalCorrect = 0; 
```

但是如果你使用：

```
$totalCorrect = $_SESSION['totalcorrect']; 
```

它将跨越页面。

最后，将其回显为：

```
echo $totalCorrect; 
```

另外，我不确定您为什么甚至为此变量使用会话 - 它似乎只在最后一页中使用 - 那么为什么要使用会话变量呢？

# java - 如何同时驱动 JTA (Bitronix) 和 XADisk

> ID：12560956
> 
> 赞同：0
> 
> 时间：2012-09-24T07:56:30.217
> 
> 标签：java, transactions, jta

我们有一个 J2SE 应用程序（我们将它部署为一个独立的 JAR），它是一个基于 Jetty 的 Web 服务，使用了 JPA (EclipseLink) 和 JTA (Bitronix, UserTransaction)。如您所料，这个应用程序的主要目的是接收 REST 请求、处理、存储和提供数据给 http 客户端。

在处理请求时，有时我们会在 fs 上生成文件。遗憾的是，这个过程超出了我们 JTA 配置的范围。我的任务是将文件生成绑定到 JTA 事务，例如。在 utx.rollback() 时，我必须回滚文件处理，并且在 utx.commit() 成功后，我也必须提交 fs 更改。

我的学长建议我使用 XADisk ( [http://xdisk.java.net/](http://xadisk.java.net/) )。看起来很有前途！我做了一些示例阅读，但我仍然对如何将其引入我们的应用程序感到有些困惑。所以我的问题是：谁能给我一些关于如何将这个库实现到 JTA 应用程序中的指南？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T09:12:48.133

继续寻找文档，我发现了一些信息：

[跟踪问题](http://java.net/jira/browse/XADISK-67)

[XADisk 用户指南](http://java.net/downloads/xadisk/XADisk%201.2%20User%20Guide.pdf)

后者包含标题为“将 XADisk 加入 JTA 事务”的章节

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-06-04T16:37:08.183

我使用过 XaDisk，我对回滚管理感到非常失望。

见文档：

此异常是当事务无法继续其工作并处于不一致的不完整状态时引发的未经检查的异常。也就是说，事务没有提交或回滚，需要管理干预来解决不一致，然后将事务标记为完成。事务可能在常规 XADisk 操作期间或在 XADisk 的恢复阶段失败。对于常规情况，事务将继续持有文件/目录的锁（在内存中），直到它被标记为完成。

这意味着这个库实际上并没有做任何事情来扭转已经创建/删除的内容等......

很没用

# android - 如何在我的 android 应用程序中使用 ScreenShotClient

> ID：12560957
> 
> 赞同：2
> 
> 时间：2012-09-24T07:56:36.207
> 
> 标签：android, android-ndk, java-native-interface, screenshot

我正在开发一个应用程序，它可以帮助用户捕获 android 屏幕截图 (Android 4.x)。我知道帧缓冲区在 android ICS 上已损坏。我听说我们可以使用 ScreenShotClient 来执行此操作，如下所示。

```
ScreenshotClient screenshotClient = new ScreenshotClient();
screenshotClient->update(); 
```

但是，我必须导入什么库才能使用它？是否可以在 jni 代码下使用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-28T19:46:15.063

您需要的库称为**libsurfaceflinger_client.so**。~~您可以使用命令从任何运行 Gingerbread或更高~~版本 Android 的设备中提取它

```
adb pull /system/lib/libsurfaceflinger_client.so 
```

在 ICS 或 JB 上，类**ScreenshotClient**是`libgui.so`. screencap 的 makefile 是使用**ScreenshotClient**的示例，表明链接器可能需要其他库：

```
libcutils libutils libbinder libskia libui libgui 
```

此外，代码`screencap.cpp`如下：

```
ScreenshotClient screenshot;
if (screenshot.update() == NO_ERROR) {
    base = screenshot.getPixels();
    w = screenshot.getWidth();
    h = screenshot.getHeight();
    f = screenshot.getFormat();
    size = screenshot.getSize();
} else {
    const char* fbpath = "/dev/graphics/fb0";
    int fb = open(fbpath, O_RDONLY);
    if (fb >= 0) {
        struct fb_var_screeninfo vinfo;
        if (ioctl(fb, FBIOGET_VSCREENINFO, &vinfo) == 0) {
... 
```

这意味着至少您必须检查 update() 是否成功。不幸的是，除非设备被植根，否则无法授予应用程序读取`/dev/graphics/fb0`和使用`/system/bin/screencap`or的后备的权限`/system/bin/screenshot`。

# android - 警报需要在android的前屏幕上弹出

> ID：12560960
> 
> 赞同：0
> 
> 时间：2012-09-24T07:56:46.003
> 
> 标签：android, android-alertdialog, reminders

在我的任务中，我执行了提醒检查过程。如果提醒时间等于当前时间，它将弹出一个弹出框。在此任务中，弹出框正确出现。

但是如果我将此任务合并到某个大进程中，这意味着提醒任务将是主程序的子程序。弹出窗口没有出现在其他屏幕中。如果时间符合当前时间，则在用户使用本程序中的任何屏幕时，必须向用户显示警报。

```
if (LDbTime <= LSysTime) {
                                    rem_id = c.getString(c.getColumnIndex("reminder_id"));
                                    remName = c.getString(c.getColumnIndex("rname"));
                                    mediaPlayer.start();
                                    handler.post(new Runnable(){
                                    public void run() {
                                        alert.setTitle("Alert :"+remName);
                                        alert.setPositiveButton("OK", new DialogInterface.OnClickListener() {
                                            public void onClick(DialogInterface dialog, int whichButton) {
                                                mediaPlayer.pause();
                                            }
                                        });
                                        alert.show();
                                        db1.execSQL("UPDATE RemainAlarmS SET expired ='TRUE' WHERE reminder_id = " + rem_id );
                                            }
                                        });
                                    Thread.sleep(5000);
                                } 
```

在此警报消息中，需要在提醒唤醒时为前屏显示。

请帮我找到解决方案..

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T07:17:04.013

如果您试图询问当您的活动不是用户手机上的重点活动时如何显示对话框，请尝试使用通知。当用户可能正在做其他事情时，在不同的应用程序上弹出一个对话框会打断用户。来自 Android UI 指南：

```
Use the notification system — don't use dialog boxes in place of notifications

If your background service needs to notify a user, use the standard notification system — 
don't use a dialog or toast to notify them. A dialog or toast would immediately 
take focus    and interrupt the user, taking focus away from what they were doing: 
the user could be in the middle of typing text the moment the dialog appears 
and could accidentally act on the dialog. 
Users are used to dealing with notifications and 
can pull down the notification shade at their convenience to respond to your message. 
```

创建通知的指南在这里：http: [//developer.android.com/guide/topics/ui/notifiers/notifications.html](http://developer.android.com/guide/topics/ui/notifiers/notifications.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T05:12:36.123

您可以将以下代码用于待定意图。

```
Intent i = new Intent("android.intent.action.DA");
PendingIntent operation = PendingIntent.getActivity(getBaseContext(), 0, i, Intent.FLAG_ACTIVITY_NEW_TASK);
AlarmManager alarmManager = (AlarmManager) getBaseContext().getSystemService(ALARM_SERVICE);
GregorianCalendar calendar = new GregorianCalendar(y,m,d, hr, mi);
long alarm_time = calendar.getTimeInMillis();
alarmManager.set(AlarmManager.RTC_WAKEUP  , alarm_time , operation); 
```

而“android.intent.action.DA”表示DisplayNotification.java类的Activity

```
public class DisplayNotification extends Activity {
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    int notifID = getIntent().getExtras().getInt("NotifID");
    Intent i = new Intent("android.intent.action.AD");
    i.putExtra("NotifID", notifID);  
    PendingIntent detailsIntent =PendingIntent.getActivity(this, 0, i, 0);
    NotificationManager nm = (NotificationManager)getSystemService(NOTIFICATION_SERVICE);
    Notification notif = new Notification(R.drawable.ic_launcher,"Time's up!",System.currentTimeMillis());
    CharSequence from = "AlarmManager - Time's up!";
    CharSequence message = "This is your alert, courtesy of the AlarmManager";        
    notif.setLatestEventInfo(this, from, message, detailsIntent);
    notif.vibrate = new long[] { 100, 250, 100, 500};        
    nm.notify(notifID, notif);
    finish();
}
} 
```

而“android.intent.action.AD”表示AlarmDetails.java类

```
public class AlarmDetails extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.alarmdetails);

    NotificationManager nm = (NotificationManager) 
            getSystemService(NOTIFICATION_SERVICE);
        //---cancel the notification---
        nm.cancel(getIntent().getExtras().getInt("NotifID")); 
}

} 
```

我希望这能帮到您！..

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-24T09:00:17.847

您可以改用状态栏通知。

# java - 如何从 xsd 创建一个 jar 文件

> ID：12560962
> 
> 赞同：4
> 
> 时间：2012-09-24T07:56:48.683
> 
> 标签：java, jar, xsd

*如何创建`jar`包含从给定文件生成的类文件的`xsd`文件*？
我们是否需要创建所有的 java 文件`xsd`，然后需要编译和创建一个`jar`？
或者，还有其他解决方案。

谁能解释一下这个过程？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-06-25T17:56:45.343

如果不使用mavne生成jar，可以使用以下步骤-

1.  将你的 xsd 复制到一个文件夹中。- 例如 Test.xsd

2.  从命令提示符转到文件夹并使用命令-

    **xjc测试.xsd**

或者你可以使用 xjc -p --package name--

**xjc -p 测试测试.xsd**

这将从 xsd 创建所有 java 文件，在名为 generate(default) 的文件夹中或在工作文件夹中进行测试。

1.  从命令提示符使用 -

    **javac 生成/***

    这将创建所有生成的 java 文件的类文件。

2.  最后，在命令提示符下，使用

    **jar cvf test.jar 生成/***

    这将创建包含所有类的 jar。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T08:16:35.023

我猜您正在尝试从 XSD 创建 Java 类以进行进一步的 XML<->POJO 映射。我对吗？

如果是这样 - 这取决于您使用的映射库。假设您使用的是 JAXB 2。最简单的方法是使用 XJC Maven 插件，如下所示：http: [//mojo.codehaus.org/xjc-maven-plugin/usage.html](http://mojo.codehaus.org/xjc-maven-plugin/usage.html)，然后 Maven 会将所有内容打包到 JAR 中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T08:07:26.883

1.  将您的 xsd 文件放在某个目录中（例如，将其称为资源）

2.  在命令行中导航到资源目录所在的目录。

3.  运行`jar cf jar-file %input-file_name%` （在您的情况下，输入文件名是“资源”）

[在这里](http://docs.oracle.com/javase/tutorial/deployment/jar/build.html)阅读更多。

我相信有更优雅的方式来发布静态内容（xsd 就是这样）但是，您不想透露您的目标，这就是您创建 jar 的方式。

祝你好运！

# python - 用户使用 Flask 生成 Jinja 2 模板

> ID：12560963
> 
> 赞同：6
> 
> 时间：2012-09-24T07:56:49.960
> 
> 标签：python, flask, jinja2

我正在编写一个 Web 应用程序，用户可以在其中创建自己的设计。最简单的方法是允许他们上传自己的 Jinja 2 模板。但是，我担心安全性。

我应该注意哪些事情？我应该为此设置自定义 Jinja 2 环境吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T08:59:02.747

它不仅可以让人们添加任何 Javascript 代码，还可以在服务器上执行几乎任何 Python 代码。请查看[http://jinja.pocoo.org/docs/sandbox/](http://jinja.pocoo.org/docs/sandbox/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T08:28:09.140

如果您允许用户上传任意 jinja2 模板，则您允许他们任意 html 和 javascript，从而成为网络托管公司，并承担所有后果。

您还必须小心您授予他们访问权限的变量，以便私有用户数据（如果有）彼此分开。

# entity-framework - 实体类型不是模型的一部分，EF 5

> ID：12560966
> 
> 赞同：6
> 
> 时间：2012-09-24T07:56:59.447
> 
> 标签：entity-framework, dbcontext, entity-framework-5

我正在尝试将我的存储库更新到 EF5，但遇到了一些错误。我查看了 stackoverflow 的类似错误，发现了一些问题/答案，但不幸的是，相同的答案并没有解决我的问题。

这是我的错误：

```
The entity type User is not part of the model for the current context.

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 
```

这是我的 DbContext 类：

```
public abstract class WebModelContext : DbContext
{
    public WebModelContext()
        : base("WebConnection")
    {
        Configuration.LazyLoadingEnabled = true;
    }
} 
```

这是继承我的类的上下文`WebModelContext`类：

```
public class AccountContext : WebModelContext
{
    private DbSet<User> _users;

    public AccountContext()
        : base()
    {
        _users = Set<User>();
    }

    public DbSet<User> Users
    {
        get { return _users; }
    }
} 
```

这是我的存储库类：

```
public abstract class IRepository<T> : IDisposable where T : WebModelContext, new()
{
    private T _context;

    protected T Context
    {
        get { return _context; }
    }

    public IRepository() {
        _context = new T();
    }

    public void Dispose()
    {
        Dispose(true);
        GC.SuppressFinalize(this);
    }

    ~IRepository() 
    {
        Dispose(false);
    }

    protected virtual void Dispose(bool disposing)
    {
        if (disposing) 
        {
            if (_context != null)
            {
                _context.Dispose();
                _context = null;
            }
        }
    }

} 
```

这是我的 AccountRepository 类：

```
public class AccountRepository : IRepository<AccountContext>
{
    public List<User> GetUsers()
    {
        return Context.Users.ToList();
    }

    public User GetUser(string username)
    {
        return Context.Users.Where(u => u.Name == username).FirstOrDefault();
    }

    public User CreateUser(string username, string password, string salt, int age, int residence)
    {
        User user = new User
        {
            Name = username,
            Password = password,
            Salt = salt,
            RoleId = 1,
            CreatedOn = DateTime.Now,
            Locked = false,
            Muted = false,
            Banned = false,
            Guid = Guid.NewGuid().ToString("N")
        };
        Context.Users.Add(user);
        return Context.SaveChanges() > 0 ? user : null;
    }
} 
```

非常感谢任何帮助:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T08:33:13.617

EF 可能无法获取您声明的实体类型。覆盖`OnModelCreating`并将`User`实体添加到模型。

```
public class AccountContext : WebModelContext
{
    private DbSet<User> _users;

    public AccountContext()
        : base()
    {
        _users = Set<User>();
    }

    public DbSet<User> Users
    {
        get { return _users; }
    }

    protected virtual void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<User>();
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T19:36:59.330

我在使用 EF 5 时遇到了同样的问题……我所做的是删除所有由 tt 文件创建的文件并重新创建它们……一切都恢复正常了！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-07T10:13:13.207

Your table model name is wrong. set the correct name when sates in Sql server. return View(db.tblEmployees.ToList()); **error line.....**

go Model and duble click ur model name than matching with table name like (tblEmployees)

your error is solve

# php - “建立数据库连接时出错”windows azure + wordpress

> ID：12560972
> 
> 赞同：2
> 
> 时间：2012-09-24T07:57:20.333
> 
> 标签：php, wordpress, cloud, azure-sql-database

我是[http://www.netzkino.de](http://www.netzkino.de)的所有者（wordpress 网站在 azure 上运行）。

大部分工作正常，但最后，我收到消息“建立数据库连接时出错”。

我想有很多数据库查询..（每天有超过 10k 的独立访问者）。我也尝试过扩展实例但没有成功......：/

我该如何解决这个问题？有任何想法吗？

提前致谢！

此致，

丹尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T08:03:30.733

```
Daniel Schmidt Check wp-config.php file. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T08:06:31.120

到目前为止，您的站点运行良好，没有错误，但是我遇到了您的问题，有时在托管维护时会发生数据库问题...![在此处输入图像描述](../Images/c133bc88114162ca264798fa4197987e.png)

# ios - 如何通过拖动图像视图的右角来调整图像视图的大小和旋转

> ID：12560973
> 
> 赞同：0
> 
> 时间：2012-09-24T07:57:36.333
> 
> 标签：ios, uiimageview, rotation, image-resizing, uipangesturerecognizer

您好我有一个要求，我需要通过拖动图像视图的右上角来调整和旋转图像视图。

我可以通过拖动它的角成功地调整图像视图的大小，但是当我尝试用一​​根手指为图像视图实现调整大小和旋转功能时失败了。

任何人都可以指导我实现我的要求。

我添加了下面的代码，用于从角边缘调整图像视图的大小。

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{
UITouch *touch = [[event allTouches] anyObject];
touchStart = [[touches anyObject] locationInView:self];
isResizingLR = (self.bounds.size.width - touchStart.x < kResizeThumbSize && self.bounds.size.height - touchStart.y < kResizeThumbSize);
isResizingUL = (touchStart.x <kResizeThumbSize && touchStart.y <kResizeThumbSize);
isResizingUR = (self.bounds.size.width-touchStart.x < kResizeThumbSize && touchStart.y<kResizeThumbSize);
isResizingLL = (touchStart.x <kResizeThumbSize && self.bounds.size.height -touchStart.y <kResizeThumbSize); 
```

}

```
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event{
CGPoint touchPoint = [[touches anyObject] locationInView:self];
CGPoint previous=[[touches anyObject]previousLocationInView:self];

float  deltaWidth = touchPoint.x-previous.x;
float  deltaHeight = touchPoint.y-previous.y;

if (isResizingLR) {
    self.frame = CGRectMake(self.frame.origin.x, self.frame.origin.y,touchPoint.x + deltaWidth, touchPoint.y + deltaWidth);
}  
if (isResizingUL) {
    self.frame = CGRectMake(self.frame.origin.x + deltaWidth, self.frame.origin.y + deltaHeight, self.frame.size.width - deltaWidth, self.frame.size.height - deltaHeight);
} 
if (isResizingUR) {
    self.frame = CGRectMake(self.frame.origin.x ,self.frame.origin.y + deltaHeight,  self.frame.size.width + deltaWidth, self.frame.size.height - deltaHeight);      
} 
if (isResizingLL) {
    self.frame = CGRectMake(self.frame.origin.x + deltaWidth ,self.frame.origin.y ,  self.frame.size.width - deltaWidth, self.frame.size.height + deltaHeight);   
}

if (!isResizingUL && !isResizingLR && !isResizingUR && !isResizingLL) {
    self.center = CGPointMake(self.center.x + touchPoint.x - touchStart.x,self.center.y + touchPoint.y - touchStart.y);
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T11:37:54.023

嗨，通过[此](http://www.cocoacontrols.com/platforms/ios/controls/spuserresizableview)`UIImageView`代码示例调整大小

试试这个 ...

我希望它会帮助你...

试试这个旋转...

```
self.imgViewForBend.layer.anchorPoint = CGPointMake(0.0,1.0);
self.imgViewForBend.layer.position = CGPointMake(200,300.0);
CGAffineTransform cgaRotateHr = CGAffineTransformMakeRotation(-(3.141/4));
[self.imgViewForBend setTransform:cgaRotateHr]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T08:11:15.093

没有任何代码我会想到这样的事情......

当触摸开始时，存储您正在编辑的图像的起点和中心点。（所有点都相对于图像的 superView）。

然后比例是相对于触摸到中心点的距离（使用毕达哥拉斯）。

此外，您将知道从中心点到原始触摸线的角度（使用三角法）。您可以根据起始角度和当前角度之间的差异来更改图像的角度。

我还将从触摸移动和触摸开始功能中取出逻辑。制作一个 calculateRotation 函数和一个 calculateScale 函数来提供帮助。

不过暂时无法编码。

# maven - 如何用maven添加更多的源码目录，让eclipse/intellij idea实现源码目录？

> ID：12560974
> 
> 赞同：3
> 
> 时间：2012-09-24T07:57:38.493
> 
> 标签：maven

我试过build-helper-maven-plugin，但它只在通过maven命令编译时生效，ide无法识别插件设置的源目录。

# python - 为什么我在 python 中收到此错误？httplib.BadStatusLine

> ID：12560975
> 
> 赞同：0
> 
> 时间：2012-09-24T07:57:47.830
> 
> 标签：python, service

> **可能重复：**
> [为什么我在 python 中收到此错误？(httplib)](https://stackoverflow.com/questions/1767934/why-am-i-getting-this-error-in-python-httplib)

我在 python 中编码有一些问题，我想在本地 python 服务中使用 abyssws python 创建 Web 服务，但是我无法收到响应..而当我从浏览器请求时得到响应..

我的代码是这样的：

```
import httplib
IP = "local ip"
v_params = ""
conn = httplib.HTTPConnection(IP,8021)
conn.request("GET", v_params)
response = conn.getresponse() 
data_response = response.read() 
```

并得到类似的错误

```
Traceback(most recent call last):
File "C:\Python24\lib\httplib.py", line 866, in getresponse
   response.begin()
File "C:\Python24\lib\httplib.py", line 336, in begin
 version, status, reason = self._read_status()
File "C:\Python24\lib\httplib.py", line 300, in _read_status
 raise BadStatusLine(line)
httplib.BadStatusLine 
```

有什么建议吗？请帮帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T07:59:38.157

您连接的服务器未发送正确的 HTTP 响应行。这样的响应应该包含一个数字，后跟一个人类可读的文本描述，例如：

```
200 Ok 
```

或者

```
404 Not Found 
```

您需要验证端口 8021 上的服务器发送的内容。尝试`telnet IP 8021`从终端使用，然后输入类似`GET / HTTP/1.1`加两个换行符的内容以查看服务器返回的内容。

我注意到你的`v_params`字符串是空的；可能是您的服务器至少需要空路径 ( `/`)。但是，在这种情况下不发送格式正确的错误代码仍然违反了 HTTP 标准。

# c# - GetWeekOfYear 返回 2 而它应该为日期 02.01.2012 返回 1

> ID：12560978
> 
> 赞同：1
> 
> 时间：2012-09-24T07:58:06.393
> 
> 标签：c#, datetime, week-number

为什么下面的伪代码返回 2 作为周数？不应该是1吗？

```
string x = cal.GetWeekOfYear(02.01.2012 as datetime, cultureInfo.currentculture.DateTimeFormat.CalendarWeekRule, CultureInfo.CurrentCulture.DateTimeFormat.FirstDayOfWeek).toString(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T08:10:42.283

你说你当前文化的[CalendarWeekRule](http://msdn.microsoft.com/en-us/library/system.globalization.calendarweekrule.aspx)是`FirstDay`，它被定义为（强调我的）：

> 表示一年中的第一周从一年的第一天开始，*在下一个指定的一周的第一天之前结束*。

你还说你一周的第一天是星期一。

2012 年 1 月 1 日是星期日，第一周从那天开始。由于您一周的第一天是星期一，因此第一周在下一个星期一之前结束，即星期日本身。

因此，在您的文化设置下，2012 年 1 月 2 日确实是第 2 周的第一天。

# java - java.lang.unsatisfiedlink错误。在 Eclipse 中为 android 应用程序添加 .so 文件的位置

> ID：12560983
> 
> 赞同：1
> 
> 时间：2012-09-24T07:58:49.200
> 
> 标签：java, android, jar, java-native-interface

我已经`.so`使用 android NDK 创建了文件。在 xxx.java 类中，我添加了一些从 c/c++ 文件调用的本地方法。我在自己的方法中调用这些本机方法，例如如下所示，

```
static
    {
    System.loadLibrary("print");
    }
    public native String print(String pM,int len);
    public native int openPrint(); 
```

以上本机方法在我的方法中调用，以便其他 android 应用程序开发人员可以将其用作 API。

```
public static void foo(){

         openPrint()
    } 
```

这是正确的方法吗？

出于这个原因，我创建了一个`myprint.Jar`文件。它还包括该`libprint.so`文件。

我在另一个应用程序中添加了上面的 jar 文件，它正在从 xxx.java 导入类，但是每当我尝试运行应用程序时，它都会抛出一个错误，说

```
 FATAL Exception,
  java.lang.UnsatisifiedLinkerror.... 
```

如何解决上述问题？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T08:00:58.507

需要将`libprint.so`其放在 libs 文件夹中，然后使用以下命令加载：

```
System.loadLibrary("print"); 
```

可能是`java.lang.UnsatisfiedLinkError`因为 c 函数名称与您的 java 类的完全限定名称不匹配。
我建议按照这个链接： http: [//mindtherobot.com/blog/452/android-beginners-ndk-setup-step-by-step/](http://mindtherobot.com/blog/452/android-beginners-ndk-setup-step-by-step/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T11:23:57.977

.so 文件应该放在 eclipse 的 libs-->armeabi-->xxx.so 文件夹中。然后在 Eclipse 中创建 build.properties 文件并通过这样做提及 xxx.so 文件的路径

```
open build.properties file. 

   then click on Add Library button. 

   then one edit box will appear write below line in the edit box.

external.libs.dir=libs 
```

# c# - asp.net C# 操作可能会破坏运行时的稳定性

> ID：12560986
> 
> 赞同：4
> 
> 时间：2012-09-24T07:58:57.090
> 
> 标签：c#, asp.net-mvc

我在我们正在做的 ASP.NET C# MVC 项目中遇到问题。

我们使用 .NET Framework 4.0 进行开发，最近我将 Visual Studio 升级到 2012（其他人都在使用 2010），现在它停止工作了。现在在某些地方我得到了错误：

```
Operation could destabilize the runtime. 
```

我发现有人说这与 .NET 4.5 与 Visual Studio 2012 一起安装有关，但我还没有找到解决我的问题的方法。它抱怨的代码行如下所示：

```
var companyModel = from c in db.Company select c;
return View(companyModel.ToPagedList(page, 10)); 
```

这段代码有什么问题？公司模式成为

```
System.Linq.IQueryable<Company> 
```

我尝试添加

```
companyModel.OfType<Company>(); 
```

在这两行之间，但它也不起作用（来自[Operation 的想法可能会破坏运行时的稳定性？](https://stackoverflow.com/questions/378895/operation-could-destabilize-the-runtime)）

Visual Studio 2010 一切正常。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T08:00:52.867

获取最新版本的 PagedList，应该可以修复它。我有同样的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-30T15:34:49.100

您听到的是正确的，安装 VS2012 会安装覆盖 .Net 4.0 的 .Net 4.5。如果您没有进行其他 Windows 更新（即 .Net 4.5 更新），这可能与框架中的错误有关。

请参阅此修补程序：http: [//support.microsoft.com/kb/2748645](http://support.microsoft.com/kb/2748645)

更新的第 3 方代码可能利用了其中一种变通方法。

您可能想了解 .Net 4.5 是对 .Net 4.0 的就地升级的人们的困境。如果您的整个团队没有升级到 VS2012（并且您的目标是 .Net 4.0 框架），您可能需要考虑回滚您的机器，而不是升级到 VS2010。

它可能不适用于您的 MVC 应用程序，但如果您现在拥有 .Net 4.5，则在为客户端环境开发任何应用程序时要小心。无论 Visual Studio 告诉您什么，您都不再“以”.Net 4.0 为目标。

[如果安装了 .Net 4.5，如何保持 .Net 4.0 的行为？](https://stackoverflow.com/questions/11458159/how-to-keep-net-4-0-behavior-if-net-4-5-is-installed "如果安装了 .Net 4.5，如何保持 .Net 4.0 的行为？")

[是否可以在 XP 上运行 .net 4.5 应用程序？](https://stackoverflow.com/questions/17499351/is-it-possible-to-run-a-net-4-5-app-on-xp "是否可以在 XP 上运行 .net 4.5 应用程序？")

[Visual Studio 2012 中的 Visual C# 重大更改](http://msdn.microsoft.com/en-us/library/hh678682(v=vs.110).aspx "Visual Studio 2012 中的 Visual C# 重大更改")

# drupal - 如何通过分类菜单在菜单上显示分类图像字段

> ID：12560989
> 
> 赞同：0
> 
> 时间：2012-09-24T07:59:07.697
> 
> 标签：drupal, menu, taxonomy, imagefield

我在我的页面的主站点上制作了一个需要一种图形菜单的网站，其中必须是带有 Imagen 的站点的所有类别（只是图像和类别名称）。

显然我使用分类法来做到这一点。

我已经添加了所有分类术语并在分类术语上添加了图像字段“Imagen”。

但。我不知道如何像[http://www.digital-2000.com/](http://www.digital-2000.com/)在这里显示它们（中心的类别及其图像）。

我试图使用视图，但我无法对分类做任何事情。我不知道该怎么做，我在谷歌寻找一个没有运气的解决方案（找不到明确的答案）。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T13:42:38.487

创建新视图时，可以从“显示”下拉菜单中选择“分类术语”。然后从“类型”下拉列表中，您可以选择您的词汇。

取消选中“创建页面”并选中“创建块”。

现在您应该能够访问您的分类术语的所有字段（包括您的“imagen”字段）并从中构建一个菜单。

然后，您可以使用上下文或阻止设置将您的分类菜单放在您的网站上。

# jquery - 使用没有数据库的 jquery/ajax 添加和显示最喜欢的名字列表

> ID：12560992
> 
> 赞同：1
> 
> 时间：2012-09-24T07:59:26.987
> 
> 标签：jquery, ajax, dynamic

使用我的网站，人们可以搜索世界上的任何名字。用户可以将他们的特定名称添加到收藏列表。每个用户都可以在另一个页面中看到他们最喜欢的名称列表（用户在一个会话中添加的名称）。你能建议一个使用 jquery/ajax 的最佳方法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T09:00:24.673

您可以使用[本地存储](http://www.w3.org/TR/webstorage/#the-localstorage-attribute)来保存数据。它就像这样简单：

```
localStorage.setItem('key', 'value');
localStorage.getItem('key'); // returns 'value' 
```

您可以使用递增键保存名称：

```
localStorage.setItem('name-' + (localStorage.length + 1).toString(), 'favName');
// Names stored as 'name-0', 'name1', ... 
```

然后，检索列表：

```
var names = new Array();

if (localStorage) {
    if (localStorage.length) {
       for (var i = 0; i < localStorage.length; i++) {
           names[i] = localStorage.getItem('name-' + i.toString());
       }
    } else {
       names[0] = 'You have no favorite names stored';
    }
} 
```

有一些插件可以在不支持网络存储的浏览器上提供回退（即使在 ie6 上），例如[totalStorage](https://github.com/jarednova/jquery-total-storage)或[jstorage](http://www.jstorage.info/)。