# StackOverflow 问答 13058000-13058999

# git - 使用 git，如果我合并一个分支然后删除该分支，单个提交是否会丢失？

> ID：13058003
> 
> 赞同：2
> 
> 时间：2012-10-24T21:25:43.487
> 
> 标签：git

在[git`merge`命令](http://www.kernel.org/pub/software/scm/git/docs/git-merge.html)的文档中，结果`git merge topic`如下所示：

```
 A---B---C topic
     /         \
D---E---F---G---H master 
```

在这种情况下，在我看来，如果我要删除`topic`以保持分支列表整洁，那么所有提交 A、B 和 C 的记录都会丢失，只留下一个提交 H（并且可能会删除所有提交消息来自 A、B 和 C）：

```
D---E---F---G---H master 
```

真的会是这样吗，如果是这样，我将如何防止它？例如：

```
D---E---F---G---A---B---C master 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-24T21:30:12.883

不，一切都会在那里。

**删除主题分支**之前：****

 **```
      A---B---C 话题
     / \
D---E---F---G---H 主控

```

**删除主题分支**后：****

 **```
      A---B---C
     / \
D---E---F---G---H 主控

```

分支只是一个指向提交 C 的指针。删除它并不会摆脱提交。

请注意，如果您尚未合并主题分支，则删除它将失败，除非您使用`git branch -D`. 该`git branch -d`命令只会删除合并的分支，它会保留所有历史记录但会删除分支名称。

**脚注：**你可以通过`git rebase master`从主题分支中获取以下历史记录，然后将master快进到主题，然后删除主题。

```
D---E---F---G---A'---B'---C'主

```

请注意，虽然这是*可能的*，但它可能是*不可取*的——原始提交 A、B 和 C 因变基而丢失。****

# python - 在python中给出2个可能的答案

> ID：13058008
> 
> 赞同：0
> 
> 时间：2012-10-24T21:25:56.183
> 
> 标签：python

我只是在用 Python 编写一个简单的问答游戏，我想知道如何给出 2 个可能的答案（python 2.7），例如。（变量）`answer = 'California' OR 'california'` ，因此变量答案可以适应用户在答案中使用上或下“C”甚至更多变量。干杯

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T21:27:39.397

```
>>> 'california' in ('California', 'california')
True 
```

但你应该先使用`.lower()`。

```
>>> 'California'.lower() in ('california', 'florida')
True 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T21:28:09.830

怎么样：

```
answers = ( 'california', 'California' )
user_answer = 'california'
user_answer in answers # returns True 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T21:46:33.623

很容易将用户的输入小写，然后将所有答案都小写，如下所示：

```
useranswer = raw_input()
if useranser.lower() == 'california':
    #yay!
else:
    #awwww... 
```

# javascript - 触发单选按钮单击并设置选中的属性问题

> ID：13058012
> 
> 赞同：1
> 
> 时间：2012-10-24T21:26:02.490
> 
> 标签：javascript, jquery, html, forms, radio-button

看看这个小提琴：http: [//jsfiddle.net/5rmEe/61/](http://jsfiddle.net/5rmEe/61/)

```
 var inputVal = false;
    //allow user to deselect a radio button by clicking a checked radiobutton
    $('input[type=radio]').each(function(){
      var inputObj = $(this);
      inputObj.click(function(e){
        if(inputVal === inputObj.val()){
          inputVal = false;
          inputObj.attr('checked', false);
        }
        else{
          inputVal = inputObj.val();
          inputObj.attr('checked', 'checked');
        }
        e.stopPropagation();
      });
    });

$('.asdf').click(function(){
    $('.haha').trigger('click');
}); 
```

请注意 asdfsdaf 跨度会触发单击单选按钮

首先，单选按钮设置为，如果您单击选中的单选按钮，它将取消选中自身（尝试一下），并且在单击单选按钮本身时有效

现在，如果您单击跨度，它将使复选框正确地检查自身，但是如果您再次单击跨度，它将不会将单选按钮设置为未选中，即使它显然执行了单击事件，理论上它应该取消选中单选由于单击事件而相应地按钮（如果您实际单击单选按钮，则此事件有效）

为什么会这样？如果使用 .trigger() 手动触发事件，attr() 方法是否不起作用？

我该如何解决这个问题，以便在选中单选按钮时单击跨度也会触发单选按钮中的取消选中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T21:31:27.803

使用`triggerHandler`而不是`trigger`.

```
$('.haha').triggerHandler('click'); 
```

这将导致处理程序被触发，而不会导致单击的默认行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T21:42:17.460

您可以通过在单击处理程序中调用来阻止默认单击操作`preventDefault()`，如下所示：

```
 inputObj.click(function(e){
        e.preventDefault(); //add this to prevent default click behaviour 
        if(inputVal === inputObj.val()){
          inputVal = false;
          ...
          ... 
```

见工作[**小提琴**](http://jsfiddle.net/gnel/5rmEe/68/)

# perl - 在 perl 中编写脚本将文件夹中的所有文件转换为另一种格式

> ID：13058023
> 
> 赞同：0
> 
> 时间：2012-10-24T21:27:00.790
> 
> 标签：perl, ascii

问题是2折：

1.  我正在编写一个 perl（不熟悉 perl）脚本，并且可以让它一次将一个文件从 csv 转换为 ascii。我想做一个循环，将文件夹中的所有 csv 转换为 ascii/txt。

2.  perl 是尝试这个的最佳语言吗？我认为是的，因为我可以一次成功地完成一个文件，但很难找到一种循环它的方法。

我试图弄清楚如何将所有文件加载到一个数组中，然后为每个文件运行循环，但是我的谷歌搜索已经达到了极限，我没有想法。这是我的工作脚本：

```
#!/usr/bin/env perl
use strict;
use warnings;
use autodie;

use open IN => ':encoding(UTF-16)';
use open OUT => ':encoding(ascii)';

my $buffer;

open(my $ifh, '<', 'Software_compname.csv');
read($ifh, $buffer, -s $ifh);
close($ifh);

open(my $ofh, '>', 'Software_compname.txt');
print($ofh $buffer);
close($ofh); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T21:41:51.547

只需将以下循环添加到您的脚本中，并将要处理的文件作为参数提供给它：

```
for my $input_file (glob shift) {
    (my $output_file = $input_file) =~ s/csv$/txt/ or do {
        warn "Invalid file name: $input_file\n";
        next;
    };

    my $buffer;

    open my $ifh, '<', $input_file;
    read $ifh, $buffer, -s $ifh;
    close $ifh;

    open my $ofh, '>', $output_file;
    print{$ofh} $buffer;
    close $ofh;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T21:47:34.247

如果您只想从 Perl 方面执行此操作，我建议使用[File::Find::Rule](http://search.cpan.org/~rclamp/File-Find-Rule-0.33/lib/File/Find/Rule.pm)：

```
use File::Find::Rule;
my @files = File::Find::Rule->file()
                            ->name('*.in')
                            ->in(my @input_directories = ('.'));
# etc. 
```

问候，马蒂亚斯

# r - 重置 dgCMatrix 的值

> ID：13058024
> 
> 赞同：2
> 
> 时间：2012-10-24T21:27:03.087
> 
> 标签：r

在 R 中，我想将 dgCMatrix 非零值设置为向量。

例如：

这是一个 dgCMatrix：

```
M
3 x 4 sparse Matrix of class "dgCMatrix"

[1,] . 1 . 1
[2,] . . 1 .
[3,] . . 1 . 
```

这是一个向量：

```
a <- c(1,2,3,4) 
```

然后，我想按列将非零值设置为向量。结果将是：

```
[1,] . 2 . 4
[2,] . . 3 .
[3,] . . 3 . 
```

谢谢 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T21:36:33.987

这应该是非常有效的：

```
library(Matrix)
M <- Matrix(c(0,0,0,1,0,0,0,1,1,1,0,0), nc=4) ## Recreates your dgCMatrix
a <- 1:4

M %*% Diagonal(x=a)
# 3 x 4 sparse Matrix of class "dgCMatrix"
#             
# [1,] . 2 . 4
# [2,] . . 3 .
# [3,] . . 3 . 
```

* * *

**编辑：**

如果`M`具有 0 和 1 以外的一些值，则可以改用以下值之一：

```
M <- M * 11:14  ## Alter M to test the following code 

as(M>0 | M<0, "dgCMatrix") %*% Diagonal(x=a)

as(!M==0, "dgCMatrix") %*% Diagonal(x=a) 
```

# visual-studio-2010 - 为什么 WinDBG 不加载模块？

> ID：13058025
> 
> 赞同：2
> 
> 时间：2012-10-24T21:27:05.833
> 
> 标签：visual-studio-2010, debugging, driver, windbg, debug-symbols

我是驱动程序开发的新手，现在我尝试使用 VisualDDK 在虚拟机上运行调试器。但是 VisualDDK 在使用消息包启动调试会话时无法加载任何模块`.Unable to add module at XXXXXXXX`。这是在 Visual DDK 调试控制台[https://dl.dropbox.com/u/2326286/vddkrep.txt](https://dl.dropbox.com/u/2326286/vddkrep.txt)中执行命令的结果。当我尝试从虚拟机监视器运行 WinDBG 时，调试会话开始时没有此类错误。我认为问题出在符号路径参数中，但现在我清楚它不是 - WinDBG 和 VisualDDK 控制台都显示相同的`.sympath`值。主机与

```
 Win7 home basic x64 
    VisualDDK 1.5.6 
    VirtualBox 4.2 
    VisualStudio 2010 Pro
    WDK build 7600 
```

虚拟机是 Win7 x86 Ultimate。

我已经在思考我做错了什么。请给我建议，我应该在哪里搜索这个问题的关键。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T06:43:41.767

我不认为加载驱动程序有问题。可能调试器无法正确找到符号。

这个符号路径看起来不太好。

```
C:\SYMBOLS.NET\_studiocache\MicrosoftPublicSymbols*http://msdl.microsoft.com/download/symbols;
C:\SYMBOLS.NET\_studiocache\MicrosoftPublicSymbols 
```

`srv*`开头有缺失。试试这个

```
srv*C:\SYMBOLS.NET\_studiocache\MicrosoftPublicSymbols*http://msdl.microsoft.com/download/symbols; 
```

# jquery - 在 Visual Studio 中为 jQuery 安装 VS DOC 文件

> ID：13058026
> 
> 赞同：0
> 
> 时间：2012-10-24T21:27:06.277
> 
> 标签：jquery, visual-studio, nuget, vsdoc

在 Visual Studio 中使用包控制台，我们使用安装 jQuery

安装包 jquery

是否也有为相应的 jQuery 文件安装 VS doc 文件的命令？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T22:16:21.857

是的，安装包 jQuery-vsdoc

# java - 在超类中为子类定义方法

> ID：13058028
> 
> 赞同：1
> 
> 时间：2012-10-24T21:27:14.647
> 
> 标签：java

如何在超类中定义方法但将实现留给子类？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T21:28:38.713

离开[方法`abstract`](http://docs.oracle.com/javase/tutorial/java/IandI/abstract.html)：

```
abstract class A {
    abstract void doStuff();
}

class B extends A {
    void doStuff() {
        // stuff
    }
} 
```

注意...

> 如果一个类包含抽象方法，则必须声明该类本身`abstract`

抽象类不能被构造（所以`new A()`会出错，但没`new B()`问题），并且子类需要实现所有抽象方法，除非它们也是抽象的。

```
abstract class A {
    abstract void doStuff();
}

abstract class B extends A {
    // This is fine since B is abstract
}

class C extends A {
    // This is an error since doStuff() isn't implemented
} 
```

使用抽象类，您可以混合使用抽象方法和普通方法：

```
abstract class A {
    abstract void doStuff();

    void doOtherStuff() {
        // Subclasses don't need to implement this
    }
} 
```

如果所有方法都是抽象的，使用 可能更有意义[`interface`](http://en.wikipedia.org/wiki/Interface_%28Java%29)，因为类实现了多个接口：

```
interface DoesStuff {
    void doStuff();
}

interface DoesOtherStuff {
    void doOtherStuff();
}

class B implements DoesStuff, DoesOtherStuff {
    void doStuff() {
        // stuff
    }

    void doOtherStuff() {
        // other stuff
    }
} 
```

注意：接口中的方法是自动的`abstract`，`public`与类中的方法不同，类中的方法默认是[包私有](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)的而不是抽象的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-24T21:28:26.183

将超类设为`abstract`类并将方法定义为`abstract`强制子类提供实现（或）将自己设为`abstract`.

例子：

```
abstract class Super {
    abstract void absMethod();
}

class Sub extends Super {
    void absMethod() {
        // implementation
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T21:29:26.790

您将在超类中创建一个抽象方法。

```
abstract class SuperClass {
   public abstract void mustImplement();
}

class SubClass extends SuperClass {
   public void mustImplement() {
       // Do stuff here
   }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T21:30:04.150

它应该声明为抽象的。例如

```
abstract class MyBaseClass
{
  protected abstract void myMethod();
}

class MyChildClass extends MyBaseClass
{
  protected void myMethod()
  {
    // here is my implementation!
  }
} 
```

# login - 用户“name-PC\name”登录失败

> ID：13058029
> 
> 赞同：0
> 
> 时间：2012-10-24T21:27:17.163
> 
> 标签：login, sql-server-2008-r2

我刚刚安装了 [sql server express r2]。我使用以下连接字符串从 asp.net 项目连接到我的数据库：

```
 "Data Source= my-PC\SQLEXPRESS;Integrated Security=true;Database=example" 
```

生活是美好的，直到我添加到在 [Managment Studio] (example2) 中创建的项目新数据库中。突然我得到了这个错误：

**无法打开登录请求的数据库“示例”。登录失败。**

**用户 'my-PC\love' 登录失败**。

之后我无法连接 [example] 和 [example2]。然后我尝试使用“sa”登录：

```
 "Data Source= my-PC\SQLEXPRESS;Database=example;User ID=my;Password=password" 
```

没有效果。我读了很多文章。我尽我所能：我启用所有[协议名称]，禁用防火墙，使用混合模式但仍然没有解决问题。

任何想法？

**编辑**：

我可以使用“我的”登录名和密码登录管理工作室。但是从 Visual Studio 中的项目无法登录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T21:44:00.273

对于您的第二个连接字符串：删除“集成安全性”部分。

但是，将 SA 登录用于任何事情，尤其是在您的软件中，是一种非常糟糕的做法。

您在第一个示例中遇到的错误表明登录名无权访问新数据库。在 SSMS 中提取登录名的属性（在安全性 -> 登录名下）并在“用户映射”页面上添加数据库。

# javascript - 在这里使用三元运算符是否合适？

> ID：13058030
> 
> 赞同：3
> 
> 时间：2012-10-24T21:27:17.637
> 
> 标签：javascript

我有一个变量来检查某些值的长度；如果失败，`var pass`则设置为`false`. 另一个函数检查电子邮件地址的有效性，如果未通过测试，则将其设置为 false。我正在尝试制作自定义错误消息。

使用像这样的三元运算符还是嵌套的 if 语句更好。还是有更简单的方法来做到这一点？

```
var mail = true;
var pass = true;
var err = '';

(mail && pass) ? err = 'mail and pass both true' : (!mail && pass) ? err = 'not mail and is pass' : (mail && !pass) ? err = 'is mail and not pass' : err = 'neither pass nor mail'; 
```

[小提琴](http://jsfiddle.net/loren_hibbard/4SfTj/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T21:29:17.087

“更好”本质上是一种价值判断，因此取决于您。看三元版本，再看`if/else`版本，决定哪个更易读、更易维护、更清晰。那是你应该选择的。这对编译器无关紧要，无论如何它最终都会做一些非常有效的事情。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T21:30:01.437

您可能遇到的唯一语法问题是三元运算符的关联性。使用括号来减少歧义会有所帮助。

主要问题是人类几乎无法阅读该行。嵌套的 if 更容易阅读和维护。想象一下自己在两个月后回到那条线并试图破译它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T21:29:52.483

只是为了代码的清晰，我会使用 if\else...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T21:44:58.963

您可以使用一个很好的习语，它看起来有点像查找表：

```
var mail = true;
var pass = true;
var err = '';

err = ( mail &&  pass)  ?  'mail and pass both true' 
    : (!mail &&  pass)  ?  'not mail and is pass'
    : ( mail && !pass)  ?  'is mail and not pass' 
    :                      'neither pass nor mail'; 
```

当然，对于哪个更好，这完全是主观的，但是如果唯一的操作是分配给单个变量，这可能是替换一系列 if 语句的好方法。

也就是说，它确实结合了三进制的视觉紧凑性，同时解决了单行三进制固有的难以辨认的问题。不利的一面是，如果以后的代码要求您做的不仅仅是根据布尔值选择表达式，那么无论如何您都需要将其重构为 if-else 语句......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-24T21:35:08.180

现有答案中已经有一些好的想法。只是为了全面起见，这里有一个声明性解决方案：

[http://jsfiddle.net/Shedal/4SfTj/1/](http://jsfiddle.net/Shedal/4SfTj/1/)

```
var statusStrings = {
    true: {
        true: 'mail and pass both true',
        false: 'is mail and not pass'
    },
    false: {
        true: 'not mail and is pass',
        false: 'neither pass nor mail'
    }
}

var mail = true;
var pass = true;
var err = statusStrings[mail][pass];

document.write(err); 
```

# mono - 将签名捕获另存为 jpg

> ID：13058040
> 
> 赞同：1
> 
> 时间：2012-10-24T21:27:47.553
> 
> 标签：mono, xamarin.android

我正在使用以下内容在我的应用程序上捕获签名

[https://github.com/Cheesebaron/MonoDroid.CaptureSignature](https://github.com/Cheesebaron/MonoDroid.CaptureSignature)

如果我将图像保存为 png，它工作正常，但我想将其保存为 jpg

我将 Bitmap.CompressFormat.Png 更改为 Bitmap.CompressFormat.Jpg

但我得到的是一个黑色的 jpg 文件，因为文字是黑色的

并且背景已经是黑色的。如何使图像背景变白？

我改变的代码

```
using (var fs = new FileStream(extFileName, FileMode.OpenOrCreate))
{
  _capture.CanvasBitmap().Compress(Bitmap.CompressFormat.Jpg, 100, fs);
} 
```

寻求帮助。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T23:06:45.457

我认为你只能通过在画布上设置颜色来做到这一点。

请参阅[如何更改已保存的透明位图的背景颜色](https://stackoverflow.com/questions/4572564/how-to-change-the-background-color-of-a-saved-transparent-bitmap)

所以你可以尝试改变：

```
_capture.CanvasBitmap().Compress(Bitmap.CompressFormat.Png, 100, fs); 
```

类似于：

```
var b = _capture.CanvasBitmap();
var newBitmap = Bitmap.CreateBitmap(b.Width, b.Height, b.Config);
var canvas = new Canvas(newBitmap);
canvas.DrawColor(Color.WHITE);
canvas.DrawBitmap(b, 0, 0, null);
newBitmap.Compress(Bitmap.CompressFormat.Jpg, 100, fs); 
```

但是此代码在这里未经测试 - 抱歉！

# c# - control.Show 和 BringToFront 有什么区别？

> ID：13058043
> 
> 赞同：4
> 
> 时间：2012-10-24T21:28:03.717
> 
> 标签：c#, winforms, user-interface, controls, show

Show/Hide 和 BringToFront/SendToBack 有什么区别？在什么情况下我们应该使用一对而不是另一对？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T21:30:57.507

`Show()`等效于设置`Visible = true`。它不会更改控件的 Z 顺序。如果控件被 Z-order 前面的某个其他控件关闭，用户仍然无法看到您的控件。

`BringToFront()`更改控件的 Z 顺序（置于前面），但不更改其可见性。如果控件被隐藏，那么它将保持隐藏状态。但是，当您使控件可见时，它将出现在所有其他控件的前面。

与`Hide()`(使控件不可见，但不更改 Z 顺序) 和`SendToBack`(不更改可见性，但将控件带回) 相同。

![在此处输入图像描述](../Images/2da0850c518fa5332391d246ad0091b7.png)

![在此处输入图像描述](../Images/c0843516f6f20e5d3918afd86e4c43ad.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T21:30:51.167

这些是完全不同的方法。

`Show()`: 在视图上显示控件，通过之前初始化它的内容。

`BringToFront`并`SendToBack`根据`Z-order`该控制对他人采取行动。但是控件已经可见。

来自 MSDN 关于[BringToFront](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.bringtofront.aspx)的提示：

> 将控件置于 z 顺序的前面。

和[显示](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.show.aspx)：

> 向用户显示控件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T21:30:12.373

Show/Hide 将在屏幕上显示或隐藏控件。基本上它使它可见或不可见。

BringToFront/SendToBack 将改变其“z”顺序。如果您在标签下有一个按钮，并且您在该按钮上调用“BringToFront”，则该按钮现在将隐藏标签。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T21:30:30.727

BringToFront 只是将一个控件移动到其他控件的前面（换句话说，它将覆盖另一个控件）并且 SendToBack 将允许其他控件将其覆盖，而 Show / Hide 实际上将完全向用户显示/完全隐藏该控件。

作为一般规则，您想要显示/隐藏控件

# r - 在 R 中导入文本文件的更快方法？

> ID：13058048
> 
> 赞同：0
> 
> 时间：2012-10-24T21:28:14.637
> 
> 标签：r, io

我在 R 中调用 FORTRAN 程序并分析 FORTRAN 的输出文件，该文件有点大（每次迭代大约 50M）。每次迭代大约需要 50 秒，其中`read.table`命令需要 42 秒。由于我需要重复这个程序 100,000 次，我想知道是否有更好的方法来加速它？

例如，是否可以让 FORTRAN 将所有内容保存到内存中并将其传递给 R？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T21:57:23.380

绝对 - 在 Fortran 中将文件写入二进制文件，然后通过`readBin()`R 读取它们，这将*非常快*。但是请确保您检查字节顺序，四字节对八字节浮点等等。

如果您想要一个经过测试的库，请查看各种序列化库，例如 RProtoBuf 等。虽然不确定有多少有 Fortran 绑定...

*编辑：根据*[附加组件页面](http://code.google.com/p/protobuf/wiki/ThirdPartyAddOns)，Protocol Buffers 和 Fortran 运气不佳。也许像 hdf5 这样的科学格式对你来说会更好。

# java - 简化纹理和角坐标'openGL

> ID：13058051
> 
> 赞同：0
> 
> 时间：2012-10-24T21:28:31.627
> 
> 标签：java, opengl, glu

这是我的骰子的坐标部分（一个被骰子纹理覆盖的立方体）。我在一些代码中看到可以省略指向相同位置的公共坐标？无论如何，我的形状都会变得混乱！我怎样才能简化它？

这是我的代码 --> 立体角坐标、纹理坐标和顶点索引

```
final float pt2[] = new float[] { 
                0, 0, 0,
                0, 1, 0,
                1, 0, 0, 
                1, 1, 0,

                0, 0, 1,
                0, 1, 1, 
                1, 0, 1,
                1, 1, 1,

                1, 1, 1, /* 8 */
                1, 1, 0,
                0, 1, 0, 
                0, 1, 1,

                1, 0, 1, 
                1, 0, 0,
                0, 0, 0,
                0, 0, 1,

                0, 0, 1, /* 16 */
                0, 1, 1,
                1, 1, 1, 
                1, 0, 1,

                1, 0, 0,
                0, 0, 0, 
                0, 1, 0, 
                1, 1, 0 };
        final float texture[] = new float[] { 
                1f, 0.66f, 
                0.66f, 0.66f,
                0f,0.33f, 
                0.33f, 0.33f,

                1f, 0.33f, 
                0.66f, 0.33f,
                0.0f, 0.0f,
                0.33f, 0f,

                0.33f, 0f,
                0.33f, 0.33f,
                0.66f, 0.33f,
                0.66f, 0f,

                0.33f, 0.33f,
                0.33f, 0.66f,
                0.66f, 0.66f,
                0.66f, 0.33f,

                0.66f, 0f,
                0.66f, 0.33f,
                1f, 0.33f, 
                1f, 0f,

                0f, 0.33f,
                0f, 0.66f,
                0.33f, 0.66f,
                0.33f, 0.33f,

        };

        final byte[] vertexIndex = new byte[] { 
                6, 2, 3,7, //1
                5, 1, 0, 4, //2
                8,9,10, 11, //3
                15, 14, 13,12, //4
                20, 21,22, 23, //5
                16, 19, 18, 17 }; //6 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T22:48:07.750

是的，事实上你在这里尝试做的绝对是要走的路 - 只指定每个顶点一次。它不仅节省了内存，而且避免了微妙的视觉伪影，其中 2 个或更多顶点（应该在同一个地方）没有完全相同的浮点值。

这是我从我的代码库和[这个](http://www.two-kings.de/tutorials/dxgraphics/dxgraphics08.html)DX 教程的组合中得到的一个例子。

您正在为顶点坐标和纹理坐标使用单独的数据结构，而在这里它们都被挤在一起，但想法是相同的。

这里重要的一点是顶点表中只有 8 个条目 - 正是立方体中的顶点数 - 没有额外的。您可以在索引缓冲区中对同一顶点有多个引用，但这就是您想要的 - 重用相同的顶点条目。

```
struct MyVertex
{
    float x, y, z;
    float t, v;
};

// the cube corners, note that there are only 8 entries
// in table - no duplicates

MyVertex vx[] = 
{
    { 0.0f, 0.0f, 0.0f, 0.0f,1.0f },    // one corner of the cube
    { 0.0f, 1.0f, 0.0f, 0.0f,0.0f },
    { 1.0f, 1.0f, 0.0f, 1.0f,0.0f },
    { 1.0f, 0.0f, 0.0f, 1.0f,1.0f },
    { 0.0f, 0.0f, 1.0f, 0.0f,0.0f },
    { 1.0f, 0.0f, 1.0f, 0.0f,1.0f },
    { 1.0f, 1.0f, 1.0f, 0.0f,0.0f },
    { 0.0f, 1.0f, 1.0f, 0.0f,1.0f }
};

// index buffer that points back into vx[]

short indexBuffer[] = 
{
    0,1,2, 2,3,0,   // cube face 0 (2 tris here)
    4,5,6, 6,7,4,   // 1
    0,3,5, 5,4,0,   // 2
    3,2,6, 6,5,3,   // 3
    2,1,7, 7,6,2,   // 4
    1,0,4, 4,7,1    // 5
}; 
```

# wordpress - 在 PHP SDK 中使用 getUser 获取用户 ID 时遇到问题

> ID：13058053
> 
> 赞同：0
> 
> 时间：2012-10-24T21:28:39.967
> 
> 标签：wordpress, facebook-php-sdk, facebook-authorization

我很难让 Facebook PHP SDK 与我正在尝试修复登录流程的 Wordpress 插件一起使用。我遇到的问题是 getUser()**总是**返回 0 即使肯定有用户登录。基本上，我的代码工作如下：

1.  我有一个选项页面（在 wordpress 中），当它被加载时会创建一个包装类的实例，或者 PHP SDK Facebook 类的实例，如下所示：

    ```
    $facebook = new FacebookAPI; 
    ```

    此包装器的构造函数创建 PHP SDK Facebook 类的实例并保存它，同时还设置一些类变量并做一些工作来管理保存在插件中的会话。

2.  然后在选项页面中有一个按钮，它是一个指向由 Facebook 对象生成的 login_url 的链接，即 getLoginUrl()。使用包装类以这种方式调用登录 URL：

    ```
    // Set Login Url
    $params = array(
        'scope' => 'user_photos,user_photo_video_tags',
        'redirect_uri' => FB_REDIRECT_URI,
        'display' => 'page'
    );
    $loginURL = $facebook->get_login_url($params); 
    ```

3.  这里的 redirect_uri 是 wordpress 中的插件选项页面，当页面重新加载时，有代码检查登录过程是否正常完成。它通过查看url 是否包含'code' 变量来做到这一点，即是否设置了$_REQUEST['code']。（这是 FB 在成功完成登录/权限过程时所做的。

**问题：** 如果在请求对象中设置了“代码”，我想我应该能够在 facebook sdk 类上调用 getUser() 并获取用户 ID。这就是我遇到问题的地方。getUser()**总是**返回 0，我一直无法弄清楚为什么。

然而，我注意到的一件事是，如果我执行 var_dump($_SESSION)，则数组为空。在 PHP 错误日志中，我有以下 PHP 警告：

```
PHP Warning:  session_start(): Cannot send session cookie - headers already sent by (output started at /****/****/Sites/ld-full/wp-admin/menu-header.php:92) in /****/****/Sites/ld-full/wp-content/plugins/fotobook/facebook-platform/facebook.php on line 49
PHP Warning:  session_start(): Cannot send session cache limiter - headers already sent (output started at /****/****/Sites/ld-full/wp-admin/menu-header.php:92) in /****/****/Sites/ld-full/wp-content/plugins/fotobook/facebook-platform/facebook.php on line 49 
```

然而，menu-header.php 中的第 92 行如下：

```
echo "\n\t<div class='wp-menu-image'><a href='{$submenu_items[0][2]}' aria-label='$aria_label'>$img</a></div>$arrow<a href='{$submenu_items[0][2]}'$class $aria_attributes>$title</a>"; 
```

我在这里看不到任何会写标题的东西。所以我在这一点上相当难过。

有人对这里可能发生的事情有任何想法吗？任何帮助都会非常棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T21:36:05.120

> 问题：如果在请求对象中设置了“代码”，我想我应该能够在 facebook sdk 类上调用 getUser() 并获取用户 ID。

没有。code 参数的目的是交换访问令牌。

> 有代码检查登录过程是否正常完成。它通过查看url 是否包含'code' 变量来做到这一点，即是否设置了$_REQUEST['code']。（这是 FB 在成功完成登录/权限过程时所做的。

获取到code参数并不*意味着*授权已经完成——必须先执行上述步骤。

> 在 PHP 错误日志中，我有以下 PHP 警告：
> 
> PHP 警告：session_start()：无法发送会话 cookie - 标头已由 [...]

*Ppppleeeaaaaaseee*自己研究该错误消息——它在网络上被讨论和解释的次数可能比人们在明确的上下文中搜索 Paris Hilton 的次数还要多……</p>

# javascript - 运行此脚本时，javascript 在浏览器中崩溃，出了什么问题？

> ID：13058054
> 
> 赞同：1
> 
> 时间：2012-10-24T21:28:39.700
> 
> 标签：javascript, primes

我正在尝试使用 javascript: 从[http://projecteuler.net](http://projecteuler.net)解决一个数学问题 ：找到所有低于 200 万的素数的总和。当我运行我编写的脚本时，我的浏览器崩溃了（我使用的是 Google Chrome）。这是脚本：

```
function isPrime(num) 
{ 
    if(num < 2) 
    return false; 
    for (var i = 2; i < num; i++) 
        { 
        if(num%i==0) 
        return false; 
        } 
return true; 
} 
var total=0e1;
    for (var i = 1; i < 2000000; i++)
        { 
        if(isPrime(i)) 
            {
            total=total+i;
            }
        } 

document.write("The sum of all the primes below two million is ",total); 
```

该脚本适用于较小的数字（i<100000）。它有什么问题？我该如何解决？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T21:45:30.643

该函数为您检查的每个*n*`isPrime`执行*n*模运算（因为您检查每个小于素数的单个数字作为一个因素）。假设[每七个数字中大约有一个是素数](http://en.wikipedia.org/wiki/Prime_number_theorem)，这意味着您在代码段中执行了大约 28,000 次该函数，并且执行[了大约 3.92 亿次模运算](http://www.wolframalpha.com/input/?i=sum%20of%20x%20from%200%20to%2028000)。很可能，Chrome 正在崩溃，因为它假定 JavaScript 引擎已进入无限循环。*`isPrime`*

 *正如 NullUserException 所说，[有更好的方法可以找到素数。](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)

一个简单的改进是只检查小于其平方根的数字的因子。**对于a = b * c 的**任何数字**a**，您可以假设**b**或**c**小于**a**的平方根。由于您只需要知道一个因数就可以知道一个数不是素数，因此您只需寻找小于其平方根的因数。正如 lanzz 评论的那样，您也可以跳过偶数。

 ******```
function isPrime(n)
{
    if (n % 2) return false;       

    var s = Math.sqrt(n);

    // iterate by 2 to skip even numbers
    for (var i = 3; i <= s; i += 2)
        if (n % i) return false;

    return true;
}

var total = 3; // 1 + 2

// iterate by 2 to skip even numbers
for (var i = 3; i < 2000000; i += 2)
    if (isPrime(i)) total += i; 
```

不要误会我；这不会改变你算法的*O*复杂度，而且你仍然会用足够大的数字使 JavaScript 引擎崩溃。但它会提高崩溃的次数。我不确定它是否会达到 200 万。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T22:11:53.057

试试这个函数，它使用的算法比你的快得多，并且不会因 2M 数字而崩溃：

```
function isPrime( num ) {
    var testNum = 3;
    var limitNum = num;

    if ( num == 2 )
        return true;

    if ( num % 2 == 0 )
        return false;

    while ( limitNum > testNum ) {
        if ( num % testNum == 0 ) {
            return false;
        }

        limitNum = parseInt( num / testNum );
        testNum += 2;
    }

    return true;
} 
```

[我在这里](http://www.freevbcode.com/ShowCode.asp?ID=1059)找到它是 VB 代码，我只是将它翻译成 Javascript。*******

# css - 使用 LESS CSS，我可以将“属性”乘以一定数量吗？例如：宽度 x 1.26？

> ID：13058055
> 
> 赞同：0
> 
> 时间：2012-10-24T21:28:53.893
> 
> 标签：css, less

这是我的CSS：

```
 div {
        border: 0;
        display: block;
        width: 100%;
        height: width * 1.26411765;
    } 
```

我希望“宽度”成为元素的当前像素宽度。那有意义吗？这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T21:33:41.510

使用类似的东西

```
div {
    border: 0;
    display: block;
    width: @div-width;
    height: (@div-width * 1.26411765);
} 
```

请参阅： http: [//lesscss.org/#-operations](http://lesscss.org/#-operations)

编辑：刚刚正确阅读了您的问题（哎呀），您可以从 less 访问 javascript 以获取值。请参阅上面的链接并向下滚动页面。虽然我从未真正尝试过。

# iphone - 如何制作两种不同的设计 XIB 垂直和水平

> ID：13058056
> 
> 赞同：0
> 
> 时间：2012-10-24T21:29:02.427
> 
> 标签：iphone, xcode

大家好，我有一个问题

我使用 .xib，添加按钮和其他界面。面对这样的问题。虽然设备处于直立位置，但一切都很好，但一旦我转动它，它就彻底崩溃了。鉴于我的程序界面我无法翻转它，我需要完全重绘它

我的问题是：如何使两种不同的设计 XIB 垂直和水平

ps 我在垂直 XIB 中的程序看起来

```
11|22 
33|44
55|66 
```

在水平XIN我需要，但我还需要一个新的界面

```
11|22|33 
44|66|77 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T21:31:46.543

在国际文凭组织

*   确保正在显示“导航器”和“实用程序”视图（在主窗口右上角的“视图”部分。
*   在 Navigator 列中选择“View”对象
*   在 Utilities 列中，选择 Rt 中第三个的小图标。

有一个“方向”下拉菜单，可让您选择纵向和横向。

让我知道这是否有帮助。

# sql - SQL查询问题，根据结果过滤行

> ID：13058057
> 
> 赞同：-7
> 
> 时间：2012-10-24T21:29:05.260
> 
> 标签：sql, sql-server

我有以下查询结果集

```
团队用户  
中国人民银行 BEI02
ZTeam BEI02
人民银行 HPP02

```

我需要扩展查询，以便**仅输出用户 HPP02**。不应列出属于 ZTeam 的任何人。

我想，我的问题是有 1000 条记录。HPP02 是有很多用户喜欢 HPP02 的结果之一，需要一一列举。不能使用 where user = 'HPP02'。

知道如何实现这一点。

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T21:31:33.767

为了让我们在未来帮助您，您应该向我们[展示您的尝试](http://www.whathaveyoutried.com)。

```
SELECT Team, [User]
FROM unicorns
WHERE Team <> 'ZTeam' AND [User] = 'HPP02' 
```

# python - VTK 中的流线

> ID：13058058
> 
> 赞同：1
> 
> 时间：2012-10-24T21:29:06.693
> 
> 标签：python, vtk

我已经从 vtk 文件中可视化了一些箭头，现在我正在尝试使用 VTK 包在 python 中可视化流线。我可以得到箭头，但不能得到流线。编码;

```
# File:        wind.py
from vtk import *

reader = vtkStructuredPointsReader()
reader.SetFileName("wind.vtk")
reader.Update()

cubeOutline = vtkOutlineFilter()
cubeOutline.SetInputConnection(reader.GetOutputPort())
cubeMapper = vtkPolyDataMapper()
cubeMapper.SetInputConnection(cubeOutline.GetOutputPort())

cubeActor = vtkActor()
cubeActor.SetMapper(cubeMapper)
cubeActor.GetProperty().SetColor(1.0,1.0,1.0)

arrow = vtkArrowSource()
arrow.SetTipRadius(0.2)
arrow.SetShaftRadius(0.075)

arrowGlyph = vtkGlyph3D()
arrowGlyph.SetInputConnection(reader.GetOutputPort())
arrowGlyph.SetSource(arrow.GetOutput())
arrowGlyph.SetScaleFactor(0.05)

arrowMapper = vtkPolyDataMapper()
arrowMapper.SetInputConnection(arrowGlyph.GetOutputPort())

arrowActor = vtkActor()
arrowActor.SetMapper(arrowMapper)

points = vtkPointSource()
points.SetRadius(3.0)
points.SetNumberOfPoints(20)

streamers = vtkStreamLine()
streamers.SetInputConnection(reader.GetOutputPort())
streamers.SetSource(points.GetOutput())
streamers.SpeedScalarsOn()
streamers.SetMaximumPropagationTime(100)
streamers.SetIntegrationStepLength(0.2)
streamers.SetTerminalSpeed(0.1)

streamMapper = vtkPolyDataMapper()
streamMapper.SetInputConnection(streamers.GetOutputPort())
streamMapper.SetScalarRange(reader.GetOutput().GetScalarRange())

streamActor = vtkActor()
streamActor.SetMapper(streamMapper)

ren = vtkRenderer()
ren.SetBackground(.2, .2, .2)

renWin = vtkRenderWindow()
renWin.SetSize(800, 600)
renWin.AddRenderer( ren )

iren = vtkRenderWindowInteractor()
iren.SetRenderWindow( renWin )

ren.AddActor(cubeActor)
ren.AddActor(arrowActor)
ren.AddActor(streamActor)

renWin.Render()
iren.Initialize()
iren.Start() 
```

我看不到我错过了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T09:29:09.893

I have little experience visualizing streamlines and the experience I do have is with vtkteem (vtkSeedTracts).

I assume that the points you are specifying are used as seeds for the streamlines to form from. If that is the case, shouldn't you also specify a location for these points? I don't know what your data is like, but I have a feeling that the streamlines aren't visible because the seed points aren't specified correctly.

Hope that helps!

# r - 在调用堆栈中显示特殊的原始函数

> ID：13058062
> 
> 赞同：8
> 
> 时间：2012-10-24T21:29:30.143
> 
> 标签：r, callstack

[这个问题](https://stackoverflow.com/q/13056392)引发了以下问题：有没有办法查看调用堆栈中的[特殊原始](http://cran.r-project.org/doc/manuals/R-ints.html#Special-primitives)函数？

例如，创建一个在退出时返回调用堆栈的函数：

```
myFun <- function(obj){
  on.exit(print(sys.calls()))
  return(obj)
} 
```

调用此函数并将其结果分配给对象 using`assign`避免使用特殊的原始函数：

```
> assign("myObj",myFun(4))
[[1]]
assign("myObj", myFun(4))

[[2]]
myFun(4) 
```

但是使用赋值运算符，这会被排除在堆栈之外

```
> `<-`(myObj, myFun(6))
[[1]]
myFun(6) 
```

当然，希望在调用堆栈中看到赋值运算符可能并不常见，但其他函数（例如`rep`and`log`也被隐藏）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-24T22:31:25.823

我认为没有任何方法可以通过调用堆栈访问对原始函数的调用。这就是为什么。

当评估“典型” R 函数时：

1.  提供的参数与形式参数匹配。
2.  创建一个新环境（带有指向其封闭环境的指针），并将形式参数分配给它。
3.  函数的主体在新创建的环境中进行评估。

当函数调用相互嵌套时建立的封闭环境链是“调用堆栈”或“帧堆栈” `sys.calls()`，`sys.frames()`等等提供了一些访问。

我强烈怀疑对原始函数的调用不会出现在调用堆栈上，因为**在评估期间没有创建 R 端环境**。没有创建环境，因此调用堆栈上不会出现任何环境。

如需更深入的了解，John Chambers 在[**Software for Data Analysis**](http://www.springer.com/statistics/computational+statistics/book/978-0-387-75935-7)的第 464 页上描述了对原始函数的评估：

> 对这些函数之一的调用的求值以通常的方式开始，但是当求值者发现函数对象是原始函数而不是 R 中定义的函数时，它会分支到完全不同的计算。该对象似乎只是一个带有形式参数的函数对象和一个带有字符串参数的函数 .Primitive() 调用。实际上，它本质上只包含一个表的索引，该表是实现 R 核心的 C 代码的一部分。表的条目标识了核心中的一个 C 例程，该例程负责评估对这个特定原语的调用。求值程序会将控制权转移到该例程，并期望该例程返回一个指向表示调用值的 R 对象的 C 语言指针。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-07-02T13:45:08.353

我不认为乔希的回答是正确的。

好吧，如果在您的示例中位于调用堆栈上，那*将*是正确的。*但事实并非如此*。`<-`

 *小回顾：正常的 R 函数评估将参数视为在访问时延迟评估的*承诺*。这意味着在以下调用中：

```
foo(bar(baz)) 
```

`bar(baz)`*在内部* 进行评估`foo`（如果有的话）。因此，如果我们检查内部的调用堆栈`bar`，如下所示：

```
bar = function (x) {
    sys.calls()
} 
```

…然后它看起来如下：

```
[[1]]
foo(bar(baz))

[[2]]
bar(baz) 
```

唉，正如您所指出的，`<-`(and `=`) 不是一个普通函数，它是一个原始函数 ( `BUILTINSXP`)。事实上，它[在 R 源码中是这样定义的](https://github.com/wch/r-source/blob/5e2491cd2b898b56a2e118b18b09f489136acb91/src/main/names.c#L100)：

```
{"<-",      do_set,     1,  100,    -1, {PP_ASSIGN,  PREC_LEFT,   1}}, 
```

看一下第四个参数：`100`. 此代码之前的注释解释了数字的含义。这是相关部分，解释最左边的数字：

> Z=1 表示在调用 ( `BUILTINSXP`)之前评估参数

这意味着在分配*之前*`bar(baz)`评估以下调用代码：

 *```
`<-`(x, bar(baz)) 
```

这就是为什么`<-`没有出现在列表中的原因`sys.calls()`：它*不是*当前调用。`bar`它在完成评估后被调用。

* * *

有一种方法可以解决这个限制：您可以在 R 代码中重新定义`<-`/ 。`=`如果你这样做，它的行为就像一个普通的 R 函数：

```
`<-` = function (lhs, rhs) {
    name = as.name(deparse(substitute(lhs), backtick = true))
    rhs # evaluate expression before passing it to `bquote`, for a cleaner call stack
    eval.parent(bquote(base::`<-`(.(name), .(rhs))))
} 
```

但是，请注意，这将对重新定义范围内的*每个*后续分配产生不可忽略的性能影响`<-`：事实上，它使分配大约慢了 1000 倍（!!!）。这通常是不可接受的。**

# javascript - 基于 Express 和 Mongoose 的 REST API - 在将对象返回给用户之前过滤掉对象的某些属性

> ID：13058063
> 
> 赞同：1
> 
> 时间：2012-10-24T21:29:33.507
> 
> 标签：javascript, node.js, express, mongoose

我正在 Node.js 之上使用 Express 和 Mongoose 构建一个 RESTful API

我在我的模式中使用了某些字段/属性，这些字段/属性仅供内部使用，API 用户根本不应该看到它们。

在 res.send() 之前删除它们的最佳方法是什么？我是否必须为每条路线（获取、发布、更新）手动执行此操作，还是有一种通用的方法可以将它们过滤掉？

我尝试使用自定义中间件，但这不起作用 - 当我在使用（app.router）之前放置我的中间件时， res.body 是未定义的，如果我把它放在之后，我的中间件永远不会被调用。此外，由于在中间件中我同时处理单个文档和文档数组，我宁愿找到一种方法来处理每个文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T21:40:18.583

您可以使用[`select`](http://mongoosejs.com/docs/api.html#schematype_SchemaType-select)架构字段定义的属性来确定它是否默认包含在`find`调用返回的对象中。将其设置`false`为默认情况下要抑制的字段。

```
T = db.model('T', new Schema({ x: { type: String, select: false }}));
T.find(..); // field x will not be included..
// .. unless overridden;
T.find().select('+x').exec(callback); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T23:36:55.513

您可以使用 .populate() - 第二个参数将采用 -fieldname，假设您的 item.created_by 是对用户对象的架构引用...

```
Item.findById(id).populate('created_by', '-salt -password_hash').exec(function(err, item){
 //item.created_by will have user object
 //without salt or password_hash fields.
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T22:23:18.773

另一种方法是您的应用程序在发送对象之前调用的一组修剪器/清洁器函数。

```
server.get("/api/user/:userId", function(req, res, next){
    var id = req.params.userId;
    User.findById(id, function(err, doc){
        if(err){
            return next(err);
        }
        sendUtils.sendUser(req, res, doc);
    });
});

sendUtils.sendUser = function(req, res, doc){
    res.send(_.omit(doc, ['__id', 'hiddenfield', 'hiddenfield2']);
} 
```

（使用 underscore.js 省略函数。）

# mysql - 强制mysql对象在django中为大写

> ID：13058064
> 
> 赞同：0
> 
> 时间：2012-10-24T21:29:37.610
> 
> 标签：mysql, django

是否可以将每个 mysql 对象（表和列）的名称设置为大写？

如果不是，原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T10:36:39.267

如果您的问题是大写表名和大写字段名，您必须查看此页面[MySQL 小写表名在 Windows 上大写名称在 Unix](https://stackoverflow.com/questions/1172382/mysql-lowercase-table-names-in-windows-uppercase-names-on-unix)

# knockout.js - KnockoutJS ForEach 绑定 - 动态 URL

> ID：13058067
> 
> 赞同：2
> 
> 时间：2012-10-24T21:29:49.400
> 
> 标签：knockout.js

我正在尝试通过 KnockoutJS foreach 绑定从 JSON 集合生成动态链接。

例子：

```
<div class="profile-links">
  <ul data-bind="foreach: Types">
     <li>
       <a data-bind="attr: { href: 'https://myapp.com/?ref=' + text:TypeId }" />
     </li>
   </ul>
</div> 
```

这会从 KnockoutJS 生成以下异常

未捕获的错误：无法解析绑定。消息：SyntaxError: Unexpected token :;

处理这个问题的正确方法是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-24T21:37:21.147

```
<div class="profile-links">
  <ul data-bind="foreach: Types">
     <li>
       <a data-bind="attr: { href: 'https://myapp.com/?ref=' + TypeId }" />
     </li>
   </ul>
</div> 
```

您只需执行 TypeId 即可引用不带“text:”前缀的属性

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-17T13:06:10.173

像这样试试。`add ()`在最后。
`<a data-bind="attr: { href: 'https://myapp.com/?ref=' + TypeId() }" />`

# javascript - 自动更新数据onFocus而不刷新

> ID：13058086
> 
> 赞同：0
> 
> 时间：2012-10-24T21:30:45.737
> 
> 标签：javascript, onfocus

我有一个网页，允许用户添加附件（存储在目录中）为此，我使用灰色框弹出一个窗口，用户可以在其中查看添加或删除文档，因为他们认为合适，这一切都很好。

我遇到的问题是，当用户关闭弹出窗口时，主页上显示的附件总数没有更新，需要刷新，我想避免这种情况。我希望在焦点变回主页时自动更新这些数据。我在 Solaris 上，所以我可以轻松获取文件总数，这只是我需要的显示更新。

所有帮助表示赞赏

弗兰基

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T21:52:16.807

在这种情况下，我更喜欢处理 onPopupClose 而不是 onFocusChange。经过一番搜索，显然 graybox 允许您通过定义回调函数来做到这一点（[在此处](http://forums.phpfreaks.com/topic/237532-refresh-div-on-parent-page-on-close-of-greybox/)描述）：

```
GB_show(caption, url, /*optional*/ height, width, callback_fn) 
```

所以你可以这样写：

```
GB_show('Popup', 'popup_url', 500, 500, function() {
    updateTotalAttachmentCount();
}); 
```

# macros - 快速宏扩展

> ID：13058091
> 
> 赞同：0
> 
> 时间：2012-10-24T21:31:13.960
> 
> 标签：macros, preprocessor, interpreter, c-preprocessor

目前我在我的 C-Interpreter 上工作。现在我想稍微优化一下。扩展宏的最快方法是什么？例如：我浏览了我的整个代码并找到了一个类似对象的宏。从源文件的这一点开始，我必须遍历完整的翻译单元（不仅是当前文件），并且必须使用宏名称搜索标识符并将其替换为替换列表。如果我有 20 个宏，我必须扫描 20 次。这是一个致命的性能杀手。有谁知道其他预处理器如何处理宏扩展？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T21:42:01.797

对于此类查找，您可以使用*HashMap*、*Map*或*Binary Tree*。

HashMap 更容易使用，如果你使用 C++，你可以使用[STL hash_map](http://www.sgi.com/tech/stl/hash_map.html)

# windows-7 - 光标卡在窗口角落

> ID：13058097
> 
> 赞同：2
> 
> 时间：2012-10-24T21:31:37.430
> 
> 标签：windows-7, cursor, tablet, trust

最近我买了一个 Trust "Fresco Widescreen Tablet" ( [http://www.trust.com/products/product.aspx?artnr=18002](http://www.trust.com/products/product.aspx?artnr=18002) )。起初我使用它没有任何问题，即插即用平板电脑，效果很好。

全新安装我的操作系统（Windows 7）后，我的平板电脑无法再次工作:(。

我已经尝试安装几个驱动程序，但似乎都没有工作（根据信任网站，我正式不需要任何驱动程序）。

我在 Windows 7 操作系统上有 2 个屏幕 (Benq G2420HD) 和 AMD Radeon HD 6900 系列（Catalyst 版本 12.10）。

我的电脑检测到平板电脑上的移动（尝试将其移出角落）。我无法校准我的平板电脑，因为我无法将光标移出角落。

我的鼠标工作正常。有谁知道为什么我不能让它工作？

提前致谢！

# php - 如果 array_reverse 没有完成工作，如何对 foreach 的顺序进行排序？

> ID：13058098
> 
> 赞同：0
> 
> 时间：2012-10-24T21:31:38.357
> 
> 标签：php

这是`var_dump`一个多维数组。

```
array (size=2)
  'ad795f9b369fc967db8fe0611ecc3cb3' => 
    array (size=6)
      'rowid' => string 'ad795f9b369fc967db8fe0611ecc3cb3' (length=32)
      'id' => string '101_89765' (length=9)
      'qty' => string '1' (length=1)
      'price' => string '19.00' (length=5)
      'name' => string 'Product 2' (length=13)
      'subtotal' => float 19

  '19c452c64c3f308323dee72a8a4a4f62' => 
    array (size=6)
      'rowid' => string '19c452c64c3f308323dee72a8a4a4f62' (length=32)
      'id' => string '114_54828' (length=9)
      'qty' => string '1' (length=1)
      'price' => string '452.25' (length=6)
      'name' => string 'Product 1' (length=5)
      'subtotal' => float 452.25 
```

我需要翻转顺序，以便它在`product 1`之前反向显示`product 2`。`array_reverse`我之前尝试过使用，`foreach`但没有效果。

我还可以做些什么？谢谢您的帮助！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T21:42:59.050

`array_reverse`不接受它的引用参数（作为排序函数），而是只*返回反转的数组*。

所以你应该使用`$array = array_reverse($array);`

# javascript - 如何防止公开查看您的 GA 资产 ID

> ID：13058102
> 
> 赞同：1
> 
> 时间：2012-10-24T21:31:48.490
> 
> 标签：javascript, google-analytics

我想保护客户 Google Analytics 信息的数据完整性。在安装 javascript 时，您需要包含您的属性 ID (UA-xxxxxxx-x) 以将信息发送给 Google。有没有办法从查看页面源的查看者中抽象出来？

我知道您可以在 GA Web 查看器中创建一个过滤器（[在此处阅读](http://blog.kissmetrics.com/protect-analytics-from-hacking/)），但我想知道是否有人试图完全阻止查看该号码，如果是，如何？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T21:33:25.580

你不能。如果公众看不到，谷歌也看不到。谷歌需要这个号码来跟踪一切。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T10:26:11.843

@Diodeus 是正确的。

如果您担心有人向您的个人资料发送信息，您应该设置过滤器以仅包含您拥有的域上的流量。

[Google Analytics：关于配置文件过滤器](http://support.google.com/analytics/bin/answer.py?hl=en&answer=1033162)

# c# - 从数组中的 2 个数字中找到最大和最小数字

> ID：13058103
> 
> 赞同：5
> 
> 时间：2012-10-24T21:31:50.840
> 
> 标签：c#

我试图从用户输入的 2 个整数中找出最大和最小数字。首先，我将字符串转换为 int，然后将它们放入数组中，以便我可以操作它们。我想我在将变量分配给数组时遇到了困难。但是我看不到任何分配给它们的变量的数组示例，这可能是我出错的地方。

```
 private void button1_Click(object sender, EventArgs e)
    {
       string txtbxnum1 = Int32.Parse(num1);
       string txtbxnum2 = Int32.Parse(num2);

       int[] numbers = new int[2] {0,1};
       int numbers [0] = num1;
       int numbers [1] = num2;

       int maximumNumber = Max.numbers();
       int minimumNumber = Min.numbers();
       MessageBox.Show (maximumNumber.Text);
    } 
```

我会很高兴得到任何帮助或指导。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T21:34:56.500

如果您只有两个数字，则不需要数组：[`System.Math`](http://msdn.microsoft.com/en-us/library/system.math.aspx)提供查找两个数字中较小和较大的函数，称为`Math.Max`和`Math.Min`。

```
// Int32.Parse takes a string, and returns an int, not a string:
int n1 = Int32.Parse(num1);
int n2 = Int32.Parse(num2);
// Math.Min and Math.Max functions pick the min and max
int min = Math.Min(n1, n2);
int max = Math.Max(n1, n2);
// Show both numbers in a message box in one go using String.Format:
MessageBox.Show(string.Format("Min:{0} Max:{1}", min, max)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T21:34:44.467

您应该调用`Math.Min`并且`Math.Max`两者都接受两个整数作为参数。

让我知道这是否不够详细。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T21:34:39.433

语法有点混乱。您的代码**不是** `C#`语言有效的代码。

你必须做这样的事情：

```
var numbers = new int[]{0,1,567,4,-5,0,67....}; 
```

而 max/min 就像

```
var maximum = numbers.Max();
var minimum = numbers.Min(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T21:34:48.810

```
int maximumNumber = Math.Max(numbers[0],numbers[1]);
int minimumNumber = Math.Min(numbers[0],numbers[1]);

MessageBox.Show(maximumNumber + " " is the largest and " + minimumNumber + " is the smallest"); 
```

也就是说，您不应该真正访问这样的数组值，但它适用于初学者。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-24T21:36:17.403

我不太了解您与 TextBoxes 的交互以及奇怪的解析然后设置为字符串，但假设 num1 和 num2 是用户输入的整数

```
private void button1_Click(object sender, EventArgs e)
{
    int maximumNumber = Math.Max(num1, num2);
    int minimumNumber = Math.Min(num1, num2);

    MessageBox.Show (maximumNumber);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-24T21:37:54.043

您的代码中有一些错误。

```
string txtbxnum1 = Int32.Parse(num1); 
```

`Int32.Parse`接受一个字符串并返回一个`int`. 但是，您正在尝试将其分配给`string`. 它应该是

```
int txtbxnum1 = Int32.Parse(num1); 
```

像这样分配一个数组：

```
int[] numbers = new int[2] {0,1}; 
```

只需创建一个可以容纳两个整数的新数组，并用值`0`和预填充它们`1`。这不是你想做的。据我所知，您甚至不需要在这里使用数组，除非您在代码中的其他地方使用它。

您可以使用类中的方法找到`Max`和值。`Min``Math`

```
int minimumValue = Math.Min(txtbxnum1,txtbxnum2);
int maximumValue = Math.Max(txtbxnum1,txtbxnum2); 
```

[您可以在MSDN](http://msdn.microsoft.com/en-us/library/system.math.aspx)上找到有关 Math 课程的更多信息。

# spring - 自动装配分层bean

> ID：13058108
> 
> 赞同：3
> 
> 时间：2012-10-24T21:32:41.973
> 
> 标签：spring

这是我的场景。我有两个班级**ClassA**和**ClassB**。**ClassB**继承**ClassA**。
我`@Component`对它们都使用了注释来使它们成为 Spring bean。

```
@Component
public class ClassA{
    // parent
}

@Component
public class ClassB extends ClassA{
    // child
}

public class ClassC{

    @Autowired
    private ClassA classA;

    public void doSomething(){

    }
} 
```

现在，每当我尝试在**ClassC**`@autowired`中使用注释来注入**ClassA**时，如上所示，我得到以下异常。

 ****> 没有定义类型 [ **ClassA** ] 的唯一 bean：预期的单个匹配 bean 但找到了 2： [ **classA**，**classB** ]

我知道当按类型自动连接时，spring 会找到两个可分配给**ClassA**的 bean，因此它会引发异常。

除了使用`@Qualifier`注释和按名称自动连接之外，是否有一种简单的方法可以解决此问题？

我可以指示 spring 不仅检查可按类型分配的 bean，而且检查它是否是完全相同的类类型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T13:32:37.703

是的，使用[`@Primary`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/context/annotation/Primary.html)注释。

如果这不可行并且您不想使用@Qualifier，那么您将不得不手动解决它。就像是：

```
@Autowired
private List<ClassA> candidates;

private ClassA actual;

@PostConstruct
public void postConstruct() {
    for (ClassA candidate : candidates) {
        if (AopProxyUtils.ultimateTargetClass(candidate).equals(ClassA.class)) {
            actual = candidate;
            break;
        }
    }
    org.springframework.util.Assert.notNull(actual , "No bean of exact type ClassA found.");
} 
```****

# c# - SQL Server 和 C# 主/从插入

> ID：13058109
> 
> 赞同：2
> 
> 时间：2012-10-24T21:32:58.420
> 
> 标签：c#, sql-server, stored-procedures, transactions, master-detail

我正在创建将从我的 C# 应用程序调用的存储过程，并将主/详细信息输入 SQL Server。在 Header 表中，我有`TransactionId`一个 Identity 列，这样每次插入时我都会获得一个唯一的 ID。当我为详细信息表调用存储过程时，我想使用 Header 中的 PK ID 并将其插入到详细信息的 FK 中。确保我取回刚刚在 Header 表中创建的 ID 的最佳方法是什么？

```
CREATE TABLE [dbo].[Header835]
(
   [TRANSACTIONID] [int] IDENTITY(1, 1) NOT NULL
   , [FILENAME] [varchar](80) COLLATE SQL_Latin1_General_CP1_CI_AS NOT NULL
   , [TRADINGPARTNERNAME] [nvarchar](50) COLLATE SQL_Latin1_General_CP1_CI_AS NOT NULL
   , [ISACRTL] [numeric](18, 0) NOT NULL
   , [STCRTL] [numeric](18, 0) NOT NULL
   , CONSTRAINT [PK_Header835] PRIMARY KEY CLUSTERED
   (
      [TRANSACTIONID] ASC
   ) WITH (IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T22:04:41.713

你会想使用[**SCOPE_IDENTITY()**](http://msdn.microsoft.com/en-us/library/ms190315.aspx)

```
DECLARE @headerTransactionId INT;

INSERT INTO dbo.Header835(Filename, TradingPartnerName, IsACrtl, StCrtl)
SELECT 'myFile.txt', 'Joe', 103, 123;

SELECT @headerTransactionId = SCOPE_IDENTITY(); 
```

[**SQL 小提琴**](http://sqlfiddle.com/#!3/b3028/3/0)示例

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T22:05:50.627

查看我的博客文章，了解不同的方法以及这里的优缺点：

[http://sqlity.net/en/351/identity-crisis/](http://sqlity.net/en/351/identity-crisis/)

简而言之，您希望您的代码如下所示：

```
DECLARE @IdentValues TABLE(v INT);

INSERT INTO [dbo].[Header835](<...  column list ...>) 
OUTPUT INSERTED.[TRANSACTIONID] INTO @IdentValues(v)
VALUES(<... value list ...>);

SELECT v AS IdentityValues FROM @IdentValues; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T22:21:37.427

在 Header835 表中插入一条记录后，您将使用 SELECT @@IDENTITY 或 SELECT SCOPE_IDENTITY() 获得自动生成的 TransactionId 标识值，两者都将返回会话中最后一个自动生成的标识。然后，您可以在详细记录的外键中使用此值。

# c# - 如何以编程方式确定是否为 SharePoint 2010 Web 应用程序启用了匿名访问？

> ID：13058110
> 
> 赞同：2
> 
> 时间：2012-10-24T21:33:22.080
> 
> 标签：c#, sharepoint, sharepoint-2010

在管理中心\管理 Web 应用程序中，可以通过身份验证提供程序启用对 Web 应用程序的匿名访问。有没有办法以编程方式确定是否启用了此选项？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T01:35:58.607

这应该适合你：

`web.Site.WebApplication.IisSettings[Microsoft.SharePoint.Administration.SPUrlZone.Internet].AllowAnonymous`

我从网络开始，但显然你可以从任何需要的地方开始。还要确保查看适当的区域。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T07:54:19.990

SPWeb 对象公开以下布尔值：

允许匿名访问

例子 ：

```
web.AllowAnonymousAccess; 
```

*MSDN：获取一个布尔值，指示是否允许网站匿名访问*

# service - axis2 忽略的特定服务库

> ID：13058114
> 
> 赞同：1
> 
> 时间：2012-10-24T21:33:29.883
> 
> 标签：service, jar, axis2

我有一个axis2服务部署为一个包含服务特定库的aar文件。我对 httpclient-4.2.jar 和 httpcore-4.2.jar 有问题，在我看来，错误消息不是加载了服务 jar，而是加载了axis2 jar（其中包含 httpcore-4.0.jar）。

aar 文件的结构如下所示，应该是正确的：

```
aar
|- lib
|--|- httpclient-4.2.jar
|--|- httpcore-4.2.jar
|--|- LICENSES
|- my
|--|- services
|--|--|- *.class
|- META-INF
|--| - services.xml 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T08:34:15.107

.aar 中的 JARS 不是 100% 与 WEB-INF/lib 相同的上下文，但也不是 100% 分离的。
这就是我们不将库和逻辑打包到 .aar 文件中的原因。
我们只将 service.xml 放在 aar 文件中。类位于 WEB-INF/lib JAR 中。
通过这样做，您拥有常规的 webapp 上下文，并且您的服务还能够返回 WEB-INF/lib 上下文中的所有对象类型/类。

塞巴斯蒂安

# matplotlib - 为什么NetworkX在执行时会自动旋转图形

> ID：13058120
> 
> 赞同：3
> 
> 时间：2012-10-24T21:33:45.810
> 
> 标签：matplotlib, networkx

我正在[练习 networkx.lanl.gov/examples上的 NetworkX 示例](http://networkx.lanl.gov/examples/)

每次我运行 weighted_graph 示例时，图表似乎已经旋转。为什么图形会旋转？

有没有办法控制旋转以使图形始终处于同一位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T22:23:53.133

您看到的是用于定位节点的 nx.spring_layout() 算法的结果。该算法从节点的随机位置开始，因此结果是不确定的。

但是，您可以指定一个非随机的初始位置，例如使用这样的圆形布局，

```
pos=nx.circular_layout(G)
pos=nx.spring_layout(G,dim=2,pos=pos) # positions for all nodes 
```

然后你应该每次都得到相同的结果。

# artificial-intelligence - 关键字识别 - 有可能吗？

> ID：13058121
> 
> 赞同：0
> 
> 时间：2012-10-24T21:33:51.463
> 
> 标签：artificial-intelligence, neural-network, keyword

我有一个系统，可以让用户搜索他想要的任何内容，并将来自不同位置的内容抓取到一个页面中。

我通过关键字/标签或几个关键字限制搜索结果，因此用户不会得到他从未要求过的垃圾。而且我始终坚持主要市场/标签主题（关键字），以免搜索出错。

一开始一切都很好，但是当我深入开发这个系统时，我开始明白我无法预测或过滤将要检索的内容。

该系统是自动的，fe，当您搜索“克里斯蒂亚诺·罗纳尔多”时，我想获取他的照片、视频、推特、新闻和其他内容。当我从所有这些中构建一个页面时，为了增强我的搜索引擎优化，我在内容中使用最多重复的词来提供更多内容，例如“查看更多”等链接或基于 1 个用户搜索生成更多页面。

当自动内容爬虫开始带来废话内容时，我遇到了一个问题。我搜索“virgin atlantic”，它给我带来了我想要的航空公司信息，使用部分内容和来自该信息的关键字，我进一步查找，它给我带来了弗吉尼亚，这是相关的，但不是我想要的想。然后它带来东/西，然后是美国，然后它朝着错误的方向越来越深。

那是一个简短的。我真正的问题......是否有任何算法，理论或其他内容可供阅读，是否可以识别内容/关键字与我手动设置的主题的主题/方向/意义/相关性。

所以如果我说 -> 只去寻找与体育相关的内容，它不会给我带来关于罗纳尔多新女友的消息，而是他的统计数据、职业数据等等。

我不在乎让一个人手动过滤内容并告诉 AI：接受/拒绝，这样它就会根据请求的主题/模式学习带什么和不带什么。

神经网络，还有其他识别内容的 AI 算法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T13:04:53.037

**简短**的回答：看看隐藏马尔可夫模型和贝叶斯网络和语义网络研究。人们可以用关于这个主题的研究填满整个图书馆。

**长答案**：

人工智能的问题通常是这些类型的问题非常非常困难。是的，有很多理论。但实施这些理论是另一回事。我见过一些公司制造某种引擎，他们对此感到非常自豪。但随后他们通常以工具为中心，而忘记了他们真正想要解决的问题。这就是我称之为 AI-blackbox-problem 的问题。你有一个算法，比如隐马尔可夫模型、神经网络、贝叶斯网络、卡尔曼滤波器、支持向量机等。然后你向它们扔一堆数据，它们就会输出一堆参数化模型。但通常不可能追踪内部状态。

因此，如果您想解决语义网络问题，您就选择了最难的问题之一。如何告诉计算机你在找什么？那么谷歌使用链接结构来检索信息。然后是语义网络的支持者，他们说内容提供者应该添加一堆元数据。我认为这种方法在很大程度上失败了。总是有新的初创公司试图在这个领域做新的事情。Palantir 可能是那些通过的数据挖掘公司之一。

所以我建议从使用玩具问题学习基础知识开始，拿起一本教科书，比如 Russell/Norvig，去上课，你现在可以在网上上课，[http://www.udacity.com/overview/Course/cs373 /CourseRev/apr2012](http://www.udacity.com/overview/Course/cs373/CourseRev/apr2012)，然后从那里开始。解决难题并没有错，但很容易感到沮丧。知道您的问题可以在有限的时间和资源内解决。（说我自己在一个几乎不可能的问题上工作了 5 年）。

# javascript - D3 树节点双击高亮文本

> ID：13058123
> 
> 赞同：5
> 
> 时间：2012-10-24T21:33:56.697
> 
> 标签：javascript, svg, d3.js, tree

我有一个树视图（类似于[http://mbostock.github.com/d3/talk/20111018/tree.html](http://mbostock.github.com/d3/talk/20111018/tree.html)），除了我将扩展/收缩节点从单击更改为双击事件：

也就是说，而不是

```
.on("click", function(d) { toggle(d); update(d); }); 
```

我在用：

```
.on("dblclick", function(d) { toggle(d); update(d); }); 
```

它运行良好。问题是双击突出显示节点上的文本标签。它不会影响过渡，但很烦人。除了删除节点并在过渡结束时将其添加回来之外，有谁知道防止这种情况发生的方法？

顺便说一句，我已经尝试添加

```
d3.event.preventDefault() 
```

在双击事件中，它没有任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T21:43:38.020

谷歌返回以下结果： [http ://chris-barr.com/index.php/entry/disable_text_selection_with_jquery/](http://chris-barr.com/index.php/entry/disable_text_selection_with_jquery/)

该页面上的代码是

```
$(function(){
    $.extend($.fn.disableTextSelect = function() {
        return this.each(function(){
            if($.browser.mozilla){//Firefox
                $(this).css('MozUserSelect','none');
            }else if($.browser.msie){//IE
                $(this).bind('selectstart',function(){return false;});
            }else{//Opera, etc.
                $(this).mousedown(function(){return false;});
            }
        });
    });
    $('.noSelect').disableTextSelect();//No text selection on elements with a class of 'noSelect'
}); 
```

但是，在这种情况下，您可以将“.noSelect”替换为“.node”，它应该禁用所有节点的文本突出显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T22:29:53.447

如果您不想完全禁用文本选择（这通常对用户来说更好），您可以通过[selectSubString](http://www.w3.org/TR/SVG11/text.html#__svg__SVGTextContentElement__selectSubString)手动取消选择元素。

```
.on("dblclick", function(d) { 
    toggle(d); update(d);
    var text = d3.select(this).select("text")[0][0]
    text.selectSubString(0,0)
}); 
```

但这还不能跨浏览器工作，因为在许多情况下 SVG API 还没有完全实现。（它至少在 Chrome 中有效）

更好的跨浏览器方式是重写文本。这通常也会杀死选择：

```
g.on("dblclick", function(d) {
    toggle(d); update(d);
    var text = d3.select(this).select("text")
    var value = text.text()
    text.text(value)
}) 
```

这至少在 Firefox 和 Chrome 中有效。

# java - 如何在抽象类的方法中观察变量值

> ID：13058129
> 
> 赞同：1
> 
> 时间：2012-10-24T21:34:34.220
> 
> 标签：java, debugging, abstract-class

IDE 是 Eclipse，当我调试/跟踪时，我想在抽象类的方法中观察变量，但它没有显示任何内容。

有任何想法吗？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-09T03:28:05.193

那么你将如何调用抽象类的方法呢？你需要有一个类的实例来调用它的非静态方法。我的建议是，创建一个扩展抽象类的类，并从扩展类调用抽象类中的方法，如下所示。

```
public class AbstractClass {
    public void aMethodToDebug(){
       System.out.println("debug this");
    }
}

public class ExtendingClass extends AbstractClass {
    public static void main(String[] args){
        ExtendingClass obj = new ExtendingClass();
        obj.aMethodToDebug();
    }

} 
```

# python - PyMongo - 查询嵌入文档列表

> ID：13058130
> 
> 赞同：3
> 
> 时间：2012-10-24T21:34:37.360
> 
> 标签：python, mongodb, pymongo

这里有一些关于此的帖子，但不完全是我所追求的。

我有一个包含嵌入文档列表的文档：

```
{
   "_id": 1234
   "name": "joe"
   "comments": [
       {"type": "text", "content": "my content"},
       {"type": "image", "content": "my_content"}
       {"type": "image", "content": "my_content"}
   ]

} 
```

我想运行一个获取一组文档的查询，然后我希望运行一个辅助查询来搜索该初始查询集中的“评论”列表。

例如`p = db.people.find({"some":"condition"})`，然后搜索嵌入式文档，例如`p.find({"type":"image"}`

这显然是行不通的。只是想知道是否有办法做到这一点而不必再次对父文档集合运行 2 个单独的查询？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T21:53:08.910

如果您只想在集合中找到满足给定条件并在数组中满足的项目*，*`{"type": "image"}`您可以`comments`在单个查询中执行此操作：

```
p = db.people.find({"some": "condition", "comments.type": "image"}) 
```

有关更多信息，请参阅[点符号](https://docs.mongodb.com/manual/core/document/#dot-notation)页面。

如果您确实需要整个内容，并且您对所述结果中的特定子项感兴趣，那么我能想到的最好的方法就是将结果放入列表中，然后在 Python 中进行检查。任何 PyMongo 大师对此有什么要说的吗？请注意，如果您的数据集很大，那么这**不是**一个好主意。

```
p = list(db.people.find({"some": "condition"})

# A little verbose, but...
image_p = [item for item in p
           if any(comment['type'] == 'image'
                  for comment in item['comments'])]

... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T22:38:22.867

仅`find`使用点符号的问题是**您将始终获得整个文档**，**而不仅仅是子文档。**

使用 mongodb 2.2 能够使用[Aggregation](http://blog.pythonisito.com/2012/06/using-mongodbs-new-aggregation.html)。

[看这里](https://groups.google.com/group/mongodb-user/browse_thread/thread/9cfb62609de046ee/d6ff897143c1a158?hl=fr&)

注意：[$ElementMatch](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%24elemMatch)与位置元素（ ）一起使用时不会迭代`something.$.someattribute`，它会在第一个匹配的文档后退出，所以使用聚合来获取所有匹配的子文档:)

# ruby-on-rails - wash_out 解析失败：SOAP 错误而不是 HTML 错误

> ID：13058132
> 
> 赞同：0
> 
> 时间：2012-10-24T21:34:37.390
> 
> 标签：ruby-on-rails, soap, rack, activesupport, actionpack

因此，当您在 Rails 中使用wash_out gem，并且客户端发送错误的 XML 时，响应如下：

```
<html>…
  <body>
    <h1>REXML::ParseException</h1> 
    … 
```

而不是正确的 SOAP 响应，如下所示：

```
<soap:Body>
  <soap:Fault>
    <faultcode>soap:Client</faultcode>
    … 
```

我首先尝试修补wash_out 本身。我设法在其测试中重现了 REXML::ParseException，但随后令我沮丧的是，Rails 在wash_out 触及参数之前实际上解析（并爆炸）错误的 XML。

那么，wash_out gem 应该如何挂钩到 Rails 中，以便它可以挽救那些异常，只针对它拥有的路由？

这是我们必须使用的回溯。我很确定其中有些地方非常适合挂钩，但我还不知道是哪一个：

```
malformed XML: missing tag start
Line: 13
Position: 558
Last 80 unconsumed characters:
<urn:                <Width xsi:type="xsd:int">1</Width>                <Height x
Line: 13
Position: 558
Last 80 unconsumed characters:
<urn:                <Width xsi:type="xsd:int">1</Width>                <Height x):
  /home/rking/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/rexml/parsers/treeparser.rb:95:in `rescue in parse'
  /home/rking/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/rexml/parsers/treeparser.rb:20:in `parse'
  /home/rking/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/rexml/document.rb:231:in `build'
  /home/rking/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/rexml/document.rb:43:in `initialize'
  activesupport (3.2.8) lib/active_support/xml_mini/rexml.rb:30:in `new'
  activesupport (3.2.8) lib/active_support/xml_mini/rexml.rb:30:in `parse'
  activesupport (3.2.8) lib/active_support/xml_mini.rb:80:in `parse'
  activesupport (3.2.8) lib/active_support/core_ext/hash/conversions.rb:90:in `from_xml'
  actionpack (3.2.8) lib/action_dispatch/middleware/params_parser.rb:41:in `parse_formatted_parameters'
  actionpack (3.2.8) lib/action_dispatch/middleware/params_parser.rb:17:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.1) lib/rack/session/abstract/id.rb:205:in `context'
  rack (1.4.1) lib/rack/session/abstract/id.rb:200:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/cookies.rb:339:in `call'
  activerecord (3.2.8) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.8) lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `_run__937528092__call__217727214__callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.8) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.8) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.8) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.1) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.8) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.1) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/static.rb:62:in `call'
  railties (3.2.8) lib/rails/engine.rb:479:in `call'
  railties (3.2.8) lib/rails/application.rb:223:in `call'
  rack (1.4.1) lib/rack/content_length.rb:14:in `call'
  railties (3.2.8) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.1) lib/rack/handler/webrick.rb:59:in `service'
  /home/rking/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /home/rking/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /home/rking/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread' 
```

谢谢！—☈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T17:59:26.123

This works:

[https://github.com/exad/wash_out/commit/7695dcf9214ab3176b6e3c795c1d309571f7854c](https://github.com/exad/wash_out/commit/7695dcf9214ab3176b6e3c795c1d309571f7854c)

Basically, we created a Rack Middleware layer and inserted that at the right place.

# mongodb - 带有附加位置参数的 mongo 地理空间查询

> ID：13058136
> 
> 赞同：0
> 
> 时间：2012-10-24T21:34:46.730
> 
> 标签：mongodb, geospatial

鉴于以下文件：

```
{
  _id: 'foo'
  locations: [
    {
      lat: 1,
      lon: 2,
      type: 'home'
    },
    {
      lat: 10,
      lon: 20,
      type: 'office'
    }
  ]
}

{
  _id: 'bar'
  locations: [
    {
      lat: 10,
      lon: 20,
      type: 'home'
    },
    {
      lat: 1,
      lon: 2,
      type: 'office'
    }
  ]
} 
```

是否可以在特定类型的位置附近找到所有文档？

例如，查询： `db.objects.find({locations: {$near: {lat: 1, lon: 2}, $maxDistance: 1}, 'locations.type': 'home'})`

返回 foo 和 bar 因为两者都有一个类型为 'home' 的位置和一个靠近 [1,2] 的位置

我想要查询做的是只找到 foo 因为它的家位置在 [1,2] 附近

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T01:11:39.373

您可以考虑更改架构。考虑多个文档，而不是具有位置数组的单个文档，每个文档代表一个具有类型名称的单个位置。

您需要在此处执行的查询类型需要 $elemMatch 以保证*在同一个数组元素上*满足您的两个条件- 为此我们使用 elemMatch。不幸的是，它不适用于 geoSpatial 查询 - 至少目前没有办法构建它。有一张出色的[Jira 票](https://jira.mongodb.org/browse/SERVER-3325)可以让它发挥作用。

# precision - libquadmath 和 GNU-gsl ode 求解器？

> ID：13058142
> 
> 赞同：0
> 
> 时间：2012-10-24T21:35:20.633
> 
> 标签：precision, gsl, floating-point-precision

在求解 ODE 时，我想要 40 位或更多小数位的工作精度。谁能告诉我是否可以使用 gsl ODE 求解器（也许使用 libquadmath）获得更高精度的结果？[从http://www.gnu.org/software/gsl/manual/gsl-ref.html#Driver](http://www.gnu.org/software/gsl/manual/gsl-ref.html#Driver)的 gsl_odeiv2 文档中可以看出，它们只需要双打，但真的是这样吗？

如果没有，有人可以提出替代方案吗？'odeint' 之类的东西是否支持高于双精度？我必须从头开始编写自己的吗？

（作为参考，我的具体问题是：[Writing Runge-Kutta ODE solver using gsl](https://stackoverflow.com/questions/13053768/writing-runge-kutta-ode-solver-using-gsl)，现在由于 Daniel Fischer 修复了错误）

# ios - NSString sizeWithFont 没有返回正确的高度

> ID：13058144
> 
> 赞同：0
> 
> 时间：2012-10-24T21:35:30.440
> 
> 标签：ios, nsstring, uilabel

我在滚动视图中有一个标签和一些其他项目。在 -viewDidLoad 中，我在标签中设置了文本，并且我想增加标签的高度以使所有文本都适合。所以，我计算文本的大小限制在标签的现有宽度里面，这是一个非常非常大的高度限制。

计算出的高度太小了，文本被包裹起来。我已经在 iOS4.3、iOS5.0 和 iOS6.0 iPad 模拟器上尝试过，但在所有这些模拟器上都无法正常工作。

任何想法？

```
self.labelTextDescription.text = self.purchase.textDescription;
self.labelTextDescription.backgroundColor = [UIColor redColor];

CGSize allowedSize = self.labelTextDescription.frame.size;
allowedSize.height = 100000;

CGSize textSize = [self.labelTextDescription.text sizeWithFont:self.labelTextDescription.font constrainedToSize:allowedSize lineBreakMode:UILineBreakModeWordWrap]; 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-25T08:07:09.880

UILabel 的行数默认为 1。您可以自己计算，或者正如 David Rönnqvist 指出的那样，您也可以使用 0（更容易）。但是您的代码本身并没有错。

也许这个小代码片段会为您指明正确的方向。

```
UILabel *label = [[UILabel alloc] init];
label.text = @"Lorem ipsum dolor sit amet.";

CGSize allowedSize = CGSizeMake(100, MAXFLOAT);
CGSize textSize = [label.text sizeWithFont:label.font constrainedToSize:allowedSize lineBreakMode:UILineBreakModeWordWrap];

label.frame = CGRectMake(0, 0, textSize.width, textSize.height);
label.numberOfLines = 0; //EDIT: If you want to calculate it yourself use ceilf(textSize.height / label.font.lineHeight);
[self.view addSubview:label]; 
```

# java - 导入或实现可重用的静态？

> ID：13058145
> 
> 赞同：0
> 
> 时间：2012-10-24T21:35:33.770
> 
> 标签：java, inheritance, interface, static, classloader

## 选项1：

```
public class WidgetStatics {
    public static final String FIZZ = "fizz";
    public static final String BUZZ = "buzz";
} 
```

进而：

```
import com.me.myorg.myapp.WidgetStatics

public class Thing1 {
    public void doSomething() {
        String x = getValueFromUser();
        if(x.equals(WidgetStatics.FIZZ))
            // ...
    }
} 
```

## 选项#2：

```
public interface WidgetStatics {
    public static final String FIZZ = "fizz";
    public static final String BUZZ = "buzz";
    // ...
} 
```

进而：

```
public class Thing2 implements WidgetStatics {
    public void doSomething() {
        String x = getValueFromUser();
        if(x.equals(FIZZ))
            // ...
    }
} 
```

我的问题：

*   一种选择是否比另一种更高效？哪个会导致更多的努力`ClassLoader`：导入或实施？
*   是否存在一种方法比另一种方法更可取/更清洁的特定用例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T21:42:27.870

解决特定问题的方法总是不止一种。

Java 中引入了接口来解决某些设计问题。一个当然是流行的多重继承问题。使用接口的另一个重要场景是当您想要设计一个类结构时，其中某些类必须遵守接口中定义的协定（因此它们需要实现相关的接口）。

由于在您的情况下，您似乎没有执行任何此类合同或设计建议，因此我建议您不要为此使用接口。

# php - 为什么这个 htaccess 规则将两个匹配项分配给一个 $_GET 变量？

> ID：13058146
> 
> 赞同：0
> 
> 时间：2012-10-24T21:35:38.583
> 
> 标签：php, .htaccess, mod-rewrite, get

这是我网站的个人资料页面的 htaccess 规则：

```
RewriteRule ^users/([0-9]+)/?(.+)?/?(.+)? profile.php?id=$1&slug=$2&tab=$3&%{QUERY_STRING} 
```

当您单击用户个人资料上的选项卡时，例如**收藏夹**：

> /users/83028/nathan-johnson/favorites

根据a `$_GET`，名称为*slug*的变量正在接收`nathan-johnson/favorites`而不是 just`nathan-johnson`并且`tab`变量为空白`var_dump`：

```
array(3) { 
      ["id"]=> string(5) "83028" 
      ["slug"]=> string(24) "nathan-johnson/favorites" 
      ["tab"]=> string(0) "" } 
```

看起来问题出在我的 htaccess 正则表达式（上），但我没有看到它的问题。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T22:25:25.070

因为您的正斜杠是可选的（通过`/?`），所以`(.+)`分组是贪婪的，并且会将它们全部吞噬。您需要通过添加**?** : (.+?)

`(.+)?`此外，您应该只使用 a来代替，`*`这意味着没有、一个或多个。

尝试：

```
RewriteRule ^users/([0-9]+)/?([^/]*)/?(.*?)?$ profile.php?id=$1&slug=$2&tab=$3&%{QUERY_STRING} 
```

`%{QUERY_STRING}`此外，您可以只使用`QSA`标志而不是 using ：

```
RewriteRule ^users/([0-9]+)/?([^/]*)/?(.*?)?$ profile.php?id=$1&slug=$2&tab=$3 [L,QSA] 
```

# image - 调整大小时动作脚本加载器消失

> ID：13058147
> 
> 赞同：0
> 
> 时间：2012-10-24T21:35:51.783
> 
> 标签：image, flash, actionscript, resize, loader

所以我正在尝试调整包含图像的加载器的大小。这就是发生的事情：![在此处输入图像描述](../Images/abd01bf9d15d764f2ff93a0dc2114313.png)

img_width 是我作为参数接收的 int 。请注意，当我不尝试设置图像的宽度或高度时，图像会出现在屏幕上，但现在不是。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T21:55:26.833

好的，所以这是我的一个初学者错误，我只需要在调整内容之前确保内容是带有监听器的加载器。

# netty - 如何使用 Netty 进行服务器到服务器的二进制 websocket 通信？

> ID：13058150
> 
> 赞同：1
> 
> 时间：2012-10-24T21:36:02.593
> 
> 标签：netty

背景：我有托管有状态对象实例的应用程序服务器逻辑。我计划拥有多个服务器——每个服务器都托管有状态的对象实例。注意：这不是具有相同对象镜像的集群，而是更多的联合模型。

我的应用程序服务器的每个实例都使用 Netty 并支持 HTTP 和 WebSockets。

我希望使用 Netty WebSocket 管道作为通信层，不仅用于 server_1/server_2，还用于 server_1/object_A 与 server_2/object_X 的通信。

例如：

*   Server_1 有对象 {OA, OB, OC}，Server_2 有对象 {OX, OY, OZ}
*   S1:OA 可以与 S2:OX 通信
*   S1:OB 也可以与 S2:OX 通信

问题）：

*   1) 是否有推荐的方法来使用 Netty 在不同服务器中运行的对象之间进行通信？有没有例子？
*   2）我应该缓存服务器之间的通道并将所有对象-对象请求集中在上面吗？这是线程安全的吗？
*   3）或者，我应该使用单独的通道进行服务器和对象级通信 - 根据需要动态创建/销毁它们吗？

从网络利用率的角度来看，我认为对于 Server_1 和 Server_2 之间的所有双向通信，选项 #2 将是首选。

如果您需要任何说明或更多详细信息，请随时询问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T05:32:35.727

如果你想通过 Java 类发送，我建议使用 Netty[1] 附带的编组编码器/解码器。

对于您的另一个问题，通道上的所有操作都是线程安全的。

[1] [https://github.com/netty/netty/tree/3/src/main/java/org/jboss/netty/handler/codec/marshalling](https://github.com/netty/netty/tree/3/src/main/java/org/jboss/netty/handler/codec/marshalling)

# c# - SQL Server 连接字符串。w/ 远程机器需要 IP:PORT 和 SQLPORT

> ID：13058155
> 
> 赞同：0
> 
> 时间：2012-10-24T21:36:21.727
> 
> 标签：c#, sql-server, connection-string

我的问题是尝试在 C# 中创建一个连接字符串，该字符串远程连接到 SQL Server 2012 数据库。如果托管 SQL Server 的机器不需要端口号来导航，我可以成功地做到这一点。现在我们已经重新路由了我们的 ip，托管 SQL Server 的机器的 ip 是 XXX.XXX.XXX.XXX:16500，其中 SQL Server 仍在侦听默认端口 1433。

我知道您可以像这样指定 SQL Server 实例使用的端口号；

```
data source=XXX.XXX.XXX.XXX,1433;Network Library=DBMSSOCN;initial catalog=Order;User ID=test1;Password=test1;"); 
```

我们的问题是，我们的远程机器不仅仅是一个 IP。它是一个IP和一个端口。

`XXX.XXX.XXX.XXX:16500`将手动导航到所需的 PC，忽略端口号会将您带到另一台计算机。我们正在努力完成这样的事情；

```
data source=XXX.XXX.XXX.XXX:16500,1433;Network Library=DBMSSOCN;initial catalog=Order;User ID=test1;Password=test1;"); 
```

我一生都找不到如何做到这一点。我想将我的数据源设置为远程 IP:PORT，以及设置 SQL Server 将侦听的端口（我知道 1433 是默认值，但在某些情况下我们可能必须更改它，所以它需要未来）

我努力了;

```
data source=XXX.XXX.XXX.XXX:16500,1433;Network Library=DBMSSOCN;initial catalog=Order;User ID=test1;Password=test1;"); 
```

错误：

> *与 SQL Server 建立连接时发生与网络相关或特定于实例的错误...*

```
data source=XXX.XXX.XXX.XXX:16500;Network Library=DBMSSOCN;initial catalog=Order;User ID=test1;Password=test1;"); 
```

错误：

> *与 SQL Server 建立连接时发生与网络相关或特定于实例的错误...*

```
data source=XXX.XXX.XXX.XXX,16500;Network Library=DBMSSOCN;initial catalog=Order;User ID=test1;Password=test1;"); 
```

错误：

> *与服务器成功建立连接，但在登录前握手期间发生错误。（提供者：TCP 提供者，错误：0 - 现有连接被远程主机强行关闭。）*

在这里，我似乎只是连接到错误的服务器，试图为 SQL Server 使用端口 16500，这是不正确的。

任何人都可以请发光，这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T21:49:08.773

这听起来像您拥有的 IP 地址实际上是一个 NAT 设备，它根据用于连接它的端口将流量转发到另一台机器。如果是这种情况，您需要让您的 NAT 管理员在 NAT 上创建一个公共端口，该端口将被转发到您的 SQL Server 计算机上的端口 1433。任何端口转发始终只转发到单个端口，因此如果没有设置新的转发规则，您尝试执行的操作将无法进行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T22:28:14.757

从网络的角度来看，您所说的没有意义：根据定义，主机与一个或多个 IP 地址相关联，而不是与 IP:Port 组合相关联。

我同意塞巴斯蒂安的观点，听起来您的网络管理员设置了 NAT 或其他类型的路由/防火墙，以便（通过 TCP？）连接到路由器/防火墙/NAT 上的 XXX.XXX.XXX.XXX:16500 会转发连接到在 SQL 服务器机器的某个端口上侦听的某个应用程序（可能是远程桌面应用程序。）

您需要按照 Sebastian 的建议请求将端口转发到要配置的 sql 服务器。另一种选择是设置 SSH 服务器以侦听已转发的端口（或其他端口），然后您（或您的网络管理员）可以为所需的任何应用程序设置安全隧道，而无需更改防火墙配置。

通过 NAT/路由器/防火墙在多个应用程序的多个端口上完成转发，或使用 SHH 在单个端口上建立隧道，各有其优点和缺点。与您的网络管理员交谈，他应该能够确定哪种方案更适合您的情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T23:02:09.283

> MS SQL Server 是 XXX.XXX.XXX.XXX:16500，其中 MS SQL 仍在侦听默认端口 1433。

Um.. no.. NAT 设备位于 XXX.XXX.XXX.XXX，它将端口 16500 转发到您的 SQL Server。您不知道 SQL 服务器 IP 地址，因为您的应用程序完全无法访问该地址，因为 NAT 在您和它之间。您也不知道/不在乎 SQL 服务器安装在哪个端口号上：这是 NAT 的工作。

因此，要使用的正确连接字符串是：

```
data source=XXX.XXX.XXX.XXX,16500;Network Library=DBMSSOCN;initial catalog=Order;User ID=test1;Password=test1;"; 
```

现在，你说你在这里收到了一个错误。该错误表明您已成功连接，但还有其他问题正在发生。可能导致这种情况的事情包括：

*   SQL Server 已达到其连接限制（很可能）
*   SQL Server 需要加密连接，但这不是您要建立的
*   使用了错误的 ssl 证书
*   SQL Server 只需要 Windows 身份验证，您没有使用它
*   SQL Server 上未启用 TCP/IP 连接
*   您与 NAT 或 NAT 与 SQL 服务器之间的数据压缩。
*   在连接信息到达 SQL 服务器之前，NAT 会破坏连接信息（当然可能是配置错误的 NAT）。
*   SynAttackProtect 在某处被打开，你已经尝试了很多事情，它把你踢了出去。
*   NAT 和 SQL Server 之间有足够的延迟导致 SQL Server 踢出连接。
*   还有更多...

本质上这里存在网络问题，而不是由于端口号。你必须让网络管理员参与进来，看看发生了什么。

我会放下钱，问题是SQL服务器上的配置问题人为地限制连接数，或者NAT在请求正确转发到数据库服务器之前正在劫持请求。

请参阅以下内容：http: [//betav.com/blog/billva/2008/11/solution-forcibly-closed-sql-s.html](http://betav.com/blog/billva/2008/11/solution-forcibly-closed-sql-s.html) http://arshpreet9.wordpress.com/category/sql-errorsbug-fixes /

# objective-c - ios：防止滚动视图缩放超出范围

> ID：13058156
> 
> 赞同：0
> 
> 时间：2012-10-24T21:36:31.117
> 
> 标签：objective-c, ios, xcode

在我的 iphone 应用程序中，如果我将屏幕分成两部分，顶部是滚动视图，底部是其他部分，问题是，当用户放大滚动视图时，如何防止它缩小并隐藏屏幕的第二部分？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T22:33:07.880

听起来您需要将 UIScrollView 上的 clipsToBounds 属性设置为 true。

# algorithm - 从三胞胎构建系统发育树

> ID：13058158
> 
> 赞同：0
> 
> 时间：2012-10-24T21:36:38.693
> 
> 标签：algorithm, tree, phylogeny

我的任务是编写一个简短的程序来创建一个系统发育树（叶节点中的所有数据）给定一个三元组数据集，形式为（**b**，**c**，**a**），其中**a**是最不常见的祖先**b**和**c**。_

我有一份 Aho、Sagiv、Szymanski 和 Ullman 的论文“Inferring a Tree from Lowest Common Ancestors with an Application to the Optimization of Relational Expressions”（SIAM J. Computing 第 10 卷第 3 期，1981 年 8 月）。我已经完成了算法的描述，但被困在标记为“归纳”的部分，叶子是由它们的共同祖先选择的。在网上查找信息会发现我的页面往往会跳过这部分。我认为这很明显，我错过了什么？

到目前为止我所拥有的（在 perl 中，尚未分解为子例程）：

```
use strict;
use warnings;
use Graph; 
use Tree::DAG_NODE;

my @triplets;
while (<>) {
    push @triplets, [ split ];
}

#
# In order to generate the G(L) extract the first two
# columns(edges) of @triplets to make the edges of the auxiliary
# graph. Then pass this array of edges to the Graph constructor.
#
my @auxiliary_edges = map { [@$_[0,1]] } @triplets;

my $graph = Graph->new(
    undirected => 1,
    edges => \@auxiliary_edges
);

my @components = $auxiliary_graph->connected_components;

die "No Tree!" if (@components == 1);     # No tree!

my $root = Tree::DAG_Node->new;
$root->name('_ROOT');

#
# Each connected component is a set of leaves.
#
for my $component (@components)
{
    print "Component (leaf set): [", join(", ", @$component), "]\n";

    #
    # To be written: induced(), which is the heart of my problem,
    # and add_phylo_tree(), which isn't.
    #
    my @matches = induced(\@triplets, $component);
    add_phylo_tree($root, @matches);
}

print_tree($root);    # To be written. I'm using Data::Dumper right now.
exit(0); 
```

数据文件：

```
b c a
a c d
d e b 
```

搜索（[https://www.google.com/search?q=phylogenetic+tree+from+triplets](https://www.google.com/search?q=phylogenetic+tree+from+triplets)是典型的）到目前为止还没有给我有用的信息，尽管[Triplet Methods](http://citeseerx.ist.psu.edu/viewdoc/download;jsessionid=0772DCA9649E3596FE5319A41B0F3193?doi=10.1.1.135.7740&rep=rep1&type=pdf) (PDF) 接近了（我怀疑有一个错误虽然在图表中）。

我还阅读了 Snir 和 Rao 的“Using Max Cut to Enhance Rooted Trees Consistency”，IEEE/ACM Transactions on Computaional Biology and Bioinformatics，vol 3 no。2006 年 10 月至 12 月 4 日），这有助于澄清一些问题，但不是阻碍我的问题。

谢谢你。

# ruby - 每天在不同时间设置一个 When 作业

> ID：13058160
> 
> 赞同：12
> 
> 时间：2012-10-24T21:36:52.327
> 
> 标签：ruby, whenever

我正在尝试设置一个应每天执行 2 次的 When 作业，恰好在上午 11 点和晚上 11 点。有什么办法只用一个块吗？我的意思是这样的：

```
every :day, :at => ['11am','11pm'] do
  runner "Task"
end 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2016-03-09T04:12:16.037

### 无论何时现在都支持问题中提出的语法。

只需将数组传递给`:at`选项。

```
every :day, at: ["11am", "11pm"] do
  runner "Task"
end 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-24T21:38:41.380

如果您担心代码的 DRYness，那么这个怎么样？

```
['11am','11pm'].each do |at|
  every :day, :at => at  do
    runner "Task"
  end  
end 
```

# c# - 如何获取 avicap32.dll 中连接的网络摄像头列表？

> ID：13058161
> 
> 赞同：2
> 
> 时间：2012-10-24T21:36:52.187
> 
> 标签：c#, .net, winapi, webcam

我正在编写一个应用程序来处理网络摄像头。我必须使用（这是一个外部约束）avicap32.dll 库。所以我在这里，使用这个库中的一些外部函数（我必须编组类型），以及 user32（发送 WindowsMessages）。我挖了一半的互联网，但找不到如何获取所有连接的网络摄像头设备的列表？

当然，我完全了解功能：

```
[DllImport(avicap32dll)]
[return: MarshalAs(UnmanagedType.Bool)]
public static extern bool capGetDriverDescription(
    short driverIndex,
    StringBuilder name, int nameSize,
    StringBuilder version, int versionSize); 
```

，但它给了我**驱动程序**列表，而不是**凸轮**！当我将两台相机连接到我的电脑时，我仍然可以通过此功能找到一个捕获驱动程序（检查 driverIndex 从 0 到 9）。它们都必须使用相同的捕获驱动程序。因此，如果没有网络摄像头列表，我无法真正决定要连接到哪个网络摄像头。有一个 WindowsMessage WM_CAP_DLG_VIDEOSOURCE，但在我连接网络摄像头之前它不显示视频源对话框。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T12:51:06.210

这是旧版 API（Windows 视频，avicap32.dll），并没有您想象的那么灵活。不过还是支持的。

具有最佳覆盖率的较新 API 是 DirectShow，它是本机的，但使用 DirectShow.NET，您可以连接到 .NET。查看介绍此方法的代码示例和文章：[使用 C# 和 DirectShow.NET 查找您的网络摄像头](https://web.archive.org/web/20140716211944/http://www.barebonescoder.com/2012/01/finding-your-web-cam-with-c-directshow-net/)

**编辑：**原始文章不再存在，但在 Internet 存档[https://archive.org/web/中找到了一份副本](https://archive.org/web/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-09T17:52:10.050

使用 AForge.NET 库更容易更好。它包含完成这些工作的所有工具[http://aforgenet.com/](http://aforgenet.com/)

# c - 堆栈中的最小值

> ID：13058167
> 
> 赞同：-1
> 
> 时间：2012-10-24T21:37:16.700
> 
> 标签：c, data-structures

我正在尝试获取堆栈中的最小值，其中 StackMin、Pop 和 Push 都是`Θ(1)`. 我的代码不起作用......这是我的尝试：

```
typedef struct{
    int top;
    int entry[1000];
    int small;
} Stack;

void Pop(int *e,Stack *ps){
    *e=ps->entry[--ps->top];
}

void Push(int e,Stack *ps){
    ps->entry[ps->top++]=e;
}

int StackMin(Stack *ps){
    ps->small=ps->entry[ps->top];
    while(!StackEmpty(ps)){
        int *e;
        *e=ps->entry[--ps->top];
        if(ps->small >= *e){
            ps->small = *e;
        }
    }
    return ps->small;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T21:41:52.560

这些行中不需要指针：

```
int *e; 
*e=ps->entry[--ps->top]; 
if(ps->small >= *e){ 
    ps->small = *e; 
} 
```

将它们更改为：

```
int e = ps->entry[--ps->top]; 
if(ps->small >= e){ 
    ps->small = e; 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T21:39:39.133

您需要有两个堆栈才能执行此操作。一个堆栈的顺序可以有最小值，每次调用最小值时都会更新此堆栈。尝试自己找出算法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T21:42:46.730

“不起作用”的描述不是那么有用......但无论如何，这看起来有问题：

```
int *e;
*e=ps->entry[--ps->top];
if(ps->small >= *e){
    ps->small = *e;
} 
```

问题是，您已经声明了一个指针（它目前没有指向任何东西 - 它未初始化），然后您将一个值写入它指向的（无效）位置。

如果碰巧代码没有崩溃，而您的问题是关于算法的，那么另一个用户已经发布了一个答案。

# php - PHP 用于单个 MySQL 多行 INSERT，每行带有 LAST_INSERT_ROW？

> ID：13058174
> 
> 赞同：1
> 
> 时间：2012-10-24T21:37:45.343
> 
> 标签：php, mysql, last-insert-id

***跳到问题底部的“我的代码”，直奔主题。***

* * *

`$con = mysql_connect('localhost', 'mysql_user', 'mysql_password');`

* * *

**一般示例：**

可以在单个 中执行多个查询字符串`mysql_query`，如下所示...

```
mysql_query("
    INSERT INTO table_one (a,b,c) VALUES (1,2,3);
    INSERT INTO table_two (x,y,z) VALUES (7,8,'a text value');
    ", $con); 
```

可以向每个查询字符串添加多行，如下所示...

```
mysql_query("
    INSERT INTO table_one (a,b,c) VALUES (1,2,3), (2,3,1), (3,1,2);
    INSERT INTO table_two (x,y,z) VALUES (7,8,9), (8,9,7), (9,7,8);
    ", $con); 
```

有一个值数组，像这样......

```
$array(
  [0] => array(1,2,3),
  [1] => array(2,'text',1),
  [2] => array(3,1,2)
); 
```

...可以使用循环动态创建查询字符串，如下所示...

```
$a = "INSERT INTO table_one (a,b,c) VALUES ";
foreach($array as $val){
  $a .= "(". implode(",",$val) ."),";
}
$a = trim($a, ",") . ";"; 
```

* * *

**问题：**

如何编写执行多个 INSERT 查询字符串的单个 MySQL 查询，每个查询字符串都有多行，以便第二个查询字符串插入的每一行都可以引用第一个查询字符串插入的相应行。因此`$var`，在这个片段中将对应于第一个 INSERT 的 auto_increment 行 ID。

```
mysql_query("
    INSERT INTO table_one (a,b,c) VALUES (1,2,3), (2,3,1), (3,1,2);
    INSERT INTO table_two (x,y,z) VALUES ($var,8,9), ($var,9,7), ($var,7,8);
    ", $con); 
```

* * *

**我的代码：**

这是我的代码的简化版本...

```
$q1 = "INSERT INTO `table_one` (t1c1,t1c2) VALUES ";
$q2 = "INSERT INTO `table_two` (t2c1,t2c2,t2c3) VALUES ";

foreach($array as $item){
  $q1 .= "('". $item ."','blah'),";
  $q2 .= "('". $row_ID_from_first_insert ."','something','whatever'),";
}

$q1 = trim($q1,",") .";";
$q2 = trim($q2,",") .";";
$q = $q1.$q2;

mysql_query($q, $this->connect); 
```

什么是安全的生成方式`$row_ID_from_first_insert`？

据我了解`LAST_INSERT_ID()`，在查询字符串中使用将不起作用，因为当使用单个查询字符串插入多行时，它仅返回第一个插入的行 ID。在 foreach 循环中使用`LAST_INSERT_ID()+1`where`1`替换为增量变量是否安全？如果来自不同用户的多个提交同时发生怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T21:56:12.270

通常，您必须取回`id`插入行的值。除非您可以创建另一个密钥来代替可以提前通过程序生成的密钥。

虽然`INSERT`多行语句的速度明显更快，但您付出的代价是缺乏精确度。如果您的`id`值是按顺序发出的，这是默认行为，那么您可以合理地确定`LAST_INSERT_ID()`代表插入的第一行的 ID，因此您可以使用您建议的方法计算行的 ID，尽管从索引开始0。

请记住，多次提交不会影响`LAST_INSERT_ID()`结果，因为此值是每个连接的。仅当您对同一数据库句柄执行后续查询时，它才会更改。其他请求中的操作不会影响它。

集群或多主数据库可能会发出非顺序标识符，在这种情况下这将不起作用。`INSERT IGNORE`在实际插入的行数可能少于提供的行数的情况下，这也是不可靠的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-29T18:30:48.603

LAST_INSERT_ID() 是在来自同一连接句柄的每个成功查询结束时生成的。因此，您的示例代码不会为您提供您正在寻找的结果。见下文：

```
mysql_query("
    INSERT INTO table_two (x,y,z) VALUES (LAST_INSERT_ID(),8,9), (LAST_INSERT_ID(),9,7), (LAST_INSERT_ID(),7,8);
", $con); 
```

上面的结果将是（其中 x 是 LAST_INSERT_ID() 产生的值）：

```
 x    y    z
 5    8    9
 5    9    7
 5    7    8 
```

要接收您寻求的结果，使用您在示例中使用的相同格式*（我不建议您使用 sql 注入的风险 - 改用 mysqli）*，您可以这样做：

```
 mysql_query("
    INSERT INTO table_two (x,y,z) VALUES (LAST_INSERT_ID(),8,9);
    INSERT INTO table_two (x,y,z) VALUES (LAST_INSERT_ID(),9,7);
    INSERT INTO table_two (x,y,z) VALUES (LAST_INSERT_ID(),7,8); 
", $con); 
```

这将为您提供（其中 x 是 LAST_INSERT_ID() 产生的值）：

```
 x    y    z
 5    8    9
 6    9    7
 7    7    8 
```

# java - Java中的有序LinkedList逻辑，每次都重新分配LinearNode头

> ID：13058175
> 
> 赞同：1
> 
> 时间：2012-10-24T21:37:46.233
> 
> 标签：java, list, generics, linked-list, logic

我有一个通用的有序链表类。出于某种原因，每次运行 add() 时都会重新分配 LinearNode 头。有任何想法吗？为什么每次运行时都会改变头部？我什至没有碰它。如果需要，我可以提供其他类进行测试。

```
 public class myOrLiList<T extends Comparable<T>> {

public LinearNode head;
public int count;

public myOrLiList() {
    head = null;
    count = 0;

}

// LinearNode INNER CLASS
public class LinearNode {
    public LinearNode next;
    public T item;

    public LinearNode(T thisitem) {
        this.next = null;
        this.item = thisitem;
    }

}
public boolean isEmpty() {
    return (head == null);
}
public void add(T thisItem) {

    LinearNode newNode = new LinearNode(thisItem);

    if (isEmpty()) {
        head = newNode;
        System.out.println("head filled!");
    } else {
        LinearNode compareNode = head;
        do {
            if (thisItem.compareTo(compareNode.item) < 0) {
                newNode.next = compareNode;
                break;
            } else if ((thisItem.compareTo(compareNode.item) < 0)
                    || (thisItem.compareTo(compareNode.item) == 0)) {
                newNode.next = compareNode.next;
                compareNode.next = newNode;
                break;
            } else {
                compareNode = compareNode.next;
            }
        } while (compareNode.next != null);
    }
    System.out.println("Added!");
    count++;
} 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T22:17:06.520

你`head`改变的原因是因为这条线：

```
compareNode = compareNode.next; 
```

之前你这样做了：

```
LinearNode compareNode = head; 
```

您实际上是在说这`compareNode`是您的主要对象。您正在将指向 head 的 Object 引用设置为也指向`compareNode`. 您采取的任何行动都会以完全相同的方式`compareNode`产生影响。`head`

因为你设置 compareNode = head，这两行对同一个对象引用做同样的事情：

```
compareNode.next = null;
head.next = null; 
```

我看到其他一些事情是错误的。我会尝试一一检查。

您何时为空的逻辑`LinkedList`似乎是正确的......

然而，

如果您在列表大小为 1 时添加第二个节点，您将遇到一些问题...

`if (thisItem.compareTo(compareNode.item) < 0)`你调用这段代码然后爆发：

```
newNode.next = compareNode;
break; 
```

在那之后你在用 newNode 做什么？答案是什么。由于您没有更新`head`，因此没有任何变化。你创建了一个`LinearNode`，设置它的`next`值等于`head`，然后让它死掉。

我认为您想要做的是获取对存储在的旧节点的引用`head`，保存它，然后将您的`head`变量设置为等于您的新节点。然后，您将设置 newNode.next（`newNode`现在在哪里`head`）等于您保存的 OLD 头节点。所以你会有这样的东西：

```
LinearNode oldHead = head;
head = newNode;
head.next = oldHead; 
```

现在进行下一部分。你有一个

```
if ((thisItem.compareTo(compareNode.item) < 0) || (thisItem.compareTo(compareNode.item) == 0)) 
```

你已经介绍了 where 的情况`compareNode.item < 0`，那你为什么还要检查呢？它不会弄乱你的逻辑，但它是多余的。

本质上，您要做的是将 newNode 放在当前节点之前（如果它比较为 < 0），将您的 newNode 放在当前节点之后（如果它比较为 > 0），如果 currentElement 结束则替换或不执行任何操作向上 == 0。

我已经介绍了 < 0 的情况，因此您应该尝试弄清楚如何处理大于和等于的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T14:16:24.570

虽然这门课有一些错误（谢谢你的提示，迈克尔！）我问的问题不是来自这些错误。

在我为 T 创建的新对象类中，我声明了静态属性。因此，每次创建一个新的 T thisItem 时，所有对象的所有属性都会被更改。

# java - 变量范围

> ID：13058193
> 
> 赞同：0
> 
> 时间：2012-10-24T21:38:53.307
> 
> 标签：java, variables, syntax, attributes, scope

我有一个烦人的问题，为什么当我第一次尝试使用在 CameraPhone 类编译器下立即声明的变量 imageSize 和 memorySize 编译此代码时给了我一个逻辑错误，但是当我在代码末尾声明变量时却可以正常工作？？？

假设存在一个电话类。定义一个包含两个实例变量的子类 CameraPhone：一个名为 imageSize 的整数，表示以百万像素为单位的大小（为简单起见，假设一个像素占用一个字节，因此百万像素等于兆字节）（即，2 表示每张图像是由 2 兆像素组成）和一个名为 memorySize 的整数，表示相机内存中的千兆字节数（即 4 表示 4 千兆字节的内存）。有一个构造函数，它接受与上述两个实例变量对应的两个整数参数，用于初始化各自的实例变量。还有一个名为 numPictures 的方法，它返回（作为整数）相机内存可以容纳的图片数量。不要忘记一千兆字节是 1,000 兆字节。

```
public class CameraPhone extends Phone { 

    public CameraPhone(int imageSize, int memorySize) { 
        this.imageSize  = imageSize; 
        this.memorySize = memorySize; 
    } 

    public int numPictures() {
        return memorySize * 1000 / imageSize;
    } 

    private int imageSize; private int memorySize;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T21:49:59.067

你得到的“逻辑错误”是什么？如果您在问题中复制并粘贴代码，它将毫无问题地工作，您*在*哪里声明属性（也称为“实例变量”）并不重要 - 在开始时，在结束时，它都是一样的正如您在某处实际*声明*和*初始化它们一样。*我的意思是，只要这些行出现在类声明中的任何位置（不是在方法中，请注意），代码就会编译：

```
private int imageSize;
private int memorySize; 
```

`this`此外，在构造函数中使用是完全合法的，这*不会*导致错误。属性可以在你声明它们的地方直接初始化，也可以在构造函数中初始化。

# javascript - 如何将 textarea 的插入符号始终保持在视口内？

> ID：13058194
> 
> 赞同：17
> 
> 时间：2012-10-24T21:38:54.237
> 
> 标签：javascript, html, textarea

我有一个用于编辑大量文本的文本区域很长的页面。通常，当您键入时，当插入符号接近文本区域的底部时，页面会自动滚动以使插入符号始终保持在视口内（Firefox 将一次滚动一行，Chrome 会将插入符号滚动到视口）。

我的问题来自这样一个事实，即我正在根据用户键入的内容以编程方式更改文本区域的内容。在某些情况下，这涉及添加额外的内容，从而将插入符号推到视野之外。

一旦用户按下一个键，自动滚动就会启动，并且插入符号会滚动到视图中 - 但不是之前，因此当用户键入时，他们会看不到插入符号。我曾希望我可以简单地触发文本区域上的关键事件，让浏览器自动滚动，但触发的事件并不能完全模拟用户行为，我也没有得到响应。

我现在能看到的唯一解决方案是尝试通过以下方式获取插入符号的 XY 坐标：

1.  查找插入符号的字符位置。
2.  构建一个 div，在插入符号位置使用标记来镜像 textarea 的内容。
3.  测量标记的位置。

有没有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T21:46:22.300

我讨厌建议为一个问题添加整个库，但请考虑查看 CodeMirror。它为您处理所有这些事情，并且使用起来相当简单。

[http://codemirror.net/](http://codemirror.net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T06:35:00.600

[之前的解决方案不兼容 Chrome (WebKit?)]

如果，一个大如果，额外的内容附加到输入的末尾，下面的练习可能会提供解决方案：

```
<html>
  <head>
    <script>
      function btnGoOnClick(ctrl)
      {
        //-- For this POC the text content is reset to 160 lines of dummy text -
        //----------------------------------------------------------------------

        ctrl.value = "";

        for (var i = 0; i < 160; ++i)
        {
          ctrl.value += "dummy!\n";
        }

        //-- Then the carret is set to the last position -----------------------
        //----------------------------------------------------------------------

        if (ctrl.createTextRange)
        {
          //-- IE specific methods to move the carret to the last position

          var textRange = ctrl.createTextRange();
          textRange.moveStart("character", ctrl.value.length);
          textRange.moveEnd("character", 0);
          textRange.select();
        }
        else
        {
          //-- Mozilla and WebKit methods to move the carret

          ctrl.setSelectionRange(ctrl.value.length, ctrl.value.length);
        }

        //-- For WebKit, the scroll bar has to be explicitly set ---------------
        //----------------------------------------------------------------------

        ctrl.scrollTop = ctrl.scrollHeight;

        //-- Almost there: make sure the control has fucos and is into view ----
        //----------------------------------------------------------------------

        ctrl.focus();
        ctrl.scrollIntoView(false);
      }
    </script>
  </head>
  <body>
    <form name="form">
      <input type="button" name="btnGo" value="Go!" onClick="btnGoOnClick(document.form.text);" />
      <div style="height: 1000px"></div>
      <textarea name="text" rows="80"></textarea>
    </form>
  </body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T09:25:53.523

由于您已经在 javascript 路径上并且假设动态 textarea 高度会造成设计问题，您可以尝试按内容自动调整 textarea 的大小：

```
function resizeTextarea(textarea) {
  var lines = textarea.value.split('\n');
  var width = textarea.cols;
  var height = 1;
  for (var i = 0; i < lines.length; i++) {
    var linelength = lines[i].length;
    if (linelength >= width) {
      height += Math.ceil(linelength / width);
    }
  }
  height += lines.length;
  textarea.rows = height;
} 
```

我知道这不能回答您帖子中概述的细节，但它提供了一种适合您的问题标题的替代方法。因此，即使它对您没有用，也可能对其他访问此问题的人有用。

我个人讨厌太小的文本区域，并且视情况而定，更喜欢它们自动调整大小。

# javascript - 如何更改高图中条形的宽度？

> ID：13058195
> 
> 赞同：7
> 
> 时间：2012-10-24T21:38:58.333
> 
> 标签：javascript, highcharts

[使用这样](http://www.highcharts.com/demo/column-negative)的条形图，可以更改条形的宽度以表示另一个数据属性，例如水果的重量。水果越重，条越粗。

[你在这里](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/column-negative/)玩脚本。我对其他可以做到这一点的 javascript 绘图库持开放态度，只要它们是免费的。

```
$(function () {
    var chart;
    $(document).ready(function() {
        chart = new Highcharts.Chart({
            chart: {
                renderTo: 'container',
                type: 'column'
            },
            title: {
                text: 'Column chart with negative values'
            },
            xAxis: {
                categories: ['Apples', 'Oranges', 'Pears', 'Grapes', 'Bananas']
            },
            tooltip: {
                formatter: function() {
                    return ''+
                        this.series.name +': '+ this.y +'';
                }
            },
            credits: {
                enabled: false
            },
            series: [{
                name: 'John',
                data: [5, 3, 4, 7, 2]
                // I would like something like this (3.5, 6 etc is the width) :
                // data: [[5, 3.4], [3, 6], [4, 3.4], [7, 2], [2, 5]]
            }, {
                name: 'Jane',
                data: [2, -2, -3, 2, 1]
            }, {
                name: 'Joe',
                data: [3, 4, 4, -2, 5]
            }]
        });
    });

});​ 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-10-30T07:37:39.390

`pointWidth` 是您设置条形宽度所需的。尝试

```
plotOptions: {
            series: {
                pointWidth: 15
            }
        } 
```

此显示条的宽度为 15px。[在这里](http://jsfiddle.net/pXZRV/)玩。刚刚对已经存在的代码进行了编辑。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-12-13T15:10:25.560

我使用一组面积图来模拟可变宽度列/条形图。比如说，每列/条都由一个矩形区域表示。

请参阅我的小提琴演示（[http://jsfiddle.net/calfzhou/TUt2U/](http://jsfiddle.net/calfzhou/TUt2U/)）。

```
$(function () {
    var rawData = [
        { name: 'A', x: 5.2, y: 5.6 },
        { name: 'B', x: 3.9, y: 10.1 },
        { name: 'C', x: 11.5, y: 1.2 },
        { name: 'D', x: 2.4, y: 17.8 },
        { name: 'E', x: 8.1, y: 8.4 }
    ];

    function makeSeries(listOfData) {
        var sumX = 0.0;
        for (var i = 0; i < listOfData.length; i++) {
            sumX += listOfData[i].x;
        }
        var gap = sumX / rawData.length * 0.2;
        var allSeries = []
        var x = 0.0;
        for (var i = 0; i < listOfData.length; i++) {
            var data = listOfData[i];
            allSeries[i] = {
                name: data.name,
                data: [
                    [x, 0], [x, data.y],
                    {
                        x: x + data.x / 2.0,
                        y: data.y,
                        dataLabels: { enabled: true, format: data.x + ' x {y}' }
                    },
                    [x + data.x, data.y], [x + data.x, 0]
                ],
                w: data.x,
                h: data.y
            };
            x += data.x + gap;
        }
        return allSeries;
    }

    $('#container').highcharts({
        chart: { type: 'area' },
        xAxis: {
            tickLength: 0,
            labels: { enabled: false}
        },
        yAxis: {
            title: { enabled: false}
        },
        plotOptions: {
            area: {
                marker: {
                    enabled: false,
                    states: {
                        hover: { enabled: false }
                    }
                }
            }
        },
        tooltip: {
            followPointer: true,
            useHTML: true,
            headerFormat: '<span style="color: {series.color}">{series.name}</span>: ',
            pointFormat: '<span>{series.options.w} x {series.options.h}</span>'
        },
        series: makeSeries(rawData)
    });
}); 
```

![我的演示图](../Images/3c26758dde12daa4af76b6a1c3b1229f.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-12T04:37:14.233

如果您有许可证，Fusioncharts 可能是最好的选择，可以制作更优化的 Marimekko 图表……</p>

我做了一些工作，试图在 highcharts 中获得 Marimekko 图表解决方案。它并不完美，但与 Fusion Charts 页面上的第一个 Marimekko 图表示例相近……</p>

[http://www.fusioncharts.com/resources/chart-tutorials/understanding-the-marimekko-chart/](http://www.fusioncharts.com/resources/chart-tutorials/understanding-the-marimekko-chart/)

关键是使用 dateTime 轴，因为该模式为您在 X 轴上分配点和线的方式提供了更大的灵活性，这使您能够在此轴上构建可变大小的“条”。我使用 0-1000 秒的空间，并在图表之外找出到这个比例的映射，以近似百分比值来调整你的垂直线。这里 ( [http://jsfiddle.net/miken/598d9/2/](http://jsfiddle.net/miken/598d9/2/) ) 是一个创建可变宽度柱形图的 jsfiddle 示例。

```
 $(function () {

    var chart;
        Highcharts.setOptions({
            colors: [ '#75FFFF', '#55CCDD', '#60DD60' ]
        });
        $(document).ready(function() {
            var CATEGORY = {  // number out of 1000
            0: '',    
            475: 'Desktops',
            763: 'Laptops',
            1000: 'Tablets'  
        };
        var BucketSize = {  
            0: 475,
            475: 475,
            763: 288,
            1000: 237   
        };
        chart = new Highcharts.Chart({
            chart: {
                renderTo: 'container',
                type: 'area'
            },
            title: {
                text: 'Contribution to Overall Sales by Brand & Category (in US$)<br>(2011-12)'
            },
            xAxis: {
                min: 0,
                max: 1000,
                title: {
                    text: '<b>CATEGORY</b>'
                },
                tickInterval: 1,
                minTickInterval: 1,
                dateTimeLabelFormats: {
                    month: '%b'
                },
                labels: {
                    rotation: -60,
                    align: 'right',
                    formatter: function() {
                        if (CATEGORY[this.value] !== undefined) {
                            return '<b>' + CATEGORY[this.value] + ' (' + 
                                this.value/10 + '%)</b>';
                        }
                    }
                }
            },
            yAxis: {
                max: 100,
                gridLineWidth: 0,
                title: {
                    text: '<b>% Share</b>'
                },
                labels: {
                    formatter: function() {
                        return this.value +'%'
                    }
                }
            },
            tooltip: {
                shared: true,
                useHTML: true,
                formatter: function () {
                    var result = 'CATEGORY: <b>' +
                        CATEGORY[this.x] + ' (' + Highcharts.numberFormat(BucketSize[this.x]/10,1) + '% sized bucket)</b><br>';
                    $.each(this.points, function(i, datum) {
                        if (datum.point.y !== 0) {
                            result += '<span style="color:' +
                                datum.series.color + '"><b>' +
                                datum.series.name + '</b></span>: ' +
                                    '<b>$' + datum.point.y + 'K</b> (' +
                                Highcharts.numberFormat(
                                    datum.point.percentage,2) +
                                '%)<br/>';
                        }
                    });
                return (result);
                }
            },
            plotOptions: {
                area: {
                    stacking: 'percent',
                    lineColor: 'black',
                    lineWidth: 1,
                    marker: {
                        enabled: false
                    },
                    step: true
                }
            },
            legend: {
                layout: 'vertical',
                align: 'right',
                verticalAlign: 'top',
                x: 0,
                y: 100,
                borderWidth: 1,
                title: {
                text : 'Brand:'
                }
            },
            series: [ {
                name: 'HP',
                data: [
                    [0,298],
                    [475,109],
                    [763,153],
                    [1000,153]          
                ]
            }, {
               name: 'Dell',
                data: [
                    [0,245],
                    [475,198],
                    [763,120],
                    [1000,120]
               ]
            }, {
                name: 'Sony',
                data: [
                    [0,335],
                    [475,225],
                    [763,164],
                    [1000,164]          
               ]
            }]
        },
        function(chart){    
            // Render bottom line.
            chart.renderer.path(['M', chart.plotLeft, chart.plotHeight + 66, 'L', chart.plotLeft+chart.plotWidth, chart.plotHeight + 66])
            .attr({
                'stroke-width': 3,
                stroke: 'black',
                zIndex:50
            })
            .add();
            for (var category_idx in CATEGORY) {
                chart.renderer.path(['M', (Math.round((category_idx / 1000) * chart.plotWidth)) + chart.plotLeft, 66, 'V', chart.plotTop + chart.plotHeight])
                .attr({
                    'stroke-width': 1,
                    stroke: 'black',
                    zIndex:4
                })
                .add();
            }
        });
    });
}); 
```

它添加了一个额外的数组，允许您将类别名称映射到第二个 tic 值，从而为您提供您可能想要的更多“类别”视图。我还在底部添加了代码，在不同的列和图表的底线之间添加了垂直分界线。作为数学的一部分，我在此处以像素为单位硬编码可能需要对周围标签的大小等进行一些调整，但这应该是可行的。

使用“百分比”类型的重音可以让 y 刻度从原始数据中计算出总百分比，而如上所述，您需要对 x 轴进行自己的数学运算。我更多地依赖工具提示功能来提供标签等，而不是图表本身的标签。

这项工作的另一个重大改进是找到一种方法使工具提示悬停区域和标签集中并居中并包含栏本身，而不是现在每个栏的右边框。如果有人想添加它，请随时到这里。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-13T15:21:11.557

如果我猜对了，您希望每个条形都具有不同的宽度。我遇到了同样的问题，并且很难找到提供此选项的库。我得出结论——没有。

**无论如何，我玩了一下 highcharts，很有创意并想出了这个：**
你提到你希望你的数据看起来像这样：`data: [[5, 3.4], [3, 6], [4, 3.4]]`，第一个值是高度，第二个是宽度。

让我们使用 highcharts 的柱形图来实现。

**第 1 步：**
为了更好地区分条形图，将每个条形图输入为一个新系列。由于我动态生成数据，我必须动态分配新系列：

```
const objects: any = [];
const extra = this.data.length - 1;
this.data.map((range) => {
  const obj = {
    type: 'column',
    showInLegend: false,
    data: [range[1]],
    animation: true,
    borderColor: 'black',
    borderWidth: 1,
    color: 'blue'
  };
  for (let i = 0; i < extra; i++) {
    obj.data.push(null);
  }
  objects.push(obj);
});
this.chartOptions.series = objects; 
```

这样，您的不同系列将如下所示：

```
series: [{
  type: 'column',
  data: [5, 3.4]
}, {
  type: 'column',
  data: [3, 6]
}, {
  type: 'column',
  data: [4, 3.4]
}] 
```

**第 2 步：**
将其指定为 highcharts 的绘图选项：

```
plotOptions: {
  column: {
    pointPadding: 0,
      borderWidth: 0,
      groupPadding: 0,
      shadow: false
  }
} 
```

**第 3 步：**
现在让我们发挥创意 - 要使所有条形图的起点相同，我们需要将每个条形图移动到图表的起点：

```
setColumnsToZero() {
  this.data.map((item, index) => {
    document.querySelector('.highcharts-series-' + index).children[0].setAttribute('x', '0');
  });
} 
```

**第4步：**

```
getDistribution() {
  let total = 0;

  // Array including all of the bar's data: [[5, 3.4], [3, 6], [4, 3.4]]
  this.data.map(item => {
    total = total + item[0];
  });

  // MARK: Get xAxis' total width
  const totalWidth = document.querySelector('.highcharts-axis-line').getBoundingClientRect().width;

  let pos = 0;
  this.data.map((item, index) => {
    const start = item[0];
    const width = (start * totalWidth) / total;
    document.querySelector('.highcharts-series-' + index).children[0].setAttribute('width', width.toString());
    document.querySelector('.highcharts-series-' + index).children[0].setAttribute('x', pos.toString());
    pos = pos + width;
    this.getPointsPosition(index, totalWidth, total);
  });
} 
```

**第 4 步：**
让我们到达 xAxis 的点。在第一个函数中修改已经存在的点，将最后一个点移动到轴的末端并隐藏其他点。在第二个函数中，我们克隆最后一个点，将其修改为总共有 6 或 3 个 xAxis 点，并将它们中的每一个移动到正确的位置

```
getPointsPosition(index, totalWidth, total) {
  const col = document.querySelector('.highcharts-series-' + index).children[0];
  const point = (document.querySelector('.highcharts-xaxis-labels').children[index] as HTMLElement);
  const difference = col.getBoundingClientRect().right - point.getBoundingClientRect().right;
  const half = point.getBoundingClientRect().width / 2;
  if (index === this.data.length - 1) {
    this.cloneNode(point, difference, totalWidth, total);
  } else {
    point.style.display = 'none';
  }
  point.style.transform = 'translateX(' + (+difference + +half) + 'px)';

  point.innerHTML = total.toString();
}

cloneNode(ref: HTMLElement, difference, totalWidth, total) {
  const width = document.documentElement.getBoundingClientRect().width;

  const q = total / (width > 1000 && ? 6 : 3);
  const w = totalWidth / (width > 1000 ? 6 : 3);
  let val = total;
  let valW = 0;
  for (let i = 0; i < (width > 1000 ? 6 : 3); i++) {
    val = val - q;
    valW = valW + w;
    const clone = (ref.cloneNode(true) as HTMLElement);

    document.querySelector('.highcharts-xaxis-labels').appendChild(clone);

    const half = clone.getBoundingClientRect().width / 2;

    clone.style.transform = 'translateX(' + (-valW + difference + half) + 'px)';
    const inner = Math.round(val * 100) / 100;
    clone.innerHTML = inner.toString();
  }
} 
```

最后，我们有一个看起来像这样的图表（不是这个给定示例中的数据，而是`[[20, 0.005], [30, 0.013333333333333334], [20, 0.01], [30, 0.005555555555555555], [20, 0.006666666666666666]]`第一个值是宽度，第二个值是高度）： [![在此处输入图像描述](../Images/291abde4eb1159d9bffa4ccc05027c4f.png)](https://i.stack.imgur.com/zNL4v.png)

可能需要进行一些修改以 100% 适合您的情况。Fe 我不得不将 xAxis 的点调整为特定的起点和终点——我省去了这部分。

# microsoft-sync-framework - 在具有不同模式的数据库上使用 Sync Framework

> ID：13058196
> 
> 赞同：3
> 
> 时间：2012-10-24T21:39:01.350
> 
> 标签：microsoft-sync-framework

是否可以使用 MS Sync Framework 来同步不同数据库中的不同表（具有完全不同的结构），假设其中一个表具有主键，另一个具有唯一索引，其值与第一个表的 PK 一致（但不能提升PK）？列名也可以不同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T02:54:20.937

这应该是可能的，看看这些系列的帖子：

[第 1 部分 – 客户端和服务器主键不同的上传同步](http://jtabadero.wordpress.com/2011/03/14/upload-synchronization-where-the-client-and-server-primary-keys-are-different/)

[第 2 部分 – 客户端和服务器主键不同的双向同步](http://jtabadero.wordpress.com/2011/03/14/part-2-bidirectional-synchronization-where-the-client-and-server-primary-keys-are-different/)

[第 3 部分 - 同步客户端和服务器主键不同的表](http://jtabadero.wordpress.com/2011/07/20/part-3-synchronizing-tables-where-client-and-server-primary-keys-are-different/)

# java - Java 字符串等于

> ID：13058198
> 
> 赞同：1
> 
> 时间：2012-10-24T21:39:13.520
> 
> 标签：java, string, equals

```
DatagramPacket receivePacket = new DatagramPacket(receiveData,
                                               receiveData.length);

_socket.receive(receivePacket);

String sentence = new String(receivePacket.getData());

InetAddress IPAddress = receivePacket.getAddress();

int port = receivePacket.getPort();

if(sentence.equals("hello")) (...) 
```

问题：`sentence.equal("hello")`当句子是时，为什么不是真的`"hello"`？是因为 String 的 Constructor`String(byte[])`吗？

我能对付谁？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T21:44:16.853

您的字符串可能包含`"hello"`但填充有其他垃圾。你可以试试

```
if (sentence.trim().equals("hello")) {...} 
```

* * *

为了显示：

```
String s = new String(new byte[]{0, 1, 'h', 'e', 'l', 'l', 'o', 2, 3});
System.out.println(s.equals("hello"));
System.out.println(s.trim().equals("hello")); 
```

```
错误的  
真的

```

* * *

**相关文件**

*   [`trim`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#trim%28%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T21:43:51.313

如果可以，请尝试在调试器中执行`System.out.println ("[" + sentence + "]");`或检查变量 - 您可能会发现字符串不是您所期望的，例如末尾有一个换行符。

出现错误的机会`String.equals()`非常小:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T08:47:47.073

这里数据包是通过套接字接收的。有可能包含额外的空格。我无法模拟这种情况，因为数据是通过套接字来的。在句子上应用 trim() 并重试。

# centos - 无法在 Gitlab 上创建项目或添加 ssh 密钥

> ID：13058200
> 
> 赞同：6
> 
> 时间：2012-10-24T21:39:26.247
> 
> 标签：centos, gitolite, gitlab

我刚刚创建了一个 CentOS 6.3 VM 并按照以下说明进行 gitlab 安装：[http ://howto.basjes.nl/linux/installing-gitlab-on-centos-6](http://howto.basjes.nl/linux/installing-gitlab-on-centos-6)

我用 gitlab v3.01 和 v2.91 都试过这个安装。

这对我有用：

*   我可以毫无问题地完成 gitlab 安装
*   从命令行，我可以使用从 gitlab 服务帐户到 gitolite 服务帐户的无密码身份验证
*   从命令行，我可以克隆 gitolite-admin 存储库，进行更改，然后将更改推送回远程存储库
*   我可以启动 rails 网络应用程序
*   我可以登录网站管理网站
*   我可以创建新帐户并使用新帐户登录

这是我不能做的：

*   我无法创建项目 (Repos)
*   我无法添加 ssh 密钥

我总是遇到同样的错误：

> *GitLab 无法访问您的 Gitolite 系统。*

在`githost.log`日志文件中，我得到一个不太有用的错误：

> *ERROR -> Timeout::Error execution expired*

*   我已经仔细检查了权限
*   审查了`gitlab.yml`配置文件
*   从网页浏览四个建议的故障排除技巧
*   尝试了不同版本的 gitlab，但无论我做什么，我都会遇到同样的错误。

我被卡住了，因为日志没有告诉我任何信息，而且我可以毫无问题地使用 gitlab 服务帐户访问 gitolite 存储库。有人对最新版本的 CentOS/Gitlab/Gitolite 有任何成功吗？任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T19:57:40.073

我知道这有点晚了——但为了完整性。

我在最近的 Debian 版本上安装时遇到了同样的问题。它是，或者对我来说，是由旧版本的 redis-server 引起的。

# jquery-ui - 是否可以将 sql light db 与使用 web 视图和 jquery 移动 UI 的 phonegap 应用程序一起使用？

> ID：13058201
> 
> 赞同：0
> 
> 时间：2012-10-24T21:39:26.047
> 
> 标签：jquery-ui, cordova, jquery-mobile, titanium-mobile

我们的想法是同时使用 phonegap+jquery 移动 UI 为 android 应用和移动网站开发两个版本的移动应用。

假设我们使用 jquery 移动 UI 设计我们的 Web UI，并且我们的应用程序使用与使用 webview 组件的应用程序相同的 Web UI。是否可以在这种使用 web 视图进行渲染的应用程序中访问本地 sql light db 的数据。

我们还评估了 Titanium Studio，但使用 Jquery Mobile 拖放，UI 开发会更快一些。所以想法是，尽可能使用 jquery 移动 UI 保持应用程序大小最小，并在用户使用应用程序时将数据加载/保存到 sql light db。

以钛为基础进行基于 Web 的应用程序开发，它会比 jquery 移动 UI 更容易吗？

您能否就这种方法和解决此问题的方法发表您的看法？在继续之前，我们也很想听听专家的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T15:13:09.847

我在 Titanium 中编写了一个应用程序，它加载 SQLite db 文件并呈现要显示的视图。我认为与 PhoneGap 相比，它在 Titanium 中的运行速度更快。Titanium 运行 JS 文件并使用 Native 对象渲染视图，而不是在 WebView 中加载视图。因此，Titanium 版本的内存使用量和开销会更少。

另一方面，Titanium 和 PhoneGap 都是很好的原型设计解决方案。因此，您可以创建自己的应用程序并将其更快地推向市场。但是，为了更快的速度、更小的应用程序占用空间和更好的用户界面，强烈建议使用本机代码（iOS ObjC 或 Android Java）重写应用程序。

# javascript - 禁用正文滚动，但将其保留在高度大于浏览器的单个 div 元素上

> ID：13058202
> 
> 赞同：5
> 
> 时间：2012-10-24T21:39:30.507
> 
> 标签：javascript, jquery, html, css

我到处搜索，还没有找到解决方案。好的，这就是交易，我有一个单页网站，其中有几个 div 元素在彼此下方，有点像我猜的单个页面。我想要实现的是完全禁用实际网页的滚动，但如果活动 div 的滚动低于 Web 浏览器，则保持它的滚动。通过使用标题上的锚链接可以很容易地到达页面的其他部分。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T22:03:01.170

我不确定您要查找的内容，但我认为您希望 div 可滚动，而不是实际文档。您可以通过将 div 以固定高度绝对定位在屏幕上并将其设置`overflow`为`auto`. 我已经使用以下 CSS 代码完成了这项工作：

```
#scrollable {
    position: absolute;
    top: 10px;
    right: 10px;
    bottom: 10px;
    left: 10px;
    overflow: auto;
}​ 
```

看一个例子：http: [//jsfiddle.net/rustyjeans/rgzBE/](http://jsfiddle.net/rustyjeans/rgzBE/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T21:55:35.653

你试过吗 `overflow-x:hidden;`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-24T22:38:37.483

原来它很简单。CSS

```
body{
 overflow:hidden;
}

#div_you_need_scrolling{
 overflow:auto;
} 
```

# azure - 如何读取 Azure 诊断数据

> ID：13058203
> 
> 赞同：1
> 
> 时间：2012-10-24T21:39:36.773
> 
> 标签：azure

我有 Azure 诊断设置并登录到所有 WAD 表。我该如何阅读所有日志？我有 Azure 存储资源管理器，但我看不出它有什么用处，而且日志也加载了大量垃圾。有没有办法以更明智的方式查看诊断数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T22:19:45.980

您必须自己编写一个解析工具来读取所有数据，或者您可以购买类似 Cerebrata 的[诊断工具](http://www.cerebrata.com/products/AzureDiagnosticsManager/)来解释它。不幸的是，存储中的数据只是原始数据，没有解释。

# servicestack - RestServiceBase 上的 ServiceExceptionHandler 用法

> ID：13058205
> 
> 赞同：4
> 
> 时间：2012-10-24T21:40:00.857
> 
> 标签：servicestack

我正在尝试`ServiceExceptionHandler`在我的服务上使用扩展`RestServiceBase<TViewModel>`

我可以使用`AppHost.ServiceExceptionHandler`，这工作正常。我需要来自`HttpRequest`AppHost 级别的用户信息。

所以我正在尝试使用`ServiceExceptionHandler`on 服务级别。虽然我将委托设置为 service `ctor`，但它是`null`在`OnGet`方法上引发异常时

```
public class StudentService : RestServiceBase<Student>
{ 
    public StudentService()
    {
        ServiceExceptionHandler = (request, exception) =>
        {
            logger.Error(string.Format("{0} - {1} \n Request : {2}\n", HttpRequest.UserName(), exception.Message, request.Dump()), exception);
            var errors = new ValidationErrorField[] { new ValidationErrorField("System Error", "TODO", "System Error") };
            return DtoUtils.CreateErrorResponse("System Error", "System Error", errors);
        };
    }
} 
```

我不确定这段代码有什么问题。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T21:48:21.333

### 注册全局 AppHost.ServiceExceptionHandler

在你的`AppHost.Configure()`你可以注册一个全局异常处理程序：

```
this.ServiceExceptionHandler = (request, ex) => {
   ... //handle exception and generate your own ErrorResponse
}; 
```

对于更细粒度的异常处理程序，您可以覆盖以下自定义服务事件挂钩：

### 使用新 API 处理异常

如果您使用的是[New API](https://github.com/ServiceStack/ServiceStack/wiki/New-Api)，您可以通过提供自定义运行器来覆盖异常，例如：

```
public class AppHost { 
  ...
    public virtual IServiceRunner<TRequest> CreateServiceRunner<TRequest>(
        ActionContext actionContext)
    {           
        //Cached per Service Action
        return new ServiceRunner<TRequest>(this, actionContext); 
    }
}

public class MyServiceRunner<T> : ServiceRunner<T> {
    public override object HandleException(
        IRequestContext requestContext, TRequest request, Exception ex) {
      // Called whenever an exception is thrown in your Services Action
    }
} 
```

### 使用旧 API 处理异常

`RestServiceBase<T>`它使用旧 API，您可以在其中通过覆盖**HandleException**方法来处理错误，例如：

```
public class StudentService : RestServiceBase<Student>
{ 
    ...

    protected override object HandleException(T request, Exception ex)
    {
        LogException(ex);

        return base.HandleException(request, ex);
    }
} 
```

# twitter - 更新状态的 twitter api 资源 url 是否已更改

> ID：13058207
> 
> 赞同：0
> 
> 时间：2012-10-24T21:40:06.200
> 
> 标签：twitter

自定义 Twitter 应用程序突然停止更新状态，我是 Twitter 的新手。

```
<errors>
  <error code="34">Sorry, that page does not exist</error>
</errors>
Stack Trace:
   at TwitterOAuth.WebResponseGet(HttpWebRequest webRequest) 
```

自定义应用程序使用以下资源 url：

```
"https://twitter.com/statuses/update.xml" 
```

找到了一个使用以下资源 url 的代码项目示例，它对我有用：

```
"http://api.twitter.com/1/statuses/update.json" 
```

[http://www.codeproject.com/Articles/247336/Twitter-OAuth-authentication-using-Net](http://www.codeproject.com/Articles/247336/Twitter-OAuth-authentication-using-Net)

* * *

所以我尝试了

```
"https://api.twitter.com/1/statuses/update.xml" 
```

得到以下错误：

```
Unhandled Exception: System.Net.WebException: The remote server returned an erro
r: (403) Forbidden.
   at System.Net.HttpWebRequest.GetResponse() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T21:48:55.087

现在，twitter 发布了新的 API V1.1，旧的 API v1.0 将于 2013 年 3 月 5 日停用。所以你应该查看 API V1.1

# ruby - 在删除之前复制数组中的对象

> ID：13058208
> 
> 赞同：0
> 
> 时间：2012-10-24T21:40:09.193
> 
> 标签：ruby, reference

下面的代码循环遍历一个数组`factor_list`并检查它们中的每一个是否包含一个指定的变量。如果是这样，将它们从数组中删除，将它们相乘，然后将最终结果与变量相加。在所有操作之后，将因子添加回数组。

```
temp_factor = nil
factor_list.each{|factor|
        if factor._variables.include?(variable)
            if temp_factor == nil
                temp_factor = factor
            else
                temp_factor = multiply(temp_factor, factor)
            end
            factor_list.delete(factor)
        end
    }
temp_factor = sumOut(temp_factor, variable)
factor_list << temp_factor 
```

问题是，`temp_factor`总是`nil`在每次迭代中，即使它已在前一个循环中设置。我认为主要问题是因为数组中的删除，所以我删除了删除进行测试，并且解决了问题（但我的数组当然充满了垃圾）。所以我得出的结论是 my`temp_factor`是对象的浅拷贝，因此它的引用对象与原始对象一起消失了。然后我尝试使用 marshal 技巧进行深度复制，但没有帮助。

这就是我所拥有的，因为我无法解决问题。谁能帮我找出所有这些神话背后的机制？

你们就重写代码以避免问题提供了非常好的建议，这很酷，他们真的很有帮助！但我仍然想知道是什么导致了上述问题？如果我能学到那一点信息就太好了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T21:46:22.750

使用 C++ 和 STL 的大学时光教会了我：永远不要修改您目前正在迭代的集合。那么，与其原地删除项目，不如尝试构建一个新数组？

```
temp_factor = nil
new_factors = factor_list.map do |factor|
  if factor._variables.include?(variable)
    if temp_factor == nil
      temp_factor = factor
    else
      temp_factor = multiply(temp_factor, factor)
    end
    nil
  else
    factor
  end
end.compact

temp_factor = sumOut(temp_factor, variable)
factor_list = new_factors + [temp_factor] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T22:05:31.733

我真的不确定我是否理解您要通过代码实现的目标，因此如果您可以提供更多关于您希望最终结果是什么以及原因的描述可能会有所帮助，但基于我*认为*您'正在尝试做，我认为您可以通过将其分为几个步骤来获得更大的清晰度：

```
# first, split the array into an array that matches and one that doesn't
matched, factors = factor_list.partition { |f| f._variables.include? variable }

# then call multiply with each element of the matched list on the result of
# calling it on the previous elements
temp_factor = matched.reduce { |acc, f| multiply(acc, f) }

temp_factor = sumOut(temp_factor, variable)
factor_list = factors << temp_factor 
```

我还会重新考虑有这么多经常重新分配的临时变量，因为在任何时候跟踪它们的值变得非常困难 - 而且很容易引入错误。

# java - 以纯文本形式从 Jquery ajax 回调将密码传递给 Java 是否安全？

> ID：13058210
> 
> 赞同：-1
> 
> 时间：2012-10-24T21:40:17.247
> 
> 标签：java, jquery, ajax, security, servlets

还是我需要先加密它。我正在使用密码文本字段，并使用

```
var pwd = $("#userpassword").val(); 
```

接着

```
$.post('JavaServlet', { formData: formData, pwd: pwd, date: date }, function(data) { 
```

java部分对其进行加密并将其存储在ldap中。
如果您建议加密，请建议完成任务的最佳方法。提前致谢！

答：我们正在使用 SSL。所以加密密码似乎是多余的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T21:43:25.230

它**不安全**，除非您使用**SSL/TLS** (Https)。您通过 HTTP 发送的所有信息都以明文形式从客户端发送到服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T22:01:26.830

除非您使用至少 128 位加密的 SSL，否则它不被认为是安全的，顺便说一下，它在 2010 年代被破坏了。使用哈希密码比纯文本更安全，更容易，资源消耗更少，并且可能对您来说就足够了，具体取决于您的要求。

[有关使用 javascript md5（哈希）和 javascript 中的](http://pajhome.org.uk/crypt/md5/)一些库[保护密码的](http://pajhome.org.uk/crypt/md5/auth.html)更多信息。我知道其中一个被雅虎使用了很多年。

# ssh - cygwin Xserver 失去连接

> ID：13058215
> 
> 赞同：0
> 
> 时间：2012-10-24T21:40:28.777
> 
> 标签：ssh, cygwin, xserver

我在 cygwin 上运行 Xserver（在 Windows 7 上），然后使用`xterm`远程到 linux `ssh -X`，并在那里运行远程应用程序，比如`konsole`和`emacs`其他。

最初一切正常，例如执行`emacs`会在我的 Windows 7 机器上弹出正确工作的窗口。

但是，如果我尝试在一段时间后（比如一个小时）运行相同的 emacs，我会收到一条 linux 消息 `Display localhost:10.0 unavailable, simulating -nw` 并`emacs`在线运行。

我已经检查过了，Xserver 似乎仍然正常运行。事实上，如果我退出到原来的 cygwin 并再次通过 ssh -X 重新连接到 Linux，它就可以正常工作了。

您知道发生了什么以及如何解决吗？为什么我的 Xserver 连接断开？

非常感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T16:48:46.187

感觉自己像个白痴一样提出问题并自己回答，但对于未来的参考，这里有一个可以帮助的解决方法。而不是使用`ssh -X`, if`ssh -Y`代替，它工作得更好，并且不会随着时间的推移而放弃产生新窗口的能力。

# c++ - 使用多个数据流关联事件位置

> ID：13058223
> 
> 赞同：2
> 
> 时间：2012-10-24T21:40:59.717
> 
> 标签：c++, algorithm, dataset, comparison, time-series

我有一组信号，我试图将它们相互关联以确定事件发生的可能性。

信号 A 具有准确的事件标记，但可能会遗漏一些或无意中捕获不需要的事件标记。信号 B 有许多噪声事件，其中许多是错误的，但捕获 A 中缺少的细节。信号 C 具有事件的精确发生，但位置可能在任一方向上发生位移和拉伸。

有没有一种方法可以从中找到实际的事件点？

我正在考虑将 Signal C 的最近匹配事件缩放到 Signal A 的最近事件，其中 Single C 的中间事件将在这些地标点之间缩放。然后将信号 C 与信号 B 进行比较，以找到与信号 C 的缩放点最接近的匹配。

你会如何处理这个问题？

# .net - Javascript 作为 .NET 类库中的嵌入式资源？

> ID：13058224
> 
> 赞同：1
> 
> 时间：2012-10-24T21:41:02.557
> 
> 标签：.net, embedded-resource

我正在运行一个引用类库的 MVC 项目。类库包含一个构建操作设置为“*嵌入式资源”的**javascript*文件。

 ***文件实际上发生了什么？**我似乎无法使用它来获取它，`ResourceManager`因为我不知道它将资源放入的命名空间。

我的类库文件结构：

*   /项目
*   /项目/网站
*   /项目/Web/Js
*   /Project/Web/Js/Test.js << 嵌入式资源

代码：

```
var t = this.GetType().Assembly;
var r = new System.Resources.ResourceManager("Namespace", t); //What is the namespace here?
var js = r.GetObject("Test.js"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T22:44:35.760

抱歉，我现在无法访问编译器，因此以下内容可能包含轻微错误。

```
var asm = typeof(MyClass).Assembly;
var stream = asm. GetManifestResourceStream("<rootnamespace>.Project.Web.Js.Test.js");
var reader = new StreamReader(stream);
String source = reader.ReadToEnd(); 
```

笔记：

*   使用`typeof(x)`而不是`GetType()`. 如果从类型继承，后者将给出不正确的结果。
*   rootnamespace 可以在项目设置中找到/设置。（在我的示例中，我假设“Project”是项目内的一个文件夹）
*   asp.net 有一个以这种方式使用资源的预构建解决方案。试着调查`Page.ClientScript`一下。（我不确定这是否也适用于 MVC，但我敢打赌它会）*

# sql-server - SQL Server：从表中的每一行中选择一个子字符串

> ID：13058227
> 
> 赞同：1
> 
> 时间：2012-10-24T21:41:11.190
> 
> 标签：sql-server, iteration

我在数据库中有一个表（我不允许修改），它是按以下方式设置的：

```
ID  Value                                                                 Column x...
0   Apple: GDGolden Delicious, Date Picked: 5/5/2012, Color: Yellow
1   Apple: GSGranny Smith, Date Picked: 3/24/2010, Color: Green
2   Apple: RDRed Delicious, Date Picked: 1/15/2012, Color: Red
3   Random Data, Apple: BRBrayburn, Date Picked: 2/15/2012, Color: Mixed 
```

`ID`is an`INT`和`Value`is a `VarChar`，数据之间用逗号分隔。

对于表中的每一行，我需要提取列出的子字符串，在这种情况下，每个水果品种的缩写（即 GD、GS、RD、BR）并将其放入一个临时表中，其中包含所有该表中的其他列以及子字符串，但该`Value`列中没有其他数据。表中的每个子字符串缩写正好是两个字符，尽管正如您在最后一行看到的，它并不总是出现在列的开头。

在我的阅读中，听起来我必须使用光标来执行此操作——但如果可能的话，我想避免这种情况。有没有办法在不使用游标的情况下通过 case 语句或子查询来实现这一点？

最终结果将如下所示：

```
ID  Value  Column x  Column y...
0   GD     
1   GS     
2   RD     
3   BR 
```

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T22:00:24.700

万一，你的记录没有说`Apple:`，你可以先找一下`:`：

```
select id, 
  substring(value, charindex(':', value, 1) + 2, 2) value
from yourtable 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/e0e72/13)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T21:50:45.383

```
SELECT ID, SUBSTRING(value, CHARINDEX('Apple: ',value)+7, 2)
    FROM YourTable 
```

# ruby - 如何在 Rails 中选择合适的关联？

> ID：13058228
> 
> 赞同：1
> 
> 时间：2012-10-24T21:41:15.487
> 
> 标签：ruby, ruby-on-rails-3, activerecord, associations

我正在尝试通过创建一个非常简单的应用程序来学习 Rails，该应用程序只是创建一个网站，人们可以在该网站上创建一个作者和书籍列表，并与该书由作者撰写的关联。我希望这会简单而干燥，但我遇到了意想不到的麻烦。

首先查看我的模型，我已经建立了关联并制作了所需的每个数据点（author.name、book.title 和 book.author）。我不想将 :author 或 :author_id 添加到 attr_accessible 列表中，因为我想使用适当的 Rails 约定。

应用程序/模型/作者.rb：

```
class Author < ActiveRecord::Base
  attr_accessible :name
  validates_presence_of :name
  has_many :books
end 
```

应用程序/模型/book.rb：

```
class Book < ActiveRecord::Base
  attr_accessible :title
  validates_presence_of :title
  belongs_to :author
  validates_associated :author
end 
```

我认为书籍控制器和视图完全来自脚手架并且非常无趣。有趣的是书籍控制器。查看新方法，我所做的只是添加一个收集器，它获取带有 id 的作者姓名数组以传递给视图。（老实说，我想我宁愿根本不传递 id。）

应用程序/控制器/books_controller.rb

```
 # GET /books/new
  # GET /books/new.json
  def new
    @book = Book.new
    @authors = Author.all.collect {|a| [a.name, a.id]}

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @book }
    end
  end 
```

现在转到视图，我使用默认的 new.html.haml，但对 _form.html.haml 进行了更改。我使用@authors 中的值添加了一个选择字段。

app/views/books/_form.html.haml

```
= form_for @book do |f|
  - if @book.errors.any?
    #error_explanation
      %h2= "#{pluralize(@book.errors.count, "error")} prohibited this book from being saved:"
      %ul
        - @book.errors.full_messages.each do |msg|
          %li= msg

  .field
    = f.label :name
    = f.text_field :name
  .field
    = f.label :author
    = f.select(:author, @authors, {:include_blank => ""})
 .actions
    = f.submit 'Save' 
```

最后，回到我的控制器的 create 方法。我尝试保存基本参数并从所选作者创建作者关联。

应用程序/控制器/books_controller.rb

```
 # POST /books
  # POST /books.json
  def create
    @book = Book.new(params[:book])
    @book.author = Author.find_by_id(params[:author])

    respond_to do |format|
      if @book.save
        format.html { redirect_to @book, notice: 'Book was successfully created.' }
        format.json { render json: @book, status: :created, location: @book }
      else
        format.html { render action: "new" }
        format.json { render json: @book.errors, status: :unprocessable_entity }
      end
    end
  end 
```

当我单击“保存”时，出现以下错误：

```
Can't mass-assign protected attributes: author 
```

我知道这是因为我选择的值放在了 params[:book] 而不是 params[:author] 中。所以我有两个问题。

1) 如何修复我的 select 语句以发送 params[:author] 而不是 params[:book]？

2）有没有更好的方法来完全隐藏id关联？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T21:58:59.740

“无法批量分配受保护的属性：作者”意味着您的属性未在模型中列为 attr_accessible

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T15:17:30.947

我想我基本上已经弄清楚了，正如我所怀疑的那样，我根本不需要更改我的模型代码。

我将控制器的 @authors 新方法定义更改为仅返回作者姓名，其中包含以下内容：

```
@authors = Author.pluck(:name) 
```

这实现了我隐藏 id 的目标，尽管当我需要在控制器创建方法中按名称而不是 id 搜索时它可能会慢一点（如下）。

接下来，我修正了我的观点以设置 params[:author] 而不是 params[:book][:author]。

```
= label :author, :name, 'Author'
= select_tag(:author, options_for_select(@authors), {:include_blank => ""}) 
```

最后，我更改了@book 的新方法创建：

```
@book = Author.find_by_name(params[:author]).books.create(params[:book]) 
```

我对此相当满意。我唯一不喜欢的是标签创建了一个“author_name”标签，而不是简单的“author”。

# c# - 为什么我不能投？

> ID：13058230
> 
> 赞同：0
> 
> 时间：2012-10-24T21:41:26.987
> 
> 标签：c#, generics

```
public abstrct class Item
{
   public string Name {get;set;}
}

public class Music : Item
{
    public double Price {get;set;} 
}

public class Game : Item
{
  public string Image {get;set;}
}

public class Inventory
{

private IList<Item> _games;
private IList<Item> _musics;

public Inventory()
{
  _games = new List<Item>();
  _musics = new List<Item>();
}

public void Add<T>(T item) where T : Item
{
if(typeof(T) == typeof(Game))
{
    _game.add(item);
}
if(typeof(T) == typeof(Music))
{
    _muisc.add(item);
}

public List<T> GetCollection<T>() where T : Item
{
  return (List<T>) _muiscs;
}

class Porgram
{
  static void Main(string[] args)
{
   Inventory inventory = new Inventory();
   var music1 = new Music(){ Name ="aa", Price = 10};
   var Music2 = new Music() { Name ="bb", price = 20 };

inventory.add(music1);
inventory.add(music2);

List<Music> myMusics = inventory.GetCollection<Music>();

} 
```

代码将编译，但在尝试调用 Get Collection 方法时会抛出异常。

我不确定为什么？我猜我使用的泛型不正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T21:52:55.417

List<Item> 不能转换为 List<Music>。虽然 Music 是 Item 的子类，但泛型类型不遵循与其集合类型相同的继承模式。修复代码的最简单方法是将 GetCollection 方法中的转换替换为调用 Linq 扩展方法转换，然后调用 ToList。也就是说，我认为您的整个类可以重新设计以更好地处理这种继承。

因此，您的 GetCollection 方法如下所示：

```
public List<T> GetCollection<T>() where T : Item
{
    return _musics.Cast<T>().ToList();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T22:01:35.950

只需将您的 GetCollection 方法修改为

```
public List <T> GetCollection<T>() where T :Item
        {

            if (typeof(T) == typeof(Game))
            {
                return _games.Cast<T>().ToList();
            }
            if (typeof(T) == typeof(Music))
            {
                return _musics.Cast<T>().ToList(); ;
            }
        return null;
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T21:51:40.610

试试这个代码：

```
public abstract class Item
{
    public string Name { get; set; }
}

public class Music : Item
{
    public double Price { get; set; }
}

public class Game : Item
{
    public string Image { get; set; }
}

public class Inventory<E> where E : Item
{

    private IList<E> _games;
    private IList<E> _musics;

    public Inventory()
    {
        _games = new List<E>();
        _musics = new List<E>();
    }

    public void Add(E item)
    {
        if (typeof(E) == typeof(Game))
        {
            _games.Add(item);
        }
        if (typeof(E) == typeof(Music))
        {
            _musics.Add(item);
        }
    }

    public List<E> GetCollection()
    {
        return _musics;
    }
}

public class Program
{
    public static void Main(string[] args)
    {
        Inventory<Item> inventory = new Inventory<Item>();
        var music1 = new Music() { Name = "aa", Price = 10 };
        var music2 = new Music() { Name = "bb", Price = 20 };

        inventory.Add(music1);
        inventory.Add(music2);

        List<Item> myMusics = inventory.GetCollection();

    }
} 
```

您需要将您的 Inventory 类声明为通用的，它需要一个扩展的类`Item`

另外：看起来你写了代码，并没有复制和粘贴它......我不知道你为什么这样做......

# c# - BeginRead 的缓冲区何时填充？

> ID：13058241
> 
> 赞同：2
> 
> 时间：2012-10-24T21:42:05.603
> 
> 标签：c#, .net-4.0, asynchronous, tcp, networkstream

我正在尝试编写一个[`TcpClient`](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcpclient%28v=vs.100%29.aspx)实现。我想在处理数据时开始下一次读取，但我不确定我传入的字节数组何时[`BeginRead`](http://msdn.microsoft.com/en-us/library/system.net.sockets.networkstream.beginread%28v=vs.100%29.aspx)被修改。这是我当前的实现

```
private void ProcessData()
{
    byte[] buffer = new byte[_tcpClient.ReceiveBufferSize];
    var networkStream = _tcpClient.GetStream();

    IAsyncResult result = networkStream.BeginRead(buffer, 0, buffer.Length, null, null);

    int read;
    while ((read = networkStream.EndRead(result)) != 0)
    {
        result = networkStream.BeginRead(buffer, 0, buffer.Length, null, null);

        ProcessChunk(buffer, read);
    }  
} 
```

我`BeginRead`在长时间运行的函数之前开始下一个，因为我希望后台 IO 在我处理时开始获取下一个数据块。我可以只使用一个`byte[]`缓冲区来执行此操作，还是需要在每次`BeginRead`调用时交替进行？

```
private void ProcessData()
{
    bool bufferChoice = false;
    byte[] bufferA = new byte[_tcpClient.ReceiveBufferSize];
    byte[] bufferB = new byte[_tcpClient.ReceiveBufferSize];
    var networkStream = _tcpClient.GetStream();

    IAsyncResult result = networkStream.BeginRead(bufferA, 0, bufferA.Length, null, null);

    int read;
    while ((read = networkStream.EndRead(result)) != 0)
    {
        if (bufferChoice)
        {
            result = networkStream.BeginRead(bufferA, 0, bufferA.Length, null, null);
            ProcessChunk(bufferB, read); //Call function with B's buffer
        }
        else
        {
            result = networkStream.BeginRead(bufferB, 0, bufferB.Length, null, null);
            ProcessChunk(bufferA, read); //Call function with A's buffer
        }

        bufferChoice = !bufferChoice;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T22:09:26.000

通常无法保证何时使用传递给 BeginRead 的缓冲区。理论上，它甚至可以在 BeginRead 调用期间被同步填充。

旁注：您应该编写始终正确运行的代码，因为它比猜测特定实现的特定行为更容易推理。在这种情况下，只需复制数据或使用多个缓冲区，这样您就永远不会有未完成的 IO 和处理共享同一个缓冲区。

# .htaccess - drupal多站点符号链接？

> ID：13058242
> 
> 赞同：1
> 
> 时间：2012-10-24T21:42:12.810
> 
> 标签：.htaccess, drupal, theming

所以基本上我使用的是drupal多站点。结构如下：

mywebsite.com: -- public_html/sites/default/

sub.mywebsite.com: -- public_html/sites/sub.mywebsite.com/

工作得很好（通过settings.php），但问题出现在主题化时。为了引用有效的图像文件，我必须使用`drupal_get_path('theme','mythemefolder')` 并且由于激活了“漂亮的网址”，我必须使用以下代码来引用图像文件：

```
$uri=$_SERVER["REQUEST_URI"];
$path=drupal_get_path('theme','mythemefolder')."/";
$real_prefix=$base_path; // global from drupal, equates to "/" as drupal resides in public_html folder.
$count=substr_count($uri,"/");
for ($i=0;$i<$count;$i++) $real_prefix.="../"; 
```

这样，我可以执行以下操作：

```
<script type="text/css">
#borderclass {
  background-image: url('<?= $real_prefix.$path.'images/a_border_image.png'; ?>');
  background-repeat: repeat-x;
  vertical-align: top;
}
</script>
<div class="borderclass" width="10px" height="10px"><!-- my image border div --></div> 
```

最好不必这样做。只需简单地引用本地站点文件夹...

因此，我可以通过上面引用的 PHP 编写：

```
<div style="background-image: url('<?= $path ?>images/a_border_image.png');"></div> 
```

* * *

* * *

生成的 html 应该出现在 View Source 中，如下所示：

```
<div style="background-image: url('themes/mythemefolder/images/a_border_image.png');"></div> 
```

并不是：

```
<div style="background-image: url('sites/sub.mywebsite.com/themes/mythemefolder/images/a_border_image.png');"></div> 
```

是否可以配置我的服务器来做这样的事情？基本上，我宁愿让我的客户在使用他们自己的域或子域时甚至不知道服务器上存在“站点”目录。更不用说上面提出的主题问题了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T00:04:25.503

根据我的理解，您试图理解的内容，让我告诉您，这不是您通常处理事情的方式。

模块不需要查看主题（模板文件除外）文件夹即可获取任何内容。徽标、标题和其他与主题相关的内容可以存储在主题的名为“images”或其他任何内容的子文件夹中。

主题文件夹将包含所有模板文件（页面模板、html 模板、节点模板等），但如果您想获取主题的路径，则可以使用一个变量。

css 中的 url()，如果样式在文件中，将相对于 css 文件 - 而不是当前页面。这就是您可以输入的位置，`url('images/a_border_image.png')`因此无论主题的位置如何，它都将相对于主题文件夹。浏览器知道 css 文件的位置是`sites/sub.mywebsite.com/themes/mythemefolder`，并且 css 中的 url() 内容将相对于*该*文件夹。

但是，如果您想（轻松）获得正确的路径，请执行以下操作：

```
<?php
$theme_path = drupal_get_path('theme','mythemefolder').'/';
$real_path = url($theme_path . 'images/images/a_border_image.png'); // 'sites/sub.mywebsite.com/themes/mythemefolder/images/a_border_image.png'
?> 
```

[url()](http://api.drupal.org/api/drupal/includes!common.inc/function/url/7)将为您处理基本路径和所有 substr 内容。

# javascript - 如何从 JavaScript 加载 html5 视频标签中的 src？

> ID：13058243
> 
> 赞同：1
> 
> 时间：2012-10-24T21:42:12.453
> 
> 标签：javascript, jquery, jquery-plugins, html5-video, html5-canvas

事情是这样的，我正在使用 ASP.NET，我正在使用这个特殊的 SignalR 库向我的客户广播视频，但据我所知，我无法流式传输视频，因为 signalR 是一个消息传递系统，它不是有意的流式传输视频、文件或类似的东西。

现在我要做的是将视频拆分为 Base64 编码为字符串的缓冲区，然后在客户端上尝试将其加载到视频标签的源中。

在这里，我向您展示我在客户端上所做的事情：

HTML 代码：

```
<video id="myVideo">
   <source id="video_source">
</video> 
```

Javascript代码：

```
 //here somehow I am getting the string with the base64-encoded video
 function playVideo(message) {
          var myVideo = document.getElementById("myVideo");
          var mySource = document.getElementById("video_source");
          mySource.setAttribute("src", getEncodedVideoString("mp4", message));
          myVideo.load();
          myVideo.play();         
      };

  // here I am formatting and concatenating the string for my source attribute 
  function getEncodedVideoString(type, message) {
        return 'data:video/' + type + ';base64,' + message;
    } 
```

正如你所看到的，目前我面临一个有点奇怪的场景，但我已经在客户端上编码了视频，现在我只需要找出重现该视频的方法。

这里是当我的问题出现时，是否有人以前做过这样的事情，或者你有任何想法或建议这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T04:16:53.393

感谢您提出一个有趣的问题；我以前从未想过它，但它似乎是可能的。Ian Devlin 解释了如何将[数据 URI 与 HTML5 媒体](http://www.iandevlin.com/blog/2012/09/html5/html5-media-and-data-uri)（包括视频）一起使用 -还包括一个[工作示例。](http://iandevlin.com/html5/data-uri/video.php)

我看到的唯一区别是标签`type`中添加了一个属性；`<source>`如果添加这个不起作用，你确定你的编码正确吗？当你尝试时会发生什么，你有任何错误吗？

# java - JavaMail：Folder.hasNewMessages() 和 .getMessageCount() 似乎无法正常工作

> ID：13058245
> 
> 赞同：0
> 
> 时间：2012-10-24T21:42:24.340
> 
> 标签：java, jakarta-mail, pop3

我有这个简单的代码来定期访问 pop3 服务器并检查收件箱文件夹中是否有新邮件

```
public static void main(String[] args) {

    try {

        String storeType = "pop3";

        String host = "...";
        int port = ...;
        String user = "...";
        String psw = "...";

        //
        int delay = 1;
        long mins = 200 * 60 * delay;
        firstAccess = true;

        Properties properties = new Properties();
        properties.put("mail.pop3.host", host);
        properties.put("mail.pop3.user", user);
        properties.put("mail.pop3.socketFactory.class", "javax.net.ssl.SSLSocketFactory");
        properties.put("mail.pop3.port", port);

        RomasAuthenticator r = new RomasAuthenticator(user, psw);

        Session session = Session.getDefaultInstance(properties, r);

        POP3Store emailStore = (POP3Store) session.getStore(storeType);
        emailStore.connect(host, port, user, psw);

        Folder emailFolder = emailStore.getFolder("INBOX");
        emailFolder.open(Folder.READ_ONLY);

        while (true) {
            if (checkInbox(emailFolder)) {
                //prepara la notifica per il voice_service
                System.out.println("mes!");
            }
            firstAccess = false;
            Thread.sleep(mins);
        }

    } catch (Exception ex) {
        //return null;
    }
}

private static boolean checkInbox(Folder inbox_folder) throws MessagingException, IOException {
    System.out.println("checking");
    boolean res = false;

    try {

        int email_actual_count = inbox_folder.getMessageCount();

        if (email_actual_count > email_prev_count /*or hasNewMessages()*/) {
            if (!firstAccess) {
                res = true;
            }
        }

        //bisogna aggiornare comunque email_count in caso siano stati cancellati messaggi
        email_prev_count = email_actual_count;

    } 

    catch (Exception e) {
        e.printStackTrace();
    }

    return res;

} 
```

getMessageCount() 和 hasNewMessages() 都不起作用，因为第一个总是返回相同数量的消息，而第二个总是返回 false。我做错了什么？我不想使用消息侦听器，因为此代码将在性能非常低的机器人上运行.. 谢谢大家

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T22:01:16.650

[JavaMail FAQ 解释了为什么这些功能不适用于 POP3 协议。](http://www.oracle.com/technetwork/java/javamail/faq/index.html#newmsgs2)

# javascript - 使用 javascript/jQuery 将 url 路由到 php 文件

> ID：13058250
> 
> 赞同：0
> 
> 时间：2012-10-24T21:42:40.927
> 
> 标签：javascript, jquery

我对此进行了研究，但发现了运气，我的问题确实是一个希望，我怀疑这是可能的。

您可以使用 JavaScript 将 URL 路由到特定的 PHP 文件吗？就像在 .htaccess 中重写一样。出于几个原因，我只需使用 JavaScript 将虚假 URL 链接到 PHP 文件会容易得多。

场景是我正在使用 PHP、数据库和 jQuery 创建用户配置文件。由于我使用的是历史 API 脚本，如果用户导航到带有链接的配置文件，我可以轻松地为用户提供配置文件，而无需编辑 .htaccess 文件。为此，我会在链接单击时阻止默认设置，这样您就不会得到 404，获取 href 值，使用 AJAX 从 PHP 文件中获取 JSON 数据，然后在模板中使用 AJAX 并加载信息。

问题是当用户直接输入 URL 例如 www.example.com/joebloggs 时，这只会导致 404，因为该文件不存在。我想用 jQuery 拦截页面加载，而是用 JSON 加载 PHP 模板和 ajax 信息。

如果不可能，我将使用 .htaccess 使用 JavaScript 会更容易

# php - 这个 PHP 代码危险吗？

> ID：13058253
> 
> 赞同：1
> 
> 时间：2012-10-24T21:43:07.573
> 
> 标签：php, security

我刚刚草拟了主要的 index.php 文件。它应该是所有站点请求的网关。我想要这样做的原因是拥有干净的 URL。

我已将我的网站拆分为模块。（例如：注册、文章等）

然后我在 .htaccess 中加入了一些行，其中之一是：

```
RewriteRule ^([a-zA-Z0-9-]*)[/]?([a-zA-Z0-9-]*)[/]?([a-zA-Z0-9-]*)[/]?([a-zA-Z0-9-]*)[/]?([a-zA-Z0-9-]*)[/]?([a-zA-Z0-9-]*)[/]?([a-zA-Z0-9-]*)[/]?([a-zA-Z0-9-]*)[/]?([a-zA-Z0-9-]*)[/]?$ index.php?1=$1&2=$2&3=$3&4=$4&5=$5&6=$6&7=$7&8=$8&9=$9 [L,NC] 
```

这只是将每个“文件夹”映射到正确的 $_GET 元素... domain/1/hi/3

```
$_GET['2'] == 'hi'; // TRUE 
```

所以我想根据第一个 $_GET 元素运行模块。这样我就可以让我的项目井井有条。与模块关联的所有文件都在其文件夹中。

这是我的文件夹结构：

```
/
    modules/
        register/
            ajax/
                process.php
            register.php
        articles/
            articles.php
    index.php 
```

这是映射所有内容的 PHP 代码（index.php）：

```
<?php

$basePath = 'modules';

for ($x = 1; $x <= 9; $x++) {
    if (preg_match('/[^a-zA-Z0-9-]/', $_GET[$x])) {
        require_once(__DIR__ . "/$basePath/404/404.php");
        die();
    }
}

$baseModule = $_GET['1'];

if (file_exists(__DIR__ . "/$basePath/$baseModule/$baseModule.php")) {
    require_once(__DIR__ . "/$basePath/$baseModule/$baseModule.php");
} else {
    require_once(__DIR__ . "/$basePath/404/404.php");
} 
```

这是危险代码吗？我执行正则表达式的原因是检查 GET 是否不包含 . 或 / 可用于执行 ../ 并因此运行服务器上的几乎任何文件...

这是否仍然构成安全漏洞、潜在的安全漏洞，还是实际上是不好的做法？

解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T22:13:11.440

在我看来是的 - 阅读有关**包括注射**的信息。结合其他部分，例如不安全的文件上传，这甚至可能“杀死”。见[这里](http://rgaucher.info/post/2006/10/27/How-to-scan-for-basic-php-include-injection)。

```
__DIR__ . "/$basePath/$baseModule/$baseModule.php" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T22:10:55.387

```
RewriteRule ^/article/(.*)$ http://example.com/articles/articles.php 
```

然后在 article.php 中查看 url 段并根据需要进行处理。

@gschwa 的方法也很有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T14:22:39.723

我认为在数组中定义所有选项是最好的选择，因为在使用 in_array() 验证代码时，它不会对我的代码产生速度影响。该代码不安全，因为它可能允许攻击。我还没有找到任何能够穿透安全性的方法，但我认为它仍然有点边缘。

我认为这是最好的选择的原因是 Apache 很慢。

请对这个答案投赞成票或反对票，我会接受得票最多的答案。（无论如何，如果我接受这个答案，我就不会获得任何声誉。）

# grep - 如何使用 grep 仅在特定文件类型中进行搜索？

> ID：13058255
> 
> 赞同：7
> 
> 时间：2012-10-24T21:43:22.677
> 
> 标签：grep

我有很多文件，我想找到`MYVAR`.

我确定它在*.yml*文件之一中，但我在手册中找不到`grep`如何指定文件类型。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-24T21:47:10.050

```
grep -rn --include=*.yml "MYVAR" your_directory 
```

请注意，grep 默认区分大小写（通过 -i 表示忽略大小写），并接受正则表达式和字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T21:49:14.483

你不给 grep 一个文件类型，只是一个文件列表。你的 shell 可以扩展一个模式来为 grep 提供正确的文件列表，但是：

```
$ grep MYVAR *.yml 
```

如果您的`.yml`文件不是全部​​在一个目录中，那么提高赌注和使用可能会更容易`find`：

```
$ find -name '*.yml' -exec grep MYVAR {} \+ 
```

这将从当前目录中递归地找到任何以 .yml 结尾的文件。然后，它将文件列表替换为一对花括号`{}`。尾随`\+`只是一个特殊的`find`分隔符，表示`-exec`切换已完成。结果是匹配文件列表并将它们交给 grep。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T21:59:36.943

如果所有 .yml 文件都在一个目录中，则 cd 到该目录，然后...

```
grep MYWAR *.yml 
```

如果所有 .yml 文件都在多个目录中，则 cd 到这些目录的顶部，然后...

```
grep MYWAR `find . -name \*.yml` 
```

如果您不知道 .yml 文件所在目录的顶部，并且想要搜索整个系统...

```
grep MYWAR `find / -name \*.yml` 
```

最后一个选项可能需要 root 权限才能读取所有目录。

上面的 ` 字符是与键盘上的 ~ 键一起定位的字符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T21:50:28.067

```
find . -name \*.yml -exec grep -Hn MYVAR {} \; 
```

# vb.net - 从数据集中将值添加到列表框 - NullReferenceException 错误 (VB.NET)

> ID：13058263
> 
> 赞同：0
> 
> 时间：2012-10-24T21:44:06.790
> 
> 标签：vb.net

我正在尝试将单个记录从 a 填充`dataset`到`listbox`. 我可以看到数据集在数据集可视化工具中使用列标题“PLI”填充了预期值。我尝试使用以下命令使用数据集中的值填充列表框：

```
lstExistingPLI.Items.Add(New ListItem(ds.Tables("PLI").ToString())) 
```

我不断收到未处理的 NullReferenceException 错误。我也尝试过使用

```
lstExistingPLI.Items.Add(ds.Tables("PLI").ToString()) 
```

并得到同样的错误。谁能帮我解决我做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T21:59:14.443

首先我必须承认我不知道是什么导致你的`NullRefernceException`。

`lstExistingPLI`如果您尚未[初始化](http://msdn.microsoft.com/en-us/library/ms973814.aspx)，您的 ListBox可能为空。`DataSet`如果未初始化，则 ds 可能为 null 。也许您已经对其进行了初始化，但尚未向其添加名称为“PLI”的 DataTable，则该[`DataTableCollection.Item`](http://msdn.microsoft.com/en-us/library/58st33fb.aspx)属性将返回 null。

但是，`ds.Tables`返回一个`DataTable`. 为什么你认为`DataTable.ToString`返回任何可以以有用的方式添加到 ListBox 的东西？是否要添加每个 DataRow 的字段？

（假设一切都正确[初始化](http://msdn.microsoft.com/en-us/library/ms973814.aspx)）

```
For Each  row As DataRow In ds.Tables(0).Rows
    'assuming that PLI is not the table but the field that you want to add to the ListBox'
    lstExistingPLI.Items.Add(New ListItem(row.Field(Of String)("PLI")))
Next 
```

# android - IntelliJ IDEA -v Eclipse中的Android开发（启动一个活动）

> ID：13058264
> 
> 赞同：2
> 
> 时间：2012-10-24T21:44:11.687
> 
> 标签：android

我刚刚开始开发 Android 项目，但遇到了困难。我从开发者网站（http://developer.android.com/training/basics/firstapp/index.html）开始，我的问题从开始一个新的活动开始（http://developer.android.com/training/基础知识/firstapp/starting-activity.html)

该站点需要 Eclipse，我怀疑我错过了 Eclipse 幕后发生的一些事情，但我使用的是 IntelliJ IDEA。

在 DisplayMessageAcitivity.java 我收到以下错误：

```
cannot find symbol variable activity_display_message. 
```

在 Eclipse 示例中，这是一个布局名称。

我包含了我第一次遇到问题时的代码，而不是我尝试修复时的代码。

显示消息活动：

```
public class DisplayMessageActivity extends Activity {
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_display_message);
    }
} 
```

安卓清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
          package="com.example"
          android:versionCode="1"
          android:versionName="1.0">
    <uses-sdk android:minSdkVersion="13"/>
    <application android:label="@string/app_name" android:icon="@drawable/icon">
        <activity android:name="MyActivity"
                  android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN"/>
                <category android:name="android.intent.category.LAUNCHER"/>
            </intent-filter>
        </activity>
        <activity android:name=".DisplayMessageActivity"
                  android:label="My Message">
                <meta-data android:name="android.support.PARENT_ACTIVITY"
                        android:value="com.example.MainActivity"/>
        </activity>
    </application>
</manifest> 
```

R.java：

```
package com.example;

public final class R {
    public static final class attr {
    }
    public static final class color {
        public static final int testing_string_color=0x7f040000;
    }
    public static final class drawable {
        public static final int icon=0x7f020000;
    }
    public static final class id {
        public static final int edit_message=0x7f060000;
    }
    public static final class layout {
        public static final int main=0x7f030000;
    }
    public static final class string {
        public static final int app_name=0x7f050000;
        public static final int button_send=0x7f050002;
        public static final int edit_message=0x7f050001;
        public static final int menu_settings=0x7f050003;
        public static final int title_activity_main=0x7f050004;
    }
} 
```

主.xml：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:orientation="horizontal"
              android:layout_width="match_parent"
              android:layout_height="match_parent"
        >
    <EditText android:id="@+id/edit_message"
              android:layout_width="0dp"
              android:layout_height="wrap_content"
              android:layout_weight="1"
              android:hint="@string/edit_message"/>
    <Button android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:text="@string/button_send"
            android:onClick="sendMessage"/>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T21:47:48.103

因为您没有名为`activity_display_message`.

如果您调用`setContentView(R.layout.main)`，它将引用一个名为 .xml 的 XML 布局文档`main.xml`。如果您正在使用`R.layout.activity_display_message`，则必须有一个名为`activity_display_message`. 如果您的意图是改为使用该`main.xml`布局，则应改为`setContentView(R.layout.main)`改为调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T21:48:14.027

替换`setContentView(R.layout.activity_display_message);`为`setContentView(R.layout.main);`

您只能引用具有布局文件名称的布局。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-27T05:06:38.387

在遵循[该教程](https://developer.android.com/training/basics/firstapp/starting-activity.html#DisplayMessage)但不使用 Eclipse 时，代码实际上应该是：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // Get the message from the intent
    Intent intent = getIntent();
    String message = intent.getStringExtra(MainActivity.EXTRA_MESSAGE);

    // Create the text view
    TextView textView = new TextView(this);
    textView.setTextSize(40);
    textView.setText(message);

    // Set the text view as the activity layout
    setContentView(textView);
} 
```

带有的版本`setContentView(R.layout.activity_display_message);`是一些 Eclipse 样板代码的一部分；如果您通过 Eclipse 添加了活动，那么它将添加该行以及使该行工作的其他一些支持代码。

# git - 在已经存在的项目上安装和配置 git flow

> ID：13058266
> 
> 赞同：3
> 
> 时间：2012-10-24T21:44:36.820
> 
> 标签：git, git-flow

我对 git 很陌生（阅读了 git pro 的基础知识），并且几乎没有后端知识。由于我的项目正在扩展，git flow 似乎是我需要的最合适和最简单的工具。然而，我想在开始之前确定要遵循的步骤。

我的`\var\www`文件夹如下：

*   我的项目
*   myproject_preview

目前我正在 myproject_preview 中进行更改，我正在进行测试，只要可以发布，我就会手动复制更改的文件。

我仍然希望能够在将更改推送到 myproject 之前预览更改。

据我所知，我需要：

1.  `git init -u`在 myproject 中使用创建存储库
2.  在 myproject_preview 中克隆它
3.  `git flow init`在 myproject_preview
4.  进行更改并提交
5.  将提交推送到 myproject（远程？）

这是正确的方法吗？

写这篇文章，我意识到我不太确定我是否熟悉 git 概念：/

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T22:04:52.110

您首先需要了解 GIT 的基本概念，然后才能继续学习 git flow。

恕我直言，在使用 git flow 之前，您需要知道如何手动合并分支和修复冲突。

这是一个很棒的交互式课程/教程，可以正确地学习 GIT：

[http://try.github.com/](http://try.github.com/)

了解GIT后，需要了解git flow背后的“模型”，阅读： http: [//nvie.com/posts/a-successful-git-branching-model/](http://nvie.com/posts/a-successful-git-branching-model/)

在了解分支模型并在项目中初始化 git 流之后，您可以执行功能更改，方法是键入

`git flow feature start feature_pretty_name`

等等。

# c# - 使用 CsvHelper 可以将空白转换为可为空的吗？

> ID：13058269
> 
> 赞同：8
> 
> 时间：2012-10-24T21:45:10.777
> 
> 标签：c#, .net, parsing, csv, csvhelper

我有一些非常蹩脚的 Csv 文件需要解析。我正在使用 CsvHelper，它工作得很棒。除了我有一些有空格的行，通常我有一个双倍。

文件：

> 文本,SomeDouble,MoreText
> 
> “好”，1.23，“好”
> 
> “坏”、“坏”

如果我尝试将其映射到

```
public class Test
{
  [CsvField(Name = "Text")]
  public string Text { get; set; }

  [CsvField(Name = "SomeDouble")]
  public double? SomeDouble{ get; set; }

  [CsvField(Name = "MoreText")]
  public string MoreText{ get; set; }
} 
```

然后我收到这样的错误：

> CsvHelper.CsvReaderException：尝试读取类型的记录时发生错误
> 
> 行：'2'（基于 1）
> 
> 字段索引：'1'（从 0 开始）
> 
> 字段名称：“SomeDouble”
> 
> 字段值：“”
> 
> System.Exception：不是 Double 的有效值。---> System.FormatException：输入字符串的格式不正确。
> 在 System.Number.ParseDouble(String value, NumberStyles options, NumberFormatInfo numfmt) 在 System.ComponentModel.DoubleConverter.FromString(String value, NumberFormatInfo formatInfo) 在 System.ComponentModel.BaseNumberConverter.ConvertFrom(ITypeDescriptorContext context, CultureInfo 文化, Object value) - -- 内部异常堆栈跟踪结束 --- 在 System.ComponentModel.BaseNumberConverter.ConvertFrom(ITypeDescriptorContext context, CultureInfoculture, Object value) 在 System.ComponentModel.NullableConverter.ConvertFrom(ITypeDescriptorContext context, CultureInfoculture, Object value) 在 lambda_method( CsvHelper.CsvReader.d__0`1.MoveNext() 处的闭包、ICsvReader

正如我所看到的，我的选择是创建一个自定义解析器，或者将我的值映射到一个字符串属性并在那里进行解析。

还有其他选择吗？

如果我可以配置我想将空白视为空，那就太好了。

根据要求，这是一个重现问题的代码示例

```
 static class Program
    {
        public class Test
        {
            [CsvField(Name = "Text")]
            public string Text { get; set; }

            [CsvField(Name = "SomeDouble")]
            public double? SomeDouble { get; set; }

            [CsvField(Name = "MoreText")]
            public string MoreText { get; set; }
        }

        static void Main(string[] args)
        {
            // create fake in memory file
            var memoryStream = new MemoryStream();
            var streamWriter = new StreamWriter(memoryStream);
            streamWriter.WriteLine("Text,SomeDouble,MoreText");
            streamWriter.WriteLine("Good, 1.23, Good");
            streamWriter.WriteLine("Bad, ,Bad");

            streamWriter.Flush();

            //reset the file to the begining
            memoryStream.Position = 0;

            using (
                var csv =
                    new CsvReader(
                        new StreamReader(memoryStream)))
            {
                // this call will blow up with the exception.
                var records = csv.GetRecords<Test>().ToList();

                //carry on and do stuff with 'records'...
            }
    } 
```

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T13:37:04.420

最后，我创建了自己的类型转换器，它将空白视为空值。

```
public class WhiteSpaceToNullableTypeConverter<T> : TypeConverter where T : struct
{
    public override bool CanConvertFrom(ITypeDescriptorContext context, Type sourceType)
    {
        return sourceType == typeof (string);
    }

    public override bool CanConvertTo(ITypeDescriptorContext context, Type destinationType)
    {
        return destinationType == typeof (T?);
    }

    public override object ConvertFrom(ITypeDescriptorContext context, System.Globalization.CultureInfo culture,
                                       object value)
    {
        T? result = null;

        var stringValue = (string) value;
        if (!string.IsNullOrWhiteSpace(stringValue))
        {
            var converter = TypeDescriptor.GetConverter(typeof(T));
            result = (T)converter.ConvertFrom(stringValue.Trim());
        }

        return result;
    }

    public override object ConvertTo(ITypeDescriptorContext context, System.Globalization.CultureInfo culture,
                                     object value, Type destinationType)
    {
        var result = (T?) value;
        return result.ToString();
    }
} 
```

像这样将其应用于您的模型

```
public class Test
{
    [CsvField(Name = "Text")]
    public string Text { get; set; }

    [CsvField(Name = "SomeDouble")]
    [TypeConverter( typeof( WhiteSpaceToNullableTypeConverter<Double> ) )]
    public double? SomeDouble{ get; set; }

    [CsvField(Name = "MoreText")]
    public string MoreText{ get; set; }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-03-12T14:41:08.590

一种简单的方法是`ConvertUsing()`在您的`ClassMap`:

```
Map(x => x.SomeDouble)
    .ConvertUsing(row => 
        string.IsNullOrWhiteSpace(row.GetField("SomeDouble")) ?
            (double?) null : 
            Convert.ToDouble(row.GetField("SomeDouble"))); 
```

我喜欢制作小辅助函数并调用它们

```
Map(x => x.SomeDouble)
    .ConvertUsing(row => GetOddballDouble(row.GetField("SomeDouble"))); 
```

# c++ - 在 CreateProcess 中格式化字符串 C++

> ID：13058270
> 
> 赞同：0
> 
> 时间：2012-10-24T21:45:19.203
> 
> 标签：c++, createprocess

大家好，我希望有人可以帮助我解决这个问题，我正在使用来自 msdn 的以下示例用于 createprocess 函数。

```
#include <windows.h>
#include <stdio.h>
#include <tchar.h>

void _tmain( int argc, TCHAR *argv[] )
{
    STARTUPINFO si;
    PROCESS_INFORMATION pi;

    ZeroMemory( &si, sizeof(si) );
    si.cb = sizeof(si);
    ZeroMemory( &pi, sizeof(pi) );

    if( argc != 2 )
    {
        printf("Usage: %s [cmdline]\n", argv[0]);
        return;
    }

    // Start the child process. 
    if( !CreateProcess( NULL,   // No module name (use command line)
        argv[1],        // Command line
        NULL,           // Process handle not inheritable
        NULL,           // Thread handle not inheritable
        FALSE,          // Set handle inheritance to FALSE
        0,              // No creation flags
        NULL,           // Use parent's environment block
        NULL,           // Use parent's starting directory 
        &si,            // Pointer to STARTUPINFO structure
        &pi )           // Pointer to PROCESS_INFORMATION structure
    ) 
    {
        printf( "CreateProcess failed (%d).\n", GetLastError() );
        return;
    }

    // Wait until child process exits.
    WaitForSingleObject( pi.hProcess, INFINITE );

    // Close process and thread handles. 
    CloseHandle( pi.hProcess );
    CloseHandle( pi.hThread );
} 
```

这是通过 dos 访问的，并且在命令提示符下使用此命令可以完美运行。当我输入这个

this.exe "my.exe 测试" > result.txt

my.exe 是另一个接受输入测试的控制台应用程序，> result.txt 用于我的输出日志。我试图消除对命令行的需求，因此我试图将路径输入到 createprocess 函数调用中。这就是我卡在这里的地方是我正在尝试的

```
if( !CreateProcess( NULL,   // No module name (use command line)
        "\"my.exe test \" > result.txt",        // this.exe "my.exe test" > result.txt
        NULL,           // Process handle not inheritable
        NULL,           // Thread handle not inheritable 
```

仍然不起作用我认为 \" 会给我我需要的结果，但它似乎不起作用，将解析 my.exe 和测试部分，但不解析 > result.txt 输出。但是，如果我通过，它可以在命令提示符下正常工作它到 argv[1]。

非常感谢任何帮助。

所以总而言之

在控制台中我可以解析

```
this.exe "my.exe test" > result.txt // Works fine via cmd.exe 
```

我试过的应用程序

```
my.exe test > result.txt // Not work but missing "" 
```

和

```
\"my.exe test \" > result.txt // work for first section 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T21:57:26.577

`CreateProcess`只需要一个可执行文件名和一些参数。重定向实际上不是程序参数。这由 shell ( `cmd.exe`) 解释。

当您调用自己的程序时发生的情况如下...

```
cmd> this.exe "my.exe test" > result.txt

argv[0] = "this.exe"
argv[1] = "my.exe test"
Output is sent to result.txt by the shell 
```

现在，你的那个不起作用：

```
cmd> this.exe my.exe test > result.txt

argv[0] = "this.exe"
argv[1] = "my.exe"
argv[2] = "test"
Output is sent to result.txt by the shell 
```

您会看到，因为您只发送`argv[1]`到`CreateProcess`，所以行为与您预期的不同。

现在，正如我所提到的，`CreateProcess`实际上并没有重定向输出。为此，您应该使用`system`调用`cmd.exe`或系统使用的任何命令解释器的调用：

```
system( "my.exe test > result.txt" ); 
```

请参阅：http: [//msdn.microsoft.com/en-us/library/277bwbdz (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/277bwbdz(v=vs.80).aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T21:54:32.810

`CreateProcess`仅通过将单词分解为单个参数来进行基本的命令行解析——它不理解文件重定向或任何东西。如果您传递它`"> result.txt"`，它会尝试将其解析为字面上命名为`">"`和的两个参数`"result.txt"`。

如果要重定向命令的输出，有两种选择：

1.  自己做重定向。为此，您首先使用`CreateFile`（传入使句柄可继承的安全属性）打开文件，然后将生成的句柄分配给您传入`hStdOut`的结构的成员。然后，请记住在返回`STARTUPINFO`后关闭文件，`CreateProcess`因为否则你会泄漏一个句柄。
2.  使用另一个程序进行重定向。当您在命令行上输入命令时，它`cmd.exe`会解析您的命令行并进行文件重定向。因此`my.exe`，您可以`cmd.exe`使用命令行创建一个进程，而不是创建一个进程，如下所示：

    ```
    cmd.exe "my.exe test > result.txt" 
    ```

# objective-c - 在objective-C中拦截按钮的事件到PDF

> ID：13058274
> 
> 赞同：1
> 
> 时间：2012-10-24T21:45:43.153
> 
> 标签：objective-c, ios, events, pdf, adobe-indesign

我的 iOs 应用程序中有一个阅读器 PDF。

我想在 pdf 中创建一个按钮。当我点击这个按钮时，我想用 Objective-c 拦截事件。

我应该使用什么类型的按钮（在 Indesign 中）？我怎样才能拦截事件？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T08:48:31.133

没有直接的方法可以做到这一点，您在 InDesign 中使用什么按钮也没有关系。
在视图中呈现页面后，您必须在页面上找到按钮小部件，它们作为小部件注释位于页面的 Annots 集合中。将小部件的位置（小部件字典中的矩形条目）从 PDF 坐标转换为视图坐标。当用户点击屏幕时，测试点击位置是否与您的按钮位置之一匹配。

# java - 泛型的 Java 编译器错误

> ID：13058276
> 
> 赞同：0
> 
> 时间：2012-10-24T21:45:48.697
> 
> 标签：java, eclipse, generics

我收到此代码的编译器错误：

```
Map<String, String[]> myMap;

void set(Map<String, Object> foo) { }

set(myMap); // generates error

Error: "The method set(Map<String,Object>) in the type XXX is not applicable for the arguments (Map<String,String[]>)" 
```

这对我来说毫无意义，因为 String[] 实际上是一个 Object，并且与 set() 中的参数完全兼容。

在我从 JDK 1.6 升级到 1.7 之前，这个错误没有出现在我的代码中。我在 Eclipse 中没有看到将其关闭的开关。如何让这段代码编译？

编辑：

如果我使用中间变量，它会编译，并删除泛型：

```
Map anotherMap = myMap;
set(anotherMap); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T21:47:23.153

泛型继承不同于我们对OO继承的常规理解。请阅读本[教程](http://docs.oracle.com/javase/tutorial/java/generics/inheritance.html)。

要编译您的代码，您可能需要更改方法语法，如下所示：

```
void set(Map<String, ?> foo) { } 
```

编辑：正如 dasblinkenlight 评论的那样，如果您有任何计划在 set 方法中对 Map 进行修改，除非您定义了具体类型，否则它将不起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T21:51:29.080

虽然`String[]`实际上是 a `Object`，但这与说`Map<String,String[]>`实际上是 a不同`Map<String,Object>`：泛型的*协方差*不存在。

更改声明

```
void set(Map<String,Object> foo) { } 
```

与通配符为一

```
void set(Map<String,?> foo) { } 
```

将使您的代码编译，并尝试从`foo`地图中获取内容：

```
Object blah = foo.get("key"); 
```

但是，尝试向地图添加内容会失败：

~~对象 blah = foo.put("key");~~

由于将事物放入地图似乎是您的方法的目标（毕竟，您调用它一定是有原因的`set`）如果不指定确切的类型，您将无法使其工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T21:51:12.467

在泛型中使用类型参数时，继承的工作方式不同。

这是一个过度简化的一般经验法则：

*`<>`在声明和初始化泛型对象时，s 中的内容必须完全匹配。*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T21:52:32.450

也许，Eclipse 确实编译了您的代码，因为它的编译器错误。

您需要更改 to 的签名`set`才能`set(Map<String, ?>)`使其编译。

它在第二种情况下编译并带有警告，不是吗？这是因为您使用原始 Map（没有泛型）来规避类型安全检查。

# c++ - 带有向量的 C++ 2d unordered_map

> ID：13058278
> 
> 赞同：1
> 
> 时间：2012-10-24T21:46:07.617
> 
> 标签：c++, vector, 2d, unordered-map

我来自我会做的PHP

```
$um['Im a string'][1] = 3; 
```

对于 2d 关联数组，其中第一个键是字符串，第二个键是整数，值也是整数。我尝试在 C++ 中做同样的事情。这是我的尝试：

```
// experiment.cpp : Defines the entry point for the console application.
//

#include "stdafx.h"
#include <unordered_map>
#include <vector>
#include <string>

using std::vector;
using std::string;
using std::unordered_map;

int _tmain(int argc, _TCHAR* argv[])
{

    unordered_map <string,vector<int,int>> um;

    um["Im a string"][1] = 3;
    printf("Out: %d", um["Im a string"][1]);
    return 0;
} 
```

显然它的语法不正确；

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T21:49:06.417

`vector<int,int>`不正确（`vector`不是关联容器），您可能需要一个嵌套的`unordered_map<int>`. 所以：

```
unordered_map <string,unordered_map<int,int>> um; 
```

# ruby-on-rails - 在按 created_at 排序的 blog.articles 数组中的正确位置插入转发的文章

> ID：13058279
> 
> 赞同：0
> 
> 时间：2012-10-24T21:46:13.033
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, sorting, virtual-attribute

编辑：实际上我只是决定反对我的转发方式，而是决定通过复制并从文章中创建一个全新的记录来实现它，然后添加一个 reblogged: true 列。在我看来，逻辑上有点清晰，它避免了下面列出的所有问题。

* * *

在一个博客应用程序中，我实现了通过一个带有两个外键的加入转发模型来转发别人博客文章的可能性。

然后在我的博客展示操作中，我将带有 blog.reblogged_articles 的 blog.articles 添加到单个文章数组中。然后我按每个元素的 created_at 属性对该数组进行排序。

但是，对于转发的文章，我更愿意使用他们转发连接模型的 created_at 属性，以便转发的文章最初会出现在博客的顶部。转发的文章应始终在博客中获得其位置，就好像它是由博客所有者创建的一样。但目前，如果文章是在 3 年前创建的，则博客底部可能会出现重新博客的文章。

在将两个数组放在一起之前，我可能需要修改我的 reblogged_articles 数组的 created_at 属性。但是我该怎么做呢？

编辑：只是一个澄清的例子：

博客 id 1：
文章 id 1，created_at：一年前。
文章 id 2，created_at：一个月前。
文章 ID 3，created_at：一周前。
文章 id 4，created_at：一天前。

博客 id 2：
文章 id 5，created_at：一天前。
文章 id 6，created_at：一小时前。
文章 id 7，created_at：30 分钟前。
文章 id 8，created_at：大约 10 分钟前。

现在，博客 2 转发博客 1 的文章 1。我希望这篇文章显示在博客 2 的顶部，就好像它是刚刚创建的一样。但是，由于该文章实际上是在一年前创建的，它将显示在博客 2 的底部。我该如何解决这个问题？

根据连接模型 Reblog 的 created_at 而不是文章本身的 created_at 将重新记录的文章置于“正确”位置的最聪明的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T22:45:26.267

最简单的解决方案可能只是在您的文章模型中添加一个 last_activity_date 列。每当一篇文章被转发时，更新相应文章的 last_activity_date。然后，当你收到文章时，`Article.order(:last_activity_date => 'DESC')`

编辑：根据您的说明-

```
# Merge arrays of article objects
all_articles = current_blog_articles | reblogged_articles 
all_articles.sort_by! {|x| -x.created_at } # Sort by created_at descending 
```

# python - 删除所有标签

> ID：13058284
> 
> 赞同：2
> 
> 时间：2012-10-24T21:46:35.937
> 
> 标签：python, python-2.7, beautifulsoup

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T21:51:24.340

你可以用漂白剂做到这一点

[PyPi - 漂白剂](http://pypi.python.org/pypi/bleach)

```
>>> import bleach

>>> bleach.clean('an <script>evil()</script> example')
u'an &lt;script&gt;evil()&lt;/script&gt; example'

>>> bleach.linkify('an http://example.com url')
u'an <a href="http://example.com" rel="nofollow">http://example.com</a> url

>>> bleach.delinkify('a <a href="http://ex.mp">link</a>')
u'a link' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T21:57:16.853

```
soup = BeautifulSoup(page)
anchors = soup.findAll('a')
for anchor in anchors:
  anchor.replaceWithChildren() 
```

# opengl - “灯笼效应”或仅显示场景的一部分

> ID：13058285
> 
> 赞同：-1
> 
> 时间：2012-10-24T21:46:45.073
> 
> 标签：opengl, light, operation, polygons

我试图只显示背景图像的一部分（未来的游戏场景）。基本的工作方式是，例如，首先我画一个背景图像，然后我需要用一些黑暗或暗色“隐藏”/覆盖图像（没有光，不知道必须选择什么选项）并使用鼠标单击以使用圆形或三角形（我的选项）仅显示图像背景的一部分，圆形/三角形以鼠标位置为中心。我称之为“灯笼效应”。

**第一个选项**：使用 alpha 通道，创建一个覆盖所有窗口大小的正方形，然后尝试在图像上的 alpha 正方形上减去圆形区域。

**第二个选项**：再次播放覆盖所有图像背景的黑色方块并尝试减去圆形/三角形。尝试使用 glLogicOp 但此方法仅播放混合颜色。不知道如何使用 OpenGL 对 2D 多边形进行操作。

...

任何其他想法或简单的例子来学习如何做类似的事情。

图片示例： ![灯笼效果](../Images/41248e0a6b665f8a537cdd16b9f685fa.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:57:04.610

这实际上很容易实现：

1.  在 Alpha 通道中使用您的灯笼光形状创建黑色纹理。（纹理可以是动画的）
2.  渲染背景。
3.  以游戏中鼠标光标为中心渲染灯笼纹理。
4.  在灯笼纹理周围渲染黑色填充以隐藏周围的所有内容，直到屏幕边缘。

无需使用任何特殊的混合模式，只需叠加即可。

# sql - SELECT 语句 SQL Server（全文）类似于“CONTAINS(column, 'term1 or term 2 or term3') AND NOT (anything else)”

> ID：13058286
> 
> 赞同：1
> 
> 时间：2012-10-24T21:46:46.150
> 
> 标签：sql, full-text-search, contains

我在以下情况下进行了全文搜索：

我想查找包含我指定的术语的行，仅此而已。

我的专栏看起来像：

```
 Col1
        apples oranges grapes
        apples oranges
        apples strawberries
        apples strawberries peaches
        apples 
```

但我只想搜索包含苹果和/或草莓的行，没有别的

我的结果将如下所示：

```
1| apples strawberries
2| apples 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T16:29:49.713

我不太确定你的 table1Col1 在这里发挥作用，所以下面可能不足以完全解决你的问题，但它应该让你开始：

首先你需要一个[split 函数](https://stackoverflow.com/questions/697519/split-function-equivalent-in-tsql)，例如：

```
CREATE FUNCTION dbo.Split (@Input NVARCHAR(MAX), @Delimiter NVARCHAR(1))
RETURNS @T TABLE (OutputValue NVARCHAR(MAX))
AS
BEGIN

    WITH CTE AS
    (   SELECT  [OutputValue] = SUBSTRING(@Input, 1, CHARINDEX(@Delimiter, @Input)), 
                [InputValue] = SUBSTRING(@Input, CHARINDEX(@Delimiter, @Input) + 1, LEN(@Input)) + ' '
        UNION ALL 
        SELECT  [OutputValue] = SUBSTRING([InputValue], 1, CHARINDEX(@Delimiter, [InputValue])), 
                [InputValue] = SUBSTRING([InputValue], CHARINDEX(@Delimiter, [InputValue]) + 1, LEN([InputValue]))
        FROM    CTE
        WHERE   LEN([InputValue]) > 0
    )
    INSERT @T
    SELECT  DISTINCT OutputValue
    FROM    CTE

    RETURN;
END 
```

然后你可以使用这样的东西：

```
DECLARE @T TABLE (Col1 NVARCHAR(MAX));
INSERT @T VALUES ('apples oranges grapes'), ('apples oranges'), ('apples strawberries');

DECLARE @StringToCheck NVARCHAR(MAX) = 'apples oranges bananas grapes'

SELECT  Col1
FROM    @T
        CROSS APPLY dbo.Split(Col1, ' ') spl
        LEFT JOIN dbo.Split(@StringToCheck, ' ') chk
            ON chk.OutputValue = spl.OutputValue
GROUP BY Col1
HAVING COUNT(spl.OutputValue) = COUNT(chk.OutputValue) 
```

或者如果您需要专门排除项目

```
DECLARE @T TABLE (Col1 NVARCHAR(MAX));
INSERT @T VALUES ('apples oranges grapes'), ('apples oranges'), ('apples strawberries');

DECLARE @StringToCheck NVARCHAR(MAX) = 'apples oranges bananas grapes',
        @StringToExlude NVARCHAR(MAX) = 'strawberries grapes'

SELECT  Col1
FROM    @T
        CROSS APPLY dbo.Split(Col1, ' ') spl
        LEFT JOIN dbo.Split(@StringToCheck, ' ') chk
            ON chk.OutputValue = spl.OutputValue
        LEFT JOIN dbo.Split(@StringToExlude, ' ') exc
            ON exc.OutputValue = spl.OutputValue
GROUP BY Col1
HAVING  COUNT(spl.OutputValue) = COUNT(chk.OutputValue)
AND     COUNT(exc.OutputValue) = 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T20:56:49.900

在玩了很多之后自己弄清楚了：（还编辑了问题以揭示我遇到的真正问题）：

```
 SELECT * FROM Table WHERE CONTAINS(Col1, 'apples or strawberries')
                           AND (Col1 NOT LIKE '%[^ apples or strawberries ]%'); 
```

# python - 了解 Python 函数

> ID：13058290
> 
> 赞同：-1
> 
> 时间：2012-10-24T21:46:51.503
> 
> 标签：python

我正在学习 Python，想看看是否有人可以帮助分解并逐步了解此函数的作用？

```
def label(self, index, *args): 
    """ 
    Label each axes one at a time 
    args are of the form <label 1>,...,<label n> 
    APIPARAM: chxl 
    """ 
    self.data['labels'].append( 
    str('%s:|%s'%(index, '|'.join(map(str,args)) )).replace('None','') 
    ) 
    return self.parent 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T21:55:48.917

在尝试了解它的作用之前更改格式是个好主意：

```
def label(self, index, *args): 
    """ 
    Label each axes one at a time 
    args are of the form <label 1>,...,<label n> 
    APIPARAM: chxl 
    """ 
    self.data['labels'].append( 
        str( '%s:|%s' % \ 
            ( index, '|'.join( map( str,args ) ) ) 
        ).replace( 'None', '' ) 
    ) 
    return self.parent 
```

所以：

它在列表中附加了一些东西`self.data[ 'labels' ]`。我们知道这是因为`append()`它是[list object](http://docs.python.org/tutorial/datastructures.html#more-on-lists)的一种方法。

这是一个字符串，例如：

*   字符串的形式是`xxx:|yyy`
*   `xxx`替换为参数的值`index`
*   `yyy`被转换为字符串 () 的所有其他参数替换`map(str,args)`并与`|`字符 ( `join(...)`) 连接，因此导致类似 ' `a|b|None|c`'
*   上面字符串中的每次出现都`None`被替换为空字符串，并将其附加到列表中

**编辑：**

正如@abarnert 指出的那样，解释一下它`*args`的含义以及为什么稍后将其用作可能会很好`args`，所以就在这里。

`*args`（这是一个星号 + 一个任意名称）表示“列表中进一步可用的任意数量的匿名参数`args`”。也可以使用`**kwargs`- 注意两个星号，用于接受关键字参数，即以`foo = bar`where`foo`是参数的名称并且`bar`是它的值而不仅仅是. 的形式传递给函数的`bar`。

如上所述`args`and`kwargs`是任意的，也可以使用`*potatoes`or`**potatoes`但使用`args`and`kwargs`是 Python 中的一种约定（有时人们也使用`**kw`而不是`**kwargs`，但含义是相同的——分别为任意数量的匿名参数和任意数量的关键字参数）。

如果事先不知道函数/方法应接受的参数数量，则使用两者 - 例如，考虑一个处理派对客人姓名的函数，人们可能不知道可能有多少，因此定义以下函数使得感觉：

```
def add_party_quests( *quests ):
    for guest in quests:
        do_some_processing( guest ) 
```

那么下面的两个调用都是有效的：

```
add_party_guests( 'John' )
add_party_guests( 'Beth', 'Tim', 'Fred' ) 
```

这也在此 SO 帖子中进行了解释：[https ://stackoverflow.com/a/287101/680238](https://stackoverflow.com/a/287101/680238)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T21:56:17.613

我认为误导性的行是：

```
self.data['labels'].append( 
str('%s:|%s'%(index, '|'.join(map(str,args)) )).replace('None','') 
) 
```

这些可以更清晰地格式化以帮助阅读：

```
self.data['labels'].append( 
    str('%s:|%s' % (
        index,
        '|'.join(map(str, args))
    )).replace('None', '') 
) 
```

但可以更好地重写为：

```
self.data['labels'].append(  # append to the list at `self.data['labels']`
    '%s:|%s' % (             # a string of the format X:|Y
        index,               # where X is the index
        '|'.join(            # and Y is a list joined with '|'s
            str(arg) if arg is not None else  # with each item in the list
            '' for arg in args                # being it's string representation
        )
    )
) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T21:54:43.437

`*args`变成一个名为 args 的参数列表。 `self.data['labels']`看起来是一个列表。.append 将一个项目添加到列表中。附加的项目由最右边返回的字符串返回，`replace`。要解析是什么字符串，请从括号内开始并找出解决方法。 `map(str,args)`将所有参数转换为字符串并返回该列表。 `'|'.join(`获取 map 的输出并将其连接成一般模式的单个字符串，`elem1|elem2|elem3...`然后使用格式 string `'%s:|%s'`。第一个`%s`被 index 的值替换，第二个被输出的字符串替换`'|'.join`。然后它在这个字符串上调用 replace ，替换所有出现的`'None'`with `''`。然后它返回 self.parent。

# heroku - “在应用推送上，做”

> ID：13058292
> 
> 赞同：0
> 
> 时间：2012-10-24T21:46:55.637
> 
> 标签：heroku

是否有任何实时 API 功能可以让我知道应用程序何时被推送和完成？我在文档中没有看到任何内容。本质上，我想编写一个可以接收推送事件的插件，而不是对它们做一些事情（触发硒测试等）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T21:51:23.657

您可以使用[部署挂钩](https://devcenter.heroku.com/articles/deploy-hooks)。[HTTP POST 钩子](https://devcenter.heroku.com/articles/deploy-hooks#http-post-hook)是最通用的钩子。

# c# - 写入和检索文本文件时保持换行符

> ID：13058294
> 
> 赞同：0
> 
> 时间：2012-10-24T21:47:10.817
> 
> 标签：c#, asp.net

**我有一个应用程序，用户可以在其中写文章，它们将显示在网页上。我不想将所有文本存储在数据库中，而是将其写入文本文件并以这种方式存储。问题是，我似乎无法让文件保存格式，即换行符。如果用户键入**

Lorem ipsum dolor sit amet, consectetur adipiscing elit。Sed eget ligula eget quam consectetur ornare。整数 sed sapien risus, ac tincidunt lectus。Quisque ultrices mi tortor。Fusce luctus magna non dolor facilisis imperdiet。Praesent tempus gravida dolor, sat amet viverra ligula vehicula sat amet。

Donec congue sodales orci，在 sodales nunc infantum quis 中。Proin feugiat feugiat ultrices。Mauris iaculis libero non nibh sagittis infantum。Etiam odio sapien，

pulvinar sed viverra nec, euismod eu massa。Sed pulvinar diam a velit rhoncus non iaculis mi facilisis。

**然后保存，保存为**

Lorem ipsum dolor sit amet, consectetur adipiscing elit。Sed eget ligula eget quam consectetur ornare。整数 sed sapien risus, ac tincidunt lectus。Quisque ultrices mi tortor。Fusce luctus magna non dolor facilisis imperdiet。Praesent tempus gravida dolor, sat amet viverra ligula vehicula sat amet。Donec congue sodales orci，在 sodales nunc infantum quis 中。Proin feugiat feugiat ultrices。Mauris iaculis libero non nibh sagittis infantum.Etiam odio sapien, pulvinar sed viverra nec, euismod eu massa。Sed pulvinar diam a velit rhoncus non iaculis mi facilisis。

**有没有办法保持格式？**

当前代码是

```
var fileContents = System.IO.File.ReadAllText(Server.MapPath(@"~/Articles/" + articlePost.atclFile + ".txt"));
articleTextbox.Text = fileContents.Replace(System.Environment.NewLine, "<br/>"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T21:50:02.300

您需要用 HTML 换行符替换文本换行符：

```
var newText = oldText.Replace(System.Environment.NewLine, "<br/>"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T22:01:07.497

关于什么

```
articleTextbox.Text = fileContents.Replace("\r\n", "<br/>"); 
```

或者

```
articleTextbox.Text = fileContents.Replace("\n", "<br/>"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T21:54:25.197

老好人怎么样

```
 <pre> ... </pre> 
```

# java - 将输入的长度限制为 x 位数

> ID：13058300
> 
> 赞同：0
> 
> 时间：2012-10-24T21:47:34.450
> 
> 标签：java, string, input, int, variable-length

我正在运行我创建的存储用户输入的数据的 java 程序。特别是 4 个数组列表，分别是 songName、songArtist、songYear 和 songAlbum。我有一个“songYear”的用户输入，我只希望程序最多接受 4 位长度并给出错误，否则如何实现？ ![这是一个屏幕截图](../Images/3dc42e683c2d9358a6fde22972377a7c.png)

这是我的添加条目方法的代码：

```
 public void addEntry(){
        String newName = ui.getString("Enter the name of the track");
        songName.add(newName);
        String newArtist = ui.getString("Who performs this track");
        songArtist.add(newArtist);
        String newAlbum = ui.getString("What album is this track from");
        songAlbum.add(newAlbum);
        System.out.print("What year was the track released? ");
        int newYear=input.nextInt(4);
        songYear.add(newYear);

        System.out.println("\n" + "Thank you, " +songName.get(songName.size()-1) + " has been added to the library.");
        System.out.println("\n" + "Press 2 to view your library." + "\n");
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T21:52:22.437

您可以使用正则表达式，例如：`^.{4}$`

仅表示用户输入 4 位数字 - 返回 true，否则返回 false

为确保用户使用 4 个数字，请`YYYY`使用以下内容：

```
^(?=[1-9]+)\d{4}$ 
```

确保年份是 1 或 2，后跟三个数字；在这种情况下，有效范围为 1000-2999

```
^(?=[1-2][0-9]+)\d{4}$ 
```

最后你的代码应该是这样的：

```
 if(inputUserStr.matches("^(?=[1-2][0-9]+)\d{4}$")){
   // do some stuff
 }
  else{
   // print error about valid input form [YYYY]
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T21:50:54.447

Depends entirely on the language but some approaches are:

*   check the string input using a `len` function; or
*   convert it to an integer and ensure it's less than 10,000; or
*   a regular expression like `^\d{1,4}`.

No doubt there'll be other validation checks such as ensuring string input is all-numeric, and you're not trying to input a song that was written twenty years in the future, but they're added checks you should consider.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T22:03:10.503

1) 接受用户的输入并使用子字符串方法，只保存前四个字符（指定给用户考虑前四个字符）。

2）如果不是4个字符，您可以要求用户重新输入该值：

```
Scanner sc = new Scanner(System.in);

String a = sc.next();
        if (a.matches("...."))
        {
             System.out.print(a);
        }
            else 
        {
             System.out.print("Input again:" );   
             a = sc.next();
        } 
```

我已经为 4 个字符编写了一个示例正则表达式。但你总是可以改变它。

# php - PDO 类不工作 - 调用成员函数准备

> ID：13058301
> 
> 赞同：1
> 
> 时间：2012-10-24T21:47:44.210
> 
> 标签：php, pdo

我对我的 PDO 课程有疑问。它不起作用并创建此错误：“注意：未定义的变量：第 21 行的 classes.php 中的 db 致命错误：在第 32 行的 classes.php 中对非对象调用成员函数 prepare()。我试图修复这段代码运行了几个小时，但我没有找到错误。您的帮助将不胜感激！

先感谢您。

```
<?
// classes.php

class Connection{

    public static $db;

    function __construct() 
    {
        try {
            $this->$db = new PDO('mysql:host=localhost;dbname=vnm', '--', '--', array(PDO::ATTR_PERSISTENT => true));
            $this->$db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
        } catch (PDOException $e) {
            echo 'Connection failed: ' . $e->getMessage();
        }   
    }

    public function GetAccess()
    {
        return $db;
    }

}

class Page
{
    public function show_page($s_p1)
    {
         $db = Connection::GetAccess();
         $id = "1";
         $stmt = $db->prepare('SELECT * FROM users WHERE id = :id');
         $stmt->execute();
         while($row = $stmt->fetch())
         {
             print_r($row);
         }
    }
}?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T21:52:45.590

静态成员必须使用`static::`. 您直接`$db`在您的代码中访问，并`$this->db`在您应该使用`static::$db`. 您还需要声明`GetAccess`为`public static function`.

此外，调用`Connection::GetAccess`实际上并不实例化该类，因此`static::$db`可能为空，除非您在其他地方创建单例实例。

您可以在此处阅读有关单例的更多信息：[http ://www.talkphp.com/advanced-php-programming/1304-how-use-singleton-design-pattern.html](http://www.talkphp.com/advanced-php-programming/1304-how-use-singleton-design-pattern.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T09:49:44.953

尝试这个。我删除了所有静态方法。

```
 <?
// classes.php

class Connection{

    public $db;

    function __construct() 
    {
        try {
            $this->$db = new PDO('mysql:host=localhost;dbname=vnm', '--', '--', array(PDO::ATTR_PERSISTENT => true));
            $this->$db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
        } catch (PDOException $e) {
            echo 'Connection failed: ' . $e->getMessage();
        }   
    }

    public function GetAccess()
    {
        return $this->$db;
    }

}

class Page
{
    public function show_page($s_p1)
    {
         $con = new Connection();
         $db = $con->GetAccess();
         $id = "1";
         $stmt = $db->prepare('SELECT * FROM users WHERE id = :id');
         $stmt->execute();
         while($row = $stmt->fetch())
         {
             print_r($row);
         }
    }
}?> 
```

# powershell - 在 switch 语句中更改评估器

> ID：13058310
> 
> 赞同：2
> 
> 时间：2012-10-24T21:48:55.727
> 
> 标签：powershell, switch-statement

有没有办法在“开关”中修改您正在评估的变量，并让它改变匹配？

```
$var = "a"
switch ($var){

    "a" {Write-Host "1st match for 'a'"}
    "b" {Write-Host "1st match for 'b'"}
    "a" {Write-Host "2nd match for 'a'"; $var = "b" ; continue}
    "b" {Write-Host "2st match for 'b'"}
} 
```

我希望能够使上述内容匹配：

'a' 的第一次匹配 'a
' 的
第二次匹配 'b'的第二次匹配

```
$Destination = "vmstores:\vcsa@443\Training\Local-B\David" #is a param of my function, which could be a bunch of different types of object.

$DestinationType = $Destination.GetType().Name

    switch ($DestinationType){
        "String" {
            if ((Test-Path $Destination) -eq $true){
                if ((Get-Item $Destination).GetType().Name -eq "DatastoreFolderImpl"){
                    $DestinationType = "DatastoreFolderImpl"
                    if ((Test-Path $Destination.Insert($Destination.Length,"\").Insert(($Destination.Length)+1,$SourceVMXShort)) -eq $true){
                    Write-Warning "Destination File exists..."
                    $DestinationExists = $true
                    }
                }
                elseif ((Get-Item $Destination).GetType().Name -eq "DatastoreFileImpl"){
                    $DestinationType = "DatastoreFileImpl"
                    Write-Warning "Destination File exists..."
                    $DestinationExists = $true
                }
            }
             ; continue
        }
        "DirectoryInfo" {
            if ((Test-Path $Destination.Insert($Destination.Length,"\").Insert(($Destination.Length)+1,$SourceVMXShort)) -eq $true){
                Write-Warning "Destination File exists..."
                $DestinationExists = $true
            }
            ; break
        }
        "FileInfo" {
            if ((Test-Path $Destination) -eq $true){
                Write-Warning "Destination File exists..."
                $DestinationExists = $true
            }
            ; break
        }
        "DatastoreFileImpl" {
            if ((Test-Path $Destination) -eq $true){
                Write-Warning "Destination File exists..."
                $DestinationExists = $true
            }
            ; break
        }
        "DatastoreFolderImpl" {
            if ((Test-Path $Destination.Insert($Destination.Length,"\").Insert(($Destination.Length)+1,$SourceVMXShort)) -eq $true){
                Write-Warning "Destination File exists..."
                $DestinationExists = $true
            }
            ; break
        }
        "NasDatastoreImpl" {
            New-PSDrive -Name "DestMount" -Root \ -PSProvider VimDatastore -Datastore $Destination | Out-Null
            if ((Test-Path ("DestMount:").insert(10,"\").Insert(11,$SourceVMXShort)) -eq $true){
                Write-Warning "Destination File exists..."
                $DestinationExists = $true
            }
            $Destination = ("DestMount:").insert(10,"\")
            ; break
        }
        "VMFSDatastoreImpl" {
            New-PSDrive -Name "DestMount" -Root \ -PSProvider VimDatastore -Datastore $Destination | Out-Null
            if ((Test-Path ("DestMount:").insert(10,"\").Insert(11,$SourceVMXShort)) -eq $true){
                Write-Warning "Destination File exists..."
                $DestinationExists = $true
            }
            $Destination = ("DestMount:").insert(10,"\")
            ; break
        }

    } 
```

如您所见，如果我可以更新 $DestinationType 会更优雅，这样我就可以在其他 switch 块中重新使用该语句，而不是额外的“ifs”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T22:05:01.223

虽然我认为您不能更改`switch`statements 变量 mid check，但您可以执行嵌套`switch`语句。此代码提供您请求的输出：

```
$var = "a"
switch ($var){
    "a" {Write-Host "1st match for 'a'"}
    "b" {Write-Host "1st match for 'b'"}
    "a" {Write-Host "2nd match for 'a'"
            $var = "b" 
            switch ($var) {
                "b" {Write-Host "2st match for 'b'"}
            } #End sub-switch
        } #End "A" check
} #End Primary switch 
```

现在，我不确定您的总体目标是什么，可能有更好的方法来使用函数等来做到这一点。

更新问题和评论后编辑：

通过查看更新的代码，您可以提取设置`$DestinationExists = $true`. 您也许可以重新组织您的`if`陈述，使它们只出现一次。不幸的是，没有办法让 switch 语句更改变量 mid-switch。根据您的评论，也许您可​​以添加一个额外的参数来指定类型，因此您可以使用一个基于类型的大型 switch 语句。像这样的东西：

```
switch ($DataType) {
    "String" {<#Things to do if string#>}
    "OtherTypes" {<#Continue like this#>}
}#End Switch ($DataType) 
```

不过我认为，我会开始使用参数集。[这是一个描述参数集](http://blogs.msdn.com/b/powershell/archive/2008/12/23/powershell-v2-parametersets.aspx)的博客

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-06T23:42:40.483

这是一种有点复杂的方法。请注意，示例代码与 OP 中的代码相似但不同。

```
add-type @"

using System;
using System.Collections;
using System.Collections.ObjectModel;
using System.Management.Automation;

public class PSVarEnumeration : IEnumerable
{
    private ScriptBlock _getterScript;

    public PSVarEnumeration(ScriptBlock getterScript)
    {
        _getterScript = getterScript;
    }

    IEnumerator IEnumerable.GetEnumerator()
    {
       return (IEnumerator) GetEnumerator();
    }

    public PSVarEnumerator GetEnumerator()
    {
        return new PSVarEnumerator(_getterScript);
    }
}

public class PSVarEnumerator : IEnumerator
{
    private ScriptBlock _getterScript;
    bool areDone = false;

    // position isn't used for anything
    int position = -1;

    public PSVarEnumerator(ScriptBlock getterScript)
    {
        _getterScript = getterScript;
    }

    public bool MoveNext()
    {
        if (!areDone) {
          if (Current != null) {
            position++;
            return true;
          } else {
            areDone = true;
            return false;
          }
        } else {
          return false;
        }
    }

    public void Reset()
    {
        position = -1;
        areDone = false;
    }

    object IEnumerator.Current
    {
        get
        {
            return Current;
        }
    }

    public Object Current
    {
        get
        {
            Collection<PSObject> results = _getterScript.Invoke();
            return results[0];
        }
    }
}

"@

$mySwitcher ="a"
$mySwitcherScript = {$mySwitcher}
$var = new PSVarEnumeration ( $mySwitcherScript)

switch ($var){

    "a" {Write-Host "1st match for 'a'"}
    "b" {Write-Host "1st match for 'b'"}
    "a" {Write-Host "2nd match for 'a'"; $mySwitcher = "b" ; continue}
    "b" {Write-Host "2nd match for 'b'"; $mySwitcher = $null}
}

<#
Output I get is:

1st match for 'a'
2nd match for 'a'
1st match for 'b'
2nd match for 'b'

#> 
```

# c++ - 如何优化简单高斯滤波器的性能？

> ID：13058315
> 
> 赞同：1
> 
> 时间：2012-10-24T21:49:08.303
> 
> 标签：c++, c, performance, optimization

我正在尝试编写一个需要为多个全分辨率图像计算高斯和拉普拉斯金字塔的 android 应用程序，我用 NDK 在 C++ 上编写了它，代码的最关键部分是将高斯滤波器应用于图像 abd 我正在应用这个滤波器与水平和垂直。

过滤器是 (0.0625, 0.25, 0.375, 0.25, 0.0625) 因为我正在处理整数，所以我正在计算 (1, 4, 6, 4, 1)/16

```
dst[index] = ( src[index-2] + src[index-1]*4 + src[index]*6+src[index+1]*4+src[index+2])/16; 
```

我做了一些简单的优化，但是它的运行速度仍然比预期的慢，我想知道是否还有其他优化选项我遗漏了。

PS：我应该提一下，我曾尝试使用内联臂组件编写此过滤器部件，但是它的结果会慢 2 倍。

```
//horizontal  filter
for(unsigned y = 0; y < height;  y++) {
    for(unsigned x = 2; x < width-2;  x++) {
        int index = y*width+x;
            dst[index].r = (src[index-2].r+ src[index+2].r + (src[index-1].r + src[index+1].r)*4 + src[index].r*6)>>4;
            dst[index].g = (src[index-2].g+ src[index+2].g + (src[index-1].g + src[index+1].g)*4 + src[index].g*6)>>4;
            dst[index].b = (src[index-2].b+ src[index+2].b + (src[index-1].b + src[index+1].b)*4 + src[index].b*6)>>4;                
     }
}
//vertical filter
for(unsigned y = 2;  y < height-2;  y++) {
    for(unsigned x = 0;  x < width;  x++) {
        int index = y*width+x;
            dst[index].r = (src[index-2*width].r + src[index+2*width].r  + (src[index-width].r + src[index+width].r)*4 + src[index].r*6)>>4;
            dst[index].g = (src[index-2*width].g + src[index+2*width].g  + (src[index-width].g + src[index+width].g)*4 + src[index].g*6)>>4;
            dst[index].b = (src[index-2*width].b + src[index+2*width].b  + (src[index-width].b + src[index+width].b)*4 + src[index].b*6)>>4;
     }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T22:38:22.770

`index`乘法可以排除在内循环之外，因为乘法仅在更改时发生`y`：

```
for (unsigned y ...
{
    int index = y * width;
    for (unsigned int x... 
```

您可以通过在使用变量之前加载它们来获得一些速度。这将使处理器将它们加载到缓存中：

```
for (unsigned x = ...  
{  
    register YOUR_DATA_TYPE a, b, c, d, e;
    a = src[index - 2].r;
    b = src[index - 1].r;
    c = src[index + 0].r; // The " + 0" is to show a pattern.
    d = src[index + 1].r;
    e = src[index + 2].r;
    dest[index].r = (a + e + (b + d) * 4 + c * 6) >> 4;
    // ... 
```

另一个技巧是“缓存” src 的值，以便每次只添加一个新值，因为 in 中的值`src[index+2]`最多可以使用 5 次。

所以这里是一个概念的例子：

```
//horizontal  filter
for(unsigned y = 0; y < height;  y++)
{
    int index = y*width + 2;
    register YOUR_DATA_TYPE a, b, c, d, e;
    a = src[index - 2].r;
    b = src[index - 1].r;
    c = src[index + 0].r; // The " + 0" is to show a pattern.
    d = src[index + 1].r;
    e = src[index + 2].r;
    for(unsigned x = 2; x < width-2;  x++)
    {
        dest[index - 2 + x].r = (a + e + (b + d) * 4 + c * 6) >> 4;
        a = b;
        b = c;
        c = d;
        d = e;
        e = src[index + x].r; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T22:31:22.297

我不确定您的编译器将如何优化所有这些，但我倾向于使用指针。假设您的结构是 3 个字节...您可以从正确位置的指针开始（源的过滤器边缘和目标的目标），然后使用常量数组偏移量移动它们。我还在外部循环中添加了一个可选的 OpenMP 指令，因为这也可以改进。

```
#pragma omp parallel for
for(unsigned y = 0; y < height;  y++) {
    const int rowindex = y * width;
    char * dpos = (char*)&dest[rowindex+2];
    char * spos = (char*)&src[rowindex];
    const char *end = (char*)&src[rowindex+width-2];

    for( ; spos != end;  spos++, dpos++) {
        *dpos = (spos[0] + spos[4] + ((spos[1] + src[3])<<2) + spos[2]*6) >> 4;
    }
} 
```

垂直循环也是如此。

```
const int scanwidth = width * 3;
const int row1 = scanwidth;
const int row2 = row1+scanwidth;
const int row3 = row2+scanwidth;
const int row4 = row3+scanwidth;

#pragma omp parallel for
for(unsigned y = 2;  y < height-2;  y++) {
    const int rowindex = y * width;
    char * dpos = (char*)&dest[rowindex];
    char * spos = (char*)&src[rowindex-row2];
    const char *end = spos + scanwidth;

    for( ; spos != end;  spos++, dpos++) {
        *dpos = (spos[0] + spos[row4] + ((spos[row1] + src[row3])<<2) + spos[row2]*6) >> 4;
    }
} 
```

无论如何，这就是我做卷积的方式。它稍微牺牲了可读性，而且我从未尝试过测量差异。我只是倾向于从一开始就这样写。看看这是否能让你加速。如果你有一台多核机器，OpenMP 肯定会，而指针的东西*可能*.

我喜欢关于将 SSE 用于这些操作的评论。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T11:17:25.117

一些更明显的优化正在利用内核的对称性：

```
a=*src++;    b=*src++;    c=*src++;    d=*src++;    e=*src++; // init

LOOP (n/5) times:
z=(a+e)+(b+d)<<2+c*6;  *dst++=z>>4;  // then reuse the local variables
a=*src++;
z=(b+a)+(c+e)<<2+d*6;  *dst++=z>>4;  // registers have been read only once...
b=*src++;
z=(c+b)+(d+a)<<2+e*6;  *dst++=z>>4;
e=*src++; 
```

第二件事是可以使用单个整数执行多次加法。当要过滤的值是无符号的时，可以在一个 32 位整数中拟合两个通道（或在 64 位整数中拟合 4 个通道）；这是穷人的SIMD。

```
a=  0x[0011][0034]  <-- split to two 
b=  0x[0031][008a]
----------------------
sum    0042  00b0
>>4    0004  200b0  <-- mask off
mask   00ff  00ff   
-------------------
       0004  000b   <-- result 
```

（模拟 SIMD 显示一个加法，然后移位 4）

这是一个并行计算 3 个 rgb 操作的内核（在 64 位架构中很容易修改为 6 个 rgb 操作......）

```
#define MASK (255+(255<<10)+(255<<20))
#define KERNEL(a,b,c,d,e) { \
 a=((a+e+(c<<1))>>2) & MASK; a=(a+b+c+d)>>2 & MASK; *DATA++ = a; a=DATA[4]; }

void calc_5_rgbs(unsigned int *DATA)
{
   register unsigned int a = DATA[0], b=DATA[1], c=DATA[2], d=DATA[3], e=DATA[4];
   KERNEL(a,b,c,d,e);
   KERNEL(b,c,d,e,a);
   KERNEL(c,d,e,a,b);
   KERNEL(d,e,a,b,c);
   KERNEL(e,a,b,c,d);
} 
```

在 ARM 和具有 16 个寄存器的 64 位 IA 上效果最佳……需要大量的汇编程序优化来克服 32 位 IA 中的寄存器短缺问题（例如，使用 ebp 作为 GPR）。正因为如此，它是一个就地算法......

每 8 位数据之间只有 2 个保护位，这足以得到与整数计算完全相同的结果。

顺便说一句：每字节遍历数组字节比通过 r,g,b 元素更快

```
 unsigned char *s=(unsigned char *) source_array; 
 unsigned char *d=(unsigned char *) dest_array; 
 for (j=0;j<3*N;j++) d[j]=(s[j]+s[j+16]+s[j+8]*6+s[j+4]*4+s[j+12]*4)>>4; 
```

# regex - 正则表达式从媒体中删除 '：雅虎管道中的信用

> ID：13058316
> 
> 赞同：0
> 
> 时间：2012-10-24T21:49:10.860
> 
> 标签：regex, yahoo-pipes

我希望这真的很简单 - 但我一直无法找到答案。我正在使用 Yahoo Pipes 将 instagram RSS 提要输出为 JSON。一切正常，除非摄影师的姓名（在项目 [media:credit].content 字段中）以 '. 这破坏了我用来显示 JSON 内容的 javascript。

有人可以建议将适当的正则表达式放入 Pipes 模块中以从人名中删除 ' 吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T22:22:20.857

搜索以下正则表达式。

`(.+?)'?`并将其替换为`/1`

# javascript - “友好 iFrame”检测：如何在首页找到我的嵌套 iframe？

> ID：13058317
> 
> 赞同：3
> 
> 时间：2012-10-24T21:49:12.997
> 
> 标签：javascript, dom, iframe, cross-domain

我在“友好的 iframe”环境中遇到了一个具有挑战性的 iFrame 检测问题。我需要确定从`window.top`哪个外部域 iframe 元素`window.top.document`加载到自身内部，另一个 iframe 具有相同的域、协议和端口作为`window.top`.

所以这里的核心问题是：**在页面 A 上，如何在 JavaScript 中确定 iFrame B 包含 iFrame C？**同样，Page A 和 iFrame C 属于相同的域、协议和端口，并且可以相互通信。iFrame B 位于不同的域中。我想在页面 A 上找到与 iFrame C 关联的 DOMElement。

可能已经尝试但没有奏效的事情：

*   `document.referrer`匹配。页面 A 将页面 A`src`上所有 iframe 的`document.referrer`属性与 iFrame C 中的属性相匹配。不幸的是，如果页面 A 上的多个 iframe 在 iframe B 上加载具有相同 src 的内容，这将不起作用。如果该`src`属性也不起作用iframe B 是`about:blank`或`javascript:something`。
*   `window.location.hash`通过查看`src`iframe 的属性进行通信。页面 A 无法获得`window.location.hash`iFrame B，所以那里没有运气。
*   这必须在 IE 6 和 7 中工作，所以*没有*window.postMessage 支持。对不起。

*附加信息*：

这是一个名为“Friendly iFrames”的配置。友好的 iFrame (FIF) 在广告行业中很常见。以下是它们的工作方式：

发布商网站上的一个页面，比如页面 A foo.com，从 some-random-ad-server.com 注入 iframe B。然后在 some-random-ad-server.com 上的 iframe B 内部，从 foo.com 加载另一个 iframe C。所以：

*   我可以从 iFrame C 访问（即 DOM 操作）页面 A。页面 A 可以访问 iFrame C。
*   页面 A 或 iFrame C 上的任何内容都无法访问 iFrame B。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T23:35:00.800

我意识到这已经过时了，但我对客户端解决方案很好奇，并浏览了这篇文章。我正在使用服务器端来处理这个问题，为什么不使用服务器端作为最后的手段呢？授予的引荐来源网址在服务器端是粗略的，但是在处理 iframed 页面时，引荐来源网址非常可靠，可以与本地应用程序的主机和引荐应用程序进行比较。

这是我在 ASP.NET/C# 中完成的方式（同样的事情可以在 PHP 等中完成）

```
// set referrer
if (Request.UrlReferrer != null && Request.Url.Host != Request.UrlReferrer.Host)
{
    Session["Referrer"] = Request.UrlReferrer.OriginalString;
} 
```

# .net - DataGridViewComboBoxColumn 文本值不更新（整数）

> ID：13058320
> 
> 赞同：4
> 
> 时间：2012-10-24T21:49:26.413
> 
> 标签：.net, vb.net, winforms, datagridviewcomboboxcell

我的第一篇文章，因为我找不到这个问题的答案。

我有一个带有一堆组合框的数据绑定 GridView。它们正确显示基础表中的值，并且正确的值出现在下拉列表中。1 个 Comboboxes 有一个 int .valuemember，一切都很好。另一个 ComboBox 具有字符串 .valuemember，当我在组合框中选择不同的值时，它不会更新到绑定表。

它们使用来自同一个表和同一个网格的相同代码绑定和更新。我专门绑定到 ESRI ArcGIS 文件。它似乎被正确绑定，我已经成功地将它用于其他项目。它会再次显示和更新所有列中的更改，并将接受基于整数的行的更改；因此，我可能愚蠢地排除了这一点。

不知道我需要做什么来更新字符串 .valuemember 值。

我想我错过了一些简单的东西，但我不知道它是什么。这是一些示例代码。

```
Domain1 As BindingList(Of Domaintype)
Domain2 As BindingList(Of Domaintype)
GridView.DataSource = pBindingSource

'add the columns desired
    GridView.Columns.Add(CreateComboBoxColumn("Column1Value", "Type1", Domain1 , "NonCodedIntValue"))
    GridView.Columns.Add(CreateComboBoxColumn("Column2Value", "Type2", Domain2 , "NonCodedCharValue"))

Private Function CreateComboBoxColumn(ByVal ColumnName As String, ByVal AliasName As String, ByRef DomainName As BindingList(Of Domaintype), ByVal pValueMember As String) As DataGridViewComboBoxColumn
    CreateComboBoxColumn = New DataGridViewComboBoxColumn
    With CreateComboBoxColumn
        .DataPropertyName = ColumnName
        .HeaderText = AliasName
        .ReadOnly = False
    End With
    With CreateComboBoxColumn
        .DataSource = DomainName
        .DisplayMember = "CodedValue"
        .ValueMember = pValueMember
    End With
    Return CreateComboBoxColumn
End Function

Private Sub GridView_CurrentCellDirtyStateChanged(ByVal sender As Object, ByVal e As EventArgs) Handles GridView.CurrentCellDirtyStateChanged
    If GridView.IsCurrentCellDirty Then
        GridView.CommitEdit(DataGridViewDataErrorContexts.Commit)
    End If
End Sub

Public Class Domaintype
    Private CodedValue As String
    Private NonCodedInt As Nullable(Of Short)
    Private NonCodedChar As String

    'adds a new coded value based on a sent non-coded and coded value
    Public Sub New(ByVal SentCodedValue As String, ByVal SentNonCoded As Nullable(Of Short), Optional ByVal SentNonCodedChar As String = Nothing)
        CodedValue = SentCodedValue
        NonCodedInt = SentNonCoded
        NonCodedChar = SentNonCodedChar
    End Sub
    'Gets or sets the coded value of a domain
    Public ReadOnly Property CodedValue() As String
        Get
            Return CodedValue
        End Get
    End Property
    'gets or sets the non-coded value of a domain
    Public ReadOnly Property NonCodedIntValue() As Nullable(Of Short)
        Get
            Return NonCodedInt
        End Get
    End Property

    'gets or sets the non-coded value of a domain
    Public ReadOnly Property NonCodedCharValue() As String
        Get
            Return NonCodedChar
        End Get
    End Property
End Class 
```

# css - 使用没有 ID 或类的 css 为 div 设置样式

> ID：13058321
> 
> 赞同：1
> 
> 时间：2012-10-24T21:49:40.193
> 
> 标签：css, html

我正在寻找一种方法来设置没有 ID 或类关联的 div 样式。我不是在寻找建议我自己将 ID 或类应用于 div 的评论，因为我要修改的代码是 wordpress 插件的一部分，更新时会重置我应用的任何样式。

我试图修改的代码是：

```
<div class="gallery_detail_box">
    <div><?php echo $post->post_title; ?></div>
    <div><?php echo the_excerpt_max_charlength(100); ?></div>
    <a href="<?php echo $permalink; echo basename( get_permalink( $post->ID ) ); ?>"><?php echo $gllr_options["read_more_link_text"]; ?></a>
</div> 
```

我曾尝试定位包含“post_title”的 div，因为我想让它变得粗体，并尝试了几种不同的方法但无济于事，我最后一次尝试定位该 div 是：

```
.gallery_detail_box > #div {
    font-weight:bold;
}

.gallery_detail_box #div #div {
    font-weight:normal;
} 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T21:51:23.640

`#`在引用 ID 时使用。div 不是 ID 而是标签。

尝试

```
.gallery_detail_box div {
   font-weight: bold;
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T21:51:25.680

把`#`标志拿出来。定位类型选择器时，您只需使用不带任何前缀的选择器名称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T21:52:32.550

要定位每个子 DIV 试试这个：

```
div.gallery_detail_box div:nth-child(1) {....}
div.gallery_detail_box div:nth-child(2) {....} 
```

祝你好运。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T21:57:59.877

根据您使用的浏览器，这可能会或可能不会起作用。它不适用于旧版本的 IE(7,8) 或任何其他不支持 CSS 3 的浏览器。

```
.gallery_detail_box {
    font-weight:normal;
}

.gallery_detail_box div:nth-child(1){
    font-weight:bold;
} 
```

对于旧版浏览器

```
.gallery_detail_box {
    font-weight:normal;
}

.gallery_detail_box div:first-child{
    font-weight:bold;
} 
```

然后将自定义样式应用于旧浏览器中的第二个、第三个等嵌套 div，您将执行以下操作：

```
.gallery_detail_box div:first-child + div{
    font-weight:bold;
}
/*(second)*/
.gallery_detail_box div:first-child + div + div{
    font-weight:bold;
}
/*(third)*/ 
```

等等

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-24T21:53:46.680

最简单的方法是使用第一个子伪选择器。

```
.gallery_detail_box div:first-child {
    font-weight: bold;
} 
```

这对旧浏览器有影响。检查 MDN 兼容性图表以查看是否有任何目标浏览器受到影响：[https ://developer.mozilla.org/en-US/docs/CSS/:first-child](https://developer.mozilla.org/en-US/docs/CSS/:first-child)

如果您需要定位第一个以外的子元素，则可以使用`:nth-child(2)`psuedoselector。

另一种选择是使用 JavaScript，它可以在任何支持 JavaScript 的浏览器中可靠地工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-24T22:01:54.667

给你的 div 上课。它的浏览器优化很差：

```
.class div{} 
```

因为浏览器在向元素添加css时会通过dom进行反向搜索。

[https://developers.google.com/speed/docs/best-practices/rendering](https://developers.google.com/speed/docs/best-practices/rendering)

# ios - 如何将 NSData UTF8 编码数据转换为 UTF16

> ID：13058325
> 
> 赞同：1
> 
> 时间：2012-10-24T21:49:57.973
> 
> 标签：ios, utf-8, nsdata, utf-16

我从我的数据库中接收到一些 UTF8 编码的数据。我想知道如何获取这个 UTF8 的 NSData 并在 UTF16 中重新编码？

有什么办法吗？我知道将 NSString 传递给 NSData 时该怎么做

```
[@"myString" dataUsingEncoding:NSUTF16StringEncoding]; 
```

但我不完全确定如何或是否可以在不必先将其放入字符串的情况下进行操作......

任何帮助，将不胜感激。

# python - Google App Engine NDB 自定义键 ID

> ID：13058327
> 
> 赞同：23
> 
> 时间：2012-10-24T21:50:01.890
> 
> 标签：python, google-app-engine, app-engine-ndb, djangoappengine

当我使用 ndb 的方法 put 创建一个对象时，它会自动创建类型为 Key(kind, id) 的键，其中 id 是一个数字。在整个文档中，它显示您可以使用字符串作为键的 id，但我不知道如何在创建对象时自动执行此操作。

我有一个用户模型，我正在考虑使用用户的用户名（因为它是唯一的）作为键的 id 以便更快地检索。这甚至是个好主意吗？自从用户提交后（我正在验证输入），我会对用户名有任何问题吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-24T21:58:25.030

```
class UserModel(ndb.Model):
  ...

user_model_entity = UserModel(id='some_string', ...) 
```

如果这些 ID 可能发生变化，这可能是个坏主意。如果它是您自己的系统并且您可以对潜在的更改做出反应，这是一个好主意，但在决定使用它们之前，您需要确保 ID 是唯一的并且相对稳定。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-24T22:23:09.787

您在创建时指定实体的 ID。定义模型时，您不会在此处设置 id 属性。因此，例如，您有：

```
class User(ndb.Model):
    # fields here 
```

创建模型时，您有：

```
user = User(id='username', ...) 
```

由于用户名是唯一的并且您验证了您的输入，因此您不会对这种方法有任何问题。

有关`ndb Model`构造函数的更多信息，您可以查看[NDB 模型类 - 构造函数](https://developers.google.com/appengine/docs/python/ndb/modelclass#Constructor)。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-09T10:13:01.620

您还可以为模型实体提供整数 ID（不一定是字符串）。

```
class User(ndb.Model):
...

user = User(id=1234567890, ...)
user.put() 
```

# objective-c - iOS 异常 EXC_GUARD

> ID：13058329
> 
> 赞同：21
> 
> 时间：2012-10-24T21:50:05.603
> 
> 标签：objective-c, ios, testflight

我在 iPhone 4 上发生了崩溃，异常类型为 EXC_GUARD。我无法通过谷歌（只有 1 个结果）或 stackoverflow 找到有关此特定异常的任何信息。它是什么？

```
Version:         ??? (???)
Code Type:       ARM (Native)
Parent Process:  launchd [1]

Date/Time:       2012-10-24 14:29:53.740 -0700
OS Version:      iOS 6.0 (10A403)
Report Version:  104

Exception Type:  EXC_GUARD
Exception Codes: 0x0000000100000010, 0x08fd4dbfade2dead
Crashed Thread:  0

Thread 0 name:  MAIN  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libsystem_kernel.dylib          0x32f25294 close + 8
1   Twine                           0x00230b8e close_file + 10
2   Twine                           0x00218774 -[TFAirTrafficController startSession] + 752
3   Twine                           0x002169fa +[TestFlight takeOff:] + 122 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-24T22:03:14.403

[https://devforums.apple.com/message/713606](https://devforums.apple.com/message/713606)

这是 TestFlight 中的一个错误，导致关闭 duff 文件句柄。这会导致崩溃。

# jquery - 如何根据表单提交的输入字段设置 JQuery 滑块的值？

> ID：13058330
> 
> 赞同：0
> 
> 时间：2012-10-24T21:50:05.480
> 
> 标签：jquery, jquery-ui

开始查看[滑块的 API，](http://docs.jquery.com/UI/Slider/slider#.22value.22value)有点困惑。我有一个简单的表单，有一个输入，输入一个包含滑块的“结果”页面。当用户滑动滑块手柄时，值会发生变化（意味着在函数中计算最终值 - 将输入添加到数字中）

现在，我已经硬编码了滑块的值，但我希望该值是来自原始表单输入的实际值。不知道如何完成，但这是我正在使用的功能：

```
$(function() {
    $("#ds1").slider({
        orientation: "horizontal",
        step: 7,
        range: "min",
        max: 200,
        value: 50,
        slide: refreshTotal,
        change: refreshTotal
    });
}); 
```

因此该值被硬编码为 50，但我想要一个输入字段来控制该值。refreshTotal 函数处理实际计算。如果以与此相同的方式处理，也可以设置最大值。

我在这里搜索并找到了一些“实时”输入影响滑块的示例，反之亦然使用 keyup 等。但我不知道如何设置值（可能使用 getter），基于用户点击提交后的表单输入字段，JQuery 处理计算。

我认为这是一件非常简单的事情，只是似乎无法弄清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T21:59:50.330

我将假设您已经从原始表单中获得了输入字段的值。由于您没有提及后端语言，因此一些如何在 PHP 中执行此操作的示例代码如下所示：

```
<? $value = $_POST['slider_value']; ?>
var slider_value = <? echo $value; ?>; 
```

然后，您可以使用您提到的 API Docs 中的选择器：

```
$( "#ds1" ).slider( "option", "value", slider_value); 
```

您可以以类似的方式处理滑块的最大值：

```
$( "#ds1" ).slider( "option", "max", insert_number_here); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T22:05:13.640

这假设 jQuery 和 jQuery UI。

```
$(function () {
    var $slider = $('#slider').slider();
    var $input_a = $('#input_a');

    // Set slider value
    $input_a.on('keyup', function () {
        $slider.value($(this).val());

    // Default slider
    }).trigger('keyup');

    // Set input value
    $slider.change(function () {
        $input_a.val($(this).value());
    };
}); 
```

# mysql - MySQL函数：选择和返回列

> ID：13058331
> 
> 赞同：3
> 
> 时间：2012-10-24T21:50:06.850
> 
> 标签：mysql, sql, stored-functions

我有一个表 Processes，它由一个`ID (unsigned int, auto_increment)`和组成`Name (varchar, unique)`。

使用任何输入（无论是否在表中）选择以下函数总是会导致

> ERROR 1172 (42000): 结果包含多于一行

```
CREATE FUNCTION LookupOrInsertProcess(nametwo VARCHAR(255))
  RETURNS INT UNSIGNED
BEGIN
  DECLARE myid INT UNSIGNED;
  SELECT ID INTO myid FROM Processes WHERE Name=nametwo;
  RETURN myid;
END$$ 
```

但是，选择以下函数总是返回 NULL：

```
CREATE FUNCTION LookupOrInsertProcess(nametwo VARCHAR(255))
  RETURNS INT UNSIGNED
BEGIN
  DECLARE myid INT UNSIGNED;
  SELECT ID INTO myid FROM Processes WHERE Name=nametwo;
  RETURN myid;
END$$ 
```

此外，请注意以下确实返回了正确的结果（数字 30 和 50 是任意的）：

```
CREATE FUNCTION LookupOrInsertProcess(nametwo VARCHAR(255))
  RETURNS INT UNSIGNED
BEGIN
  DECLARE myid INT UNSIGNED;
  SELECT ID INTO myid FROM Processes WHERE Name=nametwo;
  IF myid IS NULL THEN
    RETURN 30;
  ELSE
    RETURN 50;
  END IF;
END$$ 
```

任何帮助表示赞赏。

更新：编辑以消除表列和函数参数之间的冲突。我不相信这是问题所在。

UPDATE2：请注意，无论输入参数是否在表中，以下内容似乎都有效。为什么在没有 coalesce() 的情况下，即使对于表中的输入参数，该函数也会返回 NULL？

```
CREATE FUNCTION LookupOrInsertProcess(nametwo VARCHAR(255))
  RETURNS INT UNSIGNED
BEGIN
  DECLARE myid INT UNSIGNED;
  SELECT ID INTO myid FROM Processes WHERE Name=nametwo;
  RETURN COALESCE(myid, 0);
END$$ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T22:06:40.967

MySql 中的列名不区分大小写，因此您可能会发现这`where Name = name`意味着“给我每一行”。

尝试将输入参数更改为您的过程（以及查询中的相应条件）为`srchName`或其他不同于`name`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T22:07:58.653

尝试将输入重命名`name`为不同的名称，例如`inputName`.

更新：另一个建议。

```
DECLARE myid INT UNSIGNED;
SET myid = (SELECT ID FROM Processes WHERE Name=nametwo);
RETURN myid; 
```

# ios - iPhone 试图做一个年终倒计时

> ID：13058339
> 
> 赞同：0
> 
> 时间：2012-10-24T21:50:43.620
> 
> 标签：ios

我试图显示到今年年底有多少天、多少小时、多少分钟和多少秒。

我的想法是为当前时间创建一个 NSDate，在年底创建一个 NSDate。然后减去它们。

阅读文档后，我看到了一种添加但不减去 2 个 NSDates 的方法。

一定有办法制作倒数计时器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T00:24:29.003

尝试这个：

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@\"yyyy-MM-dd HH:mm:ss\"];
NSDate *endDate = [dateFormatter dateFromString:@"2013-01-01 00:00:00"]; 
```

根据 JustSid 的评论，这似乎是从这里开始的方式：

```
NSDateComponents *timeDifference = [[NSCalendar currentCalendar] 
components: NSDayCalendarUnit|NSHourCalendarUnit|NSMinuteCalendarUnit|NSSecondCalendarUnit  
fromDate:[NSDate date] toDate:endDate options:0];

int days = timeDifference.day;
int hours = timeDifference.hour;
int minutes = timeDifference.minute;
int seconds = timeDifference.second; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T21:57:44.797

尝试这样的事情：

```
- (NSString*) getTimeInterval:(NSDate*) start endTime:(NSDate*) end {
    if([[NSString stringWithFormat:@"%@", end] isEqualToString:@"1970-01-01 00:00:00 +0000"]) {
        end = [NSDate dateWithTimeIntervalSince1970:[[NSDate date] timeIntervalSince1970]];
    }
    NSTimeInterval interval = [end timeIntervalSinceDate: start];
    int numberOfdays = floor(interval/86400);
    int numberOfHours = floor((interval - numberOfdays*86400) / 3600);
    int numberOfMinutes = floor((interval - numberOfdays*86400 - numberOfHours*3600) / 60);
    return [NSString stringWithFormat:@"%d d %d h %d m", numberOfdays, numberOfHours, numberOfMinutes];
} 
```

# objective-c - 如何定义仅在 Objective-C 框架中可见的方法和属性？

> ID：13058342
> 
> 赞同：4
> 
> 时间：2012-10-24T21:50:49.067
> 
> 标签：objective-c, ios, categories

我正在尝试编写一个objective-c 框架，并且我希望方法和属性仅在框架内可见。我知道我可以在实现文件内的类扩展中定义它们，但是其他类将无法访问它们。

One way I was thinking to do it was to define a category for example MyClass+Internals and make that header private. but make the MyClass.h header public. I was wondering if there was a better way of doing this. Also, I'm not sure you can define properties within a category I thought it was only methods. Thanks for any suggestions or feedback.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T21:54:06.653

假设您有一个名为“Foo”的类，然后在“Foo_Framework.h”中创建：

```
@interface Foo()
@property ....;
- .... method ....
@end 
```

然后，确保 "Foo_Framework.h "*在*`@implementation Foo`. 这将导致类 Foo 使用在所述头文件中找到的扩展接口进行编译。然后可以在整个框架中使用该标头。只是不要让它在上述框架之外可用。

您不能在类别中声明属性（合成的）是正确的。这是创建类扩展的主要动机之一，上面就是一个例子。

# azure - trace.writeline 在 azure Onstop 方法中不起作用

> ID：13058344
> 
> 赞同：1
> 
> 时间：2012-10-24T21:50:54.573
> 
> 标签：azure

我想知道为什么以下 azure workerrole 在角色关闭时不显示任何诊断消息：

```
public class WorkerRole : RoleEntryPoint {

private bool running=true;

    public override void Run() {
        while (running)
        {
            Thread.Sleep(10000);
            TTrace.WriteLine("working", "Information");
        }
        Trace.WriteLine("stopped", "Information");
    }

    public override bool OnStart()
    {
        Trace.WriteLine("starting", "Information");
        return base.OnStart();
    }

    public override void OnStop() {
        Trace.WriteLine("stopping", "Information");
        running = false;
        base.OnStop();
    }
} 
```

我可以在诊断日志中看到事件“开始”和“工作”，但 Onstop 方法不记录任何内容。我想知道它是否被调用了，所以我在 OnStop() 方法中注入了一些代码来写出一些数据。事实上，数据是按预期写入的，这证明该方法被调用，只是我没有得到任何日志。任何想法如何跟踪我的关机代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T22:22:15.603

我的第一个也是最好的猜测是诊断代理没有时间将跟踪传输到存储中供您查看。跟踪首先在 VM 上本地记录，然后代理将根据您的配置方式将它们转移（按需或计划）。虚拟机关闭后，代理也消失了，无法将其转移。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T20:21:30.263

不支持在 OnStop 中进行跟踪，如果您设法通过按需传输 (http://msdn.microsoft.com/en-us/library/windowsazure/gg433075.aspx) 使其工作，它可能无法在下一个工作发布。请注意，Web Role OnStart 中的跟踪也不起作用。请参阅我的博客文章[http://blogs.msdn.com/b/rickandy/archive/2012/12/21/optimal-azure-restarts.aspx](http://blogs.msdn.com/b/rickandy/archive/2012/12/21/optimal-azure-restarts.aspx)来解决这个问题。另请参阅我的博客文章，了解有关使用 DbgView 查看实时 OnStop 跟踪数据的说明。

OnStop 方法应该只用于延迟关闭，直到你清理干净——所以你不应该有太多的代码可以跟踪。再次，请参阅我的博客了解详细信息。

# asp.net-mvc-3 - 在 MVC 应用程序 (Orchard) 中拒绝任何索引或根目录访问的 Mono 权限

> ID：13058346
> 
> 赞同：0
> 
> 时间：2012-10-24T21:51:06.070
> 
> 标签：asp.net-mvc-3, apache, mono, centos, orchardcms

> [Wed Oct 17 23:26:57 2012] [error] [client 85.55.45.215] (13)Permission denied: access to / denied
> 
> [Wed Oct 17 23:26:58 2012] [error] [client 85.55.45.215] (13)Permission denied: access to / denied
> 
> [Wed Oct 17 23:26:58 2012] [error] [client 85.55.45.215] (13)Permission denied: access to / denied
> 
> [2012 年 10 月 17 日星期三 23:29:07] [错误] [客户端 85.55.45.215] (13)权限被拒绝：访问 /Refresh.html 被拒绝
> 
> [2012 年 10 月 17 日星期三 23:33:34] [错误] [客户端 85.55.45.215] (13)权限被拒绝：访问 /Refresh.html 被拒绝
> 
> [2012 年 10 月 17 日星期三 23:33:38] [错误] [客户端 85.55.45.215] (13)权限被拒绝：访问 /index.php 被拒绝
> 
> [2012 年 10 月 17 日星期三 23:33:38] [错误] [客户端 85.55.45.215] (13)权限被拒绝：访问 /index.html 被拒绝
> 
> [2012 年 10 月 17 日星期三 23:33:38] [错误] [客户端 85.55.45.215] (13)权限被拒绝：访问 /index.html.var 被拒绝
> 
> [2012 年 10 月 17 日星期三 23:33:38] [错误] [客户端 85.55.45.215] (13)权限被拒绝：访问 /index.aspx 被拒绝
> 
> [2012 年 10 月 17 日星期三 23:33:38] [错误] [客户端 85.55.45.215] (13)权限被拒绝：访问 /Default.aspx 被拒绝
> 
> [2012 年 10 月 17 日星期三 23:33:38] [错误] [客户端 85.55.45.215] (13)权限被拒绝：访问 /default.aspx 被拒绝

我正在尝试安装 Orchard

这是我的 conf 文件

```
<VirtualHost *:80>
    ServerAdmin root@localhost
    ServerName www.mydomain.com

# Change the path below to suit your configuration
DocumentRoot /var/www/www.mydomain.com/public_html

# The paths used here should be common for all Linux distributions
ErrorLog /var/www/www.mydomain.com/logs/error.log
CustomLog /var/www/www.mydomain.com/logs/access.log combined

HostnameLookups Off
UseCanonicalName Off
ServerSignature On

# Make ABSOLUTELY sure that the path in double quotes ends with a slash!
Alias / "/var/www/www.mydomain.com/public_html/"

AddMonoApplications OrchardDemo "/:/var/www/www.mydomain.com/public_html"

# Orchard is a .NET 4.0 application. If your Mono was installed in a different prefix, replace /usr/bin/ with that prefix below.
MonoServerPath www.mydomain.com /usr/local/mod-mono-server4

# Helps when you get stack traces
MonoDebug www.mydomain.com True

# Orchard assumes a case-insensitive filesystem
MonoIOMAP www.mydomain.com all

<Directory "/var/www/www.mydomain.com/public_html">
SetHandler mono
MonoSetServerAlias www.mydomain.com
</Directory> 
```

这些是权限

```
drwxrwxr-x+ 11 apache www 4096 oct 24 23:14 public_html 
```

我可以访问 LICENSE.txt 或 Hello.html 文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T14:48:30.537

解决了禁用 SELinux 的问题：Does Mono run on Fedora Core 5

只要您关闭 SELinux，Mono 就会在 FC5 上运行。否则，某些应用程序可能会遇到错误。

有些人也报告了编译问题，但目前没有详细信息，如果你想使用 Mono，请确保关闭 SELinux

[http://www.mono-project.com/FAQ:_技术](http://www.mono-project.com/FAQ:_Technical)

# ios - iOS 6 UIDatePicker 计时器让用户选择 0 countDownDuration

> ID：13058349
> 
> 赞同：1
> 
> 时间：2012-10-24T21:51:20.220
> 
> 标签：ios, uikit, ios6

我在 UIDatePickerModeCountDownTimer 中使用 UIDatePicker 来允许用户选择持续时间。

如果您将计时器间隔设置为 5 分钟，用户将能够选择 0 小时 : 0 分钟（这很糟糕；这在 iOS 5 甚至在 iOS 6 中是不允许的，间隔为 1 分钟）。

现在我正在通过在更改时执行此操作来修复它：

```
-(void)timerValueChanged
{
    int clockInterval = workoutTimePicker.minuteInterval * 60;

    if (workoutTimePicker.countDownDuration < clockInterval) {
        workoutTimePicker.countDownDuration = clockInterval;
    }
} 
```

但这会使滚轴跳跃。如何为滚筒设置动画？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T13:38:54.843

目前没有`setCountDownDuration:animated:`，所以我们必须使用`setDate:animated:`.

我们必须创建一个`NSDate`具有当前日/月/年的对象，以允许我们使用您想要的值填充分钟组件，假设它是`workoutTimePicker.minuteInterval`：

```
NSCalendar *calendar = [NSCalendar currentCalendar];
NSDateComponents *components = [calendar components:NSYearCalendarUnit|NSMonthCalendarUnit|NSDayCalendarUnit fromDate:[NSDate date]];
    components.hour = 0;
    components.minute = workoutTimePicker.minuteInterval; // how much minutes you want
    components.second = 0;
NSDate * resetedMinsDate = [calendar dateFromComponents:components]; 
```

所以有了这个新日期，我们只需要设置选择器的日期：

```
[workoutTimePicker setDate:resetedMinsDate animated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-17T16:50:42.753

在尝试[Carlos Ricardo](https://stackoverflow.com/users/468868/carlos-ricardo)的答案时，我发现了一个更简洁的解决方案（使用 swift）：

```
let minDate = Calendar.current.startOfDay(for: Date()) + clockInterval
datePicker.setDate(minDate, animated: true) 
```

# knockout.js - 如何从 Knockout.JS 中的依赖 observable 中取消下拉的“更改”事件？

> ID：13058351
> 
> 赞同：2
> 
> 时间：2012-10-24T21:51:21.033
> 
> 标签：knockout.js

这是设置：

用户在页面“A”上。有一个用于导航的下拉菜单 (DROPDOWN)。用户可以选择 2 个选项：A、B。其中 A 代表当前页面，B 是用户想要访问的内容。

此下拉列表绑定到一个依赖的可观察对象（GUARD），该可观察对象（GUARD）可以读取并且可能会或可能不会写入另一个保存该下拉列表状态的常规可观察对象（TARGET）。

下拉 <-- --> 守卫 <-- ?--> 目标

这个想法是，如果用户在下拉菜单中选择了一些内容以离开页面，我们首先检查是否有任何未保存的更改，如果有，我们会询问用户是要丢弃它们还是留在页面上并继续编辑.

所以情况：有未保存的更改。用户从下拉列表中选择一些东西。GUARD 通过调用它的“write”方法来启动。我们会提示用户是否要放弃更改并离开页面或留下。用户选择留下。我们说 'fine' 并且 write 方法不做任何事情，所以目标 observable 保持不变。故事结局！但..

当用户触摸下拉菜单并且“更改”甚至没有被取消（没有办法在绑定的 observable 内进行）时，下拉菜单进入状态“B”，就好像用户选择离开页面一样。

所以我的问题很简单：

*   有没有办法从下拉绑定的依赖可观察对象的“写入”方法中取消“更改”事件？

*   如果不是，我该如何摆脱这种情况，使下拉列表的选择与 TARGET observable 保持同步？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T23:14:10.047

'change' 事件发生*在*下拉列表已经更改之后，因此一个简单的解决方案是使用旧值使下拉列表“刷新”，只需调用`target.valueHasMutated()`. 小提琴示例：http: [//jsfiddle.net/KXhem/77/](http://jsfiddle.net/KXhem/77/)

编辑：自淘汰赛 3 以来，计算的仅在其值确实发生变化时才通知。要获得相同的行为，您可以添加`.extend({ notify: 'always' })`到计算中。在此处查看完整的详细信息：http: [//knockoutjs.com/upgrade-notes/v3.0.0.html](http://knockoutjs.com/upgrade-notes/v3.0.0.html)

# c++ - 检测字符串和 const char 数组的代码

> ID：13058352
> 
> 赞同：1
> 
> 时间：2012-10-24T21:51:21.723
> 
> 标签：c++, string, templates

我正在运行这两行代码以稍后添加到地图中：

```
o.add("-i", 800,             "int option");  
o.add("-w", "'switch on' option (no third parameter)"); 
```

要添加它们，我正在使用定义为的两个添加函数：

```
template<class T>
void add(std::string name, T value, std::string desc);
template<class T>
void add(std::string name, std::string desc); 
```

第一个工作正常，并返回我想要的值，但如果我添加第二个，我得到错误：

```
error: no matching function for call to ‘Opt::add(const char [3], const char [40])’ 
```

我的问题是为什么它在第一个字符串中正确使用了我的字符串，而第二个字符串中的字符串被认为是 const char 数组。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T21:59:59.487

错误消息很奇怪，但是要使用第二个重载，您需要显式指定模板参数（因为无法自动推断它）：

```
o.add<T>("-w", "'switch on' option (no third parameter)"); 
```

或者，如果在这种情况下您实际上不需要模板参数，只需将其设为非模板方法即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T21:55:58.800

由于您没有在第二个重载中使用模板参数，请将其删除：

```
template<class T>
void add(std::string name, T value, std::string desc);

void add(std::string name, std::string desc); 
```

可以在[此处](http://liveworkspace.org/code/1a57048b2ba7bf4c4cdd29893a779914)找到工作示例。

# apache - mod_rewrite 仅在 Firefox 中损坏

> ID：13058357
> 
> 赞同：0
> 
> 时间：2012-10-24T21:51:25.397
> 
> 标签：apache, firefox, mod-rewrite

我在使用**其他浏览器但不是 Firefox的重写时遇到问题**

问题是我必须在 url 中使用引号，由于客户端错误的软件向我的脚本提交数据，我别无选择。

我使用 %27 对 url 中的引号进行编码（我在 php 中添加了安全性）。

```
# example.eu/horses/r/rollin-%27n-tumblin/
RewriteRule ^horses/(.*)/(.*)/$ index.php?page=viewHorse&letter=$1&horseName=$2 [L] 
```

这在 Safari 和 Chrome 中有效（在 mac 和 windows 7 上测试），但 firefox 显示“页面未正确重定向”

ps 不是缓存问题

我是重写的初学者，所以我希望解决方案很简单，但我无法弄清楚为什么这条规则在其他浏览器中有效，但在 firefox 中无效

这是.htaccess

```
RewriteEngine on 
RewriteBase /
ErrorDocument 404 /404/
#Commented these out just to see if causing issues
#RewriteCond %{HTTP_HOST} !^www\.
#RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L]
#RewriteRule ^index.html http://www.example.eu/ [R=301,L]
#RewriteRule ^home.html http://www.example.eu/ [R=301,L]
#RewriteRule ^Home.html http://www.example.eu/ [R=301,L]
#RewriteCond %{REQUEST_FILENAME} !-f
#RewriteCond %{REQUEST_URI} !index.php
#RewriteCond %{REQUEST_URI} !^message-board/$
#RewriteCond %{REQUEST_URI} !(.*)/$
#RewriteRule ^(.*)$ http://www.example.eu/$1/ [L,R=301]
RewriteRule ^css/(.*)/$ /style.css
RewriteRule ^checkout/failed/$ index.php?page=checkoutFailed [L]
RewriteRule ^checkout/complete/$ index.php?page=checkoutComplete [L]
RewriteRule ^advertise/$ index.php?page=advertise [L]
RewriteRule ^contact/$ index.php?page=contact [L]
RewriteRule ^sales/$ index.php?page=sales [L]
RewriteRule ^news/$ index.php?page=news [L]
RewriteRule ^publications/$ index.php?page=publications [L]
RewriteRule ^generateSitemap/$ index.php?page=generateSitemap [L]
RewriteRule ^fixtures/(.*)/$ index.php?page=view-fixtures&country=$1 [L]
RewriteRule ^fixtures/$ index.php?page=fixtures [L]
RewriteRule ^results/(.*)/(.*)/(.*)/$ index.php?page=view-result&country=$1&date=$2&UniRef=$3 [L]
RewriteRule ^results/(.*)/(.*)/$ index.php?page=cresults&country=$1&date=$2 [L]
RewriteRule ^results/(.*)/$ index.php?page=results&country=$1 [L]
RewriteRule ^results/$ index.php?page=results [L]
RewriteRule ^horses/(.*)/(.*)/$ index.php?page=viewHorse&letter=$1&horseName=$2 [L]
RewriteRule ^horses/(.*)/$ index.php?page=horsesByLetter&letter=$1 [L]
RewriteRule ^horses/$ index.php?page=horsesByLetter [L]
RewriteRule ^search.php index.php?page=search&%{QUERY_STRING} [L]
RewriteRule ^404/$ index.php?page=404 [L]
<FilesMatch "\\.(js|css|html|htm|php|xml)$">
SetOutputFilter DEFLATE
</FilesMatch>
<FilesMatch "\.(flv|gif|jpg|jpeg|png|ico|swf)$">
Header set Cache-Control "max-age=2992000"
</FilesMatch>
<FilesMatch "\.(js|css|pdf|txt)$">
Header set Cache-Control "max-age=604800"
</FilesMatch> 
```

问题在于 Mac OSX 10.8.2 上的 FF 16.0.1 显示错误“页面未正确重定向”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T14:37:45.240

原来我在 php 中有一个规范的 301 脚本，它的 url 编码有问题。

我猜 Firefox 对 $_SERVER['REQUEST_URI'] 中的 url 的编码与其他浏览器不同，但是......

改变……

```
$_SERVER['REQUEST_URI'] 
```

在 php 规范脚本中...

```
urldecode($_SERVER['REQUEST_URI']) 
```

使其正确匹配 ' in url。:)

# wso2 - WSO2 丰富调解员

> ID：13058359
> 
> 赞同：2
> 
> 时间：2012-10-24T21:51:30.390
> 
> 标签：wso2, synapse

[WSO2 ESB V4.5.0] 我配置丰富中介器以累积 XML 的方式有什么问题？我有一个 n PojoMediator 序列，它们从数据库中检索 XML，每个都设置一个上下文属性，并将 XML 表示为字符串。例如，在第一个 PojoMediator 执行后，它的 context 属性设置为：

```
 customerInformation = <cust><id>1</id><oc></oc><ca>0</ca></cust> 
```

我正在尝试用 XML 内容丰富正文，但最终得到：

```
[snip]
  </header>
&lt;cust>&lt;id>1&lt;/id>&lt;oc>&lt;/oc>&lt;ca>0&lt;/ca>&lt;/cust></root></soapenv:Body></soapenv:Envelope> {org.apache.synapse.mediators.builtin.LogMediator} 
```

..丰富的中介正在转义引用的“custInfo”XML。我的丰富配置是：

```
<enrich>
    <source type="property" property="custInfo"/>
    <target type="body"/>
</enrich> 
```

有没有办法强制丰富中介将属性（“custInfo”）视为 XML 片段而不是直接文本？我假设这就是 XML 被转义的原因，因为中介认为它正在设置节点的内容而不是指定 XML 片段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T02:29:32.380

你如何定义财产？添加后可以试试吗

```
type="OM" 
```

到属性定义，然后再试一次？

# java - 在拆分字符串函数中查找分隔符

> ID：13058361
> 
> 赞同：0
> 
> 时间：2012-10-24T21:51:38.660
> 
> 标签：java, regex, delimiter

我想在拆分函数调用中使用空格作为分隔符，但是我想将某些单词输入到单个单元格数组中；比如`ma kore`。

例如：

```
String str =  "azx cd ma kore cfg ma kore dfgh"; 
```

在带有一些分隔符的函数 split 调用之后，输出应如下所示：

```
str[0] = "azx"  
str[1] = "cd"   
str[2] = "ma kore"  
str[3] = "cfg"  
str[4] = "ma kore"  
str[5] = "dfgh" 
```

我需要找到一个分隔符（或正则表达式模式）以在拆分函数中使用。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T21:55:05.950

使用正则表达式模式

```
(?:^|(?<=\s))(ma kore|\S+)(?:$|(?=\s)) 
```

并找到所有匹配/出现。

# mysql - 在 MySQL 中，如何根据连接条件进行插入？

> ID：13058365
> 
> 赞同：1
> 
> 时间：2012-10-24T21:51:44.297
> 
> 标签：mysql, sql, opencart

感谢您的关注！

## 背景

我几乎没有使用 LAMP 堆栈的经验，但我最近开设了一个使用基于 LAMP 堆栈的 OpenCart的[在线商店。](http://www.skullcopter.com)

商店允许我为客户分配奖励积分，我给每个新客户 10 分，只是为了创建一个帐户。

不幸的是，OpenCart 管理 GUI 只允许我手动执行此操作，一次一个用户。

但是，我确实可以访问允许我运行 MySql 命令的界面，并且我想使用这种方法解决问题。

在 OpenCart 创建的数据库中，我有一个`oc_customer`包含我所有客户的表，然后我有一个`oc_customer_reward`表，它关闭客户 ID 并在每次客户获得积分时分配一条新记录。看起来是这样的：

![oc_customer_reward](../Images/e87c2b144dd2e4d07325575f23120187.png)

## 问题

如何编写一个 MySql 查询来查看表中是否不存在客户`oc_customer`，`oc_customer_reward`如果他们不存在，然后在`oc_customer_reward`表中为该客户创建一条记录（价值 10 分）？

我不是要求工作代码（除非你真的想提供它），我愿意自己做这项工作，但坦率地说，我不知道从哪里开始。方法是什么？

## 更新

根据奥拉夫的建议，我可以`oc_customer_reward`通过他建议的查询让所有客户不在表中：

```
SELECT customer_id
FROM oc_customer
WHERE customer_id NOT 
IN (
SELECT customer_id
FROM oc_customer_reward
) 
```

现在，我只需要迭代该查询的结果（对不起，我不是数据库专家！）并`oc_customer_reward`为每个查询插入一行。有点像`foreach`C# 中的循环。有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T21:57:46.997

首先找到奖励表中没有的客户：

```
select customer_id from oc_customer
    where customer_id not in (select customer_id from oc_customer_reward); 
```

然后将其插入奖励表中：

```
insert into oc_customer_reward (customer_id, points)
    select customer_id, 10 from oc_customer
        where customer_id not in (select customer_id from oc_customer_reward); 
```

这未经测试，但我希望它有助于开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T22:24:15.570

未经测试且不确定 oc_customer 的表结构，但以下查询应该对您有所帮助

```
INSERT INTO oc_customer_reward ( customer_id, description, points, date_added ) 
 SELECT customer_id, 'reward for registration', 10, CURRENT_TIMESTAMP FROM oc_customer WHERE NOT EXISTS ( SELECT * FROM oc_customer_reward r WHERE r.customer_id = oc_customer.customer_id ); 
```

有关 EXISTS 语句的更多详细信息，您可以在此处找到

[http://dev.mysql.com/doc/refman/5.5/en//exists-and-not-exists-subqueries.html](http://dev.mysql.com/doc/refman/5.5/en//exists-and-not-exists-subqueries.html)

# linux - Linux 上 libtorrent 的 ./configure 问题

> ID：13058367
> 
> 赞同：6
> 
> 时间：2012-10-24T21:51:52.823
> 
> 标签：linux, boost, installation, configure, libtorrent

地狱，我在安装 libtorrent 时遇到了非常困难的时间，并且不确定问题出在哪里。我在网上看到了很多类似的错误，但解决方案没有帮助，我很确定错误消息太模糊，无法比较。

当我运行 ./configure 我得到

**

```
Building libtorrent-rasterbar 0.16.5

Checking for a C/C++ compiler to use:
checking for gcc... gcc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether gcc accepts -g... yes
checking for gcc option to accept ISO C89... none needed
checking how to run the C preprocessor... gcc -E
checking whether gcc and cc understand -c and -o together... yes
checking for g++... g++
checking whether we are using the GNU C++ compiler... yes
checking whether g++ accepts -g... yes
checking how to run the C++ preprocessor... g++ -E
checking whether g++ understands -c and -o together... yes
.
..
.
Checking for boost libraries:
checking for boostlib >= 1.36... yes
checking whether the Boost::System library is available... yes
configure: error: Boost.System library not found. Try using --with-boost-system=lib 
```

**

然后我使用这个建议，不同的是底部说

**

```
Checking for boost libraries:
checking for boostlib >= 1.36... yes
checking whether the Boost::System library is available... yes
checking for exit in -llib... no
checking for exit in -lboost_system-lib... no
configure: error: Could not link against boost_system-lib ! 
```

**

config.log 文件有错误

**

```
configure:16572: result: no
configure:16537: checking for exit in -lboost_system-lib
configure:16562: gcc -o conftest -lpthread -g -O2 -fvisibility=hidden  -I/usr/include  -L/usr/lib conftest.c -lboost_system-lib  -lpthread   >&5
conftest.c:33: warning: conflicting types for built-in function 'exit'
/usr/bin/ld: cannot find -lboost_system-lib
collect2: ld returned 1 exit status 
```

**

任何见解将不胜感激

安装后

`apt-get install libboost-system-dev`

`apt-get install libboost-filesystem-dev libboost-thread-dev`

```
Checking features to be enabled:
checking whether encryption support should be enabled... yes
configure: encryption support: now checking for the OpenSSL library...
checking for pkg-config... /usr/bin/pkg-config
checking for openssl/ssl.h in /usr/local/ssl... no
checking for openssl/ssl.h in /usr/lib/ssl... no
checking for openssl/ssl.h in /usr/ssl... no
checking for openssl/ssl.h in /usr/pkg... no
checking for openssl/ssl.h in /usr/local... no
checking for openssl/ssl.h in /usr... no
checking whether compiling and linking against OpenSSL works... no
configure: error: OpenSSL library not found. Try using --with-openssl=DIR or disabling encryption at all. 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-24T22:05:32.700

您需要安装 libboost 系统。

如果您使用的是 Debian/Ubuntu，请按如下方式使用 apt-get。

```
$ apt-get install libboost-system-dev 
```

您可能还需要安装...

```
$ apt-get install libboost-filesystem-dev libboost-thread-dev 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-28T01:55:08.987

安装所有依赖项的[最简单方法](https://coderwall.com/p/muvnow "如何在 Linux 上安装 libtorrent")是使用 apt-get。

```
sudo apt-get build-dep python-libtorrent 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-01-25T03:09:20.163

我知道这有点老了，但要解决您的 OpenSSL 问题，您需要使用`sudo apt-get install libssl-dev`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-01-19T06:45:26.610

For CentOS users, you will want to install boost-devel.

```
# yum install boost-devel 
```

But I still got the same error. Just want to point out one more thing, the CentOS 6.4 I work with had an old gcc compiler:

```
# g++ --version
g++ (GCC) 4.4.7 20120313 (Red Hat 4.4.7-3)
Copyright (C) 2010 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. 
```

Installing a newer version of gcc helped me to get rid of that particular error. I used **g++ (GCC) 4.8.2** version and this time calling the following command worked:

```
# ./configure --with-boost-libdir=/usr/lib64 
```

After this point you might still run into not finding openssl headers like the OP posted here, [this post](https://superuser.com/questions/371901/openssl-missing-during-configure-how-to-fix) will help to overcome the error. You may have to install openssl-devel (for CentOS) or libssl-dev (for Debian), or you can run with

```
# ./configure --with-boost-libdir=/usr/lib64 --without-ssl 
```

If you have openssl headers installed in your system, you don't need to use --with-openssl flag, or at least I didn't need to use it.

Although this is old post, hope it will help someone else like me.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-18T01:25:45.070

为避免 OpenSSL 问题，您可以构建“libtorrent-rasterbar”来禁用 OpenSSL 加密。

例如：

```
./configure --disable-debug --disable-encryption --prefix=/opt/libtorrent-rasterbar 
```

然后“制作”+“制作安装”

问候

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-01-15T20:55:40.670

接受的答案对我不起作用。起作用的是编辑`configure`脚本文件并从中删除这些行：

```
if test -z "$BOOST_SYSTEM_LIB"; then :
  as_fn_error $? "Boost.System library not found. Try using --with-boost-system=lib" "$LINENO" 5
fi 
```

这些行似乎检查了 BOOST_SYSTEM_LIB 环境变量是否存在且不为空。

# java - 我如何将其变成最多 5 名玩家的多人游戏？

> ID：13058376
> 
> 赞同：-1
> 
> 时间：2012-10-24T21:52:30.423
> 
> 标签：java, oop

试图把它变成多人游戏......需要最多 5 名玩家。我已经有了基础，只是不知道如何使它适用于多人游戏。我尝试过的方法不是存储每个人的猜测。这是精简版。

```
import java.util. * ;

public class randomNumber {

  public static void hint(int answer, int guess) {
    if(answer < guess) {
      System.out.println("Incorrect! \n TOO HIGH!.");
    } else if(answer > guess) {
      System.out.println("Incorrect! \n TOO LOW!.");
    } else if(answer == guess) {
      System.out.println("YOU GOT IT!");
    }
  }

  public static void main(String[] args) {
    System.out.println("How many Players will be playing?");
    int players = players();
    int player = 0;
    player++;
    System.out.println("Player " + player + " Enter a number");
    int guess = guess();
    int answer = random();
    int count = 0;
    while (guess != answer) {
      hint(answer, guess);
      count = count(count);
      guess = guess();
    }
    hint(answer, guess);
    System.out.println("It took " + count(count) + " tries!");

  }

  public static int random() {
    return(int)(Math.random() * 100) + 1;
  }

  public static int players() {
    Scanner my_input = new Scanner(System. in );
    return my_input.nextInt();
  }

  public static int guess() {
    Scanner my_input = new Scanner(System. in );
    return my_input.nextInt();
  }

  public static int count(int c){

    c++;

    return c;
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T21:59:05.357

你做了一个类，这是面向对象编程的第一步

但是，你所有的方法都是`static`，这是一个限制。

您必须删除除`static`main 之外的所有关键字并*实例化*您的游戏 5 次。

这是 OO 的第二步：实例。

完成后，您会看到一些*细节*需要是唯一的，您将创建第二个类，实例化一次。此类将*与*5 个实例有关。

自己走这条路……

# statistics - 非 iid 数据示例

> ID：13058379
> 
> 赞同：20
> 
> 时间：2012-10-24T21:52:38.617
> 
> 标签：statistics, machine-learning, probability-theory

我读过一些关于*非独立同分布*数据的论文。根据维基百科，我知道什么是*iid （独立且相同的分布式）数据，但仍然对**non-iid*感到困惑。我做了一些研究，但找不到明确的定义和例子。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-24T22:38:27.943

来自维基百科`iid`：

> “独立同分布”意味着序列中的一个元素独立于它之前的随机变量。这样，IID 序列不同于马尔可夫序列，其中第 n 个随机变量的概率分布是序列中前一个随机变量的函数（对于一阶马尔可夫序列）。

作为一个简单的合成示例，假设您有一个具有 6 个面的特殊骰子。如果上一次面值为1，那么下一次扔，仍然会以0.5的概率得到面值为1，以0.1的概率得到面值为2、3、4、5、6的各面值。但是，如果最后一次面值不是 1，那么你得到每个面的概率相等。例如，

```
p(face(0) = k) = 1/6, k = 1,2,3,4,5,6  -- > initial probability at time 0\. 
p(face(t) = 1| face(t-1) = 1) = 0.5, p(face(t) = 1| face(t-1) != 1) = 1/6
p(face(t) = 2| face(t-1) = 1) = 0.1, p(face(t) = 1| face(t-1) != 1) = 1/6
p(face(t) = 3| face(t-1) = 1) = 0.1, p(face(t) = 1| face(t-1) != 1) = 1/6
p(face(t) = 4| face(t-1) = 1) = 0.1, p(face(t) = 1| face(t-1) != 1) = 1/6
p(face(t) = 5| face(t-1) = 1) = 0.1, p(face(t) = 1| face(t-1) != 1) = 1/6
p(face(t) = 6| face(t-1) = 1) = 0.1, p(face(t) = 1| face(t-1) != 1) = 1/6
face(t) stands for the face value of t-th throw. 
```

这是一个示例，当第 n 个随机变量（第 n 次投掷的结果）的概率分布是序列中前一个随机变量的函数时。

我在一些机器学习场景中看到了非相同和非独立（例如，马尔可夫）数据，这可以被认为是非独立同分布的例子。

*   使用流数据进行在线学习，当传入示例的分布随时间变化时：示例的分布不同。假设您有一个用于预测在线广告点击率的学习模块，来自用户的查询词的分布在一年中根据季节性趋势发生变化。夏季和圣诞节期间的查询词应该有不同的分布。

*   主动学习，学习者要求特定数据的标签：也违反了独立性假设。

*   使用图形模型学习/推理。变量通过依赖关系连接。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T14:15:57.200

以一种非常随意的方式（因为我假设您已经阅读了技术定义），iid 意味着如果您有一堆值，那么这些值的所有排列具有相等的概率。所以如果我有`3,6,7`那么这个概率等于概率`7,6,3`等于`6,7,3`等等。也就是说，每个值都不依赖于序列中的其他值。

作为一个反例，想象一下`x`每个元素`x_i`比前一个元素高一个或低一个的序列，有 50-50 的机会发生这些中的哪一个。那么一个可能的序列是`1,2,3,2,3,4,3,2`。应该清楚的是，该序列的某些排列不是等概率的：特别是，序列开始`1,4,...`的概率为零。`x_i | x_i-1`如果您愿意，您可以考虑将表单对视为 iid。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-24T01:11:55.447

这是一个不独立的问题示例。问题定义：假设您有一个 2D 图像，其中有一个 blob。您想要构建一个以 5X5 图像块作为输入进行操作的块分类器，并将中心像素分类为“边界”或“非边界”。您的要求是每个补丁的生成分类定义一个连续的轮廓（一个像素厚），该轮廓准确地围绕斑点的边界进行追踪。本质上是一个边缘检测器。还假设将边界错位几个像素的轻微错误无关紧要，但是边界轮廓的连续性确实很重要（它不应该有任何中断）。

这如何不独立： 示例 1：假设您有一个很好的解决方案轮廓 A。另一个有效的解决方案 B，它只是 A 向右移动了 2 个像素，请注意，像素级别的大多数分类是不同的，但是解决方案仍然有效。示例 2：假设您获得了有效的解决方案 A，但只有一个输出像素右移了 2 个像素以创建输出 C。这次您的轮廓已损坏，解决方案无效。这演示了分类器如何需要了解其他附近像素示例的答案，以确定是否应将特定像素分类为边界。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T19:54:03.950

从字面上看，`non iid`应该与`iid`任何一种方式相反，`independent`或者`identical`。

因此，例如，如果掷硬币，let`X`是结果为尾`Y`的事件的随机变量，是结果为头的事件的随机变量，则`X`和`Y`肯定是相关的。它们可以由彼此决定。

至于非`identical`，一旦两个随机变量的分布不相同，就可以称它们为不相同的。

因此，任何一种情况都发生了，你可能会得到一个案例的`non iid`例子。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-11-09T08:42:31.227

**“iid”实际上不是真实数据的属性，而是观察者对此数据的假设。**如果您将 greeness 的回答中每次提到的“iid 数据”和“非 iid 数据”都替换为“[...] 数据的假设”，那么我完全同意他们的看法。

但是，由于该问题特别要求提供非 iid 数据的示例，因此必须补充说**没有此类数据**，因为您可以从字面上获取任何数据并假设它是 iid 或非 iid。这个假设只是对选项的一个有益限制，它使统计建模在许多情况下更容易甚至是可能的。

这在文献中并没有很清楚地说明，其中 iid 经常被表示为真实世界数据的属性。这是可以理解的，但仍然有点危险，因为它隐含地假设我们作为观察者可以确定有关数据源（即生成过程）的信息，而实际上我们不能。

当然，这只适用于真实世界的数据。任何人都可以根据某种分布生成人工数据，这必然导致数据是独立同分布的。**但是，如果不了解事实数据之外的生成过程，就无法确定这一点。**只给定数据，没有办法说它是否是 iid。

我知道有些方法**假设**数据是非独立同分布的，并尝试相应地找到不同的分布。在许多情况下，这会有所帮助，因为数据实际上是由非平稳随机过程生成的。但是数据只给你样本，确定它是否真的是独立同分布所需的归纳推理**总是**容易出错。

# jsf - 无法从复合 JSF 组件引用 Bean 中的方法

> ID：13058387
> 
> 赞同：0
> 
> 时间：2012-10-24T21:53:26.460
> 
> 标签：jsf, composite-component

我有以下复合组件 TestCC.xhtml：

```
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://java.sun.com/jsf/core" xmlns:h="http://java.sun.com/jsf/html" xmlns:cc="http://java.sun.com/jsf/composite">
<cc:interface>
<cc:attribute name="manager" method-signature="java.lang.String helloTest()" required="true"/>
</cc:interface>
<cc:implementation>
Hello #{cc.attrs.manager} !!!!!!!!!!!!!!!!!!!!!
</cc:implementation>
</html> 
```

当我尝试在 JSFF 文件中调用它时：

```
....
<icc:TestCC manager="#{viewScope.PatientClinicalBean.helloTest}"/>
... 
```

页面在我的复合标记处崩溃，控制台中显示以下消息：

```
javax.el.ELException: //C:/Documents and Settings/tlam/Application Data/JDeveloper/system11.1.2.3.39.62.76.1/o.j2ee/drs/iCHIP/ViewControllerWebApp.war/WEB-INF/classes/META-INF/resources/IchipComponent/TestCC.xhtml: javax.el.PropertyNotFoundException: //C:/Documents and Settings/tlam/Application Data/JDeveloper/system11.1.2.3.39.62.76.1/o.j2ee/drs/iCHIP/ViewControllerWebApp.war/Patient/Profile/Clinical.jsff @13,86 manager="#{viewScope.PatientClinicalBean.helloTest}": The class 'patient.profile.PatientClinicalBean' does not have the property 'helloTest'. 
```

但是我的托管 bean 确实有一个公共 String helloTest() 方法，以及在我的 JSFF 页面的其他地方可以正常工作的其他方法：

```
public class PatientClinicalBean{
String test = "TESTING"; 
...
public String helloTest() {
  return test;
}
...
} 
```

我用不同的方法尝试了很多次，结果都是一样的。然而，如果我的复合组件只输出一个字符串，并且我输入表达式以直接访问字符串测试字段，那么它会正确执行。当其他方法调用在同一个 JSFF 页面中正常工作时，我似乎无法仅从我的复合组件中引用 PatientClinicalBean 中的任何方法。我在网上看到的所有其他例子都没有问题，就像我一样，我错过了什么吗？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-11T18:51:36.510

在jsf2上，如果是调用方法，需要加上括号，像这样：

```
....
<icc:TestCC manager="#{viewScope.PatientClinicalBean.helloTest()}"/>
... 
```

否则 jsf 会将其解释为一个字段并尝试查找方法 getHelloTest()。

# objective-c - 排序忽略标点符号（Objective-C）

> ID：13058389
> 
> 赞同：8
> 
> 时间：2012-10-24T21:53:34.280
> 
> 标签：objective-c, sorting

我正在尝试对 iOS UITableView 对象进行排序。我目前正在使用以下代码：

```
// Sort terms alphabetically, ignoring case
[self.termsList sortUsingSelector:@selector(localizedCaseInsensitiveCompare:)]; 
```

这对我的列表进行排序，忽略大小写。但是，也可以忽略标点符号。例如：

```
c.a.t.
car
cat 
```

应按如下方式排序：

```
car
c.a.t.
cat 
```

（实际上，两只猫（猫或猫）中的哪一只先来并不重要，只要它们彼此相邻排序即可）。

有没有一种简单的方法来解决这个问题？我认为解决方案将涉及从字符串中提取字母数字字符，然后比较它们，然后将它们返回到以前的状态，并再次包含非字母数字字符。

事实上，我真正关心的唯一字符是句点 (.) 但如果有一个解决方案可以轻松涵盖所有标点符号，那么了解它会很有用。

注意：一个月前我问过这个[关于 Java 的完全相同的问题。](https://stackoverflow.com/questions/12396540/sort-ignoring-punctuation)现在，我正在 Objective-C 中创建相同的解决方案。我想知道 iOS API 是否有任何技巧可以让这变得简单......

**编辑**：我尝试使用以下代码去除标点符号并填充我排序的另一个数组（由@tiguero 建议）。但是，我不知道如何做最后一步：根据第二个数组的顺序实际对第一个数组进行排序。这是我的代码：

```
 NSMutableArray *arrayWithoutPunctuation = [[NSMutableArray alloc] init];
    for (NSString *item in arrayWithPunctuation)
    {
        // Replace hyphens/periods with spaces
        item = [item stringByReplacingOccurrencesOfString:@"-" withString:@" "]; // ...hyphens
        item = [item stringByReplacingOccurrencesOfString:@"." withString:@" "]; // ...periods
        [arrayWithoutPunctuation addObject:item];
    }
    [arrayWithoutPunctuation sortUsingSelector:@selector(localizedCaseInsensitiveCompare:)]; 
```

这提供了已排序的 'arrayWithoutPunctuation'，但当然**不包含 punctuation**。这不好，因为虽然它现在排序很好，但它不再包含对数组至关重要的标点符号。我需要做的是根据'arrayWithoutPunctuation'的顺序对'arrayWithPunctuation'进行排序......任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-24T22:41:53.203

您可以在 an 上使用比较块`NSArray`，您的代码将如下所示：

```
NSArray* yourStringList = [NSArray arrayWithObjects:@"c.a.t.", @"car", @"cat", nil];
NSArray* yourStringSorted = [yourStringList sortedArrayUsingComparator:^(id a, id b){
        NSString* as = (NSString*)a;
        NSString* bs = (NSString*)b;

        NSCharacterSet *unwantedChars = [NSCharacterSet characterSetWithCharactersInString:@"\\.:',"];
        //Remove unwanted chars
        as = [[as componentsSeparatedByCharactersInSet: unwantedChars] componentsJoinedByString: @""];
        bs = [[as componentsSeparatedByCharactersInSet: unwantedChars] componentsJoinedByString: @""];

        // make the case insensitive comparison btw your two strings
        return [as caseInsensitiveCompare: bs];
    }]; 
```

这可能不是最有效的代码，实际上另一种选择是首先迭代您的数组并删除所有不需要的字符并将 a`selector`与该`caseInsensitiveCompare`方法一起使用：

```
 NSString* yourStringSorted = [yourStringList sortedArrayUsingSelector:@selector(caseInsensitiveCompare:)]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T10:39:03.977

这更清洁，更高效：

```
NSArray* strings = @[@".....c",@"a.",@"a",@"b",@"b...",@"a..,"];
NSArray* sorted_strings = [strings sortedArrayUsingComparator:^NSComparisonResult(id obj1, id obj2) {
    NSString* a = [obj1 stringByTrimmingCharactersInSet:[NSCharacterSet punctuationCharacterSet]];
    NSString* b = [obj2 stringByTrimmingCharactersInSet:[NSCharacterSet punctuationCharacterSet]];
    return [a caseInsensitiveCompare:b];
}]; 
```

为了真正的效率，我会编写一个忽略标点符号的比较方法，这样就不需要内存分配来进行比较。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T23:37:30.200

我的解决方案是将每个字符串分组为具有*两个*属性的自定义对象

*   原始字符串
*   没有标点的字符串

...然后根据没有标点符号的字符串对对象进行排序。

Objective C 有一些方便的方法来做到这一点。所以假设我们在这个对象中有两个字符串：

```
NSString *myString;
NSString *modified; 
```

首先，将您的自定义对象添加到数组中

```
NSMutableArray *myStrings = [[NSMutableArray alloc] init];
[myStrings addObject: ...]; 
```

然后，使用方便的 NSSortDescriptor按*修改后的变量对数组进行排序。*

```
//You can specify the variable name to sort by
//Sorting is done according to the locale using localizedStandardCompare
NSSortDescriptor *mySortDescriptor = [NSSortDescriptor sortDescriptorWithKey:@"modified" ascending:YES selector:@selector(localizedStandardCompare:)];
[myStrings sortedArrayUsingDescriptors:@[ mySortDescriptor ]]; 
```

*瞧！您的对象（和字符串）已排序。* [有关 NSSortDescriptor 的更多信息...](http://nshipster.com/nssortdescriptor/)

# css - 如果父 css 文件使用查询字符串，@import css 文件是否仍会被缓存

> ID：13058391
> 
> 赞同：11
> 
> 时间：2012-10-24T21:53:41.763
> 
> 标签：css, caching

我即将在我们的生产环境中对网页和 css 文件进行升级。我想防止 web 浏览器中的 css 缓存，因为如果新的 html 与旧的 css 一起使用，这会破坏设计。我总共对三个 css 文件进行了更改：

*   主 css 文件（在带有标签的页面的 head 部分中引用）
*   css 文件 A（使用 @import "css-fileA.css" 语法在主 css 文件中引用）
*   css 文件 B（在主 css 文件中使用 @import "css-fileB.css" 语法引用）

为了防止浏览器缓存，我在我的主 css 文件中添加了一个查询字符串，例如： ...link href="main.css?rev=20121024"...

我现在想知道在 main.css 上使用查询字符串是否有助于防止使用 @import 语句在 main.css 中引用的 css 文件 A 和 B 被缓存？或者我是否还需要为它们应用查询字符串，例如 @import "css-fileA.css?rev=20121024" ？

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-24T22:09:42.730

我希望每个文件都得到独立处理。为什么`css-fileA.css`直接加载或通过加载会有所不同`@import`？它仍然是相同的 URL，并且应该以相同的方式使用缓存。

# ant - Jenkins ANT 脚本在运行过程中失败

> ID：13058393
> 
> 赞同：1
> 
> 时间：2012-10-24T21:53:55.827
> 
> 标签：ant, continuous-integration, jenkins, phpunit

我有一堆 PHPUnit 测试，我在 jenkins 中使用 ANT 调用它们。突然间

```
[exec] ...............................................................  63 / 644 (  9%)
[exec] ............................................................... 126 / 644 ( 19%)
[exec] ............................................................... 189 / 644 ( 29%)
[exec] ............................................................... 252 / 644 ( 39%)
[exec] ............................................................... 315 / 644 ( 48%)
[exec] .............................................................

BUILD FAILED
/etc/jenkins/build.xml:188: exec returned: 139

Total time: 57 seconds
Build step 'Invoke Ant' marked build as failure 
```

有趣的是，当我手动运行测试时，一切都运行（至少），即：达到 100%。

我已经指定 Jenkins 使用来自的 ant 二进制文件

```
which ant 
```

在 Jenkins 的配置菜单中并强制此特定版本使用它。

这对我来说毫无意义，因为今天早些时候构建成功了。几天前才开始发生这种情况，我通过重新启动机器解决了它，但我真的很想弄清楚为什么会自发发生这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T00:59:54.013

它仅在 Jenkins 服务器上失败，还是在开发机器上也失败？什么命令失败了？

退出代码 139 是分段违规。你必须确定什么是失败的。

*   既然您正在使用 Jenkins，并且您正在使用 PHP，那么您`<exec>`为什么不尝试在 Ant 之外进行测试呢？Jenkins 可以在构建过程中运行命令。这将消除 Ant 作为可能的原因。
*   尝试使用`<exec>`设置。设置`spawn`为 true 将生成一个子 shell，它没有`exec`在 Java 中运行的内存限制。内存不足可能会导致分段错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-17T10:05:36.403

我也有这个问题。对我来说，它最终导致了 xdebug 的问题，这是代码覆盖报告所必需的。通过另一个 php 配置文件加载 xdebug 似乎可以解决问题。

# xna - 忽略 XNA 中丢失的音频设备

> ID：13058394
> 
> 赞同：0
> 
> 时间：2012-10-24T21:54:02.387
> 
> 标签：xna

当我尝试在具有音频设备但没有插入任何扬声器的 Windows 7 机器上运行 XNA 应用程序时，我收到以下错误消息：

> 找不到合适的音频设备。验证是否安装了声卡，并检查驱动程序属性以确保它未被禁用

有没有办法捕捉这个错误并忽略它。我真的不在乎玩家是否有任何声音，在这种情况下游戏应该仍然运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T09:05:34.097

[与此处](https://stackoverflow.com/a/5651106/165500)相同的答案：理论上它应该抛出一个`NoAudioHardwareException`.

所以尝试用音频做一些事情（`SoundEffect.MasterVolume`想到一个可能性，因为它是一个静态方法），看看你是否能捕捉到异常。如果您确实捕获了异常，则无需进行进一步的音频工作。

# java - Java中的子字符串替换

> ID：13058398
> 
> 赞同：2
> 
> 时间：2012-10-24T21:54:25.763
> 
> 标签：java, substring

我正在尝试实现子字符串替换，但我没有得到想要的结果。有人可以评论我在这里可能缺少的东西吗？

```
public class SubtringReplacement {

    public static void main (String[] args){

        String input = "xPIy";
        if (input.contains("PI") || input.contains("pi") || input.contains("Pi")){
            input.replace("PI", "3.14");
        }
        System.out.println(input);
    }

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T21:55:44.307

字符串是不可变的！！

```
input = input.replace("PI", "3.14"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T21:57:15.077

一个问题是您需要在进行替换时捕获返回值。另一个问题是你只会替换大写`"PI"`，而你似乎想替换混合大小写的实例。试试这个：

```
input = input.replaceAll("(PI|pi|Pi)", "3.14"); 
```

`replace`寻找文字匹配；`replaceAll`进行正则表达式匹配，这是您所需要的。

顺便说一句，你不需要`if`条件——如果没有匹配，就没有替换。

PS 如果您还想替换`"pI"`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T22:19:40.503

显然你错过了让你的代码在给定条件下工作的左手分配。

```
 input.replace("PI", "3.14"); 
```

但它只会替换，如果`input`包含，`PI`它也会尝试。为了更好地处理这个问题，我认为您可以使用or作为替换模式，它将查找一次出现，然后是一次出现，例如：`pi``Pi``"[pP][iI]"``"[pP]{1}[iI]{1}"``P or p``I or i`

```
 String input = "xPIyPizpIapib";
   input = input.replaceAll("[pP][iI]", "3.14"); 
   System.out.println(input); //<- all "pi"s irrespective of case are replaced.

   String input = "xPIyPizpIapib";
   input = input.replaceAll("[pP]{1}[iI]{1}", "3.14"); 
   System.out.println(input); //<- all "pi"s irrespective of case are replaced. 
```

请注意：`pI`如果找到，这也将替换为 wel。

# lazy-loading - 使用 MEF 组合零件，但推迟零件的创建

> ID：13058406
> 
> 赞同：0
> 
> 时间：2012-10-24T21:54:57.997
> 
> 标签：lazy-loading, mef

正如[这些](https://stackoverflow.com/questions/11951501/which-parts-of-mef-should-be-customized-for-dynamic-loading-of-plug-ins-in-a-dis) [问题](https://stackoverflow.com/questions/12328243/how-to-persist-mef-import-and-export-information-to-disk)中所解释的，我正在尝试构建一个由主机和多个任务处理客户端组成的应用程序。在一些帮助下，我弄清楚了如何发现和序列化部件定义，以便我可以存储这些定义而不必加载实际的运行时类型。

我想要实现的下一步（或者实际上是接下来的两个步骤）是我想将部件的组合与对象的实际创建和连接（由这些部件表示）分开。因此，如果我有一组部件，那么我希望能够执行以下操作（在伪代码中）：

```
public sealed class Host
{
    public CreationScript Compose()
    {
        CreationScript result;
        var container = new DelayLoadCompositionContainer(
            s => result = s);
        container.Compose();
        return script;
    }

    public static void Main()
    {
        var script = Compose();

        // Send the script to the client application
        SendToClient(script);
    }
}

// Lives inside other application
public sealed class Client
{
    public void Load(CreationScript script)
    {
        var container = new ScriptLoader(script);
        container.Load();
    }

    public static void Main(string scriptText)
    {
        var script = new CreationScript(scriptText);
        Load(script);
    }
} 
```

这样我就可以在主机应用程序中组合部件，但实际上加载代码并在客户端应用程序中执行它。目标是将决定加载什么的所有智能都放在一个位置（主机），而实际工作可以在任何地方（由客户端）完成。

本质上，我正在寻找的是某种获取 MEF 隐式创建的 ComposablePart 图的方法。

现在我的问题是，MEF 中是否有任何位可以让我实现这种行为？我怀疑[提供者模型](http://mefcontrib.codeplex.com/wikipage?title=Provider%20model)可能会帮助我解决这个问题，但这是 MEF 相当大且复杂的部分，因此任何指南都会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T02:59:34.177

从大量调查来看，似乎不可能将 MEF 中的组合过程与实例化过程分开，因此我不得不为这个问题创建自己的方法。该解决方案假定[插件的扫描](https://stackoverflow.com/questions/12328243/how-to-persist-mef-import-and-export-information-to-disk)导致以某种方式存储类型、导入和导出数据。

为了组合零件，您需要跟踪每个零件实例以及它如何连接到其他零件实例。最简单的方法是使用图形数据结构来跟踪哪个导入连接到哪个导出。

```
public sealed class CompositionCollection
{
    private readonly Dictionary<PartId, PartDefinition> m_Parts;
    private readonly Graph<PartId, PartEdge> m_PartConnections;

    public PartId Add(PartDefinition definition)
    {
        var id = new PartId();
        m_Parts.Add(id, definition);
        m_PartConnections.AddVertex(id);

        return id;
    }

    public void Connect(
        PartId importingPart, 
        MyImportDefinition import,
        PartId exportingPart,
        MyExportDefinition export)
    {
        // Assume that edges point from the export to the import
        m_PartConnections.AddEdge(
            new PartEdge(
                exportingPart,
                export,
                importingPart,
                import));
    }
} 
```

请注意，在连接两个部分之前，有必要检查导入是否可以连接到导出。在其他情况下，MEF 会这样做，但在这种情况下，我们需要自己做。如何处理的一个例子是：

```
public bool Accepts(
    MyImportDefinition importDefinition, 
    MyExportDefinition exportDefinition)
{
    if (!string.Equals(
        importDefinition.ContractName, 
        exportDefinition.ContractName, 
        StringComparison.OrdinalIgnoreCase))
    {
        return false;
    }

    // Determine what the actual type is we're importing. MEF provides us with 
    // that information through the RequiredTypeIdentity property. We'll 
    // get the type identity first (e.g. System.String)
    var importRequiredType = importDefinition.RequiredTypeIdentity;

    // Once we have the type identity we need to get the type information
    // (still in serialized format of course)
    var importRequiredTypeDef = 
        m_Repository.TypeByIdentity(importRequiredType);

    // Now find the type we're exporting
    var exportType = ExportedType(exportDefinition);
    if (AvailableTypeMatchesRequiredType(importRequiredType, exportType))
    {
        return true;
    }

    // The import and export can't directly be mapped so maybe the import is a 
    // special case. Try those
    Func<TypeIdentity, TypeDefinition> toDefinition = 
        t => m_Repository.TypeByIdentity(t);
    if (ImportIsCollection(importRequiredTypeDef, toDefinition) 
        && ExportMatchesCollectionImport(
            importRequiredType, 
            exportType, 
            toDefinition))
    {
        return true;
    }

    if (ImportIsLazy(importRequiredTypeDef, toDefinition) 
        && ExportMatchesLazyImport(importRequiredType, exportType))
    {
        return true;
    }

    if (ImportIsFunc(importRequiredTypeDef, toDefinition) 
        && ExportMatchesFuncImport(
            importRequiredType, 
            exportType, 
            exportDefinition))
    {
        return true;
    }

    if (ImportIsAction(importRequiredTypeDef, toDefinition) 
        && ExportMatchesActionImport(importRequiredType, exportDefinition))
    {
        return true;
    }

    return false;
} 
```

请注意，特殊情况（例如`IEnumerable<T>`等`Lazy<T>`）需要确定导入类型是否基于泛型类型，这可能有点棘手。

一旦存储了所有组成信息，就可以在任何时间点对零件进行实例化，因为所有必需的信息都可用。实例化需要大量的反射帮助以及可靠的[Activator](http://msdn.microsoft.com/en-us/library/system.activator.aspx)类的使用，并将作为练习留给读者。

# ios - 应用内购买与免费和付费版本 - ios

> ID：13058407
> 
> 赞同：1
> 
> 时间：2012-10-24T21:55:00.047
> 
> 标签：ios, ios5, in-app-purchase

我知道过去有人问过这个问题，但是自从 7 月份发生关于应用内购买的黑客问题以来，我没有看到任何新帖子。

我想使用应用内购买系统来允许用户从我的应用程序中删除广告。这似乎是比维护 2 个独立的应用程序（免费和付费）更清洁的解决方案。

我将不胜感激其他人对此主题的任何反馈。我知道苹果已经实施了阻止黑客攻击的修复程序。但仍然希望 SO 用户社区提供一些意见。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T22:14:39.633

使用 Apple 的[VerificationController](https://developer.apple.com/library/ios/#releasenotes/StoreKit/IAP_ReceiptValidation/_index.html)来验证您获得的收据，您可以在 iOS 5.x 下安全地使用 IAP。在我自己的应用程序中，无论 iOS 版本（5 或 6）如何，我都会使用它。

# python - 重定向到文件时，python脚本的输出重复

> ID：13058410
> 
> 赞同：0
> 
> 时间：2012-10-24T21:55:18.650
> 
> 标签：python, shell

我正在执行 myfile.py 并且我想将输出重定向到一个文件，所以我这样做了：

```
python2.5 myfile.py > affiche.txt 
```

但是，当我显示 affiche.txt 时，我看到输出已重复。

为什么此文件中的消息重复？myfile.py 的主要内容包含：

```
print "\n[BG:INFO] Automatic generation of the machine features\n"         
hostname = socket.gethostname()          
rep=DeletePoints(hostname)
if exists(rep)==False:  
    print "\n[BG:INFO] The directory of work is: ", rep, "\n" 
```

# php - HTTP 标头，获取特定值

> ID：13058411
> 
> 赞同：-1
> 
> 时间：2012-10-24T21:55:21.083
> 
> 标签：php, curl, http-headers

```
(string) HTTP/1.1 200 OK
Content-Language: en
Content-Type: application/json; charset=utf-8
Date: Wed, 24 Oct 2012 21:38:50 GMT
Server: nginx
Vary: Accept-Language, Cookie, Accept-Encoding
X-Ratelimit-Limit: 5000
X-Ratelimit-Remaining: 4976
transfer-encoding: chunked
Connection: keep-alive 
```

从上面的标题中，我想要**X-Ratelimit-Remaining**的值。我如何将其存储在 php.ini 中的变量中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T21:59:11.063

使用`get_headers()`( [Documentation](http://php.net/manual/en/function.get-headers.php) ) 从标头中检索任何值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T22:15:37.590

正如**@justderb**的第一个答案已经说过，使用**get_headers()** PHP 函数。

如果您有一个带有标题信息的字符串。无论如何，您都可以转换为数组并获取它。

例子：

```
$url = "http://www.your-web.com";
$xr = get_headers($url, 1);
echo 'The X-Ratelimit-Remaining value is: '.$xr['X-Ratelimit-Remaining']; 
```

或者：

```
$url = Array(
    "0" => "HTTP/1.1 200 OK",
    "Date" => "Sat, 29 May 2004 12:28:14 GMT",
    "Server" => "Apache/1.3.27 (Unix)  (Red-Hat/Linux)",
    "X-Ratelimit-Remaining" => "4976"
);
echo 'The X-Ratelimit-Remaining value is: '.$url['X-Ratelimit-Remaining']; 
```

希望能帮助到你，

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T22:06:45.020

这是使用 Curl 的替代解决方案：

```
$ch = curl_init('http://example.com/'); 
curl_setopt_array($ch, array(
    CURLOPT_HEADER => true, 
    CURLOPT_NOBODY => true, 
    CURLOPT_RETURNTRANSFER => true
)); 

$headers = curl_exec($ch);
preg_match('/^X-Ratelimit-Remaining: (.+)$/m', $headers, $m);
list(, $remaining) = $m;

echo '$remaining: ' . $remaining; 
```

# macos - 在 OSX 上卡住 Gitolite

> ID：13058415
> 
> 赞同：2
> 
> 时间：2012-10-24T21:55:32.467
> 
> 标签：macos, git, osx-mountain-lion, gitolite

我正在osx山狮服务器上安装最新版本的gitolite。我在它自己的“git”用户帐户下设置它并按照此处的说明进行操作：[https ://github.com/sitaramc/gitolite](https://github.com/sitaramc/gitolite)

我一直在尝试从我的工作站上的服务器签出 gitolite-admin 存储库。我运行这个命令：

```
git clone git@gitserver:gitolite-admin 
```

但得到这个作为回报：

```
Cloning into 'gitolite-admin'...
Connection closed by gitserver
fatal: Could not read from remote repository.

Please make sure you have the correct access rights
and the repository exists. 
```

似乎我正确设置了 SSH，因为它没有要求 PWD，但我被困在哪里寻找尝试调试问题。

谢谢，格兰特

* * *

结果来自 ssh -v

```
OpenSSH_5.9p1, OpenSSL 0.9.8r 8 Feb 2011
debug1: Reading configuration data /etc/ssh_config
debug1: /etc/ssh_config line 20: Applying options for *
debug1: Connecting to gitserver [gitserver] port 22.
debug1: Connection established.
debug1: identity file /Users/xxx/.ssh/id_rsa type 1
debug1: identity file /Users/xxx/.ssh/id_rsa-cert type -1
debug1: identity file /Users/xxx/.ssh/id_dsa type -1
debug1: identity file /Users/xxx/.ssh/id_dsa-cert type -1
debug1: Remote protocol version 2.0, remote software version OpenSSH_5.9
debug1: match: OpenSSH_5.9 pat OpenSSH*
debug1: Enabling compatibility mode for protocol 2.0
debug1: Local version string SSH-2.0-OpenSSH_5.9
debug1: SSH2_MSG_KEXINIT sent
debug1: SSH2_MSG_KEXINIT received
debug1: kex: server->client aes128-ctr hmac-md5 none
debug1: kex: client->server aes128-ctr hmac-md5 none
debug1: SSH2_MSG_KEX_DH_GEX_REQUEST(1024<1024<8192) sent
debug1: expecting SSH2_MSG_KEX_DH_GEX_GROUP
debug1: SSH2_MSG_KEX_DH_GEX_INIT sent
debug1: expecting SSH2_MSG_KEX_DH_GEX_REPLY
debug1: Server host key: RSA xxxxx
debug1: Host 'gitserver' is known and matches the RSA host key.
debug1: Found key in /Users/xxx/.ssh/known_hosts:5
debug1: ssh_rsa_verify: signature correct
debug1: SSH2_MSG_NEWKEYS sent
debug1: expecting SSH2_MSG_NEWKEYS
debug1: SSH2_MSG_NEWKEYS received
debug1: Roaming not allowed by server
debug1: SSH2_MSG_SERVICE_REQUEST sent
debug1: SSH2_MSG_SERVICE_ACCEPT received
debug1: Authentications that can continue: publickey,gssapi-keyex,gssapi-with-mic,keyboard-interactive
debug1: Next authentication method: publickey
debug1: Offering RSA public key: /Users/xxx/.ssh/id_rsa
debug1: Server accepts key: pkalg ssh-rsa blen 279
debug1: read PEM private key done: type RSA
Connection closed by gitserver 
```

除非我遗漏了一些细节，否则这里看起来不错。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T18:35:03.283

我在山狮中配置一个裸露的 git 仓库时遇到了类似的问题。我取消了以下行的注释`/etc/sshd_config`：

```
PubkeyAuthentication yes
PermitUserEnvironment yes 
```

最后一个与 .ssh/environment 中缺少 PATH 错误有关，但第一个是允许来自 ie 的连接的错误。msysgit。

PS（*编辑*）：在 msysgit 的情况下，我还`eval $(ssh-agent) && ssh-add`使用在选美中导入的 OpenSSH 密钥设置了 SSH 代理（）（作为我的`GIT_SSH=path_to_plink`）。那成功了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-27T12:22:07.470

在 osx 服务器上，至少从 2015 年开始，还为存储库所有者显式启用 ssh 访问。就我而言，我将服务器配置为仅允许少数用户。这引起了与您非常相似的问题。

# c# - XNA 4.0 中的 3D 碰撞检测

> ID：13058417
> 
> 赞同：0
> 
> 时间：2012-10-24T21:55:33.807
> 
> 标签：c#, 3d, collision-detection, xna-4.0

我已经在网上搜索了很长一段时间，但我找不到任何足够具体的东西来帮助我。我知道 XNA 会死，但它仍然有用（在我心里，在我稍后将它移植到 SharpDX 之前）

我正在 XNA 4.0 中制作 3D FPS 射击游戏，但在设置碰撞检测时遇到了严重问题。

首先，我在搅拌机中制作模型，并且我有一个高多边形和低多边形版本的模型。我想使用带有碰撞检测的低多边形模型，但我对如何做到这一点感到困惑。我想使用 JigLibX，但我不确定如何设置我的项目以便这样做。

简而言之：我想完成一个简单的目标：在搅拌机中制作一张复杂的地图，并从中制作边界框，然后使用四叉树将其拆分。然后我的主角和他的枪可以跑来跑去射击东西！

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T13:12:47.737

我不明白你的具体问题是什么，但我假设你想知道如何在原则上有效地实现碰撞检测：

*   对于角色：使用（几个）边界框和边界球体（比如头部的球体，躯干、腿和手臂的 9 个框。

*   对于地形：使用来自高度图的数据进行 Y（上/下）碰撞检测，并为地形上的对象（如树木、墙壁、灌木......）使用边界框/球体

*   对于粒子——比如枪声：使用点、小的边界球或者——甚至更好，因为帧率独立——光线追踪。

几乎在**任何情况下**，您都不想按照您在帖子中建议的那样在多边形基础上进行碰撞检测（引用“用于碰撞检测的低多边形模型”）。

我希望这能让你朝着正确的方向前进。

干杯

# scala - 使用 scala 进行 GUI 编程：我可以使用哪些库和工具？

> ID：13058424
> 
> 赞同：4
> 
> 时间：2012-10-24T21:55:53.737
> 
> 标签：scala, user-interface

我从来没有在 java 或 scala 中做过 GUI 的东西。过去我对 C# 和 Visual Studio 进行了一些实验，并且有一个 Visual gui builder，我可以在其中拖放元素。

scala中是否存在类似的东西？

我读了一些关于 javaFX 的东西，我看到了[SceneBuilder](http://docs.oracle.com/javafx/release-documentation.html)。或者，我可以只使用 java 进行 GUI 编程，对吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T23:57:59.007

*   [xscalaawt](https://github.com/nafg/ScalaSWT)
*   [斯卡拉FX](http://code.google.com/p/scalafx/)

另见[gsl-swt](https://github.com/mikegr/gsl-swt/wiki)

# internationalization - zend 框架 2 在 onBootstrap 中设置 TextDomain

> ID：13058427
> 
> 赞同：0
> 
> 时间：2012-10-24T21:55:59.650
> 
> 标签：internationalization, zend-framework2, translation, view-helpers, zend-app-bootstrap

我成功地遵循了这个[链接](http://samminds.com/2012/09/zend-framework-2-translate-i18n-locale/ "关联")的说明，现在我的网站是多语言的，不需要在“traslate()”调用中放入“locale”。但是我每次调用它时都必须放置 TextDomain。

```
 $this->traslate("Hello", __NAMESPACE__) //where __NAMESPACE__ is the text domain. 
```

我想在 onBootstrap 方法中设置 TextDomain，而不是将其放在“traslate()”助手的每次调用中。我尝试过使用 setTextDomain 方法，但它不存在。有人知道怎么做吗？

onBootStrap 代码如下：

```
 .....//Code for define $locale.
   $sm = $e->getApplication()->getServiceManager();
   $translator = $sm->get('translator');
   $translator->setLocale($locale);
   $traslator->SetTextDomain($textdomain);   //This line not work!!!!! 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T08:23:35.600

第一次没看错。[通过关于 ZF2 I18N](http://stuff.dasprids.de/slides/zendcon2012/internationalization-in%20-zend-framework-2/presentation.html#1)的DASPRIDS演示，正确调用的函数是：

```
$this->plugin('translate')->setTranslatorTextDomain('module-b'); 
```

虽然如果我没看错，那是在视图脚本中。但是，从 ServiceManager 获取翻译器 - 我还没有测试过 - 但请尝试以下操作：

```
$translator->getPluginManager()->get('translate')->setTranslatorTextDomain('foo'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T18:57:00.580

好的。我们已经前进了一步。

第一个解决方案可以正常工作（视图解决方案），现在我的网页仅使用此帮助器参数引用文本，即由配置定义的 Locale 和 TextDomain：

$this->translate('HELLO');

但是第二种解决方案不起作用。我不明白，因为当名称相同时，视图中接受了相同的插件，而不是 onBootstrap。

我在下面重写了我的 onBootstrap 代码：

```
 $translator = $e->getApplication()->getServiceManager()->get('translator');
    $pm = $translator->getPluginManager();   //until here works ok.
    $pm->get('translate');   //this throws an error message how if 'translate' not found. 
```

# heroku - 从 heroku gem 切换到 heroku-api topolbelt

> ID：13058428
> 
> 赞同：2
> 
> 时间：2012-10-24T21:56:02.170
> 
> 标签：heroku, gem

Heroku 非常擅长让事情变得简单......但这......不是那么多。你如何从 heroku gem 切换到新的工具带？以下是我采取的步骤：

```
 $ heroku version: heroku-gem/2.32.5 (x86_64-darwin11.4.1) ruby/1.9.3 autoupdate
 removed 'gem "heroku"' from gem file
 added 'gem "heroku-api"' to gemfile
 deleted gemfile.lock
 $ bundle install
 installed toolbelt via the package installer
 $ heroku login ... returns "Authentication successful"
 $ heroku version: STILL RETURNS heroku-gem/2.32.5 (x86_64-darwin11.4.1) ruby/1.9.3 autoupdate 
```

两个问题：

```
 #1 Why is my version still using the heroku-gem after taking the steps above?
 #2 Where do I put "heroku = Heroku::API.new(:api_key => API_KEY)" for use with the heroku-api gem? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T18:54:40.870

删除 gemfile.lock 文件并没有删除它。我不得不运行 gem uninstall heroku （我有 9 个版本）......之后，heroku 版本显示在工具带上。

# c++ - boost asio io_service::run() 退出“早” - 或不？

> ID：13058430
> 
> 赞同：1
> 
> 时间：2012-10-24T21:56:10.010
> 
> 标签：c++, boost, boost-asio

谁能告诉我在什么条件下`boost::asio`方法`io_service::run()`会返回？的文档[文档`io_service::run()`](http://www.boost.org/doc/libs/release/doc/html/boost_asio/reference/io_service/run/overload1.html)似乎表明，只要有工作要做或调度处理程序，`run()`就不会返回。

我问这个的原因是我们有一个旧的 https 客户端，它联系服务器并执行 http POST。客户端中的关注点分离与我们想要的有点不同，所以我们正在改变一些关于它的东西，但我们遇到了问题。

现在，客户端基本上有一个错误命名的`connect()`调用，它有效地驱动了与服务器的整个协议对话。调用从`connect()`创建一个`boost::asio::ip::tcp::resolver`对象并调用`::async_resolve()`它开始。这将启动一个链，在该链中`asio`从 asio 回调中进行新调用。

```
void connect()
{
    m_resolver.async_resolve( query, bind( &clientclass::resolve_callback, this ) );
    thread = new boost::thread( bind( &boost::asio::io_service::run, m_io_service ) );
}
void resolve_callback( error_code & e, resolver::iterator i )
{
    if (!e)
    { 
        tcp::endpoint = *i;
        m_socket.lowest_layer().async_connect(endpoint, bind(&clientclass::connect_callback,this,_1,++i));
    }
}
void connect_callback( error_code & e, resolve::iterator i )
{
    if (!e)
    { 
        m_socket.lowest_layer().async_handshake(boost::asio::ssl::stream_base::client,
            bind(&clientclass::handshake_callback,this,_1,++i));
    }
}
void handshake_callback( error_code &e )
{
    if (!e)
    {
        mesg = format_hello_message();
        http_send( mesg, bind(&clientlass::hello_resp_handler,this,_1,_2) );
    }
}
void http_send( stringstream & mesg, reply_handler handler )
{
    async_write(m_socket, m_request_buffer, bind(&clientclass::write_complete_callback,this,_1,handler));
}
void write_comlete_callback( error_code &e, reply_handler handler )
{
    if (!e)
    {
        async_read_until(m_socket,m_reply_buffer,"\r\n\r\n", bind(&clientclass::handle_reply,this,handler));
    }
}
... 
```

无论如何，这将通过协议继续进行，直到协议对话完成。从这里的代码你可以看到，当`connect()`在主线程上运行时，所有后续的回调和请求都返回到在`connect()`. 这是“工作”代码。

当我试图打破这个链并通过外部接口公开它时，它停止工作。特别是，我在对象`handle_handshake()`之外进行了调用。`clientclass`然后`http_send()`是接口的一部分（或被外部接口调用），它创建一个新的工作线程来调用 io_service::run()。发生的情况是即使`async_write()`已被调用并且即使`write_complete_callback()`没有返回， io_service::run() 也会退出。它没有错误地退出并声称没有调度任何处理程序，但还有“工作”要做吗？

所以我想知道`io_service::run()`“工作”的定义是什么？这是一个待处理的请求吗？为什么`io_service::run()`在现有代码中的这个请求和响应链中永远不会返回，但是当我尝试再次启动线程并启动新链时，它几乎在完成工作之前立即返回？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T00:15:41.523

调用上下文中的工作定义`run()`是对该 io_service 对象的任何未决异步操作。这包括调用处理程序以响应操作。因此，如果一个操作的处理程序启动另一个操作，则始终有可用的工作。

此外，还有一个`io_service::work`类可用于在 io_service 上创建工作，该工作在对象被销毁之前永远不会完成。

当单个链完成时，io_service 已完成所有异步操作，并且所有处理程序都已被调用而没有启动新操作，因此它返回。在您调用 之前`io_service::reset()`，进一步调用`run()`将返回而不执行任何操作。

# c++ - Code::Blocks Pre-build 选项与命令行（Qt）不一致

> ID：13058433
> 
> 赞同：1
> 
> 时间：2012-10-24T21:56:13.103
> 
> 标签：c++, qt, codeblocks

我正在尝试使用 Code::Blocks 编译一个简单的 Qt 程序。我正在使用 Qt 的构建系统，因此不是 Code::Blocks 编译它，而是将 Code::Blocks 的构建目标类型设置为“仅限命令”，并且我正在使用预/后构建步骤选项。我的“预构建步骤”的内容如下：

```
qmake.exe GUI.pro
C:/QtSDK/mingw/bin/mingw32-make.exe -f Makefile.Debug 
```

当我在 Code::Blocks 中编译时，出现以下错误：

```
c:\QtSDK\Desktop\Qt\4.8.1\mingw\lib/libqtmaind.a(qtmain_win.o): In function `WinMain@16':
c:\iwmake\build_mingw_opensource\src\winmain/qtmain_win.cpp:93: undefined reference to `_Unwind_Resume'
c:\iwmake\build_mingw_opensource\src\winmain/qtmain_win.cpp:135: undefined reference to `_Unwind_Resume'
c:\QtSDK\Desktop\Qt\4.8.1\mingw\lib/libqtmaind.a(qtmain_win.o):c:\iwmake\build_mingw_opensource\src\winmain/../../include/QtCore/../../src/corelib/tools/qvector.h:512: undefined reference to `_Unwind_Resume'
c:\QtSDK\Desktop\Qt\4.8.1\mingw\lib/libqtmaind.a(qtmain_win.o):c:\iwmake\build_mingw_opensource\src\winmain/../../include/QtCore/../../src/corelib/tools/qvector.h:513: undefined reference to `_Unwind_Resume'
c:\QtSDK\Desktop\Qt\4.8.1\mingw\lib/libqtmaind.a(qtmain_win.o):qtmain_win.cpp:(.eh_frame+0x12): undefined reference to `__gxx_personality_v0'
collect2: ld returned 1 exit status
mingw32-make.exe: *** [debug\GUI.exe] Error 1 
```

然而，奇怪的是，当我使用 Windows 命令行输入上面的两个命令时，它工作正常。它成功构建了一个可以工作并显示一个简单窗口的 .exe。

Code::Blocks 和命令行的构建日志都完全相同（我检查过），除了 Code::Blocks 的错误。

似乎 qmake 和 makefile 与此没有任何关系，或者至少在 makefile 不更改时发生上述情况。

我确保每次编译时都删除 Debug 中的 .o 和 .exe 文件。

Code::Blocks 和 cmd 都输出相同的 4 个文件（3 个 .o 文件和 1 个 .cpp 文件），除了 cmd 的 .exe。但是，我注意到一个文件在使用 Code::Blocks 编译时为 262kb，而在通过命令行编译时为 263kb。

在预构建步骤中，我尝试使用命令调用 cmd，并且尝试调用批处理文件，但出现了相同的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T06:01:55.423

Code::Blocks 使用它自己的 GCC 版本，而从命令行编译使用的是 Qt 的版本。看来我对 makefile 的工作方式有一个基本的误解。我想，因为我调用 Qt 的 MinGW make 它总是使用 Qt 的 MinGW 编译器。我猜不会。

在我将 Code::Blocks 的编译器更改为 Qt 的 GCC（设置 --> 编译器和调试器 --> 工具链可执行文件）后，它运行良好。

# java - 如何处理 orb 功能匹配？

> ID：13058435
> 
> 赞同：3
> 
> 时间：2012-10-24T21:56:21.753
> 
> 标签：java, android, opencv, computer-vision

我正在*Android*上*OpenCV*中的徽标检测应用程序中工作。我进行了很多搜索，发现大部分时间都为此目的使用特征检测。

 *所以我搜索并尝试了不同的检测器和匹配器，最后我编写了一个可以很好地与*ORBFeatureDetector*和*BruteForce 匹配器*配合使用的代码：

```
private DescriptorMatcher BruteMatcher = DescriptorMatcher.create(DescriptorMatcher.BRUTEFORCE_HAMMING); 
```

我找到了匹配的数量和最小距离以及良好匹配的数量，如下所示：

```
 List<DMatch> matches = mat_of_matches.toList();
        double max_dist =0, min_dist= 100;
        int row_count = matches.size();
        for(int i=0;i<row_count;i++)
        {
            double dist = matches.get(i).distance;
            //System.out.println("dist="+dist);
            if(dist<min_dist)min_dist = dist;
            if(dist>max_dist)max_dist = dist;

        }

       // Log.e("Max_dist,Min_dist", "Max="+max_dist+", Min="+min_dist);
        List<DMatch> good_matches = new ArrayList<DMatch>();

        double good_dist = 3*min_dist;

        for(int i =0;i<row_count; i++)
        {

            if(matches.get(i).distance<good_dist)
            {

                good_matches.add(matches.get(i));
                //Log.e("good_matches", "good_match_id="+matches.get(i).trainIdx);

            }

        } 
```

，最后我创建了一个像这样的阈值：

```
if(row_count>490&&good_matches.size()<60&&min_dist<12)logo_detected=true;
else logo_detected=false; 
```

问题是对于许多其他也处于访问阈值的事物，并且应用程序一直说检测到徽标。

我想知道我应该如何处理检测到的匹配特征？这是正确的做法（阈值）吗？还是我需要做其他事情来检测徽标？

请帮忙，谢谢。*

# c++ - 提高 dpll 算法的性能

> ID：13058438
> 
> 赞同：4
> 
> 时间：2012-10-24T21:56:26.887
> 
> 标签：c++, algorithm, recursion, sat-solvers, dpll

如[维基百科](http://en.wikipedia.org/wiki/DPLL_algorithm)中所述，我正在 C++ 中实现**DPLL**算法：

```
function DPLL(Φ)
   if Φ is a consistent set of literals
       then return true;
   if Φ contains an empty clause
       then return false;
   for every unit clause l in Φ
      Φ ← unit-propagate(l, Φ);
   for every literal l that occurs pure in Φ
      Φ ← pure-literal-assign(l, Φ);
   l ← choose-literal(Φ);
   return DPLL(Φ ∧ l) or DPLL(Φ ∧ not(l)); 
```

但表现糟糕。在这一步中：

```
return DPLL(Φ ∧ l) or DPLL(Φ ∧ not(l)); 
```

目前我试图避免创建副本，`Φ`而是添加`l`or`not(l)`到一个且唯一的副本，并在 /if的 return`Φ`时删除它们。这似乎破坏了给出错误结果的算法（即使集合是）。`DPLL()``false``UNSATISFIABLE``SATISFIABLE`

**有关如何在此步骤中避免显式复制的任何建议？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T06:30:39.810

一种不太天真的 DPLL 方法通过记录变量分配以及在单元传播和纯文字分配步骤中对子句所做的更改来避免复制公式，然后在产生空子句时撤消更改（回溯）。因此，当变量*x*被赋值为 true 时，您会将包含*x*的正字面量的所有子句标记为非活动的（并在此后忽略它们，因为它们已满足）并从包含它的所有子句中删除*-x 。*记录哪些子句中有*-x*，以便您以后回溯。出于同样的原因，还要记录您标记为非活动的子句。

另一种方法是跟踪每个未满足子句中未分配变量的数量。记录数字何时减少，以便您以后回溯。如果计数达到 1，则进行单元传播，如果数量达到 0 并且所有文字都为假，则回溯。

我在上面写了“不那么天真”，因为还有更好的方法。现代 DPLL 类型的 SAT 求解器使用称为“两个观察文字”的惰性子句更新方案，其优点是不需要从子句中删除文字，因此在发现错误分配时不需要恢复它们。变量赋值仍然需要记录和回溯，但不必更新与子句相关的结构使得两个观察文字比任何其他已知的 SAT 求解器回溯方案都更快。毫无疑问，您稍后会在课堂上了解这一点。

# html - 如何将这些左/右对齐的标签和表单输入页面居中？

> ID：13058440
> 
> 赞同：0
> 
> 时间：2012-10-24T21:56:35.837
> 
> 标签：html, css, user-interface, web, browser

我有[这组](http://jsfiddle.net/qP46X/970/)标签和文本输入（JsFiddle 链接）。

如何将整个内容置于页面中间？

我尝试将它们包装在一个 div 中并将它的对齐设置为 cetner - 根本没有达到我的预期。

任何帮助表示赞赏，比你。

参考代码：

```
<div>
<div class="left">
    label
</div>
<div class="right">
    input element
</div>
</div>

<div>
<div class="left">
    another label
</div>
<div class="right">
    another input element
</div>
</div>

//align the labels and input nicely

.left {
    width: 20%;
    float: left;
    text-align: right;
}
.right {
    width: 65%;
    margin-left: 10px;
    float:left;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T21:59:08.830

如果要使用浮点数，则需要将整个内容包装在 DIV 中并应用`margin: 0 auto;`

* * *

在这种情况下，我会这样做：

```
<style>
.field {
    width: 80%;
    margin: 0 auto; 
}
.left {
    width: 20%;
    text-align: right;
    display: block;
    float: left;
    margin-right: 5%;
}
</style>

<div class="field">
   <label class="left">label</label>
   <input type="text">
</div>

<div class="field">
   <label class="left">another label</label>
   <input type="text">
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T21:59:16.663

将整个东西包装在一个 div 中并设置

```
 margin: auto; 
```

还设置一个宽度，如果要使用该`text-align: center;`方法，则应将其应用于要居中的 div 的父 pf。

# plugins - 类似于富文本输入的电子邮件

> ID：13058441
> 
> 赞同：0
> 
> 时间：2012-10-24T21:56:42.807
> 
> 标签：plugins, input, rtf

如何实现类似文本区域输入的电子邮件？用户可以在哪里上传图片、格式化文本等。

就像您在这里提出问题一样，它可以让您选择格式化文本、输入 HTML 或添加图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T22:02:31.993

您可能希望使用众多免费提供的所见即所得编辑器之一。

几个比较流行的是：

*   CKEditor：[http ://ckeditor.com/](http://ckeditor.com/)
*   TinyMCE：[http ://www.tinymce.com/](http://www.tinymce.com/)

[您可以使用AlternativeTo](http://alternativeto.net/software/fckeditor/)探索替代方案。

如果您的用户技术含量更高，他们可能更喜欢 Markdown 语法。

# php - 为集合类型动态创建类型

> ID：13058442
> 
> 赞同：0
> 
> 时间：2012-10-24T21:56:46.077
> 
> 标签：php, symfony

是否可以动态创建 FormType 并避免手动创建新的表单类型类。

目前我必须这样做：

MyController.php

```
$builder = $this->createBuilder(new ParentEntity());
$builder
  ->add('parentfield1')
  ->add('parentfield2');
  ->add('children', 'collection', array('type' => new ChildType()); 
```

ChildType.php

```
class ChildType extends \Symfony\Component\Form\AbstractType {

    public function buildForm(FormBuilderInterface $builder, array $options) {
        $builder->add('childname1')
                ->add('childname2');
    }

    public function getDefaultOptions(array $options) {
        return array(
            'data_class' => 'ChildEntity',
        );
    }

    public function getName() {
        return 'childentity';
    }

} 
```

我想避免手动创建 ChildType 类，而是做这样的事情：

MyController.php

```
$childBuilder = $this->createBuilder(new ChildEntity());
$childBuilder
   ->add('childfield1')
   ->add('childfield2');

// how to create FormType from builder???
$childType = $childBuilder->??????;

$builder = $this->createBuilder(new ParentEntity());
$builder
  ->add('parentfield1')
  ->add('parentfield2');
  ->add('children', 'collection', array('type' => $childType); 
```

我试图通过以下方式获取类型：

```
$childBuilder->->getFormConfig()->getType(); 
```

但这没有用。我得到错误：

表单的视图数据应该是类 Namespace\Bundle\Entity\ChildEntity 的一个实例，但它是类 Doctrine\Common\Collections\ArrayCollection 的一个实例。您可以通过将“data_class”选项设置为 null 或添加将类 Doctrine\Common\Collections\ArrayCollection 的实例转换为 Namespace\Bundle\Entity\ChildEntity 的实例的视图转换器来避免此错误。

目前我想出的最好的方法是创建接受字段数组作为构造函数的自定义 FormType，但有更好的方法吗？

# svn - 如何通过 FTP 将多个多级（不同层次结构）文件从本地版本覆盖到在线版本

> ID：13058444
> 
> 赞同：2
> 
> 时间：2012-10-24T21:56:57.990
> 
> 标签：svn, version-control, ftp

我只是在本地更改了几个不同目录中的很多文件（然后将更改推送到 Subversion，但这不会更改实时版本，只是存储库）。现在我必须通过 FTP 更新这些文件，但它们都是不同的层次结构级别。

我怎么做？我知道的唯一方法是获取我的整个本地版本并替换在线版本，但这可能需要一些时间，而且它是一个实时站点......

寻找更快的方法...？我可以看到提交中更改的文件，然后将它们上传到 FTP 站点，而不必担心不同的层次结构级别。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T07:34:27.317

*   [svn 导出每个修订版更改的文件](http://thomasfischer.biz/?p=203)- Bash，1 个修订版
*   [ExportRevs](http://kurakin.info/files/exportrevs.zip) - Ruby，修订范围
*   [用于导出更改文件的 Subversion 命令行脚本](http://www.electrictoolbox.com/subversion-export-changed-files-cli/)- Bash，未经测试

* * *

*   [仅在版本之间导出 TortoiseSVN 中更改的文件](http://www.electrictoolbox.com/tortoisesvn-exporting-changed-files/)- GUI、Win-only、范围

# php - 如何确定在 Concrete5 中添加块的日期？

> ID：13058445
> 
> 赞同：0
> 
> 时间：2012-10-24T21:56:58.597
> 
> 标签：php, concrete5

`$block->getBlockDateAdded()`并且`$block->getBlockDateLastModified()`两者都返回相同的时间戳，即最后一次修改的时间戳（在我所有的测试中）。

这可能是因为对块 Concrete5 的每次修改都会创建一个新版本，因此`$block->getBlockDateAdded()`似乎返回添加特定版本的日期，这与上次修改相同。但是那有什么用呢？

更重要的是：有没有办法获得添加块的“真实”日期，意味着创建第一个版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T20:25:00.890

我认为这是不可能的，因为版本历史记录与集合（页面）一起保存，并且正如您所提到的，为每个新页面版本创建一个新的块记录。

查看数据库中的 CollectionVersionBlocks 表，我看不到任何可用于将一个块与先前版本相关联的键——因此无法通过 Collection Versions 回溯并查看块的第一次存在发生的位置（您可以根据块类型和区域进行猜测，但这不能确定，因为用户可能将其从一个区域移动到另一个区域，或者页面上可能有多个相同类型的块）。

编辑：我在论坛中找到了可能实现此目的的解决方案：

```
private function find_prev_bID($bID) {
    if (empty($bID)){
        return;
    }
    $db = Loader::db();
    $prev_bID = $db->GetOne( 'SELECT originalBID FROM BlockRelations WHERE bID = ? AND relationType = ?', array($bID, 'DUPLICATE') );
    return $prev_bID;
} 
```

# python - 嵌套列表索引

> ID：13058458
> 
> 赞同：12
> 
> 时间：2012-10-24T21:57:55.110
> 
> 标签：python, python-3.x

我在下面显示的代码中使用 Python 中的嵌套列表遇到了一些问题。

基本上，我有一个包含所有 0 值的二维列表，我想在循环中更新列表值。

但是，Python 不会产生我想要的结果。`range()`我对Python 列表索引有什么误解吗？

```
some_list = 4 * [(4 * [0])]
for i in range(3):
    for j in range(3):
        some_list[i+1][j+1] = 1
for i in range(4):
    print(some_list[i]) 
```

我预期的结果是：

```
[0, 0, 0, 0]
[0, 1, 1, 1]
[0, 1, 1, 1]
[0, 1, 1, 1] 
```

但是Python的实际结果是：

```
[0, 1, 1, 1]
[0, 1, 1, 1]
[0, 1, 1, 1]
[0, 1, 1, 1] 
```

这里发生了什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-24T22:28:33.030

问题是由于 python 选择通过引用传递列表这一事实引起的。

通常变量是“按值”传递的，因此它们独立运行：

```
>>> a = 1
>>> b = a
>>> a = 2
>>> print b
1 
```

但是由于列表可能会变得非常大，而不是在内存中移动整个列表，Python 选择只使用引用（C 术语中的“指针”）。如果您将一个分配给另一个变量，您只需分配对它的引用。这意味着您可以有两个变量指向内存中的同一个列表：

```
>>> a = [1]
>>> b = a
>>> a[0] = 2
>>> print b
[2] 
```

因此，在您的第一行代码中，您拥有`4 * [0]`. Now`[0]`是一个指向内存中值 0 的指针，当你将它相乘时，你会得到四个指向内存中相同位置的指针。但是，当您更改其中一个值时，Python 知道指针需要更改以指向新值：

```
>>> a = 4 * [0]
>>> a
[0, 0, 0, 0]
>>> [id(v) for v in a]
[33302480, 33302480, 33302480, 33302480]
>>> a[0] = 1
>>> a
[1, 0, 0, 0] 
```

当你将这个列表相乘时，问题就来了——你得到了列表指针的四个副本。现在，当您更改一个列表中的一个值时，所有四个都会一起更改：

```
>>> a[0][0] = 1
>>> a
[[1, 0, 0, 0], [1, 0, 0, 0], [1, 0, 0, 0], [1, 0, 0, 0]] 
```

解决方案是避免第二次乘法。循环完成这项工作：

```
>>> some_list = [(4 * [0]) for _ in range(4)] 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-24T21:59:45.223

实际上，列表中的所有对象都是相同的，因此更改一个对象也会改变其他对象：

```
In [151]: some_list = 4 * [(4 * [0])]  

In [152]: [id(x) for x in some_list]
Out[152]: [148641452, 148641452, 148641452, 148641452]

In [160]: some_list[0][1]=5  #you think you changed the list at index 0 here

In [161]: some_list
Out[161]: [[0, 5, 0, 0], [0, 5, 0, 0], [0, 5, 0, 0], [0, 5, 0, 0]]  #but all lists are changed 
```

以这种方式创建您的列表：

```
In [156]: some_list=[[0]*4 for _ in range(4)]

In [157]: some_list
Out[157]: [[0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0]]

In [158]: [id(x) for x in some_list]
Out[158]: [148255436, 148695180, 148258380, 148255852]

In [163]: some_list[0][1]=5

In [164]: some_list
Out[164]: [[0, 5, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0]]  #works fine in this case 
```

# orchardcms - 果园添加登录为菜单项

> ID：13058465
> 
> 赞同：1
> 
> 时间：2012-10-24T21:58:57.070
> 
> 标签：orchardcms, menuitem

我正在尝试将新项目添加到主菜单，这将是登录/唱出操作。管理页面不提供添加条件登录/注销链接的可能性。我找到了一个解决方案，我在 Menu.cshtml 中添加了另一个带有登录/唱出条件的 li 标签。但我认为应该有更好的解决方案来做到这一点，这就是我所要求的。

# redirect - IIS 7 重写规则 - 基于查询字符串的存在重定向

> ID：13058473
> 
> 赞同：2
> 
> 时间：2012-10-24T21:59:18.120
> 
> 标签：redirect, iis-7, web-config

是否可以根据最初请求的 URL 中存在的查询字符串使用 web.config 进行重定向？我不确定条件中包含什么。我是在 web.config 中使用重写/重定向规则的初学者，想了解更多关于语法、参数等的信息。

我正在尝试做这样的事情：

```
<rewrite>
<rules>

<rule name="Restricted Folder with Querystring" stopProcessing="true">
<match url="^test folder/(.*)" ignoreCase="false" />

    <conditions>
    <!--redirect to a certain page if a certain querystring is present -->
    </conditions>             
<action type="Redirect" redirectType="Permanent" url="/test folder/{R:1}" />
</rule>

<rule name="Restricted Folder without Querystring" stopProcessing="true">
<match url="^test folder/(.*)" ignoreCase="false" />              
    <conditions>
    <!--redirect to another page if querystring is not present -->
    </conditions>             
<action type="Redirect" redirectType="Permanent" url="https://www.whatever.com/page.asp?url={R:1}" />
</rule>

</rules>
</rewrite> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-18T18:32:10.543

deeholzman，我相信您的条件 - 添加输入示例您想使用“模式”而不是“匹配类型”。前任：

```
<add input="{QUERY_STRING}" pattern="^whateverpattern"  /> 
```

或者

```
<add input="{QUERY_STRING}" pattern="^whateverpattern" negate="true" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T18:05:36.403

[我在URL Rewrite Module Configuration Reference](http://www.iis.net/learn/extensions/url-rewrite-module/url-rewrite-module-configuration-reference)中找到了答案。在您要从中执行重定向的任何文件夹中的 web.config 的 rewrite 部分中，它将如下所示：

```
<rules>
    <rule name="Restricted Folder Gimbal" stopProcessing="false">
      <match url="(.*)"  ignoreCase="true" />
      <conditions>
         <add input="{QUERY_STRING}" pattern="^whateverpattern"  />
      </conditions>
      <action type="Redirect" redirectType="Permanent" url="http://www.whatever.com/file.html" />
    </rule>     
  </rules> 
```

对于不存在的查询字符串，您可以将 'negate' 参数添加到条件中：

```
 <add input="{QUERY_STRING}" pattern="^whateverpattern"  negate="true" /> 
```

[URL Rewrite Module Configuration Reference](http://www.iis.net/learn/extensions/url-rewrite-module/url-rewrite-module-configuration-reference)是一个非常方便的参考，不幸的是，它花费的时间比预期的要长。

# taglib-sharp - TagLib 缺少视频元数据属性？

> ID：13058474
> 
> 赞同：1
> 
> 时间：2012-10-24T21:59:24.930
> 
> 标签：taglib-sharp

我一直在尝试设置 mp4 的扩展属性，例如 Director 和 Publisher，但是当我浏览 Visual Studio 给我的 File.Tag 建议时，找不到这些属性。也许我只是使用了一个糟糕的库或其他东西，或者有人可以确认 TagLib 不支持这些吗？

但是，我确实收到了有关与专辑和表演者等音频文件相关的 File.Tag 属性的建议。也许它只显示 mp4 的音频属性？你能以某种方式切换到视频/电影吗？

我从这里使用 Windows 版本：http: [//download.banshee.fm/taglib-sharp/2.1.0.0/](http://download.banshee.fm/taglib-sharp/2.1.0.0/)。只是将 dll 放到我的项目目录中，然后在 VC# 中加载它。

# c++ - 参数构造函数调用调用

> ID：13058478
> 
> 赞同：2
> 
> 时间：2012-10-24T21:59:39.193
> 
> 标签：c++, constructor

我对此有些疑惑。当默认堆栈分配的对象构造被允许作为其他结构的成员变量时，为什么不参数化构造？Most Vexing [Parse](http://en.wikipedia.org/wiki/Most_vexing_parse)与此有关吗？我也在 ideone 上尝试了 C++0X 并得到了相同的结果。

```
struct foo{
    foo() {}
    foo(int i) {}
};

struct bar{
  foo obj;      // Allowed
  foo obj2(10); // Not Allowed
}; 
```

> 错误：数字常量前应为“，”或“...”

[IdeOne 演示](http://ideone.com/99BXPq)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T22:02:38.057

您对 Most Vexing Parse 的链接讨论了非成员变量（不是类/结构成员的变量）的实例化。您展示的示例是在结构中声明的成员变量；您通常会在构造函数中对其进行初始化

```
struct bar
{
    foo obj;
    foo obj2;
    bar() : obj2(10) {}
}; 
```

Most Vexing Parse 问题出现在以下情况：

```
struct baz
{
    baz(int n) {}
};

void foo()
{
    baz meow(int());
} 
```

由于链接中描述的“最令人头疼的解析”问题，标识符`meow`似乎是 type 的函数声明。`baz (int)`（乍一看似乎是默认初始化的**int()**`int`实际上只是数据类型）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T22:01:29.360

写

```
struct bar {
  foo obj;
  foo obj2;
  foo(): obj2(10) {}
} 
```

这样，在实例化 时`bar`，`obj2`将使用 10 进行构造。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T22:04:27.443

在 C++11 之前，您不能在声明中初始化成员，除非它们是`static const`完整的。

在 C++11 中，您可以使用统一初始化和类内成员初始化：

```
foo obj2{10}; 
```

由于构造函数不是显式的，您也可以这样做：

```
foo obj2 = 10; 
```

不在 C++11 中，您必须在构造函数列表中使用成员初始值设定项。

# html - CSS 导航栏太长

> ID：13058481
> 
> 赞同：0
> 
> 时间：2012-10-24T21:59:44.087
> 
> 标签：html, css, wordpress

我在一个网站上对这个网站标题大惊小怪了一段时间。这是一个 WordPress 网站。标题导航栏与主要博客条目相距太远。我尝试过改变很多东西，但它们都会导致其他问题。

我尝试将宽度从 100% 减小并设置边距，但是当网站调整大小或显示在较小的屏幕上时，这会产生问题。

我曾尝试将其居中，但会导致同样的问题。

这是我下面的问题。白色的导航栏太突出了。

（我已经删除了一些似乎对阅读没有帮助的代码）

![我的问题](../Images/48ba3afc376785612b9f4896065533ca.png)

这是控制菜单背景的css代码

```
#menu_background {
    width:100%; text-align:right; padding:10px 0; 
    margin-bottom:15px; /* for IE */ filter:alpha(opacity=95); /* CSS3 standard */
    opacity:0.95;z-index:300; box-shadow: 0px 1px 2px rgba(0,0,0,0.07);
    -moz-box-shadow: 0px 1px 2px rgba(0,0,0,0.07); 
    -webkit-box-shadow: 0px 1px 2px rgba(0,0,0,0.07);
} 
```

这是主要部分的html，我删除了代码只是让它更短。它不在任何其他 div 中。

```
<div id="menu_background">
</div><!--#menu_background--> 
```

# c# - 长时间停顿的并行任务

> ID：13058486
> 
> 赞同：2
> 
> 时间：2012-10-24T22:00:18.860
> 
> 标签：c#, multithreading, parallel-processing, task-parallel-library

我有一个功能是

```
 private void DoSomethingToFeed(IFeed feed)
   {
      feed.SendData(); // Send data to remote server
      Thread.Sleep(1000 * 60 * 5); // Sleep 5 minutes
      feed.GetResults(); // Get data from remote server after it's processed it
   } 
```

我想将此并行化，因为我有很多相互独立的提要。基于[这个答案](https://stackoverflow.com/a/6195821/298754)，把它留`Thread.Sleep()`在里面并不是一个好主意。我还想在所有线程都启动后等待，直到它们都有机会获得结果。

处理这种情况的最佳方法是什么？

**编辑，因为我不小心遗漏了它：**我最初考虑将此函数称为`Parallel.ForEach(feeds, DoSomethingToFeed)`，但是当我找到链接到的答案时，我想知道是否有更好的方法来处理睡眠。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T22:04:12.353

我认为你应该看看[`Task`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.aspx).NET 中的类。它是更底层线程/线程池管理之上的一个很好的抽象。

为了等待所有任务完成，您可以使用[`Task.WaitAll`](http://msdn.microsoft.com/en-us/library/dd270695.aspx).

使用 s 的示例`Task`可能如下所示：

```
IFeed feedOne = new SomeFeed();
IFeed feedTwo = new SomeFeed();

var t1 = Task.Factory.StartNew(() => { feedOne.SendData(); });

var t2 = Task.Factory.StartNew(() => { feedTwo.SendData(); });

// Waits for all provided tasks to finish execution
Task.WaitAll(t1, t2); 
```

但是，另一种解决方案将使用`Parallel.ForEach`它为您处理所有`Task`创建并执行适当的任务批处理。[这里](https://stackoverflow.com/a/5009224/700926)给出了这两种方法的一个很好的比较- 其中，除其他优点外，它指出：

> Parallel.ForEach 在内部使用 Partitioner 将您的集合分配到工作项中。它不会对每个项目执行一项任务，而是将其批处理以降低所涉及的开销。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T22:22:04.837

除非你有很多线程，否则你可以保持简单。创建所有线程。您将获得一些线程创建开销，但由于线程基本上一直处于休眠状态，因此您不会获得太多的上下文切换。

它比任何其他解决方案都更容易编码（除非您使用的是 C# 5）。所以从那开始，只有当你真正看到性能问题时才改进它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T22:04:28.210

检查[WaitHandle](http://msdn.microsoft.com/en-us/library/system.threading.waithandle.aspx)等待任务。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-24T22:35:05.677

```
private void DoSomethingToFeed(IFeed feed)
{
    Task.Factory.StartNew(() => feed.SendData())
        .ContinueWith(_ => Delay(1000 * 60 * 5)
                          .ContinueWith(__ => feed.GetResults())
                     );
}

//http://stevenhollidge.blogspot.com/2012/06/async-taskdelay.html
Task Delay(int milliseconds)      
{
    var tcs = new TaskCompletionSource<object>();
    new System.Threading.Timer(_ => tcs.SetResult(null)).Change(milliseconds, -1);
    return tcs.Task;
} 
```

# linux - Github 提交和问题通知器 Linux

> ID：13058488
> 
> 赞同：3
> 
> 时间：2012-10-24T22:00:25.010
> 
> 标签：linux, ubuntu, github

我知道有很多 bash 脚本和应用程序可以触发 github 上提交的桌面通知，但是是否有任何应用程序或 bash 脚本可以通知您提交**和**新问题（和评论） ?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T06:13:49.113

它似乎不是直接可用的，但您可以采用与[GitHub-Notifier](https://github.com/sindresorhus/GitHub-Notifier)项目类似的方法，并 grepping[问题](https://github.com/blog/941-issues-dashboard)仪表板的内容以生成通知。

![问题仪表板](../Images/e44792be73a63e7c32fdf6adcf335b11.png)

（或者在问题上调用/轮询[Github V3 API](http://developer.github.com/v3/issues/)）

# java - GAE - 谷歌云存储 - 上传错误 503

> ID：13058489
> 
> 赞同：0
> 
> 时间：2012-10-24T22:00:40.920
> 
> 标签：java, google-app-engine, jsp, servlets, google-cloud-storage

我在我的jsp中得到了以下代码

```
<%@ page import="com.google.appengine.api.blobstore.BlobstoreServiceFactory" %>
<%@ page import="com.google.appengine.api.blobstore.BlobstoreService" %>
<%@ page import="com.google.appengine.api.blobstore.UploadOptions" %>
<%
BlobstoreService blobstoreService = BlobstoreServiceFactory.getBlobstoreService();

String uploadUrl = blobstoreService.createUploadUrl("/test.jsp", UploadOptions.Builder.withGoogleStorageBucketName("my_bucket"));

%>

<%@ page language="java" contentType="text/html; charset=ISO-8859-1" pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Upload Page</title>
</head>
<body>
    <h1>Upload v1</h1>
    <form name="form1" id="form1" action="<% out.print(uploadUrl); %>" method="post" enctype="multipart/form-data" target="upload_iframe">
    <input type="hidden" name="hiddenfield1" value="ok">
    Files to upload:
    <br/>
    <input type="file" name="myFile">
    <br/>
        <button type="submit">Send</button>
    </form>
    <iframe id="upload_iframe" name="upload_iframe"></iframe>

</body>

</html> 
```

我也把我的桶放在公开的地方，如下所示：

```
python c:\gsutil\gsutil setacl public-read gs://my_bucket 
```

我的 ACL 文件如下所示：

```
<?xml version="1.0" ?>
<AccessControlList>
    <Owner>
        <ID>00b4903a97dfaa16aff41eeb91e90b5fb524f1daf0d88fceca29b6f647412e8d</ID>
    </Owner>
    <Entries>
        <Entry>
            <Scope type="GroupById">
                <ID>00b4903a97dfaa16aff41eeb91e90b5fb524f1daf0d88fceca29b6f647412e8d</ID>
            </Scope>
            <Permission>FULL_CONTROL</Permission>
        </Entry>
        <Entry>
            <Scope type="GroupById">
                <ID>00b4903a97d3721750cd84cf5e8be336cba9847dba5c2e4a1e88aa514db970d2</ID>
            </Scope>
            <Permission>FULL_CONTROL</Permission>
        </Entry>
        <Entry>
            <Scope type="GroupById">
                <ID>00b4903a97c265aa840305b07236a7ea78681916c9e63ab74c0deb237f60f05e</ID>
            </Scope>
            <Permission>READ</Permission>
        </Entry>

<Entry>
   <Scope type="UserByEmail">
      <EmailAddress>
         my_app@appspot.gserviceaccount.com
      </EmailAddress>
   </Scope>
   <Permission>
      WRITE
   </Permission>
 </Entry>

    </Entries>
</AccessControlList> 
```

现在每次我上传我都会收到一个错误：`503 Service Unavailable`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T23:02:47.030

好的，我终于解决了，

错误是这样做的：

```
python c:\gsutil\gsutil setacl public-read gs://my_bucket 
```

实际上删除了 acl 文件，因此删除了 my_app@... 权限：/

# asp.net - 扩展 asp.net 会员数据库

> ID：13058492
> 
> 赞同：0
> 
> 时间：2012-10-24T22:01:02.450
> 
> 标签：asp.net, .net, database-design, architecture

我正在构建一个新的基于 asp.net 网络表单的系统。我想使用会员数据库作为我的身份存储。我可以使用会员数据库并开始添加我自己的系统表，但我认为将它们分开，意味着会员数据库是独立的，然后我必须从我的数据库中建立一个链接，其中包含一些映射用户表到会员用户。是同步两个 DBS 的自动方式，或者您有其他解决方案。

提前致谢 ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T22:49:46.580

您应该有 1 个数据库。创建一个空数据库。运行 aspnet_regsql.exe 工具。添加您自己的表格。

# clojure - 尝试 cons 和 reduce 时，clojure 中的 IllegalArguementException

> ID：13058496
> 
> 赞同：4
> 
> 时间：2012-10-24T22:01:14.757
> 
> 标签：clojure

`IllegalArgumentException Don't know how to create ISeq from: java.lang.Long clojure.lang.RT.seqFrom (RT.java:487)`执行以下代码时出现错误：

```
(defn phrase-length [phr]
    (loop [n 0 b () s ()]
      (if (= n (count phr))
        (concat #(reduce + b) #(reduce + s))
        (recur (inc n)
               (cons (nth (nth (nth phr n) 1) 0) b)
               (cons (nth (nth (nth phr n) 1) 1) s))))) 
```

错误发生在`concat`. 它必须是试图减少同时也连接的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T06:10:03.153

您正在尝试连接`#(reduce + b)`和`#(reduce + s)`. 这不起作用，`#(reduce + b)`扩展为`(fn* [] (clojure.core/reduce clojure.core/+ your-namespace/b))`. 你不能连接函数。也许你的意思是`(reduce + b)`，但这也没有任何意义，因为结果是一个数字，你也不能连接数字。也许您的意思是 `[(reduce + b) (reduce + s)]`或`(map + b s)`或，`(+ (reduce + b) (reduce + s))`但我只能在不知道您实际想要达到的目标的情况下在这里盲目猜测。

这些行：

```
 (cons (nth (nth (nth phr n) 1) 0) b)
           (cons (nth (nth (nth phr n) 1) 1) s) 
```

也很奇怪。phr 是 seq of seqs of seqs of longs 吗？

你的收藏是这个表格`[[[0 0 ,,,] [0 1 ,,,] ,,,] ,,,]`吗（你会在这里用 0 到 b 和 1 到 s）？如果是这样，您可能应该编写用于访问这些值的函数，因为找出发生了什么是一件苦差事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T23:16:55.393

[nth](http://clojure.github.com/clojure/clojure.core-api.html#clojure.core/nth)返回一个值。

当你这样做`(cons (nth (nth (nth phr n) 1) 0) b)`时，在评估之后`(nth phr n)`你将`nth`在一个值中应用下一个，而不是在 Seq 中。

用类似的东西测试你的代码`(phrase-length "123")`会引发你得到的错误。

# asp.net - 我们可以在 WCF 中拥有没有数据合同的操作合同吗？

> ID：13058504
> 
> 赞同：0
> 
> 时间：2012-10-24T22:02:04.947
> 
> 标签：asp.net, asp.net-mvc, wcf, wcf-data-services

当我们创建 WCF 服务时，我们有 SrviceContract（接口）、OperationContract（方法）和 DataContract（类类型）。

我想知道我们是否可以在没有 DataContract 的情况下拥有 OperationContract。如果是，任何示例都会有很大帮助。

珍惜你的时间。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T22:10:54.623

该`DataContract`属性仅表示将在您的服务中的签名中使用的类。因此，如果您的服务不需要引用您的任何类，那么您将不会在`DataContract`任何地方拥有属性。

例如，如果您只有接受和返回原始类型（如字符串或数字）的方法，那么您不必定义任何自己的类。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T22:13:17.460

我不知道你为什么想要这个，但如果你只返回和/或传递原语和可空值（字符串、日期、int？s 等）和相同的列表/数组，你就不需要创建任何数据合同。您要传递的任何结构化数据都需要 DataContract 属性，否则将引发异常。

所以，一些可行的例子是......

```
[ServiceContract]
public interface ISimpleContract
{
    [OperationContract] void DoSomething();
    [OperationContract] int GetNumber();
    [OperationContract] string GetStatus(int userId);
    [OperationContract] string[] GetCodes(int? byDepartment);
    [OperationContract] List<int> GetNumberOfStrings(string[] strings); 
} 
```

# git - Jenkins：捕获 git commit 消息

> ID：13058505
> 
> 赞同：1
> 
> 时间：2012-10-24T22:02:10.857
> 
> 标签：git, jenkins, jenkins-plugins, commit-message

> **可能重复：**
> [在 Jenkins 中访问 Build Changelog](https://stackoverflow.com/questions/11823826/get-access-to-build-changelog-in-jenkins)

我们有一个 Jenkins CI 服务器设置，它正在执行 ruby​​motion testflight 构建。Rubymotion 允许将消息作为该构建上的“注释”发送到 testflight。我们有兴趣捕获 git commit 消息并将其传递给 rake testflight 任务。

是否有可以在全局变量中捕获提交消息的 Jenkins 插件？

# backbone.js - Backbone.js 多次触发集合更改事件

> ID：13058509
> 
> 赞同：2
> 
> 时间：2012-10-24T22:02:21.917
> 
> 标签：backbone.js, backbone-events

在 Backbone.js 视图之一中，我正在使用`this.model.set( { read: true } );`. 我验证了这个命令只执行一次（我知道“鬼事件”）。正如您在下面看到的，我将 Collection 配置为触发一个更新事件，在该事件中，整个 Collection 被保存到一个变量中。不幸的是，该`saveToVar`函数被调用了 3 次而不是 1 次！此外，第一次`saveToVar`被调用，`this`正确地包含所有集合的模型，而第二次和第三次`this`只有一个模型，即我进行更新的那个。我逐个追踪所有内容，但我不知道为什么会发生这种情况。

```
window.Message = Backbone.Model.extend({

});

window.MessageCollection = Backbone.Collection.extend({

model: Message,

initialize: function()
{
    this.on("change", this.saveToVar);
},

saveToVar: function(e)
{
    App.Data.Messages = this.toJSON();
    return;
}

}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T23:26:50.057

在您的 jsfiddle 中，您正在执行以下操作：

```
App.Collections.message = new MessageCollection([ ... ]);
var elements = App.Collections.message.where({ id: 4 });
var item = new MessageCollection(elements); 
```

您的[`where`](http://backbonejs.org/#Collection-where)调用将返回`message`集合中的模型，而不是这些模型的副本，而是返回与`message`. 现在您有两个对`id: 4`模型的引用：

1.  原来一个埋在里面`App.Collections.message`。
2.  中的那个`elements[0]`。

这两个引用都指向同一个对象。然后你添加`elements`到另一个`MessageCollection`. 现在你有这样的东西：

```
App.Collections.message.models[3]    item.models[0]
                               |                 |
                               +--> [{id: 4}] <--+ 
```

这两个集合都将收到有关`id: 4`模型更改事件的通知，因为[集合侦听其成员上的所有事件](http://backbonejs.org/#Collection)：

> 为方便起见，在集合中的模型上触发的任何事件也将直接在集合上触发。

您的集合本身会监听`"change"`事件：

```
initialize: function()
{
    this.on("change", this.saveToVar);
} 
```

所以当你这样做时：

```
this.model.set({ read: true }); 
```

在您看来，这两个集合都会收到通知，因为该模型恰好在两个集合中。

如果我们将您的事件处理程序更改为如下所示：

```
saveToVar: function() {
    console.log(_(this.models).pluck('cid'));
} 
```

然后您会看到相同的`cid`（Backbone 生成的唯一标识符）出现在两个集合中。您还可以为每个集合附加一个随机数，看看您得到了什么：http `saveToVar`: [//jsfiddle.net/ambiguous/mJvJJ/1/](http://jsfiddle.net/ambiguous/mJvJJ/1/)

您可能不应该在两个系列中拥有一个模型。您可能不应该有两个相同模型的副本，因此`elements[0]`在创建之前进行克隆`item`也可能不是一个好主意。您可能需要重新考虑您的架构。

# iphone - 查看 NSString drawInRect 将使用多少行的简单方法？

> ID：13058512
> 
> 赞同：1
> 
> 时间：2012-10-24T22:02:34.040
> 
> 标签：iphone, ios, uiview, nsstring, drawrect

一直在四处寻找，但无法在这里找到答案：

`drawInRect`有没有一种简单的方法来计算/查看使用 NSString 的方法（在子类 UIView 的方法中）将产生多少行文本`drawRect`。

例如在以下片段中：

```
 [self.text drawInRect:titleRect withFont:[UIFont systemFontOfSize:15.] lineBreakMode:UILineBreakModeWordWrap alignment:UITextAlignmentCenter]; 
```

我将如何计算这里将产生多少行文本？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T22:06:13.147

使用`NSString sizeWithFont:constrainedToSize:lineBreakMode:`方法确定大小。您传入的 CGSize 应该具有所需的宽度和非常高的高度值。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-10-24T22:28:15.150

我最终得到了一些自定义计算，因为 sizeWithFont 不能正确使用自定义字体。一些粗略但有效的方法：

```
NSString *text = post.content;
int cntLB = [[text componentsSeparatedByCharactersInSet:[NSCharacterSet newlineCharacterSet]] count];
int numLines = [text length]/38+cntLB/2; 
```

其中 38 es 一些阈值参数取决于文本和 cntLB/2 是指双 \r\n 字符。

# r - 识别有问题的数据类型的功能

> ID：13058515
> 
> 赞同：1
> 
> 时间：2012-10-24T22:02:43.497
> 
> 标签：r

我刚刚花了几个小时调试一些 R 代码，却发现错误是由于`Inf`在我的计算过程中潜入的。我检查过`NA`，但没想过检查`Inf`。

我编写了以下函数来帮助防止将来出现这种情况：

```
is.bad <- function(x){
  is.na(x) | is.nan(x) | is.infinite(x)
}

>     is.bad(c(NA, NaN, Inf, -Inf, 0, 1, 1000, 1e6))
[1]  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE 
```

RI 中是否还有其他特殊数据类型需要注意？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T22:56:59.567

`!is.finite(x)`相当于你的`is.bad(x)`; 它检测`Inf`(and `-Inf`) `NA`、 和`NaN`值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T22:15:45.367

这有点取决于你想要做什么。我最近在为一堆数据子集创建线性模型时遇到了类似的问题。在可能的情况下获得系数对我有用，而 NA 而不是程序停止错误消息是：

```
Coef <- ifelse(is.numeric(try(coef(lm(y~x, data=DF)), silent=T)), coef(lm(y~x+0, DF)), NA) 
```

所以我会得到一个向量

```
 [1] 2.3 4.3 5.4 6.2 2.8 NA 3.2 
```

适当间隔，而不是错误消息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T22:08:05.990

根据您正在做的事情，`is.null()`可能在某些时候还可以为您节省大量时间。一般很难说。

# hash - 推荐一个哈希算法

> ID：13058516
> 
> 赞同：0
> 
> 时间：2012-10-24T22:02:50.797
> 
> 标签：hash, wolfram-mathematica

有人可以为我推荐一个哈希算法吗？

对于文件A和B，如果我将它们连接到C中，我需要一个函数来从Hash（A）和Hash（B）计算Hash（C），即

哈希（C）= func（哈希（A），哈希（B））

可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T22:11:44.040

一个简单的校验和应该符合您的标准。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T22:14:37.567

任何不依赖于输入数据*顺序*的算法都会给你你想要的。例如，所有字节的简单 XOR，或所有这些字节的 32 位翻转相加。

这不一定是一个*好的*算法，它取决于你使用它的目的。

# c# - 对子类的子类使用鉴别器

> ID：13058518
> 
> 赞同：5
> 
> 时间：2012-10-24T22:02:59.623
> 
> 标签：c#, fluent-nhibernate

问题似乎很笼统，但我是 fluentnhibernate 的新手，我的所有搜索都没有找到任何有用的东西。

我有一个类似于这个的类层次结构：

```
public class Person
{
    public virtual int Id { get; protected set; }
    public virtual string GivenName { get; set; }
    public virtual string FamilyName { get; set; }
}

public class Employee : Person
{
    public virtual string WhoAmI { get { return "I am just an Employee"; } protected set { } }
} 

public class Boss : Employee
{
    public override string WhoAmI { get { return "I am the boss."; } protected set { } }
} 
```

即一个基类和两个子类（一个派生自另一个）。子类具有相同的签名，但基类没有。

下面的映射会将有关三个类的实例的所有信息放入同一个表中：

```
public class PersonMap : ClassMap<Person>
{
    public PersonMap()
    {
        Id(x => x.Id);
        Map(x => x.GivenName);
        Map(x => x.FamilyName);
        DiscriminateSubClassesOnColumn("type");
    }
}

public class EmployeeMap : SubclassMap<Employee>
{
    public EmployeeMap()
    {
        Map(x => x.WhoAmI);
    }
}

public class BossMap : SubclassMap<Boss>
{
    public BossMap()
    {
    }
} 
```

省略 DiscriminateSubClassesOnColumn 将生成三个表：

```
public class PersonMap : ClassMap<Person>
{
    public PersonMap()
    {
        Id(x => x.Id);
        Map(x => x.GivenName);
        Map(x => x.FamilyName);
    }
}

public class EmployeeMap : SubclassMap<Employee>
{
    public EmployeeMap()
    {
        Map(x => x.WhoAmI);
    }
}

public class BossMap : SubclassMap<Boss>
{
    public BossMap()
    {
    }
} 
```

我的问题：是否有可能（在fluentnhibernate中）将这些类映射到两个表中，即有

*   一个包含从 Person 类派生的所有属性的 Person 表，以及
*   一个包含所有从 Employee 类派生的属性的 Employee 表，以及一个区分普通员工和老板的鉴别器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T22:10:06.490

如果您只是将 BossMap 别名为 EmployeeMap：

```
public class BossMap : EmployeeMap {} 
```

你应该得到你需要的映射。

# svn - 在 SVN 存储库中搜索 office 文档的工具

> ID：13058519
> 
> 赞同：3
> 
> 时间：2012-10-24T22:03:00.187
> 
> 标签：svn, search, lucene, indexing, ms-office

我在 subversion 存储库中存储的不仅仅是源代码。我想要一个处理 doc、doxc、xls、xlsx、pdf 等的搜索工具……就像[VoilaSVN](http://arcetis.voilasvn.com/main/EN/products.html)所做的那样，但是它似乎已经从地球的尽头消失了？

强制检查整个 repo 并使用本地（对 PC）搜索索引器是一种选择，但由于 repo 的大小，它是不切实际的。这也有一个缺点，它只会提供工作副本所在的 SVN 版本的结果。

是否有任何工具使用诸如 Lucene 之类的东西来索引 SVN 中的纯文本？我更喜欢开源，但我会考虑专有解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T09:21:09.177

[SupoSE](http://www.supose.org/projects/supose/wiki)就是一个这样的工具——不过我没有对其进行太多测试

# xamarin.ios - 这是 MonoTouch GC 中的错误吗？

> ID：13058521
> 
> 赞同：33
> 
> 时间：2012-10-24T22:03:03.433
> 
> 标签：xamarin.ios, garbage-collection, xamarin

> 注意：[我创建了一个简单的项目](http://dl.dropbox.com/u/76095045/MTMemoryTest.zip)——你可以看到在 storyboard 之间`UIButton`和里面切换类型是如何`CustomButton`改变 GC 行为的。

我正试图让我的头脑围绕 MonoTouch 垃圾收集器。
该问题类似于[MT 4.0 中修复](https://stackoverflow.com/q/4902967/458193)的问题，但具有继承的类型。

为了说明这一点，考虑两个视图控制器，父级和子级。

子视图包含一个`UIButton`在点击时写入控制台的单一视图。
Controller 的`Dispose`方法会抛出异常，因此很难错过。

这是子视图控制器：

```
public override void ViewDidLoad ()
{
    base.ViewDidLoad ();

    sayHiButton.TouchUpInside += (sender, e) =>
        SayHi();
    }
}

void SayHi()
{
    Console.WriteLine("Hi");
}

protected override void Dispose (bool disposing)
{
    throw new Exception("Hey! I've just been collected.");
    base.Dispose (disposing);
} 
```

父视图控制器只是呈现子控制器并设置一个计时器来关闭它并运行 GC：

```
public override void ViewDidLoad ()
{
    base.ViewDidLoad ();

    var child = (ChildViewController)Storyboard.InstantiateViewController("ChildViewController");

    NSTimer.CreateScheduledTimer(2, () => {
        DismissViewController(false, null);
        GC.Collect();
    });

    PresentViewController(child, false, null);
} 
```

如果您运行此代码，它可以预见地在`ChildViewController.Dispose()`从其终结器调用的内部崩溃，因为子控制器已被垃圾收集。凉爽的。

现在打开故事板并将按钮类型更改为`CustomButton`. MonoDevelop 将生成一个简单的`UIButton`子类：

```
[Register ("CustomButton")]
public partial class CustomButton : UIButton
{
    public CoolButton (IntPtr handle) : base (handle)
    {
    }

    void ReleaseDesignerOutlets()
    {
    }
} 
```

不知何故，将按钮类型更改`CustomButton`为足以欺骗垃圾收集器认为子控制器尚不符合收集条件。

怎么会这样？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-10-24T23:00:36.897

这是 MonoTouch（垃圾回收者）不得不生活在引用计数世界（ObjectiveC）中的一个不幸的副作用。

要了解正在发生的事情，需要一些信息：

*   对于每个托管对象（从 NSObject 派生），都有一个对应的本地对象。
*   对于自定义托管类（从 UIButton 或 UIView 等框架类派生），托管对象必须保持活动状态，直到本机对象被释放 [1]。它的工作方式是，当本机对象的引用计数为 1 时，我们不会阻止托管实例进行垃圾收集。**一旦引用计数增加到 1 以上，我们就会阻止托管实例被垃圾收集。**

在您的情况下发生的是一个循环，它穿过 MonoTouch/ObjectiveC 桥，由于上述规则，GC 无法确定可以收集该循环。

这就是发生的事情：

*   您的 ChildViewController 有一个 sayHiButton。本机 ChildViewController 将保留此按钮，因此其引用计数将为 2（托管 CustomButton 实例持有的一个引用 + 本机 ChildViewController 持有的一个引用）。
*   TouchUpInside 事件处理程序具有对 ChildViewController 实例的引用。

现在您看到 CustomButton 实例不会被释放，因为它的引用计数是 2。而且 ChildViewController 实例不会被释放，因为 CustomButton 的事件处理程序有对它的引用。

有几种方法可以打破循环来解决这个问题：

*   当您不再需要事件处理程序时，将其分离。
*   当您不再需要 ChildViewController 时，将其丢弃。

[1] 这是因为托管对象可能包含用户状态。对于镜像对应本机对象的托管对象（例如托管 UIView 实例），MonoTouch 知道该实例不能包含任何状态，因此只要没有托管代码引用托管实例，GC 就可以收集它。如果稍后需要托管实例，我们只需创建一个新实例。

# iis - 使用 Powershell 配置 IIS - 启用表单身份验证

> ID：13058537
> 
> 赞同：5
> 
> 时间：2012-10-24T22:04:38.037
> 
> 标签：iis, powershell, web-config, forms-authentication

我的 IIS 看起来像这样：

```
Sites ->
        Default Web Site ->
                            MyWebApp 
```

那么问题来了：如何在 MyWebApp 上启用 Forms Authentication？我可以更改或编辑匿名访问、基本和 Windows 身份验证。但是，Forms Auth 并不是那么容易。如何在 Powershell 中执行此操作？

我可以这样读取设置：

`(Get-WebConfiguration system.web/authentication 'IIS:\sites\Default Web Site\MyWebApp').Mode`

我在使用 Set-Webconfiguration 或 Set-Webconfigurationproperty 时遇到问题或没有运气。我发现这些 cmdlet 很难弄清楚。

更改发生在 web.config 中，至少当我在 IIS 管理器中点击启用或禁用表单身份验证时 web.config 会更新。非常感谢任何线索和提示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T08:52:45.123

或者使用一个衬垫：

```
Set-WebConfiguration system.web/authentication 'IIS:\sites\Default Web Site' -value @{mode='Forms'} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T22:29:48.687

在修改属性后，您将身份验证配置设置传递给 Set-Webconfiguration 以提供适当的过滤器：

```
$config = (Get-WebConfiguration system.web/authentication 'IIS:\sites\Default Web Site')
$config.mode = "Forms"
$config | Set-WebConfiguration system.web/authentication 
```

**注意：在尝试之前备份您的配置。**

# jquery - 同位素过滤器实施后 jQuery 调用不起作用

> ID：13058542
> 
> 赞同：0
> 
> 时间：2012-10-24T22:05:00.207
> 
> 标签：jquery, jquery-plugins, jquery-selectors, jquery-isotope

我目前正在使用同位素插件进行流体布局，我可以成功过滤内容，但是在调用过滤器后，我的其余 jQuery 调用无法正常工作。
请耐心等待，我对 jQuery 还是很陌生，但这是我的代码：

```
jQuery(document).ready(function(){

jQuery(".pics-hidden").hide();

jQuery('.pics').click(function() {
      jQuery('#div'+jQuery(this).attr('rarget')).addClass('pics').removeClass('pics-hidden').delay(300).fadeIn(100);
      jQuery('#projectimages').isotope('reloadItems').isotope();
      return false;
       });       

var $container = $('#projectimages');

$container.isotope({
    itemSelector: '.pics',
    animationEngine: 'css',
    masonry: {
    columnWidth: 4
    }
});

$('#menu a').click(function(){
    var selector = $(this).attr('data-filter');
    $container.isotope({ filter: selector });
  return false;
});
}); 
```

过滤器工作正常，（'pics'）点击功能也是如此，但是在调用过滤器之后，（'.pics'）点击功能现在无法工作。
是否有一个原因？或者有什么办法解决？尝试了各种方法，似乎没有任何效果。
任何建议都非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T22:57:03.870

如果你替换`jQuery('.pics').click(function() {`为

```
jQuery('#projectimages').on("click", ".pics", function() { 
```

它工作得更好吗？这样，当您将`pics`类添加到元素时，它们应该触发您的点击处理程序。

或者，您能否提供一个演示该问题的小提琴？

# paypal - 贝宝状态

> ID：13058544
> 
> 赞同：-1
> 
> 时间：2012-10-24T22:05:09.873
> 
> 标签：paypal, paypal-ipn, paypal-sandbox

尝试使用贝宝销售一件商品时，可能会出现 10 位客户想要同时为同一商品付款的情况。当他们选择使用银行账户付款时，处理此类请求可能需要一段时间，并且可能会导致某些用户的账户资金不足。

这就是为什么我不会从库存中取出最后一件物品，以便第一个从银行和贝宝获得确认的人可以拿到该物品。

我的问题是——其他 9 位客户呢？我可以取消付款，但是贝宝可能收取的费用呢？他们还会被收费吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T22:24:01.963

据我所知，如果您将产品卖给很多人，您应该能够交付产品。通过实际向银行索取资金，您将自己承诺出售。

生活中可能会发生您需要退款给客户的情况。在这种情况下，贝宝政策规定：

您可以在收到付款后的 60 天内发送退款。退款仅适用于涉及购买商品和服务的交易。

它很灵活您可以发送全额或部分退款。

它是负担得起的 您的原始交易费用已记入您的账户。发放部分退款时，会记入一部分费用。

但请注意，我不相信以这种方式使用贝宝的意图。

# mysql - 在 MySQL 中保存用户首选项的最有效方法是什么？

> ID：13058545
> 
> 赞同：1
> 
> 时间：2012-10-24T22:05:09.453
> 
> 标签：mysql, database, database-design, structure

我想知道为网站保存大量用户偏好的最佳策略是什么。主要是默认值，例如默认时区、默认文本大小等。为每个设置单独创建一列听起来不切实际。我目前能想到的唯一方法是在表中添加一个单列`users`用于首选项，并将所有设置放在那里。

例如，我可以只在一列中使用这样的格式：`timezone:GMT;text_size:12;default_value1:something;default_value2:FALSE`. 然后在 PHP 中抓取它时，我会为登录用户选择此列并对结果进行分解，设置 $_SESSION['settings']['setting_key'] = "setting_value"。

有没有更聪明的方法来做到这一点，或者我已经在正确的方向？当然，唯一的缺点是无法搜索每个特定设置，因为所有内容都集中在一起。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T01:15:12.747

恕我直言，这就是[序列化](http://nl3.php.net/serialize)的完美含义。

如果您希望它可搜索，您可能希望最终将它们分开。另一方面，您可能希望采用完全不同的方法，而不是存储在一个按列设置的大表中，您可以创建一个表：

```
CREATE TABLE settings (user_id INT, setting VARCHAR, value VARCHAR) 
```

并存储这样的设置。然后，您将不受添加/删除列的限制。

另一种方法（进一步加快可能的设置查找）是创建多个表：

```
CREATE TABLE settings (id INT, setting VARCHAR)
CREATE TABLE settings_values (user_id INT, setting_id INT, value VARCHAR) 
```

考虑到这`setting_id`是一个外键，`settings.id`并假设您有一些`users`具有用户 ID 的表，其中`user_id`在两个示例中都是外键。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T06:33:11.023

我会选择“按偏好列”选项；毕竟，您的程序必须存储首选项然后检索它们，因此不会出现您的程序不知道如何处理的首选项。

我在我编写和维护的数据库程序中有一个类似的系统，其中每个用户每个屏幕可能保存十个首选项。在此基础上进行存储降低了复杂性。

您考虑存储多少个偏好？我怀疑它会超过十个。

如果您要一次性检索*所有*首选项，然后一次存储它们，*那么*可以使用串联字符串方法，但通常我不建议这样做，因为它会使访问首选项变得更加困难个人基础。

# android - 蓝牙 getInputStream 获取多个/拆分的数据包？

> ID：13058546
> 
> 赞同：0
> 
> 时间：2012-10-24T22:05:09.923
> 
> 标签：android

我正在使用来自 Google 的臭名昭著的 BluetoothChat-Example 来接收 ByteArray。我知道他的长度（55 字节）、他的起始字节（0x69）和他的结束字节（0x16）以及数组中数据的长度。

我很确定发件人在没有任何中断的情况下发送了 55 个字节，但在 BluethootChat 示例中，它看起来像我收到了多个数据包。第一个包由 0x69 后跟 1023 乘以 0x00 组成。然后我收到剩下的 55 个字节。70% 的时间都会发生这种情况，有时数组会在中间分裂，有时整个数组会完整接收。

这是正常的 Android 蓝牙行为吗

提前致谢...

```
 private class ConnectedThread extends Thread {
    private final BluetoothSocket mmSocket;
    private final InputStream mmInStream;
    private final OutputStream mmOutStream;

    public ConnectedThread(BluetoothSocket socket) {
        Log.d(TAG, "create ConnectedThread");
        mmSocket = socket;
        InputStream tmpIn = null;
        OutputStream tmpOut = null;

        // Get the BluetoothSocket input and output streams
        try {
            tmpIn = socket.getInputStream();
            tmpOut = socket.getOutputStream();
        } catch (IOException e) {
            Log.e(TAG, "temp sockets not created", e);
        }

        mmInStream = tmpIn;
        mmOutStream = tmpOut;
    }

    public void run() {
        Log.i(TAG, "BEGIN mConnectedThread");
        byte[] buffer = new byte[1024];
        int bytes;

        // Keep listening to the InputStream while connected
        while (true) {
            try {
                // Read from the InputStream
                bytes = mmInStream.read(buffer);

                // Send the obtained bytes to the UI Activity
                mHandler.obtainMessage(BluetoothChat.MESSAGE_READ, bytes, -1, buffer)
                        .sendToTarget();
            } catch (IOException e) {
                Log.e(TAG, "disconnected", e);
                connectionLost();
                break;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T22:15:41.887

这个答案[**在这里**](https://stackoverflow.com/questions/9270965/bluetooth-spp-receive-some-the-package-frame-can-lost-or)回答了同样的问题。我只是遇到了同样的问题，这个答案就是我发现的。

# vim - 为什么这个 vimrc 命令对我不起作用？我试图突出显示超过 80 个字符的长行

> ID：13058548
> 
> 赞同：2
> 
> 时间：2012-10-24T22:05:18.663
> 
> 标签：vim

所以我在 StackOverflow 上找到了这个解决方案：[Vim 80 column layout questions](https://stackoverflow.com/questions/235439/vim-80-column-layout-concerns)

如果我在文件中键入长行，我希望突出显示超过 80 个字符限制的字符。很多人似乎认为这个解决方案工作正常，但我在我的 vimrc 文件中有它，它表现得好像什么都没有改变。我的长线没有突出显示。

```
highlight OverLength ctermbg=red ctermfg=white guibg=#592929
match OverLength /\%81v.\+/ 
```

作为参考，这是我的全部`.vimrc`，不是那么长：

```
" You'll need to add the following to your ~/.vimrc so that pathogen will be loaded
" properly. Filetype detection must be off when you run the commands so its best to
" You'll need to add the following to your ~/.vimrc so that pathogen will be loaded
" execute them first:
"filetype off
call pathogen#runtime_append_all_bundles()
call pathogen#helptags()
"filetype on

syntax on

let mapleader = ","
let g:CommandTMaxHeight=25
imap ii <Esc>

map <S-Enter> O<Esc>
map <CR> o<Esc>

set guioptions-=T
set guioptions-=r

set hlsearch
highlight OverLength ctermbg=red ctermfg=white guibg=#592929
match OverLength /\%79v.\+/
set nocompatible
set ruler
set number
set shellcmdflag=-ic
set list
set expandtab
set tabstop=4
set softtabstop=4
nmap <C-k> ddkP
nmap <C-j> ddp
vmap <C-k> xkP`[V`]
vmap <C-j> xp`[V`]

au! BufWritePost vimrc source %
colorscheme vividchalk 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T02:47:04.730

来自：[https ://stackoverflow.com/a/10993757/1701170](https://stackoverflow.com/a/10993757/1701170)

```
augroup vimrc_autocmds
  autocmd BufEnter * highlight OverLength ctermbg=darkgrey guibg=#111111
  autocmd BufEnter * match OverLength /\%75v.*/
augroup END 
```

这对我有用，而我之前的解决方案却没有。我不确定为什么，但是页面上的另一位评论者在评论时提供了一个提示，关于没有打开和关闭`augroup`行的解决方案，“这仅适用于您在任何给定缓冲区中打开的第一个文件”。

现在，如果有人可以解释为什么额外的开头和结尾行解决了 first-file-in-any-given-buffer 问题，以及为什么首先存在该问题，那么我会感到开明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T00:23:10.503

以下似乎对我有用：

```
highlight OverLength ctermbg=darkred ctermfg=white guibg=#FFD9D9
match OverLength /\%79v.*/ 
```

它基本上与您刚刚`\+`更改为`*`不同颜色的东西相同。出于某种原因，虽然改变你的线路对我不起作用。也许其中一个角色有问题？

无论如何 - 从这篇文章复制：[https ://stackoverflow.com/a/395326/680238](https://stackoverflow.com/a/395326/680238)

我认为这是我在处理 vimrc 时使用的那个，但作为旁注，我可能会补充一点，我已经放弃了突出显示那些超长线条的想法，并决定在第 81 列使用垂直线。你可能想试试这个，看看你更喜欢哪一个：

```
" Highlight first oversize line
set colorcolumn=81 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T03:18:26.583

在我看来，使用`textwidth`和`colorcolumn`. 在帮助中查找它们以了解其功能的详细信息。

```
set textwidth=80
set colorcolumn=+1 
```

这仅突出显示超过 80 列的点，因此可能无法满足您的目标，但我认为，如果您经常从不遵守限制的来源加载文件，这会使事情更容易阅读。

突出显示由`ColorColumn`突出显示组处理。

您也可以只设置`colorcolumn`为 81 并且不需要设置`textwidth`，但我`textwidth`也用于其他一些事情，所以无论如何都要设置它，这让我可以更改`textwidth`并获得最大宽度的颜色。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-29T10:43:45.810

我知道这是一篇超级旧的帖子，但我最近发现我的 OverLength 突出显示停止工作（Vim 8.1）。我的高亮代码最初是：

```
augroup vimrc_autocmds
    autocmd BufEnter * highlight OverLength ctermbg=darkred ctermfg=white guibg=#FFD9D9
    autocmd filetype BufEnter * match OverLength /\%>79v.\+/
augroup END 
```

我`filetype`从第 3 行删除，它又开始工作了。我不知道哪个版本改变了这种行为，但`filetype`之前肯定对我有用。

这几乎是 Jonomono 的答案，只是澄清一下，以防其他人遇到类似问题:)

# mongodb - 使用 c# 驱动程序将 linq Expression<> 转换为 IMongoQuery

> ID：13058550
> 
> 赞同：4
> 
> 时间：2012-10-24T22:05:29.673
> 
> 标签：mongodb, mongodb-.net-driver

给定一个；

```
Expression<Func<T, bool>> criteria; 
```

是否可以`IMongoQuery` 使用驱动程序将其转换为？

看起来它可能在某个地方的 QueryBuilder 中，但我看不到它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T22:32:14.303

这是一个例子：

```
public class C
{
    public int Id;
    public int N;
}

Expression<Func<C, bool>> criteria = x => x.N == 2;
var query = Query<C>.Where(criteria); 
```

# facebook - 在 Facebook Canvas 中发布表单、签名请求和会话

> ID：13058553
> 
> 赞同：0
> 
> 时间：2012-10-24T22:05:33.327
> 
> 标签：facebook, forms, session, post, facebook-canvas

我正在开发一个将在画布中运行的 Facebook 应用程序。这就是场景（我认为这很常见）。这都是服务器端的实现。

存在：

```
APP_URL: https://apps.facebook.com/xxxxxx/
CANVAS_URL: https://myexample.com/facebookApp/ 
```

1.  **第 1 步**（应用程序的索引）有一个表单。它有`action="CANVAS_URL/step2"`（注意不是应用程序网址）。为了`signed_request`在下一步中使用，它有一个隐藏字段`<input type="hidden" name="signed_request" value="<?php echo $_POST['signed_request'] ?>" />`

2.  **步骤 2**：它接收表单的信息并将其存储在 a 中`Session`，然后解析signed_request。这工作正常。我将其存储在 Session 中，因为我想在用户通过身份验证*后将其保存到数据库中。*如果用户登录到应用程序，我将他重定向到`APP_URL/step3`；如果没有，我将他重定向到登录对话框，使用`&redirect_uri=APP_URL/step3`. 在这两种情况下，请注意第 3 步是`APP_URL/step3`（因为我需要`signed_request`再次检查用户是否已通过身份验证和其他数据）。所有重定向都是使用 JavaScript 进行的：`<script type="text/javascript">window.top.location = "URL";</script>`

3.  **第 3 步**：现在我想保存之前存储在 Session 中的数据。**但是**当用户在 FB 画布中导航时，会话数据不可用。

我尝试了几种组合。如果表单被发送到`APP_URL/step2`（而不是`CANVAS_URL/step2`，为了创建会话`APP_URL`），我无法检索发布的数据（因为它被发送到 FB，而不是发送到`CANVAS_URL`）。

我考虑过使用`session_id`重新创建 Session `APP_URL`，但恐怕这不是一种非常安全的方法。我确信必须有更好的解决方法。

# url - 自定义错误页面中的 Silex 和 Twig 助手

> ID：13058558
> 
> 赞同：43
> 
> 时间：2012-10-24T22:06:03.870
> 
> 标签：url, twig, fatal-error, helpers, silex

我在尝试在`Silex`.

根据我在此链接中找到的内容：[http ://refactoring.us/silex/custom-error-pages-with-silex-and-twig/](http://refactoring.us/silex/custom-error-pages-with-silex-and-twig/)

我正在尝试在我的应用程序中设置自定义 404 错误页面。一切正常，直到我开始在我的树枝模板中使用助手。

404 错误页面模板的示例代码如下：

```
{% extends "layout.html.twig" %}

{% block main %}
<div id="error404">
    <h2>{{ app.translator.trans('page404.title') }}</h2>
    <p>{{ app.translator.trans('page404.para1') }}</p>
    <p class="btn-footer">
        <a href="{{ url('home') }}" class="btn">{{ app.translator.trans('page404.button') }}</a>
    </p>
</div>
{% endblock %} 
```

我的 Silex 应用程序中用于错误处理的 PHP 代码：

```
$app->error(function (\Exception $e, $code) use($app) {
    switch ($code) {
        case 404:
            $message = $app['twig']->render('error404.html.twig');
            break;
        default:
            $message = $app['twig']->render('error500.html.twig');
    }
    return new Response($message, $code);
}); 
```

一旦我删除

```
{{ 网址('home') }}
```

（这个助手和路线在其他情况下完美地工作！）我得到了正确的渲染站点，但没有翻译。

使用助手，我收到以下错误：

```
Fatal error: Uncaught exception 'Symfony\Component\Routing\Exception\RouteNotFoundException' with message 'Route "" does not exist.' in D:\projects\projectname\application\vendor\symfony\routing\Symfony\Component\Routing\Generator\UrlGenerator.php:119 Stack trace: 
#0 D:\projects\projectname\application\vendor\symfony\twig-bridge\Symfony\Bridge\Twig\Extension\RoutingExtension.php(45): Symfony\Component\Routing\Generator\UrlGenerator->generate(NULL, Array, false) 
#1 D:\projects\projectname\application\vendor\twig\twig\lib\Twig\Environment.php(327) : eval()'d code(68): Symfony\Bridge\Twig\Extension\RoutingExtension->getPath(NULL, Array) 
#2 D:\projects\projectname\application\vendor\twig\twig\lib\Twig\Template.php(265): __TwigTemplate_ca53e56b87abd45da5c34a79d4c2ce34->doDisplay(Array, Array) 
#3 D:\projects\projectname\application\vendor\twig\twig\lib\Twig\Template.php(239): Twig_Template->displayWithErrorHandling(Array, Array) 
#4 D:\projects\projectname\application\vendor\twig\twig\lib\Twig\Envir in D:\projects\projectname\application\vendor\twig\twig\lib\Twig\Template.php on line 280 
```

因此，我需要一些指导，了解导致此问题的可能原因以及解决此问题的步骤。所有帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-30T10:59:08.793

这不是 Silex 问题（截至目前） - 一切都在我身边完美运行（*Silex* 1.2）

你`UrlGeneratorServiceProvider`在你的应用程序中注册了吗？

在`web/index.php`：

```
$app->register(new Silex\Provider\UrlGeneratorServiceProvider()); 
```

在这种情况下，您应该真正使用`path()`而不是：`url()`

```
{{ path('home') }} 
```

# wpf - 从 OnKeyDown 覆盖中，您能否以编程方式从其相应的 e.Key 值中确定将要显示的字符（如果有）？

> ID：13058564
> 
> 赞同：2
> 
> 时间：2012-10-24T22:06:44.290
> 
> 标签：wpf, keyboard, keyboard-shortcuts, keycode, onkeydown

在不同的机器上，在`OnKeyDown`覆盖中，`e.Key`值不一定一致。例如，在我在 Boot Camp 下运行 Win7-64 的 Mac 上，反斜杠键被报告为`Key.OemQuote`而不是`Key.OemBackslash`预期的那样，考虑到它甚至不在同一个键上，这毫无意义。在同事的戴尔上，它被报告为完全不同的东西。

但是，在这两种情况下，正确的反斜杠字符都会在键入时出现在文本框中，因此操作系统显然以某种方式知道该键与哪个字符相关联。

我们正在尝试确定，给定特定系统上的键码，您是否可以获得该键所代表的相应字符（如果有）（假设没有按下任何修饰符。）

注意：我已经知道处理输入字符的事件`OnPreviewTextInput`和事件，但这*不是*我要问的。`OnTextInput`

 *我*特别*询问一个函数，它以 KeyCode 作为参数并返回如果按下该键将在屏幕上显示的字符。

例如，在我的机器上，该函数将采用`Key.OemQuote`并返回反斜杠字符。传入`Key.Control`将返回`null`（因为单独按下 Control 时实际上没有出现任何内容。）

注意：我提出了另一个关于处理不同键码的问题，具体可能看起来类似于这个问题，但这是一个非常具体的单独问题，与采用此类代码并返回字符的函数有关，所以请执行不要将此标记为重复。它不是。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T22:55:04.713

我认为[这个线程](https://stackoverflow.com/a/5826175/1069200)中的答案适用。

另请查看[MapVirtualKey](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646306(v=vs.85).aspx) [PInvoke](http://www.pinvoke.net/default.aspx/user32.mapvirtualkey)*

# windows - 以编程方式使用 Microsoft XPS Document Writer 创建 XPS 文件

> ID：13058565
> 
> 赞同：3
> 
> 时间：2012-10-24T22:07:02.530
> 
> 标签：windows, printing, xps

我正在研究批量打印解决方案。

要打印的文件将采用各种（典型）格式，例如 PDF、Word、Excel 等。从我收集（和测试）的内容来看，打印 XPS 文件是在 Windows 平台上进行的方式。

但是，我完全不清楚如何实际创建 XPS 文件 - 没有深入了解相关输入文件格式（即以*编程*方式）。

我希望我可以打印到本地*Microsoft XPS Document Writer* “打印机”，然后物理打印其输出（即 XPS 文件）。

我无法以编程方式成功地做到这一点。我试过托管代码`System.Printing`、非托管代码`Winspool API`。

我可以成功打开打印机并将原始数据写入其中，但我从未得到 XPS 文件输出。如何创建 XPS 文件？我查看了`XPSDocumentWriter`API，但这似乎非常复杂，并且可能已经由*Microsoft XPS Document Writer*和/或现有应用程序实现。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T00:25:59.787

我发现一种方法是从创建文档的应用程序开始，即。Word、Excel 等并使其打印。这段代码将一个字符串带入要转换的文档，在用户 %tmp% 文件夹中创建一个 xps 文件并将该字符串返回给文档。它可以完成这项工作，但速度并不快：

```
 private readonly string TEMP = Environment.ExpandEnvironmentVariables("%tmp%");
    private  object nullObject = Type.Missing;

    private string ConvertWordtoXps(string wordDocName)
    {
        Microsoft.Office.Interop.Word.Application wordApp = new Microsoft.Office.Interop.Word.Application();
        wordApp.Documents.Open(wordDocName, ConfirmConversions: false, ReadOnly: true);
        string xpsFileName = String.Concat(TEMP, "\\", Path.GetFileNameWithoutExtension(wordDocName), ".xps");

        try
        {
            wordApp.ActiveDocument.SaveAs2(xpsFileName, FileFormat: WdSaveFormat.wdFormatXPS);
            return xpsFileName;
        }
        catch (Exception e)
        {
            MessageBox.Show(e.Message);
        }
        finally
        {
            ((Microsoft.Office.Interop.Word._Application)wordApp).Quit(SaveChanges: false, OriginalFormat: nullObject, RouteDocument: nullObject);
        }
        return null;

    }

    private string ConvertExceltoXps(string excelWorkbookName)
    {
        Microsoft.Office.Interop.Excel.Application excelApp = new Microsoft.Office.Interop.Excel.Application();
        excelApp.Workbooks.Add(excelWorkbookName);
        Workbook excelWorkbook = excelApp.ActiveWorkbook;
        string xpsFileName = String.Concat(TEMP, "\\", Path.GetFileNameWithoutExtension(excelWorkbookName), ".xps");

        try
        {
            excelWorkbook.ExportAsFixedFormat(
                XlFixedFormatType.xlTypeXPS,
                xpsFileName,  
                Quality: XlFixedFormatQuality.xlQualityMinimum,
                IncludeDocProperties: false,
                IgnorePrintAreas: false,
                From: nullObject,
                To: nullObject,
                OpenAfterPublish: false,
                FixedFormatExtClassPtr: nullObject
            );

            return xpsFileName;
        }
        catch (Exception e)
        {
            MessageBox.Show(e.Message);
        }
        finally
        {
            excelWorkbook.Close(XlSaveAction.xlDoNotSaveChanges, Filename: nullObject, RouteWorkbook: nullObject); 
            ((Microsoft.Office.Interop.Excel._Application)excelApp).Quit();
        }
        return null;
    }

    private string ConvertPowerPointtoXps(string pptFile)
    {
        Microsoft.Office.Interop.PowerPoint.Application pptApp = new Microsoft.Office.Interop.PowerPoint.Application();
        Microsoft.Office.Interop.PowerPoint.Presentations pptSet = pptApp.Presentations;
        Microsoft.Office.Interop.PowerPoint.Presentation pptPresentation = pptSet.Open(pptFile, ReadOnly: MsoTriState.msoTrue, Untitled: MsoTriState.msoTrue, WithWindow: MsoTriState.msoFalse);
        string xpsFileName = String.Concat(TEMP, "\\", Path.GetFileNameWithoutExtension(pptFile), ".xps");

        try
        {
            pptPresentation.ExportAsFixedFormat(
                xpsFileName,
                PpFixedFormatType.ppFixedFormatTypeXPS,
                PpFixedFormatIntent.ppFixedFormatIntentScreen,
                FrameSlides: MsoTriState.msoFalse,
                HandoutOrder: PpPrintHandoutOrder.ppPrintHandoutVerticalFirst,
                OutputType: PpPrintOutputType.ppPrintOutputFourSlideHandouts,
                PrintHiddenSlides: MsoTriState.msoFalse,
                RangeType: PpPrintRangeType.ppPrintAll,
                SlideShowName: "",
                IncludeDocProperties: false,
                KeepIRMSettings: true,
                DocStructureTags: true,
                BitmapMissingFonts: true,
                UseISO19005_1: false,
                ExternalExporter: nullObject
            );
            return xpsFileName;
        }
        catch (Exception e)
        {
            MessageBox.Show(e.Message);
        }
        finally
        {
            ((_Presentation)pptPresentation).Close();
            ((Microsoft.Office.Interop.PowerPoint._Application)pptApp).Quit();
        }
        return null;
    } 
```

# python - 如何使用 PIL（Python 图像库）将 RGB 值舍入为最接近的网络安全值？

> ID：13058569
> 
> 赞同：5
> 
> 时间：2012-10-24T22:07:37.937
> 
> 标签：python, colors, python-imaging-library

我正在为颜色创建一个快速查找表。假设您给我一个红色阴影，然后我会将其转换为最接近的网络安全颜色并执行查找。它会返回许多不同深浅的红色，这对我来说没问题。

我现在唯一的问题是如何将给定的 RGB 值转换为网络安全值？我正在使用 PIL 和 Python。我也不介意编写自己的算法，但这对我来说有点太难了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T22:19:54.163

我不知道是否有使用 PIL 的特定方法，但是如果您有 rgb 颜色，并且我们将最接近的网络安全颜色定义为 rgb 空间中距离最小的颜色，您可以这样做如下：

```
def getwebsafe(r,g,b):
  rw = 51 * ((int(r)+25)//51)
  gw = 51 * ((int(g)+25)//51)
  bw = 51 * ((int(b)+25)//51)
  return (rw,gw,bw) 
```

这是因为网络安全颜色对每个组件都有 6 种可能的色调：(0,51,102,153,204,255)。如果您颜色中的组件在 [0,25] 范围内，则最接近的是 0，如果它在 [26-76] 范围内，则最接近的是 51，依此类推。

或者，以列表形式表示的 rgb 颜色的较短版本：

```
def getwebsafe(colour):
  return [51*((int(c)+25)//51) for c in colour] 
```

编辑：编辑以确保即使 Python 使用非整数表示颜色以及 Python 2 和 3 也能正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T00:00:02.563

正如我在@pedrosorio 的回答下的评论中所说，我认为这可以通过使用表查找更有效地完成。这意味着几乎所有的数学计算都在创建表格时完成一次，并且只完成了 256 次，而不是针对每个像素。这就是我的意思，使用 pedrosorio 的公式：

```
tbl = tuple(51*((int(i)+25)//51) for i in xrange(256))

def websafe(*color):
    return tuple(tbl[c] for c in color)

safecolor = websafe(34,55,13) 
```

但是，我不确定该公式如何映射 0-255 范围值——因为它为六种主要色调中的每一种分配了以下数量的条目：

```
shade count
 0x00  26
 0x33  51
 0x66  51
 0x99  51
 0xcc  51
 0xff  26 
```

相反，我会使用这个稍微简单的公式：

```
tbl = tuple(51*(i//43) for i in xrange(256)) 
```

这给出了更均匀的阴影分布：

```
shade count
 0x00  43
 0x33  43
 0x66  43
 0x99  43
 0xcc  43
 0xff  41 
```

一旦你知道分布计数，你甚至可以做这样的事情，它只涉及很少的数学。当然，没有什么理由去优化非速度关键的代码。

```
tbl = ((0x00,)*43 + (0x33,)*43 + (0x66,)*43 +
       (0x99,)*43 + (0xcc,)*43 + (0xff,)*41) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-20T15:48:55.940

我有类似的问题，需要将图像中的所有像素转换为最接近的原色和二次色

[为此，我使用了此答案https://stackoverflow.com/a/22478139/9799700](https://stackoverflow.com/a/22478139/9799700)中提到的 K 维树方法，如下所示

```
 # import the necessary packages
  import scipy.spatial as sp

  #Add more colors to this array if you need 
  main_colors = [(0,0,0),
              (255,255,255),
              (255,0,0),
              (0,255,0),
              (0,0,255),
              (255,255,0),
              (0,255,255),
              (255,0,255),
              ] 

  #replace r,g,b variables with your pixel rgb values
  pixelColor = (r,g,b)
  kdTree = sp.KDTree(main_colors) 
  ditsance,result = kdTree.query(pixelColor) 
  nearest_color = main_colors[result] 
```

我的完整代码：[https ://gist.github.com/ssethsara/bc4ece5f2d959e6b434b73db29959248](https://gist.github.com/ssethsara/bc4ece5f2d959e6b434b73db29959248)

# php - SugarCRM REST API，如何获取与帐户相关的联系人

> ID：13058572
> 
> 赞同：3
> 
> 时间：2012-10-24T22:08:04.760
> 
> 标签：php, sugarcrm

我正在使用 SugarCRM Pro 6.5.5。我正在尝试与另一个应用程序进行一些集成，因此我需要从该其他应用程序进行一些 API 调用。我正在使用 REST API v2。此时，我需要通过账户 ID 获取与账户相关的联系人。我都尝试过`get_relationships()`和`get_entry_list()`，但我无法让它们中的任何一个工作。

这是我的输入`get_relationships()`：

`{"session":"eujfbfsfjgni98m0mivl6jm6r2","module_name":"Accounts","module_id":"c03d0649-0525-2f90-1206-50881e87d7dd","link_field_name":"contacts"}`

我已经尝试了很多变体，以及其他几个选项，但没有达到我想要的效果。这是上面的输出：

```
stdClass Object
(
    [entry_list] => Array
        (
            [0] => stdClass Object
                (
                    [id] => 
                    [module_name] => Contacts
                    [name_value_list] => stdClass Object
                        (
                            [deleted] => stdClass Object
                                (
                                    [name] => deleted
                                    [value] => 0
                                )

                            [do_not_call] => stdClass Object
                                (
                                    [name] => do_not_call
                                    [value] => 0
                                )

                        )

                )

        )

    [relationship_list] => Array
        (
        )

) 
```

我看不出这些信息有什么用处。

接下来，我尝试`get_entry_list()`使用查询仅选择具有给定帐户 ID 的联系人。这是我的意见：

`{"session":"8mol33e7kdq6girugu30dnt074","module_name":"Contacts","query":"accounts.id = 'c03d0649-0525-2f90-1206-50881e87d7dd'"}`

我正在使用`accounts.id`，因为我读过类似的问题，这是正确的。我已经尝试了很多其他的东西，比如：`contacts.account_id`、`account_id`等。在每种情况下，我都会在日志中收到一个 MySQL 错误，指出该列无效。

[SugarCRM：如何通过 REST API 获取帐户的所有联系人](https://stackoverflow.com/questions/12615498/sugarcrm-how-to-get-all-contacts-for-an-account-via-rest-api)

这个问题是相关的，并且似乎是完全相同的问题。我尝试`link_name_to_fields_array`在我的输入中添加一个选项，但无论我提供什么值，它都会导致日志中出现以下 MySQL 错误：

`AND jt11.deleted=0 where (Array) AND contacts.deleted=0: MySQL error 1054: Unknown column 'Array' in 'where clause'`

大富？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T16:46:12.007

感谢**ychaouche**，我想通了。

`get_relationships()`毕竟我能够使用该方法。在添加到我的输入之前我已经尝试过`related_fields`，但所做的只是导致一个空的结果集。答案？设置`related_module_query`为空字符串...现在结果集不为空。是的，我昨晚 3 个多小时的疯狂谷歌搜索就是因为*这个*。

所以，这里有一些工作代码，以防其他人有这个问题：

```
{
    "session": "iov9pg9kvvl60librung1h5fh6",
    "module_name": "Accounts",
    "module_id": "c03d0649-0525-2f90-1206-50881e87d7dd",
    "link_field_name": "contacts",
    "related_module_query": "",
    "related_fields": [
        "first_name",
        "last_name"
    ],
    "deleted": false
} 
```

这让我得到了以下结果集：

```
stdClass Object
(
    [entry_list] => Array
        (
            [0] => stdClass Object
                (
                    [id] => 
                    [module_name] => Contacts
                    [name_value_list] => stdClass Object
                        (
                            [first_name] => stdClass Object
                                (
                                    [name] => first_name
                                    [value] => John
                                )

                            [last_name] => stdClass Object
                                (
                                    [name] => last_name
                                    [value] => Smith
                                )

                        )

                )

        )

    [relationship_list] => Array
        (
        )

) 
```

您当然可以在其中指定不同的字段`related_fields`并获取不同的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T10:28:20.173

看看[sugarcrm/tests/service/RESTAPI4Test.php](https://github.com/sugarcrm/sugarcrm_dev/blob/master/tests/service/RESTAPI4Test.php)。它有很多关于如何使用 REST API 的示例。查看测试代码以获取有关如何使用库/框架/API 的代码示例是一种常见的做法。从这个意义上说，测试是一个非常好的文档。

希望有帮助。

# c# - 检查 Cookie 是否存在

> ID：13058574
> 
> 赞同：55
> 
> 时间：2012-10-24T22:08:08.540
> 
> 标签：c#, asp.net, cookies, webforms, asp.net-4.0

*通过对Stack Overflow*的快速搜索，我看到人们建议使用以下方法来检查 cookie 是否存在：

```
HttpContext.Current.Response.Cookies["cookie_name"] != null 
```

或（在`Page`课堂内）：

```
this.Response.Cookies["cookie_name"] != null 
```

但是，当我尝试使用索引器（或 Cookies.Get 方法）来检索一个不存在的 cookie 时，它​​似乎实际上**创建**了一个具有该名称的“默认”cookie 并返回它，因此无论我使用什么 cookie 名称它永远不会返回 null。（更糟糕的是 - 创建一个不需要的 cookie）

我在这里做错了什么，还是有一种不同的方法可以简单地通过名称检查特定 cookie 的存在？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-11-07T14:59:02.813

有时你仍然需要知道 Cookie 是否存在于 Response 中。然后你可以检查cookie key是否存在：

```
HttpContext.Current.Response.Cookies.AllKeys.Contains("myCookie") 
```

更多信息可以在[这里](http://blog.mastykarz.nl/inconvenient-asp-net-cookies/)找到。

就我而言，我必须在 Global.asax 的 Application_EndRequest 方法中修改响应 Cookie。如果 Cookie 不存在，我不会碰它：

```
string name = "myCookie";
HttpContext context = ((HttpApplication)sender).Context;
HttpCookie cookie = null;

if (context.Response.Cookies.AllKeys.Contains(name))
{
    cookie = context.Response.Cookies[name];
}

if (cookie != null)
{
    // update response cookie
} 
```

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2015-05-13T18:54:53.577

根据您要完成的工作，这里有很多正确的答案；这是我提供全面答案的尝试：

`Request`和对象都`Response`包含`Cookies`属性，即`HttpCookieCollection`对象。

**`Request.Cookies:`**

*   此集合包含从客户端收到的 cookie
*   此集合是只读的
*   如果您尝试访问此集合中不存在的 cookie，您将收到一个`null`值。

**`Response.Cookies:`**

*   此集合仅包含服务器在当前请求期间添加的 cookie。
*   这个集合是可写的
*   如果您尝试访问此集合中不存在的 cookie，您将收到一个新的 cookie 对象；如果您尝试访问的 cookie在集合中**不**存在`Request.Cookies`，它将被添加（但如果`Request.Cookies`对象已经包含具有相同键的 cookie，并且即使它的值是陈旧的，它也不会更新以反映更改来自`Response.Cookies`集合中新创建的 cookie。

**解决方案**

* * *

如果要检查客户端是否存在 cookie，请执行以下操作之一

*   `Request.Cookies["COOKIE_KEY"] != null`
*   `Request.Cookies.Get("COOKIE_KEY") != null`
*   `Request.Cookies.AllKeys.Contains("COOKIE_KEY")`

* * *

如果要检查服务器*在当前请求期间*添加的 cookie 是否存在，请执行以下操作：

*   `Response.Cookies.AllKeys.Contains("COOKIE_KEY")`（见[这里](https://msdn.microsoft.com/en-us/library/system.web.httpcookiecollection.allkeys(v=vs.110).aspx)）

正在尝试通过以下方法之一检查服务器*在当前请求期间*添加的 cookie ...

*   `Response.Cookies["COOKIE_KEY"] != null`
*   `Response.Cookies.Get("COOKIE_KEY") != null`（见[这里](https://msdn.microsoft.com/en-us/library/ezy11xy2(v=vs.110).aspx)）

...将导致在`Response.Cookies`集合中创建一个 cookie，并且状态将评估为`true`.

* * *

## 回答 #3

> 赞同：42
> 
> 时间：2012-10-24T22:10:57.050

`Response.Cookies`包含将发送回浏览器的 cookie。如果您想知道 cookie 是否存在，您可能应该查看`Request.Cookies`.

无论如何，要查看 cookie 是否存在，您可以检查[`Cookies.Get(string)`](http://msdn.microsoft.com/en-us/library/ezy11xy2%28v=vs.100%29.aspx). **但是，如果您在 Response 对象上使用此方法并且 cookie*不*存在，则将创建该 cookie。**

[有关方法（字符串）](https://msdn.microsoft.com/en-us/library/ezy11xy2%28v=vs.110%29.aspx)，请参阅 MSDN 参考[`HttpCookieCollection.Get`](https://msdn.microsoft.com/en-us/library/ezy11xy2%28v=vs.110%29.aspx)

* * *

## 回答 #4

> 赞同：36
> 
> 时间：2012-10-24T22:11:40.303

你需要使用`HttpContext.Current.Request.Cookies`，而不是`Response.Cookies`。

旁注：cookie 被复制到 Request on `Response.Cookies.Add`，这使得检查它们中的任何一个对于新添加的 cookie 的行为相同。但传入的 cookie 永远不会反映在`Response`.

此行为记录在[HttpResponse.Cookies](http://msdn.microsoft.com/en-us/library/system.web.httpresponse.cookies%28v=vs.110%29.aspx)属性中：

> 使用 HttpResponse.Cookies 集合添加 cookie 后，即使尚未将响应发送到客户端，该 cookie 也会立即在 HttpRequest.Cookies 集合中可用。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-05-06T13:01:12.440

```
public static class CookieHelper
{
    /// <summary>
    /// Checks whether a cookie exists.
    /// </summary>
    /// <param name="cookieCollection">A CookieCollection, such as Response.Cookies.</param>
    /// <param name="name">The cookie name to delete.</param>
    /// <returns>A bool indicating whether a cookie exists.</returns>
    public static bool Exists(this HttpCookieCollection cookieCollection, string name)
    {
        if (cookieCollection == null)
        {
            throw new ArgumentNullException("cookieCollection");
        }

        return cookieCollection[name] != null;
    }
} 
```

用法：

```
Request.Cookies.Exists("MyCookie") 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-09T06:12:11.770

抱歉，没有足够的代表添加评论，但来自 zmbq 的回答：

> 无论如何，要查看 cookie 是否存在，您可以检查 Cookies.Get(string)，这不会修改 cookie 集合。

可能不完全正确，因为 Cookies.Get(string) 实际上会创建一个具有该名称的 cookie，如果它不存在的话。但是，正如他所说，您需要查看 Request.Cookies，而不是 Response.Cookies 所以，类似于：

```
bool cookieExists = HttpContext.Current.Request.Cookies["cookie_name"] != null; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-10-29T14:24:16.967

您可以执行以下操作来找出 cookie 的值：

```
Request.Cookies[SESSION_COOKIE_NAME].Value 
```

# macos - 更改 contentView 中的 NSView 层次结构

> ID：13058575
> 
> 赞同：0
> 
> 时间：2012-10-24T22:08:24.923
> 
> 标签：macos, cocoa, nsview

我在 NSWindow contentView 中有 4 个 NSView（A、B、C、D），一个接一个（就像一堆 NSView）。我使用 IB 添加了视图并将它们与文件所有者连接起来。每个视图都有一个 NSViewController。我想以这种方式排列视图|A|B|C|D|。但是在加载所有视图后，这就是我所拥有的：|A|B|D|C|。我想在其应有的位置重新排序 NSView C。

我尝试使用 addSubview:positioned:relativeTo: [[self.window contentView] addSubview:viewC 定位：NSWindowBelow relativeTo:viewD];

但现在 NSView 永远不会显示。

如何更改 viewC 顺序？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T04:00:55.210

您可以通过在左侧面板中更改视图的顺序来控制视图在 xib 中的相对“垂直”（前/后）位置：

![Interface Builder 中的面板](../Images/035582bfdfc11f55334fbce8f19d58f7.png)

我在这里组织不同视图的方式，“视图D”在前面，“视图C”在后面，“视图B”在“视图C”后面，“视图A”在它们后面。结果如下：

![有序视图演示](../Images/cde89eeda4322d052f3ca2353e06a053.png)

对于这个演示，我将四个视图中的每一个都设置为[图层托管](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSView_Class/Reference/NSView.html#//apple_ref/occ/instm/NSView/setWantsLayer:)并设置视图的背景颜色，以便

*   视图 A 为红色
*   视图 B 为绿色
*   视图 C 为蓝色
*   视图 D 为黑色

如您所见，最底部的视图视图 D 位于前面，视图 C 位于其后面，依此类推。

# asp.net-mvc - 来自数据库的动态 MVC Razor 模型

> ID：13058577
> 
> 赞同：3
> 
> 时间：2012-10-24T22:08:41.390
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我有一个包含竞赛问题的数据库表。这些是从我们的工作人员可以使用的编辑页面为特定比赛创建的，因此每个比赛可能有不同的问题。

Questions 表包含字段名称、类型（即复选框）和验证类型（即Required 和Compare 等）等详细信息。

在尝试为客户构建竞争视图以动态地将问题呈现给视图时，有什么办法（因为每个竞争都会有不同的问题）？

我在想一个动态模型还是什么？我不太确定。欢迎任何想法。

* * *

我对如何将我的对象适合这个模型结构有点困惑。那么我要为答案的问题创建编辑器模板吗？

基本上，当管理员用户设置比赛时，他们在比赛表中有一个带有基本比赛的条目，然后他们可以创建许多问题，这些问题进入与比赛表链接的比赛问题表，每个比赛都有任何数字问题 - 此表包含如上所述的字段名称、类型（即复选框）和验证类型（即必需和比较等）等详细信息。

但是，当比赛视图呈现给一个人进入它时，它会从 Comp 模型中提取信息（这很好），然后我需要遍历 CompetitionQuestion（不知道如何为此创建模型）并渲染出每个问题对于特定的补偿 - 当该人输入条目（基本用户和补偿详细信息）和 EntryAnswer（每个问题的答案）表时，这些将被保存。

那么我应该将 EditorTemplate 链接到 CompetitionQuestion 对象还是 EntryAnswer 对象？

啊现在好迷茫:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T22:10:44.920

您正在寻找的是编辑器模板。

它是您可以创建以匹配您的自定义对象的模板。

这是一个关于如何进行的很好的教程。

[http://coding-in.net/asp-net-mvc-3-how-to-use-editortemplates/](http://coding-in.net/asp-net-mvc-3-how-to-use-editortemplates/)

# path - 如何防止 Tmux 用重复的路径填充全局 PATH 变量？

> ID：13058578
> 
> 赞同：20
> 
> 时间：2012-10-24T22:08:42.897
> 
> 标签：path, zsh, tmux, zshrc

我通过 Homebrew 使用 Mac OS X、iTerm2、zsh 和 Tmux。当我在 iTerm2 中启动终端会话时，全局 PATH 变量看起来仍然很好。但是当我打开一个 Tmux 会话时，PATH 变量会使用它已经包含的相同路径进行扩展。我将在我的 .zshrc 中放置一个问题解决[代码片段](https://unix.stackexchange.com/questions/4965/keep-duplicates-out-of-path-on-source)，但我仍然对 PATH 变量被填充两次的原因感兴趣。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-10-25T01:47:59.823

发生这种情况是因为您的 .zshrc 会针对每个新的 zsh 进程进行评估。因此，当您启动 iTerm2 时，它会评估您对 $PATH 的更改，然后当您启动 tmux 时，它会获取修改后的 $PATH 并将其传递给其中的新 zsh 实例，并且新的 zsh 进程再次评估 .zshrc 制作再次更改。

有几种方法可以防止这种情况。

## $TMUX

首先，为了特别防止它发生在 tmux 内部的 shell 中，如果设置了 $TMUX，您可以跳过这些更改：

```
if [[ -z $TMUX ]]; then
  PATH="$PATH:/foo"
fi 
```

## zprofile

另一种选择是将 .zshrc 的那部分移动到 .zprofile 文件中。此文件仅由登录 shell 评估。但是，默认情况下 tmux 会启动新的 shell 作为登录 shell，因此您还需要通过在 tmux 配置中添加以下内容来防止 tmux 这样做：

```
set -g default-command /bin/zsh 
```

您可能需要在那里调整 zsh 的路径。这将阻止 tmux 将 zsh 进程作为登录 shell 启动，因此 tmux 内部的 zsh 不会查看 .zprofile。

## 排版

与您链接到的用于防止添加重复项的代码片段类似的另一个选项是将您的路径修改更改为：

```
typeset -aU path
path=( $path /foo ) 
```

这是因为 zsh 自动将 $path 变量设置为反映 $PATH 内容的数组。排版的 -U 选项修改该变量，以便条目是唯一的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-27T11:58:02.163

我发现[这个 GitHub 线程](https://github.com/sstephenson/rbenv/issues/369)非常有用。[此评论](https://github.com/sstephenson/rbenv/issues/369#issuecomment-22200587)的解决方案对我有用：

```
# /etc/zshenv
if [ -x /usr/libexec/path_helper ]; then
  PATH="" # Add this line
  eval `/usr/libexec/path_helper -s`
fi 
```

通过这样做，您必须将 PATH 修改`~/.zshrc`而不是`~/.zprofile`. 我也从线程中尝试[了这个解决方案](https://github.com/sstephenson/rbenv/issues/369#issuecomment-18408503)，但对我不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-06T10:30:57.457

我的解决方案：

第1步：

在 .bashrc 或 .zshrc

```
ExtraPath="/foo/bar:$HOME/bin" # your customized path here, /foo/bar and $HOME/bin for instance
if ! [[ "$PATH" =~ "$ExtraPath" ]] ; then PATH="$ExtraPath:$PATH" ; fi # if the PATH does not contain your customized path, then insert yours, else do nothing. 
```

第2步：

在 ~/.tmux.conf 中，添加

```
set -g default-command "${SHELL}" 
```

在这种情况下，tmux 不会获取 /etc/profile，所以它不会弄乱你的 PATH

# ios - UIScrollViewDelegate & scrollViewDidEndScrollingAnimation:sv

> ID：13058581
> 
> 赞同：0
> 
> 时间：2012-10-24T22:09:03.763
> 
> 标签：ios, delegates, uiscrollview

我将 a 子类化并在其视图中`UIViewController`实例化 a `UIScrollView`，其高度为 480，宽度为 640（常规宽度的 2 倍）。分页已启用，因此它本质上是并排的 2 个视图，您可以通过向后滑动和第四次滑动来查看其中任何一个。我的最终目标是让我的视图控制器在用户滑动切换侧面时得到通知。我正在尝试使用该`UIScrollViewDelegate`方法`scrollViewDidEndScrollingAnimations:scrollView`，但它没有被调用。我将委托正确设置为视图控制器，因为另一个委托方法`scrollViewDidScroll:scrollView`在单次滚动期间被多次调用。关于如何解决这个问题/完成我想要的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T17:56:53.760

问题是`scrollViewDidEndScrollingAnimation`当完成向新页面的滑动时不会调用 : 委托方法。当它实际移动到新页面时，您将收到多个`scrollViewDidScroll`: 调用，然后一旦完成，它将发送`scrollViewDidEndDecelerating`pachun 在另一个答案中提到的 : 调用。

:方法仅在滚动视图在方法之后为动作设置动画并被使用`scrollViewDidEndScrollingAnimation`时调用。它不会仅基于用户触摸移动滚动视图（[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIScrollViewDelegate_Protocol/Reference/UIScrollViewDelegate.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIScrollViewDelegate_Protocol/Reference/UIScrollViewDelegate.html)）而被调用。`setContentOffset:animated:``scrollRectToVisible:animated:`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T23:56:55.013

尝试`- (void) scrollViewDidEndDecelerating:`

这应该会通知您 - 顾名思义 - 每当 scrollView 完成执行完整的滚动动画时。

# expressionengine - 迁移错误 - 无法加载站点首选项；无效的偏好数据

> ID：13058589
> 
> 赞同：0
> 
> 时间：2012-10-24T22:09:38.273
> 
> 标签：expressionengine

我正在将 EE 升级从本地服务器转移到生产服务器，并出现可怕的“无法加载站点首选项；无效的首选项数据”错误。

我已经检查了一切。数据库连接很好，路径设置正确，数据库表有站点首选项等...我还应该检查什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T22:09:38.273

如果您在迁移站点后收到“无法加载站点首选项；无效的首选项数据”错误，请确保检查您是否导入了正确的 EE2 数据库，而不是错误的 EE1 数据库。如果正确，您将看到一个 exp_channel_data 表。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-26T11:02:29.930

**从 EE1 更新到 EE2 时，如果您将所有文件和 DB 迁移到新服务器，但您忘记替换`index.php`**站点根目录中的主**文件**，也会出现此错误消息。因此，请确保该文件也是 EE2 版本。

# sql - SQLite 跨列选择和分组匹配

> ID：13058592
> 
> 赞同：1
> 
> 时间：2012-10-24T22:09:54.820
> 
> 标签：sql, sqlite

我有一个名为 match 的 SQLite 表，它有两列：column1 和 column2 包含整数值：

```
column1   column2
------------------

5          6
6          8
8          9
90         91
1          20
10         20 
```

我想匹配在任一列中找到的重复数字并加入它们，包括匹配的第二个值，这样我的搜索结果返回将是：

```
5, 6, 8, 9 
1, 20, 10 
```

（请注意，90 和 91 没有匹配项，因此不包括在内）。

我的“猜测”是：

```
SELECT column1, column2 
FROM match 
WHERE column2 
IN (SELECT column1 
    FROM match 
    GROUP BY column1 HAVING (COUNT(column1) > 0)) 
    UNION 
    SELECT column1, column2 
    FROM match 
    WHERE column1 
    IN (SELECT column2 
        FROM match 
        GROUP BY column1 HAVING (COUNT(column2) > 0)) 
        UNION 
        SELECT column1, column2 
        FROM match 
        WHERE column1 
        IN (SELECT column1
            FROM match 
            GROUP BY column1 HAVING (COUNT(column1) > 1)) 
            UNION 
            SELECT column1, column2 
            FROM match 
            WHERE column2 
            IN (SELECT column2 
                FROM match 
                GROUP BY column2 HAVING (COUNT(column2) > 1)) 
```

结果几乎是我需要的：

```
5 6
6 8
8 9
1 20
10 20 
```

但我真正需要的是以某种方式对结果进行分组。例如：

(5, 6, 8, 9) (1, 10, 20)

这可能吗？我的 SQL 尝试是否过于复杂？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T23:05:27.037

我认为这就是你想要的：[http ://sqlfiddle.com/#!7/05747/9](http://sqlfiddle.com/#!7/05747/9)

```
SELECT column1 as newColumn
FROM match WHERE column1 in (

SELECT myColumn
FROM(

SELECT count(*) as cnt, myColumn
FROM (
SELECT column1 as myColumn
FROM match
UNION ALL
SELECT column2 as myColumn
FROM match
 ) x
GROUP BY myColumn
HAVING cnt > 1
  ) y
) OR column2 in (
SELECT myColumn
FROM(

SELECT count(*) as cnt, myColumn
FROM (
SELECT column1 as myColumn
FROM match
UNION ALL
SELECT column2 as myColumn
FROM match
 ) x
GROUP BY myColumn
HAVING cnt > 1
  ) y
)
UNION
SELECT column2 as newColumn
FROM match WHERE column1 in (

SELECT myColumn
FROM(

SELECT count(*) as cnt, myColumn
FROM (
SELECT column1 as myColumn
FROM match
UNION ALL
SELECT column2 as myColumn
FROM match
 ) x
GROUP BY myColumn
HAVING cnt > 1
  ) y
) OR column2 in (
SELECT myColumn
FROM(

SELECT count(*) as cnt, myColumn
FROM (
SELECT column1 as myColumn
FROM match
UNION ALL
SELECT column2 as myColumn
FROM match
 ) x
GROUP BY myColumn
HAVING cnt > 1
  ) y
) 
```

# objective-c - 自动化目标环境的 XCode 归档

> ID：13058593
> 
> 赞同：0
> 
> 时间：2012-10-24T22:09:55.290
> 
> 标签：objective-c, xcode, macos

我想自动化 XCode 以根据我正在构建的环境设置/替换某些变量或 plist 值。

示例：在为生产构建时，我希望类头文件中的这一行是......

# 定义 kServerName @"www.mydomain.com"

……为了发展……

# 定义 kServerName @"dev.mydomain.com"

...和分期...

# 定义 kServerName @"staging.mydomain.com"

此外，也许类似地在 plist 中设置一个值。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T22:32:40.930

您需要为不同的目标添加不同的模式，并在构建设置中相应地设置标志。之后在您的代码中可以使用这些标志来检查您指向的环境，并可以使用 #`ifdef`语句来创建 # `defines`。

[用于设置架构的链接和](https://stackoverflow.com/questions/6218434/how-to-add-configurations-to-xcode-4)[有关如何](http://blog.carbonfive.com/2011/06/20/managing-ios-configurations-per-environment-in-xcode-4/)在 xcode中设置目标的另一个链接

# asp.net - asp.net c#显示html渲染

> ID：13058595
> 
> 赞同：0
> 
> 时间：2012-10-24T22:10:24.167
> 
> 标签：asp.net

我正在尝试检索以下内容：

```
<table border="0" cellpadding="2" cellspacing="7" style="vertical-align:top;">
    <tr>
    <td width="80" align="center" valign="top"><font style="font-size:85%;font-family:arial,sans-serif"></font></td>
    <td valign="top" class="j">
        <font style="font-size:85%;font-family:arial,sans-serif"><br />
        <div style="padding-top:0.8em;">
            <img alt="" height="1" width="1" />
        </div>
        <div class="lh">
            <a href="http://news.google.com/news/url?sa=t&amp;fd=R&amp;usg=AFQjCNEjddVUpIXf528-P5S0D0z5A0_QjQ&amp;url=http://www.daytondailynews.com/news/news/local/letter-points-to-plumbing-in-2011-legionnaires-out/nSmCp/">
        <b>Letter points to plumbing in 2011 <b>Legionnaires</b>&#39; outbreak at hospital</b></a><br /><font size="-1">
        <b><font color="#6f6f6f">Dayton Daily News</font></b></font><br />
        <font size="-1">A letter entered into court records identifies for the first time several factors that may have caused an outbreak of <b>Legionnaire&#39;s disease</b> in Miami Valley Hospital&#39;s new 12-story patient tower shortly after it opened in late 2010\. The outbreak, at the <b>...</b></font><br /><font size="-1" class="p"></font><br />
        <font class="p" size="-1"><a class="p" href="http://news.google.com/news/more?ncl=dRROval94f0jKyM&amp;ned=us"><nobr><b></b></nobr></a></font></div></font>
    </td>
    </tr>
</table> 
```

在我的 .aspx 页面上以 html 格式格式化。

我正在执行以下操作：

```
<%#  XPath("description").ToString()%> 
```

但它没有向我展示它的 html 渲染。我喜欢向我展示的内容已转换为 HTML。由于描述已经在 HTML 中，为什么它没有显示给我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T22:19:59.660

使用[文字控制](http://msdn.microsoft.com/en-us/library/system.web.ui.literalcontrol.aspx)

```
<asp:Literal id="Literal1" runat="server" text='<%# XPath("description").ToString() %>' /> 
```

# vector - tbb - concurrent_vector 地址到内存？

> ID：13058604
> 
> 赞同：0
> 
> 时间：2012-10-24T22:11:26.113
> 
> 标签：vector, concurrency, tbb, concurrent-vector

我正在尝试以`concurrent_vector`类似于`std::vector`.

所以 an`std::vector`可以像这样访问：`&stdVector[0]`.

但是 a 的等效项`concurrent_vector`不起作用：`&tbbVector[0]`.

我想这可能与内存如何在内部存储以实现并发有关，但是有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T23:09:43.290

与 std::vector 不同，concurrent_vector 不提供连续存储的保证。因此，获取第一个元素的地址并执行除访问第一个元素之外的任何操作都不是一个好主意。

# c# - 使用 word interp 计算 word doc 中的分页符

> ID：13058609
> 
> 赞同：1
> 
> 时间：2012-10-24T22:11:43.603
> 
> 标签：c#, interop

我一直在互联网上搜索如何在 word doc 中获取分页符，但无济于事。Microsoft 在此主题上提供的帮助很少。对于使用 word interop 获取分页符数量的任何帮助，我将不胜感激。我正在使用winform。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T23:28:06.640

您可以通过搜索 ^012 来计算分页符，如下所示：

```
 int totalPageBreaks = 0;
            Microsoft.Office.Interop.Word.Range rng;

            rng = doc.Range();
            rng.Collapse(WdCollapseDirection.wdCollapseStart);

            while (true) {
                rng.Find.ClearFormatting();
                rng.Find.Text = "^012";
                rng.Find.Forward = true;
                rng.Find.Wrap = WdFindWrap.wdFindStop;
                rng.Find.Format = false;
                rng.Find.MatchCase = false;
                rng.Find.MatchWholeWord = false;
                rng.Find.MatchWildcards = false;
                rng.Find.Execute();

                if (!rng.Find.Found)
                    break;

                // increment counter
                totalPageBreaks++;

                // do some processing here if you'd like

                // reset the range
                rng.Collapse(WdCollapseDirection.wdCollapseEnd);
            } 
```

# python - 查找 numpy 数组是否是 Python 中较大数组的子集

> ID：13058610
> 
> 赞同：1
> 
> 时间：2012-10-24T22:11:44.263
> 
> 标签：python, arrays, numpy, subset

我有 2 个数组，为简单起见，假设原始数组是一组随机数字：

```
import numpy as np
a=np.random.rand(N) 
```

然后我从这个数组中采样并打乱一个子集：

```
b=np.array()  <------size<N 
```

改组我不存储索引值，所以 b 是 a 的无序子集

有没有一种简单的方法来获取 b 的原始索引，所以它们与 a 的顺序相同，例如，如果 b 的元素 2 在 a 中具有索引 4，则创建一个其分配的数组。

我可以逐个元素地使用 for 循环检查，但也许有一种更 Pythonic 的方式

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T22:42:25.350

我认为计算效率最高的做法是跟踪`b`与创建时关联`a`的索引。`b`

例如，不是采样，而是对`a`的索引进行采样`a`：

```
indices = random.sample(range(len(a)), k)   # k < N
b = a[indices] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T05:47:01.680

如果`a`碰巧已排序，您可以执行以下操作：

```
>>> from numpy import array
>>> a = array([1, 3, 4, 10, 11])
>>> b = array([11, 1, 4])
>>> a.searchsorted(b)
array([4, 0, 2]) 
```

如果`a`未排序，您可能最好使用@unutbu 的答案之类的东西。

# r - R 数据帧的高效过滤（用户定义的不同过滤器）

> ID：13058614
> 
> 赞同：4
> 
> 时间：2012-10-24T22:11:55.773
> 
> 标签：r, filtering, performance

我希望在 R 中过滤一个数据框 original.data。该数据框可能有大约 1-2 百万个观察值。数据框有几个字段，名称可能会有所不同。用户可以选择要过滤的字段。这些字段名称存储在 names(all.filters) 中，其中 all.filters 是可变长度的列表。然后，用户可以为名称（all.filters）中的每个字段选择级别。例如，此列表可能类似于：

```
> all.filters
$Period
[1] "2010-12-31" "2011-03-31" "2011-06-30" "2011-09-30" "2011-12-31"
[6] "2012-03-31" "2012-06-30" "2012-09-30"

$Size
[1] "L"  "VL"

$Number
[1] "11" "21" "35" "42" "45" "47" "49" "52" "57" 
```

我正在使用以下代码应用选择的过滤器：

```
attach(original.data)    
filter.names <- names(all.filters)
flag <- 1
for(filter in filter.names){
   flag <- flag*(is.element(get(filter),all.filters[[filter]]))
}
filtered.data <- original.data[flag==1,] 
```

这行得通，但感觉有点慢。请注意，get(filter) 检索列名等于 filter 的 original.data 列。我不确定这是否是过滤数据的好方法，但 all.filters 的可变性质限制了我的选择 - 我想使用子集，但我不确定将什么作为选择参数。我想让这个过滤步骤尽可能快，以便当用户更新过滤器选择时，可以快速绘制数据。

过滤数据后，我使用 reshape2 对数据进行汇总，然后再使用 ggplot2 绘制数据。我认为如果可能的话，在这些步骤之一中应用过滤器可能会更有效。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T23:33:57.497

您可以将 a`data.table`与适当设置的键一起使用。这将节省内存。

然后你可以将你`list`的过滤器传递`i`给`[.data.table`

```
.period <- seq(from = as.Date("2010/1/1", "%Y/%m/%d"), to = as.Date("2012/1/1", 
    "%Y/%m/%d"), by = "3 months")
.size <- c("XS", "S", "M", "L", "XL")
.number <- as.character(1:100)
DF <- expand.grid(Period = .period, Size = .size, Number = .number, stringsAsFactors = F)

DF$other <- rnorm(nrow(DF))

library(data.table)

DT <- as.data.table(DF)

DT[, `:=`(Period, as.IDate(.period))]

##           Period Size Number    other
##    1: 2010-01-01   XS      1  0.17947
##    2: 2010-04-01   XS      1  1.43252
##    3: 2010-07-01   XS      1 -0.97142
##    4: 2010-10-01   XS      1 -0.98021
##    5: 2011-01-01   XS      1 -0.62964
##   ---                                
## 4496: 2011-01-01   XL    100  0.65831
## 4497: 2011-04-01   XL    100 -0.45277
## 4498: 2011-07-01   XL    100 -0.14236
## 4499: 2011-10-01   XL    100 -0.02376
## 4500: 2012-01-01   XL    100 -0.11525

all_filters <- list(Period = as.IDate(as.Date("2010/1/1", format = "%Y/%m/%d")), 
    Size = "L", Number = c("11", "21", "35", "42", "45", "47", "49", "52", "57"))

setkeyv(DT, names(all_filters))

DT[all_filters]

##        Period Size Number   other
## 1: 2010-01-01    L     11  1.4122
## 2: 2010-01-01    L     21 -0.4923
## 3: 2010-01-01    L     35  1.1262
## 4: 2010-01-01    L     42  1.3527
## 5: 2010-01-01    L     45 -0.3758
## 6: 2010-01-01    L     47 -0.1847
## 7: 2010-01-01    L     49 -0.8503
## 8: 2010-01-01    L     52 -1.0645
## 9: 2010-01-01    L     57 -0.6092 
```

我能看到的唯一问题是您每次都必须重置密钥以确保引用正确的列。此外，您需要确保过滤器标识符与 data.frame 中的列属于同一类 - 使用`character`非`factor`列可能更容易

## 编辑

要在多个列上过滤多个级别，请使用`CJ`. CJ 是一个交叉连接，（data.table 等效于 expand.grid，带有键集）

```
all_filters <- list(Period = as.IDate(as.Date("2010/1/1", format = "%Y/%m/%d")), 
  Size = c("L",'XL'), Number = c("11", "21", "35", "42", "45", "47", "49", "52", "57"))

cj_filter <- do.call(CJ, all_filters)

# note you could avoid this `do.call` line by
# cj_filter <- CJ(Period = as.IDate(as.Date("2010/1/1", format = "%Y/%m/%d")), 
  Size = c("L",'XL'), Number = c("11", "21", "35", "42", "45", "47", "49", "52", "57"))

setkeyv(DT, names(cj_filter))

DT[cj_filter]
       Period Size Number       other
 1: 2010-01-01    L     11  0.36289104
 2: 2010-01-01    L     21  1.26356767
 3: 2010-01-01    L     35 -0.18629723
 4: 2010-01-01    L     42  0.92267902
 5: 2010-01-01    L     45  1.68796072
 6: 2010-01-01    L     47  1.75107447
 7: 2010-01-01    L     49  0.24048407
 8: 2010-01-01    L     52  0.06675221
 9: 2010-01-01    L     57  0.49665392
10: 2010-01-01   XL     11  0.33682495
11: 2010-01-01   XL     21  0.67642271
12: 2010-01-01   XL     35 -0.16412768
13: 2010-01-01   XL     42  0.72863394
14: 2010-01-01   XL     45 -0.55527588
15: 2010-01-01   XL     47  1.30850591
16: 2010-01-01   XL     49  1.08688166
17: 2010-01-01   XL     52 -0.31157250
18: 2010-01-01   XL     57  0.43626422 
```

你也可以做

```
 setkeyv(DT, names(all_filters))

 DT[do.call(CJ,all_filters)] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T22:38:28.623

一种稍微更通用的方法，它不依赖于对字段名称进行硬编码：假设您`data.frame`和您的过滤器以相同的顺序具有相同的列/字段：

```
foo <- data.frame(Period=sample(x=c("2010-12-31","2011-01-01"),size=100,replace=TRUE),
    Size=sample(x=c("S","L","VL"),size=100,replace=TRUE),
    Number=sample(x=c("9","11","21"),size=100,replace=TRUE))

all.filters <- list(
    Period=c("2010-12-31","2011-03-31"),
    Size=c("L","VL"),
    Number=c("11","21","35")) 
```

然后我们需要针对第一个过滤器条目应用`%in%`到第一列，`foo`针对第二个条目应用第二列，依此类推：

```
bar <- mapply(FUN='%in%',foo,all.filters) 
```

`foo`最后，我们提取所有过滤器匹配的那些行：

```
foo[apply(bar,1,all),] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T22:30:25.053

看起来您想要的是与任何过滤器选项匹配的数据？所以`"L"`或者`"VL"`，例如，无论时期如何？

在这种情况下，我会这样做：

```
Filtered.Data <- subset(original.data, Period %in% all.filters$Period | 
            Size %in% all.filters$Size | Number %in% all.filters$Number) 
```

根本不应该花很长时间。如果您想要与所有这些值匹配的数据，请明显替换`|`为`&`。如果你有很多过滤器类别，你可以做一个`for`循环和`rbind`废话。

# javascript - 如何旋转一个javascript数组

> ID：13058615
> 
> 赞同：3
> 
> 时间：2012-10-24T22:11:55.680
> 
> 标签：javascript, arrays

我有这个 javascript 数组：

```
[['a', 'x', 1],
 ['a', 'y', 2],
 ['b', 'x', 3],
 ['b', 'z', 4],
 ['c', 'y', 5],
 ['c', 'z', 6]] 
```

我如何将它旋转到类似于下面的第二列（'x'，'y'，'z'）从上面穿过。

```
[['a', 1, 2, null],
 ['b', 3, null, 4],
 ['c', null, 5, 6]] 
```

编辑：对不起，我不清楚。到目前为止的答案似乎是引用 x、y、z 的静态长度/值。该数组将是动态的，并且可以在第二列中包含任何内容（例如，'t'、'u'、'v'、'w' 而不是 'x'、'y'、'z'）。我想我需要先用所有可能组合的空值填充数组，然后推入值。

谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T22:26:53.170

根据 Fabricio 的评论，您可以通过以下方式完成类似的操作：

```
var result = {};
for(var i=0;i< basearray.length;i++){
    if(!result[basearray[i][0]]){
        result[basearray[i][0]]={};
    }
    result[basearray[i][0]][basearray[i][1]]=basearray[i][2];
} 
```

请注意，这将返回一个对象或哈希图，而不是严格意义上的数组，但数据更有条理，如果您愿意，可以轻松地将其转换为数组。[这](http://jsfiddle.net/9Lakw/show/)是一个演示（检查您的控制台）。

通过添加此代码：

```
var count=0;
for(var key in result){
    result[count]=[];
    result[count][0]=key;
    result[count][1]=result[key].x||null;
    result[count][2]=result[key].y||null;
    result[count][3]=result[key].z||null;
    count++;
} 
```

您的结果对象现在可以模拟结构、原始数组和建议的键值对。你可以在这里看到结果：http: [//jsfiddle.net/9Lakw/3/](http://jsfiddle.net/9Lakw/3/)

这是`result`看起来的样子：

```
{
   "a":{
      "x":1,
      "y":2
   },
   "b":{
      "x":3,
      "z":4
   },
   "c":{
      "y":5,
      "z":6
   },
   "0":[
      "a",
      1,
      2,
      null
   ],
   "1":[
      "b",
      3,
      null,
      4
   ],
   "2":[
      "c",
      null,
      5,
      6
   ]
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T22:31:21.777

这就是我的做法，使用`null`问题中的数组和填充符。这假设给定点的坐标总是连续出现的。

```
var arr = [['a', 'x', 1],
 ['a', 'y', 2],
 ['b', 'x', 3],
 ['b', 'z', 4],
 ['c', 'y', 5],
 ['c', 'z', 6]];

var aux = {
        x: 1,
        y: 2,
        z: 3
    },
    output = [],
    lastItem,
    currItem;

for (var i = 0; i < arr.length; i++) {
    currItem = arr[i];
    if (currItem[0] !== lastItem) {
        lastItem = currItem[0];
        output.push([lastItem, null, null, null]);
    }
    output[output.length-1][aux[currItem[1]]] = currItem[2];
}
console.log(output); //[["a", 1, 2, null], ["b", 3, null, 4], ["c", null, 5, 6]] 
```

[**小提琴**](http://jsfiddle.net/ult_combo/nRHCT/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T22:37:03.743

你确定这是你想要的格式吗？似乎更明智的是：

```
{
    a: {x: 1, y: 2},
    b: {x: 3, z: 4},
    c: {y: 5, z: 6}
} 
```

您可以从中获得：

```
var results = {};
data.forEach(function(el) {
    var name = el[0];
    var prop = el[1];
    var value = el[2];
    results[name] = results[name] || {};
    results[name][prop] = value;
}) 
```

# ruby - 如何将包含的私有方法公开为公共类方法？

> ID：13058617
> 
> 赞同：2
> 
> 时间：2012-10-24T22:12:09.427
> 
> 标签：ruby, module

我正在尝试制作一个扩展`FileUtils`类功能的模块。

```
require 'fileutils'

module FileManager
  extend FileUtils
end

puts FileManager.pwd 
```

如果我运行这个，我会得到一个`private method 'pwd' called for FileManager:Module (NoMethodError)` 错误

**更新：**
为什么这些类方法是私有的，我怎样才能公开**它们，**而**不必手动将每个方法**作为公共类方法包含在 FileManager 模块中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T23:06:33.137

似乎实例方法`FileUtils`都是私有的（如另一个答案中所述，这意味着它们只能在没有显式接收器的情况下调用）。当你包含或扩展时，你得到的是实例方法。例如：

```
require 'fileutils'

class A
  include FileUtils
end
A.new.pwd #=> NoMethodError: private method `pwd' called for #<A:0x0000000150e5a0>

o = Object.new
o.extend FileUtils
o.pwd #=> NoMethodError: private method `pwd' called for #<Object:0x00000001514068> 
```

事实证明，我们想要的所有方法`FileUtils`都存在两次，作为私有实例方法和公共*类方法*（也称为单例方法）。

基于[这个答案](https://stackoverflow.com/a/4662934/1535283)，我想出了这段代码，它基本上将所有类方法从复制`FileUtils`到`FileManager`：

```
require 'fileutils'

module FileManager
  class << self
    FileUtils.singleton_methods.each do |m|
      define_method m, FileUtils.method(m).to_proc
    end
  end
end

FileManager.pwd #=> "/home/scott" 
```

它不漂亮，但它可以完成工作（据我所知）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T22:43:55.797

```
require 'fileutils'

module FileManager
  extend FileUtils

  def FMpwd
    pwd 
  end 

  module_function :FMpwd
end

puts FileManager.FMpwd

=> /home/rjuneja/Programs/stackoverflow 
```

这部分是因为 Ruby 对待私有和受保护的方法与其他语言略有不同。当一个方法在 Ruby 中被声明为私有时，这意味着这个方法永远不能被显式的接收者调用。任何时候我们能够调用带有隐式接收器的私有方法，它总是会成功。您可以在这里找到更多信息：

[http://www.skorks.com/2010/04/ruby-access-control-are-private-and-protected-methods-only-a-guideline/](http://www.skorks.com/2010/04/ruby-access-control-are-private-and-protected-methods-only-a-guideline/)

为什么不猴子修补 FileUtils 以包含您想要的方法：

```
require 'fileutils'

module FileUtils
  class << self
    def sayHello
      puts "Hello World!"
    end 
  end 
end

FileUtils.sayHello
=> "Hello World!" 
```

# php - 如何在 PHP 脚本中静默运行外部 PHP 脚本？

> ID：13058619
> 
> 赞同：0
> 
> 时间：2012-10-24T22:12:36.877
> 
> 标签：php

例如：

**server-a.com/test.php**的内容：

```
echo 'hello world one';

// now I need to call server-b.com/test.php here silently
// without interfering with user experience

echo 'hello world two'; 
```

* * *

**server-b.com/test.php**的内容：

`mail($foo, $bar, $qux); header('location: http://google.com');`

* * *

现在运行`server-a.com/test.php`应该输出`hello world one hello world two`。即使`server-b.com/test.php`调用成功，它也不应该重定向到 google.com。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T22:18:50.037

您可以使用[file_get_contents()](http://php.net/manual/en/function.file-get-contents.php)

```
file_get_contents("server-b.com/test.php"); 
```

或[卷曲](http://php.net/manual/en/book.curl.php)

```
$ch = curl_init(); 
curl_setopt($ch, CURLOPT_URL, "server-b.com/test.php"); 
curl_setopt($ch, CURLOPT_HEADER, TRUE); 
curl_setopt($ch, CURLOPT_NOBODY, TRUE); // remove body 
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE); 
curl_exec($ch); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T22:17:22.033

使用此函数 file_get_contents()：

```
file_get_contents("server-b.com/test.php"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T22:19:50.093

您可以为此使用[Symfony2 的 Process 组件](http://symfony.com/doc/current/components/process.html)。例子：

```
use Symfony\Component\Process\PhpProcess;

$process = new PhpProcess(<<<EOF
    <?php echo 'Hello World'; ?>
EOF
);
$process->run(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T22:22:17.850

您可以使用 删除位置标头[`header_remove`](http://www.php.net/manual/en/function.header-remove.php)。包含 server-b.com/test.php 后，只需调用

```
header_remove('Location'); 
```

# java - 为什么在无限循环时，while 和 do-while 循环优于 for 循环？

> ID：13058620
> 
> 赞同：1
> 
> 时间：2012-10-24T22:12:38.430
> 
> 标签：java, loops, infinite-loop

我是编程新手，并且是计算机科学的第一年，对循环有点困惑。当谈到无限循环时，为什么 while 和 do-while 循环比 for 循环更受欢迎？我创建了一个简单的无限 for 循环，它就像创建一个 while 循环一样简单。一种循环比另一种更快吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T22:14:18.847

`while(true)`因为它可能比编写（和阅读意图）更容易`for(;;)`？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T22:15:42.110

“for()”循环几乎等同于初始化索引、声明 while() 条件以及递增/递减循环。

绝对*没有*性能差异。

"while (true)" 通常比 "for (;;)" 更受欢迎，除了像我这样阅读并尊重原始 K&R“白皮书”-“C 编程语言”的人:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T22:15:03.977

没有一个比另一个快。就是这样：

```
while (true)
{
} 
```

看起来比：

```
for (; ; )
{
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-24T22:15:05.843

`while(true)`比读起来更简单`for(;;)`——你不需要弄清楚它的意思——它几乎是用英文拼写出来的。

# ios - 如何删除所有注释图钉然后添加一个新图钉

> ID：13058621
> 
> 赞同：1
> 
> 时间：2012-10-24T22:12:53.620
> 
> 标签：ios, annotations, mkmapview

好奇是否有人可以帮助做一件事：

我只是想告诉 Xcode，如果地图上同时存在“addAnnotation”和“newAnnotation”引脚，则删除初始的“newAnnotation”引脚。

我的非工作代码如下：

```
if ([self.mapView addAnnotation:addAnnotation] & [self.mapView addAnnotation:newAnnotation] return)
{
    [self.mapView removeAnnotation:newAnnotation];
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T23:10:35.253

感谢您的反馈，但我解决了这个问题：

```
NSArray *existingpoints = mapView.annotations;

if ([existingpoints count])
    [mapView removeAnnotations:existingpoints]; 
```

# mysql - 在 SQL 中连接两个表

> ID：13058625
> 
> 赞同：1
> 
> 时间：2012-10-24T22:13:08.790
> 
> 标签：mysql, sql

我有两个共享同一列 ( `C`) 的表，但 SQL 告诉我有一个错误

这是第一个查询的第一个表：

```
SELECT   E.C AS C, 
         COUNT(C) AS CC
FROM     E
GROUP BY E.C 
```

这是第二个查询：

```
SELECT   E.C AS C, 
         COUNT(C) AS Num
FROM     E, G
WHERE    E.G = G.L
         AND G.G <
                    (SELECT min(G.G) 
                     FROM   G
                     WHERE  G.L = "BLAH")

GROUP BY E.C 
```

所以我试图简单地将这两者放在一起，放在`JOIN`它们之间。但这并没有加入他们，即使他们共享同一列`C`。它只是说我有语法错误。怎么了？我该如何解决？我已经确认，当单独运行时，它们会产生带有列的正确输出`C`

以下是总`JOIN`执行情况

```
(SELECT   E.C AS C, 
             COUNT(C) AS CC
    FROM     E
    GROUP BY E.C)

JOIN

(SELECT   E.C AS C, 
             COUNT(C) AS Num
    FROM     E, G
    WHERE    E.G = G.L
             AND G.G <
                        (SELECT min(G.G) 
                         FROM   G
                         WHERE  G.L = "BLAH")

    GROUP BY E.C) 
```

错误是错误代码1064，SQL状态42000：您的SQL语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在 'JOIN 附近使用的正确语法

```
(SELECT   E.C AS C, 
         COUNT(C) AS Num' at line 6
Line 1, column 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T22:16:02.873

您没有显示您的语法错误，但我猜您与以下行有关：

```
COUNT(C) AS CC 
```

由于两个表都有一个 column `C`，查询不知道从哪个表返回值。您需要在其前面加上表名或别名。

此行适用于您的第一个查询，因为您只有一个名为 的列`C`，一旦您有两个列，您需要指定要返回的列。

根据您的编辑，您缺少子查询的别名和连接的 on 条件：

```
select t1.C, t1.cc, t2.num
from 
(
    SELECT   E.C AS C, 
             COUNT(C) AS CC
    FROM     E
    GROUP BY E.C
) t1  -- added alias
INNER JOIN
(
    SELECT   E.C AS C, 
             COUNT(E.C) AS Num  -- added table name, since column c exists in both tables
    FROM    E 
    JOIN    G
        ON E.G = G.L
    WHERE  G.G < (SELECT min(G.G) 
                   FROM   G
                   WHERE  G.L = "BLAH")
    GROUP BY E.C
) t2  -- added alias
    on t1.C = t2.C  -- added on clause 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T22:19:47.803

尝试这个：

```
select Z.C /*other*/ 
from (SELECT   E.C AS C, 
               COUNT(E.C) AS CC
      FROM     E
      GROUP BY E.C) Z

JOIN (SELECT   E.C AS C, 
             COUNT(E.C) AS Num
       FROM     E, G
       WHERE    E.G = G.L
                AND G.G < (SELECT min(G.G) 
                           FROM   G
                          WHERE  G.L = "BLAH")    
       GROUP BY E.C) Y on Y.C = Z.C 
```

# java - 如何将元素保存为 UTF8 中的字符串？

> ID：13058629
> 
> 赞同：0
> 
> 时间：2012-10-24T22:13:29.867
> 
> 标签：java, xml-serialization, type-conversion

我以这种方式将 org.w3c.dom.Element 转换为 String：

```
StringWriter writer = new StringWriter();
Transformer transformer = TransformerFactory.newInstance().newTransformer();
transformer.setOutputProperty(OutputKeys.ENCODING, "UTF-8");
transformer.transform(new DOMSource(node), new StreamResult(writer));
String result = writer.toString(); 
```

但是当我稍后使用它时，我得到一个异常：**io.MalformedByteSequenceException: Invalid byte 1 of 1-byte UTF-8 sequence**表示错误编码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T09:01:46.657

事实上，这完全没有必要。我需要它用于序列化节点并进一步将它们导出为不同的格式（xml、html、测试）。所以我发现最好分享**org.w3c.dom 文档**。从文档中，您可以获得所需的任何信息。

# javascript - 浏览器调整大小作为函数侦听器以动画其他元素

> ID：13058631
> 
> 赞同：0
> 
> 时间：2012-10-24T22:13:40.143
> 
> 标签：javascript, jquery, resize

所以，我有一个函数 animateSection() 可以为两个元素设置动画，#awards 和#twitter。

我想这样做，如果用户调整浏览器的大小

```
function animateSection() {
  var $checker  = $(window).width(),
      $twitter  = $('#jstwitter'),
      $awards   = $('#awards');

  var distance = 20,
      duration = 500;

  if($checker > 1140) {
    $twitter.fadeIn(duration, function() {
      $awards.fadeIn(duration);
    });
  } 
  else {
    $(window).resize(function(){
      // here is where I run into trouble...
      if($checker > 1140) {
        $twitter.animate({left: distance}, duration);
        $awards.animate({right: distance}, duration);
      }
    });
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T22:24:12.340

当您第一次运行存储`$(window).width()`在局部变量中的函数时`$checker`，然后在调整大小时检查该变量。它不会改变！尝试更换：

```
if ($checker > 1140) { 
```

和：

```
if ($(window).width() > 1140) { 
```

# tar - 如何使用此 AppleScript 在终端中查看 tar 归档过程？

> ID：13058632
> 
> 赞同：1
> 
> 时间：2012-10-24T22:13:44.977
> 
> 标签：tar

我让这个脚本在 Finder 中作为应用程序工作，但我想在存档完成时收到警报。知道我该怎么做吗？

```
 tell application "Finder"
set theItems to selection
repeat with _a from 1 to (count of theItems)
    set theItem to (item _a of theItems) as alias
    set itemPath to quoted form of POSIX path of theItem
    set fileName to name of theItem
    set theFolder to POSIX path of (container of theItem as alias)
    set zipFile to quoted form of (theFolder & fileName & ".tgz")
    do shell script "tar czvf " & zipFile & " " & itemPath
end repeat 
```

结束告诉

非常感谢埃里克

# css - CSS 液体布局，其中页脚 div 跟随页面大小并停留在底部

> ID：13058638
> 
> 赞同：0
> 
> 时间：2012-10-24T22:14:28.490
> 
> 标签：css, layout, html, liquid-layout

我正在研究以下布局结构：

```
<div id="wrapper">
    <div id="header"></div>
    <div id="pageContainer"></div>
    <div id="footer"></div>
</div> 
```

使用以下 CSS，我将页脚设置为页面底部：

```
#wrapper {
   min-height:100%;
   position:relative;
}
#header {
   background:#ff0;
   padding:10px;
}
#pageContainer {
   padding:10px;
   padding-bottom:60px;
}
#footer {
   position:absolute;
   bottom:0;
   width:100%;
   height:60px;
   background:#6cf;
} 
```

![问题模式](../Images/a3a45aec31643f2f4262dff5500188bd.png)

如果“pageContainer div”中的内容很小，我不想在 div 中显示滚动条，而是将页脚附加到“pageContainer div”的底部（不是页脚总是在底部视口）

如果“pageContainer div”的内容很长，我需要页脚在视口（底部）中保持可见，并在“pageContainer div”中显示滚动条。

我该怎么做呢？有任何想法吗？谢谢！

PS：我需要一个不使用JS的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T22:45:13.323

我想你可以做这样的事情：

```
#header {
   background:#ff0;
   padding:10px;
   height: 15%;
}
#pageContainer {
   padding:10px;
   max-height: 70%;
   overflow: auto;
}
#footer {
   bottom:0;
   width:100%;
   height:15%;
   background:#6cf;
}​ 
```

请注意，您需要以百分比指定您的身高。填充也可能是一个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T06:14:16.873

如果我没看错，您描述的是定位从相对切换到固定的行为，具体取决于元素相对于视口中可用房地产的大小。

可以肯定的是，如果没有 JavaScript，您将无法实现这一目标。

但是，页脚始终位于视口底部的解决方案相当常见，并且无需 JavaScript 也很容易实现。如果您还不知道如何操作：

```
#header, #pageContainer, #footer{
    position:fixed;
    left:0px;
    right:0px;
}
#header{
    top:0px;
    height:100px;
    background:#ff0;
}
#pageContainer {
    top:100px;
    bottom:60px;
    overflow:auto;
}
#footer {
    bottom:0px;
    width:100%;
    height:60px;
    background:#6cf;
} 
```

# matlab - MATLAB - 两个图像的直方图匹配

> ID：13058642
> 
> 赞同：3
> 
> 时间：2012-10-24T22:14:39.923
> 
> 标签：matlab, histogram, matching

我需要编写一个函数来匹配`image2`要重新映射的图像的直方图，我们称之为`image1`。但我不允许使用`histeq`. 你能帮我写代码吗？

ps：另外我想知道如果我被允许使用，我将如何进行该操作`histeq`？提取红绿蓝通道后该怎么办？（我不能使用`histeq(R2,R1)`？）

```
image1 = imread('color1.jpeg');
image2 = imread('color2.jpeg');

R1 = image1(:, :, 1);
G1 = image1(:, :, 2);
B1 = image1(:, :, 3);

R2 = image2(:, :, 1);
G2 = image2(:, :, 2);
B2 = image2(:, :, 3); 
```

问候，艾玛迪斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T22:38:35.743

我认为这个问题不够具体。解决此问题的一种方法是将三个通道转换为灰度图像 (`rgb2gray`​​ )，计算两个直方图 ( `hist`)，然后在直方图之间找到所需的映射并将其应用于原始图像的每个通道。

不需要转换为灰度，您可以在每个通道上执行此算法，然后稍后将通道连接在一起。

检查这个[问题](https://stackoverflow.com/questions/6351377/histogram-matching-of-two-colored-images-in-matlab)，它使用`histq`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T06:55:32.317

直方图匹配算法由 3 个阶段组成： 1 计算归一化第一张图像的 CDF (T(r))。2 计算归一化第二张图像 (G(z)) 的 CDF。3-计算 G^-1(T(r)) 并将第一张图像的强度值转换为所需的强度值。

# css - 两个盒子并排

> ID：13058643
> 
> 赞同：0
> 
> 时间：2012-10-24T22:14:41.583
> 
> 标签：css, image, positioning

我在 jsfiddle 中抛出了一个简单的示例来向您展示正在发生的事情，然后我将解释我想要实现的目标..

[http://jsfiddle.net/4UMLq/20/](http://jsfiddle.net/4UMLq/20/)

（代码 html - 在 jsfiddle 中）

```
<html>
<head>
</head>
<body>
    <div class="box1top">
    </div>
    <div class="box1middle">
        <p> Test </p><br />
        <p> Test </p>
    </div>
    <div class="box1bottom">
    </div>
        <div class="box1top">
    </div>
    <div class="box1middle">
        <p> Test </p><br />
        <p> Test </p>
    </div>
    <div class="box1bottom">
    </div>
</body>
</html>​ 
```

（代码 css - 在 jsfiddle 中）

```
.box1top {
    width: 150px;
    height:30px;
    background-color:#373737;
    margin-left:10px;
    margin-right:10px;
    margin-top:10px;
}
.box1middle {
    width: 150px;    
    height:200px;
    background-color:#676767;
    margin-left:10px;
    margin-right:10px;
}
.box1bottom {
    width: 150px;
    height:10px;
    background-color:#373737;
    margin-left:10px;
    margin-right:10px;
}
.box2top {
    width: 150px;
    height:30px;
    background-color:#373737;
    margin-left:10px;
    margin-right:10px;
}
.box2middle {
    width: 150px;    
    height:200px;
    background-color:#676767;
    margin-left:10px;
    margin-right:10px;
}
.box2bottom {
    width: 150px;
    height:10px;
    background-color:#373737;
    margin-left:10px;
    margin-right:10px;
} 
```

在上面的示例中，背景颜色将是包含文本的框的图像（分为 3 个图像）

但是我想在浏览器窗口中并排显示这些，而不是在另一个下方显示。我尝试浮动元素等，但我似乎无法做到这一点？

有没有人有任何想法？任何帮助表示赞赏

谢谢，卡洛斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T22:26:14.410

编码（任何东西）时的一般原则是保持干燥（不要重复自己）。

见这里：http: [//jsfiddle.net/4UMLq/21/](http://jsfiddle.net/4UMLq/21/)

幸运的是，CSS 让我们可以轻松地做到这一点：

```
.box{
    float:left;
    margin:10px 10px 0 10px;
    width: 150px;
}

.box-top {
    height:30px;
    background-color:#373737;
}
.box-middle {   
    height:200px;
    background-color:#676767;
}
.box-bottom {
    height:10px;
    background-color:#373737;
}

#box2{
    margin-left:0;
} 
```

HTML：

```
<div id="box1" class="box">
    <div class="box-top">
    </div>
    <div class="box-middle">
        <p> Test </p>
        <p> Test </p>
    </div>
    <div class="box-bottom">
    </div>
</div>    
<div id="box2" class="box">
    <div class="box-top">
    </div>
    <div class="box-middle">
        <p> Test </p>
        <p> Test </p>
    </div>
    <div class="box-bottom">
    </div>
</div> 
```

请注意，顶部、中间和底部 div 都嵌套在“盒子”div 内。没有理由创建重复`boxNtop`等 CSS 定义，因为许多元素可能共享相同的类名。所以，如果你想让它们看起来都一样，这很容易做到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T22:25:30.297

有几种方法可以做到这一点，但我认为您首先要将这些框包装在您可以浮动的东西中，例如：http: [//jsfiddle.net/wKqnh/](http://jsfiddle.net/wKqnh/)

HTML：

```
<div class="box-wrap">
    <div class="box1top">
    </div>
    <div class="box1middle">
        <p> Test </p><br />
        <p> Test </p>
    </div>
    <div class="box1bottom">
    </div>
</div> 
```

CSS：

```
.box-wrap {
    float: left;
} 
```

这会产生其他一些布局后果，例如，框之后的任何内容都将与最后一个框的左侧对齐，具体取决于其容器的大小。

这是一篇关于基于浮动的布局的基础知识的好文章：[http ://www.alistapart.com/articles/css-floats-101/](http://www.alistapart.com/articles/css-floats-101/)

# cocos2d-iphone - cocos2d 计算给定起点、角度和距离的目的地点

> ID：13058644
> 
> 赞同：3
> 
> 时间：2012-10-24T22:14:48.410
> 
> 标签：cocos2d-iphone

我认为快一个。Cocos2d 和 xcode 中的二维问题。

我有

```
CGPoint currPoint;
float lineLength;
float angle; 
```

现在，我需要找到距离 currPoint 的 lineLength 的点，角度为 Degrees。

试图搜索，但我找到的答案并不是我想要的。希望有人指出我忽略的（我假设）非常简单的数学。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T22:35:12.790

从我的头顶：

```
CGPoint endPoint;
endPoint.x = sinf(CC_DEGREES_TO_RADIANS(angle)) * lineLength;
endPoint.y = cosf(CC_DEGREES_TO_RADIANS(angle)) * lineLength;
endPoint = ccpAdd(currPoint, endPoint); 
```

不确定向量指向的位置，如果它可以旋转 90、180 或 270 度。如果是这样，只需从角度添加/减去该数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-07T21:08:36.030

我浪费了很多时间试图解决这个问题。最后，由于接受了答案并找到了计算角度的正确方法，我终于解决了这个问题。这是我的解决方案：

```
float angle = atan2(y2 - touchSprite->getPosition().y, x2 - touchSprite->getPosition().x) * 180 / M_PI;
float radiansAngle = CC_DEGREES_TO_RADIANS(angle);

Vec2 endPoint;
endPoint.y = sinf(radiansAngle) * lineLength + touchSprite->getPosition().y;
endPoint.x = cosf(radiansAngle) * lineLength + touchSprite->getPosition().x; 
```

# sql - 带有 SELECT 的 INSERT 工作一次

> ID：13058646
> 
> 赞同：0
> 
> 时间：2012-10-24T22:14:51.880
> 
> 标签：sql, sqlite

我的 SQLite 数据库上有 3 个表，如下所示：

表名

```
id
name
gender 
```

表姓氏

```
id
name 
```

表名

```
id
first
last
gender
birthday (null)
used (default 0) 
```

其中 first 和 last 是唯一的，并且还有一个索引，在 names 表上都是唯一的。

为了提供名称表，我使用了以下查询，该查询第一次有效，但是在我向 last_names 添加了一个新名称并尝试再次使用它之后它失败了。

```
INSERT INTO names (first, last, gender) 
       SELECT f.name AS first, l.name AS last, f.gender AS gender 
              FROM first_names f 
              LEFT JOIN last_names l 
              WHERE f.name NOT IN (SELECT first FROM names) AND 
                    l.name NOT IN (SELECT last FROM names) 
```

也尝试过使用`(first, last, gender, [birthday], [used])`with values as`null AS [birthday], 0 AS [used]`但由于它的生日在表格设计中设置为 null 并且默认为 0 并且它在第一次工作时认为不需要它也没有任何区别。

我认为这是因为独特的字段，但是我确实有一个 WHERE 来确保名称不在表名中。

我已经尝试使用 C# 和 SQLiteAdmin 执行查询而不请求结果，否则它不起作用。

我的查询有什么问题，为什么它只能工作一次？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T22:20:48.403

尝试使用： `WHERE NOT EXISTS ( SELECT * FROM names n WHERE n.first=f.name AND n.last=l.name)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T22:20:49.827

你没有检查名字和姓氏是否在同一条记录上我没有通过 sql 命令行运行它，但它应该可以工作：

```
INSERT INTO names (first, last, gender) 
       SELECT f.name AS first, l.name AS last, f.gender AS gender 
              FROM first_names f 
              LEFT JOIN last_names l 
              WHERE f.name NOT IN (SELECT subquery.first FROM (SELECT * FROM names WHERE l.name = last AND f.gender=gender) subquery) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T22:26:33.370

您的查询只能工作一次，因为即使您向 last_names 添加了另一个名称，first_names.name 中也没有 names.first 中不存在的值：

```
WHERE 
  f.name NOT IN (SELECT first FROM names) AND
  l.name NOT IN (SELECT last FROM names) 
```

f.name 的所有可能值都包含在`SELECT first FROM names`

也许您想用 OR 而不是 AND 来连接这些子句。

# dll - 如何检索受 Eazfuscator.NET 保护的 DLL 的源代码？

> ID：13058652
> 
> 赞同：1
> 
> 时间：2012-10-24T22:15:16.530
> 
> 标签：dll, deobfuscation, eazfuscator

我使用反射器来检索 C# DLL 的源代码。但是，我有一个受 Eazfuscator.NET 保护的 DLL。反射器无法从此 DLL 中检索代码。

如何从此 DLL 中检索代码？

感谢您的帮助。

# c - 如何遍历以空格分隔的每个单词？

> ID：13058657
> 
> 赞同：1
> 
> 时间：2012-10-24T22:15:44.407
> 
> 标签：c, string, ansi

我正在寻找一种方法来迭代从`getchar()`C 中的函数收集的字符串中的每个单词。我不能使用指针。句子中的每个单词都会对其进行处理，但不应受到其他单词的影响，我需要一种访问字母的方法，例如即使我在第三个单词，`buffer[k]`如果`k = 0`会给出第一个字母第三个字。

```
void read_line (char buffer[])
{
    char character;
    int i = 0;

    for (i = 0; i < 32; ++i)
    {
        character = getchar ();
        buffer[i] = character;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T22:18:33.933

没有指针有点困难（你正在传递数组，这些也是指针）。但是您可能根本不需要分配内存。看看[strtok](http://www.elook.org/programming/c/strtok.html)。

澄清：

正如@EdS 在下面的评论中指出的那样，数组和指针*不是*一回事。但是，在许多情况下，它们*几乎*是一回事。将数组传递给函数和将指针传递给函数几乎总是一回事——实际上。

所以，记住指针和数组是不一样的，你应该了解它们的区别，但现在不要担心。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T22:23:09.380

你想读一个写好的字符串行并计算单词，对吗？

首先，读取字符串：

```
char* str = gets(NULL);
int i = 0;
char* tok = strtok(str," ");
while(tok != NULL) {
    i++;
    tok = strtok(NULL, " ");
} 
```

您计算所有单词，以空格分隔。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T22:25:22.183

通常您会使用 strchr 在字符串中查找空格，但由于您不能使用指针：

```
void read_line (char buffer[]) 
{ 
    char character; 
    int i = 0; 

    for (i = 0; i < 32; ++i) 
    { 
        character = getchar (); 

        if (character == '\n')
            break;

        buffer[i] = character; 
    } 

    i = 0;

    while (buffer[i] != '\n')
    {
        for (; buffer[i] != ' '; ++i)
            // each iteration of this loop will be on the same word

        ++i;
    }
} 
```

# objective-c - 带有标注的多个注释的 MapView，如何将标题传递给下一个视图

> ID：13058659
> 
> 赞同：0
> 
> 时间：2012-10-24T22:15:45.623
> 
> 标签：objective-c, annotations, callouts

我有一个 mapView，用户可以在其中按下图钉。一次可能有多个引脚，每个注释视图都有一个标注，在按下时将新视图推送到堆栈。我想要做的是将注释视图的标题传递给第二个视图中的标签。

这是我放下别针的代码：

```
-(void)press:(UILongPressGestureRecognizer *)recognizer
{
    CGPoint touchPoint = [recognizer locationInView:worldView];
    CLLocationCoordinate2D touchMapCoordinate = [worldView convertPoint:touchPoint toCoordinateFromView:worldView];

    geocoder = [[CLGeocoder alloc]init];
    CLLocation *location = [[CLLocation alloc]initWithCoordinate:touchMapCoordinate
                                                    altitude:CLLocationDistanceMax
                                          horizontalAccuracy:kCLLocationAccuracyBest
                                            verticalAccuracy:kCLLocationAccuracyBest
                                                   timestamp:[NSDate date]];
    [geocoder reverseGeocodeLocation:location
               completionHandler:^(NSArray *placemarks, NSError *error) {
                   NSLog(@"reverseGeocoder:completionHandler: called");
                   if (error) {
                       NSLog(@"Geocoder failed with error: %@", error);
                   } else {
                       CLPlacemark *place = [placemarks objectAtIndex:0];
                       address = [NSString stringWithFormat:@"%@ %@, %@ %@", [place subThoroughfare], [place thoroughfare], [place locality], [place administrativeArea]];

                       if (UIGestureRecognizerStateBegan == [recognizer state]) {
                           addressPin = [[MapPoint alloc]initWithCoordinate:touchMapCoordinate
                                                                        title:address];
                           [worldView addAnnotation:addressPin];
                       }
                   }
               }];
} 
```

这是我调用第二个视图的代码：

```
-(void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view calloutAccessoryControlTapped:(UIControl *)control
{
   PinViewController *pinViewController = [[PinViewController alloc]init];
    [self passValues];
    [[self navigationController]pushViewController:pinViewController animated:YES];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T22:32:41.610

您可以覆盖 MKAnnotation（例如 MyLocation）并在 MyLocation.h 文件中声明

```
#import <Foundation/Foundation.h>
#import <MapKit/MapKit.h>

@interface MyLocation : NSObject <MKAnnotation> {
    NSNumber *identyfier;
    NSString *_name;
    NSString *_address;
    CLLocationCoordinate2D _coordinate;
}

@property (copy) NSString *name;
@property (copy) NSString *address;
@property (copy) NSNumber *identyfier;
@property (nonatomic, readonly) CLLocationCoordinate2D coordinate;

- (id)initWithName:(NSString*)name address:(NSString*)address 
    coordinate:(CLLocationCoordinate2D)coordinate identyfier:(NSNumber *) identyfier; 
```

@结尾

在 MyLocation.m 文件中：

```
#import "MyLocation.h"

@implementation MyLocation

@synthesize name = _name;
@synthesize address = _address;
@synthesize coordinate = _coordinate;
@synthesize identyfier = _identyfier;

- (id)initWithName:(NSString*)name address:(NSString*)address 
    coordinate:(CLLocationCoordinate2D)coordinate identyfier:(NSNumber *)identyfier {
    if ((self = [super init])) {
        _name = [name copy];
        _address = [address copy];
        _coordinate = coordinate;
        _identyfier = identyfier;
    }
    return self;
} 
```

在您的地图视图中，当您声明注释时，请使用以下方法：

```
MyLocation *pin = [[MyLocation alloc] initWithName:place.name address:place.address coordinate:coordinate2D identyfier:some_id]; 
```

因此，例如在您的地图委托中：

```
- (MKAnnotationView *) mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation { 
```

您可以使用：

```
((MyLocation *)annotation).identyfier 
```

检查选定的注释（当然你可以在 MyLocation 类中使用不同的变量）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T22:24:21.340

通常，当我需要传递变量时，我只需创建一个全局变量，然后两个视图都可以读取该变量。

有

extern (NSString *)some_variable_name，将其放入 .h 文件和全局放入的 .m 文件中 (NSString *)some_variable_name ；

所有视图都可以阅读

或者变量前面的 + 号，然后可以被包含该视图的所有视图读取（在 .m 文件的顶部设置全局，在 .h 文件中通过 comman

something = [someview that_variable] ;

# button - facebook like iframe 按钮，当它链接到一个 url 时显示，但不是 facebook 页面（仅限 safari）在 FF 中工作

> ID：13058665
> 
> 赞同：2
> 
> 时间：2012-10-24T22:16:26.573
> 
> 标签：button, iframe, facebook-like

对我来说真的很奇怪......

我已经在网站（iframe）上放了一个类似 facebook 的按钮，它在 Firefox 中显示良好，但没有出现在 safari 中，我链接到的页面是[http://www.facebook.com/corporategolfventures](http://www.facebook.com/corporategolfventures)

如果我链接到主站点 - [http://www.corporategolfventures.co.uk/](http://www.corporategolfventures.co.uk/)该按钮会显示在 safari 中并且工作正常，但我需要点赞按钮才能链接到 facebook 业务页面。

有任何想法吗？

谢谢

尼尔

PS。我刚刚意识到它只在您登录 facebook 时才在 Firefox 中显示.... 仍然不知道如何解决这个问题:(

# qt - 如何从 QWidget 的paintEvent() 中获取帧缓冲区

> ID：13058669
> 
> 赞同：1
> 
> 时间：2012-10-24T22:16:47.533
> 
> 标签：qt

有什么方法可以获取将在 QWidget 上显示的像素，进行一些处理，然后显示处理后的像素？

我似乎无法克服paintEvent() 的限制，希望有人能提供帮助。

QPixmap::grabWidget 和 QWidget::render 会得到我需要的像素，但它们不能从paintEvent() 中调用，因为这样做会触发无限循环。

我尝试过运行计时器、拍摄快照、进行处理、强制重绘并显示保存的图像。这在某种程度上有效，但在动态内容（即移动）上它失败了。

我需要能够在paintEvent() 中执行此操作。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T23:03:00.580

听起来您的问题最好通过将小部件渲染到像素图（在绘制事件中），在像素图上进行处理，然后将结果渲染到小部件来解决：

```
void MySuperAwesomeWidget::paintEvent(QPaintEvent* event)
{
   QPixmap pixmap(size());
   QPainter painter;

   painter.begin(&pixmap);
   // Drawing code goes here
   painter.end();

   // Do processing on pixmap here

   painter.begin(this);
   painter.drawPixmap(0, 0, pixmap);
   painter.end();
} 
```

通常，我所描述的技术会被认为是不必要的（甚至是不可取的），因为它本质上是一种双缓冲形式，并且已经在幕后`QWidget` [提供了双缓冲。](http://qt-project.org/doc/qt-4.8/qwidget.html#transparency-and-double-buffering)但是，在您的情况下，您正在执行最终渲染之前对绘图进行一些处理。因此，这可能是最好的方法。

# jena - 将 ontModel 写为 owl 而不是 jena 的 rdf

> ID：13058671
> 
> 赞同：3
> 
> 时间：2012-10-24T22:17:08.830
> 
> 标签：jena, owl

我有一个猫头鹰本体，我将它读入 Jena `OntModel`。然后我在运行时更新它。现在我想把它写回一个**OWL**本体。我正在使用下面的代码：

```
RDFWriter writer = model.getWriter("RDF/XML"); 
```

`writer.write(model, out, root_uri);`

... 给我**RDF**语法，而不是**OWL**语法。如何将`OntModel`into **OWL**语法写入？

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T07:16:36.060

欢迎来到 StackOverflow！Jena 不支持 OWL/XML 语法。它只支持各种 RDF 语法，包括 RDF/XML 和 Turtle。请参阅[此处](http://jena.apache.org/documentation/javadoc/jena/com/hp/hpl/jena/rdf/model/Model.html#write%28java.io.OutputStream,%20java.lang.String%29)了解 Jena 支持的格式。

因此，您要么需要使用其中一种语法（它可以很好地表达所有 OWL）。

或者切换到支持 OWL/XML 的其他库，例如[OWL API](http://owlapi.sourceforge.net/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T07:41:03.157

当然，如果您使用的是`getWriter("RDF/XML")`，它将用 RDF/XML 编写，这是 RDF 的一种序列化格式，所有 RDF 格式都是 OWL 的序列化语法。在以编程方式编写 OWL 时需要使用非 RDF 语法的情况很少，但如果您想这样做，请尝试使用[OWL API](http://owlapi.sourceforge.net/)，它可以用[OWL/XML](http://www.w3.org/TR/owl2-xml-serialization/)、[OWL 2 Manchester syntax](http://www.w3.org/TR/owl2-manchester-syntax/)或[OWL 2 函数式语法](http://www.w3.org/TR/owl2-syntax/)。

# c# - 如何将 C# 函数指针传递给 CLI/C++ 代码？

> ID：13058673
> 
> 赞同：2
> 
> 时间：2012-10-24T22:17:15.560
> 
> 标签：c#, c++-cli, function-pointers, unmanaged, managed

我希望非托管 C++ 代码将 C# 函数作为回调调用。我有一个围绕非托管代码的 CLI/C++ 类。此 CLI/C++ 类的实例存在于 C# 中。

C# 代码类似于以下文本。我有一个指向 callBack 方法的（委托）函数指针。我有 CLI_class 的 CLI 实例。我想在 addValueChangedCallBack 函数中以某种方式给它函数指针。

```
public Setup(){
    tempFUNC myFuncObj = new tempFUNC(callBack)
    CLI_class c=new CLI_class();
    c.addValueChangedCallBack(myFuncObj)
}

public delegate void tempFUNC(float x);

void callBack(float x){
....
} 
```

然后在 CLI 代码中我想做这样的事情：

```
void addValueChangedCallback(void (*ManipCallBack)(float)){
   unmanagedCPPCLASS.addValueChangedCallback(ManipCallBack)

} 
```

如何将函数指针转换为 C++ 指针 (*)？此外，我无法在 C++/CLI 项目中引用 C# 项目，因为 C# 类已经引用并使用了 C++/CLI 项目。会不会有依赖问题？

我在某些网站上看到了对“编组数据”或使用“互操作”的引用。我不明白它们是如何工作的，或者从我所看到的任何东西中它们到底做了什么，这些是我应该使用的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T22:51:04.070

您可以让两个项目相互引用并使用 System.InteropServices.Runtime.Marshal.GetFunctionPointerForDelegate 来获取函数指针。

但如果我是你，我会创建 C# 类[ComVisible](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.comvisibleattribute.aspx)并让 C++ 代码通过 COM 接口直接调用 C# 方法。这样就不需要 C++/CLI 包装器。正如您所经历的那样，包装器总是很痛苦。C++/CLI 有它的用途，但不是创建包装器。

# c# - 需要帮助使列表接受多个用户输入而不删除之前的输入

> ID：13058678
> 
> 赞同：1
> 
> 时间：2012-10-24T22:17:52.653
> 
> 标签：c#, winforms, collections

我需要帮助为我的班级制作分数计算器。分数的输入不能预设，它必须在增加计数的同时将所有先前的输入相加。

例如，假设我在文本框中输入了 23，然后按 Enter，然后输入 45，我需要我的程序保留 23 并将其添加到 45，并且只要用户输入数字，它就需要重复此操作。

我知道它需要是一个集合，并且我已经有了它的基础，我只需要代码来保存以前的输入并将其添加到新的输入中并保存该总数以将其添加到下一个输入中。

这是我解决这个问题的尝试：

```
 List<decimal> score = new List<decimal>();
        score.Add(scoreInput);
        decimal scoreTotal = 0;
        decimal scoreHolder = 0;
        foreach (decimal d in score)
        {

            scoreTotal = scoreHolder + scoreInput;
            scoreHolder = scoreInput;
            scoreInput = 0;
            txtTotal.Text = scoreTotal.ToString("");
            txtCount.Text = score.Count.ToString("");
            txtScore.Clear();
            txtScore.Focus();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T02:50:34.633

只需为 KeyDown 事件添加一个事件处理程序，并使用如下代码：

```
private void tbEntry_KeyDown(object sender, KeyEventArgs e)
{
    Decimal entry;

    if (e.KeyCode == Keys.Enter)
    {
        if (Decimal.TryParse(tbEntry.Text, out entry))
        {
            score.Add(entry);
        }

        tbResult.Text = score.Sum(s => s).ToString();
        tbEntry.Text = string.Empty;
    }
} 
```

这是实现您想要实现的目标的一种方式。

编辑：

这是假设您将变量“score”声明为表单的成员：

```
private  List<decimal> score = new List<decimal>(); 
```

干杯

# r - 生成变量名（类似于 get()）

> ID：13058679
> 
> 赞同：2
> 
> 时间：2012-10-24T22:17:54.427
> 
> 标签：r, function, variable-assignment

如何用循环替换此代码？

```
m1 <- ggplot(foo)
m2 <- ggplot(foo)
...
m9 <- ggplot(foo) 
```

我想我需要类似`get()`替换魔法（）的东西，但是 get 在这里不起作用。

```
for (i in 1:9){
  magic(i) <- ggplot(foo)
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T23:55:32.737

使用列表：

```
out <- list()

for (i in 1:9){
  out[[i]] <- ggplot(foo)
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T22:29:10.673

这将起作用：

```
p <- qplot(data = mtcars, wt, mpg)
for(i in 1:9) assign(paste0("m",i),p)
ls()
 [1] "i"  "m1" "m2" "m3" "m4" "m5" "m6" "m7" "m8" "m9" "p" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T22:37:53.373

像这样的东西应该工作：

```
for (i in 1:9) {
  name <- paste("m", i, sep="")
  assign(name, ggplot(foo))
} 
```

# ms-access - 将 JBoss 5.1 MDB EJB3 连接到远程 JMS 提供程序队列

> ID：13058681
> 
> 赞同：0
> 
> 时间：2012-10-24T22:18:18.580
> 
> 标签：ms-access, jboss, jms, ejb-3.0, hornetq

我在 JBoss 5.1.2 中运行的 MDB 通过 JMS 连接到远程独立 HornetQ 时遇到问题。我知道 HornetQ 已经启动并且运行良好，因为我可以连接到它并通过 HermesJMS 放置/查看消息。但是，我的实际应用似乎无法成功连接到它。

这是我的@MessageDriven 注释：

```
@MessageDriven(
        messageListenerInterface = MessageListener.class,
        activationConfig = { 
            @ActivationConfigProperty( //type of destination we pull messages from
                    propertyName = "destinationType", propertyValue = "javax.jms.Queue"),
            @ActivationConfigProperty( //which destination JNDI suffix we pull message from
                    propertyName = "destination", propertyValue = "queue/inputQueue"),
            @ActivationConfigProperty( //how many times to reattempt on service errors
                    propertyName = "dLQMaxResent", propertyValue = "1"),
            @ActivationConfigProperty( //how many seconds to try a reconnect when failure to connect to jms provider
                    propertyName = "reconnectInterval", propertyValue = "15"),
            @ActivationConfigProperty(
                    propertyName = "providerAdapterJNDI", propertyValue = "java:/RemoteJMSProvider")
         }
    ) 
```

这是我的 jms-ds.xml 文件中的配置：

```
 <mbean code="org.jboss.jms.jndi.JMSProviderLoader"
      name="hornetq:service=MSProviderLoader,name=RemoteJMSProvider,server=remotehost">
    <attribute name="ProviderName">RemoteJMSProvider</attribute>
    <attribute name="ProviderAdapterClass">org.jboss.jms.jndi.JNDIProviderAdapter</attribute>
    <!-- The connection factory -->
    <attribute name="FactoryRef">/LocalHornetQConnectionFactory</attribute>
    <!-- The queue connection factory -->
    <attribute name="QueueFactoryRef">/LocalHornetQConnectionFactory</attribute>
    <!-- The topic factory -->
    <attribute name="TopicFactoryRef">/LocalHornetQConnectionFactory</attribute>
    <!-- Connect to JNDI on the host "the-remote-host-name" port 1099-->
    <attribute name="Properties">
       java.naming.factory.initial=org.jnp.interfaces.NamingContextFactory
       java.naming.factory.url.pkgs=org.jboss.naming:org.jnp.interfaces
       java.naming.provider.url=IPADDRESS:1099
    </attribute>   </mbean> 
```

我可以在 JBoss jmx-console 中查看 RemoteJMSProvider。此外，在 JNDIView 中，我可以看到远程 JMS 提供者的 JNDI 名称。我还可以在 JMX 控制台中看到 jms.queue.inputQueue，但是当我尝试查看其上的消息时，它说没有消息，即使我通过查看 HermesJMS 知道有消息。

最后，在我的应用程序中没有例外。一切似乎都运行良好，但它从未收到任何消息。甚至 HornetQ 日志也显示我的 IP 地址已连接，所以我不确定为什么我无法读取队列：

```
[RMI TCP Connection(6)-10.3.78.123] 17:02:06,837 FINER [sun.rmi.transport.tcp]  RMI TCP Connection(6)-10.3.78.123: (port 1098) client using 10.3.78.123:0 
```

有任何想法吗？

这是我的HornetQ（2.2.5）配置信息供参考。

hornetq-jms.xml：

```
 <connection-factory name="LocalHornetQConnectionFactory">
      <xa>true</xa>
      <connectors>
         <connector-ref connector-name="netty"/>
      </connectors>
      <entries>
         <entry name="/LocalHornetQConnectionFactory"/>
      </entries>

      <retry-interval>5000</retry-interval>
      <retry-interval-multiplier>1.0</retry-interval-multiplier>
      <reconnect-attempts>-1</reconnect-attempts>
      <failover-on-server-shutdown>true</failover-on-server-shutdown>
      <confirmation-window-size>1048576</confirmation-window-size>
   </connection-factory>

   <queue name="invalidQueue">
    <entry name="/queue/invalidQueue"/>
   </queue>

   <queue name="inputQueue">
      <entry name="/queue/inputQueue"/>
   </queue>
   <queue name="errorQueue">
      <entry name="/queue/errorQueue"/>
   </queue>
   <topic name="SAFEStorageAcknowledgement">
      <entry name="/topic/SAFEStorageAcknowledgement"/>
   </topic>
   <topic name="SAFEEvents">
      <entry name="/topic/SAFEEvents"/>
   </topic> 
```

hornetq-configuration.xml：

```
 <address-settings>
      <!--default for catch all-->
      <address-setting match="#">
         <dead-letter-address>jms.queue.errorQueue</dead-letter-address>
         <expiry-address>jms.queue.errorQueue</expiry-address>
         <redelivery-delay>15000</redelivery-delay>
         <max-size-bytes>10485760</max-size-bytes>       
         <message-counter-history-day-limit>10</message-counter-history-day-limit>
         <address-full-policy>BLOCK</address-full-policy>
         <redistribution-delay>60000</redistribution-delay>
      </address-setting>
   </address-settings>

   <queues>
        <queue name="jms.queue.inputQueue">
            <address>jms.queue.inputQueue</address>
        </queue>

        <queue name="jms.queue.errorQueue">
            <address>jms.queue.errorQueue</address>
        </queue>

        <queue name="jms.queue.invalidQueue">
            <address>jms.queue.invalidQueue</address>
        </queue>

    </queues> 
```

所有其他 HornetQ 设置都是默认设置。

谢谢，安迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T13:46:45.523

您必须在 ra.xml 或注释中指定两个激活属性：

ConnectorClassName = org.hornetq.core.remoting.impl.netty.NettyConnectorFactory

连接参数=主机=127.0.0.1；端口=5446

在 HornetQ 发行版中，有一个名为 javaee/jca-remote 的示例使用 ra.xml 来配置激活属性。

# android - Android 数据库 SQLite 或 MySQL？

> ID：13058687
> 
> 赞同：0
> 
> 时间：2012-10-24T22:19:00.890
> 
> 标签：android, database

我是 Android 开发的新手，我正在为我的最后一年项目开发一个应用程序。

关于设置数据库的时间，我有点困惑。我读了一些东西，大多数人似乎都在使用 SQLite。

基本上我正在开发一个与它有太多不同方面的android应用程序。1\. 管理员在应用程序上输入数据并保存到数据库。2\. 用户打开app，查看数据库中的数据。必须通过 3g/wifi 网络输入和查看数据。

我需要在线托管我的数据库吗？最好使用哪个数据库？从阅读看来，SQLite 托管在您的本地磁盘上，所以我应该使用 MySQL 吗？任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T22:25:07.680

Android 包括 SQLite。因此，如果您将数据保存在 Android 系统本身的数据库中，则使用 SQLite。如果您将数据存储在其他地方，您可以随意使用任何您喜欢的东西，Oracle、DB2、Mysql 甚至 SQLite。

# java - Android - 仅发送所需的 json

> ID：13058688
> 
> 赞同：2
> 
> 时间：2012-10-24T22:19:21.637
> 
> 标签：java, android, json, serialization, deserialization

我根本想不通这个。假设我已从服务器检索序列化为 JSON 的产品，并且一旦 Android 应用程序接收到产品信息，它就会本地存储在文件系统上，我将如何完成以下操作？

假设我有一个服务器发送的产品列表（例如评价最高的产品或搜索结果等）。我希望能够让服务器只发送当前未存储在设备上的对象的完整 json 数据，否则只发送产品的 id。我可以发送存储在设备上的产品列表，但这显然会违背目的。我也可以只从服务器发回产品 ID 列表，设备可以从那里请求它需要的那些。这需要一个请求并将其转换为多个请求，因此也不理想。这是我目前能想到的仅有的两个选项。

此外，在产品 json 中的 30 个左右的字段中，可能有 1 或 2 个字段发生了变化（价格或评级）。在不发送整个产品或某些字段的情况下如何确定它是否已更改？目前我正在发送带有 json 的 md5 的产品 ID，如果它与设备上的内容匹配，则不要发送，但如果两个哈希值不匹配，则不要发送。同样，我认为这可能是最好的情况，但我不确定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T22:31:19.187

您必须在服务器上跟踪您的应用程序的状态。这意味着您的应用程序应该**登录**（或执行任何允许服务器向其传递用于知道这是特定客户端“实例”的唯一令牌的事情）。然后您的应用程序必须告诉服务器它已经拥有的 ID（或从服务器获取所有 ID）。服务器应始终记录发送给客户端的 ID（或记录这些由应用程序告知的 ID））。由于对服务器的每次调用都应附带令牌，因此服务器可以很容易地知道您当时的状态（除非您以任何其他方式注销、超时或使令牌无效）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T22:31:53.810

您可以做的一件事是您可以将通常一起更改的字段的散列分开，例如，您可以为（价格，评级）设置一个散列，为描述对象本身的字段设置另一个散列。然后设备可以只请求它需要更新的字段集。

您可以尝试的另一件事是使用 32 位 unix 时间戳而不是哈希。假设您保持一致并且每秒更新对象不超过一次，与 128 位 MD5 总和相比，您将节省一些带宽。

# asp.net - 站点不在 IIS 中工作，但在 Visual Studio 调试模式下工作 Asp.Net

> ID：13058689
> 
> 赞同：0
> 
> 时间：2012-10-24T22:19:33.683
> 
> 标签：asp.net, visual-studio-2010

我有一个网站正在开发中，它位于：C:\inetpub\wwwroot\site\

当我使用 Visual Studio 的调试模式时，它工作正常，我可以登录并做任何我想做的事情。但是，当我通过键入 URL: 访问 IIS 中的站点时`http://localhost/site/`，数据库连接似乎不起作用。错误消息是：System.NullReferenceException：对象引用未设置为对象的实例。

在 IIS 中运行时，它不会触发我在 VS 中设置的断点。它在视觉工作室中工作正常，我无法调试并发现什么问题。

有任何想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T19:32:17.690

我遇到了同样的问题，当我发现一个资源说仅仅运行引擎和 SQL Server 浏览器是不够的时，我几乎要发疯了，我希望这可以解决你的问题。

# asp.net-mvc-4 - 如何在 ASP.Net MVC 4 中为特定区域定义布局？

> ID：13058694
> 
> 赞同：22
> 
> 时间：2012-10-24T22:19:46.100
> 
> 标签：asp.net-mvc-4, asp.net-mvc-areas, razor-2

当我直接从 MVC2 转到 MVC4 时，我在这里有点追赶，所以一次学习 Razor 和其他所有东西。

我在这个新应用程序中使用了一个管理区域，我注意到当我进入管理区域中的控制器时，它呈现没有任何布局。我尝试将 _Layout.cshtml 复制到该区域的共享视图文件夹中，但它仍然呈现没有布局。我尝试搜索，但找不到有关如何设置用于区域的布局的任何信息。

我知道我可以在特定视图上执行此操作，但我想为整个区域设置一次

```
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
} 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-10-24T22:42:03.243

您必须在您所在地区的文件`_ViewStart.cshtml`夹下有文件`Views`。该文件将包含以下内容：

```
@{
    Layout = Request.IsAjaxRequest() ? null : "~/Areas/Admin/Views/Shared/_Layout.cshtml";
} 
```

# unicode - github中markdown中的非工作相对**unicode**链接

> ID：13058699
> 
> 赞同：1
> 
> 时间：2012-10-24T22:20:11.600
> 
> 标签：unicode, utf-8, github

我分叉了[回购](https://github.com/csswizardry/CSS-Guidelines)并将[其翻译](https://github.com/matmuchrapna/CSS-Guidelines/blob/master/README%20Russian.md)成我的母语。

英文自述文件中的原始目录没有问题 - 从目录到文件本身的标题有**工作相关链接。**
![在此处输入图像描述](../Images/009b1d404f6c546bb2c93455791c71c9.png)

我的结构相同的翻译文件没有这样的链接标题。
![在此处输入图像描述](../Images/049017b9aa7c8fe43535bc7c0285edb8.png).

我注意到英文链接也可以工作，与 unicode 链接相反：
![在此处输入图像描述](../Images/28ae2135b743d797c2dba28339291891.png)

**什么是问题？为什么我的自述文件中的目录不起作用？**

# svn - 通过 svn 限制对文件的访问，但能够提交新文件

> ID：13058700
> 
> 赞同：0
> 
> 时间：2012-10-24T22:20:13.763
> 
> 标签：svn, tortoisesvn

**编辑问题：**

是否可以只允许该人通过 svn 访问某些文件和文件夹？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T04:21:54.253

是的。

有几种方法可以做到这一点。

一种是在服务器上设置[访问控制](http://svnbook.red-bean.com/en/1.7/svn.serverconfig.svnserve.html#svn.serverconfig.svnserve.auth)，设置惊人地相似。无论您使用 Apache httpd 作为服务器还是`svnserver`. 这些控件使您能够设置读取（您可以进行结帐吗？）和写入（您可以提交更改吗？）到存储库。

您还可以使用预提交钩子（[像这个](https://github.com/qazwart/SVN-Precommit-Kitchen-Sink-Hook)）来控制提交更改。这个想法是您使用内置的身份验证来授予用户读取访问权限，然后使用 pre-commit 挂钩来授予提交访问权限。（预提交挂钩无法控制读取访问，因为您需要从存储库中签出才能使用预**提交**挂钩）。

请注意，所有这些都需要在*服务器*上进行，因此您需要访问服务器才能进行设置。我在上面链接的预提交挂钩的*控制文件*（它只能真正控制提交访问）可以存在于存储库中。这意味着您可以更改访问权限以进行更改，而无需在服务器上。

# jquery - 具有较新 JQuery 版本的 JQuery Tablesorter

> ID：13058701
> 
> 赞同：2
> 
> 时间：2012-10-24T22:20:19.317
> 
> 标签：jquery, tablesorter

我正在尝试将 Tablesorter 插件与 Wordpress 的 JQuery 版本 1.7.2 一起使用。这不起作用，我通过使用其中一个演示（实际上是 demo.html）将其范围缩小到与 JQuery 版本不兼容，将其和相关文件上传到我的 Web 服务器，测试以确保它工作，然后替换这一行：

`<script type="text/javascript" src="../jquery-latest.js"></script>`

有了这个：

`<script type='text/javascript' src='http://www.example.com/wp-includes/js/jquery/jquery.js?ver=1.7.2'></script>`

（因为这是在 WordPress 中加载 JQuery 的结果行）。我不想从其他来源加载 JQuery，因为我想以兼容性的名义留在 WordPress 生态系统中以获取此类库。

老实说，让 Tablesorter 插件与较新的 JQuery 版本一起工作甚至都不是问题，我只是想要一种对表进行排序的方法，这似乎是首选方法。我对如何使这项工作或任何其他可以对某些表进行排序的方法持开放态度。

我在这里发布了这个，而不是在 WordPress Stack Exchange，因为它似乎更像是一个 JQuery 问题而不是 WordPress 问题（尽管在那里询问一种对表进行排序的方法可能不是一个坏主意..）

谢谢！

# excel - 格式化页面以分 2 列打印

> ID：13058703
> 
> 赞同：4
> 
> 时间：2012-10-24T22:20:29.770
> 
> 标签：excel, vba

有谁知道如何在 excel 中移动页面以将电子表格分成两半？

例如，我在电子表格中有 390,000 行。
如果您要使用 12 号字体以纵向格式打印电子表格，则每页大约 44 行，接近 8800 页。

我想把它减半。

我有 3 列。我要做的就是把偶数页带到奇数页，那里有足够的空间。谁能告诉我我能做什么？

![在此处输入图像描述](../Images/59b9f1e440185261fc3aeb51a6c1ea92.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T00:53:12.367

当你去打印时，将你的打印机设置设置为“2 UP”或“2 Pages per sheet”。或者尝试双面打印。或两者。我在这里开玩笑，但是打印 4400 页真的比打印 8800 更可取吗？很难想象有人试图对任何一堆进行分类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T23:19:38.730

试试这个宏（最好在保存文件之后）。

```
Sub adsagrse()
Dim lRows As Long

'turn off updates to speed up code execution
With application
    .ScreenUpdating = False
    .EnableEvents = False
    .Calculation = xlCalculationManual
    .DisplayAlerts = False
End With

lRows = 45

Do While Len(Cells(lRows, 1)) > 0
    Cells(lRows, 1).Resize(44, 3).Copy Cells(lRows, 1).Offset(-44, 4)
    Cells(lRows, 1).Resize(44, 3).ClearContents
    lRows = lRows + 88
llop

ActiveSheet.UsedRange.AutoFilter
ActiveSheet.UsedRange.AutoFilter 1, ""
ActiveSheet.UsedRange.Offset(1).SpecialCells(xlCellTypeVisible).EntireRow.Delete
ActiveSheet.UsedRange.AutoFilter

With application
    .ScreenUpdating = True
    .EnableEvents = True
    .Calculation = xlCalculationAutomatic
    .DisplayAlerts = True
End With

End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-16T03:52:06.230

注意：这取决于打印机的功能，
假设您将在此示例中使用 potrait 打印在 A4 尺寸的纸上
1\. 在打印机设置中创建具有 A4 尺寸（高 297 毫米 x 宽 105 毫米）半宽的自定义纸张尺寸
2\. 转到excel并照常打印，但选择刚刚创建的新自定义纸张尺寸

在打印时 - 页面设置
3\. 将页面大小设置为“A4 半角”
4\. 将打印设置为“在 1 页上打印 2 页”
5\. 将打印纸输出设置为正常 A4

希望它能在您的打印机上工作

# android - 如何让子视图从根视图获取“onpress”事件？

> ID：13058704
> 
> 赞同：0
> 
> 时间：2012-10-24T22:20:35.403
> 
> 标签：android

我已经习惯了 listview 的项目没有任何问题（即使是复杂的布局）处理 onpress 事件（一些使其按下和未按下的操作）。但现在我希望 LinearLayout 也一样——如果你在布局上按任何方式，所有后代都应该得到 onpress 事件。

这是我的片段布局的一部分，应该突出显示 onpress 事件。

```
<LinearLayout
            android:id="@+id/ll_about_fragment_feedback"
            android:gravity="center_vertical"
            android:layout_height="54dp"
            android:background="@drawable/about_item_bkg"
            android:layout_width="match_parent">

        <ImageView
                android:layout_height="wrap_content"
                android:background="@drawable/about_item_feedback_icon"
                android:layout_width="wrap_content"
                android:layout_marginLeft="11dp"/>

        <TextView
                android:layout_height="wrap_content"
                android:layout_width="wrap_content"
                android:text="@string/about_fragment_feedback"
                android:layout_marginLeft="14dp"
                android:textSize="16dp"
                android:textColor="@drawable/about_item_textcolor"/>

</LinearLayout> 
```

根布局的背景在按时更改，但后代的文本颜色不会。看起来他们没有从根获得事件。

那么，你能帮忙吗？

更新：LinearLayout ll_about_fragment_feedback 已绑定 OnClickListener 并且选择器一切正常

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T23:22:45.937

如果您想`Selector`应用到您下的所有视图，`LinearLayout`那么您只需添加`android:duplicateParentState="true"`到所有子视图。

```
<LinearLayout
    android:id="@+id/ll_about_fragment_feedback"
    android:layout_width="match_parent"
    android:layout_height="54dp"
    android:background="@drawable/about_item_bkg"
    android:gravity="center_vertical" >

    <ImageView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="11dp"
        android:background="@drawable/about_item_feedback_icon"
        android:duplicateParentState="true" />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="14dp"
        android:duplicateParentState="true"
        android:text="@string/about_fragment_feedback"
        android:textColor="@drawable/about_item_textcolor"
        android:textSize="16dp" />

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T22:25:31.563

只需将您绑定`onClickListener`到布局的根对象 ( `ll_about_fragment_feedback`) 即可。

# firefox - 使用 Add-on Builder (JetPack) 的 Firefox 插件选项页面

> ID：13058711
> 
> 赞同：7
> 
> 时间：2012-10-24T22:21:08.833
> 
> 标签：firefox, firefox-addon, firefox-addon-sdk

我正在开发一个 Firefox 扩展，并希望打开一个**自定义**html 页面，用户可以在其中调整设置。我能够以不同的方式做到这一点，但想使用Firefox 插件管理器中显示的**标准选项按钮。**

我已经看过一些关于它的文档，但是我在使用在线插件生成器查找此函数的正确文档时遇到问题： [Preferences system](https://developer.mozilla.org/en-US/docs/Mozilla/Preferences/Preferences_system?redirectlocale=en-US&redirectslug=Preferences/Preferences_system)、 [Inline options](https://developer.mozilla.org/en-US/docs/Extensions/Inline_Options)、 [Simple prefs](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/packages/addon-kit/simple-prefs.html)。

有谁知道如何添加显示在插件管理器中的标准选项按钮并处理其单击事件以显示自定义选项页面？（就像在 Google Chrome 中一样）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T00:42:22.120

构建器项目有一个“属性”对话框，其中有一个字段，您可以在其中粘贴创建首选项所需的额外 JSON：

[https://www.evernote.com/shard/s1/sh/cdb97850-935d-4cf1-95f1-a25c130d1498/4b0b2553f3aa85e4d6489c1d50492c97](https://www.evernote.com/shard/s1/sh/cdb97850-935d-4cf1-95f1-a25c130d1498/4b0b2553f3aa85e4d6489c1d50492c97)

（固定链接，对不起）

这是 builder 中的一个示例，它实现了所有不同的类型，并且还包含文档：

[https://builder.addons.mozilla.org/package/60337/latest/](https://builder.addons.mozilla.org/package/60337/latest/)

您会注意到您可以定义的偏好类型之一是“控件”偏好，本质上是一个按钮，它发出一个自定义事件，您可以从 main.js 监听和响应。然后，您可以使用其他偏好打开一个新选项卡或插件页面吗？

[https://addons.mozilla.org/en-US/developers/docs/sdk/latest/packages/addon-kit/simple-prefs.html#prefs](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/packages/addon-kit/simple-prefs.html#prefs)

# javascript - 如何从 JavaScript 中的函数将值设置为 n 维数组？

> ID：13058715
> 
> 赞同：2
> 
> 时间：2012-10-24T22:21:40.920
> 
> 标签：javascript, arrays

从函数中设置 n 维数组的最佳方法是什么？

```
var v1 = [1,2,3];
var v2 = [[1,2],[3,4]];

// only valid for 1-dimension
function set(arr, dim, v) {
    arr[dim] = v;
}

set(v1, 2, 33); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T22:30:32.853

您的功能无法按设计工作，它需要每个维度的索引

你需要类似下面的[http://jsfiddle.net/nZmJT/1/](http://jsfiddle.net/nZmJT/1/)

```
function setValueInArray(arr, value, index /*, index, index, ... */ ) {
    var arrToSet = arr;
    for (var i = 2; i < arguments.length - 1; i++) {
       arrToSet = arr[arguments[i]];
    }
    arrToSet[arguments[i]]= value;
    return arr;
}

var v1 = [1,2,3];
var v2 = [[1,2],[3,4]];

console.log( setValueInArray(v1, 0, 0) ); // [0,2,3]
console.log( setValueInArray(v2, 0, 0, 0) ); //[[0,2],[3,4]] 
```

请与我们分享您为什么喜欢这个。我想不出可以概括为使用多个维度的代码，您通常知道维度，然后将其设置为...

```
v1[2][3] = 'anything'; 
```

由于在您的情况下，您不知道要传递多少个索引（否则您只需使用括号访问），以下可能更合适

```
function setValueInArray(arr, value, indexes) {
    var arrToSet = arr;
    for (var i = 0; i < indexes.length - 1; i++) {
       arrToSet = arr[indexes[i]];
    }
    arrToSet[indexes[i]] = value;
    return arr;
} 
```

然后你可以调用它传递由你控制之外的一些代码创建的索引数组。

```
setValueInArray(v1, 0, indexes); 
```

# mysql - 在客户端执行查询

> ID：13058717
> 
> 赞同：0
> 
> 时间：2012-10-24T22:21:50.720
> 
> 标签：mysql, toad

我正在使用 Toad 数据点连接到 MySQL 数据库，如果我在客户端取消查询（如果执行时间很长），MySQL 是否仍会运行查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T00:23:09.037

这主要取决于您的数据库引擎以及 Toad 实际执行的操作。如果它发送一个`KILL`查询，`MySIAM`它实际上会在中途终止查询，如果你使用`InnoDB`它，它将回滚事务，这通常需要与你决定中止进程的时间相同的时间。

# jquery - JQuery 代码不工作。我究竟做错了什么？回调，变量范围，链接？

> ID：13058719
> 
> 赞同：1
> 
> 时间：2012-10-24T22:21:52.873
> 
> 标签：jquery

基本上，我有两个空 div 的 HTML5 标记。我想使用 JQuery 根据是否存在单个 localStorage 值来用两个单独的表单和 2 个单独的 flash 消息填充这些 div。在我构建它的过程中，它一直在工作，直到我编写了用于动态显示表单的代码。有人可以玩弄这段代码并告诉我我缺少什么吗？我不是 JavaScript 专家（但我想成为）——我在这里陷入了困境。编辑：到目前为止，修复了表单不显示的问题。但是闪烁消息也没有出现，当按下按钮时，它不再将值存储在 localStorage 中，它使表单消失然后再次淡入。:(

```
<!DOCTYPE html>

<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>Shrink Once API Tools</title>
        <link rel="stylesheet" type="text/css" href="css/bootstrap.css"></link>
    </head>
    <body>
    <div class="container-fluid">
        <div class="row-fluid">
            <div class="span12">
                <h1 class="head-title">Shrink Once API Tools</h1>
            </div>
        </div>
        <div class="row-fluid">
            <div class="span12">
                <div id="flashAlert">

                </div>
            </div>
        </div>
        <div class="row-fluid">
            <div class="span12">
                <div class="mainFormContent">

                </div>
            </div>
        </div>
    </div>

    <!-- Include JavaScript at the very bottom for faster page loads -->
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <!--
    Fall back on local JQuery if Google CDN version is unavailable.
    (Since most sites link the Google CDN version, it is more likely
    to already be cached by the user's browser).
    -->
    <script>window.jQuery || document.write('<script src="js/vendor/jquery-1.8.2.min.js"><\/script>')</script>
    <!-- end Fallback -->
    <script src="js/bootstrap.js"></script>
    <script>
        $(function () {
            var apiKeyForm = '<form>'
                           + '<legend>Enter your API Key</legend>'
                           + '<input type="text" id="apiKey" class="span12" placeholder="e.g. ab12c34d5678efgh90123i45678j90k1">'
                           + '<span class="help-block">You can find your access key <a href="https://shrinkonce.com/index.php?menu=usercp#tools" target="blank">here.</a></span>'
                           + '<button type="submit" id="saveAPIKey" class="btn btn-info btn-large btn-block">Save</button>'
                           + '</form>';

            var apiLinkForm = '<form>'
                            + '<legend>Add a link or two... or more.</legend>'
                            + '<button id="add" class="btn btn-large">Add</button>'
                            + '<button id="remove" class="btn btn-large">Remove</button>'
                            + '<button id="reset" class="btn btn-large">Reset</button>'
                            + '<button type="submit" class="btn btn-info btn-large">Submit</button>'
                            + '<hr />'
                            + '<div id="linkForm">'
                            + '</div>'
                            + '</form>';

            var i = $('#linkForm input').size() + 1;
            $('#add').click(function () {
                $('<input type="text" id="inputLink' + i + '" class="shrinklink span12" placeholder="http://google.com">').fadeIn('slow').appendTo('#linkForm');
                i++;
                return false;
            });
            $('#remove').click(function () {
                if (i > 1) {
                    $('.shrinklink:last').fadeOut('normal', function () { $(this).remove(); });
                    i--;
                }
                return false;
            });
            $('#reset').click(function () {
                while (i > 2) {
                    $('.shrinklink:last').remove();
                    i--;
                }
                return false;
            });
            $("#saveAPIKey").click(function () {
                if (typeof $('#apiKey').val() !== null) {
                    localStorage.setItem(apiKey, $('#apiKey').val());
                    $(apiKeyForm).fadeIn('slow').appendTo('.mainFormContent');
                }
                else {
                    alert("API Key not set!");
                }
                return false;
            });

            if (localStorage.length > 0) {
                $('<div class="alert alert-error">You have not yet entered your API token. Add it below, and it will be persisted in memory.</div>').fadeIn('slow').appendTo('.flashAlert');
                $(apiLinkForm).fadeIn('slow').appendTo('.mainFormContent');
            }
            else {
                $('<div class="alert alert-success">Your API token is ' + localStorage.getItem(apiKey) + '.</div>').fadeIn('slow').appendTo('.flashAlert');
                $(apiKeyForm).fadeIn('slow').appendTo('.mainFormContent');
            }
        });
    </script>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T22:35:41.743

不确定，但也许应该是`localStorage.getItem('apiKey')`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T22:29:10.420

您尚未在任何地方定义名为“apiKey”的变量，这会在下一行引发 js 错误。

```
$('<div class="alert alert-success">Your API token is ' + localStorage.getItem(apiKey) + '.</div>').fadeIn('slow').appendTo('.flashAlert'); 
```

见[http://jsfiddle.net/aLF6p/](http://jsfiddle.net/aLF6p/)

# sql - 如何在某一列上选择具有最大值的行

> ID：13058721
> 
> 赞同：1
> 
> 时间：2012-10-24T22:22:08.767
> 
> 标签：sql, database, sqlite, aggregate-functions

例如，我有

```
tab1:
att1|att2
A|3
B|4
C|3
D|4
E|1
F|2 
```

而且我要

```
B|4
D|4 
```

我知道我可以使用

```
SELECT att1 att2
FROM tab1 as T
WHERE T.att2 =
(
   SELECT MAX(att2) FROM tab1;
} 
```

我想知道是否有更聪明的方法来做到这一点。B/c 如果需要复杂的查询才能得到tab1，写两次就很麻烦了。顺便说一句，我正在使用 Sqlite。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T22:44:10.943

我原来的答案是：

```
SELECT att1, att2
FROM tab1
ORDER BY att2 DESC LIMIT 0,1; 
```

我很抱歉，如果有超过一个最大值的记录，那将不起作用。这是另一个答案：

```
SELECT t1.att1, t1.att2
FROM tab1 AS t1
LEFT JOIN tab1 AS t2
ON t1.att2 < t2.att2
WHERE t2.att1 IS NULL; 
```

这种形式是否比作者提到的嵌套 SELECT 更有效是值得怀疑的，但如果 tab1 本身是一个 select 可能会更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T22:38:58.543

据我了解，问题不在于查询本身，而在于“繁琐”的写表tab1。我会建议你`create view tab1`，然后使用它。

# jquery - 引导日期选择器不工作

> ID：13058725
> 
> 赞同：2
> 
> 时间：2012-10-24T22:22:22.313
> 
> 标签：jquery, asp.net, twitter-bootstrap, datepicker

我试图让引导日期选择器工作，但它甚至没有出现。
[http://www.eyecon.ro/bootstrap-datepicker/](http://www.eyecon.ro/bootstrap-datepicker/)

```
<link href="~/Css/datepicker.css" rel="stylesheet" />
<script src="~/Scripts/jquery-1.8.1.js" type="text/javascript"></script>
<script src="~/Scripts/bootstrap-datepicker.js" type="text/javascript"></script>
<script type="text/javascript">
    $("#datepicker").datepicker();
</script>

<input id="datepicker" value="10/22/2011" /> 
```

我正在使用引导程序 2.1.1

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T22:26:37.350

当 DOM 中还没有元素时，您似乎正在尝试初始化日期选择器`#datepicker`（相应的`input`跟随`<script>`元素，反之亦然）。

由于`$('#datepicker')`仍将返回一个 jQuery 包装的对象（不是`null`！），因此不会抛出任何错误。

要解决此问题，请在加载 DOM 时进行此调用：

```
$(function() {
  $('#datepicker').datepicker();
}); 
```

或将此脚本移动到`<body>`元素的最末端。

我会选择第一个选项；将所有 DOM 就绪的操作也移动到同一个`$(function() { ... });`包装器中。

# c# - 在页面之间共享 MediaElement

> ID：13058727
> 
> 赞同：1
> 
> 时间：2012-10-24T22:22:24.157
> 
> 标签：c#, windows-runtime, caliburn.micro, mediaelement, windows-store-apps

我想在我的 Windows 商店应用程序中播放歌曲。问题是，我想`MediaElement`在页面之间“共享”，因为在导航到另一个页面时播放声音不应该停止。我正在使用最新的 Caliburn.Micro WinRT 端口。

我解决这个问题的第一个方法是在我有一个 2 行网格`MediaElement`的地方。`DefaultView`第二行包含`MediaElement`（以及所有处理播放、暂停等的控件），第一行是`frame`我要注入实际内容的另一行。

为此，我需要一些黑客攻击。我创建了一个新界面

```
public interface INavigationService2 : INavigationService { } 
```

和我自己的 NavigationService 作为

```
public class NavigationService : FrameAdapter, INavigationService2
{
    public NavigationService(Frame frame, bool treatViewAsLoaded = false) 
        : base(frame, treatViewAsLoaded) { }        
} 
```

现在，我在 CM 上注册了

```
public sealed partial class MainView 
{
    public MainView()
    {
        this.InitializeComponent();
        MainView.InitializeComponentStatic(this);    
    }

    private static bool _isInitialized;
    private static void InitializeComponentStatic(MainView mainView)
    {
        if (_isInitialized) return;

        ((App)Application.Current).RegisterInstance(typeof(INavigationService2),
             null, new NavigationService(mainView.ContentFrame));
        _isInitialized = true; 
    }
} 
```

然后我试图将 my 绑定`StartViewModel`到那个`ContentFrame`做

```
public class MainViewModel : Screen
{
    public MainViewModel()
    {
        this.ContentFrame = new StartViewModel(((App) Application.Current).GetDefaultInstance<INavigationService2>());
    }

    public DefaultViewModel ContentFrame { get; set; }
} 
```

当我运行它时，`StartView`它显示在`MainView`网格内，但导航不再导航到正确的视图/视图模型（它实际上以某种方式再次加载 MainViewModel）。

由于这不是真的很好和直接，我想要你关于如何实现原始问题的想法：在页面/视图之间共享媒体元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T06:40:48.440

您可能要考虑使用 XAudio2，而不是使用 MediaElement。下面是如何完成它的演练：[在 Windows 应用商店应用程序中播放背景音乐/音效 (C# XAML)](http://www.crazyappy.com/?p=127)

# google-maps - 存在建筑内景时如何强制渲染街景？

> ID：13058732
> 
> 赞同：0
> 
> 时间：2012-10-24T22:22:56.427
> 
> 标签：google-maps, google-maps-api-3, google-street-view

当两者都存在于给定的一组坐标时，如何让 Google StreetView API 显示建筑物的外部（道路视图）而不是建筑物内部？

```
<div id="panoramadiv" style="width: 300px; height: 300px;"></div>
<script type="text/javascript" charset="utf-8">
var lat_lng2 =  new google.maps.LatLng(37.79416, -122.423539);

var streetViewOptions2 = {
position: lat_lng2,
scrollwheel: false
};

var div = document.getElementById('panoramadiv');
var street_view2 = new google.maps.StreetViewPanorama(div, streetViewOptions2);
</script> 
```

此示例按预期渲染 K-One Fitness 的内部，而不是 2001 Van Ness Ave, San Francisco, CA 的街景。

jsFiddle：http: [//jsfiddle.net/9C8wM/](http://jsfiddle.net/9C8wM/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T02:29:36.810

地理编码器正在返回一个“屋顶”地理编码。查看建筑物外部的唯一方法是在街道上找到街景位置。为此，获取到地址的路线，然后计算从街道上的位置到屋顶的航向。

[例子](http://www.geocodezip.com/v3_Streetview_lookAtB.html?snaptoroad=2001%20Van%20Ness,%20San%20Francisco,CA)

# ruby-on-rails - Rails 不使用 application.html.erb

> ID：13058737
> 
> 赞同：6
> 
> 时间：2012-10-24T22:23:15.380
> 
> 标签：ruby-on-rails, ruby-on-rails-3, view

我知道默认情况下，Rails 中的视图使用`application.html.erb`. 但是，有一个视图我不想使用 中提供的模板`application.html.erb`，而是在该视图本身中编写所有 HTML。那有可能吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-24T22:27:47.677

在控制器操作结束时，添加：

```
render :layout => false 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-24T22:28:03.447

对于特定操作：

```
class SomeController < ApplicationController
  def my_custom_action
    render layout: false
  end
end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-24T22:03:20.987

您可以使用自定义布局来实现相同的目的。

例如对于`WelcomeController`

1.  创建一个名为`welcome.html.erb`. `app/views/layout/`在那里写你的布局代码（不要忘记`yield`）。由于 rails`Convention over Configuration`功能，当 rails 渲染任何映射到的视图时`WelcomeController`，`welcome.html.erb`将覆盖默认`application.html.erb`布局。

2.  如果您想以不同的方式命名自定义布局文件。Rails 也允许您这样做。将您的布​​局文件命名为`mylayout.html.erb`. 中`WelcomeController`，添加以下代码

    类 WelcomeController < ApplicationController

    布局“我的布局”

    ……

    结尾

3.  如果您只想为特定操作自定义布局，则在操作的最后一行写`render layout: 'mylayout'`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T22:30:05.270

当然，在你的行动中做这样的事情：

```
def action
  render :layout => false
end 
```

这假设您的控制器中还有其他需要布局的操作。否则，我会`layout false`在控制器根目录中指定。

如果您有多个不需要布局的操作，我相信您可以做到

```
layout false, :only => [ :action1, :action2 ] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-14T18:42:20.150

您必须确保您的控制器继承自 ApplicationController

```
class MyCustomController < ApplicationController 
```

# python - 有没有办法检测 python 程序何时结束？

> ID：13058739
> 
> 赞同：4
> 
> 时间：2012-10-24T22:23:37.133
> 
> 标签：python, callback, python-2.7, python-2.x

有没有办法检测 python 程序何时结束？我可以连接到回调之类的东西？

我有一个保留[缓存](https://stackoverflow.com/questions/13054250/python-object-cache)的类，我想在程序结束之前将缓存写入磁盘。如果我能做到这一点，那么我可以在第一次使用它时从磁盘加载它并拥有一个持久缓存。

我正在寻找一个回调类型的东西，因为我想自动化它，所以用户不必做任何事情来保存缓存。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T22:25:57.117

您可以使用[`atexit.register(some_function)`](http://docs.python.org/library/atexit.html#atexit.register)或简单地使用`@atexit.register`. 它会在解释器终止时被调用。

例子：

```
import atexit
@atexit.register
def save_cache():
    print 'save cache' 
```

或者

```
import atexit
def save_cache():
    print 'save cache'
atexit.register(save_cache) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-24T22:25:48.767

[是的，有](http://docs.python.org/library/atexit.html)：

```
import atexit

@atexit.register
def writecache():
    # etc 
```

# java - 多个坐标之间的距离

> ID：13058741
> 
> 赞同：0
> 
> 时间：2012-10-24T22:23:42.260
> 
> 标签：java, distance, geometry

我完全不知道如何将坐标排序成一个数组，并找到它们之间的距离。这是问题：

1.  创建一个名为“Circle”的新类，可用于创建自定义的圆形对象。你的类应该包括以下内容——一定要对你的类进行适当的注释：双半径、双 xPosition、双 yPosition，以及计算从一个圆的 xPosition 和 yPosition 到另一个圆的 xPosition 和 yPosition 的距离的方法。使用标准距离公式计算此值。出于此方法的目的，您只需要计算从中心点到中心点的距离。这是一个帮助您入门的方法标头：

    public double distanceFrom（循环测试）

2.  创建一个名为“Assignment06b”的新类。在本课程中执行以下操作：

    提示用户输入多个圆（即您要创建多少个圆？）接下来，要求用户输入每个圆的半径、xPosition 和 yPosition。将他们的输入存储在适当大小的 Circles 数组中。最后，遍历您的数组并显示每个圆的距离信息。确保您不计算给定圆与自身之间的距离（即无需计算圆#1 和圆#1 之间的距离）- 这是您的程序运行示例。

这是我到目前为止所拥有的：

```
import java.util.Scanner;

public class Assignment06b 
{
    public static void main(String[] args) 
    {
        Scanner input = new Scanner(System.in); 
        System.out.print("How many circles do you want to create?:");
        int amount = input.nextInt();

        int[] arrayX = new int [amount];
        int[] arrayY = new int [amount];

        int counter = 0;
        for (counter = 0; counter < amount; counter++)
        {
            System.out.println("Enter info for Circle #" + (counter + 1));
            System.out.print("Radius: ");
            double width = input.nextDouble();

            System.out.print("X Position: ");
            arrayX[counter] = input.nextInt();

            System.out.print("Y Position:");
            arrayY[counter] = input.nextInt();
        }

    }

    class Circle 
    {
        double radius;
        double xPosition;
        double yPosition; 

        Circle(double radius, double xPosition, double yPosition)
        {

        }

        public double distanceFrom(Circle test)
        {
            double equation = (xPosition-xPosition)*(xPosition-xPosition) + (yPosition-yPosition)*(yPosition-yPosition);
            double answer = Math.pow(equation, 0.5);
            return answer;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T22:42:44.070

您在这里对面向对象小心翼翼，改变周围的事物，以便您拥有一个圆数组而不是整数数组：

```
Circle[] arrayCircles = new Circle [amount]; 
```

此外，您没有在您的 circle 类中设置任何值，您可能想要解决这个问题：

```
Circle(double radius, double xPosition, double yPosition)
{
     this.radius = radius;
     this.xPosition = xPosition;
     this.yPosition = yPosition; 
} 
```

然后，您可以像这样将圈子添加到您的收藏中：

```
arrayCirles[0] = new Circle(myRadius, myXPosition, myYPosition); 
```

并像这样调用你的 distanceFrom 方法：

```
//Obviously do this in a loop of some kind and make sure they exist first
arrayCircles[0].distanceFrom(arrayCircles[1]); 
```

希望其余的你可以自己弄清楚

（另外再看看你的 distanceFrom 方法，你想比较你作为参数传递的圆，而不是你自己）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-14T11:47:32.637

我目前正在使用 CAD 软件，我需要在方形网格/阵列中找到圆（孔）之间的距离，我发现圆（边到边）之间的距离由下式给出

(LN*D)/(N-1)

其中： **L**是阵列从边缘到边缘的距离（不是到端圆的中心点，而是到端圆的边缘） **N**是圆的数量 **D**是圆的直径

如果从中心点到中心点测量 L (L+DN*D)/(N-1)

如果您正在寻找中心点到中心点之间的距离，我相信您可以得出它

有点晚了，但希望这对其他人有帮助！

# arrays - 如何将可分配数组传递给 Fortran 中的子例程

> ID：13058743
> 
> 赞同：21
> 
> 时间：2012-10-24T22:23:56.293
> 
> 标签：arrays, fortran, fortran90, gfortran

以下代码返回分段错误，因为我试图传递的可分配数组没有被正确识别（大小返回 1，而它应该是 3）。在此页面 (http://www.eng-tips.com/viewthread.cfm?qid=170599) 中，一个类似的示例似乎表明它在 F95 中应该可以正常工作；我的代码文件具有 .F90 扩展名，但我尝试将其更改为 F95，并且我正在使用 gfortran 进行编译。

我的猜测是问题应该出在我将可分配数组传递给子程序的方式上；我究竟做错了什么？

```
!%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%!
 PROGRAM test
!%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%!
 IMPLICIT NONE
 DOUBLE PRECISION,ALLOCATABLE :: Array(:,:)
 INTEGER                      :: iii,jjj

 ALLOCATE(Array(3,3))
 DO iii=1,3
 DO jjj=1,3
    Array(iii,jjj)=iii+jjj
    PRINT*,Array(iii,jjj)
 ENDDO
 ENDDO
 CALL Subtest(Array)

 END PROGRAM
!%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%!
 SUBROUTINE Subtest(Array)
 DOUBLE PRECISION,ALLOCATABLE,INTENT(IN) :: Array(:,:)
 INTEGER                                 :: iii,jjj

 PRINT*,SIZE(Array,1),SIZE(Array,2)
 DO iii=1,SIZE(Array,1)
 DO jjj=1,SIZE(Array,2)
    PRINT*,Array(iii,jjj)
 ENDDO
 ENDDO

 END SUBROUTINE
!%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%! 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-24T23:23:50.337

如果过程具有可分配的虚拟参数，则在任何调用范围内都需要显式接口。

（有很多东西需要显式接口，可分配的虚拟对象就是其中之一。）

您可以通过在主程序中为您的子例程放置一个接口块来自己提供该显式接口。另一种更好的选择是将子例程放在模块中，然后在主程序中使用该模块-然后自动创建显式接口。在您提供链接的 eng-tips 网站上有一个示例 - 请参阅 xwb 的帖子。

请注意，只有当您要执行与其分配状态相关的操作时，虚拟参数才有意义具有可分配属性 - 查询其状态、重新分配、解除分配等。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-25T16:09:41.370

另请注意，您的可分配虚拟参数`array`是用 声明的`intent(in)`，这意味着它的分配状态将是相关实际参数的分配状态（并且在过程中可能不会更改）。传递给子例程的实际参数可能未分配，因此即使使用显式接口也无法引用。编译器不会知道这一点，并且`size`在这种情况下，查询的行为是未定义的。

因此，在引用其内容之前，您首先必须检查`array`with的分配状态。我会进一步建议使用and`allocated(array)`在整个数组上实现循环，因为通常你不能确定's bounds：`lbound``ubound``array`

```
subroutine subtest(array)
  double precision, allocatable, intent(in) :: array(:,:)
  integer                                   :: iii, jjj

  if(allocated(array)) then
    print*, size(array, 1), size(array, 2)
    do iii = lbound(array, 1), ubound(array, 1)
      do jjj = lbound(array, 2), ubound(array, 2)
        print*, array(iii,jjj)
      enddo
    enddo
  endif  
end subroutine 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-07-11T20:40:38.037

这是一个简单的示例，它在模块中使用可分配的虚拟参数。

```
module arrayMod   
  real,dimension(:,:),allocatable :: theArray    
end module arrayMod

program test
   use arrayMod
   implicit none

   interface
      subroutine arraySub
      end subroutine arraySub
   end interface

   write(*,*) allocated(theArray)
   call arraySub
   write(*,*) allocated(theArray) 
end program test

subroutine arraySub
   use arrayMod

   write(*,*) 'Inside arraySub()'
   allocate(theArray(3,2))
end subroutine arraySub 
```

# asp.net - 从 GridView 发送多封电子邮件

> ID：13058744
> 
> 赞同：0
> 
> 时间：2012-10-24T22:23:59.473
> 
> 标签：asp.net

我希望有人能在这个问题上帮助我。此电子邮件功能的目的是向其电子邮件在 GridView 中列出的个人发送电子邮件，并在电子邮件正文中附加特定的 URL 字符串。我能够从 GridView 发送多封电子邮件，并在电子邮件正文的 URL 中传递当前查询字符串。所以到这里一切都很好。我有一个无法解决的挑战。我还想在 URL 中包含 GridView 中相应的电子邮件 ID。这是我当前 URL 的样子： //MyHost/BCA/Users/QMR.aspx?Post_ID=303

如果我的 gridview 看起来像这样：

```
ID        Name              Email                       Post_ID
-------------------------------------------------------------------
32        Mike              xx@hot.com                  303 
```

然后我想在我的 URL 中包含此电子邮件的相应 ID，如下所示，并能够将 URL 发送给该用户： //MyHost/BCA/Users/QMR.aspx?Post_ID=303&ID=32

谢谢

这是我的代码：

```
protected void btnSendEmail_Click(object sender, EventArgs e)
 {
     MailMessage mailMessage = new MailMessage();
     foreach (GridViewRow gr in GridView1.Rows)
     {
         CheckBox cb = (CheckBox)gr.FindControl("chkItem");
         if (cb.Checked)
         {

             mailMessage.To.Add(new MailAddress(GridView1.DataKeys[gr.RowIndex]["Assigned_To"].ToString()));
             mailMessage.From = new System.Net.Mail.MailAddress(System.Configuration.ConfigurationManager.AppSettings["fromEmailAddress"]);
             mailMessage.Priority = System.Net.Mail.MailPriority.High;
             //Text/HTML
             mailMessage.IsBodyHtml = false;
             string mySubURI= HttpContext.Current.Request.Url.AbsoluteUri.ToString().Replace("Test.aspx", "QMR.aspx");       
             mailMessage.Body = "Hello, Please see this link" + mySubURI;
             mailMessage.Subject = "My Email Test";

             System.Net.Mail.SmtpClient smtpClient = new System.Net.Mail.SmtpClient();
             try
             {
                 smtpClient.Send(mailMessage);

                 //Response.Write("<B>Email Has been sent successfully.</B>");
             }
             catch (Exception ex)
             {
                 Response.Write(ex.Message);

          }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T22:35:58.187

试试这个

```
mySubURI += String.Format("&ID={0}", gr.Cells[0].Text); 
```

有了它，您可以访问 gridview 中每一行的第一列（即 ID）并将其附加到现有 Url 的末尾

实际上，我认为这是您需要 Url 的行，如果下次出错，请从您的问题中明确说明您需要帮助的地方

```
 string mySubURI= HttpContext.Current.Request.Url.AbsoluteUri.ToString().Replace("Test.aspx", "QMR.aspx");       
 mySubURI += String.Format("&ID={0}", gr.Cells[0].Text);
 mailMessage.Body = "Hello, Please see this link " + mySubURI; 
```

# objective-c - 我可以在单独的线程上构建 UIView 元素吗？

> ID：13058750
> 
> 赞同：2
> 
> 时间：2012-10-24T22:24:20.873
> 
> 标签：objective-c, ios, multithreading, uiview, uiactivityindicatorview

我有一个应用程序必须在屏幕上加载和呈现大量内容（主要是从数据库加载）。

我不会在这里发布所有代码，但实际上它只是构建了一组 UIView 对象，这些对象添加到 UIScrollView 对象中。没什么太复杂的，只是加载了很多东西。目前这需要一秒钟左右的时间来渲染所有内容（在主线程上运行）。

我想在加载时显示一个活动指示器，我*认为*最好的方法是让需要很长时间的方法发生在后台线程上，并在完成时“报告”。

问题是这样的。我知道所有的实际绘图都是由主线程完成的，所以是否可以创建一个新线程并建立一组 UIView 对象，然后在屏幕上绘制？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T22:40:58.610

有一个很棒的 WWDC2012 会议视频，它完全符合您的用例：

[WWDC2012 在 iOS 中构建并发用户界面](https://developer.apple.com/videos/play/wwdc2012/211/)

基本上，诀窍是在另一个队列上准备和绘制视图并将其发送到主队列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T22:27:41.653

你是对的。所有的 UI 工作都应该在主线程上完成。在您的情况下，我建议您添加`UIView`对滚动视图可见的对象，并仅在滚动视图开始移动到该点时添加其余对象。您可以在它们即将可见时继续添加视图，并从滚动视图中删除任何不需要的视图。这通常有助于更好的内存管理。

# django - Sphinx Search 驱动的应用程序 - 设计错误？

> ID：13058751
> 
> 赞同：1
> 
> 时间：2012-10-24T22:24:23.263
> 
> 标签：django, sphinx

我正在构建网络应用程序并使用 django 和 Sphinx 进行自由文本搜索。在向 searchd 发出请求之前，我需要应用额外的限制，请考虑 2 个表：

**实体**
ID
标题
描述
created_by_id
updated_by_id
created_date
updated_date

和

**EntityUser**
id
entity_id [FK to the table]
join_user_id
is_approved
created_by_id
updated_by_id
created_date
updated_date

我已经为主表实体建立了 RT 索引，一切正常，但是我想只对用户加入的那些实体进行查询，即特定 user_id 和 entity_id 在 EntityUser 中存在 is_approved=1 的记录。问题是我无法索引 EntityUser，因为没有字符串字段 - 如您所见，此表仅包含整数/时间戳。不确定我是否可以在 SphinxQL 中进行包含对另一个 idex 的子查询的查询，即使我可以为该表构建索引。知道 Sphinx 被用于相当大的项目并取得了巨大的成功，我怀疑这是 Sphinx 的一个限制 - 是数据库/应用程序的糟糕设计还是如何构建适当的 RT 索引的知识泄漏？我可以以某种方式扩展现有索引，以便可以使用上面的限制吗？

我在想我可以在 Sphinx 返回 MySQL 端的记录 ID 后应用额外的限制，但这不起作用：将返回 N 条权重最高的记录，但在应用额外的限制后，结果可能为空。所以我需要获得一个搜索区域，然后只对用户可能看到的那些实体执行查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T09:55:57.267

实际上我已经找到了答案，它与应用程序或数据库的设计无关。事实上，这很简单——我只需要将 MVA 用于 RT 索引，就像我对普通索引（rt_attr_multi 或 rt_attr_multi_64）所做的那样。在配置文件中，我必须执行以下操作： 然后使用已加入实体并已获得批准的用户 ID 填充它。问题是我无法理解如何将 MVA 与 RT 索引一起使用，但不清楚。我认为 RT 索引和 MVA 的实际例子不够多，所以我分享了这个来帮助解决类似的问题。 **更新：**

`...
rt_attr_multi = entity_users
}`

**上一小时正在努力生成 RT 索引，并且总是得到“未知列：'entity_users'”。终于找到了原因——如果你将 MVA 添加到 RT 索引（不知道这是否与普通索引相同），你不仅要重新启动 searchd 守护进程（服务），还要删除“数据”文件夹中的所有内容（或您存储索引的位置）！**

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T01:58:26.173

改编来自[http://sphinxsearch.com/docs/current.html#attributes](http://sphinxsearch.com/docs/current.html#attributes)的示例，您可能可以在您的 conf 中使用类似这样的内容：

```
...
sql_query = SELECT app_entity.id as id, 
                   app_entity.title as title, 
                   app_entity.description as description,
                   app_entityuser.id as userid
            FROM app_entity, app_entityuser
            WHERE app_entity.id = app_entityuser.entity_id AND app_entityuser.is_approved = 1

sql_attr_uint = id
sql_attr_uint = userid
... 
```

我应该提供一个免责声明：我没有尝试过这个。

我确实找到了一个相关的 SO 帖子，但看起来他们并没有完全解决它：[Django-sphinx result filtering using attributes?](https://stackoverflow.com/questions/1134691/django-sphinx-result-filtering-using-attributes)

祝你好运！**

# java - Spring - 构建路径不完整。在 dispatcher-servlet.xml 中找不到 org/springframework/beans/factory/Aware 的类文件

> ID：13058752
> 
> 赞同：5
> 
> 时间：2012-10-24T22:24:26.893
> 
> 标签：java, spring

我安装了 Spring Tool Suite，现在将它用于一个小示例项目。但是，我的 dispatcher-servlet.xml 文件中一直有错误：

```
Build path is incomplete. Cannot find class file for org/springframework/beans/factory/Aware 
```

此错误在此处突出显示：

```
<bean
    **class="org.springframework.web.servlet.view.InternalResourceViewResolver">**
    <property name="prefix">
        <value>/WEB-INF/pages/</value>
    </property>
    <property name="suffix">
        <value>.jsp</value>
    </property>
</bean> 
```

任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T23:44:46.433

我认为您的配置中可能有一些旧的 jar 文件。尝试使用最新的 spring 库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T17:59:31.317

I found my self in exactly the same case when I used incompatible maven spring-dependencies i.e check [Spring Security Site](http://www.springsource.org/spring-security) on the right side where it explains what spring version should be used with what spring security version.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-19T18:56:36.193

该项目缺少servlet-api jar，可以通过在maven pom文件中添加依赖来解决错误

```
 <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>servlet-api</artifactId>
        <version>2.5</version>
    </dependency> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-17T00:51:10.013

如果您使用的是**eclipse**：

1.  右键单击根项目-> 属性。
2.  单击部署程序集。
3.  单击添加按钮。
4.  双击 Java Build Path Entries 并选择要包含的构建路径条目。（也许如果您使用的是 maven，您还需要包含这些依赖项）。
5.  最后清理并构建。

这对我有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-24T11:30:02.977

您可以将此依赖项与您的 spring 版本一起使用：

```
 <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>${spring-version}</version>
            <scope>compile</scope>
        </dependency> 
```

# ios - ios提交应用程序需要超过18天为什么苹果那么慢以及关于iTunes的问题？

> ID：13058757
> 
> 赞同：3
> 
> 时间：2012-10-24T22:25:26.210
> 
> 标签：ios

是的，正如我所说的，应用程序需要 18 天才能获得批准并提交给苹果商店。

我已经提交了两个应用程序，他们花了很长时间才出现在 appstore 上。等待审核花了 10 天，审核用了 8 天通过是正常人还是苹果对我或我的国家不重要？这是否意味着我的更新将需要相同的时间？

此外，当我使用 ios 5.1 版本的 iPhone 检查苹果商店时，我看到我的应用在发布后仅一天就在新应用列表中，而且它正常，但在 iTunes 和苹果商店上的 ios 6.0 上，5 天前提交的应用仍然没有t 出现在新应用程序列表中。当我使用 iTunes 检查新应用程序列表时，我可以看到 8 天前发布的应用程序在列表中显示为新应用程序，所以我们可以说旧苹果商店和新苹果商店在不同时间更新吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T22:45:07.177

我的第一个应用程序需要 9 天才能进入审核状态，审核中是 2 小时，现在我刚刚收到我的第二个应用程序获得批准的信息，这需要 7 天才能审核，2 小时后它被批准。我认为他们用于审查您的应用程序的苹果流程与您所在的国家/地区没有任何个人或相关信息。

关于新的应用列表，我认为只有苹果才能给你正确的答案，否则只是猜测。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T23:38:28.830

我从一开始就在 AppStore 上，我的应用程序需要两天到六周才能获得批准。似乎平均是一两个星期。然而，我们没有关于苹果正在做什么的信息，所以没有办法真正回应。当您想在产品发布中进行营销时，只需确保您至少提前两周计划，并预计批准可能需要一些时间。Apple 可能与任何其他公司一样，对目前正在批准应用程序的人数以及提交的应用程序数量有限制。现在有可能事情需要更长的时间，因为许多应用程序正在提交与 iPhone 5 和第 5 代 iPod Touch 上的新 4" 屏幕一起使用。

编辑：我不是为苹果道歉，只是从他们的角度来看情况。我希望应用程序能够在更快的时间内获得批准。这对情况没有任何帮助，计划需要一些时间更为现实。如果它需要更少的时间，那就太好了！

# python - 缓冲区 Tkinter 窗口

> ID：13058758
> 
> 赞同：0
> 
> 时间：2012-10-24T22:25:27.317
> 
> 标签：python, python-2.7, tkinter

我正在尝试制作一个游戏，在游戏结束时我希望它弹出一个窗口，上面写着“你是”，然后当你关闭该窗口时，或者可能在一段时间后，它会打开另一个窗口性格这是我尝试过的：

```
def Youare():
        You_are= Toplevel()#I have tried making this Tk() as well
        You_are.geometry('+700+100')
        says = Label(You_are,text ='You are....',font=('Helvetica',74))
        says.pack(side=BOTTOM)
        You_are.mainloop()#If I take this out both windows display at the same time
def Percy():
    Percy= Toplevel()
    Percy.geometry('450x450')
    says = Label(Percy,text ='We were just looking at maps')
    says.pack(side=BOTTOM)
    img = ImageTk.PhotoImage(Image.open('C:/Users/Geekman2/Pictures/Pictures/Percy.jpg'))
    image1 = Label(Percy,image=img)
    image1.pack()
    Percy.mainloop()   
Youare()
Percy() 
```

如果您使用主循环运行 Youare，则 Percy() 将在主窗口关闭之前运行，如果您在没有主循环的情况下运行它，它们会同时显示，从而消除悬念。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T05:41:12.903

避免调用多个主循环的常用方法是执行类似的操作

```
def Youare(master):
    You_are = Toplevel(master)
    #...

master = Tk()
Youare(master)
master.mainloop() 
```

然后你必须在你的第一个窗口上绑定一个动作，看看[这些答案](https://stackoverflow.com/q/111155/428236)。

# unit-testing - 是否可以在浏览器之外使用 Selenium / PHPUnit？

> ID：13058768
> 
> 赞同：1
> 
> 时间：2012-10-24T22:25:58.063
> 
> 标签：unit-testing, selenium, phpunit

现在这是我为网站编写测试的工作流程：

1.  在 Firefox 中使用 Selenium IDE 插件录制
2.  将测试用例导出为 >> PHP（PHP 单元）
3.  使用以下命令在安装了 PHPUnit 以及 Selenium 扩展的 Windows 机器上运行测试：

`phpunit --verbose --log-junit some\path\result.xml some\path\test.php`

该命令的作用是运行测试并将输出（断言和失败）保存在名为 result.xml 的日志文件中。一切都很好。

但是现在我需要测试站点中涉及 Flash 的部分，并且我正在使用一个名为 Arthropod 的应用程序来捕获来自站点上 flash 组件的请求和响应。

**有什么方法可以让 selenium 捕获出现在该程序界面上的文本？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T06:56:04.520

我相信 Arthropod 是一个 AIR 应用程序。如果它与浏览器相关联，您可以尝试使用 seleniumForAir 进行测试。

你可能想看看[这里](http://corlan.org/2008/08/15/functional-testing-framework-for-air-ajax-apps-based-on-selenium/)。

# django - Django Haystack：尝试构建 solr 架构时出错

> ID：13058770
> 
> 赞同：2
> 
> 时间：2012-10-24T22:26:04.543
> 
> 标签：django, search, solr, django-haystack

尝试运行时出现以下错误`./manage.py build_solr_schema`

```
NotImplementedError: Subclasses must provide a way to build their schema. 
```

这是我的两个搜索索引的样子：

```
class BookSearchIndex (SearchIndex):
    text = CharField(document=True, use_template=True)
    title = CharField(model_attr='title_web', boost=1.125)

    def index_queryset(self):
        return Book.objects.active().filter(publish_level='published')

site.register(Book, BookSearchIndex)

class AuthorSearchIndex (SearchIndex):
    text = CharField(document=True, use_template=True)
    name = CharField(model_attr='name_display', boost=1.5)

    def index_queryset(self):
        return Author.objects.approved()

    def prepare(self, obj):
        data = super(AuthorSearchIndex, self).prepare(obj)
        data['boost'] = 1.5
        return data

site.register(Author, AuthorSearchIndex) 
```

我在本地运行它并使用简单的后端。`build_solr_schema`创建作者索引后，我能够运行。但是当我设置书籍索引并尝试再次运行它时，我得到了提到的错误。

Django 1.4.2，干草堆 1.2.7

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T17:02:48.360

> 我在本地运行它并使用**简单**的后端。

您必须选择**solr**后端并配置 haystack 以使用**build_solr_schema**命令。

```
HAYSTACK_SITECONF = 'search_sites'
HAYSTACK_SEARCH_ENGINE = 'solr'
HAYSTACK_SOLR_URL = '0.0.0.0:8983' #your solr server's address 
```

请参阅 [http://django-haystack.readthedocs.org/en/v1.2.7/installing_search_engines.html#solr](http://django-haystack.readthedocs.org/en/v1.2.7/installing_search_engines.html#solr) 安装 solr 和 [http://django-haystack.readthedocs.org/en/v1.2.7/tutorial.html# modify-your-settings-py](http://django-haystack.readthedocs.org/en/v1.2.7/tutorial.html#modify-your-settings-py) 用于配置 haystack

此外，我假设 haystack b/c 的 1.2.7 版本在 haystack 的 2.0.0 beta 版本中我遇到了**build_solr_schema**返回无效 schema.xml 的问题。

# javascript - 获取特定搜索字符串的 Google 搜索结果 URL

> ID：13058772
> 
> 赞同：0
> 
> 时间：2012-10-24T22:26:13.227
> 
> 标签：javascript

我需要找到一种方法来创建获取特定搜索字符串的 Google 搜索结果页面。（例如，`site:stackoverflow.com javascript`）。是否可以使用 Javascript 来做到这一点？

这是上述搜索字符串的搜索结果页面的 URL：

`https://www.google.com/#hl=en&output=search&sclient=psy-ab&q=site:stackoverflow.com+javascript&oq=site:stackoverflow.com+javascript&gs_l=hp.3...13833.13833.0.14821.1.1.0.0.0.0.75.75.1.1.0.les%3B..0.0...1c.1.RW1esyXtgVY&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&fp=52e43fe95f7f41ff&bpcl=35466521&biw=1366&bih=626`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T22:32:10.093

谷歌自定义搜索 API？

[https://developers.google.com/custom-search/v1/overview](https://developers.google.com/custom-search/v1/overview)

应该有你想要的...

如果您以某种方式知道结果的实际 HTML 结构，要么就是这样，要么您抓取页面......尽管我确信还有其他解决方案。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-24T22:33:47.627

您可以使用 ajax 通过 PHP（例如）在服务器端执行 curl 请求。您不能仅使用 javascript 来做到这一点，因为它被认为是跨站点脚本。

# javascript - 高级右键单击功能-单击并按住，显示按钮，释放时单击悬停的内容

> ID：13058780
> 
> 赞同：2
> 
> 时间：2012-10-24T22:26:48.990
> 
> 标签：javascript, jquery, mouse

您将如何在 javascript/jquery 中执行此操作？

我目前有`right-click + hold`显示一个div，然后它在右键单击时消失。但是，我想单击鼠标悬停在释放右键单击的任何按钮。

这是我到目前为止所拥有的：

```
// Cancel out the default context menu
$('body').on('contextmenu', function(){
    return false;
});

$("body").on('mousedown', function(event){
    // If it's not a right click, return
    if (event.which != 3) 
        return;

    // Set div coordinates to clicked point
    $('div').css({
        'top': event.pageY,
        'left': event.pageX
    });

    $('div').show();
});    

$("body").on('mouseup', function(event){
    // If it's not a right click, return
    if (event.which != 3)
        return;

    $('div').hide();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T22:31:08.047

尝试将`mouseup`事件处理程序附加到按钮。

# javascript - 突出显示 HTML 拖放中的放置区域

> ID：13058781
> 
> 赞同：2
> 
> 时间：2012-10-24T22:26:49.927
> 
> 标签：javascript, html, drag-and-drop

我正在构建另一个 Drag'n'Drop 文件上传器。我想做的是在开始拖动时突出显示页面上的放置区域，以便用户知道将文件移动到哪里。*该界面不会立即使其明确，这在这种情况下是需要的......*

当用户已经在它上面时突出显示 dropzone 很好，但这是用户拖动但尚未进入我希望收到通知的可放置区域的时间。

我无法使用该`dragstart`事件，因为它会在被拖动的 HTML 元素上触发，在这种情况下，它是来自用户桌面或其他东西的文件。我还尝试了以下方法：

```
$(document.body).on('dragenter', changeTheCSSClass)
                .on('dragleave', changeItBackAgain); 
```

但是，光标所在的每个嵌套元素都会触发进入和离开事件，因此我会收到大量事件，并且类会不断地来回切换。绝对不是我想要的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T13:04:31.260

由于没有人发布任何内容，所以我发布了这个，既不稳定也不是 100% 工作，但有时工作。

```
changeback = 2;
changedback = true;
$(document)
    .off('dragenter dragleave')
    .on('dragenter', function (e) {
    setTimeout(function () {
        window.clearTimeout(changeback);
        changeback = 0;
        console.log('dragenter', e.target);
        if (changedback) document.getElementById('nav-askquestion').style.color = '#bc0000';
        changedback = false;
    }, 10);
})
    .on('dragleave', function (e) {
    console.log('dragleave', e.target);
    if (changeback == 0) {
        changeback = window.setTimeout(function () {
            console.log('changed back');
            document.getElementById('nav-askquestion').style.color = '#FFFFFF';
            changedback = true;
        }, 15);
    }
}); 
```

应用于此页面本身。您还需要通过设置一些标志来取消内部拖动`dragstart`。

名称`dragenter`，`dragleave`实际上应该是`dragover`，`dragout`看起来:)

你最后怎么样了？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-16T16:23:21.053

你可以使用 angularJS：

```
<div align="center" class="alert alert-success ng-pristine ng-untouched ng-valid ng-empty" 
    ngf-select="onPrepareFile($file)" ngf-drop="onPrepareFile($file)" ng-model="vm.file" 
    name="inputFileStorage" 
    ngf-pattern="'image/*,application/pdf'" 
    ngf-accept="'image/*,application/pdf'" 
    ngf-max-size="10MB">
        <a ng-show="!file"><strong>Select or Drop File Here</strong></a>
        <a ng-show="file" class="ng-hide"><strong class="ng-binding"> has been Loaded</strong></a>
</div> 
```

在示例中，我限制为最大大小为 10MB 的 PDF。

我用TS编码，生成的代码抱歉，但是找不到原始TS...

```
this.onPrepareFile = function (file) {
    if (file) {
        var reader = new FileReader();
        reader.onloadend = function () {
            // yOUR FILE INFO IS IN: reader.result
        };
        reader.readAsDataURL(file);
    }
}; 
```

# git - 使用 R 下载、修改、上传 Github Gists

> ID：13058782
> 
> 赞同：5
> 
> 时间：2012-10-24T22:26:52.730
> 
> 标签：git, r, github, rstudio, gist

我经常发现自己在 Rstudio 中编写我的 R 代码，并手动将代码复制/粘贴到[gist.github.com](http://gist.github.com)的 gist 中。

我认为 Rstudio 很棒，他们最近加入了版本控制功能。我还没有完全毕业到这个级别，但我希望我可以链接我的 github 帐户并以同样的方式管理我的 gists。这将删除我为保存和检索代码片段而采取的手动操作。

关键是我希望能够跨多个位置访问我的代码，并且需要将我的一些代码保密。

这可能吗？任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T08:15:37.673

关于私人仓库，我认为`github`只支持付费用户的私人仓库。如果你想要免费的私有仓库，你可以看看同时支持 Mercurial 和 Git 仓库的 bitbucket。

# python - python wx unicode编码

> ID：13058784
> 
> 赞同：1
> 
> 时间：2012-10-24T22:27:19.467
> 
> 标签：python, unicode, wxpython, wxwidgets

我对 wx 和 python 有疑问，这似乎是一个 unicode 问题。

我正在使用便携式 python 2.7.2.1 和 wx-2.8-msw-unicode。

我的python代码在失败点是这个语句：

```
listbox.AppendText("\n  " + dparser.parse(t['created_at']).strftime('%H-%M-%S') + "    " +t['text'] + "\n") 
```

> t['文本']
> 
> 有一个值：“RT @WebbieBmx：”@AlexColebornBmx：[http](http://t.co/cN6zSO69) ://t.co/cN6zSO69 “观看这个#retweet”

在我正在运行 python 的 DOS 窗口中打印时显示为：

> 'RT @WebbieBmx: \xe2\x80\x9c@AlexColebornBmx: [http://t.co/cN6zSO69](http://t.co/cN6zSO69) \xe2 \x80\x9dwatch 这是一个#retweet'

回溯是：

> 回溯（最后一次调用）：文件“myprogs\Search_db_dev.py”，第 713 行，在 onSubmit self.toField.GetLineText(0)) 文件“F:\Portable\Portable Python 2.7.2.1\App\myprogs\process_form2_dev. py”，第 575 行，在 display_Tweets 中
> 
> ```
>  listbox.AppendText("\n  " + dparser.parse(t['created_at']).strftime('%H-%M-%
> S') + "    " +t['text'] + "\n") 
> ```
> 
> 文件“F:\Portable\Portable Python 2.7.2.1\App\lib\site-packages\wx-2.8-msw-uni code\wx_controls.py”，第 1850 行，在 AppendText
> 
> ```
>  return _controls_.TextCtrl_AppendText(*args, **kwargs) 
> ```
> 
> 文件“F:\Portable\Portable Python 2.7.2.1\App\lib\encodings\cp1252.py”，第 1 5 行，在
> 
> ```
> decode return codecs.charmap_decode(input,errors,decoding_table) 
> ```
> 
> UnicodeDecodeError：“charmap”编解码器无法解码位置 73 中的字节 0x9d：字符映射到未定义

UnicodeDecodeError 似乎出现在右双引号 (\xe2\x80\x9d) 的末尾，但我不明白为什么。如果有任何帮助，我将不胜感激。

恐怕是一个简单的编码问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T23:35:08.353

当我查看回溯时，对 cp1252 的引用让我感到震惊，因为文本是 utf8（正如在处理推文文本时可能预期的那样。）左侧的 utf8 序列 (\xe2\x80\x9c) 不是似乎引起了问题，但似乎在第二个十六进制序列中的 \xe2 之后有一个空格，这将阻止它从 utf8 正确解码。当我删除那个空间时，解码问题就消失了。所以你有一些糟糕的 utf8，我不确定当你从原始来源收到它时，除了在 try 语句中的显式解码之外，你会如何防范。这有意义吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T23:15:32.630

是的，这是一个简单的编码问题。

您看不到原因的原因是您的字体无法区分`u'”'`和`u'"'`。前者是一个卷曲的闭引号，它是`'\xe2\x80\x9d'`UTF-8 格式的。当您在执行“智能引号”的编辑器（如 MS Word）中编辑文本文件时，最常发生这种情况。

不过现在发现问题就好了；否则，在您将脚本提供给某个中国用户之前，一切似乎都可以正常工作……</p>

无论如何，这里的问题是你有一些存储 UTF-8 字符串的代码，还有一些其他代码试图访问它们，就好像它们是默认编码（你的 Windows OEM 字符集）一样。如果没有看到更多代码，很难确定你到底做错了什么，但希望这些信息足以让你找到它。

# .htaccess - 使用 mod_rewrite 快速修复 .htaccess

> ID：13058785
> 
> 赞同：0
> 
> 时间：2012-10-24T22:27:20.063
> 
> 标签：.htaccess

```
RewriteEngine on
RewriteBase /
RewriteRule ^(.*)$ index.php?page=$1 
```

我的 .htaccess 文件有错误。在我的索引页面上，我有一个 PHP 来检查 $_GET['page'] 是什么，`index.php`当我输入`domain.com/home`.

我希望它在我输入时作为家返回`domain.com/home`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T23:13:48.497

你需要防止你的规则循环。如果 URI 已经是，请尝试添加一个防止重写的条件`index.php`：

```
RewriteEngine on
RewriteBase /
RewriteCond %{REQUEST_URI} !index.php
RewriteRule ^(.*)$ index.php?page=$1 
```

# postgresql - 如何在事务中获取 SELECT 语句的结果？

> ID：13058790
> 
> 赞同：8
> 
> 时间：2012-10-24T22:27:43.623
> 
> 标签：postgresql, transactions

我无法通过 PostgreSQL 文档、Web 或什至在 StackOverflow 上获得关于这个简单问题的信息……我一定不明白这里的一些重要内容。

我在 PostgreSQL 中做一个简单的`SELECT`/事务：`UPDATE`

```
START TRANSACTION;
SELECT "column" FROM "table" WHERE "criterion" = 'value' AND "activated" = true;
UPDATE "table" SET "activated" = false WHERE "criterion" = 'value';
COMMIT 
```

基本上，我需要在其`activated`状态为时获取列的值，`true`然后将其停用。PostgreSQL 告诉我有 1 行结果已被取消

如果我执行以下操作（基本上是没有`UPDATE`声明的相同事务），也会发生同样的情况：

```
START TRANSACTION;
SELECT "column" FROM "table" WHERE "criterion" = 'value' AND "activated" = true;
COMMIT 
```

我对交易有什么不明白的地方？任何`SELECT`输出都不能从交易块中取出吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T23:09:08.327

这将从更新的行中返回所有“列”的值：

```
UPDATE "table" SET "activated" = false WHERE "criterion" = 'value' AND "activated" = true
returning "column"; 
```

与交易无关。

`returning`将返回值，就像`select`发出 a 一样：

```
insert into foo (ticket, row, archived) values (3,7,true) returning *;
 ticket | row | archived 
--------+-----+----------
      3 |   7 | t 
```

* * *

```
update foo
set archived = true
where not archived
returning *;
 ticket | row | archived 
--------+-----+----------
      2 |   5 | t 
```

# php - 禁用表单上的验证器以添加没有 javascript 的子表单

> ID：13058794
> 
> 赞同：0
> 
> 时间：2012-10-24T22:28:12.183
> 
> 标签：php, symfony

在表单上暂时禁用验证器的最佳方法是什么。考虑以下

MyController.php

```
$builder = $this->createFormBuilder()
           ->add('parentfield1')
           ->add('parentfield2')
           ->add('children', 'collection', array('type' => new ChildType(), 'allow_add' => true));

$form = $builder->getForm();

if ($request->request->get('addb')) { 
    $formReq = $request->request->get('form');

    $formReq['children'][] = array(
        'child_id' => '1',
        'childfield1' => '',
        'childfield2' => ''
    );

    $request->request->set('form', $formReq);

    // I would like to disable validators here somehow
    $form->bindRequest($request);
} elseif ($request->request->get('sendb')) {
    $form->bindRequest($request);

    // persist form to database
} 
```

所以在我的表单中，我有两个不同的按钮： sendb - 发布表单，验证它并保存到数据库 addb - 只发布表单并添加新字段以添加子项而不调用验证器

目前我可以用验证组来做到这一点：

```
$validationGroups = array();
if($request->request->get('addb')) {
    // I just use group not defined in entity for any validators
    $validationGroups[] = 'novalidation';
}

$builder = createFormBuilder(new ParentEntity(), array('validation_groups' => $validationGroups)); 
```

这可行，但这也意味着代码重复，因为 symfony2 只允许将验证器传递给表单构建器构造函数，我必须检查 request->get('addb') 两次。

我知道添加子表单字段也可以使用 javascript（集合原型选项）完成，但我想让它在没有 javascript 的情况下工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T06:46:44.927

您可以根据`setDefaultOptions`方法中提交的数据动态设置验证组。见[这里](http://symfony.com/doc/current/book/forms.html#groups-based-on-submitted-data)。

# php - 彩盒中的ajax和html数组

> ID：13058797
> 
> 赞同：1
> 
> 时间：2012-10-24T22:28:21.083
> 
> 标签：php, javascript, jquery, ajax, colorbox

我试图强制 colorbox 使用 ajax 响应给出的 html 数组，但它仍然不起作用。

javascript代码：

```
$.post($('#createForm').attr('action'),{
        'id' : 1
    },function(data){
        var $trash = $('<div>').hide().appendTo('body');

        $.each(data, function(i){
            $(data[i]).appendTo($trash);
            alert(data[i]);
        });

        $trash.find('div').colorbox({rel:'mygroup', open:true});
    }, 'json'); 
```

php代码：

```
 $content = '<div class="page" rel="mygroup"><p class="kkk">item1</p></div>';
    $content2 = '<div class="page" rel="mygroup"><p class="kkk">item2</p></div>';
    $return = json_encode(array($content, $content2));
    return new Response($return); 
```

响应是正确的，因为警报工作正常。我需要呈现一个由多个页面组成的 html 文档。

我将不胜感激任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T09:11:26.270

你可以避免使用 json ，像这样将所有页面插入到一般 div 中，`<div class="container><div class="page" rel="mygroup"><p class="kkk">item1</p></div><div class="page" rel="mygroup"><p class="kkk">item2</p></div></div>`而不是在 js 部分使用这个：

```
$.post($('#createForm').attr('action'),{
    'id' : 1
},function(data){
    var $trash = $('<div>').hide().appendTo('body');

   $(data).children().each(function(i){
        $(this).appendTo($trash);
        alert($(this).html());
    });

    $trash.find('div').colorbox({rel:'mygroup', open:true});
}); 
```

它会提醒html块的内部值，但除此之外会做你需要的

# android - Android App 在调试器中运行，但不在运行模式下

> ID：13058799
> 
> 赞同：0
> 
> 时间：2012-10-24T22:28:25.787
> 
> 标签：android, json

我有以下 json 解析器。

```
 public class JSONParserThreaded extends AsyncTask<String, Integer, String>
{
    static InputStream is = null;
    static JSONObject jObj = null;
    static String json = "";

    JSONObject processedjObj =null;

    JSONParserThreaded()
    {

    }

    @Override
    protected String doInBackground(String... params) 
    {
        // TODO Auto-generated method stub
        String url = params[0];
        try
        {
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent(); 
        }
        catch (UnsupportedEncodingException e) 
        {
            e.printStackTrace();
        } 
        catch (ClientProtocolException e) 
        {
            e.printStackTrace();
        } catch (IOException e) 
        {
            e.printStackTrace();
        }

        try 
        {
            BufferedReader reader = new BufferedReader(new InputStreamReader(is, "iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) 
            {
                sb.append(line + "\n");
            }
            is.close();
            json = sb.toString();

        } 
        catch (Exception e) 
        {
            Log.e("Buffer Error", "Error converting result " + e.toString());
        }

        // try parse the string to a JSON object
        try 
        {
            jObj = new JSONObject(json);
            setJSONObject(jObj);

        } 
        catch (JSONException e) 
        {
            Log.e("JSON Parser", "Error parsing data " + e.toString());
        }

        // return JSON String

        return "Sucess";
    }

    void setJSONObject(JSONObject jObject)
    {
        processedjObj = jObject;
    }

    JSONObject returnJSONObject()
    {
        return processedjObj;
    }

    @Override
    protected void onPostExecute(String result) 
    {
        super.onPostExecute(result);

    }
} 
```

我在以下代码中使用解析器

```
 public class CategoryScreenActivity extends Activity
{
    private static String url = "http://www.network.com/store/getCategories.php";

    static final String TAG_CATEGORY = "categories";
    static final String TAG_CATEGORY_NAME = "name";
    static final String TAG_CATEGORY_ID = "id";
    static final String TAG_CATEGORY_THUMBNAIL_URL = "thumbnail";
    static final String TAG_CATEGORY_IMAGE_MEDIUM_URL = "image_medium";
    static final String TAG_CATEGORY_IMAGE_LARGE_URL = "image_large";

    JSONArray categories = null;
    JSONObject wholeCategory = null;

    ListView mainListView;
    ListAdpater adapter;
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.list_view);

        ArrayList<HashMap<String, String>> categoryList = new ArrayList<HashMap<String, String>>();

        /*JSONParser jParser = new JSONParser();

        JSONObject json = jParser.getJSONFromURL(url);*/

        JSONParserThreaded jParserThread = new JSONParserThreaded();
        jParserThread.execute(url);

        try
        {
            //Getting Array of Categories
            wholeCategory = jParserThread.returnJSONObject();
            =>  categories = wholeCategory.getJSONArray(TAG_CATEGORY);  <=

            for(int i=0; i < categories.length(); i++)
            {
                JSONObject c = categories.getJSONObject(i);

                String cname = c.getString(TAG_CATEGORY_NAME);
                String cid = c.getString(TAG_CATEGORY_ID);
                String cThumbNailWithBackSlash = c.getString(TAG_CATEGORY_THUMBNAIL_URL);
                String cImageMediumWithBackSlash = c.getString(TAG_CATEGORY_IMAGE_MEDIUM_URL);
                String cImageLargeWithBackSLash = c.getString(TAG_CATEGORY_IMAGE_LARGE_URL);

                HashMap<String, String> categoryMap = new HashMap<String, String>();

                categoryMap.put(TAG_CATEGORY_ID,cid);
                categoryMap.put(TAG_CATEGORY_NAME, cname);
                categoryMap.put(TAG_CATEGORY_THUMBNAIL_URL, cThumbNailWithBackSlash);
                categoryMap.put(TAG_CATEGORY_IMAGE_MEDIUM_URL,cImageMediumWithBackSlash);
                categoryMap.put(TAG_CATEGORY_IMAGE_LARGE_URL,cImageLargeWithBackSLash);

                categoryList.add(categoryMap);
            }
        }
        catch(JSONException e)
        {
            e.printStackTrace();
        }
        mainListView = (ListView)findViewById(R.id.list);
        adapter = new ListAdpater(this, categoryList);
        mainListView.setAdapter(adapter);
    }

} 
```

**从“=> <=”**包围的行中抛出空指针异常 该应用程序在调试模式下工作正常，但在我运行它时却不行。谁能帮帮我？

**我在下面添加了堆栈跟踪。**

![在此处输入图像描述](../Images/2c022fe8a2e678013b2f65ed34271f22.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T22:34:48.557

您必须将您的网络委托给`AsyncTask`或`IntentService`。在 UI 线程上做网络是错误的。

请阅读有关该主题的[这篇文章](http://www.androiddesignpatterns.com/2012/06/app-force-close-honeycomb-ics.html)。这是[AsyncTask 教程](http://www.vogella.com/articles/AndroidPerformance/article.html)

# python - 在蓝图模型中使用 Flask-SQLAlchemy，无需参考应用

> ID：13058800
> 
> 赞同：73
> 
> 时间：2012-10-24T22:28:25.583
> 
> 标签：python, flask, flask-sqlalchemy

我正在尝试使用蓝图在 Flask 中创建一个“模块化应用程序”。

但是，在创建模型时，我遇到了必须引用应用程序才能获得`db`Flask-SQLAlchemy 提供的 -object 的问题。我希望能够将一些蓝图与多个应用程序一起使用（类似于 Django 应用程序的使用方式），所以这不是一个好的解决方案。*

*   可以进行切换，让蓝图创建`db`实例，然后应用程序将其与蓝图的其余部分一起导入。但是，任何其他希望创建模型的蓝图都需要从**该**蓝图而不是应用程序导入。

我的问题是：

*   有没有一种方法可以让蓝图定义模型，而无需了解它们以后使用的应用程序——并且将多个蓝图组合在一起？我的意思是必须从您的蓝图中导入应用程序模块/包。
*   我一开始就错了吗？蓝图不是独立于应用程序并且是可再分发的（à la Django 应用程序）吗？
    *   如果不是，那么您*应该*使用什么模式来创建类似的东西？烧瓶扩展？您是否应该干脆不这样做 - 并且可能集中所有模型/模式 à la Ruby on Rails？

> *编辑*：我自己现在一直在考虑这个问题，这可能与 SQLAlchemy 比 Flask 更相关，因为你必须`declarative_base()`在声明模型时。*无论如何，这*一定来自某个地方！
> 
> 也许最好的解决方案是将项目的模式定义在一个地方并将其分散开，就像 Ruby on Rails 那样。声明式 SQLAlchemy 类定义实际上更像 schema.rb，而不是 Django 的 models.py。[我想这也会使迁移（来自alembic](http://pypi.python.org/pypi/alembic/)或[sqlalchemy-migrate](http://code.google.com/p/sqlalchemy-migrate/) ）更容易使用。

* * *

我被要求提供一个示例，所以让我们做一些简单的事情：假设我有一个描述“平面页面”的蓝图——存储在数据库中的简单、“静态”内容。它使用一个只有短名称（用于 URL）、标题和正文的表格。这是`simple_pages/__init__.py`：

```
from flask import Blueprint, render_template
from .models import Page

flat_pages = Blueprint('flat_pages', __name__, template_folder='templates')

@flat_pages.route('/<page>')
def show(page):
    page_object = Page.query.filter_by(name=page).first()
    return render_template('pages/{}.html'.format(page), page=page_object) 
```

然后，最好让这个蓝图定义它自己的模型（this in `simple_page/models.py`）：

```
# TODO Somehow get ahold of a `db` instance without referencing the app
# I might get used in!

class Page(db.Model):
    name = db.Column(db.String(255), primary_key=True)
    title = db.Column(db.String(255))
    content = db.Column(db.String(255))

    def __init__(self, name, title, content):
        self.name = name
        self.title = title
        self.content = content 
```

* * *

这个问题与：

*   [Flask-SQLAlchemy 导入/上下文问题](https://stackoverflow.com/questions/9692962/flask-sqlalchemy-import-context-issue)
*   [Flask 应用程序分为模块的文件夹布局是什么？](https://stackoverflow.com/questions/6089020/whats-your-folder-layout-for-a-flask-app-divided-in-modules?rq=1)

和其他各种，但所有回复似乎都依赖于导入应用程序的`db`实例，或者做相反的事情。“ [Large app how to”](https://github.com/mitsuhiko/flask/wiki/Large-app-how-to) wiki 页面也使用了“import your app in your blueprint”模式。

[* 由于官方文档显示了如何在蓝图中创建路线、视图、模板和资产，而不关心它“在”什么应用程序，我假设蓝图通常应该可以跨应用程序重用。然而，如果没有独立的模型，这种模块化似乎并没有那么*有用*。]

[既然蓝图可以多次挂接到应用程序中，那么在蓝图中拥有模型可能只是错误的方法？]

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-11-17T16:22:06.123

我相信最真实的答案是模块化蓝图不应该直接关注数据访问，而是依赖于提供兼容实现的应用程序。

因此，鉴于您的示例蓝图。

```
from flask import current_app, Blueprint, render_template

flat_pages = Blueprint('flat_pages', __name__, template_folder='templates')

@flat_pages.record
def record(state):
    db = state.app.config.get("flat_pages.db")

    if db is None:
        raise Exception("This blueprint expects you to provide "
                        "database access through flat_pages.db")

@flat_pages.route('/<page>')
def show(page):
    db = current_app.config["flat_pages.db"]
    page_object = db.find_page_by_name(page)
    return render_template('pages/{}.html'.format(page), page=page_object) 
```

由此，没有什么可以阻止您提供默认实现。

```
def setup_default_flat_pages_db(db):
    class Page(db.Model):
        name = db.Column(db.String(255), primary_key=True)
        title = db.Column(db.String(255))
        content = db.Column(db.String(255))

        def __init__(self, name, title, content):
            self.name = name
            self.title = title
            self.content = content

    class FlatPagesDBO(object):
        def find_page_by_name(self, name):
            return Page.query.filter_by(name=name).first()

    return FlatPagesDBO() 
```

并在您的配置中。

```
app.config["flat_pages.db"] = setup_default_flat_pages_db(db) 
```

通过不依赖从 db.Model 的直接继承而只使用来自 sqlalchemy 的 vanilla declarative_base，可以使上述内容变得更简洁，但这应该代表它的要点。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-12-24T23:29:06.683

我有使蓝图完全模块化并且不参考应用程序的类似需求。我想出了一个可能干净的解决方案，但我不确定它有多正确以及它的局限性是什么。

这个想法是在蓝图中创建一个单独的`db`对象 ( ) 并从创建根应用程序的位置调用和方法。`db = SQLAlchemy()``init_app()``create_all()`

下面是一些示例代码来展示项目的结构： 调用应用程序并调用`jobs`蓝图，`status`并将其存储在蓝图文件夹中。

`blueprints.status.models.py`

```
from flask_sqlalchemy import SQLAlchemy
db = SQLAlchemy()  # <--- The db object belonging to the blueprint

class Status(db.Model):
    __tablename__ = 'status'
    id = db.Column(db.Integer, primary_key=True)
    job_id = db.Column(db.Integer)
    status = db.Column(db.String(120)) 
```

`models.py`

```
from flask_sqlalchemy import SQLAlchemy
db = SQLAlchemy()  # <--- The db object belonging to the root app

class Job(db.Model):
    __tablename__ = 'job'
    id = db.Column(db.Integer, primary_key=True)
    state = db.Column(db.String(120) 
```

`factory.py`

```
from .blueprints.status.models import db as status_db  # blueprint db
from .blueprints.status.routes import status_handler   # blueprint handler
from .models import db as root_db                      # root db
from flask import Flask

def create_app():
    app = Flask(__name__)

    # Create database resources.
    app.config['SQLALCHEMY_DATABASE_URI'] = 'sqlite:////path/to/app.db'
    root_db.init_app(app)
    status_db.init_app(app)     # <--- Init blueprint db object.
    with app.app_context():
        root_db.create_all()
        status_db.create_all()  # <--- Create blueprint db.

    # Register blueprint routes.
    app.register_blueprint(status_handler, url_prefix="/status")

    return app 
```

我`gunicorn`用`gevent`工人对其进行了测试，并且可以正常工作。我在这里问了一个关于解决方案稳健性的单独问题： [为每个蓝图创建一个 SQLAlchemy 实例并多次调用 create_all](https://stackoverflow.com/questions/47963461/create-one-sqlalchemy-instance-per-blueprint-and-call-create-all-multiple-times)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T20:37:54.470

您问“蓝图不应该独立于应用程序并且可以再分发（à la Django 应用程序）吗？”

答案是肯定的。蓝图与 Django App 不同。

如果您想使用不同的应用程序/配置，那么您需要使用“应用程序调度”而不是蓝图。阅读本文 [1]： http: [//flask.pocoo.org/docs/patterns/appdispatch/#app-dispatch](http://flask.pocoo.org/docs/patterns/appdispatch/#app-dispatch) [1]

此外，这里的链接 [1] [http://flask.pocoo.org/docs/blueprints/#the-concept-of-blueprints](http://flask.pocoo.org/docs/blueprints/#the-concept-of-blueprints) [1]

它清楚地表明，我引用“Flask 中的蓝图不是可插入的应用程序，因为它实际上不是应用程序——它是一组可以在应用程序上注册的操作，甚至可以多次注册。为什么不拥有多个应用程序对象？你可以这样做（请参阅应用程序调度），但您的应用程序将具有单独的配置，并将在 WSGI 层进行管理。”

# java - 调用静态和非静态方法的线程

> ID：13058801
> 
> 赞同：1
> 
> 时间：2012-10-24T22:28:31.810
> 
> 标签：java, multithreading

[免责声明：此代码是从用于静态和非静态方法的同步块](https://stackoverflow.com/q/4415468/547453)中复制而来的

我对其进行了一些修改。我想知道如何让线程同时调用**同步**的静态和非静态方法。我可以通过将非静态方法包装在**同步**块中来使其工作。还有其他方法吗？

```
public class StaticNonStaticSynch  
{ 
 public static void main(String[] args)  
 { 
      final StaticNonStaticTest staticNonStaticTest = new StaticNonStaticTest(); 
  Runnable runnable1 = new Runnable()  
  { 
   @Override 
   public void run()  
   { 
staticNonStaticTest.nonStaticMethod(); 
   } 
  }; 

  Runnable runnable2 = new Runnable()  
  { 
   @Override 
   public void run()  
   { 
    StaticNonStaticTest.staticMethod(); 
   } 
  }; 

  Thread thread1 = new Thread(runnable1, "First Thread"); 
  Thread thread2 = new Thread(runnable2, "Second Thread"); 

  thread1.start(); 
  thread2.start(); 
 } 
} 

class StaticNonStaticTest 
{ 

 void nonStaticMethod() 
 { 
 //synchronized (StaticNonStaticTest.class){ 
   for(int i=0;i<50;i++) 
   { 
    System.out.println("Non - Static method called by " + Thread.currentThread().getName() +" : = "+i); 
   } 
// } 
 } 
 static synchronized void staticMethod() 
 {  
   for(int i=0;i<50;i++) 
   { 
    System.out.println("Static method called by " + Thread.currentThread().getName() +" : = "+i); 
   } 
 } 
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T23:20:37.733

请记住：

```
public class MyClass {

    public synchronized void doSomething() {
        // Do something
    }

    public synchronized static void doSomethingStatic() {
        // Do something static
    }
} 
```

基本上编译为：

```
public class MyClass {

    public void doSomething() {
        synchronized(this) {
            // Do something
        }
    }

    public static void doSomethingStatic() {
        synchronized(MyClass.class) {
            // Do something static
        }
    }
} 
```

请注意，它们不会在同一事物上同步。要解决此问题，请为它们创建一个对象以锁定（称为互斥对象或“互斥对象”）：

```
public class MyClass {

    private static final Object MUTEX = new Object();

    public void doSomething() {
        synchronized(MUTEX) {
            // Do something
        }
    }

    public static void doSomethingStatic() {
        synchronized(MUTEX) {
            // Do something static
        }
    }
} 
```

这应该使得这两种方法中只有一种在多个线程中同时运行。

几个提示：

*   总是`synchronized(variable)`在`variable`那个`final`.
*   `MUTEX`不必是严格的互斥锁，它可以是一个实际的对象。请参见下面的示例。
*   记住`synchronized`方法上的修饰符是如何有效实现的。这就像or`synchronized`上的一个块。`this``MyClass.class`

除了拥有一个严格来说是互斥体的对象外，您还可以使用任何`final`. 例如，要[`Map`](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html)在迭代期间同步：

```
public class MyClass {

    private static final Map<String, String> map = new HashMap<String, String>(); // Java 6
    private static final Map<String, String> map = new HashMap<>(); // Java 7

    public static void put(String k, String v) {
        synchronized(map) {
            map.put(k, v);
        }
    }

    public static void printAll() {
        synchronized(map) {
            for (Entry<String, String> entry : map.entrySet()) {
                System.out.println(entry.getKey() + ":" + entry.getValue());
            }
        }
    }
} 
```

这段代码保证你永远不会得到[`ConcurrentModificationException`](http://docs.oracle.com/javase/6/docs/api/java/util/ConcurrentModificationException.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T22:31:49.877

您可以让这两种方法在一个公共锁对象上进行内部同步。否则，在静态方法执行时让实例方法阻塞的唯一方法是在类对象上同步（正如您在注释行中所做的那样）。

同步实例方法在对象实例上同步；同步静态方法在类实例上同步。请注意，如果类有两个实例（例如，来自不同的类加载器），同步的静态方法可能会同时执行。您通常会知道这是否正在发生，因为您必须做大量工作才能实现。

这是在一个公共锁对象上同步静态方法和实例方法的一种方法：

```
class StaticNonStaticTest {
    private static final Object LOCK_OBJECT = new Object();

    void nonStaticMethod() {
        synchronized (LOCK_OBJECT) {
            for (int i=0; i<50; i++) {
                System.out.println("Non - Static method called by "
                  + Thread.currentThread().getName() + " : = " + i);
            }
        }
    }

    static void staticMethod() {
        synchronized (LOCK_OBJECT) {
            for (int i=0; i<50; i++) {
                System.out.println("Static method called by "
                  + Thread.currentThread().getName() +" : = "+i);
            } 
        } 
    }
} 
```

# actionscript-3 - Adobe AIR，如何在新窗口中打开场景

> ID：13058805
> 
> 赞同：1
> 
> 时间：2012-10-24T22:28:49.343
> 
> 标签：actionscript-3, air, flash-cs5

我正在 Flash Professional 中开发一个联网的 AIR 应用程序。我需要打开应用程序的两个实例，经过搜索，我发现多次启动应用程序只会导致将调用事件发送到当前正在运行的应用程序。

到目前为止，我一直在使用 NetConnection 和 NetGroup（受 Flash Player 10.1+ 支持），现在我使用的是 ServerSocket 和 Socket，它需要 AIR 2+ 运行时。

[我找到了一个在调用时打开窗口的解决方案。](http://www.actionscript.org/forums/showthread.php3?t=254267)

我的解决方案是在调用时启动一个新窗口

```
function openWindow():void
{
newWin = new NativeWindow(init); //Initialize the Native Window
newWin.activate();
newWin.height = 200;
newWin.width = 300;
newWin.title = "My First New Win!";
} 
```

并拥有它

```
gotoAndPlay(1, "Scene 1"); 
```

有没有办法在新窗口上执行？或者有没有办法打开一个 AIR 应用程序的两个实例？

*编辑* 您可以通过更改其 ID 打开同一个空中应用程序的两个实例。但是，每次我要调试时，这是一个非常复杂的过程！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T06:38:10.177

原来 Android 上的 AIR 不支持 ServerSockets。这意味着我必须使用非 AIR flash 方法来实现通信。

然后我可以通过多个 Flash Player 实例实现网络测试。

我不相信 ADL 有能力一次运行多个实例。

# java - 如何不断解析在服务器中动态修改的 xml 日志文件 (SAXParser)？修改时出现文件提前结束错误

> ID：13058806
> 
> 赞同：1
> 
> 时间：2012-10-24T22:28:52.713
> 
> 标签：java, saxparser, saxparseexception

所以我目前正在开发一个内部工具，并且出现了这个问题。我试图每 10 秒解析一次这个 xml 文件，直到它找到一个特定的标签。但是，当用户单击并执行大量操作时，此 xml 文件会被修改。我有一个循环打开一个新的文件输入流并解析 xml 文件。但我不断收到文件过早结束错误。有谁知道如何处理这个？

```
 while(notfound)
  {    
       fis = new FileInputStream(new File("c:/tmp/abc.xml"));
       SaxParser.parse(fis, sampleHandler);
       notFound = sampleHandler.checkIfFound();
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T22:40:00.487

XML 文件必须格式正确。每个打开的标签都必须关闭。

XML 文件可能只有在其编写器整体关闭后才能被解析。

XML 文件不是流，而是文件。

我想将 XML 源解析为流，您必须将格式正确的片段处理为`records`.

想象一下这个结构：

```
<log-file>
   <log-record date="...">
      <log-event text="..." />
      <log-event text="..." />
      <log-event text="..." />
   </log-record>

   <log-record date="...">
      <log-event text="..." />
      <log-event text="..." />
      <log-event text="..." />
   </log-record>

   <log-record date="...">
      <log-event text="..." />
      <log-event text="..." />
      <log-event text="..." />
   </log-record>

<log-file> 
```

文件阅读器（不是解析器）可以提取以 . 开头的格式良好的片段。XML 解析器可以解析提取的片段。

# android - 我似乎无法停止自己的服务

> ID：13058813
> 
> 赞同：0
> 
> 时间：2012-10-24T22:29:42.837
> 
> 标签：android, android-service

我有一个在屏幕上放置一个红色矩形的服务，并且有一个看起来像这样的 onDestroy()

```
@Override
    public void onDestroy() {

      Toast.makeText(this, "service done", Toast.LENGTH_SHORT).show(); 
} 
```

从我的一项活动中，我呼吁像这样终止这项服务：

```
 stopService(new Intent(this, assNavOverrideService.class)); 
```

我看到吐司说 onDestroy() 已被调用，但我仍然看到红色矩形并且它仍在运行..

我的清单正在使用：

```
<uses-permission android:name="android.permission.KILL_BACKGROUND_PROCESSES" > 
```

我的服务

```
public class assNavOverrideService extends Service {

    Timer timer;
    WindowManager.LayoutParams handleParams;

    View screenBlock;
    View disableStatusBar;
    WindowManager winMgr;
    @Override
    public void onCreate() {

        winMgr = (WindowManager)getSystemService(WINDOW_SERVICE); 
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {

        disableStatusBar = new TableLayout(getApplicationContext());
        handleParams = new WindowManager.LayoutParams(
                WindowManager.LayoutParams.FILL_PARENT,
                50, 
                WindowManager.LayoutParams.TYPE_SYSTEM_OVERLAY,
                 // this is to keep button presses going to the background window
                WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE |
                WindowManager.LayoutParams.FLAG_WATCH_OUTSIDE_TOUCH |
                 // this is to enable the notification to recieve touch events
                WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL |
                 // Draws over status bar
                WindowManager.LayoutParams.FLAG_LAYOUT_NO_LIMITS,
                PixelFormat.TRANSPARENT);

         handleParams.gravity = Gravity.TOP;
         handleParams.y = 750;

         disableStatusBar.setBackgroundResource(R.drawable.fake_nav);

         winMgr.addView(disableStatusBar, handleParams);

         timer = new Timer();
         uiCheckTask tTask = new uiCheckTask();
         tTask.setService(this);
         timer.schedule(tTask, 50, 10);

        // If we get killed, after returning from here, restart
         return START_REDELIVER_INTENT;
    }

    @Override
    public IBinder onBind(Intent intent) {
        // We don't provide binding, so return null
        return null;
    }

    @Override
    public void onDestroy() {

      Toast.makeText(this, "service done", Toast.LENGTH_SHORT).show(); 
    }

    class uiCheckTask extends TimerTask {
        Boolean secDialog = false;
        assNavOverrideService myService;

       public void setService(assNavOverrideService mS){
           myService = mS;
       }

        public void run() {

                Log.v("TICK","TOCKKKKKKKKKKK");

        }

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T01:25:02.900

首先，您不需要拥有该权限即可停止您创建的服务。我经常使用服务（启动和停止），我向您保证我从未使用过该权限。

IE：

```
Intent service = new Intent(myContext,Service.class);

    startService(service);

    stopService(service); 
```

是你所需要的全部。

当然，您的服务确实需要在您的 Android 清单中声明。

现在，任何影响您的活动的东西都会使用该活动中的上下文。因此，终止您的服务不会改变 UI 上的内容。在 Destroy 上的服务中，您应该需要以某种方式引用矩形对象并以这种方式将其删除。

我不知道你是如何创建矩形的。但是如果它是一个视图，你可以将它设置为 VISIBILITY.GONE，或者如果它是一个 ViewStub，你可以放气它，如果它是一个对象你可以清除它，等等。

如果您说即使在调用停止服务功能后您的服务仍在运行，那么还有其他问题。即使看起来您正在正确停止服务。

- - - - - - - - - - - - - - - 编辑 - - - - - - - - - - -------------------------------------------------- ------------------------------------------------ 您的服务也可能与您的活动绑定。如果你这样做，你需要释放绑定。

[这是](https://stackoverflow.com/questions/2176375/android-service-wont-stop)一个类似问题的链接：

我希望这可以帮助你！干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T14:31:44.383

解决了，在我的服务中，`onDestroy()`我不得不停止计时器任务，然后服务关闭......

# php - 如何从 jquery .load 获取 php 响应

> ID：13058816
> 
> 赞同：0
> 
> 时间：2012-10-24T22:29:59.443
> 
> 标签：php, jquery, ajax, post

我给出另一个代码，例如这是我的 some3.php 代码：（第一个文件）：

```
<head>
<script src="jquery-1.7.2.js" type="text/javascript"></script>
<script type="text/javascript">
$(document).ready(function(){
    $('p').click(function(){
        var who = $('input#who').val();
        var why = $('input#why').val();     
        $('#geting').load('file2.php',{who:who,why:why},function(applyData){
  if ( applyData == 'YEY . Ye have hi' ){
alert('OKKK data is ok ');
  } else{
      alert('Nooo We dont have requested output');
  }
        });
    });
});

</script>
</head>
<body>
<p> click </p>
<input type="text" id="who">
<br>
<input type="text" id="why">
<div id="geting" align="center">
</div>
</body> 
```

我这是我的 file2.php：

```
<?php
echo "1";
echo "2";
    if($_REQUEST['who'] == "hi"){

    $myVariable = "YEY . Ye have hi";
    echo $myVariable;
    } else{
   $myVariable = "The out put is not Hi";
    echo $myVariable;
    }
?> 
```

它不起作用为什么？因为我们有 echo "1" 和 echo "2" 我想要 jquery 只检查 $myVariable 数据而不是整个 php 回调！我想我必须使用 json 但我不知道如何

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T22:55:01.277

好吧，假设您想使用 JQuery 从您发布到的页面上读取值，您可以这样做，因为您通过执行以下操作在该页面中回显该值：`echo $myVariable;` 现在这就是我通常如何读取通过使用 JQuery 的`get()`方法，使用 JQuery 关闭另一个页面。

```
$.get("thepagetoretrievefrom.php", function(retrievedvalue) {
    alert("Here's the data you requested: " + retrievedvalue);
    if (retrievedvalue == 1)  {
        //print out something here
        alert("The retrieved value was 1.");
    }
}); 
```

这应该从 PHP 页面中检索值。“thepagetoretrievefrom.php”是您要从中检索信息的页面。function(retrievedvalue) 只是表示您通过 JQuery 从页面请求的任何输出都将被放入检索值。然后，使用 JQuery，您可以根据“检索值”是什么来决定是否要对另一个页面进行新的调用。然而，这并不是实现这一目标的最佳方法，因为这将打印该页面中可能存在的任何内容，但如果您从该页面请求一个特定值，那么这应该不是问题。

# javascript - 具有水平滑动内容的底部 div

> ID：13058818
> 
> 赞同：0
> 
> 时间：2012-10-24T22:30:23.573
> 
> 标签：javascript, jquery, html, css

我需要一个始终位于页面底部的 div，左边距为 172px，右边距为 383px。

这个 div 将有一些图像和文本以及左右按钮。例如，当您将鼠标悬停在右侧按钮上时，“不可见”的内容，在达到 div 的宽度限制后，将从右侧开始出现，向左侧滑动内容。

我尝试使用`position:fixed; bottom:0px`，但我无法设置 div 的边距，并且当屏幕尺寸发生变化时，它的宽度不会改变......

例如，这正是我想要的（底部的黑色 div）：

![在此处输入图像描述](../Images/1bfbefb2aedb7cb6fc9c4f20e347c598.png)

如果您知道任何可以执行我想要的 jquery 插件，或者您知道如何执行此类操作，请帮助我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T22:37:14.240

如果您正在使用`position: fixed`，则无法应用边距。您可以指定`left`and`right`属性。

```
position: fixed;
right: 383px;
bottom: 0;
left: 172px; 
```

我知道这并不完全符合您的要求，但是您可以在该 div 上设置`white-space`and`overflow`属性以使其显示水平滚动条。

```
white-space: nowrap;
overflow: auto; 
```

用户将使用底部的滚动条来移动 div 的内容。这是一个例子：http: [//jsfiddle.net/rustyjeans/5nv84/](http://jsfiddle.net/rustyjeans/5nv84/)

要使用 jQuery 设置`overflow: hidden`并添加一些调整`scrollLeft`div 的函数，然后添加一些在悬停时调用这些函数的控件。这是一个例子：http: [//jsfiddle.net/rustyjeans/FtSGn/](http://jsfiddle.net/rustyjeans/FtSGn/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T22:36:14.683

这不应该太难做到。您需要一个包含查看器尺寸的 div。然后，在其中有一个 div，绝对位置和尺寸超出查看器的宽度。当箭头悬停在使用 jquery 更改内部 div 的“左”css 属性时。那有帮助吗？

编辑：外部 div 应该有“位置：相对；” 以确保内部 div 相对于其边距定位。

# objective-c - Objective C - 使用属性获取访问器与直接使用 iVar

> ID：13058823
> 
> 赞同：2
> 
> 时间：2012-10-24T22:31:04.857
> 
> 标签：objective-c, ios, cocoa-touch, cocoa, properties

我想知道使用 (get) 访问器读取属性值和直接使用 iVar 之间到底有什么区别？

假设我有一个声明属性的类：

```
@interface Foo : NSObject

@property (strong) NSString *someString;

@end 
```

在实现中我正在使用它。以下两行之间是否有任何区别：

```
someLabel.text = self.someString;

someLabel.text = _someString; 
```

对于 set 访问器，这很清楚。Afaik 对于强大的属性，访问器负责保留和释放（一个有趣的“附带问题”是如果 ARC 改变了它，即直接设置 iVar [假设它不是 __weak iVar] 也使用 ARC 正确保留和释放），也KVO 需要使用访问器才能正常工作等。但是 getter 呢？

如果没有区别，是否有一种方法被认为是最佳实践？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T22:40:15.143

如您所知，调用`self.someString`确实是`[self someString]`. 如果您选择创建一个属性，那么您应该使用该属性。该属性可能添加了其他语义。也许该属性是延迟加载的。也许该属性不使用 ivar。调用属性的 getter 可能还有一些其他需要的副作用。也许现在没有，但也许这在未来会发生变化。现在调用该属性会使您的代码更具前瞻性。

如果您有一个 ivar 和一个属性，请使用该属性，除非您有明确的理由改为使用 ivar。可能存在您不希望执行该属性的任何额外语义或副作用的情况。所以在这种情况下，直接使用 ivar 比较好。

但最终，它是您的代码、您的财产、您的 ivar。您知道为什么要添加属性。您知道该财产的任何潜在好处（如果有的话）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T22:48:57.743

我想这就是你要找的。[为什么要使用 getter 和 setter？](https://stackoverflow.com/questions/1568091/why-use-getters-and-setters)

实际上有很多充分的理由考虑使用访问器而不是直接公开类的字段——不仅仅是封装的论点和使未来的变化更容易。

以下是我知道的一些原因：

*   封装与获取或设置属性相关的行为——这允许以后更容易地添加附加功能（如验证）。
*   隐藏属性的内部表示，同时使用替代表示公开属性。
*   使您的公共接口免受更改 - 允许公共接口在实现更改时保持不变，而不会影响现有消费者。
*   控制属性的生命周期和内存管理（处置）语义 - 在非托管内存环境（如 C++ 或 Objective-C）中尤为重要。
*   为属性在运行时更改时提供调试拦截点 - 在某些语言中，如果没有此属性，调试属性更改为特定值的时间和地点可能会非常困难。
*   改进了与旨在针对属性 getter/setter 操作的库的互操作性 - 想到了模拟、序列化和 WPF。
*   允许继承者更改属性行为方式的语义，并通过覆盖 getter/setter 方法来公开。
*   允许 getter/setter 作为 lambda 表达式而不是值传递。
*   getter 和 setter 可以允许不同的访问级别——例如 get 可能是公共的，但 set 可以是受保护的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T05:56:22.837

我不是一个非常有经验的人来回答这个问题，尽管我试图通过查看大约 10 岁左右的源代码来表达我的观点和经验。

在早期的代码中，他们正在创建 ivars 和属性/综合。现在只使用属性/综合。我看到的一个好处是代码更少并且没有混淆。

混乱！！！是的，如果 ivars 及其属性具有不同的名称，那么如果您在一段时间后阅读自己的代码，它确实会给其他人甚至您造成混淆。因此，为 ivar 和属性使用一个名称。

通过使用属性 KVO/KVB/KVC 会自动处理，这是肯定的。

@property/@synthesise 将您的 ivar 设置为 0/nil 等。

如果您的子类包含相同的 ivar，也很有帮助。

对于可变对象不要创建属性。

# c# - 我怎样才能得到一个字符串并每次从数组中返回一个字符串？

> ID：13058827
> 
> 赞同：1
> 
> 时间：2012-10-24T22:31:15.113
> 
> 标签：c#

我有这个功能：

```
private string offline(string targetDirectory)
        {
            string directory = ""; 
            try
            {
                string[] dirs = Directory.GetDirectories(targetDirectory,"*.*",SearchOption.TopDirectoryOnly);
                for (int i = 0; i < dirs.Length; i++)
                {
                    directory = dirs[i];
                }
            }
            catch
            {

            }
            return directory;

        } 
```

例如，如果 targetDirectory 是 c:\，那么我会进入数组 14 个目录。现在我希望每次我离线调用函数时它都会返回第一个字符串 c:\$Recycle.Bin 然后它会返回 c:\test 并且每次我调用函数时它都会返回数组中的下一个字符串. 由于我使用递归函数并从递归调用此离线函数，因此我希望它每次返回数组中的下一个字符串。

现在就像现在一样，它将仅返回数组中的最后一个目录，仅此而已。

我该怎么做 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T22:34:31.043

最简单的方法 - 使用`yield`：

```
IEnumerable<string> offline(string dir)
{
    ...
    ... instead of directory = dirs[i] do
    yield return dirs[i];
} 
```

# php - 从这个特定文件中获取数据的最有效方法是什么？

> ID：13058828
> 
> 赞同：1
> 
> 时间：2012-10-24T22:31:17.753
> 
> 标签：php, regex

我正在尝试考虑最有效的方法来解析存储名称、学生 ID 和 Facebook ID 的文件。我正在尝试获取 fbid 值，因此对于此特定行，它将是：1281766051。我考虑过为此使用正则表达式，但是对于从哪里*开始*我有点迷茫。我曾想过将所有这些数据添加到一个数组中并切掉它，但这似乎效率低下。

```
{"name":"John Smith","studentid":"10358595","fbid":"1284556651"} 
```

如果帖子太简短，我深表歉意。我会尽力添加我可能错过的任何内容。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T22:36:27.197

好吧，这似乎是 JSON，所以正确的方法是

```
$json = json_decode($str);
$id = $json->fbid; 
```

正则表达式解决方案如下所示：

```
preg_match('/"fbid":"(\d+)"/', $str, $matches);
$id = $matches[1]; 
```

但是我不能告诉你其中哪一个更有效。您必须对其进行概要分析。

**更新：**

我对执行时间进行了非常基本的检查（没有什么太可靠的，我只是测量了两个代码的 1,000,000 次执行）。对于您的特定输入，差异可以忽略不计：

```
json_decode: 27s
preg_match:  24s 
```

但是，如果您的 JSON 记录变大（例如，如果我在字符串的开头添加 3 个字段（这样两种解决方案都会受到影响）），则差异会变得非常明显：

```
json_decode: 46s
preg_match:  30s 
```

现在，如果我将三个字段添加到字符串的末尾，则差异会变得更大（显然，因为`preg_match`不关心匹配后的任何内容）：

```
json_decode: 45s
preg_match:  24s 
```

即便如此，在你应用这样的优化之前，对你的应用程序进行适当的分析，并确保这实际上是一个关键的瓶颈。如果不是，则不值得使用正则表达式函数来掩盖您的 JSON 解析代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T22:34:32.853

那是 JSON，使用：

```
$str = '{"name":"John Smith","studentid":"10358595","fbid":"1284556651"}';
$data = json_decode($str);

echo $data->fbid; 
```

干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T22:36:01.807

使用[json_decode](http://php.net/manual/en/function.json-decode.php)

```
$txt='{"name":"John Smith","studentid":"10358595","fbid":"1284556651"}';
$student =json_decode($txt);
echo $student->fbid; 
```

# objective-c - 计算夏令时后一天的 NSDate

> ID：13058835
> 
> 赞同：0
> 
> 时间：2012-10-24T22:31:28.923
> 
> 标签：objective-c, ios, nsdate

我刚刚在我的一个应用程序中找到了一个；问题是我正在计算菜单中的天数`initWithTimeIntervalSinceNow`并添加计算`(day*X)`（`X`意思是有问题的日子）。

但是，CEST 时区 10 月 27 日至 28 日之间的夜晚将变为 CET，因此这意味着一天的时间应由`(day*X)+3600`. 但是，我不想使用 if 案例，并认为应该有更好的方法来处理这个问题。

如何在记住夏季/冬季时间的情况下计算未来的日子？

我的代码：

```
 int day = (60*60*24);
    NSDate *today = [NSDate date];
    NSDate *days1 = [[NSDate alloc] initWithTimeIntervalSinceNow:day];
    NSDate *days2 = [[NSDate alloc] initWithTimeIntervalSinceNow:(day*2)];
    NSDate *days3 = [[NSDate alloc] initWithTimeIntervalSinceNow:(day*3)];
    NSDate *days4 = [[NSDate alloc] initWithTimeIntervalSinceNow:(day*4)];
    NSDate *days5 = [[NSDate alloc] initWithTimeIntervalSinceNow:(day*5)];
    NSDate *days6 = [[NSDate alloc] initWithTimeIntervalSinceNow:(day*6)];
    NSDate *days7 = [[NSDate alloc] initWithTimeIntervalSinceNow:(day*7)]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T00:53:33.150

试试这个：

```
- (NSDate *)dateByAddingXDaysFromToday:(int)days
{
    NSDateComponents *comps = [[NSDateComponents alloc] init];
    comps.day = days;
    return [[NSCalendar currentCalendar] dateByAddingComponents:comps toDate:[NSDate date] options:0];
} 
```

然后你可以使用：

```
NSDate *days1 = [self dateByAddingXDaysFromToday:1];
//etc... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T01:01:28.563

目前尚不清楚您要通过计算日期对象来实现什么目标。我假设您要创建引用未来 7 天的对象，与现在相同。

```
NSCalendar *calendar = [NSCalendar currentCalendar];
NSDateComponents *components = [[NSDateComponents alloc] init];
[components setDay:1];

NSDate *now = [NSDate date];
NSDate *days1 = [calendar dateByAddingComponents:components toDate:now options:0];
NSDate *days2 = [calendar dateByAddingComponents:components toDate:days1 options:0];
NSDate *days3 = [calendar dateByAddingComponents:components toDate:days2 options:0];
.... 
```

# jquery - 从匿名点击处理函数中删除 jQuery 点击处理程序

> ID：13058845
> 
> 赞同：2
> 
> 时间：2012-10-24T22:32:31.450
> 
> 标签：jquery, event-handling, anonymous-function

我有一个匿名函数处理一组单选按钮上的单击事件之后的过程。

在这个函数中会发生一些动画，我希望在函数结束之前禁用点击事件，以防止它在函数内再次触发。

该函数调用每个单选按钮通用的类名：

```
$(".question1").click( function(){ 
```

如何在函数执行任何动画时禁用此类元素上的任何进一步单击事件，并在它们完成后恢复它？

我已经尝试过 removeClass() 和 addClass() 来实现这一点，但它似乎在函数中不起作用。

我也尝试过 .off() 和 .on() ，但没有成功。

单选按钮本身在函数中被禁用，但是因为函数是在类名上调用的，所以仍然会触发 click 事件。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T22:41:26.597

我会走另一条路，如果元素正在被动画化，我会检查点击处理程序，在这种情况下只是返回，因为你必须使用[**:animated**](http://docs.jquery.com/Selectors/animated)选择器，如下所示：

```
$(".question1").click( function(){
   if ( $('#element').is(':animated') ) {
      return;
   }
   //rest of code
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T23:19:28.747

您可以禁用单击按钮，然后在动画完成后重新启用它。

```
$(".question1").click( function(){ 
   var that = this; 
 $(this).attr('disabled','disabled');
 $('.anim_div').animate({
    opacity: 0.25,
    left: '+=50',
    height: 'toggle'
   }, 5000, function() {
        $(that).attr('disabled',false);
 });
}); 
```

[http://api.jquery.com/animate/](http://api.jquery.com/animate/)

对于多个动画，您可以考虑使用 deferreds 来检测所有动画何时完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T19:19:59.383

一定是出了什么问题……开/关功能很好用，还有类选择器。

你能放一些代码吗？给作为一个小提琴，所以我们可以尝试提供帮助。

如果您不能给我们代码，我会尝试：

```
// triggered only if the class is not disable
$(".question1:not(:disabled)").on('click', function(){
    // do something...
}); 
```

**或者**

```
function theClick(){
    $(".question1").on('click', function(){
        // do something...
    });
}
function theAnimation(){
    $("#someId").on('click', function(){
        $(".question1").off('click'); // disable the click
        // do some animation
        // do more...
        // and more...
        theClick(); // finish, so re-enable
    });
} 
```

# arrays - 从两个数组中查找特定元素的总和

> ID：13058847
> 
> 赞同：4
> 
> 时间：2012-10-24T22:32:37.127
> 
> 标签：arrays, algorithm, search, binary

你能帮我解决这个问题吗？：“让 A 和 B 是自然数的递增排序数组，K 是任意自然数。找到一个有效的算法来确定所有可能的索引对 (i,j)，使得 A[i]+B[j]= K. 证明算法的正确性并估计其复杂性。”

我应该只遍历第一个数组并对另一个数组进行二进制搜索吗？谢谢 ：）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T22:42:04.897

不！

两个数组都是有序的，因此您可以执行以下操作：

*   `itA`在开头放置一个迭代器`A`
*   `itB`在末尾放置一个迭代器`B`
*   沿相反方向移动迭代器，`*itA + *itB`在每次迭代时进行测试。如果值等于`K`，则返回两个索引。如果该值小于`K`，则递增`itA`。否则，减量`itB`。

当你遍历两个数组时，你就在线性时间内完成了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T22:43:32.227

由于对于每个 A[i] 只能有一个 B[j]，因此您可以找到复杂度为 O(n+m) 的解。您可以相信，如果 (A[i1] B[j1]) 和 (A[i2] B[i2]) 都是正确的对，并且 i1 小于 i2，则 j1 必须大于 j2。希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T22:41:37.573

我不知道它是否有帮助，这只是一个想法。线性循环 A 和二进制搜索 B，但向后执行 A。通过能够在 A 中的每个步骤排除 B 的某些部分，这可能会为您提供更好的最佳情况。

如果你知道 A[i] 需要说 B[42] 来求解 K，你就会知道 A[i-1] 至少需要 B[43] 或更高。

编辑：我还想补充一点，如果 B 的元素比 A 少，请将其转过来并线性执行 B。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-09T00:30:29.307

C++ 中的可能实现如下所示：

```
#include <iostream>
int main()
{
    int A[]={1,2,3,6,7,8,9};
    int B[]={0,2,4,5,6,7,8,12};

    int K=9;
    int sizeB=sizeof B/sizeof(int);
    int sizeA=sizeof A/sizeof(int);

    int i=0;
    int j=sizeB-1;
    while(i<sizeA && j>=0)
    {
        if ((A[i]+B[j])==K){
            std::cout << i<<","<<j<< std::endl;
            i++;
            j--;
        }
        else if((A[i]+B[j])<K){
            i++;
        }
        else{
            j--;
        }
    } 
    return 0;
} 
```

# jquery - 通过其值获取属于 JSON 对象的一组对象

> ID：13058848
> 
> 赞同：0
> 
> 时间：2012-10-24T22:32:37.830
> 
> 标签：jquery, json, jquery-mobile, getjson

我正在使用 jQuery mobile 开发一个 Phonegap 应用程序，为此我使用本地 JSON 文件来存储一堆东西。

我想用 JSON 文件中的各种对象和值动态填充页面，其布局类似于…</p>

```
{"root" :[    
{"thingy" : "Bobby",
      "bits" : {
        "stuff" : {
          "One" : 1,
          "Two" : "Too"
        }
      },
      "bobs" : {
        "nicknackOne" : {
          "Three" : 3,
          "Four" : "Fore"
        },
        "nicknackTwo" : {
          "Five" : 5,
          "Six" : "Sicks"
        }
      }
    },
{"thingy" : "Majig",
      "bits" : {
        "stuff" : {
          "Seven" : "Ceven",
          "Eight" : "Ate"
        }
      },
      "bobs" : {
        "nicknackOne" : {
          "Nine" : 9,
          "Ten" : "Tenne"
        },
        "nicknackTwo" : {
          "Eleven" : 11,
          "Twelve" : "Tw' Elve"
        }
      }
    }
]} 
```

一个页面创建了一个链接列表，其中包含来自“thingy”的“Bobby”和“Majig”。'thingy' 的值被保存为一个全局变量，我想在新页面上使用它来显示所有附加的子对象。

所以我正在努力获取价值 - “鲍比”并展示所有相关的东西。

我想做*的*是这样的……</p>

```
 $.getJSON(url, {request just"Bobb"} function(data) {
//Inject the values in 'data' as HTML
}); 
```

请多多包涵，我是新手，仍在尝试掌握 jQuery。非常感谢所有帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T22:41:13.153

据我所知，如果没有服务器端处理该类型的请求，您将无法请求静态 JSON 文件的特定部分。您需要提取整个文件，然后提取所需的部分。

```
$.getJSON(url, function(data) {
  for (var i=0;i<data.root.length;i++){
    if (data.root[i].thingy == "Bobby"){
      // do stuff
    }
  }
}); 
```

# magento - Magento：只有在您已经有其他东西的情况下，我如何才能将产品放入购物车？

> ID：13058854
> 
> 赞同：1
> 
> 时间：2012-10-24T22:33:16.220
> 
> 标签：magento, shopping-cart, product, magento-rules

我正在尝试建立一个magento商店，基本上我想要某些产品（添加项目），前提是他们的购物车中已经有主要产品。我不希望客户能够自行购买附加产品。

我该如何设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T11:27:03.123

为此，您可以[在 Magento 中创建捆绑产品](http://www.magentocommerce.com/knowledge-base/entry/creating-a-bundled-product)

# java - 如何修改此 java 命令行程序以搜索字符串并打印出该字符串的出现次数？

> ID：13058859
> 
> 赞同：0
> 
> 时间：2012-10-24T22:34:15.130
> 
> 标签：java

我有一个 Java 编程任务，需要使用两个必需的命令行参数和一个可选的命令行参数。让我给你们我的任务的详细信息，我的程序应该运行的示例输出以及我到目前为止编码的内容：

*   命令行参数一指定文本文件的名称
*   可选命令行参数 -i，如果使用，必须在第一个参数之后和第二个必需参数之前指定，表示搜索不区分大小写

*   第二个必需的参数/命令行参数是程序将在文件中搜索的字符串（一个或多个字符长），它在第一个必需的命令行参数中指定

示例输出：

```
% java FindOccurrences myLongFile.txt -i frequentString 

The string “frequentString” (ignoring case) occurs 5 times in the file myLongFile.txt 

% java FindOccurrences myLongFile.txt frequentString 

The string “frequentString” occurs 3 time in the file myLongFile.txt 

% java FindOccurrences myLongFile.txt 

usage: FindOccurrences filename [-i] string 
```

现在这是我到目前为止的代码：

```
import java.io.BufferedReader;  
import java.io.FileReader; 
import java.io.IOException; 
import java.util.StringTokenizer;
/* This program takes two required command line arguments, and an 
optional third as detailed below, and prints out the number of occurrences of 
a specified string: 

- Command Line argument one specifies the name of a text file 
- Optional Command Line argument -i, if used, must be specified after the
first argument and before the second required parameter, indicating that
the search is case insensitive 

- The second required parameter/Command Line argument is the string (one or 
more characters long) that the program will search for in the file, which was       specified 
in the first required Command Line argument

The following is how this program is expected to be used:

java FindOccurrences myLongFile.txt -i filename 

Notes: 
       - Command line arguments are separated by spaces
       - Command line arguments starting with a dash must be lower case
       - Command line arguments starting with a dash, which are sometimes optional,
         are called "switches."
       - The expression [-i] means that the search is case insensitive 

*/
public class FindOccurrences 
{ 
  public static void main(String[] args)
  {

    WhichCase theCase = WhichCase.caseInsensitive;  // caseInsensitive => output file contents w/o changing the case 

    FileReader fr = null;
    int matchFound = 0;
    String searchString;

    if (args.length < 2 || args.length > 3) 
    { 
      System.out.println("usage: FindOccurrences filename [-i] string");  
      System.exit(-1); 
    } 

    else if (args.length == 2 && args[0].charAt(0) != '-' && args[1].charAt(0) != '-')
    theCase = WhichCase.caseSensitive;
    else if (args.length == 3 && args[0].equals("-i"))
    theCase = WhichCase.caseInsensitive;
    else
    { 
      System.out.println("usage: FindOccurrences filename [-i] string");  
      System.exit(-1); 
    }   
    try 
    { 

      fr = new FileReader(args[0]); 
      BufferedReader fd = new BufferedReader(fr); 
      StringTokenizer tokens = null;
      while (true) 
      { 
        String line = fd.readLine(); 
        if (line == null) 
          break; 
        else
          tokens = new StringTokenizer(line);
        if(theCase == WhichCase.caseSensitive)
        {
          searchString = args[1];
          while (tokens.hasMoreTokens()) 
            System.out.println(tokens.nextToken());
            matchFound++;
        }
        if(theCase == WhichCase.caseInsensitive)
        {
           searchString = args[2];
        }
        System.out.print(" The string occured " + matchFound + " times" + "in the file" + args[0]);
        }
       fd.close(); 
      } 
     catch (IOException ioe) 
     { 
       System.out.println("IO error: " + ioe); 
     } 
   }

  private enum WhichCase {caseSensitive, caseInsensitive};
} 
```

我很确定我的程序不太正确，因为当我运行它时，我的输出显示用法：FindOccurrences 文件名 [-i] 字符串，然后终止。我知道我在 try 块中遗漏了一些东西来打印指定字符串的出现次数。我相信我需要某种计数器来打印指定字符串的出现次数。任何人都可以帮助指导我纠正我的程序吗？我试图让我的输出看起来类似于上面的输出。谢谢你的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T22:39:01.313

看看每个论点：

```
public static void main(String[] args) {
    String fileName = args[0];
    String searchString;
    boolean caseInsensitive;
    if (args.length == 2) {
        caseInsensitive = false;
        searchString = args[1];
    } else {
        caseInsensitive = true;
        searchString = args[2];
    }
    . . .
} 
```

# mysql - 如果我杀死一个巨大的 MySQL InnoDb DELETE 查询会发生什么？

> ID：13058861
> 
> 赞同：5
> 
> 时间：2012-10-24T22:34:23.057
> 
> 标签：mysql, sql, query-optimization

我目前正在运行的`DELETE`查询花费的时间比预期的要长（已经 10 小时！）。我想通过 phpmyadmin 进程杀死它，但是我担心会发生什么。他自动回滚是否也需要很多时间？当前查询状态显示“更新中”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T22:39:22.270

这取决于您的查询现在所处的阶段。但通常回滚需要大约相同的时间，有时甚至比原始操作还要多。

根据[本文档](http://docs.oracle.com/cd/E17952_01/refman-5.5-en/optimizing-innodb-transaction-management.html)的第 2 点，这并不是真正可取的。

此外，请务必验证您的 MySQL 版本，因为它有一个非常讨厌的错误，根据[本文，在某些版本中删除/更新查询回滚](http://bugs.mysql.com/bug.php?id=45309)

重新启动/终止 MySQL 进程将无济于事，因为回滚将在重新启动时恢复。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-30T19:02:29.753

拇指规则是：

> 让它自己回滚，甚至不要考虑重新启动数据库，因为它会在重新启动后恢复，但更糟糕的是您的数据库将无法同时访问。

是的，大量数据（即数百万行）的回滚将比其提交操作慢得多，如果并行 InnoDB 提交发生在同一数据库中，则速度会更慢。

# hadoop - hive 查询和 udf 执行策略

> ID：13058870
> 
> 赞同：1
> 
> 时间：2012-10-24T22:35:16.910
> 
> 标签：hadoop, hive, user-defined-functions

我很好奇 hive 如何执行查询，特别是自定义 UDF。我有 4 个数据节点，因此在 4 个不同的虚拟机上有 4 个任务跟踪器。

数据节点上的数据是加密的，我的 UDF 会解密数据。我很好奇 hive 是如何执行这个 UDF 的，是不是：

1）每个任务跟踪器检索其数据节点上的任何数据，并将其解密并返回

2）作业跟踪器检索所有加密数据，然后将解密委托给所有 4 个任务跟踪器。

我希望我的问题很清楚...

# ruby-on-rails - 坚持 ROR 教程 CH 9 Ex。9

> ID：13058872
> 
> 赞同：1
> 
> 时间：2012-10-24T22:35:40.263
> 
> 标签：ruby-on-rails

我被卡住了，无法弄清楚我哪里出错了。我发现了类似的主题，但没有解决这些错误：

1）用户页面删除链接作为管理员用户管理员访问索引页面

```
 Failure/Error: it { should have_link('delete', href: user_path(User.first)) }
   expected link "delete" to return something
 # ./spec/requests/user_pages_spec.rb:127:in `block (5 levels) in <top (required)>' 
```

2）用户页面删除链接作为管理员用户管理员访问索引页面应该能够删除另一个用户

```
 Failure/Error: expect { click_link('delete') }.to change(User, :count).by(-1)
 Capybara::ElementNotFound:
   no link with title, id or text 'delete' found
 # (eval):2:in `click_link'
 # ./spec/requests/user_pages_spec.rb:129:in `block (6 levels) in <top (required)>'
 # ./spec/requests/user_pages_spec.rb:129:in `block (5 levels) in <top (required)>' 
```

测试代码

```
describe "delete links" do

  it { should_not have_link('delete') }
  describe "as an admin user" do
    let(:admin) { FactoryGirl.create(:admin) }
      before do
        sign_in admin
        visit users_path
      end

      it { should have_link('delete', href: user_path(User.first)) }
      it "should be able to delete another user" do
      expect { click_link('delete') }.to change(User, :count).by(-1)
    end
    it { should_not have_link('delete', href: user_path(admin)) }
  end
end 
```

控制器：

```
 def
   User.find(params[:id]).destroy
    flash[:success] = "User destroyed."
    redirect_to users_url
  end 
```

指数：

```
<% provide(:title, 'All users') %>
<h1>All users</h1>

<%= will_paginate %>

<ul class="users">
  <%= render @users %>
</ul>

<%= will_paginate %> 
```

部分的

```
<li>
  <%= gravatar_for user, size: 52 %>
  <%= link_to user.name, user %>
  <% if current_user.admin? && !current_user?(user) %>
    | <%= link_to "delete", user, method: :delete,
                                  data: { confirm: "You sure?" } %>
  <% end %>
</li> 
```

任何指导/帮助将不胜感激......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-06T21:50:51.967

也许一年后我来了，但我只是说要从同一个教程（[Michael Hartl 的 Rails 教程](http://ruby.railstutorial.org/)）中学习 Ruby on Rails，并面临同样的问题。

在这里我发现了什么以及我该如何解决（感谢我们的伙伴commets，我浏览了页面源代码并发现了问题。）：

在教程中，[清单 9.43](http://ruby.railstutorial.org/chapters/updating-showing-and-deleting-users#code-delete_link_tests)说：

> 需要'spec_helper'
> 
> 描述“用户页面”做
> 
> 主题{页面}
> 
> 描述“索引”做
> 
> ```
> let(:user) { FactoryGirl.create(:user) }
> 
> before do
>   sign_in user
>   visit users_path
> end
> 
> it { should have_title('All users') }
> it { should have_content('All users') }
> 
> describe "pagination" do
>   .
>   .
>   .
> end
> 
> describe "delete links" do
> 
>   it { should_not have_link('delete') }
> 
>   describe "as an admin user" do
>     let(:admin) { FactoryGirl.create(:admin) }
>     before do
>       sign_in admin
>       visit users_path
>     end
> 
>     it { should have_link('delete', href: user_path(User.first)) }
>     it "should be able to delete another user" do
>       expect do
>         click_link('delete', match: :first)
>       end.to change(User, :count).by(-1)
>     end
>     it { should_not have_link('delete', href: user_path(admin)) }
>   end
> end   end   .   .   . end 
> ```

检查与“删除链接”相关的部分如何位于“分页”部分之后。分页说明从代码[清单 9.33](http://ruby.railstutorial.org/chapters/updating-showing-and-deleting-users#code-will_paginate_test)开始，代码如下：

> 需要'spec_helper'
> 
> 描述“用户页面”做
> 
> 主题{页面}
> 
> describe "index" do let(:user) { FactoryGirl.create(:user) } before(:each) do sign_in user visit users_path end
> 
> ```
> it { should have_title('All users') }
> it { should have_content('All users') }
> 
> describe "pagination" do
> 
>   before(:all) { 30.times { FactoryGirl.create(:user) } }
>   after(:all)  { User.delete_all }
> 
>   it { should have_selector('div.pagination') }
> 
>   it "should list each user" do
>     User.paginate(page: 1).each do |user|
>       expect(page).to have_selector('li', text: user.name)
>     end
>   end
> end   end   .   .   . end 
> ```

我意识到该`after(:all) { User.delete_all }`语句在该部分之后删除了测试数据库中的所有记录（让我继续，因为这很明显：P）。当 RSpec 测试继续“删除链接”时，会创建任何用户。

下一步是创建一个新的 'admin' 用户，并且是此时测试数据库中唯一的一个。正如预期的那样：

> 它{应该有_link（'删除'，href：user_path（User.first））}

将失败，因为当前用户无法删除自己，并且没有任何“删除”链接。同样，下一个测试也将失败：

> click_link('删除', 匹配: :first)

解决方案（解决方法或 w/e :D ）：

我相信有一些方法可以解决这个问题，我认为有两种方法（第 1 种是我使用的）

A. 我添加了一个非管理员用户，在管理员用户尝试登录之前，这让我有 2 个用户进入测试数据库，如下代码：

> 描述“删除链接”这样做 { should_not have_link('delete') }
> 
> ```
> describe "as an admin user" do
>     let(:admin) { FactoryGirl.create(:admin) }
>     before do
>         FactoryGirl.create(:user, name: "test", email: "test@example.com")
>         sign_in admin
>         visit users_path
>     end
> 
>     it { should have_link('delete', href: user_path(User.first)) }
>     it "should be able to delete another user" do
>         expect do
>             click_link('delete', match: :first)
>         end.to change(User, :count).by(-1)
>     end
>     it { should_not have_link('delete', href: user_path(admin)) }
> end   end 
> ```

该声明`FactoryGirl.create(:user, name: "test", email: "test@example.com")`完成了工作。

B. 将所有“删除链接”部分移到“分页”部分之前，因为我猜在这一点上，至少存在在***user_pages_spec.rb***开头创建的第一个用户。

就是这样，有了这个，我可以让“删除链接”新功能变得绿色。

我的两分钱。

iVieL.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-04T21:28:04.340

第一个固定测试就在那里，忽略其余的。如果您的解决方案如下所示，那么您就是黄金。将整个块移动到分页内容上方的第二个想法也有效。

```
describe 'delete links' do
    it { should_not have_link('delete') }

    describe 'as an admin user' do
        let(:admin) { FactoryGirl.create(:admin) }
        before do
            FactoryGirl.create (:user) 
            sign_in admin
            visit users_path
        end

        it { should have_link('delete', href: user_path(User.first)) }
        it 'should be able to delete another user' do
          expect { click_link('delete') }.to change(User, :count).by(-1) 
        end
        it { should_not have_link('delete', href: user_path(admin)) }
    end
end 
```

结尾

# asp.net - MvcRouteHandler 在哪里注册

> ID：13058878
> 
> 赞同：4
> 
> 时间：2012-10-24T22:36:01.963
> 
> 标签：asp.net, iis-7, asp.net-mvc-4

我试图在较低的层次上理解 ASP.Net MVC。具体来说，我试图了解 MVC 运行时是如何启动的。对于我对调用堆栈/反编译的初步挖掘，它似乎是由 MvcRouteHandler 启动的，然后构造 MvcHandler。但是，我似乎找不到 MvcRouteHandler 的注册位置。这个 RouteHandler 如何被添加到 ASP.Net 管道中？

**更新**
经过进一步检查，我已经将`MvcRouteHandler`构造追踪到`RouteCollectionExtensions`看起来包含该类扩展的`RouteCollection`类中。包含构造函数的具体方法有如下定义：

```
public static Route MapRoute(this RouteCollection routes, 
                             string name, 
                             string url, 
                             object defaults, 
                             object constraints, 
                             string[] namespaces) 
```

我相信在这行代码中找到了关键：

```
Route route = new Route(url, new MvcRouteHandler()); 
```

所以，对我来说，这是分配 MvcRouteHandler 的地方。整个事件链如下所示：

一切始于**Global.asax.cs**

```
Application_Start()
RouteConfig.RegisterRoutes
RouteCollectionExtensions.MapRoute(this RouteCollection routes, string name, string url, object defaults)
RouteCollectionExtensions.MapRoute(this RouteCollection routes, string name, string url, object defaults, object constraints)
RouteCollectionExtensions.MapRoute(this RouteCollection routes, string name, string url, object defaults, object constraints, string[] namespaces) 
```

从这里开始，这只是路由匹配的问题，然后导致使用 M​​vcRouteHandler 调用 MvcHandler 并启动整个事件链。所以我最初的假设是 MvcRouteHandler 在某处的配置中注册是错误的。相反，它是通过 global.asax.cs 文件中 Application_Start 事件中的代码开始配置的。

它是否正确？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T22:54:26.663

该请求通过 ASP.net 管道，然后被`UrlRoutingModule`HTTP 模块捕获。

更多信息：[ASP.NET MVC 是如何工作的？](http://blogs.charteris.com/blogs/gopalk/archive/2009/01/20/how-does-asp-net-mvc-work.aspx)

**编辑**：路由模块安装在您的计算机 web.config 中，您的站点 web.config 继承该模块。你可以在`%systemroot%\Microsoft.NET\Framework\$versionNumber$\CONFIG\Web.config`

![在此处输入图像描述](../Images/dd788958ee409c8045f4145fd677470c.png)

# android - 如何检索给定位置的植被

> ID：13058887
> 
> 赞同：-1
> 
> 时间：2012-10-24T22:36:48.420
> 
> 标签：android, location, geo

这似乎是一个完全无用的信息，但我想知道是否有某种机制可以让我获得一个位置的大致植被。

我想知道我是在城市里，还是在沙漠里，或者我现在是在树林里，还是在野外。

还有机会得到最近的海湖吗？

这似乎是一个奇怪的问题......我希望你明白我在寻找什么。

非常感谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T16:07:55.023

由于缺乏可从 Android 访问的现成数据，这很难做到，但我认为最好的选择是使用众包数据集，例如[OpenStreetMap (OSM)](http://www.openstreetmap.org/)。

您需要建立自己的空间数据库（例如[PostGIS](http://postgis.refractions.net/)）并将 OSM 数据导入数据库。

OSM 标准化了多种植被标签类型，包括：

*   自然=裸岩
*   自然=下降
*   自然=冰川
*   土地使用=草
*   自然=草原
*   自然=荒地
*   自然=泥
*   自然=屏幕
*   自然=沙子
*   自然=磨砂
*   自然=树
*   自然=湿地
*   自然=木材。

有关 OSM 植被标签的更多详细信息，请参阅[OSM - Natural - Land Cover wiki 页面](http://wiki.openstreetmap.org/wiki/Natural#Land_cover)。

然后，您将创建一个服务器端 API（托管在[Tomcat](http://tomcat.apache.org/download-60.cgi)或[Glassfish](http://glassfish.java.net/)等 Web 服务器中）来接收手机的当前位置，[通过 PostGIS 进行空间查询](https://gis.stackexchange.com/questions/16414/point-in-polygon-algorithm-for-multiple-polygons)以确定多边形和自然土地覆盖类型（即植被) 手机的位置在里面，并将植被类型返回给手机。

另一种选择是使用 ESRI 形状文件而不是 OSM 数据，并将此数据加载到 PostGIS 数据库中。

# python - 检查类是否与两个字符串之一相等

> ID：13058889
> 
> 赞同：4
> 
> 时间：2012-10-24T22:36:59.817
> 
> 标签：python, python-2.7, beautifulsoup

是否可以以某种方式修改它，以便它可以找到带有 class **class1** * *OR* * class **class2**的表？

```
Info = soup.find('table', {'class' :'class1'}) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T22:53:12.173

```
find_all(self, name=None, attrs={}, recursive=True, text=None, limit=None, **kwargs) 

    Extracts a list of Tag objects that match the given
    criteria.  You can specify the name of the Tag and any
    attributes you want the Tag to have.

    The value of a key-value pair in the 'attrs' map can be a
    string, a list of strings, a regular expression object, or a
    callable that takes a string and returns whether or not the
    string matches for some custom definition of 'matches'. The
    same is true of the tag name. 
```

例如：

```
>>> from bs4 import BeautifulSoup
>>> text = ''.join('<table class="class{}"></table>'.format(i) for i in range(10))
>>> soup = BeautifulSoup(text)
>>> 
>>> soup.find_all("table", {"class": ["class1", "class7"]})
[<table class="class1"></table>, <table class="class7"></table>]
>>> import re
>>> soup.find_all("table", {"class": re.compile("class[17]")})
[<table class="class1"></table>, <table class="class7"></table>]
>>> 
>>> soup.find_all("table", {"class": lambda x: 3*int(x[-1])**2-24*int(x[-1])+17 == -4})
[<table class="class1"></table>, <table class="class7"></table>] 
```

[好吧，最后一个匹配太多了，但你明白了：任何返回 bool 的匹配函数都可以工作。]

# sql-server - 带有可选参数的 SQL Server 存储过程更新错误的列

> ID：13058891
> 
> 赞同：5
> 
> 时间：2012-10-24T22:37:03.443
> 
> 标签：sql-server, tsql, stored-procedures, optional-parameters

我有一个（旧版）VB6 程序需要一些工作。我有一个更新供应商表的存储过程。在这种特殊形式中，我不需要更新整行，只需更新 20 列中的 10 列左右。

如果我想更新整行，这里有一些可以正常工作的伪代码：

```
CREATE PROCEDURE [dbo].[spUpdateVendor](
    @pID INT,
    @pVendorID varchar(254), 
    @pVendorName varchar(255),
    @pContact varchar(255),
    @pEmail varchar(255),
    ...)
AS
BEGIN
SET NOCOUNT ON;
SET XACT_ABORT ON

DECLARE @ErrorMessage nvarchar(4000);

BEGIN TRY
-- Start the transaction
    BEGIN TRANSACTION
        UPDATE tblVendor
            SET
                [Vendor ID] = @pVendorID,
                [Vendor Name] = @pVendorName,
                [Contact] = @pContact,
                [email] = @pEmail
                ...
            WHERE
                [ID] = @pID
    COMMIT TRANSACTION;
END TRY 
```

如果我只想用数据更新某些列，这里是我一直在尝试的（伪）代码（尝试使用可选参数）：

```
CREATE PROCEDURE [dbo].[spUpdateVendor2](
    @pID INT,
    @pVendorID varchar(254) = NULL, 
    @pVendorName varchar(255) = NULL,
    @pContact varchar(255) = NULL,
    @pEmail varchar(255) = NULL,
    ...)
AS
BEGIN
SET NOCOUNT ON;
SET XACT_ABORT ON

DECLARE @ErrorMessage nvarchar(4000);

BEGIN TRY
-- Start the transaction
    BEGIN TRANSACTION
        UPDATE tblVendor
            SET
                [Vendor ID] = ISNULL(@pVendorID,[Vendor ID]),
                [Vendor Name] = ISNULL(@pVendorName,[Vendor Name]),
                [Contact] = ISNULL(@pContact,[Contact]),
                [Email] = ISNULL(@pEmail,[email]),
                ...
            WHERE
                [ID] = @pID 
    COMMIT TRANSACTION;
END TRY 
```

并且所有运行都没有错误，但是如果我更新一个可选列，跳过一些，然后更新另一个可选列，它将更新错误的列。

使用普通参数更新示例：

```
tblVendor
ID: 2924
Vendor ID: Company1
Vendor Name: Company Name
Contact: Bob
email: bob@company.com 
```

当我不提供“联系人”时通过可选参数进行更新的示例：

```
tblVendor
ID: 2924
Vendor ID: Company1
Vendor Name: Company Name
Contact: bob@company.com
email: bob@company.com 
```

所以它更新了行，但它更新了错误的列。我做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T22:40:51.293

您必须在执行存储过程时显式指定参数名称，并为要省略的参数传入 null。例子

```
exec spUpdateVendor2 @pID=102, @pVendorID = 1, @pVendorName = NULL, @pContact = 'Contact',
@pEmail = NULL ... 
```

# c++ - GetFileAttributesA 正在为现有目录返回“17”。“16”表示它是一个目录，文档中没有提到“17”

> ID：13058892
> 
> 赞同：3
> 
> 时间：2012-10-24T22:37:04.087
> 
> 标签：c++, windows, winapi, mingw, constants

Windows 7 64 位，使用 mingw 编译。我正在尝试测试给定路径是否是在 Windows 标头中使用 GetFileAttributesA 的目录。作为目录的常量是 16。但由于某种原因，它返回 17。我的代码如下所示：

```
#include <iostream>
#include <windows.h>

void dir_exists(std::string dir_path)
{
    DWORD f_attrib = GetFileAttributesA(dir_path.c_str());
    std::cout << "Current: " << f_attrib << std::endl <<
        "Wanted: " <<
        FILE_ATTRIBUTE_DIRECTORY << std::endl;
}

int main()
{
    dir_exists("C:\\Users\\");
    return 0;
} 
```

当我运行它时，输出是：

```
Current: 17  
Wanted: 16 
```

当前应该返回 16，这里。正如我在主题中所说，我什至在文档中找不到任何提及 17 的含义。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-24T22:40:25.517

`GetFileAttributes`返回一个位掩码，其有效值在此处列出：[文件属性常量](https://docs.microsoft.com/en-us/windows/win32/fileio/file-attribute-constants)。

17 == 0x11，这意味着返回值为
`FILE_ATTRIBUTE_READONLY | FILE_ATTRIBUTE_DIRECTORY`.

如果您只是想检测您的路径是否指向目录，请使用掩码返回值`FILE_ATTRIBUTE_DIRECTORY`并查看它是否非零：

```
#include <string>
#include <iostream>
#include <windows.h>

bool dir_exists(std::string const& dir_path)
{
    DWORD const f_attrib = GetFileAttributesA(dir_path.c_str());
    return f_attrib != INVALID_FILE_ATTRIBUTES &&
           (f_attrib & FILE_ATTRIBUTE_DIRECTORY);
}

int main()
{
    std::cout << dir_exists("C:\\Users\\") << '\n';
} 
```

# ruby-on-rails - 传递参数的问题，并常量化/大写两个不同的单词

> ID：13058899
> 
> 赞同：0
> 
> 时间：2012-10-24T22:37:56.127
> 
> 标签：ruby-on-rails, params

获得一个简单的参数以正确恒定化有一个小问题。模型是“BackTricks”。

此行正在使用单个单词模型实例化变量 fine，尽管在这种特殊情况下，它会将变量呈现为“Backtricks”，而没有正确封装第二个单词。任何帮助将不胜感激！

```
 klass       = params[:klass].to_s.capitalize.singularize.constantize 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T22:58:43.300

使用`titelize`代替`capitalize`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-21T10:01:30.463

如果`params[:klass]`是一个snake_cased 字符串，您可以使用`classify`代替`capitalize.singularize`：

```
'egg_and_hams'.classify # => "EggAndHam"
'posts'.classify        # => "Post" 
```

[来源](http://apidock.com/rails/String/classify)

# jquery - 视图模型中对象的 MVC 4 不显眼验证

> ID：13058900
> 
> 赞同：3
> 
> 时间：2012-10-24T22:38:09.877
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-4, unobtrusive-validation

我的模型中的属性有验证属性。如果我将模型传递给视图，则验证工作正常。但是，当该模型是 View Model 的属性并且控制器将 View Model 传递给视图时，不显眼的验证不再起作用，并且不会在控制器上得到验证。无论哪种方式，绑定到控制器的模型都可以正常工作。

如果可以在视图模型中使用点符号为对象绑定隐藏字段等，为什么不显眼的验证也不起作用，是否有人对如何使其工作有建议？

视图模型（下面的第一个类是视图使用的，“必需”与否在其第一个属性上没有区别）

```
public class PlanStakeholderViewModel : PlanGoalSelectorViewModel
{
    [Required]
    public PlanStakeholder PlanStakeholder { get; set; }
}
public class PlanGoalSelectorViewModel
{
    public IList<PlanGoal> AvailableGoals { get; set; }
    public IList<PlanGoal> SelectedGoals { get; set; }
    public PostedGoals PostedGoals { get; set; }
}

public class PostedGoals
{
    public string[] GoalIDs { get; set; }
} 
```

看法

```
@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)
    @Html.Hidden("PlanStakeholder.PlanID")
    @Html.Hidden("PlanStakeholder.Id")

    @Html.Partial("_Form")  

    <div class="editor-label"></div>
    <div class="editor-field">
        <input type="submit" value="Save" /> | @Html.ActionLink("Back to Plan", "Index", "Plan")
    </div>
} 
```

查看_表格

```
@model Navigator.Views.ViewModels.PlanStakeholderViewModel

<div class="editor-label" style="vertical-align:top">
    @Html.LabelFor(model => model.PlanStakeholder.Name)
</div>
<div class="editor-field">
    @Html.EditorFor(model => model.PlanStakeholder.Name)
    @Html.ValidationMessageFor(model => model.PlanStakeholder.Name)
</div>

<div class="editor-label" style="vertical-align:top">
    @Html.LabelFor(model => model.PlanStakeholder.Relationship)
</div>
<div class="editor-field">
    @Html.EditorFor(model => model.PlanStakeholder.Relationship)
    @Html.ValidationMessageFor(model => model.PlanStakeholder.Relationship)
</div>

<div class="editor-label" style="vertical-align:top">
     <label>Associated Goals</label>
</div>
<div class="editor-field checkbox">
@Html.CheckBoxListFor(x => x.PostedGoals.GoalIDs,
                      x => x.AvailableGoals,          
                      x => x.Id,               
                      x => x.ShortTitle,               
                      x => x.SelectedGoals,
                      Position.Vertical)
</div> 
```

模型

```
public class PlanStakeholder : Base
{
    public PlanStakeholder()
    {
        PlanID = -1;
        Relationship = String.Empty;
        Name = String.Empty;
    }

    [Required]
    public int PlanID { get; set; }

    [Required]
    [MaxLength(50, ErrorMessage = "The {0} cannot be more than {1} characters.")]
    public string Relationship { get; set; }

    [Required]
    [MaxLength(50, ErrorMessage = "The {0} cannot be more than {1} characters.")]
    public string Name { get; set; }
} 
```

**更新 1** 下面是关系属性的表单 html 的输出。

```
<input class="text-box single-line" data-val="true" data-val-required="The Relationship field is required." id="PlanStakeholder_Relationship" name="PlanStakeholder.Relationship" type="text" value="Mom" /> 
```

下面是控制器动作

```
[AuthorizeRoles(RoleSite.None, RoleOrg.OrgMember, RoleCohort.Client)]
public ActionResult Edit(int id, int planId)
{
    var plan = PlanManager.GetSingle(CurrentUser.UserId, CurrentOrg.Id);

    var model = new PlanStakeholderViewModel();
    model.PlanStakeholder = PlanStakeholderManager.GetSingle(id, CurrentUser.UserId);
    model.AvailableGoals = PlanGoalManager.GetList(plan.Id, CurrentUser.UserId);
    model.SelectedGoals = PlanGoalManager.GetRelatedToStakeholder(id, CurrentUser.UserId);

    if (model.Item.Id != id)
    {
        return HttpNotFound();
    }

    return View(model);
}

[HttpPost, ActionName("Edit")]
[AuthorizeRoles(RoleSite.None, RoleOrg.OrgMember, RoleCohort.Client)]
public ActionResult EditConfirmed(PlanStakeholderViewModel model)
{
    if (ModelState.IsValid)
    {
        ///DO STUFF
        return RedirectToAction("Index", "Plan");
    }
    return View(model);
} 
```

**更新 2** 如果我在视图中注释掉 CheckBoxListFor ，那么一切正常。看来我需要在[别处](http://mvccbl.com/)提出这个问题/问题。当没有注释掉时，如果我输入的 PlanStakeholder.Name 值比模型允许的值长，我会得到“值不能为空。参数名称：源”作为我的 asp.net 错误在具有@Html 的行上.CheckBoxListFor。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T23:20:39.530

这是我倾向于不使用局部视图的原因之一。他们有太多的陷阱，你必须知道各种细节。

我非常喜欢 EditorTemplates。它们正确处理集合并生成嵌套属性的正确名称。而且，他们处理 FormContext 问题。

但是……无论如何。将此添加到局部视图的顶部。

```
@{ ViewContext.FormContext = new FormContext(); } 
```

# performance - 呈现 javascript 的 Web 性能测试

> ID：13058907
> 
> 赞同：1
> 
> 时间：2012-10-24T22:38:41.593
> 
> 标签：performance, selenium, web, performance-testing

我想加载测试页面并渲染 javascript。似乎有 3 类应用程序可以解决这个问题，而这三类应用程序都没有达到目标。

1) Jmeter, apachebench, tsung, Grinder, Iago 为什么它不起作用：它不渲染 javascript。这些是方便的工具，但它们不适用于此目的。

2) Watir, Selenium 这些工具非常棒，它们使用真实的浏览器并渲染 javascript / ajax，但是很可惜，它们主要是为功能测试而设计的，而不是性能测试。您可以创建自己的应用程序来使用这些东西进行负载测试，但是收集所有性能指标并汇总它们将是一件非常痛苦的事情。

如果只有前两种类型的 Web 性能测试的组合，那就太好了。

第三种选择，解决了这个问题，但不幸的是你必须为此付费。3) Web 负载测试服务 Keynote Load Pro、BrowserMob 等服务很棒，解决了使用真实浏览器和渲染 JavaScript 的问题。唯一的问题是，我不想在每次运行该死的负载测试时支付 300 美元（这有点夸张，但不是真的，这取决于你使用了多少虚拟用户）。

所以这个选项行不通，除非我想大出血。

没有测试工具可以解决这个问题吗？这似乎是一个巨大的漏洞，需要一种尚未解决的开源工具。商业公司在这个领域占据主导地位（以及那些想要聘请全职开发人员编写 selenium 性能测试框架的公司）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-16T09:36:42.643

jmeter、ab、tsung 等的好处是它们可以在相对较短的时间内为您提供聚合指标，但它们无法执行 javascript。他们无法衡量创建 DOM 的速度。它们不会加载外部资源，例如图像、javascript、样式。它们适用于压力测试，但这里并非如此。

在测量 Web 性能时，您需要知道：

*   你真正想测量什么？- `domLoading`, `domInteractive`,`domContentLoaded`或者可能来自[Performance Timing Interface](https://developer.mozilla.org/en-US/docs/Web/API/PerformanceTiming)的其他内容,
*   您想使用哪种统计方法？-p95 ，[中](http://en.wikipedia.org/wiki/Percentile)[位数](http://en.wikipedia.org/wiki/Median)。平均不是最好的选择。
*   什么时候？- 始终同时进行以使测试具有可比性，
*   从哪个位置？- 您能做的最好的事情就是在您的生产环境附近*生成专用服务器，*
*   你想对结果有多自信？- 选择样本数据大小，例如，如果您接受 3% 的误差幅度和 95% 的置信区间，则选择 1067。

要进行此类*综合性能测量*，您可以使用[https://github.com/msn0/sweter](https://github.com/msn0/sweter)。它测量和`timeToFirstByte`计时。它可以安排在同一时间运行测试。Sweter 可以将原始数据报告到 ElasticSearch、控制台、json 文件或您想要的任何地方。`domInteractive``domComplete`

不同的主题是*真实用户测量*。已经有很好的工具，例如[NewRelic](http://newrelic.com/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-14T05:18:55.247

好吧，您还没有提到您真正想要衡量的指标。但我认为您可以使用两个简单的工具来测试服务器端和浏览器的性能。

1.  PhantomJS 和 HAR 文件：PhantomJS 是一个带有 Javascript API 的 webkit 无头浏览器。您可以使用 Javascript 编写脚本来执行几乎所有操作（包括 javascript 渲染）。使用它来生成 HAR 文件，以便您可以分析所有请求中的性能瓶颈。

2.  Navigation Timing API：现代浏览器支持导航计时数据，它为您提供有关浏览器渲染时间的详细信息，包括所有重要的指标，如 domLoading、domInteractive 等。

# javascript - 在 exporting.js 中使用 Highchart 中的标头

> ID：13058909
> 
> 赞同：0
> 
> 时间：2012-10-24T22:38:56.850
> 
> 标签：javascript, highcharts, export

我无法在容器 div Highchart 中放置标题来导出或打印（使用 exporting.js）带有附加信息的图表。我尝试使用一些附加，但它保持在 div.container 的限制范围内而不是外部，例如：

```
 chart.renderer.image('icons/custom/ERI_UF_rgb.png ', 0, -50, 120, 48).add();
 chart.renderer.text('This is the footer text. limited It has text
                      space based on chart width', 10, 265)
      .css({
          color: '# 4572A7'
          fontSize: '12px '
      })
      .add();
 chart.renderer.text('This is the sub-footer text. Avoid covering 
                      credits text on bottom', 10, 280)
      .css({
          color: '# 4572A7'
          fontSize: '12px '
      })
      .add(); 
```

有人对此有解决方案吗？我也接受来自打印或导出某些 div 的库的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T13:17:06.213

我发现可以像这样使用spacingTop 和spacingBottom：

```
chart: {
        renderTo: 'container',
        spacingTop: 200,
        spacingBottom: 200
    } 
```

所以，我可以在图表中添加页眉或页脚来编写chart.renderer.image 或chart.renderer.text。

解决方案：http: [//jsfiddle.net/LZbDA/](http://jsfiddle.net/LZbDA/)

# jquery - jquery在鼠标悬停时更改图像

> ID：13058912
> 
> 赞同：0
> 
> 时间：2012-10-24T22:39:09.120
> 
> 标签：jquery, html, rollover

我一直有这个问题。我认为这应该很简单，但我似乎无法让它工作。我希望滚动我的 facebook 按钮时出现一个新图像。谢谢你的帮助！

```
 <p align="right">
          <a href="http://www.facebook.com/AerialistPress" ><img height="30px" id="facebook" class="changePad" alt="Aerialist Press Facebook Page" src="/sites/aerialist.localhost/files/images/facebook300.jpg" /></a> 
           <a href="http://twitter.com/#!/AerialistPress" > <img height="30px" class="changePad" alt="Aerialist Press Twitter Page" src="/sites/aerialist.localhost/files/images/twitter300.jpg" /></a>
           <a href="http://www.pinterest.com/aerialistpress" ><img height="30px" class="changePad" alt="Aerialist Press Pinterest Page" src="/sites/aerialist.localhost/files/images/pinterest300.jpg" /></a>
</p>

<script>
jQuery(document).ready(function(){
     jQuery('#facebook').mouseover(function() { jQuery('#facebook').attr('src').replace('/sites/aerialist.localhost/files/images/facebook-roll.jpg'); })

});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T22:44:12.570

该`attr`方法返回指定属性的值（在本例中为“src”），并且`replace`正在尝试修改字符串并返回一个新实例。但是，您没有对新实例做任何事情。

要设置属性，您必须向该`attr`方法传递一个附加参数。

这是该`attr`方法的文档：http: [//api.jquery.com/attr/](http://api.jquery.com/attr/)

您的代码应该是：

```
jQuery('#facebook').attr('src', '/sites/aerialist.localhost/files/images/facebook-roll.jpg'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T22:40:38.200

不要使用`replace`，直接设置`src`attr：

```
jQuery('#facebook').attr('src', '/sites/aerialist.localhost/files/images/facebook-roll.jpg'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T22:43:23.083

改变

```
jQuery('#facebook').attr('src').replace('/sites/aerialist.localhost/files/images/facebook-roll.jpg'); 
```

到

```
jQuery('#facebook').attr('src', '/sites/aerialist.localhost/files/images/facebook-roll.jpg'); 
```

您也可以使用`$('#facebook')`而不是`$('#facebook')`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T22:57:03.320

给你！

```
$("#img").hover(function(){
//mouseover
     $(this).attr('src', 'https://twimg0-a.akamaihd.net/profile_images/1768071248/smile_normal.jpg'); 
    },
    function(){
//mouseout
    $(this).attr('src', 'http://www.bestfreeicons.com/smimages/Emotes-face-smile-icon.png');
});​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-24T23:11:25.523

这有效

```
<script type ="text/javascript">

 $(document).ready(function(){
 $('#facebook').mouseenter(function() { 
     $('#facebook').attr("src","heretheotherimage.png"); 
 })

 $('#facebook').mouseleave(function() { 
     $('#facebook').attr("src","heretheimage.png"); 
 })

 });
 </script>

 <img src ="heretheimage.png" id ="facebook" /> 
```

# javascript - 相互递归的 AMD 模块

> ID：13058914
> 
> 赞同：1
> 
> 时间：2012-10-24T22:39:28.747
> 
> 标签：javascript, js-amd

我正在尝试使用 Javascript 和 jQuery 编写一个相当厚实的客户端 Web 应用程序。为了组织我的代码，我阅读了 Javascript 模块系统并决定使用 AMD 模块。目前我使用 curl.js 作为我的模块加载器，但我并不特别喜欢它。

不幸的是，我现在遇到了一个问题，即我的两个模块需要相互依赖。我原以为它可以正常工作 --- 但实际发生的是，加载应用程序似乎只是中途停止，一切都停止了，没有错误消息。

快速的谷歌几乎没有提到 AMD 和相互递归模块。我真的可以这样做吗？如果可以，怎么做？（我需要更改为不同的模块加载器吗？）

如果没有，关于支持相互递归模块的替代模块系统的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T21:56:04.377

因此，在意识到“相互递归”的替代名称是“循环依赖”之后，我在网上找到了一些参考资料（特别是有关该主题的[require.js 手册页](http://requirejs.org/docs/api.html#circular)）。

简短的总结是：不，这不起作用。有多种方法可以绕过它，但它从根本上不是 Just Work。

最简单的解决方法是使用显式同步`require()`调用来中断依赖链：

```
define(
    ["require", "NotLoadedYet"],
    function (require, NLY)
    {
        // NLY is undefined here
        return {
            doSomething: function()
            {
                var realNLY = require("NotLoadedYet"); // fetch the real NLY on demand
                realNLY.doSomething(); // actuall call the method
            }
         };
    }
); 
```

显然，这只有在您可以保证 NotLoadedYet 在您调用该方法时确实已加载时才有效。

*在已经*进行动态后期绑定的语言中使用动态后期绑定的想法非常新，但它确实有效。叹。似乎有一种稍微少一点的 ew 技术，它涉及改为使用 requirejs 的 CommonJS 支持，但我不知道它是如何工作的，所以我坚持这一点。

我实际上要做的是实现一个包含实现的 NotLoadedYetImpl 模块和一个通过上述机制代理的 NotLoadedYet 模块。遗憾的是，Javascript 没有对对象的所有属性执行 getter 和 setter，或者我也可以自动完成所有操作......

# ruby-on-rails - 区别第一！和 Rails 中的第一种方法

> ID：13058916
> 
> 赞同：8
> 
> 时间：2012-10-24T22:39:33.393
> 
> 标签：ruby-on-rails, ruby, syntax

Ruby on Rails`User.first`和有什么区别？`User.first!`

我在 Ruby 指南中看到了这个例子，但没有解释为什么它不同。据我所知，`!`用来表示方法正在改变变量。

*`User`代表一个表格。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-24T22:45:10.747

我不知道`first!`ActiveRecord 中有 finder 方法。感谢您的问题，现在我知道了:-)

`first!`**除了如果没有找到记录**`first`，它会引发 ActiveRecord::RecordNotFound 之外是相同的。

 **更多细节在这里：[http ://api.rubyonrails.org/classes/ActiveRecord/FinderMethods.html#method-i-first-21](http://api.rubyonrails.org/classes/ActiveRecord/FinderMethods.html#method-i-first-21)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-24T22:44:00.013

这 ！是一个爆炸字符。在像 create! 这样的其他方法中，它强制创建发生。它会跳过验证和您设置的其他内容。**

# javascript - Ruby on Rails 处理地理定位

> ID：13058918
> 
> 赞同：0
> 
> 时间：2012-10-24T22:39:43.793
> 
> 标签：javascript, ruby-on-rails, html

我正在尝试使用 rails 编写一个网站，并且我想获取用户的地理位置。该网站将有一个专用的应用程序，读取rails提供的json api。我担心如何抓取以及我的逻辑应该遵循哪种方式？

我相信应该是这样但不确定

*   验证是否智能手机
*   从智能手机应用程序中获取地理位置
*   如果适用，使用 html5 获取地理位置
*   否则使用 javascript 获取地理位置
*   否则不支持的网站

我相信什么，或者有没有办法不用担心智能手机或更好的方法来获取用户的位置

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T05:01:20.177

您可以使用[地理编码器 (http://www.rubygeocoder.com/)](http://www.rubygeocoder.com/)。此 api github [https://github.com/alexreisner/geocoder](https://github.com/alexreisner/geocoder)的 Ruby gem从中您可以通过传递地点或 IP 地址来获取地理位置。

# django - Django：如何将不同的 url 传递给通用视图？

> ID：13058919
> 
> 赞同：0
> 
> 时间：2012-10-24T22:39:51.000
> 
> 标签：django, url, variables

我正在构建一个类似于通讯录的应用程序。对于我的一个观点，我有一个个人列表。每个`Individual`人都有一个`Role`将他们与他们的职位和雇主联系起来的链接。有几种不同类型的雇主，所以这是一个通用关系。

使用 ListView 通用视图，我创建了一个个人列表，其中显示了他们的姓名、职位和雇主，即

> “吉米，官员，大通银行”
> 
> “玛丽，总医院首席执行官”

我需要将公司名称作为链接到公司详细信息页面。

**问题**

由于我有此列表的一个模板，我很难理解如何根据个人拥有的雇主类型（即银行或医院）更改 url。

**什么可能有效**

1.  我应该为采用雇主内容类型并创建变量的视图编写一个函数吗？还是应该将功能放在`Role`模型下？我是 python/Django 的菜鸟，甚至不知道如何写这个。

2.  我尝试在模板中使用 if/else 语句，即 if bank，使用此 url，但它不起作用。可能是因为它是一个通用关系，而我的查询不正确。

回应以下评论：

我不确定继承结构的确切含义，但这是我的模型的简化版本；

```
class Individual(models.Model)
    name = models.CharField(max_length=30)

class Bank(models.Model):
    name = models.CharField(max_length=30)
    staff = generic.GenericRelation('Role',
        content_type_field='employer_content_type',
        object_id_field='employer_id'
    )

   class Hospital(models.Model):
    name = models.CharField(max_length=30)
    staff = generic.GenericRelation('Role',
        content_type_field='employer_content_type',
        object_id_field='employer_id'
    )
... and so on for each different employer

class Role(models.Model):
    title = models.CharField(max_length=70)
    job_holder = models.ForeignKey(Individual)
    employer_content_type = models.ForeignKey(ContentType,
        limit_choices_to={"model__in": ('venue', 'festival', 'artsorganization','bookingagent', 'managementcompany', 'mediaoutlet', 'otherorganization', 'presentercompany', 'publishingcompany', 'presenter', 'recordcompany', 'musician', 'ensemble')}, related_name="employer")
    employer_id = models.PositiveIntegerField()
    employer = generic.GenericForeignKey('employer_content_type', 'employer_id') 
```

有一次，我让所有雇主都继承了公司模式。我改变了它，因为每个雇主都有不同的属性，这让事情变得非常复杂。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T16:07:24.130

我相信每种雇主都应该负责为自己提供一个 URL（参见[get_absolute_url](https://docs.djangoproject.com/en/dev/ref/models/instances/#django.db.models.Model.get_absolute_url)）。也就是说，每个员工模型都提供`get_absolute_url`以确定自己的 URL。

然后，您可以简单地使用（在您的模板中）：

```
{{ individual.name }}
<a href="{{ individual.role.employer.get_absolute_url }}">
  {{ individual.role.employer.name }}
</a> 
```

由于“角色与个人”的关系是一对多的，因此此处进行了简化，但在这种情况下，请使用您使用的任何机制来确定雇主的姓名。如果您的列表是角色，您显然只是使用`role.employer`and`role.job_holder`来获取个人等。

# c# - 创建具有多个根元素的 XML

> ID：13058921
> 
> 赞同：0
> 
> 时间：2012-10-24T22:39:59.573
> 
> 标签：c#, .net, xml

我正在尝试创建具有多个根元素的 XML。我无法更改它，因为这是我应该将 XML 发送到服务器的方式。这是我尝试运行代码时遇到的错误：

> System.InvalidOperationException：此操作将创建结构不正确的文档。

有没有办法覆盖这个错误并让它忽略它？

好吧，让我更好地解释一下：

这是我所拥有的

```
XmlDocument doc = new XmlDocument();
doc.LoadXml(_application_data); 
```

现在创建了 XML 文档，我可以向它添加一个假根元素，以便它工作。但是，我需要摆脱它并将其转换为 DocumentElement 对象。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T22:43:35.907

在创建 XmlWriter 时指定[Fragment ，如下](http://msdn.microsoft.com/en-us/library/h2344bs2%28v=vs.95%29.aspx)[所示](http://msdn.microsoft.com/en-us/library/system.xml.xmlwritersettings.conformancelevel%28v=vs.95%29.aspx)

```
XmlWriterSettings settings = new XmlWriterSettings();
settings.OmitXmlDeclaration = true;
settings.ConformanceLevel = ConformanceLevel.Fragment;
settings.CloseOutput = false;

// Create the XmlWriter object and write some content.
MemoryStream strm = new MemoryStream();
using (XmlWriter writer = XmlWriter.Create(strm, settings))
{
    writer.WriteElementString("orderID", "1-456-ab");
    writer.WriteElementString("orderID", "2-36-00a");
    writer.Flush();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T22:43:17.860

如果它有多个根元素，则它不是 XML。如果它在其他方面类似于 XML，您可以将所有内容放在根元素下，然后当您将*字符串*发送到服务器时，您只需组合该根元素的序列化子元素，或者正如@Austin 指出的那样，使用内部 XML方法如果可用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T22:53:18.820

只需创建一个具有单个根的 XML，然后将其内容作为 XML 文本获取。

无论如何，您都在谈论 XML 片段，因为好的 xml 只有一个根。

这是帮助您入门的示例：

```
var xml = new XmlDocument();
var root = xml.CreateElement("root");
root.AppendChild(xml.CreateElement("a"));
root.AppendChild(xml.CreateElement("b"));
Console.WriteLine(root.InnerXml); // outputs "<a /><b />" 
```

# php - 通过 strstr($_SERVER['PHP_SELF']...) 使用多个值

> ID：13058923
> 
> 赞同：0
> 
> 时间：2012-10-24T22:40:00.103
> 
> 标签：php

另一个让我陷入困境的简单事情：

我正在使用以下内容检查当前 url 并根据结果选择一个 div 类：

```
$checkit = $_SERVER['PHP_SELF'];
... 
<li "; if(strstr($checkit,'welcome')) { echo "class='active_tab'"; }... 
```

我还想做的是检查 url 是否包含其他单词，这些单词也需要将相同的 'li' 项目赋予 'active_tab' 类，但我无法弄清楚格式。像这样的东西，虽然显然这不起作用：

```
<li "; if(strstr($checkit,'welcome', 'home', 'yourprofile')) { echo "class='active_tab'"; }... 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T22:49:21.137

我*知道*有更好的方法，但权宜之计是：

```
$searchStrings = array('welcome','home','yourprofile');
$stringFound = false;
foreach($searchStrings as $checkString)
{
  if(strstr($checkit, $checkString))
  {
    $stringFound = true;
    break;
  }
} 
```

然后`$stringFound`用来改变你的输出。

编辑 1：`continue`感谢`break`ZombieHunter（已经很晚了 -_-）

编辑2：或者你可以使用正则表达式（虽然我认为这有点过分了）

```
if(preg_match('/(welcome|home|your profile)/',$checkit))
{
 // Do your stuff here
} 
```

但这并不具有表现力（更容易读取和扩展数组），如果这些值开始堆积，则更容易将数组挂接到数据库查询等存储中。

# entity-framework - 父子都使用 TPH 继承时的 Code First 父/子关系

> ID：13058928
> 
> 赞同：3
> 
> 时间：2012-10-24T22:40:47.957
> 
> 标签：entity-framework, ef-code-first, entity-framework-5

我正在尝试映射父/子集合场景，其中父子都使用 TPH 继承。我尝试了很多场景——没有一个奏效。对我来说，关键是每个父母在集合中只能有一种类型的孩子。下面是我想要实现的一个人为的例子：

```
public abstract class Order
{
    public int ID { get; set; }
    public decimal Total { get; set; }
}

public class SalesOrder : Order
{
    public bool Rush { get; set; }
    public virtual ICollection<SalesOrderLine> OrderLines { get; set; }
}

public class PurchaseOrder : Order
{
    public string Contact{ get; set; }
    public virtual ICollection<PurchaseOrderLine> OrderLines { get; set; }
}

public abstract class OrderLine
{
    public int ID { get; set; }
    public int OrderID { get; set; }
    public string Sku { get; set; }
    public int Quantity { get; set; }
    public decimal Amount { get; set; }
}

public class SalesOrderLine : OrderLine
{
    public decimal Discount { get; set; }
    public virtual SalesOrder Order { get; set; }
}

public class PurchaseOrderLine : OrderLine
{
public int VendorID { get; set; }
    public virtual PurchaseOrder Order { get; set; }
} 
```

使用 TPH 将 SalesOrder 和 PurchaseOrder 类使用映射到 Order 表。SalesOrderLine 和 PurchaseOrderLine 使用 TPH 映射到 OrderLine 表。

EF 是否支持这一点，如果支持，我该如何实现？

# java - android运行时错误中的onResume（）

> ID：13058931
> 
> 赞同：0
> 
> 时间：2012-10-24T22:41:01.757
> 
> 标签：java, android, android-fragments

我正在尝试调用 onResume 以便在我返回后从另一个片段更改变量后重新加载变量。

```
@Override
    public void onResume(){
        check1=(CheckBox)getActivity().findViewById(R.id.CheckBox01);

    } 
```

上面附的是我的 onResume() 代码。CheckBox01 在另一个片段中。但是，在运行时出现错误并且应用程序退出。

它在抱怨

> 无法恢复活动：android.app.supernotcalledException：片段 Tabmodes 没有调用 super.Resume()

我的错误在哪里？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T22:49:40.307

您必须在 override 时调用 super 方法`onResume()`，因为错误（神秘地）指出：

```
@Override
public void onResume(){
    super.onResume();
    check1=(CheckBox)getActivity().findViewById(R.id.CheckBox01);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T23:00:08.363

`supernotcalledException`并`did not call through to super.Resume()`告诉错误是什么！

`super.onResume();`覆盖该`onResume()`方法时，您错过了调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T22:48:36.070

错误是您需要调用 super.onResume。在android中重写initialize和teardown方法时，您必须调用该方法的超级版本，否则它将不起作用。super.onCreate、super.onResume、super.onDestroy 等。我倾向于用 super 调用开始我的 init 方法，并用它结束我的拆卸方法。

# facebook - Facebook 选项卡应用程序在 IE 中不起作用

> ID：13058932
> 
> 赞同：0
> 
> 时间：2012-10-24T22:41:08.610
> 
> 标签：facebook, internet-explorer

我创建了一个 Facebook“标签应用程序”，它似乎在 Chrome、Safari 和 FireFox 中运行，但在 IE8（及更早版本）中似乎根本无法加载。

这是 Facebook 上标签的链接： [https ://www.facebook.com/lapalomaacademy/app_190322544333196](https://www.facebook.com/lapalomaacademy/app_190322544333196)

我还将代码上传到 Facebook 以外的页面，IE8 似乎可以很好地加载该页面（您也可以在此页面上查看源代码）： http: [//lpatucson.org/facebook/nonfans.html](http://lpatucson.org/facebook/nonfans.html)

任何想法可能是什么问题？

# android - 具有自动配对功能的活动之间的 Android 蓝牙共享连接

> ID：13058934
> 
> 赞同：2
> 
> 时间：2012-10-24T22:41:14.317
> 
> 标签：android, printing, bluetooth, sharing

我很少来这里，因为我的大部分问题都是通过示例和示例等解决的。我不坏。现在我的问题是我无法弄清楚到底发生了什么。所以我买了这台打印机，我得到了 SDK，在 sdk 中，一旦我加载它，我必须按下连接，它配对并我打入引脚 (0000)，一旦完成，我就会显示测试按钮并打印字符串等。

我想要它做的是，连接到打印机（自动或使用针，无论如何）然后按“下一个活动”并能够在下一个活动中打印我想要使用蓝牙打印机进行的任何活动。但是当下一个活动加载时，连接关闭，我无法使用打印机，除非我将连接方法一起创建到该活动中，我需要一遍又一遍地配对设备。所以这是我得到的SDK。我真的希望有人能帮助我，因为我快疯了，我尝试使用 getbondeddevices，但我认为我不够聪明......所以就这样吧。也许有人可以看到打印机如何连接以及我如何在整个活动中共享它？

甚至可能是关于如何配对设备然后在下一个活动中使用它的教程......任何帮助都会很棒

```
 public class PrintTestAcitvity extends Activity {

    // btOperation bo = new btOperation();
    //// ¶ÔÆë·½Ê½
    /**
     * printing text align left
     */
    public static final int AT_LEFT     = 0;
    /**
     * printing text align center
     */
    public static final int AT_CENTER   = 1;
    /**
     * printing text align right
     */
    public static final int AT_RIGHT    = 2;
    private static final String GetBondedDevice = null;
   // public String curentDateTimeString = DateFormat.getDateTimeInstance().format(new Date());
    public static String curentDateTimeString() {
        SimpleDateFormat sdfDate = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");//dd/MM/yyyy
        Date now = new Date();
        String strDate = sdfDate.format(now);
        return strDate;
    }
    private Button btConnect = null;
    private Button btCancel = null;
    private Button asciiSend = null;
    private Button graphicSend = null;
    private regoPrinter mobileprint = null;
    private boolean bConnect = true;
    private TextView textTitle = null;
//  private EditText portName;
    private int iObjectCode;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        btConnect   = (Button)findViewById(R.id.connect);
        btCancel    = (Button)findViewById(R.id.cancel);
        asciiSend   = (Button)findViewById(R.id.asc_send);
        graphicSend = (Button)findViewById(R.id.gra_send);
        textTitle   = (TextView)findViewById(R.id.title);     
 //       portName  = (EditText)findViewById(R.id.portName);

        iObjectCode = 0;
        mobileprint = new regoPrinter();
        asciiSend.setEnabled(false);  
        graphicSend.setEnabled(false);

        btConnect.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

                String strName = "MPT-II"; // portName.getText().toString();
                if(strName.length() == 0)
                {
                    Toast.makeText(PrintTestAcitvity.this, "Error:port name empty", Toast.LENGTH_SHORT).show(); 
                    return;
                }

                if(bConnect)
                {       
                    try
                    { 
                         mobileprint.CON_LnitPrintLib();

                        iObjectCode = mobileprint.CON_ConnectDevice(strName);
                    }
                    catch(printLibException e)
                    {
                        Toast.makeText(PrintTestAcitvity.this, e.GetMessage(),
                                Toast.LENGTH_LONG).show();
                    }
                    finally
                    {
                        if(iObjectCode != 0)
                        {
                            // connect succeed  
                            textTitle.setText(strName + PrintTestAcitvity.this.getString(R.string.consucceed));
                            btConnect.setText(R.string.disconnect);
                            bConnect = false;
                         asciiSend.setEnabled(true);
                         graphicSend.setEnabled(true);
                        }
                    }
                }
                else
                {
                    textTitle.setText(strName + PrintTestAcitvity.this.getString(R.string.disconnect));
                    asciiSend.setEnabled(false);
                    graphicSend.setEnabled(false);
                    try {
                        mobileprint.CON_CloseConnect(iObjectCode);
                    } catch (printLibException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                    bConnect = true;
                    btConnect.setText(R.string.connect);
                }
            }
        });        

        btCancel.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                if(!bConnect)
                {
                    try {
                        mobileprint.CON_CloseConnect(iObjectCode);
                    } catch (printLibException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                }

                mobileprint.CON_FreePrintLib();
                finish();
                return;
            }
        });

        asciiSend.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub 
                     try { 
                         // mobileprint.CON_PageStart(iObjectCode, 576, 0) &&
                     if(mobileprint.ASCII_QueryPrinterStatus(iObjectCode))
                     {  
                         //Çå³ý´òÓ¡»ú»º³å
                         mobileprint.ASCII_Reset(iObjectCode);

                         //´òÓ¡LogoÍ¼Æ¬£¬ÏÈ½«Í¼Æ¬ÏÂÔØÖÁ´òÓ¡»úÖÐÔÙÖ´ÐÐ´Ëº¯Êý
                         //mobileprint.PrintFlashPic(1, 0);

                         //´òÓ¡title
                         mobileprint.ASCII_AlignType(iObjectCode, 1);

                         mobileprint.ASCII_FormatString(iObjectCode,false,false,true,false,false);                       
                         mobileprint.ASCII_SendString(iObjectCode, "Plate:" +"   " + "ABCD123", "gb2312");
                         // mobileprint.ASCII_PrintCRLF(iObjectCode, 2);
                         mobileprint.ASCII_FeedLines(iObjectCode, 1);
                         mobileprint.ASCII_Reset(iObjectCode);

                         mobileprint.ASCII_PrintCRLF(iObjectCode, 2);

                         mobileprint.CON_PageEnd(iObjectCode);
                     }
                     else
                     {
                            Toast.makeText(PrintTestAcitvity.this, "Printer status error",
                                    Toast.LENGTH_LONG).show();
                     }           
                } catch (printLibException e) {
                    // TODO Auto-generated catch block
                    Toast.makeText(PrintTestAcitvity.this, e.GetMessage(),
                            Toast.LENGTH_LONG).show();
                }               
            }
        });

        graphicSend.setOnClickListener(new OnClickListener()
        { 
            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                     try { 
                     if(mobileprint.CON_PageStart(iObjectCode, 576, 450) && mobileprint.ASCII_QueryPrinterStatus(iObjectCode))
                     {  
                         //Çå³ý´òÓ¡»ú»º³å
                         mobileprint.ASCII_Reset(iObjectCode);

                            mobileprint.DRAW_Line(iObjectCode,0, 1, 575, 1,3);
                            mobileprint.DRAW_Line(iObjectCode,0, 1, 0, 450,3);
                            mobileprint.DRAW_Line(iObjectCode,575, 1, 575, 450,3);
                            mobileprint.DRAW_Line(iObjectCode,0, 450, 575, 450,3);
                            mobileprint.DRAW_Line(iObjectCode,465, 1, 465, 450,1);
                            mobileprint.DRAW_Rectangle(iObjectCode, 0, 0, 80, 50, 1, true);
                            /* mobileprint.DRAW_Text(iObjectCode, 30, 80, "ÉÏº£¿ì½Ý¿ìÔËÓÐÏÞ¹«Ë¾ ", 40); 
                            mobileprint.DRAW_Text(iObjectCode,90, 185, "ÉÏº£         ->     ±±¾©", 35);
                            mobileprint.DRAW_Text(iObjectCode,80, 245, "(ÉÏº£±±Çà¹«Â·°ì)", 20);
                            mobileprint.DRAW_Text(iObjectCode,310, 245, "(»ðÊ®Â·Õ¾)", 20);
                            mobileprint.DRAW_Text(iObjectCode,20, 305, "20112-02100100-0101-2112-10", 30);
                            mobileprint.DRAW_Code128(iObjectCode, 60, 350, 1, 60, "754432112-2");
                            mobileprint.DRAW_CreateRotalBlock(iObjectCode,476, 0, 450,100, 2);//(0.0) Îª×óÉÏ½ÇµÄ¾ØÐÎ
                            mobileprint.DRAW_Code128(iObjectCode, 40, 5, 1, 60, "754432112-2");
                            */

                         mobileprint.CON_PageEnd(iObjectCode);
                     } 
                     else
                     {
                            Toast.makeText(PrintTestAcitvity.this, "Printer status error",
                                    Toast.LENGTH_LONG).show();
                     }           
                } catch (printLibException e) {
                    // TODO Auto-generated catch block
                    Toast.makeText(PrintTestAcitvity.this, e.GetMessage(),
                            Toast.LENGTH_LONG).show();
                }               
            }
        });
    }
} 
```

# android - 从库项目启动 Android Activity 时出错

> ID：13058937
> 
> 赞同：0
> 
> 时间：2012-10-24T22:41:23.173
> 
> 标签：android, android-activity, project, launch

我正在尝试从主项目的 Android 库项目启动一个活动。

设置是这样的： -`MainActivity.class`包中的`com.example.main` -被选为主包库的`LibraryActivity.class`包`com.example.library`中的 - 我想`LibraryActivity.class`从`MainActivity.class`

我使用了以下意图：

```
Intent intent = new Intent(this, LibraryActivity.class);
startActivity(intent); 
```

Eclipse 没有给我错误并显示它`LibraryActivity.class`在 package 中`com.example.library`。

但是，当我运行代码时，它给了我一个错误：

```
10-24 18:27:08.331: E/AndroidRuntime(7887): java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=1, result=-1, data=Intent { dat=file:///storage/sdcard0/image.jpg }} to activity {com.example.main/com.example.main.MainActivity}: android.content.ActivityNotFoundException: Unable to find explicit activity class {com.example.main/com.example.library.LibraryActivity}; have you declared this activity in your AndroidManifest.xml? 
```

我尝试在 android manifest 中定义类的整个路径无济于事。

```
<activity
        android:name="com.example.library.LibraryActivity"
        android:label="@string/app_name" >
</activity> 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T01:03:33.533

我必须将整个包和活动名称放在意图中。

```
Intent intent = new Intent(this, com.example.library.LibraryActivity.class); 
```

并在清单中将导出设置为 true

# jquery - Jquery 淡入、向下滑动、下一张图片、重置幻灯片

> ID：13058938
> 
> 赞同：0
> 
> 时间：2012-10-24T22:41:25.450
> 
> 标签：jquery

我在 jquery 中编写了一些代码来循环遍历 div 内的一些图像，淡入每个图像，然后向上滑动该图像（我有一个包装 div，其中隐藏了 div 溢出，其高度小于图像） - 然后淡入下一个图像，向上滑动，重复 - 但是我需要重置幻灯片，以便在下一个循环中图像不会“卡在”顶部。

在褪色和第一张幻灯片（margin-top：-108px;）方面一切都很好 - 但是，当我尝试将 margin-top 重置为 0px 以进行下一次迭代时，它不会重置它，并且在下一次迭代中图像仍位于 -108px 位置。

请原谅我的 Jquery 代码，如果有菜鸟错误，我对它很陌生！

这是我的代码：

**CSS**

```
 <style type="text/css" media="screen">
        #slider { height:296px; overflow:hidden; width:822px; position:absolute; left:50%; margin-left:-411px; top:87px; z-index:20; }
        #slider-back { position:absolute; left:50%; margin-left:-411px; height:296px; z-index:29; top:87px; width:822px; background: url("/test/backimage.png") no-repeat scroll 0px 0px transparent; }
    </style> 
```

**HTML**

```
 <div id="slider">
        <a href="#"><img src="images/banner/Image1.jpg" id="image1" /></a>
        <a href="#"><img src="images/banner/Image2.jpg" id="image2" /></a>
        <a href="#"><img src="images/banner/Image3.jpg" id="image3" /></a>
    </div>
    <div id="slider-back"></div> 
```

**查询**

```
 <script type="text/javascript">

        $(document).ready(function() { 

            var imgs = $('#slider > a > img'); var z = 1; var previousImageId = "";

            $(imgs[0]).show();

            function loop(ev) {
                    imgs.delay(5000).fadeOut(300).eq(z).fadeIn(500, function() {

                    $(this).animate({marginTop:'-108px'}, {queue: false, duration:6000});

                    $(this).css("margin-top","0px");

                    check = z != imgs.length-1 ? z++ : z=0;

                    loop();      
                });
            }
            loop();
        });

    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T22:48:23.133

你应该在动画的回调上重置margin `complete`，否则动画本身会覆盖你设置的margin-top，所以如下：

```
$(this).animate({marginTop:'-108px'}, {queue: false, duration:6000, complete: function(){
    $(this).css("margin-top","0px");
}}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T07:50:38.843

如果您喜欢非常短的代码，请尝试[插件 jquery-timing](http://creativecouple.github.com/jquery-timing/)。它为动画的连接提供了紧凑的链接语法。它甚至有内联循环。

使用该插件，您的**整个代码**可以归结为一个 jQuery 链：

```
$('#slider > a > img').hide().repeat().each($).css({marginTop:0})
    .fadeIn(500).animate({marginTop:-108},6000,$).fadeOut(300); 
```

# facebook - 如何计算 Facebook 应用用户的朋友的朋友的朋友的朋友

> ID：13058940
> 
> 赞同：0
> 
> 时间：2012-10-24T22:41:25.320
> 
> 标签：facebook, facebook-graph-api, facebook-fql

> **可能重复：**
> [在 facebook 上获取朋友的朋友列表](https://stackoverflow.com/questions/1330123/get-a-list-of-friends-of-a-friend-on-facebook)

我需要获取某人的朋友（1 级）、他们朋友的朋友（2 级）和他们朋友的朋友的朋友（3 级）的计数。FQL 或 Graph API 是否可以实现这一点，如果可以，如何实现？

到目前为止，我知道我可以使用这个 FQL 查询获得第一级计数：

```
SELECT friend_count FROM user WHERE uid = me() 
```

但我不确定如何进一步，或者即使有可能这样做。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T23:36:32.957

不，这不能使用 Graph API 或 FQL 完成。您可以获得的最远距离是从用户表中选择与您的朋友相关的信息，例如他们的朋友数量，方法是在您的查询中执行子选择，如下所示：

```
SELECT uid, friend_count
FROM user
WHERE uid IN (
    SELECT uid1
    FROM friend
    WHERE uid2 = me()
) 
```

但这甚至不会使您在最初的问题中达到 2 个级别，因为您的许多朋友会有共同的朋友，因此这些计数的总和将远远超过您拥有的朋友的朋友的数量。为了获得您需要的信息，您需要做的是提取朋友的朋友的 id 列表，然后通过执行这样的查询自己计算他们

```
SELECT uid1
FROM friend
WHERE uid2 in (
    SELECT uid1
    FROM friend
    WHERE uid2 = me()
) 
```

但是，如果您[尝试执行 this](https://developers.facebook.com/tools/explorer/?fql=SELECT%20uid1%0AFROM%20friend%0AWHERE%20uid2%20in%20(%0A%20%20%20%20SELECT%20uid1%0A%20%20%20%20FROM%20friend%0A%20%20%20%20WHERE%20uid2%20%3D%20me()%0A%20%20%20%20))，您将收到类似于以下内容的错误：

```
{
  "error": {
    "message": "Can't lookup all friends of 36807322\. Can only lookup for the logged in user or the logged in user's friends that are users of your app.", 
    "type": "NoIndexFunctionException", 
    "code": 604
  }
} 
```

如果您尝试在 Graph API 上一一查询您朋友的好友列表，您将收到相同的错误消息，如此处所述（感谢 Igy 提供此链接）[。](http://facebook.stackoverflow.com/questions/1330123/get-a-list-of-friends-of-a-friend-on-facebook)

因此，没有任何方法可以使用现有的 API 来做您想做的事情（当然，除非您为 Facebook 应用程序获得了足够庞大的用户群，您可以使用以下方法逐步构建用户的朋友的朋友图）您的应用程序的众多*其他*用户的访问令牌 - 但我认为这样的“解决方案”对您没有帮助！）

# c# - .NET：字典值是按引用还是按值存储的

> ID：13058944
> 
> 赞同：24
> 
> 时间：2012-10-24T22:41:39.830
> 
> 标签：c#, .net, dictionary, reference-type

我有一个`Dictionary<int, Product>`. 如果将同一个产品添加到多个键，是否会为每个键存储该对象的新实例？还是只是对原始对象的引用？

这个集合非常大，每个产品都有 1-10 个 Keys。我主要关心的是内存分配。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-10-24T22:43:19.987

如果 Product 是引用类型（类而不是结构），则只会存储一个引用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-24T22:43:02.397

不，它应该使用对原始对象的相同引用。

但是，如果 Dictionary 被序列化/反序列化，我并不完全确定它将如何表现。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-24T23:53:49.323

将`Dictionary`存储您传递给它的键值的副本。它或任何其他集合/容器不可能存储对任何值的引用，因为容器可能比您尝试存储在其中的变量更长寿。

现在，正如其他人所说，如果值的类型是引用类型，那么变量的值只是一个引用，所以你只是存储了对变量的引用的副本。如果字典的值的类型是值类型，则将复制实际值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T22:44:23.847

引用类型始终作为引用存储。没有人会猜测您打算为您的类型使用什么“克隆”逻辑。如果您需要副本，则必须在放置到容器、传递给其他函数等之前自行创建它们。

复制值类型（创建简单的字节表示副本，但是所有引用值仍将是引用），除非作为 ref 传递给函数。对于容器，尽管它们将是副本。除非您为它们创建引用类型包装器。

# objective-c - 检查互联网连接时数据参数为零错误

> ID：13058949
> 
> 赞同：1
> 
> 时间：2012-10-24T22:42:08.593
> 
> 标签：objective-c, ios, xcode

启动我的应用程序时，它会检查用户是否已订阅。如果它没有检测到互联网连接，它会因错误而崩溃：

`Failed to retrieve subscription with error 'The Internet connection appears to be offline.' and responseString: (null)*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'data parameter is nil'`

.m

```
 [self getPath:path
   parameters:parameters
      success:^(AFHTTPRequestOperation *operation, id responseObject) {
          if (![responseObject isKindOfClass:[NSDictionary class]])
          {
              failureBlock(@"Invalid response received");
              return;
          }
          NSDictionary *responseDict = (NSDictionary *)responseObject;
          if (responseDict[@"error"] == nil)
          {
              [self saveUserDict:responseDict];
              successBlock(responseDict);
          }
          else
          {
              failureBlock(responseDict[@"error"]);
          }
      }
      failure:^(AFHTTPRequestOperation *operation, NSError *error) {
          DebugLog(@"Failed to log in with error '%@' and response: %@", error.localizedDescription, operation.responseString);
          failureBlock(@"An unknown error occurred");
      }];

 }

 - (void)getSubscriptionWithSuccessBlock:(void (^)(NSDictionary *subscriptionDict))successBlock
                       failureBlock:(void (^)(id responseObject))failureBlock
 {
static NSString *path = @"/api/subscription";

NSDictionary *parameters = @{
    @"userId" : userDict[@"userId"],
    @"token" : userDict[@"token"]
};

 DebugLog(@"Getting subscription with parameters: %@", parameters);

     [self getPath:path
     parameters:parameters
      success:^(AFHTTPRequestOperation *operation, id responseObject) {
          if (![responseObject isKindOfClass:[NSDictionary class]])
          {
              failureBlock(@"Invalid response received");
              return;
          }
          NSDictionary *subscriptionDict = (NSDictionary *)responseObject;
          if (subscriptionDict[@"error"] == nil)
          {
              DebugLog(@"Successfully retrieved subscription");
              successBlock(subscriptionDict);
          }
          else
          {
              failureBlock(responseObject);
          }
      }
      failure:^(AFHTTPRequestOperation *operation, NSError *error) {
          DebugLog(@"Failed to retrieve subscription with error '%@' and responseString: %@", error.localizedDescription, operation.responseString);
          id responseObject = [NSJSONSerialization JSONObjectWithData:operation.responseData
                                                              options:0
                                                                error:nil];
          failureBlock(responseObject);
      }];
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T22:56:49.637

`error`在继续下面的行之前，您需要检查。如果出现错误，请不要调用`JSONObjectWithData`: 带有空数据的方法。

```
[self getPath:path
       parameters:parameters
          success:^(AFHTTPRequestOperation *operation, id responseObject) {
              if (![responseObject isKindOfClass:[NSDictionary class]])
              {
                  failureBlock(@"Invalid response received");
                  return;
              }
              NSDictionary *responseDict = (NSDictionary *)responseObject;
              if (responseDict[@"error"] == nil)
              {
                  [self saveUserDict:responseDict];
                  successBlock(responseDict);
              }
              else
              {
                  failureBlock(responseDict[@"error"]);
              }
          }
          failure:^(AFHTTPRequestOperation *operation, NSError *error) {
              if (!error) {
                  DebugLog(@"Failed to retrieve subscription with error '%@' and responseString: %@", error.localizedDescription, operation.responseString);
                  id responseObject = [NSJSONSerialization JSONObjectWithData:operation.responseData
                                                                      options:0
                                                                        error:nil];
                  failureBlock(responseObject);
              } else {
                  //handle the error scenario
                  failureBlock(@"error occured");
              }
          }]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T22:56:48.910

[使用可达性](https://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)框架检查互联网连接。

# php - Opencart $description 添加内联样式

> ID：13058951
> 
> 赞同：0
> 
> 时间：2012-10-24T22:42:25.430
> 
> 标签：php, styles, opencart

我正在使用 Opencart 的网站上工作。似乎在调用 $description 时添加了内联样式。

在[此产品页面上](http://ajflynn.com/index.php?route=product/product&path=61_62&product_id=55)，产品描述添加了以下内联样式：

```
<span style="color: rgb(51, 51, 51); font-family: Arial, Helvetica, sans-serif; 
line-height: 18px; "> 
```

在[另一个产品页面上](http://ajflynn.com/index.php?route=product/product&path=59&product_id=53)，跨度样式为：

```
<span style="color: rgb(0, 0, 0); font-family: Arial, Helvetica, sans; 
font-size: 11px; line-height: 14px; text-align: justify; "> 
```

这真的让我很困惑，因为他们都在使用 /catalog/view/theme/[theme-name]/product/product.tpl 并且 php 是：

```
<div id="product-description"><?php echo $description; ?></div> 
```

在[类别页面上](http://ajflynn.com/index.php?route=product/category&path=61)，`$description`具有以下样式：

```
<span style="font-family: arial, sans-serif; font-size: small; line-height:
14.545454025268555px; "> 
```

谁能告诉我这到底是从哪里来的？

大都会！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T23:46:26.517

样式实际上来自管理面板中的编辑器。它使用 TinyMCE（模仿富文本编辑器的 JavaScript 编辑器），这就是原因。如果您`source`在编辑产品时单击按钮，您可以在描述区域中看到和编辑此代码

# ruby - 上帝启动了太多的过程

> ID：13058952
> 
> 赞同：24
> 
> 时间：2012-10-24T22:42:27.700
> 
> 标签：ruby, beanstalkd, god

我有一个上帝脚本，应该关注两个跟踪进程。问题是**24 小时后它启动了太多的进程。**

这是神剧本。

```
rails_root = File.expand_path("../..", __FILE__)

2.times do |n|
  God.watch do |w|
    w.group = "app-scripts"
    w.name  = "run-#{n}"
    w.interval = 30.seconds
    w.dir      = File.dirname(__FILE__)

    w.env = {
      "BUNDLE_GEMFILE" => "#{rails_root}/Gemfile",
      "RAILS_ENV" => "production",
      "BEANSTALK_URL" => "beanstalk://127.0.0.1:54132"
    }

    w.start = "bbundle exec stalk #{File.join(rails_root, "config/jobs.rb")}"

    w.start_grace = 5.seconds
    w.stop_grace  = 5.seconds

    w.start_if do |start|
      start.condition(:process_running) { |c| c.running = false }
    end

    w.restart_if do |restart|
      restart.condition(:memory_usage) do |c|
        c.above = 200.megabytes
        c.times = [3, 5]
      end

      restart.condition(:cpu_usage) do |c|
        c.above = 95.percent
        c.times = 5
      end
    end

    w.lifecycle do |on|
      on.condition(:flapping) do |c|
        c.to_state = [:start, :restart]
        c.times = 5
        c.within = 5.minute
        c.transition = :unmonitored
        c.retry_in = 10.minutes
        c.retry_times = 5
        c.retry_within = 2.hours
      end
    end
  end
end 
```

`ps aux | grep stalk`返回以下内容。

```
root      3178  0.2  2.7 417580 117284 ?       Sl   Oct28   2:22 ruby /opt/www/myapp/shared/bundle/ruby/1.9.1/bin/stalk /opt/www/myapp/current/config/jobs.rb
root      3179  0.2  3.3 506068 138740 ?       Sl   Oct28   2:26 ruby /opt/www/myapp/shared/bundle/ruby/1.9.1/bin/stalk /opt/www/myapp/current/config/jobs.rb
root      4588  0.2  2.9 497932 121664 ?       Sl   Oct25  16:10 ruby /opt/www/myapp/shared/bundle/ruby/1.9.1/bin/stalk /opt/www/myapp/current/config/jobs.rb
root      4794  0.2  3.0 497792 128084 ?       Sl   Oct25  15:57 ruby /opt/www/myapp/shared/bundle/ruby/1.9.1/bin/stalk /opt/www/myapp/current/config/jobs.rb
root     10391  0.2  2.8 496784 121388 ?       Sl   Oct25  15:44 ruby /opt/www/myapp/shared/bundle/ruby/1.9.1/bin/stalk /opt/www/myapp/current/config/jobs.rb
root     10392  0.2  2.8 497624 121528 ?       Sl   Oct25  15:31 ruby /opt/www/myapp/shared/bundle/ruby/1.9.1/bin/stalk /opt/www/myapp/current/config/jobs.rb
root     18874 75.0  2.0 214116 83948 ?        Rl   15:49   0:09 ruby /opt/www/myapp/shared/bundle/ruby/1.9.1/bin/stalk /opt/www/myapp/current/config/jobs.rb
root     18875 75.0  2.0 214944 84868 ?        Rl   15:49   0:09 ruby /opt/www/myapp/shared/bundle/ruby/1.9.1/bin/stalk /opt/www/myapp/current/config/jobs.rb
root     20649  0.2  2.6 410636 110012 ?       Sl   Oct28   2:44 ruby /opt/www/myapp/shared/bundle/ruby/1.9.1/bin/stalk /opt/www/myapp/current/config/jobs.rb
root     20650  0.2  3.0 439284 128996 ?       Sl   Oct28   2:47 ruby /opt/www/myapp/shared/bundle/ruby/1.9.1/bin/stalk /opt/www/myapp/current/config/jobs.rb
root     23272  0.2  2.7 414452 115772 ?       Sl   Oct28   2:44 ruby /opt/www/myapp/shared/bundle/ruby/1.9.1/bin/stalk /opt/www/myapp/current/config/jobs.rb
root     23273  0.2  2.7 417728 117152 ?       Sl   Oct28   2:44 ruby /opt/www/myapp/shared/bundle/ruby/1.9.1/bin/stalk /opt/www/myapp/current/config/jobs.rb
root     25919  0.2  3.1 436276 131876 ?       Sl   Oct28   2:28 ruby /opt/www/myapp/shared/bundle/ruby/1.9.1/bin/stalk /opt/www/myapp/current/config/jobs.rb
root     25920  0.2  3.3 503236 138676 ?       Sl   Oct28   2:29 ruby /opt/www/myapp/shared/bundle/ruby/1.9.1/bin/stalk /opt/www/myapp/current/config/jobs.rb
root     28782  0.2  2.8 431836 121108 ?       Sl   Oct25  16:58 ruby /opt/www/myapp/shared/bundle/ruby/1.9.1/bin/stalk /opt/www/myapp/current/config/jobs.rb
root     30687  0.2  2.7 415908 117008 ?       Sl   Oct28   2:39 ruby /opt/www/myapp/shared/bundle/ruby/1.9.1/bin/stalk /opt/www/myapp/current/config/jobs.rb
root     30688  0.2  2.6 476184 111844 ?       Sl   Oct28   2:37 ruby /opt/www/myapp/shared/bundle/ruby/1.9.1/bin/stalk /opt/www/myapp/current/config/jobs.rb 
```

这是`/usr/bin/bbundle`脚本。

```
#!/usr/bin/env bash

if [[ -s "/home/webmaster/.rvm/environments/ruby-1.9.2-p320@webmaster" ]]
then
  source "/home/webmaster/.rvm/environments/ruby-1.9.2-p320@webmaster"
  bundle  "$@"
else
  echo "ERROR: Missing RVM environment file: '/home/webmaster/.rvm/environments/ruby-1.9.2-p320@webmaster'" >&2
  exit 1
fi 
```

*   运行`sudo god stop app-scripts`不会杀死任何进程。

*   我已经尝试添加`w.uid = "webmaster"`到上帝脚本，但问题仍然存在。

*   我正在运行上帝版`0.12.1`、红宝石版`1.9.3p286`和潜行者版`0.9.0`。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T18:05:29.670

似乎`god`是试图跟随`bbundle`而不是`stalk`。您需要让`god`知道在哪里可以找到您想要遵循的实际进程的 PID `w.pid_file`。`kill`如果标准不能解决问题，您可能还需要告诉它如何终止进程。为此，您可以将`w.stop_signal`其用于不同的信号（如 simonmenke 建议的那样）或`w.stop`用于整个其他命令。

日志文件应该更清楚地说明正在发生的事情。调用`god -D`以将其打印到`stdout`或`god -l /var/log/god.log`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T11:58:40.280

堆栈器在收到`INT`信号（不是`TERM`信号）时停止。尝试添加停止信号：

```
# ...
w.stop_signal = 'INT'
# ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T20:41:04.863

这应该有助于解决您的问题：[Monitor a Rake task with God](https://makandracards.com/makandra/2371-monitor-a-rake-task-with-god)。

简而言之，您可以在您的上帝配置中存储对您的 PID 文件的引用：

```
 God.watch do |w|
   w.dir = "#{rails_root}"
   w.name = "my_task"
   w.interval = 10.seconds
   w.pid_file = "#{rails_root}/tmp/pids/#{w.name}.pid"
   w.env = {"RAILS_ENV"=>rails_env, 'PIDFILE' => w.pid_file}
   w.start = "bundle exec rake my_task &"
   ...
 end 
```

并在您的运行过程中将您的 PID 写入此文件（在此示例中为 rake）：

```
 task :my_task => :environment do
   File.open(ENV['PIDFILE'], 'w') { |f| f << Process.pid } if ENV['PIDFILE']
   Model.perform_task!
 end 
```

我们将上帝正在监视的 PID 文件的路径传递给实际被监视的进程，并将其 PID 写入该文件（然后由上帝监视）。希望这可以帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-25T10:50:30.323

感谢mpapis @ rvm irc，我解决了这个问题。我不得不将`bbundle`脚本中的第 6 行从更改`bundle "$@"`为`exec bundle "$@"`.

```
#!/usr/bin/env bash

if [[ -s "/home/webmaster/.rvm/environments/ruby-1.9.2-p320@webmaster" ]]
then
  source "/home/webmaster/.rvm/environments/ruby-1.9.2-p320@webmaster"
  exec bundle  "$@"
else
  echo "ERROR: Missing RVM environment file: '/home/webmaster/.rvm/environments/ruby-1.9.2-p320@webmaster'" >&2
  exit 1
fi 
```

# ios - 移动 Safari Web App 缩放问题

> ID：13058953
> 
> 赞同：1
> 
> 时间：2012-10-24T22:42:33.920
> 
> 标签：ios, forms, safari, zooming, hammer.js

我正在构建一个使用 jQuery 和hammer.js 进行触摸控制的移动网络应用程序。hammer.js 有一个名为“prevent_default”的功能，它可以关闭 Safari 的滚动/缩放/prettymucheverything。我有一个页面，其中包含一个使用 < input > 用于文本字段的表单，以及一个在您点击表单时调用 .focus() 的 javascript 侦听器。

这一切都运作良好，直到某一点。页面固定在适当的位置，看起来非常漂亮，当您单击表单字段时，它会放大并出现 iOS 键盘。问题是当用户完成输入文本时，没有办法缩小。浏览器从 .focus() 放大到浏览器栏消失了，您必须关闭浏览器选项卡并重新输入 URL 而不是刷新。

我正在寻找一种方法来强制浏览器缩小到初始视图。我已经在整个互联网上寻找一些解决方案，但还没有找到任何东西。

我在标题中有视口元标记以从一开始就禁用缩放，但在解决此问题时没有用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T23:52:09.527

一个 hacky 解决方案是在更改视口属性后聚焦和模糊输入字段。

```
function refreshViewportZoom(){
  var viewport = document.querySelector("meta[name=viewport]");
  viewport.setAttribute('content', 'initial-scale=0.5, maximum-scale=0.5, scale=0.5, user-zoom=0.5, zoom=0.5');
  document.getElementById('myInputField').focus();
  setTimeout(blurLater,2000);
}

function blurLater(){
  document.getElementById('myInputField').blur();
} 
```

需要作为`blurLater`一个函数，因为 Safari 似乎会向前看，否则会忽略它。

# iphone - AVCam 在 iOS6 中导致错误

> ID：13058959
> 
> 赞同：1
> 
> 时间：2012-10-24T22:43:07.270
> 
> 标签：iphone, ios6, avcam

任何人都可以将我引导到像这样的 AVCam 上的 iOS6 教程：

[http://developer.apple.com/library/ios/#samplecode/AVCam/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010112](http://developer.apple.com/library/ios/#samplecode/AVCam/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010112)

（它不适用于 iOS6）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T23:01:39.280

这有帮助吗？

[如何在 iOS 中播放、录制和编辑视频](http://www.raywenderlich.com/13418/how-to-play-record-edit-videos-in-ios)

如果那里的代码存在 iOS 6 问题，请在论坛中询问，它可以更新。

# apache - XAMPP apache服务器没有使用我想要的端口，不知道为什么

> ID：13058961
> 
> 赞同：2
> 
> 时间：2012-10-24T22:43:15.267
> 
> 标签：apache, xampp, port, virtualhost

所以，我一直在为一个必须能够通过虚拟主机维护多个域的学校项目设置这个 HTTP 服务器。使用 XAMPP 我设置了我的服务器，我认为我已经正确地完成了它，但也许没有。

我有很多无法监听端口的问题，为了解决我使用的这个问题（在 apache/conf/ 下的 httpd.conf 中）

```
 Listen 0.0.0.0:8080
    ServerName localhost:8080 
```

如果我使用 80/81/8080/321/任何没有前缀 0.0.0.0 的组合，它会告诉我端口无法被监听或其他什么（抱歉，我的语法有点生疏）。

我像这样设置了我的第一个虚拟主机（在 apache/conf/extra/httpd-vhosts.conf 下）：

```
NameVirtualHost *:8080

<VirtualHost *:8080>
    DocumentRoot    "H:/xampp2/xampp/htdocs"
    ServerName      localhost:8080

    <Directory "H:/xampp2/xampp/htdocs">
        Option Indexes FollowSymLinks Includes ExecCGI
        AllowOverride All
        Order allow,deny
        Allow from all
    </Directory>
</VirtualHost> 
```

我认为这看起来一切都很好，我不相信我已经修改了其他任何东西。对我来说，我希望这意味着我的 Apache 服务器将使用端口 8080 作为服务器？但是，当我在 XAMPP 中启动 Apache 时，它​​非常清楚地说明了

```
 Apache started [Port 80] 
```

为什么会是 80 端口？

同时， localhost:8080 不会将我导航到文档，但 localhost:80 或 localhost 会。我想这只是意味着它仍在端口 80 上。我尝试过重置我的计算机和 XAMPP。

如果您需要更多信息，请告诉我。我尝试了以下指南，例如：[http ://ailoo.net/2008/07/set-up-multiple-virtual-hosts-on-xampp-for-windows/](http://ailoo.net/2008/07/set-up-multiple-virtual-hosts-on-xampp-for-windows/)

干杯。

哦，我还编辑了我的 Windows HOSTS 文件；它看起来像这样：

```
# localhost name resolution is handled within DNS itself.
    127.0.0.1       localhost
    ::1             localhost
    127.0.0.1       localhost:8080 
```

编辑：新错误......现在当我初始化时得到这个，似乎并没有影响它：

```
 ERROR: Status Check Failure [3]
 This program must be run from your XAMPP root directory. 
```

据我所知，它是从根目录运行的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-25T00:06:44.337

好的，我在这方面也不先进。然而，在玩了很多 XAMPP 并遵循了一些不同的指南之后，我开始工作了。

驱动程序下的主机似乎有点奇怪。我宣布我的为：

```
 127.0.0.1:8080    test.localhost.com
 127.0.0.1:8080    test2.localhost.com 
```

备份 Xampp，然后将全新安装解压缩到 C: - 仅仅因为状态检查失败听起来像是坏消息。

！记得从xampp目录运行setup_xampp.bat并安装apache服务！

然后在你的 httpd.conf 下添加：

```
ServerRoot C:\xampp\apache
Listen 7070
Listen 8080
Listen 9090 
```

Apache 一开始可能不喜欢这样，但是嗯。

ServerRoot 可能已经在 Listen 位置上方声明，因此请仔细检查。

之后前往 C:\xampp\apache\conf\extra。

编辑 httpd-vhosts.conf。

在基于名称的虚拟主机部分下添加：

```
NameVirtualHost *:7070
NameVirtualHost *:8080
NameVirtualHost *:9090 
```

下面会有几个虚拟主机的例子。添加：

```
<VirtualHost *:7070>
    DocumentRoot    "C:/xampp/www/YOURWEBSITEDIR1"
    ServerName      test.localhost.com
    <Directory "C://xampp/www/YOURWEBSITEDIR1">
        Allow from all
    </Directory>
</VirtualHost>

<VirtualHost *:9090>
    DocumentRoot    "C:/xampp/www/YOURWEBSITEDIR2"
    ServerName      test2.localhost.com
    <Directory "C://xampp/www/YOURWEBSITEDIR2">
        Allow from all
    </Directory>
</VirtualHost> 
```

不是 Directory 标签中的双斜杠。现在确保每个目录下都有一个 index.html。重新启动 apache（停止，启动）。

我无法导航到 test.localhost.com URL，可能是因为它们在 HOSTs 配置中非常错误。虽然我可以连接到 127.0.0.1:7070、127.0.0.1:9090 并从那里访问网页。

127.0.0.1:8080 也将我连接到本地主机用来连接你的 xampp 欢迎面板。

希望这会有所帮助，祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-12T08:25:13.503

我很确定说“在端口 80 上侦听”是硬编码到 XAMPP 中的，无论您使用什么端口。因此，您的代码应该可以正常工作。
在我的 .conf 文件中，它只是说“listen 80”而不是 Listen 0.0.0.0:8080
Cheers。

# c# - 如何将数据从 StartPage (_ViewStart.cshtml) 传递到 Layout.cshtml？

> ID：13058969
> 
> 赞同：0
> 
> 时间：2012-10-24T22:43:46.490
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

在我的布局页面中，我有一个只想在暂存环境中显示的横幅。部署到生产环境后如何自动隐藏它？

在`_ViewStart.cshtml`中，我可以`System.Environment.GetEnvironmentVariable("web_env")`用来获取需要的信息，但是如何`div`在布局页面中隐藏呢？我不能`ActionResult`在控制器中返回一个赞，可以吗？

`<div id='warning'>blah</div>`

**更新**

在`_ViewStart.cshtml`：

```
PageData["IsProd"] = System.Environment.GetEnvironmentVariable("web_env") == "PROD"; 
```

在`Layout.cshtml`：

```
@if (!PageData["IsProd"])
{
    <div id="warning">
        you are in testing environment.
    </div>
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T22:47:44.130

在您看来：

```
@if(isNotProductionEnvironment)
{
    <div id='warning'>This will be visible anywhere but production</div>
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T22:47:52.260

您可以使用条件语句并在 web.config 的 AppSettings 中设置一个值

```
@if(System.Web.Configuration.WebConfigurationManager.AppSettings["IsDev"] == "1")
{
   <div id='warning'>blah</div>
} 
```

或者

```
@if(System.Environment.GetEnvironmentVariable("web_env") == "0")
{
   <div id='warning'>blah</div>
} 
```

# solr - Solr - 一个数据导入处理程序记录下的多个附件

> ID：13058972
> 
> 赞同：0
> 
> 时间：2012-10-24T22:43:59.857
> 
> 标签：solr, solrj, apache-tika, dataimporthandler

我正在使用数据导入处理程序 (DIH) 在 solr 中创建文档。每个文档将有零个或多个附件。附件（例如 PDF、Word 文档等）的内容被解析（通过 Tika）并与附件的路径一起存储。附件的内容（和路径）没有存储在数据库中（我不想这样做）。

我目前有一个包含 DIH 所需的所有字段的模式。然后我还添加了一个附件内容和附件路径字段作为多值。但是，当我使用 Solrj 添加文档时，solr 只存储和索引一个附件（最后添加的一个）。这是代码：

```
 ContentStreamUpdateRequest up = new ContentStreamUpdateRequest("/update/extract");
        up.setParam("literal.id", id);

        for (MultipartFile file : files) {
            // skip over files where the client didn't provided a filename
            if (file.getOriginalFilename().equals("")) {
                continue;
            }
            File destFile = new File(destPath, file.getOriginalFilename());
            try {
                file.transferTo(destFile);

                up.setParam("literal.attachmentPath", documentWebPath + acquisition.getId() + "/" + file.getOriginalFilename());
                up.addFile(destFile);   
            } catch (IOException ioe) {
                ioe.printStackTrace();   
            }               
        }
        try {
            up.setAction(AbstractUpdateRequest.ACTION.COMMIT, true, true);            
            solrServer.request(up);
        } catch (SolrServerException sse) {
            sse.printStackTrace();
        }catch (IOException ioe) {
            ioe.printStackTrace();   
        } 
```

如何让 solr 存储多个附件（内容和路径）？还是有更好的方法来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T07:14:01.757

Solr 的限制是只能使用 API 索引一个文档。
如果您想要索引多个文档，您可以将它们作为一个 zip 文件（并应用[patch](https://issues.apache.org/jira/browse/SOLR-2416)）并将其编入索引。

# javascript - 带有 RC4 的 NodeJS Crypto 产生空白

> ID：13058977
> 
> 赞同：5
> 
> 时间：2012-10-24T22:44:12.760
> 
> 标签：javascript, node.js, cryptojs, rc4-cipher, node-crypto

我有一个生成 RC4 加密字符串的 php 函数。我想使用 Node 解码该字符串 - 最好使用内置的 Crypto 模块。但我不能这样做 - 我只是得到一个空白字符串。

PHP 代码在这里[http://code.google.com/p/rc4crypt/](http://code.google.com/p/rc4crypt/)

我的 JS 代码是

```
crypto = require('crypto');
decipher = crypto.createDecipher("rc4", "MY SECRET KEY");
text = "HELLO";
decrypted = decipher.update(text, "utf8", "hex");
decrypted += decipher.final("hex");
console.log(decrypted); 
```

我没有得到任何输出。我已经使用 openssl list-message-digest-algorithms 检查了我的 OpenSSL 实现是否具有 RC4

我在 OSX 10.8 上，最新节点。

我愿意使用另一个模块来解密 - 我尝试了 cryptojs 模块，但没有弄清楚如何让它工作 - 当我尝试 RC4 时给了我错误。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T01:23:44.630

弄清楚了

第一个必须使用 crypto.createDecipheriv 否则关键是 - 我相信 - md5 散列而不是使用原始。

其次，输入编码必须设置为二进制。

第三 - 在我的情况下，我正在处理 POST 数据而不是硬编码字符串，我不得不对其进行 urldecode - decodeURIComponent() jsut 窒息 - 但是 unescape() 删除 + 符号做了诀窍：

```
var text = unescape((response.post.myvar + '').replace(/\+/g, '%20'))

var crypto = require('crypto');
decipher = crypto.createDecipheriv("rc4", key, '');    
decrypted = decipher.update(text, "binary", "utf8");
decrypted += decipher.final("utf8");
console.log(decrypted); 
```

# r - R中第三维的平均值

> ID：13058978
> 
> 赞同：15
> 
> 时间：2012-10-24T22:44:18.007
> 
> 标签：r

R中是否有任何快速方法或内置函数来计算基于第三维的平均值？

例如我的数组是：

```
, , 1
     [,1] [,2]
[1,]    1    3
[2,]    2    4

, , 2
    [,1] [,2]
[1,]   11   13
[2,]   12   14

, , 3
     [,1] [,2]
[1,]   21   23
[2,]   22   24 
```

我的输出是：

```
 [,1]        [,2]
[1,]   mean(1,11,21)   mean(3,13,23)
[2,]   mean(2,12,22)   mean(4,14,24) 
```

谢谢！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-24T22:52:49.307

`?apply`是这些类型任务的朋友。

```
# Make the sample data
j <- array(c(1:4, 11:14, 21:24), c(2,2,3))
# For each combination in the 1st and 2nd dimension
# average over the values in the 3rd.
apply(j, c(1,2), mean) 
```

# ruby-on-rails - Rails 中的 Sql 注入预防和数据转换

> ID：13058981
> 
> 赞同：0
> 
> 时间：2012-10-24T22:44:30.703
> 
> 标签：ruby-on-rails, ruby, security, sql-injection

我在 Ruby on Rails 指南中注意到这被认为是正确的格式

```
Client.where("orders_count = ?", params[:orders]) 
```

而后来他们使用

```
Client.where(:created_at => (params[:start_date].to_date)..(params[:end_date].to_date)) 
```

我的问题是，是否可以安全地假设使用该`.to_`方法对 sql 注入足够安全？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T22:52:23.980

并不是 to_ 方法是安全的，而是格式： where(:column => value) 或使用新的哈希格式： where(column: value) 一样安全且更方便。

# javascript - 让文字一个字母一个字母地消失

> ID：13058985
> 
> 赞同：3
> 
> 时间：2012-10-24T22:45:09.003
> 
> 标签：javascript, jquery, html, css

我是 JavaScript 和 jQuery 开发的新手，我想问一下使用 JavaScript 使 html 文本一个字母一个字母地慢慢消失的最简单方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T22:52:26.140

由于我更加好奇，我想我创造了你正在寻找的那个，

**演示：http:** [//jsfiddle.net/DbknZ/3/](http://jsfiddle.net/DbknZ/3/)

```
$(function() {
  var $test = $('#test');
  var initText = $.trim($test.text()), ptr = 0;
  var timer = setInterval(function() {
    var ln = $.trim($test.find('.trans').text().length);
    if (ln == initText.length) {
        $test.empty();
        clearInterval(timer);
    }

    $('#test').html(function() {    

        return $('<span>').addClass('removeMe')
            .html(initText.substring(ptr++ , ptr))
            .before($('<span>').addClass('trans').
                   html(initText.substring(0 , ptr-1)))
            .after(initText.substring(ptr));
    }).find('span.removeMe').animate({'opacity': 0}, 10);

  }, 20);
}); 
```

* * *

我只是很好奇，为你写了一个小东西..这可能是一个开端..

基本上它是一个逐字母删除的计时器。见下文。

**演示：http:** [//jsfiddle.net/TTv7L/1/](http://jsfiddle.net/TTv7L/1/)

**HTML：**

```
<div id="test">
   This is a test page to demonstrate text disapper letter by letter
</div> 
```

**JS：**

```
$(function () {
    var $test = $('#test');
    var timer = setInterval( function () {
        var ln = $test.text().length;
        if (ln == 0) clearInterval(timer);

        $('#test').text(function (i, v) {
            return v.substring(1);
        });
    }, 100);
}); 
```

# database - 数据挖掘技术 AdaBoost 是如何工作的？

> ID：13058986
> 
> 赞同：2
> 
> 时间：2012-10-24T22:45:07.970
> 
> 标签：database, data-mining, adaboost

我遇到了数据挖掘技术 AdaBoost，但我找不到太多关于它如何工作的信息或我可以通过的任何示例，有人可以在这方面有所了解吗？

另外我想尝试对数据进行预测和探索，有人有例子吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T00:56:01.607

本[教程](http://www.inf.fu-berlin.de/inst/ag-ki/adaboost4.pdf)很好地解释了这个想法。在教程的最后，在**问题**部分，第 4 项指向您可以尝试的简单分类问题，第 5 项指向 OpenCV 库中 Viola-Jones 算法的实现代码。它的对象检测框架采用 AdaBoost 的变体来选择最佳特征并训练使用它们的分类器。

# jquery - 优化 jquery、html 和 css 代码以进行弹出

> ID：13058987
> 
> 赞同：0
> 
> 时间：2012-10-24T22:45:08.630
> 
> 标签：jquery, html, css

我已经为弹出窗口编写了一个 jquery 代码，但问题是我想优化 jquery 代码，你能告诉我如何优化它以在浏览器中获得更好的结果吗？

如果你也告诉 html 和 css 那就太好了....

我在下面提供 jquery 代码....

```
 // locale selector actions
    $('#region-picker').click(function(){
        if ($("#locale-select").is(":visible")) return closeSelector('slide');
        var foot_height = $('#footer').innerHeight();
        var foot_height_css = foot_height-1;
        var select_position = '-=' + (Number(700)+18);
        console.log("hallo"+select_position);
        var $selector = $('#locale-select');
        $('#locale_pop').fadeOut();
        $selector.css({top:foot_height_css});
        $selector.fadeIn(function(){
            $(this).addClass('open');
            $(this).animate({top:select_position}, 1000);
            });
    });
    $('#select-tab').click(function(e){
        e.stopPropagation()
        closeSelector('slide');
        });
    // don't hide when clicked within the box
    $('#locale-select').click(function(e){
        e.stopPropagation();
    });
    $(document).click(function(){ 
        if ($('#locale-select').hasClass('open')) {
            closeSelector('disappear');
        }
    });

    $('.locale-link').click(function(){
        //var $clicked = $(this); //"$(this)" and "this" is the clicked span
        $(".locale-select-lable").html($(this).html());
        //search for "marginXXXXX"
        var flags = $(this).attr("class").match(/(margin\w+)\s/g);
        //create new class; add matching value if found
        var flagClass = "tk-museo-sans locale-select-lable" + (flags.length ? " " + flags[0] : "");
        //set new class definition
        $(".locale-select-lable").attr("class", flagClass);

        closeSelector('disappear');

        //if ($("#locale-select").is(":visible")) return closeSelector('slide');
       /*         
       // var desired_locale = $(this).attr('rel');
       // createCookie('desired-locale',desired_locale,360);
       // createCookie('buy_flow_locale',desired_locale,360);
        //closeSelector('disappear');
        */
    });  /* CORRECTED */

    $('#locale_pop a.close').click(function(){
        var show_blip_count = readCookie('show_blip_count');
        if (!show_blip_count) {
            createCookie('show_blip_count',3,360);
        }
        else if (show_blip_count < 3 ) {
            eraseCookie('show_blip_count');
            createCookie('show_blip_count',3,360);
        }
        $('#locale_pop').slideUp();
        return false;
    }); 

function closeSelector(hide_type){
var foot_height = $('#footer').innerHeight();
var select_position = '+=' + (Number(400)+20);
if (hide_type == 'slide') {
$('#locale-select').animate({top:select_position}, 1000, function(){
$(this).removeClass('open');
$(this).fadeOut()
});
}
else if (hide_type == 'disappear'){
$('#locale-select').fadeOut('fast');
$('#locale-select').removeClass('open');
}
} 
```

​</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T05:23:04.580

大多数标准的 jquery 优化可以很容易地在谷歌搜索 jquery 最佳实践中找到。很多资源。这是来自谷歌的一对。

[jQuery 标准和最佳实践](https://stackoverflow.com/questions/1245598/jquery-standards-and-best-practice)

[http://24ways.org/2011/your-jquery-now-with-less-suck](http://24ways.org/2011/your-jquery-now-with-less-suck)

特别是对于您的代码，我会考虑使用`.on()`而不是`.click()`您的`.locale-link`元素，并且还可以利用方法链接和缓存一些 jquery 对象。希望这个对你有帮助。

# facebook-javascript-sdk - 本地 html 文件的 FB.getLoginStatus

> ID：13058989
> 
> 赞同：1
> 
> 时间：2012-10-24T22:45:12.057
> 
> 标签：facebook-javascript-sdk

我正在创建一个用于测试 fb 登录的示例 html 文件。我使用了 facebook 开发人员页面中的代码，如下所示，但无法调用 FB.getLoginStatus。对于我的 facebook 应用程序设置，我有沙盒模式 NO 并放置一个随机站点 url：

```
 <!DOCTYPE html>

<html>
  <head>
    <title>Example</title>
  </head>
  <body>
<div id="fb-root"></div>
<script>
  window.fbAsyncInit = function() {
    // init the FB JS SDK
    FB.init({
      appId      : 'MYAPPID', // App ID from the App Dashboard
      status     : true, // check the login status upon init?
      cookie     : true, // set sessions cookies to allow your server to access the session?
      xfbml      : true  // parse XFBML tags on this page?
    });

    // Additional initialization code such as adding Event Listeners goes here
    FB.getLoginStatus(function(stsResp) {
        alert('get login status callback!');
    });
  };

  // Load the SDK's source Asynchronously
  (function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     ref.parentNode.insertBefore(js, ref);
   }(document));

</script>

  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T04:38:35.560

Facebook JavaScript SDK 不支持在非 http/https 上下文中使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-18T21:07:42.647

我建议使用[localtunnel](https://github.com/localtunnel/localtunnel)，这样您就可以将 localhost 映射到公共 HTTPS URL，如下所示：

```
lt --subdomain yourapp --port 3001 
```

然后您只需将[https://yourapp.localtunnel.me](https://yourapp.localtunnel.me)设置为您的网站。

# c++ - 使用 int 和 object 的模板删除对象

> ID：13058995
> 
> 赞同：1
> 
> 时间：2012-10-24T22:45:48.123
> 
> 标签：c++, delete-operator

好吧，假设我有一门课程，其所有定义，bla bla bla ...

```
template <class DT>
class Foo{
private:
    DT* _data;
    //other stuff;
public:
    Foo(DT* data){ _data = data; }
    virtual ~Foo(){ delete _data; }
    //other methods
}; 
```

然后我在主要方法中有：

```
int main(){
    int number = 12;

    Foo<anyRandomClass>* noPrimitiveDataObject = new Foo<anyRandomClass>(new anyRandomClass());
    Foo<int>* intObject = new Foo<int>(number);

    delete noPrimitiveDataObject; //Everything goes just fine.
    delete intObject; //It messes up here, I think because primitive data types such as int are allocated in a different way.

    return 0;
} 
```

我的问题是：我该怎么做才能让 main 方法中的两个 delete 语句都能正常工作？

PS：虽然我没有实际编译/测试过这个特定的代码，但我已经对它进行了广泛的审查（以及缩进），所以如果你发现错误，请多多关照。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T22:51:25.427

您正在获取文字的地址，然后`delete`稍后再调用它，这是错误的。它不是用 分配的`new`，因此你不能用它来释放它`delete`（也没有任何意义）。

如果你写`new int(12)`了，那就没问题了，但是，还有其他问题。

首先，您的班级违反[了三原则](http://en.wikipedia.org/wiki/Rule_of_three_%28C++_programming%29)。如果我复制`intObject`然后调用`delete`它们会发生什么？你最终会调用`delete`同一个指针两次。

其次，你为什么要动态分配这些东西？您创建一个 RAII 样式包装器来为您处理释放...然后继续手动分配它。那是解决什么问题？

我想这对你来说是一个练习，这很棒。请记住您要使用此代码解决的问题。

如果我使用 a`std::vector<T>`我当然不会像这样使用它：

```
std::vector<int> *v = new std::vector<int>; 
```

它违背了使用向量的全部目的！现在我必须手动管理这个指针/内存，这就是创建向量类（和其他 RAII 样式类）来解决的问题。

因此，要正确使用它，请执行以下操作：

```
void foo() 
{
    std::vector<int> v;
    // do stuff with v
    // it allocates its memory dynamically so you don't have to.
    // when we exit the function the destructor is called, the memory 
    // deallocated, and life continues as it should.
} 
```

使用自动存储持续时间对您有利，这就是重点。还要非常清楚谁拥有内存。如果从你的类设计中不清楚谁拥有给定的内存块，那么`delete`在你的析构函数中它是不安全的。

* * *

好的，您现在将代码更改为：

```
int number = 12;
// ...
Foo<int>* intObject = new Foo<int>(number); 
```

同样的问题; 您正在获取分配有自动存储持续时间的变量的地址，然后调用`delete`它。 **这是错误的**。您分配的任何东西都与`new`您一起解除分配`delete`，但仅此而已。曾经。就是这样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T22:50:56.173

好像你不知道你能做到`new int(12)`。因此，例如，您可以将代码更改为以下内容：

```
Foo<int>* intObject = new Foo<int>(new int(12)); 
```

（我假设这只是为了学习，因为`new`完全不使用会更好）。

另外，我刚刚注意到您的代码是错误的，也许您想要以下内容：

```
Foo(DT* data){ _data = data; }
virtual ~Foo(){ delete _data; } 
```

**边注**

在发布问题之前，至少尝试编译您的示例。

# r - 直方图中每个 bin 的均值和标准差

> ID：13058996
> 
> 赞同：1
> 
> 时间：2012-10-24T22:45:54.600
> 
> 标签：r, histogram, mean, bin, standard-deviation

我在 R 中有一些代码，可以在 R 中生成关于机器在不同时间点的不同功率（瓦特）值的频率的直方图。

直方图被划分为“n”个箱或单元。

有没有一种简单的方法来计算每个箱中的平均值和标准偏差？

例如，

```
bin 1, mean = 0.5, sd=0.01
bin 2, mean = 3.5, sd=0.23
bin 3, mean = 4.5, sd=0.35 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T22:59:41.073

是的。因此，假设您有一个数据框的向量或列，用于观察机器的功率，`P`.

```
P <- c(100,80,100,120,80) 
```

所以把它分成你想要的垃圾箱：

```
C <- cuts(P, breaks=3) 
```

将中断标签分解为“数字”

```
> C <- as.numeric(C)
> C
[1] 2,1,3,2,1 
```

现在您可以在每次休息时获取信息

```
by(P, C, mean)
by(P, C, sd) 
```

或者一起：

```
by(P, C, function(x) c(mean(x), sd(x)) 
```

并且对读者更友好：

```
by(P, C, function(x) paste(c("Mean : ", "SD : "), c(mean(x), sd(x)), sep=" | ")) 
```

# c# - 使用默认打印机字体打印粗体文本

> ID：13058997
> 
> 赞同：1
> 
> 时间：2012-10-24T22:45:57.100
> 
> 标签：c#, graphics, printing

我刚刚购买了 Epson TM-t88v pos 打印机并制作了一个不错的小应用程序来打印收据。

问题是，我使用这些代码行来打印一些东西：

```
graphic.DrawString("TOTAL             " + textBox23.Text,
                   font,
                   new SolidBrush(Color.Black),
                   startX,
                   startY + offset + 425); 
```

其中字体是 arial 10 但**它被默认打印机字体替换**，并且由于我不想学习 VB，即使我使用替换的默认打印机字体，是否有办法输出此行**粗体？**

注意：FontStyle.Bold 不起作用