# StackOverflow 问答 14877000-14877999

# c - 将整个代码块转换为 C 中的一行

> ID：14877000
> 
> 赞同：0
> 
> 时间：2013-02-14T14:27:19.577
> 
> 标签：c

例如，我想将整个代码块输入到命令中：

```
int k = 0;

for (k = 0; k < 50; k++) 
{
    sprintf(buf, "M LR 10 -10\n");                     //We put the string "M L 10" into the string buffer.
    write(sock, buf, strlen(buf));                     //We send the buffer into the socket.
    memset(buf, 0, 80);                                //Clear the buffer, set buffer to value 0.
    read(sock, buf, 80);                               //Read from the socket to get the results.
    int lme, rme;
    sprintf(buf, "S MELR\n");                          //sensor command to find ME values
    write(sock, buf, strlen(buf));                     //sends the buffer to the socket
    memset(buf, 0, 80);                                //Clear the buffer, set buffer to value 0.
    read(sock, buf, 80);                               //read from socket to get results.
    sscanf(buf, "S MELR %i %i\n", &lme, &rme);         //takes lme and rme values from results
    printf(buf, "%3i   %-4i\n", lme, rme);
    //distance = 2 * (22/7) * r
}

for (k = 50; k < 51; k++) 
{
    sprintf(buf, "C RME\n");                           //We put the string "C RME" into the string buffer to reset.
    write(sock, buf, strlen(buf));                     //We send the buffer into the socket.
    memset(buf, 0, 80);                                //Clear the buffer, set buffer to value 0.
    read(sock, buf, 80);                               //Read from the socket to get the results.
} 
```

这使我能够仅更改`{sprintf(buf, "M LR 10 -10\n");}`ie `10`and中字符串的值`-10`，其余过程将自行执行：

比如`set_motor_speed(10 -10\n)`在主代码中会执行整个函数，怎么做呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T14:41:32.467

正如其他人所说：你可以在一本 C 语言的书中读到这种东西，但是我们很好：

```
set_motor_speed(int a, int b) {
    ...
    for(k = 0; k < 50; k++) {
        sprintf(buf, "M LR %i %i\n", a, b);
        ...
    }
    ...
}

set_motor_speed(10, -10);
set_motor_speed(5, -5); 
```

# eclipse - 如何关闭 Eclipse RCP 应用程序中的启动画面？

> ID：14877003
> 
> 赞同：0
> 
> 时间：2013-02-14T14:27:29.157
> 
> 标签：eclipse, splash-screen, rcp

在 Eclipse RCP 应用程序中，a`splash.bmp`用作启动画面。它在应用程序运行大约 5-6 分钟后关闭。我希望它在某些 UI 显示后立即关闭。我尝试使用`Platform.endSplash()`and`applicationRunning()`之前的应用程序上下文`PlatformUI.createAndRunWorkbench(display, new ApplicationWorkbenchAdvisor())`。

它无法关闭启动画面。

任何的意见都将会有帮助。如果我可以在大约 10 -15 秒后关闭启动画面也可以。

```
public Object start(IApplicationContext arg0) throws Exception {
        Display display = PlatformUI.createDisplay();
        int returnCode = 0;
        try {

            //arg0.applicationRunning();
            Platform.endSplash();
            returnCode = PlatformUI.createAndRunWorkbench(display,
                    new ApplicationWorkbenchAdvisor());

            if (returnCode == PlatformUI.RETURN_RESTART) {
                return PlatformUI.RETURN_RESTART;
            }

        return PlatformUI.RETURN_OK;
        } finally {
           //some other code here.
            display.dispose();
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T16:28:42.977

我希望启动画面在一切都初始化后关闭，而不是在设定的几秒钟后。否则你甚至不需要一个。

根据[这个线程](http://www.eclipsezone.com/eclipse/forums/t114238.html)，您应该确保`Platform.endSplash()`在正确的上下文中调用该方法，这意味着该方法`start(IApplicationContext context)`

如果您已经这样做了，请提供一些代码来帮助我们理解您的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T14:37:32.840

初始屏幕的关闭由创建`StartupMonitor`于`Workbench`.

创建工作台部分后（如您所说，“一旦显示某些 UI”），它将循环通过所有已注册的启动服务。您的工作台可见并且必须等待大约 5-6 分钟（或几秒钟）才能关闭初始屏幕，这意味着您有另一个启动监视器阻止了所需的 UI 转换。

# cakephp - 在 PHPStorm 中将 CTP 文件显示为 PHP 文件

> ID：14877005
> 
> 赞同：43
> 
> 时间：2013-02-14T14:27:31.463
> 
> 标签：cakephp, phpstorm

我有一个在 CakePHP 上运行的项目。我所有的视图都存储为 ctp 文件。如何呈现我的 ctp 文件，以便在查看存储为 PHP 文件的文件时具有相同的视觉格式？在记事本++中，我可以通过从“语言”工具栏选项中进行选择来做到这一点。PHPStorm 中是否有类似的功能？

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2013-02-14T15:06:57.113

`File`| `Settings`| **文件类型**，将此扩展名分配给`PHP Files`.

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2017-06-15T08:01:47.223

> 在 PHP Storm 2017 中：文件 | 设置 | 编辑 | 文件类型

将**.ctp**添加到 PHP 的**Registered Patterns**选项卡中

```
Select PHP & In tab Registered Patterns > Click + > add .cpt 
```

[![在此处输入图像描述](../Images/ad7902812f23d7525fb743d69fba53a1.png)](https://i.stack.imgur.com/kX7h5.png)

# git - git查看其他分支中的代码而不切换

> ID：14877006
> 
> 赞同：1
> 
> 时间：2013-02-14T14:27:32.783
> 
> 标签：git, emacs

通常，当在分支“Y”中使用 进行重构工作时`git`，我会想——这是如何在分支“X”中完成的？我的本地仓库没有地方可以签入 - 并且`stash`ing 以便我可以切换分支，检查另一个分支中的文件，然后`stash pop`在此过程中切换回来（尽量不要忘记）似乎太 hacky。有没有办法在另一个分支中获取文件的句柄，以便我可以在当前分支中的版本旁边显示它？

我的编辑是`emacs`，如果这有什么不同的话。理想的解决方案是为分支“X”中的文件提供一个单独的 emacs 缓冲区——但我意识到这可能要求太多了。即使是像假设`git cat myfile otherbranch`这样简单的事情也会有所帮助。

# c++ - 从中间期货创造未来？

> ID：14877007
> 
> 赞同：10
> 
> 时间：2013-02-14T14:27:37.590
> 
> 标签：c++, c++11

在以下示例代码中，我想`Item`从 a 创建一个对象`Component`：

```
struct Component { };

struct Item {
    explicit Item(Component component) : comp(component) {}    
    Component comp;
};

struct Factory {
    static std::future<Item> get_item() {
        std::future<Component> component = get_component();        
        // how to get a std::future<Item> ?
    }

    std::future<Component> get_component();
}; 
```

我如何从`std::future<Component>`到`std::future<Item>`？

**更新：**从问题中删除了我的第一个想法（基于线程）并发布了答案。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-14T14:36:03.587

需要 moar packaged_tasks！

```
std::future<Item> get_item() {
    std::packaged_task<Item()> task([]{
        return Item(get_component().get());
    });
    auto future = task.get_future();
    std::thread(std::move(task)).detach();
    return future;
}; 
```

一般来说，我建议忘记承诺并首先考虑 packaged_tasks。A`packaged_task`负责为您维护（功能、承诺、未来）三元组。它允许您以自然的方式编写函数（即使用返回和抛出等），并将异常正确地传播到您的示例忽略的将来（程序中的*任何*线程中的未处理异常`std::terminate`！）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-27T11:23:57.960

It occurred to me that I can use `std::async` with the *deferred* launch policy to compose the final object:

```
std::future<Item> get_item()
{
    // start async creation of component
    // (using shared_future to make it copyable)
    std::shared_future<Component> component = get_component();

    // deferred launch policy can be used for construction of the final object
    return std::async(std::launch::deferred, [=]() {
        return Item(component.get());
    });
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-15T10:28:56.173

您也可以使用`then`Herb Sutter 提出的功能。这是该函数的略微修改版本。有关如何修改的更多信息以及原始谈话的链接可以在[这个 SO question](https://stackoverflow.com/questions/14489935/implementing-futurethen-equivalent-for-asynchronous-execution-in-c11)中找到。您的代码将归结为：

```
return then(std::move(component), [](Component c) { return Item(c); }); 
```

最初的想法是将函数`then`作为成员函数，`std::future<T>`并且正在进行一些将其放入标准的工作。该函数的第二个版本用于`void`期货（本质上只是异步链接函数）。正如 Herb 指出的那样，您可能会因为可能需要额外的线程而为使用这种方法付费。

您的代码如下所示：

```
#include <future>
#include <thread>
#include <iostream>

template <typename T, typename Work>
auto then(std::future<T> f, Work w) -> std::future<decltype(w(f.get()))>
{
  return std::async([](std::future<T> f, Work w)
                    { return w(f.get()); }, std::move(f), std::move(w));
}

template <typename Work>
auto then(std::future<void> f, Work w) -> std::future<decltype(w())>
{
  return std::async([](std::future<void> f, Work w) -> decltype(w())
                    { f.wait(); return w(); }, std::move(f), std::move(w));
}

struct Component { };

struct Item {
  Item(Component component) : comp(component) {}
  Component comp;
};

struct Factory {
  static std::future<Item> get_item() {
    std::future<Component> component = get_component();
    return then(std::move(component), [](Component c) { return Item(c); });
  }

  static std::future<Component> get_component()
  {
    return std::async([](){ return Component(); });
  }

};

int main(int argc, char** argv)
{
  auto f = Factory::get_item();
  return 0;
} 
```

上面的代码可以用 clang 和 libc++ 编译（在 Mac OS X 10.8 上测试）。

# android - Android中长按向下和长按向上的事件

> ID：14877009
> 
> 赞同：3
> 
> 时间：2013-02-14T14:27:39.233
> 
> 标签：android, android-button

我想要两个单独的事件来长按向下和长按向上。我怎样才能在 Android 中做到这一点？

我尝试过的如下

```
public class FfwRewButton extends ImageButton {

    public interface ButtonListener {

        void OnLongClickDown(View v);

        void OnLongClickUp(View v);
    }

    private ButtonListener mListener;

    private boolean mLongClicked = false;

    public FfwRewButton(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        setFocusable(true);
        setLongClickable(true);
    }

    public FfwRewButton(Context context) {
        this(context, null);
    }

    public FfwRewButton(Context context, AttributeSet attrs) {
        this(context, attrs, android.R.attr.imageButtonStyle);
    }

    @Override
    public boolean onKeyLongPress(int keyCode, KeyEvent event) {
        Log.d("my listener", "long press");
        mLongClicked = true;
        mListener.OnLongClickDown(this);
        return super.onKeyLongPress(keyCode, event);
    }

    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        Log.d("my listener", "key down");
        mLongClicked = false;
        if (true) {
            super.onKeyDown(keyCode, event);
            return true;
        }
        return super.onKeyDown(keyCode, event);
    }

    @Override
    public boolean onKeyUp(int keyCode, KeyEvent event) {
        Log.d("my listener", "key up");
        if (mLongClicked)
            mListener.OnLongClickUp(this);
        return super.onKeyUp(keyCode, event);
    }

    public void setFfwRewButtonListener(ButtonListener listener) {
        mListener = listener;
    }
} 
```

在一项活动中，我这样称呼它

```
private FfwRewButton.ButtonListener mListener = new FfwRewButton.ButtonListener() {

        @Override
        public void OnLongClickUp(View v) {
            Log.d(TAG, "longClickup");
        }

        @Override
        public void OnLongClickDown(View v) {
            Log.d(TAG, "longClickdown");
        }
    }; 
```

但是仍然没有在 logcat 中收到任何日志消息有人可以帮助我吗？我错在哪里？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-14T14:46:46.183

`onKeyXXX()`方法适用于来自键盘或硬键（如菜单键、搜索键等）的键事件。

如果要检测`MotionEvent`在 Android 中调用的触摸事件，则必须重写`onTouchEvent(MotionEvent e)`方法并使用`GestureDetector`类来识别长按。

```
private GestureDetector mGestureDetector;

public FfwRewButton(...) {
    //....
    mGestureDetector = new GestureDetector(context, 
        new GestureDetector.SimpleOnGestureListener() {
            public boolean onDown(MotionEvent e) {
                mLongClicked = false;
                return true;
            }
            public void onLongPress(MotionEvent e) {
                mLongClicked = true;
                // long press down detected
            }
        });
    }

    public boolean onTouchEvent(MotionEvent e) {
        mGestureDetector.onTouchEvent(e);
        if (mLongClicked && e.getAction() == ACTION_UP) {
           // long press up detected
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T14:41:49.010

这样的事情会让你走上正确的道路，

我没有编译，所以您可能需要更正一些语法问题，但您的目标可以通过这个概念来实现

```
OnTouchListener mTouchListener = new OnTouchListener(){
  private totalTimeDown = -1;
  private downTime = -1;
  public boolean onTouch(View v, MotionEvent me){
    if(me.getAction() == MotionEvent.ACTION_DOWN){
        downTime = System.getCurrentTimeInMillis();
        return true;
    }

    if(me.getAction() == MotionEvent.ACTION_UP){
        totalTimeDown = System.getCurrentTimeInMillis() - downTime;
        if(totalTimeDown > 500){
            //Finger was down long enough for "longClick"
            return true;
        }
    }
    return false;
  }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-21T18:42:22.917

```
holder.layout.setOnTouchListener(new View.OnTouchListener() {
            @Override
            public boolean onTouch(View v, MotionEvent event) {
                switch(event.getAction()) {
                    case MotionEvent.ACTION_DOWN:
                        new Handler().postDelayed(new Runnable() {
                            @Override
                            public void run() {
                                holder.layoutItem.setVisibility(View.GONE);
                                holder.layoutDelete.setVisibility(View.VISIBLE);
                            }
                        }, 1000);
                        // PRESSED
                        return true; // if you want to handle the touch event
                    case MotionEvent.ACTION_UP:
                        holder.layoutItem.setVisibility(View.VISIBLE);
                        holder.layoutDelete.setVisibility(View.GONE);
                        // RELEASED
                        return true; // if you want to handle the touch event
                }
                return false;
            }
        }); 
```

# c# - 为什么这个 ListBox XAML 无效？

> ID：14877010
> 
> 赞同：1
> 
> 时间：2013-02-14T14:27:40.420
> 
> 标签：c#, xaml, listbox, windows-phone-8

为什么 XAML 被标记为无效的`<DataTemplate>... </DataTemplate>`？该项目虽然编译正确。

我之前在另一个使用 Windows Phone 工具包 SilverlightToolkitWP" version="4.2012.6.25" targetFramework="wp80" 的项目中使用了此代码，在使用 toolkit:PerformanceProgressBar 而不是 ProgressBar 控件时没有任何问题。

在当前项目中，我使用“WPtoolkit”版本="4.2012.10.30" targetFramework="wp80"。但是当前页面上没有使用工具包控件。

```
<phone:PhoneApplicationPage
x:Class="Game.ScoreBoards"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
xmlns:adduplex="clr-namespace:AdDuplex;assembly=AdDuplex.WindowsPhone"
mc:Ignorable="d"
FontFamily="{StaticResource PhoneFontFamilyNormal}"
FontSize="{StaticResource PhoneFontSizeNormal}"
Foreground="{StaticResource PhoneForegroundBrush}"
SupportedOrientations="Portrait"  Orientation="Portrait"
shell:SystemTray.IsVisible="True"
Style="{StaticResource TransitionPageStyle}">

<!--LayoutRoot is the root grid where all page content is placed-->
<Grid x:Name="LayoutRoot">
    <Grid.Background>
        <ImageBrush Opacity="0.5" ImageSource="{Binding BestResolutionScoreImage, Source={StaticResource MultiResImageChooser}}"/>
    </Grid.Background>
    <Grid.RowDefinitions>
        <RowDefinition Height="*"/>
        <RowDefinition Height="Auto"/>
    </Grid.RowDefinitions>
    <Grid Grid.Row="0">

        <!--Pivot Control-->
        <phone:Pivot Title="ONLINE SCOREBOARDS" x:Name="pivScoreboard" SelectionChanged="pivScoreboard_SelectionChanged">                                
            <!--Pivot item very easy-->
                <phone:PivotItem Header="very easy">
                <Grid Margin="12,0,12,0">
                    <StackPanel>
                        <ProgressBar x:Name="progressBar0" IsIndeterminate="True" />
                        <ListBox x:Name="ScoreList0" Height="450" Margin="0,20,0,0">
                            <ListBox.ItemTemplate>
                                <DataTemplate>
                                    <Grid HorizontalAlignment="Stretch">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="45"/>
                                            <ColumnDefinition />
                                            <ColumnDefinition Width="210"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Margin="0,0,10,0" Text="{Binding no, StringFormat='\{0\}.'}" 
                                           Foreground="{Binding deviceid, Converter={StaticResource FontForegroundConverter}}"
                                           FontWeight="{Binding deviceid, Converter={StaticResource FontWeightConverter}}"
                                           Grid.Column="0"/>
                                        <Image Margin="0,0,10,0" Width="32" Height="32" Source="{Binding country, Converter={StaticResource CountryToFlagConverter}}" Grid.Column="1"/>
                                        <TextBlock Margin="0,0,10,0"  Text="{Binding name}"
                                            Foreground="{Binding deviceid, Converter={StaticResource FontForegroundConverter}}"
                                            FontWeight="{Binding deviceid, Converter={StaticResource FontWeightConverter}}"
                                            Grid.Column="2"/>
                                        <TextBlock Margin="0,0,10,0"  Text="{Binding score}" 
                                            Foreground="{Binding deviceid, Converter={StaticResource FontForegroundConverter}}"
                                            FontWeight="{Binding deviceid, Converter={StaticResource FontWeightConverter}}"
                                            Grid.Column="3"/>
                                    </Grid>
                                </DataTemplate>
                            </ListBox.ItemTemplate>
                        </ListBox>
                    </StackPanel>
                 </Grid>
            </phone:PivotItem>

                <!--Pivot item easy-->
                ............ 
```

# c# - 在运行时通过变量更改 TableLayoutPanel 的单元格颜色？

> ID：14877012
> 
> 赞同：2
> 
> 时间：2013-02-14T14:27:48.353
> 
> 标签：c#, tablelayoutpanel

我有一个 TableLayoutPanel 目前有多行 + 列。它由一个 for 循环填充，每次运行时都会有所不同，具体取决于 SQL 查询的输出。

```
void tblTableLayoutPanel_CellPaint(object sender, TableLayoutCellPaintEventArgs e)
    {
        if (e.Row == 2 || e.Row == 4)
        {
            Graphics g = e.Graphics;
            Rectangle r = e.CellBounds;
            g.FillRectangle(Brushes.Red, r);
        }
    } 
```

这是我目前为单个行着色的代码，但我希望能够根据 2 个变量（J 和 K）为单个单元格着色。

```
 TableLayoutPanel.Controls.Add(label, J, K); 
```

同样，这里是我如何使用 J 和 K 向 TableLayoutPanel 中的单元格添加标签的示例。是否可以重载 CellPaint 方法以允许在其中使用 J 和 K？或者如果是这样，我怎么能在运行时重新着色单元格？

我之前问过这个问题并得到了以下解决方案；

> CellPaint 是一个事件而不是方法。我建议您创建一个返回颜色画笔的 GetColor(int row,int column) 方法，然后在 CellPaint 事件中使用 e.Row 和 e.Column 调用您的方法。

我不完全确定这将如何工作，因为我正在使用的变量在主程序中，然后我不需要将这些与我的方法中的变量进行比较吗？或将它们设置在某个地方进行比较，然后再进行事件。任何人都可以为我解释清楚一点吗？或者给我一个例子？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T14:37:43.773

这是一个例子：

```
void tableLayoutPanel_CellPaint(object sender, TableLayoutCellPaintEventArgs e)
{
    Graphics g = e.Graphics;
    Rectangle r = e.CellBounds;
    g.FillRectangle(GetBrushFor(e.Row, e.Column), r);
}

private Brush GetBrushFor(int row, int column)
{
    if (row == 2 && column == 1)
        return Brushes.Red;

    // other logic
    // ...
    // return default Brush
} 
```

备注 - 您只想根据行和列索引而不是某些业务逻辑（即取决于单元格中显示的数据）分配颜色，这看起来很奇怪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T14:43:30.773

一种可能的解决方案是将 j 和 k 保存在[Control.Tag](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.tag.aspx)中，例如作为对象数组，并在单元格绘制期间从控件中获取 j 和 k 在此单元格中的内容。

# json - 获取wordpress查询结果的缩略图路径

> ID：14877015
> 
> 赞同：0
> 
> 时间：2013-02-14T14:27:52.590
> 
> 标签：json, wordpress, get, posts

我有一个基本的 ajax 响应脚本，它以 json 形式返回 worpress 帖子。

我还想另外获取缩略图路径并将其包含在 JSON 中，我相信这是一个元查询。我如何将元查询纳入 get_posts 函数。

（注意：缩略图路径将是帖子的特色图片）

我的脚本如下（它也可以）：

```
<?php 

define('WP_USE_THEMES', false);
require('../../../wp-blog-header.php');
header('Content-type: application/json'); 
echo json_encode(get_posts(array(
'posts_per_page' => 7,'post__in' => array(1,7))));

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T14:42:51.400

使用 query_posts 例如

```
 json_arr =  array();

        $args = array(
         'posts_per_page' => 7,
         'post__in' => array(1,7)

        );
    query_posts($args);

    while ( have_posts() ) { the_post();

     //add bits and bobs to json array e.g.
    $json_arr[] = $post; 

    }
echo json_encode($json_arr); 
```

您可以将所需内容添加到 json 数组中，而不是添加整个帖子。我没有对此进行测试，但这就是我将如何处理它。

这将获取缩略图的路径：

```
 $post_thumbnail_id = get_post_thumbnail_id( $post_id );
 $path  = wp_get_attachment_image_src( $post_thumbnail_id ); 
```

# jquery - ajax调用后如何从服务器接收字符串

> ID：14877016
> 
> 赞同：1
> 
> 时间：2013-02-14T14:28:00.973
> 
> 标签：jquery, asp.net, ajax

我是 ajax 新手，我发现将数据从客户端发送到服务器非常容易，反之则很难实现。

我想要的只是将一些参数发送到我的asp服务器并在回调完成时接收一个字符串作为回报。
这是我对 ajax 的呼吁：

```
$.ajax(
         { url: "Default.aspx"}, 
         { ajaxPost:"post", 
           ajaxPostValName: name, 
           ajaxPostValDate: currdate, 
           ajaxPostValFile: file, 
           ajaxPostValCell: cell, 
           ajaxPostValChannel: channel}).done(
               function ( "need string result from here") { "do my string parsing here" }); 
```

我尝试在 done func 中使用“data”var 获取数据，但我得到了整个页面。

建议？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T14:34:29.767

您只需要在您的内容中回显某些`Default.aspx`内容并以这种方式调用您的 ajax

```
$.ajax({ url: "Default.aspx"}, { ajaxPost:"post", ajaxPostValName: name, ajaxPostValDate: currdate, ajaxPostValFile: file, ajaxPostValCell: cell, ajaxPostValChannel: channel}).done(
function ( data ) { 
    //do what you want with the data variable
}); 
```

# java - Spring IP地址验证

> ID：14877019
> 
> 赞同：9
> 
> 时间：2013-02-14T14:28:07.907
> 
> 标签：java, spring, validation, ip, spring-roo

我正在寻找在我的 Spring roo 项目中验证 IP 地址的可能性。

我的实体看起来像这样

```
package com.ip.test.domain;

import javax.persistence.ManyToOne;
import javax.validation.constraints.NotNull;
import javax.validation.constraints.Size;
import org.springframework.roo.addon.javabean.RooJavaBean;
import org.springframework.roo.addon.jpa.activerecord.RooJpaActiveRecord;
import org.springframework.roo.addon.tostring.RooToString;

@RooJavaBean
@RooToString
@RooJpaActiveRecord
public class IP {

@NotNull
@Size(min = 7, max = 15)
private String ip;

@ManyToOne
private Hoster Hoster;
} 
```

使用此设置，它仅验证字符串是否包含 7 到 15 个字符，但如果它是 IP 地址则不会验证。

就像是

```
@validIpAddress
private String ip; 
```

会好的。

知道这是否可能吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-14T14:41:43.097

您可以使用带有 IP 地址正则表达式的 JSR 303 模式验证器：

```
@NotNull
@Pattern(regexp = "^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$")
private String ip; 
```

编辑：转义反斜杠

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-14T14:36:05.300

绝对有可能。您将需要编写自定义注释和实现类。没有太多的努力。有关背景，请参见此处：http: [//docs.jboss.org/hibernate/validator/5.0/reference/en-US/html_single/#validator-customconstraints](http://docs.jboss.org/hibernate/validator/5.0/reference/en-US/html_single/#validator-customconstraints)

```
@Retention(RetentionPolicy.RUNTIME)
@Target({ ElementType.METHOD, ElementType.FIELD, ElementType.ANNOTATION_TYPE })
@Documented
@Constraint(validatedBy = IpAddressValidator.class)
public @interface IpAddress
{
  String message() default "{ipAddress.invalid}";
  Class<?>[] groups() default {};
  Class<? extends Payload>[] payload() default {};
} 
```

和

```
public class IpAddressValidator implements ConstraintValidator<IpAddress, Object>
{
  @Override
  public void initialize(IpAddress constraintAnnotation)
  {
  }

  @Override
  public boolean isValid(Object value, ConstraintValidatorContext cvContext)
  {
    // logic here
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T14:36:32.813

本质上，您希望将 JSR-303 注释与自定义验证器一起使用。[在此处](http://forum.springsource.org/showthread.php?90053-Custom-validator-together-with-JSR-303-annotation)查看完整的工作示例。

# mysql - 根据第一个表列加入第二个表

> ID：14877022
> 
> 赞同：0
> 
> 时间：2013-02-14T14:28:13.507
> 
> 标签：mysql

嗨，我想将我的`registry_ug`表与基于`registry_ug.type`....的第二个表连接起来。我想避免不必要的连接。

这是我的代码

```
 SELECT  ug.id , tbl.id FROM registry_ug ug
      JOIN    CASE ug.type 
             WHEN 1   THEN  users 
             WHEN 2   THEN  group_software 
       END
       AS  tbl
       ON 
       ug.id = tbl.id 

     WHERE ug.id = $uid 
```

对我来说似乎没问题，但我收到了这个错误

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'CASE ug.type WHEN 1 THEN users WHEN 2 THEN g' at line 2

SELECT ug.id , tbl.id FROM registry_ug ug JOIN CASE ug.type WHEN 1 THEN users WHEN 2 THEN group_software END AS tbl ON ug.id = tbl.id WHERE ug.id = 55 
```

**而且我不想将它加入所有可能的第二张桌子**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T14:30:16.180

你不能这样做。你不能以`CASE`这种方式使用表达式。试试这个：

```
SELECT  
  ug.id, 
  COALESCE(u.id, g.id)
FROM registry_ug AS ug
LEFT JOIN users          AS u ON ug.id = u.id AND ug.type = 1
LEFT JOIN group_software AS g ON ug.id = g.id AND ug.type = 2
WHERE ug.id = $uid 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T14:31:02.293

试试这个，

```
SELECT  ug.id , 
        CASE WHEN ug.type = 1 
            THEN b.id 
            ELSE c.id
        END newID
FROM    registry_ug ug
        LEFT JOIN   users b
            ON ug.id = b.id 
        LEFT JOIN   group_software c
            ON ug.id = c.id 
WHERE   ug.id = $uid 
```

*无法测试，未添加样本数据*

# iphone - 导航栏在 popviewcontroller 上消失

> ID：14877024
> 
> 赞同：7
> 
> 时间：2013-02-14T14:28:20.353
> 
> 标签：iphone, ios, objective-c, xcode, ipad

在我的一个视图中，当按下按钮时，我调用另一个视图，即`SplitViewController`. 如果这`SplitViewController`是通过这些按钮之一调用的，我有特殊的对象要添加到视图中。大多只是导航栏项目，如取消按钮。此视图可以在其他地方访问，并且不需要这些项目，这就是存在特殊条件的原因。

但是，当用户完成并且我弹`ViewController`回选择的上一个屏幕时，导航栏会在该屏幕上消失。我没有将其设置为隐藏，也没有对导航栏做任何奇怪的事情。只需添加`SplitViewController`然后弹出。

一些代码..

```
//declare the split screen VC
SplitScreenViewController *split = [[SplitScreenViewController alloc] init];

//set the flag that this VC is coming from a button, so we need the extra nav bar items
[split setIsFromButton:YES];
[self.navigationController pushViewController:split animated:YES]; 
```

现在回电很简单......

```
- (void)cancelSelectionBtnClicked
{
     [self.navigationController popViewControllerAnimated:YES];
} 
```

当视图返回时，导航栏消失了。

有任何想法吗？

*编辑*应该注意这完全相同的事情在其他地方以相同的方式完成（据我所知）并且导航栏在返回时可见。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-14T15:56:11.063

在您的 ViewController 中`viewWillAppear`，您可以再次使您`navigationBar`可见。

```
- (void)viewWillAppear:(BOOL)animated
{
    [self.navigationController setNavigationBarHidden:NO];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T14:47:46.207

我在 UISplitViewController 中看到了各种奇怪的导航栏行为，在少数情况下，这是因为控制器没有设置为窗口的 rootViewController，而不是像您设置的导航控制器内部。

# java - 将 Rails 应用程序迁移/重写到 Java

> ID：14877029
> 
> 赞同：4
> 
> 时间：2013-02-14T14:28:29.580
> 
> 标签：java, ruby-on-rails

甚至没有试图在 Rails/Ruby 和 Java 人之间发起一场激烈的战争。我不想讨论为什么，但我想用 Java 重写/迁移我现有的 rails 应用程序。

以下是我需要寻找替代品的东西：

1.  PostgreSQL。我可以使用任何数据库，但在 Java 中具有与 ActiveRecord 相当的功能 ORM。
2.  回复。用于 Rails 应用程序中的后台处理。我需要在 Java 中找到类似的解决方案。
3.  MVC。虽然严格来说不如 Rails MVC 优雅，但在 Java 中更接近它的任何东西都可以。

对此有经验的看法吗？

编辑：我想用 Java 语言开发（所以这排除了 Scala、Groovy、JRuby 和类似语言）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T14:52:43.583

ORM：Hibernate 几乎是标准。不过，任何实现 JPA 的都可以。

后台处理：通常由您的应用服务器（例如 JBoss）提供。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T23:07:24.507

在切换到 Ruby/RoR 之前，我用 Java 开发 Web 应用程序大约 8 年。我推荐的一组标准库是：

1.  春季MVC
2.  休眠 ORM
3.  也许 Quartz 作为 Sidekiq 的等价物
4.  Spring ROO 将它们捆绑在一起并引导事物
5.  我会推荐freemarker 或velocity 作为JSP 的替代品。

但无论你选择什么，你都会后悔的：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-26T06:58:45.083

JavaLite 堆栈是 Java 中最接近 Rails 的东西，带有 ActiveWeb（Web 部件 - 控制器、测试、动态编译、自定义标签等）。ActiveJDBC - ActiveRecord 实现，用于迁移的 DB-Migrator：[http](http://javalite.io/database_migrations) ://javalite.io/database_migrations，HornetNest（基于 JMS 的命令模式替换 Sidekiq）等等。一个包中用于现代 Java Web 开发的整个堆栈。

查看：http: [//javalite.io](http://javalite.io)

# c# - 使用 Javascript，您如何确定 ASP.Net 页面上的任何控件是否已更改其值？

> ID：14877033
> 
> 赞同：0
> 
> 时间：2013-02-14T14:28:38.943
> 
> 标签：c#, javascript, asp.net, c#-4.0, client-side-scripting

我有一个包含 FormView 的网页。如果用户单击编辑按钮，它将更改为编辑模式。然后，我有一个 Javascript`onbeforeunload`函数，如果用户尝试导航到网站中的不同页面，它会通过确认对话框捕获用户。它说'您处于编辑模式。离开这个页面？'。但是，我只希望在用户对 FormView 的任何控件进行了至少一次更改时显示该确认。FormView中有很多控件。提示用户似乎很愚蠢，即使他或她什么也没改变。

那么，在 Javascript 中，有没有办法确定是否更改了任何控件，或者我必须为页面上的每个 TextBox、CheckBox、RadioButton 和 DropDownList 实现客户端事件处理程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T14:31:41.437

[Dirty Forms](http://mal.co.nz/code/jquery-dirty-forms/)，一个基于 Jquery 的项目可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T14:37:55.390

可能重复？查看[这个问题的答案](https://stackoverflow.com/questions/10760847/entire-form-onchange)。在 jQuery 中，您可以监听表单的更改事件，因为对单个字段的更改会冒泡。

# php - 浏览器版本匹配 - PHP 5.1.6 中的正则表达式中断

> ID：14877036
> 
> 赞同：2
> 
> 时间：2013-02-14T14:28:53.843
> 
> 标签：php, regex, preg-match-all

[我正在使用脚本来检测浏览器及其在php.net上的](http://php.net)[get_browser](http://php.net/manual/ro/function.get-browser.php)页面上多次引用的版本。

包含脚本的文件保存为 UTF-8，实际上它工作正常'：

```
// relevant parts only where $ub stores the browser name like "Safari"
$userAgent = $_SERVER['HTTP_USER_AGENT'];
$known = array('Version', $ub, 'other');
$pattern = '#(?<browser>' . join('|', $known) . ')[/ ]+(?<version>[0-9.|a-zA-Z.]*)#';
preg_match_all($pattern, $userAgent, $matches); 
```

现在我们在使用 PHP 5.1.6 的服务器上运行一个站点。不幸的是，它破坏了正则表达式并显示此警告：

> PHP 警告：preg_match_all() [function.preg-match-all]: 编译失败： (?< 在第 48 行 /file.php 中的偏移量 3 后出现无法识别的字符

必须如何更新模式才能在 PHP 5.1.6 中正常工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T14:34:12.710

您尝试使用的语法直到 PHP 5.2.2 才引入。`(?<name>pattern)`. 您应该可以改用它`(?P<name>pattern)`。

# css - 创建一个复杂的 CSS 形状（说话泡泡）

> ID：14877037
> 
> 赞同：4
> 
> 时间：2013-02-14T14:28:56.840
> 
> 标签：css, border, shape, css-shapes

在附件链接完整 CSS 中看到的创建形状的最佳选择或方法是什么，这可能吗？

我使用 CSS 平行四边形进行了研究和测试，例如，但还没有取得任何好的成功。

看这里的形状 -->> [http://tinypic.com/r/352ge3b/6](http://tinypic.com/r/352ge3b/6)

![复杂的语音泡沫](../Images/c781978718bc7b1388e38d5c81ee8078.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-14T19:28:00.563

我有一件事情，它可以只用一个元素来完成 - 它可以完成，我只是不认为这正是这样做的最佳解决方案。

# [***演示***](http://codepen.io/thebabydino/pen/hzcwl)

**HTML**：

```
<div class='speech-bubble'>Hello!</div> 
```

**CSS**：

```
.speech-bubble {
  position: relative;
  margin: .5em auto;
  padding: 1em;
  width: 10em; height: 4em;
  border-radius: .25em;
  transform: rotate(-4deg) rotateY(15deg);
  background: #629bdd;
  font: 2em/4 Century Gothic, Verdana, sans-serif;
  text-align: center;
}
.speech-bubble:before, .speech-bubble:after {
  position: absolute;
  z-index: -1;
  content: '';
}
.speech-bubble:after {
  top: 0; right: 0; bottom: 0; left: 0;
  border-radius: inherit;
  transform: rotate(2deg) translate(.35em, -.15em) scale(1.02);
  background: #f4fbfe;
}
.speech-bubble:before {
  border: solid 0 transparent;
  border-right: solid 3.5em #f4fbfe;
  border-bottom: solid .25em #629bdd;
  bottom: .25em; left: 1.25em;
  width: 0; height: 1em;
  transform: rotate(45deg) skewX(75deg);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T14:59:42.083

不完全是，你在找什么，但我在玩 CSS3 的透视和旋转并做了这个：

```
body {
    color: #FFF;
    font-family: sans-serif;
}

.outer {
    position: relative;
    height: 120px;
    width: 120px;
    margin: 50px;
    padding:10px;
    perspective:150;
    -webkit-perspective:150;
}

.inner {
    border-radius: 15px;
    padding:50px;
    position: absolute;
    background-color: #80BFFF;
    transform: rotateY(10deg);
    -webkit-transform: rotateY(10deg);
    box-shadow: -4px -4px 0px #3399FF;
}

.inner:after {
    content: ' ';
    position: absolute;
    width: 0;
    height: 0;
    left: 20px;
    top: 115px;
    border: 15px solid;
    border-color: #80BFFF transparent transparent #80BFFF;
} 
```

那是我的 HTML 内容

```
<div class="outer">
    <div class="inner">Yay!</div>
</div> 
```

# facebook-graph-api - 有什么方法可以按国家/地区吸引参与用户

> ID：14877039
> 
> 赞同：1
> 
> 时间：2013-02-14T14:29:12.107
> 
> 标签：facebook-graph-api, facebook-fql, facebook-insights

您好，我正在使用见解 api。但是，每当我希望通过 参与用户时`/insights/page_engaged_users`，这只会给我我所在国家/地区的结果。由于我正在管理一个全球页面，有没有办法按国家/地区获取其他人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-12T12:19:51.083

不，API 中没有办法。任何如何根据国家/地区获得以下结果。

1.  展示次数
2.  故事添加
3.  地方签到
4.  讲故事的人
5.  粉丝

# autohotkey - AutoHotkey 标签导致 Windows Server 2008 上的内存泄漏崩溃

> ID：14877040
> 
> 赞同：0
> 
> 时间：2013-02-14T14:29:14.893
> 
> 标签：autohotkey

以下代码在 Windows Vista 和 Windows 7 上运行良好，但是当我尝试在 Windows Server 2008 R2 上运行它时，它会不断在我的系统托盘中生成越来越多的相同脚本实例，直到 AutoHotKey 最终锁定我的整个系统。似乎 AutoHotKey 的“标签”功能是罪魁祸首。有谁知道解决方法？

```
phpDoc:
SendInput <{?}php{Enter}{Enter}{?}>{Enter}
SendInput {Up 2}
return

html5:
SendInput <{!}doctype html>{enter}
SendInput <html>{enter}
SendInput <head>{enter}
SendInput <title></title>{enter}
SendInput <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">{enter}
SendInput <meta http-equiv="Pragma" content="no-cache">{enter}
SendInput <meta http-equiv="Cache-Control" content="no-cache">{enter}
SendInput <meta name="Expires" content="Mon, 01 Jan 2000 00:00:01 GMT ">{enter}
SendInput <link rel="stylesheet" type="text/css" href="/styles.css">{enter}
SendInput </head>{enter}
SendInput <body>{enter}
SendInput </body>{enter}
SendInput </html>{enter}
SendInput {up 2}
SendInput {end}
return

showMainMenus()
{
    Menu, MySubMenu, add, &1 - PHP, phpDoc
    Menu, MySubMenu, add, &2 - HTML 5, html5
    Menu, MyMenu, add, &1 - Boilerplate Text, :MySubMenu
}

;;;; KEY BINDINGS

!/::
showMainMenus()
return 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T14:31:37.640

使用[#SingleInstance](http://www.autohotkey.com/docs/commands/_SingleInstance.htm)，忽略

将使旧实例保持运行并阻止启动同一脚本的新实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T16:03:01.150

我重写了一点。据我所知，您首先定义菜单结构，然后显示菜单。另外由于`Return`之前没有`phpDoc:`，这部分脚本在启动时立即执行....

```
#SingleInstance, Ignore

;;;; DEFINE MENUS
Menu, MySubMenu, add, &1 - PHP, phpDoc
Menu, MySubMenu, add, &2 - HTML 5, html5

;;;; LAUNCH MENU
!/::Menu, MySubMenu, Show

return ; To prevent phpDoc from executing on startup

phpDoc:
SendInput <{?}php{Enter}{Enter}{?}>{Enter}
SendInput {Up 2}
Return

html5:
SendInput <{!}doctype html>{enter}
SendInput <html>{enter}
SendInput <head>{enter}
SendInput <title></title>{enter}
SendInput <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">{enter}
SendInput <meta http-equiv="Pragma" content="no-cache">{enter}
SendInput <meta http-equiv="Cache-Control" content="no-cache">{enter}
SendInput <meta name="Expires" content="Mon, 01 Jan 2000 00:00:01 GMT ">{enter}
SendInput <link rel="stylesheet" type="text/css" href="/styles.css">{enter}
SendInput </head>{enter}
SendInput <body>{enter}
SendInput </body>{enter}
SendInput </html>{enter}
SendInput {up 2}
SendInput {end}
return 
```

# local-storage - 将多次点击记录为数组

> ID：14877041
> 
> 赞同：0
> 
> 时间：2013-02-14T14:29:22.007
> 
> 标签：local-storage

我目前正在记录一个 li 的点击并用 localStorage 存储它的内容。

我有一个带有多项选择答案的测验问题，该问题当前存储他们选择的答案，但如果他们改变主意，则会用他们最后点击的任何答案覆盖它。

这对于单选题非常有效，但对于允许多个答案的问题，这将不起作用。

我需要做的是能够记录所有点击并将它们存储为数组。

这是我现有的代码：

```
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<title>test</title>

<style type="text/css">

body{
    text-align: center;
}

#questions{
    margin: 0 auto;
    width: 802px;
    height: 602px;
}

/*look for any class that has the word slide in it*/
[class*="slide"]{
    padding: 20px;
    background: #666;
    width: 760px;
    height: 560px;
    border: 1px dashed #333;
}
[class*="slide"]:nth-child(odd){
    background: #999;
}

b{
    position: absolute;
    top: 10px;
}

</style>

</head>

<body>
    <div id="questions">
        <div class="slide1">
            <h1>What is h2o?</h1>
            <ul>
                <li>A Pencil</li>
                <li>Liquid water</li>
                <li>A mobile phone network</li>
                <li>Paper</li>
            </ul>
            <p>check</p>
        </div>
        <div class="slide2">
            <h1>What is 2 + 2?</h1>
            <ul>
                <li>1</li>
                <li>2</li>
                <li>3</li>
                <li>4</li>
            </ul>
            <p>check</p>
        </div>
        <div class="slide3">
            <h1>What is a whale?</h1>
            <ul>
                <li>A mammal</li>
                <li>A fish</li>
                <li>A bird</li>
                <li>A country</li>
            </ul>
        </div>
        <div class="slide4">
            <h1>What phone do you prefer?</h1>
        <ul>
                <li>iPhone 4s</li>
                <li>iPhone 5</li>
            </ul>
        </div>
        <div class="slide5">
            <h1>What is 5 + 5?</h1>
            <ul>
                <li>10</li>
                <li>7</li>
            </ul>
        </div>
        <div class="slide6">
            <h1>What is the capital city of England?</h1>
            <ul>
                <li>London</li>
                <li>Staines</li>
                <li>Bognor Regis</li>
                <li>Luton</li>
            </ul>
        </div>
        <div class="slide7">
            <h1>What colour is a red phone box?</h1>
            <ul>
                <li>Blue</li>
                <li>Red</li>
                <li>Pink</li>
                <li>Mauve</li>
            </ul>
        </div>
    </div>
    <b></b>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

<script type="text/javascript">

$(document).ready(function() {

    /*
    //
    //  quiz storer and answer checker
    //  Author: Tjobbe Andrews
    //  v1.0, 13/02/2013
    //  - keeps a record in localStorage of the answers you chose, then checks them on an ad hoc basis
    //
    */

    //on clicking the answers in the li's..
    $("li").click(function(){
        //..create a variable called answer based on the content of that li..
        var answer = $(this).html();
        //..and create a variable called question based on the class of the parent div
        var question = $(this).parent().parent().attr("class");
        //then store the key value pair of question and answer
        localStorage.setItem(question, answer);
        //just makes sure that it's writing to the LS db
        $("b").html(localStorage.getItem(question));
    });

    //click the p tag to check what we've got stored for this div - ad hoc
    $('p').click(function(){
        var slideNumber = $(this).closest('div').attr('class');
        var answer = localStorage.getItem(slideNumber);
        if(answer !== "Liquid water"){
            alert('wrong');
        }
        else if(answer == "Liquid water"){
            alert("right");
        }
    });

});
</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T23:11:52.223

您不能将数组按原样存储在 localStorage 中，但您可以轻松地将数组转换为 JSON 字符串并存储它。如果您的浏览器支持它，您可以使用 JSON.stringify 和 JSON.parse。否则，请下载 JSON 库。

# spring - 找不到类 [org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean

> ID：14877042
> 
> 赞同：-1
> 
> 时间：2013-02-14T14:29:22.223
> 
> 标签：spring, hibernate

我正在使用*eclipse*和*maven开发**spring mvc3* + *hibernate*应用程序。当部署在独立的*tomcat 7*上时，maven生成的war文件工作正常，但是当我在eclipse中嵌入的tomcat上运行应用程序时，它给了我以下错误：

 ***```
[ERROR] [main 07:30:30] (ContextLoader.java:initWebApplicationContext:307) Context initialization failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'helloController': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.mkyong.common.services.ProductServices com.mkyong.common.controller.HelloController.productService; nested exception is org.springframework.beans.factory.CannotLoadBeanClassException: **Cannot find class [org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean] for bean with** name 'sessionFactory' defined in ServletContext resource [/WEB-INF/mvc-dispatcher-servlet.xml]; nested exception is java.lang.ClassNotFoundException: org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean
at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:287)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:609)
at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918)
at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:469)
at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:383)
at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:283)
at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:3843)
at org.apache.catalina.core.StandardContext.start(StandardContext.java:4342)
at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)
at org.apache.catalina.core.StandardHost.start(StandardHost.java:719)
at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)
at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:443)
at org.apache.catalina.core.StandardService.start(StandardService.java:516)
at org.apache.catalina.core.StandardServer.start(StandardServer.java:710)
at org.apache.catalina.startup.Catalina.start(Catalina.java:578)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:288)
at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:413) 
```

我的 POM 文件如下：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>com.mkyong.common</groupId>
<artifactId>SpringMVC</artifactId>
<packaging>war</packaging>
<version>1.0-SNAPSHOT</version>
<name>SpringMVC Maven Webapp</name>
<url>http://maven.apache.org</url>
<properties>
    <java-version>1.6</java-version>
    <spring.version>3.1.2.RELEASE</spring.version>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
</properties>
<dependencies>
    <!--<dependency>
        <groupId>javax.servlet.jsp</groupId>
        <artifactId>jsp-api</artifactId>
        <version>2.1</version>
        <scope>provided</scope>
    </dependency>
    --><dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>jstl</artifactId>
        <version>1.2</version>
    </dependency>
    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.14</version>
        <type>jar</type>
        <scope>compile</scope>
    </dependency>

    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-core</artifactId>
        <version>3.6.10.Final</version>
    </dependency>

    <!-- Spring 3 dependencies -->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-core</artifactId>
        <version>${spring.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-web</artifactId>
        <version>${spring.version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-webmvc</artifactId>
        <version>${spring.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>${spring.version}</version>
    </dependency>
    <dependency>
  <groupId>org.springframework</groupId>
  <artifactId>spring-jdbc</artifactId>
  <version>${spring.version}</version>
</dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-tx</artifactId>
        <version>${spring.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-orm</artifactId>
        <version>${spring.version}</version>
    </dependency>
    <!-- Spring Security -->
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-core</artifactId>
        <version>${spring.version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-web</artifactId>
        <version>${spring.version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-config</artifactId>
        <version>${spring.version}</version>
    </dependency>
    <!--  Sitemesh dependency -->
    <dependency>
        <groupId>opensymphony</groupId>
        <artifactId>sitemesh</artifactId>
        <version>2.4.2</version>
    </dependency>
    <!-- CGLIB, only required and used for @Configuration usage -->
    <dependency>
        <groupId>cglib</groupId>
        <artifactId>cglib-nodep</artifactId>
        <version>2.2</version>
    </dependency>
    <!-- @Inject -->
    <dependency>
        <groupId>javax.inject</groupId>
        <artifactId>javax.inject</artifactId>
        <version>1</version>
    </dependency>
    <dependency>
        <groupId>commons-dbcp</groupId>
        <artifactId>commons-dbcp</artifactId>
        <version>1.4</version>
    </dependency>
    <dependency>
        <groupId>javassist</groupId>
        <artifactId>javassist</artifactId>
        <version>3.12.1.GA</version>
    </dependency>
    <dependency>
        <groupId>mysql</groupId>
        <artifactId>mysql-connector-java</artifactId>
        <version>5.1.21</version>
    </dependency>
</dependencies>

<build>
    <finalName>SpringMVC</finalName>
    <plugins>
        <plugin>
            <artifactId>maven-compiler-plugin</artifactId>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>
        </plugin>
        <!--<plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>tomcat-maven-plugin</artifactId>
            <version>1.1</version>
            <configuration>
                <port>8282</port>
            </configuration>
        </plugin>
    --></plugins>
</build> 
```

我得到的错误是**找不到类 [org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean**

我的路径中有*spring orm 3.1.2* jar 文件，然后我也收到此错误。请帮我解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T18:59:18.940

我可以通过在“maven compile”、“maven eclipse:eclipse”和 maven war:war 之前使用 maven 命令“maven clean”来解决这个问题。

所以现在应用程序在 Eclipse 中嵌入的 tomcat 上运行良好。早些时候，当我部署由 maven 创建的战争时，我的应用程序仅在独立的 tomcat 上运行。***

# jruby - JRuby java.lang.ClassCastException

> ID：14877046
> 
> 赞同：1
> 
> 时间：2013-02-14T14:29:40.630
> 
> 标签：jruby, invokedynamic

[我使用了来自http://www.javaworld.com/javaworld/jw-07-2006/jw-0717-ruby.html](http://www.javaworld.com/javaworld/jw-07-2006/jw-0717-ruby.html)的一个小 Jruby 脚本来测试 invokedynamic：

```
class ADuck
    def quack()
        puts "quack A";
    end
end

class BDuck
    def quack()
        puts "quack B";
    end
end

def quack_it(duck)
    duck.quack
end

a = ADuck.new
b = BDuck.new
quack_it(a)
quack_it(b) 
```

但是当我用 JRuby 编译到 Java 类文件然后尝试执行它时，我得到以下异常：

```
Java HotSpot(TM) 64-Bit Server VM warning: Use -XX:+UnlockDiagnosticVMOptions be
fore EnableInvokeDynamic flag
Exception in thread "main" java.lang.ClassCastException: java.lang.Object cannot
 be cast to java.lang.invoke.SwitchPoint
        at     org.jruby.runtime.invokedynamic.InvokeDynamicSupport.constantFallback
(InvokeDynamicSupport.java:659)
        at duck_typing.__file__(duck_typing.rb:22)
        at duck_typing.load(duck_typing.rb)
        at duck_typing.main(duck_typing.rb) 
```

我的系统：Windows 7 64 位上的 JDK 1.7.0_09 64 位，JRuby 1.7.2

使用的命令行：

```
jruby -Xcompile.invokedynamic=true -S jrubyc duck_typing.rb
java -XX:+UnlockExperimentalVMOptions -XX:+EnableInvokeDynamic -cp .;jruby-complete-1.7.2.jar duck_typing 
```

不久前，我在 linux 机器上和 Windows jdk8 上测试了它，结果相同。使用 JDK8 它可以工作，但是在另一个项目中使用类文件时给我带来了问题。

有没有人知道如何解决它？如何在 Java 7 上将 JRuby 与 indy 一起使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T17:31:31.087

> 除了 JRuby 便利参数 --server 之外，所有 JVM 运行时参数都使用 -J 选项，后跟特定的 JVM 设置。例如：
> 
> 堆空间设置：jruby -JX
> 
> JRuby 运行时设置：jruby -JD
> 
> 以下部分中描述的所有设置都是 JVM 设置。

[https://github.com/jruby/jruby/wiki/PerformanceTuning](https://github.com/jruby/jruby/wiki/PerformanceTuning)

试试这个

```
jruby -J-Xcompile.invokedynamic=true -S jrubyc duck_typing.rb 
```

# php - 了解 memory_get_usage() 和 pmap

> ID：14877054
> 
> 赞同：1
> 
> 时间：2013-02-14T14:29:57.770
> 
> 标签：php, pmap

我试图了解一些 php 进程的内存使用情况。我试过同时使用`get_memory_usage()`和`pmap`，但结果似乎相差了大约一个数量级。我已经尝试过`memory_get_usage()`和`memory_get_usage(true)`，以及`memory_get_peak_usage(true)`，但即使使用`memory_get_peak_usage(true)`（所有三个品种中最大的一个），通过 pmap 报告的内容仍然很大。

更具体地说，`memory_get_peak_usage(true)`在我的 php 脚本中调用每一分钟会返回 1.75MB 到 3.5MB 之间的值，而典型的结果`pmap -d PID`如下：

```
...

b7839000       4 r---- 0000000000008000 0ca:00060 libcrypt-2.11.1.so
b783a000       4 rw--- 0000000000009000 0ca:00060 libcrypt-2.11.1.so
b783b000     156 rw--- 0000000000000000 000:00000   [ anon ]
b7864000       8 rw--- 0000000000000000 000:00000   [ anon ]
b7867000      12 r-x-- 0000000000000000 0ca:00060 libgpg-error.so.0.4.0
b786a000       4 r---- 0000000000002000 0ca:00060 libgpg-error.so.0.4.0
b786b000       4 rw--- 0000000000003000 0ca:00060 libgpg-error.so.0.4.0
b786c000       4 r---- 0000000000000000 000:00000   [ anon ]
b786d000      16 rw--- 0000000000000000 000:00000   [ anon ]
b7871000     108 r-x-- 0000000000000000 0ca:00060 ld-2.11.1.so
b788c000       4 r---- 000000000001a000 0ca:00060 ld-2.11.1.so
b788d000       4 rw--- 000000000001b000 0ca:00060 ld-2.11.1.so
bffc7000     136 rw--- 0000000000000000 000:00000   [ stack ]
f57fe000       4 r-x-- 0000000000000000 000:00000   [ anon ]
mapped: 32740K    writeable/private: 13116K    shared: 28K 
```

如果我理解正确，可写/私有数字是最相关的数字，因为它是进程专用的内存。近 13MB 与 .com 报告的数量相差甚远`memory_get_peak_usage(true)`。有人可以解释差异吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T14:32:46.940

我的理解是，这`memory_get_peak_usage()`将返回脚本使用的内存量。所以这还不包括 PHP 的开销。

> 返回分配给 PHP 脚本的内存峰值（以字节为单位）。

您可以通过编译更少的扩展来减少 PHP 使用的内存。

PHP 本身是一个大型应用程序，尤其是带有默认扩展的应用程序。我们（作为 php 开发人员）可以编写简单的代码，`simplexml_load_string()`然后观看魔术的发生，但支持这种魔术的代码正在内存中的某个地方运行。查看 的输出`phpinfo()`将显示安装了多少扩展。PHP 内部包含将您的 PHP 转换为操作码的代码，然后是执行这些操作码的代码。PHP 的每个实例在执行时都会产生开销。

这种内存使用显然不是微不足道的，但可以预期。如果您必须编写所有代码来处理传入的 GET/POST/FILES 管理 XML、文件和流魔术等。内存使用量会很快增加。

因此，一种常见的性能技术是删除所有不需要的扩展来缩小可执行文件的大小。对于内存受限的服务器（大多数已加载的服务器），删除一些扩展并将内存使用量从 9 兆降至 7 兆会导致更多 apache 工作人员运行。

这种开销不共享，因为每次执行实际上都是 PHP 执行的单独副本。使用线程安全构建可以使用替代方案，但并非所有 PHP 扩展都是线程安全的。

**删除扩展** 查看您正在使用的功能。`mysqli_*`? `xml_*`? 等等。还看看 PHP 是如何构建的，这是我的配置行：

`Configure Command => './configure' '--with-apxs2=/usr/local/apache2/bin/apxs' '--with-mysql=mysqlnd' '--with-gd' '--enable-soap' '--with-libxml-dir=/usr/lib/' '--with-mysql-sock=/tmp' '--with-tidy' '--with-jpeg-dir=/usr/lib/' '--with-xsl' '--with-curl' '--with-zlib' '--enable-gd-native-ttf' '--with-openssl' '--with-mcrypt' '--with-pdo-mysql=mysqlnd' '--with-mysqli=mysqlnd' '--with-bz2' '--enable-bcmath'`

如果我要减少内存，我会从构建 PHP 开始`./configure --disable-all`（删除默认扩展），然后显式添加我新使用的扩展。我不再使用`libxml`我的代码，`soap`所以我也不能放弃这些位。我可以将我的`tidy`工作外包给齿轮工和命令行，所以我也会把它拉出来。然后运行我的代码（在这里进行单元测试会很棒）并查看发生了什么问题。使用所需的扩展重新构建 PHP，冲洗并重复。显然不要在生产中这样做，否则你将有一个[Bad Time](http://memegenerator.net/instance/34847009)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T14:32:29.667

字节与位是 10 的一个因素。因此 1.3 MBytes = 13MBits

# colors - 使用 Libpng 创建 2 位颜色深度的 PNG 图像

> ID：14877055
> 
> 赞同：0
> 
> 时间：2013-02-14T14:30:04.327
> 
> 标签：colors, depth, libpng

我想使用 Libpng 库生成 1 位（2 种颜色）或 2 位（4 种颜色）深度的 PNG 图像。

有谁知道怎么做？我已经测试了示例，它们似乎都适用于 8 位色深？

我知道 png_set_IHDR 但在我测试的示例中，当我将 png_set_IHDR 中的深度参数从 8 更改为 2 或 1 时，我的程序会绘制一个 2 或 4 的像素。我认为，这是由于使用 png_malloc 函数创建的内存分配。

在我尝试修改的示例中（[http://www.lemoda.net/c/write-png/），png_malloc](http://www.lemoda.net/c/write-png/)函数使用 sizeof uint8_t 分配图像的所有像素。

```
png_malloc (png_ptr, sizeof (uint8_t) * bitmap->width * pixel_size); 
```

你能告诉我如何分配 1bit 或 2bits 像素吗？

谢谢Jo2s

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-22T02:30:42.307

**在 png_set_IHDR 中，bit_depth 参数设置所有**颜色分量的位深度。与 PNG_COLOR_TYPE_RGB 一起，您最终会得到一位用于红色分量、一位用于绿色和一位用于蓝色。

您应该使用 PNG_COLOR_TYPE_PALETTE 调用 png_set_IHDR，然后如果 bit_depth 为 1，则您必须有一个具有两种颜色（0 和 1）的调色板，如果 bit_depth 为 2，则必须有一个具有四种颜色（0 到 3）的调色板。

# ssl - 使用 PowerShell 创建 IIS7 Web 应用程序，并将 Require SSL 设置为“Require”

> ID：14877060
> 
> 赞同：8
> 
> 时间：2013-02-14T14:30:25.543
> 
> 标签：ssl, iis-7, powershell-2.0, appcmd

我正在使用 PowerShell 的 cmdlet 创建一个 IIS 网站[`New-WebSite`](http://technet.microsoft.com/en-us/library/ee790605.aspx)，并在其中创建一个使用[`New-WebApplication`](http://technet.microsoft.com/en-us/library/ee807831.aspx).

Web 应用程序的 SSL 设置需要设置为*Require SSL；要求*如下图。

![IIS SSL 设置](../Images/26c689d9c6acd83997d7c9a4ca2a74f8.png)

为了保持一致性，我想仅使用 PowerShell cmdlet 来执行此操作。

*要求 SSL*设置很简单；您只需将`-Ssl`参数添加到`New-Website`.

但是，我们发现设置*Require*选项的唯一方法是使用[`Appcmd.exe`](http://technet.microsoft.com/en-us/library/cc772200%28v=ws.10%29.aspx)：

```
& $env:SystemRoot\System32\inetsrv\Appcmd.exe `
    set config "$WebSiteName/$VirtualDirName" `
    /section:access `
    /sslFlags:"SslRequireCert" `
    /commit:APPHOST 
```

有 PowerShell 替代品吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T11:23:48.490

我必须将***ssl***添加到值中：

> Set-WebConfiguration -Location "$WebSiteName/$WebApplicationName" -Value `-Filter 'system.webserver/security/access'` " **Ssl** , SslRequireCert"

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T16:29:05.997

找到解决方案，使用`Set-WebConfiguration`：

```
Set-WebConfiguration -Location "$WebSiteName/$WebApplicationName" `
    -Filter 'system.webserver/security/access' `
    -Value "SslRequireCert" 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-03-26T07:00:53.293

我使用了这种方法：

```
Set-WebConfigurationProperty -PSPath "machine/webroot/apphost" `
     -location "$mySiteName" -filter "system.webserver/security/access" `
     -name "sslflags" -value "Ssl,SslNegotiateCert,SslRequireCert" 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-04-10T16:05:56.410

如果您收到错误“没有为路径 IIS:\SslBindings 中的对象定义配置”，则需要设置 PsPath 参数

-PSPath IIS:\站点

# wikipedia-api - 查询维基百科软件信息框以检索当前版本？

> ID：14877063
> 
> 赞同：0
> 
> 时间：2013-02-14T14:30:38.520
> 
> 标签：wikipedia-api

我想创建一个脚本来为我提供软件列表中每个软件的当前版本。维基百科似乎在维护这些信息方面做得很好，所以我试图弄清楚如何查询他们的 API。例如，我似乎可以通过调用 API 来获取当前信息：

```
http://en.wikipedia.org/w/api.php?action=query&titles=QuickTime&prop=revisions&rvprop=content 
```

这为我提供了 QuickTime 页面的信息，但在信息框部分，我找不到“稳定版本”字段。

我错过了什么吗？有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T15:28:50.513

如果您查看您所指的维基百科文章，您会注意到要更改版本，您应该单击版本号附近的小“编辑”链接。

这将带您到页面[Template:Latest stable software release/QuickTime](http://en.wikipedia.org/wiki/Template%3aLatest_stable_software_release/QuickTime)，它实际上包含有关当前版本的信息。

这也在信息框中显示为`| frequently_updated = Yes`。

# sas - 将非顺序变量名称重命名为 sas 中的顺序名称

> ID：14877067
> 
> 赞同：0
> 
> 时间：2013-02-14T14:30:50.920
> 
> 标签：sas

我正在使用调查数据，其中我们数据库中的变量名称是描述性的，而不是按顺序编号的。它们在数据库中是连续的（从左到右移动）。我想在我的程序中使用带编号的变量，但我试图以编程方式重命名它们而不必手动写出*每个*更改（总共有 87 个变量），但没有成功。

我曾尝试使用`array`，但这并没有奏效，因为它们没有按顺序命名，也没有共同的结构（没有共同的前缀或后缀）。

示例数据如下：

* * *

```
data svy;
  input id relationship outburst checkwork goodideas ;
cards;
101 3 4 5 6
102 4 5 6 6
103 1 1 8 1
104 2 3 2 4
;
run;

*****  does not work  ;
data svy_1; set svy;
rename relationship--goodideas = var01--var04;
run;
quit; 
```

* * *

上述代码在日志中返回以下错误：

```
ERROR: Missing numeric suffix on a numbered variable list (relationship-goodideas). 
```

我想将变量重命名为：var01、var02 等...

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T15:39:45.813

一些东西：

您的数据步骤 #2 不正确 - 它没有 set 语句。此外，它不需要“退出” - 退出仅适用于通常是“编程环境”的某些 PROC，例如 PROC SQL、PROC FORMAT、PROC DATASETS。它不会造成任何伤害，但看起来很奇怪:)

Sequential-in-the-dataset 变量列表是双破折号。所以，你可以用这些简单地创建一个数组：

```
array myvars relationship--goodideas; 
```

所以如果这对你来说足够好（没有重命名），那么，去吧。如果您真的想重命名它们（IMO 有点坏主意，因为它带走了变量名的某些含义，使代码更难阅读，尽管我理解您想要这样做的原因），您不能使用不幸的是 - 虽然它是正确的，但 RENAME 语句不支持它。

```
82   *****  does not work  ;
83   data svy_1;
84   rename relationship--goodideas = var01-var04;
            ------------
            47
ERROR 47-185: Given form of variable list is not supported by RENAME. Statement is ignored.

85   run; 
```

不幸的是，您不能使用数组来执行重命名语句；所以你必须做其他事情。这是一个答案。

```
proc contents data=svy out=svy_vars(keep=name varnum) noprint;
run;

proc sort data=svy_vars; 
by varnum;
run;

data for_rename;
set svy_vars;
if name in ('relationship' 'outburst' 'checkwork' 'goodideas') then do;
  namectr+1;
  new_name=cats(name,'=','var',put(namectr,z2.));
  output;
end;
run;

proc sql;
select new_name into :renlist separated by ' ' from for_rename;
quit;

proc datasets nolist;
modify svy;
rename &renlist;
quit; 
```

您可以使用 PROC SQL 和 DICTIONARY.COLUMNS 表或数据步骤和 SASHELP.VCOLUMN 以较短的方式执行类似的操作，但是 proc contents 方法对于正在发生的事情更加透明。如果您有四个以上的变量，您可能希望将该 IN 语句更改为否定语句（如果名称不在（不更改的事物列表）），如果这样更容易，或者甚至使用 VARNUM 变量本身来确定您使用哪些变量想要改变（如果 (2:5) 中的 varnum 可以在那里工作）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T21:16:58.490

一位同事提出了最好的方法：

* * *

```
*****  does work ;

data svy_1;
set svy;
array old { 4 } relationship--goodideas;
array var { 4 } ;

do i = 1 to 4;
var[i] = old[i];
end;
drop i;
run; 
```

* * *

# c# - MongoDB 引用的最佳实践

> ID：14877073
> 
> 赞同：23
> 
> 时间：2013-02-14T14:31:01.703
> 
> 标签：c#, asp.net-mvc, mongodb, mongodb-.net-driver

我想知道使用引用进行建模的最佳实践是什么情况。我正在使用[MongoRepository](http://mongorepository.codeplex.com/)库。

```
public class User : Entity
{
   publis string Id { get; set; }
   public string Email { get; set; }
   public string Password { get; set; }
}

public class Post : Entity
{
   public string Id { get; set; }
   public string Title { get; set; }
   public string Summary { get; set; }
   public DateTime Added { get; set; }
   public User Owner { get; set; }
} 
```

存储帖子时，我只想引用所有者（用户）对象而不是底层的整个对象。

目前我正在这样做，不知道更好的方法......

```
var post = new Post
{
   Title = "Example title",
   Summary = "asd asd",
   Added = DateTime.Now,
   Owner = new User { Id = "someExistingUserId" }
};
postRepository.Update(post); //Save 
```

..

```
//Then to get the post
var post = postRepository.GetById("previouslySavedPostId");
post.Owner = userRepository.GetById(post.Owner.Id);
return post; 
```

userRepository 和 postRepository 是 MongoRepository 类型。

这是使用带有 C#/MVC(4) 的 MongoDB 解决我的问题的正确方法吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-06T13:01:59.337

您可以使用`MongoDBRef`对象而不是用户对象。

```
public class Post : Entity
{
    public string Id { get; set; }
    public string Title { get; set; }
    public string Summary { get; set; }
    public DateTime Added { get; set; }
    public MongoDBRef Owner { get; set; }
} 
```

那么你就可以：

```
var mongo = new Mongo(config.BuildConfiguration());
mongo.Connect();        
var DB = mongo.GetDatabase(_dataBaseName)

var post = new Post();
post.Owner = new MongoDBRef("User", userId); // First parameter is a mongoDB collection name and second is object id
// To fetch object referenced by DBRef you should do following
var owner = DB.FollowReference<User>(post.Owner); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-14T15:44:23.720

Mongo 是一个文档数据库，如果您习惯使用 sql server，则需要稍微不同的思维方式。

由于您不希望在每个帖子中都包含用户密码详细信息，因此我可能会创建一个新类来包含显示帖子可能需要的任何用户信息。

```
public class PostOwnerInfo
{
    public string UserId { get; set; }
    public string Name { get; set; }
} 
```

更新您的帖子实体，将 Owner 属性替换为 PostOwnerInfo 类型的 OwnerInfo 属性。

然后，当您创建新帖子时，请执行以下操作。

```
var user = userRepository.GetById(someExistingUserId);

var post = new Post
{
   Title = "Example title",
   Summary = "Example summary",
   Added = DateTime.Now,
   OwnerInfo = new PostOwnerInfo
   {
        UserId = user.Id,
        Name = user.Name
   }
};

postRepository.Update(post); 
```

这样，当您查询帖子时，它将拥有您在其 OwnerInfo 属性中显示帖子所需的所有用户信息，而无需进一步查询。

```
var post = postRepository.GetById(previouslySavedPostId);
// post.OwnerInfo will contain user info 
```

有一定数量的数据冗余，但在文档数据库中我会这样做。

如果您出于任何原因需要完整的用户信息，只需像以前一样单独查询即可。

这个想法是您将帖子所需的所有用户信息存储在帖子的子文档中，因此您不需要为用户执行单独的查询。

如果用户数据发生变化，只需更新用户发布的所有帖子的 UserInfo 字段。

您的用户数据很少会更改，但您会经常查询帖子。

# scala - Scala 拥有像 la Fantom 一样的“const 类”有什么障碍？

> ID：14877074
> 
> 赞同：7
> 
> 时间：2013-02-14T14:31:01.930
> 
> 标签：scala

Fantom 支持[可证明的不可变](http://fantom.org/doc/docLang/Classes.html#const)类。编译器知道一个类是不可变的，其优势肯定是很多的，其中最重要的一点是可以保证在参与者之间传递不可变的消息。Fantom 的方法似乎很简单——它会给 Scala 带来什么困难？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-14T14:59:22.607

Scala 方面对跟踪副作用更感兴趣，这是一个比简单的不变性更难的命题。

不可变性本身并不像引用透明性那么重要，事实上，Scala 的一些不可变集合不会通过“已证明不可变”的测试，因为事实上它们不是。*就任何人都可以从外部观察到的而言*，它们是不可变的，但它们具有用于各种目的的可变字段。

一个这样的例子是`List`'s 的子类`::`（构成列表中除空列表之外的所有内容的类），其中的`head`和字段`tail`实际上是可变的。这样做是为了使 a`List`可以按 FIFO 顺序有效地组合 - 请参阅`ListBuffer`及其`toList`方法。

无论如何，虽然保证不变性会很有趣，但这些东西实际上更像是一种语言的产物，其中可变性是默认设置。根据我的经验，在 Scala 中编程时，它不会成为一个实际问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T14:59:53.417

虽然方法可能很简单，

1.  它的保证可以被反射打破；
2.  这需要相当多的努力，Scala 团队可能认为这不值得或不是优先事项。

# ruby-on-rails - Ruby：将变量添加到翻译键

> ID：14877075
> 
> 赞同：0
> 
> 时间：2013-02-14T14:31:01.703
> 
> 标签：ruby-on-rails, translation

我需要在 Ruby on Rails 项目的视图中的翻译键中添加一个变量（不在值中，在键中）。例如，这是我的钥匙：

```
= t 'services.categories.website_html' 
```

我需要做的是该键中的“网站”一词来自一个名为`"category.className"`

我试过这个，没有结果：

```
= t 'services.categories.#{category.className}_html' 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T14:32:59.503

使用双引号而不是单引号；）

```
= t "services.categories.#{category.className}_html" 
```

字符串不是插在单引号内，而是在双引号内。

# jquery - 在 AJAX 中使用 $.when 和 $.done 并尝试在完成时获得结果

> ID：14877077
> 
> 赞同：1
> 
> 时间：2013-02-14T14:31:10.020
> 
> 标签：jquery, ajax

我正在调用 AJAX 调用，每次调用 ajax 调用时，我都会将它传递给一个函数来处理它。我这样做是因为我一次保留了 AJAX 请求的计数器（主要将其用于开发目的）。我正在尝试检索 AJAX 调用的结果，然后处理该数据。

让我粘贴一些代码以获得更好的清晰度。

```
function GET_allSystems() {
    return $.ajax({
        type: "GET",
        url: getSystemUrl(), // Unimportant, I call the url from a method
        cache: false,
        dataType: "json"
    });
}

// This will automatically increment and decrement the semaphore variable
// and execute functions when AJAX call is done.
function processAjaxCall(performAjaxCall, doFunctionWhenDone) {
    ajaxCall++;
    $.when(performAjaxCall).done(function (result) {
        ajaxCall--;
        doFunctionWhenDone(result);
    });
}

// I process the ajax to get all system information then put it in an object
processAjaxCall(GET_allSystems, function (result) {
    systemMap["systems"] = result;
}); 
```

目前我得到的结果是 GET_allSystems() 而不是我通常会得到的实际 json 数据。

我想通过该函数传递 ajax 调用，因为它允许我知道 AJAX 调用当前是否正在处理中，并且它只是提供了我想要的抽象级别。

很明显我做错了什么，但我想 $.done 会在 ajax 调用完成并将结果传回时执行......但这里似乎并非如此。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T14:35:15.783

您需要调用`performAjaxCall`：

```
function processAjaxCall(performAjaxCall, doFunctionWhenDone) {
    ajaxCall++;
    $.when(performAjaxCall()/* Call the function */).done(function (result) {
        ajaxCall--;
        doFunctionWhenDone(result);
    });
} 
```

`performAjaxCall`返回一个由`$.when`.

# c# - 使用 UserPrincipal SetPassword 方法时访问被拒绝

> ID：14877078
> 
> 赞同：4
> 
> 时间：2013-02-14T14:31:13.370
> 
> 标签：c#, asp.net, access-denied, userprincipal, principalcontext

***[使用UserPrincipal](http://msdn.microsoft.com/en-us/library/system.directoryservices.accountmanagement.userprincipal%28v=vs.100%29.aspx)***类更改用户密码时出现***AccessDenied异常。***

我正在通过**Windows Authentication** *(domain user)*登录到 Asp.Net 应用程序。如果我尝试更改其他用户的密码，则会收到拒绝访问异常。如果我对已登录的用户执行相同操作，则一切正常 - 我可以更改密码。

我想，如果我将使用***PrincipalContext获取******UserPrincipal***对象，我将做任何我的 'Principal - *domain\adminAD* ' 在 AD 中具有特权的事情。

 **方法体：

```
public bool SetPassword(string userName, string password)
{
    var saved = false;

    var ldapDomainName = "domain";
    var ldapUsersOU = "OU=TEST,DC=domain,DC=com";
    var ldapLogin = "domain\adminAD";
    var ldapPassword = "password";

    try
    {
        using (var principalContext = new PrincipalContext(
           ContextType.Domain,
           ldapDomainName,
           ldapUsersOU,
           ContextOptions.Signing | ContextOptions.Sealing | ContextOptions.Negotiate,
           ldapLogin,
           ldapPassword))
        {
            userPrincipal = UserPrincipal.FindByIdentity(principalContext, IdentityType.SamAccountName, userName);
            userPrincipal.SetPassword(password);
            userPrincipal.Save(principalContext);
            saved = true;
        }
     }
     catch (Exception ex)
     {
        // Log exception
     }

     return saved;
  } 
```

* * *

我已经搜索过答案，我知道类似主题有很多答案。但他们都没有解释我的问题，我猜。**

# algorithm - 基于标签的聚类算法

> ID：14877083
> 
> 赞同：7
> 
> 时间：2013-02-14T14:31:35.410
> 
> 标签：algorithm, tags, cluster-analysis

我希望根据它们的标签对许多提要进行聚类。一个典型的例子是 twitter 提要。每个提要都有与之关联的用户定义标签。通过分析标签，是否有可能将提要分成不同的组，并告诉这么多提要基于这么多标签。一个例子是 -

*   Feed1 - 印度尼西亚地震#earthquake #asia #bad
*   Feed2 - 我所在地区发生大地震#earthquake #bad
*   Feed3 - 我的父母去了新加坡#asia #tour
*   Feed4 - XYZ 公司正在裁员很多人#XYZ #layoff #bear
*   Feed5 - XYZ 越来越糟糕，正在计划裁员 #XYZ #layoff #bad
*   Feed6 - XYZ 处于裁员狂潮中#layoff #XYZ #worst

聚类后

*   #asia , # 地震 - Feed1 , Feed2
*   #XYZ , # 裁员 - Feed4 , Feed 5 , Feed6

这里的聚类纯粹是基于标签。有没有什么好的算法来实现这一点

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-14T15:40:37.623

如果我正确理解您的问题，您希望将标签聚集在一起，然后根据提要中的标签将提要放入这些集群中。

为此，您可以根据标签一起出现的提要数量创建标签之间的相似性度量。对于您的示例，这将是这样的

```
 #earthquake | #asia | #bad | ...
#earthquake        1       |  1/2  |  2/2
#asia             1/2      |   1   |  1/2
#bad              2/3      |  1/3  |   1
... 
```

在这里，值`(i,j)`等于`frequency of (i,j)/frequency of (i)`。

现在您有了标签之间的相似性矩阵，您几乎可以使用任何适合您需求的聚类算法。由于标签的数量可能非常大，并且在运行算法之前估计集群的数量很困难，我建议使用一些层次聚类算法，例如快速模块化聚类，它也非常快（[请参阅此处的一些详细信息](http://sapandiwakar.in/analysis-of-fast-modularity-clustering-on-twitter/)）。但是，如果您对想要将其分解成的集群数量有一些估计，那么光谱聚类也可能很有用（[请参阅此处的一些详细信息](http://pulkitgoyal.in/2012/03/16/analysis-spectral-clustering-twitter/)）。

After you cluster the tags together, you could use a simple approach to assign each feed to a cluster. This can be very simple, for example, counting the number of tags from each cluster in a feed and assigning a cluster with the maximum number of matching tags.

If you are flexible on your clustering strategy, then you could also try clustering the feeds together in a similar way by creating a similarity between the feeds based on the number of common tags between the feeds and then applying a clustering algorithm on the similarity matrix.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T15:06:13.850

有趣的问题。我在这里编造东西，但我认为这会奏效。

## 算法

对于每个提要，提供一个完整的标签组合列表（长度 >= 2），可能为了一致性而排序。例如：

*   Feed1: (asia-bad), (asia-earthquake), (bad-earthquake), (asia-bad-earthquake)
*   Feed2：（严重地震）
*   Feed3：（亚洲巡回演唱会）
*   Feed4: (bear-layoff), (bear-XYZ), (layoff-XYZ), (bear-layoff-XYZ)
*   Feed5: (bad-layoff), (bad-XYZ), (layoff-XYZ), (bad-layoff-XYZ)
*   Feed6: (layoff-worst), (layoff-XYZ), (worst-XYZ), (layoff-worst-XYZ)

然后反转映射：

*   （亚洲坏）：Feed1
*   （亚洲地震）：Feed1
*   （严重地震）：Feed1、Feed2
*   （亚洲严重地震）：Feed1
*   （亚洲巡回演唱会）：Feed3
*   （熊裁员）：Feed4
*   ...
*   （裁员-XYZ）：Feed4、Feed5、Feed6
*   ...

然后，您可以剔除频率高于某个阈值的所有条目。在这种情况下，如果我们将频率阈值设为 2，那么 Feed1 和 Feed2 会得到 (bad-earthquake)，Feed4、Feed5 和 Feed6 会得到 (layoff-XYZ)。

## 性能问题

一个幼稚的实现将具有极差的性能——每个提要的标签数量呈指数级增长（更不用说空间要求了）。但是，有多种方法可以应用启发式方法来改进这一点。例如：

1.  通过扫描所有提要（或随机选择 X 个提要）确定最流行的 X 标签——这与每个提要的标签数量成线性关系。然后只考虑每个提要的 Y 个最受欢迎的标签。
2.  确定所有（或大多数）标签的频率。然后，对于每个帖子，只考虑该帖子中 X 最受欢迎的标签。这可以防止您在某些帖子中有 15 个标签的情况，从而产生大量组合列表，其中大多数永远不会发生。
3.  对于每篇文章，只考虑长度 <= X 的组合。例如，如果一个提要有 15 个标签，那么您最终可能会得到大量组合，但其中大多数出现的次数很少，尤其是长的。所以只考虑两个或三个标签的组合。
4.  仅扫描随机选择的 X 个提要。

希望这可以帮助！

# heroku - 使用端口 443 连接到 Heroku

> ID：14877088
> 
> 赞同：4
> 
> 时间：2013-02-14T14:31:43.770
> 
> 标签：heroku, ssh

我是一名大学生，除 80、443 以外的所有端口都被封锁。我可以通过以下方式连接到 github

```
Host github.com                                                                                    
  Hostname ssh.github.com
  Port 443 
```

`git push heroku master`给我这个错误：

```
ssh: connect to host heroku.com port 22: Connection refused
fatal: The remote end hung up unexpectedly 
```

我已经尝试过在 SO 上发布的解决方案[，](https://stackoverflow.com/questions/12891991/push-to-heroku-through-proxy-server)但我仍然无法正常工作。有没有办法可以连接到 heroku 并部署我的网站？

非常感谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T16:22:52.033

Heroku ssh 仅在端口 22 上工作。但是，有一个插件可以让您通过 HTTP 推送。但是，它不使用 git。相反，你`heroku push`.

[https://github.com/ddollar/heroku-push](https://github.com/ddollar/heroku-push)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-10-23T08:18:02.770

如果您的 SSH 端口被阻止并希望使用备用端口推送到 heroku，那么您可以考虑使用**Tunneling**。

对于隧道，您需要有额外的 PC 或服务器位于被阻止的网络之外并可以访问端口 22。

对于下面的场景，我们可以使用家庭 PC 隧道进入 heroku 服务器。由于大学网络只允许端口 80 和 443，我们可以将 House PC 设置为通过端口 443 接收连接并将其隧道连接到端口 22。

**在家庭电脑：**

1.  配置家用 PC 的 SSH 服务器在 443 端口上运行。 [参考这里在多个端口上配置 SSH 服务器](http://www.latenightpc.com/blog/archives/2006/10/11/running-an-ssh-server-on-multiple-ports)

**大学电脑：**

1.  配置大学 PC 以解析 git_tunnel 别名以指向端口 9001 上的 localhost。编辑`~/.ssh/config`并添加以下内容

    ```
    # ~/.ssh/config

    Host git_tunnel
       Hostname 127.0.0.1
       User git
       Port 9001 
    ```

2.  添加一个新的远程别名`tunnel`，它将指向`git@git_tunnel:{app name}.git`

    `git remote add tunnel git@git_tunnel:{app name}.git`

3.  从大学 PC 建立隧道到在端口 443 上侦听的房屋 PC。

    `ssh -L 9001:heroku.com:22 -p 443 root@housepc.com`

4.  `tunnel`使用之前创建的别名部署到 heroku

    `git push tunnel master`

# sql-server - 为什么在 SQL Server 中更新字符“£”时会转换为“L”

> ID：14877089
> 
> 赞同：3
> 
> 时间：2013-02-14T14:31:44.103
> 
> 标签：sql-server, sql-server-2008, character-encoding

我的sql很简单。版本：SQL Server 2008

> 更新 dbo.abc SET UrlName = 'L££££' 其中 abcID = 10;
> 
> 从 abc 中选择 UrlName，其中 abcID = 10；

我得到的是

“LLLL”

我查询了 SELECT @@language，它是“British”。所以不要认为这与文化设置有关。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T14:50:09.597

`£`不是该代码页中支持的字符之一。

要查看它们，您可以使用

```
DECLARE @Collations TABLE
(
     code TINYINT PRIMARY KEY,
     Slovenian_CI_AS CHAR(1) COLLATE Slovenian_CI_AS 
);

WITH E00(N) AS (SELECT 1 UNION ALL SELECT 1),   --2
        E02(N) AS (SELECT 1 FROM E00 a, E00 b), --4
        E04(N) AS (SELECT 1 FROM E02 a, E02 b), --16
        E08(N) AS (SELECT 1 FROM E04 a, E04 b) --256
INSERT INTO @Collations
            (code)
SELECT ROW_NUMBER() OVER (ORDER BY (SELECT 0)) - 1
FROM   E08

UPDATE @Collations
SET    Slovenian_CI_AS = CAST(code AS BINARY(1))

SELECT *
FROM   @Collations 
```

您将需要更改列排序规则或使用`nvarchar`而不是`varchar`.

如果您的数据库排序规则保留在您选择的任何选项，`Slovenian_CI_AS`您仍然需要向`N`字符串文字添加一个前缀，以避免它首先被强制到该代码页中。

```
UPDATE dbo.abc
SET    UrlName = N'L££££'
WHERE  abcID = 10; 
```

# python - pymongo：“操作失败：数据库错误：查询服务器错误”

> ID：14877091
> 
> 赞同：7
> 
> 时间：2013-02-14T14:31:49.470
> 
> 标签：python, mongodb, pymongo

在进行查询时，我们偶尔会收到以下错误：

```
OperationFailure: database error: error querying server 
```

没有导致此问题的特定查询，并且在重复该过程时一切正常。有没有其他人看到这个错误？

我们的设置是 Amazon EC2 上的 Ubuntu VM 集群，我们使用 Python 2.7.3 和 pymongo v2.3。我们也在使用 Mongoengine，但是我们仍然从非 Mongoengine 代码中得到这个异常。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-03T17:09:14.140

对于那些发现这个问题的人：

我们永远无法完全诊断出这个问题，我们的直觉是，无论出于何种原因，数据库连接往往每隔一段时间就会失败。从我们对分布式计算的研究来看，这是一个常见问题，需要明确处理。

`OperationFailure`最后，我们通过捕获异常以及类似的异常并重新建立数据库连接来调整我们的系统，使其对数据库连接故障具有鲁棒性。这解决了这个问题以及我们遇到的许多类似问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T09:12:10.740

似乎服务器上的查询失败 - 要诊断您需要检查服务器日志。

# python - 不完整 *.rar 适用于 VLC 但不适用于 libVLC

> ID：14877092
> 
> 赞同：1
> 
> 时间：2013-02-14T14:31:51.133
> 
> 标签：python, vlc, libvlc

我正在尝试使用带有 python 绑定的 libVLC 播放一个不完整的 rar 文件。如果我从控制台运行以下命令，我会收到一些错误，但我可以在 VLC 上看到视频。

```
VLC media player 2.0.5 Twoflower (revision 2.0.5-0-g1661b7d)
[0x652108] main libvlc: Running vlc with the default interface. Use 'cvlc' to use vlc without interface.
[0x7fde50c02028] filesystem access error: cannot open file /tmp/incomplete.r01 (No such file or directory)
[0x7fde50001438] main stream error: no suitable access module for `file:///tmp/incomplete.r01'
[0x8732e8] main playlist: stopping playback
[0x7fde50c0d5c8] filesystem access error: cannot open file /tmp/incomplete.r01 (No such file or directory)
[0x7fde50c018d8] main stream error: no suitable access module for `file:///tmp/incomplete.r01'
[0x7fde400505c8] freetype spu text error: Breaking unbreakable line 
```

但是如果我使用 python 绑定运行视频，它就不起作用。

```
import vlc, time
instance = vlc.Instance()
media=instance.media_new('/tmp/incomplete.rar')
player=instance.media_player_new()
player.set_media(media)
player.play()

time.sleep(10) 
```

输出：

```
[0x7f523800a0d8] filesystem access error: cannot open file /tmp/incomplete.r01 (No such file or directory)
[0x7f523800a0d8] main access error: File reading failed
[0x7f523800a0d8] main access error: VLC could not open the file "/tmp/incomplete.r01". (No such file or directory)
[0x7f5238006638] main stream error: no suitable access module for `/tmp/incomplete.r01' 
```

我认为 VLC 使用了一些 libVLC 没有的默认选项。对此的任何帮助表示赞赏。

# java - 使用 BorderLayout 将图形添加到 JFrame

> ID：14877094
> 
> 赞同：3
> 
> 时间：2013-02-14T14:31:57.477
> 
> 标签：java, swing, jframe, jpanel, paintcomponent

我正在尝试做一个简单的作业，在其中显示一行文本，显示门对象是否打开。在此之下，我直观地表示它（使用 drawRect）方法。在底部我有两个按钮，可以打开或关闭门，从而改变文本和矩形。

编辑：现在可以编译的代码列表：

```
 import java.awt.BorderLayout;
    import java.awt.Color;
    import java.awt.Dimension;
    import java.awt.Graphics;
    import java.awt.event.ActionEvent;
    import java.awt.event.ActionListener;

    import javax.swing.JButton;
    import javax.swing.JFrame;
    import javax.swing.JPanel;
    import javax.swing.JTextField;

    public class Test {

    public static void main(String[] args) {

        // Creates new JFrame called frame, with title "Door" 
        // (displayed at top of screen).
        JFrame frame = new JFrame ("Door");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        TempDoorPanel panel = new TempDoorPanel();
        frame.add(panel);
        frame.pack();
        frame.setVisible(true);

        }
    }

    class Door {

    private String state;
    private String message;

    Door (String state) {
        this.state = state;
        message = "The door is currently closed.";
    }

    public boolean isOpen() {
        return state.equals ("open");
    }

    public boolean isClosed() {
        return state.equals ("closed");
    }

    public void setState(String state) {
        this.state = state;
    }

    public String getMessage() {
        return message; 
    }

    public void open() {
        if (state.equals("open")) {
            message = "The door is already open.";
        }
        else {
            state = "open";
            message = "The door has been opened.";
        }
    }

    public void drawOpenDoor (Graphics page) {
        page.drawRect(100, 100, 100, 100);
    }
    }

    class TempDoorPanel extends JPanel {

    private Door door;
    private JTextField currentStateOfDoor;
    private JButton openDoor;

    public TempDoorPanel() {
        super.setLayout(new BorderLayout());
        door = new Door("closed");
        super.setBackground(Color.blue);
        super.setPreferredSize(new Dimension (360, 400));

        currentStateOfDoor = new JTextField(14);
        currentStateOfDoor.setText(door.getMessage());
        super.add(currentStateOfDoor, BorderLayout.NORTH);

        openDoor = new JButton("Open Door");

        class openDoorListener implements ActionListener {
            public void actionPerformed (ActionEvent event) {
                door.open();
                repaintText();
            }
        }

        openDoorListener openlistener = new openDoorListener();
        openDoor.addActionListener(openlistener);

        JPanel holder = new JPanel();
        holder.add(openDoor);
        super.add(holder, BorderLayout.SOUTH);
    }

    private void repaintText() {
        currentStateOfDoor.setText(door.getMessage());
        // These methods are from Door class.
    }

    public void paintComponent (Graphics page) {
        super.paintComponent(page);
        if (door.isOpen())
            door.drawOpenDoor(page);
        // isOpen is a boolean method from Door class.
    }
} 
```

什么有效：

*   按钮一个接一个地出现在屏幕上的正确位置，在 BorderLayout.SOUTH。
*   JTextField 出现在正确的位置，在 BorderLayout.NORTH
*   最后，蓝色区域出现在屏幕中央的正确位置。

我要解决的问题：

*   我不知道如何在该蓝色区域的中间正确显示矩形。我试过改变矩形的坐标和大小，这根本不会改变它的大小。我可以让它 drawRect(100, 100, 100, 100) 并且它没有任何改变。
*   我也知道矩形目前隐藏在 JTextField 的左上角后面，但我不知道如何将它移到 BorderLayout 中。

问题：

*   如何在 BorderLayout 中放置一个矩形？
*   在这样的布局中，如何调整通过 drawrect() 绘制的矩形的大小？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T14:57:43.703

因为您将组件添加到您在其上绘制的 JPanel`JTextField`会覆盖您的绘图。

**解决方案：**

1）通过检查方法`JTextField`中的高度来弥补这一点`drawRect(..)`

或更好

`JPanel`2）除非无法帮助，否则不要将组件添加到您正在绘制的相同组件上。

所以基本上我为你`TempDoorPanel`添加了一个新`JPanel`的*绘图面板*`BorderLayout.CENTER`，我们现在可以使用它，它将显示在.*`drawRect(0,0,10,10)``JPanel` `drawingPanel`*

 **   也不要调用而是覆盖并返回适合您的图纸的 s `setPreferredSize`。`JPanel``getPreferredSize()``Dimension`

*   要`paintComponent`在类外部调用，只需调用[`repaint()`](http://docs.oracle.com/javase/7/docs/api/java/awt/Component.html#repaint%28%29)其实例

请参阅使用第 2 点的示例：

![在此处输入图像描述](../Images/87b40155cf2a50b08c80a3a2f36f69cd.png)

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JTextField;
import javax.swing.SwingUtilities;

public class Test {

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                JFrame frame = new JFrame("Door");
                frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);

                TempDoorPanel panel = new TempDoorPanel();
                frame.add(panel);
                frame.pack();
                frame.setVisible(true);
            }
        });
    }
}
class Door {

    private String state;
    private String message;

    public Door(String state) {
        this.state = state;
        message = "The door is currently closed.";
    }

    public void drawOpenDoor(Graphics page) {
        page.setColor(Color.GREEN);
        page.drawRect(0, 0, 10, 10);
    }
}

class TempDoorPanel extends JPanel {

    private Door door;
    private JTextField currentStateOfDoor;
    private JButton openDoor;

    public TempDoorPanel() {
        super.setLayout(new BorderLayout());
        door = new Door("closed");

        currentStateOfDoor = new JTextField(14);
        //AcurrentStateOfDoor.setText(door.getMessage());
        super.add(currentStateOfDoor, BorderLayout.NORTH);

        openDoor = new JButton("Open Door");

        final JPanel drawingPanel = new JPanel() {
            @Override
            protected void paintComponent(Graphics grphcs) {
                super.paintComponent(grphcs);
                // if (door.isOpen()) {
                door.drawOpenDoor(grphcs);
                // }
                // isOpen is a boolean method from Door class.

            }
        };
        drawingPanel.setBackground(Color.blue);
        add(drawingPanel);

        class openDoorListener implements ActionListener {

            public void actionPerformed(ActionEvent event) {
                //door.open();
                repaintText();
                drawingPanel.repaint();//so paint component of drawing panel is called
            }
        }

        openDoorListener openlistener = new openDoorListener();
        openDoor.addActionListener(openlistener);

        JPanel holder = new JPanel();
        holder.add(openDoor);
        super.add(holder, BorderLayout.SOUTH);
    }

    @Override
    public Dimension getPreferredSize() {
        return new Dimension(300, 300);
    }

    private void repaintText() {
        // currentStateOfDoor.setText(door.getMessage());
        // These methods are from Door class.
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T15:12:03.330

当您与侦听器一起处理开门事件时；

```
class openDoorListener implements ActionListener {
  public void actionPerformed(ActionEvent event) {
    door.open();
    repaintText();
  }
} 
```

您实际上并没有调用重新绘制面板；因此面板的`paintComponent()`方法不会被调用，`door.drawOpenDoor()`也不会被调用。您可以通过单击按钮然后调整框架大小来对此进行测试。当您调整大小时，面板会自动重新粉刷和宾果游戏，您的门就会出现。

`repaint()`您可以通过在 ActionListener 中添加调用来解决此问题；

```
class openDoorListener implements ActionListener {
  public void actionPerformed(ActionEvent event) {
    door.open();
    repaintText();
    repaint();   // requests that the panel be repainted
  }
} 
```*

# eclipse - Eclipse 调用 IWorkbenchWindowActionDelegate

> ID：14877097
> 
> 赞同：0
> 
> 时间：2013-02-14T14:32:09.317
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp

我在 3.7 和我的 Action 委托中编写了一个 Eclipse 插件，当用户选择一个菜单选项时我想调用另一个 Action Delegate。

更具体地说，我有一个动作委托，我想调用相当于 Team -> Refresh 动作（特别是 Perforce）。

然而，相关的动作类是`com.perforce.team.ui.p4java.actions.RefreshAction`如何构造、初始化和调用方法？

有人可以告诉我如何实现这一目标吗？

# git - --bare 选项是否等于 Git 中的 core.bare 配置？

> ID：14877099
> 
> 赞同：1
> 
> 时间：2013-02-14T14:32:24.760
> 
> 标签：git

我想在我的服务器上创建一个 git repo 以在推送后更新我的网站。我发现所有教程的第一步（例如：http: [//developertheory.com/how-to-auto-deploy-apps-after-git-push/](http://developertheory.com/how-to-auto-deploy-apps-after-git-push/)），是这个命令：

```
git init --bare 
```

在接下来的步骤中，我应该输入以下命令：

```
git config core.worktree /path/to/git/deploy
git config core.bare false
git config receive.denycurrentbranch ignore 
```

第二个命令 ( `git config core.bare false`) 将 repo 设置为 non-bare。为什么我们将 repo 初始化为裸机，然后将其设置为非裸机？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T19:19:17.113

# java - 比较 2 个数组列表并遍历内容

> ID：14877100
> 
> 赞同：0
> 
> 时间：2013-02-14T14:32:21.413
> 
> 标签：java, arraylist

我正在从 2 个数组列表中检索元素并循环和比较它们。有没有更好的方法来循环这个？它有点慢，似乎效率不高

```
 String Name = employee.get(0).getEmpName();
       for(int i = 0; i < employee.size(); i++)
       {
           if (Name.equals(employee.get(i).getEmpName()))
           {
               for (int j = 0; j < employer.size(); j++)
               {
                   if (Name.equals(employer.get(i).getEmpChoice()) &&           (employers.get(j).getCompChoice() == 1))
                   {
                       if (!Test.contains(Name) ||  
                           !Test.contains(employers.get(j).getCompName()))
                       {
                            Test += Name + employers.get(j).getCompName() + "\n";
                       }
                   }
               }
           }
           else
           {
               Name = employees.get(i).getEmpName();
               i--;
           }
       } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T14:46:13.307

首先，使用 foreach 语句，它们更容易看

```
for(Employee emp : employee) 
```

还有一种更快的方法是使用地图来存储数据。所以你只需要遍历一个列表。

```
Map<String,Employee> employees;
for(Employer emp : employer){
    if(employees.get(emp.getEmpChoice()).getCompChoice() == 1){
        //do stuff
    }
} 
```

根据`Map`您使用的实施方式，这可能会加快您的流程。您的代码也更简洁。

# c# - c#中的0u是什么意思？

> ID：14877101
> 
> 赞同：12
> 
> 时间：2013-02-14T14:32:28.693
> 
> 标签：c#

`0u`在c#中是什么意思？示例上下文：

```
uint n = _seconds;
while (n > 0u) {
    // TODO
}; 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-14T14:34:51.800

```
var a = 0U; // a is unsigned int 
```

如同

```
var a = (uint)0; // a is unsigned int 
```

检查[这个](http://msdn.microsoft.com/en-us/library/aa664674%28v=vs.71%29.aspx)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-14T14:33:58.620

它的含义与 相同`((uint)0)`。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-14T14:33:34.990

就像 0L 将 0 定义为 long 一样，0u 将 0 定义为 unsigned int ( `uint`)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-14T14:33:20.523

它是一个`uint`（或无符号整数）的短后缀

很好的总结：http: [//www.dotnetperls.com/suffix](http://www.dotnetperls.com/suffix)

# ruby - 结合正则表达式和一组值（哈希/数组）来比较字符串是否在 ruby 中匹配

> ID：14877102
> 
> 赞同：1
> 
> 时间：2013-02-14T14:32:32.203
> 
> 标签：ruby, regex

我有以下模式要检查：

```
"MODEL_NAME"-"ID"."FORMAT_TYPE" 
```

例如：

```
MODEL_NAME = [:product, :brand]
FORMAT_TYPE = [:jpg, :png] 
```

首先，我想检查正则表达式是否类似于：

```
/^\w+-\d+.\w+$/ 
```

而且我还必须检查我的字符串的一部分是否是我的数组的一部分。我想要比以下更灵活的东西：

```
/^(product|brand)-\d+.(jpg|png)$/ 
```

我可以通过我的阵列进行管理。什么是一个好的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T14:40:30.393

```
/^(#{MODEL_NAME.join '|'})-\d+\.(#{FORMAT_TYPE.join '|'})$/
# => /^(product|brand)-\d+\.(jpg|png)$/ 
```

# hibernate - Spring MVC 3 Hibernate 4 多数据库配置

> ID：14877104
> 
> 赞同：1
> 
> 时间：2013-02-14T14:32:35.133
> 
> 标签：hibernate, spring-mvc, connection, multiple-databases

我必须在我的应用程序中管理多个数据库我的配置文件应用程序是

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:mvc="http://www.springframework.org/schema/mvc"
xmlns:context="http://www.springframework.org/schema/context"
xsi:schemaLocation="
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd
    http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd">

    <!-- Scans the classpath of this application for @Components to deploy as beans -->
    <context:component-scan base-package="fr.tessa.jee.webmanager" />

    <!-- Configures the @Controller programming model -->
    <mvc:annotation-driven />

    <!-- misc -->
    <bean id="viewResolver"
    class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="viewClass"
        value="org.springframework.web.servlet.view.JstlView" />
        <property name="suffix" value=".jsp" />
    </bean>

    <!-- Configure the multipart resolver -->
    <bean id="multipartResolver" class="org.springframework.web.multipart.commons.CommonsMultipartResolver">
        <!-- one of the properties available; the maximum file size in bytes -->
        <property name="maxUploadSize" value="1000000" />
    </bean>

    <!-- Configures Hibernate - Database Config -->
    <import resource="dbconfig/db-config.xml" /> 
    <import resource="dbconfig/validationdb-config.xml" />

</beans> 
```

我的“db-config.xml”是

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:tx="http://www.springframework.org/schema/tx"
xmlns:aop="http://www.springframework.org/schema/aop"
xsi:schemaLocation="
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
    http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd
    http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.1.xsd">

    <!-- Hibernate Data Source -->
    <bean id="teoDataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName"><value>com.mysql.jdbc.Driver</value></property>
        <property name="url"><value>jdbc:mysql://127.0.0.1/teodijon</value></property>
        <property name="username"><value>root</value></property>
        <property name="password"><value</value></property>
    </bean>    
     <!-- Hibernate Session Factory -->
    <bean id="teoSessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <property name="dataSource"><ref local="teoDataSource"/></property>
        <property name="packagesToScan" value="fr.tessa.jee.webmanager.model" />
        <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
            <prop key="hibernate.show_sql">true</prop>
        <prop key="hibernate.hbm2ddl.auto">update</prop>
        </props>
        </property>
    </bean> 
    <!-- Transaction manager for a single Hibernate SessionFactory (alternative to JTA) HibernateTransactionManager -->
    <tx:annotation-driven transaction-manager="teoTransactionManager"/>
    <bean id="teoTransactionManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
        <property name="sessionFactory"><ref local="teoSessionFactory"/></property>
    </bean>
</beans> 
```

和“validationdb-config.xml”

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:tx="http://www.springframework.org/schema/tx"
xmlns:aop="http://www.springframework.org/schema/aop"
xsi:schemaLocation="
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
    http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd
    http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.1.xsd">

    <!-- Hibernate Data Source -->
    <bean id="validationDataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName"><value>com.mysql.jdbc.Driver</value></property>
        <property name="url"><value>jdbc:mysql://127.0.0.1/validationdb</value></property>
        <property name="username"><value>root</value></property>
        <property name="password"><value></value></property>
    </bean>    
     <!-- Hibernate Session Factory -->
    <bean id="validationSessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <property name="dataSource"><ref local="validationDataSource"/></property>
        <property name="packagesToScan" value="fr.tessa.jee.webmanager.validation.model" />
        <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
            <prop key="hibernate.show_sql">true</prop>
        <prop key="hibernate.hbm2ddl.auto">update</prop>
        </props>
        </property>
    </bean> 
<!-- Transaction manager for a single Hibernate SessionFactory (alternative to JTA) HibernateTransactionManager -->
<tx:annotation-driven transaction-manager="validationTransactionManager"/>
    <bean id="validationTransactionManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
        <property name="sessionFactory"><ref local="validationSessionFactory"/></property>
    </bean>
</beans> 
```

我在包 fr.tessa.jee.webmanager.validation.model 中有用户类，在包 fr.tessa.jee.webmanager.model 中有客户端；问题是，当我尝试获取用户列表时出现错误，例如没有为当前线程找到会话但是对于客户端列表很好，当我开始在 app-config 中导入“validationdb-config.xml”时

```
<import resource="dbconfig/validationdb-config.xml" />
<import resource="dbconfig/db-config.xml" /> 
```

当我尝试获取客户列表时出现错误

我的配置有什么问题？请帮忙 ：（

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T08:59:31.010

我找到了问题，问题出在我的服务中的事务方法中，我必须像这样指定事务管理器的 ID

```
@Transactional(readOnly = true, value="teoTransactionManager")
public List<Client> getClientList() {
    return clientDAO.getClients();
} 
```

当我开始时，我只输入了@Transactional(readOnly = true)

# javascript - 使用jquery（或javascript）在div内滚动溢出

> ID：14877106
> 
> 赞同：0
> 
> 时间：2013-02-14T14:32:44.300
> 
> 标签：javascript, jquery, html

我有一个高度固定的 div 和 overflow-y : 我通过 ajax 加载的滚动。我目前正在寻找一种可能性来滚动 div 内的内容（使用鼠标滚轮）但不显示滚动条。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T14:50:43.653

另一种方法是使用 jquery.mousewheel：[https ://github.com/brandonaaron/jquery-mousewheel](https://github.com/brandonaaron/jquery-mousewheel)

在鼠标滚轮上，自己计算滚动：

```
$('.toScroll').on('mousewheel',function(event, delta, deltaX, deltaY){
    if(!$(this).attr('data-scrolltop')){
        $(this).attr('data-scrolltop',0);
    }
    var scrollTop = parseInt($(this).attr('data-scrolltop'));
    scrollTop += (-deltaY * lineHeight);
    $(this).attr('data-scrolltop',scrollTop);
    $(this).scrollTop(scrollTop);
}); 
```

我做了一个小提琴作为演示：http: [//jsfiddle.net/W2pZB/](http://jsfiddle.net/W2pZB/)

唯一的问题是关于 var 固定的行高。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T14:40:08.023

您可以通过应用`overflow:hidden`并在 `display-none`使用`scroll-bar`后完成`css`

在这里你可以在下面的问题中找到同样的东西。

[jQuery：如何在不显示滚动条的情况下滚动正文？](https://stackoverflow.com/questions/10170395/jquery-how-do-i-scroll-the-body-without-showing-the-scroll-bar)

# ruby-on-rails - 在带有导轨的表格中形成表格

> ID：14877114
> 
> 赞同：1
> 
> 时间：2013-02-14T14:33:03.090
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个订单表格，用户必须选择一个类别然后关联产品。因为我希望它是动态的，所以我写了这个：

_form.html.erb

```
<%= form_for(@order) do |f| %>

    <%= f.collection_select :category_id, @categories_list, :id, :name, :prompt => "Selectionner"  %>

    <%= render :partial => 'products' %>

    <%= f.submit 'Enregistrer', :class=>'button add'%>

<% end %> 
```

_products.html.erb：

```
<%= form_for(Order.new, :remote => true) do |f| %>
  <% if !@products.blank? %>
    <%= f.label 'Produit :' %><br />
    <%= f.select :product_id, @products.collect{ |s| [s.name,s.id]}, :prompt => "Selectionner" %>
  <% else %>
    <%= f.label 'Produit :' %><br />
    <%= f.select :product_id, '' %>
  <% end %>
<% end %> 
```

在控制器中：

```
def update_product_select
  @products = Product.where(:category_id=>params[:id]).order(:name) unless params[:id].blank?
  render :partial => "products", :layout => false, :locals => { :products => @products }
end 
```

对于动态部分，它可以工作。但是当我点击提交按钮时，没有发送产品ID！

你能告诉我如何将动态菜单和表单提交结合起来吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T22:03:07.327

我想你正在寻找这个：[http](http://railscasts.com/episodes/88-dynamic-select-menus-revised) ://railscasts.com/episodes/88-dynamic-select-menus-revised 它需要订阅，但如果你不想订阅，你也可以看上一集来了解一下.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T14:54:13.010

我不明白你为什么需要两种形式。这里不对劲。

如果可能的话，多解释一下工作流程。

`fields_for`如果您尝试编辑 @order 的其他关联实例，我认为您应该使用。

对于动态菜单，请在类别上绑定一个 javascript 事件，以根据类别更新产品列表。如果你需要一个例子，请告诉我。

# svn - Subversion 中的钩子

> ID：14877120
> 
> 赞同：0
> 
> 时间：2013-02-14T14:33:21.443
> 
> 标签：svn, batch-file, svn-hooks

我想通过 Subversion 中的提交后挂钩运行批处理文件。我的问题是我想为每个已提交的文件运行一次它，但我不知道有一种方法可以在挂钩中获取已提交文件的名称。我可以为文件夹中的每个文件运行它，但是当我离开这个测试环境并实际使用这个功能时，有很多文件，这将是非常低效的。有任何想法吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:48:20.650

您只犯了一个小错误：与`svn log -v`. 它`svnlook`带有子命令`changed`

回购中的修订样本（用于您将使用的交易`-t %TXN%`）

```
>svnlook.exe changed -r 31 Hello
U   trunk/Hello.de.txt
U   trunk/Hello.en.txt
U   trunk/Hello.fr.txt 
```

`Hello`**是存储库**根目录的路径（不是工作副本），命令的输出似乎部分作为 的输出`svn st`，文件的路径是来自 repo-root 的相对路径

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T15:23:10.347

SVN 将两个值传递给钩子，存储库的路径和生成的修订号。
使用此信息，您可以向 SVN 询问该修订中更改的路径并获取添加/修改文件的列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T13:09:24.117

我能够使用批处理并使用一些临时文本文件来存储一些数据来解决这个问题。我必须做一些处理才能在变量中获取文件的名称，因为这是我需要的参数。这可能不是最有效的方法，但它实现了我的目标......

```
setlocal EnableDelayedExpansion

rem write a list of the changed files in a text file
"C:\svnpath\bin\svn.exe" log "C:\repo-path\project" -r %TXN% --verbose > "C:\path\changelist.txt"

rem write the list of all files into a text file
cd "C:\repo-path\project"
dir /b > "C:\path\filelist.txt"

rem loop through files
cd "C:\path"
for /F "delims=" %%i IN (filelist.txt) do (
   rem search for file name in list of changed files, if found run batch file on it
   find /i "%%i" changelist.txt > nul

   echo %%i > "C:\path\temp.txt"

   if not errorlevel 1 (
      cd "C:\repo-path\project"
      batchfile.bat %%i
   )
)

rem delete temp files when finished
del "C:\path\filelist.txt"
del "C:\path\changelist.txt"
del "C:\path\changedfiles.txt" 
```

# javascript - 如何使用 webgl/three.js 创建带有选项的基本菜单栏？

> ID：14877122
> 
> 赞同：1
> 
> 时间：2013-02-14T14:33:24.273
> 
> 标签：javascript, three.js, webgl

[three.js 3-D 查看器](http://mrdoob.github.com/three.js/docs/55/)的文档对于初学者来说很难理解。我想知道使用three.js / webGL创建带有3-D查看器选项的菜单栏或选择器的基本大纲是什么？

另外，如何制作渐变选择器？例如，假设改变颜色或不透明度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T14:36:50.520

使用 dat.gui.min.js 查找示例，可以在[https://github.com/mrdoob/three.js/blob/master/examples/js/libs/dat.gui.min.js](https://github.com/mrdoob/three.js/blob/master/examples/js/libs/dat.gui.min.js)中找到。

# c++ - 带有模板节点值的比较运算符重载

> ID：14877124
> 
> 赞同：0
> 
> 时间：2013-02-14T14:33:32.977
> 
> 标签：c++, overloading, nodes, operator-keyword

这适用于我比较类的对象时：

```
//first number is row, then column, then a value which doesnt get compared.
Element e1 (4, 2, 4);

Element e2 (5, 2, 4);

if (e1 > e2)
    cout << "e1 is greater than e2" << endl;
else
    cout << "e1 is not greater than e2" << endl;

bool Element::operator > (const Element& e) const
{
    return ((this -> row == e.row) && (this -> col > e.col)) || (this -> row > e.row);
} 
```

...但不是当我将它们放在链表节点中之后进行比较时。

```
if (curr -> e > head -> e /*<---- STOPS WORKING HERE*/ || curr -> e == head -> e /* <---- THIS == OPERATOR WORKS HOWEVER*/)
{
    cout << "inserted befrore not empty head" << endl;
    newNode -> next = head;
    head = newNode;
} 
```

当我尝试`curr -> e`与`head -> e`. 我不知道为什么，但是我有另一个运算符重载函数来检查两个节点是否相等，并且在使用节点进行比较时似乎可以正常工作。这里仅供参考。

```
bool Element::operator == (const Element& e) const
{
    return ((this -> row == e.row) &&
            (this -> col == e.col));
} 
```

比较两个节点时，`>`运算符重载函数给我一个运行时错误。解决方案？

# jquery-mobile - history.back() 在 JQuery Mobile 中更改整个浏览器窗口

> ID：14877125
> 
> 赞同：0
> 
> 时间：2013-02-14T14:33:33.823
> 
> 标签：jquery-mobile

我有一个 JQuery Mobile 应用程序，由于某种原因，history.back() 按钮现在导致浏览器窗口返回，而不是返回到以前的 JQuery Mobile DOM 页面。

有没有其他人经历过这个，或者有没有人有关于在哪里看的建议？不幸的是，我不能使用 data-rel="back" 因为我需要以编程方式调用返回操作。

注意：我不排除也许我改变了一些东西导致它的行为不同。（我试图在浏览器 URL 中显示路径。也许这与 history.back() 冲突？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T17:40:43.600

[我在http://forum.jquery.com/topic/trouble-with-history-back-in-jquery-mobile-application](http://forum.jquery.com/topic/trouble-with-history-back-in-jquery-mobile-application)看到其他人有这个问题，所以现在我已经实现了我自己的原始“返回”历史系统。但是，如果其他人遇到过这个问题，我愿意接受适当的修复。

# javascript - Navigation Timing API 事件未按顺序触发

> ID：14877131
> 
> 赞同：0
> 
> 时间：2013-02-14T14:33:46.097
> 
> 标签：javascript, api, timing, navigation-timing-api

我正在使用 Navigation Timing API 从页面获取加载事件。我在下面添加了 JS 的片段来输出信息。我注意到奇怪的一件事是时间比我检查控制台`loadEventEnd`的时间早回来。`loadEventStart`我认为这应该是不可能的。

```
var startTime = new Date().getTime();
// retrieve the performance object in a cross browser way. Check window.performance first.
window.performance = window.performance || window.mozPerformance || window.msPerformance || window.webkitPerformance || {};
var timing = window.performance.timing || {};
var navigation = window.performance.navigation || {};

// if the Navigation Timing API is supported
if (window.performance && window.performance.timing) {
    pageRequestStart = timing.requestStart;
    pageResponseStart = timing.responseStart;
    pageResponseEnd = timing.responseEnd;
    pageLoadEventStart = timing.loadEventStart;
    pageLoadEventEnd = timing.loadEventEnd;
    pageLoadTime = timing.navigationStart;
}
var timingOutput =
    "requestStart: " + pageRequestStart + "\n"
    + "responseStart: " + pageResponseStart + "\n"
    + "responseEnd: " + pageResponseEnd + "\n"
    + "loadEventStart: " + pageLoadEventStart + "\n"
    + "loadEventEnd: " + pageLoadEventEnd + "\n"
    + "navigationStart: " + pageLoadTime;
console.log(timingOutput); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-14T15:07:33.217

虽然我不确定您的具体情况，但[NavigationTiming API](http://www.w3.org/TR/navigation-timing/)对于 IE、Chrome、Firefox 和 Opera 来说是相当新的。在开发规范和在浏览器中实现的过程中，由于浏览器之间的各种实现差异，看到了许多类似于您上面描述的小错误。

您看到的错误可能已在最近的浏览器版本中得到修复。如果您仍然在运行的浏览器上始终看到该问题，您可以尝试使用[NavigationTiming 的 W3C webperf 测试用例](http://w3c-test.org/webperf/tests/)来查看是否有任何故障。

# c++ - 使用 union 作为 boost::asio 的序列化程序

> ID：14877133
> 
> 赞同：0
> 
> 时间：2013-02-14T14:33:53.937
> 
> 标签：c++, serialization, boost, boost-asio, unions

我想知道是否没有人使用联合来序列化 boost::asio 发送方/接收方的结构。我已经搜索过一些东西，但我发现的（还）都是[这样](https://stackoverflow.com/questions/652193/serialize-and-send-a-data-structure-using-boost)或[这样](http://pastebin.com/gd3wHYdq)的例子。

所以我这样做了：

```
struct ST {
  short a;
  long b;
  float c;
  char c[256];
}
... 

void sender::send(const ST &_packet) {
  union {
    const ST &s;
    char (&c)[sizeof(ST)];
  }usc = {_packet};

  socket.send_to(boost::asio::buffer(usc.c, sizeof(ST)), endpoint);
}
...

ST var = {1234, -1234, 1.4567, "some text"};
sercer.send(var); 
```

所以我现在的问题是，**对基本数据类型进行序列化是不好的做法吗？**

我知道我不能直接发送 var 大小的字符串，因此我可以使用 boost::serialization。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T15:26:15.543

这确实是不好的做法。您发送的是（应该是）一个字节序列，其中包含系统上联合中任何内容的确切二进制表示。问题是：

1.  您用 ST 填充 usc 联合，但将其作为 char[] 访问，这会产生未定义的行为（但可能适用于所有常见系统）。
2.  您可能希望在接收方以相反的顺序执行相同的操作。再次UB，但可能有效。
3.  麻烦来了：您以系统特定的格式发送数据，在接收系统上不必相同，*对于相同的结构定义*。这包括
    *   整数类型的字节顺序（小/大端）
    *   类型的大小，不仅是整数（例如 sizeof(long) 有时在 32 位和 64 位系统之间不同，或者在 64 位系统上的不同编译器之间）
    *   填充字节
    *   sizeof(ST) 本身可能有很大不同

简单地说：不要这样做。如果您仍然使用 boost::serialization，请将其用于整个 ST 结构，而不仅仅是用于其中的字符串。如果您的数据结构变得稍微复杂一点（例如，包含指针、具有重要的构造函数等），无论如何您都必须这样做。

# node.js - Mongoose 复杂（异步）虚拟

> ID：14877134
> 
> 赞同：7
> 
> 时间：2013-02-14T14:33:52.910
> 
> 标签：node.js, mongodb, asynchronous, mongoose, virtual

我有两个**猫鼬模式**如下：

```
var playerSchema = new mongoose.Schema({
    name: String,
    team_id: mongoose.Schema.Types.ObjectId
});
Players = mongoose.model('Players', playerSchema);

var teamSchema = new mongoose.Schema({
    name: String
});
Teams = mongoose.model('Teams', teamSchema); 
```

当我查询 Teams 时，我还会获得**虚拟生成的小队**：

```
Teams.find({}, function(err, teams) {
  JSON.stringify(teams); /* => [{
      name: 'team-1',
      squad: [{ name: 'player-1' } , ...]
    }, ...] */
}); 
```

但我**无法****使用 virtuals**得到这个，因为我需要一个**异步**调用：

```
teamSchema.virtual('squad').get(function() {
  Players.find({ team_id: this._id }, function(err, players) {
    return players;
  });
}); // => undefined 
```

实现此结果的最佳方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T15:16:19.927

这可能最好作为您添加的[实例方法](http://mongoosejs.com/docs/guide.html#methods)`teamSchema`处理，以便调用者可以提供回调来接收异步结果：

```
teamSchema.methods.getSquad = function(callback) {
  Players.find({ team_id: this._id }, callback);
}); 
```

# c# - 在通用存储库中重用 DbContext

> ID：14877140
> 
> 赞同：1
> 
> 时间：2013-02-14T14:34:24.837
> 
> 标签：c#, generics, frameworks, repository, entity

我正在使用 Entity Framework 5.0 实现存储库模式 - 至少我认为我是 :)。这就是我正在使用的

```
public abstract class GenericRepository<C, T> :
 IGenericRepository<T>
    where T : class
    where C : DbContext, new()
{
    private bool disposed = false;
    private C _entities = new C();
    protected C Context
    {
        get { return _entities; }
        set { _entities = value; }
    }

    public virtual IQueryable<T> GetAll()
    {
        IQueryable<T> query = _entities.Set<T>();
        return query;
    }

    public IQueryable<T> FindBy(System.Linq.Expressions.Expression<Func<T, bool>> predicate)
    {
        IQueryable<T> query = _entities.Set<T>().Where(predicate);
        return query;
    }

    public virtual void Add(T entity)
    {
        _entities.Set<T>().Add(entity);
    }

    public virtual void Delete(T entity)
    {
        _entities.Set<T>().Remove(entity);
    }

    public virtual void Edit(T entity)
    {
        _entities.Entry(entity).State = System.Data.EntityState.Modified;
    }

    public virtual bool Save()
    {
        return (_entities.SaveChanges() > 0);
    }

    protected virtual void Dispose(bool disposing)
    {
        if (!this.disposed)
            if (disposing)
                _entities.Dispose();

        this.disposed = true;
    }

    public void Dispose()
    {
        Dispose(true);
        GC.SuppressFinalize(this);
    }
} 
```

之后这个类被特定的存储库类继承 - 比如说 PlaceRepository

```
public class PlaceRepository : GenericRepository<DbEntities, Place>, IPlaceRepository
{ } 
```

在另一层（业务层）中，我正在创建 PlaceRepository 类的实例 - 在名为 PlaceController 的类中。此类具有 PlaceEntity (CRUD) 的特定方法。在这个 PlaceController 中，我有一种方法用于在数据库中插入 Place 实体，但同时我在另一个表中插入一些东西（比如说 Country 表）。对于 Country 表上的 CRUD 操作，我有另一个名为 CountryRepository 的存储库。

综上所述，我在 Place Controller 中的方法创建了两个不同存储库的实例，以使用它们的方法，从而创建了两个不同的 DbContext 上下文。请参阅下面的代码

```
public class PlaceController 
{ 
   public bool InsertPlace(Place toInsert)
   {
      PlaceRepository _placeRepo = new PlaceRepository();
      _placeRepo.Add(toInsert);

      Country _country = new Country();

      _country.Name = "default";

      CountryRepository _countryRepo = new CountryRepository();

      _countryRepo.Add(_country);

     //now i must call save on bothRepositories
     _countryRepo.Save(); _placeRepo.Save();

}
} 
```

我需要对这种情况提出意见。创建上下文类的 2 个实例以进行两次插入是否很好？如果不是我应该考虑使用/实现另一种模式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T14:54:52.380

您应该为此使用 IoC(DI) 容器。这将帮助您在整个项目中使用 1 个上下文实例。您也可以查看 serviceLocator 模式的方式，但我建议使用 IoC(DI) 容器。我喜欢 Castle.Windsor（DI 模式的实现），你也可以看看 Ninject。

# java - OutOfMemoryError：在 Rails 控制台上运行 jruby 但未使用 -J-Xmx 定义的所有内存时的 Java 堆空间

> ID：14877146
> 
> 赞同：1
> 
> 时间：2013-02-14T14:34:30.270
> 
> 标签：java, ruby-on-rails, jruby, rails-console, java-memory-model

我有一个使用 jruby 1.7 的 rails 3 应用程序，我试图在需要大量内存的情况下在本地开发环境（带有 jdk 7 的 OS X 10.8）上使用 rails 控制台。我按如下方式运行 rails 控制台：

> jruby -J-Xms1024m -J-Xmx4096m -J-XX:+UseConcMarkSweepGC -J-XX:+CMSIncrementalMode -S rails c samuel_hml

然后我使用 rails 控制台开始一个长时间运行的进程/

jruby java 进程在引发“OutOfMemoryError: Java heap space”错误后总是失败。但是当我运行控制台并检查活动监视器时，它实际上从未使用超过 700 mb。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T13:43:44.243

我找到了解决方案：

```
RAILS_ENV=samuel_hml jruby -J-Xms1024m -J-Xmx4096m -J-XX:+UseConcMarkSweepGC -J-XX:+CMSIncrementalMode -S rails c 
```

jruby 忽略了我的“-J-Xms1024m -J-Xmx4096m -J-XX:+UseConcMarkSweepGC -J-XX:+CMSIncrementalMode”参数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T14:39:32.107

你的java周围有某种包装器吗？通常是`-Xmx`

```
jruby -Xms1024m -Xmx4096m -XX:+UseConcMarkSweepGC -J-XX:+CMSIncrementalMode -S rails c samuel_hml 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T14:57:03.010

这只是一个猜测，但是当我使用 java 本机缓冲区时遇到了类似的问题。我设置了 2048MB 的最大堆大小并得到了 OutOfMemoryError，即使监视器显示并非所有内存都已使用。真正的问题不在于 java 内存，而在于实际耗尽的本机内存。我用系统监视器检查了它。

当我减少 java 的内存量为本地缓冲区提供更多可用空间时，我的问题得到了解决。

所以也许在这里你有类似的东西？

# android - 开始一个新的活动问题

> ID：14877148
> 
> 赞同：0
> 
> 时间：2013-02-14T14:34:36.397
> 
> 标签：android, android-intent

我创建了一个菜单，当我点击注册时，我想打开一个只有一行文本的新类。

该应用程序打开并运行，但是当我单击菜单中的“注册”按钮时，应用程序崩溃了。我没有代码错误。

你能看到我的问题吗？

```
public boolean onOptionsItemSelected(MenuItem item) {    
    // Handle item selection    
    switch (item.getItemId()) {        
    case R.id.register: 

        Intent intent = new Intent(MeorNot.this, AddMember.class);
        startActivity(intent);

        return true; 
    }
} 
```

这是我尝试开设的新课程

```
package com.meornotFinal;

import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;

public class AddMember extends Activity {

    protected void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);

        TextView textview = new TextView(this);
        textview.setText("Add member");
        this.setContentView(textview);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T14:48:04.000

检查您的活动

```
<activity android:name="AddMember.class"> in AndroidManifest.xml file. 
```

您忘记添加此行。所以在 androidmanifest.xml 文件中也添加这一行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T14:41:54.467

您正在尝试设置 a `View`in`setContentView()`而不是 a`layout`

`this.setContentView(textview);`

如果您打算这样做，那么您需要以编程方式创建一个布局，例如

```
RelativeLayout relativeLayout = new RelativeLayout(this); 
```

然后你可以添加你`TextView`的并设置你的布局`setContentView()`

除非您需要这样做，否则更简单的方法可能是创建 xml 布局，然后在调用后`TextView`从那里获取您的`findViewById(R.id.textView1)``setContentView(R.layout.your_layout_file);`

**日志猫**

要打开 logcat，如果还没有在 Eclipse 中，转到 Window-> Show View -> Other -> Android-> Logcat。

这将为您提供一个控制台，用于记录错误和其他调试信息。当你的应用程序崩溃时，它会给你原因，通常是一个带有行号的java文件，它崩溃了。如果错误发生在该行之前，您可能需要进一步挖掘，但这将为您提供一个很好的起点。

一个例子可能是

```
Caused by: java.lang.NullPointerException
08-07 08:24:02.516: ERROR/AndroidRuntime(334):     at your_app.org.ThisActivity.onCreate(ThisActivity.java:26) 
```

然后你就知道开始查看第 26 行的内容`ThisActivity`是否为空

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T14:43:50.290

您在单击*注册*按钮后调用的活动的当前代码块：

```
public class AddMember extends Activity {

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        TextView textview = new TextView(this);
        textview.setText("Add member");
        this.setContentView(textview);

    }
} 
```

您需要将 更改`this.setContentView(textview);`为如下内容：

```
public class AddMember extends Activity {

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.a_layout_in_your_layout_folder);

            // CAST YOUR TEXTVIEW HERE
    }
} 
```

在 中`a_layout_in_your_layout_folder`，您可以保留一个并在运行时`LinearLayout`添加您的。`TextView`我不太明白`TextView`在布局 XML 中声明 a 会是一个更简单的选择。

但我想每个人都是他自己的。

# php - 将 PHP 数组传递给 Jquery 幻灯片

> ID：14877149
> 
> 赞同：-1
> 
> 时间：2013-02-14T14:34:42.583
> 
> 标签：php, jquery

如何从 PHP 中获取我的数组并在图库函数中填充 imagearray？

```
 $leftimages = $images->GetSlideShowImages($userid,$campaignid,$screenid,'midleft');
       var phparray = <?php echo json_encode($leftimages) ?>;
$.each(phparray, function (i, elem) {
           imagesarray.push(elem['image']); 
});

      var mygallery=new gallery({
wrapperid: "temp1_leftshow_f", //ID of main gallery container,
dimensions: [500, 300], 

    imagearray: [
    ["http://myimageurl1.jpg", "", "_new", "text1"],
    ["http://myimageurl2.jpg", "", "_new", "text2"],
    ["http://myimageurl3.jpg", "", "_new", "text3"],
], 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T14:38:41.550

在您看到正在形成的 javascript 数组时，您可以注入一些 PHP 来输出值。

例如：

```
imagearray: [
<?php
    // LOOP AND PRINT
    // e.g. print('["http://myimageurl1.jpg", "", "_new", "text1"],');
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T14:51:31.773

```
 $leftimages = $images->GetSlideShowImages($userid,$campaignid,$screenid,'midleft');
   var phparray = <?php echo json_encode($leftimages) ?>;
 $.each(phparray, function (i, elem) {
       imagesarray.push(elem['image']); 
     });

  var mygallery=new gallery({
   wrapperid: "temp1_leftshow_f", //ID of main gallery container,
   dimensions: [500, 300], 

imagearray: [
<? for ($i=1;$i++,$i<4){?>
<?php echo $comma; $comma=",";?>["http://myimageurl<?php echo $i;?>.jpg", "", "_new", "text<?php echo $i;?>"]
 <?php }?>
 ], 
```

# objective-c - iPad 磁盘加密是否仅影响一个应用程序或整个系统

> ID：14877151
> 
> 赞同：5
> 
> 时间：2013-02-14T14:34:47.403
> 
> 标签：objective-c, ipad, security, encryption

我需要我的原生 iPad 应用程序以加密形式存储其数据（例如通过 HTTPS 下载的 .DOC 文档）。这些 .DOC 文件将在 iPad 上的 3rd 方应用程序中打开。

我需要知道是否有一种方法可以加密我的应用程序和第三方应用程序的数据？这意味着我的 .DOC 文件永远不会以未加密的形式存储在设备上。（这里的动机是我的应用程序下载了包含敏感信息的文档，我希望这些文档可以在 iPad 上阅读，但有磁盘加密保护层。）

我正在阅读[Advanced App Tricks @ apple.com](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/AdvancedAppTricks/AdvancedAppTricks.html)的“使用磁盘加密保护数据”部分，但找不到任何相关信息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T15:30:58.043

首先，让我们摆脱**硬件加密**方面的影响：

iOS 支持对磁盘上的所有内容进行硬件加密。它使用与您的设备密码无关的密钥进行加密。此功能允许快速擦除设备数据（通过覆盖设备加密密钥）。但是，它并不能真正保护您的数据不被可以获取您设备的熟练闯入者检索；越狱将解决这个问题。

**通过数据保护 API 对每个文件进行加密：**可以通过在某些文件上设置标志来告知 iOS 某些文件将被加密。然后使用设备密码（如果已设置）对它们进行加密。**注意：如果用户没有设置密码，则不会应用此额外保护！**因此，从技术上讲，这种保护是您无法控制的，除非您的用户在执行密码锁定策略（使用 iPhone 配置实用程序或类似工具）的组织中工作。

**使用 CommonCrypto 加密：**您可以使用诸如此类的加密 API 手动进行自己的加密/解密。请注意，如果您不知道自己在做什么**，则很容易滥用此类 API 并最终得到不安全的加密**。但是，有一些包装器（例如[RNCryptor](https://github.com/rnapier/RNCryptor)）使得滥用这些 API 变得更加困难。

**保护第三方应用程序使用的文件：**您能否说明您的应用程序将如何与第三方应用程序共享文件？

更多信息：

*   [http://support.apple.com/kb/HT4175](http://support.apple.com/kb/HT4175)

*   [http://www.ilounge.com/index.php/articles/comments/ios-encryption-and-data-protection/](http://www.ilounge.com/index.php/articles/comments/ios-encryption-and-data-protection/)

*   [http://developer.apple.com/library/ios/#documentation/security/Conceptual/cryptoservices/Introduction/Introduction.html#//apple_ref/doc/uid/TP40011172-CH1-SW1](http://developer.apple.com/library/ios/#documentation/security/Conceptual/cryptoservices/Introduction/Introduction.html#//apple_ref/doc/uid/TP40011172-CH1-SW1)

*   [https://github.com/rnapier/RNCryptor](https://github.com/rnapier/RNCryptor)

**更新**

使用时`UIDocumentInteractionController`：

使用此方法将文档移交给另一个应用程序后，数据将不在您的手中，第三方应用程序可以使用它做自己喜欢的事情。如果您对此感到满意，并且您主要关心的只是将文档以受保护的方式存储在您的设备上，那么有几种可能性：

*   依靠数据保护 API 保护磁盘上的文档（用户必须设置密码，并且您需要告诉 iOS 特定文件要受到保护才能正常工作）

*   [使用此处](https://stackoverflow.com/a/12063336/348476)提到的 NSURLProtocol 技巧即时解密磁盘上的加密文件

# c# - 从多个文件中提取模板（模式检测）

> ID：14877153
> 
> 赞同：1
> 
> 时间：2013-02-14T14:34:55.747
> 
> 标签：c#, code-generation

在 C# (Visual Studio) 中的给定解决方案上，我需要检测遵循某个模板的类并提取该模板以供以后生成代码。

换句话说，我需要比较 2 个类（文件）并从中提取一个通用模板。该模板将用于以后的代码生成，此时程序员将不得不编写更少的代码。

有没有人可以给我一个关于如何做到这一点的想法？

还有一个问题，是否有可能获得由 Visual Studio 制作的句法/语义树？

肿瘤坏死因子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T14:42:56.520

对于第一个问题，我认为您应该研究 diff 算法以找到 2 个文本文件的公共部分，例如[此处](http://www.codeproject.com/Articles/6943/A-Generic-Reusable-Diff-Algorithm-in-C-II)。

对于第二个问题，我建议看看[Roslyn](http://msdn.microsoft.com/en-us/vstudio/roslyn.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-06T14:25:03.310

最后我用户

*   [NRefactory](https://github.com/icsharpcode/NRefactory)用于编译代码，我获得了 AST。
*   使用自定义标签重写代码（eq: for --> loop_start）
*   展平树获得一个长标签数组（eq：class_start，method_start，...end，end）
    这是2个文件
*   我使用“贪婪字符串平铺算法”比较了 2 个数组
*   从这里我已经有了模板文件。

# ssl - Worklight SSLPeerUnverifiedException：对等体未通过身份验证

> ID：14877161
> 
> 赞同：1
> 
> 时间：2013-02-14T14:35:13.230
> 
> 标签：ssl, ibm-mobilefirst

这是 Worklight 中以下帖子的延续： [https ://www.ibm.com/developerworks/forums/thread.jspa?threadID=470764](https://www.ibm.com/developerworks/forums/thread.jspa?threadID=470764)

正如 Idan 在最后一条评论中所建议的`JAVA_HOME`那样，到目前为止，Linux 机器上还没有设置环境变量。问题是即使我设置了`JAVA_HOME`环境变量，我也不确定要添加哪个 jdk 路径，因为 Linux 机器上存在多个实例。

请建议我选择哪个 jdk 路径。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T15:21:06.227

You can find the Worklight system requirements depending on what version you are using, and what set up you need. However, if I remember correctly, I think you are cool using Oracle JDK 1.7 or IBM JDK 1.6.

# c++ - 如何创建用 C++ 编写的受保护程序的库/插件/API？

> ID：14877165
> 
> 赞同：1
> 
> 时间：2013-02-14T14:35:31.867
> 
> 标签：c++, api, plugins, wrapper, protected

对于我的大学，我们正在研究“导航控制器”，其中一部分是我们必须为受保护的程序创建一个库（API？）/插件。

假设该程序是汽车的“导航控制器”，因此该程序可以制作汽车将要行驶的道路的导航网格，并计算应该在道路上行驶的位置以及转弯时会计算您是否应该刹车并在转弯的外侧或内侧...

现在我们需要为这个导航控制器创建一个 API 或库或适配器模式（？）。导航控制器的算法应该隐藏在文件中，它不是开源的。它是用 C++ 编写的。

任何正在制作游戏的程序员，比如说“汽车模拟器”（而不是飞行模拟器），想要在他们的游戏中提供一个选项，你可以将汽车放在“自动驾驶”上，想要这个插件，导航插件......

程序员应该能够“包含”我们的插件/库/API 并使用我们的功能，例如

```
int CalculateSteeringAxis(Pos currentPosition, Goal currentGoal) 
```

他应该看不到我们的代码/算法。任何游戏都应该能够“包含”我们的插件，所以我们的插件是一个独立的通用插件。

我找到了诸如“适配器模式/包装器”/“Win32 API”/“装饰器”之类的方法。这个问题的最佳解决方案可能是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T14:51:01.670

您可以将代码编译为动态库（在 Windows 下称为“dll”，在 Linux 下称为“so”）或静态库。
然后将该库发布给其他程序员，他们可以为他们的游戏链接该库。
由于库被编译为二进制，其他人看不到您的源代码和算法。

# java - 在 JSP 中访问对象属性的问题

> ID：14877166
> 
> 赞同：0
> 
> 时间：2013-02-14T14:35:35.287
> 
> 标签：java, class, jsp, jsp-tags

我目前正在 Webpshere 中进行 JAVA 迁移项目，最近提出了一个问题，即在会话中访问 DECLARACION 类型的对象的属性。

之前，我用过这个并且是正确的：

```
<c:out value="${sessionScope.declaracion.id}" /> 
```

现在该行给了我错误...我替换为以下内容：

```
<jsp:useBean id="declaracion" scope="request" class="ve.declaration.objetos.Declaracion"></jsp:useBean>
<jsp:getProperty name="declaracion" property="id"/> 
```

由于此对象具有类型属性 CONTRIBUYENTE，因此服务器向我抛出以下错误：

```
java.lang.NoClassDefFoundError: ve.declaracion.objetos.Contribuyente 
```

如果我使用一个所有属性都是标准数据类型的类，那么 jsp 可以正常工作。任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T16:58:51.480

在类路径中应该有一个名为**ve.declaracion.objetos.Contribuyente**的类。由于 JVM 找不到该类，因此引发错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T13:17:21.180

**我在包ve.declaration.objetos.***中创建了一个包含所有类的库，在 Websphere 中部署了这个库并且它工作正常。

令我印象深刻的是，在将应用程序迁移到 Websphere 之前，它在没有这个库的情况下也能正常工作....不确定我得到了最新的代码。

# wcf - 在 WCF 项目中处理未处理异常的最佳实践？

> ID：14877169
> 
> 赞同：0
> 
> 时间：2013-02-14T14:35:49.167
> 
> 标签：wcf, flourinefx

我有一个 WCF 项目，它处理我来自 flex 应用程序的所有请求。该项目有大约 30 种方法。处理所有异常的最佳做法是什么？在大多数情况下，它仅用于记录。使用 try/catch 扭曲每种方法（并且可能有更多的数据用于记录）或在一个地方处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T15:42:35.133

通常你想实现 IErrorHandler 接口来处理未处理的异常。查看这篇文章了解更多详细信息[IErrorHandler 接口](http://msdn.microsoft.com/en-us/library/system.servicemodel.dispatcher.ierrorhandler.aspx)

# ruby-on-rails-3.2 - 创建后无法获取会话值

> ID：14877175
> 
> 赞同：2
> 
> 时间：2013-02-14T14:36:09.760
> 
> 标签：ruby-on-rails-3.2

我的控制器是：

```
 def index
     puts session.inspect
   end

  def create
    @asset = Asset.new(params[:asset])]
    respond_to do |format|
      if @asset.save
        unless session[:assets] && session[:assets].kind_of?(Array)
          session[:assets] = Array.new
        end
        session[:expires_at] = Time.now + 1.hour
        session[:assets] << @asset  
      end
  end 
```

我想将一些模型保存到会话中并稍后获取，但是创建一些资产后，我什么也得不到

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T22:22:48.580

不要将它们存放在这里，请使用relashionship。例如，在用户中，`has_many :assets`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T00:22:33.613

问题是您试图在会话中存储复杂的对象（资产） - 不幸的是，这不起作用。您要做的是在会话中保存唯一键并在下次加载时从数据库中检索对象：

`session[:assets] << @asset.id`

在索引中，您可以调用：

`puts Asset.where(:id => session[:assets]).all.inspect`

# entity-framework-4 - 是否可以在没有导航属性的情况下查询多对多实体

> ID：14877179
> 
> 赞同：0
> 
> 时间：2013-02-14T14:36:16.393
> 
> 标签：entity-framework-4

如果双方在代码（ICollection）中没有导航属性但存在关联，是否可以在多对多关系中的实体上创建连接查询？

也许以某种方式通过 linq 或 Entity SQL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T12:07:57.773

```
 public partial class User
    {

        public virtual int Id   {
            get { return _id; }
            set { _id = value; }
        }

        public virtual string Mail  {
            get { }
            set { _}
        }

        public virtual string Password  {
            get { }
            set { ; }
        }
}

 public partial class UserGroupNew
    {

        public virtual int Id   {
            get {  }
            set { }
        }

        public virtual string Name  {
            get {  }
            set { }
        }

        public virtual string Description   {
            get {  }
            set {  }
        }
} 
```

这两个实体是多对多的关系。如果我可以拥有没有导航属性的模型并仅通过存储库类管理关系，那就太好了。Junction 类没问题，但最好的选择（如果可能的话）是在没有额外属性或类的情况下处理它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T15:06:00.403

如果联结表是实体模型的一部分，您可以执行以下操作：

```
from a in db.AAntities
join ab in db.ABs // the junction class
     on a.Id equeals ab.IdA
join b in db.BEntitites
     on ab.IdB equals b.Id into bees
select new { A = a, Bees = bees } 
```

这将生成 A 实体及其相关 B 实体的列表。

# r - 带有少量向量的条件查询

> ID：14877181
> 
> 赞同：1
> 
> 时间：2013-02-14T14:36:18.790
> 
> 标签：r, compare

简短的问题..带有以下示例数据：

```
Equips <- c(1000829,1000829,1000829,1000829,10002244,10002244,
10002244,10002244,10002244,10002244)
Notifs <-     c(306989814,306991263,306991263,306991263,306749278,306749278,
306749278,306749278,306854440,306868916)
Comps <- c("Ignition and Flame Detection","Ignition and Flame Detection","Control Box",
"Ignition and Flame Detection","Service Boiler!!!","CH Components Passive",
"Ignition and  Flame Detection","not grouped in WCC",
"Electrical Components","Flue Duct")
rank <- c(1,2,2,2,1,1,1,1,2,3)
df <- data.frame(Equips,Notifs,Comps,rank) 
```

Equip就像一台机器的数字，所以有2台机器，Notifs是访问次数=> rank显示机器的访问次数。Comps 是需要修复的组件。我想看看是否有组件，在每次访问这台机器时都进行了修复。

例如机器 1，点火和火焰检测在 rank 1 和 rank 2 被修复，所以我想要一个输出 TRUE，机器 2 被访问了 3 次，但是在 rank1、2 和 3 中没有被修复的组件所以输出应该是假的。（原始数据集，Equips 访问次数高达 10 次！！）

我有一个类似的问题并且有这个代码。

但它不工作。也许你可以得到它：

```
 result <- by(df, df$Equips, function(d) {
    nb.comps <- length(unique(df$Comps))
    tab <- table(df$rank, df$Comps) > 0
    tab <- margin.table(tab, 2)
    return(sum(tab>=nb.comps)>0)
  })

data.frame(nb.equips=dim(result), nb.matched=sum(result)) 
```

我真的很想要这样的东西，因为我没有机会安装任何包，而且由于数据集的大小，我真的需要像最后一个代码一样的整体视图。如果您有任何问题，请询问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T14:49:50.837

也许这个？您的代码中的问题是您在函数内部替换`d`为。`df`在我看来，我的回答在[你原来的问题](https://stackoverflow.com/questions/14769346/checking-for-equality)中是正确的......

```
result <- by(df, df$Equips, function(d) {
    nb.comps <- length(unique(d$Comps))
    tab <- table(d$rank, d$Comps) > 0
    tab <- margin.table(tab, 2)
    return(sum(tab>=nb.comps)>0)
  }) 
```

这使 ：

```
R> result
df$Equips: 1000829
[1] TRUE
-------------------------------------------------------- 
df$Equips: 10002244
[1] FALSE
R> data.frame(nb.equips=dim(result), nb.matched=sum(result))
  nb.equips nb.matched
1         2          1 
```

# javascript - html5 画布内的类似 Dom 的内容？

> ID：14877185
> 
> 赞同：0
> 
> 时间：2013-02-14T14:36:37.823
> 
> 标签：javascript, html, dom, canvas

我正在开发 html5 上的小游戏，需要一个教程，在画布内显示类似 dom 的内容的最佳方式是什么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T14:39:13.683

有很多方法可以做到这一点。但是，我建议您选择游戏引擎，而不是尝试从零开始构建游戏。例如查看这个游戏引擎：http: [//craftyjs.com/](http://craftyjs.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T14:38:36.147

[https://developer.mozilla.org/en-US/docs/HTML/Canvas/Drawing_DOM_objects_into_a_canvas](https://developer.mozilla.org/en-US/docs/HTML/Canvas/Drawing_DOM_objects_into_a_canvas)
Stackoverflow 问题：[我可以在画布内放置一个 HTML 按钮吗？](https://stackoverflow.com/questions/4797748/can-i-put-a-html-button-inside-the-canvas)

# expression-blend - MS Blend preview Designer 灾难性故障

> ID：14877186
> 
> 赞同：0
> 
> 时间：2013-02-14T14:36:38.987
> 
> 标签：expression-blend, silverlight-5.0

我知道这种问题必须在微软支持论坛上发布，我也是，但仍然没有得到答案。也许这里有人可能知道是什么导致了这个问题。所以.. 我对 silverlight 5 的混合有一个奇怪的问题。我创建了新的空白新项目，每次我尝试添加控件（按钮、文本框或其他东西）时，我都会收到错误异常。这是屏幕截图： ![在此处输入图像描述](../Images/d2509fe741f26ff12cdd91176833ed89.png)

如果我离开控制内容属性空白字符串“”错误消失。

这是我电脑上安装的相关软件列表：

*   VS 2012 溢价

    Silverlight 5 版本 4.1.20402.0 的 MS 混合预览

    Silverlight 5 工具包 - 2011 年 12 月

    Silverlight 开发人员 x64

    银光 5

    操作系统是 Windows 7 x64 企业版

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T21:44:47.087

尝试使用 Visual Studio 2012 的最新 CTP 更新（CTP 更新 3）进行更新，并使用 CTP 之后 Visual Studio 附带的 Blend，而不是预览版。

CTP 可以在这里找到：http: [//www.microsoft.com/en-us/download/details.aspx?id=36539](http://www.microsoft.com/en-us/download/details.aspx?id=36539)

# macos - 更改页面方向不会缩放内容

> ID：14877187
> 
> 赞同：2
> 
> 时间：2013-02-14T14:36:38.240
> 
> 标签：macos, cocoa, printing

我正在尝试在我的 OS X 应用程序中实现打印，但有一个我无法解决的问题，我希望你们中的一个人有一个想法。

例如，在 Safari 中，您可以点击打印，打印面板将显示内容将如何以纵向模式打印，如果您单击方向按钮，它将以横向模式显示内容。

![人像模式](../Images/e22807beff78195851d4c4972b5c9e66.png)

![横向模式](../Images/9cf24d21e1abc5d0d4ef10d861f900cf.png)

请注意，内容会随着方向的每次变化而缩放。

如果我在我的应用程序中尝试相同的内容，则内容不会改变；它的宽度在纵向和横向上保持不变。

NSPrintOperation 或 NSPrintInfo 中是否有我可能忽略的设置？

**更新**- 现在使用代码：

```
- (NSPrintOperation *)printOperationWithSettings:(NSDictionary *)printSettings error:(NSError **)outError {
    NSPrintInfo *pInfo = [NSPrintInfo sharedPrintInfo];
    [pInfo setLeftMargin:32];
    [pInfo setRightMargin:32];
    [pInfo setTopMargin:64];
    [pInfo setBottomMargin:64];
    [pInfo setHorizontalPagination:NSFitPagination];
    [pInfo setVerticallyCentered:NO];
    [[pInfo dictionary] setValue:[NSNumber numberWithBool:YES] forKey:NSPrintHeaderAndFooter];
    [[pInfo dictionary] addEntriesFromDictionary:printSettings];

    PrintTextView *printView = [[[PrintTextView alloc] initWithFrame:[pInfo imageablePageBounds]] autorelease];
    printView.printJobTitle = @"Printed";

    MSTablePrint *tPrint = [[[MSTablePrint alloc] init] autorelease];
    NSMutableArray *itemArray = [[[NSMutableArray alloc] init] autorelease];

    /*
        Objects are added to "itemArray"
     */

    NSAttributedString *atString = [tPrint attributedStringFromItems:itemArray];
    [[printView textStorage] setAttributedString:atString];

    NSPrintOperation *printOp = [NSPrintOperation printOperationWithView:printView printInfo:pInfo];

    return printOp;
}

- (IBAction)print:(id)sender {
    NSError *printError = nil;
    NSPrintOperation *printOperation = [self printOperationWithSettings:nil error:&printError];
    [[printOperation printPanel] setOptions:[[printOperation printPanel] options] | NSPrintPanelShowsPageSetupAccessory];

    [printOperation runOperation];
} 
```

非常感谢您的帮助，最良好的祝愿，uem

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-27T21:02:13.007

您无法在 NSPrintOperation 设置或 NSPrintInfo 设置中完成布局更改。您将需要创建一个继承的视图。在该视图中，它们有两种方法（adjustPageHeightNew、adjustPageWidthNew）。当您需要更改视图布局时，会通知这些方法。确保你也调用了超级方法。

在该方法中，更改视图和所有子视图的布局。

```
- (void)adjustPageHeightNew:(CGFloat *)newBottom top:(CGFloat)oldTop bottom:(CGFloat)oldBottom limit:(CGFloat)bottomLimit
{
    [super adjustPageHeightNew:newBottom top:oldTop bottom:oldBottom limit:bottomLimit];
    {
        NSPrintOperation *printOperation = [NSPrintOperation currentOperation];

        if(printOperation)
        {
            NSPrintInfo *printInfo = [printOperation printInfo];
            CGFloat pageMargineX = ([printInfo leftMargin] + [printInfo rightMargin]);
            CGFloat pageMargineY = ([printInfo topMargin] + [printInfo bottomMargin]);
            CGFloat pageWidth = ([printInfo paperSize].width - pageMargineX);
            CGFloat pageHeight = ([printInfo paperSize].height - pageMargineY);

            [self setFrame:NSMakeRect(0, 0, pageWidth, ([[self subviews] count] * pageHeight))];

            for(NSUInteger nView = 0; nView < [[self subviews] count]; nView ++)
            {
                NSTextView *PagedView = [[self subviews] objectAtIndex:nView];

                [PagedView setFrame:NSMakeRect(0, (nView * pageHeight), pageWidth, pageHeight)];
            }
        }
    }
} 
```

# delphi - 编译器的“优化”选项如何影响使用 TestComplete 9 进行的测试

> ID：14877191
> 
> 赞同：4
> 
> 时间：2013-02-14T14:36:54.393
> 
> 标签：delphi, testcomplete

在 Smart Bear 网站上作为带有调试信息的应用程序的推荐关闭选项“优化”（证明：http: [//support.smartbear.com/viewarticle/32714/](http://support.smartbear.com/viewarticle/32714/)）

谁能解释这个选项的工作原理以及它如何影响 Testcomplete 9 下的测试？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-14T14:43:34.630

启用优化后，行号和编译代码之间的关系就不是那么清楚了。这会影响 TestComplete 使用的 TD32 调试信息的准确性。为确保调试信息尽可能准确，SmartBear 建议禁用优化。

不过，优化应该对程序的运行时行为没有实际影响。（如果是这样，那么您要么依赖于未定义的行为，要么您已经在优化器中发现了一个错误。假设是前者，直到您可以证明后者。）

# pdf-generation - XSL-FO 动态表列宽

> ID：14877194
> 
> 赞同：13
> 
> 时间：2013-02-14T14:37:05.773
> 
> 标签：pdf-generation, xsl-fo, multiple-columns, apache-fop

就目前而言，我有大约 12 列，所有列的宽度完全相同。问题是某些列不需要那么多空间。如何让列适合其内容？列需要是动态宽度。

我试过了

```
<fo:table table-layout="auto"> 
```

和

```
<fo:table-column column-width="proportional-column-width(1)" column-number="1"/>
<fo:table-column column-width="proportional-column-width(1)" column-number="2"/>
<fo:table-column column-width="proportional-column-width(1)" column-number="3"/> 
```

似乎没有什么办法。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-14T16:41:28.080

不幸的是，我没有找到一种简单的方法来获得动态列宽。我最终得到了这个：

```
<fo:table-column column-number="1"  column-width="35pt" />
<fo:table-column column-number="2"  />
<fo:table-column column-number="3"  />
<fo:table-column column-number="4"  />
<fo:table-column column-number="5"  />
<fo:table-column column-number="6"  />
<fo:table-column column-number="7"  />
<fo:table-column column-number="8"  />
<fo:table-column column-number="9"  />
<fo:table-column column-number="10" />
<fo:table-column column-number="11" />
<fo:table-column column-number="12" /> 
```

我指定第一列是因为数据永远不会改变。其余的我保持开放以适应他们的内容。以我现在需要的方式工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-20T05:53:21.733

您还可以以“百分比单位”指定单位。对我来说很好...

```
<fo:table-column column-number="1" column-width="75%" /> 
<fo:table-column column-number="2" column-width="25%" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-26T07:35:39.760

1.  对长列使用属性“proportional-column-width”，其余列设为默认值。
2.  检查每列的宽度，如果比其他列长，提供多少倍（如 2 倍或 3 倍或 4.5 倍甚至更多）。

例一：

```
<fo:table-column column-number="1" column-width="proportional-column-width(3)"/>
<fo:table-column column-number="2"/>
<fo:table-column column-number="3"/> 
```

例 2：

```
<fo:table-column column-number="1" column-width="proportional-column-width(3)"/>
<fo:table-column column-number="2" column-width="proportional-column-width(4)"/>
<fo:table-column column-number="3"/> 
```

# zend-framework2 - Zend Framework 2 Sql\Select 在查询中添加 " 引号

> ID：14877195
> 
> 赞同：1
> 
> 时间：2013-02-14T14:37:09.167
> 
> 标签：zend-framework2

我在使用 ZF2 的 Sql 对象时写了一个非常简单的查询...

```
$sql = new Sql($this->adapter);
$select = $sql->select()
->from('school')
->where(array("id = ?" => $id)); 
```

回声 $select->getSqlString();

但是，此返回的查询包含表名周围的“引号”......

```
SELECT "school".* FROM "school" WHERE id = '4' 
```

这显然会使查询不正确。有谁知道它为什么这样做以及如何阻止它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-05T11:56:09.480

恕我直言，getSqlString 方法是无稽之谈。如果您查看它的内部，您会发现它没有将驱动程序信息传递到呈现 SQL 字符串的函数中。结果，渲染器假定一些默认查询模板并简单地引用该值而不是使用 Mysql 模板。

尝试使用这个：

```
$select = $sql->select()
    ->from('school')
    ->where(array("id = ?" => $id));
$sql = new Sql($this->adapter);
$selectString = $sql->getSqlStringForSqlObject($select); 
```

如果在尝试仅使用 Zend\Db\Sql\Select 对象正确呈现“限制”子句几个小时后发现这一点。

# sql-server - 相当于 SQL Server 中的 Oracle 外部表

> ID：14877196
> 
> 赞同：5
> 
> 时间：2013-02-14T14:37:10.620
> 
> 标签：sql-server, oracle

SQL Server 中 是否有相当于[Oracle 的外部表的功能？](http://docs.oracle.com/cd/B19306_01/server.102/b14215/et_concepts.htm)

外部表是映射到文件系统中的平面文件的表。

这非常方便，因为它允许您使用标准 SQL 将平面文件作为表读取。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T08:07:50.680

[Harold Javier 的回答](https://stackoverflow.com/a/14877928/1083652)很好，
但您可能还想考虑将[OPENROWSET](http://msdn.microsoft.com/en-us/library/ms190312.aspx)与`BULK`关键字一起使用。

它与外部表不同，因为您不“创建”表，而是更多地查询。

它应该看起来像这样：

```
SELECT et.*
FROM OPENROWSET( BULK 'your_data_file', FORMATFILE = 'your_format_file.fmt') AS et 
```

您应该添加一个`fmt`文件，而不是在表定义中给出格式（如在 oracle 中）。
[这](http://msdn.microsoft.com/en-us/library/ms178129.aspx)是创建它的方法

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T15:12:54.233

您需要创建外部链接。使用文本 IISAM 创建链接服务器就是其中之一。您也可以查看此链接：( [http://msdn.microsoft.com/en-us/library/ms709353.aspx](http://msdn.microsoft.com/en-us/library/ms709353.aspx) )

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-15T12:30:24.327

升级到 sql server 2016 以获得您所需要的。

# multithreading - 对象方法的Perl线程

> ID：14877198
> 
> 赞同：8
> 
> 时间：2013-02-14T14:37:12.753
> 
> 标签：multithreading, perl, oop

这里是 Perl 菜鸟，所以请温柔:)

我编写了以下代码来在我打猎时跟踪我的狗（不是真的）。每次狗找到鸭子时，它都会向主线程发出信号，然后从包中的每只狗那里收集信息。

```
#!/usr/bin/env perl

use strict;
use warnings;
use v5.14;

use threads;

{
    package Dog;

    sub new {
        my ($class, $name, $dt) = @_;
        my $self = {
            dt => $dt,      # will find a duck every $dt seconds
            name => $name,
            ducksfound => 0
        };
        bless $self, $class;
    }

    sub hunt {
        #
        # the "thread" method -- the dog will hang around for $dt seconds,
        # then alert the main thread by sending SIGUSR1
        #
        my $self = shift;
        while (1) {
            sleep $self->{dt};
            $self->{ducksfound} += 1;
            kill USR1 => $$;
        }
    }

    sub bark {
        my $self = shift;
        sprintf "%s: found %d ducks!", ($self->{name}, $self->{ducksfound});
    }

    1;
}

my @dogs;

$SIG{USR1} = sub {
    say join ", ", map { $_->bark } @dogs;
};

push @dogs, Dog->new("Labrador", 1);
push @dogs, Dog->new("Retriever", 2);
push @dogs, Dog->new("Shepherd", 3);

threads->create( sub { $_->hunt } ) for @dogs;
$_->join for threads->list; 
```

**上述代码的预期输出将类似于：**

> 拉布拉多：找到 1 只鸭子！，猎犬：找到 0 只鸭子！，牧羊犬：找到 0 只鸭子！
> 
> 拉布拉多：找到 2 只鸭子！，猎犬：找到 0 只鸭子！，牧羊犬：找到 0 只鸭子！
> 
> 拉布拉多：找到 3 只鸭子！，猎犬：找到 0 只鸭子！，牧羊犬：找到 0 只鸭子！
> 
> 拉布拉多：找到 3 只鸭子！，猎犬：找到 1 只鸭子！，牧羊犬：找到 0 只鸭子！
> 
> 拉布拉多：找到 4 只鸭子！，猎犬：找到 1 只鸭子！，牧羊犬：找到 0 只鸭子！
> 
> 拉布拉多：找到 5 只鸭子！，猎犬：找到 1 只鸭子！，牧羊犬：找到 0 只鸭子！
> 
> 拉布拉多：找到 6 只鸭子！，猎犬：找到 1 只鸭子！，牧羊犬：找到 0 只鸭子！
> 
> 拉布拉多：找到 6 只鸭子！，猎犬：找到 1 只鸭子！，牧羊犬：找到 0 只鸭子！
> 
> 拉布拉多：找到 6 只鸭子！，猎犬：找到 1 只鸭子！，牧羊犬：找到 1 只鸭子！

**相反，我得到的是以下内容：**

> 拉布拉多：找到 1 只鸭子！，猎犬：找到 0 只鸭子！，牧羊犬：找到 0 只鸭子！
> 
> 拉布拉多：找到 2 只鸭子！，猎犬：找到 0 只鸭子！，牧羊犬：找到 0 只鸭子！
> 
> 拉布拉多：找到 3 只鸭子！，猎犬：找到 0 只鸭子！，牧羊犬：找到 0 只鸭子！
> 
> 拉布拉多：找到 0 只鸭子！，猎犬：找到 1 只鸭子！，牧羊犬：找到 0 只鸭子！
> 
> 拉布拉多：找到 4 只鸭子！，猎犬：找到 0 只鸭子！，牧羊犬：找到 0 只鸭子！
> 
> 拉布拉多：找到 5 只鸭子！，猎犬：找到 0 只鸭子！，牧羊犬：找到 0 只鸭子！
> 
> 拉布拉多：找到 0 只鸭子！，猎犬：找到 2 只鸭子！，牧羊犬：找到 0 只鸭子！
> 
> 拉布拉多：发现 0 只鸭子！，猎犬：发现 0 只鸭子！，牧羊犬：发现 1 只鸭子！

请注意，当另一只狗说话时，每只狗的鸭子数量如何重置为零。

关于我在阅读 Llama 时必须忽略的特定脚注的任何见解？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-14T17:28:23.653

根本问题是 Perl 变量在默认情况下不共享，这与关于哪个线程正在服务哪个信号以产生您所看到的结果的一些奇怪结合在一起。

当您生成狩猎线程时，每个线程都会获得自己的副本`@dogs`及其内容。这正是 Perl 线程的工作方式：解释器和它的当前状态—— `@dogs`, `%SIG`, `STDOUT`open——被整个克隆。要了解它是如何工作的，请考虑以下代码：

```
my %dog_decls = (
    Labrador    => 1,
    Retriever   => 2,
    Shepherd    => 3,
);

while (my ($name, $delay) = each %dog_decls) {
    my $dog = Dog->new($name, $delay);
    push @dogs, $dog;
    threads->create(sub { $dog->hunt });
}

$_->join for threads->list; 
```

克隆有时会发生`threads->create`，因此这些线程中的每一个都可以使用不同的版本`@dogs`。因此，`Dogs`当其中一个捕捉到鸭子时，该吠声的列表取决于哪个线程捕捉到信号！（另请注意，您可以`each`从该输出推断出恰好发出散列的顺序。）

> 猎犬：找到 0 只鸭子！，拉布拉多：找到 1 只鸭子！
> 
> 猎犬：找到 0 只鸭子！，拉布拉多：找到 2 只鸭子！
> 
> 寻回犬：发现 1 只鸭子！
> 
> 猎犬：找到 0 只鸭子！，拉布拉多：找到 3 只鸭子！
> 
> 猎犬：找到 0 只鸭子！，拉布拉多：找到 4 只鸭子！
> 
> 猎犬：找到 0 只鸭子！，拉布拉多：找到 0 只鸭子！，牧羊犬：找到 1 只鸭子！

回到您的代码：当`Labrador`线程（线程 1）唤醒时，它会更新`Labrador`'s`ducksfound`并发送`SIGUSR1`. 有人（我们稍后会详细讨论谁）看到了信号和`barks`所有`Dogs`. 但唯一`Labrador`改变的是线程 1 中的那个。`Retriever`和`Shepherd`线程（分别是线程 2 和 3）还没有看到对`Labrador`'s的更新`ducksfound`。

那么为什么一开始`ducksfound`打印的值是正确的呢？由于您安装信号处理程序的方式。你在整个进程范围内安装了它——记得我说`%SIG`的是克隆到你的线程的东西之一。因此，每个线程都有一个处理程序，用于`USR1`导致所有`Dogs`to `bark`。当您发送`USR1`到`$$`时，此时恰好处于唤醒状态的线程会捕获它。碰巧发送信号的线程是清醒的线程。

这就解释了为什么当`Retriever`抓到第一只鸭子时，它的`ducksfound`值是正确的，而`Labrador`'s 不是。 `Retriever`在线程 2 中捕获鸭子，该鸭子发送`SIGUSR1`给它自己，然后发送给它`barks`的所有`Dogs`. 但在线程 2 中，`Labrador`从未更新，因此树皮显示 0`Labrador`和 1 `Retriever`。

使用以下方法可以相当简单地解决非共享变量的问题`threads::shared`：

```
use threads::shared;
...
my @dogs :shared;
...
push @dogs, shared_clone(Dog->new("Labrador",  1)); 
```

现在，当一个线程更新 a 时`Dog`，所有线程都会看到它，因此哪个线程正在为信号提供服务并不重要。这很好，因为在您的代码中，“主线程”（线程 0）永远不会重新获得控制权。这可能没问题，但可能会导致比您预期的稍微奇怪的行为。

如果您确实希望存在一个管理器线程，则可能需要显式生成它：

```
# in Dog::new
        my ($class, $name, $hunter, $dt) = @_;
        ...
        hunter => $hunter,
# in Dog::hunt
        $self->{hunter}->kill('USR1');
# in main
my $hunter_thread = threads->create(
    sub {
        local $SIG{USR1} = sub {
            say join ", ", map { $_->bark } @dogs;
        };
        while (1) { usleep 100_000 } # higher resolution than hunt events
    }
);
...
push @dogs, shared_clone(Dog->new("Labrador", $hunter_thread, 1)); 
```

请注意，仅在不共享您的情况下放入管理器线程`Dogs`会导致线程唤醒以打印一堆零。你需要同时做这两件事才能得到你期望的结果。

# java - java.lang.IllegalArgumentException：无法将 Model.User[usrId=1] 类型类 Model.User 转换为类 Model.User

> ID：14877199
> 
> 赞同：0
> 
> 时间：2013-02-14T14:37:21.063
> 
> 标签：java, jsf-2, primefaces, glassfish

我正在使用 PrimeFaces dataTable 开发一个 jsf 页面来显示用户列表。用户存储在 Model.User 类的对象中。

```
<p:dataTable id="usersDataTable" value="#{userController.users}" var="u">              
  <!-- Other columns -->
  <p:column>
     <p:commandLink oncomplete="dlg.show()" value="Show Dialog">
        <f:setPropertyActionListener value="#{u}" target="#{userController.currentUser}" />
     </p:commandLink>
  </p:column>
</p:dataTable> 
```

该对话框将显示一条确认消息，但这并不重要。关键是，当我单击 commandLink 时，当前用户未设置，在 GlassFish 日志中，我可以通过以下堆栈跟踪看到此错误：

```
WARNING: java.lang.IllegalArgumentException: Cannot convert Model.User[ usrId=1 ]
type class Model.User to class Model.User 
javax.el.ELException: java.lang.IllegalArgumentException: Cannot convert Model.User[usrId=1 ] of type class Model.User to class Model.User
at com.sun.el.ExpressionFactoryImpl.coerceToType(ExpressionFactoryImpl.java:73)
at com.sun.faces.facelets.tag.jsf.core.SetPropertyActionListenerHandler$SetPropertyListener.processAction(SetPropertyActionListenerHandler.java:210)
at javax.faces.event.ActionEvent.processListener(ActionEvent.java:88)
at javax.faces.component.UIComponentBase.broadcast(UIComponentBase.java:769)
at javax.faces.component.UICommand.broadcast(UICommand.java:300)
at javax.faces.component.UIData.broadcast(UIData.java:1093)
at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794)
at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259)
at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
at java.lang.Thread.run(Thread.java:722)
 Caused by: java.lang.IllegalArgumentException: Cannot convert Model.User[ usrId=1 ] of type class Model.User to class Model.User
at com.sun.el.lang.ELSupport.coerceToType(ELSupport.java:412)
at com.sun.el.ExpressionFactoryImpl.coerceToType(ExpressionFactoryImpl.java:71)
... 35 more 
```

奇怪的是它不能将 Model.User 转换为 Model.User，这让我很震惊。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T15:14:46.307

就这一点而言，您的类路径很脏。您在`Model.User`类路径中有多个类副本，这些副本由不同的类加载器加载。

由类加载器 X 加载的类[`equals()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#equals%28java.lang.Object%29)与由类加载器 Y 加载的类并不完全相同。一般 Java EE Web 应用程序中的类由多个类加载器管理。在一个简单的 WAR 部署中，通常至少有四个：一个用于 JRE 的内部类（包括 JRE 的`/lib`文件夹），一个用于 servletcontainer 的内部类（包括服务器的`/lib`文件夹），一个用于由所有 webapps 共享的 servletcontainer 管理的公共库，最后一个一个特定于 webapp 本身（包括 webapp 的`/WEB-INF/lib`文件夹）。

想象一下，你已经`Model.User`在你的 webapp`/WEB-INF/classes`和另一个类中进行了类，可能是 JAR 文件的风格，在 JRE`/lib`或`/lib/ext`文件夹中（一些初学者不正确地尝试修复编译错误，而根本不理解“类路径”的概念） ，那么您将面临这个问题。

* * *

**与具体问题无关**，请处理您的[Java 命名约定](http://www.oracle.com/technetwork/java/javase/documentation/codeconventions-135099.html#367)。包名应该全部小写。尝试与标准不同（因此与*其他所有人*不同）并没有真正让您成为 Java 开发人员的焦点。

# c# - 如何在 xml 序列化中显示数据类型？

> ID：14877202
> 
> 赞同：0
> 
> 时间：2013-02-14T14:37:37.713
> 
> 标签：c#, xml, xml-serialization

我有这个类：

```
public class Computer 
    {
        [XmlAttribute("StorageType")]
        public int StorageType { get; set; }

        [XmlAttribute("StorageName")]
        public string StorageName { get; set; }

        public string IPAddress { get; set; }
        public string Name { get; set; }
    } 
```

我需要 xml 来显示某些元素中的数据类型（dt:dt="string"）：

```
<fpc4:Computer StorageName="{D37291CA-D1A7-4F34-87E4-8D84F1397BEA}" StorageType="1">
        <fpc4:IPAddress dt:dt="string">127.0.0.1</fpc4:IPAddress>
        <fpc4:Name dt:dt="string">Computer1</fpc4:Name>
    </fpc4:Computer> 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T15:24:43.437

您可以在您的类中创建一个属性，该属性充当子元素以充当数据类型属性，并使用给定对象上的反射执行以下操作。MethodBase 有一个名为 ReturnType 的属性，它将为您提供返回类型。

```
[XmlAttribute("DataType")]
public string DataType 
{
    get 
    { 
        return typeof(IPAddress).GetProperty("DataType").GetGetMethod().ReturnType.ToString();
    }
} 
```

这将产生以下 xml 行

```
<fpc4:Computer StorageName="{D37291CA-D1A7-4F34-87E4-8D84F1397BEA}" StorageType="1">
        <fpc4:IPAddress DataType="string">127.0.0.1</fpc4:IPAddress>
        <fpc4:Name dt:dt="string">Computer1</fpc4:Name>
</fpc4:Computer> 
```

注意 IPAddress 元素上的 DataType="string"。

# mysql - MySQL + JSF 2 登录过滤器

> ID：14877206
> 
> 赞同：0
> 
> 时间：2013-02-14T14:37:51.287
> 
> 标签：mysql, jsf-2, login, nullpointerexception, servlet-filters

有人可以帮我解决这个错误吗？它在 UserDao.login 和 LoginBean.loginproject 处显示 NullPointerException。我是 JSF 2 中过滤器的新手。方法 session.getAttribute("attribute") 中使用了哪个属性？

非常感谢你

问候

用户道.java

```
public class UserDAO {     

    ...

    public static Connection getInstance(){
        if(connection == null)
            new UserDAO();
        return connection;
    }

     public static boolean login(String user, String password) throws SQLException {
            connection = getInstance();
            String Query1 = "SELECT nama, password " + "FROM user " + "WHERE nama = ? AND password = ?";
            PreparedStatement statement1 = (PreparedStatement) connection.prepareStatement(Query1);
            statement1.setString(1, user);
            statement1.setString(2, password);

            ResultSet rs = statement1.executeQuery();
            if (rs.next()) // found
            {
                System.out.println(rs.getString("nama"));
                return true;
            }
            else {
                return false;
            }
    }
} 
```

登录Bean.java

```
public class LoginBean implements Serializable {

 ...
//getters setters

    public String loginProject() throws SQLException {
        boolean result = UserDAO.login(uname, password);
        if (result) {
            // get Http Session and store username
            HttpSession session = Util.getSession();
            session.setAttribute("username", uname);

            return "home";
        } else {

            FacesContext.getCurrentInstance().addMessage(
                    null,
                    new FacesMessage(FacesMessage.SEVERITY_WARN,
                    "Invalid Login!",
                    "Please Try Again!"));
            return "login";
        }
    }

    public String logout() {
      HttpSession session = Util.getSession();
      session.invalidate();
      return "login";
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T15:21:31.173

In JSF you don't need to do anything with regard to the `Session` object, unless it is explicitly needed. By putting managed beans in session scope you are lifting off the necessity of dealing with the 'raw' session object as it was in the times of Servlet+JSP combo: Faces Servlet will manage the job for you as soon as you refer to session-scoped beans in your view.

So, when you use somthing with a `session.setAttibute` flavour means that you do not want to use all the benefits JSF 2.0 provides for you out-of-the-box.

Stating this, you shall have a session-scoped bean that is holding the currently logged-in user. The login action can be moved to a request scoped bean associated with a simple view containing login form (login input field / password input field / submit login button). These two beans may look like

```
@ManagedBean
@RequestScoped
public class LoginUser {

    @EJB
    private UserService userService;

    @ManagedProperty(value="#{userManager}")
    private UserManager userManager;

    private String login;
    private String password;

    public LoginUser() {
    }

    public String login() {
        //checking for nulls and empty strings
        User user = userService.find(login, password);
        if(user == null) {
            FacesContext.getCurrentInstance().addMessage(null, new FacesMessage("Wrong username or password"));
            userManager.setCurrentUser(null);
            return null;
        }
        userManager.setCurrentUser(user);
        return "mypersonalspace.xhtml";
    }

} 
```

and

```
@ManagedBean
@SessionScoped
public class UserManager {

    private User currentUser;

    public UserManager() {
    }

} 
```

In this setup the session will contain all the data you gave it, in our case a `User` object. You can always refer to it in your views by `#{userManager.currentUser.username}`, for example.

As a side note, you MUST always close JDBC-related elements (`ResultSet`s / `Statement`s and in the first place `Connection`s) to prevent leakage of resources. And also, take time and read literature on EJBs to use DAOs/Services appropriately.

# c# - 带有 ViewModel 参数的 WPF 转换器

> ID：14877210
> 
> 赞同：1
> 
> 时间：2013-02-14T14:38:02.787
> 
> 标签：c#, .net, wpf, xaml, mvvm

我想借助 ViewModel 中的属性转换列表视图的项目。我没有让这个工作......带有转换器的列是空的，转换方法永远不会到达。在输出窗口中是以下消息：

> System.Windows.Data 错误：2：找不到目标元素的管理 FrameworkElement 或 FrameworkContentElement。绑定表达式：路径=对象定义；数据项=空；目标元素是“OsGuidToNameConverter”（HashCode=66244779）；目标属性是“BindableConverterParameter”（类型“XmlDocument”）

出现此消息后，在运行时填充 ObjectDefinition

这样做的最佳做法是什么

**xml**

```
<Window.Resources>
    <ResourceDictionary>
        <local:OsGuidToNameConverter x:Key="formatter" BindableConverterParameter="{Binding Path=ObjectDefinition}" />
    </ResourceDictionary>
</Window.Resources>

<ListView Grid.Row="2" Name="listView1" ItemsSource="{Binding Path=Config.DocumentTypes}">
    <ListView.View>
        <GridView>
            <GridViewColumn Width="140" Header="Objekttyp" DisplayMemberBinding="{Binding ObjektTyp}"  />
            <GridViewColumn Width="140" Header="Bezeichnung">
                <GridViewColumn.DisplayMemberBinding>
                    <Binding Path="Value" Converter="{StaticResource formatter}" />
                </GridViewColumn.DisplayMemberBinding>
            </GridViewColumn>
        </GridView>
    </ListView.View>
</ListView> 
```

**转换器**

```
public class OsGuidToNameConverter : DependencyObject, IValueConverter
{
    public static DependencyProperty BindableConverterParameterProperty =
         DependencyProperty.Register("BindableConverterParameter", typeof(XmlDocument),
         typeof(OsGuidToNameConverter));

    public XmlDocument BindableConverterParameter
    {
        get { return (XmlDocument)GetValue(BindableConverterParameterProperty); }
        set { SetValue(BindableConverterParameterProperty, value); }
    }

    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        if (BindableConverterParameter is XmlDocument)
        {
            try
            {
                FieldParameter definitionForField = (FieldParameter)ObjectDefinitionHelper.GetObjectDefinitionByAttribute((string)value, SuchFeldTypes.osguid, BindableConverterParameter, SuchFeldTypes.name);
                return definitionForField.Value;
            }
            catch (Exception e)
            {
                Console.WriteLine(e);
                return "";
            }
        }
        else
        {
            return "";
        }
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        return "";
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T14:55:02.653

您的问题在错误消息中

> System.Windows.Data 错误：2：找不到目标元素的管理 FrameworkElement 或 FrameworkContentElement。绑定表达式：路径=对象定义；**数据项=空**；目标元素是“OsGuidToNameConverter”（HashCode=66244779）；目标属性是“BindableConverterParameter”（类型“XmlDocument”）

Converter 后面的`DataContext`( ) 是 ，因此无法找到该属性。`DataItem``null``"ObjectDefinition"`

尝试将您的转换器移动到`<GridViewColumn.Resources>`以便它具有正确`DataContext`的绑定，或切换到允许您传递多个绑定值的[IMultiValueConverter 。](http://msdn.microsoft.com/en-us/library/system.windows.data.imultivalueconverter.aspx)

第三种选择是将整个数据项传递给`Converter`using `{Binding }`，然后将其转换为您的数据类型，您可以访问它的`Value`和`ObjectDefinition`属性来执行转换。

# python - PyQt：从 LineEdit 创建变量

> ID：14877211
> 
> 赞同：0
> 
> 时间：2013-02-14T14:38:11.630
> 
> 标签：python, qt, soap, pyqt

```
import logging
import sys
import suds
from PyQt4 import QtCore, QtGui, QtNetwork
from service import Ui_Form
from suds.wsse import *

logging.basicConfig(level=logging.DEBUG)
logging.getLogger("suds.client").setLevel(logging.CRITICAL)
url = "http://xxxxxxxxx:xxxx/services/FireScopeConfigurationWebService/v1?wsdl"
token = UsernameToken("xxx", "xxxxx")
security = Security()
security.tokens.append(token)

client = suds.client.Client(url)
client.set_options(wsse = security)

class StartQT4(QtGui.QMainWindow):
    def __init__(self, parent=None):
        QtGui.QWidget.__init__(self, parent)
        self.ui = Ui_Form()
        self.ui.setupUi(self)
        QtCore.QObject.connect(self.ui.createButton,QtCore.SIGNAL("clicked()"), self.create_srv)
        ciEditLine = QtGui.QLineEdit()        #variable 1
        str(ciEditLine.displayText())
        monitorEditLine = QtGui.QLineEdit()   #variable 2
        str(monitorEditLine.displayText())
        bolEditLine = QtGui.QLineEdit()       #variable 3
        str(bolEditLine.displayText())
        ipEditLine = QtGui.QLineEdit()        #variable 4
        str(ipEditLine.displayText())

    def create_srv(self):
        try:
                response = client.service.createConfigurationItem(ciEditLine, monitorEditLine, bolEditLine, ipEditLine)
                print response
        except WebFault, e:
                print e

if __name__ == "__main__":
    app = QtGui.QApplication(sys.argv)
    myapp = StartQT4()
    myapp.show()
    sys.exit(app.exec_()) 
```

我正在尝试从我的 GUI 中的 4 个 LineEdit 框中获取用户输入，并将它们用作我的函数中的变量以进行 Web 服务调用。但我收到了这个错误。

```
Traceback (most recent call last):
  File "start.py", line 34, in create_srv
    str(ciEditLine.displayText())
NameError: global name 'ciEditLine' is not defined 
```

编

这是我的第一个应用程序，所以请轻松谢谢。

任何帮助将不胜感激。

威廉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T15:27:12.437

您必须使用以下方法将您对这些小部件的引用附加到对象`self`：

```
def __init__(self):
    ...
    self.ciEditLine = QtGui.QLineEdit()        #variable 1
    ... 
```

此外，您需要传递小部件的文本值，而不是小部件引用：

```
def create_srv(self):
    try:
            response = client.service.createConfigurationItem(self.ciEditLine.text(), self.monitorEditLine.text(), self.bolEditLine.text(), self.ipEditLine.text()) 
```

像这样，这些引用成为对象的属性，以后可以在任何方法中使用`self`

# c# - MDbg - Debugger 的协议与 Debuggee 不兼容

> ID：14877213
> 
> 赞同：3
> 
> 时间：2013-02-14T14:38:24.437
> 
> 标签：c#, .net, debugging

我正在使用 MDbg 检索进程的应用程序域中列出的所有程序集的列表。每当我尝试将进程附加到 MDbgEngine 时，我都会收到以下异常消息：

> 调试器的协议与被调试对象不兼容。（来自 HRESULT 的异常：0x8013134B）

我是否遗漏了什么或错误地调用了该方法？我正在使用 .NET Framework 4.0，MDbg 核心参考取自 \Microsoft SDKs\Windows\v7.0A\Bin\MdbgCore.dll。

代码：

```
MDbgProcess process;
MDbgEngine mDbgEngine = new MDbgEngine();
process = mDbgEngine.Attach(myProcess.Id); // this line causes the error
foreach (CorAppDomain appDomain in process.AppDomains)
{
   foreach (CorAssembly assembly in appDomain.Assemblies)
   {
      //get assembly information
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-09-26T15:57:50.610

mdbg 位置位于：

> C:/Program Files (x86)/Microsoft SDKs/Windows/v7.1/Bin/

对于 3.x 版本的框架，位于：

> C:/Program Files (x86)/Microsoft SDKs/Windows/v7.1/Bin/NETFX 4.0 Tools/

对于 4.x 版本的框架。谢谢你。再会。

# c++ - 为 VS 2010 (MSVC 10) 编译的 libcurl 二进制文件

> ID：14877214
> 
> 赞同：0
> 
> 时间：2013-02-14T14:38:22.400
> 
> 标签：c++, c, libcurl

我必须将 libcurl 链接到使用 VS 2010 (MSVC 10) 在 Windows XP 上编译的项目。

在 url [http://windows.php.net/downloads/php-sdk/deps/](http://windows.php.net/downloads/php-sdk/deps/)中找到的依赖项仅适用于 VC 2008 (MSVCR 9) 和 VS 2012 (MSVCR 11)。

有人知道在哪里可以找到使用 VS 2010 (MSVCR 10) 编译的 libcurl 二进制文件或其依赖项（用于通过其 makefile 构建）吗？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:18:12.543

问题解决：打开并转换根DSW文件，然后用VS编译！

# c - 交替位置 ＆否定。在几何级数中使用 For 循环

> ID：14877217
> 
> 赞同：0
> 
> 时间：2013-02-14T14:38:33.673
> 
> 标签：c, for-loop, series

我被要求为我的 C 编程课程创建这个 for 循环，但我不知道如何交替正负值。先感谢您！

sum2=1-x+x^2-x^3+⋯+/-x^n

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T14:53:37.533

提示：将表达式视为 (-1*x)^i 的总和，其中 i = 1, 2, 3, ..., n。如果 n 为偶数，则 (-1*x)^i 为正数，如果为奇数则为负数。

# cocoa - 在描述符后排序数组

> ID：14877220
> 
> 赞同：0
> 
> 时间：2013-02-14T14:38:35.077
> 
> 标签：cocoa, nsarray, sorting

这是我的一些代码。一切正常。但不是排序。我想在“高度”之后对我的数组进行排序但它不起作用所以这是我的代码，我希望有人可以帮助我。

```
 //Berechnung der Entfernung
        erdradius = 6371;

        //Koordinaten von Datenbank in String schreiben
        NSString *latitude = [[news objectAtIndex:indexPath.row] objectForKey:@"Latitude"];
        NSString *longitude = [[news objectAtIndex:indexPath.row] objectForKey:@"Longitude"];

        entfernung = 0;
        double lat1 = eigLat;                   //eigener Standort Latitude
        double long1 = eigLon;                  //eigener Standort Longitude
        double lat2 = [latitude doubleValue];   //Standort Heurigen Latitude
        double long2 = [longitude doubleValue]; //Standort Heurigen Longitude

        //Da man mit Bogenmaß rechnen muss!
        double lat1rechnen = lat1*2*M_PI/360;
        double long1rechnen = long1*2*M_PI/360;
        double lat2rechnen = lat2*2*M_PI/360;
        double long2rechnen = long2*2*M_PI/360;

        //Formel zur Berechnung
        entfernung = (erdradius * (2 * asin(sqrt(((sin(((lat1rechnen-lat2rechnen)/2)*(lat1rechnen-lat2rechnen)/2))+cos(lat1rechnen)*cos(lat2rechnen)*(sin(((long1rechnen-long2rechnen)/2)*(long1rechnen-long2rechnen)/2)))))));

        //Werte in Strings damit man sie ausgeben kann
        weg = [NSString stringWithFormat:@"%.2f km", entfernung];
        HeurigenName = [[news objectAtIndex:indexPath.row] objectForKey:@"Name"];

        newsMutable = [news mutableCopy];

        for (NSMutableDictionary* entry in newsMutable)
        {
            [entry setValue:[NSString stringWithFormat:weg] //[NSNumber numberWithDouble:entfernung]
                     forKey:@"Altitude"];
        }

    NSLog(@"%@",newsMutable);

        news = [newsMutable copy];

    NSSortDescriptor *descriptor = [[NSSortDescriptor alloc] initWithKey:@"Altitude" ascending:YES];
    [news sortedArrayUsingDescriptors:[NSArray arrayWithObjects:descriptor, nil]];
    wegsorted = [news copy];

    //Ausgabe
    cell.textLabel.text = [[news objectAtIndex:indexPath.row] objectForKey:@"Name"];
    cell.textLabel.textColor = [UIColor whiteColor];
    //cell.detailTextLabel.text =[[news objectAtIndex:indexPath.row] objectForKey:@"Altitude"];
    cell.detailTextLabel.text =[[news objectAtIndex:indexPath.row] objectForKey:@"Altitude"];

    return cell; 
```

有人可以帮我解决我的问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T14:53:54.227

`sortedArrayUsingDescriptors` *返回一个新的排序数组*，它不对数组本身进行排序。您可以使用

```
NSArray *sortedArray = [news sortedArrayUsingDescriptors:...]; 
```

获得一个新的排序数组，或使用`sortUsingDescriptors`：

```
[news sortUsingDescriptors:...] 
```

对（可变）数组`news`本身进行排序。

另一个问题是，在您的 for 循环中，您为数组中的所有对象设置了相同的“高度”值，因此按该键排序不会改变任何内容。

请注意，这`newsMutable = [news mutableCopy]`会创建一个新数组，但不会复制数组中的元素，因此以下 for 循环会修改`news`数组中的项目。

# magento - Magento - 为什么 setOriginalCustomPrice 将价格四舍五入到小数点后两位？

> ID：14877227
> 
> 赞同：0
> 
> 时间：2013-02-14T14:38:48.777
> 
> 标签：magento, rounding

我想将报价插入购物车，我正在使用函数 setOriginalCustomPrice

```
$specialprice = '0.49716'; 
 $item->setOriginalCustomPrice($specialPrice); 
```

在购物车中以 0.50 的价格插入

知道如何在购物车中将单价设置为 0.49716 吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T06:28:40.027

1.  在数据库中，价格仅以 4 位小数存储
2.  默认情况下，货币精度设置为 2 位小数，几乎所有操作都使用此选项。您可以尝试将此选项更改为 4，也许这会有所帮助。

您可以使用免费扩展[货币管理器](http://www.magentocommerce.com/magento-connect/et-currency-manager.html)来管理货币选项。

# class - Symfony2 不能包含自定义类

> ID：14877228
> 
> 赞同：0
> 
> 时间：2013-02-14T14:38:49.907
> 
> 标签：class, symfony, doctrine

在第 22 行的 C:\wamp\www\test\src\Ado\FrontendBundle\Helper\AdoFactory.php 中找不到类“AdoDoctrineModel”

```
<?php

namespace Ado\FrontendBundle\Helper;

use AdoDoctrineModel;
use AdoApiModel;

class AdoFactory {
    protected $adapter; 

    public function __construct($container) {
        $this->adapter = $container->getParameter('adapter'); 
    }

    public function getModel()  {

        switch($this->adapter)
        {
            case 'API':
            case 'Doctrine': 
                $class = 'Ado' . $this->adapter. 'Model'; 
                return new $class;
            break;
            default: throw new Exception("unsupported format: " . $type);
        }
    }
}

?> 
```

和 AdoDoctrineModel.php

```
namespace Ado\FrontendBundle\Helper;

class AdoDoctrineModel {

    public function __construct() {

    }

} 
```

我尝试将 AdoFactory 中的使用路径更改为完整路径，还添加了“使用 {...} 作为 AdoDoctrineModel”

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T14:45:22.240

我假设您正在使用 Composer (Symfony 2.1.x)。您的代码对我来说似乎很好，我会检查`composer.json`此部分的文件：

```
"autoload": {
    "psr-0": {
        "": "src/"
    }
} 
```

然后发出：

```
composer dump-autoload 
```

当然文件`AdoDoctrineModel.php`应该放在`src/Ado/FrontendBundle/Helper`文件夹中。不需要`use`声明，因为两个类都在同一个命名空间中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T16:22:58.767

删除该代码：

```
use AdoDoctrineModel;
use AdoApiModel; 
```

一切都应该正常。您需要重新了解 php 命名空间的工作原理，请查看有关命名空间的文档。

what you are currently telling your app is fetch a non existent \AdoDoctrineModel class and \AdoApiModel instead of of `\Ado\FrontendBundle\Helper\AdoDoctrineModel` and `\Ado\FrontendBundle\Helper\AdoApiModel` classes.

# java - 在 Spring Java 配置中引用 ${user.home}

> ID：14877230
> 
> 赞同：8
> 
> 时间：2013-02-14T14:38:51.260
> 
> 标签：java, spring, configuration

在 xml 配置中，我可以执行以下操作：

```
<context:property-placeholder
        location="file:${user.home}/.config}/api.properties"
        ignore-resource-not-found="true"
        system-properties-mode="OVERRIDE"/> 
```

在 java 配置中，我会执行以下操作：

```
/**
 * @return a {@link org.springframework.context.support.PropertySourcesPlaceholderConfigurer} so that placeholders are correctly populated
 * @throws Exception exception if the file is not found or cannot be opened or read
 */
@Bean
public static PropertySourcesPlaceholderConfigurer propertySourcesPlaceholderConfigurer() throws Exception {
    PropertySourcesPlaceholderConfigurer propConfig = new PropertySourcesPlaceholderConfigurer();
    Resource[] resources = new UrlResource[]
            {new UrlResource("file:${user.home}/.config/api.properties")};
    propConfig.setLocations(resources);
    propConfig.setIgnoreResourceNotFound(true);
    propConfig.setIgnoreUnresolvablePlaceholders(true);
    return propConfig;
} 
```

但是这不明白 ${user.home}

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-14T14:48:25.097

尝试`${sys:user.home}`引用系统属性。供系统环境使用`${env:THE-ENV-VAR-NAME}`

# salesforce - Salesforce 令牌、SOAP VS REST

> ID：14877234
> 
> 赞同：0
> 
> 时间：2013-02-14T14:39:03.907
> 
> 标签：salesforce

目前，我正在使用 SOAP 访问令牌，这可以使用我的用户 ID 和密码来完成，无需客户端密钥和秘密。

binding.login（用户名，密码+“”）；

有没有办法对 REST 做同样的事情，即只使用 ID 和密码访问令牌？

就像是，

```
 string URI = "https://login.salesforce.com/services/oauth2/token";

         StringBuilder strbody = new StringBuilder();   

         strbody.Append("grant_type=password&");

         strbody.Append("username=" + "xxx" + "&");   

         strbody.Append("password=" + "xxxx"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T18:52:04.010

不，OAuth 要求您拥有使用者密钥，即使对于用户名/密码流程也是如此。

拥有消费者密钥的要求并不繁重，您可以在您的开发者版组织中创建一个，并且它自动可供所有组织和用户使用。

# javascript - 关于 mouseover 和 mouseleave 重复功能？

> ID：14877235
> 
> 赞同：1
> 
> 时间：2013-02-14T14:39:06.500
> 
> 标签：javascript, jquery

我有一个函数正在尝试编写，它在悬停时显示工具提示并在 mouseleave 上淡出：

```
$('.tt').mouseover(function(e) { 
    var tip = $(this).find('.tooltip');              
    //Set the X and Y axis of the tooltip
    $('.tooltip').css('top', 0 );
    $('.tooltip').css('right', -200);
    tip.fadeIn('500');
}).mouseout(function(e) {
    var tip = $(this).find('.tooltip');
    tip.fadeOut('500'); 
}); 
```

如果用户使用鼠标不稳定并多次悬停，则工具提示会闪烁，本质上。有什么办法可以防止这种情况发生吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T14:43:23.970

你正在寻找`.stop( [clearQueue ] [, jumpToEnd ] )`.

```
tip.stop(true, true).fadeIn(500);
tip.stop(true, true).fadeOut(500); 
```

`.stop()` [您可以在此处](http://api.jquery.com/stop/)了解更多信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T14:42:17.857

添加 stop() - [http://api.jquery.com/stop/](http://api.jquery.com/stop/)

```
$('.tt').mouseover(function(e) { 

    var tip = $(this).find('.tooltip');

    //Set the X and Y axis of the tooltip
    $('.tooltip').css('top', 0 );
    $('.tooltip').css('right', -200);
    tip.stop().fadeIn(500);

}).mouseout(function(e) {

    var tip = $(this).find('.tooltip');
    tip.stop().fadeOut(500);

}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-14T14:42:17.123

使用`tip.stop().fadeIn()`和`tip.stop().fadeOut()`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-14T14:42:31.660

这可能有效，请尝试使用 .stop()

```
 tip.stop().fadeOut('500'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-14T14:43:02.177

您可能想查看[HoverIntent](http://cherne.net/brian/resources/jquery.hoverIntent.html)插件。

它旨在防止其中一些抖动。

Ben Alman 关于[节流和去抖动](http://benalman.com/projects/jquery-throttle-debounce-plugin/)的文章也很有趣。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-14T14:43:36.387

`**[LIVE DEMO](http://jsbin.com/araqiv/1/edit)**`

当然，使用`.stop()`方法和`mouseenter mouseleave`

```
$('.tt').on('mouseenter mouseleave', function( e ) { 

    var elOpacity = e.type=='mouseenter' ? 1 : 0 ;
    var $tip = $(this).find('.tooltip');

    $('.tooltip').css({top: 0, right: -200 });
    $tip.stop().fadeTo(500, elOpacity);

}); 
```

上面示例中的`.on()`方法允许您创建我们感兴趣的*事件*
的“列表”， 而不是在条件运算符（*Ternary* `(?:)`）中，我们侦听`e`（*event*）更改并为元素不透明度赋值并将其传递给`.fadeTo()`动画方法。
`.stop()`将结束前一个动画而不创建动画构建。

**阅读更多： http:** [//api.jquery.com/stop/](http://api.jquery.com/mouseenter/)
[http://api.jquery.com/fadeto/](http://api.jquery.com/stop/)
[http://api.jquery.com/on/](http://api.jquery.com/fadeto/)
[http://api.jquery.com/mouseenter](http://api.jquery.com/on/)
[/](http://api.jquery.com/mouseenter/)
[http://api.jquery.com/mouseleave/](http://api.jquery.com/mouseleave/)
**另外探索：**
[http ://api.jquery.com/hover/](http://api.jquery.com/hover/)
[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/ Conditional_Operator](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Conditional_Operator)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-14T14:44:37.210

尝试实际的进入/离开 - 如果提示位于显示提示时 .tt 失去焦点的位置，则可能不起作用。

添加一个停止，将 css 简化为一个对象。

```
$('.tt').mousenter(function(e) { 
    var tip = $(this).find('.tooltip');
    //Set the X and Y axis of the tooltip
    tip.css({'top':0,'right': -200});
    tip.stop().fadeIn('500');
}).mouseleave(function(e) {
   $(this).find('.tooltip').stop().fadeOut('500');
}); 
```

# c# - 使用 C# 从文件夹中获取所有文件名

> ID：14877237
> 
> 赞同：261
> 
> 时间：2013-02-14T14:39:17.293
> 
> 标签：c#, list, text-files, directory

我想知道是否可以在某个文件夹中获取所有文本文件的名称。

例如，我有一个名为 Maps 的文件夹，我想获取该文件夹中所有文本文件的名称并将其添加到字符串列表中。

是否有可能，如果可以，我该如何实现？

* * *

## 回答 #1

> 赞同：416
> 
> 时间：2013-02-14T14:43:32.123

```
using System.IO;

DirectoryInfo d = new DirectoryInfo(@"D:\Test"); //Assuming Test is your Folder

FileInfo[] Files = d.GetFiles("*.txt"); //Getting Text files
string str = "";

foreach(FileInfo file in Files )
{
  str = str + ", " + file.Name;
} 
```

* * *

## 回答 #2

> 赞同：190
> 
> 时间：2013-02-14T14:41:36.390

```
using System.IO; //add this namespace also 
```

* * *

```
string[] filePaths = Directory.GetFiles(@"c:\Maps\", "*.txt",
                                         SearchOption.TopDirectoryOnly); 
```

* * *

## 回答 #3

> 赞同：81
> 
> 时间：2013-02-14T15:32:58.093

这取决于你想做什么。

参考：[http ://www.csharp-examples.net/get-files-from-directory/](http://www.csharp-examples.net/get-files-from-directory/)

这将带回指定目录中的所有文件

```
string[] fileArray = Directory.GetFiles(@"c:\Dir\"); 
```

这将带回指定目录中具有特定扩展名的所有文件

```
string[] fileArray = Directory.GetFiles(@"c:\Dir\", "*.jpg"); 
```

这将带回指定目录中的所有文件以及具有特定扩展名的所有子目录

```
string[] fileArray = Directory.GetFiles(@"c:\Dir\", "*.jpg", SearchOption.AllDirectories); 
```

希望这可以帮助

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2013-02-14T14:41:25.733

做你想要的。

[System.IO.Directory.GetFiles](http://msdn.microsoft.com/en-us/library/system.io.directory.getfiles.aspx)

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2013-02-14T14:42:56.290

看看*[Directory.GetFiles Method (String, String)](http://msdn.microsoft.com/en-us/library/wz42302f.aspx)* (MSDN)。

此方法将所有文件作为文件名数组返回。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2013-02-14T14:41:36.740

[http://msdn.microsoft.com/en-us/library/system.io.directory.getfiles.aspx](http://msdn.microsoft.com/en-us/library/system.io.directory.getfiles.aspx)

System.IO 命名空间有很多方法可以帮助您进行文件操作。这

```
Directory.GetFiles() 
```

方法返回一个字符串数组，表示目标目录中的文件。

* * *

## 回答 #7

> 赞同：-10
> 
> 时间：2013-02-14T14:42:12.973

我会建议你谷歌“读取文件夹中的对象”。您可能需要创建一个阅读器和一个列表，让阅读器读取文件夹中的所有对象名称，并在 n 个循环中将它们添加到列表中。

# rest - 任何人都可以纠正它吗？

> ID：14877244
> 
> 赞同：0
> 
> 时间：2013-02-14T14:39:34.737
> 
> 标签：rest, soap

在任一方法 REST/SOAP-RPC 中，HTTP 用于将消息从客户端传输到服务器。

在 REST 方法中，HTTP 应该提供所有必要的细节（在请求中）以由服务器提供响应，而在 SOAP-RPC 中，HTTP 只是将肥皂信封发送到服务器。

从客户端的角度来看，客户端应该知道一些逻辑来解析肥皂消息以显示 SOAP-RPC 的最终用户，而在 REST 中，客户端并不关心，并且相同的 HTTP 将所有解析的信息提供给客户端。

如果我的理解有误，请纠正我。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T15:00:39.753

SOAP：在每个请求中，soap 都会发送 HTTP POST 请求（HTTP GET 不存在）。此 Post 请求包含一个 XML 消息。例如，如果您想获取项目列表，您的 HTTP 消息不是 GET 而是 POST，并且包含 XML 消息，如下所示：

```
<?xml version="1.0"?> 
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"> 
    <soap:Body> 

          <p:getItemList xmlns:p="http://www.parts-depot.com"/> 

    </soap:Body> 
</soap:Envelope> 
```

另一方面，你的 HTTP 请求将是一个 GET 请求，看起来像这样：[http ://www.example.com/getItemList](http://www.example.com/getItemList)

# c - 在 C 中从屏幕投影到世界空间有奇怪的 FOV 结果

> ID：14877248
> 
> 赞同：1
> 
> 时间：2013-02-14T14:39:50.813
> 
> 标签：c, math, matrix, 3d, camera-matrix

首先感谢您查看我的帖子，我会尽可能详细地解释我的问题。

我正在尝试构建一个简单的光线追踪器，当我尝试将光线从我的屏幕投射到世界时，我得到了一些奇怪的结果。

我有以下相机矩阵：

```
#define deg2rad( d ) ((float)((d)*PI/180.0f))
#define FOV 60
void Camera::buildPerspective( void )
{
    float _near = 1.0f;
    float _far = 100.0f;
    float scale = 1.0 / tan(deg2rad(FOV * 0.5f));
    perspective = Matrix4(  
    scale, 0,     0,                              0,    
    0,     scale, 0,                              0,
    0,     0,     -_far / (_far - _near),         -1,
    0,     0,     -_far * _near / (_far - _near), 0 );
}

void Camera::buildScreen( void )
{
    float DIM_over_2 = DIM / 2.0f;
    screen = Matrix4(   DIM_over_2, 0.0f,       0.0f,   DIM_over_2,
                    0.0f,       -DIM_over_2,    0.0f,   DIM_over_2,
                    0.0f,       0.0f,           1.0f,   0.0f,
                    0.0f,       0.0f,           0.0f,   1.0f);
}

void Camera::buildView( void )
{
    Matrix4 inv_translate( Matrix4::createTranslation( -pos.x, -pos.y, -pos.z ) );
    Matrix4 rotation = Matrix4::createTranspose( Matrix4::createFromYawPitchRoll( rot.y, rot.x, rot.z ) );
    view = inv_translate * rotation;
} 
```

然后我有以下代码可以取消项目：

```
Vertex rayOrigin(*eye);
Vector3 rayDir;

float normalised_x = 2.0f * x / DIM - 1.0f;
float normalised_y = 2.0f * y / DIM - 1.0f;
Matrix4 unviewMat = *screen * *perspective;
Vertex near_point = unviewMat * Vertex (normalised_x, normalised_y, 0, 1);
near_point = *view * near_point;
rayDir = near_point - rayOrigin; 
```

这给了我以下结果，它应该是一个立方体，当相机绕 y 轴旋转 45 度时查看它： ![在此处输入图像描述](../Images/7c349fedcdfea9065bacf96233fcdccb.png)

谁能看到我哪里出错了？我将非常感谢您的帮助！

# django - Django：Rest Framework 验证标头

> ID：14877249
> 
> 赞同：47
> 
> 时间：2013-02-14T14:39:54.433
> 
> 标签：django, django-rest-framework

使用[Django REST](http://django-rest-framework.org/api-guide/authentication.html) API，我正在尝试验证我的请求。

这就是我要发送的内容：

```
Content-Type: application/json, Authentication: token="6d82549b48a8b079f618ee9c51a6dfb59c7e2196" 
```

这是我回来的：

```
{"detail": "Authentication credentials were not provided."} 
```

有人可以给我正确的标题吗？

谢谢

标题：

```
Accept: application/json
Content-Type: application/json
Authorization: Token 6d82549b48a8b079f618ee9c51a6dfb59c7e2196
Connection: keep-alive
Origin: chrome-extension: //rest-console-id
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.57 Safari/537.17 
```

![在此处输入图像描述](../Images/4ad38a058ad2e512bd8523e20c401cae.png)

设置.py

```
REST_FRAMEWORK = {
    'DEFAULT_PERMISSION_CLASSES': (
        'rest_framework.authentication.TokenAuthentication',
        'rest_framework.permissions.IsAdminUser',

    ),
    'PAGINATE_BY': 10
} 
```

视图.py

```
class ProfileList(generics.ListCreateAPIView):
    """
    API endpoint that represents a list of users.
    """
    permission_classes = (permissions.IsAuthenticated,)
    model = Profile
    serializer_class = ProfileSerializer

    def pre_save(self, obj):
        obj.owner = self.request.user 
```

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2013-02-27T17:50:38.647

以防万一其他人遇到此错误。如果您使用 mod_wsgi 在 Apache 上运行 Django，也会发生这种情况，因为授权标头已被 mod_wsgi 剥离。您需要将以下内容添加到您的 VirtualHost 配置中：

`WSGIPassAuthorization On`

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-02-14T15:09:33.410

假设您尝试使用 TokenAuthentication，标头应如下所示：

```
Authorization: Token 6d82549b48a8b079f618ee9c51a6dfb59c7e2196 
```

如[文档中所述](http://www.django-rest-framework.org/api-guide/authentication/#tokenauthentication)。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2013-06-19T02:20:51.020

我的令牌身份验证遇到了同样的问题

这解决了我的问题

设置.py

```
REST_FRAMEWORK = {
   'DEFAULT_AUTHENTICATION_CLASSES': (
       'rest_framework.authentication.TokenAuthentication',
   ),
   'DEFAULT_PERMISSION_CLASSES': (
        'rest_framework.permissions.IsAdminUser'
   ),
   'PAGINATE_BY': 10,
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2016-05-24T14:25:47.627

就我而言，这是可行的：
（Django REST Framework v3）

**设置.py**

```
REST_FRAMEWORK = {
   'DEFAULT_AUTHENTICATION_CLASSES': (
       'rest_framework.authentication.TokenAuthentication',
       'rest_framework.authentication.SessionAuthentication',
   ),
   'DEFAULT_PERMISSION_CLASSES': (
        'rest_framework.permissions.IsAuthenticated',
   ),
} 
```

**视图.py**

```
class Test(APIView):
    def get(self, request, format=None):   
        return Response({'Result': 'OK'}) 
```

**网址.py**

```
router.add_api_view('test', url(r'^test/', views.Test.as_view(),name='test')) 
```

**不要忘记在标头中发送令牌信息：**

```
 Key: Authorization  
 Value: Token 76efd80cd6849ad7d35e04f1cc1eea35bdc20294 
```

**要生成令牌，您可以使用以下内容（在代码中的某处）：**

```
from rest_framework.authtoken.models import Token            
user = User.objects.get(username='<username>')
token = Token.objects.create(user=user)
print(token.key) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-05-18T22:04:36.007

对于那些在 AWS elastic beanstalk 上的人，你有点卡在 apache 上，除非你有

`WSGIPassAuthorization On`

正如@Fiver 所提到的，您的标题会被剥离

我没有手动修复此问题并制作新图像，而是制作了一个脚本来检查 conf 文件的最后一行是否是`WSGIPassAuthorization On` ，如果不是，我们更新它并重新启动服务器

在我的 Django 应用程序中，我有一个带有 sh 文件的配置文件夹

### 配置/服务器/更新-apache.sh

```
if [[ $(tac /etc/httpd/conf/httpd.conf | egrep -m 1 .) == $(echo 'WSGIPassAuthorization On') ]];
  then
     echo "Httpd.conf has already been updated"
  else
     echo "Updating Httpd.conf.."
     echo 'WSGIPassAuthorization On' >> /etc/httpd/conf/httpd.conf
     service httpd restart
fi 
```

在我将它提交给 git 之前让它变得可执行

`chmod +x configs/server/update-apache.sh`

然后在我的 python.config 文件中，我在最后添加命令

### .ebextensions/python.config

```
...
...
container_commands:
    01_migrate:
        command: "python manage.py migrate"
        leader_only: true
    02_collectstatic:
        command: "python manage.py collectstatic --noinput"
    03_change_perm:
        command: "chown -R wsgi:root static"
    03_update_apache:
        command: "sh configs/server/update-apache.sh" 
```

现在，任何启动的新机器都将检查服务器是否已更新，并在需要时进行更新

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-10-13T22:48:30.593

我被一个相关问题所困扰，分享解决方案以防它对任何人有用。我们的测试服务器需要整个站点的HTTP Basic Auth，即用户在进行个人登录之前必须通过http auth 对话框登录。这是一个简单的凭证 - 足以让 googlebot 远离。对这些服务器的 API 请求通过在请求中嵌入这些凭据来处理这个问题，即

`url = "https://username:somepass@domain.com`

问题是，当您这样做时，嵌入的凭证会被无形地转换为 http`Authorization`标头。因此，该标头关键字**已被占用**，因此无法同时发送`Authentication`令牌标头，并且 DRF API 返回令人困惑的“未提供凭据”错误。

解决方案是使用 DRF 的[自定义身份验证](https://www.django-rest-framework.org/api-guide/authentication/#custom-authentication)文档并创建一个新的 TokenAuthentication 类继承 DRF。在其中我定义了两个方法：`def get_custom_authorization_header()`and `def authenticate()`， where `authenticate()`calls `get_custom_authorization_header()`，它覆盖了该`auth =`行：

`auth = request.headers.get("X-Ourcustom-Authorization", b"")`

调用代码来测试服务器然后替换

`headers = {"Authorization": f"Token {your_token}"}`

和

`headers = {"X-OurCustom-Authorization": f"Token {token}"}`

# algorithm - 给定函数 get_chapter(page_number) 建立书中的章节

> ID：14877254
> 
> 赞同：0
> 
> 时间：2013-02-14T14:40:13.230
> 
> 标签：algorithm, search

我有一个名为 get_chapter 的函数，它以页码作为参数并返回一个表示该页面所属章节的唯一字符串，例如“故事继续”。如果我在书外输入页码，则会返回一个空字符串。

第一页是第 0 页。章节是一组连续的页面，给定的页面只属于一个章节。

你会推荐什么算法来识别每一章的页面范围？关于我需要调用 get_chapter 多少次的任何估计？

我需要尽可能限制对 get_chapter 的调用。章节平均 50000 页。这本书大约有30000000页！不知道有多少章。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T18:22:43.770

用第一页填写章节边界列表。

设置`low`到第一页和`high`最后一页。

如果`get_chapter(low) == get_chapter(high)`，那么您知道该范围内的所有内容都在同一章节中，并且您不需要进一步划分它。

如果`get_chapter(low) != get_chapter(high)`和`low + 1 == high`，那么您在不同的章节中有相邻的页面。这意味着新的篇章从高处开始。

如果`get_chapter(low) != get_chapter(high)`和`low + 1 < high`，则范围内至少有一个章节边界。通过在中间选择一个页面来拆分范围并*递归*地降低两个新范围（低：中和中：高）。

如果您在找到边界时将边界添加到列表中，并且始终首先递归较低的子范围，那么您就完成了。否则，对边界列表进行排序。

我相信运行时复杂度大约为 O(number_of_chapters * log_2(average_chapter_size))，但这是一个直觉检查而不是彻底的分析。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T14:58:05.863

一些想法：

1.  在最后一页调用 get_chapter 以查看有多少章。

2.  计算出一章的平均大小，并调用 get_chapter 来估计每章的中间部分。

3.  在相邻章节之间使用二分搜索来找到边界。

4.  针对第 2 步中的初始估计跨越两章或属于同一大章的大章或小章进行修改。

平均调用次数类似于 n + log2(s)，其中 n 是章节数，s 是章节的平均大小（以页为单位）。

# java - 可以以编程方式将特定 IP 地址解析为负载平衡域名吗？

> ID：14877255
> 
> 赞同：1
> 
> 时间：2013-02-14T14:40:14.617
> 
> 标签：java, dns, dnsjava

我们的环境设置有多个 apache httpd，它们充当各种后端 java 服务器（主要是 tomcat 服务器）的反向代理。

我们想编写一个脚本来访问每个单独的 IP 地址并检查有效的 http 响应。

httpd 设置为使用虚拟主机，因此为了验证完整的 http/html 响应，我们需要向域名发送 http 请求。换句话说，直接向特定 IP 地址发送 http 请求会导致 apache 的 html http 响应不正确。

所以，总而言之，我们有多个 httpd 监听多个 IP 地址。例如：

my.domain.com 负载平衡：

192.168.11.1 192.168.11.2

我们可以以编程方式更新每个 IP 地址的主机文件，然后向域名发出请求并以这种方式检查每个单独的 IP 地址。

但是，有没有办法在不使用主机文件的情况下向域发出 http 请求并将其解析为特定的 IP 地址？也许有一个java lib可以以编程方式做这种事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T15:04:56.100

更新：这篇文章很好地解释了如何设置可以以编程方式控制的 dns：[http](http://rkuzmik.blogspot.com/2006/08/local-managed-dns-java_11.html) ://rkuzmik.blogspot.com/2006/08/local-managed-dns-java_11.html 。我实现了`sun.net.spi.nameservice.NameService`，并且`sun.net.spi.nameservice.NameServiceDescriptor`能够以这种方式指定自定义 dns 条目。

需要注意的一件事是`InetAddress`积极缓存域名/IP 地址。换句话说，例如，一旦您创建了一个解析为的`InetAddress`对象，由于缓存的原因，在程序运行时很难或不可能更改它。`my.domain.com``127.0.0.1``InetAddress`

我认为您也可以使用它（这似乎是我使用的太阳材料的包装）：

[http://www.xbill.org/dnsjava/dnsjava-current/doc/org/xbill/DNS/spi/DNSJavaNameService.html](http://www.xbill.org/dnsjava/dnsjava-current/doc/org/xbill/DNS/spi/DNSJavaNameService.html)

# c# - Linq 仅返回包含列表匹配的元素

> ID：14877258
> 
> 赞同：0
> 
> 时间：2013-02-14T14:40:28.960
> 
> 标签：c#, linq, nhibernate, fluent-nhibernate

我有对话表，其中包含属于对话的成员列表，现在我想按成员列表搜索对话。

会话课

```
class Conversation{ 

     public IList<Member> Members {get; set}

     public DateTime CreatedOn {get; set;}
} 
```

会员等级

```
class Member{

     public Conversation {get; set;}

     public User {get; set;}
 } 
```

我有方法（使用 NHibernate）

```
public Conversation GetByMembers(IList<Member> members){
     return repositort.Query().FirstOrDefault(x => x.Members.Intersect(members).Count() == members.Count);

} 
```

有谁知道如何使用 LINQ 做到这一点？

**更新**：我想要完成的是查看是否已经与确切的对话成员进行了对话并重新打开它，而不是为提供的成员创建新的对话。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-14T14:42:25.363

你是不是这个意思：

```
query.Where(c=>list.Contains(c.Attribute)); 
```

# java - JSTL 访问超类属性

> ID：14877260
> 
> 赞同：1
> 
> 时间：2013-02-14T14:40:34.060
> 
> 标签：java, jstl, superclass

早上好！

这是交易家伙，我有一个类，我想通过 JSTL 访问我的视图。我的问题是，有人知道访问该类的超类属性的方法吗？

例如

> <p>${myClass.greeting}</p>

假设一个假设，

```
class mySuperClass{
    private String greeting = "I love stack overflow";

    public String getGreeting(){
        return greeting;
    }
}//end mySuperClass

class myClass extends mySuperClass{
    private String notImportant = "I like applesauce";

    public String getNotImportant(){
        return notImportant;
    }//end notImportant

}//end myClass 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T14:49:21.423

哇，我是个瘾君子。. .

所以我实际上是想获得这样的财产，

> < p >${myClass.getGreeting}</ p >

即，调用完整的访问器名称，而不是，

> <p>${myClass.greeting}</p>

抱歉，我盯着这个页面看太久了。向 Sajan Chandran 致敬，感谢他让我重蹈覆辙。

# html - 如何在 div 中均匀分布菜单链接

> ID：14877262
> 
> 赞同：0
> 
> 时间：2013-02-14T14:40:45.770
> 
> 标签：html, css, navigation

我想在 div 元素内均匀分布菜单链接。当我向左浮动时，我会在右侧获得空间。[jsfiddle 示例](http://jsfiddle.net/JsWtk/) 我正在使用的 html 是

```
<div id="header" class="nav"> 
<ul >
    <li>Home</li>
    <li>About</li>
    <li>Vision</li>
    <li>Clients</li>
    <li>Partners</li>
</ul>
</div> 
```

虽然 css 是

```
#header {
position: relative;
width: 60%;
height: 40px;
margin: 0px auto;
font-size: 25px;
margin-top: 20px;
padding-top: 15px;
border-radius: 5px; 
background-color: black  ;
}

.nav ul
{
list-style: none;
padding: 10px 10px 0px 1px;
margin:  0;
}

.nav ul li
{
list-style: none;
float: left;
padding: 0 0 0 20px;
font-weight: normal;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T14:44:20.897

一种方法是`ul{ display: table; table-layout:fixed; } li{ display: table-cell }`.

这是您[更新的小提琴](http://jsfiddle.net/JsWtk/8/)。

**注意**：IE问题，再次。对于 Internet Explorer，它将从版本 8 开始工作。

有关[显示](https://developer.mozilla.org/en-US/docs/CSS/display)和[表格布局](https://developer.mozilla.org/en-US/docs/CSS/table-layout)属性的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T14:49:08.480

您可以`width: 20%;text-align:center`在`.nav ul li`选择器上使用。

这应该均匀分布 lis，但您还必须删除填充。

`width: 20%`但是，我的解决方案仅适用于您列表中的 5个项目（由于

干杯，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T14:50:09.223

试试这个解决方案，然后添加 yut 自己的风格：

```
<!DOCTYPE html>
<html>
<head>
<style>
ul{
   list-style-type:none;
   margin:0;
   padding:0;
   overflow:hidden;
}
li{
   float:left;
}
a{
   display:block;
   width:60px;
   background-color:#dddddd;
}
</style>
</head>

<body>
<ul>
<li><a href="#home">Home</a></li>
<li><a href="#news">News</a></li>
<li><a href="#contact">Contact</a></li>
<li><a href="#about">About</a></li>
</ul> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T14:51:12.960

如果您打算应用填充，您应该使用它，但减少`width: 20%`它。`li`如果您想`20px`在左侧填充，您应该根据`17%`自己的喜好将宽度设置为大约或更低。

PS：永远记住 CSS 框布局规则：`result = target / offset`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-14T14:51:24.247

你离开了空间，因为你这样做了：

```
padding: 0 0 0 20px; 
```

填充：。. . .20px 均值

```
padding-left:20px; 
```

[如果您减少填充左像素在 Jsfiddle 上预览，](http://jsfiddle.net/JsWtk/11/)这就是它的 样子

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-14T15:03:24.597

缺少链接，这是您[更新的小提琴。](http://jsfiddle.net/JsWtk/12/).

```
<div id="header" class="nav"> 
<ul >
    <li ><a href="#">Home</a></li>
    <li ><a href="#">About</a></li>
    <li ><a href="#">Vision</a></li>
    <li ><a href="#">Clients</a></li>
    <li ><a href="#">Partners</a></li>
</ul>

</div> 

#header {
   position: relative;
   width: 90%;
   height: 40px;
   margin: 0px auto;
   font-size: 25px;
   margin-top: 20px;
   padding-top: 15px;
   border-radius: 5px; 
   background-color: black  ;
   color: white;
   }
.nav ul{
   list-style: none;
   margin:  0;
   display: table;
   table-layout: fixed;
   width: 100%;
   }

.nav ul li{
   list-style: none;
   padding: 0 10px;
   font-weight: normal;
   display:table-cell;
   text-align: center;
}

.nav li > a{
   display:block;
   color : white;   
   text-decoration : none;
} 
```

# php - php上传超大文件最佳实践

> ID：14877264
> 
> 赞同：0
> 
> 时间：2013-02-14T14:40:55.550
> 
> 标签：php, file-upload, uploadify

这个标题有很多问题，但没有人帮忙。我的应用程序应该处理最大 2 GB 的文件上传，并且应该通过浏览器完成，而不是像 FTP 文件上传器那样。
我知道配置设置应该例如在`php.ini`. 但我心中有一些问题：

1.  像**uploadify**库这样的文件大小是一个很好的解决方案还是有更好的选择？

2.  由于体积大，也许需要在其中具有**暂停/恢复**功能。是否可以通过浏览器的 HTTP 文件传输来实现此功能？如果是，怎么做？

3.  有些人谈论某些类型的漏洞，例如**DOS ATTACKS**。在这种情况下，这是一个严重的问题吗？这种攻击的考虑因素是什么？

如果有任何额外的建议和建议，请告诉我。

**更新：**有些人建议使用 FTP 文件上传来完成这项工作。是否应该通过为每个用户指定一个 FTP 帐户来让他们使用 FileZilla 等 FTP 客户端上传文件来完成？如果是这样，应如何处理传入进程。例如，我给每个用户一个像**/home/user1**这样的目录，他将他的文件上传到这个目录中。现在我应该如何根据用户会话数据获取上传的文件数据并将其保存到数据库中。
一般来说，我的意思是如何在这个 FTP 文件上传系统上编写脚本？
或者如果不可能，请告诉我。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T14:58:18.537

暂停/恢复不是 HTTP 上传的标准功能。

应该可以让它工作，但需要大量的工作，而且质量可能非常不稳定。

要实现恢复，您需要以下内容：

*   一个 Javascript 前端，可以查询服务器并询问已经上传了多少文件。
*   Javascript 还需要能够在浏览器中将上传文件分解成块（这对于拥有 2GB 文件的用户来说将是非常痛苦的），并从上传之前停止的点开始上传。
*   由于 HTTP 请求一次发送整个文件，如果您希望能够暂停，Javascript 还需要分块发送它，并且如果用户按下“取消”，则有一个事件处理程序会中止下一个块。
*   您的 PHP 程序会将每个简历视为一个全新的文件上传，因此它需要知道它正在接收现有文件的新块，并使用`append`模式。

如果这听起来像是一个易碎且充满错误的系统的秘诀，那么你是对的。我不想使用这样的网站来上传文件。有太多事情可能出错。

这里有[一个教程](https://hacks.mozilla.org/2011/04/resumeupload/)可能会有所帮助，但我仍然认为这不是一个好主意。

如果我是你，我会考虑为你的上传设置一个 (S)FTP 服务器。麻烦会少很多。

# telerik - 网格重新绑定方法后如何在 Telerik 网格中选择行？

> ID：14877273
> 
> 赞同：0
> 
> 时间：2013-02-14T14:41:27.350
> 
> 标签：telerik, grid

在我的网格中，选择了一行，然后我使用 grid.rebind() 方法重新绑定该网格。现在如何选择在重新绑定之前选择的同一行。

我已尝试使用以下代码，但无法选择该行。

```
var selectedRow = $("#abcgrid tbody tr.t-state-selected");
var abcgrid = $("#abcgrid").data("tGrid");
    abcgrid .rebind();

selectedRow.addClass("t-state-selected"); 
```

也试过

```
var selectedRow = $("#abcgrid tbody tr.t-state-selected");
var selectedRowID = ($(selectedRow)[0]).cells[0].innerHTML;
var gridRows = $("#abcgrid .t-grid-content tbody > tr");
               if (gridRows != null) {
               gridRows.each(function (index, row) {
                  if (row.cells[0].innerHTML == selectedRowID ) {
                     $(row).addClass("t-state-selected");
                   }
               });
              } 
```

两个代码都不起作用。请指导我选择该行。我错过了什么吗。注意 - 它们不是 javascript 错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T14:59:09.670

如果您的行顺序没有改变，您可以使用：

```
var selectedRow = $("#abcgrid tbody tr.t-state-selected");
console.log(selectedRow)
var indexSelecedRow = selectedRow.index();
console.log(indexSelecedRow )
var abcgrid = $("#abcgrid").data("tGrid");
    abcgrid .rebind();

var trs = $("#abcgrid tbody tr");
console.log(trs)
selectedRow = $("#abcgrid tbody tr").eq(indexSelecedRow);
console.log(selectedRow ) 
```

如果网格内容发生变化，那么每一行都应该有一个带有唯一 id 参数的隐藏列。然后您可以保存此 id 参数并在重新绑定后使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:15:02.503

非常感谢您的努力。我通过在 .OnRowDataBound() 客户端事件上编写代码解决了这个问题。我将 selectedID 变量保持为隐藏状态，然后在 .OnRowDataBound() 方法中，我在下面写了几行

```
var selectedRowID = $("#hdnSelectedID").val();
    if selectedRowID != null && selectedRowID != '') {
        if (e.dataItem.ID == selectedRowID ) {
            e.row.className = "t-state-selected";
        }
    } 
```

我认为问题出在 rebind() 方法上，无论如何感谢您的帮助。

# c# - RavenDb 多映射 reduce 中的枚举返回 null 而不是空列表

> ID：14877279
> 
> 赞同：0
> 
> 时间：2013-02-14T14:41:40.790
> 
> 标签：c#, mapreduce, ravendb

我正在使用多映射减少来为每个可枚举的“客户端名称”创建一个唯一的字符串集合，“块”名称。（我喜欢使用多映射，因为我可以确保我的所有客户端在查询中都有一个值，即使它是空的）。

当在该客户端的任何产品中找不到块时，我希望我的索引结果返回一个空列表而不是 null。这是我的索引。

```
public class Client_Blocks
    : AbstractMultiMapIndexCreationTask<Client_Blocks.Result>
{
    public class Result
    {
        public Client.Names ClientName { get; set; }
        public IEnumerable<string> Blocks { get; set; }
    }

    public Client_Blocks()
    {
        AddMap<Product>(products =>   
            from product in products
            where product.Details != null
            where product.Details.Block != null
            select new
            {
                ClientName = product.ClientName,
                Blocks = new List<string>{product.Details.Block}
            });

        AddMap<Client>(clients =>
            from client in clients
            select new
            {
                ClientName = client.Name,
                Blocks = new List<string>()
            });

        Reduce = results => from result in results
            group result by result.ClientName
            into g
            select new
            {
                ClientName = g.Key,
                Blocks = g.Any() ? 
                         g.SelectMany(x => x.Blocks).Distinct() :
                         new List<string>()
            };
    }
} 
```

我也尝试使用`g != null`而不是`g.Any()`并且只有`g.SelectMany(...)`. 索引工作正常，但当特定客户没有带有 Blocks 的产品时，结果中的“Blocks”返回 null 而不是空列表。是否可以从索引中返回一个空列表？列表为空时始终为空是预期的结果吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T15:20:31.667

Your reduce is stored FitBlocks, but your maps are using Blocks

# javascript - 使用 javascript 暂停页面加载

> ID：14877280
> 
> 赞同：1
> 
> 时间：2013-02-14T14:41:42.157
> 
> 标签：javascript

我想知道是否可以暂停页面处理，直到加载某个脚本资源。但这是完整的图片：

有许多不同的脚本，其中一些使用包装器加载，而另一些则作为常规脚本加载，例如在此 HTML 上：

```
<script type="text/javascript" src="/path/script1.js"></script>
<script type="text/javascript" src="/path/script2.js"></script>
<script type="text/javascript">wrapper.get('/path/script3.js');</script>
<script type="text/javascript">wrapper.get('/path/script4.js');</script>
<script type="text/javascript" src="/path/script5.js"></script>
<script type="text/javascript" src="/path/script6.js"></script> 
```

使用包装器加载的脚本总是在所有常规脚本准备好之后下载。至少这是我在 Firefox 18 上遇到的情况。包装器的“get”方法这样做是为了下载资源：

```
jQuery.ajax({
    url: 'url of the script',
    dataType: 'script',
    cache: 'true',
    async: false
}); 
```

上述脚本将按以下顺序加载：

1.  脚本1
2.  脚本2
3.  脚本5
4.  脚本6
5.  脚本3
6.  脚本4

所以我想知道我是否可以在包装器的“get”方法中做些什么来下载它们：

1.  脚本1
2.  脚本2
3.  脚本3
4.  脚本4
5.  脚本5
6.  脚本6

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T14:52:54.353

你可以 wrapper.get 是这样的：

```
function (url) {
    documen.write('<script type="text/javascript" src="' + url + '"></script>');
} 
```

# android - 用于 wordpress 的 Facebook 应用程序

> ID：14877284
> 
> 赞同：0
> 
> 时间：2013-02-14T14:41:50.237
> 
> 标签：android, facebook-comments, facebook-social-plugins

我为 wordpress 安装了 facebook 应用程序，以便我可以在我的 wp 网站上发布帖子以显示在 fb 中，但是在创建我认为需要的应用程序时我有点迷失了。目前我收到此错误消息和请求的信息。我什至不确定我是否想要，但如果是这样我可以使用我的 android 发布，那么答案是否定的，我不想发布到我的 WP 网站以在 FB 中显示。

### 错误

> 您已为您的应用启用 Facebook 登录集成，但尚未指定密钥哈希。出于安全原因，Facebook 应用程序不会与没有与相应密钥哈希匹配的签名的任何本机应用程序进行交互。
> 
> 您已为您的应用启用页面选项卡集成，但尚未指定页面选项卡 URL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T14:46:30.347

您无需在页面上完成 Android / iOS 设置。您只需要填写网址和应用程序域。如果您删除不需要的设置，它应该可以工作（单击框末尾的 x 以删除设置）。

# properties - VB6：某些控件数组元素属性不可用

> ID：14877286
> 
> 赞同：2
> 
> 时间：2013-02-14T14:41:58.607
> 
> 标签：properties, vb6, control-array

通过重构一些旧的 VB6 代码，我偶然发现了一些非常奇怪的行为。当我尝试设置控件数组元素的 DragMode 属性时，当我将此控件与其数组分开时，编译器会告诉我“找不到方法或数据成员”。

请参阅下面的示例，其中“myControl”只是一个带有文本框的用户控件。'Controls' 是一个包含 myControls 的控件数组。第一个循环有效，第二个循环无效。

```
Dim i As Integer
Dim ctrl As myControl

For i = 0 To 2
    myControls(i).DragMode = vbAutomatic
Next i

For Each ctrl In myControls
    ctrl.DragMode = vbAutomatic
Next 
```

**更新：**

感谢@wqw，我让 for each 循环正常工作。对我有用的代码现在看起来像这样：

```
Dim ctrlExt As VBControlExtender
Dim ctrl As myControl

For Each ctrlExt In myControls

    Set ctrl = ctrlExt

    ctrlExt.DragMode = vbAutomatic
    ctrl.SpecificProperty = "Test"
Next 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T14:57:40.970

尝试`Dim ctrl As VBControlExtender`

这有效

```
Dim i As Integer
Dim ctrl As VBControlExtender

For Each ctrl In Controls
    ctrl.DragMode = vbAutomatic
Next

For i = MyControls.LBound To MyControls.UBound
    MyControls(i).DragMode = vbAutomatic
Next i 
```

# c++ - 使用 boost asio 接收文本的最有效方法是什么？

> ID：14877287
> 
> 赞同：4
> 
> 时间：2013-02-14T14:42:03.563
> 
> 标签：c++, boost, boost-asio

现在我通过以下方式接收文本：

```
 boost::asio::streambuf buffer;           
    std::string text;
    while(true) {   
        try
        {

            boost::asio::read_until(*m_pSocket, buffer, "END");

            text = boost::asio::buffer_cast<const char*>(buffer.data());
            buffer.consume(text.size());

            boost::asio::write(*m_pSocket, boost::asio::buffer(text, text.size()));
            std::cout << text<< std::endl;
        }
        catch (std::exception& e)
        {
            std::cerr << "Exception: " << e.what() << "\n";
            break;
        }       
    } 
```

当收到序列“END”时，我只是将收到的文本回显给客户端。我的问题：

在我看来，将该 streambuf 转换为字符串然后使用其中的文本符号非常低效。以良好、干净和有效的方式处理接收到的数据的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T16:03:25.837

总之，您将拥有两个接收到的文本副本：一个在 streambuf 中，另一个在字符串中。这`boost::asio::buffer`只是一个指针，指向字符串和一个大小。

如果不能直接从 stringbuf 发送 pingback，那是您可以获得的最佳选择。但是，我看不出首先发回 streambuf 的内容并在之后使用它供您内部使用会有什么问题。

您的代码可能如下所示：

```
boost::asio::streambuf buffer;           
while(true) {   
    try
    {
        auto size = boost::asio::read_until(*m_pSocket, buffer, "END");

        //send back the seuqence:
        auto begin = boost::asio::buffer_cast<const char*>(buffer.data());
        boost::asio::write(*m_pSocket, boost::asio::buffer(begin, size));

        //consume the content...
        std::istream is(&buffer);
        is >> /* whatever fits here... */
    }
    catch (std::exception& e)
    {
        std::cerr << "Exception: " << e.what() << "\n";
        break;
    }       
} 
```

除此之外，我不会发回整个序列。根据发送的序列的平均大小，动态计算校验和并将其发送回而不是整个序列可能会更好。

# spring - Spring劫持事物（Axis2）希望将其保持在单独的运行时或其他东西中

> ID：14877291
> 
> 赞同：0
> 
> 时间：2013-02-14T14:42:16.560
> 
> 标签：spring, axis2

我需要将复杂的 Spring 定义设置中的服务加载到我的应用程序中，以便从中流式传输数据。

不幸的是，Spring不知何故对应用程序中的现有组件产生了连锁反应——即使在springmodule.xml中没有定义任何数据（有点令人担忧）

我怀疑受影响的组件是 Axis2（或 JibX）。他们本身并没有给出任何错误，只是在读取我试图向其写入消息的端口时——当不涉及弹簧时工作正常——并得到回复消息，他们只是挂起然后计时——出去。

因此，如果可能的话，我想启动一个弹簧上下文，让它创建我想要的组件，从 Spring 上下文中提取它们，然后关闭弹簧上下文，这样它就不会对其他组件产生这种连锁反应。除了在我使用过 Spring 后摆脱 Spring 之外，这一切都有效。

我已经尝试将 ApplicationContext 转换为 ClassApplicationContext （或其他任何名称）并调用 .stop() 和 .close()

但这并不能解决问题。

如果我知道如何执行此操作，或者如果它是合理的，我很乐意在单独的 JVM 或运行时启动 SpringContext，我只需要阻止它与现有应用程序交互（我怀疑这会检测到 Spring 是否已加载并且如果是的话，从中寻找东西，然后破坏一些东西）

如果您想在同一个程序中加载 2 个完全独立的弹簧上下文，并且将它们分开，这一定是一个类似的问题。

对不起，我知道这是漫无边际

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T10:58:13.847

事实证明，真正的问题是 System.getProperties().put( ... ) 被编写 Spring-stuff 的人调用，而不是 Spring 本身。

他为他的组件想要的这些系统属性“挂钩”之一是挂钩到应用程序其他部分的 Axis2 并将其发送到不同的代理端口，覆盖它应该去的那个，然后挂在未建立连接时的端口。

# c# - 方法签名

> ID：14877296
> 
> 赞同：2
> 
> 时间：2013-02-14T14:42:20.277
> 
> 标签：c#

例如：

```
public abstract class A
{}

public class B : A
{}

public class C
{
   public static void DoSth(List<A> a)
   {
   }
}

Main
{
  List<B> muchB = new List<B>;

  C.DoSth(muchB); //Here Compiler tell me that List<B> isnt possible.
} 
```

有人可以告诉我为什么这是不可能的？或者我能做些什么来使它成为可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T14:50:28.047

由于评论中提到的协方差问题，您不能。如果`DoSth`这样做会怎样：

```
public class A2 : A
{
}

public static void DoSth(List<A> a)
{
     a.Add(new A2()); // but a is a List<B>!!!
} 
```

一种选择是使用类型约束进行`DoSth`泛型：

```
public static void DoSth<T>(List<T> a) where T : A
{
} 
```

然后你的代码就可以工作了，因为传入 a`List<B>`意味着你只能添加`B`s （或派生自 s 的类`B`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T14:50:37.927

根据 DanielHilgarth 的评论，DoSth 期望的数据类型是强类型列表。通过向 DoSth 添加类型约束，您可以实现您想要的。

```
static void Main(string[] args)
{
    List<B> muchB = new List<B>();
    C.DoSth<B>(muchB);
}

public abstract class A {}

public class B : A {}

public class C 
{
    public static void DoSth<T>(List<T> a) where T : A { }    
} 
```

# c# - 使用 Html.DropDownListFor 列出一个表中的数据，但将其保存到另一个表

> ID：14877304
> 
> 赞同：1
> 
> 时间：2013-02-14T14:42:39.483
> 
> 标签：c#, asp.net-mvc, razor, html-helper

在创建操作中，我可以将信息添加到编辑器字段并将它们保存到表 1，但是，对于我想要一个下拉列表的字段之一，从表 2 中的列填充，然后可以选择并保存到表 1字段，取决于选择。我已经设法在 Table2 的下拉表中显示信息，但没有将其传递给 Table1

型号1：

```
public int id { get; set; }
    public string JobNo { get; set; }
    public string DelNo { get; set; }
    public Nullable<int> DeptToPack { get; set; }
    public string PackNo { get; set; }
    public Nullable<decimal> TargetHrs { get; set; }
    public Nullable<System.DateTime> PackingDate { get; set; } 
    public virtual Table2 Table2{ get; set; } 
```

型号 2：

```
public Table2()
{
    this.Table1= new HashSet<Table1>();
}

public int id { get; set; }
public string Dept { get; set; }
public virtual ICollection<Table1> Table1{ get; set; } 
```

组合型号：

```
public class Combined
    {
        public Table1 Table1 { get; set; }
        public Table2 Table2{ get; set; }
     } 
```

该视图当前显示所有可以使用 SaveChanges() 编辑并保存到数据库的字段的文本编辑器；在 HomeController 上，在 Create 操作下

创建动作

```
public ActionResult Create()
        {

            IEnumerable<SelectListItem> items = _db.Table2
                .Select(c => new SelectListItem
                {
                    Value = c.Dept,
                    Text = c.Dept
                });

            ViewBag.Dropdownlist = items;

            return View();
        }

        [HttpPost]
        public ActionResult Create(Table1 table1)
        {
            if (ModelState.IsValid)
            {
                _db.Table1.Add(table1);
                _db.SaveChanges();
                return RedirectToAction("Index");
            }

            return View(table1);
        } 
```

该视图显示来自 table1 的信息，以及来自 table2 的一个字段。我似乎遇到了@Html.DropDownList 元素的问题

我目前有（如下）显示数据，但无法处理到 Table1

```
 @Html.DropDownList("Table1.Field1", (IEnumerable<SelectListItem>) ViewBag.DropDownList) 
```

希望图像能更好地解释它，填充的输入框将保存到 Table1 除了 1 字段，这是来自 Table2 列 {InfoToPass} 的下拉列表，其中可以选择 4 个选项中的 1 个，然后该值与所有其他输入将保存到表 1

![在此处输入图像描述](../Images/9191a29f27c570820724ab2a9f55aa93.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T03:20:40.767

您需要创建一个 table1 对象并将相关值从传递给控制器​​的对象传递给它，然后对新的 table2 对象和与之相关的参数执行相同的操作。一旦两者都被适当地填充，保存到各自的表并保存更改。

整理完这两个对象后，您将以这样的方式结束保存：

```
_db.Table2.Add(table2);
_db.Table1.Add(table1);
_db.SaveChanges(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T08:29:44.997

我的场景涉及连接几个表以提供某个列值（因此您可以忽略 linq 查询），这将显示在下拉列表中。然后，用户可以从下拉列表中选择值（如果有），然后可以将其保存到另一个表（*Table1*）。

**创建视图：**

```
 @model TharInfo2.Models.Combined

    <div class="editor-field">
    @Html.DropDownListFor(model => model.Table1.DelNo, (IEnumerable<SelectListItem>)ViewBag.Rev)
    </div> 
```

**创建控制器：**

```
 public ActionResult Create()
            {
            var rd = RouteData.Values["jobno"];
            var query = (from t in _db.table3
                         join d in _db.table2 on t.delivery_number equals d.ID
                         join m in _db.table4 on d.OrderNo equals m.JobNo
                         where m.JobNo == rd
                         select new
                              {
                                  t.rev_delivery_number
                              });

             IEnumerable<SelectListItem> rev_del = query
                        .Select(c => new SelectListItem
                        {
                            Value = c.rev_delivery_number,
                            Text = c.rev_delivery_number
                        });

             ViewBag.Rev = rev_del;

             return View();
             }

                [HttpPost]
                public ActionResult Create(Table1 table1)
                {

                    if (ModelState.IsValid)
                    {
                        _db.Table1.Add(table1);
                        _db.SaveChanges();
                        return RedirectPermanent("Index");

                    }

                    return View(table1);
                } 
```

# r - Using xtable with R and Latex, math mode in column names?

> ID：14877305
> 
> 赞同：23
> 
> 时间：2013-02-14T14:42:46.810
> 
> 标签：r, latex, sweave, xtable

I'm using xtable to compile tables from R automatically while compiling my TeX document. The question I have is how I get the variable names in the table (which in my case are the column names in a dataframe) to be in math mode. I have stored my results in the dataframe adf.results, and essentially what I want is

```
colnames(adf.results) <- c(" ", "$m^r_t$", "$\delta p_t$",
                           "$R^r_t$", "$R^b_t$", "$y^r_t$") 
```

but that simply inserts `$m^r_t$` ... as the column names without interpreting them as being in math mode. Does anyone have a solution?

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-02-14T15:13:12.870

as suggested in the [xtable gallery](http://cran.r-project.org/web/packages/xtable/vignettes/xtableGallery.pdf) vignette you should use a sanitization function (as unikum also suggested). Just some dummy code how I got it working with your example:

```
library(xtable)
adf.results<-matrix(0,ncol=6,nrow=4)
colnames(adf.results) <- c(" ", "$m^r_t$", "$\\delta p_t$","$R^r_t$", "$R^b_t$", "$y^r_t$")
print(xtable(adf.results),sanitize.text.function=function(x){x}) 
```

Good luck with it.

Kind regards,

FM

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-14T15:06:27.207

Please see [xtable gallery](http://cran.r-project.org/web/packages/xtable/vignettes/xtableGallery.pdf): Sanitization section (page 7 and below).

# c++ - 需要指针的私有类变量？

> ID：14877317
> 
> 赞同：1
> 
> 时间：2013-02-14T14:43:06.293
> 
> 标签：c++, qt

我正在整理一个 C++ 类，但我遇到了一个可以修复但不太明白的错误。

我正在尝试使用以下标头（main.h）：

```
#include <git2.h>

class Test
{    
public:
private:
    git_repository gitRepo;
}; 
```

和以下文件（main.cpp）：

```
#include "main.h"

int main(int argc, char *argv[]){
    Test test;
} 
```

但它给了我一个“Test::gitRepo'使用未定义的结构'git_repository'”。结构实际上并不是未定义的，因为如果我使用指向结构的指针而不是结构本身......

```
git_repository * gitRepo; 
```

...它编译得很好。

git_repository 的类型声明如下：

```
typedef struct git_repository git_repository; 
```

我 grepped 了整个包含树，这是代码中唯一的 typedef 或 struct 定义。这是否表明实际的结构定义隐藏在实际的库实现中，但不包含在标头中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-14T14:46:08.407

因为编译器将其`git_repository`视为**Incomplete type**。
编译器看不到结构的定义，`git_repository`因此将其视为不完整类型。这意味着您不能要求编译器执行任何需要编译器知道结构大小或布局的操作。您仍然可以声明指向该结构的指针，因为指向结构的指针始终具有相同的大小，而不管它是哪种结构。

如果您需要创建结构的实例，编译器**必须**查看结构的定义，并且您**必须**包含定义类型的标头。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T14:44:56.313

即使类型不完整，您**也可以**声明指向的指针*（*即，如果您只提供了它的声明，但没有提供定义），因为指针的大小不依赖于的大小并且只要您不访问通过该指针的成员（这里就是这种情况，因为您只声明了一个类型为 的变量），编译器不需要对.`T``T``T``T``T*``T`

但是，如果不完整，**则不能**声明类型变量，因为编译器需要知道 的大小，为此它需要查看的定义。`T``T``T``T`

# spring-mvc - 如何结合 java config 和 xml 在 Spring 3.1 中集成 Spring Security？

> ID：14877319
> 
> 赞同：0
> 
> 时间：2013-02-14T14:43:16.327
> 
> 标签：spring-mvc, spring-security

我正在尝试将 Spring 安全性集成到使用 java config 的应用程序中。

按照 Spring Security 3.1 一书中的示例，我设法让自动生成的登录页面工作。但是当我尝试用自定义页面替换它时，我得到了

```
No mapping found for HTTP request with URI [/myapp/login/form] 
```

我还注意到，虽然本书的示例项目的 jsps 可以包含诸如

```
"/resources/css/main.css" 
```

它们在我的应用程序中不起作用，而是我必须在它们前面加上“../”

不同之处在于我的应用程序也将 java config 用于 servlet 映射（“/”），而本书的示例使用 web.xml（也是“/”）

我的应用程序找不到 /resources 但 ../resources 并且也找不到登录页面的原因可能是什么？

我的 web.xml

```
<display-name>My Web Application</display-name>

<context-param>
    <param-name>contextConfigClass</param-name>
    <param-value>com.myapp.config.AppInitializer</param-value>
</context-param>

<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
        /WEB-INF/spring/security.xml
    </param-value>
</context-param>

<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>
<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>
<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

和 AppInitializer 类：

```
public class AppInitializer implements WebApplicationInitializer {

@Override
public void onStartup(ServletContext context) throws ServletException {
    AnnotationConfigWebApplicationContext root = new AnnotationConfigWebApplicationContext();
    root.register(ApplicationContext.class);
    ServletRegistration.Dynamic dispatcher = context.addServlet("dispatcher", new DispatcherServlet(root));
    dispatcher.setLoadOnStartup(1);
    dispatcher.addMapping("/");
    }
} 
```

请求映射处理程序等在 AppInitializer 引用的 ApplicationContext.class 中定义。它们与书中的示例相同。

此外，login.jsp 目前与示例项目相同。

# extjs - Sencha Touch 命令行中编译产生的语法错误

> ID：14877320
> 
> 赞同：0
> 
> 时间：2013-02-14T14:43:15.810
> 
> 标签：extjs, sencha-touch, sencha-touch-2, sencha-cmd

我正在使用 sencha touch 2.0.1 我需要使用 Sencha 命令构建应用程序，当使用运行命令时

sencha app build 生产

我收到此错误。

在我看来，这与放大项目有关。

你能告诉我我在这里做错了什么吗？谢谢

```
[INFO] Deploying your application to /Applications/MAMP/htdocs/vladimir-XXX/build/production
[INFO] Copied sdk/sencha-touch-all.js
[INFO] Copied app.js
[INFO] Copied resources/images
[INFO] Copied resources/icons
[INFO] Copied resources/startup
[INFO] Resolving your application dependencies (file:////Applications/MAMP/htdocs/vladimir-XXX/index.html)
[INFO] Found 31 dependencies. Concatenating all into '/Applications/MAMP/htdocs/vladimir-XXX/build/production/app.js'
[INFO] Processed sdk/sencha-touch-all.js
[INFO] Minifying sdk/sencha-touch-all.js
[INFO] Processed app.js
[INFO] Minifying app.js
[ERROR] Error: Command failed: 
[ERROR] 2005:25:identifier is a reserved word
[ERROR] 2008:45:missing ; before statement
[ERROR] 2014:21:missing } after property list
[ERROR] 2014:22:syntax error
[ERROR] 2043:5:syntax error
[ERROR] 2051:33:syntax error
[ERROR] 2169:5:syntax error
[ERROR] 2176:29:syntax error
[ERROR] 2236:5:syntax error
[ERROR] 2238:32:syntax error
[ERROR] 2241:13:syntax error
[ERROR] 2242:20:syntax error
[ERROR] 2243:20:syntax error
[ERROR] 2244:24:syntax error
[ERROR] 2246:9:syntax error
[ERROR] 2311:5:syntax error
[ERROR] 2320:31:syntax error
[ERROR] 2378:5:syntax error
[ERROR] 2380:34:syntax error
[ERROR] 2382:17:syntax error
[ERROR] 2388:5:syntax error
[ERROR] 2394:34:syntax error
[ERROR] 2396:17:syntax error
[ERROR] 2408:5:syntax error
[ERROR] 2410:31:syntax error
[ERROR] 2411:17:syntax error
[ERROR] 2417:5:syntax error
[ERROR] 2420:31:syntax error
[ERROR] 2421:13:syntax error
[ERROR] 2422:20:syntax error
[ERROR] 2423:20:syntax error
[ERROR] 2424:24:syntax error
[ERROR] 2426:9:syntax error
[ERROR] 2491:5:syntax error
[ERROR] 2493:29:syntax error
[ERROR] 2494:17:syntax error
[ERROR] 2500:5:syntax error
[ERROR] 2502:12:syntax error
[ERROR] 2503:17:syntax error
[ERROR] 2509:5:syntax error
[ERROR] 2511:33:syntax error
[ERROR] 2513:17:syntax error
[ERROR] 2585:5:syntax error
[ERROR] 2587:32:syntax error
[ERROR] 2589:17:syntax error
[ERROR] 2605:5:syntax error
[ERROR] 2607:32:syntax error
[ERROR] 2609:14:syntax error
[ERROR] 2610:19:syntax error
[ERROR] 2611:19:syntax error
[ERROR] 2612:10:syntax error
[ERROR] 2614:5:syntax error
[ERROR] 2616:30:syntax error
[ERROR] 2617:17:syntax error
[ERROR] 2618:6:syntax error
[ERROR] 2624:21:syntax error
[ERROR] 2630:6:syntax error
[ERROR] 2632:20:syntax error
[ERROR] 2633:17:syntax error
[ERROR] 2655:5:syntax error
[ERROR] 2657:21:syntax error
[ERROR] 2668:5:syntax error
[ERROR] 2670:20:syntax error
[ERROR] 2683:5:syntax error
[ERROR] 2685:36:syntax error
[ERROR] 2686:17:syntax error
[ERROR] 2689:5:syntax error
[ERROR] 2691:36:syntax error
[ERROR] 2692:17:syntax error
[ERROR] 2695:5:syntax error
[ERROR] 2697:12:syntax error
[ERROR] 2698:14:syntax error
[ERROR] 2701:5:syntax error
[ERROR] 2703:10:syntax error
[ERROR] 2704:14:syntax error
[ERROR] 2706:5:syntax error
[ERROR] 2716:30:syntax error
[ERROR] 2739:15:invalid return
[ERROR] 2740:5:syntax error
[ERROR] 2749:39:syntax error
[ERROR] 2769:15:invalid return
[ERROR] 2771:5:syntax error
[ERROR] 2780:15:syntax error
[ERROR] 2788:23:invalid return
[ERROR] 2792:5:syntax error
[ERROR] 2794:2:syntax error
[ERROR] 1:0:Compilation produced 86 syntax errors.
org.mozilla.javascript.EvaluatorException: Compilation produced 86 syntax errors.
    at com.yahoo.platform.yui.compressor.YUICompressor$1.runtimeError(YUICompressor.java:154)
    at org.mozilla.javascript.Parser.parse(Parser.java:392)
    at org.mozilla.javascript.Parser.parse(Parser.java:337)
    at com.yahoo.platform.yui.compressor.JavaScriptCompressor.parse(JavaScriptCompressor.java:312)
    at com.yahoo.platform.yui.compressor.JavaScriptCompressor.<init>(JavaScriptCompressor.java:533)
    at com.yahoo.platform.yui.compressor.YUICompressor.main(YUICompressor.java:131)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.yahoo.platform.yui.compressor.Bootstrap.main(Bootstrap.java:21)
[ERROR] 
[ERROR] 2005:25:identifier is a reserved word
[ERROR] 2008:45:missing ; before statement
[ERROR] 2014:21:missing } after property list
[ERROR] 2014:22:syntax error
[ERROR] 2043:5:syntax error
[ERROR] 2051:33:syntax error
[ERROR] 2169:5:syntax error
[ERROR] 2176:29:syntax error
[ERROR] 2236:5:syntax error
[ERROR] 2238:32:syntax error
[ERROR] 2241:13:syntax error
[ERROR] 2242:20:syntax error
[ERROR] 2243:20:syntax error
[ERROR] 2244:24:syntax error
[ERROR] 2246:9:syntax error
[ERROR] 2311:5:syntax error
[ERROR] 2320:31:syntax error
[ERROR] 2378:5:syntax error
[ERROR] 2380:34:syntax error
[ERROR] 2382:17:syntax error
[ERROR] 2388:5:syntax error
[ERROR] 2394:34:syntax error
[ERROR] 2396:17:syntax error
[ERROR] 2408:5:syntax error
[ERROR] 2410:31:syntax error
[ERROR] 2411:17:syntax error
[ERROR] 2417:5:syntax error
[ERROR] 2420:31:syntax error
[ERROR] 2421:13:syntax error
[ERROR] 2422:20:syntax error
[ERROR] 2423:20:syntax error
[ERROR] 2424:24:syntax error
[ERROR] 2426:9:syntax error
[ERROR] 2491:5:syntax error
[ERROR] 2493:29:syntax error
[ERROR] 2494:17:syntax error
[ERROR] 2500:5:syntax error
[ERROR] 2502:12:syntax error
[ERROR] 2503:17:syntax error
[ERROR] 2509:5:syntax error
[ERROR] 2511:33:syntax error
[ERROR] 2513:17:syntax error
[ERROR] 2585:5:syntax error
[ERROR] 2587:32:syntax error
[ERROR] 2589:17:syntax error
[ERROR] 2605:5:syntax error
[ERROR] 2607:32:syntax error
[ERROR] 2609:14:syntax error
[ERROR] 2610:19:syntax error
[ERROR] 2611:19:syntax error
[ERROR] 2612:10:syntax error
[ERROR] 2614:5:syntax error
[ERROR] 2616:30:syntax error
[ERROR] 2617:17:syntax error
[ERROR] 2618:6:syntax error
[ERROR] 2624:21:syntax error
[ERROR] 2630:6:syntax error
[ERROR] 2632:20:syntax error
[ERROR] 2633:17:syntax error
[ERROR] 2655:5:syntax error
[ERROR] 2657:21:syntax error
[ERROR] 2668:5:syntax error
[ERROR] 2670:20:syntax error
[ERROR] 2683:5:syntax error
[ERROR] 2685:36:syntax error
[ERROR] 2686:17:syntax error
[ERROR] 2689:5:syntax error
[ERROR] 2691:36:syntax error
[ERROR] 2692:17:syntax error
[ERROR] 2695:5:syntax error
[ERROR] 2697:12:syntax error
[ERROR] 2698:14:syntax error
[ERROR] 2701:5:syntax error
[ERROR] 2703:10:syntax error
[ERROR] 2704:14:syntax error
[ERROR] 2706:5:syntax error
[ERROR] 2716:30:syntax error
[ERROR] 2739:15:invalid return
[ERROR] 2740:5:syntax error
[ERROR] 2749:39:syntax error
[ERROR] 2769:15:invalid return
[ERROR] 2771:5:syntax error
[ERROR] 2780:15:syntax error
[ERROR] 2788:23:invalid return
[ERROR] 2792:5:syntax error
[ERROR] 2794:2:syntax error
[ERROR] 1:0:Compilation produced 86 syntax errors.
org.mozilla.javascript.EvaluatorException: Compilation produced 86 syntax errors.
    at com.yahoo.platform.yui.compressor.YUICompressor$1.runtimeError(YUICompressor.java:154)
    at org.mozilla.javascript.Parser.parse(Parser.java:392)
    at org.mozilla.javascript.Parser.parse(Parser.java:337)
    at com.yahoo.platform.yui.compressor.JavaScriptCompressor.parse(JavaScriptCompressor.java:312)
    at com.yahoo.platform.yui.compressor.JavaScriptCompressor.<init>(JavaScriptCompressor.java:533)
    at com.yahoo.platform.yui.compressor.YUICompressor.main(YUICompressor.java:131)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.yahoo.platform.yui.compressor.Bootstrap.main(Bootstrap.java:21)
[INFO] Minified sdk/sencha-touch-all.js 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T20:10:21.427

在我看来，错误消息非常明显：遇到了 JavaScript 语法错误，可能来自您的代码。

通过 JSLint/JSHint 运行您的代码以找出其中的一些问题。如果您有一个大型项目，那么像[LintRoller](http://arthurakay.github.com/LintRoller/)这样的工具可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T20:43:20.217

问题是`debugger`源代码中的标签。所以缩小无法进行。

# jquery - 如何将 jQuery 应用于多个类项子项？

> ID：14877325
> 
> 赞同：0
> 
> 时间：2013-02-14T14:43:27.907
> 
> 标签：jquery, this, children, jquery-hover

我有一堂课叫`.bxSlider`

我想将此 jQuery 应用到所有`.bxSlider`Div 框。但是，我想将一些 jQuery 应用于单个框。

```
$(document).ready(function(){
    // LOAD ITEM SLIDER
    $('.bxslider').bxSlider({
        pager:false     
    });
    // BLACK IMAGE HOVERS
    $(".bxslider").hover(function() {
        $(this)(".bx-wrapper .bx-prev").css("background-image", "url(//www.cdn.com/running/left_arrow_off.png)");
        $(this)(".bx-wrapper .bx-next").css("background-image", "url(//www.cdn.com/running/right_arrow_off.png)");
    }, function() {
        $(this)(".bx-wrapper .bx-prev").css("background-image", "url(//www.cdn.com/running/left_arrow_on.png)");
        $(this)(".bx-wrapper .bx-next").css("background-image", "url(//www.cdn.com/running/right_arrow_on.png)");
    });
}); 
```

HTML 代码，因此您可以看到我是如何使用多个框的。

```
<div class="items">
    <div class="bxslider bx-wrapper">
        Hello <a class="bx-prev" href=""></a>
        Goodbye <a class="bx-next" href=""></a>
    </div>
    <div class="bxslider bx-wrapper">
        Hello <a class="bx-prev" href=""></a>
        Goodbye <a class="bx-next" href=""></a>
    </div>
</div> 
```

我正在使用`this`，但我无法让它工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T14:44:38.190

假设 .bx-prev 是 .bxSlider 的孩子，即：

```
<div class="bxSlider bx-wrapper">
  <div class="bx-prev"></div>
</div> 
```

.

```
 $(this).find(".bx-prev").css("background-image", "url(//www.cdn.com/running/left_arrow_off.png)"); 
```

如果您想定位 .bx-slider 的父级，那么您可以执行以下操作：

```
$(this).closest("#desiredParentId").css("background-image", "url(//www.cdn.com/running/left_arrow_off.png)") 
```

# ruby - 构建路由 API

> ID：14877328
> 
> 赞同：3
> 
> 时间：2013-02-14T14:43:34.037
> 
> 标签：ruby, api, rest, soa

我需要构建一个基本上公开某些 URI 端点并将它们映射到任意数量的后端 URL 的 API。

所以 API 在 Mongo 中会有这样的映射：

```
{"name": "example", "from": "/resources", "to": "http://backendservice.com/1/billing", "method": "POST"}

{"name": "example1", "from": "/resources/:id", "to": "http://backendservice.com/1/billing/:id", "method": "GET"}

{"name": "example2", "from": "/somethingelse/*", "to": "http://google.com/foo/*", "method": "ANY"} 
```

这里的目的是让我们的所有客户都可以使用一个入口点来访问所有各种服务。它还允许简化日志记录和报告。

因此，如果我们请求 api.example.org/resources，系统会将传入的请求 URL 匹配到目标 URL。向目的地发出请求并接收响应，进行适当的日志记录并处理任何错误。说得通？

我的问题：

是否有任何开箱即用的开源解决方案可以做到这一点？

您建议将哪些框架/库等作为一个好的起点。我看过 Goliath (Ruby)，但不限于任何语言，只要它是开源和 linux 即可。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T07:18:29.437

我决定使用 API Umbrella。

[https://github.com/NREL/api-umbrella](https://github.com/NREL/api-umbrella)

它提供了我所需要的。用 Ruby 构建，使用 mongo，进行路由。完美的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T14:58:02.480

WSO2API Manager 是一个完全开源的产品，可在 apcheV2 许可下使用。

您可以在其中使用 APIManager 和 ESB 实现这种多端点配置。当您发布 API 时，您可能需要指向一个服务端点（它可以是代理端点/wso2esb 上的另一个 REST API），并且您可以从 ESB 端根据请求将请求路由到多个端点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T14:54:55.923

如果你愿意超越 Ruby，你可以使用 Python 库[Flask](http://flask.pocoo.org/)。此外，您可以使用 Ruby 的内置 WEBrick HTTP 服务器库来完成此操作。只需创建一个在 URL 字典中查找的 servlet，或者使用元编程动态创建许多 servlet，然后将它们安装在不同的 URL 上。

# postsharp - 你如何使 Postsharp 可测试

> ID：14877331
> 
> 赞同：3
> 
> 时间：2013-02-14T14:43:36.237
> 
> 标签：postsharp, aspect

依赖注入在 Postsharp 中不起作用。如何使方面可测试？我真的想避免创建具体的类来登录我的方面。

当我使用单元测试方法时，我不希望方面运行。如果我正在测试一种方法，我不希望在测试期间触发日志记录方面并尝试创建具体的记录器。

我喜欢 Postsharp 的想法并且很想使用它，但是这两个问题似乎给我带来了太多的麻烦。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T22:00:56.640

对于某些第三方工具，例如 log4net，配置语言足够强大，您可以在单元测试项目中以一种方式配置（例如）日志记录方面，在实际项目中以另一种方式配置。因此，日志方面甚至在您的单元测试中运行，但实际上可能*什么都不做*。

对于其他工具或您自己的自定义解决方案，您最好在方面逻辑内对接口进行编程。然后，基于静态配置文件或项目特定的设置代码，您可以为生产代码指定一个接口实现，为单元测试项目指定另一个接口实现（可能是没有副作用或更好的存根实现，记录什么*可能*会发生单元测试的验证）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T22:40:50.193

更好的是：您可以使用 MSBuild 命令在单元测试项目中禁用 PostSharp。请参阅[此讨论](https://stackoverflow.com/questions/2240015/unit-testing-and-postsharp)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-26T15:32:01.090

这个问题现在在 PostSharp 文档中得到解决：

[http://doc.postsharp.net/postsharp-3.0/Content.aspx/PostSharp-3.0.chm/html/2ad6cf92-08eb-4537-a434-d88a3e493721.htm](http://doc.postsharp.net/postsharp-3.0/Content.aspx/PostSharp-3.0.chm/html/2ad6cf92-08eb-4537-a434-d88a3e493721.htm)

# php - PHP 类 SVG + jQuery-AJAX

> ID：14877335
> 
> 赞同：0
> 
> 时间：2013-02-14T14:43:39.107
> 
> 标签：php, svg

我正在尝试使用我自己制作的 php 中的一个类来重现这个小例子[https://developer.mozilla.org/en-US/docs/SVG/Element/animateMotion 。](https://developer.mozilla.org/en-US/docs/SVG/Element/animateMotion)这是我的 PHP 类

```
class SVG{//https://developer.mozilla.org/en-US/docs/SVG
              //http://www.w3.org/TR/SVG/Overview.html

static function SVG_Frame(array $SVGatt,$conteudoSVG)    {//http://www.w3.org/TR/SVG/struct.html#NewDocument          
            $attrSVG=null;        
            foreach ($SVGatt as $key => $value) {
                if(is_string($key)){
                    $attrSVG .= " ".$key."=\"".$value."\"";
                }            
            }        
            return"<svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" ".$attrSVG.">".$conteudoSVG."</svg>";
        }
static function SVG_Circle(array $circleAtt){//http://www.w3.org/TR/SVG/shapes.html#CircleElement

            $attrCircle=null;
            $conteudoCircle=null;
            foreach ($circleAtt as $key => $value) {

                if(is_string($key)){
                    $attrCircle .= " ".$key."=\"".$value."\"";
                }
                else{
                    if(is_array($value)){
                        foreach ($value as $key2 => $value2) {
                            $conteudoCircle.=$value2;
                        }
                    }
                    else{
                        $conteudoCircle=$value;
                    }

                }
            }

            if($conteudoCircle==""){            
                return "<circle".$attrCircle."/>";
            }else{            
                return "<circle".$attrCircle."/>".$conteudoCircle."</circle>";
            }

        }
static function SVG_AnimateMotion(array $animateMotAtt) {//http://www.w3.org/TR/SVG/animate.html#AnimateMotionElement                                                                 //https://developer.mozilla.org/en-US/docs/SVG/Element/animateMotion
            $attrAninMot=null;
            $conteudoAninMot=null;
            foreach ($animateMotAtt as $key => $value) {

                if(is_string($key)){
                    $attrAninMot .= " ".$key."=\"".$value."\"";
                }
                else{
                    if(is_array($value)){
                        foreach ($value as $key2 => $value2) {
                            $conteudoAninMot.=$value2;
                        }
                    }
                    else{
                        $conteudoAninMot=$value;
                    }                
                }
            }     
            return"<animateMotion ".$attrAninMot."/>".$conteudoAninMot."</animateMotion>";

        }    
static function SVG_MPath(array $mpathtAtt) {//http://www.w3.org/TR/SVG/animate.html#InterfaceSVGMPathElement
//https://developer.mozilla.org/en-US/docs/SVG/Element/mpath
            $attrMPath=null;
            foreach ($mpathtAtt as $key => $value) {            
               $attrMPath .= " ".$key."=\"".$value."\"";                        
            }     
            return"<mpath ".$attrMPath."/>";        
        }    
static function SVG_Path(array $pathtAtt) {//https://developer.mozilla.org/en-US/docs/SVG/Tutorial/Paths
//http://www.w3.org/TR/SVG/paths.html
            $attrPath=null;
            foreach ($pathtAtt as $key => $value) {            
               $attrPath .= " ".$key."=\"".$value."\"";                        
            }     
            return"<path ".$attrPath."/>";        
        }       

    } 
```

这就是我上课的方式

```
$data="M 10,110 
               A 120,120 -45 0,1 110 10 
               A 120,120 -45 0,1 10,110";
$path=  SVG::SVG_Path(array(id=>path1,stroke=>"gray",fill=>"none",d=>$data ));
        $circulo1=SVG::SVG_Circle(array(cx=>10,cy=>110,r=>3,fill=>lightgrey));
        $circulo2=SVG::SVG_Circle(array(cx=>110,cy=>10,r=>3,fill=>lightgrey));

        $mpath=  SVG::SVG_MPath(array("xlink:href"=>"#path1"));
        $animate=  SVG::SVG_AnimateMotion(array(dur=>"6s",repeatCount=>indefinite,$mpath));
        $circuloRed = SVG::SVG_Circle(array(cx=>"",cy=>"",r=>10,fill=>red,$animate));
        $svgFrame = SVG::SVG_Frame(array(width=>500,height=>500), $circulo1.$circulo2.$path.$circuloRed); 
```

当我在 xdebug 上看到 $svgFrame 符合预期时。但是当在浏览器上看到我有那个[http://jsfiddle.net/igoralves1/qd5p9/](http://jsfiddle.net/igoralves1/qd5p9/) 。我不知道为什么它不起作用。而当我使用 AJAX 时，两者都在外面。任何想法都会很有价值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T14:53:41.350

你有一些空标签，比如`<circle ... />`and `<animateMotion ... />`。如果您更好地缩进内容，您会看到这些问题。我认为主要问题是`return "<circle".$attrCircle."/>".$conteudoCircle."</circle>";`

```
<?xml version="1.0"?>
<svg version="1.1" xmlns="http://www.w3.org/2000/svg"  width="500" height="500">
<circle cx="10" cy="110" r="3" fill="lightgrey"/>
<circle cx="110" cy="10" r="3" fill="lightgrey"/>

<path  id="path1" stroke="gray" fill="none" d="M 10,110 
               A 120,120 -45 0,1 110 10 
               A 120,120 -45 0,1 10,110"/>
<circle cx="" cy="" r="10" fill="red">
    <animateMotion  dur="6s" repeatCount="indefinite">
        <mpath  xlink:href="#path1"/>
    </animateMotion>
</circle>
</svg> 
```

# web-scraping - 从网页中自动提取内容和结构

> ID：14877343
> 
> 赞同：1
> 
> 时间：2013-02-14T14:44:19.417
> 
> 标签：web-scraping

我需要将网页的顶部菜单和网页的内容区域提取到 XML 文档中，有什么工具可以为我做这件事吗？这个输出应该是网站的顶部菜单结构，即它的站点地图和页面主要内容区域内每个页面的内容。

或者，如果您不能建议现有工具，您能否建议如何解决此问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-13T07:47:32.250

[自动 Web 数据提取 API](http://scrape.it)允许您从 URL 中自动提取数据，而无需编写任何脚本。

# jquery - 使用 jQuery .each() 根据复选框的状态预设可见性

> ID：14877345
> 
> 赞同：0
> 
> 时间：2013-02-14T14:44:23.167
> 
> 标签：jquery, each

在下面的脚本中，我正在尝试使用类“cb-checkURL”评估所有复选框项目，如果选中，我想通过 jQuery show() 将最近的“.wl-options”div 设置为 display:block。

但是，我错过了一些东西， .each 没有做这项工作。有任何想法吗？

```
jQuery(document).ready(function(){
    jQuery.each( ".cb-checkURL", function() {
        if(jQuery(this).attr("checked")){
            jQuery(this).parent().next(".wl-options").show();
        }
        else
        {
            jQuery(this).parent().next(".wl-options").hide();
        }
    });

    jQuery(".cb-checkURL").click(
        function(){
            jQuery(this).parent().next(".wl-options").toggle();
        });
})'; 
```

HTML 源

```
<label class="wl-active">
    <input class="cb-checkURL" type="checkbox" name="wl[item-2][location][is_url]" checked="checked">&nbsp;URL
</label>
<div class="wl-options" style="clear:both;max-width:400px;display:none">
    <div class="cb-urls">
        <label title="Enter one url slug per line" for="wl[item-2][url][urls]"></label>
        <textarea name="wl[item-2][url][urls]" id="wl[item-2][url][urls]"></textarea>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T14:53:00.797

它可能更简单：

```
jQuery(document).ready(function(){
    var handler = function() {       
        jQuery(this).parent().next(".wl-options").toggle(jQuery(this).is(':checked'));        
    };

    jQuery(".cb-checkURL").click(handler).each(handler);          
}); 
```

JSFiddle：http: [//jsfiddle.net/jA4wS/](http://jsfiddle.net/jA4wS/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T14:49:42.813

```
 jQuery.each( ".cb-checkURL", function() { 
```

你要

```
$(".cb-checkURL").each(function(index) {
    // do something on each .cb-checkURL
  }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T14:46:51.480

您没有在 DOM 中选择任何元素。“$.each() 函数与 $(selector).each() 不同，后者用于专门迭代 jQuery 对象。”，[http: //api.jquery.com/jQuery.each /](http://api.jquery.com/jQuery.each/) 尝试：

```
jQuery(".cb-checkURL").each(function( index ) {}) 
```

# wpf - WPF HierarchicalDataTemplate TreeView 不可点击

> ID：14877349
> 
> 赞同：5
> 
> 时间：2013-02-14T14:44:53.300
> 
> 标签：wpf, xaml, treeview, hierarchicaldatatemplate

我有`TreeView`一个`HierarchicalDataTemplate`。项目已正确填写，但我无法单击`TreeView`项目。（我不能选择一个，所以它被标记为蓝色）。我可以点击前面的`TreeViewItem`，然后选中的是蓝色的。看起来有一个小框可以单击，但其余的不能。

这是我的代码：

**XAML：**

```
<TreeView ItemsSource="{Binding Main.TreeItems}">
    <TreeView.ItemTemplate>
        <HierarchicalDataTemplate ItemsSource="{Binding Path=Children}">
            <TreeViewItem Header="{Binding Path=Header}"/>
        </HierarchicalDataTemplate>
    </TreeView.ItemTemplate>
</TreeView> 
```

**模型**

```
public class ITreeItem
{
    public string Header { get; set; }
    public List<ITreeItem> Children { get; set; } 
}

class MainModel : INotifyPropertyChanged
{
    private List<ITreeItem> _treeitems;

    public MainModel()
    {
        _treeitems = new List<ITreeItem>();

        List<ITreeItem> treeList = new List<ITreeItem>();

        ITreeItem myItem1 = new ITreeItem();
        myItem1.Header = "Test1";
        myItem1.Children = new List<ITreeItem>();
        treeList.Add(myItem1);

        myItem1.Header = "Test2";
        myItem1.Children = new List<ITreeItem>();
        treeList.Add(myItem1);

        TreeItems = treeList;          
    }

    public List<ITreeItem> TreeItems
    {
        get
        {
            return _treeitems;
        }
        set
        {
            _treeitems = value;
            OnPropertyChanged("TreeItems");
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;

    private void OnPropertyChanged(string propertyName)
    {
        PropertyChangedEventHandler handler = PropertyChanged;

        if (handler != null)
        {
            handler(this, new PropertyChangedEventArgs(propertyName));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-14T14:57:45.707

在您的 XAML 中，尝试使用另一个控件，而不是在`<TreeViewItem>`下使用 a `HierarchicalDataTemplate`，例如`TextBlock`：

```
<TextBlock Text="{Binding Path=Header}"/> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-07-02T07:48:52.107

先前的解决方案避免了该问题。有一种使用 header 来选择 a 的方法`TreeViewItem`：在 MSDN 网站上，[我们可以找到一个](http://msdn.microsoft.com/en-us/library/system.windows.controls.treeviewitem%28v=vs.90%29.aspx)使用 header 的示例，并且在哪里`TreeViewItem`可以点击。有人知道为什么这里不可能吗？

我个人破解了使用然后`MouseButtonEventHandler`添加`foreach`项目的方法，但这很脏。`isSelected = false;``((TreeViewItem)sender).IsSelected = true;`

# c# - C# 无法将方法转换为非委托类型

> ID：14877355
> 
> 赞同：40
> 
> 时间：2013-02-14T14:45:11.723
> 
> 标签：c#, .net, methods, delegates

我有一堂课叫`Pin`.

```
public class Pin
{
    private string title;

    public Pin() { }

    public setTitle(string title) {
        this.title = title;
    }
    public String getTitle()
    {
        return title;
    }
} 
```

从另一个类中，我将 Pins 对象添加到`List<Pin>`引脚中，而从另一个类中，我想迭代 List 引脚并获取元素。所以我有这个代码。

```
foreach (Pin obj in ClassListPin.pins)
{
     string t = obj.getTitle;
} 
```

使用此代码，我无法检索标题。为什么？

（注意：`ClassListPin`只是一个包含一些元素的静态类，其中之一是`List<Pin>`引脚）

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-02-14T14:47:00.933

您需要在方法调用之后添加括号，否则编译器会认为您在谈论方法本身（委托类型），而您实际上是在谈论该方法的返回值。

```
string t = obj.getTitle(); 
```

* * *

**额外的非必要信息**

另外，看看属性。这样你就可以像使用变量一样使用title，而在内部，它就像一个函数一样工作。这样你就不必编写函数`getTitle()`and `setTitle(string value)`，但你可以这样做：

```
public string Title // Note: public fields, methods and properties use PascalCasing
{
    get // This replaces your getTitle method
    {
        return _title; // Where _title is a field somewhere
    }
    set // And this replaces your setTitle method
    {
        _title = value; // value behaves like a method parameter
    }
} 
```

或者您可以使用自动实现的属性，默认情况下会使用它：

```
public string Title { get; set; } 
```

而且您不必创建自己的支持字段 ( `_title`)，编译器会自己创建它。

此外，您可以更改属性访问器（getter 和 setter）的访问级别：

```
public string Title { get; private set; } 
```

您可以将属性用作字段，即：

```
this.Title = "Example";
string local = this.Title; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-14T14:47:30.480

`getTitle`是一个函数，所以你需要把`()`它放在后面。

```
string t = obj.getTitle(); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-02-14T14:51:40.643

正如@Antonijn 所说，您需要通过添加括号来**执行**getTitle 方法：

```
 string t = obj.getTitle(); 
```

但我想补充一点，您正在使用 C# 进行 Java 编程。有[属性](http://msdn.microsoft.com/en-us/library/x9fsa0sw.aspx)的概念（一对 get 和 set 方法），应该在这种情况下使用：

```
public class Pin
{
    private string _title;

    // you don't need to define empty constructor
    // public Pin() { }

    public string Title 
    {
        get { return _title; }
        set { _title = value; }
    }  
} 
```

更重要的是，在这种情况下，您不仅可以要求编译器生成 get 和 set 方法，还可以通过[auto-impelemented 属性](http://msdn.microsoft.com/en-us/library/bb384054.aspx)使用来生成反向存储：

```
public class Pin
{
    public string Title { get; set; }
} 
```

现在您不需要**执行**方法，因为使用的属性类似于字段：

```
foreach (Pin obj in ClassListPin.pins)
{
     string t = obj.Title;
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-02-14T14:51:20.407

如前所述，您需要使用`obj.getTile()`

但是，在这种情况下，我认为您正在寻找使用[Property](http://msdn.microsoft.com/en-us/library/x9fsa0sw.aspx)。

```
public class Pin
{
    private string title;

    public Pin() { }

    public setTitle(string title) {
        this.title = title;
    }

    public String Title
    {
        get { return title; }
    }
} 
```

这将允许您使用

```
foreach (Pin obj in ClassListPin.pins)
{
     string t = obj.Title;
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-02-14T14:53:48.627

您可以将您的类代码简化为下面的代码，它将按原样工作，但如果您想让您的示例工作，请在末尾添加括号： string x = getTitle();

```
public class Pin
{
   public string Title { get; set;}
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-02-14T14:46:59.187

因为`getTitle`is 不是 a ，所以如果您没有显式*调用*`string`该方法，它会返回一个引用或一个方法（如果您愿意） 。`delegate`

 *以这种方式调用您的方法：

```
string t= obj.getTitle() ; //obj.getTitle()  says return the title string object 
```

但是，这会起作用：

```
Func<string> method = obj.getTitle; // this compiles to a delegate and points to the method

string s = method();//call the delegate or using this syntax `method.Invoke();` 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-02-14T14:47:30.520

要执行一个方法，您需要添加括号，即使该方法不带参数。

所以应该是：

```
string t = obj.getTitle(); 
```*

# java - JavaFX 2 媒体兼容性？

> ID：14877357
> 
> 赞同：1
> 
> 时间：2013-02-14T14:45:10.313
> 
> 标签：java, javafx

我正在使用 JavaFX 2.2.5 使用[Media](http://docs.oracle.com/javafx/2/api/index.html?javafx/scene/media/Media.html)和[MediaPlayer](http://docs.oracle.com/javafx/2/api/index.html?javafx/scene/media/MediaPlayer.html)类在我的应用程序中播放本地音频文件。我找到[了 JavaFX 1.3 支持的文件类型的](http://docs.oracle.com/javafx/1.3/tutorials/media-platforms-formats/#audio)文档，但找不到版本 2 或更高版本的文档。有谁知道版本 2 的此类文档或确认此信息也适用于它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T15:08:57.550

JavaFX Media 包的 oracle 文档 `javafx.scene.media`包含您需要的内容:)：[JavaFX2 Media](http://docs.oracle.com/javafx/2/api/javafx/scene/media/package-summary.html)

# sql - 如何将查询从文件导入过程

> ID：14877362
> 
> 赞同：0
> 
> 时间：2013-02-14T14:45:35.303
> 
> 标签：sql, oracle10g

我正在生成一个程序来检查所有数据问题，例如数据库表中的重复项。因此格式如下所述：

```
CREATE TABLE <test_table>    --table i created to save the procedure test results
(
RUN_ID number,
QUERY_ID    NUMBER,
QUERY_NAME VARCHAR(1000),
QUERY_STATUS     VARCHAR(10),
MAIN_TABLE_NAME   VARCHAR(500),
EXP_RESULT  VARCHAR(4000),
ACT_RESULT  VARCHAR(4000),
RUN_ON_DT DATE,
TEST_LEVEL_GIVEN NUMBER,
START_TIME_WID NUMBER,
END_TIME_WID NUMBER,
TEST_QUERY  VARCHAR(4000),
QUERY_DESC  VARCHAR(4000),
Comments    VARCHAR(4000)
)

create or replace
    PROCEDURE PROC_TESTING (TEST_LEVEL IN NUMBER DEFAULT 0 , START_WID IN NUMBER DEFAULT 0, END_WID  NUMBER DEFAULT 0) IS
    --TEST_LEVEL=0 IS TO RUN ALL QUERIES : FULL PROCEDURE
    --TEST_LEVEL=1 IS FOR BASIC QUERIES
    --TEST_LEVEL=2 IS FOR DIMENSION QUERIES
    --TEST_LEVEL=3 IS FOR FACT QUERIES
    --TEST_LEVEL=4 IS FOR .... QUERIES
    --TEST_LEVEL=5 IS FOR .... QUERIES

V_RUN_ID NUMBER;
V_QUERY_ID    NUMBER;
V_QUERY_NAME VARCHAR(1000);
V_QUERY_STATUS     VARCHAR(10);
V_MAIN_TABLE_NAME   VARCHAR(500);
V_EXP_RESULT  VARCHAR(4000);
V_ACT_RESULT  VARCHAR(4000);
V_RUN_ON_DT DATE;
V_TEST_QUERY  VARCHAR(4000);
V_QUERY_DESC  VARCHAR(4000);
V_COMMENTS    VARCHAR(4000);

BEGIN

DBMS_OUTPUT.PUT_LINE( 'STARTING THE TESTING PROC ON ' || SYSDATE );

SELECT  RUN_ID.NEXTVAL  INTO V_RUN_ID FROM DUAL;

SELECT SYSDATE INTO V_RUN_ON_DT FROM DUAL;

IF TEST_LEVEL<>1 and TEST_LEVEL<>2 and TEST_LEVEL<>0 
Then
  DBMS_OUTPUT.PUT_LINE( 'Conditions not met' || SYSDATE );
  return;
end if;

IF TEST_LEVEL=1 or TEST_LEVEL=2 or TEST_LEVEL=0 
Then
  V_QUERY_ID:=1;
  V_QUERY_NAME:='Duplicates check';
  V_MAIN_TABLE_NAME:='<table_to_be_tested>';
  V_QUERY_DESC:='checking for duplicates'; 

  -- Expected results
  V_EXP_RESULT := 0; 
  -- Actual results

  select count(*) into V_ACT_RESULT
  from (select  id1
                      , id2
                      , EFFECTIVE_FROM_DT
                      , EFFECTIVE_TO_DT
                      , update_dt       
                      , row_number() over (partition by 
                      id1
                      , id2
                      , EFFECTIVE_FROM_DT
                      , EFFECTIVE_TO_DT
            order by integration_id ) as occurrence
            from <table_to_be_tested>) x
  where occurrence > 1;

  IF V_EXP_RESULT = V_ACT_RESULT THEN 
    V_QUERY_STATUS:='PASS';
  ELSE
    V_QUERY_STATUS:='FAIL';
  END IF; 

END IF;

Insert into <test_table>     --going to store all above explained values into this table
(
RUN_ID ,
QUERY_ID ,
QUERY_NAME ,
QUERY_STATUS   ,
MAIN_TABLE_NAME ,
EXP_RESULT,
ACT_RESULT  ,
RUN_ON_DT,
TEST_LEVEL_GIVEN,
START_TIME_WID,
END_TIME_WID,
TEST_QUERY ,
QUERY_DESC,
Comments )
values
(
V_RUN_ID ,
V_QUERY_ID  ,
V_QUERY_NAME,
V_QUERY_STATUS ,
V_MAIN_TABLE_NAME ,
V_EXP_RESULT  ,
V_ACT_RESULT ,
V_RUN_ON_DT ,
TEST_LEVEL,
START_WID,
END_WID,
V_TEST_QUERY ,
V_QUERY_DESC ,
V_COMMENTS );

END; 
```

现在我有两个问题，除了存储值 `TEST_LEVEL`，我已经完成了所有工作`START_WID`，`END_WID`我在过程中对此进行了评论，因为一个使用它们我得到了编译器错误。问题 1：-如何在（在 @Swapna 答案的帮助下回答。）问题 2：-我将在不同的表上运行多个查询并将它们存储在其中，`TEST_LEVEL`所以`START_WID`我想是否有办法保存所有在一些文本文件中查询，然后用一些脚本将它们导入这里。如果有人知道如何做到这一点，请详细说明。`END_WID``V_ACT_RESULT`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T14:54:27.470

对于像您这样的语句 Select ... from << table_to_be_tested >> Isert into << table_to_be_tested >>.... 您需要使用动态 SQL，例如 EXECUTE IMMEDIATE 或 REF CURSOR。这是基于 Oracle scott.emp 表“动态”构建的 sql 语句的一般示例。您对插入/更新...执行相同操作：

```
DECLARE
  PROCEDURE get_total(p_tab_name VARCHAR2:= 'scott.emp'
                     , p_column_name VARCHAR2:= 'JOB'
                     , p_list VARCHAR2:= '''MANAGER'', ''CLERK''')
IS
  v_sql           VARCHAR2(200);
  cnt             NUMBER:= 0;
BEGIN
 dbms_output.put_line(p_list);
  v_sql:= 'SELECT count(*) total FROM '|| p_tab_name ||
           ' WHERE '||p_column_name||' IN ('||p_list||')';
    EXECUTE IMMEDIATE v_sql INTO cnt; 
  dbms_output.put_line(cnt);
END;
BEGIN
 get_total;
END;
/

Output:

'MANAGER', 'CLERK'
 7 
```

Oracle 文档 - 您可以使用 Oracle 文档找到有关该主题的更多信息，搜索...：[http ://docs.oracle.com/cd/B28359_01/appdev.111/b28370/executeimmediate_statement.htm#LNPLS01317](http://docs.oracle.com/cd/B28359_01/appdev.111/b28370/executeimmediate_statement.htm#LNPLS01317)

简而言之，您不能在程序中使用占位符作为表名。你需要写一堆代码......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T15:12:29.990

START_WID 和 END_WID 被定义为过程输入参数中的数字，并将其插入到日期字段中。这可能是您收到编译错误的原因之一。如果您也分享错误会有所帮助。

# ruby-on-rails - Hash to_json：如何跳过键并仅列出 JSON 响应中的值？

> ID：14877369
> 
> 赞同：4
> 
> 时间：2013-02-14T14:45:50.733
> 
> 标签：ruby-on-rails, ruby, json, rails-activerecord

查询的结果`ActiveRecord`是一个哈希数组。如果我只是将其转换为 JSON 输出，则哈希的键（数据库列名）将在 JSON 结果中与每一行重复。例如`Dailystats.all.to_json`回馈：

```
[
  {\"statisticsDate\":1360454400000,\"storageTopTempAvg\":48.6},
  {\"statisticsDate\":1360540800000,\"storageTopTempAvg\":49.0},
  {\"statisticsDate\":1360627200000,\"storageTopTempAvg\":48.4}
] 
```

但是我想省略重复的列名，只得到这个：

```
[
  {1360454400000:48.6},
  {1360540800000:49.0},
  {1360627200000:48.4}
] 
```

有没有一种简单的方法可以做到这一点，或者我应该构建一个数据转换器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T14:52:23.400

在将数据转换为 json 之前，您应该能够映射数据：

```
Dailystats.all.map {|item| {item[:statisticsDate] => item[:storageTopTempAvg]}}.to_json 
```

# python - Python读取带有分号分隔符的csv文件：解包的值太多

> ID：14877371
> 
> 赞同：1
> 
> 时间：2013-02-14T14:45:59.480
> 
> 标签：python, csv

我正在尝试读取从 Microsoft Excel 导出的 csv 文件，如下所示：

```
114.9;280.9;501.5;0;W10;Firewall south;A;1;2;;
119.0;280.9;501.5;0;W10;Southern escape route;B;2;3;asdasdf;
120.5;280.0;501.5;0;W10;Southern escape route;C;3;4;; 
```

分隔符是分号，某些列可能为空。例如，列 10 可以`asdasdf`作为示例填充。我的代码如下所示：

```
reader = csv.reader(open(inFile), delimiter=";")

nodesTable = window.getNodesTable()
pathsTable = window.getPathsTable()
clearTable(nodesTable)
clearTable(pathsTable)

for x, y, z, safe, mod, descr_node, name, start, end, descr_path in reader:
    nodesTable.SetStringItem(counter, nodesTable_ID_x, x)
    nodesTable.SetStringItem(counter, nodesTable_ID_y, y)
    nodesTable.SetStringItem(counter, nodesTable_ID_z, z)
    nodesTable.SetStringItem(counter, nodesTable_ID_SafeArea, safe)
    nodesTable.SetStringItem(counter, nodesTable_ID_Module, mod)
    nodesTable.SetStringItem(counter, nodesTable_ID_Description, descr_node)

    pathsTable.SetStringItem(counter, pathsTable_ID_Name, name)
    pathsTable.SetStringItem(counter, pathsTable_ID_StartNode, start)
    pathsTable.SetStringItem(counter, pathsTable_ID_EndNode, end)
    pathsTable.SetStringItem(counter, pathsTable_ID_Description, descr_path) 
```

我收到错误消息`ValueError: too many values to unpack`。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T14:47:52.127

CSV 文件的每一行中有**10 个**分号，这意味着该行将被拆分为**11 个**元素。在您的`for`循环中，只使用了**10 个**变量。将行更改为：

```
for x, y, z, safe, mod, descr_node, name, start, end, descr_path, _ in reader: 
```

并忽略该变量，这将获得行尾和行尾`_`之间的空字符。`;`

或将整个循环更改为：

```
cols = (nodesTable_ID_x, nodesTable_ID_y, nodesTable_ID_z,
        nodesTable_ID_SafeArea, nodesTable_ID_Module,
        nodesTable_ID_Description, pathsTable_ID_Name,
        pathsTable_ID_StartNode, pathsTable_ID_EndNode,
        pathsTable_ID_Description)

for rec in reader:
    for col, val in zip(cols, rec):
        nodesTable.SetStringItem(counter, col, val) 
```

# c# - 使用 AutoPoco 填充列表属性

> ID：14877372
> 
> 赞同：2
> 
> 时间：2013-02-14T14:46:04.853
> 
> 标签：c#, .net, unit-testing, autopoco

我最近尝试了 AutoPoco for c#，这是一个自动创建 POCO 并用测试数据填充它们的工具。但是，我现在被困住了。我有一个人 POCO，每个人都有一个电子邮件地址列表，如下所示：

```
class Person
{
    String Name;
    int Age;
    List<string> EmailAddresses;
} 
```

现在我尝试用 AutoPoco 填充它：

```
 x.Include<Person>()
                   .Setup(p => p.Name).Use<FirstNameSource>();
                   .Setup(p => p.EmailAddresses).Use<EmailAddressSource>()
                ; 
```

但第二行因语法错误而失败，因为它需要一个字符串属性，而不是列表。AutoPoco 有一个 EnumerableSource 这可能是我需要的，但是我找不到任何代码示例。你能给我一个关于如何用 AutoPoco 填充字符串列表的提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-07T19:33:57.787

这是一个工作示例。您发布的代码片段无法编译，所以这是第一个问题。

我找不到更优雅的方式来生成集合的元素。

```
public class Person
{
    public String Name;
    public int Age;
    public List<string> EmailAddresses = new List<string>();

    public void Add(string email)
    {
        EmailAddresses.Add(email);
    }
}

[Test]
public void Noodling()
{
        IGenerationSessionFactory factory = AutoPocoContainer.Configure(x =>
    {
        x.Conventions(c => { 
            c.UseDefaultConventions();
        });
        x.AddFromAssemblyContainingType<LegacyUserProfileDto>();

        x.Include<Person>()
            .Setup(p => p.Name).Use<FirstNameSource>()
            .Invoke(z => z.Add(Use.Source<string, EmailAddressSource>()));
        //.Invoke(z => z.EmailAddresses.Add(Use.Source<string, EmailAddressSource>()));//Fails
    });
    IGenerationSession session = factory.CreateSession();

    Person person = session.Single<Person>().Get();
    Console.WriteLine(person.Age + " " + person.Name);
    foreach (string emailAddress in person.EmailAddresses)
    {
        Console.WriteLine(emailAddress);    
    }
} 
```

# c++ - 从 kinect 深度图像进行积分图像法线估计

> ID：14877375
> 
> 赞同：2
> 
> 时间：2013-02-14T14:46:12.267
> 
> 标签：c++, computer-vision, normals, point-cloud-library

我正在执行以下操作以尝试从 Kinect 深度图像生成的点云中估计表面法线：

```
pcl::PointCloud<pcl::PointXYZRGB>::Ptr create_point_cloud_ptr(Mat& depthImage, Mat& rgbImage){

    pcl::PointCloud<pcl::PointXYZRGB>::Ptr cloud(new pcl::PointCloud<pcl::PointXYZRGB>());
    cloud->width = depthImage.rows; //Dimensions must be initialized to use 2-D indexing
    cloud->height = depthImage.cols;
    cloud->resize(cloud->width*cloud->height);

    int min_depth = INT_MAX;
    int num_of_points_added = 0;
    for(int v=0; v< depthImage.rows; v++){ //2-D indexing
        for(int u=0; u< depthImage.cols; u++) {
              Vec3b bgrPixel = rgbImage.at<Vec3b>(v, u);
              pcl::PointXYZRGB p = pcl::PointXYZRGB();
              p.b = bgrPixel[0];
              p.g = bgrPixel[1];
              p.r = bgrPixel[2];
              p.x = u;
              p.y = v;
              p.z = depthImage.at<int16_t>(v,u);
              cloud->at(u,v) = p;
              num_of_points_added++;
        }
    }
    return cloud;
} 

int main(int argc, char* argv[]) {
Mat cap_depth = imread("cap_depth.png",CV_LOAD_IMAGE_ANYCOLOR | CV_LOAD_IMAGE_ANYDEPTH);
Mat cap_rgb = imread("cap.png",CV_LOAD_IMAGE_ANYCOLOR);

pcl::PointCloud<pcl::PointXYZRGB>::Ptr cloud = create_point_cloud_ptr(cap_depth, cap_rgb);

pcl::PointCloud<pcl::Normal>::Ptr normals (new pcl::PointCloud<pcl::Normal>);

pcl::IntegralImageNormalEstimation<pcl::PointXYZRGB, pcl::Normal> ne;
ne.setNormalEstimationMethod (ne.AVERAGE_3D_GRADIENT);
ne.setMaxDepthChangeFactor(0.02f);
ne.setNormalSmoothingSize(10.0f);
ne.setInputCloud(cloud);
ne.compute(*normals);

pcl::visualization::PCLVisualizer viewer("PCL Viewer");
viewer.setBackgroundColor (0.0, 0.0, 0.5);
viewer.addPointCloudNormals<pcl::PointXYZRGB,pcl::Normal>(cloud, normals); 
```

并收到以下错误：

> [1;31m[pcl::OrganizedNeighbor::radiusSearch] 输入数据集不是来自投影设备！残差 (MSE) 0.053184，使用 1406 个有效点 [0;m

我不确定如何继续，或者从原始 kinect 深度图像（有效）计算法线的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T10:15:07.777

对于这种情况，答案是这样做：

```
 if (depthImage.at<int16_t>(v, u) == 0) {
        p.z = NAN;
    } 
```

如果像素的深度无效（在这种情况下为 0），我们必须将其设置`NAN`为 pcl 才能识别

# html - 有哪些成功的方法可以存档以供公众使用放弃的 WordPress 安装？

> ID：14877377
> 
> 赞同：2
> 
> 时间：2013-02-14T14:46:22.473
> 
> 标签：html, wordpress

我们有大量的 Wordpress 安装，这些安装已经运行了多年，并且大约 18 个月左右没有使用。我们一直在关注 WP 更新等，但每次都必须更新每个博客是一件很痛苦的事情，而且垃圾邮件发送者和黑客不断地对其进行探测。

但是，我们仍然从这些安装中获得大量流量，因此我们不希望将它们关闭。

我想做的是将它们转换为静态页面、转储、备份和删除数据库并删除所有 php 代码。关闭潜在的安全漏洞，但允许用户仍然找到页面。

以前有没有人这样做过，你发现了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T21:26:57.117

有一些 wordpress 插件可以简化更新多个 WP 安装。[WPRemote](https://wpremote.com/)是最受欢迎的，但也有[ManageWP](https://managewp.com/)和[InfiniteWP](http://infinitewp.com/)。

# .net - 如何将文件添加到 Perforce .NET API 中的默认更改列表？

> ID：14877381
> 
> 赞同：0
> 
> 时间：2013-02-14T14:46:29.403
> 
> 标签：.net, perforce, p4.net

我们有一个系统可以生成报告并将它们转储到 P4 工作区文件夹中。我正在构建一个 .NET 程序以按计划运行，将这些报告提交给 P4。

如何找到未版本控制的文件，将它们添加到更改列表然后提交？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T22:59:27.707

使用 P4V 客户端很容易做到这一点，因为 Reconcile Offline Work 会自动添加未跟踪的文件并打开以编辑任何有更改的文件。

至于通过 API 以程序方式执行此操作，您可能对类似功能不走运，但请查看[powershell 解决方案](https://stackoverflow.com/a/3219246/105377)

# opencv - IplImage 像素访问 JavaCV

> ID：14877383
> 
> 赞同：6
> 
> 时间：2013-02-14T14:46:41.907
> 
> 标签：opencv, pixel, javacv, iplimage

我正在尝试逐个像素地访问 IplImage 的像素。我使用 Java 和处理，有时我需要逐像素访问。到目前为止我已经这样做了，但我不知道出了什么问题：

```
public IplImage PImageToIplImage(PImage imageSrc)
    {
        IplImage imageDst;
        if(imageSrc.format==RGB)
        {
            imageDst = IplImage.create(imageSrc.width, imageSrc.height, IPL_DEPTH_8U, 3);
            ByteBuffer imagePixels=imageDst.getByteBuffer();
            int locPImage, locIplImage, x, y;
            for(y=0; y<imageSrc.height; y++)
                for(x=0; x<imageSrc.width; x++)
                {
                    locPImage = x + y * width;
                    locIplImage=y*imageDst.widthStep()+3*x;
                    imagePixels.put(locIplImage+2, (byte)(red(imageSrc.pixels[locPImage])));
                    imagePixels.put(locIplImage+1, (byte)(green(imageSrc.pixels[locPImage])));
                    imagePixels.put(locIplImage, (byte)(blue(imageSrc.pixels[locPImage])));
                }
        }
} 
```

在Karlphilip sugestion 之后，我来到这里，仍然无法正常工作。当我尝试显示时，它给了我一个 nullPointer 异常：

```
imageDst = IplImage.create(imageSrc.width, imageSrc.height, IPL_DEPTH_8U, 3);
CvMat imagePixels = CvMat.createHeader(imageDst.height(), imageDst.width(), CV_32FC1);  
cvGetMat(imageDst, imagePixels, null, 0); 
int locPImage, x, y;
for(y=0; y<imageSrc.height; y++)
   for(x=0; x<imageSrc.width; x++)
   {
       locPImage = x + y * width;
       CvScalar scalar = new CvScalar();
       scalar.setVal(0, red(imageSrc.pixels[locPImage]));
       scalar.setVal(1, green(imageSrc.pixels[locPImage]));
       scalar.setVal(2, blue(imageSrc.pixels[locPImage]));
       cvSet2D(imagePixels, y, x, scalar);
   }
   imageDst = new IplImage(imagePixels); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-14T22:25:12.853

在 JavaCV 中迭代每个像素的最快方法是：

```
ByteBuffer buffer = image.getByteBuffer();

for(int y = 0; y < image.height(); y++) {
    for(int x = 0; x < image.width(); x++) {
        int index = y * image.widthStep() + x * image.nChannels();

        // Used to read the pixel value - the 0xFF is needed to cast from
        // an unsigned byte to an int.
        int value = buffer.get(index) & 0xFF;

        // Sets the pixel to a value (greyscale).
        buffer.put(index, value);

        // Sets the pixel to a value (RGB, stored in BGR order).
        buffer.put(index, blue);
        buffer.put(index + 1, green);
        buffer.put(index + 2, red);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T16:14:19.833

以下代码从磁盘加载图像并通过迭代图像的像素执行灰度转换：

```
 IplImage image = cvLoadImage("pipeline.png", CV_LOAD_IMAGE_COLOR);
    if (image == null) 
    {
        System.out.println("Erro ao carregar imagem!");
        return;
    }

    double r, g, b;
    r = g = b = 0.0;       

    CvMat mtx = CvMat.createHeader(image.height(), image.width(), CV_32FC1);  
    cvGetMat(image, mtx, null, 0); 

    System.out.println(mtx.rows() + "x" + mtx.cols());

    for (int i = 0; i < mtx.rows(); i++)
    {
        for (int j = 0; j < mtx.cols(); j++)
        {
            CvScalar rgb = cvGet2D(mtx, i, j);
            r = rgb.val(0);
            g = rgb.val(2);
            b = rgb.val(1);

            double gray = (r + g + b) / 3;

            CvScalar scalar = new CvScalar();
            scalar.setVal(0, gray);
            scalar.setVal(1, gray);
            scalar.setVal(2, gray);
            cvSet2D(mtx, i, j, scalar);
        }
    }        

    IplImage result = new IplImage(mtx); 
    cvSaveImage("manual_gray.png", result);

    cvReleaseImage(image); 
```

不确定创建一个新`CvMat`方法是否是最好的方法，但这是我知道在 javacv 中工作的唯一方法。

**编辑**：

不幸的是，您使用的数据类型不是来自 OpenCV，`like PImage`但我已尽力模拟您在做什么。

```
 // Create a black image
    IplImage imageDst = IplImage.create(imageSrc.width(), imageSrc.height(), IPL_DEPTH_8U, 3); 

    // Create a temporary mat to iterate over it's pixels
    CvMat imagePixels = CvMat.createHeader(imageDst.height(), imageDst.width(), CV_32FC1); 

    // Copy black image to temporary mat
    cvGetMat(imageDst, imagePixels, null, 0);

    int x, y;
    for(y=0; y<imageSrc.height(); y++)
       for(x=0; x<imageSrc.width(); x++)
       {
            // At this point you tried to do: locPImage = x + y * width;
            // but I think you might have mistaken for: locPImage = y + x * width;

            //...
       }
       imageDst = new IplImage(imagePixels); 
```

# ruby-on-rails - validate_presence_of field_name 如果参数存在

> ID：14877385
> 
> 赞同：0
> 
> 时间：2013-02-14T14:46:47.750
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

如果参数存在或特定操作，我想验证对象属性的存在。这是我的表格：

```
<%= simple_form_for(current_user, :url => { :controller => "users", :action => "request_permissions_callback"} , :method => :get) do |f| %>
 <%= f.input :external_email %>
 <%= f.hidden_field :external, :value => true %>
 <%= f.button :submit %>    
<% end %> 
```

在我的模型上，我不知道这种方法是否正确：

```
class User
  include Mongoid::Document
  field :external_email
  validates_presence_of :external_email, :if => :external
  attr_accessor :external
end 
```

或者其他方法是如何验证`:external_email`仅在操作上的存在`request_permissions_callback`？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T15:44:39.260

我的错误是：

```
class User
  include Mongoid::Document
  field :external_email
  attr_accessor :external
  attr_accessible, :external_email, :external
  validates_presence_of :external_email, :if => :external
end 
```

还需要添加虚拟属性`attr_accessible`

谢谢！

# mysql - 最好将多个值存储在表列中，还是创建新表？

> ID：14877390
> 
> 赞同：0
> 
> 时间：2013-02-14T14:47:03.877
> 
> 标签：mysql

我有一个存储用户数据的用户表。假设我需要存储的其中一件事是关于用户使用的所有小部件制造商。我需要获取有关每个制造商的数据（从制造商表中）以呈现给用户。在用户表中，我应该将用户制造商作为多个值存储在下面的列中，然后将其拆分以创建我的查询吗？

### 用户

```
id  | username  | password | widget_man_id | etc
1   | bob       | ****     | 1,4,3         | some data
2   | don       | *****    | 2,3,1         | some more data
.
. 
```

或者我应该创建一个新表来保存有关他们使用的制造商的所有用户信息？像这样...

### 用户人

```
id  | manufacturer  |  user  |  order
1   | 1             |  1     |  1
2   | 4             |  1     |  2
3   | 3             |  1     |  3 
4   | 2             |  2     |  1
5   | 3             |  2     |  2
6   | 1             |  2     |  3
.
. 
```

然后对给定的用户执行这样的查询......

```
select manufacturer, order from user_man where user=1 
```

**另外，如何根据*order*字段按降序对结果进行排序？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T14:52:43.963

不要将多个值放入单个列中，然后将它们拆分。这对于查询来说要慢得多，因为每个值都不能被索引。你最好有一个表，每个表都有单独的记录。您可以索引此表，您的查询将运行得更快。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T15:01:02.723

您在这里尝试实现的是您的和之间[的多对多](http://en.wikipedia.org/wiki/Many-to-many_%28data_model%29)关系。`Users``Manufacturers`

在大多数 RDBMS（如 MySQL）中，唯一的好方法是通过[Junction Table](http://en.wikipedia.org/wiki/Junction_table)。尽管它不反映模型的特定对象，但它有助于对其他两个对象之间的关系进行建模。

创建第三张表，不要忘记创建外键，这样您可以在更新或插入记录时防止错误，并使用一些有趣的功能，例如级联删除。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T14:54:54.773

单独的桌子是唯一的方法。

要按降序排列结果，只需添加`DESC`关键字

```
SELECT manufacturer FROM user_man WHERE user=1 ORDER BY `order` DESC 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-14T15:08:48.363

常见的方法是有一个表用户（像你的但没有 widget_man_id）：

**用户**

```
id  | username  | password | etc
1   | bob       | ****     | some data
2   | don       | *****    | some more data 
```

厂商表：

**制造商**

```
id  | name  | etc
1   | man1  | some data
2   | man2  | some more data 
```

还有一个多对多关系表（如您的示例）：

**用户人**

```
id  | manufacturer  |  user  |  order
1   | 1             |  1     |  1
2   | 4             |  1     |  2
3   | 3             |  1     |  3 
4   | 2             |  2     |  1
5   | 3             |  2     |  2
6   | 1             |  2     |  3 
```

# java - “文本/xml”的骡子 JUnit 测试

> ID：14877392
> 
> 赞同：1
> 
> 时间：2013-02-14T14:47:05.393
> 
> 标签：java, junit, mule

我有一个带有 HTTP 端点的流，它期望“text/xml”作为内容类型。当我使用 RESTClient 之类的东西来点击它时，这个流程可以正常工作。

```
<http:inbound-endpoint exchange-pattern="request-response" host="${web.rsc.host}" port="${web.rsc.port}" path="Quote/1_0/submit" doc:name="HTTP" mimeType="text/xml"/> 
```

但是，我无法让 JUnit 测试正常工作。

测试的精简版本如下所示：

```
@Test 
public void test5() throws MuleException
{
    MuleClient client = muleContext.getClient();

    MuleMessage message = new DefaultMuleMessage( "", muleContext );

    String payload = "<?xml version=\"1.0\" encoding=\"UTF-8\"?><quote><value>dummy</value></quote>";
    message.setProperty( "http.method", "POST", PropertyScope.OUTBOUND );
    message.setProperty( "http.content-type", "text/xml", PropertyScope.OUTBOUND );
    message.setPayload( payload );

    MuleMessage reply = client.send( "http://localhost:8081/Quote/1_0/submit", message, null, 5000 );

    assertNotNull( reply );
    assertNotNull( reply.getPayload() );
    assertEquals( reply.getPayload(), "200" );
} 
```

当它运行时，Mule 在入站端点上抛出异常：**“消息包含 MIME 类型“text/plain”，而预期为“text/xml”。”**

在测试消息上设置内容类型需要什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T15:34:58.490

创建一个`HashMap`属性

```
Map<String, String> properties = new HashMap<String, String>();
properties.add("Content-Type", "text/xml"); 
```

并将其放入`client.send`

```
MuleMessage reply = client.send( "http://localhost:8081/Quote/1_0/submit", payload, properties); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T14:28:46.937

试试这个。

```
 message.setProperty("Content-Type", "text/xml", PropertyScope.OUTBOUND ); 
```

# jsp - 将值从 servlet 传递到 JSP - 在 JSP 页面上接收到空值。

> ID：14877393
> 
> 赞同：0
> 
> 时间：2013-02-14T14:47:06.107
> 
> 标签：jsp, servlets

我正在尝试将两个值（`intMethod`和`SpotDays`）传递`SourceServlet`给名为`CcySorting.jsp`.

我正在使用该`setRequestAttribute()`方法在 servlet 端设置值并`getRequestAttribute()`在 JSP 端使用来接收值。但是我在 JSP 中接收到空值。我的代码如下。请查看它并提出可能的原因。我已经尝试了很多，但都是徒劳的。

我还提供了我的 JSP 和 servlet 文件夹结构。

**我的文件夹结构：**

*   JSP 路径：`application.war\CcySorting.jsp`
*   小服务程序路径：`application.war\WEB-INF\classes\SampleServlet.class`

**我的条目`Web.xml`：**

```
<servlet>
  <servlet-name>SampleServlet</servlet-name>
  <servlet-class>SampleServlet</servlet-class>
</servlet>
<servlet-mapping>
  <servlet-name>SampleServlet</servlet-name>
  <url-pattern>/SampleServlet</url-pattern>
</servlet-mapping> 
```

**我的 JSP 文件：**

*   *CcySorting.jsp*

    ```
    function searchData(brn,ccy)
    {
        var frmObj  =getUserFormObj('window','div0','form0');
        window.open("/SampleServlet?BrnName="+brn+"&Currency="+ccy);    
        var intMethod= <%= request.getAttribute("intMethod1") %>;
        var spotDay = <%= request.getAttribute("SpotDays1") %>;
        alert("data from servlet"+intMethod+"and spot"+spotDay1);
    } 
    ```

*   *SampleServlet.java*

    ```
    public class SampleServlet extends HttpServlet{     

        public void service(HttpServletRequest request,HttpServletResponse response) throws IOException,ServletException{

            // Some code to fetch the data from database and store in two variable intm and spot
            int int=2
            int spot=3              
            request.setAttribute("intMethod1",int);
            request.setAttribute("SpotDays1", spot);
            RequestDispatcher rd=request.getRequestDispatcher("/CcySorting.jsp");
            rd.forward( request, response ) ;
        }
    } 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-08T07:06:24.447

不鼓励使用 scriplets。您可以尝试在您的 JS 函数中使用它。

```
var intmethod='${intmethod1}';
var spotday='${SpotDays1}'; 
```

还可以在您的 HTML 部分中尝试 scriplets，看看您正在检索哪些值。

```
intmethod=<%= request.getAttribute("intMethod1")%>;
spotsday=<%= request.getAttribute("SpotDays1") %>; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T17:23:59.510

嗯..除了检索数据之外，这似乎一切都正确：

将您的`jsp`接收器更改为：

```
var intMethod= '<%= request.getAttribute("intMethod1") %>';
var spotDay = '<%= request.getAttribute("SpotDays1") %>'; 
```

# iphone - 如何从默认的 iOS 相机应用程序将照片发送到我的应用程序？

> ID：14877395
> 
> 赞同：7
> 
> 时间：2013-02-14T14:47:12.050
> 
> 标签：iphone, ios, facebook, email-attachments, photo-gallery

我知道我的应用程序可以读取保存在 iOS 照片库中的照片；我的应用程序也可以在默认的 iOS 照片库中保存一张新照片。但我想要实现的是这样的：默认的照片应用程序应该能够将照片发送到我的 iOS 应用程序，就像您可以将照片分享到 Facebook 或发送到 iOS 邮件应用程序一样。

![在此处输入图像描述](../Images/f5af6d075c877fa1a2c2ce14d837246e.png)

我希望我的应用程序列在此屏幕中。注意：这是 iOS6 Photo 应用程序的截图。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-06-20T09:07:48.430

**可能的！！！**

这件事在 iOS 上非常有趣。

你必须告诉 iOS 你的应用可以打开什么样的文件（见下图）

![在此处输入图像描述](../Images/8422e6f718b3710002e4ab415c48bc26.png)

*   您的应用程序可以打开的文件类型将按**`Conforms To`**字段设置（请参阅各种 [https://developer.apple.com/library/ios/documentation/miscellaneous/Reference/UTIRef/Articles/System-DeclaredUniformTypeIdentifiers.html](https://developer.apple.com/library/ios/documentation/miscellaneous/Reference/UTIRef/Articles/System-DeclaredUniformTypeIdentifiers.html)）

*   这是关于它的最佳示例（[http://www.raywenderlich.com/1980/email-tutorial-for-ios-how-to-import-and-export-app-data-via-email-in-your- ios应用程序](http://www.raywenderlich.com/1980/email-tutorial-for-ios-how-to-import-and-export-app-data-via-email-in-your-ios-app)）

你必须`-application:handleOpenURL:`在`AppDelegate`

```
-(BOOL) application:(UIApplication *)application handleOpenURL:(NSURL *)url {
      //url is a local url of photo you've chosen, iOS copied it into document folder of your app
      //do what you want
} 
```

=================================================

如果您想查看某些应用程序（Dropbox、GoogleDrive ...）如何打开某种文件，您可以查看它们的`info.plist`文件

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-20T07:27:10.833

无法在 iOS“照片”应用中添加您的应用。但是，如果您希望其他（第 3 方）应用程序能够在您的应用程序中打开文件，这是可能的。请参考以下链接。

[http://support.apple.com/kb/PH3268](http://support.apple.com/kb/PH3268)，

[http://www.iphonehacks.com/2013/09/ios-7-photos-app.html](http://www.iphonehacks.com/2013/09/ios-7-photos-app.html)

# xml - 如何在名称空间中没有所有必需架构详细信息的 xml 上使用 xslt

> ID：14877396
> 
> 赞同：1
> 
> 时间：2013-02-14T14:47:14.517
> 
> 标签：xml, xslt, schema

我有一个 XML（来自 Web 服务调用 - 下面提供），它是一个无效的 XML 文档，因为它不包含`xsi`架构命名空间的命名空间前缀的必需声明。

它不声明模式命名空间 -`xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"`但在 xml 中使用相同的命名空间。

示例节点是 -`<messages xsi:nil="true" />`等`<value4 xsi:nil="true" />`。

因此，我无法在 XML 上使用 XSLT 转换，并且我的应用程序失败并出现错误

> 与元素类型“messages”关联的属性“xsi:nil”的前缀“xsi”未绑定。”。

我所有的测试 XSLT 也给出了同样的错误。有没有办法应用一个/任何 XSLT 来删除所有引用的元素`xsi`？删除它们将使其成为适合其他人使用的有效 XML。

从 Web 服务返回的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<p849:retrieveAllValues xmlns:p849="http://package.de.bc.a">
    <retrieveAllValues>
        <messages xsi:nil="true" />
        <existingValues>
            <Values>
                <value1> 10.00</value1>
                <value2>123456</value2>
                <value3>1234</value3>
                <value4 xsi:nil="true" />
                <value5 />
            </Values>
        </existingValues>
        <otherValues xsi:nil="true" />
        <recValues xsi:nil="true" />
    </retrieveAllValues>
</p849:retrieveAllValues> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T15:11:10.983

XSLT 被指定为对命名空间格式良好的 XML 进行操作。您的输入不是命名空间格式正确的。这意味着 XSLT 处理器在遇到此类输入时的行为超出了规范的范围，因此这也意味着虽然您可以使用这个或那个技术与这个或那个 XSLT 处理器来处理这个格式错误的输入，但是不是使用 XSLT 执行此操作的标准方法。

您最好的选择是继续尝试找出为什么您的 Web 服务结果格式不正确（这真的是 Web 服务的错​​误，还是某些软件在您看到数据之前就对数据进行了修改？）。如果所有其他方法都失败了，作为权宜之计，我会在输入上使用 sed 或等效方法。但是您的里程可能会有所不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T21:28:53.383

当您在系统中收到格式错误或无效的 XML（我通常称之为非 XML，因为它实际上根本不是 XML）时，您应该尝试追踪它的源头，并尽可能地解决问题尽可能的来源。如果不能从源头上消除问题，就需要尽早修复非XML。修复技术取决于故障的系统性以及您需要修复的故障的性质。在这种情况下，您的数据在技术上是 XML 格式良好但名称空间格式错误，因此您可以使用非名称空间感知 XML 解析器来解决问题 - 将数据加载到非名称空间中的 DOM -aware 模式，添加属性“xmlns:xsi="...."，然后序列化。

Most XML tools can only handle well-formed XML, so to process non-XML input you will usually need to use non-XML tools. This case however is one where you can use XML tools so long as they aren't namespace-aware.

# sql - TSQL Cascade / Waterfall 值从当前行到下一行

> ID：14877397
> 
> 赞同：2
> 
> 时间：2013-02-14T14:47:28.587
> 
> 标签：sql, sql-server-2008, tsql, common-table-expression

我之前的编辑有点混乱。希望这可以清除它...

TL/DR——只需复制并执行这两个脚本块，它就会变得明显。

* * *

我有一个关于级联数据的问题。本质上，我试图根据一些预定义的条件（如下）以瀑布效应向下移动数据。我已经解决了 18 个场景中的 15 个，我帮助解决了剩下的 3 个场景，即 GID 为 9、10 和 18 的场景。

从某种角度来看，在我正在处理的系统中，数据会不断地导入系统中。数据稀疏，我正在努力重构一整套数据以完成导入过程。我几乎无法控制系统中数据的形状，或者提供给我的数据：-/

*最终的问题是：我如何满足下面的 5 条级联规则，或者，我如何解决我在下面的脚本中提供的测试用例 #18？*

**级联规则**
在这个简化的场景中，级联的“规则”如下：

*   数据将仅在同一组内级联 ( `GID`)
*   一组数据将从 1 ( `Seq`)开始排序
*   `IsLive`列将是 1 或 0
*   如果`IsLive = 1`然后将数据向下移动，直到遇到另一个`IsLive = 1`或`IsLive = 0`具有非空值
*   如果`IsLive = 0`然后将数据向下移动到行中，直到您`IsLive = 0`用值击中另一个。

*注意：我的脚本是一个简化的示例，但在完整场景中`N`，我需要在其上级联列。*

**解决方案说明**
如果您运行下面的 SQL，您将看到 3 列，输入、输出 - CTE 的结果、预期 - 预期结果和结果 - 通过/失败。我包含了一个脚本，**它既**可以创建示例表，也可以通过执行简单地说明测试用例。

*   下面的测试用例脚本有示例数据
*   测试用例脚本有一个我为*正确的期望值*附加的列。（在 INSERT 脚本中查找 GID=18。）

我希望有人可以提供帮助，否则我可能不得不求助于 SQL CLR SP 解决方案。另外，我不依赖这个解决方案，你也可以完全放弃我的解决方案并想出一些新的东西。

**测试用例**

```
DECLARE @Test TABLE (GID int, Seq int, IsLive bit, 
                     Eff date, 
                     Name varchar(50), 
                     Expected varchar(50)) -- expected val should help debug!

INSERT INTO @Test VALUES (1, 1, 1, '01-08-2012', 'RTS', 'RTS')
INSERT INTO @Test VALUES (1, 2, 0, '01-09-2012', 'RTA', 'RTA')
INSERT INTO @Test VALUES (1, 3, 1, '01-10-2012', 'FSA', 'RTA')
INSERT INTO @Test VALUES (1, 4, 0, '01-11-2012',  NULL, 'RTA')
INSERT INTO @Test VALUES (1, 5, 1, '01-12-2012', 'FSA', 'RTA')
INSERT INTO @Test VALUES (2, 1, 1, '01-08-2012', 'RTS', 'RTS')
INSERT INTO @Test VALUES (2, 2, 0, '01-09-2012', 'RTA', 'RTA')
INSERT INTO @Test VALUES (2, 3, 1, '01-10-2012', 'FSA', 'RTA')
INSERT INTO @Test VALUES (2, 4, 0, '01-11-2012', 'GSM', 'GSM')
INSERT INTO @Test VALUES (2, 5, 1, '01-12-2012', 'FSA', 'GSM')
INSERT INTO @Test VALUES (3, 1, 1, '01-01-2012', 'FSA', 'FSA')
INSERT INTO @Test VALUES (3, 2, 0, '01-02-2012', NULL, 'FSA')
INSERT INTO @Test VALUES (4, 1, 1, '01-01-2012', NULL, NULL)
INSERT INTO @Test VALUES (4, 2, 0, '01-02-2012', 'FSA', 'FSA')
INSERT INTO @Test VALUES (4, 3, 0, '01-03-2012', NULL, 'FSA')
INSERT INTO @Test VALUES (5, 1, 0, '01-01-2012', NULL, NULL)
INSERT INTO @Test VALUES (5, 2, 1, '01-02-2012', 'LSI', 'LSI')
INSERT INTO @Test VALUES (5, 3, 0, '01-03-2012', NULL, 'LSI')
INSERT INTO @Test VALUES (6, 1, 1, '01-01-2012', NULL, NULL)
INSERT INTO @Test VALUES (6, 2, 0, '01-02-2012', 'LSI', 'LSI')
INSERT INTO @Test VALUES (6, 3, 1, '01-03-2012', NULL, 'LSI')
INSERT INTO @Test VALUES (7, 1, 1, '01-01-2012', 'FSA', 'FSA')
INSERT INTO @Test VALUES (7, 2, 0, '01-02-2012', NULL, 'FSA')
INSERT INTO @Test VALUES (7, 3, 1, '01-03-2012', 'RTA', 'RTA')
INSERT INTO @Test VALUES (8, 1, 1, '01-01-2012', 'FSA', 'FSA')
INSERT INTO @Test VALUES (8, 2, 0, '01-02-2012', NULL, 'FSA')
INSERT INTO @Test VALUES (8, 3, 1, '01-03-2012', NULL, NULL)
INSERT INTO @Test VALUES (9, 1, 1, '01-01-2012', 'FSA', 'FSA')
INSERT INTO @Test VALUES (9, 2, 1, '01-02-2012', NULL, NULL)
INSERT INTO @Test VALUES (9, 3, 1, '01-03-2012', 'RTS', 'RTS')
INSERT INTO @Test VALUES (10, 1, 1, '01-01-2012', 'FSA','FSA')
INSERT INTO @Test VALUES (10, 2, 1, '01-02-2012', 'GSM','GSM')
INSERT INTO @Test VALUES (10, 3, 1, '01-03-2012', 'RTS','RTS')  
INSERT INTO @Test VALUES (11, 1, 0, '01-01-2012', 'NOP','NOP')
INSERT INTO @Test VALUES (11, 2, 1, '01-02-2012', 'TAP','NOP')
INSERT INTO @Test VALUES (11, 3, 1, '01-03-2012', 'STG','NOP')
INSERT INTO @Test VALUES (12, 1, 1, '01-01-2012', 'RTS','RTS')
INSERT INTO @Test VALUES (12, 2, 0, '01-02-2012', 'RTM','RTM')
INSERT INTO @Test VALUES (12, 3, 1, '01-03-2012', 'LSA','RTM')
INSERT INTO @Test VALUES (12, 4, 1, '01-03-2012', 'LSA','RTM')
INSERT INTO @Test VALUES (12, 5, 1, '01-03-2012', 'GSM','RTM')
INSERT INTO @Test VALUES (13, 1, 1, '01-08-2012', 'BAR','BAR')
INSERT INTO @Test VALUES (13, 2, 0, '01-09-2012', NULL, 'BAR')
INSERT INTO @Test VALUES (13, 3, 1, '01-10-2012', 'TST','TST')
INSERT INTO @Test VALUES (14, 1, 1, '01-08-2012', 'BAR','BAR')
INSERT INTO @Test VALUES (14, 2, 0, '01-09-2012', 'GIP','GIP')
INSERT INTO @Test VALUES (14, 3, 1, '01-10-2012', 'TST','GIP')
INSERT INTO @Test VALUES (15, 1, 1, '01-01-2012', 'BAR','BAR')
INSERT INTO @Test VALUES (15, 2, 0, '01-02-2012', 'BAR','BAR')
INSERT INTO @Test VALUES (15, 3, 1, '01-02-2012', 'BAR','BAR')
INSERT INTO @Test VALUES (15, 4, 1, '01-02-2012', 'GYM','BAR')
INSERT INTO @Test VALUES (16, 1, 1, '01-02-2012', 'BAR','BAR')
INSERT INTO @Test VALUES (16, 2, 0, '01-03-2012', NULL, 'BAR')
INSERT INTO @Test VALUES (16, 3, 1, '01-03-2012', 'BAR','BAR')
INSERT INTO @Test VALUES (16, 4, 1, '01-03-2012', 'GYM','GYM')
INSERT INTO @Test VALUES (17, 1, 1, '01-02-2012', 'BAR', 'BAR')
INSERT INTO @Test VALUES (17, 2, 0, '01-03-2012', 'GIP', 'GIP')
INSERT INTO @Test VALUES (17, 3, 0, '01-03-2012', NULL,  'GIP') 
INSERT INTO @Test VALUES (17, 4, 1, '01-03-2012', 'TST', 'GIP') 

-- -------------------------------------------
-- Following is the GID=18 test case that fails
-- -------------------------------------------
INSERT INTO @Test VALUES (18, 1, 1, '01-02-2012', 'BAR', 'BAR')
INSERT INTO @Test VALUES (18, 2, 0, '01-03-2012', 'BAR', 'BAR')
INSERT INTO @Test VALUES (18, 3, 0, '01-03-2012', NULL, 'BAR') 
INSERT INTO @Test VALUES (18, 4, 1, '01-03-2012', 'TST', 'BAR') 
```

**解决方案**

```
DECLARE @PrevNonLiveSeq int = NULL

;WITH CTE AS ( 
    SELECT  T.GID, T.SEQ, T.IsLive, Expected
            , Name AS Name
            , CASE WHEN T.IsLive = 0 THEN T.SEQ ELSE NULL END As PrevNonLiveSeq
            , CASE WHEN T.IsLive = 1 THEN T.SEQ ELSE NULL END As PrevLiveSeq
            , NULL AS PerNonLiveSeqCalc
            , NULL AS PerLiveSeqCalc
            , 0 PrevSeq
            , CAST(NULL AS varchar(50)) PrevName
    FROM    @Test T
    WHERE   T.Seq = 1
    UNION ALL 
    SELECT  Curr.GID, Curr.SEQ, Curr.IsLive, Curr.Expected
            ,CASE   WHEN Curr.IsLive = 0 THEN ISNULL(Curr.Name, Prev.Name) 
                    ELSE CASE   WHEN PrevNonLive.Name IS NULL THEN 
                                    CASE WHEN Prev.Name <> PrevLive.Name THEN Prev.Name ELSE Curr.Name END
                                ELSE Prev.Name END
             END

            ,CASE WHEN Curr.IsLive = 0 THEN Curr.SEQ ELSE Prev.PrevNonLiveSeq END As PrevNonLiveSeq
            ,CASE WHEN Curr.IsLive = 1 THEN Curr.SEQ ELSE Prev.PrevLiveSeq END As PrevLiveSeq
            , ISNULL(Prev.PrevNonLiveSeq, Curr.SEQ) AS PerNonLiveSeqCalc
            , ISNULL(Prev.PrevLiveSeq, Curr.SEQ) AS PerLiveSeqCalc
            , Prev.Seq PrevSeq, Prev.Name PrevName
    FROM    CTE Prev 
    JOIN    @Test Curr ON Curr.GID = Prev.GID AND Curr.SEQ = Prev.SEQ+1
    JOIN    @Test PrevNonLive ON Prev.GID = PrevNonLive.GID AND PrevNonLive.SEQ = ISNULL(Prev.PrevNonLiveSeq, Curr.SEQ)
    JOIN    @Test PrevLive ON Prev.GID = PrevLive.GID AND PrevLive.SEQ = ISNULL(Prev.PrevLiveSeq, Curr.SEQ)
) 
SELECT CTE.GID, CTE.Seq, T.IsLive
        , T.Name Input, CTE.Name [Output]
        , CASE WHEN CTE.Name = CTE.Expected OR (CTE.Name IS NULL AND CTE.Expected IS NULL) THEN 'Pass' ELSE 'FAIL' END AS Result
        , CTE.Expected
FROM CTE 
INNER JOIN @Test T on CTE.GID = T.GID AND CTE.Seq = T.Seq
ORDER BY CTE.GID, CTE.Seq 
```

## **结果**

对于结果，请复制并在 SSMS 中运行

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T08:00:06.317

这应该可以工作并且不需要递归 CTE。您只需要为您想要“级联”的每个实际字段执行 COALESCE。

```
SELECT crrnt.*, COALESCE(cscd.Name, crrnt.Name) AS [Output]
FROM @Test crrnt
OUTER APPLY (
            SELECT  TOP 1 *
            FROM    @Test prir
            WHERE   prir.GID = crrnt.GID
            AND     prir.Seq < crrnt.Seq
            AND     (
                        (
                            crrnt.IsLive = 1
                        AND prir.IsLive = 0
                        AND prir.Name IS NOT NULL
                        )
                    OR  (
                            crrnt.IsLive = 0 
                        AND crrnt.Name IS NULL
                        AND (
                                (
                                    prir.IsLive = 0
                                AND prir.Name IS NOT NULL
                                )
                            OR  (
                                    prir.IsLive = 1
                                AND NOT EXISTS(
                                                SELECT  *
                                                FROM    @Test confirm
                                                WHERE   confirm.GID = prir.GID
                                                AND     confirm.Seq < prir.Seq
                                                AND     confirm.IsLive = 0
                                                AND     confirm.Name IS NOT NULL
                                            )
                                )
                            )
                        )
                    )
            ORDER BY    prir.Seq DESC
            ) cscd 
```

**编辑：**
测试查询的性能通常是一个好主意，所以下面就是这样。测试包括：
1\. 从最初发布的查询和示例数据开始
2\. 将临时变量更改为临时表（查询将最终命中真实用户表）
3\. 在临时表上创建聚集索引，即：GID、Seq。
4\. 复制数据，但 GID 值更高（将 18 行变成 6,300,063 行）
5\. 使用 DBCC FREEPROCCACAHE 和 DBCC DROPCLEANBUFFERS 确保相同的环境
6\. 使用 STATISTICS IO 和 STATISTICS TIME

```
SET NOCOUNT ON
-- DROP TABLE #Test
IF (OBJECT_ID('tempdb.dbo.#Test') IS NULL)
BEGIN
    CREATE TABLE #Test (GID INT NOT NULL, Seq INT NOT NULL, IsLive BIT NOT NULL, 
                     Eff date, 
                     Name varchar(50), 
                     Expected varchar(50), -- expected val should help debug!
                     PRIMARY KEY(GID, Seq)
                     )

INSERT INTO #Test VALUES (1, 1, 1, '01-08-2012', 'RTS', 'RTS')
INSERT INTO #Test VALUES (1, 2, 0, '01-09-2012', 'RTA', 'RTA')
INSERT INTO #Test VALUES (1, 3, 1, '01-10-2012', 'FSA', 'RTA')
INSERT INTO #Test VALUES (1, 4, 0, '01-11-2012',  NULL, 'RTA')
INSERT INTO #Test VALUES (1, 5, 1, '01-12-2012', 'FSA', 'RTA')
INSERT INTO #Test VALUES (2, 1, 1, '01-08-2012', 'RTS', 'RTS')
INSERT INTO #Test VALUES (2, 2, 0, '01-09-2012', 'RTA', 'RTA')
INSERT INTO #Test VALUES (2, 3, 1, '01-10-2012', 'FSA', 'RTA')
INSERT INTO #Test VALUES (2, 4, 0, '01-11-2012', 'GSM', 'GSM')
INSERT INTO #Test VALUES (2, 5, 1, '01-12-2012', 'FSA', 'GSM')
INSERT INTO #Test VALUES (3, 1, 1, '01-01-2012', 'FSA', 'FSA')
INSERT INTO #Test VALUES (3, 2, 0, '01-02-2012', NULL, 'FSA')
INSERT INTO #Test VALUES (4, 1, 1, '01-01-2012', NULL, NULL)
INSERT INTO #Test VALUES (4, 2, 0, '01-02-2012', 'FSA', 'FSA')
INSERT INTO #Test VALUES (4, 3, 0, '01-03-2012', NULL, 'FSA')
INSERT INTO #Test VALUES (5, 1, 0, '01-01-2012', NULL, NULL)
INSERT INTO #Test VALUES (5, 2, 1, '01-02-2012', 'LSI', 'LSI')
INSERT INTO #Test VALUES (5, 3, 0, '01-03-2012', NULL, 'LSI')
INSERT INTO #Test VALUES (6, 1, 1, '01-01-2012', NULL, NULL)
INSERT INTO #Test VALUES (6, 2, 0, '01-02-2012', 'LSI', 'LSI')
INSERT INTO #Test VALUES (6, 3, 1, '01-03-2012', NULL, 'LSI')
INSERT INTO #Test VALUES (7, 1, 1, '01-01-2012', 'FSA', 'FSA')
INSERT INTO #Test VALUES (7, 2, 0, '01-02-2012', NULL, 'FSA')
INSERT INTO #Test VALUES (7, 3, 1, '01-03-2012', 'RTA', 'RTA')
INSERT INTO #Test VALUES (8, 1, 1, '01-01-2012', 'FSA', 'FSA')
INSERT INTO #Test VALUES (8, 2, 0, '01-02-2012', NULL, 'FSA')
INSERT INTO #Test VALUES (8, 3, 1, '01-03-2012', NULL, NULL)
INSERT INTO #Test VALUES (9, 1, 1, '01-01-2012', 'FSA', 'FSA')
INSERT INTO #Test VALUES (9, 2, 1, '01-02-2012', NULL, NULL)
INSERT INTO #Test VALUES (9, 3, 1, '01-03-2012', 'RTS', 'RTS')
INSERT INTO #Test VALUES (10, 1, 1, '01-01-2012', 'FSA','FSA')
INSERT INTO #Test VALUES (10, 2, 1, '01-02-2012', 'GSM','GSM')
INSERT INTO #Test VALUES (10, 3, 1, '01-03-2012', 'RTS','RTS')  
INSERT INTO #Test VALUES (11, 1, 0, '01-01-2012', 'NOP','NOP')
INSERT INTO #Test VALUES (11, 2, 1, '01-02-2012', 'TAP','NOP')
INSERT INTO #Test VALUES (11, 3, 1, '01-03-2012', 'STG','NOP')
INSERT INTO #Test VALUES (12, 1, 1, '01-01-2012', 'RTS','RTS')
INSERT INTO #Test VALUES (12, 2, 0, '01-02-2012', 'RTM','RTM')
INSERT INTO #Test VALUES (12, 3, 1, '01-03-2012', 'LSA','RTM')
INSERT INTO #Test VALUES (12, 4, 1, '01-03-2012', 'LSA','RTM')
INSERT INTO #Test VALUES (12, 5, 1, '01-03-2012', 'GSM','RTM')
INSERT INTO #Test VALUES (13, 1, 1, '01-08-2012', 'BAR','BAR')
INSERT INTO #Test VALUES (13, 2, 0, '01-09-2012', NULL, 'BAR')
INSERT INTO #Test VALUES (13, 3, 1, '01-10-2012', 'TST','TST')
INSERT INTO #Test VALUES (14, 1, 1, '01-08-2012', 'BAR','BAR')
INSERT INTO #Test VALUES (14, 2, 0, '01-09-2012', 'GIP','GIP')
INSERT INTO #Test VALUES (14, 3, 1, '01-10-2012', 'TST','GIP')
INSERT INTO #Test VALUES (15, 1, 1, '01-01-2012', 'BAR','BAR')
INSERT INTO #Test VALUES (15, 2, 0, '01-02-2012', 'BAR','BAR')
INSERT INTO #Test VALUES (15, 3, 1, '01-02-2012', 'BAR','BAR')
INSERT INTO #Test VALUES (15, 4, 1, '01-02-2012', 'GYM','BAR')
INSERT INTO #Test VALUES (16, 1, 1, '01-02-2012', 'BAR','BAR')
INSERT INTO #Test VALUES (16, 2, 0, '01-03-2012', NULL, 'BAR')
INSERT INTO #Test VALUES (16, 3, 1, '01-03-2012', 'BAR','BAR')
INSERT INTO #Test VALUES (16, 4, 1, '01-03-2012', 'GYM','GYM')
INSERT INTO #Test VALUES (17, 1, 1, '01-02-2012', 'BAR', 'BAR')
INSERT INTO #Test VALUES (17, 2, 0, '01-03-2012', 'GIP', 'GIP')
INSERT INTO #Test VALUES (17, 3, 0, '01-03-2012', NULL,  'GIP') 
INSERT INTO #Test VALUES (17, 4, 1, '01-03-2012', 'TST', 'GIP') 

-- -------------------------------------------
-- Following is the GID=18 test case that fails
-- -------------------------------------------
INSERT INTO #Test VALUES (18, 1, 1, '01-02-2012', 'BAR', 'BAR')
INSERT INTO #Test VALUES (18, 2, 0, '01-03-2012', 'BAR', 'BAR')
INSERT INTO #Test VALUES (18, 3, 0, '01-03-2012', NULL, 'BAR') 
INSERT INTO #Test VALUES (18, 4, 1, '01-03-2012', 'TST', 'BAR') 

CHECKPOINT

INSERT INTO #Test (GID, Seq, IsLive, Eff, Name, Expected)
    SELECT  tmp.GID + (multiplier.Num * 20) AS [GID], tmp.Seq, tmp.IsLive, tmp.Eff, tmp.Name, tmp.Expected
    FROM    #Test tmp
    CROSS JOIN (
                    SELECT  ROW_NUMBER() OVER (ORDER BY (SELECT NULL)) AS [Num]
                    FROM    master.sys.objects so1
                    CROSS JOIN  master.sys.objects so2
                    CROSS JOIN  master.sys.objects so3
                ) multiplier
    WHERE   multiplier.Num <= 100000

CHECKPOINT

SELECT COUNT(*) FROM #Test

ALTER INDEX ALL ON #Test REBUILD

-- SELECT TOP 1000 * FROM #Test ORDER BY GID, Seq

END /* IF (OBJECT_ID('tempdb.dbo.#Test') IS NULL) */
-----------------------------------------------------------------------------

DBCC FREEPROCCACHE WITH NO_INFOMSGS
DBCC DROPCLEANBUFFERS WITH NO_INFOMSGS

PRINT '-- Original solution (Recursive CTE):'
PRINT ''

SET STATISTICS IO ON
SET STATISTICS TIME ON

;WITH CTE AS ( 
    SELECT  T.GID, T.SEQ, T.IsLive, Expected
            , Name AS Name
            , CASE WHEN T.IsLive = 0 THEN T.SEQ ELSE NULL END As PrevNonLiveSeq
            , CASE WHEN T.IsLive = 1 THEN T.SEQ ELSE NULL END As PrevLiveSeq
            , NULL AS PerNonLiveSeqCalc
            , NULL AS PerLiveSeqCalc
            , 0 PrevSeq
            , CAST(NULL AS varchar(50)) PrevName
    FROM    #Test T
    WHERE   T.Seq = 1
    UNION ALL 
    SELECT  Curr.GID, Curr.SEQ, Curr.IsLive, Curr.Expected
            ,CASE   WHEN Curr.IsLive = 0 THEN ISNULL(Curr.Name, Prev.Name) 
                    ELSE CASE   WHEN PrevNonLive.Name IS NULL THEN 
                                    CASE WHEN Prev.Name <> PrevLive.Name THEN Prev.Name ELSE Curr.Name END
                                ELSE Prev.Name END
             END

            ,CASE WHEN Curr.IsLive = 0 THEN Curr.SEQ ELSE Prev.PrevNonLiveSeq END As PrevNonLiveSeq
            ,CASE WHEN Curr.IsLive = 1 THEN Curr.SEQ ELSE Prev.PrevLiveSeq END As PrevLiveSeq
            , ISNULL(Prev.PrevNonLiveSeq, Curr.SEQ) AS PerNonLiveSeqCalc
            , ISNULL(Prev.PrevLiveSeq, Curr.SEQ) AS PerLiveSeqCalc
            , Prev.Seq PrevSeq, Prev.Name PrevName
    FROM    CTE Prev 
    JOIN    #Test Curr ON Curr.GID = Prev.GID AND Curr.SEQ = Prev.SEQ+1
    JOIN    #Test PrevNonLive ON Prev.GID = PrevNonLive.GID AND PrevNonLive.SEQ = ISNULL(Prev.PrevNonLiveSeq, Curr.SEQ)
    JOIN    #Test PrevLive ON Prev.GID = PrevLive.GID AND PrevLive.SEQ = ISNULL(Prev.PrevLiveSeq, Curr.SEQ)
) 
SELECT CTE.GID, CTE.Seq, T.IsLive
        , T.Name Input, CTE.Name [Output]
        , CASE WHEN CTE.Name = CTE.Expected OR (CTE.Name IS NULL AND CTE.Expected IS NULL) THEN 'Pass' ELSE 'FAIL' END AS Result
        , CTE.Expected
FROM CTE 
INNER JOIN #Test T on CTE.GID = T.GID AND CTE.Seq = T.Seq
ORDER BY CTE.GID, CTE.Seq

SET STATISTICS TIME OFF
SET STATISTICS IO OFF

PRINT '=================================================='
------------------------------------------------------

DBCC FREEPROCCACHE WITH NO_INFOMSGS
DBCC DROPCLEANBUFFERS WITH NO_INFOMSGS

PRINT '-- Proposed solution (OUTER APPLY):'
PRINT ''

SET STATISTICS IO ON
SET STATISTICS TIME ON

SELECT crrnt.GID, crrnt.Seq, crrnt.IsLive,
        COALESCE(cscd.Name, crrnt.Name) AS [Output],
        CASE
            WHEN COALESCE(COALESCE(cscd.Name, crrnt.Name), '~~~') = COALESCE(crrnt.Expected, '~~~') THEN 'Pass'
            ELSE 'FAIL'
        END AS [Result],
        crrnt.Expected
FROM #Test crrnt
OUTER APPLY (
            SELECT  TOP 1 *
            FROM    #Test prir
            WHERE   prir.GID = crrnt.GID
            AND     prir.Seq < crrnt.Seq
            AND     (
                        (
                            crrnt.IsLive = 1
                        AND prir.IsLive = 0
                        AND prir.Name IS NOT NULL
                        )
                    OR  (
                            crrnt.IsLive = 0 
                        AND crrnt.Name IS NULL
                        AND (
                                (
                                    prir.IsLive = 0
                                AND prir.Name IS NOT NULL
                                )
                            OR  (
                                    prir.IsLive = 1
                                AND NOT EXISTS(
                                                SELECT  *
                                                FROM    #Test confirm
                                                WHERE   confirm.GID = prir.GID
                                                AND     confirm.Seq < prir.Seq
                                                AND     confirm.IsLive = 0
                                                AND     confirm.Name IS NOT NULL
                                            )
                                )
                            )
                        )
                    )
            ORDER BY    prir.Seq DESC
            ) cscd

SET STATISTICS TIME OFF
SET STATISTICS IO OFF
----------------------------------- 
```

我对上述测试的执行表明：

*   原始查询：CPU 时间 = 173031 毫秒，经过时间 = 252708 毫秒，逻辑读取 = 97,538,739
*   提议的查询 = CPU 时间 = 49125 毫秒，经过的时间 = 74003 毫秒，逻辑读取 = 17,747,775

因此，原始查询的 CPU 和运行时间都慢了大约 3.5 倍，逻辑读取量大约是我提出的查询的 5 倍。小心递归 CTE ;-)。

# c++ - 从 char 中删除尾随反斜杠

> ID：14877398
> 
> 赞同：2
> 
> 时间：2013-02-14T14:47:25.423
> 
> 标签：c++

这可能是一个新手问题，但我不太擅长 C++，而且还是一个早期初学者。我的问题是如何从字符中删除 bk 任何尾随反斜杠：

```
extern "C" UINT __stdcall DeleteTrailingBackslash(MSIHANDLE hInstall)
{
    HRESULT hr = S_OK;
    UINT er = ERROR_SUCCESS;
    LPWSTR szValueBuf = NULL;
    char szInstallPath[MAX_PATH];

    hr = WcaInitialize(hInstall, "DeleteTrailingBackslash");
    ExitOnFailure(hr, "Failed to initialize");

    WcaLog(LOGMSG_STANDARD, "Initialized.");

    hr = WcaGetProperty(L"INSTALLLOCATION",&szValueBuf);
    ExitOnFailure(hr, "failed to get Install Location");

    wcstombs(szInstallPath, szValueBuf, 260);

    // I would like to strip back the trailing backslashes
    // and re add the property to my MSI
    hr = MsiSetProperty(hInstall, "INSTALLLOCATION",  szInstallPath);
    ExitOnFailure(hr, "failed to set the install location");

    LExit:
    er = SUCCEEDED(hr) ? ERROR_SUCCESS : ERROR_INSTALL_FAILURE;
    return WcaFinalize(er);
} 
```

`szInstallPath`可能没有，一个或两个反斜杠，如果有的话，我需要删除反斜杠。任何人都可以为我指出正确的方向，以获得好的网站教程或任何东西吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T15:22:14.497

这是使用 std::string 的 C++ 解决方案

```
...

std::string stdInstallPath = szInstallPath;

while(stdInstallPath.rbegin() != stdInstallPath.rend() && *stdInstallPath.rbegin() == '\\')
    stdInstallPath.pop_back();

hr = MsiSetProperty(hInstall, "INSTALLLOCATION",  stdInstallPath.c_str());

... 
```

这会查看字符串中的最后一个字符，如果它是反斜杠则将其删除，并一直持续到最后一个字符不是反斜杠。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T15:24:24.720

这样的事情可能就足够了：

```
const size_t len = strlen(szInstallPath);
if( szInstallPath[len-1] == '\\' || szInstallPath[len-1] == '/' )
{
    // Terminate the string earlier
    szInstallPath[len-1] = 0;
} 
```

# ide - IntelliJ 中的逻辑文件组/文件夹

> ID：14877402
> 
> 赞同：3
> 
> 时间：2013-02-14T14:47:32.523
> 
> 标签：ide, intellij-idea

我刚刚创建了一个项目，我立即注意到我似乎无法右键单击我的 src 文件夹并在项目视图中创建一个逻辑文件组/文件夹。

在许多 IDE 中，我可以在组/文件夹中任意组织源文件。这些分组帮助我适当地组织我的业务流程和数据访问层。

我如何在 IntelliJ 中做同样的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T15:04:11.960

我不确定与您的想法完全等价的是什么，或者是否有一个。

IntelliJ 有一个“范围”的概念。在项目/导航视图下，单击配置下拉菜单并选择“编辑范围...”。在此窗口中，您可以定义模式以包含项目中的某些文件。

例如，我所有的 DAO 都在名为`my.company.<feature>.persistence`. 我使用模式创建了一个名为“DAOs”的范围`src[myProject]:my.company.*.persistence.*`。现在，当我从“项目视图”下拉列表中选择“DAO”时，我看到了项目的过滤视图。但是，我还没有找到一种方法将过滤后的视图与其他范围同时显示。

这些范围也可以共享，它们可以用来缩小搜索范围。它们在许多方面与 Eclipse 的工作集相似。

许多范围是隐式定义的，例如测试和生产、更改的文件、VCS 变更集等。

# qt - 拖动浮动 QDockWidget 时更改鼠标光标

> ID：14877403
> 
> 赞同：0
> 
> 时间：2013-02-14T14:47:40.113
> 
> 标签：qt, qt4, mouse-cursor, qdockwidget

拖动浮动时是否可以使用不同的鼠标光标`QDockWidget`？既没有`QWidget::setCursor`也`QApplication::setOverrideCursor`没有任何影响。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T06:12:59.380

浮动`QDockWidget`是一个窗口，因此当光标位于非客户区时，您需要要求操作系统更改光标。

Windows的一个小错误示例：

```
#define WINVER 0x0500
#include <windows.h>
#include <windowsx.h>
#include <winuser.h>
bool DockWidget::winEvent(MSG * message, long * result)
{
    switch(message->message)
    {
        case WM_NCMOUSEMOVE:
            if(message->wParam == HTCAPTION)
            {
                qDebug() << "WM_NCMOUSEMOVE";
                if(!cursorHasBeenChanged && !cursorHasBeenClosed)
                {
                    cursorHasBeenChanged = true;
                    QApplication::setOverrideCursor(Qt::OpenHandCursor);
                }
            }
            else
                if(cursorHasBeenChanged)
                {
                    cursorHasBeenChanged = false;
                    QApplication::restoreOverrideCursor();
                }
            break;
        case WM_NCMOUSELEAVE:
            qDebug() << "WM_NCMOUSELEAVE";
            if(cursorHasBeenChanged && !cursorHasBeenClosed)
            {
                cursorHasBeenChanged = false;
                QApplication::restoreOverrideCursor();
            }
            break;
        case WM_NCLBUTTONDOWN:
            if(message->wParam == HTCAPTION)
            {
                qDebug() << "WM_NCLBUTTONDOWN";
                cursorHasBeenClosed = true;
                QApplication::setOverrideCursor(Qt::ClosedHandCursor);
            }
            break;
        case WM_NCLBUTTONUP:
            qDebug() << "WM_NCLBUTTONUP";
            if(cursorHasBeenClosed)
            {
                cursorHasBeenClosed = false;
                QApplication::restoreOverrideCursor();
            }
            break;
        default:
            ;
    }

    return QDockWidget::winEvent(message, result);
} 
```

我认为代码是不言自明的，请不要犹豫，询问是否有您不理解的内容。

错误的部分是我从来没有收到 WM_NCLBUTTONUP 消息，我不知道为什么（我得到 WM_NCMOUSEMOVE 代替） WM_NCMOUSEHOVER （这是非客户区的“进入事件”）。

# xpages - Notes 版本 9 中 Xpages 中 SSJS 的 TODO 标记注释

> ID：14877404
> 
> 赞同：1
> 
> 时间：2013-02-14T14:47:45.217
> 
> 标签：xpages

在奥兰多的 Lotusspere 会议中，提到了 //TODO 注释标签。我认为这是一个非常有用的功能，但遗憾的是在我看来它在 SSJS 中不起作用？

[XSP 源中的任务标签](https://stackoverflow.com/questions/13235349/task-tags-in-xsp-sources)

这有可能在版本 9 中得到修复吗？它确实在 8 中工作，但您需要将它放在 SSJS 代码块之外。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T15:54:07.943

我正在使用从 12 月开始的 Domino Designer 9 beta 版本（公开测试版）。任务标签功能仍然不**包括**SSJS 脚本库和 SSJS 代码块中的 TODO 标签。

--

执行以下操作来控制任务视图显示的内容：

*   选择配置内容

    ![在此处输入图像描述](../Images/193426c41ae23b62d6a0b5a944e28262.png)

*   选择“在同一项目中的任何元素上” ![在此处输入图像描述](../Images/7ca0f622825caf55e60af4b062f04423.png)

您可以对问题视图执行相同的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T19:24:12.360

这可能是我的会议。它是标准的 Eclipse 功能，因此仅适用于某些编辑器，例如 XML 编辑器。您可能遇到了我在准备期间遇到的相同问题。在任务视图中启用它是不够的。您需要在首选项的相关编辑器中启用它。打开首选项并在过滤器框中键入“任务”。然后应该从源窗格中的任何 SSJS 中获取它。它会在项目构建时更新。

# join - EntityFramework 5 多重连接

> ID：14877407
> 
> 赞同：0
> 
> 时间：2013-02-14T14:47:50.260
> 
> 标签：join, include, entity-framework-5

这个页面很好地展示了如何处理不同的场景来获取数据：http: [//msdn.microsoft.com/en-us/library/gg671236%28v=vs.103%29.aspx](http://msdn.microsoft.com/en-us/library/gg671236%28v=vs.103%29.aspx)

**如何选择*一个集合*和*两个参考*？**（行有一个 ProductId 和一个 AddressId，我想同时包含这两个...）

换句话说，我应该把我的放在哪里`Level1Reference2`：

> `query.Include(e => e.Lines.Select(l1 => l1.Level1Reference))`// Level1Reference2?

*   要包含**单个参考**：`query.Include(e => e.Level1Reference)`
*   要包含**一个集合**：`query.Include(e => e.Level1Collection)`
*   要包括**一个参考**，然后**是一个参考向下一级**：`query.Include(e => e.Level1Reference.Level2Reference)`
*   要包含**一个参考**，然后**是一个向下一级的集合**：`query.Include(e => e.Level1Reference.Level2Collection)`
*   要包含**一个集合**，然后**是一个参考，向下一级**：`query.Include(e => e.Level1Collection.Select(l1 => l1.Level2Reference))`
*   要包含**一个集合**，然后**包含一个向下一级的集合**：`query.Include(e => e.Level1Collection.Select(l1 => l1.Level2Collection))`
*   要包含**一个集合**，然后**是一个参考，向下一级**：`query.Include(e => e.Level1Collection.Select(l1 => l1.Level2Reference))`
*   包括**一个集合**、**一个引用**和**一个向下两级的引用**：`query.Include(e => e.Level1Collection.Select(l1 => l1.Level2Reference.Level3Reference))` 包括**一个向下两级的集合**、**一个集合**和**一个引用**：`query.Include(e => e.Level1Collection.Select(l1 => l1.Level2Collection.Select(l2 => l2.Level3Reference)))`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T14:52:33.637

只需重复一个包含：

```
query.Include(e => e.Lines.Select(l1 => l1.Level1Reference))
     .Include(e => e.Lines.Select(l1 => l1.Level1Reference2)) 
```

# powerpivot - Dax公式计算累计学生

> ID：14877410
> 
> 赞同：1
> 
> 时间：2013-02-14T14:47:55.627
> 
> 标签：powerpivot, dax, ssas-2012

我正在 SSAS 2012 表格建模中构建第一个立方体。我得到一个事实表包含以下列

TermDate StudentKey PaperKey 分数 CumulativeNoOfStudents

20100601 1 1 70 2

20100601 2 1 70 2

20100601 3 1 69 3

20100601 4 **2** 68 1

现在我需要使用 DAX 针对每一行生成 Cumulative Number Of Students（第 5 列）作为输出（计算列）。

有人可以帮我建立DAX公式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T09:15:34.057

基于您的 StudentKey 是数字的、连续的和唯一的，您可以使用以下内容：

```
=CALCULATE(COUNTROWS(Table), FILTER(Table,Table[StudentKey]<=EARLIER(Table[StudentKey])) 
```

假设您的表称为“表”

HTH 雅各布

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-30T05:13:42.680

基于一些假设，例如 studentkey 是数字，您的日期表是 DimDate，日期为唯一列，事实表名称为 FactStudent 也可以使用以下公式。

学生的累积数量 :=CALCULATE (CountRows(FactStudent), FILTER(ALL(DimDate[Date]), DimDate[Date] <= MAX(DimDate[Date])))

# regex - 在我的情况下，URL 重写的正则表达式是什么？

> ID：14877411
> 
> 赞同：0
> 
> 时间：2013-02-14T14:48:03.750
> 
> 标签：regex, apache, url-rewriting

我有一个搜索引擎，我希望搜索查询的 URL 更易于阅读。引擎支持在选定类别中搜索，比如 cat1 、cat2 和 cat3

如果用户选择 cat1 和 cat3 进行搜索，则 URL 将如下所示： `mysite.com/search.php?q=productname&cats=cat3,cat1`

我希望重写 url 看起来像下面的形式： `mysite.com/productsearch/cat1-cat3/productname`

是否可以重写此规则并替换`-`为`,`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T14:56:38.060

`sed 's/search.php\?q=\(.*\)&cats=\(cat[0-9]\),\(cat[0-9]\)/productsearch\/\2-\3\/\1/g'`

应该很近...

解析这个：

“找到“search.php?q=”后面的内容，直到“&”，并将其放入缓冲区 1

“找到“cats=”后面的两个东西，形式为“cat后跟一个数字”并用逗号分隔 - 将它们放入缓冲区 2 和 3”

“把整个事情换成`productsearch/(buffer 2)-(buffer 3)/(buffer 1)`”

它可能并不完美，但应该非常接近......测试输出：

```
echo 'mysite.com/search.php?q=productname&cats=cat3,cat1' | sed 's/search.php\?q=\(.*\)&cats=\(cat[0-9]\),\(cat[0-9]\)/productsearch\/\2-\3\/\1/g'
mysite.com/productsearch/cat3-cat1/productname 
```

# jquery - jQuery将变量添加到函数的参数

> ID：14877414
> 
> 赞同：0
> 
> 时间：2013-02-14T14:48:12.693
> 
> 标签：jquery

初学者关于将拆分结果中的变量添加到函数的问题。我有 split[1] ，其中包含要激活的手风琴的编号。

这是功能：

```
jQuery("#termine").accordion({ autoHeight: false, 
                               active: 1, 
                               header: '> div.termin-item > div.termin-header'  
                             }); 
```

在这里，我想用变量 split[1] 替换 active: "1"
关于如何将该变量添加到该参数列表的任何提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T14:55:12.600

也许是这样：

```
jQuery("#termine").accordion({ 
    autoHeight: false, 
    active: split[1], 
    header: '> div.termin-item > div.termin-header'  
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T15:06:14.733

用这个...

```
jQuery("#termine").accordion({
    autoHeight: false, 
    active: parseInt(split[1], 10),
    header: '> div.termin-item > div.termin-header'  
}); 
```

它将字符串值`split[1]`转换为 int 并将其作为`active`参数传递。

# objective-c - Objective-C 中 typeof、__typeof 和 __typeof__ 的区别

> ID：14877415
> 
> 赞同：70
> 
> 时间：2013-02-14T14:48:19.723
> 
> 标签：objective-c

在 Objective-C 中，我经常`__typeof__(obj)`在处理块等时使用。为什么不`__typeof(obj)`使用`typeof(obj)`.

什么时候用哪个？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-02-14T15:33:38.417

`__typeof__()`并且`__typeof()`是 C 语言的特定于编译器的扩展，因为标准 C 不包括这样的运算符。标准 C 要求编译器在语言扩展前加上双下划线（这也是为什么你永远不应该为自己的函数、变量等这样做）

`typeof()`完全相同，但是在理解每个现代编译器都支持它的情况下将下划线抛出窗口。（实际上，现在我想起来了，Visual C++ 可能不支持。`decltype()`虽然它确实支持，但通常提供与 . 相同的行为`typeof()`。）

这三个含义相同，但都不是标准 C，因此符合标准的编译器可能会选择使任何含义有所不同。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2014-12-16T15:41:27.527

正如其他人所提到的，`typeof()`它是**C**的扩展，在各自的编译器中具有各种支持。
如果您碰巧正在为 iOS 或 Mac 应用程序编写 Objective-C，那么您很有可能会使用**Clang**编译器来编译您的应用程序。

Clang 确实支持使用`typeof()`，但从技术上讲，它适用于将 C 语言方言设置为**gnu***类型的情况。但是， **c***和**gnu***`__typeof__()`语言方言都支持- 如 Clang[文档](http://clang.llvm.org/docs/UsersManual.html#differences-between-various-standard-modes)中所述。

 ****现在，如果您使用 Xcode 编写代码，C 语言方言的默认设置似乎是 GNU99，并且允许**'asm' 'inline' 'typeof'**的选项设置为**Yes**，所以使用`typeof()`不会给你带来任何问题。

![Xcode 项目设置](../Images/3115a697a0cd7475adb066e21c0195ff.png)

如果您想（*可以说*）在使用 Clang 编译器时更安全，请使用`__typeof__()`. 这样，如果用于编译的 C 语言方言发生更改或有人决定关闭**'typeof'**的允许，您将不会受到影响。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-06-17T20:57:52.953

希望这会有所帮助：

> -ansi 和各种 -std 选项禁用某些关键字。当您想要使用 GNU C 扩展或应该由所有程序（包括 ISO C 程序）使用的通用头文件时，这会导致麻烦。关键字 asm、typeof 和 inline 在使用 -ansi 或 -std 编译的程序中不可用（尽管 inline 可以在使用 -std=c99 或 -std=c11 编译的程序中使用）。ISO C99 关键字限制仅在使用 -std=gnu99（最终将成为默认值）或 -std=c99（或等效的 -std=iso9899:1999）或更高标准版本的选项时可用。
> 
> 解决这些问题的方法是在每个有问题的关键字的开头和结尾都放置“__”。例如，使用 __asm__ 代替 asm，使用 __inline__ 代替 inline。

[http://gcc.gnu.org/onlinedocs/gcc/Alternate-Keywords.html#Alternate-Keywords](http://gcc.gnu.org/onlinedocs/gcc/Alternate-Keywords.html#Alternate-Keywords)

[https://clang.llvm.org/docs/UsersManual.html#c-language-features](https://clang.llvm.org/docs/UsersManual.html#c-language-features)****

# git - 删除 git 子模块 - 如何在拉取时自动删除？

> ID：14877420
> 
> 赞同：4
> 
> 时间：2013-02-14T14:48:36.890
> 
> 标签：git, git-submodules

我已经阅读[了如何自己删除 git 子模块](https://stackoverflow.com/questions/1260748/how-do-i-remove-a-git-submodule)：

```
# Delete the relevant section from the .gitmodules file.
git config -f .gitmodules --remove-section submodule.$submodulepath
# Delete the relevant section from .git/config
git config -f .git/config --remove-section submodule.$submodulepath
git rm --cached path_to_submodule    # no trailing slash
git commit
rm -rf path_to_submodule 
```

我能做到。但是，当其他人执行某个操作时`git pull`，我们如何确保从他们的系统中删除子模块？变化伴随着拉动而来，但据我所知，`.gitmodules`其他的不多。所以拉的人还是得跑

```
git config -f .git/config --remove-section submodule.$submodulepath
rm -rf path_to_submodule 
```

是对的吗？在一个小型开发团队中，我猜你可以告诉每个人运行这些命令，但这并不理想。

是否有一些魔术命令可以自动执行此操作？特别是我想要一些在部署脚本中自动执行此操作的标准方法。在我的脑海中，我不确定脚本是如何知道比以前少一个子模块的。（不是特别有吸引力）我想到的选择是：

*   `.gitmodules`在拉之前和之后做差异
*   删除所有子模块，然后运行`git submodule update --init`每个部署。
*   子模块在拉取后确实最终成为一个未跟踪的文件，因此一个可行的选项是在拉取后删除所有包含`.git`子目录的未跟踪目录，但您可能会删除想要保留的内容。

任何更好的选择表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:50:31.293

对于将代码部署到具有`git clean`拉后运行的服务器（`post-checkout`例如通过挂钩）是一个安全的选择。

至于更新开发者的仓库，运行`git clean`是危险的，我知道除了手工修剪之外别无他法。

但是，以下（未经测试的）脚本会自动执行，将其命名为`git prune-submodules`. `git pull`这与在 之后，删除的子模块仍然列在 中的事实有关`.git/config`，因此您可以找出要归档的子模块。

我是shell脚本的新手，所以请仔细检查。

```
#!/bin/sh
#get the list of submodules specified in .git/config
#http://stackoverflow.com/questions/1260748/how-do-i-remove-a-git-submodule#comment9411108_7646931
submodules_cfg=`git config -f .git/config -l | cut -d'=' -f1 | grep "submodule.$MODPATH" | sed 's/^submodule\.//' | sed 's/\.url$//'`

#get the list of current submodules
submodules=`git submodule | cut -b 2- | cut -d' ' -f 2`

#archive submodule if listed in .git/config but doesn't exist anymore
for submodule_cfg in $submodules_cfg; do
    submodule_cfg_exists=0
    for submodule in $submodules; do
         if [ "$submodule" == "$submodule_cfg" ]; then
              submodule_cfg_exists=1
         fi
    done

    if ["$submodule_cfg_exists" == 0]; then
        mkdir -p archived-submodules
        mv $submodule_cfg archived-submodules/
        git config -f .git/config --remove-section submodule.$submodule_cfg
    fi
done 
```

# sql - 获取声明的会话变量

> ID：14877422
> 
> 赞同：0
> 
> 时间：2013-02-14T14:48:58.910
> 
> 标签：sql, session, php

原来我的 php.ini 文件配置不正确。使用 fatcow（我的主机），您必须更改 .ini 文件以指定保存会话日期的目录并包括 session.save_path=("directory"); 在 session_start(); 之前。

你们完全正确。这是一次很棒的学习经历。

我在会话方面遇到问题。

在我的第一页上，我已经正确声明了会话变量，因为我可以在我声明它们的 php 文件中打印它们。在用户使用我的标题转发到的页面上，我尝试执行以下操作，但没有打印。好像 session_start(); 什么也没做。我试过 Print_R(); 它只打印 Array ( )。这是我在标题中指定的页面中的代码 - 它是一个 .phtml 文件。

```
//HTML code up here
 <?   
session_start();
echo $_SESSION['dentist_first_name'];
Print_r ($_SESSION);
 ?>
//HTML code down here 
```

我需要在登录页面上做些什么来确保会话继续进行吗？我使用了 session_start(); 在原始页面上。

真的很困惑，我的变量没有被拾起。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T14:50:15.783

`session_start()` *必须*在输出任何 HTML 之前调用

```
 <?   
session_start();
?>
//HTML code up here
<?php
echo $_SESSION['dentist_first_name'];
Print_r ($_SESSION);
 ?>
//HTML code down here 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T14:53:17.473

session_start(); 必须在输出 HTML 之前

如果是这种情况，您提到标题转发用户。标头是否在到达页面中的 $_SESSION 声明之前转发用户？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T14:56:03.663

如果您在 session_start() 之前进行任何输出，这将不起作用。

甚至 php 打开标记之前的空格也是输出：

```
 <?   
session_start();
?> 
```

做这个：

```
<?   
session_start();
?> 
```

# jquery - 折叠事件 - 显示，如何获取选定元素

> ID：14877426
> 
> 赞同：0
> 
> 时间：2013-02-14T14:49:17.763
> 
> 标签：jquery, twitter-bootstrap

如何向 中添加一个类`.accordion-group`，以便它只有一个选定的类显示打开的手风琴？

我看到了我可以做的文档：

```
$('#myCollapsible').on('show', function () {
// do something…
}) 
```

但是我如何获得新元素？`$(this)`返回`$('#myCollapsible')`哪个是`ul`

jSFiddle：http: [//jsfiddle.net/KVdfT/1/](http://jsfiddle.net/KVdfT/1/)

文档：http: [//twitter.github.com/bootstrap/javascript.html#collapse](http://twitter.github.com/bootstrap/javascript.html#collapse)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T14:59:21.580

如果我正确理解您的问题：

```
$("#myCollapsible").on("shown", function () {
    $(".foo", this).removeClass("foo");
    $(".in", this).parent().addClass("foo");
}); 
```

示例：http: [//jsfiddle.net/KVdfT/6/](http://jsfiddle.net/KVdfT/6/)

# oracle - Oracle 应用服务器 10 下载链接请

> ID：14877433
> 
> 赞同：-2
> 
> 时间：2013-02-14T14:49:36.397
> 
> 标签：oracle, oracle-application-server

我需要 Oracle Application Server 10。请给我下载此软件的链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T14:52:47.397

我用谷歌搜索并发现：[http ://www.oracle.com/technetwork/middleware/ias/downloads/index.html](http://www.oracle.com/technetwork/middleware/ias/downloads/index.html)

干杯，

# perl - 如何在两个文件之间查找重复值并打印

> ID：14877436
> 
> 赞同：0
> 
> 时间：2013-02-14T14:49:40.100
> 
> 标签：perl, awk

我有两个文件，一个有一个 IP 地址（我已经使用 perl 去除了 ip），一个有更多信息的 ip。我需要进行比较或使用 perl 并在每个文件中找到重复的 IP。但我需要包含更多信息的第二个文件保持完整，当找到重复文件时打印第二个文件的整行。

**file1 内容示例（只是 ip 没有逗号等）**

```
114.42.141.131 
```

**file2 内容示例（找到匹配项时需要打印所有这些信息）**

```
114.42.141.131,Host TW,Taipei,25.0391998291,121.525001526 
```

这有点超出我的技能。任何帮助将不胜感激！！！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T15:07:36.673

要匹配第一个字段，您只需要：

```
awk -F, 'FNR==NR { a[$1]; next } $1 in a' file1 file2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T14:55:55.817

我假设您具有外壳访问权限。

如果第一个文件只包含 IP，那么您可以执行以下操作：

```
REF_IP=`cat file1` 
```

然后，您可以使用第二个文件中的 grep：

```
grep "${REF_IP}" file2 
```

结果应该是具有重复地址的行。

注意：实际语法可能略有不同（我现在无法访问 shell）

高温高压

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T15:00:39.150

看看这个 oneliner，如果它是你想要的：

请注意，这只会在 file2 中打印重复的 ip 行一次。还假设file2中没有重复的ips。

```
 awk -F, 'NR==FNR{p[$1]=$0;next}{a[$0]++}END{for(x in a)if (a[x]>1)print p[x]}' file2 file1 
```

小测试：

```
kent$  head f1 f2
==> f1 <==
1.1.1.1
1.1.1.1
1.1.1.1
2.2.2.2

==> f2 <==
1.1.1.1,Host TW,Taipei,25.0391998291,121.525001526
2.2.2.2,this is for 2.2.

kent$  awk -F, 'NR==FNR{p[$1]=$0;next}{a[$0]++}END{for(x in a)if (a[x]>1)print p[x]}' f2 f1
1.1.1.1,Host TW,Taipei,25.0391998291,121.525001526 
```

# javascript - 使用虚拟键盘 JavaScript 获取文本字段的 ID

> ID：14877439
> 
> 赞同：1
> 
> 时间：2013-02-14T14:49:51.627
> 
> 标签：javascript, jquery, html, keyboard

[我在这个演示](http://jsfiddle.net/Mils/FE4tu/23/)中发现了一些异常。实际上我想获取文本字段的ID；我在输入文本中添加了一个 ID，并尝试获取具有可见属性的 ID（在键盘中），但我发现了一个问题；当我第一次单击文本字段时没有任何反应，当我再次单击新文本字段时，我得到了我单击的最后一个 id。但是，使用接受的属性（也在键盘中）一切正常。

你能告诉我发生了什么吗？

[键盘源](http://mottie.github.com/Keyboard/)

代码 ：

```
$('.num').keyboard({
    layout: 'num',
    restrictInput: true,
    preventPaste: true,
    autoAccept: true,
    visible : function(){
      ID = $active.attr('id');
      alert(ID);
    },
    accepted : function(){
      ID = $active.attr('id');
      alert(ID);
    },
}); 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T14:56:12.803

你多虑了这个问题。改用`this`：

```
visible : function(){
  ID = this.id;
  alert(ID);
} 
```

# c++ - 使用 C++ 中的流打印具有正确缩进的结构化对象

> ID：14877440
> 
> 赞同：2
> 
> 时间：2013-02-14T14:50:01.550
> 
> 标签：c++, stream

我想`<<`为我的类编写运算符，这些运算符通常包含一些结构化数据。最简单的示例之一是包含矩阵列表的类，例如

```
stuct MyClass
{
  std::vector<Matrix> m;
} 
```

假设 Matrix 类可以打印自己（使用多行），并且我们不控制这个类。现在我想得到以下输出：

```
A(0)=[a b
      c d]
A(1)=[e f
      g h] 
```

并且`Matrix`该类本身输出：

```
[a b
 c d] 
```

如何配置/更改流或做一些完全不同的事情以使其工作，即使流在每个之后输出给定数量的空格`std::endl`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T15:04:20.420

这实际上是我第一次真正使用过滤streambuf。给定类似的东西：

```
std::ostream& operator<<( std::ostream& dest,
                          std::vector<Matrix> const& object );

class MyClass
{
    std::vector<Matrix> m;
};

std::ostream& operator<<( std::ostream& dest, MyClass const& object )
{
    //  ...
    {
        //  Scope to control lifetime of the IndentingStreambuf...
        //  Could be (probably should be) in a separate function.
        IndentingStreambuf indent( dest )
        dest << m;
    }
    //  ...
} 
```

在哪里：

```
class IndentingStreambuf : public std::streambuf
{
    std::streambuf* myDest;
    std::ostream*   myOwner;
    bool            myIsAtStartOfLine;

protected:
    int overflow( int ch )
    {
        if ( myIsAtStartOfLine && ch != EOF && ch != '\n' ) {
            myDest->sputn( "    ", 4 );
        }
        myIsAtStartOfLine = ch == '\n';
        return myDest->sputc( ch );
    }

public:
    IndentingStreambuf( std::streambuf* dest )
        : myDest( dest )
        , myOwner( NULL )
        , myIsAtStartOfLine( true )
    {
    }
    IndentingStreambuf( std::ostream& dest )
        : myDest( dest.rdbuf() )
        , myOwner( &dest )
        , myIsAtStartOfLine( true )
    {
        myOwner->rdbuf( this );
    }
    ~IndentingStreambuf()
    {
        if ( myOwner != NULL ) {
            myOwner->rdbuf( myDest );
        }
    }
}; 
```

编辑：

我只是更详细地阅读了您想要的输出。相同的基本`IndentingStreambuf`工作，但

1.  您必须对其进行调整以支持任意缩进（作为构造函数的参数），

2.  初始化`myIsAtStartOfLine`为`false`, 和

3.  输出后调用它`A(i) = [`。

当然，适当地定义`operator<<`for `Matrix`。

或者，您可以使用`std::ios_base::xalloc`获取一个可以告诉`operator<<`for `Matrix`缩进的地方。类似于以下内容：

```
static long& getMatrixIndent( std::ostream& dest )
{
    static int ourIndex = std::ostream::xalloc();
    return dest.iword( ourIndex );
}

class indent
{
    int myIndent;
public:
    indent( int n ) : myIndent( n ) {}
    friend std::ostream& operator<<( std::ostream& dest,
                                     indent const& manip )
    {
        getMatrixIndent( dest ) = myIndent;
    }
};

std::ostream& operator<<( std::ostream& dest, Matrix const& object )
{
    int indent = getMatrixIndent( dest );
    //  ...
} 
```

这远不如过滤流缓冲区灵活。特别是，它不能用于您不控制`operator<<`. 但它很简单，有时也很有用。

（事实上​​，我认为任何使用 C++ 的人都应该熟悉这两种技术。但我不知道有任何教程文本甚至提到了它们。而且在一个大量 C++ 用户仍在编写的世界中`while ( ! file.eof() )`，这可能要求太多了。）

# jquery - 动态创建的范围滑块标签不会显示所选范围

> ID：14877441
> 
> 赞同：0
> 
> 时间：2013-02-14T14:50:04.940
> 
> 标签：jquery, html, jquery-mobile

嘿，我正在使用 jQuery mobile 并具有以下代码：

```
var newLabel = '<label for="slider-1"></label>';
var newSlider = '<input type="range" name="slider-1"
class="product_slider" style="display:none; margin:20px;"
value="60" min="0" max="100" />';
$(newLabel).insertAfter($(this).parent());
$(newSlider).insertAfter($(this).parent()).slider();
//Tries i've made :
// $(this).parent().trigger('create');
// $(this).parent().parent().trigger('create');
// $(this).parent().parent().trigger('refresh'); 
```

现在，此代码确实生成了滑块，但不会将标签转换为显示所选范围的输入。

我尝试过`trigger('create')`，尝试过创建后刷新，尝试过`.page()`，但没有奏效。

怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T14:59:44.163

那么我的问题就是那么小`display:none;`。

由于某种原因，它会影响在输入中创建标签。奇怪，因为我添加了它，因为它显示了常规范围和新的范围，但现在它没有。此代码有效：

```
 var newSlider = '<label for="slider-1"></label><input type="range" name="slider-1"  class="product_slider" style=" margin:20px;" value="60" min="0" max="100" />';
$(newSlider).insertAfter($(this).parent());
$(this).parent().parent().trigger("create"); 
```

# android - 未调用android服务的onCreate

> ID：14877442
> 
> 赞同：5
> 
> 时间：2013-02-14T14:50:07.297
> 
> 标签：android, android-service

我想以静态方式启动服务。所以从我的活动中我打电话给

```
SpeechActivationService.makeStartServiceIntent(
               this.getApplicationContext(),
               "WordActivator"); 
```

这是从服务类[http://dpaste.com/hold/928115/](http://dpaste.com/hold/928115/)扩展的实际类如您所见，有几个日志点，例如在 onCreate 方法中。

这没有记录。只有当我将日志文本放入`makeStartServiceIntent`方法中时，它才会出现，但不会出现在`onCreate`方法中。

这是`makeStartServiceIntent`方法：

```
public static Intent makeStartServiceIntent(Context context,
        String activationType) {        
    Intent i = new Intent(context, SpeechActivationService.class);
    i.putExtra(ACTIVATION_TYPE_INTENT_KEY, activationType);
    return i;
} 
```

在清单文件中我有

```
<service android:name="root.gast.speech.activation.SpeechActivationService"/> 
```

任何想法为什么服务没有启动？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-14T15:06:10.510

除了您没有发布代码显示之外`startService()`，您在清单中的包名称`Service`似乎与您的类不匹配`SpeechActivationService`（**假设您发布的代码链接是`SpeechActivationService`您项目中的实际类，而不仅仅是您从中复制的类**）。

```
<service android:name="com.mkyong.android.SpeechActivationService"/> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-14T14:54:27.960

你`makeStartService()`只是为你创造了一个意图。您似乎实际上并没有启动该服务的意图。像这样试试

```
Intent i = SpeechActivationService.makeStartServiceIntent(this,"WordActivator");
startService(i); 
```

请注意，如果`this.getApplicationContext()`有效，您可能已经在`Context`对象内部，因此简单地使用也`this` *应该*有效。

# iphone - iOS 中的本地资产 URL 有多独特

> ID：14877452
> 
> 赞同：2
> 
> 时间：2013-02-14T14:50:31.047
> 
> 标签：iphone, ios, core-foundation

我们使用本地资产 URL 来识别来自 iPhone 相机胶卷的图像。这些是此处描述的 ALAssetPropertyURL：http: [//developer.apple.com/library/ios/#documentation/AssetsLibrary/Reference/ALAsset_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/AssetsLibrary/Reference/ALAsset_Class/Reference/Reference.html)

我们知道 URL 会在备份/恢复过程中保持不变。我们想使用 id 来唯一标识图像（因此，当我们在两个设备之间备份和恢复相同的图像时，我们想知道 - 廉价 - 这些实际上是相同的图像）。

问题是：这些本地 URL 有多独特？它们是每个设备唯一的（似乎如此）还是我们可以假设它们在设备之间是唯一的（我想这很难实现，所以可能不是这样）。Apple 的文档和源代码在这个问题上并不清楚。

我们的想法之一是使用资产的时间戳（它还在备份恢复中持续存在）并构建asset_unique_id =asset_id + timestamp。

有更好的想法吗？我们希望避免检查图像的内容和计算哈希值，因为它的计算量非常大，如果上述（或类似）方法有效，那就更好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-19T19:32:14.477

如果有人对此感兴趣，从我的测试中我发现每个设备的 URL 都是唯一的。事实上，我在三种不同的场景中检查了同一张图像，并得到了不同的结果：

iPhone 上的原始图像：ID = 484299F8-C176-4ED3-B944-B7E6F7BE59CE

从第二台设备（iPad）通过 Photostream：ID = 5092A342-5B7D-496D-BC1C-C9FC0BAB2D91

从照片流保存到 iPad：ID = F7D225EE-30A2-4415-A1DC-85550350ECEB

我也希望跨设备使用此 ID 来了解它们是否是相同的图像。如果您找到了另一种解决方案，我很想知道。

# php - PHP - 动态生成的文本 - 在某些国家之前添加“the”

> ID：14877459
> 
> 赞同：1
> 
> 时间：2013-02-14T14:50:53.553
> 
> 标签：php, dynamic, text, countries

我怀疑是否有一个PHP函数可以解决这个问题，但我至少想问一下，以防万一确实存在。

我正在构建一个依赖于用户所在国家/地区的网站，并且该国家/地区会自动插入到网页内容中几次。一个基本的例子：

```
<?php echo "Find shoes in ".$country; ?> 
```

印刷：

> 在英国寻找鞋子

我的问题是上面的句子在语法上听起来不正确，我认为它应该是：

> 在英国寻找鞋子

它是*英国*，就像你有*美利坚*合众国或*荷兰*等。

我不能只在句子中添加“the”这个词，因为“在法国寻找鞋子”显然没有意义。

有什么办法可以解决这个问题，还是我只需要遍历所有 200 多个国家并找出哪些国家需要额外的词来呼应？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T15:10:37.420

这可能需要考虑 - 编写一个快速脚本，根据 After the Deadline API 检查每个句子。

[http://www.afterthedeadline.com/api.slp](http://www.afterthedeadline.com/api.slp)

然后构建一个结果数组 - 可能会比手动过程节省一点时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T14:56:13.677

这种语言会反映我认为的字数......我当然没有想到所有国家:) 但是一般的经验法则，试着做

```
<?php echo "Find shoes in ".((str_word_count($country) == 1) ? 'the ' : '') . $country; ?> 
```

有点老套，但我认为这实际上会在语言方面起作用？因为那些需要“the”前缀的国家**很可能**有多个单词。

# php - 如何以编程方式获取 magento 管理员电子邮件？

> ID：14877460
> 
> 赞同：-1
> 
> 时间：2013-02-14T14:50:54.197
> 
> 标签：php, email, magento, admin, config

如何以编程方式获取 magento 管理员电子邮件？

从任何地方，所以我正在寻找一个以“Mage::”开头的答案

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T15:08:58.863

弄清楚了。

magento 管理员电子邮件可通过以下方式获得：

```
Mage::getStoreConfig('trans_email/ident_general/value') ? 
    Mage::getStoreConfig('trans_email/ident_general/value') : 
    Mage::getSingleton('core/config')->init()->getXpath('/config/default/trans_email/ident_general/email'); 
```

如果您在系统 -> 配置 -> 存储电子邮件地址的后端配置屏幕中查看 html 输入元素，您会看到它们都被命名为 groups[ident_support][fields][email][value]。要获取其中任何一个的值，只需将上面 getstoreconfig 函数中的 ident_general 替换为 ident_support 或第一个方括号中的任何内容。

不确定这是否正确，但它似乎有效 - 如果您有更好的主意，请留下答案！

# ruby-on-rails - 发送参数渲染

> ID：14877469
> 
> 赞同：0
> 
> 时间：2013-02-14T14:51:19.937
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms, validation, error-handling

我有一个用于创建票证的表格，它需要一个项目的 ID。这有效，但在验证方面无效。如果验证未通过，则执行“render :new”并且 project_id 不附带。

我试过'redirect_to new_ticket_path(:project_id => params[:ticket][:project_id]) 再次呈现表单，但错误消息不会显示，所以我似乎需要使用'render :new'。

如何将 project_id 传递回表单或从表单到达 project_id 而不传递它？

```
def new
  @ticket = Ticket.new
  @id = params[:project_id]
  @project = Project.find(@id)
end

def create
  @ticket = Ticket.new(params[:ticket].merge(:user_id => current_user.id))

  if @ticket.save
    redirect_to @ticket
      else
    render :new <--- will render without the project_id
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T14:59:18.250

这将只呈现“新”视图，但不会运行控制器操作。您需要在“创建”操作中为“新”视图设置变量。

来自[http://guides.rubyonrails.org/layouts_and_rendering.html#using-render](http://guides.rubyonrails.org/layouts_and_rendering.html#using-render)

> 将 render 与 :action 一起使用是 Rails 新手经常感到困惑的原因。指定的操作用于确定要呈现哪个视图，但 Rails 不会在控制器中运行该操作的任何代码。您在视图中需要的任何实例变量都必须在调用渲染之前在当前操作中设置。

解决此问题的最简单方法是更改​​“新”：

```
def new
  @ticket = Ticket.new(:project_id => params[:project_id])
end 
```

并将“新”表单中对@project 的任何引用更改为@ticket.project。此时，只要您的表单包含工单项目 ID 的隐藏字段，您就不必在“创建”操作中添加任何内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T15:02:28.807

让这个工作（我无论如何都会这样做）的最简单方法是将任务资源嵌套在项目下。这样，您将始终在 params 中有 project_id 可用。

```
# config/routes.rb
resources :projects do
  resources :tasks
end 
```

网址看起来像`projects/123/tasks/new`等。看看`rake routes`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T14:58:19.187

将项目 id 写入表单中的隐藏字段，你会没事的。并且不要忘记`@id`在您的创建操作中进行初始化

```
def new
  @ticket = Ticket.new
  @id = params[:project_id]
  @project = Project.find(@id)
end

def create
  @ticket = Ticket.new(params[:ticket].merge(:user_id => current_user.id))
  @id = params[:project_id] # but make sure it is under this key in params
  if @ticket.save
    redirect_to @ticket
      else
    render :new <--- will render without the project_id
  end
end 
```

并在表格中添加

```
<%= hidden_field :project_id, '', value: @id %> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-14T14:58:34.450

你为什么不使用：

```
 flash[:alert] = @ticket.errors.inspect
 redirect_to new_ticket_path(:project_id => params[:ticket][:project_id]) 
```

# perl - 运行 CGI 脚本时 Apache 忽略 max_execution_time

> ID：14877476
> 
> 赞同：0
> 
> 时间：2013-02-14T14:51:31.933
> 
> 标签：perl, apache, cgi

我继承了通过 Web GUI（使用 CGI）执行的 perl 脚本。毫无疑问，脚本每次恰好在 10 分钟后退出。

我已经更新了 apache php.ini max_execution_time 和 max_input_time 参数以使用大量（每个 3600），但是，脚本仍然在 10 分钟后退出。

我们也在使用 mod_perl，尽管我不确定某处是否存在会影响有限运行时间的配置。

这对我来说都是相对较新的，所以如果需要其他信息，我可以得到它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T15:13:03.420

该`php.ini`文件仅影响 PHP。Apache 有它自己的[Timeout](http://httpd.apache.org/docs/2.2/mod/core.html#timeout)指令。您可以在 apache 配置文件中更改它。

# powershell - 将 SSH 密钥添加到剪贴板的 Powershell/github 问题

> ID：14877477
> 
> 赞同：7
> 
> 时间：2013-02-14T14:51:28.473
> 
> 标签：powershell, github

我正在尝试将我的 SSH 密钥添加到 Github，但是我遇到了一个问题：

我尝试在 Windows Powershell 中运行以下命令来获取密钥：

```
clip < ~/.ssh/id_rsa.pub 
```

但我收到以下错误：

```
The '<' operator is reserved for future use. 
```

有什么办法可以解决这个问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-14T14:54:50.603

`cat ~/.ssh/id_rsa.pub | clip`应该管用。

更一般地说，如果您希望使用旧的命令提示符语法运行某些东西，您可以随时将其包装成`cmd /c`这样`cmd /c "clip < ~/.ssh/ida_rsa.pub"`：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T15:07:24.253

如果您有[PowerShell 社区扩展 (PSCX)](http://pscx.codeplex.com/)模块，您还可以使用：

```
Get-Content ~/.ssh/id_rsa.pub | Write-Clipboard 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-14T14:53:28.417

`.ssh/id_rsa.pub`只需使用文本编辑器打开文件并使用`ctrl + c`.

该`.ssh`文件夹可能位于`C:\Users\YourUser\.ssh`.

# ios - 在我的应用中实施 iAd

> ID：14877479
> 
> 赞同：1
> 
> 时间：2013-02-14T14:51:30.750
> 
> 标签：ios, xcode, uitabbarcontroller, iad

我在所有视图中都放置了广告横幅，我还没有添加任何代码。我确定您需要加载广告的代码，但我的应用程序正在我的标签栏应用程序的所有视图中加载广告。

我还有什么需要做的，或者我的应用程序中的广告是否正常运行（考虑到我所做的只是添加了 iAd 框架并在每个视图中放置横幅）？

# html - 粘性页脚未放置在底部

> ID：14877482
> 
> 赞同：0
> 
> 时间：2013-02-14T14:51:47.643
> 
> 标签：html, css, cross-browser, footer, sticky-footer

我只是对页脚进行一些快速更改。

页脚需要粘性，我按照[A List Apart](http://alistapart.com/article/footers)方法描述的方法尝试让页脚保持在底部，但它似乎有点偏离。

```
html, body {
height: 100%;
 }
#container {
position: relative;
min-height: 100%;
}

<div id="container">
    <div id="content">...</div>
    <div id="footer">...</div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T14:54:51.893

我总是使用[CSSStickyFooter 方法](http://www.cssstickyfooter.com/)。

*   HTML，一个基本的骨架

    ```
    <div id="wrap">

        <div id="main">

        </div>

    </div>

    <div id="footer">

    </div> 
    ```

*   CSS，这只是一个片段

    ```
    * {margin:0;padding:0;} 

    html, body {height: 100%;}

    #wrap {min-height: 100%;}

    #main {overflow:auto;
        padding-bottom: 180px;}  /* must be same height as the footer */

    #footer {position: relative;
        margin-top: -180px; /* negative value of footer height */
        height: 180px;
        clear:both;} 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T15:39:59.043

我认为你应该添加到#wrapper clearfix，在这种情况下将 height: 100% 添加到#wrapper 和#container，你会看到页脚低于应该的值。现在你应该将顶部设置为页脚的负高度，它应该可以工作。Bo 我不知道它是否会涵盖包装器的内容。

# javascript - 跨域的 Javascript 请求

> ID：14877484
> 
> 赞同：1
> 
> 时间：2013-02-14T14:51:59.420
> 
> 标签：javascript

我正在尝试跨域发出请求：

```
 var script=document.createElement('script');
    script.setAttribute('src',"http://www.example.com/wordpress/register/?callback=callbackF&ver=2.5&url="+encodeURIComponent(window.location.href));
    script.setAttribute("type", "text/javascript");
    script.setAttribute("id", "spark_grazit_script");
    document.getElementById("spark_static_widget").parentNode.appendChild(script); 
```

由于脚本将被创建，它将被附加到我拥有的 div 中，并且会有一个请求。在请求结束时：

```
 function callbackF(data){
            console.log('Response has finished'+data);
        } 
```

该功能应在请求结束时触发。我想要的只是调用回调函数。

我没有收到跨域错误。但我得到这个错误：

```
Uncaught SyntaxError: Unexpected token : 
```

有没有办法在不求助于 html5 或 jsonp 的情况下实现我想要的。我还能以某种方式得到 ajax 的响应吗？

**更新：** 响应是一个简单的 json 对象

这是回应：

```
{ "userid":"24645", "token":"40A164ECA4DE4A4F", "script":"<script type='text/javascript'>var dbnwid=16211; var dbnpid=23113; var dbnwebid=19459; var dbnlayout=21; var dbncolor='#000000'; var dbntitlefontsize='14'; var dbnbgcolortype=1; var dbnheader='You might enjoy reading:'; var dbnremindercolor=2; var dbn_protocol = (('https:' == document.location.protocol) ? 'https://' : 'http://'); </script>"} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T14:55:21.180

> 有没有办法在不求助于 html5 或 jsonp 的情况下实现我想要的。我还能以某种方式得到 ajax 的响应吗？

你没有*使用*ajax。你正在做 JSONP（或功能相同的东西）。

来自的响应`http://www.eya.com/wordpress/register/?callback=callbackF&ver=2.5&url=`必须是有效的脚本片段。从您的错误消息来看，它不是。（当我尝试它时得到的是一个 404 页面，这往往是一个无效的脚本。）

* * *

**更新：**您的响应是一个有效的 JSON 对象，但不是一个有效的 JavaScript 片段，因为开头`{`看起来像一个块的开头，而不是解析器的对象文字的开头，因为它不会出现在预期表达式的位置.

为了使其按照您描述的方式工作（即**JSONP**），响应必须将该对象包装在对 URL 中命名的回调的调用中，如下所示：

```
callbackF({ "userid":"24645", "token":"40A164ECA4DE4A4F", "script":"<script type='text/javascript'>var dbnwid=16211; var dbnpid=23113; var dbnwebid=19459; var dbnlayout=21; var dbncolor='#000000'; var dbntitlefontsize='14'; var dbnbgcolortype=1; var dbnheader='You might enjoy reading:'; var dbnremindercolor=2; var dbn_protocol = (('https:' == document.location.protocol) ? 'https://' : 'http://'); </script>"}) 
```

[更多关于 JSONP 的信息在这里。](http://en.wikipedia.org/wiki/JSONP#JSONP)

# javascript - fadeOut() 仅适用于第一个 :before 伪元素

> ID：14877486
> 
> 赞同：1
> 
> 时间：2013-02-14T14:52:04.167
> 
> 标签：javascript, jquery, html, css

我的处境很棘手——我正在尝试制作一种逼真的传单，底部有可点击的纸条。仅供视觉参考，如下所示：[http ://static.someecards.com/someecards/images/feed_assets/4d657f7fa4817.jpg](http://static.someecards.com/someecards/images/feed_assets/4d657f7fa4817.jpg)

我用一个空的 div 构建了传单的主体，我将“纸条”绝对定位在这个 div 的底部。然后，因为我想在传单主体的底部添加一个“撕纸”边框图像，所以我给了条带一个负 z-index。

然后，为了覆盖撕纸边框，我在它们的顶部放置了一个空的透明 div，带有一个纯色的伪元素，一旦触发 CSS3 动画（通过 JS）就会消失。

```
<div class="flyer-body">

    <div class="strip"></div> <!-- this will be animated via CSS3 -->
    <div class="strip-wrapper"></div> <!-- this is a clone of the "strip" div, but transparent (made for z-index problems with animations). a click on this div will trigger the animation --> 

</div><!-- end flyer-body --> 
```

jsFiddle 供参考：http: [//jsfiddle.net/XR7LT/](http://jsfiddle.net/XR7LT/)

如您所见，我对伪元素应用了一个 fadeOut() 效果，以便轻轻地消失。问题是，fadeOut() 只适用于第一个伪元素，而隐藏其他元素没有任何效果。

Chromium 和 FF 浏览器 Ubuntu Linux 12.10 上都显示问题。

有任何想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T15:10:54.003

您的 CSS 对于所有元素都不相同。过渡不应同时在 .strappamiX 和 .strappamiX-wrap 中，

我从包装中删除了它们：

```
.strappami1 {
    display: block;
    width: 100px;
    height: 250px;
    background: red;
    z-index: -23;
    position: absolute;
    bottom: -200px;
    left: 103px;
    transition: all 2s ease-in;
    -moz-transition: all 2s ease-in;
    -webkit-transition: all 2s ease-in;
    -o-transition: all 2s ease-in;
}

.strappami1-wrap {
    display: block;
    position: absolute;
    width: 100px;
    height: 250px;
    bottom: -200px;
    left: 103px;
    background: transparent;
} 
```

在这里创建了你的小提琴的一个分支：http: [//jsfiddle.net/sn6ZT/1/](http://jsfiddle.net/sn6ZT/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T15:40:03.110

我是在 Roise 之后来到这里的，但是您应该能够通过利用父子关系和添加多个类来显着简化您的解决方案。

[http://jsfiddle.net/XR7LT/4/](http://jsfiddle.net/XR7LT/4/)

当你有 5 个元素都应该具有相同的行为时，为它们使用相同的类，并将代码应用于所有它们。然后你可以添加一些额外的类来移动额外的部分。

**更简单的 HTML**

```
<section class="flyer">

    <div class="strappami-wrap w0">
        <div class="cover"></div>
        <div class="strappami"></div>
    </div>

    <div class="strappami-wrap w1">
        <div class="cover"></div>
        <div class="strappami"></div>
    </div>

    <div class="strappami-wrap w2">
        <div class="cover"></div>
        <div class="strappami"></div>
    </div>

    <div class="strappami-wrap w3">
        <div class="cover"></div>
        <div class="strappami"></div>
    </div>

    <div class="strappami-wrap w4">
        <div class="cover"></div>
        <div class="strappami"></div>
    </div>
</section> 
```

**更简单的 CSS**

```
.flyer {
    display: block;
    width: 900px;
    height: 220px;
    background: yellow;
    margin: 0 auto;
    position: relative;
}

.strappami {
    display: block;
    width: 100px;
    height: 250px;
    background: red;
    z-index: -23;
    position: absolute;

    left: 0;
    transition: all 2s ease-in;
    -moz-transition: all 2s ease-in;
    -webkit-transition: all 2s ease-in;
    -o-transition: all 2s ease-in;
}

.strappami-wrap {
    display: block;
    position: absolute;
    width: 100px;
    height: 250px;
    background: transparent;
    bottom: -200px;
    left: 0px;
}

.strappami-wrap.w1 {
    left: 110px
}

.strappami-wrap.w2 {
    left: 220px
}

.strappami-wrap.w3 {
    left: 330px
}

.strappami-wrap.w4 {
    left: 440px
}
.strappami-wrap .cover {
    content: '';
    display: block;
    position: absolute;
    width: 100px;
    height: 50px;
    background: green;
    top: 30px;
    left: 0px;
}

.strapping {
    bottom: -900px;
    opacity: 1;
    z-index: -200;
    -webkit-transform: rotate(-5deg);
    -moz-transform: rotate(-5deg);
}

.strapping-alt {
    bottom: -800px;
    opacity: 1;
    z-index: -200;
    -webkit-transform: rotate(3deg);

    -moz-transform: rotate(3deg);
} 
```

更简单的 JS

```
$(document).ready(function() {  

    $(".strappami-wrap").on('click', function() {
        var r = Math.floor(Math.random()*10);
        if (r < 5){                    
          $(this).find(".strappami").addClass('strapping');
        } else {
          $(this).find(".strappami").addClass('strapping-alt');
        }
        $(this).find(".cover").fadeOut();
    });
}); 
```

# r - 如何控制 spatspat 的 plot.tess 中的像素颜色？

> ID：14877487
> 
> 赞同：1
> 
> 时间：2013-02-14T14:52:14.063
> 
> 标签：r, spatstat

我正在心形内生成随机点的镶嵌，我很难弄清楚如何控制图中像素的颜色。我认为`plot(tess)`（在此示例中）生成图像值图，我可以通过在色带中指定相同数量的颜色来控制它们，但事实并非如此。

```
library(spatstat)

t <- seq(from = 2*pi, to = 0.001, length.out = 1500)
x <- 16*sin(t)**3
y <- 13*cos(t) - 5*cos(2*t) - 2*cos(3*t) - cos(4*t) #heart equation taken from wolfram http://mathworld.wolfram.com/HeartCurve.html.
heart_win <- owin(poly = cbind(x,y)) #note - not self enclosed

#random sample of points within heart
points <- rpoint(100, win = heart_win)
tess <- dirichlet(points)
plot(tess, main = ' ')

#color for 100 values
norm_palette <- colorRampPalette(c("white","red"))
plot(tess, main = ' ', col=norm_palette(100), valuesAreColours = FALSE) 
```

这会产生下面的图像：

![在此处输入图像描述](../Images/fc3c710e63c2f73de77b013a9c085b4e.png)

是的，我就是那种直到（不要评判我）才把他的妻子当作情人节礼物的人！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T15:50:26.027

即使我不送礼物给我的妻子，我今天也不会送礼物，你可以试试这个：

```
 plot(tess$image,col=norm_palette(100)) 
```

![在此处输入图像描述](../Images/7f4bc3c10ec5297719c4eb095fb6394f.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T15:50:53.500

您没有在 tess 对象中调用生成的图像。只需将您的绘图调用更改为：

```
plot(tess$image, main="", col=colorRampPalette(c("white","red"))(tess$n), valuesAreColours=FALSE) 
```

# ios - 如何使用带有可选毫秒部分的 NSDateFormatter 解析 ISO 8601

> ID：14877489
> 
> 赞同：19
> 
> 时间：2013-02-14T14:52:20.720
> 
> 标签：ios, objective-c

我正在尝试使用 NSDateFormatter 来解析这些格式中的任何一种的日期

```
@"2013-02-01T14:21:00" 
```

或者

```
@"2013-02-01T14:21:56.345" 
```

目前我正在使用下面的方法来解析字符串并返回一个日期：

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setTimeZone:[NSTimeZone timeZoneWithName:@"UTC"]];
[dateFormatter setDateFormat:@"yyyy-MM-dd'T'HH:mm:ss"];

[dateFormatter setLocale:[[NSLocale alloc] initWithLocaleIdentifier:@"en_US_POSIX"]];
NSDate *date = [dateFormatter dateFromString:dateToFormat]; 
```

这适用于第一种日期样式，但对于包含毫秒部分的字符串返回 nil。

我想我可以测试毫秒的存在并将它们剥离，但我想知道是否可以更改日期格式以将 .SSS 视为可选？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-14T15:58:01.793

据我所知，没有办法制作可选参数。

通常的解决方案是使用两个格式化程序，每种格式一个。要决定使用哪个格式化程序，您可以

1.  计算日期字符串中的字符数（如[Parsing a RFC 822 date with NSDateFormatter](https://stackoverflow.com/questions/1850824/parsing-a-rfc-822-date-with-nsdateformatter)中建议的那样）

2.  只需尝试两种格式化程序并获得第一个非`nil`结果。

由于您的日期格式相似，您可以只使用一个格式化程序，如果日期字符串太短，`.000`请在使用格式化程序之前附加。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-16T09:05:08.320

自 iOS 10 以来的正确方法是使用`ISO8601DateFormatter`专门创建的来处理 ISO 8601 日期字符串的所有变体。请看下面的例子：

```
let date = Date()
var string: String

let formatter = ISO8601DateFormatter()
string = formatter.string(from: date)

let GMT = TimeZone(abbreviation: "GMT")
let options: ISO8601DateFormatOptions = [.withInternetDateTime, .withDashSeparatorInDate, .withColonSeparatorInTime, .withTimeZone]
string = ISO8601DateFormatter.string(from: date, timeZone: GMT, formatOptions: options) 
```

和 Objective-C 版本：

```
NSDate *date = [NSDate date];
NSString *string;

NSISO8601DateFormatter *formatter = [[NSISO8601DateFormatter alloc] init];
string = [formatter stringFromDate:date];

NSTimeZone *GMT = [NSTimeZone timeZoneWithAbbreviation: @"GMT"];
NSISO8601DateFormatOptions options = NSISO8601DateFormatWithInternetDateTime | NSISO8601DateFormatWithDashSeparatorInDate | NSISO8601DateFormatWithColonSeparatorInTime | NSISO8601DateFormatWithTimeZone;
string = [NSISO8601DateFormatter stringFromDate:date timeZone:GMT formatOptions:options]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-26T08:59:55.473

我写了一个通用解析器，它丢弃了毫秒部分。

```
@implementation JSONModel(NSPAdditions)

- (NSDate *)NSDateFromNSString:(NSString*)string {
    NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
    [formatter setTimeZone:[NSTimeZone timeZoneWithName:@"UTC"]];
    NSArray* parts = [string componentsSeparatedByCharactersInSet: [NSCharacterSet characterSetWithCharactersInString:@" T"]];
    if ([parts count] <= 1) {
        return [formatter dateFromString:string];
    }
    NSString *part0 = parts[0];
    NSAssert([part0 length] == [@"yyyy-MM-dd" length], @"Date format error");
    NSString *part1 = parts[1];
    if ([part1 length] > [@"HH:mm:ss" length]) {
        part1 = [part1 substringToIndex:[@"HH:mm:ss" length]];
    }
    NSString *fmted = [NSString stringWithFormat:@"%@ %@", part0, part1];
    [formatter setDateFormat:@"yyyy-MM-dd HH:mm:ss"];
    return [formatter dateFromString:fmted];
}

@end 
```

# linux - 由于需要 VPN，git-svn 拒绝了基本挑战

> ID：14877493
> 
> 赞同：32
> 
> 时间：2013-02-14T14:52:35.867
> 
> 标签：linux, git, svn, git-svn, vpn

几个月来，我一直在使用[git-svn](http://www.kernel.org/pub/software/scm/git/docs/git-svn.html)作为我公司的 SVN 存储库的接口。

然而，大约一周前，我的公司改变了他们的政策，只有通过 Cisco VPN 连接才能访问 SVN。

我在我的 Linux Mint VM 上连接到 VPN 没有问题（这是我进行编码的地方），但是当我运行`git svn dcommit`以检查代码更改时，我现在不再能够通过身份验证。

我努力了：

*   `rm -rf ~/.subversion`，以摆脱任何已保存的 SVN 身份验证凭据并强制它采用新的凭据，但这似乎没有效果，也没有提示我输入新的凭据，令人惊讶的是。
*   从新创建的目录开始并运行`git svn clone`以启动到 SVN 存储库的新链接，但同样的身份验证失败。

这是我在运行时看到的`git svn dcommit`或`git svn clone`：

```
$ git svn dcommit
Committing to https://<redacted>:2443/svn/LS/branches/PRODUCTION-SUPPORT-1/ls-policygen ...
WARNING: gnome-keyring:: couldn't connect to: /tmp/keyring-wCQwzG/pkcs11: No such file or directory
Authorization failed: OPTIONS of 'https://<redacted>:2443/svn/LS/branches/PRODUCTION-SUPPORT-1/ls-policygen': authorization failed: Could not authenticate to server: ignored NTLM challenge, rejected Basic challenge (https://<redacted>:2443) at /usr/local/libexec/git-core/git-svn line 943 
```

`gnome-keyring`警告一直存在，并且在需要 VPN 之前从未停止过提交。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-27T19:04:59.317

看一下从您的错误代码中截取的内容：

```
Authorization failed: OPTIONS of 'https://<redacted>:2443/svn/LS/branches/PRODUCTION-SUPPORT-1/ls-policygen': authorization failed: Could not authenticate to server: ignored NTLM challenge, rejected Basic challenge (https://<redacted>:2443) at /usr/local/libexec/git-core/git-svn line 943 
```

特别是在这部分：**无法对服务器进行身份验证：忽略 NTLM 质询**

看来贵公司也改变了认证方法。

看看：[git clone 是否通过 NTLM 代理工作？](https://stackoverflow.com/questions/1783659/does-git-clone-work-through-ntlm-proxies)

我会采取以下步骤：

1.  在浏览器中连接到您的存储库
2.  尝试与另一个用户帐户连接 - 可能您的主目录中有一些缓存文件
3.  根据 NTLM auth 配置 git 甚至 svn

祝你好运，

莱斯利

# sharepoint - 信息路径中多行文本框的重复历史记录

> ID：14877494
> 
> 赞同：1
> 
> 时间：2013-02-14T14:52:38.643
> 
> 标签：sharepoint, infopath

在共享点表单中，我有一个多行文本框，允许“将更改附加到现有文本”。

问题是每次我在控件中编辑文本并提交表单时，infopath 都会复制历史记录。所以就像我已经插入了两次该文本。这也是第一次发生。

如果我使用默认插入表单而不是 infopath 表单，我会注意到问题不会持续存在。所以我认为问题在于提交而不是可视化。

在附加图像之后： [图像](http://i.stack.imgur.com/kLlRh.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T08:42:25.893

在列级别不存在历史记录。它仅存在于列表级别，即使它看起来像历史记录也可以在列级别。

所以，它是重复的，因为我提交了两次列表。

# kendo-ui - Kendo UI 工具栏按钮

> ID：14877498
> 
> 赞同：6
> 
> 时间：2013-02-14T14:52:44.947
> 
> 标签：kendo-ui, grid, telerik, kendo-grid

我正在使用 Kendo UI 网格，如下所示：

```
 function refreshGrid()
        {
            $(".k-pager-refresh.k-link").click();
        }
        var editWindow;
        var fields= {FullName: {type: "string"}, Email: {type: "string"}, LogCreateDate: {type: "date"}};
        var gridColumns =
        [{
            width: 90,
            command: { 
                name: "edit",
                text: "Edit", 
                click: function(e) {
                    var dataItem = this.dataItem($(e.currentTarget).closest("tr"));
                    editWindow = $("#edit").kendoWindow({
                        title: "Edit User",
                        modal: true,
                        visible: false,
                        resizable: false,
                        width: 800,
                        height: 400,
                        content: 'myediturl' + dataItem.ID
                    });

                    editWindow.data("kendoWindow").center().open();
                    return false;
                }
            }
        },
        {
            width: 90,
            command: { 
                name: "delete",
                text: "Delete", 
                click: function(e) {
                    //alert(this.dataItem($(e.currentTarget).closest("tr")).ID);
                    var id = this.dataItem($(e.currentTarget).closest("tr")).ID;
                    if (confirm("Are you sure you want to delete this user?"))
                    {
                        $.ajax({
                            type: 'POST',
                            url: '@Url.Action("deleteuser","admin",null, "http")' + "/" + this.dataItem($(e.currentTarget).closest("tr")).ID,
                            success: function (param) { refreshGrid(); },
                            async: false
                        });
                    }
                    return false;
                }
            }
        },
        {
            field: "FullName",
            title: "Full Name",
            type: "string"
        },
        {
            field: "Email",
            title: "Email",
            type: "string"
        },
        {
            field: "LogCreateDate",
            title: "Created",
            type: "date",
            template: '#= kendo.toString(LogCreateDate,"MM/dd/yyyy") #'
        }];

        //getSorts the columns of the grid
        function getColumns() {
            //Parsing the set of columns into a more digestable form
            var columns = "";
            for (var col in gridColumns) {
                if (!!gridColumns[col].field)
                {
                    if (columns.length > 0) {
                        columns += ";";
                    }
                    columns += gridColumns[col].field + "," + gridColumns[col].type;
                }
            }
            return columns;
        }

        function getSorts(sortObject) {
            if (!(sortObject)) {
                return "";
            }
            //Getting the row sort object
            var arr = sortObject;
            if ((arr) && (arr.length == 0)) {
                return "";
            }
            //Parsing the sort object into a more digestable form
            var columnSet = getColumns();
            var returnValue = "";
            for (var index in arr) {
                var type = "";
                for (var col in gridColumns) {
                    if (gridColumns[col].field === arr[index].field) {
                        type = gridColumns[col].type;
                    }
                }
                returnValue += ((returnValue.length > 0) ? (";") : ("")) + arr[index].field + "," + (arr[index].dir === "asc") + "," + type;
            }
            return returnValue;
        }

        var grid;
        $(function () {
            $("#grid").kendoGrid({
                dataSource: {
                    transport: {
                        read: {
                            url: "mydatasourceurl",
                            type: "POST",
                        },
                        parameterMap: function (data, type) {
                            data.filters = JSON.stringify(data.filter);
                            data.columns = JSON.stringify(getColumns());
                            data.sorts = JSON.stringify(getSorts(data.sort));
                            console.log(data);
                            return data;
                        }
                    },
                    schema: {
                        fields: fields,
                        data: "Data",
                        total: "Total"
                    },
                    pageSize: 10,
                    serverPaging: true,
                    serverFiltering: true,
                    serverSorting: true
                },

                toolbar: [{
                    name: "Add",
                    text: "Add new record",
                    click: function(e){console.log("foo"); return false;}
                }],
                height: 392,
                groupable: false,
                sortable: true,
                filterable: true,
                pageable: {
                    refresh: true,
                    pageSizes: true
                },
                columns: gridColumns
            });
            grid = $("#grid").data("kendoGrid");
        }); 
```

单击时不会触发我的创建工具栏操作。我该如何解决这个问题，Kendo UI 是否能够处理工具栏点击事件？我想出的最佳解决方案如下所示：

```
$(".k-button.k-button-icontext.k-grid-add").click(function () {
    //If the window doesn't exist yet, we create and initialize it
    if (!grids[gridContainerID].addWindow.data("kendoWindow")) {
        grids[gridContainerID].addWindow.kendoWindow({
            title: "Add " + entityName,
            width: "60%",
            height: "60%",
            close: onClose,
            open: onAddOpen,
            content: addUrl
        });
    }
    //Otherwise we just open it
    else {
        grids[gridContainerID].addWindow.data("kendoWindow").open();
    }
    //Centralizing and refreshing to prepare the layout
    grids[gridContainerID].addWindow.data("kendoWindow").center();
    grids[gridContainerID].addWindow.data("kendoWindow").refresh();
    return false;
}); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-14T19:47:12.170

不要使用那个复杂的选择器，而是使用 Kendo UI 创建的选择器`name`：

```
toolbar: [
    {
        name: "Add",
        text: "Add new record",
        click: function(e){console.log("foo"); return false;}
    }
], 
```

接着：

```
$(".k-grid-Add", "#grid").bind("click", function (ev) {
     // your code
     alert("Hello");
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-05-24T02:23:17.267

[在此处](http://docs.kendoui.com/api/web/grid)的kendogrid 文档中显示，网格工具栏按钮（如 grid.colums.commands）没有单击配置。要解决此问题，您可以参考以下步骤：

1.  为工具栏创建模板

    ```
    <script id="grid_toolbar" type="text/x-kendo-template">
          <button class="k-button" id="grid_toolbar_queryBtn">Query</button>
    </script> 
    ```

2.  将模板应用于工具栏

    `toolbar:[{text:"",template: kendo.template($("#grid_toolbar").html())}]`

3.  将事件监听器添加到按钮

    ```
    $("#grid_toolbar_queryBtn").click(function(e) {  
        console.log("[DEBUG MESSAGE] ", "query button clicked!");
    }); 
    ```

# php - 如何对php中最接近一个值但也是唯一的变量总和进行分组

> ID：14877500
> 
> 赞同：0
> 
> 时间：2013-02-14T14:52:57.780
> 
> 标签：php, arrays, algorithm, math

假设我有一个数组 (5,3,5,7,10)

所需的数字是 12

所以我希望第一个堆栈是：

------------ 第一个输出 --------

7+5 = 12（变量数量较少的最佳组合） - 排除 7 和 5，永远不要使用它

------------ 第二次输出 ------------

10 - 因为它是最接近 12 的第二个变量。（然后排除 10，永远不要使用它）

------------ 第三个输出 ----------

5+3 = 8 - 因为它是最接近 12 的第三个

我搜索了所有的互联网，但我没有找到任何线索

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T19:16:29.250

这个问题是[子集和问题的一个更难的版本](http://en.wikipedia.org/wiki/Subset_sum_problem)

连续的子问题本质上是较小子集上的近似版本。准确地为大型阵列解决这个问题将非常缓慢。

# c++ - 在 boost.python 中动态公开 C++

> ID：14877503
> 
> 赞同：0
> 
> 时间：2013-02-14T14:52:59.797
> 
> 标签：c++, python, boost, boost-python

我想知道 boost.python 是否允许在模块加载后将 C++ 功能暴露给 python。例如，如果这样的事情可能会很好：

```
#include <boost/python.hpp>

int a;

void expose_var() {
    boost::python::scope().attr( "a" ) = a;
}

BOOST_PYTHON_MODULE( mod )
{
    boost::python::def( "expose_var", expose_var, "Expose an attribute." );
} 
```

然后在python中：

```
import mod
mod.expose_var()
mod.a = 2 
```

使用类似的代码，当我调用等价的expose_var() 时出现错误：

```
AttributeError: 'NoneType' object has no attribute '__dict__' 
```

我想这样做，因为我要公开一个大量模板化的 C++ 库，并且我不希望默认公开模板参数的所有可能组合。我想让 python 客户端要求在运行时公开特定的组合。

# c# - 从 SqlDependency 获取数据

> ID：14877505
> 
> 赞同：10
> 
> 时间：2013-02-14T14:53:01.357
> 
> 标签：c#, sqldependency

我有一个表和一个等待新插入的 SqlDependency。

OnChange 根据需要触发，但我不明白是否可以获得导致数据库更改的行。

SqlDependency sql命令：

```
SqlCommand cmd = new SqlCommand("SELECT id FROM dbo.DataRequests", m_sqlConn); 
```

OnChange 代码：

```
private void OnChange(object sender, SqlNotificationEventArgs e)
{
    SqlDependency dependency = sender as SqlDependency;

    dependency.OnChange -= OnChange;

    Console.WriteLine("Info:   " + e.Info.ToString());
    Console.WriteLine("Source: " + e.Source.ToString());
    Console.WriteLine("Type:   " + e.Type.ToString());

    Console.WriteLine(DateTime.Now);

    GetMessages();

} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-08-10T07:24:44.903

看看这个组件： [SqlTableDependency](https://github.com/christiandelbianco/monitor-table-change-with-sqltabledependency)

对于 SQL Server 数据库表上的每一次更改，C# 代码都会收到一个事件，其中包含更改的记录列表。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-14T15:04:15.830

没有关于导致依赖项被触发的行的信息。

我想作为一种解决方法，您总是可以在记录上加上时间戳并跟踪事件上次触发的时间。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-14T14:58:31.667

根据这篇文章，你不能：[http ://social.msdn.microsoft.com/Forums/en-US/sqlservicebroker/thread/07234067-73e1-4db5-a4e6-0f9f0bae22ae/](http://social.msdn.microsoft.com/Forums/en-US/sqlservicebroker/thread/07234067-73e1-4db5-a4e6-0f9f0bae22ae/)

您只能通过使用属性来缩小通知的原因

*   [来源](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlnotificationeventargs.source.aspx)
*   [类型](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlnotificationeventargs.type.aspx)
*   [信息](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlnotificationeventargs.info.aspx)

提供的[SqlNotificationEventArgs](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlnotificationeventargs.aspx)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-03-15T15:02:25.377

[在这里](https://github.com/dyatchenko/ServiceBrokerListener)找到一个非常巧妙的解决方案

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-22T23:09:54.150

只需使用跨平台的 .NET 3.5 兼容和开源[SqlDependencyEx](https://github.com/dyatchenko/ServiceBrokerListener/blob/master/ServiceBrokerListener/ServiceBrokerListener.Domain/SqlDependencyEx.cs)。它使用数据库触发器和本机 Service Broker 通知来接收有关表更改的事件。这是一个使用示例：

```
int changesReceived = 0;
using (SqlDependencyEx sqlDependency = new SqlDependencyEx(
          TEST_CONNECTION_STRING, TEST_DATABASE_NAME, TEST_TABLE_NAME)) 
{
    sqlDependency.TableChanged += (o, e) => changesReceived++;
    sqlDependency.Start();

    // Make table changes.
    MakeTableInsertDeleteChanges(changesCount);

    // Wait a little bit to receive all changes.
    Thread.Sleep(1000);
}

Assert.AreEqual(changesCount, changesReceived); 
```

您可以获得更改通知以及更改的信息。请点击链接了解详情。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-02-18T07:36:40.693

我希望这可以帮助你：

```
 string commandString = string.Format("SELECT [Id] FROM [dbo].[Tech]");
     command = new SqlCommand(commandString, connection);

    private void dependency_OnChange(object sender, SqlNotificationEventArgs e)
    {
        SqlDependency dependency = (SqlDependency)sender;
        dependency.OnChange -= dependency_OnChange;

        this.Dispatcher.Invoke((System.Action)(() =>
        {

            if (e.Info.ToString().ToLower().Trim() == "insert")
            {
                GetData();
                int NewTechID = TechIDs.Last();
            }

        }));
    }

    private void GetData()
    {
        command.Notification = null;
        SqlDependency dependency = new SqlDependency(command);
        dependency.OnChange += new OnChangeEventHandler(dependency_OnChange);

        command.Connection.Open();
        using (SqlDataReader reader = command.ExecuteReader())
        {
            while (reader.Read())
            {
                TechIDs.add(int.Parse(reader.GetValue(0).ToString()));
            }
            reader.Close();
        }
        command.Connection.Close();
    } 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-10-01T10:25:44.540

您可以使用临时表。首先，您需要创建一个临时表，其中包含您需要继续调查的所有字段。就像是：

```
CREATE TABLE ##TempTab(
    [field1] [varchar](50) NULL,
    [field2] [varchar](50) NULL
} 
```

请注意，在创建程序退出后，在外部 cose 中创建的表会自动删除，因此您无需在 formClosing 上删除它...现在，在设置 sqlDepency 内容后，您必须填写临时表，这是一些就像开始场景的快照。然后，每次触发 onChange 事件时，您只需将临时表与更新的情况进行比较。它可能是这样的：

```
 select * from ##temptable left outer join mytable
ON ##temptable.field1=myTable.field1 AND ##temptable.field2=myTable.field2
WHERE myTable.field2 is null 
```

这将为您提供刚刚删除的所有行（或使用旧值更改）。另一方面：

```
select * from mytable left outer join ##temptable
    ON ##temptable.field1=myTable.field1 AND ##temptable.field2=myTable.field2
    WHERE ##temptable.field2 is null 
```

将为您提供刚刚添加的所有行（或使用新值更改）。在此比较之后，您只需要使用新值更新您的临时表（更快的方法是删除所有内容并插入所有值）当然，如果您的程序将由不同用户同时运行，您需要处理临时表中的用户 ID .

# c# - 将项目添加到下拉列表

> ID：14877512
> 
> 赞同：2
> 
> 时间：2013-02-14T14:53:29.440
> 
> 标签：c#, .net

我正在尝试从 Oracle 数据读取器向 DropDownList 添加一个项目，但我不断收到错误消息，指出该行包含一些无效参数。

我可以简单地指定文本和值吗？在这种情况下，我希望它们与来自数据读取器的值相同。

```
TRef.Items.Add(new ListItem(dr["t_ref"], dr["t_ref"])); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T14:57:13.453

ListItem 可以将两个字符串作为参数，您正在传递两个对象。尝试将 dr 对象转换为字符串：

```
TRef.Items.Add(new ListItem(dr["t_ref"].ToString(), dr["t_ref"].ToString())); 
```

或者更清洁：

```
 var t_ref = dr["t_ref"].ToString();
 TRef.Items.Add(new ListItem(t_ref, t_ref)); 
```

[http://msdn.microsoft.com/en-GB/library/system.web.ui.webcontrols.listitem.aspx](http://msdn.microsoft.com/en-GB/library/system.web.ui.webcontrols.listitem.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T14:57:55.450

`dr["t_ref"]`返回对象。

```
TRef.Items.Add(new ListItem(dr["t_ref"].ToString(), dr["t_ref"].ToString())); 
```

# javascript - 我的 EventListener 不工作

> ID：14877514
> 
> 赞同：0
> 
> 时间：2013-02-14T14:53:31.170
> 
> 标签：javascript, html, canvas, html5-canvas

我想做的是，如果我将鼠标悬停在我绘制的一个对象上，我想显示一个简介，说明它是哪个城市，人口和他们市中心的图像等。截至目前，我只是想你得到它工作。我还想知道是否有其他东西可以代替警报，而是会产生泡沫的东西

```
<script>
    function startCanvas() {
      var c = document.getElementById("myCanvas");
      var ctx = c.getContext("2d");
      //first circle
      var one = c.getContext("2d");
      //second circle
      var two = c.getContext("2d");
      //third cirle
      var three = c.getContext("2d");
      //fourth circle
      var four = c.getContext("2d");
      //fifth cirle
      var five = c.getContext("2d");
      // new image
      var image = new Image();
      image.onload = function () {
        ctx.drawImage(image, 69, 50);
        //draw a circle
        one.beginPath();
        one.arc(180, 90, 10, 0, Math.PI * 2, true);
        one.closePath();
        one.fill();
        two.beginPath();
        two.arc(155, 138, 10, 0, Math.PI * 2, true);
        two.closePath();
        two.fill();
        three.beginPath();
        three.arc(160, 180, 10, 0, Math.PI * 2, true);
        three.closePath();
        three.fill();
        four.beginPath();
        four.arc(257, 210, 10, 0, Math.PI * 2, true);
        four.closePath();
        four.fill();
        five.beginPath();
        five.arc(238, 235, 10, 0, Math.PI * 2, true);
        five.closePath();
        five.fill();
      };
      image.src = 'denmark.jpg';

    //function hover over circle one, give alert
      one.addEventListener('mouseover',  
       function (e) {
           e = e || window.event;
           alert('this is a test');
       }
       );

    }
    </script>
    </head>
    <body onload="startCanvas()">
      <canvas id="myCanvas" width="600" height="600";">
        Your browser does not support the HTML5 canvas tag.
      </canvas>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T14:59:00.887

您是否考虑过使用更高级别的绘图库，例如[RaphaelJS](http://raphaeljs.com/reference.html)？还是[画架](http://www.createjs.com/#!/EaselJS)？

我已经搞砸了这两个，它们使这种交互式画布的工作更加优雅，并且还将提高您的跨浏览器兼容性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T17:12:41.963

你的代码会抛出这个错误

*   **对象 # < CanvasRenderingContext2D > 没有方法 'addEventListener'**

所以修改这部分

```
 //function hover over circle one, give alert
  one.addEventListener('mouseover',  
   function (e) {
       e = e || window.event;
       alert('this is a test');
   }
   ); 
```

通过这段代码

```
//function hover over circle one, give alert
  c.addEventListener('mouseover',  
   function (e) {
       e = e || window.event;
       alert('this is a test');
   }
   ,false); 
```

这将起作用；

# java - 将值传递给 Shiro ini 中的枚举属性

> ID：14877518
> 
> 赞同：5
> 
> 时间：2013-02-14T14:53:35.803
> 
> 标签：java, ini, shiro

我正在使用 JDBC 领域并将身份验证数据存储在 SQL 中。我将盐存储在用户表中并依赖于 DEFAULT_SALTED_AUTHENICATION_QUERY。要调用该查询，我必须设置 SaltStyle。

因此，我需要通过 INI 将 SaltStyle.COLUMN 枚举值传递给 JdbcRealm。

SaltStyle 不是一个类，所以我无法创建参考

无论我通过什么都会生成此错误 = org.apache.shiro.config.UnresolveableReferenceException：

无法从文档中的大量搜索或参考中找到示例。任何帮助深表感谢。

```
#====================================================================
# Shiro INI configuration
#
# ===================================================================
[main]
JdbcRealm=org.apache.shiro.realm.jdbc.JdbcRealm
JdbcRealm.permissionsLookupEnabled = true 
sha256Matcher = org.apache.shiro.authc.credential.HashedCredentialsMatcher
sha256Matcher.hashAlgorithmName=SHA-256
sha256Matcher.hashIterations=1
JdbcRealm.credentialsMatcher = $sha256Matcher
JdbcRealm.saltStyle= enum expression needed here 
```

这是 JdbcRealm 中的属性

```
public void setSaltStyle(SaltStyle saltStyle) {
    this.saltStyle = saltStyle;
    if (saltStyle == SaltStyle.COLUMN && authenticationQuery.equals 
             (DEFAULT_AUTHENTICATION_QUERY)) {
        authenticationQuery = DEFAULT_SALTED_AUTHENTICATION_QUERY;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T16:21:36.460

我的理解是目前（Shiro 1.2）你不能在 shiro.ini 中配置 ENUM 值，看[这个](http://shiro-user.582556.n2.nabble.com/shiro-ini-set-enum-value-for-a-property-object-td7578343.html)。
但是，您可以在调用领域相关方法（如登录）的 Java 代码中执行此操作。我在我的 servlet init() 中这样做了，如下所示：

```
public class AuthManager extends HttpServlet {
protected SaltStyle saltStyle = SaltStyle.COLUMN;
// set remaining fields...
   public void init() throws ServletException { 
          Collection<Realm> realms=((RealmSecurityManager) securityManager).getRealms();    
          CustomJdbcRealm jdbcRealm=(CustomJdbcRealm)realms.toArray()[0];
          jdbcRealm.setSaltStyle(saltStyle);
   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-16T21:18:44.883

您可以扩展 JdbcRealm 并覆盖该方法：

-- CustomShiroJdbcRealm.java:

```
public class CustomShiroJdbcRealm extends JdbcRealm {

    public void setSaltStyle(String saltStyle) {
        super.setSaltStyle(SaltStyle.valueOf(saltStyle));
    }

} 
```

--- shiro.ini：

```
jdbcRealm = com.mycompany.CustomShiroJdbcRealm
jdbcRealm.saltStyle = COLUMN 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-18T07:23:38.130

该请求已修复。我可以使用

```
[main]
jdbcRealm.saltStyle = COLUMN 
```

在我的`shiro.ini`配置文件中。

# sql - SQLPlus：显示多行语句的完整 sql 错误

> ID：14877523
> 
> 赞同：0
> 
> 时间：2013-02-14T14:53:42.150
> 
> 标签：sql, oracle, sqlplus

我有使用 Toad 从数据库生成的插入语句，如下所示：

```
Insert into TXT
   (ID, STR)
 Values
   (23, 'test'); 
```

当此语句之一出错时，SQLPlus 会说：

```
Insert into TXT
*
ERREUR à la ligne 1 :
(...) 
```

对于所有错误行，它总是说“ligne 1”，所以我需要看到错误的整行：

```
Insert into TXT (ID, STR) Values (23, 'test');
*
ERREUR à la ligne 1 :
(...) 
```

是否有参数或任何方法可以使用 SQLPlus 显示它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T15:43:40.597

不确定这是否是您所追求的，但使用 11g SQL*Plus 客户端，您可以使用以下方式存储它们[`set errorlogging`](http://docs.oracle.com/cd/E11882_01/server.112/e16604/ch_twelve040.htm#i2698945)：

```
SQL> set errorlog on truncate
SQL> insert into dual -- don't do this really of course
  2  values (1, 2);
insert into dual -- don't do this really of course
            *
ERROR at line 1:
ORA-00913: too many values

SQL> select statement, message from sperrorlog;

STATEMENT
--------------------------------------------------------------------------------
MESSAGE
--------------------------------------------------------------------------------
insert into dual -- don"t do this really of course
values (1, 2)
ORA-00913: too many values 
```

只要您提交，您就可以在另一个会话中看到错误，例如在您的脚本退出之后。要求提交有点可惜；这似乎是自主交易的候选者，但我相信他们有他们的理由。如果您知道这样做的话，无论如何您都可以在同一个会话中查询它 - 如果您可以在错误时自动执行此操作，我想会很好。请注意，这也会捕获难以处理的 SQL*Plus 错误 (SP2-xxxxx)。

Tom Kyte 之前曾[写过这](http://tkyte.blogspot.co.uk/2010/04/new-thing-about-sqlplus.html)方面的文章，并且它也在[这篇 11g 顶级特性文章中](http://www.oracle.com/technetwork/articles/sql/11g-misc-091388.html)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-14T14:56:21.480

`SET ECHO ON`在您的脚本中使用。Sql*Plus 将在终端上回显它播放的命令。

当它报告错误时，查询将在它上面。

# c# - HttpResponseMessage 的内容为 JSON

> ID：14877524
> 
> 赞同：25
> 
> 时间：2013-02-14T14:53:44.927
> 
> 标签：c#, asp.net-mvc, json, asp.net-web-api

我有一个 ASP.NET MVC WEB API。由于几个原因（由于没有授权而重定向..），我不能只使用一个简单的对象并在我的控制器方法中返回它。因此我需要允许我重定向的 HttpResponseMessage 类。

目前我正在这样做：

```
var response = new Response { responseCode = Response.ResponseCodes.ItemNotFound };
var formatter = new JsonMediaTypeFormatter();
response.Content = new ObjectContent<Response>(response, formatter, "application/json"); 
```

.. 将序列化为 JSON 的对象获取到 HttpResponseMessage 的内容中。不知何故，我觉得还有另一种更好的方法可以做到这一点。有什么想法吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-02-14T15:05:21.420

你可以做：

```
var response = new Response { responseCode = Response.ResponseCodes.ItemNotFound };
Request.CreateResponse<Response>(HttpStatusCode.OK, response); 
```

默认情况下，Web API 将根据 HTTP 请求标头中指定的 Content-Type 设置响应格式，但 CreateResponse 方法有一些重载，您可以在其中指定类型格式化程序。

如果这是您想要的，您还可以删除 Web API XML 序列化程序以强制所有响应为 JSON - 我认为这是 HttpConfiguration 上的 Formatters.Remove 方法。

# mysql - cakePHP 自动从 mysql 中删除数据

> ID：14877529
> 
> 赞同：0
> 
> 时间：2013-02-14T14:53:59.190
> 
> 标签：mysql, database, cakephp

该表具有以下字段：`id, date, user_id, city, price`

我希望自动删除超过 1 年的行，但我不确定如何执行此操作。应该由应用程序还是数据库来完成？如何？

这里的另一个问题是每年会有大约 5 万次插入。几年后“id”领域会发生什么？数字不会太大吗？在这种情况下可以做什么？

提前谢谢了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T15:20:23.430

我建议[创建一个](http://book.cakephp.org/2.0/en/console-and-shells.html#creating-a-shell)处理删除记录的基本 shell，并安排一个 cron 作业，该作业在您希望检查应删除的记录时运行。shell 可能非常简单，如下所示：

```
class JanitorShell extends AppShell {
    // put the model you wish to delete from here
    public $uses = array('Model'); 

    public function main() {
        $this->Model->deleteAll(array(
          'Model.created <' => date('Y-m-d', '-1 year')
        ));
        $this->out('Records deleted.');
    }
} 
```

然后您的 cron 作业将运行您的 shell。要运行您的 shell，请调用：

```
cake -app /path/to/app janitor 
```

这假设`cake`在您的 PATH 中。当然，这是一个非常基本的外壳，可以轻松扩展，保留已删除内容的日志，甚至只是将已删除的记录移动到新表中，这是一种“软删除”。您可能不应该放入这样具有破坏性的代码，`main()`因为它会在您每次运行 shell 时运行，但这会让您开始。

要回答您的第二个问题，每年 50k 插入是没有什么可担心的。要了解主键的限制，请阅读 MySQL 数据类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-12T18:14:39.753

其实我觉得应该是

date('Ymd', strtotime('-1 年'))

# ios - IOS 视图中的 Adob e AE Motion 文件

> ID：14877531
> 
> 赞同：1
> 
> 时间：2013-02-14T14:54:02.790
> 
> 标签：ios, motion, dvd, after-effects

有没有人对在 IOS 项目中添加已经创建的 Motion 文件作为背景动画剪辑的不太痛苦的方法有任何建议。任何工具，可以帮助？

TIA。

# apache-flex - 用 HTML5 替换 Apache Flex

> ID：14877536
> 
> 赞同：0
> 
> 时间：2013-02-14T14:54:12.913
> 
> 标签：apache-flex

我正在编写一个需要访问设备麦克风以确定瞬时音量级别的应用程序。该应用程序将有网页版、iOS 版和 Android 版，并且必须与尽可能多的设备兼容，因为我们的应用程序目标可能无法轻松切换浏览器的特定用户群。

起初，我考虑在我的应用程序中使用 HTML5。但是，它似乎不适合我的目的，因为我找不到任何跨平台的方式来获得即时麦克风输入，而且许多用户可能正在使用他们的浏览器的过时版本，它不支持HTML5。**是否有任何工具可以缓解这些挑战并允许我使用 HTML5？**

作为替代，我开始研究 Apache Flex。它似乎具有我所寻求的所有功能：它是跨平台的，允许我访问麦克风音量级别，并且即使在非常旧的设备上也可以工作，只要它们安装了 Flash。然而，*许多*人预测 Flex 即将消亡，并强烈反对使用它，而是选择了 HTML5。**就我的目的而言，Flex 是一个合适的工具，还是仍然不推荐？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-09T05:00:52.000

您可以使用 PhoneGap 或类似的后端应用程序来实现它，这些应用程序可以托管 webview 并允许您通过 JavaScript 或 JSObject 访问本机 api。

对于前端，您可以使用 HTML 并在所有设备/平台上保持您的 UI 标准。

PhoneGap 体积不大，但在 Android 和 iOS 上，您可以通过托管 WebView 创建一个最小的应用程序，并对其进行自定义以创建 JavaScript 桥并编写自己的原生 api。

# html - 鼠标 hoverOut、css 过渡和下拉菜单问题

> ID：14877537
> 
> 赞同：0
> 
> 时间：2013-02-14T14:54:23.570
> 
> 标签：html, css

我的菜单具有文本转换样式，当我将鼠标悬停在菜单上并悬停时，下拉列表会消失，但下拉列表上的文本在消失后会出现延迟，就像它必须在之后完成文本转换样式文本将消失。

嗯，我该怎么办？:)

```
<head>
<style type="text/css">
body{font-family:HelveticaLTStd-Light;}
table{font-size:80%}
a{color:#f0f0f0;text-decoration:none;
-o-transition:.5s;
  -ms-transition:.5s;
  -moz-transition:.5s;
  -webkit-transition:.5s;
  transition:.5s;
}
a:hover{color:#006600;}
font-family:HelveticaLTStd-Light;
td.menu{background:#DEB887}
table.menu
{
font-size:100%;
color:#f0f0f0;
position:absolute;
visibility:hidden;
background:#558800;
opacity:0.9;
}
body {
background:url(wall.jpg) no-repeat fixed center;
}
table
{
border-collapse:collapse;
}
table, td, th
{
position:relative;
}
</style>
<script type="text/javascript">
function showmenu(elmnt)
{
document.getElementById(elmnt).style.visibility="visible";
}
function hidemenu(elmnt)
{
document.getElementById(elmnt).style.visibility="hidden";
}
</script>
</head>

<body>
<div id="header">
<br>
<br><table border="0" align="center">
<tr>
    <th align="left" width="430"><font color="cccccc" face="HelveticaLTStd-Light" size="15">C-Ann Trading</font><br>
    <font color="#f0f0f0" size="5">and Computer Services    </font> </th>
    <th width="120" style="border-right:1px solid #000000;border-color:#cccccc"><br><font size="3"><a href="index.html">Home</a></font></th>
    <th width="120" style="border-right:1px solid #000000;border-color:#cccccc"><br><font size="3"><a href="about.htm">About Us</a></font></th>
    <th width="120" onmouseover="showmenu('products')" onmouseout="hidemenu('products')" style="border-right:1px solid #000000;border-color:#cccccc"><br><font size="3" color="#f0f0f0">Products</font>
        <table border="1" class="menu" id="products" width="150">
        <tr><th align="left" class="menu"><a href="notebook.htm">&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNotebooks</a></tr></th>
        <tr><th align="left" class="menu"><a href="monitor.htm">&nbsp&nbsp&nbsp&nbsp&nbsp&nbspMonitors</a></tr></th>
        <tr><th align="left" class="menu"><a href="component.htm">&nbsp&nbsp&nbsp&nbsp&nbsp&nbspComponents</a></tr></th>
        <tr><th align="left" class="menu"><a href="software.htm">&nbsp&nbsp&nbsp&nbsp&nbsp&nbspSoftwares</a></tr></th>
        <tr><th align="left" class="menu"><a href="peripheral.htm">&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPeripherals</a></tr></th>
        <tr><th align="left" class="menu"><a href="network.htm">&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNetworking</a></tr></th>
        <tr><th align="left" class="menu"><a href="storage.htm">&nbsp&nbsp&nbsp&nbsp&nbsp&nbspStorage Devices</a></tr></th> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T15:04:34.920

我认为你的问题来自这个

```
a{color:#f0f0f0;text-decoration:none;
-o-transition:.5s;
  -ms-transition:.5s;
  -moz-transition:.5s;
  -webkit-transition:.5s;
  transition:.5s;
} 
```

删除标签上的过渡

或者将它减小到 .2 秒，这应该看起来像 [预览](http://jsfiddle.net/MGWB7/)

# emblem.js - 如何在会徽.js中绑定输入值

> ID：14877539
> 
> 赞同：3
> 
> 时间：2013-02-14T14:54:27.037
> 
> 标签：emblem.js

我的控制器中有一个`filter`属性，我想将其绑定到相应的 DOM 元素。

到目前为止，我能够显示`filter`价值，做：

```
%input type="text" value=filter 
```

但我想要的是`filter`通过双向绑定将输入更改反映回 ......

有什么线索吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-15T17:56:46.843

`= input valueBinding="filter"`

更干净。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T15:04:42.497

`view Ember.TextField valueBinding="filter"`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-08T12:52:36.117

`= input value=filter`

甚至带有子属性：

`=input value=object.property`

两者都有效。

# java - 将 HTML 解析器与 SGML 一起使用

> ID：14877548
> 
> 赞同：0
> 
> 时间：2013-02-14T14:54:56.517
> 
> 标签：java, html, xml, html-parsing, sgml

我想对文档使用`XML`解析器`SGML`，但这不起作用。在阅读了一些建议之后，似乎唯一的解决方法就是使用`HTML`解析器。所以我基本上只是尝试做一个简单的查询，从我的文档中提取故事标题。（如果我解析 null - 打印整个文档，它会起作用，只是我不确定如何访问特定标签，例如标题）。

```
public static void main(String[] args){
    Parser parser = new Parser(xmlFile.getAbsolutePath());
    NodeList list = parser.parse (new HasAttributeFilter ("id","title"));
    Node node = list.elementAt(0);

    if (node instanceof TagNode) {
       TagNode meta = (TagNode) node;
       String description = meta.getAttribute("title");
       System.out.println(description);
    }
} 
```

SGML 文件的开头：

```
<head>
<meta words=61 rate=180>
<formname>Testing</formname>
<storyid>1234</storyid>
</head>
<story>
<fields>
<f id=title>Sports</f>
<f id=modify-by>Tester</f>
<f id=modify-date>315576000</f>
</fields>
<body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T12:07:01.847

从您的示例看来，您的内容模型非常简单。在这种情况下，您可以实现一个简单的即席解析。

如果您非常确定不使用标记的部分（不仅是因为 CDATA 部分，还因为状态关键字可以在参数实体中给出，这会使一切变得更加复杂），以及 SGML 的深奥特征（例如 DATATAG）没有被使用，您可以删除任何评论，然后扫描以下模式：

```
(?i)<f\s+id\s*=\s*["']?title["']?\s*> 
```

假设 f 具有单个属性 id （并且起始标签未最小化，因为它可能未关闭或启用网络），这使您处于内容的开头。然后扫描直到“<”，然后瞧。

当然，更灵活的东西当然需要 SGML 解析器。

# css - 带有背景图像的 IE 7 和带有 js hack 的位置

> ID：14877549
> 
> 赞同：0
> 
> 时间：2013-02-14T14:54:53.897
> 
> 标签：css, internet-explorer, internet-explorer-7, css-sprites

我在 IE 7 中使用 js 进行破解之前。它显示了类的背景图像。但现在我想定位图像。因为它是精灵。我不知道为什么它不工作。下面是我的代码。

JS 破解。[http://jquery.lukelutman.com/plugins/pseudo/](http://jquery.lukelutman.com/plugins/pseudo/)

```
.magento{
        list-style-type: none;
        margin:0; padding:0;
        padding-left: 20px;

    }

    .magento li:before 
    {
         display: inline-block;
         position: absolute;
         margin: 9px 0 0 -20px;
         min-height: 9px;  
         background: url(images/bulletsprite.png) no-repeat -116px 0px;
         *before: url(images/bulletsprite.png);
         *background-position-x: -116px;
         *background-position-y:0px;
         content:"";
        // vertical-align: middle;
         width: 9px; 
         height: 9px;
         float:left;
    } 
```

HTML 代码

```
<ul class="magento">
        <li>
            <span>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec nulla sapien, varius id dignissim sit amet, luctus elementum nulla. Mauris hendrerit tincidunt nunc condimentum accumsan. Donec semper hendrerit ligula non blandit. Nullam tellus lacus, dictum quis sodales id, consectetur posuere nunc. Maecenas massa nibh, sagittis quis hendrerit ornare, interdum sit amet tellus. Proin lectus neque, posuere at interdum vitae, eleifend id dui. Mauris eget eros magna, sed gravida quam.</span>
        </li>
        <li>
            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec nulla sapien, varius id dignissim sit amet, luctus elementum nulla. Mauris hendrerit tincidunt nunc condimentum accumsan. Donec semper hendrerit ligula non blandit. Nullam tellus lacus, dictum quis sodales id, consectetur posuere nunc. Maecenas massa nibh, sagittis quis hendrerit ornare, interdum sit amet tellus. Proin lectus neque, posuere at interdum vitae, eleifend id dui. Mauris eget eros magna, sed gravida quam. 
        </li>
        <li>
            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec nulla sapien, varius id dignissim sit amet, luctus elementum nulla. Mauris hendrerit tincidunt nunc condimentum accumsan. Donec semper hendrerit ligula non blandit. Nullam tellus lacus, dictum quis sodales id, consectetur posuere nunc. Maecenas massa nibh, sagittis quis hendrerit ornare, interdum sit amet tellus. Proin lectus neque, posuere at interdum vitae, eleifend id dui. Mauris eget eros magna, sed gravida quam.  
        </li>
        <li>
            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec nulla sapien, varius id dignissim sit amet, luctus elementum nulla. Mauris hendrerit tincidunt nunc condimentum accumsan. Donec semper hendrerit ligula non blandit. Nullam tellus lacus, dictum quis sodales id, consectetur posuere nunc. Maecenas massa nibh, sagittis quis hendrerit ornare, interdum sit amet tellus. Proin lectus neque, posuere at interdum vitae, eleifend id dui. Mauris eget eros magna, sed gravida quam.  
        </li>
    </ul> 
```

也仅在 IE7 标准模式下。为什么背景位置不起作用。相同的代码在 IE8 中运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T17:10:10.850

IE7 直到 2006 年 10 月才问世。您使用的插件说它最后一次更新是在 2006 年 2 月 6 日。我猜它从未与 IE 5 和 IE 6 以外的任何东西一起使用。

# java - 如何使用 Grizzly/JAX-RS 创建 DAO/Service 层

> ID：14877553
> 
> 赞同：0
> 
> 时间：2013-02-14T14:55:00.687
> 
> 标签：java, jax-rs, grizzly

对于这个 JAX-RS 应用程序，我使用 Grizzly 而不是 Glassfish。我是这项技术的新手，所以我在谷歌上搜索了很多，似乎无法找到如何在我的应用程序中设置服务/DAO 层的好大纲。

下面是我拥有的工作原型。

**我的资源**

```
@Path("/helloworld")
@Stateless
public class MyResource {

    @EJB //DOESN'T WORK - how do I map this service to this resource?
    WorkflowService workflowService;

    @GET
    @Produces(MediaType.TEXT_PLAIN)
    public String TestRequest() {
        Workflow workflow = new Workflow();
        workflow.setName("test");

        workflowService.save(workflow);

        return "Workflow ID:";
    }
} 
```

**我的道**

```
public class WorkflowDao {

    @PersistenceContext(unitName = "unit")
    private EntityManager entityManager;

    public int save(Workflow workflow) {
        entityManager.persist(workflow);
        return workflow.getId();
    }
} 
```

**我的服务**

```
@Stateless
public class WorkflowService {

    @EJB //I know EJB is probably wrong here, not sure what else to do yet.
    WorkflowDao workflowDao;

    public int save(Workflow workflow) {
        int id = workflowDao.save(workflow);
        return id;
    }
} 
```

**更新**- 我意识到 EJB 不适用于我的设置。所以我的问题是，有什么作用？如何使服务在我的资源中可访问？

**-------------- 最终/工作代码 --------------**

**资源**

```
@Path("/helloworld")
public class MyResource {

    WorkflowService workflowService;

    public MyResource() {
        workflowService = new WorkflowService();
    }

    @GET
    @Produces(MediaType.TEXT_PLAIN)
    public String TestRequest() {
        Workflow workflow = new Workflow();
        workflow.setName("test");

        workflowService.save(workflow);

        return "Workflow ID:";
    }
} 
```

**服务**

```
public class WorkflowService {

    WorkflowDao workflowDao;

    public WorkflowService() {
        workflowDao = new WorkflowDao();
    }

    public int save(Workflow workflow) {
        int id = workflowDao.save(workflow);
        return id;
    }
} 
```

**道**

```
@Singleton
public class WorkflowDao {

    private EntityManager entityManager;

    public int save(Workflow workflow) {
        getEntityManager().persist(workflow);
        return workflow.getId();
    }

    protected EntityManager getEntityManager() {
        EntityManagerFactory emf = Persistence.createEntityManagerFactory("unit");
        EntityManager em = emf.createEntityManager();
        return em;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T14:59:58.473

我不确定我能不能完全回答你的问题。但我可以告诉你，这`@EJB`是 JavaEE 6 的一部分，只能在 WebApplication Server 中运行。

Grizzly 不是其中之一（与 Glassfish 相比）。

**编辑**

如果要进行依赖注入，可以使用 Spring 框架。

# html - 具有 100% 宽度但 TD 不断增长的 Html 表？

> ID：14877554
> 
> 赞同：3
> 
> 时间：2013-02-14T14:55:02.153
> 
> 标签：html, css, html-table

我有一张宽度为 100% 的桌子；

[**我有 2 个 TD。**](http://jsbin.com/uneyug/4/edit)

![在此处输入图像描述](../Images/d1083d489070abfaac524a44cdaaddc5.png)

但是我希望第二个`td`接近`left`尾声。（就在cccccccc之后......）

[**有一个解决方案**](http://jsfiddle.net/Rrkky/1/)使用 1 个 td，其宽度为 100%。

就像是

```
<table id="mytable"style="width:100%;background:red"><tr>
    <td>TEXT1</td>
    <td>TEXT2</td>
    <td style="width:100%;background:blue">&nbsp;</td>
    </tr></table> 
```

但是，我想知道是否有**没有**另一个 TD 的另一种解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T15:03:52.997

试试这个： http: [//jsfiddle.net/Rrkky/144/](http://jsfiddle.net/Rrkky/144/) 完全符合您的要求。

**HTML**

```
<table id="mytable"style="width:100%;background:red">
    <tr>
    <td class="firstcell">aaaa</td>
    <td>TEXT2</td>
    </tr>
    <tr>
    <td class="firstcell">bbbbbbb</td>
    <td>TEXT2</td>
    </tr>
    <tr>
    <td class="firstcell">ccccccccccccccc</td>
    <td>TEXT2</td>
    </tr>
</table> 
```

**CSS**

```
#mytable td {
    width:50px;
    background:green
}

#mytable td.firstcell {
    background:red;
    width:1%;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T15:03:27.013

那这个呢 ？

```
<table id="mytable"style="width:100%;background:red">
    <tr>
        <td>aaa</td>
        <td width="100%">Royi</td>
    </tr>
    <tr>
        <td>bbbbbb</td>
        <td width="100%">Royi</td>
    </tr>
    <tr>
        <td>cccccccccccccccc</td>
        <td width="100%">Royi</td>
    </tr>
</table> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-14T15:10:26.693

CSS

```
tr td:not(:first-of-type){
    width:100%
} 
```

**或者**

```
tr td{
    width:100%
}
tr td:first-child{
    width:1%
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-14T15:04:33.457

[http://jsfiddle.net/rjsAG/](http://jsfiddle.net/rjsAG/)

只是不要添加最后一个`TD`，而是使用`width:100%`第二个

# gradle - Gradle 项目依赖不构建依赖项目

> ID：14877561
> 
> 赞同：1
> 
> 时间：2013-02-14T14:55:13.773
> 
> 标签：gradle, gradlefx

我有一个 Gradle 多项目。

其中一个项目是 Flex 项目，它是使用 gradleFx 插件构建的。

第二个是战争项目，我需要将 Flex 项目中的 SWF 文件包含到战争中。

我加

```
war { 
  from (project(":flex:FlexManager").buildDir) {into ('flash')}
} 
```

它确实使 SWF 陷入战争，但前提是 SWF 已经存在。

然后我希望 gradle 在构建我的战争期间构建 :flex:FlexManager 项目。所以我添加

```
dependencies {
  ....
  runtime project(path : ':flex:FlexManager')
} 
```

我发现在战争构建期间启动 flex 项目构建的唯一方法是

```
war { 
  ...
   dependsOn ':flex:FlexManager:build'
} 
```

但它看起来不是最好的方法 - 我更喜欢定义项目依赖项而不是任务依赖项

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T17:54:29.650

您需要更改的只是指定要从任务或任务输出而不是目录复制 - 这将注册您的战争任务和构建 swf 文件的任何任务之间的隐式依赖关系。

表示构建 swf 文件的任务有必要指定其输出。我快速浏览了 GradleFx，不幸的是，compileFlex 任务似乎没有这样做。因此，首先您需要通过以下方式指定任务的输出：

```
compileFlex {
    outputs.dir project.buildDir
} 
```

然后修改你的war任务配置：

```
war {
    from project(":flex:FlexManager").compileFlex {
        into ('flash')
    }
} 
```

您可能还应该唠叨 GradleFx 开发人员为他们的任务添加输出。:)

**编辑：**

从评论中的讨论中，我了解到，您可以依赖项目工件，而不是依赖任务。最干净的方法是创建一个自定义配置，为其添加依赖项，然后在配置 war 任务时在 from 调用中使用它：

```
configuration {
    flex
}

dependencies {
    flex project(':flex:FlexManager')
}

war {
    from configurations.flex {
        into ('flash')
    }
} 
```

您也可以`:flex:FlexManager`直接使用存档或默认配置：

```
war {
    from project(':flex:FlexManager').configurations.archives {
        into ('flash')
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-29T10:44:53.307

我的项目中有类似的要求。我需要将作为 flex 项目输出的 swf 文件包含到 java 项目中并构建战争。

```
1\. I created a two sub project under war project, flex and java.
2\. Included them in settings file.
3\. The main build.gradle file has basic configuration.
4\. In flex sub project gradlefx plugin is applied and the output swf file is copied to the directory using a copy task.
5\. In java sub project war plugin is applied and the source directory is mentioned from which war has to be generated. 
```

这是一个示例代码供您参考：

设置.xml：

```
include myproject,
myproject:mysubproject:flex,
myproject:mysubproject:java 
```

myproject 目录中的 build.gradle 文件：

```
buildscript {
    dependencies {
        classpath project (":FlexProject") //include all the flex project from which the swf file to be included
    }
}
dependencies {
    classpath project (":JavaProject") //include all the dependent java project if any
}

sourceSets {
  main {
    output.classesDir   = 'root/WEB-INF/classes' //This is the directory from which I am going to generate war.
  }
} 
```

myproject/mysubproject/flex 目录中的 build.gradle 文件：

```
apply plugin: 'gradlefx'
type = 'swf'
dependencies{
    merged project (":FlexProject")
}

String rootProjectDir = rootDir
rootProjectDir = rootProjectDir.replaceAll("\\\\","/")

task copyTask <<{
    copy{
        from rootProjectDir +'/MyFlexProject1/build'
        into rootProjectDir +'/myproject/root'
        include '**/*.swf'
    }
}
build.finalizedBy(copyTask) 
```

myproject/mysubproject/java 目录中的 build.gradle 文件：

```
String rootProjectDir = rootDir
rootProjectDir = rootProjectDir.replaceAll("\\\\","/")
String rootProjectDirDocRoot = rootProjectDir + '/myproject/root'

dependencies {
    compile project (":JavaProject")    //to include dependent jars in war
}

group = "com.abc.enterprise"
archivesBaseName = "myprojet"
description = "myproject"
apply plugin: 'war'

war{
    from rootProjectDirDocRoot
    exclude('.gradle')
    exclude('.settings')
} 
```

这将每次编译 flex 项目，并且他的 swf 文件将包含在必须从中构建战争的目录中。希望这可以帮助。

# perl - Excel::Writer::XLSX set_optimization() 只写入数值数据

> ID：14877562
> 
> 赞同：1
> 
> 时间：2013-02-14T14:55:14.657
> 
> 标签：perl, excel, export-to-excel, xlsx

我正在使用 Excel::Writer::XLSX perl 模块导出到 Excel。它工作得很好，除了大型出口需要很长时间。但是，当我添加 $workbook->set_optimization(); 我只在 .xlsx 文件中获取数字数据。

我尝试同时使用 $worksheet->write() 和 $worksheet->write_string() 但是当我使用 $workbook->set_optimization(); 时，任何具有字符串而不是数字的字段都被排除在导出之外。

如果我使用较旧的 Spreadsheet::WriteExcel 模块，它工作得很好，但导出的文件大小要大得多，24MB 对 7MB

下面是创建标题行的代码：

```
# Create a new workbook
my $workbook = Excel::Writer::XLSX->new($file_path);

$workbook->set_optimization();

my $worksheet = $workbook->add_worksheet();
# insert the header row
my $header_cnt = 0;
foreach my $header_cell (@header_values){#loop through each header column and add it to the sheet
    # print $header_cell." - ".$header_cnt."\n";
    # $worksheet->write_string("0", $header_cnt, "test");
    $worksheet->write_string("0", $header_cnt, $header_cell);
    $header_cnt++;
}

$workbook->close() or die "Error closing file: $!"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T16:11:49.043

在`set_optimization()`模式下写入数字或字符串应该没有问题。实际上有[几个测试用例就是这样](http://cpansearch.perl.org/src/JMCNAMARA/Excel-Writer-XLSX-0.65/t/regression/optimize01.t)。

我使用一些示例数据运行了您的程序的一个变体，并且输出正确显示。

```
#!/usr/bin/perl -w

use strict;
use Excel::Writer::XLSX;

my $workbook = Excel::Writer::XLSX->new('test.xlsx');
$workbook->set_optimization();

my $worksheet = $workbook->add_worksheet();

my @header_values = ( 1, 2, 3, 'foo', 'bar', 6, 7 );
my $header_cnt    = 0;

for my $header_cell (@header_values){
    $worksheet->write(0, $header_cnt, $header_cell);
    $header_cnt++;
}

$workbook->close(); 
```

![示例输出](../Images/6caa986faa5ce2d2903e2fad35dd391b.png)

请注意，字符串左对齐，数字右对齐，这表明 Excel 将它们视为字符串和数字数据。

此外，如果您使用该`write_string()`方法，那么无论哪种情况，您都将获得一个字符串。

您遇到的问题可能是在优化模式下您需要按行列顺序写入数据，即该行中的每一行和每一列都必须按顺序写入。

例如，如果您在 for 循环之后添加这些行，则第二个数据将不会在优化模式下显示：

```
$worksheet->write('A2', "This is fine");
$worksheet->write('A1', "I'm too late."); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-18T15:00:08.440

为了减少内存使用 set_optimization() 方法，它不会将数据限制为数字。它可以处理数字和字符串。

并循环遍历每一行

```
foreach my $record (@records){
  $row++;
  $col = 0;

  foreach my $data (@{$record}){
      $worksheet->write($row,$col,$data);       
      $col++;
  }
} 
```

[有关更多详细信息，请参阅此链接https://github.com/AarthiRT/Excel_Writer_XLSX](https://github.com/AarthiRT/Excel_Writer_XLSX)中的“Write_largeData_XLSX.pl” 。

# c++ - 使用 CodeBlocks 在 Windows 上设置 Boost

> ID：14877563
> 
> 赞同：0
> 
> 时间：2013-02-14T14:55:15.610
> 
> 标签：c++, windows, boost, codeblocks, bjam

我想使用 Boost Filesystem 库，我正在尝试在我的 Windows 机器上安装 Boost。我正在使用 CodeBolcks 进行开发。我做了以下：

1) 我下载并提取 boost 到：d:\boost_1_53_0

2) 我下载并解压了 jam 可执行文件到：d:\boost-jam-3.1.18-1-ntx86

3) 我将“d:\boost-jam-3.1.18-1-ntx86”添加到我的 PATH 环境变量中。

4) 我转到“d:\boost_1_53_0”，然后运行以下命令：

```
bjam --toolset=gcc "--prefix=D:\Program Files\CodeBlocks" install 
```

我得到以下输出：

```
warning: mismatched versions of Boost.Build engine and core
warning: Boost.Build engine (bjam) is 03.1.18
warning: Boost.Build core (at D:/boost_1_53_0/tools/build/v2) is 2011.12-svn
D:/boost_1_53_0/tools/build/v2/util\path.jam:476: in path.makedirs
rule MAKEDIR unknown in module path.
D:/boost_1_53_0/tools/build/v2/build\configure.jam:190: in configure.set-log-file
D:/boost_1_53_0/tools/build/v2\build-system.jam:725: in load
D:\boost_1_53_0\tools\build\v2/kernel\modules.jam:283: in import
D:\boost_1_53_0\tools\build\v2\kernel\bootstrap.jam:142: in boost-build
D:\boost_1_53_0\boost-build.jam:17: in module scope 
```

有人知道如何解决这个问题吗？

谢谢

更新 1：

根据您的建议，我尝试使用 Boost 文件夹中的 bootstrap.bat。但是，我收到以下输出：

```
D:\boost_1_53_0>bootstrap.bat gcc
Building Boost.Build engine

Failed to build Boost.Build engine.
Please consult bootstrap.log for furter diagnostics.

You can try to obtain a prebuilt binary from

   http://sf.net/project/showfiles.php?group_id=7586&package_id=72941

Also, you can file an issue at http://svn.boost.org
Please attach bootstrap.log in that case. 
```

bootstrap.log 文件包含以下内容：

```
###
### Using 'gcc' toolset.
###

D:\boost_1_53_0\tools\build\v2\engine>if exist bootstrap rd /S /Q bootstrap 

D:\boost_1_53_0\tools\build\v2\engine>md bootstrap 

D:\boost_1_53_0\tools\build\v2\engine>gcc -DNT -o bootstrap\jam0.exe  command.c compile.c constants.c debug.c execnt.c filent.c function.c glob.c hash.c hdrmacro.c headers.c jam.c jambase.c jamgram.c lists.c make.c make1.c object.c option.c output.c parse.c pathunix.c regexp.c rules.c scan.c search.c subst.c timestamp.c variable.c modules.c strings.c filesys.c builtins.c md5.c pwd.c class.c w32_getreg.c native.c modules/set.c modules/path.c modules/regex.c modules/property-set.c modules/sequence.c modules/order.c 

D:\boost_1_53_0\tools\build\v2\engine>.\bootstrap\jam0 -f build.jam --toolset=gcc "--toolset-root= "  clean 
...found 1 target...
...updating 1 target...
...updated 1 target...

D:\boost_1_53_0\tools\build\v2\engine>.\bootstrap\jam0 -f build.jam --toolset=gcc "--toolset-root= "  
...found 50 targets...
...updating 2 targets...
[COMPILE] bin.ntx86\b2.exe

"gcc"   -o bin.ntx86\b2.exe "-DNDEBUG" "-DOPT_HEADER_CACHE_EXT" "-DOPT_GRAPH_DEBUG_EXT" "-DOPT_SEMAPHORE" "-DOPT_AT_FILES" "-DOPT_DEBUG_PROFILE" "-DOPT_FIX_TARGET_VARIABLES_EXT" "-DOPT_IMPROVED_PATIENCE_EXT" "-DNT" "-DYYSTACKSIZE=5000" "-pedantic" "-fno-strict-aliasing" "-s" "-O3" "-Wno-long-long" "command.c" "compile.c" "constants.c" "debug.c" "function.c" "glob.c" "hash.c" "hcache.c" "headers.c" "hdrmacro.c" "jam.c" "jambase.c" "jamgram.c" "lists.c" "make.c" "make1.c" "mem.c" "object.c" "option.c" "output.c" "parse.c" "regexp.c" "rules.c" "scan.c" "search.c" "subst.c" "w32_getreg.c" "timestamp.c" "variable.c" "modules.c" "strings.c" "filesys.c" "builtins.c" "pwd.c" "class.c" "native.c" "md5.c" "modules/set.c" "modules/path.c" "modules/regex.c" "modules/property-set.c" "modules/sequence.c" "modules/order.c" "execnt.c" "filent.c" "pathunix.c" 

...failed [COMPILE] bin.ntx86\b2.exe...
...removing bin.ntx86\b2.exe
...skipped bjam.exe for lack of b2.exe...
...failed updating 1 target...
...skipped 1 target... 
```

你有什么建议？

更新 2：

```
D:\boost_1_53_0\tools\build\v2>bootstrap.bat gcc
Bootstrapping the build engine

Failed to bootstrap the build engine
Please consult bootstrap.log for furter diagnostics. 
```

bootstrap.log 文件包含与 UPDATE 1 中相同的内容。问题出在哪里？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-21T23:24:57.133

您必须从另一个来源（不是 boost tar 发行版附带的那个）安装了 boost.build 包。

如果您想摆脱警告，您需要从与您的 boost 发行版相同的包中安装 boost-build。为了确保它们都是相同的并且是最新的，只需从[这里](http://www.boost.org/users/download/)下载 boost并解压缩它。完成后按照 boost 的安装说明（基本上是`bootstrap`then `b2`），进入 tools/build/v2 并执行`bootstrap.sh`and `b2`。然后你会生成这个boost版本对应的b2和bjam文件，不会再有这个警告了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T20:25:39.677

通过右键单击我的计算机和属性，将 %PATH% 变量设置为 'gcc.exe' 在 envs 变量中的位置，然后重新启动提示符并再次运行。

# java - Java：在 AbstractTableModel 中添加一行 JCombobox

> ID：14877567
> 
> 赞同：0
> 
> 时间：2013-02-14T14:55:26.223
> 
> 标签：java, swing, user-interface, jcombobox, abstracttablemodel

我正在尝试创建一个包含`JCombobox`在扩展类中的行`AbstractTableModel`。

我有一个称为数据的二维数组。我也使用该方法`getColumnCount()`来实现两个按钮“上一个”和“下一个”。我已经标记了我认为`JCombobox`应该在哪里，但我不知道我应该如何在整行中实施。

```
public class SwitchTableModel extends AbstractTableModel{

    @Override
    public int getRowCount() {
        // Standard number of rows
        return 3;
    }

    @Override
    public int getColumnCount() {
        // Number of columns change according to the data
        return data [position].length + 1;
    }

    public Object getValueAt(int rowIndex, int columnIndex) {
        switch (rowIndex)
        {
        case 0:
            return columnIndex == 0 ? "ID" : idArray [data [position][columnIndex - 1]];
        case 1:
            return columnIndex == 0 ? "Company Name" : company_nameArray [data [position][columnIndex - 1]];
        case 2: 
            return columnIndex == 0 ? "Double" : ...???
        default:
            throw new Error ();
        }
    }

    public void previous ()
    {
        position -= 1;
        if (position < 0) position = data.length - 1;

        fireTableStructureChanged();
    }

    public void next ()
    {
        position += 1;
        if (position >= data.length) position = 0;

        fireTableStructureChanged();
    }
} 
```

任何帮助都是有价值的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T15:00:42.777

> 在 AbstractTableModel 中添加一行 JCombobox，

*   这是错误的想法，`XxxTableModel`只保留最后选择的（或在第一次使用时初始化）值`String form`（在`XxxComboBoxModel`包含字符串形式的项目的情况下，如果有数字，那么模型只包含一个 munber）

*   必须拆分`JComboBox as Editor`一个`XxxTableModel`，然后这个想法有效

*   不要放`JComboBox`，`XxxTableModel`遵循Oracle教程中的代码示例

# php - 一个产品在许多类别中，从每个类别中找到 n 个产品 - php mysql

> ID：14877568
> 
> 赞同：0
> 
> 时间：2013-02-14T14:55:29.433
> 
> 标签：php, mysql, sql, greatest-n-per-group

我有属于多个类别的产品。

```
products         categories       products_categories
------------     -------------    --------------------
product_id       category_id      product_id
product_title    category_title   category_id 
```

我想获得 n 个数字，可以说是 6，最后插入每个类别的不同产品。我还会在其上加入产品以获取产品信息，但这应该很容易。

我对不同产品的意思是，如果一种产品属于多个类别，那么它应该只在一个类别中出现一次，而其他类别应该得到另外 n，6 种产品，如果有的话，其他任何可用的。

[我可以尝试使用MySQL 中从每个类别中选择 2 个产品](https://stackoverflow.com/questions/5633619/select-2-products-from-each-category-in-mysql?rq=1)的等级来定义这里定义的东西， 但是当产品属于多个类别时，此解决方案不处理条件，并且我希望每个类别中有不同的 n 个产品。

这是一些示例数据

```
pid catid    insertion_date
284 48  2/4/2013 1:14:16 AM
278 41  2/4/2013 1:25:03 PM
278 43  2/4/2013 1:25:03 PM
284 45  2/4/2013 12:55:24 PM
284 44  2/4/2013 12:55:24 PM
285 41  2/4/2013 1:28:37 AM
278 42  2/4/2013 1:25:03 PM
285 47  2/4/2013 1:28:42 AM
285 48  2/4/2013 12:50:44 PM
278 46  2/4/2013 1:25:03 PM
278 47  2/4/2013 1:25:03 PM
278 48  2/4/2013 1:25:03 PM
286 43  2/7/2013 3:20:40 PM
286 44  2/7/2013 3:20:40 PM
243 41  2/14/2013 3:30:59 PM
243 42  2/14/2013 3:30:59 PM
243 43  2/14/2013 3:30:59 PM
266 41  2/14/2013 3:51:40 PM
266 47  2/14/2013 3:51:40 PM
266 48  2/14/2013 3:51:40 PM
286 41  2/14/2013 3:51:55 PM
286 42  2/14/2013 3:51:55 PM
286 45  2/14/2013 3:51:55 PM
286 46  2/14/2013 3:51:55 PM
286 47  2/14/2013 3:51:55 PM
286 48  2/14/2013 3:51:55 PM
254 41  2/14/2013 3:52:07 PM
254 43  2/14/2013 3:52:07 PM
254 45  2/14/2013 3:52:07 PM
254 47  2/14/2013 3:52:07 PM
254 48  2/14/2013 3:52:07 PM
252 41  2/14/2013 3:52:23 PM
252 42  2/14/2013 3:52:23 PM
252 45  2/14/2013 3:52:23 PM
252 46  2/14/2013 3:52:23 PM
252 47  2/14/2013 3:52:23 PM
252 48  2/14/2013 3:52:23 PM
169 46  2/14/2013 3:55:54 PM
221 46  2/14/2013 3:56:08 PM 
```

如果有人有更好的解决方案在 php 中执行此类操作，请提出建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T15:17:25.200

此示例将为您提供 2 个最新`product_title`的基于`product_ID`每个`category_title`.

```
SELECT  a.category_title, c.product_title
FROM    categories a
        INNER JOIN products_categories b
            ON a.category_ID = b.category_ID
        INNER JOIN products c
            ON b.product_ID = c.product_ID
WHERE   
        (
            SELECT  COUNT(*)
            FROM    products_categories d
            WHERE   b.category_ID = d.category_ID AND
                    c.product_ID <= d.product_ID
        ) <= 2 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/17c3c/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T15:09:00.033

我的 SQL 有点生疏，但我想您可以使用 NOT IN () 删除任何重复项。如果您有一份声明要获得前 6 种产品，请使用以下内容：

```
WITH Statement1 as (SELECT .... FROM ....)  -- Get your first 6 products
WITH Statement2 as (SELECT ... FROM .... NOT IN (Statement1)) -- Get 6 new one, NOT in Statement1
... and so on ... 
```

不是最漂亮的代码，但你应该理解我想说的概念。

要获得所有结果，您可以创建一个视图以轻松获取它们：

```
CREATE VIEW AllProducts AS
  Statement1 UNION Statement2 UNION ...;

SELECT .... FROM AllProducts; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T15:00:53.367

如果您只需要一次重复的值，请参阅[DISTINCT](http://dev.mysql.com/doc/refman/5.0/en/distinct-optimization.html)，它将为您返回给定列的唯一值的结果。

并获得最后插入的[ORDER BY](http://dev.mysql.com/doc/refman/5.0/en/order-by-optimization.html)，使用`DESC`

要限制您想要的行数，[LIMIT](http://dev.mysql.com/doc/refman/5.6/en/limit-optimization.html)

所以你的最终查询是： `SELECT DISTINCT product_id FROM products_categories ORDER BY product_id DESC LIMIT 6`

**编辑：**尝试你的意思的*实际方式*，到目前为止无法得到正确的结果，但我相信这将是可行的`JOIN`，但我现在不能只是形成它。稍后我会再看看这个，在那之前祝你好运，我对这种输出也很好奇，所以会把它添加到*收藏夹*中。

# asp.net - 在后台弹出改变视图

> ID：14877572
> 
> 赞同：0
> 
> 时间：2013-02-14T14:55:46.013
> 
> 标签：asp.net, html, css, error-handling

我做了一个asp.net 网站。

对于错误处理，例如，当用户将字符串值输入到期望整数的文本框时，在更改的事件中，如果它是不正确的值，我会像处理它一样 -

```
Page.ClientScript.RegisterStartupScript(this.GetType(), "showMyMessage", "ShowMessage('Incorrect value');", true); 
```

使用 -

```
<script>
function ShowMessage(message) { alert(message); }
</script> 
```

这工作正常，但是当脚本被触发时，背景，即网站本身，正在改变形状。导航栏从水平布局变为垂直布局，当用户在弹出窗口上按下“确定”时，屏幕将返回其原始布局。

所以错误框工作正常，但是背景对用户来说看起来很糟糕，因为网站改变了几秒钟的布局。

如何在不改变主站点形状的情况下处理错误？

**编辑**

由于隐私，我无法添加屏幕截图，但是导航栏的方向从水平变为垂直（当弹出加载时），然后在弹出关闭后返回水平。

# android - 如何在 achrtengine 中绘制 y 轴上的整数和 x 轴上的字符串的条形图

> ID：14877574
> 
> 赞同：1
> 
> 时间：2013-02-14T14:55:50.240
> 
> 标签：android, achartengine

我想用字符串替换 x 轴上的整数值。我想在 y 轴上的整数和 x 轴上的字符串之间绘制条形图。请帮我。任何帮助将不胜感激。![就像这个条形图在 x 轴上有字符串，在 y 轴上有整数](../Images/d2154818e8819177a2880fbc07421783.png)

![在此处输入图像描述](../Images/f8c35ea9a5d00f0b055197f9462ad4c3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:51:50.290

为了更改默认标签，您需要禁用它们并添加自定义标签：

```
renderer.setXLabels(0);
// call something like this for each label
renderer.addXTextLabel(x, "text"); 
```

# html - 将 like 语句与 % 一起使用

> ID：14877580
> 
> 赞同：0
> 
> 时间：2013-02-14T14:55:57.967
> 
> 标签：html, mysql

我有一个选择框，其中选项值用作查询的变量。

```
<option value="1">Monday</option> 
```

我们感兴趣的查询部分是这样的：

```
AND phpvms_schedules.daysofweek LIKE '%{$day}%'"; 
```

`LIKE '%{$day}%'`是取自期权价值的变量。基本上，它指定给定的日期并检查表中列中的`option value`存在。但是，我想为选项值添加更多数字，以便基本上搜索表中的所有时间表。`daysofweek``db_schedules`

```
<option value="1234560">All Days</option> 
```

如果我这样做，我根本不会得到任何结果。

我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T14:58:58.330

在查询之前添加：

```
if ($day == 1234560)
    $day = ''; 
```

这将给出`WHERE LIKE '%%'`并且会在所有工作日返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T15:00:35.010

您可以将值设为 '1','2','3' 然后进行查询

```
AND phpvms_schedules.daysofweek In (%{$day}%) 
```

# jquery - 单击链接时发出异步 ajax 请求

> ID：14877581
> 
> 赞同：0
> 
> 时间：2013-02-14T14:55:57.873
> 
> 标签：jquery, ajax, asynchronous

我正在使用 PHP/jQuery 并有以下场景：

我有一个`site1.php`带有链接的站点 ()，该链接指向另一个站点 ( `site2.php`)，我还在此链接中添加了一个带有 jQ​​uery 的 ajax-onclick-event，它请求另一个站点 ( `ajaxcall.php`)。这个其他网站有“很多工作”要做，所以这不是一个简短的请求。

我的目标是：将请求设置为`ajaxcall.php`在后台（异步）并立即转到`site2.php`. （我不需要答案`ajaxcall.php`）

我的第一个实现是这样的：

```
<!DOCTYPE html>
<html>
<head>
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script type="text/javascript">
    $(document).ready(function() {
        $("#link").on("click",function(){
            $.get('./ajaxcall.php');
    </script>
</head>
<body>
    <a href="./file2.php" id="link">link</a>
</body>
</html> 
```

显然这行不通。因为 ajax-request（它是异步的），一旦页面被改变就被中止。

据我所知，我在这里有两种可能性：

1.  使请求同步并显示加载指示器 ( `$.ajax({url: './ajaxcall.php',async:false});`)
    --> 缺点：在完成`file2.php`之前不会打开`ajaxcall.php`。

2.  打开一个`window.open('ajaxcall.php')`弹`file2.php`窗（

3.  ？？？更好的方法？？？

我希望你明白我想要完成的事情并且你能帮助我:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T15:00:56.237

试试这个代码...

```
$(document).ready(function() {
    $("#link").on("click",function(e){
        e.preventDefault();
        var href = this.href;
        $.get('./ajaxcall.php', function() {
            window.location.href = href;
        });
    });
}); 
```

它停止执行链接（使用`e.preventDefault()`），获取目标 url，然后在获取请求完成时将页面重定向到该位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T15:01:42.487

那么你`ajaxcall.php`不能通过传递一个参数来开始里面的动作`file2.php`吗？就像：

`file2.php?startBackgroundAction=true`

**文件2.php：**

```
if($_GET['startBackgroundAction']) {
   include 'ajaxCall.php' // with ignore_user_abort(true)
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-20T09:16:32.267

最新的 chrome 浏览器不会完成 ajax 请求。由于浏览器页面从用户那里得到了新的 url 请求，所以浏览器会立即终止线程。

98% 的情况下，您可以看到 ajax 请求在网络选项卡中被取消。

所以解决方案是使用 sendBeacon API。这将异步执行 POST 请求。
Google 分析使用此代码执行事件跟踪（例如：点击）。
[https://developer.mozilla.org/en-US/docs/Web/API/Navigator/sendBeacon](https://developer.mozilla.org/en-US/docs/Web/API/Navigator/sendBeacon)

```
 navigator.sendBeacon("{{url}}", param); 
```

# android - 弹出式“讲话泡泡”不带动作，不在地图上

> ID：14877584
> 
> 赞同：1
> 
> 时间：2013-02-14T14:56:05.177
> 
> 标签：android, dialog, quickaction

我正在尝试实现一个类似于[QuickAction Dialog](http://www.londatiga.net/it/how-to-create-quickaction-dialog-in-android/)的弹出对话框。不同之处在于我希望在弹出窗口中有一个可垂直滚动的文本视图，而不是所有这些操作。

这[`here`](https://stackoverflow.com/questions/593341/speech-bubble-notifications)正是我想要的，但这个问题与 C# 有关。

我发现了很多处理地图的例子，但没有地图。我试图让用户按下一个按钮，并让该按钮出现对话气泡。

```
ctInfoButton = new ImageButton( this );
ctInfoButton.setOnClickListener( new OnClickListener() {
    public void onClick( View v ) {
         // Pop up code initialized here.
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T21:02:54.350

我认为你想要的是一个 android '9-patch' 气泡，它将在其可扩展区域中接受文本。

查看这些[文档](http://developer.android.com/tools/help/draw9patch.html)

看到这个[线程](https://stackoverflow.com/questions/9399612/create-a-chat-bubble-in-android)

通常，您需要创建包含 9-patch 的布局。这需要一组单独的图形工具来创建特殊的、可扩展的图像，该图像将进入您的资源文件夹。

一旦您创建了 9-patch 图像，您就可以定义在图像上扩展的文本区域的逻辑覆盖。您会在该文本字段上获得参考，将其设置为要填充气泡的文本值，它将根据需要扩展以将文本与气泡图像括起来。

# xcode4.5 - 时间戳。两次之间的差异

> ID：14877585
> 
> 赞同：1
> 
> 时间：2013-02-14T14:56:06.443
> 
> 标签：xcode4.5, objective-c-2.0, nstimeinterval

我正在尝试制作一个时间戳应用程序，您可以在其中通过一个按钮捕获时间。

当按下按钮时，它会打印出当前时间`00:00:00`。当第二次按下按钮时，它会再次打印出当前时间（即`00:00:15`）。

然后我希望它计算两个时间戳之间的时间差（10 秒）。

我是objective-c的新手，我已经坐了几个小时这个小问题。有一个指向正确方向的指针会很好。

我在使用`timeIntervalSinceDate`. 这是代码：

```
- (IBAction)checkButton:(id)sender {

if (buttonPress) {

    self.checkInStamp = [NSDate date];

    NSDateFormatter *timeFormatter = [[NSDateFormatter alloc] init];
    [timeFormatter setTimeStyle:NSDateFormatterMediumStyle];

    checkInTime.text = [timeFormatter stringFromDate:checkInStamp];
    buttonPress = false;
}
    else {

        self.checkOutStamp = [NSDate date];

        NSDateFormatter *timeFormatter = [[NSDateFormatter alloc] init];
        [timeFormatter setTimeStyle:NSDateFormatterMediumStyle];

        checkOutTime.text = [timeFormatter stringFromDate:checkOutStamp];

        NSTimeInterval timeDifference = [checkOutStamp timeIntervalSinceDate:checkInStamp];

        totalDuration.text = @"%d", timeDifference; //<-This gives "Expression result unused on build"
    }
} 
```

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T15:04:53.863

使用方法 ( [reference](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSDate_Class/Reference/Reference.html#//apple_ref/occ/instm/NSDate/timeIntervalSinceDate%3a)`NSDate` )获得两个对象之间的差异，并表示为 a (a 'd )：`[NSDate timeIntervalSinceDate:]``NSTimeInterval``typedef``double`

```
NSTimeInterval difference = [self.checkOutStamp timeIntervalSinceDate:self.checkInStamp];
NSLog(@"Difference is %f seconds", difference); 
```

# sql - 如何使用 sql 查询对组中的特定数据进行分类

> ID：14877589
> 
> 赞同：1
> 
> 时间：2013-02-14T14:56:18.340
> 
> 标签：sql

我正在尝试在 sql 中进行查询以将特定数据分组。所以我想在下一组中对数据进行分类：

```
[1-90m²] group1
[91-140m²] group2
[141-190m²] group3
[191-300m²] group4
[300+m²] group5 
```

但我只有确切的数据`Example 87m² -->[1-90m²] 160m² --> [141-190m²]`...

有谁知道如何做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T15:05:30.360

这通常称为离散化。

我将假设这些值存储在一个没有单位文本的整数字段中；如果这个假设是错误的或者数据类型不是整数，你可以改变这个：

```
DECLARE @test TABLE 
(
    id int IDENTITY,
    value int
)

INSERT INTO @test (value) VALUES
(1),
(2),
(3),
(95),
(140),
(141),
(193),
(240),
(300),
(301)

SELECT value, 
    CASE 
        WHEN value <= 90 THEN 1
        WHEN value <= 140 THEN 2
        WHEN value <= 190 THEN 3
        WHEN value <= 300 THEN 4
        ELSE 5
    END AS group
FROM @test 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T15:05:10.137

假设表`YourTable`有一列`woonoppervlakte`包含如下数据`87`：

```
select  case
        when woonoppervlakte between 1 and 90 then 'group1'
        when woonoppervlakte between 91 and 140 then 'group2'
        when woonoppervlakte between 141 and 190 then 'group3'
        when woonoppervlakte between 191 and 300 then 'group4'
        when woonoppervlakte > 300 then 'group5'
        end as [Group]
,       *
from    YourTable 
```

# grails - 带十进制分隔符的 Grails 数据绑定

> ID：14877602
> 
> 赞同：10
> 
> 时间：2013-02-14T14:56:54.187
> 
> 标签：grails

当我在 Double 表单字段上使用带有小数分隔符的 grail 自动数据绑定“ex：Test t = new Test(params)”时遇到问题。经过几次搜索，我发现它与浏览器区域设置有关。

示例：如果我输入的小数点由点“3.45”分隔，则它不起作用（数字的小数部分被忽略）。它在我的数据库中存储 3.0

如果我进行相同的测试，但使用逗号“3,45”作为小数分隔符，一切正常。Grails 将 3.45 存储在数据库中。

问题是没有人输入带有逗号分隔符的数字。（即使设置为 fr_CA 时，小键盘也会输入一个点 '.'）

我已经找到了一些解决方案，比如注册自定义数字编辑器（当你有很多应用程序时有点痛苦）或将全局 localeResolver 设置为 en_US （最后一个不能完成这项工作，因为我失去了我的应用程序的所有国际化功能）。

那么，有人有一个简单的解决方案来解决这个问题吗？

使用：Grails：2.2.0 浏览器：Google Chrome（区域设置 fr_CA）

非常感谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-15T17:09:14.673

我一直在寻找和尝试 2 天。我最终选择定义一个自定义的 PropertyEditorRegistar。这样，我可以仅修复双字段格式的区域设置。但是，我认为这不是最好的解决方案，因为它将应用于我的所有 Double 字段。但与此同时，它的工作做得很好。因此，如果有人有更好的解决方案，我将很乐意对其进行测试并更新我的代码。

所以这就是我设置它的方式：

1 - 创建一个新的实现 PropertyEditorRegistrar 的 groovy 类（如果你已经有一个，只需在现有的方法中添加该方法包含的部分代码）

```
import java.text.DecimalFormat;
import java.text.SimpleDateFormat;
import java.util.Date;

import org.springframework.beans.PropertyEditorRegistrar;
import org.springframework.beans.PropertyEditorRegistry;
import org.springframework.beans.propertyeditors.CustomNumberEditor;

public class CustomDoubleRegistrar implements PropertyEditorRegistrar {

    @Override
    public void registerCustomEditors(PropertyEditorRegistry registry) {
            //define new Double format with hardcoded Locale.ENGLISH
        registry.registerCustomEditor(Double.class, 
                 new CustomNumberEditor(Double.class, 
                           DecimalFormat.getInstance(Locale.ENGLISH),true))
    }

} 
```

2- 将自定义注册器定义到 conf/spring/resources.goovy 中（当然，如果它还没有的话）

```
beans = {
    customPropertyEditorRegistrar(CustomDoubleRegistrar)
} 
```

3-就是这样，Grails自动数据绑定可以正常工作

```
Test t = new Test(params); 
//params contains many Double fields with dot '.' as decimal delimiter 
```

不要犹豫，发布更好的解决方案......谢谢

**编辑 1**

从 Grails 2.3 开始，这个解决方案不再有效。如果你仍然想使用这个方案，你必须把这个配置添加到*Config.groovy*文件中

*grails.databinding.useSpringBinder = true*

或实施新的[DataBinding](http://grails.org/doc/2.3.2/guide/introduction.html#whatsNew23)之一。我已经尝试了其中的一些，但似乎没有任何东西可以解决小数分隔符问题。如果您知道如何发布答案，谢谢...

**编辑 2**

从 Grails 2.4+ 开始，您可以定义自己的 ValueConverter 来绕过基本的 Locale 验证。请注意，**您必须删除在初始帖子和 EDIT 1 中所做的更改**。以下是如何实现自定义 ValueConverter：

**conf/spring/resources.groovy**

```
// Place your Spring DSL code here
beans = {
    "defaultGrailsjava.lang.DoubleConverter"(DoubleValueConverter)
}

class DoubleValueConverter implements ValueConverter {

    public LongValueConverter() {
    }

    boolean canConvert(value) {
        value instanceof Double
    }

    def convert(value) {
        //In my case returning the same value did the trick but you can define 
        //custom code that takes care about comma and point delimiter...
        return value
    }

    Class<?> getTargetType() {
        return Double.class
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-18T21:29:57.363

对于 Grails 2.3+，您可以正确地覆盖默认的活页夹/转换器，尽管它不是微不足道的或直观的。

在这里查看我的答案：[Binding real number values to Grails domain attributes (values sent by Dojo widgets)](https://stackoverflow.com/questions/24274274/binding-real-number-values-to-grails-domain-attributes-values-sent-by-dojo-widg?lq=1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-05T18:33:50.180

我在这里有同样的问题。例如，德国的用户通常会输入 ,（逗号）作为小数分隔符，但显然您不能阻止他输入点；）此外，如果您从 Javascript 填充值，则很难获得本地化数字。所以我为控制器写了这个小助手方法。它可能无法涵盖所有​​可能的情况，但我需要它来输入 GPS 坐标。随时提出改进建议。

```
 /**
     * Replaces , in the param with . an converts it to a Double.
     * @param paramName an array of paramater names
     */
    private convertDicimalParamsToDouble(paramName) {
        paramName.each { it
            def val = params[it]
            if(val) {
                val = val.replace(",", ".")
                try {
                    params[it] = Double.parseDouble(val)
                } catch (NumberFormatException) {
                    //ignore
                }
                log.debug("Converted decimal param ${it} with value '${params[it]}' to new value '${val}'")
            }
        }
    } 
```

然后像这样调用它，例如：

```
def save() {        
    convertDicimalParamsToDouble(["lat", "lng"])
    ... 
```

# actionscript-3 - 收听/收听 关闭 Flash Player

> ID：14877603
> 
> 赞同：1
> 
> 时间：2013-02-14T14:56:58.423
> 
> 标签：actionscript-3, flash, apache-flex

有没有办法在 swf 中捕捉/收听关闭的 flash 播放器？类似于空中近距离事件？

此 swf 将作为独立运行，而不是在浏览器中运行。

黑客更受欢迎......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T15:01:32.450

不明确。但是您可以利用浏览器的[onUnload](http://www.w3schools.com/jsref/event_onunload.asp)事件通过[ExternalInterface](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html)使用 JavaScript 调用 SWF 中的函数。

# c# - 用于访问数据库的程序文件的连接字符串

> ID：14877611
> 
> 赞同：0
> 
> 时间：2013-02-14T14:57:23.620
> 
> 标签：c#, winforms, database-connection, connection-string

我的 Windows 窗体正在使用 Access 数据库。如何将连接字符串映射到 Program Files 中的文件夹例如，我的数据库在安装后将位于以下位置

C:\Program Files (x86)\Amrit\trial\Database

有什么合适的方法来完成这项工作吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-14T15:05:25.787

您可以： 1\. 将连接字符串添加到 app.config 2\. 使用 ODBC 连接 3\. 检查：[所有连接字符串类型](http://www.connectionstrings.com/)

# r - 来自R中的格子的bwplot上的Anova posthoc标签

> ID：14877612
> 
> 赞同：0
> 
> 时间：2013-02-14T14:57:25.720
> 
> 标签：r, lattice, posthoc

我想在 R`bwplot`中的`lattice`包中的函数中将事后分析之后的重要性标签添加到盒须图。我已经阅读了[R 中 anova boxplot 上 Posthoc 标签](https://stackoverflow.com/questions/7846493/posthoc-labels-on-anova-boxplot-in-r?answertab=active#tab-top)`ggplot2`中基于 Posthoc 标签的解决方案但是这没有显示框架内的解决方案。这里有没有人曾经尝试过这个并且可以给我一些指示？如果有某种方法可以从 bwplot 对象中获取位置（正如[R 邮件列表中本文中](https://stat.ethz.ch/pipermail/r-help/2006-June/108205.html)针对常规箱线图对象所建议的那样），我猜我应该朝那个方向看？提前致谢！`lattice`

亲切的问候，

调频

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T15:53:37.360

如果您正在使用交互式命令或多个命令的脚本构建绘图，您始终可以手动添加文本，`grid.text`因为两者都使用`lattice`并在后台`ggplot2`使用`grid`图形。因此，请查看此[链接](http://finzi.psych.upenn.edu/R/library/grid/html/grid.text.html)（因为`?grid.text`不会指向该页面）。你会想要观察你的单位，你可能需要做`upViewport(0)`才能到达根视口（取决于你的绘图步骤的细节）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-20T07:07:31.270

我不确定你想要你的标签在哪里，但这里有一个使用`panel.text`.

```
dd <- data.frame(
  x = runif(120),
  ind = LETTERS[1:6]
)

library(lattice)

bwplot(ind ~ x, data = dd,
       panel = function(x, y, ...) {
         panel.bwplot(x, y, ...)
         panel.text(x = tapply(x, y, median), y, pos = 2, offset = 1, 
                    labels = c("*", "**", "", "", "ns", "***"), ...)
       }) 
```

![伊姆古尔](../Images/597f2dd667dfd0d76de37f37512f89c3.png)

# java - 如何为膨胀视图中的按钮添加 OnclickListener()？

> ID：14877613
> 
> 赞同：0
> 
> 时间：2013-02-14T14:57:29.873
> 
> 标签：java, android, android-layout

我是 StackOverFlow 的新手，我的问题是我只是创建一个包含选项卡的应用程序，我想向所有选项卡添加相同的布局内容，比如 layout.xml，layout.xml 里面有一个按钮，它有一些文本框. 每当按下按钮时，我都想使用文本框内容计算一个值。我为每个新选项卡膨胀 layout.xml 但 onClickListener() 不适用于选项卡...任何人都可以帮助我...请...

```
 TabSpec spec = th.newTabSpec("tag1");
        spec.setContent(new TabHost.TabContentFactory() {

            public View createTabContent(String tag) {
                // TODO Auto-generated method stub

                final View sem = getLayoutInflater().inflate(
                        R.layout.semester, null);

                Button Add = (Button) findViewById(R.id.bAdd);
                Add.setOnClickListener(new View.OnClickListener() {

                    @Override
                    public void onClick(View paramView) {
                        // TODO Auto-generated method stub
                        counter++;
                        LinearLayout A = createNewSubject();
                        ((ViewGroup) sem).addView(A);
                    }
                });
                return sem; 
```

这是我添加新标签的代码....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T15:04:26.947

我认为唯一的问题是下面的行

```
 Button Add = (Button) findViewById(R.id.bAdd); 
```

你必须使用这个

```
 Button Add = (Button)sem.findViewById(R.id.bAdd); 
```

# sql - 将链接服务器存储过程中的数据插入表中

> ID：14877622
> 
> 赞同：2
> 
> 时间：2013-02-14T14:57:48.163
> 
> 标签：sql, sql-server-2008, stored-procedures, linked-server

我们有一个连接到另一个 SQL 服务器“server2”的 SQL Server 2008“server1”的设置。在“server2”上，有一个存储过程，我可以从“server1”很好地查询：

```
EXEC [server2].[xx].[dbo].[sp] param 
```

但是，一旦我开始从链接服务器 SP 插入数据，我们就会遇到问题。我们使用以下代码：

```
INSERT INTO server1.dbo.table (column1, column2, ...)
EXEC [server2].[xx].[dbo].[sp] param 
```

当我们开始时，我们收到了“已知”错误，例如：

> 链接服务器“linkedserver”的 OLE DB 提供程序“SQLNCLI”返回消息“合作伙伴事务管理器已禁用其对远程/网络事务的支持。”。消息 7391，级别 16，状态 2，第 2 行 由于链接服务器“linkedserver”的 OLE DB 提供程序“SQLNCLI”无法开始分布式事务，因此无法执行操作。

如类似问题所述： 从链接的[存储过程插入到本地表](https://stackoverflow.com/questions/13017428/inserting-to-a-local-table-from-a-linked-stored-procedure) [从链接的服务器插入存储过程的结果](https://stackoverflow.com/questions/6874697/inserting-results-of-stored-procedure-from-linked-server)

因此，我们在两台服务器上都配置了 MSDTC。现在查询运行 20 秒，然后中止并显示错误消息：

> 链接服务器“server2”的 OLE DB 提供程序“SQLNCLI10”返回消息“没有事务处于活动状态。”。消息 7391，级别 16，状态 2，第 14 行 由于链接服务器“server2”的 OLE DB 提供程序“SQLNCLI10”无法开始分布式事务，因此无法执行操作。

与之前的错误相反，Windows 事件日志中没有任何内容。

首先，由于 INSERT 到本地表中，我的查询是否被视为分布式事务？

其次，如果我尝试执行这样的分布式查询：

```
begin distributed tran
select * from [server2].master.sys.sysprocesses
commit tran 
```

恰好 20 秒后，我收到完全相同的错误消息。

我不知道如何从这里进一步调查。会不会是防火墙问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-11-02T00:59:45.757

如果您不需要分布式事务，上面@rs 链接中的解决方案对我有用。在这里重复解决方案：

```
EXECUTE sp_serveroption @server = '<remote_linked_server_name>', @optname = 'remote proc transaction promotion', @optvalue = 'false'; 
```

这告诉 sql server 实例不要将事务提升到链接服务器。请注意，这可能会产生其他后果，因此请谨慎使用。

# haskell - Haskell 类型错误信息

> ID：14877623
> 
> 赞同：2
> 
> 时间：2013-02-14T14:57:54.507
> 
> 标签：haskell, types, typeerror

在过去的几天里，我一直在尝试学习 Haskell。虽然我正在慢慢好转，但我发现很难用 Haskell 的 IO 推理，可能是因为我缺乏知识。我一直在尝试编写一个简单的待办事项列表程序。这是我所拥有的：

```
tadd todo = do
    td <- getLine
    td:todo

tdel todo = do
    trem <- getLine
    let rid = read trem :: Int
    [todo !! x | x <- [0..(length todo-1)], not $ x == rid]

tls todo = do
    mapM putStrLn [ (show x) ++ (todo !! x) | x <- [0..(length todo -1)] ]
    todo

mtodo "add" todo = tadd todo
mtodo "del" todo = tdel todo
mtodo "ls"  todo = tls todo

bege = do
    com <- getLine
    mtodo com []

main = bege 
```

我排除了 mtodo to be`mtodo :: [IO String] -> [IO String] -> [IO String]` 和 tadd, tdel, tls to be `:: [IO String] -> [IO String]`。

相反，我只是收到这个可怕的错误消息

```
[1 of 1] Compiling Main             ( todo.hs, todo.o )

todo.hs:3:9:
    Couldn't match type `[]' with `IO'
    Expected type: IO String
      Actual type: [String]
    In a stmt of a 'do' block: td : todo
    In the expression:
      do { td <- getLine;
           td : todo }
    In an equation for `tadd':
        tadd todo
          = do { td <- getLine;
                 td : todo }

todo.hs:8:9:
    Couldn't match expected type `IO' with actual type `[]'
    In a stmt of a 'do' block:
      [todo !! x | x <- [0 .. (length todo - 1)], not $ x == rid]
    In the expression:
      do { trem <- getLine;
           let rid = ...;
           [todo !! x | x <- [0 .. (length todo - 1)], not $ x == rid] }
    In an equation for `tdel':
        tdel todo
          = do { trem <- getLine;
                 let rid = ...;
                 [todo !! x | x <- [0 .. (length todo - 1)], not $ x == rid] }

todo.hs:12:9:
    Couldn't match type `[]' with `IO'
    Expected type: IO [Char]
      Actual type: [[Char]]
    In a stmt of a 'do' block: todo
    In the expression:
      do { mapM
             putStrLn [(show x) ++ (todo !! x) | x <- [0 .. (length todo - 1)]];
           todo }
    In an equation for `tls':
        tls todo
          = do { mapM
                   putStrLn [(show x) ++ (todo !! x) | x <- [0 .. (length todo - 1)]];
                 todo } 
```

任何想法我的类型有什么问题？（另外 - 有什么我应该改变的吗？）。谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-14T15:10:56.723

看这段代码：

```
tadd todo = do
    td <- getLine
    td:todo 
```

问题是你自己有`td:todo`一条线；你正在使用`getLine`，所以整个块应该使用`IO`，但你的最后一行是一个列表。这就是“无法匹配”错误的含义——代码似乎是这样说的，`IO`应该`[]`是同一件事，但当然不是。

要将一个值提升到 monadic 上下文中以将其用作`do`块的结果值，请使用以下函数`return`：

```
tadd todo = do
    td <- getLine
    return $ td:todo 
```

这将给出`tadd`类型`[String] -> IO [String]`。这不是您似乎期望的类型，但是从您所写的内容来看，我认为您不想使用`[IO String]`.

这同样适用于 in 中的列表理解`tdel`和最终`todo`in `tls`。

此外，您在此处的预期类型已关闭：

```
mtodo :: [IO String] -> [IO String] -> [IO String]
mtodo "add" todo = tadd todo
mtodo "del" todo = tdel todo
mtodo "ls"  todo = tls todo 
```

第一个参数显然是 a `String`here，因此基于上述您可能想要`mtodo :: String -> [String] -> IO [String]`

这可能也不是您想要的：

```
bege = do
    com <- getLine
    mtodo com [] 
```

* * *

其他一些注意事项：

根据其余代码，您似乎想要一个交互式程序，但这只会运行一次。你可能想要的是这样的：

```
bege todo = do
    com <- getLine
    todo' <- mtodo com todo
    bege todo'

main = bege [] 
```

您的列表理解`[todo !! x | x <- [0..(length todo-1)], not $ x == rid]`效率非常低，而且根本不是惯用的。作为一个经验法则，如果你还在学习 Haskell，你可能永远不应该使用`(!!)`，除非你后来放弃了这个列表。Haskell 列表是线性序列，因此索引需要遍历所有内容。对于你正在做的事情来说，这并不是最好的数据结构，但你至少应该找到一些不需要多次遍历列表的方法。

作为避免的示例`(!!)`，您可以重写`mapM putStrLn [ (show x) ++ (todo !! x) | x <- [0..(length todo -1)] ]`as `mapM_ putStrLn $ zipWith (\n t -> show n ++ t) [0..] todo`，这样可以避免所有令人困惑和多余的东西，例如索引和担心列表的长度，以及只遍历列表一次，而不是先遍历它来计算长度，然后部分遍历每个项目以打印它。

这更像是一个品味问题，而不是这样写：

```
mtodo "add" todo = tadd todo
mtodo "del" todo = tdel todo
mtodo "ls"  todo = tls todo 
```

您可以将其缩写为：

```
mtodo "add" = tadd
mtodo "del" = tdel
mtodo "ls"  = tls 
```

...这意味着完全相同的事情，并且可以通过减少多余的噪音并使其明显地表明它所做的只是根据给定的字符串选择其他几个函数之一来更清晰。

此外，该`let rid = read trem :: Int`位是不必要的 - 只需使用函数`readLn`而不是`getLine`，这正是您想要的。此外，类型注释可能是不必要的（并且会分散注意力），因为应该根据您对结果的处理来推断类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T15:13:34.697

您需要了解退货。编译它所需要做的就是将 return 添加到 tadd、tdel 和 tls 的最后一行。

如果您使用显式类型签名，您将收到更好的错误消息。

```
tadd :: [String] -> IO [String]
tadd todo = do
  td <- getLine
  return (td:todo) 
```

在这种情况下，`(td:todo)`有 type `[String]`，您需要添加 return 将其带入 IO monad，这就是函数需要返回的内容。当您使用 do 表示法时，每一行都需要在您所在的 monad 中有一个类型（以 let 开头的除外），在本例中为 IO。

tdel 和 tls 有完全相同的问题。

```
tdel :: [String] -> IO [String]
tdel todo = do
  trem <- getLine
  let rid = read trem :: Int
  return [todo !! x | x <- [0..(length todo-1)], not $ x == rid]

tls :: [String] -> IO [String]
tls todo = do
  mapM putStrLn [ (show x) ++ (todo !! x) | x <- [0..(length todo -1)] ]
  return todo 
```

# c++ - 使用 std::dynamic_pointer_cast 向上转换 std::shared_ptr

> ID：14877626
> 
> 赞同：10
> 
> 时间：2013-02-14T14:57:55.730
> 
> 标签：c++, c++11, shared-ptr, upcasting

我开始在 C++0X/11 中使用智能指针，但遇到了一个特殊的情况。我想使用 shared_ptr 向上转换一个对象的实例。

类 Extend 继承自类 Base，其中 Base 类有一个虚拟析构函数以使其具有多态性（否则 dynamic_pointer_cast 抱怨非多态类转换）。

如果因此：

```
std::shared_ptr<Base> obj = std::make_shared<Base>(); 
```

然后我做：

```
obj = std::dynamic_pointer_cast<Extend>(obj); 
```

1.  安全吗？
2.  指向该对象的其他指针会发生什么？只有obj把它当作Extend，而其他共享指针仍然把它当作Base？
3.  向上转换同一个实例是否安全，还是我应该做其他事情？

编辑：谢谢你的回答。我问这个问题的真正原因是使用 SAX 解析器处理 XML 文档，但我被向上/向下转换迷惑了。我想要的是：

```
std::shared_ptr<Extend> ex = std::dynamic_pointer_cast<Extend>(obj);
obj = ex; 
```

但这根本没有意义，我将只使用对象工厂。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-14T15:05:33.557

这不是向上转换，而是向下转换（您正在从更少派生类转换为更多派生类）。然而：

> 安全吗？

是的，它是安全的，但是由于您试图向下转换指向运行时类型不是的对象的指针`Extend`，因此您将得到一个空指针作为回报。

> 指向该对象的其他指针会发生什么？只有obj把它当作Extend，而其他共享指针仍然把它当作Base？

您在这里有一个误解：向下转换指向对象的指针不会转换对象。如果对象不是目标类型，您将不会得到指向它的向下转换的指针。指向对象（*任何*对象）的类型在编译时确定并且不会改变。

> 向上转换同一个实例是否安全，还是我应该做其他事情？

不确定你在这里的意思，这个问题的提法可能源于上述误解。但是，这个指令：

```
obj = std::dynamic_pointer_cast<Extend>(obj); 
```

将`obj`生成一个空指针。赋值本身是合法的，因为您*可以*将指向派生类的（智能）指针分配给指向基类的（智能）指针。但是，由于赋值右侧的计算结果为空指针（由于上面写的内容），您最终将得到一个分配给`obj`.

由于您基本上只是在重置`obj`，如果`obj`是最后一个指向通过创建的对象的共享指针，`make_shared<>()`则执行上述分配后，该对象将被销毁。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-14T15:01:20.687

如果底层对象确实属于该类型，则只能向下转换为超类型。铸造不能突然给你的底层对象新的属性。

```
std::make_shared<Base>(); 
```

威尔，在幕后呼叫：`new Base`。

这意味着您不能：

```
obj = std::dynamic_pointer_cast<Extend>(obj); 
```

比你可以用`dynamic_cast`在 a 上的任何`new Base`东西都可以使它变成它不是的东西。您需要`make_shared<Extend>`然后使用`shared_ptr<Base>`.

# java - 应用程序崩溃 onItemClick

> ID：14877629
> 
> 赞同：0
> 
> 时间：2013-02-14T14:58:03.163
> 
> 标签：java, android, onitemclicklistener

单击某个项目时，我的应用程序崩溃。我的代码在 Eclipse 中没有错误，但是当我单击其中一个项目时（不幸的是，应用程序已停止工作）并且 LogCat 吐出一堆错误，其中一个是：02-14 04:33:20.010:E /MessageQueue-JNI(774​​)：java.lang.NullPointerException。关于如何解决这个问题的任何想法？

```
package com.carouseldemo.main;

import com.carouseldemo.controls.Carousel;

import com.carouseldemo.controls.CarouselAdapter; 
import com.carouseldemo.controls.CarouselAdapter.OnItemClickListener;
/**import com.carouseldemo.controls.CarouselAdapter.OnItemSelectedListener;*/
import com.carouseldemo.controls.CarouselItem;

import android.app.Activity;
import android.os.Bundle;
import android.view.Gravity;
import android.view.LayoutInflater;
import android.view.MenuInflater;
import android.view.Menu;
import android.view.View;
import android.view.ViewGroup;
import android.widget.TextView;
import android.widget.Toast;

public class MainActivity extends Activity {

    /** Called when the activity is first created. */
    @Override
    public boolean onCreateOptionsMenu(Menu menu){
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.testmenu, menu);
        return true;
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Carousel carousel = (Carousel)findViewById(R.id.carousel);

        carousel.setOnItemClickListener(new OnItemClickListener(){

            public void onItemClick(CarouselAdapter<?> parent, View view,
                    int position, long id) {    
                LayoutInflater inflater = getLayoutInflater();
                View layout = inflater.inflate(R.layout.toast_layout,
                                               (ViewGroup) findViewById(R.id.toast_layout_root));

                TextView text = (TextView) layout.findViewById(R.id.selected_item);
                text.setText("This is a custom toast");

                Toast toast = new Toast(getApplicationContext());
                toast.setGravity(Gravity.CENTER_VERTICAL, 0, 0);
                toast.setDuration(Toast.LENGTH_LONG);
                toast.setView(layout);
                toast.show();

                Toast.makeText(MainActivity.this, 
                        String.format("%s has been clicked", 
                        ((CarouselItem)parent.getChildAt(position)).getName()), 
                        Toast.LENGTH_SHORT).show();z
    }

        });

       /** carousel.setOnItemSelectedListener(new OnItemSelectedListener(){

            public void onItemSelected(CarouselAdapter<?> parent, View view,
                    int position, long id) {

                final TextView txt = (TextView)(findViewById(R.id.selected_item));

                switch(position){
                case 0:
                    txt.setText("The cat (Felis catus), also known as the domestic cat or housecat to distinguish it from other felids and felines, is a small, usually furry, domesticated, carnivorous mammal that is valued by humans for its companionship and for its ability to hunt vermin and household pests. Cats have been associated with humans for at least 9,500 years, and are currently the most popular pet in the world. Owing to their close association with humans, cats are now found almost everywhere in the world.");
                    break;
                case 1:
                    txt.setText("The hippopotamus (Hippopotamus amphibius), or hippo, from the ancient Greek for \"river horse\" (á¼±Ï€Ï€Î¿Ï€ÏŒÏ„Î±Î¼Î¿Ï‚), is a large, mostly herbivorous mammal in sub-Saharan Africa, and one of only two extant species in the family Hippopotamidae (the other is the Pygmy Hippopotamus.) After the elephant, the hippopotamus is the third largest land mammal and the heaviest extant artiodactyl.");
                    break;
                case 2:
                    txt.setText("A monkey is a primate, either an Old World monkey or a New World monkey. There are about 260 known living species of monkey. Many are arboreal, although there are species that live primarily on the ground, such as baboons. Monkeys are generally considered to be intelligent. Unlike apes, monkeys usually have tails. Tailless monkeys may be called \"apes\", incorrectly according to modern usage; thus the tailless Barbary macaque is called the \"Barbary ape\".");
                    break;
                case 3:
                    txt.setText("A mouse (plural: mice) is a small mammal belonging to the order of rodents. The best known mouse species is the common house mouse (Mus musculus). It is also a popular pet. In some places, certain kinds of field mice are also common. This rodent is eaten by large birds such as hawks and eagles. They are known to invade homes for food and occasionally shelter.");
                    break;
                case 4:
                    txt.setText("The giant panda, or panda (Ailuropoda melanoleuca, literally meaning \"black and white cat-foot\") is a bear native to central-western and south western China.[4] It is easily recognized by its large, distinctive black patches around the eyes, over the ears, and across its round body. Though it belongs to the order Carnivora, the panda's diet is 99% bamboo.");
                    break;
                case 5:
                    txt.setText("Rabbits (or, colloquially, bunnies) are small mammals in the family Leporidae of the order Lagomorpha, found in several parts of the world. There are eight different genera in the family classified as rabbits, including the European rabbit (Oryctolagus cuniculus), cottontail rabbits (genus Sylvilagus; 13 species), and the Amami rabbit (Pentalagus furnessi, an endangered species on Amami ÅŒshima, Japan)");
                    break;
                }
                            }

            public void onNothingSelected(CarouselAdapter<?> parent) {          } 

        }
        );*/

    }
     } 
```

LogCat 错误日志：

```
02-14 14:38:09.137: E/InputEventReceiver(996): Exception dispatching input event.
02-14 14:38:09.148: E/MessageQueue-JNI(996): Exception in MessageQueue callback: handleReceiveCallback
02-14 14:38:09.207: E/MessageQueue-JNI(996): java.lang.NullPointerException
02-14 14:38:09.207: E/MessageQueue-JNI(996):    at com.carouseldemo.main.MainActivity$1.onItemClick(MainActivity.java:50)
02-14 14:38:09.207: E/MessageQueue-JNI(996):    at com.carouseldemo.controls.CarouselAdapter.performItemClick(CarouselAdapter.java:261)
02-14 14:38:09.207: E/MessageQueue-JNI(996):    at com.carouseldemo.controls.Carousel.onSingleTapUp(Carousel.java:967)
02-14 14:38:09.207: E/MessageQueue-JNI(996):    at android.view.GestureDetector.onTouchEvent(GestureDetector.java:588)
02-14 14:38:09.207: E/MessageQueue-JNI(996):    at com.carouseldemo.controls.Carousel.onTouchEvent(Carousel.java:311)
02-14 14:38:09.207: E/MessageQueue-JNI(996):    at android.view.View.dispatchTouchEvent(View.java:7239)
02-14 14:38:09.207: E/MessageQueue-JNI(996):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2168)
02-14 14:38:09.207: E/MessageQueue-JNI(996):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1903)
02-14 14:38:09.207: E/MessageQueue-JNI(996):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2174)
02-14 14:38:09.207: E/MessageQueue-JNI(996):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1917)
02-14 14:38:09.207: E/MessageQueue-JNI(996):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2174)
02-14 14:38:09.207: E/MessageQueue-JNI(996):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1917)
02-14 14:38:09.207: E/MessageQueue-JNI(996):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2174)
02-14 14:38:09.207: E/MessageQueue-JNI(996):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1917)
02-14 14:38:09.207: E/MessageQueue-JNI(996):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2174)
02-14 14:38:09.207: E/MessageQueue-JNI(996):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1917)
02-14 14:38:09.207: E/MessageQueue-JNI(996):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2174)
02-14 14:38:09.207: E/MessageQueue-JNI(996):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1917)
02-14 14:38:09.207: E/MessageQueue-JNI(996):    at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1953)
02-14 14:38:09.207: E/MessageQueue-JNI(996):    at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1405)
02-14 14:38:09.207: E/MessageQueue-JNI(996):    at android.app.Activity.dispatchTouchEvent(Activity.java:2410)
02-14 14:38:09.207: E/MessageQueue-JNI(996):    at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1901)
02-14 14:38:09.207: E/MessageQueue-JNI(996):    at android.view.View.dispatchPointerEvent(View.java:7419)
02-14 14:38:09.207: E/MessageQueue-JNI(996):    at android.view.ViewRootImpl.deliverPointerEvent(ViewRootImpl.java:3220)
02-14 14:38:09.207: E/MessageQueue-JNI(996):    at android.view.ViewRootImpl.deliverInputEvent(ViewRootImpl.java:3165)
02-14 14:38:09.207: E/MessageQueue-JNI(996):    at android.view.ViewRootImpl.doProcessInputEvents(ViewRootImpl.java:4292)
02-14 14:38:09.207: E/MessageQueue-JNI(996):    at android.view.ViewRootImpl.enqueueInputEvent(ViewRootImpl.java:4271)
02-14 14:38:09.207: E/MessageQueue-JNI(996):    at android.view.ViewRootImpl$WindowInputEventReceiver.onInputEvent(ViewRootImpl.java:4363)
02-14 14:38:09.207: E/MessageQueue-JNI(996):    at android.view.InputEventReceiver.dispatchInputEvent(InputEventReceiver.java:179)
02-14 14:38:09.207: E/MessageQueue-JNI(996):    at android.os.MessageQueue.nativePollOnce(Native Method)
02-14 14:38:09.207: E/MessageQueue-JNI(996):    at android.os.MessageQueue.next(MessageQueue.java:125)
02-14 14:38:09.207: E/MessageQueue-JNI(996):    at android.os.Looper.loop(Looper.java:124)
02-14 14:38:09.207: E/MessageQueue-JNI(996):    at android.app.ActivityThread.main(ActivityThread.java:5039)
02-14 14:38:09.207: E/MessageQueue-JNI(996):    at java.lang.reflect.Method.invokeNative(Native Method)
02-14 14:38:09.207: E/MessageQueue-JNI(996):    at java.lang.reflect.Method.invoke(Method.java:511)
02-14 14:38:09.207: E/MessageQueue-JNI(996):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-14 14:38:09.207: E/MessageQueue-JNI(996):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-14 14:38:09.207: E/MessageQueue-JNI(996):    at dalvik.system.NativeStart.main(Native Method)
02-14 14:38:09.247: D/AndroidRuntime(996): Shutting down VM
02-14 14:38:09.247: W/dalvikvm(996): threadid=1: thread exiting with uncaught exception (group=0x40a70930)
02-14 14:38:09.327: E/AndroidRuntime(996): FATAL EXCEPTION: main
02-14 14:38:09.327: E/AndroidRuntime(996): java.lang.NullPointerException
02-14 14:38:09.327: E/AndroidRuntime(996):  at com.carouseldemo.main.MainActivity$1.onItemClick(MainActivity.java:50)
02-14 14:38:09.327: E/AndroidRuntime(996):  at com.carouseldemo.controls.CarouselAdapter.performItemClick(CarouselAdapter.java:261)
02-14 14:38:09.327: E/AndroidRuntime(996):  at com.carouseldemo.controls.Carousel.onSingleTapUp(Carousel.java:967)
02-14 14:38:09.327: E/AndroidRuntime(996):  at android.view.GestureDetector.onTouchEvent(GestureDetector.java:588)
02-14 14:38:09.327: E/AndroidRuntime(996):  at com.carouseldemo.controls.Carousel.onTouchEvent(Carousel.java:311)
02-14 14:38:09.327: E/AndroidRuntime(996):  at android.view.View.dispatchTouchEvent(View.java:7239)
02-14 14:38:09.327: E/AndroidRuntime(996):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2168)
02-14 14:38:09.327: E/AndroidRuntime(996):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1903)
02-14 14:38:09.327: E/AndroidRuntime(996):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2174)
02-14 14:38:09.327: E/AndroidRuntime(996):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1917)
02-14 14:38:09.327: E/AndroidRuntime(996):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2174)
02-14 14:38:09.327: E/AndroidRuntime(996):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1917)
02-14 14:38:09.327: E/AndroidRuntime(996):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2174)
02-14 14:38:09.327: E/AndroidRuntime(996):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1917)
02-14 14:38:09.327: E/AndroidRuntime(996):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2174)
02-14 14:38:09.327: E/AndroidRuntime(996):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1917)
02-14 14:38:09.327: E/AndroidRuntime(996):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2174)
02-14 14:38:09.327: E/AndroidRuntime(996):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1917)
02-14 14:38:09.327: E/AndroidRuntime(996):  at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1953)
02-14 14:38:09.327: E/AndroidRuntime(996):  at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1405)
02-14 14:38:09.327: E/AndroidRuntime(996):  at android.app.Activity.dispatchTouchEvent(Activity.java:2410)
02-14 14:38:09.327: E/AndroidRuntime(996):  at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1901)
02-14 14:38:09.327: E/AndroidRuntime(996):  at android.view.View.dispatchPointerEvent(View.java:7419)
02-14 14:38:09.327: E/AndroidRuntime(996):  at android.view.ViewRootImpl.deliverPointerEvent(ViewRootImpl.java:3220)
02-14 14:38:09.327: E/AndroidRuntime(996):  at android.view.ViewRootImpl.deliverInputEvent(ViewRootImpl.java:3165)
02-14 14:38:09.327: E/AndroidRuntime(996):  at android.view.ViewRootImpl.doProcessInputEvents(ViewRootImpl.java:4292)
02-14 14:38:09.327: E/AndroidRuntime(996):  at android.view.ViewRootImpl.enqueueInputEvent(ViewRootImpl.java:4271)
02-14 14:38:09.327: E/AndroidRuntime(996):  at android.view.ViewRootImpl$WindowInputEventReceiver.onInputEvent(ViewRootImpl.java:4363)
02-14 14:38:09.327: E/AndroidRuntime(996):  at android.view.InputEventReceiver.dispatchInputEvent(InputEventReceiver.java:179)
02-14 14:38:09.327: E/AndroidRuntime(996):  at android.os.MessageQueue.nativePollOnce(Native Method)
02-14 14:38:09.327: E/AndroidRuntime(996):  at android.os.MessageQueue.next(MessageQueue.java:125)
02-14 14:38:09.327: E/AndroidRuntime(996):  at android.os.Looper.loop(Looper.java:124)
02-14 14:38:09.327: E/AndroidRuntime(996):  at android.app.ActivityThread.main(ActivityThread.java:5039)
02-14 14:38:09.327: E/AndroidRuntime(996):  at java.lang.reflect.Method.invokeNative(Native Method)
02-14 14:38:09.327: E/AndroidRuntime(996):  at java.lang.reflect.Method.invoke(Method.java:511)
02-14 14:38:09.327: E/AndroidRuntime(996):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-14 14:38:09.327: E/AndroidRuntime(996):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-14 14:38:09.327: E/AndroidRuntime(996):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T15:04:16.350

看起来你的 logcat 中的第 50 行是指这一行：

```
Toast.makeText(MainActivity.this, 
    String.format("%s has been clicked",    
    ((CarouselItem)parent.getChildAt(position)).getName()), 
    Toast.LENGTH_SHORT).show(); 
```

我猜它从这部分得到一个 NullPointerException ：

```
((CarouselItem)parent.getChildAt(position)).getName()) 
```

我建议使用调试器运行它，在这一行添加一个断点，然后查看所有内容以查看失败的原因。甚至可能在上面一行的变量中捕获 CarouselItem 以便于分析：

```
CarouselItem item = (CarouselItem) parent.getChildAt(position); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T15:17:57.447

parent.getChildAt(i) 将给出父级的第 i 个 VISIBLE 子视图，而不是代表第 i 个项目的子视图。

让我换一种方式解释。假设您的 AdapterView 有 100 个项目。您可能期望 parent.getChildAt(99) 将给出表示最后一项的视图：这是错误的。对于性能问题，AdapterView 为当前需要显示的项目创建子视图。例如，如果您在列表顶部滚动，并且显示了 5 个项目，则 AdapterView 可能有 5 或 6 个子视图。在这种情况下， parent.getChildAt(99) 将给出空引用。

实际上，单击的子视图已经通过 onItemClicked 方法给出：第二个“视图”参数。您可以按如下方式修改您的代码。

```
Toast.makeText(MainActivity.this, 
    String.format("%s has been clicked",    
    ((CarouselItem)view).getName()), 
    Toast.LENGTH_SHORT).show(); 
```

编辑：

此外，以下代码片段也很可疑。

```
 LayoutInflater inflater = getLayoutInflater();
        View layout = inflater.inflate(R.layout.toast_layout,
                                       (ViewGroup) findViewById(R.id.toast_layout_root));

        TextView text = (TextView) layout.findViewById(R.id.selected_item);
        text.setText("This is a custom toast"); 
```

在这里，您将 toast_layout.xml 膨胀到一个视图中，并将其添加到已附加到应用程序窗口的另一个视图 (R.id.toast_layout_root) 中。这将导致从 toast_layout.xml 膨胀的视图显示在主应用程序窗口中。

但是，您使用膨胀视图作为 toast 的布局，该布局呈现为单独的窗口。

# performance - 如何加快 asp.net mvc 4 编译和开发中的首次加载？

> ID：14877632
> 
> 赞同：2
> 
> 时间：2013-02-14T14:58:05.863
> 
> 标签：performance, asp.net-mvc-4

我正在使用库存的 ASP.net MVC 4 模板，并没有做任何数据库密集型的事情。

每次我进行更改时，重新编译并重新加载页面（即在完全编译完成后刷新页面）初始加载需要 12-15 秒。如果我再次刷新页面，则需要 0.150 才能加载。

我确实有一个非 SSD 驱动器的解决方案，它连接到我的系统驱动器，它是一个 SSD。该解决方案由一个 mvc 4 项目和一个（空）测试项目组成。

知道如何解决最初的缓慢问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T19:45:11.870

有趣的是，问题的根本原因是一些恶意软件在备份和添加 Jetrbrains 的 dotCover 后溜走了。我修复了恶意软件并卸载了 dotCover，一切都很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T15:02:20.763

[我遵循了这个网站上](http://blog.lavablast.com/post/2010/12/01/Slash-your-ASPNET-compileload-time.aspx)列出的一些技巧，但感觉将临时 asp.net 文件构建到 RAM 磁盘似乎有很大帮助。

# c++ - 自定义类的cin参数

> ID：14877634
> 
> 赞同：0
> 
> 时间：2013-02-14T14:58:17.023
> 
> 标签：c++, operator-overloading, istream

我创建了一个自定义类 Person，它从工作的角度保存有关人员的信息。

```
class Person
{
    char* _name;
    char* _lName;
    char* _department;
    int _age, _salary;
public:
    Person(char* name, char* lName, char* department, int age, int salary);
    Person(void);
    ~Person(void);

    char* getFName(){return _name;};
    char* getLName(){return _lName;};
    char* getDepartment(){return _department;};
    int getSalary(){return _salary;};

    friend std::ostream &operator<<(std::ostream &cout, Person &person);
    friend std::istream &operator>>(std::istream& is, Person &person);
}; 
```

我希望完成的是，使用 cin 以逗号分隔的 char* 的形式将数据流式传输到此类中。

cin 过载：

```
std::istream &operator>>(std::istream &is, Person &person)
{
    char* tmp="";
    is >> tmp;
    int i=0;
    int number=0;
    char** dataArray=new char*;
    dataArray[0]="";
    while(tmp[i]!= '\0')
    {
        if(tmp[i]==',')
        {
            number++;
            dataArray[number]="";
        }
        else
            dataArray+=tmp[i];
        i++;
    }
    person._name=dataArray[0];
    person._lName=dataArray[1];
    person._department=dataArray[2];
    person._salary=(int)dataArray[3];
    person._age=(int)dataArray[4];
    return is;
} 
```

但是，程序在以下位置停止并出现错误；

```
 is >> tmp; 
```

我以前根本没有操作过 istream，这个错误可能是由于错误的推理造成的。帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T15:02:08.703

您需要在此处指定大小：

```
char** dataArray=new char*; 
```

我认为你需要：

```
char** dataArray=new char*[5]; 
```

您泄漏了此变量的内存。您似乎正在操纵这个数组的元素，就好像它们是 一样`std::string`，但它们是简单的 char 数组。您需要分配和重新分配它们。为避免所有这些问题，请使用`std::vector`and `std::string`。`operator<<`你的错误与它本身无关。

# tfs - 如何设置警报通知以覆盖 TFS 自定义签入策略？

> ID：14877637
> 
> 赞同：1
> 
> 时间：2013-02-14T14:58:21.323
> 
> 标签：tfs

我为我的 TFS 2010 制定了 TFS 自定义签入策略。不幸的是，您没有为签入策略禁用覆盖功能的规定。我担心的是，如何为我自己的自定义签入策略设置电子邮件警报？我在我的 TFS 上启用了多个签入策略。我只需要针对一项特定策略被覆盖的警报。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T15:48:06.993

tfs 电动工具有一个警报资源管理器。

其中一个警报是“签入策略覆盖的特定文件夹”，它应该可以满足您的需要。

# javascript - CKEDITOR.appendTo(div_id) 没有直接插入到 html

> ID：14877638
> 
> 赞同：0
> 
> 时间：2013-02-14T14:58:24.567
> 
> 标签：javascript, jquery, dialog, ckeditor

我正在创建一个带有对话框的 ckeditor 插件。在对话框中，我有一个 ckeditor。我使用`CKEDITOR.appendTo(div_id)`的时候是不直接推送到html的。这样我就不能设置了`innerHTML`。

```
onLoad : function(){
    // textareas == the textareas in the dialog
    var textareas = $('.cke_dialog_ui_input_textarea');
    // features_id == the id of the first div in the td
    var features_id = textareas[1].parentNode.parentNode.parentNode.getAttribute('id');
    // features == first div in td
    var features = textareas[1];
    // features_innerhtml == html from the textarea
    var features_innerhtml = textareas[1].innerHtml;

    // create ckeditor for features inside features_id div
    CKEDITOR.appendTo(features_id);//here it should have created the iframe etc.

    // change textarea style to 'display:none;'
    features.setAttribute('style','display:none;');

    //because the ckeditor iframe does not yet exists i can not insert my html later on             
    //select iframe
    var iframe = $('#' + features_id).children().children().children().children()[3];

    //set inner html of iframe
    iframe.contentWindow.document.childNodes[1].childNodes[1].innerHTML(features_innerhtml);
} 
```

当脚本完成并且 ckeditor 对话框完全加载时，ckeditor 出现，但它是空的。我究竟做错了什么？

**根据要求编辑**
html：

```
<div class="cke cke_reset_all cke_1 cke_editor_ckeditor_dialog" dir="ltr" lang="nl" role="application">
<table class="cke_dialog cke_browser_webkit cke_ltr" aria-labelledby="cke_dialog_title_138" style="position: fixed; top: 337px; left: 751.5px; z-index: 10010;" role="dialog">
    <tbody>
        <tr>
            <td role="presentation">
                <div class="cke_dialog_body" role="presentation">
                    <div id="cke_dialog_title_138" class="cke_dialog_title" role="presentation" style="-webkit-user-select: none;">Blok aanmaken</div>
                    <a id="cke_dialog_close_button_138" class="cke_dialog_close_button" href="javascript:void(0)" title="Sluiten" role="button" style="-webkit-user-select: none;"><span class="cke_label">X</span>
                    </a>
                    <div id="cke_dialog_tabs_138" class="cke_dialog_tabs" role="tablist">
                        <a class="cke_dialog_tab cke_dialog_tab_selected" cke_first="" title="Tekst" id="cke_tab1_155" href="javascript:void(0)" tabindex="-1" hidefocus="true" role="tab" style="-webkit-user-select: none;">Tekst</a>
                        <a class="cke_dialog_tab" cke_last="" title="Style" id="cke_tab2_160" href="javascript:void(0)" tabindex="-1" hidefocus="true" role="tab" style="-webkit-user-select: none;">Style</a>
                    </div>
                    <table class="cke_dialog_contents" role="presentation">
                        <tbody>
                            <tr>
                                <td id="cke_dialog_contents_138" class="cke_dialog_contents_body" role="presentation" style="width: 400px; height: 200px;">
                                    <div role="tabpanel" id="cke_154_uiElement" class="cke_dialog_ui_vbox cke_dialog_page_contents" style="width: 100%;" aria-labelledby="cke_tab1_155" name="tab1" aria-hidden="false">
                                        <table role="presentation" cellspacing="0" border="0" style="width:100%;" align="left">
                                            <tbody>
                                                <tr>
                                                    <td role="presentation" class="cke_dialog_ui_vbox_child">
                                                        <div role="presentation" id="cke_144_uiElement" class="cke_dialog_ui_text">
                                                            <label class="cke_dialog_ui_labeled_label" id="cke_143_label" for="cke_142_textInput">Titel</label>
                                                            <div class="cke_dialog_ui_labeled_content" role="presentation">
                                                                <div class="cke_dialog_ui_input_text" role="presentation">
                                                                    <input class="cke_dialog_ui_input_text" id="cke_142_textInput" type="text" aria-labelledby="cke_143_label">
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td role="presentation" class="cke_dialog_ui_vbox_child">
                                                        <div role="presentation" id="cke_147_uiElement" class="cke_dialog_ui_textarea ckeditor_features">
                                                            <label class="cke_dialog_ui_labeled_label" id="cke_146_label" for="cke_145_textarea">Kenmerken</label>
                                                            <div class="cke_dialog_ui_labeled_content" role="presentation">
                                                                <div class="cke_dialog_ui_input_textarea" role="presentation">
                                                                    <textarea class="cke_dialog_ui_input_textarea" id="cke_145_textarea" rows="5" cols="20" aria-labelledby="cke_146_label" style="display:none;"></textarea>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td role="presentation" class="cke_dialog_ui_vbox_child">
                                                        <div role="presentation" id="cke_150_uiElement" class="cke_dialog_ui_textarea ckeditor_introduction">
                                                            <label class="cke_dialog_ui_labeled_label" id="cke_149_label" for="cke_148_textarea">Introductie</label>
                                                            <div class="cke_dialog_ui_labeled_content" role="presentation">
                                                                <div class="cke_dialog_ui_input_textarea" role="presentation">
                                                                    <textarea class="cke_dialog_ui_input_textarea" id="cke_148_textarea" rows="5" cols="20" aria-labelledby="cke_149_label"></textarea>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td role="presentation" class="cke_dialog_ui_vbox_child">
                                                        <div role="presentation" id="cke_153_uiElement" class="cke_dialog_ui_text">
                                                            <label class="cke_dialog_ui_labeled_label" id="cke_152_label" for="cke_151_textInput">Meerinfo Link</label>
                                                            <div class="cke_dialog_ui_labeled_content" role="presentation">
                                                                <div class="cke_dialog_ui_input_text" role="presentation">
                                                                    <input class="cke_dialog_ui_input_text" id="cke_151_textInput" type="text" aria-labelledby="cke_152_label">
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <div role="tabpanel" id="cke_159_uiElement" class="cke_dialog_ui_vbox cke_dialog_page_contents" style="width: 100%; display: none;" aria-labelledby="cke_tab2_160" name="tab2" aria-hidden="true">
                                        <table role="presentation" cellspacing="0" border="0" style="width:100%;" align="left">
                                            <tbody>
                                                <tr>
                                                    <td role="presentation" class="cke_dialog_ui_vbox_child">
                                                        <div role="presentation" id="cke_158_uiElement" class="cke_dialog_ui_text color {hash:true}">
                                                            <label class="cke_dialog_ui_labeled_label" id="cke_157_label" for="cke_156_textInput">Achtergrond Kleur</label>
                                                            <div class="cke_dialog_ui_labeled_content" role="presentation">
                                                                <div class="cke_dialog_ui_input_text" role="presentation">
                                                                    <input class="cke_dialog_ui_input_text" id="cke_156_textInput" type="text" aria-labelledby="cke_157_label">
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td id="cke_dialog_footer_138" class="cke_dialog_footer" role="presentation">
                                    <table role="presentation" id="cke_166_uiElement" class="cke_dialog_ui_hbox cke_dialog_footer_buttons">
                                        <tbody>
                                            <tr class="cke_dialog_ui_hbox">
                                                <td class="cke_dialog_ui_hbox_first" role="presentation">
                                                    <a style="undefined" href="javascript:void(0)" title="OK" hidefocus="true" class="cke_dialog_ui_button cke_dialog_ui_button_ok" role="button" aria-labelledby="cke_162_label" id="cke_163_uiElement"><span id="cke_162_label" class="cke_dialog_ui_button">OK</span>
                                                    </a>
                                                </td>
                                                <td class="cke_dialog_ui_hbox_last" role="presentation">
                                                    <a style="undefined" href="javascript:void(0)" title="Annuleren" hidefocus="true" class="cke_dialog_ui_button cke_dialog_ui_button_cancel" role="button" aria-labelledby="cke_164_label" id="cke_165_uiElement"><span id="cke_164_label" class="cke_dialog_ui_button">Annuleren</span>
                                                    </a>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </td>
        </tr>
    </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:21:22.520

我将 appendTo 更改为以下内容：

```
CKEDITOR.appendTo(features_id, null, features_innerhtml); 
```

起初我只指定了它应该在其中创建 ckeditor 的 div。在[文档](http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.html)中 它说如下：

`CKEDITOR.appendTo(elementOrId, config, data)`
我没有配置项，所以我用于我使用`null`的数据`features_innerhtml`。
所以我在 appendTo 中指定了数据，而不是稍后设置 innerHTML :)

# algorithm - 平衡分区（找到一组正整数的两个分区之间的最小和）

> ID：14877639
> 
> 赞同：1
> 
> 时间：2013-02-14T14:58:25.303
> 
> 标签：algorithm

我正在使用*动态*问题解决。

我的`C`代码如下：

```
int balanced_partition( int arr[] , int n){

    int i,j;
    int sum=0;
    for(i=0;i<n;i++)
        sum+=arr[i];

    int p[n+1][sum+1];
    for(i=0;i<n+1;i++){
            for(j=0;j<sum+1;j++){
                    if(i==0)
                            p[0][j]= 0;
                    else if(j==0)
                            p[i][0]=1;
                    else{
                            if( (i-1>=0 && p[i-1][j]==1) ||  ( i-1>=0 && j-arr[i]>=0 && p[i-1 [j-arr[i]]==1) )
                                    p[i][j]=1;
                            else
                                    p[i][j]=0;
                            }
                    }
            }

    int min=INT_MAX;
    int half_sum=sum/2;
    for(i=half_sum;i>=0;i--)
            if(p[n][half_sum-i]==1 && min >(half_sum-i) ){
                    min = half_sum-i;
                    }
    return min;

} 
```

但是我得到了数组 = [1,5] 的错误输出。我正在使用 [参考问题 7 中给出的想法来解决](http://people.csail.mit.edu/bdean/6.046/dp/)

我在哪里做错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T15:15:27.193

当您尝试访问`j-arr[i]`时，错误结果是否定的。

在平衡分区算法中，您假设整数是非负数。所以请像这样更新您的代码：

```
if(arr[i] <= j)
     p[i][j] = max( p[i-1][j] , p[i-1][j-arr[i]] );
else
     p[i][j] = p[i-1][j]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-13T23:48:46.737

我知道现在回答这个问题已经很晚了，但我在代码中看到的问题是由于变量**i**的范围为**[0,n]**（包括 n）：

**代码片段：**

```
if( (i-1>=0 && p[i-1][j]==1) ||  ( i-1>=0 && j-arr[i]>=0 && p[i-1 [j-arr[i]]==1) ) 
```

由于数组的大小是**n**即从**0**到**n-1** & **i**范围从**[0,n]**所以**a[n]** for **i = n**将抛出**ArrayIndexOutOfBoundsException**，所以你必须使用**j - arr[i-1]** in您的代码而不是**j - arr[i]**。

```
if( (i-1>=0 && p[i-1][j]==1) ||  ( i-1>=0 && j-arr[i-1]>=0 && p[i-1 [j-arr[i-1]]==1) ) 
```

# android - Android GCM：在数据库上存储注册 ID 时出现问题

> ID：14877643
> 
> 赞同：1
> 
> 时间：2013-02-14T14:58:40.653
> 
> 标签：android, mysql, database, google-cloud-messaging

Google 的 GCM 服务器将为每个应用程序/设备对颁发一个 GCM registrationId。因此，如果某个用户在两台设备上拥有您的应用程序，则每台设备都会有自己的registrationId。

我面临的问题是我将这些registrationId存储在一个有两列的表上：

```
+---------+-----------+
|userId   |userGCMId  +
+---------+-----------+ 
```

其中 userId 是我的应用程序中用户的 ID，无论他使用什么设备都是一样的，而 userGCMId 是 Google 发布的registrationId。

如果我将 userId 作为该表的主键，如果用户将我的应用程序安装在第二台设备上，我将无法存储用户的 userGCMId，因为两者的 userId/主键相同（因此第二个设备不会收到我的推送通知）。

我考虑过使用两列来组合主键，但是 GCM 的registrationId 可以大到 4k（根据 Google 工程师的说法），所以理论上它可能长达 4,000 个字符，这对于主键来说太大了钥匙。

**我正在考虑的解决方案：**

1.  由于实际上大多数 GMC registrationId 是 512 个字符或更短，我想我可以将该列设为 varchar(512) 并将其用作主键的一部分。

2.  另一种选择是将 userGCMid 列保留为文本，并添加第三列，即 id 来自的设备，并制作主键（userId，device）。

你们中有人过去解决过这个问题吗？关于最佳方法的任何想法？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T13:51:34.650

我最终使用了选项 2，它似乎工作正常。

您可能还想使用设备的 MAC 地址而不是其型号，因为这将允许用户在相同型号的两台设备上安装应用程序并在两者上接收推送通知。

# java - 在 MongoDB 中强制执行模式验证

> ID：14877653
> 
> 赞同：4
> 
> 时间：2013-02-14T14:59:06.197
> 
> 标签：java, mongodb

我正在寻找方法来验证插入 MongoDB 的数据是否与模式匹配，例如具有所有必需的字段和正确的数据类型。我知道 Mongo 本身是无模式的，但如果我可以在将数据传递给 Mongo 驱动程序之前在应用程序级别验证数据，那就太好了。

我看过 JSON 架构。我最大的犹豫是我只能找到一个用于模式验证的 Java 库，我不知道我是否应该信任它，我更喜欢 Apache 或 Google 支持的库。

我还查看了 Apache Thrift、Avro 和 Protocol Buffers，它们不是专门的验证框架，但它们都有一个模式的概念。如果有一种方法可以背负其中一个来执行验证，我会很感兴趣。

有什么建议么？还是我应该接受 Mongo 的无模式，甚至不去尝试验证数据？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-11-09T04:42:27.537

在即将发布的**Mongo 3.2 版本**中，他们添加了[文档验证](https://docs.mongodb.org/master/core/document-validation/)（[幻灯片](http://www.slideshare.net/andrewjamesmorgan/document-validation-in-mongodb-32)）。

[您可以使用验证器](https://docs.mongodb.org/manual/release-notes/3.2/#validator)选项为每个集合指定验证规则，该选项使用几乎所有 mongo 查询运算符（除了`$geoNear`、`$near`、`$nearSphere`、`$text`和`$where`）。您可以在我的一个[答案](https://stackoverflow.com/a/33602507/1090562)中阅读更多相关信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-19T21:36:28.120

不确定您是否仍在寻找，但对象文档映射器 (ODM) 可以解决问题。

我已经检查了[Morphia](https://github.com/mongodb/morphia)或[Spring Data - MongoDB](http://www.springsource.org/spring-data/mongodb)，它们都会处理您的类型安全问题，因为它们会将您的文档直接映射到 Java 类。

# jquery - 如何在按钮确定点击确认jquery后显示表单问题

> ID：14877666
> 
> 赞同：0
> 
> 时间：2013-02-14T14:59:47.740
> 
> 标签：jquery

我想在按钮确定点击确认 jquery.thanks 后显示表单问题...

```
$("input[value='Close']").click(function () {
                var ValidComment = document.getElementById('comment_update').value;
                if (ValidComment == '') {
                    $("#ErrorUpdate").text("Comment is Required");                
                    return false;
                }
                else {
                    return confirm('Are you sure to close this ticket ?'); 
                    --show form here-??               
                }
            }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T15:03:00.687

我认为这应该可行，但我无法对其进行测试：

```
 $("input[value='Close']").click(function () {

            if ($("#comment_update").val() == '') {
                $("#ErrorUpdate").text("Comment is Required");                
                return false;
            }
            else {
               if (confirm('Are you sure you want to close this ticket?')) {
               //Show form code goes here
               $("#form").show();              
            }
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T15:03:40.663

这也可以

```
$("input[value='Close']").click(function () {
    var ValidComment = document.getElementById('comment_update').value;
    if (ValidComment == '') {
        $("#ErrorUpdate").text("Comment is Required");                
        return false;
    }
    else {
        var result = confirm('Are you sure to close this ticket ?');
        if (result) {
            $("form-here").css("display", "block");
            return true;
        }
        return false;
    }
}); 
```

# android - Android：有人可以帮助我使用这个模型进行活动的布局吗？

> ID：14877668
> 
> 赞同：0
> 
> 时间：2013-02-14T14:59:48.597
> 
> 标签：android, android-layout, xamarin.android

我是 Android 开发的新手，但多年来我一直在做图形设计和 ui。我在 FluidUI 中创建了一个模型，我正在尝试弄清楚如何布置它。

我已经开始使用带有一些嵌套 LinearLayouts 的 RelativeLayout，但我不确定对于我模拟的这个设计来说什么是最好的。

下面来看看设计。

[安卓应用模型](https://s3.amazonaws.com/SwiftreachTesting/MobileMockup.png)

顶部是用户使用下拉菜单登录后的名称。

下一部分是一组简单地启动其他活动的按钮。

在那下面是一个清单。我不确定是否应该使用 Listview 或只是将其布置出来，因为所有项目都是静态的。唯一改变的是数字。该列表中的每个项目都需要转到另一个活动。

然后在底部是一个应该显示在所有活动上的栏。

如果这很重要，我将使用 Mono for Android 和 Visual Studio 2010。我尝试了一些嵌套，但还没有走得很远。我可以用一种相对布局来完成这一切吗？我应该使用多个线性布局吗？

谢谢你的帮助。:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T20:05:52.147

> 在内部使用带有一些嵌套 LinearLayouts 的 RelativeLayout

绝对可以正常工作。当归结为计算布局宽度、重量等时，它确实会对性能产生一些影响，但除非明显缓慢，否则不会考虑到这一点。看看一些 Android 布局技巧：[#1](http://android-developers.blogspot.com/2009/02/android-layout-tricks-1.html)、[#2](http://android-developers.blogspot.com/2009/02/android-layout-tricks-2-reusing-layouts.html)和[#3](http://android-developers.blogspot.com/2009/03/android-layout-tricks-3-optimize-by.html)。您可以使用 a`RelativeLayout`作为 root `ViewGroup`，然后相应地对齐每个组件。

> 使用 Listview 或只是布局

在您的情况下，布置它可能会更好，因为它只有五行。为了简单起见，您不会牺牲太多重用代码。

布局可能与此类似：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android">
<!-- Top -->
<TextView
        android:id="@+id/name"
        android:layout_alignParentTop="true"/>
<Spinner
        android:id="@+id/dropdown"
        android:layout_toRightOf="@+id/name"/>
<!-- Four buttons -->
<Button
        android:id="@+id/button1" 
        android:layout_below="@+id/name"/>
<Button
        android:id="@+id/button2"
        android:layout_alignBaseline="@+id/button1"
        android:layout_toRightOf="@+id/button1"/>
<Button
        android:id="@+id/button3" 
        android:layout_below="@+id/button1"/>
<Button
        android:id="@+id/button4" 
        android:layout_toRightOf="@+id/button3"
        android:layout_alignBaseline="@+id/button3"/>
<!-- The "List" -->
<TextView
        android:id="@+id/activity" 
        android:layout_below="@+id/button3"/>
<TextView
        android:id="@+id/counter" 
        android:layout_alignBaseline="@+id/activity"
        android:layout_alignParentRight="true"/>
</RelativeLayout> 
```

# button - 在 Sencha touch 的 Ext.TabPanel 中添加刷新按钮

> ID：14877675
> 
> 赞同：1
> 
> 时间：2013-02-14T15:00:08.563
> 
> 标签：button, extjs, sencha-touch-2, refresh

如何在同一个 Ext.TabPanel 中再添加一个按钮（刷新按钮）。小米代码在这里：

```
Ext.define('myApp.view.Twitter',{
  extend: 'Ext.TabPanel',
  xtype: 'twitter', 

   config: {
    title:'Twitter',
    iconCls: 'twitter2',

styleHtmlContent: true, 
items: [
    {
        title: 'Twitts',
        html: 'Lista de twitts'
    },
    {
        title: 'Mapa',
        html: 'Lugar de twitts'
    }
 ] 
```

} });

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T15:28:56.543

您只需要再添加 1 个项目到您的`tab panel`:

```
items: [
    {
        title: 'Twitts',
        html: 'Lista de twitts'
    },
    {
        title: 'Mapa',
        html: 'Lugar de twitts'
    },
    {
        iconCls: 'refresh',
        title: 'Refresh',
        html: 'Refresh'
    }
] 
```

`tabbar`请注意，如果您使用的是 2.0 版，除非您停靠在底部，否则您将无法看到图标图像。如果这是 2.1 版应该没问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T11:30:05.273

解决方案：

```
Ext.define('portofolio.view.Twitter',{
  extend: 'Ext.TabPanel',
  xtype: 'twitter', 

  config: {
    title:'Twitter',
    iconCls: 'twitter2',

    styleHtmlContent: true, 
   tabBar:{
            dockedItems:[{ 
                xtype: 'button',
                iconMask: true,
                dock: 'right',
                ui: 'action',
                stretch: false,
                style: 'height:35px;margin-top:5px;',
                handler: function(){
                    alert('Refresh panel');    
                }
            }]
        },
            items: [
                {
                    iconCls: 'refresh', 

                },
                {     
                    title: 'Twitts',
                    html: 'Aqui van los twitts'
                },
                {                  
                    title: 'Mapa',
                    html: 'Aqui encuntras el oro'
                }           
            ]
        },
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T16:17:02.437

我假设，通过**刷新**按钮，你想刷新里面显示的数据`tabPanel`。您可以使用`toolbar`和设置可能在整个应用程序中有用的不同按钮。我已经设置了这个工作[小提琴](http://www.senchafiddle.com/#x6RZV)。它`refresh`在右上角有按钮。

希望有帮助。我也在此处添加代码-

```
launch: function() {
        var view = Ext.create('Ext.Container', {
            fullscreen: true,
            layout: {
                type: 'vbox'
            },
            items: [
                {

                    xtype:'toolbar',
                    docked:'top',
                    layout:{
                        type: 'vbox',
                        pack:'center',
                        align: 'right'
                    },
                    flex:1,
                    items:[
                        {
                            xtype:'button',
                            iconMask:true,
                            iconCls:'refresh',

                            handler:function(){
                                console.log('Refresh Button Tapped');
                                alert('Refresh Button Tapped');
                            }
                        }
                    ]

                },
                {
                    xtype:'panel',
                    layout:'fit',
                    flex:2,
                    items:[
                        {
                            xtype:'tabpanel',
                            tabBarPosition:'bottom',
                            defaults:{
                                styleHtmlContent:true
                            },
                            items:[
                                {
                                    title: 'Twitts',
                                    iconCls: 'home',
                                    html: 'Lista de twitts'
                                },
                                {
                                    title: 'Mapa',
                                    iconCls: 'maps',
                                    html: 'Lugar de twitts'
                                }
                            ]
                        }
                    ]
                }
            ]
        });
    } 
```

# php - PHP - 按索引循环

> ID：14877676
> 
> 赞同：0
> 
> 时间：2013-02-14T15:00:13.413
> 
> 标签：php, arrays, loops, indexing

我使用 PHP 并有一个如下所示的数组：

```
Array
(
    [34] => Array
    (
        [slug] => my_slug
        [title] => my_title
    )
    [33] => Array
    (
        [slug] => my_slug2
        [title] => my_title2
    )
) 
```

我还需要循环出集合，带有值的键 34 和带有值的键 33。我可以用 foreach 将它们循环出来，但就我而言，我不能使用 foreach 循环。

**问题 - 按索引循环？**

因为在我的情况下我不能使用 foreach 循环，所以我需要想出一些可以按索引循环它们的东西。

**我自己的想法**

如果我可以通过索引获取数组键就可以了。有没有可能，怎么做？

```
<?php print_r( $my_array[index][0] ); ?>
<?php print_r( $my_array[index][1] ); ?> 
```

**原因**

我不能使用 foreach 的原因是我依赖于一个计数器。如果计数器显示 3，它想获得第四个键（数组以 0 开头）。

**示例 1**

```
$counter = 1; 
```

然后它应该返回 [33] 的内容，因为它在索引 1 上。

**示例 2**

```
$counter = 0; 
```

然后它应该返回 [34] 的内容，因为它在索引 0 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T15:09:35.557

# 解决方案

从数组中取出键，`array_keys`然后使用计数器来查找要迭代的索引。然后，您可以使用简单的 foreach 循环来迭代子数组。

```
$keys     = array_keys($array);
$index    = $keys[$counter];
$subArray = $array[$index];
foreach($subArray as $key => $value) {
    // do stuff
} 
```

## 解释

对于您在示例中给出的数组`array_keys($array)`返回

```
array(
    0 => 34,
    1 => 33
); 
```

所以我们可以在这个新数组上使用 counter 来找出我们想要迭代的实际数组中的索引。

```
$index = $keys[$counter]; 
```

所以如果`$counter = 0`那时`$index`就是现在`34`。现在它很简单，可以`$index`在原始数组上使用来获取我们想要迭代的子数组。

```
$subArray = $array[$index]; 
```

在这个例子`$counter`中`0`，变量`$subArray`现在成立

```
array(
    'slug'  => 'my_slug'
    'title' => 'my_title'
); 
```

# 不使用 foreach

使这个答案适应没有`foreach`循环的工作相当简单。阅读[array_keys](http://php.net/manual/en/function.array-keys.php)文档并思考该函数如何允许其他类型的循环使用字符串键迭代数组。

# 参考

[array_keys 文档](http://php.net/manual/en/function.array-keys.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T15:09:46.797

> 我不能使用 foreach 的原因是我依赖于一个计数器。如果计数器显示 3，它想获得第四个键（数组以 0 开头）。

没问题：

```
var_dump($array[array_keys($array)[3]]); 
```

（这需要 PHP 5.4，因为数组取消引用语法）

*对于 PHP 5.3 或更早版本：*

```
$keys = array_keys($array);
var_dump($array[$keys[3]]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T15:11:52.900

可能这就是你要找的...

```
$counter = 3; // for example
$keys = array_keys($my_array);
$needed_entry = $keys[ $counter ];

print_r( $my_array[ $needed_entry ] ); 
```

# javascript - 通过 JavaScript 函数显示图像

> ID：14877677
> 
> 赞同：0
> 
> 时间：2013-02-14T15:00:16.863
> 
> 标签：javascript

我正在编写一个基本上翻转硬币的javascript函数，我试图让它返回图像，但到目前为止还没有运气。我使用 img src 标签为变量赋值，但不知何故我怀疑这不起作用，我想和你们核实一下这是如何完成的？

这是我的代码：

```
<script type = text/javascript>

        var headsCount = 0;
        var tailsCount = 0;     

        function start()
        {
            var buttonTwo = document.getElementById("coinButton");
            buttonTwo.addEventListener("click", coinResult, false);
        }

        function flip()
        {
            var faceValue = Math.floor((Math.random()*2)+1);                

            if (faceValue == 1)
            {
                headsCount++;
                return true; 
            }
            else
            {
                tailsCount++;
                return false; 
            }
        }

        function coinResult()
        {
            var result = document.getElementById("coinToss");
            var coinCount = document.getElementById("countNumber");

            <img name = "Heads" src = "images/Heads.png" />

            if (flip() == true)
            {
                result.innerHTML = <img src = "images/Heads.png" alt = "Heads" />
            }
            else
            {
                result.innerHTML = <img src = "images/Tails.png" alt = "Tails" />
            }

            coinCount.innerHTML = "Heads Count: " + headsCount + " Tails Count: " + tailsCount;

        }

        window.addEventListener("load", start, false);

    </script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T15:08:07.453

innerHTML 属性必须接收代表您的 html 的字符串，因此：

```
result.innerHTML = "<img src='images/heads.png' alt='heads' />"; 
```

如果你想在你的 html 中使用引号而不是单引号（是的，你可以，而且有些人更喜欢它），你必须转义引号（通过在它之前添加一个反斜杠），以便 javascript 引擎可以理解引号是文本并且不标记字符串的开头或结尾，例如：

```
result.innerHTML = "<img src=\"images/heads.png\" alt=\"heads\" />"; 
```

PS：我正在考虑将您的 coinToss 元素作为 div。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-08-10T18:22:44.010

结果行当然需要引号 " 和 '，并用 / 转义

```
result.innerHTML = "<img src = 'images/\Heads.png' alt = 'Heads' />" 
```

或使用 .src 和 .alt 重新加载 img：

```
<html>
<head>
<script type=text/javascript>

function addEventtoButton(){
var element = document.getElementById('testing');
element.onclick = function coinResult () {
var a;
a = document.getElementById("coin");
if (false) {                        // or set if to true, or flip() as in original example
a.src='images/\Heads.png';
a.alt='Heads';          
} else {
a.src='images/\Tails.png';
a.alt='Tails';          
} };
}

</script>
</head>
<body onload='addEventtoButton()'>
<button id='testing'>testme</button>
<img name='coin' id='coin' src='images\Heads.jpg'>
</body>
</html> 
```

# winapi - 将资源数据绑定到自定义winjs控件

> ID：14877682
> 
> 赞同：2
> 
> 时间：2013-02-14T15:00:26.720
> 
> 标签：winapi, windows-8, windows-store-apps, winjs

我正在尝试创建一个自定义占位符控件。这是代码摘录：

```
(function () {
    var Placeholder = WinJS.Class.define(function ctor(elem, options) {
        this.element = elem || document.createElement('div');
        this.element.winControl = this;

        WinJS.UI.setOptions(this, options);

        this.init();
    },
    {
        element: {
            get: function () {
                return this._element;
            },
            set: function (value) {
                this._element = value;
            }
        },

        placeholder: {
            get: function () {
                return this._placeholder;
            },
            set: function (value) {
                this._placeholder = value;

                this._placeholderElement.textContent = value;
            }
        },

        placeholderClass: {
            get: function () {
                return this._placeholderClass;
            },
            set: function (value) {
                this._placeholderClass = value;

                this._placeholderElement.classList.add(value);
            }
        },

        _placeholderElement: null,

        init: function () {
            this._addPlaceholder();
        },

        _addPlaceholder: function () {
            /* Code to add placeholder. */
        }
    });

    WinJS.Namespace.define("ControlX", { Placeholder: Placeholder });
})(); 
```

我正在尝试以这种方式在 html 中使用此控件：

```
<div data-win-control="ControlX.Placeholder" data-win-res="{winControl:{placeholder:'resHeight'}}"><input type="text"/></div> 
```

当我使用`data-win-res`属性设置占位符值时，出现异常：

> “无法设置未定义或空引用的属性‘占位符’”

根据这篇文章： [如何本地化 WinJS 控件](http://msdn.microsoft.com/en-us/library/windows/apps/jj673579.aspx)，我们也可以将资源字符串绑定到 winControl 属性。

我究竟做错了什么？

有没有其他方法可以将资源字符串绑定到 winControl 属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T03:58:58.650

我正在用 C# 和 XAML 开发 Windows 8 应用程序，所以不知道确切的解决方案是什么，但我认为这个回复可能有效：

我建议，与其只在参数中创建内部类和定义方法，不如将每个方法和类分开并组合在一个方法中，并为该全新的自定义 WinJS 控件赋予适当的名称。在给出该控件的名称后，您应该通过它在 DIV 标记中的名称来调用它。

我不是很强大并且用它的代码练习过，最好不要提供代码，对不起。但我敢肯定，通过给出名字并通过该名字呼唤将有助于一切顺利......

**（如果您认为这没有给出答案，请原谅。但我认为这可能会有所帮助）**

# web-services - SSIS Web 服务 - 写入 Web 服务

> ID：14877683
> 
> 赞同：2
> 
> 时间：2013-02-14T15:00:27.737
> 
> 标签：web-services, ssis

我已经成功地能够在 SSIS 中使用 web 服务任务，但我无法弄清楚如何写入 web 服务，有人可以帮我解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-12-14T14:46:36.733

这个问题有点含糊，无法给出明确的答案，但是，猜测您的问题是您已经能够从 Web 服务 (GET) 读取数据，但您现在想要编写 ( POST/PUT) 数据到 Web 服务。

如果是这样，您最好的选择是使用脚本任务并使用 C#（或 VB）来调用所述 Web 服务。对于 GET 请求，我也建议使用此方法，而不是 SSIS Web 服务任务，它不处理“较新”的 Web 服务协议，例如 oAuth 身份验证。

粗略样本如下：

```
 using System.Net
      using System.IO          

      string url 
            = "http://webservicehere.org";

        // create the request
        HttpWebRequest request 
            = (HttpWebRequest)HttpWebRequest.Create(url);

        // set the method to POST
        request.Method 
            = "POST";

        // set the content type, usually application/json or application/xml
        request.ContentType 
            = "application/json";

        // handle authentication, in this case the web service
        // requires the authentication token to be passed in as a
        // header called "Cookie"
        request.Headers.Add("Cookie", SqlAuthCookie);

        // get the stream object to use to write the request data
        StreamWriter requestWriter 
            = new StreamWriter(request.GetRequestStream());

        // write the data to the web service
        // where (data) is the JSON/XML that you are
        // sending to the endpoint
        requestWriter.Write(data);

        // close the connection upon completion
        requestWriter.Close();

        try
        {
            // read the response received from the web service
            HttpWebResponse webResponse = (HttpWebResponse)request.GetResponse();

            // code to handle the response goes here
            // i.e. deserialise json/xml to strongly typed objects

        }
        catch (WebException we)
        {
            // catch any exceptions thrown by the web service here
        }
        catch (Exception e)
        {
            // catch other exceptions here
        } 
```

# c++ - 为什么 RegOpenKeyEx 让我打开注册表编辑器中不存在的键？

> ID：14877691
> 
> 赞同：2
> 
> 时间：2013-02-14T15:00:52.620
> 
> 标签：c++, windows-7, registry, regedit

在 Microsoft Visual C++ 中，我有以下代码可以访问注册表中的路径。然后我用 读取键的`Installed`值`RegQueryValueEx`。到目前为止一切顺利，该值似乎是`1`，这与我的系统上存在 Visual C++ 2010 运行时相对应。（它恰好是一段代码来检测 c++ 运行时的存在）。

现在，当我检查时`regedit.exe`，`HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\VisualStudio\10.0`我没有`VC`在树中看到。

这怎么可能？我已经复制/粘贴了这个问题中的所有路径和代码，所以它们必须是正确的。

C++ 应用程序中的代码：

```
HKEY RegistryKey;
DWORD ErrorCode;
DWORD RegDwordValue = 0;
DWORD RegDwordValueSize = sizeof(DWORD);
if((ErrorCode = RegOpenKeyExA(HKEY_LOCAL_MACHINE,
                "SOFTWARE\\Microsoft\\VisualStudio\\10.0\\VC\\VCRedist\\x86",
                0, //Reserved
                KEY_READ,
                &RegistryKey)) != ERROR_SUCCESS)
{
    //Either the key does not exists, or registry access is denied. Anyway, detection did not succeed
    std::cout << "Could not read registry path:\n\t" << lpcRegistryPath << "\n\tError code: " << ErrorCode;
    return false;
}
if((ErrorCode = RegQueryValueEx(    RegistryKey,
                                    lpcValueToQuery,
                                    NULL,
                                    NULL,
                                    (LPBYTE)&RegDwordValue,
                                    &RegDwordValueSize
                                    )) != ERROR_SUCCESS)
{
    std::cout << "Could not read registry value, error " << ErrorCode;
    return false;
} 
```

编辑：我在下面添加了注册表的导出

```
Windows Registry Editor Version 5.00

[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\VisualStudio\10.0]

[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\VisualStudio\10.0\Debugger]
"FEQARuntimeImplDll"="C:\\Program Files\\Microsoft Visual Studio 10.0\\Common7\\Packages\\Debugger\\X64\\Microsoft.VisualStudio.Debugger.Runtime.Impl.dll"

[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\VisualStudio\10.0\Packages]

[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\VisualStudio\10.0\Packages\{4A0C6509-BF90-43DA-ABEE-0ABA3A8527F1}]

[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\VisualStudio\10.0\Packages\{4A0C6509-BF90-43DA-ABEE-0ABA3A8527F1}\Settings]

[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\VisualStudio\10.0\Packages\{4A0C6509-BF90-43DA-ABEE-0ABA3A8527F1}\Settings\Tools]

[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\VisualStudio\10.0\Packages\{4A0C6509-BF90-43DA-ABEE-0ABA3A8527F1}\Settings\Tools\SSISScript]
"ScriptLanguage"="CSharp" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T15:06:31.390

如果您在运行受[注册表重定向](http://msdn.microsoft.com/en-us/library/ms724072.aspx)或[注册表虚拟化](http://msdn.microsoft.com/en-us/library/aa965884.aspx)影响的 32 位应用程序的 64 位系统上，则会发生您所描述的情况。如果您的 VC++ 应用程序是 32 位并且您正在运行 64 位版本的 regedit，或者您的应用程序是 64 位并且您正在运行 32 位版本的 regedit，那么他们将有效地查看/操作不同的区域注册表。这可以解释为什么他们看不到对方的数据。

# macos - 无效的类名 - OSX 上 MonoDevelop 中的 Haxe

> ID：14877694
> 
> 赞同：0
> 
> 时间：2013-02-14T15:00:54.857
> 
> 标签：macos, monodevelop, haxe

我正在尝试在 osx 上的 MonoDevelop 中编译一个简单的 hello world Haxe 示例。

```
class Test {
    static function main() {
        trace("Hello World !");
    }
} 
```

当我尝试构建时，我收到错误：“无效的类名测试”。

我尝试将 hx 和 hxml 文件中的类重命名为其他内容，但得到相同的错误，但现在使用新的类名。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T09:18:06.850

好的，我想通了。这是因为 .hx 文件是 utf-8 编码的，需要进行 ansi (windows) 编码。

您可以通过从终端运行以下命令来解决问题（首先导航到包含您的文件的目录！）。

```
sudo iconv -f UTF-8 -t WINDOWS-1253 test.hx > test.hx 
```

# android - 如何防止仅针对布局而不是整个屏幕/活动的方向更改

> ID：14877701
> 
> 赞同：4
> 
> 时间：2013-02-14T15:01:05.153
> 
> 标签：android, layout, orientation

我需要一个子布局（可以是任何布局，例如`FrameLayout`或`RelativeLayout`）来忽略方向变化并始终保持横向。但不是它的父级或任何其他同级布局/视图，它们应该相应地改变它们的方向。

因此，我不能使用`setRequestedOrientation()`or `android:screenOrientation="landscape"`。或者它将锁定整个屏幕或活动的方向。我只需要锁定这个单一的布局。

我的布局 XML：

```
RelativeLayout (Parent)
  TextView
    FrameLayout/RelativeLayout <-- this need to be locked
      FrameLayout
        Button 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T15:26:06.723

扩展您想要保持纵向的布局类并重写 dispatchConfiurationChanged(Configuration) 方法，如下所示。

```
public void dispatchConfigurationChanged(Configuration newConfig) {
    Configuration c = new Configuration(newConfig); // copy
    c.orientation = ORIENTATION_PORTRAIT; // lock to portrait
    super.dispatchConfigurationChanged(c);
} 
```

确保您的应用程序配置为不会在方向更改时重新启动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T15:55:19.010

这可能取决于您所说的“不改变方向”是什么意思。但是，我认为最好的起点是为不应更改的部分创建自己的类。所以布局xml现在有两个文件：

main_layout.xml

```
RelativeLayout (Parent)
    TextView
        MyNonChangingLayout 
```

my_non_changeing_layout.xml

```
 RelativeLayout
     FrameLayout
         Button 
```

您创建的位置

```
MyNonChangingLayout extends FrameLayout {
    MyNonchangingLayout(Context content) {
        super(context);
        myContext = context;
        makeFromXML();
    }

private void makeFromXML() {
    LayoutInflater inflater = (LayoutInflater)myContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    topView =  inflater.inflate(MyR.layout.my_non_changing_layout, this, false);

    // Get all the sub Views here using topView.findViewById()

    // Do any other initiation of the View you need here

    // Make sure you this otherwise it won't actually appear!
    super.addView(topView);
}

/*
 * Then, you can override quite a lot of the layout's calls and
 * enforce behaviour on the children. Two examples:
 */

// To specifically catch orientation changes
@Overridge
onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);
    // You could create the layout here by removing all views and rebuilding them
    // Perhaps by having a two xml layouts, one of which is "90 degrees out" ...
    // If you do make the layot here, make sure you don't clash with the constructor code!
    switch (newConfig.orientation) {
        case ORIENTATION_LANDSCAPE:
            // Make the layout for this orientation (as per above)
            break;
        case ORIENTATION_PORTRAIT:
            // Make the layout for this orientation (as per above)
            break;
        case ORIENTATION_SQUARE:
            // Make the layout for this orientation (as per above)
            break;
    }
}

//to handle size changes to enforce aspect ratios on children:
@override
protected void onSizeChanged (int w, int h, int oldw, int oldh) {
    super.onSizeChanged(w, h, oldw, oldh);

    int viewWidth = //something I've determine
    int viewHeight = //something I've determined
    setViewsize(viewToHaveSizedControlled, viewWidth, viewheight);
}

// The post thing means that it doesn't crash no matter which thread it is
// executed on ...
private void setViewsize(final View v, final int w, final int h) {
    post(new Runnable() {
        public void run() {
            ViewGroup.LayoutParams lp = v.getLayoutParams();
            lp.width = w;
            lp.height = h;
            v.setLayoutParams(lp);
    }});
} 
```

}

然后你可以很好地执行你想要的任何东西。如果您可以更具体地了解要在子区域上强制执行的行为，我可能会建议更具体的代码。

你可能想做的一件事是保持

# xcode - 如何将 xcode4.5.1 升级到 4.6？

> ID：14877702
> 
> 赞同：0
> 
> 时间：2013-02-14T15:01:09.493
> 
> 标签：xcode, ios6.1

无论如何将现有的 xcode4.5.1 升级到 xcode4.6 而不下载 1.65GB 的完整文件下载。我想从事 iOS6.1 开发，所以我想通过 xcode 升级以支持新的 iOS 版本。除了下载这个巨大的文件，有没有办法只获取更新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T18:11:21.590

据我了解，您必须下载并安装 xcode 4.6 的 .dmg 文件。没有“升级到最新版本”。下载 4.6 后，您仍将拥有 4.5（如果您不想要，可以删除）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T17:37:12.340

xcode 4.6 中有很多新功能，所以如果不下载 1.65 文件，您将无法升级到 4.5 到 4.6

请参阅发行说明 [https://developer.apple.com/library/mac/#releasenotes/DeveloperTools/RN-Xcode/](https://developer.apple.com/library/mac/#releasenotes/DeveloperTools/RN-Xcode/)

# vb.net - GetObject 返回 H_RESULT E_FAIL

> ID：14877704
> 
> 赞同：0
> 
> 时间：2013-02-14T15:01:22.127
> 
> 标签：vb.net, com, constructor, ms-word

我对这段代码有疑问，老实说，我不太确定问题出在哪里。最初的问题是我编写的应用程序打开了一个 word 实例，但是如果机器上已经有一个 word 实例，它只会打开第二个实例，但它不会插入我在该实例中创建的文档. 我最终得到的是两个窗口，一个是 Word 本身，没有文档，一个是 Word 和文档。他们原来运行的 word 应用程序仍然正常运行，在它自己的 Word/文档组合中，它应该有。我试图通过 getObject 获取正在运行的 Word 实例来解决这个问题，但它只是不断返回失败。

我读到你必须给单词焦点然后失去焦点才能让它与 ROT 一起列出，但即使等待 10 分钟后，它仍然返回以下错误：

AnswerWizard = {"错误 HRESULT E_FAIL 已从对 COM 组件的调用中返回。"}

我想知道我是否缺少关于 getObject 以及链接到导致此错误的另一个 Office 应用程序实例的能力？

**信息：**

Windows 7的

词 2003

桌面 VB 应用程序

**代码：**

```
Private wordApp As Word.Application

Public Sub New()
    Try
        wordApp = CType(GetObject(, "Word.Application"), Word.Application)
    Catch ex As Exception
        wordApp = New Word.Application
    End Try
End Sub 
```

注意：尝试使用和不使用 CType 都没有关系。如果没有运行单词的实例，它确实有效，但这只是因为它属于我的例外。

**问题：**

如果我尝试链接到已经运行的 Word 实例，代码将运行而不会引发错误，但我得到 AnswerWizard = {"Error HRESULT E_FAIL has been returned from a call to a COM component."}。然后我的代码继续打开一个空白单词和单词/文档的实例，总共有两个窗口，而应该只有一个。我错过了关于 getObject 的一些东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T22:31:29.393

在[Office 自动化服务器的 GetObject 和 CreateObject 行为中](http://support.microsoft.com/kb/288902)，Microsoft 建议避免使用 GetObject()。我同意这一点：除非您需要在用户会话中与文档进行交互，否则打开第二个文档可能会受到用户的干扰。一个独立的实例可以在不可见的情况下继续工作，或者锁定用户界面。

我很熟悉另一个 Word 实例运行时的问题，尽管是在 VBA 环境中。

许多在 Office 应用程序文档中看起来像对象的关键字实际上是 Application 对象的方法 - Word 中最常见的方法之一是`Selection`. 使用这些方法指定您的应用程序对象至关重要：`wordApp.Selection`，否则该方法将应用于正在运行的 Word 的第一个实例，通常会导致错误。

# android - Android 模拟器：操作位图时出现 java.lang.OutOfMemoryError

> ID：14877707
> 
> 赞同：0
> 
> 时间：2013-02-14T15:01:28.000
> 
> 标签：android, out-of-memory, image

我有一个操作位图以将 RGB 格式转换为灰度的例程。

它通常工作正常，但是当我尝试在大小为 1088kb 的位图上使用它时，它给了我这个错误：

```
java.lang.OutOfMemoryError 
```

我正在使用模拟器。1088kb不是很大的图，怎么会耗尽内存呢？

确切地说，调用有问题的代码的应用程序在后台堆栈上包含另一个 Activity，该 Activity 具有图片缩略图的 ListView。

这是方法：

```
public Bitmap toGrayscale(Bitmap bmpOriginal)
{        
    int width, height;
    height = bmpOriginal.getHeight();
    width = bmpOriginal.getWidth();    

    Bitmap bmpGrayscale = Bitmap.createBitmap(width, height, Bitmap.Config.RGB_565);
    Canvas c = new Canvas(bmpGrayscale);
    Paint paint = new Paint();
    ColorMatrix cm = new ColorMatrix();
    cm.setSaturation(0);
    ColorMatrixColorFilter f = new ColorMatrixColorFilter(cm);
    paint.setColorFilter(f);
    c.drawBitmap(bmpOriginal, 0, 0, paint);
    return bmpGrayscale;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T15:10:24.383

您在内存中管理位图的效率非常低，并且您可能存在内存泄漏（当您使用完位图或将它们保留在不会被垃圾收集的活动中时不会从内存中释放它们）。Android 开发人员有一个用于正确位图管理的页面：

[http://developer.android.com/training/displaying-bitmaps/index.html](http://developer.android.com/training/displaying-bitmaps/index.html)

**您可以尝试增加模拟器上的堆大小。**

[android模拟器上的内存不足错误，但在设备上没有](https://stackoverflow.com/questions/7427587/out-of-memory-error-on-emulator-but-not-on-device)

**监控模拟器上的堆大小：**

[https://stackoverflow.com/a/7427803/445131](https://stackoverflow.com/a/7427803/445131)

**摆脱你的内存泄漏：**

[哪些 Android 工具和方法最适合查找内存/资源泄漏？](https://stackoverflow.com/questions/1147172/what-android-tools-and-methods-work-best-to-find-memory-resource-leaks)

# actionscript-3 - swf模块的编译日期

> ID：14877713
> 
> 赞同：1
> 
> 时间：2013-02-14T15:01:44.147
> 
> 标签：actionscript-3, apache-flex, flex3

我在项目的主 swf 文件中实现了此代码（[可以 ActionScript 判断 SWF 何时发布吗？](https://stackoverflow.com/questions/2656827/can-actionscript-tell-when-a-swf-was-published/14877633#14877633)）。它工作得很好。但是我在我的应用程序中加载了许多模块。这些模块会根据需要进行编译以进行更改。我希望能够获得当前加载的模块的编译日期。

基本上，我有一个主要的 Flex“应用程序”，然后它根据用户选择根据需要加载和卸载各种模块（单个 swf 文件）。我需要能够对这些模块中的每一个进行控制，以获取特定 swf 文件的编译日期。

有没有办法将当前的 swf 文件传递​​给函数以获取该 swf 的编译日期？

保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T17:28:27.503

是的，使用该`Loader.contentLoaderInfo.bytes`属性，该`Loader`对象是您用来加载 SWF 文件的对象。

您可以更改函数以接受 SWF 文件的字节作为参数：

```
getCompilationDate(bytes:Array):void{
    ...
}

getCompilationDate(stage.loaderInfo.bytes)
getCompilationDate(moduleLoader.contentLoaderInfo.bytes) 
```

# java - 使用 JPA 作为字符串持久化 DOM 树

> ID：14877714
> 
> 赞同：-1
> 
> 时间：2013-02-14T15:01:46.907
> 
> 标签：java, xml, hibernate, dom, jpa

我有以下问题。我有一个 JPA 实体，其中包含 org.w3c.dom.Document 类型的属性。我不能，我也不想单独保存 DOM 树的每个对象。我更想要的是将 DOM 树表示的 XML 转换为 String 并将此 String 保存到数据库中。当我重新加载对象时，我希望我的对象解析 DOM 树并重新初始化属性。JPA可以做到这一点吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T17:17:36.533

经过一些额外的搜索，我终于找到了答案。您只需要告诉 JPA 将其保存为 Blob，其中包含元素内的 xml 文档。

编辑：事实证明，这不起作用。我想我在这里找到了一个可行的解决方案：[Storing Objects in columns using Hibernate JPA](https://stackoverflow.com/questions/2121860/storing-objects-in-columns-using-hibernate-jpa)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T15:05:55.320

当然有可能。

您需要做的是将 dom 树视为[自定义类型](https://stackoverflow.com/questions/3828675/how-to-use-custom-type-in-jpa-column)。

# printing - 通过命令行向 Star TSP143LAN 热敏票据打印机发送打印指令

> ID：14877716
> 
> 赞同：5
> 
> 时间：2013-02-14T15:01:51.377
> 
> 标签：printing, tcp, cmd, thermal-printer

我正在尝试通过以太网连接向 Star TSP100（TSP143LAN 型号）热敏打印机发送打印指令。

我使用它的 LAN ip 和端口 9100 打开与打印机的原始数据连接没有问题，这似乎是为此目的打开的端口，但是一旦连接我就无法执行任何操作，我怀疑我正在使用命令不正确，但我对我打算如何使用它们感到困惑。

我在[http://www.starmicronics.com/support/Mannualfolder/linemode_cm_en.pdf](http://www.starmicronics.com/support/Mannualfolder/linemode_cm_en.pdf)找到了一些文档，这些文档似乎适用于正确的模型，但它们的命令参考含糊不清。

到目前为止，我已经尝试使用纯文本命令（例如键入“LF”并点击回车以提供单行），但没有任何结果。

我还尝试使用键盘上明显的键，在此示例中，我通过按键盘上的 ESC 键后跟文档中的随附字符来使用“ESC”命令，但也没有任何结果。

**编辑：**

我还将控制字符作为十六进制值和十进制值发送，没有任何不同的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T12:36:41.940

部分 Star 系列打印机无法通过命令行直接通讯，必须通过自带的软件驱动程序使用。

在这种情况下，解决方案是在打印机上模拟 COM 端口，使您的通信通过其驱动程序进行过滤，从而“开箱即用”工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-23T20:23:31.853

TSP143 是 FuturePRNT 型号。如果打印机处于 FuturePRNT 模式，则无法使用行模式命令。

如果它可以在线路模式下配置，您可以通过直接以太网连接向它发送线路模式命令。与将 ESC/POS 命令发送到 Epson LAN 收据打印机的方式非常相似。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-06-25T19:11:53.030

STAR SP500 针式**打印机本身既可爱又可靠**。

但是**找到他们的英文文档是非常混乱**和绝望的。所以这里有你需要知道的一切，所以你不必去搜索。

对于 STAR SP500 点阵和可能的其他类似 STAR 收据打印机，当与 USB 并行电缆连接时，**并且当模块/驱动程序未运行/安装**时，从命令行使用它很简单：

```
 sudo chown you:you /dev/usb/lp0
  echo -e "SOME SAMPLE TEXT\n\n" > /dev/usb/lp0
  echo -e "\x1b\x4d MORE SAMPLE TEXT" > /dev/usb/lp0 
```

最后一行包含一个“转义序列”代码，用于将字体更改为比默认字体更时尚的复古/像素字体。上面的命令已经过测试并在新的 Linux liveUSB 上运行 - 无需配置！谢谢你***。它使用打印机上预装的固件将文本或转义序列转换为格式化文本。

所有其他转义序列 - 例如粗体、突出显示或更大的文本和其他位 - 可以在稍微不同模型的手册的“控制代码”一章中找到，这里： http: [//www.starmicronics.com /support/mannualfolder/sp300pm.pdf](http://www.starmicronics.com/support/mannualfolder/sp300pm.pdf)

**注意**：通过或任何基于 GUI 的程序安装`cups`驱动程序和使用打印机`lpr`似乎会删除设备文件，`/dev/usb/lp0`因此使用上述简单命令使打印机完全无法使用，直到它被拔下并重新插入，并重新注册为`/dev/usb/lp0`文件。还应该注意的是，这样做时`/dev/usb/lp0`文件的所有权将被重置，因此您可能想要添加一个`crontab`或`udev`规则，或者只是**将所需的用户添加到`lp`Debian 及其衍生产品的组中。**

**注意二**：要使用上述命令，打印机必须处于'STAR Line'模式，我认为是新买的默认情况下，但如果不是，则只需一两分钟。有关 STAR SP500 的说明，请参见第 114 页：http: [//www.starasia.com/%5CDownload%5CManual%5Csp500_um_en.pdf](http://www.starasia.com/%5CDownload%5CManual%5Csp500_um_en.pdf)

这不是对原始问题的确切答案，但我花了几个小时从命令行研究这台打印机的工作原理，现在我知道我真的很想与像我一样被困住的人分享这个，因为我有点喜欢现在我已经了解了它。

# jquery - 没有新数据时如何在实时高图中停止 ajax 调用

> ID：14877717
> 
> 赞同：0
> 
> 时间：2013-02-14T15:01:55.163
> 
> 标签：jquery, ajax, highcharts

我正在使用 highcharts 框架的实时更新版本，并在我的数据库上进行了更新我想知道是否有方法可以在没有新数据添加到图表时向我发出警报。当我的数据库中没有插入新数据时，ajax 调用已经停止

```
 function requestData() {
            $.ajax ({
            type:"get" ,
    url: "<?php echo 
             CController::createUrl('sens/GetSensorsDataLive') ?>",

            data: {"sensId" : "<?php echo $modelsens['node_id'] ?>" },
               dataType: "json",

             success: function(point) {

          var series = chart.series[0],

          shift = series.data.length > 25 ;
               chart.series[0].addPoint(eval(point),true, shift); // add the point
              setTimeout(requestData,1000);    // call it again after one second
    /// what I should add here 

                                   },

         cache: false
       });

      } 
```

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T15:55:00.717

你确定它运行`success`？当您遇到一些错误时，您应该运行`error`.
所以，也请来电`requestData`。`error`

```
success: function(point) {

    var series = chart.series[0],

    shift = series.data.length > 25 ;
    chart.series[0].addPoint(eval(point),true, shift); // add the point
    setTimeout(requestData,1000);    // call it again after one second
},

error: function() {
    alert('no data');
    setTimeout(requestData,1000);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T15:19:28.013

那么它应该检查你的数据是否有长度，所以如果是空的，那么你可以在 Highcharts 中将数据设置为空。

# matlab - 根据信号控制 simulink 可变时间步长

> ID：14877718
> 
> 赞同：1
> 
> 时间：2013-02-14T15:01:55.663
> 
> 标签：matlab, simulink

我在 Simulink 中有一个频率斜坡（sin wt，其中 w 随时间增加）并且想使用可变时间步长求解器。在模拟开始时，时间步长可能很大；最后，它们必须很小。

我尝试调整相对容差，但它似乎并没有真正产生有用的效果：最后的时间步长太长，正弦波每个周期只有 2-3 个点。

有没有办法直接或间接地将时间步长与正弦波分辨率联系起来（例如，在模拟中添加块以某种方式导致时间步长随着频率的增加而减小）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T16:44:58.457

据我所知，没有办法将这两者联系起来，因为没有一种机制可以从模型中控制求解器。我猜你尝试过僵硬和非僵硬的求解器？即使您的问题可能不僵硬，但僵硬的求解器可能会更好。每当我需要这类数据时，我都会使用采样时间非常短的固定步长求解器，但你可以让它更友好一点。我会尝试以下方法：

使用`sim`命令设置仿真停止时间。

```
simOut = sim('model', 'TimeEnd',10000); 
```

您可以设置一个改变正弦波的模型，如下所示：

![简单模型](../Images/08363fa2a761ea4c3d802a53b8776b73.png)

您可以在每次模拟后更改`logspace`边界，这样您就会有一个循环，例如：

模拟模型收集 tout、yout 等数据改变块离散部分的采样时间，只需使用单个变量。

我想你明白了，如果不告诉我！

！

# c# - 如何使用 PropertyInfo.SetValue 方法（对象、对象）设置可空属性的值

> ID：14877722
> 
> 赞同：3
> 
> 时间：2013-02-14T15:02:09.093
> 
> 标签：c#, generics

这是我的代码。它抛出异常“'MyEnum.CommonCoreStandard'类型的对象无法转换为'System.Nullable`1 [System.Byte]'类型。” 同时设置第二个属性“Prop2”的值。我正在使用反射的概念将一种类型“BlEntity”转换为另一种类型“UiEntity”

```
public class BlEntity
{
    //CommonCoreStandard is an enum
    public CommonCoreStandard Prop1 { get; set; }
    public CommonCoreStandard? Prop2 { get; set; }
}

public class UiEntity
{
    public byte Prop1 { get; set; }
    public byte? Prop2 { get; set; }
}

 public void ConvertBlToUi()
    {
        var source = new BlEntity(CommonCoreStandard.KeyIdeasAndDetails, CommonCoreStandard.IntegrationOfKnowledge);
        var target = new UiEntity();

        TypeConverter.ConvertBlToUi(source,target);
 }

    public static void ConvertBlToUi<TBl, TUi>(TBl entitySource, TUi entityTarget)
    {
        var blProperties = typeof(TBl).GetProperties().Select(p => new { Name = p.Name.ToLower(), Property = p }).ToArray();

        var uiProperties = typeof(TUi).GetProperties().Select(p => new { Name = p.Name.ToLower(), Property = p });

        foreach (var uiProperty in uiProperties)
        {
            var value = blProperty.Property.GetValue(entitySource);
            uiProperty.Property.SetValue(entityTarget, value);
        }

    } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-14T16:31:06.740

```
 public static void ConvertBlToUi<TBl, TUi>(TBl entitySource, TUi entityTarget)
    {
        var blProperties = typeof(TBl).GetProperties().Select(p => new { Name = p.Name.ToLower(), Property = p }).ToArray();

        var uiProperties = typeof(TUi).GetProperties().Select(p => new { Name = p.Name.ToLower(), Property = p });

        foreach (var uiProperty in uiProperties)
        {
            var value = blProperty.Property.GetValue(entitySource);
            var t = Nullable.GetUnderlyingType(uiProperty.Property.PropertyType) ?? uiProperty.Property.PropertyType;
            var safeValue = (value == null) ? null : Convert.ChangeType(value, t);
            uiProperty.Property.SetValue(entityTarget, safeValue);
        }
    } 
```

# php - 自身的 PHP WSDL NuSoap ComplexType 数组

> ID：14877724
> 
> 赞同：2
> 
> 时间：2013-02-14T15:02:11.977
> 
> 标签：php, arrays, wsdl, nusoap, complextype

这就是我想要做的：

```
// Pull in the NuSOAP code
require_once('nusoap.php');
// Create the server instance
$server = new soap_server();

// Initialize WSDL support
$server->configureWSDL('server', 'urn:server');

$server->wsdl->addComplexType(
    'FilterObject',
    'complexType',
    'struct',
    'all',
    '',
    array(
        'myName' => array('name' => 'myName', 'type' => 'xsd:string'),
        'filter' => array('name' => 'filter', 'type' => 'tns:FilterObject[]')
    )
); 
```

我想自己有一个 FilterObject 数组，这样我就可以拥有这个结构。

```
<myName></myName>
<FilterObject>
    <myName></myName>
    <FilterObject>
        <myName></myName>
        <FilterObject>Value</FilterObject>
        <FilterObject>
            <myName></myName>
            <FilterObject>Value</FilterObject>
            <FilterObject>Value</FilterObject>
            ...
        </FilterObject>
        <FilterObject>Value</FilterObject>
        <FilterObject>Value</FilterObject>
        <FilterObject>Value</FilterObject>
        <FilterObject>Value</FilterObject>
        ...
    </FilterObject>
</FilterObject> 
```

我怎样才能做到这一点？

我现在已经挣扎了将近2天。我已经搜索了网络并没有得出任何结论。请帮忙。

编辑：

我就是这样做的。感谢亚历克斯。

我认为不可能做到这一点，因为我认为我会创建一个循环引用。

我还注意到，“FilterObjectArray”在拉入 C# 时作为类对象不可见，尽管“FilterObject”可用。这显然是因为数组只是设置在“FilterObject”对象之上的一个参数，使其成为一个数组。

希望这是有道理的。

```
$server->wsdl->addComplexType(
    'FilterObject',
    'complexType',
    'struct',
    'all',
    '',
    array(
        'myName' => array('name' => 'myName', 'type' => 'xsd:string'),
        'filter' => array('name' => 'filter', 'type' => 'tns:FilterObjectArray')
    )
);

$server->wsdl->addComplexType(
    'FilterObjectArray',  // Name
    'complexType',    // Type Class
    'array',          // PHP Type
    '',               // Compositor
    'SOAP-ENC:Array', // Restricted Base
    array(),
    array(
        'children' => array('ref' => 'SOAP-ENC:arrayType', 'wsdl:arrayType' => 'tns:FilterObject[]'),
    ),
    'tns:FilterObject'
); 
```

# python - ftplib.error_pern 501 没有文件名？

> ID：14877734
> 
> 赞同：1
> 
> 时间：2013-02-14T15:03:11.367
> 
> 标签：python, ftplib

```
 name = raw_input()
    ftp = FTP("")
    ftp.login('','')  #These work fine
    ftp.storbinary("STOR", "%s.txt" % (name)) # I think the issue is here
    ftp.quit() 
```

程序在到达这部分时总是崩溃，我用谷歌搜索并找不到答案，我什至尝试只输入文件名，但结果相同。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T15:12:43.267

如果您查看[文档](http://docs.python.org/2/library/ftplib.html#ftplib.FTP.storbinary)，该`storbinary`方法采用`('STOR filename', <file_object>)`. 上面的问题是您没有完整的`STOR`命令作为您的第一个 ( `command`) 参数。由于您需要将打开的文件处理程序作为`file`参数传递，您可以尝试以下操作：

```
ftp.storbinary("STOR %s.txt" % (name), open("%s.txt" % name, 'rb')) 
```

这将根据 from 的名称创建一个打开的文件处理程序`raw_input`（当您接受输入时，您也需要警惕恶意输入）。假设你处理了这个，上下文管理器可以用来打开文件（并确保它关闭）：

```
my_file = "%s.txt" % name
with open(my_file, "rb") as f:
    ftp.storbinary("STOR %s" % (my_file), f) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T15:13:43.417

看起来您需要更多的“STOR”作为您的第一个参数。

> FTP.storbinary（命令，文件[，块大小，回调，休息]）
> 
> 以二进制传输模式存储文件。命令应该是适当的 STOR 命令：“STOR 文件名”。file 是一个打开的文件对象，它在 EOF 之前使用它的 read() 方法在大小为 blocksize 的块中读取，以提供要存储的数据。blocksize 参数默认为 8192。 callback 是一个可选的可调用单参数，在发送后对每个数据块调用。rest 与 transfercmd() 方法中的含义相同。

# php - 在 Smarty 模板文件中使用 PHP

> ID：14877736
> 
> 赞同：3
> 
> 时间：2013-02-14T15:03:11.477
> 
> 标签：php, smarty

在 Smarty 的早期版本中可以在 Smarty 模板文件中使用 PHP，但现在已弃用。

但是，您仍然可以通过使用向后兼容性包装器来做到这一点。

这使得在模板文件中使用 PHP 成为可能，方法是：

```
{php}echo "Hello World";{/php} 
```

有谁知道这可能导致的任何问题或问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T21:05:09.477

为了将已经给出的评论扩展为完整的答案，嵌入任意 PHP 代码的问题在于它打破了 PHP 和 Smarty 之间的分离。

由于 Smarty 直接编译为 PHP，因此您在 Smarty 中编写的所有内容都*可以*用纯 PHP 编写，并且可能会或可能不会以同样的可读性结束，例如

*   `<?= $foo ?>`因为`{$foo}`很好
*   `<?php if ( $expr ): ?> Hello <?php endif; ?>`for`{if $expr} Hello {/if}`也不错
*   但是`<?= htmlspecialchars(strtoupper($foo ?: 'Hello')); ?>`对于`{$foo|default:'Hello'|upper|escape:html}`眼睛来说有点难

我看到使用 Smarty 的主要优点（如果使用，所有这些基本上都无效`{php}`）：

*   明显的分离 - 给定文件被视为模板总是很清楚，因为它在 Smarty 中。相反，直接在 PHP 函数中输出是错误的总是很清楚的，因为结果应该被传递给模板。
*   强制分离 - 如果您不允许从 Smarty 模板调用这些函数，则应用程序逻辑（如数据库连接或输入验证）不能“泄漏”到您的视图层
*   安全性——您可以让不受信任的前端开发人员/设计人员访问 Smarty 模板，并严格控制他们有权访问的数据和功能。

如果将 Smarty 和 PHP 混合使用，您将保留的唯一好处是 Smarty 语法的那些部分，它们比它们的 PHP 等价物更具可读性，就像我在上面展示的修饰符示例一样。

# postgresql - 触发约束触发器时的微调

> ID：14877740
> 
> 赞同：1
> 
> 时间：2013-02-14T15:03:33.160
> 
> 标签：postgresql, stored-procedures, triggers

在我们的应用程序中（使用 PostgreSQL 引擎盖（目前是 9.1，移动到 9.2）我们在处理某些请求时再次插入（或更新）和更新特定行。所以它看起来像：

```
BEGIN
INSERT(pg), UPDATE(java)
XOR
UPDATE(pg), UPDATE(java)
COMMIT 
```

（进程在 postgres 和 java 之间划分，postgres 获取并插入/更新它可以的内容（其他列 NULL），将控制权返回给 java 应用程序，并更新剩余的列）。

遗憾的是，我们在应用程序中发现了一个设计缺陷，该缺陷可能会导致特定行中的提交后数据不一致（在极其罕见的情况下，多年来一直发生这种情况）。更具体地说，如果 columnA = 'someConstant'，则在 COMMIT 之后 columnB 不能为 NULL（但它可以在第一次插入/更新之后和第二次更新之前！）。

在重新设计应用程序时，我们必须提供一些短期解决方法来防止这种情况发生。

我目前正在玩所谓的约束触发器。它们可以在 COMMIT 之前被 DEFERRED，它们可以进行任意检查和 RAISE EXCEPTION（这很好，因为事务将正常回滚）。问题是我有 (INSERT,UPDATE) 或 (UPDATE,UPDATE) 语句。正如我所说，提到的不一致列在中间有效，但在事务结束时。所以这就是诀窍：触发器应该只为第二条语句触发。我正在挖掘文档，发现 FOR EACH ROW 和 FOR EACH STATEMENT。这无济于事，因为它们都会触发两次，但我必须只触发第二个 UPDATE 语句。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T19:40:34.677

更新的延迟约束触发器可以解决您的问题，但它不应该检查`NEW.column is NULL`，因为`NEW.column`将是更新时的值，而不是提交时的值，即使触发器在提交时触发。

您可以做的是像这样的行级延迟约束触发器（假设`table`有一个名为 的主键`pk`）来测试事务结束时的当前值：

```
DECLARE
 v column_type; -- to fetch the value at the end of the transaction
BEGIN
 SELECT column INTO v FROM table WHERE pk=NEW.pk;
 IF FOUND AND v IS NULL THEN
   RAISE ERROR 'Null not allowed in column';
 END IF
 RETURN new;
END; 
```

如果表没有主键，那么应该找到一些不同的方法来获取最新的列值（不是`ctid`因为它在多次更新场景中不起作用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T09:05:34.550

谢谢丹尼尔。我目前正在测试这个：

```
CREATE OR REPLACE FUNCTION noFalseData() RETURNS trigger LANGUAGE plpgsql AS $$
DECLARE
 v text;
BEGIN
 SELECT column INTO v FROM active.table WHERE othercolumn = 'SOME_CONSTANT' AND pk=NEW.pk;
 IF FOUND AND v IS NULL THEN
   RAISE EXCEPTION 'Null not allowed in column';
 END IF;
 RETURN NULL;
END;
$$;

CREATE CONSTRAINT TRIGGER watchActCampUpd AFTER UPDATE
ON active.table DEFERRABLE INITIALLY DEFERRED
FOR EACH ROW
EXECUTE PROCEDURE noFalseData(); 
```

# ruby-on-rails - 从头开始验证 - cookie 被篡改的安全性如何？

> ID：14877741
> 
> 赞同：3
> 
> 时间：2013-02-14T15:03:33.350
> 
> 标签：ruby-on-rails, ruby-on-rails-3, authentication, omniauth

我正在尝试使用 Omniauth 从头开始​​进行身份验证。

我关注了 Ryan Bate 的[截屏视频](http://railscasts.com/episodes/241-simple-omniauth)。但在我推出一个实现之前，我想了解一些事情。

`helper_method`在他的截屏视频中，他有一个`application_controller`：

```
helper_method :current_user

private

def current_user
  @current_user ||= User.find(session[:user_id]) if session[:user_id]
end 
```

上面的代码，检查`user_id`.

我知道[会话是加密的](http://guides.rubyonrails.org/security.html)（并存储在 cookie 中）。但是，它们是可读的，但不能修改。有人用假的劫持会话有多难`user_id`？是什么阻止了任何人从头开始或通过某种“cookie 注入器”方法（如果存在这种情况）创建 cookie。

我试图了解这些 cookie 是如何受到保护的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T15:07:03.983

会话通常保存在服务器端，唯一通过 cookie 传入/传出客户端的是会话标识符。在该 cookie 中存储实际会话数据将是一个主要的安全漏洞，无论它的加密程度如何。例如，如果您很便宜并使用 rot-13 “加密”，那么用户对数据和 set 进行摆弄将是微不足道的`superuser=1`。

但是对于会话 ID，这是不可能的 - cookie 中没有任何内容可用于摆弄服务器端数据。充其量他们可以发回随机会话 ID 值，并尝试劫持其他人的会话。使用足够大的 ID 哈希，找到另一个会话劫持的机会非常小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T12:41:13.263

我认为您提供的链接给出了最好的答案。并且涵盖了许多更隐蔽的攻击，我更关心敏感应用程序。

在 Rails 中，提交包含会话数据的伪造或篡改的 cookie 是非常困难的，因为 cookie 由服务器签名，并检查提交的 cookie 以确保签名正确。更改 cookie 值需要知道服务器签署 cookie 所用的密钥。

最好的做法是在会话中只存储非常小的位（最好是 ID），如果您担心有人能够从头开始创建包含用户 ID 的会话 cookie，简单的答案是：不要把用户.id 在 cookie 中。而是为每个用户生成一个 GUID，作为 cookie 中的 id。这样您就可以在 URL 中公开 user.id，而不必担心知道某些用户的 id 会允许攻击者伪造一个有用的 cookie。

# wpf - 保存 WPF StackPanel 子项

> ID：14877744
> 
> 赞同：3
> 
> 时间：2013-02-14T15:03:44.613
> 
> 标签：wpf, vb.net, listbox, children, stackpanel

我有以下代码，我在列表框中动态创建了堆栈面板及其子项。堆栈面板的子项值是从文本框条目中获取的

但是我想知道是否可以将每个子值保存到文本或 xml 文件并从表单加载事件中读取它们。

我知道如何将项目添加到常规列表框项目保存并从文本中加载。所以，我真的很想对堆栈面板子值执行相同的过程。

根据以下代码，它将覆盖最后一个文本框条目

例如，如果我将文本添加到文本框并按下按钮，它将添加到堆栈面板子项并将其保存到文件中。但如果我再次输入文本保存文件日期将覆盖。

而不是显示文本框条目的数量，它只显示最后一个文本值。

我对数据绑定知之甚少，所以我不想使用数据库，只想将每个孩子的价值保存到文件中。

希望你们能帮助我。谢谢！！

这是我的代码

类主窗口

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.Windows.RoutedEventArgs) Handles Button1.Click
    Dim st As New StackPanel()
    Dim tb As New Label()

    tb.Content = TextBox1.Text

    st.HorizontalAlignment = Windows.HorizontalAlignment.Left
    'st.Height = 40
    'st.Width = 40
    'st.Margin = New Thickness(45, 45, 45, 0)

    Me.ListBox1.Items.Add(st)
    st.Children.Add(tb)

    IO.Directory.CreateDirectory("D:\save")
    Dim w As New IO.StreamWriter("D:\save\test.text")

    ' Dim i As Integer

    For Each tb In st.Children
        w.WriteLine(tb.Content)

    Next

    w.Close()
End Sub 
```

结束类

这是我的 xmal 代码

```
<Window x:Class="MainWindow"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
Title="MainWindow" Height="509" Width="762">
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="320*" />
        <ColumnDefinition Width="420*" />
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
        <RowDefinition Height="49*" />
        <RowDefinition Height="262*" />
    </Grid.RowDefinitions>
    <TextBox Height="25" HorizontalAlignment="Left" Margin="59,244,0,0" Name="TextBox1" VerticalAlignment="Top" Width="121" Grid.Row="1" />
    <TextBox Height="23" HorizontalAlignment="Left" Margin="59,275,0,0" Name="TextBox2" VerticalAlignment="Top" Width="121" Grid.Row="1" />
    <Button Content="Button" Height="24" HorizontalAlignment="Left" Margin="77,308,0,0" Name="Button1" VerticalAlignment="Top" Width="83" Grid.Row="1" />
    <Label Content="Label" Grid.Column="1" Height="29" HorizontalAlignment="Left" Margin="38,12,0,0" Name="Label1" VerticalAlignment="Top" Width="120" DataContext="{Binding}" Visibility="Hidden" />
    <ListBox Height="297" HorizontalAlignment="Left" Margin="12,12,0,0" Name="ListBox1" VerticalAlignment="Top" Width="294" Grid.RowSpan="10" FontSize="14" FontStretch="Expanded" MinHeight="10"></ListBox>
</Grid> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T15:53:03.817

您需要使用重载的[StreamWriter](http://msdn.microsoft.com/en-us/library/36b035cb.aspx)构造函数并指定要附加：

```
Dim w As New IO.StreamWriter("D:\save\test.text",True) 
```

如果你不这样做，文件将被覆盖：

> true 将数据附加到文件中；false 覆盖文件。如果指定的文件不存在，则该参数无效，构造函数创建一个新文件。

# google-maps-api-3 - 带有标记的 Fusion Tables 热图图层

> ID：14877746
> 
> 赞同：3
> 
> 时间：2013-02-14T15:03:44.033
> 
> 标签：google-maps-api-3, google-maps-markers, google-fusion-tables, heatmap

我正在尝试创建与此类似的东西，但是在使其正常工作时遇到了一些麻烦：

[https://google-developers.appspot.com/maps/documentation/javascript/examples/layer-heatmap](https://google-developers.appspot.com/maps/documentation/javascript/examples/layer-heatmap)

我在 Fusion Tables 中存储了大约 35k 条记录，我想用它们来创建热图。数据集包含 lat、long 和 counts。

我还想在热图上添加另一个图层，该图层将在地图上显示为标记（此数据集也存储在 Fusion Tables 中，大约 600 行。如何用我的 Fusion Table 中的坐标替换下面的taxiData？

```
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Google Maps JavaScript API v3 Example: Heatmap Layer</title>
    <link href="/maps/documentation/javascript/examples/default.css" rel="stylesheet">
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false&libraries=visualization"></script>
    <script>
      // Adding 500 Data Points
      var map, pointarray, heatmap;

      var taxiData = [
        new google.maps.LatLng(37.782551, -122.445368),
        new google.maps.LatLng(37.782745, -122.444586),
        new google.maps.LatLng(37.782842, -122.443688),
        new google.maps.LatLng(37.782919, -122.442815),
        new google.maps.LatLng(37.782992, -122.442112),
        new google.maps.LatLng(37.783100, -122.441461),
        new google.maps.LatLng(37.783206, -122.440829)
      ];

      function initialize() {
        var mapOptions = {
          zoom: 13,
          center: new google.maps.LatLng(37.774546, -122.433523),
          mapTypeId: google.maps.MapTypeId.SATELLITE
        };

        map = new google.maps.Map(document.getElementById('map_canvas'),
            mapOptions);

        pointArray = new google.maps.MVCArray(taxiData);

        heatmap = new google.maps.visualization.HeatmapLayer({
          data: pointArray
        });

        heatmap.setMap(map);
      }

      function toggleHeatmap() {
        heatmap.setMap(heatmap.getMap() ? null : map);
      }

      function changeGradient() {
        var gradient = [
          'rgba(0, 255, 255, 0)',
          'rgba(0, 255, 255, 1)',
          'rgba(0, 191, 255, 1)',
          'rgba(0, 127, 255, 1)',
          'rgba(0, 63, 255, 1)',
          'rgba(0, 0, 255, 1)',
          'rgba(0, 0, 223, 1)',
          'rgba(0, 0, 191, 1)',
          'rgba(0, 0, 159, 1)',
          'rgba(0, 0, 127, 1)',
          'rgba(63, 0, 91, 1)',
          'rgba(127, 0, 63, 1)',
          'rgba(191, 0, 31, 1)',
          'rgba(255, 0, 0, 1)'
        ]
        heatmap.setOptions({
          gradient: heatmap.get('gradient') ? null : gradient
        });
      }

      function changeRadius() {
        heatmap.setOptions({radius: heatmap.get('radius') ? null : 20});
      }

      function changeOpacity() {
        heatmap.setOptions({opacity: heatmap.get('opacity') ? null : 0.2});
      }
    </script>
  </head>

  <body onload="initialize()">
    <div id="map_canvas" style="height: 600px; width: 800px;"></div>
    <button onclick="toggleHeatmap()">Toggle Heatmap</button>
    <button onclick="changeGradient()">Change gradient</button>
    <button onclick="changeRadius()">Change radius</button>
    <button onclick="changeOpacity()">Change opacity</button>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T15:16:49.880

对于融合表，您不需要创建 HeatmapLayer，而是[像这样](https://developers.google.com/maps/documentation/javascript/layers#FusionTablesHeatmaps)创建 FusionTablesLayer ：

```
layer = new google.maps.FusionTablesLayer({
  query: {
    select: 'LATITUDE',
    from: '0ILwUgu7vj0VSZnVzaW9udGFibGVzOjEzNjcwNQ'
  },
  heatmap: {
    enabled: true
  }
});
layer.setMap(map); 
```

您可以通过向`where:`查询添加部分来限制使用的数据。

要使用融合表制作带有简单标记的图层，只需省略该`heatmap: { enabled: true }`部分即可。

# css - 使用 Knockout.js 绑定到数据图标

> ID：14877750
> 
> 赞同：1
> 
> 时间：2013-02-14T15:03:59.457
> 
> 标签：css, knockout.js, icons, font-face

我的应用程序中有一个部分，我想在其中显示通过图标字体生成的动态图标。这是我尝试使用的标记（基于我在多个地方看到的使用图标字体的模式）：

```
<span data-bind="attr: {'data-icon': iconCode}"></span> 
```

这是我适用的相关CSS：

```
[data-icon]:before {
    font-family: 'Icons';
    content: attr(data-icon);
} 
```

当我将`iconCode`observable 设置为代表我想要的图标的代码时（即，`"&#xe000"`我在这里留下的末尾有一个分号），它会显示文本字符串并且不会将其转换为字符。如果我使用开发工具手动编辑`data-icon`标签的属性，它会正确显示图标，所以我知道我的标记或 CSS 没有任何问题。

我认为一定有一些东西阻止浏览器能够处理这样的动态插入的字符。我正在使用一组足够小的图标，为每个图标创建一个 CSS 类并动态应用类名并不是什么*大不了*的事，但我宁愿有一个模式，让我可以灵活地使用任何我想要的角色。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T15:16:44.633

您可以使用 DOM 将 HTML 转义序列转换为实际字符：

```
function ViewModel() {
    var self = this;

    self.iconCode = ko.observable();

    self.iconCodeChar = ko.computed(function () {
        var div = document.createElement("DIV");
        div.innerHTML = self.iconCode();
        return div.textContent || div.innerText;
    });
} 
```

并绑定到计算的 observable：

```
<span data-bind="attr: {'data-icon': iconCodeChar}"></span> 
```

当心通过使用`.innerHTML`. 可能需要进行某种输入值检查。

# javascript - 干出工程符号实现

> ID：14877760
> 
> 赞同：3
> 
> 时间：2013-02-14T15:04:41.223
> 
> 标签：javascript

这是我的代码：

```
function engineeringNotation(number) {
    var space = '&thinsp;';

    // Giga
    if(number >= 1e10)
        return (number / 1e9).toFixed(1) + space + 'G';
    else if(number >= 1e9)
        return (number / 1e8).toFixed(0) / 10 + space + 'G';

    // Mega
    else if(number >= 1e7)
        return (number / 1e6).toFixed(1) + space + 'M';
    else if(number >= 1e6)
        return (number / 1e5).toFixed(0) / 10 + space + 'M';

    // Kilo
    else if(number >= 1e4)
        return (number / 1e3).toFixed(1) + space + 'k';
    else if(number >= 1e3)
        return (number / 1e2).toFixed(0) / 10 + space + 'k';

    // Unit
    else if(number >= 1e1)
        return (number / 1e0).toFixed(0) + space + '';
    else
        return (number / 1e-1).toFixed(0) / 10 + space + '';
} 
```

基本上，它需要一个数字，并以“工程符号”将其返回到小数点后一位。例如，`1234`变成`1.2 k`。我觉得我在重复自己很多。上面的代码可以改进和干燥吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T16:04:54.443

只是实现（一些）Pointy 的想法，这不是最优化的方法，但它应该让你开始。

```
function engineeringNotation(number) {
    var unitMap = {G:1e9,M:1e6,k:1e3};
    var space = '&thinsp;';
    for(var unit in unitMap) {
        if(unitMap.hasOwnProperty(unit)) {
            if(number >= unitMap[unit]*10) {
                return (number / unitMap[unit]).toFixed(1) + space + unit;
            }
            if(number >= unitMap[unit]) {
                return (number / unitMap[unit]/10).toFixed(0) / 10 + space + unit;
            }
        }
    }
} 
```

# ruby - 正则表达式只匹配直接子标签？

> ID：14877761
> 
> 赞同：0
> 
> 时间：2013-02-14T15:04:48.493
> 
> 标签：ruby, regex, rss, pcre

我正在编写一个简单的 RSS 解析器（我知道已经写了很多），我偶然发现了一个问题。假设我有以下 RSS 提要：

```
<channel>
  <title>Sunset Boulevard</title>
  <link>http://www.imdb.com/title/tt0043014/</link>
  <description>A hack screenwriter writes a screenplay..</description>
  <language>English</language>
  <item>
    <rating>8.6</rating>
  </item>
</channel> 
```

我有一种方法，可以通过给定的标签和子标签将它们提取到一个简单的哈希中。这是我的“方法”：

```
def extract_text_from_tag(text, tag)
  text =~ /<#{tag}.*?>(?<tag_text>.*?)<\/#{tag}>/m ? $~[:tag_text] : ''
end 
```

为了解析频道，我首先提取其文本，然后使用一组预定义的标签（标题、链接等）提取它们的数据。但是，我希望我的正则表达式只匹配我的标签的直接子级。

例如在这里，如果我传递“标题”、“链接”、“描述”、“语言”和“评级”标签，我想匹配除“评级”之外的所有标签（因为它是项目的子项）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T15:58:30.857

我从评论中看到，您必须使用正则表达式而不是适当的 XML 解析器来解析这个 RSS 提要。

然而，作为一个反例，下面是使用 Nokogiri 的解决方案：

```
doc = Nokogiri::XML(rss_xml_string)
doc.xpath('/channel/*').each do |node| # For each child of the root "channel".
  next if node.children.length > 1 # Skip nodes with multiple children.
  puts node.name + ': ' + node.text
end
# title: Sunset Boulevard
# link: http://www.imdb.com/title/tt0043014/
# description: A hack screenwriter writes a screenplay..
# language: English 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T16:22:08.263

需要注意的是，事情可能会变得复杂，超出了正则表达式所能做的范围，这里有一些建议：

假设“<”和“>”在 XML 中被正确转义，而不是`.*?`你可以使用。`[^<>]*?`

***这将防止在 item 包含子项***时提取它的内容，这可能是也可能不是所需的行为（我认为这在您的示例中是可以的，但一般来说可能不行）。

如果您仍然需要提取“项目”的内容（如果有的话），除了可能的子项目，您需要使用条件语句，如果我没记错的话，Ruby 不支持。

您可以将其替换为测试标记是否包含子元素并相应地应用正则表达式的方法，但它确实变得相当复杂。

# asp.net - 生成自定义 Telerik RadFilter 查询

> ID：14877771
> 
> 赞同：0
> 
> 时间：2013-02-14T15:05:07.953
> 
> 标签：asp.net, telerik

好的，我今天的任务之一是修改客户网站上现有的 Telerik RadFilter。过滤器本身允许用户在 Telerik RadGrid 上执行查询。这一切都很好，但是客户希望以逗号分隔列表的形式更轻松地进行过滤。

```
<!-- The new comma-separated list text box -->
<asp:TextBox ID="txtQuery" runat="server" TextMode="MultiLine"></asp:TextBox>
<asp:Button ID="btnQuery" runat="server" Text="Filter By List" />

<!-- The existing RadFilter -->
<telerik:RadFilter runat="server" ID="AttendeesGridFilter" Visible="true"
    FilterContainerID="AttendeesGrid" ShowApplyButton="false" /> 
```

基本上，这里查看的 AttendeesGrid (RadGrid) 包含有关活动参与者的各种列。此逗号分隔列表将允许用户按与会者 ID 批量快速过滤。我想我会这样做的方法是拉取 txtQuery 的内容，将其放入排序列表并在 RadFilter 处将其触发，以便 1、2、3、4 的条目会生成如下内容：

![在此处输入图像描述](../Images/fb3a6124ee51331aa89c482b4ef9b268.png)

这真的可能吗？如果是这样，谁能指出我如何从后端生成自定义 RadFilter 查询的正确方向？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T18:27:51.797

这可能会帮助您从正确的方向开始，本周我用我的代码做了类似的事情，在发布之前我不得不删除一些对象名称和内容。

我做了什么：

*   radgrid 需要数据源
*   将数据源获取移动到一个新函数并从需要数据源调用此函数
*   过滤器（radtextbox）和按钮，通过调用自定义数据源提取器和重新绑定网格来触发自定义过滤器
*   将所有内容附加到 radAjax 管理器（未显示）以避免整个页面刷新

辐射网格

```
<telerik:RadTextBox ID="searchBox" runat="server" ></telerik:RadTextBox>
<asp:Button ID="btnAdvSearch" runat="server" Text="Search" OnCommand="FilterBySearch" />
<telerik:RadGrid ID="radGrid1" EnableAJAX="True" runat="server" OnNeedDataSource="radGrid1_NeedDataSource" OnItemDataBound="radGrid1_ItemDataBound">
...
</telerik:RadGrid> 
```

我背后的代码已将 DataFetching 移到它自己的函数中，以便可以从多个地方调用它，而不仅仅是在 needDataSource 上

```
protected void radGrid1_NeedDataSource(object source, GridNeedDataSourceEventArgs e)
{
    SetGridDatasource();
} 
```

搜索按钮将触发此函数，该函数获取源并重新绑定网格

```
protected void FilterBySearch(object sender, CommandEventArgs e)
{
    SetGridDatasource();
    radGrid1.DataBind();
} 
```

gridDataSource 从数据库中获取对象，我使用 linq 根据传入的搜索文本进行过滤。

```
private void SetGridDatasource()
{
    var searchText = searchBox.Text.Trim();
    using (var db = new ContactsDataContext())
    {
        var DataObjectList = db.DataObjectGetByAccount(AccountId, 3).ToList();
        var filtered = (from list in DataObjectList where
            (list.DataObjectName.Contains(searchText) ||
            list.id.ToString().Contains(searchText) ||
            list.description.ToString().Contains(searchText))
            select list);

        rgDataObjects.DataSource = filtered;
    }
} 
```

# jquery - 当div到达顶部时，jquery添加位置固定但如何添加附加功能？

> ID：14877772
> 
> 赞同：1
> 
> 时间：2013-02-14T15:05:09.813
> 
> 标签：jquery, scroll

[由于这个非常有用的答案 - https://stackoverflow.com/a/10096021/2039935](https://stackoverflow.com/a/10096021/2039935)，我设法让 div 在到达页面顶部时更改为固定位置。

现在的问题是，当它变得固定时，它下面的内容显然会向上跳跃，因为 div 不再将其余内容向下推。我需要添加一个上边距，即 div 的高度到下面的内容，在它变为固定的点，所以下面的内容继续在固定的 div 下方平滑滚动..

到达页面顶部时将 div 更改为固定位置的代码是...

```
$(function(){
var stickerTop = parseInt($('#header-container').offset().top);
$(window).scroll(function() {
$("#header-container").css((parseInt($(window).scrollTop()) + parseInt($("#header-    container").css('margin-top')) > stickerTop) ? {
        position: 'fixed',
        top: '0px'
    } : {
        position: 'relative'
    }); 
});
});//]]> 
```

对于熟悉的人来说应该很容易。。

非常感谢 ！

仅供参考，答案是......

```
$(function(){
    var stickerTop = parseInt($('#header-container').offset().top);
    $(window).scroll(function() {
        var movelisting = (parseInt($(window).scrollTop()) + parseInt($("#header-    container").css('margin-top')) > stickerTop) ? '200px' : '0px';
        $("#search-listings-container").css("marginTop", movelisting);

        $("#header-container").css((parseInt($(window).scrollTop()) + parseInt($("#header-container").css('margin-top')) > stickerTop) ? {
            position: 'fixed',
            top: '0px'
        } : {
            position: 'relative'
        }); 
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T16:21:21.517

我不确定是否了解您的问题。我看到你有一个 div 开始是 position: relative; 并固定结束。这会对下面的下一个 div 产生影响。`$('#id_div').css({'margin-top':'40px'});`在为#header-container 分配固定位置后，也许您可​​以尝试在此div 上放置一些margin-top 。

我放了 40px 但你必须放你相信的高度值。

# javascript - Generate dropdown from value

> ID：14877777
> 
> 赞同：0
> 
> 时间：2013-02-14T15:05:29.673
> 
> 标签：javascript

Hello javascript experts, I’ve been stuck on this code for few days with no idea how to fix it. I have a textfield where user can put in a value. When the value is submitted a number of dropdown lists will be generated by the inputted value. However I'm not too sure what went wrong with the code but it seems there is no response after you submit the value.

Following is my current code:

Javascript:

```
 <script type="text/javascript">

function getvalue() {
 var number = document.getnumber.input.value;
 document.getElementById('result').value = number; 
}

function generatedropdown() {
 while (i < number)
 {
     document.write
     (
     <select name="list">
     <option>1</option>
     <option>2</option>
     </select>
     );
     i++;
 }
  }

 </script> 
```

HTML:

```
 <form name="getnumber">
Input number: <input type="text" name="input">
<input type="button" value="Next" onclick="getvalue()">
  </form> 

<form name="showdropdown">
Number entered: <input type="text" id="result" readonly="readonly">
<input type="button" value="Show lists" onclick="generatedropdown()">   
</form> 
```

**EDIT:** Sorry I'm a bit noobie at Javascript. I have moved **function generatedropdown()** to the body tags and now I get some feedback after submitting. However I'm still abit confuse in turning the string into a statement.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T15:09:22.427

document.write takes a string...meaning you have to put that statement in quotes...and escape your other quotes (i.e. \") or change them to single quotes...but this isn't going to work either because the body is already written - you need to add it to the body object...consider using `innerHTML`...or `document.body.createElement`

# spring - 如何使用不同的身份验证过滤器配置两个 Spring 安全 http 元素？

> ID：14877780
> 
> 赞同：6
> 
> 时间：2013-02-14T15:05:32.800
> 
> 标签：spring, security, configuration, spring-security

我正在使用带有 Spring 安全性的 Spring 3.1.1.RELEASE。我正在部署到 JBoss 7.1.1.Final 。我想配置两个 http 安全元素，每个元素都有不同的身份验证过滤器。我怎么做？使用下面的 Spring 安全配置，在部署我的 WAR 时出现异常“java.lang.IllegalArgumentException：在过滤器链中的其他模式之前定义了通用匹配模式（'/**'）”。如果我注释掉第二个 http 块（名为“pdSecurity”），一切正常。

```
<http pattern="/activities/**" security="none" />
<http pattern="/audio/**" security="none" />
<http pattern="/bootstrap/**" security="none" />
<http pattern="/bootstrap-editable/**" security="none" />
<http pattern="/css/**" security="none" />
<http pattern="/images/**" security="none" />
<http pattern="/js/**" security="none" />
<http pattern="/resources/**" security="none" />
<http pattern="/temp/**" security="none" />
<http name="defaultSecurity" security-context-repository-ref="subcoSecurityContextRepository"
    auto-config="false" use-expressions="true" authentication-manager-ref="authenticationManager"
    access-denied-page="/denied" entry-point-ref="loginUrlAuthenticationEntryPoint">
    <custom-filter position="FORM_LOGIN_FILTER"
        ref="subcoUsernamePasswordUrlAuthenticationFilter" />
    <intercept-url pattern="/login" access="permitAll" />
    <intercept-url pattern="/logout" access="permitAll" />
    <intercept-url pattern="/denied" access="isAuthenticated()" />
    <intercept-url pattern="/welcome" access="permitAll" />
    <intercept-url pattern="/authenticate" access="permitAll" />
    <intercept-url pattern="/user"
        access="hasAnyRole('User','Administrator')" />
    <intercept-url pattern="/landing"
        access="hasAnyRole('User','Student','Teacher','Administrator')" />
    <intercept-url pattern="/book/*"
        access="hasAnyRole('User','Student','Teacher','Administrator')" />
    <intercept-url pattern="/admin" access="hasRole('Administrator')" />
    <intercept-url pattern="/admin/*" access="hasRole('Administrator')" />
    <intercept-url pattern="/getResource" access="hasAnyRole('Student','Teacher','Administrator')" />
    <logout invalidate-session="true" logout-success-url="/logout"
        logout-url="/j_spring_security_logout" />
</http>

<!--  Reg controller for PD -->
<http name="pdSecurity" auto-config="false" use-expressions="true" authentication-manager-ref="authenticationManager" access-denied-page="/denied" entry-point-ref="loginUrlAuthenticationEntryPoint">
    <custom-filter position="FORM_LOGIN_FILTER" ref="pdUsernamePasswordUrlAuthenticationFilter"/>
    <intercept-url pattern="/pdregistration/regfailure" access="hasAnyRole('Teacher')"/>
    <intercept-url pattern="/pdregistration/regsuccess" access="hasAnyRole('Teacher')"/>
    <logout invalidate-session="true" 
        logout-success-url="/logout" 
        logout-url="/j_spring_security_logout" />
</http> 
```

这是一个例外……</p>

```
08:52:23,730 ERROR [org.springframework.web.context.ContextLoader] (MSC service thread 1-5) Context initialization failed: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.filterChainProxy': Invocation of init method failed; nested exception is java.lang.IllegalArgumentException: A universal match pattern ('/**') is defined  before other patterns in the filter chain, causing them to be ignored. Please check the ordering in your <security:http> namespace or FilterChainProxy bean configuration
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1455) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913) [spring-context-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464) [spring-context-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:385) [spring-web-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:284) [spring-web-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111) [spring-web-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.apache.catalina.core.StandardContext.contextListenerStart(StandardContext.java:3392) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:3850) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.as.web.deployment.WebDeploymentService.start(WebDeploymentService.java:90) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811)
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [classes.jar:1.6.0_37]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [classes.jar:1.6.0_37]
    at java.lang.Thread.run(Thread.java:680) [classes.jar:1.6.0_37]
Caused by: java.lang.IllegalArgumentException: A universal match pattern ('/**') is defined  before other patterns in the filter chain, causing them to be ignored. Please check the ordering in your <security:http> namespace or FilterChainProxy bean configuration
    at org.springframework.security.config.http.DefaultFilterChainValidator.checkPathOrder(DefaultFilterChainValidator.java:49) [spring-security-config-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.security.config.http.DefaultFilterChainValidator.validate(DefaultFilterChainValidator.java:39) [spring-security-config-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.security.web.FilterChainProxy.afterPropertiesSet(FilterChainProxy.java:149) [spring-security-web-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1514) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1452) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    ... 20 more

08:52:23,742 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/myproject]] (MSC service thread 1-5) Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.filterChainProxy': Invocation of init method failed; nested exception is java.lang.IllegalArgumentException: A universal match pattern ('/**') is defined  before other patterns in the filter chain, causing them to be ignored. Please check the ordering in your <security:http> namespace or FilterChainProxy bean configuration
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1455) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913) [spring-context-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464) [spring-context-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:385) [spring-web-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:284) [spring-web-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111) [spring-web-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.apache.catalina.core.StandardContext.contextListenerStart(StandardContext.java:3392) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:3850) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.as.web.deployment.WebDeploymentService.start(WebDeploymentService.java:90) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811)
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [classes.jar:1.6.0_37]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [classes.jar:1.6.0_37]
    at java.lang.Thread.run(Thread.java:680) [classes.jar:1.6.0_37]
Caused by: java.lang.IllegalArgumentException: A universal match pattern ('/**') is defined  before other patterns in the filter chain, causing them to be ignored. Please check the ordering in your <security:http> namespace or FilterChainProxy bean configuration
    at org.springframework.security.config.http.DefaultFilterChainValidator.checkPathOrder(DefaultFilterChainValidator.java:49) [spring-security-config-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.security.config.http.DefaultFilterChainValidator.validate(DefaultFilterChainValidator.java:39) [spring-security-config-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.security.web.FilterChainProxy.afterPropertiesSet(FilterChainProxy.java:149) [spring-security-web-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1514) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1452) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    ... 20 more 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-14T15:22:53.803

在第二个`<http>`元素（名为 pdSecurity）上使用`pattern`属性：`<http pattern='/pdregistration/*'...`，并将其移动到您的 'defaultSecurity' <http> 元素之前。

根据[Spring Security 文档](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/ns-config.html#ns-form-and-basic)：

> 从 Spring Security 3.1 开始，现在可以使用多个 http 元素为不同的请求模式定义单独的安全过滤器链配置。如果从 http 元素中省略了模式属性，则它匹配所有请求。

[...以及此处](http://docs.spring.io/spring-security/site/docs/3.1.x/reference/security-filter-chain.html#filter-chains-with-ns)`<http>`有关多个元素的另一个相关部分：

> 每个元素在内部 FilterChainProxy 和应该映射到它的 URL 模式中创建一个过滤器链。元素将按照它们声明的顺序添加，因此必须再次首先声明最具体的模式。

# jquery - Ajax，当响应具有某些价值时，我想将其视为 ajax 错误

> ID：14877784
> 
> 赞同：2
> 
> 时间：2013-02-14T15:05:40.707
> 
> 标签：jquery, ajax

发生的事情是，我已经在开发一个大型应用程序，团队处理发送 Json 响应的服务器端错误的方式`error=true` *（仍然成功 200 次）（我很难改变它以发送不同的状态代码）*，并且在 ajax 成功时，他们调用相同的函数来使用带有错误消息的对话框进行警告，如果`error=true`否则执行正常逻辑，

我想要的是在任何成功发生之前使用单个 ajax 事件来挂钩，并首先检查值是否有*error=true*然后不要调用它的成功处理程序并显示对话框

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T15:09:03.933

如果. _ `success`_`error``error=true`

例如你可以这样做：

```
$.ajax(
   success: function(data){
      if (data.error){
         RunErrorCode();
         return;
      }
      //success code...
   },
   error: function(){
      RunErrorCode();
});

function RunErrorCode(){
   alert("An error has occurred");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T15:14:07.330

验证响应的函数：

```
var hasErrors = function(response) {
  if(response.error) {
    //...
    return true;
  }
}; 
```

然后在每次`success`回调时，调用`hasErrors`.

```
$.ajax({
  //...
  success: function(response) {
    if(hasErrors(response)) return;
    //...
  }
}) 
```

# php - 删除双引号之间的 \n\r - PHP

> ID：14877785
> 
> 赞同：-7
> 
> 时间：2013-02-14T15:05:45.927
> 
> 标签：php, preg-replace

如何仅在双引号之间找到 \n 和 \r ？

我基本上需要`preg_replace`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T15:25:19.233

```
preg_replace( '/["]*(\n).*["]/', '', $str ); 
```

在“qoutemarks”之间替换 \n 怎么样？

# asp.net - 在没有布局的情况下呈现 Ajax 页面请求，但保持子布局不变

> ID：14877788
> 
> 赞同：0
> 
> 时间：2013-02-14T15:05:54.887
> 
> 标签：asp.net, ajax, asp.net-mvc-4

我有一个使用嵌套布局的相对较小的网站。

_Layout.cshtml 包含网站的整体布局；

*   标题
*   菜单
*   内容
*   页脚

我希望通过 Ajax 加载内容，但同时保持网站能够在没有它的情况下通过 URL 导航。如果我在控制器中检查调用是否为 Ajax 并返回 ParvialView，则它不会呈现视图可能正在使用的 _subLayout.cshtml。如果我正常渲染它，那么它当然会包括_subLayout.cshtml，但也包括_Layout.cshtml。

当它是 Ajax 调用时，如何使视图加载而不是 _Layout.cshtml，但在保持非 Ajax 调用的 _Layout.cshtml 呈现完整的同时加载 _subLayout.cshtml？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T15:21:12.503

A little d'oh moment, I can ofcourse just do Request.IsAjaxRequest() in the _subLayout before the _Layout gets applied. Solved the issue.

```
if(!Request.IsAjaxRequest())
{
    Layout = "~/Views/Shared/_Layout.cshtml";
} 
```

# c# - C# MySQL 插入、删除、更新按钮？

> ID：14877791
> 
> 赞同：0
> 
> 时间：2013-02-14T15:06:08.737
> 
> 标签：c#, mysql

我在 Visual Studio C# 2010 Express 中工作，在使用 mySQL 数据库时遇到了一些问题。

我已经实现了连接按钮，因此在您填写所有帐户信息（服务器、用户、端口和密码）后，单击连接按钮，将显示数据库列表，以及每个数据库中的表（当您选择某些数据库），以及每个表中的数据（当您选择某个表时）。

现在我正在尝试实现插入、更新和删除按钮，但不知道从哪里开始，我主要对插入按钮感到困惑（我的意思是不同的表有不同的列数，等等......）**我不能想象一下单击“插入”按钮时它是如何工作的**。有人可以给我一些建议或示例代码，以便我可以跟进其余部分。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T15:19:23.257

如果您能找到一种方法将新记录输入到网格的最后一行，您可以制作这样的查询

```
cmd.CommandText = "insert into " + listTables.Items[listTables.SelectedIndex].ToString() + "(";

foreach( var col in dataGridTableView.DataSource.DataTable[0].Columns)
    cmd.CommandText += col.ColumnName +  "," ;

// trim last comma off

cmd.CommandText += ") Values( ";

// access newly created row
// iterate over the cells of the row, and add values to the command text we've been building
// execute command text. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T15:19:11.347

您也许可以看看以下内容。[http://www.daniweb.com/software-development/csharp/threads/235966/mysql-insert-from-c-app](http://www.daniweb.com/software-development/csharp/threads/235966/mysql-insert-from-c-app)

```
public void CreateMySqlCommand() 
{
  MySqlConnection myConnection = new MySqlConnection("Persist Security Info=False;database=test;server=myServer");
  myConnection.Open();
  MySqlTransaction myTrans = myConnection.BeginTransaction();
  string mySelectQuery = "SELECT * FROM myTable";
  MySqlCommand myCommand = new MySqlCommand(mySelectQuery, myConnection,myTrans);
  myCommand.CommandTimeout = 20;
} 
```

我会使用带有一些 SQL 的命令来执行我的插入/更新/删除等操作。

有关 mySQL SQL 语法，请参见以下内容 [http://dev.mysql.com/doc/refman/5.0/en/sql-syntax.html](http://dev.mysql.com/doc/refman/5.0/en/sql-syntax.html)

转到：13.2。数据操作语句

# iphone - UITextView 不解析转义字符

> ID：14877792
> 
> 赞同：1
> 
> 时间：2013-02-14T15:06:08.737
> 
> 标签：iphone, xcode

所以我有一个通过解析 XML 文件填充的数组。在该文件中，有些行包含 '\n' 作为下一行字符。

当我尝试显示所述行时

```
self.myTextView.text = _myString; 
```

它在模拟器中显示为

```
\nLorem \nipsum \ndolor \nsit \namet .... 
```

（它通过控制台以相同的方式打印 - 但是，如果我手动设置

```
self.myTextView.text = @"\nLorem \nipsum \ndolor \nsit \namet"; 
```

它将显示为

```
Lorem
ipsum
dolor
sit
amet 
```

有谁知道如何解决这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T15:08:39.003

您的输入字符串实际上包含在`\n`C 编译器（或 Java、C++ 或 Objective-C 等）之外没有特殊含义的字符。

如果您希望将`\n`字符转换为换行符，那么您需要自己执行此操作，也许使用：

```
self.myTextView.text = [_myString stringByReplacingOccurrencesOfString:@"\\n"
                                                            withString:@"\n"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T15:07:55.523

字符串的 XML 编码可能会在换行符之前插入转义字符，您必须先删除它们。

# sql - 如何对 SQL 查询中的两个字段求和

> ID：14877797
> 
> 赞同：110
> 
> 时间：2013-02-14T15:06:21.883
> 
> 标签：sql, ms-access

我需要获取同一行内的两个字段的总数，并在同一行末尾的字段中输入该数字。

这是我的代码。

```
Sum(tbl1.fld1 + tbl1.fld2) AS [Total] 
```

这是 SUM 函数的用途，还是只能使用 SUM 函数来获取列的总数？

谢谢

* * *

## 回答 #1

> 赞同：265
> 
> 时间：2013-02-14T15:08:52.997

`SUM`是一个聚合函数。它将计算每个组的总数。`+`用于计算一行中的两列或多列。

考虑这个例子，

```
ID  VALUE1  VALUE2
===================
1   1       2
1   2       2
2   3       4
2   4       5 
```

```
SELECT  ID, SUM(VALUE1), SUM(VALUE2)
FROM    tableName
GROUP   BY ID 
```

将导致

```
ID, SUM(VALUE1), SUM(VALUE2)
1   3           4
2   7           9 
```

```
SELECT  ID, VALUE1 + VALUE2
FROM    TableName 
```

将导致

```
ID, VALUE1 + VALUE2
1   3
1   4
2   7
2   9 
```

```
SELECT  ID, SUM(VALUE1 + VALUE2)
FROM    tableName
GROUP   BY ID 
```

将导致

```
ID, SUM(VALUE1 + VALUE2)
1   7
2   16 
```

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2013-02-14T15:08:53.433

尝试以下操作：

```
SELECT *, (FieldA + FieldB) AS Sum
FROM Table 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2019-04-19T14:47:45.647

只是一个关于添加列的提醒。如果其中一个值为 NULL，则这些列的总数变为 NULL。因此，为什么有些发帖人建议将第二个参数设为 0 时合并

我知道这是一篇较旧的帖子，但为了完整起见，我想添加它。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2015-02-17T11:20:50.460

```
ID  VALUE1  VALUE2
===================
1   1       2

1   2       2
2   3       4
2   4       5

select ID, (coalesce(VALUE1 ,0) + coalesce(VALUE2 ,0) as Total from TableName 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-02-14T15:08:42.010

SUM 用于对多行的列中的值求和。您可以将列添加在一起：

```
select tblExportVertexCompliance.TotalDaysOnIncivek + tblExportVertexCompliance.IncivekDaysOtherSource AS [Total Days on Incivek] 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2016-02-11T15:34:47.380

由于我的声誉点低于 50，我无法评论或投票支持 E Coder 的上述答案。这是最好的方法，因此您不必使用 group by，因为我遇到了类似的问题。
通过`SUM((coalesce(VALUE1 ,0)) + (coalesce(VALUE2 ,0)))`as Total 这将为您提供您想要的数字，但也可以消除您不执行 Group By 的任何错误。这是我的查询，给了我每个经销商的总数和总金额，然后给了我质量和风险经销商贷款的小计。

```
SELECT 
    DISTINCT STEP1.DEALER_NBR
    ,COUNT(*) AS DLR_TOT_CNT
    ,SUM((COALESCE(DLR_QLTY,0))+(COALESCE(DLR_RISKY,0))) AS DLR_TOT_AMT
    ,COUNT(STEP1.DLR_QLTY) AS DLR_QLTY_CNT
    ,SUM(STEP1.DLR_QLTY) AS DLR_QLTY_AMT
    ,COUNT(STEP1.DLR_RISKY) AS DLR_RISKY_CNT
    ,SUM(STEP1.DLR_RISKY) AS DLR_RISKY_AMT
    FROM STEP1
    WHERE DLR_QLTY IS NOT NULL OR DLR_RISKY IS NOT NULL
        GROUP BY STEP1.DEALER_NBR 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2013-02-14T15:10:54.460

sum 函数只获取一列的总数。为了对来自不同列的两个值求和，请将值转换为 int 并使用 +-Operator 将它们相加

```
Select (convert(int, col1)+convert(int, col2)) as summed from tbl1 
```

希望有帮助。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-02-14T15:11:19.103

如果您想将两列添加在一起，您所要做的就是添加它们。然后，您将获得查询返回的每一行的这两列的总和。

您的代码正在做的是将两列加在一起，然后得到总和的总和。这会起作用，但它可能不是你想要完成的。

# android - 在db中使用contentresolver查询时列的顺序是什么？

> ID：14877802
> 
> 赞同：1
> 
> 时间：2013-02-14T15:06:32.403
> 
> 标签：android, android-contentprovider, android-contentresolver

我有一个表结构

```
 table(col1 char,col2 int,col3 int,col4 char,col5 char) . 
```

我正在使用内容解析器查询列 (col1,col4,col3)。

访问我正在使用的特定列

```
 cursor.getstring(curso.getColumnIndex('col1')) 
```

我正在为这种方法正确获取值。

但是如果我使用列索引值来访问

```
cursor.getstring(1) it is not giving the column col4(1st position). 
```

结果列的顺序既不是查询顺序也不是表结构顺序

就像（col3，col1，col4）。

它由内容解析器以不同的顺序返回。为什么这是这样的行为？我们如何使用索引访问呢？和可靠性

# javascript - Iframe 中的 Javascript 未执行

> ID：14877809
> 
> 赞同：0
> 
> 时间：2013-02-14T15:06:43.500
> 
> 标签：javascript, html

我在 javascript 方面有点菜鸟，所以请帮帮我。我的身体标签底部有这个：

```
<iframe id="scriptFrame" name="scriptFrame" height="0" width="0">
<script type="text/javascript" language="javascript">
alert("Hello World");
parent.alert("Hello world");
function foo()
{
   alert("Hello World");
}
</script>
</iframe> 
```

两个警报都不会弹出。我究竟做错了什么？我尝试添加 html 和 head 标签，但没有帮助。我也尝试过 document.getElementById('scriptFrame').contentWindow.foo() 和 frames['scriptFrame'].foo() 但都没有奏效

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T15:26:16.260

请注意，您不能将任何内容直接添加到`<iframe>`标签中。即使使用 JavaScript，您也只能在 iframe 中的页面与父页面来自同一个域时添加内容。因此，您必须执行以下操作：

```
<html>
<body>
<script >
function foo()
{
   alert("Hello World");
}
</script>
<iframe id="scriptFrame" onload="foo()"name="scriptFrame" height="0" width="0"> 
</iframe>
</body>
</html> 
```

**从 iframe 调用父 JS 函数是可能的**，但只有当 iframe 中加载的父页面和页面都来自**同一个域**，即 abc.com，并且两者都使用相同的协议，即两者都在 http:// 或 https 上时： //。

在以下提到的情况下，调用将失败：

1.  父页面和 iframe 页面来自不同的域。

2.  他们使用不同的协议，一种在 http:// 上，另一种在 https:// 上。

对此限制的任何解决方法都将非常不安全。

例如，假设我注册了域 superwinningcontest.com 并发送了指向人们电子邮件的链接。当他们加载主页时，我可以在其中隐藏一些 iframe 并阅读他们的 Facebook 提要，检查最近的 Amazon 或 PayPal 交易，或者——如果他们使用的服务没有实现足够的安全性——将资金从他们的帐户。这就是 JavaScript 仅限于同域和同协议的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T15:29:47.587

iframe 的内容永远不会被渲染。在 iframe 内指定某些内容时，这是使用 src 属性加载的内容的后备（对于不支持 iframe 的浏览器）。

因此，要么对 iframe 使用 onload，要么将 iframe 的内容放在单独的页面中，并在 src-attribute 中指定。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T15:29:57.830

您必须将 iframe 的 src 属性与 iframe 将加载其内容的 URI 一起使用。

> 要内联插入的信息由该元素的 src 属性指定。另一方面，IFRAME 元素的内容只能由不支持框架或配置为不显示框架的用户代理显示。

您在 iframe 标记内有脚本，因此它只会在不支持框架的浏览器上显示。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T15:08:07.980

您必须`<html>`在 iframe 中，并且`<script>`标签必须在`<head>`或 中`<body>`。

另外，请注意不推荐使用的`language`属性。`<script>`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-14T15:24:26.463

如果您在加载 iframe 时尝试运行 javascript，请尝试以下操作：

```
<html>
    <head>
        <script type="text/javascript">
            function someFunction(){
                //some stuff here
            }
        </script>
    </head>
    <body>
        <iframe id="scriptFrame" name="scriptFrame" height="0" width="0" onload="someFunction();"></iframe>
     </body>
</html> 
```

# java - 如何找到更大的共享目录文件夹并通过电子邮件发送

> ID：14877811
> 
> 赞同：2
> 
> 时间：2013-02-14T15:06:48.077
> 
> 标签：java, jakarta-ee

是否可以编写一个 java 程序来找到更大的文件夹并将其通过电子邮件发送给某人？

是否可以检查本地系统上共享目录的大小？我想检查一个本地共享目录。

我有一个程序可以检查本地目录的大小，例如

```
C:, D: etc.. 
```

但我需要在共享资源服务器中找到一个文件夹的大小，该服务器以一些编号地址开头，如：//172.34.56.23/BDRD/GFTR ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T15:42:34.867

使用[UNC 网络路径](http://en.wikipedia.org/wiki/Path_(computing)#UNC_in_Windows)，例如`\\172.34.56.23\BDRD\GFTR\...`.

考虑到反斜杠 ( `\`) 字符是转义字符，因此您需要使用双反斜杠 ( `\\`) 以使编译器了解您想要的`\`文字：

尝试按照[java 从网络设备读取文件](https://stackoverflow.com/q/1682194/851811)`new File("\\\\172.34.56.23\\BDRD\\GFTR\\...")`中的建议。

# svn - 我们如何改进对 SVN 的使用？

> ID：14877813
> 
> 赞同：5
> 
> 时间：2013-02-14T15:06:54.980
> 
> 标签：svn, repository

大约两年前，我开始了一份新工作，SVN 存储库流程已经存在。这个过程之所以如此，是因为从来没有人考虑过利用 SVN 管理代码库的最佳前瞻性方式。现在我们处于需要做出改变的情况下，我们才能成长得更多。**我们正在寻找一种更好的方式来使用适合我们需求的 SVN。**

*   我们有一个基础框架，我们所有的客户端代码都位于该框架之上，并在一个存储库中进行管理。
*   我们还有一个存储库，用于管理所有自定义 perl 模块，以及一个存储库，用于管理基础框架的所有皮肤。
*   然后，我们为每个客户的业务部门建立了存储库。

所有这些存储库中都有代码，这些代码有时在 /var/www、/usr/local、/opt 目录及其子目录中重叠。

到目前为止，我们已经通过在服务器的工作区域（*/var/www*、*/opt*、*/usr*）中进行更改来管理此问题，然后将所有更改及其目录结构移到我们主目录中的工作副本中我们可以对这些文件执行 svn 操作。

我已经做了一些实验来检查服务器根目录上的存储库，但是我必须 sudo 我所有的 svn 操作。另一个问题是，如果我切换到 repository-for-customer-a 并且我必须对基本框架进行更改，那么这些更改是否会被跟踪？它们会包含在 repository-for-customer-a 的 svn stat 中吗？或者，如果我进行 SVN 提交，服务器是否会同时将文件提交到两个存储库？

以我们的方式管理 SVN 完全是低效的，而且是一种责任，因为经常会丢失对修复/更改至关重要的文件，并且在将代码合并回主干时，我们没有使用 SVN 分支/合并，因此我们的看门人需要做更多的工作。我们的流程中有很多开销，如果我们能弄清楚如何按照它的预期使用方式来利用 SVN，就可以在这里消除这些开销。

我来到 Stack Overflow 是因为我非常尊重这里的格式和社区。任何意见是极大的赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T15:45:17.820

如果您清楚地区分源代码和已安装的程序，您的工作流程将大大改善。代码应从源位置（与生产无关）流向安装位置，如下所示：

```
http://your-svn-server

       | checkout
       v

/home/local-checkout

       | make install
       v

/var/www   /opt   /usr 
```

确保代码永远不会在此层次结构中向上移动，除非通过`svn commit`. 特别是，不要猴子补丁 /var/www 然后将文件复制到您的签出目录中。您永远不会复制*所有*相关更改。

这听起来像是很多工作，但事实并非如此。`make install`脚本通常需要很少的时间来运行，尤其是在不涉及编译器的情况下。从好的方面来说，当您想迁移到不同的机器或只是在新机器上安装任何东西时，定义的部署过程可以极大地帮助您。

# html - pie.htc 没有修复 css3 问题

> ID：14877816
> 
> 赞同：0
> 
> 时间：2013-02-14T15:06:58.733
> 
> 标签：html, css, rounded-corners, css3pie

我在根目录中有 PIE.HTC，并试图让圆角在 Internet Explorer 中工作

这是我的 CSS

```
#credits-earned
{
    border-style:solid;
    border-width:2px;
    border-color:#EDEDED;
    width:170px;
    height:60px;
    margin-bottom:10px;
    font-weight: bold;
    border-radius:8px;
    behavior: url (PIE.htc);
} 
```

这试图生效的 HTML 是：

```
<div id="credits-earned">
                        You need to earn X<br> more credits today to avoid losing credits
                    </div> 
```

但是圆角在 IE 中不起作用。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T15:23:57.747

当在外部 css 文件中包含资源时，URL 是相对于 css 文件的。

如果您想包含来自不同目录的内容，您可以使用相对路径（示例`behavior:url('../PIE.htc')`）或使用绝对路径（示例`behavior:url('/PIE.htc')`）

有关样式表中路径的更多信息 -[在 CSS 文件中使用相对 URL，它相对于什么位置？](https://stackoverflow.com/questions/940451/using-relative-url-in-css-file-what-location-is-it-relative-to)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-19T12:14:31.680

除了 pie.htc 工作的正确路径之外，请给出：

```
 #credits-earned
 { position: relative;
 } 
```

# tridion - UTF-8 编码问题（Tridion 2011 SP1）

> ID：14877817
> 
> 赞同：4
> 
> 时间：2013-02-14T15:06:56.430
> 
> 标签：tridion, tridion-2011, tridion-content-delivery

在我的一个项目中，有一些页面（例如详细信息页面）带有 vb 脚本页面模板和一些页面（例如主页）带有剃须刀。我们在组件字段之一（命名为标题）中的文本中有 £ 符号。

在主页£得到编码？在详细信息页面上，它是所需的，表示£。

当我在模板生成器中运行此主页时，它看起来很好（£），并且在页面源代码（在演示服务器上）它被编码为 ? 象征。

现在我认为这个问题在出版的某个地方。我们已经为编码 UTF-8 设置了发布目标，并且两个页面（主页和详细信息）都从同一个发布目标发布，因此这些页面的行为方式会有所不同。

甚至本网站常见的母版页也包含

```
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /> 
```

我在 Web 配置中包含以下标签以解决此问题。

```
<globalization fileEncoding="UTF-8" requestEncoding="UTF-8" responseEncoding="UTF-8"/> 
```

通过这样做，在详细信息页面 £ 被编码为一些乱码（？符号或矩形框）。

现在我的想法是

- 问题可能是因为剃刀，但剃刀输出在模板生成器中是完美的。

-问题可能在发布时，但两个页面都以相同的发布目标（UTF-8）发布。

谁能给我一个正确的方向来解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T19:36:03.987

遇到编码问题时，最好通过 Elena Serghie 在她的博客中强调的[7 个检查点。](http://elenaserghie.blogspot.nl/2012/01/7-clues-to-solve-character-encoding.html)

# ruby-on-rails - Rails：我如何知道单元测试中的测试模型是什么？

> ID：14877820
> 
> 赞同：0
> 
> 时间：2013-02-14T15:07:09.990
> 
> 标签：ruby-on-rails, ruby

我有一个具有以下签名的测试助手，在`test_helper.rb`：

```
assert_resolve_mapping(model_name, attrs_ary_to_exclude = []) 
```

第一个参数是一个字符串，表示要断言的实际模型，即：用户、客户、发票等。第二个是属性数组。

所以在我的单元测试中，我有：

```
require 'test_helper'

class CustomerUnitTest < ActiveSupport::TestCase

  test "should resolve mapping" do
    assert_resolve_mapping("Customer", ["created_at", "updated_at"])
  end
end 
```

由于我必须在各种模型的各种单元测试中调用助手，有没有办法避免传递第一个参数，`"Customer"`在这种情况下，知道哪个是实际测试的模型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T15:14:51.703

我相信你可以从类名中解析出模型名。

```
def assert_resolve_mapping(attrs_ary_to_exclude = [])
  model_name = self.class.to_s.sub(/UnitTest\Z/, "")
  ...
end 
```

# magento - Magento - 将类别名称作为类名添加到主导航中的列表项

> ID：14877823
> 
> 赞同：1
> 
> 时间：2013-02-14T15:07:26.493
> 
> 标签：magento

在主菜单中，我想将每个类别的名称作为类名添加到列表项中，例如

```
<li class="level0 nav-3 brands level-top parent">
<a href="http://www.examplesite.co.uk/brands.html" class="level-top">
  <span>Brands</span>
</a>
</li> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T17:31:31.253

导航的渲染位置可以在 中找到`Mage_Catalog_Block_Navigation::_renderCategoryMenuItemHtml`，位于 中`app/code/core/Mage/Catalog/Block/Navigation`。传递给函数的第一个参数是类别，我想您可以从中提取名称并将其添加到`$classes`数组中（Magento 1.7 中的第 247 行）。您当然应该考虑创建自己的模块并重写该块，而不是编辑核心文件。

# c# - 将语句插入 SQL Server 数据库

> ID：14877825
> 
> 赞同：2
> 
> 时间：2013-02-14T15:07:40.847
> 
> 标签：c#, sql-server, database, sql-server-2012

在过去的几天里，我试图找到这个错误，但没有任何成功。

我正在尝试在数据库中插入一个新行。一切顺利：没有错误，也没有程序崩溃。

我的`INSERT`陈述如下所示：

```
INSERT INTO Polozaj(Znesek, Uporabnik, Cas, Kupec, Popust, Poln_znesek)
VALUES(1,1,1,1,1,1) 
```

该语句没问题，因为当我在数据库中运行查询时，它会添加新行。

我的 C# 代码如下所示：

```
string connection = @"Data Source=(LocalDB)\v11.0;AttachDbFilename=" + Application.StartupPath + "\\Trgovina.mdf;Integrated Security=True";
SqlConnection cn = new SqlConnection(connection);

string payment = ((Button)sender).Text, maxID = string.Empty;
double discount = Convert.ToDouble(discauntText.Text), totalPrice = Convert.ToDouble(fullPriceText.Text), fullPrice = Convert.ToDouble(discountPriceText.Text);
switch (payment)
{
    case "Dobavnica": discount = 10; break;
    case "Kartica": discount = 0; break;
    case "Gotovina": discount = 5; break;
}

cn.Open();

SqlCommand maxIdCmd = new SqlCommand("SELECT MAX(Id_racuna) FROM Racun", cn);
maxID = Convert.ToString(maxIdCmd.ExecuteScalar());
maxID = maxID != "" ? Convert.ToString(Convert.ToInt32(maxID) + 1) : "1";

string stmt = "INSERT INTO Racun(Znesek, Uporabnik, Cas, Kupec, Popust, Poln_znesek) " + 
              "VALUES(@Price, @User, @Time, @Customer, @Discount, @FullPrice)";

SqlCommand cmd = new SqlCommand(stmt, cn);
cmd.ExecuteNonQuery();

cn.Close(); 
```

正如我已经提到的，看起来程序运行了这个查询，一切都很正常，但是当我查看 table`Racun`时，没有新行。此外，当我尝试刷新此表时，data visual studio (2012) 给了我一个看起来像这样的错误：`This database cannot be imported. It is either unsupported SQL Server version or an unsupported database compatibility.`

我的表`Racun`创建查询如下所示：

```
CREATE TABLE [dbo].[Racun] (
   [Id_racuna]   INT             IDENTITY (1, 1) NOT NULL,
   [Znesek]      NUMERIC (10, 3) NULL,
   [Uporabnik]   NCHAR (20)      NULL,
   [Cas]         NCHAR (15)      NULL,
   [Kupec]       NCHAR (10)      NULL,
   [Popust]      NUMERIC (10, 3) NULL,
   [Poln_znesek] NUMERIC (10, 3) NULL,
   PRIMARY KEY CLUSTERED ([Id_racuna] ASC)
); 
```

我不知道出了什么问题。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T15:19:53.187

像这样的插入有三种可能的情况：

1.  插入成功。
2.  你得到一个例外。
3.  您有一个触发器，它用其他一些操作替换插入。

我猜您没有触发器，并且由于您没有在表中获得记录，因此必须有一个例外。

您是否有任何代码可以在任何其他级别捕获异常？这将解释为什么您看不到它，并且它还会使数据库连接保持未关闭状态，这将解释为什么您在之后连接到数据库时遇到问题。

`using`即使代码中有错误，使用数据库连接块也会正确关闭它。

您正在使用参数化查询，但我看不到您将参数添加到代码中的任何位置的命令对象。那将是这样的：

```
cmd.Parameters.Add("Price", SqlDbType.Decimal).Value = price;
cmd.Parameters.Add("User", SqlDbType.NChar, 20).Value = user;
cmd.Parameters.Add("Time", SqlDbType.NChar, 15).Value = time;
cmd.Parameters.Add("Customer", SqlDbType.NChar, 10).Value = customer;
cmd.Parameters.Add("Discount", SqlDbType.Decimal).Value = discount;
cmd.Parameters.Add("FullPrice", SqlDbType.Decimal).Value = fullPrice; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T15:18:59.870

我会尝试将您的代码包装在一个`try`块中，看看您是否可以捕获`SqlExecption`：

```
try {
    SqlCommand cmd = new SqlCommand(stmt, cn);
    cmd.ExecuteNonQuery();
} catch (SqlException ex) {
    Console.WriteLine(ex.Message);
} 
```

**编辑：**看起来您缺少`INSERT`语句的参数，您可能应该考虑使用[`SqlTransaction`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqltransaction.aspx)：

```
SqlCommand maxIdCmd = new SqlCommand("SELECT MAX(Id_racuna) FROM Racun", cn);
maxID = Convert.ToString(maxIdCmd.ExecuteScalar());
maxID = maxID != "" ? Convert.ToString(Convert.ToInt32(maxID) + 1) : "1";

string stmt = "INSERT INTO Racun(Znesek, Uporabnik, Cas, Kupec, Popust, Poln_znesek) " + 
              "VALUES(@Price, @User, @Time, @Customer, @Discount, @FullPrice)";

SqlCommand cmd = new SqlCommand(stmt, cn);

// Adding parameters to the insert statement:
cmd.Parameters.AddWithValue("@Price", price);
cmd.Parameters.AddWithValue("@User", user);
cmd.Parameters.AddWithValue("@Time", time);
cmd.Parameters.AddWithValue("@Customer", customer);
cmd.Parameters.AddWithValue("@Discount", discount);
cmd.Parameters.AddWithValue("@FullPrice", fullprice);

// Start a transaction so we can roll back if there's an error:
SqlTransaction transaction = cn.BeginTransaction();
cmd.Transaction = transaction;

try {
    cmd.ExecuteNonQuery();
    transaction.Commit();
} catch (SqlException ex) {
    transaction.Rollback();
    Console.WriteLine(ex.Message);
} finally {
    cn.Close();
} 
```

# google-maps - 如何制作黑白的谷歌地图

> ID：14877827
> 
> 赞同：0
> 
> 时间：2013-02-14T15:07:54.270
> 
> 标签：google-maps, google-maps-api-3

我正在尝试制作黑白的谷歌地图，但我找不到办法。但是我发现这个网站已经实现了：[http](http://www.creuna.com/contact/find-us/) ://www.creuna.com/contact/find-us/ 。

有什么线索吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T15:13:59.773

我以前没用过，但看起来 Google 的地图 API 有一个样式部分，可以让您真正自定义地图的外观和感觉：

[https://developers.google.com/maps/documentation/javascript/styling](https://developers.google.com/maps/documentation/javascript/styling)

有很多例子应该能够提供帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T15:42:19.043

查看[Styled Map Wizard](http://gmaps-samples-v3.googlecode.com/svn/trunk/styledmaps/wizard/index.html) 这很接近：

```
 [ { 
  "featureType": "water", 
  "stylers": [ { 
    "color": "#ffffff" } 
    ] 
  },{ 
  "featureType": "landscape", 
  "elementType": "geometry", 
  "stylers": [ { 
    "color": "#000000" } 
   ] 
  },{ 
  "featureType": "administrative", 
  "elementType": "labels.text.fill", 
  "stylers": [ { 
    "color": "#ffffff" } 
    ] 
  },{ 
  "featureType": "administrative", 
  "elementType": "labels.text.stroke", 
  "stylers": [ { 
    "visibility": "simplified" } 
    ] 
  },{ 
  "featureType": "road", 
  "elementType": "geometry", 
  "stylers": [ { 
    "visibility": "off" } 
    ] 
  },{ 
  "featureType": "poi", 
  "elementType": "geometry.fill", 
  "stylers": [ { 
    "color": "#000000" }, { 
    "visibility": "simplified" } 
    ] 
  },{ 
  "featureType": "administrative.province", 
  "stylers": [ { 
    "visibility": "off" } 
    ] 
  },{ 
  "featureType": "road", 
  "elementType": "geometry.stroke", 
  "stylers": [ { 
    "color": "#ffffff" }, { 
    "weight": 2 }, { 
    "visibility": "off" } 
    ] 
  },{ 
  "featureType": "administrative.locality", 
  "stylers": [ { "visibility": "off" } 
    ] 
  },{ 
  "featureType": "road", 
  "elementType": "labels", 
  "stylers": [ { 
    "visibility": "off" } 
    ] 
  },{ 
  "featureType": "poi", 
  "stylers": [ { 
    "visibility": "off" } 
    ] 
  },{ 
  "featureType": "transit", 
  "stylers": [ { 
    "visibility": "off" } 
    ] 
  },{ 
  "featureType": "administrative.neighborhood", 
  "stylers": [ { 
    "visibility": "off" } 
    ] 
  } 
] 
```

[从文档中的这个例子](https://google-developers.appspot.com/maps/documentation/javascript/examples/maptype-styled-complex)开始[的工作示例/概念证明（使用上述样式）](http://www.geocodezip.com/v3_GoogleEx_maptype-styled-complexBW.html)显然需要一些调整。[仅供参考 - 您链接到的示例是Stamen Maps](http://maps.stamen.com/#toner/12/37.7706/-122.3782)的自定义地图类型。

# ios - 使用 adjustFontSizeToFitWidth 时确定 UILabel 高度以进行居中

> ID：14877831
> 
> 赞同：6
> 
> 时间：2013-02-14T15:07:59.870
> 
> 标签：ios, objective-c, uilabel

我有以下单元格设计，其中数字标签缩小，“整体”标签直接位于下方。

![在此处输入图像描述](../Images/6a691ad5bdb18c3043be60c887adac2d.png)

我已经正确设置了`adjustFontSizeToFitWidth`和`minimumFontSize`属性。字体大小调整正确。然而，将数字标签锚定到底部是具有挑战性的。特别是当字体缩小时，两个标签之间的间隙会变宽并且不会出现垂直居中。

我试过`sizeToFit`,`sizeThatFits`和使用字体的`pointSize`. 都失败了。

我知道`sizeWithFont:minFontSize:actualFontSize:forWidth:lineBreakMode:`，但不明白为什么我需要将它与`adjustFontSizeToFitWidth`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T15:13:11.677

啊，所以你想将`UILabels`放置在容器视图的中间（水平和垂直）？

我已经改写了我的答案，以便对未来的读者更有意义。

我的代码假设您设置了 3 个 IBOutlets：

```
UIView *containerView; //Your nice view containing the two textfields.
UILabel *points; //The label containing the number.
UILabel *overall; //The textfield containing the text 'overall'. 
```

您可以**在**分配文本并调用`sizeToFit`.

1.  第一行定位`UILabel`点，唯一的变化是 y 坐标是`containerView`其自身高度的一半减去一半。

    ```
    points.frame = CGRectMake(points.frame.origin.x, (containerView.frame.size.height / 2) - (points.frame.size.height / 2), points.frame.size.width, points.frame.size.height); 
    ```

2.  相应地定位`overall`- 假设数字和整体标签之间的距离为 6：

    ```
    int space = 6;

    overall.frame = CGRectMake(overall.frame.origin.x, points.frame.origin.y + points.frame.size.height + space, overall.frame.size.width, overall.frame.size.height); 
    ```

3.  阅读您的评论后，我认为您正在寻求此解决方案。如果您希望两者都`UILabels`出现在中间；`(overall.frame.size.height / 2) + (space / 2)`像这样从 y 值中减去`points`（下面是数字 2 的代码）：

    ```
    int space = 6;
    points.frame = CGRectMake(points.frame.origin.x, ((containerView.frame.size.height / 2) - (points.frame.size.height / 2)) - ((overall.frame.size.height / 2) + (space / 2)), points.frame.size.width, points.frame.size.height);
    overall.frame = CGRectMake(overall.frame.origin.x, points.frame.origin.y + points.frame.size.height + space, overall.frame.size.width, overall.frame.size.height); 
    ```

最后一点将产生像这个图像这样的输出。如您所见，蓝线是整个图像的一半，并在其中点与黑色矩形（紧贴在两个标签周围）相交。我希望这就是你所追求的。

![图像描绘效果](../Images/fef0862517d9b4bbc2da2d9c632e7998.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T15:58:29.540

不要使用两个标签，`CATextLayer`而是使用。您将能够轻松地将一个部分设为粗体，而将另一部分设为正常。相对于放置两个标签，加上一层的位置和调整大小将很容易。阴影设置，换行模式，字体你将能够漂亮地调整一切:)

# javascript - 如何获取对象的可用 CSS 类？

> ID：14877837
> 
> 赞同：0
> 
> 时间：2013-02-14T15:08:10.120
> 
> 标签：javascript, jquery, jquery-ui

我有一个包含如下元素的文档：

```
<ul class="fx-startpoint">
    <li>some text</li>
    <li>other text</li>
</ul> 
```

首先，我需要使用 jQuery 查看所有具有以 . 开头的类的元素`fx-`。我认为这是可能的，`$("class=^fx-")`但是我需要查看是否有其他可用的 CSS 文件中的元素类，`fx-`但它们当前未设置为元素或子元素（如 li 的）。

我怎么能用 jQuery/jQueryUI 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T15:17:21.853

选择器`class=^fx-`只会找到这样的元素：

```
<div class="fx-foo bar">...</div> 
```

...而不是像这样的：

```
<div class="bar fx-foo">...</div> 
```

...因为`fx-`没有出现在属性的*开头*。如果您可能有第二种形式，可悲的是，您唯一的选择是查看*所有*元素并过滤掉那些没有`fx-xxx`类的元素。当前没有“包含以开头的单词”的选择器。

至于查找定义以 开头的类选择器的所有规则`fx-`，您可以这样做。[`document.styleSheets`](https://developer.mozilla.org/en-US/docs/DOM/document.styleSheets)为您提供应用于当前文档的所有样式表的列表。每个样式表对象都有一个为其定义的规则列表（这将取决于`cssRules`或仅`rules`取决于浏览器的年龄和品牌）。每个规则（[`CSSStyleRule`对象](https://developer.mozilla.org/en-US/docs/DOM/CSSStyleRule)）都将包含有关规则的信息，包括`selectorText`为您提供规则的完整选择器。因此，您可以解析该选择器以查看它是否定义了以 . 开头的类规则`fx-`。确保在查看选择器时允许使用逗号（例如，`.foo, .fx-bar { ... }`），并注意解析选择器字符串虽然*不难*，但并非易事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T15:31:24.827

OP 发布的 jsFiddle 的一个分支：http: [//jsfiddle.net/mori57/kgqXY/](http://jsfiddle.net/mori57/kgqXY/)

```
function GetAppliedCssRules($element) {
    var appliedRules = [];
    for (var x = 0; x < document.styleSheets.length; x++) {
        var rules = document.styleSheets[x].cssRules;
        for (var i = 0; i < rules.length; i++) {
            var txt = rules[i].selectorText;
            if (txt.indexOf('.fx-') > -1) {
                appliedRules.push(txt);
            }
        }
    }
    return appliedRules;
} 
```

具体来说，您只是将搜索更改为查找 .fx-，这可以通过简单的 .indexOf 来完成。正则表达式也是可能的（正如其他几张海报所提到的）。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-14T15:16:25.013

```
var classList =$('#divId').attr('class').split(/\s+/); 
```

classList 返回一个类数组：然后您可以迭代并找到您想要的类。

```
var classList =$('#divId').attr('class').split(/\s+/);
$.each( classList, function(index, item){
if (item === 'someClass') {
   //do something
}
}); 
```

# c# - 在 C# 中循环锯齿状数组 --- 使用 foreach 而不是 for？

> ID：14877838
> 
> 赞同：4
> 
> 时间：2013-02-14T15:08:11.100
> 
> 标签：c#, arrays, loops, for-loop, foreach

我正在做一个项目，我发现自己使用嵌套`for`循环反复循环一个锯齿状数组。我想知道是否有一种更简洁的方式来使用它`foreach`？

这就是我的意思：

```
for (int ii = 0; ii < xDimension; ii++)
  {
    for (int jj = 0; jj < yDimension; jj++)
      {
        OutputArray[ii][jj] = someFunction(InputArray[ii][jj]);
      }
  } 
```

请注意，即使我的数据是固定大小的，我也在使用锯齿状数组，因为锯齿状数组比多维数组更快。不幸的是，速度是这个项目的一个问题，所以不幸的是，性能将超过我自己的强迫症编码需求。

有没有办法`foreach`避免嵌套`for`循环，但将输出数据放在正确的位置`OutputArray`？除了稍微整洁的代码之外，这样做（如果可能的话）是否会有任何好处/损失？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T15:17:22.757

如果你真的想创建一个锯齿状数组作为结果，你可以使用[`Array.ConvertAll`](http://msdn.microsoft.com/en-us/library/exc45z53.aspx)两次：

```
var result = Array.ConvertAll(input,
                              array => Array.ConvertAll(array, SomeFunction)); 
```

这比使用LINQ中的`Select`/稍微高效一些，因为它*知道*它将一个数组转换为另一个数组，因此可以立即创建目标数组。使用后跟需要逐步建立结果，就好像您将它们放入 a中一样，在缓冲区耗尽时复制它们 - 然后在最后“调整大小”数组。`ToArray`*`Select``ToArray``List<T>`*

 *另一方面，这些天使用 LINQ（根据 Daniel 的回答）可能会更加惯用......而且性能差异*通常*是微不足道的。我想我会把它作为另一种选择:)

（请注意，这会创建新数组，忽略现有的`OutputArray`......我假设你可以摆脱现有的创建`OutputArray`，尽管情况可能并非如此......）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T15:14:18.030

以下代码“更整洁”：

```
OutputArray = InputArray.Select(x => x.Select(y => someFunction(y)).ToArray())
                        .ToArray(); 
```

但我只会使用循环，因为这个 LINQ 版本有一个明显的缺点：它创建新数组而不是使用`OutputArray`. `OutputArray`如果您在向我们展示的循环之前创建，则此论点没有实际意义。
此外，它很难阅读。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T15:12:45.317

*您可以使用 a 更轻松地从*锯齿状数组中获取数据`foreach`，但是由于没有指示索引的变量，因此您无法像在示例中那样非常有效地*设置*数组的值。

如果您只是想*读取*这些值，您可以这样做：

```
foreach(int n in OutputArray.SelectMany(array=>array))
{
    Console.WriteLine(n);
} 
```

需要将`SelectMany`序列展平，以便它不是序列序列，而是单个序列。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T15:19:44.743

您甚至可以使用 LINQ 获取索引：

```
foreach (var t in InputArray.SelectMany(
    (inner, ii) => inner.Select((val, jj) => new { val, ii, jj })))
{
    OutputArray[t.ii][t.jj] = someFunction(t.val);
} 
```

但是，老实说，双`for`循环结构更易于维护。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-14T15:22:10.550

另一种选择，只是为了好玩：

```
foreach (var item in InputArray.SelectMany(x => x).Select((value, index) => new {value, index}))
{
    var x = item.index / yDimension;
    var y = item.index % yDimension;
    OutputArray[x][y] = someFunction(item.value);
} 
```

不过，我会坚持使用嵌套循环。*

# android - 如何格式化字符串日期并获取字符串作为结果？

> ID：14877845
> 
> 赞同：0
> 
> 时间：2013-02-14T15:08:36.943
> 
> 标签：android, datetime

我有一个日期作为格式的字符串`2013-02-12T20:52:20Z`，我想得到 string `20:52 12 Feb 2013`。

这该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T15:13:47.047

```
DateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss'Z'");
Date date = dateFormat.parse(yourStringDate);
String newDateString = new SimpleDateFormat("HH:mm dd MMM yyyy").format(date); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-22T08:17:31.930

试试这个

```
String datemillis = "2013-02-12T20:52:20Z";
            SimpleDateFormat  format = new SimpleDateFormat("yyyy-MM-dd");

            Date convertedDate = new Date();
            try {
                convertedDate = format.parse(datemillis);
            } catch (ParseException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 
```

# visual-studio - 如何在 MEF 中使用 IProjectionBuffer 而不创建编辑器实例？

> ID：14877853
> 
> 赞同：1
> 
> 时间：2013-02-14T15:08:56.240
> 
> 标签：visual-studio, mef, visual-studio-extensions

我正在尝试创建一个处理多语言内容类型的 Visual Studio 扩展。很像一些 mvc 模板和 Django 或 ASP.NET，其中某些部分的代码是另一种语言。

我知道我应该使用 Projection 并且我已经检查了[Django 的 Visual Studio 扩展](http://pytools.codeplex.com)，但那里的解决方案包括创建语言服务并费力地创建与代码编辑器相关的所有点点滴滴。在这里，我试图通过使用 MEF 来实现相同的目标。

我知道你可以`IProjectionBuffer CreateProjectionBuffer()`用来创建一个投影，但问题是如何用创建的**TextBuffer**替换当前的 TextBuffer以及何时是最好的时间。

也有人可能期望，如果他像这样指定“投影”类型的基本定义：

```
[Export]
[Name("Whatever")]
[BaseDefinition("code")]
[BaseDefinition("projection")]
internal static ContentTypeDefinition WhateverContentType = null; 
```

在提供程序中接收到的 TextBuffer 是类型`IProjectionBuffer`（毕竟 IProjectionBuffer 是从 ITextBuffer 继承的）。哪个*不是*，似乎投影基础定义没有任何效果。

因此，如果我想在 tldr 版本中重新表述我的问题：

*您如何以及何时将 IProjectionBuffer 应用于当前视图（使用 MEF 并且不创建编辑器实例）？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T17:24:53.050

所以如果我正确理解你的问题，答案是“你没有”。IWpfTextView 在创建时绑定到 ITextBuffer（或派生类型，如 IProjectionBuffer）的实现，并且无法更改。即使可以，许多其他扩展和语言服务也会对此感到最惊讶，并且可能会崩溃。

要解决您关于内容类型的第二个问题：简单地声明您具有“投影”的基本内容类型并不会使您成为投影缓冲区。真正说明的是您可能正在创建该类型的投影缓冲区，并且当您需要一些额外的 ITagger 支持时，标记器会按照您的期望投影到源缓冲区。

# layout - 在 Frame 中对齐 DialogBar 并设置其宽度

> ID：14877854
> 
> 赞同：1
> 
> 时间：2013-02-14T15:08:56.683
> 
> 标签：layout, mfc

我正在处理一个转移给我的 MFC 项目。它的基本布局（源自 的主框架`CFrameWnd`）显示在此草图中： ![主机布局](../Images/d6ec11d2a3e51658ec93754e87d30049.png)

和`CommandBar`都`ControlBar`源自`CDialogBar`，是使用`WS_CHILD | CBRS_ALIGN_RIGHT`as 样式创建的。
这对对齐很好。但是我想**定义这两个元素的宽度**并且找不到设置它的方法。

当我尝试`EnableDocking`使用对话框栏时，我无法解决断言。另外我不确定这是否是我正在寻找的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T13:28:58.420

覆盖[CalcDynamicLayout](http://msdn.microsoft.com/de-de/library/3y36zdka.aspx)并返回计算的大小是我想要的。

例子：

```
CSize CommandBar::CalcDynamicLayout(int nLength, DWORD dwMode)
{
    CSize size;
    CRect parentRect;
    if (GetParent())
        GetParent()->GetClientRect(&parentRect);
    size.cy = parentRect.Height();
    size.cx = (int)(abs(parentRect.Width() - parentRect.Height() + GetSystemMetrics(SM_CYMENUSIZE)) * 0.5);
    return size;
} 
```

# c - 如何打破C中的循环

> ID：14877861
> 
> 赞同：0
> 
> 时间：2013-02-14T15:09:07.990
> 
> 标签：c, loops, break, bisection

我正在编写一个二分法算法来查找多项式的根。我的代码的第二部分说如果变量`FP`等于零或它的绝对值`b-a`只是打破了我猜的 if 语句。

我希望程序完全停止 for 循环（迭代）并返回 p。最后，我想打印获得解决方案所需的迭代次数，但显然使用我的 printf 语句它表明即使获得了根（零），程序也会继续执行。

关于如何停止整个机制并返回为零的 p 值和它所花费的确切迭代次数的任何想法？谢谢

```
double computeroots(double a, double b, double epsilon, int MaxIter)
{
    double FA = pow(a,4) -4*a +  1;
    double FB = pow(b,4) - 4*b + 1;
    double FP;
    double p;
    int i;

    for(i=0;i<MaxIter;i++) {
        if(FA * FB < 0) {
            p = a + (b-a)/2;
            FP = pow(p,4) - 4*p +1;
            if(FP == 0 || abs(b-a) < epsilon) {
                return p;
                break;
            } else if (FA * FP >0) {
                a =p;
                FA = FP;
            } else {
                b = p;
                FB = FP;
            }
            i++;
        }
    }

    printf("The number of iterations is: %d\n", i);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T15:12:16.773

你的`printf`陈述没有被击中，因为你`return p;`在陈述之前有一个`break`。一条`return`语句立即退出函数。

您需要将`return`语句移到 之后`printf`，或将 移到`printf`之前`return`：

```
 if(FP == 0 || abs(b-a) < epsilon)
        {
            printf("the number of iterations is : %d\n", i);
            return p;
        }
        ...

    printf("failed to converge after %d iterations\n", i);
    return p;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T17:32:04.127

要合并所有必要的修改：

```
double computeroots(
  double a, 
  double b, 
  double epsilon, 
  size_t MaxIter, 
  size_t * pNumIter
) 
{
    double FA = pow(a,4) -4*a +  1;
    double FB = pow(b,4) - 4*b + 1;
    double FP;
    double p = NaN;
    size_t i;

    for(i=0; i<MaxIter; ++i) {
        if(FA * FB < 0) {
            p = a + (b-a)/2;
            FP = pow(p,4) - 4*p +1;
            if(FP == 0 || abs(b-a) < epsilon) {
                break;
            } else if (FA * FP >0) {
                a =p;
                FA = FP;
            } else {
                b = p;
                FB = FP;
            }
        }
    }

    *pNumIter = i;

    printf("the number of iterations is : %z\n", *pNumIter);

    return p;
} 
```

像这样称呼它：

```
double a, b, epsilon;
size_t sizeMax, sizeIterations;

... /* some initialisations here */

double d = computeroots(a, b, epsilon, sizeMax, &sizeIterations); 
```

修改注意事项：

*   删除错位`return`
*   最后添加了缺少的回报
*   将`int`s 改为 be `size_t`，作为一种`unsigned`更适合柜台的类型
*   添加对附加`size_t`变量的引用以返回迭代次数
*   删除了第二个增量`i`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T15:13:57.260

如果你有一个`return`陈述，那么你的`break`陈述是没有用的。return 退出函数的范围并返回给调用者，因此之后不再执行指令。

所以这：

```
return p;
break; 
```

应该变成：

```
printf("the number of iterations is : %d\n", i);
return p; 
```

如果您发现退出条件选择不正确，我猜这更像是一个**有限精度问题**。你正在检查`FP == 0`但是`FP`是 a所以你必须在足够接近 0 时`double`停止，而不是在它完全相等时停止。`FP`例如：`abs(FP) < epsilon`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-14T15:15:36.323

当您需要返回多个值时，您可以使用 out-arguments 来完成。将您的功能更改为

```
double computeroots(double a, double b, double epsilon, int MaxIter, int *numIterations) 
```

像这样称呼它：

```
int numIter;
soln = computeroots(a, b, epsilon, MaxIter, &numIter); 
```

在你的函数中，在返回之前，添加：

```
*numIterations = i; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-14T15:13:12.113

您可以返回一个双精度数组，其中第一个元素是结果，第二个元素是迭代次数。

或者，您将变量的引用传递给函数，并分配给它，如下所示：

```
double compute_something(int param1, int param2, int* iterations) {
    // your code ...
    // when you want to return, use this:
    *iterations = 5;
    return 1.23;
    // your code ...
}

int iter;
double result = compute_something(1,2, &iter); 
```

在此之后， result 包含结果，并 iter 您存储的迭代次数。此解决方案可能会更好，因为您没有将迭代次数（显然是整数）返回为双精度数。

# java - 使用 Timer Service 每 n 个月安排一次任务

> ID：14877864
> 
> 赞同：0
> 
> 时间：2013-02-14T15:09:20.460
> 
> 标签：java, jakarta-ee, timer, glassfish, scheduling

我正在使用 Java EE 应用程序服务器（GlassFish）的计时器服务，我想安排一个任务每 n 个月（例如每 2 个月）执行一次。我试过用 : `scheduleExpression.month(*/2)`。但我得到了这个例外：

> 无效的月份值：*/2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T15:55:27.410

根据规范：**只能**为秒、分钟和小时属性设置间隔。

但是你可以使用：

```
@Schedule(month="2,4,6,8,10,12") 
```

在第 2 个月（2 月）、第 4 个月（4 月）等运行您的任务...

否则有例如

```
@Schedule(dayOfMonth="1") 
```

这将在每个月的第一天运行任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T10:03:46.140

我认为我必须强制用户输入这些值（1、2、3、4、6、12）来解决问题。因此，我们可以确定执行任务的月份列表。

# actionscript-3 - 进度条，但不是预加载器或 FLV 搜索栏

> ID：14877873
> 
> 赞同：0
> 
> 时间：2013-02-14T15:09:37.890
> 
> 标签：actionscript-3, progress-bar, seekbar

我正在尝试创建一个进度条来监视加载的影片剪辑的时间线进度。那里的大多数教程都是基于预加载器的。虽然我知道这个概念是相似的，但我很挣扎。

用户通过单击左侧导航菜单加载各种影片剪辑。我希望进度条向用户显示他们在影片剪辑时间轴中的位置。我还希望在加载新影片剪辑时重新开始进度条。

我的进度条是 508 像素宽。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T16:24:33.137

真的很简单。您只需将总宽度乘以您在影片剪辑中的百分比，如下所示：

```
var clip:MovieClip; //set this to the movie clip that has been loaded
clip.addEventListener( Event.ENTER_FRAME, this.enterFrameHandler );
var progressBar:Shape = new Shape();
var totalWidth:Number = 508;

function enterFrameHandler( e:Event ):void {
    this.progressBar.graphics.clear();
    this.progressBar.graphics.beginFill( 0x000000 );
    this.progressBar.graphics.drawRect( 0, 0, ( this.clip.currentFrame / this.clip.totalFrames ) * this.totalWidth, 10 );
    this.progressBar.graphics.endFill();
} 
```

如果您指的是实际的视频剪辑（在这种情况下使用影片剪辑可能会令人困惑，因为有一个 MovieClip 类），这有点困难，因为`NetStream`该类没有进度事件或总时间属性。您必须侦听要接收的元数据，其中包含总时间，您将其保存到全局变量中。然后您可以使用上面显示的相同方法（在容器对象上使用 ENTER_FRAME，而不是电影对象）并`( NetStream.time / totalTime ) * totalWidth`改用。

# google-maps - 在 2 个位置之间绘制路线 Google Maps API Android V2

> ID：14877878
> 
> 赞同：9
> 
> 时间：2013-02-14T15:10:02.833
> 
> 标签：google-maps, google-maps-android-api-2, latitude-longitude

我在 android 上玩 Google Maps API V2。尝试在 2 个位置之间获取路径并使用 JSON Parsing 执行此操作。

我得到了一条路线。路线开始了它应该是怎样的。但在某一时刻，它走错了路。

我的最终目的地是错误的。在其他一些位置，我的应用程序刚刚被终止。

这就是我所做的

这是我的 makeURL 方法

```
public String makeUrl(){
    StringBuilder urlString = new StringBuilder();
    urlString.append("http://maps.googleapis.com/maps/api/directions/json");
    urlString.append("?origin="); //start positie
    urlString.append(Double.toString(source.latitude));
    urlString.append(",");
    urlString.append(Double.toString(source.longitude));
    urlString.append("&destination="); //eind positie
    urlString.append(Double.toString(dest.latitude));
    urlString.append(",");
    urlString.append(Double.toString(dest.longitude));
    urlString.append("&sensor=false&mode=driving");

    return urlString.toString();
} 
```

我的 JSON 解析器

```
public class JSONParser {

static InputStream is = null;
static JSONObject jObj = null;
static String json = "";

public JSONParser() {
    // TODO Auto-generated constructor stub
}

public String getJSONFromURL(String url){

    try {
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();

        is = httpEntity.getContent();
    } catch(UnsupportedEncodingException e){
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;

        while((line = reader.readLine()) != null){
            sb.append(line + "\n");
            //Log.e("test: ", sb.toString());
        }

        json = sb.toString();
        is.close();
    } catch (Exception e) {
        // TODO Auto-generated catch block
        Log.e("buffer error", "Error converting result " + e.toString());
    }

    return json;
} 
```

我用这种方法绘制我的路径

```
public void drawPath(String result){
    try{
        final JSONObject json = new JSONObject(result);
        JSONArray routeArray = json.getJSONArray("routes");
        JSONObject routes = routeArray.getJSONObject(0);

        JSONObject overviewPolylines = routes.getJSONObject("overview_polyline");
        String encodedString = overviewPolylines.getString("points");
        Log.d("test: ", encodedString);
        List<LatLng> list = decodePoly(encodedString);

        LatLng last = null;
        for (int i = 0; i < list.size()-1; i++) {
            LatLng src = list.get(i);
            LatLng dest = list.get(i+1);
            last = dest;
            Log.d("Last latLng:", last.latitude + ", " + last.longitude );
            Polyline line = googleMap.addPolyline(new PolylineOptions().add( 
                    new LatLng(src.latitude, src.longitude), new LatLng(dest.latitude, dest.longitude))
                    .width(2)
                    .color(Color.BLUE));
        }

        Log.d("Last latLng:", last.latitude + ", " + last.longitude );
    }catch (JSONException e){
        e.printStackTrace();
    }
} 
```

我用

```
private List<LatLng> decodePoly(String encoded){

    List<LatLng> poly = new ArrayList<LatLng>();
    int index = 0;
    int length = encoded.length();
    int latitude = 0;
    int longitude = 0;

    while(index < length){
        int b;
        int shift = 0;
        int result = 0;

        do {
            b = encoded.charAt(index++) - 63;
            result |= (b & 0x1f) << shift;
            shift += 5;
        } while (b >= 0x20);

        int destLat = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
        latitude += destLat;

        shift = 0;
        result = 0;
        do {
            b = encoded.charAt(index++) - 63;
            result |= (b & 0x1f) << shift;
            shift += 5;
        } while (b > 0x20);

        int destLong = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
        longitude += destLong;

        poly.add(new LatLng((latitude / 1E5),(longitude / 1E5) ));
    }
    return poly;
} 
```

然后用 AsyncTask 编码

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-08T12:10:41.843

抱歉让您久等了..我已经修复了一段时间，但我还没有把我的解决方案放在这里。

基本上是笔误...

在我的 Json 解码器中，我使用 2 Do while 语句

```
while (b >= 0x20); 
```

在第二个 Do While 语句中，我忘记了“=”。因此它没有正确渲染......

谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T22:47:00.523

我相信您是`LatLng`从`overview_polyline`. 根据 Google 文档，*“包含一个对象，其中包含一组编码点，这些编码点代表结果方向的近似（平滑）路径。”* .

我很确定您可以获得更详细的路线来构建`LatLng`基于`legs[]`和`steps[]`数据的对象，因为官方文档指出*步骤是方向路线的最原子单元，包含描述特定的单个指令的单个步骤旅程*。

看一眼：

[https://developers.google.com/maps/documentation/directions/#Routes](https://developers.google.com/maps/documentation/directions/#Routes)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-28T00:05:13.607

Tmichel，Michael 有正确的挥手，因为在你的路线上的腿和台阶上，将线绘制在街道外。腿和步骤，具有围绕坐标的信息，用于提醒用户的信息。

**折线是街道上正确且精确的点。** 对不起我的英语不好

# ios - 在 UIScrollView 中获取 UItextField 的真实位置

> ID：14877880
> 
> 赞同：3
> 
> 时间：2013-02-14T15:10:05.953
> 
> 标签：ios, xcode

我在 UIscrollview 中有一系列 UItextViews。文本视图的数量取决于用户，他想要多少就多少。

我为每个 UItextView（我添加到 NSMutableArray）分配了相同的 UItapGestureRecogniser。当点击 UItextView 时，会绘制一条线，将 textField 连接到用户在屏幕上触摸的点。一切正常，除了当我向下滚动时，我的起点的 y 坐标错误，我是这样设置的：

```
CGPoint coords;
coords.y = textname.frame.origin.y + 15; 
```

...其中 textname 是手势的发送者

有没有办法在不考虑 UItextView 在 UIscrollView 中的情况下获取实际屏幕的坐标？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T15:26:17.010

该类`UIView`提供了将坐标从一个视图转换为另一个视图的方法。

要将视图的原点转换为屏幕坐标，您可以：

```
CGPoint screenOrigin = [someView convertPoint:someView.bounds.origin toView:nil]; 
```

传递转换为屏幕坐标`nil`的方法。`toView`

在您的情况下，替换`someView`为`textname`.

# css - 如何重置或删除 Twitter Bootstrap 中选择元素上的渐变？

> ID：14877883
> 
> 赞同：12
> 
> 时间：2013-02-14T15:10:21.780
> 
> 标签：css, twitter-bootstrap, customization

我需要完全删除或覆盖选择元​​素上的渐变。我已经下载了 Bootstrap 的自定义副本，没有表单组件，并且选择元素以我需要的方式出现，但其他一切显然都消失了，我只需要删除选择渐变。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T15:23:44.193

渐变将在`.btn-*`课堂上（假设您使用的是按钮下拉菜单）。

例如（使用 btn-primary）：

```
.btn-primary {
  color: #ffffff;
  text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.25);
  background-color: #006dcc;
  *background-color: #0044cc;
  background-image: -moz-linear-gradient(top, #0088cc, #0044cc);
  background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#0088cc), to(#0044cc));
  background-image: -webkit-linear-gradient(top, #0088cc, #0044cc);
  background-image: -o-linear-gradient(top, #0088cc, #0044cc);
  background-image: linear-gradient(to bottom, #0088cc, #0044cc);
  background-repeat: repeat-x;
  border-color: #0044cc #0044cc #002a80;
  border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);
  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ff0088cc', endColorstr='#ff0044cc', GradientType=0);
  filter: progid:DXImageTransform.Microsoft.gradient(enabled=false);
} 
```

要删除渐变，您只需删除所有背景属性（包括底部的过滤器），除了`background-color;`：

```
.btn-primary {
  color: #ffffff;
  text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.25);
  background-color: #006dcc;
  border-color: #0044cc #0044cc #002a80;
  border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);
} 
```

您还想通过使用单色边框来完成：

```
.btn-primary {
  color: #ffffff;
  text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.25);
  background-color: #006dcc;
  border-color: #0044cc;
} 
```

您还需要对 .btn-*:hover、:focus 和 :active 样式执行相同的操作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-03-30T17:46:42.417

*Herr_Hansen*的评论对我有用。

对于 Safari，尝试使用 CSS添加`-webkit-appearance:none;`到`<select>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-27T15:39:59.097

在我的例子中，我发现渐变样式在 bootstrap.theme.css 中，我正在加载我的其他样式。一旦我删除了这个文件，一切都恢复了正常。

# iphone - 无法将元数据分离到不同的字符串

> ID：14877888
> 
> 赞同：1
> 
> 时间：2013-02-14T15:10:38.870
> 
> 标签：iphone, ios, metadata, audio-streaming

在另一组代码中检索的元数据正在屏幕上显示在同一字符串上，并用“ - ”分隔它们。如何将每组信息放到它们自己的行或字符串上？

```
 NSDictionary *currentlyPlayingTrackInfo;
    NSString *msg = albumInfo;
    NSString *newArtist;
    NSString *newSongName;

    NSRange range = [msg rangeOfString:@" - "];

    if (range.location != NSNotFound){
        newArtist = [msg substringToIndex:range.location];
        newSongName = [msg substringFromIndex:(range.location + range.length)];
    }

    if (newArtist != nil){
        currentlyPlayingTrackInfo = [NSDictionary dictionaryWithObjects:[NSArray arrayWithObjects:newArtist, newSongName, pmAlbumArt, nil] forKeys:[NSArray arrayWithObjects:MPMediaItemPropertyArtist, MPMediaItemPropertyTitle, MPMediaItemPropertyArtwork, nil]];
    }else{
        currentlyPlayingTrackInfo = [NSDictionary dictionaryWithObjects:[NSArray arrayWithObjects:msg, pmAlbumArt, nil] forKeys:[NSArray arrayWithObjects:MPMediaItemPropertyTitle, MPMediaItemPropertyArtwork, nil]];
    }
    [MPNowPlayingInfoCenter defaultCenter].nowPlayingInfo = currentlyPlayingTrackInfo;
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T17:23:55.983

如果您想将 msg 保留为一个字符串，您可以将“-”替换为“\n”，这样会将其分成 3 行。

```
 NSString *s = @"Artist - Song - Album";
    NSString *newString = [s stringByReplacingOccurrencesOfString:@"-" withString:@"\n"];
    NSLog(@"%@",newString); 
```

# matlab - 在matlab中实现crank nicolson方法

> ID：14877895
> 
> 赞同：3
> 
> 时间：2013-02-14T15:10:53.677
> 
> 标签：matlab, pde

我正在尝试在 matlab 中实现曲柄 nicolson 方法，并设法使实现在没有边界条件的情况下工作（即 u(0,t)=u(N,t)=0）。我遇到的问题是添加边界条件。在我当前的实现中似乎没有考虑边界条件。

这是我当前的实现： CN 方法：

```
function [ x, t, U ] = Crank_Nicolson( vString, fString, a, N, M,g1,g2 )
%The Crank Nicolson provides a solution to the parabolic equation provided
%   The Crank Nicolson method uses linear system of equations to solve the
%   parabolic equation.

%Prepare the grid and grid spacing variables. 
dt = 1/M;
t = dt * [0:M];
h = 1/N;
x = 2 + h * [0:N]';%Shift x by 2 that way we have 2 <= x <= 3

%Prepare the matrix that will store the solutions over the grid
U = zeros(N+1, M+1);
%This will fill the first column with the initial condition. feval will
%evaluate the initial condition at all values of x
U(:,1) = feval(vString, x);
%This fills the boundary conditions. One boundary condition goes on the
%first row the other boundary condition goes on the last row
U(1,:) = feval(g1, t);
U(end,:) = feval(g2, t);

%The loop that will populate the matrix with the solution
n = 1:N+1;%Start at 2 since n=1 is the initial condition
e = ones(N+1,1);
B = spdiags([-1*e 2*e -1*e],-1:1, N+1, N+1)*(1/h^2);
A = (speye(N+1)+((a*dt)/2)*B);
X = (speye(N+1)-((a*dt)/2)*B);
R = chol(A);%Choleski decomposition
for m=2:M+1
    %The linear system is solved. 
    b = X*U(n,m-1) + dt * feval(fString, x(n), (t(m)+t(m-1))*0.5);
    b = R'\b;
    U(n,m) = R\b;
end
end 
```

我知道当边界条件不是问题时，这个实现是有效的。有什么我想念的吗？另外，我很高兴听到是否有任何通用的 matlab 格式建议，因为我对 matlab 比较陌生。

如果您对整个项目感兴趣，请下载[此](https://dl.dropbox.com/u/59746617/CN%20test.zip)

# java - 如何将实体保存到数据库中？

> ID：14877897
> 
> 赞同：0
> 
> 时间：2013-02-14T15:11:03.043
> 
> 标签：java, hibernate, spring-mvc

我有一个简单的 spring mvc 项目，用于将用户添加到数据库中。我使用休眠 4.1.9、spring 框架 3.2.0 和 PostgreSQL 9.2。

请参阅下面的代码

**用户 bean**

```
package org.vdzundza.beans;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.SequenceGenerator;
import javax.persistence.Table;

@Entity
@Table(name = "users")
public class User {
    @Id
    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "user_seq")
    @SequenceGenerator(name = "user_seq", sequenceName = "user_seq")
    @Column(name = "id")
    private Long id;

    @Column(name = "network")
    private String network;

    @Column(name = "photo")
    private String photo;

    @Column(name = "identity")
    private String identity;

    @Column(name = "firstname")
    private String firstName;

    @Column(name = "lastname")
    private String lastName;

    @Column(name = "hash")
    private String hash;

    @Column(name = "isonline")
    private Boolean isOnline;

    public User() {
    }
    //getters and setters

    @Override
    public String toString(){
        StringBuilder out = new StringBuilder();
        out.append("[");
        out.append("name: " + firstName + " " + lastName);
        out.append("\tnetwork: " + network);
        out.append("\t Is online: " + isOnline);
        return out.toString();

    }        
} 
```

**用户DAO**

```
package org.vdzundza.dao;

import java.util.List;

import org.hibernate.SessionFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Repository;
import org.vdzundza.beans.User;

@Repository
public class UserDAOImpl implements UserDao {

    @Autowired
    private SessionFactory sessionFactory;

    @Override
    public void addUser(User user) {
        sessionFactory.openSession().save(user);
    }

    @SuppressWarnings("unchecked")
    @Override
    public List<User> listUser() {
        return sessionFactory.openSession().createCriteria(User.class).list();
    }
} 
```

**用户服务**

```
package org.vdzundza.service;

import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;
import org.vdzundza.beans.User;
import org.vdzundza.dao.UserDao;

@Service
public class UserServiceImpl implements UserService {

    @Autowired
    private UserDao userDAO;

    @Transactional
    public void addUser(User user) {
        userDAO.addUser(user);
    }

    @Transactional
    public List<User> listUser() {
        return userDAO.listUser();
    }
} 
```

**根上下文.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
    xmlns:p="http://www.springframework.org/schema/p" xmlns:c="http://www.springframework.org/schema/c"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd">

    <!-- Root Context: defines shared resources visible to all other web components -->
    <context:annotation-config />
    <context:component-scan base-package="org.vdzundza.dao" />
    <context:component-scan base-package="org.vdzundza.service" />

    <bean id="propertiesConfig"
        class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer"
        p:location="/WEB-INF/jdbc.properties" />

    <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource"
        destroy-method="close">
        <property name="driverClassName" value="${jdbc.driverClassName}" />
        <property name="url" value="${jdbc.url}" />
        <property name="username" value="${jdbc.username}" />
        <property name="password" value="${jdbc.password}" />
    </bean>

    <bean id="sessionFactory"
        class="org.springframework.orm.hibernate4.LocalSessionFactoryBean"
        lazy-init="false">
        <property name="dataSource" ref="dataSource" />
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.PostgreSQLDialect</prop>
                <prop key="hibernate.show_sql">true</prop>
                <prop key="hibernate.hbm2ddl.auto">update</prop>
            </props>
        </property>
        <property name="packagesToScan" value="org.vdzundza.beans" />
    </bean>

    <bean id="transactionalManager"
        class="org.springframework.orm.hibernate4.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory" />
    </bean>
</beans> 
```

**用户控制器**

```
package org.vdzundza.web;

import java.util.Map;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.validation.BindingResult;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.vdzundza.beans.User;
import org.vdzundza.service.UserService;

@Controller
@RequestMapping("/user")
public class UserController {

    @Autowired
    private UserService userService;

    @RequestMapping("/")
    public String index(){
        return "redirect:/user/index";
    }

    @RequestMapping("/index")
    public String listUsers(Map<String, Object> map){
        map.put("user", new User());
        map.put("userList", userService.listUser());
        return "user";
    }

    @RequestMapping(value = "/add",method = RequestMethod.POST)
    public String addUser(@ModelAttribute("user") User user, BindingResult result){
        userService.addUser(user);
        return "redirect:/user/index";
    }
} 
```

**用户.jsp**

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@ page language="java" contentType="text/html; charset=utf-8"
    pageEncoding="utf-8"%>
<%@ taglib prefix="form" uri="http://www.springframework.org/tags/form"%>
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>user test spring and hibernate</title>
</head>
<body>
    <a href="${pageContext.request.contextPath}/">Go back</a>
    <br />

    <form:form method="post"
        action="${pageContext.request.contextPath}/user/add"
        commandName="user">
        <table>
            <tr>
                <td><form:label path="firstName">First Name</form:label></td>
                <td><form:input path="firstName" /></td>
            </tr>

            <tr>
                <td><form:label path="lastName">Last Name</form:label></td>
                <td><form:input path="lastName" /></td>
            </tr>

            <tr>
                <td><form:label path="network">network</form:label></td>
                <td><form:input path="network" /></td>
            </tr>
            <tr>
                <td colspan="2"><input type="submit" value="add user" /></td>
            </tr>

        </table>
    </form:form>

    <c:if test="${empty userList}">
        <h2>user list is empty</h2>
    </c:if>

    <c:if test="${!empty userList}">
        <h2>user list</h2>
        <table>
            <tr>
                <th>First name</th>
                <th>Last name</th>
                <th>Network</th>
            </tr>

            <c:forEach items="${userList}" var="user">
                <tr>
                    <td>${user.firstName}</td>
                    <td>${user.lastName}</td>
                    <td>${user.network}</td>
                </tr>
            </c:forEach>
        </table>
    </c:if>
</body>
</html> 
```

新用户未保存在数据库中。当我单击“添加用户”时，我在控制台中看到：

```
Hibernate: select nextval ('user_seq')
Hibernate: select this_.id as id0_0_, this_.firstname as firstname0_0_, this_.hash as hash0_0_, this_.identity as identity0_0_, this_.isonline as isonline0_0_, this_.lastname as lastname0_0_, this_.network as network0_0_, this_.photo as photo0_0_ from users this_ 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T15:15:55.870

打开会话并保存对象后...刷新会话，然后关闭它。

```
Session session = sessionFactory.openSession();
session.save(user);
session.flush();
session.close(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T09:23:27.887

获得以下优势`Hibernate Transaction`：

在一个内`transaction`您可以进行多项操作，并且`commit` `transaction`在成功完成所有操作后可以一次完成。这里的好处是，`rollback`如果您的`operation batch`.

```
 Session session = factory.openSession();
    Transaction tx = null;
    try {
        tx = session.beginTransaction();

        session.save(user);

        tx.commit(); // Flush happens automatically
    }
    catch (RuntimeException e) {
        tx.rollback();
        throw e; // or display error message
    }
    finally {
        session.close();
    } 
```

# html - chrome：内联块内浮动元素的“幽灵”宽度

> ID：14877898
> 
> 赞同：0
> 
> 时间：2013-02-14T15:11:06.217
> 
> 标签：html, css, google-chrome, webkit

测试用例[http://codepen.io/anon/pen/hFumw](http://codepen.io/anon/pen/hFumw)。
在除 chrome 之外的所有浏览器中都能正常工作。在 chrome 中，宽度的`.container`计算就像`.child.one`元素不浮动一样。有没有办法解决这种行为？
HTML：

```
<div class="container">
  <div class="header">
  header
  </div>
  <div class="child one">
  </div>
  <div class="child one">
  </div>
  <div class="child one">
  </div>
</div> 
```

CSS：

```
.container {
  background:red;
  padding:10px;
  display: inline-block;
  overflow:hidden;
  .child {
    width:100px;
    height: 100px;
    background: green;
    float:left;
    clear:left;
    border: 1px solid blue;
  }
  .one {
    float: left;
    clear:left;
    background:yellow;
  }
  .header {
    background:blue;
  }
} 
```

**升级版：**

```
.header {
  float: left;
  width: 100%;
} 
```

在我的特定情况下是不可接受的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T15:21:18.623

遵循 CSS 似乎在 Chrome 和 FF 中运行良好。请参阅标头声明。

```
body {
  text-align: center;
}
.container {
  margin-left:auto;
  margin-right:auto;
  background:red;
  padding:10px;
  display: inline-block;
  overflow:hidden;
  .child {
    width:100px;
    height: 100px;
    background: green;
    float:left;
    clear:left;
    border: 1px solid blue;
  }
  .one {
    float: left;
    clear:left;
    background:yellow;
  }
  .two {
    float: right;
    margin-left:0px;
    clear: right;
  }
  .header {
    background:blue;
    display:block;
    float:left;
    width:100%;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T15:24:09.613

尝试将此CSS添加到`.header`

```
clear:both;
float:left;
width:100% 
```

# iptables - 使用 iptables 将端口转发到其他客户端，但可以识别原始发件人 ip

> ID：14877900
> 
> 赞同：2
> 
> 时间：2013-02-14T15:11:11.577
> 
> 标签：iptables

我在专用的 ubuntu 服务器上有一个防火墙（基于 iptables）。我有几个 LAN 客户端。

在我的一个 LAN 客户端上，我正在运行可以基于 IP 限制访问的软件。对我来说，重要的是我可以通过使用 WAN IP 而不是 LAN IP 来限制它。

我已经配置了我的防火墙，以便将一个/一个端口转发到一个运行良好的 LAN 客户端（在 stackoverflow 中找到了解决方案）。到目前为止没有问题。

但是在 LAN 客户端我看不到外部发送者的 IP，但是 - 我认为由于转发 - 客户端看到数据包来自我的 LAN 服务器。

问题是：如何将我服务器上的一个端口转发到另一个具有不同端口的 LAN IP，但这样 LAN 客户端才能识别数据包的外部 IP。

让我们更清楚：

服务器局域网IP：192.168.1.10 服务器端口：8080

应该转发到：客户端局域网IP：192.168.1.20 客户端局域网端口：8000

使用 iptables 我有：

```
iptables -t nat -A PREROUTING -p tcp -i eth0 --dport 8080 -d 192.168.1.10 -j DNAT --to 192.168.1.20:8000

iptables -A FORWARD -p tcp -d 192.168.1.20 --dport 8000 -m state --state NEW,ESTABLISHED,RELATED -j ACCEPT

iptables -t nat -A POSTROUTING -p tcp --dport 8000 -d 192.168.1.20 -j SNAT --to 192.168.1.10 
```

正如所写的那样有效，但是当 IP 88.77.66.55 的某人发送一个数据包时，我的 LAN 客户端 (192.168.1.20) 看到该数据包来自我的 LAN 服务器 (192.168.1.10)，不幸的是不是来自 88.77.66.55。

我可以解决这个...？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-14T20:12:25.113

您的最后一条规则与 MASQUERADE 规则相同。

例如：

```
iptables -t nat -A POSTROUTING --out-interface eth0 -j MASQUERADE

```

使用 MASQUERADE 或 SNAT，您正在修改源 IP 地址，因为它通过第一台服务器。第二台服务器看到数据包并将其响应发送回该 IP，然后将其发送回客户端。

但是，服务器将请求视为来自 192.168.1.10 - 因为这是它来自的地方。

客户端 > 网关 > iptables-router > 服务器（参见 .10）> iptables-router > 网关 > 客户端

如果您删除 MASQUERADE/SNAT，服务器会看到真实 IP，但是当它发送回复时，数据包将发送到它的默认网关（默认路由），这可能是您的路由器或数据中心的网关。客户端从它不知道的 IP 地址得到响应，也不知道如何处理它，所以看起来它不起作用。或者，网关/计算机看到没有关联连接的 SYNACK 并丢弃数据包。

客户端 > 网关 > iptables-router > 服务器 > 网关 (DROP) 或 > 客户端 (DROP)

如果希望服务器获取客户端的真实IP，这里有两种常见的方法可以让它工作：

1.  将服务器的网关（默认路由）设置为 iptables 机器的 IP 地址（即：您正在运行这些 iptables 规则的机器）。在这种情况下，服务器将所有外部流量（即：对来自互联网的随机 IP 地址的响应）发送到正在等待回复的 iptables 机器的 MAC 地址。iptables 会将其发送回客户端。webserver 机器位于 iptables 机器*后面*，使用 iptables 机器作为路由器。

客户端 > 网关 > iptables-router > 服务器（真实 IP） > iptables-router > 网关 > 客户端

1.  使用像 nginx 这样的 HTTP 代理，它的工作方式与您现在的工作方式相同，客户端只能看到内部 .10 地址。但是，因为它是一个代理，它可以发送一个 HTTP 标头，例如 X-Original-IP-Address: 123.456.789.012 ，其中包含客户端的真实 IP 地址。

客户端 > 网关 > iptables-router > 服务器（查看 X-Original-IP 标头）> iptables-router > 网关 > 客户端

最好的问候，尼尔

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-13T11:26:31.240

让我们定义：
{源地址} - 数据包发送者（某个远程地址）
{接口地址} - 数据包接收者（防火墙外部地址）
{本地地址} - 数据包端点接收者本地网络地址
{本地网关} - 防火墙本地地址
{proto block} - IP 协议限制（即 -p tcp -m tcp --dport xxxx）
1\. 如果您希望客户端查看数据包源的 IP 地址 - 请执行以下操作：

```
IPTABLES -t nat -A PREROUTING -s {source address} -d {interface address} {proto block} -j DNAT --to-destination {local address}
IPTABLES -A FORWARD -d {local address} -j ACCEPT 
```

不要忘记制作：

```
echo "1" > /proc/sys/net/ipv4/ip_forward 
```

它将启用数据包转发。
在这种情况下，您的端点会看到原始 IP 地址，但是，它会尝试响应默认网关，如果此地址不在本地网络范围内，请添加：

```
route add {source address} gw {local gateway} 
```

这将告诉您的端点通过 {local gateway} 发送 {source address} 的数据包（或回复）。
2.不想endpoint看到原来的ip地址，不想修改路由表，添加

```
IPTABLES -t nat -A POSTROUTING -s {source address} -j MASQUERADE 
```

在这种情况下，LAN 客户端将只能看到 {local gateway} 地址。

在任何情况下，不要忘记通过以下方式伪装所有从本地网络发送到远程地址的数据包：

```
IPTABLES -t nat -A POSTROUTING !-d 192.168.0.0/16 -j MASQUERADE 
```

3.  您希望保留源地址和目标地址以供进一步处理。在这种情况下，您的 {local gateway} 将只是数据包路由的一部分，而 {local address} 必须只是下一跳 - 为此使用策略路由。

首先，添加自己的低于252标签的路由表到`/etc/iproute2/rt_tables`

然后 - 您可以将 {source address} 的规则直接添加到规则集或标记来自 {source address} 的数据包 - 这两种方法都将为该数据包查找您的自定义路由表：

```
ip rule add from {source address} table custom_table 
```

或者

```
iptables -t mangle -A PREROUTING -s {source address} -j MARK --set-mark 1
ip rule add fwmark 1 table custom_table 
```

然后，为这些数据包创建 {local address} 下一跳网关：

```
ip route add default via {local address} table custom_table 
```

当然，`POSTROUTING`链将在数据包退出之前应用，如果需要，您可以调整源地址。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T20:15:31.907

只需删除最后一条规则（不要执行 SNAT）。或者通过添加 -o eth0 条件（假设 eth0 是外部接口）来限制 SNAT 仅允许伪装您的 LAN 客户端：

```
iptables -t nat -A POSTROUTING -p tcp -o eth0 --dport 8000 -d 192.168.1.20 -j SNAT --to 192.168.1.10 
```

# c# - 有没有办法“编程”一个额外的显示器？

> ID：14877901
> 
> 赞同：2
> 
> 时间：2013-02-14T15:11:15.457
> 
> 标签：c#, windows-8

有没有办法在代码中模拟/模拟显示，以便 Windows 将其识别为额外的屏幕？类似于如何将某些内容渲染到屏幕外渲染目标，但使其成为 Windows 使用的屏幕外显示设备。

最好它应该呈现到屏幕外 RT，然后我可以将其流式传输到我的平板电脑上的应用程序，并让我的应用程序流回触摸输入以供 Windows 使用。

这实际上就像一个远程管理工具，但远程客户端将拥有自己的屏幕，而不是控制现有屏幕之一（或者像远程桌面那样锁定桌面）。

# ios - Restkit v0.20 到 NSDictionary 的动态映射

> ID：14877903
> 
> 赞同：2
> 
> 时间：2013-02-14T15:11:33.540
> 
> 标签：ios, restkit

在 Restkit v0.10 中，可以使用从[https://stackoverflow.com/a/12057398/871459获取的以下代码来完成到 NSDictionary 的映射](https://stackoverflow.com/a/12057398/871459)

```
RKObjectMapping* mapping = [RKDynamicObjectMapping dynamicMapping];
mapping.objectMappingForDataBlock = ^(id data) {
    NSDictionary* object = [data objectForKey: @"object"];
    NSArray* keys = [object allKeys];

    RKObjectMapping* dataMapping = [RKObjectMapping objectMapping];
    //Use the keys to define mapping
    return dataMapping;
}; 
```

在 v0.20 中，这不再可能。如何在 Restkit v0.20 上实现相同的功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T04:00:53.920

在 0.20 中，他们使用[RKDynamicMapping](http://restkit.org/api/0.20.0/Classes/RKDynamicMapping.html#//api/name/objectMappingForRepresentation%3a)而不是 RKDynamicObjectMapping。我还没有测试，但答案可能在这里：

```
RKDynamicMapping* dynamicMapping = [RKDynamicMapping new];    
[dynamicMapping setObjectMappingForRepresentationBlock:RKObjectMapping *^(id data) {
    NSDictionary* object = [data objectForKey: @"object"];
    NSArray* keys = [object allKeys];

    RKObjectMapping* dataMapping = [RKObjectMapping objectMapping];
    //Use the keys to define mapping
    return dataMapping;
}]; 
```

或者看看[他们的 0.20 教程](https://github.com/RestKit/RestKit/wiki/Object-Mapping#dynamic-object-mapping)：

# cycle - 在长度 <= k 的有向图中查找所有循环

> ID：14877905
> 
> 赞同：1
> 
> 时间：2013-02-14T15:11:49.967
> 
> 标签：cycle, directed-graph

有没有办法修改算法

[在无向图中查找所有循环](https://stackoverflow.com/questions/12367801/finding-all-cycles-in-undirected-graphs)

将边缘视为有向且仅长度 <= k 的循环？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T13:44:24.387

我自己回复

```
static void Main(string[] args)
    {
        int k = 4;
        for (int i = 0; i < graph.GetLength(0); i++)
            for (int j = 0; j < graph.GetLength(1); j++)
            {
                findNewCycles(new int[] { graph[i, j] },k);
            }

        foreach (int[] cy in cycles)
        {
            string s = "" + cy[0];

            for (int i = 1; i < cy.Length; i++)
                s += "," + cy[i];

            Console.WriteLine(s);
        }
    }

    static void findNewCycles(int[] path, int k)
    {
        int n = path[0];
        int x;
        int[] sub = new int[path.Length + 1];

        if (path.Length < k + 1)
        {

            for (int i = 0; i < graph.GetLength(0); i++)
                for (int y = 0; y <= 1; y = y + 2)
                    if (graph[i, y] == n)
                    //  edge referes to our current node
                    {
                        x = graph[i, (y + 1) % 2];
                        if (!visited(x, path))
                        //  neighbor node not on path yet
                        {
                            sub[0] = x;
                            Array.Copy(path, 0, sub, 1, path.Length);
                            //  explore extended path
                            findNewCycles(sub,k);
                        }
                        else if ((path.Length > 2) && (x == path[path.Length - 1]))
                        //  cycle found
                        {
                            int[] p = normalize(path);
                            int[] inv = invert(p);
                            if (isNew(p) && isNew(inv))
                                cycles.Add(p);
                        }
                    }
        }

    }

    static bool equals(int[] a, int[] b)
    {
        bool ret = (a[0] == b[0]) && (a.Length == b.Length);

        for (int i = 1; ret && (i < a.Length); i++)
            if (a[i] != b[i])
            {
                ret = false;
            }

        return ret;
    }

    static int[] invert(int[] path)
    {
        int[] p = new int[path.Length];

        for (int i = 0; i < path.Length; i++)
            p[i] = path[path.Length - 1 - i];

        return normalize(p);
    }

    //  rotate cycle path such that it begins with the smallest node
    static int[] normalize(int[] path)
    {
        int[] p = new int[path.Length];
        int x = smallest(path);
        int n;

        Array.Copy(path, 0, p, 0, path.Length);

        while (p[0] != x)
        {
            n = p[0];
            Array.Copy(p, 1, p, 0, p.Length - 1);
            p[p.Length - 1] = n;
        }

        return p;
    }

    static bool isNew(int[] path)
    {
        bool ret = true;

        foreach (int[] p in cycles)
            if (equals(p, path))
            {
                ret = false;
                break;
            }

        return ret;
    }

    static int smallest(int[] path)
    {
        int min = path[0];

        foreach (int p in path)
            if (p < min)
                min = p;

        return min;
    }

    static bool visited(int n, int[] path)
    {
        bool ret = false;

        foreach (int p in path)
            if (p == n)
            {
                ret = true;
                break;
            }

        return ret;
    }
} 
```

# perl - Scalar::Utillooking_like_number 返回数字类型

> ID：14877909
> 
> 赞同：9
> 
> 时间：2013-02-14T15:12:04.417
> 
> 标签：perl, numbers, scalar

我注意到looks_like_number 并不像我假设的那样简单地返回真/假，而是实际上返回一个字节，指示perl 内部说存储在标量中的数字类型。例如：

```
perl  -e'use Scalar::Util qw/looks_like_number/; for (qw/ 1 3 10 34.23 545435.234 2343.0 234 -1423 1sddf -865178652134876152348761253487613254 sdf 24363456345636534563567253765734655  8764325hjkh435 iuh340874 &*^*& 786521948761324876132497821347816.23452345 -8762135487126387432.12435154243 0 nan inf/) { print $_, ": ", looks_like_number($_), "\n" } '
1: 1
3: 1
10: 1
34.23: 5
545435.234: 5
2343.0: 5
234: 1
-1423: 9
1sddf: 0
-865178652134876152348761253487613254: 10
sdf: 0
24363456345636534563567253765734655: 2
8764325hjkh435: 0
iuh340874: 0
&*^*&: 0
786521948761324876132497821347816.23452345: 6
-8762135487126387432.12435154243: 14
0: 1
nan: 36
inf: 20 
```

它实际上并没有记录在我可以找到的 Scalar::Util 中，只是提到它返回 perlapi 的looks_like_number 值，这也没有在文档中。乍一看，它似乎是：

*   & 1 = 数字
*   & 2 = 64 位
*   & 4 = 浮点数
*   & 8 = 负数
*   & 16 = 无穷大
*   & 32 = 不是数字

这些掩码在代码中是否可移植且安全使用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T15:34:33.793

不，如果它们没有记录在案，它们可能会发生变化。而“数字”和“64 位”并不是对这些标志的充分描述。在 Perl 代码中了解他们*所做*的似乎并不是特别有用。

你想解决什么问题？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T15:39:40.727

不要依赖未记录的行为，返回值绑定到 Perl 的内部，它可以（并且可能会）在未来发生变化；它甚至可能会有所不同，具体取决于您的脚本在哪个平台/架构上运行！

如果您想测试 NaN、无穷大或负零，请参阅[此问题](https://stackoverflow.com/questions/1185822/how-do-i-create-or-test-for-nan-or-infinity-in-perl)。

# performance - 测试具有不同浏览模式的并发用户

> ID：14877912
> 
> 赞同：1
> 
> 时间：2013-02-14T15:12:16.043
> 
> 标签：performance, jmeter, load-testing

因此，今天使用 Jmeter，虽然我知道我可以使用线程、循环等对具有并发用户的网站进行负载测试，但我想知道是否可以设置一个测试，比如 50 个用户访问该网站，然后他们每个人都浏览该网站不同的方式？

以前有没有人这样做过，或者 jmeter 不是可以使用的工具？
寻找一些建议或想法如何在 Jmeter 中做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:03:47.287

假设您至少有以下简单的可能性：[随机顺序控制器](http://jmeter.apache.org/usermanual/component_reference.html#Random_Order_Controller)。

通过单独的采样器或采样器组实现一组导航/浏览步骤（通过例如[简单控制器](http://jmeter.apache.org/usermanual/component_reference.html#Simple_Controller)或[事务控制器](http://jmeter.apache.org/usermanual/component_reference.html#Transaction_Controller)分组- 如果某些步骤应始终按定义的顺序执行）。
这将是导航步骤的“池”。
将所有这些步骤作为子采样器添加到 Random Order Controller，让您可以为每个用户随机生成不同的导航步骤序列。在这种情况下，您可能必须将您的登录/注销采样器（如果有）从随机顺序控制器中取出。您也可以使用登录/注销等两种情况。

```
Thread Group
    ...
    Login Sampler
    Random Order Controller
        Sampler A
        Sampler B
        ...
        Sampler X
    Logout Sampler
    ... 
```

你也可以另外看看

*   [随机控制器](http://jmeter.apache.org/usermanual/component_reference.html#Random_Controller)
*   [切换控制器](http://jmeter.apache.org/usermanual/component_reference.html#Switch_Controller)：例如在 csv 文件中定义每个用户的导航场景，在脚本执行期间读取这些场景并将提取的操作分配给每个线程；
*   [包括控制器](http://jmeter.apache.org/usermanual/component_reference.html#Include_Controller)。

# c++ - 无法从一个控件向另一个控件发送自定义消息

> ID：14877914
> 
> 赞同：0
> 
> 时间：2013-02-14T15:12:15.520
> 
> 标签：c++, winapi, user-interface

我这里有一个情况，我不知道出了什么问题。我有一个父母和 2 个 sunclassed 孩子。两者都是编辑类型。现在我正在使用第一个控件（第一个子控件）从用户那里获取输入，一切正常，然后我通过自定义消息向父级发送消息，然后我想将消息转发到第二个控件，但当我采用

```
SendMessage(); 
```

什么都没发生……

我的自定义消息是这样定义的：

```
 #define WM_USERMESSAGE    0x0401 
```

我的另一个问题是如何发送字符串？因为当我通过 lParam 将消息发送给父亲时，它说它的值为 72，但我没有看到对我发送的文本的任何引用。

这些是代码段：孩子 1 收到输入后向父亲发送消息：

```
 case WM_KEYUP:
                {
                    switch (wParam) {
                        case VK_RETURN:
                        {
                            length = GetWindowTextLength(hwnd);
                            GetWindowText(hwnd, buf,length);
                            SetWindowText(hwnd,NULL);
                            tempa = SendMessage(GetParent(hwnd), WM_USERMESSAGE,sizeof(buf),*buf);
                            return 0;
                        }
                    }
                return 0;
                } 
```

父亲收到消息并尝试转发：

```
 case WM_USERMESSAGE:
            {
                int tempb = SendMessage(nhwnd, WM_USERMESSAGE, wParam, (LPARAM)"Hi");
            } 
```

2 号孩子正在收听消息：

```
 case WM_USERMESSAGE:
            {
            SetWindowText(window, "hi");//(TCHAR*)lParam);
            return 0;
            } 
```

（现在如您所见，我使用静态字符串来检查函数是否有效，但我想更改它们以便从消息中接收信息）提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T19:06:35.013

您`SendMessage()`从第一次编辑到父窗口的初始设置未正确发送字符串数据。您正在取消引用缓冲区指针，因此您只发送第一个字符（72 是 ASCII`'H'`字符）。您需要摆脱该取消引用并按原样传递缓冲区指针。如果您要发送缓冲区长度（不使用），则需要发送`GetWindowText()`返回的长度，而不是缓冲区的完整大小，以便接收者确切知道缓冲区中实际有多少字符。

试试这个：

```
case WM_KEYUP:
{
    switch (wParam)
    {
        case VK_RETURN:
        {
            ZeroMemory(buf, sizeof(buf));
            length = GetWindowTextLength(hwnd);
            if (length > 0)
                length = GetWindowText(hwnd, buf, min(length+1, sizeof(buf)));
            SetWindowText(hwnd, NULL);
            tempa = SendMessage(GetParent(hwnd), WM_USERMESSAGE, length, (LPARAM)buf);
            return 0;
        }
    }
    return 0;
} 
```

.

```
case WM_USERMESSAGE:
{
    int tempb = SendMessage(nhwnd, WM_USERMESSAGE, wParam, lParam);
    return 0;
} 
```

.

```
case WM_USERMESSAGE:
{
    SetWindowText(window, (LPTSTR)lParam);
    return 0;
} 
```

假设您的所有内容`HWNDs`都是有效的，那么转发应该可以正常工作。如果该消息没有全部完成，那么您的其中一个`HWNDs`是无效的。

# android - 操作栏选项卡 - 如何从 Activity 中的片段中检索值？

> ID：14877915
> 
> 赞同：1
> 
> 时间：2013-02-14T15:12:24.953
> 
> 标签：android, android-fragments, android-actionbar

我有设置活动，它有 3 个选项卡（每个选项卡包含片段）+ 在主要活动中还有按钮行 - 按钮 OK 和 Cancel。当我按 OK 时，我想做这样的事情：

1）从所有片段中获取我的所有自定义变量 2）将它们保存到共享首选项

但是如何访问片段变量呢？我试过这个：

在主要活动中添加选项卡：

```
 ActionBar.Tab tab1 = actionbar.newTab().setText(res.getString(R.string.actSettingsTab1));
    tab1.setTabListener(new MyTabsListener(new Tab1Fragment(), "tab1"));
    actionbar.addTab(tab1);
    //...similar for all tabs 
```

这是我的标签监听器：

```
class MyTabsListener implements ActionBar.TabListener {
    private Fragment fragment;
    private String tag;

    public MyTabsListener(Fragment fragment, String tag) {
        this.fragment = fragment;
        this.tag = tag;
    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction ft) {
        // do nothing
    }

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        ft.replace(R.id.fragment_container, fragment, tag);
    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        ft.remove(fragment);
    }
} 
```

这就是我想从片段中获取变量的方式：

```
Tab1Fragment tab1 = (Tab1Fragment) fm.findFragmentByTag("tab1");
Tab2Fragment tab2 = (Tab1Fragment) fm.findFragmentByTag("tab2");
Tab3Fragment tab3 = (Tab1Fragment) fm.findFragmentByTag("tab3"); 
```

但这很奇怪 - findFragmentByTag 仅返回所选选项卡的片段，否则返回 null。因此，当我选择 tab1 并按 ok 时，findFragmentByTag 返回 tab1 的片段，但其他片段返回 null。

也许我做错了什么，或者我的整个路线都是错误的。如何从父活动中的所有片段中检索值并将它们保存到共享首选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T15:14:03.317

我不建议实际访问片段中的变量。您可以在这些片段中创建一个公共方法来执行您想要的共享首选项保存。前任：

```
Tab1Fragment tab1 = (Tab1Fragment) fm.findFragmentByTag("tab1");
Tab2Fragment tab2 = (Tab1Fragment) fm.findFragmentByTag("tab2");
Tab3Fragment tab3 = (Tab1Fragment) fm.findFragmentByTag("tab3");
tab1.savePreferences();
tab2.savePreferences();
tab3.savePreferences(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T15:25:21.630

> ```
> ActionBar.Tab tab1 = actionbar.newTab().setText(res.getString(R.string.actSettingsTab1));
> tab1.setTabListener(new MyTabsListener(new Tab1Fragment(), "tab1"));
> actionbar.addTab(tab1);
> //...similar for all tabs 
> ```

这不会将您的 Fragment 添加到后台堆栈，因此您只会获得选定的选项卡，其他选项卡为空。

我认为您能做的最好的事情是使用**getTabCount()**遍历 ActionBar 的选项卡，然后您应该能够使用**getTabAt(int index) 获取您的内容。获取自定义视图（）**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T15:44:01.700

将过程分为两个步骤：

1) 实时收集所有片段的所有设置（即当它们被用户更改时）。使用侦听器模式，以便片段将公开一个接口，当用户修改给定片段负责的任何设置时，它们将通过该接口通知附加的侦听器。让活动将自己作为侦听器附加到所有片段，并捕获更改（将它们存储在适合您的结构中）。

2) 让活动在单击确定按钮时使用 SharedPreferences 保存设置。它不必访问片段，因为它总是关于用户更改的任何设置。

这样，您不必一次访问所有片段，如果将它们从内存中删除，这是不可能的（因为它们在给定时间无论如何都不可见）。相反，您可以在每次选择/显示时将活动重新分配为选定片段的侦听器。

# python - 矩阵 matplotlib 将列表中的某个事物关联到一行

> ID：14877918
> 
> 赞同：1
> 
> 时间：2013-02-14T15:12:27.527
> 
> 标签：python, matplotlib, wxpython

我已经创建了一个坐标`[(1,109),(2,21),(3,23),(4,52)...]`一直到 155 左右的矩阵（矩阵的行增加到 155）我还有一个数字列表，`[1,1,0,2,1,3,4]`一直到 155 在一个单独的图表上，比如第二个向下的图表在这个[http://matplotlib.org/examples/api/colorbar_only.html](http://matplotlib.org/examples/api/colorbar_only.html)我想将数字列表与矩阵的行相关联。让每个数字代表不同的颜色。1 为红色，0 为蓝色，依此类推。我能做到吗？如果是这样，我该怎么办？

谢谢

# sql - 子字符串 - T-SQL

> ID：14877920
> 
> 赞同：1
> 
> 时间：2013-02-14T15:12:30.403
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有一个字符串被插入到表中。字符串的大小和内容各不相同。

我基本上想要两个已知单词（`_ Part1ID =`和`_ Part2ID =`）之间的所有字符。

我想从整个字符串中获取这两个字符串之间的所有内容。

我已经尝试过[这种方法](http://ask.sqlservercentral.com/questions/41388/query-to-select-a-string-between-two-known-strings.html)，但之前得到了一切`_ Part2ID =`。

任何人都知道如何在给定的条件下进行这项工作？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T15:20:31.200

```
declare @someString nvarchar(200) = 'lkasjdlkasjdl_Part1ID=hereIsTheBitYouWant_Part2IDlksajdlaksdj'

select  substring(@someString, patindex('%_Part1ID%', @someString) + 9, patindex('%_Part2ID%', @someString) - (patindex('%_Part1ID%', @someString) + 9)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T15:22:42.717

```
DECLARE @s varchar(1000)
SET @s = 'this is a test _ Part1ID = of the emergency broadcast _ Part2ID = system'
SELECT SUBSTRING(@s, PATINDEX('%_ Part1ID =%',@s)+11,
            PATINDEX('%_ Part2ID =%',@s)-PATINDEX('%_ Part1ID =%',@s)-11) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-14T15:22:57.550

尝试：

```
with a as
(select 'abc_ Part1ID =efg_ Part2ID =jkl' a)
select a,
       substring(a,
                 charindex('_ Part1ID =',a)+len('_ Part1ID ='),
                 charindex('_ Part2ID =',a)-charindex('_ Part1ID =',a)-len('_ Part1ID ='))
from a 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-14T15:28:14.983

使用您的关键字和字段名称修改此模板。

```
declare @mystring nvarchar(max) = 'some irrelevant text STARTPOINTI Should Return this text to youENDPOINT other irrelevant text';
declare @bookend1 nvarchar(max) = 'STARTPOINT';
declare @bookend2 nvarchar(max) = 'ENDPOINT';
select
  substring
   (
    @mystring
   ,CHARINDEX(@bookend1,@mystring) + len(@bookend1)
   ,charindex(@bookend2,@mystring) - charindex(@bookend1,@mystring) - len(@bookend1)
   ) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-14T15:52:05.553

假设字符串（或字符串列）被命名`s`，尝试：

```
substring(s, nullif(charindex('_ Part1ID = ', s),0) + 12   -- skip tag (length = 12)
           , nullif(charindex('_ Part2ID = ', s),0)
             - (nullif(charindex('_ Part1ID = ', s),0) + 12) ) 
```

这假定 Part2ID 标记永远不会出现在 Part1ID 之前。`nullif(charindex(...),0)`如果我们没有找到标签，我们这样做是为了让结果正确地为空。

如果你要创建一个内联函数，你可以更优雅一点：

```
CREATE FUNCTION dbo.fnGetPart ( 
    @s varchar(8000), @tag1 varchar(20), @tag2 varchar(20)
) returns varchar(100) AS
BEGIN
    return (    select substring(@s, i1, i2 - i1)
        from (  select i1, i2 = nullif(charindex(@tag2, @s, i1),0)    -- ', i1' ensures we look after @tag1
            from (select i1 = nullif(charindex(@tag1, @s),0) + len(@tag1)) t ) t )
END 
```

# c - 查找二维数组中的重复元素

> ID：14877922
> 
> 赞同：0
> 
> 时间：2013-02-14T15:12:39.803
> 
> 标签：c, arrays

我需要在二维数组中找到重复的元素。

```
route_ptr->route[0][1] = 24;
route_ptr->route[0][2] = 18;
route_ptr->route[1][1] = 25;
route_ptr->route[2][1] = 18;
route_ptr->route[3][1] = 26;
route_ptr->route[3][2] = 19;
route_ptr->route[4][1] = 25;
route_ptr->route[4][2] = 84; 
```

这些是我的数据；必须找到 route[2][1]（route[0][2] 的副本）和 route[4][1]（route[1][1] 的副本）的重复条目。

解决方案是 route[i][j] 的重复 'i' 值，即本例中的 2 和 4。

请指导我。

```
#include <stdio.h>

struct route{
    int route[6][6];
    int no_routes_found;
    int count_each_route[6];
};

int main() {
    struct route *route_ptr, route_store;  
    route_ptr=&route_store;

    int i,j,k;

    // the data
    route_ptr->route[0][1] = 24;
    route_ptr->route[0][2] = 18;
    route_ptr->route[1][1] = 25;
    route_ptr->route[2][1] = 18;
    route_ptr->route[3][1] = 26;
    route_ptr->route[3][2] = 19;
    route_ptr->route[4][1] = 25;
    route_ptr->route[4][2] = 84;
    route_ptr->count_each_route[0]=3;
    route_ptr->count_each_route[1]=2;
    route_ptr->count_each_route[2]=2;
    route_ptr->count_each_route[3]=3;
    route_ptr->count_each_route[4]=3;
    route_ptr->no_routes_found=5;

    ////  process
    for (i = 0; i <(route_ptr->no_routes_found) ; i++)
    {
        for (j = 1; j < route_ptr->count_each_route[i]; j++)
        {
            printf("\nroute[%d][%d] = ", i, j);
            printf("%d",route_ptr->route[i][j]);
        }
    }
} 
```

预期的解决方案是：

```
route[0][1] is compared by route [0][2] i.e [24 !=18]
route[0][1] and route [0][2] is compared by route[1][1] i.e [24 && 18 !=25]
route[0][1] and route[0][2] and route[1][1] is compared by route[2][1] i.e [ 24&&18&&25 is compared by 18, there is a matching element,
   save the newcomer 'i' value which matches to the existence and drop it for next checking]
   break the 'i' loop
route[0][1], route[0][2], route[1][1] is now compared route[3][1]
route[0][1], route[0][2], route[1][1] ,[3][1] is now compared route[3][2]
route[0][1], route[0][2], route[1][1] ,[3][1] ,[3][2] is now compared to route [4][1] i.e [ now there is a match to route[1][1], so save the newcomer 'i' value and  break the 'i' loop 
```

所以 i 值 [2 和 4] 是重复的，这是我的代码的预期结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:32:59.373

有什么反对索引零，零？

我也没有看到指针恶作剧的意义。

初始化所有数据是一般安全的事情。你知道，归零或什么的。

您在解决方案中建议的算法很难忠实于，但这会找到您的重复项。您必须在两个维度上遍历整个数组两次。

这也将匹配数据中的所有零，因此您可以添加一个例外来忽略路由值为零。

```
//Cycling through the array the first time.
for (i = 0; i < 6 ; i++)
{
    for (j = 0; j < 6; j++)
    {
        //Cycling through the array the second time
        for (x = 0; x < 6 ; x++)
        {
            for (y = 0; y < 6; y++)
            {
               if(i==x && j==y)
                   continue;
               if(routestore.route[i][j] == routestore.route[x][y])
                   printf("You have a match [%d][%d] =  [%d][%d]", i, j, x,y);
            }
        }
    }
} 
```

好的，所以如果您只想查看一次匹配项，即 [0][2] == [2][1] 而不是 [2][1] == [0][2]，那么您可以执行类似的操作我在下面有什么。这让我挠了挠头。通常，当它是一个简单的项目列表时，您将内部循环初始化为外部循环的值加一。但是当它是一个二维数组时，你不能完全做到这一点。所以我放弃了，做了一个超级蹩脚的黑客工作。我非常喜欢在可能的情况下进行暴力破解。我通常会告诉你不要使用这样的指针。

现在......如果你有三个相似的值，这仍然会有多次点击。如果这让您感到厌烦，那么您需要开始构建一个列表，并在您浏览数据时将命中与该列表进行比较。

```
#include <stdio.h>
#include <string.h>

struct route{
    int route[6][6];
    int no_routes_found;
    int count_each_route[6];
};

int lameAddOneAlternative(int *i, int *j)
{
  if((*j)<6)
  {
    (*j)++;
    return 1;
  }
  else if (*i<6)
  {
    (*i)++;
    (*j) = 0;
    return 1;
  }  
  return 0;
}

int main(int argc, char **argv)
{
  struct route routeStore;  
  int i,j,x,y;

  memset(routeStore.route,0,sizeof(int)*36);

  // the data
  routeStore.route[0][1] = 24;
  routeStore.route[0][2] = 18;
  routeStore.route[1][1] = 25;
  routeStore.route[2][1] = 18;
  routeStore.route[3][1] = 26;
  routeStore.route[3][2] = 19;
  routeStore.route[4][1] = 25;
  routeStore.route[4][2] = 84;

  //Cycling through the array the first time.
  for (i = 0; i < 6 ; i++)
  {
    for (j = 0; j < 6; j++)
    {
      x=i;
      y=j;
      //Cycling through the array the second time
      while(lameAddOneAlternative(&x,&y))
      {
        if(routeStore.route[i][j] == 0 )
          continue;
        if(routeStore.route[i][j] == routeStore.route[x][y])
          printf("You have a match [%d][%d], [%d][%d] == %d\n", i, j, x,y, routeStore.route[i][j] );

      }
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T19:43:50.673

```
for (i = 0; i <(route_ptr->no_routes_found) ; i++)
{
     for (j = 1; j < route_ptr-> count_each_route[i]; j++)
     {          
          for (x = 0; x < (route_ptr->no_routes_found) ; x++)
          {
               for (y = 0; y < route_ptr-> count_each_route[x]; y++)
               {
                  if(i==x && j==y)
                  continue;
                  if(route_ptr->route[i][j] == route_ptr->route[x][y])
                  printf("You have a match [%d][%d] =  [%d][%d]\n", i, j, x,y);
              }
         }     

    } 
```

# powershell - Github 克隆问题

> ID：14877924
> 
> 赞同：1
> 
> 时间：2013-02-14T15:12:41.350
> 
> 标签：powershell, github

我正在尝试克隆一个名为 Storm-Starter 的 git 项目，但是在运行`git clone https://github.com/nathanmarz/storm-starter.git`命令时出现以下错误：

```
Cloning into 'storm-starter'...
error: SSL certificate problem, verify that the CA cert is OK. Details:
error:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed while accessing https://github.com/nat
hanmarz/storm-starter.git/info/refs?service=git-upload-pack
fatal: HTTP request failed 
```

我已经按照 github 上的教程（当出现此类问题时有人建议这样做）关于如何[生成和提交 SSH 密钥](https://help.github.com/articles/generating-ssh-keys)并且一切顺利，所以我不知道发生了什么。

我也在 Windows 8 机器上运行它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-20T13:19:05.973

您可以通过设置禁用 SSL CERT 验证：

```
git config --global http.sslVerify false 
```

见[这里](http://whatiscomingtomyhead.wordpress.com/2013/06/06/problems-cloning-git-repository-over-https/)。

# iphone - 如果您正在为越狱的 iPhone 进行编译，您应该针对哪个内核？尤其是 iPhone 4s

> ID：14877926
> 
> 赞同：1
> 
> 时间：2013-02-14T15:12:47.830
> 
> 标签：iphone, ios, mobile, arm, boinc

如果要为越狱的 iPhone 编译，需要针对什么内核？尤其是 iPhone 4s。我认为针对 Cortex-A9 进行编译是安全的，但很想听听对此的任何想法。

我正在寻找为 iOS 编译 BOINC 并想对此进行测试。最终我计划尝试向 App Store 提交一个官方的网格计算应用程序，但相信首先应该进行一些“幕后”的试验和错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T04:32:44.257

A5 是 armv7，而 iPhone 5 中的 A6 是 armv7s

# android - 亚行在黄瓜测试中间歇性地拒绝连接

> ID：14877927
> 
> 赞同：0
> 
> 时间：2013-02-14T15:12:51.470
> 
> 标签：android, ruby, cucumber, adb

我正在针对 Android 应用程序运行 Cucumber 测试。在 Cucumber 运行时，我将间歇性地得到一个失败的测试，并显示消息“现有连接被远程主机强行关闭”。在运行单个场景时有时会看到相同的消息，但在运行数十个场景时最常出现。

我已经将此追溯到我认为是 Android 调试桥 (ADB) 的问题，因为相同的场景将传递给相同场景的其他运行。我还尝试在 Cucumber 运行之前终止连接（通过“adb kill-server”命令），但没有成功。

我正在对通过 USB 端口连接的物理设备运行这些测试。

我知道这是一个非常具体的场景，但有没有其他人在使用 Android 调试桥时遇到过类似的问题，如果是这样，你采取了哪些步骤？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-21T00:29:13.750

您可以尝试的一个选项是设置 RESET_BETWEEN_SCENARIOS=1，这将在每个场景之前卸载并重新安装应用程序。不是理想的修复方法，但我正在使用此选项，但没有看到连接错误（大约有 70 个场景）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-13T11:36:33.640

当appium不会进行新会话时，我通常会遇到这种情况，因为现有会话正在进行中。

在这种情况下，您只需检查运行`parallel tests` [https://github.com/saikrishna321/AppiumTestDistribution的文档](https://github.com/saikrishna321/AppiumTestDistribution)

在我的情况下，每次，我都会遇到这个错误，我的脚本会重新启动 appium`killall adb`并且`adb start-server`

# java - Jruby 中的 Java 数组

> ID：14877934
> 
> 赞同：7
> 
> 时间：2013-02-14T15:13:09.023
> 
> 标签：java, ruby, jruby

我有一个 Java 库，我从中提取了一些数据。

它输出了一个 3D 数组。但是我不能用它做任何事情。

```
[[D[]@5615a6e0 
```

是我得到的回应。我试过映射它：

```
{ |arr| arr.map { |arr| arr.to_a } } 
```

但我什么也没说，解析这个java数组以供ruby使用的最佳方法是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-14T22:31:50.803

应该不是问题。只需使用`to_a`

Java 代码：

```
package com.test.sof;

public class MyTest {
    public static int[] ReturnTestArray() {
        int[] anArray = new int[3];
        anArray[0] = 1;
        anArray[1] = 2;
        anArray[2] = 3;
        return anArray;
    }
} 
```

JRuby代码：

```
require 'java'
java_import com.test.sof.MyTest

java_array = MyTest.ReturnTestArray
p java_array
#=> int[1, 2, 3]@484c6b

ruby_array = Array.new
p ruby_array
#=> []
ruby_array = java_array.to_a

p ruby_array.size
#=> 3
p ruby_array.join(', ')
#=> "1, 2, 3" 
```

# matlab - Matlab根据数据和它们发生的时间计算异常值

> ID：14877937
> 
> 赞同：1
> 
> 时间：2013-02-14T15:13:18.847
> 
> 标签：matlab, time, outliers

在 Matlab 中，我有一个大矩阵 A。矩阵的第一列包含以秒为单位的时间。第二至第 13 列包含计算结果。对于每一列（第一列除外），我通过以下方式计算了晶须：

分位数(A,[.75])-1.5*(分位数(A,[.75])-分位数(A,[.25]))

现在我想知道每列中有多少异常值（=低于晶须的值），以及它们何时发生。这将使我能够计算出异常值随时间的分布情况。

我更喜欢创建一个循环，它给我 12 个包含两列的矩阵。第二列应包含异常值的值（= 晶须下方单元格的值），中间没有任何零，第一列应包含异常值发生的时间（按时间顺序）。

我怎样才能创建这个？

问候，

文森特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T15:24:12.220

无需循环：改用矩阵运算和逻辑索引。

假设您有一个矩阵`A`并且异常值阈值`thr`是 a `1x12 vector`，每列的阈值是：

```
vals = A(:,2:13);
outliers = bsxfun(@lt, vals, thr); #% @lt is 'less than' function handle
#% outliers is a Nx12 logical matrix with true(1) where the value < threshold
#% and false(0) otherwise. 
```

要获取这些异常值发生的时间（对于给定的列，假设`column 2`原始矩阵的数据部分）：

```
t = A(outliers(:,2), 1);
#%    ^____________ logical index of rows where outliers occurred in that column 
```

您还可以通过求和轻松获得每列（或行）中异常值的数量：

```
num_outliers = sum(outliers,1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T15:24:19.627

让，

```
A =

    0.6260    0.7690    0.1209    0.5523    0.0495
    0.6609    0.5814    0.8627    0.6299    0.4896
    0.7298    0.9283    0.4843    0.0320    0.1925
    0.8908    0.5801    0.8449    0.6147    0.1231
    0.9823    0.0170    0.2094    0.3624    0.2055 
```

对于第二列：

```
B = quantile(A(:,2),[.75])-1.5*(quantile(A(:,2),[.75])-quantile(A(:,2),[.25])) 
```

然后，

```
index = find(A(:,2) < B)

value_outliner = A(index,2)
outliner_time = A(index,1) 
```

# jinja2 - Jinja2 自动创建前缀空格

> ID：14877941
> 
> 赞同：2
> 
> 时间：2013-02-14T15:13:30.740
> 
> 标签：jinja2, string-formatting, whitespace, indentation, template-engine

在 StringTemplate 中——我在一些项目中使用它来发出 C 代码——空白前缀会自动添加到输出行中：

```
PrintCFunction(linesGlobal, linesLocal) ::= <<
void foo() {
    if (someRuntimeFlag) {
        <linesGlobal>
        if (anotherRuntimeFlag) {
            <linesLocal>
        }
    }
}
>> 
```

当此模板在 StringTemplate 中呈现时，为所有发出的行复制多行*linesGlobal*和*linesLocal字符串前缀的空格。*生成的 C 代码例如：

```
void foo() {
    if (someRuntimeFlag) {
        int i;
        i=1;   // <=== whitespace prefix copied in 2nd
        i++;   // <=== and 3rd line
        if (anotherRuntimeFlag) {
            int j=i;
            j++; //  <=== ditto
        }
    }
} 
```

我是 Jinja2 的新手 - 并试图复制它，看看我是否可以使用 Python/Jinja2 做同样的事情：

```
#!/usr/bin/env python
from jinja2 import Template

linesGlobal='\n'.join(['int i;', 'i=1;'])
linesLocal='\n'.join(['int j=i;', 'j++;'])

tmpl = Template(u'''\
void foo() {
    if (someRuntimeFlag) {
        {{linesGlobal}}
        if (anotherRuntimeFlag) {
            {{linesLocal}}
        }
    }
}
''')

print tmpl.render(
    linesGlobal=linesGlobal,
    linesLocal=linesLocal) 
```

...但看到它产生了这个：

```
void foo() {
    if (someRuntimeFlag) {
        int i;
i=1;
        if (anotherRuntimeFlag) {
            int j=i;
j++;
        }
    }
} 
```

...这不是我想要的。我设法使输出发出正确的空白前缀：

```
...
if (someRuntimeFlag) {
    {{linesGlobal|indent(8)}}
    if (anotherRuntimeFlag) {
        {{linesLocal|indent(12)}}
    }
} 
```

...但这可以说是不好的，因为我需要为我发出的每个字符串手动计算空格...

Jinja2 肯定提供了一种我想念的更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-20T16:41:13.623

There's no answer (yet), because quite simply, Jinja2 doesn't support this functionality.

There *is*, however, an [open ticket for this feature](https://github.com/mitsuhiko/jinja2/issues/178 "open ticket") - if you care about it, join the discussion there.

# string - 比较Java中的字符串接近度

> ID：14877944
> 
> 赞同：0
> 
> 时间：2013-02-14T15:13:44.827
> 
> 标签：string, compare, proximity, text-analysis

在 Google 和 StackOverflow 中搜索后，我找不到任何关于 Java 中字符串接近度比较的资源，我只找到关于 == 和 equals 之间差异的结果......

你们中有人知道任何允许比较两个字符串之间的“接近度”并给出接近度百分比的库吗？

**例子：** *车*和*酒吧*很近， *鸡*和*狗*很不一样

这个想法是能够将用户编写的城市与我数据库中的城市进行比较，以避免重复数据。例如，如果用户写“NewYork”，我可以告诉他“你的意思是“New-York”吗？

非常感谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T19:05:52.750

我用过 SecondString MongeElkan 算法，你也可以看看 Lucene 的算法。

[SecondString 链接](http://secondstring.sourceforge.net/)

# java - 运行服务时活动冻结

> ID：14877947
> 
> 赞同：2
> 
> 时间：2013-02-14T15:13:46.777
> 
> 标签：java, android, service, android-asynctask, freeze

我有一个按钮，按下时会启动服务。此服务开始记录来自设备的信息。但是，当我按下运行时，屏幕会在记录时暂时冻结大约 8 秒，然后一旦完成，屏幕就会解冻，会显示一条 toast 消息（这意味着只要你按下按钮就会显示）然后我可以做任何事情。如果我再次进入应用程序屏幕，当应用程序正在记录时（注意：服务始终在运行，因此不会冻结它，只是记录）然后活动再次被冻结，并且在记录完成之前不允许我做任何事情。

我已经尝试过 asynctasks 并在新的可运行/新线程上运行，但这些似乎都不适合我。我是否正确实施它们我不确定，但我想解决这个问题。

这是我在服务类中的 onStartCommand：

```
 @Override
public int onStartCommand(Intent intent, int flags, int startId) {
    // THIS WOULD BE THE METHOD THAT RUNS WHATEVER YOU WANT TO DO EVERY SO OFTEN SO FOR ME THIS IS GETTING ALL DATA ETC
    getProcessInfo();

    //  LOG DELAY = SECONDS BETWEEN RUNNING SERVICE/METHOD. SET AT THE TOP
    myPendingIntent = PendingIntent.getService(this, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT);
    Alarmmgr.set(AlarmManager.RTC_WAKEUP, System.currentTimeMillis()+LOG_DELAY*1000, myPendingIntent);
    Intent notificationIntent = new Intent(this, LogOrCheck.class);
    PendingIntent contentIntent = PendingIntent.getActivity(this,
            101, notificationIntent,
            PendingIntent.FLAG_NO_CREATE);

    NotificationManager nm = (NotificationManager) this
            .getSystemService(Context.NOTIFICATION_SERVICE);

    Resources res = this.getResources();
    Notification.Builder builder = new Notification.Builder(this);

    builder.setContentIntent(contentIntent)
                .setSmallIcon(R.drawable.arrow_up_float)
                .setLargeIcon(BitmapFactory.decodeResource(getResources(), R.drawable.arrow_down_float))
                .setWhen(System.currentTimeMillis())
                .setAutoCancel(true)
                .setContentTitle("Androigenius")
                .setContentText("Service running OK");
    Notification n = builder.getNotification();

    startForeground(100, n);
    return Service.START_STICKY;
} 
```

这里是我调用 startService 的地方：

```
but1.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {

            if (isClicked) {
                Context context = getApplicationContext();
                Toast toast = Toast.makeText(context, "Please press 'MINIMIZE' at the top to continue logging.", Toast.LENGTH_LONG);
                toast.setGravity(Gravity.TOP|Gravity.RIGHT, 10, 55);
                toast.show();
                System.out.println("Start logging");
                but1.setText("Stop Logging");
                but1.setTextColor(Color.RED);
                // START SERVICE, DONE. (STOP IS BELOW).
                startService(myIntent);
                isClicked = false;
            } 
            else if (!isClicked) {
                System.out.println("Stop Logging");
                but1.setText("Start Logging");
                // STOP SERVICE, DONE.
                stopService(myIntent);
                but1.setTextColor(getResources().getColor(color.cornblue));
                isClicked = true;
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T15:42:41.563

服务在导致“冻结”的 UI 线程上运行。使用 IntentService 将创建一个在后台自动运行的服务，而不是在 UI 线程上。下面是 IntentService 类的一些细节：

[IntentService 类](http://developer.android.com/reference/android/app/IntentService.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T15:29:30.793

默认情况下，该服务也运行在您的应用程序的主线程中，您的 UI 操作在该主线程中发生。因此，如果您在 onStartCommand() 方法中执行长任务，它将阻塞主线程。

为避免此问题，您必须将日志记录任务迁移到单独的线程中。您可以使用 AsycTask 类来执行此操作。类的使用方法请参考[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)。

# android - USB 调试选项不可用

> ID：14877951
> 
> 赞同：0
> 
> 时间：2013-02-14T15:13:50.880
> 
> 标签：android, debugging, usb, adb

我目前正面临 Android 平板电脑的问题，该平板电脑正在运行 2.3.4，它是一款特定的平板电脑（不是三星等常见品牌......）。

平板电脑的相关资料：

*   文件系统：版本 4.6.4-r171
*   内核：2.6.35.3-g56a157f
*   它似乎是 MX 93（飞思卡尔）

我想连接它进行调试。问题是没有“调试 USB”选项来检查参数 => 应用程序 => 开发。

你有什么想法吗？

提前谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T01:01:39.667

要手动启用 ADB，您需要`start adbd`在设备上配置 USB 接口和服务。首先安装一个终端仿真器应用程序。在终端中运行以下命令：

```
setprop sys.usb.config adb 
```

如果您很幸运并且 adbd 服务已在您的设备上正确预配置，它现在应该开始枚举。

如果没有 - 尝试在文件夹`start adbd`中的`init*usb.rc`文件中查找`/`。该命令之前的行应该让您了解可能缺少的其他内容。

# sqlite - 对一个目录中的多个数据库循环 SQLite 查询以对正命中进行排序 (UNIX)

> ID：14877952
> 
> 赞同：0
> 
> 时间：2013-02-14T15:13:51.290
> 
> 标签：sqlite, unix, loops

我有一个包含大量 SQLite 数据库文件的目录。

我需要运行 sqlite3 查询来确定我的目录中的任何数据库是否包含特定表。数据库文件名类似于 001.db、002.db 等。如果数据库包含我需要的表，则将文件复制到不同的目录。

我最初的想法是这样的：

> while [ sqlite3 $* "SELECT * FROM table1" != "Error: no such table: table1" ]`
> 
> 做
> 
> cp $* 新目录/
> 
> 完毕

或类似的东西，我需要一些有关正确语法的帮助...

在“$ *”中，我的意思是目录中当前正在处理的数据库文件，不确定它是否正确......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T15:23:28.027

首先，您不需要在表中进行选择来查看它是否存在。你可以[运行](https://stackoverflow.com/questions/82875/how-do-i-list-the-tables-in-a-sqlite-database-file)类似的东西：

```
SELECT * FROM dbname.sqlite_master WHERE type='table'; 
```

或对其进行调整以进行计数：

```
SELECT count(*) FROM dbname.sqlite_master WHERE type='table' and name='table_name'; 
```

使用 sqlite 命令行，您应该得到“1”或“0”。您可以使用它来确定数据库是否真的有您想要的表并采取相应的行动。该脚本可能类似于：

```
for i in `ls *.db`; do
    HAS_TABLE=`sqlite "${i}" "select count(*) ....;"
    if [[ ${HAS_TABLE} == "1" ]]; then
      cp ${i} some/other/dir/${i}
    fi
done 
```

我是从内存中写出来的，所以 if/condition 的语法可能有点偏离（如果没有`1`值周围的引号，你可能没问题）。

高温下，

# visual-studio-2008 - 为什么 BIDS 控制流任务上下文菜单中缺少“编辑断点”选项？

> ID：14877956
> 
> 赞同：0
> 
> 时间：2013-02-14T15:14:01.537
> 
> 标签：visual-studio-2008, ssis, breakpoints, bids

我有一个正在尝试调试的现有 SSIS 项目。

我可以正确看到“*控制流*”选项卡，但上下文菜单上没有**`Edit breakpoints...`**选项，当您右键单击“*控制流*”任务（例如*`Execute SQL Task`*等）时会出现该选项*`Script task`*。

解决方案资源管理器也没有与调试相关的任何内容，只有*`Deploy`*选项可见。**`Canceled by user`**从主菜单进行调试几乎会立即导致错误。

你知道这怎么可能是这种情况以及如何补救吗？

*`*.dtsx`*文件位于我远程连接的机器上。我在另一个用户下运行 Visual Studio，而服务器在另一台机器上。这可能会影响上下文菜单的内容吗？

### 环境信息：

*   视窗
*   VS 2008 专业版
*   投标
*   微软 SQL 服务器

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T16:18:05.133

根据您的错误消息**`Canceled by User`**，可能是由于以下 Microsoft 知识库 ( *`KB 2013735`*) 文章中解释的问题。KB 声明该问题仅发生在*Windows Vista*和*Windows 7*上，但它确实会影响 Visual Studio 2008 Professional。我不完全确定这是否会对您的情况有所帮助。

[*SQL 调试失败并显示“已被用户取消”消息*](http://support.microsoft.com/kb/2013735)

### 引自 KB 2013735：

为以下协议/端口将入站端口例外添加到 Windows 防火墙：

*   *`TCP 135`*
*   *`UDP 400`*
*   *`UDP 500`*

适用于：

*   *Microsoft Visual Studio 2008 专业版*
*   *Microsoft Visual Studio 2008 标准版*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T15:38:20.757

在 SSIS 的 SQL Server 2012 版本之前，您无法调试脚本组件（数据流中的那些）。我已经看到并使用它来发出我想通过消息框进行调试的信息或抛出信息事件然后将它们注销的一般方法。

脚本任务（控制流）应该让您能够根据需要设置断点。

在`Execute SQL Task`. 您可以断点通常的东西 Pre/Post Execute 但我不知道从那里调试到 SQL Server。

我唯一的另一个想法是您可能只是在 Visual Studio/BIDS 中“打开”一个 SSIS 包。虽然它允许您查看包，但除非编辑器打开了 SSIS 项目，否则您无法对其*进行任何操作。*

没有项目的包，注意灰色的播放按钮

![在此处输入图像描述](../Images/ecc9c7537aba12c5a36f2507ef85ac15.png)

在项目中编辑的包，绿色播放箭头

![在此处输入图像描述](../Images/58fd46f7a94c2b8a1bacf85001b518eb.png)

# php - JSON 对象到 PHP 关联数组

> ID：14877958
> 
> 赞同：0
> 
> 时间：2013-02-14T15:14:04.717
> 
> 标签：php, javascript, json

我正在JS中构建一个数组，如下所示：

```
 var slots = {}; 

                $(".taken").each(function(item) {

                    var key = $(this).attr("id");
                    slots[key] = "<?php echo $_SESSION['alias']; ?>";

                }); 

                var json = JSON.stringify(slots);
                var date = "<?php echo $_GET['date']; ?>"
             $.ajax({
                type: "POST",
                     url: "controllers/dutyupdate2.php",
                    data:{ array : json, date:  date },
                success : function(response){
                        console.log (response)
                    }//end success
                });//end ajax 
```

在我发布的 PHP 脚本中，我需要对其进行解码以匹配以下格式：

```
array( 'D1P'=>"JohnC" , 'D6E' => "JohnC") 
```

我得到：

```
Array(
    [D2E] => JohnC
    [D6E] => JohnC
    [D3BU] => JohnC
) 
```

无论我如何解码数组，我都会得到一个以我的键为索引的索引数组。我是在 JS 代码中错误地构建数组还是解码错误？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T16:05:28.080

这是您想要的格式，只是显示方式不同。请参阅此 PHP 代码进行验证

```
$a = array( 'D1P'=>"JohnC" , 'D6E' => "JohnC");
print_r($a); 
```

这给了

```
Array
(
    [D1P] => JohnC
    [D6E] => JohnC
) 
```

作为输出。所以，没有必要尝试或搜索任何不同的东西。

# hql - HQL JoinTable 无法访问 2

> ID：14877962
> 
> 赞同：0
> 
> 时间：2013-02-14T15:14:15.363
> 
> 标签：hql

我有这样的代码

@ManyToMany(cascade = { CascadeType.ALL }) @JoinTable(name = "AssignedBook_Person", joinColumns = { @JoinColumn(name = "person_Id") }, inverseJoinColumns = { @JoinColumn(name = "book_Id") })

如您所见，我的 JoinTable 名称是 AssignedBook_Person，我想使用该代码从中获取一些数据

List borrowedBook = session createQuery(" from AssignedBook_Person ") .setCacheable(true).list();

但它给出了这个错误“AssignedBook_Person 未映射”

有谁知道我如何解决 JoinTable 问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T19:33:02.253

您不能通过 HQL 直接查询数据库表，因为它不对数据库表进行操作 - 它对实体进行操作。这就是对象关系映射的主要思想。

连接表包含有关 Book 和 Person 之间关系的数据，因此可以通过选择其中一个实例然后检查相关实体来获取数据。

如果只需要 join_table 中的原始数据，可以使用原生查询：

```
session.createSQLQuery(SELECT person_id, book_id FROM AssignedBook_Person); 
```

# cordova - Windows Phone 8 - 应用程序底部的 Phonegap + JQM 未知空间

> ID：14877964
> 
> 赞同：2
> 
> 时间：2013-02-14T15:14:21.030
> 
> 标签：cordova, jquery-mobile, visual-studio-2012, windows-phone-8

我正在使用 phonegap 尝试将应用程序移植到 Windows Phone 8，并且正在使用 JQM。老实说，我认为 JQM 与此无关，但我认为这更多地与我的应用程序配置有关。

问题：

看起来视图认为屏幕底部有一个应用栏，并且任何需要根据屏幕尺寸进行计算的东西都发生在大约 35 像素左右。我是否需要指定此应用没有应用栏？如果我调整计算，内容会被切断，就像它正在离开浏览器端口一样。

这是行为的屏幕（我不确定它是否会显示...）： [https ://lh3.googleusercontent.com/-HO2kvP0umzI/URz-QSyxnUI/AAAAAAAAAAc/gsDJ-yr7RCA/s512/ wp_ss_20130213_0001.jpg](https://lh3.googleusercontent.com/-HO2kvP0umzI/URz-QSyxnUI/AAAAAAAAAAc/gsDJ-yr7RCA/s512/wp_ss_20130213_0001.jpg)

让我知道该屏幕是否不显示。相同的 HTML/CSS/JS 在 iOS 和 Android 中看起来不错，所以它必须与 WP-Phonegap 配置有关。如果重要的话，我正在使用 phonegap 2.4.0 入门模板来运行应用程序......

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T18:31:32.033

所以这里的解决方案成功了：

[jQuery Mobile 中的页面高度不正确](https://stackoverflow.com/questions/13028349/incorrect-page-height-in-jquery-mobile/)

我刚刚将它添加到我的 CSS 中：

```
@media screen and (orientation: portrait) {
    @-ms-viewport {
       width: 320px;
       user-zoom: fixed;
       max-zoom: 1;
       min-zoom: 1;
    }
}

@media screen and (orientation: landscape) {
@-ms-viewport {
    width: 480px;
       user-zoom: fixed;
       max-zoom: 1;
       min-zoom: 1;
    }
} 
```

# objective-c - NSTextView 中的 Cocoa 格式化字符串

> ID：14877966
> 
> 赞同：0
> 
> 时间：2013-02-14T15:14:26.007
> 
> 标签：objective-c, cocoa

我有一个 NSTextView，我能够成功地将 NSString 加载到其中并显示它。我的问题是我的 NSString 是以这样的方式格式化的问题列表。

```
1)fsdfasdfalsfdakf
2)sldfakflafdjaf
3)dslakfaldsflakdf
4)dfladjfakflaf 
```

这就是它在 NSString 变量中的外观，我希望它在我的 NSTextView 中看起来相同。我该如何格式化？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T15:16:49.670

用换行符分隔它们：

```
1)fsdfasdfalsfdakf\n
2)sldfakflafdjaf\n
3)dslakfaldsflakdf\n
4)dfladjfakflaf 
```

# node.js - 如果我没有回调函数，Mongoose 不会更新我的文档

> ID：14877967
> 
> 赞同：4
> 
> 时间：2013-02-14T15:14:26.230
> 
> 标签：node.js, mongodb, mongoose

这是我的模型：

```
var UserSchema = new Schema({
    username: { type: String, unique: true, index: true },
    url: { type: String },
    name: { type: String },
    github_id: { type: Number },
    avatar_url: { type: String },
    location: { type: String },
    email: { type: String },
    blog: { type: String },
    public_repos: { type: Number },
    public_gists: { type: Number },
    last_github_sync: { type: Date },
    created_at: { type: Date, default: Date.now }
}); 
```

我尝试使用以下`findOneAndUpdate`功能更新我的文档：

**不起作用：**

```
User.findOneAndUpdate({ github_id: 1 }, { last_github_sync: new Date() }, {}); 
```

**不起作用：**

```
User.findOneAndUpdate({ github_id: 1 }, { last_github_sync: new Date() }); 
```

**作品：**

```
User.findOneAndUpdate({ github_id: 1 }, { last_github_sync: new Date() }, {}, function (err, numberAffected, raw) { }); 
```

我的意思是我应该绑定回调函数来使更新操作工作，但我不需要那个回调函数，我的代码有什么问题？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-14T15:31:25.513

`findOneAndUpdate` [请参阅文档](http://mongoosejs.com/docs/api.html#model_Model.findOneAndUpdate)中的示例：

```
A.findOneAndUpdate(conditions, update, options, callback) // executes
A.findOneAndUpdate(conditions, update, options)  // returns Query
A.findOneAndUpdate(conditions, update, callback) // executes
A.findOneAndUpdate(conditions, update)           // returns Query
A.findOneAndUpdate()                             // returns Query 
```

如果您不提供回调，它会返回一个`Query`您必须调用[`exec()`](http://mongoosejs.com/docs/api.html#query_Query-exec)它才能执行更新的对象。

# php - 前端magento价格中缺少数字

> ID：14877969
> 
> 赞同：0
> 
> 时间：2013-02-14T15:14:37.977
> 
> 标签：php, magento

我使用以下代码在自定义页面上包含我的产品价格：

```
<?php echo Mage::helper('tax')->getPrice($_product, $_product->getFinalPrice(), null);?> 
```

价格显示在前端，因为它应该在一个实例下。也就是说，如果产品价格在小数点内以零（或 2）结尾，例如，3.00 英镑的价格将显示为 3 英镑，3.50 英镑将显示为 3.5 英镑，3.99 英镑将按原样显示。

有没有更好的方法让我拉产品价格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T15:25:16.313

价格应该被称为浮动，但也许这是来自数据库的数据转换问题？您可以强制该列成为浮点字段，以便数据库也存储两位小数吗？也许让它浮动（7,2）？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T15:29:12.760

OK 使用以下代码找到了解决方案：

```
<?php echo number_format($_product->getPrice(), '2', '.', ',');?> 
```

# sass - 基于环境设置的 Sass 条件

> ID：14877972
> 
> 赞同：4
> 
> 时间：2013-02-14T15:14:54.407
> 
> 标签：sass, compass-sass

在 Compass`config.rb`文件中，您可以将 设置`environment`为`:development`或`:production`.

是否可以在 Sass 条件中使用此设置？这是我想要做的：

```
@if (environment === :development) {
    @import 'debug';
} 
```

**已解决：**我在起草问题时找到了答案。无论如何都会发布，因为我没有找到任何明确解释这一点的东西。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-14T15:14:54.407

部分感谢Compass 存储库中的[这个问题](https://github.com/chriseppstein/compass/issues/987)，我发现您可以在 Sass 中使用基于设置的条件，如下所示：

```
@if compass-env() == 'development' {
    body {
        color: red;
    }
} 
```

确认这适用于 Sass 3.2.5 + Compass 0.12.2 + Ruby 1.9.3p194。

但是你不能这样做：

```
@if compass-env() == 'development' {
    @import 'debug';
} 
```

这会引发语法错误：“导入指令不能在控制指令或 mixins 中使用。

所以解决方法是对`@import`文件，然后将其全部内容包装在有条件的环境中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-30T14:59:54.100

这可以通过将环境信息存储在动态生成的 SCSS 文件中来完成（当 Compass 不可用时），然后可以在需要该信息的任何地方导入该文件。这应该在 SASS 编译器启动之前完成。

这是构建脚本的样子（即`build.sh`）：

```
#!/bin/bash

echo "\$ENV: 'production';" > ./_sass/env.scss

../node_modules/.bin/node-sass ./_sass/style.scss   ../_site/css/style.css --source-map=true 
```

这个 SCSS 文件可以这样使用：

```
@import 'env';

@if ($ENV == 'production') {
   ...
   // some SCSS styling to be used in production only
   ...
} 
```

# java - ServletTest 配置 setResourceBase 来定位 JSP

> ID：14877979
> 
> 赞同：0
> 
> 时间：2013-02-14T15:15:24.273
> 
> 标签：java, servlets, jetty

我有一个执行 a 的 servlet，`getServletConfig().getServletContext().getRequestDispatcher("index.jsp") .forward(request, response)` 而 Jetty 没有找到该`index.jsp`文件。我已将“setResourceBase”设置为 jsp 的位置，但它不起作用。有人想出问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T18:26:59.637

你设置了吗

```
context.setServingResources(true); 
```

# sharepoint-2010 - SharePoint 2010 SPWeb.EnsureUser 异常

> ID：14877980
> 
> 赞同：0
> 
> 时间：2013-02-14T15:15:25.693
> 
> 标签：sharepoint-2010

每个人！

我有以下情况。我正在 SharePoint 2010 中开发一些小型搜索系统。我为特定的用户登录名执行 SPWeb.EnsureUser（用于测试目的），我得到 usernot found 异常。

用户完全存在，已执行爬网，已创建配置文件。如果我创建执行相同代码的简单控制台应用程序，它可以正常工作，之后原始代码也开始正常工作。

但是，如果我从属于 WebPart 的 UserControl 方法运行原始代码，我会遇到前面描述的情况。

我会非常感谢各种答案。

# ruby - 减少 RoR 脚本中 ruby 的内存使用量

> ID：14877984
> 
> 赞同：0
> 
> 时间：2013-02-14T15:15:38.333
> 
> 标签：ruby, ruby-on-rails-3, memory-management

我有一个 RoR 应用程序和一个 cron rake 任务，例如：

```
Model.all.each do |m|
  if m < some_condition
    m.do_something
    m.save
  end
end 
```

`Model`有 1 000 000 条记录（以及 200 000 条可接受的条件）。有什么方法可以提高任务内存使用率？它需要千兆字节的内存，并且 Ruby 进程在生产时被服务器杀死。我的数据库是 PostgreSQL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T15:17:51.430

您应该使用 和 之类`#find_each`的方法`#find_in_batches`。这些将一次只加载一小部分记录。看看[ActiveRecord::Batches](http://api.rubyonrails.org/classes/ActiveRecord/Batches.html#method-i-find_each)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T15:20:17.090

我建议使用[`find_each`](http://apidock.com/rails/ActiveRecord/Batches/ClassMethods/find_each)，它会批量生成您的对象。

另外，如果可能的话，应用你在 sql 循环中的条件，所以 ActiveRecord 不必实例化你不使用的对象（因此使用内存）：

```
Model.find_each(:conditions => {:my => :condition}).each do |m|
  # do something
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T16:14:07.120

您可以尝试以下方法：

```
 def with_gc(enum)
    count = enum.count
    limit = 100
    (0..count).select{|i| i % limit == 0}.each do |index|
      new_count = enum.count
      raise "query depends on updated param. Expected count #{count}, got #{new_count}" if count != new_count
      enum.skip(index).limit(limit).each do |record|
        yield record
      end
      GC.start
    end
  end 
```

你可以像这样使用它：

```
with_gc(Model.all) do |m|
  if m < some_condition
    m.do_something
    m.save
  end
end 
```

# matlab - 在matlab中模拟ARMA过程

> ID：14877992
> 
> 赞同：1
> 
> 时间：2013-02-14T15:15:59.613
> 
> 标签：matlab, time-series, forecasting

我正在尝试使用 Matlab 模拟时间序列过程。例如，让我们看下面的例子： http: [//www.mathworks.com/help/econ/arima.print.html](http://www.mathworks.com/help/econ/arima.print.html)

当我运行以下代码时

```
model = arima(1,0,1);
[fit,VarCov] = estimate(model,Y,'print',false); 
```

我收到以下错误：

> ？？？“double”类型的输入参数的未定义函数或方法“arima”。

Matlab 是否包含 Matlab 的函数？我可以计算不同的函数，比如计算不同滞后的自相关或自协方差吗？或者估计ARMA参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T19:19:45.797

在使用该功能之前，您需要确保您拥有[Econometrics Toolbox的许可证和代码。](http://www.mathworks.com/help/econ/index.html)MATLAB 对主要软件及其各种工具箱都有烦人的许可要求：（

但是，您也许可以找到一些可以做同样事情的公共代码。查看[http://www.mathtools.net/](http://www.mathtools.net/)

# javascript - Javascript中的有序列表迭代

> ID：14877993
> 
> 赞同：0
> 
> 时间：2013-02-14T15:16:02.180
> 
> 标签：javascript

有没有办法让我遍历功能类似于 table.rows 的有序列表？我正在使用 Javascript。

我问这个的原因是因为我有一个有序列表，其中包含另一个有序列表。我只想返回父列表项而不是子项。

```
<ol id="pList">
    <li>Item A</li>
    <li>
        <ol id="cList">
            <li>A's Child 1</li>
            <li>A's Child 2</li>
        </ol>
    </li>
    <li>Item B</li>
    <li>Item C</li>
    <li>Item D</li>
</ol> 
```

我现在使用 getElementsbyTag 并返回所有 li，包括 cList 中的那个。我只想要pList中的那些。

谢谢

仅供参考：我希望它用 Javascript 完成。代码必须在 Greasemonkey 中工作。我对 jquery 了解不多，而且我也不是一个 javascript 程序员。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T15:27:12.860

没有[特定](http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-58056027)的属性可以让您直接访问`<li>`.`<ol>`

然而，枚举它们非常容易，特别是当您认为 an 的唯一合法子`<ol>`节点必须是空白文本节点和`<li>`节点时。

```
var ol = document.getElementById('pList');
var li = [];
var node = ol.firstChild;
while (node) {
    if (node.tagType === 3 && node.tagName === 'LI') {
        li.push(node);
    }
    node = node.nextSibling;
} 
```

最后，数组`li`包含所需的子项。

上面的代码适用于任何浏览器。该`.children`集合在旧版本的 MSIE 上存在问题，并且`querySelectorAll`更现代（因此支持较少）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T15:29:24.587

如果使用[`querySelectorAll()`](http://caniuse.com/queryselector)* 是您的一个选项，这很容易：

```
var listItems = document.querySelectorAll( '#pList > li' ); 
```

**注意：它是原生 DOM 方法，与 jQuery 无关*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T15:27:36.773

每个 javascript 对象中都有一个直接子对象表：

```
document.getElementById('pList').children 
```

您甚至可以遍历它并检查您需要的任何内容：

```
var el = document.getElementById('pList');
for (var i = 0; i < el.children.length; i++) {
    if (el.children[i].tagName == "LI") {
        el.children[i].doWhatever();
    }
} 
```

# javascript - 带有本地数组数据的 jQuery 花式树

> ID：14877996
> 
> 赞同：4
> 
> 时间：2013-02-14T15:16:08.450
> 
> 标签：javascript, jquery, jquery-ui, jquery-plugins, treeview

我正在尝试使用本地数组数据实现 jQuery FancyTree [http://wwwendt.de/tech/fancytree/demo/](http://wwwendt.de/tech/fancytree/demo/)

引用自[https://code.google.com/p/fancytree/](https://code.google.com/p/fancytree/)

**这是代码。但它不起作用，没有脚本错误。但是树是空的！！！**

> 即使我复制了他们在演示站点中使用的文件的 jQuery、UI 版本。仍然没有任何效果

```
<html>
<head>
    <script src="jquery.js" type="text/javascript"></script>
    <script src="jquery-ui.custom.js" type="text/javascript"></script>
    <link href="ui.fancytree.css" rel="stylesheet" type="text/css" />
    <script src="jquery.fancytree.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(function () {
            $("#tree").fancytree({
                onActivate: function (node) {
                    // A DynaTreeNode object is passed to the activation handler

                    // Note: we also get this event, if persistence is on, and the 
                     //  age is reloaded.
                    alert("You activated " + node.data.title);
                },

                children: [ // Pass an array of nodes.
                {title: "Item 1" },
                { title: "Folder 2", isFolder: true,
                    children: [
                        { title: "Sub-item 2.1" },
                        { title: "Sub-item 2.2" }
                    ]
                },
                { title: "Item 3" }
            ]
            });
        });

    </script>
</head>
<body>
    <div id="tree">
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T23:08:50.583

我注意到这`source:[]`是你在`$("#tabTree").fancytree()`初始化调用中初始化树的方式，所以你的例子是：

```
<html>
<head>
    <script src="jquery.js" type="text/javascript"></script>
    <script src="jquery-ui.custom.js" type="text/javascript"></script>
    <link href="ui.fancytree.css" rel="stylesheet" type="text/css" />
    <script src="jquery.fancytree.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(function () {
            $("#tree").fancytree({
                onActivate: function (node) {
                    // A DynaTreeNode object is passed to the activation handler

                    // Note: we also get this event, if persistence is on, and the 
                     //  age is reloaded.
                    alert("You activated " + node.data.title);
                },
                source: [ // Pass an array of nodes.
                {title: "Item 1" },
                { title: "Folder 2", isFolder: true,
                    children: [
                        { title: "Sub-item 2.1" },
                        { title: "Sub-item 2.2" }
                    ]
                },
                { title: "Item 3" }
            ]
            });
        });

    </script>
</head>
<body>
    <div id="tree">
    </div>
</body>
</html> 
```

顺便说一句，如果您注意到它，文档非常混乱，因为他们正在重构代码，文档是 dynatree 和 fancytree 的新约定剩下的一半。所以期待更多这样奇怪的东西:-)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-14T15:35:09.217

脚本路径对吗？

你下载“jquery.js、jquery-ui.custom.js、ui.fancytree.css 和 jquery.fancytree.js”吗？

# android - Android有alertdialog不阻止应用程序选项菜单

> ID：14877999
> 
> 赞同：1
> 
> 时间：2013-02-14T15:16:13.600
> 
> 标签：android, android-layout

我已经搜索了一段时间，但没有找到任何东西。我的应用程序的主选项菜单中有一个“关于”选项，它为用户提供支持信息（# 调用、版本信息等）。我还有一个警报对话框，提示用户在应用程序继续之前采取外部操作（他们必须这样做）。用户可能希望在警报对话框出现时获取此支持信息。有什么方法可以让 alertdialog 不阻止应用程序的选项菜单？或者也许只是以某种方式在警报对话框顶部显示选项菜单？

编辑 - 不在对话框本身的顶部，通常在同一个位置，只是在覆盖层的顶部。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T15:28:21.933

我在对话和声音方面遇到了类似的问题。我的问题是，当对话框出现时，它会导致原始活动暂停，这会产生意想不到的后果。

就我而言，我发现在原始活动中使用 RelativeLayout 和 FrameLayout 来实现我自己的对话框界面更容易。