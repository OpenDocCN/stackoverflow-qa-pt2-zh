# StackOverflow 问答 14196000-14196999

# php - 如何匹配模式但获得不同的值

> ID：14196002
> 
> 赞同：3
> 
> 时间：2013-01-07T12:31:04.570
> 
> 标签：php, regex, .htaccess

在 .htaccess 中，我需要匹配一个模式（可能的模式，它可能不存在）但得到一个与 $1 不同的值

示例网址：

```
http://www.example.com/rest-of-the-url
http://www.example.com/en/rest-of-the-url
http://www.example.com/fr/rest-of-the-url
http://www.example.com/it/rest-of-the-url 
```

**en/ fr/ it/**部分可能存在也可能不存在

我使用这种模式来匹配语言**en fr** ...

```
^([a-z]{2})?other patterns here$ 
```

没关系，我将语言部分设置为**$1**。但问题是当没有语言部分时，**$1**会从**rest-of-the-url**变成**re**

 **如果我使用这种模式

```
^([a-z]{2}\/)?other patterns here$ 
```

使用这种模式，无论语言是否存在，我都可以正确获取到**$1**的语言，但是以**en/** fr/ 之类的形式......我不想尾随**/**

是否可以像第二个示例中那样匹配并获得第一个示例中的值？

**PS：是的，在 php 中清理尾随/**非常容易，但我问是否可以在 htaccess 中执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T14:48:31.393

是的，很有**可能**在 .htaccess 中做到这一点。诀窍是使用非捕获正则表达式组使用`?:`. 使用以下正则表达式，例如：

```
^(?:([a-z]{2})/)?(.+)$ 
```

使用上面的正则表达式`$1`将有`en`或`fr`没有斜杠`/`，`$2`并将有其余的 URI。**

# android - Android Toggle Button State Change On Resume

> ID：14196003
> 
> 赞同：0
> 
> 时间：2013-01-07T12:31:06.740
> 
> 标签：android, eclipse, togglebutton

拖拖拉拉偷懒了半天，终于下定决心学Android编程。所以是的，我几乎是一个基本的n00b。

我创建了一个应用程序，它将手机的模式切换为静音并返回铃声。现在我面临的问题是，如果应用程序进入后台并且在恢复时，切换按钮的状态需要根据手机所处的状态。

示例：如果手机已经处于静音模式并且我启动应用程序，则应按下/激活切换按钮并根据它显示适当的文本。

现在，据我所知，这个状态设置应该在 OnCreate/OnResume 中完成，当它检查电话是否静音时。

这是 MainActivity.java 中的代码

```
package com.SMT.silentmodetoggle;

import android.os.Bundle;
import android.app.Activity;
import android.graphics.drawable.Drawable;
import android.media.AudioManager;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.CompoundButton;
import android.widget.ToggleButton;
import android.widget.ImageView;
import android.util.Log;

public class MainActivity extends Activity {
    private AudioManager mAudioManager;
    private boolean mPhoneIsSilent;
    private static final String TAG = "SilentModeApp";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        mAudioManager = (AudioManager)getSystemService(AUDIO_SERVICE);

        checkIfPhoneIsSilent();
        setBUTTONCLICKLISTENER();

        Log.d("SilentModeApp", "This Is A Test");
    }

    private void setBUTTONCLICKLISTENER() {
        ToggleButton toggleButton1 = (ToggleButton)findViewById(R.id.toggleButton1);
        toggleButton1.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
            public void onCheckedChanged(CompoundButton buttonview, boolean isChecked){
                if (mPhoneIsSilent) {
                    // Change back to normal mode
                    mAudioManager.setRingerMode(AudioManager.RINGER_MODE_NORMAL);
                    mPhoneIsSilent = false;
                    } 
                else {
                    // Change to silent mode
                    mAudioManager.setRingerMode(AudioManager.RINGER_MODE_SILENT);
                    mPhoneIsSilent = true;
                    }
                    // Now toggle the UI again
                    toggleUi();
                }
         });
    }

    private void checkIfPhoneIsSilent() {
        int ringerMode = mAudioManager.getRingerMode();
        if (ringerMode == AudioManager.RINGER_MODE_SILENT) {
            mPhoneIsSilent = true;

        } 
        else {
            mPhoneIsSilent = false;
        }
    }
        /**
        * Toggles the UI images from silent to normal and vice versa.
        */
    private void toggleUi() {
        ImageView imageView = (ImageView) findViewById(R.id.phone_icon);
        Drawable newPhoneImage;
        //ToggleButton checkTB = null;
        if (mPhoneIsSilent) {
            newPhoneImage = getResources().getDrawable(R.drawable.phone_off);
            //checkTB.setChecked(true);
        }
        else {
            newPhoneImage = getResources().getDrawable(R.drawable.phone_on);
            //checkTB.setChecked(false);
        }

        imageView.setImageDrawable(newPhoneImage);
    }

    @Override
    protected void onResume() {
        super.onResume();
        checkIfPhoneIsSilent();
        toggleUi();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

这是切换按钮上的信息：

```
 <ToggleButton
        android:id="@+id/toggleButton1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/phone_icon"
        android:layout_centerHorizontal="true"
        android:text="ToggleButton1" 
        android:textOff="Toggle Silent Mode On"
        android:textOn="Toggle Silent Mode Off"
        /> 
```

我正在运行/调试运行 CM10.1 4.2.1 的三星 Galaxy SII I9100 上的应用程序

Eclipse 已设置为目标 4.2

所有的帮助和反馈总是受欢迎和有价值的 :) 感谢您的宝贵时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T12:45:41.607

只需在 checkIfPhoneIsSilent(); 之后添加以下内容 在 onCreate() 方法中。还将它添加到 onResume() 以检查活动之外的状态变化。

```
 ToggleButton toggleButton1 = (ToggleButton)findViewById(R.id.toggleButton1);
 toggleButton1.setChecked(mPhoneIsSilent); 
```

# java - 返回假；声明不会“返回”

> ID：14196006
> 
> 赞同：2
> 
> 时间：2013-01-07T12:31:23.270
> 
> 标签：java, recursion, return

我的 return false 声明没有按预期工作。我有一个名为“prosegui”的递归方法，它适用于我想要使用的大多数单词，但是对于其中一些单词，return false 不会返回值“false”，因为它应该继续并最终返回真的。

```
if (contChar < this.parola.length() - 1) {
    if (this.parola.charAt(contChar+1)==matrice[i][j])
    {
        prosegui(proseguiI,proseguiJ,i,j,contChar+1);
    } 
    else 
    {
        System.out.println("FALSE");
        return false;
    }
}

System.out.println("TRUE");
return true; 
```

我真的不知道怎么解决。

**编辑：**

程序同时打印“FALSE”和“TRUE”

**编辑：**

```
public boolean prosegui(int i, int j, int proseguiI, int proseguiJ, int contChar)
{
    if (contChar < this.parola.length() - 1)
    {
        int direzioneI=proseguiI-i;
        int direzioneJ=proseguiJ-j; 
        i=proseguiI+direzioneI;
        j=proseguiJ+direzioneJ;

        int cont;
        StringTokenizer st = new StringTokenizer(this.results);

        cont=0;

        char[][] matrice = new char[this.lung][this.lung];

        while (st.hasMoreTokens())
        {
             matrice[cont]=st.nextElement().toString().toCharArray();
             cont++;
        }

        if(this.parola.charAt(contChar+1)==matrice[i][j]){

        prosegui(proseguiI,proseguiJ,i,j,contChar+1);
    }
    else 
    {
        System.out.println("FALSE");
        return false;
    }
}

System.out.println("TRUE");
return true;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T12:39:32.360

递归输入 prosegui(...) 时，您的函数不能返回 false，因为您不检查递归调用的结果，它将始终返回 true。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T12:41:36.513

第一次通过，`this.parola.charAt(contChar+1)==matrice[i][j]`是真的。这意味着`prosegui`使用不同的输入 ( ) 再次调用它`prosegui(proseguiI,proseguiJ,i,j,contChar+1)`。

这次通过`this.parola.charAt(contChar+1)==matrice[i][j]`是错误的。这意味着将打印“FALSE”并`false`返回。

现在我们又回到了`prosegui(proseguiI,proseguiJ,i,j,contChar+1)`. 如果我们从这里往前走，“TRUE”会被打印并`true`返回。

反正这是我的理论！希望有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T12:38:16.280

如果这段代码在 prosegui 方法中，那么当它在这里调用自己时：

```
prosegui(proseguiI,proseguiJ,i,j,contChar+1); 
```

此调用返回的真/假从未使用过。

# c++ - 选择在 Windows 7 上无法正常工作

> ID：14196009
> 
> 赞同：0
> 
> 时间：2013-01-07T12:31:33.433
> 
> 标签：c++, windows-7

全部 ：）

我有一些代码可以在 Linux 和 WinXP 上正常运行

```
int FlowTestIP::do_recvfrom()
{
    int ret;
    struct timeval timeout;// = {2, 0};
    timeout.tv_sec = 2;
    timeout.tv_usec = 0;

    fd_set rfds;
    while(running) {
            FD_ZERO(&rfds);
            FD_SET(m_socket, &rfds);
            ret = select(m_socket + 1, &rfds, 0, 0, &timeout);
            cout << "// select ret = " << ret << " (errno = " << errno << ")" << endl;
            if (ret == -1 || ret == 0) {
                    if (!(ret == 0 && errno == 0))
                            cout << "select ret = " << ret << " (errno = " << errno << ")" << endl;
                    return ret;
            }
            if (FD_ISSET(m_socket, &rfds)) {
                    cout << WSAGetLastError() << endl;
                    break;
            }
    }
    return recvfrom(m_socket, in_buf, mtu, 0, (struct sockaddr *)&si_other, (socklen_t *)&otherAddrSize);
} 
```

但在 Windows 7 中，即使退出客户端应用程序也会继续循环。错误的输出是

> ...
> // 选择 ret = 1 (errno = 0)
> 0
> // 选择 ret = 1 (errno = 0)
> 0
> // 选择 ret = 1 (errno = 0)
> 0
> FTControlServerThread::run
> FTControlServerThread::
> recieved pkt-> ft_tos = UCHAR_MAX
> QFuture::waitForFinished()
> client alive true
> // 选择 ret = 1 (errno = 0)
> 0
> // 选择 ret = 1 (errno = 0)
> 0
> // 选择 ret = 1 (errno = 0)
> 0

normaly（在 WinXP 和 Linux 上）输出将是

> ...
> // 选择 ret = 1 (errno = 0)
> 0
> // 选择 ret = 1 (errno = 0)
> 0
> // 选择 ret = 1 (errno = 0)
> 0
> FTControlServerThread::run
> FTControlServerThread::
> recieved pkt-> ft_tos = UCHAR_MAX
> QFuture::waitForFinished()
> 客户端存活 true
> QFuture::finished

这就是我所期待的。

有没有人遇到过这样的不当行为？

提前致谢！

PS 正如@JoachimPileborg 要求展示我如何调用此函数：

```
FlowTest::recv(char *payload, size_t size)  
{  
...  
    while (running) {  
        len = do_recvfrom(); // it virtual method of class FlowTest  
        if (len == -1 || len == 0) {  
            return len;  
        }  

        if (running && !transport_recv_helper()) {  
            continue;  
        } else {  
            break;  
        }  
    }  
...  
} 
```

从服务器 GUI 调用 recv

```
void FlowTestServer::runTest(FlowTestServerHelper handler)
{
...
        if ((ret = server->recv(rcvdData, (size_t *)&size)) == -1 || ret == 0 || size == 0) {
            if (server_busy == 0)
                break;
            cout << "can't receive data (size == " << size << "; ret = " << ret << ")" << endl;
            continue;
        }
...
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T13:02:09.983

第一：`cout`允许使用重置`errno`。它通常不会，但它可以，尤其是在必须设置语言环境时首次使用。您需要将 的值保存`errno`在临时变量中，或者使用`fprintf`和朋友 - 作为 C lib 函数 POSIX 控制其行为。

其次：在 Windows 中，您需要使用`WSAGetLastError()`not `errno`。

`sock_errno`我建议你`(errno)`在 Linux/unix 和`(WSAGetLastError())`Windows上制作一个宏。这将使您能够以独立于平台的方式进行编码。

*   请参阅此处了解更多信息：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms737828 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms737828(v=vs.85).aspx)

# c# - C# 顺序文件输出

> ID：14196010
> 
> 赞同：1
> 
> 时间：2013-01-07T12:31:37.363
> 
> 标签：c#, .net, winforms

我有一个`C# winform`输出到 excel 文件的应用程序。假设文件名的名称格式为：`Output1.xlsl`

我希望在每个按钮单击/执行时将输出保存到另一个顺序文件中。所以接下来会是`Output2.xlsl`, `Output3.xlsl`... 等等。

如何检查，我知道检查文件是否存在，但是如何检查编号？

```
FileInfo newExcelFile = new FileInfo(@"Output1.xlsx");
if (newExcelFile.Exists)
{
      ...
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T12:37:22.883

您可以使用此循环并[`File.Exists`](http://msdn.microsoft.com/en-us/library/system.io.file.exists%28v=vs.110%29.aspx)使用[`Path.Combine`](http://msdn.microsoft.com/en-us/library/system.io.path.combine.aspx)：

```
string directory = @"C:\SomeDirectory";
string fileName = @"Output{0}.xlsx";
int num = 1;
while (File.Exists(Path.Combine(directory, string.Format(fileName, num))))
    num++;
var newExcelFile = new FileInfo(Path.Combine(directory, string.Format(fileName, num))); 
```

一般来说，静态`File`方法比总是创建`FileInfo`实例更有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T12:38:54.457

我们使用与此类似的方法来实现这一点：

```
/// <param name="strNewPath">ex: c:\</param>
/// <param name="strFileName">ex: Output.xlsx</param>
/// <returns>Next available filename, ex: Output3.xlsx</returns>
public static string GetValidFileName(string strNewPath, string strFileName)
{
    var strFileNameNoExt = Path.GetFileNameWithoutExtension(strFileName);
    var strExtension = Path.GetExtension(strFileName);
    var intCount = 1; 
    while (File.Exists(Path.Combine(strNewPath, strFileNameNoExt + intCount + strExtension)))
        intCount++;
    return Path.Combine(strNewPath, strFileNameNoExt + intCount + strExtension);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T12:37:45.890

我会在文件夹中找到最新的文件并使用它的编号作为开始的基础。如果那里没有其他程序可以编写，这应该足够了。

```
DirectoryInfo di = new DirectoryInfo("Some folder");
            FileInfo fi = di.GetFiles().OrderByDescending(s => s.CreationTime).First();
            string fileName = fi.Name; 
```

//....

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-07T12:38:01.787

你可以做一个简单的循环：

```
FileInfo newExcelFile = null;
for (int i = 0; i < int.MaxValue; i++)
{
    newExcelFile = new FileInfo(string.Format(@"Output{0}.xlsx", i));
    if (!newExcelFile.Exists)
    {
        break;
    }
    newExcelFile = null;
}
if (newExcelFile == null)
{
    // do you want to try 2147483647
    // or show an error message
    // or throw an exception?
}
else
{
    // save your file
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-07T12:36:02.597

只需将其包装在一个while循环中

```
int num = 1;
FileInfo newExcelFile = new FileInfo("Output1.xlsx");
while(newExcelFile.Exists)
{
    newExcelFile = new FileInfo("Output" + num + ".xlsx");
    num++;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-07T12:57:12.127

这取决于逻辑。如果你已经`Output1.xlsx` `Output2.xlsx` `Output3.xlsx`删除了`Output2.xlsx`，应该会发生什么，新文件应该是`Output2.xlsx`还是`Output4.xlsx`？如果您希望新文件的编号始终最高，您可以使用类似的代码

```
 int lastNum = 0;

        string[] files = Directory.GetFiles("c:\\myDir", "Output*.xlsx");
        if (files.Length > 0)
        {
            Array.Sort(files);
            lastNum = Convert.ToInt32(Regex.Match(files[files.Length - 1], "Output[\\d](*).xlsx").Result("$1"));
            lastNum++;
        }

        FileInfo newExcelFile = new FileInfo("Output" + lastNum + ".xlsx"); 
```

当然你可以循环，但如果你有数千个文件，这不是一个好主意。对于少量文件可能没问题

```
 int i = 0;
        for (; i < Int32.MaxValue; i++)
        {
            if (File.Exists("Output" + i + ".xlsx"))
                break;
        } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-07T12:36:21.960

它可能不是最有效的，但我可以建议以下解决方案

1.  用“.”分割文件名
2.  从中删除子字符串“输出”
3.  现在排序以获得最大数量。

# iphone - 如何强制 UIButton 始终位于顶部

> ID：14196012
> 
> 赞同：3
> 
> 时间：2013-01-07T12:31:37.877
> 
> 标签：iphone, objective-c, ios, uiview, uibutton

我有 a`UIButton`和 a`UIView`动画，按下时向下滑动`UIButton`。问题是`UIView`遮蔽了`UIButton`. 我希望`UIButton`始终保持领先地位。

我试过这个`viewDidLoad`：

```
 [self.view bringSubviewToFront:categoryBtn]; 
```

虽然不起作用。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T12:33:36.703

在您的此主视图上添加任何`UIView`或任何其他视图之后，然后只需将您的这一行添加为按钮的超级视图

```
[self.view bringSubviewToFront:categoryBtn]; 
```

例如按钮操作事件，您添加任何视图，然后使用如下代码..

```
-(IBAction)yourButton_Clicked:(id)sender
{

   ///Add some code or view here and then after write this line here see bellow line
   [self.view bringSubviewToFront:categoryBtn];
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T12:44:23.330

另一个答案是可行的，但这正是添加“insertSubview：belowSubview”的那种东西。

```
[self.view insertSubview:myNewView belowSubview:_categoryBtn]; 
```

这允许您在视图堆栈上的按钮下方添加新视图，而不是将其添加到按钮上方然后重新排列视图。

# python - Python从excel数据创建字典

> ID：14196013
> 
> 赞同：19
> 
> 时间：2013-01-07T12:31:38.343
> 
> 标签：python, xlrd

我想从值创建一个字典，我从 excel 单元格中获取，我的代码如下，

```
wb = xlrd.open_workbook('foo.xls')
sh = wb.sheet_by_index(2)   
for i in range(138):
    cell_value_class = sh.cell(i,2).value
    cell_value_id = sh.cell(i,0).value 
```

我想创建一个字典，如下所示，其中包含来自 excel 单元格的值；

```
{'class1': 1, 'class2': 3, 'class3': 4, 'classN':N} 
```

关于如何创建这本词典的任何想法？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-01-07T12:38:36.093

或者你可以试试[熊猫](http://pandas.pydata.org/pandas-docs/stable/io.html)

```
from pandas import *
xls = ExcelFile('path_to_file.xls')
df = xls.parse(xls.sheet_names[0])
print df.to_dict() 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-01-07T12:34:46.467

```
d = {}
wb = xlrd.open_workbook('foo.xls')
sh = wb.sheet_by_index(2)   
for i in range(138):
    cell_value_class = sh.cell(i,2).value
    cell_value_id = sh.cell(i,0).value
    d[cell_value_class] = cell_value_id 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2016-01-27T10:35:45.733

此脚本允许您将 excel 数据表转换为字典列表：

```
import xlrd

workbook = xlrd.open_workbook('foo.xls')
workbook = xlrd.open_workbook('foo.xls', on_demand = True)
worksheet = workbook.sheet_by_index(0)
first_row = [] # The row where we stock the name of the column
for col in range(worksheet.ncols):
    first_row.append( worksheet.cell_value(0,col) )
# transform the workbook to a list of dictionaries
data =[]
for row in range(1, worksheet.nrows):
    elm = {}
    for col in range(worksheet.ncols):
        elm[first_row[col]]=worksheet.cell_value(row,col)
    data.append(elm)
print data 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-12-26T10:02:10.703

您可以使用 Pandas 来执行此操作。导入 pandas 并将 excel 作为 pandas 数据框读取。

```
import pandas as pd
file_path = 'path_for_your_input_excel_sheet'
df = pd.read_excel(file_path, encoding='utf-16') 
```

您可以使用`pandas.DataFrame.to_dict`将 pandas 数据框转换为字典。[在此处找到相同的文档](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.to_dict.html#pandas-dataframe-to-dict)

```
df.to_dict() 
```

这将为您提供您阅读的 excel 表的字典。

通用示例：

```
df = pd.DataFrame({'col1': [1, 2],'col2': [0.5, 0.75]},index=['a', 'b']) 
```

`>>> df`

`col1 col2 a 1 0.50 b 2 0.75`

`>>> df.to_dict()`

`{'col1': {'a': 1, 'b': 2}, 'col2': {'a': 0.5, 'b': 0.75}}`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-07T12:47:13.910

我会去：

```
wb = xlrd.open_workbook('foo.xls')
sh = wb.sheet_by_index(2)   
lookup = dict(zip(sh.col_values(2, 0, 138), sh.col_values(0, 0, 138))) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-02-08T10:23:50.707

还有一个 PyPI 包：[https](https://pypi.org/project/sheet2dict/) ://pypi.org/project/sheet2dict/ 它正在解析 excel 和 csv 文件并将其作为字典数组返回。每行都表示为数组中的字典。

像这样：

```
Python 3.9.0 (default, Dec  6 2020, 18:02:34)
[Clang 12.0.0 (clang-1200.0.32.27)] on darwin
Type "help", "copyright", "credits" or "license" for more information.

# Import the library
>>> from sheet2dict import Worksheet

# Create an object
>>> ws = Worksheet()

# return converted rows as dictionaries in the array 
>>> ws.xlsx_to_dict(path='Book1.xlsx')
[
    {'#': '1', 'question': 'Notifications Enabled', 'answer': 'True'}, 
    {'#': '2', 'question': 'Updated', 'answer': 'False'}
] 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-02-10T18:34:56.630

如果您可以将其转换为 csv，则非常合适。

```
import dataconverters.commas as commas
filename = 'test.csv'
with open(filename) as f:
      records, metadata = commas.parse(f)
      for row in records:
            print 'this is row in dictionary:'+row 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-05-14T10:17:32.373

如果你使用，openpyxl 下面的代码可能会有所帮助：

```
import openpyxl
workbook = openpyxl.load_workbook("ExcelDemo.xlsx")
sheet = workbook.active
first_row = [] # The row where we stock the name of the column
for col in range(1, sheet.max_column+1):
    first_row.append(sheet.cell(row=1, column=col).value)
data =[]
for row in range(2, sheet.max_row+1):
    elm = {}
    for col in range(1, sheet.max_column+1):
        elm[first_row[col-1]]=sheet.cell(row=row,column=col).value
    data.append(elm)
print (data) 
```

归功于：[Python 从 excel 数据创建字典](https://stackoverflow.com/questions/14196013/python-creating-dictionary-from-excel-data/35034935#35034935)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-05-08T10:13:07.023

如果您想使用 pandas 将 Excel 数据转换为 python 中的字典列表，最好的方法是：

```
excel_file_path = 'Path to your Excel file'
excel_records = pd.read_excel(excel_file_path)
excel_records_df = excel_records.loc[:, ~excel_records.columns.str.contains('^Unnamed')]
records_list_of_dict=excel_records_df.to_dict(orient='record')
Print(records_list_of_dict) 
```

# c++ - 调用 GetWindowRect 时出现编译器错误

> ID：14196023
> 
> 赞同：1
> 
> 时间：2013-01-07T12:31:54.137
> 
> 标签：c++, winapi, compiler-errors, dev-c++

在 MSDN 示例中使用`GetWindowRect`相同的方法时，我收到以下错误，“无法将参数 '2' 的 'RECT' 转换为 'tagRECT*' 到 'BOOL GetWindowRect(HWND__ *, tagRECT* )'”下面是重现该错误的代码：

```
#include <windows.h>
LRESULT CALLBACK WindowProcedure (HWND, UINT, WPARAM, LPARAM);
char szClassName[ ] = "WindowsApp";

int WINAPI WinMain (HINSTANCE hThisInstance, HINSTANCE hPrevInstance,
                LPSTR lpszArgument, int nFunsterStil)
{
 HWND hwnd;               
 MSG messages;            
 WNDCLASSEX wincl;        

 wincl.hInstance = hThisInstance;
 wincl.lpszClassName = szClassName;
 wincl.lpfnWndProc = WindowProcedure;     
 wincl.style = CS_DBLCLKS;                 
 wincl.cbSize = sizeof (WNDCLASSEX);

 wincl.hIcon = LoadIcon (NULL, IDI_APPLICATION);
 wincl.hIconSm = LoadIcon (NULL, IDI_APPLICATION);
 wincl.hCursor = LoadCursor (NULL, IDC_ARROW);
 wincl.lpszMenuName = NULL;                 
 wincl.cbClsExtra = 0;                      
 wincl.cbWndExtra = 0;                       
 wincl.hbrBackground = (HBRUSH) COLOR_BACKGROUND;

 if (!RegisterClassEx (&wincl))
    return 0;

 hwnd = CreateWindowEx (0, szClassName, "Windows App", WS_OVERLAPPEDWINDOW,
        CW_USEDEFAULT, CW_USEDEFAULT, 544, 375, HWND_DESKTOP, NULL, 
        hThisInstance, NULL);

 RECT blah;
 GetWindowRect (hwnd, blah);

 ShowWindow (hwnd, nFunsterStil);

 while (GetMessage (&messages, NULL, 0, 0))
 {
     TranslateMessage(&messages);
     DispatchMessage(&messages);
 }

 return messages.wParam;
 }

 LRESULT CALLBACK WindowProcedure (HWND hwnd, UINT message, WPARAM wParam,
 LPARAM, lParam)
 {
 switch (message)                  
 {
     case WM_DESTROY:
         PostQuitMessage (0);       
         break;
     default:                      
         return DefWindowProc (hwnd, message, wParam, lParam);
 }
 return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T12:33:21.363

您需要传递您的地址，`RECT`以便`GetWindowRect`可以更改它。该函数接受一个指向`RECT`( `RECT *`) 的指针，但您传递的是`RECT`.

像这样修复它：

```
RECT blah;
GetWindowRect(hwnd, &blah);
                    ^ 
```

如果函数采用 a `RECT`，则对其所做的任何更改都将被丢弃，因为它将按值传递（也就是说，将传入对象的副本）。发生的情况`&blah`是指针而不是对象通过值传递，但该值仍然是对象的相同地址，因此更改该地址处的内容仍然存在。因此，这是通过引用传递对象的一种概念，另一种是使用实际引用。然而，由于 Windows API 主要是用 C 语言编写的，它使用更多的 C-ish 方法来获取指针，而不是引用，这在 C++ 中通常更可取。

# android - SOAP Android pullparser 异常需要一个带引号的字符串

> ID：14196024
> 
> 赞同：1
> 
> 时间：2013-01-07T12:31:54.833
> 
> 标签：android, eclipse, soap, xmlpullparser

我正在尝试让这个[http://www.apniurdu.com/Soap.html](http://www.apniurdu.com/Soap.html) Web 服务在 Android 上运行。

```
 private static final String cMETHOD_NAME = "Translate";
 private static final String cSOAP_ACTION = "http://apniurdu.com/SOAP/Urdu2.wsdl/Translate&quot";
 private static final String cNAMESPACE = "http://apniurdu.com/SOAP/Urdu2.wsdl";
 private static final String cURL = "http://apniurdu.com/SOAP/SOAP.pl";

 public SoapObject Translatesoap(String METHOD_NAME, String SOAP_ACTION, String NAMESPACE, String URL) throws IOException, XmlPullParserException {
        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME); //set up request
        java.lang.String symbol="hello world, good morning";
        request.addProperty("symbol", symbol); //variable name, value. I got the variable name, from the wsdl file!
        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11); //put all required data into a soap envelope
        envelope.setOutputSoapObject(request);  //prepare request
        AndroidHttpTransport httpTransport = new AndroidHttpTransport(URL);  
        httpTransport.debug = true;  //this is optional, use it if you don't want to use a packet sniffer to check what the sent message was (httpTransport.requestDump)
        httpTransport.call(SOAP_ACTION, envelope); //send request
        SoapObject result=(SoapObject)envelope.getResponse(); //get response
        return result;
     }

    try {
                        SoapObject result=Translatesoap(cMETHOD_NAME, cSOAP_ACTION, cNAMESPACE, cURL);
                //      Log.v("ergebnis", result.getProperty(1).toString());
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    } catch (XmlPullParserException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }

                    Log.v("next", "try"); 
```

这基本上是我的代码。第一个变量；第2程序，第3程序的调用。运行时出现 XMLpullparser 异常：

```
01-07 12:06:32.858: W/System.err(969): org.xmlpull.v1.XmlPullParserException: Expected a quoted string (position:DOCDECL @1:50 in java.io.InputStreamReader@412d9088) 
01-07 12:06:32.858: W/System.err(969):  at org.kxml2.io.KXmlParser.readQuotedId(KXmlParser.java:664)
01-07 12:06:32.868: W/System.err(969):  at org.kxml2.io.KXmlParser.readExternalId(KXmlParser.java:643)
01-07 12:06:32.868: W/System.err(969):  at org.kxml2.io.KXmlParser.readDoctype(KXmlParser.java:585)
01-07 12:06:32.868: W/System.err(969):  at org.kxml2.io.KXmlParser.next(KXmlParser.java:418)
01-07 12:06:32.868: W/System.err(969):  at org.kxml2.io.KXmlParser.next(KXmlParser.java:310)
01-07 12:06:32.868: W/System.err(969):  at org.kxml2.io.KXmlParser.nextTag(KXmlParser.java:2029)
01-07 12:06:32.878: W/System.err(969):  at org.ksoap2.SoapEnvelope.parse(SoapEnvelope.java:126)
01-07 12:06:32.878: W/System.err(969):  at org.ksoap2.transport.Transport.parseResponse(Transport.java:63)
01-07 12:06:32.878: W/System.err(969):  at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:100)
01-07 12:06:32.878: W/System.err(969):  at com.example.c_f_converter_ksoap2.ManuelleSOAP.Translatesoap(ManuelleSOAP.java:64)
01-07 12:06:32.889: W/System.err(969):  at com.example.c_f_converter_ksoap2.ManuelleSOAP$2.onClick(ManuelleSOAP.java:102)
01-07 12:06:32.889: W/System.err(969):  at android.view.View.performClick(View.java:3511)
01-07 12:06:32.898: W/System.err(969):  at android.view.View$PerformClick.run(View.java:14105)
01-07 12:06:32.898: W/System.err(969):  at android.os.Handler.handleCallback(Handler.java:605)
01-07 12:06:32.898: W/System.err(969):  at android.os.Handler.dispatchMessage(Handler.java:92)
01-07 12:06:32.898: W/System.err(969):  at android.os.Looper.loop(Looper.java:137)
01-07 12:06:32.908: W/System.err(969):  at android.app.ActivityThread.main(ActivityThread.java:4424)
01-07 12:06:32.908: W/System.err(969):  at java.lang.reflect.Method.invokeNative(Native Method)
01-07 12:06:32.918: W/System.err(969):  at java.lang.reflect.Method.invoke(Method.java:511)
01-07 12:06:32.927: W/System.err(969):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
01-07 12:06:32.927: W/System.err(969):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
01-07 12:06:32.927: W/System.err(969):  at dalvik.system.NativeStart.main(Native Method)
01-07 12:06:32.927: V/next(969): try 
```

简而言之：据我所知，解析响应时需要一个带引号的字符串。任何线索如何解决？提前谢谢了！

更新：我认为我使用了错误的 URL。现在我将 URL 更改为 wsdl URL“http://apniurdu.com/SOAP/Urdu2.wsdl”并得到一个错误“意外的开始令牌”

```
01-07 13:09:23.527: W/System.err(1149): org.xmlpull.v1.XmlPullParserException: expected: START_TAG {http://schemas.xmlsoap.org/soap/envelope/}Envelope (position:START_TAG <definitions name='UrduSOAP' targetNamespace='http://apniurdu.com/SOAP/Urdu2.wsdl'>@10:43 in java.io.InputStreamReader@412dbf58) 
```

那么wsdl与ksoap2不兼容吗？还是我做错了什么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T12:54:19.917

我认为你的问题是这条线

```
private static final String cSOAP_ACTION = "http://apniurdu.com/SOAP/Urdu2.wsdl/Translate&quot"; 
```

也许你必须删除 "，所以你应该这样写：

```
private static final String cSOAP_ACTION = "http://apniurdu.com/SOAP/Urdu2.wsdl/Translate"; 
```

**编辑**

不是为了问题，而是为了 OP，对开始使用 ksoap2 有一点帮助

```
public SoapObject testMethod(String METHOD_NAME, String SOAP_ACTION, String NAMESPACE,   String URL, String parameter) throws IOException, XmlPullParserException
    {
        List<HeaderProperty> headers = new ArrayList<HeaderProperty>();

        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
        request.addProperty("variablename", parameter);

        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        //envelope.dotNet = true; for .net services
        envelope.setOutputSoapObject(request);

        HttpTransportSE httpTransport = new HttpTransportSE(URL);

        httpTransport.call(SOAP_ACTION, envelope, headers);

        return (SoapObject) envelope.getResponse();
    } 
```

所以这是一个使用 ksoap2 和一个字符串参数的基本调用。

# iphone - 标签栏未显示在导航堆栈中的某些 UIViewController 中

> ID：14196026
> 
> 赞同：0
> 
> 时间：2013-01-07T12:31:58.543
> 
> 标签：iphone, ios, uinavigationcontroller, uitabbarcontroller

我正在尝试制作一个基于导航的应用程序，`UIViewController`在导航堆栈中包含三个。我有一个底栏 ( `UITabBar`)。

我想在第一个`UIViewController`被推入堆栈时隐藏标签栏，我想在第二个`UIVIewController`被推入时显示标签栏。

这是我为此编写的代码。

首先`UIVIewController`：

```
NotificationDetailsVC *obj = [[NotificationDetailsVC alloc] init];
obj.hidesBottomBarWhenPushed = YES;
[self.navigationController pushViewController:obj animated:YES];
[obj release]; 
```

其次`UIViewController`，我做了：

```
NotificationBO *obj=[self.notificationsArray objectAtIndex:indexPath.row];
object.hidesBottomBarWhenPushed = NO;
[self.navigationController pushViewController:object animated:YES];
[object release]; 
```

现在的问题是，我可以为第一个 UIViewController 隐藏 UITabBar，但第二个它也被隐藏了。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T12:42:43.723

而不是使用`hidesBottomBarWhenPushed`方法。试试你的代码来**隐藏**你的标签栏`ViewController`，比如

```
[self.tabBarController.tabBar setHidden:YES]; 
```

并用于**显示标签栏**

```
[self.tabBarController.tabBar setHidden:NO]; 
```

上面的可以工作，但问题是它会在底部留下一个**空白空间。**`viewController`要克服这个问题，请设置`frame`为您的`tabbarController`.

对于**隐藏**，设置

```
[self.tabBarController.tabBar setFrame:CGRectMake(0, 480, 320, 50)] 
```

对于**显示**，设置

```
[self.tabBarController.tabBar setFrame:CGRectMake(0, 430, 320, 50)] 
```

# haskell - 为什么替代连接列表而不是选择第一个非空列表？

> ID：14196029
> 
> 赞同：4
> 
> 时间：2013-01-07T12:32:05.240
> 
> 标签：haskell, alternative-functor

从类的名称和解析器中的用法来看，`Maybe`我认为它的行为是从`a <|> b <|> c`. 所以我希望输入

```
[] <|> [1] <|> [2, 3] 
```

它将返回第一个非空列表，即：

```
[1] 
```

但它实际上只是连接了整个事情，产生：

```
[1,2,3] 
```

所以我想知道这种实现背后的原因是什么？它真的正确吗？

[http://hackage.haskell.org/packages/archive/base/latest/doc/html/Control-Applicative.html#t:Alternative](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Control-Applicative.html#t:Alternative)

PS是否有任何标准功能可以满足我的期望`Alternative`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T12:48:57.967

原因（嗯，*一个*原因）是它与`MonadPlus`实例匹配。

据我所知，当一个类型同时具有 和 的实例时，这些实例匹配是可取的`MonadPlus`，`Alternative`因为`Alternative`to`Applicative`的关系类似于 to 的`MonadPlus`关系`Monad`。

对于你想要的行为，如果你想使用`Alternative`，你需要一个`newtype`列表的包装器，作为一个独立的函数，它当然也很容易定义。

```
[] <++ xs = xs
xs <++ _  = xs 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-07T12:50:29.827

这是预期的行为。该类`Alternative`为应用函子定义了一个幺半群（因此`(Applicative f) =>`定义中的类约束）。

`Alternative``Applicative`与`MonadPlus`has to具有相同的关系`Monad`。`Alternative`列表的实例给出与列表的实例相同的行为`MonadPlus`（也与列表的实例相同的行为） ，这是有道理的`Monoid`。

不过，这不是列表幺半群的唯一有效定义。你的定义：

```
instance Monoid [a] where
  mempty = []
  [] `mappend` xs = xs
  xs `mappend` _  = xs 
```

也满足幺半群定律（练习：检查这个！）所以你可以定义一个新类型

```
newtype Lst a = Lst { getLst :: [a] } 
```

并将其制成`Monoid`/ `Alternative`/etc 实例，或者只是定义自己的函数来做你想做的事，如 Daniel Fischer 的回答。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-07T12:46:19.513

Alternative 只是为应用函子定义的一个幺半群。因此，如果满足幺半群定律，则应用函子的 Alternative 实例是正确的。

我不知道是否有标准功能可以做到这一点，但您当然可以实现自己的功能或定义自己的替代实例。

[您可以在typeclassopedia](http://www.haskell.org/haskellwiki/Typeclassopedia)中阅读更多关于它们的信息。它详细解释了所有这些类型类以及它们要遵循的规律。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-07T20:27:08.893

在实现`Alternative f`（或`MonadPlus f`）实例时，您必须选择一个幺半群并使用and`f a`来实现它。对于某些结构，例如列表，可能存在多种可能性。列表最自然的幺半群操作是它们的连接（作为标识元素）。正如您所建议的，采用第一个非空元素也是一种可能性，但对于列表来说并不自然。您的操作几乎忽略了列表的结构（长度），它只检查列表是否为空。而且它没有添加任何新内容，因为这种幺半群运算已经可以作为的 的实例使用，它旨在表示（非）空值。`empty``<|>``[]``Maybe``Alternative`

这也体现在 of 的实例`MonadPlus`中`[]`。正如[HaskellWiki](http://www.haskell.org/haskellwiki/MonadPlus)上所述，对于以下情况，有两组可能的法律`MonadPlus`：

*   Monoid + LeftZero + LeftDistribution - 由`[]`
*   Monoid + LeftZero + LeftCatch - 由和`Maybe`统计。`IO``STM`

如果我们选择你的`Alternative`and实现`MonadPlus`，那么我们只有满足的实例`... + LeftCatch`，没有满足 LeftDistribution 的实例。再一次，`MonadPlus`of与of`[]`没有太大区别。而且我们不会有任何东西可以让我们解决诸如[send+more=money](http://logicaltypes.blogspot.cz/2008/05/guarded-choice-with-monadplus.html)之类的问题。所以选择/ of来连接会更有趣。`MonadPlus``Maybe``mplus``<|>``[]`

# java - Tabris：Tabris SDK 是否考虑触摸事件？

> ID：14196030
> 
> 赞同：0
> 
> 时间：2013-01-07T12:32:06.160
> 
> 标签：java, mobile

我正在使用 Tabris SDK 进行一个小型演示。它本质上是基于 Tabris 演示的入口点之一。我创建了一个绘图小部件并`TouchListener`在以下代码片段中添加了一个类似的内容：

```
canvas.addTouchListener( new TouchListener() {

  public void touch( TouchEvent e ) 
  {
    Point point = new Point(e.x,e.y);
    mPointList.add( point );
    canvas.redraw();
  }
} ); 
```

哪里`canvas`是`ClientCanvas`来自 Tabris SDK 的。然而，`touch`- 方法`TouchListener`永远不会被调用。

当前的 Tabris SDK是否`TouchListener`完全支持（我使用的是 0.8.0 版）？

在此先感谢，迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T12:52:52.457

尚不支持 TouchListener（需要先在 RAP 中实现）。您需要使用 MouseListener。

# javascript - JQuery 使用数据对象查找元素

> ID：14196031
> 
> 赞同：1
> 
> 时间：2013-01-07T12:32:13.273
> 
> 标签：javascript, jquery, jquery-selectors

我想找到容器内的所有元素，其中某个数据属性设置为 1，以及所有根本没有设置此属性的元素。

数据属性如下：

```
$("#element").data("activate") 
```

它的值可以是 1 或 0。如果一个元素没有“激活”数据属性集，我想将其视为 0。

我目前有以下代码：

```
$("#content").find("[data-activate='0']").off(); 
```

但是我也想做这样的事情：

```
$("#content").find("all where data-activate NOT exists").off(); 
```

即，如果一个元素甚至没有设置属性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T12:34:48.447

您可以使用`:not`：

```
$('#content :not([data-activate])').off(); 
```

或者`filter()`：

```
$('#content div').filter(function() {
    return !$(this).attr('data-activate');
}).off(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T12:34:57.700

```
$("#content").find(":not([data-activate])").off(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T12:39:38.987

您可以一次使用两个选择器来选择元素，用逗号分隔它们（选择器）

1.  [:not() 选择器](http://api.jquery.com/not-selector/)。
2.  [属性等于选择器](http://api.jquery.com/attribute-equals-selector/)。

    `$("#content [data-activate='0'], #content :not([data-activate])").off();`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T12:39:48.683

尝试

```
$("#content div").map(function {
    $(this).data("activate","1") 
} 
```

这将简单地将 **data-activate = 1**添加到 #content 内的所有 div 中，无论它是 0 还是该属性不存在

# ios - 沿滑动方向移动精灵

> ID：14196033
> 
> 赞同：0
> 
> 时间：2013-01-07T12:32:19.900
> 
> 标签：ios, cocos2d-iphone, swipe

我想将我的精灵（宇宙飞船）向用户滑动的方向移动。即，向左移动 - 向左滑动向上移动 - 向上滑动等。

我是刷卡编码的新手，所以请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T10:52:57.253

这会做：

```
 - (BOOL)ccTouchBegan:(UITouch *)touch withEvent:(UIEvent *)event
{

    if (touchState != kSceneStateUngrabbed) return NO;

    // Store the starting touch point
    CGPoint touchPoint = [touch locationInView:[touch view]];
    startTouchPoint = touchPoint;

    touchPoint = [[CCDirector sharedDirector] convertToGL:touchPoint];

    // Change touch state
    touchState = kSceneStateGrabbed;

    return YES;
}

    - (void)ccTouchMoved:(UITouch *)touch withEvent:(UIEvent *)event
    {
        CGPoint touchPoint = [touch locationInView:[touch view]];

        float rightleft = touchPoint.x-startTouchPoint.x ;
        float updown =  touchPoint.y-startTouchPoint.y;
        if(abs(rightleft)>abs(updown)){
            if(rightleft>0)
            {
                [ spaceShip runAction:[CCMoveTo actionWithDuration:1 position:ccp(winsize.width,     spaceShip.position.y)]];

                }
                else
                [ spaceShip runAction:[CCMoveTo actionWithDuration:1 position:ccp(0, spaceShip.position.y)]];
            }
        else{
                if(updown<0){
                [ spaceShip runAction:[CCMoveTo actionWithDuration:1 position:ccp(spaceShip.position.x, winsize.height)]];
                        }
                else
                [ spaceShip runAction:[CCMoveTo actionWithDuration:1 position:ccp(spaceShip.position.x, 0)]];

            }

    }

    - (void)ccTouchEnded:(UITouch *)touch withEvent:(UIEvent *)event
    {
        // Change touch state
        touchState = kSceneStateUngrabbed;

    } 
```

# c# - 使用 Unity 链接 C++ 头文件和 lib 文件

> ID：14196046
> 
> 赞同：1
> 
> 时间：2013-01-07T12:33:05.163
> 
> 标签：c#, c++, header, unity3d

所以我正在统一创建一个简单的游戏，我想使用 tn 游戏背心。

[http://tngames.com/pages/Developers](http://tngames.com/pages/Developers)

我已经从他们的主页下载了 SDK，这个 SDK 是一个 C++ 头文件和库文件。我不知道如何从这里开始，将其用于我的统一项目。任何人都知道如何将文件与我的游戏耦合，以便我可以使用这些方法？

一个问题是我没有 Unity pro，所以我不能使用插件，因为有些人对我发现的一些问题提出了建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-21T15:19:11.220

至少从 Unity 5 开始，Pro 和 Free 用户都可以创建原生插件，并与他们运行的平台交互：

[Unity - 手册：本机插件](http://docs.unity3d.com/Manual/NativePlugins.html)

每个平台的步骤都不同，但它们通常涉及创建某种库（例如`.so`，在 Android下是动态的，`.a`在 iOs 下是静态的，这是我现在正在处理的平台）并将符号导入 C#（一切都很简单）在文档中解释）。

这个过程有它自己的怪癖，但如果付出足够的努力，它肯定会奏效......

希望它有所帮助（并消除可能由现在已过时的已接受答案引发的一些混乱）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T12:52:31.637

如果没有 Unity pro，您将无法使用插件，因此您无法使用本机库或外部代码。

# javascript - 检查动态生成的复选框

> ID：14196058
> 
> 赞同：1
> 
> 时间：2013-01-07T12:34:01.693
> 
> 标签：javascript, jquery, html

我正在动态生成复选框，如下所示：

```
entries.each(function()
{
    if($(this).find('parentcategoryid').text() == 0)                
    {
        xmlArr += '<span><input type="checkbox" data-mini="true" name="category'+$(this).find('categoryid').text()+'" id="checkbox'+$(this).find('categoryid').text()+'" class="techAreasCheckBox" style="margin-top: 5px;"/><label class="techAreasLabel">'+$(this).find('categoryname').text()+'</label></span><br>'; 
    } 
    else
    {
        xmlArr;
    }                   
}); // Entries.Each function 
```

说生成的复选框的名称如下：category1，category2，category3，category8，category10，category54，category55，category56，category，59，category62，category132，category133。

另外，我有一个包含 4 个数字的数组：2、54、8、10....

我想检查名称属性以数组中这些数字结尾的复选框。我该如何进行？

注意：这些是动态生成的复选框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T12:49:52.820

用于[`jQuery.each()`](http://api.jquery.com/jQuery.each/)遍历您的数字数组，然后选择`id`等于的元素`category-X`（其中`X`是当前数字）：

```
$.each(numbers, function(i, num) {
    $('#category-' + num).prop('checked', true);
}); 
```

或者，如果您只想在*创建*元素时执行此操作，您可以`checked`在适当的时候简单地将属性添加到 HTML。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T12:52:40.640

要选中复选框，您需要做的就是添加[这里](http://www.w3schools.com/tags/att_input_checked.asp)描述的选中属性。

以下是一种解决方案。首先，您希望存储 Id 而不是每次都查找它，因为它更快。其次，我使用 $.inArray 函数来确定类别是否在包含应检查的数字的数组中。最后，我使用了一个三元来添加选中的属性。

```
var numberArray = [2, 54, 8, 10];

entries.each(function() {
     if($(this).find('parentcategoryid').text() == 0) {
          var categoryId = $(this).find('categoryid').text();
          var categoryInArray = $.inArray(categoryId, numberArray) !== -1;

          xmlArr += '<span><input type="checkbox" data-mini="true" name="category'+categoryId+'" id="checkbox'+categoryId+'" class="techAreasCheckBox" style="margin-top: 5px;"' + categoryInArray ? ' checked="checked" ' : '""/><label class="techAreasLabel">'+$(this).find('categoryname').text()+'</label></span><br/>'; 
     }
}); // Entries.Each function 
```

或者，您可以只使用另一个 if 语句。

```
entries.each(function() {
     if($(this).find('parentcategoryid').text() == 0) {
          var categoryId = $(this).find('categoryid').text();
          var categoryInArray = $.inArray(categoryId, numberArray) !== -1;

          if(categoryInArray) {
          xmlArr += '<span><input type="checkbox" data-mini="true" name="category'+categoryId+'" id="checkbox'+categoryId+'" class="techAreasCheckBox" style="margin-top: 5px;" checked="checked"/><label class="techAreasLabel">'+$(this).find('categoryname').text()+'</label></span><br/>'; 
          } else {
          xmlArr += '<span><input type="checkbox" data-mini="true" name="category'+categoryId+'" id="checkbox'+categoryId+'" class="techAreasCheckBox" style="margin-top: 5px;"/><label class="techAreasLabel">'+$(this).find('categoryname').text()+'</label></span><br/>'; 
          }
     }
}); // Entries.Each function 
```

# linux - zsh 和 bash 中哪个命令的不同行为

> ID：14196061
> 
> 赞同：2
> 
> 时间：2013-01-07T12:34:08.677
> 
> 标签：linux, bash, zsh

通过使用 zsh 和 oh-my-zsh 框架一段时间，我注意到哪个命令在 zsh 中的行为与在 bash 中不同。

我的意思是说：

```
# on zsh
ilias@ilias-pc ~  ➜ which ls
ls: aliased to ls --color=auto
ilias@ilias-pc ~  ➜ which which
which: shell built-in command
ilias@ilias-pc ~  ➜ bash
[ilias@ilias-pc ~]$ which ls
/usr/bin/ls
[ilias@ilias-pc ~]$ which which
/usr/bin/which
[ilias@ilias-pc ~]$ 
```

为什么会发生这种情况，我该如何“修复”它？

PS。我在 Arch Linux 上重现了这个（不确定它是否重要，但我提到了它）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-07T12:43:40.033

```
$ zsh -c 'type which'
which is a shell builtin
$ bash -c 'type which'
which is /usr/bin/which 
```

解决方案是不使用`which(1)`，这是一个非标准且不是很有用的命令。由于替代方案指定不明确且实施不一致，您应该使用什么的问题并不是最直接的，但它们比`which`.

根据您的要求，您需要`command`（请参阅`-v`选项）`type`、 或`whence`. 前两者请参见 POSIX，后者请参见您的 shell 手册。（Bash 不支持 wherece，但大多数其他 ksh 衍生产品都支持它，尽管不一致。它通常具有最多的功能）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-07T12:43:17.437

在 ZSH 中，`which`等价于`whence -c`（显示函数的定义），而不是`whence -p`（告诉可执行路径）。如果您想更改它，请创建一个别名。

# android - 隐藏后显示操作栏

> ID：14196062
> 
> 赞同：1
> 
> 时间：2013-01-07T12:34:14.933
> 
> 标签：android, android-actionbar

我正在为 Android 2.3 开发一个应用程序，其中菜单与返回和主页按钮一起很好地位于右下方。我一直在使用

```
 android:theme="@android:style/Theme.NoTitleBar.Fullscreen" 
```

充分利用屏幕面积。现在，我将其调整为 SDK>10，这里的菜单位于操作栏的右上角。使用上面的代码行隐藏了操作栏，这意味着我再也看不到菜单了。

我当然可以通过使用隐藏操作栏

```
ActionBar actionBar = getActionBar();
actionBar.hide(); 
```

我应该把我的

```
ActionBar actionBar = getActionBar();
actionBar.show(); 
```

如果我想通过触摸屏幕边缘来显示操作栏，就像软件按钮的显示方式一样？

问候/米

# c++ - 如何在带有 qmlscene（或 qmlviewer5）的 .qml 上使用 Qt Quick 2 扩展插件

> ID：14196070
> 
> 赞同：6
> 
> 时间：2013-01-07T12:34:33.217
> 
> 标签：c++, shared-libraries, qml, qt5

我使用 QtCreator 中的项目模板“Libraries/Qt Quick 2 Extension Plugin”创建了一个测试插件作为 Qt5/QML 共享库。我的开发环境是带有 Qt-5.0.0 和 QtCreator-2.6 的 linux（详情附在底部）。

源文件（关于要点）：[https ://gist.github.com/4467883](https://gist.github.com/4467883)

源文件**默认生成，没有任何更改**。项目名称是“untitled”，uri 是“com.mycompany.mycomponents”，对象类名称是“MyItem”。“/tmp/untitled”中的源文件作为 SRCDIR。

并构建它以将库文件输出为*“libuntitled.so”*、*“qmldir”*和“/tmp/untitled-build”中的一些目标文件作为DESTDIR。

```
$ ls /tmp/untitled-build
Makefile  libuntitled.so  moc_myitem.cpp 
moc_myitem.o  moc_untitled_plugin.cpp  moc_untitled_plugin.o  myitem.o
qmldir  untitled_plugin.o 
```

**但是，我不能使用**“/tmp/test/test.qml”中的库作为带有*qmlscene*命令的测试 QML 源。

```
$ mkdir /tmp/test; cd /tmp/test
$ vim test.qml 
```

“test.qml”（要点）：[https ://gist.github.com/4474422](https://gist.github.com/4474422)

```
$ qmlscene test.qml 
```

它是**失败**的，并且**QML_IMPORT_TRACE**日志是：

```
QQmlImportDatabase::addImportPath: "/usr/lib64/qt5/qml"
QQmlImportDatabase::addImportPath: "/usr/bin"
QQmlImports(file:///tmp/test/test.qml)::addImplicitImport
QQmlImports(file:///tmp/test/test.qml)::addLibraryImport: "QtQuick" 2.0 as ""
QQmlImports(file:///tmp/test/test.qml)::importExtension: loaded "/usr/lib64/qt5/qml/QtQuick.2/qmldir"
QQmlImportDatabase::importPlugin: "QtQuick" from "/usr/lib64/qt5/qml/QtQuick.2/libqtquick2plugin.so"
file:///tmp/test/test.qml:2 module "com.mycompany.mycomponents" is not installed 
```

并尝试“-I”选项：

```
$ qmlscene test.qml -I /tmp/untitled-build 
```

那也**失败**了。日志是：

```
QQmlImportDatabase::addImportPath: "/usr/lib64/qt5/qml"
QQmlImportDatabase::addImportPath: "/usr/bin"
QQmlImportDatabase::addImportPath: "/tmp/untitled-build"
QQmlImports(file:///tmp/test/test.qml)::addImplicitImport
QQmlImports(file:///tmp/test/test.qml)::addLibraryImport: "QtQuick" 2.0 as ""
QQmlImports(file:///tmp/test/test.qml)::importExtension: loaded "/usr/lib64/qt5/qml/QtQuick.2/qmldir"
QQmlImportDatabase::importPlugin: "QtQuick" from "/usr/lib64/qt5/qml/QtQuick.2/libqtquick2plugin.so"
file:///tmp/test/test.qml:2 module "com.mycompany.mycomponents" is not installed 
```

并尝试使用“/tmp/test/qmldir”：

```
$ vim /tmp/test/qmldir 
```

“tmp/test/qmldir”（关于要点）：[https ://gist.github.com/4474497](https://gist.github.com/4474497)

那是**失败**。日志：

```
QQmlImportDatabase::addImportPath: "/usr/lib64/qt5/qml"
QQmlImportDatabase::addImportPath: "/usr/bin"
QQmlImports(file:///tmp/test/test.qml)::addImplicitImport
QQmlImports(file:///tmp/test/test.qml)::importExtension: loaded "/tmp/test/qmldir"
QQmlImportDatabase::importPlugin: ".tmp.test" from "/tmp/untitled-build/libuntitled.so"
Module '.tmp.test' does not contain a module identifier directive - it cannot be protected from external registrations.
QQmlImports(file:///tmp/test/test.qml)::addLibraryImport: "QtQuick" 2.0 as ""
QQmlImports(file:///tmp/test/test.qml)::importExtension: loaded "/usr/lib64/qt5/qml/QtQuick.2/qmldir"
QQmlImportDatabase::importPlugin: "QtQuick" from "/usr/lib64/qt5/qml/QtQuick.2/libqtquick2plugin.so"
file:///tmp/test/test.qml:2 module "com.mycompany.mycomponents" is not installed 
```

如何在 qmlscene（或 qmlviewer5）的测试 .qml("/tmp/test.qml") 中使用 library("/tmp/untitled-build/libuntitled.so")？

环境细节（基于 openSUSE-12.2）：

```
$ uname -a
Linux LH-MAIN 3.4.11-2.16-desktop #1 SMP PREEMPT Wed Sep 26 17:05:00 UTC 2012 (259fc87) x86_64 x86_64 x86_64 GNU/Linux
$ g++ --version | head -n1
g++ (SUSE Linux) 4.7.1 20120723 [gcc-4_7-branch revision 189773]
$ qmake -v            
QMake version 3.0
Using Qt version 5.0.0 in /usr/lib64
$ qtcreator -version 2>&1 >/dev/null | grep "^[^ ].*" | head -n1
Qt Creator 2.6.1 based on Qt 5.0.0
$ qmlviewer5 -v    
Qml debugging is enabled. Only use this in a safe environment!
Qt QML Viewer version 5.0.0 
```

参考：

1.  [http://doc-snapshot.qt-project.org/5.0/qtcore/plugins-howto.html](http://doc-snapshot.qt-project.org/5.0/qtcore/plugins-howto.html)
2.  [http://doc-snapshot.qt-project.org/5.0/qtcore/qtplugin.html](http://doc-snapshot.qt-project.org/5.0/qtcore/qtplugin.html)
3.  [http://qt-project.org/doc/qt-5.0/qtqml/qtqml-modules-qmldir.html](http://qt-project.org/doc/qt-5.0/qtqml/qtqml-modules-qmldir.html)
4.  [http://qt-project.org/doc/qt-5.0/qtqml/examples-quick-tutorials-extending-chapter6-plugins.html](http://qt-project.org/doc/qt-5.0/qtqml/examples-quick-tutorials-extending-chapter6-plugins.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-02T17:13:35.357

尝试将您`plugin.so`的文件和`qmldir`文件放在一个文件夹中，例如：

```
- myproject
    - imports
        - com
            - mycompany
                - mycomponents
                    - libuntitled.so
                    - qmldir 
```

然后将`imports`目录添加到`QML2_IMPORT_PATH`环境变量中。 `export QML2_IMPORT_PATH=/path/to/myproject/imports` 这在我的 linux 机器上对我有用。

# python - 需要在 python 中使用 selenium webdriver 单击 xpath

> ID：14196072
> 
> 赞同：1
> 
> 时间：2013-01-07T12:34:36.013
> 
> 标签：python, selenium, click, webdriver, element

我创建了一个与 xpath 匹配的元素列表，并希望依次单击每个元素。但是，如果我使用该`get_attribute("href")`命令，我会得到一个*“unicode”对象没有属性“click”*错误。这是因为 href 是一个字符串。如果我不使用 get_attribute 并简单地使用这个命令：

```
driver.find_elements_by_xpath(".//div/div/div[3]/table//tr[12]/td/table//tr/td/a") 
```

我得到一个充满元素的列表。我可以成功点击列表中的第一个链接；但是，当我单击第二个时，我收到此错误：*“在缓存中找不到元素-也许页面在查找后已更改”* 我想我尝试遍历的页面链接的原因是通过生成的对 java 的搜索查询（这是 href 链接之一：

```
javascript:__doPostBack('ctl00$Content$listJobsByAll1$GridView2','Page$3') ) 
```

还有一条相关信息：这个 xpath 位置只有两个属性：href 和 text。

因此，鉴于我正在处理一个 java 网站并且只有两个属性，我希望有人能告诉我可以使用哪些 webdriver 命令来获取一系列可点击的静态链接。除了一个具体的答案之外，任何关于我自己如何解决这个问题的建议都会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T12:45:36.987

如果您单击带有 的链接`selenium`，则您正在更改当前页面。您被定向到的页面没有下一个元素。

获取链接使用：

```
'.//tag/@href' 
```

你可以试试：

```
for elem in elems:
    elem.click()
    print browser.current_url
    browser.back() 
```

# java - onlocationchanged 函数从未调用过-> PhoneGap

> ID：14196074
> 
> 赞同：0
> 
> 时间：2013-01-07T12:34:38.183
> 
> 标签：java, javascript, android, html, cordova

我有一个`HTML5`用`PhoneGap`.

我在应用程序上有一张地图，我想通过 GPS 找到用户的位置。

我尝试了以下方式：

在 JS 中，我有一个改变标记位置的函数：

```
function GPS(lat, lon) {
    alert('Now U move');
    var CurrentPosition = new google.maps.LatLng(lat, lon);
    markerMyLoc.setPosition(CurrentPosition);
} 
```

在 Java 中，我有关心位置并发送 JS 函数的函数：

```
public class MainActivity extends DroidGap {

private LocationManager locationManager;
private LocationListener locationListener;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    super.setIntegerProperty("splashscreen", R.drawable.splash);
    super.loadUrl("file:///android_asset/www/XXX.html", 10000);

     locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);  

     locationListener = new GPSLocationListener();

      locationManager.requestLocationUpdates(
        LocationManager.GPS_PROVIDER, 
        0, 
        0, 
        locationListener);

    } 
} 
```

GPSLocationListener 类：

```
public class GPSLocationListener implements LocationListener 
{
  @Override
  public void onLocationChanged(Location location) {
    if (location != null) {
        GPScls MyGPS= new GPScls();
        MyGPS.GPS(location.getLatitude(),location.getLongitude());
    }
  }

@Override
public void onProviderDisabled(String provider) {
    // TODO Auto-generated method stub

}

@Override
public void onProviderEnabled(String provider) {
    // TODO Auto-generated method stub

}

@Override
public void onStatusChanged(String provider, int status, Bundle extras) {
    // TODO Auto-generated method stub

}
} 
```

GPScls 类：

```
public class GPScls extends DroidGap {
    public void GPS(double latitude,double longitude) {
        super.loadUrl("javascript:GPS("+latitude+","+longitude+")");
    }
} 
```

警报：`alert('Now U move');`未显示，谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T11:27:12.750

我意识到，我没有足够的努力从 GPS 中返回答案

看下面的问题：

[onLocationChanged 函数会调用 Android 设备的每一个动作吗？](https://stackoverflow.com/questions/14231632/is-the-function-onlocationchanged-called-every-movement-of-android-device)

# javascript - 如何使用 AJAX 获取输入字段的值并将其传递给 PHP 字符串？

> ID：14196079
> 
> 赞同：6
> 
> 时间：2013-01-07T12:34:50.557
> 
> 标签：javascript, html, ajax

我是 JavaScript 新手，所以请原谅我缺乏知识。

我正在尝试编写联系表单，并希望在访问者使用 AJAX 输入值后立即获取在特定输入文本字段中输入的值并将其传递给 PHP 字符串，以便我可以根据值显示相关信息在点击提交按钮之前输入。

如何**使用 jQuery**做到这一点？

以下是我用于表单的代码：

```
<form method="post" action="">
<input type="text" id="name" name="name" />
<input type="text" id="email" name="email" />
<input type="text" id="subject" name="subject" />
<input type="text" id="url" name="url" />
<input type="checkbox" id="showdetails" name="showdetails" /> Show URL Details
<input type="submit" value="Submit" />
</form>` 
```

我需要将 URL 输入字段的值传递给 php 字符串（只要用户检查 showdetails 复选框），以便我可以在后台处理它以显示基于 url 的信息。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-07T12:56:41.587

鉴于此html：

```
<form method="post" action="">
<input type="text" id="name" name="name" />
<input type="text" id="email" name="email" />
<input type="text" id="subject" name="subject" />
<input type="text" id="url" name="url" />
<input type="checkbox" id="showdetails" name="showdetails" /> Show URL Details
<input type="submit" value="Submit" />
</form> 
```

jQuery（复选框）

```
$(function() {
  $("showdetails").on("click",function() {
    var url = $("#url").val();
    if (url && $(this).is(":checked")) {
      $.get("relevantinfo.php",
        { "url": url },
        function(data){
          // do something with data returned
        }
      );
    }
    else {
      // clear relevant info here
    }
  });
}); 
```

接收端：[从 AJAX 调用中检索 POST 数据到 PHP](https://stackoverflow.com/questions/8236903/retrieving-post-data-from-ajax-call-to-php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T12:40:49.213

**使用文本字段中的onchange**事件获取输入字符串。

参考：[https ://developer.mozilla.org/en-US/docs/DOM/element.onchange](https://developer.mozilla.org/en-US/docs/DOM/element.onchange)

然后使用该字符串内容，调用 AJAX 函数。

```
function load(string) {
    var xmlhttp;
    if(window.XMLHttpRequest) { // code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp = new XMLHttpRequest();
    } else { // code for IE6, IE5
        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.onreadystatechange = function() {
        if(xmlhttp.readyState == 4 && xmlhttp.status == 200) {
            document.getElementById("myDiv").innerHTML = xmlhttp.responseText;
        }
    }
    xmlhttp.open("GET", "YOUR_URL", true);
    xmlhttp.send();
} 
```

正如评论中所建议的，使用 jquery + AJAX。对于 jQuery，

```
$.ajax({
    url: 'ajax/test.html',
    success: function(data) {
        $('.divClass').html(data);
        alert('Load was performed.');
    }
}); 
```

# iphone - 在电影之间切换时 AirPlay 闪烁

> ID：14196080
> 
> 赞同：2
> 
> 时间：2013-01-07T12:34:52.407
> 
> 标签：iphone, ios, video-streaming, mpmovieplayer, airplay

我有一个在表格视图中显示电影列表的应用程序。当我在设备上一个接一个地播放它们时，效果非常好。但是当我切换到`Apple TV`它时`AirPlay`它不再起作用了。它可以播放 ATV 上的第一个视频，但在切换到下一个视频后，ATV 上的屏幕开始闪烁/闪烁，几秒钟后它又在设备上播放。我`MPMoviePlayerController`用于播放流视频。

我还发现，如果之前的视频通过 AirPlay 播放完毕，它也会尝试通过 AirPlay 开始下一个视频。这是预期的行为吗？

这种与财产有关`allowsAirPlay`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T13:57:47.523

我想我找到了解决办法。在切换播放另一个视频之前，您应该停止上一个视频：

```
[self.moviePlayer stop]; 
```

如果您不是通过 AirPlay 播放，则不需要这样做，因为下一个视频会自动停止上一个视频 - 您不能一次播放两个视频。

但是，如果您确实通过 AirPlay 播放视频，则需要先停止前一个，然后再播放下一个。

这个解决方案对我有用。

# crystal-reports - Crystal Reports 按日期分组总和

> ID：14196081
> 
> 赞同：2
> 
> 时间：2013-01-07T12:34:54.823
> 
> 标签：crystal-reports, crystal-reports-2008

嗨，我正在使用 Crystal Reports 2008。我有这样的输出：

```
 Date (dd/mm/yyyy)     Weight
   -----------------------------------------
    01-01-2013            5000
    01-01-2013            1500
    02-01-2013            2000
    02-01-2013            4500
    03-01-2013            5700
    03-01-2013            5800 
```

现在，我的问题是如何对它进行求和并按日期分组，输出应该是：

```
 Date (dd/mm/yyyy)     Weight
   -----------------------------------------
    01-01-2013            6500
    02-01-2013            6500
    03-01-2013            11500 
```

谢谢，

船长16

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T15:20:19.313

*   选择权重字段。
*   选择插入 | 概括...

![在此处输入图像描述](../Images/491023678f9c3bcd2cdf6188f32970b4.png)

*   将“计算此摘要：”更改为总和
*   单击插入组...在日期字段上创建一个组

![在此处输入图像描述](../Images/fc686d58432cda38b27b02b2174f58ff.png)

*   选择日期字段并将“此部分将被打印”设置为“每个月”
*   单击“确定”关闭“插入组”对话框
*   从摘要位置选择新组（如果尚未选择），然后确定

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T13:18:24.473

1.  为日期创建组字段 (dd/mm/yyyy)
2.  然后创建一个汇总字段，对您创建的组进行操作。汇总字段应要求提供重量总和
3.  将组名和汇总字段拖到组标题。

# objective-c - 以编程方式多视图应用程序

> ID：14196082
> 
> 赞同：0
> 
> 时间：2013-01-07T12:34:56.467
> 
> 标签：objective-c, uiviewcontroller

我想知道是否可以在不使用 Interface Builder 的情况下制作多视图应用程序。

我知道如何仅使用 Xcode 和 Storyboards 来制作它，但我只想能够以编程方式制作它。

例如：如果我有一个`UIViewController`A（默认视图）和一个`UIButton`，然后我有另一个`UIViewController`B，`UIWebView`所以当我点击AI`UIButton`时`UIViewController`希望能够显示第二个视图（没有 IB）。

如何将操作设置`UIButton`为显示我的第二个视图（没有界面生成器）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T12:59:51.720

您可以向按钮添加目标：

```
[button addTarget:self action:@selector(buttonPressed:) forControlEvents:UIControlEventTouchUpInside]; 
```

然后在ControllerA中，添加这个方法：

```
-(void)buttonPressed:(id)sender
{
    [self.superview addSubview:controllerB.view];
    [self.view removeFromSuperview];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T13:01:08.560

在 ViewControllerA 上

```
 - (void)viewDidLoad
    {

        UIButton  *btn=[UIButton buttonWithType:UIButtonTypeRoundedRect];
        [btn setFrame:CGRectMake(50.0f,200.0f,60.0f,30.0f)];
        [btn setTitle:@"Next" forState:UIControlStateNormal];
        [btn setTitleColor:[UIColor blackColor] forState:UIControlStateHighlighted];
        [btn addTarget:self action:@selector(btnPressed:) forControlEvents:UIControlEventTouchUpInside];
        [self.view addSubview:btn];
        [super viewDidLoad];
        // Do any additional setup after loading the view, typically from a nib.
    }
    -(IBAction)btnPressed:(id)sender
    {
        NextViewController *nxt=[[NextViewController alloc]initWithNibName:nil bundle:nil];
        [self.navigationController pushViewController:nxt animated:YES];
    } 
```

在 viewControllerB 上

```
 - (void)viewDidLoad
    {
        UIWebView *webView = [[UIWebView alloc] initWithFrame:CGRectMake(0,0, 320, 460)];    
       NSURL *targetURL = [NSURL URLWithString:@"http://developer.apple.com/iphone/library/documentation/UIKit/Reference/UIWebView_Class/UIWebView_Class.pdf"];
        NSURLRequest *request = [NSURLRequest requestWithURL:targetURL];
        [webView loadRequest:request];

       [self.view addSubview:webView];
     } 
```

确保在 AppDelegate.h 中应该是这样的导航控制器

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    self.viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
     UINavigationController*  navController = [[UINavigationController alloc] initWithRootViewController:self.self.viewController ];
    self.window.rootViewController = navController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

# java - 在 Hibernate 运行时急切加载整个对象图

> ID：14196086
> 
> 赞同：5
> 
> 时间：2013-01-07T12:35:15.487
> 
> 标签：java, hibernate, lazy-loading, eager-loading

在说出“在查询中指定获取类型”的任何内容之前，请继续阅读。那不是我所追求的。

我正在寻找一种方法来急切加载一个完整的对象图（对象+它的所有孩子和他们的所有孩子等等）。

我**不想**枚举所有要加载的属性。直到运行时我才知道它们。

N+1 查询不是问题。但是在这个神奇的操作结束时，我不想在我的图表中留下一个代理或惰性集合。

应该可以编写一些代码来反射和递归地查看所有属性。但是收藏使这变得尴尬和复杂。

有人为这种事情推荐了推土机，但这似乎有点过分，所以我想把它留作最后的手段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T12:54:33.023

一个简单的解决方案是`lazy="false"`为所有集合（1:N 和 N:M）和关联（1:1）指定。

*这将为每个事务*将整个图形加载到内存中。因此，要使其正常工作，您最多应该有一个事务，否则会非常非常严重地损害性能。

虽然这会做你想要的，但成本可能太高了。请注意，您可以在运行时使用“获取配置文件”来选择不同的策略，但是当您请求对象时，Hibernate 总是会给您一个副本以供您使用，因此它必须每次都复制图形。

对我来说，这听起来像是 Hibernate 只是完成任务的错误工具。使用 Hibernate 映射实体很舒服，但代价是 Hibernate 泄漏到您的模型和业务代码中。如果 Hibernate 施加的约束不符合您的要求，那么您应该寻找其他地方。

也许您可以使用`Record`类型而不是完全充实的 Java bean。如果是这样，那么您可以查看[实现“活动记录”模式的](https://stackoverflow.com/questions/610590/is-there-a-java-implementation-of-the-activerecord-pattern-that-is-built-on-top)[jOOQ](http://www.jooq.org/)或框架。

如果您需要 bean 并且您不限于某种类型的数据库，请尝试使用 OO 数据库，例如[db4o](http://www.db4o.com/)。

最后，你为什么要使用 SQL？如果你总是需要整个对象图，为什么不简单地将它序列化为一个文件并在启动时加载它呢？或者使用[内存驻留数据库](http://www.edval.biz/memory-resident-programming-object-databases)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T13:24:56.710

我曾经需要类似的东西，我不得不使用反射来解决它。就我而言，我使用 hql 来检索记录。此外，这是我为定义为延迟加载的急切加载记录创建的一种方法，因此您可能希望调整第一种方法以不查找 FetchType.LAZY 属性并始终获取它。

我构建的一种方法将“准备”延迟获取。基本上有两种方法：在@ManyToOne 的hql 上使用“left join fetch”，为@OneToMany 和@ManyToMany 使用hibernate.initialize()。

因此，第一个方法返回一个字符串，其中包含 hql 所需的“left john fetch”es，并且还构建了一个 nToMany 字段列表，在执行查询后必须由 Hibernate.initialize() 调用这些字段。

```
private String buildLazyFetch(Class<? extends GenericEntity> entityClass, List<String> nToManyFields) {
    String lazyFetches = new String();
    lazyFetches += " fetch all properties ";
    // iterate through all fields looking for lazy loaded relationships
    for (Field f : entityClass.getDeclaredFields()) {
        ManyToOne manyToOne = f.getAnnotation(ManyToOne.class);
        if (manyToOne != null) {
            if (manyToOne.fetch().equals(FetchType.LAZY)) {
                lazyFetches += " left join fetch t." + f.getName() + " ";
            }
        }
        OneToMany oneToMany = f.getAnnotation(OneToMany.class);
        if (oneToMany != null) {
            if (oneToMany.fetch().equals(FetchType.LAZY)) {
                nToManyFields.add(f.getName());
            }
        }
        ManyToMany manyToMany = f.getAnnotation(ManyToMany.class);
        if (manyToMany != null) {
            if (manyToMany.fetch().equals(FetchType.LAZY)) {
                nToManyFields.add(f.getName());
            }
        }
    }
    return lazyFetches;
} 
```

并在执行 hql 后，调用：

```
private void lazyFetchNToMany (List<String> nToManyFields, GenericEntity entity) {
    for (String field : nToManyFields) {
        try {
            Hibernate.initialize(BeanUtils.getProperty(entity, field));
        } catch (HibernateException e) {
            e.printStackTrace();
        } catch (IllegalAccessException e) {
            e.printStackTrace();
        } catch (InvocationTargetException e) {
            e.printStackTrace();
        } catch (NoSuchMethodException e) {
            e.printStackTrace();
        }
    }
} 
```

我了解这与您的预期不完全一样，但如果您找不到所需的解决方案，它可能会帮助您

# java - 在 Heroku 上部署 .WAR 文件时出现内存配额超出错误 - SpringMVC

> ID：14196089
> 
> 赞同：0
> 
> 时间：2013-01-07T12:35:39.443
> 
> 标签：java, tomcat, spring-mvc, heroku

我正在尝试使用 Tomcat 在 Heroku 上部署 SpringMVC Java 项目。该应用程序很小，但是当我尝试部署 .war 文件时出现以下错误：

```
2013-01-07T12:21:53+00:00 heroku[web.1]: Starting process with command `${PRE_JAVA}java ${JAVA_OPTS} -jar webapp-runner-7.0.29.3.jar --port ${PORT} ${WEBAPP_RUNNER_OPTS} web-movie-collector-1.0.0-BUILD-SNAPSHOT.war`
2013-01-07T12:21:54+00:00 app[web.1]: Adding Context / for web-movie-collector-1.0.0-BUILD-SNAPSHOT.war
2013-01-07T12:21:56+00:00 app[web.1]: Jan 7, 2013 12:21:56 PM org.apache.coyote.AbstractProtocol init
2013-01-07T12:21:56+00:00 app[web.1]: INFO: Initializing ProtocolHandler ["http-nio-21063"]
2013-01-07T12:21:56+00:00 heroku[web.1]: Error R11 (Bad bind) -> Process bound to port 45464, should be 21063 (see environment variable PORT)
2013-01-07T12:21:56+00:00 heroku[web.1]: Stopping process with SIGKILL
2013-01-07T12:21:58+00:00 heroku[web.1]: Process exited with status 137
2013-01-07T12:21:58+00:00 heroku[web.1]: State changed from starting to crashed
2013-01-07T12:21:58+00:00 heroku[web.1]: State changed from crashed to starting
2013-01-07T12:22:00+00:00 heroku[web.1]: Starting process with command `${PRE_JAVA}java ${JAVA_OPTS} -jar webapp-runner-7.0.29.3.jar --port ${PORT} ${WEBAPP_RUNNER_OPTS} web-movie-collector-1.0.0-BUILD-SNAPSHOT.war`
2013-01-07T12:22:01+00:00 app[web.1]: Adding Context / for web-movie-collector-1.0.0-BUILD-SNAPSHOT.war
2013-01-07T12:22:01+00:00 app[web.1]: Jan 7, 2013 12:22:01 PM org.apache.coyote.AbstractProtocol init
2013-01-07T12:22:01+00:00 app[web.1]: INFO: Initializing ProtocolHandler ["http-nio-41469"]
2013-01-07T12:22:01+00:00 app[web.1]: Jan 7, 2013 12:22:01 PM org.apache.tomcat.util.net.NioSelectorPool getSharedSelector
2013-01-07T12:22:01+00:00 app[web.1]: INFO: Using a shared selector for servlet write/read
2013-01-07T12:22:01+00:00 app[web.1]: Jan 7, 2013 12:22:01 PM org.apache.catalina.core.StandardService startInternal
2013-01-07T12:22:01+00:00 app[web.1]: INFO: Starting service Tomcat
2013-01-07T12:22:01+00:00 app[web.1]: Jan 7, 2013 12:22:01 PM org.apache.catalina.core.StandardEngine startInternal
2013-01-07T12:22:01+00:00 app[web.1]: INFO: Starting Servlet Engine: Apache Tomcat/7.0.29
2013-01-07T12:22:01+00:00 heroku[web.1]: State changed from starting to up
2013-01-07T12:22:02+00:00 app[web.1]: Jan 7, 2013 12:22:02 PM org.apache.catalina.startup.ContextConfig getDefaultWebXmlFragment
2013-01-07T12:22:02+00:00 app[web.1]: INFO: No global web.xml found
2013-01-07T12:22:28+00:00 heroku[web.1]: Process running mem=745M(145.6%)
2013-01-07T12:22:28+00:00 heroku[web.1]: Error R14 (Memory quota exceeded)
2013-01-07T12:22:50+00:00 heroku[web.1]: Process running mem=769M(150.4%)
2013-01-07T12:22:50+00:00 heroku[web.1]: **Error R14 (Memory quota exceeded)**
2013-01-07T12:22:57+00:00 heroku[router]: at=error code=H12 desc="Request timeout" method=GET path=/ host=web-movie-collector-new.herokuapp.com fwd=91.208.120.254 dyno=web.1 queue=0ms wait=0ms connect=2ms service=30000ms status=503 bytes=0
**2013-01-07T12:23:12+00:00 heroku[web.1]: Process running mem=793M(155.1%)
2013-01-07T12:23:12+00:00 heroku[web.1]: Error R14 (Memory quota exceeded)
2013-01-07T12:23:34+00:00 heroku[web.1]: Process running mem=761M(148.8%)
2013-01-07T12:23:34+00:00 heroku[web.1]: Error R14 (Memory quota exceeded)**
2013-01-07T12:23:37+00:00 app[web.1]: Jan 7, 2013 12:23:37 PM org.apache.catalina.core.ApplicationContext log
2013-01-07T12:23:37+00:00 app[web.1]: INFO: No Spring WebApplicationInitializer types detected on classpath
2013-01-07T12:23:37+00:00 app[web.1]: Jan 7, 2013 12:23:37 PM org.apache.catalina.core.ApplicationContext log
2013-01-07T12:23:37+00:00 app[web.1]: INFO: Initializing Spring root WebApplicationContext
2013-01-07T12:23:37+00:00 app[web.1]: INFO : org.springframework.web.context.ContextLoader - Root WebApplicationContext: initialization started
2013-01-07T12:23:38+00:00 app[web.1]: INFO : org.springframework.web.context.support.XmlWebApplicationContext - Refreshing Root WebApplicationContext: startup date [Mon Jan 07 12:23:38 UTC 2013]; root of context hierarchy
2013-01-07T12:23:38+00:00 app[web.1]: INFO : org.springframework.beans.factory.xml.XmlBeanDefinitionReader - Loading XML bean definitions from ServletContext resource [/WEB-INF/spring/root-context.xml]
2013-01-07T12:23:38+00:00 app[web.1]: INFO : org.springframework.beans.factory.support.DefaultListableBeanFactory - Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@7458e2a1: defining beans [infoSourceConfigLoader,htmlNodePathMapper]; root of factory hierarchy
2013-01-07T12:23:39+00:00 app[web.1]: INFO : org.springframework.beans.factory.config.PropertiesFactoryBean - Loading properties file from class path resource [xpath.properties]
2013-01-07T12:23:39+00:00 app[web.1]: INFO : org.springframework.web.context.ContextLoader - Root WebApplicationContext: initialization completed in 2062 ms
2013-01-07T12:23:39+00:00 app[web.1]: null
2013-01-07T12:23:39+00:00 app[web.1]: Jan 7, 2013 12:23:39 PM org.apache.catalina.core.StandardContext listenerStart
2013-01-07T12:23:39+00:00 app[web.1]: SEVERE: Exception sending context initialized event to listener instance of class ro.isdc.LanguageLoaderListener
2013-01-07T12:23:39+00:00 app[web.1]: java.lang.NullPointerException
2013-01-07T12:23:39+00:00 app[web.1]:   at java.io.File.<init>(File.java:239)
2013-01-07T12:23:39+00:00 app[web.1]:   at ro.isdc.controllers.LocaleAwareController.loadSupportedLanguages(LocaleAwareController.java:40)
2013-01-07T12:23:39+00:00 app[web.1]:   at ro.isdc.LanguageLoaderListener.contextInitialized(LanguageLoaderListener.java:15)
2013-01-07T12:23:39+00:00 app[web.1]:   at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4791)
2013-01-07T12:23:39+00:00 app[web.1]:   at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5285)
2013-01-07T12:23:39+00:00 app[web.1]:   at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
2013-01-07T12:23:39+00:00 app[web.1]:   at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
2013-01-07T12:23:39+00:00 app[web.1]:   at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
2013-01-07T12:23:39+00:00 app[web.1]:   at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
2013-01-07T12:23:39+00:00 app[web.1]:   at java.util.concurrent.FutureTask.run(FutureTask.java:166)
2013-01-07T12:23:39+00:00 app[web.1]:   at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
2013-01-07T12:23:39+00:00 app[web.1]:   at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
2013-01-07T12:23:39+00:00 app[web.1]:   at java.lang.Thread.run(Thread.java:636)
2013-01-07T12:23:39+00:00 app[web.1]: Jan 7, 2013 12:23:39 PM org.apache.catalina.core.StandardContext startInternal
2013-01-07T12:23:39+00:00 app[web.1]: SEVERE: Error listenerStart
2013-01-07T12:23:39+00:00 app[web.1]: Jan 7, 2013 12:23:39 PM org.apache.catalina.core.StandardContext startInternal
2013-01-07T12:23:39+00:00 app[web.1]: SEVERE: Context [/] startup failed due to previous errors
2013-01-07T12:23:39+00:00 app[web.1]: SEVERE: Context [/] failed in [org.apache.catalina.core.StandardContext] lifecycle. Allowing Tomcat to shutdown.
2013-01-07T12:23:39+00:00 app[web.1]: Jan 7, 2013 12:23:39 PM org.apache.catalina.core.ApplicationContext log
2013-01-07T12:23:39+00:00 app[web.1]: INFO: Closing Spring root WebApplicationContext
2013-01-07T12:23:39+00:00 app[web.1]: INFO : org.springframework.web.context.support.XmlWebApplicationContext - Closing Root WebApplicationContext: startup date [Mon Jan 07 12:23:38 UTC 2013]; root of context hierarchy
2013-01-07T12:23:39+00:00 app[web.1]: INFO : org.springframework.beans.factory.support.DefaultListableBeanFactory - Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@7458e2a1: defining beans [infoSourceConfigLoader,htmlNodePathMapper]; root of factory hierarchy
2013-01-07T12:23:40+00:00 app[web.1]: Jan 7, 2013 12:23:40 PM org.apache.coyote.AbstractProtocol start
2013-01-07T12:23:40+00:00 app[web.1]: INFO: Starting ProtocolHandler ["http-nio-41469"]
2013-01-07T12:23:42+00:00 heroku[web.1]: Process exited with status 0
2013-01-07T12:23:42+00:00 heroku[web.1]: State changed from up to crashed
2013-01-07T12:23:59+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/ host=web-movie-collector-new.herokuapp.com fwd=91.208.120.254 dyno= queue= wait= connect= service= status=503 bytes= 
```

我该如何解决这个问题或可能导致问题的原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T12:45:37.763

你有没有注意到`NullPointerException`你的日志中的大，你应该看看这个，我认为这就是原因，启动不起作用。

根据[Heroku Troubleshooting Memory Issues in Java Applications](https://devcenter.heroku.com/articles/java-memory-issues)，您的应用程序可以在 Heroku 上使用超过 512MB 的内存，但它会被交换到磁盘，从而导致性能问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T12:47:20.060

看着

```
ro.isdc.controllers.LocaleAwareController.loadSupportedLanguages(LocaleAwareController.java:40) 
```

它在 java.io.File 中传递 null。

# cakephp - 时间页面加载并在布局页脚中显示

> ID：14196096
> 
> 赞同：2
> 
> 时间：2013-01-07T12:35:51.893
> 
> 标签：cakephp, cakephp-2.1

在应用程序进程中尽早计时页面加载并在布局页脚中显示而不修改 Cake 源的最佳解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T12:43:11.380

**编辑解决方案。**归功于[埃弗顿吉谷](https://stackoverflow.com/users/1346039/everton-yoshitani)。

```
// app/Layouts/default.ctp

echo round(microtime(true) - TIME_START, 3); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T13:56:48.040

您的代码没有问题，但如果您想要*更*`APP/webroot/index.php`准确，请在顶部使用常量：

```
<?php
// set a constant for use in app/view/layout/default.ctp
define('MTIME', microtime(true));
/**
 * PHP 5
 * 
```

和布局：

```
// see app/webroot/index.php for constant declaration
echo round(microtime(true) - MTIME, 3); 
```

因为这个文件是第一个访问的（假设使用`.htaccess`）。这取决于您在意想不到的地方使用常量。

`bootstrap.php`通常是放置这样的代码的地方，但是在您`webroot/index.php`解释为什么常量存在时的简单注释可以澄清任何阅读您的代码的人的任何困惑。

# hadoop - 如何在 Mapper 和 Reducer 类中共享一个变量？

> ID：14196097
> 
> 赞同：1
> 
> 时间：2013-01-07T12:35:54.003
> 
> 标签：hadoop, mapreduce

我有一个要求，比如我想在映射器和减速器类之间共享一个变量。情景如下：-

假设我的输入记录是 A、B 和 C 类型。我正在处理这些记录并相应地在 map 函数中为 output.collect 生成键和值。但同时我还在mapper类中声明了3个静态int变量来保持记录A、B和C的类型计数。现在这些变量将被各种map线程更新。当所有地图任务完成后，我想将这三个值传递给 Reduce 函数。

如何做到这一点？我尝试覆盖 close() 方法，但它会在每个地图函数执行后调用，而不是在所有地图函数执行完毕后调用。或者有没有其他方法可以共享变量。我希望输出每种类型记录的总数以及我正在显示的任何已处理输出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T21:26:57.253

Counters are there for a specific reason, ie. to keep count of some specific state, for example, "NUMBER_OF_RECORDS_DISCARDED".And I believe one can only *increment* these counters and not set to any arbitrary value(I may be wrong here). But sure they can be used as message passers, but there is a better way, and that is to use job configuration to set a variable and seamlessly. But this can only be used to pass a custom message to mapper or reducer and the changes in mapper will not be available in reducer.

Setting the message/variable using the old *mapred* API

```
JobConf job = (JobConf) getConf();
job.set("messageToBePassed-OR-anyValue", "123-awesome-value :P"); 
```

Setting the message/variable using the new *mapreduce* API:

```
Configuration conf = new Configuration();
conf.set("messageToBePassed-OR-anyValue", "123-awesome-value :P");
Job job = new Job(conf); 
```

Getting the message/variable using the old API in the Mapper and Reducer: The *configure()* has to be implemented in the Mapper and Reducer class and the values may be then assigned to a class member so as to be used inside *map()* or *reduce()*.

```
...
private String awesomeMessage;
public void configure(JobConf job) {
    awesomeMessage = Long.parseLong(job.get("messageToBePassed-OR-anyValue"));
}
... 
```

The variable `awesomeMessage` can then be used with the map and reduce functions.

Getting the message/variable using the new API in the Mapper and Reducer: Similar thing needs to be done here in the *setup()*.

```
Configuration conf = context.getConfiguration();
String param = conf.get("messageToBePassed-OR-anyValue"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T14:45:18.133

得到了解决方案。

使用的计数器。Mapper 和 Reducer 中的记者类都可以访问它。

# java - 如何验证空白？

> ID：14196099
> 
> 赞同：-2
> 
> 时间：2013-01-07T12:36:01.613
> 
> 标签：java, javascript, regex

我必须验证 a`String`只有空格。在我`String`的 a 之间的空格`String`是允许的，但只有空格是不允许的。例如`"conditions apply"`，`"conditions"`等是允许的，但不是`" "`。即，只允许空白

我想要一个 JavaScript 中的正则表达式

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-07T12:43:32.860

试试这个正则表达式

```
".*\\S+.*" 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-07T12:39:06.733

你真的需要使用正则表达式吗？

```
if (str.trim().length() == 0)
    return false;
else
    return true; 
```

正如评论中提到的，这可以简化为单行

```
return str.trim().length() > 0; 
```

或者，从 Java 6 开始

```
return !str.trim().isEmpty(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-07T12:39:37.763

你可以这样做：

```
// This does replace all whitespaces at the end of the string
String s = "      ".trim();
if(s.equals(""))
    System.out.println(true);
else 
    System.out.println(s); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-07T12:38:42.457

检查字符串是否不匹配`"\\s+"`怎么办？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-07T12:40:50.890

正则表达式`^\\s*$`用于匹配只有空格的字符串，您可以对此进行验证。

```
^     # Match the start of the string 
\\s*  # Match zero of more whitespace characters
$     # Match the end of the string 
```

锚定到字符串的开头和结尾在这里很重要。

# android - ABS CustomView - 溢出菜单

> ID：14196101
> 
> 赞同：0
> 
> 时间：2013-01-07T12:36:02.437
> 
> 标签：android, actionbarsherlock, custom-view, oncreateoptionsmenu

我正在做一个需要用**customview**替换 ABS 的项目。我在右上角有一个按钮。当您单击该按钮时，我希望显示一个 Spinner/contextMenu/overflow 菜单（如带有溢出主题的标准 abs）。

该按钮将触发**onCreateOptionsMenu(Menu menu)**被调用

到目前为止，我只能使用以下代码在活动（上下文菜单）底部获取菜单：

```
@Override
public boolean onCreateOptionsMenu(final Menu menu){
   menu.add(Menu.None, "", Menu.None, "title").setShowAsAction     (MenuItem.SHOW_AS_ACTION_NEVER);

   menu.add(Menu.None, "", Menu.None, "title").setShowAsAction     (MenuItem.SHOW_AS_ACTION_NEVER);
  return super.onCreateOptionsMenu(menu)
} 
```

在做了一些研究后，我发现 PopUpMenuHelper 可以帮助我，但如果找不到一些示例/示例。

有人做过类似的事情吗？有小费吗？我可以使用的任何库或类？

任何建议表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T12:42:33.243

只有在设备没有硬件密钥时才会出现溢出菜单。如果有，菜单将在底部显示为标准弹出菜单。

# com - 类“文档”的 COM 对象中的方法“添加”返回错误代码 0x800A175D（ ） 意思是：

> ID：14196104
> 
> 赞同：0
> 
> 时间：2013-01-07T12:36:11.773
> 
> 标签：com, dynamics-ax-2012

![在此处输入图像描述](../Images/4cb718c08df2f625b0da70692e508463.png)

我正在尝试从 AX 2012 报告中打开 word 模板。它在我开发的环境中运行良好，但是当我尝试从不同的登录名执行相同的操作时，我面临“COM 错误”

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T14:19:45.457

通过解码错误代码，您始终可以找到有关这些神秘 Office 错误代码的帮助。COM 错误代码包含三个主要部分：

*   前 4 位表示错误的严重程度。8 表示“警告”，一个你不能忽视的
*   接下来的 12 位是设施代码，即错误的来源。10 表示“自动化”
*   低 16 位是内部错误代码，你真正关心的那个。

将计算器切换到十六进制模式，0x175d 是错误代码 5981。现在转到谷歌并查询“word error 5981”。

很多好作品，你可以在闲暇时阅读它们。但显然那台机器上的宏存在问题。最好留给您站点的 IT 人员，如果您需要更多帮助，请使用 superuser.com。

# python - 使用南时如何维护模型字段顺序结构

> ID：14196112
> 
> 赞同：2
> 
> 时间：2013-01-07T12:36:38.460
> 
> 标签：python, django, django-south

假设我有这个与南方相关的模型：

```
class MyModel(models.Model):
    field_a = models.CharField(max_length=30)
    field_b = models.CharField(max_length=30) 
```

现在稍后我想再添加一个字段，所以我在两者之间创建了该字段`field_a`，`field_b`现在我的模型看起来像：

```
class MyModel(models.Model):
    field_a = models.CharField(max_length=30)
    field_c = models.CharField(max_length=30)
    field_b = models.CharField(max_length=30) 
```

然后我迁移了更改，在检查 MySQL 中的表结构时，它`field_c`是在所有字段的末尾创建的。我如何告诉南保持字段顺序，例如在`field_a`.

在 MySQL 中，我们可以在任何现有字段之前或之后插入新字段。在南方能做到吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-07T12:42:17.987

我不相信在使用 Django（或 South）时不能强制 MySQL 中的字段创建顺序。新字段将始终附加到表定义的末尾。

但是：列的顺序应该与您无关。继续阅读...

如果您正在针对您的数据库编写 SQL 查询，那么`select *`依赖表的字段顺序是一种不好的做法。相反，您应该指定要选择的字段，以及您希望它们报告的顺序。这使得基础表的字段顺序变得不重要。

此外，如果您的组织中的任何人当前正在编写使用`select *`: 的报告，通过在其他人之间插入新列，您可以轻松破坏使用字段位置（而不是字段名称）的报告，因为列的索引会发生变化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T12:52:00.457

正如史蒂夫梅恩所说，如果你不断更新你的模型，没有直接的方法可以做到这一点。有一个黑客可以做到这一点。

正如您已经观察到的，第一次创建模型时，所有定义一个接一个。

如果您想在添加新列后绝对确定模型的顺序，请登录 MySQL shell。这通常使用`mysql -u<user> -p`. 告诉它使用你的数据库`USE db`。

然后，使用 手动插入新列`ALTER TABLE table ADD field_c VARCHAR(30) AFTER field_a`。

现在你可以通过编辑你的`MyModel`类来告诉 Django。

```
class MyModel(models.Model):
    field_a = models.CharField(max_length=30)
    field_c = models.CharField(max_length=30)
    field_b = models.CharField(max_length=30) 
```

显然，如果您的模型发生很大变化，这真的很烦人。希望这不会发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-02T22:03:23.220

这是一个对我有用的解决方法：

1）像你一样在你的model.py文件中创建你的模型，但只添加第一个字段。

2）进行迁移，但还没有迁移。

3）逐个添加每个字段，并在每个字段之后进行迁移。

4）在拥有它们之后，迁移。

这对我有用。如果您已经设计了模型，那么您可以：

0）删除您的模型，进行迁移，迁移，然后撤消删除（您将丢失数据，如果需要，将其转储）。

1）从底部一个一个地剪切/删除每个字段，但第一个。

2）进行迁移

3）撤消以使第二个字段返回并进行迁移。对其他人重复。

4）最后，迁移。

# cordova - Phonegap 和 jquery 移动

> ID：14196115
> 
> 赞同：0
> 
> 时间：2013-01-07T12:36:50.223
> 
> 标签：cordova, jquery-mobile, dreamweaver

我刚开始开发应用程序。我阅读了大量关于可移植性等的文档。我决定用 JQ mobile 进行 phonegap，但我无法理解某些步骤。

1.  我知道我可以通过 jq mobile 使用 PG，但是 IDE 呢？有人说，他们使用 DW 6 作为 IDE，但为什么还需要 eclipse？

2.  如果我可以写一个小的拖放计算器，我为什么要使用phonegap？

我认为最糟糕的部分是，一个人可以用不同的方式解决问题，但不明白哪一个是完美的。

如有必要，我应该如何以及如何将 DW 6 和 JQ mobile 与 phonegap 一起使用？

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T16:36:14.573

1.  只有 DW6 之前的版本需要 Eclipse/XCode，DW6 有一个官方的 Phonegap 插件。

    [http://phonegap.com/2012/04/24/adobe-dreamweaver-cs6-supports-phonegap-build/](http://phonegap.com/2012/04/24/adobe-dreamweaver-cs6-supports-phonegap-build/)

2.  如果您想将您的 Web 应用程序部署为独立的移动应用程序，您需要 phonegap（或 rhomobile）将您的 HTML/CSS/JS 包装到一个工作的混合移动应用程序中。另一方面，如果您想在您的网站上部署 Phonegap，则不需要它。

    看看这里以了解如何：

    [http://tv.adobe.com/watch/cs6-creative-cloud-feature-tour-for-web/using-the-phonegap-build-panel-in-dreamweaver-cs6-to-build-native-applications- for-android-and-ios-devices/](http://tv.adobe.com/watch/cs6-creative-cloud-feature-tour-for-web/using-the-phonegap-build-panel-in-dreamweaver-cs6-to-build-native-applications-for-android-and-ios-devices/)

    和

    [http://www.youtube.com/watch?v=ngLTIV9izds](http://www.youtube.com/watch?v=ngLTIV9izds)

# php - PHP/Drupal/JavaScript Cookie 编码

> ID：14196117
> 
> 赞同：0
> 
> 时间：2013-01-07T12:37:09.840
> 
> 标签：php, javascript, drupal, encoding

我有一个基于 Drupal 字段中的数据设置的 cookie。当我使用 PHP 编写 cookie 时，扩展的 ASCII 字符显示为十六进制代码（例如 %7E），但如果我使用 JavaScript 编写类似的 cookie，则扩展的 ASCII 字符在 cookie 中显示为单个字符（例如 ~ ）。

这是我想要在我的 cookie 中的字符串。

```
Section1~email,email.calendar,calendar.wordpresssml,wordpress.moodlesml,moodle.maharasml,mahara.gdrive,gdrive.eportfolio,eportfolioblogs.wiki,wiki.youtube,email.feature,feature|Section2~reader,reader| 
```

如果我使用

```
setcookie("p", "Section1~email,email.calendar,calendar.wordpresssml,wordpress.moodlesml,moodle.maharasml,mahara.gdrive,gdrive.eportfolio,eportfolioblogs.wiki,wiki.youtube,email.feature,feature|Section2~reader,reader|", $expire); 
```

我明白了 `Section1%7Eemail%2Cemail.calendar%2Ccalendar.wordpresssml%2Cwordpress.moodlesml%2Cmoodle.maharasml%2Cmahara.gdrive%2Cgdrive.eportfolio%2Ceportfolioblogs.wiki%2Cwiki.youtube%2Cemail.feature%2Cfeature%7CSection2%7Ereader%2Creader%7C`

而不是我想要的字符串。如果我使用 JavaScript 编写 cookie，它可以正常工作。我知道这是一个编码问题，但我真的希望 PHP 使用完整的扩展 ASCII 字符集来编写 cookie。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T13:57:08.373

为什么这是个问题？您必须记住这将出现在`Set-Cookie`HTTP 标头中，并且通过不对其进行编码，您将始终必须记住特殊字符是什么并避免使用它们。使用编码，您不必担心这一点。

使用 PHP，当您这样做时，`$_COOKIE['p']`它会按照您最初的预期显示。如果您想使用 Javascript`document.cookie`或其他方法将其提取出来，那么您可以使用`decodeURIComponent(cookieValue)`.

# c# - 在 Visual Studio 2012 Express 中访问 Web 参考 WSDL

> ID：14196126
> 
> 赞同：0
> 
> 时间：2013-01-07T12:37:34.953
> 
> 标签：c#, web-services, wsdl

抱歉，这是一个新手问题，我已经在我的项目中添加了一个服务引用，并且在我的代码隐藏文件中我添加了一个引用，但我似乎无法实例化服务对象。

如果我创建代理类，我可以使用引用实例化服务 NetSuiteService 类 (NetSuiteAuthenticator.com.netsuite.webservices1.NetSuiteService)，但想知道使用添加服务引用我哪里出错了。使用添加服务参考...

```
 using CustomerPortal.ServiceReference1;

    namespace CustomerPortal
    {
        public partial class NetSuiteWSTest : System.Web.UI.Page
        {
            protected void Page_Load(object sender, EventArgs e)
            {
                NetSuiteService service = new NetSuiteService(); // <-- Cannot find NetSuiteService     
                Passport nsPassport = new Passport();
                nsPassport.account = "";
                nsPassport.email = "";            
                RecordRef nsRole = new RecordRef();
                nsRole.internalId = "3";
                nsPassport.role = nsRole;
                nsPassport.password = "";
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T22:14:29.190

好吧，我有我的答案！我重新制作了这个项目，它开始工作了！这是我能做到的最好方法。

很幸运，这是项目的开始

# iphone - 导航栏在新联系人页面上不可见

> ID：14196128
> 
> 赞同：3
> 
> 时间：2013-01-07T12:37:38.740
> 
> 标签：iphone, objective-c

我想在按钮单击时显示新的联系页面我已经在操作按钮中编写了这段代码

```
{  
    ABNewPersonViewController *abnewpersonviewcontroller = [[ABNewPersonViewController alloc] init];   
    [self.navigationController pushViewController:abnewpersonviewcontroller animated:YES];
    [newPersonController release];
 } 
```

此代码成功地将我带到新的联系页面，但问题是导航栏未显示在新的联系页面上，我可以在其中保存记录并且上面还有取消按钮请告诉我如何在新的联系页面上显示导航我点击操作按钮

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T12:48:46.903

用这个

```
ABNewPersonViewController *abnewpersonviewcontroller = [[ABNewPersonViewController alloc] init]; 
self.navigationController.navigationBarHidden = NO;
[self.navigationController pushViewController:abnewpersonviewcontroller animated:YES];
[newPersonController release]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-07T12:05:02.937

```
 ABNewPersonViewController *picker =[ABNewPersonViewController new];
    UINavigationController *nc = [[UINavigationController alloc] initWithRootViewController:picker];
    picker.newPersonViewDelegate =self;
    [self presentViewController:nc animated:YES completion:nil]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T12:45:23.550

好吧，您可以`self.navigationController.navigationBarHidden = NO;`在方法中添加到该推送视图控制器`- (void)viewWillAppear:(BOOL)animated`以强制它，但如果您没有`UINavigationBar`向`UINavigationController`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T12:46:58.540

您是否在应用程序中隐藏了导航栏？

如果是，那么你应该在移动到联系页面之前取消隐藏............

谢谢

# ajax - Primefaces 数据表动态更新

> ID：14196132
> 
> 赞同：2
> 
> 时间：2013-01-07T12:37:53.393
> 
> 标签：ajax, jsf-2, primefaces

我想随着服务器中的数据更改动态更新数据表列（特定列），它必须通过 ajax 调用反映在 UI 中。我怎样才能用primeface实现这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T14:36:11.880

您可以使用 primefaces 使用[**p:poll**](http://www.primefaces.org/showcase/ui/poll.jsf)标签提供的轮询机制。

来自 Primefaces 文档：

> Poll 是一个 ajax 组件，它能够发送定期 ajax 请求并在 JSF 支持 bean 上执行侦听器

```
<h:form id="form">  
    <p:dataTable id="tab" ...>
      //cols
    </p:dataTable>  

    <p:poll interval="3"   
            listener="#{counterBean.increment}" update="tab" />  
</h:form> 
```

# c# - Silverlight DataGrid - LoadingRowDetails 事件

> ID：14196133
> 
> 赞同：0
> 
> 时间：2013-01-07T12:37:53.900
> 
> 标签：c#, silverlight

我的 DataGrid`ItemsSource`绑定到`List<Pensioner>`. `Pensioner`是类。

如果我想`Selected`使用此代码获取行：

```
Pensioner pen = dataGridPens.SelectedItem as Pensioner; 
```

它总是给我以前选择的行。我不知道为什么？

我在 LoadingRowDetails 事件中捕获 SelectedIndex。但实际上这个事件是在 SelectionChanged 事件之前触发的。所以主要的问题是它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T12:45:46.220

在什么事件中捕获 SelectedItem，您将在 SelectionChanged 事件中确定选中的项目。

# mysql - MYSQL 在一列上选择两个值

> ID：14196134
> 
> 赞同：11
> 
> 时间：2013-01-07T12:37:55.420
> 
> 标签：mysql, sql, select, group-by

我需要从我的 mysql 表中选择一行。

在表中有两行具有一个相等的值。

```
TABLE
-----
articleId
keywordId 
```

现在我需要选择一篇文章，它的关键字 Id = 1，以及关键字 Id = 12。

每个指向关键字的链接都有自己的记录。

我怎样才能做一个选择查询来知道，如果有一篇文章，匹配这两个关键字？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-07T12:41:23.587

尝试这个：

```
SELECT *  
FROM tablename 
WHERE keywordId IN (1, 12) 
GROUP BY articleId 
HAVING COUNT(*) = 2; 
```

检查[**SQL FIDDLE 演示**](http://sqlfiddle.com/#!2/1b5f3/1)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T12:43:48.317

这称为[*关系划分*](http://www.simple-talk.com/sql/t-sql-programming/divided-we-stand-the-sql-of-relational-division/)。这是一种方法：

```
SELECT * 
FROM tablename 
WHERE articleId IN
(
   SELECT articleId
   FROM tablename
   WHERE KeywordId IN (1, 2) 
   GROUP BY articleId
   HAVING COUNT(KeywordId ) = 2
);; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T12:46:52.410

您还可以为每个关键字使用子查询并加入它们

```
select k1.articleId from
(
    select articleId from TABLE where keywordId = 1
) k1
inner join
(
    select articleId from TABLE where keywordId = 12
) k2 on k1.articleId = k2.articleId 
```

根据索引和表大小，这可能比 Group By 更有效

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-07T12:41:06.170

```
SELECT * 
FROM `table_name` 
WHERE `keywordId` = '1' AND `keywordId` = '12' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-07T12:44:44.350

```
SELECT * 
FROM table 
WHERE keywordId IN (1, 12); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-25T11:03:37.480

```
select ArticleId from Table where keywordId = 1
Intersect
select ArticleId from Table where KeywordId = 12 
```

# android - phonegap filetransfer.upload 将图像发送到服务器 200 字节太短

> ID：14196136
> 
> 赞同：2
> 
> 时间：2013-01-07T12:38:03.013
> 
> 标签：android, cordova, file-transfer

我正在尝试使用 phonegap 发送图像文件`filetransfer.upload`，但是返回的文件已损坏，并且查看 logcat 发送的文件似乎太短了 200 个字节。

这是我发送文件的代码

```
sendImageFile = function (imageURI, imageName) {
    writelog("Sending image file", 1);
    var options = new FileUploadOptions();
            options.fileKey="file";
            options.fileName=imageURI.substr(imageURI.lastIndexOf('/')+1);
            options.mimeType="image/jpeg";
            var params = new Object();
            params.value1 = "image name";
            options.params = params;
            options.chunkedMode = false;
            var ft = new FileTransfer();
            writelog("image uri length " + imageURI.length, 1);
    writelog("Image options set up successfully", 1);
    var ft = new FileTransfer();
    ft.upload(imageURI, uploadurl, win, transFail, options);
} 
```

这里有一些来自 logcat 的相关行

```
01-07 12:27:30.743: D/FileTransfer(20066): Uploaded 114688 of 145432    bytes 

01-07 12:27:31.571: D/FileTransfer(20066): got response from    server 

01-07 12:27:31.696: D/CordovaLog(20066): Code = 200 

01-07 12:27:31.696: D/CordovaLog(20066): Response = 12099

01-07 12:27:31.696: D/CordovaLog(20066): Sent = 145236 
```

任何帮助将不胜感激。

谢谢

马特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T17:00:49.797

找到解决方案。我的服务器接受所有作为文件发送的数据，而不是从表单提交中分解它（我相信）。这导致在主图像数据之前有几行文本。

为了解决这个问题，我安装了一个旧的 fileTransfer 插件（https://github.com/phonegap/phonegap-plugins/tree/master/Android/FileUploader），恢复到 phonegap 的 1.8.1 版（因为我不确定如何更新目前较旧的插件）。

编辑 fileUpload.java 文件以删除要发送的文件之前的所有文本。现在它可以被服务器读取

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T17:26:58.453

您不能在 FileTransfer 上传方法中使用从 Android 上的相机成功回调获得的 imageUri，您必须首先将 uri 解析为这样的文件名：

```
navigator.camera.getPicture(function(imageURI){

    window.resolveLocalFileSystemURI(imageURI, function(fileEntry) {
        fileEntry.file(function(fileObj) {

            var fileName = fileObj.fullPath;

            //now use the fileName in your upload method
            var options = new FileUploadOptions();
            options.fileKey = "file";
            options.fileName = fileName.substr(fileName.lastIndexOf('/')+1);
            //...
        });
    });

}, errorFn, cameraParams); 
```

# cakephp - 计算页面上执行了多少查询

> ID：14196139
> 
> 赞同：1
> 
> 时间：2013-01-07T12:38:09.643
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.1

有没有一种简单的方法来计算在 CakePHP 页面上执行的所有查询？

我只需要一个数字，表示从 AppController 开始到页面渲染结束执行了多少查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T13:41:23.597

这基本上是对 sql_dump 元素的编辑。它位于 lib/cake/view/elements 中。无论如何，这对你来说是一个起点。

```
$sources = ConnectionManager::sourceList();
$logs = array();
foreach ($sources as $source):
    $db = ConnectionManager::getDataSource($source);
    if (!method_exists($db, 'getLog')):
        continue;
    endif;
    $logs[$source] = $db->getLog();
endforeach;

$queries = 0;
foreach ($logs as $source => $logInfo):
    $queries += $logInfo['count'];
endforeach; 
```

# user-interface - 自定义 OpenLayers 设计

> ID：14196144
> 
> 赞同：1
> 
> 时间：2013-01-07T12:38:34.080
> 
> 标签：user-interface, controls, zooming, openlayers

我想使用我自己的图像更改 OpenLayers 的默认 UI（缩放栏、方向...），这些图像的大小与原始图像不同。然而，问题仍然存在于 javascript 中硬编码的元素的定位和尺寸上。

谁能告诉我如何将我自己的模型用于不同的控件，或者至少给出一些想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T21:59:33.213

In OpenLayers, you can subclass any control, to really make it whatever you'd like. I've taken the liberty to subclass the PanZoomBar per your question to make it look more like a Google Maps PanZoomBar. First, create your control:

```
var panZoomBar = new OpenLayers.Control.PanZoomBar({
    panIcons: false // my custom option I use to hide the pan buttons
}); 
```

Next, override the control with methods you'd like to customize. For this example, I'll be overriding the `draw()` function in order to add my own css styles, images, and positioning:

```
OpenLayers.Util.extend(panZoomBar, {
    draw: function(px) {
        // initialize our internal div
        OpenLayers.Control.prototype.draw.apply(this, arguments);
        px = this.position.clone();

        // place the controls
        this.buttons = [];

        var sz = {w: 18, h: 18};
        if (this.panIcons) { // will only draw our pan tools if this option is configured
            var centered = new OpenLayers.Pixel(px.x+sz.w/2, px.y);
            var wposition = sz.w;

            if (this.zoomWorldIcon) {
                centered = new OpenLayers.Pixel(px.x+sz.w, px.y);
            }

            this._addButton("panup", "north-mini.png", centered, sz);
            px.y = centered.y+sz.h;
            this._addButton("panleft", "west-mini.png", px, sz);
            if (this.zoomWorldIcon) {
                this._addButton("zoomworld", "zoom-world-mini.png", px.add(sz.w, 0), sz);

                wposition *= 2;
            }
            this._addButton("panright", "east-mini.png", px.add(wposition, 0), sz);
            this._addButton("pandown", "south-mini.png", centered.add(0, sz.h*2), sz);
            this._addButton("zoomin", "gmaps-zoom-plus-mini.png", centered.add(0, sz.h*3+5), sz);
            centered = this._addZoomBar(centered.add(0, sz.h*4 + 5));
            this._addButton("zoomout", "gmaps-zoom-minus-mini.png", centered, sz);
        }
        else {
            this._addButton("zoomin", "gmaps-zoom-plus-mini.png", px, sz);
            centered = this._addZoomBar(px.add(0, sz.h));
            this._addButton("zoomout", "gmaps-zoom-minus-mini.png", centered, sz);
            if (this.zoomWorldIcon) {
                centered = centered.add(0, sz.h+3);
                this._addButton("zoomworld", "zoom-world-mini.png", centered, sz);
            }
        }
        // add custom CSS styles
        $(this.slider).find('img').attr('src', media_url + 'OpenLayers-2.12/img/gmaps-slider.png');
        $(this.zoombarDiv).css('background-image', 'url("' + media_url + 'OpenLayers-2.12/img/gmaps-zoombar.png")');
        return this.div;
    }
}); 
```

Then simply add this control to the map:

```
map.addControl(panZoomBar); 
```

# silverlight - 页面级别的用户授权

> ID：14196147
> 
> 赞同：3
> 
> 时间：2013-01-07T12:38:38.687
> 
> 标签：silverlight, authentication

好吧，我对如何使用用户身份验证 Silverlight 了解一些，但现在我想知道如何在页面级别实现身份验证。我的意思是如何防止未经身份验证的用户访问页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T13:37:32.640

您可以实现 Navigation.Frame 使用的自定义[ContentLoader](http://msdn.microsoft.com/en-us/library/system.windows.controls.frame.contentloader%28v=vs.95%29.aspx)。

ContentLoader 可以跟踪用户的身份（和角色）并决定哪些内容可用。

[有关示例，请参阅本文](http://www.silverlightshow.net/items/Authorization-in-Silverlight-part-1-Authorized-navigation.aspx)

# zope - Zope 2：将 manage_addProduct 与自己的产品一起使用 (AttributeError)

> ID：14196149
> 
> 赞同：1
> 
> 时间：2013-01-07T12:38:45.740
> 
> 标签：zope

我是 Zope 2 编程世界的新手。因此，如果我要问一些明显的问题，请耐心等待。

我创建了一个示例产品。ZMI 一切正常：我可以轻松添加/删除产品并更改其属性。但是我无法在代码中添加产品或使用 Zope 调试模式。我一遍又一遍地阅读 OFS.Folder 代码（作为参考）以发现任何差异都无济于事。

如果有人能给我提示/线索，我将不胜感激。TIA,

产品代码：

```
##
## bahmanm.devistan.implementation.Devistan
##
from bahmanm.devistan.interfaces import IDevistan
from zope.interface import implements
from OFS.Folder import Folder
from Products.PageTemplates.PageTemplateFile import PageTemplateFile
from Acquisition import Implicit
from Globals import Persistent, InitializeClass
from AccessControl.Role import RoleManager
from OFS.ObjectManager import ObjectManager
from OFS.PropertyManager import PropertyManager
from OFS.FindSupport import FindSupport

class Devistan(Implicit, Persistent, RoleManager, Folder):
    """Devistan product implementation.
    """
    implements(IDevistan)
    meta_type = 'Devistan Site'
    _properties = ({'id': 'title', 'type': 'string', 'mode': 'wd'},)
    manage_options = (
        ObjectManager.manage_options +
        ({'label': 'View', 'action': ''}, ) +
        PropertyManager.manage_options +
        RoleManager.manage_options +
        Folder.manage_options +
        FindSupport.manage_options
        )
    index_html = PageTemplateFile(
        '../template/devistan/index.pt', globals())

    def __init__(self, id=None):
        if id is not None:
            self.id = str(id)

InitializeClass(Devistan)

manage_addDevistanForm = PageTemplateFile(
    '../template/devistan/manage_addDevistanForm.pt', globals())

def manage_addDevistan(self, id, title='', REQUEST=None):
    """Adds a new Devistan instance.
    """
    obj = Devistan(id)
    obj.title = title
    self._setObject(id, obj)
    if REQUEST is not None:
        return self.manage_main(self, REQUEST, update_menu=1)
    return "<p>Devistan instance successfully installed: <tt>%s</tt>" % id

def initialize(self):
    self.registerClass(
        Devistan,
        constructors=(manage_addDevistanForm,
                      manage_addDevistan)) 
```

`__init__.py`代码：

```
##
## bahman.devistan.__init__.py
##
from bahmanm.devistan.implementation import Devistan

def initialize(self):
    """Registers Devistan product.
    """
    Devistan.initialize(self) 
```

`manage_addDevistan`从示例页面调用时的堆栈跟踪：

```
2013-01-07 15:43:11 ERROR Zope.SiteErrorLog 1357560791.840.323411816939 http://localhost:8080/devistan/addSampleSite
Traceback (innermost last):
  Module ZPublisher.Publish, line 126, in publish
  Module ZPublisher.mapply, line 77, in mapply
  Module ZPublisher.Publish, line 46, in call_object
  Module bahmanm.devistan.implementation.Devistan, line 37, in addSampleSite 
```

Zope 调试模式下的输出：

```
>>> app.manage_addProduct['Devistan'].manage_addDevistan
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: manage_addDevistan 
```

buildout.cfg：

```
[buildout]
parts = zope2
        instance
extends = http://download.zope.org/Zope2/index/2.13.19/versions.cfg
develop = /home/bahman/Work/devistan/bahmanm.devistan

[zope2]
recipe = zc.recipe.egg
eggs = Zope2
       bahmanm.devistan
interpreter = zopepy
debug-mode = on

[instance]
debug-mode = on
recipe = plone.recipe.zope2instance
user = admin:admin
http-address = 8080
eggs = ${zope2:eggs}
zcml = bahmanm.devistan 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T19:07:40.523

要添加您的产品，只需直接导入`manage_addDevistan`函数：

```
from bahmanm.devistan.implementation import manage_addDevistan

manage_addDevistan(somefolder, 'someid') 
```

# objective-c - 将目标添加到选择器

> ID：14196157
> 
> 赞同：0
> 
> 时间：2013-01-07T12:39:14.660
> 
> 标签：objective-c

我想知道如何将目标设置为我的选择器。我想打这个电话>>

```
 sortedArray = [views sortedArrayUsingSelector:@selector(compareWithUnit:)]; 
```

问题是我的`compareWithUnit`功能在`LogUnit`课堂上。我应该如何告诉编译器在类中寻找选择器`LogUnit`？

`views`数组仅包含`LogUnit`（UIViewControllers）对象，我想`views`按结果对数组进行排序`[LogUnit dayTime]`。

```
- (NSComparisonResult) compareWithUnit:(LogUnit*) unit;
{
    return [[self dayTime] compare:[unit dayTime]];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T12:49:36.073

来自[NSArray 参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html#//apple_ref/occ/instm/NSArray/sortedArrayUsingSelector:)：

> ```
>  - (NSArray *)sortedArrayUsingSelector:(SEL)comparator 
> ```
> 
> 比较器消息被发送到数组中的每个对象，并将数组中的另一个对象作为其单个参数。

因此，`comparator`预计将成为构成数组的对象的方法。排序时，数组中的每个对象都将收到该消息。

如果您的`views`数组包含`LogUnit`对象并`LogUnit`定义了一个`compareWithUnit:`方法，那么它将起作用。否则，您将遇到崩溃。

无法更改此行为，因为它是硬编码在`NSArray`.

顺便说一句，没有办法在选择器定义中包含目标，因为目标是一个对象（即，运行时存在的实体），而选择器只是您发送给对象的消息的名称。

出于同样的原因，将类规范添加到选择器的想法也存在缺陷：目标是一个对象，而不是一个类。此外，当您向 Obj-C 对象发送消息时，由于语言的动态特性，您会忽略对象的类，因此它也无济于事。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-07T12:51:01.783

您还可以从如下字符串创建选择器：

```
SEL selector = NSSelectorFromString(@"myMethod:"); 
```

# php - 日期和夏令时

> ID：14196160
> 
> 赞同：0
> 
> 时间：2013-01-07T12:39:25.563
> 
> 标签：php, timezone

我被告知我写的东西不起作用（如果我认为问题实际上是问题的话，可能几个月都没有了......！）

我在英国，所以使用 GMT / BST

我正在获取日期和时间，然后运行 ​​SQL 函数以根据结果执行更新，所以我的代码类似于......

```
$day = date("j M Y", mktime());

$hour = date('H',time());
$hourend = $hour + 1;

$from = $day . " " . $hour . ":00:00";
$to = $day . " " . $hour . ":59:59"; 
```

然后是一个 SQL 查询来获取更新的结果：

```
select username, dms from MISYearToDate('$from', '$to') 
```

那么，我是否需要根据我们是否处于夏令时来更改 $hour？

例如

```
$isBST = date("I", $day);
IF ($isBST == 1) 
{
 $hour = $hour + 1;
} 
```

还是会自动为我执行此操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T12:45:25.600

如果您的数据库服务器和 Web 服务器都在同一时区运行，它应该会按预期自动运行。

否则，我强烈建议您在 UTC 中运行所有服务器以避免任何时区问题。您只需要确保在您的视图层中将 UTC 转换为用户的时区。

# android - Android 动画黑边

> ID：14196161
> 
> 赞同：1
> 
> 时间：2013-01-07T12:39:28.803
> 
> 标签：android, android-layout, animation, android-theme

我正在`overridePendingTransition()`使用以下动画制作活动过渡：

```
<set xmlns:android="http://schemas.android.com/apk/res/android">
    <translate android:fromYDelta="-100%p" 
          android:toYDelta="0" 
           android:duration="@string/animationDuration"/>
  </set> 
```

对于进入动画和

```
<set xmlns:android="http://schemas.android.com/apk/res/android"> 
<translate android:fromYDelta="0" 
               android:toYDelta="100%p
            android:duration="@string/animationDuration"/>
</set> 
```

退出动画。问题是我在为它们设置动画时在这两个活动之间出现了黑色边框。动画是一个推出动画，看起来新活动将旧活动推出，我所说的边界是旧活动和新活动之间的空间。

我正在`NoTitleBar`使用`android:style`. 边框看起来像标题栏一样宽，这有什么关系吗？无论如何我需要删除这个边框，我该怎么做？

# node.js - 使用猫鼬保存对象后，我可以返回具有字段子集的对象的最简单方法是什么？

> ID：14196162
> 
> 赞同：4
> 
> 时间：2013-01-07T12:39:28.277
> 
> 标签：node.js, rest, express, mongoose

我正在使用带有 express 和 node 的猫鼬来创建 REST API。保存新对象后，我想将该对象返回给用户。但是，不希望返回一些敏感字段，如密码、信用卡详细信息、权限、账单历史记录等。

我认为会有相当于 .select 的地方，您可以只选择一部分字段返回给用户。但是，它看起来不存在，并且“标准”只是删除您不想传回给用户的字段，如下所示：

```
 org.save(function(err, org) {
    if (err) return handleError(err, res);
    orgobj = org.toObject();
    delete orgobj.__v;
    delete orgobj._id;
    delete orgobj.billing;
    delete orgobj.plans;
    delete orgobj.permissions;
    return res.send(orgobj);
  }); 
```

有没有更有效的方法？我不喜欢这样，因为如果随后添加了一个字段，则必须有人记得专门删除它。此外，出于性能原因，我也不想“重新选择”该字段。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-07T13:06:32.843

您可以添加一个方法，`getPublicFields`该方法返回一个严格包含公共字段的对象。

```
orgSchema.methods.getPublicFields = function () {
    var returnObject = {
        name: this.name,
        address: this.address,
        randomField: this.randomField
    };
    return returnObject;
}; 
```

如果您愿意，您还可以向该函数添加回调并执行一些其他查询来聚合数据。方法完成后，调用

```
var orgPublic = org.getPublicFields(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-01T08:46:15.047

如果有人仍然对更猫鼬友好的答案感兴趣，请参阅以下内容。

当您使用时，`.select(...)`您可以看到 mongoose 文档仍然具有其所有字段，并且该`_doc`属性是要减少的属性。

您可以做的是在保存新文档后删除您想要的字段`newDoc['_doc']`。

现在您可以使用`newDoc.toObject()`来拉取您指定的“公共”字段。

在下面的示例中，我使用`_.pick()`创建我想要的字段的白名单，但您也可以使用`_.remove()`创建黑名单。

请注意，该`publicFileds`数组可`.select(...)`用于查询，因此您`publicFileds`的 CRUD 操作只需要一个定义。

```
var MyModel = require('./MyModel');
var _ = require('lodash');

var publicFileds = ['_id', 'name', 'age'];

function create(newModelData, cb) {

    var newModle = new MyModel(newModelData);

    newModle.save(function (err, newDoc) {

        if (err) {
            cb(err);
            return;
        }

        newDoc['_doc'] = _.pick(newDoc['_doc'], publicFileds);
        cb(null, newDoc);

    }
} 
```

# java - 卸载 rxtxSerial.dll 时遇到问题

> ID：14196167
> 
> 赞同：1
> 
> 时间：2013-01-07T12:39:47.387
> 
> 标签：java, dll, rxtx

我正在通过 Java Applet 和 rxtx 库进行一些串行通信。小程序工作正常，但是当我遇到问题时加载更多

> UnsatisfiedLinkError: rxtxSerial.dll 已经加载到另一个类加载器中

在[如何从 java JVM 中卸载库（DLL）](https://stackoverflow.com/questions/453359/how-to-unload-dll-from-java-jvm)之后，我正在尝试卸载 dll，我相信这可以帮助解决这个问题。

据我了解，我可以为 rxtx 类自定义类加载器，并强制垃圾收集器在某些时候清理所有内容，包括加载的 dll。

所以下面的代码应该会有所帮助（我试图将它加载到负责启动与串口通信的函数中）。

```
cl = new CustomClassLoader();
ca = cl.findClass("gnu.io.CommPortIdentifier");
a = ca.newInstance();
p = ca.getMethod("getPortIdentifier");
portId = (CommPortIdentifier) p.invoke(a, comportUsed); 
```

不幸的是它抛出`ClassNotFoundException`

我猜我的自定义类加载器有问题，但不知道是什么。

请帮助我找到那个或克服的方法`UnsatisfiedLinkError`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T13:39:54.830

前段时间我不得不在运行时卸载一个有缺陷的 DLL。不幸的是，没有可靠的解决方案。即使您使用自定义类加载器，某些操作系统（如 Windows Vista）也会在 DLL 卸载时杀死 VM。最后我不得不用我自己的驱动程序替换 DLL。你可以查看我们之前的讨论

[https://forums.oracle.com/forums/thread.jspa?threadID=1546756&tstart=1185](https://forums.oracle.com/forums/thread.jspa?threadID=1546756&tstart=1185)

可能您将不得不修改您的设计以避免多次加载 DLL。一个小型的专用 Java 服务器/应用程序就可以完成这项工作

# android - 检测手势是顺时针还是逆时针

> ID：14196173
> 
> 赞同：2
> 
> 时间：2013-01-07T12:40:36.797
> 
> 标签：android, gesture

我`OnGestureListener`在课堂上使用。我想知道我做的手势是顺时针还是逆时针，并想对这些手势执行不同的任务。是否`OnGestureListener`提供此功能？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T12:49:46.857

看看这个例子是否对你有任何帮助！

[http://mobile.tutsplus.com/tutorials/android/android-sdk-creating-a-rotating-dialer/](http://mobile.tutsplus.com/tutorials/android/android-sdk-creating-a-rotating-dialer/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T12:52:44.197

```
 if(prediction.size() > 0){
  String gesturePerformed = prediction.get(0).name;
  if(gesturePerformed.equals("up")){
   myForeground.canvasUp();
   Toast.makeText(MyGameActivity.this,
     "up", Toast.LENGTH_LONG).show();
  }else if(gesturePerformed.equals("down")){
   myForeground.canvasDown();
   Toast.makeText(MyGameActivity.this,
     "down", Toast.LENGTH_LONG).show();
  }else if(gesturePerformed.equals("left")){
   myForeground.canvasLeft();
   Toast.makeText(MyGameActivity.this,
     "left", Toast.LENGTH_LONG).show();
  }else if(gesturePerformed.equals("right")){
   myForeground.canvasRight();
   Toast.makeText(MyGameActivity.this,
     "right", Toast.LENGTH_LONG).show();
  }else if(gesturePerformed.equals("clockwise")){
   myForeground.canvasClockwise();
   Toast.makeText(MyGameActivity.this,
     "clockwise", Toast.LENGTH_LONG).show();
  }else if(gesturePerformed.equals("anti-clockwise")){
   myForeground.canvasAntiClockwise();
   Toast.makeText(MyGameActivity.this,
     "anti-clockwise", Toast.LENGTH_LONG).show();
  }else if(gesturePerformed.equals("enlarge")){
   myForeground.canvasEnlarge();
   Toast.makeText(MyGameActivity.this,
     "enlarge", Toast.LENGTH_LONG).show();
  }else if(gesturePerformed.equals("reduce")){
   myForeground.canvasReduce();
   Toast.makeText(MyGameActivity.this,
     "reduce", Toast.LENGTH_LONG).show();
  }
 } 
```

}

来源：http://android-coding.blogspot.in/2012/03/gestures-detection-and-canvas-scale.html

# javascript - 根据浏览器高度为 div 设置动画

> ID：14196178
> 
> 赞同：1
> 
> 时间：2013-01-07T12:40:51.773
> 
> 标签：javascript, jquery

当用户在网页上滚动到某个高度时，我想为 DOM 中的某个 div 设置动画，例如 600px。

问题是，我正在浏览谷歌，但我找不到任何关于它的信息——这都是关于缓和的。

谁能帮我这个？我正在查看 jQuery 和 Javascript 文档，但仍然没有骰子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T12:43:01.270

尝试这个：

```
var timer;

$(document).scroll(function() {
    clearTimeout(timer);
    timer = setTimeout(function() {
        if ($(document).scrollTop() > 600) {
            $("#myDiv").animate({ height: "100px" });
            $("#myOtherDiv").animate({ width: "225px" });
        }

        if ($(document).scrollTop() > 700) {
            $("#anotherDiv").animate({ height: "300px" });
        }
    }, 100);
}); 
```

请注意这里的计时器很重要，否则您最终可能会`scroll`不必要地处理数千个事件。计时器确保功能在滚动结束后运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T12:45:09.307

您可以使用`scroll`事件（参见：[jQuery API - scroll()](http://api.jquery.com/scroll/)）来检测滚动并使用`scrollTop()`（参见：[jQUery API - scrollTop()](http://api.jquery.com/scrollTop/)）的值来检查用户滚动了多远以触发进一步的操作。

# c# - 获取两个数据表之间的差异？

> ID：14196188
> 
> 赞同：-1
> 
> 时间：2013-01-07T12:41:34.843
> 
> 标签：c#, datatable

我有这个代码：

```
DataTable before = GetCustomerTable();
FixCustomerAddresses();
DataTable after = GetCustomerTable(); 
```

该`FixCustomerAddresses()`方法不会添加或删除`Customer`表上的任何行。它只是修改某些现有的行。

我想弄清楚哪些行的列已被修改。有没有办法通过比较之前/之后的数据表来轻松做到这一点？我以前在 StackOverflow 上看到过这个问题，但这种情况略有不同，并且建议的解决方案（Merge + GetChanges; `AsEnumerable().Except`）对我不起作用。结果`DataTable`要么包含所有行，要么包含行的两倍，要么根本不包含行。`DataTable`包含超过 35000 条记录。

`FixCustomerAddresses()`只需在数据库上运行一个脚本。没有简单的方法可以确定该方法中哪些行已更改。DataTable 包含主键、一些任意列，当然还有地址字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T12:48:59.820

您必须比较所有字段，例如：

```
var modifiedRows = from beforeRow in before.AsEnumerable()
                   from afterRow in after.AsEnumerable()
                   where beforeRow.Field<int>("Col1") != afterRow.Field<int>("Col1")
                      || beforeRow.Field<string>("Col2") != afterRow.Field<string>("Col2")
                   select beforeRow; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T14:38:11.797

我最终解决这个问题的方法是将 DataTables 导出到 csv 文件，然后使用（免费）diff 库生成更改行的列表，然后将这些行导入另一个 DataTable。这足以在客户端上执行所有操作，因此我不需要更改任何数据库脚本。

# jquery - CSS3 JQuery更改类的内容

> ID：14196189
> 
> 赞同：0
> 
> 时间：2013-01-07T12:41:35.520
> 
> 标签：jquery, css, toggle

我有以下课程：

```
#categories_btn:after {
    content: "+";   
} 
```

我正在尝试使用 jquery 来切换此类以显示 + 或 - 。做这个的最好方式是什么？

```
 $('#categories_btn a').click(function(){
     $('aside#left_col #categories').toggle();
   }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T12:43:43.160

添加具有不同`:after`内容的类：

```
#categories_btn.alt:after {
    content: "-";   
} 
```

然后使用 . 在所需元素上切换此类`toggleClass('alt')`。

# vba - 如何设置主 Excel 实例？

> ID：14196191
> 
> 赞同：0
> 
> 时间：2013-01-07T12:41:47.577
> 
> 标签：vba, excel, automation

我有一个隐藏的 Excel 实例，当它是唯一运行的 Excel 实例时，我试图通过用户双击工作簿来隐藏它。我目前的解决方案是捕获隐藏实例的任何事件`Application_WorkbookOpen()`，`Application_WorkbookNew()`当它们发生时，大致执行以下操作：

```
Dim strWbOpenedName as String, xlNew as New Excel.Application
strWbOpenedName = Wb.path & "\" Wb.name
Wb.Close False
xlNew.Visible = True
xlNew.Workbooks.Open strWbOpenedName
Set xlNew = Nothing 
```

然而，尽管变得可见，并且是打开工作簿的最后一个 Excel 实例，xlNew 不会收到后续的 Application_WorkbookOpen 事件 - 这些仍然会转到原始隐藏实例。有谁知道我如何将“主要”excel实例重定向为我新创建的实例？

我有一个可怕的怀疑，我需要开始使用正在运行的对象表（取决于 Windows 如何选择 Excel 的实例作为发送打开的工作簿的实例），但对正确的操作知之甚少管理它（例如，如果这是它决定使用哪个实例的方式，我是否可以将已注册 Excel 实例的 hWnd 切换为 xlNew 可用的 hWnd 而不会导致系统崩溃？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T12:56:23.870

它不会再收到任何 Application_Open 事件，因为它已经打开。您可以在隐藏的实例上尝试以下操作...

```
xlHidden.IgnoreRemoveRequests = true; 
```

这对我来说适用于 VS2005 和 Office 2003 - 有点过时了！

# asp.net - 如何修复谷歌地图上的最短路径以从当前位置到达目的地？

> ID：14196203
> 
> 赞同：1
> 
> 时间：2013-01-07T12:42:45.267
> 
> 标签：asp.net, google-maps

我从来没有在护目镜地图上工作过，我想修复谷歌地图上的最短路径。
我想在护目镜地图上指定目的地位置，当前位置应该在我坐的地方自动获取，然后我想以某种颜色的完整方式指定最短路径以到达目的地。
我应该如何实施这个基于网络的项目，有人可以指导我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T12:51:05.480

您可以为此使用 google api 密钥地图，您可以设置您的地理定位，即您的纬度和经度，并调用 API 函数来查找源和目的地之间的最短路径您也可以看看： [http:// net.tutsplus.com/articles/news/this-is-how-you-use-the-google-maps-api/](http://net.tutsplus.com/articles/news/this-is-how-you-use-the-google-maps-api/) 您还可以在以下位置查看演示应用程序：http: [//www.birdtheme.org/useful/v3tool .html](http://www.birdtheme.org/useful/v3tool.html) 谢谢

# google-visualization - Google 图表工具中 lineChart 的类别过滤器控件

> ID：14196204
> 
> 赞同：8
> 
> 时间：2013-01-07T12:42:50.710
> 
> 标签：google-visualization

**目的：** 显示折线图，可以选择要查看的线。换句话说，假设有一个折线图，我有 2 条线，所以我想要 3 个选项，同时显示两个选项，仅显示第一个或仅显示第二个。

**类似于此处显示的功能，但用于折线图：** [http ://code.google.com/apis/ajax/playground/?type=visualization#categoryfilter_control](http://code.google.com/apis/ajax/playground/?type=visualization#categoryfilter_control)

**代码：**

```
 function drawVisualization() {
  // Create and populate the data table.
  var data = google.visualization.arrayToDataTable([
    ['x', 'Cats', 'Blanket 1', 'Blanket 2'],
    ['A',   1,       1,           0.5],
    ['B',   2,       0.5,         1],
    ['C',   4,       1,           0.5],
    ['D',   8,       0.5,         1],
    ['E',   7,       1,           0.5],
    ['F',   7,       0.5,         1],
    ['G',   8,       1,           0.5],
    ['H',   4,       0.5,         1],
    ['I',   2,       1,           0.5],
    ['J',   3.5,     0.5,         1],
    ['K',   3,       1,           0.5],
    ['L',   3.5,     0.5,         1],
    ['M',   1,       1,           0.5],
    ['N',   1,       0.5,         1]
  ]);

  // Create and draw the visualization.
  new google.visualization.LineChart(document.getElementById('visualization')).
      draw(data, {curveType: "function",
                  width: 500, height: 400,
                  vAxis: {maxValue: 10}}
          );
} 
```

​</p>

代码也可以在这里找到：[http ://code.google.com/apis/ajax/playground/?type=visualization#line_chart](http://code.google.com/apis/ajax/playground/?type=visualization#line_chart)

我怎样才能实现这个功能？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-11T03:46:05.157

选项 A：制作按钮

您可以制作一个按钮（使用标签或 等）运行 javascript 来过滤您的数据。这意味着您可以创建三个按钮（或 3 个单选框，或两个复选框和一个按钮，或其他），这些按钮在选中时将运行 javascript。

该 javascript 应该包含一个函数，该函数将过滤您的数据（可能使用带有 SetColumns 的[DataView 类](https://developers.google.com/chart/interactive/docs/reference#DataView)）以包含适合您选择的列。有一万亿种方法可以做到这一点，并且由于您使用的是一些通用数据并且您的实际应用程序可能不同，我会让您找出最适合您的数据/用户的方法。

选项 B：使用 Google 可视化控件

您也可以使用 Google Visualization [Category Filter Control](https://developers.google.com/chart/interactive/docs/gallery/controls#categoryfilter)做同样的事情，稍作调整。asgallant 有一个很好的例子，[这里](http://jsfiddle.net/asgallant/WaUu2/)有一个解释[。](https://groups.google.com/forum/?fromgroups=#!topic/google-visualization-api/wHIuGVQerhY)这需要一个中间表，但如果您喜欢类别过滤器的外观/工作方式，则效果很好。全取决于你！

由于该站点希望我将代码内联，因此您在这里：

```
google.load('visualization', '1', {packages: ['controls']});
google.setOnLoadCallback(drawChart);

function drawChart () {
    var data = new google.visualization.DataTable();
    data.addColumn('string', 'Year');
    data.addColumn('number', 'Foo');
    data.addColumn('number', 'Bar');
    data.addColumn('number', 'Baz');
    data.addColumn('number', 'Cad');
    data.addRows([
        ['2005',  45, 60, 89, 100],
        ['2006',  155, 50, 79, 24],
        ['2007',  35, 31, 140, 53],
        ['2008',  105, 23, 43, 82],
        ['2009',  120, 56, 21, 67],
        ['2010',  65, 19, 34, 134],
        ['2011',  80, 23, 130, 40],
        ['2012',  70, 140, 83, 90]
    ]);

    var columnsTable = new google.visualization.DataTable();
    columnsTable.addColumn('number', 'colIndex');
    columnsTable.addColumn('string', 'colLabel');
    var initState= {selectedValues: []};
    // put the columns into this data table (skip column 0)
    for (var i = 1; i < data.getNumberOfColumns(); i++) {
        columnsTable.addRow([i, data.getColumnLabel(i)]);
        initState.selectedValues.push(data.getColumnLabel(i));
    }

    var chart = new google.visualization.ChartWrapper({
        chartType: 'BarChart',
        containerId: 'chart_div',
        dataTable: data,
        options: {
            title: 'Foobar',
            width: 600,
            height: 400
        }
    });

    chart.draw();

    var columnFilter = new google.visualization.ControlWrapper({
        controlType: 'CategoryFilter',
        containerId: 'colFilter_div',
        dataTable: columnsTable,
        options: {
            filterColumnLabel: 'colLabel',
            ui: {
                label: 'Columns',
                allowTyping: false,
                allowMultiple: true,
                selectedValuesLayout: 'belowStacked'
            }
        },
        state: initState
    });

    google.visualization.events.addListener(columnFilter, 'statechange', function () {
        var state = columnFilter.getState();
        var row;
        var columnIndices = [0];
        for (var i = 0; i < state.selectedValues.length; i++) {
            row = columnsTable.getFilteredRows([{column: 1, value: state.selectedValues[i]}])[0];
            columnIndices.push(columnsTable.getValue(row, 0));
        }
        // sort the indices into their original order
        columnIndices.sort(function (a, b) {
            return (a - b);
        });
        chart.setView({columns: columnIndices});
        chart.draw();
    });

    columnFilter.draw();
} 
```

# c - 是否可以检索创建 WDFREQUEST 的 CPU？

> ID：14196206
> 
> 赞同：7
> 
> 时间：2013-01-07T12:42:54.127
> 
> 标签：c, windows, device-driver, wdk, wdf

我正在尝试将 CompleteRequest 的完成与最初发出请求的 CPU 关联起来。有没有办法检索在 FdoDeviceControl 期间发出请求的 CPU 或任何其他方式来查看请求在进入调度队列之前来自哪里？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T06:50:07.000

一旦您进入 DPC 例程，就为时已晚，无法判断请求的来源。在将请求排队到 DPC 队列之前，您需要调用 KeGetCurrentProcessorNumberEx()。我假设请求是 IRP ......？

# java - 如何在pdf框中读取pdf的分辨率

> ID：14196209
> 
> 赞同：3
> 
> 时间：2013-01-07T12:43:04.897
> 
> 标签：java, pdf, pdfbox

我能够将 PDF 页面转换为单独的图像。但我想在转换为图像之前阅读 PDF 的分辨率 (dpi)、长度和高度。请问，如何使用 Java 了解 PDF 的这些元数据`pdfbox`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T08:24:50.993

一般来说：pdf是基于矢量的，所以没有固定的分辨率。您可以以任何分辨率渲染它。

但是有一种方法可以获取您想要的信息。以下方法返回页面的维度：

```
PDRectangle cropBox = page.findCropBox();
Dimension dimension = cropBox.createDimension(); 
```

通过将此尺寸与文档的大小（AdobeReader -> 文件 -> 属性）进行比较，看起来默认 dpi 为 72。使用此信息，您可以计算页面的宽度和高度。

# c++ - VC++ 中的 Windows 7 按钮样式

> ID：14196213
> 
> 赞同：1
> 
> 时间：2013-01-07T12:43:19.980
> 
> 标签：c++, visual-c++, windows-7, win32gui

我是 Visual C++ 的新手（我过去用 C 而不是 C++ 编程）。我开始创建一些基本的应用程序，包括窗口和控件以及其他类似的东西。当运行我的一个应用程序对话框时，看看它的外观（不要看里面的文字，它只是一些文字）：

![在此处输入图像描述](../Images/d3d1e3a11f6d33360e528a57ed5e37f5.png)

我的问题是我制作的任何组件看起来都像 Windows 2000 的组件。如何获得 Windows 7 样式？

顺便提一句。由于我是新手，如果有人能给我一些关于学习的好资源的提示，我将不胜感激。:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T13:08:44.303

编译器无关紧要，但你需要

*   一个**应用程序清单**，指定使用第 6 版（或更高版本）的通用控件

*   如果您想支持 Windows XP，请致电`InitCommonControls`（如果我没记错名称，请检查）

您需要的*最低*完整清单是

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<assembly xmlns="urn:schemas-microsoft-com:asm.v1" manifestVersion="1.0">
<assemblyIdentity
    version="1.0.0.0"
    processorArchitecture="*"
    name="CompanyName.ProductName.YourApplication"
    type="win32"
/>
<description>Your application description here.</description>
<dependency>
    <dependentAssembly>
        <assemblyIdentity
            type="win32"
            name="Microsoft.Windows.Common-Controls"
            version="6.0.0.0"
            processorArchitecture="*"
            publicKeyToken="6595b64144ccf1df"
            language="*"
        />
    </dependentAssembly>
</dependency>
</assembly> 
```

如果包含国家字符，请将其存储为 UTF-8 文件。

对于 Visual Studio，您只需要关于常用控件的部分，

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<assembly xmlns="urn:schemas-microsoft-com:asm.v1" manifestVersion="1.0">
<dependency>
    <dependentAssembly>
        <assemblyIdentity
            type="win32"
            name="Microsoft.Windows.Common-Controls"
            version="6.0.0.0"
            processorArchitecture="*"
            publicKeyToken="6595b64144ccf1df"
            language="*"
        />
    </dependentAssembly>
</dependency>
</assembly> 
```

并将其指定为项目设置中的附加清单。

* * *

[我的Windows API 教程博客](http://learnwinapi.wordpress.com/2011/12/09/lesson-1-tools-need-configuration/)是开始 Windows API 级编程的一个很好的资源。

你最终需要的最好的*书*是 Petzold 的“Programming Windows”。在（本书的）过渡到 C#/.NET 之前的版本之一中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T13:17:45.003

回答您在哪里可以找到 Windows 7 表单样式的问题：

一种选择，看看：[http ://www.tmssoftware.com/site/advtoolbar.asp](http://www.tmssoftware.com/site/advtoolbar.asp)

TMS 有很多非常好的和方便的组件（不仅仅是视觉组件）。不幸的是，它们不是免费的……但如果您打算出售您的软件（在我看来），这是值得的。

# css - 是否可以在 x 个像素后开始边框底部？

> ID：14196214
> 
> 赞同：12
> 
> 时间：2013-01-07T12:43:22.593
> 
> 标签：css

![箭](../Images/fc1fd7892a7ee6a8e7c250490d555480.png)

如果有这样的选择会很酷，否则我必须`border-bottom`与另一个 div 重叠..

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-07T12:55:34.297

**编辑**：如果在元素的文本内容方面有更多内容，我现在会做的是 use`box-shadow`和`background-clip`. 否则，请参阅我原始答案中的最后一个解决方案。

```
div {
  border-bottom: solid .75em transparent;
  margin: 7em auto 1em;
  width: 10em; height: 5em;
  box-shadow: 0 1px 0 -1px black;
  background: dimgrey padding-box;
}
```

```
<div></div>
```

让我们剖析以上内容。

首先，`border-bottom: solid .75em transparent`.

该`border-bottom`区域将成为间隙区域。这就是我们让它透明的原因。更改此边框的宽度会更改间隙的宽度。

,和规则 - 这里没什么奇怪的`margin`，只是定位和调整元素的大小。`width``height`

然后我们有这个位：`box-shadow: 0 1px 0 -1px black`。

这`box-shadow`没有模糊创建底部边框。偏移量（第二`y`个值）创建一个`1px`“边界”。增加这个`y`偏移量会增加我们“边框”的宽度。这是一个`black`边界，但我们可以将其更改为其他任何内容。

我们也不希望我们的盒子阴影出现在侧面，所以我们给它一个`-1px`传播。

最后，我们`background`在元素上设置 a。它是`dimgrey`一个，但它可以是其他任何东西（渐变、图片等）。默认情况下，背景也延伸到边框下方，但我们不希望这样，所以我们将其限制在`padding-box`. 我在这里使用了速记。您`background-clip`可以在[**本文**](https://css-tricks.com/the-backgound-clip-property-and-use-cases/)中找到关于它如何工作的详细说明以及与此类似的其他示例（免责声明：我写了它）。

* * *

*这是原始答案*

您可以使用伪元素。绝对定位，100% 宽度，在元素底部下方偏移。

# [*演示*](http://dabblet.com/gist/4474765)

**HTML**：

```
<div></div> 
```

**CSS**：

```
div {
    position: relative;
    margin: 7em auto 1em;
    width: 10em; height: 5em;
    background: dimgrey;
}
div:after {
    position: absolute;
    bottom: -.8em;
    width: 100%;
    border-bottom: solid 1px;
    content: '';
} 
```

* * *

或者您可以使用`background-clip: content-box`并且不需要使用伪元素。但是你的文本会粘在背景的边缘（除非它是一个小文本并且居中）。

# [*演示*](http://dabblet.com/gist/4474817)

相关**CSS**：

```
div {
    margin: 7em auto 1em;
    padding: 0 0 .8em;
    border-bottom: solid 1px;
    width: 10em; height: 5em;
    background: dimgrey content-box;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T12:59:01.070

![边距、内边距和边框之间的区别](../Images/eb733d1392b7903f01d525b53e3df20a.png)

边距和填充是图像或对象周围的空白。

正如您在图像中看到的，内边距是您定义的内容和边框之间的空间，而边距是边框外的空间，即边框和该对象旁边的其他元素之间的空间。

因此，在您的情况下，您可以执行以下操作：

**HTML：**

```
<div id="box"></div> 
```

**CSS：**

```
#box{
    background: url(image.jpg) no-repeat;
    height: 100px;
    width: 100px;
    border-bottom: 1px solid #333;
    padding-bottom: 10px;
} 
```

在这里你可以找到一个简单的例子：http: [//jsfiddle.net/k7QcN/](http://jsfiddle.net/k7QcN/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T12:45:21.717

您可以使用填充。

```
padding: 10px; // push 10px the content
border: 1px solid #fff; 
```

# wordpress - 激活主题时，Wordpress 自动在 db 中插入页面

> ID：14196220
> 
> 赞同：-1
> 
> 时间：2013-01-07T12:43:39.110
> 
> 标签：wordpress

当有人安装并激活我的主题时，我想将虚拟页面（如排版）添加到数据库“wp_post”表中，其中包含有关主题的文本信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T06:00:11.970

您可以调用一些挂钩来插入页面。

1- 切换主题时调用 after_switch_theme 挂钩（如果您的 wp 版本 > 3.3.0 可用）[挂钩参考](http://codex.wordpress.org/Plugin_API/Action_Reference)

2- wp_insert_post 用于创建页面/帖子（更多文档在[wp_insert_post](http://codex.wordpress.org/Function_Reference/wp_insert_post)）

下面的代码将在您的主题functions.php中

```
<?php
function myactivationfunction($oldname, $oldtheme=false) {

}
add_action("after_switch_theme", "myactivationfunction", 10 ,  2); 
```

参考：[此处详细解释了有关主题激活和停用的更多详细信息](http://www.krishnakantsharma.com/2011/01/activationdeactivation-hook-for-wordpress-theme/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T05:31:39.263

您可以使用`dbDelta( " YOUR QUERY " );`插入页面

# asp.net-mvc-3 - 使用 Linq 匹配字符串列表中单词的第一个字符

> ID：14196228
> 
> 赞同：2
> 
> 时间：2013-01-07T12:44:02.197
> 
> 标签：asp.net-mvc-3, linq

我有一个 LINQ 查询。我只是 Linq 的初学者。我想用它来自动完成。我需要将输入与字符串中单词的起始字符匹配。考虑情景。

**字符串列表**

```
1\. London Corporation
2\. Financial Services Industry
3\. European Union Countries.
4\. Derivative Securities 
```

在上面的列表中，当用户按下字符“C”时，查询应返回值 1 和 3 作为匹配字符“C”在一串单词中。如果输入是“S”，那么结果应该是 2 和 4。

我已经尝试过以下一种。但不知道我下一步该怎么做。请任何人告诉我如何将单词拆分为字符串并匹配输入字符。我尝试了下面的代码。

**代码**

```
 var model = (from line in db.BibContents
                where line.TagNo == "020" && line.Sfld == "a" && line.Value.Split(' ').StartsWith(Val)
                    select new PoDetails
                    { 
                        BibId = line.BibId
                    }).ToList(); 
```

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T12:46:27.953

你想要这样的东西：

```
line.Value.Split(' ').Any(x => x.StartsWith(Val)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T20:34:01.983

您得到的错误是因为没有将 c#`Split()`方法转换为 SQL 语法。

在您的情况下，您可以检查该行是否以开头`<Val>`或包含`' ' + <Val>`：

```
var model = (from line in db.BibContents
             where line.TagNo == "020" && line.Sfld == "a" &&
             (line.IndexOf(Val) == 0 || line.IndexOf(' ' + Val) != -1)
                select new PoDetails
                { 
                    BibId = line.BibId
                }).ToList(); 
```

# javascript - 无法使用 AngularJS 的 $cookies 删除 cookie

> ID：14196229
> 
> 赞同：16
> 
> 时间：2013-01-07T12:44:15.910
> 
> 标签：javascript, cookies, angularjs, session-cookies

我的网络应用程序是这样的，当用户登录服务器时，会在响应中添加一个 Set-Cookie 标头，如下所示：

`Set-Cookie:JSESSIONID=1; Path=/myApp/; Secure`

注销时，我尝试在客户端（浏览器）上删除此 cookie，因为只要删除 cookie，我就不关心会话是否在服务器上成功销毁。任何挥之不去的“幽灵”会话将不时在服务器上清理。

但是，我的应用无法删除 JSESSIONID cookie。假设从调用`https://test.myserver.com/myApp/app/index.html#/mySubPage`注销函数并且注销函数执行以下操作：

```
delete $cookies["JSESSIONID"];
$location.path("/login"); 
```

cookie 没有被删除。刷新 Chrome 开发者工具中“资源”选项卡中的 cookie 列表显示它仍然存在。重新加载登录页面并刷新“资源”选项卡中列出的 cookie 仍会显示 cookie。

当它不是 HTTPOnly cookie 时，为什么我不能从我的 Javascript 客户端删除 cookie？是导致问题的路径吗？不应该，因为脚本在 cookie 路径中包含的页面上运行。通常处理 Cookie 并没有那么难，所以我很清楚我在这里可能忽略了一些微不足道的事情 - 但任何帮助将不胜感激。

**更新：**

我在原始帖子中给出了错误的应用程序路径。它现在被编辑以反映正确的路径（嗯，抽象地）。事实证明，这是该问题的关键信息。AngularJS 使用应用程序的完整相对路径作为它创建/删除的所有 cookie 的路径属性，因此由于我们的服务器将 cookie 设置为路径`/myApp/`并且应用程序在相对路径上运行`/myApp/app`，Angular 试图删除前者cookie，不存在（为了覆盖或删除现有的 cookie，名称、域和路径都需要与创建 cookie 时使用的相同）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-07T16:13:09.750

我想你应该检查来自服务器的响应——也许它们包含一个设置 cookie 值的“set cookie”标题字段。

这是一个[Plunker 示例](http://plnkr.co/edit/qlCige43xTVGEf4Ic6P8?p=preview)，说明了如何添加/更改/删除/监视 cookie 的值（但没有可以更改 cookie 值的服务器端响应）。

但通常，$cookies 对象是一种“代理对象”，由 AngularJS ngCookies 模块双向跟踪，当浏览器的 cookie 更改时，从一侧更改其字段（因此您可以 $watch 更改），但更改也会反映到浏览器的真实 cookie，因此您可以更改此对象。

所以无法删除cookie的唯一原因是您在浏览器上删除它们，服务器再次设置cookie，重新加载页面后它仍然存在。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-10-26T21:28:01.247

请注意要删除的 cookie 的 cookie 域。如果您使用多个子域（即一个用于静态资源，另一个用于 api），您的问题可能是您试图删除错误域的 cookie。

使用您选择的浏览器开发工具查看您的 cookie。为您遇到问题的要删除的 cookie 设置了任何域，请在 remove 方法的 options 参数中指定它。

```
$cookies.remove('JSESSIONID', {domain: 'domain.tld'}); 
```

**安全提示：**通过 Javascript 删除会话 ID 不会删除服务器上的会话。如果您的会话 ID 泄漏，您可能会遭受会话固定的困扰。最好通过调用 API 中的注销端点来删除 cookie，这将完全清除服务器上的会话，使其无法重复使用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-08-18T22:34:24.253

您在更新中给出的答案似乎是正确的：Angular`$cookieStore`只能处理路径值与当前路径相同的 cookie。

欺骗它的方法是使用 ajspera 在[这个问题](https://github.com/angular/angular.js/issues/1786)上给出的解决方案：

```
<head>
  <base href="/">
</head> 
```

只需添加`<base href="/">`到 HTML 的 head 元素中，然后它就可以工作了。

另一种解决方案是使用发送它的服务器设置 cookie 的路径。在 Node.js Express 中看起来像

```
res.cookie('specialCookie', 'special!', {path: '/myApp'}); 
```

请注意，对我来说，$cookieStore 似乎去掉了斜杠，所以你可能需要两种方式都尝试。

# git - 通过 push 修复多个提交的注释。

> ID：14196232
> 
> 赞同：0
> 
> 时间：2013-01-07T12:44:29.990
> 
> 标签：git

我的第一语言不是英语，我在一个第一语言也不是英语的团队中工作，但我们制作的文档是英文的。

团队中的一个人犯了一个错误，他一直在用自己的语言承诺和推动他所做的一切。所以我想知道是否有任何方法可以修改从大约 3 个月前到今天的评论。

是否可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T12:47:02.273

如果不要求已经提交这些提交的*每个*人都修复问题，你就无法做到这一点。重写历史是*srs bsns*。考虑一下您是否*真的*需要修复这些提交消息——人们将来是否可能需要它们并且无法将它们粘贴到谷歌翻译器中？如果没有，那就不值得麻烦了。

无论如何，这样做的方法是`git rebase -i HEAD~x`成为`x`您想要返回的提交次数。然后你会得到一个编辑器窗口，在其中替换`pick`为`reword`. 保存+存在后，您将能够编辑每个提交消息。

# php - 将 PHP、jQuery 登录表单附加到 WP 数据库

> ID：14196234
> 
> 赞同：0
> 
> 时间：2013-01-07T12:44:33.490
> 
> 标签：php, mysql, wordpress

我想将此[登录表单](http://wordpress.org/extend/plugins/schemeable-sliding-panel/)添加到我的 Wordpress 中。

据说我需要创建一个 MySQL 数据库，但是没有说明如何插入已经存在的 WP 数据库。

如果我在中添加 WP 表`table.sql`，它会工作吗？还是我需要知道更多的定制？

> 网站中有一些 Wordpress 插件依赖于 Wordpress 的用户表，这就是为什么需要与 WP 表合并而不是独立的原因。

我在此处发布此内容是因为该页面中的问题已关闭评论。

编辑：

遵循 j0k 的建议，我一直在搜索，有人为 wordpress 制作了确切的插件。

所以对于那些遇到这个问题并需要解决方案的人：

[可规划的滑动面板](http://wordpress.org/extend/plugins/schemeable-sliding-panel/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T12:50:34.750

如果您已经有一个表，那么您不需要创建一个表，而是对其进行更改。

使用 ALTER TABLE 查询代替 table.sql 中的 CREATE TABLE 查询。

对于已经可用的数据库，在**connect.php中填写相关详细信息**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T13:10:11.627

如果您希望它出现在您的 wordpress 中，请不要这样做，`sql.table`而是使用您自己的表格，让 wordpress 重新整合其他组件和模块。**您的整个网站不会重新调整**您的新表 ，并且在文件中 `demo.php`只需更改此

```
 $row = mysql_fetch_assoc(mysql_query("SELECT id,usr FROM tz_members WHERE usr='{$_POST['username']}' AND pass='".md5($_POST['password'])."'")); 
```

到你的表和列。

并在您的 login.php 文件中，将 demo.php 复制到其中或将您的文件重命名为 demo.php 并将这些文件放入您的登录文件夹并自定义路径，

这张桌子`tz_members`只在我告诉你的地方被调用。祝你好运

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T12:51:10.083

好吧，你只需要`table.sql`在你的数据库中插入。它将只创建一个名为`tz_members`.

就这样。

# iphone - 如何从 iphone 模拟器获得联系

> ID：14196236
> 
> 赞同：1
> 
> 时间：2013-01-07T12:44:49.143
> 
> 标签：iphone

我想从 iphone 模拟器获取所有联系方式，我已经阅读了与这个问题相关的不同问题，但我仍然无法完成这项工作。我是 iPhone 编程的新手，所以请从头开始帮助我。给我任何一步一步定义所有事情的教程链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T12:50:50.553

以下代码用于访问通讯录

```
- (void)viewDidLoad {
    [super viewDidLoad];
    contactList=[[NSMutableArray alloc] init];
    ABAddressBookRef m_addressbook = ABAddressBookCreate();

    if (!m_addressbook) {
        NSLog(@"opening address book");
    }

    CFArrayRef allPeople = ABAddressBookCopyArrayOfAllPeople(m_addressbook);
    CFIndex nPeople = ABAddressBookGetPersonCount(m_addressbook);

    for (int i=0;i &lt; nPeople;i++) { 
        NSMutableDictionary *dOfPerson=[NSMutableDictionary dictionary];

        ABRecordRef ref = CFArrayGetValueAtIndex(allPeople,i);

        //For username and surname
        ABMultiValueRef phones =(NSString*)ABRecordCopyValue(ref, kABPersonPhoneProperty);
        CFStringRef firstName, lastName;
        firstName = ABRecordCopyValue(ref, kABPersonFirstNameProperty);
        lastName  = ABRecordCopyValue(ref, kABPersonLastNameProperty);
        [dOfPerson setObject:[NSString stringWithFormat:@"%@ %@", firstName, lastName] forKey:@"name"];

        //For Email ids
        ABMutableMultiValueRef eMail  = ABRecordCopyValue(ref, kABPersonEmailProperty);
        if(ABMultiValueGetCount(eMail) &gt; 0) {
            [dOfPerson setObject:(NSString *)ABMultiValueCopyValueAtIndex(eMail, 0) forKey:@"email"];

        }

        //For Phone number
        NSString* mobileLabel;
        for(CFIndex i = 0; i &lt; ABMultiValueGetCount(phones); i++) {
            mobileLabel = (NSString*)ABMultiValueCopyLabelAtIndex(phones, i);
            if([mobileLabel isEqualToString:(NSString *)kABPersonPhoneMobileLabel])
            {
                [dOfPerson setObject:(NSString*)ABMultiValueCopyValueAtIndex(phones, i) forKey:@"Phone"];
            }
            else if ([mobileLabel isEqualToString:(NSString*)kABPersonPhoneIPhoneLabel])
            {
                [dOfPerson setObject:(NSString*)ABMultiValueCopyValueAtIndex(phones, i) forKey:@"Phone"];
                break ;
            }

        [contactList addObject:dOfPerson];
        CFRelease(ref);
        CFRelease(firstName);
        CFRelease(lastName);
    }
    NSLog(@"array is %@",contactList);
    }
} 
```

愿这对你有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T12:49:12.477

您可以`ABAddressBookCopyArrayOfAllPeopleInSource`使用 [**ABPersonRef**](http://developer.apple.com/library/ios/#documentation/AddressBook/Reference/ABPersonRef_iPhoneOS/Reference/reference.html#//apple_ref/c/func/ABAddressBookCopyArrayOfAllPeople)。

```
CFArrayRef ABAddressBookCopyArrayOfAllPeopleInSource (
   ABAddressBookRef addressBook,
   ABRecordRef source
); 
```

# language-agnostic - 如果 x > 100 则很有趣：x – 10；其他乐趣：乐趣（乐趣（x + 11））

> ID：14196238
> 
> 赞同：-3
> 
> 时间：2013-01-07T12:45:00.683
> 
> 标签：language-agnostic

我一直在准备竞争性考试，我遇到了这个问题。我尝试为它编写代码。但是根据给出的选项我没有得到答案。我得到的输出是超时。请帮我找到正确的答案

对于输入 x = 95，以下函数将返回什么值？

```
 Function fun (x:integer):integer;
 Begin
 If x > 100 then fun : x – 10
 Else fun : fun(fun (x + 11))
 End; 
```

选项是 (a) 89 (b) 90 (c) 91 (d) 92

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T12:50:24.860

我用 JAVA 做了这个：

```
 public static int test(int x){

     if (x > 100){
         return x-10;
     }// then fun : x – 10
     else {
         return test(test(x+11));
     }//fun : fun(fun (x + 11))
     }

 System.out.println(test(95)); 
```

结果是：

> 91

.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T13:05:22.967

相当于你的 C++ 程序

```
#include <cstdio>

int fun(int x)
{
    if (x > 100)
    {
        return x-10;
    }
    else
    {
        return fun(fun(x+11));
    }
}

int main()
{
    printf("%i", fun(95));
    return 0;
} 
```

输出：

```
91 
```

尽管您可以很容易地在“如果 x > 100 然后返回 x-10”这一行找到答案。如果你输入任何低于 100 的数字，它总是会输出 91。如果你将它更改为“如果 x >= 100 然后返回 x-10”，并且你输入任何低于 100 的数字，它总是会返回 90。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-06T06:40:16.650

我用以下代码在 python 中运行了你的答案，答案是 91：

```
 def fun(x):
        if(x >100):
            return x-10
        else:
            return fun(fun(x+11))

    print (fun(95)) 
```

# java - 在 @BeforeSuite 级别创建的 WebDriver 实例抛出 NullPointerException

> ID：14196245
> 
> 赞同：2
> 
> 时间：2013-01-07T12:45:26.593
> 
> 标签：java, testng, selenium-webdriver, selenium-grid

我一直在用`TestNG`它来创建我的`WebDriver`测试，到目前为止，这种组合完美无缺。但是，到目前为止，我一直遇到一个尚未找到解决方法的问题。

`WebDriver`是在一个小组的第一次测试中创建的，该小组有 950 多个测试，分布在 100 多个班级。为了避免创建多个浏览器实例（因为大多数测试都很短，并且启动浏览器有时需要比测试本身更长的时间），我尝试在第一个级别上声明驱动程序实例`@BeforeSuite`（并在 a 上销毁对象）`@AfterSuite`之后测试并重用它。

`NullPointerException`然而，一旦它开始在不同的课程上，当它试图找到驱动程序时，我一直在碰到。

代码发布在以下链接 (https://gist.github.com/4530030) 上的 gist 上。指责的行`NullPointerException`是 SecondTest.java:15

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T18:03:30.000

可能这有点晚了，但是您的驱动程序对象没有被 firsttest 和 secondtest 共享。他们每个人都有自己的副本。因此，任何被初始化的都是自己的副本。无论哪个类首先运行都会起作用，而第二个类将没有它，因为它的副本未初始化。你可以做的是有一个类在被要求时返回相同的驱动程序对象..

```
public class DriverInitializer {

private static WebDriver driver;

@BeforeSuite
public void setTestSuite() throws MalformedURLException {
    driver = new FirefoxDriver();
}

@AfterSuite
public void endTestSuite() {
    driver.quit();
}

public static WebDriver getDriver(){
    return driver;
} 
```

}

然后让所有案例都打电话给例如。firstTest 调用

```
DriverInitializer.getDriver().get("http://www.google.com"); 
```

二次测试电话

```
DriverInitializer.getDriver().get("http://cnn.com"); 
```

因此，无论谁调用相同的驱动程序实例，都会返回。

beforesuite 和 aftersuite 只需要定义一次，它们可以放置在任何地方。只是在上面的示例中它们指的是私有变量，因此我必须将它们保留在那里..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T14:30:20.590

好的，我确实看过你的代码。

`driver`变量在`WebDriverInit`类中定义。但是班级几乎无法到达`FirstTest`。可能您必须将其添加到`SuperTest`课程中：

```
protected WebDriver getDriver(){
   return wdi.getDriver();
} 
```

在 and 的开头，`FirstTest`您`SecondTest`必须`driver`为该类定义变量：

```
private WebDriver driver; 
```

而在之前

```
@BeforeSuite

public void setTestSuite() throws MalformedURLException {

startWebDriver();
driver = super.getDriver();

} 
```

我是真正的 Java 新手，所以我可能错了。但我认为这里的原因是你没有让司机参加第一次和第二次测试......

**编辑** 在 SecondTest 类中没有`@BeforeSuite`像在 FirstTest 类中那样。您不会在 SecondTest 类的任何地方启动 webdriver

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T16:33:46.193

在第一个测试中，您定义了一个@BeforeSuite 和一个@AfterSuite。这些为第一次测试创建和销毁您的驱动程序对象。

您的第二个测试没有 @BeforeSuite 或 @AfterSuite 方法，因此没有实例化驱动程序对象，因此您得到 NPE

将@BeforeSuite/@AfterSuite 添加到您的第二个测试中。

# magento - 在 magento 中获取产品产生的总收入

> ID：14196250
> 
> 赞同：0
> 
> 时间：2013-01-07T12:45:47.403
> 
> 标签：magento

如何以编程方式获取 Magento 产品产生的总收入？

假设有一个带有`id`as的产品`1`，它以 10 美元、5 次和 5 美元（折扣率）、8 次的价格出售，所以我想从 Magento 获得总共 90 美元。这可能吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T20:07:04.470

有关我的代码建议的基础，请参阅此处发布的答案

[Magento：如何显示产品已售出多少次？](https://stackoverflow.com/questions/7808213/magento-how-to-display-how-many-times-a-product-has-been-sold)

因为你想在前端显示这个值，我假设 phtml，所以我会这样编码，只是尝试将最终价格乘以售出数量。

```
<?php
        // Enter your product ID here 
        $id = 123; 

        // Load the product collection and do some filters   
        $_productCollection = Mage::getResourceModel('reports/product_collection')
            ->addOrderedQty()
            ->addAttributeToFilter('id', $id)
            ->setOrder('ordered_qty', 'desc')
            ->getFirstItem();

        // Since the filter selects one product, we can use it here as the single result
        $product = $_productCollection;

        // Load the tax helper
        $_taxHelper  = Mage::helper('tax');

        // Get the final price of the product
        $finalprice = $_taxHelper->getPrice($product, $product->getFinalPrice(), true);

        // Print the results
        echo $product->getName() . " total revenue: " . (int)$product->ordered_qty * $finalprice;
?> 
```

这是未经测试的，即时编码的，但是这些概念非常基本，因此您应该可以毫不费力地调整我所展示的内容来满足您的需求。

# glsl - 在着色器中旋转法线

> ID：14196252
> 
> 赞同：6
> 
> 时间：2013-01-07T12:45:58.047
> 
> 标签：glsl, shader, lighting, vertex-shader, normals

我有一个场景，其中包含多个具有单独位置和旋转的模型。给定法线，着色器对每个像素应用简单的双向光照。

那是我的顶点着色器。

```
#version 150

in vec3 position;
in vec3 normal;
in vec2 texcoord;

out vec3 f_normal;
out vec2 f_texcoord;

uniform mat4 model;
uniform mat4 view;
uniform mat4 proj;

void main()
{
    mat4 mvp = proj * view * model;

    f_normal   = normal;
    f_texcoord = texcoord;

    gl_Position = mvp * vec4(position, 1.0);
} 
```

这是片段着色器。

```
#version 150

in vec3 f_normal;
in vec2 f_texcoord;

uniform sampler2D tex;

vec3 sun = vec3(0.5, 1.0, 1.5);

void main()
{
    vec3 light = max(0.0, dot(normalize(f_normal), normalize(sun)));

    gl_FragColor = texture(tex, f_texcoord) * vec4(light, 1.0);
} 
```

对于没有旋转的对象，这很好用。但是对于旋转模型，照明也会旋转，当然，情况不应该如此。

原因是法线没有旋转。我已经尝试过`f_normal = model * normal;`，但这会将旋转和变换都应用于法线。

那么在将法线发送到片段着色器进行照明之前，如何在顶点着色器中旋转法线？什么是常用方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T14:27:08.380

You do need to transform the normals, by the upper 3 rows/cols of the model-view-projection matrix. (If you are performing any scaling though, you need to use the inverse transpose of this matrix. [See this article](http://www.lighthouse3d.com/tutorials/glsl-tutorial/the-normal-matrix/)).

```
mat3 normalMatrix = mat3(mvp);
normalMatrix = inverse(normalMatrix);
normalMatrix = transpose(normalMatrix);
f_normal = normalize(normal * normalMatrix);
// You should also send your tranformed position to the fragment shader
f_position = vec3(mvp * vec4(position, 1.0)); 
```

In your fragment shader, you need to calculate the distance from your light source to your fragment and normalize. Find the dot product of the normal and the light vector and multiply this by the light color.

```
vec3 light = normalize(sun - f_position);
light = max(dot(f_normal, light), 0.0) * vec3(1.0, 1.0, 1.0);
gl_FragColor = texture(tex, f_texcoord) * vec4(light, 1.0); 
```

There is definitely room for optimization in my code.

I recommend this book [OpenGL 4.0 Shading Language Cookbook](http://www.packtpub.com/opengl-4-0-shading-language-cookbook/book).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T13:57:35.303

以下解决方案适用于我的模型，但我对其背后的数学没有很深的了解。这是我的来源：[添加深度和真实感 - 表面法线](http://ofps.oreilly.com/titles/9780596804824/chrealism.html)

您需要应用于法线向量的变换表示为： N' = N * (M ^(-1) ) ^T

基本上，这意味着您将法线 (N) 乘以 ModelView 矩阵 (M) 的反转置。^(如果您的 M 矩阵是 4x4，您应该只使用 (M -1) ) ^T生成的 3x3 左上象限进行正常乘法。

同样，这对我有用，但我不能很好地解释数学。

# ruby - 在 Rails 中使用 uuidtools 生成短 UUID 字符串

> ID：14196253
> 
> 赞同：23
> 
> 时间：2013-01-07T12:46:03.463
> 
> 标签：ruby, ruby-on-rails-3, uuid

我必须生成一个要存储在数据库中的唯一且随机的字符串。为此，我使用了“uuidtools”gem。然后在我的控制器中，我添加了以下行：

```
require "uuidtools" 
```

然后在我的控制器创建方法中，我声明了一个“temp”变量并生成一个唯一且随机的“uuid”字符串，如下所示：

```
temp=UUIDTools::UUID.random_create 
```

它正在创建一个像这样的字符串：

```
f58b1019-77b0-4d44-a389-b402bb3e6d50 
```

现在我的问题是我必须缩短它，最好在 8-10 个字符内。现在我该怎么做？？是否可以传递任何参数以使其成为理想长度的字符串？

提前致谢...

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-01-07T12:49:12.737

为此，您不需要 uuidtools。您可以为此使用[安全随机](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/securerandom/rdoc/SecureRandom.html)。

```
[1] pry(main)> require "securerandom"
=> true
[2] pry(main)> SecureRandom.hex(20)
=> "82db4d707c4c5db3ebfc349da09c991b7ca0faa1"
[3] pry(main)> SecureRandom.base64(20)
=> "CECjUqNvPBaq0o4OuPy8RvsEoCY=" 
```

传递`4`和`5`到`hex`将分别生成 8 和 10 个字符的十六进制字符串。

```
[5] pry(main)> SecureRandom.hex(4)
=> "a937ec91"
[6] pry(main)> SecureRandom.hex(5)
=> "98605bb20a" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-22T11:18:29.990

请详细查看，我最近如何在我的一个项目中使用securerandom，绝对对你有帮助！

在您的 lib/usesguid.rb 中创建 usesguid.rb 文件并将下面的代码粘贴到其中 -

```
require 'securerandom'

module ActiveRecord
  module Usesguid #:nodoc:
    def self.append_features(base)
      super
      base.extend(ClassMethods)  
    end

    module ClassMethods
      def usesguid(options = {})
        class_eval do
          self.primary_key = options[:column] if options[:column]
          after_initialize :create_id
          def create_id
            self.id ||= SecureRandom.uuid
          end
        end
      end
    end
  end
end
ActiveRecord::Base.class_eval do
  include ActiveRecord::Usesguid
end 
```

在 config/application.rb 中添加以下行以加载文件 -

```
require File.dirname(__FILE__) + '/../lib/usesguid' 
```

为 UUID 函数创建迁移脚本，如下所述 -

```
class CreateUuidFunction < ActiveRecord::Migration
  def self.up
    execute "create or replace function uuid() returns uuid as 'uuid-ossp', 'uuid_generate_v1' volatile strict language C;"
  end

  def self.down
    execute "drop function uuid();"
  end
end 
```

这是联系人迁移的示例，我们如何使用它 -

```
class CreateContacts < ActiveRecord::Migration
  def change
    create_table :contacts, id: false do |t|
      t.column :id, :uuid, null:false 
      t.string :name
      t.string :mobile_no

      t.timestamps
    end
  end
end 
```

最终如何在您的模型中使用

```
class Contact < ActiveRecord::Base
  usesguid

end 
```

这将帮助您为 Rails 应用程序配置 UUID。

这对于 Rails 3.0、3.1、3.2 和 4.0 也很有用。

如果您在使用时遇到任何问题，请告诉我，很简单！

# node.js - 节点未定义

> ID：14196257
> 
> 赞同：7
> 
> 时间：2013-01-07T12:46:22.057
> 
> 标签：node.js

我只是用以下代码创建了一个 js 文件（正是来自官方页面的代码）：

```
var http = require('http');
http.createServer(function (req, res) {
  res.writeHead(200, {'Content-Type': 'text/plain'});
  res.end('Hello World\n');
}).listen(1337, '127.0.0.1');
console.log('Server running at http://127.0.0.1:1337/'); 
```

所以，我也从官方页面的“安装”按钮安装节点（对于 Windows）。但是当我尝试运行该程序时，它给了我以下信息：

![在此处输入图像描述](../Images/c1965062ecb12fb7f363cf5ef0bd0559.png)

但奇怪的是：

![在此处输入图像描述](../Images/2c111ec4dbf8fd70714c8b5057e8cb67.png)

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-07T12:52:38.627

您需要从终端 (cmd) 运行它，而不是 Node 的 repl。

尝试打开一个新终端（**Run -> CMD**）然后执行：

> 节点 /your_file_name.js

要查看您安装了哪个版本，只需执行：

> 节点-v

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-26T11:59:13.263

需要做两件事。首先，您需要添加一个环境变量。对我来说就像 path=C:\Program Files\nodejs 一样。其次..您必须打开命令提示符，然后将提示符重定向到您保存文件的位置..如果您将文件保存在 c:/practice 并且文件名是 server.js，那么您必须重定向命令提示符到该位置。

然后运行命令 node server.js 一切都会正常运行..

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-10-31T10:22:30.687

有几种方法：

1.  Windows 控制台内部（又名`CMD`）：

> 节点-v

2.  Node.js 控制台内部（又名`Node.js REPL`终端）：

> 进程版本

3.  更详细的信息（所有子模块的版本号）可以通过（inside of `Node.js REPL`）检索：

> 进程版本

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-07T12:52:39.847

你在控制台。您可能希望`node server.js`从 Windows 命令提示符 ( `cmd.exe`) 运行。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-05-09T13:17:58.613

您是否将`node`目录添加到PATH。

如果您安装最新的，安装程序会为您添加它

# java - 在 Netbeans 中创建 Web 服务客户端时出错

> ID：14196258
> 
> 赞同：1
> 
> 时间：2013-01-07T12:46:21.953
> 
> 标签：java, wcf, iis, netbeans, azure

我正在尝试从 Java Applet 使用部署在 Windows Azure 中的 WCF 服务。当我在 Netbeans 中创建新的 Web 服务客户端时，处理“http://10.61.132.143/?xsd=xsd0”时出现错误：

> Se ha devuelto una excepción de E/S al procesar "http://10.61.132.143/?xsd=xsd0"。异常：java.net.ConnectException：连接超时：连接。

我认为 10.61.132.143 IP 无法访问，因为它是Azure 负载均衡器生成的**私有 IP 。**

这是[WSDL 定义](http://dl.dropbox.com/u/639494/wsdl.xml)。

知道如何解决它吗？

# c# - 的正确名称是什么？操作员？

> ID：14196261
> 
> 赞同：3
> 
> 时间：2013-01-07T12:46:27.997
> 
> 标签：c#, operators

我在 MSDN 上看了看，但他们似乎没有按名称引用它。

运营商的正式名称是`??`什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-07T12:47:02.850

它被称为[空合并运算符](http://msdn.microsoft.com/en-us/library/ms173224.aspx)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-07T12:47:56.110

它被称为[空合并运算符](http://msdn.microsoft.com/en-US/library/ms173224%28v=vs.80%29.aspx)。

看看[C# ??](http://weblogs.asp.net/scottgu/archive/2007/09/20/the-new-c-null-coalescing-operator-and-using-it-with-linq.aspx) 来自 Scott Guthrie 的[空合并运算符。](http://weblogs.asp.net/scottgu/archive/2007/09/20/the-new-c-null-coalescing-operator-and-using-it-with-linq.aspx)

> C# 的微妙语言特性之一是**??** “空合并”运算符。这提供了一种很好、简洁的方法来检查一个值是否为空，如果是则返回一个替代值。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-07T12:47:05.880

该运算符`??`称为[**空合并运算符**](http://msdn.microsoft.com/en-us/library/ms173224.aspx)

# linux - 如何调用 MyChecksum 而不是 KernelChecksum （ KernelChecksum 汇编编码）

> ID：14196270
> 
> 赞同：2
> 
> 时间：2013-01-07T12:47:09.650
> 
> 标签：linux, kernel, arm, embedded-linux, neon

我在这里有这个典型的要求：

内核`/arch/arm/lib/csumpartial.S`中有一个文件，它有一个名为的函数`csumpartial()`，它计算 16 位校验和（显然是汇编编码的），这个函数用 EXPORT 符号导出。

我现在已经使用名为 NEON 优化的内部函数实现了相同的函数，该函数位于名为`csumpartial.c`

我有以下要求：

1.  现在我希望调用内核函数而不是程序集版本调用我的函数“csumpartial”版本。

    --为此，我应该用我的 csumpartial.C 文件替换 csumpartial.S 文件吗？但是那么如何更换（所有事情都需要照顾）？

2.  此 csumpartial.c 文件应使用特殊编译器标志进行编译以`-mfpu=neon -mfloat-abi=softfp -flax-vector-conversions -O3`进行 NEON 优化。

    -- 那么在哪里以及如何提及这个编译器标志呢？

简而言之，汇编版本应该完全弃用，c 版本应该在编译`-mfpu=neon -mfloat-abi=softfp -flax-vector-conversions -O3`内核时使用标志编译。当内核有人调用时，应该调用该函数的 c 版本`csumpartial`

早期的帮助将不胜感激。

少量输入：

1.  Linux 版本 2.6.37
2.  使用交叉编译器工具对 arm 进行交叉编译 (cgt_a8/arm-2009q1)
3.  ARM cortex-a8 编码

让我知道更多输入

注意：只有我会使用这个编辑过的内核，所以我理解这种替换所涉及的风险

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T20:22:04.470

如果您只想构建一次修改后的内核 -使用命令行中所需的编译标志将您的*csumpartial.c*编译为*csumpartial.o 。*之后编译你的整个内核。GNU make 不会将*.S*重新编译为具有更高时间戳的*.o文件。*

对于永久解决方案：删除 csumpartial.S，创建您的 csumpartial.c，将以下行添加到*/arch/arm/lib/Makefile*：

```
CFLAGS_csumpartial.o += -mfpu=neon -mfloat-abi=softfp -flax-vector-conversions -O3

# seems this line is not necessary
$(obj)/csumpartial.o: $(obj)/csumpartial.c 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T06:39:53.387

我已经通过 hack 解决了这个问题，以下是我为使其正常工作所做的事情：

想出了两种替代方法来做到这一点：

1.  替换为`csumpartial.S`under`csumpartial.c`并且`arch/arm/lib/`因为`csumpartial.c`包含 NEON 指令并且必须使用特殊的编译器标志进行编译，所以将此行添加到 Makefile：

    `CFLAGS_csumpartial.o += -mfpu=neon -mfloag-abi=softfp -mflax-vector-conversions -O3`

    （在某些情况下，由于编译器标志与 neon 标志冲突，在编译期间这不应该工作）

    我们可以通过使用 Makefile 中的函数过滤掉冲突的编译器标志，`filter-out`但是我们会遇到另一个问题，过滤掉的标志也不能用于其他文件（因为我们只想为 csumpartial 文件否定编译***器***标志，所以这将是一个问题）

    所以我想出了另一种方法（2）

2.  非常清楚，我做了以下步骤：

    一种。删除 csumpartial.S 从`arch/arm/lib`

    湾。`csumpartial.o`从此文件夹下的 Makefile 中删除该条目

    C。`neon`在下新建一个文件夹`arch/arm/lib`

    d。在此处添加`csumpartial.c`文件还创建一个 Makefile 并将其添加到 Makefile

    **拱/臂/lib/neon/Makefile**

    `KBUILD_CFLAGS += -mfpu=neon -mfloat-abi=softfp -flax-vector-conversions -O3`,

    要在编译期间否定冲突的编译器标志，请使用以下行：

    `KBUILD_FLAGS := $(filter-out -compiler-flags-to-negate, $(KBUILD_FLAGS))`

    `lib-y := csumpartial.o`

    e. 到最顶层的 Makefile 即`arch/arm/Makefile`添加这个`libs-y+=arch/arm/lib/ arch/arm/lib/neon/`

这对我有用。

# android - 在 .csv 文件中转义标点符号

> ID：14196273
> 
> 赞同：0
> 
> 时间：2013-01-07T12:47:14.747
> 
> 标签：android, csv

在我的 Logger 类中，它将所有错误、信息和调试消息写入 .csv 文件。我想记录一个包含标点符号的字符串。我有一个方法可以返回我当前的 android 版本，如下所示：

```
public String getAndroidVersion() {
        androidVersion = android.os.Build.VERSION.RELEASE;
        return androidVersion; 
} 
```

日志记录是这样编码的：

```
logToFile(String.format("%s;%s;%s;%s;%s\r\n", new Date().toString(), level,_processName, message, "\""+utils.getAndroidVersion()+"\"")); 
```

我希望最后一列包含 4.2.1 的 android 版本，但它以某种方式将其转换为如下数据：`04.02.2001`. 我知道方法的返回值`getAndroidVersion`是正确的。正如您在上面的示例中看到的那样，我试图转义该字符。

这里发生了什么，我是否使用了错误的转义字符？

谢谢！

编辑 。当我打开 .csv 文件时，`notepad++`它看起来像这样：

```
Date;Level;Process;Message;AndroidVersion
Mon Jan 07 13:37:51 CET 2013;INFO;Splash Screen;Application Started;"4.2.1"
Mon Jan 07 13:38:00 CET 2013;INFO;Bluetooth MessageHandler;Incomming file from VMw-1001500;"4.2.1"
Mon Jan 07 13:38:13 CET 2013;INFO;Bluetooth MessageHandler;File Received From VMw-1001500;"4.2.1"
Mon Jan 07 13:38:29 CET 2013;ERROR;BluetoothCommunicator;socket closed;"4.2.1"
Mon Jan 07 13:38:29 CET 2013;ERROR;BluetoothCommunicator;read failed, socket might closed, read ret: -1;"4.2.1" 
```

这看起来应该，但是 excel 格式我的 .csv 不知何故？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T13:27:13.713

这是 Excel 的一个“功能”，它会自动将看起来像日期的字符串解析为日期。您的 CSV 没有问题。

我不确定如何在 Excel 中关闭它，但这个问题可能会对您有所帮助：[Excel 更改日期格式](https://stackoverflow.com/questions/1906626/excel-changes-date-formats)。我猜当您导入 CSV 时，您可以“将日期列预格式化为文本”。YMMV。

# java - 重构泛型

> ID：14196284
> 
> 赞同：2
> 
> 时间：2013-01-07T12:48:01.107
> 
> 标签：java, generics, refactoring

坦率地说，我离成为泛型专家还很远，我必须重构一些代码。我有三个子类：**D**类、**R**类和**S**类。这些类中的每一个都扩展类**AbstractA**。**子类的目标非常相似，每个子类在方法m()**中都有相似的代码。所以我认为如果我可以从子类中提取方法 m() 并将其替换为上一层（到类 AbstractA 中），那也不错。

但是有一些区别：

**D 类适用于：**

```
Map<String, Map<BigInteger, BigInteger>> counts = new HashMap<String, Map<BigInteger,BigInteger>>();
Map<String, Map<BigDecimal, Set<BigInteger>>> sums = new HashMap<String, Map<BigDecimal, Set<BigInteger>>>(); 
```

**R类适用于：**

```
Map<String, Map<String, BigInteger>> counts = new HashMap<String, Map<String,BigInteger>>();
Map<String, Map<BigDecimal, Set<String>>> sums = new HashMap<String, Map<BigDecimal, Set<String>>>(); 
```

**S 类适用于：**

```
Map<String, Map<BigInteger, BigInteger>> counts = new HashMap<String, Map<BigInteger,BigInteger>>();
Map<String, Map<BigDecimal, BigInteger>> sums = new HashMap<String, Map<BigDecimal, BigInteger>>(); 
```

欢迎任何关于上述泛型的可能修改的提示，这可能会导致更“通用”的版本。（可以移动到类 AbstractA 并且仍然可以由三个子类使用。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T13:04:09.813

```
 class AbstractA<T,U> {
    Map<String, Map<T, BigInteger>> counts = new HashMap<String, Map<T,BigInteger>>();
    Map<String, Map<BigDecimal, U>> sums = new HashMap<String, Map<BigDecimal, U>>();
 }
 class AbstractB<T> extends AbstractA<T, Set<T>> {
 }
 class D extends AbstractB<BigInteger> {
 }
 class R extends AbstractB<String> {
 }
 class S extends AbstractA<BigInteger, BigInteger> {
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T13:08:56.797

您只需要两个通用参数：

```
public abstract class AbstractA<K, V> {
    private Map<String, Map<K, BigInteger>> counts = new HashMap<String, Map<K, BigInteger>>();
    private Map<String, Map<BigDecimal, V>> sums = new HashMap<String, Map<BigDecimal, V>>();

    public void m() {
    }
}

public class D extends AbstractA<BigInteger, Set<BigInteger>> {
}

public class R extends AbstractA<String, Set<String>> {
}

public class S extends AbstractA<BigInteger, BigInteger> {
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T12:55:31.073

您需要做的第一件事是在`String`和之间创建一些共性`BigInteger`。我的建议是创建一个`composed`属于这两种类型的新类：

```
public class Special  
{  
    private String string;  
    private BigInteger bigInt;  
    ...
} 
```

现在你可以改变你`Map`喜欢的参数：

```
Map<String, Map<Special, BigInteger> ... 
```

现在，您可以将调用保留在每个子类中，并将`m`函数标记`AbstractA`为`abstract`或者提供一个可以被覆盖的实现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T13:00:37.840

下面的实现呢？

```
public abstract class AbstractA<K1, V1, K2, V2> {

    protected Map<String, Map<K1, V1>> counts;
    protected Map<String, Map<K2, V2>> sums;

    public void m() {
        // your factorized code using counts and sums
    }

}

public class D extends AbstractA<BigInteger, BigInteger, BigDecimal, Set<BigInteger>> {

    public D() {
        counts = new HashMap<String, Map<BigInteger, BigInteger>>();
        sums = new HashMap<String, Map<BigDecimal, Set<BigInteger>>>();
    }

}

public class R extends AbstractA<String, BigInteger, BigDecimal, Set<String>> {

    public R() {
        counts = new HashMap<String, Map<String, BigInteger>>();
        sums = new HashMap<String, Map<BigDecimal, Set<String>>>();
    }

}

public class S extends AbstractA<BigInteger, BigInteger, BigDecimal, BigInteger> {

    public S() {
        counts = new HashMap<String, Map<BigInteger, BigInteger>>();
        sums = new HashMap<String, Map<BigDecimal, BigInteger>>();
    }

} 
```

# python - 检查信号是否在另一个信号给定的范围内

> ID：14196288
> 
> 赞同：2
> 
> 时间：2013-01-07T12:48:33.503
> 
> 标签：python, python-2.5

如何使用python检查信号是否低于参考信号的限制？每个信号都以二维列表的形式给出，例如下面的代码和图表。

```
#Signal = [[t0, t1, t2, ...], [y(t0), y(t1), y(t2), ...]]
CapturedSignal = [[1.0, 1.9, 2.0, 3.0, 3.1, 4.0], [0.0, 0.0, 1.0, 1.0, 0.0, 0.0]]
ReferenceSignal = [[0.5, 2.4, 2.5, 2.7, 2.8, 4.5], [1.2, 1.2, 0.4, 0.4, 1.2, 1.2]] 
```

[参考和捕获的信号 http://www.img-host.de/bild.php/35899,caprefsigWQJ8Z.png](http://www.img-host.de/bild.php/35899,caprefsigWQJ8Z.png "参考和捕获的信号")

我的问题是，两个信号的采样点不匹配。我可以在两点之间进行插值以获得可比较的值，但也许你知道准备好在 SciPy、NumPy 或其他东西中使用函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T13:13:19.243

您必须使用插值。它总是涉及一些不确定性（您永远不知道采样点之间的内容），但只要您的采样率足够高，您就会安全。

```
import numpy as np
import pylab as plt

from scipy.interpolate import interp1d

CapturedSignal = [[1.0, 1.9, 2.0, 3.0, 3.1, 4.0], [0.0, 0.0, 1.0, 1.0, 0.0, 0.0]]
ReferenceSignal = [[0.5, 2.4, 2.5, 2.7, 2.8, 4.5], [1.2, 1.2, 0.4, 0.4, 1.2, 1.2]]

representation_captured = interp1d(CapturedSignal[0], CapturedSignal[1], kind="linear")
representation_reference = interp1d(ReferenceSignal[0], ReferenceSignal[1], kind="linear")

min_x = max(min(CapturedSignal[0]), min(ReferenceSignal[0]))
max_x = min(max(CapturedSignal[0]), max(ReferenceSignal[0]))

xs = np.linspace(min_x, max_x, 100, False)

captured_interpolated = representation_captured(xs)
reference_interpolated = representation_reference(xs)

captured_signal_in_bounds = np.all(captured_interpolated<reference_interpolated)

plt.plot(xs, captured_interpolated, "r-", label="Captured")
plt.plot(CapturedSignal[0], CapturedSignal[1], "rD")
plt.plot(xs, reference_interpolated, "b-", label="Reference")
plt.plot(ReferenceSignal[0], ReferenceSignal[1], "bD")
plt.title("Signal below reference" if captured_signal_in_bounds else "Signal exceeds bounds")

plt.legend(loc='best')
plt.show() 
```

结果在这个图中：

![结果](../Images/22160b1758a70f2020303abe72a1c41a.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T13:30:36.180

无需为此使用 NumPy。您可以使用[零阶保持](http://en.wikipedia.org/wiki/Zero-order_hold)，这意味着您假设信号在样本之间是恒定的。这是一种足够简单的插值，只需几行代码即可。

```
CapturedSignal = [[1.0, 1.9, 2.0, 3.0, 3.1, 4.0], [0.0, 0.0, 1.0, 1.0, 0.0, 0.0]]
ReferenceSignal = [[0.5, 2.4, 2.5, 2.7, 2.8, 4.5], [1.2, 1.2, 0.4, 0.4, 1.2, 1.2]]

def refat(x):
    "Simple interpolation (Zero-order hold) of reference signal"
    for i, n in enumerate(ReferenceSignal[0]):
        if n > x:
            if i == 0: return None
            return ReferenceSignal[1][i-1]

def capat(x):
    "Simple interpolation of capture signal"
    for i, n in enumerate(CapturedSignal[0]):
        if n > x:
            if i == 0: return None
            return CapturedSignal[1][i-1]   

def aboveref():
    "Check whether there is a captured value above its interpolated reference value and vice versa"
    print ' X  Cap Ref'
    for i, x in enumerate(CapturedSignal[0]):
        cap = CapturedSignal[1][i]
        ref = refat(x)
        print x, cap, ref
        if cap > ref:
            print "Uh oh! At %.1f, the captured signal is above the reference signal!" % x
            return False
    print '---'
    for i, x in enumerate(ReferenceSignal[0]):
        ref = ReferenceSignal[1][i]
        cap = capat(x)
        print x, cap, ref
        if cap > ref:
            print "Uh oh! At %.1f, the captured signal is above the reference signal!" % x
            return False
    return True

aboveref() 
```

结果：

```
 X  Cap Ref
1.0 0.0 1.2
1.9 0.0 1.2
2.0 1.0 1.2
3.0 1.0 1.2
3.1 0.0 1.2
4.0 0.0 1.2
---
0.5 None 1.2
2.4 1.0 1.2
2.5 1.0 0.4
Uh oh! At 2.5, the captured signal is above the reference signal! 
```

# apache - 设置 Apache IP 白名单

> ID：14196290
> 
> 赞同：7
> 
> 时间：2013-01-07T12:48:55.827
> 
> 标签：apache, security, wamp

我目前正在为我们部门创建一些网络应用程序。该部门是更大的 Intranet 的一部分，当然为更多部门提供服务。

我在一台从未使用过的 PC 上设置了 WAMP 环境，并开发了一些简单的应用程序供该部门使用。

对于每个应用程序，我都创建了一个别名和一种“主页​​”，您可以在其中看到网络应用程序的“索引”。

现在我必须设置 apache 以拒绝访问除 IP 列表之外的各种 Web 应用程序。

我尝试使用[authz_host](http://httpd.apache.org/docs/2.2/mod/mod_authz_host.html)来完成此操作，但它不起作用。

从 Web 应用程序的别名复制粘贴。

```
Alias /national-alerts/ "c:/wamp/www/national-alerts/" 

<Directory "c:/wamp/www/national-alerts/">
    Options Indexes FollowSymLinks MultiViews
    AllowOverride all
       Order deny,allow
    Deny from all
    Allow from 10.176.164.53
    Allow from 10.176.162.144
    Allow from 10.176.162.219
    Allow from 10.176.160.202
    Allow from 10.176.165.143
    Allow from 10.176.162.209
    Allow from 10.176.166.46
    Allow from 10.176.162.119
    Allow from 10.176.160.232
    Allow from 10.176.162.53
    Allow from 10.176.164.33
    Allow from 10.176.161.185
    Allow from 10.176.162.111
</Directory> 
```

所有这些 IP 都来自 Intranet 的内部 IP。结果，任何访问都获得了“拒绝访问”，例如“允许”已被完全忽略。

有人可以帮我指出正确的示例/文档吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-11T10:53:22.827

您更改 IP 的 conf 对我有用。

如果 Intranet 的子网掩码不是 255.255.0.0 或更宽，那么请求可能不是由 10.176.164.53 直接发出，而是来自他的网关。

Web 服务器的 IP 地址是什么？

当您尝试访问该页面（例如从 10.176.164.53）时，请查看 apache 的访问日志并检查请求是否来自相同的 ip。

# java - 通过服务类访问 EJB

> ID：14196297
> 
> 赞同：1
> 
> 时间：2013-01-07T12:49:13.797
> 
> 标签：java, ejb, persistence

我需要访问 EJB 以在数据库上添加/删除对象，目前我的带注释的控制器（使用 spring）调用服务类，该服务类又调用外观来解决我的数据库请求。
我得到了这个例外：

警告：StandardWrapperValve [dispatcher]：PWC1406：servlet 调度程序的 Servlet.service() 在 br.com.CadmusWeb 的 br.com.CadmusWeb.service.ClienteService.novoCliente(ClienteService.java:21) 处抛出异常 java.lang.NullPointerException。 controller.LoginController.clienteNovo(LoginController.java:100) （标有 >> 异常指出的行）

我是使用 EJB 的新手

我的控制器：

```
@Controller
public class LoginController {

  private ClientService cliServ;

  public LoginController() {
    this.cliServ = new ClientService();
  }

@RequestMapping("clientMenu/clientNew.html")
public ModelAndView clientNew(HttpServletRequest request) {
    Client cli = new Client();
    cli.setName((String) request.getAttribute("clientName"));

    >>cliServ.newClient(cli);

    return new ModelAndView("clientMenuNew");
} 
```

服务等级

```
public class ClientService {

@EJB
  private ClientFacade clientFacade;

  public void novoClient(Client cli){
  >>clientFacade.create(cli);
  }

  public void deleteClient(Client cli){
    clientFacade.remove(cli);
  }
} 
```

客户端外观

```
@Stateless
public class ClientFacade extends AbstractFacade<Client> {
@PersistenceContext(unitName = "WebProjectPU")
private EntityManager em;

@Override
protected EntityManager getEntityManager() {
    return em;
}

public ClientFacade() {
    super(Client.class);
}

} 
```

# java - JADE 代理使用堆空间太快

> ID：14196298
> 
> 赞同：0
> 
> 时间：2013-01-07T12:49:24.517
> 
> 标签：java, netbeans, out-of-memory, heap-memory, agents-jade

我面临的问题是，当运行一组玉代理解决一个简单问题时，jvm 在运行的 90 秒内耗尽了堆空间，具体取决于运行的代理数量。代理的目标是在简化的微电网模型中平衡负载和发电，其中几个代理代表负载和另一代。

负载代理在其行为的每次迭代中使用新值更新生成器，如以下代码所示：

```
 public class House9 extends Agent
    {
      double load  = 50;
      boolean offline = false;
      boolean valid = true;
      int counter = 0;
      double cur = 50;
      int next;

      public void setup()
      {

          addBehaviour(new SimpleBehaviour(this)
          {
             public void action()
             {
                //Adjusting load value
                if(counter == 0)
                {
                  load = (int)load;
                  cur = load;
                  next = 20+(int)(Math.random()*80);
                  //System.out.println("current: " + cur + " next " + next);
                  counter++;
                }
                else if(counter <= 1000)
                {
                  load = load + ((next - cur)/1000);
                  //System.out.println("added " + ((next - cur)/1000) +" to load");
                  counter++;
                }               
                else
                {
                  counter = 0;
                }

                //System.out.println("counter " + counter);

                //Sending result to the generator agent
                ACLMessage msg = new ACLMessage(ACLMessage.INFORM);
                msg.setContent(Double.toString(load));
                msg.addReceiver(new AID("gen", AID.ISLOCALNAME));
                myAgent.send(msg);

           }
           public boolean done()
           {
              return offline;
           }
      });
} 
```

所有负载代理都与此相同，生成代理如下：

```
 public class Generator extends Agent
    {
       int output = 100; 
       long time = System.currentTimeMillis();
       int iter = 0;

       public void setup()
       {
           System.out.println("Iterations,Time");

           addBehaviour(new CyclicBehaviour(this)
           {

               public void action()
               {
                   //myAgent.setQueueSize(2);
                     int temp = output;
                     ACLMessage reply = receive();

                     if(reply != null)
                     {
                        int load = Integer.parseInt(reply.getContent());
                        //System.out.println("current state--- output: " + output + " load: " + load);
                        if(load > output)
                        {
                           iter = 0;
                           while(load > output)
                           {
                               output = output + 10;
                               iter++;
                           }
                           //System.out.println((System.currentTimeMillis()-time)+ "," + iter );
                        }
                        else if(load < output)
                        {
                            iter = 0;
                            while(load < output)
                            {
                                output = output - 10;
                                iter--;
                            }
                            //System.out.println((System.currentTimeMillis()-time)+ "," + iter );

                        }

                        System.out.println((System.currentTimeMillis()-time)+ "," + iter + "," + load + "," + temp + "," + myAgent.getCurQueueSize());

                  }
              }
         });
      }
 } 
```

从互联网上有关此类事情的其他帖子中，我尝试限制生成代理的消息队列大小以防消耗堆空间，并在每次生成器行为迭代结束时清除翡翠消息队列。但是这些似乎都没有任何区别，我尝试添加更多的堆空间，但这只会将内存不足异常延迟一分钟左右。调用jade引擎，并通过netbeans启动jade gui。

我是多代理编程和使用玉的新手，所以我可以理解运行这种系统可能有更好、更优化的方法，这本身就可以解释问题。但希望能在这件事上得到一些帮助。

谢谢，卡鲁姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:50:19.473

House9 代理内部的行为没有任何终止条件。每次安排行为时，每个代理都会发送一条消息。由于您已覆盖该`done`方法，因此它们将继续循环通过该行为发送消息。

你的意思是发这么多消息？消息之间应该有某种停顿吗？您的`Generator`代理将尝试处理所有这些消息，但无法跟上队列中的负载。

# sql-server - MS Access Appln 连接到 SQL Server2005 DSN-less

> ID：14196299
> 
> 赞同：0
> 
> 时间：2013-01-07T12:49:24.893
> 
> 标签：sql-server, vba, connection-string

我是一个新手，试图将 MS Access Appln（当前连接到外部 Access 数据库）连接到远程 SQL Server 2005。为了更容易分发给大量受众，希望使其无 DSN。

我可以使用以下连接字符串连接到本地 Access db

```
DbFullName = CurrentProject.Path & "\" & "project_DB.accdb"
"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" & DbFullName & ";Jet OLEDB:Database Password=pwd;" 
```

对于 SQL Server 2005 连接，当我尝试以下命令时，

```
"Data Source=myserverdev;Initial Catalog=project_DBSQL;Persist Security Info=True;User ID=msaccess_cbd;Password=Paci0113"
providerName = "System.Data.SqlClient" 
```

我得到了错误-

> 未找到数据源名称和未找到设备驱动程序

我试图通过 VB 通过 DSN-less 连接与 SQL 服务器连接，但我失败了。我尝试的代码是：-

```
Provider=Microsoft.Jet.OLEDB.4.0;Data Source=D:\IP address\databasename;User ID=username;Password=pwd; 
```

我得到的错误信息是：

> 预计行尾

请建议我一些方法来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T23:49:02.653

System.Data.SqlClient 看起来像一个 ADO* *.NET* * 提供程序。在 VBA 中编码时，您需要使用 ADO/OLEDB 提供程序。这是旧 OLEDB 提供程序的连接字符串：

```
"Provider=SQLOLEDB.1;Data Source=myserverdev;User ID=msaccess_cbd;Password=Paci0113;Initial Catalog=project_DBSQL" 
```

几点：
1) 既然你已经告诉了全世界，你最好更改密码。
2）您不需要为“Persist..”条款而烦恼。
3) SQLOLEDB 提供程序已经存在了一段时间。它与 MDAC 一起很好地分发，您可能会在许多客户端计算机上找到它，但它有一些限制：
- 它无法连接到较新版本的 SQL Server，尤其是在与其他版本的计算机并排运行的同一台机器上时SQL 服务器。您最终不得不将端口号添加到连接字符串中。
- 它不支持较新的服务器版本具有的较新的 SQL 语言功能。
4) 有较新的提供程序（2005 年为“Native Client”，2008 年为“Native Client 10”等），但您应该检查它们是否已分发到您的所有 PC。

这是一个带有 Native Client 连接字符串的页面（9 / 2005）： http:
[//www.connectionstrings.com/sql-server-2005#sql-server-native-client-9-0-oledb-provider](http://www.connectionstrings.com/sql-server-2005#sql-server-native-client-9-0-oledb-provider)

# android - 周视图和日视图的日历活动

> ID：14196301
> 
> 赞同：3
> 
> 时间：2013-01-07T12:49:30.363
> 
> 标签：android, calendar

我想创建一个包含 WeekView 和 DayView 功能的日历应用程序。

请给我一些建议。我搜索了很多示例项目，但没有一个有效：请提供任何示例项目。

我需要的屏幕是：

![日视](../Images/532f54ae2c1583138a1517d4377ff6b4.png)

![周视图](../Images/c532b17e0ed73fab63189cdecfa8f0d7.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-07T12:55:35.390

通过在您的 Eclipse 中签出来查看[此处](http://ancal.googlecode.com/svn/trunk/)的示例代码。它的开源。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-04-24T06:32:27.497

查看[这里](https://github.com/AnilMH/Android-WeekView-Demo)是 android 周视图的示例代码

# wpf - 组合依赖属性

> ID：14196302
> 
> 赞同：1
> 
> 时间：2013-01-07T12:49:34.797
> 
> 标签：wpf, mvvm-light, dependency-properties, caliburn.micro, reactiveui

我现在已经完成了几个 WPF 项目，并且看到了同样的问题，那就是聚合/组合依赖属性（dp）的“问题”。

例如，我有 10 个 bool 类型的 dp，我想将它们组合并作为单独的 dp 公开。组合的 dp 为真，除非它的一个或多个成分为假。

我目前使用 addValueChanged 来执行此操作，它为 10 个 (!() dp 中的每一个注册一个回调，但我想知道是否有更优雅的解决方案或者可能是解决这种常见情况的框架。我还没有使用 reactiveUI 和 mvvm light但我认为它在这里很有用。

```
 var dpd = DependencyPropertyDescriptor.FromProperty(property,
                                                            owner.GetType());
        dpd.AddValueChanged(owner,
                            handler); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T05:23:49.910

在 ReactiveUI 中，这是：

```
// etc all the way to ten
this.WhenAny(x => x.PropOne, x => PropTwo, x => x.PropThree, 
    (one,two,three) => one && two && three)
    .Subscribe(x => FinalProp = x); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T13:18:20.320

DependencyProperties 基于常规属性工作。

每次设置根常规 bool 属性之一时，您也可以为“组合”bool 属性提高 OnPropertyChanged。

组合 bool 属性的 getter 应评估根 bool 属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T13:25:15.620

不确定它是否更优雅，但对于每个单独的 dep prop (1...10)，你都有一个 setter。

在每个`Set`您可以调用的内部（使用 Caliburn Micro 语法）

```
OnPropertyChanged(() => depPropN);      // where N = 1 ..... 10
OnPropertyChanged(() => combinedDepProp); 
```

# grails - Grails 在 Flash 消息中显示已删除消息的数量

> ID：14196304
> 
> 赞同：-1
> 
> 时间：2013-01-07T12:49:40.310
> 
> 标签：grails

> **可能重复：**
> [Grails 编辑 Flash 删除消息](https://stackoverflow.com/questions/14192692/grails-editing-flash-delete-message)

嗨，
我是 Grails 的新手，我已经实现了删除收件箱中的消息的删除操作，但现在我想更改 flash 消息以显示**2 条消息已删除**而不是**4 号消息已删除，**如果删除多条消息，则 5 号消息已删除。请协助，以下是我的删除操作

```
def delete() {

    def messageInstance = Message.get(params.id)

    // render error if no message found
    if (!messageInstance) {
        flash.message = message(code: 'default.not.found.message', args: [message(code: 'message.label', default: 'Message'), params.id])
        redirect(action: "phone")
    } else {
        // get the device that we are deleting from
        //specify phoneNumber so as to delete the device by phoneNumber
        def device = MessagingDevice.findByPhoneNumber(params.phoneNumber)

        // invoke deleteFromDevice on domain object, which returns true if successful
        if (messageInstance.deleteFromDevice(device)) {
            flash.message = message(code: 'default.deleted.message', args: [message(code: 'message.label', default: 'Message'), params.id])
            redirect(action: "phone", params:[phoneNumber:params.phoneNumber])
        }
    }
} 
```

# c# - 在 MVC 中的 HTTPPost 期间无法检索模型值？

> ID：14196308
> 
> 赞同：0
> 
> 时间：2013-01-07T12:49:45.513
> 
> 标签：c#, asp.net-mvc-4

在这里，我使用 XML 加载我的下拉值。在 HTTPPost 期间，从 XML 加载这些下拉值后，所有其他模型值都变为空，我的模型只有这些下拉值。

```
 [HttpPost]
            public ActionResult Analyze(AnalyzeModels model)
            {
              if (ModelState.IsValid)
            {
                model.RequestID = ObjCommon.GenerateRequsetID(ObjSharedEntities.UserID, "ATA_1");                       // Generation of the Request ID
            }
               model.ChartName = ObjCommon.GetFusionSWFReportName("ASTrend", "ATA_1"); 
               var ppgFile = Server.MapPath(DataTemplate.PPGXmlPath);
               var ppgItems =
                    from brand in XDocument.Load(ppgFile).Descendants("PPGItem")
                    select new SelectListItem
                    {
                        Value = brand.Element("Value").Value,
                        Text = brand.Element("Text").Value
                    };
               model = new AnalyzeModels
                {
                    PPGItems = ppgItems
                };

                return View(model);
           } 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T12:56:31.237

在您的代码中：

```
 model = new AnalyzeModels
        {
            PPGItems = ppgItems
        }; 
```

您正在创建模型的新实例，这将有效地清除您设置的值。

考虑改为这样做：

```
model.PPGItems = ppgItems 
```

# javascript - 用另一个文本替换选定的文本

> ID：14196312
> 
> 赞同：0
> 
> 时间：2013-01-07T12:49:57.683
> 
> 标签：javascript, jquery, html

我正在尝试用另一个文本替换选定的文本。
考虑以下是文本行。

> 你好世界。早上好。你好世界。早上好。

在这里，如果我选择第二个`morning`文本并且我想用晚上替换早上的文本。所以输出需要看起来像这样：

> 你好世界。早上好。你好世界。晚安。

我尝试了替换功能，但它正在替换第一天早上的文字。
任何人都可以为此提出解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T12:59:09.540

要获取 HTML5 中的当前选择，请使用[DOM Range API](http://dom.spec.whatwg.org/#ranges)。

要编辑选择，可以使用[选择 API 。](http://dvcs.w3.org/hg/editing/raw-file/tip/editing.html#selections)

另请参阅：[文本选择 API 去了哪里？](https://stackoverflow.com/questions/7471515/where-did-the-text-selection-api-go)

如果您使用 jQuery，则使用[wrapSelection 插件](http://plugins.jquery.com/project/wrapSelection)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T13:18:47.903

你可以这样做：

[看演示](http://jsfiddle.net/v2MV4/1/)

```
function swapSelection(swapText) {
  var sel = window.getSelection ? window.getSelection() : document.selection.createRange();
  if (sel != "") {
    if (sel.getRangeAt) {
      var range = sel.getRangeAt(0);
      var newNode = document.createElement("span");
      newNode.setAttribute('class', 'swapclass');
      range.surroundContents(newNode);
    } else {
      sel.pasteHTML('<span class="swapclass">' + sel.htmlText + '</span>');

    }
    $('.swapclass').replaceWith(swapText);
  }
}

$('button').click(function () {
  swapSelection('night');
}); 
```

# sorting - 获取值太少的前 n 个值

> ID：14196314
> 
> 赞同：0
> 
> 时间：2013-01-07T12:50:02.583
> 
> 标签：sorting, error-handling, excel-2010

假设我有 10 个单元格的范围，从 A1 到 J1，其中将包含数字，并且我想获得最大 3 的平均值。我可以这样做：

```
=AVERAGE(LARGE(A1:J1,{1,2,3})) 
```

唯一的问题是如果值小于 3。在这种情况下，我得到一个数字错误。

我想处理这个问题，以便如果我的范围内的非空白单元格少于 3 个（可以用 进行检查`ISBLANK`），例如只有 2 个，它应该只平均这 2 个或多个。

可以轻松做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T19:12:36.933

试试这个 - 它很简单，但很有效

```
=IF(COUNT(A1:J1) >= 3,AVERAGE(LARGE(A1:J1,{1,2,3})),  
                      IF(COUNT(A1:J1)>=2,AVERAGE(LARGE(A1:J1,{1,2})),  
                                         IF(COUNT(A1:J1) = 1, MAX(A1:J1),"Too few numbers"))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T14:43:23.553

你可以像这样使用 IFERROR

`=IFERROR(AVERAGE(LARGE(A1:J1,{1,2,3})),AVERAGE(A1:J1))`

如果少于 3 个，这将平均所有值（1 或 2）

如果您想满足 A1:J1 完全无人居住的情况，您可以添加另一个 IFERROR，即

`=IFERROR(IFERROR(AVERAGE(LARGE(A1:J1,{1,2,3})),AVERAGE(A1:J1)),0)`

这将返回零（而不是#DIV/0！）

# sql - 从存储过程返回输出的问题

> ID：14196316
> 
> 赞同：0
> 
> 时间：2013-01-07T12:50:17.093
> 
> 标签：sql, sql-server, stored-procedures

以下是我的存储过程

```
ALTER PROCEDURE [aaa].[sp_getabc] (                
      @fromdate smalldatetime,                
@todate smalldatetime)                

AS                
BEGIN                
SET NOCOUNT ON;                

declare @tmp1 as int  
declare @tmp2 as int  
declare @sum as int  
declare @tmp3 as int  
select @tmp1 = (select count(*) as decdbo from abc where AppID IN (108,104,113,110,218,171) and Status IN ('T','L') and calldate between  @fromdate and  @todate)  
select @tmp2 = (select count(*) as decauto from abc where AppID IN (278,283) and Status IN ('T','L') and calldate between  @fromdate and  @todate)  

select @sum = @tmp1 + @tmp2  

select @tmp3 = (select SUM(Duration)/60 as DecemberLastWeek from abc where dnis = '6503533019' and calldate between  @fromdate and  @todate)  

select @tmp3 as Duration , @sum as Transcriptions , @sum/@tmp3 as TransPerMin   

END 
```

当我不作为存储过程执行语句时，我得到正确的值，而当我运行存储过程时，@tmp3 和 @sum/@tmp3 中没有任何 NULL，而 @sum 也有错误的值。问题出在哪里。谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T12:54:30.077

检查您的`@fromdate`和`@todate`变量，两种情况它们必须不同（即格式）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T08:43:24.523

解决的问题是我的存储过程在 autoivr 中，但我想访问的表在 dbo 中，我没有用表名写 dbo。

# google-chrome - google 使用什么算法让 Chrome 浏览器的地址栏成为许多网站的默认搜索栏？

> ID：14196317
> 
> 赞同：15
> 
> 时间：2013-01-07T12:50:17.157
> 
> 标签：google-chrome, google-search, searchbar, address-bar

我想知道谷歌使用什么算法使 chrome 浏览器的地址栏充当许多网站（如 SO、Quroa 等）的默认搜索栏，但不适用于 facebook、metastackoverflow 等。

例如，如果你想在 stackoverflow 中搜索一个主题，你可以在 chorme 中这样做。

![在此处输入图像描述](../Images/f66bcb27929c2864485f78b718ef2edb.png)

而且搜索结果会直接带你到stackoverflow页面。IE

![在此处输入图像描述](../Images/9c350b6980ae656dd5116e1fa8bb55dd.png)

如果您`quora.com`也选择在 chrome 的地址栏中进行搜索，也会发生同样的情况。但是，如果您`facebook.com`在地址栏和许多其他具有搜索栏的网站中进行搜索，则不会发生这种情况。

这是怎么回事？谷歌使用什么算法来实现这一点？

希望我清楚我的问题？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-24T07:36:41.900

此功能由所谓的 OpenSearch 提供支持。它允许您指定在搜索网站时应该如何形成查询。您可以在此处阅读文档：[http ://www.opensearch.org/Home](http://www.opensearch.org/Home)

例如，StackOverflow 在其 HTML 源代码中有以下内容：

```
<link rel="search" type="application/opensearchdescription+xml" title="Stack Overflow" href="/opensearch.xml"> 
```

如果您随后打开文件 /opensearch.xml，您可以看到以下内容：

```
<?xml version="1.0" encoding="UTF-8" ?>
<OpenSearchDescription xmlns="http://a9.com/-/spec/opensearch/1.1/" xmlns:moz="http://www.mozilla.org/2006/browser/search/">
  <ShortName>Stack Overflow</ShortName>
  <Description>Search Stack Overflow: Q&amp;A for professional and enthusiast programmers</Description>
  <InputEncoding>UTF-8</InputEncoding>
  <Image width="16" height="16" type="image/x-icon">http://sstatic.net/stackoverflow/img/favicon.ico</Image>
  <Url type="text/html" method="get" template="http://stackoverflow.com/search?q={searchTerms}"></Url>
</OpenSearchDescription> 
```

最重要的部分是第 7 行中指定搜索词字符串的行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T15:52:02.530

Chrome 使用搜索引擎机制。此处描述了如何使用它 [http://support.google.com/chrome/bin/answer.py?hl=en&answer=95653&topic=14676&ctx=topic](http://support.google.com/chrome/bin/answer.py?hl=en&answer=95653&topic=14676&ctx=topic)

Chrome 会自动识别搜索框并将相应的规则添加到搜索引擎列表中。也许它的引擎依赖于文档解析。因此，可能会添加或不添加特定站点，因为它的搜索框标记。 [https://superuser.com/questions/276069/google-chrome-automatically-adding-websites-to-my-list-of-search-engines](https://superuser.com/questions/276069/google-chrome-automatically-adding-websites-to-my-list-of-search-engines)

如果您想了解解析算法，我看到的唯一方法是挖掘 chrome 源

此外，您可以手动编辑搜索引擎列表。

PS：而且不仅仅是chrome的功能，其他浏览器也有类似的东西。以 Opera 为例[http://tech.gaeatimes.com/index.php/archive/how-to-easily-use-manage-your-search-engines-in-opera-browser/](http://tech.gaeatimes.com/index.php/archive/how-to-easily-use-manage-your-search-engines-in-opera-browser/)

# gmail-imap - 我想配置 interspire 电子邮件营销人员退回设置

> ID：14196322
> 
> 赞同：-1
> 
> 时间：2013-01-07T12:50:27.757
> 
> 标签：gmail-imap, email-bounces

我正在使用我的 gmail 帐户进行电子邮件营销。现在我一直在为 IEM 配置反弹设置。

任何人都可以帮助指出gmail的正确设置。

![在此处输入图像描述](../Images/a7f55ea644c0f183179261945db64721.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-28T22:44:04.433

退回地址：YourAddress@Gmail.com
* 应用用户使用@yourdomain.com

弹跳服务器：pop.gmail.com:995

退回用户名：YourAddress@Gmail.com
* 应用用户使用@yourdomain.com

类型：POP3

取消选中自动检测

检查不验证证书

检查其他人并输入“/ ssl”而不带引号

测试/保存设置并完成

# laravel - Laravel 模型的静态 where 函数在哪里？！Laravel 是如何做到这一点的？

> ID：14196329
> 
> 赞同：0
> 
> 时间：2013-01-07T12:50:44.507
> 
> 标签：laravel

我有一个 Eloquent 模型，我想为特定模型创建一些快捷功能，比如可能`User::tall()`代替编写`User::where("height", ">", 185)`. 但我希望它们既是静态方法又是非静态方法，这样我也可以调用`$user->where('is_active', '=', '1')->tall()`.

有没有办法我可以做到这一点？我可以看到 Laravel 以某种方式设法做到了这一点，因为可以从两个上下文中调用 where 。我查看了代码，但我只能找到一个对象方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-04-07T11:40:46.517

我认为查询范围是您正在寻找的：http: [//laravel.com/docs/eloquent#query-scopes](http://laravel.com/docs/eloquent#query-scopes)

```
public function scopeTall($query)
{
    return $query->where('height', '>', 185);
} 
```

您还可以为查询范围指定参数，例如：

```
public function scopeTall($query, $height = 185)
{
    return $query->where('height', '>', $height);
} 
```

范围查询是可链接的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-14T22:00:30.077

只需在您的用户类上编写一个新的静态方法

```
class User extends Eloquent {
    public static function tall() {
        return User::where("height", ">", 185);
    }
} 
```

然后在别处访问

```
$users = User::tall()->get(); 
```

如果您确保不将该`->get()`调用包含在您的方法中，而是在您调用该方法时包含它（如上所述），那么由于返回查询构建器，您应该能够在调用之前向其添加其他 where 语句`get()`

```
$users = User::tall()->where("is_active", "=", 1)->get(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T21:45:56.670

你试过这样的东西吗？

```
class YourClassModel extends Eloquent
{
     public static function tall() 
     {
         // Return the result of your query
         return ...;
     }
} 
```

# java - 使用 pem writer 存储 x 509 证书时出现异常？

> ID：14196331
> 
> 赞同：3
> 
> 时间：2013-01-07T12:50:57.137
> 
> 标签：java, cryptography, x509certificate, pem

我正在尝试使用从 Internet 获得的以下代码生成自签名证书

```
 import java.io.IOException;
import java.io.PrintWriter;
import java.io.StringWriter;
import java.math.BigInteger;
import java.security.InvalidKeyException;
import java.security.KeyPair;
import java.security.KeyPairGenerator;
import java.security.NoSuchAlgorithmException;
import java.security.NoSuchProviderException;
import java.security.SecureRandom;
import java.security.Security;
import java.security.SignatureException;
import java.security.cert.CertificateEncodingException;
import java.security.cert.X509Certificate;
import java.util.Date;

import javax.security.auth.x500.X500Principal;

import org.bouncycastle.jce.provider.BouncyCastleProvider;
import org.bouncycastle.openssl.PEMWriter;
import org.bouncycastle.util.io.pem.PemObject;
import org.bouncycastle.x509.X509V1CertificateGenerator;
//import org.bouncycastle.x509.X509V1CertificateGenerator;

import com.google.common.base.Strings;

/**
 * Demo of a generation of a X509 Self Signed Certificate using <a
 * href="http://www.bouncycastle.org/">Bouncy Castle</a> library.
 *
 * @author <a href="mailto:cyrille@cyrilleleclerc.com">Cyrille Le Clerc</a>
 */
public class SelfSignedX509CertificateGeneratorDemo {

    static {
        // adds the Bouncy castle provider to java security
        Security.addProvider(new BouncyCastleProvider());
    }

    /**
     * <p>
     * Generate a self signed X509 certificate .
     * </p>
     * <p>
     * TODO : do the same with
     * {@link org.bouncycastle.cert.X509v1CertificateBuilder} instead of the
     * deprecated {@link org.bouncycastle.x509.X509V1CertificateGenerator}.
     * </p>
     */
    @SuppressWarnings("deprecation")
    static void generateSelfSignedX509Certificate() throws NoSuchAlgorithmException, NoSuchProviderException, CertificateEncodingException,
            SignatureException, InvalidKeyException, IOException {

        // yesterday
        Date validityBeginDate = new Date(System.currentTimeMillis() - 24 * 60 * 60 * 1000);
        // in 2 years
        Date validityEndDate = new Date(System.currentTimeMillis() + 2 * 365 * 24 * 60 * 60 * 1000);

        // GENERATE THE PUBLIC/PRIVATE RSA KEY PAIR
        KeyPairGenerator keyPairGenerator = KeyPairGenerator.getInstance("RSA", "BC");
        keyPairGenerator.initialize(1024, new SecureRandom());

        KeyPair keyPair = keyPairGenerator.generateKeyPair();

        // GENERATE THE X509 CERTIFICATE
        X509V1CertificateGenerator certGen = new X509V1CertificateGenerator();
        X500Principal dnName = new X500Principal("CN=John Doe");

        certGen.setSerialNumber(BigInteger.valueOf(System.currentTimeMillis()));
        certGen.setSubjectDN(dnName);
        certGen.setIssuerDN(dnName); // use the same
        certGen.setNotBefore(validityBeginDate);
        certGen.setNotAfter(validityEndDate);
        certGen.setPublicKey(keyPair.getPublic());
        certGen.setSignatureAlgorithm("SHA256WithRSAEncryption");

        X509Certificate cert = certGen.generate(keyPair.getPrivate(), "BC");

        // DUMP CERTIFICATE AND KEY PAIR
        System.out.println(Strings.repeat("=", 80));
        System.out.println("CERTIFICATE TO_STRING");
        System.out.println(Strings.repeat("=", 80));
        System.out.println();
        System.out.println(cert);
        System.out.println();

        System.out.println(Strings.repeat("=", 80));
        System.out.println("CERTIFICATE PEM (to store in a cert-johndoe.pem file)");
        System.out.println(Strings.repeat("=", 80));
        System.out.println();

        PEMWriter pemWriter1 = new PEMWriter(new PrintWriter(System.out));
        pemWriter1.writeObject(cert);
        pemWriter1.flush();
        System.out.println();

        System.out.println(Strings.repeat("=", 80));
        System.out.println("PRIVATE KEY PEM (to store in a priv-johndoe.pem file)");
        System.out.println(Strings.repeat("=", 80));
        System.out.println();
        pemWriter1.writeObject(keyPair.getPrivate());
        pemWriter1.flush();
        System.out.println();
    }

    public static void main(String[] args) {
        try {
            generateSelfSignedX509Certificate();
        } catch (Exception e) {
            e.printStackTrace();
        }

    }
} 
```

但是在像这样将证书写入pem文件时会引发异常。

```
Exception in thread "main" java.lang.VerifyError: (class: org/bouncycastle/openssl/PEMWriter, method: writeObject signature: (Ljava/lang/Object;Ljava/lang/String;[CLjava/security/SecureRandom;)V) Incompatible argument to function
    at cryptool.SelfSignedX509CertificateGeneratorDemo.generateSelfSignedX509Certificate(SelfSignedX509CertificateGeneratorDemo.java:106)
    at cryptool.SelfSignedX509CertificateGeneratorDemo.main(SelfSignedX509CertificateGeneratorDemo.java:151) 
```

追踪时指向

```
pemWriter = new PEMWriter(new PrintWriter(System.out)); 
```

在代码中。我知道问题在于使用 pem writer 编写证书（如果我错了，请纠正我）。我提到并尝试使用将[x509 证书写入 Java 中的 PEM 格式字符串中的代码？](https://stackoverflow.com/questions/3313020/write-x509-certificate-into-pem-formatted-string-in-java)但没有成功。任何帮助表示赞赏。

# eclipse-rcp - 从快捷方式运行时未创建文件夹

> ID：14196332
> 
> 赞同：2
> 
> 时间：2013-01-07T12:50:57.860
> 
> 标签：eclipse-rcp, installation, nsis

目前我正在为 Windows 平台（XP 及更高版本）测试我的 Eclipse RCP 应用程序。

我在运行时生成 HTML 页面。为了保存这些 HTML 页面，我还在运行时创建了一个文件夹。

该文件夹是在 exe 文件所在的同一级别创建的。下面是应用程序目录结构的外观：

```
MyApplication
    |
    |--MyApplication.exe
    |--Myapplication.ini
    |--artifacts.xml
    |--uninstall.exe
    |--configuration
    |--p2
    |--plugins
    |--workspace
    |--cache    (user defined folder)
         |
         |--system  (this is the runtime created folder, generated HTML pages are saved here)
           |
           |--- 
```

这是在运行时创建文件夹的代码：

```
String currentPath=System.getProperty("user.dir");
File folder = new File(currentPath+"/cache/system"); 
```

这一切都很好。现在使用 NSIS 脚本，我在两个位置为“.exe”创建了快捷方式——一个在用户桌面上，另一个在 StartMenu 中。

**问题是，如果我从快捷方式运行应用程序，则不会创建该文件夹。** 应该怎么做才能解决这个问题？

创建快照的脚本是：

```
CreateShortcut "$SMPROGRAMS\$StartMenuGroup\MyApplication.lnk" "$INSTDIR\MyApplication.exe"
CreateShortcut "$DESKTOP\MyApplication.lnk" "$INSTDIR\MyApplication.exe" 
```

非常感谢任何评论/建议/解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T13:31:04.937

*   您应该检查您用于`File`构造函数的路径在运行时是否正常，使用简单`println()`或其他方式。

*   你真的叫文件夹创建吗？在这里，您只显示路径是什么。要创建文件夹，请不要忘记调用`mkdir()`（或`mkdirs()`完整路径）。

*   在 NSIS 方面：快捷方式的“工作目录”可能是错误的。`$OUTDIR`当 NSIS 处理`CreateShortcut`指令时，工作目录是从当前设置的。

    为确保设置快捷方式的工作目录字段，您可以使用`SetOutPath`强制目录。要使用安装应用程序的目录，只需使用`$INSTDIR`

    ```
    SetOutPath $INSTDIR 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T10:15:52.110

我可以看到的一个问题是：如果您的安装位置在 C:\Program Files.. 中，那么您可能必须以管理员身份启动 Eclipse。

# matlab - 为什么在传入正确的参数时会出现“输入参数过多”错误？

> ID：14196336
> 
> 赞同：2
> 
> 时间：2013-01-07T12:51:08.937
> 
> 标签：matlab, oop, matlab-class

为什么我会收到错误消息：

> ？？？使用 ==> ensureCellType 时出错 输入参数过多。
> 
> ==>usage_dynamicVariableNaming 中的错误 11 结果 = dataHolder.ensureCellType(str);

当我传入正确数量的参数时？

```
% USAGE:

clear all;
clc;

elementNames = {'area_12345[<>]6789', 'apollo123', 'guruX', 'ok'};
elementTypes = {'string', 'specialChar', 'int', 'float'};
elementValues = {'charlie', 'vvv', '09', '123.321'};

dataHolder = dynamicVariableNaming;

str = 'test';
result = dataHolder.ensureCellType(str);

%% CLASS
classdef dynamicVariableNaming
%HELLO Summary of this class goes here
%   - 

   properties           
           variableNames = [];           

           variableValues = [];
           variableTypes = [];
   end

   methods (Access = public) % (Access = private)
           function obj = dynamicVariableNaming (variableName, variableValue, variableType)
           % class constructor
               if(nargin > 0)
                 obj.variableNames = variableName;                 

                 obj.variableValues = variableValue;
                 obj.variableTypes = variableType;
               end
           end  
%    end
%            
%    methods (Static = true)
           function addVariables (obj, variableName, variableValue, variableType)
                 obj.variableNames = [obj.variableNames ensureCellType(variableName)];                 

                 obj.variableValues = [obj.variableValues ensureCellType(variableValue)];
                 obj.variableTypes = [obj.variableTypes ensureCellType(variableType)];
           end               

           function cellData = ensureCellType(value)       
            if (class(value) ~= 'cell') 
                cellData = cell2string(value);
            else
                cellData = value;
            end
           end            

   end   
end 
```

* * *

感谢您的大力帮助。它现在运行，但没有插入数据。

我在这个新问题上开了一个新线程： [数据没有成功插入到对象中](https://stackoverflow.com/questions/14212625/the-data-is-not-inserted-successfully-into-object)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T13:03:15.143

除非你打算`ensureCellType`成为一个静态方法（在这种情况下你应该用 声明它`(Static=true)`，你应该给它签名`cellData = ensureCellType(obj,value)`。`obj`在方法中给你一个对对象本身的引用。

您收到了您看到的错误，因为 MATLAB 将对象本身和您的方法都传递给`value`了您的方法，这是两个输入参数，而不是一个。

如果您永远不需要`obj`在方法中引用，则可以将方法签名声明为`cellData = ensureCellType(~, value)`. 然后 MATLAB 将知道它应该有两个输入，但它可以忽略第一个的传递。

# php - PHP Crypt() 比较两个加密字符串

> ID：14196338
> 
> 赞同：2
> 
> 时间：2013-01-07T12:51:13.297
> 
> 标签：php, crypt

是否可以比较两个[`crypt`^(*Docs*)](http://php.net/crypt) -ed 字符串并查看它们是否匹配？

用户登录后，会创建一个会话来存储用户的 ID 及其对应的`crypt`-ed 密码哈希。在后台运行检查以查看会话（读取，密码）是否仍然有效。

所以从技术上讲，我想将`crypt`数据库中的 -ed 密码与会话中的加密密码进行比较。这可能吗？

编辑：

应该说我正在使用以下方法来加密密码；

```
 function better_crypt($input, $rounds = 7)
  {
    $salt = "";
    $salt_chars = array_merge(range('A','Z'), range('a','z'), range(0,9));
    for($i=0; $i < 22; $i++) {
      $salt .= $salt_chars[array_rand($salt_chars)];
    }
    return crypt($input, sprintf('$2a$%02d$', $rounds) . $salt);
  } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T12:54:08.653

只需检查[.php 上的 PHP 手册`crypt`](http://php.net/manual/en/function.crypt.php#example-4636)。该示例清楚地说明了如何验证密码（如何比较）。

```
<?php
$hashed_password = crypt('mypassword'); // let the salt be automatically generated

/* You should pass the entire results of crypt() as the salt for comparing a
   password, to avoid problems when different hashing algorithms are used. (As
   it says above, standard DES-based password hashing uses a 2-character salt,
   but MD5-based hashing uses 12.) */
if (crypt($user_input, $hashed_password) == $hashed_password) {
   echo "Password verified!";
}
?> 
```

您（当然）可以直接比较两个散列密码（因为它们都是字符串），但不能保证它们相等。

请注意`crypt`可能不是“非常”安全。[*在Secure hash and salt for PHP 密码*](https://stackoverflow.com/questions/401656/secure-hash-and-salt-for-php-passwords)中阅读更多内容，并查看有关密码哈希的 PHP 手册条目：http: [//php.net/faq.passwords](http://php.net/faq.passwords) - 这应该可以帮助您入门。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T12:52:48.603

可以比较散列密码是否相等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T12:56:36.743

您只需将两个字符串相互比较即可。如果（$_SESSION['hash'] == $databasehash）。

为什么要比较两个密码？我建议您在数据库中创建一个会话表，并检查用户是否仍然登录。还将其绑定到 IP，或者让用户可以选择这样做。它增加了更多的安全性。

此外，如果用户在 $_SESSION 过期后返回，您可以存储一个 cookie。将 cookie 与存储的 IP 和哈希值进行比较，如果它仍然可以吃的话。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T12:59:38.497

> 是否可以比较两个加密字符串并查看它们是否匹配？[用于密码匹配]

是的。这不仅是可能的，而且是推荐的最佳实践。您应该只将哈希版本的密码存储在数据库中，而不是实际密码，因此您应该只使用哈希版本进行比较。如果你这样做，你显然*必须*比较哈希值，因为无论如何你都无法回到原来的状态。

但请确保您使用安全的散列程序，例如 bcrypt。不要将 md5 用于散列或 sha1 或类似的东西。

还建议使用经过良好测试的库来管理您的密码，而不是自己编写。我建议这个：[https](https://github.com/ircmaxell/password_compat) ://github.com/ircmaxell/password_compat—— 它是由负责安全性的核心 PHP 开发人员之一编写的，这个库提供的相同功能将作为 PHP 本身的一部分内置为下一个 PHP 版本 (v5.5) 将在一两个月内发布，因此它对未来也是安全的。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-07T12:56:48.553

是的，这就是散列密码的目的。

一个重要的警告是散列函数不是真正的双射映射，它们具有一定程度的冲突 - 只是为了指出散列！=加密。

# mysql - 将实体添加到学说 ArrayCollection 时添加外键引用

> ID：14196340
> 
> 赞同：0
> 
> 时间：2013-01-07T12:51:21.150
> 
> 标签：mysql, zend-framework, doctrine, doctrine-orm

将实体添加到父实体的 Doctrine ArrayCollection 时，我收到以下错误。

```
Integrity constraint violation: 1048 Column 'job_fk' cannot be null 
```

这是父条目

```
use Doctrine\ORM\Mapping as ORM;
use Doctrine\Common\Collections\ArrayCollection;
use Doctrine\Common\Persistence\PersistentObject;

class Job extends \Doctrine\Common\Persistence\PersistentObject
{

    /**
     * @var integer $pk
     * @ORM\Column(name="pk", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="IDENTITY")
     */
     protected $pk;

    /**
     * @ORM\OneToMany(targetEntity="Ajfit\Entity\JobRequirement", mappedBy="jobFk", fetch="LAZY", cascade={"persist"})
     */
    protected $requirements;

    public function __construct(){
         $this->requirements = new ArrayCollection();
    }
} 
```

这是子实体

```
use Doctrine\ORM\Mapping as ORM;
use Doctrine\Common\Persistence\PersistentObject;

class JobRequirement extends \Doctrine\Common\Persistence\PersistentObject
{

    /**
     * @var integer $pk
     * @ORM\Column(name="pk", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="IDENTITY")
     */
     protected $pk;

    /**
     * @ORM\Column(name="job_fk", type="integer")
     * @ORM\ManyToOne(targetEntity="Ajfit\Entity\Job", inversedBy="requirements" )
     * @ORM\JoinColumn(name="job_fk", referencedColumnName="pk")
     */
     protected $jobFk;

} 
```

这是调用代码

```
$job = new Ajfit\Entity\Job();

foreach ($addedRequirements as $requirementText)
{
    $requirement = new \Ajfit\Entity\JobRequirement();
    $job->getRequirements()->add($requirement);
} 
```

子实体添加得很好，但 jobFk 根本没有设置。我在加入时有 cascade={"persist"} ，当我添加所有孩子时，我坚持所有，我的问题是，在我添加孩子之前我需要坚持父母吗？还是我错过了什么？

感谢您的时间。

安德鲁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T11:37:38.983

尝试删除 JobRequirement 中的行 @ORM\Column(name="job_fk", type="integer") 并再次检查。让我知道它是否有效。

# javascript - 避免在 jQuery 悬停时移动 div

> ID：14196342
> 
> 赞同：0
> 
> 时间：2013-01-07T12:51:31.137
> 
> 标签：javascript, jquery, html, css, jquery-animate

我有几个相邻的正方形。在悬停时，我希望方块简单地增加宽度并且（位于下一个 div 上方）而不是移动其左侧的所有方块。我为此使用jQuery：

```
$('.' + c).hover(//'c' is my variable class :`.alpha1` / `.alpha2` / `.alpha3`
    function () {$(this).animate({height:"30%"},500);},
    function () {$(this).animate({height:"22.2287%"},500);});//original height 
```

它运行良好，但正在移动盒子。移除悬停时，所有方块将自身重置为原始状态。

我的 CSS`.boxes`类：

```
.boxes,.alpha1 ,.alpha2, .alpha3{
background:rgba(0, 0, 0, .30);
    float:left;
    overflow:hidden;
    width:6.36896%;
    height:22.2287%;
    margin:2px;
    box-shadow:0 0px 15px rgba(0,0,0,0.75) inset;
    -moz-box-shadow:0 0px 15px rgba(0,0,0,0.75) inset;
    -webkit-box-shadow:0 0px 15px rgba(0,0,0,0.75) inset;
} 
```

**编辑#1** [我的 jsiddle 在这里](http://jsfiddle.net/prateeksachan/56yeQ/4/) 单击事件链接以激活悬停效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T13:15:59.990

在浮动 div 中添加另一个 div，如下所示：

```
<div class="boxes event1">
   <div class="child">1</div>
 </div> 
```

具有以下样式：

```
.boxes .child {
   position: absolute;
   top: 0;
   left: 0;
   right: 0;
   height: 100px;
}
.boxes {
  //all your styling plus:
  overflow: visible;
} 
```

并且`hover`应该在`.child`div 上添加事件侦听器。当您悬停时，它会扩展高度。这样你就不会看到转移。当然不要错过`.child`div 的颜色和样式，因为这是您将看到的。

让我知道这是否足够清楚。

# python - 有没有一种更简单的方法来为给定 if 条件的变量分配值 - Python？

> ID：14196344
> 
> 赞同：0
> 
> 时间：2013-01-07T12:51:33.823
> 
> 标签：python, if-statement, variable-assignment

除了以下蛮力方法之外，是否有更简单的方法可以在给定 if 条件的情况下将值分配给变量？

**方法一：**

```
a, b, c, d = 0.03,0.4,0.055,0.7
x = 0.2

if a < x:
  a = x
if b < x:
  b = x
if c < x:
  c = x
if d < x:
  d = x 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-07T12:55:05.987

也许：

```
a, b, c, d = max(a, x), max(b, x), max(c, x), max(d, x) 
```

但是如果你有很多变量以完全相同的方式处理，a`list`可能会更好。

```
values = [0.03,0.4,0.055,0.7]
x = 0.2

values = [max(v, x) for v in values] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T14:37:03.707

*绝对*考虑使用`numpy.where`哪个是**最有效的方法**来处理任何大小的数组和维度：

```
#your example:
a,b,c,d = 0.03,0.4,0.055,0.7
x = 0.2

#solution
values = numpy.asarray([a, b, c, d])
a,b,c,d = numpy.where(values<x, x, values)

#efficiency becomes clear when
values = numpy.random.rand(1000,100,10)     #any size and number of dimensions
values = numpy.where(values<x, x, values)   #just works fine and efficient

#further developments would be possible, e.g., multiple conditions
values = numpy.where((values>=0.3)&(values<0.7), 0.5, values) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T14:57:46.690

也许，更像 Haskell（zipWith）

```
from itertools import izip, starmap, repeat

a, b, c, d = starmap(max, izip(repeat(0.2), (0.03, 0.4, 0.055, 0.7))) 
```

一些基本时间（darwin 12.2.0，py 2.7.3）：

```
In [0]: %timeit a,b,c,d = starmap(max, izip(repeat(0.2), (0.03, 0.4, 0.055, 0.7)))
1000000 loops, best of 3: 1.87 us per loop

In [1]: %timeit a,b,c,d = map(max, izip(repeat(0.2), (0.03, 0.4, 0.055, 0.7)))
100000 loops, best of 3: 3.99 us per loop

In [2]: %timeit a,b,c,d = [max(0.2, v) for v in [0.03,0.4,0.055,0.7]]
100000 loops, best of 3: 1.95 us per loop

In [3]: %timeit a,b,c,d = [max(0.2, v) for v in (0.03,0.4,0.055,0.7)]
1000000 loops, best of 3: 1.62 us per loop 
```

结论：

*   元组的迭代速度比列表快？！？

*   星图胜过地图，即使 max(values) 比 max(*values) 快？！？

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-01-07T12:53:17.270

尝试：

```
a = x if a < x else a

b = x if b < x else b

c = x if c < x else c

d = x if d < x else d 
```

# c# - C# 解析数据行

> ID：14196346
> 
> 赞同：0
> 
> 时间：2013-01-07T12:51:49.793
> 
> 标签：c#, datatable

设想：

根据用户交互，将调用几个存储过程之一，每个存储过程都有不同的结果结构，所以我不能强类型返回。

我正在使用 Petapoco 并返回`IEnumerable<dynamic>`行，转换为数据表（大约需要 245 毫秒），然后循环遍历数据表行中的行并附加到创建 html 表的字符串。

一个结果是返回超过 3000 行，并且需要将近 2 分钟来解析。

我该如何改进呢？每行只需要大约 35 毫秒，所以单独不是问题。

如果可以的话，我宁愿不必添加分页。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T12:53:21.840

最有可能使用 a`StringBuilder`是解决方案。

而不是附加到字符串实例：

```
var html = "";

foreach(var row in rows)
    html += "<p>" + row + "</p>"; 
```

使用`StringBuilder`：

```
var sb = new StringBuilder();
foreach(var row in rows)
    sb.Append("<p>" + row + "</p>");

var html = sb.ToString(); 
```

# php - 无法使用模式“a”打开带有消息 file.log 的未捕获异常“Zend_Log_Exception”

> ID：14196352
> 
> 赞同：14
> 
> 时间：2013-01-07T12:52:14.387
> 
> 标签：php, zend-framework

我面临以下错误：

> 无法使用模式“a”打开带有消息 file.log 的未捕获异常“Zend_Log_Exception”

在我的引导程序中，我有以下代码：

```
$logfile = PROJECT_PATH . DIRECTORY_SEPARATOR .'/tmp/logs/'.$config->app->logfile.'.log';

if (!file_exists($logfile))
{
  $fp = fopen($logfile, 'a');
  fclose($fp);
}

$redacteur = new Zend_Log_Writer_Stream($logfile);
$logger    = new Zend_Log($redacteur); 
```

完整的错误页面：

> 警告：fopen（/home/http/me.tv/fbapps/www//tmp/logs/vengeance.log）[function.fopen]：无法打开流：/home/http/me 中没有这样的文件或目录。第 81 行的 tv/fbapps/www/inline/bootstrap_vengeance.php
> 
> 警告：fclose() 期望参数 1 是资源，布尔值在第 82 行的 /home/http/me.tv/fbapps/www/inline/bootstrap_vengeance.php 中给出
> 
> 致命错误：无法在 /home/http/me 中使用模式“a”打开带有消息“/home/http/me.tv/fbapps/www//tmp/logs/vengeance.log”的未捕获异常“Zend_Log_Exception” .tv/fbapps/www/library/Zend/Log/Writer/Stream.php:78 堆栈跟踪：#0 /home/http/me.tv/fbapps/www/inline/bootstrap_vengeance.php(85): Zend_Log_Writer_Stream-> __construct('/home/http/medi...') #1 /home/http/me.tv/fbapps/www/htdocs/vengeance/index.php(9): require_once('/home/http/medi. ..') #2 {main} 在第 78 行的 /home/http/me.tv/fbapps/www/library/Zend/Log/Writer/Stream.php 中抛出

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-07T12:55:57.590

对文件赋予正确的权限：`0777`.

检查目录是否`/home/http/me.tv/fbapps/www/tmp/logs/`存在，然后在终端中运行此命令：

```
chmod 777 /home/http/me.tv/fbapps/www/tmp/logs/vengeance.log 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-10-05T15:19:31.917

Web 服务器用户应该有权在日志文件夹上写入和执行（通过）。

`chown www-data:www-data -R logs/ # change www-data by the user of the web server chmod 755 -R logs/`

将 777 放在某个地方是一个非常糟糕的主意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-26T14:04:30.317

就像克莱姆说的，你不应该给日志文件 777 访问权限。这是错误的，会给您的应用程序带来漏洞。授予文件访问权限的另一种方法是像这样授予访问权限：

`chmod u=rw,g=rw,o=rw file.log`

如果您只想向特定用户/组授予读写访问权限，请确保删除`o=rw`并添加正确的所有者/组

`chown user:group file.log`

# javascript - 使用 NTLM 上传 XMLHttpRequest 文件 - 文件上传两次

> ID：14196353
> 
> 赞同：1
> 
> 时间：2013-01-07T12:52:14.927
> 
> 标签：javascript, post, xmlhttprequest

我目前正在开发一个涉及使用 XMLHttpRequest 进行异步文件上传的 Web 应用程序。

当使用 NTLM 身份验证时（这有点必要），异步 POST 最终会被发送两次。第一次响应是 401，第二次是 200。由于 NTLM 的挑战/响应性质，这是我所期望的，但我想知道是否有办法避免发送文件数据两次（特别是因为正在上传的文件可能非常大），可能是通过某种方式首先发送一个空请求以在发送实际数据之前触发 401。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T05:36:03.857

在浏览器中，由于 HTTP 和 NTLM 身份验证协议的性质，您无法避免这种情况。

但是，我不认为整个文件的数据实际上被发送了两次。

我将以下内容发送到 IIS 7.5 上受 NTLM 保护的文件：

```
POST /test/upload HTTP/1.1
Host: localhost
Content-Length: 5 
```

请注意，我实际上并没有发送任何内容，只发送了完整的标题。然而，IIS**立即**做出了回应：

```
HTTP/1.1 401 Unauthorized
Cache-Control: private
Content-Type: text/html; charset=utf-8
Server: Microsoft-IIS/7.5
WWW-Authenticate: Negotiate
WWW-Authenticate: NTLM
Date: Thu, 10 Jan 2013 05:17:58 GMT
Content-Length: 6277

... 
```

这意味着，如果我是一个上传大文件的浏览器，我会在传输很多字节之前被切断。我假设（希望）任何表现良好的浏览器都会放弃文件上传并开始 HTTP 身份验证。

可能值得你花时间去看看像 Wireshark 这样的东西，看看实际发生了什么。（记得用不同的浏览器进行测试！）不要相信浏览器内的开发者工具，也不要使用像 Fiddler 这样的调试代理。（事实上​​，如果您使用 Fiddler，这实际上可能是问题所在：它会在向服务器发送*任何内容之前缓冲**整个*请求。）

 *如果您确实发现整个文件确实被完整上传了两次（也许旧版本的 IIS 不发送立即数`401`？），请考虑事情必须如何发生：

1.  用户提交上传，导致浏览器向`POST`服务器发出请求。因为浏览器不可能知道 URL 是否需要身份验证，所以它只会发送*完整*的请求。

    ```
    POST /upload HTTP/1.1
    Content-Type: mutlipart/form-data
    Content-Length: 1024

    ... 
    ```

2.  服务器可能会立即以 响应`401`，但行为不佳的用户代理无论如何都会传输整个请求。

3.  一旦请求完成并且浏览器看到了`401`，我们就开始[NTLM 舞蹈](https://stackoverflow.com/a/5452258/201952)。客户端必须发出一个带有[Type 1](http://davenport.sourceforge.net/ntlm.html#theType1Message)消息的新请求，服务器用另一个响应`401`，这次包含 Type 2 消息，最后客户端发出*第三个*请求，带有包含实际凭据的 Type 3 消息。

    由于客户端知道在 NTLM 协商中保证第二个请求是另一个请求`401`，它知道它可以跳过实体（表单数据）的传输。但是，它必须在第三次请求时第二次发送 post 数据，因为我们必须假设服务器丢弃了原始请求数据。

4.  我们的文件终于上传了！（但它必须传输两次。）

因此，虽然我认为您不会真正看到 NTLM 身份验证的*完整*双重上传问题，但您可能仍想消除这种可能性。以下是我将如何处理它：

将上传 URL移到 NTLM 验证区域**之外**。在上传页面（经过 NTLM 身份验证）上，使用会话 cookie（在加载页面时设置）或发出令牌 - 隐藏字段中的 GUID 就足够了。

接收上传的脚本可以拒绝任何没有有效会话和/或令牌的请求。

如果您使用 NTLM 凭据作为授予对 NTFS 资源的访问权限的机制，则可以将上载写入匿名可写临时文件夹，完成后，将请求重定向到第二个受 NTLM 保护的脚本，该脚本将文件移动到它的目的地。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T03:59:49.873

不确定您的实现，但看起来其他人在 cURL 和 NTLM 方面遇到了类似的问题。根据下面的链接，您首先提出任何空请求的想法可能会奏效。

通过 NTLM 代理发布文件两次
[http://curl.haxx.se/mail/lib-2007-01/0040.html](http://curl.haxx.se/mail/lib-2007-01/0040.html)

> > 我正在使用 curl_formadd 和 POST 方法通过 NTLM-auth 代理发送文件。查看 ProgressFunction，我看到我的文件发送了两次（可能是因为特定于 NTLM）。我是对还是错？
> 
> 你说的对。使用 NTLM 时无法避免这种情况，因为一旦开始传输，我们就无法中止传输。

使用 NTLM/协商代理身份验证的文件上传的不同行为
[http://curl.haxx.se/mail/archive-2012-11/0013.html](http://curl.haxx.se/mail/archive-2012-11/0013.html)*

# bxslider - bxslider 对于动态加载的内容无法正常工作

> ID：14196358
> 
> 赞同：3
> 
> 时间：2013-01-07T12:52:35.227
> 
> 标签：bxslider

必须将 bxslider 用于其中一个应用程序。我在尝试使用通过 ajax 动态加载的内容实现 bxslider 时遇到了一些问题。

它突然起作用。有趣的是，当通过打开开发工具或窗口大小改变视口时，它*有时会起作用*。

只是想了解以前是否有人遇到过此问题以及可能的解决方法。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T12:08:42.500

BxSlider 现在包含两个新方法：

*   `reloadSlider()`
*   `destroySlider()`

将新内容加载到滑块后，尝试调用`reloadSlider()`，因为这将重新初始化滑块并容纳新的幻灯片。

在此处查看代码示例：

*   [http://bxslider.com/examples/reload-slider](http://bxslider.com/examples/reload-slider)
*   [http://bxslider.com/examples/reload-slider-settings](http://bxslider.com/examples/reload-slider-settings)

# c# - 我可以在 asp:repeater 中使用过滤器吗？

> ID：14196364
> 
> 赞同：2
> 
> 时间：2013-01-07T12:52:48.857
> 
> 标签：c#, asp.net, repeater

如果是而不是如何，我可以在转发器中使用过滤器吗？在 asp.net c# 中有可能吗？

在我的项目中，我将动态数据过滤器放在转发器中。

请参阅我想要在中继器中使用那种类型的过滤器的示例[单击此处](http://www.telerik.com/help/aspnet-ajax/grid-filteringitem.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T12:56:05.453

由于您的转发器绑定到数据源，因此您应该对其应用过滤条件。例如，如果 Datasource 由 SQLDataSource 表示，请参阅[SqlDataSource.FilterExpression 属性](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.sqldatasource.filterexpression.aspx)主题。这似乎是客户端过滤。如果是这样，最好的解决方案是设置 SQLDataSource.SelectCommand 属性，以便它从数据库中获取所需的数据。这将减少从 DB Server 传输到 WebServer 的数据大小，并使您的应用程序运行得更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T13:01:29.773

正确的方法是过滤数据源上的数据，但是在转发器中，您也可以过滤它们并将它们显示为：

```
<asp:Repeater ID="rMyID" runat="server">
  <ItemTemplate>
    <% if (Condition) { %>
      Show this line
    <%} %>
  </ItemTemplate>
</asp:Repeater> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T12:54:11.607

“过滤器”是什么意思？我认为您必须在数据源上执行此操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T13:00:25.200

如果要在浏览器中进行过滤，则需要使用 JavaScript 来显示和隐藏每个 Item 的主要元素。

如果您在服务器上进行过滤，则需要在 DataSource 上进行过滤以删除您不想要的条目，并在每次更改时 DataBind() 重复器。您可以使用代码手动进行过滤，或者如果 platon 建议可用，则使用 FilterExpression。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-07T14:01:52.887

我认为最好的方法是使用数据表过滤器属性。这是一个简单的例子。

_dt = _dt.Select("COLUMN_NAME <> 'YOURFILTER'").CopyToDataTable();

# ruby-on-rails - if/else/unless 选择 Rails

> ID：14196365
> 
> 赞同：0
> 
> 时间：2013-01-07T12:52:50.780
> 
> 标签：ruby-on-rails, ruby-on-rails-3, if-statement

我不认为我需要问这个，但这里有。我有一个应用程序，可以让您在书籍上签出、签入和设置提醒，例如，这是通过单击复选框来完成的。因此，如果 User1 例如签出 Book1，则该用户在查看时只能看到签入按钮。然后，如果同一用户签入该书，则签出按钮将重新出现

然后是用户 2，他们查看同一本书，理论上应该看不到用户 1 的提醒我按钮（当书重新签入时发送电子邮件）之外的任何按钮。

但是，在当前设置下，用户 2 仍然可以看到结帐按钮，但它已经被勾选为 true，这在状态方面是正确的，但我不希望显示该按钮。

这就是我到目前为止所拥有的（提醒我按钮的逻辑没有呈现任何内容）

```
<% unless current_user.id == @book.user_id   %> 
<%= render 'shared/checkout' %>
<% end %>

<% if current_user.id == @book.user_id %>
<%= render 'shared/checkin' %>
<% end %>

<% if @book.user_id != nil && current_user.id != @book.user_id %>
<% render 'shared/registerinterest' %>
<% end %> 
```

此外，当用户在书中查看这是我传递给模型的内容时，我认为 nil 值可能会导致问题？

```
<%= form_for @book do |f| %>

<%= f.label :checked_out, "Check Book Back In" %>
<%= f.check_box :checked_out, {checked: false}, false  %>
<%= f.hidden_field :user_id, :value => nil %>
<%= f.submit 'Check In' %>
<% end %> 
```

似乎无法理解这种情况，所以如果有人可以解释为什么那会很棒，因为我可以从中学习

谢谢你

编辑

我现在基于 anser 为注册按钮尝试这个

```
<% if @book.checked_out == true && current_user.id != @book.user_id %>
<% render 'shared/registerinterest' %>
<% end %> 
```

但是这不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T14:00:51.720

好，

编码 `<% unless current_user.id == @book.user_id %>`

是相同的： `<% if current_user.id != @book.user_id %>`

因此，由于 user2 的 id 是 2 它确实与用户的 id 不同（即 1 ），并且它将显示结帐部分。

我的建议是在您的数据库中添加一个布尔字段，通知该书是否已被签出，

```
<% if current_user.id == @book.user_id %>
   <%= render 'shared/checkin' %>
<% elsif @book.checked_out == false %>
   <%= render 'shared/checkout' %>
<% else %>
    #If it goes into this branch of the if/elsif/else, it means that
    # current_user.id != @book.user_id and checked_out == true
    <%= render 'shared/registerinterest' %>
<% end %> 
```

然后你必须实现一些东西，当有人签出这本书时，将 check_out 设置为 true。

edited: included that last else.

# css - :before, :after 和填充

> ID：14196367
> 
> 赞同：16
> 
> 时间：2013-01-07T12:53:02.390
> 
> 标签：css, image, hyperlink, padding

我有以下CSS代码：

```
.readMore:before {
    content: '';
    display: block;
    float: left;
    width: 10px;
    height: 27px;
    margin: 0;
    background: red url('images/button.png');
    background-position: 0 0;
}

.readMore {
    float: left;
    height: 24px;
    background: url('images/button.png');
    background-position: -10px 0;
    border: 0;
    margin: 0;
    padding: 4px 0 0 0;
    cursor: pointer: 
}

.readMore:after {
    content: '';
    display: block;
    float: right;
    width: 10px;
    height: 27px;
    margin: 0;
    top: -3px;
    background: red url('images/button.png');
    background-position: -411px 0;
} 
```

哪个样式的链接看起来像这样： ![在此处输入图像描述](../Images/947aace3719449750f01074b9a5b3ffe.png)

但是，当尝试垂直调整 .readMore 中的文本时，:before 和 :after 图像也会“跳”下来。哪个是合乎逻辑的，但是有没有解决方案可以更好地与“整体形象”保持一致？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-07T13:10:21.783

我倾向于`absolute`对 :before 和 :after 元素使用定位。然后你可以对父元素做任何你想做的事情，而不用担心你的伪元素会去任何地方（当然，除非你移动元素本身）。

[在 JSFiddle 上查看](http://jsfiddle.net/Gt69L/)

## html

```
<div></div> 
```

## css

```
div {
  position: relative;
  background: #eee;
  width: 25px;
  height: 25px;
  margin: 30px 0 0 30px;
}
div:before {
  position: absolute;
  width: 10px;
  height: 25px;
  top: 0;
  left: -10px;
  content:"";
  background: #222;
}
div:after {
  position: absolute;
  width: 10px;
  height: 25px;
  top: 0;
  right: -10px;
  content:"";
  background: #222;
} 
```

这显示了我将如何布置它们。然后，您可以使用任何您想要调整文本在父级中的位置的方法。

上述代码的关键点如下：

1.  父级相对定位。这允许我们对其子元素（伪元素）使用绝对定位，以将它们相对于它们的父元素放置。
2.  如果您希望元素是边框到边框，则前后元素的左右位置分别等于它们的宽度。

如果要将父级中的文本`div`垂直居中，并且它只是一行，则可以将 line-height 设置为等于容器的高度。[在这里查看](http://jsfiddle.net/VGJLj/)。这比“猜测”填充以使其垂直居中要好，如果这就是你想要的。

当然，还有其他方法可以使文本垂直居中，因此有很多关于该主题的 SO 问题。[这里只有一个](https://stackoverflow.com/questions/2939914/vertically-align-text-in-a-div)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-12T20:09:07.030

我只是根据`rem`值设置高度的样式，例如`height: 2 rem`. 无法确认这是最好的解决方案，但在 1 行代码中响应性非常完美。

# kendo-ui - 上下拖动元素时自动滚动 Kendo TreeView

> ID：14196372
> 
> 赞同：0
> 
> 时间：2013-01-07T12:53:48.820
> 
> 标签：kendo-ui, kendo-treeview

希望有人能给我一个解决方案，使剑道网格在向上或向下拖动 TreeView 元素时自动滚动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T19:11:04.717

将拖动事件处理程序附加到树视图，并根据拖动位置设置可滚动元素的 scrollTop。

例如，如果 treeViewHolderDivEdit（下）是您可以在下面执行的树视图的容器。

```
treeview.bind("drag", function (e) {

     var targetDataItem =  treeview.dataItem(e.dropTarget);
     if(targetDataItem != null || targetDataItem != undefined)
     {
             if(targetDataItem.text == "Root" && e.statusClass == "insert-top")
             {
             e.setStatusClass("k-denied");
             }
            //  $("#status").html(e.statusClass + "  "+targetDataItem.text );
     }
       var y = e.pageY - $("#treeViewHolderDivEdit").offset().top;
       $("#treeViewHolderDivEdit").scrollTop(y);

 }); 
```

# c# - 对 List 执行 LINQ 操作

> ID：14196380
> 
> 赞同：3
> 
> 时间：2013-01-07T12:54:11.543
> 
> 标签：c#, linq

我有这样的结构

```
public struct MyStruct
{
     public string Name;
     //More fields and construtors
} 
```

现在，如果我有`List<MyStruct>`办法使用`Contains()`列表功能？

这不会编译：

`if(_myStructList.Contains(x => x.Name == "DAMN!")){//DO STUFF}`

这是错误：

```
Cannot convert lambda expression to type 'MyStruct' because it is not a delegate type 
```

我想那这不适用于结构？！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-07T12:55:52.150

试试`Any()`LiNQ 中的方法：

```
using System.Linq;

if(_myStructList.Any(x => x.Name == "DAMN!")) ... 
```

`Contains()`是一个声明的方法，`List<>`它需要一个对象作为参数，并使用 equals 来比较对象。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-07T13:03:06.360

不使用 Linq 的 Enumerable.Any 的替代方法是[List.Exists](http://msdn.microsoft.com/en-us/library/bfed8bca.aspx)：

```
if (_myStructList.Exists(x => x.Name == "DAMN!")) ... 
```

# string - 检查字节序列是否包含 utf-16

> ID：14196386
> 
> 赞同：3
> 
> 时间：2013-01-07T12:54:21.230
> 
> 标签：string, unicode, utf-8, utf-16

我正在从流中读取字节序列。假设为了论证，序列是固定长度的，我将整个内容读入一个字节数组（在我的情况下是这样，`vector<char>`但这对于这个问题并不重要）。这个字节序列包含一个字符串，可以是 utf-16 或 utf-8 编码。不幸的是，没有迹象表明它是哪一个。

我可以验证字节序列是否代表有效的 utf-16 编码以及它是否代表有效的 utf-8 编码，但我也可以想象相同的字节序列如何可能是有效的 utf-8 和有效的 utf-16同时。

那么，这是否意味着无法普遍确定它是哪一个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T13:37:05.480

If the contents are expected to be written in a language using the Latin script, simply counting nulls will detect UTF-16\. In UTF-8, null bytes will decode to NUL control character, and they don't appear in text normally.

Languages written in other scripts cannot be fully valid in both UTF-16 and UTF-8 unless it's artificially constructed to be so.

So, first detect if it's fully valid UTF-8 sequence on its own:

*   If yes, check for null bytes, and if there are some, it's UTF-16\. Otherwise it's UTF-8.
*   If not, it's UTF-16.

If the above resulted in UTF-16, that's not enough as you have to know the endianess as well. With languages written in Latin script, the amount of odd or even null bytes will tell this.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T13:05:10.640

# android - 使用 ksoap2 在 android 中创建带有安全标头的肥皂信封

> ID：14196387
> 
> 赞同：7
> 
> 时间：2013-01-07T12:54:20.397
> 
> 标签：android, wsdl, ksoap2

我想使用 ksoap2 在 android 中创建带有安全标头的肥皂信封。我的android代码是...

```
import org.ksoap2.SoapEnvelope;
import org.ksoap2.SoapFault;
import org.ksoap2.serialization.PropertyInfo;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapPrimitive;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;
import org.kxml2.kdom.Element;
import org.kxml2.kdom.Node;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
public class SOP_WebService extends Activity
{

    private final String NAMESPACE = "http://xmlns.oracle.com/WorklistRetrival";
    private final String URL = "http://www.sample.com/orabpel/default/WorklistRetrival/1.0";
    private final String SOAP_ACTION = "process";
    private final String METHOD_NAME = "WorklistRetrievalREQ";  

    public void onCreate(Bundle savedInstanceState) 
    {
         super.onCreate(savedInstanceState);
         setContentView(R.layout.soap_webservice);

         Button btnClick = (Button) findViewById(R.id.btnClick);
         btnClick.setOnClickListener(new OnClickListener()
         {
            @Override
            public void onClick(View v) 
            {
                callWebservice();
            }
        });
    }

    public void callWebservice()
    {

        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
        PropertyInfo pi = new PropertyInfo();
        pi.setNamespace(NAMESPACE);
        pi.setName("WorklistType"); 
        pi.setValue("PO_REQUISITION"); 
        request.addProperty(pi);

        PropertyInfo p2 = new PropertyInfo();
        p2.setNamespace(NAMESPACE);
        p2.setName("Status"); 
        p2.setValue("TODO"); 
        request.addProperty(p2);

        PropertyInfo p3 = new PropertyInfo();
        p3.setNamespace(NAMESPACE);
        p3.setName("Mode"); 
        p3.setValue(""); 
        request.addProperty(p3);

         SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

        envelope.setOutputSoapObject(request);
        HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
        Log.i("bodyout", "" + envelope.bodyOut.toString());

        try 
        {
            androidHttpTransport.debug = true;
            androidHttpTransport.call(SOAP_ACTION, envelope);
            SoapPrimitive response = (SoapPrimitive)envelope.getResponse();
            Log.i("myApp", response.toString());
            Log.i("request", "" + envelope.bodyIn);
            Log.i("response", "" + envelope.bodyOut);
            Log.i("request", "" + androidHttpTransport.requestDump);
            Log.i("response", "" + androidHttpTransport.responseDump);
        } 
        catch (SoapFault e)
        {
            Log.d("soapFault", "soapFault");
            e.printStackTrace();
        }
        catch (Exception e) 
        {
            Log.d("Exception", "Exception");
            e.printStackTrace();
            Log.d("Exception Generated", ""+e.getMessage());
        }

    }

} 
```

上面的代码在没有安全标头的肥皂请求下创建。

```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
    <soap:Header>
    </soap:Header>
    <soap:Body xmlns:ns1="http://xmlns.oracle.com/bpel/aubi/mobile/Worklist">
        <ns1:WorklistRetrievalREQ>
            <ns1:WorklistType>HR_OFFER</ns1:WorklistType>
            <ns1:Status>TODO</ns1:Status>
            <ns1:Mode/>
        </ns1:WorklistRetrievalREQ>
    </soap:Body>
</soap:Envelope> 
```

但我需要在下面创建带有安全标头的肥皂请求

```
<soap:Envelope 
    xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" 
    xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">

    <soap:Header>
        <wsse:Security 
            xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" 
            xmlns="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" 
            xmlns:env="http://schemas.xmlsoap.org/soap/envelope/" soap:mustUnderstand="1">
                <wsse:UsernameToken 
                    xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" 
                    xmlns="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
                            <wsse:Username>cbrown</wsse:Username>
                            <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">welcome</wsse:Password></wsse:UsernameToken>
        </wsse:Security>
    </soap:Header>
    <soap:Body xmlns:ns1="http://xmlns.oracle.com/bpel/aubi/mobile/Worklist">
        <ns1:WorklistRetrievalREQ>
            <ns1:WorklistType>HR_OFFER</ns1:WorklistType>
            <ns1:Status>TODO</ns1:Status>
            <ns1:Mode/>
        </ns1:WorklistRetrievalREQ>
    </soap:Body>
</soap:Envelope> 
```

请告诉我这段代码做了什么样的改变

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-10T16:59:14.750

我找到了我的问题的答案。我被回答有用的其他人。

```
public class SOAP_WebService extends Activity
{

    private final String NAMESPACE = "http://ws.simple/";
    private final String URL = "http://10.0.2.2/SimpleWebservice/simple";
    private final String SOAP_ACTION = "http://ws.simple/getString";
    private final String METHOD_NAME = "getString";

    public void onCreate(Bundle savedInstanceState) 
    {
         super.onCreate(savedInstanceState);
         setContentView(R.layout.soap_webservice);

         Button btnClick = (Button) findViewById(R.id.btnClick);
         btnClick.setOnClickListener(new OnClickListener()
         {
            @Override
            public void onClick(View v) 
            {
                callWebservice();
            }
        });
    }
    public void callWebservice()
    {
        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
        PropertyInfo weightProp =new PropertyInfo();
        weightProp.name = "arg0";
        weightProp.setValue("rajan");
        request.addProperty(weightProp);

        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

        // create header
        Element[] header = new Element[1];
        header[0] = new Element().createElement("http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd","Security");
        header[0].setAttribute(null, "mustUnderstand","1");

        Element usernametoken = new Element().createElement("http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd", "UsernameToken");
        usernametoken.setAttribute(null, "Id", "UsernameToken-1");
        header[0].addChild(Node.ELEMENT,usernametoken);

        Element username = new Element().createElement(null, "n0:Username");
        username.addChild(Node.IGNORABLE_WHITESPACE,"CBROWN");
        usernametoken.addChild(Node.ELEMENT,username);

        Element pass = new Element().createElement(null,"n0:Password");
        pass.setAttribute(null, "Type", "http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText");
        pass.addChild(Node.TEXT, "welcome");

        usernametoken.addChild(Node.ELEMENT, pass);

        // add header to envelope
        envelope.headerOut = header;

        Log.i("header", "" + envelope.headerOut.toString());

        envelope.dotNet = false;
        envelope.bodyOut = request;
        envelope.setOutputSoapObject(request);
        HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
        Log.i("bodyout", "" + envelope.bodyOut.toString());

        try 
        {
            androidHttpTransport.debug = true;
            androidHttpTransport.call(SOAP_ACTION, envelope);

            SoapPrimitive response = (SoapPrimitive)envelope.getResponse();
            Log.i("myApp", response.toString());
        } 
        catch (SoapFault e)
        {
            e.printStackTrace();
        }
        catch (Exception e) 
        {
            e.printStackTrace();
            Log.d("Exception Generated", ""+e.getMessage());
        }

    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-09T09:31:48.210

这对我有用，可以在 Android 的 kSOAP 库中提供安全请求标头

```
public static Element buildAuthHeader() {
        Element headers[] = new Element[1];
        headers[0]= new Element().createElement("http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd", "Security");
        headers[0].setAttribute(null, "mustUnderstand", "1");
        Element security=headers[0];

        //user token
        Element usernametoken = new Element().createElement(security.getNamespace(), "UsernameToken");
        usernametoken.setAttribute("http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd", "Id", "UsernameToken-14CBAE357AC169AFA614664925178422");

        //username
        Element username = new Element().createElement(security.getNamespace(), "Username");
        username.addChild(Node.TEXT, HttpConstant.REQ_HEADER_USERNAME);
        usernametoken.addChild(Node.ELEMENT,username);

        // password
        Element password = new Element().createElement(security.getNamespace(), "Password");
        password.setAttribute(null, "Type", "http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText");
        password.addChild(Node.TEXT, HttpConstant.REQ_HEADER_PASSWORD);
        usernametoken.addChild(Node.ELEMENT,password);

        headers[0].addChild(Node.ELEMENT, usernametoken);

        return headers[0];
    }

SoapSerializationEnvelope sSerialaEnvelop = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        sSerialaEnvelop.dotNet = true;
        sSerialaEnvelop.headerOut = new Element[1];
        sSerialaEnvelop.headerOut[0] = SoapBasicAuth.buildAuthHeader(); //// add security request header
        sSerialaEnvelop.bodyOut = sObject;
        sSerialaEnvelop.setOutputSoapObject(sObject); 
```

# android - Android 的 onSignalStrengthChanged 在大型 tcp 传输期间从不被调用，但在报告多个更改之后

> ID：14196392
> 
> 赞同：0
> 
> 时间：2013-01-07T12:54:38.067
> 
> 标签：android

我正在尝试收集有关 tcp 传输速度如何与信号强度变化相关的数据，但我似乎无法从传输期间获得任何值。传输完成后总是会收到回调，有时甚至是 10 个值，在传输后相隔几毫秒。

我正在听 (PhoneStateListener.LISTEN_SIGNAL_STRENGTHS | PhoneStateListener.LISTEN_CELL_LOCATION) 并调用这些回调。

是否有可能我以某种方式阻止了操作系统，使其无法调用回调？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T18:10:51.953

如果 TCP 传输是使用 AsyncTask 完成的，则信号强度将按应有的方式出现。使用 Java 线程会以某种方式阻止事件。

# php - mysql 全选

> ID：14196395
> 
> 赞同：0
> 
> 时间：2013-01-07T12:54:46.967
> 
> 标签：php, forms, filter

在我的数据库中，有一些具有不同类别和类型的车辆。我想创建一个表单来按类别和类型过滤车辆。所以表格代码如下。

```
<form action="" method="post">
Type <select name="search_type">
           <option value="jeep">Jeep</option>
           <option value="Wagon">Wagon</option>
           <option value="cab">Cab</option>
     </select>

Category <select name="search_category">
           <option value="Recondition">Recondition</option>
           <option value="Used">Used</option>
     </select>
    <input type="submit" name="search_submit"></form> 
```

这是php代码：

```
if(isset($_POST['search_submit']))
{
  $all_vehicles    = FALSE;
  $search_type     = $_POST['search_type'];
  $search_category = $_POST['search_category'];
  $search_brand    = $_POST['search_brand'];

  $search_result   = mysql_query("SELECT * FROM vehicle_info WHERE type='$search_type' && catagory='$search_catagory' && brand='$search_brand' ORDER BY id desc");
}
else
{
  $search_result = mysql_query("SELECT * FROM vehicle_info ORDER BY id desc");
} 
```

如果有人想搜索`jeeps`任何类别（使用过的或翻新过的），我应该在查询中写什么代码？

我知道我可以添加一个新`<option>`的“任何”。但我不知道如何在查询中使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T13:01:20.087

您不必将其存储为任何内容。只需选择它而不选择类别。当然，假设这些是唯一存储的两个类别。

`SELECT * FROM vehicle_info WHERE type = '$search_type' ORDER BY id DESC;`

还; 请注意 SQL 注入。

* * *

在@dualed 处编辑以回应：

正确的。他可以简单地添加`<option value="all">All categories</option>`

并添加一个 if 语句：

```
if ($search_category != "all")
{
    $search_result = mysql_query("SELECT * FROM vehicle_info WHERE type = '$search_type' AND category = '$search_category' ORDER BY id DESC;");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T12:59:07.777

你可以使用`IN()`

```
$search_result = mysql_query("SELECT * FROM vehicle_info WHERE type IN('used', 'recondition') AND ... 
```

见：[http ://dev.mysql.com/doc/refman/5.1/de/comparison-operators.html](http://dev.mysql.com/doc/refman/5.1/de/comparison-operators.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T13:02:51.390

```
 if(isset($_POST['search_submit']))
        {
            $all_vehicles=FALSE;
            $search_type = $_POST['search_type'];
            $search_category = $_POST['search_category'];
            $search_brand = $_POST['search_brand'];

            $query = "SELECT * FROM vehicle_info WHERE type='$search_type'";
            if(!empty($search_category)) {
               $query .= " && catagory='$search_catagory'";
            }
            if(!empty($search_brand)) {
                 $query .= " && brand='$search_brand'";
            }
            $query .= " ORDER BY id desc"

            $search_result = mysql_query($query);
        }
        else
        {
             $search_result = mysql_query("SELECT * FROM vehicle_info ORDER BY id desc");
        } 
```

# file-io - GNU sed 排除不匹配的行

> ID：14196396
> 
> 赞同：0
> 
> 时间：2013-01-07T12:54:50.573
> 
> 标签：file-io, sed, gnu

我正在使用 GNU sed 命令（GNU sed 4.2.1 版）在文件中进行搜索和替换。我希望输入文件保持完整，因此我使用 sed 的文件写入选项。

以下是命令

```
sed -e "s/INSERT/UPDATE/w  output.txt" "input.txt" 
```

但上述命令的问题是，它不会写入不匹配的行。即如果没有找到要搜索的文本的行，则该行不会写入 output.txt 文件中。

我希望在 output.txt 中写入不匹配的行

如何实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T13:01:32.487

用作`w`单独的命令，即：

```
sed -e 's/INSERT/UPDATE/' -e 'w output.txt' input.txt 
```

或者，如果您`sed`支持它，您可以使用分号：

```
sed -e 's/INSERT/UPDATE/;w output.txt' input.txt 
```

但是，如果您真的只想在文件中输出，请使用重定向：

```
sed -e 's/INSERT/UPDATE/' input.txt > output.txt 
```

# c# - 检测不止一次鼠标点击

> ID：14196398
> 
> 赞同：1
> 
> 时间：2013-01-07T12:54:52.223
> 
> 标签：c#, winforms, button, click, mouse

我对可能是一个简单的解决方案有疑问，但我只是没有做对。因此，如果我按下鼠标左键，我希望发生一些事情。

```
private void DrawingPanel_MouseClick(object sender, MouseEventArgs e)
{  
  if (e.Button == MouseButtons.Left)
  {
   //something happens
  }
} 
```

所以，这很好用。但现在问题来了。现在我想检查点击事件中的更多点击（现在我考虑了一下，这是否可能？）像这样：

```
private void DrawingPanel_MouseClick(object sender, MouseEventArgs e)
{  
  if (e.Button == MouseButtons.Left)
  {
   //something happens
   //blabla...
   if (e.Button == MouseButtons.Left)
   {
    //Do something
   }
  }
} 
```

这样的事情可能吗？因为第二个`if (e.Button == MouseButtons.Left)`总是正确的。我该怎么做才能让它不自动为真？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T13:00:14.050

这不会按照您实现它的方式解决，因为在该处理程序中您仍然处理单击鼠标事件。

请尝试处理[Control.DoubleClick 事件](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.doubleclick.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T13:02:34.737

每次点击都会重新输入`MouseClick`事件（不考虑双击）。
如果您尝试为多次单击过程创建逻辑，一个简单的解决方案是在您的类上维护一个单击计数器：

```
private int clickNo = 0;

private void DrawingPanel_MouseClick(object sender, MouseEventArgs e)
{  
   if (e.Button == MouseButtons.Left)
   {
       clickNo++;
       switch (clickNo)
       {
           case 1: Foo(); break;
           case 2: Bar(); break;
           case 3: Baz(); clickNo = 0; break;
       }
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-19T00:38:35.070

下面模拟具有有限时间跨度的双击以执行两次单击。本例为 300 毫秒。DoubleClick 事件也有效，但只传递 EventArgs 而不是 MouseEventArgs，这严重限制了它的使用。

```
 private int _clicks = 0;
    private void DoWhateverOnDoubleClick(object sender, MouseEventArgs e)
    {
        if(e.Button != MouseButtons.Left)return; // We want left clicks only
        if (++_clicks == 2) 
            DoWhatever(); // if double click then do whatever
        Task.Run(() =>
        {
            Thread.Sleep(300);
            _clicks = 0;
        }); // Reset clicks after 300 ms

    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T13:02:21.950

实际上，您最终会得到 2 次点击事件，因为您有两次点击。如果您正在寻找模拟双击功能或类似功能并且双击事件对您不起作用，我会将有关第一次单击的相关数据以及日期时间存储到某些类范围变量和与第二次点击期间的日期时间进行比较。

# ruby-on-rails - 后台作业后如何将处理后的文件返回到浏览器？

> ID：14196400
> 
> 赞同：0
> 
> 时间：2013-01-07T12:55:03.507
> 
> 标签：ruby-on-rails, jquery, web-applications

我有一个 Rails 应用程序，它在长时间任务后生成报告，并通过后台作业实现。

用户单击显示微调器的按钮，然后触发该后台作业。我想要做的是，当后台作业完成任务时，将创建的文件返回给浏览器。

我正在考虑轮询结果，询问文件是否已创建，但我认为这并不正确。

另一个潜在问题是如果用户在作业完成之前关闭页面/浏览器。

# android - ListView 失去位置跟踪

> ID：14196404
> 
> 赞同：0
> 
> 时间：2013-01-07T12:55:16.840
> 
> 标签：android, listview, garbage-collection, position

我正在开发一个很重的 ListView 应用程序，其中的列表项很重。当用户只有几个列表项时，一切正常，但是当用户添加更多时，一些问题开始浮出水面。与列表项的交互变得更加困难，有时当单击一个项目时，用户会获得触摸效果但没有效果。当访问位置时（这是在使用上下文操作栏[http://developer.android.com/guide/topics/ui/menus.html#CAB](http://developer.android.com/guide/topics/ui/menus.html#CAB)时完成的），单击会引发 NullPointerException。我很确定这是因为我的应用程序中的 GC 杀死了资源。有没有关于如何避免这种行为的一般提示或可能有某种解决方法来解决这个问题？

谢谢！

编辑：

Logcat 崩溃：

```
01-07 15:59:39.219: E/AndroidRuntime(8003): FATAL EXCEPTION: main
01-07 15:59:39.219: E/AndroidRuntime(8003): java.lang.NullPointerException
01-07 15:59:39.219: E/AndroidRuntime(8003):     at     com.simon.holocountownapp.MainActivity$1.onItemCheckedStateChanged(MainActivity.java:104)
01-07 15:59:39.219: E/AndroidRuntime(8003):     at android.widget.AbsListView$MultiChoiceModeWrapper.onItemCheckedStateChanged(AbsListView.java:6037)
01-07 15:59:39.219: E/AndroidRuntime(8003):     at android.widget.AbsListView.setItemChecked(AbsListView.java:1013)
01-07 15:59:39.219: E/AndroidRuntime(8003):     at android.widget.AbsListView.performLongPress(AbsListView.java:2807)
01-07 15:59:39.219: E/AndroidRuntime(8003):     at android.widget.AbsListView$CheckForLongPress.run(AbsListView.java:2765)
01-07 15:59:39.219: E/AndroidRuntime(8003):     at  android.os.Handler.handleCallback(Handler.java:725)
01-07 15:59:39.219: E/AndroidRuntime(8003):     at android.os.Handler.dispatchMessage(Handler.java:92)
01-07 15:59:39.219: E/AndroidRuntime(8003):     at android.os.Looper.loop(Looper.java:137)
01-07 15:59:39.219: E/AndroidRuntime(8003):     at android.app.ActivityThread.main(ActivityThread.java:5191)
01-07 15:59:39.219: E/AndroidRuntime(8003):     at java.lang.reflect.Method.invokeNative(Native Method)
01-07 15:59:39.219: E/AndroidRuntime(8003):     at java.lang.reflect.Method.invoke(Method.java:511)
01-07 15:59:39.219: E/AndroidRuntime(8003):     at  com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:795)
01-07 15:59:39.219: E/AndroidRuntime(8003):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:562)
01-07 15:59:39.219: E/AndroidRuntime(8003):     at dalvik.system.NativeStart.main(Native Method) 
```

第 104 行（在 logcat 中引用）调用 listView.getChildAt(position) 并且这很可能返回导致崩溃的 null。

布局非常繁重（200 多行代码），所以我将其发布到 pastebin。 [http://pastebin.se/KTmCA0jc](http://pastebin.se/KTmCA0jc)

适配器：

```
 @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        CountdownViewHolder holder;
        CountdownItem ci = mTitle.get(position);

    if (convertView == null) {
        convertView = mInflater.inflate(R.layout.list_item_layout, parent,
                false);

        holder = new CountdownViewHolder();
        holder.mTitle = (TextView) convertView.findViewById(R.id.textPrim);
        holder.mSubtitle = (TextView) convertView
                .findViewById(R.id.textSec);
        holder.mOverflow = (ImageButton) convertView
                .findViewById(R.id.overflow);
        holder.mInfo = (ImageButton) convertView.findViewById(R.id.info);
        holder.expand_layout = (LinearLayout) convertView
                .findViewById(R.id.expand_layout);
        holder.mExpDay = (TextView) convertView.findViewById(R.id.exp_day);
        holder.mExpSec = (TextView) convertView.findViewById(R.id.exp_sec);
        holder.mDayProgress = (ProgressBar) convertView
                .findViewById(R.id.day_progress);
        holder.mMonthProgress = (ProgressBar) convertView
                .findViewById(R.id.month_progress);
        holder.mYearText = (TextView) convertView
                .findViewById(R.id.year_text);
        holder.day_help = (TextView) convertView
                .findViewById(R.id.day_help);
        holder.month_help = (TextView) convertView
                .findViewById(R.id.month_help);

        holder.setTag(position);
        holder.setupInfoClickActions();
        holder.setupOnClickListener();
        holder.setTitle(ci.getTitle());
        holder.setSubtitle(ci.getSubtitle());
        holder.fixImageAndText(position);

        convertView.setTag(holder);
    } else {
        holder = (CountdownViewHolder) convertView.getTag();
    }

    holder.manageExpand(ci.getExpand(), ctx, position, mTitle.size());

    return convertView;
} 
```

# sql - 使用top 1时如何检索子查询值

> ID：14196406
> 
> 赞同：1
> 
> 时间：2013-01-07T12:55:21.290
> 
> 标签：sql, subquery, pervasive-sql

我想在查询中加入两个表，从每个表中提取一些信息，但第二个表需要 TOP 1：

这得到了我的人员名单

```
SELECT [Clock no], [Card id], [Current pay cat], [Pay category] 
FROM Employees EMP 
WHERE [Clocked in flag] = 'Y' 
```

现在对于该表中的每个人，我想加入这个查询：

```
SELECT TOP 1 [Start time], Dated FROM [Work records] WR 
WHERE WR.[Clock no] = XXXXXXXXX <- Clock no from first query
AND WR.Dated <= '2013-01-07' AND WR.[Open flag] = 'Y' 
ORDER BY WR.[Dated] DESC, WR.[Start time] DESC 
```

到目前为止我所拥有的是这样的，但我似乎无法在添加 ORDER By 子句后立即使其工作：

```
SELECT EMP.[Clock no], [Card id], [Current pay cat], [Pay category], WRTOP.[Start time], WRTOP.[Dated]
FROM Employees EMP 
LEFT JOIN (
SELECT TOP 1 [Clock no], [Start time], Dated FROM [Work records] WR 
WHERE WR.Dated <= '2013-01-07' AND WR.[Open flag] = 'Y' 
ORDER BY WR.[Dated] DESC, WR.[Start time] DESC
) WRTOP 
ON (EMP.[Clock no] = WRTOP.[Clock no])
WHERE EMP.[Clocked in flag] = 'Y' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T12:56:31.177

子查询返回一行，不一定是 right `Clock no`。只看右边`Clock no`需要子查询和外部表之间的关系。那是不允许的`join`。

一种解决方法是`on`条件中的子查询，例如：

```
SELECT  EMP.[Clock no]
,       EMP.[Card id] 
,       EMP.[Current pay cat]
,       EMP.[Pay category]
,       WR.[Start time]
,       WR.[Dated]
FROM    Employees EMP 
JOIN    [Work records] WR 
ON      WR.[Open flag] = 'Y' 
        AND WR.[Clock no] = EMP.[Clock no]
        AND WR.Dated =
        (
        SELECT  max(Dated)
        FROM    [Work records] WR2
        WHERE   WR2.[Open flag] = 'Y'
                AND WR2.[Clock no] = EMP.[Clock no]
                AND WR2.Dated <= '2013-01-07'
        )
        AND WR.[Start time] =
        (
        SELECT  max([Start time])
        FROM    [Work records] WR3
        WHERE   WR3.[Open flag] = 'Y'
                AND WR3.[Clock no] = EMP.[Clock no]
                AND WR3.Dated = 
                (
                SELECT  max(Dated)
                FROM    [Work records] WR4
                WHERE   WR4.[Open flag] = 'Y'
                        AND WR4.[Clock no] = EMP.[Clock no]
                        AND WR4.Dated <= '2013-01-07'
                )
        )
WHERE EMP.[Clocked in flag] = 'Y' 
```

# java - 使用 Java SE6 时读取包含特殊字符的 ZipEntry

> ID：14196408
> 
> 赞同：1
> 
> 时间：2013-01-07T12:55:32.390
> 
> 标签：java, character-encoding, zip

**用解决方案更新，见底部**

**要求**：
在 Java SE 6 中处理包含文件名中带有特殊字符的文件的 ZIP 文件。由于（ZIP 生产者的）编码不是 UTF-8，特殊字符会被编码。因此，我想将特殊字符更正为正确的代码。

**问题**：
ZIP 包含一个名为`abcüabc.txt`. 该条目通过处理`java.util.zip.ZipEntry`，当打印出单个字符时，我看到这些字符（字节）：

`ü`被编码为
`u`后跟
`¨`

**问题**：
所以我想知道如何将其替换`u¨`为`ü`或者`ue`：

我已经尝试过但没有成功的方法：
`name.replaceAll("u\\¨", "ue");`
或
`name.replaceAll("ü", "ue");`

**原始源代码（不工作）**：

```
InputStream is = new FileInputStream(new File("/Users/me/Desktop/test.zip"));
ZipInputStream zipStream = new ZipInputStream(is);
ZipEntry zipEntry = null;
while ((zipEntry = zipStream.getNextEntry()) != null) {
    String name = zipEntry.getName(); // reading abcüabc.txt
    System.out.println("pos 3: "+name.charAt(3));
    System.out.println("pos 4: "+name.charAt(4));
    System.out.println("is equal to ¨: "+Character.toString(name.charAt(4)).equals("¨"));
} 
```

输出：

```
pos 3: u
pos 4:¨
is equal to ¨: false 
```

**关于我的环境的注意事项**：

在 Mac OS X 10.6.8
Java SE 6 下生成的 Zip：Java HotSpot(TM) 64-Bit Server VM（内部版本 20.12-b01-434，混合模式）

**解决方案**

显然，ZIP 生产者（在我的情况下为 Mac OSX）将特殊字符转换为分解格式。所以 a`ü`被分解成`u¨`.
在从 ZIP 中提取文件名时，我们希望将分解后的格式转换回组合格式，因此我们只需从上面的源代码中插入规范化：

```
InputStream is = new FileInputStream(new File("/Users/me/Desktop/test.zip"));
ZipInputStream zipStream = new ZipInputStream(is);
ZipEntry zipEntry = null;
while ((zipEntry = zipStream.getNextEntry()) != null) {
    String name = zipEntry.getName(); // reading abcüabc.txt
    System.out.println("pos 3: "+name.charAt(3));
    System.out.println("pos 4: "+name.charAt(4));
    System.out.println("contains ü: "+name.contains("ü"));
    name = Normalizer.normalize(name, Form.NFC);
    System.out.println("contains ü: "+name.contains("ü"));
} 
```

输出：

```
pos 3: u
pos 4:¨
contains ü: false
contains ü: true 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T13:04:01.803

那不是`¨`（[U+00A8 DIAERESIS](http://www.fileformat.info/info/unicode/char/a8/index.htm)），而是[U+0308 COMBINING DIAERESIS](http://www.fileformat.info/info/unicode/char/308/index.htm)。

字符是这样拆分的，因为 Mac Os 将文件名存储在规范化表单 D 中，它像这样分解字符。

你可以像这样组合它：

```
String name = zipEntry.getName(); 
name = Normalizer.normalize(name, Form.NFC); 
```

有关[规范化表格的更多信息](http://unicode.org/reports/tr15/)

分音符之间的区别在于它们如何修改或不修改前一个基本字符：

```
 System.out.println( "u" + (char)0xA8); //u¨
    System.out.println( "u" + (char)0x0308); //ü 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T13:03:39.073

您可以使用`apache ant`解决编码问题。

进口`org.apache.tools.zip.*`

```
ZipFile zipFile = new ZipFile(fileName,"you encoding");// you encoding like utf-8 
Enumeration emu = zipFile.getEntries();

while(emu.hasMoreElements()){
  ZipEntry entry = (ZipEntry) emu.nextElement();
  // do something
} 
```

Ant 项目不提供在线文档，这里是另一个文档[http://api.dpml.net/ant/1.7.0/](http://api.dpml.net/ant/1.7.0/)

# c# - 取消屏蔽表单字段的 onBegin 函数有效，但仍将值发送到带有掩码的控制器

> ID：14196414
> 
> 赞同：1
> 
> 时间：2013-01-07T12:55:44.610
> 
> 标签：c#, asp.net, .net, asp.net-mvc

我有一个使用 Ajax 发送的表单。

有一个带掩码的字段，其值如下所示：（此字段是动态添加的）

```
(011) 1111-1111 
```

我有一个删除掩码的 beforeSend 回调函数。

我可以在发送表单之前看到该字段：

```
01111111111 
```

但是在我的控制器中，我得到的值就好像我没有移除面具一样。无法理解为什么！

**形式**

```
@using (Ajax.BeginForm("opImportFile", "Operacao", new AjaxOptions { HttpMethod = "POST", OnBegin = "validation", OnSuccess = "LimparCampos", OnFailure = "LimparCampos" }, new { id = "formUpdStoringSettings" }))
{
        <fieldset>
            <legend>Importação - Arquivo</legend>
        <!--    <h2><a href="#" id="AddAbsPath" class="editBtn" onclick="addArmazenamento();" style="font-size:12px; color:#E17009 !important;"> Adicionar</a></h2>            -->
        <table id="tblArmazenamento">            
                <tr id="@element">                           
                    <td>@Html.Hidden("idCaminhoRepositorio_" + element)
                        @Html.TextBox("caminhorepositorio_" + element, "", new { @class = "validate[required] smallField limpar", disabled = "disabled" })
                        @Html.Hidden("caminhoRepositorio_" + element, "", new { @class = "validate[required] smallField limpar"})</td>
                    <td><a href="#" id="editPath" class="editBtn" onclick="FileTree()"> Localizar</a>
                        <a href="#" id="RemAbsPath_@element" class="editBtn" onclick="removeArmazenamento(@element);" style="color:red !important;"> Remover</a>
                    </td>    
                </tr>
            <tr><td colspan="2">@Html.DropDownListFor(m => m.tipo, new SelectList(Model.tipo, "idTipo", "nomeTipo"), "Escolha um Tipo", new { @class = "validate[required] smallField" })</td></tr>             
            <tr><td colspan="2"><br /></td></tr>
        </table><br />
            <input type="submit" value="Importar" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only button-link" />                    
        </fieldset>         
} 
```

**打回来**

```
function validation() {
    $('.mask').each(function (index) {
        $(this).val($(this).val().replace('(', ''));
        $(this).val($(this).val().replace(')', ''));
        $(this).val($(this).val().replace(/-/g, ''));
        $(this).val($(this).val().replace(/ /g, ''));
        $(this).text($(this).val()); //Here I get an unmaked value
    });
} 
```

**控制器**

```
string[] indicesValues = form["group"].Split(','); //Here I am getting a masked value 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T13:10:24.577

这里发布了一个类似的问题：

[在 ajax.beginform 的 onbegin 上修改发布的输入值](https://stackoverflow.com/questions/4043765/modify-posted-input-values-on-onbegin-of-ajax-beginform)

本质上，您在表单上修改的值并不是浏览器已经序列化的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T13:09:25.660

您正在选择基于“掩码”类来删除掩码，但我没有看到该类的任何控件。您是否错过了有关输入的课程？我相信你的最后一行 javascript 也应该是 .val 而不是 .text。

# ios - UITableViews 上的 Taps 与长按 - 为什么长按时点击不选择行？

> ID：14196416
> 
> 赞同：2
> 
> 时间：2013-01-07T12:55:48.023
> 
> 标签：ios, uitableview

我注意到在模拟器中运行的一些测试代码存在一个错误，`UITableView:tableView:didSelectRowAtIndexPath:`如果我点击表格视图，它不会被触发，但如果我点击并按住几分之一秒就会被触发。0.2 秒似乎是一个神奇的数字。

我注意到另一个项目（不是我的）也有同样的事情，很明显点击不会触发行选择，但长按是。

我一直在拖钓 doco，我读到的所有内容都说水龙头应该可以工作。有没有人知道为什么他们在某些情况下似乎不存在？我错过了某个地方的设置吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T13:31:43.047

找到了。问题是 UITableView 打开了 delaysContentTouches。关闭这种接触会更快地进入细胞。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T13:00:26.553

我认为在触发该方法之前会有一点延迟，`didSelectRowAtIndexPath`因为 UI 子系统必须在点击单元格、滚动表格视图和意外触摸之间进行区分。我不认为这实际上是一个错误。

# reflection - 是否可以在 Smalltalk 中扩展单个对象

> ID：14196417
> 
> 赞同：12
> 
> 时间：2013-01-07T12:55:48.213
> 
> 标签：reflection, smalltalk, pharo, squeak

我正在研究 Smalltalk 反射，我想知道是否有可能像在 Ruby 中那样扩展单个对象。我的意思是一个只有特定对象响应的选择器。

这是一些说明我的意思的 Ruby 代码。澄清一下：在 Ruby 中，这会为此对象打开一个虚拟类，并使用新定义对其进行扩展。这里最重要的部分是类定义没有任何变化！

```
o = Object.new
o.instance_eval {def foo;puts "foo";end}
o.foo #=> "foo"

#however this will fail:
m = Object.new
m.foo #=> NoMethod error 
```

更具体地说，我的问题是这在标准 Squeak/Pharo 或其他 smalltalk 实现中是否可能，而无需添加大量结构或代码来实现这一点。换句话说，Smalltalk 中存在常规反射功能。

例如，可以添加方法、删除方法、将新代码编译到类中、更改实例变量等等，但我还没有找到扩展单个对象的方法。

```
Test addInstVarNamed: #var.
Test compile: 'var ^var'.
t:= Test new.
Test instVarNames.
t instVarNamed: #var put: 666\. 
t var. #=> 666 
```

**如果答案是否定的，请解释原因。我不是要解决这个问题，而是要理解为什么它不在 smalltalk 中。**

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-07T19:16:31.723

在 Smalltalk 中具有特定于实例的行为基本上涉及更改指针类和原始调用。Bob Hinkle、Vicki Jones 和 Ralph E. Johnson 发表于 Smalltalk 报告，第 2#9 卷，1993 年 7 月至 8 月的[“调试对象”文章包含所有解释。](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.57.3575)

我已经从 Bob Hinkle 于 1995 年发布的 VisualWorks 2.0 版本中移植了最初的*轻量级类代码。*VisualWorks 源代码包括分为三个包的代码，分别名为**“ParameterizedCompiler”**、**“Breakpoint”**和**“Lightweight”**。这种划分的原因是出于对具有单独和可重用功能的渴望。他们都在 OOP 期刊上发表了单独的文章。

我的[Squeak/Pharo 端口](http://www.smalltalkhub.com/#!/~hernan/LightweightClasses)包含一个“实例浏览器”，它基于[OmniBrowser](http://rmod.lille.inria.fr/archives/papers/Berg07cOmnibrowser.pdf)（以及[此处的更多文档](https://gforge.inria.fr/frs/download.php/27418/Omnibrowser.pdf)）框架，它允许您通过经典的 Smalltalk 浏览器 UI 浏览和修改添加轻量级行为的实例。它可以在最新的 Squeak 4.x 版本中运行，几乎不需要努力。不幸的是，Pharo 的基础设施从 <= 1.2 版本发生了很大变化，因此它可能需要一些工作才能使用最新版本。

![修改了实例的实例浏览器](../Images/b391215547aebd1b852fc8a5c440c00d.png)

在 VisualWorks 中，由于 VisualWorks GUI 从 2.0 到 7.3 的深刻变化，大部分用于管理轻量级类的工具都没有包括在内。如果有人有兴趣，我可以上传大众 7.3 的包裹

![VisualWorks 中的实例浏览器](../Images/8240bba65d844d9f2a6f1c88359ea0fa.png)

测试轻量级类功能的基本脚本是：

```
| aDate |
aDate := Date today.
aDate becomeLightweight.
aDate dispatchingClass 
        compile: 'day ^42' 
      notifying: nil 
         ifFail: [self error].
aDate day inspect 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-07T13:17:14.327

在 Smalltalk 中，没有内置的方式以这种方式执行特定于实例的行为。Smalltalk 坚持每个对象属于一个类的原则，其行为和状态形状取决于类。这就是为什么您可以轻松更改类（添加 inst 变量、编译新方法等），但这意味着将行为更改为所有实例。但是，有不同的方法（根据 Smalltalk 风格）来实现特定于实例的行为，例如轻量级类，其想法是为特定实例创建一个特殊的（轻量级）类，并用自定义的类替换原始类一。因此，每个“特殊”实例都有一个特殊的类。Digitalk St 中的 AFAIK 调度机制更加灵活，可以轻松实现基于实例的行为（参见第 4 个链接）。我将在这里留下一些您可能会觉得有用的链接：

*   [Smalltalk-80 中的反射设施](http://www.laputan.org/ref89/ref89.html)
*   [阶级战争：阶级与原型](http://www.laputan.org/reflection/warfare.html)
*   [Smalltalk Daily 6/4/09：实例特定行为](http://www.cincomsmalltalk.com/blog/blogView?showComments=true&printTitle=Smalltalk_Daily_6/4/09%3a_Instance_Specific_Behavior&entry=3421558972)
*   [工作 Smalltalker 的实例特定行为](http://www.esug.org/wiki/pier/Conferences/2009/Current%20List%20of%20Talks/Instance-Specific%20Behavior%20for%20the%20Working%20Smalltalker)
*   [评估 Smalltalk 中的消息传递控制技术](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.67.3949&rep=rep1&type=pdf)

高温高压

**编辑：** *Hernan 发布的链接（Hinkle、Jones & Johnson 的“调试对象”）是我所指的但找不到的链接。*

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-08T18:01:44.803

Squeak Etoys 大量使用对象特定的行为和状态。这被实现为“uniclasses”。当你为一个 Etoys 对象（Player 类的实例）创建脚本时，该对象的类将被更改为“uniclass”，即 Player 的唯一子类，它可以有自己的方法（对应于 Etoys 脚本）和实例变量（对应于 Etoys 用户变量）。

其他基于 Squeak 的项目使用“匿名”单类，这些单类未在其超类中列为子类。这意味着它们几乎是不可见的，因为它们不会出现在系统浏览器中，例如（而 Etoys 风格的 uniclass 确实出现在浏览器中）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-08T07:56:46.777

一位[同事](https://stackoverflow.com/users/870500/jorge-ressia)一直在为 Pharo Smalltalk 开发一个新的反射 API，称为*Bifrost*。您可以查看[Bifrost 项目](http://scg.unibe.ch/research/bifrost)的页面。

他的方法将特定于实例的适应作为其核心。一切都是通过将元对象绑定到常规对象以适应它们而发生的。较低级别的元对象可以组合成较高级别、粗粒度的元对象，这些元对象定义了合理的适应，例如，将测量对目标对象的每次调用所花费的时间的分析元对象。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-08T09:41:01.520

正如@ewernli 指出的那样，Bifrost 基本上使 Smalltalk 成为以对象为中心的反射系统。所有反射更改首先针对对象，而不是具有与类的混合机制。您仍然可以在以对象为中心的反射之上进行所有传统的类反射。我认为与这种新方法相关的是我们发现的一些应用程序，它们改进了我们开发和感知实时系统的方式：

[以对象为中心](http://scg.unibe.ch/research/bifrost/OCD)的调试通过专注于对象并允许开发人员保持与活动对象交互而不必在源代码级别插入条件断点，彻底改变了我们的调试方式。

[人才](http://scg.unibe.ch/research/bifrost/talents)是可组合的动态重用单元，就像特征一样，但用于对象。还有很多应用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-07T13:26:47.473

据我所知，在 Ruby 中，方法字典附加到对象上。

在 Smalltalk 中，方法字典绑定到一个`Class`对象，因此，在一个普通的 Smalltalk 图像中，您不能编写类似 eigenclass 的东西。

话虽如此，有几个原型库：[这个问题的答案](https://stackoverflow.com/questions/13084222/implementation-strategies-for-object-orientation)提到了很多。

# sql - 如何使用普通 SQL 获得 nᵗʰ 最高值

> ID：14196427
> 
> 赞同：1
> 
> 时间：2013-01-07T12:56:08.850
> 
> 标签：sql

使用普通 SQL 从结果集中获取第 n^(个最高值的最简单方法是什么？)

结果集会很大，因此也需要考虑性能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-05T18:08:06.397

[这篇文章](http://www.programmerinterview.com/index.php/database-sql/find-nth-highest-salary-sql/)深入讨论了这个问题，我将在下面引用它的代码：

**解决方案 1：**这个找到第 N 高薪的 SQL 应该适用于 SQL Server、MySQL、DB2、Oracle、Teradata 和几乎任何其他 RDBMS：（注意：由于子查询导致性能低下）

```
SELECT * /*This is the outer query part */
FROM Employee Emp1
WHERE (N-1) = ( /* Subquery starts here */
SELECT COUNT(DISTINCT(Emp2.Salary))
FROM Employee Emp2
WHERE Emp2.Salary > Emp1.Salary) 
```

在上面的查询中要理解的最重要的事情是，每次外部查询处理一行时都会评估子查询。换句话说，内部查询不能独立于外部查询来处理，因为内部查询也使用 Emp1 值。

为了找到第 N 个最高的薪水，我们只需要找到恰好比自己大 N-1 的薪水。

* * *

**解决方案二：**在 SQL Server 中使用 TOP 关键字查找第 n 高的薪水

```
SELECT TOP 1 Salary
FROM (
      SELECT DISTINCT TOP N Salary
      FROM Employee
      ORDER BY Salary DESC
      ) AS Emp
ORDER BY Salary 
```

* * *

**解决方案3：**在不使用TOP的情况下，在SQL Server中查找第n个最高薪水

```
SELECT Salary FROM Employee 
ORDER BY Salary DESC OFFSET N-1 ROW(S) 
FETCH FIRST ROW ONLY 
```

请注意，我没有亲自测试过上面的 SQL，我相信它只会在 SQL Server 2012 及更高版本中工作。

* * *

**解决方案 4：**在 MySQL 中工作

```
SELECT Salary FROM Employee 
ORDER BY Salary DESC LIMIT n-1,1 
```

LIMIT 子句在该查询中接受两个参数——第一个参数指定要返回的第一行的偏移量，第二个参数指定要返回的最大行数。

* * *

**解决方案 5：**在 Oracle 中工作

```
select * from (
  select Emp.*, 
row_number() over (order by Salary DESC) rownumb 
from Employee Emp
)
where rownumb = n;  /*n is nth highest salary*/ 
```

* * *

**解决方案 6：**以 Oracle 方式工作 2

```
select * FROM (
select EmployeeID, Salary
,rank() over (order by Salary DESC) ranking
from Employee
)
WHERE ranking = N; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T12:58:50.447

这是 T-SQL（SQL-Server 2005 及更高版本）方法，使用[`ROW_NUMBER`](http://msdn.microsoft.com/en-us/library/ms186734.aspx)：

```
WITH CTE AS
(
   SELECT 
      Col1, Col2, ValueCol,
      RN = ROW_NUMBER() OVER (ORDER BY ValueCol DESC) -- change to ASC if you want lowest first
   FROM 
      dbo.TableName
)
SELECT 
   Col1, Col2, ValueCol
FROM 
   CTE
WHERE 
   RN = @nthhighestvalue 
```

如果您希望所有行具有相同的值，请[`DENSE RANK`](http://msdn.microsoft.com/en-us/library/ms173825.aspx)改用。

[**ROW_NUMBER、RANK 和 DENSE_RANK 之间的区别**](http://mangalpardeshi.blogspot.de/2008/10/difference-between-rownumber-rank-and.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T13:01:37.480

首先生成一个有序的编号数据集，然后从中进行选择。精确的语法取决于 RDBMS，但是，例如，在 Oracle 中，您可以这样做

```
SELECT ROWNUM, SOMEVAL
FROM (SELECT SOMEVAL FROM SOMETABLE ORDER BY SOMEVAL DESC) 
```

鉴于上述设置，您可以

```
SELECT SOMEVAL WHERE ROWNUM = :N 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T19:58:23.523

在甲骨文中：

```
SELECT * FROM (
  SELECT col1, ROW_NUMBER()OVER(ORDER BY col1) rnum_col1 FROM table1
) WHERE rnum_col1 = 10; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-10T20:39:22.133

假设你想找到第 5 高的薪水，你首先按降序排列前 5 个不同的薪水顺序，这样最后一个就是第 5 高的薪水（参见内部查询）。然后，您按升序重新排序并取第一个。

```
SELECT TOP 1 Salary FROM
(
  SELECT DISTINCT TOP 5 Salary
  FROM Employee
  ORDER BY Salary DESC)  t

ORDER BY  Salary ASC 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-07T14:21:16.153

在一般数据库中，您可以使用一个子查询和两个`order by`s. 问题是 top/limit/rownum 语法不是标准的。在某些数据库中，您会编写：

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-07-14T05:42:07.713

子查询将列出前“n”个最高工资值。从该列表中，最小值将是第 n 个最高薪水。

```
`SELECT min(salary) FROM
    (SELECT DISTINCT TOP n salary FROM EmployeeTable ORDER BY salary desc);` 
```

例如：- SQL 查询以查找第三个最高薪水

```
`SELECT min(salary) FROM
    (SELECT DISTINCT TOP 3 salary FROM EmployeeTable ORDER BY salary desc);` 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-01-07T12:57:38.603

您必须承担排序的开销，在我的示例`rownum`中是排序的行号，而不是物理位置。

因为每个人都在使用分析函数来展示它是如何工作的，所以这里是一个：

```
 select foo,bar, max(baz)  
    from  
    (
       select *   
      from  
      (  
          select foo,bar,baz, row_number() over 
          (partition by some_identifier_that_Groups order by  value DESC) rn 
      )    
       where rn = 1  -- get the highest value for each partition    
    ) group by foo,bar 
```

# ios5 - IOS5 如何在数组中保留对象

> ID：14196428
> 
> 赞同：0
> 
> 时间：2013-01-07T12:56:11.463
> 
> 标签：ios5, uiviewcontroller

请帮助，我需要做些什么来保留我的数组'resultArray'中的对象？我使用了“保留”，但没有帮助。在“doMyAction”中访问该数组时有对象，然后我执行“performSegueWithIdentifier”，它连接到 try2FlipsideViewController，在其中我尝试访问第一个控制器中定义的“setText”方法，并且该数组现在没有对象。

实际上我的目标是在翻转控制器中显示一些在主控制器中确定的错误消息。我还尝试将字符串推送为“homeController.resultDisplay.text = self.myTextField.text;” 但它编译并且没有任何反应。

任何帮助或建议将不胜感激，谢谢。

try2MainViewController.m

```
#import "try2MainViewController.h"
#import "try2Model.h"
@interface try2MainViewController ()
@property (nonatomic,strong) try2Model * brain;
@property (retain, nonatomic) NSMutableArray * resultArray;
@end

@implementation try2MainViewController
@synthesize myTextField;
@synthesize brain = _brain;
@synthesize resultArray;  

- (IBAction)doMyAction:(id)sender {

resultArray = [self.brain someMethod];

NSString * resultCode = (NSString *)[resultArray objectAtIndex:0];

if ([resultCode isEqualToString:@"1"]) {

    NSNumberFormatter * myFormat = [[NSNumberFormatter alloc]init];
    [myFormat setPositiveFormat:@"0.##"];
    NSNumber * testNo = (NSNumber *)[resultArray objectAtIndex:1];
    NSString * anca = [myFormat stringFromNumber:testNo];
    self.myTextField.text = [NSString stringWithFormat: @"<< result %@%%",anca]; 

} 

NSString * r = (NSString *)[resultArray objectAtIndex:1];//*&* test

[self performSegueWithIdentifier: @"showAlternate" 
                          sender: self];

}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"showAlternate"]) {

        try2FlipsideViewController * homeController = (try2FlipsideViewController  *)[segue destinationViewController];

    homeController.resultDisplay.text = self.myTextField.text;

    [[segue destinationViewController] setDelegate:self];
    }
}

- (NSString *) setText {
   NSString * r = (NSString *)[resultArray objectAtIndex:1];//*&* test
   return r;
} 
```

try2FlipsideViewController.m

```
#import "try2FlipsideViewController.h"
#import "try2MainViewController.h"

@interface try2FlipsideViewController ()
@property (nonatomic,strong) try2MainViewController * getMain;

@end
@implementation try2FlipsideViewController
@synthesize delegate = _delegate;
@synthesize resultDisplay = _resultDisplay;
@synthesize getMain = _getMain;

-(try2MainViewController *)getMain
{
    if (!_getMain) {
        _getMain = [[try2MainViewController alloc] init];
    }
    return _getMain;
 }

- (void)viewDidLoad
{
    [super viewDidLoad];
     // Do any additional setup after loading the view, typically from a nib.

     r = [self.getMain setText];
     self.resultDisplay.text = r
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T13:35:32.877

在`try2FlipsideViewController`你的调用`getMain`中，它创建了一个全新的`try2MainViewController`类实例；一个`doMyAction`没有被调用`resultArray`也没有被设置。

也许您应该向被调用的方法中添加一个`NSString`属性，并在设置属性的方法中：`try2FlipsideViewController``resultDisplayText``prepareForSegue``try2MainViewController`

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"showAlternate"]) {
        try2FlipsideViewController * homeController = (try2FlipsideViewController  *)[segue destinationViewController];
        homeController.resultDisplayText = [self setText]; // <-- here it is
        [[segue destinationViewController] setDelegate:self];
    }
} 
```

`try2FlipsideViewController`加载时：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.resultDisplay.text = self.resultDisplayText
} 
```

# html - 登录页面有多种形式？

> ID：14196445
> 
> 赞同：0
> 
> 时间：2013-01-07T12:56:46.357
> 
> 标签：html, jsp, servlets

谁能解释一下包含多个表单的登录页面。我的意思是在提交一些详细信息时，它应该转到其他页面，然后我们必须输入一些其他详细信息，然后它应该转到最后一页，输入表单的其他详细信息，最后所有详细信息都存储在数据库中？我们每天都会看到很多包含此类登录表单的站点。你能解释一下第一种形式的数据存储在哪里吗？以及这是如何与一个例子一起工作的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T13:00:15.747

您可以将前两个登录表单中的数据存储在会话数据中，然后最终将其保存在最后一页。该登录页面或每个登录页面都将数据存储在数据库中，但将行的 ID 发布到下一个表单，以便每次更新相同的条目。

有关您要实现的目标的更多信息可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T13:00:22.337

您可以将数据从第一个表单传递到动态服务器页面（例如 PHP），您实际上可以将数据保存在变量中并可以将它们设置在隐藏字段中，并且可以进一步将带有这些隐藏元素的表单重新提交到最终目标服务器页。

```
<input type="hidden" value="xxx"> 
```

xxx = 先前提交的表单中的值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T13:01:49.193

你的意思是提交页面还是点击下一步？

因为每个表单都有一个提交操作，它将数据传输到服务器页面并存储数据。因此，当您单击 Next 时，数据将简单地存储在变量中并加载下一页。变量可以是 Session 或简单变量。最后，当您在最后一页单击提交时，数据已提交。

希望它能消除你的疑问。

# c++ - id3在mfc中显示图片

> ID：14196447
> 
> 赞同：0
> 
> 时间：2013-01-07T12:56:51.097
> 
> 标签：c++, visual-c++, mfc

我想写一个可以编辑 MP3 标签的程序。而这个程序使用的是 MFC SDI。但是，现在，我遇到了一个问题。我已经使用 c++ Win32 控制台应用程序完成了我想要的一切。但我不知道如何用 MFC 在图片控制中显示我的 MP3 封面图片，

这是我在win32中的代码：

```
char* imagefile = "Cover.jpg";
ID3_Tag currentTag;
currentTag.Link("song.mp3",ID3TT_ID3V1 | ID3TT_LYRICS3V2 | ID3TT_MUSICMATCH);
ID3_Frame currentFrame;
currentFrame.SetID(ID3FID_PICTURE);
currentFrame.GetField(ID3FN_MIMETYPE)->Set("image/jpeg");
currentFrame.GetField(ID3FN_PICTURETYPE)->Set(11);
currentFrame.GetField(ID3FN_DATA)->FromFile(imagefile);
currentTag.AddFrame(currentFrame);
currentTag.Update(); 
```

那么，任何人都可以教我如何在使用 MFC 优化校准时显示图片吗？或者，有没有人有其他方法来做同样的事情？对不起，我是MFC的新手。而且我的英语不太好~谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T04:36:20.787

使用[SHLoadImageFile](http://msdn.microsoft.com/en-us/library/bb416681.aspx)加载 jpeg 文件。该函数将返回可以传递给图片控件的 HBITMAP 结构。我假设您为此使用 CStatic。在这种情况下，只需调用

```
m_stPicture.SetBitmap(SHLoadImageFile(imagefile)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T16:39:26.723

大概你会想从内存中的 id3 标签中提取图像，然后显示它。您所做的是使用 id3lib 的 API 提取二进制图像数据（我使用它的时间太长了，我不知道该怎么做），然后使用 CBitmap 解码图像（查找 MSDN 中的函数）然后使用 CStatic 及其 SetBitmap() 函数来设置要在控件中显示的位图。现在，CStatic 很可能不会以您想要的方式显示它，因为 CStatic 非常有限。然后你需要做的是编写你自己的控件，在其中覆盖 OnPaint()，从 CBitmap 中获得一个 DC 和 BitBlt 或 StretchBlt 到 DC。在 codeproject.com 上查看有关如何显示图像和如何制作自定义控件的示例 - 代码太多，无法在此处发表评论。

# dictionary - groovy：安全地在地图中找到一个键并返回它的值

> ID：14196454
> 
> 赞同：57
> 
> 时间：2013-01-07T12:57:33.093
> 
> 标签：dictionary, groovy, closures

我想在给定的地图中找到一个特定的键。如果找到键，我想从地图中获取该键的值。

这是我到目前为止所管理的：

```
def mymap = [name:"Gromit", likes:"cheese", id:1234]

def x = mymap.find{ it.key == "likes" }

if(x)
    println x.value 
```

这有效，输出如预期的那样是“奶酪”。很好，但我不想`x.value`在最后做，我也不想做`if(x)`。我希望 x 以某种方式直接包含该值。

我不能像这样将值直接输入 x ：

```
def mymap = [name:"Gromit", likes:"cheese", id:1234]

def x = mymap.find{ it.key == "likesZZZ" }.value

println x 
```

由于在这种情况下 find 闭包为空，因此会导致空指针异常。当然，上面的代码片段在 时有效`it.key == "likes"`，但我不确定我是否总能在地图中找到目标键。

在地图上执行此操作的“Groovier”和安全方法是什么：

*   检查地图是否有给定的键，
*   如果是这样，得到这个键的值

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-01-07T15:51:49.837

使用地图的重点是直接访问。如果您确定地图中的值永远不会是 Groovy- `false`，那么您可以这样做：

```
def mymap = [name:"Gromit", likes:"cheese", id:1234]
def key = "likes"

if(mymap[key]) {
    println mymap[key]
} 
```

但是，如果该值可能是 Groovy- `false`，则应使用：

```
if(mymap.containsKey(key)) {
    println mymap[key]
} 
```

但是，如果您知道该值不会是 Groovy- `false`（或者您可以忽略它）并且想要一个默认值，那么最简单的解决方案是这样的：

```
def value = mymap[key] ?: "default" 
```

所有这三个解决方案都比您的示例快得多，因为它们不会扫描整个地图以查找键。他们利用`HashMap`（或`LinkedHashMap`）设计使直接密钥访问几乎是即时的。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2017-01-09T14:46:31.997

```
def mymap = [name:"Gromit", id:1234]
def x = mymap.find{ it.key == "likes" }?.value
if(x)
    println "x value: ${x}"

println x.getClass().name 
```

`?.`检查 null 并且不会在 Groovy 中创建异常。如果键不存在，结果将是`org.codehaus.groovy.runtime.NullObject`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-03-08T16:34:48.123

通常，这取决于您的地图包含的内容。如果它有空值，事情可能会变得棘手，`containsKey(key)`或者`get(key, default)`应该用来检测元素是否真的存在。在许多情况下，代码可以变得更简单，您可以定义一个默认值：

```
def mymap = [name:"Gromit", likes:"cheese", id:1234]
def x1 = mymap.get('likes', '[nothing specified]')
println "x value: ${x}" } 
```

还要注意`containsKey()`or`get()`比设置闭包来检查元素要快得多`mymap.find{ it.key == "likes" }`。只有当你真的在那里做了更复杂的事情时，使用闭包才有意义。你可以这样做：

```
mymap.find{ // "it" is the default parameter
  if (it.key != "likes") return false
  println "x value: ${it.value}" 
  return true // stop searching
} 
```

或使用显式参数：

```
mymap.find{ key,value ->
  (key != "likes")  return false
  println "x value: ${value}" 
  return true // stop searching
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-10-10T04:26:27.283

您忘记提及当密钥不存在时会发生什么。我会假设`null`是好的。

* * *

可以使用[属性表示法](https://docs.groovy-lang.org/latest/html/documentation/#_map_property_notation)查询 Groovy 映射。所以你可以这样做：

```
def x = mymap.likes 
```

在这种情况下，`x`将包含`mymap['likes']`如果存在的值，否则将为空。

如果您要查找的键（例如`'likes.key'`）本身包含一个点，那么您可以像这样引用该键：

```
def x = mymap.'likes.key' 
```

如果密钥存储在变量中，请使用带有*属性表示法的*[字符串插值](https://docs.groovy-lang.org/latest/html/documentation/#_string_interpolation)，如下所示：

 *```
def key = 'likes'
def x = mymap."$key" 
```

如果您不喜欢`null`，则使用您使用[elvis 运算符](https://groovy-lang.org/operators.html#_elvis_operator)来分配默认值（类似于[`java.util.Map.getOrDefault`](https://docs.oracle.com/en/java/javase/15/docs/api/java.base/java/util/Map.html#getOrDefault(java.lang.Object,V))）：

```
def x = mymap.someKey ?: 'default value' 
```

* * *

现在你知道了所有的秘密。

请记住，groovy 映射仍然只是具有“[增强](https://docs.groovy-lang.org/latest/html/groovy-jdk/java/util/Map.html)”的 Java 映射，因此适用于 Java 的规则仍然适用于 groovy。值得注意的是，[`java.util.Map`](https://docs.oracle.com/en/java/javase/15/docs/api/java.base/java/util/Map.html)界面中有一条注释，上面写着：

> 一些地图实现对它们可能包含的键和值有限制。例如，一些实现禁止空键和值，而一些实现对其键的类型有限制。尝试插入不合格的键或值会引发未经检查的异常，通常是`NullPointerException`或`ClassCastException`. 尝试查询是否存在不合格的键或值可能会引发异常，或者它可能只是返回 false；一些实现会表现出前一种行为，而另一些会表现出后者。更一般地，尝试对不合格的键或值进行操作，其完成不会导致将不合格的元素插入到映射中，这可能会引发异常，也可能会成功，这取决于实现的选择。此类异常在此接口的规范中被标记为“可选”。

基本上这就是说：*并非所有的地图都是相同的*，所以当你尝试对它们进行这些操作时，请确保你在一定程度上了解你正在处理的地图类型（内部）。对于简单的东西，这应该不是问题，因为**Groovy 默认使用[`java.util.LinkedHashMap`](https://docs.oracle.com/en/java/javase/15/docs/api/java.base/java/util/LinkedHashMap.html)**.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-01-06T17:48:36.163

您获得空指针异常的原因是因为在您的第二个示例中没有键 likesZZZ。尝试：

```
def mymap = [name:"Gromit", likes:"cheese", id:1234]
def x = mymap.find{ it.key == "likes" }.value
if(x)
    println "x value: ${x}" 
```*

# ruby-on-rails - 如何在Mysql中故意插入编码错误的字符串？

> ID：14196455
> 
> 赞同：2
> 
> 时间：2013-01-07T12:57:33.330
> 
> 标签：ruby-on-rails, database, character-encoding, rails-activerecord

这可能是我在 Stackoverflow 中不得不问的最奇怪的问题之一 :)

我有一个旧的、未经测试的 PHP 应用程序，我根本无法触摸。此应用程序使用 Mysql 和每个帐户一个数据库。所以我们有成千上万的数据库。

由于在我开始使用它之前就出现了一个错误，这个应用程序连接到 Mysql 中的错误编码。所以在数据库中，我们应该有“é”的地方我们实际上得到了“é”。虽然在应用程序中（由于错误的连接编码），我们得到了é。

我有一个管理帐户/数据库创建的 Rails 应用程序。问题是 Rails 应用程序使用了正确的编码，当它创建数据库时，它会插入一些 PHP 应用程序无法正确读取的数据。

我的问题：考虑到我在 Ruby 中有一个字符串“é”，我如何故意将其更改为“Ã©”？我可以使用任何 string.encode 吗？

注 1：我无法转储所有数据库并修复此问题（这将是理想的解决方案）

注意 2：我无法切换 Rails 连接编码，因为它使用另一个具有正确编码的数据库

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T13:04:25.123

您可以尝试将默认字符集设置为

```
config.action_controller.default_charset = 'ISO-8859-1' 
```

在 config/application.rb

原始 PHP 编码看起来像是 ISO 8859-1 或 Windows-1252

我在 irb 上试过这个，发现这是有效的

```
1.9.3p194 :002 > puts "é".force_encoding("ISO-8859-1").encode("UTF-8")
Ã©
 => nil 
```

# c# - Linq to sql 进入对象列表

> ID：14196458
> 
> 赞同：0
> 
> 时间：2013-01-07T12:57:38.853
> 
> 标签：c#, linq-to-sql

请考虑下表：

## Tbl文档

```
docID,  levelID, name 
101,    201,     AAA 
102,    201,     BBB 
103,    201,     CCC 
104,    202,     DDD 
105,    202,     EEE 
```

## 表页

```
pgID, docID, pgNo
1,    101,   1
2,    102,   1
3,    102,   2
4,    103,   1
5,    104,   1
6,    105,   1 
```

## 字段名称

```
fieldNameID, levelID, fieldName  
1,           201,     WrittenBy  
2,           201,     VerifiedBy 
3,           201,     DocumentName 
```

## 字段值

```
docID,  fieldNameID, fieldValue 
101,    1,           James 
101,    2,           Bond  
101,    3,           Essay on something  
102,    1,           Krister
102,    2,           Holm
102,    3,           Dame it or not! 
```

* * *

```
public class Document
{
  public int DocID {get; set;}
  public int LevelID {get; set;}
  public string Name {get; set;}

  public List<Field> Metadata
  {
     get { return (_fields); }
     set { _fields = value; }
  }       
  private List<Field> _fields = new List<Field>();
}

public class Field
    {
      public FieldNameID {get; set;}
      public FieldName {get; set;}
      public FieldValue {get; set;}
    } 
```

现在，我正在尝试使用运行良好的 linq 从数据库中获取数据。

```
using (DBDataContext context = new DBDataContext())
{
  List<Document> doc  = (from d in context.TblDocuments
     join p in context.TblPages on d.docID equals p.docID into dpgrp
     from dp in dpgrp.Where(f => f.docID == d.docID).DefaultIfEmpty()
     where d.levelID == 201
     select new Document
     {
       DocumentID = d.docID,
       LevelID = d.levID
     }).ToList<Document>();
 } 
```

有人可以帮助我如何获取列表中的字段值吗？

```
using (DBDataContext context = new DBDataContext())
{
  List<Document> doc  = (from d in context.TblDocuments
     join p in context.TblPages on d.docID equals p.docID into dpgrp
     from dp in dpgrp.Where(f => f.docID == d.docID).DefaultIfEmpty()
     where d.levID == 201
     select new Document
     {
       DocumentID = d.docID,
       LevelID = d.levID
       Metadata = ???????            // how to achieve this? as it is a list
     }).ToList<Document>();
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T13:03:23.073

我建议`DataLoadOptions`用于 L2S

```
options.LoadWith<Document>(d => d.Metadata); 
```

# java - 使用泛型参数覆盖方法

> ID：14196461
> 
> 赞同：0
> 
> 时间：2013-01-07T12:57:46.443
> 
> 标签：java, generics, overriding

我们在类中有一个采用泛型参数的方法

```
public class XYZ {
     public <T extends Animal> someMethod(T animal){}
} 
```

我想在具有特定类型的子类中覆盖此方法，但不知道如何。如何解决这个问题？

```
public class ABC extends XYZ{
  @Override
  public Cat someMethod(Cat animal){}  // error
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T13:02:26.220

一种可能的解决方案是使您的`XYZ`类通用：

```
public class XYZ<T extends Animal> {

    public void someMethod(T animal) {
    }
} 
```

并声明你的`ABC`类是特定于猫的：

```
public class ABC extends XYZ<Cat> {
} 
```

现在你可以写：

```
ABC cats = new ABC();
cats.someMethod(new Cat()); //ok
cats.someMethod(new Dog()); //does not compile 
```

# iphone - 图形中的自动换行

> ID：14196464
> 
> 赞同：1
> 
> 时间：2013-01-07T12:57:54.623
> 
> 标签：iphone, ios, graph, nsstring, word-wrap

我有一个条形图，我需要在其中为每个条写下地名，但有时名称很长。如何根据栏的宽度正确放置全名和换行？

我正在使用以下代码

```
 NSString *percentage = [NSString stringWithFormat:@"%@",item.myTopNameStr];

[percentage drawAtPoint:CGPointMake(_histogramStartX + 5,_xaxisStart.y - _ySpacingScale*item.yValue - 25) forWidth:80 withFont:[UIFont boldSystemFontOfSize:10] lineBreakMode:NSLineBreakByClipping]; 
```

但结果不如预期，我看不到全名。

![在此处输入图像描述](../Images/9831ba6284298e90e42dc81163ecb6c3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T13:20:37.370

```
NSString * percentage = [NSString stringWithFormat:@"%@",item.myTopNameStr];
CGSize percentageSize = [percentage sizeWithFont:[UIFont boldSystemFontOfSize:10] forWidth:80 lineBreakMode:UILineBreakModeWordWrap];

[percentage drawInRect:CGRectMake(_histogramStartX + 5,_xaxisStart.y - _ySpacingScale*item.yValue - 25, percentageSize.width, percentageSize.height) withFont:[UIFont boldSystemFontOfSize:10] lineBreakMode:UILineBreakModeWordWrap alignment:NSTextAlignmentLeft]; 
```

# android - 删除 BasicNameValuePair 周围的括号

> ID：14196467
> 
> 赞同：0
> 
> 时间：2013-01-07T12:58:02.083
> 
> 标签：android, json

当我记录我的名称值对时，我在控制台中得到了这个。

```
01-07 13:51:55.137: I/System.out(723): URL:[data={"id":"69403","timestamp":"07-01-2013 13:51:55","longitude":"-122.084095","latitude":"37.422005"}] 
```

但我需要删除[和]。有人知道怎么做这个吗？

这是执行此操作的android代码。

```
json = new JSONObject(); 
        try { 

            json.put("longitude", longi); 

            json.put("latitude", lat); 
            json.put("timestamp", time); 

            json.put("id", "69403"); 

        } catch (JSONException e) { 
        // TODO Auto-generated catch block 
        e.printStackTrace(); 
        } 

        /// create StringEntity with current json obejct 

        try { 
      //  StringEntity se = new StringEntity(json.toString()); 

            List <NameValuePair> nvps = new ArrayList <NameValuePair>();
            nvps.add(new BasicNameValuePair("data", json.toString()));
            httpost.setEntity(new UrlEncodedFormEntity(nvps, HTTP.UTF_8));
            System.out.println("URL:" + httpost);
            System.out.println("URL:" + nvps);

            System.out.println("send about to do post");
            try {
                response = httpclient.execute(httpost);
                System.out.println("URL:" + httpost);

            } catch (ClientProtocolException e) {
                Toast.makeText(this, e.getMessage(), Toast.LENGTH_SHORT).show();
                e.printStackTrace();
            } catch (IOException e) {
                Toast.makeText(this, e.getMessage(), Toast.LENGTH_SHORT).show();
                e.printStackTrace();
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T13:07:07.203

在不使用 as 的情况下发布您的 jsonObject `BasicNameValuePair`：

```
 StringEntity se = new StringEntity(json.toString()); 
 se.setContentEncoding(new BasicHeader(HTTP.CONTENT_TYPE, "application/json"));
 httppost.setEntity(se); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T13:06:43.977

解决代码：

在输出中使用这样的子字符串

你的输出

```
URL:[data={"id":"69403","timestamp":"07-01-2013 13:51:55","longitude":"-122.084095","latitude":"37.422005"}] 
```

这样做，开始的 6 个单词将被删除或删除

```
String op = yourOutputString.substring(6) 
```

# java - 如何用java中的值创建类似类型驱动的选择（例如图片）

> ID：14196474
> 
> 赞同：0
> 
> 时间：2013-01-07T12:58:29.260
> 
> 标签：java

如果您想创建类似于带有值的类型驱动选择的内容：

![在此处输入图像描述](../Images/029dd39b5a5b5c2e75074b8c34c57a70.png)

在Java中保存这个对象的最好方法是什么（以后用jpa持久化）

我还想稍后对此进行查询以获取例如平均分数（如何处理 NA 值也是需要考虑的事情）。

不知道如何解决这个问题，所以建议会更受欢迎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T13:42:47.700

如果您的值只是数字加 N/A，那么您可以按照 Perception 和 Gavin Xiong 的建议进行操作，并将其作为 NUMBER 列存储在数据库中。我会让列可以为空，并使用 DBNULL 来表示 N/A，正如 Perception 所建议的那样，而不是使用魔法值（甚至是像 -1 这样的“标准”值）。他们都没有解决如何在 Java 代码中表示这一点，但我认为 Java 中的 null 在大多数情况下是到数据库中 DBNULL 的更自然映射，所以我将其表示为整数（对象）而不是 int （原始）带有 null == DBNULL == N/A，除非有理由不这样做。

您自己提出了如何处理 N/A 值的公式（例如 AVERAGE）的边缘情况，并且您需要在这些情况下定义您想要的行为以获得最终答案。您对如何存储这些值的决定也会影响您的公式查询的复杂程度；如果按照 Gavin 建议的方式将值存储为 -1，那么您肯定必须编写一个带有 WHERE 子句的查询，以从平均值中排除这些行（如果这是您想要的行为），而您可能会得到一些如果您将列设为 NULLABLE 并将 DBNULL 存储为 N/A 的值，则免费。

注意：在将 N/A 映射到 DBNULL 之前，您应该非常确定除了 N/A 之外不会有任何非数字值。如果您认为将来很有可能会有其他非数字值，我会认真考虑以不同的方式存储它，因为 DBNULL 只会让您表示一个非数字值。如果您必须走这条路，我会将所有内容作为 VARCHAR 存储在数据库中，然后在 Java 或 SQL/JPA 中添加代码，将数字字符串解析为数字并动态运行您的公式。（你可以使用多个魔法值，如 -1、-2 等，但如果你有多个魔法值，它很快就会变得笨拙。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T13:11:40.983

为什么不把它当作一个单选框并将其映射到一个对象的 int 属性中。取值范围为 0 到 10，NA 可以表示为 -1。

# drupal - 学习 Drupal 7 最好和最快的方法是什么

> ID：14196475
> 
> 赞同：3
> 
> 时间：2013-01-07T12:58:36.403
> 
> 标签：drupal

我是 Drupal 开发的新手，我想快速学习它。

我认为初学者可以从 drupal.org 或阅读一些 Drupal 书籍来学习 Drupal，但开始构建 Drupal 站点可能需要几个月的时间。

有没有更好的学习 Drupal 开发的方法，以便我可以在几周而不是几个月内开始构建 Drupal 站点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T13:11:02.753

对我来说，我安装了 drupal，并在 drupal.org 上测试了每个模块和每个主题，但如果你说法语，我向你推荐这个[网站](http://www.drupalfacile.org/)，它非常有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T13:26:12.607

我是 Drupal 开发人员/培训师，主要使用[http://drupalize.me/](http://drupalize.me/)来培训人员。虽然它不是免费的，但它是学习 Drupal 的最佳方式。您应该从以下内容开始，以便在 Drupal 中快速学习和构建站点，

1.  [使用 Drupal 7 系列进行网站建设](http://drupalize.me/series/site-building-drupal-7-series)
2.  [Site Builders 系列的字段简介](http://drupalize.me/series/intro-fields-site-builders-series)
3.  [Drupal 7 系列视图介绍](http://drupalize.me/series/intro-views-drupal-7-series)

要了解各种模块以及它们是如何工作的，您可以查看此站点[http://codekarate.com/](http://codekarate.com/)，其中每天都会添加新视频。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T13:02:31.223

学习任何东西的最好方法就是使用它。所以你应该开始一个项目并开始工作。还有 Drupal 聚会和 Drupal 训练营，您可以向其他用户学习。

# java - 如何在不修改 java.policy 文件的情况下授予我的小程序打印权限

> ID：14196476
> 
> 赞同：1
> 
> 时间：2013-01-07T12:58:42.143
> 
> 标签：java, printing, permissions, applet, policyfiles

嗨，我想授予

```
permission java.lang.RuntimePermission "queuePrintJob"; 
```

对我的 java 小程序的权限，该小程序在 java 中以编程方式在客户端计算机上运行。因为我无法更改客户端的 java.policy 类。
我的小程序就像

```
<applet name="printBarCode" code="printBarCode.TestPrinting2.class" archive="./printBarCode/printBarCode.jar" width="0" height="0"> </applet> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T13:04:54.500

您可以在这里采用基本上 2 种策略：

*   对小程序进行数字签名，并在出现提示时让用户单击`Run`。
    有关详细信息，请参阅[签署和验证 JAR 文件](http://docs.oracle.com/javase/tutorial/deployment/jar/signindex.html)。
*   [使用Java Web Start](https://stackoverflow.com/tags/java-web-start/info)在更新的 JRE 中部署小程序并使用`PrintService`JNLP API 进行打印。这是一个[演示。的`PrintService`](http://pscode.org/jws/api.html#prs)。

# c++ - QApplication 声明“修改”程序结果

> ID：14196478
> 
> 赞同：1
> 
> 时间：2013-01-07T12:58:47.073
> 
> 标签：c++, qt, cimg

我目前正在使用 Qt 编程，但有一个我不明白的问题。我不确定这是由 Qt 引起的。

我有这个代码：

```
cimg_library::CImg<float> img = model->convert("photo.jpg", 15);
model->save(img, "resIhm.jpg"); 
```

这很好用，但是当我引入一些 QT 代码（这里是 QApplication 对象的声明）时，方法“convert”有不同的结果..

```
QApplication *app = new QApplication(argc,argv);    
cimg_library::CImg<float> img = model->convert("photo.jpg", 15);
model->save(img, "resIhm.jpg"); 
```

但如果我这样做：

```
cimg_library::CImg<float> img = model->convert("photo.jpg", 15);
model->save(img, "resIhm.jpg");
QApplication *app = new QApplication(argc,argv); 
```

它再次起作用。事实上，这两行代码通常在 Qt SLOT 中执行，所以我必须先声明我的 QApplication 对象。

我确信没有 QApplication 声明它可以工作。这段代码在我的主要功能中，用于调试目的。

此外，当我使用 QCoreApplication 时，它也可以工作。Qt 是否修改 C++ 流？

谢谢你的帮助 ：）

ps：我的 Model 类中没有使用 Qt。

编辑：使用的模型函数（目的是将图像转换为 ASCII 艺术）：

```
CImg<float> Model::convert(const char* source, int tailleCaracteres) const throw (ConversionException) {
try {
  CImg<float> image(source);

  image.normalize(0,50);
  int nbRef = 95;
  CImgList<float> refCode(nbRef, tailleCaracteres, tailleCaracteres, 1, 3);

  float white[3] = {255,255,255};
  float black[3] = {0,0,0};

  int i = 0;
  for (char l=' '; l<='~'; l++) {
    if(l == '%') {
  char ch[3] = "";
  ch[0] = '%';
  ch[1] = l;
  ch[2] = '\0';
  refCode(i).draw_text(0, 0, ch, white, black, 1, tailleCaracteres);
    } else {
  char ch[2] = "";
  ch[0] = l;
  ch[1] = '\0';
  refCode(i).draw_text(0, 0, ch, white, black, 1, tailleCaracteres);
    }
    i++;
  }
  CImg<float> imgDest;
  CImgList<float> cols = image.get_split('y', -tailleCaracteres);

  for(unsigned int i=0; i<cols.size(); i++) {
    CImgList<float> rows = cols(i).get_split('x', -tailleCaracteres);
    CImg<float> destRows;

    for(unsigned int j=0; j<rows.size(); j++) {
      int indice = recupImgProcheErreur(rows(j), refCode);
  destRows.append(refCode(indice), 'x');
}
    imgDest.append(destRows, 'y');
  }
  return  imgDest;
}
catch (CImgIOException exp) {
  throw ConversionException(std::string(exp.what())); 
}
}

int Modele::calculErreur(CImg<float> img, CImg<float> car) const {
  int erreur = 0;
  cimg_forX(img, i) {
    cimg_forY(img, j) {
        erreur += img(i,j,0,0) - car.atXY(i,j);
    }
  }
  return erreur;
}

void Modele::save(CImg<float> img, const char* pathDestination) const {
  img.save(pathDestination);
} 
```

Valgrind 告诉我这一行有问题（条件跳转或移动取决于未初始化的值）： erreur += img(i,j,0,0) - car.atXY(i,j);

我今天下午试图修复它，但失败了。我知道它带有 car.atXY(i,j) （我认为它与 car(i,j,0,0) 相同）。

抱歉，如果您不理解变量名称，它是法语的，但请随时问我 :)

# java - 如何知道 Open Office Java API 中的属性值

> ID：14196480
> 
> 赞同：2
> 
> 时间：2013-01-07T12:58:53.703
> 
> 标签：java, api, openoffice.org, openoffice-writer

要使用 XPropertySet 的`setPropertyValue()`方法，我需要知道要在方法内部传递的参数。
例如，要在 OpenOffice Writer 中为文本下划线，我使用`xTextProps.setPropertyValue("CharUnderline", com.sun.star.awt.FontUnderline.BOLD);`该文本下划线，类似地，想知道**CharUnderline**等所有属性的名称，以便在 OpenOffice Writer 中执行其他任务。

我怎么知道这些属性的名称。

请建议。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2017-07-19T08:14:14.353

此处列出了文本对象的属性

[https://wiki.openoffice.org/wiki/Documentation/DevGuide/Text/Formatting](https://wiki.openoffice.org/wiki/Documentation/DevGuide/Text/Formatting)

“CharFontName”、“CharFontStyleName”、“CharFontFamily”、“com.sun.star.awt.FontFamily”、“CharFontCharSet”、“com.sun.star.awt.CharSet”、“CharFontPitch”、“com.sun.star” .awt.FontPitch”、“CharColor”、“CharEscapement”、“CharHeight”、“CharUnderline”、“com.sun.star.awt.FontUnderline”、“CharWeight”、“com.sun.star.awt.FontWeight”、 “CharPosture”、“com.sun.star.awt.FontSlant”、“CharAutoKerning”、“CharBackColor”、“CharBackTransparent”、“CharCaseMap”、“com.sun.star.style.CaseMap”、“CharCrossedOut”、“CharFlash ", "CharStrikeout", "com.sun.star.awt.FontStrikeout", "CharWordMode", "CharKerning"、"CharLocale"、"com.sun.star.lang.Locale"、"CharKeepTogether"、"CharNoLineBreak"、"CharShadowed"、"CharFontType"、"com.sun.star.awt.FontType"、"CharStyleName" 、“CharContoured”、“CharCombineIsOn”、“CharCombinePrefix”、“CharCombineSuffix”、“CharEmphasis”、“com.sun.star.text.FontEmphasis”、“CharRelief”、“RubyText”、“RubyAdjust”、“RubyCharStyleName”、“ RubyIsAbove”、“CharRotation”、“CharRotationIsFitToLine”、“CharScaleWidth”、“HyperLinkURL”、“HyperLinkTarget”、“HyperLinkName”、“VisitedCharStyleName”、“UnvisitedCharStyleName”、“CharEscapementHeight”、“CharNoHyphenation”、“CharUnderlineColor”、“Color”、“CharUnderlineHasColor”、“CharStyleNames”、“CharHidden”、“TextUserDefinedAttributes”、“XNameContainer”

# html - IE9 中不显示背景 CSS

> ID：14196486
> 
> 赞同：0
> 
> 时间：2013-01-07T12:59:13.643
> 
> 标签：html, css, image, background-image

我尝试了这些代码，但由于某种原因，IE9 中没有显示背景。兼容模式已关闭，它在 IE9 模式下运行。它在 IE 10、Chrome 和 Firefox 中运行良好。

```
body {
  background : url('/img/fade.png') repeat-x,
  url('/img/fadeh.png') repeat-y,
  url('/img/bg.png') repeat,
  ;
} 
```

第二次尝试：

```
body {
  /*background-image: url(img/fade.png), url(img/fadeh.png), url(img/bg.png);
  background-repeat: repeat-x, repeat-y, repeat;*/
} 
```

任何帮助表示赞赏！

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T13:04:39.663

尝试

```
<!DOCTYPE html> 
```

ie9 在没有带有多个背景图像的文档类型的情况下中断

编辑：

也试试你的CSS

```
body {
    height:100%;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T13:05:10.213

这是因为您添加`,`了最后一个背景网址。

换成这个

```
body{
   background:url('/img/fade.png') repeat-x,
   url('/img/fadeh.png') repeat-y,
   url('/img/bg.png') repeat;
} 
```

**示例 jsFiddle 演示：http:** [//jsfiddle.net/enve/5p4GS/](http://jsfiddle.net/enve/5p4GS/)

# c# - ProtoBuf-Net 错误消息“源数据中的无效字段：0”

> ID：14196488
> 
> 赞同：3
> 
> 时间：2013-01-07T12:59:29.727
> 
> 标签：c#, serialization, deserialization, protobuf-net

我成功序列化了以下类的实例，但是当我在收到以下错误消息后立即尝试反序列化时`" Invalid field in source data: 0"`：

我不知道它指的是什么，因为我直接在下面找到了。我刚刚将 protobuf-net 版本更新为 2.00.614（运行时版本：2.0.50727）。

知道我是否可能忽略了一些微不足道的事情吗？

```
[ProtoContract]
public class TimeSeriesProperties 
{
    [ProtoMember(1)]
    public string TimeSeriesName { get; private set; }
    [ProtoMember(2)]
    public string FileName { get; private set; }
    [ProtoMember(3)]
    public string TemplateName { get; private set; }
    [ProtoMember(4)]
    public int PacketLength { get; private set; }
    [ProtoMember(5)]
    public long FileSizeBytes { get; set; }
    [ProtoMember(6)]
    public long NumberRecords { get; set; }
    [ProtoMember(7)]
    public DateTime DateTimeStart { get; set; }
    [ProtoMember(8)]
    public DateTime DateTimeEnd { get; set; }

    public TimeSeriesProperties()
    {

    }

    public TimeSeriesProperties(string timeSeriesName, string fileName, string templateName, int PacketLength)
    {
        this.TimeSeriesName = timeSeriesName;
        this.FileName = fileName;
        this.TemplateName = templateName;
        this.PacketLength = PacketLength;
    }

}

public static byte[] Serialize_ProtoBuf<T>(T serializeThis)
    {
        using (var stream = new MemoryStream())
        {
            ProtoBuf.Serializer.Serialize<T>(stream, serializeThis);
            return stream.GetBuffer();
        }
    }

    public static T Deserialize_ProtoBuf<T>(byte[] byteArray)
    {
        using (var stream = new MemoryStream(byteArray))
        {
            return ProtoBuf.Serializer.Deserialize<T>(stream);
        }
    } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-07T13:40:46.647

我见过的最常见的原因只是不正确地使用`GetBuffer()`on a `MemoryStream`。当我添加评论时，这已经是我的预感，但你已经确认了：

```
using (var stream = new MemoryStream())
{
    ProtoBuf.Serializer.Serialize<T>(stream, serializeThis);
    return stream.GetBuffer();
} 
```

`GetBuffer`返回过**大**的后备缓冲区。它的末尾有垃圾。使用 是完全可以的`GetBuffer`，**只要**您还记录`.Length`，这是其中的**有效数据**量。这可以避免对潜在的大数组进行额外分配。但是在您的情况下，可能使用一种更简单的方法`ToArray()`来获取*大小合适的*缓冲区：

```
using (var stream = new MemoryStream())
{
    ProtoBuf.Serializer.Serialize<T>(stream, serializeThis);
    return stream.ToArray();
} 
```

# function - 普通 lisp 中非常奇怪的错误

> ID：14196494
> 
> 赞同：0
> 
> 时间：2013-01-07T13:00:10.613
> 
> 标签：function, command-line, common-lisp

这真的让我很头疼

我在文件中编写了以下简单函数。

```
 (defun find-num (string)
   (if (> (length string) 1)
       (parse-integer (remove (coerce (get-first-letter string)
                                      'character)
                              string))
     ;else
     1)) 
```

它的作用是在删除第一个字母后从字符串“a23”中解析数字。我假设只有第一个字符是*字母*，其余的是“数字”。

我加载文件，当我尝试运行该函数时，它给了我错误，说： **正确的列表不能以“a3”结尾......什么？？？**

但是，当我直接在命令行中复制并粘贴相同的代码时，该函数可以正常工作。

这是什么 ？常见的 lisp 错误？还是有什么我没有看到？

```
 ;; Loading file C:\Users ... (hidden)
 ;; Loaded file C:\Users ... (hidden)
 T
 [2]> (find-num "a3")

 *** - ENDP: A proper list must not end with "a3"
 The following restarts are available:
 ABORT          :R1      Abort main loop
 Break 1 [3]> :a

 [4]> (defun find-num (string)
   (if (> (length string) 1)
  (coerce (get-first-letter string) 'character) string))

     ;else
     1))
 WARNING: DEFUN/DEFMACRO: redefining function FIND-NUM in top-level, was
     defined in C:\Users\.... (hidden)
 FIND-NUM
 [5]> (find-num "a3")
 3 ;
 1 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T14:08:17.600

顺便提一句。：

```
(parse-integer (remove (coerce (get-first-letter string)
                               'character)
                       string)) 
```

只是

```
(parse-integer (remove (aref string 0) string)) 
```

更好：

```
(parse-integer (subseq string 1)) 
```

是最好的

```
(parse-integer string :start 1) 
```

# java - Java 意外输出

> ID：14196503
> 
> 赞同：0
> 
> 时间：2013-01-07T13:00:27.503
> 
> 标签：java

有人可以解释一下我是如何得到这个答案的：

> 三乘二 = 6

代码：

```
public class Params1 {
    public static void main(String[] args) {
        String one = "two";
        String two = "three";
        String three = "1";
        int number = 20;
        sentence(one, two, 3);
    }

    public static void sentence(String three, String one, int number) {
        String str1 = one + " times " + three + " = " + (number * 2);
    }

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-07T13:07:33.610

这是一个有用的图表：

![在此处输入图像描述](../Images/a1745a9f86aa00779024a58cfa4426b5.png)

我希望这很清楚。

以下是如何让相同的代码不那么混乱：

```
 public static void main(String[] args) {
        String a = "three";
        String b = "two";
        sentence(a, b, 3);
    }

    public static void sentence(String a, String b, int number) {
        String str1 = a + " times " + b + " = " + (number * 2);
        System.out.println(str1); // to let you inspect the value
    } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-07T13:04:33.173

在调用`sentence()`

```
sentence(one, two, 3); 
```

只是为了参数的缘故，用它们的值替换所有变量：

```
sentence( "two", "three", 3); 
```

然后看看该函数内的参数得到什么值：

```
three == "two"
one == "three"
number == 3 
```

然后替换您生成的句子中的参数，您就有了结果！

此外，您的变量名称并不是真正不言自明的。您应该重新考虑它们以防止此类误解。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T13:10:23.567

```
String str1 = one + " times " + three + " = " + (number * 2); 
```

这里`one`== `two`==“三”

和 `three`== `one`== “两个”

和`number`== 3

所以你把它拿出来了。你最好参考：[JAVA方法帮助](http://docs.oracle.com/javase/tutorial/java/javaOO/methods.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T13:03:15.493

真的很难猜出你想在这里实现什么。当然，您不希望将“字符串”文字解释为实际数值......

更正您的变量值：

```
String one = "one";
String two = "two"; 
```

和：

```
sentence(three, one, 3); 
```

和：

```
public static void sentence(String three, String one, int number) {
    String str1 = one + " times " + three + " = " + (number);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-07T13:03:36.460

您将 3 作为“句子”方法的参数。

```
sentence(one, two, 3); 
```

将其更改为

```
sentence(one, two, number); 
```

# windows - 为什么进程不能在 32 位系统中处理 4GB 内存？

> ID：14196506
> 
> 赞同：1
> 
> 时间：2013-01-07T13:00:42.177
> 
> 标签：windows, system, 32bit-64bit, 32-bit

有人知道为什么在 32 位 Windows 系统中进程无法寻址 4GB 内存而只能寻址 2GB 的原因吗？

它只是Windows系统的限制吗？

注意：我指的不是可寻址的总内存，而是单个进程可以寻址的内存。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T13:50:05.700

> 为什么在 32 位 Windows 系统中进程无法寻址 4GB 内存

但他们肯定可以。您的代码通常不具备寻址地址空间上部所需的访问权限。用户模式代码在 ring 3 运行，要到达上半部分，您需要 ring 0 访问权限。内核模式。

好吧，这有点开玩笑，操作系统内核和具有 ring 0 访问权限的驱动程序通常不被认为是进程的一部分。即使它们在逻辑上是，它们在每个进程中都映射到相同的地址。从技术上讲，当进程从 ring 3 切换到 ring 0 模式时，动态映射页面是可能的，但这会使内核模式转换过于昂贵和繁琐。

直观地说：由 ReadFile() 填充的文件缓冲区可能具有与一大块操作系统代码或数据重叠的地址。最坏的情况是，它可能与文件系统驱动程序代码重叠。或者，更有可能是文件系统缓存。所需的翻页和双份复印会使阅读变得异常缓慢。最简单的架构选择，也是在 1992 年做出的选择，当时没有人有钱买得起 1GB 的 RAM，就是简单地将地址空间一分为二，这样就不可能有重叠。

否则这是一个已解决的问题，32 位版本的 Windows 越来越少，一个 32 位进程*可以*在 64 位版本的 Windows 上处理 4 GB。它只需要 EXE 标头中的选项位，由链接器和 editbin.exe 中的 /LARGEADDRESSAWARE 选项设置的选项位

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T13:16:21.903

简单的答案是保留一些虚拟地址空间供操作系统将内容映射到其中，例如它自己的内存空间、VM 页表、硬件设备等。

从理论上讲，它可以提供更多可用（实际上，您可以告诉 Windows 让您拥有 ~3GB，尽管默认情况下不会启用它，以防某些软件/驱动程序/等出现问题），但您不会得到完整的 4GB，而不会削弱操作系统有效运行系统的能力。

即使您在 Windows 上将用户空间扩展到 3GB，默认情况下应用程序也不会获得额外的范围。Windows 要求应用程序设置一个标志（在 MSVC 下使用 /LARGEADDRESSAWARE 构建，不知道其他构建环境）或限制为 2GB，以避免软件对地址进行假设而导致的任何问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T13:22:24.877

32 位 Windows 系统在用户和系统之间平均分配 4GB 虚拟内存范围，这样每个系统只有 2GB 的（虚拟）可用空间。

请参阅：http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa366912%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366912%28v=vs.85%29.aspx)

# ruby-on-rails-3 - Rails 3.2.8 Record `save' 方法执行没有错误，但没有更改数据库

> ID：14196511
> 
> 赞同：1
> 
> 时间：2013-01-07T13:00:57.810
> 
> 标签：ruby-on-rails-3

这是rails控制台中的输出：

```
Loading development environment (Rails 3.2.8)
irb(main):001:0> u=User.first
  User Load (0.2ms)  SELECT "users".* FROM "users" LIMIT 1
=> #<User id: 1, name: "scorpio_et", passwd: "xxx", updated_at: "2013-01-07 12:09:26",expire_time: "2000-01-01 12:09:15">
irb(main):002:0> u.expire_time=Time.now
=> 2013-01-07 20:16:39 +0800 
```

然后我执行 u.save ，从输出来看似乎有效

```
irb(main):003:0> u.save
  (0.1ms)  begin transaction
  (0.5ms)  UPDATE "users" SET "expire_time" = '2013-01-07  12:16:39.628766', "updated_at" = '2013-01-07 12:16:42.816250' WHERE "users"."id" = 1
  (85.9ms)  commit transaction
=> true 
```

但是当我从数据库中获取时，“expire_time”字段没有改变

```
irb(main):004:0> User.first
  User Load (0.4ms)  SELECT "users".* FROM "users" LIMIT 1
=> #<User id: 1, name: "scorpio_et", passwd: "xxx",  updated_at: "2013-01-07 12:16:42", expire_time: "2000-01-01 12:16:39"> 
```

当我使用`save!' ,it didn't throw exception,and the output is identical with the`save' 时。但我可以更新其他字段。这是 schema.rb： ActiveRecord::Schema.define(:version => 20130107073652) 做

```
 create_table "users", :force => true do |t|
    t.string   "name"
    t.string   "passwd"
    t.string   "jsoncookie"
    t.datetime "created_at",  :null => false
    t.datetime "updated_at",  :null => false
    t.time     "expire_time"
 end 
```

我注意到`expire_time' field is`时间'，但我认为它应该是'日期时间'

我的迁移是： class AddExpireTimeToUsers < ActiveRecord::Migration def change add_column :users, :expire_time, :datatime end end

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T13:51:14.783

记录被更新（比较时间`12:09:15`-> `12:16:39`）但看起来像`expire_time`has`time`类型，而不是`datetime`。所以日期部分不存储在数据库中。

# linq - 使用 Linq 使用新生成的密钥列出 ToDictionary

> ID：14196512
> 
> 赞同：0
> 
> 时间：2013-01-07T13:01:04.867
> 
> 标签：linq, dictionary

我有一个对象列表，我想用新的索引键将它们变成字典。这是一个简单的例子：

原文：
《阿尔法》
《贝塔》
《查理》

我想要：
1、“阿尔法”
2、“贝塔”
3、“查理”

我可以这样解决：

```
void Main()
{
    var slist = new List<string>();
    slist.Add("alpha");
    slist.Add("beta");
    slist.Add("charlie");

    int i=0;
    var v = slist.ToDictionary (s => i++ );

    slist.Dump();
    v.Dump();
} 
```

有没有更短/更智能的方法来解决这个问题？例如避免 int i = 0 在查询前的行中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T13:06:43.163

您可以使用的重载`Select`来获取索引。

```
var v = slist.Select((s,i) => new {s, i})
             .ToDictionary(x => x.i + 1,  x => x.s); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T13:06:00.793

```
var v = slist.ToDictionary(s => slist.IndexOf(s) + 1); 
```

# android - 如何自定义android图表引擎饼图

> ID：14196515
> 
> 赞同：1
> 
> 时间：2013-01-07T13:01:07.103
> 
> 标签：android, achartengine

1.如何在饼图切片而不是标签上显示值。这里我正在使用以下内容，但它不适用于我。

```
 seriesRenderer.setDisplayChartValues(true); 
```

2.如何将饼图显示在屏幕左侧而不是屏幕中间。我正在使用以下功能，但它对我不起作用。

```
 mRenderer.setMargins(new int[]{ 40, 90, 25, 10 });
        mRenderer.setScale(0.5f);
        mChartView.repaint(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T14:57:11.290

[对于第一个问题，您可以在此处](http://www.achartengine.org/download/)下载中间版本。

对于第二个问题，有一个未解决的问题，因此尚不支持。

# asp.net - 在 ASPNETDB.MDF 中创建“今天”列时，getdate() 不会是常量

> ID：14196517
> 
> 赞同：0
> 
> 时间：2013-01-07T13:01:14.547
> 
> 标签：asp.net, database, sql-server-2005

我在 ASPNETDB.MDF 中设置了一个名为“Today”的列，我只想在其中输入当前日期时间。我正在使用 getdate() 但它无法自动更新更新当前时间。假设用户在 2013 年 1 月 5 日晚上 9:24:08 创建了他/她的帐户，然后“今天”列显示 2013 年 1 月 5 日晚上 9:24:08，很好，但它不断设置，我想要' Today' 列将填充当前时间，例如 2013 年 1 月 7 日晚上 11:24:08，“今天”列在每行显示 2013 年 1 月 7 日晚上 11:24:08。

如果有人帮助我，我将不胜感激。

N:B: IMA BEGINNER，我认为这里有各种已解决的线程，我已经看过了，但很困惑哪一个适合我的问题。所以这个问题很无理取闹，我很抱歉。

```
 ALTER PROCEDURE dbo.aspnet_Membership_CreateUser
@ApplicationName                        nvarchar(256),
@UserName                               nvarchar(256),
@Password                               nvarchar(128),
@PasswordSalt                           nvarchar(128),
@Email                                  nvarchar(256),
@PasswordQuestion                       nvarchar(256),
@PasswordAnswer                         nvarchar(128),
@IsApproved                             bit,
@DaysLeft                               numeric(18, 0),
@CurrentTimeUtc                         datetime,
@CreateDate                             datetime = NULL,
@ExpiryDate                             datetime = NULL,
@UniqueEmail                            int      = 0,
@PasswordFormat                         int      = 0,
@UserId                                 uniqueidentifier OUTPUT 
```

AS BEGIN DECLARE @ApplicationId uniqueidentifier SELECT @ApplicationId = NULL

```
DECLARE @NewUserId uniqueidentifier
SELECT @NewUserId = NULL

DECLARE @IsLockedOut bit
SET @IsLockedOut = 0

DECLARE @LastLockoutDate  datetime
SET @LastLockoutDate = CONVERT( datetime, '17540101', 112 )

DECLARE @FailedPasswordAttemptCount int
SET @FailedPasswordAttemptCount = 0

DECLARE @FailedPasswordAttemptWindowStart  datetime
SET @FailedPasswordAttemptWindowStart = CONVERT( datetime, '17540101', 112 )

DECLARE @FailedPasswordAnswerAttemptCount int
SET @FailedPasswordAnswerAttemptCount = 0

DECLARE @FailedPasswordAnswerAttemptWindowStart  datetime
SET @FailedPasswordAnswerAttemptWindowStart = CONVERT( datetime, '17540101', 112 )

DECLARE @NewUserCreated bit
DECLARE @ReturnValue   int
SET @ReturnValue = 0

DECLARE @ErrorCode     int
SET @ErrorCode = 0

DECLARE @TranStarted   bit
SET @TranStarted = 0

IF( @@TRANCOUNT = 0 )
BEGIN
    BEGIN TRANSACTION
    SET @TranStarted = 1
END
ELSE
    SET @TranStarted = 0

EXEC dbo.aspnet_Applications_CreateApplication @ApplicationName, @ApplicationId OUTPUT

IF( @@ERROR <> 0 )
BEGIN
    SET @ErrorCode = -1
    GOTO Cleanup
END

SET @CreateDate = DATEADD(hour, +6, @CurrentTimeUtc)
SET @ExpiryDate = DATEADD(day,365, @CreateDate)
SET @DaysLeft = DATEDIFF(day, @CurrentTimeUtc, @ExpiryDate);

SELECT  @NewUserId = UserId FROM dbo.aspnet_Users WHERE LOWER(@UserName) = LoweredUserName AND @ApplicationId = ApplicationId
IF ( @NewUserId IS NULL )
BEGIN
    SET @NewUserId = @UserId
    EXEC @ReturnValue = dbo.aspnet_Users_CreateUser @ApplicationId, @UserName, 0, @CreateDate, @NewUserId OUTPUT
    SET @NewUserCreated = 1
END
ELSE
BEGIN
    SET @NewUserCreated = 0
    IF( @NewUserId <> @UserId AND @UserId IS NOT NULL )
    BEGIN
        SET @ErrorCode = 6
        GOTO Cleanup
    END
END

IF( @@ERROR <> 0 )
BEGIN
    SET @ErrorCode = -1
    GOTO Cleanup
END

IF( @ReturnValue = -1 )
BEGIN
    SET @ErrorCode = 10
    GOTO Cleanup
END

IF ( EXISTS ( SELECT UserId
              FROM   dbo.aspnet_Membership
              WHERE  @NewUserId = UserId ) )
BEGIN
    SET @ErrorCode = 6
    GOTO Cleanup
END

SET @UserId = @NewUserId

IF (@UniqueEmail = 1)
BEGIN
    IF (EXISTS (SELECT *
                FROM  dbo.aspnet_Membership m WITH ( UPDLOCK, HOLDLOCK )
                WHERE ApplicationId = @ApplicationId AND LoweredEmail = LOWER(@Email)))
    BEGIN
        SET @ErrorCode = 7
        GOTO Cleanup
    END
END

IF (@NewUserCreated = 0)
BEGIN
    UPDATE dbo.aspnet_Users
    SET    LastActivityDate = @CreateDate
    WHERE  @UserId = UserId
    IF( @@ERROR <> 0 )
    BEGIN
        SET @ErrorCode = -1
        GOTO Cleanup
    END
END

INSERT INTO dbo.aspnet_Membership
            ( ApplicationId,
              UserId,
              Password,
              PasswordSalt,
              Email,
              LoweredEmail,
              PasswordQuestion,
              PasswordAnswer,
              PasswordFormat,
              IsApproved,
              IsLockedOut,
              CreateDate,
              ExpiryDate,
              DaysLeft,
              LastLoginDate,
              LastPasswordChangedDate,
              LastLockoutDate,
              FailedPasswordAttemptCount,
              FailedPasswordAttemptWindowStart,
              FailedPasswordAnswerAttemptCount,
              FailedPasswordAnswerAttemptWindowStart )
     VALUES ( @ApplicationId,
              @UserId,
              @Password,
              @PasswordSalt,
              @Email,
              LOWER(@Email),
              @PasswordQuestion,
              @PasswordAnswer,
              @PasswordFormat,
              @IsLockedOut,
              @IsLockedOut,
              @CreateDate,
              @ExpiryDate,
              @DaysLeft,
              @CreateDate,
              @CreateDate,
              @LastLockoutDate,
              @FailedPasswordAttemptCount,
              @FailedPasswordAttemptWindowStart,
              @FailedPasswordAnswerAttemptCount,
              @FailedPasswordAnswerAttemptWindowStart )

IF( @@ERROR <> 0 )
BEGIN
    SET @ErrorCode = -1
    GOTO Cleanup
END

IF( @TranStarted = 1 )
BEGIN
    SET @TranStarted = 0
    COMMIT TRANSACTION
END

RETURN 0 
```

清理：

```
IF( @TranStarted = 1 )
BEGIN
    SET @TranStarted = 0
    ROLLBACK TRANSACTION
END

RETURN @ErrorCode 
```

结尾

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T13:07:39.750

> 我希望“今天”列将填充当前时间......在每一行中。

`getdate()`直接在您的查询中使用并用于[`datediff()`](http://msdn.microsoft.com/en-us/library/ms189794.aspx)计算日期之间的差异。

```
select Column1,
       Column2,
       getdate() as Today,
       datediff(day, getdate(), ExpiryDate) as DaysLeft
from YourTable 
```

将当前日期和时间保存在表中是没有意义的，因为它不断变化并且可以使用`getdate()`.

# java - NetBeans GUI Builder - 将整个图像目录添加到另一个特定目录，以便将图像导入那里

> ID：14196519
> 
> 赞同：1
> 
> 时间：2013-01-07T13:01:24.917
> 
> 标签：java, swing, user-interface, netbeans

我目前正在构建一个应用程序，我希望将整个目录导入另一个目录。我正在使用您需要导入 jar 文件的 apache commons.io 库。

假设从我将使用来自 GuiBuilder Netbeans 的 JfileChooser 选择到 C:\output 的目录中。我希望将所有图像都导入那里。我的代码没有运行。当我按下 JButton2 （负责加载目录的按钮时，我得到一个异常

> > WebAppImg.jButton2ActionPerformed(WebAppImg.java:141) 处的线程“AWT-EventQueue-0”java.lang.NullPointerException 中的异常（第二行指出：String filename = f.getAbsolutePath();）

copyDirectoryToDirectory 方法可能。但是我对此的想法是，当将 FileSelectionMode 设置为 Directories_Only 时，绝对路径将类似于 C:\importFile 而不是 C:\importFile\image1.jpg，因此不会出错。但也许这是个错误？

到目前为止，这是我的代码。

```
 private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {                                         
    // TODO add your handling code here:(for importing a whole directory(folder) from C:\images1 into C:\output ).        
    JFileChooser chooser = new JFileChooser();
    chooser = new JFileChooser(); 
    //chooser.setCurrentDirectory(new java.io.File("."));
    //chooser.setDialogTitle(choosertitle);
    chooser.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);
    //chooser.showOpenDialog(null);
    //chooser.setAcceptAllFileFilterUsed(false);

    File f = chooser.getSelectedFile();

    String filename = f.getAbsolutePath();
try {

    File srcDir = new File(filename);
    File destDir = new File("C:/output/");

    FileUtils.copyDirectoryToDirectory(srcDir, destDir);

}
    catch (Exception ex) {
    ex.printStackTrace();
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T13:47:44.383

我相信你没有使用正确的`FileUtils`方法。请尝试使用`copyDirectory(File srcDir, File destDir);`

**更新**

如果要复制 src 目录中的所有文件，请使用上述方法。如果要复制目录，请说将`C:\images`导致，因为它将整个目录复制到另一个目录中。`C:\COPIED``copyDirectoryToDirectory(File srcDir, File destDir);``C:\COPIED\images`

这是我的工作示例...

```
private void jFileChooser1ActionPerformed(java.awt.event.ActionEvent evt) {                                              
  File src =  jFileChooser1.getSelectedFile();
  File dest = new File("C:\\COPIED");
    System.out.println(src.getAbsolutePath());
    System.out.println(dest.getAbsolutePath());
    try {
        FileUtils.copyDirectory(src, dest);
        //FileUtils.copyDirectoryToDirectory(src, dest);
    } catch (IOException ex) {
        Logger.getLogger(FileChoosingFrame.class.getName()).log(Level.SEVERE, null, ex);
    }
} 
```

这是一个工作示例：[stackoverflow-jchooser.zip](http://commondatastorage.googleapis.com/bluelotussoftware/code/stackoverflow/stackoverflow-jchooser.zip)它应该仅用作起点。复制应该在单独的线程而不是 EDT 中完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T17:25:01.617

尝试这个。

```
 private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {                                         
    JFileChooser chooser = new JFileChooser();
    chooser.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);
    chooser.showOpenDialog(null);
    File f = chooser.getSelectedFile();
    String SourceDir = f.getAbsolutePath();
try {

    File srcDir = new File(SourceDir);
    File destDir = new File("C:/output/");

    FileUtils.copyDirectoryToDirectory(srcDir, destDir);

}
    catch (Exception ex) {
    ex.printStackTrace();
}
} 
```

# arrays - 从加速度计在 XCode 上记录数据数组

> ID：14196520
> 
> 赞同：-2
> 
> 时间：2013-01-07T13:01:28.523
> 
> 标签：arrays, xcode, store

我正在尝试创建一个应用程序来记录给定时间内的最大 G-Force 和最小 G-Force。我已经让加速度计工作并提供数据（每 0.1 秒更新一次）。我现在想在用户单击“记录”时存储此数据，并在用户单击“停止”时停止。我想要一个每 0.1 秒给出一个新行的数组。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T13:10:59.070

```
NSMutableArray *recordsArray = [NSMutableArray array]; 
```

    CMMagnetometerData *数据；

```
// where you get the data every 0.1 seconds
[recordsArray addObject:data]; 
```

# java - Java 图表作曲家

> ID：14196523
> 
> 赞同：0
> 
> 时间：2013-01-07T13:01:36.577
> 
> 标签：java, swing, charts

在我使用 java+swing 编写的应用程序中 - 我有一组数据库表，我希望允许用户根据选定的列生成图表（如在 excel 中）

由于这个项目是一个学术项目 - 我没有选择购买这样的工具.. 有没有好的开源库可以将这样的图表“设计器”集成到我的摇摆应用程序中？

**编辑** 我想稍微澄清一下我的问题，我对集成的图表设计器库感兴趣，而不是像 JFreeChart 这样的图表库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T13:03:59.237

有很多不错的 Java 库，比如[JFreeChart](http://www.jfree.org/jfreechart/)。

[或者您可以查看其中之一](http://www.google.com/search?gcx=c&sourceid=chrome&ie=UTF-8&q=swing%20charting%20libraries)：

# c# - 使用流畅的休眠和额外的延迟加载软删除

> ID：14196526
> 
> 赞同：1
> 
> 时间：2013-01-07T13:01:42.750
> 
> 标签：c#, nhibernate, fluent-nhibernate, soft-delete

覆盖 DefaultDeleteEventListener 和 DefaultLoadEventListener 为使用 Nhibernate 实现软可删除提供了一个非常好的解决方案。

```
 public class SoftDeletableLoadEventListener : DefaultLoadEventListener
    {
        #region Non-public members

        protected override object DoLoad(LoadEvent @event,
            IEntityPersister persister, EntityKey keyToLoad,
            LoadType options)
        {
            object entity = base.DoLoad(@event, persister, keyToLoad, options);

            var softEntity = entity as ISoftDeletable;

            if (softEntity != null && softEntity.IsDeleted)
            {
                if (options == LoadEventListener.ImmediateLoad
                    || options == LoadEventListener.Load)
                {
                    string msg =
                        string.Format("Can not Load soft deleted entity typeof({0}) with Id {1} as it was deleted.",
                            softEntity.GetType().Name,
                            softEntity.Id);

                    throw new InvalidOperationException(msg);
                }
            }

            return entity;
        }

        #endregion
    } 
```

正如 DefaultLoadEventListener 状态的摘要： 定义 NHibernate 用于加载实体以响应**生成的加载事件**的默认加载事件侦听器。

这意味着在执行 ExtraLazyLoading 时不应用过滤器，这会导致例如：已删除的实体被计数。是否有另一种方法可以在查询期间应用软可删除过滤器？有没有更好的方法，然后总是手动过滤添加限制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T00:05:21.003

我已经用 nh 实现了软删除，但没有覆盖 DefaultLoadEventListener，但我认为我的集合加载策略也可以帮助你。您可以将 where 子句规范添加到您的集合中：

**流畅的 NHibernate**

```
.Override<Parent>(map =>
{
    map.HasMany<Child>(p => p.Children)
        .Where("IsDeleted = 0");
}) 
```

**HBM.xml**

```
<bag name="Children" where="IsDeleted = 0">
  <key>
    <column name="ParentID" />
  </key>
  <one-to-many class="Child" />
</bag> 
```

*编辑* 刚刚从 nhibernate.info 中找到有关软删除的链接，该[链接建议使用覆盖的 DefaultLoadEventListener 并使用 where 子句规范过滤选择。](http://nhibernate.info/blog/2008/09/06/soft-deletes.html)

# apache - 服务器上只有一个网站使用 Varnish？

> ID：14196531
> 
> 赞同：0
> 
> 时间：2013-01-07T13:01:53.193
> 
> 标签：apache, drupal-7, varnish

我是清漆新手，所以请多多包涵。

我的服务器上有多个网站。我不希望清漆用于所有网站，而只用于单个网站。Varnish 必须监听 80 端口，对吧？并且 apache 必须在另一个端口上运行，对吗？这意味着如果我需要访问其他网站而不用 varnish 收听它们，我必须通过以下方式访问它们：[http](http://www.nonvarnishsite.com:8080) ://www.nonvarnishsite.com:8080 （或任何其他运行 apache 的端口号？）或我可以简单地将请求从 varnish 传递给 apache 并通过 varnish 获取输出，而不必在 http 请求中指定 apache 端口的端口号？return(pass) 是否负责从 apache 返回输出，并且请求会保留在端口 80 上吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T15:45:40.613

如果 Varnish 和 apache 在同一台机器上运行，它们应该监听两个不同的端口。

您应该查看[https://www.varnish-cache.org/trac/wiki/VCLExampleDefault](https://www.varnish-cache.org/trac/wiki/VCLExampleDefault)以了解清漆的流程。“返回（通过）”传递到后端。

一个简单的例子，你可以[在这里看到](http://ellislab.com/blog/entry/making-sites-fly-with-varnish)

# visual-studio - Visual Studio 2012 Premium SP1 不适用于 TypeScript 插件

> ID：14196533
> 
> 赞同：3
> 
> 时间：2013-01-07T13:02:02.023
> 
> 标签：visual-studio, visual-studio-2012, typescript

我安装了**Visual Studio 2012 Premium**，并更新到 SP1。我刚刚为 Visual Studio 安装了**TypeScript 8.1.1 插件**，但它不起作用。

我可以创建 TypeScript 文件，但它们显示为纯文本（没有语法着色或智能感知）。我也无法创建 TypeScript 项目！对此感到失望，因为我在另一台机器上工作！

关于出了什么问题的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T09:47:33.383

我在[这里](https://stackoverflow.com/questions/12684987/create-a-new-typescript-project-in-visual-studio)找到了解决这个问题的方法。

**重现步骤：**

1.  下载并安装[Visual Studio 的 TypeScript 插件](http://www.microsoft.com/en-us/download/details.aspx?id=34790)。
2.  安装 TypeScript 语言服务

在 x64 机器上，它位于此处：

> C:\Program Files (x86)\Microsoft SDKs\TypeScript\0.8.xx\TypeScriptLanguageService.vsix

在 x86 机器上，它位于此处：

> C:\Program Files\Microsoft SDKs\TypeScript\0.8.xx\TypeScriptLanguageService.vsix

现在你应该可以从 Visual Studio 创建 TypeScript 项目了。您还应该受益于 TypeScript 的 Intellisense，以及自动编译为 JavaScript 和缩小的 JavaScript。

# python - Python - 列表的最大公共交集

> ID：14196534
> 
> 赞同：2
> 
> 时间：2013-01-07T13:02:07.027
> 
> 标签：python, list, nested, intersection

我想从两个给定的嵌套列表中创建一个新的嵌套列表（每个列表中都有唯一的项目），以便新的嵌套列表是两个列表的最大公共交集。

一个例子希望有助于澄清我的问题：

```
 old1 = [[1,2],[3,4,5],[6,7,8],[9]]
    old2 = [[1,2,3],[4,5,7],[6,8,10]]]
    new  = [[1,2],[3],[4,5],[6,8],[7],[9],[10]] 
```

顺序并不重要，因此使用集合可能很有用。

有人有想法吗？任何帮助将不胜感激！

__

好的，很明显，最容易获得最大公共交点的是

```
 new1 = filter(None,[list(set(o1) & set(o2)) for o1 in old1 for o2 in old2])
    print new1
    [[1, 2], [3], [4, 5], [7], [8, 6]] 
```

如果您想包含仅出现在旧列表之一中的整数，您可以在之后添加它们：

```
 a,b = set(sum(old1, [])), set(sum(old2, []))
    c = (a | b) - (a & b)
    for d in c:
        new1.append([d]) 
```

谢谢大家的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T13:12:49.473

就个人而言，我会首先使用集合交集来计算每个交集，然后添加任何剩余的项目（即，项目仅出现在 2 个列表中的一个上）：

```
>>> import itertools
>>> import functools
>>> 
>>> old1 = [[1,2],[3,4,5],[6,7,8],[9]]
>>> old2 = [[1,2,3],[4,5,7],[6,8,10]]
>>> 
>>> unique1 = functools.reduce(lambda a,b: set(a).union(set(b)),old1)
>>> unique2 = functools.reduce(lambda a,b: set(a).union(set(b)),old2)
>>> new = [list(set(a).intersection(set(b))) for a,b in itertools.product(old1,old2) if len(set(a).intersection(set(b))) != 0]
>>> new.extend([x] for x in unique1.symmetric_difference(unique2))
>>> 
>>> new
[[1, 2], [3], [4, 5], [7], [8, 6], [9], [10]] 
```

a 和 b 的对称差等于`(a|b)-(a&b)`，它产生仅出现在 2 个集合之一中的项目。

*（当然，您可以从 Grijesh Chauhan 的回答中得到一些启发，以简化交集`new = filter(None, [list(set(a) & set(b)) for a in old1 for b in old2)])`：）*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T13:14:29.003

**两个列表的交集：**

```
>>> filter(None,[list(set(o1) & set(o2)) for o1 in old1 for o2 in old2 ])
[[1, 2], [3], [4, 5], [7], [8, 6]] 
```

最大的共同点是什么？为什么被`[9],[10]`包括在内？

**编辑**

`Greatest Common Intersection`正如你所描述的。

首先将列表列表转换为列表（`old1`& `ld2`），**将二维列表转换为一维列表**：

```
>>> e_o1 = reduce(list.__add__, old1)
>>> e_o1
[1, 2, 3, 4, 5, 6, 7, 8, 9]
>>> e_o2 = reduce(list.__add__, old2)
>>> e_o2
[1, 2, 3, 4, 5, 7, 6, 8, 10] 
```

使用交叉路口： **_**`filter()`

```
>>> new = filter(None,[list(set(o1) & set(o2)) for o1 in old1 for o2 in old2]) 
```

`new`仍然不完整：最后一步：

现在列出**不在 in** `old1` **或 in** `old2`中的元素，创建临时列表`tl`：

```
>>> tl=filter(lambda x : x not in e_o1 or x not in e_o2 , set(e_o1) | set(e_o2)) 
>>> tl
[9, 10] 
```

现在将列表**中****的元素附加** `tl`为`new`列表：

 **```
>>> filter(lambda x:  new.append([x]) ,tl)
[]
>>> new
[[1, 2], [3], [4, 5], [7], [8, 6], [9], [10]] 
```

但结果仍然类似于*Adrien Plisson*代码的工作原理：

`old1 = [[1,2],[3,4]]`并且`old2 = [[1,2],[5,6]]`，
它将产生`[[1,2],[3],[4],[5],[6]]`**

# php - 标头（位置：“”）在图像上传后不重定向页面

> ID：14196536
> 
> 赞同：0
> 
> 时间：2013-01-07T13:02:11.543
> 
> 标签：php, image

在我的网站页面中，我有一个名为`view_all_choices`. 只需使用

以下变量用于显示选择图像。但是在上传图像后，重定向到具有其 ID 的同一页面不起作用。

这是自己的页面重定向的代码：

```
if(isset($_POST['submit'])){  

$pollids = mysql_real_escape_string($_POST['pollid']);

$choiceid= mysql_real_escape_string($_POST['chid']);  

move_uploaded_file($tmp_name,$dir . $img);  

header("Location:view_all_choices.php?pollid=$pollids&chid=$choiceid");} 
```

在我的服务器中它工作正常。图片上传后，页面再次重定向到上面的 URL，URL 显示如下

```
http://domain.com/mysite/view_all_choices.php?pollid=3&chid=13 
```

但是在我将文件移动到客户端服务器后，图像上传后页面再次重定向到

```
http://domain.com/mysite/view_all_choices.php 
```

因此，页面显示空图像，因为没有获取 id。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T13:15:58.217

我可以看到的一个问题是位置后缺少**空格****：**在标题函数中。所以更换

```
header("Location:view_all_choices.php?pollid=$pollids&chid=$choiceid"); 
```

和

```
header("Location: view_all_choices.php?pollid=$pollids&chid=$choiceid");
exit(); 
```

如果它仍然不起作用，请确保 1 - 文件上传没有错误 2 - 所有变量都有 $pollids、$choiceid 等的值 3 - 并且没有其他重定向。

如果你还看到

```
http://domain.com/mysite/view_all_choices.php 
```

这意味着它没有被重定向

```
header("Location: view_all_choices.php?pollid=$pollids&chid=$choiceid");
exit(); // its a good practise to put exit after header redirect 
```

因为如果它被上面的代码重定向，那么你应该在查询字符串中看到变量

```
http://domain.com/mysite/view_all_choices.php?pollid=[value or empty]&chid=[value or empty] 
```

如果还是查不出来，试着改一下php文件名，这肯定会告诉你是谁在重定向页面。

```
header("Location: some_test_page.php?pollid=$pollids&chid=$choiceid"); 
```

# java - 上传会议时出现 Exchange 400 错误

> ID：14196537
> 
> 赞同：0
> 
> 时间：2013-01-07T13:02:13.943
> 
> 标签：java, android, outlook, exchange-server-2010, activesync

我正在尝试使用 Android 中的 Exchange 2010 为您的会议应用程序构建一本书。我正在使用[CorporateContacts](http://code.google.com/p/corporateaddressbook/)来熟悉 activesync。到目前为止，我已经设法让 ResolveRecipients 、 SendMail 和 FolderSync 命令正常工作。但是，当我尝试上传会议请求时，我收到 400 错误请求错误。我 [以此](http://msdn.microsoft.com/en-us/library/gg675603%28v=exchg.80%29.aspx) 为参考。

我的 xml

```
<?xml version="1.0" encoding="utf-8"?>
<Sync xmlns:calendar="Calendar" xmlns="AirSync">
    <Collections>
        <Collection>
            <SyncKey>1425334024</SyncKey>
            <CollectionId>4</CollectionId>
            <GetChanges>1</GetChanges>
            <Commands>
                <Add>
                    <ClientId>5644895</ClientId>
                    <ApplicationData>
                         <calendar:TimeZone>tv7//ygAVQBUAEMAKwAwADUAOgAzADAAKQAgAEMAaABlAG4AbgBhAGkALAAgAEsAbwBsAGsAYQB0AGEALAAgAE0AdQAAAAAAAAAAAAAAAAAAAAAAAAAAACgAVQBUAEMAKwAwADUAOgAzADAAKQAgAEMAaABlAG4AbgBhAGkALAAgAEsAbwBsAGsAYQB0AGEALAAgAE0AdQAAAAAAAAAAAAAAAAAAAAAAAAAAAA==</calendar:TimeZone>
                        <calendar:StartTime>20130109T100000Z</calendar:StartTime>
                        <calendar:Subject>TestMeeting</calendar:Subject>
                        <calendar:UID>040000008200E90074C5B7101A82E0080000000036BD76EAAAD5CA01000000000000000010000000C45185F686A5D542B20BF2CE2F477D55</calendar:UID>
                        <calendar:Attendees>
                            <calendar:Attendee>
                                <calendar:Email>Test@test.com</calendar:Email>
                                <calendar:Name>JohnDoe</calendar:Name>
                                <calendar:AttendeeStatus>0</calendar:AttendeeStatus>
                                <calendar:AttendeeType>1</calendar:AttendeeType>
                            </calendar:Attendee>
                        </calendar:Attendees>
                        <calendar:Location>My Office</calendar:Location>
                        <calendar:EndTime>20130109T110000Z</calendar:EndTime>
                        <calendar:Sensitivity>0</calendar:Sensitivity>
                        <calendar:BusyStatus>1</calendar:BusyStatus>
                        <calendar:AllDayEvent>0</calendar:AllDayEvent>
                        <calendar:MeetingStatus>1</calendar:MeetingStatus>
                    </ApplicationData>
                </Add>
            </Commands>
        </Collection>
    </Collections>
</Sync> 
```

CreateHTTPPost 函数

```
private HttpPost createHttpPost(String uri, String requestXML,
            boolean includePolicyKey) throws Exception {

        // Set the common headers
        HttpPost httpPost = new HttpPost(uri);
        httpPost.setHeader("User-Agent", "Android");
        httpPost.setHeader("Accept", "*/*");
        httpPost.setHeader("Content-Type", "application/vnd.ms-sync.wbxml");
        //httpPost.setHeader("Content-Type", "message/rfc822");//message/rfc822

        // If we are connecting to Exchange 2010 or above
        // Lets tell the Exchange server that we are a 12.1 client
        // This is so we don't have to support sending of additional
        // information in the provision method
        if(getActiveSyncVersionFloat() >= 14.0)
            httpPost.setHeader("MS-ASProtocolVersion", "12.1");
        // Else set the version to the highest version returned by the
        // Exchange server
        else
            httpPost.setHeader("MS-ASProtocolVersion", getActiveSyncVersion());

        //Log.d(TAG, mActiveSyncVersion);
        httpPost.setHeader("Accept-Language", "en-us");
        httpPost.setHeader("Authorization", mAuthString);

        // Include policy key if required
        if (includePolicyKey)
            httpPost.setHeader("X-MS-PolicyKey", mPolicyKey);

        // Add the XML to the request
        if (requestXML != null) {
            //Log.d(TAG, requestXML);
            // Set the body
            // Convert the XML to WBXML
            ByteArrayInputStream xmlParseInputStream = new ByteArrayInputStream(
                    requestXML.toString().getBytes());

            java.io.ByteArrayOutputStream output = new java.io.ByteArrayOutputStream();
            wbxml.convertXmlToWbxml(xmlParseInputStream, output);
            byte[] bytes = output.toByteArray();

            ByteArrayEntity myEntity = new ByteArrayEntity(bytes);
            myEntity.setContentType("application/vnd.ms-sync.wbxml");
            httpPost.setEntity(myEntity);
        }
        return httpPost;
    } 
```

有没有我遗漏的标题？或者 xml 有任何错误吗？如果有人可以提供一些启发，我将非常感激。我在标头中使用 activesync 版本 12.1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T10:08:48.023

xml 看起来不错。确保您正确地从 xml 转换为 wbxml。要仔细检查，请尝试转换回 xml 并查看是否返回原始字符串。

# python - 无法使用 BS4 从标签中提取 href 值

> ID：14196538
> 
> 赞同：1
> 
> 时间：2013-01-07T13:02:16.907
> 
> 标签：python, beautifulsoup

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T13:06:07.033

这不是诀窍吗？

```
for a in soup.find_all('a', href=True):
    print a['href'] 
```

如果您需要，可以在以下位置使用 attrs `find_all`：

```
soup.find_all("div", {"style": "display:inline; position:relative;"}) 
```

去除空格并使链接成为绝对链接：

```
import urlparse
urlparse.urljoin(url, a['href'].strip()) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T13:10:36.863

```
for a in soup.find_all('a', {"style": "display:inline; position:relative;"}, href=True):
    href = a['href'].strip()
    href = "http://example.com" + href
print(href)

'http://example.com/aems/file/filegetrevision.do?fileEntityId=8120070&cs=LU31NT9us5P9Pvkb1BrtdwaCrEraskiCJcY6E2ucP5s.xyz' 
```

内置功能`strip()`在这里非常有用。:)

# java - 函数访问外部变量

> ID：14196543
> 
> 赞同：0
> 
> 时间：2013-01-07T13:02:31.360
> 
> 标签：java, callback, guava, final

我有一个迭代大量数据集的函数，接收回调（谷歌的番石榴函数）并在数据集的每个项目上运行回调：

```
void processData(..., Function<Item, Void> callback) {
  ...
  for (Item item : data) {
    callback.apply(item);
  }
} 
```

使用此函数，我想传递一个将所有项目添加到列表或地图的回调：

```
List<Item> itemList;
processData(..., new Function<Item, Void)() {
  @Override public void apply(Item item) {
    itemList.add(item);
  }
}); 
```

但是，似乎我不能这样做，因为 itemList 不是最终的，并且根据定义不能是最终的。

这种情况有解决方案吗？或者也许这整个模式是错误的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T13:06:09.443

您似乎对 final 关键字的理解不正确。这个说法：

```
final List<Item> itemList = new ArrayList<Item> (); 
```

仅表示`itemList`无法重新分配变量。它不会阻止您修改它指向的对象和此调用：

```
itemList.add(someItem); 
```

在最终列表中完全有效。不允许的是写：

```
itemList = someOtherItemList; //forbidden, itemList is final 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T13:03:50.653

如果您在声明期间创建实例，则可以使用 final ：

```
final List<Item> itemList = new ArrayLis<Item>();
processData(..., new Function<Item, Void)() {
  @Override public void apply(Item item) {
    itemList.add(item);
  }
}); 
```

final 意味着您不能重新分配变量，但可以在其上调用方法！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T09:46:34.017

由于您需要的是 a`List`并且输入也是 a `List`，因此我认为**Lists.transform**是您的选择：

```
List<Item> itemList = Lists.transform(fromList, new Function<Item, Item>(){
    @Override public Item apply(Item input) {
        ...
        return transformedItem;
    }}); 
```

# vb.net - Vb.Net - 通过类库中的 XML 或 App 文件添加连接字符串

> ID：14196547
> 
> 赞同：1
> 
> 时间：2013-01-07T13:02:37.183
> 
> 标签：vb.net

我有 CLASS 库，我在其中硬编码了 CONNECTION STRING。

请帮助 - 我们如何通过 XML 或配置文件添加它，然后在 CLASS LIBRARY 中引用。

当我们在 PRODUCTION 上部署 dll 时，如何复制那个 xml/app 文件或者它会成为 DLL 的一部分？？？？

问候

# javascript - 如何使用 jQuery 在框架集中获取特定框架？

> ID：14196548
> 
> 赞同：0
> 
> 时间：2013-01-07T13:02:37.437
> 
> 标签：javascript, jquery

我的主页：

```
<FRAMESET>
<FRAMESET >
    <FRAME name="menu" src=<%=menu%>>
    <FRAME marginWidth="0" src=<%=bottom%> >
</FRAMESET>
<FRAMESET>
    <FRAME src=<%=title%>>
    <FRAME name="main"src=<%=main%>>
</FRAMESET> 
```

我想使用`name attribute`选择器而不是来获取菜单框架`frames[index]`，所以我想替换静态选择器：

`window.parent.frames[0].document`

对于使用名称 attr 的 jQuery。

# c# - PDF中是否可以悬停？

> ID：14196550
> 
> 赞同：3
> 
> 时间：2013-01-07T13:02:42.880
> 
> 标签：c#, javascript, pdf, hover, tooltip

我有我们需要将 html 转换为 pdf 的要求。Html 具有跟踪更改详细信息，例如插入下划线和删除删除。pdf转换后，当用户将鼠标悬停在任何轨道更改的文本上时，他应该能够查看进行更改的用户名。我们正在使用 Aspose dll 进行 html 到 pdf 的转换。

我的输入将是一个很大的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T17:27:08.810

这在PDF中可能吗？是的。

一些例子：

*   [http://examples.itextpdf.com/results/part2/chapter07/movie_posters_2.pdf](https://web.archive.org/web/20140309010301/http://examples.itextpdf.com/results/part2/chapter07/movie_posters_2.pdf)
*   [http://examples.itextpdf.com/results/part2/chapter07/calculator.pdf](https://web.archive.org/web/20141127010800/http://examples.itextpdf.com/results/part2/chapter07/calculator.pdf)
*   [http://examples.itextpdf.com/results/part2/chapter07/timetable_help.pdf](https://web.archive.org/web/20130302035051/http://examples.itextpdf.com/results/part2/chapter07/timetable_help.pdf)
*   浏览我的书第 7 章的示例以获取更多信息……

Aspose 可以做到这一点吗？我不知道; 我是先生 iText，不是先生。假设;-)

**编辑：** [链接腐烂](https://meta.stackoverflow.com/questions/262038/how-to-flag-dead-links)是一回事，发布仅包含外部资源的答案总是一个坏主意。包含一个如何做的例子是个好主意。

# r - 添加等倾线和/或方向场以绘制

> ID：14196551
> 
> 赞同：6
> 
> 时间：2013-01-07T13:02:43.437
> 
> 标签：r, plot, package

当我遇到一个问题时，我正在用 R 求解微分方程：我需要在我的绘图中添加等倾线和方向场，但我不知道如何去做。我应该安装什么软件包/我应该调用什么功能/我应该手动完成所有操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T14:37:12.033

这不是答案，而只是评论中给出的答案的摘要：

*   包装`LVCompGames`内 给出了这个情节：`primer`

![在此处输入图像描述](../Images/aba7340bbc8f5649af82769c0a560659.png)

1.  这是[@Ben Bolker](http://gallery.r-enthusiasts.com/graph/quiver_episode_2,128)给出的解决方案。解决方案基于`graphics`包和`filled.contour`功能。

![在此处输入图像描述](../Images/002b06c6db73e31638ef281f62c63bfb.png)

*   然后@Josh O'Brien 建议使用功能`rasterVis`包`vectorplot`

![在此处输入图像描述](../Images/7a0c3bf2b972954aefff0ce182436bec.png)

如果您向我们提供有关您希望输出的更多信息，我认为所有答案都可以自定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-05T09:29:12.980

有一个很棒的包叫做[phaseR](http://cran.r-project.org/web/packages/phaseR/)。它使用[deSolve](http://cran.r-project.org/web/packages/deSolve/index.html)包中的 ODE 求解器，让您轻松添加空斜线、轨迹等。请务必将 ODE 函数的参数命名为“t”、“y”和“parameters”。否则 phaseR 函数会报错：

> deriv(t = 0, y = c(x[i], y[j]), parameters = parameters) 中的错误：
> 未使用的参数 (y = c(x[i], y[j]), parameters = parameters)

这是 Lotka-Volterra 捕食者-猎物系统的工作代码示例：

```
require(deSolve) 
require(phaseR)

model.LV <- function(t, y, parameters){
  with(as.list(parameters),{

    N<-y[1] 
    P<-y[2]
    dN <- a*N - b*N*P  
    dP <- c*N*P -d*P

    list(c(dN,dP))
  })
}

params.LV<-c(a=0.4, b=0.3, c=0.1, d=0.2)

data.LV<-as.data.frame(lsoda(c(N=1,P=1),seq(1,250,by=0.5), model.LV, params.LV))
# plot the time series of both populations
plot(data.LV$time,data.LV$N, main="Time series of L-V equations", xlab="time", 
     ylab="Population densities N, P",
     type="l", col="green", 
     ylim=c(0,max(data.LV$N,data.LV$C)))
lines(data.LV$time,data.LV$P,col="red")

# plot the trajectories of the system
plot(data.LV$N, data.LV$P, type="l", col="blue", main="Trajectory of L-V equations",
     xlab="Prey density N", ylab="Predator density P", xlim=c(0,5), ylim=c(0,3))
#add Nullclines
nullclines(model.LV, x.lim=c(0.1,5),y.lim=c(0.1,3), parameters=params.LV, system="two.dim", colour=c("green","red"), add=TRUE) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T20:56:31.070

TeachingDemos 包中的`my.symbols`功能允许您定义自己的符号以添加到现有绘图中。支持功能`ms.arrows`已经对基本箭头进行了编码以添加到绘图中，您可以轻松修改它（或其他 ms 功能）以创建要添加的不同符号。

# c# - C# 在哪里以及如何可视化多个 GroupBox'es

> ID：14196554
> 
> 赞同：0
> 
> 时间：2013-01-07T13:03:00.453
> 
> 标签：c#, listview, listbox, groupbox

我动态生成许多 GroupBox（最多 50 个）并希望将它们可视化（堆叠）在带有垂直滚动条的 Box 中。我尝试了`ListBox`但`ListView`没有成功->我总是有一个禁用的滚动条，但无法滚动？！

是正确的工具`ListBox`还是`ListView`正确的工具？

# c++ - 使用 boost 从字符串中提取内容

> ID：14196557
> 
> 赞同：0
> 
> 时间：2013-01-07T13:03:06.403
> 
> 标签：c++, boost, boost-regex

我最近编写了正则表达式来解析我的文件中的内容，但那个是在 .NET 中的，我现在刚刚开始在我的 C++ 项目中使用 Boost。

我有一个类似于以下的行，它是一个 std::string
`123 12 E`

我必须解析并获得以下内容。

float = 第一个数字
float = 第二个数字
string = 第三个字母

因为我有使用正则表达式的经验，所以我知道正则表达式是什么

`const char* Regex = "^[[:space:]]*(\\d{1,3})[[:space:]]*(\\d{1,2})[[:space:]]*([NSEW])[[:space:]]*"`

但我不确定如何使用它与 boost 一起从我的行中提取这三样东西。我尝试阅读 Boost 网站上的示例，但这似乎并没有回答我的问题，因为我必须陷入困境才能找到这个小细节。如何将 Boost Regex 与上述正则表达式一起使用以将我的结果输出为三个变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T15:43:59.350

[http://www.boost.org/doc/libs/1_52_0/libs/regex/doc/html/boost_regex/introduction_and_overview.html](http://www.boost.org/doc/libs/1_52_0/libs/regex/doc/html/boost_regex/introduction_and_overview.html)给出了匹配的例子。您最终会得到一个`match_results`可以从中获取匹配项的结构。

*未经测试的代码*

```
const char *str = "123 12 E";
boost::regex re ("^(\\d{1,3}) (\\d{1,2}) ([NSEW])$");
boost::cmatch mr;
if (boost::regex_match ( str, mr, re )) {
    std::cout << "There were: " << mr.size () - 1 << " fields matched" << std::endl;
    std::cout << "First part: " << mr[1] << std::endl;
    } 
```

# android - 自定义视图无法在 xml 布局中实例化

> ID：14196558
> 
> 赞同：1
> 
> 时间：2013-01-07T13:03:07.810
> 
> 标签：android, xml, android-layout, android-custom-view, glsurfaceview

我有这样的课：

```
public class MyOpenGlView extends GLSurfaceView
    {

        public MyOpenGlView(Context context) {
            super(context);
            setRenderer(new MyRenderer()) ;
        }
    } 
```

我想在我的 xml 布局中声明这个类，如下所示：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".OpenGlActivity" >

    <test.example.myfirstapp.OpenGlActivity.MyOpenGlView android:id = "@+id/myImage"
        android:layout_width = "wrap_content"
        android:layout_height = "wrap_content"
        />

</LinearLayout> 
```

但随后在“图形布局”模式下出现此错误：

```
The following classes could not be instantiated:
- test.example.myfirstapp.OpenGlActivity.MyOpenGlView (Open Class, Show Error Log)
See the Error Log (Window > Show View) for more details.
Tip: Use View.isInEditMode() in your custom views to skip code when shown in Eclipse 
```

有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-31T13:14:32.840

尝试把 setRenderer(new MyRenderer()) ; 在 isInEditMode() 下喜欢

```
if (isInEditMode())
{
 setRenderer(new MyRenderer()) ;
} 
```

同样在您的 XML 文件中尝试更改

```
<test.example.myfirstapp.OpenGlActivity.MyOpenGlView android:id = "@+id/myImage"
    android:layout_width = "wrap_content"
    android:layout_height = "wrap_content"
    /> 
```

至

```
 <MyOpenGlView android:id = "@+id/myImage"
    android:layout_width = "wrap_content"
    android:layout_height = "wrap_content"
    /> 
```

如果您使用的是 android studio 并让它自动导入类

否则尝试将其更改为

```
<view
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    class="test.example.myfirstapp.OpenGlActivity.MyOpenGlView"
    android:id="@+id/myImage" /> 
```

# css - Ruby：解析明文的结构化块

> ID：14196565
> 
> 赞同：0
> 
> 时间：2013-01-07T13:03:35.397
> 
> 标签：css, ruby, parsing, css-parsing

我正在为 CSS 文件编写一个简单的 ruby​​ 解析器，我对如何获得一个 CSS 块（即选择器以及紧随其后的花括号之间的所有内容）作为一个 ruby​​ 对象感到有些困惑施展我黑暗而肮脏的魔法。

理想情况下，我想获得一个包含每个属性/值和选择器的 ruby​​ 哈希。有什么清晰易懂的方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T14:37:20.680

正如评论中所提到的，除了有趣的练习之外，自己做是很愚蠢的。我将 css 文件读入字符串，然后用正则表达式扫描它。

[Ruby - 将文件转换为字符串](https://stackoverflow.com/questions/130948/ruby-convert-file-to-string)

[http://www.ruby-doc.org/core-1.9.3/String.html#method-i-scan](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-scan)

用于测试正则表达式：[http ://rubular.com/](http://rubular.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-13T12:17:08.587

每个人都应该写一个解析器。

这应该让你开始......

```
require 'parslet'
require 'ostruct'
require 'pp'

class Parser < Parslet::Parser
  rule(:opencurl)   { str('{') }
  rule(:closecurl)  { str('}') }
  rule(:space)      { str(' ') }
  rule(:space?)     { space.maybe }
  rule(:comma)      { str(',') }
  rule(:semi)       { str(';') }
  rule(:colon)      { str(':') }
  rule(:eol)        { str("\r").maybe >> str("\n") }
  rule(:eol?)       { eol.maybe }
  rule(:indent?)    { str(" ").repeat(0) }
  rule(:ws?)        {indent? >> eol? >> indent?}

  rule(:value)      { (semi.absent? >> any).repeat(1).as(:value) } #cheating

  rule(:word)       { match['a-zA-Z0-9'].repeat(1) }
  rule(:property)   { (word >> (str("-") >> word).repeat(0)).as(:property) }
  rule(:setting)    { (indent? >> property >> colon >> indent? >> value >> semi  >> eol?) }
  rule(:body?)      { setting.repeat(0).as(:body) }
  rule(:block)      { opencurl >> ws? >> body? >> ws? >> closecurl >> ws? }
  rule(:selector_expression)   { (opencurl.absent? >> any).repeat(1) } #cheating
  rule(:scope)      { ws? >> selector_expression.as("selector") >> indent? >> block.as(:settings) }

  rule(:css?)       { (eol.repeat(0) >> scope).repeat(0) } 
  root(:css?)
end  

class MyTransform < Parslet::Transform
  rule(:property => simple(:p), :value => simple(:v)) { OpenStruct.new(p:p,v:v) }
  rule(:body => sequence(:b)) { b.each_with_object({}){|i,o| o[i.p] = i.v} }
end 

css = <<-css
  h2{ background-image: url(abc);}
  #bob { 
  background-image: url(abc);
  background-color: red;
}
css

par = Parser.new.parse(css)
tar = MyTransform.new.apply(par) 
pp tar 
```

输出：

```
[{"selector"=>"h2", :settings=>{"background-image"=>"url(abc)"}},
 {"selector"=>"#bob ",
  :settings=>
   {"background-image"=>"url(abc)", "background-color"=>"red"}}] 
```

# c - 处理大量字符串常量

> ID：14196568
> 
> 赞同：0
> 
> 时间：2013-01-07T13:03:41.130
> 
> 标签：c, string

我有一个代码，它被分成多个文件，并且必须使用很多常量字符串（数百个），其中许多必须从位于多个文件中的函数访问，最方便的方法是什么?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T13:17:01.987

您可以创建一个名为 eg 的标题，`global.h`并将您的常量放在上面并包含需要常量的位置（实际上，您将包含用于上下文，因为您需要[`include guards`](http://en.wikipedia.org/wiki/Include_guard)用于避免重新定义错误）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T13:11:59.943

您可以使用指针数组，其中每个指针指向一个字符串。您可以将字符串数组传递给您想要的任何其他函数，但唯一的事情是将其设置为 const 以便没有人会更改它。

# database - 名为 FileName 的 DB 字段导致 mvc 4 中的错误

> ID：14196572
> 
> 赞同：0
> 
> 时间：2013-01-07T13:03:57.413
> 
> 标签：database, asp.net-mvc-4

我有一个名为 FileName, string 的数据库字段。当我加载相对编辑项视图时，对该字段的引用会导致错误：

```
 <div class="editor-field">
        @Html.EditorFor(model => model.FileName)
        @Html.ValidationMessageFor(model => model.FileName)
    </div> 
```

如果我删除这条线：`@Html.EditorFor(model => model.FileName)` 一切都很好。
字段名正确且存在于表中。错误是：

`Format exception unhandled by user code Index (zero based) must be greater than or equal to zero and less than the size of the argument list.`

该字段是 100 个字符的字符串，包含 30 个字符的字符串，我不想在任何地方更改数据类型。请问有什么想法吗？

# pcre - 在 AIX 6.1 64 位上编译 pcre 8.32

> ID：14196575
> 
> 赞同：3
> 
> 时间：2013-01-07T13:04:02.890
> 
> 标签：pcre, aix

我正在尝试使用以下命令配置和制作 pcre

```
./configure CC="gcc" CFLAGS="-maix64" CXX="gcc" CXXFLAGS="-maix64" LDFLAGS="-L/usr/ccs/bin -maix64" --disable-cpp --prefix=/usr/local/share/bld/pcre 
```

配置工作正常：pcre-8.32 配置摘要：

```
Install prefix .................. : /usr/local/share/bld/pcre
C preprocessor .................. : gcc -maix64 -E
C compiler ...................... : gcc -maix64
C++ preprocessor ................ : gcc -maix64 -E
C++ compiler .................... : gcc -maix64
Linker .......................... : /usr/bin/ld
C preprocessor flags ............ :
C compiler flags ................ : -O2
C++ compiler flags .............. : -maix64
Linker flags .................... :
Extra libraries ................. :

Build 8 bit pcre library ........ : yes
Build 16 bit pcre library ....... : no
Build 32 bit pcre library ....... : no
Build C++ library ............... : no
Enable JIT compiling support .... : no
Enable UTF-8/16/32 support ...... : no
Unicode properties .............. : no
Newline char/sequence ........... : lf
\R matches only ANYCRLF ......... : no
EBCDIC coding ................... : no
EBCDIC code for NL .............. : n/a
Rebuild char tables ............. : no
Use stack recursion ............. : yes
POSIX mem threshold ............. : 10
Internal link size .............. : 2
Match limit ..................... : 10000000
Match limit recursion ........... : MATCH_LIMIT
Build shared libs ............... : yes
Build static libs ............... : no
Use JIT in pcregrep ............. : no
Buffer size for pcregrep ........ : 20480
Link pcregrep with libz ......... : no
Link pcregrep with libbz2 ....... : no
Link pcretest with libedit ...... : no
Link pcretest with libreadline .. : no
Valgrind support ................ : no
Code coverage ................... : no 
```

在做 make 我得到以下错误：

```
bash-3.00# make
        rm -f pcre_chartables.c    
        ln -s ./pcre_chartables.c.dist pcre_chartables.c
     make  all-am
  CC     libpcre_la-pcre_byte_order.lo
  CC     libpcre_la-pcre_compile.lo
  CC     libpcre_la-pcre_config.lo
  CC     libpcre_la-pcre_dfa_exec.lo
  CC     libpcre_la-pcre_exec.lo
  CC     libpcre_la-pcre_fullinfo.lo
  CC     libpcre_la-pcre_get.lo
  CC     libpcre_la-pcre_globals.lo
  CC     libpcre_la-pcre_jit_compile.lo
  CC     libpcre_la-pcre_maketables.lo
  CC     libpcre_la-pcre_newline.lo
  CC     libpcre_la-pcre_ord2utf8.lo
  CC     libpcre_la-pcre_refcount.lo
  CC     libpcre_la-pcre_string_utils.lo
  CC     libpcre_la-pcre_study.lo
  CC     libpcre_la-pcre_tables.lo
  CC     libpcre_la-pcre_ucd.lo
  CC     libpcre_la-pcre_valid_utf8.lo
  CC     libpcre_la-pcre_version.lo
  CC     libpcre_la-pcre_xclass.lo
  CC     libpcre_la-pcre_chartables.lo
  CCLD   libpcre.la

0654-210 .libs/libpcre_la-pcre_byte_order.o is not valid in the current object file mode.

        Use the -X option to specify the desired object mode.

0654-210 .libs/libpcre_la-pcre_compile.o is not valid in the current object file mode.

        Use the -X option to specify the desired object mode.

0654-210 .libs/libpcre_la-pcre_config.o is not valid in the current object file mode.

        Use the -X option to specify the desired object mode.

0654-210 .libs/libpcre_la-pcre_dfa_exec.o is not valid in the current object file mode.

        Use the -X option to specify the desired object mode.

0654-210 .libs/libpcre_la-pcre_exec.o is not valid in the current object file mode.

        Use the -X option to specify the desired object mode.

0654-210 .libs/libpcre_la-pcre_fullinfo.o is not valid in the current object file mode.

        Use the -X option to specify the desired object mode.

0654-210 .libs/libpcre_la-pcre_get.o is not valid in the current object file mode.

        Use the -X option to specify the desired object mode.

0654-210 .libs/libpcre_la-pcre_globals.o is not valid in the current object file mode.

        Use the -X option to specify the desired object mode.

0654-210 .libs/libpcre_la-pcre_jit_compile.o is not valid in the current object file mode.

        Use the -X option to specify the desired object mode.

0654-210 .libs/libpcre_la-pcre_maketables.o is not valid in the current object file mode.

        Use the -X option to specify the desired object mode.

0654-210 .libs/libpcre_la-pcre_newline.o is not valid in the current object file mode.

        Use the -X option to specify the desired object mode.

0654-210 .libs/libpcre_la-pcre_ord2utf8.o is not valid in the current object file mode.

        Use the -X option to specify the desired object mode.

0654-210 .libs/libpcre_la-pcre_refcount.o is not valid in the current object file mode.

        Use the -X option to specify the desired object mode.

0654-210 .libs/libpcre_la-pcre_string_utils.o is not valid in the current object file mode.

        Use the -X option to specify the desired object mode.

0654-210 .libs/libpcre_la-pcre_study.o is not valid in the current object file mode.

        Use the -X option to specify the desired object mode.

0654-210 .libs/libpcre_la-pcre_tables.o is not valid in the current object file mode.

        Use the -X option to specify the desired object mode.

0654-210 .libs/libpcre_la-pcre_ucd.o is not valid in the current object file mode.

        Use the -X option to specify the desired object mode.

0654-210 .libs/libpcre_la-pcre_valid_utf8.o is not valid in the current object file mode.

        Use the -X option to specify the desired object mode.

0654-210 .libs/libpcre_la-pcre_version.o is not valid in the current object file mode.

        Use the -X option to specify the desired object mode.

0654-210 .libs/libpcre_la-pcre_xclass.o is not valid in the current object file mode.

        Use the -X option to specify the desired object mode.

0654-210 .libs/libpcre_la-pcre_chartables.o is not valid in the current object file mode.

        Use the -X option to specify the desired object mode.

ar: 0707-126 .libs/libpcre.so.1 is not valid with the current object file mode.

        Use the -X option to specify the desired object mode.

make: 1254-004 The error code from the last command is 1.

Stop.

make: 1254-004 The error code from the last command is 2 
```

我试过： using `OBJECT_MODE=64`，`q64`但在这种情况下，即使配置失败。任何建议都会被采纳。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T10:47:11.427

它使用以下命令解决：

```
./configure CC="gcc" CFLAGS="-maix64"  CXX="g++" CXXFLAGS="-maix64" NM="nm -X64" \
    AR="ar -X64" --disable-cpp --prefix=/usr/local/share/bld/pcre 
```

# css - 使用 css3 设置下拉菜单样式

> ID：14196578
> 
> 赞同：0
> 
> 时间：2013-01-07T13:04:17.447
> 
> 标签：css

以下代码看起来不错，几乎可以工作

```
select{
   width:218px;
   background-color: #000;
   border:none;
   outline: none;
   color:#333; 
   -webkit-appearance:none;
   height:24px;
   border-radius: 0;
   -webkit-border-top-left-radius: 5px;
   -webkit-border-bottom-left-radius: 5px;
   border-top-left-radius: 5px;
   border-bottom-left-radius: 5px;
}

.selcet_wrapper{
   background:url(../image/contact_arrow.png) no-repeat 96% 0;
   background-size: 21px 24px;
   overflow: hidden;
   -webkit-border-top-right-radius: 5px;
   -webkit-border-bottom-right-radius: 5px;
   border-top-right-radius: 5px;
   border-bottom-right-radius: 5px;
   width:21px;
   height:24px; 
```

}

```
<div class="selcet_wrapper">
  <select name="how" id="how">
  <option selected="selected" value="audi">What is your enquiry regarding?</option>
  <option value="volvo">one</option>
  <option value="saab">two</option>
  <option value="vw">three</option>
  </select>
</div> 
```

当我单击 bg 图像时，下拉菜单不显示，我知道这是因为它不包含在 select 元素中，有没有办法解决这个问题？

# ajax - 显示数据表的 jsf 导航页面

> ID：14196579
> 
> 赞同：-1
> 
> 时间：2013-01-07T13:04:17.450
> 
> 标签：ajax, jsf, navigation

我对 JSF 和 Web 应用程序非常陌生。现在我正在开发非常基本的 Web 应用程序，它在 jsf 数据表中显示来自数据库的数据。我面临一个问题。我在托管 bean 的 List 对象中有很多来自数据库的数据，我不想在我的数据表中以 10 x 10 的形式显示它们。例如，第一次加载页面时，数据表仅显示前 10 行，然后单击链接“下一步”，它显示下一个 10，依此类推。因此，它们都在同一页面中也很好。但我不知道该怎么做，我猜需要java脚本。ps帮帮我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T13:09:20.127

一种可能性是使用第二个列表。创建一个新列表，用前 10 个填充它并将数据表绑定到这个新列表。单击下一个或上一个时，清除列表并从原始列表中获取索引 11-20 或其他任何内容，然后填写第二个列表。

# python - Python - smtp requires authentication

> ID：14196581
> 
> 赞同：12
> 
> 时间：2013-01-07T13:04:25.873
> 
> 标签：python, email, authentication, smtp, smtplib

I am trying to send an email using python but despite I am using the local SMTP server it seems that it needs authentication. The code I run and the error I get can be seen below. I use port 587, because port 25 cannot be opened on my server. Could you please help me on setting up the local SMTP server using python on port 587?

```
>>> import smtplib
>>> from email.mime.text import MIMEText
>>> msg = MIMEText('Test body')
>>> me = 'support@mywebsite.com'
>>> to = 'myemail@gmail.com'
>>> msg['Subject'] = 'My Subject'
>>> msg['From'] = me
>>> msg['To'] = to
>>> s = smtplib.SMTP('localhost', 587)
>>> s.sendmail(me, [to], msg.as_string())

Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/python2.7/smtplib.py", line 722, in sendmail
    raise SMTPSenderRefused(code, resp, from_addr)
smtplib.SMTPSenderRefused: (530, '5.7.0 Authentication required', 'support@mywebsite.com') 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-01-07T13:09:40.127

Then before you attempt to use `s.sendmail`, you use `s.login('user', 'password')` - [http://docs.python.org/2/library/smtplib.html#smtplib.SMTP.login](http://docs.python.org/2/library/smtplib.html#smtplib.SMTP.login)

If you don't have login details - then consult your system admin.

# android - 如何正确使用另一个包的功能 - android

> ID：14196583
> 
> 赞同：0
> 
> 时间：2013-01-07T13:04:36.277
> 
> 标签：android, package

我有一个名为的主包`omer.ludlowcastle`和另一个包`omer.ludlowcastle.utils`

我写了这个函数`omer.ludlowcastle.utils`：

```
public boolean checkInternet (){
    final ConnectivityManager conMgr =  (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    final NetworkInfo activeNetwork = conMgr.getActiveNetworkInfo();
    if (activeNetwork != null && activeNetwork.isConnected()) {
        return true;
    } else {
        Toast.makeText(getApplicationContext(), "You are not connected to Internet", Toast.LENGTH_LONG).show();
        return false;
    }
} 
```

我在主包的一个活动中使用这个函数：

```
public void Login (View v){
    if(omer.ludlowcastle.utils.functions.checkInternet()){
        //do other stuff
    }

    else {
        //do other stuff
    }
} 
```

但是大括号中的行`if`给出了以下错误：

`Cannot make a static reference to the non-static method checkInternet() from the type functions`

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T13:07:03.463

使方法静态：

```
public static boolean checkInternet() 
```

或者，获取 checkInternet 函数所在的任何类的对象，然后调用它的`checkInternet()`函数，但是创建静态方法可能会占用较少的资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T13:06:35.800

您必须将 utils 包中的方法设置为静态。

```
public static boolean checkInternet() 
```

实用程序类用于生成静态方法并且它们不保存状态，因此如果您编写实用程序类，则方法必须是静态的。这是一般用途。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T13:08:19.627

修改您的方法并使其成为静态

```
public static boolean checkInternet (){
    final ConnectivityManager conMgr =  (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    final NetworkInfo activeNetwork = conMgr.getActiveNetworkInfo();
    if (activeNetwork != null && activeNetwork.isConnected()) {
        return true;
    } else {
        Toast.makeText(getApplicationContext(), "You are not connected to Internet", Toast.LENGTH_LONG).show();
        return false;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T13:09:00.987

只需将您的方法设为静态：

```
public static boolean checkInternet (){
    final ConnectivityManager conMgr =  (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    final NetworkInfo activeNetwork = conMgr.getActiveNetworkInfo();

    if (activeNetwork != null && activeNetwork.isConnected()) {
        return true;
    } else {
        Toast.makeText(getApplicationContext(), "You are not connected to Internet", Toast.LENGTH_LONG).show();
        return false;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-07T13:09:13.810

您**无法从类型函数中对非静态方法 checkInternet() 进行静态引用，**因为方法不是静态的。您有 2 个选项：

1.  将类 Functions 和方法 checkInternet() 声明为静态。它是更合适的方式，因为它是 Utility 类的方法。因此，您可以像现在使用它一样调用它。

2.或者创建一个类的对象为

```
Functions funObj = new Functions(); 
```

然后使用对象调用方法作为

```
public void Login (View v){
    if(funObj.checkInternet()){
        //do other stuff
    }

    else {
        //do other stuff
    }
} 
```

希望能帮助到你。

# wpf - 在 wpf 中在运行时添加控件

> ID：14196591
> 
> 赞同：2
> 
> 时间：2013-01-07T13:04:59.687
> 
> 标签：wpf, memory-leaks, wpf-controls, runtime

我有一个 WPF 应用程序，在其中我在运行时向窗口添加控件，如下面的代码所示：

```
tempImg = new System.Windows.Controls.Image();
tempImg.Width = 65;
tempImg.Source = new BitmapImage(new Uri("pack://application:,,,/Imagesic_web_64h.png"));
tempImg.Tag = text;
tempImg.ToolTip = text;
presenter.webLinks.Add(text);
ExtraContent.Items.Add(tempImg); 
```

在上面的代码中，ExtraContent 是一个`listbox`. 我的问题是，如果我将上述内容保持在一个循环中以向其中添加多个图像控件，`listbox`那么它会导致内存泄漏吗？

我在很多地方都有类似的代码，我可以观察到，一旦打开这个窗口并添加了控件，内存使用率就会像预期的那样变高，但即使在关闭这个窗口之后，内存也不会下降。

任何人都可以提供任何指示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T13:35:54.827

观察到的行为可能是由于 WPF 将 BitmapImages 缓存在内存中的事实造成的。我想您可以通过在加载图像时设置[BitmapcacheOption.None标志来禁用缓存：](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.bitmapcacheoption.aspx)

```
var bitmapImage = new BitmapImage();
bitmapImage.BeginInit();
bitmapImage.CacheOption = BitmapCacheOption.None;
bitmapImage.UriSource = new Uri("pack://application:,,,/Imagesic_web_64h.png");
bitmapImage.EndInit();
tempImg.Source = bitmapImage; 
```

我应该补充一点，当缓存被禁用时，您可能会遇到性能下降的问题，尤其是在多次使用图像时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T13:43:54.150

当您关闭窗口时，无法保证资源将被释放。

在 .NET 中，只有在内存不足时才释放资源是一种习惯。这样可以节省时间。

您可以禁用 @Clemens 提到的缓存，但显然，由于缺少缓存，您可能会看到性能下降。

不要过早声称内存泄漏；你可能错了。测试它。

# c# - 为什么 myString.IsNullOrEmpty() 没有内置到 .Net 中？

> ID：14196593
> 
> 赞同：23
> 
> 时间：2013-01-07T13:05:07.800
> 
> 标签：c#, .net

有点学术问题，但我试图更深入地理解框架设计。

所以我们有`String.IsNullOrEmpty(MyString)`

我们*可以*编写一个扩展方法来启用`myString.IsNullOrEmpty()`，尽管这可能不是最好的主意。请参阅：[使用 IsNullOrEmpty 扩展 String 类是否令人困惑？](https://stackoverflow.com/questions/790810/is-extending-string-class-with-isnullorempty-confusing).

所以我的问题是，为什么 MS 不将此功能编写为 .Net 框架的一部分？是否有一些性能考虑？更一般地说，为什么*任何*被视为有价值的方法或属性可以构建为可通过 String 对象访问，但不能作为字符串类型的任何对象的成员使用？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-01-07T13:15:10.187

静态方法`String.IsNullOrEmpty`是在 .NET Framework 2.0 版中引入的。扩展方法与 LINQ 一起在 .NET Framework 3.5 版中引入。因此微软在引入`IsNullOrEmpty`.

当然，`IsNullOrEmpty`不能是 的实例方法`String`，因为您不能在引用上调用方法是`null`。但是，您可以在此类引用上调用扩展方法，因为扩展方法语法只是静态方法调用的语法糖。

* * *

让我们假设这`IsNullOrEmpty`是一个扩展方法。然后你可以这样称呼它：

```
string s = null;
bool result = s.IsNullOrEmpty(); 
```

在评论中，有人假装这个调用会抛出一个`NullReferenceException`. 扩展方法将像这样声明：

```
public static class StringExtensions
{
    public static bool IsNullOrEmpty(this string s)
    {
        return s == null || s.Length == 0;
    }
} 
```

...并像这样使用...

```
 string s = null;
 bool result = s.IsNullOrEmpty(); 
```

...这只是...的语法糖

```
 string s = null;
 bool result = StringExtensions.IsNullOrEmpty(s); 
```

...因此，不会抛出异常。这样做是否是一个好主意是另一个问题（请参阅[下面的](https://stackoverflow.com/a/14196693/880990)[*usr*](https://stackoverflow.com/a/14196693/880990)[提供的答案](https://stackoverflow.com/a/14196693/880990)*）。*

 ** * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-01-07T13:10:24.393

通常认为在引用上调用扩展方法时不会失败是一种不好的做法`null`。这是因为仅通过阅读代码，您无法判断正在调用扩展方法。您的直觉是看到呼叫`((string)null).IsNullOrEmpty()`失败。

显然，这种方法不可能作为实例方法。所以我们在这里违反直觉。

也就是说，我已经在我的所有重要项目中准确地定义了这个扩展，它在很多情况下都非常有用。我愿意接受这种小小的杂质和不直观。

框架作者显然不同意。我还认为这种方法不应该进入 .NET Framework，因为它有点“高级”并且阻碍了可学习性。初学者可能会问“嗯？有时我可以安全地调用空引用上的方法，有时我不能？如何判断何时？”。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-07T13:06:57.803

因为如果您可以`IsNullOrEmpty()`在空字符串上使用，那么您可能希望将该方法重命名为`IsEmpty()`.

撇开玩笑不谈，这是该方法的实现方式：

```
public static bool IsNullOrEmpty(string value)
{
  if (value != null)
    return value.Length == 0;
  else
    return true;
} 
```

很明显，在字符串实例的情况下，条件总是为真。

另外，一个小细节。例如，`string.Concat`这是一个静态方法。例如，想知道为什么没有相对实例方法可能是合理的；通过查看它的实现，我相信他们想让这些方法尽可能地防故障。将参数传递给方法时，如果引用为空，则将它们替换为空字符串，而不是引发异常。当您事先不知道您的字符串是否实际包含值或为空时，这可能很有用，而且我猜框架的开发人员决定通过处理空字符串来提高代码的可读性会更好作为空的，并为最终用户节省了额外的检查。当然，如果`string.Concat`是一个实例方法（或者至少有一个替代方法），用户仍然可以传递空参数，但是正在操作的实例不一定是空的。*

# javascript - 如何确定从缓冲区读取的字节数传递给 node.js zlib.inflate？

> ID：14196599
> 
> 赞同：0
> 
> 时间：2013-01-07T13:05:10.630
> 
> 标签：javascript, node.js, zlib

我有一个 node.js 缓冲区实例，其中缓冲区是节的串联，每个节都有一个 20 字节的标头，后跟放气的数据。

我需要的是使用 node.js 读取压缩数据，并知道压缩序列有多少字节，这样我就可以正确地前进到下一个缓冲区部分。像这样的东西：

```
var zlib = require('zlib');
var sections = [];
// A variable named 'buffer' is declared pointing to the Buffer instance
// so I need to read the first section, then the second section etc.
buffer = buffer.slice(20); // skip the 20-byte header
zlib.inflate(buffer, function(err, inflatedData) {
  sections.push(inflatedData);
});
// How many bytes zlib readed from the buffer to
// create the 'inflatedData' instance?
// suppose the number of bytes read is pointed by the variable 'offset',
// then I could do this to read the next section:
buffer = buffer.slice(offset + 20);
zlib.inflate(buffer, function(err, inflatedData) {
  sections.push(inflatedData);
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-09-15T13:15:29.937

NodeJS 文档不清楚。只需添加: `{ info: true }`，返回对象将是一个带有解压缩数据的缓冲区和引擎的对象。例如：

```
const result = zlib.inflateRawSync(compressed, { info: true } as any) as any;
const bytesRead = result.engine.bytesWritten;  // "bytesWritten" is actually "compressedSize". 
```

如果使用 typescript，则需要强制转换为“any”，因为 @types/node@14 尚未指定此选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T01:30:12.627

```
// How many bytes zlib readed from the buffer to
// create the 'inflatedData' instance? 
```

答：都是。

`buffer.slice(20)`将从位置 20 直到缓冲区结束。这就是`zlib.inflate()`方法得到的，所以这就是它处理的。

也许这会有所帮助：[https ://meta.stackexchange.com/questions/66377/what-is-the-xy-problem](https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem)

你似乎很困惑。你到底想做什么？（也就是说，您要解决什么问题？）

# proxy - 在活动目录环境中设置代理

> ID：14196610
> 
> 赞同：1
> 
> 时间：2013-01-07T13:05:54.107
> 
> 标签：proxy, active-directory, jmeter

我正在使用配置了活动目录的机器。我正在同一台机器上开发应用程序。现在我想使用 JMeter 对该应用程序进行一些性能测试。现在，当我启动 JMeter 代理服务器并在浏览器中设置它并尝试浏览应用程序时，我收到错误“Internet Explorer 无法显示网页”。我错过了什么吗？

# mysql - 使用可能不存在的 WHERE 连接 2 个表

> ID：14196614
> 
> 赞同：-1
> 
> 时间：2013-01-07T13:06:02.237
> 
> 标签：mysql, join

我有 2 个简单的表：

*   雇员
*   员工报告

员工预计每天提交 1 份报告。

现在，这里的需求是：一目了然地查看员工提交的所有报告，没有报告的员工只会显示一个空白的报告字段..基本上这意味着所有员工都将被列出，无论他们是否有报告

我的 GUI 上的示例输出：

```
2012-01-03
Employee 1 : I ate a burger
Employee 2 : I ate french frice
Employee 3 : 
Employee 4 : i ate hotdog 
```

我可以在多个 SQL 查询中轻松做到这一点。1 用于按特定顺序列出所有员工，另一个用于查询员工的每个报告。

当然这不是有效的..

我可以轻松地在员工表上对员工报告进行左连接，但是

问题：由于我必须针对特定的报告日期，mYSQL 只输出带有报告的员工.. 未提交的员工未列出。

这是我的基本 sql 示例

```
SELECT
employees.eid,
employees.fname,
employees.lname,
employee_reports.report
FROM
employees
LEFT JOIN employee_reports ON employees.eid = employee_reports.eid
WHERE 
report_date = '2013-01-03' 
```

我可以在一个查询中执行此操作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T13:12:48.573

你的 where 也需要能够检查空值，所以让它

```
SELECT
employees.eid,
employees.fname,
employees.lname,
employee_reports.report
FROM
employees
LEFT JOIN employee_reports ON employees.eid = employee_reports.eid
WHERE 
report_date = '2013-01-03'
OR report_date IS NULL 
```

# php - html5文件上传api和laravel

> ID：14196615
> 
> 赞同：2
> 
> 时间：2013-01-07T13:06:05.763
> 
> 标签：php, jquery, html, laravel, ajax-upload

我已经为我的 laravel 应用程序创建了一个 HTML5 拖放文件上传，但是我在设置文件名时遇到了一些问题，因为我的所有控制器都可以使用该变量。

用户上传文件的过程，是填写一些会员信息，提交表单后，通过ajax加载了一个新的步骤，这一步是HTML5拖放文件上传。

问题不在于文件上传，该功能工作正常，我的问题是上传操作（如下），

```
public function action_upload()
{
    $uploadDir = "public/uploads/";
    $file = Input::get('value');
    $name = Input::get('name');

    //Get the mime
    $getMime = explode(".", $name);
    $mime = end($getMime);

    //seperate the data out
    $fileData = explode(',', $file);

    //Encode it correctly
    $encodedData = str_replace(' ', '+', $fileData[1]);
    $decodedData = base64_decode($encodedData);

    //create a random name, will help with not overwriting filesystems.
    $this->randomName = substr_replace(sha1(microtime(true)), '', 12).'.'.$mime;

    if(file_put_contents($uploadDir.$this->randomName, $decodedData)) {
        echo $this->randomName.":uploaded successfully";
    } else {
        echo "Something went wrong. Check that the upload is not corrupted";
    }
} 
```

如您所见，我正在设置一个变量`randomName`，在 ajax/HTML5 上传完成后，将调用以下代码，

```
public function action_source()
{
    if(Input::get('step') == "step3") {
        //echo $this->randomName;
        return json_encode(array('next' => $this->data['url']."/project/launch", 'file' => $this->randomName));
    }
    return View::make('project.source', $this->data);
} 
```

然而，在返回的 JSON 对象中，`file`返回为`NULL`，我不明白为什么，在我的课程开始时，`public $randomName`我应该能够通过以下方式访问它，`$this->randomName;`

如果正确，函数调用的顺序，

动作上传（）>动作来源（）

为什么我无法访问`$randomName`？

# java - 面向对象编程

> ID：14196616
> 
> 赞同：-6
> 
> 时间：2013-01-07T13:06:06.610
> 
> 标签：java

面向对象编程..我的主要方法有问题，它说找不到符号。为什么？

在这部分：

```
double grossPay = payroll.getHoursWorked * payroll.getPayRate * payroll.getTaxRate ; 
```

我所知道的是我已经在这里的基类中声明了它：

```
public class Exercise1 {
    private long hoursWorked;
    private double payRate;
    private double taxRate;   

    public void setHoursWorked(long temp){
        hoursWorked = temp;
    }

    public void setPayRate (double temp){
        payRate = temp;
    }

    public void setTaxRate (double temp){
        taxRate = temp;
    }

    public double getTaxRate (){
        return(taxRate);
    }

    public double getPayRate (){
         return(payRate);
    }

    public double getHoursWorked (){
        return(hoursWorked);
    }
} 
```

这是我的主要课程：

```
public class payroll{
    public static void main(String args[]){
        Exercise1 payroll = new Exercise1();
        payroll.setHoursWorked(28);
        payroll.setPayRate (120.00);
        payroll.setTaxRate (0.30);

        double grossPay = payroll.getHoursWorked * payroll.getPayRate * payroll.getTaxRate;
        System.out.println("Gross pay is:"+ grossPay);   
    }
} 
```

为什么一直问“找不到符号”？请帮忙..我是编程新手:(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T13:08:16.623

`getHoursWorked`等`getPayRate`是**方法**，即使你没有传递参数，它们仍然需要空括号才能被调用。

用 替换它们`getHoursWorked()`，`getPayRate()`你会笑的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T13:07:29.670

您在函数调用结束时忘记了 ()。

```
double grossPay = payroll.getHoursWorked() * payroll.getPayRate() * payroll.getTaxRate(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-07T13:08:04.167

用这个

```
double grossPay = payroll.getHoursWorked() * payroll.getPayRate() * payroll.getTaxRate() ; 
```

因为`getHoursWorked`是方法，所以你需要这样调用方法`payroll.getHoursWorked()`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-07T13:11:43.423

您应该使用 () 调用方法；括号调用方法。喜欢-

```
payroll.getHoursWorked() * payroll.getPayRate() 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-07T13:09:00.817

将 () 放在每个 func 调用的末尾。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-07T13:09:29.940

尝试这个：

```
double grossPay = payroll.getHoursWorked() * payroll.getPayRate() * payroll.getTaxRate() ; 
```

# c# - 如何将 C# 元组暴露给 C++

> ID：14196625
> 
> 赞同：3
> 
> 时间：2013-01-07T13:06:40.193
> 
> 标签：c#, c++, com, interop, com-interop

我是一名 C++ 开发人员，目前正在用 C# 编写一个必须暴露给 C++ 的库。到目前为止，我正在使用 C# 中的元组来获取字符串对的列表，该列表在以下结构中进行了描述。

```
public struct ProductInfo
{
    string ProductID;
    List<Tuple<String,String>> attributes;
}; 
```

我想将此结构公开给 C++。我期待 C++ 开发人员使用 std::pair 来填写。但我不确定如何将相同的内容从 C++ 编组到 C#。我的谷歌搜索并没有给我太多帮助。有人可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T17:13:22.393

根据您希望互操作的工作方式，您需要[How To Marshal Structures Using PInvoke](https://docs.microsoft.com/en-us/cpp/dotnet/how-to-marshal-structures-using-pinvoke)或[SWIG](http://www.swig.org)。

# php - jquery ajax 表单

> ID：14196627
> 
> 赞同：0
> 
> 时间：2013-01-07T13:06:42.900
> 
> 标签：php, jquery, ajax

我`null`从我的文本框中获取值。

日期工作正常，但我无法从输入框中获取数据。

```
(function () {

    if ($('#contactform').length) {

        var $form = $('#contactform'),
            $loader = '<img src="images/preloader.gif" alt="Loading..." />';
        $form.append('<div class="hidden" id="contact_form_responce">');

        var $response = $('#contact_form_responce');
        $response.append('<p></p>');

        $form.submit(function (e) {

            $response.find('p').html($loader);

            var data = {
                action: "contact_form_request",
                values: $("#contactform").serialize()
            };

            //send data to server
            $.post("php/contact-send.php", data, function (response) {

                $(".wrong-data").removeClass("wrong-data");
                $response.find('img').remove();

                if (response.is_errors) {

                    $response.find('p').removeClass().addClass("error type-2");
                    $.each(response.info, function (input_name, input_label) {

                        $("[name=" + input_name + "]").addClass("wrong-data");
                        $response.find('p').append('Please enter correctly "' + input_label + '"!' + '</br>');
                    });

                } else {

                    $response.find('p').removeClass().addClass('success type-2');

                    if (response.info == 'success') {

                        $response.find('p').append('Your email has been sent!');
                        $form.find('input:not(input[type="submit"], button), textarea, select').val('').attr('checked', false);
                        $response.delay(1500).hide(400);
                    }

                    if (response.info == 'server_fail') {
                        $response.find('p').append('Server failed. Send later!');
                    }
                }

                // Scroll to bottom of the form to show respond message
                var bottomPosition = $form.offset().top + $form.outerHeight() - $(window).height();

                if ($(document).scrollTop() < bottomPosition) {
                    $('html, body').animate({
                        scrollTop: bottomPosition
                    });
                }

                if (!$('#contact_form_responce').css('display') == 'block') {
                    $response.show(450);
                }

            });

            e.preventDefault();

        });

    }

})(); 
```

这是php：

```
require_once "../includes/database.php";

$cname    = $_POST['name'];
$cemail   = $_POST['email'];
$cmessage = $_POST['message'];
$date     = date("Y-m-d");  
$sql      = "INSERT INTO messages (sendername,senderemail,message,datesent) VALUES (:name,:email,:message,:date)";
$qry      = $db->prepare($sql);

$qry->execute(array(
  ':name'    =>$cname,
  ':email'   =>$cemail,
  ':message' =>$cmessage,
  ':date'    =>$date
)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T13:13:07.013

问题在于您将 POST 数据分配给`$.post`函数的方式。

**麻烦的代码**

```
var data = {
   action: "contact_form_request",
   values: $("#contactform").serialize()
}; 
```

发生的事情是数据作为多维数组被发送回，您需要将其包含在您的 php 页面中。

尝试更改`$_POST['name']`为`$_POST['values']['name']`以匹配您的 jQuery 的格式。您需要对每个 POST 变量进行此更改。您始终`var_dump($_POST); die;`可以确保数组的嵌套。

我应该提一下，如果您想直接访问您的 POST 数据（就像在您的原始 php 中一样），您应该查看[`jQuery .post()`](http://api.jquery.com/jQuery.post/)文档。

直接访问 POST ( `$_POST['name']`) 的语法需要以下代码：

```
$.post('mypostpage.php', $('myform').serialize(), function(response) {
    //do work
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T13:10:02.483

尝试将 移动`e.preventDefault()`到函数的开头。否则表单可能会在不等待执行所有 jQuery 的情况下提交

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T13:12:59.380

发布您的表单 html 代码

尝试用

```
$('document').ready(function() {

  }); 
```

# c# - 使用循环将值添加到字典

> ID：14196639
> 
> 赞同：1
> 
> 时间：2013-01-07T13:07:36.637
> 
> 标签：c#

我正在构建一个用匹配填充包的小应用程序，在第一个函数中我设置包的数量，在第二个函数中我“插入”匹配包的数量。当我尝试运行它时，它一直告诉我“已经添加了具有相同密钥的项目。”，为什么会这样以及如何修复它？

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace Drill
{
    public class NewMatchesGame2
    {
        Dictionary<int, int> dictionaryPack = new Dictionary<int, int>();

        public void manageGame()
        {
            Console.WriteLine("how many packs? : ");
            string p = Console.ReadLine();
            int packs = Convert.ToInt32(p);

            for (int i = 0; i < packs; i++)
            {
                dictionaryPack.Add(i, 0);
            }

            InitializeGame();
        }

        public void InitializeGame()
        {
            string s = dictionaryPack.Count.ToString();
            int Pa = Convert.ToInt32(s);
            int minPack = Pa / Pa;
            int dmin = minPack;

            while (Pa > minPack)
            {

                Console.Write("how many matches in pack number :" + minPack + " : ");
                string a = Console.ReadLine();
                int matchNumber = Convert.ToInt32(a);
                int val = matchNumber;

                for (int x = 0; x < minPack; x++)
                {
                    dictionaryPack.Add(minPack , matchNumber);
                }
                minPack++;

                /// Print(matchNumber);
                /// computerPlay(matchNumber);
            }

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T13:12:30.270

在您的函数`manageGame`和`Initialize`中，您使用相同`dictionaryPack`的 .

并且当您插入时`dictionaryPack.Add("KEY","VALUE")`，密钥应该是唯一的。显然你没有使用唯一值。

您正在尝试更新包。但改用 Add 方法！！

# android - 在 Listview 中显示图片 - Android

> ID：14196641
> 
> 赞同：2
> 
> 时间：2013-01-07T13:07:39.867
> 
> 标签：android, listview, imageview

我`ListView`在我的应用程序中有一个..`ListView`可以包含文本、图像或两者兼而有之。如果有图像，我想在第一行显示文本并在下一行显示图像集。我应该使用哪个？`ViewFlipper`或`ViewPager`其他什么？我一直在寻找有关如何执行此操作的示例。

任何指针都会很有帮助！

谢谢。

编辑：我想在列表视图的第二行中显示第一行中的文本和图片列表（3-5）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T14:08:09.083

如果您使用的是自定义适配器，我假设您是，那么您必须向其中提供某种数组。我认为您不能从适配器本身向 ListView 添加另一行，因此我会考虑解析数组或您用于填充列表视图的任何数据。从那里，创建另一个数组，该数组具有单独的文本和图像集条目（如果存在）。然后将最终数组输入适配器。将 JSONArray 与 JSONObjects 一起使用可能会更好，因为您可以为所有条目设置标签。

然后，在 getView() 方法中的适配器内部，检查条目类型是文本还是图像，并根据它更改它膨胀的 xml 布局。或者您可以使用相同的 xml 并使用 setVisibility() 控制不同的视图。

如果您想让图像在其列表项中水平滚动，您可能必须使用 Horizo​​ntalScrollView。我从未使用过它，但我知道在另一个滚动元素（ListView）中包含该滚动元素可能会给您带来一些问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-06T09:41:54.217

创建带有图片的 ListView 有 3 个主要部分： 1- 在主布局中创建一个简单的列表视图

2-创建自定义列表视图项目布局：

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:layout_width="match_parent"
 android:layout_height="match_parent"
 android:orientation="horizontal" >
<ImageView
 android:id="@+id/img"
 android:layout_width="50dp"
 android:layout_height="50dp"/>
 <TextView
 android:id="@+id/txt"
 android:layout_width="wrap_content"
 android:layout_height="50dp" />
</LinearLayout> 
```

然后创建一个自定义 ListView 类：

```
private final Activity context; // the context view of the list
private final String[] countries; // the list of countries
private final Integer[] imageId; // the list of images that you already uploaded to your @Drawable file (res/drawable-xdpi/) 
```

之后是一个构造函数来创建 customView 对象：

```
//class constructor
public CustomList(Activity context,String[] countries, Integer[] imageId) 
{
super(context, R.layout.list_item, countries);
this.context = context;
this.countries = countries;
this.imageId = imageId;
} 
```

customView 类有一个返回项目视图的 getView 方法：

```
@Override
public View getView(int position, View view, ViewGroup parent) {
LayoutInflater inflater = context.getLayoutInflater();
View rowView= inflater.inflate(R.layout.list_item, null, true);
TextView txtTitle = (TextView) rowView.findViewById(R.id.txt);
ImageView imageView = (ImageView) rowView.findViewById(R.id.img);
txtTitle.setText(countries[position]);
imageView.setImageResource(imageId[position]);
return rowView;
} 
```

最后在 mainActivity 中为您的列表创建适配器：

```
 yourList.setAdapter(new CustomList(MainActivity.this, countries, imageId)); 
```

您可以在此处查看完整的源代码并在[此处下载](http://www.bourax.com/ismaidro/index.php?controller=post&action=view&id_post=4)

# c# - 如果我正在调用 SqlReader.Read，我应该调用 SqlDataReader.HasRows

> ID：14196644
> 
> 赞同：23
> 
> 时间：2013-01-07T13:08:03.807
> 
> 标签：c#, sql, .net, methods, sqldatareader

尝试查看在函数`if (dr.HasRows)`之前添加一个是否有益。`while (dr.read())`我的意思是，从技术上讲，如果它没有行就不会被读取，那么如果你先检查一下这有关系吗？

```
using (SqlDataReader dr = cmd.ExecuteReader())
{
    if (dr.HasRows)
    {
        while (dr.Read())
        {
            ....do stuff here
        }
    }
} 
```

或者如果您只是确保它具有提供的价值，这是否会本质上做同样的事情......

```
using (SqlDataReader dr = cmd.ExecuteReader())
{
    while (dr.Read())
    {
        ....do stuff here
    }
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-07T13:17:07.077

`(dr.HasRows)`否..检查DataReader 是否包含任何行不是强制性的。

`Read()`如果没有更多的行要获取，将返回**False**`Reader.HasRows` ，但它更能说明它的作用，`Read()`因此使用它是一个***好习惯***，`Reader.HasRows`因为你可能会不小心做了一些`Read()`可能会陷入异常的事情。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-11-28T22:37:52.637

当心。HasRows() 为我的 CTE 查询返回 false，即使有行（实际上是 437 行）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-07T13:12:18.537

检查 DataReader 是否有行 (dr.HasRows) 不是强制性的。如果有更多数据要读取，Read() 方法将返回 true，如果没有更多数据，则返回 false，从而中断 while 循环。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-07T13:11:13.360

我认为这主要用于存储过程，这些存储过程可能有也可能没有数据（一个或多个结果集），并且如果您还执行除了 while 循环之外的其他事情（即初始化页眉/页脚等），首先检查“更容易”。有数据时）。

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2013-06-14T06:24:50.307

尝试

```
 string myconnection = "datasource= localhost;port=3306;username=root;password=root;";
            MySqlConnection myconn = new MySqlConnection(myconnection);

            //MySqlDataAdapter mydata = new MySqlDataAdapter();
            MySqlDataReader myreader;

            MySqlCommand SelectCommand = new MySqlCommand("select *from student_info.student_info where username= '" + textBox1.Text +" 'and password=' " + textBox2.Text +"';",myconn );

            myconn.Open();

            myreader = SelectCommand.ExecuteReader();
            int count = 0;
            if (myreader.HasRows) //returing false but i have 4 row
            {
                while (myreader.Read()) //returing false 
                {
                    MessageBox.Show("in button3");
                    count = count + 1;
                }
            } 
```

需要您的意见

# jquery - jQuery 多过滤器

> ID：14196646
> 
> 赞同：1
> 
> 时间：2013-01-07T13:08:12.187
> 
> 标签：jquery, html, filter

我正在一个网站上工作，该网站有一些页面，如关于、投资组合、联系人等。我想增加这些页面以不同语言显示的可能性。荷兰语是默认语言，另一种是英语。在网站顶部有一个带有可点击链接的菜单。每个链接显示一个页面。在网站的右上角有一个语言选择器。单击标志以所选语言打开当前页面。

所有页面都是 div 的，像这样：

```
<div class="item about nl">content in Dutch</div>
<div class="item about en">content in English</div>` 
```

ETC...

About 是默认打开的荷兰语页面。我可以过滤单个页面，但我需要额外语言过滤器的帮助。需要明确的是，当进入网站时，除了荷兰语的“关于”页面之外，所有页面（div）都被隐藏。单击链接会隐藏当前页面并打开新页面。单击一种语言会以所选语言显示当前页面。我希望有一个人可以帮助我。提前Tnx。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T13:26:14.230

我不会使用 javascript 来执行此操作，而是在基于[`Accept-Language`](http://en.wikipedia.org/wiki/Content_negotiation). 例如，请参阅Apache 中的[内容协商](http://httpd.apache.org/docs/2.2/content-negotiation.html)。

此外，您可以提供语言链接并将当前语言首选项保存在会话变量中。

当您向多个`div`s 提供多种语言的内容时，您也增加了传输的页面大小。当您计划提供多种语言时，这可能会变得非常大。

# mysql - 更新 MySQL 表中的 Varchar 条目

> ID：14196649
> 
> 赞同：0
> 
> 时间：2013-01-07T13:08:23.490
> 
> 标签：mysql, date, varchar, create-table

```
CREATE TABLE `Schedule` (
  `id` smallint(6) NOT NULL AUTO_INCREMENT,
  `name` varchar(30) DEFAULT NULL,
  `deptime` varchar(20) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=3221 DEFAULT CHARSET=latin1; 
```

该字段`deptime`包含以下格式的条目：`2012-09-04 09:17`.

现在我需要更改此字段中所有条目的日期，即`2013-07-01 09:17`. 时间，即`09:17`不应该改变。如何使用一些`UPDATE`查询快速完成此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T13:16:15.767

或者试试这个...

```
 UPDATE schedule SET deptime = CONCAT('2013-07-01 ',TIME(deptime)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T13:14:33.560

试试这个-

```
update table Schedule 
set deptime = STR_TO_DATE(deptime,'%Y-%m-7 %h: %i');
OR
update table Schedule 
set deptime = STR_TO_DATE(deptime,'%Y-%m-$PHPVar %h: %i'); 
```

1) 在 day 字段中给出硬编码值或提供 PHP 变量（如果有）。2) 在 str_to_date 函数中使用 %H 24 小时格式和 %h 12 小时格式

# javascript - JavaScript框架刹车但页面不断刷新

> ID：14196650
> 
> 赞同：0
> 
> 时间：2013-01-07T13:08:24.727
> 
> 标签：javascript, frame, page-refresh

我曾经在某个网站上 ping 我的博客，当有人从 ping 网站访问我的博客时，他们会在我的博客顶部放置一个框架（插件）之类的东西。

我打算在 30 秒后打破那个框架，我做到了。但是，如果我使用下面提到的代码。我的博客会在 30 秒后打破框架，但它也会每 30 秒不停地刷新我的博客。

“我怎样才能在 30 秒内打破框架而不不断刷新我的网站？”

```
<script language="JavaScript"> 

     function getgoing()
      {
        top.location.replace(self.location);
       }

       if (top.frames.length > 0)
        {
         setTimeout('getgoing()',30000);
         } 

    </script> 
```

对不起英语不好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T16:19:52.153

您需要停止帧刷新，因为它似乎不会停止刷新，可能是这样的：

```
<script language="JavaScript"> 

        var done = false;   
        function getgoing() {
            if(done == false){      
              top.location.replace(self.location);
              done = true;
            }
        }

        if (top.frames.length > 0) {
           setTimeout('getgoing()',30000);
        } 

        </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T01:26:34.370

```
<script language='JavaScript' type='text/javascript'> 

if (top.location != self.location) top.location.replace(self.location); 

</script> 
```

如果她使用这样的代码，它将删除框架，但我认为她想在几秒钟后使用一个代码来删除该框架，如果她使用她提到的代码，它将删除框架，但她的博客将在 30 秒内刷新.

# c# - 从 XML 中删除节点

> ID：14196651
> 
> 赞同：-1
> 
> 时间：2013-01-07T13:08:33.773
> 
> 标签：c#, xml, linq-to-xml

我在`XML`下面`web.config`

```
 <handlers>
  <remove name="ChartImageHandler" />            
  <add name="PageNotFoundhandelarrtf" path="*.rtf" verb="*" 
     modules="IsapiModule"  scriptProcessor="%windir%\Microsoft.NET\Framework\v2.0.50727\
     aspnet_isapi.dll" resourceType="Unspecified"  preCondition=
     "classicMode,runtimeVersionv2.0,bitness32" />
  <add name="ChartImageHandler" preCondition="integratedMode" verb="GET,HEAD" path="ChartImg.axd" type="System.Web.UI.DataVisualization.Charting.ChartHttpHandler, System.Web.DataVisualization,  Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
  <add name="Keyoti_SearchEngine_Web_CallBackHandler_ashx" verb="*" preCondition="integratedMode" path="Keyoti.SearchEngine.Web.CallBackHandler.ashx" type="Keyoti.SearchEngine.Web.CallBackHandler, Keyoti2.SearchEngine.Web, Version=2012.5.12.706, Culture=neutral, PublicKeyToken=58d9fd2e9ec4dc0e" />
  <add path="Reserved.ReportViewerWebControl.axd" 
     verb="*"  type="Microsoft.Reporting.WebForms.HttpHandler,
     Microsoft.ReportViewer.WebForms, Version=9.0.0.0, Culture=neutral,  PublicKeyToken
     =b03f5f7f11d50a3a" validate="false" />
 </handlers> 
```

我需要从中删除最后一个节点`XML`。我首先需要找到应该删除以上节点的部分。`ReportViewer``<handler>``<handler>`

我正在使用下面的代码，但它不起作用......你能指导我下面的代码有什么问题吗......

```
XElement xEmp = XElement.Load(PATH + WEB_CONFIG_PATH);
var empDetails = from emps in xEmp.Elements("handlers")
                 where emps.Element("path").Equals("Reserved.ReportViewerWebControl.axd")
                 select emps;
empDetails.First().Remove();
xEmp.Save(@"D:\Employees.xml"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T13:14:59.423

尝试使用下一个代码片段

```
XElement xEmp = XElement.Load(PATH + WEB_CONFIG_PATH);
var pathToRemove = "Reserved.ReportViewerWebControl.axd";

var empDetails= xEmp.XPathSelectElements("//handlers")
                    .Descendants()
                    .First(d => d.Attributes().Any(atr => atr.Name == "path" && atr.Value == pathToRemove));

empDetails.Remove();
xEmp.Save(@"D:\Employees.xml"); 
```

如果您想坚持使用查询语法，您仍然需要稍微混合一下：

```
var empDetails = from emps in xEmp.XPathSelectElements("//handlers").Descendants()
                 where emps.Attributes().Any(atr => atr.Name == "path" && atr.Value == pathToRemove)
                 select emps; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T13:41:40.867

我运行了这段代码，它似乎可以工作。这就是我所做的。. .

```
XDocument doc = XDocument.Parse(INPUT_DATA);
XElement handlers = doc.Element("handlers");
IEnumerable<XElement> add = null;
IEnumerable<XElement> pFind = null;

if (handlers != null)
{             
    add = handlers.Elements();
    if (add != null)
    {

        pFind = (from itm in add
                    where itm.Attribute("path") != null
                    && itm.Attribute("path").Value != null
                    && itm.Attribute("path").Value == "Reserved.ReportViewerWebControl.axd"
                    select itm);

        if(pFind != null)
            pFind.FirstOrDefault().Remove();
    }
} 
```

这是完整的测试代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Xml.Linq;

namespace XDocu
{
    class Program
    {
        static void Main(string[] args)
        {
        XDocument doc = XDocument.Parse(INPUT_DATA);
        XElement handlers = doc.Element("handlers");
        IEnumerable<XElement> add = null;
        IEnumerable<XElement> pFind = null;
        int oldCount = doc.Element("handlers").Elements().Count();

        if (handlers != null)
        {             
            add = handlers.Elements();
            if (add != null)
            {

                pFind = (from itm in add
                            where itm.Attribute("path") != null
                            && itm.Attribute("path").Value != null
                            && itm.Attribute("path").Value == "Reserved.ReportViewerWebControl.axd"
                            select itm);

                if(pFind != null)
                    pFind.LastOrDefault().Remove();
            }
        }

            //print it
            if (add != null)
                Console.WriteLine("Old Count: {0}\nNew Count: {1}", oldCount, add.Count());
        }

        const string INPUT_DATA =
        @"<?xml version=""1.0""?>
        <handlers>
        <remove name=""ChartImageHandler"" />            
        <add name=""PageNotFoundhandelarrtf"" path=""*.rtf"" verb=""*"" 
            modules=""IsapiModule""  scriptProcessor=""%windir%\Microsoft.NET\Framework\v2.0.50727\
            aspnet_isapi.dll"" resourceType=""Unspecified""  preCondition=
            ""classicMode,runtimeVersionv2.0,bitness32"" />
        <add name=""ChartImageHandler"" preCondition=""integratedMode"" verb=""GET,HEAD"" path=""ChartImg.axd"" type=""System.Web.UI.DataVisualization.Charting.ChartHttpHandler, System.Web.DataVisualization,  Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"" />
        <add name=""Keyoti_SearchEngine_Web_CallBackHandler_ashx"" verb=""*"" preCondition=""integratedMode"" path=""Keyoti.SearchEngine.Web.CallBackHandler.ashx"" type=""Keyoti.SearchEngine.Web.CallBackHandler, Keyoti2.SearchEngine.Web, Version=2012.5.12.706, Culture=neutral, PublicKeyToken=58d9fd2e9ec4dc0e"" />
        <add path=""Reserved.ReportViewerWebControl.axd"" 
            verb=""*""  type=""Microsoft.Reporting.WebForms.HttpHandler,
            Microsoft.ReportViewer.WebForms, Version=9.0.0.0, Culture=neutral,  PublicKeyToken
            =b03f5f7f11d50a3a"" validate=""false"" />
        </handlers>";

    }
} 
```

编译器显示根据您的标准正确删除项目的输出，我们留下 . . .

```
<handlers>
  <remove name="ChartImageHandler" />
  <add name="PageNotFoundhandelarrtf" path="*.rtf" verb="*" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v2.0.50727\             aspnet_isapi.dll" resourceType="Unspecified" preCondition="classicMode,runtimeVersionv2.0,bitness32" />
  <add name="ChartImageHandler" preCondition="integratedMode" verb="GET,HEAD" path="ChartImg.axd" type="System.Web.UI.DataVisualization.Charting.ChartHttpHandler, System.Web.DataVisualization,  Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
  <add name="Keyoti_SearchEngine_Web_CallBackHandler_ashx" verb="*" preCondition="integratedMode" path="Keyoti.SearchEngine.Web.CallBackHandler.ashx" type="Keyoti.SearchEngine.Web.CallBackHandler, Keyoti2.SearchEngine.Web, Version=2012.5.12.706, Culture=neutral, PublicKeyToken=58d9fd2e9ec4dc0e" />
</handlers> 
```

也就是说，除了`<Add path="Reserved.ReportViewerWebControl.axd" . . . />`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T13:43:17.347

从 XML 文件中删除节点在这里给出：[http ://www.wrangle.in/topic/asw0zgftjzqr/C-Sharp-tricks-deleting-node-from-xml-fi](http://www.wrangle.in/topic/asw0zgftjzqr/C-Sharp-tricks-deleting-node-from-xml-fi)

# xml - 如何在 IntelliJ IDEA 中对没有架构的文件禁用 XML 验证

> ID：14196655
> 
> 赞同：4
> 
> 时间：2013-01-07T13:08:42.853
> 
> 标签：xml, intellij-idea

我正在处理 logback.xml 文件，您可能知道，logback 没有不同的架构。

因此 IntelliJ 将每个标签标记为“无法解析符号”。

我该如何禁用它？我不希望 IntelliJ 将没有架构的 XML 文件标记为错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-12T18:05:06.970

在项目视图中，选择文件，打开上下文菜单（通过右键单击文件）并选择“标记为文本”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T13:15:17.433

有一个“检查员”图标。如果单击它，则可以更改检查级别。

您可以在底部右侧的栏中找到它。刚刚离开显示您的内存使用情况的栏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-01T11:20:29.757

可视化 Itchy 的含义：取消选中“导入弹出窗口”复选框。

![IntelliJ IDEA 检查](../Images/b66c4f1045307eb2eb90fa34195ae0a9.png)

# c# - 如何从可移植类库调用 REST 服务？

> ID：14196665
> 
> 赞同：6
> 
> 时间：2013-01-07T13:09:07.880
> 
> 标签：c#, asp.net, windows-phone-7, rest, windows-8

我的目标项目是 Windows 8、WinRT 和 Windows Phone 8。我正在使用可移植类库作为解决方案，以便共享源代码。我需要调用在另一个 MVC Web Api 项目中创建的一些 REST 服务，但`HttpClient`类在 PCL 中不可用。哪个是解决它的好方法？我在考虑一个服务接口，然后为每个平台创建一个项目，在每种情况下使用`HttpClient`或`WebClient` 适当的类。这种方法可行，但我想知道是否还有其他方法。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-21T16:11:18.987

Microsoft 已[将该库重写`HttpClient`为可移植 (PCL)](http://blogs.msdn.com/b/bclteam/archive/2013/02/18/portable-httpclient-for-net-framework-and-windows-phone.aspx)，它[位于 NuGet 上](https://nuget.org/packages/Microsoft.Net.Http)。~~目前，它仅作为预发布版提供，因此如果您使用 NuGet GUI 包管理器，请确保您设置为“包括预发布版”。~~从命令行：

```
Install-Package Microsoft.Net.Http 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T13:15:17.660

从微软的角度来看，HttpClient 不一定是可移植的。唯一的另一种方法是创建每个项目将实现的单独库，并按照您的描述进行操作。这样，您可以在您希望定位的所有平台上实现通用性。

我认为在您所针对的平台方面存在某种程度的等效性......如果您必须拥有单独的项目，您可以将您的代码文件链接到另一个项目，这样您就不必维护多个项目，或者甚至使用[Project Linker](http://visualstudiogallery.msdn.microsoft.com/5e730577-d11c-4f2e-8e2b-cbb87f76c044)（虽然我不知道是否存在 2012 版本）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-11T10:48:11.393

Portable REST 最近在 GitHub 上可用，鉴于 WebClient 不可用，它应该有助于发出 Web 请求：

[https://github.com/advancedrei/PortableRest#readme](https://github.com/advancedrei/PortableRest#readme)

> PortableRest 是一个可移植类库，用于在其他可移植类库中实现 REST API 客户端。它利用 JSON.NET 进行快速、可定制的序列化，并利用 Microsoft.Bcl.Async 库在任何平台上等待执行。它被设计成在很大程度上与 RestSharp 兼容，尽管您需要进行一些更改并重新编译。
> 
> 此初始版本对简单 JSON 请求的支持有限。更多选项（包括 XML 和希望 DataContract 支持）将在以后的版本中提供。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-10-24T22:20:22.273

很晚了，但这是我必须做的一个简单代码，PLC 适用于除 Xbox 360 之外的所有内容（可能也可以）。我无法将 HttpClient 用于此目标列表。

```
public class WebDownload
{
    public class WebDownloadResult
    {
        public HttpStatusCode StatusCode { get; set; }
        public int StatusCodeNumber { get; set; }
        public bool ErrorOccured { get; set; }
        public string ResultString { get; set; }
    }

    public static void Download(string url, Action<WebDownloadResult> resultAction)
    {
        WebDownloadResult response = new WebDownloadResult();
        try
        {
            HttpWebRequest myHttpWebRequest = (HttpWebRequest)WebRequest.Create(url);

            IAsyncResult result = (IAsyncResult)myHttpWebRequest.BeginGetResponse(new AsyncCallback(delegate(IAsyncResult tempResult)
            {
                HttpWebResponse webResponse = (HttpWebResponse)myHttpWebRequest.EndGetResponse(tempResult);
                Stream responseStream = webResponse.GetResponseStream();

                using (StreamReader reader = new StreamReader(responseStream, Encoding.UTF8))
                {
                    response.ResultString = reader.ReadToEnd();
                    response.StatusCode = webResponse.StatusCode;
                    response.StatusCodeNumber = (int)webResponse.StatusCode;

                    if (resultAction != null) resultAction(response);
                }
            }), null);
        }
        catch 
        {
            response.ErrorOccured = true;
            if (resultAction != null) resultAction(response);
        }
    }
} 
```

# javascript - 从编码的 base64 画布下载图像给出 maxUrlLength 值错误

> ID：14196666
> 
> 赞同：1
> 
> 时间：2013-01-07T13:09:12.213
> 
> 标签：javascript, asp.net, base64, html5-canvas

我的网页上有一个画布绘图，它使用 javascript 在其上创建了 base64 图像格式。然后我对图像的 URL 进行编码，这样我就有了图像的编码 URL。我还在这里阅读了一篇文章，他们说如果你对编码字符串执行 window.location.href ，你可以下载图像。我已经尝试了您可以在评论中看到的选项 window.location.href = img 和 windows.open(img, 'download') 但两者都出现错误请帮助。我只需要将画布绘图作为图像下载到服务器。

Post :[下载图片是 src 属性 (base64)](https://stackoverflow.com/questions/13354037/download-image-which-is-src-attribute-base64)

错误：此请求的 URL 长度超过了配置的 maxUrlLength 值。

```
<script type="text/javascript">
function loaded() {
    var signature = new ns.SignatureControl({ containerId: 'container', callback: function () {
    }
    });
    signature.init();
}
window.addEventListener('DOMContentLoaded', loaded, false);
function to_image() {
    var canvas = document.getElementById("signatureCanvas");
    document.getElementById("theimage").src = canvas.toDataURL();
    var pngData = canvas.toDataURL("image/png");
    var img = base64_encode(canvas.toDataURL("image/png"))
    //window.location.href = img
    //window.open(img, 'download');
}
function base64_encode(data) {
    // http://kevin.vanzonneveld.net
    // +   original by: Tyler Akins (http://rumkin.com)
    // +   improved by: Bayron Guevara
    // +   improved by: Thunder.m
    // +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)
    // +   bugfixed by: Pellentesque Malesuada
    // +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)
    // +   improved by: Rafał Kukawski (http://kukawski.pl)
    // *     example 1: base64_encode('Kevin van Zonneveld');
    // *     returns 1: 'S2V2aW4gdmFuIFpvbm5ldmVsZA=='
    // mozilla has this native
    // - but breaks in 2.0.0.12!
    //if (typeof this.window['btoa'] == 'function') {
    //    return btoa(data);
    //}
    var b64 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
    var o1, o2, o3, h1, h2, h3, h4, bits, i = 0,
ac = 0,
enc = "",
tmp_arr = [];

    if (!data) {
        return data;
    }

    do { // pack three octets into four hexets
        o1 = data.charCodeAt(i++);
        o2 = data.charCodeAt(i++);
        o3 = data.charCodeAt(i++);

        bits = o1 << 16 | o2 << 8 | o3;

        h1 = bits >> 18 & 0x3f;
        h2 = bits >> 12 & 0x3f;
        h3 = bits >> 6 & 0x3f;
        h4 = bits & 0x3f;

        // use hexets to index into b64, and append result to encoded string
        tmp_arr[ac++] = b64.charAt(h1) + b64.charAt(h2) + b64.charAt(h3) + b64.charAt(h4);
    } while (i < data.length);

    enc = tmp_arr.join('');

    var r = data.length % 3;

    return (r ? enc.slice(0, r - 3) : enc) + '==='.slice(r || 3);

} 
```

很好的编辑和答案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:10:47.217

在将图像数据分配给 window.location.href 属性之前，您需要为图像数据添加前缀，如下所示。

```
window.location.href = 'data:image/png;base64,id23gas2fo.... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-14T19:22:01.090

尝试通过以下方式下载它：

```
$('img#imagedownload').attr('src', renderer.domElement.toDataURL("image/png"));
var img = document.getElementById('imagedownload');
var url = img.src.replace(/^data:image\/[^;]/, 'data:application/octet-stream');
window.open(url); 
```

这将在同一窗口中下载生成的图像。这个对我有用！

# android - 适用于三星 Galaxy S3 和 TI CC2540 心率监测器的低功耗蓝牙

> ID：14196667
> 
> 赞同：4
> 
> 时间：2013-01-07T13:09:12.703
> 
> 标签：android, bluetooth-lowenergy, broadcom

我正在为三星 Galaxy S3 开发蓝牙低功耗应用程序。我在我的项目中使用 Broadcom ble jar 文件。我可以搜索 TI CC2540 ble 设备。

但是当我尝试将 Galaxy S3 连接到 CC2540 时，我立即得到一个空指针异常并且我无法连接到它。我尝试了很多次，但我无法连接到它。下面是我的应用程序中连接到远程 ble 设备的代码行。

```
mFindMe.connect(mDevice); 
```

`mfindme`是我的 HRM 配置文件，`mDevice`是我的 CC2540 TI ble 设备的蓝牙地址。

当我尝试连接到设备时，它总是抛出一个空指针异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T10:38:59.767

我正在为我的项目使用以下代码。我希望它可以帮助您理解我的问题。

```
btconnect = (Button)findViewById(R.id.btn_connect);
btconnect.setOnClickListener(new View.OnClickListener()
{
    @Override
    public void onClick(View view)
    {
        try
        {
            mFindMe.connect(mDevice);
        }
        catch(Exception e)
        {
            Log.d("Error","connecting");
        }
    }
});

setUiState();
registerReceiver(regReceiver, new IntentFilter(FindMeProfileClient.FINDME_REGISTERD));

mDevice = BluetoothAdapter.getDefaultAdapter().getRemoteDevice(HRM_BD_ADDRESS);
mFindMe = new FindMeProfileClient(this); 
```

我还发现`public static final String BLUETOOTH_LE_SERVICE`Broadcom jar 文件中缺少 ，因此`mservice`变量为空。

请提供有关此蓝牙低功耗配置文件的任何帮助。

# c++ - 在一张奇怪的桌子上打印一个特定的数字

> ID：14196669
> 
> 赞同：2
> 
> 时间：2013-01-07T13:09:18.910
> 
> 标签：c++, algorithm

我有一个表，它由以这种方式排列的非负整数组成：表中的每个元素都是不出现在其左侧或上方的最小值。这是一个 6x6 网格的示例：

```
0 1 2 3 4 5
1 0 3 2 5 4
2 3 0 1 6 7
3 2 1 0 7 6
4 5 6 7 0 1
5 4 7 6 1 0 
```

如您所见，第一行和第一列以 0 1 2 3 4 5 ... 在坐标 (x,x) 中始终为 0。在之后的每个图块上，您必须将不存在的最小正数放置在同一行或列上。就像在数独游戏中一样：在同一行和同一列上不能有两次数字。

现在我必须打印给定坐标（y，x）中的数字。例如 [2, 5] = 5

我想出了一个可行的解决方案，但它需要太多的内存和时间，我只知道还有另一种方法可以做到这一点。我的时间限制是 1 秒，我必须找到的数字的坐标可以达到 (1000000, 1000000)。

这是我目前的代码：

```
#include <iostream>
#include <vector>

int main()
{
    int y, x, grid_size;
    std::vector< std::vector<int> > grid;

    std::cin >> y >> x; // input the coordinates we're looking for

    grid.resize(y, std::vector<int>(x, 0)); // resize the vector and initialize every tile to 0

    for(int i = 0; i < y; i++)
        for(int j = 0; j < x; j++)
        {
            int num = 1;

            if(i != j) { // to keep the zero-diagonal

                for(int h = 0; h < y; h++)
                    for(int k = 0; k < x; k++) { // scan the current row and column
                        if(grid[h][j] == num || grid[i][k] == num) { // if we encounter the current num
                            num++;                                   // on the same row or column, increment num
                            h = -1; // scan the same row and column again
                            break;
                        }
                    }

                grid[i][j] = num; // assign the smallest number possible to the current tile

            }
        }

    /*for(int i = 0; i < y; i++) {            // print the grid
        for(int j = 0; j < x; j++)            // for debugging
            std::cout << grid[i][j] << " ";   // reasons

        std::cout << std::endl;
    }*/

    std::cout << grid[y-1][x-1] << std::endl; // print the tile number at the requested coordinates
    //system("pause");
    return 0;
} 
```

所以我该怎么做？这比我想象的要容易吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T14:31:33.307

总结您的问题：您有一个表格，其中每个元素都是不出现在其左侧或上方的最小非负整数。您需要在 (x,y) 位置找到元素。

结果非常简单：如果`x`和`y`是基于 0 的，则 (x,y) 处的元素是`x XOR y`。这与您发布的表格相匹配。我已经对 200x200 的表进行了实验[验证。](http://ideone.com/F6jBzs)

**证据：**

很容易看出，相同的数字不会在同一行或同一列出现两次，因为如果 x [1] ^y = x [2] ^y 则必然 x [1] =x [2]。

看到那`x^y`是最小的：让`a`是一个小于 的数字`x^y`。让`i`是最左边的位的索引（从右边）`a`与 不同`x^y`。的`i`th 位`a`必须为 0， 的`i`th 位`x^y`必须为 1。

因此，要么`x`或`y`必须在`i`第 th 位为 0。假设 WLOG 为`x`0。将`x`和表示`y`为：

```
x = A0B
y = C1D 
```

其中 A,B,C,D 是位序列，B 和 D 是`i`位长。由于 的最左边的位与`a`中的相同`x^y`：

```
a^x = C0E 
```

其中 E 是`i`位序列。所以我们可以看到`a^x < y`。`(a^x)`出现在同一列的第 th 行的值为： `(a^x)^x = a`。因此，该值`a`必须已经出现在同一行（或列，如果它在第 th 位`y`中有 0 ）。`i`对于小于 的任何值都是如此`x^y`，因此`x^y`确实是最小可能值。

# javascript - 仅使用 Javascript 的会话 cookie

> ID：14196671
> 
> 赞同：94
> 
> 时间：2013-01-07T13:09:24.637
> 
> 标签：javascript, html

我想知道是否可以使用 Javascript 创建仅会话 cookie。当浏览器关闭时，cookies 应该被删除。

我不能在服务器上使用任何东西，因为网站只是 HTML ......所以没有使用服务器端脚本。

我在这里读到了一些关于这个的东西：http: [//blog.lysender.com/2011/08/setting-session-only-cookie-via-javascript/](http://blog.lysender.com/2011/08/setting-session-only-cookie-via-javascript/) 但我找不到更多关于这个的信息......所以我是想知道这种方法是否可靠。

* * *

## 回答 #1

> 赞同：149
> 
> 时间：2013-01-07T13:13:04.843

对，那是正确的。

不`expires`加入将创建一个会话 cookie，无论它是在 JavaScript 中创建的还是在服务器上创建的。

见[https://stackoverflow.com/a/532660/1901857](https://stackoverflow.com/a/532660/1901857)

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2013-01-07T13:12:38.990

一个更简单的解决方案是使用[`sessionStorage`](https://developer.mozilla.org/en-US/docs/DOM/Storage#sessionStorage)，在这种情况下：

```
var myVariable = "Hello World";

sessionStorage['myvariable'] = myVariable;

var readValue = sessionStorage['myvariable'];
console.log(readValue); 
```

但是，请记住`sessionStorage`将所有内容保存为字符串，因此在使用数组/对象时，您可以使用 JSON 来存储它们：

```
var myVariable = {a:[1,2,3,4], b:"some text"};

sessionStorage['myvariable'] = JSON.stringify(myVariable);
var readValue = JSON.parse(sessionStorage['myvariable']); 
```

> 只要浏览器打开并在页面重新加载和恢复后仍然存在，页面会话就会持续。在新选项卡或窗口中打开页面将导致启动新会话。

因此，当您关闭页面/选项卡时，数据就会丢失。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-08-18T16:17:26.327

要使用 java 脚本创建仅会话 cookie，您可以使用以下内容。这对我有用。

```
document.cookie = "cookiename=value; expires=0; path=/"; 
```

然后获取cookie值如下

```
 //get cookie 
var cookiename = getCookie("cookiename");
if (cookiename == "value") {
    //write your script
}

//function getCookie        
function getCookie(cname) {
    var name = cname + "=";
    var ca = document.cookie.split(';');
    for (var i = 0; i < ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0) == ' ') c = c.substring(1);
        if (c.indexOf(name) != -1) return c.substring(name.length, c.length);
    }
    return "";
} 
```

好的支持 IE 我们可以完全离开“过期”并且可以使用它

```
document.cookie = "mtracker=somevalue; path=/"; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-10-06T07:27:30.270

使用下面的代码设置会话 cookie，它会一直工作到浏览器关闭。（确保不关闭标签）

```
function setCookie(cname, cvalue, exdays) {
    var d = new Date();
    d.setTime(d.getTime() + (exdays*24*60*60*1000));
    var expires = "expires="+ d.toUTCString();
    document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
  }
  function getCookie(cname) {
    var name = cname + "=";
    var decodedCookie = decodeURIComponent(document.cookie);
    var ca = decodedCookie.split(';');
    for(var i = 0; i <ca.length; i++) {
      var c = ca[i];
      while (c.charAt(0) == ' ') {
        c = c.substring(1);
      }
      if (c.indexOf(name) == 0) {
        return c.substring(name.length, c.length);
      }
    }
    return false;
  }

  if(getCookie("KoiMilGaya")) {
    //alert('found'); 
    // Cookie found. Display any text like repeat user. // reload, other page visit, close tab and open again.. 
  } else {
    //alert('nothing');
    // Display popup or anthing here. it shows on first visit only.  
    // this will load again when user closer browser and open again. 
    setCookie('KoiMilGaya','1');
  } 
```

# php - 在 php 中使用 WebMatrix 创建安全的 mySQL 数据库连接

> ID：14196672
> 
> 赞同：0
> 
> 时间：2013-01-07T13:09:24.590
> 
> 标签：php, mysql, database, connection, webmatrix

通过从一本书中学习，我用 php 在 WebMatrix 中创建了一个到我的数据库的连接脚本，它指出我应该将连接脚本放在 web 目录之外，这样人们就无法在浏览器中访问它。但是如果我这样做，我不知道我应该如何检索它，因为每个导入/包含都从 web 目录开始。

有人可以告诉我如何实现这一目标吗？谢谢你。

我的连接脚本：

```
 <?php
 # Selects the database

 DEFINE ('DB_USER', 'secret');
 DEFINE ('DB_PASSWORD', 'secret');
 DEFINE ('DB_HOST', 'localhost');
 DEFINE ('DB_NAME', 'secret');

 $dbc_accounts = @mysql_connect (DB_HOST, DB_USER, DB_PASSWORD) OR die ('Could not       connect to MySQL');

 @mysql_select_db (DB_NAME) OR die ('Could not select the database');

 // Function for escaping data
 function escape_data ($data) 
 {
     global $dbc_accounts;
     if (ini_get('magic_quotes_gpc')) 
     {
         $data = stripslashes($data);
     }
     return mysql_real_escape_string(trim($data), $dbc_accounts);
 } 
```

使用它：

```
 require_once ('mysql_connect.php'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T13:23:33.180

```
require_once ('../some/place/secure/mysql_connect.php'); 
```

# java - 使用 Java 的图形化工作流

> ID：14196675
> 
> 赞同：3
> 
> 时间：2013-01-07T13:09:30.533
> 
> 标签：java, workflow, business-process-management

我最近（不是我的选择..）开发了一个处理批处理工作流的 perl 应用程序。此应用程序有自己的工作流程规范。应用程序的第二部分是创建一个显示流程工作流的 GUI（带有框和流程状态..）。我查看了诸如 Activi 或 jBPM 之类的产品，但这些产品包含的引擎不符合我的需要。我只需要一个工具，它可以在给定一些指令（例如 XML ......）的情况下动态绘制工作流。

您对可以在没有任何引擎的情况下显示 BPM 图形的产品有任何想法吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T14:09:20.157

也许[Graphviz](http://www.graphviz.org/)是适合您的工具？它使用一个简单的标记（或 GXL，根据他们的说法是“一种 XML 方言”）来定义您的图形。这是[一个示例](http://www.graphviz.org/content/cluster)，（[图库](http://www.graphviz.org/Gallery.php)包含更多示例）。支持多种不同的[输出格式](http://www.graphviz.org/content/output-formats)，包括 .bmp、.jpg、.png。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T12:46:34.830

[博尼塔软件](http://www.bonitasoft.org/)？它确实有一个引擎，但也可以输出 bpmn 和其他几种格式。

# android - 注册以接收 Android 版 GCM，在哪里注册和注册多少次？

> ID：14196678
> 
> 赞同：0
> 
> 时间：2013-01-07T13:09:41.417
> 
> 标签：android, google-cloud-messaging

我一直在阅读有关 gcm 的文档，并且我知道我必须注册才能接收`onCreate`有关我的 main 方法的GCM 消息`Activity`。但是，如果我的应用程序有不同的入口点怎么办。我必须在哪里设置将应用程序注册到 GCM 的代码？我是否必须`GCMRegistrar.register(this, Constants.GCM_PROJECT_ID)`在每个作为入口点的`onCreate`方法中编写？`Activity`还有其他方法吗？

一个入口点是 main `Activity`，但用户也可以从 Notification 跳转到详细信息屏幕。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T13:30:10.377

您可以为您的应用程序定义一个应用程序类，您可以在应用程序启动时注册 GCM，而无需处理接收相应 Intent 的 Activity。

[http://developer.android.com/reference/android/app/Application.html](http://developer.android.com/reference/android/app/Application.html)

检查 onCreate 方法

# apache - Web 开发的安全/第二次访问 - 拒绝公众查看；允许开发者

> ID：14196681
> 
> 赞同：0
> 
> 时间：2013-01-07T13:09:53.063
> 
> 标签：apache

对不起，奇怪的标题，我找不到更好的描述我的问题。

我正在与一个由 4 人组成的团队（2 名开发人员和 2 名测试人员）建立一些网站。开发人员在本地 apache/mysql 服务器上构建页面。他们不时地将他们所做的事情的快照上传到专用服务器，该服务器通过 htaccess 基本身份验证向测试人员提供文件。

这个工作流程有更好的解决方案吗？我想对这整件事有更多的安全感。该网站的快照通常显示调试/开发信息，公众不应该看到这些信息。

类似于 apache 服务器的不同端口...？有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T16:00:34.170

我认为另一种方法是使用 Git 或其他版本控制系统进行部署，因此只会添加新代码，并且您可以在某些不会被覆盖的文件中永久禁用这些调试信息的显示。

或者

您可以使用一些云服务，例如 getpantheon.com（用于 Drupal）。它可以为您提供良好的测试环境。

# html - 是否可以使用“小手”光标在 div 内手动滚动 JPG？

> ID：14196683
> 
> 赞同：1
> 
> 时间：2013-01-07T13:09:59.607
> 
> 标签：html

是否可以通过抓取和拖动实际图像来使用“小手”光标在 div 内手动滚动 JPG？

例如，当您有较长的水平位图并希望在小窗口中显示它时，当您放大时，人们会像在照片编辑器中一样滚动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T13:27:07.350

你需要一些 JavaScript 魔法才能做到这一点。看看这个：http: [//jsfiddle.net/bCuGM/](http://jsfiddle.net/bCuGM/)。

```
<style type="text/css">
  #container {
    width: 400px;
    height: 400px;
    overflow: hidden;
    cursor: pointer;
  }
  #draggable {
    width: 1024px;
    height: 819px;
  }
</style>

<div id="container">
  <div id="draggable">
    <img src="http://farm3.staticflickr.com/2593/3884464511_a77144821e_b.jpg">
  </div>
</div>

<script>
  $("#draggable").draggable();
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T13:13:46.667

你可以通过使用 javascript 和一点 css 来做到这一点。

在您的图像上添加一个 css 规则：

```
cursor: pointer; 
```

使用 javascript，在图像上添加 mousedown、mousemove 和 mouseup 事件。然后使用javascript更改父div上的滚动

# firefox - 以 windows-1252 编码提交了一个表单

> ID：14196687
> 
> 赞同：8
> 
> 时间：2013-01-07T13:10:09.707
> 
> 标签：firefox, character-encoding

我在 Firefox Web 控制台 ( `Ctrl`+ `Shift`+ `K`)的 JS 选项卡中收到以下警告

> 以 windows-1252 编码提交的表单无法编码所有 Unicode 字符，因此用户输入可能会损坏。为避免此问题，应更改页面，以便通过将页面本身的编码更改为 UTF-8 或在表单元素上指定 accept-charset=utf-8 以 UTF-8 编码提交表单。@ `http://localhost:8080/myapp/login`

html 确实明确使用了 utf-8 编码，如下所示：

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />; 
```

html（实际上是 Freemarker 模板）文件以前位于 Windows 机器上。[所以我按照这里](https://stackoverflow.com/questions/2014069/windows-1252-to-utf-8-encoding)的建议使用重新编码实用程序将它们重新编码为 utf-8 。但我仍然看到同样的警告。

我在这里想念什么？

`Ctrl`Chrome 的开发者工具实用程序 ( ++ `Shift`)`I`中没有警告或错误

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-07T14:47:35.880

根据评论，服务器在 HTTP 标头中将编码指定为 ISO-8859-1 似乎很明显。您不能在 HTML 中为文档本身覆盖它。但是，您可以使用标签中的`accept-charset=utf-8`属性[`form`](http://www.w3.org/TR/html401/interact/forms.html#h-17.3)来指定表单数据提交的字符编码。

要更改 HTTP 标头，您需要在服务器级别执行一些操作。这可能意味着创建或编辑 .htaccess 文件或其他内容。

PS`Accept-Encoding`标题与此无关。它不指定字符编码，而是指定数据的传输编码。

# sql - 按小时分组的开始和结束时间的差异

> ID：14196688
> 
> 赞同：3
> 
> 时间：2013-01-07T13:10:11.067
> 
> 标签：sql, oracle, oracle10g, group-by, date-arithmetic

我的表有类似于下面的信息

```
Emp  Date       START_TIME            END_TIME             Code     Minutes
---  --------   -------------------   -------------------  ----     -------
 E1  11/1/2012  11/1/2012 6:55:00 AM  11/1/2012 7:01:00 AM  C1       6
 E1  11/1/2012  11/1/2012 6:57:00 AM  11/1/2012 8:01:00 AM  C2       64
 E2  11/1/2012  11/1/2012 6:57:00 AM  11/1/2012 8:00:00 AM  C2       63
 E1  11/2/2012  11/2/2012 7:35:00 AM  11/2/2012 8:01:00 AM  C1       26 
```

预期输出是

```
Date       Code  Range                        Minutes
---------  ----  -----------------------      ------- 
11/1/2012   C1   6:30:00 AM-7:00:00 AM           5
11/1/2012   C1   7:00:00 AM-7:30:00 AM           1
11/1/2012   C2   6:30:00 AM-7:00:00 AM           6   
11/1/2012   C2   7:00:00 AM-7:30:00 AM           60
11/1/2012   C2   7:30:00 AM-8:00:00 AM           60
11/1/2012   C2   8:00:00 AM-8:30:00 AM           1
11/2/2012   C1   7:30:00 AM-8:00:00 AM           25
11/2/2012   C1   8:00:00 AM-8:30:00 AM           1 
```

省略 Emp 字段，我想按日期和代码分组，每个代码的总时间为 30 分钟。我的*限制是使用选择语句来实现这一点，即只能通过 SQL 查询，因为不允许使用 PL/SQL*。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T15:07:10.477

涉及示范条款的解决方案。

首先让我们计算每个条目需要的 30 分钟块的数量。

```
SQL> select emp, start_time, end_time, code,
  2                      trunc(start_time, 'mi')
  3                      - (mod(to_char(trunc(start_time, 'mi'), 'mi'), 30) / 1440) start_block,
  4                      ceil(2*24*(end_time-(trunc(start_time, 'mi')
  5                      - (mod(to_char(trunc(start_time, 'mi'), 'mi'), 30) / 1440)))) blocks
  6                 from tab f
  7  /

EM START_TIME             END_TIME               CO START_BLOCK                BLOCKS
-- ---------------------- ---------------------- -- ---------------------- ----------
E1 11/01/2012 06:55:00 am 11/01/2012 07:01:00 am C1 11/01/2012 06:30:00 am          2
E1 11/01/2012 06:57:00 am 11/01/2012 08:01:00 am C2 11/01/2012 06:30:00 am          4
E2 11/01/2012 06:57:00 am 11/01/2012 08:00:00 am C2 11/01/2012 06:30:00 am          3
E1 11/02/2012 07:35:00 am 11/02/2012 08:01:00 am C1 11/02/2012 07:30:00 am          2 
```

现在，我们使用模型子句生成行以将其分成 30 分钟的时间段。

```
SQL> with foo as (select rownum id, emp, start_time, end_time, code,
  2                      trunc(start_time, 'mi')
  3                      - (mod(to_char(trunc(start_time, 'mi'), 'mi'), 30) / 1440) start_block,
  4                      ceil(2*24*(end_time-(trunc(start_time, 'mi')
  5                      - (mod(to_char(trunc(start_time, 'mi'), 'mi'), 30) / 1440)))) blocks
  6                 from tab f)
  7  select trunc(start_time) thedate, code, emp, range, minutes
  8    from foo
  9   model partition by(id)
 10         dimension by(0 as f)
 11         measures(code, emp, start_time, end_time, start_block, blocks,
 12                  sysdate as start_range,
 13                  sysdate as end_range,
 14                  cast(0 as number) minutes,
 15                  cast('' as varchar2(50)) range)
 16         rules (start_range [for f from 0 to blocks[0]-1  increment 1]  = start_block[0] + (30*cv(f)/1440),
 17                end_range[any]  =  start_range[cv()] + (30/1440),
 18                code[any]  =  code[0],
 19                emp[any]   =  emp[0],
 20                start_time[any]  =  start_time[0],
 21                end_time[any]  =  end_time[0],
 22                range [any] = to_char(start_range[cv()], 'dd/mm/yyyy hh:mi:ss am') || ' - ' || to_char(end_range[cv()], 'dd/mm/yyyy hh24:mi:ss am'),
 23                minutes [any]   = case
 24                                    when start_time[0] between start_range[cv()] and end_range[cv()]
 25                                    then 1440 *(end_range[cv()] - start_time[0])
 26                                    when end_time[0] between start_range[cv()] and end_range[cv()]
 27                                    then 1440 *(end_time[0] - start_range[cv()])
 28                                    else 1440 * (end_range[cv()] - start_range[cv()])
 29                                  end );

CO EM RANGE                                                 MINUTES
-- -- -------------------------------------------------- ----------
C2 E2 11/01/2012 06:30:00 am - 11/01/2012 07:00:00 am             3
C2 E2 11/01/2012 07:00:00 am - 11/01/2012 07:30:00 am            30
C2 E2 11/01/2012 07:30:00 am - 11/01/2012 08:00:00 am            30
C1 E1 11/01/2012 06:30:00 am - 11/01/2012 07:00:00 am             5
C1 E1 11/01/2012 07:00:00 am - 11/01/2012 07:30:00 am             1
C1 E1 11/02/2012 07:30:00 am - 11/02/2012 08:00:00 am            25
C1 E1 11/02/2012 08:00:00 am - 11/02/2012 08:30:00 am             1
C2 E1 11/01/2012 06:30:00 am - 11/01/2012 07:00:00 am             3
C2 E1 11/01/2012 07:00:00 am - 11/01/2012 07:30:00 am            30
C2 E1 11/01/2012 07:30:00 am - 11/01/2012 08:00:00 am            30
C2 E1 11/01/2012 08:00:00 am - 11/01/2012 08:30:00 am             1

11 rows selected. 
```

所以我们按以下方式进行分区：

```
partition by(id) 
```

即通过一个独特的参考。然后我们将使用我们的维度生成行

```
dimension by(0 as f) 
```

结合部分规则：

```
for f from 0 to blocks[0]-1  increment 1 
```

所以 start_range 列是用 start_range [for f from 0 to blocks[0]-1 increment 1] = start_block[0] + (30*cv(f)/1440) 生成的，

start_block[0] 在第一个查询中，例如：

```
EM START_TIME             END_TIME               CO START_BLOCK                BLOCKS
-- ---------------------- ---------------------- -- ---------------------- ----------
E1 11/01/2012 06:55:00 am 11/01/2012 07:01:00 am C1 11/01/2012 06:30:00 am          2 
```

所以对于这一行，它的计算结果为

```
start_range[0 to 1] = 11/01/2012 06:30:00 am + (30minutes * the value of f) 
```

IE

```
start_range[0] = 11/01/2012 06:30:00 am + (30min*0) = 11/01/2012 06:30:00 am
start_range[1] = 11/01/2012 06:30:00 am + (30min*1) = 11/01/2012 07:00:00 am 
```

其余的很简单：

```
end_range[any]  =  start_range[cv()] + (30/1440), 
```

意味着对于`end-range`当前行，我们需要`start_range`并添加 30 分钟。

该`range`列是 start_range 和 end_range 的串联：

```
range [any] = to_char(start_range[cv()], 'dd/mm/yyyy hh:mi:ss am') || ' - ' || to_char(end_range[cv()], 'dd/mm/yyyy hh24:mi:ss am'), 
```

最后为了计算该范围内的分钟数：

```
minutes [any]   = case
                    when start_time[0] between start_range[cv()] and end_range[cv()]
                    then 1440 *(end_range[cv()] - start_time[0])
                    when end_time[0] between start_range[cv()] and end_range[cv()]
                    then 1440 *(end_time[0] - start_range[cv()])
                    else 1440 * (end_range[cv()] - start_range[cv()])
                  end ); 
```

1.  如果 start_time 在范围内，取范围的结尾 - 开始时间
2.  如果 end_time 在范围内，取 end_time - 范围的开始
3.  否则它的 end_range - start_range。

1440 只是以分钟的形式得到答案。

现在我们可以将它们全部组合起来：

```
SQL> with foo as (select rownum id, emp, start_time, end_time, code,
  2                      trunc(start_time, 'mi')
  3                      - (mod(to_char(trunc(start_time, 'mi'), 'mi'), 30) / 1440) start_block,
  4                      ceil(2*24*(end_time-(trunc(start_time, 'mi')
  5                      - (mod(to_char(trunc(start_time, 'mi'), 'mi'), 30) / 1440)))) blocks
  6                 from tab f)
  7  select thedate, code, range, sum(minutes) minutes
  8    from (select trunc(start_time) thedate, code, emp, range, minutes
  9            from foo
 10           model partition by(id)
 11                 dimension by(0 as f)
 12                 measures(code, emp, start_time, end_time, start_block, blocks,
 13                          sysdate as start_range,
 14                          sysdate as end_range,
 15                          cast(0 as number) minutes,
 16                          cast('' as varchar2(50)) range)
 17                 rules (start_range [for f from 0 to blocks[0]-1  increment 1]  = start_block[0] + (30*cv(f)/1440),
 18                        code[any]  =  code[0],
 19                        emp[any]  =  emp[0],
 20                        end_range[any]  =  start_range[cv()] + (30/1440),
 21                        start_time[any]  =  start_time[0],
 22                        end_time[any]  =  end_time[0],
 23                        range [any] = to_char(start_range[cv()], 'dd/mm/yyyy hh:mi:ss am') || ' - ' || to_char(end_range[cv()], 'dd/mm/yyyy hh24:mi:ss am'),
 24                        minutes [any]   = case
 25                                            when start_time[0] between start_range[cv()] and end_range[cv()]
 26                                            then 1440 *(end_range[cv()] - start_time[0])
 27                                            when end_time[0] between start_range[cv()] and end_range[cv()]
 28                                            then 1440 *(end_time[0] - start_range[cv()])
 29                                            else 1440 * (end_range[cv()] - start_range[cv()])
 30                                          end ))
 31   group by thedate, code, range
 32   order by thedate, code, range;

THEDATE    CO RANGE                                                 MINUTES
---------- -- -------------------------------------------------- ----------
11/01/2012 C1 11/01/2012 06:30:00 am - 11/01/2012 07:00:00 am             5
11/01/2012 C1 11/01/2012 07:00:00 am - 11/01/2012 07:30:00 am             1
11/01/2012 C2 11/01/2012 06:30:00 am - 11/01/2012 07:00:00 am             6
11/01/2012 C2 11/01/2012 07:00:00 am - 11/01/2012 07:30:00 am            60
11/01/2012 C2 11/01/2012 07:30:00 am - 11/01/2012 08:00:00 am            60
11/01/2012 C2 11/01/2012 08:00:00 am - 11/01/2012 08:30:00 am             1
11/02/2012 C1 11/02/2012 07:30:00 am - 11/02/2012 08:00:00 am            25
11/02/2012 C1 11/02/2012 08:00:00 am - 11/02/2012 08:30:00 am             1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T14:39:30.860

我很确定这可以清理干净，并且变得更清晰和更高效，因为 Oracle 不是我的强项之一，但它可以工作并且应该给出如何完成任务的想法。

这里的关键是加入一个数字列表，将您的记录分成半小时的时间段。

```
SELECT  "Date",
        "Code",
        "RangeStart" + ((r - 1) / 48.0) AS "RangeStart",
        "RangeStart" + (r / 48.0) AS "RangeEnd",
        SUM(CASE WHEN r = 1 THEN "StartMinutes"
                WHEN "END_TIME" >= "RangeStart" + ((r - 1) / 48.0) AND "END_TIME" < "RangeStart" + (r / 48.0) THEN "EndMinutes"
                ELSE 30 
            END) AS "TotalMinutes"
FROM    (   SELECT  "Emp",
                    "Date",
                    "START_TIME",
                    "END_TIME",
                    "Code",
                    CASE WHEN EXTRACT(MINUTE from "START_TIME") > 30 THEN 60 ELSE 30 END - EXTRACT(MINUTE from "START_TIME") AS "StartMinutes",
                    EXTRACT(MINUTE from END_TIME) - CASE WHEN EXTRACT(MINUTE from "END_TIME") > 30 THEN 30 ELSE 0 END AS "EndMinutes",
                    "START_TIME" - (EXTRACT(MINUTE from "START_TIME") - CASE WHEN EXTRACT(MINUTE from "START_TIME") > 30 THEN 30 ELSE 0 END) / (60 * 24.0) AS "RangeStart"
            FROM    T
        ) T
        INNER JOIN
        (   SELECT  Rownum r
            FROM    dual
            CONNECT BY Rownum <= 100
        ) r
            ON "END_TIME" > ("RangeStart" + ((r - 1) / 48.0))
GROUP BY "Date", "Code", "RangeStart" + ((r - 1) / 48.0), "RangeStart" + (r / 48.0)
ORDER BY "Code", "Date", "RangeStart"; 
```

**[SQL FDDLE 示例](http://www.sqlfiddle.com/#!4/828e5/14)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T15:19:39.453

这是另一种解决方案（它不是很优雅，并且使用硬编码的日期文字来获取存储桶的边界 - 可能应该由子查询替换以获取它们）：

```
 with v_data as (
    select 1 pk, 'E1' emp, to_date('2012-11-01', 'YYYY-MM-DD') as date1, to_date('2012-11-01 06:55:00', 'YYYY-MM-DD hh24:mi:ss') as start_time, to_date('2012-11-01 07:01:00', 'YYYY-MM-DD hh24:mi:ss') as end_time, 'C1' as code, 6 as minutes from dual union all 
    select 2 pk, 'E1' emp, to_date('2012-11-01', 'YYYY-MM-DD') as date1, to_date('2012-11-01 06:57:00', 'YYYY-MM-DD hh24:mi:ss') as start_time, to_date('2012-11-01 08:01:00', 'YYYY-MM-DD hh24:mi:ss') as end_time, 'C2' as code, 64 as minutes from dual union all 
    select 3 pk, 'E2' emp, to_date('2012-11-01', 'YYYY-MM-DD') as date1, to_date('2012-11-01 06:57:00', 'YYYY-MM-DD hh24:mi:ss') as start_time, to_date('2012-11-01 08:00:00', 'YYYY-MM-DD hh24:mi:ss') as end_time, 'C2' as code, 63 as minutes from dual union all 
    select 4 pk, 'E1' emp, to_date('2012-11-02', 'YYYY-MM-DD') as date1, to_date('2012-11-02 07:35:00', 'YYYY-MM-DD hh24:mi:ss') as start_time, to_date('2012-11-02 08:01:00', 'YYYY-MM-DD hh24:mi:ss') as end_time, 'C1' as code, 26 as minutes from dual), 
v_buckets as (          
  select 
    to_date('2012-11-01', 'YYYY-MM-DD') + (rownum-1)/48 as bucket_start,
    to_date('2012-11-01', 'YYYY-MM-DD') + rownum/48 as bucket_end  
    from dual
  connect by rownum <96
)
select v3.date1, v3.bucket_start, v3.bucket_end, v3.code, sum(v3.time_spent_in_bucket) as minutes 
from (
select v2.*, (least(end_time, bucket_end) - greatest(start_time, bucket_start))*1440 as time_spent_in_bucket from 
(
select buck.*,
       v1.*
  from v_buckets buck
  join v_data v1 
    on (
       -- time slot completely contained in one bucket
        (v1.start_time >= buck.bucket_start and v1.start_time < buck.bucket_end and
        v1.end_time >= buck.bucket_start and v1.end_time < buck.bucket_end)
       -- time slot starts in bucket, expands to next bucket
        or (v1.start_time >= buck.bucket_start and v1.start_time < buck.bucket_end and
        v1.end_time >= buck.bucket_end)
       -- time slot started in previous bucket, ends in this bucket)
        or (v1.start_time < buck.bucket_start and v1.end_time > buck.bucket_start and
        v1.end_time <= buck.bucket_end)
       -- time slot began in previous bucket, expands to next bucket
       or (v1.start_time < buck.bucket_start and v1.end_time >= buck.bucket_end) 
        )
) v2
) v3 
where start_time is not null
group by date1, bucket_start, bucket_end, code
order by bucket_start, code 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-07T15:55:45.053

这是我的尝试：

```
select trunc(trunc_start) as datetime, code, range , sum(duration) minutes
from (
select code, end_time, start_time, TRUNC_START , 
  to_char(trunc_start,'hh:mi:ss AM')||'-'||to_char(trunc_start+1/48,'hh:mi:ss AM') as range,
  case 
    when end_time-trunc_start between 0 and 1/48 then (end_time-trunc_start)*1440 
    when start_time-trunc_start between 0 and 1/48 then (trunc_start-start_time)*1440+30
    else 30 
  end as duration
from(
  select  s.*, n , 
  trunc(start_time) + trunc((start_time-trunc(start_time))*48)/48 + (n-1)/48 as trunc_start
  from s
  join (select level n from dual connect by level <=48) a
  on n-2 <= (end_time-start_time)*100
  )b
)
where trunc_start < end_time --eliminating fake intervals
group by code, trunc(trunc_start), range
order by 1, 3
; 
```

对不起`where`:)

[SQLFIDDLE](http://sqlfiddle.com/#!4/12d94/63)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-07T13:35:11.450

以下是一些适用于您的范围的一般示例：

```
SELECT job
  , sum(decode(greatest(sal,2999), least(sal,6000), 1, 0)) "Range 3000-6000"
  , sum(decode(greatest(sal,1000), least(sal,2999), 1, 0)) "Range 1000-3000"
  , sum(decode(greatest(sal,0),    least(sal,999), 1, 0))  "Range 0-1000"
  FROM scott.emp
GROUP BY  job
/ 
```

# r - sapply 使用自定义函数（一系列 if 语句）

> ID：14196696
> 
> 赞同：7
> 
> 时间：2013-01-07T13:10:36.357
> 
> 标签：r, apply, lapply, sapply

我想运行一个查看两个向量的函数，根据两个向量中值的符号返回不同的值。我写了一个函数来比较两个值，但是我想在两个向量上运行它。所以我使用了 sapply，但我得到的结果与预期不同。

```
bear.correction<-  function(x,y){
                                if(x > 0 && y < 0){
                                  return(90)
                                }else if(x < 0 && y < 0){
                                  return(180)
                                }else  if(x < 0 && y > 0){
                                  return(270)
                                }else   return(0)
                              } 
```

以下给出了预期（和期望）的结果：

```
 bear.correction(1,-1)
  bear.correction(1,1)
  bear.correction(-1,1)
  bear.correction(-1,-1) 
```

结果：90、0、270、180

但是，当我尝试进行相同的比较时，但使用带有 sapply 的向量时，我得到了不同的结果：

```
 x <- c(1,1,-1,-1)
  y <- c(-1,1,1,-1)
  sapply(x,bear.correction,y) 
```

结果：90、90、180、180。

我看不出有什么问题，所以请帮忙！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-07T13:17:57.313

您应该使用`mapply()`而不是`sapply()`：

```
mapply(bear.correction,x,y) 
```

为什么？您`sapply()`适用`bear.correction()`于 ... 的每个条目，`x`但在每种情况下都将*整个* `y`向量作为第二个参数提供给它，因此在所有四种情况下`bear.correction()`只查看第一个条目。`y`要“遍历”*多个*向量（或其他数据结构）中的多个条目，请使用`mapply()`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-07T13:17:15.193

您应该使用 mapply 而不是 sapply

```
mapply(bear.correction,x,y)

[1]  90   0 270 180 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-07T13:18:23.037

`browser()`像这样在你的函数中添加一个：

```
bear.correction<-  function(x,y){

  browser()
  if(x > 0 && y < 0){
    return(90)
  }else if(x < 0 && y < 0){
    return(180)
  }else  if(x < 0 && y > 0){
    return(270)
  }else   return(0)
} 
```

您将看到与参数完全相同的内容：

```
Browse[1]> x
[1] 1
Browse[1]> y
[1] -1  1  1 -1 
```

因此，正如其他人所说，您需要使用`mapply`给出标量值，而不是原子向量。

但我认为这里使用`plyr`真的更简单（输出格式不错）

```
library(plyr)
dat <- data.frame(x=x,y=y)
ddply(dat,.(x,y),function(r) bear.correction(r$x,r$y))
   x  y  V1
1 -1 -1 180
2 -1  1 270
3  1 -1  90
4  1  1   0 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-07T13:22:14.403

如果你想使用`apply`你必须改变一点你的功能：

```
bear.correction<-  function(xy){
                                if(xy[1] > 0 && xy[2] < 0){
                                  return(90)
                                }else if(xy[1] < 0 && xy[2] < 0){
                                  return(180)
                                }else  if(xy[1] < 0 && xy[2] > 0){
                                  return(270)
                                }else   return(0)
                              } 
```

该函数现在采用 2 个值的向量，`xy`并使用第一个像你的旧值和`x`第二个像你的旧值`y`

```
x <- c(1,1,-1,-1)
y <- c(-1,1,1,-1)

xyx<-cbind(x,y)

apply(xyx,1, bear.correction) 
```

# zend-form - 使用 Zend 表单的多输入隐藏字段元素

> ID：14196697
> 
> 赞同：0
> 
> 时间：2013-01-07T13:10:39.953
> 
> 标签：zend-form, zend-framework2

我遇到了需要使用多个隐藏字段元素的要求。这些元素的值存储在一个数组中。以zend形式构建它的最佳方法是什么。

id[] = array('1', '2', '3', ....);

id[] 的这个值是动态生成的。

我的案例的 html 部分看起来像这样

```
<input type="hidden" name="ids[]" value="id[0]" />
<input type="hidden" name="ids[]" value="id[1]" />
<input type="hidden" name="ids[]" value="id[2]" />

.
.
. 
```

等等。

如何创建多个输入隐藏字段元素，稍后我想通过使用 populate 方法在我的控制器中使用它。

如果有人知道如何解决这个问题，那将非常有帮助。

PS 我使用 Zend Framework 2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T00:13:54.457

听起来您遇到了[Form Collections](http://framework.zend.com/manual/2.0/en/modules/zend.form.collections.html)预期的用例。

\Zend\Form 已经支持管理这种关系结构。

它的要点是您创建一个字段集，它可以保存相关实体的标识符集合。

虽然文档没有演示隐藏元素，但没有理由不能创建一个充满隐藏元素的字段集。仔细查看文档中的“类别”字段集。

# c# - Parallel ForEach - 连续调用持续更长时间

> ID：14196701
> 
> 赞同：1
> 
> 时间：2013-01-07T13:11:00.687
> 
> 标签：c#, task-parallel-library, webclient, dispose, parallel.foreach

我有一个基本上以并行方式迭代以并行化以下过程的函数：

1.  获取网页
2.  解析html代码
3.  返回结果并添加到结果集合

问题是第一次运行大约需要 5 分钟，第二次运行大约需要 40 分钟。输入集合没有改变，因此运行时间应该非常相似。任何想法？

我已经包含了 GetPrices(int)。第二次运行时，它从 netstat 中的 0 个连接开始（因此从第一次开始就没有可用的连接），但它只增长到 5 个连接（而不是第一次运行时的 30 个）。

另外，您认为退货收集是否需要锁定？

```
 public Dictionary<int, Dictionary<int, double>> GetPrices(List<int> IDs)
    {
        Stopwatch web_time = new Stopwatch(), regex_time = new Stopwatch();
        Dictionary<int, Dictionary<int, double>> ret = new Dictionary<int, Dictionary<int, double>>();
        int aux_bkp = ServicePointManager.DefaultConnectionLimit;
        ParallelOptions pOptions = new ParallelOptions();

        ServicePointManager.DefaultConnectionLimit = 30;

        pOptions.MaxDegreeOfParallelism = 35;
        Parallel.ForEach(IDs, pOptions, ID=>
            {
                Dictionary<int, double> aux = GetPrices(ID);

                lock (ret)
                {
                    ret.Add(ID, new Dictionary<int, double>());
                    foreach (int kID in aux.Keys)
                    {
                        ret[mktID].Add(kID , aux[kID ]);
                    }
                }

            });

        ServicePointManager.DefaultConnectionLimit = aux_bkp;

        return ret;
    }
    public static Dictionary<int, double> GetPrices(int ID)
    {
        Stopwatch web_time = new Stopwatch(), regex_time = new Stopwatch();
        WebClient webclient = new WebClient();
        string resp;
        Dictionary<int, double> ret = new Dictionary<int, double>();
        bool success = false;
        int retries = 0;

        web_time.Start();
        while (!success)
            try
            {
                Debug.WriteLine(string.Format("Get HTML: ({1}) - ({0})", url, ID));

                resp = webclient.DownloadString(url);
                success = true;
                web_time.Stop();

                regex_time.Start();

                regex_time.Start();

                ret = ProcessHTML(resp, ID);
                regex_time.Stop();

            }
            catch (WebException e)
            {

                System.Net.HttpWebResponse aux;

                aux = e.Response as System.Net.HttpWebResponse;
                if (aux == null || aux.StatusCode != HttpStatusCode.NotFound)
                {
                    success = false;
                    retries++;
                    System.Threading.Thread.Sleep(new System.Random().Next(5000));
                    System.Diagnostics.Debug.WriteLine("HTTP Error - " + e.ToString());
                }
                else if (aux != null || aux.StatusCode == HttpStatusCode.NotFound)
                {
                    success = true;
                }

            }

        regex_time.Stop();
        return ret;
        } 
```

# iphone - 从另一个类更改 UILabel 的文本

> ID：14196708
> 
> 赞同：0
> 
> 时间：2013-01-07T13:11:31.623
> 
> 标签：iphone, objective-c, ios, uiviewcontroller, uilabel

我有一个视图控制器和一个类（我正在使用情节提要）。如何 `UILabel`从类中更改（在视图控制器中）的文本？我试过这个，但无济于事：

```
ViewController *mainView = [[ViewController alloc] init];
[mainView view];

[mainView.progressBar setProgress:integer animated:YES];

NSLog(@"Updated Progress Bar");

NSString *progressLabelText = [NSString stringWithFormat:@"%@ out of %i followers", userString, [self.followers count]];

[mainView.progressLabel setText:progressLabelText];

NSLog(@"Updated Progress Label Text: %@", progressLabelText); 
```

使用此代码不会更改文本。我应该怎么做？

编辑：ViewController 的 .h 文件中的进度条和标签如下所示：

```
@property (nonatomic, strong) IBOutlet UIProgressView *progressBar;
@property (nonatomic, strong) IBOutlet UILabel *progressLabel; 
```

它们在 Interface Builder 中完全链接在一起。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T15:00:34.947

尝试使用通知来更新标签文本。

在您的 viewController 中写下：

```
 [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(updateLabel) name:@"lblUpdate" object:nil];

  and selector is :
   -(void)updateLabel
{
    self.lblObject.text = @"Your updated text"
} 
```

现在在您的班级中使用 Post 通知调用它：

```
 [[NSNotificationCenter defaultCenter] postNotificationName:@"lblUpdate" object:nil]; 
```

记住使用相同的通知名称“lblUpdate”

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T13:16:31.993

用于或之间。`delegate`_`messaging``classes``viewcontrollers`

请参阅[协议和代表](http://mobiledevelopertips.com/objective-c/the-basics-of-protocols-and-delegates.html)链接的基础知识。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T13:12:36.513

但是使用 a`delegate`来做回调。在您的`spamchecker.h`添加中：

```
@protocol SpamCheckerDelegate <NSObject>
-(void)updateText:(NSString*)newText;
@end

@property (nonatomic, weak) id <SpamCheckerDelegate> delegate; 
```

在`spamchecker.m`您需要的地方添加：

```
[self.delegate updateText:@"newText"]; 
```

然后在你的`mainView.h`添加：

```
@interface MainView : UIViewController <SpamCheckerDelegate> 
```

在您的`mainview.m`添加中：

```
spamchecker.delegate = self; 
```

并实现如下方法：

```
-(void)updateText:(NSString*)newText
{
    [self.progressLabel setText:progressLabelText];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T13:21:36.133

只是属性合成字符串，然后在类的`viewWillAppear:`方法中设置该字符串`ViewController.m`

只需`NSString`在文件中获取变量，`ViewController.h`如下所示..

```
@property (nonatomic, retain) NSString *progressText; 
```

`synthesize`这在文件中， `ViewController.m`如下所示..

```
@synthesize progressText; 
```

之后，在`viewDidLoad:`方法中只需在开始时设置文本，`progressLableText`如下所示......

```
- (void)viewDidLoad
{

     progressText = @"Your Text";
     [progressLabel setText:progressText];

} 
```

并在`viewWillAppear:`上面设置文本...

```
- (void)viewWillAppear:(BOOL)animated
{
    [progressLabel setText:progressText];
} 
```

并在您的代码中更改如下内容..

```
ViewController *mainView = [[ViewController alloc] init];
[mainView view];

[mainView.progressBar setProgress:integer animated:YES];

NSLog(@"Updated Progress Bar");

NSString *progressLabelText = [NSString stringWithFormat:@"%@ out of %i followers", userString, [self.followers count]];

mainView.progressText = progressLabelText;
[mainView.progressText retain];

NSLog(@"Updated Progress Label Text: %@", progressLabelText); 
```

我希望这对你有帮助......

# javascript - 如何使用 Android 作为客户端访问 express.js/passport.js API？

> ID：14196712
> 
> 赞同：2
> 
> 时间：2013-01-07T13:11:38.963
> 
> 标签：javascript, android, node.js, passport.js

我正在尝试访问使用 node.js 和 passport.js 完成的 express.js api。当 req.use 可用时，某些方法才有效。

我尝试从我的客户端应用程序使用 facebook 和 twitter 登录，我得到了普通的 cookie。

类似 connect.sid=jkbsdkjabdkjasdbjkadnaidiadiasdaoidoa

我用这个方法重新创建了客户端 cookie：

```
 BasicClientCookie clientCookie = new                BasicClientCookie(Metadata.COOKIE_LOGIN, cookieValue);
    clientCookie.setDomain("www.domain.com");
    clientCookie.setPath("/");
    Calendar calendar = Calendar.getInstance();
    calendar.add(Calendar.DAY_OF_MONTH, 1);
    clientCookie.setExpiryDate(calendar.getTime());
    return clientCookie; 
```

之后我用这个提出Json请求：

```
 HttpUriRequest request = method.createRequest(uri);
    request.addHeader("Accept", "application/json");
    HttpProtocolParams.setContentCharset(params, HTTP.UTF_8);
    DefaultHttpClient client = new DefaultHttpClient(params);
    client.getCookieStore().addCookie(USER_SESSION_COOKIE);
    HttpResponse response = client.execute(request);
    String serializedJson = EntityUtils.toString(response.getEntity(), HTTP.UTF_8);
    T fromJson = gsonParser.fromJson(serializedJson, clazz); 
```

我无法像往常一样使用用户的快速路线方法。

我知道我做错了什么，但我不知道是什么。

有人在android应用程序和passport.js之间建立了连接吗？

谢谢你们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-01-05T14:13:25.007

请参阅[此问题](https://stackoverflow.com/questions/34881775/automatic-cookie-handling-with-okhttp-3)以快速了解如何将 OkHttp 与持久性 cookie 存储一起使用。使用 HTTP 库来访问您的 REST API 将使事情变得更容易。

# c++ - 如何使用 WriteFile 写入 stderr

> ID：14196716
> 
> 赞同：3
> 
> 时间：2013-01-07T13:11:49.787
> 
> 标签：c++, winapi

是否可以参考可以在 Windows`HANDLE`上编写的标准错误输出？`WriteFile`

我问的原因是我正在为我编写一些日志记录实用程序。我正在尝试将数据直接提供给系统：

*   避免任何潜在的问题与不被冲洗的东西和
*   让系统在不需要锁定的情况下交错来自不同线程的消息（如果这确实有效是另一个问题）。

该应用程序是 Windows 子系统，所以它应该只在应用程序实际继承​​标准错误的情况下写入任何地方？如果可能的话，那就是。

注意：我已经有日志接收器到`OutputDebugString`. 它是其他几个平台的等价物。并且到文件，它使用低级 API 来避免任何额外的缓冲（因为消息已经组装在堆栈缓冲区中并且需要立即刷新）。而且我只想重用编写文件的代码来编写标准错误。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-07T13:12:45.140

[`GetStdHandle`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683231(v=vs.85).aspx)与 一起使用`STD_ERROR_HANDLE`。

```
HANDLE stderr = GetStdHandle(STD_ERROR_HANDLE);
WriteFile(stderr, /*...*/); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-07T14:07:25.397

`stderr`不是 Windows 原生的，并且在进程初始化 C 运行时库子系统（？）之前不会打开。

`WriteFile`之所以选择它是因为它是用于编写的最低级别 API，但`WriteFile`可能会破坏 的内部一致性`stderr`，这显然是没有适当的锁定。

出于调试/跟踪目的，Windows SDK 提供[`OutputDebugString`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363362(v=vs.85).aspx)API。许多 Windows 程序员使用此 API 和[DebugView](http://technet.microsoft.com/en-us/sysinternals/bb896647.aspx)进行开发。

对于一般日志记录，[将事件写入事件查看器](https://stackoverflow.com/questions/8559222/write-an-event-to-the-event-viewer)会更有用。

我的推荐是 VC++ CRTDBG 库（[链接](http://msdn.microsoft.com/en-us/library/42773424.aspx)）。真的很棒！

# dotnetnuke - dotnetnuke 7 重定向到 gettingstarted.aspx

> ID：14196719
> 
> 赞同：1
> 
> 时间：2013-01-07T13:11:56.023
> 
> 标签：dotnetnuke

我按照 dnn 7 安装视频进行了单个服务器安装。我所做的唯一轻微偏差是预先创建一个数据库，如视频中所示。我使用的是 SQL Server Express 而不是全脂 SQL Server，但我遵循了全脂 SQL Server 的安装。我这样做是因为我不了解使用 SQL Sever Express 的传统方式，当我尝试从 SSMS 附加到 MDF 文件时，它告诉我它已被锁定——即使在停止 IIS 之后！

无论如何，对于我使用 dnndev.me 域的第一次安装，一切都很好。

然后我尝试重复安装，但这次使用的是真实域——你可以在 www.rotherweb.co.uk 看到它。问题是站点总是被重定向到页面 gettingstarted.aspx。

我在下面粘贴了 Fiddler 的输出：

# 结果 协议 主机 URL 正文 缓存 内容类型 进程 注释 自定义

1 200 HTTP www.rotherweb.co.uk /Home.aspx 6,839 私人文本/html；charset=utf-8 chrome:4200
2 200 HTTP www.rotherweb.co.uk /Resources/Shared/scripts/DotNetNukeAjaxShared.js？*=1357564157543 3,393 应用程序/x-javascript chrome:4200
3 200 HTTP www.rotherweb.co.uk /GettingStarted.aspx 7,793 私人文本/html；charset=utf-8 chrome:4200
4 200 HTTP www.rotherweb.co.uk /Resources/Shared/scripts/widgets.js？*=1357564157763 3,732 应用程序/x-javascript chrome:4200

我注意到 dnndev.me 的工作网站有 \portals\0\images、\cache、\Templates、\Users 的子文件夹。但是，失败的网站仅包含 \portals\0\cache。所以这表明安装过程中出现了一些失败，但是当我点击查看安装日志时，我得到“没有安装日志”

有人可以帮忙吗？

提前致谢

抢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T08:52:16.610

我设法通过在默认文件夹 c:\program files(x86)\Microsoft SQL Server 等中创建一个数据库来解决这个问题......

我不确定为什么让 db 使用不同的文件夹会导致问题，因为我已为主机应用程序池的帐户授予文件夹的文件权限。如果有机会，我会回去再挖一点。

# php - 无法在带有 php 的 foreach 中使用 html 输入保存/检索值

> ID：14196725
> 
> 赞同：0
> 
> 时间：2013-01-07T13:12:02.753
> 
> 标签：php, html

对于其他人来说可能很明显的一些原因，我无法保存单选按钮的输入值并使用 php.ini 检索它们。$_POST['answerToQuestion'] 不为空，将打印每个的 $key，但值为空。任何人都可以很容易地看到我的错误吗？

html:

```
<form action="answerQuestion.php" method="post">
    <?php foreach($questions as $k => $q):
        if(!$q['is_subquestion']):?>
        <div class="questionAnswer">
            <?php echo $q['body']; ?><br/>
            <div class="btn-group"  data-toggle="buttons-radio">
                <button type="button" class="btn" id="answer_yes" name="answerToQuestion[<?php echo $k; ?>]" value= 1>Yes</button>
                <button type="button" class="btn" id="answer_no" name="answerToQuestion[<?php echo $k; ?>]" value= 0>No</button>
                <button type="button" class="btn" id="answer_na" name="answerToQuestion[<?php echo $k; ?>]" value= 2>N/A</button>
            </div>
            <input type="hidden" id="hidden_2" name="answerToQuestion[<?php echo $k; ?>]" value="">

        </div>
        <?php endif;?>
    <?php endforeach; ?>

    <input type="submit" value="Next" name="submit-form" /> 
</form> 
```

php:

```
foreach($_POST['answerToQuestion'] as $key=>$value)
{
    echo ' '.$value.'<br/>';
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T13:23:18.437

这个答案基于明确说明“我的单选按钮”的问题。

您不需要回显`$k`变量，您应该使用实际的单选按钮：

```
<form action="answerQuestion.php" method="post">
    <div class="btn-group" data-toggle="buttons-radio">
        <label><input type="radio" name="answerToQuestion" value="1"> Yes</label>
        <label><input type="radio" name="answerToQuestion" value="0"> No</label>
        <label><input type="radio" name="answerToQuestion" value="2"> N/A</label>
    </div>
    <input type="submit" value="Submit">
</form> 
```

另外，删除空格`value= 0`（从您的示例中），我也使用引号。

```
 $_POST['answerToQuestion']; 
```

那应该行得通。

# qt - Qt - 如何访问 QTreeWidget 中插入的 QComboBox 数据

> ID：14196726
> 
> 赞同：3
> 
> 时间：2013-01-07T13:12:02.673
> 
> 标签：qt, qt4

在运行时，我在我的 QTreeWidget 中插入了 QCombobox，如下所示：

```
 //global defines
    #define COLUMN_1 (0)
    #define COLUMN_2 (1)

    //Init QComboBox to QTreeWidget - works fine.
    QTreeWidgetItem *item = new QTreeWidgetItem(_myTreeWidget);
    item->setText(COLUMN_1,"testing");

    QComboBox *box = new QComboBox();

    box->addItem("select1");
    box->addItem("select2");
    box->addItem("select3");

    _myTreeWidget->setItemWidget(item, 1, box); 
```

上面的代码有效，但我也想读取这些列中的数据文本。例如。从上面的代码中获取字符串“testing”和“select2”。问题是我不知道如何阅读组合框中的“QComboBox::currentText()”。我试过了：

```
 QTreeWidgetItemIterator it(_myTreeWidget);
   while(*it)
   {
      QTreeWidgetItem *item = *it;

      QVariant first   = item->text(COLUMN_1);
      QString firstStr = loggerName.toString();  //this works

      QComboBox *box    = (QComboBox*)item->data(COLUMN_2, 0);   
      QString boxValStr = box->text().toString();   //this doesn't works, always empty string

      //... more code to handle strings... 

      it++;
   } 
```

感觉“item->data(COLUMN_2, 0)”是错误的方法，因为它返回一个 QVariant。解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T13:22:58.503

`QComboBox *box = (QComboBox*)item->data(COLUMN_2, 0);` 当我阅读这段代码时，我进入了恐慌模式。看签名：

```
QVariant QTreeWidgetItem::data ( int column, int role ) const 
```

如您所用`setItemWidget`，您可能应该使用

```
QWidget * QTreeWidget::itemWidget ( QTreeWidgetItem * item, int column ) const 
```

ps：如果要强制转换，请使用 C++ 强制转换。好多了，`qobject_cast<SubtypeofQObjectPtr>`用于`QObject`. 当强制转换无效时，它返回 null。

实际上，我的意思是使用类似于以下的调用检索组合框：

```
QComboBox* box = qobject_cast<QComboBox*>(treeWidget->itemWidget(item, column)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T17:30:22.493

感谢上面@Umnyobe 和@Zaiborg 的帮助解决了这个问题。这是一个完整的工作示例：

使用 column1 中的文本和 column2 中的 QComboBox 初始化 QTreeWidget：

```
//global defines
#define COLUMN_1 (0)
#define COLUMN_2 (1)

QTreeWidgetItem *item = new QTreeWidgetItem(_myTreeWidgetPtr);//item to put in tree
item->setText(COLUMN_1,"animal");                             //item for column 1 in the tree.

QComboBox *box = new QComboBox();
box->addItem("mouse");                                        //adds selections for comboboxes
box->addItem("cat");
box->addItem("dog");

_myTreeWidgetPtr->setItemWidget(item, COLUMN_2, box);           //insert items in tree. 
```

从树中读取值：

```
QTreeWidgetItemIterator it(_myTreeWidgetPtr);
while(*it)
{
    QTreeWidgetItem *item = *it;

    //Init pointer to current combobox
    QComboBox* box = qobject_cast<QComboBox*>(_myTreeWidgetPtr->itemWidget(item, COLUMN_2)); 

    //Get data from QTreeWidget
    QString col1Str = item->text(COLUMN_LOGGER);   
    QString col2Str = box->currentText();

    it++;
} 
```

希望它可以帮助某人:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T13:20:17.900

使用`QSignalMapper`该类来收集 treewidget 中的不同框。

然后将`QSignalMapper::mapped()`信号连接到某个插槽并使用组合框

编辑：

```
QSignalMapper* mapper = new QSignalMapper(this);
QComboBox *box = new QComboBox();   
connect( box, SLOT(/*whatever*/), mapper, SLOT( map() ) );
mapper->setMapping( box );
myTreeWidget->setItemWidget(item, 1, comboBox); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-23T22:05:45.257

对于正在寻找 Python 解决方案（QTreeWidget 中的 PySide / PyQt QComboBox）的任何人，这里是：

```
 item = QTreeWidgetItem(self.treeWidgetAnimals)
    item.setText(0, "animal")
    combo_box = QComboBox()
    combo_box.addItem('mouse')
    combo_box.addItem('cat')
    combo_box.addItem('dog')
    self.treeWidgetAnimals.setItemWidget(item, 1, combo_box) 
```

我一直在寻找几个小时，但没有其他论坛像传递参考“父母”这样的“代表团”：

        `item = QTreeWidgetItem (self.myTreeWidgetItemObject)`

如果您不传递父级，则不会返回错误，但 ComboBox 不会出现在显示 TreeWidget 中。

# android - 移动动作抽搐

> ID：14196729
> 
> 赞同：1
> 
> 时间：2013-01-07T13:12:09.743
> 
> 标签：android, android-view, android-event

我有一个`View`我想要可拖动的方法，所以我重写了它的`onTouchEvent(MotionEvent event)`方法，并且在移动事件中，我`View`根据事件动作的 (x, y) 坐标重新定位/平移我的。然而！在拖动我的`View`右边时 - 例如 - 我看到事件动作的 x 坐标不是稳定增加（即 ... 15、16、17、18 ...）而是交错的（即 ... 15 , 23, 16, 24, 17, 25 ...)，因此我的`View`动作很猛烈。（同样用于向左、向上、向下等拖动）

任何人都知道这可能是为什么以及如何避免它？！

这是我的`onTouchEvent(..)`方法...

```
@Override
public boolean onTouchEvent(MotionEvent event)
{
  switch (event.getAction())
  {
  case MotionEvent.ACTION_DOWN:
    // make note of the down action's (x, y) coordinate
    action_down_x = event.getX();
    action_down_y = event.getY();
    return true;
  case MotionEvent.ACTION_MOVE:
    // work out displacement
    dX = event.getX() - action_down_x;
    dY = event.getY() - action_down_y;
    // code here to move the view
    return true;
  case MotionEvent.ACTION_UP:
    return true;
  }

  return super.onTouchEvent(event);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T13:19:18.030

问题很简单：您正在使用两个相对坐标。如果您`onTouchEvent()`从视图中覆盖，您可能会得到一个值 10,10。如果您现在移动手指，您会得到一个新值，比如说 9,9，因此您更改视图的位置，这将导致您的手指再次位于视图坐标系的 10,10。

我会做什么：覆盖`onTouchEvent()`父级的，以便您保持在同一个坐标系中。您的实现看起来不错，因此当您将代码移动到父视图/活动时，它应该很容易工作。

# jquery-mobile - 我可以在 JQM 中打开多个对话框吗？

> ID：14196730
> 
> 赞同：0
> 
> 时间：2013-01-07T13:12:10.657
> 
> 标签：jquery-mobile

正如问题所说，我很想知道是否可以在 JQM 中打开多个对话框。

提前致谢， 真诚的 Babak

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T13:22:45.473

对的，这是可能的。

只要页面结构符合 JQM 文档，就可以通过调用在其他对话框之上打开对话框

```
$.mobile.changePage('#page-id',  {transition: 'pop', role: 'dialog'}    )   ; 
```

# android - 在 Intellij IDEA 12 中运行注释的命令

> ID：14196732
> 
> 赞同：1
> 
> 时间：2013-01-07T13:12:20.083
> 
> 标签：android, annotations, intellij-idea

我想知道是否有办法从命令（内置、蚂蚁、外部工具）运行配置的注释处理器，这样我就可以在“make”之前将它添加到我的运行配置中。

这背后的原因是我有一个包含多个模块的大型 Android 项目，但只有我的主模块使用 AndroidAnnotations。现在，每次我更改主模块中的重要内容时，我都必须重建整个项目，这会增加我的构建时间。在 IDEA 11 中，注释处理也在“make”上运行，但在 12 中构建系统发生了变化。

通过“重建项目”以外的其他方式触发注释处理的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T12:14:10.110

在 IDEA 设置中切换到 Eclipse 编译器应该会有所帮助，直到[这个错误被修复](https://github.com/excilys/androidannotations/issues/471)，否则注释应该在 12.0.2 版本中正常工作。

# asp.net - Active Directory 成员资格提供程序 - AD 组/Web.Config 不起作用

> ID：14196734
> 
> 赞同：1
> 
> 时间：2013-01-07T13:12:23.923
> 
> 标签：asp.net, .net, active-directory

我有一个使用 Windows 身份验证的 asp.net/c# 应用程序。我正在尝试根据 AD 用户所属的权限来控制权限，但我似乎无法通过 web.config 让它工作。

我还在后面的代码中添加了一些代码，它甚至表现得很奇怪：

```
if (Roles.IsUserInRole("STP Admin"))
{
    int j = 1;
}

if (User.IsInRole(@"DOMAINNAME\STP Admin"))
{
    int i = 1;
} 
```

第一个 if 块不起作用，但第二个块起作用。所以我相信这告诉我应用程序可以/正在与 AD 通信。

这是我的 web.config ，这是我希望代码去的地方，它不适用于授予权限。即使我在这些组中，它也会拒绝我访问路径，上面的代码证明了这一点。

```
<?xml version="1.0"?>

<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->
<configuration>
  <configSections>

    <section name="loggingConfiguration" type="Microsoft.Practices.EnterpriseLibrary.Logging.Configuration.LoggingSettings, Microsoft.Practices.EnterpriseLibrary.Logging, Version=4.1.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
    <section name="dataConfiguration" type="Microsoft.Practices.EnterpriseLibrary.Data.Configuration.DatabaseSettings, Microsoft.Practices.EnterpriseLibrary.Data, Version=4.1.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
  </configSections>
  <loggingConfiguration name="Logging Application Block" tracingEnabled="true" defaultCategory="General" logWarningsWhenNoCategoriesMatch="true">
    <listeners>
      <add databaseInstanceName="STPDB" writeLogStoredProcName="WriteAuditLog" addCategoryStoredProcName="AddAuditCategory" formatter="Custom Audit Database Formatter" listenerDataType="Microsoft.Practices.EnterpriseLibrary.Logging.Database.Configuration.FormattedDatabaseTraceListenerData, Microsoft.Practices.EnterpriseLibrary.Logging.Database, Version=4.1.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" traceOutputOptions="None" filter="All" type="Microsoft.Practices.EnterpriseLibrary.Logging.Database.FormattedDatabaseTraceListener, Microsoft.Practices.EnterpriseLibrary.Logging.Database, Version=4.1.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" name="Database Trace Listener"/>
      <add source="Enterprise Library Logging" formatter="Text Formatter" log="Application" machineName="" listenerDataType="Microsoft.Practices.EnterpriseLibrary.Logging.Configuration.FormattedEventLogTraceListenerData, Microsoft.Practices.EnterpriseLibrary.Logging, Version=4.1.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" traceOutputOptions="None" filter="All" type="Microsoft.Practices.EnterpriseLibrary.Logging.TraceListeners.FormattedEventLogTraceListener, Microsoft.Practices.EnterpriseLibrary.Logging, Version=4.1.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" name="Formatted EventLog TraceListener"/>
    </listeners>
    <formatters>
      <add template="{dictionary({key} - {value})}" type="Microsoft.Practices.EnterpriseLibrary.Logging.Formatters.TextFormatter, Microsoft.Practices.EnterpriseLibrary.Logging, Version=4.1.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" name="Custom Audit Database Formatter"/>
      <add template="Timestamp: {timestamp}&#xA;Message: {message}&#xA;Category: {category}&#xA;Priority: {priority}&#xA;EventId: {eventid}&#xA;Severity: {severity}&#xA;Title:{title}&#xA;Machine: {machine}&#xA;Application Domain: {appDomain}&#xA;Process Id: {processId}&#xA;Process Name: {processName}&#xA;Win32 Thread Id: {win32ThreadId}&#xA;Thread Name: {threadName}&#xA;Extended Properties: {dictionary({key} - {value}&#xA;)}" type="Microsoft.Practices.EnterpriseLibrary.Logging.Formatters.TextFormatter, Microsoft.Practices.EnterpriseLibrary.Logging, Version=4.1.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" name="Text Formatter"/>
    </formatters>
    <categorySources>
      <add switchValue="All" name="Audit">
        <listeners>
          <add name="Database Trace Listener"/>
        </listeners>
      </add>
      <add switchValue="All" name="General">
        <listeners>
          <add name="Formatted EventLog TraceListener"/>
        </listeners>
      </add>
    </categorySources>
    <specialSources>
      <allEvents switchValue="All" name="All Events"/>
      <notProcessed switchValue="All" name="Unprocessed Category">
        <listeners>
          <add name="Formatted EventLog TraceListener"/>
        </listeners>
      </notProcessed>
      <errors switchValue="All" name="Logging Errors &amp; Warnings">
        <listeners>
          <add name="Formatted EventLog TraceListener"/>
        </listeners>
      </errors>
    </specialSources>
  </loggingConfiguration> 
  <connectionStrings>
    <add name="STPDB" connectionString="Data Source=server\;Initial Catalog=DB;user id=usr;pwd=pass;Integrated Security=False" providerName="System.Data.SqlClient"/>
  </connectionStrings>
  <appSettings>
    <add key="FromEmailAddress" value="stp1@company.com"/>
    <add key="TrainingWarning" value="*Note: Training not being recorded for Medical, ..."/>
    <add key="PrivacyMessage" value="This Information System Is Subject To The Privacy Act Of 1974"/>
  </appSettings>
  <system.web>
    <compilation debug="true" targetFramework="4.0" />
    <securityPolicy>
      <trustLevel name="Full" policyFile="internal"/>
    </securityPolicy>
    <authentication mode="Windows"/>
    <authorization>
      <deny users="?"/>
      <allow roles="DOMAIN\STP Training"/>
      <allow roles="DOMAIN\STP Personnel"/>
      <allow roles="DOMAIN\STP Admin"/>
      <allow users="*"/>
    </authorization>
    <identity impersonate="true"/>

    <membership defaultProvider="AspNetActiveDirectoryMembershipProvider">
      <providers>
        <clear/>
        <add name="AspNetActiveDirectoryMembershipProvider"
             type="System.Web.Security.ActiveDirectoryMembershipProvider, 
                 System.Web, Version=4.0.0.0, Culture=neutral, 
                 PublicKeyToken=b03f5f7f11d50a3a" />
      </providers>
    </membership>

    <roleManager enabled="true" defaultProvider="AspNetWindowsTokenRoleProvider">
      <providers>
        <add name="WindowsProvider" type="System.Web.Security.WindowsTokenRoleProvider"/>
      </providers>
    </roleManager>

    <siteMap defaultProvider="XmlSiteMapProvider" enabled="true">
      <providers>
        <add name="XmlSiteMapProvider" type="System.Web.XmlSiteMapProvider" siteMapFile="Web.sitemap" securityTrimmingEnabled="true"/>
      </providers>
    </siteMap>    

    <profile>
      <providers>
        <clear/>
        <add name="AspNetSqlProfileProvider" type="System.Web.Profile.SqlProfileProvider" connectionStringName="ApplicationServices" applicationName="/"/>
      </providers>
    </profile>

    <!--
            The <customErrors> section enables configuration 
            of what to do if/when an unhandled error occurs 
            during the execution of a request. Specifically, 
            it enables developers to configure html error pages 
            to be displayed in place of a error stack trace.
        -->

    <customErrors mode="RemoteOnly" redirectMode="ResponseRewrite" defaultRedirect="~/ErrorPage.aspx">
    </customErrors>
  </system.web>

  <location path="\TrainingSec">
    <system.web>
      <authorization>
        <allow roles="STP Training"/>
        <allow roles="STP Admin"/>
        <deny users="*"/>
      </authorization>
    </system.web>
  </location>

  <location path="\Manage">
    <system.web>
      <authorization>
        <allow roles="STP Training"/>
        <deny users="*"/>
        <allow roles="Sentry Admin"/>
      </authorization>
    </system.web>
  </location>

  <location path="\Admin">
    <system.web>
      <authorization>
        <allow roles="STP Admin"/>
        <deny users="*"/>
      </authorization>
    </system.web>    
  </location>

  <system.net>
    <mailSettings>
      <smtp deliveryMethod="Network" from="STP@Company.com">
        <network defaultCredentials="false" host="11.111.11.11" port="25"/>
      </smtp>
    </mailSettings>
  </system.net>

  <system.webServer>
     <modules runAllManagedModulesForAllRequests="true"/>
    <defaultDocument>
      <files>
        <clear />
        <add value="Dashboard.aspx"/>
      </files>
    </defaultDocument>
  </system.webServer>
</configuration> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T13:48:52.263

您似乎忘记了域部分：

```
 <location path="\TrainingSec">
    <system.web>
      <authorization>
        <allow roles="DOMAIN\STP Training"/>
        <allow roles="DOMAIN\STP Admin"/>
        <deny users="*"/>
      </authorization>
    </system.web>
  </location> 
```

# c++ - 函数中 C++ 静态变量的 Scala 等价物

> ID：14196736
> 
> 赞同：9
> 
> 时间：2013-01-07T13:12:30.420
> 
> 标签：c++, scala, static-variables

我对 Scala 很陌生，偶然发现了以下问题：

**Scala 等价于函数的静态变量是什么？**

```
void foo()
{
    static int x = 5;
    x++;
    printf("%d", x);
} 
```

编辑：

我想要实现的是一种函数调用计数器——我想检查我的函数已经执行了多少次，同时限制这个计数器的可见性，使其不能从外部修改。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-07T13:27:58.353

这是一个具有类似效果的代码块：

```
scala> object f extends Function0[Unit] {
     |   var x = 0;
     |   def apply = {
     |     x = x + 1;
     |     println(x);
     |   }
     | }
defined module f

scala> f()
1

scala> f()
2 
```

尽管我必须强调这是一种非常糟糕的做法，因为它会破坏[引用透明度](http://en.wikipedia.org/wiki/Referential_transparency_%28computer_science%29)。

如果您真的需要这种行为，请考虑：

```
type State = Int

def f(state: State) = {
 val newState = state + 1
 println(state);
 newState;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T13:27:05.787

Scala 没有等效于 C++ 的局部静态变量。在 Scala 中，范围规则比在 C++ 或 Java 中更一致——在块中定义的内容在退出块时超出范围。正如其他人指出的那样，局部静态变量会产生*副作用*，这在函数式编程中是不可取的。

Scala 是一种混合的面向对象/函数式语言，使得以命令式风格编写成为可能，但更喜欢并鼓励函数式风格（例如，通过将不可变集合作为默认选择）。局部静态变量，除了本身代表副作用之外，在 Java 中也没有，这是不在 Scala 中提供它们的另一个原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-20T08:57:49.597

要在 Scala 中获得等效的 C++ 局部静态变量：

```
import scala.collection.parallel.mutable
import scala.reflect._
import scala.reflect.runtime.universe._

object StaticLocal {
  private val classes = new mutable.ParHashSet[String]
  private val variables = new mutable.ParHashMap[String, AnyVal]
}

import Numeric._

class StaticLocal[T <: AnyVal](value:T)(implicit tag: TypeTag[T], num: Numeric[T]){
  val name = this.getClass + "." + tag.toString() ;
  private var inited = false
  if (!inited) {
    inited = true

    if (!StaticLocal.classes.contains(name)) {
      StaticLocal.classes += name
      StaticLocal.variables += name -> value.asInstanceOf[AnyVal]
    }
  }
  def get():T = {StaticLocal.variables.get(name) match { case x:Some[Int] => (x.get).asInstanceOf[T] ; case None => throw new Exception("Not found:" + name) }}
  def set(value:AnyVal) { StaticLocal.variables.put(name, value)}
  def +(v:StaticLocal[T]):T = { num.plus(this.get, v.get)  }
  def +(v:T):T = { num.plus(this.get, v)  }
  def +=(v:T):Unit = { set(num.plus(this.get, v)) }
  def +=(v:StaticLocal[T]):Unit = { set(num.plus(this.get, v.get)) }

  override def toString() = { get.toString}
  implicit def StaticLocalWrapper(s: StaticLocal[T]):T = s.get
} 
```

然后在方法中：

```
def foo():Unit
{
  object x extends StaticLocal( 5 )
  x += 1
  println( x )
} 
```

这将像在 c++ 中一样工作，包括当方法或拥有的类实例超出范围时（尽管还存在性能损失）。就目前而言，不是线程安全的。

# sql - SQLServer如何处理Alter Table命令？

> ID：14196737
> 
> 赞同：0
> 
> 时间：2013-01-07T13:12:34.220
> 
> 标签：sql, sql-server-2008, alter-table

我们使用的是 SQL Server 2008。我们有一个 Existing 数据库，它需要`ADD`一个新的数据库，其中`COLUMN`一个只有**2700 行**，但它的一列是类型。当我尝试使用table 命令添加新列 () 时，需要太多时间！花了**5 分钟**，命令仍在运行，我停止了命令。下面是命令，我试图添加新列：`Table`**`VARCHAR(8000)``CHAR(1) NULL``ALTER`**

 ****```
ALTER TABLE myTable Add ColumnName CHAR(1) NULL 
```

1.  有人可以帮我理解 SQL Server 如何处理 ALTER Table 命令吗？究竟会发生什么？
2.  为什么添加新列需要这么长时间

**编辑**：

1.  **表大小**对**ALTER 命令**有什么影响？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T13:18:54.533

更改表需要模式锁。许多其他操作也需要相同的锁。毕竟，在`select`语句的中间添加一列是没有意义的。

所以一个可能的解释是一个进程将表锁定了 5 分钟。然后`ALTER`必须等到它自己获得锁。

您可以从 SQL Server Management Studio 的活动监视器中查看被阻止的进程和被阻止的进程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T13:25:58.560

好吧，要记住的一件事是您正在向表中添加一个新的固定长度列。行在存储中的结构方式，对于每一行，所有固定长度列都放在所有可变长度列之前。因此，必须在存储中更新每一行才能进行此更改。

如果反过来，这会导致可以存储在每页上的行数发生变化，则可能需要大量新的分配。

话虽如此，对于所示的行数，我不会需要 5 分钟 - 除非，正如 Andomar 所指出的，还涉及一些锁争用。****

# jquery - jQuery UI 照片管理器示例代码

> ID：14196748
> 
> 赞同：0
> 
> 时间：2013-01-07T13:13:09.303
> 
> 标签：jquery, draggable, droppable

我想知道刷新页面后如何保留垃圾项（我将记录保存在 ddbb 上）

HTML：

```
<html>
<body>
    <ul id="gallery" class="gallery" style="list-style:none;">
        <li class="ui-widget-content ui-corner-tr" id="licar1">
            <img src="img/tipos/7Plazas.png" alt="7 Plazas" width="136" height="56" id="car1" />
            <h5 class="ui-widget-header">High Tatras</h5>
        </li>
        <li class="ui-widget-content ui-corner-tr" id="licar2">
            <img src="img/tipos/Deportivo.png" alt="The chalet at the Green mountain lake" id="car2" width="136" height="56" />
            <h5 class="ui-widget-header">High Tatras 2</h5>
        </li>
        <li class="ui-widget-content ui-corner-tr" id="licar3">
            <img src="img/tipos/Descapotable.png" alt="Planning the ascent" id="car3" width="136" height="56" />
            <h5 class="ui-widget-header">High Tatras 3</h5>
        </li>
    </ul>
    <div style="clear:both;"></div>
    <div id="trash" class="ui-widget-content ui-state-default">
    </div>
</body> 
```

脚本：

```
<script>
$(function() {
    // there's the gallery and the trash
    var $gallery = $( "#gallery" ),
        $trash = $( "#trash" );

    // let the gallery items be draggable
    $( "li", $gallery ).draggable({
        cancel: "a.ui-icon", // clicking an icon won't initiate dragging
        revert: "invalid", // when not dropped, the item will revert back to its initial position
        containment: "document",
        helper: "clone",
        cursor: "move"
    });

    // let the trash be droppable, accepting the gallery items
    $trash.droppable({
        accept: "#gallery > li",
        activeClass: "ui-state-highlight",
        drop: function( event, ui ) {
            deleteImage( ui.draggable );
        }
    });

    // let the gallery be droppable as well, accepting items from the trash
    $gallery.droppable({
        accept: "#trash li",
        activeClass: "custom-state-active",
        drop: function( event, ui ) {
            recycleImage( ui.draggable );
        }
    });

    // image deletion function
    var recycle_icon = "<a href='link/to/recycle/script/when/we/have/js/off' title='Recycle this image' class='ui-icon ui-icon-refresh'>Recycle image</a>";
    function deleteImage( $item ) {
        $item.fadeOut(function() {
            if($( "li", $trash ).length < 5){
                var $list = $( "ul", $trash ).length ?
                    $( "ul", $trash ) :
                    $( "<ul class='gallery ui-helper-reset'/>" ).appendTo( $trash );

                $item.find( "a.ui-icon-trash" ).remove();
                //$item.append( recycle_icon ).appendTo( $list ).fadeIn(function() {
                $item.appendTo( $list ).fadeIn(function() {
                    $item
                        .animate({ width: "136px" })
                        .find( "img" )
                            .animate({ height: "56px" });
                });
            }
            else{
                //alert("No puede escoger mas de 5 tipos de vehiculo");
                recycleImage( $item );
            }
        });
    }

    // image recycle function
    var trash_icon = "<a href='link/to/trash/script/when/we/have/js/off' title='Delete this image' class='ui-icon ui-icon-trash'>Delete image</a>";
    function recycleImage( $item ) {
        $item.fadeOut(function() {
            $item
                .find( "a.ui-icon-refresh" )
                    .remove()
                .end()
                .css( "width", "136px")
                //.append( trash_icon )
                .find( "img" )
                    .css( "height", "56px" )
                .end()
                .appendTo( $gallery )
                .fadeIn();
        });
    }

    // image preview function, demonstrating the ui.dialog used as a modal window
    function viewLargerImage( $link ) {
        var src = $link.attr( "href" ),
            title = $link.siblings( "img" ).attr( "alt" ),
            $modal = $( "img[src$='" + src + "']" );

        if ( $modal.length ) {
            $modal.dialog( "open" );
        } else {
            var img = $( "<img alt='" + title + "' width='384' height='288' style='display: none; padding: 8px;' />" )
                .attr( "src", src ).appendTo( "body" );
            setTimeout(function() {
                img.dialog({
                    title: title,
                    width: 400,
                    modal: true
                });
            }, 1 );
        }
    }

    // resolve the icons behavior with event delegation
    $( "ul.gallery > li" ).click(function( event ) {
        var $item = $( this ),
            $target = $( event.target );

        if ( $target.is( "a.ui-icon-trash" ) ) {
            deleteImage( $item );
        } else if ( $target.is( "a.ui-icon-zoomin" ) ) {
            viewLargerImage( $target );
        } else if ( $target.is( "a.ui-icon-refresh" ) ) {
            recycleImage( $item );
        }

        return false;
    });
}); 
```

我在 HTML 上添加了我的源代码，您可以看到容器（#gallery 和 #trash），在脚本上您可以看到 jquery ui 的示例，并进行了一些小改动

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T15:16:17.780

好吧，我解决了我的问题，实际上这很容易，问题是#thash 容器没有设置为可拖动，所以当我默认将项目放在它上面时，它们不能拖动到#gallery。所以我粘贴了分辨率：

```
<script>
$( "li", $trash ).draggable({
                cancel: "a.ui-icon", // clicking an icon won't initiate dragging
                revert: "invalid", // when not dropped, the item will revert back to its initial position
                containment: "document",
                helper: "clone",
                cursor: "move"
            });
</script> 
```

# data-binding - Infragistics XamChart databinding

> ID：14196755
> 
> 赞同：0
> 
> 时间：2013-01-07T13:13:31.813
> 
> 标签：data-binding, infragistics, pie-chart

I have a total number of experiments, each can be in on of 6 states. I'd like to present this data as a pie chart using XamChart.
How can I bind the number of experiments in state X to a part of the pie? The Feature Browser isn't much help here.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T19:42:33.273

You would need a list that has the states and values for those states and then you would use that as the data source for a series. The following is a simple example using a DataTable:

```
void Window1_Loaded(object sender, RoutedEventArgs e)
{
    Series s = new Series()
    {
        DataSource = TestData(5).DefaultView,
        DataMapping = "Value = Col_3; Label = Col_1",
        ChartType = ChartType.Pie,
        Label = "Series 1"
    };
    this.xamChart1.Series.Add(s);
}

private DataTable TestData(int rows)
{
    DataTable dtData = new DataTable("TestData");

    dtData.Columns.Add("Col_1", typeof(string));
    dtData.Columns.Add("Col_3", typeof(int));

    for (int i = 1; i <= rows; i++)
    {
        DataRow dr = dtData.NewRow();

        dr["Col_1"] = "Row " + i.ToString();
        dr["Col_3"] = i;

        dtData.Rows.Add(dr);
    }

    return dtData;
} 
```

The DataMapping property is what determines what the values and the Labels are. For this example the XamChart was created in XAML with the following markup:

```
<igCA:XamChart Name="xamChart1"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T07:49:30.503

What I did was binding the value to the numeric value. To show those numbers in the built-in legend I used the label, but my databinding was to a string that was concatenated like this:

```
string RuningLabel = `"Running, " + NumRunning`; 
```

XAML:

```
 <igCa:XamChart.Series>
                    <igCa:Series ChartType="Pie">
                        <igCa:Series.DataPoints>
                            <igCa:DataPoint Value="{Binding ActivityStatus.NumWaiting}" Label="{Binding Path=InfoHelper.WaitingLabel}" Fill="Yellow"/>
                            <igCa:DataPoint Value="{Binding ActivityStatus.NumAssigned}" Label="{Binding Path=InfoHelper.AssignedLabel}" Fill="LightPink"/>
                            <igCa:DataPoint Value="{Binding ActivityStatus.NumRunning}" Label="{Binding InfoHelper.RunningLabel}" Fill="Orange"/>
                            <igCa:DataPoint Value="{Binding ActivityStatus.NumPassed}" Label="{Binding InfoHelper.PassedLabel}" Fill="Green"/>
                            <igCa:DataPoint Value="{Binding ActivityStatus.NumFailed}" Label="{Binding Path=InfoHelper.FailedLabel}" Fill="DarkRed"/>
                            <igCa:DataPoint Value="{Binding ActivityStatus.NumOnHold}" Label="{Binding InfoHelper.OnholdLabel}" Fill="DarkGray"/>
                            <igCa:DataPoint Value="{Binding ActivityStatus.NumRemoved}" Label="{Binding InfoHelper.RemovedLabel}" Fill="LightBlue"/>
                            <igCa:DataPoint Value="{Binding ActivityStatus.NumStopped}" Label="{Binding InfoHelper.StoppedLabel}" Fill="CornflowerBlue"/>
                            <igCa:DataPoint Value="{Binding ActivityStatus.NumStuck}" Label="{Binding InfoHelper.StuckLabel}" Fill="DarkKhaki"/>
                        </igCa:Series.DataPoints>
                    </igCa:Series>
                </igCa:XamChart.Series> 
```

# bash - 比较两个文件中的数据，如果不匹配则替换

> ID：14196756
> 
> 赞同：0
> 
> 时间：2013-01-07T13:13:32.453
> 
> 标签：bash, shell

我正在使用 shell 脚本向`echo >` 数据发送数据，`$outputfile`并且始终有一个包含先前数据的旧文件`$oldouptdata`。我需要做的如下：

```
echo "datahereto" > $ouptputfile 
read  $oldouptdata
diff  $ouptputfile  $olouptdata
if there is a difference   then execute function  (myfunction)    then   replace $oldoutputdata  data with $outputfile data 
```

这是我的场景。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T13:35:05.883

这个小 bash 脚本应该可以解决问题

```
#!/bin/bash

echo "yourstuff" > outputfile

diff outputfile oldfile

if [ $? == 1 ]; then

    # they're different!

    # call your function
    yourfunction

    # subst old with new one
    cp -f outputfile oldfile

else

    # they're the same

fi; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T13:29:20.690

没有更多信息，我会说你可以替换以前的文件。如果`oldfile`与 相同`newfile`，则替换将是 noop，如果它们不同，您也将进入所需的状态。

`oldfile`如果，无论出于何种原因，仅当它实际上不同于 时才需要替换`newfile`，请使用类似

```
if ! cmp -s oldfile newfile; then
  mv newfile oldfile
fi 
```

# javascript - 从多行文本框中获取当前光标位置而不选择任何数据

> ID：14196761
> 
> 赞同：0
> 
> 时间：2013-01-07T13:13:48.010
> 
> 标签：javascript, javascript-events

如何在不从文本框中选择任何数据的情况下从多行文本框中获取当前光标位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T13:18:05.533

这个 vanilla JS [**DEMO**](http://jsfiddle.net/qKHbq/2/)应该可以帮助您入门。

```
var textArea = document.getElementsByTagName('textarea')[0];

function mouseMove(e) {
  var x = e.pageX - textArea.offsetLeft,
      y = e.pageY - textArea.offsetTop;

  textArea.value = x + ", " + y;
}

textArea.addEventListener('mousemove', mouseMove, false); 
```

# android - Android - Eclipse：密钥库被篡改或密码不正确

> ID：14196772
> 
> 赞同：13
> 
> 时间：2013-01-07T13:14:29.040
> 
> 标签：android, code-signing, keystore

我正在开发一个 android 项目，使用 debug.keystore 签署我的应用程序（在开发时）......现在我需要使用“真正的”生产密钥库（当我将我的 apk 上传到 Play 商店时使用的那个），在开发测试一些应用内购买的东西时。

所以最好在 eclipse 中使用生产密钥库在我的设备上启动应用程序，这样我就可以使用 eclipse 调试器等。

完成此测试后，我想切换回 debug.keystore 。

因此，我尝试替换 .android 文件夹中的 debug.keystore 文件，但随后出现错误：

> 密钥库被篡改或密码不正确

因为我还没有输入密码。我在哪里输入 eclipse (juno) 中的密码？

或者在 Eclipse 中有没有更好的方法（例如在向导中），而不直接替换 debug.keystore 文件，来指定从 Eclipse 运行按钮启动我的 android 应用程序时应该使用的当前密钥库？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T13:22:54.223

**将密码更改为默认密码，即`android`。**

[这是 SO 链接。如何更改密钥库密码](https://stackoverflow.com/questions/2889238/keystore-change-passwords)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-15T09:16:22.827

我只想在 Eclipse 中输入发布密钥库的密码（就像在导出对话框中一样）。

由于没有对话框并且我不想弄乱 Eclipse 内部配置，因此我使用自定义密钥库作为解决方法。

阅读[此答案](https://stackoverflow.com/a/21332511/993494)以了解如何使用您的发布密钥库进行调试

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T13:27:43.430

如果您已备份 debug.keystore 并将其替换，则将其替换回来应该不是问题，但是您可以从以下位置指定 debug.keystore

Eclipse 工具栏 > Windows> Preference> Android> Build> Custom Keystore。

此外，如果您希望重新创建密钥库，只需将其删除，eclipse 将在下次运行时重新创建。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T18:56:53.983

如果您指定自定义密钥库，则必须确保条目是 eclipse 环境所期望的。也许他们不符合这些要求？[查看文档](http://developer.android.com/tools/publishing/app-signing.html)

特别是在调试模式下登录部分了解详细信息

# android - 如何在 android 的 LargeText 视图中删除单个字符，例如 (')

> ID：14196776
> 
> 赞同：0
> 
> 时间：2013-01-07T13:14:46.633
> 
> 标签：android, string, escaping, textview

**xml**

```
 <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="#ffb6c1" >
             <TextView
                 android:id="@+id/def"
                 android:layout_width="wrap_content"
                 android:layout_height="wrap_content"
                 android:layout_alignParentBottom="true"
                 android:layout_centerHorizontal="true"
                 android:background="@android:color/white"
                 android:textAppearance="?android:attr/textAppearanceLarge"
                 android:textSize="24dp" />           
    </RelativeLayout>
</ScrollView> 
```

例如，我的句子中有`File.txt`这样的：

句子=（这是疯狂的一天）。

在我的 View LargeText 中输出它（？）是疯狂的一天。

我想知道这个错误的答案我已经尝试实现`StringBuilder`类，但我不知道如何使它适用于 android。

这是我所做的所有更改，但仍然没有成功。

```
package org.health.canser;

public void onCreate(Bundle savedInstanceState)
{
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
              WindowManager.LayoutParams.FLAG_FULLSCREEN);
             //setRequestedOrientation (ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
    super.onCreate(savedInstanceState);
    setContentView(R.layout.breast);
    getFile(breastFile);

}

//my text fiel input section===============================================================================
public String loadTextFile(InputStream inputStream) throws IOException {
    ByteArrayOutputStream byteStream = new ByteArrayOutputStream();
    byte[] bytes = new byte[4096];
    int len = 0;
    while ((len = inputStream.read(bytes)) > 0)
    byteStream.write(bytes, 0, len);
    //return new String(byteStream.toByteArray(), "UTF8");
    return new String(byteStream.toByteArray(), "UTF-8");
    }

public void getFile(String fileName)
{

     breast= (View) findViewById(R.id.breastDef);
    AssetManager assetManager = getAssets();
    InputStream inputStream = null;
    try {
    inputStream = assetManager.open(fileName);
    String text = loadTextFile(inputStream);
    Log.i("Msg","msg: " + text);
         ((TextView) breast).setText(text);

    } catch (IOException e) {
    ((TextView) breast).setText("Couldn't load file");
    } finally { 
    if (inputStream != null)
    try {
    inputStream.close();
    } catch (IOException e) {
    ((TextView) breast).setText("Couldn't close file");
    }
    }

} 
```

}

输出：

01-07 15:03:53.628: I/Msg(24930): 风险因素：除了女性，年龄增长是乳腺癌最重要的风险因素。潜在可改变的风险因素包括 18 岁后体重增加、超重或肥胖（绝经后乳腺癌）、使用 MHT（雌激素和孕激素联合治疗）、缺乏运动和饮酒。预测较高风险的医学发现包括高乳房组织密度（乳房 X 线摄影测量腺体组织相对于乳房中脂肪组织的数量）、高骨矿物质密度（低密度的女性患骨质疏松症的风险增加）和活检确认增生（细胞过度生长），尤其是非典型增生（细胞过度生长，看起来不正常）。用于癌症治疗的胸部高剂量辐射也会增加风险。**30岁以后的第**一个孩子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T13:42:14.710

这可能不是一个直接的答案，但它应该有很大帮助：

```
package test;

public class Test {

    public static void main(String... args) throws Exception {
        String czech = "Český";
        String japanese = "日本語";

        System.out.println("UTF-8 czech: " + new String(czech.getBytes("UTF-8")));
        System.out.println("UTF-8 japanese: " + new String(japanese.getBytes("UTF-8")));

        System.out.println("ISO-8859-1 czech: " + new String(czech.getBytes("ISO-8859-1")));
        System.out.println("ISO-8859-1 japanese: " + new String(japanese.getBytes("ISO-8859-1")));
    }

} 
```

UTF-8 捷克语：捷克语
UTF-8 日语：日本语<br> ISO-8859-1 捷克语：?esk�<br> ISO-8859-1 日语：???

ISO-8859-1 是安卓的标准编码。所以这就是为什么你可能会得到“？” 字符，而不是正确的字符。

您需要将其更改为 UTF-8。
我想你可以看看上面的例子。

# iphone - Objective-C 如何有选择地禁用用户交互

> ID：14196788
> 
> 赞同：2
> 
> 时间：2013-01-07T13:15:44.500
> 
> 标签：iphone, objective-c, ios

我有一个包含许多子视图的主视图控制器。我想要的是从子视图文件中以编程方式禁用除一个子视图及其子视图之外的所有其他视图。但我得到的只是所有冻结的视图。我做错什么了？

我试过这段代码：

```
#define kDontDisableUserInteraction 321

- (id)initWithFrame:(CGRect)frame
{
    NSLog(@"initWithFrame");
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
        self.tag = kDontDisableUserInteraction;
    }
    return self;
}

-(void)something{

    MVC *myController = [self getMVC];

    for (UIView* subview in myController.view.subviews) {
        NSLog(@"subview.tag %i", subview.tag);
        if (subview.tag != kDontDisableUserInteraction){
            subview.userInteractionEnabled = NO;
        }
    }

    for (UIView *view in self.subviews){
        NSLog(@"enabled!");
        view.userInteractionEnabled = YES;
    }
}

- (MVC *)getMVC {
    Class vcc = [MVC class];    // Called here to avoid calling it iteratively unnecessarily.
    UIResponder *responder = self;
    while ((responder = [responder nextResponder])) if ([responder isKindOfClass: vcc]) return (MVC *)responder;
    return nil;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T13:32:16.847

以下链接可能会有所帮助：

[如何禁用对除最顶层视图之外的所有视图的触摸输入？](https://stackoverflow.com/questions/5404856/how-to-disable-touch-input-to-all-views-except-the-top-most-view)

[UIView - “用户交互启用”父级为假但子级为真？](https://stackoverflow.com/questions/5887305/uiview-user-interaction-enabled-false-on-parent-but-true-on-child)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T09:15:47.020

我通过在所有其他视图上应用全屏按钮并获得我希望在按钮上进行用户交互的一个视图来解决它。这样，我不允许用户单击除我希望用户单击某些功能的一个视图之外的任何功能。

# gwt - 为每个 GWT 视图添加通用按钮

> ID：14196791
> 
> 赞同：0
> 
> 时间：2013-01-07T13:16:03.130
> 
> 标签：gwt

我的 GWT 应用程序将有 4 - 5 个不同的视图，但每个视图底部都有 2 个类似的按钮。这些按钮的功能在每个视图之间会有所不同，但它们的外观/位置将保持不变。在这种情况下我可以应用任何设计策略吗？我可以继续拥有一个添加按钮的基本面板类，然后每个扩展类实现不同的功能，还是有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T13:22:24.320

创建一个复合小部件 BottomToolbar，其中包含一个带有两个按钮的面板。向这个小部件添加两个方法：`setLeftButtonHandler(ClickHandler handler)`和`setRightButtonHandler(ClickHandler handler)`.

当您将此小部件添加到视图时，您的 Controller/Activity/Presenter（无论您使用什么）只需要设置这些处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T13:20:13.280

最好的办法是创建一个视图，该视图采用与您的 4 或 5 个视图不同的控制器。

这是一个基本的 MVC 模式：您的视图可以被多次实例化，但用户可以根据您提供给视图的控制器进行不同的交互。

然后，您还可以扩展您的主视图以提供更多的 ui 差异。

# git - sharedRepository 错误组

> ID：14196799
> 
> 赞同：5
> 
> 时间：2013-01-07T13:16:30.670
> 
> 标签：git, permissions, repository

我使用多个开发人员可以推送的裸存储库。

正如建议的那样，我曾经`sharedRepository = true`告诉 git 给一组用户推送的权限。

当我想添加推送器时，我只需将所需的组添加为辅助组 ( `sudo adduser the_pusher the_required_group`)

当开发人员推送时，我看到在`objects`使用良好权限而不是良好组创建的目录中创建的文件。

例子：

```
$ ls -l repository/objects
...
drwxrwsr-x 2 pusher1 pusher1 4096 janv.  7 14:13 fa
drwxrwsr-x 2 pusher1 pusher1 4096 déc.  26 15:29 fc
drwxrwsr-x 2 pusher1 pusher1 4096 déc.  11 12:41 fd
... 
```

如您所见，附加组是`pusher1`

我怎样才能让 git 将这些对象附加到`the_required_group`呢？

* * *

**更新**

我在 ssh 上使用 git。每个开发人员都有自己的 ssh 帐户。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T13:53:29.893

我的团队通过`s`在存储库中的所有目录上设置选项来解决此问题，`chmod` 为此`chown`，`chgrp`将文件和目录设置为正确的用户/组，然后`chmod g+s`是存储库中的所有内容。

这`+s`导致新文件具有其父目录的组。取自`man 2 chown`

> *   如果使用 -o nogrpid 挂载文件系统并且在父目录上启用了 set-group-ID 位，则新文件的组与父目录的组相同。

另见，`man chmod`和`man 2 chmod`

# seo - 可以在 robots.txt 中使用相对站点地图网址吗？

> ID：14196801
> 
> 赞同：210
> 
> 时间：2013-01-07T13:16:33.953
> 
> 标签：seo, sitemap, robots.txt

在 robots.txt 中，我可以为站点地图文件编写以下相对 URL 吗？

```
sitemap: /sitemap.ashx 
```

还是我必须使用站点地图文件的完整（绝对）URL，例如：

```
sitemap: http://subdomain.domain.com/sitemap.ashx 
```

为什么我想知道：

*   我拥有一个新的博客服务 www.domain.com，它允许用户在 accountname.domain.com 上写博客。
*   我使用通配符，所以所有子域（帐户）都指向：“blog.domain.com”。

在 blog.domain.com 我放了 robots.txt 让搜索引擎找到站点地图。但是，由于通配符，所有用户帐户共享同一个 robots.txt 文件。这就是为什么我不能使用第二种选择。现在我不能对 txt 文件使用 url 重写。（我猜更高版本的 IIS 可以处理这个问题？）

* * *

## 回答 #1

> 赞同：335
> 
> 时间：2013-01-08T15:33:59.507

根据[sitemaps.org 上的官方文档，](http://www.sitemaps.org/protocol.html#submit_robots)它需要是一个完整的 URL：

> 您可以使用 robots.txt 文件指定站点地图的位置。为此，只需添加以下行，包括站点地图**的完整 URL**：
> 
> ```
> Sitemap: http://www.example.com/sitemap.xml 
> ```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-02-19T17:49:01.870

谷歌抓取工具不够聪明，它们无法抓取相对 URL，这就是为什么总是建议使用绝对 URL 以获得更好的可抓取性和可索引性。

因此，您不能使用此变体

```
> sitemap: /sitemap.xml 
```

推荐的语法是

```
Sitemap: https://www.yourdomain.com/sitemap.xml 
```

笔记：

*   不要忘记将“站点地图”中的第一个字母大写
*   不要忘记在“站点地图：”之后放置空格

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2019-08-23T06:30:48.903

我亲爱的朋友，很好的技术和逻辑问题。在 robots.txt 文件中否，您不能使用站点地图的相对 URL；您需要使用站点地图的完整 URL。

最好使用“站点地图：[https](https://www.example.com/sitemap_index.xml) ://www.example.com/sitemap_index.xml ”

在上面的 URL 后冒号给出空格。我也喜欢支持迪帕克。

# r - 如何更改ggplot中的默认美学？

> ID：14196804
> 
> 赞同：7
> 
> 时间：2013-01-07T13:17:00.823
> 
> 标签：r, ggplot2, default, aesthetics

假设默认情况下我更喜欢`geom_point`使用圆圈 ( `pch=1`) 而不是实心点 ( `pch=16`)。`shape`您可以通过将参数传递给 来更改标记的形状`geom_point`，例如

```
ggplot(diamonds, aes(depth, carat, colour=cut)) + geom_point(shape=1)
ggplot(diamonds, aes(depth, carat, colour=cut)) + geom_point(shape=16) 
```

但我不知道如何更改默认行为。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-07T21:38:18.263

Geom（和 stat）默认值可以直接更新：

```
update_geom_defaults("point", list(shape = 1))
ggplot(mtcars, aes(x=wt, y=mpg)) + geom_point() 
```

![在此处输入图像描述](../Images/5d11501892d3572a3489730783052d22.png)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-07T14:51:07.213

一种方法（虽然我不太喜欢）是创建自己的 geom_point 函数。例如

```
geom_point2 <- function(...) geom_point(shape = 1, ...) 
```

然后照常使用：

```
ggplot(diamonds, aes(depth, carat, colour=cut)) + geom_point2() 
```

或者，如果您愿意，可以覆盖该功能`geom_point()`：

```
geom_point <- function(...) {
  ggplot2::geom_point(shape = 1, ...)
} 
```

这可能被认为是不好的做法，但它确实有效。然后你不必改变你的绘图方式：

```
ggplot(diamonds, aes(depth, carat, colour=cut)) + geom_point() 
```

# alfresco - 用于下载露天内容的 Java 代码

> ID：14196814
> 
> 赞同：0
> 
> 时间：2013-01-07T13:17:33.867
> 
> 标签：alfresco, alfresco-share

我正在使用以下代码下载大小为 51kb 的露天 HTML 内容

```
 HttpGet httpget = new HttpGet(url);
    System.out.println("executing request" + httpget.getRequestLine());
    HttpResponse response = httpclient.execute(httpget);
    HttpEntity entity = response.getEntity();
    System.out.println("----------------------------------------");
    System.out.println(response.getStatusLine());
    System.out.println("----------------------------------------");
    if (entity != null) {
        System.out.println("Response content type: " + entity.getContentType());
        long contentLength = entity.getContentLength();
        System.out.println("Response content length: "+ entity.getContentLength());
        if (contentLength > 0) {
            b = new byte[(int) contentLength];
            entity.getContent().read(b);
            content=new String(b);
            content=content.replace("\n", "").replace("\r", "");
            //content = StringEscapeUtils.escapeHtml(content);
            System.out.println("Response content: " + content);
        }
     } 
```

只有 30-40% 的 HTML 内容被下载和显示。我无法获得完整的内容。

我尝试增加 b 的字节大小。但对我来说没有任何结果。

请帮助我使用 java 代码下载露天内容。任何帮助表示赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T13:39:50.003

读取 InputStream 并不总是返回全部内容。您需要从`InputStream`循环中读取并写入缓冲区的正确偏移量，并根据`read()`. 例如：

```
byte[] b = new byte[(int)contentLength];
int offset = 0;
while(offset < contentLength) {
    offset += inputStream.read(b, offset, b.length - offset);
}
String content = new String(b); // Or specify encoding. 
```

或者你可以使用像 Apache Commons IO 这样的库。然后是：

```
IOUtils.toString(entity.getContent(), encoding); 
```

# android - 更新默认电话号码

> ID：14196817
> 
> 赞同：1
> 
> 时间：2013-01-07T13:17:51.230
> 
> 标签：android, sharedpreferences

我有一个`EditText`字段，我有一个默认值来自
`strings.xml ( android:text="@string/DefaultMobileNumber")`.
当用户更新此（按钮侦听器）时，我将新值存储在 中**`SHARED_PREFERENCES`**，但是，重新显示页面时，新值不会显示在屏幕上（strings.xml 中的默认值仍然存在）。我在用

```
final EditText phoneNoText = (EditText) findViewById(R.id.InPhone);
    if (mSettings.contains(PREFERENCES_PHONENO)) {
        String sPhoneNoText = (mSettings.getString(PREFERENCES_PHONENO,"No Number"));
        phoneNoText.setText(sPhoneNoText);
        //Toast.makeText(getBaseContext(), sPhoneNoText, Toast.LENGTH_SHORT).show();
    }
    else
    {// write default value to PREFERENCES_PHONENO
        editor.putString(PREFERENCES_PHONENO, "07799060000");
        editor.commit();
        //Toast.makeText(getBaseContext(), "No Phone", Toast.LENGTH_SHORT).show();
    }; 
```

希望我犯了一个愚蠢的错误，但似乎找不到！

# jquery - 遗留系统中 Jquery onload 和 RequireJS 的问题

> ID：14196818
> 
> 赞同：0
> 
> 时间：2013-01-07T13:17:53.787
> 
> 标签：jquery, requirejs

我有一个遗留的 spagetti 系统，我正在尝试开始使用 RequireJs。我一直遇到的问题是在包含文件的不同位置有几个 jquery.ready() 语句。

这些包含的文件既用于我尝试使用 RequireJS 的页面，也用于许多其他不会使用 requireJS 进行下一次实时复制的页面。

问题是对于使用 requireJs JQuery 的页面在执行包含的文件时尚未加载。

我知道这应该放在将加载依赖项的主要 RequireJs 文件中，但目前我被迫在那里和原始位置复制这个 onload 代码（使用和 if 语句来检查它所在的页面看看我是否应该跳过 onload，因为它已在 Require js 文件中处理）。

有一个更好的方法吗？我想知道我是否会更好地包括带有传统平均值的 jquery，而不是现在尝试这样做。[组合的 RequireJS jquery 文件](http://requirejs.org/docs/download.html#samplejquery)会 解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-24T15:18:53.203

我的情况非常相似。我的 API 需要在我的用户碰巧将它放在文档加载顺序中的任何地方工作，无论他们设法将多少不同版本的 jquery 加载到他们的页面中。

我的代码使用组合的 RequireJS jquery 文件，但我最近将其移动以符合[使用 jquery 和 requirejs 的新指南](http://requirejs.org/docs/jquery.html#noconflictmap)

新技术允许您将 jquery 版本限制*在*本地范围内，不受其他干扰或插件的影响。

我发现了，稍微使用[jQuery.holdReady()](http://api.jquery.com/jQuery.holdReady/)让我的代码可以在各种意大利面条中存活 :-)

_佩斯

# java - 为什么我们需要错误类？

> ID：14196820
> 
> 赞同：4
> 
> 时间：2013-01-07T13:18:03.737
> 
> 标签：java, exception-handling

我们有`Throwable`类，它是`Error`类（用于**不可恢复**的错误）和`Exception`类（用于**可恢复**的错误）的基类

所以，

**1>**我们**可以** `throw`实现类的对象`error`。（虽然实现类没有意义，`Error`因为我们有`Exception`类来做同样的事情..）

**2>** Java 不推荐捕获`Error`对象..

* * *

那么`Error`对象的需求是什么呢？编译器不能在内部实现吗？这不是一个错误吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-07T13:42:47.307

从技术上讲，“不可恢复的错误”和“可恢复的错误”之间并没有真正的区别，而是已检查的异常和未检查的异常之间的区别。Java*对*它们的区别如下：

*   你*必须*`throws`在你的子句中声明一个检查异常；如果使用在块中引发检查异常的方法，则`try`必须`catch`说异常或将此异常添加到方法的`throws`子句中；
*   您*可以*`throws`在子句中声明未经检查的异常（不推荐）；`try`如果使用在块中引发未经检查的异常的方法，*则可以* `catch`将该异常或将此异常添加到方法的`throws`子句中（也不推荐）。

*除非您真的*知道自己在做什么，否则当然不建议您“吞下”任何类型的未经检查的异常（即，`catch`它带有一个空块）。

`Exception`是基础检查异常类；`Error`并且`RuntimeException`都是未经检查的异常，它们的所有子类也是如此。您会注意到所有三个类都 extend `Throwable`，并且 javadoc for`Throwable`声明：

> 出于对异常的编译时检查的目的，Throwable 和任何不是 RuntimeException 或 Error 的子类的 Throwable 子类都被视为已检查异常。

(in) 著名的未检查异常的经典示例：

*   `OutOfMemoryError`（扩展`Error`）；
*   `StackOverflowError`（扩展`Error`）；
*   `NullPointerException`（扩展`RuntimeException`）；
*   `IllegalArgumentException`（扩展`RuntimeException`）；
*   等等等等

`Error`和之间唯一真正的区别`RuntimeException`是它们估计的严重性级别，并且是“语义”差异，而不是技术差异：最终，两者的行为相同。`Error`如果你抓住一个但不重新抛出它，一些 IDE（想到 Intellij IDEA）也会对你大喊大叫。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-07T13:20:38.650

您当然**可以**抛出扩展（而不是实现）`Error`类的对象。

正如你所说，`Error`存在不可恢复的错误。最广泛的用途是在 JVM 本身中，它使用 的子类来`Error`处理它无法恢复并且不希望您能够从中恢复的东西 - 例如内存不足。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-07T13:46:11.717

错误的 javadoc 说

> Error 是 Throwable 的子类，表示合理的应用程序不应尝试捕获的严重问题。大多数此类错误是异常情况。

而对于异常，javadoc 说

> 类 Exception 及其子类是 Throwable 的一种形式，它指示合理的应用程序可能想要捕获的条件。

**一些差异**

1.  错误并不意味着被捕获，即使您捕获它也无法从中恢复。例如在**OutOfMemoryError**期间，如果你抓住它，你会再次得到它，因为 GC 可能无法首先释放内存。另一方面，可以正确捕获和处理异常。
2.  错误在本质上通常是致命的，从错误中恢复是不可能的，这在异常情况下是不同的，在所有情况下可能不是致命的。Java中错误和异常的区别
3.  与Error 不同，Exception 通常分为两类，例如checked 和unchecked Exceptions。Checked Exception 在 Java 编程语言中具有特殊的地位，需要强制 try catch finally 代码块来处理它。另一方面，作为 RuntimeException 的子类的 Unchecked Exception 主要代表编程错误。未经检查的异常最常见的示例是 Java 中的 NullPointerException。
4.  与未检查的异常类似，Java 中的错误也是未检查的。如果编译器没有看到使用 try catch 或 finally 块处理的错误，则编译器不会抛出编译时错误。事实上，处理错误不是一个好主意，因为从错误中恢复几乎是不可能的。

这就是Java中错误和异常之间的区别。要记住的关键点是错误本质上是致命的，并且可能无法恢复，另一方面，通过仔细处理异常，您可以使您的代码更加健壮并防范不同的情况。

查看一些 Error 的子类，取自它们各自的 javadoc：

> AnnotationFormatError - 当注释解析器尝试从类文件中读取注释并确定注释格式错误时抛出。
> 
> AssertionError - 抛出以指示断言失败。
> 
> LinkageError - LinkageError 的子类表明一个类对另一个类有一些依赖；但是，后一个类在前一个类编译后发生了不兼容的变化。
> 
> VirtualMachineError - Thrown to indicate that the Java Virtual Machine is broken or has run out of resources necessary for it to continue operating.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-07T13:22:00.710

从[错误文档](http://docs.oracle.com/javase/7/docs/api/java/lang/Error.html)：

> Error 是 Throwable 的子类，表示合理的应用程序不应尝试捕获的严重问题。

和[异常文档](http://docs.oracle.com/javase/7/docs/api/java/lang/Exception.html)：

> 类 Exception 及其子类是 Throwable 的一种形式，它指示合理的应用程序可能想要捕获的条件。

我认为这清楚地表明了区别。另请注意，两者都继承自 throwable，因此都可以被抛出。

# c++ - 无法访问向量类成员

> ID：14196823
> 
> 赞同：2
> 
> 时间：2013-01-07T13:18:10.117
> 
> 标签：c++, vector, std, dev-c++

我有这个代码：

WItem.h

```
#include <vector>
#include <string>

typedef struct iteminfo {
int rowid;
   char* item;
   int type;
   int extra;
   int objectid;
} item;

class CItem {
 public:
    void push(int rowid, char* item, int type, int extra, int objectid);
    std::vector<iteminfo> data;
}; 
```

WItem.cpp

```
#include "witem.h"

void CItem::push(int rowid, char* item, int type, int extra, int objectid) {
   iteminfo* temp = new iteminfo;
   temp->rowid = rowid;
   temp->item = item;
   temp->type = type;
   temp->extra = extra;
   temp->objectid = objectid;

   this.data.push_back(temp);
} 
```

我得到这些错误：

*   `data' 不是类型
*   在“。”之前请求非聚合类型的成员 令牌

而且我不知道出了什么问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T13:28:15.650

1.  `this.data`是错误的，必须是公正的`data`或`this->data`

2.  `data`是一个向量`iteminfo`并且`temp`是`iteminfo *`一个指针。您不需要在`new`这里使用，您应该只在“堆栈上”创建项目，然后使用`push_back`将它的副本插入到您的向量中。

3.  `std::string`由于这很可能根本不是 C，因此不需要 typedef，但对于字符串 not更是如此`char *`。维护这些指针你会陷入很多混乱。

4.  最好不要`item`同时用作类型和成员。这是合法的，但会在您的代码中混淆。

5.  理想情况下，创建`data`一个私有成员`CItem`（顺便说一下，如果您使用类名`item`并且`CItem`只是在这里重现您的问题，那很好，但在实际代码中它们是糟糕的类名，请选择更具描述性的名称）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-07T13:19:04.030

`this.data`应该是`this->data`，因为`this`是 C++ 中的指针。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T14:54:03.723

CashCow 对错误进行了很好的分析。另外我想指出

*   push 应该带一个类型`iteminfo`，参数列表比较乱

*   `iteminfo`应该有一个构造函数

    `iteminfo(int rowid, char* item, int type, int extra, int objectid);`

    还可以考虑将成员设为私有以保护他们免受全球滥用

如果您的代码示例是完整的，您会发现该类`CItem`已过时并且可能被`std::vector<iteminfo>`（或 typedef）替换

# php - wordpress 简码

> ID：14196824
> 
> 赞同：-1
> 
> 时间：2013-01-07T13:18:10.977
> 
> 标签：php, wordpress, themes, blogs, shortcode

大家好，我是 wordpress 的新手，并试图了解更多关于它的信息，问题是我在我的博客中安装了一个新主题，除了简码功能外，似乎一切正常，我不知道为什么或在哪里应该我正在寻找那个问题这是我的管理员发布页面的图片它显示我选择了按钮短代码并且没有任何反应没有要填写的参数甚至当我按下发送到编辑器按钮时也没有任何反应，请帮助我找出答案我的问题 ：

图片： ![http://tinypic.com/r/a3ppph/6](../Images/192ca1aa28de2b2b341f22f487596968.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T13:31:47.960

网上有帖子抱怨简码生成器不工作。您应该首先在您的 wordpress 配置 wp-config.php 中打开调试，然后查看是否记录了错误。

最好的解决方案是学习如何手动添加短代码，很简单 [myshortcode]...[/myshortcode]

# android - 我的服务（用于背景音乐）没有启动

> ID：14196833
> 
> 赞同：0
> 
> 时间：2013-01-07T13:18:57.123
> 
> 标签：android

我创建了一个播放背景音乐的类

```
public class Background_music extends Service {

    MediaPlayer player;
    public IBinder onBind(Intent arg0) {    
        return null;
    }

    @Override
    public void onCreate() {       
        super.onCreate();      
        player = MediaPlayer.create(this, R.raw.background_music);
        player.setLooping(true);        
        player.start();       
    }

    @Override
    public void onStart(Intent intent, int startId) {    
        super.onStart(intent, startId);     
    }

    public  void onStop(){  
        player.stop();
        player.release();
    }

    public void onPause() {  
          player.stop();  
    }

    public void onResume(){
        player.start();
    }

    @Override
    public void onDestroy() {
      player.stop();
      player.release();
    }
} 
```

在我的主要课程中，我以这种方式调用服务

```
Intent musica_backGround=new Intent(this, Background_music.class);
startService(musica_backGround); 
```

但是音乐没有响起。我认为问题是我无法启动服务，因为即使我尝试做其他的东西 Background_music 类，什么也没有发生

在 LogCat 上，我收到此消息`showStatusIcon on inactive InputConnection`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T13:27:31.257

您需要在清单文件中注册您的服务：

```
 <service android:name=".Background_music">
        . . .
    </service> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T13:27:11.763

用户提琴手记得我在清单文件中注册了我的服务。

现在它可以工作了

# java - 连接 mysql 时通信链接失败

> ID：14196842
> 
> 赞同：2
> 
> 时间：2013-01-07T13:19:23.673
> 
> 标签：java, android, mysql

我正在尝试从我的 android 应用程序连接到 mysql 数据库。

我收到**通信链路故障**错误。
下面是代码片段：

```
public class MySqlConnector {
    private Connection con = null;
    private String s = "";
    private String username = "root";
    private String password = "password01";
    private String connectionString;

    public String ConnectToDb() {
         connectionString ="jdbc:mysql://192.168.1.104:3306/mydatabase";
        //connectionString="jdbc:mysql://10.0.0.0:3306/mydatabase";
        // connectionString="jdbc:mysql://127.0.0.1:3306/mydatabase";
        //connectionString = "jdbc:mysql://MainSrv04:3306/mydatabase";
        // connectionString="jdbc:mysql://localhost:3306/mydatabase";

        // connectionString =
        // "jdbc:mysql://localhost:3306/mydatabase?user=root&password=password01&useUnicode=true&characterEncoding=UTF-8";

        try {
            Class.forName("com.mysql.jdbc.Driver").newInstance();

        } catch (Exception ex) {
            ex.printStackTrace();
        }
        try {
            con = DriverManager.getConnection(connectionString, username,
                    password);

            Statement st = con.createStatement();
            String sql = "SELECT First_Name FROM mydatabase.custinfo where CardNumber=5325784707";
            ResultSet rs = st.executeQuery(sql);
            s = rs.getString("First_Name");
        } catch (Exception e) {
            e.printStackTrace();
        } finally {
            if (con != null) {
                try {
                    con.close();
                    Log.i("MySqlConnector", "Database connection terminated");
                } catch (Exception e) { /* ignore close errors */
                }
            }
        }

        if (s == "") {
            s = "No Result";
        }
        Log.i("MySqlConnector : s=", s);

        return s;
    }
} 
```

* * *

我尝试了所有可能的组合，如评论中所示，并在 logcat中*的字段引起以下错误：*

*   使用本地主机时 -->`Caused by: java.net.ConnectException: localhost/127.0.0.1:3306 - Connection refused`
*   使用 127.0.0.1 时 -->`Caused by: java.net.ConnectException: /127.0.0.1:3306 - Connection refused`
*   使用 10.0.0.0 时 -->`Caused by: java.net.SocketException: The operation timed out`
*   使用 192.168.1.104 时 -->`Caused by: java.net.SocketException: The operation timed out`
*   使用 MainSrv04 时 -->`Caused by: java.net.UnknownHostException: MainSrv04`

* * *

**我还通过telnet** ping`mysql`端口并且它正在工作。 另外，我已经处理了特权。

 **但我仍然遇到`Communications link failure`错误。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T14:23:53.997

android应用程序是否在同一个网络上？如果不

> jdbc:mysql://192.168.1.104:3306

和

> jdbc:mysql://10.0.0.0:3306

不管用。

给出正确的mysql网络地址。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-19T16:43:22.720

我使用**最新版本的 adt**和**mysql-connector-java-5.1.17-bin.jar**，这对我有用：

在行之后将以下代码添加到您的文件中`setContentView(R.layout.activity_main);`

```
if (android.os.Build.VERSION.SDK_INT > 9) {
    StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
    StrictMode.setThreadPolicy(policy);
} 
```

并使用`import android.os.StrictMode;`

如果您使用新的 api，请添加`@SuppressLint("NewApi");`**

# objective-c - UIWebView stringByEvaluatingJavaScriptFromString 返回空字符串

> ID：14196844
> 
> 赞同：4
> 
> 时间：2013-01-07T13:19:29.367
> 
> 标签：objective-c, uiwebview

我知道已经有[几个](https://stackoverflow.com/questions/6567653/javascript-not-executing-in-iphone/6567949#6567949)关于这个话题的讨论，但我在这里尝试不同的方法。我试图首先将一个变量注入 Webview，然后尝试通过调用该变量的方法来获取输出。事情是这样的：

```
webview = [[UIWebView alloc] initWithFrame:window.bounds];
[window addSubview:webview];
[webview loadHTMLString:@"<html><head><script>(function() {var myVariable = window.myVariable = {};"
 @"myVariable.getVersion = function() {return 1;}})();"
 @"</script></head></html>"
                baseURL:nil];
webview.delegate = self;

- (void)webViewDidFinishLoad:(UIWebView *)webView {
if ([[webView stringByEvaluatingJavaScriptFromString:@"typeof(myVariable);"] isEqualToString:@"object"]) {
    NSLog(@"version=%@",[webView stringByEvaluatingJavaScriptFromString:@"myVariable.getVersion());"]);
} else {
    NSLog(@"failed the test.");
} 
```

}

输出：版本=

# javascript - 使用键码用文本填充对象（可以使用键盘快捷键）

> ID：14196845
> 
> 赞同：0
> 
> 时间：2013-01-07T13:19:42.163
> 
> 标签：javascript, jquery, text, keyevent, rebuild

除了这两种方法之外，还有其他方法可以*使用键码*编写文本吗？但是，以下方法的坏处是它们无法处理`shift + a`...

**一、方法**

使用一个 json-object 填充键码和字符，然后在迭代它们时重建文本并与键入的键码进行比较。

示例*（仅用于演示目的）*：

```
var chars = {
  65: 'a',
  66: 'b',
  67: 'c',
  68: 'd',
  69: 'e'
  etc..
},
keys = {};

...push some keycodes to `keys`-array...
e.g: keys[(+new Date())] = 65;
     keys[(+new Date())] = 66;
     keys[(+new Date())] = 67;

...fill the output-string
var mark = null,
    timeout = 0,
    str = "";

    for(var t in keys) {
        if(mark) {
            timeout = tS - mark;
        } else {
            timeout = 0;
            mark = tS;
        }

        setTimeout(function(){
            str += keys[t];
        }, timeout);
    }

...return the string:
elem.text(str); 
```

**2.方法**

创建一个空/阴影`input`并将其中的值填充到一个字符串中（我不会进一步解释这个方法，你可以在这里阅读：[https ://stackoverflow.com/a/8072440/1250044](https://stackoverflow.com/a/8072440/1250044)

**3.方法**

不是真正的方法，但应该注意：

```
var str = String.fromCharCode(e.which); 
```

## 一个好方法

我认为最好的方法是触发`keyevent`这样的：

```
$(document).trigger({type: 'keydown', which: x}); 
```

缺点是，这不会触发真正的`keydown`，所以这样写是不可能的。

# vb.net - 使用 Outlook 互操作避免文件未找到异常

> ID：14196852
> 
> 赞同：1
> 
> 时间：2013-01-07T13:20:19.660
> 
> 标签：vb.net, com, outlook, interop

我有一个简单的单例模式类，我的应用程序通过它与 Outlook 集成，并且运行我的应用程序的几台计算机没有安装 Outlook。我已将所有互操作内容包装在 try-catch 中，以避免在 Outlook 不可用时引发异常，但我仍然会收到带有`FileNotFound`异常的自动错误报告。

这是我班上的（相关代码）：

```
Imports Microsoft.Office.Interop
Public Class OutlookIntegration
    Private Shared _instance As OutlookIntegration

    Public Shared Sub Initialize()
        _instance = New OutlookIntegration()
    End Sub

    Private _outlookApp As Outlook.Application
    Private _outlookNs As Outlook.NameSpace
    Private ReadOnly _outlookEnabled As Boolean

    Private Sub New()
        Try
            _outlookApp = New Outlook.Application   
            _outlookNs = _outlookApp.GetNamespace("mapi")
            _outlookNs.Logon()

        Catch ex As Exception
            _outlookApp = Nothing
            _outlookEnabled = False
            Exit Sub
        End Try

        _outlookEnabled = True
    End Sub
End Class 
```

我得到的错误是：

> 消息：无法加载文件或程序集 'office，Version=11.0.0.0，Culture=neutral，PublicKeyToken=71e9bce111e9429c' 或其依赖项之一。该系统找不到指定的文件。System.IO.FileNotFoundException
> at OutlookIntegration..ctor()
> at OutlookIntegration.Initialize() in OutlookIntegration.vb: 第 7 行
> MyApplication_Startup(Object sender, StartupEventArgs e) 在 ApplicationEvents.vb:line 139
> 
> (System.IO.FileNotFoundException) 无法加载文件或程序集 'office, Version=11.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c' 或其依赖项之一。该系统找不到指定的文件。

好像我在这里遗漏了一些简单的东西。堆栈跟踪是红鲱鱼吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T17:48:00.240

在调用构造函数 ( *OutlookIntegration..ctor() ) 期间将***私有成员**加载到内存 ( *`Outlook.Application`,`Outlook.NameSpace`等*)并且客户端计算机上不存在相应的 Outlook 依赖项时，将引发异常。`OutlookIntegration`

 *有几种方法可以处理这个问题：

1.  当构造函数抛出此异常时处理错误（在您的*方法中**尝试/捕获`ctor`声明`Initialize()`*）
2.  创建另一个仅测试是否安装 Outlook 的类（*避免使用私有成员*）
3.  阅读告诉您 Outlook 是否存在的 Windows 注册表项

出于性能原因，最好不要抛出异常——所以#3是我的首选，但只要你不不断地执行这个检查，你应该可以使用这些选项中的任何一个。*

# java - 在 FTP 中存储 ObjectOutputStream 导致 java.net.SocketException：软件导致连接中止：套接字写入错误

> ID：14196853
> 
> 赞同：0
> 
> 时间：2013-01-07T13:20:22.207
> 
> 标签：java, sockets, object, serialization, ftp-client

我正在尝试将自定义定义的 (ProjectData) Java 对象存储在 FTP 的文件中。ProjectData 类实现 Serializable 接口。我正在使用 apache Commons Net FTP 客户端。我有一个自定义类 FtpClient ，它具有 Commons net FTP 客户端的实例。我使用这个类连接、上传文件、下载文件、storeFileStream。当我尝试调用 saveProjectData 函数时，它在执行 save.writeObject(data) 时抛出异常。

```
java.net.SocketException: Software caused connection abort: socket write error
at java.net.SocketOutputStream.socketWrite0(Native Method) [:1.6.0_23]
at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:92) [:1.6.0_23]
at java.net.SocketOutputStream.write(SocketOutputStream.java:136) [:1.6.0_23]
at org.apache.commons.net.io.SocketOutputStream.write(SocketOutputStream.java:72) [:2.2]
at java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1847) [:1.6.0_23]
at java.io.ObjectOutputStream$BlockDataOutputStream.flush(ObjectOutputStream.java:1792) [:1.6.0_23]
at java.io.ObjectOutputStream.flush(ObjectOutputStream.java:699) [:1.6.0_23] 
```

那么代码中的问题是什么，我准备好连接已经关闭，同时保存对象。但是我找不到错误在哪里。

```
public void saveProjectData(ProjectData data, String filePath) {
    ftpClient = new FtpClient(ftpConfig, logger);
    ObjectOutputStream save = null;
    try {
        ftpClient.connect();
        save = new ObjectOutputStream(ftpClient.storeFileStream(filePath));
    } catch (Exception e) {
        // ignore
    }
    try {
        if (save == null) {
            ftpClient.reconnect();
            save = new ObjectOutputStream(ftpClient.storeFileStream(filePath));
        }
        save.writeObject(data);
        save.flush();
    } catch (IOException e) {
        logger.error("Error creating file:" + filePath);
        throw new FileTransferException("Could not create file:" + filePath, e);
    } finally {
        if (save != null) {
            try {
                save.close();
            } catch (Exception e) {
                logger.warn("Error closing writer of file:" + filePath, e);
            }
            save = null;
        }
        if (ftpClient != null) {
            try {
                ftpClient.disconnect();
            } catch (Exception e) {
                // ignore
            }
            ftpClient = null;
        }
    }
}

    /**
 * Stores the file in FTP
 * @param filePath
 * @return
 */
public OutputStream storeFileStream(String filePath) {
    try {
        client.setFileType(FTP.BINARY_FILE_TYPE);
        return client.storeFileStream(filePath);
    } catch (Exception ioe) {
        log.warn("Could not store file:" + filePath, ioe);
        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T23:12:16.543

> 我读到连接已经关闭

不，您读到（或者您应该读到）连接已*被对等方关闭。*

可能您已超出上传限制。

# ruby-on-rails - 轨道上的红宝石（amistad gem）

> ID：14196857
> 
> 赞同：0
> 
> 时间：2013-01-07T13:20:37.917
> 
> 标签：ruby-on-rails

我想在我的应用程序中保持友谊，以便用户发送请求并具有接受/拒绝功能。我正在使用 rails 3.2.5 和 ruby​​ 1.9.3。我对 amistad gem 进行了同样的尝试，但不幸的是它没有用。amistad 中的“包括 Amistad::FriendshipModel”不包括在我的用户模型中。我找不到这是什么原因。你能为我在 ruby​​ on rails 中的这个功能推荐一些其他的宝石吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T14:33:49.183

Amistad 的替代方案是[**Amico**](https://github.com/agoragames/amico) - Redis 支持的关系（例如友谊）。

一般来说，更多的 gem 也可能满足您的需求：[Twitter的](https://github.com/twitter/activerecord-reputation-system)[**ActiveRecord Reputation System**](https://github.com/twitter/activerecord-reputation-system)或[**Community Engine**](https://github.com/bborn/communityengine) gem。

# objective-c - MKMapView 获取当前位置

> ID：14196859
> 
> 赞同：0
> 
> 时间：2013-01-07T13:20:48.867
> 
> 标签：objective-c, ios, ios6, mapkit

> **可能重复：**
> [userLocation：纬度/经度返回零？](https://stackoverflow.com/questions/3178965/userlocation-latitude-longitude-return-zero)

我正在尝试获取`MKMapView`我添加 的当前位置

```
CLLocationCoordinate2D coordiante = self.mapView.userLocation.location.coordinate;      
NSLog(@"%f %f",coordiante.latitude,coordiante.longitude); 
```

到我的`viewDidLoad`方法。
但是我得到的纬度和经度值是 0.00000

这是控制台的输出。

```
2013-01-07 18:41:26.349 MapKitExample[4623:c07] 0.000000 0.000000 
```

# html - CSS：绝对定位和溢出：隐藏

> ID：14196865
> 
> 赞同：0
> 
> 时间：2013-01-07T13:21:05.700
> 
> 标签：html, css

我正在尝试制作一个缩略图查看器，当您将鼠标悬停在缩略图上时，您将获得更大电子邮件的缩略图大小的视图。当您在缩略图中移动时，您会看到较大图片的各个部分。

您可以通过滚动最后一张（绿色）图像 [在此处](http://www.eatonlabs.net/)看到这一点。

当您翻转时，我会在低分辨率缩略图和高分辨率版本之间交换图像。由于某种原因，这个更大的图像不再受`overflow: hidden`父属性的约束。我该怎么做才能让它工作？

**更新**

该`position: relative`属性当前设置在`.artwork`当前提供`overflow: hidden`. 添加`overflow: hidden`到顶级容器可以正常工作，但似乎否定了圆形边框效果......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T13:23:55.667

在您的父块上使用 position:relative 。

这是因为我们的子 div 是绝对定位的。但是当您使用绝对位置时，它指的是第一个定位的父级。第一个定位的父级是第一个具有位置：相对（或绝对）属性的父级

对于边界半径问题，这是一个 firefox 和 chrome 错误，您可以使用 hacks 修复。在这里看到它：

[CSS3 边框半径裁剪问题](https://stackoverflow.com/questions/3248734/css3-border-radius-clipping-issues)

编辑：总结：

添加位置：相对于 div 图稿。然后将您的边框半径添加到“a”父标签

# asp.net - Outlook 显示来自 ICal 的错误时间

> ID：14196867
> 
> 赞同：1
> 
> 时间：2013-01-07T13:21:08.323
> 
> 标签：asp.net, outlook, icalendar

我遇到了一个奇怪的问题。我正在通过 razor 代码创建一个 ICal 文件，当我从 wesbite 下载 ICal 时，它显示错误的时间。

但是，当我用记事本打开它时，正确的时间是那里的打印机。为了详细描述这一点，我将制作一个示例。Ical 在记事本中打开

```
BEGIN:VCALENDAR
PRODID:-//Google Inc//Google Calendar 70.9054//EN
VERSION:2.0
CALSCALE:GREGORIAN
METHOD:REQUEST
BEGIN:VEVENT
DTSTART:20130107T150000Z
DTEND:20130107T170000Z
DTSTAMP:20130107T131549Z
ORGANIZER;CN=it@rk.com:mailto:it@rk.com
UID:u20vfrto8rfd9cscp52sn9o@google.com
ATTENDEE;CUTYPE=INDIVIDUAL;ROLE=REQ-PARTICIPANT;PARTSTAT=ACCEPTED;CN=;X-NUM-GUESTS=0:mailto:
DESCRIPTION: INGBOARD IS IN ENGLISH.\n\nLand: Denmark\n
LOCATION:
STATUS:
SUMMARY:US Company
END:VEVENT
END:VCALENDAR 
```

在这段时间内，正确的开始时间为 15.00，结束时间为 17.00

当我在 Outlook 中打开它时，它显示开始时间为晚上 8.30，结束时间为晚上 10.30，这是错误的。

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T13:23:11.870

开始和结束时间在 UTC 中明确指定（由于尾随 Z）。如果 Outlook 在*本地*时间显示它们，那将解释差异。听起来 Outlook 位于印度时区（目前为 UTC+05:30）。

您可能希望指定本地开始/结束时间，并单独指定事件的时区。（如果你不指定时区，它不会在特定的时刻开始，这对于大多数事件来说是不寻常的。）

# geometry - HLSL - 几何着色器 (DirectX11) 中的全局变量不变

> ID：14196876
> 
> 赞同：2
> 
> 时间：2013-01-07T13:22:00.550
> 
> 标签：geometry, directx, shader, global, hlsl

我的程序接收由线段组成的输入并将线扩展为圆柱状对象（如 DX SDK 示例浏览器中的**PipeGS**项目）。

我为管道添加了一组半径缩放参数，并在程序上对其进行了修改，但管道的半径没有改变。

我很确定每帧都会更新缩放参数，因为我将它们设置为像素值。当我修改它们时，管道会改变颜色，而它们的半径保持不变。

所以我想知道在 GS 中使用全局变量是否有任何限制，我在互联网上没有找到。（或者只是我使用了错误的关键字）

着色器代码就像

```
cbuffer {
   .....
   float scaleParam[10];
   .....
}

// Pass 1
VS_1 { // pass through }

// Tessellation stages
// Hull shader, domain shader and patch constant function

GS_1 {
   pipeRadius = MaxRadius * scaleParam[PipeID];
   ....
   // calculate pipe positions base on line-segments and pipeRadius
   ....
   OutputStream.Append ( ... );
}

// Pixel shader is disabled in the first pass

// Pass 2 
VS_2 { // pass through }

// Tessellation stages
// Hull shader, domain shader and patch constant function
// Transform the vertices and normals to world coordinate in DS

// No geometry shader in the second pass

PS_2 
{ 
   return float4( scaleParam[0], scaleParam[1], scaleParam[2], 0.0f );
} 
```

编辑：我缩小了问题。我的程序中有 2 遍，在第一遍中，我计算在几何着色器中扩展的线段并流出。

在第二遍中，程序从第一遍接收管道位置，对管道进行镶嵌并对它们应用位移映射，以便它们可以更详细。

我可以更改第二遍中的曲面细分因子和像素颜色，并立即在屏幕上看到结果。

当我修改 scaleParam 时，管道会改变颜色，而它们的半径保持不变。这意味着我确实更改了 scaleParam 并将它们正确传递给着色器，但在第一遍中出现了问题。

第二次编辑：

我修改了上面的着色器代码，并在此处发布了一些 cpp 文件的代码。在 cpp 文件中：

```
void DrawScene() 
{
    // Update view matrix, TessFactor, scaleParam etc.
    ....
    ....

    // Bind stream-output buffer
    ID3D11Buffer* bufferArray[1] = {mStreamOutBuffer};
    md3dImmediateContext->SOSetTargets(1, bufferArray, 0);

    // Two pass rendering
    D3DX11_TECHNIQUE_DESC techDesc;
    mTech->GetDesc( &techDesc );
    for(UINT p = 0; p < techDesc.Passes; ++p)
    {
        mTech->GetPassByIndex(p)->Apply(0, md3dImmediateContext);

        // First pass
        if (p==0) 
        {
            md3dImmediateContext->IASetVertexBuffers(0, 1, 
                                   &mVertexBuffer, &stride, &offset);

            md3dImmediateContext->Draw(mVertexCount,0);

            // unbind stream-output buffer
            bufferArray[0] = NULL;
            md3dImmediateContext->SOSetTargets( 1, bufferArray, 0 );
        }
        // Second pass
        else 
        {                
            md3dImmediateContext->IASetVertexBuffers(0, 1, 
                                   &mStreamOutBuffer, &stride, &offset);

            md3dImmediateContext->DrawAuto();
        }
    }
    HR(mSwapChain->Present(0, 0));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T15:04:40.417

检查是否使用`float4`位置，向量的 w 值是场景中最终位置的比例，例如：

```
float4 pos0 = float4(5, 5, 5, 1);
// is equals that:
float4 pos1 = float4(10, 10, 10, 2); 
```

要正确缩放位置，您必须仅更改`.xyz`矢量位置的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T18:09:06.423

我每次修改参数后都通过重建顶点缓冲区和流输出缓冲区来解决这个问题，但我仍然不知道究竟是什么导致了这个问题。

# php - 支持 svg 的 php 中的 HTML 到 PDF 转换器？

> ID：14196883
> 
> 赞同：0
> 
> 时间：2013-01-07T13:22:29.480
> 
> 标签：php, html, pdf, svg

您知道任何可以将 HTML 字符串转换为支持 svg 的 PDF 的 php (4/5) 库吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T13:34:20.457

[wkhtmltopdf](http://code.google.com/p/wkhtmltopdf/)不是 PHP 库，但在大多数情况下，您可以使用`exec()`. 项目页面的 wiki 中列出了如何执行此操作的示例。确保通过命令行或 FTP 客户端将其 CHMOD 为可执行 (+x)。

[嵌入式 SVG](http://code.google.com/p/wkhtmltopdf/issues/detail?id=835)有一些注意事项。

# android - 如何使用值中的表达式拆分文本

> ID：14196888
> 
> 赞同：0
> 
> 时间：2013-01-07T13:22:51.720
> 
> 标签：android, sql

我尝试拆分 sql 值以修改值（日期、布尔值、...）。例如，我有以下价值观：

```
('im a value','im a second value with, test',478,20/05/2010 16:56:32) 
```

**我如何拆分只有 4 个值的值：**

*   '我是一个价值'
*   '我是第二个值，测试'
*   478
*   2010 年 5 月 20 日 16:56:32

而**不是 5 个值：**

*   '我是一个价值'
*   '我是第二个值
*   测试'
*   478
*   2010 年 5 月 20 日 16:56:32

谢谢

**编辑：**

新例子：

```
 INSERT INTO ACCES (id,type,com, date,make) VALUES (478,'action','test commentaire, new test',20/05/2010 16:56:3,False); 
```

结果

```
 INSERT INTO ACCES (id,type,com, date,make) VALUES (478,'action','test commentaire, new test',1274367363,0); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T13:46:10.250

您可以迭代地执行此操作，也可以通过以下方式执行此操作：

[Java：拆分逗号分隔的字符串但忽略引号中的逗号](https://stackoverflow.com/questions/1757065/java-splitting-a-comma-separated-string-but-ignoring-commas-in-quotes#answer-1757107)

简而言之，您使用正则表达式进行拆分：

```
line.split(",(?=([^\"]*\"[^\"]*\")*[^\"]*$)"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T13:39:30.040

我只知道一种方法可以做到这一点。

1.  将输入字符串按“，”拆分为数组
2.  如果 I 字符串以 "'" 开头并且 (I+1) 字符串以 "'" 结尾，则将其组合到 I 元素
3.  删除 I+1 元素

如果你需要实现，我可以稍后再写

# c# - 将当前 URL 写入字符串 C#

> ID：14196899
> 
> 赞同：0
> 
> 时间：2013-01-07T13:23:40.940
> 
> 标签：c#, browser

这就是我想要做的。

1.  使用 Web 浏览器加载 Windows 窗体应用程序
2.  转到某个链接
3.  检查 url 栏是否为空，如果不是，则获取当前 url 并写入字符串，然后导航到其他 url。

我不断得到`Cannot implicitly convert type 'System.Uri' to 'string'` ，我尝试了一些事情，但无法理解它。

```
string url;

try
{
    if (webBrowser1.Url != null)
    {
        // url = webBrowser1.Url;

        MessageBox.Show("Success!");

    }
    else
    {
        MessageBox.Show(":(!");
    }
}
catch
{
     MessageBox.Show("Something Screwed Up");
} 
```

现在，`:(`当我注释掉错误时，我得到了。这是在 form1.cs 上 - 我应该在 program.cs 上这样做吗？当我检查时，似乎对象可能没有被创建，但我不知道。默认情况下，表单会使用预加载的 URL 加载。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T13:24:55.393

`webBrowser1.Url`是`URI`对象

`url`是`String`对象

它告诉你这些是不同的类型并且没有隐式转换

`url = webBrowser1.Url.ToString();`

看到很棒的文章：

[http://msdn.microsoft.com/en-us/library/ms173105.aspx](http://msdn.microsoft.com/en-us/library/ms173105.aspx)

# xml - 使用 Perl 从 sql server 数据库中读取 xml 字符串

> ID：14196905
> 
> 赞同：0
> 
> 时间：2013-01-07T13:24:24.677
> 
> 标签：xml, perl, ntext

我有一个表，其中有一个类型为 ntext 的名为 XML 的列，其中我正在存储 XML 字符串。

当我用 Perl 脚本读取该列并打印它时，整个 XML 字符串都不会打印。

而不是打印整个 XML 它只打印

`< T u m o r > < p e r s o n U p i > 1 0 1 0 8 1 0 4 3 5 1 6 0 7 < / p e`

下面是脚本部分。

```
$get_xml_from_log_table = "SELECT XML FROM TR_MIGRATION_LOG WHERE MRN=123";
$xml_from_log_table = $dbh_sql_server->selectrow_array($get_xml_from_log_table);
print $xml_from_log_table ; 
```

我正在使用 SQL Server 数据库。

有人请帮我摆脱这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T13:40:56.127

该代码看起来不会运行，因此很难诊断出问题所在。看起来您正在将 selectrow_array 评估为标量上下文，这无济于事。

相反，您应该使用：

```
my($xml_from_log_table) = $dbh_sql_server->selectrow_array($get_xml_from_log_table); 
```

# objective-c - Restkit 路由错误

> ID：14196908
> 
> 赞同：2
> 
> 时间：2013-01-07T13:24:38.577
> 
> 标签：objective-c, ios, web-services, post, restkit

我正在尝试为登录屏幕做一个简单的帖子。我发布了一个电子邮件地址和密码。这给了我一个带有状态码的 JSON。如果此代码为 200，则它还包含一个人对象。如果它是其他东西，它包含一个错误对象。

我有这个发布代码。

```
RKObjectManager *manager = [RKObjectManager managerWithBaseURL:[NSURL URLWithString:@"http://******.com.be/nl/webservice/company-user/login/apikey/key**"]];

NSDictionary *dictionary = @{ @"email": _txtLogin.text, @"pwd": _txtPass.text};
NSMutableURLRequest *request = [manager requestWithObject:nil method:RKRequestMethodPOST path:nil parameters:dictionary];
RKObjectRequestOperation *operation = [manager objectRequestOperationWithRequest:request success:^(RKObjectRequestOperation *operation, RKMappingResult *result) {
    NSLog(@"Loading mapping result: %@", result);
}
failure:nil];
[operation start]; 
```

但是此代码导致以下错误。

```
*** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Invalid parameter not satisfying: route'
*** First throw call stack: 
```

有人可以帮助我吗？我是restkit的新手。

亲切的问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T15:18:02.787

您正在尝试使用自动路由发布对象，但是，您的对象为零。因此，它将依赖路径参数来确定 POST 到哪里。这也是零。

您需要使用通用的基本 URL 创建对象管理器，例如。`http://******.com.be/nl/webservice/company-user`并为您的方法提供路径参数`/login/apikey/key**`

# jquery - jQuery UI 滑块自定义步骤

> ID：14196909
> 
> 赞同：1
> 
> 时间：2013-01-07T13:24:39.037
> 
> 标签：jquery, jquery-ui, jquery-ui-slider

我有一个滑块，范围为 1007-13138，步长为 75。但我需要添加 2 个超出 75 范围的自定义步长，例如。2013 和 8759。这两个值指定了滑块的起点和终点，因此我希望能够在滑动时选择它们。任何建议或帮助将不胜感激 - 这是我第一次使用滑块，不太确定它的功能，谢谢。

**HTML**

```
<div id="slider" data-start="2013" data-end="8759"></div>
<div id="slider-result"></div> 
```

**jQuery**

```
$('#slider').slider({
    value: $('#slider').data('end'),
    min: Math.round($('#slider').data('start') / 2),
    max: Math.round($('#slider').data('end') * 1.5),
    step: 75,
    slide: function (event, ui) {
        $('#slider-result').html(ui.value);
    }
});
$('#slider-result').html($('#slider').slider('option', 'value')); 
```

[jsFiddle](http://jsfiddle.net/PtxWc/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T15:01:02.497

您可以将 step 保持在 1，并且在 change -event 中，如果所选值不是 75 的倍数（值 % 75 ！= 0），则将提醒添加（或减去..）该值以获得 75 的倍数，并将其设置为值。

然后为这两个不是 75 倍数的特定值添加例外。

并且您可能需要某种按钮（在滑块的任一端）将滑块设置为您的两个魔术值。

你没有详细说明你为什么想要这个功能，所以很难说什么是最好的可用性。

# installation - WiX Patch 对话框 - 未显示背景图像

> ID：14196914
> 
> 赞同：1
> 
> 时间：2013-01-07T13:24:56.720
> 
> 标签：installation, wix, patch

我创建了一个有效的 WiX 补丁，但在安装过程中它不显示产品背景图像。

原始产品设置对话框显示图像，它们在其项目中定义，例如：

```
<Product ...>
    <WixVariable Id="WixUIBannerBmp" Value="gn_setup_dialog_banner.bmp" />
    <WixVariable Id="WixUIDialogBmp" Value="gn_setup_dialog.bmp" /> 
```

补丁已创建并且工作正常。问题是它没有显示这些图像。它显示了对话框的一些默认背景。

如果这有帮助，这是我的补丁：

```
<?xml version='1.0' encoding='windows-1252'?>
<Wix xmlns='http://schemas.microsoft.com/wix/2006/wi'>
    <Patch AllowRemoval='yes'
        Manufacturer='xxx'
        MoreInfoURL='...'
        DisplayName='...'
        Description='Small Update Patch'
        Classification='Update'
        Codepage="...">

        <Media Id='5000' Cabinet='RTM.cab'>
            <PatchBaseline Id='RTM' />
        </Media>        

        <PatchFamily Id="HotFixPatchFamily" Version="1.0.1.0" Supersede="no" />
    </Patch>
</Wix> 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T15:52:34.250

出于某种原因，补丁将这两个文件作为“新”文件提供......即使很艰难，它们也没有改变。

无论如何，我通过替换库存的 Wix 对话框图像解决了这个问题，就像这里建议的那样（在底部“替换库存位图”）：

[http://wix.sourceforge.net/manual-wix2/WixUI_dialog_library.htm](http://wix.sourceforge.net/manual-wix2/WixUI_dialog_library.htm)

# sql - 算术计算和小数

> ID：14196918
> 
> 赞同：0
> 
> 时间：2013-01-07T13:25:12.933
> 
> 标签：sql, math, decimal

请查看下面的代码并向我解释为什么最终结果会出现偏差。请注意，不同之处在于第二次计算中引入了括号。谢谢！

代码：

```
DECLARE  @A decimal(38,19) = 7958011.98
DECLARE  @B decimal(38,19) = 10409029441
DECLARE  @C decimal(38,19) = 10000000000

DECLARE  @Z1 decimal(38,19)
DECLARE  @Z2 decimal(38,19)

SET @Z1 = @A * @B / @C
SET @Z2 = @A * (@B / @C)

SELECT  @Z1 AS [Correct], 
        @Z2 AS [Wrong] 
```

结果：

```
Correct = 8283518.0991650000000000000
Wrong   = 8283510.5860060000000000000 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T13:30:45.073

由于这篇[MSDN 文章，中间数据类型不同](http://msdn.microsoft.com/en-us/library/ms190476.aspx)

也就是说，`(@B / @C)`首先评估，遵循这样[的](https://stackoverflow.com/questions/423925/t-sql-decimal-division-accuracy/424052#424052)规则。然后中间数据类型会影响乘法`@A`

您可以在此处查看*中间类型和最终类型*（在分配给 decimal(38,19) 类型之前

```
SELECT
     @A * @B,        -- decimal (x, 6)
     @A * @B / @C,   -- decimal (x, 6)
     (@B / @C),      -- decimal (x, 6)
     @A * (@B / @C)  -- decimal (x, 6) 
```

因此，第二次数学运算得到**1.040902而不是****1.0409029441**

 **请注意，您的第一个也是错误的。实际上是**8283518.099165070318****

# windows - 窗口屏幕截图

> ID：14196923
> 
> 赞同：0
> 
> 时间：2013-01-07T13:25:36.550
> 
> 标签：windows, screen-capture

我想在 windows 上捕获进程的图像，我有进程的窗口句柄。如果我使用 SRCCOPY 而不使用 CAPTUREBLT 进行 BitBlt，那么根据 MSDN 中的说明，默认情况下图像应该只包含进程窗口。

> CAPTUREBLT
> 在生成的图像中包括任何叠加在窗口顶部的窗口。默认情况下，图像仅包含您的窗口。请注意，这通常不能用于打印设备上下文。

但我看到重叠的窗口也被捕获了。

如何在没有重叠窗口的情况下只捕获一个窗口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T13:35:02.193

如果您只想捕获单个窗口的内容，请使用[WM_PRINT](http://msdn.microsoft.com/en-gb/library/windows/desktop/dd145216%28v=vs.85%29.aspx) / [PrintWindow](http://msdn.microsoft.com/en-gb/library/windows/desktop/dd162869%28v=vs.85%29.aspx)。

# sql-server - 没有实体框架的 MVC 中的 CRUD 操作

> ID：14196924
> 
> 赞同：0
> 
> 时间：2013-01-07T13:25:39.497
> 
> 标签：sql-server, asp.net-mvc-4

嗨，我是初学者`MVC`，我正在尝试使用out或class来实现`CRUD`操作。我对所选表的操作做得很好，但是在进行编辑、详细信息和删除时，我对如何执行感到困惑，所以有人可以帮助我。`MVC``SQL``Entity Framework``LINQ-SQL``insert``details`

这是我的代码

创建新员工

```
public ActionResult Index(Test test)
    {
        try
        {
            if (ModelState.IsValid)
            {
                test.insert(test);
                test.Name = "";
                test.LastName = "";
            }
        }
        catch (Exception)
        {

        }
        return View(test);
    } 
```

显示所有结果

```
 public ActionResult display()
    {
        Test tst = new Test();
        return View(tst.getList());
    } 
```

这是我在类文件中的代码

```
public class Test
{
    public int EmpID { get; set; }
    [Required]
    [DisplayName("Name")]
    public string Name { get; set; }

    [Required]
    [DisplayName("LastName")]
    public string LastName { get; set; }

    string strConnection = ConfigurationManager.ConnectionStrings["SomeDataBase"].ConnectionString.ToString();

    public void insert(Test test)
    {

        using (SqlConnection con = new SqlConnection(strConnection))
        {
            SqlCommand cmd = new SqlCommand("insert into Employee values('" + test.Name + "','" + test.LastName + "')", con);
            con.Open();
            cmd.ExecuteNonQuery();
        }
    }

    public List<Test> getList()
    {
        List<Test> _lstPoducts = new List<Test>();
        SqlConnection con = new SqlConnection(strConnection);
        SqlCommand cmd = new SqlCommand("select * from Employee", con);
        con.Open();
        SqlDataReader dr = cmd.ExecuteReader();
        while (dr.Read())
        {
            Test _Products = new Test();
            _Products.EmpID = Convert.ToInt16(dr["EmpID"].ToString());
            _Products.Name = dr["FirstName"].ToString();
            _Products.LastName = dr["LastName"].ToString();

            _lstPoducts.Add(_Products);
        }

        return _lstPoducts;
    }

    public List<Test> edit(int id)
    {
        List<Test> _lstPoducts = new List<Test>();
        SqlConnection con = new SqlConnection(strConnection);
        SqlCommand cmd = new SqlCommand("select * from Employee where EmpID='" + id + "'", con);
        con.Open();
        SqlDataReader dr = cmd.ExecuteReader();
        while (dr.Read())
        {
            Test _Products = new Test();
            _Products.EmpID = Convert.ToInt16(dr["EmpID"].ToString());
            _Products.Name = dr["FirstName"].ToString();
            _Products.LastName = dr["LastName"].ToString();

            _lstPoducts.Add(_Products);
        }
        return _lstPoducts;
    }

} 
```

有人可以帮我做剩下的操作吗`Details, Edit update and Delete`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T13:38:08.410

您可以使用的详细信息

```
public Test details(int id)
{
    Test  _products = new Test();
    SqlConnection con = new SqlConnection(strConnection);
    SqlCommand cmd = new SqlCommand("select * from Employee where EmpID='" + id + "'", con);
    con.Open();

    try{
        SqlDataReader dr = cmd.ExecuteReader();
        _products.EmpID = Convert.ToInt16(dr["EmpID"].ToString());
        _products.Name = dr["FirstName"].ToString();
        _products.LastName = dr["LastName"].ToString();

    }
    catch(exception ex)
    {
         /* Do Some Stuff */
    }
    return _products;
} 
```

从你的控制器

```
public ActionResult Details(int id)
{
    Test tst = new Test();
    return tst.Details(id);
} 
```

对于编辑，您可以使用

```
public Bool Edit(test tst)
{
    SqlConnection con = new SqlConnection(strConnection);
    SqlCommand cmd = new SqlCommand("UPDATE TABLE Employee SET FirstName='"+tst.Name+"',Lastname='"+tst.LastName+"' where EmpID='" + tst.EmpId + "'", con);
    con.Open();
    try{
         SqlDataReader dr = cmd.ExecuteReader();
         return true;
    }  
    catch(exception ex)
    {
              /* Do Some Stuff */
    }

} 
```

从你的控制器

```
public ActionResult Edit(test tsts)
{
    Test tst = new Test();
    return tst.Edit(tsts);
} 
```

其余案件也同样处理

# jquery - 带有 jQ uery ui 的可排序布局页面

> ID：14196925
> 
> 赞同：1
> 
> 时间：2013-01-07T13:25:43.727
> 
> 标签：jquery, css, jquery-ui, 960.gs

我对可排序列表中的可排序列表有一些问题。我想制作一个页面，我可以在其中对行和列中的元素进行排序。

这是可排序的 js 代码：

```
$("#page, .column").sortable({ 
   connectWith: ['#page', '.column'],
   items: '.a',
   dropOnEmpty: true,
   handle: '.portlet-header',
   cursor: "move",
   cursorAt: { cursor: "crosshair", top: 0, left: 0 },
   opacity: 0.2
}); 
```

我使用 960 网格系统，并且我有一个特定的 html（参见[完整示例](http://jsfiddle.net/meteorbg/myvUq/1/)）

问题：

1.  当我将元素从行移动到列时，我无法将它们移回
2.  当我对行进行排序时，我不能，因为当我将某些行移到具有列的行后面时，它可以移出，我必须将此元素放在某些列中
3.  在页面中拖动元素时我不舒服，因为如果有人也可以解决此问题，我无法轻松找到我想放置元素的位置

如果有人可以使这个示例起作用，那就太好了。

在此先感谢并为我的英语感到抱歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T20:37:39.257

1：当您设置#page{height:500px} 时，您可以将一列拖回一行。因为#page 的高度为 0，所以您不能在其中拖动任何内容。

2：当#page 获得高度时，这个问题也得到了解决。

3：占位符向您显示停止拖动时元素将放置的位置。虽然它还不完美。

# scala - 类型安全堆栈和 Scala 2.10

> ID：14196926
> 
> 赞同：6
> 
> 时间：2013-01-07T13:25:51.077
> 
> 标签：scala, scala-2.10, typesafe-stack

在 scala 的 2.10 下载页面 ( [http://www.scala-lang.org/downloads](http://www.scala-lang.org/downloads) ) 上写着：

> Scala 发行版也可以在 Typesafe 的一个简单的、预集成的堆栈中使用。只需从堆栈下载页面下载 Typesafe 安装程序

但是当我从[http://typesafe.com/stack/download](http://typesafe.com/stack/download)（当前版本是 2.0.2）下载它时，仍然有 Scala 版本 2.9.2（**不是 2.10**）。

我是从错误的页面下载类型安全堆栈，还是只是缺少 Scala 2.10？我找不到 scala 2.10 是否应该集成到当前版本的堆栈中的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T13:36:18.800

Typesafe 堆栈包括尚未针对 Scala 2.10 发布的 Play2。

编辑：2013 年 2 月发布的 Play 2.1[确实支持 scala 2.10](http://www.playframework.com/documentation/2.1.0/Highlights)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T14:13:36.373

Typesafe Stack 有一个发布模型，它大部分独立于 Scala 的。（另请参阅scala-user 邮件列表上的[此评论。）](https://groups.google.com/d/topic/scala-user/vPLgzdnly54/discussion)

另请注意，当您使用 sbt 构建和打包 Scala 应用程序时，您可以在您的应用程序中指定 Scala 2.10，`build.sbt`完全没有任何问题。（当然，除非您有尚未更新到 2.10 的依赖项。）

# typescript - TypeScript 中的输出和引用

> ID：14196927
> 
> 赞同：6
> 
> 时间：2013-01-07T13:25:55.803
> 
> 标签：typescript

> **可能重复：**
> [Typescript：如何通过引用传递函数参数？](https://stackoverflow.com/questions/14115278/typescript-how-to-pass-function-parameters-by-reference)

我想知道是否有`out`- 和`ref`-like 关键字`TypeScript`？如果没有，如何模仿他们？

# jquery - 从网站 Jquery Grid 中提取数据

> ID：14196930
> 
> 赞同：3
> 
> 时间：2013-01-07T13:25:59.143
> 
> 标签：jquery, gridview, asp-classic

嗨，我正在尝试从网格中提取所有电话号码。

sancharsoft.bsnl.co.in/auction/vacant_nos/ch/gsm_choice.asp

有没有办法做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T13:42:15.733

真的有两个想法甚至回答这个问题，因为它似乎非常偏离主题。

我发现最简单的方法是用chrome打开页面，加载开发者工具，重新加载页面，然后寻找请求数据的POST请求，然后你可以用Curl伪造那个请求，然后从XML文件中提取数据它返回。

比从渲染网格中抓取它要容易得多。

```
Request URL:http://sancharsoft.bsnl.co.in/auction/vacant_nos/ch/fancy_nos_load.asp
Request Method:POST
Status Code:200 OK
Request Headersview source
Accept:application/xml, text/xml, */*; q=0.01
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Cache-Control:no-cache
Connection:keep-alive
Content-Length:65
Content-Type:application/x-www-form-urlencoded
Cookie:ASPSESSIONIDSARRQQBT=EALMIDLAPLDHCEKDHIOKHHFG; PHPSESSID=88mr7i6gqis9u3ece750shjsg4
Host:sancharsoft.bsnl.co.in
Origin:http://sancharsoft.bsnl.co.in
Pragma:no-cache
Referer:http://sancharsoft.bsnl.co.in/auction/vacant_nos/ch/gsm_no_choice.asp
User-Agent:Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.101 Safari/537.11
X-Requested-With:XMLHttpRequest
Form Dataview URL encoded
_search:false
nd:1357565939966
rows:50
page:1
sidx:gsmno
sord:asc
Response Headersview source
Cache-Control:private
Content-Length:4605
Content-Type:text/xml; Charset=utf-8
Date:Mon, 07 Jan 2013 13:38:59 GMT
Server:Microsoft-IIS/7.0
X-Powered-By:ASP.NET 
```

返回

```
<?xml version='1.0' encoding='utf-8'?><rows><page>1</page><total>48</total><records>2374</records><row id='9444011515'><cell><![CDATA[9444011515]]></cell><cell><![CDATA[843]]></cell></row><row id='9444018222'><cell><![CDATA[9444018222]]></cell><cell><![CDATA[843]]></cell></row><row id='9444026222'><cell><![CDATA[9444026222]]></cell><cell><![CDATA[843]]></cell></row></rows> 
```

所以..用卷曲做到这一点..

```
curl -d "_search=false&nd=1357565939966&rows=50&page=1&sidx=gsmno&sord=asc" http://sancharsoft.bsnl.co.in/auction/vacant_nos/ch/fancy_nos_load.asp 
```

如您所见，我已将确切的浏览器请求复制到 curl`-d " "`数据说明符中。

事实证明，是的，您实际上可以更改它，使“rows=50”变为“rows=5000”，并且您会获得预期的数据对接。 `<rows><page>1</page><total>1</total><records>2368</records>`

实际上，只有 2300 多行，但这个想法有效。

# javascript - 附加一个 在 jQuery 中

> ID：14196941
> 
> 赞同：1
> 
> 时间：2013-01-07T13:26:47.863
> 
> 标签：javascript, jquery

当我使用此代码时：

```
<script type="text/javascript">
$(document).ready(function() {

$.ajax({
type: "GET",
url: "nyhederlang.xml",
dataType: "xml",
success: parseXml,
error: function(){alert("Error: Something went wrong");}
 });
 });

 function parseXml(xml)
 {
 //print the title and the description
 $(xml).find("article").each(function()
 {
 $("#output").append("<div>");
  $("#output").append("<b>" + $(this).find("title").text() + ":</b> <br />");
  $("#output").append($(this).find("paragraphs").text());
   $("#output").append("</div>");
  });
  }
  </script> 
```

我在#output 的开头同时得到了 div 和 /div。

为什么/div 没有放在#output 的末尾？

这是它的样子：

```
<div id="output">
<div></div>
<b>Some title text</b>
.
.
.
.
. 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-07T13:27:57.413

```
$("#output").append("<div>"); 
```

不只是附加`"<div>"`一个格式良好（封闭）的 html 元素。那是一个完整的div。

解决方案是构建完整的 HTML，然后附加它：

```
var html = "<div>";
html += "<b>" + $(this).find("title").text() + ":</b> <br />";
html += $(this).find("paragraphs").text();
html += "</div>";
$("#output").append(html); 
```

您也可以将其内容附加到第一个附加的 div，但正如 Ian 所指出的，将附加数量最小化总是更有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T13:30:21.903

您不能附加部分`<div>`标签。

当你追加它时，jQuery 会自动为你关闭标签，因此下面的追加将被放置在 intial 之后`<div>`。最后`</div>`你追加的将是它之后的另一个空 div。

您应该做的是构建整个字符串，并将其附加到单个`.append()`调用中。

```
$("#output").append("<div>
                   +"<b>" + $(this).find("title").text() + ":</b> <br />"
                   +$(this).find("paragraphs").text()
                   +"</div>"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T13:31:38.070

而不是附加每个元素；将其添加到字符串然后附加该字符串。前任：

```
var html = "";
html += "<div>"
html += "<b>" + $(this).find("title").text() + ":</b> <br />";
html += $(this).find("paragraphs").text();
html += "</div>";

$("#output").append(html); 
```

# apache - 名称/值对的 Htaccess 重写

> ID：14196942
> 
> 赞同：-1
> 
> 时间：2013-01-07T13:26:59.027
> 
> 标签：apache, .htaccess, mod-rewrite, url-rewriting

我需要一些帮助来编写动态规则，我可以在其中添加由“/”分隔的名称/值对，而不是 name1=value&name2=value2

例如

[http://www.example.com/jeans.html?color=24&manufacturer=3](http://www.example.com/jeans.html?color=24&manufacturer=3) http://www.example.com/jeans/color/black/manufacturer/jonh-miller.html

&

[http://www.example.com/jeans.html?color=24&manufacturer=3&size=1](http://www.example.com/jeans.html?color=24&manufacturer=3&size=1) http://www.example.com/jeans/color/black/manufacturer/jonh-miller/size/xl.html

等等。任何人都可以向我指出一些好的文档吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T13:39:43.110

使用 RewriteMap

[http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritemap](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritemap)

您应该首先匹配参数然后使用地图，例如：

```
RewriteMap my_redir_map1 txt:map_rewrite.txt
RewriteMap my_redir_map2 txt:map_rewrite.txt

RewriteCond %{QUERY_STRING} ^.*(\bcolor\b=(\w+|&\w+;)+)
RewriteCond %{QUERY_STRING} ^.*(\bmanufacturer\b=(\w+|&\w+;)+)
RewriteRule ^/([^/\.]+).html /$1/color/${my_redir_map1:%1}/manufacturer/${my_redir_map2:%2}.html  [L] 
```

这应该符合以下情况：

[http://www.example.com/jeans.html?color=24&manufacturer=3](http://www.example.com/jeans.html?color=24&manufacturer=3)

并将其重写为：

[http://www.example.com/jeans/color/black/manufacturer/jonh-miller.html](http://www.example.com/jeans/color/black/manufacturer/jonh-miller.html)

请注意：此解决方案需要每个参数的映射和每个最终路径的重写。

# java - 如何从 maven pom 访问 linux 环境变量？

> ID：14196951
> 
> 赞同：7
> 
> 时间：2013-01-07T13:27:15.757
> 
> 标签：java, maven, intellij-idea, pom.xml

我想从 pom.xml 访问 linux 环境变量

我已添加`WAS_LOCAL_HOST='http://localhost:9081'`到

`~/.bashrc`和`~/.zsh/rc/env.rc`

现在我想从 maven 的`pom.xml`. 我试过`${env.WAS_LOCAL_HOST}`and `${WAS_LOCAL_HOST}`，但我的 IntelliJ 仍然将其标记为`Cannot resolve symbol env.WAS_LOCAL_HOST`

如何从 maven 正确访问此变量？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-07T13:40:22.753

在 pom 中，引用环境变量，`MY_VALUE`比如`${env.MY_VALUE}`. 检查[此链接](https://github.com/cko/predefined_maven_properties/blob/master/README.md)以获取更多信息。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-07T13:47:55.723

我不确定这是否适用，但你可以试一试。

当您向您添加变量时，`~/.bashrc`只需将其添加为您可以在 shell 中使用的变量。如果您想在系统范围内使用变量，我会尝试输入`/etc/profile`.

另一方面，在哪里声明这些系统范围的变量有时取决于您使用的 Linux 发行版。`/etc/profile`例如，当您使用 Red Hat 发行版但使用 Ubuntu 时，用户指南建议将它们声明为`/etc/environment`. 您可能应该为您的发行版查找它。

此外，在声明它们后不要忘记注销并再次登录。

# c# - RavenDB Map Reduce Transform 折叠一个不同的字符串列表

> ID：14196958
> 
> 赞同：2
> 
> 时间：2013-01-07T13:27:55.730
> 
> 标签：c#, linq, mapreduce, ravendb

我的问题很短，我坚持下去。我有一系列文件，例如：

```
{
...,
"Type": [
    "Type1",
    "Type2",
    "Type3",
    "Type4"
  ],
...
} 
```

而且我认为我需要创建一个 map/reduce 索引来将这些值分组到一个字符串列表中，例如，如果我有这两个文档：

```
{
...,
"Type": [
    "Type1",
    "Type3"
  ],
...
}

{
...
"Type": [
    "Type2",
    "Type3",
    "Type4"
  ],
...
} 
```

我需要一个包含所有不同值的列表的结果，例如 {"Type1","Type2","Type3","Type4"}

我不知道该怎么做，我尝试了几种方法，但没有成功。

我忘了说，我有大量的数据，像现在1500多个文档

```
public class ProjectTypeIndex : AbstractIndexCreationTask<Project, ProjectTypeIndex.ReduceResult>
{
    public class ReduceResult
    {
        public string ProjectType { get; set; }
    }

    public ProjectTypeIndex()
    {
        Map = projects => from project in projects
                                   select new
                                       {
                                           project.Type
                                       };
        Reduce = results => from result in results
                            group result by result.Type into g 
                            select new
                                {
                                    ProjectType = g.Key
                                };
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T15:03:53.130

大家好，我找到了一个解决方案，但我不知道是否是最好的方法，因为我仍然没有字符串列表，只有结果，我解决了它通过 foreach 填充字符串列表，这是索引创建。如果有人可以检查代码，我将非常感激。

```
public class ProjectTypeIndex : AbstractIndexCreationTask<Project, ProjectTypeIndex.ReduceResult>
{
    public class ReduceResult
    {
        public string ProjectType { get; set; }
    }

    public ProjectTypeIndex()
    {
        Map = projects => from project in projects
                                   from type in project.Type
                                   select new
                                       {
                                           ProjectType = type
                                       };

        Reduce = results => from result in results
                            group result by result.ProjectType into g
                            select new
                                {
                                    ProjectType = g.Key
                                };
    }
} 
```

# joomla - 如何在 Joomla 的示例内容中使用隐藏/显示模块

> ID：14196964
> 
> 赞同：0
> 
> 时间：2013-01-07T13:28:09.083
> 
> 标签：joomla

刚刚在`/index.php/directions`示例中找到了一个：

![在此处输入图像描述](../Images/3a4e84cc50c49fef842fbc9aac07ce72.png)

但是找不到有关如何使用它的任何建议...可能是我可以在此扰流板（模块）上进行手动操作的人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T23:04:20.487

您在屏幕截图中显示的模块只是一个标准的 Joomla！示例数据集中的“自定义 HTML”模块。它没有手册。

“隐藏/显示”机制来自“Beez5”模板，特别是它由模块 chrome 文件创建。您可以在 中找到该文件，`/templates/beez5/html/modules.php`并在 中找到它的 Javascript `/templates/beez5/javascript/hide.js`。

模块可以有[模板指定的默认镶边](http://docs.joomla.org/Module_chrome)，也可以为特定模板创建[模块布局覆盖。](http://docs.joomla.org/Understanding_Output_Overrides#Module_Layout_Overrides)

# java - 仅使用行中包含的值在 JTable 中获取行索引？

> ID：14196974
> 
> 赞同：2
> 
> 时间：2013-01-07T13:28:59.883
> 
> 标签：java, swing, indexing, jtable, row

在 Java 中，是否可以在 JTable 中通过查找包含在该行中的指定值来获取该行的索引？我正在使用自定义表格模型。例如，考虑一个具有三列和三行的表：

```
Row 1 = A, B, C
Row 2 = D, E, F
Row 3 = G, H, I 
```

如果我只知道表中某处有一个值“F”，我如何找出值“F”所在行的索引？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-07T13:40:43.793

如果表模型可用，一种蛮力的方法是按行和列循环并将给定值（例如，'F'）与`getValueAt(row, column)`. 示例代码：

```
 int getRowByValue(TableModel model, Object value) {
    for (int i = model.getRowCount() - 1; i >= 0; --i) {
        for (int j = model.getColumnCount() - 1; j >= 0; --j) {
            if (model.getValueAt(i, j).equals(value)) {
                // what if value is not unique?
                return i;
            }
        }
    }
 } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T13:46:50.780

```
 private int returnRowIndexForValue(final String value) { 
      for (int i = 1; i <= table.getRowCount(); i++)
           for(int j = 1; j <= table.getColumnCount(); j++)
                if (table.getValueAt(i, j).equals(value))
                     return i;
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T14:27:36.780

以防万一如果有`multiple rows`包含该值的，则返回返回`Integer List.`

```
private List<Integer> getRowIndexesOfValue(String value, JTable table) {

   List<Integer> rowNumbers = new ArrayList<Integer>();

   for(int rowCount = 0; rowCount < table.getRowCount(); rowCount++) {
      for(int columnCount = 0; columnCount < table.getColumnCount(); columnCount++) {
          if(table.getvalueAt(rowCount, columnCount).toString().equals(value)) {
             rowNumbers.add(rowCount);
             break;  
          }
       }
    }
    return rowNumbers;
} 
```

# iphone - gpus_ReturnGuiltyForHardwareRestart 崩溃

> ID：14196977
> 
> 赞同：13
> 
> 时间：2013-01-07T13:29:13.420
> 
> 标签：iphone, ios, ipad, opengl-es, crash

应用程序在 presentFrameBuffer 中崩溃（在前台运行时，不会发生中断）。

它没有在第一帧崩溃，它画了一段时间然后突然崩溃。

我没有重现的确切步骤，但似乎与绘制特定内容有关，但我仍然没有通过应用程序报告 openGL 错误，包括在 presentFrameBuffer 之前的一次错误检查。如果我在 presentFrameBuffer 之前添加 glFinish 将在 glFinish 中崩溃。

应用程序因 EXC_BAD_ACCESS (code=1, address=0x1) 和上述调用堆栈而崩溃，没有任何其他错误/日志/调试信息。

这是崩溃时报告的调用堆栈：

线程 1，队列：com.apple.main-thread

```
>     #0    0x36871e46 in gpus_ReturnGuiltyForHardwareRestart ()
>     #1    0x36872764 in gpusSubmitDataBuffers ()
>     #2    0x31eae624 in SubmitPacketsIfAny ()
>     #3    0x378a337a in gliPresentViewES ()
>     #4    0x325b6df2 in -[EAGLContext presentRenderbuffer:] ()
>     #5    0x0052986e in EAGLContext_presentRenderbuffer(EAGLContext*, objc_selector*, unsigned int) ()
>     #6    0x000e2a48 in -[EAGLView presentFramebuffer] at /svn/src_svn/GG/iphone/Classes/EAGLView.mm:228
>     #7    0x000e4066 in -[GGViewController drawFrame] at /svn/src_svn/GG/iphone/Classes/GGViewController.mm:504
>     #8    0x3809ab0a in __NSFireTimer ()
>     #9    0x39d36856 in __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ ()
>     #10   0x39d36502 in __CFRunLoopDoTimer ()
>     #11   0x39d35176 in __CFRunLoopRun ()
>     #12   0x39ca823c in CFRunLoopRunSpecific ()
>     #13   0x39ca80c8 in CFRunLoopRunInMode ()
>     #14   0x39b9333a in GSEventRunModal ()
>     #15   0x3551b288 in UIApplicationMain ()
>     #16   0x000e1bae in main at /svn/src_svn/GG/iphone/main.m:14 
```

有人对这个有任何线索吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-17T17:10:37.960

如果您使用 VAO，这可能是由索引缓冲区（元素数组缓冲区）引用超出顶点缓冲区限制 (VBO) 的顶点引起的。

请记住，元素数组缓冲区存储在 VAO 中，因此只要绑定了 VAO，每次调用 glBindBuffer( GL_ELEMENT_ARRAY_BUFFER ) 都会**替换**索引缓冲区。如果您在移动到场景的下一个对象时忘记取消绑定 VAO，您将更改**前一个**调用的 VAO。

更多信息在这里：[http ://www.opengl.org/wiki/Vertex_Specification#Index_buffers](http://www.opengl.org/wiki/Vertex_Specification#Index_buffers)

还有一个调试提示：过大的顶点缓冲区，它可能会将此崩溃变成一个故障，然后您可以使用 XCode 的 OpenGL ES 帧捕获工具进行检查（这需要 XCode 4.5 和 iOS 6）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T14:46:03.787

看起来问题是由 GL_TEXTURE1 的 glEnableClientState(GL_TEXTURE_COORD_ARRAY) 但没有在顶点缓冲区中提供实际数据引起的。

# php - 使用ajax请求将URL从一个页面发送到另一个页面

> ID：14196978
> 
> 赞同：1
> 
> 时间：2013-01-07T13:29:16.883
> 
> 标签：php, jquery, ajax, url

我需要将包含表单的页面的 URL 发送到另一个页面，以检查该链接是否存在于我的数据库中。所以有些 URL 带有特殊字符，例如 '+' '%' 并且 URL 的某些部分是 html 编码的，而有些则不是。所以我无法编码和发送 URL 以从接收者页面解码。

```
$('#searchbutton').click(function(){
    var url = $('#urltext').val();
    $('#datatodiv').load("searchlink.php?url="+url);
}); 
```

当我输入在 searchurl.php 页面上收到的 URL “http://www.example.com/ae2/STUDIO+CHANNEL+PRO/” 为“http://www.example.com/ae2/STUDIO CHANNEL PRO” /" 其中 '+' 变为空白。有时会使用“%20”等编码数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T13:31:59.523

尝试使用 PHP 函数 -

```
base64_encode()
base64_decode() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T13:33:24.973

您可以使用`encodeURI()`对 url 进行编码：

```
var url = encodeURI($('#urltext').val()); 
```

[**示例小提琴**](http://fiddle.jshell.net/RoryMcCrossan/vSD6r/)

这至少可以确保发送的 URL 值具有一致的编码。

# c# - 如何在不链接到源代码的情况下调试 System.StackOverflowException？

> ID：14196981
> 
> 赞同：7
> 
> 时间：2013-01-07T13:29:21.757
> 
> 标签：c#, xna

最近，我经常遇到类型错误

> “未知模块中发生了‘System.StackOverflowException’类型的未处理异常。”。

这发生在具有相当大代码库（C#/XNA）的游戏（我开发的）中。但通常该错误仅在玩了几分钟的游戏后才会发生（而不是在每次运行中）。

问题是不幸的是，Visual Studio 调试器似乎无法进一步定位问题，只是让我检查汇编代码而不参考我的源代码行。如何调试这样的错误？我猜想 Valgrind 之类的工具在 C# 中不可用。是否有更好的调试器可以告诉我问题在源代码中的位置？

应用以下建议答案中的步骤时可用的调用堆栈。这是：

```
ntdll.dll!_NtWaitForSingleObject@12()  + 0x15 bytes 
ntdll.dll!_NtWaitForSingleObject@12()  + 0x15 bytes 
KernelBase.dll!_WaitForSingleObjectEx@12()  + 0xcb bytes    
kernel32.dll!_WaitForSingleObjectExImplementation@12()  + 0x43 bytes    
clr.dll!CLREvent::CreateManualEvent()  - 0x15f3bb bytes 
clr.dll!CLREvent::CreateManualEvent()  - 0x15f37a bytes 
clr.dll!CLREvent::WaitEx()  + 0x47 bytes    
clr.dll!CLREvent::Wait()  + 0x19 bytes  
clr.dll!Thread::WaitSuspendEventsHelper()  + 0xa8 bytes 
clr.dll!Thread::WaitSuspendEvents()  + 0x17 bytes   
clr.dll!Thread::RareEnablePreemptiveGC()  + 0x181977 bytes  
clr.dll!Thread::RareDisablePreemptiveGC()  + 0x38e3 bytes   
clr.dll!Debugger::SendException()  + 0x12b bytes    
clr.dll!Debugger::LastChanceManagedException()  + 0x19f bytes   
clr.dll!NotifyDebuggerLastChance()  + 0x79 bytes    
clr.dll!WatsonLastChance()  + 0x166 bytes   
clr.dll!EEPolicy::HandleFatalStackOverflow()  + 0x189 bytes 
clr.dll!EEPolicy::HandleStackOverflow()  + 0xd8 bytes   
clr.dll!_COMPlusFrameHandler()  + 0xff302 bytes 
ntdll.dll!ExecuteHandler2@20()  + 0x26 bytes    
ntdll.dll!ExecuteHandler@20()  + 0x24 bytes 
ntdll.dll!_RtlDispatchException@8()  + 0xd3 bytes   
ntdll.dll!_KiUserExceptionDispatcher@8()  + 0xf bytes   
clr.dll!SystemNative::ArrayCopy()  + 0x19 bytes 
mscorlib.ni.dll!6ed326a2()  
Frames below may be incorrect and/or missing, no symbols loaded for mscorlib.ni.dll 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T23:51:05.383

如果 ntdll.dll 发生崩溃，你需要它的符号，但我认为更有可能的是你传递了一些奇怪的垃圾，导致它崩溃。您是否在进行可能导致其崩溃的 Windows API 调用？

另一个用户在这里提到的另一种可能性是，您可能正在某个地方进行递归调用，而堆栈已用完。如果对非托管代码进行调用，这将尤其成问题：

*   是否有任何可能导致无限循环的逻辑条件？
*   是否有任何构造函数会进行无意的递归调用？
*   您的代码中是否有任何递归方法可能会卡住？

此外，在您继续寻找替代调试方法之前，您可能需要尝试几件事：

1.  确保项目是在调试中构建的
2.  检查 Visual Studio 设置以确保它在所有异常情况下都停止
3.  如果项目设置中可用，请关闭“仅我的代码”设置（这甚至出现在 C# 项目中吗？）
4.  打开混合模式调试/非托管调试
5.  确保正在生成符号并将其存储在正确的位置 (*.pdb)
6.  如果所有这些都失败了，您可以在系统事件查看器中四处寻找任何奇怪的错误

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T14:42:45.827

`StackOverflowException`通常是由某种无休止地调用自身的方法引起的。

它在一段时间后发生的事实让我更加坚定：你面临着无限递归。

这种行为的一个非常简单的例子是：

```
void SomeMethod()
{
    SomeMethod(); // StackOverflowException
} 
```

# windows - 如何以编程方式使数据网格在窗口应用程序中自动滚动？

> ID：14196982
> 
> 赞同：0
> 
> 时间：2013-01-07T13:29:24.497
> 
> 标签：windows

我想根据当前正在运行的 rowindex 滚动数据网格的内容。因此用户可以知道实际正在处理哪一行。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T13:35:09.773

看一眼：

[DataGrid.ScrollIntoView(...)](http://msdn.microsoft.com/en-us/library/cc673083%28v=vs.95%29.aspx)

希望这可以帮助！

# xml - Twitter API，这些 XML 标签是什么意思

> ID：14196983
> 
> 赞同：1
> 
> 时间：2013-01-07T13:29:30.843
> 
> 标签：xml, twitter

快速的问题，对于铁杆 Twitter 用户（我不是）来说可能是一个简单的问题。前任。 [https://api.twitter.com/1/users/show.xml?screen_name=barackobama](https://api.twitter.com/1/users/show.xml?screen_name=barackobama)

做什么

```
<friends_count>

<listed_count>

<retweet_count> 

<favorited_count> 
```

代表？

*   Friends_Count，他/她的所有朋友？我不确定，因为我不知道是否可以在 Twitter 上添加朋友。我以为我只能添加要关注的人。

*   Listed_count ：这是他/她被列出的次数，还是他/她已经列出了某人

*   retweet_count：这是他/她被转推的次数还是被转推的次数？

*   favorited_count：这是他/她被收藏或收藏的次数

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T13:36:37.540

```
<friends_count> 
```

某人关注的人数。被称为“你的朋友”

```
<listed_count> 
```

用户出现的公共列表的数量。

```
<retweet_count> 
```

适用于当前用户的状态，这是它被 RT 的次数

```
<favorited_count> 
```

如上所述，这是该状态被收藏的次数。

[来源](http://blog.programmableweb.com/2010/08/30/twitter-api-adds-retweet-count-and-more/)和个人经历

# c - c aes256 padding with pkcs#7 标准

> ID：14196986
> 
> 赞同：-1
> 
> 时间：2013-01-07T13:29:42.020
> 
> 标签：c, aes, libgcrypt

加密：

```
while(!feof(fp)){
    memset(plain_text, 0, sizeof(plain_text));
    retval = fread(plain_text, 1, 16, fp);
    if(!retval) break;
    for(i=0; i<16; i++){
        if(plain_text[i] == 0){
            for(j=i; j<16; j++){
                plain_text[j] = 0x0i;
            }
            break;
        }
    }
    gcry_cipher_encrypt(hd, encBuffer, txtLenght, plain_text, txtLenght);
    fwrite(encBuffer, 1, 16, fpout);
} 
```

解密：

```
while(!feof(fp)){
    memset(plain_text, 0, sizeof(plain_text));
    retval = fread(plain_text, 1, 16, fp);
    if(!retval) break;
    gcry_cipher_decrypt(hd, encBuffer, txtLenght, plain_text, txtLenght);
    for(i=0; i<16; i++){
        if(encBuffer[i] == 0x0i){
            j = 0;
            j += i;
            if(encBuffer[++i] == 0x0j){
                last = 1;
                i--;
                j=i;
                printf("found a %d\n", i);
                break;
            }
            else i--;
        }
    }
    //printf("%d\n", j);
    if(last == 1) fwrite(encBuffer, 1, j, fpout);
    else fwrite(encBuffer, 1, 16, fpout);
} 
```

我正在尝试从 pkcs#7 标准添加可移动填充，但我遇到了问题。
如果我使用 txt 文件，我的程序可以完美运行，但如果我尝试**解密**一些 tar.gz 或 pdf 文件，解密程序会在文件大小的一半处停止！
例如，让我们使用大小为 28272 字节的 tar.gz 存档（prova 是原始文件，out 是加密文件，origdec 是解密文件）：

```
28272   prova
28272   out
12147   origdec 
```

我在 gnu/linux 上使用 libgcrypt！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T19:10:24.270

错的地方很多：

*   您正在将填充添加到包含零字节的任何块中。与文本文件不同，二进制文件（例如 tar.gz）可能包含许多零字节。您需要通过查看 fread 的返回值（它将小于 16）并检查 ferror 以防出现读取错误，从而确定您何时读取了最后一个块（及其大小）。
*   当您仅指 i 和 j 时，您使用的是 0xi 和 0xj。
*   对于 PKCS#7，您需要将填充字节数写入填充值 (16-i)，而不是 i，它是剩余的数据字节。
*   在解密时，您试图以某种方式检测任何块中的填充。这就是为什么你的 decryot 很短的原因。您需要读取和解密所有密文，然后仅从最后一个块中删除填充。

希望有帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T14:07:59.817

问题可能是您在不知情的情况下使用 GCC 中的 C 语言扩展：虚数。文字`0x0i`和`0x0j`是虚数文字。如果您对变量使用任何其他名称，您将收到编译错误。

您似乎误将数字的表示与它们的表示相混淆。在您的程序中，整数文字`0x0a`是二进制表示 00001010 的表示。这意味着您可以直接使用变量`i`，`j`而不是尝试将它们表示为十六进制数字：

```
plain_text[j] = i; 
```

和

```
if(encBuffer[i] == i) 
```

# java - Java：四舍五入到最接近 5 的倍数（向上或向下）

> ID：14196987
> 
> 赞同：56
> 
> 时间：2013-01-07T13:29:42.437
> 
> 标签：java, rounding

我需要将一个数字四舍五入到最接近 5 的倍数（向上或向下）。例如，这里是数字列表及其旁边需要向上/向下舍入的数字。

```
12.5  10
62.1  60
68.3  70
74.5  75
80.7  80 
```

数字只会是正数。

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2013-01-07T13:32:14.093

没有测试过，但`5*(Math.round(f/5));`应该可以

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2013-01-07T14:08:28.880

上值的最接近 5 的倍数

```
5*(Math.ceil(Math.abs(number/5))); 
```

低价值

```
5*(Math.floor(Math.abs(number/5))); 
```

它只给出正值。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-07T13:37:41.390

```
public static void main(String args[]) {
    double num = 67.5;
    if (num % 5 == 0)
        System.out.println("OK");
    else if (num % 5 < 2.5)
        num = num - num % 5;
    else
        num = num + (5 - num % 5);
    System.out.println(num);

} 
```

试试这个。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-01-07T13:32:51.250

像这样的东西怎么样：

```
return round((number/5))*5; 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-03-02T08:22:36.833

格飞的解决方案是有效的，但我必须像这样显式转换为 double ：`5*(Math.round((double)f/5))`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-02-02T01:19:22.543

此页面上还有许多其他解决方案，但我相信这是最简洁的一个。

要找到给定数字的 x 的最接近倍数，

令 x 为倍数， num 为给定数：

```
// The closest multiple of x <= num
int multipleOfX = x * ( num / x ); 
```

在你的情况下：

```
int multipleOf5 = 5 * ( num / 5 ); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-27T17:06:17.737

如果您有一个整数作为输入，否则接受的答案会将其四舍五入。

```
int value = 37;
value = (int) ( Math.round( value / 5.0 ) * 5.0 ); 
```

# css - CSS：使 float:right 和 float:left 同步？

> ID：14196990
> 
> 赞同：2
> 
> 时间：2013-01-07T13:30:08.677
> 
> 标签：css, css-float

第一：请看这个小提琴：http: [//jsfiddle.net/gamehelp16/77ssr/](http://jsfiddle.net/gamehelp16/77ssr/)

所以，这些图像：

[![](../Images/a8f170480925b55ee133cc1a8265d077.png)](https://i.stack.imgur.com/rSH8j.jpg)

[![](../Images/9afbaf965f41dffb3e50c502f6a8e71d.png)](https://i.stack.imgur.com/yTVFL.jpg)
[（来源：[placekitten.com](http://placekitten.com/200)）]

使用`float:right`属性

和这张图片：

[![](../Images/0fa65e23675f39eb6744d9432e69c3df.png)](https://i.stack.imgur.com/wuzey.jpg)
[（来源：[placekitten.com](http://placekitten.com/100?image=2)）]

使用该`float:left;`属性

如果您在小提琴中看到第三张图像（带有浮动：左图）不在第二张图像（大图）旁边

我的问题是：如何制作第三张图片在第二张图片的右侧。我需要纯 CSS 解决方案

谢谢

# 更新：

我想出了另一种方法来做到这一点。这是通过将第二个图像的浮动设置为左：D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T13:42:25.580

您可以浮动大的并将小的设置为阻止显示。[在 JSFiddle 上查看](http://jsfiddle.net/uBByU/)。

## html

```
<img src="http://placekitten.com/200" id="left">
<img src="http://placekitten.com/100">
<img src="http://placekitten.com/100"> 
```

## css

```
img:not(#left) {
  display: block;
}
#left {
  float: left;
} 
```

要将它们作为一个单元移动，您可以[像这样将它们设置在父容器元素中。](http://jsfiddle.net/nEHcZ/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T13:38:07.323

css 的浮动元素是相对于页面而不是实际元素的，我建议您制作 2​​ 个 div，并在这些 div 中定位 imgs，或者您可以简单地使用顶部或左侧元素。选择是你的。

# jsf - JSF：ViewScoped 的书签功能

> ID：14196994
> 
> 赞同：2
> 
> 时间：2013-01-07T13:30:20.767
> 
> 标签：jsf, url, parameters, postback

我正在尝试使我的应用程序“可收藏”，并且我正在使用视图参数来实现它。

而且我认为我仍然没有在 JSF 中找到正确的方法，即使在阅读[了这篇](https://stackoverflow.com/questions/13249844/bookmarkability-via-view-parameters-feature%20this)文章和许多其他内容之后也是如此。

我的问题是，在任何非 ajax 回发后，get 参数都会丢失，我的意思是，参数值仍然在 bean 中设置并且应用程序正常工作，但它会从 URL 中删除，从而使 URL 无效。

例如，有一个像[http://company.com/users?id=4](http://company.com/users?id=4)这样的 URL ，只要该页面执行非 ajax 回发（例如，用于上传数据），该 URL 就会变成[http://company。 com/用户](http://company.com/users)。该应用程序继续正常工作，但该链接不再“可收藏”。

有什么方法可以防止非 ajax 回发从 URL 中删除 viewParams？

我的用例是能够为页面添加书签以编辑对象，并且我需要能够上传数据（如果不是，我不会使用非 ajax 回发）。我知道如果我想为页面添加书签以仅查看对象的数据，我不需要任何回发，但这不是我的情况。

我也可以使用相同的参数重定向到同一个页面，并让应用程序重新创建视图范围的 bean，但是我真的看不到请求范围的 bean 有任何好处......

任何建议都非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T15:55:08.083

这种行为是“设计使然”。`<h:form>`生成一个没有任何视图参数`<form>`的带有 URL 的 HTML 元素。`action`同步 POST 请求只是提交到该 URL，从而在浏览器的地址栏中按原样反映。如果您打算将视图参数保留在 URL 中，而使用 ajax 不是一个选项，那么您基本上需要创建一个自定义[`ViewHandler`](http://docs.oracle.com/javaee/6/api/javax/faces/application/ViewHandler.html)，它已[`getActionURL()`](http://docs.oracle.com/javaee/6/api/javax/faces/application/ViewHandler.html#getActionURL%28javax.faces.context.FacesContext,%20java.lang.String%29)被覆盖以包含视图参数。此方法用于`<h:form>`生成`action`URL。

```
public String getActionURL(FacesContext context, String viewId) {
    String originalActionURL = super.getActionURL(context, viewId);
    String newActionURL = includeViewParamsIfNecessary(context, originalActionURL);
    return newActionURL;
} 
```

或者，当您基于已经使用[OmniFaces](http://omnifaces.org)的评论时，您也可以使用它的[`<o:form>`组件](http://showcase.omnifaces.org/components/form)，该组件基本上扩展了`<h:form>`具有与in和`includeViewParams`中相同的属性的属性。`<h:link>``<h:button>`

```
<o:form includeViewParams="true">
    ...
</o:form> 
```

这样，所有`<f:viewParam>`值都将在表单操作 URL 中结束。

### 也可以看看：

*   [发布后在 JSF 中处理视图参数](https://stackoverflow.com/questions/10352641/handling-view-parameters-in-jsf-after-post)