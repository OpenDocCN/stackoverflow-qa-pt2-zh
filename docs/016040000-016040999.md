# StackOverflow 问答 16040000-16040999

# scala - 失败 Akka 数据流示例

> ID：16040000
> 
> 赞同：1
> 
> 时间：2013-04-16T14:40:47.783
> 
> 标签：scala, akka, dataflow

我正在尝试一个简单的 akka 数据流示例，如下所示：

```
import akka.dataflow._ //to get the flow method and implicit conversions

object FlowTestApp extends App {
    import scala.concurrent.ExecutionContext.Implicits.global

    flow { 
      println("in flow")
      "Hello world!" 
    } onComplete println
} 
```

我还在 scala 编译器设置的 P 字段中设置了 continuations:enable。但是运行程序后，我在控制台中什么也没有，没有错误，也没有“你好，世界”。我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T21:08:25.643

```
import akka.dataflow._
import scala.concurrent._, ExecutionContext.Implicits._

// the following are for duration
import scala.language.postfixOps
import scala.concurrent.duration._

object FlowTestApp extends App {

  val f = flow {
    println("in flow")
    "Hello world!"
  } onComplete println

  Await.ready(f, 1 second)
} 
```

如果您正在考虑使用 Akka Dataflow 作为线程的非阻塞替代方案，这是我的 2 美分：

一些核心语言特性（例如循环、try/finally）在分隔的代码块中中断。我一直在使用它进行一些 I/O，我对它很满意，但我会确保将其保留在引擎盖下。

akka-dataflow 的 %99 是 Scala 的 continuation 插件。[flow()](https://github.com/akka/akka/blob/master/akka-dataflow/src/main/scala/akka/dataflow/package.scala#L31)的定义（这让我大吃一惊）和拉皮条的 Future#apply() 确实是所需要的，而且它们非常小。然而，Scala 的 continuation 插件比非阻塞线程的问题更通用。

对于替代解决方案，请跟踪[scala-async](https://github.com/scala/async)，它具有更具体的方法（将看似顺序的代码转换为`future { ... } flatMap { ... }`块）

我上周尝试过，到那时 scala-async 的代码转换仍然比 akka-dataflow 支持的要少，但是从提交日志来看，它似乎正在快速增长并且很快就会超过它。

# javascript - eclipse：如何在现有的 Android 项目上启用 JavaScript 验证

> ID：16040002
> 
> 赞同：1
> 
> 时间：2013-04-16T14:40:50.560
> 
> 标签：javascript, android, eclipse, html, validation

我正在为 Android 开发一个网络应用程序。我已经建立了一个常规的 Android eclipse 项目，所有的 web 文件都在 assets/www. 我也希望在问题选项卡中看到 JavaScript 和 JSHint 警告。

JavaScript 开发工具已安装。我可以正确地看到语法着色，但是如果我在 js 文件中输入不正确的内容，我在构建时看不到任何问题。

是否可以为此项目手动添加新的构建器？还有其他方法可以至少启用 JSHint 吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T19:22:35.153

Eclipse 中有一个支持 jshint 的插件：[jshint-eclipse](https://github.com/jshint/jshint/issues/958)。当前的 jshint 版本 (1.1.0) 有一个严重的[性能问题](https://github.com/jshint/jshint/issues/958)，如果您有很多 JS 文件要检查，这会降低 Eclipse。该错误已经修复，修复将包含在下一个版本中。

# java - 从 Eclipse 导入时 Intellij 删除类路径条目

> ID：16040015
> 
> 赞同：1
> 
> 时间：2013-04-16T14:41:30.443
> 
> 标签：java, intellij-idea

我正在尝试从 Eclipse 切换到 Intellij，但我无法正确导入我的项目。这是一个庞大的 OSGI 项目，包含数十个捆绑包。（免责声明：我是 OSGI 和 Intellij 菜鸟。）

我设置了 Intellij 的 OSGI 支持，但是在单击“同步依赖项”后，Intellij 从我的 .classpath 文件中清除了一堆条目。这是一个例子：

删除的条目：

```
<classpathentry exported="true" kind="lib" path="lib/commons-math3-3.1.1.jar"/>
<classpathentry exported="true" kind="lib" path="lib/sigar.jar"/>
<classpathentry exported="true" kind="lib" path="lib/hsqldb-1.8.0.10.jar"/>
...etc. (All entries from classpath are deleted.) 
```

添加的条目（仅添加了 2 个）：

```
<classpathentry kind="con" path="org.eclipse.jdt.launching.JRE_CONTAINER/org.eclipse.jdt.internal.debug.ui.launcher.StandardVMType/JavaSE-1.7"/>
<classpathentry kind="output" path="target/classes"/> 
```

# teamcity - 从 Team City 工件中排除文件

> ID：16040016
> 
> 赞同：20
> 
> 时间：2013-04-16T14:41:32.910
> 
> 标签：teamcity

在我的 ASP MVC 项目构建期间，我需要从 TC 的工件中排除一些文件。这些文件包括 web.debug.config 文件，但也有其他文件。

目前 TC 中的 Artifact 路径设置如下所示：

> src/Project.Web/*.config => arch.zip

我需要以某种方式告诉它跳过 web.debug.config 文件。我试过这个但不起作用：

> src/Project.Web/*.config => arch.zip
> 
> -src/Project.Web/*.debug.config

因此，理想情况下，我不希望这些文件来自构建期间创建的 arch.zip。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2016-12-29T10:43:03.417

从 TC10 开始，这是可能的。在您的情况下，它将是：

```
+:src/Project.Web/*.config => arch.zip
-:src/Project.Web/*.debug.config => arch.zip 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-17T15:52:27.570

这是不可能的，你提到的方式：

[http://youtrack.jetbrains.com/issue/TW-5244](http://youtrack.jetbrains.com/issue/TW-5244)

作为解决该问题之前的解决方法，您始终可以创建另一个构建配置，其中包含快照依赖项和对您的主构建的人工制品依赖项。您的主构建将所有文件输出为人工制品。依赖于此的配置有一个人工制品依赖项设置为：

```
+:*.config => <replace with location>
-:*.debug.config 
```

然后从文件夹中的这个配置中发布你想要的东西。不理想，但它会工作。

# c# - 从使用外部项目 C# WPF 的 ComboBox 获取值

> ID：16040018
> 
> 赞同：0
> 
> 时间：2013-04-16T14:41:34.710
> 
> 标签：c#, wpf, combobox, get, external

所以我正在创建一个程序，它有几个组合框供用户从中选择一个选项。我的目标是从我创建的 API 填充组合框，我已经成功了。我在我的 API 中使用了一个枚举，其中包含我想出现在 ComboBox 中的所有内容。

现在，我想将我的组合框和文本框中的所有数据放入一个数组中。

我似乎无法获得组合框的选定项目！我努力了：

```
String s = comboBox1.Text; 
```

但是“.Text”不是我可以使用的选项，“.SelectedItem”也不是

我应该使用什么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-24T21:31:14.613

创建一个 SelectionChanged 事件，然后在代码中：

```
private void comboBox1_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
   ComboBox comboBox = sender as ComboBox;
   string value = comboBox.SelectedItem.ToString();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T15:08:08.640

SelectedValue 应该可以工作

```
<Window x:Class="WpfApplication3.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:sys="clr-namespace:System;assembly=mscorlib"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <ComboBox Name="comboBox1" Margin="0,0,0,64">
            <ComboBox.Items>
                <sys:String>a</sys:String>
                <sys:String>b</sys:String>
                <sys:String>c</sys:String>
                <sys:String>d</sys:String>
                <sys:String>e</sys:String>
            </ComboBox.Items>
        </ComboBox>
        <TextBox Height="23" Margin="10,0,10,22" TextWrapping="Wrap" Text="{Binding SelectedValue, ElementName=comboBox1}" VerticalAlignment="Bottom"/>
    </Grid>
</Window> 
```

# iphone - 如何修复 Xcode 4.5.1 中未找到开发人员目录错误？

> ID：16040020
> 
> 赞同：0
> 
> 时间：2013-04-16T14:41:42.753
> 
> 标签：iphone, ios, unit-testing, xcode4.5, linker-errors

我正在使用 iOS 6.0 在 Xcode 4.5.1 中工作。我是“**测试**”iOS 应用程序的新手。每当我尝试“测试”应用程序时，它都会显示“**测试成功**”，但在调试器区域出现错误。错误信息是，

```
Error: No developer directory found at /Volumes/RED Zone/Softrware Dump/Xcode Tools/xcode 4.5.1/Xcode.app/Contents/Developer. Run /usr/bin/xcode-select to update the developer directory path.
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'launch path not accessible'
*** Call stack at first throw: 
```

我也尝试使用终端更新路径，如下所示，

```
/usr/bin/xcode-select -switch /Applications/CompanyName/xcode 4.5.1/Xcode.app/Contents/Developer 
```

它显示以下错误消息：

```
xcode-select: Error: argument missing from -switch option.
Usage: xcode-select -print-path
   or: xcode-select -switch <xcode_folder-path>
   or: xcode-select -version
Arguments: 
```

我不知道如何解决这个问题？有人请帮我吗？期待您的帮助。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T16:22:19.353

尝试使用 tab 键自动完成目录名称；这将逃脱空间。发生错误是因为`xcode-select`无法将您提供的路径识别为有效。

# sql - SQL Server 2005 - 字符串连接

> ID：16040023
> 
> 赞同：1
> 
> 时间：2013-04-16T14:41:43.710
> 
> 标签：sql, sql-server, sql-server-2005, string-concatenation

我有一个如下所示的表（之前）并使用 SQL 我想让它与“之后”中显示的表相同。

图片在这里：

![在此处输入图像描述](https://i.stack.imgur.com/esIJo.jpg)

这在 SQL Server 中怎么可能实现？

非常感谢

# mysql - 用mysql中不同表的值填充外键列

> ID：16040026
> 
> 赞同：-2
> 
> 时间：2013-04-16T14:41:54.033
> 
> 标签：mysql, sql, database

我想我在这里有点不知所措-非常感谢任何帮助！:)

我在两个 mysql 数据库中有两个表：

```
Database A.Table A
id (int)
name (varchar)

Database B.Table B
id (int)
name (varchar)
foreign key1 (int)
foreign key2 (int) 
```

我想做一个像 SELECT * FROM 这样的 MySQL 查询，这样即使以后添加了一些额外的列，结果仍然是正确的。但是，我希望将表 B 中的外键替换为表 A 中相应的 varchar 名称。两个外键都指向同一个表，但可能不同，因为它们代表一个人在哪里，他属于哪里。

我试过这个：

```
SELECT * FROM tblA RIGHT JOIN tblB ON tblA.id = tblB.foreignkey1 
```

但它在结果集中添加了另一列，这不是我想要实现的。

当像这样查询 tbl.B SELECT * FROM tbl.B （添加我在这里寻找的魔法）时，最终结果应该是这样的：

```
*--------*----------*--------------------------*---------------------------*
|tblB.id | tblB.name| foreign value1 from tbl.A | foreign value2 from tbl.A|
*--------*----------*--------------------------*---------------------------* 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T15:31:15.890

你可以这样做：

```
SELECT tblB.id, tblB.name, tblA.* -- all fields in tblA
FROM tblA RIGHT JOIN tblB ON tblA.id = tblB.foreignkey1 
```

......但这几乎是我能想到的。不幸的是，您必须使用`SELECT *`或`SELECT [each and every column]`，别无选择。

# hibernate - 通过 Apache POI 读取并通过 Hibernate 和 JPA 持久化，加速从 excel 文件导入数据库

> ID：16040029
> 
> 赞同：0
> 
> 时间：2013-04-16T14:42:05.777
> 
> 标签：hibernate, jpa, ejb-3.0, apache-poi, jboss7.x

我正在尝试通过 Apache POI 读取并通过 JBOSS 7.1 中的 Hibernate 和 JPA 持久化（这是一个特定要求，使用 JYA 数据源）来加速我的数据库导入。但是目前导入太慢 - 对于 30,000 条记录，大约需要 3 分钟，我需要将其减少到大约 30 秒。我正在寻求帮助来设置批量插入，我在 presend 作品中没有尝试过..

我的 persistence.xml 如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0"
   xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="
        http://java.sun.com/xml/ns/persistence
        http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
   <persistence-unit name="primary" transaction-type="JTA">
      <jta-data-source>java:jboss/datasources/MySqlDS</jta-data-source>
      <properties>      
         <!-- Properties for Hibernate -->
         <property name="hibernate.hbm2ddl.auto" value="update" />
             <property name="hibernate.default_catalog" value="myDatabase"/>
            <property name="hibernate.dialect" value="org.hibernate.dialect.MySQLDialect" />
            <property name="hibernate.show_sql" value="false" />
            <property name="hibernate.format_sql" value="false" />      
             <property name="hibernate.dialect" value="org.hibernate.dialect.MySQL5InnoDBDialect"/>
             <property name="hibernate.order_updates" value="true"/>
             <property name="hibernate.order_inserts" value="true"/>
             <property name="hibernate.jdbc.batch_versioned_data" value="true"/>
             <property name="hibernate.jdbc.fetch_size" value="500"/>
             <property name="hibernate.jdbc.batch_size" value="500"/>
             <property name="hibernate.default_batch_fetch_size" value="16"/>
             <property name="hibernate.connection.release_mode" value="auto"/>
             <property name="hibernate.cache.region.jbc2.cachefactory" value="java:CacheManager"/>
             <property name="hibernate.cache.use_second_level_cache" value="true"/>
             <property name="hibernate.cache.use_query_cache" value="false"/>
             <property name="hibernate.cache.use_minimal_puts" value="true"/>
             <property name="hibernate.cache.region.jbc2.cfg.entity" value="mvcc-entity"/>
             <property name="hibernate.cache.region_prefix" value="services"/>
             <property name="hibernate.connection.driver_class" value="com.mysql"/>
             <property name="hibernate.connection.url" value="jdbc:mysql://localhost:3306/myDatabase"/>
             <property name="hibernate.connection.username" value="root"/>
      </properties>
   </persistence-unit>
</persistence> 
```

我有一个 EJB Timer 类，它在 JBOSS 中启动时部署，它会查找新的 excel 文件，如果找到将它们导入数据库 - 这一切都很好 - 它只是慢... //Listener Class excelReader.loadDatabase(child.getPath ());

```
// This all works ok            
                }

            }
        }

    } 
```

**这是通过 JPA 实际保存文件的类 **

```
@Stateless
@LocalBean
public class ExcelReader implements TableDao {

@PersistenceContext
private EntityManager em;

private HSSFRow row = null;
private HSSFWorkbook wb;
private BaseDataTable baseDataTable;

public void loadDatabase(String path) 
{
    try 
    {
        FileInputStream latestExcelFile = new FileInputStream(path);
        wb = new HSSFWorkbook(latestExcelFile);
    } catch (Exception ex) {}   

    importTheTable();

}

public ExcelReader() {}

public void importTheTable(){

    HSSFSheet baseDataTableSheet = wb.getSheetAt(0);

    for (int i = 1; i <= baseDataTableSheet.getLastRowNum(); i++) 
    {
        row = baseDataTableSheet.getRow(i);
        baseDataTable = new BaseDataTable();            
        try 
        {               
            baseDataTable.setDateTime(row.getCell(0).getDateCellValue());
            baseDataTable.setEventId((int) row.getCell(1).getNumericCellValue());
            baseDataTable.setCauseClass(parseCauseClass(row.getCell(2).toString()));
            baseDataTable.setUeType((int) row.getCell(3).getNumericCellValue());
            baseDataTable.setMarket((int) row.getCell(4).getNumericCellValue());
            baseDataTable.setOperator((int) row.getCell(5).getNumericCellValue());
            baseDataTable.setCellId((int) row.getCell(6).getNumericCellValue());
            baseDataTable.setDuration((int) row.getCell(7).getNumericCellValue());
            baseDataTable.setCauseCode((int) row.getCell(8).getNumericCellValue());
            baseDataTable.setNeVersion(row.getCell(9).toString());
            baseDataTable.setImsi(row.getCell(10).getNumericCellValue());
            baseDataTable.setHier3Id((row.getCell(11).toString()));
            baseDataTable.setHier32Id((row.getCell(12).toString()));
            baseDataTable.setHier321Id((row.getCell(13).toString()));

            addBaseTableEntry(baseDataTable);

        } catch (Exception ex) { System.out.println("Error in excel file"); }

        if(i%1000 == 0)
        {
            em.flush();
            em.clear();
        }
    }

} 
```

** 这就是 EntityManager 的创建方式 **

```
@Stateful
@RequestScoped
public class Resources {

    @PersistenceContext(type = PersistenceContextType.EXTENDED)
    private EntityManager em;

    @Produces
    public EntityManager getEm() {
        return em;
    }
} 
```

这一切都很好，但它太慢了 - 我在网上无休止地搜索并应用 UserTransaction 来尝试加快导入但无济于事，任何正确方向的帮助将不胜感激，

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T15:34:15.173

我没有看到任何与事务相关的注释，并且看起来每个插入（addBaseTableEntry 方法对吗？）都在自己的事务中（这会很慢）。

尝试添加

```
@TransactionAttribute(TransactionAttributeType.REQUIRES_NEW) 
```

到您的 loadDatabase 方法。

编辑：将 id 生成策略更改为 GenerationType.SEQUENCE 或 TABLE（任何适合您的）。使用 IDENTITY 生成策略的原因 id 每次插入都会返回新生成的 id，这使得批量插入是不可能的。有关详细信息，请参阅[http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html/batch.html](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html/batch.html)。

# mdx - 根据其他维度返回日期维度的最后一个非空成员

> ID：16040030
> 
> 赞同：2
> 
> 时间：2013-04-16T14:42:10.637
> 
> 标签：mdx

刚接触 MDX，有点困惑……

我们有一个立方体，顶部有一个用于报告的 excel 数据透视表。我需要提供的是一种简单的方法，让人们在对另一个维度进行切片时查看相关日期维度的最大（最后一个）成员，以及当天的行数。

我有一个“预订数量”衡量标准，我想查看上次预订任何其他维度儿童的预订数量。如果这是有道理的。

到目前为止，我最接近的是：

```
select [Measures].[Booking Count] on 0, filter(([Sub Channel].[Channels].[Channel].members, [Booking Date].[Date].children), not isempty([Measures].[Booking Count])) on 1 from myCube 
```

但是我不能使用 LastChild 或类似的方法来获取每个频道的最后一个成员。

希望这是有道理的！非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T11:39:19.997

您快到了，只需使用该`Tail`函数从您的集合中获取最后一个日期：

```
select [Measures].[Booking Count]
       on 0,
       Tail(filter(([Sub Channel].[Channels].[Channel].members, [Booking Date].[Date].children),
               not isempty([Measures].[Booking Count])))
       on 1
  from myCube 
```

# php - 执行使用 php 创建的 web 服务

> ID：16040035
> 
> 赞同：0
> 
> 时间：2013-04-16T14:42:26.360
> 
> 标签：php, web-services, wsdl, progress-4gl

你好我有一个正在创建的 web 服务，我需要在 php 中创建一个客户端。

我在 Progress 中创建了这个示例来创建客户端：

```
//connect 
CREATE SERVER hWebService.
hWebService:CONNECT("-WSDL'http://myip.com:8080/wsa/wsa1/wsdl?targetURI=urn:ws_hecam'").

 //create a handle

RUN ws_hecam SET hws_hecam ON hWebService.

  //execute the method

RUN p10wsCosLPa1 IN hws_hecam (input user, input password, input XMLin, output XMLout) 
```

这就是我在 php 中所拥有的：

```
$client = new SoapClient(null, array('location' => "myip.com:8080/wsa/wsa1/wsdl/ws_hecam.wsm",
                                 'uri'      => "myip.com:8080/wsa/wsa1/wsdl?targetURI=urn:hecam"));

try{
   $client->__soapCall("p10wsCosLPa1", array("user", "password", "xml"), NULL,
                NULL, $output);
   print_r($output);

} catch(SoapFault $exception){
   print_r("Got issue: <br/>");
   var_dump($exception);
} 
```

我有这个错误：

```
Got issue:
object(SoapFault)#2 (9) { ["message":protected]=> string(25) 
"Could not connect to host" ["string":"Exception":private]=> string(0) ""
["code":protected]=> int(0) ["file":protected]=> string(41) "/var/www/telematel/ejecutarWebService.php" 
 ["line":protected]=> int(10) ["trace":"Exception":private]=> array(2) 
{ [0]=> array(4) { ["function"]=> string(11) "__doRequest" 
["class"]=> string(10) "SoapClient" ["type"]=> string(2) "->" ["args"]=> array(5) { 
[0]=> string(652) " userpaswordxml " [1]=> string(69) "http://myip.com:8080/wsa/wsa1/wsdl/ws_hecam.wsm" 
 [2]=> string(89) "http://myip.com:8080/wsa/wsa1/wsdl?targetURI=urn:hecam#p10wsCosLPa1" 
[3]=> int(1) [4]=> int(0) } } [1]=> array(6) {
 ["file"]=> string(41) "/var/www/telematel/ejecutarWebService.php" 
 ["line"]=> int(10) ["function"]=> string(10) "__soapCall" 
 ["class"]=> string(10) "SoapClient" ["type"]=> string(2) "->" ["args"]=> array(5) {
 [0]=> string(12) "p10wsCosLPa1" [1]=> array(3) { [0]=> string(5) 
 "user" [1]=> string(7) "password" [2]=> string(3) "xml" } 
 [2]=> NULL [3]=> NULL [4]=> &array(0) { } } } } 
 ["previous":"Exception":private]=> NULL 
 ["faultstring"]=> string(25) "Could not connect to host" 
 ["faultcode"]=> string(4) "HTTP" } Array ( ) 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T17:49:07.553

您是否确认该服务正在运行？

1) Progress 版本是否有效？您可以像这样将答案保存在本地 xml 中（将文件名替换为您选择的位置）：

```
XMLout:SAVE("FILE", "/tmp/localfile.xml", TRUE). 
```

现在打开那个文件。它在那里吗？它包含任何东西吗？如果确实如此，您可以确定您已经启动并运行了一项服务。否则，您将不得不开始对服务进行故障排除。

2）如果它不存在或为空（不应该）：您是否收到运行代码的任何错误？如果是这样：将它们发布在这里！似乎没有错误和服务正在运行-> 问题必须在 php.ini 中（或周围）。可能是数据格式不兼容的问题。我不精通 php，但我会在 Google 上检查“wsdl to php”或“wsdl analyzer for php”，这样您就可以确保数据格式正确。

# intuit-partner-platform - Debugging 500 Response for Create Sales Receipt Through API Explorer

> ID：16040037
> 
> 赞同：0
> 
> 时间：2013-04-16T14:42:30.317
> 
> 标签：intuit-partner-platform, quickbooks-online

I've been developing an IPP application using the PHP devkit. I've been using the XML returned from the $object->asIDSXML() method to debug my objects through the API Explorer. Within the API Explorer I have been recieving a very ambiguous error when trying to create a Sales Receipt and I'm hoping I can learn more about the scheme requirements. Is there a validation xsd file somewhere? I'm currently unable to understand why I receive the following 500 code.

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?> <FaultInfo
xmlns="http://www.intuit.com/sb/cdm/baseexceptionmodel/xsd">
<Message>Internal Server Error</Message>
<ErrorCode>500</ErrorCode>
<Cause>SERVER</Cause> </FaultInfo> 
```

The documentation regarding a 500 states something along the lines of :

Possible Causes: Illegal permissions. Illegal values that are not verified in the validation process. Invalid data that the business logic verified.

I know that I have proper permissions, I have authenticated with an OAuth Token that has all privileges. The later two possibilities I believe are the issue, but I don't know how to get any additional information regarding the potentially invalid or missing data. I have literally tried creating a duplicate by using the API explorer to retrieve the SalesReceipt XML and then removing the DocumentID and sending to a create POST through the API explorer at which point I receive the same error shown above.

The following is the XML post data provided to the API. As far as I can tell the xml contains all the required fields fore creating a Sales Receipt. Thanks in advance for any help.

```
<SalesReceipt>
        <Header>
            <TxnDate>2013-04-16-07:00</TxnDate>
            <CustomerId idDomain="QBO">78</CustomerId>
            <TotalAmt>4.00</TotalAmt>
            <ShipAddr>
                <Line1>123 Fake Ave</Line1>
                <City>Fake City</City>
                <CountrySubDivisionCode>ID</CountrySubDivisionCode>
                <PostalCode>83854</PostalCode>
            </ShipAddr>
        </Header>
        <Line>
            <Id>1</Id>
            <Desc>Face to face IT Consulting Services, providing solutions to client's IT issues.</Desc>
            <Amount>4.00</Amount>
            <Taxable>false</Taxable>
            <ItemId>17</ItemId>
            <UnitPrice>4.00</UnitPrice>
            <Qty>1</Qty>
        </Line>
    </SalesReceipt> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T10:53:24.613

Can you please try the following

```
<SalesReceipt xmlns='http://www.intuit.com/sb/cdm/v2'>
    <Header xmlns:ns3='http://www.intuit.com/sb/cdm/v2'>
        <ns3:TxnDate>2013-04-16-07:00</ns3:TxnDate>
        <ns3:CustomerId>78</ns3:CustomerId>
        <ns3:TotalAmt>4.00</ns3:TotalAmt>
            <ShipAddr>
                <Line1>123 Fake Ave</Line1>
                <City>Fake City</City>
                <CountrySubDivisionCode>ID</CountrySubDivisionCode>
                <PostalCode>83854</PostalCode>
            </ShipAddr>
    </Header>
    <Line xmlns:ns11='http://www.intuit.com/sb/cdm/v2'>
        <ns11:Id>101</ns11:Id>
        <ns11:Desc>Face to face IT Consulting Services, providing solutions to client's IT issues.</ns11:Desc>
        <ns11:Amount>4.00</ns11:Amount>
        <ns11:Taxable>false</ns11:Taxable>
        <ns11:ItemId>17</ns11:ItemId>
        <ns11:UnitPrice>4.00</ns11:UnitPrice>
        <ns11:Qty>1</ns11:Qty>
    </Line>
</SalesReceipt> 
```

# windows-phone-7 - 无法部署 Windows Phone 应用程序 - 尝试加载格式不正确的程序

> ID：16040038
> 
> 赞同：0
> 
> 时间：2013-04-16T14:42:30.647
> 
> 标签：windows-phone-7, windows-phone

我正在尝试将我的应用程序部署到设备上，但出现以下错误

```
Error   27  An attempt was made to load a program with an incorrect format. 
```

奇怪的是，与此错误相关的文件和项目都是空白的。

这是一个 WP7 应用程序，但我尝试将其转换为 WP8 应用程序以希望修复它，但这并没有帮助。任何人都知道如何找出问题所在？

对于这个错误，我唯一能找到的就是关于为错误平台编译的特定程序集。但这不是 Windows Phone 项目设置中的选项

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-08T11:17:16.800

检查项目中的文件。不属于项目的文件应标记为“Buid Action = none”和“Copy to Output Directory = Do not copy”。一些示例是文件文件“文本”。试试这个，对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T23:33:08.110

转换项目时是否收到任何转换警告？过去，我通过创建新的 Windows Phone 解决方案、在新解决方案中重新创建相同的项目、在这些项目中创建任何需要的子文件夹，然后复制代码和内容文件来解决此类问题。如果没有很多项目和文件夹，这通常很快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-08T04:20:12.417

不确定您是否是这种情况，或者您是否已经解决了该问题（因为它是一个旧线程），但是当您针对错误的 CPU 类型时，有时会发生这种情况。例如，您的项目以 x86 为目标，而您有一台 64 位机器。

请按照以下步骤（希望）解决问题：

*   转到项目属性
*   转到**构建**选项卡
*   从平台下拉列表中选择**任何 CPU**
*   保存并重新编译

# python - 了解 celery 任务预取

> ID：16040039
> 
> 赞同：92
> 
> 时间：2013-04-16T14:42:30.690
> 
> 标签：python, celery, celeryd

我刚刚发现了配置选项`CELERYD_PREFETCH_MULTIPLIER`（[docs](http://docs.celeryproject.org/en/latest/configuration.html#std:setting-CELERYD_PREFETCH_MULTIPLIER)）。默认值为 4，但（我相信）我希望预取关闭或尽可能低。我现在将其设置为 1，这与我要查找的内容足够接近，但仍有一些我不明白的地方：

1.  为什么预取是个好主意？我真的没有看到它的原因，除非消息队列和工作人员之间有很多延迟（在我的情况下，它们当前在同一主机上运行，​​最坏的情况可能最终在相同数据的不同主机上运行中央）。文档只提到了缺点，但没有解释优点是什么。

2.  许多人似乎将其设置为 0，希望能够以这种方式关闭预取（我认为这是一个合理的假设）。但是，0 表示无限预取。为什么有人想要无限制的预取，这不是完全消除了您首先引入任务队列的并发/异步性吗？

3.  为什么不能关闭预取？在大多数情况下，关闭它可能不是一个好主意，但是否有技术上的原因导致这不可能？还是只是没有实施？

4.  有时，此选项连接到`CELERY_ACKS_LATE`. 例如。[Roger Hu 写道](http://hustoknow.blogspot.com/2011/08/what-prefetch-in-celery-means.html#reserve-one-task-at-a-time)«[...] 通常 [用户] 真正想要的是让工作人员只保留与子进程一样多的任务。但是，如果不启用延迟确认，这是不可能的 [...]» 我不明白这两个选项是如何连接的，以及为什么没有另一个选项是不可能的。可以在[此处](https://groups.google.com/forum/?fromgroups=#!topic/celery-users/q-PYCoKJEz4)找到有关连接的另一个提及。有人可以解释为什么这两个选项是连接的吗？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-04-17T13:40:36.337

1.  预取可以提高性能。工作人员不需要等待来自代理的下一条消息来处理。与代理通信一次并处理大量消息可以提高性能。与本地内存访问相比，从代理（甚至是本地代理）获取消息是昂贵的。工人也可以批量确认消息

2.  预取设置为零意味着“没有特定限制”而不是无限制

3.  将预取设置为 1 被记录为等同于将其关闭，但情况可能并非总是如此（请参阅[https://stackoverflow.com/a/33357180/71522](https://stackoverflow.com/a/33357180/71522)）

4.  预取允许批量确认消息。CELERY_ACKS_LATE=True 防止在消息到达工作人员时确认消息

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2016-06-08T10:30:04.293

老问题，但仍然添加我的答案，以防它帮助某人。我对一些初步测试的理解与 David Wolever 的回答相同。我刚刚在 celery 3.1.19 中对此进行了更多测试并且`-Ofair`确实有效。只是它并不意味着在工作节点级别禁用预取。这将继续发生。使用`-Ofair`具有不同的效果，即在池工作人员级别。总之，要完全禁用预取，请执行以下操作：

1.  放`CELERYD_PREFETCH_MULTIPLIER = 1`
2.  `CELERY_ACKS_LATE = True`在全局级别或任务级别设置
3.  `-Ofair`在启动工人时使用
4.  如果将并发设置为 1，则不需要步骤 3。如果您想要更高的并发性，那么第 3 步对于避免在可能运行长时间运行的任务的节点中备份任务至关重要。

添加更多细节：

我发现工作节点默认情况下总是会预取。您只能通过使用来控制它预取的任务数`CELERYD_PREFETCH_MULTIPLIER`。如果设置为 1，它将仅预取与节点中池工作程序（并发）数量一样多的任务。因此，如果您有并发 = n，则节点预取的最大任务数将为 n。

如果没有这个`-Ofair`选项，对我来说发生的事情是，如果一个池工作进程正在执行一个长时间运行的任务，节点中的其他工作进程也将停止处理节点已经预取的任务。通过使用`-Ofair`，情况发生了变化。即使节点中的一个工作人员正在执行长时间运行的任务，其他工作人员也不会停止处理并继续处理节点预取的任务。所以我看到了两个级别的预取。一个在工作节点级别。另一个在个体工人层面。为我使用`-Ofair`似乎在工人级别禁用它。

有`ACKS_LATE`什么关系？~~`ACKS_LATE = True`意味着只有在任务成功时才会确认任务。如果没有，我想它会在工人收到它时发生。在预取的情况下，任务首先由工作人员接收（从日志中确认），但稍后会执行~~。我刚刚意识到预取的消息显示在 rabbitmq 的“未确认消息”下。所以我不确定是否`True`绝对需要将其设置为。无论如何，出于其他原因，我们将任务设置为这种方式（延迟确认）。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2015-10-26T23:07:59.913

只是一个警告：在我使用 redis 代理 + Celery 3.1.15 进行测试时，我读过的所有关于`CELERYD_PREFETCH_MULTIPLIER = 1`禁用预取的建议都被证明是错误的。

为了证明这一点：

1.  放`CELERYD_PREFETCH_MULTIPLIER = 1`
2.  排队 5 个任务，每个任务都需要几秒钟（例如，`time.sleep(5)`）
3.  开始看Redis中任务队列的长度：`watch redis-cli -c llen default`

4.  开始`celery worker -c 1`

5.  请注意，Redis 中的队列长度会立即从 下降`5`到`3`

`CELERYD_PREFETCH_MULTIPLIER = 1` *不阻止预取*，它只是将预取限制为每个队列 1 个任务。

`-Ofair`，[尽管文档说了什么](http://docs.celeryproject.org/en/latest/userguide/optimizing.html#prefork-pool-prefetch)，也*不会阻止预取*。

除了修改源代码之外，我还没有找到任何完全禁用预取的方法。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2015-10-29T21:23:03.600

我无法评论 David Wolever 的答案，因为我的 stackcred 不够高。因此，我将我的评论框定为答案，因为我想分享我使用 Celery 3.1.18 和 Mongodb 代理的经验。我设法通过以下方式停止预取：

1.  添加`CELERYD_PREFETCH_MULTIPLIER = 1`到芹菜配置
2.  添加`CELERY_ACKS_LATE = True`到芹菜配置
3.  使用以下选项启动 celery worker：`--concurrency=1 -Ofair`

将 CELERY_ACKS_LATE 保留为默认值，工作人员仍会预取。就像 OP 一样，我没有完全掌握预取和延迟确认之间的联系。我理解大卫所说的“CELERY_ACKS_LATE=True 阻止在消息到达工作人员时确认消息”，但我不明白为什么迟到的确认与预取不兼容。从理论上讲，预取仍然允许正确地确认迟到 - 即使没有在 celery 中这样编码？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-11-20T16:13:37.683

使用 SQS 作为代理，我经历了一些不同的事情。

设置是：

```
CELERYD_PREFETCH_MULTIPLIER = 1
ACKS_ON_FAILURE_OR_TIMEOUT=False
CELERY_ACKS_LATE = True
CONCURRENCY=1 
```

任务失败（引发异常）后，由于本地和远程队列均未确认消息，因此工作人员变得不可用。

使工人继续消耗工作的解决方案是设置

`CELERYD_PREFETCH_MULTIPLIER = 0`

我只能推测在编写 SQS 传输时没有考虑到 acks_late

# c# - OpenXML 标头

> ID：16040040
> 
> 赞同：0
> 
> 时间：2013-04-16T14:42:31.503
> 
> 标签：c#, openxml, openxml-sdk

我有一个正在使用 OpenXML SDK 处理的 docx。

doc.MainDocumentPart.HeaderParts 属性中有 2 个项目，但是当我将 docx 作为 zip 文件打开时，它的 header1.xml 到 header6.xml。如何以编程方式访问（和修改）所有这些标头？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T09:43:14.360

似乎有一个标题实际上并未在文档中使用

# c# - 使用 c 可执行文件中的 C# 库 (dll) 类会挂在 GSHandle (^) 上

> ID：16040044
> 
> 赞同：0
> 
> 时间：2013-04-16T14:42:40.497
> 
> 标签：c#, c++, c, .net-4.0, garbage-collection

好吧，在你说我做不到之前，让我们谈谈我能做什么…… 我可以从 C++ 可执行文件中调用 C# 库。（在这个项目上做过）我可以从 C 调用一个 C++ 库。（这应该不足为奇）

因此，将这三个与调用 C# 库的 C++ 代码和调用相同 C++ 库的 C 代码链接起来，C 执行线程在 GSHandle(^) 上阻塞/崩溃。有人见过这个吗？除了尝试跳过大峡谷之外，还有什么我错过的东西会阻止这个工作吗？

我的代码？...嗯，从 C# 运行 C++ 库可以工作。如果我使用我的 c# 类和 GCHandle(^) 删除所有引用，则从 c 运行 c++ 库。我将保存代码的剔除以在这里展示它，直到我更加沮丧......现在，让我们说 c++ 是基于这里检查的答案：[How to call a C# library from Native C++ (using C++\CLI和 IJW）](https://stackoverflow.com/questions/13293888/how-to-call-a-c-sharp-library-from-c-using-c-cli-and-ijw/13823687#13823687)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T17:23:56.843

我现在已经让它工作了。我不能肯定地说，但我怀疑这是三种可能性之一。

1) C 代码阻塞了我试图从 C 代码中使用的类。我从我的 c 包装器中完全删除了类结构，并且只使用了函数。（显然我已经离开 c 太久了。）

2）代码在公司构建环境中构建时引发链接器错误。

3) 没有为库找到代码程序集。

事实是我的代码三个都出了问题，其中任何一个都可能是导致崩溃的原因。

# java - 多数据库提供程序支持

> ID：16040049
> 
> 赞同：0
> 
> 时间：2013-04-16T14:42:55.247
> 
> 标签：java, database, eclipse

我现在将在一个 Eclipse 插件上工作，该插件与 derby 数据库配合良好，工作包括为该应用程序添加多数据库支持（使用数据库配置向导）。

我的问题是：为了实现这个项目和未来更好的可维护性，最好的设计模式是什么？

有没有我可以开始的 POC 源代码？

任何想法都将受到高度赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:50:41.697

有点开放式的，但我会采取行动。

我更喜欢将 JNDI 用于数据源。这样，容器维护数据源连接，您的应用程序只需使用简单的字符串来定义 JNDI 名称并从容器获取连接。

有几种方法可以做到这一点，我不确定你使用的是什么容器（像Tomcat这样的servlet，或者像glassfish这样的EE），但它们都应该以某种方式支持它们。

此外，可能希望消除对 Eclipse 的依赖来设置数据源连接并依赖更便携的东西，无论是 Spring 等框架，还是通过工厂类自己在代码中抽象数据源连接。

# typescript - TypeScript 接口是否需要在 d.ts 文件中定义？

> ID：16040050
> 
> 赞同：2
> 
> 时间：2013-04-16T14:42:58.963
> 
> 标签：typescript

我正在编写一个 TypeScript 类：

```
export class Test
{
    property : string;
} 
```

我想扩展已经在 Knockout.d.ts 中的 Knockout 接口，`KnockoutObservable`例如 for `String`；`Bool`

```
export declare interface KnockoutObservableTest extends KnockoutObservableBase
{
    ...
} 
```

如果我的 Test.ts 文件中有接口和类，我无法让它工作。如果我把它放在一个单独的 App.d.ts 文件中并引用它，它似乎可以工作。

我的测试是

```
var value : KnockoutObservableTest; 
```

想知道为什么它必须在 d.ts 文件中，或者可能有一些我不知道的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T14:46:20.447

从与...相同的文件中加载它`Test.ts`时...

```
import TestModel = module('Test'); 
```

...与引用文件`TestModel.KnockoutObservableTest`时仅在根范围内相比，声明了接口。`.d.ts`

# android - Android 清单解析器错误：INSTALL_PARSE_FAILED_MANIFEST_MALFORMED

> ID：16040056
> 
> 赞同：0
> 
> 时间：2013-04-16T14:43:10.233
> 
> 标签：android, android-manifest

我有一个安卓程序。所有源代码都运行良好，但在打印此文件的清单文件中发生了一些事情。

这个错误`INSTALL_PARSE_FAILED_MANIFEST_MALFORMED`是什么意思？

```
[2013-04-16 20:11:29 - BingoBangalore] Installation error: INSTALL_PARSE_FAILED_MANIFEST_MALFORMED
[2013-04-16 20:11:29 - BingoBangalore] Please check logcat output for more details.
[2013-04-16 20:11:29 - BingoBangalore] Launch canceled! 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-30T08:33:41.010

在这种情况下，通常执行以下操作：

*   检查清单文件的语法错误
*   清理你的项目（例如 build->clean 或删除 /bin-folder 有时是 /gen-folder）
*   转到项目/包资源管理器
*   右键单击清单文件
*   证实！

现在一切都应该好了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T14:46:33.007

活动名称应以“.”为前缀 在您的清单文件中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T21:22:40.990

我得到了这个问题的答案。只需删除“gen”文件夹。它自动构建。应用程序将正常工作。

# macos - 在 Mac OS X 问题上通过 Pear 安装 Behat

> ID：16040060
> 
> 赞同：0
> 
> 时间：2013-04-16T14:43:17.397
> 
> 标签：macos, behat

我正在使用以下 turotiral 在我的山狮 macbook 上安装 behat 和 mink。

[http://www.ifusio.com/blog/how-to-install-behat-mink-on-mac-osx](http://www.ifusio.com/blog/how-to-install-behat-mink-on-mac-osx)

在您运行 behat 命令之前一切似乎都很好，然后我收到以下错误

```
PHP Fatal error:  Class 'Symfony\Component\Console\Helper\ProgressHelper' not found in /Users/waseem/pear/share/pear/Symfony/Component/Console/Application.php on line 966
PHP Stack trace:
PHP   1\. {main}() /Users/waseem/pear/bin/behat:0
PHP   2\. Behat\Behat\Console\BehatApplication->__construct() /Users/waseem/pear/bin/behat:26
PHP   3\. Symfony\Component\Console\Application->__construct() /Users/waseem/pear/share/pear/behat/src/Behat/Behat/Console/BehatApplication.php:32
PHP   4\. Symfony\Component\Console\Application->getDefaultHelperSet() /Users/waseem/pear/share/pear/Symfony/Component/Console/Application.php:75

Fatal error: Class 'Symfony\Component\Console\Helper\ProgressHelper' not found in /Users/waseem/pear/share/pear/Symfony/Component/Console/Application.php on line 966

Call Stack:
    0.0002     632656   1\. {main}() /Users/waseem/pear/bin/behat:0
    0.0036    1350424   2\. Behat\Behat\Console\BehatApplication->__construct() /Users/waseem/pear/bin/behat:26
    0.0036    1350504   3\. Symfony\Component\Console\Application->__construct() /Users/waseem/pear/share/pear/behat/src/Behat/Behat/Console/BehatApplication.php:32
    0.0036    1350816   4\. Symfony\Component\Console\Application->getDefaultHelperSet() /Users/waseem/pear/share/pear/Symfony/Component/Console/Application.php:75 
```

如果我通过 Github 方法安装它，一切似乎都很好，这只是让我烦恼为什么会发生这种情况。我的机器上没有 Symfony。

也许是因为我安装了 --alldeps ？我已经尝试卸载并再次尝试同样的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T16:14:51.810

看看 behat\autoload_map.php。当找不到该文件时，该文件将替代 Symfony 自动加载器。它包含一个将命名空间\类映射到目录和文件的数组。通过一些添加，您可以让这个版本的 Behat 正常工作。

如果确实如其他人所说的那样，Behat 不再支持 PEAR 通道，那么您可以自己使用此解决方案。就个人而言，我将研究另一种方法来使我的 Behat 安装保持最新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T08:42:19.470

[Behat PEAR 频道](http://pear.behat.org/)不再维护。那里没有最新的 Behat 版本 (>=2.4)。

安装 Behat 最好和最简单的方法是使用 composer。我建议遵循[原始文档](http://docs.behat.org/quick_intro.html#installation)。Pear 方法不再在此处列出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T11:27:31.147

谢谢你，但是我在 Mac OS X 上可靠地为我工作的唯一方法，我在雪豹和山狮上都试过是使用 .phar 安装方法。

作曲家方法虽然看起来更简单，但在遵循以下指南时不断产生错误

[http://docs.behat.org/cookbook/behat_and_mink.html](http://docs.behat.org/cookbook/behat_and_mink.html)

我得到的错误如下，所以我坚持使用 phar 文件。

```
 [Symfony\Component\DependencyInjection\Exception\InvalidArgumentException]                                                       
  Unable to parse file "/Users/waseem/Behat/vendor/behat/mink-extension/src/Behat/MinkExtension/services/sessions/selenium2.xml".  

  [InvalidArgumentException]                                                                                                                                                                                                                                         
  [ERROR 1840] Element '{http://symfony.com/schema/dic/services}parameter', attribute 'type': [facet 'enumeration'] The value 'integer' is not an element of the set {'collection', 'service', 'string', 'constant'}. (in /Users/waseem/Behat/ - line 20, column 0)  
  [ERROR 1824] Element '{http://symfony.com/schema/dic/services}parameter', attribute 'type': 'integer' is not a valid value of the atomic type '{http://symfony.com/schema/dic/services}parameter_type'. (in /Users/waseem/Behat/ - line 20, column 0) 
```

# code-generation - Isabelle 的代码生成：容器的抽象引理？

> ID：16040064
> 
> 赞同：1
> 
> 时间：2013-04-16T14:43:32.350
> 
> 标签：code-generation, isabelle

我正在试验代码生成器。我的理论包含一个编码不变量的数据类型：

```
typedef small = "{x::nat. x < 10}" morphisms to_nat small
  by (rule exI[where x = 0], simp)

definition "is_one x ⟷ x = small 1" 
```

现在我想导出`is_one`. 看来我首先必须为代码生成器设置数据类型，如下所示：

```
code_datatype small

instantiation small :: equal
begin
  definition "HOL.equal a b ⟷ to_nat a = to_nat b" 
  instance
  apply default
  unfolding equal_small_def
  apply (rule to_nat_inject)
  done
end

lemma [code abstype]: "small (to_nat x) = x" by (rule to_nat_inverse) 
```

现在我可以定义一个`is_one`不违反抽象的代码方程：

```
definition [code del]:"small_one = small 1"
declare is_one_def[code del]
lemma [code]: "is_one x ⟷ x = small_one" unfolding is_one_def small_one_def..
lemma [code abstract]: "to_nat small_one = 1"
  unfolding small_one_def by (rule small_inverse, simp)

export_code is_one in Haskell file - 
```

**问题1：**我可以避免将定义`small_one`拉出`is_one`吗？

现在我有一个小项目的复合值：

```
definition foo :: "small set list" where "foo = [ {small (10-i), small i} . i <- [2,3,4] ]" 
```

在这种形式下，我无法使用它导出代码（“代码方程式 foo 中的抽象违规...”）。

**问题 2：**如何`[code abstract]`为这样的值定义引理？似乎代码生成器不接受形式的引理`map to_nat foo = ...`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T15:46:53.647

对于具有由`code_abstract`such声明的不变量的类型`small`，任何代码方程都不能包含抽象函数`small`。因此，如果您希望`is_one`在 type 上表示等式测试`small`，您必须先定义一个常数`small 1`并证明相应的代码方程`to_nat`。这就是你所做的。但是，在表示类型上使用相等会更容易`nat`，即内联实现`equal_class.equal`；然后，您不需要`equal`为`small`任何一个实例化。

```
lemma is_one_code [code]: "is_one x ⟷ to_nat x = 1"
by(cases x)(simp add: is_one_def small_inject small_inverse) 
```

该`lifting`软件包会自动为您完成大部分工作：

```
setup_lifting type_definition_small
lift_definition is_one :: "small => bool" is "%x. x = 1" ..
export_code is_one in SML file - 
```

不幸的是，代码生成器不支持涉及抽象类型的复合返回类型，如`small set list`. 如[Isabelle/HOL 中的数据细化中所述，第 1 节。3.2](http://www21.in.tum.de/~nipkow/pubs/itp13.html)，您必须将类型包装为自己`small set list`的类型构造函数并使用 type进行定义。然后将类型表示为不变量。`small_set_list``foo``small_set_list``small_set_list``nat set list``list_all (%A. ALL x:A. x < 10)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T19:49:45.820

除了 Andreas 的解释和综合解决方案之外，我还找到了一种避免引入新类型的解决方法。假设`foo`在很多地方都没有使用，比如说，只在

```
definition "in_foo x = (∀s ∈ set foo. x ∈ s)" 
```

尝试导出代码`in_foo`会出现“抽象违规”错误。但是使用程序细化，我可以避免有问题的代码：

我`code_thms`用来找出如何`foo`使用并发现它被用作`list_all (op ∈ ?x) foo`. 现在我重写了这个特殊的用法`foo`而不提`small`：

```
lemma [code_unfold]:
  "list_all (op ∈ x) foo ⟷
    list_all (op ∈ (to_nat x))  [ {(10-i), i} . i <- [2, 3, 4] ]"
  unfolding foo_def by (auto simp add: small_inverse small_inject) 
```

（如果我定义`foo`using `lift_definition`，之后的证明`apply transfer`会更简单。）

`foo`在这个转换之后，它基本上捕获了满足 的不变量的所有成员`small`，代码导出按预期工作：

```
export_code in_foo in Haskell file - 
```

# jquery - jquery滑块，在值变化时传递值

> ID：16040066
> 
> 赞同：0
> 
> 时间：2013-04-16T14:43:33.930
> 
> 标签：jquery, slider

我使用代码创建了一个滑块...

```
<span class='sliderspantext'>
    <div>
        <input 
            type = 'text' 
            name = 'totaldiamondstart' 
            id = 'totaldiamondstart' 
            value = '<?php echo $tot_diamond_carat_weight_start;?>' 
            size = "10" 
            onkeypress = "keypress(event,1);" 
            onblur = 'slidertotaldiamondrenew();' 
            class = 'sildertext' 
            onfocus = 'textfocchg(1,1)'
        />
    </div>

    <div>
        <input type='text' 
            name = 'totaldiamondend' 
            id='totaldiamondend' 
            value = '<?php echo $tot_diamond_carat_weight_end;?>' 
            size = "10" 
            onkeypress = "keypress(event,1);" 
            onblur = 'slidertotaldiamondrenew();' 
            class = 'sildertext' 
            onfocus = 'textfocchg(2,1)'
        />
    </div>
</span> 
```

如果框的值发生变化，我想发送滑块的值...

```
$("#totaldiamondstart").live("change", function() {
    alert('hello');
    var totaldiamondstart = $("#totaldiamondstart").val();
    var totaldiamondend = $("#totaldiamondend").val();
}); 
```

不知何故，这不起作用，我在控制台中也没有错误，有人可以解释为什么吗？我正在使用 jquery 1.7.1。

如果我按下提交按钮，上面的代码有效，但不是`onchange`

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T15:19:29.103

[`.change()`](http://api.jquery.com/change/)只有当输入元素的值发生变化并且失去焦点时才会触发。

如果您有`.change()`一个选择下拉菜单，它会在用户做出新选择时立即触发。

编辑：另外，考虑到该[`.on()`](http://api.jquery.com/on/)方法`.live()`已被弃用并从`jQuery 1.9`. 在您的情况下，语法是相同的。

# node.js - Nodejs 或 ExpressJS Windows 身份验证

> ID：16040067
> 
> 赞同：9
> 
> 时间：2013-04-16T14:43:34.937
> 
> 标签：node.js, express, windows-authentication

我想在`NodeJS`应用程序中验证 Windows 用户。是否有任何附加组件呢？有，[`node-krb5`](https://github.com/qesuto/node-krb5)但还不支持windows。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-04-08T14:55:58.620

如果您使用 iisnode [https://github.com/auth0/passport-windowsauth](https://github.com/auth0/passport-windowsauth)在 IIS 上托管，效果很好！passport-windowsauth 带有广告集成，但如果您只需要用户名来实现自己的授权逻辑，您可以这样做

网络配置：

```
<system.webServer>
    <iisnode promoteServerVars="LOGON_USER" />
</system.webServer> 
```

server.js：

```
var passport = require('passport');
var WindowsStrategy = require('passport-windowsauth');

app.use(passport.initialize());
app.use(passport.session());

passport.serializeUser(function(user, done) {
    done(null, user);
});

passport.deserializeUser(function(user, done) {
    done(null, user);
});

passport.use(new WindowsStrategy({
    integrated: true 
}, function(profile,done) {
    var user = {
        id: profile.id,
    };
    done(null, user);
}));

app.all("*", passport.authenticate("WindowsAuthentication"), function (request,response,next){
    next();
}); 
```

然后您可以在其他路由中访问请求对象上的用户 ID：

```
app.get("/api/testAuthentication", function(request, response){
    console.log(request.user.id + " is authenticated");
}); 
```

如果你想使用用户 ID 实现你自己的授权逻辑，你可以定义一个中间件函数，如下所示：

```
app.get("/api/testAuthorization", hasRole("a role"), function(request, response, next){
    console.log(request.user.id " is authenticated and authorized");
}); 
```

hasRole 看起来像这样：

```
function hasRole(role) {
    return function(request,response,next){
        //your own authorzation logic

        if(role == "a role")
            next();
        else
            response.status(403).send();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-03-05T18:33:58.070

免责声明：我是 node-expose-sspi 的作者。

[https://github.com/jlguenego/node-expose-sspi](https://github.com/jlguenego/node-expose-sspi)

专用于使用 Kerberos 或 NTLM 在 Windows 上执行 SSO。它使用协商和 SPNEGO 令牌。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-02T08:04:30.583

`node-sspi`: 发现它使用起来简单高效。

[https://www.npmjs.com/package/node-sspi](https://www.npmjs.com/package/node-sspi)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-16T17:01:08.453

我在这里添加了一篇博客文章[http://hadenoughpi.wordpress.com/2013/04/16/node-js-windows-authentication-using-edgejs/](http://hadenoughpi.wordpress.com/2013/04/16/node-js-windows-authentication-using-edgejs/) 我希望这是正确的方法之一。

# java - 通过外化逆向计算

> ID：16040068
> 
> 赞同：1
> 
> 时间：2013-04-16T14:43:38.507
> 
> 标签：java, serialization, reflection

我有一种明显的感觉，我又一次过头了。几个月前，我构建了一个系统，可以搜索代码并使用反射进行修改。这很好用，现在我正在尝试重建系统并概括它的某些方面。我想做的一件事是不知道最近计算中可能发生的变化。

例如，假设我正在执行一个马里奥程序并且我们按下一个按钮。游戏的状态发生了变化，但我们不知道如何变化。我想扭转这种效果，这样我就可以回到过去并按下不同的按钮。我的计划是：

*   外化所有可能对它们产生影响的游戏类。存储所有非最终字段的值，包括静态值。
*   使用 extern 写出所有游戏对象。
*   做出改变。
*   使用 extern 写出所有游戏对象（以防我们稍后想跳回这个状态）
*   再次读取更改前的状态。

从表面上看，这里有什么东西会在我脸上爆炸吗？这是个好主意吗？或者一些静态场/奇怪的行为会搞砸我吗？对于外部化，我确实计划通过反射请求所有字段的列表，并按迭代顺序写出，以免遗漏任何内容。

Mods - 我使用标签序列化，因为外部化不是现有标签。希望没关系。

编辑 - 我还不需要局部变量的值，或者堆栈或堆。不过，这可能是稍后需要考虑的 - 特别是在更改之间可能已被破坏的对象的存在/不存在。

本质上，我需要反转一般计算步骤。不知道这是否可能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T14:49:03.877

可能是我误读了您的问题，但在我看来，您正在寻找的是[Aspect Oriented Programming](http://en.wikipedia.org/wiki/Aspect-oriented_programming)。
如果您已经使用`Spring`，则可以使用它。不要试图重新发明轮子

# java - 使用 Java Netbeans 发送电子邮件（例外）

> ID：16040070
> 
> 赞同：0
> 
> 时间：2013-04-16T14:43:41.847
> 
> 标签：java, ssl, jakarta-mail

最近我做了一个发送电子邮件的网络应用程序。代码工作正常我没有错误，我有运行时异常

```
(javax.net.ssl.SSLException: java.lang.RuntimeException: Unexpected error: java.security.InvalidAlgorithmParameterException: the trustAnchors parameter must be non-empty) 
```

我的 index.jsp 代码是：

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title> Java Mail </title>
</head>
<body>
    <form action="sendMail.jsp" method="POST">
        <table border="0" align="center" cellpadding="5">
            <tbody>
                <thead><tr> <td colspan="3" align="center">
                <b> Send Mail </b> </td> </tr> </thead>
                <tr>
                    <td> To </td> <td> : </td>
                    <td> <input type="text" name="to" value="" /> </td>
                </tr>
                <tr>
                    <td> Subject </td> <td> : </td>
                    <td> <input type="text" name="subject" value="" /> </td>
                </tr>
                <tr>
                    <td> Message </td> <td> : </td>
                    <td> <textarea name="message" rows="8" cols="30">
                    </textarea></td>
                </tr>
                <tr>
                    <td colspan="3" align="center">
                    <input type="submit" value="Send Mail" />

                    <input type="reset" value="Reset" />
                    <td>
                </tr>
            </tbody>
        </table>
    </form>
</body>
</html> 
```

我的 sendMail.jsp 代码是：

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=">
    <jsp:useBean id="mail" scope="session" class="jMail.Mail" />
    <jsp:setProperty name="mail" property="to" param="to" />
    <jsp:setProperty name="mail" property="from" value="MyEmail@gmail.com" />
    <jsp:setProperty name="mail" property="smtpServ" value="smtp.gmail.com" />
    <jsp:setProperty name="mail" property="subject" param="subject" />
    <jsp:setProperty name="mail" property="message" param="message" />
</head>
<body>
    <%
        String to = mail.getTo();
        int result;
        result = mail.sendMail();
        if (result == 0) {
            out.println(" Mail Successfully Sent to " + to);
        } else {
            out.println(" Mail NOT Sent to " + to);
        }
    %>
</body>
</html> 
```

我的 Mail.java 代码是：

```
package jMail;
import javax.mail.*;
import javax.mail.internet.*;
import java.util.*;

public class Mail {
private String to;
private String from;
private String message;
private String subject;
private String smtpServ;

/**
 * @return the to
 */
public String getTo() {
    return to;
}

/**
 * @param to the to to set
 */
public void setTo(String to) {
    this.to = to;
}

/**
 * @return the from
 */
public String getFrom() {
    return from;
}

/**
 * @param from the from to set
 */
public void setFrom(String from) {
    this.from = from;
}

/**
 * @return the message
 */
public String getMessage() {
    return message;
}

/**
 * @param message the message to set
 */
public void setMessage(String message) {
    this.message = message;
}

/**
 * @return the subject
 */
public String getSubject() {
    return subject;
}

/**
 * @param subject the subject to set
 */
public void setSubject(String subject) {
    this.subject = subject;
}

/**
 * @return the smtpServ
 */
public String getSmtpServ() {
    return smtpServ;
}

/**
 * @param smtpServ the smtpServ to set
 */
public void setSmtpServ(String smtpServ) {
    this.smtpServ = smtpServ;
}

public int sendMail(){
    try
    {
        Properties props = System.getProperties();
          // -- Attaching to default Session, or we could start a new one --
          props.put("mail.transport.protocol", "smtp" );
          props.put("mail.smtp.starttls.enable","true" );
          props.put("mail.smtp.host",smtpServ);
          props.put("mail.smtp.auth", "true" );
          Authenticator auth = new SMTPAuthenticator();
          Session session = Session.getInstance(props, auth);
          // -- Create a new message --
          Message msg = new MimeMessage(session);
          // -- Set the FROM and TO fields --
          msg.setFrom(new InternetAddress(from));
          msg.setRecipients(Message.RecipientType.TO, InternetAddress.parse(to,     false));
          msg.setSubject(subject);
          msg.setText(message);
          // -- Set some other header information --
          msg.setHeader("MyMail", "Mr. XYZ" );
          msg.setSentDate(new Date());
          // -- Send the message --
          Transport.send(msg);
          System.out.println("Message sent to"+to+" OK." );
          return 0;
    }
    catch (Exception ex)
    {
      ex.printStackTrace();
      System.out.println("Exception "+ex);
      return -1;
    }
}

private class SMTPAuthenticator extends javax.mail.Authenticator {
    @Override
    public PasswordAuthentication getPasswordAuthentication() {
        String username =  "MyEmail@gmail.com";           
        String password = "MyPassword";
        return new PasswordAuthentication(username, password);
    }
  }

} 
```

请帮助我我总是有运行时异常：

异常 javax.mail.MessagingException：无法将套接字转换为 TLS；嵌套异常是：javax.net.ssl.SSLException：java.lang.RuntimeException：意外错误：java.security.InvalidAlgorithmParameterException：trustAnchors 参数必须为非空

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T15:16:59.090

放入以下属性

```
Properties props = new Properties();
props.put("mail.smtp.host", "smtp.gmail.com");
props.put("mail.smtp.socketFactory.port", "465");
props.put("mail.smtp.socketFactory.class","javax.net.ssl.SSLSocketFactory");
props.put("mail.smtp.auth", "true");
props.put("mail.smtp.port", "465"); 
```

通过 SSL 使用 gmail SMTP 的[示例](http://www.mkyong.com/java/javamail-api-sending-email-via-gmail-smtp-example/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T15:49:10.107

这是我的代码，

```
import java.util.Date;
import java.util.Properties;
import javax.activation.DataHandler;
import javax.activation.FileDataSource;
import javax.mail.Message;
import javax.mail.MessagingException;
import javax.mail.Multipart;
import javax.mail.PasswordAuthentication;
import javax.mail.Session;
import javax.mail.Transport;
import javax.mail.internet.InternetAddress;
import javax.mail.internet.MimeBodyPart;
import javax.mail.internet.MimeMessage;
import javax.mail.internet.MimeMultipart;

public class SendMail {
     public static int Send(String SMTPServer,
                        String Sender,
                        String Recipient,
                        String Subject,
                        String Body,
                        String ErrorMessage,
                        String Attachments) {
    // Error status;
    int ErrorStatus = 0;

    // Create some properties and get the default Session;
    final String username = Sender;
    final String password = "pswd";

    Properties props = new Properties();
    props.put("mail.smtp.auth", "true");
    props.put("mail.smtp.starttls.enable", "true");
    props.put("mail.smtp.host", "smtp.gmail.com");
    props.put("mail.smtp.port", "587");

    Session session = Session.getInstance(props,
      new javax.mail.Authenticator() {
        protected PasswordAuthentication getPasswordAuthentication() {
            return new PasswordAuthentication(username, password);
        }
      });

    try {
       // Create a message.
       MimeMessage msg = new MimeMessage(session);

       // extracts the senders and adds them to the message.
       // Sender is a comma-separated list of e-mail addresses as per RFC822.
       {
          InternetAddress[] TheAddresses = InternetAddress.parse(Sender);
          msg.addFrom(TheAddresses);
       }

       // Extract the recipients and assign them to the message.
       // Recipient is a comma-separated list of e-mail addresses as per RFC822.
       {
          InternetAddress[] TheAddresses = InternetAddress.parse(Recipient);
          msg.addRecipients(Message.RecipientType.TO,TheAddresses);
       }

       // Subject field
       msg.setSubject(Subject);

       // Create the Multipart to be added the parts to
       Multipart mp = new MimeMultipart();

       // Create and fill the first message part
       {
          MimeBodyPart mbp = new MimeBodyPart();
          mbp.setText(Body);

          // Attach the part to the multipart;
          mp.addBodyPart(mbp);
       }

       // Attach the files to the message
       if (null != Attachments) {
          int StartIndex = 0, PosIndex = 0;
          while (-1 != (PosIndex = Attachments.indexOf("///",StartIndex))) {
             // Create and fill other message parts;
             MimeBodyPart mbp = new MimeBodyPart();
             FileDataSource fds =
             new FileDataSource(Attachments.substring(StartIndex,PosIndex));
             mbp.setDataHandler(new DataHandler(fds));
             mbp.setFileName(fds.getName());
             mp.addBodyPart(mbp);
             PosIndex += 3;
             StartIndex = PosIndex;
          }
          // Last, or only, attachment file;
          if (StartIndex < Attachments.length()) {
             MimeBodyPart mbp = new MimeBodyPart();
             FileDataSource fds = new FileDataSource(Attachments.substring(StartIndex));
             mbp.setDataHandler(new DataHandler(fds));
             mbp.setFileName(fds.getName());
             mp.addBodyPart(mbp);
          }
       }

       // Add the Multipart to the message
       msg.setContent(mp);

       // Set the Date: header
       msg.setSentDate(new Date());

       // Send the message;
       Transport.send(msg);
    } catch (MessagingException MsgException) {
        System.out.println("blows here");
        ErrorMessage = MsgException.toString();
        Exception TheException = null;
        if ((TheException = MsgException.getNextException()) != null)
         ErrorMessage += "\n" + TheException.toString();
         ErrorStatus = 1;
    }
    System.out.println(ErrorMessage);
    return ErrorStatus;
 } // End Send method

    public static void main(String args[]){
        SendMail.Send("smtp.gmail.com", "my_mail@gmail.com", "my_mail@gmail.com",
                 "try sending mail", "came? ","" ,null); 
    }

 } // End of public class SendMail 
```

抱歉缩进

现在试试。希望它会起作用

这是输出邮件。在我的电脑上它发送。

![在此处输入图像描述](https://i.stack.imgur.com/JOIye.jpg)

# jquery - Jquery CDN 不适用于博主

> ID：16040073
> 
> 赞同：0
> 
> 时间：2013-04-16T14:43:44.220
> 
> 标签：jquery, cdn

我正在尝试将以下代码添加到我的博客中。它有 jquery CDN。它在我的机器上运行良好，但在我的博客中运行不正常。这是已经在我的博客[Color Scheme Generator](http://techisquest.blogspot.in/2013/04/color-scheme-generator.html)上发布的配色方案生成器。我只是想在我的博客上测试它的初始版本。

```
 <link href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" rel="stylesheet"></link>
   <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
   <script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>

<style>
#red, #green, #blue {
          float: left;
           clear: left;
            width: 300px;
             margin: 15px;
       }
       #swatch {
               width: 120px;
                height: 100px;
                  margin-top: 18px;
              margin-left: 350px;
                background-image: none;
         }
       #red .ui-slider-range { background: #ef2929; }
        #red .ui-slider-handle { border-color: #ef2929; }
        #green .ui-slider-range { background: #8ae234; }
            #green .ui-slider-handle { border-color: #8ae234; }
            #blue .ui-slider-range { background: #729fcf; }
             #blue .ui-slider-handle { border-color: #729fcf; }
       </style>
     <script>
  function hexFromRGB(r, g, b) {
     var hex = [r.toString( 16 ),g.toString( 16 ),b.toString( 16 )];
        $.each( hex, function( nr, val ) {
                if ( val.length === 1 ) {
                        hex[ nr ] = "0" + val;
           }
            });
         return hex.join( "" ).toUpperCase();
         }
     function refreshSwatch() {
       var red = $( "#red" ).slider( "value" ),
        green = $( "#green" ).slider( "value" ),
         blue = $( "#blue" ).slider( "value" ),
         hex = hexFrom RGB( red, green, blue );
            $( "#swatch" ).css( "background-color", "#" + hex );
         color_match();
      }
      jQuery(document).ready(function() {
      $( "#red, #green, #blue" ).slider({
         orientation: "horizontal",
         range: "min",
          max: 255,
         value: 127,
        slide: refreshSwatch
         });
       $( "#red" ).slider( "value", 255 );
        $( "#green" ).slider( "value", 140 );
            $( "#blue" ).slider( "value", 60 );
       refreshSwatch();
        });
 </script>

<script type="text/javascript">

    function rgbToHex(R,G,B) {return toHex(R)+toHex(G)+toHex(B)}
        function toHex(n) {
              n = parseInt(n,10);
             if (isNaN(n)) return "00";
         n = Math.max(0,Math.min(n,255));
             return "0123456789ABCDEF".charAt((n-n%16)/16) + "0123456789ABCDEF".charAt(n%16);
     }

   function color_match()
  {
          var red,green,blue;
            red = $( "#red" ).slider( "value" );
           green = $( "#green" ).slider( "value" );
        blue = $( "#blue" ).slider( "value" );

        var rm,gm,bm;
         var str="";
            var i=0;
            var j=0;
 for(j=0;j<=9;j++)
 {
        rm=Math.floor(Math.random()*255);
        gm=Math.floor(Math.random()*255);
        bm=Math.floor(Math.random()*255);
        str=str+"<table>";
        str=str+"<tr>";
        var k;
         k=2;
        for(i=0;i<6;i++)
          {
            rm = (rm+red)/k;
              gm = (gm+green)/k;
            bm = (bm+blue)/k;
         var bgcolor="";
             bgcolor=rgbToHex(rm,gm,bm);

             str=str+"<td id='swatch' style='background-color:#"+bgcolor+";width: 80px; height: 40px; '>&nbsp;&nbsp;#"+bgcolor+"&nbsp;&nbsp;</td>";

   }
        str=str+"</tr>";
   str=str+"</table>";
     str=str+"<br />";

    }
  $( "#color_seq" ).html(str);
}
</script>
<br />
<div id="red">
</div>
<div id="green">
</div>
<div id="blue">
</div>
<div class="ui-widget-content ui-corner-all" id="swatch">
</div>
<br />
<input id="color_gen" onclick="color_match();" type="button" value="Generate" />
 <br />
<div id="color_seq">
</div> 
```

它在我的本地机器上运行良好，但我无法弄清楚为什么这在博客上不起作用。

# asp.net - IE9 不显示其他 asp中继器的分隔符模板内的标记

> ID：16040075
> 
> 赞同：0
> 
> 时间：2013-04-16T14:43:45.310
> 
> 标签：asp.net, repeater

我在 Asp.Net 中继器控件的分隔符模板中有一个水平规则 (HR) 标记。出于某种奇怪的原因，Internet Explorer 9 显示第 2、第 4 .. 水平线，但不显示第 1、第 3 ......水平线。我在 Firefox 和 Google Chrome 中没有这个问题。这是有问题的页面：

[http://alt.thedominion.ca/TheBrokerAdvantage/Broker-Search-Results.aspx?postalCode=M5H3B9](http://alt.thedominion.ca/TheBrokerAdvantage/Broker-Search-Results.aspx?postalCode=M5H3B9)

在我的 CSS 文件中，我没有任何隐藏其他 HR 的规则。

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T14:50:04.280

我无法重现您的问题，尽管我确实有 IE10，但这可能是因为您有标记：

```
<tr><td class="basic"><a class="contact" target="_blank" href="http://www.bfl87.ca">www.bfl87.ca</a></td></tr> 
```

不在表格内，因此无效并且可能会导致问题。尝试解决此问题以及此处显示的其他问题：http: [//validator.w3.org/check ?uri=http%3A%2F%2Falt.thedominion.ca%2FTheBrokerAdvantage%2FBroker-Search-Results.aspx%3FpostalCode% 3DM5H3B9&charset=%28detect+automatically%29&doctype=Inline&group=0](http://validator.w3.org/check?uri=http%3A%2F%2Falt.thedominion.ca%2FTheBrokerAdvantage%2FBroker-Search-Results.aspx%3FpostalCode%3DM5H3B9&charset=%28detect+automatically%29&doctype=Inline&group=0)。

# xslt - XSLT 中不显示字符

> ID：16040076
> 
> 赞同：0
> 
> 时间：2013-04-16T14:43:46.683
> 
> 标签：xslt

在 XSLT 中执行了**normalize-space**并且做得不好，它不是一个**空格**是一个不可见的字符。

**元素**

```
<div class='tyreNameComplete'> WinterContact TS800 </div> 
```

**XSLT：**

```
translate(//x:div[@class='tyreNameComplete'], ' ', '') 
```

**带有奇怪字符的元素：**

```
&#10;            WinterContact TS800 &#10;            &#10;            &#10;                &#10;                    &#10;                    &#10;                &#10;                &#10;            &#10; 
```

性格是：`&#10;`没戏。

**我希望结果是：**

```
WinterContact TS800 
```

我需要清理才能得到你需要的东西。你会如何看待这种情况？谢谢。

**解决方案：**

```
translate(//x:div[@class='tyreNameComplete'], '&#10; ', '') 
```

后包含不可见字符`&#10;`，以在 linux 终端中查看可视化文件并将字符复制到我的 xslt 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T15:02:00.577

使用此源 XML：

```
<element>&#10;            WinterContact TS800 &#10;            &#10;            &#10;                &#10;                    &#10;                    &#10;                &#10;                &#10;            &#10;        </element> 
```

这个模板：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
    <xsl:template match="/">
        <collapsed><xsl:value-of select="normalize-space(element)"/></collapsed>
    </xsl:template>
</xsl:stylesheet> 
```

我得到这个输出：

```
<collapsed>WinterContact TS800</collapsed> 
```

这似乎是你想要的？

# android - SipDemo 拨出电话

> ID：16040078
> 
> 赞同：2
> 
> 时间：2013-04-16T14:43:59.790
> 
> 标签：android, sip, sipdroid, csip-simple

我完全参与了 SipDemo 应用程序。我正在**拨打 Sip 电话**，它完成了。我可以听到声音，但其他sip 的人**听不到**我的声音。

这是我的注册码：-

```
 public void initializeLocalProfile() {
    if (manager == null) {
        return;
    }
    if (me != null) {
        closeLocalProfile();
    }

    //sipcallid
   // username and password should be same
 //   sipAddress = "101@217.xx.xxx.xxx";
    String domain =  sipAddress.substring(sipAddress.indexOf('@')+1);
    String username = sipAddress.substring(0,sipAddress.indexOf('@'));
    Toast.makeText(outcall.this, "domain = "+domain+" username "+username, Toast.LENGTH_LONG).show();

    try {
        SipProfile.Builder builder = new SipProfile.Builder(username, domain);
        builder.setPassword("123456");
        builder.setOutboundProxy(domain);
        builder.setDisplayName(username);
        builder.setAuthUserName(username);
        //builder.setDisplayName(username);
       // builder.setAutoRegistration(true);
       // builder.setSendKeepAlive(true);

        me = builder.build();

        manager.setRegistrationListener(me.getUriString(), new SipRegistrationListener() {
                public void onRegistering(String localProfileUri) {
                   updateStatus("Registering with SIP Server...");
                }

                public void onRegistrationDone(String localProfileUri, long expiryTime) {
                    updateStatus("Ready");
                }

                public void onRegistrationFailed(String localProfileUri, int errorCode,
                        String errorMessage) {
                    updateStatus("Registration failed.  Please check settings.");
                }
            });
    } catch (SipException se) {
        updateStatus("Connection error.");
    } catch (ParseException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

这是我的发起电话：-

```
 // sipcallid = "rahul22@sip2sip.info";
    updateStatus(sipcallid);

    try {
          SipAudioCall.Listener listener = new SipAudioCall.Listener() {

            @Override
            public void onCallEstablished(SipAudioCall call) {
                call.startAudio();
                //call.setSpeakerMode(true);
                call.toggleMute();
                updateStatus1("on call established");

            }
            @Override
            public void onCallEnded(SipAudioCall call) {
                updateStatus1("on call end");
                 finish();
            }

        };

        call = manager.makeAudioCall(me.getUriString(), sipcallid, listener, 30);

        updateStatus1(""+call.getState());
    }
    catch (Exception e) {
        Toast.makeText(outcall.this, "Error when trying to close manager"+ e.getMessage(), Toast.LENGTH_LONG).show();

        if (me != null) {
            try {
                manager.close(me.getUriString());
            } catch (Exception ee) {
                Toast.makeText(outcall.this, "ee"+ e.getMessage(), Toast.LENGTH_LONG).show();
                ee.printStackTrace();
            }
        }
        if (call != null) {
            call.close();
        }
    }
} 
```

请除外。我能听到别人的声音，但别人听不到我的声音。

请帮我！。谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T12:37:51.920

我看到你打电话给 call.toggleMute()

会不会是你把麦克风静音了？SipDemo 应用程序有一个取消麦克风静音的按钮。

```
public boolean onTouch(View v, MotionEvent event) {
    if (call == null) {
        return false;
    } else if (event.getAction() == MotionEvent.ACTION_DOWN && call != null && call.isMuted()) {
        call.toggleMute();
    } else if (event.getAction() == MotionEvent.ACTION_UP && !call.isMuted()) {
        call.toggleMute();
    }
    return false;
} 
```

也许您只是在发起呼叫时将麦克风静音但从未取消静音？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-18T09:09:14.773

当您的 IP 地址通常是 NAT 地址时，它会提高。Android 默认不支持 NAT。为了支持 NAT，您将使用其他外部库，例如 CSipSimple。

# opencv - 使用 OpenCV 手动标记对应点的图像配准

> ID：16040081
> 
> 赞同：0
> 
> 时间：2013-04-16T14:44:02.200
> 
> 标签：opencv, image-processing, affinetransform, homography, perspectivecamera

1.  我有一个**尺寸为 300x300**的已**处理二进制图像**。此处理后的图像包含很少的对象（人或车辆）。

 **![处理过的二值图像](https://i.stack.imgur.com/WEcMJ.jpg)

2.  我还有另一个**640x480 维度**的相同场景的**RGB 图像**。它**取自不同的位置**

 ****![在此处输入图像描述](https://i.stack.imgur.com/xxqDN.jpg)

**注意：两个相机不一样**

我可以使用背景减法在第一张图像中检测到某种程度的对象。**我想检测第二张图像中的相应对象**。我经历了opencv函数

*   [获得仿射变换](http://docs.opencv.org/modules/imgproc/doc/geometric_transformations.html#Mat%20getAffineTransform%28InputArray%20src,%20InputArray%20dst%29)
*   [获取透视变换](http://docs.opencv.org/modules/imgproc/doc/geometric_transformations.html#Mat%20getPerspectiveTransform%28InputArray%20src,%20InputArray%20dst%29)
*   [查找单应性](http://docs.opencv.org/modules/calib3d/doc/camera_calibration_and_3d_reconstruction.html#Mat%20findHomography%28InputArray%20srcPoints,%20InputArray%20dstPoints,%20int%20method,%20double%20ransacReprojThreshold,%20OutputArray%20mask%29)
*   [估计刚性变换](http://docs.opencv.org/modules/video/doc/motion_analysis_and_object_tracking.html#estimaterigidtransform)

所有这些功能都需要两个图像中的对应点（坐标）

在第一张二值图像中，我只有对象存在的信息，它没有与第二张图像（RGB）完全相似的特征。

我认为传统的特征匹配来确定可用于估计变换参数的相应控制点是**不可行**的，因为我认为我无法确定和匹配来自二进制和 RGB 图像的特征（对吗？？）。

如果我错了，我可以取什么特征，我应该如何进行特征匹配，找到对应点，估计转换参数。

**我尝试了更多手动标记来估计转换参数的解决方案**（如果我错了请纠正我）

**注意：两台摄像机都没有移动。**

*   已处理图像中对象周围的手动标记矩形（二进制）
*   记下矩形的坐标
*   手动标记第二个 RGB 图像中对象周围的矩形
*   记下矩形的坐标
*   对第一个二进制和第二个 RGB 图像的不同样本重复上述步骤

现在我有大约 20 个对应点，我在函数中将它们用作：

> findHomography(src_pts, dst_pts, 0) ;

所以一旦我在第一张图片中检测到一个物体，

*   我在它周围画了一个边界框，

*   使用上面找到的变换变换顶点的坐标，

*   最后在第二个 RGB 图像中绘制一个框，**转换后的坐标为顶点**。

    但这并没有将第二个 RGB 图像中的框标记在人/对象上。相反，它被绘制在其他地方。虽然我拿了几张二值和RGB的样本图像，并使用了几个对应点来估计变换参数，但似乎它们不够准确..

CV_RANSAC 和 CV_LMEDS 选项的含义是什么，ransacReprojecThreshold 以及如何使用它们？

我的方法好吗...我应该修改/做什么以使注册准确？

可以使用任何替代方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T09:48:27.303

我自己对 OpenCV 还很陌生，但我的建议是：

*   看到您在第一张图像中识别出对象，我不应该认为获取关键点和提取特征会很困难吗？（或者也许你已经有了这个？）
*   识别第二张图像中的特征
*   使用 OpenCV`FlannBasedMatcher`或类似方法匹配特征
*   突出显示第二张图像中的匹配功能或您想要做的任何事情。

我希望因为您在第一张图片中的所有特征都应该是正面的（您知道它们是您想要的特征），因此获得准确匹配会相对简单。

就像我说的，我是新手，所以这些想法可能需要一些细节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-19T15:00:29.300

回答这个问题可能有点晚了，提问者可能看不到这个，但如果第一张图像最初是灰度图像，那么可以这样做：

1.）第二张图像---->灰度 ------> gray2ndimg

2.) 通过匹配特征实现点对点的 b/w gray1stimg 和 gray2ndimg 对应。******

# java - 使用 PreferenceActivity 的 ListActivity 选择子类别

> ID：16040082
> 
> 赞同：0
> 
> 时间：2013-04-16T14:44:03.890
> 
> 标签：java, android, eclipse

我`PreferenceActivity`用来保存一些默认值。

我有一个包含区域列表的数组和包含不同区域列表的每个区域子数组。我的首选项列表项包含所有区域的列表，但是如何使 listPrefernce 在单击时显示另一个 ListPreference，以便列出其子区域？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T15:53:53.453

听起来您想使用[http://developer.android.com/guide/topics/ui/settings.html#Subscreens中描述的子屏幕](http://developer.android.com/guide/topics/ui/settings.html#Subscreens)

```
<PreferenceScreen  xmlns:android="http://schemas.android.com/apk/res/android">
    <!-- opens a subscreen of settings -->
    <PreferenceScreen
        android:key="region1"
        android:title="Region 1"
        android:persistent="false">

        <ListPreference
            android:key="subarray1"
            android:title="SubArray 1" ... />

        <ListPreference
            android:key="subarray2"
            android:title="SubArray 2" ... />
        ....

    </PreferenceScreen>

    <!-- opens another subscreen of settings -->
    <PreferenceScreen
        android:key="region2"
        android:title="Region 2"
        android:persistent="false">

        <ListPreference
            android:key="subarray1"
            android:title="SubArray 1" ... />

        <ListPreference
            android:key="subarray2"
            android:title="SubArray 2" ... />
            ...

    </PreferenceScreen>
    ...
</PreferenceScreen> 
```

# asp.net - asp.net 将数据插入数据库

> ID：16040087
> 
> 赞同：1
> 
> 时间：2013-04-16T14:44:17.580
> 
> 标签：asp.net

```
con.Open();
cmd2 = new SqlCommand("insert into dailyWorkout('"+RadioButton1.Text+"', '"+RadioButton2.Text+"', '"+RadioButton3.Text+"', '"+RadioButton4.Text+"', '"+RadioButton5.Text+"', '"+Label1.Text+"')", con);

cmd2.ExecuteNonQuery(); 
```

嘿伙计们，在这个网站上工作了一段时间，但是在将数据放入数据库时​​出现错误提示

> ')' 附近的语法不正确。

对于其他东西，我以同样的方式工作，但事实并非如此。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T14:53:52.403

您真的应该真正真正地使用参数化查询来避免 SQL 注入（并提高性能；并避免类型转换等问题）

所以我建议使用这样的代码：

```
// define your *parametrized* SQL statement
string insertStmt = "INSERT INTO dbo.YourTable(Col1, Col2, Col3) VALUES(@Val1, @Val2, @Val3);";

// put SqlConnection and SqlCommand into "using" blocks to ensure proper disposal
using(SqlConnection conn = new SqlConnection("-your-connection-string-here-"))
using(SqlCommand cmd = new SqlCommand(insertStmt, conn))
{
     // set the parameters to the values you need 
     cmd.Parameters.AddWithValue("@Val1", "Some String here");
     cmd.Parameters.AddWithValue("@Val2", 42);
     cmd.Parameters.AddWithValue("@Val3", DateTime.Today.AddDays(-7));

     // open connection, execute query, close connection right away
     conn.Open();
     int rowsAffected = cmd.ExecuteNonQuery();
     conn.Close();
} 
```

要记住的要点：

*   ***始终***使用参数化查询 - 不要将您的 SQL 语句连接在一起！
*   将`SqlConnection`和`SqlCommand`放入`using(...) { ... }`块中以确保正确处理
*   始终明确定义要在 a`SELECT`和`INSERT`语句中使用的列列表
*   尽可能晚地打开连接，执行查询，立即再次关闭连接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T14:55:25.430

这将完成这项工作，但我强烈建议使用参数。

```
con.Open();
cmd2 = new SqlCommand("insert into dailyWorkout values ('"+RadioButton1.Text+"', '"+RadioButton2.Text+"', '"+RadioButton3.Text+"', '"+RadioButton4.Text+"', '"+RadioButton5.Text+"', '"+Label1.Text+"')", con);

cmd2.ExecuteNonQuery(); 
```

而不是上面的代码，你最好使用

```
cmd2 = new SqlCommand("insert into dailyWorkout values (@val1, @val2, @val3,@val4,@val5,@val6)", con);
cmd2.Parameters.AddWithValue("@val1",RadioButton1.Text);
cmd2.Parameters.AddWithValue("@val2",RadioButton2.Text);
cmd2.Parameters.AddWithValue("@val3",RadioButton3.Text);
cmd2.Parameters.AddWithValue("@val4",RadioButton4.Text);
cmd2.Parameters.AddWithValue("@val5",RadioButton5.Text);
cmd2.Parameters.AddWithValue("@val6",Label1.Text)
  cmd2.ExecuteNonQuery(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T15:02:51.580

好的，已经提到过，不要注入这样的参数。但如果你必须这样做，问题是你最终的 sql 字符串看起来像：

```
insert into dailyWorkout('string1', 'string2', 'string3', 'string4', 'string5', 'string6') 
```

什么时候应该

```
insert into dailyWorkout(columnName1,columnName2,columnName3,columnName4,columnName5,columnName6)
values('string1', 'string2', 'string3', 'string4', 'string5', 'string6') 
```

但你真的应该考虑：

```
 var sqlCmd = new SqlCommand("insert into dailyWorkout(columnName1,columnName2,columnName3,columnName4,columnName5,columnName6) values(@v1, @v2, @v3, @v4, @v5, @v6)", default(SqlConnection));
        sqlCmd.Parameters.Add("@v1", SqlDbType.NVarChar).Value = RadioButton1.Text;
        sqlCmd.Parameters.Add("@v2", SqlDbType.NVarChar).Value = RadioButton2.Text;
        sqlCmd.Parameters.Add("@v3", SqlDbType.NVarChar).Value = RadioButton3.Text;
        sqlCmd.Parameters.Add("@v4", SqlDbType.NVarChar).Value = RadioButton4.Text;
        sqlCmd.Parameters.Add("@v5", SqlDbType.NVarChar).Value = RadioButton5.Text;
        sqlCmd.Parameters.Add("@v6", SqlDbType.NVarChar).Value = Label1.Text;
        sqlCmd.ExecuteNonQuery(); 
```

# jquery - 重新加载扩展下拉菜单

> ID：16040090
> 
> 赞同：0
> 
> 时间：2013-04-16T14:44:20.673
> 
> 标签：jquery, asp.net, drop-down-menu, dropdownbox

我的页面上没有本机下拉列表（从下拉列表扩展）组件。我在类构造函数方法中在其中插入数据，但现在我每次创建新对象时都必须刷​​新这些数据，我正在尝试使用 Jquery 但它不起作用，我不知道如何调用 DropDownList 扩展中包含的 Bind 方法，按照代码：

扩展下拉列表：

```
public class XDDLprobabilidadesDeSucesso : XDropDownList
{
    public XDDLprobabilidadesDeSucesso()
    {
        this.DataSource = GetDataBind();
        this.DataTextField = "text";
        this.DataValueField = "id";
        this.DataBind();
    }

    private List<DDLBindType> GetDataBind()
    {
        List<DDLBindType> l = new List<DDLBindType>();
        BLLProbabilidadesSucesso probabilidade = new BLLProbabilidadesSucesso();
        List<ProbabilidadesSucesso> probabilidades = probabilidade.Retrieve().ToList();

        DDLBindType item = new DDLBindType();

        item.id = 0;
        item.text = "Selecione";
        l.Add(item);

        foreach (ProbabilidadesSucesso prob in probabilidades)
        {
            item = new DDLBindType();
            item.id = prob.idProbSucesso;
            item.text = prob.porcentagem.Value.ToString();
            l.Add(item);
        }

        return l;
    }
} 
```

您能看到，在类构造函数中调用了 DataBind 吗？如何从 Jquery 再次调用此方法？（显然我必须创建一个公共访问器）

任何答案都会很有用。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T16:48:36.123

尝试在客户端上“绑定”asp 控件存在一些问题。

*   第一个问题是，一旦它在客户端上，它通常是 HTML 元素的集合。保存“绑定”数据的一个或多个元素可能并不明显，尤其是在绑定过程中将属性添加到元素时。
*   第二个问题是您不会在客户端拥有任何控件生成脚本。因此，您为更改其外观所做的任何事情都必须使用脚本手动完成。

因此，要做到这一点，您需要执行以下操作：

首先弄清楚控件是如何呈现的。由于这是一个下拉菜单，我假设它呈现为`select`，除非它是某种启用图像的下拉菜单，在这种情况下，这将非常困难。

一旦您知道“绑定”数据在客户端上的去向，请弄清楚如何选择它。一旦你有一个可以可靠地获取适当元素或元素的选择器，请确保你将能够销毁和创建“绑定”元素。

也就是说，在 a 的情况下`select`，确保您可以获取该`select`元素，并且您可以删除`option`其中包含的元素并完全按照它们被服务器“绑定”时的状态替换它们。

我说首先要做这一切，因为如果您不能可靠地重新创建控件的结构，那么您将无法在客户端“绑定”。

一旦您有了重新创建控件的选择器和方法，然后开始制作`webMethod`以公开页面中的信息。查看该页面并确保您在客户端拥有从服务器获取信息以“绑定”所需的信息。您需要弄清楚服务器是否需要任何参数才能收集正确的信息。

`webMethod`应该以一种您可以在客户端上轻松消化的方式返回信息。您可以使用数据表或对象列表来执行此操作；任何你可以迭代的东西。

不用担心序列化或反序列化，ASP 会为您完成；那样很酷。只要您知道返回对象的属性名称，就可以使用您现在拥有的功能。

一旦`webMethod`创建，您就可以在页面上创建 AJAX 调用以获取要绑定的数据。在收集数据的 ajax 调用的成功回调中，您需要呈现新信息。

您需要清空`select`，然后用`option`返回的数据集中每个对象的元素重新填充它。再次假设下拉呈现为一个`select`元素。

这大致就是我在客户端“绑定”一堆网格视图和其他 ASP 控件的方式，以避免整个页面回发和刷新。

这并非不可能，但也不是超级容易。

# html - 如何使多个 CSS 背景图像流体响应？

> ID：16040094
> 
> 赞同：1
> 
> 时间：2013-04-16T14:44:27.043
> 
> 标签：html, css, responsive-design

我正在创建一个流畅的响应式网站，其中包含多个包含 CSS 背景图像的部分。我将如何使这些图像具有流畅的响应性？我知道如何使用标准标签执行此操作，但无法为 CSS 背景图像解决此问题。正如您在下面看到的，每个标签都将在我的 CSS 中包含一个背景图像。

我的网站结构：

```
<!DOCTYPE html>
<html lang="en">
<head>
    <title>Example</title>
</head>
<body>
    <section id="background-image-one"></section>
    <section id="background-image-two"></section>
    <section id="background-image-three"></section>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T14:50:20.343

您可以使用[background-size](http://www.css3.info/preview/background-size/)来缩放应该适用于大多数移动设备的图像 - 但不适用于某些较旧的桌面浏览器（通常的嫌疑人）。不过，这不会缩小图像，因此可能值得查看类似[http://adaptive-images.com/](http://adaptive-images.com/)的东西，它可以将不同尺寸的图像提供给具有不同屏幕尺寸的设备。注意不是不同的视口大小。

# mysql - 加入订单、员工的名字和姓氏、项目和位置 MySQL

> ID：16040098
> 
> 赞同：0
> 
> 时间：2013-04-16T14:44:39.053
> 
> 标签：mysql, database, join

将订单、员工的名字和姓氏、项目和位置合并为一个，这样我就可以将内容导出到 Excel 电子表格中。

```
SELECT orders.order_id, staff.staff_id, staff.first_name, staff.last_name, items.name, locations.address1, locations.address2, locations.state,     locations.zip_code, orders.created_at
FROM orders
INNER JOIN staff
ON orders.staff_id = staff.staff_id
INNER JOIN items
ON orders.item_id = items.item_id
INNER JOIN location_staff
ON location_staff.staff_id = staff.staff_id
INNER JOIN locations
ON location_staff.loc_id = location.loc_id 
```

我正在尝试收集此信息以放入 Excel 文档，但我的查询未返回任何结果。任何帮助，将不胜感激。

这是一个ERD图，便于进一步理解

[https://www.dropbox.com/s/7inma4s42xq5t4a/ERD.jpg](https://www.dropbox.com/s/7inma4s42xq5t4a/ERD.jpg)

（Location_staff_link 在创建为 location_staff 时被缩短）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:46:14.373

只需删除`FROM`子句中的额外表格，

```
SELECT orders.order_id, 
       staff.staff_id, 
       staff.first_name, 
       staff.last_name, 
       items.name, 
       orders.created_at 
FROM   orders 
       INNER JOIN staff 
               ON orders.staff_id = staff.staff_id 
       INNER JOIN items 
               ON orders.item_id = items.item_id 
       INNER JOIN locations 
               ON location.staff_id = staff.staff_id 
```

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T15:21:32.707

您的查询中没有任何内容看起来很糟糕，所以我建议在这种情况下找到答案。

先把第一次join的最小化，把字段改成select *（暂时发现问题可以回到真实字段），这样就可以把所有的数据都塞进去了。

您是否获取记录，然后在该联接中的表上添加任何 where 子句。你还有记录吗？

然后一次添加一个连接和每个 where 子句，直到找到记录消失的那个。这将告诉您需要做什么来修复它。

通常在这种没有返回记录的情况下，其中一个连接需要是左连接，或者没有满足 where 子句条款的数据，或者连接之一定义不正确。有时，问题在于您的数据库没有您期望的数据。但首先你必须使用上面的过程来诊断问题出在哪里。

# android - Cocos2dx-android-Assert 错误：ccArray.cpp 函数：ccArrayAppendObject 行：120

> ID：16040101
> 
> 赞同：1
> 
> 时间：2013-04-16T14:44:45.550
> 
> 标签：android, cocos2d-x

断言错误：ccArray.cpp 函数：ccArrayAppendObject 行：120

这是我尝试使用此代码执行帧动画时的错误：

```
CCArray *frames= CCArray::create();

for(int i=0 ; i<=21 ; i++)
{
        CCString *frame=CCString::createWithFormat("mypong%04d.png",i);
        frames->addObject(CCSpriteFrameCache::sharedSpriteFrameCache()->spriteFrameByName(frame->getCString()));
    }
    sprite->runAction(CCAnimate::create(CCAnimation::create(frames,.01)));
} 
```

它在 TouchesBegan 方法下。有人知道我在这里做错了什么吗？

注意：我在 win7 64 位，cocos2dx 2.0.1，ndk r8b

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:35:44.913

好吧，问题是我的精灵表损坏了或者发生了一些奇怪的事情......它不包含第 10 帧到第 15 帧的图像......不知道它发生了什么......精灵表中有五个黑色图像！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T17:15:11.283

好像没有`CCSpriteFrame`名字`mypong%04d.png`in `CCSpriteFrameCache`。你之前可能跑过`CCSpriteFrameCache::sharedSpriteFrameCache()->removeUnusedSpriteFrames()`或类似的事情。

或者您的项目文件夹中缺少 .png 文件，因此它们无法添加到`CCSpriteFrameCache`

# windows - NPM 安装 (Windows) 抛出 .SLN 错误...？

> ID：16040102
> 
> 赞同：2
> 
> 时间：2013-04-16T14:44:45.927
> 
> 标签：windows, node.js, npm, node-gyp

我正在使用 Node.js（以及其他几个节点模块），现在我在多个不同的项目中遇到了这个问题......

有很多（不是全部，而是很多）节点模块，当我尝试安装一个模块时，我会收到与此类似的错误：

```
C:\...\.node-gyp\0.8.16\deps\uv\include\uv.h(55): fatal error C1083: Cannot open include file: 'stdint.h': No such file or directory [C:\...\AppData\Roaming\npm\node_modules\soap\node_modules\node-expat\build\binding.sln]

Project : warning PRJ0018: The following environment variables were not found: [C:\...\AppData\Roaming\npm\node_modules\soap\node_modules\node-expat\build\binding.sln] 
```

我认为，Node-Gyp 似乎与它有关，这不仅仅是巧合的频率……但是我找不到任何暗示究竟是什么原因造成的。

我在跑：

```
-Node 0.8.x (Which I need for one of our custom modules),
-NPM 1.1.69
-Windows 7 x86 
```

我正在尝试使用哪些模块的示例：

```
-npm install soap
-npm install nodetime 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T19:24:50.983

偶然发现了原因。要在 Windows 机器上正确安装 Node-gyp，您需要 Visual Studio C++ 2010（Express 或完整套件）。乍一看，我认为这意味着 MS C++ Redistributable 包，而不是 IDE。

我安装了 VS2008，但 2010 是最低要求。不过，希望这有助于其他人在未来免于一两次头痛！

# mongodb - MongoDB - 如何在配置文件中使用 setParameter

> ID：16040109
> 
> 赞同：2
> 
> 时间：2013-04-16T14:45:04.880
> 
> 标签：mongodb

我正在尝试为我的 MongoDB 安装设置 logLevel 参数的自定义值。执行此操作的标准方法似乎是将 --setParameter 参数传递给 mongod.exe 可执行文件。

但是我阅读了[配置文件选项](http://docs.mongodb.org/manual/reference/configuration-options/)页面，它表明可以[将 setParameter 包含](http://docs.mongodb.org/manual/reference/configuration-options/#setParameter)在配置文件中。

这种情况下的语法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T21:32:22.403

从 MongoDB 2.4 开始，现在有特定于版本的 MongoDB 在线手册。如果您查看页面左上角的导航，您应该会看到一个下拉菜单，其中包含可用的手动版本（例如“2.4（当前）”或“2.2”）。默认手册与当前稳定的生产版本相匹配。

配置语法是 2.4的[`setParameter`](http://docs.mongodb.org/manual/reference/mongod/#cmdoption-mongod--setParameter)新内容（并在 2.4 手册中如此说明）。

设置 logLevel/verbosity 的历史语法是使用越来越多的`v`s（对于详细程度，又名[--verbose](http://docs.mongodb.org/v2.2/reference/mongod/#cmdoption-mongod--verbose)）。`v`日志级别 1 也是如此，日志`vv`级别 2 也是如此，依此类推。

此配置设置适用于[MongoDB 2.2](http://docs.mongodb.org/v2.2/reference/mongod/#cmdoption-mongod--verbose)和旧版本以及[MongoDB 2.4](http://docs.mongodb.org/manual/reference/mongod/#cmdoption-mongod--verbose)：

```
// Set verbosity to logLevel 3:
vvv = true 
```

通常，您不希望将 logLevel 设置为高于 1，除非尝试收集信息以进行故障排除。日志详细程度的正常级别是`0`; 更高的级别可以生成*大量*的日志记录细节。

# .net - VB .NET DataGridView SQL 顺序列表

> ID：16040110
> 
> 赞同：0
> 
> 时间：2013-04-16T14:45:09.663
> 
> 标签：.net, sql, vb.net

我只是想知道是否有人愿意给我一些建议。

我有一个 DataGridView，其中包含从我的 SQL 数据库中提取的数据。我想了解如何重新排序 DataGridView 中的行。

目前我正在使用等级系统。我的数据库中有一个名为 ListOrder 的字段，它表示它在我的 DGV 中显示的顺序的等级，我使用 ORDER BY ListOrder 以正确的顺序显示它。

每次将新记录添加到数据库时，我都会使用计数查询，然后对新记录 + 1。因此，例如，如果我的表中有 10 条记录，它计数为 10，然后加 + 1，因此新记录等于 11。这样做的问题是，如果我删除了表中的记录，排名就会不正确。另一个例子是我删除了在我的表中留下 9 的第一条记录，但是因为我使用计数，它会在表中计数 9，然后添加 + 1，它的值是 10，这意味着我可以有 2数据库中包含我的 ListOrder 为 10 的记录。（希望这是有道理的）我知道我也可以使用 MAX 查询，但这仍然给我一个类似的问题。

当我删除一条记录时，我需要它重新计算所有记录并将它们保持相同的顺序。

下面是我用来在表中上下移动记录的代码：

```
v_SelectRow = dgvLine1.CurrentRow.Index
dbConnection = New OleDbConnection("Provider=Microsoft.Jet.OLEDB.4.0;Data Source=C:\planner.mdb;")
dbConnection.Open()

strSQL = "UPDATE [Line1Orders] SET [ListOrder] = ListOrder-1  WHERE ([DateTime] = '" & dgvLine1.Item(8, v_SelectRow).Value & "')"

dbCommand = New OleDbCommand(strSQL, dbConnection)
dbCount = dbCommand.ExecuteNonQuery
dbConnection.Close() 
```

由于计数查询，我遇到的另一个问题是，当我从表中删除例如 4、5、6 的记录时，ListOrder 值为 7 的下一条记录需要向上移动 3 次才能移动超越之前的记录。

我希望这是有道理的。如果有人愿意为我指出正确的方向，了解我如何改进当前系统的功能、查询和任何合乎逻辑的想法，我将不胜感激。我将不胜感激。

多谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T15:18:56.553

向您的数据表添加一个自动递增的主键。将 order by 子句添加到您的 SQL 以按您刚刚添加的主键进行排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T15:06:48.467

只是出于好奇——为什么数字需要保持一致？您不能保持计数器递增，然后当您向用户显示它时显示您当时创建的计数器。

您有记录 1、2、3、6、9、10、15 您插入的下一条记录将是 16。当您向用户显示记录时，显示 1、2、3、4、5、6、7、8

您真的需要向客户显示实际排名吗？这个数字对他们重要吗？

# wordpress - WordPress；Vantage 主题和 ACF 插件？

> ID：16040115
> 
> 赞同：1
> 
> 时间：2013-04-16T14:45:20.770
> 
> 标签：wordpress, custom-fields, app-themes

我一再尝试在 Vantage 主题（来自 AppThemes）中实现高级自定义字段 (ACF) 插件，但没有任何成功。在这个问题上，我与 ACF 的管理员进行了广泛的接触，但不幸的是我们没有成功。他建议在这里问，也许寻找（付费）开发人员来解决这个问题。

好的，那我在尝试什么？我创建了一个自定义字段组，并希望在 Vantage 的列表形式中实现该字段组。为此，我阅读了几个文档，包括： http: [//www.advancedcustomfields.com/resources/tutorials/creating-a-front-end-form/](http://www.advancedcustomfields.com/resources/tutorials/creating-a-front-end-form/)。为了完整，基于此，我在 Vantage 主题文件夹中执行了以下操作：

1.  我创建了 2 个自定义字段组，ID 为：88 和 139。
2.  在 Wrapper.php 我添加了代码：`<?php acf_form_head(); ?>`
3.  在 form-listing.php 我创建了 2 个自定义钩子，“product_custom”和“product_custom2”：`<?php do_action( 'product_custom' ); ?> <?php do_action( 'product_custom2' ); ?>`
4.  在 fuctions.php 中，我创建了 3 个函数：

    ```
    add_action( 'wp_print_styles' , 'my_deregister_styles' , 100 );
    function my_deregister_styles() {
        wp_deregister_style( 'wp-admin'  );
    }

    add_action( 'product_custom'   , 'productfields'   );
    function productfields() {
        $options = array(
            'field_groups'   => array('post'   => '88'  ),
        'form'   => false,
    );
        acf_form( $options );
    }

    add_action( 'product_custom2'   , 'productfields2'   );
    function productfields2() {
        $options2 = array(
            'field_groups'   => array('post'   => '139'  ),
        'form'   => false,
    );
        acf_form( $options2 );
    } 
    ```

这实际上使自定义字段组显示在 Vantage 的列表形式中。但是，以下事情总是出错：

1.  两个字段组都有一个 WYSIWYG 字段。但是由于某种原因，所见即所得按钮和媒体按钮停止工作
2.  我无法在第一个 WYSIWYG 字段中填写任何文本。只有第二个适用于此。
3.  保存列表表单后，根本不存储任何数据。在 ACF 管理员的建议下，我在 acf-master/core/api.php 文件中尝试了以下操作：

    ```
    // run database save first
            if( isset($_POST['acf_save']) )
            {
                $txt="Hello world!";
        echo $txt;
        die(); 
    ```

但是，在保存列表表单后，该字符串不会显示。所以不使用if语句... 4.要在前端显示数据，一旦保存，我想可以使用默认的wordpress codex..

我试图尽可能完整；）有没有人可以进一步帮助我？有偿援助也可协商。

提前非常感谢！罗伯特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-05T08:22:42.637

我已经成功实施了具有优势主题的 ACF。

我在 vantage 列表表单中添加了 ACF 表单，并将 vantage 表单与 ACF 表单结合起来。一键式。

数据已存入数据库，可调用显示在列表区。仅添加图像按钮在前端不起作用，但在后端该按钮起作用。

1.  添加`<?php acf_form_head(); ?>`到 wrapper.php

2.  做这个教程[前端表单帮助](http://old.support.advancedcustomfields.com/discussion/3218/front-end-form-help)

3.  消除 form-listing.php 中的默认 vantage 提交按钮

4.  在 ACF api.php 函数中添加此代码`acf_form_head()`

    ```
     // allow for custom save

    $post_id = apply_filters('acf_form_pre_save_post','va_after_create_listing_form', $post_id); 
    ```

就是这样，希望它适用于您的网站。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-30T03:40:16.010

Is that you want when someone visits the website that they are able to send info via the page they visits eg www.yoursite.com/listing/listing-name like probably an email or contact for more info relating to that business?

If not then you can simply add in the ACF data from the back-end i.e. dreamweaver etc onto single-listing.php and use the ACF tutorial on working with fields.

Hope this helps somewhat

Cheers

# ms-access - 带有行源表/查询的组合框，但也带有“选择无”选项

> ID：16040116
> 
> 赞同：2
> 
> 时间：2013-04-16T14:45:21.433
> 
> 标签：ms-access, combobox, vba

背景：

我正在使用 Ms-Access 表单，并且我有一个组合下拉列表，我正在 VBA 中进行编码

问题：

是否可以基于查询进行组合，例如：`"SELECT tbl.col1 FROM tbl"` 所以你得到一个绑定的下拉列表......

**但....**

还想在列表中再添加一个...顶部的**“未选择” 。**

如果有人有想法、提示或建议，请告诉我。

非常感谢！

一些代码：

```
 Me.CboUnallocatedPayments.RowSource = " & _
    "SELECT zTempBankCustomerReceipt.TransType, zTempBankCustomerReceipt.Ref, " & _
    " zTempBankCustomerReceipt.Details,zTempBankCustomerReceipt.EntryDate, " & _
    " zTempBankCustomerReceipt.NetAmt, " & _
    " zTempBankCustomerReceipt.PaidStatus " & _
    " FROM zTempBankCustomerReceipt UNION " & _
    " SELECT 0, "**NOTHING SELECTED**" " & _
    " FROM zTempBankCustomerReceipt" & _
    " WHERE zTempBankCustomerReceipt.TransType = 'SA' " & _
    " AND zTempBankCustomerReceipt.PaidStatus = '0'" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T15:13:53.767

考虑组合框行源的联合查询。

```
SELECT tbl.col1 FROM tbl
UNION ALL
SELECT 'None Selected' FROM Dual; 
```

`Dual`是一个自定义表，其设计保证它始终只包含 1 行。[您可以使用此 SO answer](https://stackoverflow.com/a/7933927/77335)中的说明创建自己的`Dual`表。但是您不需要为此目的使用特殊的表；任何返回单行的表或查询就足够了。

关于组合中行的顺序，您可以在查询中添加第二个字段。如果你想`'None Selected'`在列表的顶部，剩余的行按字母顺序排序......

```
SELECT 1 AS order_by, tbl.col1 FROM tbl
UNION ALL
SELECT 0, 'None Selected' FROM Dual
ORDER BY 1, 2; 
```

# sql - 在 SQL Server 和 ORACLE 中比较日期的常用 SQL

> ID：16040117
> 
> 赞同：6
> 
> 时间：2013-04-16T14:45:26.953
> 
> 标签：sql, sql-server, oracle

我需要在我的查询中包含一个日期比较，我将日期字符串与`DATETIME`列进行比较，但我需要它同时在 ORACLE 和 SQL Server 上工作，并且没有两个单独的查询。是否有适用于 oracle 和 sql 的日期比较？

甲骨文：

```
Select * from MyTable where myDate > DATE '2013-04-10' 
```

SQL 服务器：

```
Select * from MyTable where myDate > convert(DATETIME,'2013-04-10', 126) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T14:52:24.150

此可移植性问题仅适用于文字。

我不相信有一种完全可移植的方法来做到这一点，因为 SQL Server 不支持 ANSI 文字 DATE 关键字，并且所有 CAST、CONVERT、TO_DATE 和日期函数在所有平台上都不相同。

请注意，您的第二个查询也可以写为`Select * from MyTable where myDate > '20130410'`.

如果 SQL Server 支持 ANSI DATE 文字功能（DB/2 和 Teradata 都具有此功能），那就太好了。

我找不到关于此的 Connect 项，也找不到任何关于 SQL Server 不支持 ANSI DATE、TIME 和 TIMESTAMP 文字关键字的原因。

我想知道在您的情况下，是否可以改用参数？

Jack 评论[Common SQL 中用于比较 SQL Server 和 ORACLE 中的日期](https://stackoverflow.com/questions/16040117/common-sql-to-compare-dates-in-sql-server-and-oracle#comment22889738_16040483)的解决方案将使此代码可移植，但您必须具有不可移植的标量函数。这对您来说可能是一个可行的选择 - 请注意，在 SQL Server 中，您需要在标量函数前面加上其架构 - 如果您不能使架构同名，这可能会在 Oracle 代码和 SQL 代码之间引入另一个问题（注意在 Oracle 中，如果将函数放在包中，前缀可能是包的名称而不是模式）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T15:02:59.487

是否允许定义您自己的用户定义函数？您可以创建一个函数来抽象 DBMS 特定代码并返回文字“真”或“假”结果。

[MSSQL 用户定义函数：] [http://msdn.microsoft.com/en-ca/library/ms186755.aspx](http://msdn.microsoft.com/en-ca/library/ms186755.aspx)

【Oracle用户定义函数】[http://ocs.oracle.com/cd/B19306_01/server.102/b14200](http://ocs.oracle.com/cd/B19306_01/server.102/b14200)

Oracle 显然不允许用户定义的函数返回布尔类型，因此需要字符串（或数字）结果。

# django - 在 Django 模型关系中按子 MAX 对父进行排序

> ID：16040118
> 
> 赞同：1
> 
> 时间：2013-04-16T14:45:31.173
> 
> 标签：django, django-models, django-queryset

我不知道如何最好地解释我的实际问题，所以这里有一些完全类似的东西。拍卖清单及其出价。

```
class Auction(models.Model):
    name = models.CharField(...)

class Bid(models.Model):
    auction = models.ForeignKey(Auction, related_name="bids")
    amount = models.PositiveIntegerField(default=0) 
```

我想要一份按最高出价排序的拍卖清单。我有一种感觉，这将与聚合 Max 有关，但我可以继续按该聚合值排序吗？

我有一种感觉，这将是非常简单的，但我还没有真正进入聚合的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T14:49:57.857

```
(Auction.objects.annotate(highest_bid=models.Max('bids__amount'))
                .order_by('-highest_bid')) 
```

*   [聚合备忘单](https://docs.djangoproject.com/en/dev/topics/db/aggregation/#cheat-sheet)

# vb.net - 带有 ODP.NET 的 Enterprise Library 5.0 导致 ORA-06502 错误

> ID：16040120
> 
> 赞同：1
> 
> 时间：2013-04-16T14:45:37.573
> 
> 标签：vb.net, oracle, enterprise-library, odp.net

在使用添加了 EntLibContrib.Data.OdpNet 的 Enterprise Library 5.0 时，我遇到了一个奇怪的错误。

当我尝试运行一个包时，我收到一个 ORA-06502 错误。当我尝试使用标准 ODP.NET 并使用 OracleDataTypes 而不是通用 DbTypes 运行包时，它工作正常。

我尝试将 Number 参数转换为 DbType.Decimal 并将 Varchar2 转换为 DbType.String。我还尝试过 VarNumeric（显然无法转换）和 AnsiString。我一直无法让程序包运行。

这是包裹的签名：

```
procedure process_Something(
    o_param1            OUT VARCHAR2,   
    o_param2            OUT VARCHAR2,   
    in_ID1              IN  NUMBER,     
    in_ID2              IN  NUMBER,     
    in_UNIQUE1          IN  VARCHAR2,   
    in_STR_PARAM1       IN  VARCHAR2,
    in_STR_PARAM2       IN  VARCHAR2,
    in_STR_PARAM3       IN  VARCHAR2,
    in_STR_PARAM4       IN  VARCHAR2,
    in_STR_PARAM5       IN  VARCHAR2,
    in_NUM_PARAM        IN  NUMBER,     
    in_STR_PARAM6       IN  VARCHAR2,
    in_STR_PARAM7       IN  VARCHAR2,
    in_STR_PARAM8       IN  VARCHAR2,
    in_STR_PARAM9       IN  VARCHAR2,
    in_STR_PARAM10      IN  VARCHAR2,
); 
```

这是我用来调用它的代码：

```
 var oComm = db.GetStoredProcCommand("APPS.MY_PACKAGE.process_Something");
      db.AddInParameter(oComm, "in_ID1", DbType.Decimal, int.Parse(item.ID1));
      db.AddInParameter(oComm, "in_ID2", DbType.Decimal, int.Parse(item.ID2));
      db.AddInParameter(oComm, "in_UNIQUE1", DbType.String, item.Unique1.Trim());
      db.AddInParameter(oComm, "in_STR_PARAM1", DbType.String, item.STR_Param1.Trim());
      db.AddInParameter(oComm, "in_STR_PARAM2", DbType.String, item.STR_Param2.Trim());
      db.AddInParameter(oComm, "in_STR_PARAM3", DbType.String, item.STR_Param3.Trim());
      db.AddInParameter(oComm, "in_STR_PARAM4", DbType.String, item.STR_Param4.Trim());
      db.AddInParameter(oComm, "in_STR_PARAM5", DbType.String, item.STR_Param5.Trim());
      db.AddInParameter(oComm, "in_NUM_PARAM", DbType.Decimal, int.Parse(string.IsNullOrEmpty(item.NumParam.Trim()) ? "0" : item.NumParam));
      db.AddInParameter(oComm, "in_STR_PARAM6", DbType.String, item.STR_Param6.Trim());
      db.AddInParameter(oComm, "in_STR_PARAM7", DbType.String, string.Empty);
      db.AddInParameter(oComm, "in_STR_PARAM8", DbType.String, item.STR_Param8.Trim());
      db.AddInParameter(oComm, "in_STR_PARAM9", DbType.String, item.STR_Param9.Trim());
      db.AddInParameter(oComm, "in_STR_PARAM10", DbType.String, item.STR_Param10.Trim());
      db.AddOutParameter(oComm, "o_param1", DbType.String, 200);
      db.AddOutParameter(oComm, "o_param2", DbType.String, 200);
      db.ExecuteNonQuery(oComm); 
```

# php - Symfony2中如何不将通知转换为ErrorException

> ID：16040124
> 
> 赞同：2
> 
> 时间：2013-04-16T14:45:54.013
> 
> 标签：php, symfony, jenkins, phpunit

Symfony2 似乎将所有通知/警告都封装到 ErrorExceptions 中。在开发过程中这是一个很好的行为，但这会导致单元测试出现一些问题。

我用 Jenkins 启动单元测试，有些课程会发出通知。这些通知被转换为异常......这会使单元测试崩溃。

我已经尝试使用 phpunit 特定参数，但它没有改变（`convertWarningsToExceptions = false`等）。

那么，如何更改此默认行为？

# android - 使用 Dagger 对构造函数进行依赖注入

> ID：16040125
> 
> 赞同：29
> 
> 时间：2013-04-16T14:45:53.713
> 
> 标签：android, dependency-injection, dagger

所以，我目前正在重新设计我的一个 Android 应用程序以使用[Dagger](http://square.github.io/dagger/)。我的应用程序又大又复杂，我最近遇到了以下情况：

对象 A 需要一个特殊的 DebugLogger 实例，它是注入的完美候选者。我可以通过 A 的构造函数注入它，而不是传递记录器。这看起来像这样：

```
class A
{
    private DebugLogger logger;

    @Inject
    public A(DebugLogger logger)
    {
        this.logger = logger;
    }

    // Additional methods of A follow, etc.
} 
```

到目前为止，这是有道理的。但是，A需要由另一个类B来构造。必须构造多个A的实例，所以按照Dagger的做事方式，我简单地将a`Provider<A>`注入B：

```
class B
{
    private Provider<A> aFactory;

    @Inject
    public B(Provider<A> aFactory)
    {
        this.aFactory = aFactory;
    }
} 
```

好的，到目前为止很好。但是等等，突然 A 需要额外的输入，例如一个称为“数量”的整数，这对其构造至关重要。现在，我的 A 构造函数需要如下所示：

```
@Inject
public A(DebugLogger logger, int amount)
{
...
} 
```

突然，这个新参数干扰了注射。此外，即使这确实有效，我也无法在从提供者检索新实例时传递“金额”，除非我弄错了。我可以在这里做几件事，我的问题是哪一个是最好的？

`setAmount()`我可以通过添加一个预期在构造函数之后调用的方法来重构 A。然而，这很丑陋，因为它迫使我延迟 A 的构建，直到填写“数量”。如果我有两个这样的参数，“数量”和“频率”，那么我将有两个设置器，这意味着要么复杂的检查以确保在调用两个 setter 后恢复 A 的构造，否则我将不得不在组合中添加第三种方法，如下所示：

```
(Somewhere in B):

A inst = aFactory.get();
inst.setAmount(5);
inst.setFrequency(7);
inst.doConstructionThatRequiresAmountAndFrequency(); 
```

另一种选择是我不使用基于构造函数的注入，而是使用基于字段的注入。但是现在，我必须公开我的领域。这不适合我，因为现在我有义务将我的班级的内部数据透露给其他班级。

到目前为止，我能想到的唯一有点优雅的解决方案是对提供者使用基于字段的注入，如下所示：

```
class A
{
    @Inject
    public Provider<DebugLogger> loggerProvider;
    private DebugLogger logger;

    public A(int amount, int frequency)
    {
        logger = loggerProvider.get();
        // Do fancy things with amount and frequency here
        ...
    }
} 
```

即使如此，我也不确定时机，因为我不确定 Dagger 是否会在调用我的构造函数之前注入提供程序。

有没有更好的办法？我只是错过了有关 Dagger 工作原理的一些信息吗？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-04-16T15:24:26.993

你所说的被称为辅助注射，目前 Dagger 不以任何自动方式支持。

您可以使用工厂模式解决此问题：

```
class AFactory {
  @Inject DebugLogger debuggLogger;

  public A create(int amount, int frequency) {
    return new A(debuggLogger, amount);
  }
} 
```

现在您可以注入这个工厂并使用它来创建以下实例`A`：

```
class B {
  @Inject AFactory aFactory;

  //...
} 
```

当您需要`A`使用您的“数量”和“频率”创建一个时，您可以使用工厂。

```
A a = aFactory.create(amount, frequency); 
```

这允许在仍然使用注入来提供记录器实例的同时拥有记录器、数量和频率字段的实例`A`。`final`

Guice 有一个辅助注入插件，它基本上可以为您自动创建这些工厂。Dagger 邮件列表上[已经讨论](https://groups.google.com/d/topic/dagger-discuss/QgnvmZ-dH9c/discussion)了添加它们的适当方式，但在撰写本文时尚未做出任何决定。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T23:16:29.823

杰克的帖子说的是完全正确的。也就是说，我们（一些与 Guice 和 Dagger 合作的 Google 人员）正在研究“辅助注入”或自动工厂生成的替代版本，它应该可由 Guice 或 Dagger 使用或独立使用——也就是说，它将为您生成工厂类源代码。这些工厂类（如果合适）将像任何标准 JSR-330 类一样可注入。但它还没有发布。

等待这样的解决方案，Jake Wharton 的方法是可取的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-14T15:17:25.600

您遇到了问题，因为您在构造函数中混合了注射剂和非注射剂。注射的一般规则可以为您节省大量的心痛并保持您的代码干净：

1.  Injectables 可以在它们的构造函数中请求其他的 injectables，但不能请求 newables。

2.  Newables 可以在其构造函数中请求其他 newables，但不能请求可注入对象。

Injectables 是服务类型的对象，即可以工作的对象，例如 CreditCardProcessor、MusicPlayer 等。

Newables 是值类型的对象，例如 CreditCard、Song 等。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-08-19T18:45:32.497

Jake 的帖子很棒，但还有更简单的方法。Google 创建了[AutoFactory](https://github.com/google/auto/tree/master/factory)库，用于在编译时自动创建工厂。

首先，创建`A`带有`@AutoFactory`注解和`@Provided`注解的类以注入参数：

```
@AutoFactory
public class A {

    private DebugLogger logger;

    public A(@Provided DebugLogger logger, int amount, int frequency) {
        this.logger = logger;
    }
} 
```

然后库`AFactory`在编译时创建类。所以你只需要将工厂注入到`B`类的构造函数中。

```
public class B {

    private final AFactory aFactory;

    @Inject
    public B(AFactory aFactory) {
        this.aFactory = aFactory;
    }

    public A createA(int amount, int frequency) {
        return aFactory.create(amount, frequency);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-04-10T20:24:48.103

> 我只是想补充一下，在这个问题发布后的几年里，现在有一个名为的库 `AssistedInject`，它是由 Square 的 Jake 和朋友创建的，用于解决完全相同的问题，并且与 Dagger 2 完全兼容。

你可以在这里找到它：[https ://github.com/square/AssistedInject](https://github.com/square/AssistedInject)

# c++ - C ++多线程互斥锁问题

> ID：16040126
> 
> 赞同：0
> 
> 时间：2013-04-16T14:45:56.823
> 
> 标签：c++, multithreading, templates, locking, std

我是 C++ 和多线程的新手。最近在看Lock属性...

假设我有一个里面有互斥锁的类。当我在互斥对象上使用 lock 方法时，如何判断代码的哪一部分被阻塞/锁定？它是阻止/锁定类中的所有成员函数还是仅阻止/锁定我触发锁定的成员函数？

例如（process_data & udf_2）

```
class data_wrapper
{
private:
    int x;
    some_data data;
    std::mutex m;
public:
    template<typename Function>
    void process_data(Function func)
    {
        std::lock_guard<std::mutex> l(m);
    ......
    }
    void udf_2(int x)
    {
        cout << "Value is " << x; 
    ......
    }
} 
```

==============================

==============================

还有一个问题是，如果我看到一个模板类型`T`，那么`T&`and是什么意思`T&&`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T14:53:29.133

互斥锁不会锁定您的对象。互斥锁提供对位于互斥锁和解锁之间的程序部分的独占访问。

如果您的程序的一个线程进入`process_data()`并正在读取某个变量，同时另一个线程进入`udf_2()`并修改同一变量，**则您的程序不是线程安全**的。换句话说，仅仅在对象内部使用互斥锁并不足以保护它。您必须通过与您的方法一样受到保护的方法对变量的访问进行通道化`process_data()`。只有这样你的程序才会是线程安全的。

我希望我说清楚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T14:48:07.550

[http://en.cppreference.com/w/cpp/thread/lock_guard](http://en.cppreference.com/w/cpp/thread/lock_guard)

正如您在链接中看到的那样，一旦程序超出范围（例如 process_data() 方法），std::lock_guard 就会被破坏。

lock_guard 不会锁定所有成员变量，而只是锁定在作用域或 process_data() 中访问的变量

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T15:00:16.263

使用

```
void process_data(Function func)
{
    std::lock_guard<std::mutex> l(m);
    ......
} 
```

意味着到达此行的任何线程都不会从锁的构造函数返回，直到任何其他超过锁创建的线程都没有退出范围。换句话说，您使用省略号表示的代码一次最多只能由一个线程执行，从而有效地序列化了对代码的访问。

# ssh - 通过以太网将 Raspberry Pi 连接到没有路由器的笔记本电脑？

> ID：16040128
> 
> 赞同：104
> 
> 时间：2013-04-16T14:46:01.290
> 
> 标签：ssh, raspberry-pi, ethernet

我正在使用 Raspberry Pi 进行气球项目。当我们有可能恢复 Raspberry Pi 时，它很可能会在农村地区，我想在那时安全地关闭 Pi。

如果附近没有路由器或网络，我想知道是否有办法将带有以太网电缆的 Raspberry Pi 直接连接到笔记本电脑？

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2016-02-20T22:39:48.643

这是我今天刚刚尝试过的 Ubuntu 的解决方案（这个想法也适用于 Windows 或 Mac），它就像一个魅力。

**材料**

1.  交叉以太网电缆（名称很花哨，但它只是普通的以太网电缆）
2.  笔记本电脑（ubuntu）
3.  一个树莓派（我有 Pi2）

**ubuntu 的先决条件**

6.  安装网络管理器

    `$sudo apt-get install network-manager`

7.  安装 nmap

    `$sudo apt-get install nmap`

**编辑笔记本电脑上的有线连接 (Ubuntu)**

8.  将 IPv4 设置更改为“共享到其他计算机”
9.  保存设置
10.  重启你的笔记本电脑

**通过以太网交叉电缆共享笔记本电脑的 WiFi 连接**

11.  使用以太网电缆将您的 RPi 与您的笔记本电脑连接起来

12.  查找以太网连接（笔记本电脑）的广播地址，

`$/sbin/ifconfig eth1 | grep "Bcast" | awk -F: '{print $3}' | awk '{print $1}'`10.42.0.255

1.  使用此地址找出您的 RPi 的 IP 地址，在我的情况下是 10.42.0.96，因为 10.42.0.1 是我的笔记本电脑

    `$nmap -n -sP 10.42.0.255/24`

> ```
>  Starting Nmap 6.40 ( http://nmap.org ) at 2016-02-20 23:07 CET
>   Nmap scan report for 10.42.0.1
>   Host is up (0.00031s latency).
>   Nmap scan report for 10.42.0.96
>   Host is up (0.0023s latency).
>   Nmap done: 256 IP addresses (2 hosts up) scanned in 2.71 seconds 
> ```

2.  从您的笔记本电脑登录到您的 RPi（-Y 与 X-forwarding）

    `$ssh -Y pi@10.42.0.96`

3.  瞧！现在您的 RPi 已连接到您的笔记本电脑，并且 RPi 可以共享 WiFi 连接。

    `pi@raspberrypi ~ $`

**与 RPi 共享笔记本电脑的显示屏和键盘**

4.  在树莓派上安装**vncserver**

    `$ sudo apt-get update`

    `$ sudo apt-get install tightvncserver`

5.  通过下载 RealVNC（它支持多个平台）在您的笔记本电脑上 安装**vncviewer** [http://www.realvnc.com/download/vnc/](http://www.realvnc.com/download/vnc/)

6.  为了能够从 VNC 服务器 <--> VNC 查看器复制和粘贴，您需要在 RPi 上安装 autocutsel。

`$sudo apt-get install autocutsel`

如果此站点不起作用，请尝试直接从镜像站点下载 .deb，例如 mirror.hmc.edu/debian/pool/main/a/autocutsel/autocutsel_0.10.0-1_armhf.deb
并安装它

`$sudo dpkg -i autocutsel_0.10.0-1_armhf.deb`

7.  在你的 RPi 上启动 vncserver（你必须在安装 autocutsel 后重新启动 vncserver，你可以发出`$vncserver -kill :1`）

    `$vncserver :1`

8.  将 autocutsel -fork 添加到 /home/pi/.vnc/xstartup

> ```
>  #!/bin/sh
>  xrdb $HOME/.Xresources xsetroot -solid grey 
>  autocutsel -fork
>  #x-terminal-emulator -geometry 80x24+10+10 -ls -title "$VNCDESKTOP Desktop" &
>  #x-window-manager &
>  # Fix to make GNOME work 
>  export XKL_XMODMAP_DISABLE=1 
>  /etc/X11/Xsession 
> ```

9.  在笔记本电脑上启动 vncviewer

    `$vncviewer`

10.  将弹出一个 vncviewer 窗口并输入您的 RPi 的 IP 地址（由您的笔记本电脑提供），然后是端口 1，这是您的 VNC 服务器。例如：在我的情况下是 10.42.0.96:1。

11.  通过输入密码将其连接到 RPi 上托管的 vncserver（自己设置密码）

    12.现在您可以在笔记本电脑上看到 RPi 的桌面，我打开浏览器显示共享 WiFi 连接正常。

[在 ubuntu 上查看 Raspberry Pi 桌面](http://i.stack.imgur.com/UiiNm.png)

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2016-08-22T18:39:04.160

**无路由器 + 无屏幕 + 普通以太网线 + RPI 2 + Raspbian Lite 2018-11-13 + Ubuntu 18.10**

首先，我们必须在 Pi 上启用 SSH 服务器，为了安全起见，默认情况下它是禁用的。

如果您已经通过非 SSH 方法（例如屏幕 + 键盘或 UART（见下文））在 Pi 上安装了 shell，只需运行：

```
sudo systemctl enable ssh
sudo service sshd start 
```

正如在：[https](https://raspberrypi.stackexchange.com/questions/58478/ssh-not-working-with-fresh-install) ://raspberrypi.stackexchange.com/questions/58478/ssh-not-working-with-fresh-install 中解释的那样，这在引导过程中仍然存在。

否则，在您的主机上插入 SD 卡，并在分区中创建一个名为`ssh`file的神奇空文件。`boot/`

在 Ubuntu 主机上，它会自动挂载，您可以执行以下操作：

```
sudo touch /media/$USER/boot/ssh 
```

您可以通过以下方式确认：

```
lsblk 
```

其中包含：

```
mmcblk0     179:0    0  14.4G  0 disk
├─mmcblk0p1 179:1    0  43.9M  0 part /media/ciro/boot
└─mmcblk0p2 179:2    0  14.4G  0 part /media/ciro/rootfs 
```

如果您未在 Pi 上启用 SSHD 守护程序，则 SSH 连接将失败，并显示：

```
ssh: connect to host 10.42.0.160 port 22: Connection refused 
```

当我们稍后尝试时。

**启用 SSH 服务器后**

接下来，启动 Pi，并将笔记本电脑的以太网电缆直接连接到 Pi：

[![在此处输入图像描述](https://i.stack.imgur.com/8C0mJ.jpg)](https://i.stack.imgur.com/8C0mJ.jpg)

在 Ubuntu 17.04 上，要解决[此答案](https://raspberrypi.stackexchange.com/questions/67594/unbuntu-17-04-direct-shared-ethernet-connection-fails-with-active-connection-co/72211#72211)中提到的[此错误](https://bugs.launchpad.net/ubuntu/+source/network-manager/+bug/1678606)，您首先需要：

```
sudo apt-get install dnsmasq-base 
```

在主机上，打开网络管理器：

```
nm-connection-editor 
```

去：

1.  `+`签名（添加新连接）
2.  以太网
3.  创造
4.  IPv4 设置
5.  方法：共享到其他电脑
6.  给它起个好名字
7.  节省

[![在此处输入图像描述](https://i.stack.imgur.com/ZU18R.png)](https://i.stack.imgur.com/ZU18R.png)

在主机上查找 Pi 的 IP：

```
cat /var/lib/misc/dnsmasq.leases 
```

输出类似：

```
1532204957 b8:27:eb:0c:1f:69 10.42.0.160 raspberrypi 01:b8:27:eb:0c:1f:69 
```

`10.42.0.160`是IP，然后像往常一样：

```
ssh pi@10.42.0.160 
```

我的还有以下内容`.bashrc`：

```
piip() ( cat /var/lib/misc/dnsmasq.leases | cut -d ' ' -f 3; )
pissh() ( sshpass -p raspberry ssh "pi@$(piip)"; ) 
```

在 Pi 内部，请注意它可以通过主机的其他接口正常访问 Internet：

```
ping google.com 
```

例如在我的笔记本电脑上，树莓派占用了以太网，但主机也通过 WiFi 连接到互联网。

如果主机网卡支持[Auto MDI-X ，则](https://en.wikipedia.org/wiki/Medium-dependent_interface#Auto_MDI-X)*不需要*交叉线。最近的硬件就是这种情况，例如我测试过的 2012 Lenovo T430，[它有](https://support.lenovo.com/gb/en/documents/pd024705)一个“Intel® 82579LM Gigabit Network Connection”，它[记录了对 Auto MDI-X 的支持](http://www.intel.com/content/dam/doc/datasheet/82579-gbe-phy-datasheet-vol-2-1.pdf)。

现在您还可以：

*   通过 Ubuntu 的 Wifi 连接从 PI 访问 Internet
*   打开一个 VNC 以摆脱显示：[https ://raspberrypi.stackexchange.com/questions/14611/how-to-set-up-raspberry-pi-without-a-monitor/54393#54393](https://raspberrypi.stackexchange.com/questions/14611/how-to-set-up-raspberry-pi-without-a-monitor/54393#54393)

**UART串口USB转换器**

如果您只想在 Pi 上获得外壳，这是 SSH 的替代方案：[https ://en.wikipedia.org/wiki/Serial_port](https://en.wikipedia.org/wiki/Serial_port)

这不使用 SSH 或网络本身，而是使用更旧、更简单、更直接、更可靠、带宽更低、距离更短的串行接口。使用此方法，Pi 将无法访问 Internet。

台式电脑仍然有一个串行端口，您可以直接将其与 Pi 线对线连接，但是这些端口隐藏在大多数笔记本电脑中，因此我们需要购买便宜的 USB 适配器。我在这里使用过：[https](https://www.amazon.co.uk/gp/product/B072K3Z3TL) ://www.amazon.co.uk/gp/product/B072K3Z3TL另见：[https ://unix.stackexchange.com/questions/307390/what-is-the-difference-between- ttys0-ttyusb0-and-ttyama0-in-linux/367882#367882](https://unix.stackexchange.com/questions/307390/what-is-the-difference-between-ttys0-ttyusb0-and-ttyama0-in-linux/367882#367882)

首先在主机上插入 SD 卡，然后编辑`config.txt`第一个分区中的文件以添加：

```
enable_uart=1 
```

如解释：[https ://www.raspberrypi.org/forums/viewtopic.php?f=28&t=141195](https://www.raspberrypi.org/forums/viewtopic.php?f=28&t=141195)

第一个分区包含引导加载程序、它的配置文件和（Linux / 你的）内核，`config.txt`它们就是其中之一。第二个分区包含实际的 Linux 根文件系统。

现在将您的计算机连接到 Pi，如下所示：

[![在此处输入图像描述](https://i.stack.imgur.com/L0XyU.jpg)](https://i.stack.imgur.com/L0XyU.jpg)

您只需要连接 3 根电缆：

*   地对地
*   Pi 上的 Tx 到 USB 上的 Rx 到串行端口
*   Rx on Pi 到 Tx on tye USB 到串口

这也记录在：[https ://www.raspberrypi.org/documentation/usage/gpio/README.md](https://www.raspberrypi.org/documentation/usage/gpio/README.md)

小心不要将接地连接到 5V，我已经通过这样做烧掉了 2 个 UART 到 USB 芯片和一个 RPI UART！

您根本不需要将 5V 连接到 5V。我认为你可以像那样为你的 Pi 供电，但我听说这是个坏主意，只需使用通常的 USB 电源即可。

最后，将连接器的 USB 端插入您的主机，并获得一个外壳：

```
sudo apt install screen
sudo usermod -a -G dialout $USER
screen /dev/ttyUSB0 115200 
```

退出`Ctrl-A \`。

这是 Adafruit 展示的视频：[https ://www.youtube.com/watch?v=zUBPeoLW16Q](https://www.youtube.com/watch?v=zUBPeoLW16Q)

**也可以看看**

RPI SE 上的类似问题：[https ://raspberrypi.stackexchange.com/questions/3867/ssh-to-rpi-without-a-network-connection](https://raspberrypi.stackexchange.com/questions/3867/ssh-to-rpi-without-a-network-connection)

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2014-01-19T07:26:42.447

您不需要交叉电缆。您可以使用普通网线，因为 Raspberry Pi LAN 芯片足够智能，可以重新配置自己以进行直接网络连接。干杯

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2016-11-15T19:43:42.940

我刚刚成功实施并测试了它。我的项目也有同样的情况，想连接到没有路由器或 wifi 的 Raspberry Pi。只是一根简单的以太网电缆。

使用 ssh putty 程序将地址设置为

*树莓派.local*

登录并登录，您可以访问终端。

或者，如果设置了 VNC 服务器，请使用 VNC 服务器并放置

*树莓派.local:1*

在服务器地址中。输入您的 VNC 服务器密码，您现在可以访问 GUI 来做您想做的事。

在可能的情况下，它是在远程位置运行脚本。在海报的情况下，安全地关闭 Pi。简单的粉刺。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2015-04-19T01:02:36.063

为您的笔记本电脑和树莓派配置静态 IP。在 rapberryPI 上进行如下配置。

```
pi@rpi>sudo nano /etc/network/interfaces 
```

然后根据需要配置以下连接到您的笔记本电脑。

```
iface eth0 inet static

address 192.168.1.81

netmask 255.255.255.0

broadcast 192.168.1.255 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-11-01T18:16:53.860

在树莓派上配置静态 IP：

```
sudo nano /etc/network/interfaces 
```

然后添加：

```
iface eth0 inet static
     address 169.254.0.2
     netmask 255.255.255.0
     broadcast 169.254.0.255 
```

然后你可以通过 ssh 访问你的树莓派

```
ssh pi@169.254.0.2 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-04-16T21:10:40.057

以下是 Windows 用户仅使用以太网电缆和 DHCP 服务器连接到 RPi 的说明。不需要交叉电缆，因为 RPi 可以处理它。我有一篇博客文章，用图片[在这里](http://matthewmoisen.com/blog/programming/raspberry-pi/how-to-connect-to-a-raspberry-pi-without-internet-using-an-ethernet-cable-and-a-dhcp-server/)记录了这一点，这可能更容易理解。

**下载**

下载[适用于 Windows 的 DHCP 服务器](http://www.dhcpserver.de/cms/)（下载链接在[此处](http://www.dhcpserver.de/cms/download/)）。解压缩 zip 文件并打开 dhcpwiz 应用程序，该应用程序将配置 DHCP 服务器。

**DHCP 服务器配置**

在第一个屏幕上点击下一步。

在第二个屏幕上，查找“本地连接”行并确认其 IP 地址为`0.0.0.0`且其状态为`enabled`。将以太网电缆从 RPi 连接到您的笔记本电脑，然后打开 Pi。在此屏幕上点击刷新，直到 IP 地址变为`169.254.*.*`。如果是其他任何东西，那么您应该更改本地连接的网络设置（确保它不是静态 IP/DNS）。单击此本地连接行，然后单击下一步。

检查`HTTP (Web Server)`。这使得定位 RPi 的 IP 地址变得更加容易。点击下一步。

采用默认设置并点击下一步，直到您进入`Writing the INI file`屏幕。检查`Overwrite existing file`并按下`Write INI file`按钮。然后点击下一步。

在最后一个屏幕上，检查`Run DHCP server immediately`并点击“完成”。

**DHCP 服务器和获取树莓派的 IP 地址**

这将使用您刚刚在上一个向导中创建的配置启动实际的 DHCP 服务器。单击该`Continue as tray app`按钮，DHCP 服务器将最小化到您的系统托盘。

从现在起 1 秒到 5 分钟的任何时间，您都会在系统托盘上看到一条警报，其中包含您的笔记本电脑和您的 RPi 的新 IP 地址。此警报非常快，您可能会错过它。通常您的 RPi 的 IP 是`169.254.0.2`，但也可能是`*.01`，甚至是其他的。在[http://localhost/dhcpstatus.xml](http://localhost/dhcpstatus.xml)访问 DHCP 服务器的 Web UI 更容易。这会将主机名列为“raspberrypi”及其 IP 地址。

现在您可以将腻子或远程桌面放入您的 RPi，并配置其无线设置或任何您想做的事情。

**故障排除**

这可能有点挑剔。我的连接似乎断开了，并且无法使用该 IP 地址通过 SSH 重新连接。通常，我可以重新启动 Pi 并再次获取 IP 地址。有时我必须重新启动 RPi 和 DHCP 服务器。有时我必须多次这样做。有一次，当我 15 分钟没有连接时，我将 dhcpsrv2.5.1 文件夹中的所有文件复制到一个新文件夹并再次尝试；它立即起作用了。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-04-17T06:46:14.110

You could use a cross-over ethernet cable - [http://en.wikipedia.org/wiki/Ethernet_crossover_cable](http://en.wikipedia.org/wiki/Ethernet_crossover_cable)

Assuming your RPi is a DCHP Client, then best to run a simple DHCP server on your notebook to assign the RPi an IP address.

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-01-26T01:21:42.230

对我有用的是 Nicole Finnie 和 Ciro Santilli 的答案以及其他地方的一些答案的组合。

# 设置 pi

我们需要做两件事：在 pi 上激活 ssh，并将 pi 配置为使用静态 ip。

## 激活 ssh

`ssh`在 sd 卡的引导**分区**（不是`/boot`根分区中的文件夹）中添加一个名为的文件。这是有据可查的其他地方。

## 静态IP

在 pi 的 SD 卡上打开`/etc/dhcpcd.conf`，取消对静态 ip 示例的注释（从第 40 行开始）。将地址设置为

```
# Example static IP configuration:
interface eth0
static ip_address=10.42.0.182/24
static routers=10.42.0.1
static domain_name_servers=10.42.0.1 8.8.8.8 fd51:42f8:caae:d92e::1 
```

# 设置您的笔记本电脑

首先，确保您`networkmanager`的笔记本电脑上安装了（带有 GUI）。然后，确保`dnsmasq`没有作为服务运行：**如果**
`systemctl status dnsmasq`
此命令显示服务已停止，那么你很好。

接下来我们要配置`networkmanager`。打开`/etc/NetworkManager/NetworkManager.conf`并在顶部添加以下两行：

```
[main]
DNS=dnsmasq 
```

然后重新启动。此步骤可能不是必需的。重新启动服务可能就足够了`NetworkManager`。现在转到`NetworkManager`GUI（通常通过屏幕角落的图标访问）并选择`Edit Connections...`在弹出的窗口中，单击`+`图标以创建新连接。选择`Ethernet`类型并按`Create...`。转到`IPv4 Settings`选项卡并选择方法`Shared to other computers`。给连接起一个好名字并保存。

连接 Raspberry Pi 并确保您的笔记本电脑使用新连接作为其以太网连接。如果是的话，你的 pi 现在应该有你的电脑给它的 ip。你可以通过第一次运行找到它`ifconfig`。这应该给你几个文本块，一个用于每个网络接口。您对类似`enp0s25`or的内容感兴趣`eth0`。它应该有一行读取类似于
`inet 10.42.0.1 netmask 255.255.255.0 broadcast 10.42.0.255`
查看广播地址的内容（在本例中`10.42.0.255`）。如果它与我的不同，请关闭 pi 并将 SD 卡放回笔记本电脑，以`static ip_address`将前三个数字与广播地址中的相同。`static routers`还将 the和 first更改`domain_name_servers`为您的笔记本电脑的`inet`地址。重新打开 pi 并连接它。再次运行`ifconfig`以查看地址没有更改。

# ssh 进入 pi

`ssh pi@10.42.0.182`
如果得到`connection refused`，则 pi 没有运行`ssh`服务器。如果你得到了`host unreachable`，我很抱歉。

希望这对某人有帮助！

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-08-10T19:40:19.357

是的，您可以将覆盆子直接连接到您的 PC，而无需路由器。为此，覆盆子和您的计算机必须位于同一子网中，并且它们都配置了静态 ip（以及两个设备之间连接的以太网电缆）。

理想的配置如下：

**eth0 上的树莓**派：IP：192.168.1.10 子网：255.255.255.0

**您的 PC：** IP：192.168.1.11 子网 255.255.255.0

要在覆盆子上设置手动 IP，您可以按照[本指南进行操作](https://www.modmypi.com/blog/how-to-give-your-raspberry-pi-a-static-ip-address-update)

在您的 PC 中，您可以在网络适配器设置中手动设置 IP，具体步骤取决于您的操作系统。

当您配置了两个静态 IP 后，您可以使用 IP 集 (192.168.1.10) 通过 SSH 连接到树莓派。

**另一种更简单的方法**是在 GPIO 上附加一个按钮来关闭树莓派！[看看这里！](http://www.instructables.com/id/Simple-Raspberry-Pi-Shutdown-Button/)

# mysql - Navicat 无法通过 ssh 连接 mysql 服务器

> ID：16040132
> 
> 赞同：4
> 
> 时间：2013-04-16T14:46:08.923
> 
> 标签：mysql, ubuntu, ssh, navicat

我可以通过 ssh 连接服务器并通过登录 mysql`mysql -u root -h localhost -p`没有任何问题。但是为什么 Navicat 的 ssh 登录不起作用呢？

服务器环境：

```
Ubuntu 10.04.1 LTS
mysql  Ver 14.14 Distrib 5.1.67, for debian-linux-gnu (i486) using readline 6.1 
```

为什么当我使用 localhost 连接 mysql 时，此错误信息会打印服务器的公共 ip？

Navicat 设置：

![在此处输入图像描述](https://i.stack.imgur.com/az845.jpg)

![在此处输入图像描述](https://i.stack.imgur.com/lzWnx.jpg)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T11:19:04.893

我看到您正在使用“公钥”方法以 root 登录 ssh。在许多系统上禁用 ssh 的根登录。您确定它可以通过常规 ssh 以 root 登录吗？

如果你可以访问 ssh_config，你可以尝试在 ssh 上启用常规的基于密码的身份验证，然后在 Navicat 中尝试，最好使用非 root 用户。

# c# - 尝试从加载的程序集调用时出现 C# 异常

> ID：16040134
> 
> 赞同：1
> 
> 时间：2013-04-16T14:46:12.613
> 
> 标签：c#, .net, .net-assembly

我手头有以下情况：2个C#文件（一个可执行文件：A.exe和一个dll：B.dll）。可执行文件为 B 加载程序集，并尝试从 B 调用构造函数（从 A 中的类获取引用）。

好吧，到目前为止，它在一般用途中都能完美运行。尝试使用 8.3 文件名路径从脚本运行 exe 时出现问题，例如：

```
start C:\testpa~1\A.exe 
```

此时加载失败，出现以下异常： Object of type 'A.IfaceModel' cannot be convert to type 'A.IfaceModel', on the line

```
fullIface = contrs[0].Invoke(new object[] { this, forceStartMenu }); 
```

据我所知，通过使用此路径运行 exe，A 中的 A 的程序集信息与 B 中的 A 的程序集信息不同，并且崩溃。

我知道不应再使用短文件名，但这是一个有效的测试用例，我想知道是否有什么可做的。

谢谢。

# javascript - 如何在 Slick Grid 上使用分组和聚合

> ID：16040140
> 
> 赞同：4
> 
> 时间：2013-04-16T14:46:38.967
> 
> 标签：javascript, jquery, slickgrid

我试图了解分组和聚合如何与光滑的网格一起工作。我有一些数据我想在树状结构中分组，有点像在这个示例页面上的完成方式：

[http://mleibman.github.io/SlickGrid/examples/example-grouping](http://mleibman.github.io/SlickGrid/examples/example-grouping)

但是，我找不到任何关于 setGrouping 或确切聚合是什么的文档。此页面没有任何文档，只有代码，没有关于代码用途或使用方式的有用评论。

有谁知道这方面的好资源？谷歌也没有给我太多信息。

例如，在这段代码中：

```
dataView.setGrouping({
getter: "duration",
formatter: function (g) {
  return "Duration:  " + g.value + "  <span style='color:green'>(" + g.count + " items)</span>";
},
aggregators: [
  new Slick.Data.Aggregators.Avg("percentComplete"),
  new Slick.Data.Aggregators.Sum("cost")
],
aggregateCollapsed: false
}); 
```

我得到了 getter 和 formatter 的用途，但聚合器的用途是什么？这实际上是在树视图中将它们组合在一起吗？我看不出百分比完成和成本在哪里发挥作用，因为它是按持续时间分组的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T18:22:16.537

让我尝试以一种你会理解的方式回答你，首先是一个定义……聚合是集合在一起形成总量的项目的集合。有问题的总数可以是所有字段的总和，一个平均值或您可能定义的其他类型的聚合器。所以基本上是按你选择的列重新分组的动作，并给出组的计算结果。好吧，现在它在 SlickGrid 的情况下是如何工作的？您需要定义要使用哪种聚合器（Avg、Sum 等），定义它们将进行计算**但**除非您将其附加到字段，否则不会显示任何内容，因此在示例中您找到了将其附加/绑定到您的列定义非常重要`groupTotalsFormatter: sumTotalsFormatter`，例如：

```
..., {id: "cost", name: "Cost", field: "cost", width: 90, sortable: true, groupTotalsFormatter: sumTotalsFormatter}, ... 
```

所以让我们回顾一下......一旦定义了聚合器`new Slick.Data.Aggregators.Sum("cost")`，它将进行计算，但除非它绑定到字段，否则不会显示任何内容。作为一个额外的选项，`aggregateCollapsed`(true/false) 是在折叠时显示组内或组外的小计（平均、总和或其他）。

# embed - 如何在 jfreechart categoryplot 中嵌入图例？

> ID：16040143
> 
> 赞同：0
> 
> 时间：2013-04-16T14:46:44.083
> 
> 标签：embed, jfreechart, legend

我想将图例嵌入到类别图中。

有一个使用 XYplot 实现的示例（[将图例嵌入到 JFreeChart 的绘图区域中](https://stackoverflow.com/questions/11320360/embed-the-legend-into-the-plot-area-of-jfreechart)）

但是，XYTitleAnnotation 只能用于 XYplot。

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T18:01:27.287

A`CategoryPlot`没有 XY 坐标的概念，但 a[`CategoryTextAnnotation`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/annotations/CategoryTextAnnotation.html)可以按照[此处](http://www.jfree.org/forum/viewtopic.php?f=3&t=4175)概述的方式定位。

# php - 复杂的日期函数 - 比较、减法

> ID：16040144
> 
> 赞同：0
> 
> 时间：2013-04-16T14:46:44.907
> 
> 标签：php, perl, awk, clock, cisco

我有一些 cisco 路由器和一个 expect 脚本，其中包括关闭日志文件并将它们存储在数据库中一段时间​​。

我的问题是没有NTP，其中一些很旧，所以电池没电了，如果重新启动，日期将恢复到石器时代，将它们送回石器时代。

即使我每次（每天）运行脚本时都设置了时钟，但如果路由器立即重新启动，日志将被记录为几年前发生的，它们将被删除。

所以我正在寻找的是将 sh 时钟与系统时间进行比较的巧妙方法，然后计算出差异并将其应用于日志以得出正确的时间。

这有点复杂，但我认为这是 Cisco 以这种格式输出的最可靠的方式：

```
sh clock
14:43:41.472 UTC Tue Apr 16 2013 
```

它的日志日期采用以下格式：

```
Jan  7 09:27:14 
```

因此，如果有人想到更好的解决方案，我会全力以赴。我目前正在使用 AWK，但 Perl 或 PHP 或其他任何东西也不错。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T15:21:30.170

[您可以使用PHP strtotime()](http://www.php.net/manual/en/function.strtotime.php)解析您的时钟，它会为您完成这项工作。这将返回一个时间戳，对当前时间做同样的事情，区分它们（时间戳只是整数），这是你的延迟。[然后，您可以使用PHP date() 函数](http://php.net/manual/en/function.date.php)重建具有良好格式的日期。

例如 ：

```
<?php
$router_clock = "14:43:41.472 UTC Tue Apr 16 2013"; // retrieve it from the router
$a_log = "Jan  7 09:27:14";

$timestamp_router_clock = strtotime($router_clock);

$timestamp_system = time(); // this gives the time of the system where the PHP script runs on

$delay = $timestam_system - $timestamp_router_clock;

$log_corrected = date("M  j s:i:G", strtotime($a_log) + $delay);
?> 
```

# python - 将 Flask 应用程序部署到 godaddy 的共享主机

> ID：16040145
> 
> 赞同：6
> 
> 时间：2013-04-16T14:46:46.913
> 
> 标签：python, cgi

我在 godaddy 获得了共享经济主机，我终于让 cgi 与 python 一起工作。我创建了一个简单的 cgi 脚本：

```
#!/../bin/python
print "Content-type: text/html\n\n"
print "<body bgcolor='000'>"
print "<font face='Courier New' color='white'>Test python page. CGI extension </font>"
print "</body>" 
```

正如您在此处看到的那样，它工作得很好： http: [//jottingdown.com/pytest.cgi](http://jottingdown.com/pytest.cgi) 现在我想部署我的 hello world 烧瓶应用程序，所以我按照烧瓶网站[http://flask.pocoo 上的指南进行操作。 org/docs/deploying/cgi/](http://flask.pocoo.org/docs/deploying/cgi/)和其他有关如何使用 cgi 部署网站的指南，但我不断收到错误 500 [http://jottingdown.com/flask/test.cgi](http://jottingdown.com/flask/test.cgi)。

我的 test.cgi 脚本：

```
#!/../bin/python   
from wsgiref.handlers import CGIHandler
from Flask_HelloWorld import app
CGIHandler().run(app) 
```

我的 Flask_HelloWorld 脚本：

```
from flask import Flask
app = Flask(__name__)

@app.route('/')
def hello_world():
    return 'Hello World!'

if __name__ == '__main__':
    app.run() 
```

有人知道我做错了什么，或者有部署到 Godaddy 的经验吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-10-05T16:19:14.370

添加`.htaccess`到网页目录

```
#.htaccess
Options +ExecCGI
AddHandler cgi-script .cgi .py 
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$  /cgi-bin/test.cgi/$1 [L] 
```

假设您有共享主机目录，例如：

```
shared_root_directory/
---- CGI-bin/
     ---- test.cgi
     ---- Flask_HelloWorld.py
---- web/
     ---- .htaccess 
```

两者都`Flask_HelloWorld.py`必须`test.cgi`是/具有“755”文件权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-23T05:31:53.500

我看到这个问题没有被接受的答案。.htaccess 文件中的目录结构和内容在共享主机中进行部署时也很重要。

下面的链接详细描述了在 Apache 共享主机中部署烧瓶应用程序

[https://medium.com/@mohdejazsiddiqui/deploy-flask-app-in-apache-shared-hosting-5b3c82c8fd5e](https://medium.com/@mohdejazsiddiqui/deploy-flask-app-in-apache-shared-hosting-5b3c82c8fd5e)

希望能帮助到你。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-09-16T21:18:49.653

您可能想了解一下：

[http://flask.pocoo.org/docs/deploying/cgi/](http://flask.pocoo.org/docs/deploying/cgi/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-07-20T08:04:40.630

vokuheila 引用的文档是可供阅读的文档，但它们并不完整。我也为 500 个错误而苦苦挣扎。请参阅我对[这个相关的 stackoverflow 问题](https://stackoverflow.com/questions/18259435/deploy-flask-application-on-11-shared-hosting-with-cgi)的帖子。

# c# - 使用 ManagementClass 将打印机添加到本地计算机

> ID：16040148
> 
> 赞同：11
> 
> 时间：2013-04-16T14:46:56.007
> 
> 标签：c#, printing

我看到参考和提示，可以使用 ManagementClass 等以编程方式将联网打印机添加到本地计算机。但是，我还没有找到任何关于这样做的实际教程。

有没有人真正使用 ManagementClass 来做到这一点？

我正在这样做：

```
var connectionOption = new ConnectionOption();
var mgmScope = new ManagementScope("root\cimv2",connectionOptions);

var printerClass = new ManagementClass(mgmScope, new ManagementPath("Win32_Printer"),null);
var printerObj = printerClass.CreateInstance();

printerObj["DeviceID"] = prnName;     //
printerObj["DriverName"] = drvName;   // full path to driver
printerObj["PortName"] = "myTestPort:";

var options = new PutOptions {Type = PutType.UpdateOrCreate};
printerObj.Put(options); 
```

所有这一切都是创建一个错误“通用故障”

我无法弄清楚我错过了什么......对此的任何帮助或想法将不胜感激。

我想我需要更好地解释我想要做什么......当所需的打印机没有绑定到打印服务器时，我需要：创建一个 tcpip 原始端口，通过 tcp/ip 连接打印机，安装驱动程序，可选默认设置。

我希望 WMI 基本上可以解决所有这些问题，但似乎并非如此。

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-16T18:52:08.090

WMI`Win32_Printer`类提供了一种方法，该方法`AddPrinterConnection`用于将网络打印机添加到本地打印机列表中。下面的代码显示了如何使用`Win32_Printer`该类连接网络打印机。

请注意，在某些情况下，`AddPrinterConnection`无法连接远程打印机。在下面的示例中，我列出了最常见的错误情况。

```
using (ManagementClass win32Printer = new ManagementClass("Win32_Printer"))
{
  using (ManagementBaseObject inputParam =
     win32Printer.GetMethodParameters("AddPrinterConnection"))
  {
    // Replace <server_name> and <printer_name> with the actual server and
    // printer names.
    inputParam.SetPropertyValue("Name", "\\\\<server_name>\\<printer_name>");

    using (ManagementBaseObject result = 
        (ManagementBaseObject)win32Printer.InvokeMethod("AddPrinterConnection", inputParam, null))
    {
      uint errorCode = (uint)result.Properties["returnValue"].Value;

      switch (errorCode)
      {
        case 0:
          Console.Out.WriteLine("Successfully connected printer.");
          break;
        case 5:
          Console.Out.WriteLine("Access Denied.");
          break;
        case 123:
          Console.Out.WriteLine("The filename, directory name, or volume label syntax is incorrect.");
          break;
        case 1801:
          Console.Out.WriteLine("Invalid Printer Name.");
          break;
        case 1930:
          Console.Out.WriteLine("Incompatible Printer Driver.");
          break;
        case 3019:
          Console.Out.WriteLine("The specified printer driver was not found on the system and needs to be downloaded.");
          break;
      }
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-07-15T16:30:19.237

我花了将近一周的时间来解决这个问题！我的目标有点复杂，我想将 C# 代码包装在一个由 SharePoint 加载项调用的 WCF 服务中，并且这个 WCF 服务应该远程调用客户端来安装打印机。因此，我努力使用 WMI。同时，我设法使用了 rundll32 解决方案（需要首先创建端口），并且还做了一个 powershell 变体，真的是最简单的：

```
$printerPort = "IP_"+ $printerIP
$printerName = "Xerox WorkCentre 6605DN PCL6"
Add-PrinterPort -Name $printerPort -PrinterHostAddress $printerIP
Add-PrinterDriver -Name $printerName
Add-Printer -Name $printerName -DriverName $printerName -PortName $printerPort 
```

真正棘手的部分是知道打印机的名称，它应该与 INF 文件中的字符串匹配！

但回到 C# 解决方案：我创建了一个以打印机名称、打印机 IP 和 managementScope 作为属性的类。和驱动程序名称 = 打印机名称

```
 private string PrinterPortName
    {
        get {  return "IP_" + printerIP; }
    }

    private void CreateManagementScope(string computerName)
    {
        var wmiConnectionOptions = new ConnectionOptions();
        wmiConnectionOptions.Impersonation = ImpersonationLevel.Impersonate;
        wmiConnectionOptions.Authentication = AuthenticationLevel.Default;
        wmiConnectionOptions.EnablePrivileges = true; // required to load/install the driver.
        // Supposed equivalent to VBScript objWMIService.Security_.Privileges.AddAsString "SeLoadDriverPrivilege", True 

        string path = "\\\\" + computerName + "\\root\\cimv2";
        managementScope = new ManagementScope(path, wmiConnectionOptions);
        managementScope.Connect();
    }

    private bool CheckPrinterPort()
    {
        //Query system for Operating System information
        ObjectQuery query = new ObjectQuery("SELECT * FROM Win32_TCPIPPrinterPort");
        ManagementObjectSearcher searcher = new ManagementObjectSearcher(managementScope, query);

        ManagementObjectCollection queryCollection = searcher.Get();
        foreach (ManagementObject m in queryCollection)
        {
            if (m["Name"].ToString() == PrinterPortName)
                return true;
        }
        return false;
    }

    private bool CreatePrinterPort()
    {
        if (CheckPrinterPort())
            return true;

        var printerPortClass = new ManagementClass(managementScope, new ManagementPath("Win32_TCPIPPrinterPort"), new ObjectGetOptions());
        printerPortClass.Get();
        var newPrinterPort = printerPortClass.CreateInstance();
        newPrinterPort.SetPropertyValue("Name", PrinterPortName);
        newPrinterPort.SetPropertyValue("Protocol", 1);
        newPrinterPort.SetPropertyValue("HostAddress", printerIP);
        newPrinterPort.SetPropertyValue("PortNumber", 9100);    // default=9100
        newPrinterPort.SetPropertyValue("SNMPEnabled", false);  // true?
        newPrinterPort.Put();
        return true;
    }

    private bool CreatePrinterDriver(string printerDriverFolderPath)
    {
        var endResult = false;
        // Inspired from https://msdn.microsoft.com/en-us/library/aa384771%28v=vs.85%29.aspx?f=255&MSPPError=-2147217396
        // and http://microsoft.public.win32.programmer.wmi.narkive.com/y5GB15iF/adding-printer-driver-using-system-management
        string printerDriverInfPath = IOUtils.FindInfFile(printerDriverFolderPath);
        var printerDriverClass = new ManagementClass(managementScope, new ManagementPath("Win32_PrinterDriver"), new ObjectGetOptions());            
        var printerDriver = printerDriverClass.CreateInstance();
        printerDriver.SetPropertyValue("Name", driverName);
        printerDriver.SetPropertyValue("FilePath", printerDriverFolderPath);
        printerDriver.SetPropertyValue("InfName", printerDriverInfPath);

        // Obtain in-parameters for the method
        using (ManagementBaseObject inParams = printerDriverClass.GetMethodParameters("AddPrinterDriver"))
        {
            inParams["DriverInfo"] = printerDriver;
            // Execute the method and obtain the return values.            

            using (ManagementBaseObject result = printerDriverClass.InvokeMethod("AddPrinterDriver", inParams, null))
            {
                // result["ReturnValue"]
                uint errorCode = (uint)result.Properties["ReturnValue"].Value;  // or directly result["ReturnValue"]
                // https://msdn.microsoft.com/en-us/library/windows/desktop/ms681386(v=vs.85).aspx
                switch (errorCode)
                {
                    case 0:
                        //Trace.TraceInformation("Successfully connected printer.");
                        endResult = true;
                        break;
                    case 5:
                        Trace.TraceError("Access Denied.");
                        break;
                    case 123:
                        Trace.TraceError("The filename, directory name, or volume label syntax is incorrect.");
                        break;
                    case 1801:
                        Trace.TraceError("Invalid Printer Name.");
                        break;
                    case 1930:
                        Trace.TraceError("Incompatible Printer Driver.");
                        break;
                    case 3019:
                        Trace.TraceError("The specified printer driver was not found on the system and needs to be downloaded.");
                        break;
                }
            }
        }
        return endResult;
    }

    private bool CreatePrinter()
    {
        var printerClass = new ManagementClass(managementScope, new ManagementPath("Win32_Printer"), new ObjectGetOptions());
        printerClass.Get();
        var printer = printerClass.CreateInstance();
        printer.SetPropertyValue("DriverName", driverName);
        printer.SetPropertyValue("PortName", PrinterPortName);
        printer.SetPropertyValue("Name", printerName);
        printer.SetPropertyValue("DeviceID", printerName);
        printer.SetPropertyValue("Location", "Front Office");
        printer.SetPropertyValue("Network", true);
        printer.SetPropertyValue("Shared", false);
        printer.Put();
        return true;
    }

    private void InstallPrinterWMI(string printerDriverPath)
    {
        bool printePortCreated = false, printeDriverCreated = false, printeCreated = false;
        try
        {                
            printePortCreated = CreatePrinterPort();
            printeDriverCreated = CreatePrinterDriver(printerDriverPath);
            printeCreated = CreatePrinter();
        }
        catch (ManagementException err)
        {
            if (printePortCreated)
            {
                // RemovePort
            }
            Console.WriteLine("An error occurred while trying to execute the WMI method: " + err.Message);
        }
    } 
```

最后安装驱动。如果它在干净的 Windows 上工作，我仍然需要进一步测试。在我的测试期间是否安装/卸载了许多驱动程序

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-29T12:47:58.873

为了做到这一点，我最终不得不做一个2步进......

首先建立一个命令行来启动：

```
rundll32.exe printui.dll,PrintUIEntry /if /b "test" /f x2DSPYP.inf /r 10.5.43.32 /m "845 PS" 
```

然后生成它：

```
 public static string ShellProcessCommandLine(string cmdLineArgs,string path)
    {
        var sb = new StringBuilder();
        var pSpawn = new Process
        {
            StartInfo =
                {
                    WorkingDirectory = path, 
                    FileName = "cmd.exe", 
                    CreateNoWindow = true,
                    Arguments = cmdLineArgs,
                    RedirectStandardInput = true,
                    RedirectStandardOutput = true,
                    UseShellExecute = false
                }
        };
        pSpawn.OutputDataReceived += (sender, args) => sb.AppendLine(args.Data);
        pSpawn.Start();
        pSpawn.BeginOutputReadLine();
        pSpawn.WaitForExit();

        return sb.ToString();
    } 
```

这似乎工作......不是理想的方法，但对于那些不在打印服务器上的打印机，它似乎可以完成这项工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-01T15:24:52.810

我想添加答案，因为还有另一种方法，微软建议现在使用 Microsoft.Management.Infrastructure 而不是 System.Management。

这是 Microsoft 文档的链接： [https ://msdn.microsoft.com/en-us/library/microsoft.management.infrastructure.aspx](https://msdn.microsoft.com/en-us/library/microsoft.management.infrastructure.aspx)

请注意，您必须在 c# 项目中添加对 Microsoft.Management.Infrastructure dll 的引用： [Microsoft.Management.Infrastructure 的位置](https://stackoverflow.com/questions/39416349/where-the-microsoft-management-infrastructure)

您可能还需要在机器上配置 winrm [https://docs.microsoft.com/en-us/windows/desktop/winrm/installation-and-configuration-for-windows-remote-management](https://docs.microsoft.com/en-us/windows/desktop/winrm/installation-and-configuration-for-windows-remote-management)

这是使用 c# 从打印服务器向本地计算机添加打印机的示例代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using Microsoft.Management.Infrastructure;
using Microsoft.Management.Infrastructure.Generic;
using Microsoft.Management.Infrastructure.Options;

namespace MMITest
{
class Program
{
    static void Main(string[] args)
    {
        using (var session = CimSession.Create("localhost"))
        {
            using (var cimMethodParameters = new CimMethodParametersCollection())
            {
                cimMethodParameters.Add(CimMethodParameter.Create("Name", @"\\PrintServerName\PrinterName", CimFlags.Parameter));
                session.InvokeMethod(@"root\cimv2", "Win32_Printer", "AddPrinterConnection", cimMethodParameters);
            }
        }

        Console.ReadLine();
    }
} 
```

}

# javascript - 在 angularJS 中编写内联 css 的更好方法？

> ID：16040149
> 
> 赞同：0
> 
> 时间：2013-04-16T14:47:00.197
> 
> 标签：javascript, angularjs, angularjs-directive

我正在AngularJS中为像这样的标签编写指令`<mytextarea class="custom_mta default_mtastyle" width="30" height="40" x="150" y="50">text here</mytextarea>`

通常我会有示例的属性，但它不是一个完整的列表，我可能没有其中的一些。我必须将它们转换为 CSS。下面的代码不能完美运行。例如，如果未定义宽度，则它应该是“自动”，而不是零，或者只是不包含在 css 部分中。

```
.directive('mytextarea', function() {
return {
  restrict: 'E',
  replace: true, 
  transclude: true,
  template: '<div ng-transclude></div>',
  link: function (scope, element, attrs) {
    /* add unique properties for this directive */
    var newcss = 'width:' + (attrs.width | 0) + 'px; height:' + attrs.height + 'px;';
    attrs.$set('style', 'color:red;' + newcss);

    /* remove attributes that are no longer needed */
    element
        .removeAttr('width')
        .removeAttr('height');

    /* and set a default class */
    attrs.$set('class', 'default_subscreen ' + attrs.class );
  }
} 
```

有没有更好的方法来写这个？我尝试了 JSON 语法：

```
var mystyle = {
    position: 'absolute',
    left: attrs.x,
    width: attrs.width
}

attrs.$set('style', mystyle); // but mystyle is an object! should I use a filter? 
```

也许我可以对这些值运行函数？就像`(attrs.width)?attrs.width:0;` 我还记得在 JS 中有些东西可以写成`var s = "my string" + (attrs.width | 0)`. 我在哪里可以获得关于它的扩展解释？我还有一些组件在它们的指令中需要类似的逻辑，我正在寻找一个优雅的解决方案。

# c# - 处理异步接收的表单数据的方法

> ID：16040151
> 
> 赞同：0
> 
> 时间：2013-04-16T14:47:07.807
> 
> 标签：c#, async-await

我无法理解 .NET 4.5 中的 async/await 功能。我在 Web API 控制器中使用下面的代码从表单中捕获多个文件以及其他一些表单数据。我无法控制表单或它如何发送数据。

我想要做的是接收文件，从表单中获取数据，基于该表单数据读取数据库，移动文件，并更新另一个数据库表。使用下面的代码，我可以轻松获取文件或表单数据。我根据表单数据中传递的 formID 从数据库中获取数据。

当我取消注释底部附近的代码以写回数据库时，我遇到了问题。如果我有三个文件，那么在 catch 块捕获异常之前，只有其中一个会被移动。我假设我的问题与 PostFile 方法是异步的事实有关。

编写此代码以使其正常工作的正确方法是什么？

```
public async Task<HttpResponseMessage> PostFile()
{
    // Check if the request contains multipart/form-data. 
    if (!Request.Content.IsMimeMultipartContent())
    {
        throw new HttpResponseException(HttpStatusCode.UnsupportedMediaType);
    }

    string root = GetRootPath();
    var provider = new MyMultipartFormDataStreamProvider(root);
    string logfile = root + "/form_data_output.txt";

    try
    {
        // Read the form data and return an async task. 
        await Request.Content.ReadAsMultipartAsync(provider);

        string form_id = provider.FormData.Get("FormId");

        string driver_id = GetDriverID(form_id);  // returns an int as a string

        string location = ConfigurationManager.AppSettings["storagePath"];
        location += form_id + "\\";

        //// make sure the new directory exists
        if (!Directory.Exists(location))
        {
            Directory.CreateDirectory(location);
        }

        var keys = provider.FormData.Keys.Cast<string>();
        foreach (var k in keys.Where(k => k.StartsWith("FormViewer") == true))
        {
            string filename = provider.FormData.Get(k) + ".pdf";
            string type_key = "FormType_" + k.Substring(k.IndexOf('_') + 1);
            string type_value = provider.FormData.Get(type_key);

            // setup the full path including filename
            string path = root + "\\" + filename;
            string newFullPath = location + filename;

            // move the file
            File.Move(path, newFullPath);
            if (File.Exists(newFullPath))
            {
                 if (File.Exists(newFullPath))
                {
                    try
                    {
                        string conn_str = ConfigurationManager.ConnectionStrings["eMaintenanceConnection"].ConnectionString;
                        using (SqlConnection conn = new SqlConnection(conn_str))
                        {
                            SqlCommand cmd = new SqlCommand("INSERT INTO eSubmittal_Document VALUES (null,@driver_id,@location,@doctype)");
                            cmd.Parameters.AddWithValue("@driver_id", driver_id);
                            cmd.Parameters.AddWithValue("@location", location);
                            cmd.Parameters.AddWithValue("@doc_type", type_value);
                            conn.Open();
                            int c = await cmd.ExecuteNonQueryAsync();
                            conn.Close();
                        }
                    }
                    catch (Exception e)
                    {
                        LogEntry(logfile, e.Message);
                    }
                }
            }
        }

        return Request.CreateResponse(HttpStatusCode.OK);
    }
    catch (System.Exception e)
    {
        return Request.CreateErrorResponse(HttpStatusCode.InternalServerError, e);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T14:52:40.303

`async`并为异步代码`await`提供*自然的程序流程*。因此，在大多数情况下，您可以按照通常的方式思考代码：

> 当我取消注释底部附近的代码以写回数据库时，我遇到了问题。如果我有三个文件，那么在 catch 块捕获异常之前，只有其中一个会被移动。

这是我从中得到的：

*   您的数据库代码正在引发异常。
*   当异常被抛出时，它离开`foreach`循环去`catch`处理程序。

没有什么出乎意料的...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T14:51:05.597

在不知道异常的情况下很难提供太多帮助，但是在异步方法中执行*同步*数据库操作对我来说似乎是个坏主意。尝试更改您的代码以使用：

```
int c = await cmd.ExecuteNonQueryAsync(); 
```

# matlab - 来自用于微控制器的 OpenCV 程序的 HEX DUMP ？[图像处理]

> ID：16040155
> 
> 赞同：-2
> 
> 时间：2013-04-16T14:47:21.970
> 
> 标签：matlab, opencv, image-processing, microcontroller, microprocessors

是否可以从用于微控制器/微处理器的 OpenCV 程序中获取 HEX DUMP？还是您强烈建议使用 MatLab ？

用于图像处理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T17:37:51.467

您的计算机和微控制器理解不同的指令集，因此**不可能**简单地将二进制代码从桌面应用程序中转储出来并放入微控制器中。

无论如何，如果您想[在微控制器中使用 OpenCV，](https://stackoverflow.com/a/10351016/176769)则需要通过称为**交叉编译**的过程为该微控制器构建 OpenCV 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T18:06:09.023

在安装 OpenCv 之前，为该微控制器/微处理器设置 CMAKE 参数。

例如： http: [//processors.wiki.ti.com/index.php/Building_OpenCV_for_ARM_Cortex-A8](http://processors.wiki.ti.com/index.php/Building_OpenCV_for_ARM_Cortex-A8)

# python - 在 Python 中重新排列元组的元组

> ID：16040156
> 
> 赞同：6
> 
> 时间：2013-04-16T14:47:24.097
> 
> 标签：python, tuples, transpose

我有一个元组的元组：

```
t = ((1, 'one'), (2, 'two')) 
```

我需要以下格式：

```
((1, 2), ('one', 'two')) 
```

我怎样才能转换它？我可以做类似的事情：

```
digits     =  tuple ( digit for digit, word in t )
words      =  tuple ( word for digit, word in t )
rearranged =  tuple ( digits, words ) 
```

但这似乎并不优雅，我想有一个更直接的解决方案。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-16T14:49:49.193

使用以下内容：

```
tuple(zip(*t)) 
```

# php - 用数组填充选择输入

> ID：16040157
> 
> 赞同：1
> 
> 时间：2013-04-16T14:47:26.287
> 
> 标签：php, mysql

我想开始说我不想使用 Javascript....

我相信我有一个正确返回的数组，但是我只在下拉列表中显示数组中的第一个条目。

这是数组的问题吗？或有这个功能？

```
foreach($array as $key=>$value){
    $html = "<option value='$key'>$value</key>";
}

echo "<select name="process">$html</select>"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T14:49:00.687

您必须使用连接运算符 ( `.`)：

```
$html = '';
foreach($array as $key => $value)
{
    $html.= "<option value='$key'>$value</option>";
}

echo "<select name=\"process\">$html</select>"; 
```

但是，查看您之前发布的函数，`mysql_fetch_assoc`一次只返回一行。相反，您需要遍历它。以下应该足够了：

```
function tasks_list($p_id) { 
    $project_tasks = array(); 
    $p_id = (int)
    $p_id; 
    $func_num_args = func_num_args(); 
    $func_get_args = func_get_args(); 

    $result = mysql_query("SELECT task_name FROM tasks WHERE project_id = $p_id");
    while($project_tasks = mysql_fetch_assoc($result))
    {
        $html.= "<option value='".$project_tasks['task_name']."'>".$project_tasks['task_name']."</option>";
    }

    echo "<select name=\"process\">$html</select>";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T14:48:59.533

```
$html = "";
foreach ($array as $key => $value){
    $html .= "<option value='$key'>$value</option>";
}
echo "<select name='process'>$html</select>"; 
```

`=`重新分配；`.=`追加

如果您使用`=`它`$html`在每次迭代中重新分配，那么`$html`它将包含最后一次迭代的结果 - 一个选项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T14:51:19.580

您需要连接字符串。在开始 for 循环之前先初始化`$html`为空字符串。

```
$html = '';
foreach($array as $key => $value)
{
    $html .= "<option value='$key'>$value</key>";
    // same as $html = $html . "<option value='$key'>$value</key>";
} 
```

**注意：**您的代码中还有一个错字：

```
echo "<select name="process">$html</select>"; 
```

应该是：

```
echo "<select name=\"process\">$html</select>"; 
```

或者

```
echo "<select name='process'>$html</select>"; 
```

如果这就是你的意思。

# ruby-on-rails - Rails Mailer “Net::OpenTimeout: execution expired” 仅在生产服务器上出现异常

> ID：16040158
> 
> 赞同：39
> 
> 时间：2013-04-16T14:47:32.560
> 
> 标签：ruby-on-rails, smtp, actionmailer, exception-notification

我在 Ubuntu 12.04 TLS VPS 上使用 Ruby MRI 2.0.0 和 Rails 3.2.12 并尝试在我的应用程序中设置电子邮件通知。**几天前它工作正常，但现在不行了。**我的虚拟主机是 OVH。

我的 SMTP 设置：

```
config.action_mailer.perform_deliveries = true
config.action_mailer.raise_delivery_errors = true

ActionMailer::Base.smtp_settings = {
  :address              => "smtp.gmail.com",
  :port                 => 587,
  :user_name            => 'sender@gmail.com',
  :password             => 'secret',
  :authentication       => 'plain',
  :enable_starttls_auto => true
} 
```

使用`RAILS_ENV=production rails console`：

```
class MyMailer < ActionMailer::Base
  def test_email
    sender     = "sender@gmail.com"
    receiver   = "receiver@example.com"
    mail from: sender, to: receiver, subject: "Hello!", body: "World!!"
  end
end
 => nil

MyMailer.test_email.deliver 
```

输出：

```
Net::OpenTimeout: execution expired
    from ~/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/2.0.0/net/smtp.rb:540:in `initialize'
    from ~/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/2.0.0/net/smtp.rb:540:in `open'
    from ~/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/2.0.0/net/smtp.rb:540:in `tcp_socket'
    from ~/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/2.0.0/net/smtp.rb:550:in `block in do_start'
    from ~/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/2.0.0/net/smtp.rb:549:in `do_start'
    from ~/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/2.0.0/net/smtp.rb:519:in `start'
    from ~/.rvm/gems/ruby-2.0.0-p0@mygemset/gems/mail-2.4.4/lib/mail/network/delivery_methods/smtp.rb:144:in `deliver!'
    from ~/.rvm/gems/ruby-2.0.0-p0@mygemset/gems/mail-2.4.4/lib/mail/message.rb:2034:in `do_delivery'
    from ~/.rvm/gems/ruby-2.0.0-p0@mygemset/gems/mail-2.4.4/lib/mail/message.rb:229:in `block in deliver'
    from ~/.rvm/gems/ruby-2.0.0-p0@mygemset/gems/actionmailer-3.2.12/lib/action_mailer/base.rb:415:in `block in deliver_mail'
    from ~/.rvm/gems/ruby-2.0.0-p0@mygemset/gems/activesupport-3.2.12/lib/active_support/notifications.rb:123:in `block in instrument'
    from ~/.rvm/gems/ruby-2.0.0-p0@mygemset/gems/activesupport-3.2.12/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
    from ~/.rvm/gems/ruby-2.0.0-p0@mygemset/gems/activesupport-3.2.12/lib/active_support/notifications.rb:123:in `instrument'
    from ~/.rvm/gems/ruby-2.0.0-p0@mygemset/gems/actionmailer-3.2.12/lib/action_mailer/base.rb:413:in `deliver_mail'
    from ~/.rvm/gems/ruby-2.0.0-p0@mygemset/gems/mail-2.4.4/lib/mail/message.rb:229:in `deliver'
    from (irb):28
    from ~/.rvm/gems/ruby-2.0.0-p0@mygemset/gems/railties-3.2.12/lib/rails/commands/console.rb:47:in `start'
    from ~/.rvm/gems/ruby-2.0.0-p0@mygemset/gems/railties-3.2.12/lib/rails/commands/console.rb:8:in `start'
    from ~/.rvm/gems/ruby-2.0.0-p0@mygemset/gems/railties-3.2.12/lib/rails/commands.rb:41:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>'2.0.0p0 :029 > 
```

我尝试了以下方法：

*   `exception_notification`几天前，宝石已添加到设置中。我试图评论它的行`Gemfile`以及它的匹配配置，然后运行`bundle install`​​. 重新启动服务器后，即使我删除并重新创建 gemset，问题仍然存在。
*   在虚拟机上测试它（与 VPS 完全相同的设置，包括 iptables 规则）：**有效**
*   禁用 iptables 规则：**不起作用**
*   使用 openssl 从 VPS 手动连接到 Gmail：**工作**（所以这不是防火墙问题 - 请参见此处：[通过命令行连接到 smtp.gmail.com](https://stackoverflow.com/questions/1516754/connecting-to-smtp-gmail-com-via-command-line)）；
*   在 Gmail 帐户选项中启用 IMAP（已禁用）：**不起作用**
*   使用其他 Gmail 帐户：**不起作用**
*   用 Ruby 1.9.3 替换 Ruby 2.0.0
*   升级到 Rails 3.2.13

有人对如何解决此问题有可能的线索吗？

谢谢！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2016-04-27T05:01:14.003

首先，使用 Telnet 进行直接连接：

```
telnet smtp-relay.sendinblue.com 587
Trying 94.143.17.4... 
```

这是基本的连接故障排除，适用于任何提供商或端口。将 SendBlue 和 587 端口替换为您的实际主机名/端口。

如果您收到此错误：

```
telnet: Unable to connect to remote host: Connection timed out 
```

那么，问题不在于 Rails。

在上面的例子中，问题出在**端口号**上。sendinblue 或 mandrill 等服务（我也相信 gmail）不再支持 587 端口。**“2525”是新的“587”**。

* * *

**如果您在 telnet 上遇到超时，请检查：**

1.  **主机名**：人们通常使用“smtp.sendinblue.com”而不是“stmp-relay.sendinblue.com”、“smtp.mandrill.com”而不是“smtp.mandrillapp.com”等等。
2.  **端口**：587 已过时。主要供应商现在使用 2525。像 DigitalOcean 这样的主要**云服务也会阻止与 587 的传出连接**。这就是为什么它可以在你的电脑上运行，但不能在你的服务器上运行。我什至不会提及“25”端口，它比 587 还要过时。此外，一些提供商使用特定的非默认端口或 imap。
3.  **ipv6 vs ipv4**：检查主机名是否被转换为 IPv4。如果没有，请尝试禁用 IPv6（请参阅其他答案）。
4.  **主机名解析**：在您知道电子邮件发送正常的机器上运行相同的 telnet 命令。检查翻译后的 ip（“正在尝试 xxx...”的 xxx 部分）是否相同。如果没有，请返回您的服务器并将主机名替换为此 ip。如果可行，请更改您的 /etc/hosts 并强制主机名使用此 IP。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-06-24T08:02:11.637

我可能有同样的问题，我的生产应用程序没有发送邮件，尽管开发中的一切工作正常。我还收到了“Net::OpenTimeout”错误。

我的问题是我在生产中使用了 Google 服务器，[它在出站连接上阻止了端口 25、465 和 587](https://developers.google.com/compute/docs/sending-mail)。

由于我使用 Mandrill 发送邮件，[我能够将连接端口从 587 切换到 2525，现在一切正常。](http://help.mandrill.com/entries/21738477-What-SMTP-ports-can-I-use-)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-10-15T09:18:10.147

这也是一个临时修复，在等待您的托管服务提供商解决问题时可能会派上用场：

将以下行添加到`/etc/sysctl.conf`：

```
#disable ipv6
net.ipv6.conf.all.disable_ipv6 = 1
net.ipv6.conf.default.disable_ipv6 = 1
net.ipv6.conf.lo.disable_ipv6 = 1 
```

现在使用以下命令重新加载 sysctl 服务：

```
sudo sysctl -p 
```

现在这些应用程序能够再次发送电子邮件。

您始终可以知道是否启用了 IPv6 呼叫

```
cat /proc/sys/net/ipv6/conf/all/disable_ipv6 
```

从终端。两个可能的答案： 0 => IPv6 已启用；1 => IPv6 禁用。

来自：[https ://serverfault.com/questions/512744/timeout-error-in-all-my-apps-for-every-call-to-smtp-servers](https://serverfault.com/questions/512744/timeout-error-in-all-my-apps-for-every-call-to-smtp-servers)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-04-22T08:34:41.587

该问题是由于生产服务器上的 IPv6 配置错误造成的，现已修复。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-04-29T09:34:47.987

您可以将 Ubuntu 配置为首选 IPv4 而不是 IPv6。通过这种方式，您将能够发送电子邮件并访问仅限 IPv6 的站点。编辑`/etc/gai.conf`并取消注释以下行：

```
precedence ::ffff:0:0/96 100 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-09-06T08:19:41.603

试试这个，如果以上都失败了

我通过在config下的application.rb中添加它来解决它

```
需要'net/http'

 需要'openssl'

 需要“解决替换”

```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-10-01T09:23:20.690

我将这些添加到 CentOS7 中的 /etc/gai.conf 并且它工作。

```
label       ::1/128        0
label       ::/0           1
label       2002::/16      2
label       ::/96          3
label       ::ffff:0:0/96  4
precedence  ::1/128        50
precedence  ::/0           40
precedence  2002::/16      30
precedence  ::/96          20
precedence  ::ffff:0:0/96  100 
```

[http://blog.asiantuntijakaveri.fi/2014/12/prefer-ipv4-over-ipv6-on-centos-6.html:title](http://blog.asiantuntijakaveri.fi/2014/12/prefer-ipv4-over-ipv6-on-centos-6.html:title)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-06-18T10:51:52.673

如果您（或在这种情况下是互联网，因为此问题是此问题的第一个结果）正在测试 Mailgun，如果您使用的是 port ，您可能会收到此错误`25`。将端口更改为`587`工作，即使他们的文档/快速链接说`25`可以使用。

# css - 无法在 Firefox 中选择表单？

> ID：16040163
> 
> 赞同：1
> 
> 时间：2013-04-16T14:47:43.740
> 
> 标签：css, forms, firefox

[http://jsfiddle.net/gBG65/4/](http://jsfiddle.net/gBG65/4/)

在模拟我的实际项目时，我们在 div 中有一个文本输入。div 和其中的所有其他内容都*必须是 unselectable*，因此它的 CSS。**但是表单不应该是那样的，因此它的 CSS，**但无论如何它是。即使我检查该元素，它正确继承了所有内容并且应该可以正常工作，但它仍然无法选择。

这只是火狐。

任何解释或修复？

```
div * {
    -moz-user-select: -moz-none;
    cursor:default;
}

input {
    cursor: auto;
    -moz-user-select: -moz-user-select:text;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T15:02:29.223

如果您阅读[文档](https://developer.mozilla.org/en-US/docs/CSS/user-select?redirectlocale=en-US&redirectslug=CSS/-moz-user-select)

你可以看到它是`-moz-none;`

并重新启用使用：`-moz-user-select: text;`

同时删除`*`...

[例子](http://jsfiddle.net/gBG65/)

# php - PHP 将 mySQL 结果输出到可排序的列中

> ID：16040164
> 
> 赞同：1
> 
> 时间：2013-04-16T14:47:44.217
> 
> 标签：php, mysql, listview, jquery-ui-sortable, multiple-columns

我的应用程序执行一个查询，将其结果返回到`listview`. 结果当前显示在一`single`列中，行数根据查询结果而定。单列显示每位患者的患者姓名和出生日期。

我想让我的结果显示在`two`列中，第一个将包含姓名和第二个出生日期。我还需要允许用户`sort`按任一列访问结果行。我已经尝试将表格合并到我的代码中并重新安排我的设置，`<UL>`但我无法得到任何工作。

这是我的查询/行输出代码：

```
if(isset($_POST['dt']) && $_POST['dt'] != '')
{
  $dts = $_POST['dt'];
  $dts = mysql_real_escape_string($dts);
  $edit_date = str_replace("/", "-", $dts);
  $edit_date = explode(" ", $edit_date);
  $edit_date = explode("-", $edit_date[0]);
  $string = $edit_date[2] . "-" . $edit_date[0] . "-" . $edit_date[1];
  $query = "select * from VISIT JOIN PATIENT ON VISIT.PATIENT_ID=PATIENT.ID where VISIT.VISIT_DATE like '%".$string."%' ORDER BY PATIENT.LAST_NAME;";

  $res = mysql_query($query);
  $count = mysql_num_rows($res);
  $i = 0;
  if($count > 0)
  {
    $previous_letter = '';
    while($row = mysql_fetch_array($res))
    {
    $id = $row['ID'];
    $letter = strtoupper(substr($row['LAST_NAME'],0,1));
    echo "<li data-theme=\"c\" id=\"patient_name\">\n";
    echo "<a href=\"deeschdeesch.php?id=" . $id . "&fname=" . $row['FIRST_NAME'] . "&lname=" . $row['LAST_NAME'] . "\" rel=\"external\">\n";
    $date = $row['BIRTH_DATE']; 
    $date = explode(" ", $date);
    $date = explode("-", $date[0]);
    echo ucwords(strtolower($row['FIRST_NAME'] . " " . $row['LAST_NAME'])) . " - " . $date[1] . "-" . $date[2] . "-" . $date[0];
    echo "</a>\n";
    echo "</li>\n";
    $i++;
    }
  }
  else
  {
    $edit_date = str_replace("/", "-", $dts);
    $edit_date = explode(" ", $edit_date);
    $edit_date = explode("-", $edit_date[0]);
    $string = $edit_date[2] . "-" . $edit_date[0] . "-" . $edit_date[1];
    echo "<div id='no_result'>There were " . $count . " results found, but the input was " . $string . "</div>";
  }
} 
```

结果在这里输出：

```
<div data-role="content" style="padding: 15px">
    <ul class="ui-body ui-body-d ui-corner-all" id="results" data-role="listview" data-divider-theme="b" data-filter-theme="a" data-inset="true" data-filter="false">
    </ul>
</div> 
```

涉及的JS：

```
$(function(){
  $('#datepicker').datepicker({
      inline: true,
      showOn: "button",
      buttonImage: "images/calendar.gif",
      showAnim: "slideDown",
      changeMonth: true,
      showOtherMonths: true,
      selectOtherMonths: true,
      onSelect: function(dateText, inst) {
      var dt = dateText;

      if(dt != '')
       {
        $.ajax
        ({
        type: "POST",
        url: "search_date.php",
        data: "dt="+ dt,
        success: function(option)
        {
          $("#results").html(option).listview("refresh");
        }
        });
       }
       else
       {
         $("#results").html("");
       }
      return false;
      }
  });
}); 
```

谁能指出我如何将结果分成多列和/或使它们可排序的正确方向？请和谢谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T21:11:29.377

There are many javascript plugins out there to fulfil the result you want. Take a look at these two:

1.  [tablesorter](http://tablesorter.com/) - tablesorter is a jQuery plugin for turning a standard HTML table with THEAD and TBODY tags into a sortable table without page refreshes;
2.  [DataTables](http://www.datatables.net/) - DataTables is a plug-in for the jQuery Javascript library. It is a highly flexible tool, based upon the foundations of progressive enhancement, which will add advanced interaction controls to any HTML table.

# mysql - 在 MYSQL 中，我们可以使用普通的 SELECT SQL 而不是使用存储过程来进行循环吗？

> ID：16040165
> 
> 赞同：2
> 
> 时间：2013-04-16T14:47:46.817
> 
> 标签：mysql, sql, loops

好吧，她是我的问题。我有一个有 3 列的表：C1、C2、C3

```
C1 - C2 - C3
 M - 是 - M1
N2 - 是 - N3
M2 - 是 - M3
M3 - 是 - M4
N1 - 是 - N2
M1 - 是 - M2
 N - 是 - N1

```

所以当用户搜索“M1”时，系统会显示：

```
M1
M2
M3
M4

```

当用户搜索“M3”时，系统会显示：

```
M3
M4

```

当用户搜索“N”时，系统会显示：

```
ñ
N1
N2
N3

```

显然，这种查询需要某种循环，即搜索“is”之后的任何单词，然后不断地搜索该单词之后的单词。

我想在 MySQL 中使用普通的“选择 SQL”，而不是使用存储过程来完成这项任务。但我不知道该怎么做。

我们必须使用“WITH”关键字吗？

如何在不使用存储过程的情况下进行上述查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T17:13:47.207

因此，坚持不使用存储过程的要求，可以使用以下查询：

```
SELECT t1.C1 AS Value1, t2.C1 AS Value2, t3.C1 AS Value3, t4.C1 AS Value4
FROM your_table t1
LEFT JOIN your_table t2 ON t1.C3=t2.C1
LEFT JOIN your_table t3 ON t2.C3=t3.C1
LEFT JOIN your_table t4 ON t3.C3=t4.C1 
```

它将返回诸如`M1 M2 M3 M4`. 如果您需要“循环”更多，您可以`LEFT JOIN`在查询中添加另一个：

```
SELECT t1.C1 AS Value1, t2.C1 AS Value2, t3.C1 AS Value3, t4.C1 AS Value4, t5.C1 AS Value5
FROM your_table t1
LEFT JOIN your_table t2 ON t1.C3=t2.C1
LEFT JOIN your_table t3 ON t2.C3=t3.C1
LEFT JOIN your_table t4 ON t3.C3=t4.C1
LEFT JOIN your_table t5 ON t4.C3=t5.C1 
```

[但是，您可以通过这种方式加入的表格数量将受到限制](http://dev.mysql.com/doc/refman/5.6/en/joins-limits.html)：

> 单个连接中可以引用的最大表数为 61。

您将需要使用服务器端语言 (PHP?) 来检查 Value2、Value3...ValueN 是否为空。

我的建议是使用存储过程，或者更改表模式以避免以这种方式在表中循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T15:05:57.727

您*可以*使用递归 CTE 完成此任务；不幸的是，mysql 还不支持这些。

但是，我向您提出，您有一个更大的问题，因为您正在实施称为“朴素树”的经典 SQL 反模式；我强烈建议您查看 slidedeck [SQL Anti-Patterns Strike Back](http://www.slideshare.net/billkarwin/sql-antipatterns-strike-back) - 特别是从幻灯片 48 开始的部分，作者将提供可行的替代方案，使您的问题更容易封装在数据库支持的 SQL 子集中。

# c++ - 指针和副本

> ID：16040166
> 
> 赞同：0
> 
> 时间：2013-04-16T14:47:52.427
> 
> 标签：c++, reference, copy

我从 C++ 开始，我对指针和它的副本有一些疑问。

我要写一个例子：

```
class Abc{
  Qwe q;
}

Abc* a = new Abc();
Abc* b = new Abc();
b->q = a->q; //?? 
```

那个任务会发生什么？'a' 是否将 'q' 的副本提供给 'b'？

问题是我希望两个指针都有不同的“q”，但我不知道如何复制它。是不是像例子中的那样？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T14:50:37.977

您有未定义的行为，因为您正在取消引用未初始化的指针。这些指针实际上还没有指向任何地方。您需要创建一些`Abc`对象以供它们指向。一种方法是：

```
Abc a_object;
Abc b_object;
Abc* a = &a_object;
Abc* b = &b_object; 
```

完成此操作后，您的赋值表达式将复制`a->q`到`b->q`. 究竟会发生什么取决于`Qwe`（它可以简单地复制值`a->q`或调用复制赋值运算符）的定义。

相反，如果您的类中有一个`Qwe*`，您将只是复制该指针而不是它指向的对象。C++ 默认为值语义，这意味着事物是被复制的。即使您复制一个指针以便获得另一个指向与原始对象相同的对象，您仍然在*复制*该指针。要确定正在复制的内容，您需要做的就是查看作业右侧的内容。在这里我们可以看到它是`a->q`并且我们知道它`a->q`是一个`Qwe`所以`Qwe`对象被复制了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-16T14:52:13.933

在这种情况下，您正在访问未分配的指针，因此未定义结果

```
class Abc{
  Qwe q;
}

Abc* a = new Abc();
Abc* b = new Abc();

b->q = a->q; //This would now invoke the copy assignment or the copy constructor (depending
             // on what the compiler want to do) of class Qwe 
```

如果你想控制发生的事情，你应该为 Abc 定义一个复制构造函数和一个复制赋值运算符

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-16T14:51:21.840

答案取决于`Qwe`. 如果它是普通类型，则将调用其赋值运算符，它将以特定于您的类的方式进行复制（默认情况下，这是原始类型的简单复制，然后是非原始类型的复制构造函数）。

如果`Qwe`是`typedef`-ed 指针类型，则将制作该指针的副本。

PS我假设您在取消引用它们之前分配`a`了`b`一些指向对象的有效指针。

# apache - 防止外部访问执行代码

> ID：16040167
> 
> 赞同：0
> 
> 时间：2013-04-16T14:47:52.833
> 
> 标签：apache, .htaccess

这是我的目录结构

```
root
    private
    public 
```

使用 .htaccess 和/或 httpd.conf，我想将对私有文件夹的访问限制为仅从根文件夹执行的代码。因此，无法从外部访问私人文件夹中的任何内容。老实说，我尝试了很多选择，但似乎没有任何效果。

我的测试环境是 XAMPP - 安装在我的本地机器上。

**编辑**

我遇到的问题之一是使用了错误的目录路径。我只用 phpinfo() 创建了一个简单的 PHP 页面

```
<?php
phpinfo();
?> 
```

在**PHP 变量**部分，我查找了**_SERVER["CONTEXT_DOCUMENT_ROOT"]**。我将它用于目录路径，然后添加**私有**（我想限制访问的根目录中的文件夹）。因此，我在 httpd.conf 中完成的代码如下：

```
<Directory "E:/xampp/htdocs/home/private">
    Order deny,allow
    Deny from all
</Directory> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T15:21:15.263

使用[`Order deny,allow`](http://httpd.apache.org/docs/current/mod/mod_access_compat.html#order)and[`Deny from all`](http://httpd.apache.org/docs/current/mod/mod_access_compat.html#deny)应该已经足够了

```
Order deny,allow
Deny from all 
```

如果你把它放在`private`文件夹中的 .htaccess 中，所有来自外部的访问都将被禁止。

或者，你可以把它放在[`<Directory /path/to/root/private>`](http://httpd.apache.org/docs/current/mod/core.html#directory)httpd.conf中，效果一样

```
<Directory /path/to/root/private>
    Order deny,allow
    Deny from all
</Directory> 
```

**更新**：

根据[Apache HTTP Server Tutorial: .htaccess files](http://httpd.apache.org/docs/current/howto/htaccess.html)你应该更喜欢 httpd.conf 而不是 .htaccess files

> 如果您有权访问 httpd 主服务器配置文件，则应完全避免使用 .htaccess 文件。使用 .htaccess 文件会降低 Apache http 服务器的速度。您可以包含在 .htaccess 文件中的任何指令都最好设置在 Directory 块中，因为它具有相同的效果并具有更好的性能。

# drupal - Drupal：hook_menu 问题

> ID：16040172
> 
> 赞同：0
> 
> 时间：2013-04-16T14:48:17.687
> 
> 标签：drupal, hook-menu

我试图添加这样的链接：

```
 $items['channel/%'] = array(
    'title' => t('channel'),
    'page callback' => 'ptt_get_channel_list',
    'access arguments' => array('access content'),
    'type' => MENU_CALLBACK,
); 
```

但是当我添加这个链接时，我无法访问 adming/config 菜单。

我有几个这样的链接：

```
 $items['ptt/items'] = array(
    'title' => t('channel'),
    'page callback' => 'ptt_get_items',
    'access arguments' => array('access content'),
    'type' => MENU_CALLBACK,
);

$items['ptt/items/detail'] = array(
    'title' => t('channel'),
    'page callback' => 'ptt_get_items_details',
    'access arguments' => array('access content'),
    'type' => MENU_CALLBACK,
); 
```

现在，当我再添加一个链接时，我无法访问 adming/config。为什么？

# entity-framework - DBContext 在更新时不更新外键

> ID：16040175
> 
> 赞同：1
> 
> 时间：2013-04-16T14:48:23.320
> 
> 标签：entity-framework, foreign-keys, dbcontext

我们正在从 EF4 迁移到 EF5，其中一部分是从 POCO 生成器创建的类迁移到 DBContext 生成的类。但是，我们现在看到没有在更新时设置外键的问题。

我有以下

```
 public abstract partial class Contact
    {
      public string FirstName { get; set; }
      public string LastName { get; set; }
      public Nullable<int> AddressID { get; set; }

      public virtual Address Address { get; set; }
    }

    public partial class UserContact : Contact
    {
      public string Description { get; set; }
      public string Notes { get; set; }
    }

    public partial class Address
    {
      public string Line1 { get; set; }
      public string Line2 { get; set; }
    } 
```

如果我在第一个操作中创建一个没有地址的联系人，然后在下一个操作中更新联系人以添加地址，则不会填充联系人中的 AddressID - 它仍然为空。所以，当我这样做时：

```
 UserContact contact = new UserContact
    {
      FirstName = "fname",
      LastName = "lname"
    };
    int contactID = _contactAccessor.AddContact(contact); // add contact no address

    UserContact retContact = m_contactAccessor.GetContact(contactID);
    retContact.Address = new Address
    {
      Line1 = "line1",
      Line2 = "line2",          
    };        
    m_contactAccessor.UpdateContact(retrievedContact); // add an address to the contact 
```

在 ContactAccessor 中，我的 UpdateContact 方法执行以下操作：

```
 public void UpdateContact(UserContact userContact)
   {
      UserContact retrievedContact = (from c in context.Contact.OfType<UserContact>()
                               .Include(c => c.Address)
                                where (c.ID == userContact.ID)
                                select c).FirstOrDefault());

      retrievedContact.Address = userContact.Address;
      context.Entry<Contact>(retrievedContact).CurrentValues.SetValues(userContact);
      context.SaveChanges());
    } 
```

如果我查看数据库，联系人已创建，新地址也是如此，但联系人上的 AddressID 为空，因此联系人与地址没有关联。我不确定我做错了什么。

# intellij-idea - 有没有人将 IntelliJ 用于客户端降价编辑器？

> ID：16040176
> 
> 赞同：4
> 
> 时间：2013-04-16T14:48:28.600
> 
> 标签：intellij-idea, markdown

有没有人将 IntelliJ 用于客户端降价编辑器？

我使用 IntelliJ IDEA 进行编程，但想用它来编辑我的 markdown 文件，有人试过吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T18:10:09.700

有一个[Markdown 插件](http://plugins.jetbrains.com/plugin?pluginId=5970)似乎是您正在寻找的，这是您需要的吗？

编辑：插件现已停产，[这是另一个](https://plugins.jetbrains.com/plugin/7793)

# c - 可能不一致的铸造行为

> ID：16040184
> 
> 赞同：5
> 
> 时间：2013-04-16T14:48:51.937
> 
> 标签：c, gcc, mingw-w64

GCC 4.8.0 编译为 32 位。

我发现案例**2**和**6**的行为令人困惑：

```
int16_t s16 = 0;
double dbl = 0.0;

s16 = (int16_t)((double)32767.0); // 1: s16 = 32767
s16 = (int16_t)((double)32768.0); // 2: s16 = 32767
s16 = (int16_t)((double)-32768.0); // 3: s16 = -32768
s16 = (int16_t)((double)-32769.0); // 4: s16 = -32768

dbl = 32767.0;
s16 = (int16_t)dbl; // 5: s16 = 32767
dbl = 32768.0;
s16 = (int16_t)dbl; // 6: s16 = -32768  
dbl = -32768.0;
s16 = (int16_t)dbl; // 7: s16 = -32768
dbl = -32769.0;
s16 = (int16_t)dbl; // 8: s16 = -32768 
```

我意识到它的实现已定义，但一致性仍然很好。谁能解释发生了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T14:54:34.810

根据 6.3.1.4 (1)，行为不是实现定义的，它是未定义的：

> 如果整数部分的值不能用整数类型表示，则行为未定义。^(61))
> 
> ^(61))将整数类型的值转换为无符号类型时执行的求余运算不需要在将实浮点类型的值转换为无符号类型时执行。因此，可移植实浮点值的范围是`(−1, Utype_MAX+1)`。

该段落在 C99 中是相同的，只是脚注的编号不同（50）。

对于未定义的行为，在编译时评估的表达式的行为与运行时评估的行为不同的情况并不少见，例如

```
1 << width_of_type 
```

如果移位距离作为常数表达式给出，则通常评估为 0，如果它是运行时值，则通常评估为 1。

据我所知，导致同一代码出现不同行为的原因是，由于未定义的行为是编译器生成任何东西的许可，它也可以做最简单和/或最快的事情，以及最简单的/fastest 编译期间的事情可能与运行时最简单/最快的事情不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T15:45:20.387

正如已经回答的那样，“未定义”并不意味着“实现定义”。

如果您的值存在超出限制的风险，则应在转换前验证范围。或者你可以使用一些库，例如使用像 itrunc(double) 这样的 boost 数学函数，当超出范围时你应该得到 boost::math::rounding_error （不幸的是我不知道你是否可以让它与你的 int16_t 一起工作）。

[http://www.boost.org/doc/libs/1_53_0/libs/math/doc/sf_and_dist/html/math_toolkit/utils/rounding/trunc.html](http://www.boost.org/doc/libs/1_53_0/libs/math/doc/sf_and_dist/html/math_toolkit/utils/rounding/trunc.html)

对于行为可能不同的原因：也许实现复制了表示该值的位，它意识到它超出了范围并且它退出而不关心保持设置为随机值的符号位。

# android - 在应用程序中集成 facebook 按钮

> ID：16040191
> 
> 赞同：1
> 
> 时间：2013-04-16T14:49:05.663
> 
> 标签：android, facebook

我需要在我的应用程序上集成一个“在 Facebook 上分享”按钮.. 遵循本指南

[在此处输入链接描述](http://blog.doityourselfandroid.com/2011/02/28/30-minute-guide-integrating-facebook-android-application/)

我在按钮上添加了一个侦听器，并在“onClick”中写道：

```
private static final String FACEBOOK_APPID      = "00000";
private static final String FACEBOOK_PERMISSION = "publish_stream";

    FacebookConnector facebookConnector = new FacebookConnector(FACEBOOK_APPID, activity, context, new String[] { FACEBOOK_PERMISSION });

    facebookConnector.login();

    //facebookConnector.postMessageOnWall("weeee"); 
```

我知道 APPID 号码，但是……facebook_permission (publish_stream) 是什么？

```
if I try without the facebook_permission I get a null pointer exception 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:56:46.467

权限定义了您的应用程序被允许执行的操作

*   贴在墙上
*   阅读朋友状态（或类似的）

看这里：http: [//developers.facebook.com/docs/howtos/androidsdk/3.0/fetch-user-data/#step2](http://developers.facebook.com/docs/howtos/androidsdk/3.0/fetch-user-data/#step2)

您在代码中添加您的权限，例如

```
((com.facebook.widget.LoginButton) findViewById(YourLogInId)).setPublishPermissions(Arrays
        .asList("publish_stream")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T14:57:24.257

Facebook 上的权限基本上是询问用户您/您的应用程序试图完成什么。在您的示例中，您注意到了 publish_stream。这允许您通过您的应用在用户的墙上发布。另一个经常使用的权限是`email`.

请查看[https://developers.facebook.com/docs/reference/login/#permissions](https://developers.facebook.com/docs/reference/login/#permissions)并找到您要使用的权限:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T15:00:03.097

# 推荐

而不是创建一个 Facebook 分享按钮，你应该只使用一个基本的 Intent，使用`ACTION_SEND`一个按钮的点击动作。

这是因为如果用户没有 Facebook，那么您的应用程序将无法按预期工作，除非您添加一些特殊逻辑来检测是否安装了 Facebook 应用程序。

这是 ACTION_SEND 的最初原因。也许用户有 Twitter 而不是 facebook，你是说如果用户想在 Twitter 上分享他们不能？这似乎是一个不必要的限制。

我建议采用这种方法： [How to add Facebook Share button in Android Application](https://stackoverflow.com/questions/13396372/how-to-add-facebook-share-button-in-android-application)

## 关于你的问题

权限是由 facebook 应用程序定义的访问特定数据的权限。如果你想要用户的电子邮件，你会请求电子邮件权限，如果你想阅读提要，你需要提要权限。花一些时间阅读文档：

[https://developers.facebook.com/docs/](https://developers.facebook.com/docs/)

# mod-rewrite - 为 SEO 友好的 URL 重写简单的 html 文件

> ID：16040193
> 
> 赞同：0
> 
> 时间：2013-04-16T14:49:13.117
> 
> 标签：mod-rewrite, seo

我有一个简单的文件 mydomain.com/business_nottingham.html，我想将其重新写入一个 SEO 友好的 URL，例如 mydomain.com/business-nottingham/

我搜索了所有示例，但它们似乎是为 CMS 或 PHP 脚本设计的。

是否有一个简单的 .htaccess 重写示例可以让我像上面那样做一些非常简单的事情？

编辑：我终于设法找到以下代码

```
Options +FollowSymlinks
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)\.html$ /$1 [L,R=301] 
```

但是，它仍然无法正常工作。如果我输入整洁的 URL，我会被重定向到 404 页面，但是输入准确的 .html 文件名可以让我找到正确的文件，但不会为我提供干净的 url。

我通过阅读各种文章和教程尝试了上述各种组合，但由于某种原因，它似乎对我不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T17:44:21.347

您只想在实际请求`.html`文件时重定向，然后您想在内部重写到 html 文件。URL 解析的方式是浏览器显示它认为它要去的地方（地址栏中的 URL），然后向 Web 服务器发出请求。如果网络服务器（htaccess 文件所在的位置）想要更改浏览器 URL 地址栏中的内容，它需要告诉浏览器从字面上加载一个完全不同的 URL。然后浏览器将*请求新的 URL*。然后服务器必须在内部将该 URL 重写回实际资源所在的位置（第一个 URL），但浏览器没有看到这种情况发生。

```
RewriteEngine On

RewriteCond %{THE_REQUEST} ^(GET|HEAD)\ /([^\ ]+)\.html
RewriteRule ^ /%2/ [L,R=301]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} ^/(.*?)/?$
RewriteCond %{DOCUMENT_ROOT}/%1.html -f
RewriteRule ^ /%1.html [L] 
```

# boost - boost::serialization 在基类 ptr XML 序列化上抛出“输入流错误”

> ID：16040195
> 
> 赞同：2
> 
> 时间：2013-04-16T14:49:13.860
> 
> 标签：boost, xml-serialization, boost-serialization

我在这里做错了吗？如果我删除首先序列化基础的注释，它会起作用，否则我会收到错误：

```
terminate called after throwing an instance of 'boost::archive::archive_exception'
    what():  input stream error
Aborted 
```

这是代码：

```
struct A
{
    virtual ~A() {};

    int i1 = 10;

    friend class boost::serialization::access;
    template <class Archive>
    void serialize(Archive& ar, const unsigned int version)
    {
        ar & make_nvp("int", i1);
    }
};
struct B : A
{
    virtual ~B() {};

    float f1 = 5.0F

    friend class boost::serialization::access;
    template <class Archive>
    void serialize(Archive& ar, const unsigned int version)
    {
        ar & boost::serialization::base_object<A>(*this);
        ar & make_nvp("float", f1);
    }
};
struct C : A
{
    virtual ~C() {};

    long l1 = 24;

    friend class boost::serialization::access;
    template <class Archive>
    void serialize(Archive& ar, const unsigned int version)
    {
        ar & boost::serialization::base_object<A>(*this);
        ar & make_nvp("long", l1);
    }
};

//Why do these need to be wrappers??
namespace boost
{
namespace serialization
{
template<> struct is_wrapper<A*> : mpl::true_ {};
template<> struct is_wrapper<A> : mpl::true_ {};
template<> struct is_wrapper<const A> : mpl::true_ {};
}
}

BOOST_SERIALIZATION_ASSUME_ABSTRACT(A);
BOOST_CLASS_EXPORT(B)
BOOST_CLASS_EXPORT(C)

int main(int argc, char** argv)
{
    //A* a = new A();
    A* b = new B();
    A* c = new C();
    //A* a1 = nullptr;
    A* a2 = nullptr;
    A* a3 = nullptr;

    ostringstream ostream;
    xml_oarchive oarchive(ostream);

    oarchive << /*BOOST_SERIALIZATION_NVP(a) <<*/ BOOST_SERIALIZATION_NVP(b) << BOOST_SERIALIZATION_NVP(c);

    istringstream istream(ostream.str());
    xml_iarchive iarchive(istream);

    iarchive >> /*BOOST_SERIALIZATION_NVP(a1) >>*/ BOOST_SERIALIZATION_NVP(a2) >> BOOST_SERIALIZATION_NVP(a3);

    //delete a;
    delete b;
    delete c;
    //delete a1;
    delete a2;
    delete a3;
} 
```

相同的代码在两种情况下都适用于文本和二进制存档......

**编辑：**这是使用 Boost 1.53 和 GCC 4.8 w/std=c++11

# kineticjs - kinetic.js 加载阶段...丢失的参考资料

> ID：16040200
> 
> 赞同：2
> 
> 时间：2013-04-16T14:49:34.587
> 
> 标签：kineticjs

我在理解 Kinetic.Node.create(myJson, 'container') 函数的工作原理时遇到了问题。

我有一个简单的项目。生成一个 circleLayer 并添加一个圆。现在我可以通过 circleLayer.removeChildren(); 删除圆圈；但是当我将舞台保存到 JSON 并重新加载它时，对圆圈的引用丢失了……现在我不能再删除它了……这是我的代码。

有人有想法吗？

```
var myJson;
var stage;
var circleLayer;
var myWidth = 500;
var myHeigth = 350;

function createStagesAndLayer() {

    stage = new Kinetic.Stage({
        container: 'container',
        width: myWidth,
        height: myHeigth
    });

    circleLayer = new Kinetic.Layer();
    stage.add(circleLayer);
}
function deleteCircle() {
    circleLayer.removeChildren();
    circleLayer.draw();
}
function saveData() {
    myJson = null;
    myJson = stage.toJSON();
}function loadData() {
    if (myJson == null) {
        alert("Keine Daten gefunden!!");
        return;
    }

   // I need to remoce it...otherwise my drawing area will grow. But I think here somewhere is the problem
    stage.remove(circleLayer);
    stage = Kinetic.Node.create(myJson, 'container');
}
function generateCircle() {
   var  circle = new Kinetic.Circle({
        x: stage.getWidth() / 2,
        y: stage.getHeight() / 2,
        radius: 30,
        fill: 'red',
        stroke: 'black',
        strokeWidth: 2,
        draggable: true
    });
    circleLayer.add(circle);
    circleLayer.draw();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T09:34:35.293

来自 KineticJS[文档](http://kineticjs.com/docs/symbols/Kinetic.Node.php#.create)：

> Kinetic.Node.create(JSON, container) 使用 JSON 字符串创建节点。反序列化不会生成自定义形状绘制函数、图像或事件处理程序（这会使序列化对象变得巨大）。如果您的应用程序使用自定义形状、图像和事件处理程序（可能会），那么您需要在加载舞台后选择适当的形状并通过 on()、setDrawFunc() 和 setImage() 方法设置这些属性

所以我相信，局部变量赋值的变量也不起作用，因此你的问题。我正在做一个类似的项目，你的问题让我担心另一个问题:(但是+1提醒:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:02:47.640

这取决于您调用函数 saveData() 的位置。如果您先删除 circleLayer 而不是保存舞台，那么您的圈子肯定会丢失。

如果您不会松开对圆圈的引用，请尝试将其隐藏，而不是删除。

circle.hide();

如果您生成了多个圈子，您可以在圈子创建中使用 id 或名称来隐藏所有圈子。

例子：

```
function generateCircle() {
var  circle = new Kinetic.Circle({
    x: stage.getWidth() / 2,
    y: stage.getHeight() / 2,
    radius: 30,
    fill: 'red',
    stroke: 'black',
    strokeWidth: 2,
    draggable: true,
    name: circle
});
circleLayer.add(circle);
circleLayer.draw();
}

var Circle_hide = circleLayer.get('.circle');

if (Circle_hide[0].attrs.visible == true){
    for (var i=0; i < Circle_hide.length; i++){
   Circle_hide[i].hide();
}
}
else {
for (var i=0; i < Circle_hide.length; i++){
   Circle_hide[i].show();
}
}
circleLayer.draw(); 
```

您可以添加一个按钮单击事件来隐藏或显示圆圈，可以将数据保存到 JSON 并且圆圈仍将保存在您的 JSON 文件中。

# jquery - 在 Jquery datepicker 中禁用 Next

> ID：16040204
> 
> 赞同：4
> 
> 时间：2013-04-16T14:49:47.863
> 
> 标签：jquery, datepicker, disabled-control

有没有其他方式我不能让用户选择下个月。我经历了一些线程，但我不想通过使用此[链接](https://stackoverflow.com/questions/3501808/jquery-datepicker-disable-month-selection)中指示的步骤功能来禁用下一个和上一个按钮。

```
 function bindPicker() {
        $("input[type=text][id*=Date]").datepicker({
            changeMonth: true,
            changeYear: true,
            yearRange: "-100:+0",
            showOn: "both",
            buttonImage: "../../images/Calender.png",
            buttonImageOnly: true,
            dateFormat: "M-yy"
        });
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T14:57:14.587

好吧，如果您想简单地删除下一个/上一个选项并且只在代码中使用强制月份，您可以使用 CSS。

```
.ui-datepicker-next,.ui-datepicker-prev{display:none;} 
```

这只会一起删除下一个/上一个按钮。然后，如果需要，您甚至可以输入一些 .toggle() 代码以在需要时显示/隐藏它们。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-16T15:29:24.297

尝试将 maxDate 选项设置为 0，这会将最大日期设置为从今天起 +0 天。

```
$(".datepicker").datepicker({maxDate: '0'}); 
```

更多信息：[http ://api.jqueryui.com/datepicker/#option-maxDate](http://api.jqueryui.com/datepicker/#option-maxDate)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-21T16:06:47.030

如果您只想在它们被禁用时隐藏下一个/上一个（即所有有效日期都在一个月内），请使用以下命令：

```
.ui-datepicker-prev.ui-state-disabled { display: none; }
.ui-datepicker-next.ui-state-disabled { display: none; } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-12-15T08:58:25.603

具有隐藏下一个和上一个按钮以及日期格式和定义日期的日期选择器。

```
$("#dateTextId")
    .datepicker({dateFormat: "dd-M-y",stepMonths:0})
    .datepicker('setDate',new Date(date_string)); 
```

# eclipse - 构建 Spring MVC 项目时出错

> ID：16040206
> 
> 赞同：1
> 
> 时间：2013-04-16T14:49:54.563
> 
> 标签：eclipse, maven, spring-mvc, maven-3, ubuntu-10.04

我已经下载了 Eclipse STS 3.2.0 并安装了 Apache Tomcat 7、JDK 6 和 Maven 3.0.4，然后尝试使用 Eclipse 创建一个新的 Spring MVC 空项目。

然而，当我尝试运行这个“空”项目时，我总是遇到这个错误，即使我没有在其中编写任何一行代码，它里面的所有代码都是使用 Eclipse 自动生成的

```
Errors occurred during the build.
Errors running builder 'Maven Project Builder' on project 'GoodProjectSTS'.
Could not calculate build plan: Plugin org.apache.maven.plugins:maven-resources-plugin:2.5 or one of its dependencies could not be resolved: Failed to read artifact descriptor for org.apache.maven.plugins:maven-resources-plugin:jar:2.5
Plugin org.apache.maven.plugins:maven-resources-plugin:2.5 or one of its dependencies  could not be resolved: Failed to read artifact descriptor for  org.apache.maven.plugins:maven-resources-plugin:jar:2.5
Could not calculate build plan: Plugin org.apache.maven.plugins:maven-resources- plugin:2.5 or one of its dependencies could not be resolved: Failed to read artifact  descriptor for org.apache.maven.plugins:maven-resources-plugin:jar:2.5
Plugin org.apache.maven.plugins:maven-resources-plugin:2.5 or one of its dependencies  could not be resolved: Failed to read artifact descriptor for  org.apache.maven.plugins:maven-resources-plugin:jar:2.5 
```

当我检查 Maven 是否已安装并使用时

```
mvn --version 
```

我在输出中得到以下内容

```
The program 'mvn' is currently not installed.  You can install it by typing:
sudo apt-get install maven2 
```

我已编辑 /etc/enivronment 并确保其中包含以下内容：

```
JAVA_HOME=”/usr/lib/jvm/java-6-sun”
M3_HOME=”/usr/local/apache-maven/apache-maven-3.0.2″
MAVEN_HOME=”/usr/local/apache-maven/apache-maven-3.0.2″
M3=”/usr/local/apache-maven/apache-maven-3.0.2/bin” 
```

但是当我输入 mvn -version 时我仍然得到同样的错误

那么有人可以告诉我我在这里缺少什么吗？或者我如何解决这个问题并让空的应用程序运行？

**注意：我在 Ubuntu 10.04 下运行上述程序**

**[注意 2：我尝试卸载 maven，然后使用http://lukieb.wordpress.com/2011/02/15/installing-maven-3-on-ubuntu-10-04-lts-server/](http://lukieb.wordpress.com/2011/02/15/installing-maven-3-on-ubuntu-10-04-lts-server/)中的说明重新安装，但使用没有成功（出现相同的错误），并且仍然 mvn -version 返回错误**

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T15:38:04.657

如果 jar 可用，请检查以下目录 {home directory}.m2\repository\org\apache\maven\plugins\maven-resources-plugin\2.5 另外，尝试手动下载 jar 并将其添加到 eclipse 中的构建并检查是否发生相同的错误

下载位置： http: [//mvnrepository.com/artifact/org.apache.maven.plugins/maven-resources-plugin/2.5](http://mvnrepository.com/artifact/org.apache.maven.plugins/maven-resources-plugin/2.5)

# c# - 涉及数据显示的非常奇怪的问题

> ID：16040209
> 
> 赞同：1
> 
> 时间：2013-04-16T14:49:58.620
> 
> 标签：c#, .net, wpf, xaml, user-interface

我有一个 DataGrid，定义如下：

```
 <DataGrid Name="dgResults" 
                  IsReadOnly="True"
                  AutoGenerateColumns="True"
                  AllowDrop="False"
                  CanUserAddRows="False"
                  CanUserDeleteRows="False"
                  CanUserReorderColumns="True"
                  CanUserResizeColumns="True"
                  CanUserResizeRows="False"
                  CanUserSortColumns="False"
                  ColumnWidth="120"
                  Margin="15,10,10,10"
                  Visibility="Collapsed" 
                  ItemsSource="{Binding}"/> 
```

出于某种原因，绑定到它时没有显示任何数据。正在显示正确数量的行，但它们都是空的。这是我的代码：

```
dgResults.DataContext = dtTopTwoHundredResults.AsDataView();
dgResults.AutoGeneratingColumn += new EventHandler<DataGridAutoGeneratingColumnEventArgs>(dataGrid_AutoGeneratingColumn);
dgResults.Visibility = Visibility.Visible;

private void dataGrid_AutoGeneratingColumn(object sender, DataGridAutoGeneratingColumnEventArgs e)
        {
            //Sets the DataGrid's headers to be TextBlocks, which solves a problem whereby underscore characters in the header are ignored.
            TextBlock block = new TextBlock();
            block.Text = e.Column.Header.ToString();
            e.Column.Header = block;
        } 
```

这绝对不是数据源的问题，因为数据应该包含在其中。它只是DataGrid。这是它的显示方式，即正确的行数但没有数据：

![在此处输入图像描述](https://i.stack.imgur.com/YI3J7.jpg)

我使用 Snoop 来确定文本是否实际包含在 DataGrid 中，我得到了这个：

```
System.Windows.Data Error: 40 : BindingExpression path error: 'Employee identification number' property not found on 'object' ''DataRowView' (HashCode=51298929)'. BindingExpression:Path=Employee identification number. Foreign key to Employee.BusinessEntityID.; DataItem='DataRowView' (HashCode=51298929); target element is 'TextBlock' (Name=''); target property is 'Text' (type 'String')
System.Windows.Data Error: 40 : BindingExpression path error: 'Employee identification number' property not found on 'object' ''DataRowView' (HashCode=51298929)'. BindingExpression:Path=Employee identification number. Foreign key to Employee.BusinessEntityID.; DataItem='DataRowView' (HashCode=51298929); target element is 'PropertyInformation' (HashCode=11239682); target property is 'Value' (type 'Object') 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T16:56:30.720

这里的问题是标点符号包含在列标题中。删除标点符号解决了这个问题。希望有同样问题的人会读到这篇文章，因为我花了好几个小时才意识到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T15:35:33.883

从您的代码来看，您似乎只需要自定义列标题。如果是这样，您可能希望在 XAML 中明确定义列：

```
<DataGrid.Columns>
    <DataGridTextColumn Header="Employee identification number"
                        Binding="{Binding Path=EmployeeID}"
    </DataGridTextColumn>
    <Insert other column definitions here/>
</DataGrid.Columns> 
```

您现在拥有它的方式，似乎 XAML 解析器（或其他）正在寻找与列标题（或类似内容）中的内容匹配的属性名称，并且它没有在您的 ItemsSource 对象上找到匹配的属性列标题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T15:52:03.500

您可以像这样显式设置您的数据网格列，此时您的数据网格的问题在于它可以显示的内容是有限的，因为标题是显式设置的。问题是，当您在 autogeneratedColumn 事件处理程序中设置标题时，文本块会像您说的那样忽略下划线，但此时 wpf 不知道如何将列数据绑定到该标题。这就是绑定路径出错的原因。“员工标识号”是它试图绑定回您的数据视图的内容，但在您的数据视图中是“员工标识号”。下面的解决方案解决了您的问题，但将您限制为仅显示该特定数据视图。如果那不是问题，那么这就是您的解决方案。

```
<DataGrid.Columns>
 <DataGridTextColumn Header="Employee identification number"
                    Binding="{Binding Path=EmployeeID}"
</DataGridTextColumn>
<Insert other column definitions here/>
</DataGrid.Columns> 
```

# c# - 是否可以在 C# 的 finally 子句中更改返回值？

> ID：16040214
> 
> 赞同：6
> 
> 时间：2013-04-16T14:50:09.630
> 
> 标签：c#, vb.net, return

**假设您有一个 C# 方法，其中包含一个块`return`内的语句。`try`是否可以修改`finally`块中的返回值？**

`return`在块中使用的明显方法`finally`不起作用：

```
String Foo()
{
    try
    {
        return "A";
    }
    finally
    {
        // Does not compile: "Control cannot leave the body of a finally clause"
        return "B";
    }
} 
```

有趣的是，这*可以*在 VB 中完成：`Return`inside`Finally`是被禁止的，但我们可以滥用这样一个事实（可能是出于向后兼容性的原因）VB 仍然允许通过将返回值分配给方法名称来修改它：

```
Function Foo() As String    ' Returns "B", really!
    Try
        Return "A"
    Finally
        Foo = "B"
    End Try
End Function 
```

* * *

笔记：

1.  请注意，我提出这个问题*纯粹是*出于对科学的好奇；显然，这样的代码非常容易出错和混淆，永远不应该编写。

2.  请注意，我*不是*在询问`try { var x = "A"; return x; } finally { x = "B"; }`. 我知道这不会改变返回值，并且[我理解为什么会发生这种情况](https://stackoverflow.com/q/421797/87698)。我想知道是否有*办法*通过 finally 块更改 try 块内设置的返回值。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-16T14:52:35.337

> 假设您在 try 块中有一个带有 return 语句的 C# 方法。是否可以修改 finally 块中的返回值？

不。

*但是，您可以在 finally 块之外*修改返回值：

```
static int M()
{
    try
    {
        try
        { 
            return 123;
        }
        finally
        {
            throw new Exception();
        }
    }
    catch
    {
        return 456;
    }
} 
```

仅仅因为最初有一个“返回 123”并不意味着该方法将返回 123，如果这就是你的问题实际得到的。此方法返回 456。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T15:15:29.193

VB.NET 版本滥用了 VB6 时代的残留构造，在该构造中，您通过将值分配给函数名称来返回值。

真正有趣的是，在使用标准`return`语句时生成的 IL 是否存在差异`myFunc = "B"`，因为`try...catch...finally`语义似乎表明不可能更改`return`语句返回的值。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-16T14:54:02.987

您可以执行以下操作来达到相同的效果：

```
private string myFunction()
{
    string result = String.Empty;
    try
    {
        //..
        result = "something";
    }
    finally
    {
        result = "something else";
    }
    return result;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-16T14:54:11.597

与引用的 VB 方法的一个密切类比是将修改后的值分配给 by 使用的变量`return`（这有利于保持单点返回控制）：

```
string returnResult;

try
{
    returnResult = "A";
}
finally
{
    returnResult = "B";
}

return returnResult; 
```

# visual-studio-2008 - SSRS 部署格式错误

> ID：16040215
> 
> 赞同：0
> 
> 时间：2013-04-16T14:50:11.717
> 
> 标签：visual-studio-2008, visual-studio-2005, reporting-services, reportmanager

我已经在 Visual Studio 中构建了一个报告，它可以正常工作并且预览良好，如下所示：-

![在此处输入图像描述](https://i.stack.imgur.com/NHMxD.png)

但是，当我将它部署到报表管理器时，我的报表布局会损坏，如下所示：-

![在此处输入图像描述](https://i.stack.imgur.com/itZjT.png)

有谁之前经历过这个吗？

非常感谢所有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T19:58:15.390

索引超出了框的范围！jk

很多时候，当您使用块时，如果您在拥有表达式或文本框之后绘制它，它会认为它的范围在顶部。要解决此问题，您通常在框外选择它们，然后将它们放回原处。然后框意识到它具有“子”元素，而不仅仅是作为悬停问题存在。我经常遇到这个问题，这就是我解决它的方法，我希望它也对你有用。

另一个常见问题是您以某种方式在框外列出长度或宽度，它们会跳出来。确保盒子里的所有东西都整齐有序。

# java - 每 24 小时的 Spring Scheduler

> ID：16040216
> 
> 赞同：3
> 
> 时间：2013-04-16T14:50:12.200
> 
> 标签：java, spring

我正在尝试每 24 小时读取 CVS 文件并将其插入数据库。我正在使用 Spring Schedular 并且它按预期工作，但是我的应用程序将部署在 3 个不同的 JVM 中，并且所有 JVM 将同时运行，所以有什么办法 schedular 只会为所有三个 JVM 运行一次，这样它每天只会插入一次数据。

```
<bean id="runMeTask" 
       class="com.fifththird.ebusiness.ivr.core.service.RunMeTask" >
          <property name="dataSource" ref="DataSource"/>
   </bean>

   <bean id="schedulerTask" 
      class="org.springframework.scheduling.timer.MethodInvokingTimerTaskFactoryBean">
        <property name="targetObject" ref="runMeTask" />
        <property name="targetMethod" value="printMe" />
   </bean>

   <bean id="timerTask"
      class="org.springframework.scheduling.timer.ScheduledTimerTask">
        <property name="timerTask" ref="schedulerTask" />
        <property name="delay" value="1000" />
        <property name="period" value="60000" />
  </bean>

 <bean class="org.springframework.scheduling.timer.TimerFactoryBean">
    <property name="scheduledTimerTasks">
        <list>
            <ref local="timerTask" />
        </list>
    </property>
</bean> 
```

* * *

添加到上面的问题“如果在三个不同的 JVM 中部署的相同应用程序将调用 spring schedular ，那么代码将尝试每天三次插入数据。”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T14:58:47.313

您可以使用普通文件作为锁。只有一个 JVM 可以获取锁，其他 JVM 将跳过该步骤。为了安全起见，您需要在加载完成后删除/重命名文件

```
 FileOutputStream out = new FileOutputStream("lock");
    try {
        FileLock lock = out.getChannel().tryLock();
        if (lock != null) {
            try {
                // load csv
            } finally {
                lock.release();
            }
        }
    } finally {
        out.close();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T05:50:24.120

感谢您的回复。我已经通过在数据库中使用另一个表来检查状态/日期（无论插入是否已完成），然后将 csv 的值插入另一个表中。（这个网站是 rele非常棒）。Bcoz 从上面提到的锁定建议中我得到了这个想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T15:07:14.697

如果我理解正确（多台机器上的多个 cvs 和一个 db？）它看起来像是 JMS 队列的一个用例，我们使用的是 Java EE，但有 Spring 实现[http://static.springsource.org/spring/docs/2.5 .3/reference/jms.html](http://static.springsource.org/spring/docs/2.5.3/reference/jms.html)

# ruby-on-rails - 在 ubuntu linux 上使用 nginx 的乘客 - 无法识别我的应用程序

> ID：16040219
> 
> 赞同：2
> 
> 时间：2013-04-16T14:50:24.630
> 
> 标签：ruby-on-rails, nginx, passenger

我用 gem 在 rvm 上安装乘客

```
gem install passenger 
```

然后用它安装nginx

```
rvmsudo passenger-install-nginx-module 
```

并编辑 /opt/nginx/nginx.conf 文件，将这两行添加到服务器问题：

```
passenger_enabled on; 
root /home/snir/my_app/public; 
```

但运行乘客（停止 nginx 系统服务后）给我这个输出：

```
Environment: development
Accessible via: http://0.0.0.0:3000/

You can stop Phusion Passenger Standalone by pressing Ctrl-C.
===============================================================================
2013/04/16 17:47:08 [error] 4730#0: *4 "/home/snir/public/index.html" is not found (2: No such file or directory), client: 127.0.0.1, server: _, request: "HEAD / HTTP/1.1", host: "0.0.0.0" 
```

并浏览到 0.0.0.0:3000 给我一个 404 not found nginx 页面。怎么了？为什么乘客会在 /home/snir/public 中查找应用程序，而不是我在 nginx.conf 文件中提供的 /home/snir/my_app/public 路径？

编辑：

所以看起来 nginx 没有连接到乘客，因为它没有出现在 nginx 的 --add-module 中。但我正确安装了它，所以可能是ubuntu附带的其他一些nginx安装与乘客安装冲突。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-29T22:18:34.837

也许您的 nginx.conf 不正确（在我的情况下，位置是 /opt/nginx/conf/nginx.conf）

我找到了一个适合我的解决方案->[为 Rails 配置 nginx.conf 显示文件目录不是索引](https://stackoverflow.com/questions/8423391/configure-nginx-conf-for-rails-shows-file-directory-not-index)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T12:30:51.167

我最近在 DigitalOcean.com 上设置服务器以部署到我的 VPS，并发现他们的支持文章非常有帮助。这是一个可能对您的具体情况有所帮助的方法。[https://www.digitalocean.com/community/articles/how-to-install-rails-and-nginx-with-passenger-on-ubuntu](https://www.digitalocean.com/community/articles/how-to-install-rails-and-nginx-with-passenger-on-ubuntu)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T16:12:27.183

我对您的系统了解不多，但问题可能是您使用了错误的配置文件。大多数基于 unix 的系统 nginx 配置文件位于 /etc/nginx/nginx.conf 和 /etc/nginx/sites-enabled/some-site 中，它是 /etc/nginx/sites-available/some-site 的软链接。如果您有疑问，可以尝试在您认为是系统正在使用的配置文件的文件中放置一个明显的错误，然后重新启动 nginx 以查看它是否抱怨错误或继续没有问题。

# ms-access - 向 MS Access 表中插入记录时，如何避免出现以下错误消息：“对象关闭时不允许操作”？

> ID：16040221
> 
> 赞同：1
> 
> 时间：2013-04-16T14:50:36.537
> 
> 标签：ms-access, vba

我正在使用 Microsoft Access 2007。运行下面的子程序后，我收到以下错误消息：“关闭对象时不允许操作” 尽管有此错误消息，记录仍插入到相应的表中。有人可以解释可能导致此错误的原因吗？

```
Private Sub Save_Click()

Dim rs As ADODB.Recordset
Dim SQL As String

On Error GoTo HandleError

Set rs = New ADODB.Recordset

SQL = "INSERT INTO [Hiring Entity]  ([Hiring Entity]) VALUES (""RICH PC2"");"

rs.Open SQL, CurrentProject.Connection, _
      adOpenDynamic, adLockOptimistic

With rs
    .AddNew
End With

   Set rs = Nothing
       rs.Close

ExitHere:

    Exit Sub

HandleError:
    MsgBox Err.Description
    Resume ExitHere
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T16:23:55.817

您正试图访问一个不存在的对象。

改变这个：

```
Set rs = Nothing
rs.Close 
```

对此：

```
rs.Close
Set rs = Nothing 
```

你试图在它消失后关闭它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T17:16:52.163

@Pow-lan explained the error occurred because you set `rs` to `Nothing` before attempting `rs.Close`. The `.Close` method is not available for a recordset object variable after you set it to `Nothing`.

However, I'm left wondering why you use a recordset at all. Your `SQL` string contains an `INSERT` statement. So if the point is to add a row, just execute the `INSERT` statement. No recordset required.

```
CurrentProject.Connection.Execute SQL 
```

Actually, you don't even need ADO (`CurrentProject.Connection.Execute`) to execute that query. DAO should be fine.

```
CurrentDb.Execute SQL, dbFailOnError 
```

# sql-server-2008 - 这里应该使用表值参数吗？

> ID：16040226
> 
> 赞同：1
> 
> 时间：2013-04-16T14:50:49.187
> 
> 标签：sql-server-2008, c#-3.0

我有以下查询：

```
 @"UPDATE students SET IsDeleted = 1 WHERE StudentId IN (
         SELECT StudentId FROM Class where PassId IN (
              SELECT Id FROM ClassValueTable WHERE IsDeleted <> 1" 
                + activeIds)))"; 
```

其中 activeIds = 一些数字的字符串，例如：1,2,3,4...

我想将此查询转换为存储过程。我的问题是将 activeIds 作为参数传递给此存储过程的最佳方法是什么？

*代码在 C# 中并且正在使用 SQL Server 2008

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T15:05:30.803

是的，使用表值参数。首先创建一个类型：

```
CREATE TYPE dbo.StudentIDs(ID INT PRIMARY KEY); 
```

现在您的程序可以使用它（请注意，我已将您的嵌套`IN`查询更改为正确的连接）：

```
CREATE PROCEDURE dbo.MarkStudentsAsDeleted
  @IDs dbo.StudentIDs READONLY
AS
BEGIN
  SET NOCOUNT ON;

  UPDATE s SET IsDeleted = 1
    FROM dbo.Students AS s
    INNER JOIN dbo.Class AS c
    ON s.StudentId = c.StudentId
    INNER JOIN dbo.ClassValueTable AS ct
    ON c.PassId = ct.Id
    WHERE ct.IsDeleted <> 1
    AND EXISTS (SELECT 1 FROM @IDs WHERE StudentID = s.StudentID);
END 
GO 
```

您的 C# 代码将传入一个 DataTable，或者您已经组装了 activeIds 的集合，而不是一个逗号分隔的列表。

```
DataTable dt = new DataTable();
dt.Columns.Add("ID", typeof(int));
dt.Rows.Add(1);
dt.Rows.Add(2);
dt.Rows.Add(3);
dt.Rows.Add(4);

... open connection etc. ...

SqlCommand cmd = new SqlCommand("dbo.MarkStudentsAsDeleted", conn);
cmd.CommandType = CommandType.StoredProcedure;
SqlParameter tvp1 = cmd.Parameters.AddWithValue("@IDs", dt);
tvp1.SqlDbType = SqlDbType.Structured;
cmd.ExecuteNonQuery();

... close, dispose, etc. ... 
```

如果您想坚持将字符串传递给存储过程，则需要使用拆分函数。例如：

```
CREATE FUNCTION dbo.SplitInts
(
   @List       VARCHAR(MAX),
   @Delimiter  VARCHAR(255) = ','
)
RETURNS TABLE
WITH SCHEMABINDING 
AS
  RETURN 
  (  
    SELECT [value] = y.i.value('(./text())[1]', 'int')
    FROM 
    ( 
      SELECT x = CONVERT(XML, '<i>' 
        + REPLACE(@List, @Delimiter, '</i><i>') 
        + '</i>').query('.')
    ) AS a CROSS APPLY x.nodes('i') AS y(i)
  );
GO 
```

现在您的存储过程可以是：

```
CREATE PROCEDURE dbo.MarkStudentsAsDeleted
  @IDs VARCHAR(MAX)
AS
BEGIN
  SET NOCOUNT ON;

  UPDATE s SET IsDeleted = 1
    FROM dbo.Students AS s
    INNER JOIN dbo.Class AS c
    ON s.StudentId = c.StudentId
    INNER JOIN dbo.ClassValueTable AS ct
    ON c.PassId = ct.Id
    WHERE ct.IsDeleted <> 1
    AND EXISTS (SELECT 1 FROM dbo.SplitInts(@IDs, ',') WHERE Item = s.StudentID);
END 
GO 
```

# javascript - jQuery滑块分页：添加回调函数

> ID：16040227
> 
> 赞同：0
> 
> 时间：2013-04-16T14:50:59.190
> 
> 标签：javascript, jquery, pagination

我在这里设置了一个小提琴：http: [//jsfiddle.net/YHMDN/](http://jsfiddle.net/YHMDN/)。这是一个滑块分页概念，我希望它显示文本部分而不是数字，但保持数字显示在滑块中以引用不同的文本部分（可能带有回调函数）并提示滚动条。谁能帮帮我？

```
$(function() {

                var $update = $( '#preview > span' );

                $( "#slider" ).pagination( {
                    total : 100,
                    onChange : function( value ) {
                        $update.text( value );
                    }
                } );

            }); 
```

分页脚本github页面：[https ://github.com/codrops/SliderPagination/](https://github.com/codrops/SliderPagination/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T15:18:39.583

尝试这个：

$update.text($($('nav').find('a')[value-1]).text());

# mongodb - 同步 mongodb 数据库的两个副本

> ID：16040228
> 
> 赞同：2
> 
> 时间：2013-04-16T14:50:59.197
> 
> 标签：mongodb, amazon-ec2

我有一个在亚马逊 ec2 虚拟机上运行的 mongodb 服务器。VM 有大约 100GB 的存储空间，DB 以每天大约 3GB 的速度增长。

我试图弄清楚将数据库保存在外部服务器上的最佳方法是什么，并且只有亚马逊 VM 上的 mongodb 将数据维护一两天。然后应将数据同步到外部服务器并从 VM 上的数据库中删除。

mongo 有一个 clone 方法，但它看起来并不能完成这项工作。有没有人试图做类似的事情？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T23:50:19.227

MongoDB 并没有真正轻松地做到这一点（至少现在还没有）。如果可以的话，你现在最好在应用层实现它。

如果这真的不是一个选择，你可以尝试使用分片......

完成此操作有点棘手，但可能最简单的方法是按日期分片，并且随着每一天的过去，您都可以从 VM mongo 中添加和删除一个分片（例如，您可能会删除 3 个分片天前，并在​​未来 1 天添加一个新分片）。然后，使用您的外部服务器作为主分片，这样当数据不属于您的 3 天滚动分片时，数据始终会迁移到该服务器。

查看[管理和管理分片标签](http://docs.mongodb.org/manual/tutorial/administer-shard-tags/)，了解如何设置分片标签，使其适用于每个日期。每天晚上，您都需要一个 cron 作业来删除和添加这些碎片。这种方法的一个缺点可能是您需要每晚将 3 GB 的数据从 VM 移动到外部服务器。

# r - 如何在后台运行 RTerm.exe（运行自定义 GUI）

> ID：16040232
> 
> 赞同：4
> 
> 时间：2013-04-16T14:51:12.450
> 
> 标签：r

我正在尝试使用 gWidgets 为 R 创建一个自定义 GUI，我偶然发现了这个线程：[Running an R script using a Windows shortcut](https://stackoverflow.com/questions/10312417/running-an-r-script-using-a-windows-shortcut)，这对我有很大帮助，但只剩下一个问题：黑色命令提示符RTerm 仍然出现。我怎样才能让它不可见？有这个选项吗？到目前为止，我得到的是 --silent 选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T08:32:07.273

使用`Rscript.exe`代替`Rterm.exe`，然后查看以下帖子：[如何在 R 中等待按键](https://stackoverflow.com/questions/15272916/how-to-wait-for-a-keypress-in-r/15283106#15283106)。

# scala - 如何合并来自 SBT 多项目的文档？

> ID：16040236
> 
> 赞同：8
> 
> 时间：2013-04-16T14:51:22.790
> 
> 标签：scala, sbt, scaladoc

我正在为一些 SBT 项目（在[多项目配置](http://www.scala-sbt.org/release/docs/Getting-Started/Multi-Project)中）生成 ScalaDoc HTML 文件。如果我在 SBT 控制台中执行*doc*，文档会很好地生成，但它会部署在每个项目的独立目录中。由于所有项目都相互关联（就包名称而言），我想生成一个唯一的 ScalaDoc 目录作为输出。值得一提的是，由于一些涉及的宏需要双重编译过程，我无法将所有源代码放在一起。有什么解决方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T15:20:28.317

不幸的是，scaladoc 不适用于单独的编译，因为它不能合并生成的文档。必须同时为所有来源生成文档。宏问题的解决方案是使用`-Ymacro-no-expand`在 scaladoc 生成期间不扩展宏。另请参阅[https://issues.scala-lang.org/browse/SI-6812](https://issues.scala-lang.org/browse/SI-6812)

# coldfusion - ColdFusion 文件上传问题

> ID：16040240
> 
> 赞同：1
> 
> 时间：2013-04-16T14:51:41.373
> 
> 标签：coldfusion, coldfusion-9

我已经在我的本地开发系统上运行了 CFFileUpload，我刚刚将它上传到我的生产服务器 - 两者都在运行 ColdFusion 9。在我的本地开发盒上一切正常。

当我尝试使用上传器访问页面时，我从生产框中得到

```
};ColdFusion.Event.registerOnLoad(_cf_fileupload_init_1366123463704); 
```

区别：dev = Windows 7 prod = Windows Server 2003 就是这样。

有任何想法吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T20:36:55.740

我在某个论坛上找到了答案，对 UI 组件使用的脚本的 CFID 引用需要是“可浏览的”——在 Apache 中进行映射解决了这个问题。- 我已经锁定了我的 Prod 盒子，忘记了每个虚拟主机上的映射都不相同。

# extjs - 使用 ExtJS 在卡片布局中的卡片之间切换时加载掩码

> ID：16040242
> 
> 赞同：0
> 
> 时间：2013-04-16T14:51:58.050
> 
> 标签：extjs

我在我的一个视图中使用卡片布局。卡片布局中有 6 张卡片。我使用图像点击在卡片之间切换。由于卡片从一张切换到另一张需要一些时间，因此我需要在切换时添加加载遮罩，即，当我单击图像时，加载遮罩应该出现，并且一旦渲染下一张卡片，加载遮罩就应该被移除. 任何人都可以建议我解决我面临的加载掩码问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T17:51:23.497

为什么切换需要时间？是因为商店负载吗？如果是因为商店您可以在 beforeLoad 中显示掩码并在 load 事件中隐藏。像这样的东西：

```
Ext.define('MyApp.store.MyStore', {
...
myMask: null,
listeners: {
    beforeload: function(store, operation, options){
        this.myMask = new Ext.LoadMask(Ext.getBody(), {
            cls: "loader",
            msg: "Loading..."
        });
        this.myMask.show();
    },
    load: function(store, records, success, operation, options){
        this.myMask.hide();
    }
}); 
```

我不知道你是如何做这个应用程序的。但是如果这没有帮助，您也可以创建一个带有蒙版的对象并在单击后始终显示，您可以隐藏在视图的“绘制”事件中：http: [//docs.sencha.com/touch/2.2。 0/#!/api/Ext.navigation.View-event-painted](http://docs.sencha.com/touch/2.2.0/#!/api/Ext.navigation.View-event-painted)

[编辑]

因此，您可以在加载时将 Store 覆盖为 aways show de mask。这里的代码：

```
Ext.define('MyAppName.store.App', {
override: 'Ext.data.Store',

timeOut: null,

// List of stores that run in background (dont show mask)
backgroundStores: [
    'StoreOne',
    'StoreTwo'
],

constructor: function(config){
    this.callParent(arguments);
    this.on('beforeload', 'onBeforeLoad', this);
    this.on('load', 'onAfterLoad', this);
},

onBeforeLoad: function(store, operation, options){
    // runing in background
    if(this.backgroundStores.indexOf(store._storeId) != -1){
        return;
    }

    var re = new RegExp("MyAppName");
    // Fix a feature of sencha that do some request from store off app
    if(store._model == undefined || store._model.$className == undefined || re.exec(store._model.$className) == null){
        return;
    }

    MyAppName.app.config.mask.show(); // this is my mask defined in App.js

    // timout
    this.timeOut = setTimeout(function() {
        Ext.Msg.alert("Erro", "Could not connect to the server");
        MyAppName.app.config.mask.hide();
    }, 30000);
},
onAfterLoad: function(store, records, success, operation, options){
    if(this.backgroundStores.indexOf(store._storeId) != -1){
        return;
    }

    var re = new RegExp("MyAppName");
    if(store._model == undefined || store._model.$className == undefined || re.exec(store._model.$className) == null){
        return;
    }
    MyAppName.app.config.mask.hide();
    window.clearInterval(this.timeOut);
}}); 
```

# xaml - 当我点击 Win Phone 8 的文本框时如何摆脱键盘

> ID：16040243
> 
> 赞同：0
> 
> 时间：2013-04-16T14:51:58.120
> 
> 标签：xaml, windows-phone-8

我目前正在为win8手机开发一个简单的应用程序。在我的应用程序中，我有一个文本框，当我尝试点击文本框时，我会将用户导航到另一个页面。但是每次我点击文本框时，在应用程序导航到另一个页面之前，键盘都会显示不到一秒钟。我可以知道如何摆脱键盘吗？谢谢

```
private void MyTextBox_Tap_1(object sender, System.Windows.Input.GestureEventArgs e)
    {
        NavigationService.Navigate(new Uri("/MainPage.xaml", UriKind.RelativeOrAbsolute));
    } 
```

# svn - Subversion 提交后挂钩

> ID：16040244
> 
> 赞同：2
> 
> 时间：2013-04-16T14:51:59.613
> 
> 标签：svn, visualsvn-server, post-commit, svn-hooks

我在让提交后挂钩工作时遇到了一些问题。当我将更改的文件提交到我的存储库时，Subversion 似乎没有触发我的提交后挂钩。

我正在使用带有 Subversion 的 TortoiseSVN 和 VisualSVN，我能够进入 VisualSVN 用户界面并在其中创建一个有效的挂钩，但是我想做的是使用我安装的 hooks 文件夹中的 post-commit 可执行挂钩来执行我的钩子。

我已将存储库的 /hooks 文件夹中的名称从更改为`post-commit.tmpl`，`post-commit.bat`并且只是在批处理文件中进行了简单的更新：

```
"C:\Program Files\TortoiseSVN\bin\svn.exe" update "C:\mypath\myworkingcopy" 
```

当我自己运行批处理文件时，它会更新我的工作文件夹，所以我认为当我出于某种原因提交时它不会被触发。这似乎不是权限问题，因为一切都是在我的机器上本地完成的，但是我已将其设置为作为网络服务运行但仍然遇到同样的问题......有什么建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T19:42:55.403

首先，所有的钩子都是在**服务器**上执行的，而不是在不同的客户端机器上。是`C:\mypath\myworkingcopy`在服务器上吗？如果没有，它不会得到更新。

其次，在钩子中做任何可能需要太多时间的事情都是不好的形式。如果你的钩子需要的东西超过`svnlook`，你很可能做错了。例如，更新该工作副本需要多长时间？10秒？30秒？一分钟？这是开发人员必须坐下来等待他们的 Subversion 提交完成的额外时间。

使用可以响应提交事件并在提交后挂钩之外执行诸如工作副本更新或部署到 Web 服务器之类的事情要好得多。我强烈推荐[詹金斯](http://jenkins-ci.org)做这份工作。Jenkins 有几个不错的特性：

*   它具有成本效益（你不能免费）
*   它得到了很好的支持（在 Stackoverflow 上发布问题并获得快速回复）。
*   设置和使用非常简单。

* * *

现在回到你的问题：

首先确保钩子正在运行。将这一行添加到批处理脚本的底部：

```
 exit 2 
```

这会让 Subversion 认为 post-commit 钩子失败了，你应该在提交时收到一条错误消息。如果没有，您的提交后脚本没有运行。确保脚本可由运行 Subversion 服务器的帐户执行。

如果确实收到错误消息，则脚本正在运行。但是，svn 命令可能不会返回提交后进程发现的错误。我通常不建议使用 Windows 批处理编程语言编写钩子，因为它的局限性。使用 Python 或 Perl 或 PowerShell。这些更适合检测错误情况，并且您可以在检测到时退出脚本。

话又说回来，一切运行良好，但您正在查看错误的工作副本（您机器上的那个，而不是服务器上的那个）。当您在 subversion 服务器之外运行挂钩进行测试时，请以运行服务器进程的 Subversion 用户身份在服务器上运行它们。

尝试这些方法，看看是否能解决您的问题。

* * *

## 附加评论

我创建了一个存储库`svnadmin create`并使用`svnserve`. 我更新`svnserve.conf`以允许我签出和提交代码。

我进入`hooks`目录，重命名`pre-commit.tmpl`为`pre-commit.bat`并将其设置为：

```
set 1>&2
echo "Blocked my me!" 1>&2
exit 2 
```

当我尝试提交更改时，我得到了：

```
Transmitting file data .svn: E165001: Commit failed (details follow):
svn: E165001: Commit blocked by pre-commit hook (exit code 2) with output:
[...]
PATHEXT=.COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC;.RB;.RBW
PERL_JSON_BACKEND=JSON::XS
PERL_YAML_BACKEND=YAML
PROCESSOR_ARCHITECTURE=AMD64
PROCESSOR_IDENTIFIER=Intel64 Family 6 Model 42 Stepping 7, GenuineIntel
PROCESSOR_LEVEL=6
PROCESSOR_REVISION=2a07
[...]
"Blocked my me!" 
```

该钩子***应该***删除环境（包括PATH），但我猜这只是在Unix而不是Windows上。你可以看到`PATHEXT`定义。

然后我重命名`pre-commit.bat`并`pre-commit.tmpl`创建了一个 post-commit.bat ，如下所示：

```
echo This post-commit hook shall fail! 1>&2
exit 2 
```

在提交期间，我得到以下信息：

```
Transmitting file data .
Committed revision 3.

Warning: post-commit hook failed (exit code 2) with output:
This post-commit shall fail! 
```

看起来一切都按计划进行。我没有使用 VisualSVN，也没有作为服务运行。`PATHEXT`我想知道您的环境变量是否有问题。

也许看看它是如何在您运行 Subversion 服务器的帐户上设置的，看看是否`.BAT`在那里。

我不能马上想到其他任何事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-01T13:40:16.133

我几乎为此发疯了，我的问题是出口 2，在提交后没有向我的 svn 客户端发送任何内容。它在开始提交，预提交中运行良好，但在提交后，我从未收到任何错误。所以我的主要问题只是脚本本身的完整路径调用。

因此，如果在您看来 post-commit 永远无法正常工作，并且您在脚本中尝试了 exit 1 并且没有收到任何错误，请尝试以下操作：

```
#!/bin/sh
/bin/touch /home/folder/post_commit_works 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T21:02:11.117

大卫答案的扩展版

1.  检查，提交后挂钩是否真正执行：添加到 post-commit.bat`echo ANYTHING`并在从 CLI 提交时，您必须看到任何输出到屏幕（如果 TSVN 输入将在提交窗口中）
2.  如果执行了钩子脚本（必须如此），您必须测试运行 VisualSVN 服务器的帐户的权限（对于工作副本目录） - NetworkService 可能对文件的权限不足 - 我怀疑这一点，因为**任何 svn更新，即使是最新的 WC，输出到标准输出，你必须从你的 post-commit 钩子中看到这个输出**

`>svn up "z:\wc"`

`Updating 'wc':`

`At revision 3.`

* * *

**编辑和修复**

感谢大卫提到我的愚蠢错误和令人耳目一新的记忆。虽然 bahrep 的文件记录版本可以工作，但这种类型的提交后挂钩（在 post-commit.bat 中）

```
echo Running 1>&2
svn up "z:\wc-auto" 1>&2
exit 2 
```

在提交时将所有*钩子的输出传输到屏幕*

```
z:\wc>svn ci -m "Testing hook"
Sending        file.txt
Transmitting file data .
Committed revision 13.

Warning: post-commit hook failed (exit code 2) with output:
Running
Updating 'Z:\wc-auto':
U    Z:\wc-auto\file.txt
Updated to revision 13. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T16:45:39.953

*   为网络服务帐户提供对工作副本文件夹`C:\mypath\myworkingcopy`和`C:\Program Files\TortoiseSVN\bin\svn.exe`.

*   如果它不起作用，那么让我们将钩子输出捕获到日志文件中以获取有关根本原因的一些线索：

    1.  将当前`post-commit.bat`文件重命名为`post-commit-run.bat`.
    2.  创建以下文件作为您的`post-commit.bat`文件：

        > 调用 "%~dp0post-commit-run.bat" %* > %1/hooks/post-commit.log 2>&1

    3.  提交到存储库并检查生成的日志文件。输出将为您提供有关根本原因的线索。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-07-02T13:33:38.070

我在做的时候遇到了同样的问题`post-commit.bat`。`.exe`我认为当脚本具有扩展名时，Windows 上的 Subversion 会在提交后运行。

[尝试使用Bat2Exe](http://bat2exe.codeplex.com/)或[bat2exe.net](http://bat2exe.net/)将您的批处理 post-commit 编译成可执行文件，看看它是否运行。

# r - 将基于 R 语言的算法与 html 网页相结合以创建 Web 应用程序

> ID：16040247
> 
> 赞同：-2
> 
> 时间：2013-04-16T14:52:07.007
> 
> 标签：r, web

我正在创建一个 Web 应用程序。我用 R 语言做了一个算法，用 html/jQuery 做了一个前端。我如何将算法结合到前端，以便当用户在 html 页面中输入数据时，他会在用 R 编写的算法上运行输出，在 html 页面上作为输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T15:03:05.050

使用[RApache，](http://rapache.net/)您可以在 javascript 和 R 之间进行连接。它允许您在 R 中执行服务器端脚本。要完成这项工作，请在您的服务器上设置一个 R 脚本，确保 Apache 中的指令设置正确 - 像这样将工作

```
<Directory /var/www/brew/pathtoyourscript>
    SetHandler r-script
    RHandler brew::brew
</Directory> 
```

接下来调用脚本，就像按下按钮时对 php 所做的那样，例如，它将获取您传递给脚本的参数，以便您可以在 R 中使用它。

# python - python：将列表转换为字符串，仅在'|'时添加'，' 不在身边

> ID：16040258
> 
> 赞同：3
> 
> 时间：2013-04-16T14:52:38.810
> 
> 标签：python, string, list

如何将列表转换为字符串，同时仅在“|”时添加“，” 不在身边

例如：list=['q0','|','q1','q0','|','#','|','#']

打印成字符串：q0|q1,q0|#|#

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T14:54:42.700

```
x = ['q0','|','q1','q0','|','#','|','#']
','.join(x).replace(',|', '|').replace('|,','|') 
```

不得不编辑，因为我忘记了另一边的逗号，现在有点难看

或者，使用正则表达式

```
re.sub(',?\|,?','|', ','.join(x)) 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-16T14:57:17.577

```
list=['q0','|','q1','q0','|','#','|','#']

strval = ' '.join(list)

strfinal = strval.replace(',','|') 
```

[http://www.decalage.info/en/python/print_list](http://www.decalage.info/en/python/print_list)

# javascript - 在 Angular.js 中实现承诺时如何始终运行一些代码

> ID：16040263
> 
> 赞同：83
> 
> 时间：2013-04-16T14:52:43.010
> 
> 标签：javascript, angularjs, promise, deferred, finally

在我的 Angular.js 应用程序中，我正在运行一些异步操作。在开始之前，我用模态 div 覆盖应用程序，然后一旦操作完成，我需要删除 div，无论操作是否成功。

目前我有这个：

```
LoadingOverlay.start(); 
Auth.initialize().then(function() {
    LoadingOverlay.stop();
}, function() {
    LoadingOverlay.stop(); // Code needs to be duplicated here
}) 
```

它工作得很好，但是我更喜欢像这个伪代码这样更干净的东西：

```
LoadingOverlay.start(); 
Auth.initialize().finally(function() { // *pseudo-code* - some function that is always executed on both failure and success.
    LoadingOverlay.stop();
}) 
```

我认为这是一个很常见的问题，所以我认为可以完成但在文档中找不到任何内容。知道是否可以做到吗？

* * *

## 回答 #1

> 赞同：164
> 
> 时间：2013-05-23T14:23:10.133

该功能已在[此拉取请求](https://github.com/angular/angular.js/pull/2424)中实现，现在是 AngularJS 的一部分。它最初被称为“always”，后来改名为`finally`，所以代码应该如下：

```
LoadingOverlay.start(); 
Auth.initialize().then(function() {
    // Success handler
}, function() {
    // Error handler
}).finally(function() {
    // Always execute this on both error and success
}); 
```

请注意，由于`finally`是保留关键字，因此可能需要将其设为字符串，以免在某些浏览器（例如 IE 和 Android 浏览器）上中断：

```
$http.get('/foo')['finally'](doSomething); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-02-25T13:12:25.193

我正在使用 Umbraco 7.3.5 版后端和 AngularJS 1.1.5 版并找到了这个线程。当我实施批准的答案时，我得到了错误：

> xxx(...).then(...).finally 不是函数

然而，起作用的是`always`. 如果使用旧版本 AngularJS 的其他人发现此线程并且无法`finally`使用此代码，请改用此代码

```
LoadingOverlay.start(); 
Auth.initialize().then(function() {
    // Success handler
}, function() {
    // Error handler
}).always(function() {
    // Always execute this on both error and success
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-07-19T16:00:36.297

对于那些不使用 angularJS 的人，如果您可以捕获错误（不确定 .finally() 是否会这样做），您可以使用 .catch().then() 来避免重复代码。

```
Promise.resolve()
  .catch(() => {})
  .then(() => console.log('finally')); 
```

无论如何，catch() 最终可能对日志记录或其他清理有用。 [https://jsfiddle.net/pointzerotwo/k4rb41a7/](https://jsfiddle.net/pointzerotwo/k4rb41a7/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-17T08:31:19.097

我会使用 ngView 来呈现页面的内容，并在 $viewContentLoaded 事件上触发删除你的模式。有关该事件，请参阅[http://docs.angularjs.org/api/ng.directive:ngView和有关 $on 事件侦听器的](http://docs.angularjs.org/api/ng.directive:ngView)[http://docs.angularjs.org/api/ng](http://docs.angularjs.org/api/ng) .$rootScope.Scope。

# java - 最好的并发锁：一次 WRITE 和无限次 READ

> ID：16040265
> 
> 赞同：2
> 
> 时间：2013-04-16T14:52:51.090
> 
> 标签：java, concurrency, locks

Java中是否有任何Lock可以让我这样做？

*   一次 WRITE 操作
*   ***无限数量的 READ操作***（即使获得了 WRITE 锁）
*   可选但很棒：锁超时 - 一段时间后释放锁以避免永远死锁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T15:03:48.117

听起来好像没有不能发生读取的情况。你真的需要读锁吗？如果没有，那么您应该只能使用具有 1 个许可证的[信号量](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Semaphore.html)来保护写权限。如果您仍想跟踪正在发生的读取次数而无法阻止任何读取，您始终可以使用[AtomicInteger](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/atomic/AtomicInteger.html)计算正在运行的读取次数。

# c# - 正则表达式匹配特定字符？

> ID：16040267
> 
> 赞同：1
> 
> 时间：2013-04-16T14:52:54.533
> 
> 标签：c#, .net, regex

我需要制作一个正则表达式，当它单独时将匹配字符“N”。到目前为止，我已经想出了这个表达式：`"^[N]$"`这似乎在这个例子中有效。它与其他三个不匹配，只是“N”。

```
public static void Main()
{
    string[] words = new string[] { "42ND", "N", "WATERING", "ANONYMOUS"};

    string pattern = @"^[N]$";

    foreach (string word in words)
    {
        if( Regex.IsMatch(word, pattern))
        {
            Console.WriteLine(word + " Is a match"); 
        }
    }
} 
```

任何人都可以找出任何问题或提供更好的问题吗？谢谢！

编辑清楚一点：我只是想匹配这封信`"N"`，仅此而已。它不应与“NN”、“NNN”或任何变体匹配，也不应与包含字母的任何单词匹配`"N"`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T14:59:54.623

您可以使用`\b`（单词边界匹配），这样您就可以挑选出字符串中的所有“单 N”单词（不确定这是否是您真正需要的，但示例中的字符串数组表明可能是这种情况）。

```
using System;
using System.Diagnostics;
using System.Text.RegularExpressions;

namespace ConsoleApplication1 {
    internal class Program {
        private static void Main(string[] args) {
            var pattern = new Regex(@"\bN\b");
            const string input = "N foo N bar N";
            MatchCollection matches = pattern.Matches(input);
            Debug.Assert(matches.Count == 3);
            foreach (Match m in matches) {
                Console.WriteLine(m.Value);
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T14:57:22.297

当只有一个字符`[`与.`]``^N$``^[N]$`

您的正则表达式匹配的是一个由单个字符组成的字符串：`N`.

`^`匹配字符串的开头和`$`结尾之间唯一有效的字符是`N`，所以它**只会**匹配字符串`N`。

**更新：**

如果您所追求的只是一个由 组成的字符串`N`，那么您根本不需要正则表达式，正如其他人所建议的那样，使用`if (word == "N")`或者如果您想`N`从更大的字符串中获取任何单词，那么您将使用`\bN\b`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-16T15:00:41.517

如果您只是想找到与字符串完全匹配的内容，`"N"`则无需使用正则表达式！

```
if ( word == "N" ) ... 
```

# android - 如何从媒体播放器 Android 获取循环计数

> ID：16040269
> 
> 赞同：1
> 
> 时间：2013-04-16T14:53:01.250
> 
> 标签：android, loops, audio, media-player

如何获取已完成循环值的数量？我想将值分配给`count`，以便用户知道歌曲重复了多少次。帮助我，并提前感谢。

```
int count=0;    
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
        MediaPlayer mp = MediaPlayer.create(MainActivity.this, R.raw.song1);
         mp.setLooping(true);
        playsound();
}
    public void playsound() {
    mp.start();

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T15:06:10.753

MediaPlayer 没有此功能。所以对此你必须自己处理循环。禁用循环并使用以下内容

```
public void onCompletion(MediaPlayer player) {
    count++;
    player.seekTo(0);
    player.start();
} 
```

# c++ - 如何使用 c/c++ 宏参数创建字符串

> ID：16040274
> 
> 赞同：4
> 
> 时间：2013-04-16T14:53:13.193
> 
> 标签：c++, c, c-preprocessor

我正在努力实现这一目标：

> char * fname = "results5.txt"

使用这样的宏：

```
#define FILENAME(NUM) "results" NUM ".txt"

int number = 5;
char * fname = FILENAME(number); 
```

有可能这样做吗？怎么了？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T14:54:35.887

## C

由于您标记了 C 并想要基于宏的解决方案，`#`因此在宏中使用 a

```
#define FILENAME(NUM) "results"#NUM".txt"
                               ^^^^^
char *fname = FILENAME(5); 
```

小心这种方式你不能使用变量。

```
int number = 5;
char *fname = FILENAME(number); // IMPOSSIBLE 
```

否则，要使用变量，您应该使用函数。

* * *

## C++

让一切变得更容易

```
std::string FileName(int d)
{
    return "results"+ std::to_string(d) +".txt";

    //  or...
    //  std::ostringstream str;
    //  str << "results" << d << ".txt";
    //  return str.str();
}

...

int number = 5;
std::string filename = FileName(number); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T15:01:34.317

您已将您的问题标记为`C`和`C++`。对于这一`C++`部分，最简单的是：

```
inline std::string FILENAME(int number) {
  std::ostringstream s;
  s << "results" << number << ".txt";
  return s.str();
}

int number = 5;
std::string fname = FILENAME(number); 
```

当然，您可能会`FILENAME`为此使用比全大写更好的名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T15:01:12.447

```
#include <sstream>
#include <string>

int number = 5;
std::stringstream ss;
ss << "results" << number << ".txt"
std::string filename = ss.str(); //if you need it as C++ string
char const* filename = ss.str().c_str(); //if you need it as C string 
```

# python - 3D 极坐标图 - griddata 不允许三次插值，只有线性会导致“不平滑”图

> ID：16040277
> 
> 赞同：3
> 
> 时间：2013-04-16T14:53:18.417
> 
> 标签：python, numpy, matplotlib, scipy

我正在绘制天线周围场强的 3D 极坐标图。数据样本如下所示：

```
0.5  0  -22
0.5  0  -21
0.5  0  -22
0.5  0  -21
0.5  0  -22
0.5  0  -22
0.5  0  -22
0.5  0  -22 
```

第 1 列是天线的半径，第 2 列是天线周围的角度，第 3 列是场强的 dBm 值。

我在每个点都采集了一些样本，这些样本由我的脚本平均。3 个对应的列表 R、P 和 Z，其中包含每个独特点的场强的半径、角度和线性值。

我想绘制值的 3D 极坐标图。为此，我将 R 和 P 值从极坐标转换为笛卡尔坐标 X 和 Y。

```
# transform them to cartesian system 
X,Y = R*np.cos(P),R*np.sin(P) 
```

然后我使用以下代码插入数据

```
xi = np.linspace(X.min(),X.max(),100)
yi = np.linspace(Y.min(),Y.max(),100)

zi = griddata((X, Y), Z, (xi[None,:], yi[:,None]), method='linear') 
```

然后我创建一个网格并绘制数据如下

```
xig, yig = np.meshgrid(xi, yi)

surf = ax.plot_surface(xig, yig, zi,linewidth=0)
plt.show() 
```

这将创建以下图

![阴谋](https://i.stack.imgur.com/hcYiT.png)

有没有办法让表面更光滑？使用 griddata type=cubic 插值数据不起作用，只是用“nan”值填充矩阵 zi。也许有更好的 3D 替代方案，或者我做错了什么？

使用建议的 interp2d 函数刚刚导致 zi 被 nan 值填充。我已通过以下方式使用它：

```
zi = griddata((X, Y), Z, (xi[None,:], yi[:,None]), method='linear')
interp2d(xi, yi, zi, kind='cubic') 
```

和

```
zi = griddata((X, Y), Z, (xi[None,:], yi[:,None]), method='linear')
zi = interp2d(xi, yi, zi, kind='cubic') 
```

两者都给出了以下错误，

```
Warning:     No more knots can be added because the number of B-spline coefficients
already exceeds the number of data points m. Probably causes: either
s or m too small. (fp>s)
kx,ky=3,3 nx,ny=104,105 m=10000 fp=nan s=0.000000 
```

我也试过

```
interp = interp2d(X,Y,Z,kind='cubic'); new_zi = interp(xi, yi) 
```

这给了我一个类似的错误：

```
Warning:     No more knots can be added because the number of B-spline coefficients
already exceeds the number of data points m. Probably causes: either
s or m too small. (fp>s)
kx,ky=3,3 nx,ny=14,15 m=104 fp=nan s=0.000000 
```

虽然 m 小得多。

看起来问题是 s 为 0 且 fp=nan。这些价值观是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T19:19:02.660

`s`是设置给定点的误差的参数（即插值表面可以错过源点的距离）。如果`s=0`，则插值必须准确地命中每个点。如果您的数据中有噪音，则较高导数将不会变得平滑，它会 1）使您的拟合表面看起来很糟糕，因为它会扭曲自己以匹配值*，并且*较高导数 2）需要*很多*控制点。

对于嘈杂的数据，高阶插值实际上可能比线性插值差得多。

根据`interp2D`文档，它实际上只是调用`bisplrep`（[doc](http://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.bisplrep.html#scipy.interpolate.bisplrep)），您可以直接使用它，并且可以访问更多旋钮。

要获得“母亲”插值，您将不得不接受对原始数据进行某种程度的平滑处理。是否可以由您决定。

# vim - Vi - 保留字和函数的“pop”解释

> ID：16040278
> 
> 赞同：2
> 
> 时间：2013-04-16T14:53:18.670
> 
> 标签：vim, syntax-highlighting, vi

我正在学习一种新的编程语言（[Neuron](http://www.neuron.yale.edu/)），碰巧它有许多特定于语言的保留字。

我想知道是否有一种方法可以配置 Vi 来模拟一些图形代码编辑器，当将鼠标悬停在配置了它的函数上时，这些编辑器会弹出一个带有函数 doc 的小窗口。

理想情况下（我可能只是在做白日梦，但*它是*Vi，所以值得一问） - 当光标位于单词或函数名称上时，我想按一些键序列并显示预配置的文本Vi 的命令行。

![期望的行为模型](https://i.stack.imgur.com/7VhUk.jpg)

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T15:09:29.863

这个怎么样; 这有点简单，但是一个很好的起点：

```
function! ShowExplanation( word )
    if a:word ==# 'reserved'
        echo "explanation"
    elseif a:word ==# 'text'
        echo "another explanation"
    else
        echo
    endif
endfunction
nnoremap <silent> <Leader><Leader> :call ShowExplanation(expand('<cword>'))<CR> 
```

其他想法是使用`CursorHold`事件在您暂停时自动显示，或使用*预览窗口*显示更长的解释。

# reporting-services - 隐藏（或过滤）列组的某些列

> ID：16040282
> 
> 赞同：2
> 
> 时间：2013-04-16T14:53:45.730
> 
> 标签：reporting-services, reportbuilder3.0

我正在使用 Report Builder 3 矩阵并指定行组和列组。基本上它是一个主细节类型的情况，在我的例子中，实体是继电器和联系人。每个继电器有多个触点。下面给出了两者的一些重要特性。

**中继：**
名称（简单字段）、
类型（枚举字段）、
联系人（到联系人实体的导航字段。一对多）

**联系人：**
DisplayName（简单字段）
AllotedToSheet（简单字段）。

这是报告的样子。列是使用列分组从**联系人表的“显示名称”字段生成的。**

![生成的报告样本](https://i.stack.imgur.com/9Hnun.png)

现在问题来了。我在上面的报告中标记了 2 个区域。之所以如此，是因为我有两种类型的继电器（比如现在）。联系人表的“显示名称”字段对于特定继电器类型是相同的，因此我在报告中得到两组列（如标记）。基于中继类型，我只想为整个报告生成或显示一组列，因为另一组对于中继类型没有意义，并且每个中继类型都有自己生成的报告 (rdl)。那么我该如何实现这一点。

总之，对于使用 Column Groups 生成的列，如何根据某些数据库 field.value 条件从报告中过滤或隐藏某些列

**编辑：报表设计器视图** ![在此处输入图像描述](https://i.stack.imgur.com/Gy5Vz.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T15:21:53.177

您是否尝试将**列可见性**设置为基于表达式？

![在此处输入图像描述](https://i.stack.imgur.com/IJhpv.png)

![在此处输入图像描述](https://i.stack.imgur.com/SgHYZ.png)

将表达式设置为：

```
=IIf(Fields!RelayType.Value = "Relay1", false, true) 
```

根据需要更新不同的继电器/列组合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T09:41:09.213

我认为最好通过 SQL 中的连接来链接表。这将删除数据集中填充的额外列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T11:48:38.230

受@glh 建议直接修改 DataSet 查询的启发，我只能生成与特定 Relay_Type 相关的记录（在我的情况下为列）。在查询中，我只需要添加一个 SQL **WHERE**子句，该子句将加载仅特定 Relay_Type 的详细信息记录。这样，与特定 Relay_Type 相关的唯一列由 DataSet 中的 Query 生成。因此无需更改可见性表达式来隐藏列。事实上，可见性表达式并没有隐藏列，它只是“将其删除”在报告中占用空间。因此，对于我的情况，修改 SQL 似乎是更好的选择。

涅槃。

# jquery - 如何最后加载jquery

> ID：16040284
> 
> 赞同：0
> 
> 时间：2013-04-16T14:53:49.787
> 
> 标签：jquery, load

我在网上搜索过，找到了一些答案，但没有一个有效。我只想让我的网站加载得更快。我已经缩小了我的图像。现在正在使用 jquery 并使用谷歌托管的版本。虽然它没有托管在我的网站上，但它是网站中最重的文件 (32kb)，它在任何其他图像之前加载第二行。我尝试在正文结束标记之前添加一个 javascript，如下所示：

```
<script language="javascript">

      var e=document.createElement('script');
      e.setAttribute('type','text/javascript');
      e.setAttribute('src','http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js');

      document.body.appendChild(e)

      var f=document.createElement('script');
      f.setAttribute('type','text/javascript');
      f.setAttribute('src','myjs.js');
      document.body.appendChild(f)
  </script> 
```

在 firebug 控制台上，它显示 jquery 是最后加载的。但是它也显示了未捕获的引用错误 $ 未定义，这是猜测当 jquery 未正确加载时出现的错误。

如果我将这两个 js 文件放在 head 标签内，一切正常。

我怎样才能完成这项任务？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T15:05:27.943

动态加载javascript文件会导致它们被异步加载，所以你不能保证哪个库会先加载。如果您需要强制执行顺序（就像使用 jQuery 之类的库一样），您需要向页面添加带有属性的`script`标签，如下所示：`src`

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript" src="myjs.js"></script> 
```

如果您将脚本标签添加为元素中的最后一个`body`元素而不是`head`，它将使加载速度更快（渐进增强）。

**编辑**正如其中一位评论者所说，您可以阅读[此问题](https://stackoverflow.com/questions/10113366/load-jquery-with-javascript-and-use-jquery)的答案以获取更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-31T03:42:39.583

我无法在特定系统中强制脚本顺序，我能够通过将我的 jQuery 代码包装为`addEventListener`

```
<script><!--
(function() {
    'use strict';
    window.addEventListener('load', function() {
        // All resources loaded
        $('#my-selector').on('click', function(event){
            //Do something
        });
    }, false);
})();
//--></script> 
```

这使我可以在文档底部加载 jQuery，并且在需要的 DOM 中进一步在我的代码中使用“$”。不是所有情况的完美解决方案，但符合我的目的；）

# python - 就地编辑 Python 字典或将 json 解析为对象

> ID：16040287
> 
> 赞同：2
> 
> 时间：2013-04-16T14:53:54.847
> 
> 标签：python, json, dictionary

我绝不是 Python Guru，但我知道自己的方式。然而，在过去的两个小时里，我一直在抨击以下内容：

我正在使用 json.loads() 函数解析来自 WCF Web 服务的 JSON 响应。结果是我在整个应用程序中使用的 Python 字典。但是，我现在需要混淆 id、reseller_id 等以便在 HTTP GET 请求中使用。

这是**一个****响应**示例：（注意，我有很多这样的响应，所以我正在寻找一个通用的解决方案。）**我想用 id 值的哈希替换任何 id 的值**

 ****```
{
    "token":"String content",
    "user":{
        "distributor":{
            "email":"String content",
            "id":2147483647,
            "name":"String content"
        },
        "email":"String content",
        "first_name":"String content",
        "id":2147483647,
        "last_name":"String content",
        "reseller":{
            "email":"String content",
            "id":2147483647,
            "name":"String content",
            "portal_css":"String content",
            "portal_logo":"String content",
            "portal_name":"String content",
            "portal_url":"String content"
        },
        "role":2147483647
    }
} 
```

我使用以下代码尝试了各种策略：

```
result = json.loads(json_result, object_hook=lambda d: namedtuple('X', d.keys())(*d.values())) 
```

和

```
def fun(d):
    if 'id' in d:
        yield d['id']
    for k in d:
        if isinstance(d[k], list):
            for i in d[k]:
                for j in fun(i):
                    yield j 
```

我无法让它正常工作。所以：

**问题 1：** 我可以将 json 转换为（匿名）Python 对象吗？如何转换？

**问题 2：** 我可以就地编辑结果字典吗？

**问题3：** 当一切都失败时；有人知道如何实现这一目标吗？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T15:04:34.010

```
json.loads(data) 
```

解析 json 字符串`data`并返回一个 Python `dict`，我猜你可以称之为匿名，直到你将它分配给一个变量：

```
d = json.loads(data) 
```

然后，您可以就地修改字典。假设您的所有响应具有相同的结构，您可以散列`id`如下：

```
d["user"]["id"] = your_hash_function(d["user"]["id"]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T15:28:21.650

是的。 [`json.loads`](http://docs.python.org/2/library/json.html#json.loads)根据实际的 json 对象返回一个 Python 对象。查看[转换表](http://docs.python.org/2/library/json.html#json-to-py-table)以获取更多详细信息。无需像在 .Net 中那样寻找特殊的匿名对象。

```
result = json.loads(json_text) 
```

您可以`result`就地编辑它：

```
result['user']['id'] = 'some_new_value' 
```

`object_pairs_hook`解析 json 时尝试参数：

```
def hide_ids(o):
    d = dict(o)
    if 'id' in d:
        d['id'] = '----{}----'.format(d['id'])
    return d

result = json.loads(json_text, object_pairs_hook=hide_ids) 
```

只需使用您喜欢的混淆逻辑进行修改，您就可以开始使用了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T15:11:36.870

这是我快速整理的解决方案。它通过您的字典递归并在键为 id 时替换值。这不是最终解决方案，因为它不支持列表，但我确定这是否适合您，您可以从那里获取它吗？

```
def f(d):
    _dict = {}
    for k, v in d.items():
        if isinstance(v, dict):
            _dict.update({k: f(v)})
        else:
            if k == 'id':
                print 'id found', v
                v = EncryptValueHere(v)
            _dict.update({k:v})

    return _dict 
```****

# amazon-web-services - 填充或终止 EC2 Spot 请求

> ID：16040293
> 
> 赞同：1
> 
> 时间：2013-04-16T14:54:11.797
> 
> 标签：amazon-web-services, amazon-ec2

我正在使用 EC2 API 在 EC2 上请求 SPOT 实例 - 下面的代码在 node.js 上运行良好。问题是，如果价格太低，EC2 请求将保持活动状态，如果价格低于设定的价格，则会被填充。我知道我可以编写自己的逻辑来查找未填充的请求并杀死它们，但想知道是否有一种干净的方法可以将其作为初始请求的一部分。

`var SPOTRequest = { SpotPrice : price, InstanceCount : NumToLaunch, Type : "one-time", LaunchSpecification :sClient }`

 ````
ec2.client.requestSpotInstances(SPOTRequest,function (err, data) {
      if (err) {
          returnPackage.status = "ERROR:"+err;
          res.write(JSON.stringify(returnPackage)); 
          res.end();  
          console.log(err);

      }          
      else {
            returnPackage.status = "SUCCESS";
            res.write(JSON.stringify(returnPackage));
            res.end();
            console.log(data);
        }

}); 
```` 

`}`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T19:53:05.473

如果未在所需的时间范围内填写，您可以使用[requestSpotInstances()](http://docs.aws.amazon.com/AWSJavaScriptSDK/latest/AWS/EC2_20130201.html#requestSpotInstances-property)`ValidUntil`方法中的参数让您的请求立即自动过期：

> ValidUntil -（日期）
> 
> 请求的结束日期。
> 
> 如果这是一次性请求，则该请求将保持活动状态，直到所有实例启动、请求被取消或到达此日期。如果请求是持久的，它将保持活动状态，直到它被取消或达到此日期和时间。

# joomla - 我忘记了 Jsecure admin url，我怎样才能找回它？

> ID：16040295
> 
> 赞同：1
> 
> 时间：2013-04-16T14:54:28.850
> 
> 标签：joomla, joomla2.5, joomla-extensions, backend, custom-backend

如果有人知道 Jsecure 组件，可以看出隐藏 Joom 后端 url 的非常好的扩展......但我忘记了我给 Jsecure 提供了什么类型的词来访问我的后端。

我在互联网上找到了很少的 sulotion，我怎么能看到它丢失的那个关键是什么......可能所有的 sulotion 仅适用于 Joomla 1.5，但我使用的是 Joomla 2.5。所以我在 prefix_extensions 表中找到了 Jsecure 行并打开它。我想我运气不错，但是当我看到“Params”时完全是空的。我无法在任何地方看到此管理员 url 密钥...有人可以帮我请我如何将其取回我的管理员吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T01:54:06.410

JSecure 不会将密钥保存在数据库中。

最简单的方法是使用 phpMyAdmin（或在您的主机上等效）并禁用扩展。

在 phpMyAdmin 中，找到您的 JSecure 行并将列`#__extensions`的值更改为，这将禁用扩展，然后您可以返回重新启用 JSecure 并设置一个新的密码。`enabled``0``Extension Manager`

*顺便说一句，如果您已经在使用 Akeeba AdminTools - 此功能（`/adminsitrator`访问的秘密词）内置于 WAF 设置中。*

这些是 JSecure 中包含的手动删除说明：

> ### 以下是手动删除 jSecure 2.1.10 Joomla 2.5 的步骤：
> 
> 从数据库中删除组件和插件条目。
> 
> ```
> jos_jsecurelog
> jos_assets
> com_jsecure - jsecure
> jos_extensions
> System - jsecure - plugin
> jsecure - component
> jos_menu
> COM_JSECURE_AUTHENTICATION
> BASIC_CONFIGURATION
> ADVANCED_CONFIGURATION
> VIEW_LOG
> HELP 
> ```
> 
> 删除下面提到的文件夹和文件。
> 
> ```
> \administrator\components\com_jsecure
> \administrator\language\en-GB
> en-GB.com_jsecure.ini,
> en-GB.com_jsecure.sys.ini,
> en-GB.plg_system_jsecure.ini
> \components\com_jsecure
> \plugins\system\jsecure 
> ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-01T07:10:21.753

使用 ftp 管理器（filezla 或其他）去：插件 => 系统 => 查找“jsecure.php”并将文件重命名为“jsecureshit.php”（或其他），下次尝试访问您的站点并且：它有效！就是这样！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T20:50:08.450

我已经得到了我的问题的答案。我希望这对使用该组件的每个人都有帮助。不要手动删除 Jsecure 文件，因为之后您将永远无法再次使用此组件。只需使用 Joomla 扩展管理器卸载！

感谢cppl找到解决方案！

因此，首先，问题是：如果您忘记了密钥，如何取回 Joomla 2.5 管理员。打开你的 MySQL 并找到 your-prefix_extensions 表。找到“System - jsecure”列并打开它进行编辑。将“启用”和“访问”中的 1 更改为 0。清理您的 Joomla 缓存，或等待自动清理。之后，您可以访问您的管理区域。如果可能没有，请找到“jsecure”列并打开它进行编辑。将“启用”中的 1 更改为 0。但是当您登录管理区域时，在更改回 1 后，因为您将永远不会在管理页面中看到该组件。这就是找回管理区域的解决方案。

但！我认为 Jsecure 3.0 有一个错误，因为如果我更改密钥并再次启用该组件，您将无法访问您的管理区域。我会发送这个错误，但最好升级到 3.0.1。重要的是，您可以取回您的管理员，并且可以像手动一样更好地卸载该组件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-29T14:57:34.643

再添加2个文件。如果您已为其应用密钥，则在管理员文件夹中删除 .htaccess 和 .htpasswd

# java - SOAP 对象返回 null

> ID：16040296
> 
> 赞同：0
> 
> 时间：2013-04-16T14:54:33.037
> 
> 标签：java, soap, entity, one-to-many, many-to-one

我有一些相互关联的简单对象。一切都很好，但是当我为 SOAP 请求发布我的对象时，当我设置客户端和 cartrack 之间的关系时，它返回 null。我究竟做错了什么？

这是我的代码：

```
@Entity
public class Client extends User implements Serializable {
    @Temporal(javax.persistence.TemporalType.DATE)
    private Date birthdate;
    private String address;
    private String zipcode;
    private String city;
    private String phone;
    private String info;
    private boolean active;
    @OneToMany( cascade = CascadeType.ALL,
                fetch = FetchType.EAGER,
                targetEntity = Cartrack.class, 
                mappedBy = "client"
                )
    private List<Cartrack> cartracks;

    /**
     * @return the birthdate
     */
    public Date getBirthdate() {
        return birthdate;
    }

    /**
     * @param birthdate the birthdate to set
     */
    public void setBirthdate(Date birthdate) {
        this.birthdate = birthdate;
    }

    /**
     * @return the address
     */
    public String getAddress() {
        return address;
    }

    /**
     * @param address the address to set
     */
    public void setAddress(String address) {
        this.address = address;
    }

    /**
     * @return the zipcode
     */
    public String getZipcode() {
        return zipcode;
    }

    /**
     * @param zipcode the zipcode to set
     */
    public void setZipcode(String zipcode) {
        this.zipcode = zipcode;
    }

    /**
     * @return the city
     */
    public String getCity() {
        return city;
    }

    /**
     * @param city the city to set
     */
    public void setCity(String city) {
        this.city = city;
    }

    /**
     * @return the phone
     */
    public String getPhone() {
        return phone;
    }

    /**
     * @param phone the phone to set
     */
    public void setPhone(String phone) {
        this.phone = phone;
    }

    /**
     * @return the info
     */
    public String getInfo() {
        return info;
    }

    /**
     * @param info the info to set
     */
    public void setInfo(String info) {
        this.info = info;
    }

    public String dateToString(){
        SimpleDateFormat formatter = new SimpleDateFormat("yyyy-MM-dd");
        return formatter.format(this.birthdate);
    }

    public boolean isActive() {
        return active;
    }

    public void setActive(boolean active) {
        this.active = active;
    }

    public List<Cartrack> getCartracks() {
        return cartracks;
    }

    public void setCartracks(List<Cartrack> cartracks) {
        this.cartracks = cartracks;
    }
}

@Entity
public class Cartrack implements Serializable {

    @Id
    private String id;
    @OneToOne(  mappedBy = "cartrack", 
                targetEntity = Vehicle.class,
                cascade = CascadeType.ALL,
                fetch = FetchType.EAGER
            )
    private Vehicle vehicle;
    @ManyToOne(targetEntity = Client.class)
    private Client client;

    /**
     * @return the id
     */
    public String getId() {
        return id;
    }

    /**
     * @param id the id to set
     */
    public void setId(String id) {
        this.id = id;
    }

    /**
     * @return the vehicle
     */
    public Vehicle getVehicle() {
        return vehicle;
    }

    /**
     * @param vehicle the vehicle to set
     */
    public void setVehicle(Vehicle vehicle) {
        this.vehicle = vehicle;
    }

    @Override
    public boolean equals(Object obj) {
        if (!(obj instanceof Cartrack)) {
            return false;
        }
        return ((Cartrack) obj).id == this.id;
    }

    public Client getClient() {
        return client;
    }

    public void setClient(Client client) {
        this.client = client;
    }
}

@Entity
public class Vehicle implements Serializable {

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;
    private String licenseNr;
    private boolean stolen;
    @OneToOne(targetEntity = Cartrack.class)
    private Cartrack cartrack;

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    /**
     * @return the licenseNr
     */
    public String getLicenseNr() {
        return licenseNr;
    }

    /**
     * @param licenseNr the licenseNr to set
     */
    public void setLicenseNr(String licenseNr) {
        this.licenseNr = licenseNr;
    }

    /**
     * @return the stolen
     */
    public boolean isStolen() {
        return stolen;
    }

    /**
     * @param stolen the stolen to set
     */
    public void setStolen(boolean stolen) {
        this.stolen = stolen;
    }

    /**
     * @return the cartrack
     */
    public Cartrack getCartrack() {
        return cartrack;
    }

    /**
     * @param cartrack the cartrack to set
     */
    public void setCartrack(Cartrack cartrack) {
        this.cartrack = cartrack;
    }
} 
```

# wordpress - 菜单中的字幕

> ID：16040301
> 
> 赞同：1
> 
> 时间：2013-04-16T14:54:42.243
> 
> 标签：wordpress, wordpress-theming

我买了一个高级模板并导入了示例设置，菜单下面有这样的字幕：“主页”+“从这里开始”。

我找不到在哪里设置或更改这些字幕。它可能在哪里？如果没有选项，我在哪里查看代码？

模板是[“健壮的”](http://themeforest.net/item/robust-responsive-multipurpose-wordpress-theme/4176764?WT.ac=portfolio_thumb&WT.seg_1=portfolio_thumb&WT.z_author=rifki)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T14:56:11.293

尝试仪表板中的**外观 > 菜单**。

看下说明。

如果您没有看到它，请单击右上角的**屏幕选项**并选择描述。

# google-app-engine - GAE 无法从应用程序获取服务网址

> ID：16040303
> 
> 赞同：2
> 
> 时间：2013-04-16T14:54:42.723
> 
> 标签：google-app-engine

**在应用程序 A**

我使用 BlobStore API 将图像上传到 Google Cloud Storage (GCS)。从同一个应用程序中，我可以使用图像的云存储文件名（例如`"/gs/bucket-name/object-file-name"`）获取服务 URL

**在应用程序 B**

我尝试使用相同的文件名获取服务 URL。但是我得到了一个`ImagesServiceFailureException`，而且似乎很清楚这是由于访问权限造成的。

但是，我不确定权限到底有什么问题。在我的 Google API 项目下，我已将两个 GAE 应用程序添加为具有`Can edit`权限的团队成员。我的理解是项目所有者和项目作者组对该对象具有 FULL_CONTROL 权限（根据[https://developers.google.com/console/help/#DifferentRoles](https://developers.google.com/console/help/#DifferentRoles)）

是否`getServingUrl(ServingUrlOptions.Builder.withGoogleStorageFileName("object_name"))`仅限于在同一个 GAE 应用程序中上传的图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T13:35:24.910

我通过使用通常的`getServingUrl(ServingUrlOptions.Builder.withBlobKey(blobKey))`. 而不是`getServingUrl(ServingUrlOptions.Builder.withGoogleStorageFileName(gsFileName))`.

需要注意的是，这个 blob 密钥是使用 BlobstoreService 的 createGsBlobKey 生成的，它不是通常的 blob 密钥。

# solr - SOLR 4 - 如何索引html纯文本

> ID：16040307
> 
> 赞同：1
> 
> 时间：2013-04-16T14:54:56.367
> 
> 标签：solr

使用 SOLR 4，如何索引其中包含 HTML 代码的纯文本文档，而不会删除 HTML？

例如，`<b>bold text</b>`变成`bold text`

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T17:13:39.560

您存储文本文档的字段的 fieldType 很可能正在实现`solr.HTMLStripCharFilterFactory`. 这是在`<b> </b>`将文档存储在索引中时从文档中删除标签。您可以在 schema.xml 文件中检查这一点。

[您将需要通过删除该CharFilterFactory](http://docs.lucidworks.com/display/solr/CharFilterFactories)或定义已删除的新字段类型来修改此字段的fieldType。有关设置架构的更多信息，请参阅以下资源。

*   [文档、字段和架构设计](http://docs.lucidworks.com/display/solr/Documents,+Fields,+and+Schema+Design)
*   [了解分析器、标记器和过滤器](http://docs.lucidworks.com/display/solr/Understanding+Analyzers,+Tokenizers,+and+Filters)

# python - Scrapy：CrawlSpider 规则 process_links vs process_request vs 下载中间件

> ID：16040311
> 
> 赞同：5
> 
> 时间：2013-04-16T14:55:10.447
> 
> 标签：python, web-crawler, scrapy

这不是“我如何使用这些？” 以及更多“我何时/为什么要使用这些？” 键入问题。

**[编辑：这个问题与这个问题](https://stackoverflow.com/questions/12553117/how-to-filter-duplicate-requests-based-on-url-in-scrapy)几乎重复，它建议使用下载中间件来过滤此类请求。在下面更新了我的问题以反映这一点。**

在[Scrapy CrawlSpider 文档](http://doc.scrapy.org/en/latest/topics/spiders.html)中，规则接受两个可调用对象，`process_links`和`process_request`（下面引用的文档以便于参考）。

默认情况下，Scrapy 过滤重复的 URL，但我希望对请求进行额外的过滤，因为我得到了具有多个*不同*URL 链接到它们的页面的重复。像，

```
URL1 = "http://example.com/somePage.php?id=XYZ&otherParam=fluffyKittens"
URL2 = "http://example.com/somePage.php?id=XYZ&otherParam=scruffyPuppies" 
```

但是，这些 URL 将在查询字符串中具有类似的元素 - 如上所示，它是`id`.

我认为使用`process_links`我的蜘蛛的可调用来过滤重复请求是有意义的。

**问题：**

1.  有什么理由`process_request`可以更好地完成这项任务吗？
2.  如果不是，您能否举例说明何时`process_request`更适用？
3.  `process_links`下载中间件是否比两者更合适`process_request`？如果是这样，您能否举例说明何时`process_links`或`process_request`将是更好的解决方案？

**文档引用：**

> process_links 是一个可调用的或一个字符串（在这种情况下，将使用来自具有该名称的蜘蛛对象的方法），它将为使用指定的链接提取器从每个响应中提取的每个链接列表调用。这主要用于过滤目的。
> 
> process_request 是一个可调用的，或者是一个字符串（在这种情况下，将使用来自具有该名称的蜘蛛对象的方法）将在此规则提取的每个请求中调用，并且必须返回一个请求或 None （过滤掉请求）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-16T15:07:22.447

1.  不，`process_links`这里是您更好的选择，因为您只是在过滤 url，并且将节省必须创建`Request`in`process_request`以丢弃它的开销。

2.  `process_request`如果您想在发送它之前稍微按摩`Request`一下，例如如果您想添加一个`meta`参数或者可能添加或删除标题，那么它很有用。

3.  您不需要任何中间件，因为您需要的功能直接内置在`Rule`. 如果`process_links`没有内置到规则中，那么您将需要创建自己的中间件。

# node.js - 使用 fluent-ffmpeg node.js 模块的流式视频错误

> ID：16040313
> 
> 赞同：0
> 
> 时间：2013-04-16T14:55:13.220
> 
> 标签：node.js, ffmpeg, flowplayer

我正在运行 fluent-ffmpeg[示例](https://github.com/schaermu/node-fluent-ffmpeg)来流式传输视频，效果很好。现在在合同中显示基于 flashe 版本的 flowplayer 中的视频，我现在使用的是 html5 版本的 flowplayer，但它说找不到视频文件。

```
app.get('/video2/abc', function(req, res) {

  console.log('/video/:filename');
  res.contentType('mp4');
  var pathToMovie = 'public/flowplayer/470x250.mp4' ; 
  var proc = new ffmpeg({ source: pathToMovie, nolog: true })
    .writeToStream(res, function(retcode, error){
      if(error) console.error('error',error); 
      else console.log('file has been converted succesfully');
    });
}); 
```

这是我的 html 模板。

```
<html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8">
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"> </script>
        <script src="http://releases.flowplayer.org/5.4.0/flowplayer.min.js"></script>
        <link rel="stylesheet" type="text/css" href="http://releases.flowplayer.org/5.4.0/skin/minimalist.css" />
        <title>node-fluent-ffmpeg</title>
    </head>
    <body>
   <script>
   // global configuration (optional)
   flowplayer.conf = {
      rtmp: "rtmp://s3b78u0kbtx79q.cloudfront.net/cfx/st",
      swf: "http://releases.flowplayer.org/5.4.0/flowplayer.swf"
   };

   // force flash with query - only for testing, do not use this switch in production!
   if (/flash/.test(location.search)) flowplayer.conf.engine = "flash";

   // install player manually
   $(function() {
      $(".player").flowplayer({
         // reverse fraction of video aspect ratio
         // video dimensions: 470px / 250px
         ratio: 25/47
      });
   });
</script>
    <div class="flowplayer">
        <video>
           <source type="video/mp4" src="/video2/your_movie"/>
        </video>
    </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-23T12:30:36.780

我遇到了类似的问题，并决定改用 video-js。开箱即用，效果很好。

看看： http: [//www.videojs.com/](http://www.videojs.com/)

就我而言，我用 jquery 注入视频标签并动态加载视频。像这样：

```
 //I append the video tag so I remove it if I already appended it before.
    if($('#player').length) $('#player').remove();

    $('body').append('<video id="player" class="video-js vjs-default-skin" controls preload="auto" width="100%" height="100%" poster="my_video_poster.png" data-setup="{}"> <source src="'+url+'" type="video/webm"></video>');

    // Load the player dynamically. see: http://www.videojs.com/docs/setup/
    _V_("player", {}, function(){}); 
```

# windows - 无法通过 Robot Framework IDE + Selenium 使用 Firefox（版本 20）实例运行“打开浏览器”

> ID：16040314
> 
> 赞同：0
> 
> 时间：2013-04-16T14:55:14.703
> 
> 标签：windows, firefox, selenium, selenium-webdriver, robotframework

我正在寻找一种方法，利用 RIDE 和 Robot Framework，运行 Firefox（版本 20——最新版本），打开我喜欢的页面。这过去与早期的 Firefox 版本无关，但现在似乎与 Firefox 20 处理配置文件的方式有关。当我尝试运行通常的打开浏览器命令时，Firefox 会弹出，但标题中没有 URL，而且毫无生气。

Selenium Firefox 的驱动程序似乎提供了一种方法来定义要查找的配置文件目录，但这似乎无济于事：

![在此处输入图像描述](https://i.stack.imgur.com/K9TZk.png)

（给定目录对应于我通过 Firefox 创建的新配置文件）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-16T10:09:06.050

从[此处输入链接描述](https://code.google.com/p/selenium/issues/detail?id=5508#c4)中，我发现：“当有自定义配置文件时，生成的配置文件路径“newprof”可能是一个 unicode 字符串，并且 webdriver 只接受字节字符串。”

尝试在 selenium/webdriver/firefox/firefox_profile.py 中添加和删除一些行，详细信息在这里：[https ://github.com/SeleniumHQ/selenium/pull/55/files#r4178907](http://github.com/SeleniumHQ/selenium/pull/55/files#r4178907)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-09T08:11:39.353

试试这个解决方案： [https](https://code.google.com/p/selenium/issues/detail?id=5508) ://code.google.com/p/selenium/issues/detail?id= 5508 希望它有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-08T10:05:22.617

`TypeError: environment can only contain strings`当我尝试使用 Firefox 的机器人框架时，我也会遇到。

原因：因为在 selenium-2.32.0-py2.7.egg 包中，文件`selenium\webdriver\firefox\firefox_profile.py`将使用`from __future__ import unicode_literals`，所以 firefox profile.path 将是 unicode dict。所以当`_start_from_profile_path()`调用时`Popen(command, stdout=PIPE, stderr=STDOUT, env=self._firefox_env).communicate()`，会弹出 TypeError。

解决方案：将 Selenium lib 更新到最新版本或删除`from __future__ import unicode_literals`行`firefox_profile.py`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T18:34:39.627

Selenium 说您需要升级到 2.32.0 以使其与 FF 20 兼容。但是，当我这样做时，我遇到了一个不同的问题：它抛出“TypeError：环境只能包含字符串”

我自己仍在寻找解决问题的方法...也许您可以升级 Selenium 并查看是否有相同的结果？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-10T05:05:56.543

转到 firefox_profile.py 文件并删除第一行并添加第二行。（第 157 行）

py/selenium/webdriver/firefox/firefox_profile.py

*   返回 self.profile_dir

*   返回 str(self.profile_dir)

这对我来说非常好

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-09-14T10:27:24.080

请检查您是否已将 geckodriver.exe 文件添加到 Python 安装文件夹。默认位置在 C 盘。例如- C:\Python27。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2017-09-14T10:33:39.243

使用最新和稳定版本的浏览器总是好的。请确保您拥有最新的 geckodriver.exe 并安装 Firefox ESR 版本。

# asp.net - “成功救了！” 提交 ASP.NET 后弹出

> ID：16040315
> 
> 赞同：0
> 
> 时间：2013-04-16T14:55:15.797
> 
> 标签：asp.net, submit

如果有人插入新的客户/类别等，我想要某种显示：“成功保存”的小屏幕。我知道有：`OnClientClick="return confirm (text)"`但这并不是我要找的地方。

**我的代码：**

```
 Protected Sub Button1_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles Button1.Click
    Dim dbconn As SqlConnection
    Dim dbcomm As SqlCommand
    Dim strsql, Categorie, Klant, Website, Titel, Naslag As String

    Categorie = DropDownCat.SelectedValue.ToString
    Klant = DropDownList1.SelectedValue.ToString
    Website = TextBoxWebsite.Text
    Titel = TextBoxTitel.Text
    Naslag = TextBoxslag.Text

    dbconn = New SqlConnection(System.Configuration.ConfigurationManager.AppSettings("sqlString"))
    dbconn.Open()

    strsql = "INSERT INTO tbl_Project (KlantID, Titel, Naslag, Website, CatID) VALUES ('" + Klant + "','" + Titel + "','" + Naslag + "','" + Website + "','" + Categorie + "')"
    dbcomm = New SqlCommand(strsql, dbconn)
    dbcomm.ExecuteNonQuery()

    dbconn.Close()

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T14:58:26.910

您可以在插入后向页面添加一些 javascript。

当页面完成加载时，这将显示一个简单的 Javascript 警报。

像这样的东西：

```
Dim cs As ClientScriptManager = Page.ClientScript
            cs.RegisterStartupScript(Me.GetType(), "thanks", "alert('Thank you for inserting bla bla');", True) 
```

您可以将插入内容包装在一个`try catch`块中，并根据结果吐出不同的消息。

# javascript - Adding new button dynamically in JavaScript

> ID：16040320
> 
> 赞同：1
> 
> 时间：2013-04-16T14:55:29.337
> 
> 标签：javascript, jquery

So I'm trying to create a new button dynamically in javascript and using some jquery. This function doesn't work for some reason. It seems to falter at the append function. Any suggestions?

Here's the .js function

```
SwapButton: function(){
    var element = document.createElement('input');
    element.setAttribute("type", "button");
    element.setAttribute("value", "Trash Letters");
    element.setAttribute("onClick", "GB.swapLetters()");
    document.getElementsByTagName('input')[0].appendChild(element);
    $('input[type="button"]').append(element);
} 
```

The html. The new button should be added to where the input types are

```
<body>
    <div class="hero-unit">

                    <div class="row-fluid">
                        <div class="span8"></div>
                        <div id="timer" class="span4"></div>
                    </div>
                    <div class="row-fluid">
                        <div id="score-board" class="span8"></div>
                    </div>
                    <div class="row-fluid span12" id="word-area">

                    </div>

                    <div class="row-fluid" id="row1">
                        <div id="1" class="span2"></div>
                        <div id="2" class="span2"></div>
                        <div id="3" class="span2"></div>
                        <div id="4" class="span2"></div>
                        <div id="5" class="span2"></div>
                        <div id="6" class="span2"></div>
                    </div>

                    <div class="row-fluid" id="row2">
                        <div id="7" class="span2"></div>
                        <div id="8" class="span2"></div>
                        <div id="9" class="span2"></div>
                        <div id="10" class="span2"></div>
                        <div id="11" class="span2"></div>
                        <div id="12" class="span2"></div>

                    </div>

                    <input type="button" onClick="GB.check()" value="Check"></input>
                    <input type="button" onClick="GB.clear()" value="Clear"></input>
                    <input type="button" onClick="GB.start()" value="Start"></input>

    </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T14:56:55.350

[`.append()`](http://api.jquery.com/append/) adds the new element as a **child element** if the element you're appending it to.

`<input>` elements cannot have children.

You may want to call [`.after()`](http://api.jquery.com/after/), which inserts the new element as a child of the element's parent, immediately after the element.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T14:57:28.273

you are appending the new button inside the other ones. try using the 'after()' method.

```
$('input[type="button"]').after(element); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T14:58:25.083

The `input` type `button` is not a container you may need [insertAfter()](http://api.jquery.com/insertAfter/)

```
 $(element).insertAfter('input[type="button"]'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T15:00:32.843

You need to use the .after() with .last() method to append after the inputs so you don't duplicate. You can also use .append() to append to the hero unit.

Either

```
var $button = $('<input type="button">').val('Trash Letters').click(GB.swapLetters);
$('.hero-unit input[type="button"]').last().after($button); 
```

or

```
$('.hero-unit').append($button); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T14:59:26.247

Why not use jQuery when you are using jQuery?

```
SwapButton: function(){
    $("<input />", {"type":"button","value":"Trash Letters"})
     .on("click",function() { GB.swapLetters() })
     .appendTo("#row2"); // for example
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-16T15:00:49.580

You are trying to add dom element in JQuery selector and this is not possibble with `.append()` function. You can create your element by using JQuery instead of `document.createElement..()` to append it;

```
var element =$('<input>',{type:'button',value:'Trash Letters'});
element.click(function(e){GB.swapLetters()})
elemend.appendTo(yourContainer) 
```

# facebook - 将图像发布到 Facebook 页面

> ID：16040325
> 
> 赞同：0
> 
> 时间：2013-04-16T14:55:47.890
> 
> 标签：facebook

我想在我网站的 facebook 页面上发布用户上传到我网站的图像，但是我只会在我的网站中保留一个缩略图（因为大小很重要），我想在 facebook 上发布后删除大图。发布后是否可以删除图像（它保存在 Facebook 服务器上）或者如果我删除它，图像将不会显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T15:03:31.460

是的，Facebook 会复制所有上传的图片，并从他们的 CDN 提供这些图片——所以在上传图片后，您不必将其保存在您的服务器上。

（如果他们不那样做，但总是在我的服务器上显示最新版本的图像——而不是我现在发布一张可爱的海豹宝宝的照片，等待成千上万的赞……然后在我的服务器上交换该图像明天有 XXX 图片的服务器。我想很明显 Facebook 对这种情况没有兴趣。）

# ubuntu - Ubuntu EC2 上的 Selenium、PHP 单元和 Firefox

> ID：16040327
> 
> 赞同：1
> 
> 时间：2013-04-16T14:55:57.807
> 
> 标签：ubuntu, phpunit, selenium-rc, selenium-webdriver

我正在尝试使用 Selenium 运行 PHPUnit 测试。

我启动硒：

```
java -jar selenium-server-standalone-2.32.0.jar & 
```

运行我的测试：

```
phpunit --verbose suite/TestSuite.php 
```

...这就是 Selenium RC 方面容易出错的地方。当 Selenium 尝试“正在准备 Firefox 配置文件...”时，由于以下原因会出错：

```
ERROR - Failed to start new browser session, shutdown browser and clear all session data
java.lang.RuntimeException: Timed out waiting for profile to be created! 
```

所以我从中得到的是全新安装的 Firefox，没有创建原始配置文件，它想为会话创建一个。显然，这需要很长时间，Selenium 正因此而超时。

所以我尝试从命令行为 Firefox 创建一个配置文件，然后我将能够告诉 Selenium 使用它。

```
firefox -CreateProfile selenium 
```

唉，没有喜悦：

```
Error: cannot open display: :22 
```

由于这是一个 EC2 实例，因此没有显示 (X) 。所以......不知道我现在的选择是什么。我尝试使用 Chrome 浏览器运行 PHPUnit 测试，但无论出于何种原因，它仍然想创建一个 Firefox 配置文件...威士忌探戈。

如果有人有任何建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T20:47:11.710

像这样无头运行它：

```
export DISPLAY=:0.0
xvfb-run --auto-servernum --server-num=0 java -jar selenium-server-standalone-2.32.0.jar > /dev/null 2>&1 & 
```

# sql - 使用 connect_by 获取 Oracle DB 表中树中节点的深度

> ID：16040336
> 
> 赞同：0
> 
> 时间：2013-04-16T14:56:23.543
> 
> 标签：sql, oracle, tree

我有一个看起来像这样的 oracle 表：

架构：

（数字）node_id

(数字) parent_id

(数字) parent_seq

表中的每个条目代表一个父/子关系。一个父级可以是多个子级的父级，一个子级可以有多个父级（但我们可以假设不存在循环，因为在提交之前已验证）。如果一个孩子有多个父母，那么它在表中将有不止一行对应于它的 node_id，并且 parent_seq 将为每个父母增加。

现在，我不需要重建整个树，我只需要知道每个节点的深度即可。DEPTH 遵循以下通用定义（[树的深度和高度有什么区别？](https://stackoverflow.com/questions/2603692/what-is-the-difference-between-tree-depth-and-height)）

> 节点的深度是从节点到树根节点的边数。

有没有办法在 Oracle 中使用 CONNECT_BY 语法优雅地做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T15:10:00.077

我相信我在文档中找到了答案。关键字“LEVEL”是在执行 connect_by 语句时显示节点级别的列。因此，您只需要给定节点的最大级别：

`select node_id, max(LEVEL) from node_parent_link CONNECT BY PRIOR node_id = parent_id group by node_id`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T15:15:19.977

```
select
   node_id,
   min(level) as best_level,
   min(sys_connect_by_path(node_id, '/')) 
      keep (dense_rank first order by level) 
      as best_path
from t
start with parent_id is null
connect by prior node_id = parent_id
group by node_id
order by 1 
```

[小提琴](http://www.sqlfiddle.com/#!4/61c78/6)

# apache - Apache 模块 - 阻止 IP 地址

> ID：16040337
> 
> 赞同：0
> 
> 时间：2013-04-16T14:56:23.923
> 
> 标签：apache, module

我可以在 apache 模块中阻止 IP 地址吗？

我搜索了它，但它没有给出答案，是真的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T16:44:24.390

您可以使用 iptables 阻止。用一个简单的规则。但是，如果您担心某些 IP 地址会导致 DOS 攻击或其他原因，则可以使用 DOS deflate 程序将其自动添加到您的黑名单中。为了您的方便，我在下面提供它。

此脚本将有助于保护我们服务器上的 dos 攻击。我们将使用 DDos deflate 方法。

此方法将使用 iptables 阻止任何 dos 流量。并将创建一个每分钟执行一次以执行脚本的 cronjob，然后脚本将监视任何威胁并使用 iptables 阻止它们。

```
1\. Install the deflate script

    wget http://www.mattzuba.com/wordpress/wp-content/uploads/2011/02/ddos_deflate-0.7.tar.gz

    tar -xf ddos_deflate-0.7.tar.gz

    cd ddos_deflate-0.7

    sudo ./install.sh

2\. now the above script is installed in the directory /usr/local/ddos

    cd /usr/local/ddos

you will see a file called ddos.conf, edit the file

    vi ddos.conf 
```

在这里你会看到各种选项，寻找#####多少个连接定义了一个坏IP？在下面指出。

```
NO_OF_CONNECTIONS=xyz

change no of connections to 200

    NO_OF_CONNECTIONS=200 
```

其中 200 是一个 IP 地址在一秒钟内允许的总连接数。数量可根据需要增加或减少。超过定义数量的连接将被视为 dos 攻击。

```
3\. setting ip address block time    

    cd /usr/local/ddos

you will see a file called ddos.conf, edit the file

    vi ddos.conf

and look for  ##### Number of seconds the banned ip should remain in blacklist.
BAN_PERIOD=60

change ban period to 

    BAN_PERIOD=600 
```

其中 600 是 IP 地址将被阻止的秒数，之后它将被释放。可以根据需要更改此编号。

```
4\. allow selected ip address to access the system without getting banned or restrictions.

    cd /usr/local/ddos

you will see a file called ignore.ip.list, edit the file

    vi ignore.ip.list

enter the following ip address to be unblocked

    127.0.0.1  ----> the localhost ip address
    92.235.247.186 ----> public ip address of the server (change as required) 
```

希望这有所帮助。

# sql-server-2008 - 将数据从 SQL Server 数据库推送到 Greenplum 数据库的最有效方法是什么？

> ID：16040338
> 
> 赞同：0
> 
> 时间：2013-04-16T14:56:23.853
> 
> 标签：sql-server-2008, upload, ssis, greenplum

Greenplum 数据库版本：PostgreSQL 8.2.15（Greenplum 数据库 4.2.3.0 build 1）

SQL Server 数据库版本：Microsoft SQL Server 2008 R2 (SP1)

我们目前的做法：

1) 将每个表从 SQL Server 导出到平面文件

2) 使用 PSQL 控制台的 psql.exe 实用程序使用 pgAdmin III 将数据加载到 Greenplum

好处...

*   速度：好的，但是有什么更快的吗？我们在几分钟内加载数百万行数据

*   自动化：好的，我们使用 VB 中的 Shell 脚本从 SSIS 包中调用此实用程序

陷阱...

*   可靠性：ETL 依赖于文件服务器来保存平面文件

*   安全性：文件服务器上有很多潜在的敏感数据

*   错误处理：这是一个问题。psql.exe 永远不会引发我们可以捕获的错误，即使它确实出错并且不加载任何数据或部分文件

我们还尝试了什么...

.Net Providers\Odbc Data Provider：我们使用 DataDirect 6.0 Greenplum Wire Protocol 配置了系统 DSN。DELETE 的良好性能。插入的狗太慢了。

作为参考，这是前面提到的 SSIS 中的 VB 脚本...

```
Public Sub Main()

    Dim v_shell
    Dim v_psql As String

    v_psql = "C:\Program Files\pgAdmin III\1.10\psql.exe -d "MyGPDatabase" -h "MyGPHost" -p "5432" -U "MyServiceAccount" -f \\MyFileLocation\SSIS_load\sql_files\load_MyTable.sql"

    v_shell = Shell(v_psql, AppWinStyle.NormalFocus, True)

End Sub 
```

这是“load_MyTable.sql”文件的内容...

```
\copy MyTable from '\\MyFileLocation\SSIS_load\txt_files\MyTable.txt' with delimiter as ';' csv header quote as '"' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-30T22:52:00.740

如果您要在几分钟内完成数据加载，那么当前的方法可能就足够了。但是，如果您发现自己必须加载大量数据（例如 TB 级），通常首选的批量加载到 Greenplum 的方法是 via`gpfdist`和相应的`EXTERNAL TABLE`定义。 `gpload`是一个不错的包装器，它为这个过程的大部分提供抽象，并由 YAML 控制文件驱动。一般的想法是，`gpfdist`实例在您的数据暂存的位置启动，最好是 CSV 文本文件，然后`EXTERNAL TABLE`Greenplum 中的定义会知道`gpfdist`实例的 URI。在管理指南中，此类外部表的示例定义可能如下所示：

```
CREATE READABLE EXTERNAL TABLE students (
name varchar(20), address varchar(30), age int)
LOCATION ('gpfdist://<host>:<portNum>/file/path/')
FORMAT 'CUSTOM' (formatter=fixedwidth_in,
name=20, address=30, age=4,
preserve_blanks='on',null='NULL'); 
```

上面的示例期望读取的文本文件的字段从左到右分别是 20 个字符（最多）的字符串、30 个字符的字符串和一个整数。要将这些数据实际加载到 GP 内的临时表中：

```
CREATE TABLE staging_table AS SELECT * FROM students; 
```

对于大量数据，这应该是最有效的方法，因为所有段主机都参与并行负载。请记住，上面的简单方法可能会导致随机分布的表，这可能是不可取的。您必须自定义表定义以指定分配键。

# java - Solr 找不到 schema.xml

> ID：16040340
> 
> 赞同：2
> 
> 时间：2013-04-16T14:56:28.013
> 
> 标签：java, solr

我的客户端应用程序找到了我的 Solr 4.2.1 服务器，并且似乎能够索引文档。我还没有写任何查询代码。但是当我访问我的 Solr Admin 后台时，当我单击查询时，我得到以下异常：

```
Apr 16, 2013 4:55:31 PM org.apache.solr.core.SolrCore execute
INFO: [1050] webapp=/viparis-solr-server path=/admin/file params={file=/usr/local/tomcat7/webapps/viparis-solr-server/Proto/solr/common/fr/schema.xml&contentType=text/xml;charset%3Dutf-8} status=500 QTime=27
Apr 16, 2013 4:55:31 PM org.apache.solr.common.SolrException log
SEVERE: null:java.lang.NullPointerException
        at org.apache.solr.handler.admin.ShowFileRequestHandler.showFromFileSystem(ShowFileRequestHandler.java:212)
        at org.apache.solr.handler.admin.ShowFileRequestHandler.handleRequestBody(ShowFileRequestHandler.java:122)
        at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:135)
        at org.apache.solr.core.SolrCore.execute(SolrCore.java:1816)
        at org.apache.solr.servlet.SolrDispatchFilter.execute(SolrDispatchFilter.java:448)
        at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:269)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
        at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
        at org.apache.coyote.ajp.AjpProcessor.process(AjpProcessor.java:200)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
        at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.Thread.run(Thread.java:662) 
```

事实上，该文件`/usr/local/tomcat7/webapps/viparis-solr-server/Proto/solr/common/fr/schema.xml`存在，并且Tomcat服务器具有读取权限来访问它。此路径在 solr.xml 中定义为核心配置的一部分。

任何想法？

**编辑：** 根据 Arkain 的建议，这是我的 schema.xml 的一部分。这实际上是我从另一个正常工作的 Solr 服务器获取它后唯一更改的部分，所以问题可能出在此处：

```
 <field name="TYPE" type="string" indexed="true" stored="true"/>
    <field name="id_manifestation" type="string" indexed="true" stored="true"/>
    <field name="nom" type="string" indexed="true" stored="true" omitNorms="false"/>
    <field name="nomFr" type="text_full" indexed="false" stored="true"/>
    <field name="nomEn" type="text_full" indexed="false" stored="true"/>
    <field name="theme" type="string" indexed="false" stored="true" multiValued="true"/>
    <field name="descriptionEn" type="string" indexed="true" stored="true" multiValued="true"/>
    <field name="descriptionFr" type="string" indexed="true" stored="true" multiValued="true"/>
    <field name="motsCleEn" type="text_full" indexed="true" stored="true" multiValued="true"/>
    <field name="motsCleFr" type="text_full" indexed="true" stored="true" multiValued="true"/>
    <field name="dateDebut" type="date" indexed="true" stored="true"/>
    <field name="dateFin" type="date" indexed="true" stored="true"/>
    <field name="url" type="string" indexed="false" stored="true"/>
    <field name="logo" type="string" indexed="false" stored="true"/> 
```

**编辑：** 这里是我的 solrconfig.xml：

```
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Licensed to the Apache Software Foundation (ASF) under one or more
 contributor license agreements.  See the NOTICE file distributed with
 this work for additional information regarding copyright ownership.
 The ASF licenses this file to You under the Apache License, Version 2.0
 (the "License"); you may not use this file except in compliance with
 the License.  You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
-->

<!--
 This is a stripped down config file used for a simple example...  
 It is *not* a good example to work from. 
-->
<config>
  <luceneMatchVersion>LUCENE_41</luceneMatchVersion>
  <!--  The DirectoryFactory to use for indexes.
        solr.StandardDirectoryFactory, the default, is filesystem based.
        solr.RAMDirectoryFactory is memory based, not persistent, and doesn't work with replication. -->
  <directoryFactory name="DirectoryFactory" class="${solr.directoryFactory:solr.StandardDirectoryFactory}"/>

  <dataDir>${solr.core1.data.dir:}</dataDir>

  <updateHandler class="solr.DirectUpdateHandler2">
<!--     <updateLog> -->
<!--       <str name="dir">${solr.core1.data.dir:}</str> -->
<!--     </updateLog> -->
  </updateHandler>

  <!-- realtime get handler, guaranteed to return the latest stored fields 
    of any document, without the need to commit or open a new searcher. The current 
    implementation relies on the updateLog feature being enabled. -->
  <requestHandler name="/get" class="solr.RealTimeGetHandler">
    <lst name="defaults">
      <str name="omitHeader">true</str>
    </lst>
  </requestHandler>

 <requestHandler name="/replication" class="solr.ReplicationHandler" startup="lazy" /> 

  <requestDispatcher handleSelect="true" >
    <requestParsers enableRemoteStreaming="false" multipartUploadLimitInKB="2048" formdataUploadLimitInKB="2048" />
  </requestDispatcher>

  <requestHandler name="standard" class="solr.StandardRequestHandler" default="true" />
  <requestHandler name="/analysis/field" startup="lazy" class="solr.FieldAnalysisRequestHandler" />
  <requestHandler name="/update" class="solr.UpdateRequestHandler"  />
  <requestHandler name="/admin/" class="org.apache.solr.handler.admin.AdminHandlers" />

  <requestHandler name="/admin/ping" class="solr.PingRequestHandler">
    <lst name="invariants">
      <str name="q">solrpingquery</str>
    </lst>
    <lst name="defaults">
      <str name="echoParams">all</str>
    </lst>
  </requestHandler>

  <!-- multi-colored tag FragmentsBuilder -->
<!--    <fragmentsBuilder name="colored" class="org.apache.solr.highlight.ScoreOrderFragmentsBuilder"> -->
<!--      <lst name="defaults"> -->
<!--        <str name="hl.tag.pre"><![CDATA[ -->
<!--             <b style="background:yellow">,<b style="background:lawgreen">, -->
<!--             <b style="background:aquamarine">,<b style="background:magenta">, -->
<!--             <b style="background:palegreen">,<b style="background:coral">, -->
<!--             <b style="background:wheat">,<b style="background:khaki">, -->
<!--             <b style="background:lime">,<b style="background:deepskyblue">]]></str> -->
<!--        <str name="hl.tag.post"><![CDATA[</b>]]></str> -->
<!--      </lst> -->
<!--    </fragmentsBuilder> -->

   <!-- Spell Check

        The spell check component can return a list of alternative spelling
        suggestions.  

        http://wiki.apache.org/solr/SpellCheckComponent
     -->
  <searchComponent name="spellcheck" class="solr.SpellCheckComponent">

    <str name="queryAnalyzerFieldType">textSpell</str>

    <lst name="spellchecker">
        <str name="name">default</str>
        <str name="field">textng</str>
        <str name="spellcheckIndexDir">spellchecker</str>
        <str name="classname">solr.IndexBasedSpellChecker</str>
        <str name="buildOnCommit">true</str>
        <str name="comparatorClass">score</str>
    </lst>

<!--<lst name="spellchecker">-->
<!--    <str name="name">suggest</str>-->
<!--    <str name="classname">org.apache.solr.spelling.suggest.Suggester</str>-->
<!--    <str name="lookupImpl">org.apache.solr.spelling.suggest.tst.TSTLookup</str>-->
<!--    -->
<!--    <str name="field">textng</str>   the indexed field to derive suggestions from -->
<!--    <float name="threshold">0.005</float>-->
<!--    <str name="buildOnCommit">true</str>-->
<!--</lst>-->
  </searchComponent>

  <!-- A request handler for demonstrating the spellcheck component.  

       NOTE: This is purely as an example.  The whole purpose of the
       SpellCheckComponent is to hook it into the request handler that
       handles your normal user queries so that a separate request is
       not needed to get suggestions.

       IN OTHER WORDS, THERE IS REALLY GOOD CHANCE THE SETUP BELOW IS
       NOT WHAT YOU WANT FOR YOUR PRODUCTION SYSTEM!

       See http://wiki.apache.org/solr/SpellCheckComponent for details
       on the request parameters.
    -->
  <requestHandler name="/spell" class="solr.SearchHandler" startup="lazy">
    <lst name="defaults">
        <str name="df">textng</str>
        <str name="spellcheck.dictionary">default</str>
        <str name="spellcheck.onlyMorePopular">true</str>
        <str name="spellcheck.extendedResults">true</str>
        <str name="spellcheck.collate">true</str>
        <str name="spellcheck.count">10</str>
        <str name="spellcheck.maxCollations">10</str>
        <str name="spellcheck.maxCollationTries">10</str>
        <str name="spellcheck.collateExtendedResults">true</str>
        <str name="spellcheck">true</str>
        <str name="defType">edismax</str>
        <str name="rows">100</str>
        <str name="fl">*,score</str>
        <str name="qf">textng^100</str>
        <str name="sort">TYPE asc, score desc</str>
        <str name="pf">textng^100</str>
        <double name="typeboost">1.0</double>
        <str name="debugQuery">false</str>

        <str name="facet">on</str>
        <str name="facet.field">nom_manifestation</str>
        <str name="facet.limit">-1</str>
        <str name="hl.highlightMultiTerm">true</str>
        <str name="hl.fragsize">200</str>
        <str name="hl.snippets">200</str>
<!--        <str name="hl.fragmentsBuilder">colored</str> -->
<!--        <str name="hl.fragListBuilder">simple</str> -->
        <str name="hl.fl">*</str>
        <str name="hl.usePhraseHighlighter">true</str>
        <str name="hl">true</str>

    </lst>
    <arr name="first-components">
        <str>spellcheck</str>
    </arr>
</requestHandler>

<requestHandler name="/selectItem" class="solr.SearchHandler" startup="lazy">
    <lst name="defaults">
        <str name="df">nom</str>
        <str name="rows">100</str>
        <str name="fl">*,score</str>
        <str name="qf">nom^100</str>
        <str name="sort">TYPE asc, score desc</str>
        <double name="typeboost">1.0</double>
        <str name="debugQuery">false</str>
    </lst>
</requestHandler>

<requestHandler name="/store" class="solr.SearchHandler"
    startup="lazy">
    <lst name="defaults">
        <str name="df">nom</str>
        <str name="spellcheck.onlyMorePopular">false</str>
        <str name="spellcheck.extendedResults">true</str>
        <str name="spellcheck.collate">true</str>
        <str name="spellcheck.count">1</str>
        <str name="spellcheck">true</str>
        <str name="defType">edismax</str>
        <str name="rows">100</str>
        <str name="sort">score desc</str>
        <double name="typeboost">1.0</double>
        <str name="debugQuery">false</str>
        <str name="qf">nom^100 textphon^50</str>
        <str name="facet">on</str>
        <str name="facet.field">nom_manifestation</str>
        <str name="facet.limit">-1</str>
        <str name="hl.highlightMultiTerm">true</str>
        <str name="hl.fragsize">200</str>
        <str name="hl.snippets">200</str>
<!--        <str name="hl.fragmentsBuilder">colored</str> -->
<!--        <str name="hl.fragListBuilder">simple</str> -->
        <str name="hl.fl">*</str>
        <str name="hl.usePhraseHighlighter">true</str>
        <str name="hl">true</str>
    </lst>
    <arr name="last-components">
        <str>spellcheck</str>
    </arr>
</requestHandler>

  <searchComponent class="solr.SpellCheckComponent" name="suggest">
    <lst name="spellchecker">
      <str name="name">suggest</str>
      <str name="classname">org.apache.solr.spelling.suggest.Suggester</str>
      <str name="lookupImpl">org.apache.solr.spelling.suggest.tst.TSTLookup</str>
      <!-- Alternatives to lookupImpl: 
           org.apache.solr.spelling.suggest.fst.FSTLookup   [finite state automaton]
           org.apache.solr.spelling.suggest.fst.WFSTLookupFactory [weighted finite state automaton]
           org.apache.solr.spelling.suggest.jaspell.JaspellLookup [default, jaspell-based]
           org.apache.solr.spelling.suggest.tst.TSTLookup   [ternary trees]
      -->
      <str name="field">textng</str>  <!-- the indexed field to derive suggestions from -->
      <float name="threshold">0.005</float>
      <!--str name="buildOnCommit">true</str-->
<!--
      <str name="sourceLocation">american-english</str>
-->
    </lst>
  </searchComponent>
  <requestHandler class="org.apache.solr.handler.component.SearchHandler" name="/suggest">
    <lst name="defaults">
      <str name="spellcheck">true</str>
      <str name="spellcheck.dictionary">suggest</str>
      <str name="spellcheck.onlyMorePopular">true</str>
      <str name="spellcheck.count">5</str>
      <str name="spellcheck.collate">true</str>
    </lst>
    <arr name="components">
      <str>suggest</str>
    </arr>
  </requestHandler>

  <!-- config for the admin interface --> 
  <admin>
    <defaultQuery>solr</defaultQuery>
  </admin>

</config> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T18:00:43.700

你确定启动solr时没有其他错误吗？Solr 读取`solr.xml`，`solrconfig.xml`并且`schema.xml`在启动时，如果这些文件有任何奇怪之处，那么您的日志中应该还有其他错误。您可以重新启动服务器以确定吗？

我能想到的一件事是 中的默认值`solrconfig.xml`，但错误消息会有所不同。我注意到在您发布的架构中没有名为**content**的字段。但是，该字段用于 solr-home 骨架。在你的 solrconfig.xml 中检查这样的结构

```
 <lst name="defaults">
   // more defaults
   <str name="df">content</str>
 </lst> 
```

如果是这种情况，启动时应该有警告。这可以解释为什么索引有效（您不依赖那里的默认值）但查询失败。

另一个想法。你有没有以任何方式强化你的 Servlet 容器？Solr 使用`getClassLoader().getResource()`很多来查找文件。但如果是这种情况，应该会有更多的错误。

您可以在浏览器中查看您的架构（从下拉列表中选择核心，而不是*Schema*）？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T12:59:17.683

`tpl`由于某种原因，我的 Solr 服务器安装似乎缺少该目录。

我检查并复制了我们公司使用的现有和工作的 Solr 服务器。因此，我们的源代码控制系统上的项目存储库中可能缺少某些内容。

# asp.net-mvc - Breeze Metadata Api 没有被调用

> ID：16040355
> 
> 赞同：0
> 
> 时间：2013-04-16T14:56:56.670
> 
> 标签：asp.net-mvc, breeze

我查看了 Chrome 上的网络选项卡，发现我的元数据微风 api 没有被调用，因此我所有的 createEntity 等方法都失败了。

```
 [HttpGet]
    public string Metadata()
    {
        return _context.Metadata();
    } 
```

我遵循了 todo 示例并启用了 CORS 支持和几乎所有内容，如果我导航到 /api/breeze/metadata 我可以看到 json 元数据我正在使用 VS2012 Web Express 并通过 nuget dataservice.js 获取所有包

```
 app.dataservice = (function (breeze) {

    var serviceName = 'api/breeze'; // route to the same origin Web Api controller   

    var manager = new breeze.EntityManager(serviceName);

    return {
    createTodo: createTodo,
    saveChanges: saveChanges

    };

    function createTodo(initialValues) {
    return manager.createEntity('BreezeItem', initialValues);
    }

    function saveChanges() {
    return manager.saveChanges()
        .then(function () { alert('good') })
       .fail(function () { alert('bad') })
    }

})(breeze);

index.html
`
    <!DOCTYPE html>
<html>
    <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1"/>

    <title>Breeze Todos with KO</title>        
    </head>
    <body>
    <div id="applicationHost">
        <header>
        <h1>Breeze Todos</h1>
        <h2>with Knockout</h2>
        <form data-bind="submit: addItem">
            <input type="text" data-bind="value: newBreeze, valueUpdate: 'afterkeydown'" placeholder="What needs to be done?">
        </form>
        </header>
    </div>

    <!-- 3rd party libraries -->
    <script src="Scripts/jquery-1.8.3.js"></script>
    <script src="Scripts/knockout-2.2.1.debug.js"></script>
    <script src="Scripts/q.js"></script>
    <script src="Scripts/breeze.debug.js"></script>        
    <script src="Scripts/breeze.savequeuing.js"></script>        

    <!-- App libraries -->
    <script>app = {};</script>        
    <script src="app/dataservice.js"></script>
    <script src="app/viewModel.js"></script>
    </body>
</html>

viewmodel.js
app.viewModel = (function ( dataservice) {

    var vm = {
    newBreeze: ko.observable(""),    
    addItem: addItem    
    };

    return vm; // done with setup; return module variable

    //#region private functions

    function addItem() {
    var item = dataservice.createTodo(
        {
        BreezeName: vm.newBreeze()
        }
    );

    dataservice.saveChanges().fail(addFailed);

    vm.newTodo("");

    function addFailed() {
        console.log("Failed")
    }
    }
    function extendItem(item) {
    if (item.isEditing) return; // already extended

    item.isEditing = ko.observable(false);        

    }

})(app.dataservice);

// Bind viewModel to view in index.html
ko.applyBindings(app.viewModel); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T17:52:07.393

Breeze 在两种情况下进行元数据调用，或者作为应用程序中第一个查询的一部分隐式调用，或者通过 EntityManager.fetchMetadata 方法显式调用。这意味着，如果您**没有**将查询作为您的第一个操作，那么您将需要进行“fetchMetadata”调用。请记住，这是一个返回“promise”的异步调用，就像查询一样，因此当promise 解决时（即在“then”调用中），您将需要执行对“createEntity”方法的任何调用。

# opencv - 猪描述符是在 peopledetect.cpp 中构建的吗？

> ID：16040357
> 
> 赞同：1
> 
> 时间：2013-04-16T14:56:57.937
> 
> 标签：opencv, svm, object-detection

我是新手，我正在使用 opencv2.4.4 和 Visual Studio 2010，我正在运行包中的示例 peopledetect.cpp 及其编译和运行，但我想详细了解源代码。在 peopledetect.cpp是否已经为 peopledetection 构建/训练了 hog 描述符 3780 个向量被输入到 svm 分类器中？当我尝试调试 peopledetect.cpp 时，我只能发现 HOGDescriptor 创建了 hog 描述符和检测器，我基本上不明白这个 API 做了什么[HOGDescriptor](http://docs.opencv.org/modules/gpu/doc/object_detection.html?highlight=hogdescriptor#gpu-hogdescriptor-hogdescriptor)因为我看到[peopledetect.cpp](https://code.ros.org/trac/opencv/browser/trunk/opencv/samples/c/peopledetect.cpp?rev=2314)没有经过 hog 处理的步骤，它加载了已经训练好的向量到 svm 分类器来检测人/没有人，我错了吗？因为没有关于此的文档。

任何人都可以请简要介绍一下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T16:02:54.927

opencv中人物检测算法的实现是基于HOG描述符作为特征，SVM作为分类器。

`1.`训练数据库（正样本作为人，负样本作为非人）用于学习 SVM 参数（它计算和存储支持向量）。还执行交叉验证（我假设）以优化软边距参数 C 和内核参数（它可能是线性内核）。

`2.`为了检测测试视频数据的人，`peopledetect.cpp`加载预学习的 SVM，计算不同位置和尺度的 HOG 描述符，然后合并具有高检测分数的窗口（二进制 SVM 分类器的输出）。

这是一篇很好的[论文](http://lear.inrialpes.fr/people/triggs/pubs/Dalal-cvpr05.pdf)（inria）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T14:31:10.393

为了得到更清晰的答案，peopledetect.cpp 经历了所有的猪步骤。深入挖掘我更清楚。基本上，如果你调试 peopledetect.cpp 会经历这些步骤。

![在此处输入图像描述](https://i.stack.imgur.com/MdoAw.png)

最初图像被分成几个尺度，scale0(1.05)是检测窗口增加的系数。对于图像的每个尺度，从窗口中提取特征并运行分类器窗口，就像上面一样，它遵循尺度空间金字塔方法。所以它相当大的计算过程，非常昂贵，所以 opencv 团队试图为每个规模进行并行化。在为什么我无法调试/完成这些步骤之前，我感到很困惑，这个 parallel_for_(Range(0, (int)levelScale.size()),HOGInvoker()) 创建了几个线程，每个线程在每个规模上工作，取决于多少线程或创建了这样的东西。因此我无法调试，我所做的是冻结所有线程并仅调试主线程。对于不同尺度的图像 hog 处理步骤是

![在此处输入图像描述](https://i.stack.imgur.com/nJ3uu.jpg)

在 peopledetect.cpp hog 和分类器窗口有点结合。在单个窗口（64x128）中，特征提取和运行分类器都发生了。之后对图像的每个比例完成此操作。有许多不同尺度的行人窗口通常与这个区域相关联，这是使用 grouprectangle() 函数分组的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T11:49:08.860

训练 SVM 包括找到正样本和负样本之间最大边距的参数。

> 如果对 1000 多个负样本和正样本进行相同的特征提取，那么一定有数百万个特征仪式吗？

是的。这些系数是从训练数据库中提取的。你没有它们。SVM 仅存储足以表征边距的支持向量。例如，参见对[偶形式](http://en.wikipedia.org/wiki/Support_vector_machine)的线性 SVM。

> 许多不同尺度的行人窗通常与该区域相关联

真的。应用合并功能。可以使用不同的方法（例如`groupRectangles(..)`）（请参见[此处](https://github.com/Itseez/opencv/blob/master/modules/objdetect/src/cascadedetect.cpp)）并接受给定的参数参数`detectMultiScale(..)`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T14:36:44.643

我从不同的论文中了解到，使用 hog 的特征提取是使用几个正负图像完成的，提取的这些特征被馈送到线性 SVM 来训练它们，所以 peopledetect.cpp 使用这个训练好的线性 SVM 样本，所以这个特征提取过程不是由 peopledetect.cpp 完成的，即 HOGDescriptor::getDefaultPeopleDetector() 由为人员检测训练的分类器的系数组成。从 hog detection/window(64x128) 中提取的特征总长度为 3780（4 个单元 x 9 个 bin x 7 x 15 个块 = 3780）个特征。然后使用这些特征来训练线性 SVM 分类器。如果对 1000 多个负样本和正样本进行相同的特征提取，那么必须有数百万个特征仪式吗？***我们如何获得这些系数？***

但是已知 HOG 描述符包含冗余信息，因为使用了不同的检测窗口大小。所以当 SVM 分类器将一个区域分类为“行人”时，往往会与该区域关联多个不同尺度的行人窗口。peopledetect.cpp 主要做的是 (hog.detectMultiScale(img, found, 0, Size(8,8), Size(32,32), 1.05, 2);) 检测窗口在图像的所有位置进行扫描并且尺度，并且在输出金字塔上运行传统的非最大抑制来检测对象实例。

# java - JTabbedPane 中的 JTable 中的 JTable 中的 JButton

> ID：16040358
> 
> 赞同：0
> 
> 时间：2013-04-16T14:57:03.117
> 
> 标签：java, swing, layout, jtable, jtabbedpane

所以它背后的代码非常庞大。我有一个 JTabbedPane，每个表都有一个 Tab（在 JSCrollPane 内）和一个 Summary 表，其中包含使用与选项卡中的模型相同的模型的表。因此，当我向表中添加行时，一切都会正确呈现。当其中一个表的数据发生更改时，除了 JButtons（第一行中的按钮始终呈现）之外，一切都呈现 OK。单击该行可以修复它，即使它再次更改，该按钮也不会消失。

当数据更改时，我只为包含表的模型触发 DataChanged()，该模型会在包含表和容器表上触发重绘。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T15:13:24.740

每个 swing 组件只能在一个容器中。如果您尝试放入两个 Jpanel，如果您使用使用相同模型实例的 2 个 Jtable 执行此操作，则会出现问题，最初会发生一切正常渲染，但一旦您激活组件（按钮）就会中断。它将在您按下它的表格中停止渲染，在某些情况下两者都会停止。

# javascript - 带有 Python 和 Javascript 的 AES CTR 模式的奇怪问题

> ID：16040367
> 
> 赞同：2
> 
> 时间：2013-04-16T14:57:24.453
> 
> 标签：javascript, python, cryptography, pycrypto, cryptojs

我正在尝试解密 CryptoJS 使用 PyCrypto 创建的密文。我正在使用 AES-256-CTR，带有 12 字节随机前缀和 4 字节计数器。到目前为止，我的成功有限。[请阅读](https://stackoverflow.com/questions/15837463/is-aes-ctr-in-cryptojs-compatible-with-pycrypto)我第一次尝试的上一篇文章。

这适用于Javascript：

1.  安装 CryptoCat 扩展
2.  运行 CryptoCat
3.  启动开发者控制台（Chrome/Firefox 中的 F12）
4.  运行这些代码行

* * *

```
key = 'b1df40bc2e4a1d4e31c50574735e1c909aa3c8fda58eca09bf2681ce4d117e11';
msg = 'LwFUZbKzuarvPR6pmXM2AiYVD2iL0/Ww2gs/9OpcMy+MWasvvzA2UEmRM8dq4loB\ndfPaYOe65JqGQMWoLOTWo1TreBd9vmPUZt72nFs=';
iv = 'gpG388l8rT02vBH4';
opts = {mode: CryptoJS.mode.CTR, iv: CryptoJS.enc.Base64.parse(iv), padding: CryptoJS.pad.NoPadding};
CryptoJS.AES.decrypt(msg, CryptoJS.enc.Hex.parse(key), opts).toString(CryptoJS.enc.Utf8); 
```

预期输出：`"Hello, world!ImiAq7aVLlmZDM9RfhDQgPp0CrAyZE0lyzJ6HDq4VoUmIiKUg7i2xpTSPs28USU8"`.

* * *

这是我用 Python 编写的一个脚本，它部分（！）解密了密文：

```
import struct
import base64
import Crypto.Cipher.AES
import Crypto.Util.Counter

def bytestring_to_int(s):
    r = 0
    for b in s:
        r = r * 256 + ord(b)
    return r

class IVCounter(object):
    def __init__(self, prefix="", start_val=0):
        self.prefix = prefix
        self.first = True
        self.current_val = start_val

    def __call__(self):
        if self.first:
            self.first = False
        else:
            self.current_val += 1

        postfix = struct.pack(">I", self.current_val)
        n = base64.b64decode(self.prefix) + postfix
        return n

def decrypt_msg(key, msg, iv):
    k = base64.b16decode(key.upper())
    ctr = IVCounter(prefix=iv)
    #ctr = Crypto.Util.Counter.new(32, prefix=base64.b64decode(iv), initial_value=0, little_endian=False)
    aes = Crypto.Cipher.AES.new(k, mode=Crypto.Cipher.AES.MODE_CTR, counter=ctr)
    plaintext = aes.decrypt(base64.b64decode(msg))
    return plaintext

if __name__ == "__main__":
        #original:
        key = 'b1df40bc2e4a1d4e31c50574735e1c909aa3c8fda58eca09bf2681ce4d117e11'
        msg = 'LwFUZbKzuarvPR6pmXM2AiYVD2iL0/Ww2gs/9OpcMy+MWasvvzA2UEmRM8dq4loB\ndfPaYOe65JqGQMWoLOTWo1TreBd9vmPUZt72nFs='
        iv = 'gpG388l8rT02vBH4'

        decrypted = decrypt_msg(key, msg, iv)
        print "Decrypted message:", repr(decrypt_msg(key, msg, iv))
        print decrypted 
```

输出是：

`'Hello, world!Imi\xfb+\xf47\x04\xa0\xb1\xa1\xea\xc0I\x03\xec\xc7\x13d\xcf\xe25>l\xdc\xbd\x9f\xa2\x98\x9f$\x13a\xbb\xcb\x13`\xd2#\xc9T\xf4|\xd8\xcb`aO)\x94\x9aq<\xa7\x7f\x14\x11\xb5\xb0\xb6\xb5GQ\x92'`

问题是，只有输出的前**16**个字节与预期输出的前 16 个字节匹配！

`Hello, world!ImiAq7aVLlmZDM9RfhDQgPp0CrAyZE0lyzJ6HDq4VoUmIiKUg7i2xpTSPs28USU8`

当我修改脚本来执行此操作时：

```
def __init__(self, prefix="", start_val=1): 
```

和

```
self.current_val += 0 #do not increment 
```

这使得计数器`\x00\x00\x00\x01`每次被调用时输出相同的值（），明文是：

```
\xf2?\xaf:=\xc0\xfd\xbb\xdf\xf6h^\x9f\xe8\x16I\xfb+\xf47\x04\xa0\xb1\xa1\xea\xc0I\x03\xec\xc7\x13dQgPp0CrAyZE0lyzJ\xa8\xcd!?h\xc9\xa0\x8b\xb6\x8b\xb3_*\x7f\xf6\xe8\x89\xd5\x83H\xf2\xcd'\xc5V\x15\x80k] 
```

其中第 2 个 16 字节块 (dQgPp0CrAyZE0lyzJ) 与预期输出匹配。

当我将计数器设置为发出`\x00\x00\x00\x02`和`\x00\x00\x00\x03`时，我得到了类似的结果——随后的 16 字节块被显示出来。唯一的例外是，对于 0，前 32 个字节被显示。

```
All 0s: reveals first 32 bytes.
'Hello, world!ImiAq7aVLlmZDM9RfhD\xeb=\x93&b\xaf\xaf\x8d\xc9\xdeA\n\xd2\xd8\x01j\x12\x97\xe2i:%}G\x06\x0f\xb7e\x94\xde\x8d\xc83\x8f@\x1e\xa0!\xfa\t\xe6\x91\x84Q\xe3'
All 1s: reveals next 16 bytes.
"\xf2?\xaf:=\xc0\xfd\xbb\xdf\xf6h^\x9f\xe8\x16I\xfb+\xf47\x04\xa0\xb1\xa1\xea\xc0I\x03\xec\xc7\x13dQgPp0CrAyZE0lyzJ\xa8\xcd!?h\xc9\xa0\x8b\xb6\x8b\xb3_*\x7f\xf6\xe8\x89\xd5\x83H\xf2\xcd'\xc5V\x15\x80k]"
All 2s: reveals next 16 bytes.
'l\xba\xcata_2e\x044\xb2J\xe0\xf0\xd7\xc8e\xae\x91yX?~\x7f1\x02\x93\x17\x93\xdf\xd2\xe5\xcf\xe25>l\xdc\xbd\x9f\xa2\x98\x9f$\x13a\xbb\xcb6HDq4VoUmIiKUg7i\x17P\xe6\x06\xaeR\xe8\x1b\x8d\xd7Z\x7f"'
All 3s: reveals next 13 bytes.
'I\x92\\&\x9c]\xa9L\xb1\xb6\xbb`\xfa\xbet;@\x86\x07+\xa5=\xe5V\x84\x80\x9a=\x89\x91q\x16\xea\xca\xa3l\x91\xde&\xb6\x17\x1a\x96\x0e\t/\x188\x13`\xd2#\xc9T\xf4|\xd8\xcb`aO)\x94\x9a2xpTSPs28USU8' 
```

如果你连接“正确”的块，你会得到预期的明文：

```
Hello, world!ImiAq7aVLlmZDM9RfhDQgPp0CrAyZE0lyzJ6HDq4VoUmIiKUg7i2xpTSPs28USU8 
```

这真的很奇怪。我肯定在 Python 端做错了什么，因为事情可以被解密，但不能一次全部解密。如果有人可以提供帮助，我将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T16:41:29.657

这里有几个问题。首先，消息不是块大小的倍数，并且您没有使用填充。第二——也是这个问题最关键的——是 IV 也不是正确的大小。它应该是 16 个字节，但你只有 12 个字节。可能两个实现都应该失败并出现异常，并且在 CryptoJS 的下一个主要版本中，情况就是这样。

以下是由于此错误而发生的情况：当计数器第一次递增时，它会尝试递增未定义的值，因为 IV 的最后一个字节丢失了。未定义 + 1 是 NaN，而 NaN | 0 就是 0。这就是你最终两次得到 0 的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T21:33:36.860

当使用加密模式`CryptoJS.mode.CTR`（其中 CTR 代表计数器）时，初始化向量与计数器一起被加密，然后应用于要加密的数据。这是针对您加密的每个数据块完成的。

您解释说，当您对 应用不同的值时，消息的不同部分被正确解密`start_val`，所以我怀疑计数器在每次解密块时都没有正确增加。

看看[块密码模式：维基百科上的 CTR](http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation#Counter_.28CTR.29)

**注意：**请注意，在使用 CTR 模式时，初始化向量 + 计数器的组合决不能重复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T10:12:08.300

固定的。我只是让计数器从 0 开始两次。有谁知道这是否是一个漏洞？

```
import struct
import base64
import Crypto.Cipher.AES
import Crypto.Util.Counter
import pdb

def bytestring_to_int(s):
    r = 0
    for b in s:
        r = r * 256 + ord(b)
    return r

class IVCounter(object):
    def __init__(self, prefix="", start_val=0):
        self.prefix = prefix
        self.zeroth = True
        self.first = False
        self.current_val = start_val

    def __call__(self):
        if self.zeroth:
            self.zeroth = False
            self.first = True
        elif self.first:
            self.first = False
        else:
            self.current_val += 1

        postfix = struct.pack(">I", self.current_val)
        n = base64.b64decode(self.prefix) + postfix
        return n

def decrypt_msg(key, msg, iv):
    k = base64.b16decode(key.upper())
    ctr = IVCounter(prefix=iv)
    #ctr = Crypto.Util.Counter.new(32, prefix=base64.b64decode(iv), initial_value=0, little_endian=False)
    aes = Crypto.Cipher.AES.new(k, mode=Crypto.Cipher.AES.MODE_CTR, counter=ctr)
    plaintext = aes.decrypt(base64.b64decode(msg))
    return plaintext

if __name__ == "__main__":
        #original:
        key = 'b1df40bc2e4a1d4e31c50574735e1c909aa3c8fda58eca09bf2681ce4d117e11'
        msg = 'LwFUZbKzuarvPR6pmXM2AiYVD2iL0/Ww2gs/9OpcMy+MWasvvzA2UEmRM8dq4loB\ndfPaYOe65JqGQMWoLOTWo1TreBd9vmPUZt72nFs='
        iv = 'gpG388l8rT02vBH4'

        decrypted = decrypt_msg(key, msg, iv)
        print "Decrypted message:", repr(decrypt_msg(key, msg, iv))
        print decrypted 
```

# javascript - 多个 javascript 日期选择器

> ID：16040368
> 
> 赞同：0
> 
> 时间：2013-04-16T14:57:24.827
> 
> 标签：javascript

我正在用 php 构建和网页，所有内容都是这样布局的..

```
<div>
<form>
<input type='text' id='datepick' />
</form>
</div>

<div>
<form>
<input type='text' id='datepick' />
</form>
</div>

<div>
<form>
<input type='text' id='datepick' />
</form>
</div> 
```

它的布局实际上有点复杂，但基本上我遇到的问题是 datepick id 调用 datpick 函数，但它只适用于第一个输入而忽略其余部分。我不能在那里给他们自己的 ID，所有的输入都必须被称为相同的。

这是功能

```
<script type="text/javascript">

        new datepickr('datepick', {
            'dateFormat': 'd-m-Y'
        });
</script> 
```

谁能告诉我如何使 datepick 在所有输入字段上工作。

在此先感谢，我正在努力解决这个问题....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T14:59:11.423

看看这里的例子如何使用它：

[http://www.joshsalverda.com/sandbox/date_pick/datepickr.html](http://www.joshsalverda.com/sandbox/date_pick/datepickr.html)（来自[https://code.google.com/p/datepickr/](https://code.google.com/p/datepickr/)）

你*必须*给他们自己的身份证。

HTML 规范要求`id`是唯一的，但它仍会为您呈现页面。在 undefined 中查找非唯一 id 时会找到哪个元素。它可能是第一个，也可能是最后一个，你可能会得到一个错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T15:05:42.843

或者只是将 id 更改为提到的类：

```
<script>    $(function() {
        $( ".datepicker" ).datepicker();
      });
</script>

<p>Date: <input type="text" class="datepicker" /></p>
<p>Date: <input type="text" class="datepicker" /></p>
<p>Date: <input type="text" class="datepicker" /></p> 
```

工作正常。

# sql - 降低十进制数据类型精度和比例，避免算术溢出错误

> ID：16040373
> 
> 赞同：1
> 
> 时间：2013-04-16T14:57:29.163
> 
> 标签：sql, sql-server, sql-server-2012, alter-table, alter-column

我在 SQL Server 2012 数据库中有一个当前为十进制（30,20）的字段，因为这是数据提供程序的格式。但是，考虑到该表有数百万行，那么大的小数是完全没有必要的，并且希望将其修剪为小数（16,7）之类的东西。

我尝试了以下 SQL：

```
alter table mytable alter column mycolumn decimal(16,7) 
```

但这导致了错误：

```
Arithmetic overflow error converting numeric to data type numeric. 
```

改变这个领域的最佳方法是什么？我显然意识到错误正在发生，因为列中的值超过了新的精度。我想知道是否有一个脚本可以截断小数点后第 7 位的任何数字，然后转换列数据类型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T15:03:28.223

减少到小数点后 7 位：

```
update mytable set newcolumn = convert(decimal(16, 7), mycolumn);

update mytable set mycolumn = null;

commit;

alter table mytable alter column mycolumn decimal(16,7)

update mytable set mycolumn = newcolumn;

commit;

alter table mytable drop column newcolumn; 
```

# c# - wcf 接口：为什么它不“只是”去方法，而是去整个班级

> ID：16040374
> 
> 赞同：1
> 
> 时间：2013-04-16T14:57:36.793
> 
> 标签：c#, wcf, interface

我已经实现了 WCF 服务，并且连接工作正常。我用`BasicHttpBinding`.

```
[ServiceContract]
public interface IScannerInput
{
    [OperationContract]
    string ScannedPRX(string barcode, string user, int color);
}

public class ProcessPRX : IScannerInput
{
    ProcessClass c = new ProcessClass(); // every time a call ScannedPRX() this class is made again

    public string ScannedPRX(string barcode, string user, int color)
    {
        c.PrxScannedInput(barcode, user, color);
        return "Bussy processing: " + barcode;
    }
} 
```

在正常的课堂上，我只能做`ProcessClass c`一次。但是现在每次调用methode都是一次又一次`ScannedPRX()`。我究竟做错了什么？它不仅适用于方法，而且适用于整个班级。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T15:01:23.823

实例化 WCF 服务对象的三种方式：

*   PerCall：为每个客户端请求创建一个新的 InstanceContext（因此也是服务对象）。

*   PerSession：为每个新的客户端会话创建一个新的 InstanceContext（因此是服务对象），并在该会话的生命周期内维护（这需要支持会话的绑定）。

*   单个：单个 InstanceContext（因此也是服务对象）处理应用程序生命周期内的所有客户端请求。

PerCall 是默认的，这就是你所拥有的。

如果您想要其他行为，请阅读下面的文章。

[http://msdn.microsoft.com/en-us/library/ms731193.aspx](http://msdn.microsoft.com/en-us/library/ms731193.aspx)

考虑到对您的服务发出的并发请求，就好像您正在选择例如单实例化模式一样，您需要自己注意所有方法都是线程安全的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T15:01:37.667

因为 WCF 服务的默认实例化行为是为每个调用创建一个新实例。您通常希望避免在服务的不同调用者之间共享状态或同一客户端的多次调用。除非 ProcessClass 的创建成本很高，或者您需要在调用之间维护状态，否则我会坚持使用这种模型。

# android - EditText 的子类的行为不像 EditText

> ID：16040376
> 
> 赞同：3
> 
> 时间：2013-04-16T14:57:42.633
> 
> 标签：android, android-edittext, subclass

我写了一个子类`EditText`。这是那个子类：

```
package com.package.foo;

import android.content.Context;
import android.graphics.Typeface;
import android.util.AttributeSet;
import android.widget.EditText;

public class FuturaEditText extends EditText{

    public FuturaEditText(Context context) {
        this(context, null, 0);
    }

    public FuturaEditText(Context context, AttributeSet attrs) {
        this(context, attrs, 0);
    }

    public FuturaEditText(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        if(!isInEditMode()) {
            setTypeface(Typeface.createFromAsset(context.getAssets(), "fonts/futura.ttf"));
        }
    }

} 
```

但它的行为不像一个`EditText`，而是一个`TextView`。特别是，软键盘没有上升焦点，也没有`EditText`格式化。为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T16:46:14.323

为了完整性 - 从源头：

```
public EditText(Context context, AttributeSet attrs) {
       this(context, attrs, com.android.internal.R.attr.editTextStyle);
} 
```

因此，如果在没有默认样式的情况下调用构造函数，则默认为`editTextStyle`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-16T14:58:44.123

这个实现，每个构造函数调用匹配的`super`构造函数：

```
package com.package.foo;

import android.content.Context;
import android.graphics.Typeface;
import android.util.AttributeSet;
import android.widget.EditText;

public class FuturaEditText extends EditText{

    public FuturaEditText(Context context) {
        super(context);
        if(!isInEditMode()) {
            setTypeface(Typeface.createFromAsset(context.getAssets(), "fonts/futura.ttf"));
        }
    }

    public FuturaEditText(Context context, AttributeSet attrs) {
        super(context, attrs);
        if(!isInEditMode()) {
            setTypeface(Typeface.createFromAsset(context.getAssets(), "fonts/futura.ttf"));
        }
    }

    public FuturaEditText(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        if(!isInEditMode()) {
            setTypeface(Typeface.createFromAsset(context.getAssets(), "fonts/futura.ttf"));
        }
    }

} 
```

作品。我只能假设`EditText(context, attrs, 0)`不一样`EditText(context, attrs)`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-16T15:02:20.423

您不应该调用超级构造函数来完成缺少的参数，否则客户端无法调用少于 3 个参数的构造函数（即`super.(Context context, AttributeSet attrs)`）。

第二个版本是正确的。

# php - 另一个最大执行时间致命错误

> ID：16040379
> 
> 赞同：0
> 
> 时间：2013-04-16T14:57:50.340
> 
> 标签：php

我正在使用 phpDesigner8 并且有一个简单的 PHP 脚本：

```
<?php
/*
Trying to debug error
*/
echo 'this is a test';
?> 
```

当我“运行”它时，它运行良好。如果我从命令行运行它，它会完美运行。但是，当我“调试”它时，我立即感到恐惧：

致命错误 超过 0 秒的最大执行时间。

我已阅读其他帖子并在 php.ini 中设置了 max_execution_time = 300 和 max_input_time = 5000。

帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T15:01:13.237

检查您的调试使用的配置并在那里正确设置。我不知道这是什么编辑器，因为我以前从未见过它，但它应该是可调试的。

# java - java.io.notserialzableexception 错误

> ID：16040382
> 
> 赞同：0
> 
> 时间：2013-04-16T14:58:10.167
> 
> 标签：java, serialization

好的，所以我收到了这个错误。我试着让房子可序列化，但它仍然不起作用？我现在不知道该怎么做。如果有人可以提供帮助，我将不胜感激！

```
[GTLVote V1.1] Settings initializing...
[GTLVote V1.1] Connected to the database
[Launcher] Initing Cache...
[Launcher] Initing Data Files...
[ShopsHandler] Packing shops...
[Launcher] Initing Fishing Spots...
[Auto-Backup] The mainsave has already been backed up today.
[Launcher] Initing Fishing Spots...
[Launcher] Initing NPC Combat Scripts...
[Launcher] Initing Dialogues...
[Launcher] Initing Controlers...
[Launcher] Initing Cutscenes...
[Launcher] Initing Friend Chats Manager...
[Launcher] Initing Cores Manager...
[Launcher] Initing World...
[Launcher] Initing Region Builder...
[Launcher] Initing Server Channel Handler...
[Launcher] Server took 9624 milli seconds to launch.
ERROR! THREAD NAME: New I/O  worker #1
java.io.WriteAbortedException: writing aborted; java.io.NotSerializableException
: com.rs.game.player.content.construction.House
    at java.io.ObjectInputStream.readObject0(Unknown Source)
    at java.io.ObjectInputStream.defaultReadFields(Unknown Source)
    at java.io.ObjectInputStream.readSerialData(Unknown Source)
    at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
    at java.io.ObjectInputStream.readObject0(Unknown Source)
    at java.io.ObjectInputStream.readObject(Unknown Source)
    at com.rs.utils.SerializableFilesManager.loadSerializedFile(Serializable
FilesManager.java:67)
    at com.rs.utils.SerializableFilesManager.loadPlayer(SerializableFilesMan
ager.java:25)
    at com.rs.net.decoders.LoginPacketsDecoder.decodeWorldLogin(LoginPackets
Decoder.java:169)
    at com.rs.net.decoders.LoginPacketsDecoder.decode(LoginPacketsDecoder.ja
va:43)
    at com.rs.net.ServerChannelHandler.messageReceived(ServerChannelHandler.
java:98)
    at org.jboss.netty.channel.SimpleChannelHandler.handleUpstream(SimpleCha
nnelHandler.java:95)
    at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultCh
annelPipeline.java:563)
    at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultCh
annelPipeline.java:558)
    at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:26
8)
    at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:25
5)
    at org.jboss.netty.channel.socket.nio.NioWorker.read(NioWorker.java:91)
    at org.jboss.netty.channel.socket.nio.AbstractNioWorker.processSelectedK
eys(AbstractNioWorker.java:373)
    at org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioW
orker.java:247)
    at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:35)
    at org.jboss.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnabl
e.java:102)
    at org.jboss.netty.util.internal.DeadLockProofWorker$1.run(DeadLockProof
Worker.java:42)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.io.NotSerializableException: com.rs.game.player.content.construc
tion.House
    at java.io.ObjectOutputStream.writeObject0(Unknown Source)
    at java.io.ObjectOutputStream.defaultWriteFields(Unknown Source)
    at java.io.ObjectOutputStream.writeSerialData(Unknown Source)
    at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
    at java.io.ObjectOutputStream.writeObject0(Unknown Source)
    at java.io.ObjectOutputStream.writeObject(Unknown Source)
    at com.rs.utils.SerializableFilesManager.storeSerializableClass(Serializ
ableFilesManager.java:76)
    at com.rs.utils.SerializableFilesManager.savePlayer(SerializableFilesMan
ager.java:53)
    at com.rs.Launcher.saveFiles(Launcher.java:178)
    at com.rs.Launcher$3.run(Launcher.java:165)
    at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)
    at java.util.concurrent.FutureTask$Sync.innerRunAndReset(Unknown Source)
    at java.util.concurrent.FutureTask.runAndReset(Unknown Source)
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.
access$301(Unknown Source)
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.
run(Unknown Source)
    ... 3 more 
```

我明白了，我已经尝试让它可序列化。

这是我的房子.java

```
package com.rs.game.player.content.construction;

import java.util.ArrayList;
import java.util.List;

import com.rs.game.DynamicRegion;
import com.rs.game.Region;
import com.rs.game.RegionBuilder;
import com.rs.game.World;
import com.rs.game.WorldObject;
import com.rs.game.WorldTile;
import com.rs.game.item.Item;
import com.rs.game.player.Player;
import com.rs.utils.Logger;
import java.io.Serializable;

public class House implements Serializable {

private static final long serialVersionUID = 7526472295622776147L;
private List<RoomReference> rooms;
private byte place, look;
private Player player;

public House(Player player) {
    this.player = player;
    rooms = player.getRooms();
    place = (byte) player.getPlace(); //desert
}

public void refresh(Player player, int[] boundChuncks) {
    player.setForceNextMapLoadRefresh(true);
    constructHouse(boundChuncks, true);
    player.loadMapRegions();
}

public void sendFurnitureInterface(Item[] items) {
    player.getPackets().sendItems(396, items);
}

public void constructHouse(int[] boundChuncks, boolean buildMode) {
    Logger.log(this, place);
    Object[][][][] data = new Object[4][8][8][];
    for(RoomReference reference : rooms) {
        data[reference.getPlane()][reference.getX()][reference.getY()] =
            new Object[] {reference.getRoom().getChunkX(),  reference.getRoom().getChunkY(),
                reference.getRotation(), reference.getRoom().isShowRoof()};
    }
    if(!buildMode) { //construct roof
        for(int x = 1; x < 7; x++) {
            skipY: for(int y = 1; y < 7; y++) {
                for(int plane = 2; plane >= 0; plane--) {
                    if(data[plane][x][y] != null) {
                        boolean hasRoof = (boolean) data[plane][x][y][3];
                        if(hasRoof) {
                            byte rotation = (byte) data[plane][x][y][2];           
                            //TODO find best Roof
                            data[plane+1][x][y] = new Object[] {
                                    Roof.ROOF1.getChunkX(),
                                    Roof.ROOF1.getChunkY(), rotation, true};
                            continue skipY;
                        }
                    }
                }
            }
        }
    }
    for(int plane = 0; plane < data.length; plane++) {
        for(int x = 0; x < data[plane].length; x++) {
            for(int y = 0; y < data[plane][x].length; y++) {
                if(data[plane][x][y] != null)
                    RegionBuilder.copyChunk((int)data[plane][x][y][0] +
                            ((boolean)data[plane][x][y][3] && look >= 4 ? 8 : 0)
                            , (int)data[plane][x][y][1],
                            (boolean)data[plane][x][y][3] ? look % 4 : place
                            , boundChuncks[0]+x, boundChuncks[1]+y, plane,(byte)data[plane][x][y][2]);
                else if (plane == 0)
                    RegionBuilder.copyChunk(LAND[0], LAND[1], place, boundChuncks[0]+x, boundChuncks[1]+y, plane, 0);
            }
        }
    }
    Region region = World.getRegion(RegionBuilder.getRegionHash(boundChuncks[0]/8, boundChuncks[1]/8));
    List<WorldObject> spawnedObjects = region.getSpawnedObjects();
    if(spawnedObjects != null)
        spawnedObjects.clear();
    List<WorldObject> removedObjects = region.getRemovedObjects();
    if(removedObjects != null)
        removedObjects.clear();
    for(RoomReference reference : rooms) {
        int boundX = reference.getX() * 8;
        int boundY = reference.getY() * 8;
        int boundX1 = boundChuncks[0] * 8;
        int boundY1 = boundChuncks[1] * 8;
        int chunkRotation = region.getRotation(reference.getPlane(), boundX, boundY);
        for(int x = boundX; x < boundX+8; x++) {
            for(int y = boundY; y < boundY+8; y++) {
                WorldObject[] objects = region.getObjects(reference.getPlane(), x, y);
                if(objects != null) {
                    for(WorldObject object : objects) {
                        /*
                         * Remove the build hotspots (not 100%)
                         */
                        if(!buildMode && object.getDefinitions().containsOption("Build")) {
                            object = new WorldObject(object.getId(), object.getType(), (object.getRotation() + chunkRotation) % 4, x + boundChuncks[0]*8,y + boundChuncks[1]*8, reference.getPlane());
                            /*if (object.getDefinitions().name.equalsIgnoreCase("door hotspot")) {
                                WorldObject object1 = new WorldObject(getDoorId(), object.getType(), object.getRotation() + 1, object.getX(), object.getY(), reference.getPlane());
                                    World.removeObject(object, true);
                            }*/
                            if (object.getDefinitions().name.equalsIgnoreCase("door hotspot")) {
                                /*if (!reference.getRoom().doesHaveDoors()) {
                                    World.removeObject(object, true);
                                }
                                if (player.getRoomFor(reference.getX() + 1, reference.getY()) != null) {
                                    World.removeObject(object, true);
                                }
                                if (player.getRoomFor(reference.getX() - 1, reference.getY()) != null) {
                                    World.removeObject(object, true);
                                }
                                if (player.getRoomFor(reference.getX(), reference.getY() + 1) != null) {
                                    World.removeObject(object, true);
                                }
                                if (player.getRoomFor(reference.getX(), reference.getY() - 1) != null) {
                                    World.removeObject(object, true);
                                }
                                System.out.println("removing door");
                                */
                                if (reference.getRoom().doesHaveDoors()) {
                                    World.spawnObject(new WorldObject(13100, object.getType(), object.getRotation(), object.getX(), object.getY(), object.getPlane()), true);
                                }
                            }
                            else if (object.getDefinitions().name.equalsIgnoreCase("window space")) {
                                System.out.println(object.getId());
                            } else {
                                World.removeObject(object, true);
                            }
                            try {
                                System.out.println("spawning portal");
                                WorldObject o = new WorldObject(13405, 10, 4, boundChuncks[0]*8 + 35, boundChuncks[1]*8 + 35, 0);
                                World.spawnObject(o, true);
                                for (WorldObject o1 : player.getConObjectsToBeLoaded()) {
                                    System.out.println(o1.getDefinitions().getOption(5));
                                    World.spawnObject(o1, true);
                                }
                            } catch (NullPointerException e) {
                                e.printStackTrace();
                            }
                        }
                        /*
                         * Spawn the objects & the hotspots
                         */
                        else if (object.getDefinitions().name.equals("Window")) {
                            object = new WorldObject(getWindowId(), object.getType(), (object.getRotation() + chunkRotation) % 4, x + boundChuncks[0]*8,y + boundChuncks[1]*8, reference.getPlane());
                            World.spawnObject(object, true);
                        }

                        else {
                            /*if (object.getDefinitions().name.equalsIgnoreCase("door hotspot")) {
                                if (reference.getRoom().doesHaveDoors()) {
                                    World.spawnObject(object, true);
                                }
                                if (player.getRoomFor(reference.getX() + 1, reference.getY()) == null) {
                                    World.spawnObject(object, true);
                                }
                                if (player.getRoomFor(reference.getX() - 1, reference.getY()) == null) {
                                    World.spawnObject(object, true);
                                }
                                if (player.getRoomFor(reference.getX(), reference.getY() + 1) == null) {
                                    World.spawnObject(object, true);
                                }
                                if (player.getRoomFor(reference.getX(), reference.getY() - 1) == null) {
                                    World.spawnObject(object, true);
                                }
                                System.out.println("removing door");
                            }*/
                            try {
                                for (WorldObject o1 : player.getConObjectsToBeLoaded()) {
                                    World.spawnObject(o1, true);
                                }
                                WorldObject o = new WorldObject(13405, 10, 4, boundChuncks[0]*8 + 35, boundChuncks[1]*8 + 35, 0);
                                World.spawnObject(o, true);
                            } catch (NullPointerException e) {
                                System.out.println("Player objects are null");
                                e.printStackTrace();
                            }
                        }
                    }
                }
            }
        }
    }
}

public void previewRoom(Player player, int[] boundChuncks, RoomReference reference, boolean remove) {
    int boundX = reference.getX() * 8;
    int boundY = reference.getY() * 8;
    Region region = World.getRegion(RegionBuilder.getRegionHash(reference.getRoom().getChunkX()/8, reference.getRoom().getChunkY()/8));
    int boundX2 = (reference.getRoom().getChunkX() - (reference.getRoom().getChunkX() / 8 * 8)) * 8;
    int boundY2 = (reference.getRoom().getChunkY() - (reference.getRoom().getChunkY() / 8 * 8)) * 8;
    DynamicRegion house = (DynamicRegion) World.getRegion(RegionBuilder.getRegionHash(player.getBoundChuncks()[0]/8, player.getBoundChuncks()[1]/8));
    house.getRegionCoords()[reference.getPlane()][reference.getX()][reference.getY()][3] = reference.getRotation();
    for(int x = 0; x < 8; x++) {
        for(int y = 0; y < 8; y++) {
            WorldObject[] objects = region.getObjects(reference.getPlane(), boundX2+x, boundY2+y);
            if(objects != null) {
                for(WorldObject object : objects) {
                    if(object.getDefinitions().containsOption("Build")) {
                        System.out.println("test");
                        int x2 = x;
                        int y2 = y;
                        for (int rotate = 0; rotate < reference.getRotation(); rotate++) {
                            int fakeChunckX = x2;
                            int fakeChunckY = y2;
                            x2 = fakeChunckY;
                            y2 = 7 - fakeChunckX;
                        }
                        object = new WorldObject(object.getId(), object.getType(), (object.getRotation() + reference.getRotation()) % 4, boundX + x2 + boundChuncks[0]*8, boundY + y2 + boundChuncks[1]*8, reference.getPlane());
                        if(remove)
                            player.getPackets().sendDestroyObject(object);
                        else
                            player.getPackets().sendSpawnedObject(object);
                    }
                }
            }
        }
    }
}

public int getWindowId() {
    switch(place) {
    case 0:
        return 13099;
    case 1:
        return 13115;
    case 2:
        return 0;
    case 3:
        return 0;
    default:
        return 13115;
    }
}

public int getDoorId() {
    switch(place) {
    case 0:
        return 13100;
    default:
        return 1058;
    }
}
private final static int[] LAND = {233, 632}; 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T15:01:50.140

要使该类`Serializable`既是它，它的超类和其中的所有内容都需要是 ，或者通过将其`Serializable`标记为标记为您不想成为的东西`Serializable``transient`

序列化跨越要序列化的类（即所有字段）以及超类（及其各自的字段）。

在你的情况下，我会检查两者`RoomReference`并且`Player`也是`Serializable`

查看有关序列化的[Oracle 文档](http://docs.oracle.com/javase/7/docs/platform/serialization/spec/serialTOC.html)以获取更多信息。

# powershell - 等效于 Powershell 中的 tail -f output\worker*.log

> ID：16040386
> 
> 赞同：1
> 
> 时间：2013-04-16T14:58:24.403
> 
> 标签：powershell, tail

我需要将几个日志文件（在写入时）输出到 shell。

在我的脚本的 unix 版本中，这是通过`tail -f output\worker*.log`. **注意通配符。**

在 Powershell 我试过`Get-Content -Path "output\worker*.log" -Wait`了，但这只会将它可以找到的第一个日志文件打印到 shell。

为了完成，这是我调用我的程序的代码：

```
foreach ($worker in $workers)
{
  Write-Host "  Start $worker in background"

  $block = {& $args[0] $args[1] $args[2] $args[3] $args[4] $args[5] $args[6] 2> $args[7] > $args[8]}
  start-job -name $worker -scriptblock $block -argumentlist `
    "$strPath\worker\bin\win32\php.exe", `
    "-q", `
    "-c", `
    "$strPath\worker\conf\php_win32.ini", `
    "$strPath\worker\bin\os-independant\logfilefilter\logfilefilter.php", `
    "-f", `
    "$strPath\worker\$worker\conf\logfilefilter-$worker.xml", `
    "$strPath\output\$worker-error.log", `
    "$strPath\output\$worker.log"
}

Get-Content -Path "output\worker*.log" -Wait 
```

在我的测试用例中，有 8 个工作人员和日志文件（`output\worker01.log`, `output\worker02.log`, `output\worker03.log`, `output\worker04.log`, `output\worker05.log`, `output\worker06.log`, `output\worker07.log`, `output\worker08.log`）

是否有解决方法来输出所有这些日志文件？或者是否可以从后台进程复制标准输出流以在外壳中打印它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T15:47:37.840

您可以通过直接从子作业的输出缓冲区读取输出流来复制它们。

这是一个演示脚本。请注意，对于 Verbose 输出，我会在读取缓冲区时从缓冲区中删除输出，这样它就不会在后续读取时重新显示。这似乎对作业的接收作业缓冲区没有任何影响。如果您在脚本完成后对其执行 Receive Job，您仍将再次获得 Verbose 输出。

```
$sb = {
$VerbosePreference = 'Continue'
for ($i = 1; $i -le 100; $i++ )
{
  start-sleep -Milliseconds 150
  Write-Verbose "$(get-date)"
  write-progress -activity "Search in Progress" -status "$i% Complete:" -percentcomplete $i;}
}

$job = start-job -ScriptBlock $sb 
$verbose = ($job.ChildJobs[0].Verbose)

While ($job.State -ne 'Completed')
{
  $job.ChildJobs |
   foreach {
   Start-Sleep -seconds 1
   $Pct_Complete = $_.Progress | select -last 1 | select -ExpandProperty PercentComplete
   Write-Host "`rBackground job $($_.ID) is $Pct_Complete percent completed." -ForegroundColor Cyan 
     While ($verbose.count){
      Write-Host $verbose[0] -ForegroundColor Gray
      $verbose.removeat(0)}
      }

}
write-host "`nDone!" 
```

# matlab - 在 Matlab 中选择 x 个最小的元素

> ID：16040391
> 
> 赞同：0
> 
> 时间：2013-04-16T14:58:30.450
> 
> 标签：matlab, matrix, minimum

我有一个整数值矩阵，x 轴代表不同的日期，y 轴代表一天中的小时。每个单元格中都有一个**数字**，表示一天中有多少小时对应于当天的某些标准。这就是为什么我需要每小时计算一次，而不仅仅是在时间结束时。

整个问题是我必须选择 5 个最好的日子，它们的数量最少（对应的最少）。所以基本上在矩阵中，这意味着**在行中选择 5 个最低的数字，**并记住最小值所在**列的索引。**（我需要知道它发生在哪一天）。因为随着时间的推移，每次都可能有 5 天不同的时间，所以对整张桌子进行排序会变得一团糟。

我可以通过取前 5 个数字让它变得非常丑陋，然后当我在途中发现较小的一个时，我会忘记 5 中最大的一个，并记住新的列的索引。然而，这个解决方案似乎很草率。Matlab中必须有更好的方法来解决这个问题。

有什么想法、功能可以让我的生活更轻松吗？

1 1 0 1 1 1 0 0 1 1

1 2 1 2 2 1 0 1 2 2

例如，在从 1-10 索引的这两行中，在第一行中它应该返回第 3、7、8 列和另外两列并不真正关心哪一列。在第二行中，它应该返回第 7、8、6、1、3 列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T15:07:31.370

```
A = randi(60,100,2);
[min_val,index] = sort(A(:,2),'ascend');    
output = [A(index(1:5),1) A(index(1:5),2)]; 
```

这应该对你有帮助（我猜）；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T15:14:54.947

可能最简单（但不是最有效）的方法之一是使用该`sort`函数（它也返回排序索引）：

```
>> [~,index] = sort([1 1 0 1 1 1 0 0 1 1]);
>> index(1:5)
ans =

     3     7     8     1     2

>> [~,index] = sort([1 2 1 2 2 1 0 1 2 2]);
>> index(1:5)

ans =

     7     1     3     6     8 
```

# c# - 在 Windows XP 上运行的 ac# 程序中的图像扫描

> ID：16040392
> 
> 赞同：1
> 
> 时间：2013-04-16T14:58:32.513
> 
> 标签：c#, wia, scanning, twain

是否有一个基于 Windows 的直接库，我可以使用它来扫描 C# 中的文档？或者我唯一的选择是使用商业供应商，如leadtools、dynamsoft 等。我尝试使用wiaaut.dll，但它与XP 等旧版Windows 不兼容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T17:43:00.993

我不相信 Windows XP 在操作系统中包含任何 TWAIN 或扫描支持。TWAIN 驱动程序始终由扫描仪供应商提供。因此，如果您想要在 Windows XP 上运行的无第三方库解决方案，我认为您不走运。

# html - 合并更多 html 文件，其中 1 个随机取自子文件夹

> ID：16040393
> 
> 赞同：0
> 
> 时间：2013-04-16T14:58:32.943
> 
> 标签：html, batch-file, merge

我需要为我工厂的电子邮件生成动态签名。

我的需要是为每个依赖者制作一个签名，用他的名字，然后插入一个随机的 jpg（取自 html 文件中的代码），然后再次插入我工厂的标准签名，其中包含很多到 Facebook 的各种链接、谷歌+等...

所以我尝试用 html 文件创建一个随机函数，但是当我用 Thunderbird 打开我的 html 签名时，我看不到随机图像。Thunderbird 生成特定的 html 以包含 jpg。所以我需要生成它们，将它们放在一个文件夹中，然后随机选择它们。

所以我的想法是：我拿一个 BATCH 脚本来合并，第一部分`name.html`（对于每个用户帐户。你能帮助我吗？谢谢！`jpg``html``1.html``2.html``3.html``standardsignature.html`

我试过了，但还是不行：

```
@echo off "C:\Documents and Settings\Mauro\Documenti\Firme\ProvaMerge\" pause
for %f in (mauro.txt) do type "%f" >> *\DEF\new.txt  
PAUSE
@echo off "C:\Documents and Settings\Mauro\Documenti\Firme\ProvaMerge\html"
pause
SET /A html=%RANDOM% * 3 / 32768 + 1
pause
for %f in (%html%.txt) do type "%f" >> DEF\new.txt
pause
for %f in (mauro2.txt) do type "%f" >> *\DEF\new.txt  
pause 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T17:43:11.233

首先，如果您打算编写批处理脚本，请进行一些研究。不要只看一眼。

```
@echo off "C:\Documents and Settings\Mauro\Documenti\Firme\ProvaMerge\" pause 
```

我所能做的就是猜测您正在尝试更改目录，所以这就是您的操作方法

```
cd "C:\Documents and Settings\Mauro\Documenti\Firme\ProvaMerge\" 
```

和这里：

```
for %f in (mauro.txt) do type "%f" >> *\DEF\new.txt 
```

对于 mauro.txt 中的每一行，这将尝试找到一个以该行内容命名的文件，然后读取该文件。你只需要这个

```
type mauro.txt >> path 
```

也不确定你`*`在重定向路径中做什么，但它是无效的。请解释那是为了什么。

# c# - 加载 .html，带有 css 引用，文件嵌入在资源中

> ID：16040398
> 
> 赞同：4
> 
> 时间：2013-04-16T14:58:44.223
> 
> 标签：c#, winforms, browser

那么在我的 Windows 窗体应用程序中，我有一个简单的 Web 浏览器，它应该运行一个`.html`包含`css`样式注册表单的文件。使用远程加载页面时，它运行得非常好`webBrowser1.Navigate("http://www.example.com/mypage.html");`；但是，当我尝试通过设置 to 将文件`.html`[连同`css`所需文件一起] 嵌入资源中时，只会导航到文件而不检测文件，这会导致令人毛骨悚然的页面外观。`Building Action``Embedded Resource``webBrowser``.html``css`

这是我到目前为止尝试过的代码。

`.html`文件：

```
 <link href="lang/en/compact.css" rel="stylesheet" type="text/css" />
  <link href="lang/en/lang.css" rel="stylesheet" type="text/css" />
  <link href="img/basics.css" rel="stylesheet" type="text/css" /> 
```

我如何`.html`从以下位置获取文件`Embedded Resources`：

```
using (Stream stream = Assembly.GetExecutingAssembly()
                   .GetManifestResourceStream("DummyBrowserFormImprovements.HTML." + "mypage.html"))
    if (stream != null)
        using (var reader = new StreamReader(stream))
        {
            string result = reader.ReadToEnd();
            dummyBrowser1.DocumentText = result;
        } 
```

不幸的是，上述方法仅加载`.html`文件而没有识别其中`css`引用的文件；因此，任何有关如何在 Windows 窗体中嵌入`.html`使用`js, css`外部文件的文件以及如何将其加载到 a 中的详细答案`webBrowser`将**不胜感激**。我希望我能清楚地表达我的问题并提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T15:07:00.223

问题可能是因为其他文件仍嵌入在您的应用程序中。浏览器在哪里可以找到它们？

您可以将所有需要的嵌入文件写入临时目录，并让您的网络浏览器从那里加载 .html 页面。加载 html 页面后，它应该能够找到您的其他资源，因为它们将位于同一目录中（或您制作的任何结构）。

基本上我是说您可以将所有文件提取到临时目录结构中，例如：

```
C:\mytempsite\mypage.html
C:\mytempsite\lang\en\compact.css
C:\mytempsite\lang\en\lang.css
C:\mytempsite\img\basics.css 
```

然后您可以将 Web 浏览器设置为[导航](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.navigate.aspx)到“C:\mytempsite\mypage.html”

只要您可以在没有应用程序的情况下直接导航到此页面，并且页面加载正确，那么当您的应用程序导航到那里时，它应该可以工作。只需确保 mypage.html 具有格式良好的 html 并且是一个完整的页面。

# sql - 如何在 sql Select 子句中添加 2 个数字？

> ID：16040400
> 
> 赞同：1
> 
> 时间：2013-04-16T14:58:51.930
> 
> 标签：sql, sql-server, tsql, sql-server-2012

我有这个查询：

```
Select 
    Count(DocumentID) 
From 
    Documents d 
Inner Join 
    Accounts a on a.AccountID = d.CreatedByAccountID  
Where 
    a.FeeExempt = 1
    Or
    (Select 
         Case 
             When a.OrganizationTypeID = 1 Or a.OrganizationTypeID = 2 
             Then 0 
             Else EFileFee 
         End 
     From ITypes
     Where ITypeID = d.ITypeID  

    +
    Select 100 --just to test
    ) <= 0 
```

我怎样才能使这个查询编译？基本上我想做2个选择并检查它们的加法是否小于0。但显然目前查询不正确并且不会编译。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T15:01:02.113

你想要这个吗：

```
. . ..
(select sum(val)
 from ((Select (Case When a.OrganizationTypeID = 1 Or a.OrganizationTypeID = 2 Then 0 Else EFileFee End) as val
        From ITypes
        Where ITypeID = d.ITypeID 
       ) union all
       (Select 100 --just to test
       )
      ) t
 ) <= 0 
```

# php - 分页系统总是缺少 1 个结果

> ID：16040404
> 
> 赞同：1
> 
> 时间：2013-04-16T14:58:58.727
> 
> 标签：php, mysql, pdo

我有一个分页系统，它从数据库中获取所有结果，然后将它们加载到分页中。

假设我将限制设置为每页 5 个结果，它将生成更多页面，并按日期和时间对结果进行排序。

但是我有一个问题，我的系统总是缺少数据库中最新的结果（按日期/时间），我不知道为什么..

这是代码：

```
// how many rows to show per page
$rowsPerPage = 10;

// by default we show first page
$page_num = 1;

// if $_GET['page'] defined, use it as page number, $_GET gets the page number out of the url
//set by the $page_pagination below
if(isset($_GET['page'])){$page_num = $_GET['page'];}

//the point to start for the limit query
$offset = $page_num; 

// Zero is an incorrect page, so switch the zero with 1, mainly because it will cause an error with the SQL
if($page_num == 0) {$page_num = 1;}

// counting the offset
$sql = "SELECT * FROM comments ORDER BY date, time desc LIMIT $offset, $rowsPerPage";
$res = $pdo->query($sql);

// how many rows we have in database
$sql2  = "SELECT COUNT(comment_id) AS numrows FROM comments";
$res2  = $pdo->query($sql2);
$row2  = $res2->fetch();
$numrows = $row2['numrows'];

// print the random numbers
while($row = $res->fetch())
{
    //Echo out your table contents here.

    echo $row[1].'<BR>';
    echo $row[2].'<BR>';
    echo '<BR>';
}

// how many pages we have when using paging?
$numofpages = ceil($numrows/$rowsPerPage);

// print the link to access each page
$self = "events.php?";
    $page_pagination = '';
if ($numofpages > '1' ) {
    $range = 10; //set this to what ever range you want to show in the pagination link
    $range_min = ($range % 2 == 0) ? ($range / 2) - 1 : ($range - 1) / 2;
    $range_max = ($range % 2 == 0) ? $range_min + 1 : $range_min;
    $page_min = $page_num- $range_min;
    $page_max = $page_num+ $range_max;
    $page_min = ($page_min < 1) ? 1 : $page_min;
    $page_max = ($page_max < ($page_min + $range - 1)) ? $page_min + $range - 1 : $page_max;
    if ($page_max > $numofpages) {
        $page_min = ($page_min > 1) ? $numofpages - $range + 1 : 1;
        $page_max = $numofpages;
    }

    $page_min = ($page_min < 1) ? 1 : $page_min;

    if ( ($page_num > ($range - $range_min)) && ($numofpages > $range) ) {
        $page_pagination .= '<a class="num"  title="First" href="'.$self.'page=1">&lt;</a> ';
    }

    if ($page_num != 1) {
        $page_pagination .= '<a class="num" href="'.$self.'page='.($page_num-1). '">Previous</a> ';
    }

    for ($i = $page_min;$i <= $page_max;$i++) {
        if ($i == $page_num)
            $page_pagination .= '<span class="num"><strong>' . $i . '</strong></span> ';
            else
            $page_pagination.= '<a class="num" href="'.$self.'page='.$i. '">'.$i.'</a> ';
    }

        if ($page_num < $numofpages) {
            $page_pagination.= ' <a class="num" href="'.$self.'page='.($page_num + 1) . '">Next</a>';
        }

        if (($page_num< ($numofpages - $range_max)) && ($numofpages > $range)) {
            $page_pagination .= ' <a class="num" title="Last" href="'.$self.'page='.$numofpages. '">&gt;</a> ';
        }
}

echo $page_pagination.'<BR><BR>';

echo 'Number of results - '.$numrows ;
echo ' and Number of pages   - '.$numofpages.'<BR><BR>';

$res2->closeCursor(); 
```

**问题：**

我做错了什么？我真的看不出有什么问题，但我总是收到这个错误：

注意：未定义变量：page_pagination

线：

```
echo $page_pagination.'<BR><BR>'; 
```

它总是发生在不同的行上，取决于结果数量，但要解决这个问题，我需要声明 page_pagination = ''; 在整件事之前。

我该如何解决这个问题以及导致这个问题的原因是什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T15:01:35.223

您的 $offset 被设置为 1。最新的总是丢失，因为它的格式是 1-10 而不是 0-9。索引从 0 开始。以下应该有效。

```
$offset = ($rowsPerPage * $page_num) - $rowsPerPage; 
```

# c++ - 硬币变化自下而上的动态规划

> ID：16040409
> 
> 赞同：1
> 
> 时间：2013-04-16T14:59:12.030
> 
> 标签：c++, algorithm, dynamic-programming, coin-change, bottom-up

[http://uva.onlinejudge.org/external/6/674.html](http://uva.onlinejudge.org/external/6/674.html)我正在尝试解决这个问题。但请注意，这不是最小硬币找零问题，它要求我使用 50、25、15、10、5 和 1 美分硬币制作 N 美分的不同数量的方法。这很简单，所以我做了这个函数：

```
int count(int n, int m) // n is the N of the problem, m is the number of coin types and s[] is {1, 5, 10, 25, 50}
{
  if (n == 0)
  {
    return 1;
  }

  if (n < 0)
  {
    return 0;
  }

  if (m < 0 && n >= 1)
  {
    return 0;
  }

  return DP[n][m - 1] + DP[n - s[m]][m];
} 
```

也相当简单的是添加带有记忆的动态编程：

```
int count(int n, int m)
{
  if (n == 0)
  {
    return 1;
  }

  if (n < 0)
  {
    return 0;
  }

  if (m < 0 && n >= 1)
  {
    return 0;
  }

  if (DP[n][m - 1] == -1 || DP[n - s[m]][m] == -1)
  {
    return count(n, m - 1) + count(n - s[m], m);
  }
  else
  {
    return DP[n][m - 1] + DP[n - s[m]][m];
  }
} 
```

然而，这些都不够快——我需要自下而上的动态编程，但我在编码它时遇到了困难，即使在 Algorithmist 的帮助下——http: [//www.algorithmist.com/index.php/Coin_Change](http://www.algorithmist.com/index.php/Coin_Change)。

```
void generate()
{
  for (i = 0; i < MAX; i++)
  {
    for (u = 0; u < m; u++)
    {
      if (i == 0)
      {
        DP[i][u] = 1;
      }
      else if (u == 0)
      {
        DP[i][u] = 0;
      }
      else if (s[u] > i)
      {
        DP[i][u] = DP[i][u - 1];
      }
      else
      {
        DP[i][u] = DP[i][u - 1] + DP[i - s[u]][u];
      }
    }
  }
} 
```

由于某种原因，每个结果我都得到 0，这是我的完整代码：

```
#include <stdio.h>
#include <string.h>

using namespace std;

#define MAX 7490

int s[] = {1, 5, 10, 25, 50}, m = 5, input, DP[MAX][5], i, u;

int count(int n, int m)
{
  if (n == 0)
  {
    return 1;
  }

  if (n < 0)
  {
    return 0;
  }

  if (m < 0 && n >= 1)
  {
    return 0;
  }

  if (DP[n][m - 1] == -1 || DP[n - s[m]][m] == -1)
  {
    return count(n, m - 1) + count(n - s[m], m);
  }
  else
  {
    return DP[n][m - 1] + DP[n - s[m]][m];
  }
}

void generate()
{
  for (i = 0; i < MAX; i++)
  {
    for (u = 0; u < m; u++)
    {
      if (i == 0)
      {
        DP[i][u] = 1;
      }
      else if (u == 0)
      {
        DP[i][u] = 0;
      }
      else if (s[u] > i)
      {
        DP[i][u] = DP[i][u - 1];
      }
      else
      {
        DP[i][u] = DP[i][u - 1] + DP[i - s[u]][u];
      }
    }
  }
}

int main()
{
  memset(DP, -1, sizeof DP);
  generate();

  while (scanf("%d", &input) != EOF)
  {
    //printf("%d\n", count(input, 4));
    printf("%d\n", DP[input][4]);
  }

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T16:53:22.967

你在这里犯了错误：

```
else if (u == 0)
{
   DP[i][u] = 0;
} 
```

这应该是因为你可以用 1 美分硬币以一种可能的方式`DP[i][u]=1`产生任何价值。`i`即拿 5 美分，你将拿 5 个 1 美分硬币，这是总共赚 5 美分的一种方法。

## -----

顺便说一句，在您使用 count 方法的第一种方法中，您是否有这个：

```
if (DP[n][m - 1] == -1 || DP[n - s[m]][m] == -1)
{
  return count(n, m - 1) + count(n - s[m], m);
} 
```

或这个：

```
if (DP[n][m - 1] == -1 || DP[n - s[m]][m] == -1)
{
    return DP[n][m] = count(n, m - 1) + count(n - s[m], m);
} 
```

如果您没有记住已经计算的结果，那么这个记忆检查`if (DP[n][m - 1] == -1 || DP[n - s[m]][m] == -1)`将永远不会起作用，这可能是您的第一种方法太慢的原因:-？

# c++ - 抽象基类、多重继承、常见的纯虚方法

> ID：16040411
> 
> 赞同：2
> 
> 时间：2013-04-16T14:59:16.430
> 
> 标签：c++, abstract-class, multiple-inheritance

下面的测试代码似乎表明，如果一个类有两个具有公共纯虚方法的抽象基类，那么这些方法在派生类中是“共享的”。

```
#include <iostream>
#include <string>

using namespace std;

struct A
{
    virtual string do_a() const = 0;
    virtual void set_foo(int x) = 0;
    virtual int get_foo() const = 0;
    virtual ~A() {}
};

struct B
{
    virtual string do_b() const = 0;
    virtual void set_foo(int x) = 0;
    virtual int get_foo() const = 0;
    virtual ~B() {}
};

struct C : public A, public B
{
    C() : foo(0) {}
    string do_a() const { return "A"; }
    string do_b() const { return "B"; }
    void set_foo(int x) { foo = x; }
    int get_foo() const { return foo; }
    int foo;
};

int main()
{
    C c;
    A& a = c;
    B& b = c;
    c.set_foo(1);
    cout << a.do_a() << a.get_foo() << endl;
    cout << b.do_b() << b.get_foo() << endl;
    cout << c.do_a() << c.do_b() << c.get_foo() << endl;
    a.set_foo(2);
    cout << a.do_a() << a.get_foo() << endl;
    cout << b.do_b() << b.get_foo() << endl;
    cout << c.do_a() << c.do_b() << c.get_foo() << endl;
    b.set_foo(3);
    cout << a.do_a() << a.get_foo() << endl;
    cout << b.do_b() << b.get_foo() << endl;
    cout << c.do_a() << c.do_b() << c.get_foo() << endl;
} 
```

此代码使用 -std=c++98 -pedantic -Wall -Wextra -Werror 在 g++ 4.1.2（诚然旧）中干净地编译。输出是：

```
A1
B1
AB1
A2
B2
AB2
A3
B3
AB3 
```

这是我想要的，但我质疑这是否普遍有效，或者只是“偶然”。从根本上说，这是我的问题：我可以依赖这种行为，还是应该始终从虚拟基类继承这种场景？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T15:09:16.550

不要让它变得比现在更难。与基类中的虚函数具有相同签名的函数会覆盖基版本。不管你有多少个碱基，或者另一个碱基是否有一个具有相同签名的虚函数。所以，是的，这行得通。

# jsf-2 - faces-config.xml 中没有视图范围

> ID：16040416
> 
> 赞同：1
> 
> 时间：2013-04-16T14:59:53.423
> 
> 标签：jsf-2

为什么没有`view`范围`faces-config.xml`？如果我不使用 faces-config.xml，我将如何设置 bean 来查看范围？

我使用了以下 bean 文件：

```
@ManagedBean
@ViewScoped
public class StatusBean2 implements Serializable  {

    /**
     * 
     */
    private static final long serialVersionUID = -7528998562821856315L;
    private EntityManager em;

    public StatusBean2() {
        EntityManagerFactory emf = Persistence
                .createEntityManagerFactory("FreeBird");
        em = emf.createEntityManager();
        FacesContext context = FacesContext.getCurrentInstance();
        HttpSession session = (HttpSession) context.getExternalContext()
                .getSession(true);
        int toIndex = 5;
       session.setAttribute("toIndex", toIndex);

    }
    public List<Status> getStatusList() {
        FacesContext context = FacesContext.getCurrentInstance();
        HttpSession session = (HttpSession) context.getExternalContext()
                .getSession(true);
        User user = (User) session.getAttribute("userdet");
        Query query = em.createQuery("SELECT s FROM Status s WHERE s.email='"
                + user.getEmail() + "' ORDER BY s.timeMillis desc",
                Status.class);
        List<Status> results = query.getResultList();
        Query query1 = em.createQuery("SELECT f FROM Friend f WHERE f.email='"
                + user.getEmail() + "'", Friend.class);
        List<Friend> results1 = query1.getResultList();
        Iterator<Friend> it = results1.listIterator();
        while (it.hasNext()) {
            String email = it.next().getFriendEmail();
            Query query2 = em.createQuery(
                    "SELECT s FROM Status s WHERE s.email='" + email
                            + "' ORDER BY s.timeMillis desc", Status.class);
            List<Status> results2 = query2.getResultList();
            results.addAll(results2);

        }
        Collections.sort(results);

        int toIndex = (int) session.getAttribute("toIndex");
        List<Status> subList = results.subList(0, toIndex);

        return subList;

    }
} 
```

使用注释时遇到的异常如下：

```
Apr 16, 2013 8:41:23 PM com.sun.faces.application.view.FaceletViewHandlingStrategy handleRenderException
SEVERE: Error Rendering View[/Home.xhtml]
java.io.NotSerializableException: com.bean.StatusBean2
    at java.io.ObjectOutputStream.writeObject0(Unknown Source)
    at java.io.ObjectOutputStream.writeObject(Unknown Source)
    at java.util.HashMap.writeObject(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at java.io.ObjectStreamClass.invokeWriteObject(Unknown Source)
    at java.io.ObjectOutputStream.writeSerialData(Unknown Source)
    at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
    at java.io.ObjectOutputStream.writeObject0(Unknown Source)
    at java.io.ObjectOutputStream.defaultWriteFields(Unknown Source)
    at java.io.ObjectOutputStream.writeSerialData(Unknown Source)
    at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
    at java.io.ObjectOutputStream.writeObject0(Unknown Source)
    at java.io.ObjectOutputStream.writeArray(Unknown Source)
    at java.io.ObjectOutputStream.writeObject0(Unknown Source)
    at java.io.ObjectOutputStream.writeObject(Unknown Source)
    at java.util.HashMap.writeObject(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at java.io.ObjectStreamClass.invokeWriteObject(Unknown Source)
    at java.io.ObjectOutputStream.writeSerialData(Unknown Source)
    at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
    at java.io.ObjectOutputStream.writeObject0(Unknown Source)
    at java.io.ObjectOutputStream.writeObject(Unknown Source)
    at com.sun.faces.renderkit.ClientSideStateHelper.doWriteState(ClientSideStateHelper.java:293)
    at com.sun.faces.renderkit.ClientSideStateHelper.writeState(ClientSideStateHelper.java:167)
    at com.sun.faces.renderkit.ResponseStateManagerImpl.writeState(ResponseStateManagerImpl.java:119)
    at com.sun.faces.application.StateManagerImpl.writeState(StateManagerImpl.java:155)
    at com.sun.faces.application.view.WriteBehindStateWriter.flushToWriter(WriteBehindStateWriter.java:221)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:406)
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:127)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:117)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:97)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:135)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:309)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)

Apr 16, 2013 8:41:23 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet [Faces Servlet] in context with path [/FreeBird_New2] threw exception
java.io.NotSerializableException: com.bean.StatusBean2
    at java.io.ObjectOutputStream.writeObject0(Unknown Source)
    at java.io.ObjectOutputStream.writeObject(Unknown Source)
    at java.util.HashMap.writeObject(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at java.io.ObjectStreamClass.invokeWriteObject(Unknown Source)
    at java.io.ObjectOutputStream.writeSerialData(Unknown Source)
    at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
    at java.io.ObjectOutputStream.writeObject0(Unknown Source)
    at java.io.ObjectOutputStream.defaultWriteFields(Unknown Source)
    at java.io.ObjectOutputStream.writeSerialData(Unknown Source)
    at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
    at java.io.ObjectOutputStream.writeObject0(Unknown Source)
    at java.io.ObjectOutputStream.writeArray(Unknown Source)
    at java.io.ObjectOutputStream.writeObject0(Unknown Source)
    at java.io.ObjectOutputStream.writeObject(Unknown Source)
    at java.util.HashMap.writeObject(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at java.io.ObjectStreamClass.invokeWriteObject(Unknown Source)
    at java.io.ObjectOutputStream.writeSerialData(Unknown Source)
    at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
    at java.io.ObjectOutputStream.writeObject0(Unknown Source)
    at java.io.ObjectOutputStream.writeObject(Unknown Source)
    at com.sun.faces.renderkit.ClientSideStateHelper.doWriteState(ClientSideStateHelper.java:293)
    at com.sun.faces.renderkit.ClientSideStateHelper.writeState(ClientSideStateHelper.java:167)
    at com.sun.faces.renderkit.ResponseStateManagerImpl.writeState(ResponseStateManagerImpl.java:119)
    at com.sun.faces.application.StateManagerImpl.writeState(StateManagerImpl.java:155)
    at com.sun.faces.application.view.WriteBehindStateWriter.flushToWriter(WriteBehindStateWriter.java:221)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:406)
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:127)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:117)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:97)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:135)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:309)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T15:01:04.097

在托管 bean 上使用`@ViewScoped`注释：

```
import javax.faces.bean.ManagedBean;
import javax.faces.bean.ViewScoped;

@ManagedBean
@ViewScoped
public class AViewScopedBean {
    //managed bean contents...
} 
```

如果您不喜欢注释配置（真的很奇怪），您可以在 faces-config.xml 上设置视图范围

```
<managed-bean>
    <managed-bean-name>aViewScopedBean<managed-bean-name>
    <managed-bean-class>some.package.AViewScopedBean</managed-bean-class>
    <managed-bean-scope>view</managed-bean-scope>
</managed-bean> 
```

请注意，**这只适用**于 JSF 2。检查您的*faces-config*文件是否配置为处理 JSF 2.x 版本：

```
<!-- relevant part of faces-config.xml file for this Q/A -->
<faces-config ... version="2.1"> 
```

* * *

根据您的问题更新进行编辑：

错误消息非常简单：

> java.io.NotSerializableException: com.bean.StatusBean2

这意味着您`com.bean.StatusBean2`还必须实现该`Serializable`接口。从[`java.io.Serializable`](http://docs.oracle.com/javase/7/docs/api/java/io/Serializable.html)文档：

> 在遍历图时，可能会遇到不支持 Serializable 接口的对象。在这种情况下，`NotSerializableException`将抛出并标识不可序列化对象的类。（这是你得到的错误）

您可以在此处了解有关 Java 序列化的更多信息：[Java 序列化](http://www.javabeginner.com/uncategorized/java-serialization)

从您的问题来看：*是否有必要实现可序列化？*，BalusC 已经发布了一个很好的答案/解释：[JSF backing bean should be serializable？](https://stackoverflow.com/q/3372687/1065197)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T15:15:58.947

检查您（例如： http: [//java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd](http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd)`xsd` ）中列出的内容应该会告诉您范围是允许的托管 bean 范围：`faces-config.xml``view`

```
 <xsd:complexType name="faces-config-managed-bean-scopeOrNoneType">
    <xsd:annotation>
      <xsd:documentation>
        <![CDATA[[
        Defines the legal values for the <managed-bean-scope>
        element's body content, which includes all of the scopes
        normally used in a web application, plus the "none" value
        indicating that a created bean should not be stored into
        any scope.  Alternatively, an EL expression may be used
        as the value of this element.  The result of evaluating this
        expression must by of type java.util.Map.

        ]]>
      </xsd:documentation>
    </xsd:annotation>
    <xsd:simpleContent>
      <xsd:restriction base="javaee:string">
        <xsd:pattern value="view|request|session|application|none|#\{.*\}"/>
      </xsd:restriction>
    </xsd:simpleContent>
  </xsd:complexType> 
```

*假设 jsf 2.0 或更高版本*

***这本身并不是一个新的答案，只是另一种方式来自己找出它是允许的***

**- - - - - - - - 编辑 - - - - - - - -**

检查[这篇文章](http://balusc.blogspot.com/2010/06/benefits-and-pitfalls-of-viewscoped.html)：

> 请注意，bean 需要实现 Serializable，因为它将存储在视图映射中，而视图映射又存储在会话中。一些 servletcontainer 配置将会话存储在磁盘而不是内存中。当您将 JSF 视图状态保存方法配置到客户端而不是（默认）服务器时，这也是强制性的。

解释为什么视图范围需要`Serializable`.

# c# - 将 Autofac 转换为 Simple Injector

> ID：16040417
> 
> 赞同：3
> 
> 时间：2013-04-16T14:59:54.190
> 
> 标签：c#, autofac, simple-injector

在 Autofac 我可以执行以下操作

```
builder
.RegisterType<Services.GreetService>()
    .As<ServiceBase>()
.InstancePerLifetimeScope(); 
```

GreetService 继承自 ServiceBase 的地方

我想用 Simple Injector 做同样的事情。

有人知道怎么做吗？

谢谢

**更新 1**

我发现这篇文章他们在 Windows 服务中使用 autofac：[http ://www.turbulentintellect.com/2011/02/anatomy-of-windows-service-part-2.html](http://www.turbulentintellect.com/2011/02/anatomy-of-windows-service-part-2.html)

我一直在尝试用 Simple Injector 替换 Autofac，但我无法安装生成的服务。我收到的错误是 System.ArgumentException：必须为源指定值。这通常表示 ServiceInstaller 和 Service 中的 ServiceName 不匹配。

除以下内容外，所有内容均按照文章进行设置：

```
internal class ServiceBootstrapper
{
    //public IContainer Build()
    //{
    //    var builder = new ContainerBuilder();

    //    builder
    //        .RegisterType<GreetService>()
    //        .As<ServiceBase>()
    //        .InstancePerLifetimeScope();

    //    builder
    //        .RegisterType<ServiceNameProvider>()
    //        .As<IServiceNameProvider>()
    //        .InstancePerLifetimeScope();

    //    builder
    //        .RegisterType<Greeter>()
    //        .As<IGreeter>()
    //        .InstancePerLifetimeScope();

    //    return builder.Build();
    //}

    public Container Build()
    {
        var container = new Container();

        container.RegisterLifetimeScope<ServiceBase, GreetService>();
        container.RegisterLifetimeScope<IServiceNameProvider, ServiceNameProvider>();
        container.RegisterLifetimeScope<IGreeter, Greeter>();

        container.Verify();

        return container;
    }
}

internal class InstallBootstrapper
{
    //public IContainer Build()
    //{
    //    var builder = new ContainerBuilder();

    //    builder
    //        .RegisterType<HelloServiceProcessInstaller>()
    //        .As<Installer>()
    //        .InstancePerLifetimeScope();

    //    builder
    //        .RegisterType<GreetServiceInstaller>()
    //        .As<Installer>()
    //        .InstancePerLifetimeScope();

    //    builder
    //        .RegisterType<Config.ServiceNameProvider>()
    //        .As<Config.IServiceNameProvider>()
    //        .InstancePerLifetimeScope();

    //    return builder.Build();
    //}

    public Container Build()
    {
        var container = new Container();

        container.RegisterLifetimeScope<HelloServiceProcessInstaller>();
        container.RegisterLifetimeScope<GreetServiceInstaller>();
        container.RegisterLifetimeScope<IServiceNameProvider, ServiceNameProvider>();

        container.Verify();

        return container;
    }
}

public static class Program
{
        public static void Main(String[] args)
        {
            var iocBootstrap = new ServiceBootstrapper();
            var container = iocBootstrap.Build();

            var services = container.GetInstance<ServiceBase>();

            ServiceBase.Run(services);

            //var services = container.Resolve<IEnumerable<ServiceBase>>();

            //ServiceBase.Run(services.ToArray());
        }
}

[RunInstaller(true)]
public class ProjectInstaller : Installer
{
    public ProjectInstaller()
    {
        var bootstrapper = new InstallBootstrapper();
        var container = bootstrapper.Build();

       var processInstallers = container.GetInstance<ServiceProcessInstaller>();
       var serviceInstaller = container.GetInstance<ServiceInstaller>();

        //var installers = container.GetInstance<IEnumerable<Installer>>();
    //var installers = container.Resolve<IEnumerable<Installer>>();

   //Installers.AddRange(installers.ToArray());
       Installers.Add(processInstallers);
       Installers.Add(serviceInstaller); 
    }
} 
```

我肯定在这里遗漏了一些东西，但似乎无法弄清楚是什么。

**更新 2**

当我使用 InstallUtil 安装服务时，我在安装日志中收到以下信息

> 运行事务安装。
> 
> 开始安装的安装阶段。查看日志文件的内容以了解 C:\Local Development\HelloSvc\HelloSvc\bin\Debug\HelloSvc.exe 程序集的进度。该文件位于 C:\Local Development\HelloSvc\HelloSvc\bin\Debug\HelloSvc.InstallLog。
> 
> 安装阶段发生异常。System.ArgumentException：必须为源指定值。
> 
> 安装的回滚阶段即将开始。查看日志文件的内容以了解 C:\Local Development\HelloSvc\HelloSvc\bin\Debug\HelloSvc.exe 程序集的进度。该文件位于 C:\Local Development\HelloSvc\HelloSvc\bin\Debug\HelloSvc.InstallLog。
> 
> 回滚阶段成功完成。
> 
> 事务安装已完成。

如前所述，这通常是因为 ServiceName 设置不正确，但我看不出在这种情况下这是怎么可能的。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T19:20:56.453

您还没有描述转换有什么问题，所以我尝试回答两个可能的问题/问题：

Simple Injector 也支持使用以下方法为其基类注册类 `Register`：

```
var container = new Container();
container.Register<ServiceBase, GreetService>(); 
```

如果您对该部分有疑问，那么您可以在 [Lifetime Scoping Extensions](http://simpleinjector.codeplex.com/wikipage?title=ObjectLifestyleManagement#PerLifetimeScope)`InstancePerLifetimeScope`中找到类似的内容，您可以将其用于：`LifetimeScopeLifestyle`

```
var container = new Container();
container.Register<ServiceBase, GreetService>(
    new LifetimeScopeLifestyle()); 
```

或可选地使用`RegisterLifetimeScope`同一包中的扩展方法：

```
var container = new Container();
container.RegisterLifetimeScope<ServiceBase, GreetService>(); 
```

关于您的服务安装问题：

在`InstallBootstrapper`您需要注册`HelloServiceProcessInstaller`as`ServiceProcessInstaller`和`GreetServiceInstaller`as`ServiceInstaller`因为稍后您尝试将它们解析为`ServiceProcessInstaller`and `ServiceInstaller`：

```
internal class InstallBootstrapper
{
    public Container Build()
    {
        var container = new Container();

        container.RegisterLifetimeScope<ServiceProcessInstaller, 
                                        HelloServiceProcessInstaller>();
        container.RegisterLifetimeScope<ServiceInstaller, 
                                        GreetServiceInstaller>();
        container.RegisterLifetimeScope<IServiceNameProvider, 
                                        ServiceNameProvider>();

        container.Verify();

        return container;
    }
} 
```

并且`ProjectInstaller`因为`RegisterLifetimeScope`您需要使用`BeginLifetimeScope 创建一个LifetimeScope：

```
[RunInstaller(true)]
public class ProjectInstaller : Installer
{
    public ProjectInstaller()
    {

        var bootstrapper = new InstallBootstrapper();
        var container = bootstrapper.Build();

        using(container.BeginLifetimeScope())
        {
            var processInstallers = 
                  container.GetInstance<ServiceProcessInstaller>();
            var serviceInstaller = 
                  container.GetInstance<ServiceInstaller>();
            Installers.Add(processInstallers);
            Installers.Add(serviceInstaller);
        }
    }
} 
```

根据安装程序中根本不需要的原因`LifetimeScope`，您可以编写：

```
internal class InstallBootstrapper
{
    public Container Build()
    {
        var container = new Container();

        container.Register<ServiceProcessInstaller, 
                                        HelloServiceProcessInstaller>();
        container.Register<ServiceInstaller, 
                                        GreetServiceInstaller>();
        container.Register<IServiceNameProvider, 
                                        ServiceNameProvider>();

        container.Verify();

        return container;
    }
}

[RunInstaller(true)]
public class ProjectInstaller : Installer
{
    public ProjectInstaller()
    {

        var bootstrapper = new InstallBootstrapper();
        var container = bootstrapper.Build();

        var processInstallers = 
                  container.GetInstance<ServiceProcessInstaller>();
        var serviceInstaller = 
                  container.GetInstance<ServiceInstaller>();
        Installers.Add(processInstallers);
        Installers.Add(serviceInstaller);           
    }
} 
```

# assembly - JE 需要表达

> ID：16040420
> 
> 赞同：-1
> 
> 时间：2013-04-16T14:59:59.353
> 
> 标签：assembly, x86, x86-16

我是汇编语言的初学者，我一直陷入这个问题

汇编程序告诉我 JE 需要一个表达式，但它已经存在：

这是我的代码

```
ag:cmp Byte PTR [Di],"$"
   JE DONE:
     cmp Byte PTR [Si], "$"
     JE DONE: 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T15:06:17.267

问题在于“完成”之后的“：”。':' 之前的文本被视为标签，因此 JE 指令找不到目标标签。

在 DONE 之后删除 ':' 以解决问题。

# ruby - 使用 vagrant 和 chef-solo，我如何指定要运行的 ruby 版本？

> ID：16040421
> 
> 赞同：1
> 
> 时间：2013-04-16T15:00:02.167
> 
> 标签：ruby, ubuntu, chef-infra, vagrant, chef-solo

我正在使用 chef-solo 来配置一个新的 vagrant VM。这是 Ubuntu 12.10。Chef 第一次运行良好，但此后任何时候都无法启动。

问题是 chef-solo 需要使用 ruby​​ 1.9.3 运行，但我的一本食谱安装了 ruby​​ 2.0.0。它将新版本的 ruby​​ 链接到 /usr/local/ruby，因此系统版本仍然在 /usr/bin/ruby 中可用。

/usr/bin/chef-solo 中的 shebang 行是`#!/usr/bin/env ruby`.

有没有办法在 chef-solo 运行之前在 Vagrantfile 中设置环境变量？还是有另一种方法可以强制 vagrant 使用 /usr/bin/ruby 运行 chef-solo？

更新：我目前在 VM 上使用以下命令作为解决方法：

```
sudo /usr/bin/ruby /usr/bin/chef-solo --config /tmp/vagrant-chef-1/solo.rb --override-runlist "my_runlist" 
```

`vagrant provision`当我在主机上打字时，我想强制 Vagrant 运行类似的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-06T12:32:46.990

使用[vagrant Omnibus 插件](https://github.com/schisamo/vagrant-omnibus)，您可以安装具有自己嵌入式 Ruby 的 Chef Omnibus，以确保 Chef 运行始终使用相同的 Ruby 版本。

我发现的唯一问题是，如果您的食谱依赖于 ruby​​ 的系统版本，则某些设置将无法正常工作（例如，如果您在食谱中，`/usr/local/bin`则不会使用安装的 ruby​​，但是会安装）。`shell_out!``/usr/bin`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T15:23:18.377

`/usr/bin/env`通过使用 $PATH 来查找可执行文件。你应该确保它`/usr/bin/ruby`在你的路径的前面。确保这一点的一种方法是：

```
export PATH=/usr/bin:$PATH 
```

..然后尝试你的厨师独奏。

更多来自：[http ://en.wikipedia.org/wiki/Shebang_(Unix)#Portability](http://en.wikipedia.org/wiki/Shebang_(Unix)#Portability)

> 通常，程序 /usr/bin/env 可用于通过引入间接级别来规避此限制。#！后面是 /usr/bin/env，后面是没有完整路径的所需命令，如下例所示：
> 
> # !/usr/bin/env sh
> 
> 这主要是因为路径 /usr/bin/env 通常用于 env 实用程序，如果用户的路径配置正确，它会调用在用户的 $PATH 中找到的第一个 sh，通常是 /bin/sh。

# matlab - 在 MATLAB 中按行表示成员

> ID：16040423
> 
> 赞同：1
> 
> 时间：2013-04-16T15:00:02.827
> 
> 标签：matlab

我试图找出一种面向矩阵的方法来在 MATLAB 中逐行执行 ismember 函数。也就是说，如果我有矩阵

```
[1 2 3 4 5 6]
[7 8 9 10 11 12] 
```

我把

```
[3 4 5]
[10 11 12] 
```

进入一些 ismember-ish 函数，我希望它返回

```
[0 0 1 1 1 0]
[0 0 0 1 1 1] 
```

除了在 for 循环中遍历矩阵的每一行之外，有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T15:23:52.650

假设您的数据以矩阵形式提供，`A`并且`B`

```
A = [
    1 2 3 4 5 6
    7 8 9 10 11 12
    ];

B = [
    3 4 5
    10 11 12]; 
```

您可以将它们转换为单元格，然后使用`cellfun`

```
cellA = mat2cell(A, ones(1, size(A,1)), size(A,2));
cellB = mat2cell(B, ones(1, size(B,1)), size(B,2));

membership = cell2mat(cellfun(@ismember, cellA, cellB, 'UniformOutput',  false)); 
```

这返回

```
membership =

     0     0     1     1     1     0
     0     0     0     1     1     1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T15:07:01.307

```
A = [5 3 4 2]; B = [2 4 4 4 6 8];
[Lia1,Locb1] = ismember(A,B)

Lia1 =

 1     1     1     1     0     0

 Locb1 =

 4     3     3     3     0     0 
```

# javascript - 使用 google map api，我是否需要在删除叠加层之前删除侦听器

> ID：16040426
> 
> 赞同：0
> 
> 时间：2013-04-16T15:00:22.247
> 
> 标签：javascript, google-maps, events

当我删除谷歌地图的覆盖时，我是否需要清除其所有侦听器（出于内存目的）。例如

```
 var rectangle = new google.maps.Rectangle(options);
 rectangle.setMap(map);
 google.maps.events.addListener(rectangle,'click', mycallback);
 ......
 //delete
 //do I need to remove listener first?
 rectangle.setMap(null);
 rectangle=null; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T15:14:09.253

根据[这篇](https://stackoverflow.com/questions/6033821/do-i-need-to-remove-event-listeners)文章，是的。一些较旧的浏览器不处理垃圾收集，并且未能删除事件侦听器可能会导致内存泄漏。而且，如果您在删除对象之前删除了事件侦听器，可能发生的最坏情况是什么？

# python - Python 嵌套列表性能选择

> ID：16040428
> 
> 赞同：2
> 
> 时间：2013-04-16T15:00:28.763
> 
> 标签：python, list

我试图了解空间/时间/编程是否有优势将来自信号处理系统的数据存储为嵌套列表：

1.  `data[channel][sample]`
2.  `data[sample][channel]`

我可以对两者进行编码处理——我个人认为 1) 易于编写和索引 2)。但是，2) 更常见的是我的本地小组程序并存储数据（在 excel/csv 中或来自数据收集系统）。虽然很容易转置

```
dataA = map(list, zip(*dataB)) 
```

我想知道 1 比 2 是否存在任何存储或性能 - 甚至 - 模块兼容性问题？

1）我可以像这样循环

```
for R in dataA :
   for C in R :
       process_channel(C)

matplotlib.loglog(dataA[0], dataA[i]) 
```

时间或频率在哪里`dataA[0]`，我是要绘制的其他频道

2)

```
for R in dataB :
    for C in R
        process_sample(C)

matplotlib.loglog([j[0] for j in dataB],[k[i] for k in dataB]) 
```

这在编程风格上看起来更糟。也许我错过了一个让这更容易的列表方法？我还开发了用于使用 dicts 的代码……但这确实与一般用途不同。所以我不太倾向于继续使用字典。虽然 dict 存储是

```
dataC = list(['f':0.1,'chnl1':100.0],['f':0.2,'chnl1':110.0]) 
```

或一些这样的。似乎更好地集成选项2更好。但是，我想了解当您希望处理通道然后采样时，使用选项 2) 时如何更好地编码？只需先转置矩阵，然后在选项 1) 空间中进行工作并将结果转回：

```
dataA = smoothing(dataA, smooth_factor)

def smoothing(d, s) :
    td = numpy.transpose(d)
    td = map(list, zip(*d))
    nd=[]
    for row in td :
       col = []
       for i in xrange(0,len(row)-step,step) :
           col.append(sum(row[i:i+step]/step)
       nd.append(col)
    nd = numpy.transpose(nd)
    return nd 
```

虽然这种结构有效 - 一直来回转换看起来 - 嗯 - 效率低下。

# c# - 将单个页面从word文档复制到新文档c#

> ID：16040431
> 
> 赞同：1
> 
> 时间：2013-04-16T15:00:34.453
> 
> 标签：c#, ms-word

我有一份数百页的报告。我需要创建从这个文档中提取每个单独的页面到一个新文档中。我发现使用 INTEROP 可以做到这一点，但是我试图避免在服务器上安装 MS Office。我一直在使用 ASPOSE 进行大部分操作，但似乎不支持此功能。

有没有办法在不安装 MS Office 的情况下将文档的页面分成单独的文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-09T06:50:58.593

Aspose.Words 没有页面或行号等布局信息。它维护 DOM。但是我们已经编写了一些实用程序类来实现这种行为。他们将 word 文档分成多个部分，这样每一页就成为一个单独的部分。之后，很容易复制单个页面。

```
String sourceDoc = dataDir + "source.docx";
String destinationtDoc = dataDir + "destination.docx";

// Initialize the Document instance with source and destination documents
Document doc = new Document(sourceDoc);
Document dstDoc = new Document();

// Remove the blank default page from new document
dstDoc.RemoveAllChildren();
PageNumberFinder finder = new PageNumberFinder(doc);
// Split nodes across pages
finder.SplitNodesAcrossPages(true);
// Get separate page sections
ArrayList pageSections = finder.RetrieveAllNodesOnPages(1, 5, NodeType.Section);
foreach (Section section in pageSections)
    dstDoc.AppendChild(dstDoc.ImportNode(section, true));
dstDoc.LastSection.Body.LastParagraph.Remove();
dstDoc.Save(destinationtDoc); 
```

PageNumberFinder 类可以从[这里](https://www.dropbox.com/l/IsoXrbTtgsn5mZlU2L8hma)下载。

PS。我是 Aspose 的开发人员布道师。

# python - web.py：获取原始网络请求

> ID：16040435
> 
> 赞同：2
> 
> 时间：2013-04-16T15:00:46.983
> 
> 标签：python, http-headers, web.py

我需要访问浏览器发送到服务器的原始 http 请求`web.py`。

例如，这是当我浏览某个页面时 Chromium 发出的请求：

```
$ nc -l 8081
GET / HTTP/1.1
Host: 127.0.0.1:8081
Connection: keep-alive
Cache-Control: max-age=0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
User-Agent: Mozilla/5.0 (X11; Linux i686) AppleWebKit/537.22 (KHTML, like Gecko) Ubuntu Chromium/25.0.1364.160 Chrome/25.0.1364.160 Safari/537.22
Accept-Encoding: gzip,deflate,sdch
Accept-Language: it-IT,it;q=0.8,en-US;q=0.6,en;q=0.4
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3 
```

我试图从 中获取它[`web.ctx.env`](http://webpy.org/cookbook/ctx)，但那是一本字典（虽然我更喜欢原始的原始文本请求）并且它与其他一些数据混合在一起：

```
SERVER_SOFTWARE: CherryPy/3.2.0 Server
SCRIPT_NAME: 
ACTUAL_SERVER_PROTOCOL: HTTP/1.1
REQUEST_METHOD: GET
PATH_INFO: /
SERVER_PROTOCOL: HTTP/1.1
QUERY_STRING: 
HTTP_ACCEPT_CHARSET: ISO-8859-1,utf-8;q=0.7,*;q=0.3
HTTP_USER_AGENT: Mozilla/5.0 (X11; Linux i686) AppleWebKit/537.22 (KHTML, like Gecko) Ubuntu Chromium/25.0.1364.160 Chrome/25.0.1364.160 Safari/537.22
HTTP_CONNECTION: keep-alive
REMOTE_PORT: 55409
SERVER_NAME: localhost
REMOTE_ADDR: 127.0.0.1
wsgi.url_scheme: http
SERVER_PORT: 8081
wsgi.input: <web.wsgiserver.KnownLengthRFile object at 0x940b16c>
HTTP_HOST: 127.0.0.1:8081
wsgi.multithread: True
REQUEST_URI: /
HTTP_ACCEPT: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
wsgi.version: (1, 0)
wsgi.run_once: False
wsgi.errors: <open file '<stderr>', mode 'w' at 0xb73010d0>
wsgi.multiprocess: False
HTTP_ACCEPT_LANGUAGE: it-IT,it;q=0.8,en-US;q=0.6,en;q=0.4
HTTP_ACCEPT_ENCODING: gzip,deflate,sdch 
```

这是我用来获取上述输出的代码：

```
#!/usr/bin/env python

import web

urls = ('(.*)', 'urlhandler')

class urlhandler:
  def GET(self, url):
    txt = ""
    for k, v in web.ctx.env.items():
      txt += ": ".join([k, str(v)]) + "\n"
    return txt

if __name__ == '__main__':
  app = web.application(urls, globals())
  app.run() 
```

我应该从不需要的数据中清除这本字典，还是有一种直接的方法来获取原始请求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T09:53:48.910

按照安德烈的建议，我提出了这段代码。它尝试重建网络请求，也许这不是获取它的最佳方法，但这是我迄今为止发现的唯一方法。

该程序将显示所请求页面的 Web 请求（它适用于 POST 和 GET 请求）：

```
#!/usr/bin/env python

import web
from urllib import quote

urls = ('(.*)', 'urlhandler')

def adaptHeader(txt):
  """Input: string, header name as it is in web.ctx.env
  Output: string, header name according to http protocol.
  es: "HTTP_CACHE_CONTROL" => "Cache-Control"
  """
  txt = txt.replace('HTTP_', '')
  return '-'.join((t[0] + t[1:].lower() for t in txt.split('_')))

def rawRequest(env):
  """Reconstruct and return the web request based on web.ctx.env"""

  # url reconstruction
  # see http://www.python.org/dev/peps/pep-0333/#url-reconstruction
  url = env['wsgi.url_scheme']+'://' # http/https
  url += env.get('HTTP_HOST') or (env['SERVER_NAME']+':'+env['SERVER_PORT']) # host + port
  url += quote(env.get('SCRIPT_NAME', ''))
  url += quote(env.get('PATH_INFO', ''))
  url += ('?' + env['QUERY_STRING']) if env.get('QUERY_STRING') else '' # GET querystring

  # get/post request
  req = ' '.join((env['REQUEST_METHOD'], url, env['SERVER_PROTOCOL'])) + '\n'

  # headers
  for k, v in env.items():
    if k.startswith('HTTP') or k in ('CONTENT_TYPE', 'CONTENT_LENGTH'):
      req += adaptHeader(k) + ': ' + str(v) + '\n'

  # post data 
  try:
    req += '\n' + env['wsgi.input'].read(int(env['CONTENT_LENGTH']))
  except:
    pass

  return req

class urlhandler:
  def GET(self, url):
    return rawRequest(web.ctx.env)
  def POST(self, url):
    return rawRequest(web.ctx.env)

if __name__ == '__main__':
  app = web.application(urls, globals())
  app.run() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T18:04:29.657

查看您拥有的内容，您可以`web.ctx.env`按以“HTTP_”开头的键进行过滤。这比获取和解析原始请求标头要容易。

您可以在此处查看 wsgi 规范[http://www.python.org/dev/peps/pep-0333/#environ-variables](http://www.python.org/dev/peps/pep-0333/#environ-variables)

> HTTP_ 变量 对应于客户端提供的 HTTP 请求标头的变量（即名称以“HTTP_”开头的变量）。这些变量的存在与否应与请求中相应 HTTP 标头的存在或不存在相对应。

# c++ - 如何定义声明的函数 - 带有未命名模板参数的模板结构成员？

> ID：16040439
> 
> 赞同：1
> 
> 时间：2013-04-16T15:00:58.753
> 
> 标签：c++, templates

我有一个模板结构：

```
template<typename T2, class, typename, class T3 = vec1<T2> >
struct vec2
{
    template<typename D2, class, typename, class D3>
    void f14(int a);

    template<typename D2, class, typename, class D3>
    void f15(int a);
}; 
```

我想定义，例如函数 f15。我不知道，我应该在“？？”的地方写什么。我试图以不同的方式解决这个问题。但是编译器扼杀了我编译程序的梦想。

```
template<typename T2, class , typename , class T3>
template<typename D2, class , typename , class D3>
void vec2<T2,??,??,T3>::f15(int a) {  } 
```

我应该如何定义函数 f15？

这种结构“class, typename”的学名是什么？我搜索了很多（“未命名的模板参数”等），但我没有找到任何关于它的信息。我想，它类似于带有未命名参数的函数。我想读一些关于它的东西——来自 C++ 标准或其他来源，但我不知道必要的信息在哪里。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T15:04:03.900

您需要为定义命名参数。

```
template <typename T2, class X, typename Y, class T3>
template <typename D2, class X2, typename Y2, class D3>
void vec2<T2, X, Y, T3>::f15<D2, X2, Y2, D3>(int a) {  } 
```

`typename`通常，在参数列表中使用和`class`定义类型之间没有真正的区别。唯一的区别是，当您定义模板模板参数时，您必须使用`class`.

```
template <template <typename> class> struct A {};
//                            ^^^^^ class is required here 
```

此外，当您使用**依赖类型**（从模板参数派生的类型）时，您必须使用`typename`它来定义它。在[这个线程](https://stackoverflow.com/questions/610245/where-and-why-do-i-have-to-put-the-template-and-typename-keywords)中解释得很好。

# android - 根据用户请求更新应用程序 - android

> ID：16040442
> 
> 赞同：0
> 
> 时间：2013-04-16T15:01:02.120
> 
> 标签：android, updates

是否可以不将更新推送到所有设备，而仅在应用程序中达到某个点时由设备请求？（理想情况下使用 Google play，但不一定）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T15:14:42.790

我不确定谷歌播放。但是你可以考虑一下。

到达特定点后，检查您的服务器是否有更新。如果有任何新更新，请下载更新的 apk 文件。然后你就可以安装新的apk了。

要安装 apk，您可以看到这个答案

[链接1](https://stackoverflow.com/a/4969421/931982)，[链接2](https://stackoverflow.com/a/4604922/931982)

# c# - Using WCF Service to access SQL Server in Entity Framework -- Why does it seem like it's using Integrated Security?

> ID：16040448
> 
> 赞同：1
> 
> 时间：2013-04-16T15:01:15.103
> 
> 标签：c#, asp.net, iis, connection-string, service-reference

**Quick Background**
I received code from a third party (contracted software) that I have to move onto my servers. When I run the code using their connections and service references, everything works well. When I debug locally, everything works well. My problem only occurs when I try to run the application/service(s) after I move them onto my server.

The services (or their respective references) are at the heart of what's causing the issues. I created a test client to try to debug the services, and it's accessing the service, but erroring when it tries to connect to the SQL Server inside the service. The code appears to use the Entity Framework which I am admittedly not familiar with yet.

**Errors/Issues**
When I use my test client to call a function inside the service reference, it errors out when it tries to connect to my SQL database:

```
using (ApplicationDefinitionDBEntities appDefDb = new ApplicationDefinitionDBEntities()) //ERROR 
```

Here's the error I receive (domain and server names have been made generic):

> System.Data.SqlClient.SqlException (0x80131904): Login failed for user 'MYDOMAIN\APPSERVERNAME$'.

I found the `app.config` that is referenced by the `.edmx` file (`ApplicationDefinitionDB.edmx`) and its accompanying files. Here is the connection string (made generic):

```
<add name="ApplicationDefinitionDBEntities"
     connectionString="metadata=res://*/Data.ApplicationDefinitionDB.csdl|res://*/Data.ApplicationDefinitionDB.ssdl|res://*/Data.ApplicationDefinitionDB.msl;
     provider=System.Data.SqlClient;
     provider connection string=&quot;data source=MYDBSERVERNAME;initial catalog=myDBcatalog;
     User ID=myUserID;Password=myPassword;integrated security=false;
     multipleactiveresultsets=True;App=EntityFramework&quot;"
     providerName="System.Data.EntityClient" /> 
```

There is also an old connection string that the third party used which had integrated security set to true and reference `SQLExpress`, but I commented it out.

Note that I am specifying integrated security to be false (I know it's by default but I wanted to be explicit), and also supplying a username and password to the SQL Server. So why is the error message in the service ref test client saying that it's trying to connect using `DOMAIN\APPSERVER$` as though it's using integrated security?

I am using IIS to host my app and SQL Server for database work. I think I have updated and re-generated all Entity Framework stuff for the database reference, but I could be missing something. Can anyone suggest anything that I may be missing to make sure the service reference uses the connection string supplied in it, and NOT the app server domain login? Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T19:22:25.957

Turns out that connection string conflicted with one above the project level of the service. The project that housed the service uses Silverlight, so I thought the `ClientConfig` files were the only other configs being used, but there was another one hiding in the project that I published. When I rooted around in that `web.config` file, I found that there was a connection string with `Integrated Security` turned on. Once I turned that off it worked fine. That's annoying.

# php - 按开始和结束日期从 MySQL 表中提取事件，保留当前活动的事件

> ID：16040452
> 
> 赞同：2
> 
> 时间：2013-04-16T15:01:26.610
> 
> 标签：php, mysql, date

我有一个包含事件数据的 MySQL 表。重要的列是 from_date 和 to_date。两者都包含纪元时间戳来表示事件何时开始和结束。

我使用以下方法查询表以提取指定日期范围内的事件：

```
from_date >= $from_date AND to_date <= $to_date 
```

这一切都很好，但我现在的问题是未选择在 from_date 之前开始但与 to_date 规则匹配的事件，即事件在 from_date 之前开始但仍处于活动状态......对于匹配 from_date 的事件也是如此规则但通过 to_date。我还需要在结果中看到“活动”事件。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T15:11:54.950

如果我们搜索在 $to_date 之前开始并在 $from_date 之后结束的所有事件，它应该会提取您要查找的内容。

`from_date <= $to_date AND to_date >= $from_date`

如果您的 $from 和 $to 是：10:00 和 11:00。然后这个查询会给你：

*   9:00 9:50（没有，因为 9:50 < 10）
*   9:00 10:10（是）
*   10:20 10:30（是）
*   10:50 11:10（是）
*   11:20 12:00（没有，因为 11:20 > 11:00）
*   **9:00 12:00（是的，因为 9 < 11 和 12 > 10）**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T15:03:52.177

将您的支票更改为：

```
`from_data` BETWEEN $from AND $to OR `to_date` BETWEEN $from AND $to 
```

`$from`用英语：事件在和之间开始或结束`$to`。

如果你的`$from`和`$to`是：`10:00`和`11:00`。然后这个查询会给你：

```
9:00 9:50 (no)
9:00 12:00 (yes)
9:00 10:10 (yes)
10:20 10:30 (yes)
10:50 11:10 (yes)
11:20 12:00 (no) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T15:03:38.343

我假设你以某种方式跟踪活动事件，也许你可以试试这个：

```
 (from_date >= $from_date AND to_date <= $to_date) OR active = 1 
```

**这是一个想法，而不是复制/粘贴代码**

# libgit2 - libgit2 如何提交所有文件 added_by_path

> ID：16040460
> 
> 赞同：2
> 
> 时间：2013-04-16T15:01:45.673
> 
> 标签：libgit2

我想模仿这种行为`libgit`：

```
create files: touch {1..100}
git add .
git commit -a -e 
```

对于我创建的每个文件，我执行以下操作：

```
do {
    git_index_read()
    git_index_add_bypath()
    git_index_write()
    git_commit_create() <--want this to be delayed after all files are created.
} while (0) 
```

上述操作，文件被添加并显示在 git log 输出中。

我想达到的目标：

```
do {
    git_index_read()
    git_index_add_bypath()
    git_index_write()

} while (0)
git_commit_create() <--want this to be delayed after all files are created. 
```

如果我将 git_commit_create 延迟到所有创建结束，则不会在提交中添加任何文件。但`git status -s`确实显示了这些暂存文件。

# c# - 通过数据库数据动态更改 asp:label 的文本

> ID：16040466
> 
> 赞同：0
> 
> 时间：2013-04-16T15:02:07.067
> 
> 标签：c#, asp.net, ado.net

我在一个数据库中有一个像这样的表：

| 身份证 | 鳕鱼语言| 利贝尔 |

| 52 | 法语 | 卓悦 |

| 52 | 中文 | 你好 |

| 53 | 法语 | 欧 |

| 53 | 中文 | 是 |

我在 .aspx 文件中有两个。

我设法使用 ADO.net 查询数据库，但我希望用我在数据库中获得的数据替换标签中的属性“文本”。

事实上，我有很多标签，但我认为带有两个标签的小样本就足够了。

请问你有什么想法吗？

编辑：如何在 C# 中制作关联表？使用哈希表？但是使用哈希表，我如何通过密钥获取我的数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T15:14:40.947

鉴于您已经拥有上面的表格和来自数据库的数据，并使用您提到的控件创建了一个表单，这应该相当简单。但是，如果这只是一个问是否**可能**的问题，那么答案就是肯定的。

如果您不知道如何继续显示一些代码。

对于上面的示例，您的字典看起来像这样

```
Dictionary<string, string> myDictionary = new Dictionary<string, string>();
myDictionary.Add("FR", "Bonjour");
someLabel.Text = myDictionary["FR"]; 
```

someLabel 现在将显示“Bonjour”

# python - 在 lua 中搜索包含某个字符串的键

> ID：16040469
> 
> 赞同：0
> 
> 时间：2013-04-16T15:02:15.763
> 
> 标签：python, lua, lua-table

我有多个 lua 文件，其中包含我想通过 Python 提取的信息。要在 Python 中使用 Lua，我使用的是[lunatic-python](https://github.com/bastibe/lunatic-python)，但这不是必需的 - 如果您有其他方法也可以。

lua 文件如下所示：

```
source = {
    licences = {
        "GPL",
        "MIT",
    },
    env = {
        MYTOOL_VERSION = "1.2.3",
        OTHER_KEY = "OTHER_VALUE",
    },
    some_other_keys = {
        ...
    },
} 
```

我感兴趣的价值是`source.env.MYTOOL_VERSION`, while`MYTOOL`总是不同的东西。由于我没有 lua 经验，我不知道如何告诉它“获取包含字符串的键的值`VERSION`”。我阅读了一些关于`tables`Lua 中概念的教程（这对我来说仍然有点奇怪），我猜这些功能`next`或者`pairs`可能对我的情况有用。虽然这些函数仍然让我感到困惑，但在示例中我发现它们总是在循环中使用，但是当我做这样的事情时：

```
x = next(source.env) 
```

代替

```
k, v = next(source.env) 
```

似乎`x`现在只包含键，而不是值。当使用`pairs`代替时`next`，我得到一个函数，但我不知道如何调用它。

我的 Pythonscript 目前看起来像这样：

```
import lua

with open(project_path) as f:
    script = f.read()

lua.execute(script)

i = 1

licences = []

while True:
    data = lua.globals().source.licences[i]
    if data is None:
        break
    licences.append(data)
    i += 1

version = lua.eval('source.env[next(source.env)]') if lua.globals().source.env is not None else 'unkown', 
```

它只是获取表中*任何*键的值`env`，不一定是包含`VERSION`.

那么，获取此文件所需数据以与 Python 一起使用的优雅解决方案是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T15:25:32.137

如果你执行这个脚本

```
function version(t)
    for k,v in pairs(t) do
        if k:match"._VERSION$" then return v end
    end
end 
```

然后 eval `version(source.env)`，我希望它为您返回 1.2.3

# .net - 尚未为数据源 dsMyData 提供数据源实例。窗体

> ID：16040473
> 
> 赞同：0
> 
> 时间：2013-04-16T15:02:33.973
> 
> 标签：.net, winforms, report

我试图弄清楚如何在我的 c# 代码后面提供数据源。我正在尝试使用一个组合框来列出我的所有报告，并使用一个报告查看器作为这些报告的主要容器。这是我的代码：

```
 private void BaseForm_Load(object sender, EventArgs e)
    {
        // TODO: This line of code loads data into the 'bgdataDataSet.FoodTable' table. You can move, or remove it, as needed.
        this.FoodTableTableAdapter.Fill(this.bgdataDataSet.FoodTable);
        BindingList<Data> _comboItems = new BindingList<Data>();
        _comboItems.Add(new Data { Name = "Select", RptValue = "Select" });
        _comboItems.Add(new Data { Name = "All Food Values", RptValue = "AllFoodValues.rdlc" });
        _comboItems.Add(new Data { Name = "All Readings", RptValue = "AllReadings.rdlc" });
        _comboItems.Add(new Data { Name = "Avg Food Values by Date", RptValue = "AvgFoodValuesByDate.rdlc" });
        _comboItems.Add(new Data { Name = "Avg Food Values by Meal", RptValue = "AvgFoodValuesByMeal.rdlc" });
        _comboItems.Add(new Data { Name = "Avg Readings by Date", RptValue = "AvgReadingsByDate.rdlc" });
        _comboItems.Add(new Data { Name = "Avg Readings by Time", RptValue = "AvgReadingsByTime.rdlc" }); 
        _comboItems.Add(new Data { Name = "Avg Readings by Event", RptValue = "AvgReadingsByEvent.rdlc" }); 
        _comboItems.Add(new Data { Name = "Blood Pressure Chart", RptValue = "BPChart.rdlc" });
        _comboItems.Add(new Data { Name = "Blood Pressure Report", RptValue = "BPReport.rdlc" });
        _comboItems.Add(new Data { Name = "Detailed Food Values by Meal", RptValue = "DetailFoodValuesByMeal.rdlc" });
        _comboItems.Add(new Data { Name = "Doctor Detailed Report", RptValue = "DoctorDetailedReport.rdlc" });
        _comboItems.Add(new Data { Name = "Food Chart", RptValue = "FoodChart.rdlc" });
        _comboItems.Add(new Data { Name = "Pumper Detail Report", RptValue = "PumperDetailReport.rdlc" });
        _comboItems.Add(new Data { Name = "Reading Charts", RptValue = "ReadingCharts.rdlc" });
        _comboItems.Add(new Data { Name = "Total Daily Food Intake", RptValue = "TotalIntakeDailyFood.rdlc" });
        comboBox1.DataSource = _comboItems;
        comboBox1.DisplayMember = "Name";
        comboBox1.ValueMember = "RptValue";
        comboBox1.SelectedValue = "Select";
        this.rvDoctorReportViewer.RefreshReport();
    }

    private void comboBox1_SelectedIndexChanged(object sender, EventArgs e)
    {
        if (comboBox1.SelectedIndex > 0)
        {
            string strReport;
            strReport = "ReportViewer." + comboBox1.SelectedValue.ToString();
            rvDoctorReportViewer.Reset();
            rvDoctorReportViewer.LocalReport.ReportPath = "Reports/" + comboBox1.SelectedValue.ToString() + "";
            rvDoctorReportViewer.LocalReport.ReportEmbeddedResource = strReport;
            rvDoctorReportViewer.RefreshReport();

        } 
```

我正在考虑代码块中的某个地方 private void comboBox1 我可以指定这个，但我不确定如何。任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-20T17:39:59.697

以为我会发布我对这个问题的解决方案。我在数据库中添加了一个表用于报告配置。这样我以后可以添加或删除报告。它包含报表名称、报表友好名称、报表路径和数据集等列，因此我可以简单地使用字段中的值来避免此问题。

# actionscript-3 - Windows 8，在 Flash 应用程序中显示相机的问题

> ID：16040478
> 
> 赞同：0
> 
> 时间：2013-04-16T15:02:47.783
> 
> 标签：actionscript-3, flash, windows-8, firewire

我有一个 Flash 应用程序，可以在屏幕上显示操作系统检测到的摄像头，并且在 Windows 7 上运行良好，但现在，在 Windows 8 中，我遇到了多个摄像头的问题。例如火线相机或屏幕捕获驱动程序。

我做了一个简单的测试应用程序：

[测试](http://mainstream.atnova.com/test/testCamaras.html)

像空中应用程序一样执行的相同代码似乎可以工作，并且在 Windows 7 中运行的相同网页可以正确显示所有摄像头。

Windows 8 的 Flash 播放器有任何错误吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T06:42:16.107

您是否使用各种浏览器进行测试？，我认为问题在于检查硬件或驱动程序执行的权限

# android - 获取有关 Google Play 上应用程序的信息

> ID：16040480
> 
> 赞同：0
> 
> 时间：2013-04-16T15:02:50.057
> 
> 标签：android, google-play, rating, review

如果我有它的 ID，那么在 Google Play 上获得应用评级和用户评论的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T15:53:37.013

由于没有官方API，这里是快速而肮脏的方式：

使用 HttpClient 获取请求的页面，即“ [https://play.google.com/store/apps/details?id=com.poncho.yapm](https://play.google.com/store/apps/details?id=com.poncho.yapm) ”。

查看页面源代码并了解如何解析页面并从响应中获取所需内容。例如，对于评级：

1.  搜索第一个“关于此应用程序”。
2.  从上一个结果开始，搜索第一个“ratingValue”
3.  从上一个结果开始，搜索第一个 'content="'
4.  从上一个结果开始，搜索'"'。
5.  评级位于最后两个位置之间。

主要缺点：如果 Google 更改页面布局，您将需要更改您的实现。但是，当您使用正式 API 时，这也经常发生。

如果这是一个真实的应用程序，那么运行验证代码的每日测试将节省您的时间和客户。

希望这会有所帮助，亚龙

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T15:07:25.350

在 Android 中，你真的没有任何办法。

但是，有一些库可以为您提供一些选项来检查来自 Google Play 的信息。不确定它们是否真的从它实际上是市场的时候开始更新，以及从那时起是否进行了任何重大更改。

你可以试试这些；

[https://code.google.com/p/android-market-api/](https://code.google.com/p/android-market-api/)

[https://code.google.com/p/android-query/wiki/Service](https://code.google.com/p/android-query/wiki/Service)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T15:20:52.933

[Google Play 商店中有一个名为](https://play.google.com/store/apps/details?id=com.github.andlyticsproject)***Andlytics***的开源应用程序。它更新得足够频繁，但大多数情况下都可以适应可能对 Google Play 商店后端进行的任何更改。

我不确定是否可以对其进行编码以引入特定应用程序的详细信息。目前，它的工作原理是，用户必须使用有效的开发者帐户登录。然后授权它访问您的 Google 帐户。一旦完成，它就会获取开发人员帐户上的所有应用程序。不是特定的帐户。

但是，我*认为*（我认为因为我从未有机会实际使用源代码）可以修改以适应您的特定要求。

您可以在[此处获取完整的源代码](https://github.com/AndlyticsProject/andlytics)。

您也可以尝试*Stefan*帖子中提到的链接。虽然粗略的看了一下，表明它在 2012 年第一季度之后没有更新。但如果你能加快代码的速度，那也可以工作。

*由于我将链接到 Google Play 上的应用程序及其源代码，为了清楚起见，我与 Andlytics、项目或应用程序无关。*

# css - 只有一个媒体查询在工作，其余的被忽略

> ID：16040488
> 
> 赞同：0
> 
> 时间：2013-04-16T15:03:16.163
> 
> 标签：css, mobile, responsive-design, media-queries

好的，所以我在设计中的不同断点处有几个媒体查询。

例如

```
 @media all and (max-width:700px){
      body{
        background:red;
      }
 }
 @media all and(max-width:560px){
      body{
        background:blue;
      }
 } 
```

它在我的桌面上运行良好，但是当我在我的 LG 安卓浏览器上查看它时，只有第一个媒体查询触发。

它与宽度没有任何关系，因为如果我将第一个查询的最大宽度更改为小于 560 的值，它无论如何都会被触发。

对此有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T15:20:50.227

删除“所有和”：http: [//jsfiddle.net/C3R9J/](http://jsfiddle.net/C3R9J/)

```
 @media (max-width:700px){
      body{
        background:red;
      }
 }

 @media (max-width:560px){
      body{
        background:blue;
      }
 } 
```

看看示例 5 这个链接到 WC3： [http ://www.w3.org/TR/css3-mediaqueries/](http://www.w3.org/TR/css3-mediaqueries/)

> 如果未明确给出媒体类型，则为“全部”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T16:53:53.337

您可以尝试使用最小宽度。它的作用：设备宽度从 320px 到 559px，设备宽度从 560px 到 699px，设备宽度从 700px 到 XXX。最新的媒体类型将覆盖所有其他媒体类型。

```
@media only screen and (min-width: 320px) {
    body { background:red; }
}

@media only screen and (min-width: 560px) {
    body { background:blue; }
}

@media only screen and (min-width: 700px) {
    body { background:green; }
} 
```

# sql - SQL Server 中的性能

> ID：16040490
> 
> 赞同：0
> 
> 时间：2013-04-16T15:03:30.693
> 
> 标签：sql, performance, sql-server-2008

我在对 mssql 2008 数据库运行查询的程序中遇到问题。我在查询分析器中做了一些研究。以下两个查询存在一个奇怪的问题：

```
SELECT  BOLD_ID ,
        BOLD_TYPE
FROM    ZusatzKlasseBase
WHERE   ( bold_id IN ( SELECT   usereintrag
                       FROM     zusatzfeld
                       WHERE    metazusatzfeld = 5211309
                                AND wertobject = 1298369 )
          AND bold_id IN ( SELECT   usereintrag
                           FROM     zusatzfeld
                           WHERE    metazusatzfeld = 5207783
                                    AND wertdatum = '20130415' )
        ) 
```

此查询的运行时间约为一秒

```
SELECT  BOLD_ID ,
        BOLD_TYPE
FROM    ZusatzKlasseBase
WHERE   ( BOLD_TYPE IN ( 336 ) )
        AND ( bold_id IN ( SELECT   usereintrag
                           FROM     zusatzfeld
                           WHERE    metazusatzfeld = 5211309
                                    AND wertobject = 1298369 )
              AND bold_id IN ( SELECT   usereintrag
                               FROM     zusatzfeld
                               WHERE    metazusatzfeld = 5207783
                                        AND wertdatum = '20130415' )
            ) 
```

此查询的运行时间为一分钟。

我对此没有任何解释，字段 BOLD_TYPE 已编入索引。谁能猜出为什么更具体的查询更慢？

提前感谢所有答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T15:22:45.210

我会将上的索引`bold_id`（我假设上的索引`bold_id`）更改为：

```
CREATE INDEX whatever ON dbo.ZusatzKlasseBase(bold_id, bold_type)
  WITH (DROP_EXISTING = ON); 
```

然后我会稍微重写查询：

```
SELECT  BOLD_ID,
        BOLD_TYPE
FROM dbo.ZusatzKlasseBase AS b -- always use schema prefix
WHERE
    ( BOLD_TYPE IN ( 336 ) )
    AND EXISTS 
    (
      SELECT 1 FROM dbo.zusatzfeld
      WHERE    metazusatzfeld = 5211309
               AND wertobject = 1298369 
               AND usereintrag = b.bold_id
    )
    AND EXISTS
    ( 
       SELECT 1 FROM dbo.zusatzfeld
       WHERE    metazusatzfeld = 5207783
                AND wertdatum = '20130415' 
                AND usereintrag = b.bold_id
    ); 
```

# iphone - 如何在 iOS 模拟器或设备上测试 IAP（应用内购买）？

> ID：16040491
> 
> 赞同：30
> 
> 时间：2013-04-16T15:03:30.867
> 
> 标签：iphone, ios, ipad, in-app-purchase

我按照 Ray Wenderlich 教程书实现了一个简单的非消耗性应用内购买机制。

当我的应用程序启动时，我会发起一个产品信息请求：

```
self.productsRequest = [[SKProductsRequest alloc] initWithProductIdentifiers:productIdentifiers];
_productsRequest.delegate = self;
[_productsRequest start]; 
```

SKProductRequest 被创建。它有一个内存地址，但没有其他任何事情发生。没有一个委托方法被调用：

```
- (void)productsRequest:(SKProductsRequest *)request didReceiveResponse:(SKProductsResponse *)response {
    NSLog(@"Product info received...");
    NSArray *products = response.products;
    for (SKProduct *product in products) {
        NSLog(@"ID: %@, title:%@, (%f)", product.productIdentifier, product.localizedTitle, product.price.floatValue);
    }

    self.productsRequest = nil;
}

- (void)request:(SKRequest *)request didFailWithError:(NSError *)error {
    NSLog(@"Failed to load list of products");
    self.productsRequest = nil;
} 
```

我检查了两次：

*   在 iTunes Connect 中完全设置应用程序。
*   ITC 中的应用程序状态为“准备上传”
*   添加了一项非消耗性 IAP。
*   ITC 中 IAP 产品的状态为“准备提交”
*   应用程序和 plist 中的应用程序 ID 都是 com.mycompany.myapp。检查了两次。
*   IAP 使用 com.mycompany.myapp.productname（对请求使用完全相同的 ID）。
*   在 ITC 中创建了一个测试用户帐户。
*   尚未向 Apple 提交任何内容。
*   我的 Mac 可以访问互联网。
*   控制台或屏幕上没有其他消息。

Ray Wenderlich 的书没有提到除此之外我必须做任何其他事情。

只有*一次*我看到 -didFailWithError: 在设备上调用我的委托，但它再也没有出现。我的代表不会在设备或模拟器上都被调用。我让它运行了几分钟，根本没有任何反应。

iTunes Connect 给出了这个令人困惑的警告：

> 您的第一个应用内购买必须与新的应用版本一起提交。从版本详细信息页面的应用内购买部分选择它们，然后单击准备上传二进制文件。

在能够测试应用内购买之前是否需要这样做？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-10-01T21:22:59.660

In the current version of Xcode 5.0 (5A1413), In-App purchases will not work in the iOS simulator.

> StoreKit (In-App purchases) will not work in the Simulator. 13962338

Source: Xcode 5.0 Release Notes > Known issues > iOS Simulator [https://developer.apple.com/library/ios/releasenotes/DeveloperTools/RN-Xcode/xc5_release_notes/xc5_release_notes.html#//apple_ref/doc/uid/TP40001051-CH2-SW303](https://developer.apple.com/library/ios/releasenotes/DeveloperTools/RN-Xcode/xc5_release_notes/xc5_release_notes.html#//apple_ref/doc/uid/TP40001051-CH2-SW303)

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-04-16T15:33:09.467

在 iOS 模拟器文档中是这样写的：

> API 限制
> 
> 在 iOS Simulator 中，API 和功能存在一些限制，包括：
> 
> ```
> Apple Push Services
> Privacy alerts for access to Photos, Contacts, Calendar, and Reminders
> The UIBackgroundModes key
> iCloud document syncing and key-value storage support 
> ```
> 
> 不支持的框架包括：
> 
> ```
> External Accessory
> Media Player
> Message UI 
> Event Kit
> In UIKit, the UIVideoEditorController class
> Store Kit 
> ```

由于应用内购买需要 Store Kit 才能工作，并且模拟器不支持 Store Kit 框架，因此您无法在 iOS 模拟器中测试 IAP。

更多信息：[iOS 模拟器文档](http://developer.apple.com/library/ios/#documentation/IDEs/Conceptual/iOS_Simulator_Guide/TestingontheiOSSimulator/TestingontheiOSSimulator.html#//apple_ref/doc/uid/TP40012848-CH4-SW1)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-04-16T15:11:37.930

不幸的是，有几件事您无法在模拟器上进行测试。In App Purchases 属于该列表。

所以你不能在模拟器中测试 In App Purchases，你需要一个 iOS 设备。

**编辑：**据我所知，当您尝试在模拟器上测试 IAP 时会发生这种情况，不会调用购买代表。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-12-28T01:14:43.610

2020 年更新：**您现在可以在 Xcode 中测试应用内购买**

重要通知：

> 在 iOS、watchOS 或 tvOS 应用程序中测试 StoreKit 需要在 macOS 10.15 或更高版本上运行的 Xcode 12 或更高版本。在 macOS 应用程序中测试 StoreKit 需要在 macOS 11 或更高版本上运行 Xcode 12 或更高版本。

苹果[教程在这里](https://developer.apple.com/documentation/storekit/in-app_purchase/testing_in-app_purchases_in_xcode)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-10-05T20:02:00.907

您可以从 Apple 文档中测试 Xcode 12 中的应用内购买

[https://developer.apple.com/documentation/storekit/in-app_purchase/testing_in-app_purchases_in_xcode?language=objc](https://developer.apple.com/documentation/storekit/in-app_purchase/testing_in-app_purchases_in_xcode?language=objc)

和定制手册

[https://www.appcoda.com/storekit-testing/](https://www.appcoda.com/storekit-testing/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-16T15:30:48.113

我想出了一些东西：

我在 AppDelegate 的 -didFinishLaunching... 结束时*立即启动了 SKProductRequest，但它从未奏效。*

然后我打了一个延迟电话，等了 3 秒。从那时起，它开始工作。因此，您不能在应用启动后立即发出 StoreKit 请求。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-03-07T08:48:14.830

您的 skProductRequest 对象在哪里声明？尝试 skProductRequest 的全局声明。

# python - 保存一组自定义表单 django

> ID：16040493
> 
> 赞同：4
> 
> 时间：2013-04-16T15:03:34.447
> 
> 标签：python, django, django-models, formsets

我正在尝试在 django 中保存一个表单集。为此，我有我的模型和自定义表格。然后我以这种方式创建我的表单集：

```
QuoteFormSet = formset_factory(QuoteForm, extra=2)
formset = QuoteFormset(request.POST) 
```

但是当我做 formset.save() 我得到`AttributeError: 'QuoteFormFormSet' object has no attribute 'save'`

我的模型：

```
class Quote(models.Model):
    country = models.CharField(max_length=2,)
    street = models.CharField(max_length=100,) 
```

我的表格：

```
class QuoteForm(forms.ModelForm):
    class Meta:
        model = Quote
    country = forms.ChoiceField(choices=COUNTRIES, required=False)
    street = forms.CharField(max_length=100, required=False) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-17T08:09:56.603

好的，我不得不使用`modelformset`而不是`formset`

```
from django.forms.models import modelformset_factory

def new_quote(request):
    QuoteFormSet = modelformset_factory(Quote, form=QuoteForm, extra=2)
    if request.method == 'POST':
        formset = QuoteFormSet(request.POST, request.FILES)
        if formset.is_valid():
            formset.save()
            #
            return HttpResponseRedirect('/')
    else:
        formset = QuoteFormSet()

    return render(request, 'request_quote_form.html', {
    'formset': formset,
    }) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T15:11:21.127

您没有实例化表单集。

```
formset = QuoteFormset(request.POST) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-16T14:36:30.193

Formset 没有属性作为保存。因此，请尝试将表单对象一一保存在表单集中。它会起作用的。

```
if formset.is_valid():
    formset = QuoteFormset(request.POST) 
    for form in formset:
       form.save() 
```

# r - 更重要的数字

> ID：16040496
> 
> 赞同：2
> 
> 时间：2013-04-16T15:03:46.120
> 
> 标签：r, significant-digits

如何在 R 中获得更多有效数字？具体来说，我有以下示例：

```
> dpois(50, lambda= 5)
  [1] 1.967673e-32 
```

但是，当我得到 p 值时：

```
> 1-ppois(50, lambda= 5)
  [1] 0 
```

显然，p 值不是 0。实际上它应该大于 1.967673e-32，因为我正在对一堆概率求和。如何获得额外的精度？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-16T15:33:01.983

使用`lower.tail=FALSE`：

```
ppois(50, lambda= 5, lower.tail=FALSE)
## [1] 2.133862e-33 
```

要求 R 计算上尾比计算下尾并从 1 中减去它要准确得多：鉴于浮点精度的固有限制，对于小于`eps`的值，R 无法区分 (1- ) 和 1 ，通常约为10^{-16}（见）。`eps``.Machine$double.neg.eps``?.Machine`

这个问题在`?ppois`:

> 当默认值“lower.tail = TRUE”返回 1 时，设置“lower.tail = FALSE”可以获得更精确的结果，请参见下面的示例。

另请注意，您对需要大于的值的评论`dpois(50, lambda=5)`并不完全正确；`ppois(x,...,lower.tail=FALSE)`给出随机变量*大于* `x`的概率，正如您可以看到（例如）通过看到`ppois(0,...,lower.tail=FALSE)`不完全是 1，或者：

```
dpois(50,lambda=5) + ppois(50,lambda=5,lower.tail=FALSE)
## [1] 2.181059e-32
ppois(49,lambda=5,lower.tail=FALSE)
## [1] 2.181059e-32 
```

# linux - Shell 脚本分词器

> ID：16040499
> 
> 赞同：1
> 
> 时间：2013-04-16T15:03:51.387
> 
> 标签：linux, bash, shell, unix

我正在编写一个脚本来查询我的 JBoss 服务器以获取一些与数据库相关的数据。查询后返回的内容如下所示：

```
ConnectionCount=7
ConnectionCreatedCount=98
MaxConnectionsInUseCount=10
ConnectionDestroyedCount=91
AvailableConnectionCount=10
InUseConnectionCount=0
MaxSize=10 
```

我想标记这些数据，以便将右侧的数字存储在格式的变量中`7,98,10,91,10,0,10`。我尝试使用`IFS`等号，但仍然保留参数名称（仅删除等号）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T15:07:48.433

我将您的输入数据放入文件`d.txt`中。下面的单行代码提取数字，用逗号分隔它们并将所有这些分配给变量`TAB`（用 Korn shell 测试）：

```
$ TAB=$(awk -F= '{print $2}' d.txt | xargs echo | sed 's/ /,/g')
$ echo $TAB
7,98,10,91,10,0,10 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T15:19:25.887

或者只使用 cut/tr：

```
 F=($(cut -d'=' -f2 input | tr '\n' ' ')) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T16:52:08.743

`cut`一个没有任何管道的简单：

```
arr=( $(cut -d'=' -f2 file) ) 
```

## 输出

```
printf '%s\n' "${arr[@]}"
7
98
10
91
10
0
10 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T15:23:02.673

您也可以使用一个 sed 命令来完成：

```
sed -n 's/^.*=\(.*\)/\1,/;H;${g;s/\n//g;s/,$//;p;}' file
7,98,10,91,10,0,10 
```

# ios - PNG文件重命名后不显示在IOS设备上

> ID：16040502
> 
> 赞同：2
> 
> 时间：2013-04-16T15:03:59.617
> 
> 标签：ios, uiimage, png

我有以大写字母开头的图像，我需要在 bundle 上手动更改图像的第一个字母，之后该设备无法显示`SOME`图像，而显示某些图像时不会显示图像。

如： `C_120x120@2x.png` 到 `c_120x120@2x.png`

我得到一系列字母

```
legend (
    g
) 
```

并显示它们

```
if ([testArray count]==1) {
            NSString *legendName=[NSString stringWithFormat:@"%@_120x120@2x.png",[testArray objectAtIndex:0]];
            UIImage *trackImage = [UIImage imageNamed:legendName];
            cell.imageView.image= trackImage;
            } 
```

NSLOG：

```
track image string g_120x120@2x.png
track image (null) 
```

在捆绑包中：

![在此处输入图像描述](https://i.stack.imgur.com/sKruH.png)

在 finder 项目文件夹中：

![在此处输入图像描述](https://i.stack.imgur.com/vigw7.png)

我尝试了什么：

```
1) checked the case like above it looks like file names are correct;
2) deleted the images, changed the names before I add them to project.
3) delete the app on device , reinstalled it.
4) changed setting "Compress PNG Files" to NO 
```

在完成上述所有操作后，如果我调用`C_120x120@2x.png`图像，它会显示`c_120x120@2x.png`而不显示。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T15:27:27.083

尝试清理您的项目 - `Shift + Apple + K`.

尝试删除`@2x`和文件扩展名`.png`：

```
NSString *legendName=[NSString stringWithFormat:@"%@_120x120",[testArray objectAtIndex:0]]; 
```

它将根据正在使用的设备检测是否使用@2x。

还要确保它们已添加到您的捆绑包中。单击图像，然后在检查器中查看“目标成员”下的内容。确保检查了适当的目标。（有关屏幕截图，请参阅[https://stackoverflow.com/a/10998746/1710611 ）](https://stackoverflow.com/a/10998746/1710611)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T15:31:38.493

确保图像位于“复制捆绑资源”部分，可以在项目设置中找到，选择目标，然后在“构建阶段”下

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T15:48:33.063

其中一个 PNG 是 JPG，您只需将 .jpg 扩展名更改为 .png

祝你好运

# logging - Mercurial Log：如何显示重命名？

> ID：16040503
> 
> 赞同：0
> 
> 时间：2013-04-16T15:03:59.780
> 
> 标签：logging, mercurial, rename

`hg log`当为存储库根调用时（即不是为特定文件），我想查看有关命令重命名文件的信息。是否有任何选项`hg log`可以显示此信息？理想情况下，我希望`hg log --stat`通过重命名信息来扩展信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T20:14:42.950

`hg log --template "{node|short}: {file_copies}\n"`

注意：file_copies 关键字有小问题，与其他列表相反，比较输出

```
>hg log --template "{node|short}: {file_copies}\n"
cbbb1b9c321d: fileB.txt (file2.txt)fileC.txt (file3.txt)
1589ead8667d: 
```

*（file2 重命名为 FileB，file3 - 重命名为 fileC）*

和

```
>hg log --template "{node|short}: {files}\n"
cbbb1b9c321d: file2.txt file3.txt fileB.txt fileC.txt
1589ead8667d: .hgignore file1.txt file2.txt file3.txt 
```

# python - 在运行时加载模块除了在结构下工作

> ID：16040509
> 
> 赞同：1
> 
> 时间：2013-04-16T15:04:13.143
> 
> 标签：python, dynamic, fabric

我在一个目录中有 2 个文件：loader.py 和 mod1.py。Loader.py 动态实例化 mod1.py 中的一个类并在其上调用一个方法。这是 mod1.py

```
 class MyClass1:
      def run(self):
          print "Class1 running" 
```

这是装载机：

```
 def run():
      mod = __import__('mod1')
      cls = getattr(mod, 'MyClass1')
      inst = cls()
      inst.run()

  run() 
```

如果我直接运行 python: "python loader.py" 我看到：

```
Class1 running 
```

这是你所期望的。如果我然后在结构下运行它：“fab -f loader.py run”我看到

```
Class1 running
Class1 running

Done. 
```

这是有道理的，run() 由fabric AND loader.py 在fabric 加载时调用。

但是，如果我删除了在 loader.py 中运行的显式调用，因此它只在结构下调用一次，我得到

```
ImportError: No module named mod1 
```

为什么在织物下跑步会有所不同？有没有办法在织物下进行这项工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T13:36:45.020

这是我的见解。

这种奇怪的行为在[docs](http://docs.fabfile.org/en/1.5/usage/fabfiles.html#fabfile-discovery)中进行了解释，引用：

> Fabric 对您的 fabfile 进行正常导入（实际上是 __import__）以访问其内容——它不执行任何 eval-ing 或类似操作。为了使其工作，Fabric 临时将找到的 fabfile 的包含文件夹添加到 Python 加载路径（并在之后立即将其删除。）

看看修改后的`loader.py`：

```
import os
import sys

print sys.path  # current dir is in sys.path

def run():
    print sys.path  # current dir is NOT in sys.path

    # no problem - we'll just add it
    sys.path.insert(0, os.path.dirname(os.path.realpath(__file__)))

    mod = __import__('mod1')
    cls = getattr(mod, 'MyClass1')
    inst = cls()
    inst.run() 
```

看起来很难看，但它解决了问题。

[这是](https://github.com/fabric/fabric/blob/1.6/fabric/main.py#L135)在加载 fab 文件时，fabric 如何使用导入进行操作。[这个问题](https://github.com/fabric/fabric/issues/256)也很重要。

希望有帮助。

# ruby-on-rails - 将用户从 Devise 1.1.7 转移到 2.2.3，用于新应用程序

> ID：16040512
> 
> 赞同：1
> 
> 时间：2013-04-16T15:04:17.737
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我开发了一个新应用程序，我想从旧应用程序转移用户。我想让他们在新应用中使用自己的旧密码。

```
OLD_APP:
  config.encryptor = :authlogic_sha512
  config.pepper = "xxx"

  devise (1.1.7)
  bcrypt-ruby (~> 2.1.2)
  warden (~> 1.0.2)

NEW_APP:
devise (2.2.3)
  bcrypt-ruby (~> 3.0)
  orm_adapter (~> 0.1)
  railties (~> 3.1)
  warden (~> 1.2.1)

BCrypt
without pepper (config.pepper line left commented) 
```

我使用了一些解决方案，例如： [Converting existing password hash to Devise](https://stackoverflow.com/questions/6113375/converting-existing-password-hash-to-devise)

但不幸的是它不起作用。我的问题是如何将`SHA512`hash (with salt) 转换为`BCrypt`(without salt) ？是否有人遇到过这个问题？

谢谢。

# jquery - 使用 jQuery 下拉框事件更改 JS 元素

> ID：16040515
> 
> 赞同：0
> 
> 时间：2013-04-16T15:04:39.050
> 
> 标签：jquery, sparql

我正在尝试使用 jQuery 下拉框事件来替换已分配给元素的 SPARQL。

我使用的代码似乎不起作用：

```
var sel = $('<select>').appendTo('body')
$(sel).change(function (){
    if() {
        $(sparqlquery).replaceWith("UPDATED SPARQL");
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T15:07:58.747

尝试：

```
var sel = $('select').appendTo('body');
$(sel).change(function(){
    $(sparqlquery).replaceWith("UPDATED SPARQL");               
}); 
```

这至少修复了您刚刚粘贴的代码，但我不知道这是否真的解决了您的问题。为此，我需要查看 HTML 并获得更多上下文。

# c++ - 我的循环没有循环

> ID：16040518
> 
> 赞同：-8
> 
> 时间：2013-04-16T15:04:59.967
> 
> 标签：c++, while-loop

```
enter code here
#include<iostream>
#include<iomanip>
using namespace std;

int main()
{
    double employeeNum    = 0.0;            double totalEmployees    = 0.0;
    double hourlyRate    = 0.0;            double totalhoursWork    = 0.0;
    double hoursWork    = 0.0;            double totalnetPay        = 0.0;
    double grossPay        = 0.0;            double averagehoursWork    = 0.0;
    double netPay        = 0.0;            double totalwithHoldings = 0.0;
    double withHoldings    = 0.0;

    cout <<" Enter Employee Number or 9999 to Stop:";
    cin >> employeeNum;
    cout <<"Enter hourly rate:";
    cin >> hourlyRate;
    cout <<"Enter hours worked:";
    cin >> hoursWork;

    while(employeeNum != 9999)
    {

        if (hoursWork >= 40)
        {
            grossPay= hoursWork * hourlyRate;
            cout <<" Gross Weekly Pay:" << grossPay << endl;
        }
        else (hoursWork > 40);
        {
            grossPay= hoursWork * hourlyRate*1.5;
            cout <<" Gross Weekly Pay:" << grossPay << endl;
        }

        while( grossPay > 1,000.00)
        {
            withHoldings= grossPay/ 0.28;

        }
        while( grossPay < 1,000.0)
        {
            withHoldings= grossPay/ 0.21;
        }

        netPay= grossPay-withHoldings;
        cout <<" Net Weekly Pay:" << netPay << endl;

        cout <<" Enter Employee Number or 9999 to Stop:";
        cin >> employeeNum;
        cout <<"Enter hourly rate:";
        cin >> hourlyRate;
        cout <<"Enter hours worked:";
        cin >> hoursWork; 
    }   
    system("pause");
    return 0;
} 
```

从一个空白的解决方案开始，编写一个程序来提示用户输入员工编号、小时费率和工作小时数。计算并显示员工人数、周薪总额和周薪净额。每周总工资的计算方法是前 40 小时的工作时间乘以 1.5 小时数乘以任何超过 40 小时的工资率。净工资是总工资减去预扣税。如果总工资超过 1,000 美元，预扣税按总工资的 28% 计算，如果总工资为 1000 美元或以下，则按总工资的 21% 计算。用户的所有输入都应验证为有效。每小时费率必须高于 7.25 美元且低于 100.00 美元。工作时间必须大于 0 且小于 120。如果用户输入无效数据显示和相应的错误消息并要求用户重新输入。使用后测试循环重复此过程，直到用户输入 9999，程序应显示输入的员工总数、总工作时间、平均工作时间、总净工资和总预扣税。所有数字输出应以固定表示法显示，带两位小数

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T15:09:35.073

```
while( grossPay > 1000.00)
        {
            withHoldings= grossPay/ 0.28;

        } 
```

要么条件为真，然后保持为真，循环将永远循环，要么条件不成立，语句永远不会执行。

`while`在循环内更改`if`或修改。`grossPay`

此外，不要在浮点常量中包含逗号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T15:23:15.510

您的循环没有执行，因为您的浮点常量中有一个“，”。使用 1000.00 而不是 1,000.00

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T15:08:34.230

您有第二个条件与第一个条件 ( `(hoursWork > 40);`) 重复，并且条件末尾有一个分号。请在此处发布之前仔细检查语法。

# jquery - 如何将非插入列表放在网格内

> ID：16040521
> 
> 赞同：1
> 
> 时间：2013-04-16T15:05:17.263
> 
> 标签：jquery, css, jquery-mobile, jquery-mobile-listview, jquery-mobile-collapsible

我需要将可折叠的列表视图放入响应式网格中，但我需要将可折叠的列表视图设置为 inset=false，因此它需要 iphone 尺寸的整个宽度。

但是插入功能似乎与网格不兼容...

这是我的非工作测试：

```
 <!-- Home -->
<div data-role="page" id="page1">
    <div data-role="content">
<div class="ui-grid-a ui-responsive">
            <div class="ui-block-a">
                            <div data-role="collapsible-set" data-theme="b" data-content-theme="d" data-inset="false" id="custom-collapsible">
                <div data-role="collapsible">
                    <h2>
                        Préconisations
                        <span class="ui-li-count preco-count">0</span>
                    </h2>
                <ul data-role="listview" data-divider-theme="b" data-inset="false" id="custom-listview">
                    <li data-role="list-divider" role="heading">
                        Divider
                    </li>
                    <li data-theme="c">
                        <a href="#" data-transition="slide">
                            Button
                        </a>
                    </li>
                    <li data-theme="c">
                        <a href="#" data-transition="slide">
                            Button
                        </a>
                    </li>
                    <li data-theme="c">
                        <a href="#" data-transition="slide">
                            Button
                        </a>
                    </li>                    
                </ul>
                                </div>
                </div>
            </div>
            <div class="ui-block-b">
                other content, which apear at tje left of the grid on large screens, and at the bottom on small screens
            </div>
        </div>
    </div>
</div> 
```

[http://jsfiddle.net/nmZhz/3/](http://jsfiddle.net/nmZhz/3/)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T16:01:12.853

工作示例：http: [//jsfiddle.net/Gajotres/nmZhz/2/](http://jsfiddle.net/Gajotres/nmZhz/2/)

**HTML：**

```
<!-- Home -->
<div data-role="page" id="page1">
    <div data-role="content">
        <div class="ui-grid-a ui-responsive">
            <div class="ui-block-a">
                <ul data-role="listview" data-divider-theme="b" data-inset="false" id="custom-listview">
                    <li data-role="list-divider" role="heading">
                        Divider
                    </li>
                    <li data-theme="c">
                        <a href="#" data-transition="slide">
                            Button
                        </a>
                    </li>
                    <li data-theme="c">
                        <a href="#" data-transition="slide">
                            Button
                        </a>
                    </li>
                    <li data-theme="c">
                        <a href="#" data-transition="slide">
                            Button
                        </a>
                    </li>                    
                </ul>
            </div>
            <div class="ui-block-b">
                other content, which apear at tje left of the grid on large screens, and at the bottom on small screens
            </div>
        </div>
    </div>
</div> 
```

**CSS：**

```
#custom-listview {
    margin: 0 !important;
} 
```

# delphi - 是什么导致表单不触发 FormResize？

> ID：16040523
> 
> 赞同：0
> 
> 时间：2013-04-16T15:05:23.380
> 
> 标签：delphi, delphi-xe3

在 Delphi XE3 中，我有一个获取初始 FormResize 事件的表单，仅此而已。如果我通过拖动一个角来调整表单的大小，我不会收到 FormResize 事件，并且任何对齐的控件都不会移动/调整大小。形式为 BorderStyle:bsSizeable。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T15:21:43.857

回答：当您覆盖我已经投入调查其他内容的 WM_MOVE 和 WM_WINDOWPOSCHANGED 时（duh）。道德：一次修复一个错误。

# c# - 选中列表框与其他数字相加

> ID：16040525
> 
> 赞同：1
> 
> 时间：2013-04-16T15:05:27.163
> 
> 标签：c#, listbox, sum, checkedlistbox

这是我的第一篇文章。我试图在 Visual C# 的选中列表框中进行多个总和。有 108 个数字，每行一个，我试图将选中的项目与其余的项目相加，并将其打印在文本框中。

我已经这样做了，但我认为这是不正确的。这实际上是求和，但也是数字本身和整个事物的 108 次

我想在复选框中添加选中的数字和其余数字。

```
private void button2_Click(object sender, EventArgs e)
{
   foreach(string checkednumber in checkedlistbox1.CheckedItems)
   {
      double x = Convert.ToDouble(checkednumber);

      double a = 0;
      for (double y = 0; y < checkedlistbox1.Items.Count; ++y)
      {
         foreach (string othernumbers in checkedlistbox1.Items)
         {
            double z = Convert.ToDouble(othernumbers);
            sum = x + z;
            string str = Convert.ToString(sum);
            listbox1.Items.Add(str);
         }
      }
   }  
} 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T15:30:49.960

您只想对已检查项目的数字求和？

```
double sum = 0;

foreach(object checkedItem in checkedlistbox1.CheckedItems)
{
    try 
    {
        sum += Convert.ToDouble(checkedItem.ToString()); 
    }
    catch (FormatException e) {} //catch exception where checkedItem is not a number

    listbox1.Items.Add(sum.ToString());
} 
```

您的问题非常不清楚，我不确定这是否是您想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:35:22.133

您也可以使用 linq 来实现它。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            var result = from num in this.checkedListBox1.CheckedItems.OfType<string>()
                         select Convert.ToInt32(num);
            this.textBox1.Text = result.Sum().ToString();
        }
    }
} 
```

# java - 以编程方式添加到 TableRow 时，ImageView 不显示

> ID：16040528
> 
> 赞同：1
> 
> 时间：2013-04-16T15:05:35.403
> 
> 标签：java, android, imageview, tablerow

以下是相关的代码位：

```
<HorizontalScrollView
        android:id="@+id/cards_scrollview"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:fillViewport="false" >

        <TableRow
            android:id="@+id/cards_container"
            android:layout_width="wrap_content"
            android:layout_height="100dp" >

            <ImageView
                android:id="@+id/test_card"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:paddingRight="@dimen/cards_distance"
                android:adjustViewBounds="true"
                android:src="@drawable/card_back" />

        </TableRow>

</HorizontalScrollView> 
```

和

```
private void addCard(Drawable d) {
        TableRow container = (TableRow) findViewById(R.id.cards_container);
        ImageView card = new ImageView(this);

        card.setAdjustViewBounds(true);
        card.setPadding(R.dimen.zero, R.dimen.zero, R.dimen.cards_distance, R.dimen.zero);
        TableRow.LayoutParams params = new TableRow.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
        card.setLayoutParams(params);
        card.setImageDrawable(d);
        card.setVisibility(View.VISIBLE);

        container.addView(card);
} 
```

我确信我要添加的 Drawable 不为空，边界设置正确，alpha 设置为 255，并且适合。我已经通过将它应用到 test_card 而不是尝试添加新的 ImageViews 来测试它，这非常有效。

我在这里有什么遗漏吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T17:17:40.153

在修改代码一个小时后，事实证明它`setPadding()`实际上将整数而不是资源引用作为参数，这就是把它搞砸的原因。

所以基本上我需要做的就是改变：

`card.setPadding(R.dimen.zero, R.dimen.zero, R.dimen.cards_distance, R.dimen.zero);`

到

`card.setPadding(0, 0, 5, 0);`

# java - 用于读取 .txt 文件并转换为二进制表示的 Java 代码

> ID：16040532
> 
> 赞同：-1
> 
> 时间：2013-04-16T15:05:44.383
> 
> 标签：java, encryption, io, binary

帮助伙计们，我对此有点坚持:(我正在用Java做简化的DES（SDES）。如何在加密之前将文件转换为二进制表示形式？非常感谢任何帮助。

我正在考虑通过 FileInputStream、DataInputStream 和 BufferedReader 读取文本文件并将它们放入一个字符串中（但文本文件真的很长）。然后可能使用 getBytes() 以二进制形式呈现字节。对不起，我在 Java 编程方面很弱，请随时提供建议。如果有人能提供示例源代码，那就太好了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T15:50:49.500

为什么要转换它们？只需在它们到来时对其进行加密。

# .net - dotNetInstaller exe 是作为软件包安装还是作为单独的产品安装？

> ID：16040535
> 
> 赞同：0
> 
> 时间：2013-04-16T15:05:53.787
> 
> 标签：.net, installation, wix, directx, dotnetinstaller

任何有 dotNetInstaller 经验的人 ( [http://dblock.github.io/dotnetinstaller/](http://dblock.github.io/dotnetinstaller/) ) 我有一个问题。我以前使用过 WiX 引导程序，这在很多方面都很糟糕，但我觉得最烦人的一个事实是，我没有将我的 .NET、DirectX 和我的程序作为单独的项目安装（就添加/删除程序而言）担心）它将它作为一个项目安装，这会导致各种头痛。最初，当软件包安装时，它需要 DX 和 .NET，所以我不得不告诉 WiX 这些是永久安装。但是，当我这样做时，实际上是让操作系统认为即使在我的程序本身已被删除之后，该软件包仍然部分安装（由于仍在安装 DX 和 .NET）。

我想知道的是，如果我使用 dotNetInstaller 创建一个引导程序，我是否能够在操作系统不认为“包”仍部分安装的情况下单独卸载各个请求和程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T15:54:46.677

您在 WiX 工具集中使用引导程序/链接器描述的行为（又名：Burn）不是预期的行为，将被视为错误。如果您想在 wix-users@list.sourceforge.net 邮件列表上开始讨论，我们很乐意深入了解问题。

dotNetInstaller 将每个安装包视为一个单独的实体，并且不会将自己注册为所有者。这与 Burn 试图创建单一的集成体验来安装所有软件形成对比。dotNetInstaller 可能是您现在正在寻找的更多内容。

注意：您可以通过 Burn 获得与 dotNetInstaller 非常相似的体验，但这需要一个自定义的 BootstrapperApplication，它**不会**尝试创建统一的安装体验。

同样，我们很乐意解决您使用 Burn 遇到的任何错误的根本问题。

# gcc - 链接器选项忽略未使用的依赖项

> ID：16040536
> 
> 赞同：5
> 
> 时间：2013-04-16T15:05:54.867
> 
> 标签：gcc, linker, solaris

我想从我编译的 C++ 二进制文件中删除所有未使用的符号。我看到了这个，它给出了使用 gcc 的概述，这是我正在使用的工具链：[如何使用 GCC 和 ld 删除未使用的 C/C++ 符号？](https://stackoverflow.com/questions/6687630/c-c-gcc-ld-remove-unused-symbols)

但是，在我的系统上，链接选项 ( `-Wl,--gc-sections`) 被拒绝：

```
$ gcc -fdata-sections -ffunction-sections a.c -o a.o -Wl,--gc-sections
ld: fatal: unrecognized option '--'
ld: fatal: use the -z help option for usage information
collect2: error: ld returned 1 exit status 
```

我在 illumos 上运行，它是（相对）最近的 Solaris 分支，带有 GCC 4.7。有人知道在这里使用的正确链接器选项是什么吗？

* * *

编辑：更仔细地搜索手册页出现“-zignore”：

```
 -z ignore | record

     Ignores, or records, dynamic dependencies that  are  not
     referenced   as  part  of  the  link-edit.  Ignores,  or
     records, unreferenced ELF sections from the  relocatable
     objects  that  are  read  as  part  of the link-edit. By
     default, -z record is in effect.

     If an ELF section is ignored, the section is  eliminated
     from  the  output  file  being  generated.  A section is
     ignored when three conditions are true.  The  eliminated
     section  must  contribute to an allocatable segment. The
     eliminated section must provide no  global  symbols.  No
     other  section  from  any object that contributes to the
     link-edit, must reference an eliminated section. 
```

然而，下面的序列仍然放在`FUNCTION_SHOULD_BE_REMOVED`ELF 部分`.text.FUNCTION`：

```
$ cat a.c
int main() {
    return 0;
}
$ cat b.c
int FUNCTION_SHOULD_BE_REMOVED() {
    return 0;
}
$ gcc -fdata-sections -ffunction-sections -c a.c -Wl,-zignore
$ gcc -fdata-sections -ffunction-sections -c b.c -Wl,-zignore
$ gcc -fdata-sections -ffunction-sections a.o b.o -Wl,-zignore
$ elfdump -s a.out                     # I removed a lot of output for brevity
Symbol Table Section:  .dynsym
[2]  0x08050e72 0x0000000a  FUNC GLOB  D    1 .text.FUNCTION FUNCTION_SHOULD_BE_REMOVED
Symbol Table Section:  .symtab
[71]  0x08050e72 0x0000000a  FUNC GLOB  D    0 .text.FUNCTION FUNCTION_SHOULD_BE_REMOVED 
```

因为手册页说“没有全局符号”，所以我尝试将函数设置为“静态”，并且最终结果相同。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-17T04:46:14.803

ld '-z ignore' 选项是定位的，它适用于在命令行上出现在它之后的那些输入对象。你给的例子：

```
gcc a.o b.o -Wl,-zignore 
```

将选项应用于无对象 - 所以什么都不做。

```
gcc -Wl,-zignore a.o b.o 
```

应该管用

# java - 在正确的位置绘制多边形

> ID：16040543
> 
> 赞同：0
> 
> 时间：2013-04-16T15:06:04.267
> 
> 标签：java, graphics

这个问题是[GPS 坐标到像素](https://stackoverflow.com/questions/15882368/gps-coordinates-to-pixel)的延续。我需要画几个多边形。我可以单独绘制每个多边形，但不能将所有多边形都放在正确的位置。

我从这个文件加载有关多边形的信息： [GPS](http://jirka.webarchitects.cz/kraje_cr.txt)

我有代表每个多边形的 Kraj 类。

```
public class Kraj {

    String name;
    Point2D.Double points[];
    Point2D.Double transPoints[];

    Point2D.Double max;
    Point2D.Double min;

    // polygon
    Path2D.Double polygon;

    ArrayList<Kraj> kraje;

    public Kraj(String name, Point2D.Double body[])
    {
        this.name = name;
        this.body = Arrays.copyOf(body, body.length);
        // calculate a bounding box
        zjistiLimity();
        this.transPoints = new Point2D.Double[points.length];
    }

    private void transformToWindow(int width, int height) 
    {
        // convert to window
        double convertX = width / (max.x - min.x);
        double convertY = height / (max.y - min.y);

        // calculate polygon to fit in window with right aspect ratio
        double convert =  convertX > convertY ? convertY : convertX;
        // min = 0, convert to interval <0: infinity> and multiply by convert,
        for (int j = 0; j < points.length; j++) {
            double transX = (points[j].x - min.x) * convert;
            double transY = height - (points[j].y - min.y)  * convert;
            transPoints[j] = new Point2D.Double(transX, transY);
        }

        this.polygon = new Path2D.Double();
        this.polygon.moveTo(transBody[0].x, transBody[0].y);
        for (int i = 1; i < body.length; i++) 
            this.polygon.lineTo(transPoints[i].x, transPoints[i].y);
        this.polygon.closePath();
    }

    private void drawKraj(Graphics2D g2, int width, int height) {       

        g2.setStroke(new BasicStroke(2));
        g2.fill(polygon);
        // vykreslime obrys
        g2.setColor(Color.black);
        g2.draw(polygon);
    }

    public void draw(Graphics2D g2,
            int contextWidth, int contextHeight) 
    {
        // fit to window size
        int sirkaSOdsazenim = contextWidth;
        int vyskaSOdsazenim = contextHeight;

        this.transformujToWindow(sirkaSOdsazenim, vyskaSOdsazenim);

        this.drawKraj(g2, sirkaSOdsazenim, vyskaSOdsazenim);

    }

    /**
     * Set min and max
     */
    private void zjistiLimity() {
        max = new Point2D.Double(-Double.MAX_VALUE, -Double.MAX_VALUE);
        min = new Point2D.Double(Double.MAX_VALUE, Double.MAX_VALUE);
        for(int j = 0; j < 10; j++)
        {
            for (int i = 0; i < body.length; i++) 
            {
                if (points[i].getX() < min.getX()) min.x = points[i].getX();
                if (points[i].getY() < min.getY()) min.y = points[i].getY();
                if (points[i].getX() > max.getX())max.x = points[i].getX();
                if (points[i].getY() > max.getY()) max.y = points[i].getY();
            }
        }
    } 
```

使用此代码，我可以绘制适合窗口的多边形。但我需要绘制所有多边形以适合窗口（计算坐标以创建此地图）：

![最终图像](https://i.stack.imgur.com/uxgUz.jpg)

我需要编辑或添加什么？感谢所有的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T15:25:30.740

您可以使用以下方法平移整个多边形：

```
g2.translate(x, y); 
g2.draw(polygon);
g2.translate(-x, -y) 
```

为每个多边形确定适当的 x/y 平移是您需要做的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T15:15:04.007

> 我需要画几个多边形。我可以单独绘制每个多边形，但不能在正确的位置绘制所有多边形。

如果您可以单独绘制每个多边形，那么您的多边形是正确的。

`Kraj`您需要为您的班级添加一个起点。然后您的`draw`方法会将多边形点从多边形原点转换为地图原点。假设您的多边形原点是 (10,10) 并且需要在 (20,30) 处绘制特定的多边形，那么您将在绘制之前将 10 添加到多边形中每个点的 x 并添加 20 到 y。

在调整每个点的 X 和 Y 值之前，您可以在绘制例程中复制多边形。

编辑添加：这是您自己的代码修改以转换原点。我没有测试过这些变化。

```
private void transformToWindow(Point2D windowOrigin, int width, int height) 
{
    // convert to window
    double convertX = width / (max.x - min.x);
    double convertY = height / (max.y - min.y);

    // calculate polygon to fit in window with right aspect ratio
    double convert =  convertX > convertY ? convertY : convertX;
    // min = 0, convert to interval <0: infinity> and multiply by convert,
    for (int j = 0; j < points.length; j++) {
        double transX = (points[j].x - min.x) * convert;
        double transY = height - (points[j].y - min.y)  * convert;
        transPoints[j] = new Point2D.Double(transX, transY);
    }

    this.polygon = new Path2D.Double();
    double xShift = windowOrigin.x - transBody[0].x;
    double yShift = windowOrigin.y - transBody[0].y;
    this.polygon.moveTo(windowOrigin.x, windowOrigin.y);
    for (int i = 1; i < body.length; i++) 
        this.polygon.lineTo(transPoints[i].x + xShift, 
            transPoints[i].y + yShift);
    this.polygon.closePath();
} 
```

# c# - 比较通用对象的值

> ID：16040545
> 
> 赞同：0
> 
> 时间：2013-04-16T15:06:14.670
> 
> 标签：c#, asp.net, types, comparison

我遇到了一个问题，在我的代码中，我创建了一个循环来检索我的对象进程的 PropertyInfo 并将其放入 obj 中，但是如果我的 obj 值是一个 List，我必须调用另一个方法，我正在尝试验证这使用以下代码，但我的 if 块不起作用。

```
foreach (PropertyInfo obj in process.GetType().GetProperties())
        {
            email += createEmail(obj.Name, Convert.ToString(objeto.GetValue(processo, null)));

            if (obj.GetType() == typeof(System.Collections.Generic.List<>))
            {
                CreateEmail<Object>(obj, "");
            }
        } 
```

任何想法？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T15:12:21.120

```
if (obj.PropertyType.IsGenericType &&
    obj.PropertyType.GetGenericTypeDefinition() == typeof (System.Collections.Generic.List<>))
{

} 
```

# regex - 多行查找（抓取）并使用 perl 替换 XML 文件中的文本

> ID：16040546
> 
> 赞同：-2
> 
> 时间：2013-04-16T15:06:16.037
> 
> 标签：regex, perl

在这里，我尝试使用 perl 正则表达式在一个 XML 文件中查找和替换文本内容。

示例 XML 代码：

```
<root>
<add>
<st>xxxx</st>
<pin>xxx</pin>
</add>
</root> 
```

现在我想从 to 中查找 / grep 文本`<add>`并`</add>`替换`<xyz>`xxx`</xyz>`

```
<add>
<st>xxxx</st>
<pin>xxx</pin>
</add> 
```

笔记：

`<add>`如果上述内容在单行中，我的意思是在to之间没有换行符`</add>`，因为`<add><st>xxxx</st><pin>xxx</pin></add>`我可以`<add>(.*)<\/add>`用来查找 / grep。

* * *

感谢您

蒂鲁桑古拉亚五世

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T15:17:39.673

使用[XML::XSH2](http://p3rl.org/XML%3a%3aXSH2)，一个围绕[XML::LibXML](http://p3rl.org/XML%3a%3aLibXML)的包装器：

```
open input.xml ;
$add = /root/add ;
delete $add/* ;
insert element xyz into $add ;
insert text 'xxx' into $add/xyz ;
save :b ; 
```

# c# - 是否可以通过 MailAddress 类进行 XSS？

> ID：16040547
> 
> 赞同：3
> 
> 时间：2013-04-16T15:06:15.793
> 
> 标签：c#, asp.net, security, xss, email-address

考虑到我将用户输入（应该是电子邮件地址）解析到[MailAdress](http://msdn.microsoft.com/de-de/library/system.net.mail.mailaddress.aspx)类中：

```
var mailString = Request.QueryString["mail"];
var mail = new MailAddress(mailString); 
```

**如果我稍后以任何方式输出 MailAddress 对象，是否还有可能发生跨站点脚本攻击？**例如通过 WebForms 中的 Literal 控件：

```
litMessage.Text = "Your mail address is " + mail.Address; 
```

即使我通过解析字符串确保地址是有效的电子邮件地址，是否有必要清理输出？

据我所知，邮件地址的 RFC 非常复杂，所以我不确定跨站点脚本是否可以隐藏在 .NET 认为有效的邮件地址中。

**编辑：**
[MSDN](http://msdn.microsoft.com/en-us/library/591bk9e8.aspx)说，`>`电子邮件`<`地址中允许使用括号：

> 如果将地址括在尖括号中，地址参数可以包含显示名称和关联的电子邮件地址。例如：“汤姆·史密斯 <tsmith@contoso.com>”

所以问题仍然存在，这是否足以应对 XSS 攻击和/或`MailMessage`该类是否采取任何措施来逃避危险部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T10:04:03.847

> 是否有必要对输出进行消毒

您不会“清理”输出，而是对其进行编码。您输出到 HTML 文档中的每个字符串都需要进行 HTML 编码，因此，如果`<`邮件地址中有一个字符，则无关紧要 -`&lt;`作为结果，您会进入 HTML 源代码，并且会正确显示为页面上的文字`<`。

许多 ASP.NET 控件会自动为您处理 HTML 转义，但`Literal`默认情况下不会，因为它可用于显示标记。但是，如果您将控件的`Mode`属性设置为，那么设置您正在做的事情就很好了。`Literal`[`Encode`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.literal.mode.aspx)`Text`

您应该确保每次将内容放入 HTML 页面时始终使用安全的 HTML 编码输出，无论您是否认为您使用的值将能够包含`<`字符。这是一个关注点分离的问题：HTML 输出代码知道所有关于 HTML 格式的信息，但它不应该知道在电子邮件地址或其他应用程序字段中哪些字符是正确的。

因为您认为该值是“安全的”而忽略转义会在输出级和输入级之间引入隐式且脆弱的耦合，从而难以验证代码是否安全，并且在您进行更改时很容易使其不安全。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T17:52:18.597

一般来说，您以后不需要验证输出。但是，我始终建议您这样做，原因如下：

1.  您的应用程序中的某处可能存在无法正确验证输入的漏洞。这可能会被攻击者发现并用于 XSS。当许多不同的开发人员正在开发应用程序时，这尤其可能。
2.  在实施/更新输入过滤器之前，数据库中可能存储了旧数据。这可能包含可用于 XSS 的恶意代码。
3.  攻击者非常聪明，通常可以找到一种方法来击败过滤器。微软非常重视防止这种情况发生，但它永远不会完美。如果他们面对和传出过滤器以及传入过滤器，它会使攻击者的工作更加困难。

我知道不断过滤很痛苦，但这样做有很多价值。在当今世界，纵深防御战略是必要的。

编辑：

对不起，我没有真正回答你问题的第二部分。根据文档，我没有得到这样的印象，即 API 专注于清理和验证有效格式一样多。因此，我不知道出于安全目的依赖它是否安全。

但是，编写自己的消毒剂并不难，如果发现缺陷，可以立即更新。首先通过一个好的 RegEx 过滤器运行地址（请参阅：[Regex 电子邮件验证](https://stackoverflow.com/questions/5342375/c-sharp-regex-email-validation)），然后*递归*删除电子邮件地址中的每个无效字符（此时不应通过这些字符，但这样做是为了全面性，以防您想重用其他地方的类），然后用 HTML 含义转义每个字符。我强调过滤器的递归应用，因为攻击者可以利用具有以下内容的非递归过滤器：

`<scr<script>ipt>`

请注意，非递归过滤器将删除中间出现的`<script>`并保留外部出现的完整。

# javascript - 如何在backbone.js 应用程序中实现i18n/L10n？

> ID：16040548
> 
> 赞同：0
> 
> 时间：2013-04-16T15:06:16.533
> 
> 标签：javascript, backbone.js, localization, internationalization

我正在编写一个主干应用程序。
我正在编写一个模板，模板中的所有名称都已直接给出。
我想实现国际化，我应该能够在应用程序开始时设置我喜欢的语言环境，并且名称应该相应地改变。
我不知道如何实现这一点。
有什么方向吗？感谢帮助..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-12T03:42:42.373

如果您想翻译字符串，我会推荐[l10n](https://github.com/eligrey/l10n.js/)。经过简单的设置后，您可以这样做：

包括翻译字符串：

```
{
    "en": {
        "%title.main": "Main Page"
    },
    "de": {
        "%title.main": "Mein Parge"
    }
} 
```

然后在您的渲染函数中，例如：

```
this.$el.find(".title").html( l('%title.main') ); 
```

# image - 为什么这不垂直居中？

> ID：16040551
> 
> 赞同：1
> 
> 时间：2013-04-16T15:06:26.363
> 
> 标签：image, html, containers, css

html代码：

```
<div class="container">
  <a class="ank">
    <img src="http://www.w3schools.com/images/w3schoolslogoNEW310113.gif" />
  </a>
</div> 
```

CSS代码：

```
.ank
{
  display: block;
  width: 500px;
  height: 500px;
  line-height: 100%;
 }

 img
 {
  vertical-align: middle;
 }

 .container
 {
  display:block;
  width: 500px;
  height: 500px;
  border: 1px solid black;
  font-size: 500px;
 } 
```

jsfiddle：http: [//jsfiddle.net/mfBZZ/5/](http://jsfiddle.net/mfBZZ/5/)

如果我更改 jsfiddle，使 anks 行高为 500px，并从容器中删除字体大小，它就可以工作。

但是当我将字体大小添加到 500px 的容器中，然后在 ank 中将行高设为该字体大小的 100% 时，它不起作用。它使图像略低于应有的位置。

工作jsfiddle：http: [//jsfiddle.net/eujFY/1/](http://jsfiddle.net/eujFY/1/)

更新：

这个解决方案对我有用：http: [//jsfiddle.net/eujFY/2/](http://jsfiddle.net/eujFY/2/) <---- 更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T11:57:21.700

我已经看到您找到了解决方案，但是这意味着在两个元素上手动设置高度，并且需要使用不必要的标签。所以我建议你检查“display:table”（容器）和“display:table-cell”（内部元素）规则：http: [//jsfiddle.net/RxGS5/](http://jsfiddle.net/RxGS5/)

HTML

```
<div class="container">
    <a class="ank">
        <img src="http://www.w3schools.com/images/w3schoolslogoNEW310113.gif" />
    </a>
</div> 
```

CSS

```
.container
{
    display:table;
    width: 500px;
    height: 500px;
    border: 1px solid black;
}

.ank
{
    display: table-cell;
    vertical-align: middle;
} 
```

# javascript - Zurb Foundation 轨道滑块在第三张幻灯片上暂停

> ID：16040553
> 
> 赞同：1
> 
> 时间：2013-04-16T15:06:30.980
> 
> 标签：javascript, zurb-foundation, orbit

我添加了动画速度，并且可以在悬停时暂停；但是，我很好奇使用 JS 是否能够在某个幻灯片上暂停，或者至少在某个时间暂停。有什么建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T16:34:25.217

轨道js在幻灯片改变'orbit.next''orbit.prev'时调度事件......

```
 //from the orbit js
  this.$element.bind('orbit.next', function () {
    self.shift('next');
  });

  this.$element.bind('orbit.prev', function () {
    self.shift('prev');
  }); 
```

你可以用 jQuery 来监听这些事件，例如。

```
$("#featured").bind('orbit.next orbit.prev', function(event){
      console.log('slide change', event);
  }); 
```

不确定您将如何获得时间，但您可以更改轨道 js 以公开您需要的信息。

要获取幻灯片编号，您可以启用“slideNumber”选项

```
slideNumber: true,               // display slide numbers? 
```

并从显示屏上获取号码。

希望这可以帮助。

# iphone - 如何在 iOS 6 的不同 UIViewController 中获得不同的自动旋转功能

> ID：16040555
> 
> 赞同：2
> 
> 时间：2013-04-16T15:06:35.570
> 
> 标签：iphone, ios6, autorotate

我正在开发一个我只想为一个 UIViewController 启用横向模式的应用程序。我想要纵向模式的其余页面。

它在 iOS upto 5 SDK 中使用 shouldautorotate 方法非常容易，但在 iOS 6 中，由于新的旋转方法，“supportedInterfaceOrientations”似乎无法轻松提供此功能，要么我可以在所有视图中启用旋转，要么只能固定到一种模式。

# java - 在 if/else 结构中声明一个变量

> ID：16040556
> 
> 赞同：3
> 
> 时间：2013-04-16T15:06:38.850
> 
> 标签：java, variables, declaration

我正在 CodingBat.com (extraFront) 上解决一个基本的 Java 字符串问题。

任务是，给定一个任意长度的字符串，返回重复三遍的前两个字符。第一个示例是我最终直观地完成的操作：

```
public String extraFront(String str) {

  if (str.length() <= 2){
    String front = str;
  }else{
    String front = str.substring(0,2);
  }
  return front+front+front;
} 
```

这给了我一个错误，*前面无法解决*。我猜我需要在循环外定义变量，所以我将代码更改为以下代码，它可以正常工作：

```
public String extraFront(String str) {

  String front;

  if (str.length() <= 2){
    front = str;
  }else{
    front = str.substring(0,2);
  }
  return front+front+front;
} 
```

令我困惑的是，为什么这会有所不同，因为无论如何都要声明变量，不是吗？这是 CodingBat 处理代码的一个特点，还是实际上是一个错误？如果是，为什么这个代码不正确？如果它不正确，是不是风格不好？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T15:09:18.190

> 令我困惑的是，为什么这会有所不同，因为无论如何都要声明变量，不是吗？

这是范围界定的问题。变量仅在声明它的块中可见。这与 CodingBat 无关——它是 Java 语言的一部分。从[JLS 的第 6.3 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-6.html#jls-6.3)：

> 声明的范围是程序的区域，在该区域内，声明所声明的实体可以使用简单名称来引用，前提是它是可见的（第 6.4.1 节）。
> ...
> 块中局部变量声明的范围（第 14.4 节）是声明出现的块的其余部分，从它自己的初始化程序开始，并在局部变量声明语句的右侧包括任何进一步的声明符。

我还敦促您了解[条件运算符](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.25)，它可以在以下情况下提供帮助：

```
String front = str.length() <= 2 ? str : str.substring(0, 2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T15:10:14.863

`block`当您在 a中声明局部变量时`variable`，`scoping`根据`Java language`

你可以看到一个简单的[视频](http://www.youtube.com/watch?v=FcpDo-TfDHk):)

> 一个变量只能从它的声明到声明它的大括号的末尾才可用。变量有效的程序文本区域称为其范围。

[块和语句](http://docs.oracle.com/javase/specs/jls/se5.0/html/statements.html)

# sql-server - 找不到用户''，因为它不存在或您没有权限

> ID：16040557
> 
> 赞同：39
> 
> 时间：2013-04-16T15:06:41.443
> 
> 标签：sql-server, tsql, sql-server-2005, stored-procedures

我正在尝试为使用此查询的用户添加存储过程的权限，

```
USE [MyDatabaseName]
GO

GRANT EXEC ON [dbo].[StoreProcedureName] TO [UserName]
GO 
```

**我可以通过用户界面向用户授予权限，**但使用此查询我收到此错误，

> 找不到用户“用户名”，因为它不存在或您没有权限。

如果我没有权限，那么如何使用用户界面添加权限。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-09-16T17:01:30.167

我刚刚遇到了同样的问题。

确保主表中有您的登录名的用户映射。不需要数据库角色成员资格，只需在登录“用户名”的属性中的“用户映射”下为数据库主服务器勾选“映射”。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2016-09-02T17:31:53.480

运行这个：

```
USE [db_where_you_need_access]
GO
CREATE USER [your_user] FOR LOGIN [your_user] 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-09-30T15:22:20.267

我遇到了这个问题，但我在服务器上的本地管理员组中。显然，如果打开 UAC，以管理员身份运行 SQL Server Management Studio 会大有不同。在我这样做之前，我没有任何权限。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-03T06:39:13.077

当数据库已从另一台服务器恢复并且数据库中用户的 GUID 与当前服务器的 GUID 不同时，您可能会遇到此类问题。

这将重新链接孤立的用户：

```
USE <database_name>;
GO
sp_change_users_login @Action='update_one', @UserNamePattern='<database_user>', 
   @LoginName='<login_name>';
GO 
```

除此之外，如果用户存在并且您拥有相关的安全权限，那么您所做的没有理由不起作用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-03-23T10:36:59.067

有点愚蠢，但请确保您在声明`UserName`中的拼写正确。`GRANT`我花了半个小时试图弄清楚这个错误的原因是什么，这只是我的一个错字！

# c# - 动态选择要在 C# 中使用的类

> ID：16040561
> 
> 赞同：4
> 
> 时间：2013-04-16T15:06:55.897
> 
> 标签：c#, .net, dynamic

关于这个问题的一点背景故事：

我正在为我的本地酒吧编写一个 POS 系统，我希望它能够启用插件。对于这个特殊问题，我将使用以下场景：

我有一个计算器类，顾名思义，它会执行所有涉及当前收据、增值税等产品的计算。我希望这个类可以通过插件（在不同的程序集中）进行扩展，以添加功能到使用我们使用的这些特殊硬币。计算器只需遍历收据上的所有产品（在其构造函数中传递）以计算总金额。收据类有一个包含所有产品对象的列表。内置产品类没有任何与硬币相关的成员，这些在插件程序集中的另一个产品类中。

**这里的问题**是，如何让我的主程序动态选择正确的类用于产品？

我正在考虑将所有插件加载到列表或字典中，然后简单地遍历它们以检查产品类的覆盖是否存在，然后使用它，但我仍然需要某种通用接口，这不是一个选项。我确切地知道如何在 PHP 中做到这一点，但是可以在运行/安装时用更新的源编辑/替换源。

在此先感谢，汤姆。

**编辑：**为了简化问题：是否可以让外部插件程序集使用新方法扩展内置程序集，而不必在现有应用程序中对方法的名称/委托/任何内容进行硬编码？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T15:14:22.457

从提供的问题中看不出有任何理由不使用通用界面。例子：

```
public interface IProduct {

      decimal Price {get;}
}

public class Product : IProduct 
{
     decimal price;
     public decimal Price {
          get {
              return price;
          }
     }
}

public class Product1 : IProduct 
{
     decimal price;
     public decimal Price {
          get {
              return price;
          }
     }
}
.... 
```

在`Calculator`迭代收集`IProducts`并要求每个人的`Price`财产后，应用与地区相关的增值税 + 任何东西并构建最终价格。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T15:14:41.730

MEF 或任何半体面的 DI 容器应该能够做到这一点。所以所有类都实现接口，然后你调用 RESOLVE，它从你的目录中返回一个可枚举的实例。

MEF 的完整文档在[http://msdn.microsoft.com/en-us/library/dd460648.aspx](http://msdn.microsoft.com/en-us/library/dd460648.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T15:18:13.693

要么手动实现你需要的工厂模式，要么使用任何现有的和舒适的依赖注入/控制反转容器与通用接口，例如 IPluging。

例如使用这个 SO 答案作为基本列表

[主要的 C# DI/IoC 框架如何比较？](https://stackoverflow.com/questions/4581791/how-do-the-major-c-sharp-di-ioc-frameworks-compare)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T15:12:45.437

基本上，您正在寻找工厂模式和适配器模式的组合。

将所有“接口不是选项”的对象包装到适配器中，并使用工厂实例化它们，这反过来又会实例化你奇怪的对象。

工厂设计模式 - [http://msdn.microsoft.com/en-us/library/ee817667.aspx](http://msdn.microsoft.com/en-us/library/ee817667.aspx)

适配器设计模式 - [http://www.dofactory.com/Patterns/PatternAdapter.aspx](http://www.dofactory.com/Patterns/PatternAdapter.aspx)

# jpql - JPA查询中MySQL的LPAD字符串函数？

> ID：16040562
> 
> 赞同：2
> 
> 时间：2013-04-16T15:06:56.073
> 
> 标签：jpql

我可以知道如何将以下 MySQL SQL 转换为 JPA 查询吗？

```
SELECT * FROM ORDER
WHERE LPAD(BATCH, 2, ' ') < LPAD('X', 2, ' ') ; 
```

我想不通的是 JPA 中的 LPAD() 字符串函数。

你有什么主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-07-02T19:09:55.487

我知道这是一篇很老的帖子，但是当一些同事在构建 JPA 查询如何做同样的事情时，我总是会受到质疑。几乎从来没有你会找到一个完美的拟合函数来做你想做的事。但是，使用一些逻辑，您可以在完整的 JPA 中获得相同的结果。

LPAD 的一个例子。

```
Expression<String> numberWithZeroLeft = builder.concat("0000", root.get("myNumber")); //Return something like 000012
Expression<Integer> expressionLength = builder.length(numberWithZeroLeft);
Expression<String> numberLpad = builder.substring(numberWithZeroLeft, e.builder.sum(expressionLength, -3), e.builder.literal(4)); //Return something like 0012

query.select(numberLpad); 
```

想一想：

```
I have a string X, and need a string formatted in 4 zeros.
So we will get 0000 + X => "0000X"
And now just get the 4 last characters using substring. 
```

我希望对某人有所帮助。

干杯。=]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-14T08:29:17.687

在 EclipseLink 2.1 中有一个函数 FUNC 用于调用数据库特定的函数，例如：

```
FUNC('LPAD', BATCH, 2, ' ') < FUNC('LPAD', 'X', 2, ' ') 
```

从 EclipseLink 2.4 和 JPA 2.1 开始，有具有相同功能的 FUNCTION 运算符

# linux - 带api的视频制作工具，将图片和音乐组合成视频

> ID：16040564
> 
> 赞同：-1
> 
> 时间：2013-04-16T15:07:00.613
> 
> 标签：linux, api, video

linux上是否有一个视频制作工具，它有一个api，我可以用它来将图片和音乐组合成一个视频？我刚刚找到了 youtube 编辑器。我可以添加多张图片并制作视频。不幸的是，它没有 api。有没有类似的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T21:43:18.853

[从图像创建视频幻灯片](http://ffmpeg.org/trac/ffmpeg/wiki/Create%20a%20video%20slideshow%20from%20images)

```
# each image will have a duration of 5 seconds
ffmpeg -f image2 -r 1/5 -i img%03d.png -i music.m4a -r 30 out.mp4 
```

# bash - 使用 awk 提取子字符串

> ID：16040567
> 
> 赞同：37
> 
> 时间：2013-04-16T15:07:20.773
> 
> 标签：bash, awk

给定格式为 的主机名`aaa0.bbb.ccc`，我想提取 之前的第一个子字符串`.`，即`aaa0`在本例中。我使用以下 awk 脚本来执行此操作，

```
echo aaa0.bbb.ccc | awk '{if (match($0, /\./)) {print substr($0, 0, RSTART - 1)}}' 
```

在一台机器上运行的脚本`A`产生`aaa0`，在机器上运行`B`只产生`aaa`，最终没有`0`。两台机器都运行`Ubuntu/Linaro`，但`A`运行较新版本的 awk（gawk 使用 3.1.8 版，而`B`使用旧版 awk（mawk 使用 1.2 版）

我一般都在问，如何编写一个兼容的 awk 脚本来执行相同的功能......

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-04-16T15:09:19.597

您只想将字段分隔符设置为`.`使用该`-F`选项并打印第一个字段：

```
$ echo aaa0.bbb.ccc | awk -F'.' '{print $1}'
aaa0 
```

同样的事情，但使用剪切：

```
$ echo aaa0.bbb.ccc | cut -d'.' -f1
aaa0 
```

或与`sed`：

```
$ echo aaa0.bbb.ccc | sed 's/[.].*//'
aaa0 
```

甚至`grep`：

```
$ echo aaa0.bbb.ccc | grep -o '^[^.]*'
aaa0 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-16T15:35:19.033

> 我一般都在问，如何编写一个兼容的 awk 脚本来执行相同的功能......

解决问题中的问题很容易。（检查其他人的答案）。

如果您想编写一个可移植到任何 awk 实现和版本（gawk/nawk/mawk...）的 awk 脚本，即使使用 --posix (gawk) 也非常困难

例如：

*   一些 awk 以字符的形式处理字符串，一些以字节为单位
*   有些支持`\x`逃生，有些不支持
*   `FS`口译员的工作方式不同
*   关键字/保留词缩写限制
*   一些运营商限制，例如**
*   甚至相同的 awk impl。（例如 gawk），4.0 和 3.x 版本也有区别。
*   某些功能的实现也不同。（你的问题是一个例子，见下文）

好吧，以上所有观点都只是笼统地说。回到您的问题，您的问题仅与 awk 的基本功能有关。`awk '{print $x}'`这样的行将适用于所有 awks。

您的 awk 行在 gawk 和 mawk 上表现不同的原因有两个：

*   您`substr()`错误地使用了功能。这是主要原因。无论您使用哪个 awk，您都拥有`substr($0, 0, RSTART - 1)`should `0`be 。`1`awk 数组、字符串 idx 等都是从 1 开始的。

*   gawk 和 mawk 的实现`substr()`方式不同。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-16T15:11:04.507

或者只是使用剪切：

```
echo aaa0.bbb.ccc | cut -d'.' -f1 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-16T15:12:20.560

你不需要 awk 这...

```
echo aaa0.bbb.ccc | cut -d. -f1
cut -d. -f1 <<< aaa0.bbb.ccc

echo aaa0.bbb.ccc | { IFS=. read a _ ; echo $a ; }
{ IFS=. read a _ ; echo $a ; } <<< aaa0.bbb.ccc 

x=aaa0.bbb.ccc; echo ${x/.*/} 
```

较重的选项：

```
sed:
echo aaa0.bbb.ccc | sed 's/\..*//'
sed 's/\..*//' <<< aaa0.bbb.ccc 
awk:
echo aaa0.bbb.ccc | awk -F. '{print $1}'
awk -F. '{print $1}' <<< aaa0.bbb.ccc 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-16T15:21:02.950

您根本不需要任何外部命令，只需在 bash 中使用参数扩展：

```
hostname=aaa0.bbb.ccc
echo ${hostname%%.*} 
```

# java - 本地 Java 程序可以使用 DRMAA 通过 SSH 远程启动作业吗？

> ID：16040571
> 
> 赞同：0
> 
> 时间：2013-04-16T15:07:25.083
> 
> 标签：java, ssh, hpc, drmaa

DRMAA 是如何工作的？使用 DRMAA 的本地 Java 程序能否通过 SSH 在远程集群上启动作业（这样就不需要在服务器端安装任何东西）？

**背景：** 我正在用 Java/Eclipse RCP 开发一个通用（或尽可能通用）HPC 客户端，并希望使用 DRMAA 来支持任何资源管理器作为后端。

我已经通过远程系统资源管理器 (RSE) Eclipse 插件获得了 SSH 连接功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T21:03:55.373

大多数 DRMAA 实现使用本机 API 调用（在 qsub/bsub/sbatch... 命令中使用的相同）。可以将 DRMAA 视为“批处理系统的 ODBC”。

大多数 DRMAA 实现要求您从本地集群的提交主机运行它，内部没有 SSH。您可以尝试构建一个可移植的、基于 DRMAA 的“drmaa-run”命令（例如：[http ://apps.man.poznan.pl/trac/drmaa-misc/browser/drmaa_utils/trunk/drmaa_utils/drmaa_run .c](http://apps.man.poznan.pl/trac/drmaa-misc/browser/drmaa_utils/trunk/drmaa_utils/drmaa_run.c) ) 并通过 SSH 运行它。

# javascript - jQuery 中的 Backbone.js 事件

> ID：16040578
> 
> 赞同：3
> 
> 时间：2013-04-16T15:07:47.690
> 
> 标签：javascript, jquery, jquery-ui, backbone.js

我正在尝试使用 Backbone 事件扩展现有的 jQuery 小部件，以便它们可以发布可以收听的 Backbone 事件。我的策略是在小部件的本机事件回调方法中代理事件。例如，在 jQueryUI 滑块小部件的更改事件中，我想触发一个名为“触发器”的事件。我的难题是此代码按预期工作：

```
$(function() {
    var $slider = $("#slider");

    _.extend($slider, Backbone.Events);

    $slider.on("trigger", function(msg){
        alert("triggered: " + msg)
    });

    $slider.slider({
        change: function(event, ui) {
            $slider.trigger("trigger", ui.value);
        }

    });
}); 
```

这是我想去的地方的 3/4，但我希望能够在 change 事件中做这样的事情：

```
change: function(event, ui) {
     $(this).trigger("trigger", ui.value);
} 
```

...完全封装小部件，而不用担心小部件的实际单例实例。我的问题是第二种方法不起作用，我想知道是否有人可以向我解释原因。在 Firebug 中，$(this) 和 $slider 都指向同一个 DOM 元素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T15:34:53.983

更改处理程序 ( `this`) 的上下文是触发事件的 DOM 元素。这是您已经分配给`$slider`变量的同一个 DOM 元素。

我认为您可能会不必要地使事情复杂化，尽管可能是我不完全理解您要做什么。`view`但是，您应该能够使用内置[事件散列](http://backbonejs.org/#View)获取由主干子元素上的插件触发的事件。尝试以下操作（并[在此处](http://jsfiddle.net/dP8tK/3/)查看小提琴）：

```
var SliderView = Backbone.View.extend({

    // Set the view's el property to existing element in DOM
    el: '#slider-view',

    events: {
        // jQuery UI slider triggers a slidechange event which we can subscribe
        // to using the view's event object 
        'slidechange #slider': 'handleSliderChange'
    },

    render: function() {
        // Worth caching a reference to the element in case we want to refer
        // to it again elsewhere in the view - maybe to clean it up on exit
        this.$slider = this.$el.find('#slider').slider({});
    },

    handleSliderChange: function(e, ui) {
        // Our handler is invoked with the same ui parameter received 
        // by the slider's change handler.
        console.log('Slider changed: ', e, ui.value);
    }
});

// Create and render an instance of the view
new SliderView().render(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T23:32:56.867

您可以使用`_.extend(jQuery.fn, Backbone.Events)`将所有事件方法添加到包装的任何内容中`$()`

看看这个 jsFiddle。 [http://jsfiddle.net/Zct7D/](http://jsfiddle.net/Zct7D/)

它的工作原理与您正在寻找的类似。我看到的最大不足是您必须使用`.trigger`绑定 ( `.on`) 到的同一个引用。

在我使用的示例中。

```
var derpDiv = $("#derp").on("....
derpDiv.trigger("update.... 
```

这样可行。但是这样的事情似乎不起作用。

```
$("#derp").on("update", function() {});

// somewhere else in the code
$("#derp").trigger("update", "Message"); 
```

但是通过一些更多的调整，它可以工作。

# model-view-controller - Angular中等效的应用程序初始化处理程序？

> ID：16040584
> 
> 赞同：1
> 
> 时间：2013-04-16T15:07:55.337
> 
> 标签：model-view-controller, angularjs, controller, initialization

我想在 Angular 中“模拟”全局变量。我还希望能够在 App_Init() 类型的处理程序中初始化这些“全局变量”。这样的初始化将需要调用 $http 来填充这些变量。我希望在Angular“调用”控制器和视图之前完全加载所有“全局变量”，因为控制器将依赖于初始化数据。

Angular中有哪些最佳实践？嵌套控制器？服务？

示例：管理餐厅菜单中项目的应用程序。每个项目将与一个类别（饮料、开胃菜、甜点等）相关联。在Angular“甚至触及”食品的控制器和视图之前，我需要先加载所有这些类别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T16:26:29.273

您是否正在为您的应用程序使用`ng-view`该`$routeProvider`服务？假设您正在或将要考虑，以下是您可以按步骤顺序执行的操作：

1.  构建一个服务，提供对其调用的类别的访问。我的想法是，该服务在第一次调用时会从服务器加载类别，然后缓存加载的数据，因此下次调用缓存副本时会提供缓存副本，以保存对服务器的请求。让我们暂时调用此服务`categories`。
2.  在加载用户请求的视图（以及相应的控制器）之前，使用 object 的`resolve`属性`route`确保对服务的依赖得到解决。`categories`因此，您可以将`categories`服务注入控制器并确保服务始终可用，因为它已被解析。

如果您以前从未`resolve`在配置路由时使用过该属性，这里是[一个示例](https://github.com/johnlindquist/angular-resolve/blob/master/client/js/app.js#L51)和[官方文档中讨论它的部分](http://docs.angularjs.org/api/ng.%24routeProvider)。我建议你通过它们。

此外，为了了解其`resolve`工作原理，您需要熟悉 promise 和 deferred 的概念。如果您不是，[这里](http://www.slideshare.net/domenicdenicola/promises-promises)是该主题的一个很好的起点。[$q](http://docs.angularjs.org/api/ng.%24q)是 AngularJS 的 promise/deferred 实现。

我无法评论上述方法是否是最佳实践，但我知道使用服务来提供对某些数据/函数的访问是一个很好的实践，比如是否存在全局变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-10T20:32:38.547

您可以创建一个服务来从服务器加载配置并将其放在 rootScope 中，在您的控制器中，您可以在您的函数上调用此服务，并在视图中从 ng-init 调用此函数。

看法

```
<mytag ng-init="myFunc()"> 
```

控制器

```
module.controller('MyCtrl', function($scope, myService){
    $scope.myFunc = function(){
        myService();
    }
} 
```

您的服务（初始化应用程序）

```
module.service('myService', function($http, $rootScope){
    //do something
    $rootScope.config = configLoaded;
} 
```

另一个提示

如果您在异步调用方面遇到问题，可以尝试使用

```
var deferred = $q.defer();

//when your call come back
deferred.resolve(yourData);

//and in the last line of function
deferred.promise; 
```

# asp.net - 当 radgrid 处于编辑模式时从只读列获取值（就地）

> ID：16040592
> 
> 赞同：1
> 
> 时间：2013-04-16T15:08:29.983
> 
> 标签：asp.net, telerik, telerik-grid, radgrid

我对 Telerik radgrid 有疑问：

*   我有一个 17 列的 radgrid，只有 6 个是可编辑的（其他有 ReadOnly="true"）

*   一个按钮触发尝试将更改保存到 DB 的方法（不是 radgrid 事件，所以我没有网格参数）

*   我可以从 radgrid.edititems（6 列）中获取值，但我不知道在哪里可以找到其他 11 个不可编辑的列...

这是我的代码

```
protected void HiddenButton_Click(object sender, EventArgs e)
{
    try
    {
        DataTable dt = Oggetti.DT_RDO();

        foreach (GridEditableItem editedItem in dgRDO.EditItems)
        {
            Hashtable newValues = new Hashtable();
            //The GridTableView will fill the values from all editable columns in the hash
            editedItem.OwnerTableView.ExtractValuesFromItem(newValues, editedItem); 
```

进入 newValues 我已经编辑了值，我可以在哪里获得其他值？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T06:01:32.807

请尝试使用以下代码片段。

.ASPX

```
<Columns>
    <telerik:GridBoundColumn DataField="ID" UniqueName="ID" HeaderText="ID">
    </telerik:GridBoundColumn>
    <telerik:GridBoundColumn DataField="Name" UniqueName="Name" HeaderText="Name">
    </telerik:GridBoundColumn>
    <telerik:GridEditCommandColumn>
    </telerik:GridEditCommandColumn>
</Columns> 
```

.ASPX.CS

```
protected void RadGrid1_ItemDataBound(object sender, GridItemEventArgs e)
{
    if (e.Item is GridEditableItem && e.Item.IsInEditMode)
    {
        if (e.Item is GridEditFormInsertItem)
        {
            // insert
        }
        else
        {
            // Edit
            // Please add below code in your page
            GridEditableItem item = e.Item as GridEditableItem;
            item["Name"].Controls[0].Visible = false;
            Label l1 = new Label();
            l1.ID = "l1";
            l1.Text = (item["Name"].Controls[0] as TextBox).Text;
            item["Name"].Controls.Add(l1);
        }
    }
} 
```

注意：我们无法在 ExtractValuesFromItem 方法中获取只读列的值。如果我们将任何列设置为只读，那么它将不会在编辑模式下呈现。这就是我们无法访问此列的原因。

添加上述代码后，您可以在 ExtractValuesFromItem 方法中查看/获取两个列的值。

请查看以下链接以获取更多信息。

[http://www.telerik.com/community/forums/aspnet-ajax/grid/reading-read-only-column-in-ragdrid-update.aspx](http://www.telerik.com/community/forums/aspnet-ajax/grid/reading-read-only-column-in-ragdrid-update.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-27T20:13:09.410

我通过从 GridBoundColumn 中删除 ReadOnly 属性解决了这个问题，而是禁用了数据网格的 ItemDataBound 事件中的可编辑文本框。

ASPX

```
<telerik:GridBoundColumn DataField="BillingRate" HeaderText="Rate" /> 
```

ASPX.VB

```
Protected Sub grdWorkServices_ItemDataBound(sender As Object, e As GridItemEventArgs) Handles grdWorkServices.ItemDataBound
        If TypeOf e.Item Is GridDataItem AndAlso e.Item.IsInEditMode Then
            Dim l_oGridDataItem As GridDataItem = DirectCast(e.Item, GridDataItem)

            Dim l_oTextBox As TextBox = DirectCast(l_oGridDataItem("BillingRate").Controls(0), TextBox)
            l_oTextBox.Enabled = False
        End If
End Sub 
```

# c# - asp net: File Exists 为 UNC 路径返回 false，但在通过 localhost 访问时不返回

> ID：16040593
> 
> 赞同：3
> 
> 时间：2013-04-16T15:08:30.653
> 
> 标签：c#, asp.net

我有一个网站请求用户使用集成 Windows 身份验证通过 IIS 6 进行访问，然后网页的一部分使用以下方法测试文件是否存在：

```
File.Exists(sourcePath) 
```

sourcePath 是用户应该能够访问的 UNC。目前我的问题是，虽然用户可以在网站之外访问此 UNC 路径，但我得到了错误的结果。

现在奇怪的是如果我使用测试成功

```
http://localhost/Site 
```

在托管网站的服务器上，但如果我使用失败

```
http://[machine name]/Site 
```

这感觉像是一个权限问题，但很难确定其原因。

*额外细节：*

*   UNC 路径位于 NAS 服务器上
*   网络配置具有**身份 impersonate="true"**
*   尝试为有权访问应用程序池中的 UNC 的用户添加用户配置。问题没有变化

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T14:24:52.520

您需要确保在模拟 UNC 路径的身份时明确设置用户名和密码，如下所示：

```
<identity impersonate="true" userName="accountname" password="password" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T17:57:29.020

这听起来像是 Kerberos 的问题。我猜想没有为应用程序池运行的身份正确[配置 SPN 。](http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/df979570-81f6-4586-83c6-676bb005b13e.mspx?mfr=true)

# windows - windows启动时如何让tideSDK app运行？

> ID：16040596
> 
> 赞同：1
> 
> 时间：2013-04-16T15:08:34.373
> 
> 标签：windows, startup, tidesdk

windows启动时有没有办法运行tideSDK应用程序？

我需要将它包含在安装包中。

# cakephp-2.0 - 图像未在 cakePHP 2.x 中显示

> ID：16040599
> 
> 赞同：0
> 
> 时间：2013-04-16T15:08:43.763
> 
> 标签：cakephp-2.0

出于某种原因，我无法在 cakePHP 2.x 中查看图像，我在同一台机器上运行了另一个 cakePHP 1.3，并且图像显示完美。

我可以通过完整路径获取图像。

但是，我无法访问

```
http://localhost/app/webroot/img/image.png 
```

如果我使用不存在的图像名称，则会在 Apache 中出现错误。所以它确实以某种方式看到了图像。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-10T14:06:02.510

```
$this -> Html -> image('add_row.jpg',
                        array(
                                'escape'   => false,
                                'width'    => '20',
                                'height'   => '20',
                                'fullBase' => true,
                                'alt'      => 'No Image' 
                             )
                       ) 
```

在选项数组中使用“fullBase”属性，因为它将获得图像链接的绝对路径。它可能会解决您的问题。

# java - 为什么 nextLine() 返回一个空字符串？

> ID：16040601
> 
> 赞同：18
> 
> 时间：2013-04-16T15:08:52.263
> 
> 标签：java

这可能是最简单的事情之一，但我没有看到我做错了什么。

我的输入包括一个带有数字的第一行（要读取的行数），一堆带有数据的行和最后一行只有 \n。我应该处理这个输入并在最后一行之后做一些工作。

我有这个输入：

```
5
test1
test2
test3
test4
test5
      /*this is a \n*/ 
```

为了阅读输入，我有这个代码。

```
int numberRegisters;
String line;

Scanner readInput = new Scanner(System.in);

numberRegisters = readInput.nextInt();

while (!(line = readInput.nextLine()).isEmpty()) {
    System.out.println(line + "<");
} 
```

我的问题是为什么我不打印任何东西？程序读取第一行，然后什么也不做。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-04-16T15:13:48.020

`nextInt`不读取以下换行符，因此第一个`nextLine`（返回[*当前*](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#nextLine())[行](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#nextLine())[的其余部分](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#nextLine())*）将始终返回一个空字符串。*

 *这应该有效：

```
numberRegisters = readInput.nextInt();
readInput.nextLine();
while (!(line = readInput.nextLine()).isEmpty()) {
    System.out.println(line + "<");
} 
```

但我的建议是不要与///等混用`nextLine`，`nextInt`因为`nextDouble`任何`next`试图维护代码的人（包括您自己）可能不知道或忘记了上述内容，因此可能会对上述代码感到有些困惑。

所以我建议：

```
numberRegisters = Integer.parseInt(readInput.nextLine());

while (!(line = readInput.nextLine()).isEmpty()) {
    System.out.println(line + "<");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T15:13:55.373

我想我以前见过这个问题。我认为你需要添加另一个`readInput.nextLine()`，否则你只是在结尾之间阅读`5`，`\n`之后

```
int numberRegisters;
String line;

Scanner readInput = new Scanner(System.in);

numberRegisters = readInput.nextInt();
readInput.nextLine();

while (!(line = readInput.nextLine()).isEmpty()) {
    System.out.println(line + "<");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T15:21:41.563

实际上它并没有完全回答这个问题（为什么你的代码不起作用），但你可以使用下面的代码。

```
int n = Integer.parseInt(readInput.readLine());
for(int i = 0; i < n; ++i) {
    String line = readInput().readLine();
    // use line here
} 
```

至于我，它更具可读性，甚至可以在测试用例不正确的极少数情况下节省您的时间（文件末尾有额外信息）

顺便说一句，您似乎参加了一些编程比赛。请注意，扫描仪输入大量数据可能会很慢。您可以考虑使用`BufferedReader`with possible `StringTokenizer`（此任务中不需要）*

# matlab - MATLAB中RGB图像的强度

> ID：16040602
> 
> 赞同：1
> 
> 时间：2013-04-16T15:08:53.367
> 
> 标签：matlab, image-processing

![在此处输入图像描述](https://i.stack.imgur.com/c7knE.png)

我有血管的 RGB 图像。为了区分两种血管类型（动脉和静脉），我需要计算圆形 ROI 中 RGB 图像的强度。静脉（V）呈深红色，而动脉呈浅红色。不是计算不同通道（R、G 和 B）中的强度，而是可以计算 RGB 图像中的强度吗？

我仅以以下方式在一个通道（例如绿色通道）中进行了强度计算：

```
 image=imread('vesselAV.jpg');
 t = 0:pi/20:2*pi;

 xi = R0*cos(t)+x; % where x , y are coordinate of centre of circular roi   
                         % (marked  in image)
yi = R0*sin(t)+y;

g=image(:,:,2);

roimask = poly2mask(double(xi),double(yi), size(g,1),size(g,2));

pr_gc = find(roimask);

Intensity_green_roi_V =(g(pr_gc)); % intensity in roi for vein 
```

同样，我计算了动脉的 roi 强度....

但是如何计算 RGB 图像中的强度值...？？？？？？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T15:14:11.030

本质上，您希望将像素转换为灰度值以获得单一强度。有很多不同的方法，[这个博客列出了其中的三种，](http://www.johndcook.com/blog/2009/08/24/algorithms-convert-color-grayscale/)所以我建议你阅读一下。但是，如果您只是想要一些快速的东西，我会倾向于简单地将整个图像转换为灰度并使用该值：

```
grayIm = rgb2gray(image); 
```

该`rgb2gray`函数使用图像的亮度（HSV 中的 V），这是博客文章中的第三个示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T16:25:05.510

我可能误解了这个问题。如果这个答案被关闭，请原谅我。在像素 i,j，image(i,j,:) 是一个三元素向量，具有三个通道 R、G 和 B 的强度值。如果您不想使用三元素向量，那么 I建议使用 R 强度，因为最大的偏差似乎出现在那里。即使用图像（：，：，1）。

如果您正在寻找 3 维“典型”强度，那么通常会计算感兴趣像素的平均值。

比如说，`mask`您的感兴趣区域是否表示为 1 和 0 的 2D 矩阵，那么这将计算您感兴趣区域的平均 3D 强度：

```
sum(sum(double(image).*repmat(mask,[1 1 3]),2),1) / sum(reshape(mask,[],1))) 
```

现在，您可以使用此平均强度和一些欧几里德距离度量来确定所需的像素是否包含在您的“静脉”定义中。

还有很多其他方法可以解决这个分割问题，但这似乎是你要问的那个。

# xslt - XSL 计数前面的节点

> ID：16040604
> 
> 赞同：0
> 
> 时间：2013-04-16T15:09:08.607
> 
> 标签：xslt, count, nodes

我不知道如何计算具有给定名称的节点的出现次数。

这是我的结构：

```
<xsl:variable name="pageType" select="/verticaldata/context/querystring/parameter[@name = 'type']"/>

<xsl:template match="/">
    <xsl:if test="number(/verticaldata/contents/@totalcount) > 0">
        <xsl:apply-templates select="verticaldata/contents/content"/>
    </xsl:if>
</xsl:template>

<xsl:template match="content">
    <xsl:variable name="itemType" select="contentdata/type">
    <xsl:if test="$pageType = $itemType">
        <xsl:call-template name="displayItem"/>
    </xsl:if>
</xsl:template>

<xsl:template name="displayItem">
    <!-- Here I want to show the item number in the id -->
    <div class="item">
        <xsl:attribute name="id">
            <xsl:value-of select="count(preceding-sibling::content)"/>
        </xsl:attribute>

        <!-- Item renders here -->

    </div>
</xsl:template> 
```

我已经尝试过 position() 和 count(preceding-sibling::content) 但它们都显示了总数而不是通过“类型”检查的项目数。如何获取之前创建的“displayItem”节点的计数？

这可能吗？

//丹尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T07:15:56.333

我认为您需要做的是更改您的先前兄弟代码以通过 xpath 表达式检查内容类型

```
<xsl:value-of select="count(preceding-sibling::content[contentdata/type = $pageType])"/> 
```

事实上，您可以在**xsl:apply-templates中使用相同的主体**

```
<xsl:apply-templates select="verticaldata/contents/content[contentdata/type = $pageType]"/> 
```

这将允许您取消匹配模板中的**xsl:if**，这反过来意味着您也可以取消对 displayItem 命名模板的需要

```
<xsl:variable name="pageType" select="/verticaldata/context/querystring/parameter[@name = 'type']"/>

<xsl:template match="/">
    <xsl:if test="number(/verticaldata/contents/@totalcount) > 0">
        <xsl:apply-templates select="verticaldata/contents/content[contentdata/type = $pageType]"/>
    </xsl:if>
</xsl:template>

<xsl:template match="content">
    <div class="item">
        <xsl:attribute name="id">
            <xsl:value-of select="count(preceding-sibling::content[contentdata/type = $pageType])"/>
        </xsl:attribute>
          <!-- Item renders here -->
    </div>
</xsl:template> 
```

顺便说一句，您可以使用属性值模板在此处设置 div 的 Id

```
<div class="item" id="{count(preceding-sibling::content[contentdata/type = $pageType])}"> 
```

花括号表示要计算的表达式，而不是字面输出。

# objective-c - 将变量设置为 x，在一个类中除外，它是 y

> ID：16040608
> 
> 赞同：0
> 
> 时间：2013-04-16T15:09:19.313
> 
> 标签：objective-c

我想在我的所有类中定义一个变量并将其设置为值 x，但在给定的类中除外。

因此，我已添加到文件中`MyApp-Prefix.pch`：

```
int ddLogLevel = LOG_LEVEL_VERBOSE; 
```

现在，在给定的类中，我想更改此变量。我应该怎么办 ？我应该把新命令放在哪里？在`.m`? 之前`@implementation`？有/没有`const`和/或`static`和/或`type`？？

* * *

PS：如您所见，我对`extern`/`const`的东西一无所知。如果有人知道一个好的和清晰的参考，对于一个不懂C的新手，我会接受它！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T16:40:29.277

我认为`ddLogLevel`日志系统 cocoalumberjack 的日志级别。相反，为你的类“覆盖”（没有这样的事情，因为它是一个全局变量），你应该做他们所谓的[Fine Grained Logging](https://github.com/robbiehanson/CocoaLumberjack/wiki/FineGrainedLogging)。也就是说，使用位掩码中的下一位定义日志，然后将全局常量设置为包含或排除您的标志的掩码的按位组合。在链接页面上进一步解释。例子：

添加这些定义

```
#define LOG_FLAG_FOOD_TIMER    (1 << 4)  // 0...0010000
#define LOG_FOOD_TIMER  (ddLogLevel & LOG_FLAG_FOOD_TIMER)
#define DDLogFoodTimer(frmt, ...)   ASYNC_LOG_OBJC_MAYBE(ddLogLevel, LOG_FLAG_FOOD_TIMER,  0, frmt, ##__VA_ARGS__) 
```

然后在你的类中使用这个宏作为日志语句：

```
DDLogFoodTimer(@"blah"); 
```

并将全局设置为：

```
static const int ddLogLevel = LOG_LEVEL_WARN | LOG_FLAG_FOOD_TIMER; 
```

* * *

在 C 和 Objective-C 中，**const**关键字创建一个只读变量。关键字 const 适用于紧靠其左侧的任何内容。如果它的左边没有任何东西，它适用于它右边的任何东西。例子：

```
// a modifiable pointer to a constant integer (its value can't be modified). 
const int * i;

// Constant pointer to constant integer. 
const int const * i; 
```

**extern**表示变量在别处定义。像这样定义全局变量是一种常见的风格：

```
// header file (outside the class definition)
extern NSString* PREFS_MY_CONSTANT;

// implementation file (outside the class definition)
NSString* PREFS_MY_CONSTANT = @"prefs_my_constant"; 
```

# python - Twitter 硬编码登录详细信息

> ID：16040616
> 
> 赞同：0
> 
> 时间：2013-04-16T15:09:46.173
> 
> 标签：python, node.js, twitter, oauth

我想做的是如下：

```
t_username = 'XXXXX';
t_password = 'XXXXX';
app_key = 'XXXXX';
app_secret = 'XXXXX';

function login(uname, pword, key, secret) {
  /* Returns something like: [access_token, token_secret] */
}

toks = login(t_username, t_password, app_key, app_secret);

/* Use the 'toks' to make API calls */ 
```

我尝试查看一些示例代码，但它们处理 URL 和重定向等，但它们与浏览器应用程序相关，我正在尝试构建类似 CLI 应用程序的东西。我不知道怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T15:51:29.367

您可能想要的是[单用户 OAuth](https://dev.twitter.com/docs/auth/oauth/single-user-with-examples)。这非常适合在命令行应用程序（例如您的应用程序）中使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T05:23:03.810

刚刚想通了。在应用程序主页的末尾（获取 app_key 和 app_secret），有一个按钮可以创建访问令牌和令牌密码。只需单击它，您的 access_token 和 token_secret 就会生成。只需将它们直接复制粘贴到您的应用程序中即可！

# css - 使用窗口调整大小的 DIV 居中

> ID：16040617
> 
> 赞同：0
> 
> 时间：2013-04-16T15:09:49.067
> 
> 标签：css, html, centering

我在这个话题上已经筋疲力尽了，我只是觉得它比看起来更简单。该站点：[http](http://ryanfeerer.com/) ://ryanfeerer.com/如果您查看内容部分，当窗口变小或变大时，它会保持居中对齐。我正在创建一个在 DW CS6 中非常相似的站点，并且我设置了平铺背景并创建了一个 DIV 以将鼠标悬停在背景上。基本上就像引用的网站一样。

没有一个简单的CSS代码可以做到这一点吗？这似乎是一个如此简单的概念哈。

提前感谢，如果这已被多次回答，非常抱歉。我试图做我的研究，但无济于事。

内特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T15:17:33.043

我创建中心 div 的方法是使用左右百分比对齐它。这样它会响应浏览器的大小。例子

```
#content{
left:15%;
right:15%;
top:0px;
bottom:0px;
} 
```

尽管这意味着当浏览器窗口非常薄时，您的内容会被压扁，因为它将始终保持两边的 15%。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T15:11:55.600

编辑：啊，我误解了你在问什么。我现在看到，当您调整页面大小时，所有内容都会缩小，包括图像。我会研究一个 jQuery/javascript 解决方案。

# javascript - 使用 ON 的 Jquery Waypoints

> ID：16040619
> 
> 赞同：3
> 
> 时间：2013-04-16T15:09:56.613
> 
> 标签：javascript, jquery, jquery-waypoints

我陷入了使用 ajax 将航路点注入回 dom 的情况。这些新元素不会触发在 dom 更改之前创建的现有航路点。

有没有办法使用带有航点的 jquerys On 事件？

我正在使用航点 2.0.2 [http://imakewebthings.com/jquery-waypoints/](http://imakewebthings.com/jquery-waypoints/) 我正在尝试做的一个示例是，重新插入航点，该航点仍然可以使用应用于 .waypoint 指定的元素的航点方法

我遇到的问题是，在我插入要作为航点的新 div 后，它们不会触发。

当您在 dom 加载一次后动态插入一个附加了 click 函数的元素时，会发生类似的问题，您不能使用 .click，而是使用 .on("click, "element", function()。

使其工作的一种方法是使用以下方法在航路点内重新创建航路点：

(".nacho").waypoint(函数(方向)

除了这在我的情况下不起作用的原因是所有先前触发或滚动过去的航点都会触发。

```
<div class="nacho">

</div>
<script>
$(document).ready(function(){
    $("body").on("waypoint", ".nacho", function(event){

    //alert("test");

    });

    $(".nacho").waypoint(function(direction){
    alert("test");
        $("body").append("<div class=nacho>html to force the window down</div>");
    } , { offset: "bottom-in-view" });

});
</script> 
```

我尝试将航点 nacho 重新插入 dom，这样做之后，即使在此 ON 的情况下，航点也不会触发。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T15:57:27.407

更新 DOM 后，发出刷新：

```
$.waypoints('refresh') 
```

文档：http: [//imakewebthings.com/jquery-waypoints/#docs](http://imakewebthings.com/jquery-waypoints/#docs)

$.waypoints('刷新')

这将强制根据其偏移选项重新计算每个航点的触发点。每当调整窗口大小或添加新航点时，都会自动调用此方法。如果您的项目正在更改 DOM 或页面布局而没有执行这些操作之一，您可能需要手动调用它。

# c# - MSBuild 自定义规则

> ID：16040624
> 
> 赞同：2
> 
> 时间：2013-04-16T15:10:12.997
> 
> 标签：c#, .net, sharepoint, msbuild

当 MSBuild 发生时，如果 sharepoint 项目（来自该项目的 WSP）针对 GAC，我希望它失败。

IE。就在打包之前，我想检查该包所针对的 feature.xml 或任何其他 .xml 文件。

有哪些可能的方法来实现这一目标？我没有任何经验。在自定义 MSBuild 任务中。这是可行的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T15:57:12.823

我的建议如下：

创建一个程序，接受项目的路径作为参数，并针对您自己定义的错误对其进行分析。当您的程序发现并出错时，它只会以下列格式之一向控制台输出错误：

```
error: <message>
<filename>: error: <message>
<filename> (<line>): error: <message>
<filename> (<line>,<column>): error: <message> 
```

您可以将“错误”一词替换为“警告”。当您使用这种特定格式时，当您使用 VS 进行编译时，错误（或警告）将出现在 Visual Studios 错误列表中。传递文件名和行将启用“双击跳转到错误”功能。

接下来，您打开项目文件并添加 AfterBuild 目标。在此目标中，您使用 Run 命令调用您自己的应用程序并传递您的项目路径。确保将“ContinueOnError”属性设置为 false。

现在，每当您构建自定义目标时，都会触发。您的自定义目标将调用您的应用程序，该应用程序将分析您的项目。当您的应用程序输出错误时，MSBuild 将拾取它并取消继续并将构建标记为失败。

您也可以为此使用 MSBuild 任务，但我建议您不要这样做。msbuild 任务将加载到 Visual Studio 的 AppDomain，锁定程序集。当您想要替换它时（例如，因为您更改了分析规则），您首先必须退出 Visual Studio 以解锁文件。当使用源代码控制系统时，这真的很烦人，人们只想更新当前文件而不担心程序集是否被锁定。

我通过分析我们的一个项目作为构建的一部分，以及为我们自己的 Web 服务创建代理客户端作为构建的一部分，非常成功地运行了这个原则。

# html - SVG foreignObject 和绝对定位

> ID：16040631
> 
> 赞同：9
> 
> 时间：2013-04-16T15:10:36.273
> 
> 标签：html, css, svg

当我在`svg:foreignObject`.

我制作了这个[jsfiddle](http://jsfiddle.net/FS654/1/)来演示我的问题。

`div.wrapper`应与 中的 位于同一位置，`rect`并且`svg:g`此 div 中的段落应按照 css 中的描述定位。

我在以下浏览器（Mac）中遇到问题：

*   Safari 6.0.3
*   铬 26.0.1410.63
*   傲游4.0.3.6000。

它在 Firefox 19.0.2 中可以正常工作。

我的代码有问题吗？有谁知道如何解决这个问题？

**更新**

我发现[了这个错误](https://bugs.webkit.org/show_bug.cgi?id=23113)，这可能是问题所在。看起来webkit`foreignObject`的[问题跟踪器上有很多问题。](https://bugs.webkit.org/buglist.cgi?quicksearch=foreignobject)

如果有人有如何将段落放置在 div 角落的解决方法，我将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-02-23T06:01:31.640

自从这篇文章和错误持续很久以来。

我实际上发现，如果您`x="50" Y="50"`在元素中使用属性，`foreignObject`它在 Chrome 中会按预期工作。

我知道它与 不一样`transform`，但至少您可以正确定位您的内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-12-19T08:37:50.233

```
<foreignObject width="200px" height="200px">
    <div xmlns="http://www.w3.org/1999/xhtml" class="wrapper" style="position: fixed">
        <p id="topleft">topleft</p>
        <p id="topright">topright</p>
        <p id="middle">middle</p>
        <p id="bottomleft">bottomleft</p>
        <p id="bottomright">bottomright</p>
    </div>
   </foreignObject> 
```

**位置：固定**

# python - Python，将东西写入 json

> ID：16040635
> 
> 赞同：1
> 
> 时间：2013-04-16T15:10:37.833
> 
> 标签：python, json, python-3.x

我就是这种情况。我有 2 个列表和两个整数，我需要将它们全部放入一个 JSON 文件中，以便我可以将它传递给另一个 Python 程序。我希望最终的文件/结构类似于：

```
 File:{
        numbers : [1,2,3]
        strings : ["a", "b" , "c"]
        x : 0
        y : 0
    } 
```

有没有办法以自动化的方式做到这一点，而无需明确地将其全部写成一个巨大的字符串？我假设它使用转储，但我不完全确定如何正确使用它以及它将如何合并变量标签（即数字、字符串）或如何将每一行添加到单个 JSON 结构中。

```
import json
n = [1, 2, 3]
s = ["a", "b" , "c"]
x = 0
y = 0
nums = json.dumps(n,)
strings = json.dumps(s)
print(nums) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T15:11:53.193

把所有东西都放在一个字典里：

```
json.dumps({'numbers': n, 'strings': s, 'x': x, 'y': y}) 
```

结果：

```
>>> json.dumps({'numbers': n, 'strings': s, 'x': x, 'y': y})
'{"numbers": [1, 2, 3], "y": 0, "x": 0, "strings": ["a", "b", "c"]}' 
```

请注意，JSON 对象和 Python 字典都没有特定的顺序。

# javascript - Javascript document["someid"].src 在 Firefox 中有效，但在其他浏览器中无效

> ID：16040638
> 
> 赞同：0
> 
> 时间：2013-04-16T15:10:53.397
> 
> 标签：javascript, html, internet-explorer, google-chrome, firefox

我正在尝试做非常简单的 Javascript 实现。

它与不同文本的 onMouseOver 事件一起改变一个图像。

它可以在 Firefox 上完美运行，但不能在任何其他浏览器上运行。

HTML

```
<div id="foofoo1" onMouseover="imagehover(this);">display image1</div>
<div id="foofoo2" onMouseover="imagehover(this);">display image2</div>
<img id="foo" src="dir/images/foofoo1.jpg"> 
```

Javascript

```
function imagehover(idfoo){
  document["foo"].src = "dir/images/"+idfoo.id+".jpg";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T15:13:32.610

无论如何，这是一种非标准的方式。

```
document.getElementById("foo").src = "dir/images/"+idfoo.id+".jpg"; 
```

这是正确的做法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T15:15:38.360

使用`setAttribute` [参考](https://developer.mozilla.org/en-US/docs/DOM/element.setAttribute)

```
document.getElementById("foo").setAttribute('src',"dir/images/"+idfoo.id+".jpg"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T15:12:44.980

工作`document.getElementById("foo")`（而不是`document["foo"]`）

# entity-framework - .NET 4 上的 EF 5 “DatabaseGeneratedOption”类型存在于两者中

> ID：16040639
> 
> 赞同：2
> 
> 时间：2013-04-16T15:10:55.147
> 
> 标签：entity-framework, .net-4.0

最近我在我的一张表中添加了标识列：

```
this.Property(t => t.GatewayId)
            .HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity); 
```

我试过这个答案：[https](https://stackoverflow.com/a/10552444/942637) ://stackoverflow.com/a/10552444/942637 。但是当我浏览我的网站时仍然出现以下错误：

```
Compiler Error Message: CS0433: The type
'System.ComponentModel.DataAnnotations.Schema.DatabaseGeneratedOption' exists in both
'c:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\root\09b33b19\15db599\assembly\dl3\626c4b05\eddd55c2_9c3ace01\EntityFramework.DLL'
and
'c:\Windows\Microsoft.NET\assembly\GAC_MSIL\System.ComponentModel.DataAnnotations\v4.0_4.0.0.0__31bf3856ad364e35\System.ComponentModel.DataAnnotations.dll' 
```

我正在使用 .NET 4 和 EF 5。当然，我的项目是指 EF 4.4，因为 .NET 4 支持的最新版本是 EF 4.4。我的网站在没有上述线路的情况下运行良好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-11-09T00:14:30.973

安装 EntityFrameWork 对我有用。`VS -> Tools -> NuGet Package Manager -> Package Manager Console`，在包管理器控制台中输入：

![](https://i.stack.imgur.com/DGz5M.png)

**安装包 EntityFramework（或最新版本 6.1.3）**

![](https://i.stack.imgur.com/EgLQM.png)

# java - 检测输入流是否放气

> ID：16040640
> 
> 赞同：2
> 
> 时间：2013-04-16T15:10:57.193
> 
> 标签：java

我需要并处理这种情况，我已经阅读了很多，但我没有找到任何关于它的示例或文本。我有一个服务器套接字，它接收来自 2 个客户端的数据：a）来自发送泄气流的客户端。b) 从发送 ASCII 流的客户端。

a) 接收放气流：

```
inflater = new InflaterInputStream(clientSocket.getInputStream());
bout = new ByteArrayOutputStream(3025);
int b;
while ((b = inflater.read()) != -1) {
    bout.write(b);
}
strMessage = new String(bout.toByteArray()); 
```

b) 从 ASCII 流接收：

```
bufferEnt = new char[3025];
Arrays.fill(bufferEnt,' ');
input = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));
intLongBuffer = input.read(bufferEnt);
strMessage = new String(bufferEnt).trim(); 
```

在每种情况下，此代码都可以正常工作，并且变量`strMessage`具有正确的信息，但是我需要确定流何时放气，何时放气，因此我可以将正确的代码应用于每种情况，这是我的大问题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T16:28:28.527

您可以将客户端套接字输入流包装成 a `BufferedInputStream`，然后将缓冲流包装成 a `InflaterInputStream`，然后尝试从充气流中读取。如果出现错误，则忘记充气流，倒回缓冲流，然后直接从缓冲流中读取。您必须使用缓冲流的`mark()`和`reset()`函数来倒带流，并且您可能必须尝试`mark()`找出要传递给它的值。类似于以下内容：

```
BufferedInputStream bis = new BufferedInputStream(clientSocket.getInputStream());
bis.mark(1024); // experiment to find the correct value here
InflaterInputStream iis = new InflaterInputStream(bis);
try {
    ... // Process the inflated stream
} catch (ZipException ze) {
    // It is not a ZIP stream. Try to process as text
    bis.reset();
    ... // Process the text stream
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T15:17:58.800

您可以将字节读入缓冲区，然后尝试膨胀它们

```
InflaterInputStream iis = new InflaterInputStream(new ByteArrayInputStream(buf));
... 
```

如果它不是一个放气的流，你会得到一个异常，然后保持字节不变

# php - 如何从另一个 php 页面更改一个页面的标签文本？

> ID：16040646
> 
> 赞同：1
> 
> 时间：2013-04-16T15:11:05.107
> 
> 标签：php, javascript, html, dom

问题是：我正在构建一个简单的登录 php 页面，用户应该输入用户名和密码，然后单击“登录”按钮。此按钮将输入的值提交到另一个处理数据库并确保用户已注册的 php 页面。现在如果他/她没有注册，则页面返回登录页面，但在此之前，它会更改一些标签的文本以通知用户输入的用户名或密码错误。

我的问题是：第二个 php 页面无权访问第一个的元素！

这是我到目前为止使用的代码！第二个 php 页面：称为 LoginSubmit.php：

```
if($row = mysqli_fetch_array($result))
{
    echo "<meta http-equiv='refresh' content='0;URL=../Home.php'>";
}
else
{
    echo"<script type='text/javascript'>";
echo"parent.document.getElementById('FailureText').innerHTML = 'Yours user name or password are wrong!!';";
echo "</script>";
echo "<meta http-equiv='refresh' content='0;URL=../Login.php'>";
} 
```

在第一页（称为 Login.php），标签以如下形式定义：

```
<td align="center" class="LiteralProb" colspan="2" style="color:Red;">
    <label ID="FailureText"></label>
</td> 
```

它是空的，似乎不存在标签，但是当出现登录错误时，应该会在其上显示给用户的消息！

任何帮助，请！:) ??

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T15:17:16.483

将该值作为某种“*闪现消息*”存储在会话中。`LoginSubmit.php`使用中：

```
// at the top of your script
session_start();

// when you know an error occurred
$_SESSION['failure_message'] = 'Yours user name or password are wrong!!'; 
```

在另一页上使用：

```
// at the top of your script
session_start();

// in your HTML part
<label ID="FailureText">
    <?php print ( isset($_SESSION['failure_message']) ? $_SESSION['failure_message'] : '' ); ?>
</label>

// at the bottom of your script remove the value from the session again
// to avoid that it's displayed twice
unset($_SESSION['failure_message']); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T15:17:18.357

您的登录页面绝非简单;-)

这个怎么样？

```
if (!$validLogin) {
    header('Location: http://www.example.com/login?err');
    exit;
} 
```

... 和：

```
<? if( isset($_GET['err']) ){ ?>
    <div>Invalid username/password</div>
<? } ?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T15:27:34.960

这可以通过一些不同的方式来完成：

1-您可以使用会话变量来存储要在 php 脚本之间共享的值：

```
session_start();
$_SESSION['val1']=$value1; //set the value 
```

你像这样检索它：

```
//receive on the other script
session_start();
$value1=$_SESSION['val1']; 
```

2- 在将用户发送到登录脚本时，您可以使用 GET（URL）传递变量。

```
header("location: first_script_url?error=some_error_message"); 
```

您可以在登录脚本上这样检索它：

```
$err_msg=$_GET['error']; 
```

3-您可以使用 AJAX 进行登录过程，因此您无需将用户从一个脚本重定向到另一个脚本，而是调用第二个脚本，并根据第二个脚本返回值告诉用户是否有任何错误：

使用 Jquery，如果我们要传递用户信息，最好使用 POST，也最好使用 HTTPS（无论您选择哪种方法，都应该这样做），或者至少对密码使用加密功能（这不是 100 ％ 安全的）：

```
$.post("second_url.php", {user: username, pass: password}), 
function(data){
     //data contains anything second_url.php echoed. So you want to echo a 1 for example if everything went ok.
     if(data == 1){
           //OK
     }else{
           //Something went wrong, show the user some error.
     }
}); 
```

用户永远不会离开第一个脚本，因此您在 javascript/Jquery 中拥有所有变量。

# csv - 将具有相似行和不同列的 CSV 合二为一

> ID：16040647
> 
> 赞同：1
> 
> 时间：2013-04-16T15:11:08.990
> 
> 标签：csv, vbscript

我有多个从数据库查询生成的 csv 文件

\n 用于下面文本中的换行符

收到格式-

**月1.csv**

ID,User,Year,Month1, Month2,Month3,...,MonthN \n 2,User2,2012,12 \n 1,User1,2011,5 \n 4,User5,2014,56 \n 3,User4, 2013,34 \n

**Month2.csv** ID,User,Year,Month1, Month2,Month3,...,MonthN \n 1,User1,2011,10 \n 2,User2,2012,66 \n 3,User4,2013,40 \n 4 ,User5,2014,26 \n

**Month3.csv** ID,User,Year,Month1, Month2,Month3,...,MonthN \n 4,User5,2014,67 \n 1,User1,2011,12 \n 3,User4,2013,23 \n 2 ,用户2,2012,11 \n

这里 col1,Col2 和 Col3 在每个 CSV 中是相同的，但行顺序不一样。

我将所有这些 CSV 文件放在一个文件夹中，并将所需格式的 csv 放在同一个文件夹中，名称不同，ID、用户、年、月 1、月 2、月 3、...、月 N 中的数据可用 col1（ID）、Col2（用户）和Col3(年)

我想创建特定格式的 CSV 文件，如下所示 -

所需格式 - ID,User,Year,Month1, Month2,Month3,...,MonthN \n 1,User1,2011,5,10,12,...,50 \n 2,User2,2012,12,66 ,11,...,12 \n 3,User4,2013,34,40,23,...,13 \n 4,User5,2014,56,26,67,...,52 \n

我想要 VBS 中的解决方案，这样我们就可以在任何 Windows 机器上执行它，而无需任何额外的软件。谁能帮我解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T15:29:16.867

使用 filesystems 对象打开每个 CSV 并遍历它们，忽略第一行。

然后，您可以使用“，”作为分隔符来使用拆分。

如果您需要比较前 3 个字段并且只输出唯一项目，那么您可以使用字典对象。一旦您的刺痛被拆分，将所有 3 个字段添加到一个字符串中，检查它是否在您的字典对象中，如果不写出来并添加到字典中。如果是忽略并继续。

希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T18:42:12.557

将第一个 CSV 复制到所需的新文件名。从彼此的 CSV 中读取内容并将其拆分为`vbLf`. 跳过数组的第一个字段（包含标题）并将其余部分附加到目标 CSV。有点像这样：

```
Set fso = CreateObject("Scripting.FileSystemObject")

isFirst = True
For Each f In fso.GetFolder("C:\folder").Files
  If isFirst Then
    f.Copy "AllMonths.csv"
    isFirst = False
  Else
    Set csv = fso.OpenTextFile("AllMonths.csv", 8)
    lines = Split(f.OpenAsTextStream.ReadAll, vbLf)
    For i = 1 To UBound(lines)
      csv.Write lines(i) & vbLf
    Next
    csv.Close
  End If
Next 
```

# sql-server - 从 XML 列中读取 XML 元素

> ID：16040648
> 
> 赞同：1
> 
> 时间：2013-04-16T15:11:09.070
> 
> 标签：sql-server, tsql

我`XML column`在一个表中有一个值，比如

```
<m lingua="1">  
  <coloriVini>  
    <i n="8" />  
    <i n="2" />  
    <i n="3" />  
    <i n="4" />  
    <i n="5" />  
    <i n="6" />  
    <i n="7" />  
  </coloriVini>  
</m> 
```

我需要`/m/coloriVini/i/@n`与另一个表中的值进行连接，并将显示逗号分隔，但这我可以处理

一个想法是创建一个变量并存储 XML，但我问你是否可以轻松地做到这一点

我试过了

```
SELECT [L].[nome]
, p.value('./coloriVini', 'xml')
FROM [dbo].[contatto] C
CROSS APPLY [xmlMailing].nodes('m') t(p)
LEFT JOIN [dbo].[lingua] L ON p.value('./@lingua', 'int') = L.id 
```

我知道`p.value('./coloriVini', 'xml')`或`p.value('./coloriVini', 'nvarchar(200)')`不起作用，你能告诉我我做错了什么吗
谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T06:20:16.077

试试这个——

```
DECLARE @XML XML
SELECT @XML = 
'<m lingua="1">  
  <coloriVini>  
    <i n="8" />  
    <i n="2" />  
    <i n="3" />  
    <i n="4" />  
    <i n="5" />  
    <i n="6" />  
    <i n="7" />  
  </coloriVini>  
</m>'

DECLARE @lingua TABLE
(
      id INT
    , nome CHAR(1)
)

INSERT INTO @lingua (id, nome)
VALUES 
    (8, '8'),
    (2, '2')

SELECT 
      l.nome
    , x.coloriVini
FROM (
    SELECT 
          id = t.p.value('@n', 'int') 
        , coloriVini = t.p.query('../.')
    FROM @XML.nodes('/m/coloriVini/i') t(p)
) x
JOIN @lingua l ON l.id = x.id 
```

# iframe - 让 iframe 监听传入的标记

> ID：16040649
> 
> 赞同：0
> 
> 时间：2013-04-16T15:11:15.027
> 
> 标签：iframe

我有一个嵌入 iframe 的页面，几乎完全是空的。父页面用于生成 HTML 标记块并将其全部附加到一个 JavaScript var, `output`，我想将其动态地输入 iframe。

如何在父页面和 iframe 之间保持实时连接，以便它自动侦听新标记并显示它？

# java - 创建java进程以在当前jar中执行类

> ID：16040651
> 
> 赞同：1
> 
> 时间：2013-04-16T15:11:20.087
> 
> 标签：java, process, jar, classpath, processbuilder

所以希望标题涵盖了 jist，我知道围绕这种事情有多个帖子，我特别遇到的问题是如何为我当前正在运行的包含该类的 jar 设置类路径。

即，我使用 Maven 程序集插件打包了我的 jar，其中所有依赖项都在其中爆炸。所以我只是想创建一个子进程来执行我的 jar 中存在的依赖类之一，从我的 jar 中。如果那可能？

感谢下面的帖子，这是解决方案：

```
URL baseUrl = getClass().getProtectionDomain().getCodeSource().getLocation();
                String myPath = (new File(baseUrl.toURI())).getCanonicalPath();

ProcessBuilder pb = new ProcessBuilder("javaw", "-cp", myPath,
 "jp.vmi.selenium.selenese.Main", config.getSuite().getAbsolutePath());

pb.redirectErrorStream(true);

try
{
    Process proc = pb.start();

    InputStream is = proc.getInputStream();
    BufferedInputStream bis = new BufferedInputStream(is);

    int c;

    while ((c = bis.read()) != -1)
    {
        System.out.write(c);
    }

    int exit = proc.waitFor(); 
```

任何指向正确方向的指针将不胜感激。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T15:59:35.697

好的，如果你绝对必须，你可以试试这个片段来找到你的“当前”JAR：

```
try
    {
        URL baseUrl = JavaApplication2.class.getProtectionDomain().getCodeSource().getLocation();
        String myPath = (new File(baseUrl.toURI())).getCanonicalPath();
        System.out.println("Path is " + myPath);
    }
    catch (IOException ex)
    {
       // Deal with exception 
    }
    catch (URISyntaxException ex)
    {
       // Deal with exception 
    } 
```

使用应用程序/JAR 中的任何类代替“JavaApplication2”。（或者只是 getClass()，也应该在非静态上下文中工作）

# microsoft-sync-framework - 在客户端下载已删除的行以仅下载同步框架

> ID：16040658
> 
> 赞同：0
> 
> 时间：2013-04-16T15:11:48.793
> 
> 标签：microsoft-sync-framework

当同步模式设置为仅下载时，同步框架中是否可以下载已删除的行？实际上，我正在开发一个应用程序，最初只在客户端下载很少的设置表。但是，当从这些表中删除行时，需要将它们下载回客户端。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T05:54:44.857

Sync Framework 中的增量同步基于自上次同步以来发生的变化。

您的目标已删除行，但源没有更改。源上未记录任何更改，同步时未检测到更改。而且您的消息来源也不知道目的地发生了什么。

假设您对接收相同更新的其他客户端没有问题，您可以对源进行虚拟更新（例如，update tableX set col1=col1）。这应该将行标记为已更改，并将在下一次同步时拾取。

同步很可能会引发冲突，因为它获得了更新，但客户端上没有要更新的行。当它发生时，将冲突解决设置为 Retry with Force Write。

# java - 获取 DIV 值，CSS 值 - WebDriver (Selenium 2) - JAVA

> ID：16040659
> 
> 赞同：0
> 
> 时间：2013-04-16T15:11:51.650
> 
> 标签：java, selenium, webdriver

嗨，我有这个 html 代码：

```
<div id="idvalue" value="56"></div> 
```

我想获得价值'56'。我怎样才能做到这一点？我试过这个，但它返回null。

```
System.out.println(driver.findElement(By.id("idvalue")).getAttribute("value")); 
```

我正在使用 Selenium 2 请帮助..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T16:27:07.367

`value`不是`div`元素的有效属性。你不应该对这不起作用感到惊讶......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T10:00:20.247

did you tried this way

```
JavascriptExecutor js = (JavascriptExecutor)driver;
Object val=js.executeScript("return document.getElementById('idvalue').getAttribute('value');");

System.out.println("Value attr value: " + val); 
```

output: Value attr value: 56

# ruby-on-rails - Nokogiri 和同时

> ID：16040668
> 
> 赞同：0
> 
> 时间：2013-04-16T15:12:06.510
> 
> 标签：ruby-on-rails, ruby, xml, while-loop, nokogiri

我正在尝试在我的 Rails 项目中使用 Nokogiri 解析 XML。

这是我的控制器：

```
def landeplatz
    require 'nokogiri'
    doc = Nokogiri::XML(File.open("#{Rails.root}/public/moredata.xml"))
    @links = doc.xpath('//markers/marker').map do |i| {
        'title' => i.attr('title'), 
        'desc' => i.attr('desc'),
        'email' => i.attr('email'),
        'website' => i.attr('website'),
        'address' => i.attr('address'),
        'type' => i.attr('type')
        }
    end
end 
```

这是我的看法：

```
<% @links.each do |l| %>
    <% while l['type'] = 'bildung' %>
        <div class="span4 lande-item">
            <h4><%= l['title'] %></h4>
        </div>
    <% end %>
<% end %>

<% @links.each do |l| %>
    <% while l['type'] = 'wirtschaft' %>
        <div class="span4 lande-item">
            <h4><%= l['title'] %></h4>
        </div>
    <% end %>
<% end %>
.... 
```

`while`添加循环时，我看不到任何项目。有谁知道问题出在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T15:27:14.727

1.  一种可能性是您的`@links`变量是一个空数组。在这种情况下，您的任何一个块都不会被评估。

2.  当心`=`而不是`==`在你的 while 循环条件下。这将导致无限循环，因为分配将始终返回一个真实值。

3.  有更多惯用的方法来执行您想要的操作。例如 ：

    ```
    <% @links.select{|link| 'bildung' == link['type']}.each do |link| %>
      <div class="span4 lande-item">
        <h4><%= link['title'] %></h4>
      </div>
    <% end %> 
    ```

    或使用`group_by`：

    ```
    <% @links.group_by{|link| link['type']}['bildung'].each do |link| %>
      <div class="span4 lande-item">
        <h4><%= link['title'] %></h4>
      </div>
    <% end %> 
    ```

    还有许多其他方法，都使用惯用的 ruby​​ 块。在 ruby​​ 中，许多对象实现了该`each`方法并利用了[Enumerable 模块](http://ruby-doc.org/core/Enumerable.html)的强大功能：学习如何使用该模块的方法，您几乎不必使用 while 循环。

# delphi - 创建一个全局框架？

> ID：16040669
> 
> 赞同：1
> 
> 时间：2013-04-16T15:12:12.027
> 
> 标签：delphi, delphi-2010

Windows 平台上的 Delphi RAD Studio 2010：

请原谅我的无知，如果我在吠叫错误的树，请随时告诉我。

我只需要知道我的想法在原则上是否可行？

我想在我的项目中创建框架“A”。帧“A”在初始化时填充 VirtualTree。我也有许多表格可以使用框架'A'。

我希望能够在项目加载时创建框架“A”并在内存中对其进行初始化。然后，当调用任何使用框架'A'的表单时，我希望能够通过指针（或其他方式？）将框架'A'传递给该表单并“替换”现有的框架完全与框架“A”形成。（不担心放置等）。

我的理由是框架'A'在初始化时总是会做同样的事情。由于此初始化可能需要很长时间，例如“x”，因此使用此框架的每个表单将花费“x”倍的时间来加载结果。如果框架是预先填充的，可以这么说，这将节省大量时间，特别是如果框架 init 创建了一个很大的 VirtualTree。

我希望我说得通。对于以前可能尝试过类似事情的人，我们将不胜感激......

科恩拉德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T16:02:04.533

我有类似的东西，但使用普通的 TTreeView 而不是虚拟树。如果您的问题是加载数据而不是 Tree 本身的时间，那么只需获取该数据的副本即可。在我的例子中，我在一个 CachedData 类中加载了一个树视图，该类完成了我所有的初始化。然后，当创建一个新表单时，我只需像这样分配 .Items (TTreeNodes)：

```
CurrentTree.Items.Assign(CachedData.TreeView.Items); 
```

使用虚拟树时，您的数据和树节点之间存在明显差异，因此有许多不同的方式来共享基础数据。根据您的数据格式，您可以直接使用它或复制它以传递到新表单中。

通常，您描述的方法类型是可能且有用的。如果您描述您的初始化代码正在做什么以及您正在加载什么类型的数据结构（数据集、字符串列表、数组、自定义对象等），您可能会得到更具体的答案。

# sql - 从选择查询中获取最后六行

> ID：16040670
> 
> 赞同：1
> 
> 时间：2013-04-16T15:12:13.933
> 
> 标签：sql, sql-server, stored-procedures

我编写了一个存储过程，它为我提供了数据分析所需的原始数据。

该 SP 会立即使用以下结构填充一个临时表：

```
CREATE TABLE #Analysis
(
    AgreementID int,
    DueDate datetime,
    DateFrom datetime,
    DateTo datetime,
    AmountDue decimal(9,2),
    AmountPaid decimal(9,2),
    DueTD decimal(9,2),
    PaidTD decimal (9,2),
    ArrearsScore int
) 
```

AgreementID 可以在该表中向上重复 6 条记录。

我需要做的是，对于每个协议 ID，我需要获取最后 6 行

这将允许我进行其余的分析。

我努力了：

```
 SELECT
          AN.*
    FROM
          #Analysis AS A
    LEFT OUTER JOIN
         (SELECT 
             TOP(6) * 
          FROM 
              #Analysis 
          ORDER BY 
              AgreementID, DueDate DESC
         ) AS AN ON A.AgreementID = AN.AgreementID
    WHERE AN.AgreementID IS NOT NULL 
```

但这并没有给我想要的结果。

任何人都可以建议吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T15:15:58.157

如果您正在使用`SQL Server 2005+`，则可以使用`Common Table Expression`和`Windowing function`。为记录的值为 1`ROW_NUMBER()`的每个记录提供一个排名或值，`AgreementID`该值从 latest 排序`DueDate`。

```
WITH records
AS
(
    SELECT  AgreementID,
            DueDate,
            DateFrom,
            DateToe,
            AmountDue,
            AmountPaid,
            DueTD,
            PaidTD,
            ArrearsScore,
            ROW_NUMBER() OVER(PARTITION BY AgreementID 
                        ORDER BY AgreementID, DueDate DESC) rn
    FROM    #Analysis
)
SELECT  AgreementID,
        DueDate,
        DateFrom,
        DateToe,
        AmountDue,
        AmountPaid,
        DueTD,
        PaidTD,
        ArrearsScore
FROM    records
WHERE   rn <= 6 
```

不使用`CTE`

```
SELECT  AgreementID,
        DueDate,
        DateFrom,
        DateToe,
        AmountDue,
        AmountPaid,
        DueTD,
        PaidTD,
        ArrearsScore
FROM    
        (
            SELECT  AgreementID,
                    DueDate,
                    DateFrom,
                    DateToe,
                    AmountDue,
                    AmountPaid,
                    DueTD,
                    PaidTD,
                    ArrearsScore,
                    ROW_NUMBER() OVER(PARTITION BY AgreementID 
                                ORDER BY AgreementID, DueDate DESC) rn
            FROM    #Analysis
        ) records
WHERE   rn <= 6 
```

# c# - 分部分流式传输文件 - 不工作

> ID：16040676
> 
> 赞同：1
> 
> 时间：2013-04-16T15:12:30.760
> 
> 标签：c#, wcf, stream

我有一个客户端服务器应用程序，它通过 wcf 以传输模式流进行通信。当客户端尝试一次下载文件时，它可以工作，但是当客户端尝试两次下载整个文件时，下载的文件已损坏并且无法打开。

客户代码：

```
public void DownloadPart(Part Part) //Part: Part.From,Part.To -> possitions in the stream from where to begin and when to end reading
                {
                    int ReadUntilNow = 0;
                    int ReadNow = 0;
                    byte[] Array= new byte[15000];
                    long NeedToDownload = Part.To - Part.From;
                    using (FileStream MyFile = new FileStream(Path_To_Save_The_File, FileMode.Create, FileAccess.Write, FileShare.ReadWrite))
                    {
                        MyFile.Position = Part.From;
                        while (ReadUntilNow < NeedToDownload)
                        {
                            ReadNow = this.SeederInterface.GetBytes(TorrentID, Part.From + ReadUntilNow, ref Array);
                            ReadUntilNow += ReadNow;
                            MyFile.Write(Array, 0, ReadNow);
                        }
                    }
                } 
```

服务器代码：

```
public int GetBytes(int TorrentID, int Position, ref byte[] Array)
        {
            FileStream File = new FileStream(FilePatch, FileMode.Open, FileAccess.Read, FileShare.ReadWrite);
            File.Position = Position;
            return File.Read(Array, 0, Array.Length);
        } 
```

**我真的很绝望，不知道是什么问题。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T16:30:52.787

This is going to overwrite any existing output file. You have:

```
using (FileStream MyFile = new FileStream(Path_To_Save_The_File, 
    FileMode.Create, FileAccess.Write, FileShare.ReadWrite)) 
```

That will create a new file, or overwrite the existing file.

In the next line, you have:

```
MyFile.Position = Part.From 
```

That will extend the file, and the first part of the file will contain garbage--whatever was on the disk in that space.

I think what you want is to change the `Mode` in your open call to `FileMode.OpenOrCreate`, as in:

```
using (FileStream MyFile = new FileStream(Path_To_Save_The_File, 
    FileMode.OpenOrCreate, FileAccess.Write, FileShare.ReadWrite)) 
```

That will open the file if it already exists. Otherwise it will create a new file.

You'll probably want to determine if you're downloading the first part of the file (i.e. a new file), and delete any existing file if so. Otherwise, your code could overwrite the first part of the new file, but not truncate.

# python - Python将标题添加到CSV

> ID：16040677
> 
> 赞同：0
> 
> 时间：2013-04-16T15:12:43.810
> 
> 标签：python, django

我正在使用 Django，但我认为这是一个 Python 问题....

**如何在已上传的 CSV 文件顶部修改和写入一些标题？**

文件上传

```
jack;1st street ;New York 
```

我要附加到 CSV 的内容

```
name;street;area
jack;1st street ;New York 
```

这是我上传后的阅读方式：

```
 import csv
    file = upload.filepath
    file_read = csv.reader(file.read().splitlines()) 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T15:36:54.277

您可以使用 DictReader 和 DictWriter 保存为带有标题的新文件...

```
file_read = csv.DictReader(open('/tmp/test.csv', 'rb'), 
    ['name','street','area'], delimiter=';')
file_write = csv.DictWriter(open('/tmp/test-headers.csv', 'wb'), 
    ['name','street','area'], delimiter=';')
file_write.writeheader()
file_write.writerows(file_read) 
```

或者，如果您只想在脚本中使用该文件：

```
file_read = csv.DictReader(open('/tmp/test.csv', 'rb'), 
    ['name','street','area'], delimiter=';')

for row in file_read:
    print row 
```

以上打印：

```
{'street': ' 1st street', 'name': 'jack', 'area': ' New York'}
{'street': ' 2nd street', 'name': 'sally', 'area': ' New York'} 
```

# c#-4.0 - 使用 WIX 检查 .NET Framework

> ID：16040682
> 
> 赞同：1
> 
> 时间：2013-04-16T15:12:46.623
> 
> 标签：c#-4.0, wix

我正在创建一个自定义安装程序，它需要运行一些复杂的操作。我正在通过制作 DLL 来使用自定义操作。但是如果计算机没有安装 .Net Framework，这个 DLL 就不能工作。我的要求是在单击任何自定义操作时安装 .Net Framework。找不到任何线索。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T16:08:52.257

建议在启动 MSI 之前使用引导程序/链接器来安装 .NET Framework。这可以通过创建一个`Bundle`. 捆绑包在 WiX v3.6 及更高版本中可用，您将在 Visual Studio 中将它们视为一种新的项目类型。

WiX 手册提供了以下内容：[如何：使用 Burn 安装 .NET Framework](http://wix.sourceforge.net/manual-wix3/install_dotnet.htm)

# java - 循环条件：为什么“不等于”而不是“低于”

> ID：16040684
> 
> 赞同：12
> 
> 时间：2013-04-16T15:12:57.313
> 
> 标签：java, for-loop

我被分配到一个拥有大量（部分遗留）代码库的 Android-Java（实时游戏）项目上工作。

我看到的大多数循环都是这样的（其中 mjk 通常是一个 Java 数组）：

```
 int count = mjk.length;
    for (int i = 0; i != count; ++i) {
        // Stuff dealing with mjk[i]
    } 
```

我通常写这样的循环：

```
 int count = mjk.length;
    for (int i = 0; i < count; i++) {
        // Stuff dealing with mjk[i]
    } 
```

知道为什么原作者（到目前为止我无法联系到他）使用以前的表格吗？它在 C++ 中很常见吗？

我问这个的实际原因是 JIT 优化：据我所知，Android 优化循环（归纳变量、不变量、范围检查迁移到循环序言等），我想知道不相等是否会阻止这种优化（不像较低-than，它指定了一个明确定义的范围）。

我只是好奇第一种用法是否比第二种用法有任何优点/缺点（在所有方面）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T15:21:57.063

第二种形式有一个明显的优势：如果您在循环内操作错误，如果将get 分配给大于的值`i`，第一种形式可能会崩溃，而第二种形式将简单地结束循环。`i``mjk.length`

我在第二种方法中看到的唯一优势是“！=”可能比“<”运行得更快，但我什至不确定这是否会发生（这可能取决于 JVM 实现和硬件本身。）但是请注意，如果您在循环内执行一些实质性操作，则根本不会注意到差异，因为它每次迭代只执行一次。

我肯定会使用第二个，因为它更安全。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-16T15:20:43.620

我相信这只是一个没有经验的程序员。一般来说，使用 a`<`来获得更高的鲁棒性当然总是更好。在胡闹索引的情况下（例如通过将步长间隔更改为`i+=2`），它不会产生无限循环。

从技术上讲，比较可能会使用更少的 CPU 时间（虽然对此不太熟悉），但效果微乎其微或无关紧要，它不会破坏任何程序的性能...... :)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-16T15:34:51.867

我认为编写代码的人可能非常喜欢 Containers(maps, vector) (!!)

因为 != 主要用于遍历容器的元素。例如，遍历任何泛型类型的元素 != 将适用于地图和向量，而 < 将仅适用于向量。因此，对于通用时间的迭代元素！= 被使用。而不是我没有发现任何其他优势。（希望专家的建议/纠正）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-16T19:35:30.017

如果循环变量**i**以某种方式在循环内获得了不正确的、超出范围的值，则第一个版本将崩溃，而第二个版本将结束循环。

*对于第一个*版本，即崩溃的版本，这可能是一个优势。当您的银行运行程序来处理您的资金并且出现错误时，您是否希望程序因明显错误而崩溃，以便他们知道必须修复它，或者它应该默默地继续计算错误的结果?

当然，在某些系统（生命支持、飞机控制等）中，任何结果都会比停止的程序更好。但将其假设为一般规则是不明智的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-16T15:54:13.687

我记得很久以前在编写 c++ 时遇到过这种情况。

支持它的论点是退出循环时 i 的值更清晰 - 即，一目了然，在循环退出时 i == 计数。

# ruby-on-rails - OS X 上的全新 RVM 安装，由于 sqlite3 问题而无法运行服务器

> ID：16040685
> 
> 赞同：0
> 
> 时间：2013-04-16T15:12:57.350
> 
> 标签：ruby-on-rails, sqlite, rvm

我在我的 Mac OS X 10.6.8（运行 Snow Leopard）上安装了 rvm 并尝试启动我的第一个示例应用程序。在摆弄了几个小时后，我决定在这里发布这个问题，因为我真的不知道如何解决这个问题：

每当我尝试在我的应用程序文件夹中运行开发服务器时，都会收到以下错误：

```
/Users/santeri/RubymineProjects/sample_app/script/rails server -b 0.0.0.0 -p 3000 -e     development
/Users/santeri/.rvm/gems/ruby-2.0.0-p0/gems/sqlite3-1.3.7/lib/sqlite3.rb:6:in `require':      dlopen(/Users/santeri/.rvm/gems/ruby-2.0.0-p0/gems/sqlite3-1.3.7/lib/sqlite3/sqlite3_native.bundle, 9): Library not loaded: /usr/local/lib/libsqlite3.0.8.6.dylib (LoadError)
Referenced from: /Users/santeri/.rvm/gems/ruby-2.0.0-p0/gems/sqlite3-1.3.7/lib/sqlite3/sqlite3_native.bundle
    Reason: no suitable image found.  Did find:
        /usr/local/lib/libsqlite3.0.8.6.dylib: mach-o, but wrong architecture
        /usr/local/lib/libsqlite3.0.8.6.dylib: mach-o, but wrong architecture - /Users/santeri/.rvm/gems/ruby-2.0.0-p0/gems/sqlite3-1.3.7/lib/sqlite3/sqlite3_native.bundle 
```

我的 rvm 中只安装了 1 个 ruby​​ 版本：

```
/Users/santeri/.rvm/rubies/ruby-2.0.0-p0/bin/ruby 
```

运行**'lipo -info /usr/lib/libsqlite3.dylib'**返回：

fat 文件中的架构：/usr/lib/libsqlite3.dylib 是：x86_64 i386 ppc7400

感谢您的帮助或提示！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T15:41:13.650

我**强烈建议您通过****[Homebrew](http://mxcl.github.io/homebrew/)**安装 SQLite

1.  通过在终端中运行以下命令并按照提示和说明安装 Homebrew

    ```
    ruby -e "$(curl -fsSL https://raw.github.com/mxcl/homebrew/go)" 
    ```

2.  跑`brew install sqlite`

3.  重启你的 Rails 服务器

这应该可以解决您的问题。这将为 Rails 提供一个体系结构正确的`.dylib`文件，该文件位于一个目录中，`/usr/local/Cellar/sqlite/3.7.15.1/lib/`而不是`/usr/local/bin`.

# rest - 以“正确”方式将域对象映射到 Restlet 中的 url

> ID：16040688
> 
> 赞同：1
> 
> 时间：2013-04-16T15:13:04.873
> 
> 标签：rest, restlet

我目前正在使用 Restlet 提供一个 REST API 来访问具有许多相关表的数据库，使用 JPA + Hibernate 作为我的持久层。举一个具体的例子，假设我的 JPA 实体中有以下对象层次结构：

```
@Entity
class Foo {
    Long id; // primary key
    List<Bar> bars;
    // Other Foo data
}

@Entity
class Bar {
   public Long id;
   // Bar data
} 
```

除了被`Foo`s 引用之外，`Bar`s 还可以被其他对象类型引用，所以我想在它们自己的 URL 层次结构中公开它们的表示，而不是作为子资源放置在单个`Foo`的层次结构中。因此，就我而言，我希望 a 的 XML 表示形式`Foo`类似于：

```
<Foo>
    <bars>
        <Bar>http://example.com/bars/42</Bar>
        <Bar>http://example.com/bars/127</Bar>
    </bars>
    <!-- Other foo data representation -->
</Foo> 
```

在 Restlet 中，`Router`为我的应用程序配置时，我有以下配置：

```
router.attach("/foo", ListAllFooResource.class);
router.attach("/foo/{id}", SingleFooResource.class);
router.attach("/bar", ListAllBarResource.class);
router.attach("/bar/{id}", SingleBarResource.class); 
```

这就是我的困境所在。从资源级别来看，我似乎无法找到一种方法来确定`SingleBarResource`放置的位置。当从我的 JPA 实体构造 Foo 的表示时，我想获取每个`Bar`引用的 id`Foo`并构造一个 URL 以放置在 XML（或 JSON）表示中。

我的问题是：在一个`ServerResource`子类中，有没有办法询问另一个子类映射到`Application`什么 URL ？`ServerResource`如果可能，那么我可以使用该`getRootRef()`方法构建所需资源的完整路径。

我发现[这个线程从 2007 年开始](http://osdir.com/ml/java.restlet/2007-03/msg00024.html)提出几乎完全相同的问题，其中的共识是：

1.  查询一些外部对象管理服务器资源的 URL 配置（使用 Spring 或类似的东西来提供配置和实例化）
2.  一位 Restlet 开发人员建议在资源本身上放置一个静态或实例方法。

(1) 看起来有点笨拙，并且 (2) 似乎也有同样的问题，我们不知道应用程序在资源级别放置它的位置。此外，由于这个问题是 6 年前提出的，现在可能有更好的解决方案。

一般来说，我对 Restlet 和 REST 架构还是很陌生，所以我对我完全错误地处理这个问题的可能性持开放态度，所以请随时告诉我。

# c++ - 为什么 stdfax.h 应该是 MFC 应用程序的第一个包含？

> ID：16040689
> 
> 赞同：2
> 
> 时间：2013-04-16T15:13:05.577
> 
> 标签：c++, visual-studio, mfc

我想知道为什么这条线存在于每个 MFC 应用程序中（这迫使 stdafx.h 成为每个文件中包含的第一个标头）：

```
#ifndef __AFXWIN_H__
    #error "include 'stdafx.h' before including this file for PCH"
#endif 
```

这种行为背后的原因是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T15:20:14.310

仅在使用预编译标头 (PCH) 时才是正确的，并且在 the 之前不应有任何内容的原因`#include "stdafx.h"` 是：

> **Visual C++ 不会编译**源文件中#include "stdafx.h" 之前的任何内容，除非未选中编译选项 /Yu'stdafx.h'（默认情况下）；它假定源代码中直到并包括该行的所有代码都已编译

来自[http://en.wikipedia.org/wiki/Precompiled_header](http://en.wikipedia.org/wiki/Precompiled_header)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T15:21:38.590

你应该阅读这个简短的描述[`stdafx.h`](http://en.wikipedia.org/wiki/Precompiled_header#stdafx.h)

> 兼容的编译器（例如，Visual C++ 6.0 和更高版本）将预编译此文件以减少总体编译时间。Visual C++ 不会编译源文件中#include "stdafx.h" 之前的任何内容，除非未选中编译选项 /Yu'stdafx.h'（默认情况下）；它假定源代码中直到并包括该行的所有代码都已编译。

它含蓄地说，要实现 PCH 的优势，您必须`stdafx.h`尽快将其包含在包含层次结构中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T15:24:40.430

`stdafx.h`文件包括在项目中与不同文件一起使用的公共头文件。包含它不是必须的，但是您必须管理项目中的所有标题，这将导致在不同文件中重复一些标题。

# java - JGroups 可以用来形成 COMET/Long-Polling 的 Java 等价物吗？

> ID：16040693
> 
> 赞同：0
> 
> 时间：2013-04-16T15:13:13.263
> 
> 标签：java, swing, comet, long-polling, jgroups

在 webdev-land 中，COMET/Lojg-Polling 允许服务器与每个客户端保持开放连接，并在数据可用时将数据推送到每个客户端。JGroups 似乎可以在客户端 Swing 应用程序和它的应用程序服务器之间做同样的事情。

这是一个公平的比较还是离谱？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T15:40:59.457

JGroups API 的主要动机是用于集群，您试图实现的是持续的套接字连接。

您可以使用基于节点等级的 JGroups 创建类似于架构的客户端服务器。但是为此，您需要更清楚地了解要求。

# ios - 一个额外的 BarButtonItem

> ID：16040694
> 
> 赞同：0
> 
> 时间：2013-04-16T15:13:19.360
> 
> 标签：ios, objective-c, uibutton, uibarbuttonitem, uitoolbar

我只是遇到了一个小问题。我找到了这段代码：

```
MKUserTrackingBarButtonItem *trackingButton = [[MKUserTrackingBarButtonItem alloc]initWithMapView:self.mapView];
[self.mapToolbar setItems: [NSArray arrayWithObject:trackingButton] animated:YES]; 
```

我想在右侧添加一个额外的按钮（左侧是跟踪按钮）。
**注意**
它是一个 UIToolbar 不是一个导航栏

所以我只是尝试了这个：

```
 MKUserTrackingBarButtonItem *trackingButton = [[MKUserTrackingBarButtonItem alloc]initWithMapView:self.mapView];
    UIBarButtonItem* rightButton = [[UIBarButtonItem alloc] initWithTitle:@"Pins" style:UIBarButtonItemStyleBordered target:self action:@selector(rightButton:)];
    [self.mapToolbar setItems: [NSArray arrayWithObjects:trackingButton, rightButton, nil] animated:YES]; 
```

但它没有任何想法？

**编辑**
我更新了代码：将按钮添加到 NSArray

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T16:49:25.027

如果您希望工具栏按钮在工具栏上“右对齐”，则需要在左侧项目和右侧项目之间的数组中添加一个灵活的空间项目。

```
MKUserTrackingBarButtonItem *trackingButton = [[MKUserTrackingBarButtonItem alloc]initWithMapView:self.mapView];
UIBarButtonItem *flexible = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];
UIBarButtonItem* rightButton = [[UIBarButtonItem alloc] initWithTitle:@"Pins" style:UIBarButtonItemStyleBordered target:self action:@selector(rightButton:)];
[self.mapToolbar setItems: [NSArray arrayWithObjects:trackingButton, flexible, rightButton, nil] animated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T16:16:48.677

尝试这个：

```
self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithTitle:@"Button" style:UIBarStyleDefault target:self action:@selector(doSomething:)]; 
```

# sql-server - 简单控制台应用程序 SQL 更新查询 - 超时

> ID：16040697
> 
> 赞同：0
> 
> 时间：2013-04-16T15:13:35.527
> 
> 标签：sql-server, vb.net

我有以下 VB.Net 控制台应用程序子例程，它从表中读取电子邮件并尝试发送它们，如果成功发送它们，它将更新与发送时间相同的数据库。

此代码工作正常，但是我现在收到以下错误：

> 超时已过。在操作完成之前超时时间已过或服务器没有响应。

我曾尝试在管理工作室中单独运行 SQL 脚本，它工作正常。

我也试过验证服务器空间和数据库大小，两者都很好。

任何人都可以提供解决方案吗？

```
Connection(True)
    Using comSQL As New SqlCommand("SELECT * FROM Seq_Emails_ToSend", conSQL)
        Using dr As SqlDataReader = comSQL.ExecuteReader
            While dr.Read

                Dim madTO As MailAddressCollection = ConvertStringtoMAD(dr("Email_TO").ToString)
                Dim madCC As MailAddressCollection = ConvertStringtoMAD(dr("Email_CC").ToString)
                Dim madBCC As MailAddressCollection = ConvertStringtoMAD(dr("Email_BCC").ToString)
                Dim isHTML As Boolean = CBool(dr("Email_HTML").ToString)
                Dim Priority As MailPriority = CInt(dr("Email_Priority").ToString)
                Dim Subject As String = CStr(dr("Email_Subject").ToString)
                Dim Body As String = CStr(dr("Email_Body").ToString)
                Dim ID As Integer = CInt(dr("Email_ID").ToString)
                Dim Status As String

                If EmailFile(madTO, madCC, madBCC, "", isHTML, Priority, Subject, Body) Then
                    Status = "Sent"
                Else
                    Status = "Failed"
                End If

                Using comSQL2 As New SqlCommand("UPDATE Seq_Emails SET [Status] = @Status, [Date_Sent] = @Date WHERE Email_ID = @ID", conSQL)
                    comSQL2.Parameters.Add("@ID", SqlDbType.Int).Value = ID
                    comSQL2.Parameters.Add("@Status", SqlDbType.NVarChar).Value = Status
                    comSQL2.Parameters.Add("@Date", SqlDbType.DateTime).Value = DateTime.Now

                    comSQL2.ExecuteNonQuery()
                End Using

            End While
        End Using
    End Using
    Connection(False) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T16:24:58.307

我认为你在阻止自己。

使用一个 SqlDataReader 读取所有数据，并将其放入一个简单的 DTO 对象和 DTO 对象的集合中。完全处置/关闭此 SqlDataReader。

然后尝试发送电子邮件，然后发出一个 UPDATE 命令。

另一种说法是，尝试从 comSQL 内部 UNNEST comSQL2。

这是一个简单的 IDataReader 到 DTO 示例。

[为什么 DataTable 比 DataReader 快](https://stackoverflow.com/questions/13650443/why-is-datatable-faster-than-datareader/15908284#15908284)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T18:19:57.250

看来我不得不取消嵌套上面提到的 2 个 sqldatareaders。

在下面的代码中，根据电子邮件处理的结果，主键被添加到列表中：

```
 If EmailFile(madTO, madCC, madBCC, "", isHTML, Priority, Subject, Body) Then
                    intSent.Add(CInt(dr("Email_ID").ToString))
                Else
                    intFailed.Add(CInt(dr("Email_ID").ToString))
                End If 
```

然后，一旦发送过程完成，我就会在 2 个单独的列表或主键上运行更新查询以进行更新。

```
 Using comSQL2 As New SqlCommand("UPDATE Seq_Emails SET [Status] = @Status, [Date_Sent] = @Date WHERE Email_ID = @ID", conSQL)
        For Each Email_ID As Integer In intSent
            comSQL2.Parameters.Clear()
            comSQL2.Parameters.Add("@ID", SqlDbType.Int).Value = Email_ID
            comSQL2.Parameters.Add("@Status", SqlDbType.NVarChar).Value = "Sent"
            comSQL2.Parameters.Add("@Date", SqlDbType.DateTime).Value = DateTime.Now
            comSQL2.ExecuteNonQuery()
        Next
        For Each Email_ID As Integer In intFailed
            comSQL2.Parameters.Clear()
            comSQL2.Parameters.Add("@ID", SqlDbType.Int).Value = Email_ID
            comSQL2.Parameters.Add("@Status", SqlDbType.NVarChar).Value = "Failed"
            comSQL2.Parameters.Add("@Date", SqlDbType.DateTime).Value = DateTime.Now
            comSQL2.ExecuteNonQuery()
        Next
    End Using 
```

我确信有更简单的方法可以做到这一点 - 但是在这种情况下它对我有用。

# sql - 将记录从一个表复制到另一个sql

> ID：16040700
> 
> 赞同：-2
> 
> 时间：2013-04-16T15:13:51.003
> 
> 标签：sql, sql-server-2008

我有 2 张桌子。我想从表 1 中复制数据，其中包含 1 列（日期戳），表 2 中包含 6 列（id、名称、id、操作、时间戳、日期戳）。现在，表 2 中的所有列（记录）都已填充，但 datestamp 列除外，即填充为“null”。所以我想将表1中的日期戳复制到表2中，其中表2中的日期戳为空请帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T15:16:45.857

假设这`id`是两个表上的主键：

```
UPDATE T2
SET T2.[datestamp] = T1.[datestamp]
FROM Table2 T2
INNER JOIN Table1 T1
    ON T2.id = T1.id
WHERE T2.[datestamp] IS NULL 
```

# mysql - Flyway mysqldump脚本静默失败

> ID：16040706
> 
> 赞同：0
> 
> 时间：2013-04-16T15:13:58.693
> 
> 标签：mysql, mysqldump, flyway

一些更新

我有一个 sql 脚本迁移，如果我将它通过管道传输到 mysql，它将运行，但不是通过 flyway。该脚本正在执行，但第一行显然出错了。

一旦遇到这样的行： /*!50003 SET character_set_results = latin1 */ ;

该脚本静默停止运行。我使用了简单的插入语句来确保脚本至少已启动，并且确实如此。

我不想针对不同类型的数据库或任何东西运行 mysql 语句。我的 pom.xml 是：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <groupId>com.cpt.migrations</groupId>
  <artifactId>cpt_migrations</artifactId>
  <version>1.0-SNAPSHOT</version>
  <packaging>jar</packaging>

  <name>cpt_migrations</name>
  <url>http://maven.apache.org</url>

  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
  </properties>

  <dependencies>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>3.8.1</version>
      <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>mysql</groupId>
        <artifactId>mysql-connector-java</artifactId>
        <version>5.1.24</version>
    </dependency>
  </dependencies>
  <build>
      <plugins>
          <plugin>
              <groupId>com.googlecode.flyway</groupId>
              <artifactId>flyway-maven-plugin</artifactId>
              <version>2.1.1</version>
              <configuration>
                  <user>root</user>
                  <password></password>
                  <driver>com.mysql.jdbc.Driver</driver>
                  <url>jdbc:mysql://localhost:3306/cpt</url>
              </configuration>
          </plugin>
      </plugins>
  </build>
</project> 
```

跑步： `mvn clean compile flyway:clean flyway:migrate --debug --offline -ff -e`

仅在第二次迁移中使用此网络：

```
[DEBUG] Locking table `cpt`.`schema_version`...
[DEBUG] Lock acquired for table `cpt`.`schema_version`
[INFO] Migrating schema `cpt` to version 2
[DEBUG] Successfully completed and committed migration of schema `cpt` to version 2
[DEBUG] Finished migrating schema `cpt` to version 2 (execution time 00:00.003s)
[DEBUG] MetaData table `cpt`.`schema_version` successfully updated to reflect changes
[DEBUG] Unlocking table `cpt`.`schema_version`...
[DEBUG] Lock released for table `cpt`.`schema_version`
[DEBUG] Locking table `cpt`.`schema_version`...
[DEBUG] Lock acquired for table `cpt`.`schema_version`
[DEBUG] Unlocking table `cpt`.`schema_version`...
[DEBUG] Lock released for table `cpt`.`schema_version` 
```

如果我立即运行：

```
cat target/classes/db/migration/V2__Triggers.sql | mysql -u root cpt 
```

更改按预期进行。

关于这里发生的事情有什么建议吗？看起来它应该只是将这个 sql 直接扔到数据库而不尝试解析它，但显然情况并非如此。

而且，很容易也很重要。为什么我没有收到失败消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T16:30:49.157

Sounds like you hit an issue with the parser. Please file an issue in the issue tracker with a small sample migration that fails, and I'll try to address it in time for 2.2.

# php - Symfony2：嵌入不相关的形式？

> ID：16040708
> 
> 赞同：0
> 
> 时间：2013-04-16T15:14:00.597
> 
> 标签：php, forms, symfony

是否可以为与另一个对象相关但[无法由实体管理器管理](https://stackoverflow.com/questions/15981639/symfony2-class-not-found-in-the-chain-in-two-bundle-relationship)的对象嵌入表单？从链接的问题：客户实体在一个外部数据库中，但应该与成员实体具有一对多的关系。目标是构建一个可以添加或编辑客户及其相关家庭成员的表单。或者是持久化客户端然后添加成员的唯一可行解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T19:47:15.903

这是*非常*困难的。正如您所说，您将需要持久化用户和客户端，但是跨数据库管理相关实体会使急切加载变得不可能，这意味着您会在列表视图中获得每个相关实体的额外查询。如果你可以在同一个数据库中使用不同的模式，那么这个问题就简单多了。

话虽如此，在您的控制器中创建第二个表单并在模板中呈现两者并不难。或者，您可以使用选择控件并让查询生成可能的外键列表并将它们作为数字类型存储在数据库中。

如果您需要准确的建议，我需要提供示例代码/控制器。

# oracle - c3p0、Oracle 和 Hibernate 反复出现明显的死锁

> ID：16040710
> 
> 赞同：5
> 
> 时间：2013-04-16T15:14:01.147
> 
> 标签：oracle, connection-pooling, c3p0

我们的生产系统反复出现明显的死锁，我们似乎无法深入了解这些死锁。我们无法追踪与在线用户数量的任何相关性，而且似乎我们没有用完可用的连接。

我们有一个通过 Hibernate 和 c3p0 连接到 Oracle 的 Java EE 应用程序。我们的 c3p0 配置是：

```
minPoolSize=10
maxPoolSize=300
initialPoolSize=30
acquireIncrement=10
maxIdleTime=1800
maxStatementsPerConnection=0
numHelperThreads=5 
```

明显的死锁日志输出总是或多或少像这样：

```
[com.mchange.v2.async.ThreadPoolAsynchronousRunner] (Timer-1) com.mchange.v2.async.ThreadPoolAsynchronousRunner$DeadlockDetector@4c9f1b4d -- APPARENT DEADLOCK!!! Complete Status:
    Managed Threads: 5
    Active Threads: 5
    Active Tasks:
            com.mchange.v2.resourcepool.BasicResourcePool$AcquireTask@7fe1ab86 (com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#1)
            com.mchange.v2.resourcepool.BasicResourcePool$AcquireTask@38c42c01 (com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#2)
            com.mchange.v2.resourcepool.BasicResourcePool$AcquireTask@572512c4 (com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#4)
            com.mchange.v2.resourcepool.BasicResourcePool$AcquireTask@42f32e8e (com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#0)
            com.mchange.v2.resourcepool.BasicResourcePool$AcquireTask@6b758ef8 (com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#3)
    Pending Tasks:
            com.mchange.v2.resourcepool.BasicResourcePool$AcquireTask@72fd72e5
            com.mchange.v2.resourcepool.BasicResourcePool$AcquireTask@5d82535d
            com.mchange.v2.resourcepool.BasicResourcePool$AcquireTask@172f2ea1
            com.mchange.v2.resourcepool.BasicResourcePool$AcquireTask@1a9e57eb
            com.mchange.v2.resourcepool.BasicResourcePool$AcquireTask@20ee5a35 
```

实际的池线程堆栈跟踪不同，我在下面添加了一些示例：

```
Thread[com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#4,5,jboss]
            java.lang.AbstractStringBuilder.<init>(AbstractStringBuilder.java:45)
            java.lang.StringBuilder.<init>(StringBuilder.java:80)
            oracle.net.ns.Packet.<init>(Packet.java:513)
            oracle.net.ns.ConnectPacket.<init>(ConnectPacket.java:64)
            oracle.net.ns.NSProtocol.connect(NSProtocol.java:278)
            oracle.jdbc.driver.T4CConnection.connect(T4CConnection.java:1042)
            oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:301)
            oracle.jdbc.driver.PhysicalConnection.<init>(PhysicalConnection.java:531)
            oracle.jdbc.driver.T4CConnection.<init>(T4CConnection.java:221)
            oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:32)
            oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:503)
            com.mchange.v2.c3p0.DriverManagerDataSource.getConnection(DriverManagerDataSource.java:135)
            com.mchange.v2.c3p0.WrapperConnectionPoolDataSource.getPooledConnection(WrapperConnectionPoolDataSource.java:182)
            com.mchange.v2.c3p0.WrapperConnectionPoolDataSource.getPooledConnection(WrapperConnectionPoolDataSource.java:171)

Thread[com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#2,5,jboss]
            oracle.jdbc.driver.T4CTTIoauthenticate.processRPA(T4CTTIoauthenticate.java:491)
            oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:295)
            oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:186)
            oracle.jdbc.driver.T4CTTIoauthenticate.doOSESSKEY(T4CTTIoauthenticate.java:390)
            oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:356)
            oracle.jdbc.driver.PhysicalConnection.<init>(PhysicalConnection.java:531)
            oracle.jdbc.driver.T4CConnection.<init>(T4CConnection.java:221)
            oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:32)
            oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:503)
            com.mchange.v2.c3p0.DriverManagerDataSource.getConnection(DriverManagerDataSource.java:135)
            com.mchange.v2.c3p0.WrapperConnectionPoolDataSource.getPooledConnection(WrapperConnectionPoolDataSource.java:182)
            com.mchange.v2.c3p0.WrapperConnectionPoolDataSource.getPooledConnection(WrapperConnectionPoolDataSource.java:171)
            com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool$1PooledConnectionResourcePoolManager.acquireResource(C3P0PooledConnectionPool.java:1

Thread[com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#1,5,jboss]
            oracle.net.ns.NSProtocol.connect(NSProtocol.java:346)
            oracle.jdbc.driver.T4CConnection.connect(T4CConnection.java:1042)
            oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:301)
            oracle.jdbc.driver.PhysicalConnection.<init>(PhysicalConnection.java:531)
            oracle.jdbc.driver.T4CConnection.<init>(T4CConnection.java:221)
            oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:32)
            oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:503)
            com.mchange.v2.c3p0.DriverManagerDataSource.getConnection(DriverManagerDataSource.java:135)
            com.mchange.v2.c3p0.WrapperConnectionPoolDataSource.getPooledConnection(WrapperConnectionPoolDataSource.java:182)
            com.mchange.v2.c3p0.WrapperConnectionPoolDataSource.getPooledConnection(WrapperConnectionPoolDataSource.java:171)
            com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool$1PooledConnectionResourcePoolManager.acquireResource(C3P0PooledConnectionPool.java:137)
            com.mchange.v2.resourcepool.BasicResourcePool.doAcquire(BasicResourcePool.java:1014)
            com.mchange.v2.resourcepool.BasicResourcePool.access$800(BasicResourcePool.java:32)
            com.mchange.v2.resourcepool.BasicResourcePool$AcquireTask.run(BasicResourcePool.java:1810)
            com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread.run(ThreadPoolAsynchronousRunner.java:547) 
```

关于我们应该在哪里进行调查的任何建议？这是 c3p0，我们的查询，我们的代码，数据库吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T08:38:12.393

所以，你的助手线程显然已经被 Connection 收购饱和了。这意味着在很长一段时间内多次尝试获取 Connections 既不会成功也不会因异常而失败。这最终是您需要调试的问题。

我要做的第一件事是升级到 c3p0-0.9.2.1，它使用“分散的”获取任务，在获取失败时节省池线程的使用。第二个建议可能是将名为 numHelperThreads 的 c3p0 配置参数增加到可能远高于其默认值 3 甚至您正在使用的 5 的值。看起来您的线程实际上被占用了连接获取的各个阶段，因此增加可以获取连接的“通道”的数量可能会有所帮助。[但请参阅下面的后记！]

但是，最终问题将归结为为什么连接获取完成如此缓慢（要声明一个明显的死锁，在大约 10 秒的时间内没有任何获取成功）。这可能是数据库或网络问题。

但请尝试升级到 0.9.2 并增加 numHelperThreads。[numHelperThreads 的默认值可能已经过时；在多核机器时代，专门用于 IO 绑定任务的线程池可能应该是核心数量的 s 倍] 这些调整可能会很好地解决问题，或者导致更好地了解下一步该往哪里看。

祝你好运！

ps 我猜您显示的线程堆栈跟踪实际上并不是从构建期间到明显死锁的堆栈跟踪。很难计算这些时间，因为在 c3p0 宣布之前，您不知道表观死锁即将到来。我敢打赌，在死锁中，这些堆栈跟踪彼此更加相似，并且正在等待某种 IO。

# visual-studio-2010 - 在 Visual Studio 2012 中，法语键盘上的向后导航快捷键是什么？

> ID：16040711
> 
> 赞同：12
> 
> 时间：2013-04-16T15:14:04.580
> 
> 标签：visual-studio-2010, visual-studio-2012

**我想知道如何使用法语 (fr-FR)**键盘在 Visual Studio 中前后导航已经有一段时间了。

将鼠标悬停在按钮上看起来像这样：

![向后导航](https://i.stack.imgur.com/FBLyq.png)

*   向后导航：`Ctrl`+`.`
*   向前导航：`Ctrl`+ `Shift`+`.`

但是我找不到捷径！我猜`.`是指点，但~~我不确定~~我很确定不是，请参阅下面的编辑。

有谁知道如何做到这一点 ？

**编辑：**
请注意，这不是常见的`.`，见下图，快捷方式映射到某种中间浮动点。

![可能不是一个常见的点](https://i.stack.imgur.com/55x9Y.png)！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-29T09:20:09.847

并非所有键都可以在 Visual Studio 快捷键中使用。您可以在“按快捷键”文本框中的“选项”对话框/环境/键盘选项卡中自己尝试。例如，使用法语键盘，您不能创建`CTRL+.`快捷方式，也不能创建`CTRL+-`快捷方式（正如一些非法语建议的那样：-）

为什么？因为`CTRL+.`只是被视为`CTRL+SHIFT+;`（您必须查看法语键盘才能理解），因为 Visual Studio 从按下的键中提取 SHIFT（因为它希望将其保留为快捷方式的一部分），并且不记得 '. ' 字符被按下。

![在此处输入图像描述](https://i.stack.imgur.com/PWYQv.png) *（原图由[AZERTY](http://en.wikipedia.org/wiki/AZERTY)提供）*

规则可能是这样的：

> 如果不使用此键盘上的修饰键无法创建不是修饰符（CTRL、ALT、SHIFT）的部分，则无法识别或无法在给定键盘上使用 Visual Studio 快捷方式。

注意：此规则有一些（可能是硬编码？）例外情况，例如，数字 0 到 9 无需在法语键盘上使用 SHIFT 即可使用...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-05T18:24:55.633

如果它不是一个正常的句号`.`，我将如何识别它。

1.  使用[SysExporter](http://www.nirsoft.net/utils/sysexp.html)将文本复制出 VS2012 选项菜单中的 UI 控件。

2.  将文本粘贴到 Unicode 文本文件中，例如使用 Windows Notepad 或[Notepad2](http://www.flos-freeware.ch/notepad2.html)制作的文件。请务必另存为 Unicode。

3.  [然后使用HxD](http://mh-nexus.de/en/hxd/)等编辑器打开它，以打开并复制原始 Unicode 字符值。现在您可以查找并找出该点的确切符号，以及如何重新创建它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-29T09:46:32.173

在 VS2012 中，您可以转到`Tools`、`Options`，`Environment`并查看所有可用命令的键盘映射。

例如：

![在此处输入图像描述](https://i.stack.imgur.com/QaadJ.png)

如果您在法语系统上查看此内容，您应该会看到启用了哪些映射。

在我的（英文）系统上，它是`CTRL`+ `-`（减号）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-05T19:10:59.387

我想我找到了，但我不确定。我似乎无法在我的电脑上实际测试这个，但我做了什么：

1.  使用 Pat 或 JK 的 Spy ( [http://patorjk.com/blog/software/](http://patorjk.com/blog/software/) ) 从组合框中提取文本。
2.  将那个奇怪的点复制到 python 并执行 ord('·') 并得到 250
3.  250 = 0xfa，编辑：经过更多研究，我认为它也可以是 183
4.  0xfa =ù（或0xb7，在对此做了一些研究之后）

~~因此，我得出结论 ctrl+shift+ù 应该可以工作。~~ 它是英文键盘上的 ' 或 " 键。（法文键盘上的 % ）

在我的电脑上它不起作用，但值得一试，也许它会有所帮助。

**编辑：** 在做了一些研究之后，我认为这可能是一个错误。阅读此内容后：[http](http://geekhack.org/index.php?topic=17600.0) ://geekhack.org/index.php?topic= 17600.0 以及该链接中的所有其他链接，以及有关“中间点”（interpunct）的更多信息，我得出的结论是无法输入该字符，甚至不使用日文布局（[http://answers.yahoo.com/question/index?qid=20081215222938AA9Nz0t](http://answers.yahoo.com/question/index?qid=20081215222938AA9Nz0t)）

我尝试了西班牙语、加泰罗尼亚语、4 种不同的法语布局和日语。无法得到那个中间点！所以，对此似乎只有一种解释——这确实是一个错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T19:44:56.377

Try `Ctrl + :` as `:` is where the `.` is on English keyboard.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-31T07:52:43.250

作为法国用户，我也遇到过这个问题，VS2015 解决不了。我发现最快的解决方案就是重新映射命令。

去

工具 > 选项 > 环境 > 键盘

并搜索命令 View.NavigateBackward 或 View.NavigateForward 并输入新的键盘映射。很难找到尚未分配给命令的人​​！我个人`Ctrl + Num .`用于向后导航和`Ctrl + Num 0, Ctrl + Num .`向前导航。

比使用不起作用的默认映射要好。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-08-01T10:46:01.507

对于法语/azerty 用户的快速更新，在 VS2015 上，快捷键 ctrl+! 和 Ctrl+Shift+! 是免费的并且更靠近本垒。

# xslt-1.0 - 如何使用 msxsl:format-date() 转换日期

> ID：16040715
> 
> 赞同：1
> 
> 时间：2013-04-16T15:14:11.003
> 
> 标签：xslt-1.0

每次我尝试使用转换日期时`msxsl:format-date(@testDate, 'MM-dd-yyyy')` 都会得到一个空字符串......

但是，如果我只是打电话，`<xsl:value-of select="AcessDate"/>`那么我确实得到了约会......我错过了什么？这不像是我没有通过 X-PATH 导航到正确的元素？

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl"
>
<xsl:for-each select="//SelectFairWarningInformationResult">
  <!--<xsl:variable name="AccessDate" select="AcessDate"/>-->
  <xsl:value-of select="msxsl:format-date(@test, 'MM-dd-yyyy')"/> | <xsl:value-of select="Acess"/> | <xsl:value-of select="PatName"/> | <xsl:value-of select="PatFName"/> | <xsl:value-of select="PatID"/> | <xsl:value-of select="UID"/> | <xsl:value-of select="ULName"/> | <xsl:value-of select="UFName"/>  | View Record&#10;
</xsl:for-each> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T15:43:34.743

如果您使用像 Saxon 9 或 AltovaXML 或 XmlPrime 这样的 XSLT 2.0 处理器，那么您可以并且应该使用XSLT 2.0 定义的[format-date 函数来格式化日期值。](http://www.w3.org/TR/xslt20/#format-date)

您尚未`msxsl`在代码中向我们展示前缀绑定到哪个 URI，但我假设您正在尝试使用 Microsoft XSLT 1.0 处理器 MSXML 6 支持的专有扩展功能。我不希望其他 XSLT 供应商支持该功能，特别是 XSLT 2.0 处理器，因为 XSLT 2.0 标准支持模式`xs:date`和`xs:dateTime`数据类型，并且也具有相应的格式化功能。

使用 XSLT 2.0 我认为您可以使用`format-date(@test, "[M01]-[D01]-[Y0001]")`. 以您可能需要调整的示例为例，恐怕我不知道具体做什么`msxsl:format-date`。

# android - 尝试为 android 项目设置运行配置

> ID：16040716
> 
> 赞同：2
> 
> 时间：2013-04-16T15:14:13.613
> 
> 标签：android, eclipse, android-emulator

我正在开发一个从 bitbucket 克隆的 android 应用程序项目。但是，当我尝试设置运行配置以在模拟器中运行它时，我不能这样做。到目前为止，我尝试的是右键单击项目-> 运行方式-> 运行配置...，然后单击创建新配置的 Android 应用程序。现在，当我尝试通过浏览选择项目时，该项目在那里不可用。然后，如果我只是手动输入项目名称并尝试运行它，则会出现一个对话框，提示“在：'Launching projectName'期间发生内部错误”。有谁知道可能是什么问题？

编辑：至于目标虚拟设备，我将其设置为“在所有兼容设备上启动”，但是在“自动选择兼容设备”下，即使我创建了 AVD，也没有列出任何设备。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:48:35.033

如果它没有出现在文件夹中，则可能它没有设置为项目。

正如您所说，标准程序是：

单击运行配置。然后命名配置并通过浏览文件夹选择项目。

至于目标虚拟设备，请选择您希望应用运行的最新 Android 版本。

# database - 如何从 AS/400 (IBM iSeries) 加速 SELECT 查询 - VB。网络编程

> ID：16040719
> 
> 赞同：4
> 
> 时间：2013-04-16T15:14:26.593
> 
> 标签：database, vb.net, ibm-midrange

我不是程序员，我只需要非常基本的查询就可以从同一个表中获取信息（因此在我的程序中只需要使用 SELECT 语句）。

我试试 `SELECT INFOR.PFAC , INFOR.PPAR FROM MAINSYSTEM.INFOR INFOR WHERE ppar = '240XXX2A'`

但是返回值大约需要 3 分钟，而当我使用 iSeries 的数据传输时，速度非常快。有什么办法可以加快查询速度吗？

我`Driver={Client Access ODBC Driver (32-bit)}`用来连接。

当我按下 then 按钮时，我有一个按钮，它将获取数据并显示到 gridView

```
 Dim MyODBCConnection As New Odbc.OdbcConnection("Driver={Client Access ODBC Driver (32-bit)};" & _
    "System=163.201.28.55 ;Default Collection=bpcshv81.PEXPLOSNA;")

    'Open the connection
    MyODBCConnection.Open()
    Dim Table_BOM As New DataTable
    Dim Table_BOM_Fill As New Odbc.OdbcDataAdapter("SELECT PEXPLOSNA.PFAC , PEXPLOSNA.PPAR FROM    MAINSYSTEM.INFOR  PEXPLOSNA WHERE ppar = '240XXX2A'", MyODBCConnection)

    Table_BOM_Fill.Fill(Table_BOM)
    DataGridView1.DataSource = Table_BOM 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T16:34:16.070

部分延迟可能是打开连接。

或许您可以先尝试打开它，让您的开销不碍事，甚至在您显示按钮之前。

当然，这可能意味着您也想移动到关闭连接的位置。您想打开连接一次，完成后只关闭一次。

您可能想要使用随 iSeries Access 提供的 .NET Data Provider。

检查您使用的是最新可用的 iSeries Access 版本，并*确保*它已安装补丁。您的 iSeries Access 版本可能比系统的操作系统版本更新，但您不希望它反过来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T16:04:02.960

请 IBM DB 管理员为您构建索引。

# java - 从 JDK 访问非公共（java-native）类 (7)

> ID：16040726
> 
> 赞同：0
> 
> 时间：2013-04-16T15:14:50.647
> 
> 标签：java, reflection, private, java-7

我想使用 MethodHandleNatives.getTargetMethod(MethodHandle)AccessibleObject 方法。MethodHandleNatives 类不是公开的。那么有人知道我该怎么做吗？

我知道可以通过反射访问私有方法和字段，所以我问，这是否也是可能的。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T18:56:54.003

我找到了解决方案。
这不是直截了当，但它有效=）

```
MethodHandle mh; // a MethodHandle Object
Class<?> mhn;
    try {
        mhn = Class.forName("java.lang.invoke.MethodHandleNatives");
        Constructor<?> con = mhn.getDeclaredConstructor();
        con.setAccessible(true);
        Object mhnInstance = con.newInstance();
        Method getTargetMethod = mhn.getDeclaredMethod("getTargetMethod", new Class<?>[]{MethodHandle.class});
        getTargetMethod.setAccessible(true);
        Method inside = (Method) getTargetMethod.invoke(mhnInstance, mh);
        System.out.println("INSIDE = " + inside.toGenericString());

    } catch (Throwable e) {
        e.printStackTrace();
    } 
```

# routing - 萨米路由不工作

> ID：16040732
> 
> 赞同：5
> 
> 时间：2013-04-16T15:15:07.350
> 
> 标签：routing, sammy.js

我无法让 sammy.js 路由按预期工作。

我有以下 JavaScript。

```
(function ($) {

    var app = $.sammy('#main', function () {

        this.get('#/', function (context) {
            context.log("start page");
        });

        this.get("#/another/:id/", function (context) {
            context.log("another page with id = " + context.params["id"]);        
        });
    });

    $(function (context) {
        app.run('#/');
    });

})(jQuery); 
```

我的理解是，每当 URL 发生变化时，只要新路由对应于声明的路由之一，那么我应该在控制台日志中看到相关消息。

但我没有。

当页面首次加载时，我可以看到“起始页”消息。到现在为止还挺好。

如果我那时

*   单击指向 [my url]/#/another/1/ 的链接
*   在地址栏中手动输入 [my url]/#/another/1/ 并按 <Enter>

...没有任何反应，*即*我没有看到第二条路线的消息。

但是，对于地址栏中的第二条路由，如果我现在按 F5 或单击浏览器的*刷新*按钮，则页面会重新加载并显示预期的控制台消息。

我是否误解了，或者当超链接或键盘更改 URL 哈希时，Sammy 不应该注意到，然后采取相应的行动？还有什么我需要添加到我的脚本中的吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-30T16:09:39.393

每个 sammy 应用程序都需要附加到一个 DOM 元素。

因此，您可能缺少`#main`页面中的元素。

因此，您需要`#main`在 DOM 中的某处添加一个元素：

```
<div id="main">
</div> 
```

或者你需要在没有选择器的情况下初始化 sammy

```
var app = $.sammy(function () {

    this.get('#/', function (context) {
       context.log("start page");
    });

    this.get("#/another/:id/", function (context) {
       context.log("another page with id = " + context.params["id"]);
    });
}); 
```

在这种情况下，它会将自身附加到`body`元素上。

[现场演示](http://jsbin.com/oyujib/1/)。

# validation - 如何在包含对象的模型属性上设置 Backbone.Validation 验证？

> ID：16040735
> 
> 赞同：0
> 
> 时间：2013-04-16T15:15:09.350
> 
> 标签：validation, backbone.js

我有一个具有密码属性的模型。请求负载中的密码属性如下所示：

```
loginId: "yourId",
password: {password: yourpassword} 
```

如何使用 Backbone.validation 对此进行验证？

我试图做：

```
validation: {
   loginId: {
       required: true,
       msg: 'Please Enter a Login ID.'
    },
   password: {
       required: true,
       msg: 'Please Enter a Password.' 
   }
} 
```

但是，我的密码总是无法通过验证。我认为这是因为代码无法检查密码属性哈希内的密码属性。你知道我怎样才能使这个验证正常工作吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T20:04:41.583

我能够通过在模型中使用自定义验证函数来实现这一点：

```
validation: {
    loginId: {
      required: true,
      msg: 'Please Enter a Login ID.'
    },
    password: function(value, attr, computedState) {
      if(!value || !value.get('password')) {
          return 'Please enter a password.';
      }
    {
},
default: function(){
    return {
        "password" : new Backbone.Model(),
    }; 
}, 
```

我必须指定一个默认模型，因为模型上的密码属性实际上是服务器上的密码模型，所以你需要给初学者一个空白模型。我还必须确保我视图中的绑定设置正确。

# javascript - 如何在struts 2中将迭代器索引值传递给Javascript？

> ID：16040743
> 
> 赞同：-1
> 
> 时间：2013-04-16T15:15:43.833
> 
> 标签：javascript, jquery, html-table, struts2, iterator

我在 Struts 2 中有一个动态表。我想在其中将迭代器索引值传递给 Javascript 函数。我怎样才能做到这一点？我已经给出了下面的代码。

这是我的桌子：

```
<table class="tblborder" id="priorIncident">
        <thead>
            <tr bgcolor="gray">
                <th colspan="5" align="center"><s:text name="priorIncidentTab" /></th>
            </tr>
            <tr bgcolor="black">
                <th><s:text name="date" /></th>
                <th><s:text name="reason" /></th>
                <th><s:text name="warningInd" /></th>
                <th><s:text name="warningDate" /></th>
                <th><s:text name="warningDesc" /></th>
            </tr>
        </thead>
        <tbody>
        <s:iterator value="claimData.priorIncidents" var="priorIncident" status="status">
            <tr>
                <s:hidden name="claimData.priorIncidents[%{#status.index}].oid" />
                <td><s:textfield theme="simple" name="claimData.priorIncidents[%{#status.index}].incidentDate" id="incidentDate1"/></td>
                <td><s:textfield theme="simple" name="claimData.priorIncidents[%{#status.index}].incidentReason" id="incidentReason1"/></td>
                <td>
                    <s:select headerKey="" headerValue="Select" list="#{'Y':'Yes', 'N':'No'}" theme="simple" name="claimData.priorIncidents[%{#status.index}].hasWarning" id="hasWarning1"/>
                </td>
                <td><s:textfield theme="simple" name="claimData.priorIncidents[%{#status.index}].warningDate" id="warningDate1"/></td>
                <td><s:textfield theme="simple" name="claimData.priorIncidents[%{#status.index}].warningDesc" id="warningDesc1"/></td>
            </tr>
        </s:iterator>
        </tbody>
    </table>
    <td><a href="#" id="add" onclick="MyFunction(%{#status.index})">Add</a></td>
    <td><a href="#" id="delete">Delete</a></td> 
```

当我单击添加链接（不在迭代器内）时，我应该能够将索引值传递给一些 Javascript 函数吗？由于我是 JS 新手，有人可以帮忙吗？任何答案都非常感谢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:03:53.867

缺少单引号......这必须有效

```
<a href="#" id="add" onclick="MyFunction('%{#status.index}')">Add</a></td> 
```

如果不尝试如下

```
<a href="#" id="add" onclick="MyFunction('<s:property value="%{[#stat.index]}"/>')"> Add</a></td> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T09:08:38.843

状态范围在迭代器内部。使用标准 c 标签库将 status.index 的值设置为页面范围变量。

```
<c:set var="foo" scope="page" value="..."/> 
```

顺便说一句， status.index 的最后一个值始终是数组 -1 的大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T15:30:01.167

目前还不清楚你到底要什么。

您可以在渲染时使用列表的大小初始化 JS 变量。`MyFunction`不过，需要*增加*该值，以便您可以添加行；对函数调用中的值进行硬编码将不起作用。

这意味着硬编码方法调用中的值将不起作用：您需要使用 JS 变量。

`<s:set>`如果您的目标是有一个在循环结束时开始计数的“添加”链接，您还可以在迭代器块中添加一个变量来增加计数器，或者在最后一次迭代中设置一个变量。

最终，由于您需要在添加更多项目时不断更新该值，因此简单地设置一个具有列表大小的 JS 变量似乎是最佳选择。如果您想要*每个*项目的“添加”链接，那么您可以使用迭代块*内*的索引。

# sitecore - 带有复选框字段标准值的 Sitecore 快速查询

> ID：16040744
> 
> 赞同：1
> 
> 时间：2013-04-16T15:15:46.103
> 
> 标签：sitecore, sitecore6

我为我称为 Lawyer 的模板定义了标准值。在标准值中，Lawyer 的“IsActive”属性设置为选中或“打开”。

当我向我的律师询问他们是否活跃时，我的问题就出现了。

在第一个配置中，我使用普通的 Sitecore 查询并获得我期望的所有结果。

## ![常规 Sitecore 查询](https://i.stack.imgur.com/BYiLI.png)

当我将此查询切换为快速查询时，我得到以下结果。 ![在此处输入图像描述](https://i.stack.imgur.com/eEa1M.png)

Edward Bailey 现在失踪了，因为他是唯一一位没有手动修改其默认设置的 IsActive 框的律师。

为什么 Sitecore 查询会以这种方式运行，是否有好的解决方法？（当然除了不使用快速查询）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T15:38:50.497

不幸的是，Sitecore Fast Query 没有也不能基于标准值进行查询。我建议切换到 Sitecore.Search/Lucene。

[http://sdn.sitecore.net/upload/sdn5/developer/using%20sitecore%20fast%20query/using%20sitecore%20fast%20query.pdf](http://sdn.sitecore.net/upload/sdn5/developer/using%20sitecore%20fast%20query/using%20sitecore%20fast%20query.pdf)

Sitecore 快速查询的限制包括：

*   查询中的有限轴和特殊属性
*   您不能将特殊属性放在条件的开头
*   不考虑上下文语言
*   不支持排序
*   不支持继承的标准值或克隆值，或代理项
*   不支持函数、运算符或子查询
*   不支持将路径管道化为一个表达式

# php - 使用 jQuery Mobile 从 JSON 获取内容

> ID：16040745
> 
> 赞同：0
> 
> 时间：2013-04-16T15:15:47.417
> 
> 标签：php, json, jquery-mobile

我试图弄清楚如何在 jQuery Mobile 中使用 JSON 检索简单的 html 内容。

到目前为止，我是这样做的：

匹配信息.php：

```
$str = '<h2>This is a test</h2><p>What is going on here?</p>';

echo $_GET['callback'] . '(' .json_encode($str). ')'; 
```

这是我尝试接收它的方式：

```
$(document).on('pageshow', function (){

    $.mobile.loading('show');
    $.getJSON("http://mypage.com/matchinfo.php", function (result){
        $("#pageName").html(result.html);
    });

    $('#pageName').content('refresh');
    $.mobile.loading('hide');

}); 
```

微调器一直在加载！我可以用 listview 做到这一点，但在这里我只想获取一些内容！？

任何帮助表示赞赏并提前感谢:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T15:17:50.520

您不是在输出 JSON，而是在输出 JSONp。您可能不应该使用`getJSON`它，JSONp 不应该与 XMLHTTPRequest (AJAX) 一起使用。

`getJSON`是以下的简写：

```
$.ajax({
  dataType: "json",
  url: url,
  data: data,
  success: success
}); 
```

[http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T15:20:07.273

您可以使用 jQuery`$.get`而不是`$.getJSON`

```
$.get('http://mypage.com/matchinfo.php', function(result) {
    $('#pageName').html(result);
}); 
```

另请注意，在`.html()`函数中您只需要传递`result`而不是`result.html`

# c# - EntityFramework：通过工作单元模式保存每个请求的实体上下文

> ID：16040746
> 
> 赞同：0
> 
> 时间：2013-04-16T15:15:48.587
> 
> 标签：c#, asp.net-mvc, unit-of-work

有很多关于工作单元模式的信息，但其中大部分是不同的。

我了解到我应该为每个请求拥有自己的实体上下文。我应该使用工作单元模式来实现这个目标（从这里开始。[实体框架和连接池](https://stackoverflow.com/questions/3653009/entity-framework-and-connection-pooling/3653392#3653392)）

所以我已经以这种方式实现了它：[http ://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-the-repository-and-unit-of-work-模式中的-an-asp-net-mvc-应用程序](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-the-repository-and-unit-of-work-patterns-in-an-asp-net-mvc-application)

但是只有那个实现，每个请求我没有一个上下文，所有请求都共享相同的上下文，对吗？

然后我找到了这个链接： http: [//www.mindscapehq.com/blog/index.php/2008/05/12/using-the-unit-of-work-per-request-pattern-in-aspnet-mvc/](http://www.mindscapehq.com/blog/index.php/2008/05/12/using-the-unit-of-work-per-request-pattern-in-aspnet-mvc/)

但现在我记得我不应该**在**session / HttpContext.Items 变量中保存上下文。那正确吗？

我在哪里可以找到*最好的实施*教程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T15:19:07.233

我遵循您的[第二个链接](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-the-repository-and-unit-of-work-patterns-in-an-asp-net-mvc-application)中给出的模式。您没有在具有该模式的所有请求中共享上下文。看一下示例代码：

```
public class StudentController : Controller
{
    private IStudentRepository studentRepository;

    public StudentController()
    {
        this.studentRepository = new StudentRepository(new SchoolContext());
    }
} 
```

对于`Student`控制器的每个请求，都会创建该类的一个新实例。在该类的构造函数中，它正在创建一个具有新上下文的新存储库实例。这意味着上下文将仅在该请求的生命周期内存在。

**编辑**：这里有一点澄清：

也许在这个过程中倒退会有助于澄清。从访问者在您的控制器中执行某些操作开始。ASP.NET 将创建控制器类的实例。当它创建该实例时，您将在内存中拥有一个上下文，该上下文将在**该请求的持续时间内存在，并且不再存在**。

这很好，因为您正在控制器中执行工作。举个例子，用户要求更新他们的个人资料。您将如何使用实体框架 (EF) 来处理它？首先，您将使用您的存储库并获取他们的用户记录。您的上下文现在知道该对象。然后您获取访问者提供的数据（假设他们想要更改他们的电话号码）并使用新值更新您的 EF 对象。上下文会跟踪这些更改，因此在您的操作结束时，您可以调用`.Save()`并对您的数据库进行适当的更新。

# kendo-ui - 将剑道工具栏放在网格底部

> ID：16040747
> 
> 赞同：0
> 
> 时间：2013-04-16T15:15:48.867
> 
> 标签：kendo-ui, kendo-grid

我有一个带有工具栏的剑道网格，我如何将它放在网格之后。

我进行了快速搜索并在堆栈中找到了[它](https://stackoverflow.com/questions/12501427/kendo-ui-place-command-toolbar-at-bottom-of-grid)，但我的命令栏仍然显示在网格上方。

我不知道这里出了什么问题，谁能指出我正确的方向？代码：

```
 <div id="divDependentDetails" >
  @if (Model.IsDependentGridEnabled)
  {
@(Html.Kendo().Grid(Model.DependentDetailsList)
            .Name("DependentGrid")
            .Events(e => e.SaveChanges("DependentGridSave")

            )
                   .Columns(columns =>
                   {
                       columns.ForeignKey(p => p.TitleCode, Model.TitleList, "TitleCode", "TitleDescription").Title("Title");
                       columns.Bound(p => p.FirstName).Title("First Name");
                       columns.Bound(p => p.MiddleName).Title("Middle Name");
                       columns.Bound(p => p.LastName).Title("Last Name"); ;
                       columns.ForeignKey(p => p.Gender, Model.GenderList, "TitleCode", "TitleDescription").Title("Gender");
                       columns.ForeignKey(p => p.RelationShipCode, Model.RelationShipList, "RelationShipCode", "RelationShipName").Title("Relationship");
                       columns.Bound(p => p.DepDOB).Format("{0:dd-MMM-yyyy}").Title("Date of Birth");
                       columns.Bound(p => p.RelationShipStartDate).Format("{0:dd-MMM-yyyy}").Title("Relationship Start Date");
                       columns.Bound(p => p.RelationShipEndDate).Format("{0:dd-MMM-yyyy}").Title("Relationship End Date");
                       columns.Bound(p => p.EmailAddress).Title("Email");
                       columns.Bound(p => p.DepPassportNumber).Title("Passport Number");
                       columns.Bound(p => p.DepPassportExpDate).Format("{0:dd-MMM-yyyy}").Title("Passport Expiry");
                       columns.Command(command => command.Destroy());
                   })

                    .ToolBar(toolBar =>
                    {
                        toolBar.Create().Text("Add");
                        toolBar.Save().SaveText("Submit").CancelText("Reset");
                    })
                   .Editable(editable => editable.Mode(GridEditMode.InCell))

                   .Sortable()
                   .Resizable(resize => resize.Columns(true))
                   .Filterable()
                   .DataSource(dataSource => dataSource
                       .Ajax()
                        .Batch(true)
                       .ServerOperation(false)
                       .Model(model =>
                       {
                           model.Id(m => m.DependantDetialId);

                       })
                       .Update(update => update.Action("DependentDetails_Update", "EmployeeSelfService")
                 )
                 .Create(create => create.Action("DependentDetails_Create", "EmployeeSelfService")
         )
                 .Destroy(delete => delete.Action("DependentDetails_Destroy", "EmployeeSelfService")
             )
                 .Events(e => e.RequestEnd("DependentGrid_onComplete")
                 )
                   )
                   )

  }
</div>
<script>
    $("#DependentGrid").find(".k-grid-toolbar").insertAfter($("#DependentGrid .k-grid-content"));
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T05:55:24.013

我明白了......在浏览了呈现的 HTML 之后，我发现其中没有“.k-grid-content”，只有“.k-grid”，而且效果很好......

```
<script>

// $("#DependentGrid").find(".k-grid-toolbar").insertAfter($("#DependentGrid .k-grid-content"));  --- not working

// Working Line 

$("#DependentGrid").find(".k-grid-toolbar").insertAfter($("#divDependentDetails .k-grid"));
</script> 
```

# asp.net-mvc - 在 ASP.NET MVC 站点上使用 Cufon

> ID：16040754
> 
> 赞同：2
> 
> 时间：2013-04-16T15:16:07.293
> 
> 标签：asp.net-mvc, cufon

我的 ASP.NET MVC 站点上有这样的菜单

```
<ul class="site-nav sf-menu">
<li @CurrentItem("Index")>@Html.ActionLink(Resources.Global.Home_Menu_Home, "Index", "Home")</li>
<li @CurrentItem("WhoWeAre")>@Html.ActionLink(Resources.Global.Home_Menu_WhoWeAre, "WhoWeAre", "Home")</li>
<li>...</li>
<li>...</li>
</ul> 
```

（菜单项的名称取自 Global.resx，我无法更改）。
我尝试在我的菜单中使用 Cufon

```
<script type="text/javascript" src="/Scripts/cufon-yui.js"></script>
<script type="text/javascript" src="/Scripts/Aller_400.font.js"></script>
<script type="text/javascript">
    $(window).load(function () {
        Cufon.replace('ul.site-nav li a', { fontFamily: 'Aller', hover: true });
    });
</script> 
```

但是我的菜单项消失了（因为它们是动态形成的）所以，我尝试使用这样的脚本

```
<script type="text/javascript">
$(document).ready(function () {
var replace = function () {
    var gotinside = false
    $('ul.site-nav').each(function (i) {
        gotinside = true;
        if (i < 1) {
            Cufon.replace('ul.site-nav li a', { fontFamily: 'Aller', hover: true });
        }
    })
    if (!gotinside)
        setTimeout(replace, 1000);
}
replace();
});
</script> 
```

但它也不起作用。
请帮我解决这个问题。

# javascript - 在设计模式下编辑 Par 导致 JavaScript 错误

> ID：16040759
> 
> 赞同：1
> 
> 时间：2013-04-16T15:16:17.540
> 
> 标签：javascript, aem

我不知道这是怎么发生的，但是在*par （文本组件）的设计模式下单击 Edit 会在**widget.js* 中生成脚本错误。当您单击以编辑它们时，所有其他组件都可以正常工作。

以下是错误的控制台转储：

火狐： `Error: TypeError: this.items.items[(i + 1)] is undefined Source File: http://localhost:4502/libs/cq/ui/widgets.js Line: 147092`

有问题的完整代码块：

```
if (title != this.items.items[i + 1].title) {
  // next title is different >> break
  break;
} 
```

* * *

铬合金：`Uncaught TypeError: Cannot read property 'title' of undefined, widgets.js:147092`

上述错误的一些包含的跟踪路径：

```
CQ.Ext.form.FieldSet.listeners.render widgets.js:147092
EXTUTIL.Event.fire widgets.js:9214
EXTUTIL.Observable.fireEvent widgets.js:8860
CQ.Ext.extend.render widgets.js:22566
CQ.Ext.layout.ContainerLayout.CQ.Ext.extend.renderItem widgets.js:26452
CQ.Ext.layout.FormLayout.CQ.Ext.extend.renderItem widgets.js:28653
CQ.Ext.layout.ContainerLayout.CQ.Ext.extend.renderAll widgets.js:26443
CQ.Ext.layout.ContainerLayout.CQ.Ext.extend.onLayout widgets.js:26429
CQ.Ext.layout.AnchorLayout.CQ.Ext.extend.onLayout widgets.js:26961 
```

标题在哪里`par`？它不作为独立项目包含在文本组件中，因此这里有些东西没有意义。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T17:33:34.033

这个问题不是由于“par”的标题问题，而是组件的标题问题。基本上，当您在设计模式下单击 parsys 的编辑按钮时，它会列出您的实例中存在的所有组件（/libs 和 /apps 下的组件）。

这是由您的小部件库中的**ComponentSelector.js完成的。**组件选择器收集实例中的所有组和组件，忽略以“。”开头的组。（例如.hidden），忽略那些没有标题的组件，按标题的升序排列所有组，然后按升序排列特定组下的所有组件，最后将列表显示给作者，作者从那里得到为该特定 parsys 选择允许的组件。

现在，如果您的实例中存在 2 个或多个具有相同名称和相同组的组件，则它会尝试在组件名称后面附加项目名称，以便于识别（当以升序排列时，这些组件相邻出现彼此之间，作者很难确定该组件属于哪个应用程序）。因此，例如，如果在foundation下以及geometrixx等下有一个名为“downloads”的组件，则将其显示为**downloads（foundation）**和**downloads（geometrixx）**等。

你提到的这段代码，检查当前组件的标题和下一个组件的标题是否相同，如果不同，则中断循环，否则继续循环以将项目名称附加到标题。

```
if (title != this.items.items[i + 1].title) {
  // next title is different >> break
  break;
} 
```

现在，如果特定组下相邻组件的标题相同，则此条件可以正常工作，除非并且直到**具有相同标题的组件是该特定组中的最后一个组件，当按升序排列时**。如果组中的最后 2 个组件具有相同的标题，则当最后一个元素的标题与下一个元素一起检查时`this.items.items[i + 1]`将为**null（数组索引超出范围异常） ，因此未定义对象上的****.title**会抛出例外`Uncaught TypeError: Cannot read property 'title' of undefined, widgets.js:147092`。

您可以通过将上述条件替换为以下内容来解决此问题

```
if (i != length - 1 && title != this.items.items[i + 1].title) {
    // next title is different >> break
    break;
} 
```

或者通过确保同一组下的最后两个组件没有相同的名称。（这基本上发生在您尝试复制粘贴组件时。因此，确保在复制现有组件后更改标题或组将避免此问题）。

# sql - 将行连接到 CLOB

> ID：16040761
> 
> 赞同：5
> 
> 时间：2013-04-16T15:16:25.647
> 
> 标签：sql, oracle

关于这个主题有很多类似的问题，但我找不到任何解决方案考虑到任何最终结果对于 varchar2 来说太大的问题。

所以我想做的是改变这个：

```
Column1 | Column2
-------- --------
1         Hello
1         world,
1         please help
2         Thanks
2         world,
2         you're the best. 
```

进入这个：

```
Column1 | Column2
-------- --------
1         Hello world, please help
2         Thanks world, you're the best. 
```

我的特殊问题是在某些情况下新的连接值超过 4000 个字符，所以我不能`LISTAGG`按我希望的那样使用。我对无需编写函数的解决方案特别感兴趣，但两者都可以。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-12T07:54:04.760

正如 de.hh.holger 已经指出的那样，[LISTAGG WITH CLOB? XMLAGG 的字符串聚合超过 4000 个字符](http://sonra.io/listagg-with-clob-string-aggregation-exceeding-4000-characters-with-xmlagg/)确实解决了这个问题。

我已经详细说明了这个主题，如果字符串消息很长，这应该可以解决问题：

```
SELECT
   table_row_id,
   DBMS_XMLGEN.CONVERT (
     EXTRACT(
       xmltype('<?xml version="1.0"?><document>' ||
               XMLAGG(
                 XMLTYPE('<V>' || DBMS_XMLGEN.CONVERT(data_value)|| '</V>')
                 order by myOrder).getclobval() || '</document>'),
               '/document/V/text()').getclobval(),1) AS data_value
FROM (
   SELECT 1 myOrder, 1 table_row_id,'abcdefg>' data_value FROM dual
   UNION ALL
   SELECT 2, 1 table_row_id,'hijklmn' data_value FROM dual
   UNION ALL
   SELECT 3, 1 table_row_id,'opqrst' data_value FROM dual
   UNION ALL
   SELECT 4, 1 table_row_id,'uvwxyz' data_value FROM dual)
GROUP BY
   table_row_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-05T13:43:36.243

```
SELECT Column1 , LISTAGG(Column2, ' ') 
WITHIN GROUP (ORDER BY Column2) AS employees
FROM   Table1
GROUP BY Column1 ; 
```

**[请看看这篇文章](http://www.oracle-base.com/articles/misc/string-aggregation-techniques.php)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-26T10:47:58.227

您可以使用 xmlagg 连接 clob 列值，下面是它在上表中工作的查询：-

```
SELECT DEMO.COLUMN1, RTRIM(XMLAGG(XMLELEMENT(E, DEMO.COLUMN2, '').EXTRACT('//TEXT()') ORDER BY DEMO.COLUMN1).GETCLOBVAL(),',') AS COLUMN2
FROM DEMO_TBL DEMO
GROUP BY COLUMN1; 
```

# jquery - 用于 jquery 循环/.each 的 ie8 慢速脚本消息

> ID：16040763
> 
> 赞同：0
> 
> 时间：2013-04-16T15:16:33.967
> 
> 标签：jquery, internet-explorer-8, performance

在 ie8 中，我正在抛出以下消息

“此页面上的脚本导致 Internet Explorer 运行缓慢”

当更改触发以下代码的选择框时会发生这种情况，我知道使用 php 执行此操作会更好，但不幸的是，这不是一个选项。

代码显示从下拉列表中选择的场地上传递的事件。选择场地后，所有不在该场地的活动都将被隐藏。

代码运行的页面是[http://sussexpast.co.uk.blueplanetdns.com/events](http://sussexpast.co.uk.blueplanetdns.com/events)

谢谢

```
jQuery(function($) {

    function hideMonths(){
        var months = new Array('Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec');
        for( var i = 0; i < months.length; i++ ){
            //alert(months[i]);
            $('.events-list .post:visible .event-month:contains('+months[i]+')').not(':first').css('visibility','hidden');
        }
    }

    $(document).ready(function(){
        hideMonths();
    });

    $('.event-location-filter select').change( function() {
        var selectedProperty = $(this).val();
        //alert(selectedProperty);
        $('.post').each( function(){
            $(this).show()
            var eventProperty = $(this).find('.venue a').text();
            //alert(eventProperty);
            if( selectedProperty == 'Select a location' ){
                $(this).show()
                hideMonths();
            }
            else{
                if( eventProperty !== selectedProperty ){
                    $(this).hide()
                    $('.events-list .event-month').css('visibility','visible');
                    hideMonths();
                }
            }
        });
    });

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T15:20:16.947

缓存大部分选择器，这样每次迭代都不会搜索整个 dom。

```
function hideMonths(){
    var months = new Array('Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec');
    var $eventMonths = $('.events-list .post:visible .event-month').not(':first');
    for( var i = 0; i < months.length; i++ ){
        //alert(months[i]);
        $eventMonths.filter(':contains('+months[i]+')').css('visibility','hidden');
    }
} 
```

我也认为没有理由为每个帖子都这样做，而是在`.each`.

```
 $('.post').each( function(){
        $(this).show()
        var eventProperty = $(this).find('.venue a').text();
        //alert(eventProperty);
        if( selectedProperty == 'Select a location' ){
            $(this).show()
            //hideMonths();
        }
        else{
            if( eventProperty !== selectedProperty ){
                $(this).hide()
                $('.events-list .event-month').css('visibility','visible');
                //hideMonths();
            }
        }
    });
    hideMonths(); 
```

# asp.net-mvc - 手动更新元素的有效性

> ID：16040770
> 
> 赞同：0
> 
> 时间：2013-04-16T15:16:59.557
> 
> 标签：asp.net-mvc, jquery-validate, unobtrusive-validation

我正在使用`jquery.validate`并且`jquery.validate.unobtrusive`我想知道如何从 javascript 代码中手动使某些元素“有效”或“无效”？

我正在尝试修改`$('form').validate()`属性`successList` `invalid`，`errorMap`但它仍然没有改变`$('form').valid()`' 的行为，所以显然我没有做对。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T15:41:32.387

**引用操作：**

> “我想知道如何从 javascript 代码中手动使某些元素“有效”或“无效”？

`rules`只有与用户输入的数据一起分配的才能“*制作*”输入元素`valid`或`invalid`. 没有办法让你覆盖它，否则使用插件真的没有意义。

* * *

但是，您可以使用[和](http://docs.jquery.com/Plugins/Validation/rules#.22add.22rules)[方法](http://docs.jquery.com/Plugins/Validation/rules#.22add.22rules)*动态*更改任何规则。[`.rules('add')``.rules('remove')`](http://docs.jquery.com/Plugins/Validation/rules#.22add.22rules)

* * *

**根据 OP 的评论进行编辑：**

> 假设您的输入字段需要自定义验证并取决于其他元素的值，例如下拉

使用[调用的内置方法`addMethod`](http://docs.jquery.com/Plugins/Validation/Validator/addMethod#namemethodmessage)将您的自定义函数转换为插件使用的自定义规则。

# vb.net - 如何使用 LINQ (vb.net) 查找每列的最大值

> ID：16040771
> 
> 赞同：1
> 
> 时间：2013-04-16T15:17:05.560
> 
> 标签：vb.net, linq, max, multiple-columns

我正在使用 LINQ (vb.net) 编写代码来查找数据表中每一列的最大值。我的数据如下所示：

+------------+----------+---------+--------- -+
| 日期 | 价值1 | 价值2 | 价值3 |
+-----------+---------+----------+---------+
| 2013 年 1 月 1 日 | 12 | 13 | 19 |
| 2013 年 1 月 2 日 | 9 | 20 | 17 |
| 2013 年 1 月 3 日 | 17 | 5 | 10 |
+-----------+---------+----------+---------+

我想编写一个代码来从所有数据行的每列中返回具有最大值的单个数据记录，以便我可以将结果与 gridview 绑定：

+----------+----------+----------+
| 最大1 | 最大2 | 最大3 |
+----------+----------+----------+
| 17 | 20 | 19 |
+----------+----------+----------+

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T15:24:18.650

您可以使用`Max`：

```
Dim rows = table.AsEnumerable()
Dim Max1 = rows.Max(Function(r) r.Field(Of Int32)("Value1"))
Dim Max2 = rows.Max(Function(r) r.Field(Of Int32)("Value2"))
Dim Max3 = rows.Max(Function(r) r.Field(Of Int32)("Value3")) 
```

如果这些字段实际上是字符串（它们不应该），则必须使用`Int32.Parse`.

如果您需要这些值作为 的数据源`GridView`，您可以使用`DataTable`一行：

```
Dim tblSource = New DataTable()
tblSource.Columns.Add("Max1", GetType(Int32))
tblSource.Columns.Add("Max2", GetType(Int32))
tblSource.Columns.Add("Max3", GetType(Int32))
tblSource.Rows.Add(Max1, Max2, Max3) 
```

# asp.net-mvc - 日期验证允许无效日期

> ID：16040773
> 
> 赞同：3
> 
> 时间：2013-04-16T15:17:06.030
> 
> 标签：asp.net-mvc, jquery-validate

使用这个模型：

```
public class Holiday
{
  [Required]
  public DateTime From { get; set; }
} 
```

有了这个观点：

```
@model Holiday
@using System.Web.Optimization
@{
    ViewBag.Title = "Request";
}
@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)

    <fieldset>
        <legend>Holiday Request</legend>
        <div class="editor-label">
            @Html.LabelFor(model => model.From)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.From)
            @Html.ValidationMessageFor(model => model.From)
        </div>
        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
}
@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
} 
```

如果我输入文本，我会得到一个无效的日期。如果我将该字段留空，我也会收到一条消息。但是，如果我输入的日期`2013/20/20`是有效的，我该如何更改？我认为这可能与文化有关，但这在所有文化中都是无效的。

**源 HTML**

```
<form action="/" method="post">
    <fieldset>
        <legend>Holiday Request</legend>
        <div class="editor-label">
            <label for="From">From</label>
        </div>
        <div class="editor-field">
            <input class="text-box single-line" data-val="true" data-val-date="The field From must be a date." data-val-required="The From field is required." data-val-weekdaydate="Must be a working day" id="From" name="From" type="datetime" value="" />
            <span class="field-validation-valid" data-valmsg-for="From" data-valmsg-replace="true"></span>
        </div>
        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
</form>

    <script src="/Scripts/jquery.unobtrusive-ajax.js"></script>
<script src="/Scripts/jquery.validate.js"></script>
<script src="/Scripts/jquery.validate.unobtrusive.js"></script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T10:59:20.877

我曾经`moment.js`调整过`date`验证方法`jQuery.validation.js`，现在看起来像这样：

```
date: function (value, element) {
  return this.optional(element) || moment(value, "DD-MM-YYYY").isValid();
}, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T18:58:27.180

这似乎是 Firefox 和 IE（我目前正在运行 20.0.1 和 IE8）中的某种问题（提示：功能）。来自 jQuery 验证的相关代码是这样的：

```
date: function(value, element) {
    return this.optional(element) || !/Invalid|NaN/.test(new Date(value));
} 
```

用于`new Date()`检查日期的有效性。

如果我`new Date("2020/20/20")`输入控制台，它会返回一个有效的日期`Date {Fri Aug 20 2021 00:00:00 GMT-0500 (Central Daylight Time)}`。换句话说，它“滚动”了从 20 到 8 的月份（20-12 = 8...8 月）。

但是，如果我输入日期`new Date("2020-20-20")`而`-`不是`/`，日期解析工作正常，我得到`Date {Invalid Date}`. 如果您可以在日期字段上强制执行严格的 yyyy-MM-dd 格式，那么解决这个问题非常简单。只需像这样覆盖日期函数：

```
$.validator.methods.date = function (value, element) {
    return this.optional(element) || 
        (/^(\d{4}-\d{2}-\d{2})$/.test(value) &&
        !(/Invalid|NaN/.test(new Date(value))));   
} 
```

[jsfiddle](http://jsfiddle.net/JutnA/)

基本上，我只是添加了一个简单的正则表达式来确保输入的值是 dddd-dd-dd 格式（带有`-`字符）。如果通过，结果将传递给浏览器进行日期验证。这不是一个很好的解决方案，但我认为强制日期格式不一定是坏事，因为它可以促进一致性。您可以根据需要更改正则表达式，例如`\d{4}-\d{1,2}-\d{1,2}`，但我认为诀窍是强制执行`-`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-29T12:34:10.530

[http://jqueryvalidation.org/date-method](http://jqueryvalidation.org/date-method) “不应使用此方法，因为它依赖于新的 Date 构造函数，它在浏览器和语言环境中的行为非常不同。”

当我使用 MVC 脚手架时，我添加到 POCO 以及：

```
[DisplayFormat(ApplyFormatInEditMode=true, DataFormatString = "{0:dd-MMM-yyyy}")] 

if (!Modernizr.inputtypes.datetime) {
    $("input[type='datetime']").datepicker({ dateFormat: "dd-M-yy" });
} 
```

上面的 jQuery 页面有一个示例，显示 Luke 和我的日期品味不适用于 jquery.validate.js；感谢卢克的调整！

# java - JFreeChart 条形图设计变更

> ID：16040776
> 
> 赞同：0
> 
> 时间：2013-04-16T15:17:08.650
> 
> 标签：java, jfreechart, bar-chart

我正在寻找一种方法来改变 JFreechart 中条形图的设计。这是我的excel图表。如何更改以下设计格式的 jfreechart 条形图？

![在此处输入图像描述](https://i.stack.imgur.com/EwQlB.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T16:24:13.247

以下代码可以生成类似的图表。够了吗？

![条形图示例](https://i.stack.imgur.com/CsqJM.png)

```
public class BarExample {
    public static void main(String arg[]) throws IOException {
        DefaultCategoryDataset dataSet = new DefaultCategoryDataset();
        dataSet.setValue(2, Integer.valueOf(1), Integer.valueOf(5));
        dataSet.setValue(7, Integer.valueOf(1), Integer.valueOf(10));
        dataSet.setValue(4, Integer.valueOf(1), Integer.valueOf(15));
        dataSet.setValue(9, Integer.valueOf(1), Integer.valueOf(20));
        dataSet.setValue(6, Integer.valueOf(1), Integer.valueOf(25));
        JFreeChart chart = ChartFactory.createBarChart
                ("Chart", "Number of Days", "Number of ECR", dataSet,
                        PlotOrientation.VERTICAL, false, true, false);
        CategoryPlot plot = chart.getCategoryPlot();
        // Reduce margin between bars
        plot.getDomainAxis().setCategoryMargin(0.0);
        // Reduce left and right margin
        plot.getDomainAxis().setLowerMargin(0.0);
        plot.getDomainAxis().setUpperMargin(0.0);
        FileOutputStream outputStream = new FileOutputStream(
                new File("chart.png"));
        ChartUtilities.writeChartAsPNG(outputStream, chart, 1024, 768);
    }
} 
```

# c# - c# windows，本地数据库（sql server），连接字符串无法正常工作

> ID：16040781
> 
> 赞同：0
> 
> 时间：2013-04-16T15:17:21.187
> 
> 标签：c#, sql-server-2008, sql-server-ce, connection-string

这是我的连接字符串

```
SqlConnection conn = new SqlConnection(@"Data Source=C:\Users\admin\documents\visual studio 2010\Projects\WFA1\WFA1\database.sdf"); 
```

我从属性中复制了它，我在前面添加了@，但没有改变任何东西。在构建和运行期间没有错误。但是当我单击插入按钮时，会出现以下错误。

“与 SQL Server 建立连接时发生网络相关或特定于实例的错误。找不到服务器或无法访问该服务器。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。”

我尝试编辑连接字符串并使用数据目录而不是整个路径，但发生了同样的错误，我是 .net 的新手，所以我无法弄清楚可能是什么原因。我试过谷歌，但我不知道那里的解决方案是否与我的问题有关。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T15:19:13.540

SQL Server 的数据源是机器名，而不是文件名。

您应该添加对 SQL CE 程序集的引用，然后执行以下操作：

```
SqlCeConnection conn = new SqlCeConnection(@"Data Source=C:\Users\admin\documents\visual studio 2010\Projects\WFA1\WFA1\database.sdf"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T15:25:38.803

您使用了错误类型的 SQL 连接。你应该使用这个[`SqlCeConnection`](http://msdn.microsoft.com/en-us/library/system.data.sqlserverce.sqlceconnection%28v=vs.80%29.aspx)类：

```
SqlCeConnection conn = new SqlCeConnection(@"Data Source=C:\Users\admin\documents\visual studio 2010\Projects\WFA1\WFA1\database.sdf"); 
```

[这是 SQL CE 连接字符串的一个非常好的参考](http://www.connectionstrings.com/sql-server-ce)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T15:22:50.740

对于 MSSQL Server Compact Edition，您应该使用`SqlCeConnection`该类。

所以这应该工作：

```
SqlCeConnection sqlConnection = new SqlCeConnection(@"Data Source=C:\Users\admin\documents\visual studio 2010\Projects\WFA1\WFA1\database.sdf"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T15:27:10.010

如下创建连接字符串：

在命名空间中添加 `using System.Data.SqlServerCe;`

```
SqlCeConnection conn = new SqlCeConnection(@"Data Source=C:\Users\admin\documents\visual 
studio 2010\Projects\WFA1\WFA1\database.sdf; Persist Security Info=False;"); 
```

如果`.sdf`文件在你的项目中，那么你可以使用：

```
string strConnectionString ="Data Source=" + (System.IO.Path.GetDirectoryName(System.Reflection.Assembly.
GetExecutingAssembly().GetName().CodeBase) + "\\database.sdf;Persist Security Info=False;";
SqlCeConnectionconn = new SqlCeConnection(strConnectionString ); 
```

# java - 在 Java 中创建 GUI 时编译错误

> ID：16040782
> 
> 赞同：0
> 
> 时间：2013-04-16T15:17:22.583
> 
> 标签：java, user-interface, compiler-errors, initialization

我的程序打开一个文件，允许您查看或编辑它，然后再次保存。到目前为止，我只有 GUI 布局。

因此，当我尝试编译程序时，出现以下错误：

```
 FileChooser.java:26: error: <identifier> expected
         fileChooser = newJFileChooser(); 
```

我得到了 ^^^ 错误四次，对于我初始化的每个组件一次。

```
 FileChooser.java:39: error: invalid method declaration; return type required
         public FileChooserGUI() { 
```

尝试创建构造函数时出现此^^^ 错误。

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.filechooser.*;

public class FileChooser extends JFrame { //JFrame is a container class in Swing

//declare all components and other variables
private JTextArea textArea; //b
private JButton openFileButton; //c
private JButton saveFileButton;
private JButton clearButton;

//Declare and initialize a JFileChooser object using JFileChooser's
//default constructor.
private JFileChooser fileChooser;
fileChooser = newJFileChooser();

//Declare and initialize a FileNameExtensionFilter object for .txt files.
private FileFilter fileFilter;
fileFilter = new FileNameExtensionFilter("text file", "txt");

//Set the JFileChooser object's current file filter by calling it's
//setFileFilter method and passing it the filter you created in e.
fileChooser.setFileFilter(fileFilter);

//constructor - initialize all components, add them to the container, 
//create listener objects, register them to listen for events
public JFileChooserLabGUI() {

    //call superclass constructor
    super("File Chooser");

    //initialize all components
    textArea = new JTextArea();
    openFileButton = new JButton("Open");
    saveFileButton = new JButton("Save");
    clearButton = new JButton("Clear");

    //create and register the listener object with
    //sources of events (the JButtons in this example)
    listener = new JFileChooserListener();
    openFileButton.addActionListener(listener);
    saveFileButton.addActionListener(listener);
    clearButton.addActionListener(listener);

    //arrange components in the window
    //Create a layout manager object and set this window's
    //layout manager to it
    textPanel = new JPanel();
    textPanel.setLayout(new GridLayout(1,2));
    textPanel.add(textArea);

    buttonPanel = new JPanel();
    buttonPanel.setLayout(new GridLayout(1,3,15,0));
    buttonPanel.add(openFileButton);
    buttonPanel.add(saveFileButton);
    buttonPanel.add(clearButton);
    this.setLayout(new GridLayout(3,1));

    //Add components to the container
    this.add(textPanel);
    this.add(buttonPanel);      

}//end of constructor
}//end of class 
```

我还没有完成侦听器类，但我认为这与仅显示 GUI 以确保布局正确无关？

我注意到当我在同一行中声明和初始化时，我没有收到这四个错误。我初始化有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T15:18:10.953

您正在尝试声明类型的构造函数，`JFileChooserLabGUI`但该类被声明为`FileChooser`：

```
public class FileChooser extends JFrame {
    public JFileChooserLabGUI() {
        ...
    }
} 
```

编辑：如前所述，还有其他问题。例如，您不能在方法/构造函数之外有一个简单的赋值语句：

```
fileChooser = newJFileChooser(); 
```

你会想把它放在你的构造函数中，*或者*作为变量声明的一部分。

...这可能意味着是`new JFileChooser()`，而不是对方法的调用`newJFileChooser()`。例如，如果您将其作为声明的一部分：

```
private JFileChooser fileChooser = new JFileChooser(); 
```

对 ,做同样的事情`FileFilter`，然后移动这一行：

```
fileChooser.setFileFilter(fileFilter); 
```

进入你的构造函数。

一般来说——特别是如果你对一种语言比较陌生——经常构建你的代码是一个非常好的主意。这样，您在发现错误时就有更好的机会理解错误，因为您只是编写了不正确的代码。哦，在你去的时候也写单元测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T15:48:58.063

我认为有几件事需要纠正

1.  构造函数名称与类名称不同。

2.  关于类方法之外的变量赋值：

    *   您必须同时声明和初始化变量。
    *   或（更好的方法）在构造函数中声明和初始化。签出[Java 变量声明](http://docs.oracle.com/javase/tutorial/java/javaOO/variables.html)
3.  此外，还有小的语法错误。new 和构造函数名称之间应该有空格。

    ```
    public FileChooser () {
       //call superclass constructor
       super("File Chooser");
       fileChooser=fileChooser = new JFileChooser();
       fileFilter=new FileNameExtensionFilter("text file", "txt");
       fileChooser.setFileFilter(fileFilter);

      ...
       } 
    ```

希望这可以帮助！

# python - Python 类 __init__ 布局？

> ID：16040784
> 
> 赞同：5
> 
> 时间：2013-04-16T15:17:32.823
> 
> 标签：python, class, init

在 python 中，编写如下`__init__`定义是不是很糟糕：

```
class someFileType(object):
    def __init__(self, path):
        self.path = path
        self.filename = self.getFilename()
        self.client = self.getClient()
        self.date = self.getDate()
        self.title = self.getTitle()
        self.filetype = self.getFiletype()
    def getFilename(self):
        '''Returns entire file name without extension'''
        filename = os.path.basename(self.path)
        filename = os.path.splitext(filename)
        filename = filename[0]
        return filename
    def getClient(self):
        '''Returns client name associated with file'''
        client = self.filename.split()
        client = client[1] # Assuming filename is formatted "date client - docTitle"
        return client 
```

初始化变量在哪里调用返回字符串的函数？或者它被认为是惰性编码？这主要是为了让我免于写作`something.filetype`，因为`something.getFiletype()`每当我想引用文件的某些方面时。

此代码是按客户端、然后按文档类型以及基于文件名中的数据的其他操作将文件分类到文件夹中。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-16T15:25:34.953

不，我不明白为什么那会是不好的形式。事实上，在创建实例时只计算一次这些值可能是一个好主意。

`property`您还可以使用缓存s将计算推迟到需要时：

```
class SomeFileType(object):
    _filename = None
    _client = None

    def __init__(self, path):
        self.path = path

    @property
    def filename(self):
        if self._filename is None: 
            filename = os.path.basename(self.path)
            self._filename = os.path.splitext(filename)[0]
        return self._filename

    @property
    def client(self):
        '''Returns client name associated with file'''
        if self._client is None:
            client = self.filename.split()
            self._client = client[1] # Assuming filename is formatted "date client - docTitle"
        return self._client 
```

现在，访问`somefiletypeinstance.client`将根据`self.filename`需要触发计算，并缓存它自己的计算结果。

在这种特定情况下，您可能还想创建`.path`一个属性；一个带有清除缓存值的设置器：

```
class SomeFileType(object):
    _filename = None
    _client = None

    def __init__(self, path):
        self._path = path

    @property
    def path(self):
        return self._path

    @path.setter
    def path(self, value):
        # clear all private instance attributes
        for key in [k for k in vars(self) if k[0] == '_']:
            delattr(self, key)
        self._path = value

    @property
    def filename(self):
        if self._filename is None: 
            filename = os.path.basename(self.path)
            self._filename = os.path.splitext(filename)[0]
        return self._filename

    @property
    def client(self):
        '''Returns client name associated with file'''
        if self._client is None:
            client = self.filename.split()
            self._client = client[1] # Assuming filename is formatted "date client - docTitle"
        return self._client 
```

因为`property`基于 - 的缓存确实增加了一些复杂性开销，所以您需要考虑是否真的值得花时间；对于您的具体简单示例，可能不是。属性的计算成本确实非常低，除非您计划创建大量这些类，否则与必须维护按需缓存属性的心理成本相比，提前计算属性的开销可以忽略不计。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-16T16:07:24.303

您的代码正在做两件不同的事情：

a) 通过将某些计算属性公开为变量而不是函数来简化类 API。

b) 预先计算它们的值。

第一个任务是属性的用途；一个直接的使用将使您的代码更简单，而不是更复杂，并且（同样重要）将使意图更清晰：

```
class someFileType(object):
    @property
    def filename(self):
        return os.path.basename(self.path) 
```

然后您可以编写`var.filename`，您将根据路径*动态*计算文件名。

@Martijn 的解决方案添加了缓存，它还负责 b 部分（预计算）。至少在您的示例中，计算很便宜，所以我认为这样做没有任何好处。

相反，缓存或预计算**会引发一致性问题**。考虑以下代码段：

```
something = someFileType("/home/me/document.txt")
print something.filename    # prints `document`
...
something.path = "/home/me/document-v2.txt"
print something.filename   # STILL prints `document` if you cache values 
```

最后一条语句应该打印什么？如果你缓存你的计算，**你仍然会得到`document`而不是`document-v2`！**除非您**确定**没有人会尝试更改基本变量的值，否则您需要避免缓存，或者采取措施确保一致性。最简单的方法是禁止对`path`属性的[设计目的之一进行修改。](http://docs.python.org/2/library/functions.html#property)

**结论：**使用属性来简化你的界面。不要缓存计算，除非出于性能原因需要。如果您缓存，请采取措施确保一致性，例如通过将基础值设为只读。

PS。这些问题类似于数据库规范化（非规范化设计会引发一致性问题），但在 python 中，您有更多资源来保持同步。

# h2 - 在 Win64 上的 H2 中创建存储函数

> ID：16040788
> 
> 赞同：1
> 
> 时间：2013-04-16T15:17:43.203
> 
> 标签：h2, flyway

在创建用户定义函数期间，我在 Win64 环境中遇到错误。我正在使用 flyway 执行以下简单脚本：

```
CREATE ALIAS TRANSLATE_NAME AS $$
String TRANSLATE_NAME(String value) {
  ...
return null;
}
$$ 
```

我收到以下错误：

```
java.io.IOException: CreateProcess error=2, The system cannot find the file specified

17:10:38 ERROR (ApacheCommonsLog.java:51) - com.googlecode.flyway.core.api.FlywayException: 
Error executing statement at line 1: 
CREATE ALIAS TRANSLATE_NAME AS $$

String TRANSLATE_NAME(String value) {
return null;
}
$$ 
```

这仅出现在 Win64 上，不会出现在 32 位 Linux 或 32 位 Windows 上。

有任何想法吗？我会很感激！请！

日志：

```
17:10:37 INFO (DriverManagerDataSource.java:153) - Loaded JDBC driver: org.h2.Driver
17:10:37 INFO (AbstractApplicationContext.java:1374) - Bean 'dataSource' of type [class org.springframework.jdbc.datasource.DriverManagerDataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
17:10:38 INFO (ApacheCommonsLog.java:43) - Creating Metadata table: "PUBLIC"."schema_version"
17:10:38 INFO (ApacheCommonsLog.java:43) - Current version of schema "PUBLIC": << Empty Schema >>
17:10:38 INFO (ApacheCommonsLog.java:43) - Migrating schema "PUBLIC" to version 1.1
17:10:38 INFO (ApacheCommonsLog.java:43) - Migrating schema "PUBLIC" to version 1.2
17:10:38 INFO (ApacheCommonsLog.java:43) - Migrating schema "PUBLIC" to version 1.3
17:10:38 INFO (ApacheCommonsLog.java:43) - Migrating schema "PUBLIC" to version 1.4
17:10:38 ERROR (ApacheCommonsLog.java:51) - com.googlecode.flyway.core.api.FlywayException: Error executing statement at line 1: CREATE ALIAS TRANSLATE_NAME AS $$
String TRANSLATE_NAME(String value) {
    if (value.equals("Ilya")) {
        return "Юлия";
    }
    return null;
}
$$
17:10:38 ERROR (ApacheCommonsLog.java:51) - Caused by java.io.IOException: CreateProcess error=2, The system cannot find the file specified
17:10:38 INFO (DefaultSingletonBeanRegistry.java:444) - Destroying singletons in... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T18:46:21.187

H2 需要类路径中的 JDK（类路径中的 tools.jar），或者`javac`需要作为外部进程使用。要查看是否`javac`在类路径中，请打开命令提示符并键入`javac`[Enter]。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-29T08:31:46.743

在我的例子中，JAVA_HOME 被定义为一个环境变量并且指向了错误的 JRE（没有 javac 命令）。我删除了它，因为它不再需要了，这就成功了。虽然这不太可能是您的特定场景，但它证明这与环境变量解析到 jdks 的路径有关。

# html - 滚动到页面上的某个位置

> ID：16040789
> 
> 赞同：0
> 
> 时间：2013-04-16T15:17:44.797
> 
> 标签：html, css, navigation, scroll

单击链接后，我试图移动到页面上的特定位置。这是我的网站：

[http://violetoeuvre.com/](http://violetoeuvre.com/)

当点击顶部的写作链接时，我希望页面跳转到写作部分，联系同样的事情，类似于这样：

[http://jsfiddle.net/4ygcf/](http://jsfiddle.net/4ygcf/)

但是，当我加入适当的 id 时，它不起作用。这是我的html：

```
<div class="wrapper_nav_box">
    <div id="nav_menu" id="nav_box_1"><a href="#home_writing">WRITING  |</a></div> 
```

和CSS：

```
.side_nav_contact {
        display:block;
        float:left;
        background:rgba(100,255,255,0);
        margin-top: 840px;
        width:200px;
        height: 50px;
}

#nav_box_l {
    display: block;
    float:left;
    width:247px;
    text-align: right;
    padding-top: 169px;
    margin-top: 0;
}

#nav_menu a:link{
        font-family: 'Playfair Display', serif;
        font-size: 30px;
        font-weight: 100; 
        color:rgba (255,255,255,1);
        text-decoration: none; 
        text-align: center;
        letter-spacing:0.2em;
}

#nav_menu a:hover{
        font-family: 'Playfair Display', sans-serif;
        font-size: 30px;
        font-style: italic;
        font-weight: 100; 
        color:rgba (255,255,255,1);
        text-decoration: none; 
        text-align: center;
        letter-spacing:0.2em;
} 
```

我怀疑这是因为我使用了两个 ID（#nav_box_l 和 #nav_menu）。#nav_menu 是我为链接设置样式的方式，而 #nav_box_l 包含“Writing”。我尝试合并，但这不起作用。我应该只用一个吗？如果我想跳转到一个类（.side_nav_content）而不是id，这种技术是否不起作用？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T15:21:15.717

一个 HTML 元素可能只有一个`id`，也只有一个元素可能有`id`。您可以使用 a`class`作为样式。

```
.nav_box_l {
  display: block;
  float:left;
  width:247px;
  text-align: right;
  padding-top: 169px;
  margin-top: 0;
}

<div id="nav_menu" class="nav_box_1">...</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T15:21:15.977

**“写作”链接：**

`home_writing`当前是一个类，将其更改为一个 id `<div id="home_writing">`，它将起作用

**“关于”链接：**

您已将链接设置为`<a href="home_text"...`而不是`<a href="#home_text"`，坚持下去`#`，这也应该有效

**“联系方式”链接：**

您没有名为 的 div `#contact`，这就是您要链接到的内容，将其更改为该`<div class="home_contact">`内容`<div id="contact">`也应该可以工作

# jquery - SliderJS - 幻灯片的自动播放功能

> ID：16040791
> 
> 赞同：1
> 
> 时间：2013-04-16T15:17:53.530
> 
> 标签：jquery, autoplay

我正在尝试将 Nick Jonas 的出色 SliderJS 植入网站。（[https://github.com/nick-jonas/SliderJS](https://github.com/nick-jonas/SliderJS)）

一切正常，但我希望图像自动滑动。但是现在我无法使用自动播放功能。

有一个名为 NextImage() 的方法——我认为这正是需要实现的，但我不知道它是如何工作的。

这是我的代码。

```
$(document).ready(function() {

// SLIDER
$sl = $('#slider').slider({
    'media': [
        'images/1.jpg',
        'images/2.jpg',
        'images/3.jpg',
        'images/4.jpg',
        'images/5.jpg',
    ],
    'startIndex': 0,
    'easing': 'easeOutExpo',
    'draggable': false,
    'sizeConstraint': "cover",
    'animationSpeed': 600,
    'preloaderPath': "images/loading.gif",
    'minWidth': 200,
    'minHeight': 400,
}); 
```

});

感谢所有可以在这里帮助我的人:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T16:05:04.210

您可以使用 seInterval ( [https://developer.mozilla.org/en-US/docs/DOM/window.setInterval](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval) )，它：

> 重复调用函数或执行代码片段，每次调用该函数之间有固定的时间延迟。

并且在间隔的每个滴答声中调用`nextImage()`你所想的。

您的代码将如下所示：

```
var $sl;
// SLIDER
$(document).ready(function () {
    $sl = $('#slider').slider({
        'media': [
            'http://cms.taradonne.com/uploads/food-541.jpg',
            'http://cms.taradonne.com/uploads/stills-26.jpg'],
            'startIndex': 0,
            'easing': 'easeOutExpo',
            'draggable': false,
            'sizeConstraint': "cover",
            'animationSpeed': 600,
            'minWidth': 200,
            'minHeight': 400,
    });

    window.setInterval(function () {
        changeImages()
    }, 2000);

});

function changeImages() {
    $sl.nextImage();
} 
```

这是一个工作小提琴：http: [//jsfiddle.net/IrvinDominin/PMRwK/1/](http://jsfiddle.net/IrvinDominin/PMRwK/1/)

# c++ - 使用 OpenCV 复制时指定指针

> ID：16040795
> 
> 赞同：1
> 
> 时间：2013-04-16T15:18:10.503
> 
> 标签：c++, c, opencv

我有一个图像内存，我储存并保存在一个指针中，以免丢失它的地址。

我现在想通过以下函数**memcpy**将它分配给 IplImage （我已经测试过）：

```
IplImage* img=cvCreateImage(cvSize(640, 480), IPL_DEPTH_16U, 1);
VOID* ImgMem;
memcpy(img->imageData, ImgMemory, (640*480)); 
```

它真的不起作用。它表示`Unhandled exception at 0x001b96dd in ex4.exe: 0xC0000005: Access violation reading location 0x00000044`。

知道如何处理吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T15:28:20.260

您的代码中有两个问题。第一个问题是您没有初始化“ImgMem”。

```
VOID* ImgMem;
//    ^^^^^^ Points to whatever 
```

如果在将数据复制到图像缓冲区之前需要使用缓冲区，则需要为其分配内存。

```
int bufferSize = 640*480*2;
char* ImgMem = new char[bufferSize]; 
```

确保在完成后删除内存，否则最终会泄漏内存。

```
delete[] ImgMem; 
```

更好的选择是使用`std::vector`;

```
std::vector<char> ImgMem(bufferSize, 0);

memcpy(img->imageData, &ImgMem[0], ImgMem.size()); 
```

通过这种方式分配、管理和释放内存`std::vector`，您不必每次都这样做。

第二个问题是您试图将更多的内存复制到图像缓冲区中，而不是它可以容纳的。

```
memcpy(img->imageData, ImgMemory, (916*916)); 
```

`img->imageData`当只能保存 307,200 字节（假设8bpp）时，这将复制 839,056 字节。

**[编辑：这个答案没有考虑`IplImage`结构提供的属性。这包括尺寸和对齐方式，这对于 `memcpy`. 有关成员的更多信息，`IplImage`请参见[此处](http://opencv.willowgarage.com/documentation/basic_structures.html)]**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T15:39:07.313

像素类型是无符号短 IPL_DEPTH_16U，它是 2 个字节，因此您需要相应地计算总字节大小：

```
int totalSize = 640*480*2;
char* ImgMemory = new char[totalSize];
memcpy(img->imageData, ImgMemory, (totalSize )); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T15:22:21.273

您的图像是 640x480，但您复制了 916x916 像素。

# python - python正则表达式字符串拆分

> ID：16040796
> 
> 赞同：0
> 
> 时间：2013-04-16T15:18:11.237
> 
> 标签：python, regex

在python中，我有以下字符串：

```
|a|b\|c|d| 
```

我想将字符串拆分为：

```
a
b\c
d 
```

基本上，我必须用'|'分开 定界符，但需要特别注意反斜杠

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-16T15:23:56.020

不需要正则表达式：

```
>>> s = '|a|b\\|c|d|'
>>> s.replace('\\|', '\\').strip('|').split('|')
['a', 'b\\c', 'd'] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T15:30:26.220

如果你想使用正则表达式，你需要一个否定的后向断言。

```
import re
data = '|a|b\|c|d|'
matches = re.split(r'(?<!\\)\|', data) 
```

我们必须转义一些特殊字符。`\|`匹配单`|`。`(?<!\\)`确保在`|`.

现在我们在列表中有一个前导和尾随的空字符串。让我们使用过滤器来删除它们。

```
filter(bool, matches) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T15:47:05.197

我不清楚您的意思`b|c`是否是逃跑的结果`b\|c`并且您有错字？您的结果是非标准的，因为`\`通常用于逃避拆分并保留以下分隔符。

`b|c`在大多数情况下，我会假设你想要更常见的结果。

对于正则表达式解决方案，（`b\c`在这种情况下）这有效：

```
>>> [e for e in re.split(r'\|',s.replace('\|','\\')) if e]
['a', 'b\\c', 'd'] 
```

我使用 Python 替换 '\|' 而不是正则表达式，因为它使正则表达式更容易理解。

如果您想要（我认为更常见的）`b|c`，只需将其添加回来：

```
>>> [e.replace('\\','|') for e in re.split(r'\|',s.replace('\|','\\')) if e]
['a', 'b|c', 'd'] 
```

或者，您可以使用[csv](http://docs.python.org/2/library/csv.html)：

```
import StringIO
import csv

s='|a|b\|c|d|'

f = StringIO.StringIO(s)
reader = csv.reader(f, delimiter='|', escapechar='\\')

for row in reader:
    print filter(bool,row) 
```

印刷：

```
['a', 'b|c', 'd'] 
```

# coronasdk - corona sdk故事板使用按钮移动下一步

> ID：16040803
> 
> 赞同：1
> 
> 时间：2013-04-16T15:18:26.473
> 
> 标签：coronasdk, corona-storyboard

我正在捆绑故事板，我希望用户在填充字段后移动到下一个场景，然后按下按钮

## 我的 btn 有问题，------------------------------ --------------------------------------

## --scence2.lua

* * *

```
local storyboard = require( "storyboard" )
local scene = storyboard.newScene() 
```

* * *

## -- 开始实施

```
local widget = require( "widget" )

require("hijacks")
local sysFonts = native.getFontNames()
local tHeight       -- forward reference

local roundedRect = display.newRoundedRect( 40, 120, 200, 40, 8 )
roundedRect:setFillColor( 0, 0, 0, 170 )

local t = display.newText( "Waiting for button event...", 0, 0, "AmericanTypewriter-Bold", 18 )
t.x, t.y = display.contentCenterX, 70

local function fieldHandler( textField )
    return function( event )
        if ( "began" == event.phase ) then
        -- This is the "keyboard has appeared" event
        -- In some cases you may want to adjust the interface when the keyboard appears.

        elseif ( "ended" == event.phase ) then
        -- This event is called when the user stops editing a field: for example, when they touch a different field

        elseif ( "editing" == event.phase ) then

        elseif ( "submitted" == event.phase ) then
        -- This event occurs when the user presses the "return" key (if available) on the onscreen keyboard
        print( textField().text )

        -- Hide keyboard
        native.setKeyboardFocus( nil )
        end
    end
end 
```

-- 预定义本地对象供以后使用 local nameField, phoneField local fields = display.newGroup()

-- 注意：目前此功能仅适用于设备构建或 Xcode 模拟器构建（也适用于 Corona Mac 模拟器） local isAndroid = "Android" == system.getInfo("platformName") local inputFontSize = 18 local inputFontHeight = 30 tHeight = 30

```
if isAndroid then
-- Android text fields have more chrome. It's either make them bigger, or make the font smaller.
-- We'll do both
    inputFontSize = 14
    inputFontHeight = 42
    tHeight = 40
end

nameField = native.newTextField( 40, 120, 200, tHeight )
nameField.font = native.newFont( native.systemFontBold, inputFontSize )
nameField:addEventListener( "userInput", fieldHandler( function() return nameField end ) ) 

phoneField = native.newTextField( 40, 160, 200, tHeight )
phoneField.font = native.newFont( native.systemFontBold, inputFontSize )
phoneField.inputType = "phone"
phoneField:addEventListener( "userInput", fieldHandler( function() return phoneField end ) ) 
```

-- 将字段添加到我们的新组 fields:insert(nameField) fields:insert(phoneField)

## -- *** 添加字段标签 ***

```
local defaultLabel = display.newText( "الاسم", 250, 120, native.systemFont, 18 )
defaultLabel:setTextColor( 255, 0, 0 )

local defaultLabel = display.newText( "رقم الجوال", 250, 160, native.systemFont, 18 )
defaultLabel:setTextColor( 255, 0, 0 ) 
```

-- 这些是按钮触发的功能

```
local button1Press = function( event )
    t.text = "Button 1 pressed"
end

local button1Release = function( event )
    t.text = "Button 1 released"
end

local buttonHandler = function( event )
    t.text = "id = " .. event.target.id .. ", phase = " .. event.phase
end 
```

-- 此按钮具有单独的按下和释放功能 -- （如果没有指定字体，标签字体默认为 native.systemFontBold）

```
local button1 = widget.newButton{
    default = "buttonRed.png",
    over = "buttonRedOver.png",
    onPress = button1Press,
    onRelease = button1Release,
    label = "موافق",
    emboss = true 
```

}

```
local button2 = widget.newButton{
    default = "buttonBlue.png",
    over = "buttonBlue.png",
    onEvent = buttonHandler,
    onPress = button1Press,
    onRelease = button1Release,
    label = "ok",

    emboss = true;
    labelColor = { default = { 51, 51, 51, 255 } },
    fontSize = 32, 
```

}

```
button1.x = 160; button1.y = 320 
```

-- 这些是按钮触发的功能

```
local button1Press = function( event )
        nameField.text = "Button 1 pressed"
        nameField.text = "hello"
    storyboard.gotoScene( true, "scene3", "fade", 800  )
end 
```

-- local button1Release = function( event ) -- nameField.text = "按钮 1 释放"

- 结尾

```
local funcction buttonHandler = function( event )
-- nameField.text = "hello"
-- storyboard.gotoScene( true, "scene3", "fade", 800  )

    local background = display.newImage("buttonBlue.png", true) -- flag overrides large image downscaling
    background.x = display.contentWidth / 2
    background.y = display.contentHeight / 2
end 
```

* * *

```
local image, text1, text2, text3

local function onSceneTouch( self, event )
    if event.phase == "began" then

    -- first argument means show native activity indicator while transitioning
    --storyboard.gotoScene( true, "scene3", "fade", 800  )

        return true
    end
end 
```

-- 场景视图不存在时调用：function scene:createScene( event ) local screenGroup = self.view

```
 image = display.newImage( "bg2.jpg" )
    screenGroup:insert( image )

    image.touch = onSceneTouch

    text1 = display.newText( "Scene 2", 0, 0, native.systemFontBold, 24 )
    text1:setTextColor( 255 )
    text1:setReferencePoint( display.CenterReferencePoint )
    text1.x, text1.y = display.contentWidth * 0.5, 270
    screenGroup:insert( text1 )

    text2 = display.newText( "MemUsage: ", 0, 0, native.systemFont, 16 )
    text2:setTextColor( 255 )
    text2:setReferencePoint( display.CenterReferencePoint )
    text2.x, text2.y = display.contentWidth * 0.5, display.contentHeight * 0.5
    screenGroup:insert( text2 )

    text3 = display.newText( "Touch to continue.", 0, 0, native.systemFontBold, 18 )
    text3:setTextColor( 255 ); text3.isVisible = false
    text3:setReferencePoint( display.CenterReferencePoint )
    text3.x, text3.y = display.contentWidth * 0.5, display.contentHeight - 100
    screenGroup:insert( text3 )

    print( "\n2: createScene event" )
end 
```

-- 场景在屏幕上移动后立即调用：function scene:enterScene( event )

```
 print( "2: enterScene event" )

-- remove previous scene's view
    storyboard.purgeScene( "scene1" )

-- Update Lua memory text display
    local showMem = function()
        image:addEventListener( "touch", image )
        text3.isVisible = true
        text2.text = text2.text .. collectgarbage("count")/1000 .. "MB"
        text2.x = display.contentWidth * 0.5
    end
    local memTimer = timer.performWithDelay( 1000, showMem, 1 )
end 
```

-- 场景即将移出屏幕时调用：函数scene:exitScene()

```
 print( "2: exitScene event" )

-- remove touch listener for image
    image:removeEventListener( "touch", image )

-- reset label text
    text2.text = "MemUsage: "
end 
```

-- 在移除场景的“视图”（显示组）函数之前调用scene:destroyScene(event)

```
 print( "((destroying scene 2's view))" )
end 
```

* * *

## -- 执行结束

-- 如果场景的视图不存在，则调度“createScene”事件 scene:addEventListener("createScene", scene)

-- 只要场景转换完成，就会调度 "enterScene" 事件 scene:addEventListener( "enterScene", scene )

-- "exitScene" 事件在下一个场景的转换开始之前调度 scene:addEventListener("exitScene", scene)

-- "destroyScene" 事件在视图被卸载之前被调度，它可以 -- 在内存不足的情况下自动卸载，或者通过调用 --storyboard.purgeScene() 或 storyboard.removeScene() 显式地卸载。场景：addEventListener（“destroyScene”，场景）

* * *

```
return scene it is not  move to next scene.. 
```

该操作工作正常，它显示测试消息..

```
enter code here 
```

# sql - Linq to sql - 加入 2 个表，从右表中选择 1 行，具有一对多的关系

> ID：16040805
> 
> 赞同：2
> 
> 时间：2013-04-16T15:18:32.537
> 
> 标签：sql, linq, linq-to-sql

我正在尝试选择论坛类别和每个类别中的最后一篇文章。我已经能够使用 OUTER APPLY 在 SQL 中完成此操作，但无法成功将其转换为 LINQ。

在 SQL 中产生所需的结果：

```
SELECT  fc.CategoryID, fc.CategoryName, fc.PostCount, ft.Title, ft.LastPost, ft.LastPostId, ft.TopicId
FROM    ForumCategory AS fc
OUTER APPLY
    (
    SELECT TOP (1) *
    FROM ForumTopic
    WHERE ForumTopic.CategoryID = fc.CategoryID
    ORDER BY ForumTopic.lastpost DESC
    ) ft 
```

我尝试转换为 LINQ：

```
Dim query = From fc In ctx.ForumCategories _
            Join ft In ctx.ForumTopics On fc.CategoryID Equals ft.CategoryID _
            Select New With {
                                fc.CategoryID, 
                                fc.CategoryName, 
                                fc.PostCount, 
                                ft.Title, 
                                ft.LastPostId, 
                                ft.LastPost.OrderByDescending().First()
                            } 
```

我收到一条错误消息：“OrderByDescending”不是“日期”的成员？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T15:44:15.597

你这样写：

```
var q = from fc in ctx.ForumCategories
        from ft in (from x in ctx.ForumTopic
                    where x.CategoryID == fc.CategoryID
                    order by x.lastpost desc
                    select new
                    {
                       x.Title, 
                       x.LastPost, 
                       x.LastPostId, 
                       x.TopicId
                    }).Take(1).DefaultIfEmpty()
        select new
        {
           fc.CategoryID, 
           fc.CategoryName, 
           fc.PostCount, 
           ft.Title, 
           ft.LastPost, 
           ft.LastPostId, 
           ft.TopicId
        }; 
```

# module - 带有 Pyramid 的应用程序模块

> ID：16040808
> 
> 赞同：1
> 
> 时间：2013-04-16T15:18:40.443
> 
> 标签：module, pyramid, mako

我正在使用金字塔创建工作流应用程序，并且正在搜索如何使应用程序可模块化：这意味着使用 sqlalchemy 模型、使用 wtforms 的基本表单以及使用 mako 的一些基本模板创建核心应用程序。

“核心”应用程序的基本结构是：

```
 App_Core/core.ini
            /setup.py
            /...
            /App_Core/
                    /__init__.py
                    /models.py
                    /forms.py
                    /utils.py
                    /templates/
                    /templates/base.mako...
                    /static/
                    /static/staticfiles... 
```

我的目标是为每个工作流创建**1 个应用程序，**这些应用程序将包含在核心应用程序中：似乎可以通过金字塔提供的**includeme**功能来做到这一点。

我想通过 core.ini 文件包含每个工作流，例如：

```
pyramid.includes =       
   workflow_app1
   workflow_app2
   workflow_app3
   ... 
```

我定义了一个名为**workflow_app1**的新应用程序，其结构如下：

```
worflow_app1/
            /setup.py
            /...
            /workflow_app1/
                         /__init__.py
                         /models.py
                         /forms.py
                         /views.py
                         /templates/
                         /templates/workflow_app1.mako
                         /... 
```

***_init*** _.py文件将包含 includeme 函数并将定义新**路由：**

 *```
def includeme(config):
    config.add_route('route1', '/route1/')
    config.add_route('route2', '/route2/')
    config.scan() 
```

当我为 worflow_app1 编写视图时，我正在渲染到该应用程序包含的模板，但是当我从核心应用程序调用它时，它无法渲染模板并给出以下错误：

```
TopLevelLookupException: Cant locate template for uri 'workflow-app1.mako' 
```

这个错误非常合乎逻辑，因为 mako.directories 指令是通过路径**App_Core_PATH/templates**给出的，所以我的模板应该在同一个文件夹中。

问题1：是否可以在模块的每个文件夹中进行mako搜索想要的模板？

问题2：是否可以让**workflow-app1.mako**从核心app继承base.mako？

提前感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T16:05:05.063

我推荐的解决方案是切换到模板的资产规格。它们是显式的，允许覆盖，并提供对模板层次结构的更好控制。这意味着您将停止使用`mako.directories`，而是`'workflow_app1:templates/workflow_app1.mako'`在您的`inherits`or`include`或`renderer`参数中使用。鉴于此，很明显您可以从您`base.mako`的核心应用程序中继承，而管理该`mako.directories`选项更加困难。

如果您死心塌地，`mako.directories`那么您可以在每次将包添加到`pyramid.includes`.

```
mako.directores = 
    App_Core:templates
    workflow_app1:templates
    workflow_app2:templates 
```

另一种选择是切换到 jinja2，因为它的插件能够在事后添加搜索路径。因此，您包含的模块可以`config.add_jinja2_search_path(...)`将自己投入查找顺序。Pyramid 的 mako 集成目前不提供此选项。*

# javascript - 在弹出 div 中重置表单

> ID：16040811
> 
> 赞同：0
> 
> 时间：2013-04-16T15:18:45.583
> 
> 标签：javascript, forms, popup, reset

我有一个页面，列出了用户以前创建的条目，每个条目都有一个链接，每个条目将调用一个在弹出 div 中打开编辑页面的函数。

编辑页面只包含一个带有更新和重置按钮的表单，但是每当我选择重置按钮以将表单返回到其初始状态时，什么都不会发生。

在过去的几天里，我在网上看了看，试图对可能导致这种情况的原因有更多的了解，但这就像在单击“重置”按钮时调用的 javascript 函数只是忽略了 document.getElementById(form)。 reset() 命令，因为没有返回 javascript 错误。

这是 parent.cfm 上的代码示例

```
<script language="javascript" src="functions.js" type="text/javascript"></script>
<table border="0" cellspacing="5" cellpadding="0" width="850">
<form action="##" method="post" name="parentForm" id="parentForm">
    <input type="hidden" name="formSubmitted" id="formSubmitted" value="1" />
    <tr>
        <td>Label 1</td>
        <td>                
            <select name="field1" id="field1">
                <option value="1">1</option>            
                <option value="2">2</option>
                <option value="3">3</option>
            </select>
        </td>
    </tr>
    <tr>
        <td>Label 2</td>
        <td>                
            <select name="field2" id="field2">
                <option value="1">1</option>            
                <option value="2">2</option>
                <option value="3">3</option>
            </select>
        </td>
    </tr>
    <tr>
        <td>Label 3</td>
        <td><input type="text" name="field3" id="field3" /></td>
    </tr>
    <tr>
        <td>Label 4</td>
        <td>
            <select name="field4" id="field4">
                <option value="1">1</option>                            
                <option value="2">2</option>
                <option value="3">3</option>
            </select>
        </td>
    </tr>
    <tr>
        <td>Label 5</td>
        <td><textarea name="field5" id="field5" rows="10" cols="75"></textarea></td>
    </tr>
    <tr>
        <td><input type="button" name="resetFormBtn" id="resetFormBtn" onClick="resetForm('parentForm');" value="RESET" /></td>
        <td><input type="button" name="formSubmittedBtn" id="formSubmittedBtn" onClick="checkForm('parentForm');" value="ADD" /></td>
    </tr>
</form>
</table>

<cfif qryRecords.RecordCount GT 0>      
<table border="0" cellspacing="5" cellpadding="0" width="850">
    <cfloop query="qryRecords">
        <tr>
            <td>Column Name 1</td>
            <td>#columnName1#</td>
        </tr>
        <tr>
            <td>Column Name 2</td>
            <td>#columnName2#</td>
        </tr>
        <tr>
            <td>Column Name 3</td>
            <td>#columnName3#</td>
        </tr>
        <tr>
            <td>Column Name 4</td>
            <td>#columnName4#</td>
        </tr>
        <tr>
            <td>Column Name 5</td>
            <td>#columnName5#</td>
        </tr>
        <tr>
            <td colspan="2">
                <button name="editRecordBtn" onClick="openPage('childPage.cfm?recordID=#qryRecords.recordID#')">EDIT RECORD</button>
            </td>
            <td colspan="2">
                <form action="##" name="removeRecord" id="removeRecord" method="post">
                    <input type="hidden" name="recordID" value="#qryRecords.recordID#" />
                </form>
                <button name="removeRecordBtn" onClick="document.getElementById('removeRecord').submit();">REMOVE RECORD</button>
            </td>
        </tr>
    </cfloop>
</table>
</cfif> 
```

这是在弹出窗口中打开的 child.cfm：

```
<script language="javascript" src="functions.js" type="text/javascript"></script>
<cfoutput>
<table border="0" cellspacing="5" cellpadding="0" width="850">
    <form action="##" method="post" name="recordEditForm" id="recordEditForm">
        <input type="hidden" name="editFormSubmitted" id="editFormSubmitted" value="1" />
        <tr>
            <td>Label 1</td>
            <td>
                <select name="field1" id="field1">
                    <option value="1" <cfif Form.field1 EQ Variables.field1>selected</cfif>>1</option>          
                    <option value="2" <cfif Form.field1 EQ Variables.field1>selected</cfif>>2</option>
                    <option value="3" <cfif Form.field1 EQ Variables.field1>selected</cfif>>3</option>
                </select>
            </td>
        </tr>
        <tr>
            <td>Label 2</td>
            <td>                
                <select name="field2" id="field2">
                    <option value="1" <cfif Form.field2 EQ Variables.field2>selected</cfif>>1</option>          
                    <option value="2" <cfif Form.field2 EQ Variables.field2>selected</cfif>>2</option>
                    <option value="3" <cfif Form.field2 EQ Variables.field2>selected</cfif>>3</option>
                </select>
            </td>
        </tr>
        <tr>
            <td>Label 3</td>
            <td><input type="text" name="field3" id="field3" value="#Variables.field3#" /></td>
        </tr>
        <tr>
            <td>Label 4</td>
            <td>
                <select name="field4" id="field4">
                    <option value="1" <cfif Form.field4 EQ Variables.field4>selected</cfif>>1</option>                          
                    <option value="2" <cfif Form.field4 EQ Variables.field4>selected</cfif>>2</option>
                    <option value="3" <cfif Form.field4 EQ Variables.field4>selected</cfif>>3</option>
                </select>
            </td>
        </tr>
        <tr>
            <td>Label 5</td>
            <td><textarea name="field5" id="field5" rows="10" cols="75">#Variables.field5#</textarea></td>
        </tr>           
        <tr>
            <td colspan="2">
                <input type="button" name="resetRecordBtn" id="resetRecordBtn" onClick="resetForm('recordEditForm');" value="RESET" />
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <input type="button" name="editRecordBtn" id="editRecordBtn" onClick="checkForm('recordEditForm');" value="EDIT RECORD" />
            </td>
        </tr>
    </form>
</table>
</cfoutput> 
```

这是functions.js中调用的两个函数：

```
function resetForm(formName) {
    var form = formName;
    document.getElementById(form).reset();
}

function openPage(source,width) {
    var source = source;
    var randStr = makeRandString(10);
    var hasQueryString = source.indexOf("?");
    if (hasQueryString > 0) {
        source = source + '&';
    } else {
        source = source + '?';
    }
    source = source + 'rid=' + randStr;
    var align = 'center';
    var top = 80;
    if (width != undefined) {
        var width = width;
    } else {
        var width = 805;
    }
    var padding = 20;
    var disableColor = '#666666';
    var disableOpacity = 40;
    var backgroundColor = '#FFFFFF';
    var borderColor = '#4b8bc8';
    var borderWeight = 2;
    var borderRadius = 5;
    var fadeOutTime = 300;
    var loadingImage = '/resources/images/layout/loading2.gif';
    modalPopup(align, top, width, padding, disableColor, disableOpacity, backgroundColor, borderColor, borderWeight, borderRadius, fadeOutTime, source, loadingImage);  
}

function modalPopup(align, top, width, padding, disableColor, disableOpacity, backgroundColor, borderColor, borderWeight, borderRadius, fadeOutTime, url, loadingImage){

var containerid = "innerModalPopupDiv";

var popupDiv = document.createElement('div');
var popupMessage = document.createElement('div');
var blockDiv = document.createElement('div');

popupDiv.setAttribute('id', 'outerModalPopupDiv');
popupDiv.setAttribute('class', 'outerModalPopupDiv');

popupMessage.setAttribute('id', 'innerModalPopupDiv');
popupMessage.setAttribute('class', 'innerModalPopupDiv');

blockDiv.setAttribute('id', 'blockModalPopupDiv');
blockDiv.setAttribute('class', 'blockModalPopupDiv');
blockDiv.setAttribute('onClick', 'closePopup(' + fadeOutTime + ')');

document.body.appendChild(popupDiv);
popupDiv.appendChild(popupMessage);
document.body.appendChild(blockDiv);

if (/MSIE (\d+\.\d+);/.test(navigator.userAgent)){ //test for MSIE x.x;
 var ieversion=new Number(RegExp.$1) // capture x.x portion and store as a number
   if(ieversion>6) {
     getScrollHeight(top);
   }
} else {
  getScrollHeight(top);
}

document.getElementById('outerModalPopupDiv').style.display='block';
document.getElementById('outerModalPopupDiv').style.width = width + 'px';
document.getElementById('outerModalPopupDiv').style.padding = borderWeight + 'px';
document.getElementById('outerModalPopupDiv').style.background = borderColor;
document.getElementById('outerModalPopupDiv').style.borderRadius = borderRadius + 'px';
document.getElementById('outerModalPopupDiv').style.MozBorderRadius = borderRadius + 'px';
document.getElementById('outerModalPopupDiv').style.WebkitBorderRadius = borderRadius + 'px';
document.getElementById('outerModalPopupDiv').style.borderWidth = 0 + 'px';
document.getElementById('outerModalPopupDiv').style.position = 'absolute';
document.getElementById('outerModalPopupDiv').style.zIndex = 100;

document.getElementById('innerModalPopupDiv').style.padding = padding + 'px';
document.getElementById('innerModalPopupDiv').style.background = backgroundColor;
document.getElementById('innerModalPopupDiv').style.borderRadius = (borderRadius - 3) + 'px';
document.getElementById('innerModalPopupDiv').style.MozBorderRadius = (borderRadius - 3) + 'px';
document.getElementById('innerModalPopupDiv').style.WebkitBorderRadius = (borderRadius - 3) + 'px';

document.getElementById('blockModalPopupDiv').style.width = 100 + '%';
document.getElementById('blockModalPopupDiv').style.border = 0 + 'px';
document.getElementById('blockModalPopupDiv').style.padding = 0 + 'px';
document.getElementById('blockModalPopupDiv').style.margin = 0 + 'px';
document.getElementById('blockModalPopupDiv').style.background = disableColor;
document.getElementById('blockModalPopupDiv').style.opacity = (disableOpacity / 100);
document.getElementById('blockModalPopupDiv').style.filter = 'alpha(Opacity=' + disableOpacity + ')';
document.getElementById('blockModalPopupDiv').style.zIndex = 99;
document.getElementById('blockModalPopupDiv').style.position = 'fixed';
document.getElementById('blockModalPopupDiv').style.top = 0 + 'px';
document.getElementById('blockModalPopupDiv').style.left = 0 + 'px';

if(align=="center") {
    document.getElementById('outerModalPopupDiv').style.marginLeft = (-1 * (width / 2)) + 'px';
    document.getElementById('outerModalPopupDiv').style.left = 50 + '%';
} else if(align=="left") {
    document.getElementById('outerModalPopupDiv').style.marginLeft = 0 + 'px';
    document.getElementById('outerModalPopupDiv').style.left = 10 + 'px';
} else if(align=="right") {
    document.getElementById('outerModalPopupDiv').style.marginRight = 0 + 'px';
    document.getElementById('outerModalPopupDiv').style.right = 10 + 'px';
} else {
    document.getElementById('outerModalPopupDiv').style.marginLeft = (-1 * (width / 2)) + 'px';
    document.getElementById('outerModalPopupDiv').style.left = 50 + '%';
}

blockPage();

var page_request = false;
if (window.XMLHttpRequest) {
    page_request = new XMLHttpRequest();
} else if (window.ActiveXObject) {
    try {
        page_request = new ActiveXObject("Msxml2.XMLHTTP");
    } catch (e) {
        try {
            page_request = new ActiveXObject("Microsoft.XMLHTTP");
        } catch (e) { }
    }
} else {
    return false;
}

page_request.onreadystatechange=function(){
    if((url.search(/.jpg/i)==-1) && (url.search(/.jpeg/i)==-1) && (url.search(/.gif/i)==-1) && (url.search(/.png/i)==-1) && (url.search(/.bmp/i)==-1)) {
        pageloader(page_request, containerid, loadingImage);
    } else {
        imageloader(url, containerid, loadingImage);
    }
}

page_request.open('GET', url, true);
page_request.send(null);

} 
```

重置此表单的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T20:56:04.927

尝试获取表单并执行 .reset() 方法。

```
function fnResetMyForms(){
    //Resets all forms
    var forms = document.getElementsByTagName("form");
    for (var n = 0; n < forms.length; n++) forms[n].reset();
    //Resets only the form you need
    //document.getElementsById("myForm").reset();
    //If you dont know the id, you can ask for specific property
    //for (var n=0; n<forms.length; n++) {
    //  if(forms[n].action=='index.php'){ /* Your code here */ }
    //}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T15:34:30.090

该方法取决于您是想使用[onreset](http://msdn.microsoft.com/en-us/library/ie/ms536958%28v=vs.85%29.aspx)将重置事件附加到表单，还是使用`onclick`.

单击重置按钮会触发元素的`onreset`事件。`<form>`在 HTML 中，`onreset`事件附加到`<form>`元素：

```
<form id="form1" onreset="yourResetFunction()">
    <input type="reset" value="Reset"> 
```

在这种情况下，`yourResetFunction()`当您单击表单的重置按钮时将调用它，因为它附加到`onreset`表单的事件。

如果您想在单击按钮时触发重置，请将按钮的输入类型从“重置”更改为“按钮”，并将重置事件附加到按钮的`onclick`事件中。

```
<form id="form1">
 <input type="button" value="Reset" onclick="yourResetFunction()"> 
```

这里也问了一个类似的问题：[如何在表单被重置时运行 JavaScript 代码？](https://stackoverflow.com/questions/3679141/how-to-run-javascript-code-when-a-form-is-being-reset)

# knockout.js - 使用 Durandal，如何将多个视图模型文件与单个视图一起使用以分解大文件？

> ID：16040812
> 
> 赞同：0
> 
> 时间：2013-04-16T15:18:45.880
> 
> 标签：knockout.js, single-page-application, durandal

我有一个在其中一个视图中使用 Google 地图的应用程序。这是一个 SPA，它使用约定的 Durandal 的视图/视图模型文件结构。我要解决的问题是共享地图视图（谷歌地图）的功能模式非常多样化。例如，应用程序需要在地图上显示车辆的当前位置，能够显示车辆的历史信息（路径），并允许创建、编辑和删除地理围栏。使用地图的每种模式都需要隐藏一些 UX 控件，而使其他控件可见。

我相信，当上述所有视图模型逻辑代码都到位时，视图模型将变得非常大，因此难以维护和编码。我试图避免拥有一个巨大的视图模型文件，其中包含所有这些 UX 控件的逻辑。

从概念上讲，我希望多个视图模型文件与单个视图文件无缝协作，因此我不必在多个视图中重复谷歌地图。另外，如果可能的话，我想使用 Knockout 来保持简单/自动绑定。在维护单个视图文件的同时，使用 Durandal 分解大型视图模型文件有哪些解决方案？这是可能的，甚至是可取的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T19:28:33.973

我会阅读[requirejs](http://requirejs.org/)。Durandal 使用 requirejs 作为构建 javascript 文件的一种方式。Requirejs 遵循[AMD 模式](http://addyosmani.com/resources/essentialjsdesignpatterns/book/#detailamd)，它为你做了很多事情。允许您使用封装创建私有变量并防止污染全局命名空间。

AMD 中也有一些模式，您可以使用单例或具有返回用于创建对象的函数的 amd 模块。就像在 OO 语言中如何使用 Class' 一样。Javascript 继承虽然有点时髦.. 所以可能需要一些阅读.. 以了解继承工作的不同方式。

所以，一旦你所有的 js 文件被分解成一百万个小模块，你就会像 ermergawd 一样......我的意大利面条代码现在是通心粉代码！

但不要害怕.. 你的 macaronni 代码都可以使用 requirejs 的[r.js](http://requirejs.org/docs/optimization.html)进行压缩/缩小/丑化。r.js 可以将您所有的 html/css/js 压缩到 1 个文件中。这可能是您的整个应用程序/站点。Durandal 还提供了一个很棒的[优化器](http://durandaljs.com/documentation/Optimizing-On-Dot-Net/)，它会自动为您完成所有这些工作。

# mysql - mysql简单连接

> ID：16040813
> 
> 赞同：0
> 
> 时间：2013-04-16T15:18:46.367
> 
> 标签：mysql, sql, join

我正在尝试执行一个简单的 mysql 连接：

我有一个表格，`matches`其中包含两个我想加入的字段：`team1`和`team2`.

我想找到存储在`teams`表中的团队的相应名称：

```
SELECT teams.team_name AS "name1", teams.team_name AS "name2", matches.id
FROM teams, matches 
WHERE matches.id=1
AND matches.team1_id=teams.team_id
AND matches.team2_id=teams.team_id 
```

如果我删除最后一个和条件中的任何一个，我会得到一个结果，但如果我同时包含两个，我会得到一个空集？

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T15:21:07.780

对于要在查询中唯一引用的每个团队，您需要一个单独的别名，否则 SQL 将比较同一行。

```
SELECT team1.team_name AS "name1", team2.team_name AS "name2", matches.id
FROM teams team1, teams team2, matches 
WHERE matches.id=1
AND matches.team1_id=team1.team_id
AND matches.team2_id=team2.team_id 
```

在这里，我们现在有 team1 和 team2 的 2 个团队表别名，因此它们每个都可以引用不同的行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T15:21:29.227

您需要在表上加入`teams`两次，`matches`因为其中两列依赖于它，

```
SELECT  a.*,                -- <<== select column that you want to project
        b.team_name AS Team1Name,
        c.Team_name AS Team2Name
FROM    matches a
        INNER JOIN teams b
            ON a.team1_ID = b.team_ID
        INNER JOIN teams c
            ON a.team2_ID = c.team_ID
-- WHERE a.id = 1 
```

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T15:21:48.190

您的查询将仅返回团队与自己比赛的记录（当然这永远不会发生）。您需要针对团队的两个不同联接，因此有两个实例：

```
select
    teams1.team_name as "name1"
    ,teams2.team_name as "name2"
from
    matches
join
    teams teams1 on matches.team1_id = teams1.team_id
join
    teams teams2 on matches.team2_id = teams2.team_id
where
    matches.id = 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T15:22:01.027

尝试这个：

```
SELECT team1.team_name AS "name1", team2.team_name AS "name2", matches.id
FROM teams as team1, teams as team2, matches 
WHERE matches.id=1
AND matches.team1_id=team1.team_id
AND matches.team2_id=team2.team_id 
```

# azure - 如何在 Windows Azure 上 CHMOD 文件/目录？

> ID：16040814
> 
> 赞同：4
> 
> 时间：2013-04-16T15:18:48.520
> 
> 标签：azure, ftp, chmod, filezilla

我正在使用 FileZilla FTP 右键单击​​并更改目录文件权限，就像我在许多其他站点/服务器上所做的那样。由于某种原因，这在 Windows Azure 中不起作用。它在 FileZilla 中输出“500 'SITE CHMOD 777 (mydirectory)': command not understand”

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-08-06T16:26:01.953

Windows Azure 门户网站有一个“控制台”，您可以在其中执行一些 shell 命令。其中之一似乎是 chmod (fileutils) 4.1。我可以使用以下方法修改文件夹的权限：

```
chmod -R 744 myfolder 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T08:02:37.137

Windows Azure 网站是一个基于 Windows Server 的服务器。因此，文件权限不像在 Linux 中那样工作（正如@SLaks 已经提到的）。

但是，执行您的脚本 (PHP/ASP.NET/node.js) 的帐户具有对该文件夹的**完全**访问权限`/site/wwwroot`，您的 FTP 用户也是如此。这意味着您可以通过您的 PHP 执行所有完全特权的文件访问操作 - 读取、写入、删除、创建、创建目录。你不能做也不能改变的是**执行**脚本（0777 在 Linux 中会给你）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-11T13:22:40.617

我找到了一个 hack 解决方案来删除 Azure 上的文件：

1.  从管理控制台停止您的网站 ( [https://manage.windowsazure.com](https://manage.windowsazure.com) )
2.  在 Filezilla 中打开 FTP 站点
3.  将有问题的目录重命名为其他任何内容（可能是可选步骤，我不知道）
4.  删除重命名的目录
5.  重新启动您的网站。

这似乎做到了。

# ruby-on-rails - 在 Rails 中获得讨论最多的论坛

> ID：16040824
> 
> 赞同：2
> 
> 时间：2013-04-16T15:19:23.383
> 
> 标签：ruby-on-rails, database, ruby-on-rails-3, orm

我有两个课程：`Forum`和`Topic`。`Forum`has_many `Topic`s。

1.  您如何获得（假设）5 个讨论最多的论坛？
2.  你如何按日期限制它？例如，今天/本周讨论最多的等等。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T15:36:35.500

**1\. 您如何获得（假设）5 个讨论最多的论坛？**

您可能可以执行以下操作：

```
Forum.where('id IN (?)', Topic.limit(5).count(:group => 'forum_id').map {|key, value| key }) 
```

**2\. 你如何按日期限制它？例如，今天/本周讨论最多的等等。**

```
Forum.where('id IN (?)', Topic.where('date > ', 1.week.ago.to_s(:db)).limit(5).count(:group => 'forum_id').map {|key, value| key }) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T15:56:58.870

如果讨论最多的论坛是主题最多的论坛，则查询将是：

```
Forum.joins(:topics).group("forums.id").order("COUNT(*) DESC").limit(5) 
```

上周开题最多的五个论坛：

```
Forum.joins(:topics)
     .where("topics.created_at > ?", 1.week.ago)
     .group("forums.id")
     .order("COUNT(*) DESC")
     .limit(5) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T15:36:21.230

最好的方法是在两个表中保留时间戳（created_at 和 updated_at）。并在主题发生某些活动时更新它们。

脚步：

1.  保留`timestamps`在两个表中。
2.  在模型中添加`after_save`回调`Topic`，以更新`updated_at`父论坛。
3.  获取论坛列表`order by updated_at desc`。

* * *

```
class Topic
 def after_save
   self.forum.touch
 end
end 
```

* * *

然后运行一个查询 `Forum.order("updated_at desc").limit(5)`

# grails - 如何从 jenkins 访问 cloudbees 中的 grails 插件目录

> ID：16040826
> 
> 赞同：0
> 
> 时间：2013-04-16T15:19:25.850
> 
> 标签：grails, jenkins, cloudbees

我想从 jenkins 执行预构建（grails）脚本，用我的 SCM 中的文件替换插件目录中的文件。

```
#!/bin/bash
PLUGINS_ORIG_DIR="plugins"
PLUGINS_DEST_DIR="/home/<my_user_name>/.grails/2.1.1/projects/judo/plugins"
cp -r $PLUGINS_ORIG_DIR/lang-selector-0.3/* $PLUGINS_DEST_DIR 
```

但脚本失败，因为找不到 $PLUGINS_DEST_DIR。哪个应该是路径，或者哪个是完成此任务的最佳方式？

谢谢你。

[编辑]

我也尝试过创建一个战前事件，但它也不起作用：

```
/**
 * Copy modified resources to plugins directory, before packing the WAR
 */
eventCreateWarStart = { warName, stagingDir ->
    def buildSettings = BuildSettingsHolder.getSettings() 

    def projectPluginsDir = buildSettings.getProperty("projectPluginsDir")
    def baseDir = buildSettings.getProperty("baseDir")

    ant.copy(todir:"${projectPluginsDir}/lang-selector-0.3", overwrite:true) {
        fileset(dir:"${basedir}/plugins/lang-selector-0.3", includes:"**")
    }

    ant.copy(todir:"${projectPluginsDir}/jquery-datatables-1.7.5", overwrite:true) {
        fileset(dir:"${basedir}/plugins/jquery-datatables-1.7.5", includes:"**")
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T05:42:35.613

你是否设置了你的cloudbees帐户名称？那么你错了，应该使用 /home/jenkins 或只使用 $HOME，因为构建在通用从属服务器上以“jenkins”用户身份运行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T10:03:42.383

我已经通过将文件复制到 ${stagingDir} 而不是 ${projectPluginsDir} 来解决它

# objective-c - 将 * 星号放在 Objective C 指针变量上的位置

> ID：16040829
> 
> 赞同：1
> 
> 时间：2013-04-16T15:19:29.070
> 
> 标签：objective-c, pointers

只是一个简单的问题 - 有什么区别（如果有的话）：

```
NSObject* myObj 
```

和

```
NSObject *myObj 
```

乃至

```
NSObject * myObj 
```

?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T15:21:53.050

从技术的角度来看，这并不重要。

我个人使用最后一个选项（中间的*），但这是个人品味的问题。

极端情况是多个内联声明的定义，例如

```
NSObject *a, b 
```

与

```
NSObject *a, *b 
```

第一种情况将产生一个指向`NSObject`和 a的指针`NSObject`（这当然是被禁止的并且它不会编译），而第二种情况将产生两个指针。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T15:22:44.987

我的理解是这完全是一个风格问题，但是，一个开发团队可能希望匹配风格，并且某些 [开源] 项目可能有他们强制执行的准则。例如，这里是 Github 的 Objective-C 约定：[https ://github.com/github/objective-c-conventions](https://github.com/github/objective-c-conventions)

（他们使用`NSObject *myObj`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T15:22:20.320

没有区别。这两种变体都代表了 Objective-C 可读的指针。

# wpf - 从托管 WinForm 应用程序访问 WPF 控件

> ID：16040830
> 
> 赞同：1
> 
> 时间：2013-04-16T15:19:31.830
> 
> 标签：wpf, winforms, wpf-controls

我有一个 WinForm 应用程序，我试图用 WPF 工具栏替换我的工具栏。我的解决方案现在包含两个项目：

*   定义 WPF 工具栏的 WPF 用户控件项目
*   承载 WPF 工具栏的 Windows 窗体应用程序

启用/禁用按钮、将项目添加到组合、工具栏控件的事件处理必须在 WinForm 应用程序中定义，因此为了访问它们，我执行了以下操作：

*   在 XAML 中，我为工具栏中的每个控件命名
*   在代码中，我为每个控件定义了一个公共 get 属性

这很好用，但我想知道这是否是正确的方法。有没有更好的方法来做我想做的事？

> 您可以发布工具栏的 XAML 吗？– 高核

我已经按照您的要求制作了我的工具栏的 XAML 的一个小示例。

```
 <ToolBarTray>
        <ToolBar Band="1" BandIndex="1">
            <Button Name="btnDoSomething1">
                <Image Source="/WpfExampToolbarCtrl;component/Images/DoSomething1.png" />
            </Button>
            <Button Name="btnDoSomething2">
                <Image Source="/WpfExampToolbarCtrl;component/Images/DoSomething2.png" />
            </Button>
            <Separator />
            <Menu>
                <MenuItem Header="Create Item">
                    <MenuItem Header="Item 1" />
                    <MenuItem Header="Item 2" />
                </MenuItem>
            </Menu>
            <Separator />
            <ComboBox Name="comboCategory">
                <ComboBoxItem Content="Category 1" IsSelected="True" />
                <ComboBoxItem Content="Category 2" />
            </ComboBox>
        </ToolBar>
    </ToolBarTray> 
```

我想给工具栏中的每个控件一个名称，并在后面的代码中为每个控件定义一个 get 属性。这样我就可以从我的 WinForm 应用程序的主窗体访问工具栏的每个控件，然后做我想做的事。（添加事件，在运行时禁用/启用控件，在初始化或运行时将项目添加到组合中，......）。但据我从*肯特·布加特*的回答中了解到，这不是正确的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T15:41:18.357

我宁愿将我的 WPF UI 绑定到模型。然后，我将从 Winforms 端访问模型并对其进行操作。

详细说明：WPF 的绑定基础结构非常强大，与您在 Winforms 中习惯的不同。WPF 应用程序倾向于遵循[MVVM 模式](http://en.wikipedia.org/wiki/Model_View_ViewModel)，其中视图的数据上下文是视图模型，并且视图中的控件具有与视图模型中的属性的绑定。

因此，我建议您首先定义一个视图模型，然后修改您的 WPF 视图以绑定到该视图模型上的属性，然后从您的 Winforms 代码访问该视图模型。从 Winforms 代码更改该视图模型的属性将自动更新 WPF 视图。

# javascript - document.ready() 只运行一个函数而不是两个

> ID：16040833
> 
> 赞同：0
> 
> 时间：2013-04-16T15:19:39.533
> 
> 标签：javascript, jquery, function, document-ready

我正在尝试在 document.ready() 中运行两个 js 函数（我正在使用 jquery），但只运行一个。这是我的代码：

```
 $(document).ready(function() {
    show_properties();
    table_events();
 }); 
```

这些函数都写在同一个js文件中，但网站加载时只加载show_properties()。我在firebug控制台中测试写

> 表事件（）

控制台告诉我“未定义”，但之后该函数被加载，ajax 调用以及该函数内的所有内容都开始工作。

这是为什么？我该如何解决这种行为？

谢谢。

这是我要运行的功能：

```
 function table_events(){
 $.ajaxSetup ({  
         cache: false  
     });  

 var wait = "<img src='../images/loading_red_transparent.gif' alt='loading...' style='display:block;margin-left:auto;margin-right:auto;'/>";    

    $('.apartamentos tr').on('click', function() {
            alert("hola.")
               var id_propiedad = $(this).find(".id_propiedad").html();   
           var nombre_propiedad = $(this).find(".nombre_propiedad").html(); 
       //$('#property_information').hide('slow');

       $("#property_information")
       .html(wait)
       .load('properties_info.php',{'nombre_propiedad':nombre_propiedad,'id_propiedad':id_propiedad});
       //$('#property_information').show('slow');

        }); 

 }

 function show_properties(){
 $.ajaxSetup ({  
         cache: false  
     }); 
 var wait = "<img src='../images/loading_red_transparent.gif' alt='loading...' style='display:block;margin-left:auto;margin-right:auto;'/>";

     $('#busca_propiedades').on('click',function(){

         var user_id = $('#user_list').val();

         /*var data = $.ajax({
              url: "properties_list.php",
              type: 'POST',
              data:{ 'user_id': user_id },
              cache: false,
              async: false
             }).responseText;

         });*/

         $('#lista_aptos')
         .html(wait)
         .load('properties_list.php',{'user_id':user_id});

        //alert(data);
         });

 } 
```

编辑：在使用 console.log 进行一些调试后，我发现这段代码是网页加载时未执行的代码：

```
$('.apartamentos tr').on('click', function() {
            alert("hola.")
               var id_propiedad = $(this).find(".id_propiedad").html();   
           var nombre_propiedad = $(this).find(".nombre_propiedad").html(); 
       //$('#property_information').hide('slow');

       $("#property_information")
       .html(wait)
       .load('properties_info.php',{'nombre_propiedad':nombre_propiedad,'id_propiedad':id_propiedad});
       //$('#property_information').show('slow');

        }); 
```

显然，这个函数（）是网页加载时不运行的函数；但是当我再次在控制台中写

> 表事件（）

然后，当我单击表格的 tr 时，此函数内的代码将运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T15:43:24.783

元素是否与调用一起`$('.apartamentos tr')`加载？`load``show_properties`

如果是，那么问题是由于`table_events`执行时，tr 元素尚未插入`#lista_aptos`（因为`load`使用 ajax，这是异步的）。

要检查，请添加

```
console.log("trs count: ", $('.apartamentos tr').size()); 
```

在您的 table_events 函数之上。

要修复，您应该`table_events`作为完成处理程序传递`load`调用：

```
$('#lista_aptos')
         .html(wait)
         .load('properties_list.php',{'user_id':user_id}, table_events); 
```

* * *

## 旧回应

你说“......之后函数被加载并且ajax调用......”

请记住，ajax 调用是异步的。

如果您在 ajax 响应处理程序中定义 table_events 函数，并且如果您将其置于引用函数可见的范围内，则可能会在 table_events 定义之前尝试调用 table_events。

或者，正如 Raghavan 所说，show_properties 抛出了一个错误，阻止了 table_events 的执行。但是如果您尝试使用 console.log("text") 而不是 alert 进行调试会更好（alert 是阻塞的，它会隐藏异步调用的问题）

请尝试在[http://jsfiddle.net/上做一个例子](http://jsfiddle.net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T15:27:46.070

需要检查的几件事：

table_events 是否存在于 $(document).ready 的范围内？

show_properties 是否可能引发错误？

这可能是“警报调试”的好案例：

```
$(document).ready(function() {
    show_properties();
    // You might also put an alert at the very end of show_properties.
    alert('show_properties called; now calling table_events()');
    table_events();
    alert('table_events called; document.ready done');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T15:30:31.267

table_events 函数中可能存在错误。尝试使用简单的警报语句进行调试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T15:24:10.337

如果控制台返回“未定义”，则表示该函数存在，但结果返回未定义。

您的功能需要修复， $(document).ready() 可能没问题。

尝试`table_events()`在最后一行调用，`show_properties()`看看是否有效。

# git - 我可以对我的 .bash_profile 进行版本控制吗？

> ID：16040835
> 
> 赞同：2
> 
> 时间：2013-04-16T15:19:52.650
> 
> 标签：git, .bash-profile

在文件夹树中：

```
Hard_Disk:
- Applications
- Users:
- - User-1_folder
- - User-2_folder:
- - - - .bash_history
- - - - .bash_profile
- - - - .bashrc
- - - - .gitconfig
- - - - .gitignore_global
- - - - .ssh
- - - - Applications
- - - - Desktop
- - - - ...
- - User-3_folder
- Library
- System 
```

我可以对我的`.bash_profile`或与 相同文件夹中的任何其他文件进行版本控制`.gitconfig`吗？

在 User_folder 中启动 git 存储库是否安全？

忽略所有文件夹及其`.gitconfig`本身，只是为了保持一些设置正常！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T17:24:31.250

This is one way to go about it, although not so clean it does the job without the hassle of maintaining symlinks on each machine:

```
cd ~
git init

# Ignore everything except .bash_profile and .gitignore
echo '/*' > .gitignore
echo '!/.bash_profile' >> .gitignore
echo '!/.gitignore' >> .gitignore

# Only .bash_profile and .gitignore would be added
git add .

# Commit
git commit -m "Adding .bash_profile and .gitignore"

# Add the remote details and push the master branch into the remote
git remote add <REMOTE-NAME> <REMOTE-URL>
git push <REMOTE-NAME> master 
```

One thing you got to be careful is when you're cloning this repo on another machine, `git clone` will error if the destination directory is not empty. So you could do something like this to initially set it up:

```
mkdir -p ~/temp-git-dir
cd ~
git clone <REPO-URL> ~/temp-git-dir
mv ~/temp-git-dir/.git .
rm -rf ~/temp-git-dir 
```

# javascript - 在 PDF 中显示 UTF-8 字符

> ID：16040836
> 
> 赞同：3
> 
> 时间：2013-04-16T15:19:59.560
> 
> 标签：javascript, pdf, utf-8, character-encoding, sap-basis

我正在尝试通过从后端将 PDF 转换为二进制字符串来显示 PDF。这是我正在进行的 ajax 调用

```
 $.ajax({
        type : 'GET',
        url : '<url>',          
        data : oParameters,
        contentType : 'application/pdf;charset=UTF-8',
        success : function(odata) {

            window.open("data:application/pdf;charset=utf-8," + escape(odata)); 
```

} });

当我尝试在新窗口中打开 PDF 时，网址看起来像

> 数据：应用程序/pdf；charset=utf-8,%25PDF-1.3%0D%0A%25%uFFFD%uFFFD%uFFFD%uFFFD%0D%0A2%200%20obj%0D%0A/WinAnsiEncoding%0D.... ……

如您所见，它使用“WinAnsiEncoding”来显示 PDF。因此，某些字符无法正确显示。如何将其更改为 UTF-8？

编辑：后端在 ABAP 中。我正在将智能表单转换为 OTF，然后使用功能模块“CONVERT_OTF”转换为字符串。

```
 CALL FUNCTION fname
         EXPORTING
           user_settings      = space
           control_parameters = ls_ctropt
           output_options     = ls_output
           gv_lang            = lv_lang
         IMPORTING
           job_output_info    = ls_body_text
         EXCEPTIONS
           formatting_error   = 1
           internal_error     = 2
           send_error         = 3
           user_canceled      = 4
           OTHERS             = 5.

CALL FUNCTION 'CONVERT_OTF'
          EXPORTING
             format                = 'PDF' 
          IMPORTING
           bin_filesize          = ls_pdf_len
           bin_file              = ls_pdf_xstring
          TABLES
             otf                   = ls_body_text-otfdata
             lines                 = lt_lines
           EXCEPTIONS
             err_max_linewidth     = 1
             err_format            = 2
             err_conv_not_possible = 3
             err_bad_otf           = 4
             OTHERS                = 5.
   CALL METHOD server->response->set_header_field( name = 'Content-Type'
     value = 'application/pdf;charset=UTF-8' ).
   CALL METHOD server->response->append_data( data = lv_pdf_string
     length = lv_len ). 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T22:24:46.577

关于您*使用“WinAnsiEncoding”显示 PDF*的评论：

在逗号之后

```
data:application/pdf;charset=utf-8,%25PDF-1.3%0D%0A%25%uFFFD%uFFFD%uFFFD%uFFFD%0D%0A2%200%20obj%0D%0A/WinAnsiEncoding%0D........ 
```

一切都是**纯数据。**因此，“WinAnsiEncoding”只是PDF的一部分内容，如果是你的麻烦，必须要求PDF生成器改变他的PDF生成过程。

在手头的情况下，您的数据是：

```
%PDF-1.3
%...
2 0 obj
/WinAnsiEncoding
........ 
```

这是完全正常的PDF结构。它仅意味着 PDF 对象 2 被定义为`/WinAnsiEncoding`可能用于或不用于某些字体定义，即使使用它，它仍可能被某些**/Differences**调整以包含您需要的字符。此外，将其*更改为 UTF-8*（根据您的要求）是没有意义的，因为 UTF-8 不是 PDF 页面内容的标准编码。如果您以某种方式放在`UTF-8`那里，您将更加破坏 PDF。

不过，我担心还有其他问题。

1.  您将**字符集**参数添加到类型**application/pdf** --- 这没有意义，PDF 是二进制格式，即需要一个字节序列，因此不涉及字符集。

2.  您的方法调用`escape(odata)`创建**%uFFFD%uFFFD%uFFFD%uFFFD** ---根据仅定义的 RFC，这是无效的

    > 当八位位组的相应字符超出允许的集合或用作组件的分隔符或组件内时，百分比编码机制用于表示组件中的数据八位位组。百分比编码的八位位组被编码为一个字符三元组，由百分比字符“%”后跟表示该八位位组数值的两个十六进制数字组成。
    > 
    > *（[RFC 3986](http://www.ietf.org/rfc/rfc3986.txt)，第 2.1 节）*
    > 
    > 因为百分比 ("%") 字符用作百分比编码八位位组的指示符，所以它必须以百分比编码为 "%25"，才能将该八位位组用作 URI 中的数据。
    > 
    > *（[同上](http://www.ietf.org/rfc/rfc3986.txt)，第 2.4 节）*

    因此，**%uFFFD%uFFFD%uFFFD%uFFFD**无效。

3.  PDF 作为二进制格式更适合 Base64 编码，即

    ```
    data:application/pdf;base64,BASE_64_ENCODED_PDF 
    ```

    因此，我建议您相应地更改您的客户端流程。

# ios - 在 MonoTouch 中切换视图控制器

> ID：16040841
> 
> 赞同：0
> 
> 时间：2013-04-16T15:20:13.217
> 
> 标签：ios, xamarin.ios, navigation

假设我的应用中有 4 个屏幕（iPhone 视图控制器），我喜欢在它们之间导航。例如：

```
> 1 ----> 2
> 2 ----> 3
> 3 ----> 2 (With new data)
> 2 ----> 4
> 4 ----> 1 
```

这当然只是一个例子，实现这一目标的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T21:40:43.093

乌迪我，

实现此类导航的正确方法是通过[`UINavigationController`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html). 来自 Apple 文档：

> 该类`UINavigationController`实现了一个专门的视图控制器来管理**分层内容**的导航。此导航界面可以有效地呈现您的数据，也使用户更容易导航该内容。此类通常按原样使用，但在 iOS 6 及更高版本中可能是子类。

以下 API 允许您在堆栈中导航

```
– pushViewController:animated:
– popViewControllerAnimated:
– popToRootViewControllerAnimated:
– popToViewController:animated: 
```

如果您需要在控制器之间传递数据，只需像下面这样注入它们：

```
// within the third controller

UIViewController* secondController = // new controller
secondController.dataToInject = // ...
[self.navigationController pushViewController:secondController animated:YES]; 
```

其中`dataToInject`可以定义`SecondController`为

```
@property (nonatomic, retain) id dataToInject; 
```

希望有帮助。

**PS**代码是用objective-c 编写的，但稍作修改也适用于MonoTouch。例如，使用`this`代替。`self`

# javascript - 仅突出显示包含复选框的单元格

> ID：16040844
> 
> 赞同：0
> 
> 时间：2013-04-16T15:20:20.623
> 
> 标签：javascript, jquery, checkbox

我有一个表，其中所有列都有背景颜色，除了最后一列是复选框。我需要使用 jquery 仅在选中复选框时突出显示单元格，而在未选中时取消突出显示。我不想突出显示整行，因为它看起来不正确，因为背景颜色这就是为什么我只希望 td with 复选框在选中时突出显示。帮助！

JSP：

```
<td bgcolor='<c:out value="${summary.color}"></c:out>'>
<c:out value="${summary.actualIsc}" />
    </td>
<td bgcolor='<c:out value="${summary.color}"></c:out>'><c:out
                    value="${summary.country}" />
            </td>
<td bgcolor='<c:out value="${summary.color}"></c:out>'> 
     <c:outvalue="${summary.source}" />
            </td>
<c:if test="${isAll == 'false'}">
<td align='center'></c:out>'>
<input name='summaryCheckbox' type="checkbox" class="cbx" 
    value='<c:out value="${summary.labelNbr}"></c:out>,<c:out   
    value="${summary.loadDate}"></c:out>,
    <c:out value="${summary.eventInd}"></c:out>'>
            </td>
            </c:if> 
```

JS：

```
 $('input[name=summaryCheckbox]:checkbox').unbind("click").click(summaryCheckboxHandler);
     function summaryCheckboxHandler(){
    var val = $(this).val();
    var vals = val.split(",");
    if( $(this).is(":checked") ){       
        labelNbrs += vals[0] + ',';
        loadDates += vals[1] + ',';
        eventInd = vals[2];
    }else{
        labelNbrs = labelNbrs.replace(vals[0]+',', '');
        loadDates = loadDates.replace(vals[1]+',', '');
    }   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T15:35:19.687

你可以在[这里查看演示](http://codepen.io/siddharth-pandey/full/ylqLd)

```
 $(document).ready(function(){
  $("input[type='checkbox']").change(function(e) {
    if($(this).is(":checked")){ 
   $(this).closest('td').addClass("highlight");

  }
    else{
      $(this).closest('td').removeClass("highlight");
    }

  });
}); 
```

CSS是

```
 table{border: 1px solid;}
.highlight{background: red;} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T15:25:18.393

您可以定位父 TD 并设置背景颜色：

```
if( $(this).is(":checked") ){       
    labelNbrs += vals[0] + ',';
    loadDates += vals[1] + ',';
    eventInd = vals[2];
    $(this).parent("td").css("background", "color"); // <-- I would prefer making a CSS class called "active" then using the toggleClass().
} else {
    labelNbrs = labelNbrs.replace(vals[0]+',', '');
    loadDates = loadDates.replace(vals[1]+',', '');
    $(this).parent("td").css("background", "color"); 
```

}

正如我在上面的评论中所说，考虑使用一个名为“active”的 CSS 类，然后使用该`toggleClass()`函数实现这一点

# shell - 苹果脚本到外壳

> ID：16040845
> 
> 赞同：1
> 
> 时间：2013-04-16T15:20:21.760
> 
> 标签：shell, applescript

我创建了一个小applescript，它在某个文件夹中查找与多个字符串匹配的文件，当找到它们时，它会返回该文件的路径。在 applescript 语言中，它看起来像这样：

> 将 filesExist 设置为（文件夹 pathUnsorted 中名称以（theWords 的第 1 项）开头并且名称包含（theWords 的第 2 项）并且名称包含（theWords 的第 3 项）并且名称包含（theWords 的第 4 项）和名称的每个文件的路径包含（单词的第 5 项））

现在，我需要将其转换为 shell 命令，因为这些命令可以使用以下命令在 applescript 中运行：

> 将 filesExist 设置为执行 shell 脚本“（此处为 shell 命令）”

不幸的是，我不知道如何在 shell 命令中执行此操作...有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T21:09:20.757

假设这`pathUnsorted`已经是一个 POSIX 路径：

```
do shell script "ls " & quoted form of (pathUnsorted & "/" & (item 1 of theWords)) & "*" & ¬
    " | grep " & quoted form of (item 2 of theWords) & ¬
    " | grep " & quoted form of (item 3 of theWords) & ¬
    " | grep " & quoted form of (item 4 of theWords) & ¬
    " | grep " & quoted form of (item 5 of theWords) 
```

从理论上讲，可以构造一个一次性匹配所有正确文件的正则表达式，但这更简单。

# data-binding - 空值上的 Kendo MVVM 绑定绑定为对象

> ID：16040855
> 
> 赞同：5
> 
> 时间：2013-04-16T15:20:56.043
> 
> 标签：data-binding, mvvm, kendo-ui

当谈到剑道的绑定行为时，似乎有一个相当奇特的设计决定。

我正在尝试将可为空的值绑定到下拉列表。如果（远程来源的）值为 null，则 Kendo 将生成对象以绑定到该值，例如，使用下拉列表的 data-value-field/value。这使得保存修改后的视图模型非常不可靠，因为现在将传输整个对象而不是简单的数据类型。

示例： `Schedule.WeekNumber`是`null`. 从下拉菜单中选择一个值后

```
<select data-role="dropdownlist" name="scheduleWeekOfMonth"
    data-bind="value:WeekNumber">
  <option value="">Every week</option>
  <option value="0">First week of month (1.-7.)</option>
  <option value="1">Second week of month (8.-14.)</option>
  <option value="2">Third week of month (15.-21.)</option>
  <option value="3">Last week of month (22.+)</option>
</select> 
```

然后值（JSON）`Object {text: "First week of month (1.-7.)", value: "0"}`代替`"0"`

有没有人对此有很好的解决方案？- 除了在加载时替换视图模型的所有空值，例如：

```
function deNull(obj) {
  if(obj !== null && typeof obj === "object") {
    $.each(obj, function(index, value) {
      if(value !== null && typeof value === "object") {
        deNull(obj[index]); // we must go deeper (BRRRRRRRAAAAAWWWWRWRRRMRMRMMRMRMMMMM)
      }
      if(value === null) {
        obj[index] = "";  // workaround, this is the "null" equivalent of not being set         
        //console.log("De-nulled: " + index);
      }
    });
  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-31T00:48:09.187

有一个 data-value-primitive 属性可以用来实现直接的值绑定。

```
<select data-role="dropdownlist" name="scheduleWeekOfMonth"
  data-bind="value:WeekNumber" data-value-primitive="true">
    <option value="">Every week</option>
    ...
</select> 
```

这是有关此属性[的文档中的链接。](https://docs.kendoui.com/getting-started/framework/mvvm/bindings/value#use-the-value-binding-with-a-select-widget-to-update-the-view-model-field-with-the-value-field-when-the-initial-value-is-null.)此外，还有一个[UserVoice 建议](https://feedback.kendoui.com/forums/127393-kendo-ui-feedback/suggestions/3356384-dropdown-null-values)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T21:11:30.370

问题被多次讨论。设置默认值以便绑定时值不为空，或查看[以下](http://www.kendoui.com/code-library/mvc/grid/binding-nullable-field-to-dropdownlist-editor-in-grid.aspx)文章如何创建自定义活页夹。

# android - InvocationTargetException：某些三星设备在注销时

> ID：16040860
> 
> 赞同：1
> 
> 时间：2013-04-16T15:21:14.983
> 
> 标签：android, reflection

在我的注销点击，

```
public void logOut(View v){

   LoggedInUser loggedInUser = CommonUtilities.getObjectFromSharedPreferances(this,     Global.LOGGED_IN_HEALOW_USER, LoggedInUser.class);
   CommonUtilities.updateDeviceSessionToServer(this, loggedInUser.getId(), "logout");   

    ----Clearing SharedPreferance-----
} 
```

我有一个具有一些静态实用程序方法的类。使用它们，我将会话更新到服务器并在注销时清除共享首选项。CommonUtilities的实用方法`getObjectFromSharedPreferances`如下：

```
public static <T> T getObjectFromSharedPreferances(Context context, String key, Class<T> returnType) {
        Object obj = null;
        Gson gson = new Gson();
        SharedPreferences settings = PreferenceManager.getDefaultSharedPreferences(context);
        String jsonStr = settings.getString(key, null);
        if (jsonStr != null) {
            obj = gson.fromJson(jsonStr, returnType);
        }
        return returnType.cast(obj);
    } 
```

而另一种实用程序方法`updateDeviceSessionToServer`只是将会话状态发送到服务器。

但是当`updateDeviceSessionToServer`方法上执行时，我得到了异常。`(Line No 63)`以下是发生异常的确切行。

```
CommonUtilities.updateDeviceSessionToServer(this, loggedInUser.getId(), "logout"); 
```

此外，我没有对所有设备都感到异常。某些设备正在发生这种情况，例如 Galaxy S 2 和 Galaxy Exhibit。

全文`stackstrace`如下：

```
"java.lang.IllegalStateException: Could not execute method of the activity
    at android.view.View$1.onClick(View.java:2178)
    at android.view.View.performClick(View.java:2574)
    at android.view.View$PerformClick.run(View.java:9238)
    at android.os.Handler.handleCallback(Handler.java:587)
    at android.os.Handler.dispatchMessage(Handler.java:92)
    at android.os.Looper.loop(Looper.java:130)
    at android.app.ActivityThread.main(ActivityThread.java:3691)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:507)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
    at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.reflect.InvocationTargetException
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:507)
    at android.view.View$1.onClick(View.java:2173)
    ... 11 more
Caused by: java.lang.NullPointerException
    at com.ecw.healow.settings.SettingsMainActivity.logOut(SettingsMainActivity.java:63)
    ... 14 more
java.lang.reflect.InvocationTargetException
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:507)
    at android.view.View$1.onClick(View.java:2173)
    at android.view.View.performClick(View.java:2574)
    at android.view.View$PerformClick.run(View.java:9238)
    at android.os.Handler.handleCallback(Handler.java:587)
    at android.os.Handler.dispatchMessage(Handler.java:92)
    at android.os.Looper.loop(Looper.java:130)
    at android.app.ActivityThread.main(ActivityThread.java:3691)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:507)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
    at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.NullPointerException
    at com.ecw.healow.settings.SettingsMainActivity.logOut(SettingsMainActivity.java:63)
    ... 14 more
java.lang.NullPointerException
    at com.ecw.healow.settings.SettingsMainActivity.logOut(SettingsMainActivity.java:63)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:507)
    at android.view.View$1.onClick(View.java:2173)
    at android.view.View.performClick(View.java:2574)
    at android.view.View$PerformClick.run(View.java:9238)
    at android.os.Handler.handleCallback(Handler.java:587)
    at android.os.Handler.dispatchMessage(Handler.java:92)
    at android.os.Looper.loop(Looper.java:130)
    at android.app.ActivityThread.main(ActivityThread.java:3691)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:507)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
    at dalvik.system.NativeStart.main(Native Method)
" 
```

我不知道那里发生了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T15:36:22.530

我将从查看`SettingsMainActivity.java`文件中的第 63 行开始。根据堆栈跟踪，您将得到一个`NullPointerException`：

```
Caused by: java.lang.NullPointerException
    at com.ecw.healow.settings.SettingsMainActivity.logOut(SettingsMainActivity.java:63)
    ... 
```

# git - Git日志说文件在那里但无法结帐

> ID：16040867
> 
> 赞同：1
> 
> 时间：2013-04-16T15:21:22.063
> 
> 标签：git

是否可以调用`git log filepath`并查看文件是否在提交中，但无法使用 来检查它`git checkout filepath`？

错误：pathspec 'filepath' 与 git 已知的任何文件都不匹配。

我在同一棵工作树中。

编辑：添加了包含`git log filepath`,`git diff sha1id`和`git checkout filepath`.

```
> git log 889e2e74-6ec3-448b-ad35-feb2187d9d2b

commit b2df50ecd14472a1c38d2cd2269898d4f3ab9604
Author: l
Date:   Tue Apr 16 15:20:39 2013 +0100

    Committed 889e2e74-6ec3-448b-ad35-feb2187d9d2b

commit dc9ee9433fd87c9031e7569ab451d2c02343e146
Author: l
Date:   Tue Apr 16 15:20:38 2013 +0100

    Committed 3f743855-ec1b-4e76-808a-eafc6042c47a

commit 79eed05ab387f0f6aec266df109d7cda26789c83
Author: f
Date:   Tue Apr 16 15:19:58 2013 +0100

    Committed 889e2e74-6ec3-448b-ad35-feb2187d9d2b

git diff dc9ee9
diff --git a/3f743855-ec1b-4e76-808a-eafc6042c47a b/3f743855-ec1b-4e76-808a-eafc6042c47a
index 612e91c..619ac4f 100644
Binary files a/3f743855-ec1b-4e76-808a-eafc6042c47a and b/3f743855-ec1b-4e76-808a-eafc6042c47a differ
diff --git a/889e2e74-6ec3-448b-ad35-feb2187d9d2b b/889e2e74-6ec3-448b-ad35-feb2187d9d2b
new file mode 100644
index 0000000..0ae16b3
Binary files /dev/null and b/889e2e74-6ec3-448b-ad35-feb2187d9d2b differ
diff --git a/a007422b-0b9d-4773-aba7-54b6dd2b4ceb b/a007422b-0b9d-4773-aba7-54b6dd2b4ceb
index 5df614e..831cb07 100644
Binary files a/a007422b-0b9d-4773-aba7-54b6dd2b4ceb and b/a007422b-0b9d-4773-aba7-54b6dd2b4ceb differ

git checkout dc9ee9 ./889e2e74-6ec3-448b-ad35-feb2187d9d2b
error: pathspec '889e2e74-6ec3-448b-ad35-feb2187d9d2b' did not match any file(s) known to git. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T15:23:03.490

您只能使用 checkout 从当前提交中获取当前版本。如果该文件在当前提交中不存在，您将不会得到它。要查看文件，请签出提交：

```
git checkout <sha1id> 
```

您可以从中获取 sha1id `git log`。

如果您只想要该文件，并在当前工作树中替换它的版本，请使用

```
git checkout <sha1id> path 
```

反而。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T21:25:12.523

`git diff dc9ee9`将带有 SHA-1 的提交内容`dc9ee9`与您当前的工作目录进行比较。您的特定文件的差异结果：

```
diff --git a/889e2e74-6ec3-448b-ad35-feb2187d9d2b b/889e2e74-6ec3-448b-ad35-feb2187d9d2b
new file mode 100644
index 0000000..0ae16b3
Binary files /dev/null and b/889e2e74-6ec3-448b-ad35-feb2187d9d2b differ 
```

表示该文件在 commit 中不存在`dc9ee9`，但在您当前的工作目录中存在。因此，从该提交中检查该文件将失败。

事实上，从您的`git log`输出来看，有问题的文件似乎是*在下一次*提交中提交的`b2df50ecd14472a1c38d2cd2269898d4f3ab9604`，因此`git checkout dc9ee9 889e2e74-6ec3-448b-ad35-feb2187d9d2b`，您应该尝试这个而不是 （另请注意`--`将提交与路径名分开的语法：

```
git checkout b2df50 -- 889e2e74-6ec3-448b-ad35-feb2187d9d2b 
```

另外，如果`b2df50`是你的 current `HEAD`，你可以这样做：

```
git reset --hard HEAD -- 889e2e74-6ec3-448b-ad35-feb2187d9d2b 
```

# richtextbox - 富文本字段的默认字体

> ID：16040875
> 
> 赞同：1
> 
> 时间：2013-04-16T15:21:34.177
> 
> 标签：richtextbox, xpages

在我的 xpages 应用程序中，我有一个注释字段，它是一个富文本字段。我的用户希望默认字体为 Courier New。是的，他们可以单击下拉菜单并选择 Courier New，但他们希望能够直接开始输入。我尝试在富文本控件上设置样式，但这不起作用。也许在主题中？

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T15:51:24.607

理论上（说实话，我自己从来没有做过）这可以通过rt编辑器的配置来完成。Xpages 默认带有 CKEditor，它有自己的 JS API；你可以在这里找到文档：

[CKEditor API](http://docs.cksource.com/ckeditor_api/index.html)

相关的 config.js 存储在服务器端的这个位置：

[多米诺数据]/domino/html/ckeditor/config.js

# php - 如何通过 MYSQL/PHP 将 .sql.gz 文件导入我的数据库？（不是命令行）

> ID：16040877
> 
> 赞同：3
> 
> 时间：2013-04-16T15:21:38.643
> 
> 标签：php, mysql, database, backup

我有一个备份文件（.sql.gz），我想以编程方式将它导入到本地主机上的空数据库，就像 phpmyadmin 一样，在带有 php/mysql/javascript 的浏览器中，而不是通过命令行。由于它是我的本地主机，因此安全性并不是一个真正的问题，我只想自动化我在开发时必须定期执行的任务。

这里有很多问题，但它们都涉及命令行解决方案。

编辑：我已经安装了 xampp。但是整个过程很繁琐，我必须先删除数据库，然后重新创建它，然后再导入我的数据。我必须经常移动以前的数据库备份。所以我想自动化这个过程。我只是通过 html 表单输入提供备份的 .sql.gz 文件，它会自动完成上述所有操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T15:56:10.200

@MarcB 的评论是正确的。使用 PHP 调用 shell 进程以加载 SQL 脚本。

编写 PHP 脚本来执行备份脚本是浪费时间。您基本上必须在 PHP 中实现 mysql 客户端。

更好的解决方案是这样的：

```
shell_exec("gunzip -c $file_sql_gz | mysql --defaults-file=$my_cnf $database_name"); 
```

`$my_cnf`包含主机、用户、连接密码的类似 my.cnf 的文件的名称在哪里。

另请参阅我过去的一些答案：

*   [从 PHP 中加载 .sql 文件](https://stackoverflow.com/questions/147821/loading-sql-files-from-within-php/149456#149456)
*   [在 PHP 中运行 MySQL *.sql 文件](https://stackoverflow.com/questions/4027769/running-mysql-sql-files-in-php/4028289#4028289)

* * *

回复您的评论：

请参阅[http://www.php.net/manual/en/features.file-upload.post-method.php](http://www.php.net/manual/en/features.file-upload.post-method.php)
您可以使用`$_FILES['userfile']['tmp_name']`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T15:32:09.107

我会用它打开它`gzfile`，在查询分隔符上将它分开，然后放入 mysqli::query

```
$file = implode('', gzfile($sqlFile)); // there doesn't exist a gz* function which reads it completely into a string?
$query = $substring_delimiter = "";
$last_was_backslash = false;
$outside_begin_end = true;
$delimiter = ';';
for ($i = 0; $i < strlen($file); $i++) {
    if ($i > 3 && !strcasecmp(substr($file, $i - 4, 5), "BEGIN") && !$substring_delimiter)
        $outside_begin_end = false;
    if (!$outside_begin_end && !strcasecmp(substr($file, $i - 2, 3), "END") && !$substring_delimiter)
        $outside_begin_end = true;
    if ($i > 7 && !strcasecmp(substr($file, $i - 8, 9), "DELIMITER") && trim($query) == '') {
        $delimiter = '';
        do {
            $delimiter .= $file[$i];
        } while (++$i < strlen($file) && $file[$i] != PHP_EOL)
        $delimiter = trim($delimiter);
    }
    if ($file[$i] == '\'' || $file[$i] == '"')
        if ($substring_delimiter) {
            if ($substring_delimiter == $file[$i] && !$last_was_backslash) 
                $substring_delimiter = "";
        } else {
            $substring_delimiter = $file[$i];
        }
    if ($outside_begin_end && !$substring_delimiter && !strcasecmp($delimiter, substr($file, $i))) {
        $sql->query($query); // where $sql is a mysqli instance
        $query = "";
    } else {
        $query .= $file[$i];
    }
    if ($file[$i] == '\\')
        $last_was_backslash = !$last_was_backslash;
    else
        $last_was_backslash = false;
}
if (trim($query) != "")
    $sql->query($query); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T15:26:36.090

我相信[Sypex Dumper可以做到。](http://sypex.net/en/products/dumper/features/)

# javascript - Google Chrome Frame 和 Amazon Cloud Front CDN 超时？

> ID：16040879
> 
> 赞同：2
> 
> 时间：2013-04-16T15:21:39.713
> 
> 标签：javascript, httprequest, cdn, amazon-cloudfront, google-chrome-frame

我们公司目前遇到启用 Google Chrome Frame 的浏览器和使用 Amazon CloudFront CDN 的第三方网站的问题。对于 CDN 上的所有 CSS 和 JS 文件，chrome 会在请求上准确地等待 2 分钟，然后返回 304 并加载页面。

我们需要激活 chrome 框架，如果站点正在发送 chrome 框架标头，我们似乎无法为特定站点禁用它。

有谁之前经历过这个吗？有没有办法强制超时发生得更快。为什么首先会发生这种情况？

[在这里](https://stackoverflow.com/questions/12160583/internet-explorer-with-google-chrome-frame-resources-from-amazon-cloudfront-ha)重复死问题。

# javascript - 如何在离开页面之前向 websocket 发送断开连接消息

> ID：16040888
> 
> 赞同：0
> 
> 时间：2013-04-16T15:21:57.530
> 
> 标签：javascript, websocket, onunload

所以基本上，如果我说一个使用 websockets 的聊天应用程序，我希望能够向服务器发送一条消息，说我正在断开连接。我试过绑定到onbeforeunload，但这似乎只能显示一条消息。

有更好的策略吗？如果没有，似乎我必须从服务器端执行某种 ping/超时策略。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-21T17:19:51.457

WebSockets 是在 TCP 之上实现的，在 TCP 世界中，不同的连接丢弃 - 是预期的场景。

在网络安全方面 - 您的服务器端不应该依赖客户端的“善意”，并且应该始终独立并期待任何和更多断开连接的情况。

考虑到这一点，您必须预料到连接意外断开（GPRS/EDGE/3G/4G 连接不良或桥接/接地、wifi 掉线、以太网拔出、ISP 问题、服务器网络问题等等）。实际上，没有“再见”的断开连接是最常见的断开连接，因此必须考虑到这一点来实现服务器端逻辑。

# javascript - js文件中的谷歌自定义搜索api

> ID：16040889
> 
> 赞同：1
> 
> 时间：2013-04-16T15:22:00.170
> 
> 标签：javascript, search-engine

首先，我在 google doc 中找到了演示：

```
<html>
  <head>
    <title>JSON/Atom Custom Search API Example</title>
  </head>
  <body>
    <div id="content"></div>
    <script>
      function hndlr(response) {
          // handle result
      }
    </script>
    <script src="https://www.googleapis.com/customsearch/v1?key=KEY&cx=cx&q=cars&callback=hndlr">
    </script>
  </body>
</html> 
```

它工作正常。

但是知道我想在 js 文件中触发“搜索过程”，比如 mySearch.js，那么我该如何完成呢？

例子：

```
var XXXLayer = cc.Layer.extend({
    init:function () {
        this._super();
        var theUrl = 'https://www.googleapis.com/customsearch/v1?key=KEY&cx=cx&q=cars&callback=hndlr';

        // what to do here ???????

        return true;
    },
    hndlr:function(response) {
          // handle result
    }
}); 
```

任何建议将不胜感激谢谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-02T12:58:55.757

当您触发搜索过程时，您可以添加一个脚本元素。

```
function triggersearch(){
     var query=document.getElementById("query").value;
     var JSElement = document.createElement('script');
     JSElement.src = 'https://www.googleapis.com/customsearch/v1?key=KEY&cx=KEY&q='+query+'&callback=hndlr';
     document.getElementsByTagName('head')[0].appendChild(JSElement);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-24T14:25:08.473

使用来自@RamK 的代码，执行以下操作：

索引.html：

```
<html>
  <head>
    <title>Example</title>
  </head>
  <body>
    <div id="query"></div>
    <script src="cs.js"></script>
  </body>
</html> 
```

cs.js：

```
var key = "your api key";                // API KEY
var id = "your custom search engine id"; // CSE ID
var q = "cats";                          // QUERY

function hndlr(response) {
  console.log(response);                 // a way to see your results
}

function triggersearch(){
  var query=document.getElementById("query").value;
  var JSElement = document.createElement('script');
  JSElement.src = `https://www.googleapis.com/customsearch/v1?key=${key}&cx=${id}&q=${q}`+query+'&callback=hndlr';
  document.getElementsByTagName('head')[0].appendChild(JSElement);
}

triggersearch(); 
```

# windows - winapi中“触发”（不创建）过程的时间

> ID：16040893
> 
> 赞同：-3
> 
> 时间：2013-04-16T15:22:06.923
> 
> 标签：windows, winapi, process

我需要获得触发过程的确切时间（而不是创建过程的时间，我知道这是一段时间后）我需要在其图像加载到内存之前获得“运行”程序的时间. 是否可以获得？

附带问题 - winapi 中所有正在运行的进程都是通过 CreateProcess/Ex 函数调用创建的（那么我需要的时间就是调用此类函数的时间）或者还有其他一些在 Windows 中运行进程的其他方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T17:16:36.103

[`GetProcessTimes()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683223%28v=vs.85%29.aspx) should do the trick. It returns the process creation time, which corresponds to when the kernel object was actually created irrespective of when/if the image's code is executed.

# c - 在 for 循环之后的 C 引用

> ID：16040894
> 
> 赞同：4
> 
> 时间：2013-04-16T15:22:07.100
> 
> 标签：c, loops, pointers, for-loop

我的 C 代码有问题。

```
int split(char* source, char*** target, char* splitChar) {
    int i;
    int currentLength;
    int splitCharPosition;
    char* currentSubstring = source;
    int splitCount = charcount(source, splitChar) + 1;

    *target = (char**) malloc(splitCount * sizeof(char**));
    for(i=0;i<splitCount;i++) {
        splitCharPosition = indexOf(currentSubstring, splitChar);
        substring(currentSubstring, target[i], 0, splitCharPosition);
        currentLength = strlen(currentSubstring);
        substring(currentSubstring, &currentSubstring, splitCharPosition + 1, curr  entLength-splitCharPosition);
    }
    return splitCount;
} 
```

问题是，如果我使用调试器，则在第一次运行 for 循环后，指向 splitChar 的指针设置为 0x0。有谁知道为什么它设置为0x0？

编辑：

```
int indexOf(char* source, char* template) {
int i;
int j;
int index;
for (i = 0; source[i]; i++) {
    index = i;
    for (j = 0; template[j]; j++) {
        if (source[i + j] != template[j]) {
            index = -1;
            break;
        }
    }
    if (index != -1) {
        return index;
    }
}
return -1;
} 
```

编辑2：

```
int charcount(char* source, const char* countChar) {
int i;
int count = 0;
for(i=0;source[i];i++) {
    if(source[i] == countChar[0]) {
        count++;
    }
}
return count;
} 
```

编辑3：

```
char* substring(char* source, char** target, int start, int length) {
    *target = (char*) malloc(length + 1);
    strncpy(*target, source + start, length);
    target[length] = '\0';
    return *target;
} 
```

EDIT4：我只是注意到，如果我添加

```
char* sndfpgjps = splitChar; 
```

对于我的 split() 代码，它不会删除引用。有谁知道为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T16:30:10.840

这一行： -

```
 substring(currentSubstring, &currentSubstring, splitCharPosition + 1, curr  entLength-splitCharPosition); 
```

...将导致内存泄漏，并且效率极低。旧的子字符串悬空。并且从未被释放。

写会好很多

```
currentSubString += splitCharPosition + 1; 
```

我不认为这是*问题*，但这是*一个*问题。

此外，当您使用 C 库函数`strlen()`时，为什么不使用`strtok`或更好呢`strtok_r`？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T18:09:39.267

我对代码有一些保留，但这在`valgrind`（没有泄漏，没有滥用）下可以正常工作。除了常量字符串被标记为常量外，我基本上没有改变子函数。中的代码`split()`已被简化。正如我在评论中指出的那样，我建议编写 main`split()`函数，以便您拥有一个`char **string_list;`分配和填充的本地函数。然后，当您要返回时，分配`*target = string_list;`. 这将使您更容易理解正在发生的事情。三重间接是讨厌的。你可以在这里（只是）证明它的合理性，但尽量减少你花在使用三指针上的时间。修订版采用了该策略。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

extern int split(const char *source, char ***target, const char *splitStr);

static int
indexOf(const char *source, const char *template)
{
    int i;
    int j;
    int index;
    for (i = 0; source[i]; i++)
    {
        index = i;
        for (j = 0; template[j]; j++)
        {
            if (source[i + j] != template[j])
            {
                index = -1;
                break;
            }
        }
        if (index != -1)
            return index;
    }
    return -1;
}

static int
charcount(const char *source, const char *countChar)
{
    int count = 0;
    for (int i = 0; source[i]; i++)
    {
        if (source[i] == countChar[0])
            count++;
    }
    return count;
}

static char *
substring(const char *source, int start, int length)
{
    char *target = (char *)malloc(length + 1);
    if (target != 0)
    {
        memmove(target, source + start, length);
        target[length] = '\0';
    }
    return target;
}

int
split(const char *source, char ***target, const char *splitStr)
{
    int    splitCount = charcount(source, splitStr) + 1;
    char **result = (char **)malloc(splitCount * sizeof(*result));

    if (result == 0)
        return -1;

    int    splitLength = strlen(splitStr);
    char **next = result;
    const char *currentSubstring = source;

    for (int i = 0; i < splitCount; i++)
    {
        int splitCharPosition = indexOf(currentSubstring, splitStr);
        if (splitCharPosition < 0)
            break;
        *next++ = substring(currentSubstring, 0, splitCharPosition);
        currentSubstring += splitCharPosition + splitLength;
    }
    *next++ = substring(currentSubstring, 0, strlen(currentSubstring));
    *target = result;
    return (next - result);     /* Actual number of strings */
}

static void print_list(int nstrings, char **strings)
{
    for (int i = 0; i < nstrings; i++)
    {
        if (strings[i] != 0)
            printf("%d: <<%s>>\n", i, strings[i]);
    }
}

static void free_list(int nstrings, char **strings)
{
    for (int i = 0; i < nstrings; i++)
        free(strings[i]);
    free(strings);
}

int main(void)
{
    const char source[] = "This is a string; it is really!";
    char **strings;
    int nstrings;

    nstrings = split(source, &strings, " ");
    printf("Splitting: <<%s>> on <<%s>>\n", source, " ");
    print_list(nstrings, strings);
    free_list(nstrings, strings);

    nstrings = split(source, &strings, "is");
    printf("Splitting: <<%s>> on <<%s>>\n", source, "is");
    print_list(nstrings, strings);
    free_list(nstrings, strings);

    return 0;
} 
```

请注意，在第二个示例中，`charcount()`返回 6 但只有 4 个字符串。这导致对源代码的后期调整。（你可以`realloc()`这样`result`，它的大小正好合适，但除非确实标记了差异——比如“超过 10 个条目”，否则它可能不值得担心。）错误处理并不完美。分配失败后它不会访问无效内存，但它也不会停止尝试分配。它也不会报告分配单个字符串的失败——它会报告分配指针数组的失败。

我可能会通过创建一个结构来避免三重指针：

```
typedef struct StringList
{
    size_t     nstrings;
    char     **strings;
} StringList; 
```

然后，您可以将指向其中之一的指针传递到`split()`和 实用程序函数中，例如`free_list()`and `print_list()`。然后该`free_list()`函数将修改结构，以便在结构指向的数据被释放后两个元素都归零。

我也很想使用不同的实现`indexOf()`：

```
int indexOf(const char *haystack, const char *needle)
{
    const char *pos = strstr(haystack, needle);
    if (pos != 0)
        return (pos - haystack);
    return -1;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T15:40:29.707

我不知道 substring 做了什么，也不知道它有什么签名，但在行

```
substring(currentSubstring, target[i], 0, splitCharPosition); 
```

target[i] 只为 i==0 定义。我相信你想写

```
substring(currentSubstring, (*target)[i], 0, splitCharPosition); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T15:30:50.177

查看您的调试器是否还支持数据断点，即如果修改了内存中的某个位置，则中断。然后将一个放在 splitChar 的实际地址，另一个放在它指向的地址。（因为您没有指定指针是 null 还是指向 nil。）看看它在哪里中断。可能是一个完全不相关的地方；这将表明缓冲区溢出。

此外，您至少可以将 splitChar 设为指向 const 的指针。您实际上并不想修改它，对吗？更好的主意，让它成为一个字符，而不是一个指针，因为它的名字暗示你只有一个字符可以分割，而不是一个字符串。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T15:39:57.280

第一次调用`substring`看起来不正确：

```
substring(currentSubstring, target[i], 0, splitCharPosition); 
```

我怀疑它应该像下面这样索引分配的实际内存：

```
substring(currentSubstring, &((*target)[i]), 0, splitCharPosition); 
```

您首先需要获取目标指向 ( `*target`) 的值，然后从中索引并传递该数组位置的地址。

# linux - 动态值的递归替换

> ID：16040896
> 
> 赞同：0
> 
> 时间：2013-04-16T15:22:13.173
> 
> 标签：linux, unix, sed

我想替换下面文本文件中的 ID 值。目前它是从 1 到 200。我希望它从 201 到 400 开始。

测试.txt

```
paraCR="0566 and 0675" ID="1" 
paraCR="0566 and 0675" ID="2" 
.
.
paraCR="0566 and 0675" ID="200" 
```

我尝试使用以下脚本，但它不起作用。

```
#!/bin/bash
for (( i=1,k=201; i<=200; i++,k++ ))
do
   find . -type f -name "test.txt" -exec sed -i'' -e 's/i/k/g' {} +
done 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T15:27:20.560

使用 Perl：

```
 perl -pe 's/(ID=")(\d+)/sprintf("$1%d",($2+200))/e' input 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T15:27:46.273

在这里，您有一种没有的方法`for`：

```
i=201
while read line
do
   echo $line | sed -s "s/ID\=\"[0-9]*\"/ID\=\"$i\"/g" >> new_file
   i=$(( $i + 1))
done < test.txt
mv new_file test.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T15:35:15.723

Perl 解决方案：

```
perl -pe 's/ID="([0-9]+)"/q(ID=").($1+200).q(")/e' input 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T16:11:04.763

如果您使用的是 bash，则可以避免使用外部程序：

```
while IFS= read -r line
do
    if [[ "$line" == *ID=* ]] ; then
        id=${line##*ID=\"}
        id=$(( ${id%\"*} + 200 ))
        echo "${line%ID=*}ID=\"$id\""  >> outfile
    else
        echo "$line" >> outfile
    fi
done < infile
mv outfile infile 
```

# javascript - Youtube Javascript 冲突仅与 Safari 6

> ID：16040903
> 
> 赞同：0
> 
> 时间：2013-04-16T15:22:25.457
> 
> 标签：javascript, safari, youtube

自从我的客户决定将他的视频放到 Youtube 上后，我的 Javascript 就发生了激烈的冲突。很明显，iframe 的 javascript 和我的代码之间发生了冲突（只有背景上的随机 fadin）... 视频播放后，整个页面的大小就会奇怪地调整。页面中的元素失去了它们的位置和宽度！！！我试图停止我的脚本并删除 iframe：在这两种情况下，窗口都可以很好地调整大小。其他浏览器不会发生这种情况（Safari 5 也不会）：

不幸的是，该网站已经上线：

[http://www.digitalvideo.fr](http://www.digitalvideo.fr)

您可以通过源代码访问我的脚本（右键单击）。

任何帮助真的很感激！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T18:04:16.610

找到解决方案！！

对于那些可能感兴趣的人：Safari 6 在处理 z-index 方面没有任何问题，但是，出于任何原因，在使用 YouTube iframe 时修改 Javasctript DOM 元素 z-index 会导致显示页面上出现真正的问题（甚至尤其是在非-修改过的元素）。

在我的例子中，我在 2 个 div 块上修改了这个属性。

解决了。

# html - Web SQL - 如果不存在则插入或唯一列？

> ID：16040904
> 
> 赞同：2
> 
> 时间：2013-04-16T15:22:25.753
> 
> 标签：html, cordova, web-sql

如果表中有同名的记录，我尝试执行`insert or ignore into WDCategory(name,userID) values('Cate 1',1)`哪个名称是`unique`列但不成功。“不成功”意味着查询失败而不是执行并且不插入任何内容。我尝试过`insert into WDCategory(name,userID) values('Cate 1',1) If Not Exists`，但没有任何改变。

更新：我尝试 `insert or replace into WDCategory(name,userID) values('Cate 1',1)` 它有效。但是记录现在有一个新的 id（自动增加）。有什么办法可以保留旧值吗？

请帮忙！

# ruby-on-rails - 如何使用 RSpec 在我的 Rails 应用程序中测试 JQuery-UI Sortable 的控制器交互？

> ID：16040905
> 
> 赞同：1
> 
> 时间：2013-04-16T15:22:29.337
> 
> 标签：ruby-on-rails, ajax, testing, jquery-ui-sortable, rspec-rails

**问题**

问题是我知道控制器排序操作正在被调用，并且它得到了正确的参数来做它的事情。当我通过 UI 进行测试时，我可以看到一切正常，但它不会*为我的测试*排序。我可以看到（在控制器操作中使用“puts”）哈希正在正确地发送到控制器操作，所以效果很好。问题是，控制器动作似乎根本不是...... ACTING。

**问题**

我该如何测试这个？我尝试在规范中的 :post, :sort 行之后插入“sleep 2”。您可以看到我已经在该行前面添加了“xhr”，并且我尝试在该行的末尾添加 :format => :js （未显示）但无济于事。

**我在做什么**

我正在使用 JQuery UI 的“可排序”插件对屏幕上的清单上的作业进行排序。它目前运行良好，我可以通过更改屏幕上的顺序来“测试”它，然后刷新页面以查看所有内容现在都在正确的位置（我刚刚在刷新之前将东西移动到的位置）。显然，这不是严格的测试，但到目前为止已经足够好了。

现在，我正在添加一些逻辑来在后台复制/归档排序的项目，并且我需要进行一些测试以确保在进行排序时所有数据都被正确操作。旧的 sort-refresh-check 测试方法在这里不起作用，因为有些事情发生在后台，而这些事情不会出现在屏幕上。在编写这些测试之前，我想为当前工作的设置编写测试，但我无法通过测试。

**关联说明**

有 Jobs、Checklists 和 ChecklistsJobs（连接表）。连接表具有使用这种排序更新的“job_position”字段。有关模型的片段，请参见下面的“代码”部分。

**用于执行此操作的资源**

[JQuery UI - 可排序](http://jqueryui.com/sortable/)

[Railscast #147 可排序列表（修订）](http://railscasts.com/episodes/147-sortable-lists-revised)

[守护宝石](https://github.com/guard/guard)

导轨 3.2.11

红宝石 1.9.3p374

rspec 2.13.1

宝石在 :test

```
gem "rspec-rails", :group => [:test, :development]
group :test do
  gem "factory_girl_rails", :require => false
  gem "capybara"
  gem "guard-rspec"
  gem 'rb-fsevent', '~> 0.9'
end 
```

**代码**

工作.rb

```
class Job < ActiveRecord::Base
  scope :archived_state, lambda {|s| where(:archived => s)}

  belongs_to :creator, :class_name => "Admin", :foreign_key => "creator_id"
  has_many :checklists_jobs, :dependent => :destroy
  has_many :checklists, :through => :checklists_jobs
.
.
.
end 
```

清单.rb

```
class Checklist < ActiveRecord::Base
  scope :archived_state, lambda {|s| where(:archived => s) }

  has_many :checklists_jobs, :dependent => :destroy, :order => 'checklists_jobs.job_position'#, :conditions => {'archived_at' => nil}
  has_many :jobs, :through => :checklists_jobs
.
.
.
end 
```

checklists_job.rb

```
class ChecklistsJob < ActiveRecord::Base
  belongs_to :job
  belongs_to :checklist
  attr_accessible :job_position, :job_required
.
.
.
end 
```

应用程序.js

```
$(function() {
    $('ul[id^="sortable"]').sortable({
        axis: 'y',
        handle: '.handle',
        update: function() {
            return $.post($(this).data('update-url'), $(this).sortable('serialize'));
          }
    });
}); 
```

Show.html.erb 视图

```
<dd><ul class="unstyled" id="sortable" data-update-url="<%= sort_checklist_path(@checklist) %>">
  <% @checklist.checklists_jobs.archived_state(:false).each do |cj| %>
    <%= content_tag_for :li, cj do %><span class="handle"><i class="icon-move btn btn-mini"></i></span> <strong><%= cj.job.name %></strong><% if cj.job.description? %> - <%= cj.job.description %><% end %>
    <% end %>
  <% end %>
</ul></dd> 
```

checklists_controller.rb

```
def sort
  @checklist = Checklist.find(params[:id])
  params[:checklists_job].each_with_index do |id, index|
    @checklist.checklists_jobs.update_all({job_position: index+1}, {id: id})
  end
  render nothing: true
end 
```

checklists_controller_spec.rb - 我知道这不是超级高效的空间用户，但我将所有内容分成单独的行以确保我正确设置了所有内容。

```
require 'spec_helper'

describe ChecklistsController do
  login_admin  
  describe "POST sort" do
    context "with no submission" do
      before do
        @checklist = FactoryGirl.create(:checklist)
        @job1 = FactoryGirl.create(:job)
        @job2 = FactoryGirl.create(:job)
        @job3 = FactoryGirl.create(:job)
        @job4 = FactoryGirl.create(:job)
        @checklist.jobs << [@job1, @job2, @job3, @job4]
        @checklist.save
        @cj1 = @checklist.checklists_jobs.find_by_job_id(@job1.id)
        @cj2 = @checklist.checklists_jobs.find_by_job_id(@job2.id)
        @cj3 = @checklist.checklists_jobs.find_by_job_id(@job3.id)
        @cj4 = @checklist.checklists_jobs.find_by_job_id(@job4.id)
        @cj1.job_position = 1
        @cj2.job_position = 2
        @cj3.job_position = 3
        @cj4.job_position = 4
        @cj1.save
        @cj2.save
        @cj3.save
        @cj4.save
        @attr = [@job4.id, @job3.id, @job2.id, @job1.id]        
      end

      # format of the params hash that's being passed:
      # {"checklists_job"=>["545", "544", "546", "547"], "id"=>"124"}

      it "sorts the checklist's checklists_jobs" do
        xhr :post, :sort, { :id => @checklist.id, :checklists_job => @attr }
        @checklist.reload
        # The test fails on the next line
        @checklist.checklists_jobs.find_by_job_id(@job1.id).job_position.should == 4
      end
    end
  end
end 
```

**测试结果**- 请注意，我在上面的规范中标记了失败的行

```
Failures:

  1) ChecklistsController POST sort with no submission sorts the checklist's checklists_jobs
     Failure/Error: @checklist.checklists_jobs.find_by_job_id(@job1.id).job_position.should == 4
       expected: 4
            got: 1 (using ==)
     # ./spec/controllers/checklists_controller_spec.rb:394:in `block (4 levels) in <top (required)>'

Finished in 2.59 seconds
51 examples, 1 failure

Failed examples:

rspec ./spec/controllers/checklists_controller_spec.rb:391 # ChecklistsController POST sort with no submission sorts the checklist's checklists_jobs 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T03:32:38.283

这是一个非常简单的答案：我在 before 块中构建的 @attr 数组是一个作业 ID 数组，应该是一个 checklists_job id 数组。

这：

```
@attr = [@job4.id, @job3.id, @job2.id, @job1.id] 
```

应该是这样的：

```
@attr = [@cj4.id, @cj3.id, @cj2.id, @cj1.id] 
```

哎呀。

# apache - Apache 常见 IO FileUtils 问题

> ID：16040906
> 
> 赞同：3
> 
> 时间：2013-04-16T15:22:29.523
> 
> 标签：apache, apache-commons, fileutils

我正在尝试使用 Apache Commons IO 的 FileUtils.writeStringToFile() 方法。每一点文档都说我可以做到这一点：

```
FileUtils.writeStringToFile(File, String with data, boolean append); 
```

我想要这种方法，因为我希望每次都将数据写入文件末尾。

但是，在 Eclipse 中，它一直告诉我这个方法不存在。我仅有的两个是：

```
FileUtils.writeStringToFile(File, String with data);
FileUtils.writeStringToFile(File, String with data, String encoding); 
```

我更正了我的 POM 文件，使其现在具有此依赖项：

```
<dependency>
        <groupId>commons-io</groupId>
        <artifactId>commons-io</artifactId>
        <version>2.4</version>
</dependency> 
```

有人可以告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T18:30:20.387

[1.3.2](http://commons.apache.org/proper/commons-io/javadocs/api-1.3/index.html)版本没有这个方法，使用更新版本的commons-io

```
<dependency>
    <groupId>commons-io</groupId>
    <artifactId>commons-io</artifactId>
    <version>2.4</version>
</dependency> 
```

检查[FileUtils 2.4 javadoc](http://commons.apache.org/proper/commons-io/javadocs/api-2.4/org/apache/commons/io/FileUtils.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T18:01:39.073

原来我正在将 Tomcat 库文件以及 JRE 库文件添加到我的项目中。因为当我从 POM 中删除 commons-io 时，我仍然可以使用 FileUtils。

我不得不从我的构建路径中删除 Tomcat 库文件，一旦我把 commons-io 放回去，它就可以工作了。

# c# - 如何检查 C#.NET 应用程序的 SOAP 输出？

> ID：16040908
> 
> 赞同：0
> 
> 时间：2013-04-16T15:22:33.420
> 
> 标签：c#, web-services, soap, soapui

我正在 VS2010 (.NET 4.5) 中开发 Windows 窗体 C# 应用程序。该应用程序使用 Web 服务。不出所料，代理类继承自 SoapHttpClientProtocol 类。数据（记录）由 xsd 设置为数据集，该数据集与我用来生成 Web 参考的 wsdl 捆绑在一起。

这是我遇到的问题：当我使用我的应用程序时，其中一个 Web 服务 API 调用不起作用，但通过 SoapUI 调用相同的函数就可以了。SoapUI 中的调用结构基本上是 SOAP 信封，其中 API 调用的模式标签围绕用户名的值和包含数据记录中的字段的列表节点。我得到的错误是超级描述性的“内部错误（来自客户端）”。

代理类中的 API 调用：

```
 [

System.Web.Services.Protocols.SoapDocumentMethodAttribute("http://localhost:8080/updateRecord", RequestNamespace="http://www.<redacted>.com/schemas", ResponseNamespace="http://www.<redacted>.com/schemas", Use=System.Web.Services.Description.SoapBindingUse.Literal, ParameterStyle=System.Web.Services.Protocols.SoapParameterStyle.Wrapped)]
        [return: System.Xml.Serialization.XmlArrayAttribute("issues", Form=System.Xml.Schema.XmlSchemaForm.Unqualified, IsNullable=true)]
        [return: System.Xml.Serialization.XmlArrayItemAttribute("list", Form=System.Xml.Schema.XmlSchemaForm.Unqualified, IsNullable=false)]
        public qaIssue[] updateRecord([System.Xml.Serialization.XmlElementAttribute(Form=System.Xml.Schema.XmlSchemaForm.Unqualified, IsNullable=true)] string username, [System.Xml.Serialization.XmlElementAttribute(Form=System.Xml.Schema.XmlSchemaForm.Unqualified, IsNullable=true)] dataRecord record) {
            object[] results = this.Invoke("updateRecord", new object[] {
                        username,
                        record});
            return ((qaIssue[])(results[0]));
        } 
```

这就是包的样子，至少根据 SoapUI：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:sch="http://www.<redacted>.com/schemas">
   <soapenv:Header/>
   <soapenv:Body>
      <sch:updateCitation>
         <!--Optional:-->
         <username>LikeI'dLeaveMyUsernameInHere</username>
         <!--Optional:-->
         <record>
          <reportDate>2013-04-15-04:00</reportDate>
          <reportType>Temporary</reportType>
....

         </record>
      </sch:updateRecord>
   </soapenv:Body>
</soapenv:Envelope> 
```

还有另一个功能也尝试将数据记录发送到 Web 服务。但是，除了这两个函数之外，我对任何其他 API 调用都没有任何问题，包括那些将记录传递到我的应用程序的调用。

有什么方法可以利用 SoapUI 或 Visual Studio 2010 Ultimate 中的某些工具来检查应用程序正在传输的包？由于调用在 SoapUI 中工作得很好，肯定有一些关于我的应用程序的东西导致了这个问题......对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T21:50:39.480

RequestBin ( [http://requestb.in/](http://requestb.in/) ) 是一个方便查看http请求内容的工具。

只需创建一个 RequestBin 并将您的应用程序的端点配置为指向它，然后从您的应用程序中触发一个请求，它将在您的 RequestBin 中可见。

如果您对捕获请求和响应消息感兴趣，您也可以尝试使用 Fiddler ( [http://fiddler2.com/ )，但我发现 RequestBin 更快更容易。](http://fiddler2.com/)

# c++ - 如何遍历未知类型？

> ID：16040909
> 
> 赞同：3
> 
> 时间：2013-04-16T15:22:35.087
> 
> 标签：c++, vector, iterator

我有这个功能：

```
set<int> Search(const _Type & hayHeap) const {
        set<int>myset;
        for (vector<typename>::const_iterator i = needle.begin(); i != needle.end(); ++i) {
            cout << (*i) << " ";
        }
        return myset;
    }; 
```

针的定义如下：`vector<string> needle;`

现在我需要创建另一个迭代器，它将遍历`hayHeap`. 但问题是，我不知道它会是什么类型。它也可以是单个`string`或`vector`of `<int>`/ `<string>`。所以当有 a 时`string`，它只迭代一次，如果有一些向量它迭代`(myVector.count()-1)`-times。如何使这种类型独立的迭代器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T15:24:15.417

在 C++03 中：

```
template <typename C>
set<int> Search(const C& hayHeap) const {
    set<int>myset;
    for (typename C::const_iterator i = needle.begin(); i != needle.end(); ++i) {
        cout << (*i) << " ";
    }
    return myset;
}; 
```

在 C++11 中：

```
template <typename C>
set<int> Search(const C& hayHeap) const {
    set<int>myset;
    for (auto& i : needle) {
        cout << i << " ";
    }
    return myset;
}; 
```

根据您的实际需要，您将替换`int`为`typename C::value_type`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T15:30:19.093

好的，我想我现在明白你的问题了。我认为您正在寻找某种类型的功能。这种东西。

```
template<typename T>
struct my_selector {
    static void search(T& t) {
        cout << " Single string / int search" << endl;
        bool b = t == "needle";
        cout << b;
    }
};

template<typename T>
struct my_selector<vector<T>> {
    static void search(vector<T>& needle) {
        cout << " Vector search" << endl;
        for (typename vector<T>::const_iterator i = needle.begin(); 
                      i != needle.end(); ++i) 
        {
           cout << (*i) << " ";
        }
    }
};

int main() {

  typedef std::vector<std::string> _Type;  
  _Type needle(4,"s");
  // Search function is selected based on type of _Type.
  my_selector<_Type>::search(needle);

  // typedef string _Type;  
  // _Type needle = "needle";
  // // Search function is selected based on type of _Type.
  // my_selector<_Type>::search(needle);

} 
```

# c# - 如何在 Web 请求后在 C# 中反序列化复杂的嵌套 Json 数据

> ID：16040910
> 
> 赞同：4
> 
> 时间：2013-04-16T15:22:44.353
> 
> 标签：c#, json.net

好的，所以基本上，如果您查看以下代码，我已经向 google api 发出了一个 web 请求，该 api 将日历信息作为字符串返回，但是我在访问嵌套的 Json 数据时遇到了麻烦。我已经做了很多搜索，老实说我完全迷路了。这是我发出网络请求并将 Json 数据传递给字符串的代码：

```
WebRequest request = WebRequest.Create("http://www.google.com/calendar/feeds/developer-calendar@google.com/public/full?alt=json");

request.Credentials = CredentialCache.DefaultCredentials;

request.ContentType = "application/json";

WebResponse response = request.GetResponse();

Stream dataStream = response.GetResponseStream();

StreamReader reader = new StreamReader (dataStream);

string responseFromServer = reader.ReadToEnd(); 
```

但是一旦我有了包含 Json 数据的字符串，我似乎只能使用以下类访问版本和编码组件：

```
 public class calendarData
    {
        public string version { get; set; }
        public string encoding { get; set; }
        public string feed { get; set; }
    } 
```

所以，我想我的问题是在这个请求的情况下访问嵌套 json 数据的最佳方式是什么......上面的网络请求中提供的 url 应该可以工作。

另外，我在 Xamarin 工作室工作，所以我使用 Newtonsoft.Json 进行反序列化。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T15:28:33.143

将其反序列化为 RootObject 类型的对象，然后访问属性/字段。

您可以使用 [http://json2csharp.com/](http://json2csharp.com/)）或 [http://jsonpack.com/ModelGenerators/CSharp](http://jsonpack.com/ModelGenerators/CSharp)

生成[json 类](http://jsonclassgenerator.codeplex.com/)。

主要问题是您似乎有无效的 csharp 变量名。

像这样：

```
// Json Mapping Automatically Generated By JsonToolkit Library for C#
// Diego Trinciarelli 2011
// To use this code you will need to reference Newtonsoft's Json Parser, downloadable from codeplex.
// http://json.codeplex.com/
// 
using System;
using Newtonsoft.Json;

namespace MyNameSpace{

    [Serializable]
     class MyMainClass {

        public string Version;
        public string Encoding;
        public Feed Feed;

        //Empty Constructor
        public MyMainClass(){}

        public string Serialize()
        {
            return JsonConvert.SerializeObject(this);
        }
        public static MyMainClass FromJson(string json)
        {
            return JsonConvert.DeserializeObject<MyMainClass>(json);
        }
    }

    [Serializable]
     class Id {

        public string $t;

        //Empty Constructor
        public Id(){}

    }

    [Serializable]
     class Updated {

        public string $t;

        //Empty Constructor
        public Updated(){}

    }

    [Serializable]
     class Category {

        public string Scheme;
        public string Term;

        //Empty Constructor
        public Category(){}

    }

    [Serializable]
     class Title {

        public string $t;
        public string Type;

        //Empty Constructor
        public Title(){}

    }

    [Serializable]
     class Subtitle {

        public string $t;
        public string Type;

        //Empty Constructor
        public Subtitle(){}

    }

    [Serializable]
     class Link {

        public string Rel;
        public string Type;
        public string Href;

        //Empty Constructor
        public Link(){}

    }

    [Serializable]
     class Name {

        public string $t;

        //Empty Constructor
        public Name(){}

    }

    [Serializable]
     class Email {

        public string $t;

        //Empty Constructor
        public Email(){}

    }

    [Serializable]
     class Author {

        public Name Name;
        public Email Email;

        //Empty Constructor
        public Author(){}

    }

    [Serializable]
     class Generator {

        public string $t;
        public string Version;
        public string Uri;

        //Empty Constructor
        public Generator(){}

    }

    [Serializable]
     class OpenSearch$totalResults {

        public int $t;

        //Empty Constructor
        public OpenSearch$totalResults(){}

    }

    [Serializable]
     class OpenSearch$startIndex {

        public int $t;

        //Empty Constructor
        public OpenSearch$startIndex(){}

    }

    [Serializable]
     class OpenSearch$itemsPerPage {

        public int $t;

        //Empty Constructor
        public OpenSearch$itemsPerPage(){}

    }

    [Serializable]
     class GCal$timezone {

        public string Value;

        //Empty Constructor
        public GCal$timezone(){}

    }

    [Serializable]
     class GCal$timesCleaned {

        public int Value;

        //Empty Constructor
        public GCal$timesCleaned(){}

    }

    [Serializable]
     class Id2 {

        public string $t;

        //Empty Constructor
        public Id2(){}

    }

    [Serializable]
     class Published {

        public string $t;

        //Empty Constructor
        public Published(){}

    }

    [Serializable]
     class Updated2 {

        public string $t;

        //Empty Constructor
        public Updated2(){}

    }

    [Serializable]
     class Category2 {

        public string Scheme;
        public string Term;

        //Empty Constructor
        public Category2(){}

    }

    [Serializable]
     class Title2 {

        public string $t;
        public string Type;

        //Empty Constructor
        public Title2(){}

    }

    [Serializable]
     class Content {

        public string $t;
        public string Type;

        //Empty Constructor
        public Content(){}

    }

    [Serializable]
     class Link2 {

        public string Rel;
        public string Type;
        public string Href;
        public string Title;

        //Empty Constructor
        public Link2(){}

    }

    [Serializable]
     class Name2 {

        public string $t;

        //Empty Constructor
        public Name2(){}

    }

    [Serializable]
     class Email2 {

        public string $t;

        //Empty Constructor
        public Email2(){}

    }

    [Serializable]
     class Author2 {

        public Name2 Name;
        public Email2 Email;

        //Empty Constructor
        public Author2(){}

    }

    [Serializable]
     class Gd$feedLink {

        public string Href;

        //Empty Constructor
        public Gd$feedLink(){}

    }

    [Serializable]
     class Gd$comments {

        public Gd$feedLink Gd$feedLink;

        //Empty Constructor
        public Gd$comments(){}

    }

    [Serializable]
     class Gd$eventStatus {

        public string Value;

        //Empty Constructor
        public Gd$eventStatus(){}

    }

    [Serializable]
     class Gd$where {

        public string ValueString;

        //Empty Constructor
        public Gd$where(){}

    }

    [Serializable]
     class Gd$attendeeStatus {

        public string Value;

        //Empty Constructor
        public Gd$attendeeStatus(){}

    }

    [Serializable]
     class Gd$who {

        public string Email;
        public string Rel;
        public string ValueString;
        public Gd$attendeeStatus Gd$attendeeStatus;

        //Empty Constructor
        public Gd$who(){}

    }

    [Serializable]
     class Gd$when {

        public string EndTime;
        public string StartTime;

        //Empty Constructor
        public Gd$when(){}

    }

    [Serializable]
     class Gd$transparency {

        public string Value;

        //Empty Constructor
        public Gd$transparency(){}

    }

    [Serializable]
     class GCal$anyoneCanAddSelf {

        public string Value;

        //Empty Constructor
        public GCal$anyoneCanAddSelf(){}

    }

    [Serializable]
     class GCal$guestsCanInviteOthers {

        public string Value;

        //Empty Constructor
        public GCal$guestsCanInviteOthers(){}

    }

    [Serializable]
     class GCal$guestsCanModify {

        public string Value;

        //Empty Constructor
        public GCal$guestsCanModify(){}

    }

    [Serializable]
     class GCal$guestsCanSeeGuests {

        public string Value;

        //Empty Constructor
        public GCal$guestsCanSeeGuests(){}

    }

    [Serializable]
     class GCal$sequence {

        public int Value;

        //Empty Constructor
        public GCal$sequence(){}

    }

    [Serializable]
     class GCal$uid {

        public string Value;

        //Empty Constructor
        public GCal$uid(){}

    }

    [Serializable]
     class Gd$when2 {

        public string StartTime;

        //Empty Constructor
        public Gd$when2(){}

    }

    [Serializable]
     class Gd$originalEvent {

        public string Href;
        public string Id;
        public Gd$when2 Gd$when;

        //Empty Constructor
        public Gd$originalEvent(){}

    }

    [Serializable]
     class Gd$recurrence {

        public string $t;

        //Empty Constructor
        public Gd$recurrence(){}

    }

    [Serializable]
     class Entry {

        public Id2 Id;
        public Published Published;
        public Updated2 Updated;
        public Category2[] Category;
        public Title2 Title;
        public Content Content;
        public Link2[] Link;
        public Author2[] Author;
        public Gd$comments Gd$comments;
        public Gd$eventStatus Gd$eventStatus;
        public Gd$where[] Gd$where;
        public Gd$who[] Gd$who;
        public Gd$when[] Gd$when;
        public Gd$transparency Gd$transparency;
        public GCal$anyoneCanAddSelf GCal$anyoneCanAddSelf;
        public GCal$guestsCanInviteOthers GCal$guestsCanInviteOthers;
        public GCal$guestsCanModify GCal$guestsCanModify;
        public GCal$guestsCanSeeGuests GCal$guestsCanSeeGuests;
        public GCal$sequence GCal$sequence;
        public GCal$uid GCal$uid;
        public Gd$originalEvent Gd$originalEvent;
        public Gd$recurrence Gd$recurrence;

        //Empty Constructor
        public Entry(){}

    }

    [Serializable]
     class Feed {

        public string Xmlns;
        public string Xmlns$openSearch;
        public string Xmlns$gCal;
        public string Xmlns$gd;
        public Id Id;
        public Updated Updated;
        public Category[] Category;
        public Title Title;
        public Subtitle Subtitle;
        public Link[] Link;
        public Author[] Author;
        public Generator Generator;
        public OpenSearch$totalResults OpenSearch$totalResults;
        public OpenSearch$startIndex OpenSearch$startIndex;
        public OpenSearch$itemsPerPage OpenSearch$itemsPerPage;
        public GCal$timezone GCal$timezone;
        public GCal$timesCleaned GCal$timesCleaned;
        public Entry[] Entry;

        //Empty Constructor
        public Feed(){}

    }

}
//Json Mapping End 
```

# iphone - 使用 UIGestureRecognizer 逐帧动画

> ID：16040913
> 
> 赞同：0
> 
> 时间：2013-04-16T15:22:47.690
> 
> 标签：iphone, objective-c, uiimageview, uiswipegesturerecognizer

我想展示一个带有旋转对象图像的动画。我有一个`NSArray`对象的框架，我想用属性逐帧显示它们`UIImageView` `animationImages`。

问题是我想用`UISwipeGestureRecognizer`（左右）控制动画。并且根据手势的速度，对象应该旋转得更快或更慢。我认为这是不可能的，因为它只被称为一次而不是连续的手势。

（注意：这是我在 StackOverflow 中的第一个问题）

先感谢您

编辑：我只是发布我的解决方案。也许它对任何人都有用。我认为它很有用。

**首先：**向视图添加手势。

```
self.recognizer = [[UISwipeGestureRecognizer alloc] init];
self.recognizer.cancelsTouchesInView=NO;
[self.view addGestureRecognizer:self.recognizer]; 
```

**其次：**在 tocuhMoved 方法中，我根据上一次触摸的方向显示我需要的框架。它由用户的事件调用。

```
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event{

    NSInteger image= [self.animationView.animationImages indexOfObject:self.animationView.image];
    UITouch *touch = [touches anyObject];
    NSLog(@"Touch moved with index:%i", image);

    if ((positionTouch.x<[touch locationInView:self.animationView].x)) {
        if (image==24) {
            self.animationView.image=[self.animationView.animationImages objectAtIndex:0];
        }
        else{
            self.animationView.image=[self.animationView.animationImages objectAtIndex:image+1];
        }
    }
    else if((positionTouch.x>[touch locationInView:self.animationView].x)){
        if (image==0) {
            self.animationView.image=[self.animationView.animationImages objectAtIndex:24];
        }
        else{
            self.animationView.image=[self.animationView.animationImages objectAtIndex:image-1];
        }

    }

    positionTouch= [touch locationInView:self.animationView];
} 
```

不要忘记`<UIGestureRecognizerDelegate>`

使用这种方法，我填充了帧数组......

```
-(void)addPictures{
    NSMutableArray* mArray=[[NSMutableArray alloc]initWithCapacity:25];
    for (int i=0; i<25; i++) {
        [mArray insertObject:[UIImage imageNamed:[NSString stringWithFormat:@"Picture %i.jpg", i+1]] atIndex:i];
    }

    self.animationView.image=[mArray objectAtIndex:0];
    self.animationView.animationImages=mArray;

    [self.view addSubview:self.animationView];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T15:37:09.147

控制动画的速度实际上非常简单。事实上，它是如此简单（因为 CALayer 符合 CAMediaTiming 协议）以至于控制它的属性实际上称为[speed](https://developer.apple.com/library/mac/documentation/graphicsimaging/reference/CAMediaTiming_protocol/Introduction/Introduction.html)。只需将手势用作滑块的一种模拟，并计算相对于它在屏幕上的位置的 x 值。这应该是一个合适的起点：

```
//Speed changes necessitate a change in time offset, begin time, and
//speed itself.  Simply assigning to speed it not enough, as the layer needs
//to be informed that it's animation timing function is being mutated.  By
//assigning a new time offset and a new begin time, the layer 
//automatically adjusts the time of any animations being run against it
layer.timeOffset = [layer convertTime:CACurrentMediaTime() fromLayer:nil];
layer.beginTime = CACurrentMediaTime();
layer.speed = ([self.gesture locationInView:self.view].x / CGRectGetWidth(self.view.bounds)); 
```

# r - R&Makefile：如何继承依赖？

> ID：16040920
> 
> 赞同：1
> 
> 时间：2013-04-16T15:23:06.987
> 
> 标签：r, makefile, dependency-management

我使用 a`Makefile`对我的文件进行字节编译`R`（主要是为了检测代码的潜在问题）。编译文件时，我会加载它的`library`需求`loadcmp`及其本地依赖项：

```
R = R --quiet
MISC_REQ = entropy igraph data.table
misc.Rc : REQ = $(MISC_REQ)
import.Rc : import.R misc.Rc
import.Rc : REQ = $(MISC_REQ)
modeling-functions.Rc : modeling-functions.R misc.Rc
modeling-functions.Rc : REQ = $(MISC_REQ) plyr Matrix e1071

%.Rc : %.R
    $(R) $(foreach f,$(REQ),-e 'library("$f")') \
        $(foreach f,$(filter %.Rc, $^),-e 'loadcmp("$f")') \
        -e 'source("$<"); cmpfile("$<"); checkUsageEnv(.GlobalEnv)' 
```

我想知道是否有办法让我避免*两次*指定依赖项：一次是当我提到`import.Rc`依赖项时`misc.Rc`，第二次是添加`MISC_REQ`到`REQ`for时`import.Rc`。

编辑：对于我非常简单的依赖树，我可以使用以下简化：

```
REQ = entropy igraph data.table
misc.Rc :
share-click-import.Rc : share-click-import.R misc.Rc
modeling-functions.Rc : modeling-functions.R misc.Rc
modeling-functions.Rc : REQ += plyr Matrix e1071 
```

但是，我想要一个更通用的解决方案。

自动依赖检测`omake`会很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:25:50.563

我认为没有任何明智的方法可以做到这一点。请注意，即使您将两者都称为“依赖项”，但只有第一个（import.Rc：import.R misc.Rc）实际上是 Make 意义上的依赖项。第二件事是设置特定于目标的变量。恐怕不可能将这两件事都设置在一个规则中。

原则上你可以编写一个函数，比如'gendeps'，它可以为你生成规则，但对我来说，它似乎过于复杂，归结为输入完全相同的信息。无论如何，该功能可能如下所示：

```
# Generate dependency rules
# usage:
#  $(eval $(call gendeps,targetfile,prerequisites,packages))
define gendeps
$1: $2

$1: REQ+=$3
endef 
```

然后将其用作，例如：

```
$(eval $(call gendeps,misc.Rc,import.R misc.R,plyr)) 
```

这将使 import.R 成为 misc.Rc 的先决条件，并将 plyr 包添加到所需包的列表中。

在您的示例中，您还可以设置 REQ 的默认值

```
REQ=$(MISC_REQ) 
```

并删除 import.Rc 和 misc.Rc 的目标特定设置

# javascript - 通过 jQuery 加载 GET 时，变量不可用

> ID：16040922
> 
> 赞同：0
> 
> 时间：2013-04-16T15:23:17.527
> 
> 标签：javascript, jquery, html, get, undefined

我正在使用 jQuery 获取导航文件的内容并将其加载到我页面一部分的 div 中。

我为它提供了一个包含页面名称的值，以便我可以更新导航上的“活动”类。

这是我用来显示 GET 信息的代码，它完美地工作，因为当我从浏览器传递一个变量（即 header.html?page=foo）时它工作得很好。

```
<script>
    function getQueryParams(qs) {
        qs = qs.split("+").join(" ");
        var params = {},
            tokens,
            re = /[?&]?([^=]+)=([^&]*)/g;
        while (tokens = re.exec(qs)) {
            params[decodeURIComponent(tokens[1])]
                = decodeURIComponent(tokens[2]);
        }
        return params;
    }
    var $_GET = getQueryParams(document.location.search);
    alert($_GET["page"]);
</script> 
```

正如您目前所看到的，它只显示带有该值的警报。

当我调用这个页面时，它很简单：

```
<script>
   $("#header").load("header.html?page=bar");
</script> 
```

对于我的一生，我无法理解为什么从 .load 调用它时它会以“未定义”的形式返回，因为我之前已经多次使用 GET 变量。

任何输入将不胜感激，

克里斯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T15:31:25.833

当 Javascript 由 运行时`.load`，`document`是原始文档，而不是正在加载的页面。

要将参数传递给正在加载的脚本，请使用全局变量。

# elasticsearch - 范围过滤器不起作用

> ID：16040924
> 
> 赞同：5
> 
> 时间：2013-04-16T15:23:22.747
> 
> 标签：elasticsearch

我正在使用 elasticsearch 搜索引擎，当我运行下面的代码时，返回的结果与范围条件不匹配（我得到的项目的发布日期低于所需的限制）：

```
#!/bin/bash
curl -X GET 'http://localhost:9200/newsidx/news/_search?pretty' -d '{

    "fields": [
        "art_text",
        "title",
        "published",
        "category"
    ],
    "query": {
        "bool": {

            "should": [
                {
                    "fuzzy": {"art_text": {"boost": 89, "value": "google" }}
                },
                {
                    "fuzzy": {"art_text": {"boost": 75, "value": "twitter" }}
                }
            ],
            "minimum_number_should_match": 1
        }
    },
    "filter" : {
        "range" : {
            "published" : {
                "from" : "2013-04-12 00:00:00"
            }
        }
    }

}

' 
```

我还尝试将 range 子句放在 bool 查询中的一个必须项中，但结果是相同的。

编辑：我使用 elasticsearch 通过河插件在 mongodb 中搜索。这是我运行以使用 ES 搜索 mongodb 数据库的脚本：

```
#!/bin/bash
curl -X PUT localhost:9200/_river/mongodb/_meta -d '{
        "type":"mongodb",
        "mongodb": {
                "db": "newsful",
                "collection": "news"
        },
    "index": {
            "name": "newsidx",
        "type": "news"
    }
}' 
```

除此之外，我没有创建另一个索引。

编辑2：

es 映射的视图：

```
http://localhost:9200/newsidx/news/_mapping

published: {
    type: "string"
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T17:20:20.673

The reason is in your mapping. The published field, which you are using as a date, is indexed as a string. That's probably because the [date format](http://www.elasticsearch.org/guide/reference/mapping/date-format/) you are using is not the default one in elasticsearch, thus the field type is not auto-detected and it's indexed as a simple string.

You should change your mapping using the [put mapping api](http://www.elasticsearch.org/guide/reference/api/admin-indices-put-mapping/). You need to define the published field as a date there, specifying the format you're using (can be more than one) and reindex your data.

After that your range filter should work!

# javascript - emberjs 是否具有与 rails `yield :something` 等价的功能？

> ID：16040926
> 
> 赞同：2
> 
> 时间：2013-04-16T15:23:39.340
> 
> 标签：javascript, ruby-on-rails, templates, ember.js

在 Rails 中，您可以执行以下操作：

应用程序.html.erb：

```
<h1><%= yield :title %></h1>
<%= yield %> 
```

someother_template.html.erb：

```
content_for :title { 'Some Title' }

other stuffz 
```

有没有办法使用 emberjs 做这种事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T15:43:11.427

> 有没有办法使用 emberjs 做这种事情？

如果你想要 yield-as-in-layouts 那么是的，你可以使用 handlebars `{{yield}}`helper 来包装一个视图

```
AViewWithLayout = Ember.View.extend({
  layout: Ember.Handlebars.compile("<div class='my-decorative-class'>{{yield}}</div>")
  template: Ember.Handlebars.compile("I got wrapped"),
}); 
```

参见[Ember.Handlebars.helpers#yield](http://emberjs.com/api/classes/Ember.Handlebars.helpers.html#method_yield)

相反，如果您想要以内容为单位的收益，则没有直接并行的 AFAIK。不确定 content-for 模式在把手模板的上下文中是否真的有意义，因为 content_for 是关于从模板内进行分配。在 ember 中，在应用程序模板中设置类似 {{title}} 的首选方法是将其绑定到应用程序控制器的属性。

# java - 如何在Struts 2中转换其元素的类类型不清楚的List

> ID：16040931
> 
> 赞同：0
> 
> 时间：2013-04-16T15:24:00.247
> 
> 标签：java, jakarta-ee, struts2, converter

有谁知道如何在不使用任何自定义转换器的情况下在 Struts 2 中处理这种情况。

我的模型定义

1.`Booking`

```
public class Booking extends BaseModel{
    private String bookingNo;
    .....
    private List<Part>parts = new ArrayList<Part>();
    private List <? extends ToDoItem>toDoItems = new ArrayList< ToDoItem>();
    ....
} 
```

2.`ToDoItem`

```
public class ToDoItem extends BaseModel{
    private Integer sequence;
    private String bookingNo;
    private String serviceCode;... 
```

3.从 ToDoItem 继承的指定 todoitem 例如 PDAS

```
 public class PDAS extends ToDoItem{
      private Date estPickupTime;
      private Date actPickupTime;
      private Date estArriAtWarehouseTime;
      private Date actArriAtWarehouseTime;... 
```

调查员：

```
public class INSP extends ToDoItem{
    private String confirmOk;
    private Date actInspTime;
    private List<BookingItem>bookingItems;..... 
```

...（更详细的 ToDoItem）

然后在html页面中，表单定义如下：

PDAS todoitem html

```
<table class="form-table">

  <tr class="row">

    <td class="td-label" colspan="2">

      <s:label key="INSP" cssStyle="color:blue;"/>

    </td>

    <td class="td-label">

      <s:label key="ToDoItem.status"/>

    </td>

    <td class="td-field">

      <s:property value="booking.toDoItems[1].status"></s:property>

    </td>

    <td class="td-field" colspan="2">

      <s:select list="{'PENDING','COMPLETED','EXCEPTION','CANCELLED'}" labelposition="top"/>

    </td>

  </tr> 
```

INSP todoitem html

```
 <tr>
    <td class="td-label">

      <s:label key="ToDoItem.assignedBy"/>

    </td>

    <td class="td-field">

      <s:textfield name="booking.toDoItems[1].assignedBy" cssStyle="width:88%;" value="%{#session.user.userName}"
                   readonly="true" cssClass="readonly"></s:textfield>

    </td>

    <td class="td-label">

      <s:label key="ToDoItem.assignedTo"/>

    </td>

    <td class="td-field">

      <s:textfield name="booking.toDoItems[1].assignedTo" cssStyle="width:88%;" value="%{#session.user.userName}"
                   readonly="true" cssClass="readonly"></s:textfield>

    </td> 
```

我知道我在这里粘贴的代码有点大，但请耐心等待，我的问题是当我输入 todoitem 的字段时，例如 PDAS，INSP 的字段，然后提交表单，保存操作中的 todoitem 为空，例如当我循环待办事项并在保存操作中打印它，它得到以下日志：

```
22:23:04,923  INFO BookingAction:100 - Start save booking with 
booking:com.chailie.booking.model.booking.Booking@726dad0
22:23:04,925 DEBUG BookingAction:104 - The todoitem is [null]
22:23:04,926 DEBUG BookingAction:104 - The todoitem is [null]
22:23:04,927 DEBUG BookingAction:104 - The todoitem is [null]
22:23:04,928 DEBUG BookingAction:104 - The todoitem is [null] 
```

我知道这是因为 Action convert 指定的 todoitem 失败了，但是有人可以告诉我如何解决吗？我知道也许我可以编写一个自定义转换器来转换 List todoitem，但我不喜欢自定义转换器，然后是还有其他方法可以让 struts 帮助我转换这些指定的 ToDoItems 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T14:12:45.470

我的问题已经解决了，我刚刚定义了一个拦截器来用 PDAS、INSP 等实例化 List toDoItems，然后将其设置为 valuestack。因为我已经实例化了 toDoItem，struts 只会直接使用这个现有的 toDoItems，不会再创建它，然后问题就解决了

# opengl-es - OpenGLES：如何找到纹理大小

> ID：16040933
> 
> 赞同：3
> 
> 时间：2013-04-16T15:24:09.107
> 
> 标签：opengl-es

我正在玩一些旧的 OpenGL 代码，但我遇到了一些问题......

```
glGetTexParameterfv(GL_TEXTURE_2D, 0, GL_TEXTURE_WIDTH, &glW);
glGetTexParameterfv(GL_TEXTURE_2D, 0, GL_TEXTURE_HEIGHT, &glH); 
```

现在我是 OpenGL 的新手，但我猜这会抓住纹理的高度和宽度。问题是，OpenGLES 没有 GL_TEXTURE_WIDTH 或 HEIGHT。现在我知道每个人都会给出的第一个答案是“你需要自己管理这个”，但是，这是一个相当大的代码库，需要一些认真的时间来解决这个问题。

我的问题是...

如何在 OpenGLES 中获取纹理的宽度/高度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T16:24:19.173

明显的反应问题：你为什么需要这些信息？

抛开明显的问题不谈，纹理大小并没有直接暴露。您可能会做的最好的事情是使用`glTexSubImage`检查`GL_INVALID_VALUE`来搜索大小 - 我对[GLES 手册页](http://www.khronos.org/opengles/sdk/docs/man/xhtml/glTexSubImage2D.xml)的阅读是 width = height = 0 不是错误条件，因此您可以寻找最大的(x,y) 在没有实际上传任何数据的情况下被接受。

# javascript - For循环javascript没有分配正确的值

> ID：16040935
> 
> 赞同：0
> 
> 时间：2013-04-16T15:24:10.690
> 
> 标签：javascript

我正在创建一个循环，该循环查找类中包含字符“L”的所有元素，并对每个元素执行一个 innerHTML 命令。在我实际执行 i.innerHTML = '' 之前，此循环似乎工作正常，其中 i 是 L 字符串的数组。为什么我不能这样做？如果我做一个 console.log(i); 在 if 语句中，我得到了正确的数组。

```
letts = document.getElementsByClassName('span2');
for(i in letts){
        if(i.indexOf('L') !== -1){
                i.innerHTML = '';
        }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T15:25:57.853

你做错了。

`i`in`for .. in`循环是指对象属性名称。最好使用如下所述的`NodeList`简单循环来迭代集合（作为数组） 。`for`

```
var letts = document.getElementsByClassName("span2");
for (var i = 0, len = letts.length; i < len; i++) {
    if (letts[i].innerHTML.indexOf("L") > -1) {
        letts[i].innerHTML = "";
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T15:29:01.433

您的`i`in for--in 循环指的是`index`（基于 0）。你应该使用

```
for(i in letts){
        if(letts[i].indexOf('L') !== -1){
   ... 
```

或者

```
for (var i = 0, i < letts.length; i++) {
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T15:32:25.480

在`foreach`这种情况下，循环很方便。

数组有一个`forEach`方法，但`NodeList`s 没有，出于某种原因。您可以使用以下之一：

*   [`.forEach`](http://underscorejs.org/#each)underscore.js 的功能
*   [`.each`](http://api.jquery.com/each/)JQuery（或几乎任何框架）的功能
*   或`[].forEach.call()` [诀窍](http://joris.kluivers.nl/blog/2012/08/27/vanilla-js/)。

# python - 属性学说

> ID：16040937
> 
> 赞同：3
> 
> 时间：2013-04-16T15:24:13.657
> 
> 标签：python, python-2.7

如何访问属性的文档字符串而不是它所持有的值？

为什么下面代码中的 2 个帮助函数会返回不同的文档字符串`abc.x`？

```
class C(object):
    def __init__(self):
        self._x = None

    def getx(self):
        print "** In get **"
        return self._x

    x = property(getx, doc="I'm the 'x' property.")

abc = C()
help(abc) # prints the docstring specified for property 'x'
help(abc.x) # prints the docstring for "None", the value of the property 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T15:28:00.990

发生这种情况是因为`abc.x`已解决`None`。然后`None`正在传递给`help()`。尝试这个：

```
help(C.x) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T15:35:58.303

当您评估时`abc.x`，您调用访问方法。要获取属性本身，您可以将其称为`C.x`. 然后，您可以使用`help(C.x)`. 如果您只有一个类实例，则可以通过其类访问该属性：

```
>>> help(abc.__class__.x)
Help on property:

    I'm the 'x' property. 
```

# ios - 使用 Instruments 的自动化测试 UI - iOS

> ID：16040940
> 
> 赞同：1
> 
> 时间：2013-04-16T15:24:20.623
> 
> 标签：ios, instruments, uicollectionview, ios-ui-automation

我有一个 iPad 应用程序，我正在为它编写自动化测试。我点击 mainButton 并打开一个视图控制器。此视图控制器中有 UICollectionView 和两个单元格。每个单元格都有一个按钮和一个标签。我需要点击单元格内的这些按钮。

我已经编写了代码，直到点击主按钮并且它正在工作。我无法检索集合视图。这是我的代码。

```
....
mainButton.tap(); //This is successful.
var collectionViews = mainButton.collectionViews()["Abc"];'
app.delay(1);
collectionViews.logElementTree();   //This displays UIAElementNil

var collectionCells = collectionViews.cells();
collectionCells.logElementTree(); 
```

Abc 是我为故事板中的集合视图提供的 restoreId 名称。

我认为即使在加载视图控制器之前，我也在尝试访问其中的 collectionView，因此它正在返回 UIElementNil。关于如何等到视图控制器加载的任何想法？我无法将 Tuneup.js 导入我的项目。

对此的任何输入都会有很大帮助。

# javascript - 从一个 Div 到另一个 Div 的“移动到下一个房间”效果

> ID：16040941
> 
> 赞同：1
> 
> 时间：2013-04-16T15:24:23.893
> 
> 标签：javascript, jquery, html, css

我有一个居中的大 div，里面有一个图像，在那个图像中是右边的一个门口。我想要这样当你点击门口时，它会“缩放”到下一个图像，这将是下一个房间。

描述它的最佳方式类似于您在 Google 地图上沿路行驶时的街景。

有人可以帮忙吗？最好是 jQuery，但我对任何事情都持开放态度。尝试了一些类似缩放的插件，但没有影响。

理想的解决方案是转到另一个 Div，这样我就可以控制下一个“房间”中的内容（每个“房间”中都有交互式对象）。

希望这是有道理的？

我正在研究的示例：[http ://www.ether-game.com/new](http://www.ether-game.com/new)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T16:05:28.547

你在找这个吗？

[http://jsfiddle.net/F9vhD/](http://jsfiddle.net/F9vhD/)

您只需要将一个 div 移动到其自身宽度的左侧 -100%，而另一个相同。

**HTML：**

```
<div class="room" id="room1">
Room 1
<input type="button" id="nextRoom" value="go to next room" />
</div>
<div class="room" id="room2">
 s
</div> 
```

**CSS：**

```
html,body {
    width:100%;
    height:100%;
    overflow:hidden
}

body {
    margin:0;
    padding:0;
    color:#fff
}

.room {
    height:100%;
    width:100%;
    position:absolute;
    top:0;
    left:0
}

#room1 {
    background:red;
}

#room2 {
    background: blue;
    left:100%
} 
```

**JS：**

```
$(document).ready(function() {

    $('#nextRoom').on('click', function() {
            $('#room1').animate({left:'-100%'}); 
        $('#room2').animate({left:'0%'});
    });

}); 
```

# couchdb - CouchDB 有可能我可以将 database_dir 设置为网络位置

> ID：16040943
> 
> 赞同：0
> 
> 时间：2013-04-16T15:24:28.230
> 
> 标签：couchdb

我是 couchdb 的新手，我一直在我的本地磁盘上测试和使用它。我计划转向更大的数据（200,300 GB）。但是，我的本地磁盘上没有那么多空间，但我的公司有一个 NAS (Isilon)，它有几个 TB 的空间我可以使用。不知道CouchDB能不能把所有数据都保存在网盘上（比如通过UNC路径）。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T22:33:44.937

您可以安装一个网络位置并使用它。但是，您要小心您想要的：您添加了另一个潜在的断点和网络延迟。数据库和 couchdb 也不例外，本质上是 I/O 密集型的，因此您可能无法获得所需的性能。CouchDB 可以在许多平台上运行（我们只是让它在 Rasberry PI 上运行），因此您实际上可以直接在 NAS 上运行它。如果[IsilionOS](http://www.emc.com/storage/isilon/isilon-onefs-operating-system.htm)是基于 Linux 的，它可以工作。

# css - 在 OSX 上的 Chrome 中调试 Sass

> ID：16040944
> 
> 赞同：5
> 
> 时间：2013-04-16T15:24:28.510
> 
> 标签：css, macos, google-chrome, sass, google-chrome-devtools

我在 OSX 上，我希望能够使用[新的源映射功能在 Chrome（或 Canary）开发人员工具中调试 Sass 生成的 CSS](http://snugug.com/musings/debugging-sass-source-maps)在 Chrome（或 Canary）开发人员工具中调试 Sass 生成的 CSS 。我正在使用 Sass 和 Compass。

我已按照[说明](http://benfrain.com/add-sass-compass-debug-info-for-chrome-web-developer-tools/)让 Sass 生成源映射文件。为了其他为此苦苦挣扎的人的利益，这些步骤是：

*   安装 Sass 的预发布版本`sudo gem install sass --pre`
*   检查您的 Compass 版本 - 您需要 12.2，而不是 13 alpha。如果您需要卸载它，您可以使用`sudo gem uninstall compass --version 0.13.alpha.2`.
*   将此添加到您的 config.rb 文件`sass_options = {:sourcemap => true}`中。
*   转到包含 config.rb 的文件夹并运行`sass --compass --sourcemap --watch scss:css`（这告诉 Sass 将 scss 文件夹中的文件编译为 css 文件夹中的 CSS 文件）。

如果一切正常，当您对我们的一个 scss 文件（例如 styles.scss）进行更改时，Sass 将编译一个新的 CSS 文件 - 同时它会创建一个名为 styles.css.map 的文件，其中包含当您在开发者工具中选择一个元素时，应该允许 Chrome 将您指向源 SCSS 文件的映射信息。

我已经成功地让我的 Sass 生成了这个文件。但不幸的是，Chrome 拒绝对它做任何事情。我已经完成了似乎推荐的步骤：

*   安装 Chrome 金丝雀
*   转到 chrome://flags 并启用“启用开发人员工具实验”设置
*   打开 Web Developer Tools (Function-12)，点击窗口右下角的齿轮，在 General 选项卡上勾选“Enable source maps”，在 Experiments 选项卡上勾选“Support for Sass”。
*   重启金丝雀

但是当我在开发者工具中检查一个元素时，我只是得到了对糟糕的 CSS 文件的相同的旧引用。我想查看元素样式在 SCSS 文件中的来源。有没有人在 Chrome OSX 甚至 FireSass 上遇到过这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-02T14:05:44.200

对于那些对当前预发布版本的 SASS 和指南针有问题的人：您并不孤单，有一个解决方法！

当前的预发布版本与指南针*不兼容。*您需要能够在没有错误的情况下运行命令“compass”，并且在安装 alpha 版本 162 时，您会收到 LoadError。

相反，使用以下命令安装版本 141：

```
gem install sass -v 3.3.0.alpha.141 --pre 
```

注意：您需要当前稳定版本的 compass，而不是预发布版本。compass 的预发布版本似乎不适用于 build 162*或*141。此外，您应该在 sass 的预发布版本之前安装 compass，因为 compass 也会安装当前发布的 sass 版本。

希望有帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T11:24:24.253

源映射确实可以在 OSX Chrome 中使用！我的开发环境中有几个样式表，我愚蠢地检查了属于还没有 .css.map 文件的样式表的样式。如果您按照上述步骤操作，这应该适合您，甚至可能使用当前版本的 Chrome。

# regex - 解析mbuffer的时间和速度输出的简单方法？

> ID：16040945
> 
> 赞同：0
> 
> 时间：2013-04-16T15:24:31.040
> 
> 标签：regex, perl, parsing

我必须`mbuffer`把它的输出放到一个文件中。每个文件一行，其中 3 个示例可能是

```
summary:  0.0 KiByte in  0.3 sec - average of  0.0 B/s
summary:  0.0 KiByte in  12 h 24 min - average of  12.0 KiB/s
summary:  0.0 KiByte in  12 min - average of  12.0 MiB/s 
```

我想以秒为单位提取时间，以 MB/s 为单位提取速度。

**问题**

是否有捷径可寻？因为我只能想到会给出很长的正则表达式的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T15:34:40.223

`/summary:.*?in\s*(?:(?<hours>[\d\.]+) h)?\s*(?:(?<minutes>[\d\.]+) min)?\s*(?:(?<seconds>[\d\.]+) sec)?.*?average of\s*(?<speed>[\d\.]+ [a-zA-Z]+\/s)/g`

..将创建 4 个命名捕获组：

*   `seconds`（包含秒，例如。`0.3`）
*   `minutes`（包含分钟，例如。`24`）
*   `hours`（包含小时，例如。`12`）
*   `speed`（附加 B/KiB/MiB 的平均速度，例如。`12.0 KiB/s`）

[**演示**](http://regex101.com/r/jH9qO9)

**输出**：

![在此处输入图像描述](https://i.stack.imgur.com/ity0i.png)

# c++ - Win32 DLL导出函数参数最佳实践

> ID：16040947
> 
> 赞同：1
> 
> 时间：2013-04-16T15:24:33.550
> 
> 标签：c++, winapi, dllexport

我正在编写一个将导出函数和类的 dll。但现在我有一个关于导出函数的问题。

如果我的函数签名如下所示：

```
__declspec(dllexport) int fn1(FILE *theFile); 
```

我应该包括它以定义文件吗？这里的最佳做法是什么？如果我想导出一个接受或返回自定义类型的函数，这些类型的头文件是否也应该包含在导出的头文件中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T16:07:28.967

不要前向 decl 标准库类型和函数。这就是提供库头文件的目的。您的文件应布局为：

```
#ifndef MYLIBRARY_H
#define MYLIBRARY_H

#ifdef  MYLIBRARY_EXPORTS
#define MYLIBRARY_EXPORT    __declspec(dllexport)
#else
#define MYLIBRARY_EXPORT    __declspec(dllimport)
#endif

// required headers
#include <stdio.h>

// exported/imported functions
MYLIBRARY_EXPORT int fn1(FILE *theFile);

#endif 
```

您的 DLL 项目是使用`MYLIBRARY_EXPORTS`定义为部分或定义的预处理器宏（可配置任意数量的方式）构建的，并且您的 DLL 的使用者**不**定义它。

这是 MS 用于其向导罐头 DLL 项目生成器的常见布局。考虑在您的项目中也这样做。最重要的是，为您的库包含所需的标准头文件，以正确定义它需要输入的内容以及输出的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T16:03:47.330

头文件通常应该是自包含的。使用您的头文件的客户端在包含您自己的头文件之前不必知道他们需要一些`#include "xyz.h"`行。（想象一下，如果另一个`xyz.h`头文件做同样的事情，等等。你需要知道所有头文件的严格顺序，这将是一场噩梦。）

但是，您不一定需要为`#include`您使用的某些类型添加标题。例如，您也许可以改用前向声明。

# sql - DB2 更新 - 删除空格后的所有字符

> ID：16040948
> 
> 赞同：0
> 
> 时间：2013-04-16T15:24:34.357
> 
> 标签：sql, db2, whitespace, removing-whitespace

```
Select Substr(<<COLUMN NAME>>, 1,(PosStr(<<COLUMNNAME>>, ' ') -1)) 
From <<TABLE NAME>>; 
```

此处的此语句有助于删除空格及其后面的所有字符-这很好，这就是我要寻找的...但它是一个选择语句，并且仅返回一个列表。

有人可以将其更改为 UPDATE 语句吗？(DB2)

* * *

更多信息......例如，如果我有，

```
NAME

teddy longmore

theadore rosavelt

some body 
```

我想删除第一个空白之后的所有字符

如何使用 SQL 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T17:10:55.593

你几乎已经在那里了，只需将你已经拥有的命令添加到`UPDATE`：

```
UPDATE your_table
   SET name = SUBSTR(name, 1,(POSSTR(name, ' ') -1)); 
```

示范：

```
DECLARE GLOBAL TEMPORARY TABLE SESSION.TEXT_TEST (
    NAME VARCHAR(50)
) ON COMMIT PRESERVE ROWS;

INSERT INTO SESSION.TEXT_TEST (
    SELECT 'teddy longmore' FROM SYSIBM.SYSDUMMY1 UNION ALL 
    SELECT 'theadore rosavelt' FROM SYSIBM.SYSDUMMY1 UNION ALL 
    SELECT 'some body' FROM SYSIBM.SYSDUMMY1
);

SELECT name
FROM SESSION.TEXT_TEST;

UPDATE SESSION.TEXT_TEST
   SET NAME = SUBSTR(name, 1,(POSSTR(name, ' ') -1));

SELECT name
FROM SESSION.TEXT_TEST; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T18:41:17.237

语法是

```
UPDATE mytable
    SET col = expression
    WHERE conditional-expression 
```

# javascript - 从事件发射器回调中返回一个值

> ID：16040953
> 
> 赞同：3
> 
> 时间：2013-04-16T15:24:45.610
> 
> 标签：javascript, node-postgres

我在节点中使用 postgresql 模块'pg'。当从数据库返回一行时，我想做一些处理，但我不知道如何将值返回给调用函数。

```
var caller = function(){
    var query = client.query(qString);
    query.on('row', function(row){
        if (row.foo == bar) {
            return true;
        } else {
            return false;
        }
    }
}; 
```

当我打电话时：

```
var boo = caller(); 
```

我希望 boo 等于回调的返回布尔值。

我试图声明一个未初始化的变量，然后分配返回的布尔值，

```
var caller = function(){
    var fido;
    var query = client.query(qString);
    query.on('row', function(row){
        if (row.foo == bar) {
            fido = true;
        } else {
            fido =  false;
        }
    }
    return fido;
}; 
```

但该函数不会等到 'pg' 返回一行。这会导致返回的变量返回未定义。我想我需要同步调用其中的一部分，以便在函数返回变量之前分配变量，但我不确定如何为普通函数执行此操作。

编辑：

伪代码就够了。我是 Node 新手，并试图在提问方面做得更好。这是我所在的一个类的应用程序。我用 web.py 用 python 编写了大部分内容，并且由于与 angular.js 框架冲突并在 node.js 中重新编写，我没有太多经验和。我遇到问题的部分是身份验证用户。这是被调用的模块。

```
var postAuth = function(params, callback){
    var user = params['username'];
    var pass = params['password'];
    var result;
    util['dispatch']['auth'](user, function(blah){
        if (pass == blah) {
            result = true;
        } else {
            result = false;
        }
    });
    console.log(result);
    return callback(200, "OK", {}, result);
} 
```

以及从数据库获取用户名密码的函数：

```
var auth = function(user, callback) {
    client.connect();
    var qString = "SELECT password FROM users WHERE username='" + user + "'";
    var query = client.query(qString);
    query.on('row', function(row) {
            callback(row.password);
    }); 
}; 
```

我知道这是一种不安全的身份验证方式。我想知道是否有更好的方法来做到这一点。我试图根据密码是否匹配返回一个布尔值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T17:04:05.817

你不能使异步函数同步（这也意味着从异步函数返回值——通常——没有效果）。

处理异步函数结果的常见解决方案是传递一个回调函数，该函数在结果可用时被调用：

```
var caller = function(callback) {
  var query = client.query(qString);
  query.on('row', function(row){
    callback(row.foo == bar);
  }
};

// and to call it:
caller(function(result) {
  console.log('I received a result:', result);
}); 
```

回调函数将一次被调用一行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-28T19:53:03.017

[我在这篇博文https://glebbahmutov.com/blog/promisify-event-emitter/](https://glebbahmutov.com/blog/promisify-event-emitter/)中展示了如何从事件发射器返回承诺

# javascript - 带有引导程序和 jquery 的动态链接上的单击事件

> ID：16040954
> 
> 赞同：0
> 
> 时间：2013-04-16T15:24:46.237
> 
> 标签：javascript, jquery, twitter-bootstrap

`myLink`对于必须显示[popover](http://twitter.github.io/bootstrap/javascript.html#popovers)的链接，我有一些 javascript 代码（jquery 和 bootstrap）。在该弹出窗口中，我格式化了一些要显示的 html 代码，并在该 html 中添加了一个按钮链接`myButtonLink`。

因此，当用户单击 时`myLink`，它会显示弹出框。

当用户点击`myButtonLink`弹出框内部时，我想执行目标`window.open(url, 'pages', opts);`在哪里，并包含一些信息来显示窗口。`url``myButtonLink``opts`

用户第一次点击时`myLink`，一切正常：弹出窗口显示并`myButtonLink`调用 javascript 代码：

```
$('.myLink').click(function (e) {
    e.preventDefault();
    window.open(this.href, 'pages', opts);
    return false;
}); 
```

但是第二次，用户做同样的事情但上面的javascript代码没有执行。我猜该事件不再被触发，但为什么呢？

这是在 上使用`onclick`属性的情况`<a />`吗？

***注意：这个问题很复杂，没有例子，我的例子太难理解了......所以如果你需要更多细节，请告诉我。***

# iphone - 在容器视图中翻转子视图

> ID：16040957
> 
> 赞同：0
> 
> 时间：2013-04-16T15:24:56.543
> 
> 标签：iphone, ios, objective-c

我在我的 iOS 应用程序中翻转两个子视图时遇到了困难。它的设置方式是我在我的界面文件中创建了一个视图。当视图加载时，视图 1 应该出现在该视图中（通过使用 实现`addSubview`）。当在 View1 上按下按钮时，它应该翻转以显示 view2。

根据 StackOverflow 中的各种问题，我实现了以下代码：

```
-(void)LetUsFlip
{
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:1.0];
    [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromRight forView:_containerView cache:YES];

    if ([self.view1 superview])
   {
        NSLog(@"Show View 2");
        [view1 removeFromSuperview];
        [_containerView addSubview:view2];
        [_containerView sendSubviewToBack:view1];
   }
   else
   {
        NSLog(@"Show View 1");
        [view2 removeFromSuperview];
        [_containerView addSubview:view1];
        [_containerView sendSubviewToBack:view2];
   }

   [UIView commitAnimations];
} 
```

当我运行此代码时，第一个翻转动画效果很好，即按下按钮时显示视图 2。但是当我再次按下视图 2 中的按钮时，动画发生并且视图 1**没有**显示 - 给出一个空白屏幕。View1 和 View2 上的按钮都分别调用了上述方法。NSLog 也完全按照它应该的方式工作，但在动画方面存在问题。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T15:35:43.720

是`view1`不是`nil`在第二次过渡期间？它存储在一个弱属性中，这意味着当您从其父视图中删除它时，它可能会被释放。尝试将属性声明更改为`strong`，看看是否有帮助。

# asp.net - GridView 页脚不显示数据

> ID：16040961
> 
> 赞同：0
> 
> 时间：2013-04-16T15:25:09.780
> 
> 标签：asp.net, vb.net, gridview, sql-server-2012

我将 ASP.NET (VB.NET) 与 SQL-Server-2012 一起使用。

我正在使用 GridView 在名为`project_items`.

我添加了一个 FooterTemplate 以便我可以显示一列中所有记录的总量。

这就是我所做的：

```
<asp:GridView ID="grdItems" runat="server" AutoGenerateColumns="False" CellPadding="4"  Font-Names="Tahoma" ForeColor="#333333" GridLines="None" ShowFooter="True">
                            <AlternatingRowStyle BackColor="White" ForeColor="#284775" />
                            <Columns>
                                <asp:BoundField DataField="item_name" HeaderText="Item" SortExpression="item_name" />
                                <asp:BoundField DataField="item_cost" HeaderText="Cost (inc. VAT)" SortExpression="item_cost" />
                                <asp:BoundField DataField="item_quantity" HeaderText="Quantity" SortExpression="item_quantity" />
                                <asp:TemplateField HeaderText="Sub-Total (inc. VAT)">
                                    <ItemTemplate>
                                        <asp:Label ID="TextBox3" runat="server"
                                        Text='<%# Convert.ToInt32(Eval("item_quantity")) * Convert.ToDouble(Eval("item_cost"))%>'></asp:Label>
                                </ItemTemplate>
                                    <FooterTemplate>
                                        <asp:Label ID="lblTotalPrice" runat="server" />
                                     </FooterTemplate>  
                                    <FooterTemplate>
                                        <asp:Label ID="lblPrice" runat="server" />
                                     </FooterTemplate>  
                                </asp:TemplateField>

                            </Columns>
                            <EditRowStyle BackColor="#999999" />
                            <FooterStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
                            <HeaderStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" HorizontalAlign="Center" VerticalAlign="Middle" />
                            <PagerStyle BackColor="#284775" ForeColor="White" HorizontalAlign="Center" />
                            <RowStyle BackColor="#F7F6F3" ForeColor="#333333" HorizontalAlign="Center" VerticalAlign="Middle" />
                            <SelectedRowStyle BackColor="#E2DED6" Font-Bold="True" ForeColor="#333333" />
                            <SortedAscendingCellStyle BackColor="#E9E7E2" />
                            <SortedAscendingHeaderStyle BackColor="#506C8C" />
                            <SortedDescendingCellStyle BackColor="#FFFDF8" />
                            <SortedDescendingHeaderStyle BackColor="#6F8DAE" />
                        </asp:GridView>

                            <asp:SqlDataSource ID="SqlDataSource3" runat="server" ConnectionString="<%$ ConnectionStrings:ConnStringDb1 %>" SelectCommand="SELECT 
      items.item_name, items.item_cost, project_items.item_quantity
    FROM items
    INNER JOIN project_items ON items.item_id = project_items.item_id
    WHERE project_items.project_id = @parameter">
                                <SelectParameters>
                                    <asp:SessionParameter Name="parameter" SessionField="ProjectID" />
                                </SelectParameters>
                            </asp:SqlDataSource> 
```

VB.NET 代码：

```
Imports System.Data.SqlClient
Imports System.Data

Partial Class ProjectReport
    Inherits System.Web.UI.Page

    Private myTotal As Decimal = 0

    Protected Sub Page_Load(sender As Object, e As EventArgs) Handles Me.Load

        Dim ProjectID = Session("project_id")
        Session("ProjectID") = ProjectID

        If Not Page.IsPostBack Then
            BindData()
        End If

    End Sub

    Private Sub BindData()

        Dim conn As New SqlConnection("Data Source=BRIAN-PC\SQLEXPRESS;Initial Catalog=master_db;Integrated Security=True")
        Dim query As New SqlCommand("SELECT Items.item_name, Items.item_cost, project_items.item_quantity FROM Items INNER JOIN project_items ON items.item_id = project_items.item_id WHERE project_items.project_id = @parameter", conn)

        query.Parameters.AddWithValue("@parameter", Convert.ToInt32(Session("ProjectID")))

        Dim da As New SqlDataAdapter(query)

        da.SelectCommand = query

        Dim table As New DataTable()

        da.Fill(table)

        grdItems.DataSource = table
        grdItems.DataBind()
    End Sub

    Protected Sub grdItems_RowDataBound(sender As Object, e As GridViewRowEventArgs)

        If e.Row.RowType = DataControlRowType.DataRow Then
            Dim lblPrice As Label = DirectCast(e.Row.FindControl("lblPrice"), Label)

            Dim price As Double = CDec(lblPrice.Text)
            myTotal += price

        End If

        If e.Row.RowType = DataControlRowType.Footer Then
            Dim lblTotalPrice As Label = DirectCast(e.Row.FindControl("lblTotalPrice"), Label)
            lblTotalPrice.Text = myTotal.ToString()

        End If
    End Sub

End Class 
```

![在此处输入图像描述](https://i.stack.imgur.com/1jl3q.png)

问题是页脚没有显示总金额（或任何值）。

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T15:35:08.460

您的行数据绑定不太正确。

每行都会触发 RowDataBound。因此，当您检查 DataRow 时，您从 Total 开始。每次调用都会重置。因此，当您最终到达页脚行时，总计仍为 0。

相反，请执行以下操作：

在页面加载之外声明一个私人小数：

```
Private myTotal As Decimal = 0 
```

然后在您的数据绑定中添加您的总数并将其存储在`total`

然后在页脚中使用它。就像是

```
Protected Sub grdItems_RowDataBound(sender As Object, e As GridViewRowEventArgs)

    If e.Row.RowType = DataControlRowType.DataRow Then
         Dim rowView As DataRowView = CType(e.Row.DataItem, DataRowView)
         myTotal += (CDec(rowView("item_cost")) * CDec(rowView("item_quantity")))

    End If

    If e.Row.RowType = DataControlRowType.Footer Then
        Dim lblTotalPrice As Label = DirectCast(e.Row.FindControl("lblTotalPrice"), Label)
        lblTotalPrice.Text = myTotal.ToString()

    End If
End Sub 
```

**更新**

您`lblPrice`的网格视图中没有。因此，如果您在 myTotal += 价格处设置断点，则您将 0 添加到 0。

请参阅上面的代码以了解获取价格的不同方式。

# css - Orchard - 将站点从 iis 6 迁移到 iis 7.5 并且 CSS/images/etc 不会加载

> ID：16040962
> 
> 赞同：1
> 
> 时间：2013-04-16T15:25:12.873
> 
> 标签：css, orchardcms

我们使用 iis 7.5 将我们的网站从 windows server 2003 迁移到 server 2008 r2。只需简单地将网站文件夹复制到新服务器，将应用程序池设置为 4.0 集成并使用域帐户运行应用程序池，我就可以启动该站点。

话虽如此，似乎没有图像或 CSS 起作用。根据谷歌开发者工具，它似乎无法找到它。

我在网上搜索过，真的找不到像这样的东西。如果有人有我需要寻找的任何细节，那就太好了。我会附上我的网络配置。

```
<?xml version="1.0"?>
<configuration>
    <configSections>
        <sectionGroup name="system.web.webPages.razor"
        type="System.Web.WebPages.Razor.Configuration.RazorWebSectionGroup, System.Web.WebPages.Razor, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
            <remove name="host"/>
            <remove name="pages"/>
            <section name="host" type="System.Web.WebPages.Razor.Configuration.HostSection, System.Web.WebPages.Razor, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false"/>
            <section name="pages" type="System.Web.WebPages.Razor.Configuration.RazorPagesSection, System.Web.WebPages.Razor, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false"/>
        </sectionGroup>
    </configSections>
    <appSettings>
        <add key="webpages:Enabled" value="false"/>
    </appSettings>
    <system.web.webPages.razor>
        <host factoryType="System.Web.Mvc.MvcWebRazorHostFactory, System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
        <pages pageBaseType="Orchard.Mvc.ViewEngines.Razor.WebViewPage">
            <namespaces>
                <add namespace="System.Web.Mvc"/>
                <add namespace="System.Web.Mvc.Ajax"/>
                <add namespace="System.Web.Mvc.Html"/>
                <add namespace="System.Web.Routing"/>
                <add namespace="System.Web.WebPages"/>
                <add namespace="System.Linq"/>
                <add namespace="System.Collections.Generic"/>
                <add namespace="Orchard.Mvc.Html"/>
            </namespaces>
        </pages>
    </system.web.webPages.razor>
    <system.web>
        <httpHandlers>
            <!-- iis6 - for any request in this location, return via managed static file handler -->
            <add path="*/Theme.png" verb="*" type="System.Web.StaticFileHandler"/>
            <add path="*/ThemeZonePreview.png" verb="*" type="System.Web.StaticFileHandler"/>
        </httpHandlers>
        <!--
        Enabling request validation in view pages would cause validation to occur
        after the input has already been processed by the controller. By default
        MVC performs request validation before a controller processes the input.
        To change this behavior apply the ValidateInputAttribute to a
        controller or action.
    -->
        <pages validateRequest="false" pageParserFilterType="System.Web.Mvc.ViewTypeParserFilter, System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL" pageBaseType="System.Web.Mvc.ViewPage, System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL" userControlBaseType="System.Web.Mvc.ViewUserControl, System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL">
            <controls>
                <add assembly="System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL" namespace="System.Web.Mvc" tagPrefix="mvc"/>
            </controls>
        </pages>
        <compilation targetFramework="4.0" debug="true">
            <assemblies>
                <add assembly="System.Web.Abstractions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
                <add assembly="System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
                <add assembly="System.Data.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
                <add assembly="System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
                <add assembly="System.Web.WebPages, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
            </assemblies>
        </compilation>
    </system.web>
    <system.webServer>
        <validation validateIntegratedModeConfiguration="false"/>
        <handlers accessPolicy="Script,Read">
            <!--
        iis7 - for any request to a file exists on disk, return it via native http module.
        accessPolicy 'Script' is to allow for a managed 404 page.
        -->
            <add name="ThemePreviewImage" path="*/Theme.png" verb="*" modules="StaticFileModule" preCondition="integratedMode" resourceType="File" requireAccess="Read"/>
            <add name="ThemeZonePreviewImage" path="*/ThemeZonePreview.png" verb="*" modules="StaticFileModule" preCondition="integratedMode" resourceType="File" requireAccess="Read"/>
        </handlers>
    </system.webServer>
    <runtime>
        <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
            <dependentAssembly>
                <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35"/>
                <bindingRedirect oldVersion="2.0.0.0" newVersion="3.0.0.0"/>
            </dependentAssembly>
        </assemblyBinding>
    </runtime>
</configuration> 
```

# java - 如何根据屏幕大小启动活动？

> ID：16040963
> 
> 赞同：0
> 
> 时间：2013-04-16T15:25:14.887
> 
> 标签：java, android, sqlite

因此，如果我的屏幕尺寸是 mdpi 或 hdpi，我会检查我的 main_activity 类，并且取决于我需要在我的游戏活动中启动适当的方法。我的数据库中有两个表，其中包含 mdpi 和 hdpi 图像。但我什么也得不到。只有我空白的主要活动。有什么问题？这是我的主要活动：

```
public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

            Display display = getWindowManager().getDefaultDisplay(); 
            int width = display.getWidth();
            int height = display.getHeight();

            if((width>320) && (width<480)){
                Intent i = new Intent(MainActivity.this, GameDanska.class);
                i.putExtra("myMethod", "nextQuestionMDPI");
                startActivity(i);

            }
            else if((width>480) && (width<720)){
                Intent i2 = new Intent(MainActivity.this, GameDanska.class);
                i2.putExtra("myMethod", "nextQuestionHDPI");
                startActivity(i2);
            }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T15:30:13.673

似乎这可以解决问题，您可以使用 Configuration.screenLayout 位掩码。

例子：

```
if ((getResources().getConfiguration().screenLayout & 
    Configuration.SCREENLAYOUT_SIZE_MASK) == 
        Configuration.SCREENLAYOUT_SIZE_LARGE) {
    // on a large screen device ...

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T09:09:58.153

使用开关如下

```
Intent i = new Intent(this, GameDanska.class);

switch (getResources().getDisplayMetrics().densityDpi) {
    case DisplayMetrics.DENSITY_MEDIUM:
        i.putExtra("myMethod", "nextQuestionMDPI");
        startActivity(i);
        break;
    default:
        i.putExtra("myMethod", "nextQuestionHDPI");
        startActivity(i);
        break;
} 
```

如果您的应用程序仅适用于 MDPI、HDPI、XHDPI，请记住将屏幕兼容性放在您的 manifest.xml 文件中。

```
<compatible-screens>
    <screen android:screenSize=["small" | "normal" | "large" | "xlarge"]
            android:screenDensity=["ldpi" | "mdpi" | "hdpi" | "xhdpi"] />
    ...
</compatible-screens> 
```

在你的情况下

```
 <compatible-screens>
    <screen android:screenSize="small" android:screenDensity="mdpi"/>
    <screen android:screenSize="small" android:screenDensity="hdpi"/>
    <screen android:screenSize="small" android:screenDensity="xhdpi"/>

    <screen android:screenSize="normal" android:screenDensity="mdpi"/>
    <screen android:screenSize="normal" android:screenDensity="hdpi"/>
    <screen android:screenSize="normal" android:screenDensity="xhdpi"/>

    <screen android:screenSize="large" android:screenDensity="mdpi"/>
    <screen android:screenSize="large" android:screenDensity="hdpi"/>
    <screen android:screenSize="large" android:screenDensity="xhdpi"/>

    <screen android:screenSize="xlarge" android:screenDensity="mdpi"/>
    <screen android:screenSize="xlarge" android:screenDensity="hdpi"/>
    <screen android:screenSize="xlarge" android:screenDensity="xhdpi"/>
 </compatible-screens> 
```

[API 屏幕参考](http://developer.android.com/guide/topics/manifest/compatible-screens-element.html)

[开关参考](https://stackoverflow.com/questions/5099550/how-to-check-an-android-device-is-hdpi-screen-or-mdpi-screen)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T09:22:46.173

而不是它，您可以直接将图像放入**res->mdpi,hdpi,xhdpi,ldpi**文件夹

`for ldpi 320dp: a typical phone screen (240x320 ldpi, 320x480 mdpi, 480x800 hdpi, etc)`

`for mdpi 480dp: a tweener tablet like the Streak (480x800 mdpi).`

`for hdpi 600dp: a 7” tablet (600x1024 mdpi).`

`for xhdpi 720dp: a 10” tablet (720x1280 mdpi, 800x1280 mdpi, etc).`

# javascript - KnockOut.js 文本绑定客户端更改不更新视图模型

> ID：16040965
> 
> 赞同：0
> 
> 时间：2013-04-16T15:25:22.270
> 
> 标签：javascript, jquery, mvvm, knockout.js

我有两个更改后的下拉菜单会更新标签。标签使用文本绑定绑定到我的 viewModel 中的一个可观察字段。但是，当标签文本发生变化时，提交给服务器的 viewModel 并没有更新。我无法从淘汰赛网站上找到相关信息。我错过了什么吗？

HTML

```
 <select class="string-match-dropdown">
            <option value="*">contains</option>
            <option value="^">starts with</option>
            <option value="$">ends with</option>
            <option value="=">is exactly</option>
            <option value="@@">has value</option>
        </select>
        <select class="date-money-match-dropdown">
            <option value="eq">=</option>
            <option value="noteq"><></option>
            <option value="gt">></option>
            <option value="gteq">>=</option>
            <option value="lt"><</option>
            <option value="lteq">&lt;=</option>
        </select>
        <label class="match-label" data-bind='html: qualifier'></label> 
```

JS

```
$('.date-money-match-dropdown').live('change', function () {
    $(this).parent().find('.match-label').html($(this).find('option:selected').text());
});

$('.string-match-dropdown').live('change', function () {
    $(this).parent().find('.match-label').html($(this).find('option:selected').text());
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T18:59:36.427

对于这种情况，您根本不需要使用 jquery。

因为您的视图模型上已经有一个 observable，所以您`qualifier`只需要在您的 s 上使用[`value`绑定](http://knockoutjs.com/documentation/value-binding.html)`select`，并且 Knockout 将为您进行更改处理：

```
<select class="string-match-dropdown" data-bind='value: qualifier'>
    <option value="*">contains</option>
    <option value="^">starts with</option>
    <option value="$">ends with</option>
    <option value="=">is exactly</option>
    <option value="@@">has value</option>
</select>
<select class="date-money-match-dropdown" data-bind='value: qualifier'>
    <option value="eq">=</option>
    <option value="noteq"><></option>
    <option value="gt">></option>
    <option value="gteq">>=</option>
    <option value="lt"><</option>
    <option value="lteq">&lt;=</option>
</select>
<label class="match-label" data-bind='html: qualifier'></label> 
```

演示[JSFiddle。](http://jsfiddle.net/qXvLp/)

# javascript - 如何在 InDesign 中设置（textFrame）pageItem 以在页面中手动更改后从母版页更新位置/大小？

> ID：16040966
> 
> 赞同：1
> 
> 时间：2013-04-16T15:25:23.623
> 
> 标签：javascript, adobe-indesign

我有一个执行以下操作的脚本：

```
 var document = app.documents.item(0);
    var layer = document.layers.itemByName("Normal");
    var allTextFrames = toArray(layer.textFrames);
    var moved = selectWhere("moved", "label", allTextFrames)[0];
    var notMoved = selectWhere("notMoved", "label", allTextFrames)[0];
    var instance = selectWhere("instance", "label", allTextFrames)[0];
    $.writeln("Moved          : " + moved.geometricBounds.join(", "));
    $.writeln("Moved overr: " + moved.overriddenMasterPageItem.geometricBounds.join(", "));
    $.writeln("notMoved          : " + notMoved.geometricBounds.join(", "));
    $.writeln("notMoved overr: " + notMoved.overriddenMasterPageItem.geometricBounds.join(", "));

    var overr = moved.overriddenMasterPageItem;
    moved.geometricBounds = [moved.overriddenMasterPageItem.geometricBounds[0] 
                                            ,moved.overriddenMasterPageItem.geometricBounds[1]
                                            ,moved.overriddenMasterPageItem.geometricBounds[2]
                                            ,moved.overriddenMasterPageItem.geometricBounds[3]];
    moved.visibleBounds =      [moved.overriddenMasterPageItem.visibleBounds[0] 
                                            ,moved.overriddenMasterPageItem.visibleBounds[1]
                                            ,moved.overriddenMasterPageItem.visibleBounds[2]
                                            ,moved.overriddenMasterPageItem.visibleBounds[3]]; 
```

但是，如果我更改母版页中的文本框架，它不会更新“移动”的文本框架......

例如，pageItem 有一个属性，当设置为“-1”时，它将使用母版页值。我一直在寻找类似的东西，但位置和大小。

fillTint number 只读 PageItem 的填充颜色中使用的色调百分比。（要指定色调百分比，请使用 0 到 100 范围内的数字；要使用继承或覆盖的值，请使用 -1。） src：http: [//jongware.mit.edu/iccs5_html_3.0.3d/iccs5/ pc_PageItem.html](http://jongware.mit.edu/iccs5_html_3.0.3d/iccs5/pc_PageItem.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:59:39.000

**我不会标记为 anwser，因为有时不起作用；**

这是将删除文本框架并恢复的脚本。然后它为它提供旧文本框的数据。它还将文本框链接到上一个和下一个文本框。

如何使用：

*   创建脚本并粘贴以下内容
*   选择移动的文本框并运行脚本。
*   完毕！！！

    ```
    #target "indesign"
    #targetengine "mySessionX"
    var SCRIPT_NAME = "Restore moved text frames";
    try{
    app.doScript(main, ScriptLanguage.JAVASCRIPT, undefined, UndoModes.ENTIRE_SCRIPT, SCRIPT_NAME);
    }catch(e){
        alert(e);
    }

    function main(){
        removeOverrides(app.selection[0]);
    }

    function removeOverrides(textFrame){
        if(textFrame.constructor.name != "TextFrame"){
            throw new Error("No text frame selected");
        }
        // save data
        var contents = textFrame.contents;
        var contentType = textFrame.contentType;
        var nextTextFrame = textFrame.nextTextFrame;
        var previousTextFrame = textFrame.previousTextFrame;
        var masterPageTextFrame = textFrame.overriddenMasterPageItem;
        var page = textFrame.parentPage;
        if(nextTextFrame){
            nextTextFrame.previousTextFrame = null;
        }
        if(previousTextFrame){
            previousTextFrame.nextTextFrame = null;
        }

        // remove overrides
        textFrame.removeOverride();

        // restore state
        var newTextFrame = masterPageTextFrame.override(page);
        newTextFrame.contents = contents;
        newTextFrame.contentType = contentType;

        // update right and left
        if(nextTextFrame){
            nextTextFrame.previousTextFrame = newTextFrame
        }
        if(previousTextFrame){
            previousTextFrame.nextTextFrame = newTextFrame
        }

        newTextFrame.recompose();
        alert("Restored");
    } 
    ```

# mysql - INNER JOIN 同表类和子类

> ID：16040973
> 
> 赞同：1
> 
> 时间：2013-04-16T15:25:44.460
> 
> 标签：mysql, inner-join

我需要在 mysql 表中进行内部连接，但它是同一张表。

我有一个表类别：这个表的一个例子是：

```
id | id_lingua | id_registro | categoria | nivel
1    1           1             Pastas      0
2    2           1             Folders     0
3    3           1             Carpetas    0
4    1           2             Feminina    1
5    2           2             Women       1
6    3           2             Mujeres     1 
```

nivel 是定义它是类别还是子类别的关键，我需要列出这些类别，然后在包含父类别 id_registro 的字段中指定父类别级别。

不知道是不是我说清楚了但是怎么inner join这个表呢？

表格是：

```
id  id_lingua  id_registro  categoria  nivel
1   1          3            Pastas     0
2   2          3            Folders    0
3   3          3            Carpetas   0
4   1          4            Feminina   3
5   2          4            Women      3
6   3          4            Mujeres    3 
```

这个咨询：

```
SELECT cat.*, parent.categoria as nome
FROM categorias cat
INNER JOIN categorias parent
ON cat.nivel=parent.id_registro
AND cat.id_lingua=2 
```

返回：

```
id  id_lingua  id_registro  categoria  nivel  nome
5   2          4            Women      3      Pastas
5   2          4            Women      3      Folders
5   2          4            Women      3      Carpetas 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-16T15:37:24.083

我认为您想要`LEFT JOIN`（显示`parent`未匹配的行）。

看来您也想匹配`id_lingua`。

```
SELECT cat.*, parent.categoria as nome
FROM categorias cat
LEFT JOIN categorias parent
ON cat.nivel = parent.id_registro
  AND cat.id_lingua = parent.id_lingua
WHERE cat.id_lingua = 2 
```

您可能还想添加[`IFNULL`](http://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html#function_ifnull)，因为`parent.*`将`NULL`不匹配，并且看起来您想要`Empty`显示：（除非您的意思是实际的空字符串）

```
SELECT cat.*, IFNULL(parent.categoria, 'Empty') as nome
FROM categorias cat
LEFT JOIN categorias parent
ON cat.nivel = parent.id_registro
  AND cat.id_lingua = parent.id_lingua
WHERE cat.id_lingua = 2 
```

[这个答案](https://stackoverflow.com/a/6188334/1711796)有一张很好的图片解释了不同连接之间的区别：

![图片](https://i.stack.imgur.com/VQ5XP.png)

# jquery - 类型问题未定义不是函数

> ID：16040974
> 
> 赞同：0
> 
> 时间：2013-04-16T15:25:47.960
> 
> 标签：jquery, undefined, undefined-function

我有一个问题，我只是不明白，因为我是新手。我在 wordpress 网站上运行 jquery 插件，并且由于将 wordpress 升级到最新版本，jquery 插件不起作用（[http://caroufredsel.dev7studios.com](http://caroufredsel.dev7studios.com)）。

每当滑块尝试触发时，我都会收到以下错误： `type issue 'undefined' is not a function (evaluating 'c_old.last()')`

任何人都可以看一下，我已经尝试将 jquery 和插件升级到最新版本，但仍然出现同样的问题。

这是任何人想帮助我的网站：http: [//asccs.qc.ca](http://asccs.qc.ca)

它在主页上，#lesArticles

更糟糕的是，我让它在本地工作，但不能在服务器上工作。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T19:16:38.487

尽管您在脑海中包含了 jQuery 1.9.1，但您的 jQuery 最终还是 jQuery 1.2.6，因为另一个包含的脚本覆盖了您的 jQuery。为了证明这一点，请在控制台中键入以下内容：

```
jQuery.fn.jquery 
```

它将以“1.2.6”响应。您会看到错误，因为 jQuery 1.2.6 版中未定义 jQuery 对象上的 last() 函数。

要解决此问题，请尝试包括

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js?ver=1.9.1"> 
```

***在***你包括

```
<script src="http://asccs.qc.ca/wp-content/themes/asccs/js/jquery.carouFredSel-6.2.0.js"> 
```

# c - 将参数传递给 Linux C 内联函数

> ID：16040975
> 
> 赞同：2
> 
> 时间：2013-04-16T15:25:48.413
> 
> 标签：c, inline-functions

当从 C 程序调用带有两个整数或指针参数的非`inline`函数时，它们被传递到寄存器`rdi`和`rsi`. **`inline`是否可以通过将函数**的整数/指针参数也传递到寄存器（而**不是**堆栈）的方式来完成编译？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T15:33:39.243

当一个函数被内联时，它被视为好像它的代码被写入了调用它的函数。发生这种情况时，根本不会传递参数。

当一个函数没有被内联时，它与普通函数完全没有区别。`inline`只是提示编译器尝试内联函数；它根本不影响链接。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T15:30:34.857

反问：你为什么在乎？我认为你不应该。那是你的编译器工作。如果你不相信你的编译器在那里做正确的事情，你可能根本不应该使用一个。

而且我很确定您认为参数可以保证进入寄存器的假设也是错误的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T17:17:07.607

in C the first two int's are not passed into %rdi and %rsi... that is an ABI / Calling Convention issue... Not a language issue.

if the function does get inlined and the rest of the surrounding code permits it, the int's will likely be in a general purpose registers...

but this is absolutely not your concern... and if you care, you can just have the compiler generate the asm to read and learn from...

# loadrunner - LoadRunner 和加密 URL

> ID：16040981
> 
> 赞同：0
> 
> 时间：2013-04-16T15:26:02.550
> 
> 标签：loadrunner

在我应该加载测试的应用程序上打开加密 url 时，即使是第一次导航到 url 也无法记录。我正在录制的浏览器给我一个页面无法显示。创建手动 web_url() 函数会导致错误。下面是脚本和输出日志。以前有人成功地编写过针对这种安全技术的脚本吗？并且没有使用相关性并不能解决这个问题，因为我什至没有到达第一页。

```
Action()

{

    web_url("entrypoint", 

            "URL=http://e34jbsl00430.devillo.com:8080/entrypoint/", 

            "Resource=0", 

            "RecContentType=text/html", 

            "Referer=", 

            "Snapshot=t1.inf", 

            "Mode=HTML", 

            LAST);

    return 0;

}

Virtual User Script started at : 2013-04-16 17:15:30

Starting action vuser_init.

Web Turbo Replay of LoadRunner 11.0.0 for Windows 7; build 9375 (May 18 2011 01:44:32)   [MsgId: MMSG-27143]

Run Mode: HTML   [MsgId: MMSG-26000]

Run-Time Settings file: "C:\Users\F119506\AppData\Local\Temp\noname5\\default.cfg"       [MsgId: MMSG-27141]

Ending action vuser_init.

Running Vuser...

Starting iteration 1.

Starting action Action.

Action.c(4): Redirecting "http://e34jbsl00430.devillo.com:8080/entrypoint/" (redirection depth is 0)     [MsgId: MMSG-26694]

Action.c(4): To location "http://e34jbsl00430.devillo.com:8080/entrypoint/lL0pQMU3EnM;ENTRYPOINT_JSESSIONID=Z1s9WbTfYw0BW8LrXFckprZS"    [MsgId: MMSG-26693]

Action.c(4): Error -26627: HTTP Status-Code=404 (Not Found) for "http://e34jbsl00430.devillo.com:8080/entrypoint/lL0pQMU3EnM;ENTRYPOINT_JSESSIONID=Z1s9WbTfYw0BW8LrXFckprZS"     [MsgId: MERR-26627]

Action.c(4): web_url("entrypoint") highest severity level was "ERROR", 0 body bytes, 595 header     bytes, 5 chunking overhead bytes         [MsgId: MMSG-26387]

Ending action Action.

Ending iteration 1.

Ending Vuser...

Starting action vuser_end.
Ending action vuser_end.

Vuser Terminated. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T21:22:41.680

你输入了什么作为要访问的 URI 根？您是否考虑过更改请求，然后允许重定向从返回的 HTTP 标头中自然发生？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T13:25:49.860

添加标题解决了这个问题：

web_add_header("Cookie"," JSESSIONID=dummy");

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T16:12:42.917

不确定链接的加密内容。它似乎是纯文本，请澄清....

它确实可能是一个临时重定向链接，其中重定向在会话结束时消失了。我会寻找如何使用本地代码获取或计算开头的动态组件。

# android - 不同的 Facebook 应用程序使用相同的密钥哈希

> ID：16040982
> 
> 赞同：3
> 
> 时间：2013-04-16T15:26:06.180
> 
> 标签：android, facebook, hash, key, facebook-android-sdk

[Android 开发者文档](http://developer.android.com/tools/publishing/app-signing.html#strategies)包含以下有关签署应用程序的建议：

“一般来说，向所有开发人员推荐的策略是在应用程序的整个预期生命周期内使用相同的证书对所有应用程序进行签名。”

在我的公司，我们通常会遵循这个建议，但对于链接的 Facebook 应用程序，我有一些顾虑。据我所知，如果您想将原生 android 应用程序和 facebook 应用程序链接在一起，您必须根据用于 android 应用程序发布的签名生成密钥哈希。我的问题是，使用相同的签名链接 2 个不同的 Facebook 应用程序是否正确？例如：“A”安卓应用与“A”脸书应用关联，“B”安卓应用与“B”脸书应用关联。“A”和“B”安卓应用程序都使用相同的证书进行签名。生成的密钥散列是在 facebook 端用作主密钥还是仅用作另一级别的安全检查？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T02:59:28.297

使用相同的键很好。它们用于验证应用程序是否就是它所说的那个人。Facebook 使用包名称通过深度链接调用您的应用程序。

# django - Django过滤器循环或

> ID：16040983
> 
> 赞同：2
> 
> 时间：2013-04-16T15:26:08.430
> 
> 标签：django

有谁知道我如何让 Django Filter 构建 OR 语句？我不确定是否必须使用 Q 对象，我认为我需要某种类型的 OR 管道，但这似乎不对：

```
 filter_mfr_method = request.GET.getlist('filter_mfr_method')
    for m in filter_mfr_method:
        designs = designs.filter(Q(mfr_method = m) | m if m else '')
        # Or should I do it this way?
        #designs = designs.filter(mfr_method = m | m if m else '') 
```

我希望这是：

```
SELECT * FROM table WHERE mfr_method = 1 OR mfr_method = 2 OR mfr_method = 3 
```

**编辑：这是有效的**

```
 filter_mfr_method = request.GET.getlist('filter_mfr_method')
    list = []
    for m in filter_mfr_method:
        list.append(Q(mfr_method = m))

    designs = designs.filter(reduce(operator.or_, list)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T15:47:30.103

我以前用过的东西：

```
qry = None
for val in request.GET.getlist('filter_mfr_method'):
    v = {'mfr_method': val}
    q = Q(**v)
    if qry: 
        qry = qry | q
    else: 
        qry = q

designs = designs.filter(qry) 
```

这取自我的一个查询构建器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T15:33:54.430

关于什么：

```
import operator 

filter_mfr_method = request.GET.getlist('filter_mfr_method')
filter_params = reduce(operator.or_, filter_mfr_method, Q())
designs = designs.filter(filter_params) 
```

# javascript - 用 Javascript 求和货币

> ID：16040984
> 
> 赞同：-3
> 
> 时间：2013-04-16T15:26:08.400
> 
> 标签：javascript, sum, currency

我正在尝试用 Javascript 对货币进行求和。我希望在字段中的任何更改上显示和更新总和。但我能得到的最多就是通过一个按钮来呈现结果。

这是代码：

```
<script>

function myFunction() {

    var total=0;

    var x = $('.total'); // ; was missing

    for (var i = 0; i < x.length; i++) {

        var str = x[i].value; // use .value

        var n = str.replace(",", ".");
        var n1 = n.replace("R$ ", "");

        total += parseFloat(n1);

    }

    sum.value = total.toFixed(2);

    $('#sum').priceFormat({
        prefix: 'R$  ',
        centsSeparator: ',',//a separação de decimais no float é com '.'
        thousandsSeparator: '.',
        centsLimit:2,
        allowNegative: true,
    });

}

</script> 
```

总计是一类输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T15:28:51.080

使用`onkeyup`事件。`keyup`在 jQuery 中。您也可以使用 ( `on`) `keypress`。

# powershell - 确定powershell是否调用了正在运行的exe？

> ID：16040985
> 
> 赞同：0
> 
> 时间：2013-04-16T15:26:17.003
> 
> 标签：powershell

从正在运行的 exe 中，如何轻松确定该 exe 是否是从 powershell 调用的？我还没有找到作为可靠指标的预定义环境变量。

我的具体问题是，我试图通过创建一个破坏当前环境变量的“运行器”.bat/.ps1 从 exe（一个 Go 静态链接的 exe）修改现有 PS 会话中的 PATH 和其他环境变量运行 cmd.exe 或 PS。如果从 PS 调用 exe，我将创建一个 .ps1。如果从 cmd.exe 调用 exe，我将创建一个 .bat。理想情况下，我会使用具有以下内容的 .bat 来处理 PS：

```
rem This doesn't work
powershell -C "& { $env:FAKE_PATH_2='C:\ruby193\bin' }"

rem This also doesn't work
powershell -C "& { [Environment]::SetEnvironmentVariable('FAKE_PATH_3', 'Sneaky 1') }"

rem This also doesn't work
powershell -C [Environment]::SetEnvironmentVariable('FAKE_PATH_4', 'Sneaky 2') 
```

但以上都没有将环境变量传播到现有的 PS 会话。我正在寻找一种不需要包装器 .bat/.ps1 脚本来设置和调用 exe 的解决方案。

有什么创造性的、低复杂性的想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T16:13:57.693

您可以使用 WMI 查找父进程 ID，然后确定它是否为 PowerShell。我将在 PowerShell 中展示一个示例，但您需要将其转换为适用于您的 EXE 的 WMI API：

```
$parentPid= (Get-WmiObject -Class Win32_Process -Filter "ProcessId='$pid'").ParentProcessId
(Get-Process -Id $parentPid).ProcessName 
```

也就是说，剩下的问题对我来说不是很清楚。执行这个：

```
powershell -C "& { [Environment]::SetEnvironmentVariable('FAKE_PATH_3', 'Sneaky 1') }" 
```

启动*新*的PowerShell EXE 并且不修改现有的 PowerShell 会话。事实上，修改现有 EXE 的 env 块会很棘手。如果 EXE 不通过 WM_SETTINGCHANGE 监控 env 块更改，除非您从 EXE 本身获得帮助（例如让 PowerShell 检查某些哨兵以告诉它修改其环境变量），否则它将无法工作。

# php - 形式 (part1) - 内容 - 形式 (part2)

> ID：16040988
> 
> 赞同：0
> 
> 时间：2013-04-16T15:26:27.987
> 
> 标签：php, html, forms

我想知道是否有可能做这样的事情：

```
<form>
some fields here
</form>

<div id=content>
content
</div>

<form=continued>
more fields here
</form> 
```

我在 Joomla 中构建它，因此加载了 3 个模块 atm。我想合并这两种形式，而不破坏我的布局顺序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T15:28:07.863

不，那是不可能的。但是，这是可能的：

```
<form>
some fields here

<div id="content">
content
</div>

</form> 
```

# php - 这个查询表单的 PHP 代码有什么问题？

> ID：16040989
> 
> 赞同：0
> 
> 时间：2013-04-16T15:26:28.173
> 
> 标签：php

我不是这方面的专家，但我有下面的代码来填写查询表并发送电子邮件，但它不起作用。只需要两个字段（姓名和电子邮件地址）但每次我收到错误消息发送表单时出现问题。请检查以确保您已填写所有字段。

我猜它一定是第一部分的东西，但我无法让它工作， - 有什么想法吗？

```
 <?php

 $SENT = false;
 if ($_POST && $_POST["name"] && eregi("^[a-zA-Z0-9 ]+$", $_POST["name"]) && $_POST["email"]
 && eregi("^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,3})$", $_POST
 ["email"])) {

 $recipient = "me@mydomain.com";
 $recipient = "enquiries@mydomain.com";
 $subject = "Enquiry from the Website";
 $email_header = "From: " .$_POST["email"]. " (" .$_POST["name"]. ")\r\n";
 "Reply-To: " .$_POST["email"]. "";

 // build the email
 $s = "The following contact form has been submitted:\n\n";

 $s .= "=== Customer Details =====\n";
 $s .= "Name: " .$_POST["name"]. "\n";
 $s .= "Company: " .$_POST["company"]. "\n";
 $s .= "Telephone: " .$_POST["telephone"]. "\n";
 $s .= "Email Address: " .$_POST["email"]. "\n\n";

 $s .= "=== Enquiry Information =====\n";
 $s .= trim($_POST["comments"])."\n\n";

 $s.= "Generated: " .date("Y-m-d H:i:s");

 $email = wordwrap($s, 72). "\n\n\n"; // wrap text to 72 characters

 if (@mail($recipient, $subject, $email, $email_header)) {
 $SENT = true;
 } else {
 $SENT = false;
 }
 }

 ?>

 \\Rest of HTML code here...

 <? if (!$SENT) { ?>

 <? if (!$SENT && $_POST) { ?>
 <p class="red">There was a problem with sending the form.<br />Please check to ensure you have
 filled in all the fields.</p>
 <? } ?>
 <p><b>Enquiry Form</b><br />
 <span class="red">**</span> Indicates required fields</p>

 <form name="contact" action="contact.php" method="post">
 <fieldset class="conform">
 <legend>Your Details</legend><br />
 <label for="name">Name</label>
 <input id="name" type="text" size="40" value="<?php echo (isset($_POST["name"])) ? $_POST
 ["name"] : '' ; ?>" name="name" /> <span class="red">**</span><br />
 <label for="company">Company</label>
 <input id="company" type="text" size="40" value="<?php echo (isset($_POST["company"])) ? $_POST
 ["company"] : '' ; ?>" name="company" /><br />
 <label for="telephone">Telephone</label>
 <input id="telephone" type="text" size="40" value="<?php echo (isset($_POST["telephone"])) ? 
 $_POST["telephone"] : ''; ?>" name="telephone" /><br />
 <label for="email">Email Address</label>
 <input id="email" type="text" size="40" value="<?php echo (isset($_POST["email"])) ? $_POST
 ["email"] : ''; ?>" name="email" /> <span class="red">**</span><br />
 </fieldset>

 <fieldset class="conform2">
 <legend>Further Information</legend><br />
 <textarea id="comments" name="comments" size="40" rows="8" cols="50"><?php echo(isset($_POST
 ["comments"])) ? $_POST["comments"] : '' ; ?></textarea>
 </fieldset>

 <br />
 <a href="javascript:document.contact.submit();"><img title="" height="43" alt="" 
 src="images/submit.gif" width="102" border="0" /></a>
 </form>
 </div>

 <?
 } else {
 ?>
 <p>Thank you for your enquiry. We will reply as soon as possible.</p>
 <?
 }
 ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T15:32:09.180

您的 $email_header 声明在“\r\n”之后结束。在以“Reply-To:”开头的下一行，它没有被附加到 $email_header。

# ms-access - Access Switchboard Manager：无效的过程调用或参数

> ID：16040990
> 
> 赞同：0
> 
> 时间：2013-04-16T15:26:35.073
> 
> 标签：ms-access

我正在尝试更新 Access 数据库中的现有 Switchboard。当我单击“总机管理器”按钮时，我收到错误“无效的过程调用或参数”。有什么想法可能导致此问题或如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T16:07:59.080

总机管理器将您的设置存储在一个名为`Switchboard Items`. 在数据表视图中打开该表，看看您是否可以发现任何没有意义的存储值。抱歉，我不能具体告诉你什么是没有意义的......希望你会知道什么时候/如果你看到它。

实际上，该错误消息对我来说更像是表单本身的问题。所以重命名表格和表格，并创建一个新的总机，这也将创建表格的一个新副本`Switchboard Items`。

如果该新表单/表格组合正常工作，请删除或重命名`Switchboard Items`. 然后将该表的旧保存版本重命名为`Switchboard Items`再次使用新表单尝试。如果问题完全是由表单引起的，那么您新的干净的表单副本现在应该可以与原始版本的`Switchboard Items`.

请注意，许多 Access 开发人员避免使用总机管理器。它是有限的和脆弱的。您可以将自定义表单替换为菜单选项的命令按钮。这可能看起来像是更多的工作，但这并不是大量的额外工作，并且您将受到保护，不会被总机管理器损坏。

# sql-server-2008 - 为选定的客户按月生成已解决案例的 SSRS 报告

> ID：16040996
> 
> 赞同：0
> 
> 时间：2013-04-16T15:26:42.573
> 
> 标签：sql-server-2008

我有一个为选定客户生成客户发票的 SSRS 报告。我希望能够每月为选定的客户生成此报告。我该怎么做才能为 ABC Corp. 生成报告，例如 4 月？我的案例“创建于”日期。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T15:47:36.643

查找[Reporting Services 订阅](http://msdn.microsoft.com/en-us/library/ms159762.aspx)。

标准订阅允许您设置报表服务器，以便每月向您发送一份 ABC Corp 的报表。您输入参数（例如 ABC Corp）的方式与手动生成报告的输入方式相同。

数据驱动订阅允许您自动向人们分发报告。每个人的参数可能不同，并且看起来与手动方法不同。您可以创建存储过程来管理数据驱动的订阅，这些将比标准订阅更复杂。

# c# - 如何在 PreInit 期间访问 ASP.NET 页面控件？

> ID：16040997
> 
> 赞同：2
> 
> 时间：2013-04-16T15:26:53.693
> 
> 标签：c#, asp.net, dynamic, controls, preinit

最近，我使用了[此处](http://blog.tatham.oddie.com.au/2008/12/20/accessing-aspnet-page-controls-during-preinit/)解释的类在 PreInit 期间访问动态控件。该帖子的标题为“在 PreInit 期间访问 ASP.NET 页面控件”，在本地它运行良好，但在服务器上我收到以下错误：

```
Compiler Error Message: CS1031: Type expected

Source Error:

Line 12:     /// in turn makes our controls accessible so that we can make the calls below. 
Line 13:     /// </remarks> 
Line 14:     public static void PrepareChildControlsDuringPreInit(this Page page)
Line 15:     {
Line 16:         // Walk up the master page chain and tickle the getter on each one 
```

如果有人就这个问题给我解决方案或建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T15:47:50.303

听起来，在本地，您运行的是比服务器更新的 .NET Framework 版本。

我相信，扩展方法仅在 .NET 3.5 及更高版本中受支持（使用您正在使用的语法）。因此，如果您运行的 .NET Framework 版本低于服务器上的版本，我认为这会导致您遇到编译器错误（当它尝试在服务器上编译时）。