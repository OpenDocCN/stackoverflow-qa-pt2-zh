# StackOverflow 问答 12654000-12654999

# ruby - 在非 Rails/Rack 项目中使用 Sprockets — rake compile 命令出错

> ID：12654001
> 
> 赞同：2
> 
> 时间：2012-09-29T15:28:56.940
> 
> 标签：ruby, gem, sprockets

我正在尝试在非 Rails/Rack 项目中使用 Sprockets，我遇到了[Simone Carletti 的操作指南](http://www.simonecarletti.com/blog/2011/09/using-sprockets-without-a-railsrack-project/)

我的项目设置如下：

```
.
Gemfile
Rakefile
/src
    /javascripts
    /stylesheets
        960.css 
```

宝石文件：

```
source "http://rubygems.org"

gem 'sass'
gem 'sprockets' 
```

耙文件：

```
require 'rubygems'
require 'bundler'
require 'pathname'
require 'logger'
require 'fileutils'

Bundler.require

ROOT        = Pathname(File.dirname(__FILE__))
LOGGER      = Logger.new(STDOUT)
BUNDLES     = %w( all.css all.js )
BUILD_DIR   = ROOT.join("build")
SOURCE_DIR  = ROOT.join("src")

task :compile => :cleanup do
  sprockets = Sprockets::Environment.new(ROOT) do |env|
    env.logger = LOGGER
  end

  sprockets.append_path(SOURCE_DIR.join('javascripts').to_s)
  sprockets.append_path(SOURCE_DIR.join('stylesheets').to_s)

  BUNDLES.each do |bundle|
    assets = sprockets.find_asset(bundle)
    prefix, basename = assets.pathname.to_s.split('/')[-2..-1]
    FileUtils.mkpath BUILD_DIR.join(prefix)

    assets.write_to(BUILD_DIR.join(prefix, basename))
    assets.to_a.each do |asset|
      # strip filename.css.foo.bar.css multiple extensions
      realname = asset.pathname.basename.to_s.split(".")[0..1].join(".")
      asset.write_to(BUILD_DIR.join(prefix, realname))
    end
  end
end 
```

我跑

```
bundle install 
```

并且捆绑包安装成功。

当我跑

```
rake compile 
```

我收到以下错误

```
rake aborted!
Don't know how to build task 'cleanup'

Tasks: TOP => compile
(See full trace by running task with --trace) 
```

关于为什么会发生这种情况的任何想法？如果这有助于调试此问题，请使用 ruby​​ 1.9.3p194。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T15:33:28.030

```
task :compile => :cleanup do 
```

这意味着任务`:compile`需要`:cleanup`，但您没有`:cleanup`定义任务。将其更改为

```
task :compile do 
```

# c# - SNIReadSyncOverAsync 和 WaitForSingleObject 阻塞 EF 性能？

> ID：12654002
> 
> 赞同：25
> 
> 时间：2012-09-29T15:28:59.797
> 
> 标签：c#, .net, wcf, entity-framework-4

我正在对使用 EF`(System.Data.Entities)`从 SQL DB 读取的 WCF 服务进行一些分析。当我启动多个访问服务的并行客户端时，CPU 都达到 100%，性能普遍下降，一切都陷入困境。

在使用并发分析器对此进行分析时，我发现 85% 的时间花在同步上，只有大约 4% 是实际代码执行。深入查看堆栈跟踪，大部分同步似乎来自对`WaitForSingleObject`in的调用`System.Data.SqlClient.TdsParserStateObject.ReadSniSyncOverAsync`。堆栈显示调用转到本机方法包装器，然后在`kernel32.dll!_WaitForSingleObject`.

有谁之前经历过这个吗？有什么办法可以解决这个问题吗？我并没有真正为此投入荒谬的负载，只有大约 20 个并行客户端，而且都是只读的，所以我很惊讶线程甚至会费心进行同步。

我已经为此奋斗了一个星期，我无法解释。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-07T18:28:13.547

你能把它提炼成一个重现问题的小代码示例吗？你用的是什么版本的EF？

以下是基于您迄今为止提供的信息的一些观察结果。

# EF 异步

任何低于 EF 6 的东西*总是*同步的。使用 EF 6，您可以选择使用[异步方法](http://msdn.microsoft.com/en-us/data/jj819165.aspx)。但是，除非您的 WCF 服务也使用异步模式，否则不要这样做。

# WCF 异步

您可以编写一个异步实现的 WCF 服务。有关详细信息，请参阅[此文档](http://blogs.msdn.com/b/endpoint/archive/2010/11/13/simplified-asynchronous-programming-model-in-wcf-with-async-await.aspx)。

如果您使用上述方法*之一*，但不是同时使用这两种方法，您的代码将不是异步的，但会产生不必要的同步开销。特别是避免`Task.Run()`或等价物，因为这些只会将工作转移到另一个线程而不会实际提高吞吐量。

# 初始化

最后，另一个无关的想法。您的问题可能与 EF 初始化有关吗？当 EF 为模型构建元数据时，它会为每个连接字符串执行一次。如果多个线程尝试使用同一个模型并且该模型尚未初始化，则所有线程将阻塞，直到初始化完成。要查看这是否是您的问题，请拨打服务电话并让其完成。然后提交您的 20 个并行请求。他们仍然最大限度地利用 CPU 吗？

# php - Youtube，我可以在用户使用 Google OpenID 登录时获取用户数据吗？

> ID：12654003
> 
> 赞同：0
> 
> 时间：2012-09-29T15:28:59.283
> 
> 标签：php, youtube-api

当用户在我的网站中使用 OpenID 登录时，我想获取有关 Youtube 默认的收藏夹列表、另一个列表或另一个播放列表的数据，并且我阅读了 YoutubeAPI，但我没有找到任何谈论这个的地方。但我看到`Jasmine`（这是 iphone 上的一个应用程序 - 它就像应用程序 Youtube）可以在用户使用 Google OpenID 登录时获取用户数据。`How can I do the same thing with Jasmine`. 任何人，都可以告诉我一些解决这个问题的方向。
太感谢了，

# javascript - 谷歌图表工具日期格式

> ID：12654008
> 
> 赞同：1
> 
> 时间：2012-09-29T15:29:26.417
> 
> 标签：javascript, api, charts

我正在使用谷歌图表工具 API，我正在尝试制作来自数据库的数据的[折线图](https://developers.google.com/chart/interactive/docs/gallery/linechart)，到目前为止效果很好。

但现在由于图表是关于用户的“体重指数”，我希望 x 轴被时间格式化。我的意思是，每个日期之间的间隔应该对应于实际经过的时间。

我希望我让自己明白了。

来自数据库的传入数据类型是：

*   体重指数（实数）（对于 y 轴）；

*   日期（日期）（对于 x 轴）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T01:33:44.823

这可以通过带[注释的时间线](https://developers.google.com/chart/interactive/docs/gallery/annotatedtimeline)（来自 Google Chart API）来完成。

这是一个简单的代码示例...

```
<script type='text/javascript'>
function drawVisualization() {
  var data = new google.visualization.DataTable();
  data.addColumn('date', 'Date');
  data.addColumn('number', 'Body Mass Index');
  data.addRows([
    [new Date(2012, 9 ,2), 20],
    [new Date(2012, 10 ,5), 22],
    [new Date(2012, 11 ,4), 24],
    [new Date(2013, 0 ,12), 23]
  ]);

  var annotatedtimeline = new google.visualization.AnnotatedTimeLine(
      document.getElementById('visualization'));
  annotatedtimeline.draw(data);
}
</script> 
```

# directory - 如何让g ++搜索特定目录中的头文件？

> ID：12654013
> 
> 赞同：53
> 
> 时间：2012-09-29T15:29:56.227
> 
> 标签：directory, g++, header-files, include-path

我有一个项目（一个库），它被细分为几个目录，其中包含代码。我想让 g++ 在项目的根目录中搜索头文件，这样我可以避免跨多个源文件的相同头文件的不同包含路径。

主要是`root/`目录下有子目录`A/`,`B/`和`C/`, 里面都有`.hpp`和`.cpp`文件。如果 A 中的某个源文件想要包含`file.hpp`B 中的 ，则必须这样做：`#include "../B/file.hpp"`. 对于 C 中的另一个源文件也是如此。但是，如果 A 本身具有包含需要的文件的子目录`file.hpp`，那么如果我决定移动文件，它将不一致并且会导致错误（因为包含路径将是`"../../B/file.hpp"`）。

此外，这也需要在其他项目中工作，这些项​​目位于`root/`. 我已经知道有一个选项可以手动将我的所有头文件复制到默认搜索目录中，但我想按照我描述的方式进行操作。

**编辑：**使用该库的所有程序必须仅使用`g++ prog.cpp lib.a -o prog`. 这意味着*永久*设置 g++ 的包含路径！

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-09-29T15:35:57.783

A/code.cpp

```
#include <B/file.hpp> 
```

A/a/code2.cpp

```
#include <B/file.hpp> 
```

编译使用：

```
g++ -I /your/source/root /your/source/root/A/code.cpp
g++ -I /your/source/root /your/source/root/A/a/code2.cpp 
```

编辑：

您可以使用环境变量来更改 g++ 查找头文件的路径。从手册页：

> 一些额外的环境变量会影响预处理器的行为。
> 
> ```
>  CPATH
>    C_INCLUDE_PATH
>    CPLUS_INCLUDE_PATH
>    OBJC_INCLUDE_PATH 
> ```
> 
> 每个变量的值都是一个由特殊字符分隔的目录列表，很像 PATH，在其中查找头文件。特殊字符“PATH_SEPARATOR”取决于目标并在 GCC 构建时确定。对于基于 Microsoft Windows 的目标，它是一个分号，而对于几乎所有其他目标，它是一个冒号。
> 
> CPATH 指定要搜索的目录列表，就像使用 -I 指定一样，但在命令行上使用 -I 选项给出的任何路径之后。无论预处理哪种语言，都会使用此环境变量。
> 
> 其余的环境变量仅在预处理指定的特定语言时适用。每个都指定要搜索的目录列表，就像使用 -isystem 指定一样，但在命令行上使用 -isystem 选项给出的任何路径之后。
> 
> 在所有这些变量中，一个空元素指示编译器搜索其当前工作目录。空元素可以出现在路径的开头或结尾。例如，如果 CPATH 的值为 ":/special/include"，则与 -I 具有相同的效果。-我/特别/包括。

您可以通过多种方式更改环境变量。在 bash 提示符下，您可以执行以下操作：

```
$ export CPATH=/your/source/root
$ g++ /your/source/root/A/code.cpp
$ g++ /your/source/root/A/a/code2.cpp 
```

您当然可以将其添加到您的 Makefile 等中。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-09-29T15:49:58.153

```
gcc -I/path -L/path 
```

*   `-I /path`要包含的路径，gcc 会在这个路径中找到 .h 文件

*   `-L /path`包含库文件, `.a`, `.s`o

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-23T23:50:33.773

很简单，使用“-B”选项将 .h 文件的目录添加到搜索路径。

例如 g++ -B /header_file.h your.cpp -o bin/your_command

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-29T15:38:35.990

#include <> 包含的标头将在所有默认目录中搜索，但您也可以使用 -I 命令行参数在搜索路径中添加自己的位置。

我看到了您的编辑，您通常可以将标题安装在默认位置

```
 /usr/local/include
 libdir/gcc/target/version/include
 /usr/target/include
 /usr/include 
```

不过，请确认编译器文档。

# c# - Windows Mobile 项目中的 System.Reflection

> ID：12654014
> 
> 赞同：3
> 
> 时间：2012-09-29T15:29:57.813
> 
> 标签：c#, reflection, windows-mobile

在我开始之前，让我在任何人建议或提出问题之前澄清任何困惑。

*这个问题与“Windows Mobile 6 Professional”有关，而不是 Windows Phone 7，它不能移植到 Windows Phone 7，因为它必须继续使用旧设备。*

现在，有了它的出路...

我目前正在尝试移植一个 C# 库，我有该库的源代码可以在 Windows Mobile 6 设备上运行，我已经对这些东西进行了编码，看起来就像永远一样，但是我从来没有处理过一件事，直到现在，这就是反思。

现在每个人都知道 .NET 紧凑型框架确实存在一些限制，似乎缺乏对“System.Reflection”命名空间中的许多方法和属性的支持就是其中之一。

该库的实际桌面版本设置为 .NET V2.0，并且我有运行 .NET 3.5 SP1 的设备，所以在大多数情况下，我在让事情正常工作方面几乎没有问题，但似乎不能找到一个明智的方法来使以下 2 块代码正常工作：

```
 var a = AppDomain.CurrentDomain**.GetAssemblies**();
        foreach (var assembly in a)
        {
            if (assembly is System.Reflection**.Emit.**AssemblyBuilder) continue;
            if (assembly**.GetType().**FullName == "System.Reflection.Emit.InternalAssemblyBuilder") continue;
            if (assembly**.GlobalAssemblyCache** && assembly**.CodeBase** == Assembly.GetExecutingAssembly()**.CodeBase**) continue;

            foreach (var t in GetLoadableTypes(assembly))
            {
                if (t.IsInterface) continue;
                if (t.IsAbstract) continue;
                if (t.IsNotPublic) continue;
                if (!typeof(IGeometryServices).IsAssignableFrom(t)) continue;

                var constuctors = t.GetConstructors();
                foreach (var constructorInfo in constuctors)
                {
                    if (constructorInfo.IsPublic && constructorInfo.GetParameters().Length == 0)
                        return (IGeometryServices)Activator.CreateInstance(t);
                }
            }
        } 
```

和

```
 catch (**ReflectionTypeLoadException** ex)
        {
            var types = ex**.Types**;
            IList<Type> list = new List<Type>(types**.Length**);
            foreach (var t in types)
                if (t != null && t**.IsPublic**)
                    list.Add(t);
            return list;
        } 
```

具体来说，上面代码中的粗体项是紧凑框架中似乎不存在的方法和属性，并且在使用智能感知和对象浏览器花费了大量时间之后，我没有找到任何返回（或提供）相同的类型。

那么我的问题如下：

有没有人有在 Compact .NET 框架中使用反射的经验，并且可以建议如何使此代码按预期工作，或者我将不得不开始编写自定义存根和功能来替换缺少的方法。

我知道框架上有一些反射功能，所以我确信必须有一种等效的方法来实现它。

最后一点，对于任何可能识别代码的人。是的，它来自 .NET 拓扑套件，是的，我正在尝试构建一个 WM6 版本的库，所以如果你知道有人已经做过它，请对此发表评论，我'将去看看更简单的路径:-)

==================================================== =====================

*发布后更新*

看起来**“粗体”**文本在代码片段中不起作用，因此上述代码中被 ** 包围的那些方法/属性是应该以粗体显示的部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T09:42:38.210

因此，在研究了一些较旧的构建和实验性 Silverlight 构建之后（显然与 Windows Mobile / CE 有很多相同的限制）

我想出了如何让魔法发挥作用。

第一部分是用代表要搜索的程序集的“程序集”结构填充数组。原来是：

```
var a = AppDomain.CurrentDomain.GetAssemblies(); 
```

但由于WM中不存在**GetAssemblies ，因此最快的方法是使用以下方法：**

```
var a = new[] {Assembly.GetCallingAssembly(), Assembly.GetExecutingAssembly()}; 
```

现在在我的情况下，这意味着我有两个相同的程序集，但是如果我从我的主 exe 调用一个程序集，而后者又使用 GeoAPI，那么这里将显示 2 个不同的程序集。

下一个挑战是“剥离”我们不需要检查的程序集：

```
if (assembly is System.Reflection.Emit.AssemblyBuilder) continue; 

if (assembly.GetType().FullName == System.Reflection.Emit.InternalAssemblyBuilder") continue; 

if (assembly.GlobalAssemblyCache && assembly.CodeBase == Assembly.GetExecutingAssembly().CodeBase) continue; 
```

第一个和第二个实例从未出现在 WM6 中，因此只需将它们注释掉是安全的。第二个确实有效，但是由于您再也不会在 WM6 上看到任何具有给定检查名称的程序集（由于缺少它），因此您应该可以放心地将其注释掉。我没有评论它，但它也从未被触发为真的。

最后一部分（至少就最初的谜题而言）是这样的：

```
foreach (var t in GetLoadableTypes(assembly)) 
{ 
  if (t.IsInterface) continue; 
  if (t.IsAbstract) continue; 
  if (t.IsNotPublic) continue; 
  if (!typeof(IGeometryServices).IsAssignableFrom(t)) continue; 
```

在我最初的尝试中缺少“ **isInterface** ”和“ **isNotPublic** ”，但是一旦我设法使用预期的数据类型修复了上面的“ **var a** ”变量的内容，一切都开始正常工作，没有任何遗漏。

最后一个问题是？这解决了一切吗？嗯，不完全……

事实证明，GeoAPI 中“ **ReflectInstance** ”方法的全部目的是使用“ **IGeometryServices** ”接口查找用户定义的“ **GeometryFactory** ” 。

 **因为我只反映了我从（上面的var a）调用的程序集，所以没有将' **NetTopologySuite** '（定义几何工厂的位置）添加到选择列表中（显然CurrentDomain.GetAssemblies 包括这个）

最终结果是我最终还是遇到了异常，因为找不到正确类型的程序集。

然而事实证明，在 GeoAPI 中的“ **Geometry** ”构造函数中有一个重载，允许您传入**GeometryFactory**，当您这样做时，它完全忽略了 ReflectInstance 方法，只使用它所告诉的内容。

或者换一种说法，我一开始就不必做任何事情，我可以将方法设置为返回“null”并传入我想使用的几何工厂。

无论如何，如果有人有兴趣，我现在有一份工作副本：

GeoAPI.NET NetTopologySuite Wintellect.PowerCollections

在带有 .NET CF 3.5 的 Windows Mobile 6 和 Windows CE 下构建并运行良好。**

# ios - 我们可以在单个视图中有超过 1 个 MPMoviePlayerController 吗？

> ID：12654015
> 
> 赞同：2
> 
> 时间：2012-09-29T15:30:05.517
> 
> 标签：ios, mpmovieplayercontroller, mpmovieplayer

我有`www.abc.com/videos/mvideo.m4v`来自服务器的视频链接格式列表。

因此，如果我得到 3 个链接，我必须在屏幕上显示 3 个视频，并根据按钮播放/暂停。

我已经在`UITableView`一切似乎都很好..

但我面临的唯一问题是，如果在单个视图中分配了 3 个 MPMovieController，那么只有最后一个在工作，而其余的都没有工作.. 只是有一个黑屏。

相同 如果有 2 个链接，那么只有第二个在工作，而另一个只是没有控件的空白屏幕。

**注意：** Mpmovieplayer 控制器的分配在 cellForRowAtIndex 方法中完成

# iphone - 在 Cocoa Touch 中循环播放声音文件

> ID：12654019
> 
> 赞同：1
> 
> 时间：2012-09-29T15:30:43.740
> 
> 标签：iphone, ios, cocoa-touch

我试图在视图加载后播放声音并在整个应用程序中重复音乐，即使从不同的视图切换也是如此。它会在视图加载后播放，并在切换到不同的视图后继续播放，但我无法让它循环播放。我正在使用声音。任何让我循环的帮助都会很棒

```
-(void)viewDidLoad {

    CFBundleRef mainBundle = CFBundleGetMainBundle();
    CFURLRef    soundFileURLRef;
    soundFileURLRef = CFBundleCopyResourceURL(mainBundle, (CFStringRef)@"beat", CFSTR ("mp3"), NULL);
    UInt32 soundID;
    AudioServicesCreateSystemSoundID(soundFileURLRef, &soundID);
    AudioServicesPlaySystemSound(soundID);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T17:21:06.677

尝试`AVAudioPlayer`改用，解决方案将是这样的（使用 using `ARC`）。

* * *

你需要在你的类中定义一个变量......

```
@interface MyClass : AnyParentClass {
    AVAudioPlayer *audioPlayer;
}

// ...

@end 
```

...您可以将以下代码放入您的任何方法中开始播放...

```
NSURL *urlForSoundFile = // ... whatever but it must be a valid URL for your sound file
NSError *error;

if (audioPlayer == nil) {
    audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:urlForSoundFile error:&error];
    if (audioPlayer) {
        [audioPlayer setNumberOfLoops:-1]; // -1 for the forever looping
        [audioPlayer prepareToPlay];
        [audioPlayer play];
    } else {
        NSLog(@"%@", error);
    }
} 
```

...停止播放很容易。

```
if (audioPlayer) [audioPlayer stop]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T16:57:54.643

尝试将您的代码移动到您的应用程序委托中并使用重复的 NSTimer 来重复您的播放操作。

示例代码：

```
// appDelegate.h
@interface AppDelegate : UIResponder <UIApplicationDelegate>
{
     UInt32 soundID;
}

//appDelegate.m
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    CFBundleRef mainBundle = CFBundleGetMainBundle();
    CFURLRef    soundFileURLRef;
    soundFileURLRef = CFBundleCopyResourceURL(mainBundle, (CFStringRef)@"beat", CFSTR ("mp3"), NULL);
    AudioServicesCreateSystemSoundID(soundFileURLRef, &soundID);
    AudioServicesPlaySystemSound(soundID);

    [NSTimer scheduledTimerWithTimeInterval:lenghtOfSound target:self selector:@selector(tick:) userInfo:nil repeats:YES];
    return YES;
}

-(void)tick:(NSTimer *)timer
{
   AudioServicesPlaySystemSound(soundID);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T17:10:16.700

按照 AudioServicesPlaySystemSound 函数描述的建议，使用 AudioServicesAddSystemSoundCompletion 函数注册回调。计时器的问题是您可能不会在前一个声音结束时准确地启动它。

# ruby-on-rails-3 - Rake 路由失败，拒绝访问

> ID：12654020
> 
> 赞同：1
> 
> 时间：2012-09-29T15:30:49.403
> 
> 标签：ruby-on-rails-3

尝试在我的远程站点上运行 rake routes 命令，我收到错误消息 **Access denied for user 'xxx'@'localhost' (using password: YES)**

该站点可以访问数据库，因此它不是 database.yml 中的设置，但它最近开始抛出**Action not found**错误，经过几个月的工作正常。关于如何查看路线以便我可以检查没有任何损坏的任何想法？

Rails 3.2.3、Ruby 1.8.7、Phusion 乘客。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T09:13:58.813

有同样的问题，只是通过在 config/database.yml 开发中设置正确的开发数据库配置选项来解决它：适配器：mysql2 编码：utf8 重新连接：false 数据库：池：5 用户名：密码：套接字：/var/run/mysqld/ mysqld.sock

# bash - 如何计算 Bash 中所有人类可读的文件？

> ID：12654026
> 
> 赞同：5
> 
> 时间：2012-09-29T15:31:21.617
> 
> 标签：bash, file, unix, human-readable

我正在参加 UNIX 入门课程，并且有一个家庭作业问题如下：

> 上一题有多少个文件是文本文件？文本文件是包含人类可读内容的任何文件。（技巧题。对文件运行 file 命令以查看该文件是文本文件还是二进制数据文件！如果您只是计算带有`.txt`扩展名的文件的数量，您将不会获得此问题的分数。）

上一个问题只是问有多少个常规文件，这很容易通过`find . -type f | wc -l`.

我只是无法确定“人类可读的内容”是什么，因为我假设它意味着除了二进制/汇编之外的任何东西，但我认为这就是`-type f`显示的内容。也许这就是教授所说的“技巧问题”的意思？

这个问题稍后有一个跟进，它还询问“哪些文本文件包含大小写混合的字符串“csc”？”。显然“文本”不仅仅是指`.txt`文件，但我需要弄清楚第一个问题来确定这一点！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-29T15:34:47.560

为了清楚起见，添加了引号：

> 对文件运行“file”命令，查看该文件是文本文件还是二进制数据文件！

该`file`命令将检查文件并告诉您它们看起来是什么类型的文件。“文本”一词将（几乎）始终出现在文本文件的描述中。

例如：

```
desktop.ini:   Little-endian UTF-16 Unicode text, with CRLF, CR line terminators
tw2-wasteland.jpg: JPEG image data, JFIF standard 1.02 
```

所以第一部分是要求你运行`file`命令并解析它的输出。

> 我只是无法确定“人类可读的内容”是什么，因为我假设它意味着除了二进制/汇编之外的任何东西，但我认为这就是 -type f 显示的内容。

`find -type f`查找文件。它过滤掉其他文件系统对象，如目录、符号链接和套接字。但是，它将匹配任何类型的文件：二进制文件、文本文件等。

> 也许这就是教授所说的“技巧问题”的意思？

听起来他只是在说不要做`find -name '*.txt'`或一些类似的命令来查找文本文件。不要假设特定的文件扩展名。文件扩展名在 UNIX 中的意义远小于在 Windows 中的意义。很多文件甚至没有文件扩展名！

* * *

> 我在想教授希望我们能够对所有文件运行文件命令并计算其中包含“文本”的文件的数量。

多部分答案怎么样？我将在#1 中给出简单的解决方案，这可能是您的教授正在寻找的。如果您有兴趣，我会解释它的缺点以及如何改进它。

1.  一种方法是使用`xargs`，如果您已经了解的话。`xargs`运行另一个命令，使用来自标准输入的数据作为该命令的参数。

    ```
    $ find . -type f | xargs file
    ./netbeans-6.7.1.desktop: ASCII text
    ./VMWare.desktop:         a /usr/bin/env xdg-open script text executable
    ./VMWare:                 cannot open `./VMWare' (No such file or directory)
    (copy).desktop:           cannot open `(copy).desktop' (No such file or directory)
    ./Eclipse.desktop:        a /usr/bin/env xdg-open script text executable 
    ```

2.  这样可行。有点。对于家庭作业来说已经足够了。但对于现实世界的脚本来说还不够好。

    注意它是如何破坏文件的`VMWare (copy).desktop`，因为它有一个空格。这是由于`xargs`' 在空格上拆分参数的默认行为。我们可以通过使用`xargs -0`在 NUL 字符而不是空格上拆分命令参数来解决此问题。文件名不能包含 NUL 字符，因此这将能够处理任何内容。

    ```
    $ find . -type f -print0 | xargs -0 file
    ./netbeans-6.7.1.desktop: ASCII text
    ./VMWare.desktop:         a /usr/bin/env xdg-open script text executable
    ./VMWare (copy).desktop:  a /usr/bin/env xdg-open script text executable
    ./Eclipse.desktop:        a /usr/bin/env xdg-open script text executable 
    ```

3.  这对于制作脚本来说已经足够好了，而且您会经常遇到这种情况。但我个人更喜欢不需要管道的替代语法，因此效率更高。

    ```
    $ find . -type f -exec file {} \;
    ./netbeans-6.7.1.desktop: ASCII text
    ./VMWare.desktop:         a /usr/bin/env xdg-open script text executable
    ./VMWare (copy).desktop:  a /usr/bin/env xdg-open script text executable
    ./Eclipse.desktop:        a /usr/bin/env xdg-open script text executable 
    ```

    要理解这一点，请反复`-exec`调用，用它找到的每个文件名替换。分号表示命令的结束。`file``{}``\;``file`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T06:38:55.863

有一种很好且简单的方法可以确定文件是否是人类可读的文本文件，只需使用`file --mime-type <filename>`并查找`'text/plain'`. 无论文件是否具有结尾或与 .txt 不同的结尾，它都会起作用

所以你会这样做：

```
FILES=`find $YOUR_DIR -type f`

for file in $FILES ;
do

mime=`/usr/bin/file --mime-type $YOUR_DIR/$file | /bin/sed 's/^.* //'`

if [ $mime = "text/plain" ];  then      
    fileTotal=$(( fileTotal + 1 ))
    echo "$fileTotal - $file"
fi

done

echo "$fileTotal human readable files found!" 
```

并且输出会是这样的：

```
1 - /sampledir/samplefile
2 - /sampledir/anothersamplefile
....
23 human readable files found! 
```

如果您想进一步了解更多人类可读的 mime 类型（例如 HTML 和/或 XML 是否计数？）请查看[http://www.feedforall.com/mime-types.htm](http://www.feedforall.com/mime-types.htm)

# c - 3x3 数组 = 10 个数字

> ID：12654029
> 
> 赞同：0
> 
> 时间：2012-09-29T15:31:52.290
> 
> 标签：c, arrays

我有这个代码

```
#include <math.h>
#include <stdio.h>

const int n = 3;
const int s = 3;
int getm(int mat[n][s]);
int printm(int mat[n][s]);

int main()
{
    int m[n][s];
    getm(m);
    printm(m);
    return 0;
}

int getm(int mat[n][s])
{
    for(int x = 0;x < n;x++)
    {
        for (int y = 0;y<s;y++)
        {
            scanf("%i ", &mat[x][y]);
        }
    }
    return 0;
}
int printm(int mat[n][s])
{
    for(int x = 0;x<n;x++)
    {
        for(int y = 0;y<s;y++)
        {
            printf("%i ", mat[x][y]);
            if(y==(s-1))
            {
                printf("\n");
            }
        }
    }
} 
```

它应该要求 9 个数字来组成一个 3x3 矩阵数组，但它实际上要求 10 个数字，printm 运行良好 - 只打印 9 个数字。错误在哪里？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-29T15:36:18.320

我认为问题出在后面的空格`%i`：您不需要第十个数字，但是您的代码无论如何都在要求它，因为它等待在第九个数字之后获得一个空格。

另外，您的打印代码可以通过删除`if`：

```
for(int x = 0;x<n;x++)
{
    for(int y = 0;y<s;y++)
    {
        printf("%i ", mat[x][y]);
    }
    printf("\n");
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-29T15:36:22.633

```
scanf("%i ", &mat[x][y]); 
```

去掉 之后的空格`%i`，所以它只读取一个数字：

```
scanf("%i", &mat[x][y]); 
```

# javascript - 我可以在 JS 中创建一个监听器而不是重复请求一个 URL 吗？

> ID：12654034
> 
> 赞同：1
> 
> 时间：2012-09-29T15:32:09.753
> 
> 标签：javascript

我正在开发一个需要“侦听”服务器响应的工具。

目前我已经使用 JQuery 来请求一个 URL 并根据它的输出进行响应。

我每隔几秒钟就这样做一次。

但是，由于可能有数百人同时使用该工具，这可能是一个相当大的服务器负载。

有没有一种方法可以创建一个“侦听器”，它会在发生更改时通知加载的页面，而不是不断地查询服务器？

我在谷歌上找不到太多东西（可能没有找到正确的东西），所以希望这里的人能确切地知道我在说什么。

提前感谢您的快速回复！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T15:33:46.223

您正在寻找名为*Comet*或服务器推送的技术。这个问题有几种不同的实现方式，通常涉及长时间运行但空闲的 HTTP 连接。查看[Atmosphere](http://atmosphere.java.net/)（Java 中）或各种其他库。

还要确保查看网络套接字（新的 HTML5 技术）。

# 也可以看看

*   [COMET JavaScript 库](https://stackoverflow.com/questions/916669)

# jquery - Ajax 响应找不到包含的 javascript 文件之一中存在的函数？

> ID：12654037
> 
> 赞同：0
> 
> 时间：2012-09-29T15:32:42.820
> 
> 标签：jquery, ajax, jquery-ui, jquery-tabs

我正在使用 jquery 选项卡，它在选项卡单击时进行 ajax 调用。单击选项卡时，选项卡进行 ajax 调用以带来 html 响应，然后附加到当前页面。我面临的问题是；-

在 ajax 响应中，我有下面的 javascript 代码，其中 customer.js 包含函数，即 checkCustId()

```
 <SCRIPT language="JavaScript" src="script/customer.js"></SCRIPT>
 <SCRIPT language="JavaScript">checkCustId();</SCRIPT> 
```

现在单击选项卡，我收到**“未定义函数 checkCustId()”**的错误，尽管 customer.js 包含函数，即 checkCustId()。 **根据我的理解，这种情况正在发生，因为 ajax 响应没有带来 customer.js 文件，这就是为什么 jquery 在内部评估 javascript 时无法找到函数 checkCustId。有没有办法在标签点击时也获取 javascript 文件/也在进行显式ajax调用期间？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T10:45:24.220

我必须通过仅在 javascript 响应中包含方法 checkCustId 的定义来解决它。发生这种情况的 jquery 在评估 javascript 时不会将实际的 js 文件作为 ajax 响应的一部分

# magento - 如何在 Magento 站点地图上显示面包屑

> ID：12654038
> 
> 赞同：1
> 
> 时间：2012-09-29T15:32:51.493
> 
> 标签：magento, sitemap, breadcrumbs

有没有办法让面包屑出现在我的站点地图页面的顶部？

我希望我的面包屑显示在所有页面上，而这些是我无法让它们显示的唯一页面。

我将此添加到显示容器文件的顶部，但它不起作用......有什么想法吗？

```
<?php echo $this->getLayout()->getBlock("breadcrumbs")->toHtml()?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T18:37:59.857

您还需要通过调用`addCrumb()`函数将实际面包屑添加到列表中。它在 [Mage_Page_Block_Html_Breadcrumbs](http://docs.magentocommerce.com/Mage_Page/Mage_Page_Block_Html_Breadcrumbs.html)类中定义。你可以这样实现：

```
<?php 
    echo $this->getLayout()->getBlock("breadcrumbs")->
              ->addCrumb('CrumbName', array('label' => 'this will appear as link text', 'title' => 'title attribute of link', 'link' => 'url to the page')
              ->toHtml()
?> 
```

您也可以在 xml 配置文件中执行此操作。在 catalog.xml`catalog_seo_sitemap`处理程序中进行以下更改：

```
<reference name="root">
    <action method="setTemplate"><template>page/1column.phtml</template></action>
    <action method="unsetChild"><alias>breadcrumbs</alias></action>
    <block type="page/html_breadcrumbs" name="breadcrumbs" as="breadcrumbs">        
      <action method="addCrumb"><crumbName>Name</crumbName><crumbInfo><label>Test</label><title>Test</title><link>/test.html</link></crumbInfo></action>
    </block>
</reference> 
```

# asp.net-mvc - 控制器应该如何将不同的实体或集合传递回视图

> ID：12654039
> 
> 赞同：3
> 
> 时间：2012-09-29T15:32:56.770
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我在网上看到的大多数示例都显示了具有单个实体类的 CRUD。

如果我要创建一个 CRM 应用程序，并且其中一个视图需要以只读模式显示客户信息，并且在同一页面上显示联系人、注释、附件、地址，那么控制器应该如何将这些不同的实体传递给视图？
我是否应该创建另一个模型类，它将作为各种其他实体的容器，并用各种实体填充该模型类并传回视图。

在另一种情况下，假设我想在编辑模式下显示客户实体，并且视图具有客户活动状态、客户状态代码、客户满意度下拉菜单的下拉菜单。这些下拉列表中的每一个都有绑定到它们的其他实体集合。因此，同样在这种情况下，控制器应该如何传回具有所有这些实体而不仅仅是客户实体的模型。

我继续阅读 ViewModel 模式，我认为这可能是要走的路，但肯定会感谢更多的指导和指示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T15:44:54.087

你完全正确。创建一个`ViewModel`代表您的页面需要的对象。

您的第一个场景可能如下所示：

```
public class CustomerInformationViewModel
{
    IEnumerable<Contact> Contacts { get; set; }
    IEnumerable<Note> Notes { get; set; }
} 
```

在你的控制器中填充这些，然后在你的视图中访问它们。

```
@foreach (var contact in Model.Contacts)
{
    @Html.DisplayFor(c => c.Name)
} 
```

对于您的第二种情况，完全相同。您想绑定到您的客户属性，但您还需要一些额外的下拉列表集合。

```
public class CustomerEditViewModel
{
    Customer Customer { get; set; }
    IEnumerable<Status> StatusOptions { get; set; }
    IEnumerable<StateCode> StateCodeOptions { get; set ; }
} 
```

请记住，如果您发现您`ModelState`在控制器上无效，则需要在控制器中重新填充这些集合。

# ruby-on-rails - Rails：通过关联创建直通记录

> ID：12654040
> 
> 赞同：3
> 
> 时间：2012-09-29T15:33:17.043
> 
> 标签：ruby-on-rails, associations

如果有人有更好的标题，请告诉我：p

我有以下型号：

```
class Car
  has_many :car_drivers
  has_many :drivers, :through => :car_drivers
end

class Driver
  has_many :car_drivers
  has_many :cars, :through => :car_drivers
end

class CarDriver
  belongs_to :car
  belongs_to :driver
end 
```

现在我想通过 Car 创建一个新的 Driver，但连接表 (car_drivers) 中的记录也应该创建。我尝试了以下方法，但是在创建汽车记录时，连接表记录不是：`driver_object.cars.create`

在这种情况下，最佳做法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-29T17:31:37.837

以下将创建 的新实例`Car`，但不将其与`Driver`实例关联。

```
driver_object.cars.create 
```

以下作品

```
driver_object.cars << Car.create(...) 
```

`<<`ActiveRecord 中的方法将新创建`Car`的实例附加到`:cars`集合上`Driver` **并**调用`save`on `Driver`，创建`CarDriver`实例以将新创建​​的实例`Car`与`driver_object`.

# c# - Stack Exchange OpenID 支持哪些额外的值？

> ID：12654041
> 
> 赞同：2
> 
> 时间：2012-09-29T15:33:17.347
> 
> 标签：c#, openid, stackexchange

我正在尝试获取`username / display name`，但我不知道支持的值是什么。我得到了`email`and `realname`，但我不知道返回的是什么`username / display name`。

![在此处输入图像描述](../Images/8b4f07e9afcaf8029a29a7e574a8b66e.png)

是否有相关文档或其他内容？

我当前的代码：

```
public class StackExchangeOpenID : OpenIdClient
{
    public StackExchangeOpenID()
        : base("stackexchange", "https://openid.stackexchange.com")
    {

    }

    protected override Dictionary<string, string> GetExtraData(IAuthenticationResponse response)
    {
        FetchResponse fetchResponse = response.GetExtension<FetchResponse>();
        if (fetchResponse != null)
        {
            var extraData = new Dictionary<string, string>();
            extraData.Add("email", fetchResponse.GetAttributeValue(WellKnownAttributes.Contact.Email));
            extraData.Add("name", fetchResponse.GetAttributeValue(WellKnownAttributes.Name.FullName));

            // returned value: null
            //extraData.Add("username", fetchResponse.GetAttributeValue(WellKnownAttributes.Name.Alias));

            return extraData;
        }

        return null;
    }
    protected override void OnBeforeSendingAuthenticationRequest(IAuthenticationRequest request)
    {
        var fetchRequest = new FetchRequest();
        fetchRequest.Attributes.AddRequired(WellKnownAttributes.Contact.Email);
        fetchRequest.Attributes.AddRequired(WellKnownAttributes.Name.FullName);

        // returned value: null
        //fetchRequest.Attributes.AddRequired(WellKnownAttributes.Name.Alias);

        request.AddExtension(fetchRequest);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T19:50:28.420

您的箭头指向的不是显示名称（StackID 没有显示名称的概念，您的登录名是您的电子邮件地址），而是可选的“Vanity Id”。

例如：

![在此处输入图像描述](../Images/6b7d0da9ac5cec8d0ce695b324c9f778.png)

[给了我https://openid.stackexchange.com/kevin.montrose](https://openid.stackexchange.com/kevin.montrose)的虚荣 OpenID 。对于需要手动输入 OpenID url 的依赖方来说，这只是一个更容易记住的别名。

电子邮件和真实姓名/全名是 StackID 支持查询的唯一属性，并将通过 SREG 或 AX 扩展名返回（[如代码所示](http://code.google.com/p/stackid/source/browse/OpenIdProvider/Controllers/OpenIdController.cs#324)）。

# haskell - 多个元素的布尔运算符

> ID：12654042
> 
> 赞同：4
> 
> 时间：2012-09-29T15:33:25.270
> 
> 标签：haskell

我知道可以这样做：

```
any (>3) [1,2,3,4,5] 
```

但什么是优雅的实现方式：

```
any and[(>3),(<5)] [1,2,3,4,5] 
```

或者

```
all or[(<2),(>4)] [1,2,3,4,5] 
```

ETC？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-29T15:56:41.530

我相信您想检查是否有任何元素同时是`(<5)`和`(>3)`。

你可以这样做：

```
any (\x -> x > 3 && x < 5) [1..5] 
```

你的另一个可以通过

```
any (\x -> x < 2 || x > 4) [1..5] 
```

`&&`但也许定义和`||`处理函数会更有趣：

```
infixr 3 &&&
infixr 3 |||

(&&&) :: (a -> Bool) -> (a -> Bool) -> (a -> Bool)
(f &&& g) x = f x && g x

(|||) :: (a -> Bool) -> (a -> Bool) -> (a -> Bool)
(f ||| g) x = f x || g x 
```

所以现在我们可以将您的示例重写为：

```
any ((>3) &&& (<5)) [1..5]
any ((<2) ||| (>4)) [1..5] 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-29T16:48:58.650

您的符号`and[(>3),(<5)]`几乎可以直接实现为高阶函数。我称之为`andP`，因为它`any`接受一个谓词和一个值列表，我们想要一个接受谓词列表的函数。

```
andP :: [a -> Bool] -> a -> Bool
andP ps x = all ($ x) ps 
```

现在

```
andP [(>3), (<5)] x = x > 3 && x < 5 
```

你可以在你的初始请求中写为

```
any (andP [(>3), (<5)]) [1,2,3,4,5] 
```

作为旁注，对于这个特定示例，我认为更清晰的方法是：

```
between :: (Ord a) => a -> a -> a -> Bool
between lo hi x = lo < x && x < hi

any (between 3 5) [1,2,3,4,5] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-29T17:38:55.020

另一种方法是使用`Monoid`s。`Bool`是一个`Monoid`当包裹在`All`或`Any`从`Data.Monoid`。我们需要它，因为有两种组合方式`[Bool]`- 我们可以使用`&&`或`||`。这就是为什么存在类型`All :: Bool -> All`和`Any :: Bool -> Any`实例的原因`Monoid`。例如：

```
> import Data.Monoid
> getAll $ mconcat [All True, All True, All False]
False
> getAll $ mconcat [All True, All True, All True]
True
> getAny $ mconcat [Any True, Any True, Any False]
True 
```

我们使用的另一个事实是`Monoid`函数的实例（同样来自`Data.Monoid`）：

```
instance Monoid b => Monoid (a -> b) where
        mempty _ = mempty
        mappend f g x = f x `mappend` g x 
```

现在我们可以附加函数：

```
> :t All
All :: Bool -> All
> :t (<5)
(<5) :: (Num a, Ord a) => a -> Bool
> :t All . (<5)
All . (<5) :: (Num a, Ord a) => a -> All
> :t ((All . (<5)) <> (All . (>3)))
((All . (<5)) <> (All . (>3))) :: (Num a, Ord a) => a -> All
> getAll $ ((All . (<5)) <> (All . (>3))) 4
True 
```

将其推广到函数列表：

```
> getAll $ mconcat [(All. (<5)), (All . (>3))] $ 4
True
> getAll $ mconcat (map (All .) [(<5), (>3)]) $ 4
True 
```

然后搜索[http://www.haskell.org/hoogle/](http://www.haskell.org/hoogle/)`(a->b) -> [a] -> b`看看我们可以使用哪个来`foldMap :: (Foldable t, Monoid m) => (a -> m) -> t a -> m`代替`mconcat . map`：

```
> import Data.Foldable
> getAll $ foldMap (All .) [(<5), (>3)] $ 4
True 
```

最后将它映射到一个数字列表上：

```
> map (getAll . foldMap (All .) [(<5), (>3)]) $ [1..5]
[False,False,False,True,False]
> Prelude.or $ map (getAll . foldMap (All .) [(<5), (>3)]) $ [1..5]
True 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-29T16:03:46.800

您还可以通过使用一些实例来定义一个接受谓词列表的运算符，`Monoid`如下所示。

```
test = any (andP [(>3),(<5)]) [1,2,3,4,5]

andP :: [a -> Bool] -> a -> Bool
andP ps = getAll . mconcat (map (All.) ps) 
```

# php - DB2 时间戳 PHP DateTime

> ID：12654051
> 
> 赞同：2
> 
> 时间：2012-09-29T15:34:42.700
> 
> 标签：php, datetime, db2, timestamp

升级到 PHP 5.3 后，我的应用程序返回时间戳类型为“2010-12-15-10.23.22.716000”的 DB2 列。这导致 PHP DateTime 函数出现问题，因为它失败了

> $time = new DateTime("2010-12-15-10.23.22.716000");
> 
> 无法在位置 25 (0) 解析时间字符串 (2010-12-15-10.23.22.716000)：意外字符

DB2 时间戳的准确性似乎太高了。我可以以某种方式强制连接更改时间戳格式，并将数据提取到其中吗？

我正在使用 db2_connect 函数连接到数据库，如下所示：

> $this->connection = db2_connect ( $config ['dsn'], $config ['username'], $config ['password'] );

**编辑：** 我想使用下面提到的解决方案，但它对我不起作用，并且在我的系统（AS400）上运行很奇怪。我有： $timeRec = DateTime::createFromFormat('Ymdh.isu',$value);

```
$value = $timeRec->format('Y-m-d H:i:s');

$value = new DibiDateTime($value); 
```

如果我在 ->format 之后执行 var_dump($value)，则返回正确的字符串，但如果我尝试将此字符串提供给 DibiDateTime，则具有：

```
public function __construct($time = 'now', DateTimeZone $timezone = NULL)
{    
    if ($timezone === NULL) {
        parent::__construct($time);
    } 
} 
```

然后它失败了：

> 非对象上的函数 format()

即使我之前检查过 var_dump($timeRec) 是正确的 DateTime 对象。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-29T15:50:51.260

我认为您的函数（无论它是什么）在日期字符串末尾的微秒内窒息。`DateTime::createFromFormat()`使用'u' 微秒标签使用该函数来解决这个问题。见这里[http://php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)

```
$time = DateTime::createFromFormat('Y-m-d-h.i.s.u', '2010-12-15-10.23.22.716000');
var_dump($time); 
```

我的系统上的输出：-

```
object(DateTime)[1]
  public 'date' => string '2010-12-15 10:23:22' (length=19)
  public 'timezone_type' => int 3
  public 'timezone' => string 'UTC' (length=3) 
```

# c++ - 什么是“表达 SFINAE”？

> ID：12654067
> 
> 赞同：57
> 
> 时间：2012-09-29T15:37:17.060
> 
> 标签：c++, templates, visual-c++, c++11, sfinae

在[http://blogs.msdn.com/b/vcblog/archive/2011/09/12/10209291.aspx，VC++](http://blogs.msdn.com/b/vcblog/archive/2011/09/12/10209291.aspx)团队正式声明他们还没有实现 C++11 的核心特性“Expression SFINAE”。但是， VC++ 编译器接受从[http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2008/n2634.html](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2008/n2634.html)复制的以下代码示例。

示例 1：

```
template <int I> struct A {};

char xxx(int);
char xxx(float);

template <class T> A<sizeof(xxx((T)0))> f(T){}

int main()
{
    f(1);
} 
```

示例 2：

```
struct X {};
struct Y 
{
    Y(X){}
};

template <class T> auto f(T t1, T t2) -> decltype(t1 + t2); // #1
X f(Y, Y);  // #2

X x1, x2;
X x3 = f(x1, x2);  // deduction fails on #1 (cannot add X+X), calls #2 
```

**我的问题是：什么是“表达 SFINAE”？**

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-09-29T16:10:34.210

我认为，您链接的论文中对表达式 SFINAE 进行了很好的解释。这是关于表达式的[SFINAE 。](http://en.wikipedia.org/wiki/Substitution_failure_is_not_an_error)如果里面的表达式`decltype`无效，那么，从重载的 VIP 休息室踢掉这个函数。您可以在此答案的末尾找到规范性措辞。

关于 VC++ 的注释：他们没有完全实现*它*。在简单的表达式上，它可能有效，但在其他表达式上，它不会。有关失败的示例，请参阅[此答案](https://stackoverflow.com/a/6194623/500104)的评论中的讨论。为简单起见，这是行不通的：

```
#include <iostream>

// catch-all case
void test(...)
{
  std::cout << "Couldn't call\n";
}

// catch when C is a reference-to-class type and F is a member function pointer
template<class C, class F>
auto test(C c, F f) -> decltype((c.*f)(), void()) // 'C' is reference type
{
  std::cout << "Could call on reference\n";
}

// catch when C is a pointer-to-class type and F is a member function pointer
template<class C, class F>
auto test(C c, F f) -> decltype((c->*f)(), void()) // 'C' is pointer type
{
  std::cout << "Could call on pointer\n";
}

struct X{
  void f(){}
};

int main(){
  X x;
  test(x, &X::f);
  test(&x, &X::f);
  test(42, 1337);
} 
```

使用 Clang，这会输出预期的结果：

> 可以用引用
> 调用 可以用指针
> 调用 不能调用

使用 MSVC，我得到......好吧，编译器错误：

```
1>src\main.cpp(20): error C2995: ''unknown-type' test(C,F)' : 函数模板已经定义
1> src\main.cpp(11) : 见“测试”声明

```

GCC 4.7.1 似乎也不能胜任这项任务：

```
source.cpp: 代替 'template decltype ((c.*f(), void())) test(C, F) [with C = X*; F = 无效 (X::*)()]':
source.cpp:29:17: 从这里需要
source.cpp:11:6: 错误：不能将成员指针“f”应用到“c”，它是非类类型“X*”
source.cpp: 代替 'template decltype ((c.*f(), void())) test(C, F) [with C = int; F = int]'：
source.cpp:30:16：从这里需要
source.cpp:11:6：错误：“f”不能用作成员指针，因为它是“int”类型

```

表达式 SFINAE 的一个常见用途是在定义特征时，例如检查一个类是否具有某个成员函数的特征：

```
struct has_member_begin_test{
  template<class U>
  static auto test(U* p) -> decltype(p->begin(), std::true_type());
  template<class>
  static auto test(...) -> std::false_type;
};

template<class T>
struct has_member_begin
  : decltype(has_member_begin_test::test<T>(0)) {}; 
```

[活生生的例子。](http://liveworkspace.org/code/45043173e3b62ee33deaeec3e609516a)（令人惊讶的是，它在 GCC 4.7.1 上再次起作用。）

另请参阅[我的这个答案](https://stackoverflow.com/a/9154394/500104)，它在另一个环境中使用相同的技术（也就是没有特征）。

* * *

规范性措辞：

`§14.8.2 [temp.deduct]`

> p6**在模板实参推导过程中的某些点，有必要采用一个使用模板形参的函数类型，并将这些模板形参替换为相应的模板实参。**当任何显式指定的模板参数被替换为函数类型时，这在模板参数推导的开头完成，并且**在模板参数推导结束时，当任何从默认参数推导或获得的**模板参数被替换时再次完成。
> 
> p7**替换发生在**函数类型和模板参数声明中使用的所有类型和表达式中。**表达式不仅包括常量表达式**，例如出现在数组边界或作为非类型模板参数的常量表达式，还包括**在**、和其他允许非常量表达式的上下文中的**通用表达式**（即非常量表达式） 。 **`sizeof`**`decltype`****
> 
>  **p8 如果替换导致无效的类型或表达式，则类型推导失败。无效类型或表达式是如果使用替换参数编写的格式错误的类型或表达式。[...]**

# android - Android 的免费专辑封面 API？

> ID：12654068
> 
> 赞同：2
> 
> 时间：2012-09-29T15:37:19.763
> 
> 标签：android, albumart

我正在为 Android 创建一个音乐播放器。我想提供下载歌曲专辑封面的功能。

我正在寻找一种 API，它提供适合 android 设备大小的图像，这样它们就不会占用太多空间。

到目前为止，我偶然发现了**Discogs**，但它们似乎缺乏文档。

请建议。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T17:36:16.723

Discogs 工作正常。有速率限制，但并不太低。

还可以看看[MusicBrainz](http://musicbrainz.org/)和[Cover Art Archive](http://coverartarchive.org/)的组合，它一直在稳步增长（在撰写本文时，大约 34% 的 MusicBrainz 版本都有 CAA 艺术品）。这往往比 Discogs 的艺术质量更高。

最后，您可以通过[DBpedia](http://dbpedia.org/About)使用 Wikipedia 。

# php - 反正有没有最小化sql查询结构？

> ID：12654069
> 
> 赞同：-1
> 
> 时间：2012-09-29T15:37:43.683
> 
> 标签：php, mysql

> **可能重复：**
> [PHP 文件无法输入部分代码](https://stackoverflow.com/questions/11575531/php-file-cannot-enter-some-part-of-code)

我正在建立一个新闻网站，我有一个函数文件，用于所有函数，但几乎所有函数的制作方式都与以下示例相同：

```
function one(){
$query  = "SELECT * FROM table WHERE id='$id'....";
$result = mysql_query($query);
while($row=mysql_num_rows($result))
{echo "$row[data]";}  } 
```

所以，基本上有很多功能可以用于不同的目的，但具有与上面相同的模板，所以，为了节省时间，我在想是否可以编码，简化 5 行？一个具有如下功能的：

```
function(something here, and here){then the result here?} 
```

因为唯一可能与第一个代码不同的是：选择、表名、id 和 $row[data]，如果我将它们分配给变量并且其余结构将保持原样，一切都将保持不变在一个函数中：

检查这个想法。

```
function simplify() {

$query = "$crud * FROM $table WHERE id= '$id' ";
$result = mysql_query($query);
while($row=mysql_fetch_array($result)) {echo "$row[data]";}

} 
```

所以任何时候，我需要创建第一个代码，我可以这样做

```
echo simlify(and here would be table name, id, select, create, update...) {

and here the result} 
```

很抱歉，问这个复杂的问题，或者复杂地问，但是如果有人对我在说什么有任何想法，我需要你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T15:52:16.073

这个怎么样，对于一个简单的数据库调用：

```
$db = new DBAdapter(array('host' => 'localhost'));
$results = $db->Select('mytable')->Where('id > 2')->Execute(); 
```

您可以通过构建自己的数据库类来实现这一点。将类放在一个单独的文件中并多次重复使用。

```
class DBAdapter extends PDO
{
  public function __construct( array $params)
  {
     // construct the connection
  }

  public function Select ($table)
  {
    // do stuff for a table select
    return $this;
  }

  public function Count ($table)
  {
    // do stuff for a table count
    return $this;
  }

  public function Where ($condition)
  {
    // do stuff for a where
    return $this;
  }

  public function Execute ()
  {
    // execute stuff
    return $result;
  }
} 
```

# javascript - Javascript 验证帮助 - 输入必须等于 Blue 的值

> ID：12654070
> 
> 赞同：1
> 
> 时间：2012-09-29T15:37:53.840
> 
> 标签：javascript, forms, validation, input

我的验证适用于空字段。但是，我想知道如何检查输入字段的值，如果不正确则返回 false。

用户必须输入单词“Blue”来填写表格。

**输入**

```
<input type="text" id="formcheck" class="contact" maxlength="255" /> 
```

**当前验证检查**

> if (f. formcheck.value != 'Blue') { alert('请输入正确的单词。') f. formcheck.focus() 返回 false；}

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T15:48:48.453

示例代码，我只使用 jquery 进行点击绑定：

```
<input type="text" id="formcheck" class="contact" maxlength="255" value="Blue"/>
<input type="button" id="clickB" value="click me"> 
```

​</p>

```
$("#clickB").click(function(){
   if (document.getElementById('formcheck').value != 'Blue') {
       alert('Please enter the correct word.');
       document.getElementById('formcheck').focus();
       return false;
   }
}) 
```

​jsfiddle [示例](http://jsfiddle.net/t6yYp/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T17:38:01.643

语法错误，您忘记了`;`每条语句的添加结尾。

```
if (f.formcheck.value != 'Blue') {
    alert('Please enter the correct word.')
    f.formcheck.focus()
    return false
} 
```

* * *

或以您的方式使用，但添加`;`

```
if (f.formcheck.value != 'Blue') { alert('Please enter the correct word.');  f.formcheck.focus();  return false; } 
```

# objective-c - 如何定位静态按钮和 iPhone 5

> ID：12654072
> 
> 赞同：0
> 
> 时间：2012-09-29T15:38:01.583
> 
> 标签：objective-c, ios

我正在开发一个应用程序，其中一个视图下方有 12 个按钮和标签。它们直接放置在故事板上。我想确保它们在 iPhone 5 中得到正确的重新定位。我尝试的解决方案只是取消选择所有按钮的自动调整大小中的所有行。现在，当我在 iphone 5 上尝试时，按钮会调整大小。如果我拉伸情节提要并移动在较小屏幕上运行时会弄乱的按钮，则会出现问题。所以我只能将它们放在较小的屏幕上，然后它似乎可以工作。应用程序不旋转。我想知道这是否是一个好的解决方案，或者对于这种情况有更好的解决方案。我希望该应用程序支持 iOS 5+

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T21:27:58.303

如果您希望布局适用于不同的屏幕尺寸，您应该熟悉 iOS 6 中新的基于约束的布局方案。可以在[http://www.youtube.com/watch?v观看有关该主题的 WWDC 视频=Dkr9eKxlMAk&feature=player_detailpage](http://www.youtube.com/watch?v=Dkr9eKxlMAk&feature=player_detailpage)。

本质上，您将在 iOS 5 之前使用旧的 struts 和 springs 系统，并有条件地为 iOS 6 使用新方案。（iPhone 5 不会运行 6 之前的任何 iOS 版本。）

# jquery - json inArray 总是返回 -1

> ID：12654075
> 
> 赞同：2
> 
> 时间：2012-09-29T15:38:04.550
> 
> 标签：jquery, arrays, json, push

我想检查是否`"foo"`存在于名为的数组中`"Array"`，但`$.inArray`总是返回`-1`。为什么它会返回`-1`，我该如何解决？

这是我在[jsFiddle](http://jsfiddle.net/RochesterFox/B5yF2/4/)中的代码：

```
var Array = []
Array.push({'test':'fuu','url':'sdfsdfsdf'});
Array.push({'test':'qsgbfdsbgsdfbgsfdgb','url':'sdfssffbgsfdbgdfsdf'});
if($.inArray('fuu',Array) != -1) alert('present');
else alert('absent');
alert($.inArray('fuu',Array)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T15:41:47.953

`'fuu'`实际上不在数组中，它是数组内部对象的值。恐怕您需要更复杂的检查。我也不会`Array`用作变量名，因为那是`Array`对象的名称，但显然它不是保留字？没有把握。

```
var arr = [];
...
var found = false;
$.each(arr, function () {
   if (this.test === 'fuu') {
      found = true;
      return false;
   }
});
if (found) alert('present'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-29T15:44:54.867

您正在将哈希推入数组

```
Array.push({'test':'fuu','url':'sdfsdfsdf'}); 
```

然后测试一个字符串。

```
$.inArray('fuu',Array) 
```

如果您添加 Array.push('fuu') 那么您的当前测试将起作用。

# android - Cocos2d-x android 无法解析 coscos2dx 库

> ID：12654078
> 
> 赞同：12
> 
> 时间：2012-09-29T15:38:33.687
> 
> 标签：android, macos, cocos2d-x

我从 macOSX xcode4.5 开始。
我试图教程。

使用cocos2dx，完成macOSX的构建，
问题出现在android源码中。

没有描述 cocos2dxActivity 的内容。
所以，org.cocos2dx.lib 不是其他文件。

安卓没有运行。

我使用ndk-r8。会有什么问题？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-05T09:40:23.377

在 cocos2d-x 2.0.3 ...Cocos2d-x Lib java 文件只被认为是一个不同的项目所以在 eclipse 中导入那个项目

让它变得简单

1.  首先从这个路径导入eclipse中的项目——cocos2d-2.0-x-2.0.3/cocos2dx/platform/android/java

您将在 Eclipse 中看到 libcocos2dx 项目...保持此项目始终打开，否则您的项目将在库的语法上出错

1.  运行 create-android-project

2.  现在导入您创建的项目并运行（如果您知道 isLibrary 的概念，那么这就是他们现在维护它的方式..）

还有其他信息仅从 Eclipse 运行 build-native.sh，右键单击 Project ->C/C++ Build 取消选中 Use Default Build COMmand 并添加以下 bash ${workspace_loc:/YourProjName}/build_native.sh NDK_DEBUG=1 V=1

祝你好运..如果有任何问题，请随时提问

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-15T08:36:08.343

改变

```
import org.cocos2dx.lib.Cocos2dxActivity; 
```

至

```
import android.app.Activity; 
```

和改变

```
extends Cocos2dxActivity 
```

至

```
extends Activity 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-29T23:12:42.250

你可以复制你的游戏文件夹的proj.android文件夹旁边的文件夹**（cocos2d-2.0-x-2.0.3/cocos2dx/platform/android/java）**，然后在eclipse中和游戏一起导入。导入这两个项目后，打开游戏的属性，然后将**libcocos2dx**添加为库，然后单击应用并构建。

我已经尝试过这些并为我工作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-30T23:19:05.877

我自己弄清楚..

使用 cocos2dx 2.0.3 (2012-09-26)，
eclipse source:org.cocos2dx.lib 没有创建。
（org.cocos2dx.lib 仅创建 cocos2dxActivity。cocos2dxActivitiy
没有描述内容。

cocos2dxActivity：
包org.cocos2dx.lib；
导入android.app.Activity；
公共类 Cocos2dxActivity 扩展 Activity{
}
)

因此，
使用 cocos2dx 2.0.2 (2012-08-30)，eclipse build ok。

我不明白是什么问题...

# java - Java swing 组件被冻结

> ID：12654080
> 
> 赞同：0
> 
> 时间：2012-09-29T15:38:37.057
> 
> 标签：java, swing, netbeans, client-server

我正在 netbeans 中创建一个服务器-客户端应用程序项目。我使用 netbeans gui builder 在我的 JFrame 上制作了一些 Jpanel 和其他一些东西（按钮、文本字段、文本区域、菜单）。当我按下新的服务器按钮时，整个 JFrame 及其所有组件都被冻结，但服务器-客户端部分正在后台工作。我认为线程或其他东西有问题，但我还没有真正理解我应该做什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-29T15:40:33.497

问题很可能是您的服务器-客户端代码实际上***不在***后台工作，而是在 Swing 事件线程上工作。您可以使用[SwingUtilities](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingUtilities.html)方法对此进行测试：`SwingUtilities.isEventDispatchThread()`

还：

*   您是否使用 SwingWorker 来做后台工作？
*   您是否正在使用后台线程进行任何`join()`调用？
*   您在等待 SwingWorkers`get()`方法吗？

您的代码详细信息可能会帮助我们为您提供更具体的建议。要了解您应该做什么，请阅读[课程：Swing 中的并发性](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)

# iphone - 如何在 iOS 照片中设置自定义相册的封面？

> ID：12654083
> 
> 赞同：4
> 
> 时间：2012-09-29T15:39:18.437
> 
> 标签：iphone, ios, ios5, uiimagepickercontroller, alassetslibrary

本文是创建自定义相册的绝佳教程[。](http://www.touch-code-magazine.com/ios5-saving-photos-in-custom-photo-album-category-for-download/)但是，它仅将第一张照片设置为专辑封面。我想将最新保存的照片设置为封面，就像相机胶卷一样。有没有 API 可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T11:50:24.860

没有自定义方法可以做到这一点。相册封面是自动设置的，代表分配给相册的最后一张照片。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-08-30T14:22:40.407

进入你要设置封面图片的iOS相册。长按要设置为封面的图像并滑动（移动）使其成为相册的第一张图片。第一张照片将成为专辑的封面照片。

# c# - 如何使用空格将另一个变量插入字符串？C＃

> ID：12654084
> 
> 赞同：2
> 
> 时间：2012-09-29T15:39:52.593
> 
> 标签：c#, string, text

我知道这是一个非常愚蠢和基本的问题，但我真的不知道其他方法可以做到这一点。

现在我知道我可以在文本中插入空格，如下面的示例。

```
int num = some numerical value;
status.Text = "Successfully Deleted"+ " " + num + " " + "Files"; 
```

但是，我想知道是否有更简洁的方法来做到这一点。我总是这样做，但我想知道是否有更简单/更整洁的方法。谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-29T15:41:00.513

使用字符串类：

```
int num = 5;
status.Text = String.Format("Successfully Deleted {0} Files", num); 
```

使用 StringBuilder 类：

```
int num = 5;
StringBuilder sb = new StringBuilder();
sb.AppendFormat("Successfully Deleted {0} Files", num);
status.Text = sb.ToString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T17:26:16.517

更多的选择：

```
status.Text = "Successfully Deleted " + num + " Files"; 
```

或者：

```
public static string SurroundWithSpaces(this object o)
{
    return " " + o + " ";
}
status.Text = "Successfully Deleted" + num.SurroundWithSpaces() + "Files"; 
```

# ios - UITextField 没有得到键盘输入

> ID：12654085
> 
> 赞同：10
> 
> 时间：2012-09-29T15:39:55.350
> 
> 标签：ios, keyboard, uitextfield, ios6

我在[SVProgressHUD](https://github.com/barrettj/SVProgressHUD)下的 UITextField 中输入文本时遇到问题（基本上是一个带有全屏透明 UIWindow 的 UIView 和一些显示文本和自定义绘制进度条的 UIView 子视图）。

我的问题是 UITextField 显示闪烁的光标并且键盘显示，但是当我点击一个键时，文本字段中没有输入任何内容。我只看到光标的闪烁中断就像平常一样。有趣的是，后退（删除）键有效（它确实删除了 UITextView 中的最后一个字母），但没有任何其他键。

我正在使用 iOS 6。

任何帮助将不胜感激。

编辑：当没有显示 SVProgressHUD 时，相同的 UITextField 工作正常。这让我觉得它与第一响应者有关，但我已经尝试调用`resignFirstResponder`SVProgressHUD 的每个窗口和子视图，但它仍然不起作用。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-09-29T18:53:08.370

我终于找到了问题： SVProgressHUD`makeKeyAndVisible`在初始化时调用，因为它想接收重新定位的键盘通知。我查了一下“关键窗口”实际上是什么，发现：

> ...按键窗口响应用户输入...

现在，由于 SVProgressHUD 的 UIWindow 是 keyWindow，我的另一个包含 UITextField 的窗口没有得到用户输入。

我终于调用`makeKeyWindow`了 AppDelegate 的窗口，一切正常。

我希望这可以帮助任何有类似问题的人。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-30T22:05:47.017

在显示之前调用`resignFirstResponder()`以关闭键盘`SVProgressHUD`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-29T15:46:22.687

你实现了这个方法吗......

```
- (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text 
```

...过滤掉任何不需要的字符？如果是这样，也许它对过滤有点过分热心？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-13T05:39:30.270

对我来说，这是可行的。

我对我的文本字段委托方法进行了更改，然后它起作用了。

```
if ([textField isEqual:selectBankName])
{
   return No;
}
else if ([textField isEqual:enterAmountTextfield])
{
    return YES;
}

return NO;
} 
```

1.  为文本字段设置委托
2.  确保文本字段 userInteraction 已启用。并且

3.  最后请检查您的文本字段委托方法。

# ios - UIView 不需要它的 UIViewController 吗？

> ID：12654088
> 
> 赞同：1
> 
> 时间：2012-09-29T15:40:16.863
> 
> 标签：ios, cocoa-touch, memory-management, uiview, uiviewcontroller

在 Instruments 中玩耍时，我注意到了一些我不明白的东西。我创建了几个`UIViewController`s 并将它们`view`的 s 添加到另一个`UIView`：

```
CustomVC *vc = [[CustomVC alloc] initWithCustomInitializer:someParameter];
[mainView addSubview:vc.view]; 
```

`init`通过在其and中记录 CustomVC 的内存地址`dealloc`，我看到它`vc`几乎立即被释放，尽管视图仍然在屏幕上并且一切正常。

`UIView`不一定需要它的控制器吗？还是我误解了其他事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T15:44:13.260

UIView 无论如何都不需要 ViewController。发生的事情是您可能没有保留指向 VC 的指针。指向视图的指针由 mainView 保留。此外，无论您是否使用 ARC。如果要将对象保留在内存中，则需要对其具有强（ARC）或保留属性。不是为了让你感到困惑。它不一定需要是您的自定义子类。假设您正在使用 UINavigationController。例如，您可以在应用程序委托中创建一个控制器并将其推送到 UINavigation 控制器。只要有东西，您就不需要保留指向它的指针。这是非常根本的。您需要清楚内存管理我认为我无法在这里充分解释它。我强烈建议您查看有关 iOS 开发的斯坦福课程。 [http://itun.es/ru/_zEGD](http://itun.es/ru/_zEGD)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T15:46:52.993

A`UIView`不/不应该保留其父级 (the `UIViewController`)，因此如果您放弃对 the`UIViewController`的引用而只保留对 the 的引用，则`UIView`不会保留对它的强引用，它将被释放。

对其控制器的弱引用`UIView`将自动设置为零。

不过，是否`UIView`需要其“丢失”的控制器来完成其工作是另一回事，并且完全取决于`UIView`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T15:58:05.197

一次应该只有一个 UIViewController。添加属于视图控制器的视图是不好的做法。

要回答您的问题，由于上述约束（或 Apple 的设计决定），该视图现在可能由另一个视图控制器保留，并从 vc.

# python - 字符串数组到 numpy.amax

> ID：12654093
> 
> 赞同：2
> 
> 时间：2012-09-29T15:40:53.807
> 
> 标签：python, arrays, numpy

在 Python 的标准[`max`](http://docs.python.org/library/functions.html#max)函数中（我也可以传入一个关键参数）：

```
s = numpy.array(['one','two','three'])
max(s) # 'two' (lexicographically last)
max(s, key=len) # 'three' (longest string) 
```

使用更大的（多维）数组，我不能再使用`max`，所以我尝试使用[`numpy.amax`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.amax.html)，但是我似乎无法`amax`与字符串一起使用......

```
t = np.array([['one','two','three'],['four','five','six']])
t.dtype # dtype('|S5')
numpy.amax(t, axis=0) #Error! Hoping for: [`two`, `six`]

Traceback (most recent call last):
    File "<stdin>", line 1, in <module>
    File "/usr/lib/python2.7/dist-packages/numpy/core/fromnumeric.py", line 1833, in amax
        return amax(axis, out)
TypeError: cannot perform reduce with flexible type 
```

是否可以使用`amax`（*我使用不正确！*），还是有其他`numpy`工具可以做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-29T15:48:27.437

与其将字符串作为可变长度数据存储在`numpy`数组中，不如尝试将它们存储为 Python `object`s。Numpy 会将这些视为对原始 Python 字符串对象的引用，然后您可以像预期的那样对待它们：

```
t = np.array([['one','two','three'],['four','five','six']], dtype=object)
np.min(t)
# gives 'five'
np.max(t)
# gives 'two' 
```

请记住，这里的`np.min`and`np.max`调用按字典顺序对字符串进行排序——所以“二”确实出现在“五”之后。要更改比较运算符以查看每个字符串的长度，您可以尝试创建一个`numpy`形式相同的新数组，但包含每个字符串的长度而不是其引用。然后，您可以`numpy.argmin`对该数组进行调用（它返回最小值的索引）并在原始数组中查找字符串的值。

* * *

示例代码：

```
# Vectorize takes a Python function and converts it into a Numpy
# vector function that operates on arrays
np_len = np.vectorize(lambda x: len(x))

np_len(t)
# gives array([[3, 3, 5], [4, 4, 3]])

idx = np_len(t).argmin(0) # get the index along the 0th axis
# gives array([0, 0, 1])

result = t
for i in idx[1:]:
    result = result[i]
print result
# gives "two", the string with the smallest length 
```

# java - 输入数字到数组java

> ID：12654095
> 
> 赞同：0
> 
> 时间：2012-09-29T15:41:24.813
> 
> 标签：java

我正在做一个 Java 活动来打印用户输入的数字，这是我的代码：

```
System.out.print("Enter How Many Inputs: ");
int num1 = Integer.parseInt(in.readLine());
for (int x = 1; x<=num1;x++){
    for (int i = 0 ; i<num1;){
        System.out.print("Enter Value #" + x++ +":");
        int ctr1 =Integer.parseInt(in.readLine());
        i++;
    }
} 
```

如何打印所有输入的数字？这是我的代码的结果：

```
Enter How Many Inputs: 5
Enter Value #1:22
Enter Value #2:1
Enter Value #3:3
Enter Value #4:5
Enter Value #5:6 
```

如何将所有这些数字打印为数组。22,1,3,5,6

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T15:44:17.347

创建一个长度为 num 的 int[] 数组。在每次迭代中，获取用户输入并将其放入数组中指定索引处，然后跳出 while 循环。最后通过迭代打印数组元素。

```
 Scanner scan = new Scanner(System.in);
        System.out.println("enter num of values: ");
        int [] arr = new int[scan.nextInt()];
        for(int i=0;i<arr.length; i++) {
            scan = new Scanner(System.in);
            System.out.println("please enter a value: ");
            while(scan.hasNextInt()){
            int x = scan.nextInt()
                    ;
            arr[i]= x;
            break;
            }

        }
        for(int i:arr){
            System.out.print(i);
        } 
```

输出：输入值的数量：5 请输入值：22 请输入值：2 请输入值：3 请输入值：5 请输入值：6 22 2 3 5 6

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T15:46:18.350

```
System.out.print("Enter How Many Inputs: ");
int num1 = Integer.parseInt(in.readLine());
int arr[] = new int[num1];

for (int i = 0; i<num1; i++)
{
    System.out.print("Enter Value #" + (i + 1) + ":");
    arr[i] =Integer.parseInt(in.readLine());
} 
```

我想这应该这样做...... **未测试**

* * *

**印刷**

```
for(int i = 0; i < arr.length; i++)
    System.out.println(arr[i]); 
```

* * *

**排序**

```
import java.util.Arrays; 
```

代码块内部

```
Arrays.sort(arr); 
```

# java - 在 asynctask 之前显示对话框

> ID：12654096
> 
> 赞同：0
> 
> 时间：2012-09-29T15:41:33.453
> 
> 标签：java, android, multithreading, android-asynctask, progressdialog

我试图在异步任务开始工作之前显示一个“加载”对话框。使用以下代码会发生什么，直到所有异步任务完成他的操作，对话框才会显示，对话框仅在最后提示。

这是代码：

```
 @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_map);
    loadMap();
    progressBar = ProgressDialog.show(Map.this, "", 
            "Loading. Please wait...", true);

    //firing the asynctask here
} 
```

asynctask 正在执行相当繁重的操作，大约需要 10 秒才能看到布局，这就是为什么我想通过“加载”对话框提示用户。但由于某种原因，用户只能在 asynctask 操作结束时看到它。

我应该怎么办？

**编辑：**忘了提到在 onProgressUpdate 我正在做一些 UI 操作（将叠加层添加到地图视图）。这就是为什么用户界面可能会冻结的原因。但我只想知道如何在之前显示加载对话框，我不在乎 UI 在“加载”对话框显示后是否冻结。其实我很在意，但我不知道是否有更好的解决方案。

**EDIT2：**加载图功能：

```
 public void loadMap()
{

        mapView = (TapControlledMapView) findViewById(R.id.mapview);
        mapView.setBuiltInZoomControls(true);
        mapController = mapView.getController();
        mapController.animateTo(new GeoPoint((int)(47.975 * 1E6), (int)(17.056 * 1E6)));
        mapView.setOnSingleTapListener(new OnSingleTapListener() {      
            @Override
            public boolean onSingleTap(MotionEvent e) {
                itemizedOverlay.hideAllBalloons();
                return true;
            }
        });
        myLocationOverlay = new FixedMyLocationOverlay(this, mapView);
        mapView.getOverlays().add(myLocationOverlay);
        mapView.invalidate();
        zoomToMyLocation();

        editText = (EditText)findViewById(R.id.search);
        editText.setOnFocusChangeListener(new OnFocusChangeListener() {

            @Override
            public void onFocusChange(View v, boolean hasFocus) {
                if(hasFocus)
                onSearchRequested();
                EditText editText = (EditText)v;
                editText.clearFocus();

            }
        });

} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-29T16:20:14.447

您是否尝试过进入`loadMap()`asynctask ？

# xcode4.3 - 如何创建条件转场

> ID：12654097
> 
> 赞同：1
> 
> 时间：2012-09-29T15:41:33.433
> 
> 标签：xcode4.3

我使用情节提要在 Xcode 中创建了一个项目。我使用单击和拖动方法在两个视图控制器之间创建了一个 segue，并带有一个按钮。但是，为了使 segue 发生，我希望满足某些条件。所以我已经将按钮编码为 IB 动作，并在实现文件中编写了条件代码。如果不满足条件，则会弹出警报视图，我不希望发生转场。但如果条件得到满足，那么我确实希望继续发生。

有没有办法以编程方式命令 segue 在 IB 动作函数中发生或不发生？或者任何其他方式来获得相同的结果？

谢谢！任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T01:42:22.383

我找到了一个很好的解决方案，有人发布了......创建一个源自原始视图控制器的状态栏的 segue，给它一个标识符，然后在操作按钮中添加此代码：

```
[self performSegueWithIdentifier:@"identifierName" sender:sender]; 
```

效果很好！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T16:01:04.767

您可以通过继承 UIStoryboardSegue 并将 segue 样式与属性检查器中的类名一起设置为“自定义”来创建自定义 segue。然后您可以覆盖 perform 方法，以便在执行 segue 之前查看您的条件是否满足。例如

```
- (void) perform {
    if (...) {
        [[self sourceViewController] presentModalViewController:[self destinationViewController] animated:YES];
    }
} 
```

另请参阅文档[http://developer.apple.com/library/IOs/#featuredarticles/ViewControllerPGforiPhoneOS/CreatingCustomSegues/CreatingCustomSegues.html](http://developer.apple.com/library/IOs/#featuredarticles/ViewControllerPGforiPhoneOS/CreatingCustomSegues/CreatingCustomSegues.html)

或者，只要不满足您的条件，您就可以禁用该按钮。也许这是更好的方法，因为从那时起，用户有一个视觉指示表明 segue 不会发生，而不是在按下按钮后得到负面反馈。

# vim - 如何从 cygwin 运行 windows gvim？

> ID：12654100
> 
> 赞同：16
> 
> 时间：2012-09-29T15:42:08.703
> 
> 标签：vim, cygwin

我无法从 cygwin 运行 gvim。当我尝试使用以下命令打开一个新文件时：

> gvim 文件名 gvim 打开一个“无名”的文件并显示错误：

```
Error detected while processing command line
E492: Not editor command: C:\cygwin\home\chandan\l
Press enter or type command to continue 
```

更大的问题是我无法打开路径中的现有文件

`>which gvim`节目`/usr/bin/gvim`

我已经放`alias gvim=/cygdrive/c/Program\Files\(x86\)/Vim/vim73/gvim.exe`了

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-30T12:38:17.690

我为此编写了[cyg-wrapper.sh](https://github.com/LucHermitte/Bash-scripts#cyg-wrappersh)。

它支持：

*   符号链接
*   不能被解释为路径名的选项（参见`-c`gvim，或任何以减号开头的标志）。

换句话说，它使我们能够输入：

```
 gvim /etc/profile -c /PS1 -c "echo 'correctly opened'"
# or even:
  cd ~/tmp ; ln -s ~/bin/cyg-wrapper.sh 
  gvim -d http://hermitte.free.fr/cygwin/cyg-wrapper.sh cyg-wrapper.sh

  explorer -e
  explorer "$vim"
  explorer http://hermitte.free.fr/ 
```

注意：我在 .profile 中使用以下函数通过 cyg-wrapper.sh 运行 gvim

```
gvim() {
    opt=''
    if [ `expr "$*" : '.*tex\>'` -gt 0 ] ; then
    opt='--servername LATEX '
    fi
    cyg-wrapper.sh "C:/Progra~1/Edition/vim/vim73/gvim.exe" --binary-opt=-c,--cmd,-T,-t,--servername,--remote-send,--remote-expr --cyg-verbose --fork=2 $opt "$@"
} 
```

* * *

**编辑：**目前（2014 年 9 月 26 日，使用 Vim 7.4），Windows gVim 用于`C:\Windows\gvim.bat`从命令行启动 gVim。用这个脚本替换函数`gvim.exe`中的路径`gvim()`允许启动 gvim 而无需更改路径以匹配当前的 Vim 版本（实际上可能在`Progra~2`）；但是，它似乎也打开了一个多余的`cmd.exe`窗口。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-04-03T19:27:48.343

找到了这个帖子，我发现[jens](https://stackoverflow.com/users/648658/jens)的答案是不可接受的。我们不是要求被告知不要这样做。我不喜欢其他答案，或者总是有一些怪癖，比如未使用设置或弹出额外的命令行窗口。我做了一些挖掘，这对我有用。没有额外的命令行框，它使用我正确的 gvim 设置。

```
alias gvim='HOME=/cygdrive/p/ cygstart /cygdrive/c/Program\ Files\ \(x86\)/Vim/vim74/gvim.exe' 
```

您只需将 HOME 更改为您自己的。要找出放在那里的内容，从 windows 运行 gvim，然后输入 ":echo $HOME" 并按回车键，在我的情况下它显示 P:\ 以便转换为 /cygdrive/p/

此外，如果您的 gvim.exe 位于不同的目录/版本中，您需要进行调整。

现在，当我在 cygwin 命令提示符下键入“gvim script.sh”时，它会启动带有文件的 gvim，一切都很好！

***更新***

我找到了一种更好的方法来做到这一点。使用别名占用了我运行 gvim 的会话，我希望它作为一个单独的进程启动，使用“gvim &”是不雅的，因为它在启动时列出作业编号，并在完成时显示“完成”行。我太挑剔了，所以我想出了如何通过使用函数来整理所有内容。

只需将其添加到您的 .bash_functions 文件中，它建立在上一节关于主目录和反斜杠使用的基础上。

```
gvim() {
   ORIGHOME=$HOME
   HOME=/cygdrive/p/
   /cygdrive/c/Program\ Files\ \(x86\)/Vim/vim74/gvim.exe $1 & disown
   HOME=$ORIGHOME
} 2>/dev/null 
```

***更新 2 给 babun 用户！***

好的，自从最初与这个搏斗后，我最终放弃了原来的 cygwin 安装，转而使用 babun，对于那些想要在 Windows 中没有完全虚拟化的 linux 功能的人来说，这似乎是一个不那么麻烦的设置。当然，我的 gvim 启动脚本坏了，我必须在我的 .zshrc 文件中执行以下操作（babun 使用 zsh，起初我拒绝并将其切换到 bash，但后来我认为他们一定有理由，他们做到了，我喜欢它）

```
gvim() {
   OLD_HOME=$HOME
   OLD_VIMRUNTIME=$VIMRUNTIME
   export HOME=/cygdrive/c/Users/gmitchell/
   export VIMRUNTIME="C:\Program Files (x86)\VIM\vim74"
   TARGET=$(cygpath -w $1)   
   (/cygdrive/c/Program\ Files\ \(x86\)/Vim/vim74/gvim.exe $TARGET &)
   export HOME=$OLD_HOME
   export VIMRUNTIME=$OLD_VIMRUNTIME
} 
```

*注意：周围的弧形大括号 ( ) 可防止作业 ID 弄乱您的干净外壳，并且您不再需要“拒绝”

PS 现在唯一剩下的烦恼是，在您启动的所有 gvim 实例都关闭之前，您无法“退出” babun shell。也许有人可以自己弄清楚。我试过了。当您键入 exit 时，它会挂在那里，直到您退出所有 gvim。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-09-29T19:03:53.270

帮自己一个忙，不要试图从 cygwin 运行 windows gvim。环境变量集可能完全不同，反斜杠目录分隔符、文件名中的空白、无法理解 /cygwin 路径的痛苦使这成为徒劳的练习。

那么，什么？安装 cygwin 版本的 gvim 并忘记所有这些问题。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-06-04T19:06:42.773

这是您需要做的所有事情：

```
alias gvim="run.exe /cygdrive/c/Programming/Tools/Vim/vim74/gvim.exe" 
```

也适用于记事本++，如下所示：

```
alias np="run.exe /cygdrive/c/Programming/Tools/Notepad++/notepad++.exe" 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-04-18T00:46:09.630

由于 $SHELL var，我遇到了同样的问题

所以，我很喜欢这样

`alias gvim='cmd /c "set SHELL=cmd & start gvim"'`

它对我有用，也许这对你也有帮助。

也许你想为 vim 使用相同的别名。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-08-13T07:34:00.500

我把以下函数放在我的`.bashrc`：

```
function gvim
{
    GVIM_CMD=/cygdrive/c/path/to/gVimPortable.exe
    if [[ -z "$1" ]]
    then
      $GVIM_CMD
    else
      $GVIM_CMD `cygpath -w $1`
    fi
} 
```

这让我可以从任何地方启动 gVim。

它也适用于带有空格的文件......

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-01-22T19:03:36.683

[这是对low351](https://stackoverflow.com/users/3310901/low351)的回答的起飞。我对在 cygwin 终端中更改 HOME 感到不满意，因为我在本地将其用于 cygwin HOME，而不是我的 Windows 主页。但是 gvim 是使用 Windows HOME 设置的。我将此添加到我的 .zshrc 中：

```
# run windows gvim from command line
gvim() {
   local OLD_HOME=$HOME
   HOME=/cygdrive/c/Users/jason/
   local TARGET=$(cygpath -w $1)
   /cygdrive/c/Program\ Files\ \(x86\)/Vim/vim74/gvim.exe $TARGET & disown
   HOME=$OLD_HOME
} 2>/dev/null 
```

真的，只是存储和恢复 HOME。作为本地，OLD_HOME 在函数返回时消失，因此不会污染环境。如果您正在编辑 cygwin 文件，通过 cygpath -w 运行它会使其成为 windows gvim 可以理解的文件路径。它还允许您使用窗口路径（例如`C:/tmp/foo.txt`），但使用 unix '/' 分隔符，因此您可以省去`/cygdrive/c`. 我相信这与 bash 完全兼容。这给出了以下输出：

```
> gvim
[2] 5060
> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-04-07T20:58:04.113

由于我已经尝试了所有这些并且遇到了问题，所以我将展示我正在使用的内容。我用 ruby​​ 编写了它，它可以处理我扔给它的所有东西（文件、目录或什么都没有），没有任何错误/弹出窗口/等。

我将它保存为`gvim`~/Dropbox/bin/cygwin/ （在我的 PATH 中）

```
#!/usr/bin/env ruby

args=''
filepath=''
arg=ARGV[0]

if arg
    if File.exist? arg
        if File.file? arg
            args+="--remote-tab-silent "
        end
        filepath=`cygpath -w '#{arg}'`.strip
        filepath="'#{filepath}'"
    end
else
end

exe="'/c/Program\ Files\ \(x86\)/vim/vim73/gvim.exe' #{args} #{filepath}"
spawn exe 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-12-15T17:53:04.437

我刚刚`gvim.bat`将标准 Win32 vim 安装附带的重命名为`gvim`并将其放入 /usr/bin。

我还分享了 Win32 GVim 和 Cygwin VIM 之间的设置，参考这篇文章：

[http://vim.wikia.com/wiki/Synchronize_configuration_to_many_computers](http://vim.wikia.com/wiki/Synchronize_configuration_to_many_computers)

这样我就可以让 Vim 和 Win32 Gvim 使用相同的插件和设置运行。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-10-17T13:04:01.767

似乎主要问题是在运行 Windows gvim 时导出了适合 cygwin 环境的 HOME 和 VIM 变量，导致问题因为 Windows gvim 对 cygwin 一无所知。这修复了它：

```
alias gvim='env -u HOME -u VIM /cygdrive/c/Program\ Files\ \(x86\)/Vim/vim74/gvim.exe' 
```

我将 Windows gvim 设置为许多文件类型的默认应用程序（在 Windows 中），因此 Windows gvim 经常通过`open`别名打开。这修复了该用例：

```
alias open='env -u HOME -u VIM cygstart' 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-08-13T19:58:35.733

这是我用于`~/bin/gvim`. 它就像我`gvim FOO`从“运行”对话框中调用一样运行它（感谢批处理文件被调用`explorer.exe`）。不能很好地使用命令行，但是一个自删除的批处理文件来救援。

```
#!/bin/bash

TEMPFILE_NAME=gvim-`date +%s`-${RANDOM}.bat
TEMPFILE=$TMP/$TEMPFILE_NAME
TEMPFILE_W=`cygpath --windows --absolute --long-name "$TEMPFILE"`
TARGET=

if [ "$1" = "" ] ; then
  TARGET=`cygpath --windows --absolute --long-name "."`
else
  TARGET=`cygpath --windows --absolute --long-name "$@" | tr '\n' ' '`
fi

WIN_GVIM=`where gvim.exe | tr -d '\r\n'`
WIN_GVIM=`cygpath "$WIN_GVIM" --windows --absolute --long-name`

unix2dos > $TEMPFILE  << EOF
start "gvim" "$WIN_GVIM" $TARGET
DEL %~f0
EOF
chmod +x $TEMPFILE

explorer.exe "$TEMPFILE_W" 
```

特别感谢这个技术的[答案](https://stackoverflow.com/a/8282423/129686)`explorer.exe`。

# desire2learn - D2L 如何使用 Rest API 创建论坛主题？

> ID：12654103
> 
> 赞同：1
> 
> 时间：2012-09-29T15:42:47.283
> 
> 标签：desire2learn

使用 D2L Rest API 发送以下块在现有论坛中创建主题：

URL: [POST /d2l/api/le/(D2LVERSION: version)/(D2LID: orgUnitId)/discussions/forums/(D2LID: forumId)/topics/](http://docs.valence.desire2learn.com/res/discuss.html#post--d2l-api-le-%28D2LVERSION-version%29-%28D2LID-orgUnitId%29-discussions-forums-%28D2LID-forumId%29-topics-)

```
{
    "Name" : "Test Forum API",
    "Description" : {
        "Text" : "",
        "Html" : "Test"
    },
    "AllowAnonymousPosts" : true,
    "StartDate" : null,
    "EndDate" : null,
    "IsHidden" : false,
    "UnlockStartDate" : null,
    "UnlockEndDate" : null,
    "RequiresApproval" : false,
    "ScoreOutOf" : null,
    "IsAutoScore" : true,
    "IncludeNonScoredValues" : true,
    "ScoringType" : null,
    "IsLocked" : false,
    "MustPostToParticipate" : true
} 
```

出现错误：INFO：已请求重定向但已禁用 followRedirects 状态代码 302 对象已移至 /d2l/error/404

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T15:12:06.337

请注意，您必须通过 API 来创建新主题的 CreateTopicData 结构不会*对*`RichText`输入的 Description 属性使用复合结构。相反，您必须使用`RichTextInput`复合结构，但略有不同：

```
{
    "Name" : "Test Forum API",
    "Description" : {
        "Content" : "Test",
        "Type": "HTML"
    },
    ...
} 
```

*但是，API 将在output*上传回一个`RichText`结构。

 *使用我们的测试服务，向这样的 URL 发送 POST（假设组织 ID 为 8083，论坛 ID 为 4174）

```
https://myLMShost.edu/d2l/api/le/1.0/8083/discussions/forums/4174/topics/ 
```

我们传入了一个如下所示的 JSON 结构：

```
{'AllowAnonymousPosts': True,
 'Description': {'Content': 'test', 'Type': 'HTML'},
 'EndDate': None,
 'IncludeNonScoredValues': False,
 'IsAutoScore': True,
 'IsHidden': False,
 'IsLocked': False,
 'MustPostToParticipate': True,
 'Name': 'Test Forum API',
 'RequiresApproval': False,
 'ScoreOutOf': None,
 'ScoringType': None,
 'StartDate': None,
 'UnlockEndDate': None,
 'UnlockStartDate': None} 
```

我们的测试服务返回了新的主题帖子，如下所示：

```
{'AllowAnonymousPosts': True,
 'Description': {'Html': 'test', 'Text': ''},
 'EndDate': None,
 'ForumId': 4174,
 'IncludeNonScoredValues': False,
 'IsAutoScore': True,
 'IsHidden': False,
 'IsLocked': False,
 'MustPostToParticipate': True,
 'Name': 'Test Forum API',
 'PinnedPostCount': 0,
 'RatingsCount': 0,
 'RatingsSum': 0,
 'RequiresApproval': False,
 'ScoreOutOf': None,
 'ScoredCount': 0,
 'ScoringType': None,
 'StartDate': None,
 'TopicId': 88569,
 'UnapprovedPostCount': 0,
 'UnlockEndDate': None,
 'UnlockStartDate': None} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T13:17:23.643

发布和重定向不能一起工作。通常环境（负载均衡器或其他网络组件）会自动将所有 http 操作重定向到 https。那么您的客户端库实际上不会遵循 302。

如果启用了 https，您可能想要使用它，并且您可以让 D2L 库生成 https url。

（您可能还希望您正在使用的客户端 http 库遵循重定向，因为在某些情况下 GET 操作可能会被重定向）*

# ruby-on-rails - Rails：如何使用一个表单 file_field 一次上传多个选定的文件？

> ID：12654104
> 
> 赞同：0
> 
> 时间：2012-09-29T15:42:47.447
> 
> 标签：ruby-on-rails

我正在尝试制作一个图像重的网络应用程序，允许您上传多个图像。但是，我不想用一堆`file_field`s 污染我的网站，因为它看起来很丑而且也不方便，因为用户必须像这样一张一张地上传多张图片。有没有办法做到这一点，当您单击 file_field 框时，您可以一次选择/突出显示多个文件并一次全部上传？如果是这样，我将如何定位每个上传的图像以便我可以显示它们中的每一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T15:51:18.303

简短的回答：你不能。`field_field`只是详细说明`input`类型的标签`file`，根据规范，一次只能加载一个文件。

不过，您可以查看其他适合 Rails 应用程序的解决方案，例如[jQuery-File-Upload](http://blueimp.github.com/jQuery-File-Upload/)或[Plupload](http://planetrails.com/plupload-with-rails-3/)

# ssl-certificate - 似乎无法更改 httpd 服务器上的 SSL 证书

> ID：12654110
> 
> 赞同：0
> 
> 时间：2012-09-29T15:43:40.933
> 
> 标签：ssl-certificate, apache

我正在尝试使用 httpd 服务器设置 SSL。在我创建了自我证书时，它运行良好，当然在浏览器中显示了代理锁定。

现在我得到了适当的委托证书，但我似乎无法替换旧的。浏览器显示已损坏的锁，当我打开证书信息框时，即使已更改，它仍然不显示公司名称或正确的服务器名称。

您如何正确替换 SSL 证书？

# javascript - 更改弹出消息

> ID：12654116
> 
> 赞同：0
> 
> 时间：2012-09-29T15:44:34.227
> 
> 标签：javascript, jquery, html

如何将弹出消息更改为具有确定和取消按钮？这是我当前代码的链接：

[http://jsfiddle.net/Ck4Fr/](http://jsfiddle.net/Ck4Fr/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T16:16:12.783

这是一个[**示例**](http://jsfiddle.net/ZmDu5/)。

在 OP 中，我看不到任何有[`alert`](https://developer.mozilla.org/en-US/docs/DOM/window.alert)消息或其他类型的弹出窗口的地方，但如果您实际上使用的[`alert`](https://developer.mozilla.org/en-US/docs/DOM/window.alert)是弹出窗口，则可以将其更改为[`confirm`](https://developer.mozilla.org/en-US/docs/DOM/window.confirm)。

例子：

```
alert("There is an error!"); 
```

对比

```
confirm("Continue anyway?"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T16:17:47.677

那么，你可以使用`alert`或`confirm`对话。

如果您想使用自定义弹出窗口，请使用[Jquery UI Dialog](http://jqueryui.com/demos/dialog/)

# html - IE8/IE9 错误 - 使用 IE 过滤器时出现意外行为

> ID：12654117
> 
> 赞同：0
> 
> 时间：2012-09-29T15:44:37.627
> 
> 标签：html, css, internet-explorer-9

我使用以下代码创建了一个 html 块：

```
<div class="container">
    <div class="float">info<br/>info<br/>info</div>
    <div class="fluid">
        <div class ="fluidinner">
            <div class="text">one two</div>
            <div class="cleardiv"></div>
        </div>
    </div>
</div> 
```

...以及具有完全相同代码的第二个块，除了*class="fluid"*更改为*class="fluid2"*。

CSS是：

```
.float {
    background-color:pink;
    width:100px;
    float:left;
}
.fluid {
    background-color:#d3dadb;
    padding:5px;
}
.fluid2 {
    filter:progid:DXImageTransform.Microsoft.gradient( startColorstr='#d3dadb', endColorstr='#ffffff',GradientType=0 );
    padding:5px;
}
.fluidinner {
    background-color: gray;
}
.cleardiv {
    clear:both;
} 
```

因此*“fluid”*具有纯色背景，而*“fluid2”*具有使用 IE 过滤器属性*“filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#d3dadb', endColorstr='#ffffff',GradientType=0)”的背景渐变*

结果（屏幕截图）：[http ://s14.postimage.org/v8qn1wvin/iebug.jpg](http://s14.postimage.org/v8qn1wvin/iebug.jpg)

“fluid2”虽然 clear 没有延伸到其容器的高度。

jsfiffle：http: [//jsfiddle.net/waGEk/1/](http://jsfiddle.net/waGEk/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T15:57:07.230

您需要将渐变应用于容器：[更新的小提琴](http://jsfiddle.net/waGEk/2/)

# html - Bootstrap Span 偏移量和背景色，如何避免对偏移量着色？

> ID：12654118
> 
> 赞同：2
> 
> 时间：2012-09-29T15:44:41.283
> 
> 标签：html, css, twitter-bootstrap

我想将这些跨度放在中间：http: [//i.stack.imgur.com/3XHhG.png](http://i.stack.imgur.com/3XHhG.png)

我可以通过向它们添加一个 offset1 来做到这一点：http: [//i.stack.imgur.com/bbr8T.png](http://i.stack.imgur.com/bbr8T.png)

现在，我的问题是：如何防止偏移也被着色。如果我的问题太模糊，请原谅。

HTML：

```
 <div class="span10" style="margin: 0 auto;background-color:#FFDDDD;">
    <div class="row">
      <div class="span2 offset1" style="text-align: right">
        <h1 style="">RWCO</h1>
        <h3>Bis: 11\. März</h3>
      </div>
          <div class="span7">Lorem ipsum dolor sit a...` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T15:50:12.273

您可以在 span2 之前添加一个 span1。

（您可能只需要在 div 中为 span1 留一个空格。否则浏览器将折叠此 div。）

（如果这个答案有效，那么只需发表评论，说明您是否必须在 div 中留下一个空格，或者它也可以在没有空格的情况下工作。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T16:55:07.550

您应该只将背景颜色应用于您希望拥有彩色背景的 div（在本例中为 span2 和 span7？）。在您发布的示例中，您将背景应用于充当容器的 span10，并且将背景应用于整个块是正常的......

尝试这个：

```
<div class="span10" style="margin: 0 auto;">
    <div class="row">
      <div class="span2 offset1" style="text-align: right; background-color:#FFDDDD;">
        <h1 style="">RWCO</h1>
        <h3>Bis: 11\. März</h3>
      </div>
          <div class="span7" style="background-color:#FFDDDD;">Lorem ipsum dolor sit a...` 
```

顺便说一句，我建议您通过类而不是内联来应用样式...

# vba - 在数组中添加行值：VBA

> ID：12654127
> 
> 赞同：3
> 
> 时间：2012-09-29T15:45:47.423
> 
> 标签：vba, excel

我正在 VBA 中构建一个遗传算法，我的适应度函数取决于数组行有多少个 1。该数组是 1 和 0 的组合。数组可以是任意大小（2D），我需要在行中添加 1 的数量并将其与其余值进行比较。我正在考虑找到 1s 的最大值并将其与数组中 1 的最小值进行比较，然后从那里继续前进，但我不确定这是否是最好的方法。

如果你们能给我一些关于如何做到这一点的建议，那就太好了！或者，如果我在 VBA 中缺少一些数组添加函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T17:52:36.680

另一种方法是使用 Excel 的`SUM()`功能来完成这项工作。对数组求和会给您与计算数组相同的答案，您可以使用该`Application.WorksheetFunction`对象来访问`SUM()`：

```
x = Application.WorksheetFunction.Sum(aArray) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T16:10:29.093

你只需要数那些；如果每个单独的元素不是 1，则为零，因此您可以从数组的大小中减去 1 的数量以获得零的数量。

```
Function CountTheOnes(aArray As Variant) As Long
    Dim x As Long
    Dim OnesCount As Long
    For x = LBound(aArray) To UBound(aArray)
        If aArray(x) = 1 Then
            OnesCount = OnesCount + 1
        End If
    Next
    CountTheOnes = OnesCount
End Function

' and to test it:

Sub TestIt()
    Dim aArray(1 To 10) As Byte
    Dim x As Long

    ' stuff the array with zeros
    For x = LBound(aArray) To UBound(aArray)
        aArray(x) = 0
    Next

    ' then add a couple of random 1s
    aArray(3) = 1
    aArray(7) = 1
    aArray(9) = 1

    x = CountTheOnes(aArray)

    Debug.Print "Ones:" & vbTab & x
    Debug.Print "Zeros:" & vbTab & UBound(aArray) - x

End Sub 
```

# java - 打印两张表

> ID：12654129
> 
> 赞同：0
> 
> 时间：2012-09-29T15:46:09.437
> 
> 标签：java

我正在尝试打印一个包含两个表格的 jpanel，但是表格的宽度大于表格出现的页面的问题。有没有让表格适合页面宽度，或者我应该自己调整表格的大小？

这是我所做的：

```
 PrinterJob job = PrinterJob.getPrinterJob();
 job.setJobName("test");

 job.setPrintable (new Printable() {    
        @Override
    public int print(Graphics pg, PageFormat pf, int pageNum) throws PrinterException{
        if (pageNum > 0){
        return Printable.NO_SUCH_PAGE;
        }

        Graphics2D g2 = (Graphics2D) pg;
        g2.translate(pf.getImageableX(), pf.getImageableY());
        jPanel1.print(g2);

         // jTable1.print(JTable.PrintMode.FIT_WIDTH, null, null);
        return Printable.PAGE_EXISTS;
    }
 });
 boolean ok = job.printDialog();
 if (ok) {
     try {
          job.print();
     } catch (PrinterException ex) {

     }
 } 
```

# drop-down-menu - 在网页上看不到下拉列表项

> ID：12654132
> 
> 赞同：0
> 
> 时间：2012-09-29T15:46:30.107
> 
> 标签：drop-down-menu, z-index, frameset, invisible, frameset-iframe

在[我的网站上](http://www.volkabulaire.nl)，您可以单击顶部的“搜索”，这将显示一个下拉菜单。第一个列表项是可见的，但其余的项是不可见的（只需单击搜索，您就会明白我的意思）。我怎样才能让它们全部可见？

PS：我尝试过删除`overflow:hidden`和添加`z-index`它，但它没有用。

下拉列表的片段：

```
echo "
if ($verified_user) {

<span class=\"dropdown dropdown-processed\">
<a class=\"toggles\" href=\"#\">SEARCH</a>
  <div class=\"dropdown-container\" style=\"display: none;\">
<ul class=\"dropdown-menu toggles-menu open\" style=\"list-style-type: none;\">
<li class=\"dropdown\">
<li class=\"nick\">
<a title=\"username\" href=\"/someone/username\">username</a>
</li>
<li>
<a href=\"blabla">lanp</a>
</li>
<li>
<a href=\"blabla">preferences</a>
</li>
<li>
<a href=\"blabla\">subs</a>
</li>
<li class=\"seperated\">
<a href="blabla">log out</a>
</li>
</ul>
</li>
</ul>
</div>
</div>

"; } 
```

它只对注册（和登录）的用户可见，所以我附和了它。它确实是可见的，但不是整个列表，这很烦人。

编辑：看起来框架集是问题所在。我该如何解决这个问题？这是框架集： `<frameset id="f" border="0" rows="50,*">`

# python - 寻找更好的设计（继承）

> ID：12654138
> 
> 赞同：0
> 
> 时间：2012-09-29T15:47:39.920
> 
> 标签：python, inheritance, multiple-inheritance

我有一个`Block`作为基类的类。它的子类之一是`TemplateBlock`.

```
class Block(object):

    def render(self, dest):
        # ...
        pass

class TemplateBlock(Block):

    def render(self, dest):
        # ...
        pass 
```

子包`blocks.ext.django`（虽然`blocks`是我的顶级模块）旨在提供与原始模块相同的类，但具有改进的功能（例如附加方法）。

```
# blocks.ext.django

import blocks
import django.http

class Block(blocks.Block):

    def render_to_response(self):
        # ...
        result = self.render(dest)
        return django.http.HtppRequest(result) 
```

但是我应该如何使该`render_to_response`方法可用于`blocks.ext.django`等效于`TemplateBlock`该类？以下对我来说实际上看起来不是一个好的设计：

```
# blocks.ext.django

# ...

class TemplateBlock(blocks.TemplateBlock, Block):

    pass 
```

**你能想出更好的设计来实现这一目标吗？**

* * *

*注意：我不想完全抽象这个问题，这就是我保留原名的原因。它是否与 django 有关系并不重要。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T19:02:25.620

这次我很满意。:) 我觉得这个想法`ExtensionManager`还不错，所以我加强了整体设计。

现在可以将扩展添加到扩展管理器中，如下所示：

```
class Test(object):

    ext = ExtensionManager()

    def __init__(self, v):
        self.v = v

class Extensions():
    __metaclass__ = ExtensionClassMeta
    managers = [Test.ext]

    @Extension('method')
    def print_v(self):
        print self.v

Test('Value of Test instance').ext.print_v()
print Extensions 
```

打印以下内容：

```
C:\Users\niklas\Desktop\blog>python -m blocks.utils.ext_manager
Value of Test instance
(<__main__.ExtensionManager object at 0x021725B0>,) 
```

扩展管理器设置是完全可定制的。例如，您可以创建自己的`LookupManager`实例，用于`ExtensionManager`查找和包装扩展。

```
class CoolLookupManager(LookupManager):

    extension_types = ('ice',)

    def wrap_ice(self, name, object, instance, owner):
        return "%s is cool as ice." % object(instance)

class Test(object):

    ext = ExtensionManager(lookup_manager=CoolLookupManager())

    def __init__(self, v):
        self.v = v

class Extensions():
    __metaclass__ = ExtensionClassMeta
    managers = [Test.ext]

    @Extension('ice')
    def get_v(self):
        return self.v

print Test('StackOverflow').ext.get_v 
```

导致以下输出：

```
C:\Users\niklas\Desktop\blog>python -m blocks.utils.ext_manager
StackOverflow is cool as ice. 
```

我正在考虑将其放入一个单独的模块中并将其发布到 PyPi。到目前为止，这是代码：

```
# coding: UTF-8
# file:   blocks/utils/ext_manager.py
#
# Copyright (C) 2012, Niklas Rosenstein
""" blocks.utils.ext_manager - Class extension-manager. """

import functools

class ExtensionTypeError(Exception):
    """ Raised when an extension type is not supported. """

class Extension(object):
    """ This decorator is used to mark an attribute on an extension class
        as being actually an extension. """

    def __init__(self, type):
        super(Extension, self).__init__()
        self.type = type
        self.object = None

    def __str__(self):
        return '<Extension: %s>' % self.type

    def __call__(self, object):
        self.object = object
        return self

class ExtensionClassMeta(type):
    """ This meta-class processes an extension class and adds the defined
        extensions into the `ExtensionManager` objects defined in the
        extension class. """

    def __new__(self, name, bases, dict):
        # Ensure there is no base.
        if bases:
            raise ValueError('the ExtensionClassMeta meta-class does not accept bases.')

        # Obtain a list of the managers that need to be extended.
        managers = dict.pop('managers', None)
        if not managers:
            raise ValueError('at least one manager must be given in the class.')

        # A single ExtensionManager instance of the `managers` attribute is
        # allowed, so convert it to a list to ensure that the next test
        # will not fail.
        if isinstance(managers, ExtensionManager):
            managers = [managers]

        # Make sure the managers is a list.
        if not isinstance(managers, (list, tuple)):
            raise ValueError('managers names must be list or tuple.')

        # Iterate over all managers to ensure they're all ExtensionManager
        # instances.
        for manager in managers:
            if not isinstance(manager, ExtensionManager):
                raise ValueError('object in managers not instance of ExtensionManager class.')

        # Iterate over all attributes of the class and extend the managers.
        for name, value in dict.iteritems():
            # Only `Extension` instances will be registered to the extension
            # managers. Other values are just ignored.
            if isinstance(value, Extension):
                for manager in managers:
                    manager.register_extension(name, value.object, value.type)

        return tuple(managers)

class ExtensionManager(object):
    """ This class is used as a property to dynamically add methods and
        data-fields (also called extensions in this context) to a class.

        Any attribute  that will be gathered from this object will be wrapped
        according to the type of extension (see `register_extension()`). """

    def __init__(self, lookup_manager=None):
        super(ExtensionManager, self).__init__()
        self._extensions = {}

        if not lookup_manager:
            lookup_manager = StandartLookupManager()
        self.lookup_manager = lookup_manager

    def __get__(self, instance, owner):
        if not instance:
            return self
        else:
            return ExtensionToAttributeConnector(self, instance, owner)

    def __set__(self, instance, value):
        raise AttributeError("can't overwrite ExtensionManager property.")

    def __delete__(self, instance):
        raise AttributeError("can't delete ExtensionManager property.")

    def register_extension(self, name, object, type='method'):
        """ Register an extension to the manager. The type of *object* depends
            on the value of *type*. The extensions name must be passed with
            *name*. It is associated with *object* and used on attribute
            lookup. If the type is not valid, the lookup manager will
            raise an *ExtensionTypeError*.
            """
        self.lookup_manager.validate_type(type)
        self._extensions[name] = [object, type]

    def do_lookup(self, name, instance, owner):
        """ Forward the extension lookup to the lookup manager to obtain the
            value of an extension. """
        return self.lookup_manager.do_lookup(self._extensions, name, instance, owner)

class LookupManager(object):
    """ This is the base-class for lookup managers. A lookup manager is created
        by an `ExtensionManager` instance when watching out for a specific
        attribute on an instance.

        The `ExtensionManager` will ask the `LookupManager` to validate the
        type of an extension. The lookup manager itself will call functions
        depending on the type of an extension.

        If you have a lookup manager which supports the type `'FOO'`,
        and an extension of that type is requested, it will call the
        function `wrap_FOO()`. Such a method has the following signature:

            * `self`: The `LookupManager` instance.
            * `ext_name`: A string defining the name of the extension that
                          is looked up.
            * `instance`: The invoking instance, as passed by `__get__`.
            * `owner`: The invoking class, as passed by `__get__`.

        The `wrap_FOO()` function must wrap and return *object* so it can
        be used by the requestor.

        The types of extensions the lookup manager supports is defined in
        the `extension_types` attribute which *must* be an iterable of string.
        """

    extension_types = ()

    def do_lookup(self, extensions, name, instance, owner):
        """ Perform a lookup on the passed *extensions* and call the
            corresponding `wrap_FOO()` method. *extensions* should be a
            dictionary containing `(object, type)` pairs only where *object*
            is the registered extension and *type* is its type.

            *connector* is an instance of `ExtensionToAttributeConnector`. """

        object = extensions.get(name, None)
        if not object:
            raise AttributeError('no extension named %s.' % name)

        object, type = object
        lookup_name = 'wrap_%s' % type
        processor = getattr(self, lookup_name, None)
        if not processor:
            raise RuntimeError('no processor %s found in lookup manager.' % lookup_name)

        return processor(name, object, instance, owner)

    def validate_type(self, type):
        """ Validate the passed *type* by raising *ExtensionTypeError* if
            it is not supported. The default implementation checks if the
            passed type is defined in the `extension_types` field. """
        if not type in self.extension_types:
            raise ExtensionTypeError('Invalid type %s passed.' % type)

class StandartLookupManager(LookupManager):
    """ This is the standart lookup manager implementing the `'method'`,
        `'property'` and `'attr'` extension types. """

    extension_types = ('method', 'property', 'attr')

    def wrap_method(self, name, object, instance, owner):
        func = lambda *args, **kwargs: object(instance, *args, **kwargs)
        func = functools.wraps(object)(func)
        func.func_name = name
        func.__name__ = name
        return func

    def wrap_property(self, name, object, instance, owner):
        return object(instance)

    def wrap_attr(self, name, object, instance, owner):
        return object

class ExtensionToAttributeConnector(object):
    """ This class is the direct communication layer between the extensions
        and the user of the `ExtensionManager`. It is returned when the
        `ExtensionManager` is requested on an instance, so an attribute-lookup
        on an instance of this class will result in an extension-lookup. """

    def __init__(self, manager, instance, caller):
        super(ExtensionToAttributeConnector, self).__init__()
        self.manager = manager
        self.instance = instance
        self.caller = caller

    def __getattr__(self, name):
        return self.manager.do_lookup(name, self.instance, self.caller) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T17:22:28.587

这就是我现在能想到的。感谢[@JakobBowyer ，他为我指明了](https://stackoverflow.com/users/462604/jakob-bowyer)*对象组合*的方向。我对这个解决方案并不完全满意，但它可以按预期工作。

我创建了一个实现[Python 描述符接口](http://docs.python.org/reference/datamodel.html#implementing-descriptors)的类，用于管理类的扩展。扩展可以是方法、类方法或属性。

我已将此类放入`blocks.utils.ext_manager`并在主`Block`类中使用它，如下所示：

```
from blocks.utils.ext_manager import ExtensionManager

class Block(object):

    ext = ExtensionManager()

    # ... 
```

扩展现在可以像这样注册`blocks.ext.django`：（
*我仍在寻找一种让它看起来更漂亮的方法......）*

```
def Block_render_response(self):
    # ...

blocks.Block.ext.register_extension('render_response', Block_render_response, 'method') 
```

通过实现描述符接口，`ExtensionManager`能够`ext`从调用实例中获取引用属性的实例，并将其传递给注册到扩展管理器的方法。请参阅以下示例调用：

```
from blocks.ext.django import TemplateView

def index(request):
    block = TemplateView(template_name='foo.html')
    return block.ext.render_response() 
```

*缺点*：我还没有实现，注册为的方法`'classmethod'`可以从类中调用，因为从类中引用`ext`属性将返回`ExtensionManager`本身不实现通过`__getattr__`.

您可以找到该`ExtensionManager`课程的源代码。

```
# coding: UTF-8
# file:   blocks/utils/ext_manager.py
""" blocks.utils.ext_manager - Class extension-manager. """

import functools

class ExtensionManager(object):
    """ This class is used as a property to dynamically add methods and
        data-fields (also called extensions in this context) to a class.

        Any attribute  that will be gathered from this object will be wrapped
        according to the type of extension (see `register_extension()`). """

    def __init__(self):
        super(ExtensionManager, self).__init__()
        self._extensions = {}

    def __get__(self, instance, owner):
        if not instance:
            return self
        else:
            return ExtensionLookup(self._extensions, instance, owner)

    def __set__(self, instance, value):
        raise AttributeError("can't overwrite ExtensionManager property.")

    def register_extension(self, name, object, type='method'):
        """ Register an extension to the manager. The type of *object* depends
            on the value of *type*. The extensions name must be passed with
            *name*. It is associated with *object* and used on attribute
            lookup.

            * `type == 'method'`:

                *object* is assumed to be callable and is passed the calling
                instance of the host-class plus the arguments passed on
                method invocation.

            * `type == 'classmethod`:

                *object* is assumed to be callable and is passed the host-class
                plus the arguments passed on invocation.

            * `type == 'property'`:

                *object* can be of anytype and is returned as is.
            """

        self._extensions[name] = [object, type]

class ExtensionLookup(object):
    """ This is a private class used by the `ExtensionManager` class to
        wrap the registered together with an instance.

        Attribute lookup will be redirected to the registered extensions. """

    def __init__(self, extensions, instance, owner):
        super(ExtensionLookup, self).__init__()
        self.extensions = extensions
        self.instance = instance
        self.owner = owner

    def __getattr__(self, name):
        object, type = self.extensions[name]
        if type == 'method':
            func = lambda *args, **kwargs: object(self.instance, *args, **kwargs)
        elif type == 'staticmethod':
            func = lambda *args, **kwargs: object(self.owner, *args, **kwargs)
        elif type == 'property':
            return object
        else:
            raise RuntimeError('invalid extension-type found.')

        func = functools.wraps(object)(func)
        return func 
```

*免责声明：通过向公众展示上面的代码，我允许复制和修改源代码以及此类的出版物。*

# jquery - jquery：重复foreach循环

> ID：12654139
> 
> 赞同：-5
> 
> 时间：2012-09-29T15:47:41.917
> 
> 标签：jquery, loops, foreach, repeat

我想创建一个循环，用计时器无限重复，比如（1000）

例子：

```
1
2
3

1
2
3

1
2
3 
```

无限重复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T15:51:21.330

```
$(document).ready(
    function()
    {
        var i = 0;
        setInterval(
        function()
        {
             $('.handler').html(i + "<br />");
             i = (++i) % 3;
        }
        , 1000);
    }
); 
```

我想应该这样做...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T15:51:45.750

它应该像这样简单

```
function loop()
{
    for(var i = 0, t = 100; i < t, i++)
    {
        // do something
    }
}

setInterval(loop, 1000); 
```

# c# - HttpWebRequest resp.Headers["Set-Cookie"] 为空

> ID：12654140
> 
> 赞同：1
> 
> 时间：2012-09-29T15:47:51.907
> 
> 标签：c#, cookies, webrequest

更新 1：发布/获取标题的屏幕截图：http: [//imageshack.us/photo/my-images/826/getpost.png](http://imageshack.us/photo/my-images/826/getpost.png)

我正在寻求有关网络请求的帮助。该请求的目的是登录站点并检索 Set-Cookie 标头。我很感激任何帮助！

我正在尝试登录一个站点并使用下面的代码检索 cookie 值。但是，Set-Cookie 标头始终为空：

```
static void Main(string[] args)
{
    string formUrl = "https://account.guildwars2.com/login";
    string formParams = string.Format("email={0}&password={1}", "xxx", "xxx");
    string cookieHeader;
    var req = (HttpWebRequest)WebRequest.Create(formUrl);
    req.Referer = "https://account.guildwars2.com/login";
    req.ContentType = "application/x-www-form-urlencoded";
    req.Method = "POST";
    req.KeepAlive = true;
    byte[] bytes = Encoding.ASCII.GetBytes(formParams);
    req.ContentLength = bytes.Length;
    using (Stream os = req.GetRequestStream())
    {
        os.Write(bytes, 0, bytes.Length);
    }
    WebResponse resp = req.GetResponse();
    cookieHeader = resp.Headers["Set-Cookie"];
} 
```

我不确定这是否与重定向有关，因为在 C# 应用程序中，响应 uri 是“ [https://account.guildwars2.com/login?redirect_uri=/download](https://account.guildwars2.com/login?redirect_uri=/download) ”

**响应标头 Chrome**

*   内容长度：0
*   内容类型：文本/html
*   日期：2012 年 9 月 29 日星期六 15:07:30 GMT
*   位置：下载
*   服务器：Microsoft-IIS/7.5
*   设置 Cookie：s=60B845F0-4E22-4A4B-890B-F3B885CEF9AE；域=guildwars2.com；路径=/; 版本=1
*   X-Powered-By:ARR/2.5

**来自 C# 应用程序的响应**

*   内容长度：7344
*   内容类型：文本/html
*   日期：2012 年 9 月 29 日星期六 15:42:44 GMT
*   服务器：Microsoft-IIS/7.5
*   X-Powered-By: ARR/2.5

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-29T20:48:03.770

默认情况下，`HttpWebRequest`自动遵循 HTTP 重定向响应，这会阻止您捕获`Set-Cookie`原始响应中的标头。要禁用此行为，请在发送请求之前设置[`AllowAutoRedirect`](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.allowautoredirect.aspx)为：`false`

```
req.AllowAutoRedirect = false; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T17:01:11.570

您可以尝试使用以下方式检索 cookie：

```
CookieContainer cookies = new CookieContainer();

WebResponse resp = req.GetResponse();

CookieCollection cookieCollection = cookies.GetCookies(request.RequestUri); 
```

# php - Smarty中的循环逻辑错误？

> ID：12654142
> 
> 赞同：0
> 
> 时间：2012-09-29T15:48:18.823
> 
> 标签：php, smarty

给定数组：

```
$fruits = array(
    array(
        'color' => 'red',
        'name' => 'apple'
    ),
    array(
        'color' => 'red',
        'name' => 'cherry'
    ),
    array(
        'color' => 'yellow',
        'name' => 'banana'
    )
); 
```

我试图在 Smarty 中显示它，使其看起来像这样：

```
red
 1\. apple
 2\. cherry

yellow
 1\. banana 
```

我的代码：

```
{foreach from=$fruits item=fruit}
    {assign var="current_color" value=$fruit.color}
    <h1>{$current_color}</h1>
        <ol>
            {while $current_color === $fruit.color}
                <li>{$fruit.name}</li>
                {assign var="fruit" value=$fruits|next}
            {/while}
        </ol>
{/foreach} 
```

我的错误结果：

```
red
 1\. apple
 2\. cherry

red
 1\. cherry

yellow
 1\. banana 
```

任何想法我的代码有什么问题？当我在while循环中推进数组指针时，它不会影响foreach循环中的数组吗？

**更新 1：**

尝试使用 for 循环：

```
{for $iteration=0 to $fruits|count - 1}
    {assign var="current_color" value=$fruits.{$iteration}.color}
    <h1>{$current_color}</h1>
        <ol>
            {while $current_color === $fruits.{$iteration}.color}
                <li>{$fruits.{$iteration}.name}</li>
                {assign var="iteration" value=$iteration + 1}
            {/while}
            {assign var="iteration" value=$iteration - 1}
        </ol>
{/for} 
```

在 for 循环的第二次迭代中，我收到以下错误：

> 严重性：通知消息：未定义属性：Smarty_Variable::$step
> 
> 严重性：通知消息：未定义属性：Smarty_Variable::$total

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T09:08:39.297

在将它传递给 Smarty 之前，我只是在 PHP 中处理了它。

# php - 如何向 Wordpress 类别永久链接添加扩展名？

> ID：12654143
> 
> 赞同：0
> 
> 时间：2012-09-29T15:48:22.460
> 
> 标签：php, wordpress, permalinks

我的帖子有固定链接，例如 /uncategorized/sample-post.html。

我也有页面的永久链接，例如 /sample-page.html。

我不知道如何将其添加到类别和标签中。有没有人有任何建议如何做到这一点？

康纳

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T10:57:17.023

来自管理区域>帖子>类别来自管理区域>帖子>标签

# c# - 创建使用圆心和半径绘制圆的方法

> ID：12654148
> 
> 赞同：-1
> 
> 时间：2012-09-29T15:48:50.063
> 
> 标签：c#

我创建的方法可以在图片框中创建一个圆圈，但它只会使用矩形的坐标。

我正在尝试创建以下内容，

*   Windows 窗体：
    *   1个图片框
    *   1 个文本框
    *   1 个按钮

textBox 应该用于插入圆的半径。

```
(double input=Convert.ToDouble(textBox1.Text)

{
private void button1_Click(object sender, EventArgs e)

    {
        double input....
        double radius= Math.PI*input*input;
        Graphics paper;
        paper = pictureBox1.CreateGraphics();
        Pen pen = new Pen(Color.Black);
        getCircle(paper, pen, (variables for center), radius);
    }
private void getCircle(Graphics drawingArea, Pen penToUse, int xPos, int yPos, double radius);

{
}

} 
```

我的问题是我不知道如何使用`Math.PI*radius*radius`预先确定的中心坐标创建一个圆。

我想看到一个带有编码方法的答案和`button_click`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T16:37:18.577

我不明白您为什么要找到圆的面积并将其称为半径，但是由于您似乎正在使用 Winforms，因此我只会使用该[`Graphics.DrawEllipse`](http://msdn.microsoft.com/en-us/library/a3fd63x2%28v=vs.100%29.aspx)方法并使用可以通过从所需中心减去半径来找到的矩形。

```
private void button1_Click(object sender, EventArgs e)
{
    int centerX;
    int centerY;
    int radius;

    if (!int.TryParse(textBox2.Text, out centerX))
        return;
    if (!int.TryParse(textBox3.Text, out centerY))
        return;
    if(! int.TryParse(textBox1.Text,out radius))
        return;

    Point center = new Point(centerX, centerY);

    Graphics paper; 
    paper = pictureBox1.CreateGraphics(); 
    Pen pen = new Pen(Color.Black); 
    getCircle(paper, pen, center, radius); 

}

private void getCircle(Graphics drawingArea, Pen penToUse, Point center, int radius) 
{ 
    Rectangle rect = new Rectangle(center.X-radius, center.Y-radius,radius*2,radius*2); 
    drawingArea.DrawEllipse(penToUse,rect);
} 
```

# c# - LINQ to Entities 不支持指定的类型成员“项目”

> ID：12654149
> 
> 赞同：1
> 
> 时间：2012-09-29T15:48:59.063
> 
> 标签：c#, asp.net-mvc, linq, entity-framework, linq-to-entities

我第一次使用代码优先方法制作我的项目，当我使用数据库优先方法创建项目时，我从未见过这个错误弹出。

*我知道这里有很多这些错误，但我已经检查过了，似乎我需要有人向我解释我的特定示例中有什么问题，以便我很好地理解它。*

## 错误

> LINQ to Entities 不支持指定的类型成员“项目”。仅支持初始化程序、实体成员和实体导航属性。
> 
> 说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.NotSupportedException：LINQ to Entities 不支持指定的类型成员“项目”。仅支持初始化程序、实体成员和实体导航属性。

## 什么导致错误

```
public dynamic List()
{
    var categories = db.Categories.OrderByDescending(x => x.CreatedDateTime).Select(x => new
    {
        ID = x.ID,
        Name = x.Name,
        RootCategoryName = x.RootCategory.Name,
        ItemCount = x.Items.Count() // This line
    });

    return Json(categories, JsonRequestBehavior.AllowGet);
} 
```

## 物品型号

```
public class Item
{
    public int ID { get; set; }

    public int CategoryID { get; set; } // Seems like here I've done everything correctly
    public Category Category { get; set; } // Seems like here I've done everything correctly

    [Required]
    public string Name { get; set; }
    public string Info { get; set; }

    public bool? IsAccessory { get; set; }
    public int? RootItemID { get; set; }
    public Item RootItem { get; set; }
} 
```

## 类别型号

```
public class Category
{
    public int ID { get; set; }

    public int? RootCategoryID { get; set; }
    public Category RootCategory { get; set; }

    [Required]
    public string Name { get; set; }
    public string Info { get; set; }

    public IQueryable<Item> Items { get; set; } // Here also it seems that I've done relations correctly

    public DateTime CreatedDateTime { get; set; }
    public DateTime ModifiedDateTime { get; set; }
} 
```

乍一看，在我看来不可能调用`Category.Items.Count()`或`Item.Category.Name`使用代码优先的东西，但我认为我在代码上做错了，因为它应该是可能的。请帮忙，我该怎么做才能完成这项工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T15:53:04.010

`Category.Items`应该是类型`ICollection<Item>`而不是`IQueryable<Item>`

# python - peek 语法和用法

> ID：12654152
> 
> 赞同：0
> 
> 时间：2012-09-29T15:49:34.360
> 
> 标签：python, python-3.x, python-2.7

我正在编写自己的程序`peek`，这就是我所拥有的：

```
with open('temp.txt', 'r') as inpf2:
    while True:
            c = [inpf2.read(1)]
            if not c:
                break
            k = c.peek(2)
            for d in k:
                if(d == ""):
                    break
                else:
                    c = c.append(d)
            print c 
```

在这个程序中，我正在使用`peek`在一个文本文件中查看前面的 2 个字符，该文件具有类似的文本，`abcdefg`并尝试打印出 3 个字符的字符串，如`abc`, `bcd`, `cde`, `def`, `efg`.

但是当我执行这个程序时，我得到了错误，

```
k = c.peek(2)  
AttributeError: 'list' object has no attribute 'peek'. 
```

我在哪里做错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T16:10:22.830

我不知道任何具有`peek`方法的 Python 对象（除了[`io.BufferedStream`](http://docs.python.org/library/io.html?highlight=peek#io.BufferedReader.peek)，这是从文档中的搜索返回的唯一方法）。

恐怕你必须自己定义一个`peek`函数。您可以在网上找到可以帮助您入门的[食谱。](http://code.activestate.com/recipes/577361-peek-ahead-an-iterator/)

对于您的特定问题，也许您可​​以考虑使用[`collections.deque`](http://docs.python.org/library/collections.html?highlight=peek#collections.deque)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-12-13T02:28:08.777

我来到这里想知道这一点，然后它击中了我：`peek`很简单`list[-1]`。问题解决了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T17:07:14.793

不要试图往前看，记住你已经看过的角色。即不打印当前字符和后两个字符，打印当前字符和*后*两个字符。

```
from collections import deque

with open('temp.txt') as infile:
    window = deque(infile.read(2), maxlen=3)
    nextchar = infile.read(1)
    while nextchar:
        window.append(nextchar)
        print "".join(window)
        nextchar = infile.read(1) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-29T15:51:47.187

`c`是一个列表，所以你试图`peek`在一个列表中。至少，你必须调用`peek`列表中的第一个元素，所以像`c[0].peek()`

但即便如此，您正在填充`c`文件中的数据，所以您真的想调用`peek`您的文件对象而不是返回的数据，如下所示：`k = inpf2.peek(2)`

# google-app-engine - 自动 NDB 缓存如何工作？

> ID：12654159
> 
> 赞同：2
> 
> 时间：2012-09-29T15:50:32.600
> 
> 标签：google-app-engine, memcached, app-engine-ndb, quota

我的网站是电影目录。用户登录后，我会向他/她展示添加到我的数据库中的最新电影：

```
movies = Movies.query()
movies = movies.order(-Movies.added)
movie = movies.get(keys_only = True) // get_latest_movie_id 
```

是否已缓存（电影每周添加到数据库中，因此应该缓存）？如何验证（即什么是内存缓存键）？昨天大约有 1000 名用户访问了我的网站，我得到了

> OverQuotaError：API 调用 datastore_v3.RunQuery() 需要的配额多于可用配额。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-29T18:24:57.877

NDB 仅通过键缓存获取。我怀疑在您的示例代码`movies`中是一个查询，并且 NDB 不缓存查询，您需要自己执行此操作。

# java - netbeans 7.2 提供了运行但不部署的选项

> ID：12654165
> 
> 赞同：0
> 
> 时间：2012-09-29T15:51:16.173
> 
> 标签：java, web-services, hibernate, netbeans-7, restlet-2.0

我在 netbeans 中创建了一个 web 服务。当我右键单击该项目时，我看到了该`run`选项，但没有看到该`deploy`选项。`Hello World`当我在 Restlet 网站上找到一个简单的示例时，他们的示例同时显示了`deploy`和`run`选项。我和他们的区别在于我使用的是hibernate和mysql。

有谁知道一般为什么 netbeans 可能会显示`run`选项，但不会显示`deploy`Web 服务项目的选项？我正在使用 Glassfish

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T23:31:02.370

您创建的 Web 应用程序是 Maven Web 应用程序吗？如果是这样，那可能就是它没有“部署”选项的原因，因为 maven 会为您处理好这些。

# iphone - Segue 不适用于 iOS6

> ID：12654172
> 
> 赞同：5
> 
> 时间：2012-09-29T15:52:02.057
> 
> 标签：iphone, uinavigationcontroller, ios6, segue

如果我的问题对你们中的某些人来说听起来很愚蠢，请原谅。我对 iOS 开发比较陌生，但我必须为 iOS6 移植一个应用程序。该应用程序在 iOS 5 和 XCode 4.3.2 上完美运行，但我在 iPhone 6.0 模拟器上遇到了 Xcode 4.5 的奇怪错误。加载初始屏幕后，我可以点击任何我想要的按钮，但出现错误：

```
 `Terminating app due to uncaught exception 'NSGenericException', reason: 'Could not find a navigation controller for segue 'register'. Push segues can only be used when the source controller is managed by an instance of UINavigationController.` 
```

StartScreenViewController 的 prepareForSegue 方法如下所示

```
if ([[segue identifier] isEqualToString:@"register"] || [[segue identifier] isEqualToString:@"forgotPassword"]) {
    UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:[segue destinationViewController]];
    appDelegate.window.rootViewController = navController;
} 
```

设置断点显示该方法仍然被正确调用，但是在 prepareForSegue 完成后，应用程序因上述错误而崩溃。有人能指出我正确的方向吗？

非常感谢马丁

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-29T16:23:05.267

您可以说“该应用程序运行良好”，但事实是您引用的代码总是非常错误，因此现在似乎这种错误正在暴露出来。您永远不应该在应用程序中间更改窗口的根视图控制器；你应该在启动时设置一次，以后不要再设置了。而且，正如 Joshua 所说的那样，为 segue 做准备不是时候让你去搞乱视图控制器结构，因为 segue 本身就要搞砸了。

你手上有一个篮子箱。在你迈出下一步之前，停止并了解 iOS 和视图控制器（和故事板）可能是一个好主意，因为你最终可能会破坏这个应用程序的整个架构以使其正确。这里有一些帮助：

[http://www.aeth.com/iOSBook/ch19.html](http://www.apeth.com/iOSBook/ch19.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-29T16:13:00.727

因为您使用的是Cocoa，所以在*StartScreenViewController*的层次结构中`push segue` **寻找祖先的导航控制器**。

 **   如果找到，它将使用它将新的视图控制器自动推送到该导航控制器的堆栈上。
*   **由于找不到，您的应用程序正在崩溃。**

`prepareForSegue`: 为您*配置*一个即将被 iOS 自动显示的 VC。*显示*VC不是您的责任，这似乎是您在设置 window.rootViewController 时所做的。

您可能需要通读这些文档：http: [//developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/Introduction/Introduction.html](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/Introduction/Introduction.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-01T10:14:31.663

我也有同样的问题。应用程序在 ios6 设备上运行良好，当从应用商店下载时，但相同的代码在设备或模拟器上都不起作用。很奇怪的问题。

我的应用程序结构如下：

**NavigationController** -> **UIViewController**（有PageControl，持有多个页面，可水平滚动） -> **UITableViewController**（代表一个类别的一个新闻列表），当用户点击单个新闻时，得到**DetailsViewController**（UIViewController的实例）。

这是prepareForSegue的代码：

```
 if ([[segue identifier] isEqualToString:@"ShowTelegrafDetails"]){
    TelegrafDetailsViewController *details = (TelegrafDetailsViewController*)segue.destinationViewController;

    NSIndexPath *myIndexPath = [self.tableView indexPathForSelectedRow];     

    if([self isItPad])
        details.linkFromTableView = [[otherNews objectAtIndex:myIndexPath.row] link];
    else
        details.linkFromTableView = [[[myViewController.itemMatrix objectAtIndex:[self calculateCurrentPage]] objectAtIndex:myIndexPath.row] link];

    NSLog(@"%@",segue.sourceViewController);
    NSLog(@"%@",segue.destinationViewController);

    [self.myViewController.navigationController pushViewController:details animated:YES];
    } 
```

似乎源视图控制器已按预期设置，我使用情节提要并自动设置 NavigationController。我不知道我是否必须在某处显式设置 RootViewController，但在 AppDelegate 中设置它可能会很棘手，因为我在委托和应该是根的类 (UITableViewController) 之间还有两个视图层次结构。

如果有人对此有所了解，我将永远感激不尽，否则我可以使用一些指示。我已经阅读了苹果关于这个主题的文档，但是当涉及到这种复杂的情况时，我无法完全理解它。

另外，如果我找到任何解决方案，我会很乐意像老板一样在这里发布。:D

提前谢谢。

**编辑：**

我已经设法解决了这个问题。刚刚删除了 segues，并将**prepareForSegue**中的代码放入**didSelectRowAtIndexPath**中，并进行了适当的更正。这不是一个理想的解决方案，但可以解决问题。虽然，我计划支持 4.3+ 设备，但在这种情况下故事板不是一个选项。

另外，我仔细检查了代码，发现 RootViewController 已正确创建和显示，NavigationController 运行良好，但我仍然不明白为什么 segues 不起作用。

干杯。*

# macos - Finder Get Info 中未显示自定义文档类型的其他属性

> ID：12654176
> 
> 赞同：1
> 
> 时间：2012-09-29T15:52:29.787
> 
> 标签：macos, spotlight, spotlight-plugin

我的 Spotlight 插件为自定义文档格式导入了几个属性。
搜索它们工作得很好，但我无法让它们显示在**Finder 的“获取信息”**对话框中。

这是*schema.xml*（解析很好`mdcheckschema`）：

```
<?xml version="1.0" encoding="UTF-8"?>
<schema version="1.0" xmlns="http://www.apple.com/metadata"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="http://www.apple.com/metadata
   file:///System/Library/Frameworks/CoreServices.framework/Frameworks/Metadata.framework/Resources/MetadataSchema.xsd">

   <types>
      <type name="com.mycompany.custom">
         <note>
            The keys that this metadata importer handles.
         </note>
         <allattrs>
            kMDItemVersion
            kMDItemLayerNames
            kMDItemDescription
            kMDItemAuthors
         </allattrs>
         <displayattrs>
            kMDItemDescription
            kMDItemAuthors
            kMDItemVersion
            kMDItemLayerNames
         </displayattrs>
      </type>
   </types>

</schema> 
```

是否有工具可以调试是否使用了模式*......*？

还要查看`/System/Library/Spotlight/`其中许多导入器**根本****不包含*schema.xml***（默认的 Xcode 4.x Spotlight Importer 项目也不包含，但这可能是一个错误）所以开始怀疑..

# php - 如何使用 PHP 循环遍历 MySQL 结果？

> ID：12654185
> 
> 赞同：2
> 
> 时间：2012-09-29T15:54:59.067
> 
> 标签：php, mysql

我希望有人可以帮助我解决这个问题...

这是我的查询：

```
$query_articles = mysql_query("SELECT * FROM articles ORDER BY article_date DESC LIMIT 30") or die(mysql_error());
$row_articles = mysql_fetch_assoc($query_articles); 
```

我想做的是显示所有 30 个结果，但我希望它是这样的：

```
// Show article #1

// Then loop through articles 2-7

// Then show article #8

// Then loop through articles 9-30 
```

原因是因为我对上面列出的每个集合都有不同的格式。我可以轻松地进行单独的查询，但这并不理想，而且之后会搞砸我的分页。

那么我将如何使用那个查询来执行这些循环呢？任何帮助，将不胜感激！谢谢。

**///// 更新 /////**

好的，这就是我现在所拥有的，它给了我我想要的东西，但它也显示了第 31-42 行（现在我的数据库中甚至不存在）：

```
$query_articles = mysql_query("SELECT * FROM articles ORDER BY article_date DESC LIMIT 32") or die(mysql_error());
$row_articles = mysql_fetch_assoc($query_articles);

$shown_articles = array(1, 8);
$article_index = 1;
foreach ($row_articles as $article) {
do {
    if (in_array($article_index, $shown_articles)) { 

        echo '<p>'.$article_index.' ';
        echo $row_articles['title'];
        echo '</p>';

    } else {

        echo '<p>'.$article_index.' ';
        echo $row_articles['title'];
        echo '</p>';

    }
    $article_index++;
} while($row_articles = mysql_fetch_assoc($query_articles));
} 
```

关于它为什么显示额外行的任何想法？此外，如果我使用 mysql_fetch_array，它会上升到第 55 行。

**///// 更新 /////**

如果其他人需要，这是我的最终代码。我还添加了另一个条件，因为我还想分隔 9-30 行。

```
$query_articles = mysql_query("SELECT * FROM articles ORDER BY article_date DESC LIMIT 32") or die(mysql_error());

$shown_articles = array(1, 8);
$article_range = range(9, 30);
$article_index = 1;

while($row_articles = mysql_fetch_assoc($query_articles)) {
    if (in_array($article_index, $shown_articles)) { 

        echo '<p>'.$article_index.' ';
        echo $row_articles['title'];
        echo '</p>';

    } elseif (in_array($article_index, $article_range)) { 

        echo '<p>'.$article_index.' ';
        echo $row_articles['title'];
        echo ' - 9-30</p>';

    } else {

        echo '<p>'.$article_index.' ';
        echo $row_articles['title'];
        echo ' - 2-7</p>';

    }
    $article_index++;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T16:05:26.867

您首先根据您的结果创建一个迭代器：

```
$rows = new ArrayIterator($row_articles); 
```

然后你想防止该迭代器倒带：

```
$articles = new NoRewindIterator($rows); 
```

这有助于您创建子迭代器（例如，为您的列表），而不是倒退而是继续。

然后你可以按照你认为合适的方式对其进行操作：

```
foreach ($articles as $i => $article)
{
    switch ($i)
    {
        case 1:
            article_display($article);
            article_list(new LimitIterator($articles, 0, 6));
            break;

        case 8:
            article_display($article);
            article_list(new LimitIterator($articles, 0, 21));
            break;

        default:
            throw new Excpetion(sprintf("Unexpected i: %d", $i));
    }
} 
```

注意：它可能`$i`是从零开始的，那么您需要更改`case`语句中的硬编码数字，因为我已经将它写成从 1 开始。但我想你明白了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T15:59:59.230

您可以使用[模运算符](http://php.net/manual/en/language.operators.arithmetic.php)来实现此目的：

```
$query_articles = mysql_query("SELECT * FROM articles ORDER BY article_date DESC LIMIT 30") or die(mysql_error());
$row_articles = mysql_fetch_assoc($query_articles);

$i=0;
foreach($row_articles as $article) {
  if($i % 8 == 0) {
    // do stuff for row 0, 8 ..
  }
  else {
    // do stuff for other rows
  }
  $i++;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T17:02:06.683

您（和所有其他答案）对`mysql_fetch_assoc`返回的内容感到困惑。它不返回包含所有行的数组，它只返回一行。您通常不应该遍历这个数组，您只需访问您想要的特定列。

不过，我不明白你的`if`说法，因为它在两个分支中都做同样的事情。我猜真正的应用程序做了不同的事情，我刚刚插入了占位符。

```
$query_articles = mysql_query("SELECT * FROM articles ORDER BY article_date DESC LIMIT 32") or die(mysql_error());

$shown_articles = array(1, 8);
$article_index = 1;
while ($row_articles = mysql_fetch_assoc($query_articles)) {
    if (in_array($article_index, $shown_articles)) { 

        echo '<p>'.$article_index.' ';
        echo $row_articles['title'];
        echo '<br>Stuff for articles in $shown_articles';
        echo '</p>';

    } else {

        echo '<p>'.$article_index.' ';
        echo $row_articles['title'];
        echo '<br>Stuff for articles NOT in $shown_articles';
        echo '</p>';

    }
    $article_index++;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-29T15:59:25.350

```
$shown_articles = array(1, 8);
$article_index = 1;
foreach ($row_article as $article) {
    if (in_array($article_index, $shown_articles)) { 
        // Show article
    } else {
        // Do something else
    }
    $article_index++;
} 
```

# asp.net - 使用多线程处理 excel 文件时发生错误

> ID：12654189
> 
> 赞同：1
> 
> 时间：2012-09-29T15:55:53.870
> 
> 标签：asp.net, vb.net, multithreading, excel, quartz.net

在 Asp.net 中通过 Excel 互操作使用以下代码处理多线程时：

```
Public Class ImportService
Public Function ImportsFiles(ByVal files as list(Of String))
Dim rowEffect As Integer = 0
For j as Integer=0 to files.Count-1
dim fileAddress=files(j)
Dim app As New Application
Dim Wbook As Workbook

Try
    Wbook = app.Workbooks.Open(fileAddress, [ReadOnly]:=True)
    For i As Integer = 1 To Wbook.Sheets.Count
        If Not Wbook.Sheets(i).Name.ToString.ToLower.Contains("partial read of load profile") Then
            Dim con As New System.Data.OleDb.OleDbConnection("provider=Microsoft.ACE.OLEDB.12.0; Data Source=" & fileAddress & "; Extended Properties=""Excel 12.0 Xml;HDR=No;IMEX=1"";")
            Dim cmd As New OleDbCommand
            Dim s As String = "SELECT * FROM [" & Wbook.Sheets(i).Name & "$]"
            cmd.CommandText = s
            cmd.Connection = con
            Dim da As New OleDbDataAdapter
            da.SelectCommand = cmd
            Dim dt As New System.Data.DataTable
            da.Fill(dt)
            Dim err As New Dictionary(Of String, String)
            Dim fileDate As String = Wbook.Sheets(i).Name.ToString.Trim.Replace(" ", "/")
            rowEffect += InsertLps(Path.GetFileName(fileAddress), fileDate, dt.Rows, err)
            dt.Dispose()
            da.Dispose()
            con.Dispose()
            cmd.Dispose()
        End If
        ReleaseCOMObject(Wbook.Sheets(i))
        Next
    Wbook.Close(SaveChanges:=False)
Catch ex As Exception
    summary.Add(fileAddress, ex.Message)
Finally
    GC.Collect()
    GC.WaitForPendingFinalizers()
    GC.Collect()
    GC.WaitForPendingFinalizers()
    If app.Workbooks IsNot Nothing Then
        For Each wb In app.Workbooks
            For Each ws In wb.Worksheets
                ReleaseCOMObject(ws)
            Next
            wb.Close(False)
            ReleaseCOMObject(wb)
        Next
    End If
    app.Workbooks.Close()
    app.Quit()
    ReleaseCOMObject(app)
    GC.WaitForFullGCComplete()
Next
End Function
End Class 
```

发生错误：

> 为此 RuntimeCallableWrapper 转换到 COM 上下文 0x946d20 失败，并出现以下错误：调用的对象已与其客户端断开连接。（来自 HRESULT 的异常：0x80010108 (RPC_E_DISCONNECTED)）。这通常是因为创建此 RuntimeCallableWrapper 的 COM 上下文 0x946d20 已断开连接，或者它正忙于做其他事情。从当前 COM 上下文（COM 上下文 0x946c68）释放接口。这可能会导致损坏或数据丢失。为避免此问题，请确保所有 COM 上下文/单元/线程保持活动状态并且可用于上下文转换，直到应用程序完全使用代表存在于其中的 COM 组件的 RuntimeCallableWrapper 完成。

我正在尝试使用 Quartz.net 和更多触发器在后台工作。当 2 触发器通过此代码开始工作时：

```
Public Class ImportJob
Implements IJob
Public Sub Execute(context As IJobExecutionContext) Implements IJob.Execute
    Dim importHelpers As New ImportFilesHelpers
    Dim exts As New List(Of String)
    exts.Add(".xls")
    Dim files = importHelpers.GetFiles(ImportFilesHelpers.BaseAssress, exts)
    Dim import = New ImportService()
    import.ImportsFiles(files)
End Sub
End Class 
```

此行中的以下错误 Acoures

```
Dim fileDate As String = Wbook.Sheets(i).Name.ToString.Trim.Replace(" ", "/") 
```

# java - 安全、可互操作（.NET 和 Java 客户端）、通过 Internet 且易于实现的绑定

> ID：12654191
> 
> 赞同：-1
> 
> 时间：2012-09-29T15:56:19.410
> 
> 标签：java, .net, wcf, soa

在我的工作场所，我们正在尝试实施 WCF 服务。我们的要求是：

*   可与不同平台（Java、.NET、Android、iOS）互操作
*   最高安全（金融机构）
*   通过互联网

哪种装订最适合上述要求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T08:17:43.250

我建议您从[WCF 快速互操作绑定开始](http://wcf.codeplex.com/wikipage?title=WCF%20Express%20Interop%20Bindings)

# objective-c - iOS中UITableView异步加载图片的建议

> ID：12654192
> 
> 赞同：2
> 
> 时间：2012-09-29T15:56:28.007
> 
> 标签：objective-c, ios, ios5, asynchronous, afnetworking

我目前正在使用以下代码加载带有左侧缩略图、标题和副标题的表格：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {

        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
    }

    NSDictionary *post           = [posts objectAtIndex:indexPath.row];

    cell.textLabel.text       = [post objectForKey:@"post_text"];
    cell.detailTextLabel.text = [post objectForKey:@"post_author_name"];

    NSString *postpictureUrl = [post objectForKey:@"picture"];
    NSData   *data           = [NSData dataWithContentsOfURL:[NSURL URLWithString:postpictureUrl]];

    cell.imageView.image = [UIImage imageWithData:data];

    return cell;
} 
```

当然，由于我在这里进行同步加载，这在生产中不起作用。

在这种情况下，您对异步加载图像有什么建议？

我找到了[AF Networking](https://github.com/AFNetworking/AFNetworking)（还没有使用它），但想知道是否有更轻量级的方法来解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T16:20:51.743

`AsyncImageView`是你的朋友，看看[这里](https://github.com/nicklockwood/AsyncImageView)。

只需设置`imageURL`，您就可以开始了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T16:57:16.377

```
Use lazy loading in table view
Use this code

    (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {
        static NSString *CellIdentifier = @"cell";

        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

        if (cell == nil) {

            cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
        }

        NSDictionary *post = [posts objectAtIndex:indexPath.row];

        cell.textLabel.text = [post objectForKey:@"post_text"];
        cell.detailTextLabel.text = [post objectForKey:@"post_author_name"];
    dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH,  0ul);
        dispatch_async(queue, ^{
         //This is what you will load lazily
      NSString *postpictureUrl = [post objectForKey:@"picture"];
        NSData   *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:postpictureUrl]];
            dispatch_sync(dispatch_get_main_queue(), ^{

        cell.imageView.image = [UIImage imageWithData:data];
                [cell setNeedsLayout];
      }); 
}); 

        return cell;
    } 
```

# c# - ListView 不刷新其项目

> ID：12654196
> 
> 赞同：2
> 
> 时间：2012-09-29T15:57:57.300
> 
> 标签：c#, wpf, listview, binding

我有一个`ListView`地方：

```
public class RowData
{
    public string Box1 { get; set; }
    public string Box2 { get; set; }
    public string Box3 { get; set; }
};

private ObservableCollection<RowData> Data = new ObservableCollection<RowData>();

...

MyListView.ItemsSource = Data; 
```

我将 的属性`RowData`与`DisplayMemberBinding`列的属性绑定，例如：

```
MyGridViewColumn.DisplayMemberBinding = new Binding("Box1")); 
```

我处理`ListViewItem.DoubleClick`事件：

```
private void ListViewItem_DoubleClick(object sender, MouseButtonEventArgs e)
{
    ListViewItem item = sender as ListViewItem;
    RowData data = item.DataContext as RowData;
    data.Box1 = "new string";
} 
```

但是，当我将新字符串分配给我的数据时，ListView 不会刷新其项目（`Box1`即使`Box1`有新值，我仍然可以看到 的旧值 - 新的双击显示`Box1 == "new string"`在分配新字符串之前）。
为什么？我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T16:10:13.847

你忘了实现`INotifyPropertyChanged` [接口](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)

更新数据类中的任何属性后，您需要通知 View 自行更新。

```
public class RowData : INotifyPropertyChanged
{
    private string box1;
    public string Box1 
    {
        get { return box1; }
        set
        {
            if(box1 == value) return;
            box1= value;
            NotifyPropertyChanged("Box1 ");
        }
    }
 //repete the same to Box2 and Box3

 public event PropertyChangedEventHandler PropertyChanged;

 private void NotifyPropertyChanged(String propertyName)
 {
     if (PropertyChanged != null)
     {
         PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
     }
 }
 } 
```

# javascript - Backbone 的 fetch()：只添加集合中的新模型

> ID：12654198
> 
> 赞同：1
> 
> 时间：2012-09-29T15:58:05.613
> 
> 标签：javascript, backbone.js, underscore.js

当`fetch`在 initial 之后调用 a （响应用户的操作）`fetch`时，许多新获取的模型可能与 initial 中的现有模型相似`fetch`。如果我`fetch`使用该`add: true`选项调用，则集合中可能存在重复的模型。

**问题：**不是`id=1,2,3,4`从集合中删除所有现有模型（例如 with ）并插入新获取的模型（`id=1,2,3,5`），是否可以执行以下 2 个操作：

1.  仅添加新模型`id=5`，从而生成带有`id=1,2,3,4,5`. 然后只渲染新的 Views ( `id=5`)

2.  添加新模型`id=5`并删除新模型中未找到的模型`fetch`( `id=4`)。然后渲染新视图（`id=5`）并删除旧视图（`id=4`）

**试图：**

不是调用`App.listingCollection.fetch()`，而是`fetchNew()`使用函数。这仅适用于将新模型添加`id=5`到集合中。

如何在`id=5`不重新渲染现有视图的情况下触发仅 ()的新视图的渲染`id=1,2,3,4`？`new ListingMarkerView({ model:item }).render();`我用里面的行试过这个`ListingCollection`，但是我得到一个错误来响应里面的`var marker = L.marker([this.model.get('lat'), this.model.get('lng')]);`行`ListingMarkerView`：

**错误**

```
Uncaught TypeError: Object #<Object> has no method 'get' 
```

**收藏**

```
ListingCollection = Backbone.Collection.extend({
    model: Listing,
    url: '/api/search_by_bounds',

    fetchNew: function(options) {
        options = options || {};
        var collection = this,
            success = options.success;
        options.success = function(resp, status, xhr) {
            _(collection.parse(resp, xhr)).each(function(item) {
                // added this conditional block
                if (!collection.get(item.id)) {
                    collection.add(item, {silent:true});
                    new ListingMarkerView({ model:item }).render();
                }
            });
            if (!options.silent) {
                collection.trigger('reset', collection, options);
            }
            if (success) success(collection, resp);
        };
        return (this.sync || Backbone.sync).call(this, 'read', this, options);
    }
}); 
```

**看法**

```
ListingMarkerView = Backbone.View.extend({

    render: function() {
        var marker = L.marker([this.model.get('lat'), this.model.get('lng')]);
        markers.addLayer(marker);
    },

    close: function() {
        this.unbind;
    }

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T17:18:19.680

RESTful API 没有与之对话的客户端的状态概念，因此在`GET`请求检索对象列表时（例如[http://example.com/restapi/user/](http://example.com/restapi/user/)），其余服务器应始终返回一个完整的匹配对象的列表。

在 Backbone 端，您应该只`.reset`使用来自服务器的列表来收集您的集合。 `.reset`将清空集合，然后添加所有项目，例如：

```
my_collection.fetch({success: function(collection, resp){ 
    collection.reset(resp, {silent: true});
}}); 
```

这样您就不会发生碰撞，也不必担心任何事情。除非您在本地集合中更改了尚未保存回服务器的模型。

如果您正在寻找一种方法来防止修改集合中的本地项目，那将需要类似于您上面所说的巫术。

# android - 将文件写入应用程序目录 - 不是 SDCARD

> ID：12654199
> 
> 赞同：2
> 
> 时间：2012-09-29T15:58:33.730
> 
> 标签：android

好的，所以我在这里遇到了一些麻烦。我做了一些谷歌搜索，但真的没有得到明确的答案。

你看，我的项目的“原始”文件夹中有一个文件（没有扩展名）。我的应用程序需要此文件来编写一些设置和注释。为了更加安全，我更喜欢使用这样的东西。

问题是，没有指南告诉我如何写入自己的文件。有很多关于如何将文件写入 SDCard 的指南，但我不喜欢这样，因为如果用户遇到 SD 卡问题，它可能会影响我的应用程序。

此外，关于写入 SD 卡的一件事是制作文件“MODE_WORLD_READABLE”，因为如果有任何东西碰到 SDCard，任何人都可以读取它。这是我不想发生的事情。最重要的是，如果用户使用 USB 大容量存储设备安装 USB 或移除/更改 SD 卡，则文件将丢失。

我怎么能继续让我的应用程序在自己的目录上读/写？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T16:27:36.217

> 问题是，没有指南告诉我如何写入自己的文件。

当然有：http: [//developer.android.com/guide/topics/data/data-storage.html](http://developer.android.com/guide/topics/data/data-storage.html)

> 有大量关于如何将文件写入 SDCard 的指南

不，有“关于如何将文件写入的大量指南”到外部存储，这可能是也可能不是“SDCard”，具体取决于设备。

> 我怎么能继续让我的应用程序在自己的目录上读/写？

要获取内部存储上的文件，您有两个主要选择：

1.  分别使用`openFileInput()`和`openFileOutput()`获取内部存储根目录中的`InputStream`文件`OutputStream`

2.  用于`getFilesDir()`获取`File`指向内部存储根目录的对象，您可以从中创建子目录、为输入和输出创建流和读取器等。

从那里，它是标准的 Java 文件 I/O。

# vim - Vim 注册标准

> ID：12654203
> 
> 赞同：2
> 
> 时间：2012-09-29T15:58:51.053
> 
> 标签：vim, vim-registers

我正在考虑将我的寄存器设置为与常见的编码技术相同。例如，我正在考虑这样做：

```
:let @i = "int i=0;" 
```

然后我会设置`f`for循环，`w`for循环等。这是一种不好的技术还是有更好的方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-29T16:03:06.463

我认为您可以改用片段。尝试查看 snipmate 插件[http://www.vim.org/scripts/script.php?script_id=2540](http://www.vim.org/scripts/script.php?script_id=2540)

您只需键入“inti TAB”，它就会扩展为“int i=0;” 如果你希望。

它已经有很多语言的片段，但你可以配置它来做你想做的事。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-29T16:41:18.870

对于简单的扩展，内置的缩写就足够了：

```
:iab ii int i=0; 
```

如果你想要参数扩展，不同的“停止”来填充数据，以及其他高级功能，各种*片段*插件（在[http://www.vim.org/](http://www.vim.org/)上）提供了这个功能；*snipMate*是第一个被广泛使用的。

# actionscript-3 - Flash actionscript 3 预加载器中的错误 #1010

> ID：12654204
> 
> 赞同：0
> 
> 时间：2012-09-29T15:58:51.940
> 
> 标签：actionscript-3, flash, actionscript, flash-cs5

我正在尝试使用预加载器来加载 swf 文件并不断收到此错误消息。

```
TypeError: Error #1010: A term is undefined and has no properties.
at mpb_animated_rotator_fla::mc_main_holder_16/frame1()[mpb_animated_rotator_fla.mc_main_holder_16::frame1:36]
at flash.display::MovieClip/gotoAndStop()
at mpb_animated_rotator_fla::mc_starter_holder_1/frame10()[mpb_animated_rotator_fla.mc_starter_holder_1::frame10:1] 
```

主文件中的movieclips 已被导出以通过actionscript 访问。我是 as3 的新手，需要帮助。

预加载器代码

```
import flash.display.*;
import flash.events.*;
var myContent:URLRequest = new URLRequest("mpb_animated_rotator.swf");
var myLoader:Loader = new Loader();
var eContent_mc:MovieClip = new MovieClip(); 

myLoader.load(myContent);

myLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, loadComplete);

function loadComplete(e:Event):void
{
myLoader.contentLoaderInfo.removeEventListener(Event.COMPLETE, loadComplete);
guiding_loader.addEventListener(Event.ENTER_FRAME, loadingF);
function loadingF(e:Event):void{
    if (guiding_loader.ocean.currentFrame > 200){
        eContent_mc = MovieClip(myLoader.content);
        gotoAndStop(2);
        guiding_loader.removeEventListener(Event.ENTER_FRAME, loadingF);
    }
}

} 
```

主文件代码

```
import fl.transitions.Tween;
import fl.transitions.easing.*;
import fl.transitions.TweenEvent;
import flash.events.Event;
import flash.display.MovieClip;

var guiding:mc_guiding_complete = new mc_guiding_complete;
var innovation:mc_innovation_complete = new mc_innovation_complete;
var game:mc_game_change = new mc_game_change;
var yourb:mc_your_business_complete = new mc_your_business_complete;

addChild(guiding);
guiding.x = -215.20;
guiding.y = 230.25;
guiding.alpha = 0;
addChild(yourb);
yourb.x = 378;
yourb.y = 181;
yourb.alpha = 0;
addChild(game);
game.x = 377.95;
game.y = 181;
game.alpha = 0;
addChild(innovation);
innovation.x = 371.40;
innovation.y = 181;
innovation.innovate.gotoAndPlay(2);

innovation.innovate.addEventListener(Event.ENTER_FRAME, movetoGame);
game.chess.addEventListener(Event.ENTER_FRAME, movetoYourb);
yourb.industry.addEventListener(Event.ENTER_FRAME, movetoGuiding);
guiding.ocean.addEventListener(Event.ENTER_FRAME, movetoInnovation);

guiding.menu1.innovate_btn.addEventListener(MouseEvent.CLICK, m1innovateClick);
guiding.menu1.game_btn.addEventListener(MouseEvent.CLICK, m1gameClick);
guiding.menu1.yourb_btn.addEventListener(MouseEvent.CLICK, m1yourbClick);
innovation.menu2.ocean_btn.addEventListener(MouseEvent.CLICK, m2oceanClick);
innovation.menu2.game_btn.addEventListener(MouseEvent.CLICK, m2gameClick);
innovation.menu2.yourb_btn.addEventListener(MouseEvent.CLICK, m2yourbClick);
game.menu3.ocean_btn.addEventListener(MouseEvent.CLICK, m3oceanClick);
game.menu3.innovate_btn.addEventListener(MouseEvent.CLICK, m3innovateClick);
game.menu3.yourb_btn.addEventListener(MouseEvent.CLICK, m3yourbClick);
yourb.menu4.ocean_btn.addEventListener(MouseEvent.CLICK, m4oceanClick);
yourb.menu4.innovate_btn.addEventListener(MouseEvent.CLICK, m4innovateClick);
yourb.menu4.game_btn.addEventListener(MouseEvent.CLICK, m4gameClick);

function m1innovateClick(event:MouseEvent):void {
var guidingout2Tween:Tween = new Tween(guiding, "alpha", Strong.easeOut, 1, 0, 1, true);
var innovationin2Tween:Tween = new Tween(innovation, "alpha", Strong.easeOut, 0, 1, 1, true);
innovationin2Tween.addEventListener(TweenEvent.MOTION_FINISH, innovate2Play);
function innovate2Play (event:TweenEvent):void{
    innovation.innovate.gotoAndPlay(2);
    guiding.ocean.gotoAndStop(1);
    setChildIndex(innovation,4);
    setChildIndex(guiding,1);
    setChildIndex(yourb,2);
    setChildIndex(game,3);
}
}

function m1gameClick(event:MouseEvent):void {
var guidingout3Tween:Tween = new Tween(guiding, "alpha", Strong.easeOut, 1, 0, 1, true);
var gamein2Tween:Tween = new Tween(game, "alpha", Strong.easeOut, 0, 1, 1, true);
gamein2Tween.addEventListener(TweenEvent.MOTION_FINISH, game2Play);
function game2Play (event:TweenEvent):void{
    game.chess.gotoAndPlay(2);
    guiding.ocean.gotoAndStop(1);
    setChildIndex(innovation,1);
    setChildIndex(guiding,2);
    setChildIndex(yourb,3);
    setChildIndex(game,4);
}
}

function m1yourbClick(event:MouseEvent):void {
var guidingout4Tween:Tween = new Tween(guiding, "alpha", Strong.easeOut, 1, 0, 1, true);
var yourbin2Tween:Tween = new Tween(yourb, "alpha", Strong.easeOut, 0, 1, 1, true);
yourbin2Tween.addEventListener(TweenEvent.MOTION_FINISH, yourb2Play);
function yourb2Play (event:TweenEvent):void{
    guiding.ocean.gotoAndStop(1);
    yourb.industry.gotoAndPlay(2);
    setChildIndex(innovation,2);
    setChildIndex(guiding,3);
    setChildIndex(yourb,4);
    setChildIndex(game,1);
}
}

function m2oceanClick(event:MouseEvent):void {
var innovationout2Tween:Tween = new Tween(innovation, "alpha", Strong.easeOut, 1, 0, 1, true);
var guidingin2Tween:Tween = new Tween(guiding, "alpha", Strong.easeOut, 0, 1, 1, true);
guiding.ocean.gotoAndPlay(2);
guidingin2Tween.addEventListener(TweenEvent.MOTION_FINISH, guiding2Play);
function guiding2Play (event:TweenEvent):void{
    innovation.innovate.gotoAndStop(1);
    setChildIndex(innovation,3);
    setChildIndex(guiding,4);
    setChildIndex(yourb,1);
    setChildIndex(game,2);
}
}

function m2gameClick(event:MouseEvent):void {
var innovationout3Tween:Tween = new Tween(innovation, "alpha", Strong.easeOut, 1, 0, 1, true);
var gamein3Tween:Tween = new Tween(game, "alpha", Strong.easeOut, 0, 1, 1, true);
gamein3Tween.addEventListener(TweenEvent.MOTION_FINISH, game3Play);
function game3Play (event:TweenEvent):void{
    game.chess.gotoAndPlay(2);
    innovation.innovate.gotoAndStop(1);
    setChildIndex(innovation,1);
    setChildIndex(guiding,2);
    setChildIndex(yourb,3);
    setChildIndex(game,4);
}
}

function m2yourbClick(event:MouseEvent):void {
var innovationout4Tween:Tween = new Tween(innovation, "alpha", Strong.easeOut, 1, 0, 1, true);
var yourbin3Tween:Tween = new Tween(yourb, "alpha", Strong.easeOut, 0, 1, 1, true);
yourbin3Tween.addEventListener(TweenEvent.MOTION_FINISH, yourb3Play);
function yourb3Play (event:TweenEvent):void{
    innovation.innovate.gotoAndStop(1);
    yourb.industry.gotoAndPlay(2);
    setChildIndex(innovation,2);
    setChildIndex(guiding,3);
    setChildIndex(yourb,4);
    setChildIndex(game,1);
}
}

function m3oceanClick(event:MouseEvent):void {
var gameout2Tween:Tween = new Tween(game, "alpha", Strong.easeOut, 1, 0, 1, true);
var guidingin3Tween:Tween = new Tween(guiding, "alpha", Strong.easeOut, 0, 1, 1, true);
guiding.ocean.gotoAndPlay(2);
guidingin3Tween.addEventListener(TweenEvent.MOTION_FINISH, guiding3Play);
function guiding3Play (event:TweenEvent):void{
    game.chess..gotoAndStop(1);
    setChildIndex(innovation,3);
    setChildIndex(guiding,4);
    setChildIndex(yourb,1);
    setChildIndex(game,2);
}
}

function m3innovateClick(event:MouseEvent):void {
var gameout3Tween:Tween = new Tween(game, "alpha", Strong.easeOut, 1, 0, 1, true);
var innovationin3Tween:Tween = new Tween(innovation, "alpha", Strong.easeOut, 0, 1, 1, true);
innovationin3Tween.addEventListener(TweenEvent.MOTION_FINISH, innovation3Play);
function innovation3Play (event:TweenEvent):void{
    game.chess.gotoAndStop(1);
    innovation.innovate.gotoAndPlay(2);
    setChildIndex(innovation,4);
    setChildIndex(guiding,1);
    setChildIndex(yourb,2);
    setChildIndex(game,3);
}
}

function m3yourbClick(event:MouseEvent):void {
var gameout4Tween:Tween = new Tween(game, "alpha", Strong.easeOut, 1, 0, 1, true);
var yourbin4Tween:Tween = new Tween(yourb, "alpha", Strong.easeOut, 0, 1, 1, true);
yourbin4Tween.addEventListener(TweenEvent.MOTION_FINISH, yourb4Play);
function yourb4Play (event:TweenEvent):void{
    game.chess..gotoAndStop(1);
    yourb.industry.gotoAndPlay(2);
    setChildIndex(innovation,2);
    setChildIndex(guiding,3);
    setChildIndex(yourb,4);
    setChildIndex(game,1);
}
}

function m4oceanClick(event:MouseEvent):void {
var yourbout2Tween:Tween = new Tween(yourb, "alpha", Strong.easeOut, 1, 0, 1, true);
var guidingin4Tween:Tween = new Tween(guiding, "alpha", Strong.easeOut, 0, 1, 1, true);
guiding.ocean.gotoAndPlay(2);
guidingin4Tween.addEventListener(TweenEvent.MOTION_FINISH, guiding4Play);
function guiding4Play (event:TweenEvent):void{
    yourb.industry.gotoAndStop(1);
    setChildIndex(innovation,3);
    setChildIndex(guiding,4);
    setChildIndex(yourb,1);
    setChildIndex(game,2);
}
}

function m4innovateClick(event:MouseEvent):void {
var yourbout3Tween:Tween = new Tween(yourb, "alpha", Strong.easeOut, 1, 0, 1, true);
var innovationin4Tween:Tween = new Tween(innovation, "alpha", Strong.easeOut, 0, 1, 1, true);
innovationin4Tween.addEventListener(TweenEvent.MOTION_FINISH, innovation4Play);
function innovation4Play (event:TweenEvent):void{
    yourb.industry.gotoAndStop(1);
    innovation.innovate.gotoAndPlay(2);
    setChildIndex(innovation,4);
    setChildIndex(guiding,1);
    setChildIndex(yourb,2);
    setChildIndex(game,3);
}
}

function m4gameClick(event:MouseEvent):void {
var yourbout4Tween:Tween = new Tween(yourb, "alpha", Strong.easeOut, 1, 0, 1, true);
var gamein4Tween:Tween = new Tween(game, "alpha", Strong.easeOut, 0, 1, 1, true);
gamein4Tween.addEventListener(TweenEvent.MOTION_FINISH, game4Play);
function game4Play (event:TweenEvent):void{
    yourb.industry.gotoAndStop(1);
    game.chess.gotoAndPlay(2);
    setChildIndex(innovation,1);
    setChildIndex(guiding,2);
    setChildIndex(yourb,3);
    setChildIndex(game,4);
}
}

function movetoGame(event:Event):void{
if(innovation.innovate.currentFrame == 200){
    var innovationoutTween:Tween = new Tween(innovation, "alpha", Strong.easeOut, 1, 0, 1, true);
    var gameinTween:Tween = new Tween(game, "alpha", Strong.easeOut, 0, 1, 1, true);
    gameinTween.addEventListener(TweenEvent.MOTION_FINISH, gamePlay);
    function gamePlay (event:TweenEvent):void{
        game.chess.gotoAndPlay(2);
        setChildIndex(innovation,1);
        setChildIndex(guiding,2);
        setChildIndex(yourb,3);
        setChildIndex(game,4);
    }
}
}

function movetoYourb(event:Event):void{
if(game.chess.currentFrame == 200){
    var gameoutTween:Tween = new Tween(game, "alpha", Strong.easeOut, 1, 0, 1, true);
    var yourbinTween:Tween = new Tween(yourb, "alpha", Strong.easeOut, 0, 1, 1, true);
    yourbinTween.addEventListener(TweenEvent.MOTION_FINISH, yourbPlay);
    function yourbPlay (event:TweenEvent):void{
        yourb.industry.gotoAndPlay(2);
        setChildIndex(innovation,2);
        setChildIndex(guiding,3);
        setChildIndex(yourb,4);
        setChildIndex(game,1);
    }
}
}

function movetoGuiding(event:Event):void{
if(yourb.industry.currentFrame == 200){
    var yourboutTween:Tween = new Tween(yourb, "alpha", Strong.easeOut, 1, 0, 1, true);
    var guidinginTween:Tween = new Tween(guiding, "alpha", Strong.easeOut, 0, 1, 1, true);
    guiding.ocean.gotoAndPlay(2);
    guidinginTween.addEventListener(TweenEvent.MOTION_FINISH, guidingPlay);
    function guidingPlay (event:TweenEvent):void{
        setChildIndex(innovation,3);
        setChildIndex(guiding,4);
        setChildIndex(yourb,1);
        setChildIndex(game,2);
    }
}
}

function movetoInnovation(event:Event):void{
if(guiding.ocean.currentFrame == 200){
    var guidingoutTween:Tween = new Tween(guiding, "alpha", Strong.easeOut, 1, 0, 1, true);
    var innovationinTween:Tween = new Tween(innovation, "alpha", Strong.easeOut, 0, 1, 1, true);
    innovationinTween.addEventListener(TweenEvent.MOTION_FINISH, innovationPlay);
    function innovationPlay (event:TweenEvent):void{
        innovation.innovate.gotoAndPlay(2);
        setChildIndex(innovation,4);
        setChildIndex(guiding,1);
        setChildIndex(yourb,2);
        setChildIndex(game,3);
    }
}
} 
```

主文件本身没有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T21:51:42.943

首先检查加载的 swf 的 FLA 库中的符号 mc_main_holder 发生了什么。堆栈跟踪清楚地表明您正在尝试访问该符号第一帧中未定义变量的属性：

```
TypeError: Error #1010: A term is undefined and has no properties.
at mpb_animated_rotator_fla::mc_main_holder_16/frame1() 
```

堆栈跟踪继续说，在 mc_starter_holder 符号的第 10 帧中，您正在尝试播放 mc_main_holder 的第 1 帧，这就是它卡住的地方：

```
at mpb_animated_rotator_fla::mc_starter_holder_1/frame10() 
```

[您可以在此处](http://active.tutsplus.com/tutorials/actionscript/fixing-bugs-in-as3-introduction/)阅读有关解释堆栈跟踪和理解错误的更多信息。

另外，并且不相关，我注意到您有语法错误：

```
function m3oceanClick(event:MouseEvent):void {
var gameout2Tween:Tween = new Tween(game, "alpha", Strong.easeOut, 1, 0, 1, true);
var guidingin3Tween:Tween = new Tween(guiding, "alpha", Strong.easeOut, 0, 1, 1, true);
guiding.ocean.gotoAndPlay(2);
guidingin3Tween.addEventListener(TweenEvent.MOTION_FINISH, guiding3Play);
function guiding3Play (event:TweenEvent):void{
    game.chess..gotoAndStop(1);
    setChildIndex(innovation,3);
    setChildIndex(guiding,4);
    setChildIndex(yourb,1);
    setChildIndex(game,2);
}
} 
```

第 7 行下写着“game.chess..gotoAndStop(1);”。你有一个双..那里。

祝你好运！

# c# - 在 C# windows 应用程序中打开 Microsoft Word 文档

> ID：12654206
> 
> 赞同：0
> 
> 时间：2012-09-29T15:59:41.563
> 
> 标签：c#, windows, ms-word

我想在 C# windows 应用程序中打开 Microsoft Word 文档，但不想显示 Microsoft Word 格式和保存控件。我想实现以下步骤，用户只能在 Windows 应用程序中打开文档修改文档，用户只能使用 Windows 应用程序提供的格式化工具栏来更改格式。用户可以保存文档。

# java - R.java 保留对非现有资源 ID 的引用

> ID：12654212
> 
> 赞同：0
> 
> 时间：2012-09-29T16:00:03.310
> 
> 标签：java, android, eclipse

如何在 Eclipse 的 android 项目中摆脱对 R.java 中不存在的 id 的引用。它适用于我已重命名或删除的资源。

有时发生的情况是我删除了一个字符串作为示例，但项目仍将其显示为现有资源。当我运行应用程序时，会显示来自 R.java 的资源 ID。我怎样才能把这些清理干净？

清洁项目不起作用，也不构建它。

建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T16:17:03.803

删除 R.java。它将在您下次构建时使用非缓存版本再次重新生成。

# xaml - 允许用户在 Windows 8 应用程序中使用 RichEditBox 中的选项卡吗？

> ID：12654213
> 
> 赞同：5
> 
> 时间：2012-09-29T16:00:09.867
> 
> 标签：xaml, c#-4.0, windows-8, microsoft-metro

现在选项卡功能将焦点移动到下一个控件，我想要它，所以它实际上只是在文本框中的选项卡。

我注意到您也无法在 Windows 8 Mail 应用程序中使用选项卡....

还有一个 RichTextBox 替代品吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-29T16:58:50.027

目前（在 RTM 版本中）没有[RichEditBox](http://msdn.microsoft.com/en-us/library/windows/apps/BR227548)`AcceptsTab`的类似设置（它只有[AcceptsReturn](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.richeditbox.acceptsreturn.aspx)）另请参阅此[功能建议。](http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/2862272-add-an-acceptstab-property-to-richeditbox)

但是，您可以订阅您可以自己处理 tab 键的`KeyDown`事件：`RichEditBox`

```
private void RichEditBox_KeyDown(object sender, KeyEventArgs e)
{
    if (e.Key == VirtualKey.Tab)
    {
        RichEditBox richEditBox = sender as RichEditBox;
        if (richEditBox  != null)
        {
            richEditBox.Document.Selection.TypeText("\t");
            e.Handled = true;
        }
    }
} 
```

# c - 在 C 中实现最小堆 - 使用数组？

> ID：12654214
> 
> 赞同：1
> 
> 时间：2012-09-29T16:00:22.813
> 
> 标签：c, binary-tree, min-heap

我正在尝试学习和实现一个最小堆来解决一个问题：[循环创建双精度并将它们插入到排序数组中，在 C](https://stackoverflow.com/questions/12606895/loop-that-creates-doubles-and-insert-them-into-sorted-array-in-c)

基本上，我从一组双打开始，从小到大排序。然后，我生成双打（可能是随机的）并且必须将新生成的双打添加到集合中，同时保持排序。此外，每次我插入一个双精度数时，我都会从集合中删除最小的双精度数。

（**编辑**- 集合不必完全排序。目标是能够在每次插入双精度后查找并删除最小元素。保持集合排序是我的第一个天真的解决方案。）

听起来像是最小堆要做的事情。

**试图**

由于在 C 中，数组大小是预先声明的，因此我必须创建一个长度 = 最大双精度数的数组。然后，用值 max_double 填充该数组的所有条目。

使用此处描述的方法作为指南： http: [//opendatastructures.org/versions/edition-0.1e/ods-java/10_1_BinaryHeap_Implicit_Bi.html](http://opendatastructures.org/versions/edition-0.1e/ods-java/10_1_BinaryHeap_Implicit_Bi.html)，我可以创建函数来将值插入和删除到这个数组中。

插入：用数字替换数组的最后一个条目（始终是 max_double）。然后不断与父节点的值进行交换，直到父节点的值小于新增的值。

移除：将根节点替换为 max_double，然后与它的两个子节点进行比较，与最小的子节点交换，直到它的两个子节点为 max_double。

**问题**

我对所有这些都使用了正确的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T16:07:21.620

堆不会使数组排序。它只是遵循规则，这意味着在最小堆中，父母总是比他的孩子小。不幸的是，孩子们不必遵守秩序。

如果你想在数组中实现堆，wiki 有一个很棒的页面。

[http://en.wikipedia.org/wiki/Binary_heap](http://en.wikipedia.org/wiki/Binary_heap)

更多解释：

插入：将元素添加到数组的末尾（不替换！）如果顺序正确，则将元素与父元素在（i-1/2）处进行比较。否则交换并再次执行第 2 步。（记得更新当前索引）

Delete : 与数组中的最后一个元素交换 min 删除最后一个元素 现在从顶部开始，比较根与它的孩子，与最小的交换，否则停止。继续与孩子比较，直到满足条件或您没有其他孩子。

对于从 0 开始的索引，父级位于 floor((i-1)/2) 处，子级位于 2i+1 和 2i+2

还有一件事，我建议使用双端队列来存储你的双打。

# java - 强制监听器执行

> ID：12654215
> 
> 赞同：-2
> 
> 时间：2012-09-29T16:00:39.717
> 
> 标签：java, listeners

我有个问题。

我有一个带有监听器的对象。

我希望能够手动执行它，以某种方式欺骗它触发它的事件发生。也许有一种方法可以访问特定的侦听器并告诉它执行？

对象是 Box.Filler，侦听器是 ComponentListener（实际上是适配器）。它在 ComponentResized 事件上被激活。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T16:07:33.860

好吧，如果您使用`ComponentListener`我的猜测是您可以直接调用它：

```
listener.componentResized(new ComponentEvent (this,id)) 
```

如果您使用的是适配器

```
adapter.componentResized(new ComponentEvent (this,id)) 
```

如果你的类实现了 ComponentListener

```
componentResized(new ComponentEvent (this,id)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T16:02:58.507

您可以手动触发事件。如果您使用的是 ComponentListener，那么您可以使用此界面中列出的方法之一，请参阅[http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/event/ComponentListener.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/event/ComponentListener.html)。

# json - 生成 JSON 而不是 HTML 的静态站点生成器

> ID：12654217
> 
> 赞同：6
> 
> 时间：2012-09-29T16:00:53.727
> 
> 标签：json, backbone.js, markdown, jekyll, middleman

我是[Middleman](http://middlemanapp.com/)和[Jekyll](http://jekyllrb.com/)等静态站点生成器的忠实粉丝。从平面文件生成完整的博客并将它们放到 Amazon S3 上，而不必担心与数据库相关的性能和/或安全问题，感觉非常棒。

在花了一些时间使用 AngularJS、Ember 和 Backbone 开发 Web 应用程序之后，我觉得生成 JSON 文件而不是 HTML 至少值得一试。

我已经使用 Jekyll、Liquid Templates 和 shell 脚本实现了这个想法，但它感觉不仅仅是一个概念证明。也许你们中的一个人提出了相同的想法，知道一个更适合此类任务的静态站点生成器，或者还有什么要分享的？

# google-drive-api - 使用 google drive api 时出现致命错误

> ID：12654220
> 
> 赞同：0
> 
> 时间：2012-09-29T16:01:22.313
> 
> 标签：google-drive-api

我想从 php 文件中获取我的 google docs 文件，我编写了以下代码：

```
require_once ("google/Google_Client.php");
require_once ("google/contrib/Google_DriveService.php");

$client=new Google_Client();
$client->setClientId('XXXX');
$client->setClientSecret('xxxx');
$client->setRedirectUri('urn:ietf:wg:oauth:2.0:oob');
$client->setScopes(array('https://www.googleapis.com/auth/drive'));
$service = new Google_DriveService($client);
$parameters=array();
$parameters['q'] = "title contains 'something'";
$children = $service->children->listChildren('root',$parameters);
var_dump($children); 
```

但返回以下信息：

> 致命错误：未捕获的异常“Google_ServiceException”和消息“调用 GET 时出错[https://www.googleapis.com/drive/v2/files/root/children?q=title%20contains%20%27something%27](https://www.googleapis.com/drive/v2/files/root/children?q=title%20contains%20%27something%27) : (404) 不是成立'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T21:34:13.883

您的应用程序未正确执行 OAuth 流程，请查看 Google Drive SDK 文档中的 PHP 快速入门示例以了解应如何实现：

[https://developers.google.com/drive/quickstart](https://developers.google.com/drive/quickstart)

一旦您的代码正确执行 OAuth 流程，您就可以替换示例中的代码以使用您的代码上传文件以执行搜索。

# javascript - 从容器继承高度？

> ID：12654223
> 
> 赞同：0
> 
> 时间：2012-09-29T16:01:34.617
> 
> 标签：javascript, jquery, html, css

我正在构建一个 wordpress 站点，并且我希望侧边栏与容器具有相同的高度。

像这样：

![应该如何](../Images/b81998447d11d1de590a7a7913a1685d.png)

但是，有些页面看起来像这样：

![它看起来如何](../Images/93ed45601afc266376b3bc46b6b1295d.png)

这是当前的CSS：

```
 #secondary .widget_nav_menu{
    background:url(xxxsbbg.png) repeat-y;

    width:270px;
    height:auto;
    margin-left:-50px;
    padding-bottom:400px;
    padding-top:20px;

    }
    #savusumo{
    background:url(xxxsavusumo.png);
    height:341px;
    width:361px;
    position:absolute;
    bottom:50px;
    left:-120px;
    }

#secondary .menu a{
color:white;
}
#secondary .menu{
list-style:none;
}
#secondary .menu .menu-item{

}
#secondary .sub-menu{
list-style:none;
}
.valittu{
width:100px;
background:red;
}
#secondary .menu-item{
margin:10px; 0px;
} 
```

我试过`height:100%;`了，但看起来几乎一样。并且使用inherit 会继承div #secondary 的高度，而我需要继承#primary 的高度。可能吗？

侧边栏：

```
<div id="secondary" class="widget-area" role="complementary" style="position:relative;">
            <?php if ( ! dynamic_sidebar( 'sidebar-1' ) ) : ?>

                <aside id="archives" class="widget">
                    <h3 class="widget-title"><?php _e( 'Archives', 'twentyeleven' ); ?></h3>
                    <ul>
                        <?php wp_get_archives( array( 'type' => 'monthly' ) ); ?>
                    </ul>
                </aside>

                <aside id="meta" class="widget">
                    <h3 class="widget-title"><?php _e( 'Meta', 'twentyeleven' ); ?></h3>
                    <ul>
                        <?php wp_register(); ?>
                        <li><?php wp_loginout(); ?></li>
                        <?php wp_meta(); ?>
                    </ul>
                </aside>

            <?php endif; // end sidebar widget area ?>

            <div id="savusumo"></div>
        </div><!-- #secondary .widget-area --> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T16:10:04.833

利用`display: table;`

```
<div class="container">
  <div class="left">Left</div>
  <div class="right">Right</div>
</div>

.container{ display: table; overflow: hidden; }
.left, .right { display: table-cell; } 
```

**编辑：**

这是一个带有 jQ​​uery 且不显示的[**JSFiddle**](http://jsfiddle.net/f3k95/)：表；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T19:08:57.470

好的，所以在您发表评论后，我假设您使用的是 211 模板，这是您安装 3.4.2 时的默认设置。因此，我查看了模板设置并发现（在非常基本的意义上）您可以执行以下操作并使用该`display: table`技术：

**主索引模板 (index.php)**

将`get_sidebar()`这个模板底部的函数移动到顶部的右下方`get_header()`：

```
...
get_header(); 

get_sidebar(); ?>

    <div id="primary">
        <div id="content" role="main"> 
```

这样做是“解决”布局问题。本模板使用`float`方法，侧边栏内容实际上是在左侧区域*之后*注入的。`content`我对这种技术感到恼火的原因之一，也是您无法拉伸侧边栏的根本原因。

**标头（header.php）**

现在查看这个文件，它包含 DOCTYPE`html`和`main`元素标签，以及`head`我们正在寻找的标签。将其复制并粘贴到指定的位置：

```
 wp_head(); // Find this and right after the close ?> tag...
?>
<style>
#page #main {
    display: table;
}
#page #main #secondary,
#page #main #primary {
    display: table-cell;
    float: none;
}
#page #main #primary {
    margin: 0 20px;
    padding: 0 30px;
}
#page #main #primary #content {
    margin: 0;
    width: 100%;
}
#page #main #secondary {
    width: 30%;
    padding: 0 30px;
    background-color: #cff; // <<< This right here demonstrates the full height
}
</style>
</head>

<body <?php body_class(); ?>> 
```

就是这样！好吧，实际上，有很多地方可以检查并确定在其他模板中需要做什么（如果有的话）。这至少向您表明它可以工作，您只需操纵`get_sidebar()`函数的位置并重置一些 CSS 设置，例如`float: left`.

这是上面应用于我网站上的简单 WP 安装的模板：

[http://jfcoder.com/wp/](http://jfcoder.com/wp/)

# eclipse - Mercurial TextAuth 插件错误“解析异常：'*** 无法从 C:\inetpub\auth 导入扩展 textauth.file：语法无效（auth，第 1 行）'”

> ID：12654225
> 
> 赞同：0
> 
> 时间：2012-09-29T16:01:47.830
> 
> 标签：eclipse, mercurial, zend-studio, mercurialeclipse

我已将 TextAuth 插件安装到 Mercurial 以添加用于拉/推代码的基本身份验证。

通过 Tortoise HG Mercurial 界面，我收到以下错误，但操作继续并且身份验证被接受并正常工作，即，如果我更改名为“auth”的文件中的用户名，则不再接受旧的用户名，等等。

在我开始将 Zend Studio 与 Mercurial Eclipse 插件一起使用之前，这不是问题，Mercurial 会抛出相同的错误，但 Zend/Eclipse 不会继续，就像 Tortoise HG 工作台一样，所以它完全停止工作......

任何帮助都会很棒，谢谢。

```
"Parse exception: '*** failed to import extension textauth.file from C:\inetpub\auth: invalid syntax (auth, line 1)'" 
```

编辑：这是纯文本文件的内容。它是没有 BOM 的 UTF-8。

```
david:sha512:34306d47f380e8c4:3e1abe5b38db2b56b997adca78030a1a085dcf2961413820813b9972b3d91c676921419b5b2e3953571e35a4efd8f68e95e9880b2b54756ab5c7256fb6c6cdaf
steven:sha512:589c75e34563ec0c:ba097345634e7ae5d1b577b2093563c1ed06af78e90e8197116140c22dd14745d6aaebaf05bb005a4e916114fec086b95b2d6eab1286be94c2d91f7a5d4426c
dev1:sha512:dcdb2734655344b:78531b07d09345634ab2265fc5acc3b2a92386f2ab2168ce559f6db5bf9da034fde50cbec128ebb89a210fcf918582ed366de1f0998e6c570a1ce498429a4ad
dev2:sha512:c8fc3a3456d9470:6efca993620138644d203695ced07f6aaddb0d2752fd12970639012f66a5c07b210564b9046d818bfcbc978aff5151400269b9a816ed9279a929cb46aa4a53
dev3:sha512:d26466ec818cd62a:ebc0ff463546e3456aff6e8828bbc8ff812990ddaa4f112d3d932d943598e7b27c6547c14b3786b2ef3fe955eb01e12c67aaea175bc011ae0b6eb1fa4f093ece 
```

密码有乱码，所以如果你尝试它但它不起作用，这就是原因，但它们是由 authedit 命令生成的，并且在身份验证期间被接受。

这是 hgrc 文件的内容，其中包含明显的混淆/更改内容。

```
# Generated by TortoiseHg

[web]
push_ssl = False
allow_push = *
[ui]
username = david
[paths]
repo = http://domain.com/
Live = C:\inetpub\domain.com

[auth]
repo.schemes = http
[auth]
repo.username = david
repo.password = passstring

[extensions]
textauth = C:\inetpub\textauth.py
textauth.file = C:\inetpub\auth

[textauth]
file = C:\inetpub\auth

[tortoisehg]
postpull = update
autoresolve = True 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T03:08:58.217

我在网上找不到对 textauth 插件的参考，但我怀疑这是你的问题：

```
[extensions]
textauth = C:\inetpub\textauth.py
textauth.file = C:\inetpub\auth 
```

这就是说“加载两个单独的扩展，一个称为 textauth，一个（非法）称为 textauth.file。

你要这个：

```
[extensions]
textauth = C:\inetpub\textauth.py

[textauth]
file = C:\inetpub\auth 
```

因此，只需删除该部分中的`textauth.file =`行`[extensions]`。

这是一个容易犯的错误，因为当在命令行中给出时，`[section]`and`key`语法确实变成了`section.key`这样：

```
hg --config ui.username=david ... 
```

但在 .hgrc 中是：

```
[ui]
username = david 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T04:46:58.740

下面的所有内容都`[extensions]`被视为插件。C:\inetpub\auth 文件不是插件，它是插件使用的文件。你应该只有（当然除了 textauth.py 扩展）：

```
[textauth]
file = C:\inetpub\auth 
```

这部分文档是解释的地方，如果他们给出一个例子会很好：

> ## 文本认证
> 
> 控制 textauth 扩展行为的部分。
> 
> 支持的论点：
> 
> `file` 包含身份验证信息的文件的路径。该文件的内容应如下所述。

# ruby-on-rails - 关于 ruby on rails 的具体视图

> ID：12654226
> 
> 赞同：1
> 
> 时间：2012-09-29T16:02:07.607
> 
> 标签：ruby-on-rails, view

好的，这就是我拥有显示所有建筑物的视图商店的东西。我只想向我展示状态为“待售”的建筑物

在意见商店我有：

```
<% if notice%>
<p id="notice"> <%= notice%></p>
<%end%>

<h1>All Priorities</h1>

 <%= form_tag  store_path, :method => 'get'  do %>
<p>
  <%=text_field_tag :search , params[:search]%>
  <%= submit_tag "Search", :name=> nil%>
  </p>
  <%end%>

<% if @buildings.present? %> 
 <% @buildings.each do |building| %> 
<div class="entry">
    <div class="img">
    <%= image_tag (building.photo.url)%></div>
    <div class=" disc">
    <h3>Name of the Bulding:  <%= building.title %></h3>
     <h4>Status: <%= building.status %></h4>
    Info: <%=sanitize(building.description)%>
    <div class="price_line">
        <span class="price">Price: <%= sprintf("€ %0.02f",building.price)%></span><br/>
        <div class="button">
        <%= button_to("I want to see it", {:controller => "seeits", :action => "new", :building_id => building.id})%></div>

    </div> 

    <div class="pages">
    <%= will_paginate @buildings %></p>
    </div>

    </div>
<% end %>

</div>

<% else %> does not much try another name<% end %> 
```

在控制器>buildings_controller

```
 def index 

    @buildings = Building.all

      respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @buildings }
    end

  end

  # GET /buildings/1
  # GET /buildings/1.json
  def show
    @building = Building.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @building }
    end
  end 
```

有没有用 IF 语句来做？还是我必须改变`<% @buildings.each do |building| %>`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T16:07:04.703

过滤建筑物列表的最简单方法是在视图中过滤它：

```
@buildings.select{|b| b.status == "for sale"}.each do |building| 
```

但是，这仍然需要您为所有项目查询数据库 - 这是低效的。您的视图应该尽可能简单，这不是[DRY](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself) Rails 做事的方式。

更强大的方法是`where`在控制器中使用子句：

```
@buildings = Building.where("status = 'for sale'") 
```

但是，这仍然会在您的控制器中添加太多逻辑。您的模型应该能够为您处理所有查询逻辑。最好的方法是在你的模型上创建一个[Rails 范围：](http://guides.rubyonrails.org/active_record_querying.html#working-with-scopes)`Building`

```
class Building < ActiveRecord::Base
  ...
  scope :for_sale, where(:status => "for sale")
  ...
end 
```

然后，在您的控制器（或视图）中，您只需要做：

```
@buildings = Building.for_sale 
```

# facebook - 需要帮助页面请

> ID：12654229
> 
> 赞同：0
> 
> 时间：2012-09-29T16:02:16.377
> 
> 标签：facebook, hyperlink

我有一个 Facebook 页面 - facebook.com/ThriftyDealsOnline

现在，我在 thriftydealsonline.com 上添加了指向我的商业网站的链接

我的问题是，当访问者点击链接时，它会将他们发送到 facebook，但只会发送到基本的注册/登录页面。

我访问过并有 facebook 链接的其他网站，会将您带到 facebook 注册/登录页面，但它会显示他们的封面照片、喜欢的数量等。当然，访问者必须注册/登录才能查看他们的整个页面，但我的不这样做，我担心我会因此失去 FB 的赞。

例如，访问：[http](http://www.143kids.com) ://www.143kids.com - 他们有一个 FB 链接，即[http://www.facebook.com/usedkidsclothes](http://www.facebook.com/usedkidsclothes) - 你会看到，当你点击他们的链接时，它会显示他们的封面照片以及一些信息。

有人可以帮我弄清楚为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T16:24:29.323

您的问题是您的粉丝页面不在 facebook 上，我试图找到您的个人资料并且不显示在 facebook 上，您可以这样做：登录您的个人资料并在地址栏中查看您的个人资料名称复制并粘贴到文本文件关闭您的会话并将链接再次粘贴到地址栏中以查看会发生什么，如果您看到粘贴在您的网站上的配置文件。

# jquery - 将这些帖子集中在我的 Tumblr 上

> ID：12654230
> 
> 赞同：0
> 
> 时间：2012-09-29T16:02:45.353
> 
> 标签：jquery, html, css, tumblr

我很快就将一个 tumblr 主题拼凑在一起，我需要将单个帖子上的内容放在中心位置。我认为 Masonry 迫使它绝对定位在 top:0 和 left:0

这是一个例子：[http ://emilestest.tumblr.com/post/31114466201](http://emilestest.tumblr.com/post/31114466201)

有任何想法吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T16:42:47.217

我不知道我是否明白你想做什么。您是否要使容器居中，您应该将 text-align center 添加到正文并固定宽度并将边距自动添加到容器：

```
body {
  background-color:#EFE9E1;
  height:100%;
  text-align:center;
}
#container {
  background-color:#EFE9E1;
  min-width:1024px;
  overflow:hidden;
  position:relative;
  width:1024px;
  margin:0 auto;
} 
```

# c++ - 替换为函数指针的 C++ 正则表达式库

> ID：12654232
> 
> 赞同：1
> 
> 时间：2012-09-29T16:02:57.823
> 
> 标签：c++, python, regex, function-pointers

寻找类似于 Python 的正则表达式`sub`或`subn`方法的东西。

[http://docs.python.org/library/re.html](http://docs.python.org/library/re.html)

所以基本上像这样的C/C++ api

```
re.sub(pattern, repl, string, count=0, flags=0) 
```

`repl`我可以像在 Python中那样放置函数指针。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T16:10:45.957

看看[regex_replace](http://en.cppreference.com/w/cpp/regex/regex_replace)

```
#include <iostream>
#include <regex>
#include <string>
int main()
{
   std::string text = "Quick brown fox";
   std::regex vowel_re("a|o|e|u|i");
   std::cout << std::regex_replace(text, vowel_re, "[$&]") << '\n';
} 
```

输出：

```
Q[u][i]ck br[o]wn f[o]x 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T16:26:13.817

@Vikas 是正确的（至少我很确定他是）`std::regex_replace`可以做你想做的事，但他并没有真正展示如何做到这一点。当您使用`regex_replace`时，正则表达式的每次匹配都会产生一个`regex::match`对象。该对象的`format`成员函数使用您传递给的替换字符串`regex_replace`（以及您传递的标志）调用。

因此，要获得与您在 Python 中讨论的相同效果（为每个替换调用一个函数，而不仅仅是指定替换文本），您必须创建一个`regex::match`重载其`format`成员函数的对象，这就是将被调用的函数. 默认情况下，该标准`regex::match::format`可以进行 ECMAScript/Javascript 替换或`sed`替换（您可以传递一个标志来表示您喜欢的信号）。

但是，我应该补充一点，实际上这样做似乎相当不寻常——尽管标准非常清楚地表明这是可能的，但我不知道有任何关于该主题的书可以演示如何做到这一点。

# ios - 什么是_mh_execute_header？

> ID：12654235
> 
> 赞同：31
> 
> 时间：2012-09-29T16:03:04.817
> 
> 标签：ios, xcode, bugsense

我从生产 ios 应用程序中获取“_mh_execute_header”作为错误位置（我正在使用 BugSense）：我想知道它是什么以及它的含义。

在开发过程中，我们使用 testflight 向我们的测试人员和团队组件发布 beta 版本：在测试过程中我们没有得到这样的错误位置。

我管理开发和发布到商店是由另一个团队成员完成的：这种情况是否会由于我和发布者之间的 xcode IDE 中的一些不同设置而发生？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-24T14:24:52.043

这可能会对您有所帮助：[在 iOS 中，是什么导致了此崩溃？](https://stackoverflow.com/questions/13871433/in-ios-what-caused-this-crash)（具体来说，使用[CrashKit](https://github.com/kaler/CrashKit)的答案可能是有利的。）还可以查看[iOS App：几个具有共同主题的崩溃：SIGSEGV 和 _sigtramp](https://stackoverflow.com/questions/13462505/ios-app-several-crashes-with-common-themes-of-sigsegv-and-sigtramp)

> “_mh_execute_header 是一个已知的符号/地址，当它没有更好的信息时，它用作计算偏移量的基础。” – 菲利普米尔斯 2012 年 11 月 20 日 14:08

另外，请参阅此链接以讨论发生在其他人身上的类似事情： http: [//lists.apple.com/archives/xcode-users/2012/Sep/msg00316.html](http://lists.apple.com/archives/xcode-users/2012/Sep/msg00316.html)

# ios - 在 iphone 浏览器中播放 http 直播 MP3？

> ID：12654241
> 
> 赞同：0
> 
> 时间：2012-09-29T16:04:16.080
> 
> 标签：ios, html, safari, video-streaming, vlc

我已使用 VLC 成功将 RTSP 直播流转码为 HTTP 直播流（音频 MP3）

![在此处输入图像描述](../Images/4dd7853f35087e3abd451c034714240b.png)

这是我的新直播的 url*如果我在 VLC 中流式传输这个 url 它工作正常*

```
 http://174.60.175.62:8080 
```

[现场演示](http://jsfiddle.net/u92Az/4/)

**问题**

我如何`http`在 iphone safari 中播放此流

*这就是我尝试过的`didn't`工作*

```
 <video id="video" src="http://174.60.175.62:8080" autoplay="autoplay"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T16:27:09.320

它是 MP3，所以使用 HTML5 音频元素

```
<audio controls="controls" loop="loop">
    <source src="http://westciv.com/podcasts/youmayknowmypoetry.mp3">
</audio> 
```

[**这是 HTML5 音频和视频所需的所有信息**](http://dev.opera.com/articles/view/everything-you-need-to-know-about-html5-video-and-audio/)

# php - PHP / FaceBook API - 返回家乡和位置

> ID：12654244
> 
> 赞同：-1
> 
> 时间：2012-09-29T16:05:09.537
> 
> 标签：php, facebook

我正在尝试从 Facebook API 存储家乡和位置，但在从家乡和位置数组中提取数据时遇到问题。（我已经获得了令牌许可）

```
"hometown": {
    "id": "210336945633449",
    "name": "xxxx, yyyyy" 
```

我正在使用以下代码

```
function getUserData() {
        $fb_cookie = $this->getCookie();
        if($fb_cookie) {
            $url = 'https://graph.facebook.com/me?access_token='.$this->getAccessToken();
            $data = json_decode($this->getDataFromUrl($url));
            $fb['id'] = $data->id;
            $fb['name'] = $data->name;
            $fb['first_name'] = $data->first_name;
            $fb['last_name'] = $data->last_name;
            $fb['link'] = $data->link;
            $fb['birthday'] = $data->birthday;
            $fb['gender'] = $data->gender;
            $fb['email'] = $data->email;
            $fb['location'] = $data->location; // <-----
$fb['hometown'] = $data->hometown; // <-----
            $fb['timezone'] = $data->timezone;
            $fb['locale'] = $data->locale;
            $fb['updated_time'] = $data->updated_time;
            $fb['picture'] = 'http://graph.facebook.com/'.$data->id.'/picture';

            //tokens
            $fb['token'] = $fb_cookie['access_token'];
            $fb['token_expires'] = $fb_cookie['expires'];
            return $fb;
        }
    } 
```

谁能帮我解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T16:46:12.823

由于 location 和 hometown 也是你这样使用的对象，因此获取这些值。

```
$fb['location'] = $data->location->name;
$fb['hometown'] = $data->hometown->name; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-19T22:22:38.103

要获取位置名称，请尝试：

```
$loc=$data->getLocation();
$loc_name=$loc->getName(); 
```

上面的代码适用于 Facebook SDK v4。（此 SDK 需要 PHP 5.4.0 或更高版本）

# ruby-on-rails - Rails：用户模型的属性“名称”是未定义的方法？

> ID：12654245
> 
> 赞同：0
> 
> 时间：2012-09-29T16:05:12.243
> 
> 标签：ruby-on-rails

我目前正在做我的第一个 Rails 项目。我正在尝试制作一个用于与朋友上传照片的网络应用程序。因此，在创建相册的表单上，他们应该有一个选择字段，他们希望与哪些朋友共享相册。但是，我无法在选择字段中显示名称，并且出现错误

`undefined method 'name' for nil:NilClass`

即使我的用户数据库中有“名称”列。我是否误解了“名称”的来源？我认为诸如`@users.name`意味着进入数据库并找到每个用户的名称值之类的属性？这是我的文件（如果您需要任何其他文件，请告诉我）：

_form.html.erb（有错误的那个）

```
<%= form_for([@user, @album], :remote => true, :html => { :id => "uploadform", :multipart => true }) do |f| %>
<div>
    <%= f.label :name %>
    <%= f.text_field :name %>

    <%= f.label :description %>
    <%= f.text_area :description %>

    <%= f.select :user, @users.name %>

    <%=f.label :avatar, "Upload" %>
    <%=f.file_field :avatar %>

    <br>

    <%=f.submit %>
</div>
<% end %> 
```

专辑模特

```
class Album < ActiveRecord::Base
  attr_accessible :avatar, :name
  has_and_belongs_to_many :users

  mount_uploader :avatar, AvatarUploader
end 
```

用户模型

```
class User < ActiveRecord::Base

  has_secure_password
  attr_accessible :email, :name, :password, :password_confirmation
  validates_presence_of :password, :on => :create

  validates_format_of :name, :with => /[A-Za-z]+/, :on => :create
  validates_format_of :email, :with => /\A([^@\s]+)@((?:[-a-z0-9]+\.)+[a-z]{2,})\Z/i, :on => :create
  validates_length_of :password, :minimum => 5, :on => :create

  has_many :albums
  accepts_nested_attributes_for :albums

end 
```

配置/路由

```
Pholder::Application.routes.draw do
resources :users do
  resources :albums 
end

resources :albums do
  resources :pictures
end 
```

专辑控制器

```
class AlbumsController < ApplicationController

    def index
      @albums = Albums.all

      respond_to do |format|
        format.html
        format.json { render json: @albums }
      end
    end

    def show
    end

    def update
    end

    def edit
    end

    def create
      @users = Users.all
      @user = User.find(params[:user_id])
      @album = @user.albums.build(params[:album])
      if @album.save
        flash[:success] = "Album created!"
      end 
    end

    def new
      @user = User.find(params[:user_id])
      @album = Album.new
    end

    def destroy
    end

end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T16:14:07.763

密切注意错误，一开始可能会令人困惑：

```
undefined method 'name' for nil:NilClass 
```

它说“for nil:NilClass”而不是“user123:User” 这意味着您正在调用#name 方法的对象是 nil 对象而不是 User 对象。该错误是由于未设置 @user 实例变量，因此 @user 为 nil 而不是实际用户。所以我猜 params[:user_id] 没有被正确发送。

# nuget - 在 NuGet-Package 安装上修改 global.asax

> ID：12654247
> 
> 赞同：3
> 
> 时间：2012-09-29T16:05:19.230
> 
> 标签：nuget, global-asax, nuget-package

我是第一次创建NuGet包，安装包的时候需要在global.asax的Application_Start()函数末尾加一行，当然要删除包的时候删掉这行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T09:07:52.650

有一种替代方法使用了很多包都采用的启动属性。

[http://blog.davidebbo.com/2011/02/appstart-folder-convention-for-nuget.html](http://blog.davidebbo.com/2011/02/appstart-folder-convention-for-nuget.html)

[https://bitbucket.org/davidebbo/webactivator/wiki/Home](https://bitbucket.org/davidebbo/webactivator/wiki/Home)

# awk - 用 awk 打印第二列有两个字符的文件名

> ID：12654251
> 
> 赞同：-1
> 
> 时间：2012-09-29T16:05:56.523
> 
> 标签：awk

我想打印第二列中包含两个字符的所有文件名。我怎样才能用 awk 做到这一点？

AA.txt

```
REM  A   7   35.32  
REM  A   8    47.17                         
REM  B   9    988.62                                
REM  D  10   111.59 
```

BB.txt

```
REM  A   7    135.32                                           
REM  A   8    647.19                         
REM  B   9    88.62 
```

抄送.txt

```
REM  A   7    135.32                                           
REM  A   8    247.17                         
REM  B   9    188.62                                
REM  B  10    111.56 
```

期望的输出

```
BB.txt
CC.txt 
```

您的建议将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T16:17:06.520

```
for i in *.txt; do
    if [ $(awk '{ print $2 }' $i | sort -u | wc -l) -eq 2 ]; then
        echo $i
    fi
done 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T17:16:57.827

一种仅使用的方法`GNU awk`：

```
awk '
    ## A function that prints the file name if only found two different strings
    ## in the second field.
    function check_col_and_print_file(c, i) {
        if ( length(c) == 2 ) {
            printf "%s\n", ARGV[ i ];
        }
    }

    ## At the beginning of each file but the first one, call the function to
    ## check if the file must be printed, and reset the array for the processing
    ## of the next file (the current one because we already are in first line).
    FNR == 1 && NR > 1 { 
        check_col_and_print_file(cols, ARGIND-1);
        delete cols; 
    } 

    ## Save second field as a key of a hash to avoid repeated values.
    {
        cols[ $2 ] = 1;
    }

    ## Same as before but in the "END" block because we finished the processing
    ## of all input files.
    END {
        check_col_and_print_file(cols, ARGIND);
    }
' AA.txt BB.txt CC.txt 
```

这会产生：

```
BB.txt
CC.txt 
```

# magento - Magento 模块默认图片上传位置

> ID：12654261
> 
> 赞同：0
> 
> 时间：2012-09-29T16:08:13.610
> 
> 标签：magento

如何为我的 Magento 模块（最初由模块创建器创建）指定默认图像上传位置，*而*无需使用`system.xml`用户可配置选项`<upload_dir/>`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T21:29:24.660

您可以从用于产品属性的图像保存功能中获取示例 - 请参阅[`Mage_Catalog_Model_Resource_Product_Attribute_Backend_Image::afterSave()`](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/app/code/core/Mage/Catalog/Model/Resource/Product/Attribute/Backend/Image.php#L44)。特别注意`Mage_Core_Model_File_Uploader`使用。

*在./media/*目录下为自己开辟一片天地。您可以创建一个类常量或帮助器来指定目录。

# ruby - 如何将这些不同的列放在 PostgreSQL 的同一行中？

> ID：12654263
> 
> 赞同：0
> 
> 时间：2012-09-29T16:08:44.823
> 
> 标签：ruby, postgresql, sequel

这是我的数据集（哈希形式，因为我使用的是 Ruby gem Sequel）；哈希名称是列名：

```
{:item_category=>"Bacon", :year=>1890, :avg_yr_value=>0.12}
{:item_category=>"Eggs (dozen)", :year=>1890, :avg_yr_value=>0.208}
{:item_category=>"Bacon", :year=>1891, :avg_yr_value=>0.126}
{:item_category=>"Eggs (dozen)", :year=>1891, :avg_yr_value=>0.221}
{:item_category=>"Bacon", :year=>1892, :avg_yr_value=>0.129}
{:item_category=>"Eggs (dozen)", :year=>1892, :avg_yr_value=>0.221}
{:item_category=>"Bacon", :year=>1893, :avg_yr_value=>0.142}
{:item_category=>"Eggs (dozen)", :year=>1893, :avg_yr_value=>0.224}
{:item_category=>"Bacon", :year=>1894, :avg_yr_value=>0.185} 
```

这是我的代码：

```
 SELECT
        string_agg(DISTINCT item_category, ' + ' ORDER BY item_category) AS items,
        year,
        sum(avg_yr_value) AS amount

    FROM
        earnings_and_prices

    WHERE
        item_category = 'Bacon' OR
            item_category = 'Eggs (dozen)'

    GROUP BY
        year

    HAVING
        COUNT(DISTINCT item_category) = 2

    ORDER BY
        year 
```

我的结果（因为我使用的是 Ruby gem Sequel，所以在哈希中）：

```
{:items=>"Bacon + Eggs (dozen)", :year=>1890, :amount=>0.328}
{:items=>"Bacon + Eggs (dozen)", :year=>1891, :amount=>0.347}
{:items=>"Bacon + Eggs (dozen)", :year=>1892, :amount=>0.35}
{:items=>"Bacon + Eggs (dozen)", :year=>1893, :amount=>0.366} 
```

我想编辑我的代码，使其包含“培根”的 :amount 和“鸡蛋（打）”的 :amount，例如：

```
{:items=>"Bacon + Eggs (dozen)", :year=>1890, :amount=>0.328, :eggs_price=>0.208, :bacon_price=>0.12} 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T19:49:40.190

对于该特定场景，此查询适合：

```
SELECT
    item_bacon || ' + ' || item_eggs AS items,
    year,
    bacon_avg_value + eggs_avg_value AS amount,
    bacon_avg_value AS bacon_price, 
    eggs_avg_value AS eggs_price
FROM (
    SELECT t1.item, t2.item, t1.year, t1.avg_value, t2.avg_value
    FROM (
            SELECT item_category, year, avg_yr_value
            FROM earnings_and_prices
            WHERE item_category = 'Bacon'
    ) AS t1(item, year, avg_value)
    JOIN (
            SELECT item_category, year, avg_yr_value
            FROM earnings_and_prices
            WHERE item_category = 'Eggs (dozen)'
    ) AS t2(item, year, avg_value)
    USING( year )
) AS t(item_bacon, item_eggs, year, bacon_avg_value, eggs_avg_value)
ORDER BY year 
```

如果您需要更大的灵活性（过滤和显示两个以上的项目），我会考虑使用动态 SQL 查询。

# backbone.js - Backbonejs 查看渲染最佳方法

> ID：12654264
> 
> 赞同：0
> 
> 时间：2012-09-29T16:08:46.867
> 
> 标签：backbone.js, backbone-views, backbone-routing

我有一个侧边栏视图，其中包含这样的项目列表

```
SideBarView = Backbone.View.extend(
  events:
    "click item": "dosomething"
  render:
    //Render item list from a collection
) 
```

现在，我试图在两条不同的路线上显示侧边栏视图，但遇到了一个小问题。在路由 A 上，我希望 dosomething() 方法打印“A”，而在路由 BI 上，我希望 dosomething() 方法打印“B”。所以，我想知道解决这个问题的最佳方法是什么？我想了想，想出了以下两种方法，但似乎都不够优雅。

**方法一**

制作另一个 SideBarView 并将其命名为 SideBarView2，然后将方法 dosomething 更改为 dosomethingForRouteB。那么我可以将 SideBarView2 用于路由 B。但是，这违反了 DRY 原则；更不用说，假设我想稍后更改 SideBarView 的渲染方法，那么我将不得不在两个不同的地方进行更改。总的来说，我认为这是一个非常糟糕的方法

**方法二**

在 dosomething() 方法中，我可以有这样的逻辑语句

```
route = getCurrentRoute()
if(route = "/routeA")
 print A
else
 print B 
```

比方法 1 更优雅一点，但在你的视图中有一个逻辑语句有点太 hacky。

无论如何，我的问题是我应该使用方法 2 还是有更好的方法来解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T17:12:15.517

你为什么不让 SideBarView 接受你想要显示的东西的参数。

```
SideBarView = Backbone.View.extend({
    print_value: B,

    events: {...},

    initialize: function(options){
        options = options || {};
        if(options.display === 'A'){
             this.print_value = "A";
        }
     },

     render: function(){ ...}
} 
```

然后在你的路由器中：

```
 route_method: function(path){
     new SideBarView({display: path});
 } 
```

# python - Python 3：在多处理期间捕获警告

> ID：12654267
> 
> 赞同：37
> 
> 时间：2012-09-29T16:09:30.367
> 
> 标签：python, python-3.x, warnings, multiprocessing

## 太长; 没读

[`warnings.catch_warnings()`](http://docs.python.org/py3k/library/warnings.html#available-context-managers)上下文管理器[不是线程安全](https://stackoverflow.com/questions/7264002/thread-safe-warnings-in-python)的。如何在并行处理环境中使用它？

## 背景

下面的代码使用 Python[`multiprocessing`](http://docs.python.org/py3k/library/multiprocessing.html)模块的并行处理解决了最大化问题。它需要一个（不可变的）小部件列表，对它们进行分区（请参阅[Python 3 中大规模、蛮力最大化的高效多处理](https://stackoverflow.com/questions/10669600/efficient-multiprocessing-of-massive-brute-force-maximization-in-python-3)），找到所有分区的最大值（“决赛选手”），然后找到最大值（“冠军” ) 那些“决赛选手”。如果我正确理解了自己的代码（如果我理解了我就不会在这里），我将与所有子进程共享内存以向它们提供输入小部件，并`multiprocessing`使用操作系统级管道和酸洗来发送工作人员完成后，入围小部件返回主流程。

## 问题的根源

**我想捕捉在小部件从进程间管道出来时发生**的 unpickling 之后由小部件重新实例化引起的冗余小部件警告。**当小部件对象实例化时，它们验证自己的数据，从 Python 标准`warnings`模块发出警告，告诉应用程序的用户小部件怀疑用户的输入数据存在问题。因为 unpickling 会导致对象实例化，所以我对代码的理解意味着每个小部件对象仅被重新实例化一次，当且仅当它从管道中出来后进入决赛 - 请参阅下一节以了解为什么这是不正确的.**

 **这些小部件在被 fronicated 之前已经创建，因此用户已经痛苦地意识到他输入错误并且不想再听到它。这些是我想用`warnings`模块的`catch_warnings()`上下文管理器（即`with`语句）捕获的警告。

## 失败的解决方案

*在我的测试中，当多余的警告被发送到我在下面标记为Line A*和*Line B*之间的任何地方时，我已经缩小了范围。令我惊讶的是，警告正在发出的地方不仅仅是 near `output_queue.get()`。这对我来说意味着`multiprocessing`使用酸洗将小部件发送给工人。

结果是，将一个上下文管理器放置在[`warnings.catch_warnings()`](http://docs.python.org/py3k/library/warnings.html#available-context-managers)从*A*行到*B*行的所有内容周围，并在此上下文中设置正确的警告过滤器不会捕获警告。这对我来说意味着警告正在工作进程中发出。将此上下文管理器放在工作代码周围也不会捕获警告。

## 编码

此示例省略了用于确定问题规模是否太小而无法处理派生进程、导入多处理以及定义`my_frobnal_counter`和的代码`my_load_balancer`。

```
"Call `frobnicate(list_of_widgets)` to get the widget with the most frobnals"

def frobnicate_parallel_worker(widgets, output_queue):
    resultant_widget = max(widgets, key=my_frobnal_counter)
    output_queue.put(resultant_widget)

def frobnicate_parallel(widgets):
    output_queue = multiprocessing.Queue()
    # partitions: Generator yielding tuples of sets
    partitions = my_load_balancer(widgets)
    processes = []
    # Line A: Possible start of where the warnings are coming from.
    for partition in partitions:
        p = multiprocessing.Process(
                 target=frobnicate_parallel_worker,
                 args=(partition, output_queue))
        processes.append(p)
        p.start()
    finalists = []
    for p in processes:
        finalists.append(output_queue.get())
    # Avoid deadlocks in Unix by draining queue before joining processes
    for p in processes:
        p.join()
    # Line B: Warnings no longer possible after here.
    return max(finalists, key=my_frobnal_counter) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T04:53:01.677

您可以尝试覆盖`Process.run`要使用的方法`warnings.catch_warnings`。

```
>>> from multiprocessing import Process
>>> 
>>> def yell(text):
...    import warnings
...    print 'about to yell %s' % text
...    warnings.warn(text)
... 
>>> class CustomProcess(Process):
...    def run(self, *args, **kwargs):
...       import warnings
...       with warnings.catch_warnings():
...          warnings.simplefilter("ignore")
...          return Process.run(self, *args, **kwargs)
... 
>>> if __name__ == '__main__':
...    quiet = CustomProcess(target=yell, args=('...not!',))
...    quiet.start()
...    quiet.join()
...    noisy = Process(target=yell, args=('AAAAAAaaa!',))
...    noisy.start()
...    noisy.join()
... 
about to yell ...not!
about to yell AAAAAAaaa!
__main__:4: UserWarning: AAAAAAaaa!
>>> 
```

或者你可以使用一些内部结构......（[`__warningregistry__`](http://docs.python.org/library/warnings.html#warnings.warn_explicit)）

```
>>> from multiprocessing import Process
>>> import exceptions
>>> def yell(text):
...    import warnings
...    print 'about to yell %s' % text
...    warnings.warn(text)
...    # not filtered
...    warnings.warn('complimentary second warning.')
... 
>>> WARNING_TEXT = 'AAAAaaaaa!'
>>> WARNING_TYPE = exceptions.UserWarning
>>> WARNING_LINE = 4
>>> 
>>> class SelectiveProcess(Process):
...    def run(self, *args, **kwargs):
...       registry = globals().setdefault('__warningregistry__', {})
...       registry[(WARNING_TEXT, WARNING_TYPE, WARNING_LINE)] = True
...       return Process.run(self, *args, **kwargs)
... 
>>> if __name__ == '__main__':
...    p = SelectiveProcess(target=yell, args=(WARNING_TEXT,))
...    p.start()
...    p.join()
... 
about to yell AAAAaaaaa!
__main__:6: UserWarning: complimentary second warning.
>>> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T06:08:34.417

unpickling 不会导致`__init__`执行两次。我在 Windows 上运行了以下代码，但没有发生（每个`__init__`都只运行一次）。

因此，您需要向我们提供来自`my_load_balancer`和来自小部件类的代码。在这一点上，您的问题根本没有提供足够的信息。

作为随机猜测，您可能会检查是否`my_load_balancer`复制了小部件，从而导致它们再次被实例化。

```
import multiprocessing
import collections

"Call `frobnicate(list_of_widgets)` to get the widget with the most frobnals"

def my_load_balancer(widgets):
    partitions = tuple(set() for _ in range(8))
    for i, widget in enumerate(widgets):
        partitions[i % 8].add(widget)
    for partition in partitions:
        yield partition

def my_frobnal_counter(widget):
    return widget.id

def frobnicate_parallel_worker(widgets, output_queue):
    resultant_widget = max(widgets, key=my_frobnal_counter)
    output_queue.put(resultant_widget)

def frobnicate_parallel(widgets):
    output_queue = multiprocessing.Queue()
    # partitions: Generator yielding tuples of sets
    partitions = my_load_balancer(widgets)
    processes = []
    # Line A: Possible start of where the warnings are coming from.
    for partition in partitions:
        p = multiprocessing.Process(
                 target=frobnicate_parallel_worker,
                 args=(partition, output_queue))
        processes.append(p)
        p.start()
    finalists = []
    for p in processes:
        finalists.append(output_queue.get())
    # Avoid deadlocks in Unix by draining queue before joining processes
    for p in processes:
        p.join()
    # Line B: Warnings no longer possible after here.
    return max(finalists, key=my_frobnal_counter)

class Widget:
    id = 0
    def __init__(self):
        print('initializing Widget {}'.format(self.id))
        self.id = Widget.id
        Widget.id += 1

    def __str__(self):
        return str(self.id)

    def __repr__(self):
        return str(self)

def main():

    widgets = [Widget() for _ in range(16)]
    result = frobnicate_parallel(widgets)
    print(result.id)

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-10-21T23:15:26.047

多年后，我终于有了一个解决方案（在处理一个不相关的问题时发现）。我已经在 Python 3.7、3.8 和 3.9 上对此进行了测试。

暂时**用空列表打****补丁[`sys.warnoptions`](https://docs.python.org/3/library/sys.html#sys.warnoptions)`[]`**。您只需要在调用[`process.start()`](https://docs.python.org/3/library/multiprocessing.html#multiprocessing.Process.start). `sys.warnoptions`被记录为您不应手动修改的实现细节；[官方建议](https://docs.python.org/3/library/warnings.html#overriding-the-default-filter)是使用模块中的函数并[`warnings`](https://docs.python.org/3/library/warnings.html)设置[`PYTHONWARNINGS`](https://docs.python.org/3/using/cmdline.html#envvar-PYTHONWARNINGS)在[`os.environ`](https://docs.python.org/3/library/os.html#os.environ). 这行不通。唯一似乎有效的方法是打补丁`sys.warnoptions`。在测试中，您可以执行以下操作：

```
import multiprocessing
from unittest.mock import patch
p = multiprocessing.Process(target=my_function)
with patch('sys.warnoptions', []):
    p.start()
p.join() 
```

如果您不想使用[`unittest.mock`](https://docs.python.org/3/library/unittest.mock.html)，只需手动修补：

```
import multiprocessing
import sys
p = multiprocessing.Process(target=my_function)
old_warnoptions = sys.warnoptions
try:
    sys.warnoptions = []
    p.start()
finally:
    sys.warnoptions = old_warnoptions
p.join() 
```**

# c# - 使用 c# (Visual Studio 2010) 在 aspx 中相当于 .Handle (C# 中的桌面应用程序) 是什么

> ID：12654268
> 
> 赞同：0
> 
> 时间：2012-09-29T16:09:44.920
> 
> 标签：c#, asp.net, visual-studio-2010, handle

我正在使用 Ventana System 为 Vensim 软件提供的示例。该示例是 C# 中的桌面应用程序。我想将此示例应用到 C# 中的 Web 版本。

桌面版

```
VensimDLLWrapper.vensim_show_sketch(1, 1, 100, (long)pictureBox_Sketch.Handle); 
```

网页版

```
VensimDLLWrapper.vensim_show_sketch(1, 1, 100, (long)Image1.???); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T18:20:54.510

这是我的方法：我在桌面应用程序中创建了一个 PictureBox

```
 PictureBox pictureBox_Sketch = new PictureBox();
        pictureBox_Sketch.Name = "pictureBox_Sketch";
        pictureBox_Sketch.Size = new System.Drawing.Size(1200, 768);
        pictureBox_Sketch.TabIndex = 19;
        pictureBox_Sketch.TabStop = false; 
```

然后，我将图像放在句柄中。

```
 VensimDLLWrapper.vensim_show_sketch(1, 1, 100, (long)pictureBox_Sketch.Handle); 
```

然后，我将图像复制到剪贴板：

```
 VensimDLLWrapper.vensim_tool_command("EXPORT>SK", (long)pictureBox_Sketch.Handle, 0); 
```

最后，我将图像保存在磁盘中（很明显我必须使用 Server.Map 或其他）

```
 if (PInvoke.OpenClipboard(pictureBox_Sketch.Handle))
        {
            if (PInvoke.IsClipboardFormatAvailable(14))
            {
                IntPtr ptr = PInvoke.GetClipboardData(14);
                if (!ptr.Equals(new IntPtr(0)))
                {
                    Metafile metafile = new Metafile(ptr, true);
                    metafile.Save("C:\\ruta\\Images\\ModelGraph.png", System.Drawing.Imaging.ImageFormat.Png);
                    //HyperLink1.NavigateUrl = "Images\\ModelGraph.png";
                    // Image1.ImageUrl = "Images\\ModelGraph.emf";

                    //Set the Image Property of PictureBox 

                }
            }
            PInvoke.CloseClipboard();
        } 
```

# java - 使用 jmf 获取设备信息

> ID：12654270
> 
> 赞同：0
> 
> 时间：2012-09-29T16:09:59.717
> 
> 标签：java, device, capture, jmf

我想使用 jmf 从我的网络摄像头获取信息。我正在使用这段代码：

```
CaptureDeviceInfo deviceInfo = CaptureDeviceManager.getDevice("USB2.0 UVC1.3M Webcam");
System.out.println(deviceInfo); 
```

为什么结果为空？

# php - XML解析子问题

> ID：12654273
> 
> 赞同：3
> 
> 时间：2012-09-29T16:10:14.477
> 
> 标签：php, xml

我正在编写一个连接到远程 API 并接收 XML 信息的脚本。

我遇到的问题是我无法正确解析域：ns。

下面的 XML：

```
$xml= '<?xml version="1.0" encoding="UTF-8"?>
<response xmlns:domain="http://www.eurodns.com/domain" xmlns:eurodns="http://www.eurodns.com/eurodns">
 <extension>
  <eurodns:domain>
   <domain:ns addr="176.31.236.123">ns1.it-joan.pl</domain:ns>
   <domain:ns addr="89.72.43.135">ns2.it-joan.pl</domain:ns>
  </eurodns:domain>
 </extension>
</response>';

 $xml = new SimpleXMLElement($xml);
        foreach( $xml->resData as $value )
        {
                $array[] = $value->children('http://www.eurodns.com/eurodns');
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T07:48:08.437

访问命名空间项的方式是这样的

```
$xml= '<?xml version="1.0" encoding="UTF-8"?>
<response xmlns:domain="http://www.eurodns.com/domain" xmlns:eurodns="http://www.eurodns.com/eurodns">
 <extension>
  <eurodns:domain>
   <domain:ns addr="176.31.236.123">ns1.it-joan.pl</domain:ns>
   <domain:ns addr="89.72.43.135">ns2.it-joan.pl</domain:ns>
  </eurodns:domain>
 </extension>
</response>';
$xml = new SimpleXMLElement($xml);
$eurodns = $xml->extension->children('http://www.eurodns.com/eurodns');
$domain = $eurodns->children('http://www.eurodns.com/domain');

print_r($domain); 
```

我不知道你正在处理的整个 xml 结构，或者你想用它做什么，所以我不能再进一步了。但是您可以从这里开始工作您的代码，并从 [SimpleXMLElement::getNamespaces](http://www.php.net/manual/en/simplexmlelement.getnamespaces.php "SimpleXMLElement::getNamespaces")开始，以获得更好的动态解析器​​。

# django - 中间模型 Django ORM

> ID：12654280
> 
> 赞同：1
> 
> 时间：2012-09-29T16:11:08.640
> 
> 标签：django, code-snippets, django-orm

我创建我的经理车库和汽车。我正在尝试计算目前在车库中的所有汽车的货币价值。

```
class Car(models.Model):
    name = models.CharField(max_length=50)
    price = models.DecimalField()    

class GarageCar(models.Model):
    car = models.ForeignKey('Car')
    how_much = models.IntegerField()

class Garage(models.Model):
    name = models.CharField("Garage_Name", max_length=30)
    cars = models.ManyToManyField('GarageCar', blank=True, null=True) 
```

我尝试这样的事情：

```
def price_of_cars(request):

    garages = Garage.objects.filter(..) #

    total_price_of_cars_in_this_garages = 0
    for a in garages:
        for p in garages.cars:
            total_price_of_cars_in_this_garages += (p.price * how_much)

    return render_to_response('garage.html',
    {'total_price_of_cars': total_price_of_cars_in_this_garages}) 
```

但返回：语法错误，如果我删除`how_much`返回错误：**'ManyRelatedManager' 对象不可迭代**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T16:32:01.217

您的命名系统非常混乱。 `garage.cars`令人困惑，因为有一个汽车模型，但这意味着一个不同的模型。 `how_much`令人困惑，因为我认为您的意思是`quantity`尽管它看起来应该是一个价格。

也就是说，您得到的第一个错误将是因为`how_much`不在`price_of_cars`. 这是`GarageCars`模型的属性。

接下来，你不能这样迭代`cars`，它是一个经理。你必须使用`cars.all()`或`cars.filter(..)`等

最后，`price`is not a property of `cars`，它是一个`GarageCar`对象而不是一个`Car`对象（看看我说的名字让它更混乱了吗？）所以我们需要更改`p.price`为`p.car.price`.

所以把它们放在一起，你应该得到这样的东西：

```
def price_of_cars(request):
    garages = Garage.objects.filter(..) #

    total_price_of_cars_in_this_garages = 0
    for a in garages:
        for p in garages.cars.all():   # changed to use .all()
            total_price_of_cars_in_this_garages += (p.car.price * p.how_much) # changed to use correct properties (hopefully!) 
```

# objective-c - 在 iOS 中设置 UICollectionView

> ID：12654281
> 
> 赞同：9
> 
> 时间：2012-09-29T16:11:26.940
> 
> 标签：objective-c, ios, uicollectionview

我一直在寻找设置`UICollectionView`iOS 应用程序的方法。谷歌只出现了一些关于它是*什么*的帖子，而不是它是*如何*工作的。当然，Apple 文档很有帮助，但没有提供我希望能够设置`UICollectionView`.

如何设置一个`UICollectionView`？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-09-29T16:11:26.940

uicollectionview类[与 uitableview](/questions/tagged/uitableview "显示标记为“uitableview”的问题")[类](/questions/tagged/uicollectionview "显示标记为“uicollectionview”的问题")几乎相同。它们共享许多相同的方法和功能。如果方法/功能不同，大多数时候只需将“行”换成“单元”，反之亦然。但是，有一些 UICollectionView 上不存在的方法在 UITableView 上执行。首先，我将解释如何设置 UICollectionView：

1.  首先将你的 UICollectionView 添加到当前的 ViewController，或者创建一个新的 UICollectionViewController。视图和控制器的步骤并没有太大的不同。
2.  如果您使用的是 View 而不是 ViewController，请确保 CollectionView 的**Delegate**和**DataSource**是它所在的视图控制器。还要确保将 Delegate 和 DataSource 添加到您的头文件中：`<UICollectionViewDataSource, UICollectionViewDelegate>`

3.  接下来，确保在视图控制器的类中包含这三个方法：

    ```
    -(NSInteger)numberOfSectionsInCollectionView:(UICollectionView *)collectionView

    -(NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section

    -(UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath 
    ```

4.  这些是唯一需要的方法。第一个告诉集合视图它应该有的部分数量。这应该返回一个整数值。第二种方法获取每个部分中的单元格数。同样，这应该返回一个整数值。最后一种方法使用给定的数据（通常来自 NSArray）填充每个单元格。最后一个方法应该返回一个 CollectionViewCell。如果您在此方法上设置断点，您会注意到该`numberOfItemsInSection`方法中定义的每个单元格都会调用一次。

UICollectionViews 提供高级动画方法并允许取消选择和选择单元格（类似于在“编辑”模式下的页面等应用程序）。但是，据我所知，UICollectionViews 不提供诸如“滑动删除”之类的功能或某种披露指示器。

UICollectionViews 还允许您使用[xib](/questions/tagged/xib "显示标记为“xib”的问题") (AKA [nib](/questions/tagged/nib "显示标记为“笔尖”的问题") ) 文件创建自定义单元格，这允许一些非常高级的外观和独特的界面，而无需大量复杂的代码。

遗憾的是，UICollectionView 仅在 iOS 6 及更高版本中受支持。有一些项目可用，例如[PSTCollectionView](https://github.com/steipete/PSTCollectionView)，它在 iOS 4.3+ 中添加了对 CollectionViews 的支持，但我还没有弄清楚如何使用它们。就我而言，当视图加载时，我只检查 UICollectionView 类是否可用，如果不可用，则改为加载表。

这是 Apple 关于[Collection Views](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UICollectionView_class/Reference/Reference.html)的官方文档的链接。您可能还想查看本[教程](http://ashfurrow.com/uicollectionview-example)。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-12-04T00:45:40.513

我创建了一个使用自定义布局设置 UICollectionViews的分步[教程。](http://skeuo.com/uicollectionview-custom-layout-tutorial)希望它可以帮助一些人熟悉 API。

# ios - 从 iPhone 访问原始图像字节到计算机

> ID：12654284
> 
> 赞同：1
> 
> 时间：2012-09-29T16:12:11.177
> 
> 标签：ios, image, file, byte, gpuimage

我在 iPhone 上进行图像处理，但我需要在可可之外获取原始字节，这样我就可以在像 Matlab 这样对图像更友好的平台上优化算法。我正在使用 Brad Larson 出色的 GPUIMAGE 并且可以毫无问题地获取原始字节，但是当我使用 NSData writetofile 方法获得的文本文件（我通过从 xcode 管理器下载应用程序获得，这使我可以访问文档文件夹中的文件）是一种奇怪的格式。我是一名 Matlab 程序员，所以我对可可比较陌生，所以我认为我一定缺少一些基本的东西，因为我想我可能只能使用 c 函数打印到文件。

我发现的任何讨论都只涉及在 cocoa 和应用程序沙箱中的读写。我也可以使用 GpuImageMovieWriter 但我想 AVAssetWriter 压缩图像数据，我需要未压缩的原始字节。字节的组织方式无关紧要，因为我可以在 matlab 中轻松解析它。

所以基本上什么是从可可环境中获取输出的 txt 或 csv 文件的最简单方法，该文件看起来像 124,255,0,166,255 等（即图像整数）。在设计加速度计算法之前我遇到了类似的问题，最后我只是将原始数据打印到控制台，复制到文本文件，然后在 matlab 中解析，但是鉴于我现在正在处理图像，这不切实际。

在此问题上的任何帮助，相关文本的指针等，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T23:11:02.797

一方面，这不是您要写出的文本文件。它是图像原始字节的二进制表示。您不能将其视为文本文件。

图像数据的结构很简单，每个像素表示为一组四个字节。每个字节是一个 0-255 的颜色分量值，按蓝色、绿色、红色和 alpha 的顺序排列。图像是从左到右、从上到下扫描的，因此您只需要知道图像的宽度（以像素为单位）即可了解事物是如何循环的。从那里，它应该很容易导入到您想要的任何应用程序中。

# c# - 数据表到字典 >

> ID：12654285
> 
> 赞同：1
> 
> 时间：2012-09-29T16:12:46.080
> 
> 标签：c#, linq, dataset

我的 DataTable 包含 17 列，其中我正在检索 3 列。例如，我们将这 3 列视为 colA、colB、colC。我的要求是，结果的格式应该是

```
Dictionary<string, Dictionary<string,string>> ( Dictionary<colA,Dictionary<colB,colC>> ) 
```

使用 LINQ 会更好......！

```
Dictionary<string, Dictionary<string, string>> roles = TA_Roles.GetRoleByUsername(Username)
    .Select(col => new { col.RoleID, col.Rolecode, col.Rolename }) 
    //Please continue from here..! 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-29T18:23:25.177

如果 colA 是唯一的，这应该有效：

```
Dictionary<string, Dictionary<string, string>> result = table.AsEnumerable().ToDictionary(row => row["colA"].ToString(),
                                                                                          row => new string[] { "colB", "colC" }.ToDictionary(col => col, col => row[col].ToString())); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T16:17:13.960

在这里似乎`Dictionary<string, Dictionary<string, string>>`没有*太多纠正*，因为`col1`不能确保数据是唯一的，您可以`List<Tuple<string, string, string>>`改用

```
 var result = table.AsEnumerable().Select(row => 
                Tuple.Create<string, string, string>(row.Field<string>("col1"), 
                                                     row.Field<string>("col2"), 
                                                     row.Field<string>("col3"))); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T17:31:21.637

我有两个解决方案，取决于 col2/col3 组合是否唯一

```
class Role
{
    public string RoleID { get; set; }
    public string Rolecode { get; set; }
    public string Rolename { get; set; }
}

IEnumerable<Role> source = ...;

Dictionary<string, Dictionary<string, List<string>>> result = source
    .GroupBy(r => r.RoleID)
    .ToDictionary(g => g.Key,
         g => g.GroupBy(r2 => r2.Rolecode)
        .ToDictionary(g2 => g2.Key,
            g2 => g2.Select(r3 => r3.Rolename).ToList())
    );

// Rolecode unique
Dictionary<string, Dictionary<string, string>> result2 = source
    .GroupBy(r => r.RoleID)
    .ToDictionary(g => g.Key,
        g => g.ToDictionary(r2 => r2.Rolecode, r2 => r2.Rolename)
    ); 
```

但是如果三列的所有组合都是唯一的，那么整个事情就毫无意义了。但是，创建两个字典是有意义的

```
Dictionary<string, Role> rolesByID = source.ToDictionary(r => r.RoleID);
Dictionary<string, Role> rolesByCode = source.ToDictionary(r => r.Rolecode); 
```

# php - 处理 argc 和 argv

> ID：12654287
> 
> 赞同：2
> 
> 时间：2012-09-29T16:13:18.433
> 
> 标签：php

我写的代码如下：

```
<?php
array_shift($argv);
$taskid=$argv[0];
$file1=file_get_contents($argv[1]);
$file2=fopen($argv[2],"w");
echo $taskid."\n".$file1."\n".$file2."\n";
?> 
```

我执行这个程序，`php myfile.php 1 1.txt 2.txt` 其中 1 是 taskid，1.txt 是输入文件，2.txt 是输出文件。我想修改这个程序，即使我没有传递任何`php myfile.php`应该运行的参数，它也能运行。我想为此设置一个 if 条件。我使用了`if(*argv<=1)`if(argc==NULL) 等条件，但它们都不起作用。

我需要一个完美的条件来检查是否没有传递任何参数，然后我的程序应该显示一条用户友好的消息。

有人能帮我吗？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-29T16:16:29.407

```
if ($argc !== 4) {
  // show message 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T16:58:35.747

尝试这个：

```
<?php
array_shift($argv);

if (empty($argv) || count($argv) != 3) {
  echo "Incorrect number of arguments\n";
}
else {
  $taskid = $argv[0];
  $file1 = file_get_contents($argv[1]);
  $file2 = fopen($argv[2],"w");
  echo $taskid . "\n" . $file1 . "\n" . $file2 . "\n";
} 
```

# json - 是否可以将 Google 电子表格 JSON 请求与数据查询结合起来？

> ID：12654289
> 
> 赞同：2
> 
> 时间：2012-09-29T16:13:57.060
> 
> 标签：json, spreadsheet

我已成功使用以下链接中的信息从 Google 电子表格中获取 JSON 输出。

[https://developers.google.com/gdata/samples/spreadsheet_sample](https://developers.google.com/gdata/samples/spreadsheet_sample)

是否可以将此 JSON 请求与数据查询结合起来，例如在下面的链接中看到的那些？

[https://developers.google.com/chart/interactive/docs/querylanguage](https://developers.google.com/chart/interactive/docs/querylanguage)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-22T15:34:06.877

似乎不需要 GID 参数：D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-08T20:16:22.487

是的。使用新的 url 访问谷歌文档：

```
https://docs.google.com/spreadsheets/d/%KEY%/gviz/tq?gid=%GID%&tq=%QUERY% 
```

%KEY% 和 %GID% 可以在您的电子表格的 url 中找到，%QUERY% 是您要求工作表的任何内容。例如，您可以通过将“B where A = 'John Smith'”作为 %QUERY% 传递来在 A 列中查找姓名，从而要求它在 B 列中查找电话号码。

# python - 使用 `django-mptt` 中的 `get_ancestors` 函数时结果错误

> ID：12654290
> 
> 赞同：5
> 
> 时间：2012-09-29T16:14:00.457
> 
> 标签：python, django, tree, hierarchy, django-mptt

我正在开发一个使用 django-mptt 的项目，但是当我使用`get_ancestors`函数时会得到奇怪的结果。这是一个例子。
我创建了一个简单的模型，继承自 MPTTModel：

```
class Classifier(MPTTModel):
    title = models.CharField(max_length=255)
    parent = TreeForeignKey('self', null = True, blank = True, 
                            related_name = 'children')

    def __unicode__(self):
        return self.title 
```

这是适用于此模型的功能：

```
def test_mptt(self):
    # Erase all data from table
    Classifier.objects.all().delete()

    # Create a tree root
    root, created = Classifier.objects.get_or_create(title=u'root', parent=None)

    # Create 'a' and 'b' nodes whose parent is 'root'
    a = Classifier(title = "a")
    a.insert_at(root, save = True)
    b = Classifier(title = "b")
    b.insert_at(root, save = True)

    # Create 'aa' and 'bb' nodes whose parents are
    # 'a' and 'b' respectively
    aa = Classifier(title = "aa")
    aa.insert_at(a, save = True)
    bb = Classifier(title = "bb")
    bb.insert_at(b, save = True)

    # Create two more nodes whose parents are 'aa' and 'bb' respectively
    aaa = Classifier(title = "aaa")
    aaa.insert_at(aa, save = True)
    bba = Classifier(title = "bbb")
    bba.insert_at(bb, save = True)

    # Select from table just created nodes
    first = Classifier.objects.get(title = "aaa")
    second = Classifier.objects.get(title = "bbb")

    # Print lists of selected nodes' ancestors:
    print first.get_ancestors(ascending=True, include_self=True)
    print second.get_ancestors(ascending=True, include_self=True) 
```

我希望在输出中看到下一个值：

```
[<Classifier: aaa>, <Classifier: aa>, <Classifier: a>, <Classifier: root>]
[<Classifier: bbb>, <Classifier: bb>, <Classifier: b>, <Classifier: root>] 
```

但是我看到：

```
[<Classifier: aaa>, <Classifier: bb>, <Classifier: b>, <Classifier: root>]
[<Classifier: bbb>, <Classifier: bb>, <Classifier: b>, <Classifier: root>] 
```

因此，正如您所看到的，此函数打印节点的正确祖先列表`bbb`，但打印节点的祖先错误`aaa`。你能解释一下为什么会这样吗？这是一个错误`django-mptt`还是我的代码不正确？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-29T18:36:56.413

当您将节点插入树中时，它会导致整个树发生变化。因此，当您插入`b`节点时，您的`a`和`root`节点在数据库中会发生变化，但您的变量不会更新并保持包含旧的左/右值，这些值用于构建正确的树结构。

在您的情况下，当行`aa.insert_at(a, save = True)`处于进程中时，您的`a`变量包含一个带有`lft`= 2 和`rght`= 3 的旧实例，而在数据库`a`节点中包含`lft`= 4 和`rght`= 5。

在插入新项目之前，您需要获取父级的新实例。最简单的方法是运行`refresh_from_db`：

```
aa.refresh_from_db() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-01T16:30:22.503

同意谢尔盖的回答。我用来重建树的命令是：

```
ModelName.objects.rebuild() 
```

（在“python manage.py shell”中执行）

# c# - 使用内容/标签绑定按钮工具提示

> ID：12654298
> 
> 赞同：0
> 
> 时间：2012-09-29T16:15:19.763
> 
> 标签：c#, .net, wpf, vb.net, c#-4.0

我有这个代码：

```
<ribbon:Button Label="Hello" /> 
```

我想将它的工具提示绑定到 Label 像：

```
<ribbon:Button Label="Hello" ToolTip="Hello" /> 
```

我已经尝试使用以下信息创建样式，但失败了：

```
<Style TargetType="{x:Type ribbon:Button}">
            <Setter Property="ToolTip" Value="{Binding Text}" />
</Style> 
```

请告诉我如何解决这个问题。代替功能区：按钮，使用普通按钮代码，我想将其工具提示属性与其内容属性绑定。

编辑：尝试后的另一件事，如果我在没有任何绑定的情况下设置 Setter 内部样式的 Value 属性，它工作正常。例如：

```
<Style TargetType="{x:Type ribbon:Button}">
            <Setter Property="ToolTip" Value="This will show" />
</Style> 
```

但是这里没有应用绑定。所以问题只有在绑定完成时才会出现:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T17:15:37.527

绑定的黄金法则是：在调试输出中查找绑定错误。

其次，您正在绑定文本，在其他任何地方都使用属性标签。

第三，理解Binding的基础是DataContext。您可以为 Xaml 元素命名，然后使用基于 ElementName 的绑定语法绑定到 FrameworkElement 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T17:31:16.147

当然，您的样式不起作用，因为您总是绑定到 DataContext 的属性，我怀疑这就是您的控件本身。

```
<Setter Property="ToolTip" Value="{Binding RelativeSource={RelativeSource Self}, Path=Text}"/> 
```

应该可以正常工作。

# objective-c - IOS 应用程序向 REST API 服务内容类型定义错误发送数据

> ID：12654299
> 
> 赞同：0
> 
> 时间：2012-09-29T16:15:29.180
> 
> 标签：objective-c, ios, nsurlconnection, nss

我设法制作了一个将数据发送到rest api服务的应用程序。内容类型必须是 text/html。但是每当我运行我的应用程序时，我都会收到 415 http 代码响应，这意味着不支持的内容类型。这是我的代码：

```
NSURL *url = [NSURL new];

NSData *body = nil;

NSString *contentType = @"text/html"; 

NSURL *finalURL = [NSURL URLWithString:[NSString stringWithFormat:@"http://telesto.zapto.org:81/SMART_EdgeNode/EdgeNode/DataFeeds/3/addMeasurement"]];
NSString *yourString = @"geoX#35#geoY#65";

contentType = @"application/x-www-form-urlencoded; charset=utf-8";

body = [[NSString stringWithFormat:@"%@", yourString] dataUsingEncoding:NSUTF8StringEncoding];
NSString *putLength = [NSString stringWithFormat:@"%d",[body length]];

if (nil==finalURL) {

    finalURL = url;
}

NSMutableDictionary* headers = [[[NSMutableDictionary alloc] init] autorelease];
[headers setValue:contentType forKey:@"Content-Type"];
[headers setValue:@"mimeType" forKey:@"Accept"];
[headers setValue:@"no-cache" forKey:@"Cache-Control"];
[headers setValue:@"no-cache" forKey:@"Pragma"];
[headers setValue:@"close" forKey:@"Connection"];

NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:finalURL
                                                       cachePolicy:NSURLRequestUseProtocolCachePolicy
                                                   timeoutInterval:60.0];
[request setHTTPMethod:@"PUT"];

[request setAllHTTPHeaderFields:headers];

[request setHTTPBody:body];
[request setValue:putLength forHTTPHeaderField:@"Content-Length"];

self.conn = [NSURLConnection connectionWithRequest:request delegate:self]; 
```

我猜 atm 定义 content-type 有问题。有什么帮助吗？？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T17:44:32.357

好的，我终于找到了。正是这条特定的行导致了问题，并且不得不对 content-type 做一些事情：

```
contentType = @"application/x-www-form-urlencoded; charset=utf-8"; 
```

删除后，我能够正确地将我的字符串发送到服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T22:37:53.643

我认为服务器抱怨它不知道如何生成内容类型为“mimeType”的响应。

您的 Accept 标头应该是“text/html”或您在响应中期望的任何内容类型，而不是“mimeType”。

* * *

**更新**

再次阅读后，我注意到您将 contentType 设置为`@"text/html"`，然后设置为`@"application/x-www-form-urlencoded; charset=utf-8"`。你需要哪个？根据描述，您想发送`text/html`，但这不是您发送的内容。当您设置`contentType`为 时`@"application/x-www-form-urlencoded; charset=utf-8"`，`text/html`会丢失。

# php - 如何将总和值（来自使用 PHP 的 MySQL）放在表示表上方？

> ID：12654301
> 
> 赞同：0
> 
> 时间：2012-09-29T16:15:41.590
> 
> 标签：php, mysql

我正在寻找将总和值放在 HTML 表格上方的简单、最佳实用方法。

通常循环可以在循环完成后生成总和，该总和位于所有结果表的下方。当表格很长并且我们每次都需要向下滚动才能看到销售额的总和时，这可能会非常困难。我需要运行两个循环还是有什么技巧可以做到这一点？任务看起来很简单。在下面的代码中，我将所有订单的数量和总销售额值相加：

```
$lp=1; $total=0; $total_qt=0;
while ($record = mysql_fetch_array($result)){
$total += $record['Total'];
$total_qt += $record['Qt'];
echo '<tr style="background-color:'. ((next($colour) == true) ? current($colour) :     reset($colour)).'">
<td> ' . $lp++ . '</td>
<td class="bolder"> ' . $record['Name'] . '</td>
<td> ' . $record['Product'] . '</td>';
if ($invoice=="on") echo '<td style="font-size:11px">' . $record['Invoice'] . '</td>';
echo '<td> ' . $record['despatched'] . '</td>
<td> ' . $record['Qt'] . '</td>
<td> ' . $record['Price'] . '</td>
<td class="align_right"> ' . $record['Total'] . '</td>';

echo '</tr>';
}
echo '</table><div class="stat_total">Qt: '.$total_qt.'  Total: &pound;'.$total.'</div>    </div>'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T16:21:13.147

通过使用`SUM()`SQL 函数，您无需运行 PHP 即可访问总和：

**SQL**

`SELECT SUM(Total) FROM Orders`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T16:21:18.117

您可以在循环中使用变量来存储您的输出，而不是使用`echo`它，当您完成循环时`echo`，存储的结果包含它们之前和之后的总计。像这样：

```
$lp=1; $total=0; $total_qt=0;
$output = ''; //here you temporarily save your output
while ($record = mysql_fetch_array($result)){
$total += $record['Total'];
$total_qt += $record['Qt'];
$output .= '<tr style="background-color:'. ((next($colour) == true) ? current($colour) :     reset($colour)).'">
<td> ' . $lp++ . '</td>
<td class="bolder"> ' . $record['Name'] . '</td>
<td> ' . $record['Product'] . '</td>';
if ($invoice=="on") $output .= '<td style="font-size:11px">' . $record['Invoice'] . '</td>';
$output .= '<td> ' . $record['despatched'] . '</td>
<td> ' . $record['Qt'] . '</td>
<td> ' . $record['Price'] . '</td>
<td class="align_right"> ' . $record['Total'] . '</td>';

$output .= '</tr>';
}
//Now you can put a div with the Total both at the start and end of the table 
echo '<div class="stat_total">Qt: '.$total_qt.'  Total: &pound;'.$total.'</div>';
echo $output . '</table>';
echo '<div class="stat_total">Qt: '.$total_qt.'  Total: &pound;'.$total.'</div>    </div>'; 
```

# oracle - 循环检查支付期内的所有 14 天

> ID：12654304
> 
> 赞同：-1
> 
> 时间：2012-09-29T16:16:18.233
> 
> 标签：oracle, function, loops, plsql

名称：Calc_Anniversary

输入：Pay_Date、Hire_Date、Termination_Date

输出：如果是员工 Hire_Date 的周年纪念日，则为“Y”，如果不是，则为“N”，如果他在周年纪念日之前被解雇，则为“T”。

说明：使用 TO_CHAR 函数创建局部变量来保存员工的 Date_of_Hire、Termination_Date 和处理日期的月份和日期。首先检查他是否在他的周年纪念日之前被终止。周年纪念日可以在支付期内的任何一天，因此将有一个循环来检查支付期内的所有 14 天，以查看其中一天是否是他的周年纪念日。

```
 CREATE OR replace FUNCTION Calc_anniversary(
   incoming_anniversary_date IN VARCHAR2)
   RETURN BOOLEAN
   IS
 hiredate        VARCHAR2(20);
 terminationdate VARCHAR(20);
 employeeid      VARCHAR2(38);
 paydate         NUMBER := 0;
 BEGIN
SELECT Count(arndt_raw_time_sheet_data.pay_date)
INTO   paydate
FROM   arndt_raw_time_sheet_data
WHERE paydate = incoming_anniversary_date;

WHILE paydate <= 14 LOOP
    SELECT To_char(employee_id, '999'),
           To_char(hire_date, 'DD-MON'),
           To_char(termination_date, 'DD-MON')
    INTO   employeeid, hiredate, terminationdate
    FROM   employees,
           time_sheet
    WHERE  employees.employee_id = time_sheet.employee_id
           AND paydate = pay_date;

    IF terminationdate > hiredate THEN
      RETURN 'T';
    ELSE
      IF To_char(SYSDATE, 'DD-MON') = To_char(hiredate, 'DD-MON')THEN
        RETURN 'Y';
      ELSE
        RETURN 'N';
      END IF;
    END IF;

    paydate := paydate + 1;
END LOOP;
END; 
```

我正在使用的表格

```
CREATE TABLE Employees ( EMPLOYEE_ID INTEGER,
FIRST_NAME VARCHAR2(15),
 LAST_NAME VARCHAR2(25),
 ADDRESS_LINE_ONE VARCHAR2(35),
 ADDRESS_LINE_TWO VARCHAR2(35),
 CITY VARCHAR2(28),
 STATE CHAR(2),
 ZIP_CODE CHAR(10),
 COUNTY VARCHAR2(10),
 EMAIL VARCHAR2(16),
 PHONE_NUMBER VARCHAR2(12),
 SOCIAL_SECURITY_NUMBER VARCHAR2(11),
 HIRE_DATE DATE,
 TERMINATION_DATE DATE,
 DATE_OF_BIRTH DATE,
 SPOUSE_ID INTEGER,
 MARITAL_STATUS CHAR(1),
  ALLOWANCES INTEGER,
  PERSONAL_TIME_OFF FLOAT,
  CONSTRAINT pk_employee_id PRIMARY KEY (EMPLOYEE_ID),
   CONSTRAINT fk_spouse_id FOREIGN KEY (SPOUSE_ID) REFERENCES EMPLOYEES (EMPLOYEE_ID))
 /
 CREATE TABLE Arndt_Raw_Time_Sheet_data ( EMPLOYEE_ID INTEGER,
    PAY_DATE DATE,
     HOURS_WORKED FLOAT,
     SALES_AMOUNT FLOAT,
      CONSTRAINT pk_employee_id_pay_date_time PRIMARY KEY (EMPLOYEE_ID, PAY_DATE),
      CONSTRAINT fk_employee_id_time FOREIGN KEY (EMPLOYEE_ID) REFERENCES EMPLOYEES (EMployee_ID)); 
```

错误**FUNCTION Calc_Anniversary 已编译
警告：执行已完成但有警告**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T21:06:50.000

函数必须返回一些东西。RETURN 语句通常是函数中的最后一条语句。

您选择不这样做，这就是您收到错误的原因。您所有的 RETURN 语句都嵌入在条件分支中，因此如果您的逻辑从不执行循环，您将永远不会执行 RETURN。

你的循环逻辑很混乱。您正在将您的计数填充`paydate`为计数（那么为什么将其称为“paydate”？）但是您的初始化查询将“paydate”与您的参数 进行比较，该参数`incoming_anniversary_date`是一个日期。也许您打算将它与表格列进行比较`pay_date`？那么谁知道呢你的代码实际上是做什么的？

无论如何，最重要的是在您的函数中引入一些最佳实践：您需要填充一个变量并将自己限制为只有一个 RETURN 语句。

```
 return_value char(1);

 BEGIN
     return_value := 'X';
     ....   
    WHILE paydate <= 14 LOOP
    ....
    IF terminationdate > hiredate THEN
         return_value :=  'T';
    ELSE
      IF To_char(SYSDATE, 'DD-MON') = To_char(hiredate, 'DD-MON')THEN
        return_value :=   'Y';
      ELSE
        return_value :=  'N';
      END IF;
    END IF;
       ...
  END LOOP;
  RETURN return_value;
END; 
```

* * *

另外，这是错误的：

```
IF terminationdate > hiredate THEN 
```

您将这些日期转换为字符串，这意味着“23-JAN”>“22-DEC”。这可能不是您想要的结果。

哦，把你的变量重命名`paydate`为不那么容易混淆的名字，比如`l_count`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T02:26:02.193

```
 create or replace
 FUNCTION Calc_Anniversary(employee IN VARCHAR2)
 RETURN VARCHAR2

 IS

 counter INTEGER;
 term_date VARCHAR2(15);
  h_date VARCHAR2(15);
  p_date DATE;

  BEGIN

    SELECT TO_CHAR(hire_date, 'DD-MON'), TO_CHAR(termination_date, 'DD-MON'), pay_date INTO h_date, term_date, p_date
   FROM employees e, diaz_raw_time_sheet_data d
   WHERE e.employee_id = d.employee_id
   AND e.employee_id = employee;

FOR counter IN 0 .. 14 LOOP 
  IF term_date > h_date THEN
  RETURN 'T';
  ELSIF TO_CHAR(p_date,'DD-MON') = h_date THEN
  RETURN 'Y';
  END IF;
  p_date := p_date - 1;
END LOOP;
 IF h_date <> TO_CHAR(p_date, 'DD-MON') THEN
RETURN 'N';
 END IF;
 END; 
```

# php - 使用 PHP 备份整个网站

> ID：12654308
> 
> 赞同：1
> 
> 时间：2012-09-29T16:16:33.683
> 
> 标签：php, zip, backup

使用 PHP，我正在开发一个 CMS。这需要支持网站备份。

必须：

*   压缩的 ZIP 文件夹
*   必须至少在 Linux 和 Windows 上工作
*   必须在 PHP 5.0 上工作，PHP 4 会很好
*   我只需要一个函数/类，不要链接我的开源软件，因为我需要自己做
*   CMS 不需要 MySQL 备份，因为它是 XML 驱动的

我已经在 PHP 中检查了 ZipArchive。这是我到目前为止所得到的。但是，当我尝试访问它创建的服务器上的 ZIP 文件时，我得到 404？它不起作用，我不知道为什么。

```
<?php
    $filename = CONTENT_DIR . 'backups/' . date( 'm-d-Y_H-i-s' ) . '.zip';

    if ( $handle = opendir( ABS_PATH ) ) {
        $zip = new ZipArchive();

        if ( $zip->open( $filename, ZIPARCHIVE::CREATE ) !== true ) {
            exit( "cannot open <$filename>\n" );
        }

        $string = '';
        while ( ( $file = readdir( $handle ) ) !== false ) {
            $zip->addFile( $file );
            $string .= "$file\n<br>";
        }
        closedir( $handle );
        $string .= "Status of the Zip Archive: " . $zip->status;
        $string .= "<br>System status of the Zip Archive: " . $zip->statusSys;
        $string .= "<br>Number of files in archive: " . $zip->numFiles;
        $string .= "<br>File name in the file system: " . $zip->filename;
        $string .= "<br>Comment for the archive: " . $zip->comment;
        $zip->close();
        echo $string;
    }
?> 
```

# package - Concrete5: Take the central part of my single page and have it displayed on the homepage

> ID：12654314
> 
> 赞同：0
> 
> 时间：2012-09-29T16:18:11.270
> 
> 标签：package, concrete5, singlepage

Within my Concrete5 there's a package that contains many single pages, which actually make the core functionality (community connections).

There's one particular page that contains search functionality. Is there any way to take the central part of that page and somehow display it on the homepage, in a div element or similar?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T20:07:28.743

You can do this with jquery .load() On the single page, wrap the content you want to import in a div with a unique id. On the home page, add a div to import the content into

```
// Get the URL of the page
var url = "relative/path/to/page;

// Load the new page into the temp container
// Replace #wrapper with the selector of the element you want to import
$("#import-content").load(url + " #wrapper"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T18:25:46.373

You should be able to do this by creating a new public function in the single_page's controller that returns whatever you want it to (data that you can then render in HTML, or you could have the controller method itself render an "element" with some data, or just create an HTML string in the controller method itself if you want to totally violate the MVC pattern).

Then you should be able to retrieve that data or markup from your other page like so:

```
$myController = Loader::controller('/path/to/singlepage'); //<--NOTE this is a C5 URL path (e.g. "slug"), not a server file path!
$myMarkup = $myController->myCustomFunctionIWroteToReturnSomeStuff();
echo $myMarkup; 
```

# c - C程序切换语句

> ID：12654315
> 
> 赞同：3
> 
> 时间：2012-09-29T16:18:20.753
> 
> 标签：c, switch-statement, default

我是 C 编程新手。我有一个关于 Switch 语句的快速问题。我有一个菜单，其中显示了如下选项列表：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <ctype.h>

#define MAX 100

struct Video { 
char name[1024];        // Yvideo name
int ranking;                // Number of viewer hits
char url[1024];             // YouTube URL
};

struct Video Collection[MAX];

int tail = 0;

//-- Forward Declaration --// 
void printall();
void insertion();
void savequit();
void load();
void branching(char);
void menu(); 
int main()
{
char ch; 

load();     // load save data from file

printf("\n\nWelcome\n");

do {
    menu();
    fflush(stdin);            // Flush the standard input buffer 
    ch = tolower(getchar()); // read a char, convert to lower case
    branching(ch);
} while (ch != 'q');

return 0; 
}
void menu()
{
    printf("\nMenu Options\n");
printf("------------------------------------------------------\n");
    printf("i: Insert a new favorite\n");
    printf("p: Review your list\n"); 
    printf("q: Save and quit\n");
    printf("\n\nPlease enter a choice (i, p, or q) ---> "); 
}

void branching(char option)
{
switch(option)
{
    case 'i':
        insertion();
        break;

    case 'p':
        printall();
        break;

    case 'q':
        savequit();
        break;

    default:
        printf("\nError: Invalid Input.  Please try again..."); 
        break;
}
} 
```

到目前为止，输入“i”（用于插入新条目）和 q（用于保存和退出）工作正常。但是，每次我输入“p”时，我都会得到默认情况。（错误：输入无效。请重试...）。我做错了什么？我相信开关的语法是正确的？我尝试将“p”更改为不同的字母，但我仍然得到默认大小写。如果有帮助，这是我的 printall() 方法...

```
void printall()
{
int i; 

printf("\nCollections: \n"); 

for(i = 0; i < tail; i++)
{
    printf("\nName: %s", Collection[i].name);
    printf("\nRanking (Hits): %d", Collection[i].ranking);
    printf("\nURL: %s", Collection[i].url);
    printf("\n");
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T16:42:53.380

怎么样的东西：

```
char b[5];
do {
    menu();
    if(fgets(b,5,stdin)==NULL)
        return -1;

    ch = tolower(b[0]); // read a char, convert to lower case
    while(strlen(b)>=4&&b[3]!='\n'){
         check=fgets(b,5,stdin);
         if(check==NULL)
            return -1;
    }

    branching(ch);
} while (ch != 'q'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-29T16:54:43.303

您可以在默认情况下输出无效字符。这可以帮助您了解如何处理您的输入。

```
default:
    printf("\nError: Invalid Input ('%c').  Please try again...", option); 
    break; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-29T16:27:51.840

`fflush(stdin)`未定义，因为 fflush 仅针对输出流定义。要清除换行符，您可以简单地使用另一个 getchar()。

试试这个循环部分：

```
do {
    menu();
    ch = tolower((unsigned char)getchar());
    getchar();
    branching(ch);
} while (ch != 'q'); 
```

# javascript - 多级xml到jquery中的无序列表

> ID：12654317
> 
> 赞同：5
> 
> 时间：2012-09-29T16:18:51.467
> 
> 标签：javascript, jquery

我正在努力从一个 xml 文件创建一个无序列表，但到目前为止没有运气。我知道如何从 jQuery 处理 xml，但我无法弄清楚如何制作多级无序列表。

这是我到目前为止所取得的成就。

xml文件

```
<?xml version="1.0" encoding="utf-8"?>
<Parent>Director
    <Children>Exe Director1</Children>
    <Children>Exe Director2</Children>
    <Parent>Exe Director2
        <Children>Sub Director 1</Children>
        <Children>Sub Director 2</Children>
        <Parent>Sub Director 3
            <Children>Cameraman 1</Children>
            <Children>Cameraman 2</Children>
        </Parent>
    </Parent>    
</Parent> 
```

html文件

```
<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Untitled Document</title>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
    var levels;
    $(document).ready(function() 
    {
        $.ajax({
            type: "GET",
            url: "test.xml",
            dataType: "xml",
            success: xmlParser
        });
    });
    function xmlParser(xml)
{
    $(xml).find("Children").each(function()
    { 
        var text = $(this).text();
    });
}
</script>
</head>
<body>
    <div id="ListContainer"></div>
</body>
</html> 
```

这是预期的列表

```
<ul>
    <li>Exe Director1</li>
    <li>Exe Director2</li>
    <ul>
        <li>Sub Director 1</li>
        <li>Sub Director 2</li>
        <ul>
            <li>Cameraman 1</li>
            <li>Cameraman 2</li>
        </ul>
    </ul>
</ul> 
```

你们能帮帮我吗！

编辑：

```
<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Untitled Document</title>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
    var levels;
    $(document).ready(function() 
    {
        $.ajax({
            type: "GET",
            url: "test.xml",
            dataType: "xml",
            success: function (xml) { xmlParser($(xml)); }
        });
    });
    function xmlParser(xml) {
        //alert($(xml).contents());  
        var $ul = $("<ul>"); // For each Parent, create an <ul>
        $(xml).contents().each(function (i, el) {
            if (el.nodeType == 3) return true;
            if (el.nodeName.toUpperCase() == "CHILDREN") 
            {
               $("<li>").text($(el).text()).appendTo($ul); // Append <li> Children
            } else 
            {
               $ul.append(xmlParser($(el))); // Recursively append the other Parent
            }
            //$("#ListContainer").append($ul);
        });
        //alert($ul.html());
        $("#ListContainer").append($ul);
    }
</script>
</head>
<body>
    <div id="ListContainer"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-29T16:41:02.210

递归构造无序列表：

```
function xmlParser($xml) {   
    var $ul = $("<ul>"); // For each Parent, create an <ul>
    $xml.contents().each(function (i, el) {
        if (el.nodeType == 3) return true;
        if (el.nodeName.toUpperCase() == "CHILDREN") {
           $("<li>").text($(el).text()).appendTo($ul); // Append <li> Children
        } else {
           $ul.append(xmlParser($(el))); // Recursively append the other Parent
        }
    });
    return $ul;
} 
```

这是一个**[演示](http://jsfiddle.net/mLCCK/)**。将每个组`Parent`和各自`Children`视为一个单独的单元。例如，如果您的 XML 如下所示：

```
<Parent>Director
    <Children>Exe Director1</Children>
    <Children>Exe Director2</Children>
</Parent> 
```

生成的 HTML 将是：

```
<ul>
    <li>Exe Director1</li>
    <li>Exe Director2</li>
</ul> 
```

你将如何构建这个？这很简单：创建一个`<ul>`元素，并为每个元素`Children`附加一个`<li>`元素。现在，对于递归部分，当您引入另一个时`Parent`，您只需`<ul>`再次创建另一个，如果它是一个单元，并将其结果附加到*父级* `<ul>`。

请注意，我上面使用的函数需要一个 jQuery 对象作为参数传递，因此您需要更改`success`处理程序：

```
success: function (xml) {
  xmlParser($(xml));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T16:41:13.640

首先，改变`success: xmlParser`语法，

```
success: function(data){
    xmlParser(data)
} 
```

# c# - 从方法返回是否正确处理对象？

> ID：12654319
> 
> 赞同：-1
> 
> 时间：2012-09-29T16:19:38.457
> 
> 标签：c#, .net, idisposable, using-statement, try-finally

如果您使用该`using`方法而不是让我们说`FileStream.Close();`，该类会正确处理吗？

```
private static string GetString()
{
    using(FileStream fs = new FileStream("path", FileMode.Open))
    using(StreamReader sr = new StreamReader(fs))
    {
         return sr.ReadToEnd();
    }
} 
```

相当于：

```
private static string GetString()
{
    string toReturn = "";           

    FileStream fs = new FileStream("path", FileMode.Open)
    StreamReader sr = new StreamReader(fs)

    toReturn = sr.ReadToEnd();

    sr.Close();
    fs.Close();

    return toReturn;
} 
```

或者：

```
private static string GetString()
{
    FileStream fs;
    StreamReader sr;

    try
    {
        string toReturn = "";          

        fs = new FileStream("path", FileMode.Open)
        sr = new StreamReader(fs)

        toReturn = sr.ReadToEnd();

        sr.Close();
        fs.Close();

        return toReturn;
    }
    finally
    {
       if(sr != null)
           sr.Close();

       if(fs != null)
           fs.Close();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T16:28:41.443

从语句生成的代码`using`与您的第二个示例非常相似（最大的区别是它调用`IDisposable.Dispose`而不是`Close`）。`return`无论方法是通过异常退出还是抛出异常，它都会正确处理对象。

如果您好奇，这是不带`using`s 的 C# 代码，它编译为与带 s 的示例相同的 IL `using`：

```
private static string GetString()
{
    FileStream fs = new FileStream("path", FileMode.Open);
    try
    {
        StreamReader sr = new StreamReader(fs);
        try
        {
            return sr.ReadToEnd();
        }
        finally
        {
            if (sr != null)
                ((IDisposable)sr).Dispose();
        }
    }
    finally
    {
        if (fs != null)
            ((IDisposable)fs).Dispose();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T16:34:44.157

看看`using`声明：

[http://msdn.microsoft.com/en-us/library/yh598w02(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/yh598w02(v=vs.110).aspx)

它应该等同于：

```
FileStream fs = null;

try
{
    fs = new FileStream("path", FileMode.Open);
    StreamReader sr = null;
    try
    {
        sr = new StreamReader(fs);
        toReturn = sr.ReadToEnd();
        return toReturn;
    }
    finally
    {
       if(sr != null)
           sr.Dispose();
    }
}
finally
{
    if(fs != null)
        fs.Dispose();
} 
```

在`Dispose`方法内部，它将调用`Close`流。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T16:24:18.140

如果它实现`IDisposable`了，它将在退出 using 块时正确关闭。

# delphi - 如何在 Delphi 中使用 SetLength 发生内存不足异常时释放内存

> ID：12654320
> 
> 赞同：6
> 
> 时间：2012-09-29T16:19:42.963
> 
> 标签：delphi, memory, free, multidimensional-array

我有一段德尔福代码

```
var
  a: array of array of array of integer;
begin
  try
   SetLength(a, 100000, 100000, 10000); // out of memory here
   doStuffs(a); 
  except
   a = nil; // try to free the memory 
  end;
end; 
```

上面的代码试图分配大量的内存并且`out-of-memory`会被捕获。将`a=nil`被执行，但内存没有被释放。

有没有办法在内存不足异常的情况下释放内存？

我试过`SetLength(a, 0, 0, 0)`and `Finalize(a)`，两者都不起作用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-29T16:54:47.650

通常，无法从内存不足错误中恢复。此时堆很可能已损坏。适当的响应是终止进程。

在这种特定情况下，分配是`DynArraySetLength`在`System`单元中执行的。这执行重复分配。只有最后一个动作是实际分配`DynArraySetLength`的返回值，在上面的代码中。`a`如果发生错误，`DynArraySetLength`则运行时不会进行整理。这意味着在失败的情况下，任何分配的内存都会泄漏并且无法恢复。您无法引用它来释放它。

你可能认为`DynArraySetLength`应该做更多的整理工作。但是，它的做法是有道理的。由于内存不足的情况总是会导致堆损坏，因此尝试整理只会延长痛苦。一旦堆死了，尝试释放内存就没有意义了。

# jquery - Jquery专注于第一个文本字段并将光标设置在值末尾以进行即时数据输入

> ID：12654324
> 
> 赞同：15
> 
> 时间：2012-09-29T16:20:16.880
> 
> 标签：jquery, focus

我正在加载一个表单并将焦点默认到第一个文本字段。文本字段填充有默认值“PW-”。（客户型号PW-446、PW-9887等首字母）

他们只想在表单加载时开始输入数字，而不是单击字段末尾等来输入数字。光标应在 PW- 末尾闪烁，并准备好进行数据输入。

我尝试了在 StackOverflow 上找到的许多不同方法，但都没有运气:-( 有什么
想法吗？提前致谢！

**查询**

```
$(document).ready(function(){

    $('input:text:first').focus();

}); 
```

**HTML**

```
< input type="text" name="part_id" size="20" value="PW-"> 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-09-29T16:32:37.000

这是一个[**示例**](http://jsfiddle.net/cG9gN/1/)：

```
$(document).ready(function(){
    var el = $("input:text").get(0);
    var elemLen = el.value.length;

    el.selectionStart = elemLen;
    el.selectionEnd = elemLen;
    el.focus();
});​ 
```

[https://developer.mozilla.org/en-US/docs/XUL/Property/selectionStart](https://developer.mozilla.org/en-US/docs/XUL/Property/selectionStart)

[https://developer.mozilla.org/en-US/docs/XUL/Property/selectionEnd](https://developer.mozilla.org/en-US/docs/XUL/Property/selectionEnd)

对于旧版本的 IE，您可能需要使用： http: [//msdn.microsoft.com/en-us/library/ie/ms536401 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ie/ms536401(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T16:27:38.493

有点不同：也许尝试将您的“PW-”设置为文本输入字段左侧的文本。验证字段中的非数字，然后在提交表单时，在该字段的值前面加上“PW-”，以便您拥有完整的零件号。

# mysql - 将活动表与 MYSQL 中的源表连接起来

> ID：12654326
> 
> 赞同：0
> 
> 时间：2012-09-29T16:20:26.390
> 
> 标签：mysql, join

我有一个 MYSQL 的“活动”表，其中记录了用户的所有活动。假设用户的活动可以是提出问题或回答问题。因此，如果用户提出问题，他们的问题会被放入“问题”表中，并且活动也会被放入“活动”表中。如果用户提供答案，则相同，除了答案进入“答案”表和“活动”表。

问题表的字段是：

```
q_id          question 
```

答案表的字段是：

```
a_id          q_id        answer 
```

活动表的字段是：

```
activity_id   q_id    user_id     action_type 
```

（上面显示的列更多，但这些说明了这一点。）

我想要做的是显示用户最近在网站上的操作，并实际显示操作是什么。

我当前的 MYSQL 查询只是将活动表与问题表连接起来，如下所示（使用 PDO）：

```
"SELECT * 
FROM activity 
LEFT JOIN question ON activity.q_id = question.q_id 
WHERE activity.user_id = :user_id 
ORDER BY activity.a_id desc" 
```

这可以正常工作，并且总是可以给我在活动列表中显示的问题。但是，如果返回的活动是答案，我也希望能够显示答案。我尝试只使用三重连接，如下所示：

```
"SELECT * 
FROM activity 
LEFT JOIN question ON activity.q_id = question.q_id
LEFT JOIN answers ON activity.q_id = answers.q_id  
WHERE activity.user_id = :user_id 
ORDER BY activity.a_id desc" 
```

但这只是给了我一个比第一个查询长两倍的行列表，并且当 action_type 是答案时不显示答案。

我认为这应该是可能的，但是我想得越多，我相信也许我应该废弃活动表并直接在问题和答案表上执行查询并使用 UNION？对这个决定有什么意见，对查询有什么想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T17:24:52.500

您可以使用外连接，它会返回活动表中的所有内容，即使答案表中没有相应的行：

```
SELECT *
FROM activity
LEFT JOIN question ON activity.q_id = question.q_id
LEFT OUTER JOIN answers ON activity.q_id = answers.q_id
WHERE activity.user_id = :user_id
ORDER BY activity.a_id desc 
```

我假设对于活动表中的每个 q_id 值，问题表中总会有一个对应的行。

为了解决重复答案的问题，我会在活动表中添加一个 a_id 字段。对于问题活动，您将其设置为 NULL，并且对于每个答案，您将 a_id 字段设置为适当的 a_id 值，以识别哪个答案与活动相关。然后，您将按如下方式调整上面的 SQL：

```
SELECT *
FROM activity
LEFT JOIN question ON 
    activity.q_id = question.q_id
LEFT OUTER JOIN answers ON 
    activity.q_id = answers.q_id AND 
    activity.a_id = answers.a_id
WHERE activity.user_id = :user_id
ORDER BY activity.a_id desc 
```

# hadoop - Hadoop Streaming 1.0.3 无法识别的 -D 命令

> ID：12654327
> 
> 赞同：2
> 
> 时间：2012-09-29T16:20:39.683
> 
> 标签：hadoop, streaming

我正在尝试链接一些流式作业（用 Python 编写的作业）。我做到了，但是 -D 命令有问题。这是代码，

```
public class OJs extends Configured implements Tool
{
public int run( String[] args) throws Exception
{
    //DOMINATION
    Path domin      = new Path( "diploma/join.txt");
    //dominationm.py
    Path domout     = new Path( "mapkeyout/");
    //dominationr.py

    String[] dom = new String[]
    {
        "-D mapred.reduce.tasks=0",
        "-file"     , "/home/hduser/optimizingJoins/dominationm.py" ,
        "-mapper"   , "dominationm.py"                              ,
        "-file"     , "/home/hduser/optimizingJoins/dominationr.py" ,
        "-reducer"  , "dominationr.py",         
        "-input"    , domin.toString()                              ,
        "-output"   , domout.toString()
    };
    JobConf domConf = new StreamJob().createJob( dom);
    //run domination job
    JobClient.runJob( domConf);
    return 0;
}//end run

public static void main( String[] args) throws Exception
{
    int res = ToolRunner.run( new Configuration(), new OJs(), args);
    System.exit( res);
}//end main
}//end OJs 
```

我的问题是命令“-D mapred.reduce.tasks=0”。我得到这个错误，

```
ERROR streaming.StreamJob: Unrecognized option: -D... 
```

其中 ... 包括任何可能的语法组合，即

```
"-D mapred.reduce.tasks=0"
"-Dmapred.reduce.tasks=0"
"-D", "mapred.reduce.tasks=0"
"-D", "mapred.reduce.tasks=", "0"
" -D mapred.reduce.tasks=0" 
```

等等

当我在 -D 之前有一个空格时，则忽略此命令。我没有指定的减速器数量。当我没有这个空间时，我会收到我提到的错误。

我究竟做错了什么？

**编辑**

用 -jobconf 替换 -D 选项并不能解决问题。这是整个错误输出，

```
 Warning: $HADOOP_HOME is deprecated.

    12/10/04 00:25:02 ERROR streaming.StreamJob: Unrecognized option: -jobconf mapred.reduce.tasks=0
    Usage: $HADOOP_HOME/bin/hadoop jar \
          $HADOOP_HOME/hadoop-streaming.jar [options]

    Options:
   -input    <path>     DFS input file(s) for the Map step

   -output   <path>     DFS output directory for the Reduce step

   -mapper   <cmd|JavaClassName>      The streaming command to run

   -combiner <cmd|JavaClassName> The streaming command to run

   -reducer  <cmd|JavaClassName>      The streaming command to run

   -file     <file>     File/dir to be shipped in the Job jar file

   -inputformat TextInputFormat(default)|SequenceFileAsTextInputFormat|JavaClassName Optional.

   -outputformat TextOutputFormat(default)|JavaClassName  Optional.

   -partitioner JavaClassName  Optional.

   -numReduceTasks <num>  Optional.

   -inputreader <spec>  Optional.

   -cmdenv   <n>=<v>    Optional. Pass env.var to streaming commands

   -mapdebug <path>  Optional. To run this script when a map task fails 

   -reducedebug <path>  Optional. To run this script when a reduce task fails 

   -io <identifier>  Optional.

   -verbose

   Generic options supported are

   -conf <configuration file>     specify an application configuration file

   -D <property=value>            use value for given property

   -fs <local|namenode:port>      specify a namenode

   -jt <local|jobtracker:port>    specify a job tracker

   -files <comma separated list of files>    specify comma separated files to be copied to the map reduce cluster

   -libjars <comma separated list of jars>    specify comma separated jar files to include in the classpath.

   -archives <comma separated list of archives>    specify comma separated archives to be unarchived on the compute machines.

   The general command line syntax is
   bin/hadoop command [genericOptions] [commandOptions]

   For more details about these options:

   Use $HADOOP_HOME/bin/hadoop jar build/hadoop-streaming.jar -info

   Exception in thread "main" java.lang.IllegalArgumentException: 
    at org.apache.hadoop.streaming.StreamJob.fail(StreamJob.java:549)
    at org.apache.hadoop.streaming.StreamJob.exitUsage(StreamJob.java:486)
    at org.apache.hadoop.streaming.StreamJob.parseArgv(StreamJob.java:246)
    at org.apache.hadoop.streaming.StreamJob.createJob(StreamJob.java:143)
    at OJs.run(OJs.java:135)
    at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)
    at OJs.main(OJs.java:183)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.hadoop.util.RunJar.main(RunJar.java:156) 
```

此外，我无法理解，为什么当我直接使用 Streaming 运行作业时，Streaming 会识别 -D 选项，但是当我通过 JobClient 使用 Streaming 运行作业时，-D 选项识别失败。是 Streaming 的问题还是 sun.reflect 的问题？Ubuntu 中的 sun.reflect 包在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T00:53:53.447

看起来 StreamJob 不支持`-Dkey=value`通用配置选项。

请参阅[http://wiki.apache.org/hadoop/HadoopStreaming](http://wiki.apache.org/hadoop/HadoopStreaming)，但看起来您需要使用（并且在该页面上作为示例明确调用）：

```
-jobconf mapred.reduce.tasks=0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T10:03:21.047

首先，这条线

```
..."-D mapred.reduce.tasks=0"... 
```

应该写成

```
..."-D", "mapred.reduce.tasks=0"... 
```

这是命令的标准模式，

```
"-commandname", "value" 
```

要继续，程序通常可以接受或不接受某些参数。Hadoop 上下文中的这些参数称为选项。它们有两种，通用的和流式的，工作特定的。[通用选项](http://hadoop.apache.org/docs/r1.0.3/commands_manual.html#Generic+Options)由[GenericOptionsParser](http://hadoop.apache.org/docs/stable/api/org/apache/hadoop/util/GenericOptionsParser.html)处理。[Hadoop Streaming 上下文中的作业特定选项](http://hadoop.apache.org/docs/r1.0.3/streaming.html#Streaming+Command+Options)由 StreamJob 处理。

所以，在初始问题的代码中设置 -D 选项的方式是错误的。这是因为 -D 是一个通用选项。StreamJob 无法处理通用选项。StreamJob 可以处理 -jobconf 但是，这是一个特定于作业的选项。所以这条线

```
..."-D", "mapred.reduce.tasks=0"... 
```

正确写为

```
..."-jobconf", "mapred.reduce.tasks=0"... 
```

使用 -jobconf 会引发此警告，

```
WARN streaming.StreamJob: -jobconf option is deprecated, please use -D instead. 
```

为避免此警告，需要 -D 选项，因此需要 GenericOptionsParser 来解析 -D 选项。

继续前进，当有人使用命令运行流式作业时

```
bin/hadoop jar /usr/local/hadoop/contrib/streaming/hadoop-streaming-*.jar [ generic options] [ streaming( job specific) options] 
```

真的会发生什么？为什么在这种情况下没有问题？在这种情况下，通用和特定于作业的选项都被正确解析。这是可能的，因为 Tool 接口通过 GenericOptionsParser 处理通用选项。作业特定选项由 hadoop-streaming-*.jar 中的 StreamJob() 处理。

实际上 hadoop-streaming-*.jar 有一个文件“HadoopStreaming.java”负责以上述方式提交的作业。HadoopStreaming 类使用两个参数调用 ToolRunner.run()。第一个参数是一个新的 StreamJob 对象，第二个参数包含所有命令行选项，即 [通用选项] 和 [流（作业特定）选项]。GenericOptionsParser 通过仅解析通用选项将通用选项与作业特定选项分开。然后，GenericOptionsParser 返回从 StreamJob() 解析的其余选项，即特定于作业的选项。StreamJob 通过 Tool.run([job specific args]) 调用，其中 Tool = StreamJob。看到[这个](http://hadoop.apache.org/docs/r1.0.3/api/org/apache/hadoop/util/Tool.html)和[这个](http://hadoop.apache.org/docs/r1.0.3/api/org/apache/hadoop/util/ToolRunner.html)有一个直觉为什么 Tool = StreamJob。

综上所述，

GenericOptionsParser -> 通用选项，

StreamJob -> 流式传输（作业特定）选项。

# c++ - 即使我设置了限制，我的 for 语句也会不断重复？

> ID：12654332
> 
> 赞同：0
> 
> 时间：2012-09-29T16:21:18.857
> 
> 标签：c++, macos

即使我设置了限制，我的 for 语句也会不断重复？（对不起，我对此完全陌生）我不知道如何防止它永远重复。即使不满足我设置的条件也会熄灭，这应该发生吗？

```
// Garbage Collection
#include <iostream>
#include <cmath>

using namespace std;

int main() {
  double reg, glass, met;
  double total;
  double reg_ratio, glass_ratio, met_ratio;

  cin >> reg;
  cin >> glass;
  cin >> met;

  total = met + glass + reg;

  cout << "The total number of bags is " << total << endl;

  met_ratio = met / total;
  reg_ratio = reg / total;
  glass_ratio = glass / total;

  cout << "The metal ratio is " << met_ratio << endl;
  cout << "The glass ratio is " << glass_ratio << endl;
  cout << "The regular ratio is " << reg_ratio << endl;

  if (met==reg==glass) {
    cout << "All garbage amounts are the same." << endl;
  }
  else if (reg > glass && met) {
    cout << "Regular is the largest." << endl;
  }
  else if (glass > met && reg) {
    cout << "Glass is the largest." << endl;
  }
  else if (met> glass && reg) {
    cout << "Metal is the largest." << endl;
  }

  for (reg >= 50; reg+reg;) {
    cout << "I can't take anymore." << endl;
  }

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T16:24:47.093

这不是 a 的`for`工作方式。它的：

```
for (initial statement; condition; iteration operation) 
```

执行一次，在循环的`initial statement`第一次进入时，只要为`condition`真，循环就会执行，并且操作在每次迭代时执行。

在您的情况下，初始语句是`reg >= 50`，它什么都不做，条件是只有在以某种方式评估为`reg+reg`时才会为假，并且没有操作。`reg+reg``false`

`reg+reg`不会修改`reg`介意你。您正在寻找的操作可能是`reg += reg`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-29T16:24:54.473

`for(initialization; condition; increment-code)`是 for 循环的工作原理（注意：所有三个部分都是可选的）。如果`condition`是`true`，则继续循环。你把它混合起来写成`for(condition; increment-code; *empty*)`. 请注意，您的情况似乎相反。此外，您的增量部分实际上并没有 update `reg`，您将其添加到自身并将结果丢弃。

正确的代码是

```
for(; reg <= 50; reg += reg) 
```

另请注意，您的`if`陈述似乎*非常*虚假。

```
if (reg> glass && met) 
```

首先，请在二元运算周围留一个空格。接下来，这将仅测试 ift`reg`是否大于`glass`并且是否`met`为非零值。要测试是否`reg`同时大于`glass`和大于`met`，您必须明确执行两次：

```
if(reg > glass && reg > met) 
```

我可以推荐[一本好书](http://tinyurl.com/so-cxxbooks)吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T17:07:09.710

其他用户的报告是正确的：`for`你写的语句永远不会结束，也不会改变任何变量。[Xeo](https://stackoverflow.com/users/500104/xeo)`for`为您提供了编写语句的正确方法。

我要补充的是，`for`-loop 应该包含在条件为真时需要执行的指令。在您的情况下，您正在执行的指令似乎是在条件不再为真时执行的。如果你只是想在变量高于某个值时写一条消息，你应该使用`if`语句。

```
if (reg >= 50) {
  cout << "I can't take more." << endl;
} 
```

# jquery - 单击带有 jquery 的替代元素的链接

> ID：12654335
> 
> 赞同：0
> 
> 时间：2012-09-29T16:21:48.750
> 
> 标签：jquery, dom, click, jquery-traversing

虽然有很多关于使用 jQuery 遍历 DOM 的好资源，但我的示例没有任何运气。

在我的网站 www.smithgrey.co.uk 上，我有一系列缩略图画廊，所有这些画廊的前面都有一个“部分标题”div。

我想要实现的是，当您单击“section-title”div`<a href>`时，将单击右侧缩略图的第一个链接。

有多个实例`class="section-title"`- 不幸的是，我无法添加任何 ID 或类，因为这是动态生成的，并且已被要求尽可能保持原样。

HTML 如下所示：

```
<body>
  <div id="content-grid">
    <div class="section-title">
      <span class="section-title-type">Title of the first thumbnail gallery</span>
    </div>

    <div class="index-article">
      <a href="#" class="fancybox">
        <img src="thumbnail-1">
      </a>
    </div>

    <div class="section-title">
      <span class="section-title-type">Title of the second thumbnail gallery</span>
    </div>

    <div class="index-article">
      <a href="#" class="fancybox">
        <img src="thumbnail-2">
      </a>
    </div>

    <div class="index-article">
      <a href="#" class="fancybox">
        <img src="thumbnail-3">
      </a>
    </div>

    <div class="index-article">
      <a href="#" class="fancybox">
        <img src="thumbnail-4">
      </a>
    </div>   
  </div>
</body> 
```

到目前为止，这是我的 jQuery，但它并没有产生我想象的结果，因为无论我点击第一个还是第二个，它都会点击链接`<div class="section-title">`。

```
$('div.section-title').click( function(){
       $(this).parent().next($('div.index-article')).children('a.fancybox').click();
     }); 
```

**解决方案：**

在其他评论者的帮助下，我设法弄清楚如何让它按预期工作：

```
$(document).ready(function() {
  $('div.section-title').click( function(){
    $(this).next('.index-article').find('a.fancybox:first').click();
  });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T16:37:15.193

我将假设您已使用适当的就绪事件/等正确设置了您的 jQuery。我就是这样做的。请注意，我在超链接中添加了一个单击事件，以模拟 jsfiddle 示例中的单击。

[http://jsfiddle.net/lucuma/s9mds/](http://jsfiddle.net/lucuma/s9mds/)

```
$('div.section-title').click(function(e) {
    $(this).next('div').find('a:eq(0)').click(); 
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T16:50:27.557

用这个

```
 $(document).ready(function() {
   $('div.section-title').click( function(){
     $(this).closest($('div.index-article').find('a.fancybox').click();
   });
}); 
```

# c++ - vs10编译器这是一个错误吗？

> ID：12654337
> 
> 赞同：0
> 
> 时间：2012-09-29T16:22:10.097
> 
> 标签：c++, visual-studio-2010, compiler-construction

`Mat2D.h`

```
#pragma once

#include <iostream>
#include <iomanip>
#include <assert.h>

namespace Ggicci
{
    template<class T>
    class Mat2D
    {
    private:
        int _rows;
        int _cols;
        T** _data;

    public:
        Mat2D()
            :_rows(0), _cols(0), _data(NULL)
        {

        }

        Mat2D(const Mat2D<T>& rhs)
            :_rows(rhs._rows), _cols(rhs._cols)
        {   
            allocateData();
            cloneData(rhs._data);
        }

        Mat2D(int rows, int cols)
        {   
            initSize(rows, cols);
            allocateData();
            all(0);
        }

        Mat2D(int rows, int cols, T initValue)      
        {
            initSize(rows, cols);
            allocateData();
            all(initValue);
        }

        Mat2D(int rows, int cols, const T* data)
        {   
            initSize(rows, cols);
            allocateData();
            assignData(data);
        }

        ~Mat2D()
        {   
            destroyData();
        }

        const Mat2D& operator = (const Mat2D<T>& rhs)
        {
            if (this == &rhs)
            {
                return *this;
            }
            this->resize(rhs._rows, rhs._cols);
            this->cloneData(rhs._data);
            return *this;
        }

        T& operator() (int row, int col)
        {
            assert(row >= 0 && row < _rows && col >= 0 && col < _cols);
            return _data[row][col];
        }

        T operator() (int row, int col) const
        {
            assert(row >= 0 && row < _rows && col >= 0 && col < _cols);
            return _data[row][col];
        }

        Mat2D<T> operator * (const Mat2D<T>& rhs)
        {   
            assert(this->_cols == rhs._rows);       
            int new_rows = this->_rows;
            int new_cols = rhs._cols;
            Mat2D<T> result(new_rows, new_cols);
            for (int i = 0; i < new_rows; i++)
            {
                for (int j = 0; j < new_cols; j++)
                {
                    T sum = 0;
                    for (int k = 0; k < this->_cols; k++)
                    {
                        sum += this->_data[i][k] * rhs._data[k][j];
                    }
                    result._data[i][j] = sum;
                }
            }
            return result;
        }

        void resize(int rows, int cols)
        {
            destroyData();
            initSize(rows, cols);
            allocateData();
            all(0);
        }

        void all(T value)
        {
            for (int i = 0; i < _rows; i++)
                for (int j = 0; j < _cols; j++)
                    _data[i][j] = value;
        }

    private:
        void initSize(int rows, int cols)
        {
            assert(rows > 0 && cols > 0 && rows < 65536 && cols < 65536);
            _rows = rows;
            _cols = cols;
        }

        void allocateData()
        {
            _data = new T*[_rows];
            for(int i = 0; i < _rows; i++)
            {
                _data[i] = new T[_cols];
            }       
        }

        void assignData(const T* data)
        {   
            for (int i = 0; i < _rows; i++)
            {
                for (int j = 0; j < _cols; j++)
                {   
                    _data[i][j] = data[i*_rows + j];
                }
            }
        }

        void cloneData(T** data)
        {   
            for (int i = 0; i < _rows; i++)
                for (int j = 0; j < _cols; j++)
                    _data[i][j] = data[i][j];
        }

        void destroyData()
        {
            for(int i = 0; i < _rows; i++)
                delete _data[i];
            delete _data;
        }

        /*template<class T>*/  //--> Line 158
        friend std::ostream& operator << (std::ostream& out, const Mat2D<T>& rhs)
        {
            for(int i = 0; i < rhs._rows; i++)
            {
                for(int j = 0; j < rhs._cols; j++)
                {
                    out << std::setw(12) << rhs._data[i][j];
                }
                out << std::endl;
            }
            return out;
        }
    };
} 
```

主文件

```
#include <iostream>
#include <string>
#include <cmath>
#include "Mat2D.h"
using namespace std;
using namespace Ggicci;

Mat2D<float> getRotateMatrix33f(float theta, const Mat2D<float>& ref_point = Mat2D<float>(1, 2, 0.0f))
{
    theta = theta / 180 * 3.1415f;
    float rotate[] = {
        cos(theta), -sin(theta),    0,
        sin(theta), cos(theta),     0,
        0,          0,              1
    };
    Mat2D<float> result(3, 3, rotate);
    if (ref_point(0, 0) != 0 && ref_point(0, 1) != 0)
    {
        float dx = ref_point(0, 0);
        float dy = ref_point(0, 1);
        float translate_data[] = {
            1,  0,  0,
            0,  1,  0,
            dx, dy, 1
        };
        float translate_inv_data[] = {
            1,      0,      0,
            0,      1,      0,
            -dx,    -dy,    1
        };
        Mat2D<float> translate(3, 3, translate_data);
        Mat2D<float> translate_inv(3, 3, translate_inv_data);
        result = translate * result * translate_inv;
    }
    return result;
}

int main()
{
    int data_a[] = {1, 2};
    int data_b[] = {2, 3, 4, 5, 6, 7, 8, 9};
    Mat2D<int> a(1, 2, data_a);
    Mat2D<int> b(2, 4, data_b); 
    Mat2D<int> c;
    c = a * b;
    cout << "c = " << endl << c << endl;
    cout << "rotate matrix: " << endl << getRotateMatrix33f(30.0f) << endl;
    return 0;
} 
```

如果我发表评论`line 158`，`Mat2D.h`一切正常，项目可以构建并成功运行，但出现 4 个错误：

![代码片段的图像](../Images/db1b4d2e9df03e15cf84d65bea14ef93.png) ![错误信息输出的图像](../Images/2128ea20798b35b04c248af0634fbf4c.png)

如果我不评论`line 158`，

```
 error C2995: 'std::ostream &Ggicci::operator <<(std::ostream &,const Ggicci::Mat2D<T>
 &)' : function template has already been defined. 
```

然后我在项目重建中评论函数`getRotateMatrix33f`及其调用并成功运行，没有错误。`main`所以发生了什么事？这让我很困惑...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T16:32:52.907

注释第 158 行后实际上没有错误，但是 C++ 智能感知仍然会想到您的旧代码或可能在解析代码时出错，MSVC 团队接受这是他们智能感知引擎中的一个错误，但他们说他们无法修复它，直到MSVC2012，所以如果你能用那个版本测试你的代码

# python - 如何在python中找到包含焦点词的字符串的最长匹配

> ID：12654339
> 
> 赞同：3
> 
> 时间：2012-09-29T16:22:27.127
> 
> 标签：python, string, match, pseudocode

python /编程新手，所以不太清楚如何表达这个......

我要做的是：输入一个句子，找到输入句子的所有匹配项和一组存储的句子/字符串，并返回匹配字符串的最长组合。

我认为答案与正则表达式有关，但我还没有开始这些，如果我不需要的话也不想这样做。

我的问题：正则表达式是解决这个问题的方法吗？或者有没有办法在不导入任何东西的情况下做到这一点？

如果它可以帮助您理解我的问题/想法，这是我正在尝试做的伪代码：

```
input = 'i play soccer and eat pizza on the weekends'
focus_word = 'and'

ss = [
      'i play soccer and baseball',
      'i eat pizza and apples',
      'every day i walk to school and eat pizza for lunch',
      'i play soccer but eat pizza on the weekend',
     ]

match = MatchingFunction(input, focus_word, ss)
# input should match with all except ss[3]

ss[0]match= 'i play soccer and'
ss[1]match = 'and'
ss[2]match = 'and eat pizza'

#the returned value match should be 'i play soccer and eat pizza' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T17:24:44.653

听起来您想在输入字符串和数据库中的每个字符串之间找到[最长的公共子字符串。](http://en.wikibooks.org/wiki/Algorithm_Implementation/Strings/Longest_common_substring)假设您有一个函数 LCS 可以找到两个字符串中最长的公共子字符串，您可以执行以下操作：

```
> [LCS(input, s) for s in ss]
['i play soccer and ',
 ' eat pizza ',
 ' and eat pizza ',
 ' eat pizza on the weekend'] 
```

然后，听起来您正在寻找字符串列表中*重复次数最多的*子字符串。（如果我错了，请纠正我，但我不太确定您在一般情况下要查找的内容！）从上面的数组输出中，您将使用哪种字符串组合来创建输出字符串？

* * *

根据您的评论，我认为这应该可以解决问题：

```
> parts = [s for s in [LCS(input, s) for s in ss] if s.find(focus_word) > -1]
> parts
['i play soccer and ', ' and eat pizza '] 
```

然后，要摆脱此示例中的重复单词：

```
> "".join([parts[0]] + [p.replace(focus_word, "").strip() for p in parts[1:]])
'i play soccer and eat pizza' 
```

# javascript - 新的 Date() 在 PhoneGap 中不准确 - 更好的时间解决方案？

> ID：12654341
> 
> 赞同：1
> 
> 时间：2012-09-29T16:22:53.443
> 
> 标签：javascript, date, cordova, time

我正在尝试计算我的应用程序已暂停的秒数，并且在计时器期间的每一秒，我都在捕获`new Date()`.

我有一个“onResume”侦听器，当应用程序打开时会触发，但会`(new Date() - oldDate)`返回类似`96`的数字，即使应用程序已关闭 5 秒也是如此。

在我去创建一个 javascript 桥以获取 android 和 iOS 的时间之前，有什么东西可以为我做这件事吗？我需要精确到几分之一秒的时间，而且`new Date`似乎根本不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-07T12:12:41.787

创建一个原生桥并从 Android 中获取时间。这是获得准确时间的唯一方法（在发布问题时最新的 android 版本中）。

# javascript - Uncaught SyntaxError: Unexpected token ILLEGAL

> ID：12654344
> 
> 赞同：1
> 
> 时间：2012-09-29T16:23:17.467
> 
> 标签：javascript, localhost, jsfiddle

我正在尝试将此代码用于导航栏，但

一个。它不工作 b。我在 Google chrome 中收到此警告（未捕获的语法错误：意外令牌非法）

这一切都在 Jsfiddle 上完美运行，我正在制作的网站非常基本，页面上没有其他 javascript，所以我没有看到问题。

我尝试从头部、主体加载代码，并将其作为外部 js 文件引用，但任何一个都没有运气。

这是 jsfiddle 的链接：http: [//jsfiddle.net/zegermens/9hYey/](http://jsfiddle.net/zegermens/9hYey/)

如果有人可以帮助我处理这段代码或解释为什么它不能在 localhost 上运行，那就太棒了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T16:31:42.033

我过去遇到过这个问题/错误，这是由于没有分号和结束`;`分号。

当我在一个文件中加载多个 jQuery 库或 javascript 对象时，尤其会发生这种情况。

例如：

```
(function ($) {
   // Class 1
})(window.jQuery); // <- this is missing

(function ($) {
   // Class 2
})(window.jQuery) 
```

如果没有那个分号，类会尝试互相调用。像这样`...})(window.jQuery)(function...`

检查您的文件中可能缺少的所需分号。

# maven - 如何使用 Maven 在远程服务器上创建目录

> ID：12654346
> 
> 赞同：0
> 
> 时间：2012-09-29T16:23:59.060
> 
> 标签：maven

我使用 maven 将文件复制到远程服务器，但如果该文件夹不存在，则命令失败。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T17:12:43.040

您可以查看[sshexec-maven-plugin](http://evgeny-goldin.com/wiki/Sshexec-maven-plugin)，它可以满足您的需求。但这听起来像是你走错了路，因为 Maven 是一个构建工具而不是部署工具。出于这些目的，我建议使用木偶或厨师等。

# c - 服务器似乎在接受中丢弃连接

> ID：12654350
> 
> 赞同：2
> 
> 时间：2012-09-29T16:24:36.203
> 
> 标签：c, multithreading, sockets

我在实现具有主线程调用`accept()`然后将新客户端套接字传递给从线程的服务器时遇到问题（我之前创建了一个固定大小的线程池）。

它的实现方式是，我使用一个简单的整数数组来表示一堆客户端套接字，这些套接字会被成功的`accept()`调用填满。每个从属线程有一个互斥锁，如果每个从属线程的当前客户端文件描述符设置为`-1`（它在线程代码中设置为这样，在满足请求结束时），则每个从属线程都是隐式空闲的。

在一个用例中，我有一个 shell 脚本启动给定数量的客户端，例如，六个并发客户端（六个进程）。检查 TCP 连接设置，所有客户端都没有收到任何错误`connect()`。

现在问题来了。**在这个有六个客户端**的特定测试场景中，服务器只打印了**预期六条****成功消息**中的**五条`accept()`**。我不确定，但感觉就像要接受的客户端连接之一只是丢失了！`> Server got connection from ...`

 **更奇怪的是，我在接收接受的套接字和将其分派到从线程之间添加了一个`continue`( )。`//MAGICAL TEST`有了这个`continue`，没有从站接收工作，但现在所有客户端连接都按预期打印。我不太确定，但是当主线程向从属线程分派工作时，接受队列中的一个客户端连接是否有可能被丢弃？

编辑：只有当我的从属线程数量低于同时请求的数量时，才会发生这种情况。不过，我不明白为什么在这种情况下主线程似乎没有打印额外的连接之一（例如，2 个从属与 6 个并发请求）。

线程局部数据定义如下：

```
#define PENDING_CONNS 35
typedef struct _ThreadData {
    pthread_t m_Thread;
    pthread_mutex_t m_Mutex;
    char* m_Task;
    int m_ClientFD;
    unsigned int m_Index;
    unsigned short int m_Networking;
    char* m_OutputDir;
} ThreadData;
static ThreadData *g_Workers = NULL;
static unsigned int g_NumWorkers = 0;
static pthread_barrier_t g_StartBarrier; 
```

然后是主线程部分：

```
/*
 * Executed by the coordinating thread. Awaits and passes new client connections to free working threads.
 */
int RunServer(char* port) {
    // Listen on sock_fd, new connection on new_fd.
    int sockfd, new_fd;
    struct addrinfo hints, *servinfo, *p;

    // Connector's address information.
    struct timeval timeout;
    struct sockaddr_storage their_addr;
    socklen_t sin_size;

    //  struct sigaction sa; //TODO: possible signal handling later.
    int yes = 1;
    char s[INET6_ADDRSTRLEN];
    int rv;

    memset(&hints, 0, sizeof hints);
    hints.ai_family = AF_UNSPEC;
    hints.ai_socktype = SOCK_STREAM;
    hints.ai_flags = AI_PASSIVE; // use my IP

    if ((rv = getaddrinfo(NULL, port, &hints, &servinfo)) != 0) {
        fprintf(stderr, "> Server: getaddrinfo: %s\n", gai_strerror(rv));
        return -1;
    }

    // Loop through all the results and bind to the first we can
    for (p = servinfo; p != NULL; p = p->ai_next) {
        if ((sockfd = socket(p->ai_family, p->ai_socktype, p->ai_protocol)) == -1) {
            perror("> Server: socket");
            continue;
        }

        if (setsockopt(sockfd, SOL_SOCKET, SO_REUSEADDR, &yes, sizeof(int)) == -1) {
            perror("> Server: setsockopt");
            return -1;
        }

        if (bind(sockfd, p->ai_addr, p->ai_addrlen) == -1) {
            close(sockfd);
            perror("> Server: bind");
            continue;
        }
        break;
    }

    if (p == NULL) {
        fprintf(stderr, "> Server: failed to bind\n");
        return -1;
    }

    // All done with this structure.
    freeaddrinfo(servinfo);
    //PENDING_CONNS defined as 25
    if (listen(sockfd, PENDING_CONNS) == -1) {
        perror("> Server: listen");
        return -1;
    }

    printf("> Server: waiting for connections...\n");

    fd_set_blocking(sockfd, 0); // NON BLOCKING
    int requestStack[1000];
    int stackTop = 0;

    // Main loop of coordinating thread.
    while (1) {
        sin_size = sizeof their_addr;
        new_fd = accept(sockfd, (struct sockaddr *) &their_addr, &sin_size);
        if (new_fd == -1) {
            //queue was probably empty...
        }
        else {
            inet_ntop(their_addr.ss_family,
                GetInAddress((struct sockaddr *) &their_addr), s, sizeof s);
            printf("> Server: got connection from %s\n", s);

            requestStack[stackTop++] = new_fd;
            printf("> Server: stack top is now %i with value %i.\n", stackTop, requestStack[stackTop-1]);
        }

        // MAGICAL TEST: continue;

        // Linear search for a free worker thread...
        unsigned int i;
        int rc;
        for (i = 0; i < g_NumWorkers && stackTop > 0; i++) {
            rc = pthread_mutex_trylock(&(g_Workers[i].m_Mutex));
            if (rc == EBUSY)  // If it was already locked, skip worker thread.
                continue;
            else if (!rc) { // If we managed to lock the thread's mutex...
                if (g_Workers[i].m_ClientFD == -1) { // Check if it is currently out of work.
                    g_Workers[i].m_ClientFD = requestStack[--stackTop];
                    printf("> Server: master thread assigned fd %i to thread %u\n", requestStack[stackTop], i);
                }
                rc = pthread_mutex_unlock(&(g_Workers[i].m_Mutex));
                if (rc) {
                    printf("> Server: main thread mutex unlock failed on thread %i with error %i!\n", i, rc);
                    return -1;
                }
            }
            else
                printf("> Server: main thread try-lock failed on thread %i with error %i!\n", i, rc);
        }
    }
    return 0;
} 
```

对于代码的冗长以及可能错过手册页中的任何基本信息，我深表歉意。

根据要求，这里是从线程函数：

```
static void *WorkRoutine(void *args) {
    ThreadData * const threadData = (ThreadData*) args;
    pthread_mutex_t * const tMutex = &(threadData->m_Mutex);
    const unsigned int tIndex = threadData->m_Index;
    int clientFD = threadData->m_ClientFD;

    // Each thread initializes its own mutex.
    int rc = pthread_mutex_init(tMutex, NULL);
    if (!rc)
        printf("> Slave %u: mutex %p initialization was sucessful!\n", tIndex, tMutex);
    if (rc && rc != PTHREAD_BARRIER_SERIAL_THREAD) {
        printf("> Slave %u: failed mutex initialization!\n", tIndex);
        perror("pthread_mutex_init");
        exit(-1); //TODO: implement graceful error exit.
    }

    // Synchronization point: all threads including the master thread wait for all slave mutexes to be initialized.
    rc = pthread_barrier_wait(&g_StartBarrier);
    if (rc && rc != PTHREAD_BARRIER_SERIAL_THREAD) {
        printf("> Slave %u: failed initial barrier synchronization!\n", tIndex);
        perror("pthread_barrier_wait");
        exit(-1); //TODO: implement graceful error exit.
    }

    while (1) { //TODO replace 1 with state var that is turned off when the master thread receives a request to shutdown server.
        rc = pthread_mutex_lock(tMutex);
        if (rc) {
            printf("> Slave %u: mutex lock returned an error: %i!\n", tIndex, rc);
            perror("pthread_mutex_lock()");
            continue;
        }
        clientFD = threadData->m_ClientFD;
        if (!threadData->m_Task && clientFD == -1) {
            rc = pthread_mutex_unlock(tMutex);
            int yieldStatus = sched_yield();
            if (yieldStatus) {
                printf("> Slave %u: error while attempting to yield!\n", tIndex);
                perror("sched_yield()\n");
            }
            continue;
            //printf("> Slave %u: yielding.\n", tIndex);
        }
        else if (!threadData->m_Task && clientFD != -1) {
            // Read client request.
            threadData->m_Task = (char*) calloc(FILE_BUFFER, sizeof(char)); //TODO: stop allocating buffer on every task.
            printf("> Slave %u going to read from %i into %p\n", tIndex, clientFD, threadData->m_Task);

            MessageHeader h;
            GetHeader(&h, clientFD);
            if (h.m_ID != BeginSession) {
                //protocol implementation error
                exit(-1);
            }
            printf("> Slave %u: expecting client command of length %i\n", tIndex, h.m_ContentSize);
            int n = GetContent((void*) threadData->m_Task, h.m_ContentSize * sizeof(char), clientFD);
            printf("> Slave %u: client of file descriptor %i sent [%s] at a total of %i bytes\n", tIndex, clientFD, threadData->m_Task, n);
            short int remoteOperation;

            int baseArgvSize = 10;
            char **argv = (char**) calloc(baseArgvSize, sizeof(char*)); //TODO: stop allocating table on every task.
            int argc = CmdToTable(threadData->m_Task, &argv, &baseArgvSize);

            int localLen = strlen("local");
            int remoteLen = strlen("remote");

            if(!strncmp(threadData->m_Task, "remote", remoteLen)) {
                remoteOperation = 1;
                g_Workers[tIndex].m_Networking = 1;

            }
            else if(!strncmp(threadData->m_Task, "local", localLen)) {
                remoteOperation = 0;
                g_Workers[tIndex].m_Networking = 0;
                g_Workers[tIndex].m_OutputDir = (char*) calloc(FILE_BUFFER, sizeof(char));

                MessageHeader hPath;
                GetHeader(&hPath, clientFD);
                if (hPath.m_ID != SendMessage) {
                    //protocol implementation error
                    exit(-1);
                }

                int cnt = GetContent((void*) g_Workers[tIndex].m_OutputDir, hPath.m_ContentSize * sizeof(char), clientFD);
                g_Workers[tIndex].m_OutputDir[hPath.m_ContentSize * sizeof(char)] = '/';
                printf("> Slave %u: received message with %i bytes.\n", tIndex, cnt);
                printf("> Slave %u: client output going to %s\n", tIndex, g_Workers[tIndex].m_OutputDir);
            }
            else {
                printf("> Slave %u: received bogus client command: %s\n", tIndex, threadData->m_Task);
                return NULL;
            }
            printf("> Slave %u: remote mode - %i.\n", tIndex, g_Workers[tIndex].m_Networking);
            // Debug print the table built from the client command.
            printf("> Slave %u: table has %i entries.\n", tIndex, argc);
            int i;
            for (i = 0; i < argc; i++) {
                printf("> Slave %u: argument %i is %s.\n", tIndex, i, argv[i]);
            }
            // Prepare the input files the client will send.
            char**filenames = (char**) calloc(argc, sizeof(char*));
            FILE**files = (FILE**) calloc(argc, sizeof(FILE*));
            unsigned int reqIDIndex = 0;
            unsigned int reqIDLen = strlen(argv[reqIDIndex]);

            if(!remoteOperation)
                continue;

            // Check which files need to be sent from the client.
            for (i = reqIDIndex + 1; i < argc; i++) {
                unsigned int argSize = strlen(argv[i]);
                if (strstr(argv[i], FILETYPE_SEPARATOR) != NULL
                        && strstr(argv[i], INDEX_FILETYPE) == NULL) {
                    // If the current argument has a file type and isn't an index type.
                    filenames[i] = calloc(reqIDLen + argSize + 2, sizeof(char)); // +2 to account for terminator char and hyphen between reqID and filename

                    printf("> Slave %u: arg %s check with req %s\n", tIndex, argv[i], argv[reqIDIndex]);
                    int noReqYet = strncmp(argv[i], argv[reqIDIndex], reqIDLen);
                    if (noReqYet) {
                        printf("> Slave %u: no prepended request yet!\n", tIndex);
                        strncpy(filenames[i], argv[reqIDIndex], reqIDLen);
                        filenames[i][reqIDLen] = '-';
                    }
                    // If the argument is a path to a file, get the filename and discard the path (that was local to the client).
                    char*nameStart = strrchr(argv[i], '/'); //TODO: make a define for 92: backslash ascii char number
                    printf("> Slave %u: going to remove backslash from %s\n", tIndex, argv[i]);

                    if (nameStart != NULL )
                        nameStart++;
                    else
                        nameStart = argv[i];

                    printf("> Slave %u: got %s after removing backslash\n", tIndex, nameStart);
                    printf("noReqYet: %i\n", noReqYet);
                    if (!noReqYet)
                        strncpy(filenames[i], nameStart, strlen(nameStart));
                    else
                        strncpy(filenames[i] + reqIDLen + 1, nameStart,
                                strlen(nameStart)); //+1 to account for the hyphen.
                    // When freeing the argv table, only need to free(argv). There is no need to free argv[i] elements.
                    argv[i] = filenames[i];
                }
                else if (strstr(argv[i], FILETYPE_SEPARATOR) != NULL && strstr(argv[i], INDEX_FILETYPE) != NULL ) {
                    // If the current argument is the index type.
                    char*nameStart = strrchr(argv[i], '/');
                    if (nameStart != NULL ) {
                        nameStart++;
                        argv[i] = nameStart;
                    }
                }
            }

            // Debug print the needed files.
            printf("> Slave %u: awaiting files:", tIndex);
            for (i = 0; i < argc; i++) {
                if (filenames[i] != NULL ) {
                    printf(" %s", filenames[i]);
                }
            }
            printf("\n");

            // Await each input file from the client.
            for (i = 0; i < argc; i++) {
                if (filenames[i] != NULL ) {
                    files[i] = GetFile(clientFD, filenames[i]); // Note: GetFile invokes fclose!
                    if (files[i])
                        printf("> Slave %u: locally stored file %s\n", tIndex, filenames[i]);
                }
            }
        }
        printf("> Slave %u: going to invoke SatisfyRequest with arguments: ", tIndex);
        for (i = reqIDIndex; i < argc; i++) {
            if (argv[i] != NULL )
                printf("%s ", argv[i]);
        }
        printf("\n");

        // Process the request against the index.
        int res = SatisfyRequest(argc, argv, tIndex, clientFD);

        char* dummy;
        if (!res)
            dummy = "Your request succeeded.";
        else
            dummy = "Sorry, there was an error.";

        // Terminate session with the client.
        SendMsg(EndSession, (void*)dummy, strlen(dummy), clientFD);
        printf("> Slave %u: task result delivered to client of file descriptor %i.\n", tIndex, clientFD);
        close(clientFD);
        free(threadData->m_Task);
        free(argv);
        if(!remoteOperation) {
            free(g_Workers[tIndex].m_OutputDir);
        }
        // Free received file names and file pointer array.
        for (i = 0; i < argc; i++) {
            if (filenames[i])
                free(filenames[i]);
        }
        free(filenames);
        free(files);

        // Reset thread-local data.
        threadData->m_Task = NULL;
        threadData->m_ClientFD = -1;
        clientFD = -1;

        printf("> Slave %u: task finished.\n", tIndex);
        rc = pthread_mutex_unlock(tMutex);
        if(!rc)
            continue;
    }
    if (rc) {
        printf("> Slave %u: mutex unlock returned an error: %i!\n", tIndex, rc);
        perror("pthread_mutex_unlock()");
    }
    return NULL;
} 
```

这是代码的客户端部分：

```
char*cmdBuffer = (char*)calloc(FILE_BUFFER, sizeof(char));
char*cmdRealPath = (char*)calloc(FILE_BUFFER, sizeof(char));
int auxNameTableSz = 25;
char**auxNameTable = (char**)calloc(auxNameTableSz, sizeof(char*));

char* ip = argv[2];
char* port = argv[3];
char* networkMode = argv[4];
//  char* reqID = argv[5];
const int cmdStartIndex = 6;
short int remoteOperation;

if(!strcmp(networkMode, "remote")) {
    remoteOperation = 1;
    auxNameTableSz = 0;
}
else if(!strcmp(networkMode, "local")) {
    // If the client is on the server's machine, need to convert argument files to absolute paths.
    remoteOperation = 0;
    int i = cmdStartIndex;
    int j = 0;
    while(i < argc) {
        if(strrchr(argv[i], '/') || strrchr(argv[i], '.')) {
            argv[i] = realpath(argv[i], NULL);
            auxNameTable[j++] = argv[i];
        }
        i++;
    }
    auxNameTableSz = j;
}
else {
    printf("> Client: argument four must be either \"global\" or \"local\"!");
    free(cmdBuffer);
    free(cmdRealPath);
    FreePathsTable(&auxNameTable, auxNameTableSz);
    DeallocateGlobals();
    return 0;
}

// Concatenate client arguments into a single string.
MakeCommand(argc, argv, cmdBuffer);
printf("> Client: [Command]: %s\n", cmdBuffer);

// Establish a (TCP) connection with the server.
if(PrepareConnection(ip, port)) {
    // Failed to prepare connection.
    free(cmdBuffer);
    free(cmdRealPath);
    FreePathsTable(&auxNameTable, auxNameTableSz);
  DeallocateGlobals();
    return 0;
}
if(ConnectToServer()) {
    // Failed to establish a stream socket connection.
    free(cmdBuffer);
    free(cmdRealPath);
    FreePathsTable(&auxNameTable, auxNameTableSz);
    DeallocateGlobals();
    return 0;
}

// Send the client command to the server.
printf("> Client: sending command of %i bytes to server: [%s].\n", (int)strlen(cmdBuffer), cmdBuffer);
int count=0;
if((count=WriteToServer(BeginSession, cmdBuffer)) == -1) {
    // Command send failed.
    free(cmdBuffer);
    free(cmdRealPath);
    FreePathsTable(&auxNameTable, auxNameTableSz);
    DeallocateGlobals();
    return 0;
}
printf("> Client sent command to the server at %i bytes.\n", count);
if(remoteOperation) {
        // Send the correct input files to the server.
        SendInputFiles(argc, argv, cmdStartIndex);
}
else {
    // Send the real path of the client's working directory to the server.
    char *localDir = realpath(".", NULL);
    count=WriteToServer(SendMessage, localDir);
printf("> Client sent the real path to the server at %i bytes.\n", count);
    free(localDir);
}

// Await reply from the server.
char *buffer = (char*) calloc(FILE_BUFFER, sizeof(char));
count = ReceiveFromServer(buffer);

char *backPtr = buffer;

if(remoteOperation) {
    printf("> Client: got output list [%s] totalling %i bytes.\n", buffer, count);
    // Receive the files produced by the server if the client and server are not on the same machine.
    ReceiveOutputFiles(buffer);

    // Await session termination.
        buffer = backPtr;
        memset(buffer, 0, sizeof(char)*FILE_BUFFER);
        count = ReceiveFromServer(buffer);

}
else {

}

printf("> Client: server response: [%s]-[%s]\n", buffer, cmdBuffer); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-25T00:15:37.633

发布这个答案已经过期了，但就是这样。

在函数中使用局部`clientFD`变量`WorkRoutine`会干扰线程同步的逻辑......我暂时使用该变量是为了便于阅读，但我忽略了它可能会干扰线程的正确操作的事实。我将其替换为直接使用线程结构 FD 变量，现在它正在工作 ( `threadData->m_ClientFD`)。

我在下面展示最终代码：

```
static void *WorkRoutine(void *args) {
// Easier access of thread-local data.
ThreadData * const threadData = (ThreadData*) args;
pthread_mutex_t * const tMutex = &(threadData->m_Mutex);
const unsigned int tIndex = threadData->m_Index;

threadData->m_StatIndex = 0;
threadData->m_StatCount = BASE_TASK_COUNT;
threadData->m_OutputDir = NULL;
threadData->errorFileName = (char*) calloc(FILE_BUFFER, sizeof(char));

char *logName = (char*) calloc(FILE_BUFFER, sizeof(char));
const char *baseName = "./log-t";
size_t baseNameSize = strlen(baseName);
memcpy(logName, baseName, baseNameSize);
sprintf(logName + baseNameSize, "%u", threadData->m_Index);
threadData->m_Log = stdout;
#if defined LOGGING
threadData->m_Log = fopen(logName, "w");
#endif

fprintf(threadData->m_Log, "> Slave %u: log file %s at pointer %p.\n", tIndex, logName, threadData->m_Log);

// Each thread initializes its own mutex.
int rc = pthread_mutex_init(tMutex, NULL);
if (!rc)
    fprintf(threadData->m_Log, "> Slave %u: mutex %p initialization was successful!\n", tIndex, tMutex);
if (rc != 0 && rc != PTHREAD_BARRIER_SERIAL_THREAD) {
    fprintf(threadData->m_Log, "> Slave %u: failed mutex initialization!\n", tIndex);
    perror("pthread_mutex_init");
    exit(-1);
}

// Each thread will also need to find out its own clock id.
int clkStatus = pthread_getcpuclockid(threadData->m_Thread, &(threadData->m_CID));
if (clkStatus != 0)
    handle_error_en(clkStatus, "pthread_getcpuclockid");

// Synchronization point: all threads including the master thread wait for all slave mutexes to be initialized.
rc = pthread_barrier_wait(&g_StartBarrier);
if (rc != 0 && rc != PTHREAD_BARRIER_SERIAL_THREAD) {
    fprintf(threadData->m_Log, "> Slave %u: failed initial barrier synchronization!\n", tIndex);
    perror("pthread_barrier_wait");
    exit(-1); 
}

while (1) { 
    threadData->m_OutputDir = NULL;

    // Check if server was ordered to shutdown.
    rc = pthread_mutex_lock(&g_ShutdownLock);
    if(!rc) {
        if(g_ShutdownOrdered) {
            pthread_mutex_unlock(&g_ShutdownLock);
            break;
        }
        else {
            pthread_mutex_unlock(&g_ShutdownLock);
        }
    }
    else {
        fprintf(threadData->m_Log, "> Slave %u: failed on mutex lock of shutdown lock: %i\n", tIndex, rc);
        perror("slave: pthread_mutex_lock");
    }

    rc = pthread_mutex_lock(tMutex);
    if (!rc) {
        if (!threadData->m_Task && threadData->m_ClientFD == -1) {
            rc = pthread_mutex_unlock(tMutex);
            int yieldStatus = sched_yield();
            if (yieldStatus) {
                fprintf(threadData->m_Log, "> Slave %u: error while attempting to yield!\n", tIndex);
                perror("sched_yield()\n");
            }
            continue;
            //printf("> Slave %u: yielding.\n", tIndex);
        }
        else if (!threadData->m_Task && threadData->m_ClientFD != -1) {
            // Read client request.
            threadData->m_Task = (char*) calloc(FILE_BUFFER, sizeof(char)); 
            memset(threadData->m_Task, 0, FILE_BUFFER * sizeof(char));
            fprintf(threadData->m_Log, "> Slave %u: going to read from %i into %p\n", tIndex, threadData->m_ClientFD, threadData->m_Task);

            MessageHeader h;
            GetHeader(&h, threadData->m_ClientFD);

            // In case we received an order to kill the server.
            if(h.m_ID == CloseServer) {
                fprintf(threadData->m_Log, "> Slave %u: got order to close server!\n", tIndex);
                rc = pthread_mutex_lock(&g_ShutdownLock);
                if(!rc) {
                    g_ShutdownOrdered = 1;
                    free(threadData->m_Task);
                    pthread_mutex_unlock(&g_ShutdownLock);
                    // Reset thread-local data.
                    threadData->m_Task = NULL;
                    close(threadData->m_ClientFD);
                    threadData->m_ClientFD = -1;
                    break;
                }
                else {
                    fprintf(threadData->m_Log, "> Slave %u: failed locking of shutdown lock: %i", tIndex, rc);
                    perror("pthread_mutex_lock");
                }
            }

            if (h.m_ID != BeginSession) {
                //protocol implementation error
                exit(-1);
            }

            clock_gettime(threadData->m_CID, &(threadData->m_PrevTime));
            fprintf(threadData->m_Log, "> Slave %u: expecting client command of length %i\n", tIndex, h.m_ContentSize);
            int n = GetContent((void*) threadData->m_Task, h.m_ContentSize * sizeof(char), threadData->m_ClientFD);
            fprintf(threadData->m_Log, "> Slave %u: client of file descriptor %i sent [%s] at a total of %i bytes\n", tIndex, threadData->m_ClientFD, threadData->m_Task, n);

            int baseArgvSize = 10;
            char **argv = (char**) calloc(baseArgvSize, sizeof(char*)); 
            int argc = CmdToTable(threadData->m_Task, &argv, &baseArgvSize, threadData->m_Log);

            int localLen = strlen("local");
            int remoteLen = strlen("remote");

            if(!strncmp(threadData->m_Task, "remote", remoteLen)) {
                g_Workers[tIndex].m_Networking = 1;
            }
            else if(!strncmp(threadData->m_Task, "local", localLen)) {
                g_Workers[tIndex].m_Networking = 0;
                g_Workers[tIndex].m_OutputDir = (char*) calloc(FILE_BUFFER, sizeof(char));

                MessageHeader hPath;
                GetHeader(&hPath, threadData->m_ClientFD);
                if (hPath.m_ID != SendMessage) {
                    //protocol implementation error
                    exit(-1);
                }

                int cnt = GetContent((void*) threadData->m_OutputDir, hPath.m_ContentSize * sizeof(char), threadData->m_ClientFD);
                printf("> Slave %u: I RECEIVED %s AS OUTPUT DIRECTORY!\n\n\n\n\n", tIndex, threadData->m_OutputDir);
                threadData->m_OutputDir[hPath.m_ContentSize * sizeof(char)] = '/';

                fprintf(threadData->m_Log, "> Slave %u: received output directory message with %i bytes.\n", tIndex, cnt);
                fprintf(threadData->m_Log, "> Slave %u: client output going to %s\n", tIndex, threadData->m_OutputDir);
            }
            else {
                fprintf(threadData->m_Log, "> Slave %u: received bogus client command: %s\n", tIndex, threadData->m_Task);
                return NULL;
            }
            fprintf(threadData->m_Log, "> Slave %u: remote mode - %i.\n", tIndex, g_Workers[tIndex].m_Networking);
            // Debug print the table built from the client command.
            fprintf(threadData->m_Log, "> Slave %u: table has %i entries.\n", tIndex, argc);
            int i;
            for (i = 0; i < argc; i++) {
                fprintf(threadData->m_Log, "> Slave %u: argument %i is %s.\n", tIndex, i, argv[i]);
            }
            // Prepare the input files the client will send.
            char**filenames = (char**) calloc(argc, sizeof(char*));
            FILE**files = (FILE**) calloc(argc, sizeof(FILE*));
            unsigned int reqIDIndex = 0;
            unsigned int reqIDLen = strlen(argv[reqIDIndex]);
            threadData->m_REQ = argv[reqIDIndex];
            if(threadData->m_Networking) {
                // Check which files need to be sent from the client.
                for (i = reqIDIndex + 1; i < argc; i++) {
                    unsigned int argSize = strlen(argv[i]);
                    if (strstr(argv[i], FILETYPE_SEPARATOR) != NULL
                            && strstr(argv[i], INDEX_FILETYPE) == NULL) {
                        // If the current argument has a file type and isn't an index type.
                        filenames[i] = calloc(reqIDLen + argSize + 2, sizeof(char)); // +2 to account for terminator char and hyphen between reqID and filename

                        fprintf(threadData->m_Log, "> Slave %u: arg %s check with req %s\n", tIndex, argv[i], argv[reqIDIndex]);
                        int noReqYet = strncmp(argv[i], argv[reqIDIndex], reqIDLen);
                        if (noReqYet) {
                            fprintf(threadData->m_Log, "> Slave %u: no prepended request yet!\n", tIndex);
                            strncpy(filenames[i], argv[reqIDIndex], reqIDLen);
                            filenames[i][reqIDLen] = '-';
                        }
                        // If the argument is a path to a file, get the filename and discard the path (that was local to the client).
                        char*nameStart = strrchr(argv[i], '/'); 
                        fprintf(threadData->m_Log, "> Slave %u: going to remove backslash from %s\n", tIndex, argv[i]);

                        if (nameStart != NULL )
                            nameStart++;
                        else
                            nameStart = argv[i];

                        fprintf(threadData->m_Log, "> Slave %u: got %s after removing backslash\n", tIndex, nameStart);
                        fprintf(threadData->m_Log, "noReqYet: %i\n", noReqYet);
                        if (!noReqYet)
                            strncpy(filenames[i], nameStart, strlen(nameStart));
                        else
                            strncpy(filenames[i] + reqIDLen + 1, nameStart,
                                    strlen(nameStart)); //+1 to account for the hyphen.
                        // When freeing the argv table, only need to free(argv). There is no need to free argv[i] elements.
                        argv[i] = filenames[i];
                    } else if (strstr(argv[i], FILETYPE_SEPARATOR) != NULL
                            && strstr(argv[i], INDEX_FILETYPE) != NULL ) {
                        // If the current argument is the index type.
                        char*nameStart = strrchr(argv[i], '/');
                        if (nameStart != NULL ) {
                            nameStart++;
                            argv[i] = nameStart;
                        }
                    }
                }

                // Debug print the needed files.
                fprintf(threadData->m_Log, "> Slave %u: awaiting files:", tIndex);
                for (i = 0; i < argc; i++) {
                    if (filenames[i] != NULL ) {
                        fprintf(threadData->m_Log, " %s", filenames[i]);
                    }
                }
                fprintf(threadData->m_Log, "\n");

                // Await each input file from the client.
                for (i = 0; i < argc; i++) {
                    if (filenames[i] != NULL ) {
                        files[i] = GetFile(threadData->m_ClientFD, filenames[i]); // Note: GetFile invokes fclose!
                        if (files[i])
                            fprintf(threadData->m_Log, "> Slave %u: locally stored file %s\n", tIndex, filenames[i]);
                    }
                }
            }
            fprintf(threadData->m_Log, "> Slave %u: going to invoke SatisfyRequest with arguments: ", tIndex);
            for (i = reqIDIndex; i < argc; i++) {
                if (argv[i] != NULL )
                    fprintf(threadData->m_Log, "%s ", argv[i]);
            }
            fprintf(threadData->m_Log, "\n");

            // Process the request against the index.
            int res = SatisfyRequest(argc, argv, tIndex, threadData->m_ClientFD);
            char success = 0;
            if(!res)
                success = 1;

            // Terminate session with the client.
            SendMsg(EndSession, (void*)&success, sizeof(success), threadData->m_ClientFD);
            fprintf(threadData->m_Log, "> Slave %u: task result delivered to client of file descriptor %i.\n", tIndex, threadData->m_ClientFD);
            close(threadData->m_ClientFD);

            free(argv);
            threadData->m_REQ = NULL;
            if(!threadData->m_Networking) {
                free(threadData->m_OutputDir);
                threadData->m_OutputDir = NULL;
            }

            // Free received file names and file pointer array.
            for (i = 0; i < argc; i++) {
                if (filenames[i]) {
                    free(filenames[i]);
                    filenames[i] = NULL;
                }
            }
            free(filenames);
            free(files);
            filenames = NULL;
            files = NULL;
            // Print out the time it took for the task.
            struct timespec tempTime;
            clock_gettime(threadData->m_CID, &tempTime);

            struct timespec timeDelta;
            timeDelta.tv_nsec = tempTime.tv_nsec - threadData->m_PrevTime.tv_nsec;
            timeDelta.tv_sec = tempTime.tv_sec - threadData->m_PrevTime.tv_sec;

            if(timeDelta.tv_nsec < 0)
                timeDelta.tv_nsec *= -1;
            if(timeDelta.tv_sec < 0)
                timeDelta.tv_sec *= -1;

            RegisterStat(tIndex, threadData->m_StatIndex++, timeDelta, threadData->m_Task);

            fprintf(threadData->m_Log, "Slave %u: %4ld.%03ld\n", tIndex, timeDelta.tv_sec,timeDelta.tv_nsec / 1000000);
            memcpy(&(threadData->m_PrevTime), &tempTime, sizeof(struct timespec));

            // Reset thread-local data.
            memset(threadData->m_Task, 0, FILE_BUFFER * sizeof(char));
            free(threadData->m_Task);
            threadData->m_Task = NULL;
            threadData->m_ClientFD = -1;
            fprintf(threadData->m_Log, "> Slave %u: task finished.\n", tIndex);
            rc = pthread_mutex_unlock(tMutex);
        }
        if (rc) {
            fprintf(threadData->m_Log, "> Slave %u: mutex unlock returned an error: %i!\n", tIndex, rc);
            perror("pthread_mutex_unlock()");
        }
    } else {
        fprintf(threadData->m_Log, "> Slave %u: mutex lock returned an error: %i!\n", tIndex, rc);
        perror("pthread_mutex_lock()");
    }
}
free(threadData->errorFileName);
threadData->errorFileName = NULL;
free(logName);
logName = NULL;
fprintf(threadData->m_Log, "> Slave %u: exiting...\n", tIndex);

#if defined LOGGING
    fclose(threadData->m_Log);
#endif
threadData->m_Log = NULL;

return 0;
} 
```**

# ruby - 通过位操作将整数分解为整数数组

> ID：12654355
> 
> 赞同：1
> 
> 时间：2012-09-29T16:25:13.893
> 
> 标签：ruby, integer, bit-manipulation

我想写一个方法，它接受一个整数和一个位长度，并返回一个与位相对应的整数数组。

例如：

```
decompose(100, 4)
#=> [4, 12]

because:

100 is 01001100 in binary
        /   \
      0100  1100
       4      12

decompose(123456, 6)
#=> [1, 8, 60, 0]

because:

123456 is 000001001000111100000000 in binary
           /       |     |      \
          1        8     60      0 
```

注意：我不需要担心不是精确除数的位长度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T16:52:11.490

```
def decompose n, l, a = []
  n, r = n.divmod(2 ** l)
  a.unshift(r)
  n.zero? ? a : decompose(n, l, a)
end

decompose(100, 4) # => [6, 4]
decompose(123456, 6) # => [30, 9, 0] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T16:46:10.343

这个怎么样？

```
def decompose(num, len)
  num.to_s(2).chars.each_slice(len).map { |x| x.join.to_i(2) }.reverse
end

decompose(100, 4)
#=> [4, 12] 
```

或这个：

```
def decompose(num, len)
  num.to_s(2).scan(/.{1,len}/).map { |x| x.to_i(2) }.reverse
end 
```

# google-app-engine - 使用 GAE 安排 GET 请求

> ID：12654358
> 
> 赞同：1
> 
> 时间：2012-09-29T16:25:37.687
> 
> 标签：google-app-engine

我一直在研究使用 GAE 应用程序安排 GET 请求的方法。具体来说，我希望我的应用程序在被请求 1 小时后通过获取指向另一个应用程序 API 的不同 URL 来响应。

延迟任务是处理这个问题的方法吗？

我还发现 Tasks 有一个“eta”参数来指定最早的执行时间。这可以比“_countdown”更受欢迎吗？

或者调查 Cron 工作？这些 GET 请求不会定期发生，所以我不知道 Cron 作业是否合适。

谢谢！如有必要，请帮助我澄清。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T16:32:43.757

是的，这是一个很好的方法，你所要做的就是`_countdown`在你的延迟调用中设置，这是你想要等待多少秒，直到这个任务将被执行。

[来自文档](https://developers.google.com/appengine/articles/deferred)的示例：

```
deferred.defer(do_something_expensive, _countdown=3600, _queue="myqueue") 
```

或者您可以简单地使用[任务 API](https://developers.google.com/appengine/docs/python/taskqueue/tasks)，您可以在其中设置所有不同的参数，以了解您希望何时以及如何准确地执行此任务。无论哪种方式最适合您，您都可以使用`eta`或`countdown`，从 GAE 的角度来看，它是完全一样的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-30T00:30:11.333

只要您不想达到秒精度（比如分钟精度）。我会将请求添加到实现请求队列的数据存储中。然后每分钟运行一次 cron 作业，查找为该时间段安排的请求。然后我会提交一个任务来执行请求。为任务命名，这样您就不太可能重新提交相同的任务。该任务可以重试几次（如果出错），然后您可以在队列中将请求标记为已完成。

这样您就可以处理任意数量的预定请求。您最终不会完成数千个任务。您可以知道请求是否会运行，它们何时运行等......

# html - XForms 中有类似“target = parent”的东西吗？

> ID：12654359
> 
> 赞同：0
> 
> 时间：2012-09-29T16:25:38.690
> 
> 标签：html, xforms

就像在标题中一样，我正在寻找用 XForms 替换 HTML 的“target = parent”的解决方案。我有带有 XForms 的 iframe，我需要与父页面通信。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T17:32:20.967

XForms 规范还没有包括这个。但是，类似地，在 XSLTForms 中，作为扩展，可以访问“opener”表单中的实例。

您需要沟通还是要替换所有父级？

-阿兰

# html - 从父文件夹打开文件

> ID：12654360
> 
> 赞同：1
> 
> 时间：2012-09-29T16:25:58.307
> 
> 标签：html, file, hyperlink

是否可以从父文件夹打开文件？

假设我有这个文件树

```
parent
    other
        file.pdf
    website
        index.html 
```

我想使用`a`标签从索引中打开file.pdf，我该怎么做？可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T16:27:10.417

使用“特殊指令”`..`来“向上”遍历目录级别：

```
<a href="../other/file.pdf">file.pdf</a> 
```

它可以重复多次以继续向上遍历文件夹层次结构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T16:27:21.937

使用双点向上一级：

```
<a href="../other/file.pdf">file.pdf</a> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T16:28:37.593

是的，您只需在 href 中给出完整路径

```
<a href="../other/file.pdf">link</a> 
```

# jquery - 如何将 childBrowser 用于 phonegap 应用程序

> ID：12654363
> 
> 赞同：1
> 
> 时间：2012-09-29T16:26:33.550
> 
> 标签：jquery, css, cordova, iframe, childbrowser

我需要在我的 phonegap 应用程序中显示一个网页，并能够应用一个新的 css 文件来覆盖显示 - 或者也许有不同的方法可以在没有 css 的情况下做到这一点？

我知道这必须是可能的，因为如果我用 mozilla 在我的桌面上打开网页，我可以使用 firebug 调整 css 以获得我想要的外观。我不能使用 iframe，因为我需要做的唯一改变就是尺寸。我需要将其缩小一点，因为我不想在移动应用程序中滚动。这是我觉得这仍然可能不起作用的代码，因为我认为我应该启用 Flash（我试图加载的页面是实时流）但我想先看看这些更改做了什么

索引.html：

```
<!DOCTYPE html>
<html>
<head>
<title>Hello Phonegap</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no;" />
    <meta charset="utf-8">

    <script type="text/javascript" charset="utf-8" src="phonegap.js"></script>
    <script src="jquery-mobile/jquery-1.6.4.min.js" type="text/javascript"></script>
    <script src="jquery-mobile/jquery.mobile-1.0.min.js" type="text/javascript"></script>
    <link rel="stylesheet" href="theme.css" />
    <link rel="stylesheet" href="theme.min.css" />
    <script type="text/javascript" charset="utf-8" src="childbrowser.js"></script>
    <script type="text/javascript">

   function onBodyLoad()
    {       
        document.addEventListener("deviceready", onDeviceReady, false);
    }

    function onDeviceReady()
    {
        // do your thing!
        navigator.notification.alert("Phonegap is ready")
    }

    </script>
<link href="jquery-mobile/jquery.mobile.structure-1.0.min.css" rel="stylesheet" type="text/css">
</head>
<body onload="onBodyLoad()">
    <!-- Home -->
<div data-role="page" id="page1">
        <div data-role="content">
          <ul class="ui-btn-up-a" data-role="listview" data-theme="a">
            <li><a href="#">Page</a></li>
            <li><a href="#">Page</a></li>
            <li><a href="#">Page</a></li>
            <li class="ui-bar-a"><a href="#" onClick= "window.plugins.childBrowser.showWebPage('http://www.google.com');">child</a></li>
          </ul>

        </div>

    </div>
  </div> 
```

配置文件

```
<?xml version="1.0" encoding="UTF-8" ?>
<widget xmlns = "http://www.w3.org/ns/widgets"
xmlns:gap = "http://phonegap.com/ns/1.0"
id        = "com.phonegap.example"
version   = "1.0.0">

<name>PhoneGap Build Application</name>

<description>
A simple PhoneGap Build application.
</description>

<author href="https://example.com" email="you@example.com">
Your Name
</author>
<gap:plugin name="ChildBrowser" />
<access origin="*" />

</widget> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T20:40:49.807

要添加一个新的 css 文件，请使用以下命令：

```
var obj=document.createElement("link");
obj.setAttribute("rel", "stylesheet")
obj.setAttribute("type", "text/css")
obj.setAttribute("href", your_css_file)
obj.setAttribute("id", id_to_remove_it_later);
document.getElementsByTagName("head")[0].appendChild(obj); 
```

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-16T09:07:03.150

在你 res/config.xml

您必须添加新功能

`<feature name="ChildBrowser" > <plugin name="ChildBrowser" value="com.phonegap.plugins.childBrowser.ChildBrowser"/> </feature>`

并删除`<gap:plugin name="ChildBrowser" />`

* * *

您可以在此代码中进行测试（HTML）

```
<div onclick='window.plugins.childBrowser.showWebPage("http://cran.r-project.org/doc/manuals/R-intro.pdf",
{ showLocationBar: true, showNavigationBar: true, showAddress: true});'><b>test222</b></div>   

<div onclick='window.plugins.childBrowser.showWebPage("http://cran.r-project.org/doc/manuals/R-intro.pdf",
{ showLocationBar: true, showNavigationBar: true, showAddress: false});'><b>test222</b></div>   

<div onclick='window.plugins.childBrowser.showWebPage("http://cran.r-project.org/doc/manuals/R-intro.pdf",
{ showLocationBar: true, showNavigationBar: false, showAddress: true});'><b>test222</b></div>   

<div onclick='window.plugins.childBrowser.showWebPage("http://cran.r-project.org/doc/manuals/R-intro.pdf",
{ showLocationBar: true, showNavigationBar: false, showAddress: false});'><b>test222</b></div>   

<div onclick='window.plugins.childBrowser.showWebPage("http://cran.r-project.org/doc/manuals/R-intro.pdf",
{ showLocationBar: false, showNavigationBar: true, showAddress: false});'><b>test222</b></div> 
```

# jquery - JQuery Dialog加载数据与asp.net mvc中的加载效果

> ID：12654364
> 
> 赞同：0
> 
> 时间：2012-09-29T16:26:41.473
> 
> 标签：jquery, asp.net-mvc, jquery-ui

我正在研究 asp.net mvc。我正在尝试使用 JQuery 对话框显示一个弹出窗口。我已经用我的动作加载了对话框，例如，

```
$('#dialog').dialog({
                autoOpen: false,
                modal: true,
                width: 520,
                height: 'auto',
                title: 'Edit Zip Code',
                position: 'center',
                show: { effect: 'fade', duration: 800 },
                open: function (event, ui) {
                    $(this).load("/GridAjax/CreateAlbumPartial?id=" + guid);
                },
                close: clear,
                buttons: {
                    "Update": function () {
                     ....
}
}); 
```

现在我的视图加载速度有点慢。所以乍一看它显示了以前的视图。所以我决定在加载数据之前添加一些加载效果。我尝试过在打开对话框时显示加载图像并在成功时隐藏加载图像，例如，

```
open: function(){
$('#loadingDiv').show();
}
.
.
.
success: function(){
$('#loadingDiv').hide();
} 
```

但这对我不起作用，而且它没有安顿在适当的位置。所以请指导我实现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T16:35:32.853

试试这个：

```
$('#dialog').dialog({
    //exisiting stuff
    open: function(event, ui) {
        $.ajax({
            url: "/GridAjax/CreateAlbumPartial?id=" + guid,
            success:function(data){
                $(this).html(data);
            },
            beforeSend:function(){
                $('#loadingDiv').show();
            },
            complete:function(){
                $('#loadingDiv').hide();
            }
        });
    }
}); 
```

希望这会有所帮助！

# .net - IEnumerable 的任何约定 报告不变性和其他特征？

> ID：12654367
> 
> 赞同：2
> 
> 时间：2012-09-29T16:27:02.170
> 
> 标签：.net, ienumerable, immutability

在许多情况下，代码将接收`IEnumerable<T>`并希望保留其中包含的项目序列。一种常见的方法是调用`ToList`它。但是，如果有问题的实现已经是一个不可变的列表，那么调用`ToList`它会很浪费。

如果我只是在我的代码中传递集合，我可以定义一个扩展方法，它将传递给（实现）`IEnumerable<T>`的构造函数，除非提供的对象已经实现（在这种情况下，它会简单地返回为 -是）。实现这样一个类并不难。不过，我担心的是，如果我自己实现了这样一个类，而其他需要这样一个类的人也都这样做了，那么每次在使用不同“不可变列表”类的人编写的代码之间传递一个对象时，它就会结束被防御性地复制（变成以前不可变副本的创建者不再认为不可变的形式）。`Supercat.ImmutableList<T>``Supercat.IImmutableList<out T>``Supercat.IImmutableList<T>`

因此，我很好奇：是否有任何方法可以实现接近犯罪质量的任何方法，以获取一系列项目的不可变快照，以便所有订阅该方法的对象都能够将彼此的快照识别为不可变清单？例如，如果许多人让他们的不可变类包含一个具有特定名称的函数，该名称不会用于任何其他目的，而是表示不变性，那么使代码与使用相同方法的其他人的代码有效地互操作将相当容易（使用静态泛型类和反射）。我可以想象很多可能的方法，但我不知道有任何接近临界质量的方法。我更喜欢可以从源代码构建的公共领域，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T23:06:10.337

如果“不可变”是指您不希望原始数据的消费者能够更改值，则可以使用`ReadOnlyCollection`. 但是，在这种情况下，底层列表仍然是可变的，因此消费者不能保证它不会在其他地方更改。

如果您正在寻找真正不可变的集合，最好的选择可能是使用为 F# 创建的集合。[看到这个答案。](https://stackoverflow.com/a/3485327/120955)

# matlab - 我可以从 Matlab 访问 QuantLib 库吗？

> ID：12654375
> 
> 赞同：0
> 
> 时间：2012-09-29T16:27:57.453
> 
> 标签：matlab, quantlib

是否可以从 Matlab 访问 quantlib 库？

这里的海报似乎是这样认为的（但线程很老了）

从 Matlab 与 Quantlib 对话的一种真正简单的方法是调用 Quantlib 的 java 包装器。Matlab 是用 Java 编写的，因此很容易从那里加载类并调用它们。

休

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T10:18:41.380

有一些关于 Matlab 模块的讨论，但它从未真正超越概念验证阶段（您可以在[http://old.nabble.com/MATLAB-Extension-td13769699.html](http://old.nabble.com/MATLAB-Extension-td13769699.html)阅读讨论）。

至于走 Java 路线，我无法真正发表评论，因为我不熟悉调用 Java 类的 Matlab 机制（也不熟悉 Matlab 本身）。假设可以这样做，仍然支持 QuantLib Java 包装器；它们不会导出库的所有功能（仅在 C++ 中可用），但应该是一个很好的起点。

# excel - 使用 Skydrive API 获取 Skydrive 中文档的文档嵌入 URL

> ID：12654377
> 
> 赞同：4
> 
> 时间：2012-09-29T16:28:11.477
> 
> 标签：excel, api, embed, token, onedrive

我在我的博客插件中自动嵌入文档。我可以将 excel 文件上传到 skydrive，但要嵌入文档，我应该在 Skydrive 中手动处理文件并获取嵌入 URL。通过 skydrive API 获取此嵌入 URL 的方法是什么？问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-23T08:48:17.387

Microsoft 似乎在此处记录了此功能：

[使用 Microsoft SkyDrive 文件夹和文件 -> 获取文件夹和文件的链接](http://msdn.microsoft.com/en-us/library/live/hh826531.aspx#file_links)

# ios - 如何在移动动画中途调整视图大小？

> ID：12654379
> 
> 赞同：1
> 
> 时间：2012-09-29T16:28:17.193
> 
> 标签：ios, core-animation

在子视图的滑动动画（向下，暂停，然后向上回到原始位置）期间，设备旋转，因此超级视图旋转。我想保持子视图的宽度与父视图相同，所以我需要在其滑动动画期间调整它的大小。

这是滑动动画代码：

```
[UIView animateWithDuration:0.3 animations:^{
    self.frame = finalFrame;
} completion:^(BOOL finished) {
    [UIView animateWithDuration:0.3 delay:3 options:0 animations:^{
        self.frame = initFrame;
    } completion:^(BOOL finished) {
        [self removeFromSuperview];
    }];
}]; 
```

这是我检测旋转时调用的方法：

```
- (void)rotate:(NSNotification *)notif {
    // What to do here to adjust the width but also keep the sliding animation going.
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T20:06:41.500

似乎没有可以在这里使用的自动调整大小的魔法。必须：

1.  记录动画的进度。
2.  在检测到旋转时，取消旧动画，调整视图大小，并从当前进度开始添加新动画。

这是一个示例项目供参考：[http](http://d.pr/f/M4UW) ://d.pr/f/M4UW 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T18:35:17.023

您可以为图层设置动画`bounds`以更改宽度。只需使高度相同并为边界应用动画即可。

如果您希望两个动画具有相同的持续时间、计时功能等，那么您可以将它们都添加到动画组中，然后将该组添加到您正在制作动画的图层中。

# visual-studio-2012 - Visual Studio 2012 Express for Desktop 有哪些安装程序选项

> ID：12654380
> 
> 赞同：12
> 
> 时间：2012-09-29T16:28:26.277
> 
> 标签：visual-studio-2012, windows-installer, visual-studio-express

因此微软发布了用于桌面应用程序的 Visual Studio 2012 Express。这很好，但是如何为在 Visual Studio Express 中构建的开源应用程序创建安装程序？默认情况下没有可用的安装程序模板，并且它们已禁用浏览在线图库。当然，我可以购买 InstallShield 之类的东西，但如果你问我，那将违背开源应用程序的目的。有什么建议么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-29T16:34:53.920

您可以使用开源[NSIS](http://nsis.sourceforge.net/Main_Page)或[WiX](http://wixtoolset.org/)工具来创建相当不错的安装程序。

由于两者都应该在没有 Express 不会为您提供的 Visual Studio 集成的情况下工作，所以它们都应该可以毫无问题地使用（即使不是很好）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-30T15:14:17.917

我会使用 Inno Setup，它比大多数其他设置程序更容易学习。我这里有一个链接：

[http://www.jrsoftware.org/ishelp/](http://www.jrsoftware.org/ishelp/)

# php - 如何使用php打印变量中的字符串特殊字符？

> ID：12654386
> 
> 赞同：1
> 
> 时间：2012-09-29T16:29:15.823
> 
> 标签：php, string, variables, special-characters

我正在制作这个聊天服务器，但效果不太好。当你发送一段文本时，它首先被函数编码，`base64_encode()`然后被发送到 MySQL 数据库。然后接收者从同一个 MySQL 数据库中获取文本，当然首先由函数解码`base64_decode()`。

唯一的问题是特殊字符`\n` `\'`和`\t`：当我从数据库中获取数据并在两个 textarea 标记之间打印时，我看到`\n`的是一个字符串，而不是实际的换行符。

简而言之，我需要解决这个问题：

```
$String = 'Line 1 \n Line 2';
print '<textarea>' . $String . '</textarea>';

//The result I want
//<textarea> Line 1
//Line 2 </textarea> 
```

该功能`nl2br`不起作用，因为 textarea 标签内的标签不起作用，还因为还有其他字符，如撇号。

有人可以帮助我吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T16:37:44.067

您需要将字符串括在双引号中，以便评估特殊字符。

```
$String = "Line 1 \n Line 2";
print '<textarea>' . $String . '</textarea>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T09:09:38.180

这也与 using 相同`" ... "`，但可能对您的情况有所帮助：

```
$string = <<<EOT
Line 1 \n Line 2
EOT;

echo '<textarea>' . $string . '</textarea>'; 
```

正如其他人所说，你的问题是`Single-Quotes`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T16:37:10.700

如果你改变这个：

```
$String = 'Line 1 \n Line 2';
print '<textarea>' . $String . '</textarea>'; 
```

对此：

```
$String = "Line 1 \n Line 2"; // double quote
print '<textarea>' . $String . '</textarea>'; 
```

...你会得到你想要的输出。

# string - 找到一种算法，将所有大写字母放在小写字母后面，相对顺序不会改变

> ID：12654390
> 
> 赞同：1
> 
> 时间：2012-09-29T16:30:17.083
> 
> 标签：string, algorithm

现在我有一个只包含大写和小写的字符串。我想将字符串更改为所有大写都在小写之后的形式，并且所有大写或小写的相对顺序不改变。

例如，字符串“aAbBcCDd”更改为“abcdABCD”。字符串“aaAAAbb”更改为“aabbAAA”。

如果我将字符串的长度定义为“N”，那么现在我有一个 O(NlogN) 的算法。但我想知道是否有一种算法花费的时间更短。当然，内存也是有限的。内存不依赖于长度是最棒的。

非常感谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T16:38:36.253

算法：

**输入**：混合大小写的字符串

**输出**：小写然后大写的字符串（相对顺序未更改）

```
Create two temporary Strings
String lower
String upper

loop over each character in your Input String

if char is upper
   append to upper
if char is lower
   append to lower

return concatenation of lower + upper 
```

# python - 如何将二进制文件读入python中的变量

> ID：12654391
> 
> 赞同：1
> 
> 时间：2012-09-29T16:30:37.703
> 
> 标签：python, binary

我正在处理来自大型模型的信息，这意味着我有很多带有两个浮点列的大型 ascii 文件（比如说 X 和 Y）。但是，每当我必须读取这些文件时，都需要很长时间，所以我想也许将它们转换为二进制文件会使读取过程更快。

我使用 uu.encode(ascii_file,binary_file) 命令将我的 asciifile 转换为二进制文件，并且效果很好（实际上，测试了解码部分，我恢复了相同的文件）。

我的问题是：有没有办法直接将二进制文件读入 python 并将数据放入两个变量（x 和 y）？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T16:45:09.877

您没有指定浮点列在 Python 中的表示方式。该`cPickle`模块是一个快速的通用解决方案，其缺点是它创建的文件只能从 Python 读取，并且永远不应允许它读取不受信任的数据（从网络接收）。它可能只适用于所有常规数据类型，包括 numpy 数组。

如果您可以使用 numpy 并将数据存储在 numpy 数组中，请查看`numpy.save`和`numpy.savetxt`以及相应的加载函数，它应该提供优于手动提取数据的性能。

`array.array`也有将数组数据写入文件的方法，缺点是数组数据是以本机格式写入的，无法从不同的架构中读取。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T16:37:20.873

查看 python 的[struct 模块](http://docs.python.org/library/struct.html?highlight=struct#struct)。这可能是您想要用于读取和写入数据的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T16:40:42.600

我建议不要使用建议的结构模块，如果您的模型只是浮点数/双精度（坐标），您应该看到[模块，必须比模块中](http://docs.python.org/library/array.html#module-array)[的`array`](http://docs.python.org/library/array.html#module-array)任何操作快得多`struct`。它的缺点是集合是同质的，您需要在奇数索引中具有第一个值，在偶数索引中具有第二个值，或者顺序。

# c++ - 初始化程序列表不适用于 Visual Studio 2012 中的向量？

> ID：12654394
> 
> 赞同：25
> 
> 时间：2012-09-29T16:31:23.383
> 
> 标签：c++, visual-c++, c++11, visual-studio-2012

> **可能重复：**
> [Visual Studio 2012 中的 C++11 功能](https://stackoverflow.com/questions/7421825/c11-features-in-visual-studio-2012)

[所以我今天通过Wikipedia](http://en.wikipedia.org/wiki/C++11#Initializer_lists)阅读了 C++11 初始化列表，发现 C++11 支持标准容器的以下语法：

```
std::vector<std::string> v = { "xyzzy", "plugh", "abracadabra" };
std::vector<std::string> v({ "xyzzy", "plugh", "abracadabra" });
std::vector<std::string> v{ "xyzzy", "plugh", "abracadabra" }; 
```

当我在 Visual Studio 2012 中尝试以下操作时，出现编译错误`C2552: 'vecs' : non-aggregates cannot be initialized with initializer list`

这是我的代码：

```
#include <vector>

using namespace std;

int main() {
    vector<string> vecs = {"h", "g", "e"};
} 
```

VS2012 不支持初始化列表还是我只是误解了什么？

谢谢！

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-09-29T16:32:18.613

Visual Studio 2012 不支持初始值设定项列表。

好吧，直到 2012 年 11 月的 CTP。现在它确实如此，至少处于 alpha 状态。当然，这段代码仍然无法在其中工作，因为他们仍在将初始化列表放入标准库本身。

# php - 将更多数组添加到现有的 php 关联数组中

> ID：12654397
> 
> 赞同：0
> 
> 时间：2012-09-29T16:31:53.140
> 
> 标签：php, arrays, merge, associative

默认情况下，`$arrDummy`其中已经有一些现有数据。

我想在现有的家庭中添加额外的家庭`$arrDummy`

通过调用`getnewfamily()`，我会将多个小值添加到同一个姓氏中，然后返回主函数并添加到`$arrDummy`.

我已经使用`array_merge`and `array_push`，在这里和那里进行了测试，但事情并没有按预期工作。

```
$arrDummy= array(

    "Family name aa" =>
                    array(
                     "123" => "some value",
                     "112223" => "some value",
                     ),

    "Family Jacky" =>
                    array(
                     "7856" => "some savalue",
                     "2354" => "some vcx",
                     )
);

$arrDummy= getnewfamily($arrDummy);

    echo "<pre>";
    print_r($arrDummy);
    echo "</pre>";

function getnewfamily($arrDummy)
{

    $familyname="my current family";

    if($condition1==true)
    {
        $arrTest1= array($familyname =>
                            array(
                             "123" => "some value"
                             )
                );

        array_push($arrDummy[$familyname], $arrTest1);

    }

    if($condition2==true)
    {

        $arrTest2= array($familyname =>
                            array(
                             "456" => "some other value",
                             "88888" => "somes other value",
                             )
                );

        array_push($arrDummy[$familyname], $arrTest2);    
    }

    if($condition3==true)
    {
        $arrTest3= array($familyname =>
                            array(
                             "756" => "further more"
                             )
                );

        array_push($arrDummy[$familyname], $arrTest3);
    }

    //How to merge or push to this very specific datas into $arrTest subarray?

    return $arrDummy;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T16:42:55.703

你的脚本中有这么多错误

尝试

```
$arrDummy = array(
"Family name aa" => array("123" => "some value","112223" => "some value"),
"Family Jacky" => array("7856" => "some savalue","2354" => "some vcx"));

$arrFamilytoAddtoDummy = getnewfamily($arrDummy,2);

var_dump($arrFamilytoAddtoDummy); 
```

功能

```
function getnewfamily($arrDummy, $condition) {
    switch ($condition) {
        case 1 :
            $arrDummy["my current family"] = array("123" => "some value");
            break;
        case 2 :
            $arrDummy["my current family"] = array("456" => "some other value","88888" => "somes other value");
            break;
        case 3 :
            $arrDummy["my current family"] = array("756" => "further more");
            break;
    }

    return $arrDummy;
} 
```

输出

```
array
  'Family name aa' => 
    array
      123 => string 'some value' (length=10)
      112223 => string 'some value' (length=10)
  'Family Jacky' => 
    array
      7856 => string 'some savalue' (length=12)
      2354 => string 'some vcx' (length=8)
  'my current family' => 
    array
      456 => string 'some other value' (length=16)
      88888 => string 'somes other value' (length=17) 
```

# java - 无法从 ActionProvider 转换为 ShareActionProvider

> ID：12654399
> 
> 赞同：10
> 
> 时间：2012-09-29T16:32:05.777
> 
> 标签：java, android, android-actionbar, actionbarsherlock, shareactionprovider

我正在尝试在我的 ActionBarSherlock 中实现 ShareActionProvider。

以下代码给了我这个错误：

> 无法从 ActionProvider 转换为 ShareActionProvider

**阅读活动.java**

```
@Override
    public boolean onCreateOptionsMenu(com.actionbarsherlock.view.Menu menu) {
        MenuInflater inflater = getSupportMenuInflater();
        inflater.inflate(R.menu.menu2b, (Menu) menu);
            menu.getItem(0).setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS|MenuItem.SHOW_AS_ACTION_WITH_TEXT);
        menu.getItem(1).setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS|MenuItem.SHOW_AS_ACTION_WITH_TEXT);

        MenuItem menuItem = menu.findItem(R.id.share);
          // Get the provider and hold onto it to set/change the share intent.
        ShareActionProvider shareActionProvider = (ShareActionProvider) menuItem.getActionProvider();

        // Set the default share intent
        shareActionProvider.setShareIntent(getDefaultShareIntent());
        return super.onCreateOptionsMenu(menu);
    } 
```

**菜单2b.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    ...
    <item android:id="@+id/share"
          android:title="Share"
          android:icon="@drawable/ic_share_action_bar"
          android:actionProviderClass="android.widget.ShareActionProvider"/>
</menu> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-30T04:44:31.207

您应该使用`ShareActionProvider`来自 ABS 的产品，而不是库存产品。

```
android:actionProviderClass="com.actionbarsherlock.widget.ShareActionProvider" 
```

# selenium - 将 chromedriver 与 selenium 一起使用时出现非法访问错误

> ID：12654401
> 
> 赞同：1
> 
> 时间：2012-09-29T16:32:20.673
> 
> 标签：selenium, selenium-webdriver, selenium-chromedriver

在 selenium 中使用 chromedriver 时出现 IllegalAccessError。我已将 chromedriver.exe 添加到我的路径中，并将其设置为 java 代码。这是我的代码

```
 System.setProperty("webdriver.chrome.driver","C:/Users/me/Documents/chromedriver/chromedriver.exe");
 WebDriver driver = new ChromeDriver(); 
```

这是控制台输出：

```
Exception in thread "main" java.lang.IllegalAccessError: tried to access method org.openqa.selenium.remote.service.DriverService.checkExecutable(Ljava/io/File;)V from class org.openqa.selenium.chrome.ChromeDriverService
    at org.openqa.selenium.chrome.ChromeDriverService.access$000(ChromeDriverService.java:39)
    at org.openqa.selenium.chrome.ChromeDriverService$Builder.usingDriverExecutable(ChromeDriverService.java:104)
    at org.openqa.selenium.chrome.ChromeDriverService.createDefaultService(ChromeDriverService.java:72)
    at org.openqa.selenium.chrome.ChromeDriver.<init>(ChromeDriver.java:107) 
```

我也尝试运行 chromedriver.exe 然后执行代码，仍然出现错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-01T14:10:15.390

这可能是由使用旧版本的 selenium 引起的，其中 checkExecutable 方法仍然是私有的

# java - 在 ny equals() 方法中调用泛型类型的特定方法

> ID：12654403
> 
> 赞同：2
> 
> 时间：2012-09-29T16:32:37.100
> 
> 标签：java, casting, polymorphism, equals

我正在为我正在编写的稀疏矩阵类（学校项目的一部分）研究 equals() 方法。我经常遇到这样的问题，它不允许我使用任何方法或特定于我的类的其他成员，因为`that`（我用于参数 to 的名称`equals`）必须是泛型类型`Object`才能覆盖`Objects`的`equals()`方法. 除此之外，我还需要能够使用我的 SparseMatrix 类型参数的一些方法来真正比较相等性，除非我也能弄清楚。我怎样才能写它来绕过那个障碍？

我有一些想法，我晚上如何做到这一点，但它们似乎都不起作用：我尝试过转换参数，我尝试过 overlading `equals()`，我什至尝试过其他一些东西，但似乎都不起作用。

这是我到目前为止所拥有的，但是，正如我所说，我无法让它发挥作用。

```
public boolean equals(Object that) {
    if (that instanceof SparseMatrix<?>) { 
        if (this.xSize != that.xSize ||
                this.ySize != that.ySize)
            return false;
        /* make some more comparisons that depend on specific
         * members of my matrix class, etc...*/
    }
    return false;
} 
```

我已经尝试过搜索这个，虽然我能够找到一些似乎在问同样事情的人，但我找不到任何真正解释*如何*做到这一点的答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T16:34:57.867

当你有一个基类的对象并且你知道它是哪种子类时，你可以通过向下转换来转换它。然后，您可以调用特定于子类的任何方法。

```
public boolean equals(Object o) {
    if (o instanceof SparseMatrix<?>) { 
        SparseMatrix that = (SparseMatrix)o;  // <-- downcast
        if (this.xSize != that.xSize ||
                this.ySize != that.ySize)
            return false;
    }
    return false;
} 
```

不应该`o`是 SparseMatrix 的实例或扩展/实现 SparseMatrix 的类（您已经检查过，但假设您没有检查过）您会得到 ClassCastException。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T16:38:32.473

```
public boolean equals(Object that) {
    if (that !=null && that instanceof SparseMatrix<?>) { 
        SparseMatrix that = (SparshMatrix)o;
        if (this.xSize != that.xSize ||
                this.ySize != that.ySize)
            return false;
    }
    return false;
} 
```

添加代码以检查`null`价值。

你需要`overrided`在你想要实例的类中有这个方法`compare`。当你实际调用`equals`那个类的实例时，这个被覆盖的方法将被调用。

****移自评论： -**使用`instanceof`您只能确保您的实例是什么类型，而不是该实例的参数化类型..（您无法确定您是否拥有`ArrayList<String>`，您可以找到它是`ArrayList`或`ArrayList<?>`准确地说) .. 原因是，`generic type`信息仅在 可用`compile time`，并通过 擦除`type erasure`，因此它们在运行时不可用。

# c# - 在 Windows 8 中模拟计量连接

> ID：12654407
> 
> 赞同：1
> 
> 时间：2012-09-29T16:32:52.980
> 
> 标签：c#, windows-8, windows-runtime, simulator

我在弄清楚如何通过**有线**网络模拟计量连接（可以在本地机器或模拟器上）时遇到了一点麻烦。

很感谢任何形式的帮助！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T09:04:08.367

我们在 AEL 询问了这个问题，并被告知无法模拟它。你只需要相信

```
Windows.Networking.Connectivity.DataPlanStatus.MaxTransferSizeInMegabytes 
```

将是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T22:06:56.653

不幸的是，答案是使用**无线**连接在另一台设备上测试应用程序，然后您可以将其设置为计量。

# javascript - 测试 jQueryTools 是否已加载

> ID：12654409
> 
> 赞同：0
> 
> 时间：2012-09-29T16:32:58.567
> 
> 标签：javascript, jquery-tools

如何测试[jQueryTools 库](http://jquerytools.org/)是否已像我们在 jQuery 或 jQueryUI 中那样加载？

当我使用 cdn 加载库时，我必须确保正确加载。使用 jQuery，我使用此代码（使用 jQuery() 函数）：

```
if (jQuery) {
  // library loaded
} 
```

所以我使用以下方法加载库：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="jquery.min.js"><\/script>')</script> 
```

**与 jQueryTools 有什么相似之处吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T16:42:00.213

您可以检查并查看该插件中的一种方法是否存在，如下例所示：

```
if(!jQuery().overlay) {
     // plug-in is not installed
} 
```

# ios - iosopendev 徽标调整构建错误

> ID：12654410
> 
> 赞同：0
> 
> 时间：2012-09-29T16:33:14.880
> 
> 标签：ios, jailbreak, tweak, logos

我刚刚使用 iOSOpenDev 创建了一个徽标调整，没有对任何内容进行任何更改。每当我尝试构建时，我都会收到此错误：

> target 指定产品类型“com.apple.product-type.library.dynamic”，但“iphoneos”平台没有这样的产品类型

有谁知道如何解决这一问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T23:08:38.710

听起来您的 iOSOpenDev 安装配置错误，因为它*应该*允许您创建一个`dylib`.

也就是说，如果您按照[此答案中的说明进行操作](https://stackoverflow.com/a/10509453/119114)，则可以手动调整一些设置文件以覆盖默认值（这不允许为 iOS 构建 dylib）。每次重新安装/升级 Xcode 时可能都需要这样做。

# c++ - C++ 中内联函数包装的限制

> ID：12654411
> 
> 赞同：1
> 
> 时间：2012-09-29T16:33:22.230
> 
> 标签：c++, optimization, c++11, inlining

我的问题涉及在 C++ 中对函数包装器应用内联优化，考虑以下代码，WorkerStructure 对象是使用封装了一些功能块的函数包装器初始化的。然后在调用 WorkerStructure::doSomeWork 方法时使用函数包装器。

workerFunction 对象封装的功能在应用于 WorkerStructure::doSomeWork 方法时会被内联吗？显然如果功能是在其他翻译单元中定义的，workerFunction 对象只封装了一个函数指针，**是否还有其他情况可以内联？不可能吗？**

当通过函数包装器传递在不同翻译单元中定义的 lambda 函数时，它实际上等效于传递函数指针吗？

```
struct WorkerStructure
{
    WorkerStructure(std::function <bool(float)> &f):workerFunction(f) {}

    void doSomeWork(float inputValue)
    {
        if(workerFunction(inputValue))
        {
            //do some conditional operation
        }
    }
    std::function <bool(float)> workerFunction ;
}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-29T16:47:15.627

固有的多态性`std::function`使得实际内联调用变得*非常非常困难。*由于`std::function`可以故事任何可调用的实体；您将如何编写内联代码？

这有点像内联虚函数，通过基指针调用而没有其他可用信息（也就是在调用之前没有从派生到基指针的赋值，编译器可能会使用它来启用内联）。

大多数时候，`std::function`是用一个`void*`指针和一个函数指针来实现的，该指针指向模板化函数的特化，它执行实际的调用和强制转换等。当然有一些变体使用虚函数来做到这一点，而且它们更清楚为什么它非常困难。即使是链接时优化也无法做任何事情，因为没关系，您已经拥有了可以在呼叫站点获得的所有信息（这并不多）。

这是使用指向模板函数版本的指针的一个*非常*粗略的版本，仅处理存储和调用方面（省略内存管理、复制、移动、重置、空间优化等）：`std::function`

```
template<class Sig>
class function;

template<class R, class... Args>
class function<R(Args...)>{
  typedef R (*call_type)(void*, Args...);
  void* _obj;
  call_type _caller;

public:
  template<class F>
  function(F f)
    : _obj(new F(f))
    , _caller([](void* p, Args... args){ return (*static_cast<F*>(p))(args...); })
  {}

  R operator()(Args... args) const{
    return _caller(_obj, args...);
  }
}; 
```

[活生生的例子。](http://liveworkspace.org/code/d2d630bed65db7ea98c215fb8fa9acda)我认为很难检查其中的实际内容`_obj`以及调用`_caller`的点。`function`

仅供参考，[这里是带虚函数的版本](http://liveworkspace.org/code/06c147b9d6cb882ec4cd7feade28e426)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T17:57:52.687

有趣的是，我今天刚刚[在邮件列表](http://lists.cs.uiuc.edu/pipermail/cfe-dev/2012-September/024619.html)中询问了有关 Clang/LLVM 中的虚函数内联的问题。的动态特性`std::function`使其本质上是一个虚拟调用，因为`virtual`调用只不过是指向函数的指针。

以 LLVM 为例，让我们玩一下下面的程序：

```
#include <cstdio>

typedef void (*Function)();

void donothing() {}
void print() { printf("Hello World!"); }

Function get(int i) {
    if (i % 2 == 0) { return donothing; }
    return print;
}

int main() {
    Function f = get(0);
    f();
} 
```

发出的主要功能：

```
define i32 @main() uwtable readnone {
  ret i32 0
} 
```

因此，编译器能够了解选择了哪个函数（结合内联和常量传播），并进行内联调用。

不幸的是，我在我的电子邮件中演示了通过虚拟表这不起作用（优化器不知何故丢失了信息并且无法内联调用）。因此，虽然内联完全有可能通过`std::function`，但它很可能不仅取决于编译器，还取决于`std::function`您碰巧使用的特定实现。恐怕您需要对您的应用程序进行试验。

# wpf - 对 ItemsControl 的插入进行动画处理

> ID：12654417
> 
> 赞同：10
> 
> 时间：2012-09-29T16:34:37.203
> 
> 标签：wpf, animation

我发现 WPF 有时难以理解。鉴于以下 XAML，如何添加触发器以动画（向下滑动、淡入）添加到 ObservableCollection 时间轴的新项目。我已经看到了列表框的各种示例，但没有看到项目控制的示例。

```
<Grid>
    <ScrollViewer>
        <ItemsControl Name="TimelineItem"
                      ItemsSource="{Binding Timeline}"
                      Style="{StaticResource TimelineStyle}"
                      ItemContainerStyle="{StaticResource TweetItemStyle}">
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <Grid VerticalAlignment="Top"
                          HorizontalAlignment="Left">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Style="{StaticResource TweetImageColumnStyle}" />
                            <ColumnDefinition />
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition />
                            <RowDefinition />
                            <RowDefinition />
                            <RowDefinition />
                        </Grid.RowDefinitions>
                        <Rectangle Grid.Column="0"
                                   Style="{StaticResource TweetImageStyle}">
                            <Rectangle.Fill>
                                <ImageBrush ImageSource="{Binding ProfileImageUrl}" />
                            </Rectangle.Fill>
                        </Rectangle>
                        <StackPanel Grid.Column="1">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="Auto" />
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Column="0"
                                           Style="{StaticResource TweetNameStyle}"
                                           Text="{Binding Name}" />
                                <TextBlock Grid.Column="1"
                                           Style="{StaticResource TweetTimeStyle}"
                                           Text="{Binding TimeAgo}" />
                            </Grid>
                            <Controls:TextBlockMarkup Grid.Row="1"
                                                      Grid.Column="1"
                                                      Markup="{Binding MarkupText}"
                                                      Style="{StaticResource TweetStyle}" />
                        </StackPanel>
                        <Separator Grid.Row="2"
                                   Grid.ColumnSpan="2"
                                   Style="{StaticResource TweetSeparatorTop}" />
                        <Separator Grid.Row="3"
                                   Grid.ColumnSpan="2"
                                   Style="{StaticResource TweetSeparatorBottom}" />
                    </Grid>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>
    </ScrollViewer>
</Grid> 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-29T23:40:59.177

自从我为 WPF 制作动画以来已经有一段时间了，但这应该通过在 Loaded Event`DataTrigger`的`DataTemplate`of 中设置 a 来工作。`ItemsControl`

几点注意事项：

1.  将以下 xaml 添加到 ItemsControl 的 DataTemplate
2.  将`<Grid>`里面的 DataTemplate 命名为：“MyGrid”
3.  将 RenderTransformOrigin 属性添加到 MyGrid 以将 Y 原点设置在顶部：
    *   `<Grid x:Name="MyGrid" RenderTransformOrigin="0.5,0">`
4.  确保将`Grid.RenderTransform`附加属性包含到您的网格中（请参见下面的示例）

**Xaml**

```
<DataTemplate.Resources>
    <Storyboard x:Key="ItemAnimation" AutoReverse="False">
        <DoubleAnimationUsingKeyFrames Storyboard.TargetName="MyGrid" Storyboard.TargetProperty="(UIElement.Opacity)">
            <EasingDoubleKeyFrame KeyTime="0" Value="0" />
            <EasingDoubleKeyFrame KeyTime="0:0:0.5" Value="1" />
        </DoubleAnimationUsingKeyFrames>
        <DoubleAnimationUsingKeyFrames Storyboard.TargetName="MyGrid" Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(ScaleTransform.ScaleY)">
            <EasingDoubleKeyFrame KeyTime="0" Value="0" />
            <EasingDoubleKeyFrame KeyTime="0:0:0.5" Value="1" />
        </DoubleAnimationUsingKeyFrames>
    </Storyboard>
</DataTemplate.Resources>

<DataTemplate.Triggers>
    <EventTrigger RoutedEvent="FrameworkElement.Loaded">
        <BeginStoryboard Storyboard="{StaticResource ItemAnimation}" />
    </EventTrigger>
</DataTemplate.Triggers> 
```

**将 RenderTransform 组添加到您的 Grid**

```
<!-- Include in the Grid -->
<Grid.RenderTransform>
    <TransformGroup>
        <ScaleTransform/>
    </TransformGroup>
</Grid.RenderTransform> 
```

这应该让您足够接近，以便您可以自己自定义它。`ItemTemplate`FWIW：我使用 Blend 通过编辑对象的样式来构建动画`Timeline`。

最后一点：动画将在窗口第一次加载 ItemsControl 时发生，对于原始集合中的每个项目。并且将在将单个项目添加到集合时发生。这种行为有点奇怪，因此您可以删除 xaml 中触发器的显式绑定，并在 ItemsControl 或 Window 加载后在代码隐藏中绑定触发器。

**编辑**

1.  我已经更新了示例，以便它现在可以与您的 XAML 一起使用。
2.  添加了另一个动画来滑动（某种程度）新项目。实际上，它的大小从 Y 轴的顶部开始从 0% 增长到 100%。
3.  修改了上面的注释 #3 以包含一个`RenderTransformOrigin`属性。
4.  添加了注释 #4 以包含`Grid.RenderTransform`附加属性。

# xamarin.ios - 供其他用户使用的 Monotouch 安装

> ID：12654421
> 
> 赞同：1
> 
> 时间：2012-09-29T16:35:02.523
> 
> 标签：xamarin.ios, monodevelop

行。我的管理员在管理员帐户下安装了 monotouch。当我登录到同一台机器时，我收到一条错误消息，说明**Monotouch 的影响尚未激活**。

我注意到在 admin\library 文件夹下有一个包含许可证文件的 Monotouch 文件夹。在我的 Library 文件夹下，我没有带有许可证文件的 Monotouch 文件夹。

这可能是问题吗？我可以将 Monotouch 文件夹复制到我的库吗？

更大的问题 - 如何安装 Monotouch 以供同一台机器上的不同用户使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T19:01:39.540

> 这可能是问题吗？

是的。MonoTouch 将寻找其许可证文件。

> 我可以将 Monotouch 文件夹复制到我的库吗？

它应该可以工作（尝试并没有真正的危害）。

OTOH 最简单/最安全的解决方案是从您的（最终）用户帐户**重新安装MonoTouch。**这将确保在*正确*的位置创建许可证文件并具有*正确*的权限。

一般来说，所有 MonoTouch 更新都将由 MonoDevelop 驱动（基于您订阅的频道、**stable**、**beta**或**alpha**），并且在（最终）用户帐户下执行。

# android - 如何使用 SurfaceView 在 MediaPlayer 上应用过滤器？

> ID：12654423
> 
> 赞同：2
> 
> 时间：2012-09-29T16:35:22.897
> 
> 标签：android, android-ndk, android-mediaplayer

我需要对在 android (MediaPlayer) 上播放的一个视频执行过滤器，这个过滤器只会将背景变为透明，但我如何读取要处理的字节？因为 android 似乎不运行 alpha 通道电影 :(

我需要这个来将视频放在覆盖相机预览（AR）的全屏中。这就是为什么我需要透明的电影背景。

我的想法是将 MediaPlayer 帧数据（位图数据）发送到 NDK 进程，然后将处理后的位图返回到表面视图。

PS：Android API8，目标2.2+

按照下面我的代码：

```
import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.util.Log;
import android.view.SurfaceView;

public class MovieSurfaceView extends SurfaceView {

    public MovieSurfaceView(Context context) {
        super(context);
    }

    @Override
    protected void onDraw(Canvas c) {
        super.onDraw(c);
    }

}

/** The main activity for the ImageTargets sample. */
public class ImageTargets extends Activity  implements SurfaceHolder.Callback
{
    private MovieSurfaceView mPreview;

    private MediaPlayer mMediaPlayer;

    private SurfaceHolder holder;

    private String videoPath = "/LAST.3g2";

    protected void onCreate(Bundle savedInstanceState)
    {
        DebugLog.LOGD("ImageTargets::onCreate");
        super.onCreate(savedInstanceState);
        initApplicationAR();
    }

    private void initApplicationAR()
    {        

        mPreview = new MovieSurfaceView(this);

        addContentView(mPreview, new LayoutParams(
            LayoutParams.FILL_PARENT,
            LayoutParams.FILL_PARENT));

        //        holder = mGlView.getHolder();
        holder = mPreview.getHolder();
        holder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
        holder.addCallback(this);
    }

    @Override
    public void surfaceChanged(SurfaceHolder arg0, int arg1, int arg2, int arg3) {

    }

    @Override
    public void surfaceCreated(SurfaceHolder arg0) {
        mMediaPlayer = new MediaPlayer();

        mMediaPlayer.setDisplay(holder);

        mMediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC); 

        mMediaPlayer.setOnPreparedListener(new OnPreparedListener() 
        {
            public void onPrepared(MediaPlayer mp) 
            {
                mp.start();
            }
        }
        );

        mMediaPlayer.setOnCompletionListener(new OnCompletionListener() 
        {

            @Override
                public void onCompletion(MediaPlayer mp) 
            {
                mp.reset();
            }
        }
        );

        iniPlayer();
    }

    @Override
        public void surfaceDestroyed(SurfaceHolder arg0) 
    {
        // TODO Auto-generated method stub

    }  

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T16:52:35.940

我建议将电影帧和相机帧都发送到 OpenGL。您没有解释如何在电影帧上选择 alpha 过滤器，但使用 OpenGL，您可以使用着色器在 GPU 上实现许多过滤器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T12:50:32.067

如果您只需要使用 NDK + OpenGL 的播放器（编译播放器时设置 rgb565 = 0，这将启用 alpha 通道）

[http://code.google.com/p/dolphin-player/](http://code.google.com/p/dolphin-player/)

**现在解决我的问题如下：**

[http://code.google.com/p/javacv/](http://code.google.com/p/javacv/)

```
import java.io.File;

import com.googlecode.javacv.CanvasFrame;
import com.googlecode.javacv.FFmpegFrameGrabber;

public class TestCV{

    public static void main(String[] args) throws Exception {

        File f = new File("input.mp4");
        FFmpegFrameGrabber grabber = new FFmpegFrameGrabber(f);

        final CanvasFrame canvas = new CanvasFrame("My Image");

        canvas.showImage(grabber.grab());

    }
} 
```

在锁定画布并使用字节之后，就像我们可以在 CameraPreview 画布上做的那样，

感谢所有帮助过的人，

# html - 如何访问标签内HTML标签的innerText

> ID：12654430
> 
> 赞同：0
> 
> 时间：2012-09-29T16:36:33.943
> 
> 标签：html, excel, html-parsing, excel-2003, vba

我想从包含此内容的网页中获取一些文本。我想获得带有 href="#spec_Brand" 的信息。

```
<td class="table_spec">
    <dl>
        <dt class="table_spec_title">
            <a class="href_icon href_icon_help table_spec_titleimg" title="Which manufacturer is producing the product?" href="#spec_Brand">
                <span>Brand</span>
            </a>
            <span class="table_spec_titletext">Brand</span>
        </dt>
        <dd class="table_spec_definition">
            Producer of the product?
        </dd>
    </dl>
</td> 
```

我正在尝试使用：

```
Set TDelementsA = HTMLdoc.getElementsByTagName("TD")
    While r < TDelementsA.Length
      If TDelementsA.className = "table_spec" Then
         Sheet4.Range("A1").Offset(r, c).Value = TDelement.innerText
    End If 
```

但它给了我：产品的品牌生产者？

代替

# 规格_品牌

有人能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T17:24:07.167

这是你正在尝试的吗？（**注意**：*我将上面的 html 存储在 Sheet1 的单元格 A1 中进行测试*）。我也在使用 IE 的后期绑定

```
Option Explicit

Sub Sample()
    Dim ie As Object
    Dim links As Variant, lnk As Variant

    Set ie = CreateObject("InternetExplorer.Application")
    ie.Visible = True
    ie.navigate "About: Blank"

    ie.document.body.innerhtml = Sheets("Sheet1").Range("A1").Value

    Set links = ie.document.getElementsByTagName("a")

    For Each lnk In links
        If lnk.classname = "href_icon href_icon_help table_spec_titleimg" Then
            Debug.Print lnk.innertext
            Exit For
        End If
    Next
End Sub 
```

**截屏**

![在此处输入图像描述](../Images/d99512c6a60a4ce2c18935065db14513.png)

# android - 在 ListView Checkbox 选择导致检查其他 Unclicked Checkbox

> ID：12654431
> 
> 赞同：0
> 
> 时间：2012-09-29T16:36:37.673
> 
> 标签：android, android-listview, android-checkbox

当我尝试检查自定义 listView 中某个项目的 CheckBox （其中每一行包含一个图像视图、一个文本和一个复选框）时，其他一些未选中的复选框被选中。

我的适配器是

```
public class MyAdapter extends BaseAdapter{
    private Activity activity;
    private String[] dataCar;
    private String[] dataImm;

    private static LayoutInflater inflater=null;
    public TitleLoader titleLoader;
    public ImageLoader imageLoader; 
    public TextLoader textLoader;

    public MyAdapter(Activity a, String[] dCar, String[] dImm) {
        activity = a;
        dataCar=dCar;
        dataImm=dImm;
        inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        titleLoader=new TitleLoader(activity.getApplicationContext());
        imageLoader=new ImageLoader(activity.getApplicationContext());
    }

    public int getCount() {
        return dataImm.length;
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        View vi=convertView;
        if(convertView==null)
            vi = inflater.inflate(R.layout.elemento_lista_car, null);

        TextView car=(TextView)vi.findViewById(R.id.car);
        ImageView image=(ImageView)vi.findViewById(R.id.image);
        CheckBox cb=(CheckBox)vi.findViewById(R.id.checkBox);
        titleLoader.DisplayTitle(dataCar[position], car);
        imageLoader.DisplayImage(dataImm[position], image);

        return vi;
    }

} 
```

# android - Android SD 卡创建的文件不可见

> ID：12654432
> 
> 赞同：2
> 
> 时间：2012-09-29T16:36:46.157
> 
> 标签：android

我使用以下代码在 SD 卡中创建了一个文件：

```
File outputFile = new File( Environment.getExternalStorageDirectory().getAbsolutePath() + File.separator + "test.jpg" );
outputFile.createNewFile();
OutputStream outputStream = new FileOutputStream( outputFile );
mBitmap.compress( Bitmap.CompressFormat.JPEG, 95, outputStream );
outputStream.flush();
outputStream.close (); 
```

当我尝试在我的计算机（通过 USB 连接的手机）中通过 Windows 资源管理器查看此文件浏览 SD 卡内容时，会显示所有 SD 卡文件夹和文件，但我的除外。Astro 显示文件，但不是缩略图。

最奇怪的是，这只发生在我的一部手机（三星 Galaxy X 手机）上，如果我重新启动这部手机，文件会同时显示在 Windows 资源管理器和 Astro 中的缩略图中。

我写的代码可能有问题或遗漏吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T17:45:18.490

图像文件需要明确索引才能出现在图库中。我想其他应用程序可能正在使用相同的机制来获取缩略图。这是一些在您编写后将扫描新媒体文件的代码：

```
 Intent intent = new Intent(Intent.ACTION_MEDIA_SCANNER_SCAN_FILE);
 Uri uri = Uri.fromFile(outputFile);
 intent.setData(uri);
 sendBroadcast(intent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T18:30:28.770

也许后面有一些 Windows 缓存，以免不断轮询目录列表。尝试在资源管理器中按 F5 以查看文件是否出现。在任何情况下，文件都应该在 Eclipse 的手机文件资源管理器中可见（在 DDMS 透视图中）。

# c# - 如何在 C# 中将 HTML 行读取为字符串

> ID：12654435
> 
> 赞同：1
> 
> 时间：2012-09-29T16:37:02.917
> 
> 标签：c#, .net

我正在尝试从不同页面的页面源中获取页面标题。但是可以说有些页面的标题是这样的：

```
&quot;This is an example,&quot; ABC. 
```

它有一些像“””这样的html。如果我在c#中使用字符串来获取这个标题，我会得到整个东西，并且在显示它时会像上面那样显示它，这是错误的。有什么方法可以忽略或考虑html c#中的值？

我也在使用 htmlagilitypack，所以其中的任何内容都可以。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T16:50:09.280

您可以`WebUtility.HtmlDecode`用来解码 html，链接在[MSDN](http://msdn.microsoft.com/en-us/library/system.net.webutility.aspx)上：

```
WebUtility.HtmlDecode("&quot;This is an example,&quot; ABC."); 
```

只需使用：

```
using System.Net; 
```

结果将是：“\”这是一个示例，\“ABC。”

您也可以`HtmlEntity.DeEntitize`使用`HTML Agility Pack`：

```
HtmlEntity.DeEntitize(string text) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T16:43:00.613

您不知道可以在页面标题中找到什么。有时那里是一团糟。我的建议是按原样获取字符串并在显示/保存之前对其进行处理。

在这种情况下，解决方案很简单：更换

```
&quot; 
```

带有相应的字符。

每次阅读 HTML 文档以提取一些标签时，请注意标签永远不会关闭。如果用户忘记关闭标题标签...您将进入该行整个页面！

# java - 把树分解成森林

> ID：12654445
> 
> 赞同：0
> 
> 时间：2012-09-29T16:37:59.597
> 
> 标签：java, graph, tree, adjacency-matrix

如何将一棵树分解为森林，使每棵树包含偶数个顶点？我需要随机分解树并检查每个森林吗？我已经创建了邻接矩阵，但无论如何都没有帮助我！
实现相同目标的正确方法应该是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T16:43:44.933

想到的一种解决方案是从某个根节点开始，并执行类似 BFS 的操作，当您拥有所需大小的树时停止。然后将您要在 BFS 中访问的下一个节点视为新的“根”节点，然后重复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T16:47:34.693

如上所述的问题是微不足道的。把树还回去。

为了使森林中的每棵树都包含偶数个顶点，森林中的总顶点必须是偶数。这意味着原始树中的顶点数是偶数。由于一棵树是一片森林，简单地返回树是一个有效的解决方案。

# mongodb - Twitter 数据 - 查找 MongoDB 中被提及次数最多的用户

> ID：12654451
> 
> 赞同：3
> 
> 时间：2012-09-29T16:38:36.660
> 
> 标签：mongodb, twitter

假设我有来自 Twitter API 的流数据，并且我将数据作为文档存储在 MongoDB 中。我试图找到的是`screen_name`under的计数`entities.user_mentions`。

```
{
    "_id" : ObjectId("50657d5844956d06fb5b36c7"),
    "contributors" : null,
    "text" : "",
    "entities" : {
        "urls" : [ ],
        "hashtags" : [
            {
                "text" : "",
                "indices" : [
                    26,
                    30
                ]
            },
            {
                "text" : "",
                "indices" : []
            }
        ],
        "user_mentions" : [ 
                {
                    "name":"Twitter API", 
                    "indices":[4,15], 
                    "screen_name":"twitterapi", 
                    "id":6253282, "id_str":"6253282"
                }]
    },
    ... 
```

我尝试使用 map reduce：

```
map = function() {
    if (!this.entities.user_mentions.screen_name) {
        return;
    }

    for (index in this.entities.user_mentions.screen_name) {
        emit(this.entities.user_mentions.screen_name[index], 1);
    }
}

reduce = function(previous, current) {
    var count = 0;

    for (index in current) {
        count += current[index];
    }

    return count;
}

result = db.runCommand({
    "mapreduce" : "twitter_sample",
    "map" : map,
    "reduce" : reduce,
    "out" : "user_mentions"
}); 
```

但它并不完全工作......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T04:50:34.867

由于`entities.user_mentions`是一个数组，因此您希望为每个 screen_name 发出一个值`map()`：

```
var map = function() {
    this.entities.user_mentions.forEach(function(mention) {
        emit(mention.screen_name, { count: 1 });
    })
}; 
```

然后按以下中的唯一 screen_name 计算值`reduce()`：

```
var reduce = function(key, values) {
    // NB: reduce() uses same format as results emitted by map()
    var result = { count: 0 };

    values.forEach(function(value) {
        result.count += value.count;
    });

    return result;
}; 
```

注意：要调试您的 map/reduce JavaScript 函数，您可以使用`print()`和`printjson()`命令。输出将出现在您的`mongod`日志中。

编辑：为了比较，这里是一个在 MongoDB 2.2 中使用新[聚合框架的例子：](http://docs.mongodb.org/manual/reference/aggregation/)

```
db.twitter_sample.aggregate(
    // Project to limit the document fields included
    { $project: {
        _id: 0,
        "entities.user_mentions" : 1
    }},

    // Split user_mentions array into a stream of documents
    { $unwind: "$entities.user_mentions" },

    // Group and count the unique mentions by screen_name
    { $group : {
        _id: "$entities.user_mentions.screen_name",
        count: { $sum : 1 }
    }},

    // Optional: sort by count, descending
    { $sort : {
        "count" : -1
    }}
) 
```

原始的 Map/Reduce 方法最适合大型数据集，正如 Twitter 数据所暗示的那样。有关 Map/Reduce 与聚合框架限制的比较，请参阅 StackOverflow 问题[MongoDB group()、$group 和 MapReduce](https://stackoverflow.com/questions/12337319/mongodb-group-group-and-mapreduce/12340283#12340283)的相关讨论。

# java - 从导出的 Jar 执行时找不到 jdbc 驱动程序

> ID：12654452
> 
> 赞同：2
> 
> 时间：2012-09-29T16:38:44.067
> 
> 标签：java, exception, jdbc, jar, jaybird

我有一个 Java 小程序，从 eclipe 执行时它可以正常工作，但我想将它导出到 Jar 并使用它。但是当我这样做时，我找不到 jdbc 驱动程序，好像在导出时，没有导出 jaybird。

对于导出，我使用 eclipse 导出并选择 Java/JAR 文件，在构建路径中我有要导出的 jaybird 标记。

有什么建议么？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T16:51:18.753

使用[Fat Jar](http://fjep.sourceforge.net/)构建包含所有依赖库的可运行 JAR

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T07:56:53.603

您很可能缺少 Jaybird jar 文件的 META-INF 文件夹中的文件。Jaybird 需要这些文件才能正常工作。另一种可能性是您缺少 Jaybird 所需的依赖项之一（connector-api-1.5.jar，用于 Jaybird 2.2 或 mini-j2ee.jar，用于早期版本）。

即使你让它工作，你很可能稍后会遇到错误，因为 Jaybird 的开发并未考虑到对小程序的支持，请参阅[http://tracker.firebirdsql.org/browse/JDBC-254](http://tracker.firebirdsql.org/browse/JDBC-254)和[NoClassDefFoundError带 jdbc 小程序](https://stackoverflow.com/q/10673119/466862)

顺便说一句：你为​​什么不按原样使用罐子。恕我直言，创建包含所有依赖项的胖 jar 是丑陋且不灵活的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T08:16:22.113

我终于得到了答案，我还必须签署 jaybird jar，因为那个 jar 正在 HDD 中进行读/写操作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-17T14:31:22.143

通过使用**Eclipse**，您可以简单地解决问题。通过转到`Eclipse -> File -> Export -> Runnable JAR file`并选择`Extract required libraries into generated JAR`选项，Eclipse 将在您的项目旁边提取所需的库并为您创建所需的**MANIFEST.MF**文件，然后将它们全部打包到您的 JAR 文件中。

# perl - Perl 关于哈希和数组引用

> ID：12654453
> 
> 赞同：1
> 
> 时间：2012-09-29T16:39:00.300
> 
> 标签：perl, parsing, csv

我有一个 csv 文件，`transcation.csv`它看起来像这样：

```
TransactionID,Date,AccNum,Type,Amt  
657520,02-07-1999,016901581432,Debit,16000  
657524,02-07-1999,016901581432,Debit,13000  
657538,09-07-1999,016901581432,Credit,11000  
657548,18-07-1999,016901581432,Credit,15500  
657519,02-07-1999,016901581433,Debit,12000  
657523,02-07-1999,016901581433,Credit,11000  
657529,03-07-1999,016901581433,Debit,15000  
657539,10-07-1999,016901581433,Credit,10000  
657541,11-07-1999,016901581434,Debit,12000  
657525,03-07-1999,016901581434,Debit,15000  
657533,05-07-1999,016901581434,Credit,12500 
```

我应该从中读取数据`transaction.csv`并将其存储在哈希中。然后将哈希和帐号列表传递给函数，然后使函数使用哈希中的数据计算列出的账户的总借方金额和贷方金额。

这是我的代码：

```
#!/usr/bin/perl

my %banks;
&arrhas_banks(\%banks);
my @accnum = qw(016901581432 016901581434);
hasarr_banks(\%banks,\@accnum);

sub arrhas_banks
{
  my $banks = shift;
  open(FH,"<transaction.csv") or die "Could not open 'transaction.csv' $!\n";
  while (my $data=<FH>) 
  {
    chomp($data);
    my @records = split ",", $data;
    $banks->{$records[0]} =
      { 'AccNum' => $records[2], 'Type' => $records[3], 'Amt' => $records[4] };
  }
  close(FH);
}

sub hasarr_banks {
  my ($banks, $accnum) = @_;
  foreach my $id (keys %{$banks}) {
    my $answer;
    foreach my $num (@{$accnum}) {
      if($banks->{$id}{'AccNum'} == $num) {
        $answer = 1;
      }
    }
    if($answer) {
      my $type = $banks->{$id}{'Type'};
      $total{$accnum}{$type} += $banks->{$id}{'Amt'};
    }
  }
  foreach my $no (@{$accnum}} { 
    print "Debit amount of $no is $total{$accnum}{'Debit'}";
    print "Credit amount of $no is $tot{$accnum}{'Credit'}";
  }
} 
```

我应该产生这样的输出：

```
Debit amount of 016901581432 is 29000  
Credit amount of 016901581432 is 26500  
Debit amount of 016901581434 is 27000  
Credit amount of 016901581434 is 12500 
```

但我得到这样的输出：

```
Debit amount of 016901581432 is 56000    
Credit amount of 016901581432 is 39000  
Debit amount of 016901581434 is 56000  
Credit amount of 016901581434 is 39000 
```

我究竟做错了什么？

* * *

```
#!/usr/bin/perl

my %banks;
&arrhas_banks(\%banks);
my @accnum = qw(016901581432 016901581434);
hasarr_banks(\%banks,\@accnum);

sub arrhas_banks
{
  my $banks = shift;
  open(FH,"<transaction.csv") or die "Could not open 'transaction.csv' $!\n";
  while (my $data=<FH>) 
  {
    chomp($data);
    my @records = split ",", $data;
    $banks->{$records[0]} =
      { 'AccNum' => $records[2], 'Type' => $records[3], 'Amt' => $records[4] };
  }
  close(FH);
}

sub hasarr_banks {
  my ($banks, $accnum) = @_;
  foreach my $id (keys %{$banks}) {
    my $answer;
    foreach my $num (@{$accnum}) {
      if($banks->{$id}{'AccNum'} == $num) {
        $answer = 1;
      }
    }
    if($answer) {
      my $type = $banks->{$id}{'Type'};
      $total{ $banks->{$id}{'AccNum'} }->{$type} += $banks->{$id}{'Amt'};
    }
  }
  foreach my $no (@{$accnum}) { 
    print "Debit amount of $no is $total{$accnum}{'Debit'}";
    print "Credit amount of $no is $total{$accnum}{'Credit'}";
  }
} 
```

还没有输出。还是出错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T18:32:07.627

您应该尝试使用 csv 模块，例如[`Text::CSV`](http://search.cpan.org/perldoc?Text%3a%3aCSV). 请注意，在下面的示例中，`DATA`文件句柄可以替换为任何 IO 输入句柄。

```
use strict;
use warnings;
use Text::CSV;
use feature 'say';

my $c = Text::CSV->new( );                    # default settings are ok
$c->column_names( $c->getline(*DATA) );       # set headers
my %acc;

while (my $row = $c->getline_hr(*DATA)) {     # $row is a hash ref
    if ($row->{Type} eq "Debit") {
        $acc{ $row->{AccNum} }{Debit}  += $row->{Amt};
    } elsif ($row->{Type} eq "Credit") {
        $acc{ $row->{AccNum} }{Credit} += $row->{Amt};
    } else { warn "Bad csv line '@$row'" }    # precaution
}

for my $acc (keys %acc) {
    say "Debit amount of $acc is ", $acc{$acc}{Debit};
    say "Credit amount of $acc is ", $acc{$acc}{Credit};
}

__DATA__
TransactionID,Date,AccNum,Type,Amt
657520,02-07-1999,016901581432,Debit,16000  
657524,02-07-1999,016901581432,Debit,13000  
657538,09-07-1999,016901581432,Credit,11000  
657548,18-07-1999,016901581432,Credit,15500  
657519,02-07-1999,016901581433,Debit,12000  
657523,02-07-1999,016901581433,Credit,11000  
657529,03-07-1999,016901581433,Debit,15000  
657539,10-07-1999,016901581433,Credit,10000  
657541,11-07-1999,016901581434,Debit,12000  
657525,03-07-1999,016901581434,Debit,15000  
657533,05-07-1999,016901581434,Credit,12500 
```

**输出：**

```
Debit amount of 016901581433 is 27000
Credit amount of 016901581433 is 21000
Debit amount of 016901581434 is 27000
Credit amount of 016901581434 is 12500
Debit amount of 016901581432 is 29000
Credit amount of 016901581432 is 26500 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T16:53:40.753

你在重复计算。

此代码在 2 个地方被破坏：

1.  首先，由于您的示例数据中的 AccNum 始终是`$accnum`列表中的 2 个帐户之一，因此 $answer 将始终为 1。

    foreach 我的 $num (@{$accnum}) { if($banks->{$id}{'AccNum'} == $num) { $answer = 1; } }

2.  其次，您`$total`基于`$accnum`键进行分配-但是，`$accnum`是对帐户#s 列表的数组引用-看看您的子例程调用。

    换句话说，您的`$total`hashref 将只有一个键，看起来像“ARRAY(SOMETHING)”，而不是每个帐户的 2 个键#。

您需要做的只是分配给正确的帐户#：

```
if ($answer) {
  my $type = $banks->{$id}{'Type'};
  $total{ $banks->{$id}{'AccNum'} }->{$type} += $banks->{$id}{'Amt'};
} 
```

顺便说一句，就可读性而言，您的代码风格不是很好。不是我见过的最糟糕的，但绝对不接近理想。

# php - 使用 WordPress 设置 cookie

> ID：12654454
> 
> 赞同：0
> 
> 时间：2012-09-29T16:39:01.917
> 
> 标签：php, wordpress, cookies, session-cookies

> **可能重复：**
> [Cookie 没有在 PHP 中持久存在？](https://stackoverflow.com/questions/12585458/cookies-arent-persisting-in-php)

我的目标是：当用户访问我的网站登陆页面并选择他们的城市（x 或 y）时，我想设置一个记住这个选择的 cookie，所以下次他们访问登陆页面时，它会直接重定向到他们的城市。我目前拥有的代码是这样的：

登陆页面：

```
<?php
if (isset($_COOKIE['cambridge'])) {
    header('Location: http://cambridge.guestvibe.com');
}
else if (isset($_COOKIE['oxford'])) {
    header('Location: http://oxford.guestvibe.com');
}
?> 
```

城市特定页面（一个示例）：

```
<?php setcookie("Cambridge",""); ?> 
```

我也试过：

```
<?php setcookie("Cambridge",""); ?> 
```

这对我不起作用，但这是我第一次使用 cookie。知道有什么问题吗？

**编辑**

接受的答案解决了一半的问题，但对于 WordPress，还需要添加一些代码，解释[here](http://scratch99.com/wordpress/development/setting-cookies-in-wordpress-trap-for-beginners/)。

最终代码是：

```
setcookie('city','Cambridge',time()+86400*365, "/", ".guestvibe.com"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T17:05:19.833

那是因为`setcookie()`当浏览器关闭时，您的使用必然会过期。`setCookie`有第三个参数，您应该使用它来设置它何时到期。默认情况下，关闭浏览器时将其排除在外。下面是一个关于如何设置 365 天后过期的 cookie 的示例：

```
setcookie('city','Cambridge',time()+86400*365); // remember for 365 days. 
```

然后，将您的代码更改为如下所示：

```
if ($_COOKIE['city'] == 'Cambridge') {
    // redirect
} else if ($_COOKIE['city'] == 'Oxford') {
    // redirect
} 
```

有关设置 cookie 的更多信息，请查看[setcookie](http://php.net/setcookie)的 PHP 文档。

# iphone - pushViewControllerAnimated 在整个屏幕上推送 ViewController

> ID：12654468
> 
> 赞同：0
> 
> 时间：2012-09-29T16:41:25.820
> 
> 标签：iphone, ios

我试图展示一个悬停在另一个视图控制器上的模态视图控制器。现在的问题是，当我使用 pushViewControllerAnimated 时，被推送的视图控制器将与整个 iphone 屏幕一样大。我只希望它是屏幕的一半大小。如何调整大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T16:53:54.927

屏幕的一半大小到底是什么意思？如果您对类似 Facebook 的侧边菜单感兴趣，请查看： [https](https://github.com/Inferis/ViewDeck) ://github.com/Inferis/ViewDeck 或[https://github.com/BenHall/ios_facebook_style_navigation](https://github.com/BenHall/ios_facebook_style_navigation)

如果您对类似 alertview 的小型模态视图控制器感兴趣，您可以：

*   考虑使用警报视图并添加一些子视图
*   如果您确实必须为此使用 UIViewController，请阅读[http://devblog.bu.mp/easy-partial-screen-modals-on-ios，Apple](http://devblog.bu.mp/easy-partial-screen-modals-on-ios)不建议这样做（http://blog.carbonfive.com/ 2011/03/09/滥用-uiviewcontrollers/)

希望这可以帮助。

# iphone - ARC 和dismissModalViewControllerAnimated：视图控制器内存未释放

> ID：12654469
> 
> 赞同：1
> 
> 时间：2012-09-29T16:41:32.300
> 
> 标签：iphone, ios, uiviewcontroller, modalviewcontroller

如何使用 ARC 有效地释放模态视图控制器的内存？

我看到了一些关于该主题的主题，但实际上在处理模态视图控制器时，我没有找到任何看似常见问题的答案。

我制作了一个示例应用程序，其中 viewcontroller1 以模态方式呈现 viewcontroller2。当我关闭 viewcontroller2（从 viewcontroller1）时，内存没有释放！:(（见下面的内存日志）

奇怪：viewcontroller1中没有对viewcontroller2的强引用，确实调用了viewcontroller2 dealloc...

使用 presentModalViewController/dismissModalViewControllerAnimated 呈现/关闭视图控制器

查看我的内存用法：

ViewController1 显示：7.41 Mb 使用
--ACTION：显示 ViewController2--
ViewController2 显示：8.11 Mb 使用
--ACTION：关闭 ViewController2--
ViewController1 显示：8.06 Mb 使用
--ACTION：显示 ViewController2--
ViewController2 显示：8.11 Mb 使用
--操作：关闭 ViewController2--
显示 ViewController1：8.06 Mb 使用情况
--操作：显示 ViewController2--
显示 ViewController2：8.11 Mb 使用
--操作：关闭 ViewController2--
显示 ViewController1：8.06 Mb 使用

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T18:06:47.923

viewcontroller2 中的 dealloc 通常会释放该类中分​​配的变量和资源，而不是视图控制器本身。此外，当您使用 ARC 时，内存会自动处理，并且可能不会在您想要的时候释放。如果您不使用 ARC，则您可以完全控制内存管理，即使在今天，我们大多数人也会这样做。不要担心它会自动释放你的对象。否则，您可以搜索类似 java 中使用的 finalizer() 方法来发送您的对象进行垃圾收集（尽管 ARC 是 diff 然后是垃圾收集）。

# php - 检查数组以查找公共数据

> ID：12654472
> 
> 赞同：0
> 
> 时间：2012-09-29T16:42:47.420
> 
> 标签：php, mysql, arrays

> **可能重复：**
> [使用 PHP 在多个数组中查找公共值](https://stackoverflow.com/questions/5299608/find-common-values-in-multiple-arrays-with-php)

我试图找出两个用户共有的朋友数量。每个用户朋友的用户 ID 都存储在数据库中，如下所示：12、13、14。这是我的代码。

```
$my_friends = explode(',', $my_friends);
print_r($my_friends); 
```

这输出：`Array ( [0] => 12 [1] => 13 [2] => 14 )`

这些是我朋友的用户 ID。现在为下一个用户：

```
$users_friends = explode(',', $users_friends);
print_r($users_friends); 
```

这输出：`Array ( [0] => 12 )`

如何显示用户 1 和用户 2 的 id 为 12 相同？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T16:47:00.353

除了建议您应该规范化您的数据库之外，这可以通过简单的 SQL 查询轻松完成：

分解 $myFrieds 和 $users_friends 数组，然后使用 array_intersect [()](http://www.php.net/manual/en/function.array-intersect.php)函数找到公共条目，然后[count()](http://www.php.net/manual/en/function.count.php)那些

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T16:45:43.627

你可以使用[`array_intersect()`](http://php.net/manual/en/function.array-intersect.php).

```
print_r(array_intersect($my_friends, $users_friends)); 
```

将输出`Array ( [0] => 12 )`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T16:47:35.343

您可以使用[**array_intersect**](http://php.net/manual/en/function.array-intersect.php)：

```
$common_friends = array_intersect($my_friends, $users_friends); 
```

# ios - 如何在地图视图中默认显示 PlaceMark 标题？

> ID：12654476
> 
> 赞同：0
> 
> 时间：2012-09-29T16:43:00.267
> 
> 标签：ios, mkmapview

我可以将 PlaceMark 放置在 MapView 上，但是我必须单击图钉才能看到标题出现。我想要的是默认显示的标题。

到目前为止，这是我的代码：

```
 [self.mapView setRegion:adjustedRegion animated:YES];

    PlaceMark *placeMark = [[PlaceMark alloc]
                            initWithCoordinate:self.centerOfMap
                            andMarkTitle:@"My Title"
                            andMarkSubTitle:@"Sub Title"];

    [self.mapView addAnnotation:placeMark]; 
```

还：

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation {

    static NSString *identifier = @"MyLocation";
    if ([annotation isKindOfClass:[PlaceMark class]]) {

        MKPinAnnotationView *annotationView = (MKPinAnnotationView *) [self.mapView dequeueReusableAnnotationViewWithIdentifier:identifier];
        if (annotationView == nil) {
            annotationView = [[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:identifier];
        } else {
            annotationView.annotation = annotation;
        }

        annotationView.enabled = YES;
        annotationView.canShowCallout = YES;

        return annotationView;
    }

    return nil; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T17:00:24.040

请看一下覆盖委托。

```
-(MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation 
{

} 
```

# java - 套接字连接在模拟器上运行良好，但无法在真实设备中发送（j2me）

> ID：12654477
> 
> 赞同：1
> 
> 时间：2012-09-29T16:43:04.430
> 
> 标签：java, sockets, java-me, nokia-s40

我正在开发一个服务器/客户端应用程序。该应用程序在模拟器上运行良好，但是当我在诺基亚 5200 或诺基亚 6303i 上测试它时，虽然连接建立成功，但服务器在第一次读取方法时会阻塞。换句话说，客户端（j2me）应用程序无法向服务器发送数据。

我的客户部分：

```
 Thread occ=new Thread(new Runnable() {

                    public void run() {
                        try {
                            SocketConnection sc = (SocketConnection)Connector.open("socket://213.233.169.142:2000");
                            sc.setSocketOption(SocketConnection.DELAY, 0);
                            OutputStream os=sc.openDataOutputStream();
                            DataOutputStream dos=new DataOutputStream(os);

                            InputStream is=sc.openDataInputStream();
                            DataInputStream dis=new DataInputStream(is);

        //dos.writeUTF(receiverT.getString());

        os.write("saalam".getBytes());                                                      

        os.flush();

        dos.writeUTF(Midlet.userPhoneNumber);
        dos.flush();

        dos.writeUTF(messT.getString());
        dos.flush();

          while((!dis.readUTF().equals("system-use:code=2")) && false)
        {

        }

        dos.close();
        os.close();
        sc.close();

                        } catch (IOException ex) {
                            ex.printStackTrace();
                        }
                    }
                });  

        occ.start(); 
```

我的服务器部分：

```
 serverSocket = new ServerSocket(2000);
 Socket socket=serverSocket.accept();
 System.out.println("connection stablished");
 inp=new DataInputStream(mySocket.getInputStream());
 outp=new DataOutputStream(mySocket.getOutputStream());

 receiverTemp=inp.read();//the server code blocks on this line

 senderTemp=inp.readUTF();
 .
 .
 .
 . 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T00:49:48.843

您是否在 JAD 文件中设置了套接字权限？这一事实对于解决设备中的此类问题非常重要

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T19:09:56.880

问题终于解决了。问题是一些移动运营商不允许使用原始套接字发送/接收信息，所以我们在端口 80 上使用了 HTTP 套接字并且它起作用了。

# android - 如何确定 requestLocationUpdates 有效？

> ID：12654480
> 
> 赞同：0
> 
> 时间：2012-09-29T16:44:04.180
> 
> 标签：android, gps

我使用 requestLocationUpdates 监听器接收数据。如何确定 requestLocationUpdates 有效？需要一个能够返回 true 的方法 - 如果启用 requestLocationUpdates 或如果我将其关闭则返回 false (removeUpdates)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T17:40:48.730

没有这样的方法。对于 的`LocationListener`味道`requestLocationUpdates()`，您可以很容易地自己跟踪它：

步骤#1：将数据成员添加到某个类，类型`boolean`为 ，命名为`areLocationUpdatesEnabled`，最初设置为`false`。

步骤#2：当您调用 时`requestLocationUpdates()`，设置`areLocationUpdatesEnabled`为`true`。

第 3 步：当您调用 时`removeUpdates()`，设置`areLocationUpdatesEnabled`为`false`。

步骤#4（可选）：实现`areLocationUpdatesEnabled()`为返回值的方法`areLocationUpdatesEnabled`。

# xml - 使用谓词作为模板参数传递位置路径

> ID：12654484
> 
> 赞同：1
> 
> 时间：2012-09-29T16:44:14.110
> 
> 标签：xml, xslt, xpath

```
<xsl:template match="foobar">
    <xsl:if test="a[name = 'foo']">
        <xsl:apply-templates select="x/y[1]|x/y[2]" />
    </xsl:if>
    <xsl:if test="a[name = 'bar']">
        <xsl:apply-templates select="x/y[3]|x/y[4]|x/y[5]" />
    </xsl:if>
</xsl:template> 
```

我想将位置路径表达式 "x/y[1]|x/y[2]" 和 x/y[3]|x/y[4]|x/y[5] 作为参数传递，因为这个值将来可能会改变，我不想编辑模板，只想编辑参数定义。我想使用上面的模板作为

```
<xsl:template match="foobar">
    <xsl:if test="a[name = 'foo']">
        <xsl:apply-templates select="$param1" />
    </xsl:if>
    <xsl:if test="a[name = 'bar']">
        <xsl:apply-templates select="$param2" />
    </xsl:if>
</xsl:template> 
```

据我所知，这是不可能的。将位置路径表达式外部化的最佳方法是什么？

提前谢谢了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T18:38:24.730

```
<xsl:template match="foobar">
    <xsl:param name="param1" />
    <xsl:param name="param2" />
    <xsl:if test="a[name = 'foo']">
        <xsl:apply-templates select="$param1" />
    </xsl:if>
    <xsl:if test="a[name = 'bar']">
        <xsl:apply-templates select="$param2" />
    </xsl:if>
</xsl:template> 
```

然后你调用模板：

```
<xsl:call-template name="foobar">
    <xsl:with-param name="param1" select="actualXPath1"/>
    <xsl:with-param name="param2" select="actualXPath2"/>
</xsl:call-template> 
```

或者您可以在 XSLT 文件的开头使用全局参数。

```
<xsl:param name="param1" select="actualXPath1"/>
<xsl:param name="param2" select="actualXPath2"/>
<!-- continue with template definitions -->
... 
```

这篇[文章](http://docstore.mik.ua/orelly/xml/xslt/ch04_04.htm)可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T08:18:38.080

如果您不介意使用专有函数或 EXSLT，您可以动态评估可用作字符串的 XPath 表达式：

*   EXSLT 的[dyn:evaluate(string)](http://www.exslt.org/dyn/functions/evaluate/index.html)
*   Saxon 6.5.5 和 9.x 也有一个专有的 evaluate(string) 函数。

然后，您可以将这些 XPath 字符串作为全局参数传递给您的 XSLT，或者将它们存储在外部文件中。

# android - 移动应用压力测试

> ID：12654486
> 
> 赞同：1
> 
> 时间：2012-09-29T16:44:23.597
> 
> 标签：android, ios, testing, mobile, stress-testing

是否有任何工具可以在 iOS 和 Android 应用程序中进行压力测试？我想测试应用程序，看看是否有 50,000 人可以同时使用该应用程序，或者是否有 50,000 人可以同时使用该应用程序正在调用的 Web 服务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-17T14:16:26.843

最简单的方法是使用云服务，它为[移动应用程序](http://blazemeter.com/blog/load-testing-mobile-apps-made-easy)提供压力测试。当我[测试移动应用程序](http://blazemeter.com/blog/load-testing-mobile-apps-made-easy)时，我使用了带有 Blazemeter 的 Apache Jmeter 并模拟了负载和压力测试。在我的 Jmeter 中，我将代理配置为与移动设备一起使用。请注意，Android 仅支持 HTTP 代理。如果您的应用程序使用 HTTPS 连接，那么您可以使用执行 HTTPS 代理的附加应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T20:10:57.377

获得 50,000 台 Android/IOS 设备将是一项挑战……或昂贵……或两者兼而有之。假设您已经在设备上测试了应用程序并且性能可以接受，并且服务器上的负载最小，您可能希望接下来对您的服务器进行负载测试。如果您的应用程序使用 HTTP 与您的服务器通信，那么您可以使用 Web 负载测试工具，例如我们的[负载测试](https://www.webperformance.com/load-testing/)器产品。这些将模拟我们的应用程序发送到服务器的 HTTP 请求 - 因此您不需要获取 50k 移动设备。LITE 版本是免费的，用户不受限制，因此您可以在需要 PRO 版本中的高级功能之前完成一些测试。公平地说，还有其他免费的负载测试解决方案可用 - 搜索 Web 负载测试软件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T17:30:50.310

`JMeter`应该是您的要求和分析尝试`YourKit`。希望这可以帮助。您可以单独测试您的 Web 服务`SOAP UI`

# iphone - 如何使 NSURL 连接开始将数据传输到字典项？

> ID：12654487
> 
> 赞同：0
> 
> 时间：2012-09-29T16:44:27.647
> 
> 标签：iphone, xcode, connection, nsurl, nsmutabledictionary

我有标记的 NSURLConnection 子类，需要从多个 URL-s 获取图像数据......这个想法对我来说很清楚，但我无法正确启动连接，因此数据会附加到它的位置...... .在这里我有：

```
- (IBAction)sophisticatedDownload {
    connectionDict = [[NSMutableDictionary dictionaryWithCapacity:news.count] retain];
    for (int i =0; i<news.count; i++) 
    {
          //init the tagged connection

             if (theConnection) {
                    self.imageData = [NSMutableData data];
                    [connectionDict setObject: imageData forKey: theConnection.connID];    
            } else {       
                    NSLog(@"Connection failed");
            }
    }
}

- (void)connection :(tagConnection *)connection didReceiveData:(NSData *)data {
[[connectionDict objectForKey:connection.connID] appendData:data];
}

- (void)connectionDidFinishLoading:(tagConnection *)connection {

NSLog(connection.connID); 
```

什么应该

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T16:56:02.047

你可以像这样开始你的连接 -

```
NSString *urlString = [NSString stringWithFormat:@"http://EnterYourURLHere"];
NSURL *URL = [NSURL URLWithString:urlString];
NSMutableURLRequest *urlRequest = [[NSMutableURLRequest alloc]init];
[urlRequest setURL:URL];
[urlRequest setHTTPMethod:@"POST"];
[urlRequest setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-type"];

NSURLConnection *urlConnection = [[NSURLConnection alloc]initWithRequest:urlRequest delegate:self];
if(!urlConnection)
{
    [[[UIAlertView alloc]initWithTitle:@"OOoopppssS !!" message:@"There is an error occured. Please check your internet connection or try again." delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil] show];
} 
```

但这不是下载多个图像的好方法。请参阅[NSURLConnection 下载多个图像](https://stackoverflow.com/questions/6027119/nsurlconnection-download-multiple-images)以下载多个图像。

# datetime - Access中查询日期

> ID：12654492
> 
> 赞同：2
> 
> 时间：2012-09-29T16:45:22.207
> 
> 标签：datetime, criteria, ms-access-2010

我有一个数据库，该数据库将每个条目的日期和时间存储在单个列中， `8/29/2012 6:09:45 AM`例如 - 作为示例。我正在寻找一种方法来查询今天的日期，而不管时间如何。

目前我在查询中使用条件`Like "*9/29/2012*"`。问题是需要报告的每一天，标准中的日期都需要更新，从而消除了自动化报告的可能性。

有没有办法只查询当前日期而不必大修目标表，或者必须每天更新查询条件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T16:56:44.510

日期存储为数字，整数部分是日期，所以你可以说：

```
 CInt(MyDate)=Cint(Date) 
```

你也可以说：

```
 CDate(Format(MyDate, "yyyy/mm/dd")) = Date() 
```

或者

```
 DateSerial(Year(Mydate),Month(MyDate),Day(Mydate))=Date() 
```

或者

```
MyDate>=Date And MyDate<Date+1 
```

最后一个示例将利用索引。

```
29/09/2012 00:00:00 is equal to Date() 
29/09/2012 23:50:00 is greater than Date() but less than Date+1 
```

# sql - SQL：自动列选择

> ID：12654500
> 
> 赞同：0
> 
> 时间：2012-09-29T16:46:23.300
> 
> 标签：sql, postgresql, select

我正在对表进行自动连接（可以说表别名为 current、prev、next），但我只对 current 的列感兴趣。有没有办法（不显式枚举它们）将结果集的列限制为当前的列？比这更简单的东西（没有元表查询，甚至是完全与数据库无关的东西）：[sql select with column name like](https://stackoverflow.com/questions/5274594/sql-select-with-column-name-like)会很棒。由于我对我的要求施加了一些特定的限制（选择原始/当前表的所有列），我希望我缺少一些简单的东西。最后，我也会对 Postgres 特定的解决方案感到满意。

使用 Postgres，类似的语句

```
 SELECT current FROM ... 
```

确实几乎提供了我想要的东西，只是现在所有内容都合并到一个逗号分隔的文本列中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T17:16:49.790

当然这是可能的：

```
select current.*
from some_table current
   join other_table prev on prev.fid = current.id
   join third_table nxt on nxt.oid = prev.id 
```

# google-maps - 如何将雄蕊地图与静态谷歌地图 api 一起使用？

> ID：12654501
> 
> 赞同：0
> 
> 时间：2012-09-29T16:46:38.207
> 
> 标签：google-maps, stamen-maps

我希望能够将雄蕊地图水彩层与 Google 的静态地图 api 结合使用。

我希望这很简单，但我不知道如何实现它......

静态地图 URL 如下所示：

[https://maps.googleapis.com/maps/api/staticmap?center=40.714728,-73.998672&zoom=12&size=400x400&sensor=false](https://maps.googleapis.com/maps/api/staticmap?center=40.714728,-73.998672&zoom=12&size=400x400&sensor=false)

雄蕊地图信息在这里：

[http://maps.stamen.com/#watercolor](http://maps.stamen.com/#watercolor)

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T21:07:39.220

如果您转到[此页面](http://maps.stamen.com/m2i/#watercolor/1500:1000/12/37.7532/-122.3909)，您会看到您可以以某个区域为中心，选择地图样式和图像大小，然后按“MAKE”按钮。这将生成一个静态图像，然后您可以参考。

Stamen 没有提供静态地图 URL，您可以使用它从 lat/lng 对生成地图，就像 Google 那样。如果这是一张一次性地图，你会没事的。否则，您似乎无法轻松（见下文）动态生成静态地图图像。

PS 如果您真的很感兴趣，可以查看[页面的 JavaScript 源代码](http://maps.stamen.com/m2i/js/tilestitcher.js)，并通过调用*generateExportURL()*来查看，您将获得 URL 以启动静态水彩地图的服务器端渲染。然后，您需要轮询相同的 URL（使用（例如）服务器端代理，因为跨域限制不允许您从 JavaScript 源轮询此页面）以检查地图的“状态”何时更改从“未开始”到“完成”... :-)

# eclipse - 如何解决 jdoconfig.xml 中 xsi:noNamespaceSchemaLocation 上的验证错误

> ID：12654503
> 
> 赞同：13
> 
> 时间：2012-09-29T16:46:43.947
> 
> 标签：eclipse, google-app-engine, jdo, xsd-validation

自从我今天更新到 GAE 1.7.2.1 后，我在所有 jdoconfig.xml 文件中的 eclipse 中都出现了验证错误。

我有默认的 jdoconfig.xml 内容：

```
[...]
<jdoconfig xmlns="http://java.sun.com/xml/ns/jdo/jdoconfig"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:noNamespaceSchemaLocation="http://java.sun.com/xml/ns/jdo/jdoconfig">
[...] 
```

日食验证抛出：

```
Referenced file contains errors (http://java.sun.com/xml/ns/jdo/jdoconfig).  
For more information, right click on the message in the Problems View and 
select "Show Details..." 
```

单击详细信息时，我可以看到一堆行，例如：

```
s4s-elt-character: Non-whitespace characters are not allowed in schema elements
other than 'xs:appinfo' and 'xs:documentation'. Saw 'var_U = "undefined";'. 
```

在不同的台词和不同的内容中“锯...”

它发生在我开始使用谷歌插件中的“新 Web 应用程序项目...”的每个项目中。

那么有人有这个问题吗？有什么修复吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-02T21:19:06.687

试试这个：

```
<jdoconfig xmlns="http://java.sun.com/xml/ns/jdo/jdoconfig"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/jdo/jdoconfig http://java.sun.com/xml/ns/jdo/jdoconfig_3_0.xsd"> 
```

根据此处的答案[Validating jdoconfig with wrong url](https://stackoverflow.com/questions/6042475/validating-jdoconfig-with-incorrect-url)

> xmlns 不是一个真正的文件/目录，更多的是一个命名空间，所以不应该存在！附加版本以获得真正的XSD文件，即[http://java.sun.com/xml/ns/jdo/jdoconfig_3_0.xsd](http://java.sun.com/xml/ns/jdo/jdoconfig_3_0.xsd)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-16T16:18:53.180

这里有几个问题。

语法问题是，您作为值提供的 URI`xsi:noNamespaceSchemaLocation`被重定向到[http://www.oracle.com/technetwork/java/index.html](http://www.oracle.com/technetwork/java/index.html)并返回一个 HTML 文档。您正在使用的 XSD 验证器尝试解析失败

```
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" 
          content="text/html; charset=utf-8" />
    <script type="text/javascript">
      var _U = "undefined";
      var g_HttpRelativeWebRoot = "/ocom/";
      var SSContributor = false;
... 
```

作为 XSD 模式文档，出于某种原因，它试图解释发生了什么错误的重点是`var_U = "undefined"`在它不期望看到字符数据的地方找到字符串。

然后是一些概念上的问题。

*   您的文档位于名为`http://java.sun.com/xml/ns/jdo/jdoconfig`. `noNamespaceSchemaLocation`如果你想验证你的文档，你到底为什么要将模式验证器指向一个没有目标命名空间的模式（确实如此）？鉴于（至少部分）您的文档元素是命名空间限定的，您将希望（正如 joncalhoun 已经建议的那样）使用`xsi:schemaLocation`并提供一*对*告诉验证器它可以在哪里找到您希望它知道的每个命名空间的模式文档关于。

*   可能曾经从 location 提供架构文档`http://java.sun.com/xml/ns/jdo/jdoconfig`，但由于它显然是为您的词汇表命名的标准命名空间，这实际上不太可能。大多数系统相当可靠地区分命名空间和模式文档，命名空间是抽象的和定义不明确的东西，模式文档通常是为给定命名空间定义特定 XSD 模式组件的 XML 文档。将架构文档的 URI 用作命名空间的名称并不违法，但这是不寻常的。

请注意，joncalhoun 为架构文档 ( `http://java.sun.com/xml/ns/jdo/jdoconfig_3_0.xsd`) 提供的 URL 实际上确实解析（在重定向到 之后`http://www.oracle.com/webfolder/technetwork/jsc/xml/ns/jdo/jdoconfig_3_0.xsd`）到架构文档，该文档指定`http://java.sun.com/xml/ns/jdo/jdoconfig`为其目标命名空间。（这意味着，即使您通过将其 URI 作为值来成功检索此架构文档`xsi:noNamespaceSchemaLocation`，您也会收到错误，因为它不是没有命名空间的元素和属性的架构文档。）

这使我认为您应该再次阅读 joncalhoun 的答案并再次仔细尝试。如果您尝试时它不起作用，我的钱说您尝试了类似但不完全符合他的建议的东西，或者它解决*了这个*问题但只是暴露了一些*其他*问题，这很容易被误认为是失败。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-04T17:01:01.250

一种解决方案是在 Eclipse 首选项中设置 XML 目录。

详细信息：
条目元素：URI
位置： `http://java.sun.com/xml/ns/jdo/jdoconfig_3_0.xsd`
URI： `http://java.sun.com/xml/ns/jdo/jdoconfig_3_0.xsd`
密钥类型：命名空间名称
密钥： `http://java.sun.com/xml/ns/jdo/jdoconfig`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-01T19:15:21.920

CM 提到的语法和概念问题是插件和谷歌设置的问题，两者都推荐，

```
xsi:noNamespaceSchemaLocation="http://java.sun.com/xml/ns/jdo/jdoconfig 
```

我没有专门使用 jdo，但我仍然得到这个命名空间的验证错误。直到最近，这个命名空间还不错。

我使用了 LuboM 的方法，它对我有用。LuboM 和 joncalhoun 都不是答案，因为它将我与 jdo 3.0 联系在一起

Oracle 将不得不提供修复程序。显然，他们的意图是解决跨 jdo 版本的命名空间问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-09T06:57:45.857

您可能已经尝试过这条路径来解决您的问题：

```
<?xml version="1.0" encoding="utf-8"?>
<jdoconfig xmlns="http://java.sun.com/xml/ns/jdo/jdoconfig"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:noNamespaceSchemaLocation="http://java.sun.com/xml/ns/jdo/jdoconfig"> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-10T16:42:41.647

这是我为解决它所做的：

```
<?xml version="1.0" encoding="utf-8"?>
<jdoconfig xmlns="http://java.sun.com/xml/ns/jdo/jdoconfig"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:noNamespaceSchemaLocation="http://java.sun.com/xml/ns/jdo/jdoconfig_3_0.xsd"> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-04-02T22:30:30.727

我遇到了同样的问题，并从 Eclipse 的验证中排除了这个 jdoconfig.xml 文件。即使您的 Eclipse 为它抛出错误，它也不会影响将项目正确部署到 GAE 的能力。

以下是如何仅排除 jdoconfig.xml 文件以消除该讨厌的错误：

右键单击您的`Eclipse Project, ->Properties->Validation->XML Validator`，单击“...”按钮以获取更多选项。

您应该看到包括组和排除组选项。单击排除组->添加规则...->文件夹或文件名，然后浏览到您的文件。

清理或重建您的项目。验证错误应该消失了。

这在 Eclipse Luna 中对我有用。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-04-07T10:14:01.420

我在这方面取得了成功：

```
Right Click Project -> Properties -> Validation -> XML Syntax 
```

1.  启用项目特定设置（如果需要）
2.  在验证文件下，对于未指定语法选择“警告”
3.  点击“确定”
4.  如果您要求验证文件，请单击“是”

您可以通过转到 对所有项目执行相同的操作`Windows -> Preferences`。

确保您正在验证文件（步骤 4）。

# javascript - Javascript：AMD（异步模块定义）中是否“需要”同步方法？

> ID：12654505
> 
> 赞同：7
> 
> 时间：2012-09-29T16:46:54.717
> 
> 标签：javascript, node.js, module, requirejs, amd

AMD（异步模块定义）中的“要求”是同步的吗？如果是这样，是什么让这个规范异步？如果我在我的代码中间有 require() （它还没有被加载），它会停止执行吗？谈论浏览器端。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T17:49:05.423

这里有两个不同的`synchronous`概念。第一个是“它会停止我的整个网页，然后坐下来等待文件。”。

答案是不。如果您有一个具有依赖关系的脚本，RequireJS 不会这样做。

如果你使用得当，它会使用一个承诺系统。这意味着如果您发送回调并定义对该文件的要求，则在加载所有必需的文件之前不会运行回调。

如果在这些必需文件之一中存在需求，则在加载*ITS*依赖项之前不会运行该回调。

最外层的回调（通常位于脚本底部的回调）不会运行，直到里面的所有内容都有。

这适用于承诺系统。值得了解 Promise 系统是如何工作的（在某种程度上类似于观察者模式）。它们旨在根据事件传递或链接，而不是让多个人按任何顺序收听。

```
var widget = new Widget(),  
    widgetLoaded = widget.load(url); // return a promise to let the program use the widget

widgetLoaded.then(function () { widget.move(35); })
            .then(function () { widget.setColour("Blue"); })
            .then(function () { widget.show(); }); 
```

这就像返回`this`，以便您可以链接函数调用，只是调用在`widget.load()`完成之前不会真正发生。

将`widget`实际控制何时发生这种情况，通过在小部件加载并且一切正常时保持其承诺，或者在出现问题时违反其承诺。

在大多数 Promise 系统中，`.then`或者不管他们怎么称呼它，要么接受两个函数（保留和破坏——在我的系统中，破坏总是可选的），或者他们接受一个对象`success`和`failure`——`$.ajax`这样做，然后让你预先确定你的想要在加载数据时处理数据，或者如果它失败 - 承诺。

因此，您的页面仍然 100% 异步工作（不会中断 UI），但它是 100% 同步的，因为所有模块都将以正确的顺序触发。

***您必须记住***的一件事：如果您的代码中有这些依赖项，那么您的脚本底部就不能有任何依赖项，等待运行，内联。它们必须全部锁定在您的回调中，或者锁定在等待您的回调调用的函数中。

这仅仅是因为它***是***一个异步进程，就实际处理而言，不会阻塞浏览器运行事件/JS、渲染页面等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T16:57:49.363

对于*requireJS*：

您必须将*回调*方法与所需模块一起传递给`.require()`，当资源成功加载时将触发该方法。所以，当然你应该/只能在回调中访问加载的 AMD 或 CommonJS 模块。

对于 NodeJS：

是的，`.require()`确实同步工作。NodeJS 使用 CommonJS 模块系统，而不是 AMD。

# objective-c - 使用 arc 的内存问题

> ID：12654508
> 
> 赞同：0
> 
> 时间：2012-09-29T16:47:26.100
> 
> 标签：objective-c, memory-management, memory-leaks, automatic-ref-counting, uiviewanimation

我是 Objective-C 编程的新手，我遇到了典型的内存问题。我必须做一个基于导航控制器的应用程序，并且在传递少量视图时（使用推送视图控制器），加载 100 个图像的动画。在模拟器中效果很好，但在手机上却不行……我打开了不同的动画，然后它就关闭了。我正在使用 arc 来避免这种情况，但它似乎不起作用。我也尝试禁用弧并手动释放 UIImageView 但它甚至很快崩溃。这是其中一个视图的示例：

```
 //.h
@interface Gegant_nou : UIViewController {

IBOutlet UIImageView *ImageViewGegant; 
}

@property (nonatomic, strong) UIImageView* ImageViewGegant;

//.m

- (void)viewDidLoad {

    [super viewDidLoad];

    UIBarButtonItem *rigthButton = [[UIBarButtonItem alloc] initWithTitle:@"Detalls" style:UIBarButtonItemStyleBordered target:self action:@selector(canviarDetalls)];
    self.navigationItem.rightBarButtonItem = rigthButton;
    [rigthButton release];

    ImageViewGegant.animationImages =@
        [[UIImage imageNamed:@"0001.png"],
        [UIImage imageNamed:@"0002.png"],
        . load all the images
        .
        [UIImage imageNamed:@"0099.png"],
        [UIImage imageNamed:@"0100.png"]];

    ImageViewGegant.animationDuration = 4;
    ImageViewGegant.animationRepeatCount = 0;
    [ImageViewGegant startAnimating];
    [self.view addSubview:ImageViewGegant];

    self.title = @"Gegant nou";

    [ImageViewGegant release];

}

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil{

    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)didReceiveMemoryWarning{
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];
    // Release any cached data, images, etc that aren't in use.

}

- (void)viewDidUnload{
    [super viewDidUnload];
    [ImageViewGegant release];
} 
```

知道为什么会发生吗？感谢你们对我的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T19:05:53.753

如果您提供一些崩溃日志或堆栈跟踪以提供有关问题所在的更多信息，那么为您提供帮助会更容易。

您完全确定问题与内存有关吗？由于您使用的是 ARC，除非您有部分代码库不使用 ARC，或者如果您使用 CoreGraphics 等 c 库，即使您使用 ARC，您仍然需要保留/释放。

如果你确实有说过度释放的内存问题并且你得到一个 EXC_BAD_ACCESS 崩溃，你可以尝试通过 Product -> Edit scheme.. -> Diagnostics 然后“Enable Zombie objects”在你的应用程序中启用僵尸。这有望提供有关导致问题的对象的更多信息。

在一个完全不同的主题上，我强烈建议你用驼峰写法编写所有实例变量。读起来很混乱，大多数开发人员会认为“ImageViewGegant”是一个类的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T19:57:30.820

问题解决了！发生的事情是我使用 UIImageNamed 加载动画，虽然我使用的是 ARC，但 UIImageNamed 加载图像但不释放它，所以它加载所有帧并很快填满内存。现在我没有那个记忆问题了。谢谢大家！

# scala - Scala：声明函数的两种方式之间的区别

> ID：12654513
> 
> 赞同：0
> 
> 时间：2012-09-29T16:47:44.560
> 
> 标签：scala, functional-programming

> **可能重复：**
> [Scala 中的柯里化函数背后的基本原理是什么？](https://stackoverflow.com/questions/12635695/whats-the-rationale-behind-curried-functions-in-scala)

我有两种不同的方法来声明一个函数：1）使用柯里化。2）使用函数作为参数。

这是我的代码：

```
def transform(f: Double => Double)(input: Double) = {
  f(input)
}                                                 

def transformVer2(f: Double => Double, input: Double) = {
  f(input)
}                                                 

transform(x=>x*x)(10)                             //> res8: Double = 100.0
transformVer2(x=>x*x, 10)                         //> res9: Double = 100.0 
```

我不知道上述两个函数声明的真正区别是什么。请告诉我。

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T17:39:07.063

前者使用柯里化，后者可能是你对 C、C++ 等语言更熟悉的东西。

柯里化是函数式编程语言中突出的东西。函数式编程语言高度重视函数和函数链的思想，所以像

```
def transform(f: Double => Double)(input: Double) 
```

可以看作是一个函数作为单个参数`Double => Double`并返回另一个函数，该函数将 a 作为单个参数`Double`并返回 a `Double`。

正如 Scala 中的编程所讨论的，函数柯里化也让我们做一些漂亮的事情，其中​​有两个是

1.  类型推断
2.  新的控制抽象

对于类型推断，请考虑类似`foldLeft`.

```
val myVector = Vector(1, 2, 3, 4)
myVector.foldLeft(0.0)(_ + _) 
```

`foldLeft`被柯里化了，我们将其指定`0.0`为初始值，让类型推断器知道我们希望最终结果为`Double`.

对于新的控制抽象，我们可以做类似的事情

```
def doWithFileAndClose(file: File)(func: () => Unit): Unit =
  try { func() } finally { file.close } 
```

这将像

```
doWithFileAndClose("somefile.txt") {
  /* do stuff */
} 
```

这利用了 Scala 将接受花括号代替括号的优势，这使得上面看起来就像熟悉的控制结构，例如`for`和`while`循环。

# php - php执行问题

> ID：12654516
> 
> 赞同：0
> 
> 时间：2012-09-29T16:47:55.523
> 
> 标签：php, asynchronous, exec, command-line-interface

> **可能重复：**
> [调用另一个 PHP 脚本并在另一个脚本完成之前将控制权返回给用户](https://stackoverflow.com/questions/5103528/call-another-php-script-and-return-control-to-user-before-the-other-script-compl)
> [如何从另一个 PHP 脚本异步运行 PHP 脚本？](https://stackoverflow.com/questions/5127658/how-to-run-a-php-script-asynchronously-from-a-another-php-script)

我在 PHP 中使用 exec() 时遇到了一些问题，但我不知道如何解决它。我想使用 exec() 在同一目录中“异步”执行另一个 php 脚本。我在浏览器中打开 a.php 来调用 b.php 但它不起作用。（本地主机是**Windows 7 上的 xampp**）

一个.php：

```
<?php
exec('php \b.php', $output, $r);
print_r($output);
print_r($r);
?> 
```

b.php：

```
#!/usr/bin/php
<?php
echo time();
?> 
```

浏览器中的输出

```
Array ( ) 1 
```

我是使用相关 PHP CLI 的超级初学者...我对此一无所知...谁能举一些简单的例子？比如a.php和b.php应该写什么。

如果您能给我一些指导或建议，非常感谢！

* * *

编辑：

我尝试了以下代码，它可以工作，但它不能“异步”运行......如何重定向输出？

在浏览器中打开 callexec.php。

调用exec.php

```
<?php
exec('C:\xampp\php\php.exe testexec.php');
?> 
```

testexec.php

```
<?php
echo "start: ",time(),"\n";
sleep(10);
echo "\n";
echo "end: ",time(),"\n";
?> 
```

再次感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T16:53:42.250

正如您已经告诉您的 shell-script 它是一个 php 脚本`#!/usr/bin/php`，您不需要为您的脚本调用 php，您可以像从命令行中的任何脚本一样调用它：

```
exec('b.php', $output, $r); 
```

顺便说一句，我假设您可以`b.php`毫无问题地从命令行调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T17:03:17.917

为什么要把事情复杂化？只需使用包含或要求？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T16:55:21.613

如果您在同一平台上有另一台服务器，则端口号可能存在​​问题。比如可以是oracle数据库服务器、mysql、Apache tomcat等。请确认不同服务器的端口号是否相同。

# c - ANSI C & WinAPI：如何从钩子程序中获取窗口句柄？

> ID：12654517
> 
> 赞同：1
> 
> 时间：2012-09-29T16:48:04.507
> 
> 标签：c, winapi

我正在编写一个非常简单的程序，它打印所选像素的颜色。这是我的代码：

```
#include <windows.h>
#include <stdio.h>
#include <stdlib.h>
#define UNICODE

LRESULT CALLBACK mouse_hook_low_level(int nCode, WPARAM wParam, LPARAM lParam)
{
    if(wParam == WM_MOUSEMOVE) {
        //Need to get a handle to the window!
        InvalidateRect(window, NULL, FALSE); 
        UpdateWindow(window);
    }
    return CallNextHookEx(NULL, nCode, wParam, lParam);
}

LRESULT CALLBACK window_process(HWND window, UINT message, WPARAM wParam, LPARAM lParam)
{
    HDC dc = GetDC(NULL);
    HDC hdc;
    HFONT font;
    PAINTSTRUCT ps;
    int r, g, b;
    POINT p;
    RECT background_rect, color_rect;
    wchar_t buffer[256];

    switch(message) {
        case WM_PAINT:
            GetCursorPos(&p);
            r = GetRValue(GetPixel(dc, p.x, p.y));
            g = GetGValue(GetPixel(dc, p.x, p.y));
            b = GetBValue(GetPixel(dc, p.x, p.y));
            hdc = BeginPaint(window, &ps);
            background_rect.left = 0;
            background_rect.right = 199;
            background_rect.top = 0;
            background_rect.bottom = 99;
            FillRect(hdc, &background_rect, (HBRUSH)(COLOR_WINDOW+1));
            font = CreateFont(
                14,
                0,
                0,
                0,
                FW_DONTCARE,
                FALSE,
                FALSE,
                FALSE,
                DEFAULT_CHARSET,
                OUT_OUTLINE_PRECIS,
                CLIP_DEFAULT_PRECIS,
                CLEARTYPE_QUALITY,
                VARIABLE_PITCH,
                TEXT("Times New Roman")
            );
            SelectObject(hdc, font);
            swprintf_s(buffer, 256, L"Coordinates: (%d, %d)", p.x, p.y);
            TextOut(hdc, 70, 10, buffer, wcslen(buffer));
            swprintf_s(buffer, 256, L"RGB: (%d, %d, %d)", r, g, b);
            TextOut(hdc, 70, 40, buffer,  wcslen(buffer));
            color_rect.left = 10;
            color_rect.right = 60;
            color_rect.top = 10;
            color_rect.bottom = 60;
            FillRect(hdc, &color_rect, (HBRUSH)CreateSolidBrush(RGB(r, g, b)));
            EndPaint(window, &ps);
            break;
        case WM_CLOSE:
            DestroyWindow(window);
            break;
        case WM_DESTROY:
            PostQuitMessage(0);
            break;
        default:
            ReleaseDC(window, hdc);
            return DefWindowProc(window, message, wParam, lParam);
    }
    ReleaseDC(window, hdc);
    return 0;
}

int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nCmdShow)
{
    LPCWSTR class_name = L"name";
    MSG message;
    WNDCLASSEX window_class;
    HWND window;
    HHOOK MouseHook;

    window_class.cbSize = sizeof(WNDCLASSEX);
    window_class.style = CS_HREDRAW | CS_VREDRAW;
    window_class.lpfnWndProc = window_process;
    window_class.cbClsExtra = 0;
    window_class.cbWndExtra = 0;
    window_class.hIcon = LoadIcon(NULL, IDI_APPLICATION);
    window_class.hCursor = LoadCursor(NULL, IDC_ARROW);
    window_class.hbrBackground = (HBRUSH)GetStockObject(WHITE_BRUSH);
    window_class.lpszMenuName = NULL;
    window_class.lpszClassName = class_name;
    window_class.hInstance = hInstance;
    window_class.hIconSm = LoadIcon(NULL, IDI_APPLICATION);
    RegisterClassEx(&window_class);
    window = CreateWindow(
        class_name,
        L"Pixel color",
        WS_OVERLAPPED | WS_CAPTION | WS_SYSMENU,
        CW_USEDEFAULT,
        CW_USEDEFAULT,
        200,
        100,
        NULL,
        NULL,
        hInstance,
        NULL
    );
    ShowWindow(window, SW_SHOWNORMAL);
    MouseHook = SetWindowsHookEx(WH_MOUSE_LL, mouse_hook_low_level, hInstance, 0);
    while(GetMessage(&message, NULL, 0, 0)) {
        TranslateMessage(&message);
        DispatchMessage(&message);
    }
    UnhookWindowsHookEx(MouseHook);
    return message.wParam;
} 
```

问题是：如何在第 9 行的钩子过程中获取窗口句柄以进一步更新窗口？关于我的代码，您一般能说些什么？我是一名学生，有一点 C 编程经验，你能指出我的错误吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T16:53:01.093

首先，尝试[WindowFromPoint](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633558%28v=vs.85%29.aspx)。如果它没有找到一个窗口，即它不是你的进程窗口，则枚举所有顶层窗口及其所有子窗口，在鼠标指针下找到一个最顶层窗口。

# nginx - 为什么 NGINX 会忽略我的查询字符串？

> ID：12654521
> 
> 赞同：9
> 
> 时间：2012-09-29T16:48:38.927
> 
> 标签：nginx, query-string, php

我最近从 APACHE 切换到 NGINX。然而，在 NGINX 开始忽略我的查询字符串的过程中。例如，我像这样使用分页：

```
http://example.com/index.php?page=5 
```

`example.com`这就像查询字符串不存在一样加载。

这是配置（**由 Nelson 建议编辑**）：

**/etc/nginx/nginx.conf：**

```
user www-data;
worker_processes 4;
pid /var/run/nginx.pid;

events {
        worker_connections 768;
        # multi_accept on;
}

http {

    ##
    # Basic Settings
    ##

    sendfile on;
    tcp_nopush on;
    tcp_nodelay on;
    keepalive_timeout 65;
    types_hash_max_size 2048;
    # server_tokens off;

    # server_names_hash_bucket_size 64;
    # server_name_in_redirect off;

    include /etc/nginx/mime.types;
    default_type application/octet-stream;

    ##
    # Logging Settings
    ##

    access_log /var/log/nginx/access.log;
    error_log /var/log/nginx/error.log;

    ##
    # Gzip Settings
    ##

    gzip on;
    gzip_disable "msie6";

    # gzip_vary on;

    # gzip_vary on;
    # gzip_proxied any;
    # gzip_comp_level 6;
    # gzip_buffers 16 8k;
    # gzip_http_version 1.1;
    # gzip_types text/plain text/css application/json application/x-javascript text/xml application/xml application/xml+rss text/javascript;

    ##
    # nginx-naxsi config
    ##
    # Uncomment it if you installed nginx-naxsi
    ##

    #include /etc/nginx/naxsi_core.rules;

    ##
    # nginx-passenger config
    ##
    # Uncomment it if you installed nginx-passenger
    ##

    #passenger_root /usr;
    #passenger_ruby /usr/bin/ruby;

    ##
    # Virtual Host Configs
    ##

    include /etc/nginx/conf.d/*.conf;
    include /etc/nginx/sites-enabled/*;
}

#mail {
#       # See sample authentication script at:
#       # http://wiki.nginx.org/ImapAuthenticateWithApachePhpScript
#
#       # auth_http localhost/auth.php;
#       # pop3_capabilities "TOP" "USER";
#       # imap_capabilities "IMAP4rev1" "UIDPLUS";
#
#       server {
#               listen     localhost:110;
#               protocol   pop3;
#               proxy      on;
#       }
#
#       server {
#               listen     localhost:143;
#               protocol   imap;
#               proxy      on;
#       }
#} 
```

**/etc/nginx/sites-available/默认：**

```
server {
        root    /usr/share/nginx/www/;
        index   index.php;

        # Make site accessible from http://localhost/
        server_name localhost;

        # Pass PHP scripts to PHP-FPM
        location ~ \.php {
                include /etc/nginx/fastcgi_params;
                fastcgi_pass 127.0.0.1:9000;
        }

        client_max_body_size 8M;
} 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2014-01-31T16:02:26.147

我遇到了同样的问题。我在我的 nginx 虚拟主机文件中更改了 location 部分，如下所示，它对我来说很好。

```
location / {
   # try_files $uri $uri/ /index.php;
   try_files $uri $uri/ /index.php$is_args$args;
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-29T16:54:09.270

只需将其用作 Location ：

```
location ~ \.php {
    include /etc/nginx/fastcgi_params;
    fastcgi_pass 127.0.0.1:9000;
} 
```

更具体地说，您的以下两行正在删除查询字符串：

```
fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
fastcgi_split_path_info ^(.+\.php)(/.+)$; 
```

# iphone - NSArrayM 在枚举时发生了突变

> ID：12654522
> 
> 赞同：0
> 
> 时间：2012-09-29T16:48:40.710
> 
> 标签：iphone, xcode, sigabrt, dispatch, mutated

应用程序因错误而崩溃：

`*** Terminating app due to uncaught exception 'NSGenericException', reason: '*** Collection <__NSArrayM: 0x21481c10> was mutated while being enumerated.'`

**仅当我在加载注释时移过 mapview 时才会发生这种情况。如果我不触摸地图，则不会发生错误。**

```
- (void) startloading
{
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0),
                   ^{

                       [self loadPList];

                   });
} 
```

我的代码是：

```
- (void) loadPList
{

@autoreleasepool {

    NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);
    NSString *path = [[documentPaths lastObject] stringByAppendingPathComponent:@"test.plist"];

    NSDictionary *dict = [NSDictionary dictionaryWithContentsOfFile:path];

    NSMutableArray *annotations = [[NSMutableArray alloc]init];

            NSMutableArray * annotationsToRemove = [ mapView.annotations mutableCopy ] ;
            [ annotationsToRemove removeObject:mapView.userLocation ] ;
            [ mapView removeAnnotations:annotationsToRemove ] ;

        if ([[NSUserDefaults standardUserDefaults] boolForKey:@"blackKey"])
        {

            NSArray *ann = [dict objectForKey:@"Black"];

            for(int i = 0; i < [ann count]; i++) {

                NSString *coordinates = [[ann objectAtIndex:i] objectForKey:@"Coordinates"];

                double realLatitude = [[[coordinates componentsSeparatedByString:@","] objectAtIndex:1] doubleValue];
                double realLongitude = [[[coordinates componentsSeparatedByString:@","] objectAtIndex:0] doubleValue];

                MyAnnotation *myAnnotation = [[MyAnnotation alloc] init];
                CLLocationCoordinate2D theCoordinate;
                theCoordinate.latitude = realLatitude;
                theCoordinate.longitude = realLongitude;

                myAnnotation.coordinate=CLLocationCoordinate2DMake(realLatitude,realLongitude);        
                myAnnotation.title = [[ann objectAtIndex:i] objectForKey:@"Name"];
                myAnnotation.subtitle = [[ann objectAtIndex:i] objectForKey:@"Address"];
                myAnnotation.icon = [[ann objectAtIndex:0] objectForKey:@"Icon"];

                [mapView addAnnotation:myAnnotation]; // SIGNAL SIGABRT
                [annotations addObject:myAnnotation];

            }

        }   

        if ([[NSUserDefaults standardUserDefaults] boolForKey:@"blueyellowKey"])
        {

            NSArray *ann = [dict objectForKey:@"BlueYellow"];

            for(int i = 0; i < [ann count]; i++) {

                NSString *coordinates = [[ann objectAtIndex:i] objectForKey:@"Coordinates"];

                double realLatitude = [[[coordinates componentsSeparatedByString:@","] objectAtIndex:1] doubleValue];
                double realLongitude = [[[coordinates componentsSeparatedByString:@","] objectAtIndex:0] doubleValue];

                MyAnnotation *myAnnotation = [[MyAnnotation alloc] init];
                CLLocationCoordinate2D theCoordinate;
                theCoordinate.latitude = realLatitude;
                theCoordinate.longitude = realLongitude;

                myAnnotation.coordinate=CLLocationCoordinate2DMake(realLatitude,realLongitude);        
                myAnnotation.title = [[ann objectAtIndex:i] objectForKey:@"Name"];
                myAnnotation.subtitle = [[ann objectAtIndex:i] objectForKey:@"Address"];
                myAnnotation.icon = [[ann objectAtIndex:0] objectForKey:@"Icon"];

                [mapView addAnnotation:myAnnotation];
                [annotations addObject:myAnnotation];              

            }

        }   

   }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T18:38:44.103

我认为您应该将`loadPlist`方法更改为此，然后`[self loadPlist]`调用它来调用它：

```
- (void) loadPList
{
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);
        NSString *path = [[documentPaths lastObject] stringByAppendingPathComponent:@"test.plist"];
        NSDictionary *dict = [NSDictionary dictionaryWithContentsOfFile:path];

        //ALL THIS CODE FROM HERE ON OUT IS NOT THREAD SAFE! YOU ARE ACCESSING THE UI AND MUST PERFORM IT ON THE MAIN THREAD!
        dispatch_async(dispatch_get_main_queue(), ^{
            NSMutableArray *annotations = [[NSMutableArray alloc]init];
            NSMutableArray * annotationsToRemove = [ mapView.annotations mutableCopy ] ;
            [ annotationsToRemove removeObject:mapView.userLocation ] ;
            [ mapView removeAnnotations:annotationsToRemove ] ;

            if ([[NSUserDefaults standardUserDefaults] boolForKey:@"blackKey"])
            {
                NSArray *ann = [dict objectForKey:@"Black"];
                for(int i = 0; i < [ann count]; i++) {
                    NSString *coordinates = [[ann objectAtIndex:i] objectForKey:@"Coordinates"];

                    double realLatitude = [[[coordinates componentsSeparatedByString:@","] objectAtIndex:1] doubleValue];
                    double realLongitude = [[[coordinates componentsSeparatedByString:@","] objectAtIndex:0] doubleValue];

                    MyAnnotation *myAnnotation = [[MyAnnotation alloc] init];
                    CLLocationCoordinate2D theCoordinate;
                    theCoordinate.latitude = realLatitude;
                    theCoordinate.longitude = realLongitude;

                    myAnnotation.coordinate=CLLocationCoordinate2DMake(realLatitude,realLongitude);        
                    myAnnotation.title = [[ann objectAtIndex:i] objectForKey:@"Name"];
                    myAnnotation.subtitle = [[ann objectAtIndex:i] objectForKey:@"Address"];
                    myAnnotation.icon = [[ann objectAtIndex:0] objectForKey:@"Icon"];

                    [mapView addAnnotation:myAnnotation]; // SIGNAL SIGABRT
                    [annotations addObject:myAnnotation];
                }
            }   

            if ([[NSUserDefaults standardUserDefaults] boolForKey:@"blueyellowKey"])
            {
                NSArray *ann = [dict objectForKey:@"BlueYellow"];

                for(int i = 0; i < [ann count]; i++) 
                {
                    NSString *coordinates = [[ann objectAtIndex:i] objectForKey:@"Coordinates"];

                    double realLatitude = [[[coordinates componentsSeparatedByString:@","] objectAtIndex:1] doubleValue];
                    double realLongitude = [[[coordinates componentsSeparatedByString:@","] objectAtIndex:0] doubleValue];

                    MyAnnotation *myAnnotation = [[MyAnnotation alloc] init];
                    CLLocationCoordinate2D theCoordinate;
                    theCoordinate.latitude = realLatitude;
                    theCoordinate.longitude = realLongitude;

                    myAnnotation.coordinate=CLLocationCoordinate2DMake(realLatitude,realLongitude);        
                    myAnnotation.title = [[ann objectAtIndex:i] objectForKey:@"Name"];
                    myAnnotation.subtitle = [[ann objectAtIndex:i] objectForKey:@"Address"];
                    myAnnotation.icon = [[ann objectAtIndex:0] objectForKey:@"Icon"];

                    [mapView addAnnotation:myAnnotation];
                    [annotations addObject:myAnnotation];              
                }
            }   
        }
    });
 } 
```

这会在后台执行读取注释的 IO 工作，然后将 UI 工作传递回主线程。希望这可以帮助！

# eclipse - eclipse工作区缺少项目删除文件

> ID：12654526
> 
> 赞同：0
> 
> 时间：2012-09-29T16:49:35.273
> 
> 标签：eclipse

我正在使用 Eclipse 建模工具（版本：Indigo Service Release 2 Build id：20120216-1857）。

我在工作区中的一个项目已从 Package Explorer（所有项目的视图）中消失。或者更好地说，它在列表中，但它似乎已关闭，当我尝试打开它时，我收到此错误消息：“'xxxxx' 的项目描述文件 (.project) 丢失。此文件包含有关以下内容的重要信息项目。在恢复此文件之前，该项目将无法正常运行。”

我真正担心的是：项目文件夹在文件系统上也不可用。

我不知道为什么或如何......我能记得的唯一“不同”是，当该项目打开时，我已将工作区切换到新的工作区。

任何想法恢复文件夹/项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T20:11:49.723

也许你不小心移动了它？

检查另一个工作区（在文件系统上）或者该项目是否在另一个项目中。您应该始终在 VCS 中进行备份或/和签入。

如果该位仍然存在，则恢复工具可以提供帮助。祝你好运。

# android - 用自定义错误消息替换异常日志

> ID：12654527
> 
> 赞同：0
> 
> 时间：2012-09-29T16:49:37.427
> 
> 标签：android, exception, toast

我正在使用 Android 的 httpclient 连接到域，如下所示：

```
try {
            URL url = new URL("example.com");
            HttpURLConnection conn = (HttpURLConnection)url.openConnection();
            read(conn.getInputStream());
        } catch (Exception e) {
            e.printStackTrace();
        } 
```

现在如果我删除此行可以吗：

```
e.printStackTrace(); 
```

并将其替换为：

```
Toast toast = Toast.makeText(getApplicationContext(), "Could not connect to domain.", Toast.LENGTH_LONG);
toast.show(); 
```

还是我必须对“e”变量做些什么？在这种情况下，它将是：

```
catch (Exception e) {
    e.printStackTrace();
    Toast toast = Toast.makeText(getApplicationContext(), "Could not connect to domain.", Toast.LENGTH_LONG);
    toast.show();
        } 
```

如果我执行 e.printStackTrace()，它会打印到哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T16:54:29.540

我建议只捕获抛出的异常类型（在这种情况下我认为是 IOException）。其他例外可能是完全不相关的问题。

是的，可以用 toast 替换 printStackTrace。额外提示：只需打电话

```
Toast.makeText(getApplicationContext(), "Could not connect to domain.", Toast.LENGTH_LONG).show(); 
```

您可以在一行中完成所有操作。:)

`e.printStackTrace()`将打印到标准 logcat 跟踪，您可以使用`adb logcat`命令查看（adb 是 Android SDK 的一部分）。

# cuda - 了解 CUDA 分析器中的计数器

> ID：12654531
> 
> 赞同：1
> 
> 时间：2012-09-29T16:50:23.330
> 
> 标签：cuda

我在理解 CUDA 分析器中的 sm_cta 计数器时遇到了困难。我正在启动 128 个块，并且我的启动绑定配置是，`__launch_bounds(192,8)`但探查器显示 133 用于特定运行。我对应用程序进行了多次分析，但每次都在 133 左右。这个计数器表示什么？使用 Tesla C2075，Linux 32 位。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T16:30:56.407

NVIDIA GPU 在芯片的多个位置具有性能监控单元。在 Fermi 设备上，sm_cta_launched 信号由 GPC 监视器而不是 SM 监视器收集。Fermi GPC 性能监视器仅限于观察每个 GPC 1 个 SM。C2075 有 4 个 GPC 和 14 个 SM。C2075 可以配置 2 个 GPC 和 4 个 SM 和 2 个 GPC 和 3 个 SM。CUDA 分析器将为每个 GPC 收集 1 个 SM 的计数器，并将结果乘以 GPC 中的 SM 数量。最终值可以高于或低于预期值。例如：

```
GPC     SMs     Counter Value
0       4       8       32
1       4       8       32
2       3       11      33
3       3       12      36
---------------------------
                       133 
```

在文档[Compute Command Line Profiler](http://developer.download.nvidia.com/compute/DevZone/docs/html/C/doc/Compute_Command_Line_Profiler_User_Guide.pdf)中，此信息在 countermodeaggregate 选项下指定。

> 反模式聚合
> 
> 如果选择此选项，则将输出聚合计数器值。对于 SM 计数器，计数器值是来自所有 SM 的计数器值的总和。对于 l1*、tex*、sm_cta_launched、uncached_global_load_transaction 和 global_store_transaction 计数器，从每个 GPC 收集 1 个 SM 的计数器值，并对所有 SM 进行推断。仅具有计算能力 2.0 或更高版本的 CUDA 设备支持此选项。

使用 warps_launched 可以获得更准确的值，该值是使用以下公式为每个 SM 收集的：

```
thread_blocks_launched = warps_launched
    / ((threadblocksizeX * threadblocksizeY * threadblocksizeZ) + WARP_SIZE - 1)
    / WARP_SIZE

    where WARP_SIZE is 32 on all current devices. 
```

注意：这种方法不适用于动态并行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T10:36:49.023

一些 CUDA 库函数也在内部使用内核实现，因此执行的块总数略高于您自己显式启动的块数也就不足为奇了。

# assembly - 在汇编中使用 rdtsc 函数

> ID：12654533
> 
> 赞同：3
> 
> 时间：2012-09-29T16:50:33.567
> 
> 标签：assembly, profiling, rdtsc

我正在尝试使用 Ubuntu 12.04 分析 x86 汇编程序。我想使用 rdtsc 功能。问题是，根据评论，我应该得到 rdx 中的周期数，但是使用以下代码，我得到的数字太高：

```
SECTION .bss

SECTION .dat

SECTION .text

global main         

main:           
nop

cpuid
rdtsc
shl rdx, 32
or rdx, rax
mov r8, rdx

xor esi,esi
mov esi,19        ; instructions to be monitored

cpuid
rdtsc
shl rdx, 32
or rdx, rax
sub rdx, r8 
```

在调试器中运行它，我在 sub 指令之后的寄存器上得到以下结果：

```
rax     0xd88102bc
rbx     0x0
rcx     0xf0
rdx     0x44f3914a0
rsi     0x13
rdi     0x1
rbp     0x0
rsp     0x7fffffffdf38
r8      0x11828947ee1c 
```

我无法弄清楚为什么 rdx 中的周期数对于如此简单的指令来说如此之高。rcx 中的数字是否正确？是不是也太高了？

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-29T17:09:39.550

我不确定发生了什么，但是当您从汇编程序调用 C 函数时，您通常应该在它们前面加上一个前导下划线，例如`call _clock`. 这是因为 C 编译器会将此前缀添加到它生成的所有函数中。

此外，由于您使用的是 64 位架构，因此 64 位结果应该`rax`以.`eax``ebx`

最后我建议而不是使用`clock`你应该使用汇编指令`rdtsc`。这将返回 64 位结果`edx:eax`。它是相对的而不是绝对的，并且以周期而不是几分之一秒为单位进行测量，但它应该正是您进行分析所需要的。

例子：

```
cpuid
rdtsc
shl rdx, 32
or rdx, rax
mov r8, rdx
<expensive assembler code>
cpuid
rdtsc
shl rdx, 32
or rdx, rax
sub rdx, r8 
```

这将留下在 中经过的刻度数`rdx`。这些`cpuid`指令是为了防止处理器围绕分析点重新排序指令。

# android - 单击主页按钮时应用程序仍在后台运行如何解决？

> ID：12654534
> 
> 赞同：-1
> 
> 时间：2012-09-29T16:51:09.213
> 
> 标签：android

> **可能重复：**
> [当我退出应用程序时，声音在后台运行](https://stackoverflow.com/questions/12652133/when-i-exit-an-application-the-sound-runs-on-the-background)

当我单击主页按钮或返回按钮时，音频/声音仍在运行，音频的来源是 swf(flash) 那么我该如何解决？我听到类似 onpause 之类的声音...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T17:11:38.093

你没听错:-) Activity 类提供了 on`onPause()`方法，一旦你的 Activity 暂停就会调用该方法，这是它不再可见的情况。所以你可以覆盖`onPause()`并暂停你的声音。要在 Activity 再次可见时恢复它，请覆盖`onResume()`. 还可以查看[Activity 生命周期](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)，每个 Android 开发人员都应该知道这一点。

# asp.net - 在 ASP.NET MVC 中以编程方式为每个用户设置 cookie 域

> ID：12654536
> 
> 赞同：1
> 
> 时间：2012-09-29T16:51:39.753
> 
> 标签：asp.net, asp.net-mvc, cookies

我有一个 ASP.NET MVC Web 应用程序，它需要能够为每个用户设置 auth cookie 的域，而不是在整个 Web 应用程序的 web.config 中设置它。

这是我目前设置的：

```
<httpCookies domain=".mydomain.com" /> 
```

**方案 1**

当用户第一次访问该站点时，他们位于 www.mydomain.com。如果他们登录到我们网站的主要部分，他们将留在 www.mydomain.com，登录将调用：

```
FormsAuthentication.SetAuthCookie(user.Id + "|" 
                + user.EmailAddress + "|" 
                + user.Role.ToString()
            , true); 
```

...并且 cookie 将被正确设置，因为 www.mydomain.com 与 .mydomain.com 的 cookie 域匹配，一切都很好。

**方案 2**

用户还可以注册我们网站的自己的部分，即 companyname.mydomain.com。在这种情况下，如果他们从 www.mydomain.com 或 companyname.mydomain.com 登录，cookie 将被正确设置，同样，它与 .mydomain.com 的 cookie 域匹配。

**场景 3（问题）**

但是，用户可以选择将他们自己的域名指向我们的站点，并让它反映他们在访问 companyname.mydomain.com 时所看到的内容。因此，假设他们注册了域名 companyname.com，将其 A 记录指向我们的服务器，然后在我们的网站上指定他们希望他们的 url 是 companyname.com 而不是 companyname.mydomain.com。他们去 companyname.com，它显示了我们网站中他们部分的登录页面。现在他们尝试登录，当然，它不起作用，因为 companyname.com 与我们的 .mydomain.com cookie 域不匹配。

为什么我们不在 web.config 中完全设置 httpCookies 域？因为如果他们在 www.mydomain.com 上并尝试登录 companyname.mydomain.com，它将失败，因为 cookie 将用于 www.mydomain.com。

我们需要某种方式说，嘿，这个用户的请求来自 mydomain.com 以外的域，将这个用户的 FormsAuthentication cookie 的域设置为他们的域名而不是 .mydomain.com。

有任何想法吗？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T22:09:59.380

我意识到这种方法行不通，因为由于安全隐患，您无法为您不在的域设置 cookie。

相反，我现在要做的是尝试登录，然后检查我们必须重定向到的域是否是我们当前所在的域。如果是这样，那么我们设置身份验证票并重定向到安全部分。如果我们不在要重定向到的域上，我们会从 currentdomain.com/validatelogin 重定向到 newdomain.com/validatelogin，然后将运行相同的检查，是的，我们在我们所在的域上重定向到，所以设置 auth cookie 然后我们就走了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T17:41:37.587

您可以检索 auth cookie并`GetAuthCookie`手动设置域名：

```
HttpCookie authcookie = FormsAuthentication.GetAuthCookie(userName, False);
authcookie.Domain = "companyname.mydomain.com";
HttpResponse.AppendCookie(authcookie); 
```

# ruby-on-rails - 将 Appointment.id 传递给 booking.appointment_id rails

> ID：12654539
> 
> 赞同：0
> 
> 时间：2012-09-29T16:51:52.000
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, parameter-passing

我有一个约会对象和一个预订对象。Bookings 属于 Appointments 和 Appointments has_many bookings。

我想在创建时将约会 ID 传递给 bookings.appointment_id。我怎样才能做到这一点？

*我已根据 jordanandree 的建议编辑了我的代码。现在我收到以下错误：

```
NoMethodError in BookingsController#new
undefined method `bookings' for nil:NilClass 
```

在我的主页视图中，我有：

```
<% @appointments.each do |appointment| %>
    <%= link_to "new Booking", new_appointment_booking_path(appointment)%>
<%end%> 
```

预订控制器：

```
def new
    @booking = @appointment.bookings.new 
    ...

 def create
     @booking = @appointment.bookings.new(params[:booking])
    ... 
```

路线

```
resources :appointments do
    resources :bookings
 end 
```

非常感谢您的帮助。

耙路线：

```
 POST   /appointments/:appointment_id/bookings(.:format)  bookings#create 
   GET    /appointments/:appointment_id/bookings/new(.:format)  bookings#new
   GET    /appointments/:appointment_id/bookings/:id/edit(.:format) bookings#edit 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T17:06:28.577

Rails 关联允许您基于现有记录创建记录。您当前所拥有的对于从表单传递到控制器的参数来说有点矫枉过正。

例如，您可以更改`create`方法以遵循您为 Booking 和 Appointment 模型声明的相同关联模式：

```
@booking = @appointment.bookings.new(params[:booking]) 
```

这将获取已经存在的`@appointment`记录的 id 并将其设置在新的`@booking`实例变量上。

另外，我会看看[嵌套资源路由](http://guides.rubyonrails.org/routing.html#nested-resources)。不确定您的路线目前对于这两个模型是什么样的，但它可能看起来像这样：

```
resources :appointments do
  resources :bookings
end 
```

这将为您拥有的表单提供更简洁的方法`new_booking_path`。它会变成`new_appointment_booking_path(@appointment)`. 这会将约会的 ID 传递给您的预订控制器，您可以在其中为约会创建关联的记录。

# c++ - 如何从写入文件中的 UTF-8 编码的 URDU 字符串中获取单个字符？

> ID：12654540
> 
> 赞同：1
> 
> 时间：2012-09-29T16:51:59.493
> 
> 标签：c++, visual-c++, wofstream, wifstream

我正在研究乌尔都语印地语翻译/音译。我的目标是将乌尔都语句子翻译成印地语，反之亦然，我正在使用 Visual c++ 2010 软件和 c++ 语言。我在保存为 UTF-8 格式的文本文件中写了一个乌尔都语句子。现在我想从该文件中一个一个地获取单个字符，以便我可以处理它以将其转换为等效的印地语字符。当我尝试从输入文件中获取单个字符并将该单个字符写入输出文件时，我在输出文件中得到了一些不知名的丑陋字符。请帮助我正确的代码。我的代码如下

```
#include<iostream>
#include<fstream>
#include<cwchar>
#include<cstdlib>
using namespace std;
void main()
{
wchar_t arry[50];
wifstream inputfile("input.dat",ios::in);
wofstream outputfile("output.dat");

if(!inputfile)
{
    cerr<<"File not open"<<endl;
    exit(1);
}

while (!inputfile.eof())         // i am using this while just to 
                                     // make sure copy-paste operation of
                                     // written urdu text from one file to
                                     // another when i try to pick only one character
                                     // from file, it does not work. 

{   inputfile>>arry;   }
    int i=0;
    while(arry[i] != '\0')           // i want to get urdu character placed at 
                                     // each-index so that i can work on it to convert
                                     // it into its equivalent hindi character
{ outputfile<<arry[i]<<endl; 
      i++; }
     inputfile.close();
 outputfile.close();
cout<<"Hello world"<<endl;
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T17:17:16.297

假设您在 Windows 上，获取“有用”字符的最简单方法是读取文件的较大块（例如一行或整个文件），然后使用[MultiByteToWideChar](http://msdn.microsoft.com/en-us/library/windows/desktop/dd374130%28v=vs.85%29.aspx)函数将其转换为 UTF-16。使用“伪”代码页 CP_UTF8。在许多情况下，不需要解码 UTF-16，但我不知道您所指的语言；如果您期望非 BOM 字符（代码高于 65535），您可能需要考虑解码 UTF-16（或自己解码 UTF-8）以避免处理 2 字字符。

如果您愿意，也可以编写自己的 UTF-8 解码器。这并不复杂，只需要一些位杂耍来从输入字节中提取正确的位并将它们组装成最终的 unicode 值。

提示：Windows 也有一个[NormalizeString()](http://msdn.microsoft.com/en-us/library/windows/desktop/dd319093%28v=vs.85%29.aspx)函数，您可以使用它来确保文件中的字符是您所期望的。这可用于将在 Unicode 中具有多种表示形式的字符转换为其“规范”表示形式。

编辑：如果您阅读了[UTF-8](http://en.wikipedia.org/wiki/UTF-8)编码，您可以很容易地看到您可以读取第一个字节，计算出您需要多少字节，也读取这些，并将整个内容传递给 MultiByteToWideChar 或您自己的解码器（虽然您自己的解码器当然可以从文件中读取）。这样你就可以真正做到“一次读取一个字符”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T16:56:05.347

'w' 类不读写 UTF-8。他们读写 UTF-16。如果您的文件是 UTF-8 格式，则使用此代码读取它会产生乱码。

您需要将其作为字节读取，然后进行转换，或者首先将其写入 UTF-16。

# javascript - 将多个 XML 节点显示为 HTML

> ID：12654542
> 
> 赞同：1
> 
> 时间：2012-09-29T16:52:16.023
> 
> 标签：javascript, html, xml, ajax

我正在尝试显示特定标签的所有节点，到目前为止，它确实过滤了我想要的数据，但只显示了一个节点。有人可以帮我吗？

这是 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<USA>
<NY>
  <Cell>NY Store 1</Cell>
   <Cell>NY Store 2</Cell>
  <Cell>NY Store 3</Cell>
</NY>
<CA>
  <Cell>CA Store 1</Cell>
   <Cell>CA Store 2</Cell>
  <Cell>CA Store 3</Cell> 
</CA>
</USA> 
```

这是脚本：

```
<script>
function loadXMLDoc()
{
    var xmlhttp;
    var txt,x,i;
    if (window.XMLHttpRequest)
    {// code for IE7+, Firefox, Chrome, Opera, Safari
    xmlhttp=new XMLHttpRequest();
    }
    else
    {// code for IE6, IE5
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.onreadystatechange=function()
    {
    if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    xmlDoc=xmlhttp.responseXML;
    txt="";
    x=xmlDoc.getElementsByTagName("CA");
    for (i=0;i<x.length;i++)
    {
    xx=x[i].getElementsByTagName("Cell");
    }
    try
    {
    txt=txt + xx[0].childNodes[0].nodeValue + "<br />";
    }
    catch (er)
    {
    }
    document.getElementById("result").innerHTML=txt;
    }
    }
    xmlhttp.open("GET","stores.xml",true);
    xmlhttp.send();
}
</script> 
```

这是HTML：

```
<button type="button" onclick="loadXMLDoc()">California</button>
<div id="result">Please select your state</div> 
```

正如我所说，它的文字很好，但它只显示了加利福尼亚州的一个元素。有任何想法吗？先谢谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T17:03:55.530

xx 也是一个数组，因此您需要在 x 循环中再添加一个循环。

try catch 需要在这个循环中。

我不是很擅长 javascript，但如果你的语法是正确的。所以，我认为这可能有效（虽然我没有测试过）：

```
for (i=0;i<x.length;i++)
{
    xx=x[i].getElementsByTagName("Cell");
    for(j=0;j<xx.length;j++) {
       try {
          txt=txt + xx[j].childNodes[0].nodeValue + "<br />";
       }
       catch(er) {

       }
    }
}

document.getElementById("result").innerHTML=txt; 
```

# python - 我应该使用什么 Python Web 框架与 GWT 一起从 Python 后端流式传输 KML？

> ID：12654543
> 
> 赞同：1
> 
> 时间：2012-09-29T16:52:15.717
> 
> 标签：python, google-app-engine, gwt, web-applications

我有一个用 Python 2.7 编写的长时间运行的进程，我想在生成 KML 文件时将 KML 文件异步发送到我的 GWT 应用程序。

我一直在尝试确定我可以使用哪个 Python Web 框架作为 Python 进程的后端，这可能允许 Web 应用程序托管在 Google AppEngine 上。

我能够使用 Cherrypy 编写一个简单的 python 网络服务器，它使用 JSON 从后端使用 http 请求将 kml 发送到 GWT；但是，我希望文件在生成时发送到 GWT，因为每个文件之间可能需要几分钟。实现这一目标的相对简单但有效的方法是什么？（彗星？长轮询？Websockets？）

在研究了更多的 python web 框架之后，我开始尝试使用 Tornado，因为它是非阻塞的，并且似乎可以返回数据，因为它可能使用长轮询生成，如[本答案](https://stackoverflow.com/questions/6144309/python-web-framework-async-tasks-long-polling-not-django)中所述。但是，看起来 GAE 需要 WSGI，它不允许 Tornado 网络服务器是非阻塞的。

我已经阅读了类似问题的答案，例如[这个](https://stackoverflow.com/questions/1904893/gwt-gae-python-frameworks-for-comet-rpc)。但是，我不确定 Web 框架、GWT 或 GAE 中的更新是否改变了当今最好的选择，或者其中一些答案是否适用于我的案例。

你会推荐我使用什么 Python Web 框架来使用长轮询或其他相对简单的方法将数据发送到我的异步 GWT 应用程序？我可以将这个 Web 框架与 GAE 一起使用，还是需要使用其他东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T17:15:40.133

如果我正确理解了这个问题，你可能不需要任何特殊的框架，你可以用你所拥有的来解决它：[Tasks API](https://developers.google.com/appengine/docs/python/taskqueue/)和[Channel API](https://developers.google.com/appengine/docs/python/channel/overview)。

使用 Tasks API，您可以执行较长的任务，当任务完成时，您会收到通知。您可以将其与 Channel API 结合使用，以便在特定任务完成时将消息直接推送到客户端。

您还可以使用[延迟库](https://developers.google.com/appengine/articles/deferred)来简化您的任务生活，甚至可以使用[PubNub](http://www.pubnub.com/)进行推送通知，因为设置更容易并且您可以同时拥有许多订阅者。

# .net - 如何确定 ToString 方法是否返回对象类型名称与实际值？

> ID：12654545
> 
> 赞同：1
> 
> 时间：2012-09-29T16:52:36.653
> 
> 标签：.net, caching, tostring

我打算使用 ToString() 方法来创建缓存键。此缓存将用于缓存方法级别的调用，并且将使用参数名称和相应的值构造键。由于此缓存将为大型库构建，因此我无法确保每个方法都只有值类型参数或所有类都实现序列化。我需要在运行时确定对 ToString 的调用返回的是实际值而不是类型名称，以便可以禁止该方法调用参与缓存。

例如，考虑以下方法及其调用

```
AccountDetails GetDetails(int groupId, Account account)
{
    var ac1 = new Account( accountId = 123 };
    var ac2 = new Account( accountId = 555 };
    var return1 = GetDetails(15, ac1);
    var return2 = GetDetails(15, ac2);
} 
```

在这种情况下，我会将缓存键构造为“groupId=15+account=namespace.Account”，从而导致不正确的冲突。如何在运行时检测到我对 account.GetString() 的调用将返回类型名称？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T18:44:11.263

您不应该将字符串用于一般缓存键。这真的不是`ToString`设计的目的。相反，您应该使用`Equals`and`GetHashCode`来检查是否相等。当然，就像`ToString`，每个对象都有`Equals`和`GetHashCode`方法......但幸运的是，有一个[`IEquatable<T>`](http://msdn.microsoft.com/en-us/library/ms131187.aspx)接口提供了一个*更*强烈的信号，表明一个类型真的*是*为平等而设计的。

所以对于任何给定的类型`X`，只需检查该类型是否实现`IEquatable<X>`。如果是这样，那么用作缓存键应该是合理的。如果您正在编写通用方法，则可以强制执行此操作：

```
void Foo<T>(T key, /* other parameters */) where T : IEquatable<T> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T17:07:01.893

我不知道“ToString”方法中的实现是什么（就你所知，有人在“Object”中重载了“ToString”，但实现方式与在“Object”中实现的方式相同）。

您不能将 ToString 用作对象的一种哈希。考虑两个逻辑上不同的对象，例如两个具有相同全名和不同 ID（或一些非 ascii 值，如图片）的“学生”对象。您需要使用真正的哈希 - 请参阅“GetHashCode”。

如果“GetHashCode”不是一个选项，我们将需要更多信息（比如“为什么”）

# objective-c - 切换计算器应用程序objective-c未运行

> ID：12654547
> 
> 赞同：0
> 
> 时间：2012-09-29T16:52:56.570
> 
> 标签：objective-c, switch-statement, calculator

我正在开发一个计算器应用程序（下面的代码），它通过 UITextField 获取值，当按下操作数按钮时将它们存储到数组（varArray）中。按下操作数按钮还会将该操作数存储在另一个数组 (opArray) 中并清除 varTextField。按下相等按钮（尚未完全实现，仍在尝试获取值和在我继续之前计算的操作数）将执行计算并将其显示在标签 (equationLabel) 中。所有这些都是为了提供多变量功能。最后，我希望能够输入如下内容：var1、op1、var2、op2、var3...等，并将整个方程式/结果显示在 equationLabel 中。

我还将操作数等同于开关的 int 值。

我现在被卡住了，因为组合变量和操作数的开关似乎根本没有运行。结果项被发送到 equationLabel，但只有默认值 0。

我对编码比较陌生，对objective-c 更是如此，所以我可能只是在这里做一些愚蠢的事情。任何有关开关问题的帮助将不胜感激。

我还应该提到，在每个 switch 案例中，我从 xCode 收到以下警告：“'result' 的本地声明隐藏了实例变量。

**更新后的 code2** 工作得很好，除了应用程序似乎没有写入 opButtonPush 中的数组，直到第一次推送 equalButton。数组值在该 UI 事件之前返回为 null。

```
- (IBAction)opButtonPush:(id)sender    //if +, -, /, or x buttons are pushed, add value in varTextField to varArray and button label text to setOpArray
{    
     UIButton *tmpButton = (UIButton *)sender;

     float textValue=0;

     //add operand to opArray to be accessed by displayEquation and calculator then added to equationLabel and calcFunction
    if ([[[tmpButton titleLabel] text] isEqualToString:@"+"])
    {
        textValue = [[varTextField text] floatValue];
        [opArray addObject:[NSNumber numberWithInt:0]];
        [varOpArray addObject:[NSNumber numberWithFloat:textValue]];
        [varOpArray addObject:@"+"];
        [varArray addObject:[NSNumber numberWithFloat:textValue]];
        varTextField.text = @"";
    }
    else if ([[[tmpButton titleLabel] text] isEqualToString:@"-"])
    {
        textValue = [[varTextField text] floatValue];
        [opArray addObject:[NSNumber numberWithInt:1]];
        [varOpArray addObject:[NSNumber numberWithFloat:textValue]];
        [varOpArray addObject:@"-"];
        [varArray addObject:[NSNumber numberWithFloat:textValue]];
        varTextField.text = @"";
    }
    else if ([[[tmpButton titleLabel] text] isEqualToString:@"x"])
    {
        textValue = [[varTextField text] floatValue];
        [opArray addObject:[NSNumber numberWithInt:2]];
        [varOpArray addObject:[NSNumber numberWithFloat:textValue]];
        [varOpArray addObject:@"x"];
        [varArray addObject:[NSNumber numberWithFloat:textValue]];
        varTextField.text = @"";
    }
    else if ([[[tmpButton titleLabel] text] isEqualToString:@"/"])
    {
        textValue = [[varTextField text] floatValue];
        [opArray addObject:[NSNumber numberWithInt:3]];
        [varOpArray addObject:[NSNumber numberWithFloat:textValue]];
        [varOpArray addObject:@"/"];
        [varArray addObject:[NSNumber numberWithFloat:textValue]];
        varTextField.text = @"";
    }
    else if ([[[tmpButton titleLabel] text] isEqualToString:@"+/-"])
    {
        [varTextField setText:@"-"];
    }

    [equationLabel setText:[varOpArray description]];   //send vars and ops, as entered, to equationLabel

    //NSLog(@"%@", varOpArray);
}

- (IBAction)calculator:(id)sender
{
    UIButton *tmpButton = (UIButton *)sender;

    int opCount=0;

    float finalTextValue=0;
    float result = [[varArray objectAtIndex:0] floatValue];

    if ([[[tmpButton titleLabel] text] isEqualToString:@"="]) {
        finalTextValue = [[varTextField text] floatValue];
        [varArray addObject:[varTextField text]];
        [varOpArray addObject:[varTextField text]];
        [varOpArray addObject:@"="];
        [equationLabel setText:[varOpArray description]];

        for (int i=1; i<[varArray count]; i++) {     //use opArray[i] to eval the result and new var
                                                  //then write it to an array
            switch ([[opArray objectAtIndex:opCount] intValue]) {
                case 0:
                    result = result + [[varArray objectAtIndex:(i)] floatValue];
                    [resultArray addObject:[NSNumber numberWithFloat:result]];
                    [equationLabel setText:[varOpArray description]];   //send vars and ops, as entered, to equationLabel
                    break;
                case 1:
                    result = result - [[varArray objectAtIndex:(i)] floatValue];
                    [resultArray addObject:[NSNumber numberWithFloat:result]];
                    [equationLabel setText:[varOpArray description]];   //send vars and ops, as entered, to equationLabel
                    break;
                case 2:
                    result = result * [[varArray objectAtIndex:(i)] floatValue];
                    [resultArray addObject:[NSNumber numberWithFloat:result]];
                    [equationLabel setText:[varOpArray description]];   //send vars and ops, as entered, to equationLabel
                    break;
                case 3:
                    result = result / [[varArray objectAtIndex:(i)] floatValue];
                    [resultArray addObject:[NSNumber numberWithFloat:result]];
                    [equationLabel setText:[varOpArray description]];   //send vars and ops, as entered, to equationLabel
                    break;
                default:
                    NSLog(@"default");
                    break;
            }
            opCount++;
        }
        [varOpArray addObject:[NSNumber numberWithFloat:result]];
        [equationLabel setText:[varOpArray description]];

        [varTextField setText:@""];

        //reset arrays for next function 
        varOpArray = [NSMutableArray new];
        varArray = [NSMutableArray new];
        opArray = [NSMutableArray new];
    }
} 
```

**更新代码1：**

```
- (IBAction)opButtonPush:(id)sender    //if +, -, /, or x buttons are pushed, add value in varTextField to varArray and button label text to setOpArray
{    
    UIButton *tmpButton = (UIButton *)sender;

    float textValue=0;

    //add operand to opArray to be accessed by displayEquation and calculator then added to equationLabel and calcFunction
    if ([[[tmpButton titleLabel] text] isEqualToString:@"+"])
    {
        textValue = [[varTextField text] floatValue];
        [opArray addObject:[NSNumber numberWithInt:0]];
        [varOpArray addObject:[NSNumber numberWithFloat:textValue]];
        [varOpArray addObject:@"+"];
        [varArray addObject:[NSNumber numberWithFloat:textValue]];
    }
    else if ([[[tmpButton titleLabel] text] isEqualToString:@"-"])
    {
        textValue = [[varTextField text] floatValue];
        [opArray addObject:[NSNumber numberWithInt:1]];
        [varOpArray addObject:[NSNumber numberWithFloat:textValue]];
        [varOpArray addObject:@"-"];
        [varArray addObject:[NSNumber numberWithFloat:textValue]];
    }
    else if ([[[tmpButton titleLabel] text] isEqualToString:@"x"])
    {
        textValue = [[varTextField text] floatValue];
        [opArray addObject:[NSNumber numberWithInt:2]];
        [varOpArray addObject:[NSNumber numberWithFloat:textValue]];
        [varOpArray addObject:@"x"];
        [varArray addObject:[NSNumber numberWithFloat:textValue]];
    }
    else if ([[[tmpButton titleLabel] text] isEqualToString:@"/"])
    {
        textValue = [[varTextField text] floatValue];
        [opArray addObject:[NSNumber numberWithInt:3]];
        [varOpArray addObject:[NSNumber numberWithFloat:textValue]];
        [varOpArray addObject:@"/"];
        [varArray addObject:[NSNumber numberWithFloat:textValue]];
    }

    //add value of float var to arrays to be accessed by calculator 

    [equationLabel setText:[varOpArray description]];   //send vars and ops, as entered, to equationLabel

    varTextField.text = @"";
    NSLog(@"%@", varOpArray);

}

- (IBAction)calculator:(id)sender
{
    UIButton *tmpButton = (UIButton *)sender;

    int opCount=0;

    float finalTextValue=0;
    float result=0.0;

    if ([[[tmpButton titleLabel] text] isEqualToString:@"="]) {
        finalTextValue = [[varTextField text] floatValue];
        //[opArray addObject:[NSNumber numberWithInt:4]];
        [varOpArray addObject:[NSNumber numberWithFloat:finalTextValue]];
        [varOpArray addObject:@"="];
        [varArray addObject:[NSNumber numberWithFloat:finalTextValue]];

        for (int i=0; i<[varArray count]; i+=2) {            
            switch ([[opArray objectAtIndex:opCount] intValue]) {
                case 0:
                    result = [[varArray objectAtIndex:i] floatValue] + [[varArray objectAtIndex:(i+1)] floatValue];
                    [varOpArray addObject:[NSNumber numberWithFloat:result]];
                    varTextField.text = @"";
                    break;
                case 1:
                    result = [[varArray objectAtIndex:i] floatValue] - [[varArray objectAtIndex:(i+1)] floatValue];
                    [varOpArray addObject:[NSNumber numberWithFloat:result]];
                    varTextField.text = @"";
                    break;
                case 2:
                    result = [[varArray objectAtIndex:i] floatValue] * [[varArray objectAtIndex:(i+1)] floatValue];
                    [varOpArray addObject:[NSNumber numberWithFloat:result]];
                    varTextField.text = @"";
                    break;
                case 3:
                    result = [[varArray objectAtIndex:i] floatValue] / [[varArray objectAtIndex:(i+1)] floatValue];
                    [varOpArray addObject:[NSNumber numberWithFloat:result]];
                    varTextField.text = @"";
                    break;
                default:
                    NSLog(@"default");
                    break;
            }

            opCount++;
        }
        varOpArray = [NSMutableArray new];
        varArray = [NSMutableArray new];
        opArray = [NSMutableArray new];
        [varTextField resignFirstResponder];
    }

}

- (IBAction)textFieldClear:(id)sender
{
    if ([varTextField isFirstResponder])
    {

    }
    else
    {
        [varTextField becomeFirstResponder];
        varTextField.text = @"";
    }
} 
```

**原始代码**

```
- (IBAction)opButtonPush:(id)sender    //if +, -, /, or * buttons are pushed, add value in varTextField to varArray and button label text to setOpArray
{
    UIButton *tmpButton = (UIButton *)sender;

    //add value of float var to varArray to be accessed by displayEquation and calculator then added to equationLabel and calcFunction
    if ([[tmpButton titleLabel] text] != @"=" || [[tmpButton titleLabel] text] != @"+/-") {
        varArray = [[NSMutableArray alloc] initWithObjects:varTextField.text, nil];
    }

    //add operand to opArray to be accessed by displayEquation and calculator then added to equationLabel and calcFunction

    if ([[[tmpButton titleLabel] text] isEqualToString:@"+"])
    {
        opArray = [[NSMutableArray alloc] initWithObjects:@"+", nil];
    }

    else if ([[[tmpButton titleLabel] text] isEqualToString:@"-"])
    {
        opArray = [[NSMutableArray alloc] initWithObjects:@"-", nil];
    }

    else if ([[[tmpButton titleLabel] text] isEqualToString:@"x"])
    {
        opArray = [[NSMutableArray alloc] initWithObjects:@"*", nil];
    }

    else if ([[[tmpButton titleLabel] text] isEqualToString:@"/"])
    {
        opArray = [[NSMutableArray alloc] initWithObjects:@"/", nil];
    }
    varTextField.text = @"";     //clear varTextField
}

- (IBAction)calculator:(id)sender
{
    [equationLabel setText:@"x + y = z"];

    NSString *tmpVar;
    NSString *tmpOp;
    float var;

    int varCount = [varArray count];
    int opCount = [opArray count];

    UIButton *tmpButton = (UIButton *)sender;

    if ([[[tmpButton titleLabel] text] isEqualToString:@"="]) {

        //for each instance of varArray and opArray, add it to the string "equation" and equation label
        for (int i=0; i<[varArray count]; i++) {
            tmpVar = [varArray objectAtIndex:i];
            var = ([tmpVar floatValue]);
            for (int j=0; j<[opArray count]; j++) {
                tmpOp = [opArray objectAtIndex:j];
                //equationLabel = 
            }
        }
    }
    //result =
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T22:25:59.787

不要`!=`用于比较此行中的字符串：

```
if ([[tmpButton titleLabel] text] != @"=" || [[tmpButton titleLabel] text] != @"+/-") { 
```

改为使用`isEqualToString`：

```
if (![[[tmpButton titleLabel] text] isEqualToString:@"="] || ![[[tmpButton titleLabel] text] isEqualToString:@"+/-"]) { 
```

您`opArray`包含类型的对象`NSString`。要将该值分配给一个 int ，您需要向`NSString`. `intValue`您还想使用`objectAtIndex`从`opArray`.

由于您将其用作数组的索引，因此您需要做两件事：

1）设置`opCount`为循环`0` **之前**。`for`

`opCount = 0;`

2) 在您的`switch`陈述中，执行以下操作：

`switch([[opArray objectAtIndex:opCount] intValue]) {`

我仍然看到几个问题：

1）你确定你没有点击 switch 语句吗？`NSLog`在你的开关之前放一个。

2）在一个等式中，`1+2*3/4-5=`每个操作数实际上只有一个操作，第二个操作数是前一个结果。一旦`=`被检测到，我将设置`result`为 varArray 中的第一个值，然后我将从`for`循环中的第二个操作数开始（开始您的索引`i`，每次循环`1`仅增加1。使用该变量作为您的第一个操作数你的计算。`i``result`

3）请在上面的问题中留下您的代码的每个版本，否则答案对后来出现并阅读它们的人来说没有意义。

4）只有在计算出最终结果之后，您才想做（即在您的`for`循环之后）。

```
[varOpArray addObject:[NSNumber numberWithFloat:result]]; 
```

`varOpArray`在清除之前不要忘记显示。

5）显然，您的类中有一个实例变量（或属性），`result`这就是您收到错误消息的原因。摆脱它，只使用您定义的本地结果。

此修改后的代码有效：

```
- (IBAction)opButtonPush:(id)sender {
    UIButton *tmpButton = (UIButton *)sender;

    float textValue=0;

    //add operand to opArray to be accessed by displayEquation and calculator then added to equationLabel and calcFunction
    if ([[[tmpButton titleLabel] text] isEqualToString:@"+"])
    {
        textValue = [[varTextField text] floatValue];
        [opArray addObject:[NSNumber numberWithInt:0]];
        [varOpArray addObject:[NSNumber numberWithFloat:textValue]];
        [varOpArray addObject:@"+"];
        [varArray addObject:[NSNumber numberWithFloat:textValue]];
    }
    else if ([[[tmpButton titleLabel] text] isEqualToString:@"-"])
    {
        textValue = [[varTextField text] floatValue];
        [opArray addObject:[NSNumber numberWithInt:1]];
        [varOpArray addObject:[NSNumber numberWithFloat:textValue]];
        [varOpArray addObject:@"-"];
        [varArray addObject:[NSNumber numberWithFloat:textValue]];
    }
    else if ([[[tmpButton titleLabel] text] isEqualToString:@"x"])
    {
        textValue = [[varTextField text] floatValue];
        [opArray addObject:[NSNumber numberWithInt:2]];
        [varOpArray addObject:[NSNumber numberWithFloat:textValue]];
        [varOpArray addObject:@"x"];
        [varArray addObject:[NSNumber numberWithFloat:textValue]];
    }
    else if ([[[tmpButton titleLabel] text] isEqualToString:@"/"])
    {
        textValue = [[varTextField text] floatValue];
        [opArray addObject:[NSNumber numberWithInt:3]];
        [varOpArray addObject:[NSNumber numberWithFloat:textValue]];
        [varOpArray addObject:@"/"];
        [varArray addObject:[NSNumber numberWithFloat:textValue]];
    }

    //add value of float var to arrays to be accessed by calculator 

    [equationLabel setText:[varOpArray description]];   //send vars and ops, as entered, to equationLabel

    varTextField.text = @"";
    NSLog(@"%@", varOpArray);

}

- (IBAction)calculator:(id)sender {
    UIButton *tmpButton = (UIButton *)sender;

    int opCount=0;

    float finalTextValue=0;
    float result=0.0;

    if ([[[tmpButton titleLabel] text] isEqualToString:@"="]) {
        finalTextValue = [[varTextField text] floatValue];
        //[opArray addObject:[NSNumber numberWithInt:4]];
        [varOpArray addObject:[NSNumber numberWithFloat:finalTextValue]];
        [varOpArray addObject:@"="];
        [varArray addObject:[NSNumber numberWithFloat:finalTextValue]];

        result = [[varArray objectAtIndex:0] floatValue];

        for (int i=1; i<[varArray count]; i++) { 
            NSLog(@"switch hit");
            switch ([[opArray objectAtIndex:opCount] intValue]) {
                case 0:
                    result = result + [[varArray objectAtIndex:i] floatValue];
                    varTextField.text = @"";
                    break;
                case 1:
                    result = result - [[varArray objectAtIndex:i] floatValue];
                    varTextField.text = @"";
                    break;
                case 2:
                    result = result * [[varArray objectAtIndex:i] floatValue];
                    varTextField.text = @"";
                    break;
                case 3:
                    result = result / [[varArray objectAtIndex:i] floatValue];
                    varTextField.text = @"";
                    break;
                default:
                    NSLog(@"default");
                    break;
            }

            opCount++;
        }
        [varOpArray addObject:[NSNumber numberWithFloat:result]];
        [equationLabel setText:[varOpArray description]];      

        varOpArray = [NSMutableArray new];
        varArray = [NSMutableArray new];
        opArray = [NSMutableArray new];
        [varTextField resignFirstResponder];
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T20:33:40.513

我试图了解你的项目。我可能错了，但似乎：在for循环中，opCount应该是objectAtIndex；

结果应该是=，而不是+=

# emacs - 如何对保留组合字符的 Emacs 缓冲区进行 htmlfontify？

> ID：12654556
> 
> 赞同：0
> 
> 时间：2012-09-29T16:53:49.237
> 
> 标签：emacs

如何在 Emacs 中对代码缓冲区进行 htmlfontify 而不丢失组合字符？

我有几种模式可以使用`compose-region`. 例如，我可能会写如下内容：

```
foo :: Num a => [a] -> a
foo = foldl (+) 0 . map (\ x -> x + f x - 10) 
```

并且编辑器显示（不改变缓冲区的实际内容）：

```
foo ∷ Num a ⇒ [a] → a
foo = foldl (+) 0 ∘ map (λ x → x + f x - 10) 
```

这本质上是另一种形式的语法高亮，除了使用特殊字符而不是颜色。

但是，当我`M-x htmlfontify-buffer`在看起来像我的第二个示例的缓冲区上使用时，所有这些信息都会丢失，并且 html 输出看起来像第一个版本。如何避免丢失角色转换？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T02:17:55.400

我认为 htmlfontify 还不支持此功能。但是，如果您`M-x report-emacs-bug`请求该功能，您可能会找到可以相当快地实现它的人（同样，也许不是）。

# php - PHP：具有不同宽度的动态图像网格

> ID：12654564
> 
> 赞同：0
> 
> 时间：2012-09-29T16:54:47.730
> 
> 标签：php, image, dynamic, grid, gallery

在我的网站上，我有多个具有相同高度但具有三种不同宽度的图像。我想在一个漂亮的网格中显示这些。上传图片时，我会检查图片是宽还是高。

然后，我为图像 s、m 和 l 设置了三种不同的尺寸

s 用于高图像，m & l 用于宽图像。

这些图像显示在表格中，其中小 (s) 图像占 1 个点，中 (m) 占 2 个点，大 (l) 占 3 个点。每行有3个点。

如果我可能有 8 张图像（4 高和 4 宽），我希望它看起来像这样（w = 空白）：

```
sss
ms
l
l
l 
```

代替

```
sss
sww
l
l
l
l 
```

这意味着前 3 张图像只是小图像。因为我需要第二行的中等图像，所以我拉伸其中一个宽图像以占据 2 个点。然后在那个旁边有一个高图像，最后三行只是三个宽图像，每行一个。

我希望我解释得足够好。

编辑：

或者假设我有 4 张 2 高 2 宽的图像（**w = white-space**）：

而不是像这样显示它

```
ssw
l
l 
```

我希望它看起来像这样：

```
sm (or ms)
sm (or ms) 
```

我该如何进行这项工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T17:22:06.480

为此有几个库，最简单的是[jQuery Masonry](http://masonry.desandro.com/)。

你可以用最少的代码实现你想要的，因为它只是可变宽度而不是可变宽度和高度，但不妨使用已经处理这个问题的库，而不是自己花时间。

# windows - 在 lua 中重复/直到帮助

> ID：12654565
> 
> 赞同：0
> 
> 时间：2012-09-29T16:55:05.137
> 
> 标签：windows, input, lua, repeat

您好，我一直在尝试使此代码正常工作，我什至作弊并将目标添加到我的代码中，但它仍然不接受我的答案，有什么建议吗？

```
-- Functions...
function p() -- For user imput..
        print("Enter # and try to get the closest to it! (Valid range is 1-100)")
        local var = tonumber(io.read())
        if var == nil then
            var = 0
        end
return var
end
--Start main code..

-- Initialize the pseudo random number generator (I'm on windows...)
math.randomseed( os.time() )
math.random(); math.random(); math.random()
-- Setting goal
goal = math.random(1,100)
-- Guessing loop...
repeat
        g = p()
        print(g)
        print(goal)
until g == Goal
print("YOU GUESSED THE GOAL!") 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T17:08:04.907

将 G 替换为小写 g。

```
until g == goal 
```

# operating-system - 虚拟内存耗尽时会发生什么

> ID：12654567
> 
> 赞同：2
> 
> 时间：2012-09-29T16:55:12.983
> 
> 标签：operating-system, virtual-functions

我发布这个问题是因为我在谷歌搜索和stackoverflowing上找不到答案......

问题是：当虚拟内存的交换空间用完时会发生什么。当所有 RAM 和虚拟内存都用尽时，操作系统如何处理这种情况。

是否偷偷使用更多硬盘空间，或通知异常

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T17:08:39.093

我将假设虚拟内存指的是交换空间（它们在技术上是不同的概念）。我能想到两件事：

*   程序检查以确保分配顺利（即在 C 中，有一个 malloc 的返回码），如果它不顺利，那么它将优雅地退出，并带有曾经普遍存在的“内存不足”错误消息。Java 和 C++ 具有相同目的的例外。

*   程序不检查是因为，真的，谁内存不足了？（这是一个在这里思考的程序员。）我敢打赌，可能有很多程序写在那里不检查对 malloc 的调用是否成功，因此他们试图使用错误的指针并导致内存访问冲突，导致程序在 Windows 中以漂亮的“此程序遇到问题”消息退出，或在 Unix 中以简洁的“Segfault”消息退出。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-29T17:09:36.237

我不确定 Windows 如何处理它，但是在 *nix 系统上，内核运行 OOM Killer 程序（更多信息可以在这里找到[http://linux-mm.org/OOM_Killer](http://linux-mm.org/OOM_Killer)）

# perl - 使用 PSGI，是否可以更改上传文件的命名方式？

> ID：12654571
> 
> 赞同：4
> 
> 时间：2012-09-29T16:55:59.977
> 
> 标签：perl, plack, psgi

我有一个小型 PSGI 应用程序，它从表单上传并将其传递给另一个脚本进行处理：

```
#!/usr/bin/perl

use strict;
use warnings;

use Plack::Request;
use HTTPStatusCode;

my $app = sub {
    my $req = Plack::Request->new(shift);

    my $content;
    if (keys %{$req->uploads}) {
        $content = do_something_with_upload($req);
    } else {
        $content = display_form();
    }

    return [
        HTTPStatusCode->SUCCESS,
        [ 'Content-type', 'text/html' ],
        [ $content ],
    ];
}; 
```

该文件已成功上传，类似于`/tmp/Fw8n6j0ICn.txt`. 问题是，处理依赖于文件在上传时被命名。

是否可以更改文件的上传方式以便它们转到`/tmp/Fw8n6j0ICn/original_name.txt`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T01:30:56.740

`filename`您可以通过对象的方法检索原始文件名`$request`，因此您基本上可以将其复制`$request->path`到您想要的任何内容并处理该文件。

# rest - Glassfish 内置 RESTful EJB 接口以及 SOAP

> ID：12654579
> 
> 赞同：0
> 
> 时间：2012-09-29T16:56:33.937
> 
> 标签：rest, soap, glassfish, glassfish-3, restful-architecture

我目前正在学习 Glassfish，我发现可以添加注释 @WebService (javax.jws.WebService)，并且容器将自动为特定 bean 启用 SOAP Web 服务。由于我对使用 SOAP 并不真正感兴趣，我想知道是否可以使用服务器内置功能来实现相同的功能，但对于 RESTful 服务，无需明确编写我自己的功能。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T07:32:55.280

您正在寻找 JAX-RS（标准）和 Jersey（该标准的一种实现）。查看 Jersey 站点的文档：http: [//jersey.java.net/](http://jersey.java.net/)。您还可以在 Netbeans 站点上找到教程。

# python - 使用 Python 将 SVG 图像转换为多个矢量线段

> ID：12654582
> 
> 赞同：2
> 
> 时间：2012-09-29T16:56:47.740
> 
> 标签：python, vector, svg

我的目标是将 SVG 图像变成（非常）长的矢量线段列表/字典/对象。所有 SVG 形状/曲线/线条/文本都将变成不同长度的矢量线；一条长线仍将是一条矢量线，但必须将一个圆渲染为多个非常小的线段，其大小由变量 (MININUM_LINE_SEGMENT_LENGTH) 确定。

我希望有一些东西可以使用 Python 做到这一点，否则我想我要么必须编写（或修改？）一个 SVG 渲染器，要么将图像转换为光栅然后重新矢量化。还有其他方法吗？

我知道：
[将 SVG 路径转换为线段](https://stackoverflow.com/questions/9102563/turn-svg-path-into-line-segments)
[http://davidlynch.org/blog/2008/03/creating-an-image-map-from-svg/](http://davidlynch.org/blog/2008/03/creating-an-image-map-from-svg/)

...但想知道是否还有其他/更好的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T07:08:33.907

我认为，首先将其光栅化会有点过分。

以下是我的套件`dxfgeom.py`模块的摘录。[`dxftools`](http://rsmith.home.xs4all.nl/software/#dxftools)在课程中，您将找到将弧线转换为线段列表`Arc`的内部方法。使用此方法，您可以将圆弧和圆转换为直线段。`_gensegments``Line`

对于[Bézier curve](http://en.wikipedia.org/wiki/B%C3%A9zier_curve)，您必须评估[方程](http://en.wikipedia.org/wiki/B%C3%A9zier_curve#Explicit_definition)（其中 P 是*n 个*控制点的列表）： ![贝塞尔曲线方程](../Images/1ed62e32bcf554275cc6178fc6fc0f7c.png)

线性化圆弧和圆的示例代码。

```
class Entity:
    '''A base class for a DXF entities; lines and arcs.

    The class attribute delta contains the maximum distance in x and y
    direction between eindpoints that are considered coincident.'''

    delta = 0.005
    _anoent = "Argument is not an entity!"

    def __init__(self, x1=0, y1=0, x2=0, y2=0):
        '''Creates an Entity from (x1, y1) to (x2, y2)..'''
        # Start- and enpoint
        self.x1 = float(x1)
        self.y1 = float(y1)
        self.x2 = float(x2)
        self.y2 = float(y2)
        # Bounding box
        self.xmin = min(x1, x2)
        self.ymin = min(y1, y2)
        self.xmax = max(x1, x2)
        self.ymax = max(y1, y2)
        # Endpoints swapped indicator
        self.sw = False

    def fits(self, index, other):
        '''Checks if another entity fits onto this one.

        index -- end of the entity to test, either 1 or 2.
        other -- Entity to test.

        Returns 0 if the other entity doesn't fit. Otherwise returns 1 or 2
        indicating the new free end of other.'''
        assert isinstance(other, Entity), Entity._anoent
        if index == 1:
            if (math.fabs(self.x1-other.x1) < Entity.delta and 
                math.fabs(self.y1-other.y1) < Entity.delta):
                # return free end of other
                return 2
            elif (math.fabs(self.x1-other.x2) < Entity.delta and 
                  math.fabs(self.y1-other.y2) < Entity.delta):
                return 1
        elif index == 2:
            if (math.fabs(self.x2-other.x1) < Entity.delta and 
                math.fabs(self.y2-other.y1) < Entity.delta):
                return 2
            elif (math.fabs(self.x2-other.x2) < Entity.delta and 
                  math.fabs(self.y2-other.y2) < Entity.delta):
                return 1
        return 0 # doesn't fit!

    def getbb(self):
        '''Returns a tuple containing the bounding box of an entity in the
        format (xmin, ymin, xmax, ymax).'''
        return (self.xmin, self.ymin, self.xmax, self.ymax)

    def move(self, dx, dy):
        self.x1 += dx
        self.x2 += dx
        self.y1 += dy
        self.y2 += dy

    def swap(self):
        '''Swap (x1, y1) and (x2, y2)'''
        (self.x1, self.x2) = (self.x2, self.x1)
        (self.y1, self.y2) = (self.y2, self.y1)
        self.sw = not self.sw

    def dxfdata(self):
        '''Returns a string containing the entity in DXF format.'''
        raise NotImplementedError

    def pdfdata(self):
        '''Returns info to create the entity in PDF format.'''
        raise NotImplementedError

    def ncdata(self):
        '''Returns NC data for the entity. This is a 2-tuple of two
        strings. The first string decribes how to go to the beginning of the
        entity, the second string contains the entity itself.'''
        raise NotImplementedError

    def length(self):
        '''Returns the length of the entity.'''
        raise NotImplementedError

    def startpoint(self):
        '''Returns the (x1, y1).'''
        return (self.x1, self.y1)

    def endpoint(self):
        '''Returns the (x2, y2).'''
        return (self.x2, self.y2)

    def __lt__(self, other):
        '''The (xmin, ymin) corner of the bounding box will be used for
        sorting. Sort by ymin first, then xmin.'''
        assert isinstance(other, Entity), Entity._anoent
        if self.ymin == other.ymin:
            if self.xmin < other.xmin:
                return True
        else:
            return self.ymin < other.ymin

    def __gt__(self, other):
        assert isinstance(other, Entity), Entity._anoent
        if self.ymin == other.ymin:
            if self.xmin > other.xmin:
                return True
        else:
            return self.ymin > other.ymin

    def __eq__(self, other):
        assert isinstance(other, Entity), Entity._anoent
        return self.xmin == other.xmin and self.ymin == other.ymin

class Line(Entity):
    '''A class for a line entity, from point (x1, y1) to (x2, y2)'''
    def __init__(self, x1, y1, x2, y2):
        '''Creates a Line from (x1, y1) to (x2, y2).'''
        Entity.__init__(self, x1, y1, x2, y2)

    def __str__(self):
        fs = "#LINE from ({:.3f},{:.3f}) to ({:.3f},{:.3f})"
        fs =  fs.format(self.x1, self.y1, self.x2, self.y2)
        if self.sw:
            fs += " (swapped)"
        return fs

    def dxfdata(self):
        s = "  0\nLINE\n"
        s += "  8\nsnijlijnen\n"
        s += " 10\n{}\n 20\n{}\n 30\n0.0\n".format(self.x1, self.y1)
        s += " 11\n{}\n 21\n{}\n 31\n0.0\n".format(self.x2, self.y2)
        return s

    def pdfdata(self):
        '''Returns a tuple containing the coordinates x1, y1, x2 and y2.'''
        return (self.x1, self.y1, self.x2, self.y2)

    def ncdata(self):
        '''NC code for an individual line in a 2-tuple; (goto, lineto)'''
        s1 = 'M15*X{}Y{}*'.format(_mmtoci(self.x1), _mmtoci(self.y1))
        s2 = 'M14*X{}Y{}*M15*'.format(_mmtoci(self.x2), _mmtoci(self.y2))
        return (s1, s2)

    def length(self):
        '''Returns the length of a Line.'''
        dx = self.x2-self.x1
        dy = self.y2-self.x1
        return math.sqrt(dx*dx+dy*dy)

class Arc(Entity):
    '''A class for an arc entity, centering in (cx, cy) with radius R from
    angle a1 to a2.

    Class properties: 

        Arc.segmentsize -- Maximum length of the segment when an arc is rendered
                           as a list of connected line segments.
        Arc.as_segments -- Whether an arc should be output as a list of
                           connected line segments. True by default.'''
    segmentsize = 5
    as_segments = True

    def __init__(self, cx, cy, R, a1, a2):
        '''Creates a Arc centering in (cx, cy) with radius R and running from
        a1 degrees ccw to a2 degrees.'''
        assert a2 > a1, 'Arcs are defined CCW, so a2 must be greater than a1'
        self.cx = float(cx)
        self.cy = float(cy)
        self.R = float(R)
        self.a1 = float(a1)
        self.a2 = float(a2)
        self.segments = None
        x1 = cx+R*math.cos(math.radians(a1))
        y1 = cy+R*math.sin(math.radians(a1))
        x2 = cx+R*math.cos(math.radians(a2))
        y2 = cy+R*math.sin(math.radians(a2))
        Entity.__init__(self, x1, y1, x2, y2)
        # Refine bounding box
        A1 = int(a1)/90
        A2 = int(a2)/90
        for ang in range(A1, A2):
            (px, py) = (cx+R*math.cos(math.radians(90*ang)),
                        cy+R*math.sin(math.radians(90*ang)))
            if px > self.xmax:
                self.xmax = px
            elif px < self.xmin:
                self.xmin = px
            if py > self.ymax:
                self.ymax = py
            elif py < self.ymin:
                self.ymin = py

    def _gensegments(self):
        '''Subdivide the arc into a list of line segments of maximally
        Arc.segmentsize units length. Return the list of segments.'''
        fr = float(Arc.segmentsize)/self.R
        if fr > 1:
            cnt = 1
            step = self.a2-self.a1
        else:
            ang = math.asin(fr)/math.pi*180
            cnt = math.floor((self.a2-self.a1)/ang) + 1
            step = (self.a2-self.a1)/cnt
        sa = self.a1
        ea = self.a2
        if self.sw:
            sa = self.a2
            ea = self.a1
            step = -step
        angs = _frange(sa, ea, step)
        pnts = [(self.cx+self.R*math.cos(math.radians(a)), 
                 self.cy+self.R*math.sin(math.radians(a))) for a in angs]
        llist = []
        for j in range(1, len(pnts)):
            i = j-1
            llist.append(Line(pnts[i][0], pnts[i][5], pnts[j][0], pnts[j][6]))
        return llist

    def __str__(self):
        s = "#ARC from ({:.3f},{:.3f}) to ({:.3f},{:.3f}), radius {:.3f}"
        s =  s.format(self.x1, self.y1, self.x2, self.y2, self.R)
        if self.sw:
            s += " (swapped)"
        return s

    def move(self, dx, dy):
        Entity.move(self, dx, dy)
        self.cx += dx
        self.cy += dy
        if self.segments:
            for s in self.segments:
                s.move(dx, dy)

    def dxfdata(self):
        if Arc.as_segments == False:
            s = "  0\nARC\n"
            s += "  8\nsnijlijnen\n"
            s += " 10\n{}\n 20\n{}\n 30\n0.0\n".format(self.cx, self.cy)
            s += " 40\n{}\n 50\n{}\n 51\n{}\n".format(self.R, self.a1, self.a2)
            return s
        if self.segments == None:
            self.segments = self._gensegments()
        s = ""
        for sg in self.segments:
            s += sg.dxfdata()
        return s

    def pdfdata(self):
        '''Returns a tuple containing the data to draw an arc.'''
        if self.sw:
            sa = self.a2
            ea = self.a1
        else:
            sa = self.a1
            ea = self.a2
        ext = ea-sa
        return (self.xmin, self.ymin, self.xmax, self.ymax, sa, ea, ext)

    def ncdata(self):
        if self.segments == None:
            self.segments = self._gensegments()
        (s1, s2) = self.segments[0].ncdata()
        for sg in self.segments[1:]:
            (f1, f2) = sg.ncdata()
            s2 += f2
        return (s1, s2)

    def length(self):
        '''Returns the length of an arc.'''
        angle = math.radians(self.a2-self.a1)
        return self.R*angle 
```

# types - XML 模式：数据类型（文本数据类型）

> ID：12654584
> 
> 赞同：0
> 
> 时间：2012-09-29T16:57:28.743
> 
> 标签：types, xsd

我知道当你写字符时，你使用字符串。但是，是否有一种称为文本的数据类型？这是因为我的作业有如下内容：

X 是文本类型 Y 是字符串类型

所以我想知道除了字符串之外是否还有其他文本数据类型

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T23:10:00.633

`text`XML 模式 (XSD) 中没有标准数据类型- 请参见[此处](http://www.w3.org/TR/xmlschema11-2/#built-in-datatypes)。当然你可以根据字符串定义一个：

```
<xs:simpleType name="text">
  <xs:restriction base="xs:string">
    . . . some restriction . . .
  </xs:restriction>
</xs:simpleType> 
```

但我怀疑这不是你的意思。

# emacs - 需要输入时更改 minibuffer 的背景颜色

> ID：12654592
> 
> 赞同：4
> 
> 时间：2012-09-29T16:59:18.070
> 
> 标签：emacs, background-color, minibuffer

当期望用户活动时，是否可以更改迷你缓冲区的背景颜色？例如，当函数需要参数或函数名称不完整时，或者当您开始输入“Cx”并且需要更多键时等。

我正在考虑这样的事情：[http](http://emacswiki.org/emacs/Dedicated_Minibuffer_Frame) : //emacswiki.org/emacs/Dedicated_Minibuffer_Frame （请参阅“Minibuffer 背景颜色指示用户活动”，有很多截图）

除了上述仅在迷你缓冲区位于其自己的帧中时有效。

当迷你缓冲区是“常规”迷你缓冲区时，我想让它工作，其他缓冲区在同一帧中。

我的 elisp 还不够强大，无法自己破解解决方案，因此非常欢迎任何输入。

**编辑**

我可以通过以下方式更改整个缓冲区的背景：

```
(add-hook 'minibuffer-setup-hook 
  (function (lambda ()
              (set-background-color "black")))) 
```

我不知道是否很容易使用一些“hack”来改变 minibuffer 的背景。

我也不知道如何改回以前的颜色。我不确定这样做的正确方法是什么。

如果我不能只更改迷你缓冲区的背景，那么更改整个背景就可以了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T02:30:52.450

您可以简单地尝试`face-remap-alist`通过`minibuffer-setup-hook`. 就像是：

```
(add-hook 'minibuffer-setup-hook
          (lambda ()
            (make-local-variable 'face-remapping-alist)
            (add-to-list 'face-remapping-alist '(default (:background "green"))))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T18:26:52.367

它并不完美，因为它没有涵盖您的所有条件，但您可以使用`M-x customize-face`..`minibuffer-prompt`并打开反向视频或进行其他自定义。它只改变文本的背景而不是整个小缓冲区。

这不会改变`C-x`或任何其他*前缀命令*

# javascript - 加载第二个版本的 jQuery 和其他库

> ID：12654593
> 
> 赞同：3
> 
> 时间：2012-09-29T16:59:18.310
> 
> 标签：javascript, jquery-ui, jquery, google-ajax-libraries

我正在制作一个小部件，其中包含一段代码，以放入您的网站，然后通过 js 拉入内容。这是一个示例片段：

```
<div data-token="bc1cea6304e8" id="my-widget">
    <script src="http://localhost:8080/assets/eg-widget.js" type="text/javascript"></script>
</div> 
```

我正在做一个测试来检查页面是否已经有 jQuery，如果有，版本至少是 1.5。

```
if (typeof jQuery == 'undefined' || isVersion("1.5", ">")) {

    var script_tag = document.createElement('script');
    script_tag.setAttribute("type", "text/javascript");
    script_tag.setAttribute("src",
        "http://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js");

    // Try to find the head, otherwise default to the documentElement
    (document.getElementsByTagName("head")[0] || document.documentElement).appendChild(script_tag);

    if (script_tag.readyState) {
        script_tag.onreadystatechange = function () { // For old versions of IE
            if (this.readyState == 'complete' || this.readyState == 'loaded') {
                scriptLoadHandler();
            }
        };
    } else { // Other browsers
        script_tag.onload = scriptLoadHandler;
    }
} else {
    // The jQuery version on the window is the one we want to use
    jQueryEg = window.jQuery;
    scriptLoadHandler();
} 
```

在任何一种情况下，我们都将变量 jQueryEg 设置为我们决定使用的 jQuery，这样我们就可以避免冲突。

如果 jQuery 尚未加载，那么一切都是花花公子。但是如果加载了旧版本，我们在尝试加载其他库（如 jQuery-ui）时会遇到冲突。

为此，我们将 window.jQuery 设置为新加载的 jQuery，以便在加载 jquery-ui 和 bootstrap.js 时，它们对 window.jQuery 或 $ 的引用指向正确的版本。

问题是有时页面的其他部分在我们将 window.jQuery 设置为我们的版本的同时调用 jQuery，这会导致问题。

关于我们如何避免这些冲突的任何想法？

```
jQueryEg = window.jQuery.noConflict(true);
window.jQueryEg = jQueryEg;

// jquery-ui reference window.jQuery so we need to set that to our new jquery for a sec

if (jQueryEg.ui == undefined || jQueryEg.ui.datepicker == undefined) {
    var otherjQuery = window.jQuery;
    window.jQuery = jQueryEg;

    var script_tag = document.createElement('script');
    script_tag.setAttribute("type", "text/javascript");
    script_tag.setAttribute("src",
        "//ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js");
    (document.getElementsByTagName("head")[0] || document.documentElement).appendChild(script_tag);

    script_tag.onload = function () {
        window.jQuery = otherjQuery;
        main();
    };

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-29T17:38:39.843

一旦我遇到[类似的问题](http://zybnet.com/my-odssey-in-vtiger-crm/)。查看 jQuery-UI 代码，我注意到它全部封装在一个立即调用的函数表达式中（或者我自己封装了它？我不记得了）：

```
( function ( jQuery, undefined ){
  // Code here...
})( jQuery ); 
```

创建*私有范围*。所以我的解决方案是

1.  将当前保存`jQuery`到`jQuery_OLD`
2.  加载新的 jQuery 版本
3.  加载jQuery-UI，让它抓取兼容版本
4.  恢复旧`jQuery`

所以下面给出了这个想法

```
<script src="jquery-1.4.js"></script>
<script>
    var jQuery_1_4 = jQuery.noConflict();
</script>
<script src="jquery-1.8.js"> </script>
<!-- load jquery UI -->
<script src="jquery-ui.js"> </script>
<!-- restore window.jQuery -->
<script>
    jQuery = jQuery_1_4;
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T17:43:56.587

之前遇到过这种确切的情况，最终的决定是您可能已经知道并且不想听到的：在加载这样的多个外部库版本时，根本没有避免所有边缘情况的好方法，由于您已经指定的原因。所涉及的并发症总结如下：

*   当然，主要问题是：外部脚本的加载本质上是异步的，并且没有“执行前”/“执行后”回调来确保所有内容都被很好地包装。即：没有办法“包围”动态加载的代码。
*   脚本在直接放置在文档中时按顺序执行，但无法根据另一个确定的内容有条件地加载一个脚本。
*   最后，出于用户友好的原因（即：允许网络上的随机人员在零代码知识和没有支持人员的情况下使用您的代码段），诸如“确保将此代码段粘贴**在**任何其他脚本之前！”之类的限制。是正确的。即使他们可以工作（*他们不会，真的看到其他两点），他们也会被忽略，尤其是那些不能完全控制他们的页面的人。

不幸的是，唯一的答案是显而易见的：在您自己的服务器上托管库的修改版本。

当然，您不需要一直提供这些版本，因此您仍然可以从使用 Google 的 CDN 中受益。同时，您仍然可以使用自己的 CDN 来交付修改后的版本。要遵循的主要准则是：

1.  在整个页面加载后运行您的脚本（使用 onDOMReady 等），以确保在包含您自己的脚本“之后”不会发生冲突。
2.  确定是否可能发生冲突。在这些情况下提供您的修改版本，否则从公共 CDN 提供。
3.  经常检查与其他库的兼容性。您的代码会随着时间的推移而发展，就像您使用的库一样。“确定是否可能发生冲突”步骤需要准确才能使其正常工作。请谨慎行事：如果您不确定，请提供您自己的版本。
4.  始终为粘贴者提供一个简单的选项，说“始终使用修改后的版本”，以防您的检测以某种方式失败。
5.  始终提供带有适当[缓存标头的脚本的](http://httpd.apache.org/docs/2.2/caching.html)[压缩](http://httpd.apache.org/docs/2.2/mod/mod_deflate.html)、[丑化](https://github.com/mishoo/UglifyJS)版本，以减少您自己的服务器上的负载。

相对而言，您通常会发现您自己的服务器上的点击次数实际上非常少。一如既往，不要相信我：在你自己的真实世界场景中保持统计数据！

# asp.net-mvc - 如何向我的剃须刀页面添加自定义验证？

> ID：12654594
> 
> 赞同：1
> 
> 时间：2012-09-29T16:59:18.913
> 
> 标签：asp.net-mvc, validation, razor, client-side

我的 mvc 4 应用程序中有剃须刀页面。现在想象我的页面中有一个简单的文本框，如下所示：

```
@Html.TextBox("Email") 
```

或者

```
<input id="Email" name="Email" type="text" /> 
```

我怎样才能为这个字段做一些客户端验证，你知道像 asp.net web 表单验证控件之类的东西。我想让它成为必需并为它编写一个正则表达式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-04-12T10:31:02.440

我曾经这样做：

*   在模型 Person.cs 中：

    ```
     [StringLength(50, ErrorMessage = "El campo {0} no puede tener mas de 50 caracteres")]
        [Required(ErrorMessage = "El nombre es obligatorio")]
        public string Nombre { get; set; } 
    ```

*   在页面 Create.cshtml 中：

    ```
     <div asp-validation-summary="ModelOnly" class="text-danger"></div>
        <div class="form-group">
            <label asp-for="Person.Nombre" class="control-label">Nombre / Name:</label>
            <input asp-for="Person.Nombre" class="form-control" />
            <span asp-validation-for="Person.Nombre" class="text-danger"></span>
        </div> 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T17:40:58.297

您可能想查看数据注释。它们为您提供了非常简单直接的方式来为每个视图模型中的每个字段定义（不仅）验证。

请查看以下链接：

[如何：使用 DataAnnotations 属性验证模型数据](http://msdn.microsoft.com/en-us/library/ee256141%28v=vs.100%29.aspx)

在您的特定情况下，它将是

```
[Required]
[RegularExpression(@"<your RegEx>", ErrorMessage = "<your message, leave out for default>")]
public string fieldYouValidating { get; set; } 
```

许多人喜欢的其他验证方式是[Fluent Validation](http://fluentvalidation.codeplex.com/)

```
RuleFor(x => x.fieldYouValidating)
        .NotEmpty()
        .WithMessage("This is the message."); 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T17:30:37.650

`RequiredAttribute`你通常用和 来装饰你的模型属性`RegexAttribute`。

# php - php下拉人口

> ID：12654596
> 
> 赞同：0
> 
> 时间：2012-09-29T17:00:10.960
> 
> 标签：php, mysql

有人可以告诉我为什么以下内容没有使用`dist_itnry`我的数据库列中的值填充下拉列表吗？

```
<?php 
$distUsr = $_SESSION['Distributor_user'];
$con=mysql_connect('localhost','root') or die ("Server connection failure!");
$db=mysql_select_db('regional_data',$con) or die ("Couldn't connect the database");
$SQL1="SELECT dist_itnry, route FROM sr_itinerary";
$run1=mysql_query($SQL1,$con) or die ("SQL Error");
$nor1=mysql_num_rows($run1);

while($rec=mysql_fetch_array($run1))
{
    while ($rec = $distUsr)
    {
        echo "<option id='options'>$rec<br></option>";
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T17:10:55.587

你正在覆盖`$rec`. 另外，请查看我所做的其他更改，包括`<select>`标签和标签的更正确用法`<option>`。`<option>`您可以为标签指定不同的值。示例：`<option value="123">Something</option>`- 这意味着“123”将是提交表单时提交的值。但是表格中会显示“某事”。

更正后的代码如下：

```
<?php 
$distUsr = $_SESSION['Distributor_user'];
$con=mysql_connect('localhost','root') or die ("Server connection failure!");
$db=mysql_select_db('regional_data',$con) or die ("Couldn't connect the database");
$SQL1="SELECT dist_itnry, route FROM sr_itinerary";
$run1=mysql_query($SQL1,$con) or die ("SQL Error");
$nor1=mysql_num_rows($run1);
echo '<select name="dropdown">';
while($rec=mysql_fetch_array($run1))
{
    $value = $rec['dist_itnry'];
    echo "<option value=\"$value\">$value</option>";
}
echo '</select>';
?> 
```

# c - c sscanf 带字符分隔符

> ID：12654599
> 
> 赞同：2
> 
> 时间：2012-09-29T17:00:32.520
> 
> 标签：c, io, scanf

我有一个表单的输入字符串

```
char *s = "one.two three" 
```

我想把它分成 3 个字符串变量。我正在做

```
sscanf(s, "%s.%s %s", one, two, three); 
```

但它在“one.two”中读取为变量一的字符串。我如何处理“。” 和sscanf的空格？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T17:01:50.200

说明`%s`符只停止一个空格。尝试类似：

```
sscanf(s, "%[^.].%s %s", one, two, three); 
```

* * *

有趣的是，它可能不可能产生一个可接受的输入，`"%s.%s %s"`因为`%s`只停止一个空间，但`.`必须立即跟随它。

# java - 按降序对 int 数组进行排序给出“方法不适用于参数”

> ID：12654600
> 
> 赞同：3
> 
> 时间：2012-09-29T17:00:34.073
> 
> 标签：java, arrays

我正在尝试使用以下代码在 Java 中按降序对数组进行排序：

```
for(int i = 0; i < arr.length; i++) {
   Comparator comparator = Collections.reverseOrder();
   Arrays.sort(arr,comparator);
} 
```

但我得到这个错误：

> Arrays 类型中的方法 sort(int[]) 不适用于参数 (int[], Comparator)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-29T17:04:34.873

如果您查看[Arrays 的 javadoc](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html)，您会发现唯一`sort`将 a`comparator`作为第二个参数的方法是：

```
sort(T[] a, Comparator<? super T> c)
sort(T[] a, int fromIndex, int toIndex, Comparator<? super T> c) 
```

在你的情况下，`int[]`is not a `T[]`( `Integer[]`would be) 所以你不能应用这些方法。

你有（至少）2个选项：

*   按升序排序并[反转数组](https://stackoverflow.com/questions/9995432/reverse-array-order)
*   将数组转换为 an`Integer[]`并使用上述方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T17:04:25.000

目前尚不清楚您为什么要尝试循环，但是在*原始*`Arrays.sort`数组上运行的方法不允许指定自定义比较器。

 *最简单的方法是对数组进行排序然后反转。我无法立即找到一种`reverse`方法，`int[]`但很容易编写自己的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T17:07:23.593

Arrays 类中唯一接受比较器的排序方法要求您提供对象数组。类中没有带有 sort(int[], Comparator) 签名的方法

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-29T17:05:51.053

`Arrays.sort(arr,comparator);`不适用于原语。`arr`必须是对象数组。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-07T14:20:26.450

在定义数组时更改 int Integer。更改`int arr[]={};`为`Integer arr[]={};` This 将使您的代码运行*

# html - css 未完全应用于 html5 页面上的表格

> ID：12654604
> 
> 赞同：0
> 
> 时间：2012-09-29T17:00:50.760
> 
> 标签：html, css, html-table

我是 html5 的新手，并开发了一些独立的 html5 页面以及它们各自的样式 css。接下来的问题可能是一个非常基本的问题，但不知何故，经过大量寻找解决方案后，我决定在这里发布我的问题，希望得到一些提示/建议。

这是我的问题。我有一个带有 css 的独立 html 页面。当我在我的机器上本地打开网页时，所有 css 设置都已完美应用。然后我将它上传到我的dreamhost服务器上，上传后当我尝试打开页面时，我丢失了我在页面中使用的表格上所做的所有格式，而所有其他格式看起来都不错。格式在浏览器和 android webviews 上都会消失。我不确定当我在服务器上上传文件时没有应用规则的问题是什么。

以下是我在 html 页面中使用表格的方式：

```
<!-- Article 1 start -->

            <div class="line"></div>  <!-- Dividing line -->

            <article id="article1"> <!-- The new article tag. The id is supplied so it can be scrolled into view. -->
                <h3>Comparison Symbols</h3>

                <div class="line"></div>

                <div class="articleBody clear">

                <p> If you’re writing programs in C, you need to use comparison symbols. The symbols C uses, their meanings, and examples are shown in the following table: </p>
                <p>
                    <table>
                              <tr>
                                <th>Symbol</th> 
                                <th>Meaning</th>
                                <th>Examples</th>
                              </tr>

                              <tr>
                                <td></td>
                                <td></td>
                              </tr>

                              <tr>
                                <td> < </td>
                                <td>Less than</td>
                                <td>2 < 6</td>
                              </tr>

                              <tr>
                                <td>==</td>
                                <td>Equal to</td>
                                <td>5 == 5</td>
                              </tr>

                              <tr>
                                <td>></td>
                                <td>Greater than</td>
                                <td>8 > 5</td>
                              </tr>

                              <tr>
                                <td><=</td>
                                <td>Less than or equal to</td>
                                <td>4 <= 5</td>
                              </tr>

                              <tr>
                                <td>>=</td>
                                <td>Greater than or equal to</td>
                                <td>9 >= 5</td>
                              </tr>

                              <tr>
                                <td>!=</td>
                                <td>Not equal to</td>
                                <td>1 != 0</td>
                              </tr>
                    </table>            
                </p>
                </div>
            </article> 
```

以下是我在 css 中用于表格格式的代码行：

```
/* table properties */

th {width:150px;
    text-align:left;
    font-weight:bold;
    text-decoration: underline;}
td {text-align:left} 
```

如果有人可以提供一些建议，那将是一个很大的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T05:13:20.410

服务器上的 css 文件正在恢复到旧版本。当恢复解决并且css保留以下配置时，问题就解决了：

```
th {width:150px;
text-align:left;
font-weight:bold;
text-decoration: underline;}
td {text-align:left} 
```

# three20 - Three20 和 iOS 6 为 armv7s 架构编译错误

> ID：12654608
> 
> 赞同：0
> 
> 时间：2012-09-29T17:01:15.033
> 
> 标签：three20, ios6, xcode4.5

我已经尝试解决这个问题几个小时了，并用谷歌搜索了所有关于它的信息，但没有找到任何解决方案。

我刚刚使用 SDK 6 更新到 Xcode 4.5，我使用 Three20 lib 的项目没有编译。

它告诉我某些类未找到或对 armv7s 有效

我尝试了很多东西，有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T17:09:51.233

您使用的库可能未设置为支持 iOS6 armv7s 架构。检查 Three20 Lib 站点以获取支持 armv7s 的库的更新版本。或者从您的项目目标构建设置中删除该设置。

从架构列表中删除 armv7s。删除所有这些，然后简单地输入 armv7。

![在此处输入图像描述](../Images/43958fd23d0e2c007e967d3a19f52bb3.png)

# android - 使用自定义适配器搜索 ListView，不显示任何结果且不会导致程序崩溃

> ID：12654609
> 
> 赞同：1
> 
> 时间：2012-09-29T17:01:22.657
> 
> 标签：android, listview, search, adapter

我正在尝试在使用自定义适配器的 ListView 上实现搜索功能。我正在关注这个例子：http: [//justcallmebrian.com/](http://justcallmebrian.com/?p=149) ?p=149 。我能够编辑代码并将其放入我的适配器中。但是，它并没有带来任何结果。你能看看我的代码，让我知道我错过了什么或者我还能做些什么吗？

这是列表视图：

```
public class DataView extends Activity implements OnItemClickListener {

private static final String rssFeed = "http://leobee.com/android/push/login/schedule.php";
private static final String AddEvent = "http://leobee.com/android/push/login/deleteUpdate.php";

private static final String ARRAY_NAME = "events";
private static final String EVENT_NAME = "event_name";
private static final String EVENT_ID = "event_id";
private static final String EVENT_DATE = "event_date";
private static final String EVENT_START = "event_start";
private static final String EVENT_END = "event_end";
private static final String EVENT_LOCATION = "event_location";
private static final String EVENT_DELETE_FLAG = "event_delete_flag";

List<Item> arrayOfList;
List<String> sortOfList;
  SimpleAdapter simpleadapter;

ListView listView;
NewsRowAdapter objAdapter;
List<Integer> deleteList;
String undelete;
String eventNameDeleted;
String eventIdDeleted;
String eventDateDeleted;
String eventStartDeleted;
String eventEndDeleted;
String eventLocationDeleted;
JSONObject json;
String addBack = "0";
Button btnMessage;
Button btnLogout;
UserFunctions userFunctions;
EditText searchBox;
int textlength = 0;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.schedulelistview);

    userFunctions = new UserFunctions();
    if (userFunctions.isUserLoggedIn(getApplicationContext())) {

        listView = (ListView) findViewById(R.id.listview);
        listView.isTextFilterEnabled();
        listView.setOnItemClickListener(this);
        deleteList = new ArrayList<Integer>();      
        btnLogout = (Button) findViewById(R.id.btnLogout);
        btnMessage = (Button) findViewById(R.id.btnMessage);
        searchBox = (EditText) findViewById(R.id.EditText01);

        arrayOfList = new ArrayList<Item>();

        if (Utils.isNetworkAvailable(DataView.this)) {
            new MyTask().execute(rssFeed);
        } else {
            showToast("No Network Connection. Application is unable to load data.");
        }

    } else {

    }

}

class MyTask extends AsyncTask<String, Void, String> {

    ProgressDialog pDialog;

    @Override
    protected void onPreExecute() {
        super.onPreExecute();

        pDialog = new ProgressDialog(DataView.this);
        pDialog.setMessage("Loading...");
        pDialog.setCancelable(false);
        pDialog.show();
    }

    @Override
    protected String doInBackground(String... params) {
        return Utils.getJSONString(params[0]);
    }

    @Override
    protected void onPostExecute(String result) {
        super.onPostExecute(result);

            try {
                JSONObject mainJson = new JSONObject(result);
                JSONArray jsonArray = mainJson.getJSONArray(ARRAY_NAME);
                for (int i = 0; i < jsonArray.length(); i++) {
                    JSONObject objJson = jsonArray.getJSONObject(i);

                    Item objItem = new Item();

                    // here objItem is reciveing and processing data from
                    // JSON string text
                    objItem.setId(objJson.getInt(EVENT_ID));// names from
                    objItem.setName(objJson.getString(EVENT_NAME));
                    objItem.setDate(objJson.getString(EVENT_DATE));
                    objItem.setDeleteFlag(objJson.getInt(EVENT_DELETE_FLAG));

                    arrayOfList.add(objItem);

                }
            } catch (JSONException e) {
                e.printStackTrace();
            }

            for (int i = 0; i < arrayOfList.size(); i++) {

                Item deletflagCheck = arrayOfList.get(i);

                if (deletflagCheck.getDeleteFlag() == 1) {

                    deleteList.add(deletflagCheck.getId());
                } else {

                }

            }

        }
        setAdapterToListview();

    }
}

@Override
public void onItemClick(AdapterView<?> parent, View viewDel, int position,
        long id) {

    Item deletflagCheck = arrayOfList.get(position);

    if (deletflagCheck.getDeleteFlag() == 1) {

        showDeleteDialog(position);

    } else {

        Intent intent = new Intent(DataView.this.getApplicationContext(),
                UpdateServer.class);

        for (int i = 0; i < 1; i++) {
            Item item = arrayOfList.get(position);
            intent.putExtra("id", item.getId());
            intent.putExtra("name", item.getName());
            intent.putExtra("date", item.getDate());
            intent.putExtra("startTime", item.getStartTime());
            intent.putExtra("endTime", item.getEndTime());
            intent.putExtra("location", item.getLocation());
            intent.putExtra("deleteFlag", item.getDeleteFlag());

        }
        startActivity(intent);
    }

}

public void setAdapterToListview() {

    objAdapter = new NewsRowAdapter(DataView.this,
            R.layout.schedulelistrow, arrayOfList, deleteList);
    objAdapter.notifyDataSetChanged();
    listView.setAdapter(objAdapter);

    searchBox.addTextChangedListener(new TextWatcher(){

            @Override
            public void afterTextChanged(Editable arg0) {
                // Do nothing
            }

            @Override
            public void beforeTextChanged(CharSequence s, int start, int count, int after) {
                // Do nothing
            }

            @Override
            public void onTextChanged(CharSequence s, int start, int before, int count) {
                objAdapter.getFilter().filter(s);
            }

        });

}

public void showToast(String msg) {
    Toast.makeText(DataView.this, msg, Toast.LENGTH_LONG).show();
}

} 
```

物品类别：

```
public class Item {
    private int id;
    private String name;
    private String date;
    private String startTime;
    private String endTime;
    private String location;
    private int deleteFlag;

    public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getDate() {
        return date;
    }

    public void setDate(String date) {
        this.date = date;
    }

    public String getStartTime() {
        return startTime;
    }

    public void setStartTime(String startTime) {
        this.startTime = startTime;
    }

    public String getEndTime() {
        return endTime;
    }

    public void setEndTime(String endTime) {
        this.endTime = endTime;
    }

    public String getLocation() {
        return location;
    }

    public void setLocation(String location) {
        this.location = location;
    }

    public int getDeleteFlag() {
        return deleteFlag;
    }

    public void setDeleteFlag(int deleteFlag) {
        this.deleteFlag = deleteFlag;
    }
} 
```

适配器：

```
public class NewsRowAdapter extends ArrayAdapter<Item> {

    private Activity activity;
    private List<Item> items;
    private Item objBean;
    private int row;
    private List<Integer> disable;
    View view ;
    int disableView;
    ListFilter  filter ;
    List<Item> filteredItems;

    public NewsRowAdapter(Activity act, int resource, List<Item> arrayList, List<Integer> disableList) {
        super(act, resource, arrayList);
        this.activity = act;
        this.row = resource;
        this.items = arrayList;
         filteredItems = items;
        this.disable=disableList;

    }

    public int getCount() {
        return items.size();        
    }
    public Item getItem(int position) {
        return items.get(position);
    }
    public long getItemId(int position) {
        return position;
    }

        @Override
        public int getItemViewType(int position) {

        for(int k =0;k < disable.size();k++){
            if(position==disable.get(k)){

                disableView=disable.get(k);
                System.out.println("disagle view at" +disableView);

            } 

        }

    return position;
}

            @Override
            public View getView(final int position, View convertView, ViewGroup parent) {
                View view = convertView;
                ViewHolder holder;

                if (view == null) {
                    LayoutInflater inflater = (LayoutInflater) activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                    view = inflater.inflate(row, null);

                    getItemViewType(position);

                    if(position==disableView){ 
                        view.setBackgroundColor(Color.YELLOW);

                        }else{
                            view.setBackgroundColor(Color.WHITE);

                        }

                    //ViewHolder is a custom class that gets TextViews by name: tvName, tvCity, tvBDate, tvGender, tvAge;
                    holder = new ViewHolder();

                    /* setTag Sets the tag associated with this view. A tag can be used to
                     *  mark a view in its hierarchy and does not have to be unique 
                     *  within the hierarchy. Tags can also be used to store data within
                     *   a view without resorting to another data structure.

        */
                    view.setTag(holder);
                } else {

                    getItemViewType(position);

                    if(position==disableView){ 
                        view.setBackgroundColor(Color.YELLOW);

                        }else{
                            view.setBackgroundColor(Color.WHITE);

                        }

                    //the Object stored in this view as a tag
                    holder = (ViewHolder) view.getTag();
                }

                if ((items == null) || ((position + 1) > items.size()))
                    return view;

                objBean = items.get(position);

        holder.tv_event_name = (TextView) view.findViewById(R.id.tv_event_name);
        holder.tv_event_date = (TextView) view.findViewById(R.id.tv_event_date);
        holder.tv_event_start = (TextView) view.findViewById(R.id.tv_event_start);
        holder.tv_event_end = (TextView) view.findViewById(R.id.tv_event_end);
        holder.tv_event_location = (TextView) view.findViewById(R.id.tv_event_location);

        if (holder.tv_event_name != null && null != objBean.getName()
                && objBean.getName().trim().length() > 0) {
            holder.tv_event_name.setText(Html.fromHtml(objBean.getName()));

        }
        if (holder.tv_event_date != null && null != objBean.getDate()
                && objBean.getDate().trim().length() > 0) {
            holder.tv_event_date.setText(Html.fromHtml(objBean.getDate()));
        }
        if (holder.tv_event_start != null && null != objBean.getStartTime()
                && objBean.getStartTime().trim().length() > 0) {
            holder.tv_event_start.setText(Html.fromHtml(objBean.getStartTime()));
        }
        if (holder.tv_event_end != null && null != objBean.getEndTime()
                && objBean.getEndTime().trim().length() > 0) {
            holder.tv_event_end.setText(Html.fromHtml(objBean.getEndTime()));
        }
        if (holder.tv_event_location != null && null != objBean.getLocation ()
                && objBean.getLocation ().trim().length() > 0) {
            holder.tv_event_location.setText(Html.fromHtml(objBean.getLocation ()));

        }

        return view;
    }

    public class ViewHolder {
        public TextView 
        tv_event_name,
        tv_event_date,
        tv_event_start,
        tv_event_end,
        tv_event_location
        /*tv_event_delete_flag*/;

    }

    private class ListFilter extends Filter{

        List<Item> filt;
        List<Item> tmpItems;

        protected FilterResults performFiltering(CharSequence constraint) {
            FilterResults retval = new FilterResults();
            List<Item> filt;
            List<Item> tmpItems;
            retval.values = items;
                        retval.count = items.size();
            if(constraint != null && constraint.toString().length() > 0) {
                constraint = constraint.toString().toUpperCase();
                                 filt = new ArrayList<Item>();
                                 tmpItems = new ArrayList<Item>();
                                tmpItems.addAll(items);
                                for(int i = 0; i > tmpItems.size(); i++) {
                                    Item sf = tmpItems.get(i);
                                    if(sf.getName().toUpperCase().contains(constraint)) {
                                        filt.add(sf);
                                    }
                                }
                               retval.count = filt.size();
                               retval.values = filt;
                           }
                      return retval;
            }

        @Override
        protected void publishResults(CharSequence constraint, FilterResults results) {

            filteredItems = (ArrayList)results.values;
            notifyDataSetChanged();
            clear();

            for (int i = 0; i> filteredItems.size(); i++){
                add(filteredItems.get(i));
            }
            notifyDataSetInvalidated();

        }       

    }

    @Override
    public Filter getFilter() {
        if (filter == null){
            filter = new ListFilter();
        }
        return filter;
    }

} 
```

xml布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/layoutButtons"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:padding="5dp" >

        <Button
            android:id="@+id/btnLogout"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight=".30"
            android:text="Logout" />

        <Button
            android:id="@+id/btnMessage"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight=".70"
            android:text="Send Message To All" />
    </LinearLayout>

    <EditText
        android:id="@+id/EditText01"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:hint="Search" >
    </EditText>

    <ListView
        android:id="@+id/listview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />

</LinearLayout> 
```

# algorithm - 创建排列数组

> ID：12654610
> 
> 赞同：1
> 
> 时间：2012-09-29T17:01:44.407
> 
> 标签：algorithm

我有一个看起来像这样的数组

```
mainArray =>
    [a] =>
        [A]
        [B]
        [C]
    [b] =>
        [D]
        [E]
        [F]
    [c] =>
        [G]
        [H]
        [I] 
```

我想将它们放入这样的数组中：

```
secondArray =>
    [0] => { [A], [D], [G] }
    [1] => { [A], [E], [G] }
            .
            .
            .
    [n] => { [C], [F], [I] } 
```

我无法弄清楚如何在 $secondArray 中获取正确数量的元素，这些元素以 { [A],[B], .. } 中的某个元素开头。例如，有多少以 [A] 开头。

这就是我认为我必须做的：

```
secondArray =>
   [0] =>
        [A]

secondArray =>
   [0] =>
        [A]
        [D]

secondArray =>
   [0] =>
        [A]
        [D]
        [G]

secondArray =>
   [0] =>
        [A]
        [D]
        [G]
   [1] =>
        [A]
        [D]
        [H]

secondArray =>
   [0] =>
        [A]
        [D]
        [G]
   [1] =>
        [A]
        [D]
        [H]
   [2] =>
        [A]
        [D]
        [I]

secondArray =>
   [0] =>
        [A]
        [D]
        [G]
   [1] =>
        [A]
        [D]
        [H]
   [2] =>
        [A]
        [D]
        [I]
   [3] =>
        [A]
        [E]
        [G]
   [4] =>
        [A]
        [E]
        [H]
   [5] =>
        [A]
        [E]
        [I]

secondArray =>
   [0] =>
        [A]
        [D]
        [G]
   [1] =>
        [A]
        [D]
        [H]
   [2] =>
        [A]
        [D]
        [I]
   [3] =>
        [A]
        [E]
        [G]
   [4] =>
        [A]
        [E]
        [H]
   [5] =>
        [A]
        [E]
        [I]
   [6] =>
        [A]
        [F]
        [G]
   [7] =>
        [A]
        [F]
        [H]
   [8] =>
        [A]
        [F]
        [I] 
```

等等，但我真的想不出如何实现它......

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T17:56:46.013

您可以按顺序生成元素。

要实现迭代器：

```
-remember the array of input arrays, if there exists a next element.
   and an array of indexes of the same length.
-if any input array is empty, the result set is empty and there is no next (first) element.
-initialise the array of indexes to all zeroes.

To get the next element:
-If you remember there is no next element, fail.
-compute the result:
--start with an empty result
--For each input array and its corresponding index
---Append input[index] to the result
-compute the next set of indexes:
--Iterate the indexes in reverse order. For each index
---Increment the index
---If the index now points past its corresponding input array
----Reset the index to zero
---Else
----Return the result, exiting the function.
-Remember there is no next element
-Return the result (last element). 
```

如果您确实想要一次所有组合，则代码会稍微简化：

```
-if any input array is empty, the result set is empty.
-initialise the array of indexes to all zeroes.
-compute the result and store in the result set.
-while not done generating results:
--Iterate the indexes in reverse order. For each index
---Increment the index
---If the index now points past its corresponding input array
----Reset the index to zero
---Else
----Compute the result from the current indexes
----Add the result to the result set
----Continue generating the results
--(all indexes were reset to zero) finish generating the results.
-return the result set. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-18T23:39:57.487

在红宝石中：

```
['A', 'B', 'C'].product(['D', 'E', 'F'])
# => [['A', 'D'], ['A', 'E']... 
```

`Array#product`可以接受多个数组。

# javascript - 多个链接访问同一个JQuery方法

 > ID：12654612
> 
> 赞同：1
> 
> 时间：2012-09-29T17:01:58.067
> 
> 标签：javascript, jquery, html

我的页面中有多个从数据库呈现的链接。所有这些我都给出了相同的 ID，并从该 ID 创建了一个 JQuery click 函数。我试图运行一个简单的测试来调用警报，但它不起作用。它不应该工作吗？有更好的方法吗？

```
$("#lkResumeIt").click(function () {
    alert("resume it");
});

<a id='lkResumeIt' href='#' contentID='1'>Item 1</a>
<a id='lkResumeIt' href='#' contentID='18'>Item 2</a>
<a id='lkResumeIt' href='#' contentID='22'>Item 3</a>
... 
```

当元素是静态的时，下面使用类选择器的代码可以正常工作，但是当它们是动态的时，它们就不行了。请参阅下面的实际代码：

```
<script language="javascript">

$("#divContent").on('click', 'a.linky', function (event) {
    alert("resume it");
});

            function RunIt() {
                $("#divContent").html("");
                var jsongo = '';
                $.ajax({
                    type: 'POST',
                    url: '/Controller/FollowingPaused/',
                    data: jsongo,
                    success: function (msg) {
                        for (i = 0; i < msg.length; i++) {
                            var htmlCode = "<a href='/Controller/Details/" + msg[i].ID + "' style = 'float: left;'><img class='packageImage' border='0' src='" + msg[i].Size0Path + "' /></a>";
                            htmlCode += "<span style='float: left;margin: 5px 0px 0px 10px;'>" + "<b>" + msg[i].TheName + "</b><br>";

                            if (msg[i].IsPaused == true) {
                                //htmlCode += "<a href='/Controller/Resume/" + msg[i].ID + "'>Resume</a>";
                                htmlCode += "<a href='#bar' class=linky contentID='" + msg[i].ID + "'>Resume</a>";
                            } else {
                                //htmlCode += "<a href='/Controller/Pause/" + msg[i].ID + "'>Pause</a>";
                                htmlCode += "<a href='#bar' class=linky contentID='" + msg[i].ID + "'>Pause</a>";
                            }
                            htmlCode += "</span>";
                            htmlCode += "<div class='clear'></div>";
                            $("#divContent").append(htmlCode);
                        }
                    }
                });
            }

RunIt() 

</script>

        <div style="display: table-row;">
            <div id="divContent" style="display: table-cell; line-height: 1.5;">
            </div>
        </div> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-29T17:03:39.960

ID 不能重复。如果你想要一个 jQuery 钩子，请使用`class`，它可以被复制。

例子：

**HTML：**

`<a href="#bar" class="linky">Foo</a>`

**JavaScript：**

```
$("a.linky").on('click', function (event) {
    alert("resume it");
}); 
```

**对于动态创建的元素：**

```
$("#your-static-wrapper-element").on('click', 'a.linky', function (event) {
    alert("resume it");
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-29T17:29:32.937

您不能两次使用相同的 id，因为：

您的代码不会被 W3C 验证，这意味着您可能会对您的网站跨浏览器的兼容性感到头疼。它可以在一个浏览器中正常工作，而在其他浏览器中则不能。

您可以使用

```
 <div class="main"></div>
    <div class="main"></div>
$(".main").click(function(){
$(this).something..
}) 
```

# qt - 静态链接 Qt 与开源版本

> ID：12654613
> 
> 赞同：16
> 
> 时间：2012-09-29T17:01:59.703
> 
> 标签：qt, licensing

我正在使用 Qt 开源版本开发应用程序。由于我不想提供 Microsoft Visual Visual C(++) 可再发行组件，因此我想使用 Qt 的静态链接版本。Qt 许可信息[表明](http://qt.digia.com/Product/Licensing)，如果我想在我的应用程序中使用静态链接，我“应该”使用商业 Qt 许可证进行开发，尽管当我使用`configure -static`构建静态 Qt 库的命令时，命令提示符会询问我是否使用商业或Qt 的开源版本。

那么可以用开源版本构建 Qt 吗？我需要商业版才能使用静态链接吗？我不会出售应用程序。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-10T13:21:15.837

编辑 2016 年 4 月

实际上，我最近一直在深入阅读 LGPL，并询问了一些有关该主题的专家。事实证明，在封闭源代码应用程序中无法为 Qt 使用静态链接更多的是一种培养的传说，与现实无关。

LGPL 需要的是最终用户可以将应用程序重新链接到不同版本的库。使用动态链接是实现此目的的一种方法，但您可以轻松地提供目标文件，这样您就不必打开源代码并且仍然满足 LGPL 要求。

在 Qt 网站上有 2 个法律常见问题解答，但都没有直接说明您不能这样做。就像没有说你可以一样。但是，如果您这样做，至少有几个例子暗示了模糊的法律威胁。我认为对所有这些都有一个很好的解释——他们不能说你不能在不发表一个可能对他们产生负面法律影响的实际谎言的情况下做到这一点，他们愿意阻止这样做而不是鼓励它，因为它有可能迫使更多人购买商业许可证。

所以简而言之，**是的，你可以**，而且你绝对**应该**最近 Qt 已经成为一个活生生的部署地狱，加上 Qt 5.7 在静态构建中，QML 文件整齐地隐藏在可执行文件中，而不是放在文件系统中，供任何人篡改。只要确保：

*   您的 Qt 构建仅包含模块，根据 LGPL 许可，没有 GPL
*   您的应用程序的 about 部分提到它正在使用 Qt 并包含一个链接，您可以在其中下载应用程序的目标文件
*   在您的应用程序中包含所有相应的许可证文件

最后，您的应用程序实际上必须是“可重新链接的”，也就是说，它必须能够使用提供必要功能的兼容库版本。这意味着如果您在构建之前对 Qt 进行了修改，您也必须以源代码的形式提供这些修改，但只提供对 Qt 的修改，而不是您的应用程序的源代码。

更新：

[这是直接来自GNU FAQ](https://www.gnu.org/licenses/gpl-faq.en.html#LGPLStaticVsDynamic)的摘录：

> 为了遵守 LGPL（任何现有版本：v2、v2.1 或 v3）：
> 
> (1) 如果您静态链接到 LGPL 的库，您还必须以对象（不一定是源）格式提供您的应用程序，以便用户有机会修改库并重新链接应用程序。

这说明得很清楚。

* * *

旧的原始答案：

* * *

只要您的应用程序是开源的并且您提供源代码，就可以静态构建 Qt。如果您想保持源代码关闭，您要么需要昂贵的商业许可证，要么需要使用动态链接。

顺便说一句，使用 Qt 的静态构建非常好，对于 Qt5，我得到大约 7-8 MB 的可执行文件，没有外部依赖项，这比您必须随动态链接的应用程序附带的 20+ MB 的附加 dll 好得多。

有关更多信息，您可以观看此视频：[使用 Qt 开发时做出正确的许可证选择](http://www.youtube.com/watch?v=5HWBaHAvjoo)

总而言之，能做到吗？100% 是的。应该这样做吗？这取决于，出于个人/测试/学习目的，它是 100% 可以的，但是如果您计划分发生产级软件，无论是否商业化，开源与否，您最好先咨询律师。整个主题不必要地复杂，需要解释，因此与律师的咨询变得比昂贵的商业执照更昂贵。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-02-27T18:26:49.673

答案是**肯定的，如果您愿意开源您的应用程序。**

根据 Qt 项目自己对他们使用的许可证的解释，如果您动态链接到 Qt 库，您的应用程序可以是封闭源代码或开放的。但是，如果您静态链接，则您的应用程序受 LGPL 条款的约束。

Qt 项目使用的确切语言是这样的：

> 在动态链接的情况下，可以（但不是强制）保持应用程序源代码的专有，只要它是“使用库的工作” - 通常通过库的动态链接来实现。在库的静态链接的情况下，应用程序本身可能不再是“使用库的工作”，因此受 LGPL 约束。建议要么动态链接，要么在 LGPL 下向用户提供应用程序源代码。

*[(http://qt-project.org/legal.html)](https://web.archive.org/web/20140808121347/http://qt-project.org/legal.html)*

其他一些答案中关于情况“完全不清楚”的建议是完全不真实的 - Qt 项目试图非常清楚在什么情况下允许使用 LGPL 许可证，静态链接就是其中之一只要应用程序也是 LGPL。

* * *

由于原始问题指定非商业（不一定是开源），因此提问者需要决定他们是否可以允许在 LGPL（或扩展的 GPL 下分发，因为上面的页面还说“LGPL 可以转换为 GNU General Public执照”）。

# linux - linux上的pid和进程混淆

> ID：12654615
> 
> 赞同：0
> 
> 时间：2012-09-29T17:02:14.063
> 
> 标签：linux, unix, pid

从阅读文档和在线来看，大多数人一直在说要杀死 linux 中的进程，只需要命令 kill “pid”。

```
For example to kill memcached would be kill $(cat memcached.pid) 
```

但是对于我试图杀死的几乎所有进程，包括上面的进程，这都行不通。我设法让它使用不同的命令：

```
ps aux | grep (process name here) 
```

无论出于何种原因，该命令都会得到一个不同的 pid，它在终止程序时会起作用。

我想我的问题是，为什么有不同的pid？id 的意义不是唯一吗？为什么 celery、memcached 和其他进程在使用 aux | 时都有不同的 pid？grep 命令，与 .pid 文件中的 pid 相比？这是我的配置中的某种错误还是这样？

此外，在哪里可以获得 linux 中可执行文件的所有参数和描述？

我知道“man”命令对某些功能很有用，但它不适用于许多可执行文件，例如 celery。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T17:09:12.873

进程 ID ( `pid`) 由操作系统在进程启动时即时分配。它是独一无二的，因为没有两个进程具有相同的 ID。但是，不能保证实际值从一次进程运行到另一次运行是相同的。考虑它的最佳方式就像那些“正在服务”的票：

![请取一个号码](../Images/9629fa992d8ade7e09dd2485531373fe.png)

您可以通过`ps`and查找 ID 是正确的`grep`，尽管您可能会发现使用起来更容易：

```
pgrep (process name here) 
```

此外，如果您只想终止该进程，您甚至可以跳过上述步骤并使用：

```
pkill (process name here) 
```

# mysql - 需要解决这个sql查询

> ID：12654617
> 
> 赞同：-1
> 
> 时间：2012-09-29T17:02:34.580
> 
> 标签：mysql, sql

如何从下表中找到在超过 2 家公司工作的员工的姓名：

```
Employee (employee_name, street, city, age)

Works (employee_name, company_name, salary) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T17:04:49.920

这应该会为您提供为超过 2 家公司工作的员工姓名。如果您需要更多详细信息，可以加入 Employee 表。

```
SELECT
 employee_name
FROM
 Works
GROUP BY
 employee_name
HAVING
 COUNT(*) > 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T17:05:04.567

```
 SELECT employee_name FROM Works GROUP BY employee_name HAVING COUNT(*) > 2 
```

这将创建一个列表，每个员工代表一次，然后过滤掉员工，以便只显示那些为该组做出贡献的记录超过两条的员工。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T17:08:01.590

除了之前提供的答案（顺便说一句是正确的），如果您需要加入表，请考虑使用数字作为主键（我假设employee_name 是两个表中的主键）。

这将加快您的查询速度（假设您在一个或两个表中有很多记录），因为您的 DBMS 将比较整数而不是字符串，这要快得多。

# css - 第一个孩子的翻转列表已经激活？

> ID：12654620
> 
> 赞同：2
> 
> 时间：2012-09-29T17:03:22.340
> 
> 标签：css, list, menu, hover, rollover

对不起我的英语不好，我是法国人！

第一个`li`已经是红色的，但我想要经典的翻转效果（只有 css）

```
<ul>
    <li>1111</li>
    <li>2222</li>
    <li>3333</li>
</ul> 
```

和

```
li:first-child { color: red; }
li:hover { color: red; }
ul:hover li:first-child { color: black; }
li:first-child:hover { color: red; } 
```

最后一行不起作用：当我的鼠标超过 1111 时，他变成黑色而不是保持红色。

请看这里：http: [//jsfiddle.net/cP5rQ/3/](http://jsfiddle.net/cP5rQ/3/)

并感谢您的提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T17:06:42.580

您需要将最后一条规则的[特异性](http://www.htmldog.com/guides/cssadvanced/specificity/)提高到足以使其至少等于第三条规则的特异性；然后它将覆盖第三条规则，并且该项目将变为应有的红色。

通过将最后一条规则编写为

```
ul:hover li:first-child:hover { color: red; }​ 
```

**[看到它在行动](http://jsfiddle.net/QGLqH/)**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T17:08:53.217

这可以解决问题。这是你想要的吗？

```
li:first-child { color: red; }
ul:hover li:first-child { color: black; }
li:hover { color: red; }
ul:hover li:first-child:hover { color: red; }​ 
```

[http://jsfiddle.net/cP5rQ/6/](http://jsfiddle.net/cP5rQ/6/)

# java - 如何创建一个 java servlet 程序并使用 XAMPP Tomcat 运行它？

> ID：12654625
> 
> 赞同：2
> 
> 时间：2012-09-29T17:03:58.667
> 
> 标签：java, eclipse, servlets, xampp

我刚刚学习了 Java 中的 Servlet，但现在我不知道如何运行 Java Servlet 程序。我正在使用 Eclipse SDK，并且已经添加`servlet.jar`到库中。我安装了最新版本的 XAMPP，如下图所示，Tomcat 已经列在 Module 下（根据我在 Google 上的研究，我们将 Tomcat 用于 JSP 和 Servlet。）

![XAMPP 控制面板](../Images/e35606cc4c13d725f2074cee8f1f0514.png)

下面是我从[这个网站](http://www.apl.jhu.edu/~hall/java/Servlet-Tutorial/Servlet-Tutorial-First-Servlets.html "这")得到的一个例子。您能否通过列举如何操作的分步过程来帮助我使用 XAMPP Tomcat 运行该程序？

```
import java.io.*;
import javax.servlet.*;
import javax.servlet.http.*;

public class HelloWorld extends HttpServlet {
  public void doGet(HttpServletRequest request,
                    HttpServletResponse response)
      throws ServletException, IOException {
    PrintWriter out = response.getWriter();
    out.println("Hello World");
  }
} 
```

非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-25T18:13:15.177

我也在使用 xampp 来运行 servlet 和 jspi。
我在本地磁盘中安装了我的 xampp。
因此，要运行 servlet，我给出了以下路径：

```
D:\xampp\Tomcat\lib\servlet-api.jar 
```

在环境变量的类路径中，类似地运行 jsp

```
D:\xampp\Tomcat\lib\jsp-api.jar 
```

所以我认为这就足够了。尝试一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T17:16:36.907

为什么要为 servlet 使用 XAMPP。Tomcat 包含运行 servlet 所需的各种 jar 库。确保将所有 jars 放置在 java wep 应用程序所需的正确目录结构中。您还需要为该 jar 文件设置类路径

# ruby-on-rails - 在 Rails 中，如何创建一个按钮，单击该按钮下载（未打开）存储在 S3 中的电影

> ID：12654627
> 
> 赞同：1
> 
> 时间：2012-09-29T17:04:20.270
> 
> 标签：ruby-on-rails

我很难弄清楚这一点。

我有一个`button_to`应该在单击时下载存储在 S3 上的 .mp4 电影。由于受众非常基础，我需要当他们单击按钮时立即开始下载。无需右键单击和另存为，只需一个按钮即可将文件作为下载发送，而不是在浏览器上打开它。

我尝试使用`send_file`只是为了意识到它适用于本地文件。

知道怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T17:46:19.910

只是使用 a 解决了它`link_to`并直接链接到 S3 文件。亚马逊会自动发送文件以供下载，而不是在浏览器中打开。比我想象的要容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T17:11:55.627

我建议将其制作为 YouTube 视频。如果您需要隐私，请将其设为不公开的 YouTube 视频。

如果这不是一个选项，您应该尝试将 S3 配置为在传递文件时提供以下 http 标头：

```
Content-Disposition:  attachment 
```

# angularjs - 为什么 AngularJS 在选择中包含一个空选项？

> ID：12654631
> 
> 赞同：663
> 
> 时间：2012-09-29T17:04:45.367
> 
> 标签：angularjs

过去几周我一直在使用 AngularJS，而真正困扰我的一件事是，即使在尝试了[http://docs.angularjs.org/api/ng规范中定义的所有排列或配置之后.directive:select](http://docs.angularjs.org/api/ng.directive:select)，我仍然得到一个空选项作为选择元素的第一个子元素。

这里是玉：

```
select.span9(ng-model='form.type', required, ng-options='option.value as option.name for option in typeOptions'); 
```

这里是控制器：

```
$scope.typeOptions = [
    { name: 'Feature', value: 'feature' },
    { name: 'Bug', value: 'bug' },
    { name: 'Enhancement', value: 'enhancement' }
]; 
```

最后，这是生成的 HTML：

```
<select ng-model="form.type" required="required" ng-options="option.value as option.name for option in typeOptions" class="span9 ng-pristine ng-invalid ng-invalid-required">
    <option value="?" selected="selected"></option>
    <option value="0">Feature</option>
    <option value="1">Bug</option>
    <option value="2">Enhancement</option>
</select> 
```

我需要做什么才能摆脱它？

PS：没有这个也可以，但是如果你使用 select2 而没有多重选择，它看起来很奇怪。

* * *

## 回答 #1

> 赞同：655
> 
> 时间：2012-09-29T17:26:45.853

当传递给的一组选项中不存在`option`由 引用的值时，将生成空值。这样做是为了防止意外选择模型：AngularJS 可以看到初始模型未定义或不在选项集中，并且不想自行决定模型值。`ng-model``ng-options`

如果您想摆脱空选项，只需在控制器中选择一个初始值，例如：

```
$scope.form.type = $scope.typeOptions[0].value; 
```

这是 jsFiddle：http: [//jsfiddle.net/MTfRD/3/](http://jsfiddle.net/MTfRD/3/)

简而言之：空选项意味着没有选择有效的模型（有效的意思是：从选项集中）。您需要选择一个有效的模型值来摆脱这个空选项。

* * *

## 回答 #2

> 赞同：241
> 
> 时间：2012-12-10T21:09:14.127

如果您想要一个初始值，请参阅@pkozlowski.opensource 的答案，仅供参考，也可以使用 ng-init 在视图（而不是控制器）中实现：

```
<select ng-model="form.type" required="required" ng-init="form.type='bug'"
  ng-options="option.value as option.name for option in typeOptions" >
</select> 
```

如果您不想要初始值，“可以将值设置为空字符串的单个硬编码元素嵌套到元素中。然后该元素将表示 null 或“未选择”选项”：

```
<select ng-model="form.type" required="required"
  ng-options="option.value as option.name for option in typeOptions" >
    <option style="display:none" value="">select a type</option>
</select> 
```

* * *

## 回答 #3

> 赞同：122
> 
> 时间：2014-06-20T06:48:23.920

**角度 < 1.4**

对于将“null”视为选项之一的有效值的任何人（因此想象“null”是下面示例中*typeOptions*中的一项的值），我发现了一种最简单的方法来确保自动添加隐藏选项是使用 ng-if。

```
<select ng-options="option.value as option.name for option in typeOptions">
    <option value="" ng-if="false"></option>
</select> 
```

为什么**是 ng-if**而不是 ng-hide？因为您想要将上面的第一个选项作为目标的 css 选择器选择目标“真实”选项，而不是隐藏的选项。当您使用量角器进行 e2e 测试和（无论出于何种原因）使用 by.css() 来定位选择选项时，它会变得很有用。

**角度 >= 1.4**

由于对 select 和 options 指令的重构， using`ng-if`不再是一个可行的选项，因此您必须求助于`ng-show="false"`使其再次工作。

* * *

## 回答 #4

> 赞同：36
> 
> 时间：2013-08-28T13:32:54.903

也许对某人有用：

如果你想使用普通选项而不是 ng-options，你可以这样做：

```
<select ng-model="sortorder" ng-init="sortorder='publish_date'">
  <option value="publish_date">Ascending</option>
  <option value="-publish_date">Descending</option>
</select> 
```

将模型设置为内联。使用 ng-init 去除空选项

* * *

## 回答 #5

> 赞同：24
> 
> 时间：2016-03-17T14:47:01.810

类似的事情也发生在我身上，是由升级到 angular 1.5 引起的。`ng-init`似乎正在为较新版本的 Angular 中的*类型进行解析。*在较旧的 Angular`ng-init="myModelName=600"`中，它会映射到一个值为“600”的选项，即`<option value="600">First</option>`，但在 Angular 1.5 中，它不会找到这个，因为它似乎期望找到一个值为 600 的选项，即`<option value=600>First</option>`。然后 Angular 会插入一个随机的第一项：

```
<option value="? number:600 ?"></option> 
```

**角度 < 1.2.x**

```
<select ng-model="myModelName" ng-init="myModelName=600">
  <option value="600">First</option>
  <option value="700">Second</option>
</select> 
```

**角度 > 1.2**

```
<select ng-model="myModelName" ng-init="myModelName='600'">
  <option value="600">First</option>
  <option value="700">Second</option>
</select> 
```

* * *

## 回答 #6

> 赞同：22
> 
> 时间：2016-04-27T14:53:49.427

在这里的众多答案中，我想我会重新发布对我有用并满足以下**所有**条件的解决方案：

*   当 ng-model错误时提供*占位符/提示（例如“--select* *region--* ” w. `value=""`）
*   当 ng-model 值为*falsy*并且用户打开选项下拉菜单时，将选择占位符（此处提到的其他解决方案使第一个选项显示为已选中，这可能会产生误导）
*   允许用户取消选择一个有效值，本质上是再次选择*虚假*/默认值

[![在此处输入图像描述](../Images/028a979739a94d9ab39b439e199a269d.png)](https://i.stack.imgur.com/MGEh5.png)

**代码**

```
<select name="market_vertical" ng-model="vc.viewData.market_vertical"
    ng-options="opt as (opt | capitalizeFirst) for opt in vc.adminData.regions">

    <option ng-selected="true" value="">select a market vertical</option>
</select> 
```

**源代码**

原始问答 - [https://stackoverflow.com/a/32880941/1121919](https://stackoverflow.com/a/32880941/1121919)

* * *

## 回答 #7

> 赞同：17
> 
> 时间：2015-02-27T19:41:50.453

快速解决方案：

```
select option:empty { display:none } 
```

希望它可以帮助某人。理想情况下，选择的答案应该是方法，但如果不可能，那么应该作为补丁工作。

* * *

## 回答 #8

> 赞同：14
> 
> 时间：2014-07-16T16:47:47.880

是的，当 ng-model 属性未定义时，ng-model 将创建空选项值。我们可以避免这种情况，如果我们将对象分配给 ng-model

例子

角度编码

```
$scope.collections = [
    { name: 'Feature', value: 'feature' }, 
    { name: 'Bug', value: 'bug' }, 
    { name: 'Enhancement', value: 'enhancement'}
];

$scope.selectedOption = $scope.collections[0];

<select class='form-control' data-ng-model='selectedOption' data-ng-options='item as item.name for item in collections'></select> 
```

重要的提示：

将 $scope.collections[0] 或 $scope.collections[1] 之类的数组对象分配给 ng-model，不要使用对象属性。如果您从服务器获取选择选项值，使用回调函数，将对象分配给 ng-model

来自 Angular 文档的注意事项

注意：ngModel 通过引用而不是值进行比较。这在绑定到对象数组时很重要。看一个例子[http://jsfiddle.net/qWzTb/](http://jsfiddle.net/qWzTb/)

我试了很多次终于找到了。

* * *

## 回答 #9

> 赞同：9
> 
> 时间：2014-06-11T18:02:11.157

虽然@pkozlowski.opensource 和@Mark 的答案都是正确的，但我想分享我稍微修改过的版本，我总是选择列表中的第一项，不管它的价值如何：

```
<select ng-options="option.value as option.name for option in typeOptions" ng-init="form.type=typeOptions[0].value">
</select> 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2017-05-18T18:14:29.740

我正在使用 Angular 1.4x 并找到了这个示例，因此我使用 ng-init 在选择中设置初始值：

```
<select ng-init="foo = foo || items[0]" ng-model="foo" ng-options="item as item.id for item in items"></select> 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2013-02-03T11:13:23.217

I faced the same issue. If you are posting an angular form with normal post then you will face this issue, as angular don't allow you to set values for the options in the way you have used. If you get the value of "form.type" then you will find the right value. You have to post the angular object it self not the form post.

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2015-02-26T18:58:03.843

一个简单的解决方案是设置一个带有空白值的选项，`""`我发现这消除了额外的未定义选项。

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2016-09-19T20:32:00.460

好的，实际上答案很简单：当有一个 Angular 无法识别的选项时，它包括一个沉闷的选项。你做错的是，当你使用 ng-options 时，它会读取一个对象，比如`[{ id: 10, name: test }, { id: 11, name: test2 }] right?`

这是您的模型值需要将其评估为相等的值，例如您希望选择的值为 10，您需要将模型设置`{ id: 10, name: test }`为选择 10 之类的值，因此它不会创建该垃圾。

希望它可以帮助大家理解，我很难尝试:)

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2018-02-26T09:12:06.360

这个解决方案对我有用：

```
<select ng-model="mymodel">    
   <option ng-value="''" style="display:none;" selected>Country</option>
   <option value="US">USA</option>
</select> 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2015-12-15T15:56:49.217

这对我有用

```
<select ng-init="basicProfile.casteId" ng-model="basicProfile.casteId" class="form-control">
     <option value="0">Select Caste....</option>
     <option data-ng-repeat="option in formCastes" value="{{option.id}}">{{option.casteName}}</option>
 </select> 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2016-01-12T16:06:42.567

这工作得很好

```
<select ng-model="contact.Title" ng-options="co for co in['Mr.','Ms.','Mrs.','Dr.','Prof.']">
    <option style="display:none" value=""></option>
</select> 
```

它的工作方式是，这会在选择某些内容之前显示第一个选项，然后`display:none`从下拉列表中删除它，所以如果你愿意，你可以这样做

```
<select ng-model="contact.Title" ng-options="co for co in['Mr.','Ms.','Mrs.','Dr.','Prof.']">
    <option style="display:none" value="">select an option...</option>
</select> 
```

这将为您提供`select and option`选择之前的信息，但一旦选择它就会消失，并且不会出现在下拉列表中。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2014-09-03T18:31:43.147

这是修复：

对于示例数据，例如：

```
financeRef.pageCount = [{listCount:10,listName:modelStrings.COMMON_TEN_PAGE},    
{listCount:25,listName:modelStrings.COMMON_TWENTYFIVE_PAGE},
{listCount:50,listName:modelStrings.COMMON_FIFTY_PAGE}]; 
```

选择选项应该是这样的： -

```
<select ng-model="financeRef.financeLimit" ng-change="financeRef.updateRecords(1)" 
class="perPageCount" ng-show="financeRef.showTable" ng-init="financeRef.financeLimit=10"
ng-options="value.listCount as value.listName for  value in financeRef.pageCount"
></select> 
```

关键是当我们写`value.listCount`为时`value.listName`，它会自动填充文本，`value.listName`但所选选项的值是`value.listCount`虽然我显示的值是正常的 0,1,2 .. 等等！！！

就我而言，`financeRef.financeLimit`实际上是在抓取`value.listCount`，我可以在控制器中动态地进行操作。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2014-06-25T07:34:45.620

按照相同的顺序在您的控制器中尝试这个：

```
$scope.typeOptions = [
    { name: 'Feature', value: 'feature' }, 
    { name: 'Bug', value: 'bug' }, 
    { name: 'Enhancement', value: 'enhancement' }
];
$scope.form.type = $scope.typeOptions[0]; 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2017-01-28T14:26:06.413

简单的解决方案

```
<select ng-model='form.type' required><options>
<option ng-repeat="tp in typeOptions" ng-selected="    
{{form.type==tp.value?true:false}}" value="{{tp.value}}">{{tp.name}}</option> 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2017-09-13T08:52:02.193

我有同样的问题，我（删除“ng-model”）改变了这个：

```
<select ng-model="mapayear" id="mapayear" name="mapayear" style="  display:inline-block !important;  max-width: 20%;" class="form-control">
  <option id="removable" hidden> Selecione u </option>
    <option selected ng-repeat="x in anos" value="{{ x.ano }}">{{ x.ano }}
</option>
</select> 
```

对此：

```
<select id="mapayear" name="mapayear" style="  display:inline-block !important;  max-width: 20%;" class="form-control">
  <option id="removable" hidden> Selecione u </option>
    <option selected ng-repeat="x in anos" value="{{ x.ano }}">{{ x.ano }}
</option>
</select> 
```

现在它可以工作了，但在我的情况下，这是因为我从 ng.controller 中删除了该范围，检查你是否没有这样做。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2016-12-20T16:49:51.003

我想补充一点，如果初始值来自某个父元素或 1.5 组件的绑定，请确保传递了正确的类型。如果`@`在绑定中使用，传递的变量将是字符串，如果选项是例如。整数然后将显示空选项。

要么正确解析 init 中的值，要么使用`<`和不绑定`@`（除非必要，否则不推荐用于性能）。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2019-08-30T01:51:09.373

我们可以使用 CSS 来隐藏第一个选项，但是在 IE 10、11 中不起作用。最好的方法是使用 Jquery 删除元素。此解决方案适用于在 chrome 和 IE10 中测试的主要浏览器，11

此外，如果您使用 angular ，有时使用 setTimeout 可以

```
$scope.RemoveFirstOptionElement = function (element) {
    setTimeout(function () {
        $(element.children()[0]).remove();
    }, 0);
}; 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2019-03-22T07:41:36.167

请参阅 angularjs 文档中的示例如何克服这些问题。

1.  [在此处](https://docs.angularjs.org/api/ng/directive/select#examples)转到此文档链接
2.  查找“**通过 ngModel 解析/格式化将选择绑定到非字符串值**”
3.  在那里你可以看到，名为“ **convertToNumber** ”的指令解决了这个问题。

这个对我有用。也可以在这里查看它是如何工作[的](https://stackblitz.com/edit/angularjs-select?embed=1&file=home/index.js)

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2017-04-05T13:23:50.200

当您无法控制选项时，使用 jQuery 的研磨解决方案

html:

```
<select id="selector" ng-select="selector" data-ng-init=init() >
...
</select> 
```

js：

```
$scope.init = function () {
    jQuery('#selector option:first').remove();
    $scope.selector=jQuery('#selector option:first').val();
} 
```

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2017-08-23T19:05:11.060

如果你使用 ng-init 你的模型来解决这个问题：

```
<select ng-model="foo" ng-app ng-init="foo='2'"> 
```

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2017-11-19T19:30:51.817

唯一对我有用的是使用`track by`in `ng-options`，如下所示：

```
 <select class="dropdown" ng-model="selectedUserTable" ng-options="option.Id as option.Name for option in userTables track by option.Id"> 
```

# python - Python 2.7.2 Win32 #循环遍历List，缓冲List的一部分，多次调用函数，SAME返回

> ID：12654637
> 
> 赞同：0
> 
> 时间：2012-09-29T17:05:33.273
> 
> 标签：python, function, loops, return

我编写了一些多次调用函数的小型 Python 脚本。该函数应始终返回其他值，因为缓冲区始终是唯一的（由于`.pop(0)`）。但回报总是一样的。如果我在循环之外调用该函数两次`result1 = x(buffer1)`，结果是唯一的。`result2 = x(buffer2)`但是一旦我尝试像在伪代码中那样调用函数，结果总是一样的。似乎 Python 只执行一次函数，然后打印它的结果。我已经在`PHP`and中实现了这段代码`VB.net`，它可以正常工作。这似乎是一个特定的 Python 事物。有人可以解释一下。：/

伪代码

```
function x()
    list = []
    buffer = []
    for l in list:
        buffer.append(l)
        if len(buffer) == y:
            return = x(buffer)
        buffer.pop(0) 
```

Python-代码

```
 ema_length = {66:0,74:0,89:0}
    def ema(length):    
        relevant = len(length)
        multiplier = 2 / (relevant + 1)
        sum_vector = 0
        for vector in length:
            sum_vector += vector    
            current_vector = vector
        sma = sum_vector / relevant
        if ema_length [relevant] == 0:
            ema_length [relevant] = sma 
        else:
            ema_length [relevant] = (current_vector - ema_length [relevant]) * multiplier + ema_length [relevant]
        return ema_length [relevant]

    buffer = []
    for d in data:
        buffer.append(d)
        if len(buffer) == 89:
            ema66 = ema(buffer [89 - 66:89]) # should be unique
            ema74 = ema(buffer [89 - 74:89]) # should be unique
            ema89 = ema(buffer [89 - 89:89]) # should be unique
            ema_overall = ema66 - ema74 - ema89 
            buffer.pop(0) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T17:11:13.917

您正在将缓冲区传递给函数，但没有使用它.. 像这样。:-

```
def x(old_buffer):
    list = []
    buffer = old_buffer
    for l in list:
        buffer.append(l)
        if len(buffer) == y:
            return = x(buffer)
        buffer.pop(0) 
```

`def`我们使用not `function`...定义函数

顺便说一句，您使用这种->`return = x(buffer)`返回方式的目的是什么。?? 中间在做什么`=`？？

`list`另外，在使用它之前，我没有看到任何添加到其中的内容。您是否将任何内容添加到`list`其中`function`？否则，您在每次通话时都会重新创建它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T18:37:05.790

我认为这是问题所在：

```
def ema(length):    
    # ...
    for vector in length:
        sum_vector += vector    
        current_vector = vector
    sma = sum_vector / relevant
    if ema_length [relevant] == 0:
        ema_length [relevant] = sma 
    else:
        ema_length [relevant] = (current_vector - ema_length [relevant]) * multiplier + ema_length [relevant]
    return ema_length [relevant] 
```

该函数`ema`从缓冲区中获取值列表。最后一个元素总是相同的（因为你总是用 来调用它`buffer[89 - X:89]`）。现在，您循环遍历元素，将它们相加并设置`current_vector`为当前元素。循环完成后，`current_vector`设置为最后一个，`buffer[89]`--always。之后您使用`current_vector`设置返回值。所以问题是你提前退出循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T02:46:26.610

```
multiplier = 2 / (relevant + 1) # floats are rounded! => * with 0 => same result
multiplier = float(2) / float(relevant + 1) # unique values! :) 
```

# java - 听者作画

> ID：12654642
> 
> 赞同：-2
> 
> 时间：2012-09-29T17:06:32.353
> 
> 标签：java, swing, user-interface

我有一个有点复杂的组件监听器。它有很多计算取决于 GUI 的当前状态（具体来说是组件高度）。

据我所知，侦听器在与处理 GUI 的 EDT 分开的线程中执行，因此仅在侦听器执行其代码后才执行重绘和验证方法。有没有办法从听众线程中重新绘制 immedatley？

由于侦听器的复杂性，SwingWorker 不是一个选项......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T19:20:12.180

我觉得你的理解有问题。系统触发的所有事件都是从触发它们的线程分派的。也就是说，如果您`fireXxxEvent`从不同的线程手动调用 THEN，它将从该线程上下文通知它的侦听器。但是，所有系统触发事件（例如鼠标和按键事件）都将在 EDT 内发生。

这是一个简单的测试...

```
public static void main(String[] args) {

    EventQueue.invokeLater(new Runnable() {

        @Override
        public void run() {

            try {
                UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
            } catch (ClassNotFoundException ex) {
            } catch (InstantiationException ex) {
            } catch (IllegalAccessException ex) {
            } catch (UnsupportedLookAndFeelException ex) {
            }

            JButton button =  new JButton("Click me");
            button.addActionListener(new ActionListener() {

                @Override
                public void actionPerformed(ActionEvent e) {
                    System.out.println("Am I on the EDT = " + EventQueue.isDispatchThread());
                }
            });

            JLabel label = new JLabel("Click me");
            label.addMouseListener(new MouseAdapter() {

                @Override
                public void mouseClicked(MouseEvent e) {
                    System.out.println("Am I on the EDT = " + EventQueue.isDispatchThread());
                }

            });

            JFrame frame = new JFrame();
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            frame.setLayout(new GridBagLayout());

            GridBagConstraints gbc = new GridBagConstraints();
            gbc.gridx = 0;
            gbc.gridy = 0;
            frame.add(label, gbc);
            gbc.gridy++;
            frame.add(button, gbc);

            frame.pack();
            frame.setLocationRelativeTo(null);
            frame.setVisible(true);

        }
    });

} 
```

气垫船积分有效。任何耗时的任务都应在 EDT 的后台执行。

您应该在适当的情况下使用 SwingUtilities.invokeLater/invokeAndWait 与 EDT 重新同步。

# javascript - 任何用于动画饼图的 JS 框架？

> ID：12654647
> 
> 赞同：0
> 
> 时间：2012-09-29T17:06:55.183
> 
> 标签：javascript, html, css, canvas

我正在搜索 JS/HTML5/CANVAS 解决方案，用于为具有不同值的饼图制作动画。我想可以点击三年中的一年，效果可能是饼图正在**改变动画**。我还没有找到一个有这样一个按钮来切换的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T05:43:53.290

好的...我以为我已经找到了带有煎茶图表的解决方案，但它基于画布并且在移动平台上表现非常糟糕...在这里我找到了一个 css3 解决方案，这挽救了我的一天！[http://ehsankia.com/css3/3.php](http://ehsankia.com/css3/3.php)这是一个非常好的工作！（因为css中> 180°角的问题）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T17:11:10.447

Sencha 图表是一个非常好的框架。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T17:11:56.333

像这样的东西 - [http://www.htmldrive.net/items/demo/921/Cool-HTML5-and-jQuery-Animated-pie-Chart](http://www.htmldrive.net/items/demo/921/Cool-HTML5-and-jQuery-Animated-pie-Chart)？

您将图表用于什么目的 - 您希望它们的外观和行为如何？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T22:18:22.263

Highcharts 被评为最佳，我在企业级应用程序上使用它完全灵活，并且支持 SVG，这意味着图表也可以在移动设备上工作。

[http://www.highcharts.com/](http://www.highcharts.com/)

# xml - LINQ to XML 错误：根级别的数据无效

> ID：12654654
> 
> 赞同：1
> 
> 时间：2012-09-29T17:07:49.793
> 
> 标签：xml, linq

这是我试图解析的 XML：http: [//pastebin.com/5mCqHQr3](http://pastebin.com/5mCqHQr3)

这是用于解析上述 XML 文档的代码：

```
//  LINQ code to read the XML document
XDocument xmlDoc = XDocument.Parse("<?xml version=\"1.0\"?>" + xml); // create the LINQ datasource
System.Diagnostics.Debug.Write(xml);

var query = from MWSdata in XElement.Parse("xml").Elements("AttributeSets") select MWSdata;
foreach (var data in query)
{
    System.Diagnostics.Debug.Write(data);
} 
```

完整的错误是：根级别的数据无效。第 1 行，位置 1。（在 -var 查询语句上）。我该如何解决？我正在尝试获取每个元素的值（ns2:Author、ns2:Title 等）并将它们放在文本框中。程序是用 C# .NET 编写的...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T18:17:20.620

发现错误......这个声明：

```
var query = from MWSdata in XElement.Parse("xml").Elements("AttributeSets") select MWSdata; 
```

应该

```
var query = from MWSdata in XElement.Parse(xml).Elements("AttributeSets") select MWSdata; 
```

“xm”周围的引号告诉解析器这是数据，而实际上它是一个内存对象。

感谢 Cuong 抽出宝贵时间。

# xcode - 登录后未调用Facebook ios6 completionHandler

> ID：12654655
> 
> 赞同：6
> 
> 时间：2012-09-29T17:07:50.503
> 
> 标签：xcode, facebook, ios6, ios-frameworks

我正在尝试使用**openActiveSessionWithPublishPermissions**在 Facebook 上发布 ，因此如果用户未登录，他需要先登录，然后使用 io6 Facebook 原生对话框发布消息。

我发现我能够登录，但没有调用完成处理程序。

我注意到的另一件事是，当我再次单击登录按钮时，它会调用完成处理程序并出现以下错误***FBSessionStateClosedLoginFailed***。

我确实参考了[这篇文章](https://stackoverflow.com/questions/12514740/facebook-sdk-openactivesessionwithpermissions-completionhandler-not-called)，但仍然没有找到解决我的问题的方法。

```
NSArray *permissions = [NSArray arrayWithObjects:@"publish_stream", nil];
[FBSession openActiveSessionWithPublishPermissions:permissions defaultAudience:FBSessionDefaultAudienceEveryone allowLoginUI:YES completionHandler:
^(FBSession *session, FBSessionState status, NSError *error) 
{

  switch (status) {

                  case FBSessionStateOpen:
                        {
                          [FBNativeDialogs presentShareDialogModallyFrom:currentController initialText:nil image:nil url:nil handler:^(FBNativeDialogResult result, NSError *error) {}];
                        }
                        break;   
                   default:
                        break;
                    }
                }]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T06:57:20.280

确保您实现了该`handleOpenUrl`方法。

```
-(BOOL)application:(UIApplication *)application 
           openURL:(NSURL *)url 
 sourceApplication:(NSString *)sourceApplication
        annotation:(id)annotation {

     return [[FBSession activeSession] handleOpenURL:url]; 

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T05:11:11.657

你应该添加这个：

```
[FBNativeDialogs presentShareDialogModallyFrom:currentController initialText:nil
  image:nil url:nil handler:^(FBNativeDialogResult result, NSError *error) {
  if (result==FBNativeDialogResultCancelled) {
    UIAlertView     *alert=[[UIAlertView alloc]initWithTitle:@"Error"
       message:@"Sending Cancelled" delegate:self cancelButtonTitle:@"OK" 
       otherButtonTitles: nil];
   [alert show];
 } else if (result==FBNativeDialogResultSucceeded) {
   UIAlertView *alert=[[UIAlertView alloc]initWithTitle:@"Succeed" 
     message:@"succeed" delegate:self cancelButtonTitle:@"OK" 
     otherButtonTitles: nil];
  [alert show];
}***}***]; 
```

# javascript - 我们真的需要隐藏 js (jquery) 代码吗？

> ID：12654663
> 
> 赞同：2
> 
> 时间：2012-09-29T17:08:33.063
> 
> 标签：javascript, security

我意识到我们可以通过*Inspect element > source*等在浏览器中查看 JS 代码。例如，我有以下代码，可以在“源”下查看。

```
$.ajax({
    url: baseUrl + 'location/insert_user_location',
    type: "post",
    data: {address:address,lat:lat,lng:lng,acc:acc},
}).done(function(){
    getUserLocation();
}); 
```

这是不安全的，还是有关系？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T17:11:15.350

我不明白为什么这可能是不安全的，但您必须始终牢记，从客户端发送或在客户端计算的所有内容都可能是不安全的，并且您可能不信任这些数据而不验证它是否有效......绝不。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-29T17:11:31.417

不确定您可以做些什么来隐藏 Javascript。即使您在传输过程中“加密”或以某种方式模糊了它，最终也必须清楚地让 javascript 解释器使用它，这几乎肯定总是可以被某种开发人员或其他工具看到。如果它的敏感数据，如果它是一个重要问题，我会避免将它放入代码中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-29T17:12:23.313

不，这不是不安全的，因为您的`location/insert_user_location`URI 在服务器端得到了正确保护，对吗？出于同样的原因，您不应该信任客户端表单验证，并且始终在服务器端执行相同的验证。

没有办法在客户端“*隐藏”JavaScript。*不管它隐藏得多么深，被混淆得多么好，黑客总是能够分析它。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-29T17:12:23.270

vzhen，如果你在浏览器中返回给用户，*任何人都可以看到你的 JavaScript 代码。*只要您不输入私人信息（例如用户密码或 javascript 中的 API 密钥）并且从不**信任客户端**，这确实没有任何安全问题。

这意味着您不应该信任任何可能通过 Ajax 发送到服务器的内容。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-29T17:17:09.713

在这种情况下，客户端验证是您的朋友。我不会太担心您的客户端代码 - 将其视为公开供所有人获取。跨站点脚本将是一个问题，除了将您的精力放在服务器和代码库安全性上。

# android - 为 Android > 4.0 Webkit 的焦点上的文本输入禁用矩形（橙色边框）

> ID：12654669
> 
> 赞同：2
> 
> 时间：2012-09-29T17:09:40.283
> 
> 标签：android, google-chrome, webview, webkit, android-4.0-ice-cream-sandwich

我正在构建一个带有酷炫搜索输入的网络应用程序。但是，当我单击输入开始输入时，输入框会以蓝色边框突出显示，这很好，看起来不错，但除此之外，文本输入上还会出现一个带有橙色边框的白色矩形，看起来非常糟糕。

我已经尝试了几种解决方案，但都没有奏效。（CSS 样式解决方案将 alpha 更改为 0 等。）[但如果你能让它们在 android 4.0 和/或更高版本上工作，那么也许我做错了，我会再试一次]

其他人说这些解决方案不适用于较新的 Android 操作系统，这也是我的经验。我个人运行的是 Android 4.0.4。

**--- 问题的复制 ---**

我的 Android 应用程序和原生 Android 浏览器...

![在此处输入图像描述](../Images/4409ea5c1d606a9619b3edd78b3a6c77.png)

适用于 Android 的 Chrome 浏览器 ... [ 工作正常！]

![在此处输入图像描述](../Images/c4f7b9d02f1b74ecfd599a45885e36b3.png)

由于它可以在 Chrome 中运行，因此它必须可以修复。我曾认为 Chrome 是开源的，所以我试图找到他们的源代码，以便找到解决方案。Android Chrome 的源代码不可用，因此它不是开源的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T02:06:55.467

深入 google.com，他们的输入没有亮点。他们所拥有的是：

```
-webkit-tap-highlight-color: rgba(0,0,0,0); 
```

这清除了丑陋的橙色畸形矩形。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-29T17:15:25.127

您是否尝试将`outline`样式设置为`none`焦点？您说您尝试过 css 解决方案，但您尝试过什么？

在我看来，它就像一个非常标准的焦点大纲，可以用

```
outline: none;
box-shadow: none; /* If this is a box shadow - clear it with this */ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T08:49:43.990

回复：这个修复：

```
input:focus { -webkit-user-modify: read-write-plaintext-only; } 
```

我在运行 4.0.4 的 s3 上对此进行了测试（我们遇到了另一个与输入字段相关的问题）

它会导致一个问题，即打开预测文本时文本无法正确填充字段，我不建议使用它。

输入未正确填充字段的问题（在您按下空格后仅输入您键入的每个单词的第一个字符！！）也可以通过在具有绝对定位的元素中包含输入字段来触发..

这就是我们最初的问题的原因——可能值得另一个堆栈溢出帖子。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T16:00:11.160

我认为这与 css/javascript 无关。

当我在设备设置中启用“改进 Web 可访问性”时，我已经看到了这种行为。

尝试进入您的设备常规设置（不是浏览器的设置），可访问性，并检查您是否有类似“提高 Web 可访问性”的内容（抱歉，我的设备语言是法语，我不确定英文的确切名称）。

选中此选项后，您将在网页上的可编辑/可点击内容周围看到橙色的大边框。

# git - Git：如何仅提取或获取特定更改

> ID：12654670
> 
> 赞同：0
> 
> 时间：2012-09-29T17:09:45.047
> 
> 标签：git

我有两个 Rails 应用程序。其中之一是某种模板。另一个是从此模板克隆的。克隆有很多我不希望在模板中进行的更改，例如额外的视图和资产。但是，我想将克隆中的一些更改放入模板中。

我认为`git fetch`这是做到这一点的方法，但我不确定如何选择性地只引入相关的更改。

这是我在切换到新分支后使用 fetch 得到的。

```
unknown:App user$ git fetch the_clone master
remote: Counting objects: 629, done.
remote: Compressing objects: 100% (398/398), done.
remote: Total 537 (delta 361), reused 197 (delta 125)
Receiving objects: 100% (537/537), 3.62 MiB | 838 KiB/s, done.
Resolving deltas: 100% (361/361), completed with 36 local objects.
From https://bitbucket.org/user/the_clone
* branch            master     -> FETCH_HEAD 
```

但是`git status`说：

```
# On branch the_changes
nothing to commit (working directory clean) 
```

很明显，我不明白它是如何`fetch`工作的。我不想这样做，`pull`因为这会添加所有更改。

关于如何选择性地将更改从克隆添加到模板的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T17:11:53.057

当您想要的更改和您不想要的更改位于单独的提交中时，您可以使用[git cherry-pick](http://git-scm.com/docs/git-cherry-pick)拉取单个提交。

如果不是，您最好复制单个文件。

# python - 无法让 Scrapy Crawlspider 跟随链接

> ID：12654675
> 
> 赞同：0
> 
> 时间：2012-09-29T17:10:36.087
> 
> 标签：python, regex, screen-scraping, web-scraping, scrapy

我正在尝试让 Scrapy Crawlspider 的“规则”部分正常工作。

我找到了`xpath`返回我想要关注的链接。它是

```
//*[@class="course_detail"]//td[4]/a/@href 
```

它总共返回大约 2700 个 URL。

基本上，我试图告诉蜘蛛遵循与该匹配的所有内容`xpath`，但我无法让以下代码正常工作：

```
rules = (
    Rule(SgmlLinkExtractor( allow=[r'.*'],
                            restrict_xpaths='//*[@class="course_detail"]//td[4]/a/@href'
                           ),              
         callback='parse_item'
         ),
) 
```

我没有收到任何错误，但蜘蛛似乎没有越过我在`start_urls`.

编辑：想通了！只需要删除@href。海登的代码也有帮助，所以我要给他答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T21:29:50.633

[当传递给SgmlLinkExtractor](http://doc.scrapy.org/en/latest/topics/link-extractors.html#sgmllinkextractor)时，我认为`allow`并且`restrict_xpaths`应该是相同的类型（即两个列表或两个字符串）。大多数示例使用：`tuples`

```
rules = (
    Rule(SgmlLinkExtractor( allow = (r'.*',),
                            restrict_xpaths = ('//*[@class="course_detail"]//td[4]/a/@href',)
                           ),              
         callback='parse_item'
         ),
) 
```

*顺便说一句，喜欢使用[埃及括号](http://www.codinghorror.com/blog/2012/07/new-programming-jargon.html)来尝试跟踪我的论点。*

# r - 使用并行操作创建多个 PNG

> ID：12654681
> 
> 赞同：1
> 
> 时间：2012-09-29T17:11:30.323
> 
> 标签：r, parallel-processing

我正在尝试使用并行操作创建 4 个 png ..

以下是 Kindof 伪代码.... 基本上我试图减少处理时间，即。依次创建4个png和所有绘图需要更多时间。无论如何我尝试过这样的事情，但它不起作用......

```
library(doSNOW)
library(foreach)
cl<- makeCluster(6, type = "SOCK")
registerDoSNOW(cl)

foreach(i=1:4) %dopar%
{

Name <- Name <- paste(i, "dim.png", sep="_")
CairoPNG(filename = Name,  width = 900,  height = 480, pointsize = 12,  bg = "white")

# The plotting code goes here
dev.off()
} 
```

我的问题是，是否可以同时创建多个 png ？或者有更好的方法吗？

阿马尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T17:33:14.243

你得到的错误：

```
Error in { : task 1 failed - "could not find function "CairoPNG"" 
```

警告您的节点（或从属）需要`Cairo`加载包。你可以通过运行

```
clusterEvalQ(cl, library(Cairo)) 
```

在您`foreach`致电之前，或者您可以`require(Cairo)`在`foreach`块内添加。

对于所有`snow`相关的事情，我总是觉得这个页面真的很有帮助：[http ://www.sfu.ca/~sblay/R/snow.html](http://www.sfu.ca/~sblay/R/snow.html)

# objective-c - 如何检查 NSURL 是否包含 NSString null？

> ID：12654686
> 
> 赞同：2
> 
> 时间：2012-09-29T17:11:46.323
> 
> 标签：objective-c, ios, nsstring, null, nsurl

我使用以下代码从 NSDictionary 获取 NSString，然后将其转换为 NSUrl：

```
NSURL * url = [NSURL URLWithString:[self.item objectForKey:@"website"]]; 
```

NSDictionary`self.item`来自 Web 服务器，并使用 JSON 数据正确填充。NSDictionary 中的所有其他对象都可以正常工作。

但有时网络服务器会传递一个带有文本“null”的网站 url，因为该对象没有填写网站。通过调试，我了解到 NSURL 对象可以包含一个带有文本“null”的 url。但是我该如何防止这种情况，或者我如何编写一个 if 语句来检查它？

我尝试了以下方法：

```
NSString * niks = [eventUrl absoluteString];
if(niks == @"null")
{
    UIAlertView *message = [[UIAlertView alloc] initWithTitle:@"Event" message:@"Event heeft geen website" delegate:nil cancelButtonTitle:@"Oke" otherButtonTitles:@"Oke", nil];
    [message show];
}
else
{
    [webView loadRequest:[NSURLRequest requestWithURL:eventUrl]];
    NSLog(@"%@",eventUrl);
} 
```

但这不起作用，它总是将 url 直接传递给 webview。有人可以让我朝着正确的方向前进吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T17:18:10.843

你的比较；

```
if(niks == @"null") 
```

仅比较指针是否相等（即如果两者是相同的字符串对象实例）。由于一个是常量，另一个是从服务器获取的 JSON 动态创建的，因此不太可能。

要比较两个字符串的*内容*，您应该这样做；

```
if([niks isEqualToString:@"null"]) 
```

对于链接渴求，[这里是 [NSString isEqualToString:] 文档](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/instm/NSString/isEqualToString:)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T17:16:44.033

要进行字符串比较，您需要执行 [niks isEqualToString:@"null"]，这就是第一个条件被破坏的原因。您也可以使用 [niks RangeOfString:@"null"];

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T17:19:14.533

我相信你可以做到这一点：

```
id str = [self.item objectForKey:@"website"];
if([str isMemberOfClass[NSNull class]]) { 
    ... its null
} 
```

JSON 转换器都将 null 更改为 NSNull 对象（根据我的经验）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-29T17:20:21.617

我不是 100% 清楚我的记忆，但我遇到了`[NSDictionary objectForKey:]`实际返回`NSNull`类实例而不是“null”字符串的情况。

如果是这种情况，您可以`[self.item objectForKey:@"website"]`使用`isKindOfClass`方法检查类。

# magento - Magento 默认 Modern 主题许可证

> ID：12654692
> 
> 赞同：1
> 
> 时间：2012-09-29T17:12:16.200
> 
> 标签：magento, licensing, magento-1.7

我将创建一个 Magento 主题，我正在考虑将它基于安装附带的 Magento 'Modern' 主题。

1）可以从中创建主题并转售吗？IE。主题许可证是否允许转售修改。

2）创建主题的最佳方式是什么，我听说过儿童主题但不了解它们的工作原理？我是否应该将现代主题文件复制到新的模板目录并随意修改它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T18:12:33.590

快速浏览一些文件会发现它们是根据[学术自由许可证](http://opensource.org/licenses/afl-3.0.php)分发的，与大多数开源许可证一样，只要它们具有相同的许可证，您就可以制作衍生作品。

另请注意以下摘录，它表明您可以合法地出售您的主题。

> 授予专利许可。许可方授予您一项全球性、免版税、非排他性、可再许可的许可，根据许可方拥有或控制的专利权利要求，该权利要求体现在许可方提供的原始作品中，在专利有效期内，制造、使用、**出售、要约出售**、制作和进口原始作品和衍生作品。

* * *

将两者的内容复制`app/design/frontend/default/modern/`到`skin/frontend/default/modern/`新目录，它就可以工作了。

# sql - 对转换列求和时出错

> ID：12654696
> 
> 赞同：0
> 
> 时间：2012-09-29T17:12:37.590
> 
> 标签：sql, sql-server, view

我在 SQL Server 中有一个包含 2 列的表`Question_asked`：`Response`

该`Response`列属于数据类型`varchar(500)`，并保存用户对列中保存的问题的响应`Question_asked`

我`V_age_attr`使用以下 SQL 语句创建了一个视图：

```
select 
    question_asked, cast(Response as integer) 
from 
    main_table 
where 
    question_asked = 'What is your age' 
```

如果我运行一个简单的 SQL 查询，结果会按预期返回。但在某些情况下，例如使用 sum/group by 查询时。我收到一条错误消息（我得到的实际消息）：

> *将 varchar 值 '2011-08-13 00:00:00' 转换为数据类型 int 时转换失败*

在表中，`main_table`问题之一是`start_date`，因此该列`Response`确实在表中保存了日期值，但在我创建的视图中没有。

同样，我可以运行选择查询并检查 my 的所有值`cast(Response as integer)`，它们都是整数值。

我的主要问题是：谁能告诉我这是否是 SQL Server 2008 R2 中已知/预期的行为，和/或除了创建视图之外，还有其他人有其他方法从这种类型的表中获取值的子集吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T17:39:56.907

唉，过滤`isnumeric`不一定有效。SQL 是一种描述性语言，而不是一种过程语言。因此，这些操作不必按照指定的顺序进行。

在这种情况下，SQL Server 将在读取数据时尝试进行转换*，然后*应用过滤器。为时已晚。你有一个错误。

该`case`语句是唯一保证评估顺序的语句，至少在不涉及聚合函数时是这样。以下应该解决转换问题：

```
select question_asked,
       (case when isnumeric(Response) = 1 and
                  Response not like '%.%'
             then cast(Response as int)
        end) as Response
from main_table
where question_asked = 'What is your age' 
```

此版本还检查响应中的小数点。 `ISNUMERIC`当有小数点时将返回 1，但这也会导致转换失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T21:22:07.457

鉴于[Martin 强调](http://connect.microsoft.com/SQLServer/feedback/details/537419/sql-server-should-not-raise-illogical-errors)的错误，我实际上会在 CASE 语句中使用原始条件，这将适用于任何数字类型，不限于 Gordon 的 int 解释。比 ISNUMERIC 更好，但从 SQL Server 2012 开始，TRY_CONVERT 会更好。您希望 SQL Server 可以重新使用 WHERE 子句中的条件解析来协助 SELECT，反之亦然。

```
select 
    question_asked, case when question_asked = 'What is your age'
                         then cast(Response as integer)
                         end
from 
    main_table 
where 
    question_asked = 'What is your age' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T17:16:04.767

过滤器使用`ISNUMERIC`- 可能有非整数数据作为响应，这会弄乱聚合函数。

```
SELECT
 question_asked,
 CASE(response AS INT)
FROM
 main_table
WHERE
 question_asked = 'What is your age'
 AND ISNUMERIC(response) = 1 
```

编辑：如果这仍然不起作用，您可能需要对您的`response`列进行一些更积极的类型检查。在此处查看回复：

[如何在 T-SQL 中获取字符串是否为数字](https://stackoverflow.com/questions/2109574/how-to-get-if-a-string-is-a-number-in-t-sql)

# android - 当频繁调用 notifyDataSetChanged 并且视图从布局中膨胀时，listview 适配器单击由错误的对象处理

> ID：12654698
> 
> 赞同：2
> 
> 时间：2012-09-29T17:12:51.573
> 
> 标签：android

我有一个经常更新的 Android ListView。当我单击列表中的某个项目时，错误对象获得单击事件的时间的某个子集。即使更新没有更改列表，也会发生这种情况。

我只是编码错误，还是通过视图层次结构处理事件时存在竞争条件？

ListView 使用扩展 BaseAdapter 的适配器，其 getView() 方法如下所示。但是这个问题只出现在USE_LAYOUT=true的时候。

```
@Override
public View getView(final int position, View convertView, ViewGroup parent) {
    View view;
    TextView textView;
    ViewHolder viewHolder;

    if (convertView == null) {
        if (USE_LAYOUT) {
            view = context.getLayoutInflater().inflate(R.layout.row, parent, false);
            textView = (TextView) view.findViewById(R.id.rowTextView);
        } else {
            view = new TextView(context);
            textView = (TextView) view;
        }
        viewHolder = new ViewHolder();
        viewHolder.textView = textView;
        view.setTag(viewHolder);
    } else {
        view = convertView;
        viewHolder = (ViewHolder) view.getTag();
        textView = viewHolder.textView;
    }

    final String item = getItem(position);
    textView.setText(position + " " + item);
    textView.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            Log.d("Adapter", position + " " + item);
        }
    });

    return view;
} 
```

所以就上面的代码而言，活动显示一个列表视图，显示“1 item1”、“2 item2”、“3 item3”等。如果我点击 item3，有一定比例的时间，日志将显示“21 项 21”。

关于代码的其他几点：

*   该项目只是一个字符串，适配器维护一个`List<String>`，`getItem()`只是调用`items.get(index)`，并`setItems()`设置列表和调用`notifyDataSetChanged()`。
*   如果列表未更改，则会出现此问题。即，计时器调用`setItems(new ArrayList<String>(getItems())`.
*   `setItems()`从 UI 线程通过`runOnUiThread()`.
*   计时器每 500 毫秒左右关闭一次，但其他频率也会出现问题。
*   行布局只是 LinearLayout 中的 TextView。

我观察到，当通过 getView 回收视图时，它们会以相反的顺序回收。换句话说，当`notifyDataSetChanged()`被调用并且列表没有滚动时，第一个项目与最后一个项目一起回收，第二个项目与倒数第二个项目一起回收，等等。因此我怀疑竞争条件。此外，我在 2.1 和 2.3 上观察到它，但不是在 4.0 上观察到它（尽管我不确定它*永远不会*在那里发生）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T19:03:28.577

问题是`onClick()`方法中的代码运行的时间与`getView()`执行的时间不同，所以`position`可能不是你所期望的......试试这个：

```
final String item = getItem(position);
textView.setTag(position);
textView.setText(position + " " + item);
textView.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {
        int position = (Integer) v.getTag();
        Log.d("Adapter", position + " " + getItem(position));
    }
}); 
```

换句话说，里面的一切`new OnClickListener() { ... }`都看不到里面的*局部*变量`getView()`（如`position`和`item`），但它可以看到*类*变量和方法（如`getItem()`）。

# performance - 在scala中快速复制对象内容

> ID：12654700
> 
> 赞同：3
> 
> 时间：2012-09-29T17:13:30.443
> 
> 标签：performance, scala

我有一个很少有 Int 和 Double 字段的类。将所有数据从一个对象复制到另一个对象的最快方法是什么？

```
class IntFields {
  private val data : Array[Int] = Array(0,0)

  def first : Int = data(0)
  def first_= (value: Int) = data(0) = value
  def second : Int = data(1)
  def second_= (value : Int) = data(1) = value

  def copyFrom(another : IntFields) =
    Array.copy(another.data,0,data,0,2)
} 
```

这是我可能建议的方式。但我怀疑它是否真的有效，因为我对 scala 的内部没有清楚的了解

## 更新1：

事实上，我正在寻找 scala 的 c++ memcpy 等价物。我只需要一个简单的对象并逐字节复制它的内容。

数组复制只是一种 hack，我搜索了普通的 scala 支持的方法，但没有找到。

## 更新2：

我尝试对两个持有者进行微基准测试：具有 12 个变量的简单案例类和一个用数组备份的案例类。在所有基准（简单的复制和复杂的集合计算）中，基于数组的解决方案的工作速度较慢约 7%。

所以，我需要其他方法来模拟 memcpy。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T17:38:54.433

由于用于的两个数组`Array.copy`都是原始整数数组（即不是其中一个持有装箱整数的情况，在这种情况下，`while`将使用装箱/拆箱循环来复制元素），它与爪哇`System.arraycopy`是。也就是说 - 如果这是一个巨大的数组，与`while`复制元素的循环相比，您可能会看到性能差异。由于数组只有 2 个元素，因此这样做可能更有效：

```
def copyFrom(another: IntFields) {
  data(0) = another.data(0)
  data(1) = another.data(1)
} 
```

编辑：

我想说最快的事情就是一个接一个地复制这些字段。如果性能真的很重要，您应该考虑使用`Unsafe.getInt`- 一些报告应该比使用`System.arraycopy`小块更快：[https ://stackoverflow.com/questions/5574241/interesting-uses-of-sun-misc-unsafe](https://stackoverflow.com/questions/5574241/interesting-uses-of-sun-misc-unsafe)

# android - 带有对话框的 StaleDataException

> ID：12654707
> 
> 赞同：7
> 
> 时间：2012-09-29T17:14:24.127
> 
> 标签：android, staledataexception

我正在尝试显示一个带有列表视图的对话框，其中包含我数据库中的名称，但我不断得到一个`StaleDataException`. 我知道这通常意味着我正在尝试使用来自已关闭游标的数据，但在我获得所有数据之前，游标不会关闭，所以我不明白为什么我会得到这个

```
d = new Dialog(this);
d.setContentView(R.layout.dialog_layout);
d.setTitle("Select Bowler");

ListView lv = (ListView)d.findViewById(R.id.dialog_list);
Cursor c = getContentResolver().query(
    BowlersDB.CONTENT_URI,
    new String[] {
        BowlersDB.ID, BowlersDB.FIRST_NAME, BowlersDB.LAST_NAME
    },
    null,
    null,
    BowlersDB.LAST_NAME + " COLLATE LOCALIZED ASC"
);

if (c.moveToFirst() && c != null) {
    SimpleCursorAdapter adapter = new SimpleCursorAdapter(
        this,
        R.layout.names_listview,
        c,
        new String[] {
            BowlersDB.FIRST_NAME, BowlersDB.LAST_NAME
        },
        new int[] {
            R.id.bListTextView, R.id.bListTextView2
        },
        0
    );
    lv.setAdapter(adapter);
    lv.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> arg0, View v, int position, long id) {
            bowlerClickedID = id;
            updateName(id);
        }
    });
    d.show();
}
c.close(); 
```

错误

```
android.database.StaleDataException: 
   Attempting to access a closed CursorWindow. 
   Most probable cause: cursor is deactivated prior to calling this method.

   at android.database.AbstractWindowedCursor.checkPosition(AbstractWindowedCursor.java:139)
   at android.database.AbstractWindowedCursor.getString(AbstractWindowedCursor.java:50)
   at android.database.CursorWrapper.getString(CursorWrapper.java:114)
   at android.widget.SimpleCursorAdapter.bindView(SimpleCursorAdapter.java:150)
   at android.widget.CursorAdapter.getView(CursorAdapter.java:250)
   at android.widget.AbsListView.obtainView(AbsListView.java:2267)
   at android.widget.ListView.measureHeightOfChildren(ListView.java:1244)
   at android.widget.ListView.onMeasure(ListView.java:1156)
   at android.view.View.measure(View.java:15172)
   at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4814)
   at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1390)
   at android.widget.LinearLayout.measureVertical(LinearLayout.java:681)
   at android.widget.LinearLayout.onMeasure(LinearLayout.java:574)
   at android.view.View.measure(View.java:15172)
   at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4814)
   at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
   at android.view.View.measure(View.java:15172)
   at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4814)
   at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
   at android.view.View.measure(View.java:15172)
   at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4814)
   at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1390)
   at android.widget.LinearLayout.measureVertical(LinearLayout.java:681)
   at android.widget.LinearLayout.onMeasure(LinearLayout.java:574)
   at android.view.View.measure(View.java:15172)
   at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4814)
   at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
   at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2148)
   at android.view.View.measure(View.java:15172)
   ... 
```

编辑：如果我注释掉该`c.close()`行，它工作正常，但我不能只是让光标保持打开状态，我该怎么办？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-09T09:34:00.387

您收到错误是因为您正在关闭`Cursor`您`SimpleCursorAdapter`创建的可能仍在尝试从中访问数据的时间。

如果你想使用 a `CursorLoader`，你应该这样做。

1.  保留对适配器的引用作为实例变量
2.  使用对光标的 null 引用创建简单的光标适配器
3.  让你的班级实施`LoaderManager.LoaderCallbacks<Cursor>`
4.  实际上创建`CursorLoader`在`onCreateLoader`
5.  在`onLoadFinished()`中，将光标与`adapter.swapCursor(cursor)`
6.  在`onLoaderReset()`中，将光标与`null`光标交换为 adapter.swapCursor(null)`

您还应该最终将数据放入 ContentProvider - 这还不错！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-02T16:44:55.723

在不再需要 CursorAdapter 之前，您无法关闭光标。所以你可以在 onDestroy() 方法中关闭它：

```
@Override
public void onDestroy() {
 super.onDestroy();

 ListView lv = (ListView) d.findViewById(R.id.dialog_list);
 ((CursorAdapter) lv.getAdapter()).getCursor().close();
 database.close();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T08:46:14.137

以前是靠`startManagingCursor`方法把开闭的麻烦留给`Cursors`系统。现在它已被弃用（它仍然有效，但我不建议使用它），考虑使用`CursorLoader`该类`LoaderManager`并将其留给系统来处理光标关闭。

# data-warehouse - 维度建模 - 如何处理具有不一致维度的事实的单个事实表？

> ID：12654708
> 
> 赞同：0
> 
> 时间：2012-09-29T17:14:46.797
> 
> 标签：data-warehouse, business-intelligence, dimensional-modeling

我想为餐厅销售交易设置一个事实表。将整个事实表相加将得出整个餐厅的全部销售额。这家餐厅有两个主要的收入来源——食品和饮料。每个的尺寸都非常不同。

例如，对于食物，我可能想跟踪它是否不含乳制品、不含麸质等。或者我可能想查看这道菜是意大利菜还是法国菜等。对于葡萄酒，我可能对年份感兴趣，其中酒来自，酒是什么葡萄。

如何使用一个事实表完成此操作？如果项目是食物，我是否应该简单地拥有一个为 NULL 的 Wine 维度，如果项目是葡萄酒，我是否应该拥有一个为 NULL 的 Food 维度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T17:33:11.827

你的事实可能看起来像这样？

```
SALES_LINE_ITEM_FACT
   TRAN_DATE
   TRAN_HOUR (or other time buckets if needed)
   SERVER_KEY
   TABLE_KEY
   SEAT_KEY
   PROMOTION_KEY
   PRODUCT_KEY
   REGULAR_PRICE
   NET_SALE_PRICE
   PRODUCT_COST 
```

您的“产品”维度是您需要关注的地方，如果您想从销售事实中报告有多少人订购了特定的葡萄酒。

首先，它可能看起来像：

```
PRODUCT_DIM
   PRODUCT_KEY
   PRODUCT_NAME
   PRODUCT_CATEGORY (food / beverage)
   PRODUCT_SUBCATEGORY (wine / beer / dairy / french / italian etc)
   CURRENT_AVERAGE_PRODUCT_COST 
```

您可以将详细信息添加为类别层次结构的另一个级别，或者如果您想进行更详细的分析，请为某些产品类型创建特定的雪花并将它们连接到产品暗淡。

# php - 备份数据库时是否需要使用addlashes()？

> ID：12654709
> 
> 赞同：0
> 
> 时间：2012-09-29T17:14:53.707
> 
> 标签：php, mysql, database-backups

我正在使用[此处](http://davidwalsh.name/backup-mysql-database-php)显示的代码，它在保存到文件之前对从数据库中获取的数据使用了 addlashes()。

```
$row[$j] = addslashes($row[$j]); 
```

我的问题是为什么以及我需要使用它吗？我认为您在保存到数据库时会这样做，而不是相反。当我将上述脚本的结果与 phpMyAdmin 的导出结果进行比较时，包含序列化数据的字段是不同的。我想知道导入回数据库时是否会导致任何问题？

脚本：

```
'a:2:{i:0;s:5:\"Hello\";i:1;s:5:\"World\";}' 
```

phpMyAdmin 导出：

```
'a:2:{i:0;s:5:"Hello";i:1;s:5:"World";}' 
```

**更新**

插入数据库时​​所有数据都被转义。

从 mysql 更改为 mysqli。

SQL 文件输出如下：

```
INSERT INTO test (foo, bar) VALUES (1, '\'single quotes\'\r\n\"double quotes\"\r\n\\back slashes\\\r\n/forward slashes/\r\n'); 
```

**解决方案**

使用 $mysqli->real_escape_string() 而不是 addlashes()

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T17:46:10.627

## 插入数据库

将数据插入 MySQL 数据库时，您应该使用准备好的语句或适当的转义函数，例如`mysql_real_escape_string`. `addslashes`与数据库无关，不应使用。*转义*是一个通用术语，但实际上涵盖了大量的操作。这里似乎正在讨论转义的两种用途：

1.  转义可能插入数据库的危险值
2.  转义字符串引号以避免损坏的字符串

大多数数据库转义函数不仅仅是转义引号。它们会转义非法字符以及 \0 等不可见字符 ...这是因为根据您使用的数据库，有很多方法可以破坏插入 - 而不仅仅是添加右引号。

因为似乎有人错过了我关于提及 PDO 的评论，所以我将在这里再次提及。使用 PDO 或其他一些数据库抽象系统以及准备好的语句要好得多，这是因为您不再需要担心转义您的值。

## 输出/转储数据库值

在提到的**备份您的数据库**脚本中，原始编码器`addslashes`用作快速速记，以确保 mysql 转储中的输出字符串格式正确并且不会在重新插入时中断。它与安全无关。

## 从数据库中选择值

即使您在插入数据库时​​转义了您的值，当将该数据写回任何使用字符串的导出文件时，您也需要再次转义*引号。*这只是因为您希望保护您的字符串以使其格式正确。

将转义数据插入数据库时​​，使用的“转义序列”将转换回其原始值。例如：

```
INSERT INTO table SET field = "my \"escaped\" value" 
```

一旦进入数据库，该值实际上将是：

```
my "escaped" value 
```

因此，当您将其从数据库中拉出时，您将收到：

```
my "escaped" value 
```

所以当你需要把它放在一个格式化的字符串/转储中，一个解析器将读回的转储，你需要做一些转义来正确格式化它：

```
$value_from_database = 'my "escaped" value';

echo '"' . $value_from_database . '"'; 
```

将产生：

```
"my "escaped" value" 
```

这将破坏任何正常的字符串解析器，因此您需要执行以下操作：

```
$value_from_database = 'my "escaped" value';

echo '"' . addslashes($value_from_database) . '"'; 
```

生产：

```
"my \"escaped\" value" 
```

但是，如果是我，我只会针对双引号并转义：

```
$value_from_database = 'my "escaped" value';

echo '"' . str_replace('"', '\\"', $value_from_database) . '"'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T17:52:37.810

我认为你混合了两个问题。第一个问题是[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)，为了防止这种情况，您必须转义进入数据库的数据。然而，到目前为止，有一种更好的方法可以做到这一点。使用准备好的语句和绑定参数。PDO 示例：

```
// setup a connection with the database
$dbConnection = new PDO('mysql:dbname=dbtest;host=127.0.0.1;charset=utf8', 'user', 'pass');    
$dbConnection->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
$dbConnection->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

// run query
$stmt = $dbConnection->prepare('SELECT * FROM employees WHERE name = :name');    
$stmt->execute(array(':name' => $name));

// get data
foreach ($stmt as $row) {
    // do something with $row
} 
```

您必须担心的另一件事是[XSS 攻击](http://en.wikipedia.org/wiki/Cross-site_scripting)，它基本上允许可能的攻击者将代码注入您的网站。为防止这种情况，[`htmlspecialchars()`](http://php.net/manual/en/function.htmlspecialchars.php)在显示包含您不信任的可能信息的数据时，您应始终使用：

```
echo htmlspecialchars($dataFromUnsafeSource, ENT_QUOTES, 'UTF-8'); 
```

> 插入数据库时​​所有数据都被转义。

当使用准备好的语句和绑定参数时，这不再需要了。

> 我应该使用 addlashes() 然后使用 str_replace() 将 \" 更改为 "吗？

`addslashes()`听起来像是防止任何事情的糟糕方法。所以不需要AFAICT。

关于访问数据库的另一个注意事项，如果您仍在使用旧`mysql_*`功能：

它们不再被维护并且社区已经开始了[弃用过程](http://goo.gl/KJveJ)。看到[**红框**](http://goo.gl/GPmFd)了吗？相反，您应该了解[准备好的语句](http://goo.gl/vn8zQ)并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli)。如果你不能决定，[这篇文章](http://goo.gl/3gqF9)将有助于选择。如果你想学习，[这里有一个很好的 PDO 教程](http://goo.gl/vFWnC)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T17:30:32.517

您应该在不修改数据的情况下存储数据。

在输出数据或将它们“放入”其他数据（例如数据库查询中）时，您应该执行所需的转义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-29T17:33:11.653

只需使用 mysql_escape_string() 代替 david walsh 的博客中所写的 addlashes 和 ereg_replace 即可。

只是尝试它会更好。:)

# nginx - Prestashop 的 Nginx 重写规则，如何设置、调试和启用？

> ID：12654710
> 
> 赞同：4
> 
> 时间：2012-09-29T17:14:54.007
> 
> 标签：nginx, rewrite, prestashop

出于性能原因，我想从 Apache 更改为 Nginx+Php-Fpm。目前我可以看到我网站的主页（在测试环境中），但任何在 Apache 中工作的友好 url 现在都不起作用。

我已经将规则转换为 nginx 规则，但我没有任何方法来测试它，因为每次点击网站的某个 url 都会变成我的浏览器下载 php 文件！

例如

我点击 www.misite.com/autentication 和我的浏览器下载一个 php 文件：-/

环境测试是

*   PHP 5.3.17 (cli)（构建时间：2012 年 9 月 13 日 06:45:07）版权所有 (c) 1997-2012 The PHP Group Zend Engine v2.3.0，版权所有 (c) 1998-2012 Zend Technologies

*   nginx -v nginx版本：nginx/1.0.15

这是我的 nginx 虚拟主机配置：

```
server {
        server_name     site.com www.site.com;
        root            /srv/www/site.com/httpdocs;
        access_log      /srv/www/site.com/log/access.log;
        error_log       /srv/www/site.com/log/error.log;
        rewrite_log on;
        location / {
                index  index.html index.htm index.php;
                rewrite ^/([a-z0-9]+)\-([a-z0-9]+)(\-[_a-zA-Z0-9-]*)/[_a-zA-Z0-9-]*\.jpg$ /img/p/$1-$2$3.jpg? break;
        rewrite ^/([0-9]+)\-([0-9]+)/[_a-zA-Z0-9-]*\.jpg$ /img/p/$1-$2.jpg? break;
        rewrite ^/([0-9])(\-[_a-zA-Z0-9-]*)?/[_a-zA-Z0-9-]*\.jpg$ /img/p/$1/$1$2.jpg? break;
        rewrite ^/([0-9])([0-9])(\-[_a-zA-Z0-9-]*)?/[_a-zA-Z0-9-]*\.jpg$ /img/p/$1/$2/$1$2$3.jpg? break;
        rewrite ^/([0-9])([0-9])([0-9])(\-[_a-zA-Z0-9-]*)?/[_a-zA-Z0-9-]*\.jpg$ /img/p/$1/$2/$3/$1$2$3$4.jpg? break;
        rewrite ^/([0-9])([0-9])([0-9])([0-9])(\-[_a-zA-Z0-9-]*)?/[_a-zA-Z0-9-]*\.jpg$ /img/p/$1/$2/$3/$4/$1$2$3$4$5.jpg? break;
        rewrite ^/([0-9])([0-9])([0-9])([0-9])([0-9])(\-[_a-zA-Z0-9-]*)?/[_a-zA-Z0-9-]*\.jpg$ /img/p/$1/$2/$3/$4/$5/$1$2$3$4$5$6.jpg? break;
        rewrite ^/([0-9])([0-9])([0-9])([0-9])([0-9])([0-9])(\-[_a-zA-Z0-9-]*)?/[_a-zA-Z0-9-]*\.jpg$ /img/p/$1/$2/$3/$4/$5/$6/$1$2$3$4$5$6$7.jpg? break;
        rewrite ^/([0-9])([0-9])([0-9])([0-9])([0-9])([0-9])([0-9])(\-[_a-zA-Z0-9-]*)?/[_a-zA-Z0-9-]*\.jpg$ /img/p/$1/$2/$3/$4/$5/$6/$7/$1$2$3$4$5$6$7$8.jpg? break;
        rewrite ^/([0-9])([0-9])([0-9])([0-9])([0-9])([0-9])([0-9])([0-9])(\-[_a-zA-Z0-9-]*)?/[_a-zA-Z0-9-]*\.jpg$ /img/p/$1/$2/$3/$4/$5/$6/$7/$8/$1$2$3$4$5$6$7$8$9.jpg? break;
        rewrite ^/c/([0-9]+)(\-[_a-zA-Z0-9-]*)/[_a-zA-Z0-9-]*\.jpg$ /img/c/$1$2.jpg? break;
        rewrite ^/c/([a-zA-Z-]+)/[a-zA-Z0-9-]+\.jpg$ /img/c/$1.jpg? break;
        rewrite ^/([0-9]+)(\-[_a-zA-Z0-9-]*)/[_a-zA-Z0-9-]*\.jpg$ /img/c/$1$2.jpg? break;
        rewrite ^/([0-9]+)\-[a-zA-Z0-9-]*\.html /product.php?id_product=$1 break;
        rewrite ^/[a-zA-Z0-9-]*/([0-9]+)\-[a-zA-Z0-9-]*\.html /product.php?id_product=$1 break;
        rewrite ^/([0-9]+)\-[a-zA-Z0-9-]*(/[a-zA-Z0-9-]*)+ /category.php?id_category=$1&noredirect=1 break;
        rewrite ^/([0-9]+)\-[a-zA-Z0-9-]* /category.php?id_category=$1 break;
        rewrite ^/([0-9]+)__([a-zA-Z0-9-]*) /supplier.php?id_supplier=$1 break;
        rewrite ^/([0-9]+)_([a-zA-Z0-9-]*) /manufacturer.php?id_manufacturer=$1 break;
        rewrite ^/content/([0-9]+)\-([a-zA-Z0-9-]*) /cms.php?id_cms=$1 break;
        rewrite ^/content/category/([0-9]+)\-([a-zA-Z0-9-]*) /cms.php?id_cms_category=$1 break;
        rewrite ^/pagina-no-encuentra$ /404.php break;
rewrite ^/direccion$ /address.php break;
        rewrite ^/direcciones$ /addresses.php break;
        rewrite ^/autenticacion$ /authentication.php break;
        rewrite ^/mas-vendidos$ /best-sales.php break;
        rewrite ^/carro-de-la-compra$ /cart.php break;
        rewrite ^/contactenos$ /contact-form.php break;
        rewrite ^/descuento$ /discount.php break;
        rewrite ^/estado-pedido$ /guest-tracking.php break;
        rewrite ^/historial-de-pedidos$ /history.php break;
        rewrite ^/identidad$ /identity.php break;
        rewrite ^/fabricantes$ /manufacturer.php break;
        rewrite ^/mi-cuenta$ /my-account.php break;
        rewrite ^/nuevos-productos$ /new-products.php break;
        rewrite ^/carrito$ /order.php break;
        rewrite ^/devolucion-de-productos$ /order-follow.php break;
        rewrite ^/pedido-rapido$ /order-opc.php break;
        rewrite ^/vales$ /order-slip.php break;
        rewrite ^/contrasena-olvidado$ /password.php break;
        rewrite ^/promocion$ /prices-drop.php break;
        rewrite ^/buscar$ /search.php break;
        rewrite ^/mapa-del-sitio$ /sitemap.php break;
        rewrite ^/tiendas$ /stores.php break;
        rewrite ^/proveedores$ /supplier.php break;
        error_page 404 = /404.php;
        }
        location ~ \.php$ {
                include /etc/nginx/fastcgi_params;
                fastcgi_pass  127.0.0.1:9000;
                fastcgi_index index.php;
                fastcgi_param   SCRIPT_FILENAME  $document_root$fastcgi_script_name;
        }
} 
```

最糟糕的问题是我没有调试问题的经验：-/ Nginx 非常新 任何评论将不胜感激，

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T10:45:06.787

好的，我已经解决了我自己的问题！顺便说一句很简单，只是改变规则的位置

我已经移动了所有的规则

```
location /{
.... rules...
} 
```

到

```
server {

...here rules works...

} 
```

然后我重新加载nginx，就是这样！

服务 nginx 重新加载

我希望这对像我这样绝望的人有用。

最好的祝福，

鲁本

# c - 重新分配字符数组中的字符

> ID：12654711
> 
> 赞同：0
> 
> 时间：2012-09-29T17:15:07.687
> 
> 标签：c, arrays, string, char

我试图根据一些任意条件提前终止一个字符串，方法是：

```
void end_string_early(char string[], int len) {
    int i;
    char j;

    for (i=0;i<len;i++) {
        j = string[i];                                   
        if (arbitrary_condition(j)) {
            string[i] = "a";
        }
    }
} 
```

我得到编译错误：

> 警告：赋值从没有强制转换的指针生成整数

让我感到困惑的是，如果我对 int 数组执行完全相同的操作（将值更改为另一个 int，而不是 a），那么它可以完美运行。也许这与论点的传递方式有关？（虽然我的印象是所有数组都是由 ref 传递的）我不完全确定，这是我第一次接触 C（通过 K&R 书工作）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T17:16:32.570

`'a'`并且`"a"`是两个不同的东西：第一个是*字符 a*，第二个是只包含字符*a*的文字字符串。

您正在尝试将文字字符串分配给字符。`"a"`是文字字符串，即 a `char *`，并且您的元素`char[]`是 a `char`: 整数类型，因此有关尝试将指针分配给整数的消息。该消息有点令人困惑，因为`char`它是一个整数类型。

所以使用：

```
string[i] = 'a'; 
```

但这不会终止字符串。为此，您需要：

```
string[i] = '\0'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T17:16:32.983

```
string[i] = "a"; 
```

一定是

```
string[i] = 'a'; 
```

注意不同的引号。

* * *

`string``char`是来自s的数组，*而不是*`"a"`a ，它是字符串文字，包含两个s - 一个 for和一个。 因此，要将元素设置为数组，您需要使用单引号。*`char``char``a``\0`
`char``char``'`*

 ** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T17:17:18.247

`"a"`是 a `char[2]`，它衰减为 a `char*`，这就是你收到警告的原因；`string`is a `char*`so `string[i]`is a`char`这意味着您正在尝试将 a 分配`char*`给 a `char`，这是错误的。

您需要使用单引号：

```
string[i] = 'a'; 
```

双引号构成一个数组，`char`而单引号只构成一个`char`，因此`'a'`a`char`并将 a 分配`char`给 a`char`将起作用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-29T17:17:36.143

您的程序将更好地使用`string[i] = 'a';`（而不是`"a"`）。

以防万一，请注意[无法重新分配文字 string 的字符](https://stackoverflow.com/questions/164194/why-do-i-get-a-segmentation-fault-when-writing-to-a-string)。您显示的那段代码没有这个问题，但如果您调用`end_string_early("foo"...)`，它会。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-29T17:17:55.467

`"a"`不是一个字符——它是一个`char*`（字符串）。你需要`'a'`.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-29T17:19:03.597

`string[i] = "a"`应该是`string[i] = 'a'`,`"a"`不同于`'a'`, 其中 "a" 是一个文字字符串并且它 "返回一个指针, 而`'a'`只是一个字符。*

# css - css水平导航菜单向右浮动，垂直子菜单与主菜单不对齐

> ID：12654717
> 
> 赞同：0
> 
> 时间：2012-09-29T17:15:44.140
> 
> 标签：css, menu, nav

我在 CSS 中创建了一个水平导航菜单，向左浮动。它工作正常。

当我将浮点数向右更改（并反转顶级 li 的顺序）时，一切都很好，只是子菜单向左移动了一点（因此不要与顶级菜单项垂直对齐）。

我尝试在 中更改 left 命令`li:hover > .nav`，但这没有帮助。谁能看到需要更改才能使顶级导航项目和子菜单中的项目垂直对齐？

谢谢。

**我的 CSS 是：**

```
#nav, .nav, #nav .nav li { 
    margin:0px; 
    padding:0px; 
}

#nav li {
    float:right; 
    display:inline; 
    cursor:pointer; 
    list-style:none; 
    padding:10px 30px 10px 30px; 
    border:1px #000 solid;  
    position:relative;
    background: #990000;
}

#nav li ul.first {
    left:-1px; 
    top:100%;
}

li, li a {
    color:#fff; 
    text-decoration:none;
}

#nav .nav li { 
    width:100%; 
    text-indent:10px; 
    line-height:30px; 
    margin-right:10px; 
    border-top:1px #000 solid; 
    border-bottom:1px #000 solid;
    border-left:none; 
    border-right:none; 
    background:#990000;
}

#nav li a {
    display:block; 
    width:inherit; 
    height:inherit;
}

ul.nav { 
    display:none; 
}

#nav li:hover > a, #nav li:hover { 
    color:#990000; 
    background:#fff; 
}

li:hover > .nav { 
    display:block; 
    position:absolute; 
    width:200px; 
    top:-2px; 
    left:50%; 
    z-index:1000; 
    border:1px #000 solid; 
}

li:hover { 
    position:relative; 
    z-index:2000; 
}

#basic li {
    color:#000;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T17:35:55.433

从 切换`float: left`到 时`float: right`，是否将所有与左相关的属性都交换为右和右到左？

例子：

*   替换`margin-left`为`margin-right`
*   交换价值观。`margin 1px 2px 3px 4px`变成`margin 1px 4px 3px 2px`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T18:00:08.520

除了尝试上面的答案之外，您还可以使用`position:relative`right 或 left 属性来碰撞子菜单。无论您指定多少像素，它们都会相对于它们自然落下的位置移动菜单。

# facebook - FQL 描述已翻译

> ID：12654729
> 
> 赞同：0
> 
> 时间：2012-09-29T17:17:00.570
> 
> 标签：facebook, translation, facebook-fql

当我访问 FQL 时：

SELECT post_id, description FROM stream WHERE source_id = me()

描述是英文的。如何获取用户语言的描述？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T17:53:27.710

> 如何获取用户语言的描述？

通过向`locale`API 调用添加参数，请参见此处：[https](https://developers.facebook.com/docs/reference/api/) ://developers.facebook.com/docs/reference/api/ （底部，“指定区域设置”）

[Graph API Explorer 示例，获取德语描述 (locale=de_DE)](https://developers.facebook.com/tools/explorer?method=GET&path=fql%3Fq%3DSELECT%20post_id%2C%20description%20FROM%20stream%20WHERE%20source_id%20%3D%20me%28%29%26locale%3Dde_DE)

# javascript - JSON+Node.js - 意外的令牌 o

> ID：12654733
> 
> 赞同：24
> 
> 时间：2012-09-29T17:17:18.680
> 
> 标签：javascript, html, json, node.js

我刚开始在大学课程中使用 node.js 和 json 对象。我们本周的一项任务是创建一些 json 对象并将对象的一部分提取到一个 html 页面中。我以为我很好地掌握了如何做到这一点，但是当我尝试启动 node.js 时遇到了错误。如果我删除了 colleges 对象和 parse 语句，则节点运行良好。

这是我运行“node index.js”时遇到的错误：

```
undefined:1
[object Object],[object Object],[object Object],[object Object],[object Object
 ^
SyntaxError: Unexpected token o
at Object.parse (native)
at Object.<anonymous> (/home/ubuntu/node_stuff/node_json/requestHandlers.js:13:20)
at Module._compile (module.js:449:26)
at Object.Module._extensions..js (module.js:467:10)
at Module.load (module.js:356:32)
at Function.Module._load (module.js:312:12)
at Module.require (module.js:362:17)
at require (module.js:378:17)
at Object.<anonymous> (/home/ubuntu/node_stuff/node_json/index.js:3:23)
at Module._compile (module.js:449:26) 
```

这是我正在使用的代码。

```
var querystring = require("querystring"),
fs = require("fs"),
formidable = require("formidable");

var colleges = [
{"name":"A-B Tech","street":"340 Victoria Road","city":"Asheville","state":"NC","zip":"28801","phone":"828-254-1921"},
{"name":"UNC Asheville","street":"1 University Heights","city":"Asheville","state":"NC","zip":"28804","phone":"828-251-6600"},
{"name":"UNC Charlotte","street":"9201 University City Blvd","city":"Charlotte","state":"NC","zip":"28223","phone":"704-687-8622"},
{"name":"Western Carolina","street":"North Carolina 107","city":"Cullowhee","state":"NC","zip":"28723","phone":"877-928-4968"},
{"name":"NC State","street":"2200 Hillsborough","city":"Raleigh","state":"NC","zip":"27695","phone":"919-515-2011"}
];

var college = JSON.parse(colleges);

function abtech(response) {
console.log("Request handler 'abtech' was called.");

var body = '<html>'+
'<head>'+
'<meta http-equiv="Content-Type" '+
'content="text/html; charset=UTF-8" />'+
'</head>'+
'<body>'+
'<ul>'+
'<li>' + college[0].name + '</li>'+
'<li>' + college[0].street + '</li>'+
'<li>' + college[0].city + ' ' + college[0].state + ' ' + college[0].zip + '</li>'+
'<li>' + college[0].phone + '</li>'+
'</ul>'+
'</body>'+
'</html>';

response.writeHead(200, {"Content-Type": "text/html"});
response.write(body);
response.end();
}

function unca(response) {
console.log("Request handler 'abtech' was called.");

var body = '<html>'+
'<head>'+
'<meta http-equiv="Content-Type" '+
'content="text/html; charset=UTF-8" />'+
'</head>'+
'<body>'+
'<ul>'+
'<li></li>'+
'<li></li>'+
'<li></li>'+
'<li></li>'+
'</ul>'+
'</body>'+
'</html>';

response.writeHead(200, {"Content-Type": "text/html"});
response.write(body);
response.end();
}

function home(response) {
console.log("Request handler 'home' was called.");

var body = '<html>'+
'<head>'+
'<meta http-equiv="Content-Type" '+
'content="text/html; charset=UTF-8" />'+
'</head>'+
'<body>'+
'<h1>Welcome to College</h2>'+
'<p>Where would you like to visit?</p>'+
'<ul>'+
'<li><a href="/colleges">Colleges</a></li>'+
'<li><a href="/hours">Hours of Operation</a></li>'+ 
'<li><a href="/start">Upload a Photo</a></li>'+
'<li><a href="/show">View Gallery</a></li>'+
'</ul>'+
'</body>'+
'</html>';

response.writeHead(200, {"Content-Type": "text/html"});
response.write(body);
response.end();
}

function colleges(response) {
console.log("Request handler 'colleges' was called.");

var body = '<html>'+
'<head>'+
'<meta http-equiv="Content-Type" '+
'content="text/html; charset=UTF-8" />'+
'</head>'+
'<body>'+
'<h1>Colleges</h2>'+
'<ul>'+
'<li><a href="/abtech">A-B Tech</a></li>'+
'<li><a href="/unca">UNC Asheville</a></li>'+
'<li><a href="/uncc">UNC Charlotte</a></li>'+
'<li><a href="/wcu">Western Carolina</a></li>'+
'<li><a href="/ncsu">NC State</a></li>'+
'</ul>'+
'</body>'+
'</html>';

response.writeHead(200, {"Content-Type": "text/html"});
response.write(body);
response.end();
}

function hours(response) {
console.log("Request handler 'gallery' was called.");

var body = '<html>'+
'<head>'+
'<meta http-equiv="Content-Type" '+
'content="text/html; charset=UTF-8" />'+
'</head>'+
'<body>'+
'<h1>Hours of Operation</h2>'+
'<table>'+
'<tr><td>Monday - Thursday</td><td>9 a.m. - 7 p.m.</td></tr>'+
'<tr><td>Friday</td><td>9 a.m. - 5 p.m.</td></tr>'+
'<tr><td>Saturday</td><td>9 a.m. - 12 p.m.</td></tr>'+
'</table>'+
'</body>'+
'</html>';

response.writeHead(200, {"Content-Type": "text/html"});
response.write(body);
response.end();
}

function start(response) {
console.log("Request handler 'start' was called.");

var body = '<html>'+
'<head>'+
'<meta http-equiv="Content-Type" '+
'content="text/html; charset=UTF-8" />'+
'</head>'+
'<body>'+
'<h1>Upload a file</h2>'+
'<p>It will be shown on the /show url after</p>'+
'<form action="/upload" enctype="multipart/form-data" '+
'method="post">'+
'<input type="file" name="upload" multiple="multiple">'+
'<input type="submit" value="Upload file" />'+
'</form>'+
'</body>'+
'</html>';

response.writeHead(200, {"Content-Type": "text/html"});
response.write(body);
response.end();
}

function upload(response, request) {
console.log("Request handler 'upload' was called.");

var form = new formidable.IncomingForm();
console.log("about to parse");
form.parse(request, function(error, fields, files) {
console.log("parsing done");

/* Possible error on Windows systems:
   tried to rename to an already existing file */
fs.rename(files.upload.path, "/home/ubuntu/node_stuff/node_assignment/test.jpg", function(err) {
  if (err) {
    fs.unlink("/home/ubuntu/node_stuff/node_assignment/test.jpg")
    fs.rename(files.upload.path, "/home/ubuntu/node_stuff/node_assignment/test.jpg");
  }
});
response.writeHead(200, {"Content-Type": "text/html"});
response.write("received image:<br/>");
response.write("<img src='/show' />");
response.end();
});
}

function show(response) {
console.log("Request handler 'show' was called.");
fs.readFile("/home/ubuntu/node_stuff/node_assignment/test.jpg", "binary", function(error, file) {
if(error) {
  response.writeHead(500, {"Content-Type": "text/plain"});
  response.write(error + "\n");
  response.end();
} else {
  response.writeHead(200, {"Content-Type": "image/jpg"});
  response.write(file, "binary");
  response.end();
}
});
}

exports.start = start;
exports.upload = upload;
exports.show = show;
exports.home = home;
exports.colleges = colleges;
exports.hours = hours;
exports.abtech = abtech; 
```

任何关于我做错了什么的提示将不胜感激。我的教练在周末很难找到，所以我真的没有其他地方可以转。谢谢你。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-09-29T17:31:50.267

您的`colleges`变量已经是一个有效的 JavaScript 对象。你不必使用`JSON.parse`它。

`JSON.parse`期望 a`String`作为第一个参数，但您提供了`Object`. 因此，它被强制变成`String`您在错误消息中看到的样子。

对于您的其余代码，您可能想看看[Express](http://expressjs.com/)或[Zappa](http://zappajs.github.io/zappajs/)以便能够编写更紧凑的代码；）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-07-06T20:16:19.743

解决方案是使用`JSON.stringify`如下

```
var target=JSON.parse(JSON.stringify(source)); 
```

# php - 在这种情况下我的 php 应该返回什么

> ID：12654742
> 
> 赞同：1
> 
> 时间：2012-09-29T17:18:11.850
> 
> 标签：php, jquery, jquery-validate

我想在不刷新页面的情况下提交表单，我有这个表单：

```
<form method="post" action="user-add.php" id="user-add-form">
<input type="text" id="username" name="username" maxlength="15">
<button type="submit" name="add_user" class="btn btn-primary" id="user-add-submit">Add user</button>
</form> 
```

和这个 jquery 函数（使用 jquery 验证插件）：

```
submitHandler: function() {

    $('#user-add-submit').button('loading');

    var post = $('#user-add-form').serialize();
    var action = $('#user-add-form').attr('action');

    $("#message").slideUp(350, function () {

        $('#message').hide();

        $.post(action, post, function (data) {

            $('#message').html(data);
            $('#message').slideDown('slow');

            if (data.match('success') !== null) {
                $('#user-add-form input').val('');
                $('#user-add-submit').button('reset');
            } else {
                $('#user-add-submit').button('reset');
            }
        });
    });
} 
```

但我的问题是 user-add.php 应该是什么样的脚本才能工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-29T17:21:08.493

你的回调函数本身回答了这个问题：

```
function (data) {
    $('#message').html(data);  // #1
    $('#message').slideDown('slow');

    if (data.match('success') !== null) {  // #2
        $('#user-add-form input').val('');
        $('#user-add-submit').button('reset');
    } else {
        $('#user-add-submit').button('reset');
    }
} 
```

*   它必须返回 HTML，因为结果直接进入 DOM (#1)
*   HTML 必须包含（或不包含）区分大小写的子字符串“success”，具体取决于操作的结束方式（#2）

如果我们假设函数不会被修改，上述情况成立。但是修改函数以使其对计算机更友好是一个好主意。您可以改为返回一些如下所示的 JSON：

```
{
    html: "the HTML for your page goes here",
    successful: true
} 
```

这`html`是您要显示`successful`的内容，供内部使用。这样，您不必将字符串`"success"`与确定操作是否确实成功结合起来。使用此方案，您的回调将如下所示：

```
function (json) {
    $('#message').html(json.html);  // #1
    $('#message').slideDown('slow');

    if (json.successful) {
        $('#user-add-form input').val('');
        $('#user-add-submit').button('reset');
    } else {
        $('#user-add-submit').button('reset');
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-29T17:21:44.170

您可能希望返回一个 JSON 对象，其中包含一个用于成功标志的布尔值和一个用于 HTML 的字符串：

```
echo json_encode(array('success' => $success, 'html' => $html)); 
```

然后你可以像这样改变你的成功回调 - 摆脱纯字符串比较以确定操作是否成功是一件好事，甚至可能很重要，具体取决于 HTML 包含的内容（如果“成功”出现在其他地方怎么办？ ):

```
function(data) {
    $('#message').html(data.html);
    $('#message').slideDown('slow');

    if(data.success) {
        $('#user-add-form input').val('');
        $('#user-add-submit').button('reset');
    }
    else {
        $('#user-add-submit').button('reset');
    }
} 
```

# objective-c - 从 URL 缓存图像工作，但返回空白图像？

> ID：12654746
> 
> 赞同：0
> 
> 时间：2012-09-29T17:18:26.733
> 
> 标签：objective-c, ios, xcode, uiimage, nsdata

我有两种方法，首先检查我是否已经下载了图像，如果没有，则从 URL 检索图像并将其缓存到我的应用程序中的 docs 目录中。如果是，它只是检索它，如果我有互联网连接，将重新下载它。以下是两种方法：

```
- (UIImage *) getImageFromUserIMagesFolderInDocsWithName:(NSString *)nameOfFile
{
    UIImage *image = [UIImage imageNamed:nameOfFile];
    if (!image) // image doesn't exist in bundle...
    {
        // Get Image
        NSString *cleanNameOfFile = [[[nameOfFile stringByReplacingOccurrencesOfString:@"." withString:@""]
                                                  stringByReplacingOccurrencesOfString:@":" withString:@""]
                                                  stringByReplacingOccurrencesOfString:@"/" withString:@""];

        NSString *filePath = [NSHomeDirectory() stringByAppendingPathComponent:[NSString stringWithFormat:@"Documents/%@.png", cleanNameOfFile]];
        image = [[UIImage alloc] initWithData:[NSData dataWithContentsOfFile:filePath]];
        if (!image)
        {
            // image isn't cached
            image = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:nameOfFile]]];
            [self saveImageToUserImagesFolderInDocsWithName:cleanNameOfFile andImage:image];
        }
        else
        {
            // if we have a internet connection, update the cached image
            /*if (isConnectedToInternet) {
                image = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:nameOfFile]]];
                [self saveImageToUserImagesFolderInDocsWithName:cleanNameOfFile andImage:image];
            }*/
            // otherwise just return it
        }
    }
    return image;
} 
```

这是保存图像

```
- (void) saveImageToUserImagesFolderInDocsWithName:(NSString *)nameOfFile andImage:(UIImage *)image
{
    NSString *pngPath = [NSHomeDirectory() stringByAppendingPathComponent:[NSString stringWithFormat:@"Documents/%@.png", nameOfFile]];
    [UIImagePNGRepresentation(image) writeToFile:pngPath atomically:YES];

    NSLog(@"directory: %@", [[UIImage alloc] initWithContentsOfFile:pngPath]);
} 
```

该图像已成功下载并缓存到我的文档目录（我知道是因为我可以在文件系统中看到它）。我第一次调用这个方法时它成功地重新加载了图像，但是一旦我转到另一个视图，当我回到同一个视图时重新调用这个方法，它就是空白的。但是，URL 是正确的。这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T17:23:34.097

也许，你应该这样做：

```
image = [UIImage imageWithContentsOfFile: nameOfFile]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T21:24:12.470

(除非你想要那个）。有关详细信息，请参阅[此链接](https://stackoverflow.com/a/12371323/1633251)。在其中创建一个子文件夹并将其标记为不用于 iCloud 备份。

2）尝试改变：

```
image = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:nameOfFile]]]; 
```

到

```
image = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:filePath]]]; 
```

# java - 获取打印数据 - Windows (Redmon)

> ID：12654748
> 
> 赞同：1
> 
> 时间：2012-09-29T17:19:02.507
> 
> 标签：java, windows, pdf, printing, redmon

我正在尝试开发一个应用程序来检索打印数据，编辑其内容，然后打印数据。我正在`RedMon`为此目的使用。但到目前为止，我在网上看到的所有教程都与将数据存储到`PDF`using `RedMon`.

我希望能够`RedMon`在 Windows 平台上进行配置，以便将整个打印数据（必然出现在打印纸上的数据）原样写入`.txt`文件，或者直接作为输入提供给`java`我的应用程序取得了。

到目前为止，我一直未能成功找到解决方案。这是可以实现的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T14:56:50.177

您知道所有打印机的“打印数据”都不相同，是吗？其文件格式取决于用于特定打印队列的打印机驱动程序。

如果您真的遵循了所有教谁将打印数据存储为 PDF 的 RedMon 教程，您肯定会注意到两件事：

*   **首先**，所有这些解决方案都使用**PostScript**打印机驱动程序；

*   **其次**，所有这些解决方案都使用 RedMon 作为打印监视器，它捕获 PostScript 数据并将其交给 Ghostscript 以将其转换为 PDF。

因此，出于您的目的，您很可能不需要 Ghostscript。**您可以直接将接收到的数据按原样保存到文件中，而不是运行 Ghostscript。**

但是，只有当您的打印机确实是支持 PostScript 的设备时，您才能继续使用 PostScript。当然，您必须精通 PostScript 才能“编辑其内容”。

如果您的打印机使用另一种打印机语言（PCL、TIFF、ESC/P、ESC/POS 或其他），那么您必须用适当的方式替换 PostScript 打印机驱动程序。当然，您必须能够很好地理解相应的打印机语言才能“编辑其内容”......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-29T13:05:13.470

这是C中的一个解决方案：

```
int main(int argc, char** argv)
{
    HANDLE handle;
    unsigned char ucBuffer[1024];
    FILE *pFileTarget;
    DeleteFile("c:\\toprint.txt");
    pFileTarget=fopen("c:\\toprint.txt","wb");
  handle = GetStdHandle(STD_INPUT_HANDLE);

    while (1)
    {
        DWORD dwBytesRead=0;
        if(ReadFile(  handle,ucBuffer,1024, &dwBytesRead,NULL) == 0)
    {
            break;
        }else
            fwrite(ucBuffer,dwBytesRead,1,pFileTarget);
    }
    fclose(pFileTarget);
  CloseHandle(handle);
    return (EXIT_SUCCESS);
} 
```

# jakarta-ee - 我们如何将 *.aar 文件转换为 *.war 文件以部署在 weblogic 服务器上？

> ID：12654754
> 
> 赞同：0
> 
> 时间：2012-09-29T17:19:20.473
> 
> 标签：jakarta-ee

我们需要将 .aar 文件转换为 .war 文件以部署在 weblogic 服务器上吗？如果有人知道如何做到这一点，它就很紧迫。请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T17:23:50.427

我相信您需要将 .aar 文件放入您的war文件的WEB-INF/services文件夹中，然后您才能部署war。

# asp.net - ASP.NET：当前不会命中断点。没有为此文档加载任何符号

> ID：12654755
> 
> 赞同：1
> 
> 时间：2012-09-29T17:19:26.900
> 
> 标签：asp.net, vb.net, visual-studio-2010, debugging, breakpoints

我有这个问题好几天了。我终于为 ASP.NET 程序员找到了一个修复方法，我想我会分享。

**问题**

设置断点后，然后调试我的断点会变成黄色并带有感叹号。当悬停在断点上时，它会说“断点当前不会被命中。没有为此文档加载任何符号。”我尝试通过我的项目和 Visual Studio 清理、重建、更改各种设置。没有任何效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T17:19:26.900

**解决方案**

我在解决方案设置中四处寻找。我注意到在“Web”选项卡下，我的`Start Action`设置设置为“Current Page”以外的设置。将其设置回当前页面后，一切正常。

我希望这可以解决像我这样在尝试了他们可以在互联网上找到的所有其他建议/答案后筋疲力尽的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-05T15:18:37.890

这个问题只发生在我的 ASP.Net 项目上

1.  **右键**单击**Web 项目**
2.  选择**属性页**
3.  启动选项
4.  确保选择**使用当前页面**（如下所示）

![更改设置的确切位置](../Images/e4358ff8c90cbaa96bb8d2e850bcf4e8.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-19T14:26:04.980

发生这种情况是因为您的项目仍然存在错误，因此请运行最后一个正确版本。纠正您的错误，肯定是错误“CodeBehind”将其更改为“CodeFile”并且错误肯定消失了，您可以返回项目运行而没有错误。

# google-chrome - 为什么 Chrome 扩展 API 主要由回调组成？

> ID：12654756
> 
> 赞同：2
> 
> 时间：2012-09-29T17:19:27.763
> 
> 标签：google-chrome, google-chrome-extension

这只是出于好奇，因为我以编写游戏为生，而不是 Web 应用程序。

Chrome 扩展 API（`chrome.*`家族）几乎完全由回调设置器组成的原因是什么？我说的是这个乍一看似乎滥用闭包的编程模型：

```
// do something with the Tab object of an activated tab
chrome.tabs.onActivated.addListener(function (activeInfo) {
    chrome.tabs.get(activeInfo.tabId, function(theTab) {
        foo(theTab);
    });
}); 
```

我习惯于让 getter 简单地返回请求的值，然后发现这很有趣。这是因为所有这些方法（例如`getLastFocused`这里）实际上只为浏览器引擎安排异步任务吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-07-19T01:36:02.627

我想知道类似的东西并找到了一个很好的解释，也许有人会像我一样发现这很有用：

> [在 API 中使用回调的原因] 与 Google Chrome 的多进程架构有关。网页和 JavaScript 运行在不仅彼此分离的进程中，而且还与主浏览器进程分开运行，而主浏览器进程单独具有读取和写入本地文件系统的能力。这是 Google Chrome 的一项重要的安全性和稳定性功能。如果像这样的调用是同步的，您的扩展程序将不得不停止一切并等待浏览器进程响应请求，而用户可能一直在尝试与您的扩展程序的 UI 交互，而该 UI 已变得无响应。使用异步 API 更具挑战性，但它服务于最好的用户体验。

这是关于扩展 API 设计的视频的文字[记录。](https://www.youtube.com/watch?t=191&v=bmxr75CV36A)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T17:25:02.823

这是一个事件处理程序和一些异步操作的组合。此外，作用域在 javascript 中的工作方式可能有点*不确定*；使用闭包创建了一个可靠的范围，允许传递无法以其他方式完成的数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T10:24:19.183

在我看来，`chrome.*`API 中的大多数方法都是异步的，原因之一是扩展通常必须处理用户交互。通常，任何异步 API 都会导致更好的应用程序响应能力。因此，`chrome.*`API 的开发人员只是提供了一种更简单的方法来编写高效的扩展，这不会减慢 Google Chrome 的速度，让用户感到失望。

# visual-studio-2010 - 部署 vsix 引用的 dll

> ID：12654758
> 
> 赞同：0
> 
> 时间：2012-09-29T17:19:50.200
> 
> 标签：visual-studio-2010, visual-studio-addins, visual-studio-extensions, vsix

我有一个使用一些外部库的 Visual Studio 扩展项目。此外，该库使用另一个库，该库必须与 exe 文件放在同一文件夹中。（在我们的例子中，它是 Visual Studio 文件夹。安装 Visual Studio 的文件夹。）那么如何部署我的 vsix 文件呢？是否有能力在 Visual Studio 文件夹中复制一些外部库？

第一个想法是在扩展的第一个中复制库 dll。但这不是很好...

# javascript - 网站上的链接能否打开 Android 应用程序？

> ID：12654759
> 
> 赞同：2
> 
> 时间：2012-09-29T17:19:49.710
> 
> 标签：javascript, android, html

我可以在我的网站上设置一个链接，以便在点击时打开某些 Android 应用程序吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T17:22:09.683

这取决于您要打开的应用程序是否能够处理链接。如果应用程序有适当的[`<intent-filter>`](http://developer.android.com/guide/components/intents-filters.html)，那么它可以通过链接启动。例如，Google Play 应用程序对所有 play.google.com 链接都有一个过滤器，并在单击链接时为用户提供在浏览器和 Google Play 之间进行选择的选项。

# objective-c - 将 Facebook Places id 从 iOS 中的 placesPicker 传递到 postParams 以进行供稿发布

> ID：12654760
> 
> 赞同：1
> 
> 时间：2012-09-29T17:19:51.300
> 
> 标签：objective-c, ios, facebook, facebook-graph-api, facebook-ios-sdk

这一直让我发疯！我试图让我的应用程序向用户的 facebook 提要发布消息，并在从 iOS 中的 placesPicker 选择本地位置后签入到 facebook Place。

我几乎已经完成了测试中的所有工作，这意味着当我为 NSMutableDictionary 的所有 postParams 手动键入字符串值时，它会完美发布。前任：

```
self.postParams =
    [[NSMutableDictionary alloc] initWithObjectsAndKeys:
     @"I am doing XYZ", @"message",
     @"123456abc",@"tags",
     @"123456xyz,@"place",
     nil]; 
```

上面的 postParams 在发布到提要时完美运行，它显示消息，然后签入“地点”ID，并说您使用“标签”中的用户 ID。问题是我真的从 Facebook SDK 的 placePicker 获取了 Place id。我已经设置好选择器并且工作正常，但我不知道如何用所选位置的 id 替换硬编码的 @"123456xyz"。

这就是我现在所拥有的：

```
self.postParams =
        [[NSMutableDictionary alloc] initWithObjectsAndKeys:
         @"I am doing XYZ", @"message",
         @"123456abc",@"tags",
         self.selectedPlace.id,@"place",
         nil]; 
```

self.selectedplace.id 确实成功地包含了 Place 的 id，当我在控制台中使用 debug/NSLog 打印它时，它准确地保存了该值。但是当我在选择一个地方后尝试发布它时，我得到“错误：域 = com.facebook.sdk，代码 = 5”

下面是 self.selectedPlace 的定义和合成方式：

```
@property (strong, nonatomic) NSObject<FBGraphPlace> *selectedPlace;

...

@synthesize selectedPlace = _selectedPlace;

...

[placePicker presentModallyFromViewController:self
                                     animated:YES
                                      handler:^(FBViewController *sender, BOOL donePressed) {
                                          if (donePressed) {
                                              self.selectedPlace = placePicker.selection;
                                          }
                                      }]; 
```

所以，总结一下我的问题：我怎样才能成功地将存储在 self.selectedPlace.id 中的这个 Place id 放入 postParams 字典中，以便它可以被成功解释并发布到用户的提要中？

另外，我应该提前警告大家......我是自学成才，仍在学习，虽然我可以查看代码，理解它的作用并编写它......恐怕我对术语不太了解& 讨论/理解一些语言...大声笑，所以如果您在任何答案或评论中牢记这一点，这将对我有很大帮助:) 谢谢，我期待着打破我的 stackoverflow newb shell 和在这里变得更加远离社区。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T04:35:12.337

想通了...而不是使用 initWithObjectsAndKeys 一起设置帖子参数，如下所示：

```
self.postParams =
    [[NSMutableDictionary alloc] initWithObjectsAndKeys:
     @"I am doing XYZ", @"message",
     @"123456abc",@"tags",
     self.selectedPlace.id,@"place",
     nil]; 
```

只需为您传递的每个参数创建单独的字典，并使用 setValue: forKey 将每个参数设置为最终的 postParams：

```
[fbPostParams setValue:self.selectedPlace.id forKey:@"place"]; 
```

# java - 如何在 Java 中向 n 数组添加增量？

> ID：12654764
> 
> 赞同：0
> 
> 时间：2012-09-29T17:20:45.057
> 
> 标签：java, arrays, numbers

例如，如果我正在执行如下的 for 循环：

假设字符串已经被制作成一个字符数组

```
for(i=0;i<somestring.length;i++)

 somestring[i] = somestring[i] + i; 
```

为什么以前的工作不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T17:24:32.393

结果`char + int`是`int`- 所以你需要转换为`char`：

```
char[] charArray = text.toCharArray();
for (int i = 0; i < charArray.length; i++) {
    charArray[i] = (char) (charArray[i] + i);
} 
```

或者使用使用时可用的隐式转换`+=`：

```
char[] charArray = text.toCharArray();
for (int i = 0; i < charArray.length; i++) {
    charArray[i] += i;
} 
```

但是，通常对字符执行算术是一个坏主意。请记住，您可以通过这种方式轻松获得无法打印的字符。你想达到什么目的？

# javascript - 从查询中的输入中获取字符串值以显示 div

> ID：12654765
> 
> 赞同：1
> 
> 时间：2012-09-29T17:21:00.660
> 
> 标签：javascript, jquery

只是想知道为什么这对我不起作用：

```
 $(document).ready(function(){
  $('.box').hide();
  $("#name").blur(function() {
      var value = $(this).val();
      $("div:contains("+value+")").FadeIn(1000);
   });
}); 
```

在 Javascript/JQuery 上相当新，并试图找出我哪里出错了......我正在尝试获取输入的值（即“#name”id）并将其与 div 匹配在文档中（最初是隐藏的）并且当输入的字符串值包含在文档中的 div（在本例中为“.box”）中时，我希望显示该 div。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T17:22:48.580

更改`FadeIn`为[fadeIn](http://api.jquery.com/fadeIn/)：

```
$("div:contains("+value+")").fadeIn(1000); 
```

# r - R减小图表大小并从ggplot中删除灰色背景

> ID：12654766
> 
> 赞同：4
> 
> 时间：2012-09-29T17:21:07.247
> 
> 标签：r, ggplot2

我正在使用 ggplot 绘制一些数据。它工作正常，但我想控制绘图区域的形状并删除灰色背景。

这是我现在正在使用的代码：

```
ggplot(data.melted, aes(x = Year, y = value, colour = variable)) +
    geom_line() +
    scale_x_continuous("Year") +
    scale_y_continuous("Fraction of papers") +
    scale_colour_discrete("Topics") 
```

这是它产生的输出：![在此处输入图像描述](../Images/416dcfe73d4377b8c481f8f6bcbf765b.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-29T17:27:26.800

```
ggplot(data.melted, aes(x = Year, y = value, colour = variable)) +
    geom_line() +
    scale_x_continuous("Year") +
    scale_y_continuous("Fraction of papers") +
    scale_colour_discrete("Topics") + theme(panel.background = element_blank()) 
```

保存绘图时指定尺寸。有关`?ggsave`其他选项，请参阅。

```
ggsave(p1, file = "plot.png", width = 5, height = 5) 
```

# javascript - Backbone.js 性能 - 将类添加到嵌套集合的第一个和最后一个模型

> ID：12654769
> 
> 赞同：0
> 
> 时间：2012-09-29T17:21:13.843
> 
> 标签：javascript, performance, backbone.js, iteration

我有一页的长列表中显示了约 100 种产品的列表。每个产品属于一个类别，我大约有 5 个类别。每个产品都有一个 category_id。

我想为一个类别的每个第一个产品添加一个“.first”类，为一个类别的每个最后一个产品添加一个“.last”类。

性能是关键，我自己想出了一些解决方案，但写得非常糟糕而且太麻烦了。

示例数据：

```
products = {
   id: 1, category_id: 1;
   id: 2, category_id: 1;
   id: 3, category_id: 1;
   id: 4, category_id: 2;
   id: 5, category_id: 2;
   id: 6, category_id: 2;
   id: 7, category_id: 3;
   id: 8, category_id: 3;
   ...
} 
```

我正在寻找的结果：

```
<ul>

  <li class='first' id='1'></li>
  <li id='2'></li>
  <li class='last' id='3'></li>

  <li class='first' id='4'></li>
  <li id='5'></li>
  <li class='last' id='6'></li>

  <li class='first' id='7'></li>
  <li id='8'></li>
  ...
</ul> 
```

编辑：感谢您的帮助@niemand！我使用了 groupBy ，这就是我到目前为止所拥有的。这是解决这个问题的好方法，性能明智吗？

```
window.firsts = []
window.lasts = []
@grouped = _.groupBy(@collection.toJSON(), 'category_id')
_.each @grouped, (group) ->
  window.firsts.push new App.Models.Piece(_.first(group)).get('id')
  window.lasts.push new App.Models.Piece(_.last(group)).get('id') 
```

这样，当我渲染每个模型视图并应用正确的类时，我可以检查 window.firsts 或 window.lasts 是否包含当前模型的 id。如果有一种更高效的方式来解决这个问题，我很想知道！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T18:51:27.887

用于`Backbone.Collection.where({category_id: <category_id>})`创建二维数组，其中包含按类别分组的模型。届时您将能够轻松找到所需的数据。

或者，如果您不介意类别中模型的顺序，那么只需`Backbone.Collection.sortBy()`遍历集合并查找 category_id 更改的所有索引。

如果您有一个 category_id 列表并且它很小，那么第一种方法会更好。第二个更适合大量数据。

**编辑：**

有一个下划线函数 groupBy() 用于集合！所以你应该使用它：`collection.groupBy(function(model) {return model.get('category_id');});`

# javascript - 来自动态加载的代码的远程 json 调用

> ID：12654771
> 
> 赞同：0
> 
> 时间：2012-09-29T17:21:55.120
> 
> 标签：javascript, jquery, json

我用

```
 $("#result").html(ajax_load).load(loadUrl, null, function (responseText) {
            $('body').css('overflow-y', 'scroll');
        }); 
```

在 div 中加载页面并从我尝试使用的加载页面加载：

```
$.ajax({
    url: "link",
    data: { 'device': device, 'latestDate': latestDate },
    dataType:   "jsonp"
}) 
```

和

```
$.getJSON equivalent. 
```

有时我可以观察到链接是从 $.ajax 请求的，但我从未设法执行来自 $.getJSON 的请求。

从动态加载的代码中调用 $.getJSON 是一种非常糟糕的技术吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T17:25:55.240

No.`$.getJSON`实际上只是 . 的简写`$.ajax`。它具有相同的功能，并带有一些小的语法糖果，使您的生活更轻松。如果`$.ajax`对您有用但`$.getJSON`不是，那么我必须得出结论，您的`$.getJSON`陈述并不真正等效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T17:29:53.783

当使用 jQuery 的 ajax 方法时，它们似乎会默默地失败。尝试将一些处理程序附加到 ajax()，如此处详细介绍[http://api.jquery.com/ajaxError/](http://api.jquery.com/ajaxError/)

更多信息可以在这里找到 - [http://api.jquery.com/category/ajax/](http://api.jquery.com/category/ajax/)

# python - 使用python创建空文件

> ID：12654772
> 
> 赞同：306
> 
> 时间：2012-09-29T17:22:02.173
> 
> 标签：python

我想`x`使用 python 创建一个带有路径的文件。我一直在使用`os.system(y)`where `y = 'touch %s' % (x)`。我一直在寻找 的非目录版本`os.mkdir`，但我找不到任何东西。是否有这样的工具可以在不打开文件或使用系统或 popen/子进程的情况下创建文件？

* * *

## 回答 #1

> 赞同：539
> 
> 时间：2012-09-29T17:25:22.423

~~没有打开文件就无法创建文件~~有`os.mknod("newfile.txt")`（*但它需要 OSX 上的 root 权限*）。创建文件的系统调用实际上是`open()`带有`O_CREAT`标志的。因此，无论如何，您将始终打开文件。

因此，简单地创建一个文件而不截断它以防万一它存在的最简单方法是：

```
open(x, 'a').close() 
```

实际上你可以省略，`.close()`因为 CPython 的 refcounting GC 会在语句完成后立即关闭它`open()`- 但是明确地这样做会更干净，并且依赖于 CPython 特定的行为也不好。

如果您想要`touch`' 的行为（即在文件存在的情况下更新 mtime）：

```
import os
def touch(path):
    with open(path, 'a'):
        os.utime(path, None) 
```

您可以扩展它以在路径中创建任何不存在的目录：

```
basedir = os.path.dirname(path)
if not os.path.exists(basedir):
    os.makedirs(basedir) 
```

* * *

## 回答 #2

> 赞同：59
> 
> 时间：2015-08-02T15:00:33.793

当然，有一种无需打开即可创建文件的方法。就像打电话一样简单`os.mknod("newfile.txt")`。唯一的缺点是这个调用需要 OSX 上的 root 权限。

# jdbc - MonetDB + JDBC“没有这样的数据库”

> ID：12654775
> 
> 赞同：1
> 
> 时间：2012-09-29T17:22:22.163
> 
> 标签：jdbc, monetdb

所以我正在努力让 MonetDB 与 JDBC 连接起来，但即使是基本教程也遇到了问题。我可能在这里做错了什么，也许有人可以指出我正确的方向（将不胜感激！）。

所以我正在运行的命令是：

```
monetdbd start /dbfarm
monetdb create test1
monetdb release test1
java -jar /jars/jdbcclient.jar -u monetdb -d test1

password:
Database connect failed: no such database 'test1', please create first 
```

--

这对我来说似乎很奇怪，因为我可以通过 mclient -u monetdb -d test1 访问 test1。

TIA

# c# - 尝试格式化 Datagrid 输出的字符串

> ID：12654781
> 
> 赞同：0
> 
> 时间：2012-09-29T17:22:56.760
> 
> 标签：c#, telerik-grid

嗨，我有以下内容，它根据数据网格中的值在 Excel 电子表格中创建两个工作表，我能够让它为两个数据网格工作，但是我需要为 14 个数据网格做这件事，这就是我到目前为止所得到的;

```
 var grid1Output = RadGridView1.ToExcelML();
  var grid2Output = RadGridView2.ToExcelML().Replace("Worksheet1", "Worksheet2");

  var workBook = grid1Output.Replace("</Worksheet>", "</Worksheet>" + 
       grid2Output.Substring(grid2Output.IndexOf("<Worksheet"), 
       grid2Output.IndexOf("</Worksheet")- grid2Output.IndexOf("<Worksheet")) + "        </Worksheet>"); 
```

以上工作正常，但是我总共需要为 14 个网格输出执行此操作。我的问题是，我无法在正确的位置替换字符串。我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T17:36:41.887

我可能会使用 Linq for XML 方法而不是字符串操作，但选择权在你。

无论哪种方式，编写一个接受网格输出（我假设它是一个字符串）、提取内容并返回它们的方法都不应该那么难。调用例程然后组装 14 个 XML 字符串并将它们包装在单个 Worksheet 标记中。

这是一个尝试。请记住，我不熟悉 RadGridView 和 ToExcelML 的输出，因此如果不进行一些修改，您可能无法使用此代码。我做了一些可能不成立的假设。

首先，我将创建一个将 XML 字符串作为输入的方法。我假设这个字符串完全包裹在 <Worksheet *n* > 标记中。

```
string ExtractWorksheetContents(string excelML, int index)
{
// You might also be able to do this with a regex, depending on how the contents are structured
// Since I don't know enough about the content, I will do this with string manipulation, as
// you did, rather than loading the XML and making assumptions.

    string tagName = string.Format("Worksheet{0}", index);        
    int worksheetStart = excelML.IndexOf("<" + tagName);
    int worksheetEnd = excelML.IndexOf("</" + tagName + ">") + tagName.Length + 3);
    // Should contain some checks that neither w'sheet start nor end are -1
    return excelML.Substring(worksheetStart, worksheetEnd-worksheetStart);
} 
```

然后我会汇总结果。同样，我正在对 XML 的结构做出假设。

```
StringBuilder sb = new StringBuilder();
sb.Append("<Worksheet>");
RadGridView[] gridViews = new RadGridView[] { RadGridView1, RadGridView2 .... RadGridView14 };
for(int i=0;i<14; i++)
{
    var rgv = gridViews[i];
    sb.Append(ExtractWorksheetContents(rgv.ToExcelML(),i+1));
}
sb.Append("</Worksheet>");
var workBook = sb.ToString(); 
```

希望这会有所帮助。

# macos - AV Foundation：准备播放的 currentItem 与 -[AVPlayer readyForDisplay] 属性之间的区别？

> ID：12654783
> 
> 赞同：5
> 
> 时间：2012-09-29T17:23:18.647
> 
> 标签：macos, cocoa, avfoundation

我的视频播放器遇到了一个奇怪的情况，其核心代码与我早期制作的应用程序中的代码没有太大变化。这就是问题所在：我正在插入一个“_loadingLayer”（一个表示视频正在加载的 CATextLayer），然后观察 AVPlayer 的 currentItem 的状态属性以确定何时删除“_loadingLayer”并将其替换为我的实际“_playerLayer” . 这是我的 KVO 代码：

```
-(void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context {

if ((object == _playerLayer) && (_playerLayer.player.currentItem.status == AVPlayerItemStatusReadyToPlay)) {

    [CATransaction setAnimationDuration:1.8];

    _loadingLayer.opaque = NO;

    if (_playerLayer.readyForDisplay) {

        NSLog(@"Should be ready now.");

    }

    [self addPlayerLayerToLayerTree];

}

} 
```

我的问题是视频正在开始，但只有音频正在播放——图层保持黑色。当我插入上面的 NSLog 语句时，我发现了原因： 显然，虽然 currentItem 的状态是“AVPlayerItemStatusReadyToPlay”，但播放器层实际上并不是 readyForDisplay。这对我来说毫无意义——这似乎违反直觉。有人可以给我一些指导吗？

通过将背景颜色设置为红色，我能够验证 _playerLayer 是否已添加到图层树中。

我认为可能与之相关的另一件奇怪的事情......我一直在调试器控制台中看到这些消息：

PSsetwindowlevel, 错误设置窗口级别(1000) CGSSetIgnoresCycle: error 1000 设置或清除窗口标签

提前致谢。这是来自 Apple 开发论坛的交叉帖子。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-28T21:39:42.317

我们遇到了类似的问题，并将其追溯到我认为是 iOS 5.1（可能还有早期版本）中的错误。它已在 iOS 6.0 中修复。由于我无法在任何地方找到解决方案，因此我正在为未来遇到此问题的人写一篇长篇文章。

如果 AVPlayerItem 在获得 AVPlayerLayer 之前报告了 AVPlayerStatusReadyToPlay 的状态，那么 AVPlayer 将永远不会报告它是 readyForDisplay。

所以当你这样做时：

```
self.player = [AVPlayer playerWithPlayerItem:self.playerItem]; 
```

确保紧随其后：

```
self.playerLayer = [AVPlayerLayer playerLayerWithPlayer:self.player]; 
```

并且您在两者之间没有太多代码。

我构建了一个测试台，让它 100% 的时间工作或 100% 的失败。请注意，要查看实际应用程序中发生的情况可能会很棘手，因为您在视频上会有不同的加载时间，这会影响 playerItem 报告 AVPlayerStatusReadyToPlay 的速度。

如果您想在您的应用程序中进行测试，请将其放入一个简单的视图中。以下将在 iOS 5.1 上不起作用（即您将听到音频但看不到视频）。如果您将 loadPlayerLayer 切换为在 loadPlayer 结束时调用，它将始终有效。

未来读者的后续：一些玩家事件可以改变这个顺序，让你认为它是有效的。不过，它们是红鲱鱼，因为它们无意中颠倒了加载顺序，使得 playerLayer 在 AVStatusReadyToPlay 之前被抓取。这些事件是：寻找视频、转到主屏幕然后重新激活应用程序、播放器切换到 HLS 视频中的不同视频/音频轨道。这些动作再次触发 AVStatusReadyToPlay，从而使 playerLayer 在 AVStatusReadyToPlay 之前发生。

这是使用 Apple 的测试 HLS 视频的测试工具：

```
-(void)loadPlayer
{
  NSLog(@"loadPlayer invoked");

  NSURL *url = [NSURL URLWithString:@"https://devimages.apple.com.edgekey.net/resources/http-streaming/examples/bipbop_4x3/bipbop_4x3_variant.m3u8"];
  self.playerItem = [AVPlayerItem playerItemWithURL:url];
  [self.playerItem addObserver:self forKeyPath:@"status" options:NSKeyValueObservingOptionInitial | NSKeyValueObservingOptionNew context:&kPlayerContext];
  self.player = [AVPlayer playerWithPlayerItem:self.playerItem];

}

-(void)loadPlayerLayer
{
  NSLog(@"starting player layer");
  self.playerLayer = [AVPlayerLayer playerLayerWithPlayer:self.player]; 
  [self.playerLayer addObserver:self forKeyPath:@"readyForDisplay" options:NSKeyValueObservingOptionInitial | NSKeyValueObservingOptionNew context:&kPlayerLayerContext];
  [self.playerLayer setFrame:[[self view] bounds]];
  [[[self view] layer] addSublayer:self.playerLayer];
}

-(void)observeValueForKeyPath:(NSString*)path ofObject:(id)object change:(NSDictionary*)change context:(void*) context
{
  if(context == &kPlayerContext){
    if([self.player status] == AVPlayerStatusReadyToPlay){
      NSLog(@"Player is ready to play");
      //Robert: Never works if after AVPlayerItem reports AVPlayerStatusReadyToPlay
      if(!self.startedPlayerLayer){
        self.startedPlayerLayer = YES;
        [self loadPlayerLayer];
      }
    }
  }

  if(context == &kPlayerLayerContext){
    if([self.playerLayer isReadyForDisplay] == YES){
      NSLog(@"PlayerLayer says it's ready to display now");
      [self playTheVideoIfReady];
    }
  }
} 
```

# php - PHP-Downloadscript - 下载限制不起作用

> ID：12654788
> 
> 赞同：2
> 
> 时间：2012-09-29T17:23:50.707
> 
> 标签：php

当我使用这个 phpcode 下载一个下载速度为 300Kb/si 的文件时，使用这个：

```
 function readfile_chunked($dl_link, $filesize_file) {
  $chunksize = 300*1024; #Buffersize in Byte 
  $data = '';
  $handle = fopen($dl_link, 'rb');
    while (!feof($handle)) {
      $data = fread($handle, $chunksize);
      sleep(1);
      print $data;
      @ob_flush();
      @flush();
    }
  fclose($handle);
 } 
```

但它不起作用！:-(

当我开始下载时，速度低于 1 KB/s，它会中断然后恢复，依此类推。

当我在上面的代码中取消这个“sleep(1)”时，下载开始并且一切都很好，但它以全速运行。-> 合乎逻辑！

为什么是这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T17:37:41.153

这看起来基本没问题，但是请尝试以下操作：

```
function readfile_chunked($path, $speed)
{
    if (is_file($path) !== true)
    {
        exit('not a local file');
    }

    header('Pragma: public');
    header('Cache-Control: public, no-cache');
    header('Content-Type: application/octet-stream');
    header('Content-Length: ' . filesize($path));
    header('Content-Disposition: attachment; filename="' . basename($path) . '"');
    header('Content-Transfer-Encoding: binary');

    $handle = fopen($path, 'rb');

    while (!feof($handle))
    {
        echo fread($handle, $speed * 1024); sleep(1);

        while (ob_get_level() > 0)
        {
            ob_end_flush();
        }

        flush();
    }

    fclose($handle);
}

readfile_chunked('/path/to/your/file.ext', 300); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T17:54:19.557

您可能想先尝试添加`@ob_flush_end()`以禁用输出缓冲，然后`@ob_flush()`在循环中删除。延迟可能是由于输出缓冲。

您也可以尝试替换`print`为`echo`. 您可能会获得一些性能改进。

还可以尝试使用更小的块并使用[`usleep`](http://hk2.php.net/manual/en/function.usleep.php)更短的延迟时间。

# scheme - 方案，子列表

> ID：12654794
> 
> 赞同：-1
> 
> 时间：2012-09-29T17:24:48.100
> 
> 标签：scheme

该函数称为子列表？有两个参数（两个列表）。它检查 l2 是否是 l1 的子列表并返回 #t 或 #f。

到目前为止我有这个，但似乎存在功能无法正常工作

```
(define (sublist? l1 l2)
  (cond ((null? l2) #t)
        ((exists l1 (car l2)) #t)
        (else (sublist? l1 (cdr l2)))))
(define (exists l p)
  (if (null? l) #f
      (or (equal? p (car l)) (exists (cdr l) p)))) 
```

更新

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T18:11:52.663

首先，我认为在您的`exists`功能中，您缺少一个`equals?`

似乎第一个参数应该是一个原子，但是在您的子列表函数中，您首先发送列表，然后发送原子，您需要切换参数。

```
(define (exists l p)
  (if (null? l) #f
      (or (equal? p (car l)) (exists (cdr l) p)))) 
```

那应该可以正常工作。

此外，将谓词函数称为问题的约定，您应该将其命名`exists?`

[编辑]

同样经过仔细检查，它看起来像您的子列表？功能不正确。即使列表中只存在子列表的一个元素，它也会返回#t。您需要将其修改为：

```
 (define (sublist? l1 l2)
  (cond ((null? l2) #t)
        ((not (exists l1 (car l2))) #f)
        (else (sublist? l1 (cdr l2))))) 
```

现在你说：

1) 是空的吗？然后是一个子列表。

2) 这个元素不在列表中吗？然后不是。

3) 如果是，则检查其余元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T21:23:39.187

我相信前面的答案只检查子集，而不是子列表。子列表的顺序很重要，因此您不能简单地检查列表中元素的存在。您需要执行以下操作。

```
(define (sublist? l1 l2)
  (cond ((null? l2) #t)
        ((null? l1) #f)
        ((headlist? l1 l2) #t)
        (else (sublist? (cdr l1) l2)))

(define (headlist? l1 l2)
  (cond ((null? l2) #t)
        ((null? l1) #f)
        ((not (equal? (car l1) (car l2))) #f)
        (else headlist? (cdr l1) (cdr l2)))) 
```

# iphone - 在 Objective-C 和 iOS 中合并项目范围定义的最佳实践

> ID：12654802
> 
> 赞同：3
> 
> 时间：2012-09-29T17:25:48.170
> 
> 标签：iphone, objective-c, ios, xcode

就我而言，我有一个高度定制的 iPhone 应用程序，其中包含所有自定义视图。我想利用 iPhone 5 的屏幕尺寸，但我的视图需要精确的布局，并且在我的视图上设置 autoresizingMask 是不够的。

我想在我的每个源文件中都有某种项目范围的定义标志，我需要在运行时设置这个定义/标志。在我的具体情况下，我也许可以像这样导入一些头文件定义：

```
if ( IS_IPHONE_5 ) {

/* 
   Set appropriate frames for the additional screen space
*/
}

else {

/* 
  Set views otherwise
*/
} 
```

这个问题并不完全是主观的——它可以适用于任何希望设置和检索项目范围定义的人。也许另一种情况可能是颜色主题或可以在设置中更改的东西。

如何在我的程序执行时设置这些定义以及如何将它们合并到我的源文件中？

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-29T18:20:22.753

它可以像将宏放入应用程序`APPNAME_prefix.pch`文件一样简单：

```
#define IS_IPHONE_5 ([[UIScreen mainScreen]bounds].size.height == 568) 
```

您的应用程序中的每个文件都可以使用它。

作为替代建议，我认为我的偏好是在 上添加一个类别`UIDevice`，也许还添加一个宏以方便起见，然后只让需要它的对象（即视图和控制器层中负责布局的对象）导入它, 以避免将您的模型耦合到`UIKit`.

例如`UIDevice+iPhone5.h`：

```
#define IS_IPHONE_5 [[UIDevice currentDevice] isIPhone5]

@interace UIDevice (iPhone5)

- (BOOL)isIPhone5;

@end 
```

和`UIDevice+iPhone5.m`：

```
@implementation UIDevice(iPhone5Checking)

- (BOOL)isIPhone5
{
     return ([[UIScreen mainScreen]bounds].size.height == 568); //or however else you want to check
}

@end 
```

哪个最适合您的需求。希望这可以帮助！

# mongodb - Yii Gii 与 MongoDB

> ID：12654804
> 
> 赞同：1
> 
> 时间：2012-09-29T17:26:13.523
> 
> 标签：mongodb, yii, gii

谁能告诉我 MongoDB 如何与 YII 一起使用？

如果使用的数据库是 MongoDB ，我们如何使用[Gii创建控制器和模型函数？](http://www.yiiframework.com/doc/guide/1.1/en/topics.gii)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T00:23:20.257

我用过[YiiMongoDBSuite (YMDS)](https://github.com/joaorjose/YiiMongoDbSuite/tree/dev)，它对 Gii 有一些非常粗略的支持。您可以生成入门类，但鉴于 MongoDB 没有固定模式，您需要编辑模型以使其有用。有一个奇怪的组合可以让您从 SQL 表生成 MongoDB 模型，但这似乎比它的价值更多。

YMDS 的`EMongoDocument`类扩展了标准的 Yii`CModel`类，所以如果你想用 CRUDS 构建应用程序，这是一个有用的基础。

不幸的是，YMDS 不再由原作者维护，并且有几个[社区分叉](https://github.com/canni/YiiMongoDbSuite/network)可供选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T17:32:56.727

创建控制器的方式和往常一样，但是你必须使用扩展从 Yii 与 mongoDB 对话，

您需要使用[yii 的直接 Mongo 套件](http://www.yiiframework.com/extension/directmongosuite/) 。它是一个包含 mongoDB 组件集合的扩展。

# java - 没有真正原因的 NullPointerException

> ID：12654810
> 
> 赞同：0
> 
> 时间：2012-09-29T17:26:39.787
> 
> 标签：java, nullpointerexception

```
 Character c = null;
    if (c != 'P') c = 'G'; 
```

这是一个简单的代码，结果让我很生气。而不是条件，我得到一个错误 NullPointerException。虽然为空！= 'P' 并且必须满足条件。我为额外验证 c 的问题而苦苦挣扎！=在条件“如果”中为空。应该是吗？有什么方法可以进行比较而不是错误？所以事实证明，所有的代码都充满了这些不必要的检查。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-29T17:30:03.530

为了稍微扩展nansen的答案，您的代码相当于：

```
Character c = null;

char tmp = c.charValue();
if (tmp != 'P')
{
    c = Character.valueOf('G');
} 
```

这是根据JLS (和)[的第 15.21.1 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.21.1)：`==``!=`

> 如果相等运算符的操作数都是数字类型，或者一个是数字类型而另一个是可转换的（第 5.1.8 节）为数字类型，则对操作数执行二进制数字提升（第 5.6.2 节）。
> 
> 请注意，二进制数字提升执行值集转换（第 5.1.13 节）并可能执行拆箱转换（第 5.1.8 节）。

希望现在你会明白为什么你会得到一个`NullPointerException`. 你*需要* `c`是 type`Character`而不是`char`？如果你真的这样做，你应该使用：

```
if (c == null || c != 'P') 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-29T17:28:52.567

您正在使用自动装箱，为 null 的包装类型 Character 被隐式​​转换为原始字符。这就是 NPE 发生的时候。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T17:29:31.200

您正在尝试与原语进行比较和反对。Java 只能比较兼容类型的两个元素，因此它不会创建`Character`with的实例`'P'`，但会尝试将您的变量`c`转换为 a`char`并且不能这样做，因为它是`null`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-29T18:24:52.103

另一种解决方案是使用“ [Yoda Conditional](http://www.dodgycoder.net/2011/11/yoda-conditions-pokemon-exception.html) ”语法：

```
Character c = null;
if (!new Character('P').equals(c)) c = new Character('G'); 
```

这意味着 NullPointerException 永远不会被抛出，因为`null.equals()`它是无效的，而`new Character('P')`永远不会是 null。

# javascript - 如何在 Mootools 的 mouseenter 函数中管理多个元素？

> ID：12654814
> 
> 赞同：0
> 
> 时间：2012-09-29T17:27:11.760
> 
> 标签：javascript, mootools

**你好！**我真的试图在这里找到与我的问题相关的主题，但我没有运气......

一些简单的代码：我有两个 div，放在同一个位置 -

```
<div id="fader1" style="display:inline-block;position:absolute;background-image:url(images/fader1.png);opacity:1;width:296px;height:435px;margin:-215px 50px -20px"></div>
<div id="fader2" style="display:inline-block;position:absolute;background-image:url(images/fader2.png);opacity:0;width:296px;height:425px;margin:-215px 50px -20px"></div> 
```

**这个想法是**当鼠标经过div“fader1”时，不透明度变为0，而fader2的不透明度变为1。如果我将光标移出div，则像开始一样返回。

我试图用 mootools 来实现这一点，但我现在陷入了死胡同。

Mootools Demos 有这样的 Fx.Morph 示例：

```
$('myElement').set('opacity', 0.5).addEvents({
    mouseenter: function(){
        // This morphes the opacity and backgroundColor
        this.morph({
            'opacity': 0.6,
            'background-color': '#E79D35'
        });
    },
    mouseleave: function(){
        // Morphes back to the original style
        this.morph({
            opacity: 0.5,
            backgroundColor: color
        });
    }
}); 
```

如您所见，我只能管理一个元素（this.morph）。我尝试放置其他元素，例如：“（'fader1'）.morph”但没有结果......但我认为我做错了。

我非常感谢您在 mootools 中为我提供的任何帮助。问候！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T15:30:53.087

您应该阅读手册，而不是从示例中复制/粘贴。

```
$('myElement').set('opacity', 0.5).addEvents({
    mouseenter: function(){
        // This morphes the opacity and backgroundColor
        this.morph({
            'opacity': 0.6,
            'background-color': '#E79D35'
        });
    }
}); 
```

在上述函数中，作用域`this`指的是 myElement。如果您需要引用不同的元素，那么只需这样做。

```
(function(){
var other = $('myOtherElement').set('moprh', {
    link: 'cancel'
}); // save a reference and set link to cancel existing morphing

$('myElement').set('opacity', 0.5).addEvents({
    mouseenter: function(){
        // This morphes the opacity and backgroundColor
        other.morph({
            'opacity': 0.6,
            'background-color': '#E79D35'
        });
    },
    mouseleave: function(){
        // Morphes back to the original style
        other.morph({
            opacity: 0.5,
            backgroundColor: color
        });
    }
});
}()); 
```

阅读 $ (documentid) 返回的内容（一个元素），将一个元素保存到一个变量中并稍后引用它 - 这是标准的 javascript。

# c# - asp.net 中的用户配置文件

> ID：12654817
> 
> 赞同：1
> 
> 时间：2012-09-29T17:27:43.740
> 
> 标签：c#, asp.net, asp.net-profiles

我有一个 asp.net 项目，我正在尝试开发用户配置文件部分，以便用户可以使用自己的配置文件（包含管理员和用户的配置文件）登录。

当用户登录然后让用户浏览网站时，可以在用户计算机上设置cookie吗？我的意思是在我检查用户名和密码之后，通过检查每个页面上的这个 cookie，我让用户浏览页面或重定向到登录页面。

这条路好吗？
这可以安全使用吗？
有没有更好的方法呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T17:47:52.620

您可以使用 SqlProfileProvider。添加配置文件属性可以通过向您的 web.confing 添加一些代码来完成（在 system.web 部分，sqlprofile 结构的数据库必须存在）：

```
<profile defaultProvider="SqlProvider">
  <providers>
    <clear/>
    <add name="SqlProvider" type="System.Web.Profile.SqlProfileProvider" connectionStringName="ASPNETDB" applicationName="MyApplication" description="SqlProfileProvider"/>
  </providers>
  <properties>
    <add name="LanguageId" allowAnonymous="false" type="System.Int32"/>
    <add name="Company" allowAnonymous="false" type="System.String"/>
  </properties>
</profile> 
```

在此示例中，我添加了两个配置文件属性 languageId 和 Company。您可以使用以下代码访问此属性：

```
ProfileBase profile = ProfileBase.Create("SomeUserName");
string company = (string)profile["Company"]; 
```

有关 SqlProfileProvider 的更多信息，请访问以下链接：

[http://msdn.microsoft.com/en-us/library/system.web.profile.sqlprofileprovider.aspx](http://msdn.microsoft.com/en-us/library/system.web.profile.sqlprofileprovider.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T19:54:29.133

我已经写了几个关于从头开始创建配置文件的操作方法答案：

*   对于网站（根据 Web.config 设置为您自动生成配置文件对象）。

    *   [如何坚持匿名用户选择（例如：主题选择）](https://stackoverflow.com/q/11706349/1268570)
*   对于 Web 应用程序（如 MVC，您需要指定类继承`ProfileBase`）

    *   [在 MVC Web 应用程序中访问 profile.newproperty](https://stackoverflow.com/q/11706950/1268570)

# multithreading - 线程和进程的堆栈大小差异

> ID：12654818
> 
> 赞同：1
> 
> 时间：2012-09-29T17:27:51.213
> 
> 标签：multithreading, process, operating-system

我最近在 Java 中观察到（在实现深度递归函数调用时），线程的堆栈大小大于进程。我的意思是，例如，线程可以执行大约 30,000 次递归调用，而没有线程的程序只能对同一函数进行 10,000 次递归调用。

任何人都可以建议为什么会这样？

为了更好地理解和上下文，请尝试按原样运行 Java 代码并查看控制台上的消息打印输出......

```
package com.java.concept;

/**
 * This provides a mechanism to increase the call stack size, by starting the thread in the caller we can increase it
 * Result were 3 times higher
 */
public class DeepRecursionCallStack {
    private static int level = 0;

    public static long fact(int n) {
        level++;
        return n < 2 ? n : n * fact(n - 1);
    }

    public static void main(String[] args) throws InterruptedException {
        Thread t = new Thread(null, null, "DeepRecursionCallStack", 1000000) {
            @Override
            public void run() {
                try {
                    level = 0;
                    System.out.println(fact(1 << 15));
                } catch (StackOverflowError e) {
                    System.err.println("New thread : true recursion level was " + level);
                    System.err.println("New thread : reported recursion level was "
                            + e.getStackTrace().length);
                }
            }

        };
        t.start();
        t.join();

        try {
            level = 0;
            System.out.println(fact(1 << 15));
        } catch (StackOverflowError e) {
            System.err.println("Main code : true recursion level was " + level);
            System.err.println("Main code : reported recursion level was "
                    + e.getStackTrace().length);
        }
    }

} 
```

# linux - 用 find 重命名

> ID：12654819
> 
> 赞同：0
> 
> 时间：2012-09-29T17:28:02.620
> 
> 标签：linux, shell

我设法用 find 命令找到了几个文件。这些文件的类型为**file_sakfksanf.txt、file_afsjnanfs.pdf、file_afsnjnjans.cpp，** 现在我想使用 rename 和 -exec 命令将它们重命名为 **mywish_sakfksanf.txt、mywish_afsjnanfs.pdf、mywish_afsnjnjans.cpp** ，仅更改第一个前缀. 我正在尝试一段时间，所以不要怪我愚蠢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-29T18:07:37.470

如果您通读页面`-exec`部分，您将遇到允许您在. 这将允许您通过以下方式在比赛中使用：`man``find``{}``-exec``rename``find`

```
find . -name 'file_*' -exec rename 's/file_/mywish_/' {} \; 
```

从手册：

> -执行**命令**；
> 
> 执行命令；如果返回 0 状态，则为 true。所有以下要查找的参数都被视为命令的参数，直到由`;' is encountered. The string`{}' 组成的参数被当前文件名替换，该文件名出现在命令的参数中，而不仅仅是在单独的参数中，如在某些版本的 find 中。这两种结构都可能需要转义（使用 `\'）或引用以保护它们不被 shell 扩展。有关使用 -exec 选项的示例，请参见示例部分。指定的命令对每个匹配的文件运行一次。该命令在起始目录中执行。使用 -exec 操作存在不可避免的安全问题；您应该改用 -execdir 选项。

尽管您要求查找/执行解决方案，正如[Mark Reed](https://stackoverflow.com/users/797049/mark-reed)所建议的那样，您可能需要考虑将您的结果通过管道传输到`xargs`. 如果这样做，请确保使用`-print0`选项 with`find`和`-0`or`-null`选项，`xargs`以避免文件名中出现空格或 shell 元字符导致的意外行为。另外，考虑使用（也在手册中）的`+`版本，因为这是 POSIX 规范，因此如果您想在其他地方运行命令（并非**总是**如此），应该更便携；它还以类似于应该减少调用.`-exec``find`**`xargs``rename`**

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T17:37:58.707

不要以为只要找到就可以做到这一点，您需要创建一个脚本：

```
#!/bin/bash
NEW=`echo $1 | sed -e 's/file_/mywish_/'`
mv $1 ${NEW} 
```

那么你就可以：

```
find ./ -name 'file_*' -exec my_script {} \; 
```**

# android - 是否可以检查通知是否可见或已取消？

> ID：12654820
> 
> 赞同：53
> 
> 时间：2012-09-29T17:28:14.040
> 
> 标签：android, notifications

我想更新通知数据，但我发现的唯一方法是启动一个具有相同 ID 的新通知数据。

问题是，如果原件已被取消，我不想提出一个新的。有没有办法判断通知是否可见或已取消？还是一种仅在通知存在时才更新通知的方法？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2016-09-04T10:02:53.097

如果您的应用程序至少`API >= 23`可以使用此方法获取[活动通知](https://developer.android.com/reference/android/app/NotificationManager#getActiveNotifications())：

```
NotificationManager mNotificationManager = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
StatusBarNotification[] notifications = mNotificationManager.getActiveNotifications();
for (StatusBarNotification notification : notifications) {
  if (notification.getId() == 100) {
    // Do something.
  }
} 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-09-30T10:12:53.637

这就是我解决它的方法：

```
 private boolean isNotificationVisible() {
    Intent notificationIntent = new Intent(context, MainActivity.class);
    PendingIntent test = PendingIntent.getActivity(context, MY_ID, notificationIntent, PendingIntent.FLAG_NO_CREATE);
    return test != null;
} 
```

这就是我生成通知的方式：

```
 /**
 * Issues a notification to inform the user that server has sent a message.
 */
private void generateNotification(String text) {

    int icon = R.drawable.notifiaction_icon;
    long when = System.currentTimeMillis();
    NotificationManager notificationManager = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);
    Notification notification = new Notification(icon, text, when);
    String title = context.getString(R.string.app_name);
    Intent notificationIntent = new Intent(context, MainActivity.class);

    // set intent so it does not start a new activity
    //notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP);
    PendingIntent intent = PendingIntent.getActivity(context, MY_ID, notificationIntent, 0);
    notification.setLatestEventInfo(context, title, text, intent);

    notification.flags |= Notification.FLAG_AUTO_CANCEL; //PendingIntent.FLAG_ONE_SHOT

    notificationManager.notify(MY_ID, notification);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-29T17:46:43.280

我认为您可以使用类的[deleteIntent](http://developer.android.com/reference/android/app/Notification.html#deleteIntent)`Notification`。

我记得在我的一个应用程序中，当通知被取消或通知托盘被清除时，我使用它来触发广播（自定义广播）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-26T20:44:08.023

`deleteIntent`以下是在我自己的应用程序中证明是有益的替代方案：

[基本上，您使用启动IntentService](http://developer.android.com/reference/android/app/IntentService.html)（或任何其他服务）的通知创建一个意图，并且`onHandleIntent`您可以设置一个标志来指示通知是否处于活动状态。
您可以将此意图设置为在用户点击通知 ( [contentIntent](http://developer.android.com/reference/android/app/Notification.html#contentIntent) ) 和/或当用户从列表中清除它时 ( [deleteIntent](http://developer.android.com/reference/android/app/Notification.html#deleteIntent) ) 时触发。

为了说明这一点，这是我在自己的应用程序中所做的。在构建我设置的通知时

```
Intent intent = new Intent(this, CleanupIntentService.class);
Notification n = NotificationCompat.Builder(context).setContentIntent(
        PendingIntent.getActivity(this, 0, intent, 0)).build(); 
```

当通知被点击时，我`CleanupIntentService`的启动，设置一个标志（在创建通知的服务中）：

```
@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    super.onCreate(); // If removed, onHandleIntent is not called
    return super.onStartCommand(intent, flags, startId);
}

@Override
protected void onHandleIntent(Intent intent) {
    OtherService.setNotificationFlag(false);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-02-10T19:04:47.753

在我的情况下，我想在显示另一个通知之前检查一个通知是否已经显示。事实证明，有一种简单的方法可以做到这一点，而无需听取通知何时被删除或关闭`.setAutoCancel(true)`on `NotificationManagerCompat.Builder`。

```
 private val NOTIF_ID = 80085
 private val CHANNEL_ID = "com.package.name.ClassName.WhatNotifycationDoes"  
 private lateinit var mNotificationManagerCompat: NotificationManagerCompat
 private lateinit var mNotificationManager: NotificationManager // this is for creating Notification Channel in newer APIs

override fun onCreate() {
    super.onCreate()

    mNotificationManagerCompat = NotificationManagerCompat.from(this)

    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O)
       mNotificationManager = getSystemService(NotificationManager::class.java)

    showNotification()
    startWatching()
}

private fun showNotification() {
        val contentIntent = Intent(this, MainActivity::class.java)
                .apply { flags = Intent.FLAG_ACTIVITY_NEW_TASK or Intent.FLAG_ACTIVITY_CLEAR_TASK }
        val contentPendingIntent = PendingIntent.getActivity(this, 1, contentIntent, 0)

    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {
        val name = getString(R.string.app_name)
        val importance = NotificationManager.IMPORTANCE_HIGH
        val channel = NotificationChannel(CHANNEL_ID, name, importance)
        channel.description = getString(R.string.your_custom_description)
        mNotificationManager.createNotificationChannel(channel)
    }

    val mNewStatusNotificationBuilder = NotificationCompat.from(this)
    mNewStatusNotificationBuilder = NotificationCompat.Builder(this, CHANNEL_ID)
            .setContentTitle(getString(R.string.app_name))
            .setContentText(getString(R.string.simple_text))
            .setPriority(NotificationCompat.PRIORITY_DEFAULT)
            .setContentIntent(contentPendingIntent)
            .setAutoCancel(true) // This dismisses the Notification when it is clicked
            .setOnlyAlertOnce(true) //this is very important, it pops up the notification only once. Subsequent notify updates are muted. unless it is loaded again    

    if (Build.VERSION.SDK_INT > Build.VERSION_CODES.LOLLIPOP)
        mNewStatusNotificationBuilder.setSmallIcon(R.drawable.ic_notification)

    notification = mNewStatusNotificationBuilder.build()

    mNotificationManagerCompat.notify(NOTIF_ID, notification)
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-08-09T10:08:02.587

您可以在 Kotlin 中进行如下检查：

```
 val mNotificationManager: NotificationManager = getSystemService(Context.NOTIFICATION_SERVICE) as NotificationManager
    val notifications: Array<StatusBarNotification> = mNotificationManager.activeNotifications

    if(notifications.isNotEmpty())
    {
      //you don't have notifications 
    }
    else
    {
      //you have notifications 
    } 
```

# android - 使用opengl在android中的listview中呈现每个项目

> ID：12654821
> 
> 赞同：4
> 
> 时间：2012-09-29T17:28:31.980
> 
> 标签：android, listview, opengl-es, android-listview

我正在尝试为列表视图中的每个项目找到一种基于 opengl 的 3d 动画的方法。我知道从 ICS 开始，可以使用 TextureView 来渲染 opengl 场景。Romain Guy 在[这个线程](https://groups.google.com/forum/#!msg/android-developers/U5RXFGpAHPE/bCRbfJ)中的回答详细解释了如何做到这一点。

但是，如果 TextureView 是 ListView 的一部分，我无法弄清楚这将如何工作？（有没有其他方法可以在列表视图中执行 opengl 基础渲染？）

我能想到的方法有两种。

1.  为列表视图中的每个纹理视图创建一个 opengl 上下文，该上下文将渲染到该纹理视图的表面。（拥有大量 gl 上下文似乎非常不雅，而且我认为限制取决于硬件）

2.  创建一个 opengl 上下文并在多个表面共享它。并对不同的表面进行顺序绘图调用。（不知道如何做到这一点，listview 管理显示和隐藏的内容，这使事情进一步复杂化）

所以我的问题是......有没有办法在 ListView 中进行基于 opengl 的渲染？如果是这样怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-01T20:36:53.440

ListView 进行内部回收。因此，不会有太多的 View 对象：通常两个或三个以上同时可见。

# asp.net - 用于调度的免费 ASP.net 工具

> ID：12654822
> 
> 赞同：1
> 
> 时间：2012-09-29T17:28:42.187
> 
> 标签：asp.net, scheduling

我需要在 ASP 中安排任务的免费工具。网络 C#。

我试过用 ASP。Net Calendar 控件，但是处理各个方面的需求不太灵活。说基于用户的日历事件，基于一些外部类型等。在使用日历控件进行实验之前，我可能需要学习某种 AJAX。

在此之前，有没有可用的免费工具？所以我可以通过很少的修改或配置直接插入它？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-29T17:36:38.190

使用[DayPilot 精简版](http://www.daypilot.org/daypilot-lite.html)。**DayPilot Lite**是 DayPilot 的开源版本。它正在帮助成千上万的用户构建日历、个人日程安排和资源预订应用程序。

# objective-c - 如何在 uint64_t 上存储结构信息以应对 Game Center 挑战

> ID：12654824
> 
> 赞同：0
> 
> 时间：2012-09-29T17:29:06.803
> 
> 标签：objective-c, ios, game-center

我正在尝试在 GKScore 的 uint64_t 上下文属性上存储一些游戏相关信息 - 以通过新的游戏中心挑战创造更好的游戏体验。但是，我没有做对。我构建了一个如下结构：

```
typedef struct{
    unsigned int gameMode;
    unsigned int destroyed;
    unsigned int duration;
} GameInfo; 
```

我尝试以下方法：

```
uint64_t myContext

GameInfo info;
info.gameMode = 2;
info.destroyed = 50;
info.duration = 100;

NSData *data = [NSData dataWithBytes:&info length:sizeof(info)];
[data getBytes:&myContext length:sizeof(myContext)]; 
```

将结构打包到 NSData，然后将字节写入 myContext。

然后，我尝试使用 64 位整数重新创建信息，如下所示：

```
NSData *newData = [NSData dataWithBytes:&myContext length:sizeof(myContext)];

GameInfo *result = (GameInfo*) [newData bytes]; 
```

但是，当我注销这些值时，我发现我只能捕获前两个值（gameMode 和destroy）。如果我向结构中添加更多变量，我仍然只捕获前 2 个变量。

我究竟做错了什么？有没有更聪明的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T17:43:07.467

您正在尝试将 96 位数据（`unsigned int`iOS / ARM 上为 3 秒）打包到 64 位容器中。所以你看到的是前两个 32 位值，而不是第三个。

也许您可以尝试使用`short`s 或`char`s，具体取决于您的结构将保留的值的范围，并尝试将结构的大小降低到 < 64 位。我认为`char`ARM 上的 3 将对齐到 48 位（如果是这样，可能是错误的，请告诉我！）。所以`short`无论如何都可以使用。

编辑：更改结构的可能方法示例，假设您仅在每个字段中存储 16 位值：

```
typedef struct{
    uint16_t gameMode;
    uint16_t destroyed;
    uint16_t duration;
} GameInfo; 
```

# php - Amazon S3 避免覆盖同名对象

> ID：12654828
> 
> 赞同：19
> 
> 时间：2012-09-29T17:29:31.543
> 
> 标签：php, file, file-upload, amazon-s3, amazon-web-services

如果我将文件上传到 S3，其文件名与存储桶中对象的文件名相同，它会覆盖它。有哪些选项可以避免覆盖具有相同文件名的文件？我在我的存储桶中启用了版本控制，认为它可以解决问题，但对象仍然被覆盖。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-30T08:53:35.700

我上面的评论不起作用。我认为`WRITE`ACL 也适用于对象，但它只适用于存储桶。

由于您启用了版本控制，因此您的对象不会被覆盖。但如果您未在 GET 请求或 URL 中指定版本，则将采用最新版本。这意味着当您将对象放入 S3 时，您需要保存响应告诉您的 versionID，以便检索第一个对象。

有关更多信息，请参阅[Amazon S3 ACL 以了解只读和一次写入访问](https://stackoverflow.com/questions/10592541/amazon-s3-acl-for-read-only-and-write-once-access)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-05T06:53:36.797

您还可以配置具有有限权限的 IAM 用户。写入仍然是写入（即更新），但无论如何使用 IAM 用户是最佳实践。

所有者（即您的“长期访问密钥和秘密密钥”）始终拥有完全控制权，除非您完全不打算禁用它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-04-12T10:51:53.903

如果您使用数据库将每个文件的密钥存储在 s3 存储桶上，这是我的建议。

生成随机密钥。尝试在具有允许空条目的唯一约束的字段中插入/更新您的数据库的键。如果失败，则密钥已被使用，重复此操作，直到获得唯一密钥。

然后使用您知道是唯一的密钥将您的文件放在 s3 上。

# php - PHP - 由 session_start() 引起的标头已经发送；？

> ID：12654831
> 
> 赞同：3
> 
> 时间：2012-09-29T17:29:35.130
> 
> 标签：php, header

> **可能重复：**
> [PHP 已发送的标头](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)

编辑** 我现在已经修复了已经发送到第 53 行的标题，即。我的 common.php 中的最后一行启动了会话，导致标头已经发送。那么现在我应该把 session_start 放在哪里呢？

我的 index.php -

```
<?php 
require("common.php"); 
if(empty($_SESSION['user'])) 
{ 
    header("Location: login.php"); 
    die("Redirecting to login.php"); 
}   
?> 
<!DOCTYPE html>

<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
 <!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
<meta charset="utf-8" />

<!-- Set the viewport width to device width for mobile -->
<meta name="viewport" content="width=device-width" />

 <title>nCMS | Simplicity, Reimagined.</title>

 <!-- Included CSS Files (Uncompressed) -->
 <!--
 <link rel="stylesheet" href="stylesheets/foundation.css">
 -->

<!-- Included CSS Files (Compressed) -->
<link rel="stylesheet" href="stylesheets/foundation.min.css">
<link rel="stylesheet" href="stylesheets/app.css">

<script src="javascripts/modernizr.foundation.js"></script>

<!-- IE Fix for HTML5 Tags -->
<!--[if lt IE 9]>
  <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
 </head>
<body>
<!--INCLUDE HEADER -->

<?PHP include('header.php'); ?>

<!--/INCLUDE HEADER -->

<!--INCLUDE PAGE -->
<div class="row">
Hello <?php echo htmlentities($_SESSION['user']['username'], ENT_QUOTES, 'UTF-8'); ?>,     secret content!<br /> 

<h3>Hi, I'm Index!</h3>

</div>
 <!--/INCLUDE PAGE-->

  <!--INCLUDE FOOTER-->

<?PHP include('footer.php'); ?>

<!--/INCLUDE FOOTER-->
<!-- Included JS Files (Compressed) -->
<script src="javascripts/jquery.js"></script>
<script src="javascripts/foundation.min.js"></script>

<!-- Initialize JS Plugins -->
<script src="javascripts/app.js"></script>
</body>
</html> 
```

这是实时页面 - [http://www.cogameservers.com/ncms](http://www.cogameservers.com/ncms)

感谢您的帮助 - 死灵

* * *

common.php -

```
<?php 

$username = ""; 
$password = ""; 
$host = ""; 
$dbname = ""; 

$options = array(PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES utf8'); 

try 
{ 

    $db = new PDO("mysql:host={$host};dbname={$dbname};charset=utf8", $username, $password, $options); 
} 
catch(PDOException $ex) 
{ 

    die("Failed to connect to the database: " . $ex->getMessage()); 
} 

$db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); 

$db->setAttribute(PDO::ATTR_DEFAULT_FETCH_MODE, PDO::FETCH_ASSOC); 

if(function_exists('get_magic_quotes_gpc') && get_magic_quotes_gpc()) 
{ 
    function undo_magic_quotes_gpc(&$array) 
    { 
        foreach($array as &$value) 
        { 
            if(is_array($value)) 
            { 
                undo_magic_quotes_gpc($value); 
            } 
            else 
            { 
                $value = stripslashes($value); 
            } 
        } 
    } 

    undo_magic_quotes_gpc($_POST); 
    undo_magic_quotes_gpc($_GET); 
    undo_magic_quotes_gpc($_COOKIE); 
} 

header('Content-Type: text/html; charset=utf-8'); 

session_start(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T18:19:50.320

我知道您从我的评论中解决了您的问题。但这是答案。

正如您所问的，您将 session_start 放在哪里以删除已发送的标头错误。

作为一般做法，将 session_start() 放在 php 文件的开头。还需要清除以前的缓冲区。

```
ob_start(); // this will clear output buffer
session_start(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-29T17:35:21.407

看来错误是由`header("Location: login.php");`- 错误说`common.php`已经在第 77 行发送标头。只要发送标头，它将继续这样做`common.php`。

`Warning: Cannot modify header information - headers already sent by (output started at /home/megatron/public_html/ncms/index.php:9) in /home/megatron/public_html/ncms/common.php on line 77`

在不知道该文件的内容的情况下，我无法帮助您。我建议只查看该文件以查找发送一些标头的内容，看看是否有必要或以不同的方式解决此问题。

# java - 如何确定如下所示的大 O：(x -1) + (x - 2) + (x - 3) ... (x - x)

> ID：12654834
> 
> 赞同：0
> 
> 时间：2012-09-29T17:29:54.837
> 
> 标签：java, performance

我正在努力复习我的大计算。如果我有将所有项目移动到 'i' 2 个空格右侧的函数，我有一个看起来像这样的公式：

```
(n -1) + (n - 2) + (n - 3) ... (n - n) 
```

第一次迭代我必须移动（x-1）个项目，第二个（x-2）个项目，依此类推......方法：

```
int[] s = {1,2,3,4, , }

public static char[] moveStringDownTwoSpaces(char[] s){
    for(int j = 0; j < s.length; j++){

    for(int i = s.length-3; i > j; i--){
        s[i+2] = s[i];
    }
    return s;
    }
} 
```

我知道这是 O(n^2)，但我不太了解转换它背后的数学：

```
(n -1) + (n - 2) + (n - 3) ... (n - n) 
```

进入这个

```
O(n^2) 
```

在我看来，如果 n = 5（字符串长度为 5），我会......

```
(5-1) + (5-2) + (5-3) + (5-4) + (5-5) = 5(5 - ???) 
```

这是

```
(n-1) + (n-2) + (n-3) + (n-4) + (n-5) = n(n - ???) 
```

所以这给了我 5*5 = 25，即 n^2。但什么是？？？我不知道该为公式中的变量添加什么。我什至不知道我是否会以正确的方式进行。又名我忘了怎么做数学:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T17:37:28.783

```
(n -1) + (n - 2) + (n - 3) ... (n - n) 
```

只需将以下内容改写为：

```
1 + 2 + 3 + ....+ (n-1) 
```

这等于：`(n(n+1)/2 - n)`。

现在你可以看到它是`O(n^2)`。

正如@hvd 所指出的，您可能希望将`return`语句放在循环之外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T17:42:18.920

Big-O 表示法不是确切的上限。这是一个渐近上界。在许多情况下，算法可能看起来像 O(n^2)，但摊销分析可能显示线性阶复杂度。

# c# - 访问不存在的缩略图

> ID：12654835
> 
> 赞同：13
> 
> 时间：2012-09-29T17:30:02.080
> 
> 标签：c#, thumbnails, windows-shell, windows-api-code-pack

我制作了一个应用程序，向您显示计算机中的文件列表。每当您单击列表中的任何项目时，它旁边的一个小图片框应显示相应文件的缩略图。我在 Windows 7 上使用 C#。

为了获得缩略图，我重复了在另一个问题中发布的方法。首先，我参考了 Windows API 代码包。然后，我使用以下代码：

```
ShellFile shellFile = ShellFile.FromFilePath(fullPathToFile);
myPictureBox.Image = shellFile.Thumbnail.LargeBitmap; 
```

这并不总是有效。有时，显示的缩略图仅仅是“默认应用程序”图标。我发现只有当 Windows 先前为该文件生成缩略图并将其存储在缩略图缓存中时，才会显示真正的缩略图。这意味着我必须手动打开一个文件夹，等待 Windows 为每个文件生成缩略图，然后我的应用程序才能看到这些缩略图。

我的程序如何强制 Windows 7 在使用它们之前生成真正的缩略图？

**更新（由 Li0liQ 提供）**

可以通过添加 FormatOption 来强制检索缩略图：

```
ShellFile shellFile = ShellFile.FromFilePath(fullPathToFile);
shellFile.Thumbnail.FormatOption = ShellThumbnailFormatOption.ThumbnailOnly;
myPictureBox.Image = shellFile.Thumbnail.LargeBitmap; 
```

但是，如果缩略图尚不存在，我会遇到异常：

> 当前 ShellObject 没有有效的缩略图处理程序，或者在提取此特定外壳对象的缩略图时出现问题。---> System.Runtime.InteropServices.COMException：类未注册（来自 HRESULT 的异常：0x80040154 (REGDB_E_CLASSNOTREG)）

请参阅[如何在 Windows 资源管理器中刷新文件的缩略图？](https://stackoverflow.com/questions/3555799/how-do-i-refresh-a-files-thumbnail-in-windows-explorer)潜在线索的问题和代码[片段](http://pastebin.com/7VnfiKX6)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-20T07:44:24.000

这是一段提取缩略图位图的代码（仅使用 Windows Vista 或更高版本）。它基于酷炫的[IShellItemImageFactory 接口](http://msdn.microsoft.com/en-us/library/windows/desktop/bb761084.aspx)：

```
 static void Main(string[] args)
    {
        // you can use any type of file supported by your windows installation.
        string path = @"c:\temp\whatever.pdf";
        using (Bitmap bmp = ExtractThumbnail(path, new Size(1024, 1024), SIIGBF.SIIGBF_RESIZETOFIT))
        {
            bmp.Save("whatever.png", ImageFormat.Png);
        }
    }

    public static Bitmap ExtractThumbnail(string filePath, Size size, SIIGBF flags)
    {
        if (filePath == null)
            throw new ArgumentNullException("filePath");

        // TODO: you might want to cache the factory for different types of files
        // as this simple call may trigger some heavy-load underground operations
        IShellItemImageFactory factory;
        int hr = SHCreateItemFromParsingName(filePath, IntPtr.Zero, typeof(IShellItemImageFactory).GUID, out factory);
        if (hr != 0)
            throw new Win32Exception(hr);

        IntPtr bmp;
        hr = factory.GetImage(size, flags, out bmp);
        if (hr != 0)
            throw new Win32Exception(hr);

        return Bitmap.FromHbitmap(bmp);
    }

    [Flags]
    public enum SIIGBF
    {
        SIIGBF_RESIZETOFIT = 0x00000000,
        SIIGBF_BIGGERSIZEOK = 0x00000001,
        SIIGBF_MEMORYONLY = 0x00000002,
        SIIGBF_ICONONLY = 0x00000004,
        SIIGBF_THUMBNAILONLY = 0x00000008,
        SIIGBF_INCACHEONLY = 0x00000010,
        SIIGBF_CROPTOSQUARE = 0x00000020,
        SIIGBF_WIDETHUMBNAILS = 0x00000040,
        SIIGBF_ICONBACKGROUND = 0x00000080,
        SIIGBF_SCALEUP = 0x00000100,
    }

    [DllImport("shell32.dll", CharSet = CharSet.Unicode)]
    private static extern int SHCreateItemFromParsingName(string path, IntPtr pbc, [MarshalAs(UnmanagedType.LPStruct)] Guid riid, out IShellItemImageFactory factory);

    [ComImport]
    [InterfaceType(ComInterfaceType.InterfaceIsIUnknown)]
    [Guid("bcc18b79-ba16-442f-80c4-8a59c30c463b")]
    private interface IShellItemImageFactory
    {
        [PreserveSig]
        int GetImage(Size size, SIIGBF flags, out IntPtr phbm);
    } 
```

补充说明：

*   该`GetImage`方法有各种有趣的标志 ( `SIIGBF`) 你可以玩。
*   出于性能原因，您可以缓存工厂。例如，.PDF 文件需要在后台加载整个 Adob​​e Reader .exe。
*   与 shell（Windows 资源管理器）对话时，您要确保您的进程在与 shell 相同的**UAC 级别上**运行，否则出于安全原因，某些操作将失败。例如，如果您在 Visual Studio 中从 F5 或 CTRL+F5 运行您的进程，并且您的 Visual Studio 以管理员身份运行，您的进程可能无法检索缩略图，但在双击 .exe 运行时它将起作用来自探险家。这`REGDB_E_CLASSNOTREG`是您在这些情况下可能遇到的典型错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-19T17:13:22.993

**我的程序如何强制 Windows 7 在使用它们之前生成真正的缩略图？**

来自 Shell 接口：[**IThumbnailCache 接口**](http://msdn.microsoft.com/en-us/library/bb774628%28v=vs.85%29.aspx)（强调我的）

> 缩略图缓存 API 旨在为应用程序提供一种统一的方法来检索和缓存缩略图。在 Windows XP 中，缩略图缓存是基于每个文件夹完成的，并且缓存保存在每个文件夹内的 Thumbs.db 文件中。虽然这种方法提供了空间局部性，但它不支持跨文件夹的预览和查询。Windows Vista 中的缩略图缓存通过提供全局缓存解决了这个缺点。
> 
> ***要缓存缩略图，应用程序必须首先获取一个 IShellItem，它表示将为其获取缩略图的项目，然后将 IShellItem 传递给对 IThumbnailCache::GetThumbnail 的调用。***如果 IThumbnailCache::GetThumbnail 的标志参数包含标志 WTS_EXTRACT，并且缩略图尚未缓存，则将提取缩略图并将其放置在缓存中。如果设置了 WTS_FORCEEXTRACTION 标志，则忽略缓存并始终提取新的缩略图。有关传递给 IThumbnailCache::GetThumbnail 的标志的更多详细信息，请参阅 IThumbnailCache::GetThumbnail 主题。
> 
> ***如果缓存中没有缩略图，它将使用操作系统上注册的 IExtractImage 或 IThumbnailProvider 的现有实现从源文件中自动提取***。您的应用程序不必提供缩略图提取器的实现。

因此，假设您的系统具有与 PDF 一起使用的 IThumbnail 提供程序的实现：

1.  为您的 PDF 获取一个外壳项目。
2.  获取对 shell 的缩略图缓存的引用。让我们称之为`thumbNailCache`。
3.  打电话。文档说这将为您创建缩略图并在 out 参数 thumbNailBitmap 中返回它。[`thumbNailCache.GetThumbnail`](http://msdn.microsoft.com/en-us/library/bb774624%28v=vs.85%29.aspx)`(shellItem, thumbNailpx,` [`wtxFlagSet`](http://msdn.microsoft.com/en-us/library/hh707152%28v=vs.85%29.aspx)`, out thumbNailBitmap);`

警告：我不知道您的代码包是否完全公开了 IThumbnailCache，但如果确实如此，这看起来很简单。如果不是，则必须从 shell32.dll 导入它。

还有一个[IThumbnailProvider](http://msdn.microsoft.com/en-us/library/bb774614%28v=vs.85%29.aspx)接口可能对您有用，但请阅读社区评论。它似乎脆弱且难以使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-19T16:05:25.007

经过一番搜索，我[在 Sharepoint 中找到了 Microsoft Office Thumbnails](http://msdn.microsoft.com/en-us/library/aa289172%28VS.71%29.aspx)。它可能仅适用于办公文档，但可能是您想要的。将需要一些翻译，因为示例在 C++ 和 VB.Net 中。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-12-19T15:57:51.240

据我所知，您不能强制 Windows 7 生成缩略图。但是，您可以自己使用代码创建它：

```
Image image = Image.FromFile(fileName);
Image thumbNail = image.GetThumbnailImage(120, 120, ()=>false, IntPtr.Zero);
thumbNail.Save(Path.ChangeExtension(fileName, "thumb")); 
```

[http://msdn.microsoft.com/en-us/library/system.drawing.image.getthumbnailimage.aspx](http://msdn.microsoft.com/en-us/library/system.drawing.image.getthumbnailimage.aspx)

# javascript - 用于构建桌面/操作系统风格的 Web 应用程序的优秀跨浏览器 JavaScript 库？

> ID：12654836
> 
> 赞同：0
> 
> 时间：2012-09-29T17:30:01.610
> 
> 标签：javascript, gwt, web-applications, desktop-application, vaadin

基本上我想创建一个浏览器表单（它将通过 iframe 加载外部页面。但 iframe 周围是类似于桌面操作系统实际浏览器的东西。完整的图标、地址栏、文件菜单。例如 IE6 主题浏览器组件内浏览器。也应该非常敏感，几乎就像他们在使用 Flash 应用程序一样。

像 GWT，Vaadin 之类的东西。

如果有一些 Windows GUI 工具包可以通过拖放、双击它来添加事件和类似的东西来构建用户界面，那也是很棒的。

试图构建类似[http://www.lfsworld.net/](http://www.lfsworld.net/)的东西。单击以访客身份登录，然后在浏览器中查看桌面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T12:22:45.117

如果你想实现拖放，为什么不检查[gwt-dnd](http://code.google.com/p/gwt-dnd/)？您可以添加双击、拖放处理程序。这个库有很好的文档记录，并且有很多演示可供使用。

# php - FOSRestBundle 无法获取参数提取器

> ID：12654838
> 
> 赞同：2
> 
> 时间：2012-09-29T17:30:06.167
> 
> 标签：php, rest, symfony, fosrestbundle

我正在尝试让我的控制器与 param fetcher 一起工作。我做了文档中指定的所有说明。所以我有：配置fos_rest.yml：

```
fos_rest:
  param_fetcher_listener: 'force'
  view:
      formats:
          json: true
          xml: false
          rss: false
      mime_types:
          json: ['application/json', 'application/x-json', 'application/vnd.example-com.foo+json']
          png: 'image/png'
      failed_validation: HTTP_BAD_REQUEST
      default_engine: twig
      view_response_listener: 'force'
  format_listener:
      default_priorities:
          - json
  routing_loader:
      default_format: json 
```

sensio_framework_extra：视图：{注解：假}路由器：{注解：真}

还有我的控制器

```
<?php

namespace Push\PointsBundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Nelmio\ApiDocBundle\Annotation\ApiDoc;
use FOS\RestBundle\View\View;
use FOS\RestBundle\Controller\Annotations\QueryParam;
use FOS\RestBundle\Request\ParamFetcherInterface;
use FOS\RestBundle\Controller\Annotations\RequestParam;
use FOS\RestBundle\Request\ParamFetcher;

class RestController extends Controller
{
    /**
     * @QueryParam(name="latitude", requirements="[0-9.]+", default="0", description="")
     * @ApiDoc()
     */
    public function checkPointsAction(ParamFetcher $params)
    {
        $view = new View();
        return $this->get('fos_rest.view_handler')->handle($view);
    }
} 
```

当我调用方法时，我得到：

> 控制器 "Push\PointsBundle\Controller\RestController::checkPointsAction()" 要求您为 "$params" 参数提供一个值（因为没有默认值或因为在此参数之后有一个非可选参数）。

我做错了什么或错过了什么？谢谢你。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-29T17:48:38.553

我经常遇到 FOSRestBundle 和过时缓存的问题。如果我更改注释，它有时根本不会刷新。首先，尝试删除 app/cache 目录的内容 (rm -rf app/cache/*)。

我没有检查参数是否通过类型或名称映射到方法参数。如果它晚于你的参数应该被调用`$paramFetcher`（不是`$params`）：

```
public function checkPointsAction(ParamFetcher $paramFetcher) { } 
```

编辑：您是否启用了参数获取器侦听器？

```
fos_rest:
    param_fetcher_listener: true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T10:45:50.940

正如评论中指出的那样，我遇到了同样的问题。我通过更改变量名称解决了这个问题

```
 public function addMapAction(ParamFetcher $pf) { 
```

到

```
 public function addMapAction(ParamFetcher $paramFetcher) { 
```

突然间，我像一个魅力一样工作，显然 $paramFetcher 是必需的。

# c# - 需要对 VS 2010 winform 组件的建议

> ID：12654839
> 
> 赞同：0
> 
> 时间：2012-09-29T17:30:12.137
> 
> 标签：c#, visual-studio-2010, components

我的目标是创建一个 C# winform 应用程序，它具有圆形面板、圆形按钮和更多类似网页设计的组件，例如：

![](../Images/287fc3081d84afd845ef406f07d7be12.png)

我已经有了 Component One Studio .Net 2010 v3，但我在那里找不到任何东西。有什么建议吗？开源/商业是可以的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T17:39:26.753

我已经使用[3D Control Magic](http://www.multimediasoft.com/3dcm/)来实现您在 Winforms 中想要的控件。

![在此处输入图像描述](../Images/5c4fa4561180b7432349933f7f2dad16.png)

![在此处输入图像描述](../Images/0b8726b1a64a3d631f9138d7b0e9da63.png)

# asp.net - ASP.NET：如何检查我的 ListViewItemEventArgs 是否为 ListItem？

> ID：12654853
> 
> 赞同：0
> 
> 时间：2012-09-29T17:31:58.197
> 
> 标签：asp.net, vb.net, listview, repeater

使用中继器时，我可以使用以下代码检查并查看 ItemDataBound 中的 ItemType 是否是实际项目...

```
If e.Item.ItemType = UI.WebControls.ListItemType.Item Or e.Item.ItemType = UI.WebControls.ListItemType.AlternatingItem Then ... 
```

我怎样才能用我的 ListView 做同样的事情？我尝试以与上述相同的方式进行检查，但没有运气。If 语句永远不会被执行。

谢谢！

**编辑**

```
 Private Sub ListView_ItemDataBound(sender As Object, e As System.Web.UI.WebControls.ListViewItemEventArgs) Handles ListView.ItemDataBound

        If e.Item.ItemType = UI.WebControls.ListItemType.Item Or e.Item.ItemType = UI.WebControls.ListItemType.AlternatingItem Then

            'This section never executes...

        End If 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T17:35:29.407

看起来您只是使用了错误的枚举。尝试`ListItemViewType`枚举，这应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T18:27:04.030

我相信你想要

```
 if (e.Item.ItemType == ListViewItemType.DataItem)
 {
ListItem li = (ListItem)e.Item; 
```

代替：

```
 If e.Item.ItemType = UI.WebControls.ListItemType.Item Or e.Item.ItemType = UI.WebControls.ListItemType.AlternatingItem Then 
```

这是从这里的文档中获取的：

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listview.itemdatabound.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listview.itemdatabound.aspx)

对不起 C# 语法，但它应该为您指明正确的方向。

# report - AX 2009 中的饼图报表

> ID：12654854
> 
> 赞同：2
> 
> 时间：2012-09-29T17:32:03.570
> 
> 标签：report, axapta, dynamics-ax-2009, x++, ax

是否可以在 AX 2009 标准报告中创建饼图报告？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T18:23:58.260

据我所知，答案是“不”，但您可以：

*   添加饼图以形成 ActiveX
*   使用 SSRS（或您喜欢的任何其他报告工具）
*   生成饼图位图（借助一些外部程序）并将此位图插入到您的报告中

# c++ - 将指针返回到指针数组获取下一个元素失败

> ID：12654855
> 
> 赞同：0
> 
> 时间：2012-09-29T17:32:04.150
> 
> 标签：c++, arrays, pointers, return, element

我有一个函数，在其中我用两个指针填充一个指针数组：

```
Vertex* MacePiece::getPositionOffset(int aDirection){
// returns Plate at Position aParent.myPlates[0]
BasePlate** theGroundPlate = this->getPlates();

Vertex* theOffset[] = {0,0};
switch(aDirection){

        theOffset[0] = theGroundPlate[0]->getVertexAt(0); //A
        theOffset[1] = theGroundPlate[0]->getVertexAt(1); //B
        break;

}

return theOffset[0]; 
```

}

接下来，我将该指针与第一个元素的地址一起传递给另一个函数：

```
Vertex* theParentOffset = aParentPiece->getPositionOffset(aDirection);
theConnectingPiece->setPositionInMace(theParentOffset, aDirection); 
```

在这里，我使用指向如下的元素：

```
void MacePiece::setPositionInMace(Vertex* aOffset, int aDirection){
        // set groundplate position
    updateGroundPlatePositionByOffsetVertex(aOffset, aDirection);

}

void MacePiece::updateGroundPlatePositionByOffsetVertex(Vertex* aOffset, int aDirection) {
    BasePlate** thePlates = this->getPlates();

    // first update GroundPlate's Position

    Vertex* A = thePlates[0]->getVertexAt(0);
    Vertex* B = thePlates[0]->getVertexAt(1);
    Vertex* C = thePlates[0]->getVertexAt(2);
    Vertex* D = thePlates[0]->getVertexAt(3);

    switch(aDirection){

        case MOVE_NORTH:

            // still 3D thus 2D's y is 3D'z if camera is looking down Y

            // Two Sides are connecting thus Some Plate locations are identical

            // A.x defined by parent D.x
            A->position[0] = aOffset[1].position[0];
            // A.z defined by parent D.z
            A->position[2] = aOffset[1].position[2];

            //B.x defined by parent C.x
            B->position[0] = aOffset[0].position[0];
            //B.z defined by parent C.z
            B->position[2] = aOffset[0].position[2];

            // now set Opposit side (A->D, B->C), since moving north: 
            // x is the same
            // z is reduced by -1 because OpenGL's Z is reducing to far-pane
            D->position[0] = A->position[0];
            D->position[2] = A->position[2] - 1.0f;

            C->position[0] = B->position[0];
            C->position[2] = B->position[2] - 1.0f;

            break; 
```

特别是这部分：

```
// A.x defined by parent D.x
                A->position[0] = aOffset[1].position[0];
                // A.z defined by parent D.z
                A->position[2] = aOffset[1].position[2];

                //B.x defined by parent C.x
                B->position[0] = aOffset[0].position[0];
                //B.z defined by parent C.z
                B->position[2] = aOffset[0].position[2]; 
```

aOffset[1] 返回与 aOffset[0] 相同的结果

当我传递一个指向数组的**指针时，每个信息都会丢失。

我正在创造一种迷宫，但它只是在一个方向上失败了。传递该指针有什么问题？如何获得在 Offset[1] 中指向的 Right 元素？

它太讨厌了。

干杯克努特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T00:39:28.483

问题出在第一个函数中。您正在返回一个数组的第一个元素，它是一个指针。我认为您的意图是返回两个元素的数组，以便索引 0 和 1 访问您在第一个函数中分配的指针。使用现有数据结构没有简单的解决方法。一种解决方案是让第一个函数返回一个 std::pair。将您的两个指针分配给 pair.first 和 pair .second，这样以后访问这些值就很容易了。

# c++ - 奇怪的 VC++ 智能感知行为

> ID：12654862
> 
> 赞同：0
> 
> 时间：2012-09-29T17:32:56.760
> 
> 标签：c++, visual-studio, visual-c++, intellisense

这段代码破坏了智能感知，树头中的一切都未定义为智能感知：

```
#include "tree.h"
#include <iostream>
#include <ctime>
#include <string>
#include <list> 
```

但是，当我将自己的 bst 实现头文件向下移动一点时，Intellisense 又开始工作了。

```
#include <iostream>
#include <ctime>
#include <string>
#include <list>
#include "tree.h" 
```

为什么是这样？

# c# - 如何在 c# 中将 ArrayList 添加到 listview1

> ID：12654864
> 
> 赞同：2
> 
> 时间：2012-09-29T17:33:00.453
> 
> 标签：c#, .net, listview, arraylist

我有一个 ArrayList

```
...    
while (reader.Read())
{
        decimal nr_zbor = reader.GetDecimal(cod_zbor);
        string airport = reader.GetString(name_aeroport);
        string company = reader.GetString(name_company);
        list.Add(nr_zbor);
        list.Add(airport);
        list.Add(company);
}
... 
```

我希望放入 listview **columns[zbor,airport,company]**，但我现在不知道如何

```
fly = searchFly.GetFly(direction, country, theDate, DFlexible); 
```

你能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T19:30:53.873

一种选择是创建一个具有这 3 个属性的类

```
class nac
{
   public decimal nr_zbor ...
   public string airport ...
   public string company ...
}

List<nac> nacs = new List<nac>(); 
```

这些属性是列

[列表视图类](http://msdn.microsoft.com/en-us/library/system.windows.controls.listview.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T17:52:34.857

你可以试试这个。

```
while(....)
{
   .........
   listview.Items.Add(new ListViewItem(nr_zbor), new ListViewItem(airport),new      
   ListViewItem(company);
} 
```

我还没有测试过。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T18:04:45.913

`ListViewItems`可能包含`ListViewSubItems`. 项目**本身**将显示在**第一列**，**之后**将显示**所有子项目**。所以你可以调整你的代码

```
while (reader.Read())
{
    decimal nr_zbor = reader.GetDecimal(cod_zbor);
    string airport = reader.GetString(name_aeroport);
    string company = reader.GetString(name_company);

    ListViewItem newItem = new ListViewItem(nr_zbor.ToString());
    newItem.SubItems.Add(airport);
    newItem.SubItems.Add(company);

    list.Items.Add(newItem); // assuming list is your listView
} 
```

确保将**ListView**设置为`View.Details`以便显示列。

# c++ - 如何从 makefile 在 Linux 上安装程序？

> ID：12654865
> 
> 赞同：3
> 
> 时间：2012-09-29T17:33:01.283
> 
> 标签：c++, linux, bash

> **可能重复：**
> [Linux/Unix 的“make install”应该由什么组成？](https://stackoverflow.com/questions/528399/what-should-linux-unix-make-install-consist-of)

我正在制作一个可以从命令行调用的程序，例如`./prog arg1 arg2`. 我想知道，我怎样才能使它可以从系统上的任何地方运行它？我知道我可以放入`prog`，`/usr/bin/`但是如果我的程序需要来自其安装目录的资源（可以是用户下载它的任何位置）怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T17:45:17.993

将您的程序所在的目录放入`path`环境变量中，或者将您的程序移动到已经存在的目录之一中`path`（通常需要超级用户权限，我认为您没有这个权限，那么您就不会问这个问题）。

将目录添加到搜索路径的前面并让系统刷新其数据库`tcsh`，例如

```
setenv "my/directory:"$PATH
rehash 
```

上`bash`，我想，它是

```
PATH=/my/directory:$PATH
export PATH 
```

（无需重新散列）。请注意，上面的命令将您的目录放在搜索路径的顶部，即这些将在任何其他之前搜索。因此，如果您的程序被称为“gcc”，那么您的程序将被执行而不是 GNU C 编译器。或者，您可以将您的目录添加到搜索路径的末尾，在这种情况下，只有在搜索路径中的任何其他目录中都没有找到同名的其他程序时，才会选择您的程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T17:45:48.490

您可能还想熟悉[Linux 文件系统层次结构](http://en.wikipedia.org/wiki/Filesystem_Hierarchy_Standard)：“什么去哪里”的标准定义。这里有更多信息：

*   [https://superuser.com/questions/90479/what-is-the-conventional-install-location-for-applications-in-linux](https://superuser.com/questions/90479/what-is-the-conventional-install-location-for-applications-in-linux)

环境变量可以全局定义（“针对所有人”，例如`/etc/profile`），或本地定义（“每个用户”，例如`~/.bashrc`）。以下是您的一些选项的一个很好的总结：

*   [https://wiki.archlinux.org/index.php/Environment_Variables](https://wiki.archlinux.org/index.php/Environment_Variables)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T17:40:44.710

当您使用 执行程序时`prog arg1 arg2`，这要归功于您的 shell，它在 $PATH 环境变量中搜索程序所在的文件夹。（尝试`env | grep PATH`查看那些文件夹）。

您需要在此变量中添加一个新目录（`export PATH="/new/directory/path/:$PATH"`如果在 bash 下，`setenv PATH "/new/directory/path/:$PATH"`如果使用 tcsh）或复制您的程序和它需要在 PATH 文件夹之一中执行的所有文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-29T17:41:05.863

有两种处理方法（Makefile 与它们无关）

*   您的安装程序可以将文件放在它想要的位置，因此您的程序不必搜索——它可以使用硬编码路径。或者您可以将数据目录的路径放入另一个文件中，该文件将被硬编码（如 /etc/programname.config）。

*   你把你所有的东西都放在一个目录中（通常是 /opt/programname 之类的）。当然，您也可以对其进行硬编码，或者您的程序可以 readlink() /proc/pid/exe 文件以获得很好的机会（但不能保证。特别是，例如，如果使用符号链接指向 / usr/bin/programname 到您的 /opt/programname/bin/programname 或其他任何内容，但如果这是硬链接，它将不起作用）来获取可执行文件的路径。从那里您应该能够访问您的数据文件。

如果更喜欢第二种解决方案，但这只是我。第一个解决方案适用于包管理器，如果您真的没有很多数据文件，它就不会那么矫枉过正。

# django - 使用表单后Django路径未重置

> ID：12654869
> 
> 赞同：2
> 
> 时间：2012-09-29T17:33:27.143
> 
> 标签：django, forms, templates, view

在名为 games/vote 的页面上，我有一个使用路径“add_title/”作为其操作的表单：

```
<form method="post" action="add_title/" method="post"> 
```

我从相关视图返回以下内容：

```
return render_to_response('games/votes.html', {'vote_list': not_owned_vote_list,},
                        context_instance = RequestContext(request)) 
```

从视图返回后，该 url 将保留在 games/vote/add_title 中。

我尝试更改请求的 path 和 path_info 属性，但无济于事：

```
request.path = "/games/vote/"
request.path_info = "/games/vote/" 
```

返回网页后，我希望路径为 /games/vote 。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T17:48:27.493

你不能像那样改变路径。唯一的方法是告诉浏览器重定向到不同的 URL——事实上，这正是文档在表单 POST 之后[建议你做的事情。](https://docs.djangoproject.com/en/1.4/topics/forms/#using-a-form-in-a-view)

```
if form.is_valid():
    ... process ...
    return HttpResponseRedirect('/games/vote/') 
```

（此外，您应该考虑使用命名 URL，[`reverse()`](https://docs.djangoproject.com/en/1.4/topics/http/shortcuts/#redirect)而不是对 URL 进行硬编码。）

# ruby - Sinatra 应用程序在 heroku 上引发内部服务器错误

> ID：12654872
> 
> 赞同：0
> 
> 时间：2012-09-29T17:33:56.943
> 
> 标签：ruby, heroku, timezone, sinatra, internal-server-error

我在 heroku 上部署了一个小型 sinatra 应用程序。当我尝试访问该页面时收到内部服务器错误消息。这是我从中得到的`heroku logs`

```
2012-09-29T17:24:18+00:00 app[web.1]: TypeError - can't convert nil into an exact number:
2012-09-29T17:24:18+00:00 app[web.1]:   /app/birthday_countdown.rb:9:in `+'
2012-09-29T17:24:18+00:00 app[web.1]:   web.rb:5:in `block in <main>'
2012-09-29T17:24:18+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb:1265:in `call'
2012-09-29T17:24:18+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb:1265:in `block in compile!'
2012-09-29T17:24:18+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb:835:in `[]'
2012-09-29T17:24:18+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb:851:in `route_eval'
2012-09-29T17:24:18+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb:835:in `block (2 levels) in route!'
2012-09-29T17:24:18+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb:870:in `process_route'
2012-09-29T17:24:18+00:00 app[web.1]:   /app/birthday_countdown.rb:9:in `initialize'
2012-09-29T17:24:18+00:00 app[web.1]:   web.rb:5:in `new'
2012-09-29T17:24:18+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb:833:in `each'
2012-09-29T17:24:18+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb:936:in `dispatch!'
2012-09-29T17:24:18+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb:769:in `block in call!'
2012-09-29T17:24:18+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb:872:in `block in process_route'
2012-09-29T17:24:18+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb:835:in `block (3 levels) in route!'
2012-09-29T17:24:18+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb:870:in `catch'
2012-09-29T17:24:18+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb:921:in `block in invoke'
2012-09-29T17:24:18+00:00 app[web.1]:   /app/vendor/bundle/rub
y/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb:921:in `catch'
2012-09-29T17:24:18+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb:833:in `route!'
2012-09-29T17:24:18+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb:769:in `call!'
2012-09-29T17:24:18+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb:755:in `call'
2012-09-29T17:24:18+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/rack-protection-1.2.0/lib/rack/protection/json_csrf.rb:17:in `call'
2012-09-29T17:24:18+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/rack-protection-1.2.0/lib/rack/protection/base.rb:47:in `call'
2012-09-29T17:24:18+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/rack-protection-1.2.0/lib/rack/protection/xss_header.rb:22:in `call'
2012-09-29T17:24:18+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb:834:in `block in route!'
2012-09-29T17:24:18+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/rack-protection-1.2.0/lib/rack/protection/xss_header.rb:22:in `call'
2012-09-29T17:24:18+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/logger.rb:15:in `call'
2012-09-29T17:24:18+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb:129:in `call'
2012-09-29T17:24:18+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb:921:in `invoke'
2012-09-29T17:24:18+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/head.rb:9:in `call'
2012-09-29T17:24:18+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb:99:in `call'
2012-09-29T17:24:18+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb:1389:in `block in call'
2012-09-29T17:24:18+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb:1471:in `synchronize'
2012-09-29T17:24:18+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb:1389:in `call'
2012-09-29T17:24:18+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/connection.rb:78:in `pre_process'
2012-09-29T17:24:18+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/commonlogger.rb:20:in `call'
2012-09-29T17:24:18+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/rack-protection-1.2.0/lib/rack/protection/path_traversal.rb:16:in `call'
2012-09-29T17:24:18+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/eventmachine-0.12.10/lib/eventmachine.rb:1060:in `block in spawn_threadpool'
2012-09-29T17:24:18+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/connection.rb:80:in `block in pre_process'
2012-09-29T17:24:18+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/methodoverride.rb:21:in `call'
2012-09-29T17:24:18+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.3.3/lib/sinatra/base.rb:136:in `call'
2012-09-29T17:24:18+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/eventmachine-0.12.10/lib/eventmachine.rb:1060:in `call'
2012-09-29T17:24:18+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/connection.rb:78:in `catch'
2012-09-29T17:24:18+00:00 app[web.1]: 180.215.44.250 - - [29/Sep/2012 17:24:18] "GET / HTTP/1.1" 500 30 0.0012
2012-09-29T17:24:18+00:00 heroku[router]: GET debo-ka-birthday.herokuapp.com/ dyno=web.1 queue=0 wait=0ms service=8ms status=500 bytes=30 
```

我在我的应用程序中进行了以下更改，

```
@month = Time.at(Time.now.utc + Time.zone_offset('IST')).month
@day = Time.at(Time.now.utc + Time.zone_offset('IST')).day
@year = Time.at(Time.now.utc + Time.zone_offset('IST')).year 
```

从

```
@month = Time.now.month
@day = Time.now.day
@year = Time.now.year 
```

我这样做是因为我希望时间符合印度标准时间，而不是 heroku 服务器上的时间。然而，这已经破坏了应用程序，有人可以告诉我如何修复它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T22:54:07.023

[“IST”不是`time`标准库](https://github.com/ruby/ruby/blob/v1_9_3_194/lib/time.rb#L52-68)中包含的时区之一，因此`Time.zone_offset('IST')`返回`nil`。

您可以改为使用 IST 的实际偏移量：

```
Time.at(Time.now.utc + Time.zone_offset('+05:30')).month 
```

使用该[`localtime`方法](http://ruby-doc.org/core-1.9.3/Time.html#method-i-localtime)可能更容易：

```
Time.now.localtime('+05:30') 
```

这给出了相同的结果。

# java - 确保参数化类型具有特定方法

> ID：12654873
> 
> 赞同：0
> 
> 时间：2012-09-29T17:34:03.943
> 
> 标签：java, type-parameter

如何指定特定参数化类型需要具有特定方法？

我的意思是：如果我有我的 class `public class SparseMatrix<type>`，并且我在 class 中的一个方法（`add`方法）需要使用其成员的 add 方法，我怎样才能让它 require`type`有一个`add`方法？我需要我的 SparseMatrix 不仅可以处理数字和字符串，还可以处理其他类型的可添加事物，甚至其他矩阵。

我也会在我的`mul`和`sub`方法中使用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T17:36:35.387

您不能仅仅基于方法的存在来做到这一点——这些类型必须实现一个公共接口或超类。例如：

```
public interface Addable<T>
{
    T add(T lhs, T rhs);
} 
```

然后：

```
public class SparseMatrix<T extends Addable<T>> 
```

当然，您不能让现有类型（数字、字符串）实现该接口——您必须编写自己的适用包装器类型。

# android - ICS taskManager 类似动画【左右滑动】

> ID：12654878
> 
> 赞同：1
> 
> 时间：2012-09-29T17:34:38.810
> 
> 标签：android, android-layout

我正在尝试制作一个应用程序（用于家庭作业），我花了 3 天时间寻找一个看起来像 ICS taskManger 的动画，我的活动垂直显示了很多图像，当我向右或向左滑动时，图像应该消失

我尝试了很多解决方案，但我从来没有得到正确的解决方案，请帮助我，并在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T08:25:35.177

这是我的解决方案之一：

```
@Override
public boolean onTouch(View v, MotionEvent event) {
final int action = event.getAction();
final float x = event.getX();
final float y = event.getY();
switch (action) {
case MotionEvent.ACTION_DOWN:
{
ClipData clipData = ClipData.newPlainText("", "");
View.DragShadowBuilder dsb = new View.DragShadowBuilder(v);
v.startDrag(clipData, dsb, v, 0);
v.setVisibility(View.INVISIBLE);
}
break;
case MotionEvent.ACTION_MOVE:

case MotionEvent.ACTION_UP:

 }
return false;
                    } 
```

# php - 将日期转换为时间戳格式

> ID：12654883
> 
> 赞同：1
> 
> 时间：2012-09-29T17:35:32.453
> 
> 标签：php

我有以下包含日期的代码。

```
 echo $giorno_selcted;
    $post_date = date("Y-m-d", strtotime(stripslashes($giorno_selcted))); 
```

$giorno_selected// 以这种格式回显日期 25-09-2012 $post_date// 以 Ymd - 2012-09-25 格式创建日期

我需要创建两个变量，将 $post_date 转换为时间戳，即 2012-09-25 00:00:00 和 2012-09-25 23:59:59

```
$post_date_start = 2012-09-25 00:00:00
$post_date_finish = 2012-09-25 23:59:59 
```

谢谢！

我有这个查询，它允许我打印插入两个时间戳之间的所有信息。但我在语法中遇到错误，您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“00:00:00 AND”附近使用正确的语法

这是代码：

```
$post_date = date("Y-m-d", strtotime(stripslashes($giorno_selcted)));

$time_end = "23:59:59";
$time_start = "00:00:00";
$giorno_timestamp_start=$post_date.' '.$time_end;
$giorno_timestamp_start=$post_date.' '.$time_start;

$information="SELECT * FROM scheda_anagrafica WHERE time_inserted BETWEEN " . $giorno_timestamp_start. " AND ". $giorno_timestamp_end; 
```

time_inserted 字段作为时间戳字段.. 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T17:44:28.233

你可以使用一个简单的php

```
$post_date_start=$post_date." 00:00:00";
$post_date_start=$post_date." 23:59:59"; 
```

# c# - 使用 C# 将带有样式的段落写入 Word 文档

> ID：12654885
> 
> 赞同：0
> 
> 时间：2012-09-29T17:35:41.683
> 
> 标签：c#, interop, ms-word

我一直在尝试将此文本打印到 Microsoft Word 文档文件中。

项目 A：

*   项目1
*   项目2

B 项：

*   第 3 项
*   第 4 项

我的“A 项：”和“B 项：”的样式为“正文”；项目列表的样式为“Bullet1”

我尝试了许多不同的东西，但没有一个能达到应有的效果。这是示例之一：

```
object body = "Body";
object bullet1 = "Bullet1";

Word.Paragraph para2 = _wordDoc.Paragraphs.Add(Missing.Value);            
para2.Range.set_Style(body);
para2.Range.Text = "Items : ";
para2.Range.InsertParagraphAfter();

Word.Paragraph para = _wordDoc.Paragraphs.Add(Missing.Value);
string text = "Item1 \nItem2";
para.Range.Text = text;
para.Range.set_Style(bullet1);

Word.Paragraph para3 = _wordDoc.Paragraphs.Add(Missing.Value);
para3.Range.set_Style(body);
para3.Range.InsertParagraphAfter(); 
```

你能告诉我代码上的错误或任何建议吗？我的假设是 set_style 有一些奇怪的地方，但我无法描述原因。谢谢你。

# android - 如何调用另一个Activity的方法

> ID：12654891
> 
> 赞同：3
> 
> 时间：2012-09-29T17:35:54.570
> 
> 标签：android

我正在使用 3 个类 A、B 和 C。在 AI 类中创建了一个方法 clickButton()，在 BI 类中使用 onClick() 作为按钮。在单击按钮时，它必须调用 A 类中的方法 clickButton()，并且在 clickButton() 内我编写了启动 C 类的意图。

问题是我无法在 B 类中调用 A 类方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T17:40:33.553

你通常不想`Activity`直接接触另一个人。Android 设计范式代表了不同活动之间很大程度上分离的观点，因此您不会直接调用类上的方法`A`，而是向其发送`Intent`or 消息或其他内容。如果你有一个实用方法，你应该考虑将它们移动到一个共享类中并使它们成为静态的。如果您有需要在后台或共享持久存储中执行的操作，您应该考虑转移到服务或内容提供商。

# java - 电池充满时报警

> ID：12654893
> 
> 赞同：2
> 
> 时间：2012-09-29T17:35:58.003
> 
> 标签：java, android

您好，我正在尝试以编程方式获取设备电池的状态。所以我希望获得电池状态，以了解它是否充满电。有什么想法可以实现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T17:39:12.837

假设您正在为 Android 设备编程：

您应该为电池状态创建一个`BroadcastReceiver`。它在这里被描述为一个教程：http: [//developer.android.com/training/monitoring-device-state/battery-monitoring.html](http://developer.android.com/training/monitoring-device-state/battery-monitoring.html)

我假设您已经知道如何通过其 API 对 Android 进行编程。如果没有，你有一些东西要先学习：http: [//developer.android.com/training/basics/firstapp/index.html](http://developer.android.com/training/basics/firstapp/index.html)

# maven - 嵌入式 tomcat 不会让我的 selenium/jbehave 故事运行

> ID：12654894
> 
> 赞同：0
> 
> 时间：2012-09-29T17:36:04.163
> 
> 标签：maven, selenium, jbehave, maven-tomcat-plugin, jbehave-plugin

我正在尝试让**嵌入式 tomcat 在集成测试之前启动**（我使用 Selenium + JBehave）并**在之后停止**。

以下是我尝试配置 maven 的方法：

```
 <plugin>
            <groupId>org.apache.tomcat.maven</groupId>
            <artifactId>tomcat7-maven-plugin</artifactId>
            <version>2.0</version>
            <executions>
                <execution>
                    <id>start-tomcat</id>
                    <phase>pre-integration-test</phase>
                    <goals>
                        <goal>run</goal>
                    </goals>
                </execution>
                <execution>
                    <id>stop-tomcat</id>
                    <phase>post-integration-test</phase>
                    <goals>
                        <goal>stop</goal>
                    </goals>
                </execution>
            </executions>
        </plugin> 
```

但是，当我运行时，Tomcat 启动正常`mvn integration-test`，似乎它不会让我的故事运行......

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T18:53:41.107

我想我找到了解决方案。它适用于以下配置：

```
<plugin>
                <groupId>org.apache.tomcat.maven</groupId>
                <artifactId>tomcat7-maven-plugin</artifactId>
                <version>2.0</version>
                <configuration>
                    <fork>true</fork>
                </configuration>
                <executions>
                    <execution>
                        <id>start-tomcat</id>
                        <phase>pre-integration-test</phase>
                        <goals>
                            <goal>run</goal>
                        </goals>
                    </execution>
                    <execution>
                        <id>stop-tomcat</id>
                        <phase>post-integration-test</phase>
                        <goals>
                            <goal>stop</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin> 
```

请注意添加的配置元素**，它告诉 tomcat 进行 fork**。

# mongodb - 从 MongoDB 检索数据子集

> ID：12654898
> 
> 赞同：0
> 
> 时间：2012-09-29T17:36:16.633
> 
> 标签：mongodb, mongodb-query

如果我有一个类似的集合：

```
[
    { "test": [ { "a": 1, "b": 2 }, { "a": 10, "b": 1 } ] },
    { "test": [ { "a": 5, "b": 1 }, { "a": 14, "b": 2 } ] },
    ...
] 
```

如何仅获取由`a`值组成的数据子集 when `b`is `2`？在 SQL 中，这类似于：

```
SELECT test.a FROM collection WHERE test.b = 2 
```

我明白我可以通过以下方式限制我获得的数据：

```
collection.find({ }, { "test.a": 1 }) 
```

但这会返回所有`a`值。如何限制它，使其仅返回`b`is `2`（`WHERE test.b = 2`SQL 等效部分）的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T18:40:32.390

您可以通过添加选择器对象作为`find`调用的第一个参数并使用[`$elemMatch`](http://docs.mongodb.org/manual/reference/projection/elemMatch/)投影运算符来做到这一点：

```
collection.find({ 'test.b': 2 }, { test: { $elemMatch: { b: 2 } }, 'test.a': 1 }) 
```

但这只会返回`test`每个文档的第一个数组元素，其中`b`为 2。如果数组中可以有多个 b:2 元素，则需要使用聚合框架`test`。

# ide - 与 IDE 相比，使用 WebDriver 有什么优势？

> ID：12654899
> 
> 赞同：3
> 
> 时间：2012-09-29T17:36:22.073
> 
> 标签：ide, webdriver

我是 Selenium 的新手，使用 IDE 已经花了大约一周的时间。到目前为止，一切都很好。但是，我们应用程序的其他一些部分涉及大量的拖放功能，我对此不太确定......这让我想到了我的问题......WebDriver 可以做哪些类型的特定事情而 IDE 不能做？我阅读了 Selenium 的首页，并且知道 WebDriver 可以进行更“健壮”的测试，但我并不完全清楚在这种情况下健壮是什么意思？更长？更多能力？

我正在寻找的是哪些类型的特定测试可以使用无法在 IDE 中运行的 WebDriver 运行？它们中的任何一个都与拖放有关吗？这将告知我是否继续使用 IDE 或切换的决定。我认为从一开始就使用某些东西比创建大量测试然后切换要好。

提前非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T23:58:10.190

您可以使用所选语言的全部功能。例如，使用 IDE，您只能使用 IDE 的 API，但是如果您选择明确使用 WebDriver，则可以将其与 C# 结合使用并使用 C# 的全部功能（例如 LINQ）。

一些 IDE 命令不直接使用 WebDriver 进行转换。

您可以将纯 WebDriver 测试集成到 CI（持续集成）服务器中。

它不仅限于 Firefox，而 IDE 是（因为 IDE 仅在 Firefox 中可用）。

您可以更轻松地改进和扩展 Selenium。例如使用扩展方法和继承。（例如，扩展 Selenium 以便当它找不到元素时，它会截取页面的屏幕截图）

它将更加健壮，因为 IDE 并不总是为您提供查找元素的最可靠方法。例如，如果您需要的元素嵌套在表中，IDE 将提供给您的 XPath 将直接推断到特定的表行和单元格。

例如这样的：

```
//table[1]/tr[1]/td[2]/table[1]/tr[1]/td[3]/a[1]/b 
```

不是世界上最可靠的 XPath。那些对 XPath 或自动化测试或 Selenium 工作原理一无所知的人会坚持下去，然后浪费数小时来弄清楚这个 XPath 查询失败的原因。其他人会更改它，并仅使用 XPath 作为基本查询。

IDE 通常应该用于那些没有太多编程知识的人（例如一些测试人员），如果您希望您的开发人员和/或测试开发人员使用 Selenium，请直接使用 WebDriver。感觉更像是使用成熟的语言而不是脚本进行编程（毕竟，IDE 生成的脚本是纯 HTML 文件）。这个想法通常适用于那些没有太多编程知识的人，只需点击“播放”并让 Selenium 完成工作。

拖放适用于 IDE 和 WebDriver。

Selenium 的大部分开发（似乎）都用于扩展 WebDriver 代码，IDE 可能会在一些新功能中落后。

直接使用 WebDriver，您还可以使用单元测试框架的全部功能（通常是带有 C# 的 NUnit 或用于 Java 的 Junit/TestNG）。这允许对每个浏览器重复测试（即在 Chrome、Firefox 和 IE 中重复测试）或在测试前后定义某些逻辑（即添加用户成员资格、创建用户、设置其他测试数据）。

如果它使用编程语言而不是脚本语言（即 WebDriver 是用编程语言编写的，IDE 脚本只是 HTML 文件），其他开发人员可能更倾向于提供帮助。将其放入您的解决方案并将其作为夜间构建过程的一部分有助于确保开发人员在您的测试进程中提供帮助。

想一想，另一个例子是修复了一个错误，但引入了一个新错误，导致您的测试失败。谁负责修复测试？你还是他们？让它直接使用 WebDriver，他们只需查找 Selenium 的源代码并自己弄清楚 API 的使用情况。对于 IDE，它实际上是一个调用一些 javascipt 的 HTML 文件。关于它的文档不多。

总结一下：如果你没有太多的编程经验，要么学习一门语言并直接使用 WebDriver，要么就坚持使用 IDE。要么完成这项工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T14:31:24.860

IDE 不能用于严重的自动化。我建议学习 API 并将其与 Java/C#/Python 一起使用。它将帮助您产生一些良好的自动化，并且会得到很好的回报。

您始终可以使用 IDE 来了解代码是如何生成的。

# python - 如何从 Python 类中查找属性的名称

> ID：12654900
> 
> 赞同：1
> 
> 时间：2012-09-29T17:36:28.317
> 
> 标签：python, introspection

我正在尝试获取一个属性来打印它在python的所有者类中分配的名称，并且我已经制定了一种方法，当且仅当直接分配该属性时该方法才有效。如果属性是继承的，它就不起作用，如下图所示。有什么好方法可以在您调用任何一个`Handler.CLIENT_ID`或始终打印`SubHandler.CLIENT_ID`变量名时？`CLIENT_ID`

```
class Auto(object):
    def __get__(self, instance, owner):
        attr_name = (k for (k, v) in owner.__dict__.iteritems() if v == self).next()
        return attr_name

class Handler(object):
    name = 'account'

    CLIENT_ID = Auto()

class SubHandler(Handler):
    pass

h = Handler()
print h.CLIENT_ID
# prints CLIENT_ID
s = SubHandler()
print s.CLIENT_ID
# Traceback (most recent call last):
#    attr_name = (k for (k, v) in owner.__dict__.iteritems() if v == self).next()
# StopIteration 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T17:41:10.033

您可以使用类的属性遍历基类`__mro__`，查找每个类中的属性' `__dict__`：

```
class Auto(object):
    def __get__(self, instance, owner):
        attr_name = (k 
            for klass in owner.__mro__
            for (k, v) in klass.__dict__.iteritems() 
            if v == self).next()
        return attr_name 
```

“mro”代表方法解析顺序，是一个基类列表，python 将按照该顺序查找方法和其他类定义的属性。扫描此列表意味着您将以 Python 使用的相同顺序在基类中查找属性。

您的示例代码与上面的代码一起正常工作：

```
>>> h = Handler()
>>> print h.CLIENT_ID
CLIENT_ID
>>> s = SubHandler()
>>> print s.CLIENT_ID
CLIENT_ID 
```

# linux - boost_python-mt.so 不可用

> ID：12654901
> 
> 赞同：1
> 
> 时间：2012-09-29T17:36:31.497
> 
> 标签：linux, boost

我将编写我的程序，它使用 boost_python 而不管它的版本。由于程序是多线程的，所以我必须使用 libboost_python-mt。问题是，当我安装 libboost_python-dev 时，我在 /usr/lib 中看不到 libboots_python-mt.so，而存在以下库：

```
libboost_python-mt-py27.so
libboost_python-py27.so.1.48.0
libboost_python.so 
```

我使用的是 ubuntu 12.04，我安装了 libboost_python-dev、libboost-all-dev

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-21T01:06:10.730

`-mt`后缀已被删除。安装的 Boost 库是多线程安全的（[来自此链接](https://askubuntu.com/questions/486006/cannot-find-boost-thread-mt-library)。）

将链接标志从`-lboost_python-mt`改为`-lboost_python`改为。

# python - 在 python 中使用许多不同的模块

> ID：12654907
> 
> 赞同：0
> 
> 时间：2012-09-29T17:36:54.087
> 
> 标签：python, pyserial, tweepy

几周前我是python的新手，我开始使用python（经典Noob-Disclaimer）现在每当我通过复制Lib下站点包中的解压缩文件夹并使用“c：\ python27 \”运行源安装来安装模块时lib\site-packages\tweepy-1.2\setup.py install”在命令提示符下安装，没有任何错误。但是现在当我制作一个 python 脚本 (*.py) 并将它存储在桌面上时它不会工作并且它会给出一个错误“没有找到模块”但是当我将它存储在与源相同的文件夹中时它可以完美地工作。另外，如果我打开 IDLE GUI，它也会返回相同的错误。但这不会发生在我用于 TTS 的 win32com 模块中。我错过了一些东西..但我很难找到答案。请帮帮我！我需要使用许多这些模块..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T18:07:45.900

将解压缩的文件夹复制到 site-packages 不会*安装*Python 包。

要手动安装，请将包解压缩到临时目录，然后运行：

```
python setup.py install 
```

在此目录中，之后您可以删除该目录。

要自动下载并安装纯 Python 包，请运行：

```
pip install tweepy 
```

如果你已经`pip`安装了。

安装具有 C 扩展名的 Python 包的最简单方法是使用二进制安装程序（`*.exe`,`*.msi`文件）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T17:45:53.840

为了避免这一切，请使用[VirtualEnv](http://pypi.python.org/pypi/virtualenv)

*Virtualenv 是一个创建隔离 Python 环境的工具。正在解决的基本问题是依赖关系和版本之一，以及间接权限。想象一下，您有一个应用程序需要 LibFoo 版本 1，但另一个应用程序需要版本 2。您如何同时使用这两个应用程序？如果您将所有内容都安装到 /usr/lib/python2.7/site-packages（或任何您平台的标准位置）中，很容易导致您无意中升级了不应升级的应用程序。或者更一般地说，如果你想安装一个应用程序并让它保持不变怎么办？如果应用程序正常工作，其库或这些库版本的任何更改都可能破坏应用程序。另外，如果你不能将包安装到全局站点包目录中怎么办？例如，在共享主机上。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T18:24:10.920

安装 python 包的最简单方法是使用 pip。[首先，如果您使用 windows](https://stackoverflow.com/questions/4750806/how-to-install-pip-on-windows)，您需要按照此处的说明安装 pip 。然后你可以从命令行查询一些包，例如

```
> pip search twitter 
```

然后要安装某些软件包，只需使用 pip 如下：

```
> pip install tweepy 
```

# firefox - Firefox 不会从离线缓存清单加载页面，但在 Chrome 上运行良好（+ 缓存清单故障排除提示）

> ID：12654912
> 
> 赞同：8
> 
> 时间：2012-09-29T17:37:53.633
> 
> 标签：firefox, offline, offline-caching, html5-appcache, application-cache

这与尚未回答的 SO 问题基本相同：[Offline Web App not caching on Firefox but ok on Chrome](https://stackoverflow.com/q/9467383/1116666)

我遇到了同样的问题，我将提供更多信息，因为它可能会帮助试图找出试图实现缓存清单的神秘奥秘和陷阱的人。

问题：点击页面重新加载/刷新，页面应该从离线缓存重新加载，但事实并非如此。

它在 Chrome 23 中运行良好：当我断开与 Internet 的连接并刷新页面时，它加载正常并且控制台显示 Application Cache NoUpdate 事件。

但是，Firefox 15.0.1 显示了我的 404 页面。

故障排除 (Firefox)：转到 Firebug 并单击 DOM，然后单击 applicationCache。状态显示为 0，表示未缓存（页面尚未离线存储）。

故障排除 (Firefox)：转到 Firefox 选项 -> 高级并查看离线 Web 内容和用户数据。它显示我的域正在使用 1.4MB 的数据供离线使用。（这是检查您的页面是否已被缓存的好地方）。

故障排除 (Firefox)：打开一个新选项卡并转到 about:cache。在这里，您应该会看到离线缓存设备的标题。在这里您可以看到缓存目录，这是您的离线缓存文件的保存位置。如果您单击 List Cache Entries，您将在离线缓存清单中看到这些文件。

这里有两件事我觉得很奇怪：1）当我点击列表中的任何文件时，它会转到一个空白页面，上面写着“缓存条目信息您选择的缓存条目不可用”。但是，缓存目录中的文件确实存在并且不是空白 2）虽然列出了缓存清单中的所有文件，但我正在调用的页面未在此处列出（在 Chrome DevTools 中，它在清单中显示为Master：它会自动缓存，即使它没有在缓存清单文件中明确列出）。

这是我在线时看到的内容： 使用冷（空）缓存，当我加载页面时，控制台会显示检查、下载、进度和缓存事件，但缓存状态为未缓存。基本上，缓存文件已下载，但无法访问。Firebug DOM applicationCache 说：离线缓存中有 0 个项目（这与 about:cache 和 Options -> Advanced 中显示的内容相矛盾）。状态为 1，表示空闲。当我在线查看 Firebug 中的 Net 选项卡时，它会显示对页面的 GET 请求，响应为 200 OK。Expires 设置显示 Wed Dec 31 1969，我认为这意味着该页面将始终被获取。其他文件显示 304 Not Modified 响应，这意味着它们正在从浏览器缓存中加载，

当我离线时：使用“未缓存”缓存，GET 请求会失败，它会加载带有 200 OK (BFCache) 响应的离线回退 404 页面。

似乎下载了离线缓存，因为它物理存在于磁盘上，并且控制台中显示了进度事件，但 Firefox 从未触发缓存事件，因此某些资源没有成功下载。这些文件都是 png、js 或 php 格式，所以没有疯狂的文件格式。Chrome 可以毫无问题地将完全相同的文件下载到缓存中。我也尝试过移动 Safari，它成功地从离线缓存重新加载了页面。

Firefox 是否存在不缓存某些文件类型的已知问题？我在我的一些文件上使用了 .html.php 扩展名。我还使用 php 文件动态生成清单，因此它只获取存在的文件并将它们散列以检测更改并更新清单。

下一步：我将尝试一个简单的清单，看看我是否可以让它工作，然后一个一个添加文件，看看哪个文件触发了错误。也许 Firefox 不喜欢我动态生成缓存清单而不是手动更新静态文件的事实？

我学到了很多关于缓存清单的奥术复杂性，但我更像是一个黑客而不是计算机专家。有没有其他人在使用 Firefox 时遇到过这种怪癖？

页面开头：

```
<!DOCTYPE html> 
<html manifest="/directory/manifest.php"> 
```

然后 manifest.php 就是

```
header('Content-Type: text/cache-manifest');
echo "CACHE MANIFEST\n"; 
```

等等等等。它使用 RecursiveDirectoryIterator 来获取目录中的所有文件（除了缓存本身，它默认包含）。

# linux - 具有 DMA 功能的 PCI/PCIe 卡，用于设备驱动程序培训

> ID：12654913
> 
> 赞同：0
> 
> 时间：2012-09-29T17:37:56.830
> 
> 标签：linux, bsd, pci, dma

我试图为带有 PCI/PCIe 设备的设备驱动程序学习 DMA，我的平台是 linux/bsd。我发现了很多用于训练的简单 PCI 板（例如简单的数字 I/O 板），但没有一个硬件复杂到足以处理 DMA。Stackoverflow 上是否有人知道带有某种微处理器或微控制器的 PCI/PCIe 卡，我可以使用 gcc 等开源工具（例如 PowerPC、68HC11、Atmel、8051 等）进行编程？

当然，踢球者的成本很低……如果可能的话，低于 300.00 美元。

我不想要基于 FPGA 的板，因为这需要 Windows 工作站（通常）来对 FPGA 进行编程，以及在 FPGA 中创建和使用 PCI/PCIe IP 内核所需的所有时间。基本上，我不想把时间花在 FPGA 上；我想在设备驱动程序上工作！虽然这可能是我唯一的选择......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T08:35:45.650

如果您不想使用 FPGA，那么您必须找到一块具有足够信息的板，以便您能够与它的 PCIe 接口进行通信。没有多少板带有硬件接口文档，但如果您想要或可以在没有文档的情况下执行此操作，您可以使用以下板之一：

[阿里巴巴 4 通道 MIDI GAME 端口 3D](http://www.alibaba.com/product-gs/546065014/4_Channel_MIDI_GAME_port_3D.html) [E-bay 上的同一个板 E-bay](http://www.ebay.com/itm/Dual-Type-F-DMA-Support-6-Channel-PCI-Sound-Audio-Card-/160877572471?pt=US_Sound_Cards_Internal_&hash=item25750cf177) [上的替代 2](http://www.ebay.com/itm/4-Channel-MIDI-3D-PC-PCI-Sound-Audio-Card-Game-Port-Dual-Type-F-DMA-Support-/180959128212?pt=UK_Computing_ComputerComponents_SoundCards&hash=item2a22012a94)

你也可以得到一个像这个更高级的板，但是你需要知道如何与他们的芯片组通信。 [阿里巴巴 4CH PCIe HDMI 视频采集卡在这里](http://www.alibaba.com/product-gs/592438815/4CH_PCIe_HDMI_Video_Capture_Card.html)

如果您改变了对 FPGA 的想法，我真的会推荐 Altera PCIe 板，它带有参考设计和板上已经编程的位文件。它比那些贵得多，但最大的好处是您拥有 PCIe 接口的完整文档：

[Altera Cyclone IV GX 收发器入门套件](http://www.altera.com/products/devkits/altera/kit-cyclone-iv-starter.html)

以下是有关其参考设计的信息： [Altera PCIe 参考设计](http://www.altera.com/support/refdesigns/ip/interface/ref-pciexpress-hp.html)

希望你能在这里找到你要找的东西。

# java - 循环内的变量声明与相同变量名的多个声明

> ID：12654916
> 
> 赞同：2
> 
> 时间：2012-09-29T17:38:14.397
> 
> 标签：java, variables, scope, syntax-error

下面的代码给出了一个错误，因为变量 m 被定义了两次。

```
class one {
   public static void main(String args[]) {
     int m=10;
     int m=10;
   }
 } 
```

但是当声明在循环内完成时，它是可以的，即使`m`仍然被定义了两次。

```
 class one {
   public static void main(String args[]) {
     for(int i=1;i<=2;i++) {
       int m=10;
     }
   }
 } 
```

并且编译器不会返回错误消息。
你能解释一下两者之间的区别吗？为什么有时我可以在同一个方法中两次声明同一个变量，有时却不行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T17:45:45.383

对于第一种情况， m 被引用到 main 方法的末尾，因此您不能在同一范围内拥有两个同名的变量。

而在第二种情况下，每次循环执行时，最后一次迭代的 m 不再被引用，因此您可以重新声明并重新初始化它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-23T15:06:25.593

简而言之，您没有在第二个示例中两次声明此变量。`}`由于变量的生命周期在它被声明的块关闭时结束，当你`m`在第二次迭代中声明时，第一个是“死的”。这就是为什么您可以循环执行此操作的原因。

在第一个示例中，您在同一代码块中声明了两个具有相同名称的变量，它们应该同时“存在”。这是被禁止的，因为你不能通过写来判断你引用了哪个变量`m`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T17:45:55.307

你得到错误是因为你在同一个块（范围）中定义了同一个变量两次。当您在循环内运行时，您会为循环的每次迭代“打开”一个新范围，因此您可以定义一个仅在此范围内可见的变量（尽管在循环外不可见）。例如，如果你写了这样的东西：

```
class one {    
    public static void main(String args[]) {     
        {
            int m=10;
        }
        {
            int m=10;
        }
    }
} 
```

它本来可以编译得很好，因为同名的变量不共享相同的范围。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-29T17:47:58.377

您不能在代码块中多次声明具有相同名称的变量。

在第一种情况下，您在代码块中声明相同的变量，即 main。在第二种情况下，在 for 循环的第一次迭代之后，在第二次迭代中`variable m`被销毁并重新创建

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-29T17:55:07.247

它在第一个错误中创建了一个错误，因为您要声明该变量两次。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-29T18:35:29.987

**-**在第一个代码中，您在同一范围内声明了两次 m，并且它一直持续到 main() 方法结束。

**-**每次`loop` **a** `primitive int variable m`都是**用一个值创建的，**所以它显然不是问题。

# c - 这些空的 if 块有什么意义？

> ID：12654917
> 
> 赞同：1
> 
> 时间：2012-09-29T17:38:14.837
> 
> 标签：c, gcc

我正在阅读[http-parser](https://github.com/joyent/http-parser)的源代码，并遇到了一些带有空块的 if 语句。这是一个例子（[来源](https://github.com/joyent/http-parser/blob/master/test.c#L1542)）

```
int
dontcall_message_begin_cb (http_parser *p)
{
  if (p) { } // gcc
  fprintf(stderr, "\n\n*** on_message_begin() called on paused parser ***\n\n");
  abort();
} 
```

该评论仅提到“gcc”（对我而言）不是很有帮助。这些有什么意义？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-29T17:39:59.273

我的猜测是有人试图抑制“未使用的参数”警告。

执行此操作的规范方法是`(void)p;`，但我猜代码的作者对此一无所知。

# clojure - Clojure：从地图动态创建函数——宏的时间？

> ID：12654919
> 
> 赞同：6
> 
> 时间：2012-09-29T17:38:23.650
> 
> 标签：clojure, macros, refactoring, noir, hiccup

我有一个这样开始的函数：

```
(defn data-one [suser]
    (def suser-first-name
       (select db/firstNames
            (fields :firstname)
            (where {:username suser})))
    (def suser-middle-name
        (select db/middleNames
            (fields :middlename)
            (where {:username suser})))
    (def suser-last-name
         (select db/middleNames
             (fields :lastname)
             (where {:username suser})))
    ;; And it just continues on and on...
        ) 
```

当然，我一点也不喜欢这个。我的代码库中的许多区域都有这种模式重复，我想概括一下。

所以，我想出了以下开始：

```
(def data-input {:one '[suser-first-name db/firstNames :firstname] 
                      '[suser-middle-name db/middleNames :middlename]
                      '[suser-last-name db/lastNames :lastname]})

(defpartial data-build [data-item suser]
    ;; data-item takes the arg :one in this case
     `(def (data-input data-item)
        (select (data-input data-item)
            (fields (data-input data-item))
            (where {:username suser})))) 
```

这里真的有几个问题：

- 我如何解构数据输入，以便在 x 未知时创建 x 函数，即。:one 的值是未知的，并且 data-input 中键的数量是未知的。

-- 我在想现在是创建宏的时候，但我以前从未构建过宏，所以我对这个想法犹豫不决。

并且给出一点上下文，函数必须返回要解构的值，但我认为一旦我解决了这个问题，概括所有这些都是可行的：

```
(defpage "/page-one" []
    (let [suser (sesh/get :username)]       
    (data-one suser)
        [:p "Firat Name: " 
            [:i (let [[{fname :firstname}] suser-first-name]
                (format "%s" fname))]
        [:p "Middle Name: "  
            [:i (let [[{mname :emptype}] suser-middle-name]
                (format "%s" mname))]
        [:p "Last Name: " 
            [:i (let [[{lname :months}] suser-last-name]
                    (format "%s" lname))]])) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-30T00:25:06.253

一些建议：

*   `def`在函数内部*真的很讨厌*- 你正在改变全局环境，它可能会导致各种并发问题。我建议将结果存储在地图中。
*   您在这里*不需要宏*- 所有数据提取都可以在函数内相对轻松地完成

因此，我建议如下：

```
(def data-input [[:suser-first-name db/firstNames :firstname] 
                 [:suser-middle-name db/middleNames :middlename]
                 [:suser-last-name db/lastNames :lastname]])

(def data-build [data-input suser]
  (loop [output {}
         items (seq data-input)]
    (if items
      (recur
        (let [[kw db fieldname] (first items)]
          (assoc output kw (select db (fields fieldname) (where {:username suser})))) 
        (next items))
      output))) 
```

未经测试，因为我没有您的数据库设置 - 但希望这能让您了解如何在没有宏或可变全局变量的情况下执行此操作！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-30T00:05:09.147

好问题。首先，这是您要求的宏：

```
(defmacro defquery [fname table fields ]
  (let [arg-name (symbol 'user-name)
        fname (symbol fname)]
    `(defn ~fname [~arg-name]
       (print ~arg-name (str ~@ fields))))) 
```

你可以这样称呼它：

```
(defquery suser-first-name db/firstNames [:firstname]) 
```

或者，如果您希望将所有配置保存在地图中，那么它将接受字符串作为第一个参数而不是符号：

```
(defquery "suser-first-name" db/firstNames [:firstname]) 
```

* * *

现在，如果您不介意我推荐其他解决方案，我可能会选择使用围绕配置关闭的单个功能。像这样的东西：

```
(defn make-reader [query-configurations]
  (fn [query-type user-name]
    (let [{table :table field-names :fields} 
           (get query-configurations query-type)]
      (select table
             (apply fields field-names)
             (where {:username suser})))))

(def data-input {:firstname  {:table db/firstNames  :fields :firstname} 
                 :middlename {:table db/middleNames :fields :middlename}
                 :lastname   {:table db/lastNames   :fields :lastname}})

(def query-function (make-reader data-input))

;; Example of executing a query
(query-function :firstname "tom") 
```

顺便说一句，还有另一种使用 Korma 的方法：

```
;; This creates a template select from the table
(def table-select (select* db/firstNames))

;; This creates new select query for a specific field
(def first-name-select (fields table-select :firstname))

;; Creating yet another query that filters results by :username
(defn mkselect-for-user [suser query] 
  (where query {:username suser}))

;; Running the query for username "tom"
;; I fully specified exec function name only to show where it comes from.
(korma.core/exec (mkselect-for-user "tom" first-name-select)) 
```

有关更多信息，我强烈建议您查看[Korma 资源](https://github.com/korma/Korma/blob/master/src/korma/core.clj#L92)。

# android - 一个安卓应用可以打开另一个安卓应用吗？

> ID：12654926
> 
> 赞同：2
> 
> 时间：2012-09-29T17:39:13.797
> 
> 标签：android, launch

是否可以创建一个 Android 应用程序来启动另一个 Android 应用程序并在打开时自行关闭？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T17:42:23.903

当然这是可能的。看看`Intent`。您可以使用 关闭您的活动`finish()`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T17:42:31.850

你应该先用谷歌搜索你的问题。

[从 Android 上的另一个应用程序启动一个应用程序](https://stackoverflow.com/questions/3872063/android-launch-an-application-from-another-application)

[从您自己的（意图）打开另一个应用程序](https://stackoverflow.com/questions/2780102/open-another-application-from-your-own-intent)

# html - 是否可以使用 css 改变 div 的颜色？

> ID：12654928
> 
> 赞同：1
> 
> 时间：2012-09-29T17:39:17.343
> 
> 标签：html, css

**更新**：这个问题的原始措辞含糊不清，因此我对其进行了修改以更好地表达我的要求。

假设我有两个 div

```
<div class='button'>A</div>
<div class='button green-button'>A</div> 
```

具有以下样式：

```
div.button {
  /* define position,  size, etc ...*/
  color:#FBB
  background-color:#F00
}

div.button.green-button{
  color:#BFB
  background-color:#0F0
} 
```

![在此处输入图像描述](../Images/a9d34b675fba994bb20fc9f7b6bd4671.png)![在此处输入图像描述](../Images/488bf00911ead39dd0516a1a8fc3530f.png)

在此示例中，只需将`color`和的值更改一位，即可轻松将第一个按钮的色调从红色变为绿色`background-color`。如果我想做一个蓝色按钮，我可以再次为第三个按钮做同样的转变。

但是，在我不想完全从一种颜色转换到另一种颜色的情况下，它有点棘手。

此外，我想对 div 中的所有内容进行颜色转换，而不仅仅是`background-color`和`color`属性。因此，如果我要在 div 中放置和图像，图像的颜色也会发生变化。

这在 CSS 中可能吗？如果不能，你可以用 Javascript 来做吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-29T17:49:19.537

由于每个人都在发布疯狂的猜测，我会直接进入它。

您可以使用[CSS 过滤器](http://davidwalsh.name/css-filters)实现某些目标（在您的情况下`hue-rotate`）

或者使用像[LESS](http://lesscss.org/#-color-functions)这样的 CSS 预处理器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T17:42:34.540

是的，你需要多个元素。

HTML：

```
<div>
    <span class="over-bg"></span>
    <span>A</span>
</div>​ 
```

CSS：

```
div, span { height:100px; width:100px; vertical-align:middle;
            text-align:center; }

div { background-color:#ff3300; position:relative; margin:20px; float:left; }
span { position:absolute; left:0; top:0; height:100%; width:100% }
span.over-bg { background-color:#22FF00; display:none; }
div:hover span.over-bg { display:block; } 
```

[http://jsfiddle.net/TeCvr/1/](http://jsfiddle.net/TeCvr/1/)

* * *

另一种使用***伪元素的***方法：

HTML：

```
<div>
    <span>A</span>
</div>​ 
```

CSS：

```
div, span { height:100px; width:100px; vertical-align:middle;
            text-align:center; }

div { background-color:#ff3300; position:relative; margin:20px; float:left; }
span { position:absolute; left:0; top:0; height:100%; width:100% }
div:hover:before { display:block; content:""; position:absolute; left:0;
                   top:0; height:100%; width:100%; background-color:#22FF00; } 
```

[http://jsfiddle.net/TeCvr/2/](http://jsfiddle.net/TeCvr/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T17:51:47.600

你的意思是这样的：

[演示](http://jsfiddle.net/HYEhM/)

HTML：

```
<a class="button">A</a>​ 
```

CSS：

```
.button{
    font-family:sans-serif;
    font-size: 80px;
    display:block;
    line-height:100px;
    text-align:center;
    color:rgba(255,255,255,0.5);
    width:100px;
    height:100px;
    background-color:green;
}

.button:hover{
    background-color:red;
}
​ 
```

或者您是否正在寻找能够自行计算颜色偏移的东西？

如果你有 CSS3 的[`filter: hue-rotate(angle);`](https://developer.mozilla.org/en-US/docs/CSS/filter#hue-rotate%28angle%29)

[演示](http://jsfiddle.net/HYEhM/1/)

HTML：

```
<a class="button">A</a>​ 
```

CSS：

```
.button{
    font-family:sans-serif;
    font-size: 80px;
    display:block;
    line-height:100px;
    text-align:center;
    color:rgba(255,255,255,0.5);
    width:100px;
    height:100px;
    background-color:green;
}

.button:hover{
    -webkit-filter:hue-rotate(250deg);
    -moz-filter:hue-rotate(250deg);
    -ms-filter:hue-rotate(250deg);
    filter:hue-rotate(250deg);
}
​ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-29T17:55:36.977

好吧，您可以使用 CSS3 支持的过渡样式规则，例如：

```
 .button:hover {
     background-color: #F0F0F0;
     -webkit-transition: background-color 1ms linear;
     -moz-transition: background-color 1ms linear;
     -o-transition: background-color 1ms linear;
     -ms-transition: background-color 1ms linear;
     transition: background-color 1ms linear; 
} 
```

是否有任何具体原因说明您为什么要实现这一目标..？我想不出任何这样的应用程序；除非您在对设计进行逆向工程时遇到此问题并且找不到导致此行为的 CSS..？

参考： [http ://www.css3.info/preview/css3-transitions/](http://www.css3.info/preview/css3-transitions/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-29T17:44:36.970

我不知道我是否理解你。您可以更改 div 的类。例如 .button 到 .buttongreen 具有不同的属性。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-29T17:45:14.963

不使用`color`和`background-color`属性，你仍然可以使用：

```
 background-image: linear-gradient(to bottom, #006e2e 0%,#006e2e 100%) 
```

这是从给定颜色到相同颜色的渐变，但整个渐变不是 CSS 中的颜色。

# c - 处理结构 c

> ID：12654933
> 
> 赞同：-1
> 
> 时间：2012-09-29T17:39:56.940
> 
> 标签：c, casting, struct, contiki

我在使用 C 编写的 contiki 的单播示例中发现了这一点。

```
#define MSG_LEN 20
msg_header_t * header;
uint8_t *data;

packetbuf_clear();
header = (msg_header_t *)(packetbuf_dataptr());
data = (uint8_t *)(header + 1);
random_data(data, MSG_LEN);
hton_uint16(&header->data_len, MSG_LEN);

packetbuf_set_datalen(sizeof(msg_header_t) + MSG_LEN);
rimeaddr_t addr;
addr.u8[0] = 2;
addr.u8[1] = 0;
if(!rimeaddr_cmp(&addr, &rimeaddr_node_addr)) {
    unicast_send(&uc, &addr);
} 
```

这里有一些关于细节

```
typedef struct {
    unsigned char data[2]; 
} nw_uint16_t;

typedef struct msg_header 
{
    NN_DIGIT r[NUMWORDS]; //NN_DIGIT = uint32_t, NUMWORDS = 6
    NN_DIGIT s[NUMWORDS];
    nw_uint16_t data_len; 
} msg_header_t;

inline uint16_t hton_uint16(void * target, uint16_t value);

inline uint16_t ntoh_uint16(void * source); 
```

方法

```
inline uint16_t  hton_uint16(void * target, uint16_t value) 
{
    uint8_t *base = target;
    base[1] = value;
    base[0] = value >> 8;
    return value;
}
/*---------------------------------------------------------------------------*/
inline uint16_t ntoh_uint16(void * source)
{
    uint8_t *base = source;
    return (uint16_t)(base[0] << 8 | base[1]);
}
/*---------------------------------------------------------------------------*/
static void random_data(void *ptr, uint16_t len)
{
    uint16_t i;
    for(i=0; i<len; i++) {
        srand(100);
        ((uint8_t *)(ptr))[i] = 2; 
    }
} 
```

packetbuf 方法 [http://dak664.github.com/contiki-doxygen/a01563.html#_details](http://dak664.github.com/contiki-doxygen/a01563.html#_details)

谁能解释我这些`packetbuf_clear(); header = (msg_header_t *)(packetbuf_dataptr()); data = (uint8_t *)(header + 1); random_data(data, MSG_LEN);`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T18:01:23.903

据我了解：

`packetbuf_dataptr()`分配足够的内存来保存数据包头、数据长度和有效负载。

`header = (msg_header_t *)(packetbuf_dataptr());`将指向标头的指针设置为该内存数组的开头。

`data = (uint8_t *)(header + 1);`将数据“有效负载”的开头设置为标头之后的第一个内存地址，`header + 1`这意味着`<address of header> + sizeof(msg_header_t)`

`random_data(data, MSG_LEN);`将一些随机的`MSG_LEN`字节数据放入有效负载中。

`hton_uint16(&header->data_len, MSG_LEN);`以网络字节顺序将数据段的长度写入数据包头`data_len`字段。

`packetbuf_set_datalen(sizeof(msg_header_t) + MSG_LEN);`将标头与其有效负载一起发送出去。

# shell - 如何在所有本地用户的帐户（即桌面、文档、图片、视频、音乐）中使用 vbscript 复制文件

> ID：12654936
> 
> 赞同：0
> 
> 时间：2012-09-29T17:40:27.237
> 
> 标签：shell, vbscript, special-folders

好的，所以我正在编写一个超酷的 vbscript/HTA 文件。我想做的就是

***在列表框中列出计算机中的所有本地用户名称（我已经可以这样做），然后对于列表框中的每个用户，将他们的桌面、我的文档、视频、图片、音乐复制到我选择的目标文件夹（比如 d :\备份目标)***

现在大部分脚本都在工作，我也知道我可以使用 &H5& 类型常量来访问我上面提到的 LOGGED-IN 用户（即运行脚本的人）的特殊文件夹。

现在我不知道其他用户的配置文件在哪里，它们可能在 c:\users\John （通常的 vista/win 7）或者它们可能在磁盘上的任何位置（也许 john 将他的配置文件移动到 d:)。

***所以我只需要知道如何告诉脚本将计算机上的所有用户配置文件复制到我选择的目的地。***

例如下面的代码复制当前登录用户的“我的图片”文件夹，如何修改它以复制所有用户的配置文件？

```
Const MY_PICTURES = &H27&
Set objShell = CreateObject("Shell.Application")
Set objFolder = objShell.Namespace(MY_PICTURES)
Set objFolderItem = objFolder.Self 
Wscript.Echo objFolderItem.Name & ": " & objFolderItem.Path 
```

任何帮助将不胜感激 ！！！！！！！！谢谢。

谢谢。

德顿王子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T14:13:45.960

你有两个选择：

1、从注册键“HKEY_USER\user SID\SOFTWARE\MICROSOFT\Windows\Current Version\Explorer\User shell 文件夹”中读取这些特殊文件夹的定义。使用 "winmgmts:\.\root\default:StdRegProv" 枚举键。

2、使用“wscript.shell”对象的“run”方法运行“rundll32.exe”。然后，您可以使用“LogonUser”API 函数获取令牌（如果您知道他的密码）并使用“ImpersonateLoggedOnUser”函​​数作为另一个用户配置文件运行。您确实需要修改现有代码以获取他的所有特殊文件夹。

# javascript - 在鼠标悬停时显示框

> ID：12654939
> 
> 赞同：1
> 
> 时间：2012-09-29T17:40:43.533
> 
> 标签：javascript, d3.js, tooltip, mouseover, force-layout

我从 d3.js 开始，我想知道当鼠标悬停在力导向图的节点上时显示包含文本（工具提示）的框的最简单方法。此外，此框中包含的文本必须为每个节点自定义（类似于`function(d){return d.fullName;})`）

这是我现在拥有的示例代码。

```
var node = vis.selectAll("g.node")
    .data(json.nodes)
    .enter().append("svg:g")
    .attr("class", "node"); 

node.append("circle")
    .attr("r", 12)
    .style("fill", "orange"); 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T04:05:22.457

通过框，您是指工具提示吗？在 Mike 的示例中，他使用了这个成语：

```
node.append("title")
    .text(function(d) { return d.fullName: }); 
```

（对于其他类型的元素（`div`仅 s ？）您可以只使用`element.setAttribute("title", "title");`。）

# java - 异常“远程对象实现非法远程接口”？

> ID：12654942
> 
> 赞同：16
> 
> 时间：2012-09-29T17:40:52.957
> 
> 标签：java, rmi

我在 Java 中使用 rmi。但是有一个 ExportException “远程对象实现非法远程接口”。

这是我的代码，有人可以帮助我吗？

```
public interface RemotePeer extends Remote {

    public abstract void displayInf(String inf);

    public abstract void exit();

    public abstract boolean isActive();
}

 public class Peer implements RemotePeer{
        public Peer(){}
        ....

        public static void main(String[] args) {
           Peer p=new Peer()
           RemotePeer remoteP=(RemotePeer) UnicastRemoteObject.exportObject(p, 0);
           Registry registry = LocateRegistry.getRegistry();
           }
} 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-09-29T17:52:59.743

接口中的每个方法都`Remote`必须能够抛出`RemoteException`. 你的界面应该是：

```
public interface RemotePeer extends Remote {

    public abstract void displayInf(String inf) throws RemoteException;

    public abstract void exit() throws RemoteException;

    public abstract boolean isActive() throws RemoteException;
} 
```

您可能想查看[RMI 教程](http://docs.oracle.com/javase/tutorial/rmi/overview.html)。

# java - Java中的委托与回调

> ID：12654943
> 
> 赞同：18
> 
> 时间：2012-09-29T17:40:53.250
> 
> 标签：java, design-patterns, delegates, callback

我对 Java 中的委托和回调术语有一些误解。

```
class MyDriver {

    public static void main(String[] argv){
        MyObject myObj = new MyObject();
        // definition of HelpCallback omitted for brevity
        myObj.getHelp(new HelpCallback () {
            @Override
            public void call(int result) {
                System.out.println("Help Callback: "+result);
            }
        });
    }
}

class MyObject {

    public void getHelp(HelpCallback callback){
        //do something
        callback.call(OK);
    }
} 
```

是回调还是委托（[委托和回调是否相同或相似？](https://stackoverflow.com/questions/290819/are-delegates-and-callbacks-the-same-or-similiar)）？

那么如何实现另一个呢？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-09-29T18:12:04.050

这是一个回调。[根据维基百科](http://en.wikipedia.org/wiki/Callback_%28computer_programming%29)：

> 在计算机编程中，回调是对作为参数传递给其他代码的一段可执行代码的引用。

那么让我们看一下可执行代码：

```
public void getHelp(HelpCallback callback){
    //do something
    callback.call(OK);
} 
```

这里，`callback`参数是对类型对象的引用`HelpCallback`。由于该引用是作为参数传入的，因此它是一个回调。

# 委托示例

委托由对象在内部完成 - 与调用方法的方式无关。例如，如果`callback`变量不是参数，而是实例变量：

```
class MyDriver {

    public static void main(String[] argv){
        // definition of HelpStrategy omitted for brevity
        MyObject myObj = new MyObject(new HelpStrategy() {
            @Override
            public void getHelp() {
                System.out.println("Getting help!");
            }
        });
        myObj.getHelp();
    }

}

class MyObject {
    private final HelpStrategy helpStrategy;

    public MyObject(HelpStrategy helpStrategy) {
        this.helpStrategy = helpStrategy;
    }

    public void getHelp(){
        helpStrategy.getHelp();
    }
} 
```

...然后就是代表团。

在这里，`MyObject`使用[策略模式](http://en.wikipedia.org/wiki/Strategy_pattern)。有两点需要注意：

1.  的调用`getHelp()`不涉及传递对可执行代码的引用。即这不是回调。
2.  从对象的公共接口或调用来看，`MyObject.getHelp()`调用这一事实`helpStrategy.getHelp()`并不明显。这种[信息隐藏](http://en.wikipedia.org/wiki/Information_hiding)在一定程度上是委托的特征。`MyObject``getHelp()`

另外值得注意的是该方法中缺少一个`// do something`部分`getHelp()`。当使用回调时，回调不做任何与对象行为相关的事情：它只是以某种方式通知调用者，这就是为什么`// do something`需要一个部分。然而，当使用委托时，方法的实际行为取决于委托——所以实际上我们最终可能需要两者，因为它们服务于不同的目的：

```
 public void getHelp(HelpCallback callback){
        helpStrategy.getHelp(); // perform logic / behavior; "do something" as some might say
        if(callback != null) {
            callback.call(); // invoke the callback, to notify the caller of something
        }
    } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-29T17:58:17.257

我认为“回调”是一种通用模式的名称，您可以在其中为您正在调用的模块提供一种让所述模块调用您的代码的方式。AC# 委托或 ObjC 委托对象（这两者是完全不同的野兽）或 Java 类实现回调接口是不同的、特定于平台的回调模式实现方式。（它们本身也可以被认为是模式。）其他语言或多或少有细微的不同。

上述“委托”的概念也类似于策略模式，其中委托可以被认为是一个。同样，Visitor 也是一种回调类型。（访问者也是处理每个访问项目的策略。）

所有这些都是使用对我来说很直观的定义，可能对其他人来说不是，因为“回调”或“委托”都不是正式术语，如果不参考之前有效的定义就讨论它们是没有意义的语境。因此，询问定义是什么毫无意义，因为据我所知，没有权威的定义。也就是说，这个问题的其他答案可能会说一些完全不同的东西。

我的建议是关注你的设计的优点——它是否达到了你的需要，不引入紧密耦合等等——而不是语义上的细节。当两种设计模式看起来相似时，它们可能同样可以用来实现相似的目标。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T17:58:45.057

您想要实现的是原始调用者和服务之间的双向通信，同时避免服务依赖于客户端。您用于该目标的模式通常取决于您的语言限制。您使用函数指针、闭包，或者，如果您没有这些，则使用回调对象（也可能被视为闭包）。

然后，对于相同或非常相似的模式，通常会有很多不同的名称。

# redis - ServiceStack 的 IRedisClientManager + Ninject - 使用 InSingletonScope？

> ID：12654945
> 
> 赞同：3
> 
> 时间：2012-09-29T17:41:02.487
> 
> 标签：redis, ninject, servicestack

我有一个 ASP.NET MVC 应用程序，我刚刚开始使用 ServiceStack 的 Redis 客户端。我使用 Ninject 作为我的 IoC 容器。目前我的绑定看起来像这样：

```
Bind<IRedisClientsManager>()
    .ToMethod(c => new BasicRedisClientManager("localhost:6379"))
    .InSingletonScope();

Bind<ICacheClient>().ToMethod(c => c.Kernel.Get<IRedisClientsManager>().GetCacheClient());
Bind<IRedisClient>().ToMethod(c => c.Kernel.Get<IRedisClientsManager>().GetClient()); 
```

我在应用程序启动时有效地创建了一个 BasicRedisClientManager 单例实例，用于在对 ICacheClient 或 IRedisClient 的任何请求中进行实例化。对于典型的用例，我在这里所做的是否正确？提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-30T06:00:59.167

是的，**BasicRedisClientManager**和**PooledRedisClientManager**都是线程安全的，并且设计为用作单例。两者之间的区别在于 BasicRedisClientManager 每次返回都会创建一个新连接，而 PooledRedisClientManager 维护一个打开的 Redis 连接池。

# facebook - facebook应用程序在heroku错误中

> ID：12654948
> 
> 赞同：0
> 
> 时间：2012-09-29T17:41:18.553
> 
> 标签：facebook, git, heroku

我正在创建一个 facebook 应用程序，并且我是第一次使用这个 Heroku，因为我按照链接[说明](https://devcenter.heroku.com/articles/facebook)中提供的程序进行操作。在部署到 Heroku 时，指令的第三步，即将修改后的代码推送到 Heroku

`git push heroku master`

它引发以下错误

`To git@heroku.com:xxxxxxxx.git ![rejected] master -> master(non-fast - forward) error: failed to push some refs to 'git@heroku.com:xxxxxxxxxx.git' To prevent you from losing history, non-fast-forward updates were rejected Merge the remote changes (e.g 'git pull') before pushing again. See the 'Note about fast-forwards' sections of 'git push --help' for details.`

请给我解决办法！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T17:48:06.273

那是因为`git`。如果您的语言环境版本已过时，则无法推送到服务器。

最简单的方法是先拉：

```
git add -A
git commit -m "add my locale files"
git pull heroku master
# All goes well or you have a merge conflict (if so, you resolve conflicts). Then:
git push heroku 
```

# google-chrome-extension - 无法让简单的 chrome 扩展示例工作，“使页面变红”的示例

> ID：12654949
> 
> 赞同：0
> 
> 时间：2012-09-29T17:41:29.713
> 
> 标签：google-chrome-extension

在 [http://developer.chrome.com/extensions/samples.html](http://developer.chrome.com/extensions/samples.html)第二个示例标题为：
“没有图标的浏览器操作使页面变红”

我下载了 3 个文件（清单、js、图标）并安装了扩展示例.

当我运行它时，我会在栏上看到一个拼图图标，带有每秒递增的徽章。
当我单击图标时 - 什么都没有
当我单击页面时 - 什么也没有
，我也看不到在任何地方使用所提供的图标。

我不知道这是代码问题还是使用问题。

清单.json：

```
{
  "name": "A browser action with no icon that makes the page red",
  "version": "1.0",
  "background": { "scripts": ["background.js"] },
  "permissions": [
    "tabs", "http://*/*"
  ],
  "browser_action": {
    "name": "Make this page red",
    "icons": ["icon.png"]
  },
  "manifest_version": 2
} 
```

背景.js 文件

```
chrome.browserAction.onClicked.addListener(function(tab) {
  chrome.tabs.executeScript(
      null, {code:"document.body.style.background='red !important'"});
});

chrome.browserAction.setBadgeBackgroundColor({color:[0, 200, 0, 100]});

var i = 0;
window.setInterval(function() {
  chrome.browserAction.setBadgeText({text:String(i)});
  i++;
}, 10); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T21:46:35.050

这是[如何使 Google Chrome 扩展示例工作的副本？](https://stackoverflow.com/questions/12303486/how-to-make-google-chrome-extension-sample-work/12305485#12305485)

请看下面我的回答：

如果您打开示例 zip... 找到 backgrond.js... 编辑。找到写着：

```
null, {code:"document.body.style.background='red !important'"}); 
```

并删除“！重要”。所以它应该是：

```
null, {code:"document.body.style.background='red'"}); 
```

这就对了。只需保存并重新加载扩展，应该可以工作（除非页面有一个 !important 标志设置为背景）。

恐怕我不知道为什么“！important”标签不起作用，但我从来没有能够让它在扩展中工作。希望这里的其他人能够给出解释，也许可以解决。

# android - Android MediaPlayer：删除曲目之间的时间

> ID：12654953
> 
> 赞同：1
> 
> 时间：2012-09-29T17:41:49.600
> 
> 标签：android, loops, time, media-player

在我的 android 应用程序中，我只使用 MediaPlayer 播放循环声音。我正在尝试循环流动，消除曲目结束和下一次阅读开始之间的时间。我尝试使用 setLooping 函数，但声音之间有一段时间。我试过`setOnCompletionListener`这样的功能：

```
MP.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {
    @Override
    public void onCompletion(MediaPlayer mp) {
        MP.start();     
    }
}); 
```

但是，声音之间仍有几秒钟的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T18:07:14.960

*显然*这是不可能的`MediaPlayer`; 自 2009 年以来，存在一个要求无缝播放[的开放错误。](http://code.google.com/p/android/issues/detail?id=3461)

[Android：MediaPlayer 无缝或无缝视频播放](https://stackoverflow.com/questions/3877119/android-mediaplayer-gapless-or-seamless-video-playing)也有几个关于该主题的非答案。

# php - PHP将编号字符串列表转换为数组

> ID：12654954
> 
> 赞同：1
> 
> 时间：2012-09-29T17:42:09.587
> 
> 标签：php, regex, arrays

使用 PHP，如果您有一个`string`which 点后可能有也可能没有空格，例如：

```
"1\. one 2.too 3\. free 4\. for 5.five " 
```

您可以使用什么函数来创建`array`如下：

```
array(1 => "one", 2 => "too", 3 => "free", 4 => "for", 5 => "five") 
```

键是列表项编号（例如`array`上面没有`0`）

我认为需要一个正则表达式，也许使用`preg_split`或类似的？我不擅长正则表达式，所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T17:53:35.433

关于什么：

```
$str = "1\. one 2.too 3\. free 4\. for 5.five ";
$arr = preg_split('/\d+\./', $str, -1, PREG_SPLIT_NO_EMPTY);
print_r($arr); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-29T18:15:17.483

我得到了一个快速破解，它似乎对我来说工作正常

```
 $string = "1\. one 2.too 3\. free 4\. for 5.five ";

    $text_only = preg_replace("/[^A-Z,a-z]/",".",$string);
    $num_only = preg_replace("/[^0-9]/",".",$string);

    $explode_nums = explode('.',$num_only);
    $explode_text = explode('.',$text_only);

    foreach($explode_text as $key => $value)
    {
        if($value !== '' && $value !== ' ')
        {
            $text_array[] = $value;
        }
    }

    foreach($explode_nums as $key => $value)
    {
        if($value !== '' && $value !== ' ')
        {
            $num_array[] = $value;
        }
    }

    foreach($num_array as $key => $value)
    {
        $new_array[$value] = $text_array[$key];
    }

    print_r($new_array); 
```

测试一下，让我知道是否工作正常

# javascript - 有没有办法使用命令行将字符串传递给 html javascript？

> ID：12654957
> 
> 赞同：2
> 
> 时间：2012-09-29T17:42:25.060
> 
> 标签：javascript, html, string, command-line

我是初学者！我需要这样的东西：

```
C:\MyHtmlPage.html "string_that_I_need_to_pass_to_the_javascript_code_inside_MyHtmlPage" 
```

并将“string_that_I_need_to_pass_to_the_javascript_code_inside_MyHtmlPage”放入：

```
var externalstring 
```

有类似的事情吗？谢谢！

编辑：

我找到了方法！在 DOS 命令行中，我写：

```
start firefox "file:///C:/MyHtmPage.html?externalstring=string_that_I_need_to_pass_to_the_javascript_code_inside_MyHtmlPage" 
```

在javascript中我添加了这个（http://papermashup.com/read-url-get-variables-withjavascript/）：

```
var externalstring = getUrlVars()["externalstring"];
alert(externalstring);

function getUrlVars() {
 var vars = {};
 var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, 
 function(m,key,value) {
     vars[key] = value;
 });
 return vars;
} 
```

谢谢大家的建议！=)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T18:07:12.900

您可以使用这样的查询参数：

```
C:\MyHtmlPage.html?parm=string_that_I_need_to_pass_to_the_javascript_code_inside_MyHtmlPage 
```

然后，在您的页面 javascript 中，您可以使用`window.location.search`检索 parm=xxxx 片段并根据需要解析出 xxx。如果需要，此格式允许您传递多个不同的参数。这是将多个参数嵌入 URL 的通用方式。然后可以通过页面中的 javascript 或如果 URL 来自 Web 服务器，则由服务器解析它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T17:44:50.440

不，但是如果您在浏览器中加载它，您可以使用[片段标识符](http://en.wikipedia.org/wiki/Fragment_identifier)

像这样：

```
<a href="file:///C:/MyHtmPage.html#string_that_I_need_to_pass_to_the_javascript_code_inside_MyHtmlPage">CLICKY</a> 
```

然后在javascript中：

```
console.log(window.location.hash); 
```

# json - 在 Backbone.js 中解析 url

> ID：12654963
> 
> 赞同：0
> 
> 时间：2012-09-29T17:42:37.257
> 
> 标签：json, parsing, url, backbone.js

我是 Backbones.js 的新手，我试图获取我的 JSON url 并正确解析它们。

这是我的代码：

```
window.Post = Backbone.Model.extend({
initialize: function(options) {
    this.id = options.id;
},
url: function() {
    return 'api/get_post/?post_type=movies&id=' + this.id;
},
parse : function(response) {
    return response.posts;
},
});

window.Posts = Backbone.Collection.extend({

model: Post,
defaults: {
   model: Post,
},
url: "api/get_recent_posts/?post_type=movies",

parse : function(response) {
    return response.posts;
},

}); 
```

似乎对两者的解析会覆盖彼此或其他东西。当我从 Post 类中删除 parse 选项时，我会从集合中获得完整的响应，但不会从模型中获得。

有没有关于如何为不同的儿子层次结构设置解析的明确例子？我的 JSON 结果在进入实际数据之前状态良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T00:54:39.170

我从未使用过bones.js，但也许这些示例会有所帮助。

我认为您想要做的是摆脱`parse()`收藏中的功能。这假设由于它是一个 Post 集合，因此您的数据将以 Post JSON 对象的数组`[{id:'1', 'sub':{data}},{id:'2', 'sub':{data}},{id:'3', 'sub':{data}}]`或类似的形式出现。

如果您的 Post 模型有子模型或集合，那么您的模型`parse()`将采用子对象属性名称并对其进行处理。

```
// In Post Model definition
parse:function(response) {
    if (response.sub) {
        // create some model or collection etc.
    }
} 
```

`parse:true`当您进行集合提取时，您可能必须传递一个选项。

我按照这些思路发布了一些内容，可能会帮助您了解如何在 fetch 调用上实例化子模型。

[Backbone.js：一次请求加载多个集合](https://stackoverflow.com/questions/12296221/backbone-js-load-multiple-collections-with-one-request/12299690#12299690)

[铸造/初始化主干模型的子模型](https://stackoverflow.com/questions/12350218/cast-initialize-submodels-of-a-backbone-model/12354034#12354034)

我希望这有帮助。

# algorithm - 在有向图中找到最大边不相交路径数

> ID：12654964
> 
> 赞同：0
> 
> 时间：2012-09-29T17:43:00.290
> 
> 标签：algorithm, graph, matching, directed-acyclic-graphs

如何在有向图中找到最大边不相交路径数。该图未加权。假设图表就像跟随...

`1 - 2 , 1 - 3 , 4 - 1 , 5 - 1`

所以图中有两条边不相交的路径，`4->1->2`并且`5->1->3`

如何使用匹配算法解决问题？

我的问题是......假设我有一个有向图（可能包含循环）。如果我在一个节点上放置一个“守卫”，它可以从那个节点开始它的旅程。守卫可以多次访问任何城市，即使是其他守卫已经访问过的城市。目标是找到最少数量的守卫来保护所有节点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T19:06:26.313

*计算所有路径：*

*   从图中的所有边开始作为可用边的列表。
*   虽然仍有可用的边，但请继续提取路径并计算它们。

*提取路径：*

*   删除第一个（或任何）可用边缘并将其称为当前路径。
*   尝试将当前路径的起点或终点与可用边的终点或起点相匹配。
*   如果没有可用的边匹配，则此路径结束。
*   如果可用边可以加长路径，则将其添加到当前路径，从可用边列表中删除该边，并继续尝试加长路径。

# c++ - 如何同时运行两个线程？Qt C++

> ID：12654967
> 
> 赞同：0
> 
> 时间：2012-09-29T17:43:26.377
> 
> 标签：c++, multithreading, qt, queue, simultaneous

我的任务是模拟装瓶过程。

有一个人负责将“瓶子”排成一列。例如他的速度是每秒1瓶。我用线程做到了这一点。但问题是必须有第二个线程，这将是一台机器，负责取出这些“瓶子”并将它们出列，然后将它们放入另一个队列。

我通过在“主”函数中创建队列和线程来做到这一点。然后我启动线程，并作为参数进入我刚刚创建的队列。这样，线程（在本例中为人）将把“瓶子”放入作为参数传递的队列中。

然后当程序运行时，它确实可以工作，但不是应该的。第一个线程（人）开始将元素放入队列，当它完成时，第二个线程（机器）开始删除队列中的元素。

我想要我的程序做的是同时执行这两个任务，这意味着一旦人（第一个线程）开始将元素放入队列中，机器（第二个线程）就开始从队列中删除它们.

这是我的一些代码：

```
int main(int argc, char *argv[])
{
QCoreApplication a(argc, argv);

Queue *queue1 = new Cola (""); // First queue
Thread *Person = new Thread (); // Person who is in charged of putting bottles
Thread *Machine = new Thread (); // Machine in charged of removing elements of the queue

Person->queue(queue1);
Machine->dequeue(queue1);

system("Pause");
return 0;

return a.exec();
} 
```

这是线程的一些代码

```
void Thread::queue(queue *c)
{

for (int i = 0; i < 10; i++)
{
    c -> push (i);
    cout << "Inserting to the queue the: " << i << endl;
    this -> sleep (1);
}
}

void Thread::dequeue(queue *c)
{

while (!c -> empty())
{
    c -> pop ();
    this -> sleep (2);
}
} 
```

关于这两个线程如何同时工作的任何想法？感谢您的帮助和想法，我非常感谢他们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T09:50:18.613

您要实现的是生产者-消费者。我的建议是完全忘记您所做的并开始阅读文档：[Qt](http://qt-project.org/doc/qt-4.8/threads.html)中的线程支持，您已证明完全跳过了该文档。

还可以考虑阅读这个，这是Qt[中生产者-消费者的示例](http://doc-snapshot.qt-project.org/4.8/threads-waitconditions.html)，几乎与您需要的相同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T09:42:46.270

您实际上根本没有使用线程。我从未使用过 Qt，所以我不能（或不会）尝试修复整个程序，但根据文档，您必须[启动](http://doc.qt.digia.com/4.7-snapshot/qthread.html#start)一个线程才能使其运行。然后它将执行它的[运行](http://doc.qt.digia.com/4.7-snapshot/qthread.html#run)方法，你必须实现它——你的循环可能应该进入这个“运行”方法。

您正在做的是创建休眠线程对象，然后您只需从主线程调用线程函数。该线程永远不会运行，并且这些方法在您的主线程上按顺序运行。

为了正确操作，您可能必须保护对队列的访问，因此一次只能使用一个线程（除非队列是线程安全的，但大多数库都没有尝试这样做）。对于一些额外的研究，像您正在制作的消息传递队列通常受到条件锁的保护，因为它允许诸如“等到队列中有东西”之类的操作。

# c# - async 和 await 是否专门用于基于 GUI 的异步编程？

> ID：12654968
> 
> 赞同：38
> 
> 时间：2012-09-29T17:43:30.963
> 
> 标签：c#, .net, async-await

我一直在阅读 C# 中的 new`async`和`await`运算符，并试图弄清楚它们在哪些情况下可能对我有用。我研究了几篇 MSDN 文章，下面是我在字里行间读到的内容：

您可以使用`async`Windows 窗体和 WPF 事件处理程序，因此它们可以执行冗长的任务，而不会在执行大部分操作时阻塞 UI 线程。

```
async void button1_Click(object sender, EventArgs e)
{
    // even though this call takes a while, the UI thread will not block
    // while it is executing, therefore allowing further event handlers to
    // be invoked.
    await SomeLengthyOperationAsync();
} 
```

使用`await`must be的方法`async`，这意味着`async`在代码中某处使用任何函数最终会强制调用序列中的所有方法从 UI 事件处理程序一直到最低级别的`async`方法`async`。

换句话说，如果您创建一个具有普通 good old`ThreadStart`入口点的线程（或具有 good old 的控制台应用程序`static int Main(string[] args)`），那么您不能使用`async`and`await`因为在某一时刻您必须使用`await`, 并制作使用它的方法`async`，并且因此，在调用方法中，您还必须使用`await`并制作该方法`async`，依此类推。但是，一旦您到达线程入口点（或`Main()`），就没有调用者`await`可以让其控制。

所以基本上你不能使用`async`并且`await`没有使用标准 WinForms 和 WPF 消息循环的 GUI。我想这一切确实是有道理的，因为 MSDN 声明`async`编程并不意味着多线程，而是使用 UI 线程的空闲时间；当使用控制台应用程序或具有用户定义的入口点的线程时，需要多线程来执行异步操作（如果不使用兼容的消息循环）。

我的问题是，这些假设是否准确？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-29T17:47:51.673

> 所以基本上你不能使用 async 和 await 如果没有使用标准 WinForms 和 WPF 消息循环的 GUI。

绝对*不是*这样的。

在 Windows 窗体和 WPF 中，`async`/`await`具有在您等待的异步操作完成时返回 UI 线程的方便属性，但这并不意味着它的唯一目的。

如果异步方法在线程池线程上执行 - 例如在 Web 服务中 - 那么延续（异步方法的其余部分）将简单地在*任何*线程池线程中执行，并适当地保留上下文（安全等）。这对于减少线程数量仍然非常有用。

例如，假设您有一个高流量 Web 服务，它主要代理对其他 Web 服务的请求。它大部分时间都在等待其他事情，无论是由于网络流量还是其他服务（例如数据库）的真实时间。您不应该为此需要很多线程 - 但是通过阻塞调用，您自然而然地最终每个请求都有一个线程。使用 async/await，您最终会得到很少的线程，因为很少有请求实际上需要在任何一个时间点为它们执行任何工作，即使有*很多*“正在运行”的请求。

问题是异步/等待最容易用 UI 代码*演示*，因为每个人都知道正确使用后台线程或在 UI 线程中做太多工作的痛苦。这并不意味着它是该功能唯一有用的地方——远非如此。

各种服务器端技术（例如 MVC 和 WCF）已经支持异步方法，我希望其他技术也能效仿。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-29T18:01:39.953

> 使用 await 的方法必须是异步的，这意味着在代码中某处使用任何异步函数最终会强制从 UI 事件处理程序调用序列中的所有方法，直到最低级别的异步方法也是异步的。

不正确 - 标记为 async 的方法只是意味着它们可以使用 await，但这些方法的调用者没有限制。如果方法返回`Task`，或者`Task<T>`他们可以使用`ContinueWith`或您可以在 4.0 中对任务执行的任何其他操作

一个很好的非 UI 示例是 MVC4 AsyncController。

归根结底，async/await 主要是为了让编译器重写，这样你就可以编写看起来像同步的代码，并避免像在添加 async/await 之前必须做的所有回调。它还有助于处理 SynchronizationContext，这对于具有线程关联（UI 框架、ASP.NET）的场景很有用，但即使没有这些，它仍然很有用。例如， Main 总是可以做`DoStuffAsync().Wait();`的。:)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-29T19:02:14.960

> 我的问题是，这些假设是否准确？

不。

> 您可以将异步用于 Windows 窗体和 WPF 事件处理程序，因此它们可以执行冗长的任务，而不会在执行大部分操作时阻塞 UI 线程。

真的。对于包括 Silverlight 和 Windows 应用商店在内的其他 UI 应用程序也是如此。

对于 ASP.NET*也是*如此。在这种情况下，未阻塞的是*HTTP 请求线程。*

> 使用 await 的方法必须是异步的，这意味着在代码中某处使用任何异步函数最终会强制从 UI 事件处理程序调用序列中的所有方法，直到最低级别的异步方法也是异步的。

这是最佳实践（“`async`一直向下”），但并非严格要求。您*可以*阻止异步操作的结果；许多人选择在控制台应用程序中执行此操作。

> 一个普通的好旧 ThreadStart 入口点

嗯...我确实不得不对“普通的好老人”提出异议。正如我在博客上解释的那样，[`Thread`这几乎是您进行后台操作的*最糟糕*](http://blog.stephencleary.com/2010/08/various-implementations-of-asynchronous.html)的选择。

我建议您查看我对[and的](http://blog.stephencleary.com/2012/02/async-and-await.html)[介绍`async``await`](http://blog.stephencleary.com/2012/02/async-and-await.html)，并跟进[`async`/ `await`FAQ](http://blogs.msdn.com/b/pfxteam/archive/2012/04/12/10293335.aspx)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-02T20:08:29.837

1.  async-await 只是 Task 类操作的包装器，它是所谓的 Tasks Parallel Library - TPL 的一部分（在 async-await 自动代码生成技术之前发布。）
2.  所以事实上你不能在 async - await 中使用对 UI 控件的任何引用。
3.  通常，async-await 是任何 Web 和服务器关系、加载资源、sql 的强大工具。它适用于具有活动 UI 的智能等待数据。
4.  典型的 TPL 应用：从简单的大循环到基于共享数据的复杂计算中的多阶段并行计算（ContinueWith 等）

# zend-framework - Nginx + PHP5-FPM 破坏了一些适用于 Apache + PHP5 的 Web 应用程序

> ID：12654972
> 
> 赞同：1
> 
> 时间：2012-09-29T17:44:04.380
> 
> 标签：zend-framework, nginx, php

我有一个带有 Debian 6.0.5 的 vps，使用[dotdeb](http://www.dotdeb.org/)中的软件包安装了 Nginx + PHP5-FPM，并使用博客介绍的[安装脚本](http://github.com/aatishnn/lempstack)。对我的 wordpress 和 phpmyadmin 来说，一切都像魅力一样。

现在，我想将 beanstalkd 安装到 vps 中，并决定使用一些 PHP Web 应用程序来管理 beanstalkd。我已经安装了[phpBeanstalkdAdmin](http://mnapoli.github.com/phpBeanstalkdAdmin/)和[Beanstalkd 控制台](https://github.com/ptrofimov/beanstalk_console)。两者都未能正常运行。

phpBeanstalkdAdmin 返回一个类似的页面

```
phpBeanstalkdAdmin
Home
About
layout()->content?> 
```

配置服务器后，Beanstalkd 控制台显示一个空管。在此之前，错误消息也丢失了。

当我将两者都安装在运行 XAMPP（Apache + PHP5）的本地机器上，并将配置指向我的 vps 的 beanstalkd 时，它可以工作。此外，与在 Nginx + PHP5-FPM 上运行时不同，配置 Beanstalkd 控制台之前会显示正确的错误消息。

我尝试使用 XDebug，但在单步执行这两个 Web 应用程序时没有发现任何错误或任何错误。两个 Web 应用程序都使用 Zend 框架。我没有找到在 Nginx + PHP5-FPM 上运行 Zend Framework 所需的任何特定设置，并尝试了各种基本配置的添加，例如修复`Path_Info`&`PHP_SELF`

我真的很想在我的 vps 上使用 Nginx 而不是 Apache，因为我有一个小盒子。

非常感谢有关此问题的任何见解或指南。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T18:56:40.677

检查两者上 PHP 的值`short_open_tag`（应该在 phpinfo 中列出）。我的猜测是你需要为你的 VPS 打开它。

# java - 将 XML 文件导入 java 应用程序

> ID：12654973
> 
> 赞同：0
> 
> 时间：2012-09-29T17:44:13.513
> 
> 标签：java, swing, file-io

我想将一个 XML 文件导入我的 Java 应用程序。这是功能：

```
static void lireFichier(String fichier) throws Exception
{
    SAXBuilder sxb = new SAXBuilder();
    document = sxb.build(new File(fichier));
    racine = document.getRootElement();
} 
```

这就是我所说的

```
lireFichier("exemple.xml"); 
```

这是 Swing 应用程序的一部分。我希望用户能够指定要打开的 XML 文件。我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T19:33:53.317

这确实是一个基本概念，可以通过最少的研究轻松解决。

您需要花一些时间阅读[使用 JFC/Swing 创建 GUI](http://docs.oracle.com/javase/tutorial/uiswing/index.html)，尤其是[如何使用文件选择器](http://docs.oracle.com/javase/tutorial/uiswing/components/filechooser.html)。

我还推荐一个关于[java.io.File](http://docs.oracle.com/javase/7/docs/api/java/io/File.html) API 的速成课程......

```
JFileChooser fc = new JFileChooser();
fc.setDialogTitle("Open stuff");
fc.addChoosableFileFilter(new FileFilter() {

    @Override
    public boolean accept(File f) {
        return f.getName().toLowerCase().endsWith(".xml") || f.isDirectory();
    }

    @Override
    public String getDescription() {
        return "XML Document (*.xml)";
    }
});

switch (fc.showOpenDialog(null)) {
    case JFileChooser.APPROVE_OPTION:
        File file = fc.getSelectedFile();
        lireFichier(file.getPath()); 
        break;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T18:16:49.963

**-**它很简单，只需传递文件所在`path`的`File`as String即可`XML`。

**例如：**

`File f = new File("d:\\Myfolder\\vivek.xml");`

**-**您还可以随时使用以下易于使用的方法`APIs`来解析 XML。

*   `JAXP & JAXB`

*   `CASTOR`

# wordpress - WordPress page.php 与 index.php 竞争

> ID：12654980
> 
> 赞同：1
> 
> 时间：2012-09-29T17:45:08.490
> 
> 标签：wordpress, file, themes, wordpress-theming, hierarchy

**背景：**我正在为 WordPress 开发主题。我是菜鸟。我已经完成了多个关于如何开发主题的教程。我认为我目前正在处理的主题存在页面竞争问题。我正在 MAMP 上构建它（如果这很重要）。现在这个新主题并不多。我刚刚开始并制作了我认为需要的所有模板文件。除了“index.php”和“style.css”之外的所有内容都是空白的。函数文件中也没有任何内容。页眉页脚和菜单的所有信息目前都在“index.php”中。

**问题：**当我在主题文件夹中包含文件“page.php”时，页面上没有加载任何内容。我的意思不仅仅是视觉上的。模板中的任何元素都不会出现在页面上。我在主题文件夹中也有“index.php”。当从文件夹中删除“page.php”时，主题会按原样加载所有内容。根据[WordPress Hierarchy](http://codex.wordpress.org/Template_Hierarchy)，我的理解是在页面模板之前调用索引。我确实计划使用页面。所以在我看来，“page.php”正在与 index.php 竞争并破坏模板。

**问题：** “page.php”是“index.php”的竞争对手吗？我该如何解决它，以免破坏我的主题？为什么它会在我的主题上而不是在其他主题上这样做？

**我试过的：**

*   将“index.php”的内容复制到“page.php”中。然后主题按预期加载，但我预计这会导致问题。
*   将页面模板留空，索引模板充满代码，不会产生任何结果。将索引留空且页面充满代码会导致主题加载。
*   从另一个主题复制“page.php”。主题破裂。从另一个主题复制索引。还是坏了。
*   更改 CSS 只是为了确保我没有任何导致这些元素不出现的 CSS。不过，当我使用萤火虫或查看源代码时，它们甚至都不会出现。

**我读过的内容：**我已经完成了作业来尝试解决问题，而无需在堆栈上提出另一个问题，但我似乎找不到其他人遇到同样的问题（这只让我认为这可能是显而易见的事情我做错了，但因为我是菜鸟，所以我错过了它或其他什么）。我已经完整阅读了所有这些内容：

*   [堆栈上的类似问题](https://stackoverflow.com/questions/12435757/contents-of-page-php-does-not-show-in-wordpress)

*   [关于页面层次结构的 WordPress 论坛](http://wordpress.org/support/topic/pagephp-vs-indexphp)

*   [我已经仔细检查了 WordPress Codex](http://codex.wordpress.org/Template_Hierarchy)

*   我已经完成了几乎所有你能想到的谷歌搜索......但无济于事。

非常感谢您对此事的任何帮助。最近这里是 index.php 的内容：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
        <title>WordPress Training Wheels</title>

        <link href="<?php bloginfo('stylesheet_url'); ?>" rel="stylesheet" type="text/css" />
        <link href='http://fonts.googleapis.com/css?family=Dancing+Script:400,700' rel='stylesheet' type='text/css'>
    </head>

    <body>

        <div id="container" class="container_16">

            <div id="header" class="grid_16"><!-- Header Begins Here -->
                <h1><a href="<?php bloginfo('url'); ?>"><?php bloginfo('name'); ?></a></h1>
                <h2><?php bloginfo('description'); ?></h2>
                <?php
                wp_nav_menu(
                        array(
                            'theme_location' => 'top_header',
                            'container' => 'div',
                            'container_id' => 'top-menu',
                            'menu_class' => 'top-menu-list',
                            'fallback_cb' => 'false'
                ));
                ?>
            </div>

            <?php
            wp_nav_menu(
                    array(
                        'theme_location' => 'bottom_header',
                        'container' => 'div',
                        'container_id' => 'menu',
                        'menu_class' => 'bottom-menu-list'
            ));
            ?>

            <div id="content">

                <div class="sidebar left grid_3"><!-- Left Sidebar Begins Here -->
                    <h4>Sidebar Header</h4>
                    <?php if (!function_exists('dynamic_sidebar') || !dynamic_sidebar('Left Sidebar') ) : ?> 
                        <h3 class="widget-title">Categories</h3>  
                        <ul>  
                            <?php wp_list_categories(); ?>  
                        </ul>  
                        <h3 class="widget-title">Archives</h3>  
                        <ul>  
                            <?php wp_get_archives(array('type' => 'monthly')); ?>  
                        </ul>  
                    <?php endif; ?> 
                </div>

                <div id="middle-column" class="grid_6"><!-- Main Content Begins Here -->
                    <h3>Training Wheels Lesson 1</h3>
                    <p><img src="<?php bloginfo('template_directory'); ?>/images/training-wheels.jpg" width="426" height="142" alt="Training Wheels" /></p>
                </div>

                <div class="sidebar right grid_3"><!-- Right Sidebar Begins Here -->
                    <h4>Sidebar Header</h4>
                    <?php if (!function_exists('dynamic_sidebar') || !dynamic_sidebar('Right Sidebar') ) : ?>  
                        <h4>No Widgets added</h4>  
                        <p>Please login and add some widgets to this sidebar</p>  
                    <?php endif; ?> 
                </div>

                <div style="clear:both;"></div>

            </div><!-- Content Ends Here -->

            <div id="footer"><!-- Footer Content Begins Here -->
                <p>&copy; Wordpress Training Wheels, by wpbedouine</p>
            </div>

        </div>

    </body>

</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T17:29:30.290

经过大量搜索，我相信我已经找到了解决方案。主题从未使用过“home.php”，因为我在顶部的评论中没有重要的一行。我补充说：

```
<?php
/*
Template Name: Front Page
*/
?> 
```

到“home.php”的顶部，然后进入 wp-admin 并单击页面>所有页面>主页。然后我在页面编辑器的右侧找到了一个名为“模板”的下拉列表项。我将其从“默认模板”更改为“首页”。

我想我阅读层次结构的方式让我假设 WordPress 会自动使用“home.php”或“front-page.php”作为主页的模板。显然这是一个不正确的假设，因为在评论中没有这行并告诉它要使用什么模板，WordPress 只会使用 page.php 作为模板。

至少，在我看来是这样的。任何想改进此答案或进行更正的人请这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T20:21:02.337

只是一个想法，但是您的主页可以设置为页面而不是博客吗？如设置>阅读。[http://codex.wordpress.org/Creating_a_Static_Front_Page](http://codex.wordpress.org/Creating_a_Static_Front_Page)

否则，我不明白为什么您的主页会使用 page.php 而不是 index.php。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-07T14:59:42.780

下面可能会有所帮助。

如果您同时设置了主页和博客页面，那么 wordpress 使用 index.php 作为博客，使用 front-page.php 作为您设置的主页。以防万一，只设置了主页并且没有创建front-page.php，它只使用index.php

# c# - 如何编写正确的正则表达式来获取文本？

> ID：12654993
> 
> 赞同：2
> 
> 时间：2012-09-29T17:46:14.183
> 
> 标签：c#, regex

我来自服务的一些 html 响应

```
<style> .transcription, .trsc{line-height:19px; padding-left:20px; font-family:Lucida Sans Unicode; padding-right:5px;} </style><div id="shView"> <div class="cforms_result" id="cforms_result1"> <div class="ref_cform" onclick="javascript:GetFullWordCBK('1', 'wordER');"><span class="fsform_link"><a href="javascript:;" onclick="javascript:GetFullWordCBK('1', 'wordER');"><img src="/images/common/owl_ico16.gif" width="19" height="19" border="0"></a><a href="javascript:;" onclick="javascript:GetFullWordCBK('1', 'wordER');"> Спряжение </a></span><span class="ref_source">mother<wrs><span class="sforms_src"><span class="w_des">Infinitive</span><b>mother</b><br><span class="w_des">Past Indefinite</span><b>mothered</b><br><span class="w_des">Participle II</span><b>mothered</b><br><span class="w_des">Participle I</span><b>mothering</b></span></wrs></span>&nbsp;<span class="ref_info"></span>, <span class="ref_psp">Глагол</span></div> <div class="tr_pr"><span class="transcription">[ˈmʌðə]</span><span class="pronunciation"><a href="javascript:;" class="pbf_s" id="lnkGtTr1" onclick="javascript:ListenWord(this,'mother',1,'play');"><img src="/images/common/vol_on.gif" align="absmiddle" border="0" id="imgGtTr1"><span> powered by <img src="/images/common/logoforvo.gif" width="59" height="17" border="0" hspace="5" align="absmiddle" style="cursor:point; cursor:hand;" onclick="window.open('http://ru.forvo.com/');"></span></a><span class="loadFrv" id="loadFrv1"><img hspace="10" src="/images/common/al_fullWR.gif" align="absmiddle"></span><span style="width:20px; height:17px;" class="pbf_s" id="speaker_on1"><span> powered by <img src="/images/common/logoforvo.gif" width="59" height="17" border="0" hspace="5" align="absmiddle" style="cursor:point; cursor:hand;" onclick="window.open('http://ru.forvo.com/');"></span></span></span></div> <div id="translations" onclick="javascript:GetFullWordCBK('1', 'wordER');"> <ol> <li><span class="ref_result">относиться по-матерински<wrs><span class="sforms_src"></span></wrs></span> <span class="ref_info"></span></li> </ol> </div> </div><script> $('.sforms_src').filter(function(index) { return $(this).html().length == 0;}).remove();//getPrLink('mother ');//$('#speaker_on').unbind('click','ShowFullWRefERRE')//$('#speaker_on').click(function(){alert("не открывать окно расширеной справки");}); </script><div class="cforms_result" id="cforms_result2"> <div class="ref_cform" onclick="javascript:GetFullWordCBK('2', 'wordER');"><span class="fsform_link"><a href="javascript:;" onclick="javascript:GetFullWordCBK('2', 'wordER');"><img src="/images/common/owl_ico16.gif" width="19" height="19" border="0"></a><a href="javascript:;" onclick="javascript:GetFullWordCBK('2', 'wordER');"> Склонение </a></span><span class="ref_source">mother<wrs><span class="sforms_src"><span class="w_des">Singular</span><b>mother</b><br><span class="w_des">Plural</span><b>mothers</b></span></wrs></span>&nbsp;<span class="ref_info"></span>, <span class="ref_psp">Существительное</span></div> <div class="tr_pr"><span class="transcription">[ˈmʌðə]</span><span class="pronunciation"><a href="javascript:;" class="pbf_s" id="lnkGtTr2" onclick="javascript:ListenWord(this,'mother',2,'play');"><img src="/images/common/vol_on.gif" align="absmiddle" border="0" id="imgGtTr2"><span> powered by <img src="/images/common/logoforvo.gif" width="59" height="17" border="0" hspace="5" align="absmiddle" style="cursor:point; cursor:hand;" onclick="window.open('http://ru.forvo.com/');"></span></a><span class="loadFrv" id="loadFrv2"><img hspace="10" src="/images/common/al_fullWR.gif" align="absmiddle"></span><span style="width:20px; height:17px;" class="pbf_s" id="speaker_on2"><span> powered by <img src="/images/common/logoforvo.gif" width="59" height="17" border="0" hspace="5" align="absmiddle" style="cursor:point; cursor:hand;" onclick="window.open('http://ru.forvo.com/');"></span></span></span></div> <div id="translations" onclick="javascript:GetFullWordCBK('2', 'wordER');"> <ol> <li><span class="ref_result">мать<wrs><span class="sforms_src"></span></wrs></span> <span class="ref_info">f</span></li> <li><span class="ref_result">родительский элемент<wrs><span class="sforms_src"></span></wrs></span> <span class="ref_info">m</span><span class="ref_dictionary"> (ИТ - базовый) </span></li> <li><span class="ref_result">родительский<wrs><span class="sforms_src"></span></wrs></span><span class="ref_comment"> (attributive) </span> <span class="ref_info"></span><span class="ref_dictionary"> (ИТ - базовый) </span></li> <li><span class="ref_result">прототип<wrs><span class="sforms_src"></span></wrs></span> <span class="ref_info">m</span><span class="ref_dictionary"> (Политехнический) </span></li> <li><span class="ref_result">начало<wrs><span class="sforms_src"></span></wrs></span> <span class="ref_info">n</span><span class="ref_dictionary"> (Политехнический) </span></li> </ol> </div> </div><script> $('.sforms_src').filter(function(index) { return $(this).html().length == 0;}).remove();//getPrLink('mother ');//$('#speaker_on').unbind('click','ShowFullWRefERRE')//$('#speaker_on').click(function(){alert("не открывать окно расширеной справки");}); </script><div class="cforms_result" id="cforms_result3"> <div class="ref_cform" onclick="javascript:GetFullWordCBK('3', 'wordER');"><span class="fsform_link"><a href="javascript:;" onclick="javascript:GetFullWordCBK('3', 'wordER');"><img src="/images/common/owl_ico16.gif" width="19" height="19" border="0"></a><a href="javascript:;" onclick="javascript:GetFullWordCBK('3', 'wordER');"> Склонение </a></span><span class="ref_source">mother<wrs><span class="sforms_src"><span class="w_des">Positive</span><b>mother</b><br></span></wrs></span>&nbsp;<span class="ref_info"></span>, <span class="ref_psp">Прилагательное</span></div> <div class="tr_pr"><span class="transcription">[ˈmʌðə]</span><span class="pronunciation"><a href="javascript:;" class="pbf_s" id="lnkGtTr3" onclick="javascript:ListenWord(this,'mother',3,'play');"><img src="/images/common/vol_on.gif" align="absmiddle" border="0" id="imgGtTr3"><span> powered by <img src="/images/common/logoforvo.gif" width="59" height="17" border="0" hspace="5" align="absmiddle" style="cursor:point; cursor:hand;" onclick="window.open('http://ru.forvo.com/');"></span></a><span class="loadFrv" id="loadFrv3"><img hspace="10" src="/images/common/al_fullWR.gif" align="absmiddle"></span><span style="width:20px; height:17px;" class="pbf_s" id="speaker_on3"><span> powered by <img src="/images/common/logoforvo.gif" width="59" height="17" border="0" hspace="5" align="absmiddle" style="cursor:point; cursor:hand;" onclick="window.open('http://ru.forvo.com/');"></span></span></span></div> <div id="translations" onclick="javascript:GetFullWordCBK('3', 'wordER');"> <ol> <li><span class="ref_result">родительский<wrs><span class="sforms_src"></span></wrs></span> <span class="ref_info"></span><span class="ref_dictionary"> (ИТ - базовый) </span></li> </ol> </div> </div><script> $('.sforms_src').filter(function(index) { return $(this).html().length == 0;}).remove();//getPrLink('mother ');//$('#speaker_on').unbind('click','ShowFullWRefERRE')//$('#speaker_on').click(function(){alert("не открывать окно расширеной справки");}); </script><div id="fullRLink"><a href="javascript:GetFullWordCBK('1', 'wordER');">Показать полную словарную статью</a><span id="al_fullWR"><img src="/images/common/al_fullWR.gif" align="middle" hspace="10"> Загружаем...</span></div></div> 
```

我想在此模式之间获取文本`<span class="ref_result">TEXT<wrs>`

我使用此代码获取所有匹配项

```
const string pattern = "ref_result\">\\w+<";
Regex rgx = new Regex(pattern, RegexOptions.Compiled);
var text = SantinizeOutput(result.result);
MatchCollection matches = rgx.Matches(text);
if(matches.Count > 0)
{
  resultsList = new List<string>(matches.Count);
  foreach(Match match in rgx.Matches(text))
  {
    string formattedWord = match.Value;
    int leftAngleBracketIndex = formattedWord.IndexOf(">");
    var word = formattedWord.Remove(0, leftAngleBracketIndex + 1);
    word = word.TrimEnd('<');
    resultsList.Add(word);
  }
}

private string SantinizeOutput(string input)
{
  var text = input.Replace("\n", "").Replace("\r", "");
  return Regex.Replace(text, "\\s+", " ");
} 
```

在本文中，有 7 个匹配项，但结果只有 5 个。

我在哪里做错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T18:00:34.047

`\w`表示“字字符”；它不匹配空格。观察其中两个`ref_result`标签包含空格：

```
<span class="ref_result">относиться по-матерински<wrs>
<span class="ref_result">родительский элемент<wrs> 
```

只需用于`"ref_result\">[^<]+<wrs"`获取所有非标签内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T18:00:32.170

尝试将您的 \w 更改为 .*?

所以：

```
const string pattern = "ref_result\">.*?<"; 
```

.*? 将获取所有字符（以非贪婪的方式），直到它击中第一个 < 字符。

.* 将获取所有字符（以贪婪的方式），直到它碰到最后一个 < 字符。您将需要使用非贪婪方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T18:22:35.303

通过更改您的正则表达式，您还可以删除代码中的一些逻辑。

```
const string pattern = "ref_result\">([^<]*)";
Regex rgx = new Regex(pattern, RegexOptions.Compiled);
var text = SantinizeOutput(result.result);
MatchCollection matches = rgx.Matches(text);

List<string> resultsList = new List<string>(matches.Count);
for(int i=0; i<resultsList.Length; i++) {
  resultsList.Add(matches[i].Groups[1].Value);
}

private string SantinizeOutput(string input) {
  var text = input.Replace("\n", "").Replace("\r", "");
  return Regex.Replace(text, "\\s+", " ");
} 
```

# objective-c - FBFriendPickerViewController 保存好友图片

> ID：12654995
> 
> 赞同：1
> 
> 时间：2012-09-29T17:46:19.833
> 
> 标签：objective-c, facebook, ios6, facebook-ios-sdk

是否有可能让朋友使用用户图片`FBFriendPickerViewController`？我试过了：

```
FBFriendPickerViewController *friendPicker = [[FBFriendPickerViewController alloc] init];
friendPicker.fieldsForRequest = [[NSSet alloc] initWithObjects:@"picture", nil];
[friendPicker loadData];
[friendPicker presentModallyFromViewController:self
                                      animated:YES
                                       handler:^(FBViewController *sender, BOOL donePressed) {
                                           if (donePressed) {
UIImage *pic = friend[@"picture"];
... 
```

但是里面`nil`有`friend[@"picture"]`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T16:25:54.667

在你的块内试试这个代码，我让它工作了。

```
if (donePressed) {
   for (id<FBGraphUser> user in self.friendPickerController.selection) {
        UIImage *pic = user[@"picture"];
        NSLog(@"%@",pic);                                              
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T17:17:45.110

**解决方案**

```
NSURL *profilePictureURL = [NSURL URLWithString:friend[@"picture"][@"data"][@"url"]];
                                                               NSURLRequest *profilePictureURLRequest = [NSURLRequest requestWithURL:profilePictureURL cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:10.0f]; // 

                                                               [NSURLConnection sendAsynchronousRequest:profilePictureURLRequest
                                                                                                  queue:[NSOperationQueue mainQueue]
                                                                                      completionHandler:^(NSURLResponse* response, NSData* receivedData, NSError* error)
                                                                {
                                                                    UIimage *userpic = [UIImage imageWithData:receivedData];
                                                                }]; 
```

# assembly - 多个 PowerPC 指令具有相同的操作码

> ID：12654997
> 
> 赞同：0
> 
> 时间：2012-09-29T17:46:24.200
> 
> 标签：assembly, disassembly, powerpc

我试图理解 PowerPC 指令并最终反汇编它们。我找到了[http://pic.dhe.ibm.com/infocenter/aix/v7r1/index.jsp?topic=/com.ibm.aix.aixassem/doc/alangref/ppc_instr.htm](http://pic.dhe.ibm.com/infocenter/aix/v7r1/index.jsp?topic=/com.ibm.aix.aixassem/doc/alangref/ppc_instr.htm)我已经很困惑了- addic 和 si 如何拥有相同的操作码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T18:04:16.337

它们是相同的指令。不同之处在于，在 si 的情况下，汇编程序会更改您提供的立即数的符号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T18:05:54.913

显然，它是汇编程序的某种语法糖。它们都执行加法，但`si`使用负数：

```
The si instruction subtracts the 16-bit signed integer specified by the
SINT parameter from the contents of general-purpose register (GPR) RA and
stores the result in the target GPR RT. This instruction has the same
effect as the ai instruction used with a negative SINT value. The
assembler negates SINT and places this value (SI) in the machine
instruction:

    ai RT,RA,-SINT 
```

来源：[si（立即减法）指令](http://pic.dhe.ibm.com/infocenter/aix/v7r1/topic/com.ibm.aix.aixassem/doc/alangref/si.htm?resultof=%22%61%64%64%69%63%22%20)