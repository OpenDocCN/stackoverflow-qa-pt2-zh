# StackOverflow 问答 12695000-12695999

# jquery - 最小下拉菜单触发单个孩子

> ID：12695004
> 
> 赞同：0
> 
> 时间：2012-10-02T17:12:01.070
> 
> 标签：jquery

我正在尝试使用最少的 JS 和 CSS 制作一个简单的下拉菜单。

它完美地工作，但一次触发所有子元素，而不是悬停的元素。

```
<nav id="product-index">
        <ul class="product-list">
            <li class="prod-trig">Bikes</li>
                <li><ul class="product-sub">
                <p>Bike product sub</p>
                </ul></li>

            <li class="prod-trig">Parts &amp; Tools</li>
                <li><ul class="product-sub">
                <p>Bike product sub</p>
                </ul></li>

            <li class="prod-trig">Clothes &amp; Shoes</li>
                <li><ul class="product-sub">
                <p>Bike product sub</p>
                </ul></li>

            <li class="prod-trig">Protection</li>
                <li><ul class="product-sub">
                <p>Bike product sub</p>
                </ul></li>

            <li class="prod-trig">More</li>
                <li><ul class="product-sub">
                <p>Bike product sub</p>
                </ul></li>
        </ul>
</nav> 
```

```
$(document).ready(function() {
    $('.prod-trig').hover(function() {
        $('.product-sub').stop().slideDown(400);
    }, function() {
        $('.product-sub').stop().slideUp(400);
    });
}); 
```

这是小提琴。[http://jsfiddle.net/npLwX/55/](http://jsfiddle.net/npLwX/55/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T17:19:15.333

试试这个：

```
$('.prod-trig').hover(function() {
    $(this).next().find('.product-sub').stop().slideDown(400);
}, function() {
    $(this).next().find('.product-sub').stop().slideUp(400);
});​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/npLwX/62/)**

您需要针对特定​​元素而不是整个类。

# jquery - How to pass the xml to web service and get back the json reply

> ID：12695005
> 
> 赞同：0
> 
> 时间：2012-10-02T17:12:02.443
> 
> 标签：jquery, jqgrid

```
url: '<spring:url value="/service/org/fixt/assignlist"/>',      
    mtype: "POST",
    postData: fxXML,
    datatype: "json",
    autoencode: true, 
```

I am able to post xml using ajax call and get the reply back in json format. But now I don't know how to post this xml to the web service and get the json back using jqgrid.

# linux - How can I check the history of my centos VPS? Linux

> ID：12695008
> 
> 赞同：0
> 
> 时间：2012-10-02T17:12:09.753
> 
> 标签：linux, security, centos

I'm about to hand out my root server password to a company for them to fix an issue that I have with mydns.

I'm sure they are all above board (and I will change the root password after they have finished) but I just want to be sure.

I know (well I think) I can login after them and execute `history` to see what they did, but I know if they are dishonest, they can just clear the history. I'm worried in case a rogue employee does something malicious or installs keylogging software (which has happened when my mate let another company manage his VPS).

So is there anything I can do? Does the history command backup somewhere? Can I install a keylogger to verify the commands they execute are not malicious?

Any ideas welcome. Ideally I appreciate I shouldn't give out my root password if I don't trust them. But I am in a very difficult situation and have no choice.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T17:16:04.703

由于您授予他们 root 访问权限，因此您无法在机器内做任何他们无法使用 rootkit 颠覆的事情。

您唯一确定的方法是将文件系统安装在另一台机器上，并通过与先前制作的快照/备份进行比较来比较对文件所做的更改。

# linux - 使用 PyGTK，如何获取路径名而不是拖放事件的 uri？

> ID：12695019
> 
> 赞同：0
> 
> 时间：2012-10-02T17:12:51.960
> 
> 标签：linux, drag-and-drop, pygtk

我在 Ubuntu 下使用 PyGTK 开发了一个应用程序，它允许用户将文件拖到标签小部件中。这是 Python 2.7。适用代码如下：

```
import pygtk
pygtk.require('2.0')
import gtk

w = gtk.Window()
w.drag_set_set(0, [], 0)
w.connect('drag_motion', motion_cb)
w.connect('drag_drop', drop_cb)
w.connect('drag_data_received', got_data_cb)
w.connect('destroy', lambda w: gtk_main_quit())

l = gtk.Label()
l.set_text('Drag File Here')
w.add(l)
w.show_all()
gtk.main()

def motion_cb(wid, context, x, y, time):
    context.drag_status(gtk.gdk.ACTION_COPY, time)
    return True

def drop_cb(wid, context, x, y, time):
    wid.drag_get_dta(context, context.targets[-1], time)
    return True

def got_data_cb(wid, context, x, y, data, info, time):
    # the following line returns a URI?  I want the absolute file path
    print data.get_text() 
```

所以这个`got_data_cb`函数有一个`gtk.SelectionData`项目。当我打电话`get_text()`给我一个URI。从 Python 2.6 开始，`get_uris()`我还监视了一个函数。如何获取返回的绝对文件路径而不是此 uri？我的目标是使用用户选择的文件作为程序的命令行参数来运行外部程序（我已经让这部分工作，除了我需要为用户选择的文件传递正确的路径）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T01:15:41.223

好的，所以我知道我可以采取额外的步骤来做

```
my_path = urlparse.urlparse(data.get_text()).path 
```

这将为我提供包括文件在内的完整目录路径。那我可以做

```
base_directory = my_path.rsplit('/', 1)[0]
selected_file = my_path.rsplit('/', 1)[1].rstrip('\n') 
```

# c - How does strcpy() copy a string to an array when you can't change the address of an array?

> ID：12695021
> 
> 赞同：-2
> 
> 时间：2012-10-02T17:12:58.060
> 
> 标签：c, arrays, string, pointers, strcpy

So basically strcpy assigns the address of the 2nd argument to the 1st, but how does it do it with an array as the first argument? like in my program, i tried changing the address of the array but unfortunately it wont compile. So I had to resort to making a character pointer variable to assign the return value of capitalize. Is there something I'm misunderstanding?

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
typedef char string[20];
char *Capitalize(char *str)
{
    int i;
    char *temp;
    temp = malloc(sizeof(char)*(int)(strlen(str)+1));
    for(i = 0;i < strlen(str);i++)
    {
        if(*(str+i) >= 'a' && *(str+i)<= 'z')
            *(temp+i) = *(str+i) - 32;
        else
            *(temp+i) = *(str+i);
    }
    *(temp+i) = '\0';
    return temp;
}
int main(void)
{
    string word;
    printf("Enter word to capitalize: ");
    scanf("%19s",word);
    word = Capitalize(word);
    printf("%s",word);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T17:16:51.623

`strcpy()` makes a copy, just like the name implies. it's perfectly legal to copy a string in to an array.

When you make an initialization of an array such as:

```
char myarr[] = "hello"; 
```

You're actually copying the characters into the array.

You seem to be confusing arrays with pointers ([see here for some reason you can't treat them the same](https://stackoverflow.com/questions/12676402/why-cant-i-treat-an-array-like-a-pointer-in-c))

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T17:24:13.910

The thing you seem to be missing is that in c/c++ strings ARE arrays, in most practical respects declaring

```
char c[] = "hello"; 
```

and

```
char* c = "hello"; 
```

is the same thing, all strcpy does is copy the characters into the destination memory, whether that memory is allocated as an array (presumably on the stack) or pointer (presumably on the heap);it does not make a difference.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T17:47:02.643

In C, qualifying an array by name without an indexer, is equivalent to specifying a pointer to the memory address of the first element in the array, that is why you can pass as a parameter an array to functions like `strcpy`.

```
char * strcpy ( char * destination, const char * source ); 
```

`strcpy` will copy whatever series of characters are found, starting at memory address specified by `source`, to the memory address specified by `destination`, until a null character (0) is found (this null character is also copied to the destination buffer).

**The address values specified in the parameters are not modified**, they just specify from where in memory to copy and where to. It is important that `destination` is pointing to a memory buffer (can be a char array or a block of memory requested via malloc) with enough capacity for the copied string to fit, otherwise a buffer underrun will occur (you will write characters past the end of your buffer) and your program might crash or behave in a weird way.

Hope I have been clear and not confused you more with my explanation ;)

# ruby-on-rails - 实时聊天，不想丢消息——用队列（redis、zeromq）？

> ID：12695022
> 
> 赞同：1
> 
> 时间：2012-10-02T17:12:59.557
> 
> 标签：ruby-on-rails, node.js, chat, real-time, message-queue

我有一个应用程序，其中有一些实时聊天。聊天是在客户端和服务器端（nodejs）使用 Faye 实现的。

现在，此客户端聊天用于 Rails 应用程序，当我的页面重新加载/刷新时，我不想丢失在以下情况下可能发生的消息：

*   我重新加载页面
*   我从数据库中获取聊天记录
*   聊天另一端的用户写了 5 行
*   我渲染页面
*   我缺少 5 条最近的记录

我想听听你对解决这个问题的意见。我想到了一个消息队列之类的东西，其中未传递给客户端的消息将在那里等待，稍后在页面通过 javascript 启动时获取。

如果有人确认消息队列非常适合使用 zeromq 或在我已经使用的 redis 中实现简单队列（不想要很多技术），我也希望得到您的意见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T17:35:22.950

Redis 具有令人印象深刻的队列功能、发布/订阅系统等选择。另一方面，ZeroMQ 更像是分布式应用程序的 IPC 层，您必须在其上实现任何高级抽象。这就像比较 HTTP 和 TCP。

# c# - SchemaBuilder 和 Id 的起始值

> ID：12695025
> 
> 赞同：0
> 
> 时间：2012-10-02T17:13:14.127
> 
> 标签：c#, sql, asp.net-mvc, migration, orchardcms

我正在为 Orchard CMS 编写一个模块，我需要将 Id 的起始值设置为 15。如何通过代码来实现？

在 Migrations.cs 中：

```
 SchemaBuilder.CreateTable("NewRecord", table => table
        .ContentPartRecord()
            .Column<int>("Id", c => c.PrimaryKey().Identity()) 
```

它使用主键创建列 ID。我应该添加什么来设置起始值？谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T04:45:57.640

谢谢大家！解决这个问题的方法 - 删除表中的主键并更改列 ID？这是自动创建的。我用 SchemaBuilder.ExecuteSQL(string) 方法做到了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T23:15:28.700

无法从数据迁移 API 定义此值。

# objective-c - 无法更改/替换 NSDictionary Key 值 IOS

> ID：12695027
> 
> 赞同：2
> 
> 时间：2012-10-02T17:13:20.307
> 
> 标签：objective-c, ios, plist, nsdictionary

我正在从 Dropbox 下载文件修订状态，基本上我将 Dropbox 中下载的修订号与本地 plist 中的修订号进行比较。

在比较它们之后，我想用 Dropbox 的修订号更改本地修订号。但它不起作用，我快要失去理智了。

我放了一些标志和 NSlog，它似乎替换了该值，但是在我调用相同的函数或再次启动应用程序后，我看到该值没有被替换。它一遍又一遍地给出相同的输出

```
 NSString* revisionLocal = [dicInner objectForKey:@"revision"];
    NSString* statusLocal = [dicInner objectForKey:@"status"];

    NSLog(@"revision  value before %@",revisionLocal);
    NSLog(@"status value before %@",statusLocal);

   //If revision has changed on dropbox, flag it as outdated on the local revision
                        if(![revisionLocal isEqualToString: dropBoxRevision] ){
                            [dicInner setValue:@"outdated" forKey:@"status"];
                            //But the revision is the latest
                            [dicInner setValue:dropBoxRevision forKey:@"revision"];
                            //[dicInner setValue:@"outdated" forKey:@"revision"];

                            NSLog(@"revision value %@",[dicInner objectForKey:@"revision"]);
                            NSLog(@"status value %@",[dicInner objectForKey:@"status"]); 
```

所以这给了我以下输出：

```
revision  value before 4309efbbb7
status value before updated
revision value 4409efbbb7
status value outdated 
```

完整的代码是：

```
- (void)restClient:(DBRestClient *)client loadedMetadata:(DBMetadata *)metadata {

    //get the local revision
    NSDictionary * localRevisionDic = [FileUtils readPlistIntoDictionary:@"revision.plist"];

    NSString *fileRevString = [NSString alloc];
    //get the revision from Dropbox
    //NSString * dropboxRevision;
    if (metadata.isDirectory) { 
        NSLog(@"Folder '%@' contains:", metadata.path);
        for (DBMetadata *file in metadata.contents) {

            NSLog(@"\t%@", file.filename);
            //NSLog(@"\t%@", file.lastModifiedDate);
            NSLog(@"\t%@", file.rev ); 

            //Assign dropbox revision for this file
            //dropboxRevision = file.rev;
            //if no local revision.plist, entry will be added. Hence init here
            if (localRevisionDic==nil){
                localRevisionDic = [[NSMutableDictionary alloc]init];

            }
            //Otherwise go through each from dropbox and campare with local

            //From Dropbox
            NSString * dropBoxFileName = file.filename;
            NSString * dropBoxRevision = file.rev;

            fileRevString = file.rev;

            //if no local revision.plist entry is added for all other files
            //with status need_downloaded, and no revision
            if ([localRevisionDic count]==0){

                //Creating revision dictionary entry for agenda.plist
                NSDictionary * localRevisionDicDic = [[NSMutableDictionary alloc]init];
                //when agenda.plist revision entry is added update the revision while leaving status as "new" before downloading
                //will be updated accordingly if download fails
                [localRevisionDicDic setValue:@"new" forKey:@"status"];
                //Status is new but the revision is the latest
                [localRevisionDicDic setValue:dropBoxRevision forKey:@"revision"];

                [localRevisionDic setValue:localRevisionDicDic forKey:dropBoxFileName];

            }else{//If there is local revision.plist compare and update accordingly
                NSDictionary * dicInner = [localRevisionDic objectForKey:dropBoxFileName];
                //File name Found locally
                if (dicInner!=nil){
                    NSString* revisionLocal = [dicInner objectForKey:@"revision"];
                    NSString* statusLocal = [dicInner objectForKey:@"status"];

                    NSLog(@"revision  value before %@",revisionLocal);
                    NSLog(@"status value before %@",statusLocal);

                    //If revision has changed on dropbox, flag it as outdated on the local revision
                    if(![revisionLocal isEqualToString: dropBoxRevision] ){
                        [dicInner setValue:@"outdated" forKey:@"status"];
                        //But the revision is the latest
                        [dicInner setValue:dropBoxRevision forKey:@"revision"];
                        //[dicInner setValue:@"outdated" forKey:@"revision"];

                        NSLog(@"revision value %@",[dicInner objectForKey:@"revision"]);
                        NSLog(@"status value %@",[dicInner objectForKey:@"status"]);
                    }
                    }else{//File name not found locally newly added on dropbox

                        NSDictionary * localRevisionDicDic = [[NSMutableDictionary alloc]init];
                        //when agenda.plist revision entry is added update the revision while leaving status as "new" before downloading
                        //will be updated accordingly if download fails
                        [localRevisionDicDic setValue:@"new" forKey:@"status"];
                        //But the revision is the latest
                        [localRevisionDicDic setValue:dropBoxRevision forKey:@"revision"];

                        [localRevisionDic setValue:localRevisionDicDic forKey:dropBoxFileName];
                }
            }
        }
    }
    //At this point agendaRevisionDicTemp contains all the files in dropbox entered/updated.
    [[self agenda] setRevision:localRevisionDic];

    //*****The following block is needed to determine is new agenda is needed or not.
    BOOL newAgendaNeeded = false;

    NSMutableDictionary * agendaRevisionDicLocal = [localRevisionDic objectForKey:@"agenda.plist"];

    //NSString * localRevision = [agendaRevisionDicLocal objectForKey:@"revision"]; //what is this value?

    NSString * localStatus = [agendaRevisionDicLocal objectForKey:@"status"];
    NSLog(@"Local Status= %@",agendaRevisionDicLocal);

    if ([localStatus isEqualToString:@"new"] ||[localStatus isEqualToString:@"outdated"]){
        newAgendaNeeded = true;
        //when agenda.plist is added update the revision while leaving status as "new" before downloading
        //will be updated accordingly if download fails
        NSDictionary * agendaDic = [[[self agenda]revision] objectForKey:@"agenda.plist"];
        [agendaDic setValue:@"updated" forKey:@"status"];
        NSLog(@"agendaDic where update %@",agendaDic);

    }
    //*****The above block is needed to determine is new agenda is needed or not.

    //If new agenda is needed download
    if (newAgendaNeeded){
        //Download agenda.plist
        NSString *documentsDirectory = FileUtils.getDocumentsDirectory;
        [[self restClient] loadFile:@"/agenda.plist" intoPath: [ NSString stringWithFormat:@"%@/%@",documentsDirectory,@"agenda.plist"] ];

    } else{//Else display the scene

        [self populateSceneFromAgenda];

    }

    [restOfView reloadData];
    // Add at start of requestFinished AND requestFailed
    [MBProgressHUD hideHUDForView:self.view animated:YES];
} 
```

知道如何替换该值吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T17:55:26.493

您不尊重 NSDictionary 对象的不变性。您将 localRevisionDic 声明为 NSDictionary*，但稍后可以为其分配 NSMutableDictionary 的值。localRevisionDicDic 声明为 NSDictionary* 但使用 NSMutableDictionary 的值初始化。在编译时应警告以下两个分配。在线

```
[localRevisionDic setValue:localRevisionDicDic forKey:dropBoxFileName]; 
```

谁知道 localRevisionDic 是可变的还是不可变的？
然后，再次将 dicInner 声明为 NSDictionary*，但稍后尝试 setValue 两次。首先制作字典的 mutableCopy。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T18:58:49.867

我猜您的字典更改正确您的代码有什么问题应该是您没有将字典保存到您编辑的 plist

事实上，这种方法肯定有问题`[[self agenda] setRevision:localRevisionDic];`

尝试从下面添加以下代码`[[self agenda] setRevision:localRevisionDic];`

```
//write dictionary to plist 
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *path = [documentsDirectory stringByAppendingPathComponent:@"revision.plist"];
    // write plist to disk
    [localRevisionDic writeToFile:path atomically:YES];

    // read it back in with different dictionary variable
    NSMutableDictionary *savedStock = [NSMutableDictionary dictionaryWithContentsOfFile:path];
    if( savedStock==nil ){
        NSLog(@"failed to retrieve dictionary from disk");
    } 
```

# javascript - 是否可以通过 javascript SDK 执行 fql 查询？

> ID：12695031
> 
> 赞同：1
> 
> 时间：2012-10-02T17:13:37.687
> 
> 标签：javascript, facebook, facebook-graph-api, facebook-javascript-sdk

我正在玩一个示例应用程序，该应用程序旨在向我展示我的 facebook 流的过滤版本。我想为此使用 javascript sdk，以避免对我的服务器产生任何额外的流量。这可能吗？

到目前为止，我一直在尝试以下方法：

```
 FB.api('/fql', {q:query}, function(response) {}); 
```

这似乎没有实施。我宁愿不使用遗留的 REST api，因为它是遗留的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T17:27:42.113

这应该有效：

```
 FB.api('fql', { q: 'query here' }, function (response)
{
 //Logic here
}; 
```

几乎，您只需要删除“fql”前面的斜线即可。

# c# - 数据源中两列的 DataPropertyName DataGridViewLinkColumn

> ID：12695032
> 
> 赞同：0
> 
> 时间：2012-10-02T17:13:45.807
> 
> 标签：c#, .net, winforms, datagridview, datasource

我有一个手动添加列的 DataGridView，例如：

```
DataGridViewLinkColumn col = new DataGridViewLinkColumn() { HeaderText = "", DataPropertyName = "PropValue", ReadOnly = true };
        this.dataGridResults.Columns.Add(col); 
```

数据源是一个存储过程，它返回一个包含“PropValue”和“PropText”等的列表。

我的问题是这个 DataGridViewLinkColumn 必须显示来自“PropText”的文本，并将其值绑定到“PropValue”。但是，DataPropertyName 似乎不是那么灵活，它只绑定到从 datsource 返回的一种数据类型。

如果问题解释不清楚，请告诉我。

想法？

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T17:36:37.670

你可以使用这个：

```
 DataGridViewLinkColumn links = new DataGridViewLinkColumn();
    links.HeaderText = "Hello";
    links.UseColumnTextForLinkValue = true;
    links.Text="http://microsoft.com";
    links.ActiveLinkColor = Color.White;
    links.LinkBehavior = LinkBehavior.SystemDefault;
    links.LinkColor = Color.Blue;
    links.TrackVisitedState = true;
    links.VisitedLinkColor = Color.YellowGreen;
    dataGridView.Columns.Add(links); 
```

我从这个链接得到它：

[如何将 DataGridViewLinkColumn 属性添加到 DataGridView 中动态生成的列？](https://stackoverflow.com/questions/6301771/how-to-add-datagridviewlinkcolumn-property-to-dynamically-generated-columns-in-d)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T10:54:12.617

我最终使用了两个单独的列，其中一个不可见包含我需要的另一个值。将数据集中的两列绑定到相同的 datagridview 列是不可能的。

# ruby-on-rails - 强制用户在 Devise 中退出

> ID：12695037
> 
> 赞同：7
> 
> 时间：2012-10-02T17:14:06.267
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

我有一个应用程序，其中用户的会员资格过期。

`before_filter`我正在努力在我的文件中设置一个，`applications.rb`以在让他们进入网站之前检查他们的会员资格是否处于活动状态。

在我的 application.rb 文件中：

```
before_filter :check_account

def check_account
  if user_signed_in?
     if current_user.account.expired
       flash[:error] = "Your account is expired. Please contact Navanti for renewal."
       redirect_to destroy_user_session_path
     end
  end
end 
```

我不断收到重定向循环错误。我猜这是因为被调用的注销页面也在执行`before_filter`，但是如果我放一个`except => [:users => :sign_out]`它仍然会引发循环错误。

谢谢您的帮助。

* * *

要求的设计方法：

```
# DELETE /resource/sign_out

def destroy
  redirect_path = after_sign_out_path_for(resource_name)
  signed_out = (Devise.sign_out_all_scopes ? sign_out : sign_out(resource_name))
  set_flash_message :notice, :signed_out if signed_out && is_navigational_format?  

  # We actually need to hardcode this as Rails default responder doesn't
  # support returning empty response on GET request
  respond_to do |format|
    format.any(*navigational_formats) { redirect_to redirect_path }
    format.all do
      head :no_content
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T18:17:37.410

尝试通过以下方式查询控制器/动作：

```
def check_account
  return if params[:controller] == "devise/sessions" && params[:action] == "destroy"
  if user_signed_in?
     if current_user.account.expired
       flash[:error] = "Your account is expired. Please contact Navanti for renewal."
       redirect_to destroy_user_session_path
     end
  end
end 
```

这应该消除您所拥有的重定向循环。

# google-chrome - 来自 ChromeDriver 的 Chrome aw snap

> ID：12695042
> 
> 赞同：4
> 
> 时间：2012-10-02T17:14:28.950
> 
> 标签：google-chrome, selenium-chromedriver

我有一个使用 selenium 和 chromedriver 的集成测试套件。在上周，我注意到来自 chrome 的 aw snap 页面非常频繁地出现。当我将 chromedriver 切换到 firefoxdriver 时，一切正常。aw snap pages 爆发的原因可能是什么？

我正在使用最新版本的 Chrome 和 ChromeDriver：

镀铬版本 22.0.1229.79 m

chromedriver_win_23.0.1240.0

# sass - 在 nth-child 中使用 SASS 变量？

> ID：12695043
> 
> 赞同：27
> 
> 时间：2012-10-02T17:14:30.213
> 
> 标签：sass

我有一个缩略图网格设置，目前每行 4 个拇指。为了确保他们排队，我有这段代码：

```
li:nth-child(5) { margin-left: 0;} 
```

我试图做的是这样，但我得到一个语法错误：

```
 $galleryGrid: 5;
    li:nth-child($galleryGrid) { margin-left: 0;} 
```

如果我想更改第 n 个孩子以使用另一个值，例如 10（这样我可以连续有 8 个拇指），我认为这会起作用。这是不可能的还是我做错了？！

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-10-02T17:29:38.037

您需要使用变量插值来允许 nth-child 成为变量。

```
$galleryGrid: 5;
li:nth-child(#{$galleryGrid}) { margin-left: 0;} 
```

生成

```
li:nth-child(5){margin-left:0} 
```

如果您对图像和布局有绝对控制权，以确保您的元素始终以每 5 个开始一个新行的方式包装，则此标记很好。如果你不能做出这样的保证，在父元素上设置负边距是一个更好的方法。

# excel - 获取 Excel 以显示完整值

> ID：12695044
> 
> 赞同：1
> 
> 时间：2012-10-02T17:14:40.990
> 
> 标签：excel, vba, ssis, format

我有一个 Excel 电子表格，其中包含一系列值，这些值是小数点后 20 位的数字，使用[此处](http://datapigtechnologies.com/blog/index.php/transposing-a-dataset-with-a-pivottable/)的技巧从另一张表中取消透视。

问题是单元格只显示 10 位数字，例如，即使值为 5.46827166811115，它也显示为 5.468271668。

我尝试将格式设置为文本，但它仍想将其视为数字，小数位数各不相同，所以我不能使用固定的#.### 格式。我可以让它显示的唯一方法是将单元格格式化为文本，然后选择然后单击每个单元格的输入框！

然后它会显示一个警告，即单元格中的数字被格式化为文本或前面有一个撇号，但至少它显示了完整的值。

我确实找到了一个 VBA 脚本，它只是做了一些愚蠢的简单操作，比如 cell.Value = cell.Value 用于选择似乎有效，但我再也找不到它了，我现在无法重现它。

当然有更简单的方法来做到这一点？没关系，但是当我通过 SSIS 将这些数据导入 VARCHAR(MAX) 时，它会得到截断的值！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T19:05:59.677

在数据前附加一个撇号`'`。在许多情况下，这比将单元格格式设置为文本更有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T17:22:25.840

您可以将单元格格式化为文本，然后将`.AutoFit`单元格展开以显示所有单元格内容，如下所示：

```
Columns("A:A").EntireColumn.AutoFit 
```

这将扩展 A:A 单元格，使其所有内容都可见。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T18:14:37.017

尝试使用`#.000`而不是 进行格式化`#.###`，但如果您的问题是 Excel 降低了您的精度，您可以尝试将该值乘以 10^20，然后在 SQL 端除以 10^20。

找到更多信息： [这里](http://forums.techguy.org/business-applications/261104-increase-excel-precision.html)

看起来 Excel 仅限于 15 位精度，乘以 10^20 不会增加精度，因此您可以将其视为文本或将剩余数字拆分为另一列并将它们与 SSIS 或 SQL 组合回来。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T18:51:48.370

您是否已将 IMEX=1 添加到连接字符串中？这使 SSIS 无法尝试从前几行中找出数据。

另外，如何使用十进制数据类型而不是 varchar(max)

# entity-framework-5 - 自定义 EF 代码优先身份生成

> ID：12695052
> 
> 赞同：0
> 
> 时间：2012-10-02T17:15:20.133
> 
> 标签：entity-framework-5, entity-framework-migrations

使用 EntityFramework 5，我有一个新数据库，我需要在其中将表上的标识种子指定为“1”以外的值。

使用模型构建器、迁移或其他方式，是否有一种简单的方法可以更改表的身份生成以处理此问题？

目前，我正在考虑创建自定义 sql，以便在迁移期间调用以在创建表后对其进行修改。一个更清洁的解决方案是首先让 CREATE TABLE 正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T11:06:26.943

我正在处理同样的问题，现在遵循以下计划：

1.  通过以下方式初始化定制的迁移计划：

    Database.SetInitializer(new MigrateDatabaseToLatestVersion());

2.  检查是否必须生成实体（MyInitConfiguration 类）：

    ```
    protected override void Seed(MyDbContext context)
    {
        var he = context.Set<MyEntity>();
        if (!he.Any(h => h.Id == 0))
        {
             ...place to add code... 
    ```

3.  以正常方式添加实体（或多个实体），但“在执行提交之前 - 调用外部 sql 脚本：

    ```
     he.Add(new MyEntity{ Id = -5, Alias = "system",Title = "System"});
        he.Add(new MyEntity{ Id = -4, Alias = "system1",Title = "System1"});
        he.Add(new MyEntity{ Id = -3, Alias = "system2",Title = "System2"});
        context.Database.ExecuteSqlCommand(
         string.Format("DBCC CHECKIDENT ('{2}', RESEED, {0});",-5,"MyTableName")
        );
        context.Commit(); 
    ```

或以下我为 DBContext 准备的扩展：

```
public static void UpdateIdentity<T, TKey>(this MyDbContext context, Func<T> data, TKey staticPreviousId, string tableName,string columnName="id")
            where T : MyEntity<TKey>
        {
            var r = data();
            context.Database.ExecuteSqlCommand(string.Format("DBCC CHECKIDENT ('{2}', RESEED, {0});", staticPreviousId, r.Id, tableName, columnName));
            context.Commit();            
        } 
```

然后执行：

```
 context.UpdateIdentity(() => myDataSet.Add(new MyEntity{ Id = -5, Alias = "system",Title = "System"}), -5, "myTableName");

 context.UpdateIdentity(() => myDataSet.Add(new MyEntity{ Id = 81, Alias = "system",Title = "System"}), 80, "myTableName"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T11:10:12.253

不幸的是，我还没有找到在执行查询批处理之前“添加预查询”的方法，如果有人能找到这样做的方法 - 然后在执行提交之前 - 我们可以执行 sql：“set identity_inster on”

后

“设置 identity_inster 关闭”

这对 t-sql 来说更自然

# .net - 访问密钥对 .NET Windows 窗体中的标签有什么作用？

> ID：12695058
> 
> 赞同：4
> 
> 时间：2012-10-02T17:15:51.047
> 
> 标签：.net, windows, winforms, access-keys

昨天有人告诉我标签可以有访问密钥的事实。所以我将标签的文本属性设置为`Class &A`，事实上，它现在有一个下划线和所有内容。不过，据我所知，Labels 无法获得焦点。

那么这个访问密钥有什么作用？如果没有，那么为什么仍然允许它们（文本框没有访问键）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T17:19:06.420

当您将[Label.UseMnemonic](http://msdn.microsoft.com/en-us/library/system.windows.forms.label.usemnemonic.aspx)与“访问键”一起使用时，然后按该访问键（即：在您的示例中为*Alt+A*），表单上 Tab 键顺序中的下一个控件（基于[TabIndex](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.tabindex.aspx)）将获得焦点。

# ios - 为什么我看到关于使用 LLVM 的 -falign-loops 的编译错误？

> ID：12695060
> 
> 赞同：0
> 
> 时间：2012-10-02T17:15:59.213
> 
> 标签：ios, iphone, objective-c, clang, core-plot

我有一个使用 Core Plot 的 iOS 应用程序，在升级到 Xcode 4.5 后，我在构建时看到以下错误：

```
clang: error: argument unused during compilation:
'-falign-loops=16' Command
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/u‌​sr/bin/clang
failed with exit code 1 
```

什么可能导致这种情况，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T17:29:29.673

`-falign-loops`是 clang 不使用的 GCC 选项。这通常是 clang 中的警告，因此我假设您已将编译器选项设置为将警告视为错误 ( `-Werror`)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T00:41:22.170

我在使用 CorePlot 时遇到了同样的问题，以下解决了问题

*   转到**CorePlot-CocoaTouch**项目
*   **构建设置**
*   向下滚动到**构建选项**
*   **C/C++/Objective-C 的编译器**将其值设置为**LLVM GCC 4.2**

希望它能解决你的问题

# foursquare - Foursquare API：如何在foursquare签到或评论中提及朋友？

> ID：12695063
> 
> 赞同：0
> 
> 时间：2012-10-02T17:16:04.057
> 
> 标签：foursquare

通过foursquare 网站，我假设foursquare iPhone 应用程序现在可以在签到留言或签到评论中提及朋友。然后，朋友会收到提及的通知。

我们如何标记喊叫/评论以发送到 checkins/add 或 addcomment 端点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T19:35:28.303

我们刚刚向应用程序开发人员提供了此功能。访问[https://developer.foursquare.com/docs/checkins/add](https://developer.foursquare.com/docs/checkins/add)以获取有关如何用提及来标记您的呼喊的信息。

# matlab - 从 OpenCV (C++) 为 Matlab 保存双精度矩阵

> ID：12695066
> 
> 赞同：4
> 
> 时间：2012-10-02T17:16:10.913
> 
> 标签：matlab, opencv

我想将 OpenCV 创建的矩阵与 Matlab 中的矩阵进行比较。如果矩阵是 uint8，将它们保存为 pgm 图像就可以了。但我的矩阵是 CV_64FC1 (double)，不能保存为图像。有什么简单的方法可以保存我的双矩阵以便在 Matlab 中阅读？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T19:16:46.727

从 OpenCV 示例中尝试这个。

```
Mat r
std::stringstream ss;
ss << format(r,"csv") << endl << endl;
myFile << ss.str();
// or even this
myFile << format(r,"csv") << endl << endl; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T18:17:42.510

只需将每个像素的强度写入文件，然后使用 MATLAB 使用`importdata`.

# testing - 微软在 tabControl 上测试 ui 自动化错误

> ID：12695068
> 
> 赞同：1
> 
> 时间：2012-10-02T17:16:13.390
> 
> 标签：testing, user-interface, automation

测试 ui 自动化存在一个错误，它无法识别 Visual Studio 2010 上的 tabControl 内的元素

有人知道它是否已经在 VS2012 上修复或者是否有解决方法？

我会很感激你的回答

# windows - 如何从桌面应用程序中查找外部 IP。注意：不是本地IP

> ID：12695072
> 
> 赞同：0
> 
> 时间：2012-10-02T17:16:42.883
> 
> 标签：windows, geolocation, ip, desktop-application

我正在为“C”中的桌面应用程序在 Windows 上处理一些遗留代码。客户端需要知道运行该应用程序的用户的地理位置。我的地理位置代码都在工作（使用 MaxMind: `http://dev.maxmind.com/`）。但现在我正在寻求帮助以获取他们的外部 IP。

从整个 SO 和其他地方对此主题的所有讨论中，似乎有一种方法可以通过连接到“可靠”主机（服务器）然后进行某种查找来做到这一点。我对 WinSock 不太了解，但这可能是最容易使用的技术。另一种选择是使用 WinHttpConnect 技术。两者都有“C”接口。

感谢您的支持和建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T17:20:39.403

您可以编写一个简单的 Web 服务来检查程序在连接到该 Web 服务时提供的 IP 地址。

以[http://whatismyip.com](http://whatismyip.com)为例。

请注意，如果沿途有代理服务器，HTTP 协议可以提供多个地址。

您可以设计简单的 Web 服务来获取客户端的 IP。看

[如何在 WebMethod 中获取调用者的 IP 地址？](https://stackoverflow.com/questions/130328/how-do-i-get-the-callers-ip-address-in-a-webmethod)

然后将该地址返回给调用者。

请注意，在大约 15% 的情况下（我的经验指标），地理位置将会偏离。典型的例子是大多数 AOL 用户通过少数代理服务器进行路由。但是，还有很多其他情况，公网 IP 与用户的实际位置不匹配。此外，地理 IP 数据库有时是错误的。

**编辑**

仅使用浏览器内代码无法检测您的外部 IP 地址。

WebSocket 没有规定公开您的外部 IP 地址。

[https://www.rfc-editor.org/rfc/rfc6455](https://www.rfc-editor.org/rfc/rfc6455)

您需要一个外部服务器来告诉您它看到的 IP。

# php - PHP时间戳到HTML 5输入类型=日期时间元素

> ID：12695082
> 
> 赞同：6
> 
> 时间：2012-10-02T17:17:21.163
> 
> 标签：php, html, input, timestamp

我在 PHP 中有一个 unix 时间戳（int）。我想在 HTML5 日期时间输入元素中以一种很好的方式显示这个值。我希望能够让用户以一种漂亮的方式看到这个值，并对其进行编辑。有什么好的方法可以做到这一点，还是我在自欺欺人，我将不得不对大量的字符串操作大惊小怪？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-02T17:20:07.527

`HTML5 Input time`是这样的：[1985-04-12T23:20:50.52](http://www.w3.org/TR/html-markup/input.datetime-local.html)

你可以在 PHP 中这样做：

```
echo date("Y-m-d\TH:i:s"); 
```

输出

```
2012-10-02T19:12:49 
```

带时间戳的 HTML

```
<input type="datetime"  value="<?php echo date("Y-m-d\TH:i:s",$timestamp); ?>"/> 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-05-19T06:44:24.037

其他示例都是为 TIME 元素生成有效时间戳格式的旧方法 - php 中的新热点：

```
<time><?php echo date(DATE_W3C); ?></time> 
```

这将生成如下格式：

“2013-05-19T06:40:08+00:00”

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-02T17:21:03.207

根据[HTML5 规范*input type="datetime"*](http://www.w3.org/TR/html-markup/input.datetime.html)，它应该像设置`value`属性一样简单。

```
value="<?php echo date('c', $timestamp); ?>" 
```

有关其他格式化程序，请参阅[PHP 的 date() 函数](http://php.net/manual/en/function.date.php)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-01-26T06:32:53.507

**Datetime**在 chrome 上对我不起作用，**datetime-local**允许我从弹出窗口中选择日期和时间。

例子

```
<input type="datetime-local" name="xyz" value="<?php echo date("Y-m-d\TH:i:s",time()); ?>"/> 
```

*time() 函数不相关，我使用它是为了让用户可以轻松地从当前.. 之后或之前的时间中进行选择。*

# android - 在 AutoCompleteTextView 中设置进度微调器

> ID：12695089
> 
> 赞同：1
> 
> 时间：2012-10-02T17:17:58.513
> 
> 标签：android, progressdialog

我想在 AutoCompleteTextView 中插入一个进度微调器，而另一个类执行自动完成功能。我在 EditText 中阅读了框架 Layout ed 修复它，但问题是：如何设置进度微调器？以及如何控制它？

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-10-02T17:45:07.093

在要显示 ProgressBar 的布局中使用它。您可以设置可见性、View.VISIBLE、View.GONE 使其可见和不可见。

```
<ProgressBar
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         style="@android:style/Widget.ProgressBar.Small"
         android:layout_marginRight="5dp" /> 
```

# python - 当我从 Django 网站使用 PyVirtualDisplay 运行 Selenium 时，为什么会出现 gnome 权限错误？

> ID：12695091
> 
> 赞同：1
> 
> 时间：2012-10-02T17:18:02.847
> 
> 标签：python, django, selenium, pyvirtualdisplay

我正在尝试使用 Python 的 Selenium 绑定以编程方式与网站交互，作为 Django 网站的一部分。

由于我的 Selenium 代码作为 Django 网站的一部分运行，因此默认情况下（如果我理解正确的话）没有可供浏览器使用的显示。因此，我试图在我的 Selenium 代码运行之前使用 PyVirtualDisplay 启动 Xvfb。

这是我的代码：

```
from pyvirtualdisplay import Display
from selenium import webdriver

display = Display(visible=False, size=(800, 600))
display.start()

browser = webdriver.Firefox() 
```

当我通过 SSH 连接到我的服务器时（运行 Debian Squeeze、Python 2.6.6、Selenium 2.25、PyVirtualDisplay 0.1.0），以我自己的身份运行 Python 控制台，然后输入上面的代码，它工作正常。

但是，当我尝试从我的 Django 站点运行该代码，或用于`su`运行 Python 控制台时`www-data`（我相信这是 Django 运行的用户），我收到以下错误：

```
selenium.common.exceptions.WebDriverException: Message: 'The browser appears to have exited before we could connect. The output was: 
(process:2963): Gtk-WARNING **: Locale not supported by C library.
    Using the fallback 'C' locale.
    Xlib:  extension "RANDR" missing on display ":1082.0".

    (firefox-bin:2963): libgnomevfs-WARNING **: Unable to create ~/.gnome2 directory: Permission denied
    Could not create per-user gnome configuration directory `/var/www/.gnome2/\': Permission denied' 
```

我对 Xvfb 和 Linux 有点陌生，所以我不太确定我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T17:36:35.607

我相信这是一个简单的权限错误。

如您所见，在 ubuntu apache 的主目录上，`/var/www` 我认为您只需要确保 apache 对其主目录具有写访问权。我在 ubuntu 12.04 上的默认设置是

```
daniel@daniel:/var/www$ ls -la
total 12
drwxr-xr-x  2 root root 4096 Sep 15 11:43 .
drwxr-xr-x 14 root root 4096 Oct  2 08:54 ..
-rw-r--r--  1 root root  177 Sep 15 11:43 index.html 
```

`www-data`没有对其自己的主目录的写访问权限！

也许您可以让 www-data 拥有该目录，或者创建一个具有写入权限的管理员组并将其添加`www-data`到其中？

[关于授予对https://superuser.com/questions/19318/how-can-i-give-write-access-of-a-folder-to-all-users-in-linux](https://superuser.com/questions/19318/how-can-i-give-write-access-of-a-folder-to-all-users-in-linux)写入权限的其他一些线程`/var/www`

# javascript - 除非选择单选按钮，否则如何使复选框变灰？

> ID：12695095
> 
> 赞同：8
> 
> 时间：2012-10-02T17:18:25.483
> 
> 标签：javascript, css, checkbox, radio

对 javascript 来说非常新，但如果能帮助我入门，我们将不胜感激。我有一个简单的表格：

```
<div><input type="radio" name="o1" id="burger" />Burger</div>
<div id="yesFries"><input type="checkbox" name="e1" id="fries" />Fries with that?</div>
<div><input type="radio" name="o1" id="pizza" />Pizza</div>
<div><input type="radio" name="o1" id="hotdog" />Hot Dog</div> 
```

除非选择了“汉堡”单选按钮，否则我希望“薯条”复选框变灰。我不确定 Javascript 或 CSS 是否是最好的方法。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T17:24:56.573

您要做的是将元素设置为禁用，直到收音机的状态发生变化，这将使用 javascript 完成，然后您将在单选按钮的 onchange 中添加/删除禁用的类。

您正在考虑使用哪些 JavaScript 库？jQuery 将使这变得相当简单。

```
$('#burger').change( function () {
    if ($('#burger').checked() ) {
        $('#fries').removeClass('disabled');
    } else {
        $('#fries').addClass('disabled');
    }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-14T22:01:35.717

实际上，您可以使用一点 CSS3 来模拟一个非常简单的解决方案。在这里，我们不会将按钮变灰，但您仅在选中复选框时才使其可见。但是，我们也可以在这个例子的基础上用更多的 CSS 让它变灰。您将始终必须考虑要提供什么样的支持。但是，如果您可以在现代浏览器上使用它，那就试试吧。

这是HTML

```
<label>
    <input type="checkbox" name="test" />
    <span>I accept terms and cons</span><br><br>
    <button>Great!</button>
</label> 
```

这是CSS

```
button { display: none}
:checked ~ button {
    font-style: italic;
    color: green;  
    display: inherit;
} 
```

这是演示[http://jsfiddle.net/DyjmM/](http://jsfiddle.net/DyjmM/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-02T17:24:55.233

如果您使用的是[jQuery](http://jquery.com)，一个非常易于使用的 Javascript 库（我强烈推荐给初学者），您可以通过将一些代码添加到页面中的标签来分两步执行此操作，其中`script`包含：

```
$(function(){
    $("#burger").change(function() {
        if ($(this).is(':checked')) $("#fries").removeAttr("disabled");
        else $("#fries").attr("disabled", true);
    });
}); 
```

这段代码做了三件事：

*   监听 上的`change`事件`#burger`。
*   当发生变化时，执行提供的`function`.
*   在该函数中，将 的`disabled`属性设置`#fries`为 的`checked`属性`#burger`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-02T17:35:09.300

我注意到您没有指定是否可以使用 jQuery。如果这是一个选项，请参阅我强烈推荐的其他帖子之一。

如果您不能使用 jquery，请尝试以下操作：

```
<script>
  function setFries(){
    var el = document.getElementById("burger");
    if(el.checked)
      document.getElementById("fries").disabled = false;
    else
     document.getElementById("fries").disabled = true;    
  }  
</script>

<div><input type="radio" name="o1" id="burger" onchange="setFries();"/>Burger</div>
<div id="yesFries"><input type="checkbox" name="e1" id="fries" disabled="disabled"/>Fries with that?</div>
<div><input type="radio" name="o1" id="pizza" onchange="setFries();"/>Pizza</div>
<div><input type="radio" name="o1" id="hotdog" onchange="setFries();"/>Hot Dog</div>​ 
```

[jsFiddle](http://jsfiddle.net/Kbw7g/1/)上的简单示例

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-02T17:26:33.510

使用 jQuery

```
`$().ready(function() {
  var toggleAskForFries = function() {
    if($('#burger').is(':checked')) {
      $('#yesFries').show()
    else
      $('#yesFries').hide()
    }
    return false
  }
  toggleAskForFries()
  $('#burger').change(toggleAskForFries)
}` 
```

* * *

 `## 回答 #6

> 赞同：0
> 
> 时间：2012-10-02T17:27:20.067

使用 jQuery： http: [//jsfiddle.net/kboucher/cMcP5/](http://jsfiddle.net/kboucher/cMcP5/)（还为您的标签添加了标签）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-02T17:49:21.190

您可以在没有任何函数库的情况下尝试这个

```
<input type="checkbox" name="e1" id="fries" disabled /> 
```

**JS**

```
window.onload=function(){
    var radios=document.getElementsByName('o1');
    for(i=0;i<radios.length;i++) radios[i].onclick=checkFire;
};

function checkFire(e)
{
    var fires=document.getElementById('fries');
    var evt=e||window.event;
    var target=evt.target||evt.srcElement;
    if(target.checked && target.id==='burger') fires.disabled=false;
    else 
    {
        fires.checked=false;
        fires.disabled=true;
    }
} 
```

[**演示**](http://jsbin.com/ufunoh/10/edit)。`

# spring - Spring，JSF，如何在来自两个不同会话的 bean 之间发送事件

> ID：12695099
> 
> 赞同：1
> 
> 时间：2012-10-02T17:18:38.590
> 
> 标签：spring

我想在来自不同会话实例的 bean 之间发送事件或消息。

*发送事件的服务：*

```
@Service
@Scope("singleton")
public class ServiceA
{
   void methodA()
   {      
      ...
      messanger.post(new ReloadColorsEvent());  
   }
} 
```

*处理事件的Bean：*

```
 @Bean
 @Scope("session")
 public class EventHandler() 
 {
    @PostContruct
    void registerEvents()
    {
      messanger.register(this);
    }   

    void handleFun(ReloadColorEvent reloadColorEvent)
    {   ... 
    }
 } 
```

假设我们有 2 个登录用户。因此，创建了 2 个会话（*会话 1*和*会话 2*）。会话 1 和会话 2 有自己的`EventHandlers`. 在`methodA`被称为事件之后被发送。

现在，我想通过session1 和 session2`handleFun`的对象中的方法来处理这个事件。`EventHandler`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T17:41:59.560

它有一点特别之处——因为你用 s 注册了你`EventHandler`的 s `messanger`，你可以让它向他们发送事件。并且由于您用于`this`注册`EventHandler`，因此不应干扰范围代理（如果您使用它们）。

但是，请注意以下几点：

*   销毁会话时不要忘记取消注册`EventHandler`（例如，在`@PreDestroy`方法中）
*   注意线程安全
*   如果您`EventHandler`引用其他`session`使用范围代理的范围 bean 并且您在内部使用它们，则会遇到问题`handleFun()`。由于`handleFun()`在会话上下文之外执行，`session`代理后面的 -scoped bean 将不可用

# c++ - 为什么从控制台编译后取消引用 string::iterator 不会在 .end() 引发错误？

> ID：12695101
> 
> 赞同：0
> 
> 时间：2012-10-02T17:18:53.783
> 
> 标签：c++, visual-studio-2010, iterator

Windows 7 64 SP1，Boost 1.42，MS VS 2010 Ultimate，C++

这个精简的代码使用这些开关在“Visual Studio x64 命令提示符（2010）”中编译和运行良好：

`cl /EHsc /W4 /nologo`

```
#include <string>

using namespace std;        // I know not to use.

int main() {

  string sentence = "abc";
  string word_found = "";
  string::const_iterator it = sentence.begin();

  while ( *it != ' ' && it != sentence.end() )  
    word_found += *it++;                        
} 
```

但是，在 VS IDE 中编译后，运行时会崩溃并出现以下错误：

```
Expression: string iterator not dereferencable 
```

问题显然出在`*it`in `( *it != ' ' && it != sentence.end() )`。我只需要将表达式短路，因此现在右手表达式 ,`*it != ' '`不会计算：

```
while ( it != sentence.end() && *it != ' '  ) 
```

然后它运行良好。

但是为什么从命令提示符编译原始代码后它可以完美运行呢？在这个子集派生的更大的程序中没有其他异常行为。什么 string::iterator 不会导致同样的问题？

FWIW，这些是默认的 MS VS 命令行选项：`/ZI /nologo /W3 /WX- /Od /Oy- /D "WIN32" /D "_DEBUG" /D "_CONSOLE" /D "_UNICODE" /D "UNICODE" /Gm /EHsc /RTC1 /GS /fp:precise /Zc:wchar_t /Zc:forScope /Fp"Debug\test short.pch" /Fa"Debug\" /Fo"Debug\" /Fd"Debug\vc100.pdb" /Gd /analyze- /errorReport:queue`

**为什么命令行编译器和 IDE 编译器生成不同的可执行文件？是否有一个开关可以添加到命令提示符编译器中，使可执行文件的行为方式与从 VS IDE 编译时相同**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T17:26:20.053

这些运行时检查仅在*调试*版本中默认启用。你要么需要

*   [通过使用`/MDd`or`/MTd`选项](http://msdn.microsoft.com/en-us/library/2kzt1wy3.aspx)编译，使用其中一个调试运行时进行构建，或者

*   [`_ITERATOR_DEBUG_LEVEL`](http://msdn.microsoft.com/en-us/library/hh697468.aspx)通过将`1`( )更改为启用检查的迭代器`/D_ITERATOR_DEBUG_LEVEL=1`。

# jsp - getURI 显示 JSP 名称而不是浏览器 URL？

> ID：12695105
> 
> 赞同：4
> 
> 时间：2012-10-02T17:19:14.190
> 
> 标签：jsp, analytics

我正在尝试将在浏览器地址栏中查看的 URL 提取到 Google Analytics 标记中。我使用了

<% String getURI=request.getRequestURI(); %>

方法，但它向我显示 JSP 文件名/路径，而不是浏览器中的内容。

我做错了吗，还是因为我在 VM 上的开发人员工具包中这样做，所以这是预期的？我浏览了论坛并查看了谷歌，但找不到我的问题的答案，似乎没有什么可以解决它在本地环境中工作方式不同的可能性，所以我认为我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T17:31:28.370

如果 JSP由前端控制器[转发](http://docs.oracle.com/javaee/6/api/javax/servlet/RequestDispatcher.html#forward%28javax.servlet.ServletRequest,%20javax.servlet.ServletResponse%29)，那么[`HttpServletRequest#getRequestURI()`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getRequestURI%28%29)将确实返回 JSP 的 URI，而不是客户端最初请求的原始 URI（在浏览器的地址栏中可见）。

在转发的情况下，原始请求 URI 可用作请求属性，其键由 标识[`RequestDispatcher#FORWARD_REQUEST_URI`](http://docs.oracle.com/javaee/6/api/javax/servlet/RequestDispatcher.html#FORWARD_REQUEST_URI)，即[`javax.servlet.forward.request_uri`](http://docs.oracle.com/javaee/6/api/constant-values.html#javax.servlet.RequestDispatcher.FORWARD_REQUEST_URI)。

所以，这应该这样做：

```
String getURI = request.getAttribute(RequestDispatcher.FORWARD_REQUEST_URI); 
```

或者当您仍在使用 Servlet 2.5 或更早版本时（此常量是在 Servlet 3.0 中引入的）：

```
String getURI = request.getAttribute("javax.servlet.forward.request_uri"); 
```

顺便说一句，它在 JSP EL 中可用，如下所示：

```
${requestScope['javax.servlet.forward.request_uri']} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T17:27:02.500

是的，这就是它应该做的。使用 request.getRequestUrl()，这会给你完整的（http://www...../xyz.jsp）

编辑有关两种方法的描述请参阅此处 [http://docs.oracle.com/javaee/1.3/api/javax/servlet/http/HttpServletRequest.html](http://docs.oracle.com/javaee/1.3/api/javax/servlet/http/HttpServletRequest.html)

编辑 2，简而言之，您的查询是您需要您所在的 tge 文件的文件名。

尝试类似的东西

```
request.getRequestURI().substring(request.getRequestURI().lastIndexOf("/")) 
```

这将为您提供字符串welcome.html。如果您在welcome.html 中，您可以在前面加上'/'。不确定是否有直接的方法可以满足您的需求

# c# - 超时已过。操作完成前超时时间已过或服务器无响应

> ID：12695115
> 
> 赞同：0
> 
> 时间：2012-10-02T17:20:02.130
> 
> 标签：c#, asp.net, sql, c#-4.0

我正在尝试执行此查询：

```
SELECT * from vwLstDtaLines d1,vwLStDtafiles d2 where d1.DtaLinePaymentDate='1/1/2000'or d1.DtaLinePaymentDate='1/1/2012'  or d1.DtaLineUserCre='abc' or d1.DtaLineUserMatch='abc' or d2.DtaFileName='Sent'

Timeout expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. 
```

一次又一次地得到这个错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T18:04:26.467

好吧，看看你的 SQL，在我看来你正在创建一个比你想要的更大的结果集。

```
SELECT * 
from vwLstDtaLines d1,vwLStDtafiles d2 
where d1.DtaLinePaymentDate='1/1/2000' or 
d1.DtaLinePaymentDate='1/1/2012'  or 
d1.DtaLineUserCre='abc' or 
d1.DtaLineUserMatch='abc' or 
d2.DtaFileName='Sent' 
```

此 SQL 语句在两个视图之间没有显式 JOIN。因此，您得到的结果集的大小可能类似于 d1r * d2r，其中 d1r 是 d1 中的行数，d2r 是 d2 中的行数。

我会开始在那里寻找。在 SQL Server 中运行以下查询以找出：

```
SELECT COUNT(*)
from vwLstDtaLines d1,vwLStDtafiles d2 
where d1.DtaLinePaymentDate='1/1/2000' or 
d1.DtaLinePaymentDate='1/1/2012'  or 
d1.DtaLineUserCre='abc' or 
d1.DtaLineUserMatch='abc' or 
d2.DtaFileName='Sent' 
```

如果行数是天文数字，则说明存在连接问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T17:21:31.847

你可以增加你`Connect Timeout`的`string connection`

注意：默认值为 15 秒

调整样本

```
<add name="ConnectionString" connectionString="Data Source=;Initial Catalog=;Persist Security Info=True;User ID=;Password=;Connect Timeout=200" providerName="System.Data.SqlClient"/>
</connectionStrings> 
```

链接：http: [//msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.connectionstring.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.connectionstring.aspx)

# jqgrid - jqgrid - 带有附加 postData 参数的 serializeGridData

> ID：12695119
> 
> 赞同：0
> 
> 时间：2012-10-02T17:20:11.777
> 
> 标签：jqgrid

我正在尝试使用 serializeGridData 使用 Oleg 的这个答案将我的 postdata转换[为](https://stackoverflow.com/users/315935/oleg)[JSON](https://stackoverflow.com/questions/3161302/jqgrid-page-1-of-x-pager/3161542#3161542)。这是我的代码。

```
jQuery(function() {
   $('#grid').jqGrid({
       ........
       ........
       postData: {
        param1: function() { return $("param1").val(); },
        param2: function() { return $("param2").val(); },
        searchText: function() { return $("searchText").val(); },
        totalRecords: function() { return msgGrid.getGridParam("records"); }
    },
    serializeGridData: function (postData) {
           return JSON.stringify(postData);
    },
    ajaxGridOptions : {
        contentType: 'application/json; charset=utf-8'
    }
    });
}); 
```

进入 serializeGridData 的 postData 不会将 postData {} 中定义的自定义参数替换为实际值。我已经在 firebug 中进行了调试，这就是数据进入 serializeGridData 方法的方式。所以最终 JSON.stringify 不会转换请求数据中的 param1、param2.. 值。如何修复它以发送自定义参数的实际值？提前致谢..

```
_search     false
nd      1349195468864
page        1
rows        25
sidx        "sortcol_name"
sord        "desc"
param1      function()        // expect to have actual param1 value
param2      function()
searchText          function()
totalRecords    function() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T17:46:52.500

当`JSON.stringify`遇到一个函数时，它会将其[审查为 null](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify)。尝试设置没有函数的数据，如下所示：

```
postData: {
    param1: $("param1").val(),
    // etc.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T17:55:19.740

我认为你应该枚举回调`postData`内部的所有属性并使用它内部来验证某些属性是否是方法。如果是方法，您应该调用该方法并将结果保存在具有相同名称的属性中。从[答案或](https://stackoverflow.com/a/7365228/315935)[答案](https://stackoverflow.com/a/6296601/315935)的代码中查看实现。`serializeGridData``$.isFunction``serializeRowData`

# ruby-on-rails-3.2 - Rails 3 有条件的急切加载

> ID：12695120
> 
> 赞同：2
> 
> 时间：2012-10-02T17:20:23.937
> 
> 标签：ruby-on-rails-3.2

从 Rails 文档[http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html)：

```
Post.includes([:author, :comments]).where(['comments.approved = ?', true]).all 
```

请注意，使用这样的条件可能会产生意想不到的后果。在上面的示例**中，根本不返回没有批准评论的**帖子，因为条件适用于整个 SQL 语句，而不仅仅是关联。

好的，那么如何返回所有帖子，包括示例中没有批准评论的帖子？

我可以在 SQL 中做到这一点：

```
SELECT posts.* from posts LEFT JOIN comments ON (comments.post_id = posts.id AND comments.approved = true); 
```

但这不适用于 rails 的 joins 方法，因为下一次访问 Post.comments 将触发一个 SQL 请求，该请求将使所有评论获得批准和未批准。

有什么线索吗？谢谢

导轨 3.2.8

# sql - 如何在 Sybase ASE 上获取用户定义的数据类型列表？

> ID：12695128
> 
> 赞同：4
> 
> 时间：2012-10-02T17:21:27.043
> 
> 标签：sql, sap-ase, user-defined-types

我使用以下查询来获取用户定义数据类型 (UDDT) 的列表：

```
SELECT USER_NAME(S.uid) as owner, S.name as Name, T.name as datatypename, 
         OBJECT_NAME(S.domain), OBJECT_NAME(S.tdefault) 
FROM systypes S,systypes T 
WHERE S.type=T.type AND T.usertype<100 AND T.usertype NOT IN(18,24,25,80) AND S.usertype>100  
ORDER BY 1, 2 
```

在 Sybase 12.5 上，它曾经返回以返回每个 UDDT 的单行。现在使用 Sybase 15.x，它返回 2 行：

```
owner   Name    datatypename 
'dbo'  'auid'  'varchar'
'dbo'  'auid'  'longsysname' 
```

UDDT 的数据类型实际上是`varchar`. 我不确定`longsysname`是从哪里来的。返回适用于 12.5.x 和 15.x ASE 数据库的 UDDT 列表的正确方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T20:37:01.747

试试这个代码：

```
select s1.name, 
        (select name 
         from systypes s2 
         where s2.usertype=(
                            select min( s3.usertype) 
                            from systypes s3 
                            where  s3.hierarchy=s1.hierarchy)
        ) base_type,  USER_NAME(s1.uid) as owner
    from systypes s1
    WHERE s1.usertype>100 
```

# java - 使用 volatile 使枚举线程安全

> ID：12695133
> 
> 赞同：5
> 
> 时间：2012-10-02T17:21:44.363
> 
> 标签：java, android

我已经运行它正在从互联网下载一些文件，它看起来如下：

```
class Downloader implements Runnable {
    volatile Status status;
    public void run() {
       // ...
       while (status.isInProgress()) { ... }
    }
} 
```

状态如下：

```
public enum Status {
    PAUSED {
        public int someData() { return 0; }
    },
    INPROGRESS {
        public int someData() { return 1; }
    }

    public abstract int someData();

    private String msg; 
    public String getSomeMsg() {
        return msg;
    }
    public void setSomeMsg(String s) {
        msg=s;
    }

    public boolean isInProgress() {
        return this == INPROGRESS;
    }
} 
```

当用户按下暂停按钮时，状态变量从 GUI 线程设置为暂停。

代码使用java 1.6编译，针对Android平台编译。

我的问题是这样设置/读取枚举是否是线程安全的？我在这里阅读了很棒的文章：

[http://javarevisited.blogspot.com/2011/06/volatile-keyword-java-example-tutorial.html](http://javarevisited.blogspot.com/2011/06/volatile-keyword-java-example-tutorial.html)

我很相信它是保存的，但它并没有说太多关于枚举。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T18:08:43.987

因此，在[此](http://www.javamex.com/tutorials/synchronization_volatile.shtml)页面中，可以同时使用`volatile`原语和对象（包括枚举）。此外，这是`volatile`您可以[在此处](http://www.javamex.com/tutorials/synchronization_volatile_typical_use.shtml)看到的键工作的典型用法。

注意：假设您的循环在完成时会中断（因为您没有定义 DONE 枚举值），最坏的情况是（i）用户暂停和（ii）下载在下一次迭代之前完成。在这种情况下，用户单击暂停，但会看到“下载完成”消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T17:40:28.140

我假设您有多个线程从“状态”中读取值。如果是这样，代码是“保存”的，以`volaile`确保您的 CPU 在处理时始终具有“新鲜”值（它无法从缓存中读取它）。但这不会阻止任何并发更改或其他东西，我只会保证如果某个线程更改该值，其他线程将读取该更改的值。

# c++ - 如何将 LPWSTR*（或 WCHAR*）转换为 LPWSTR

> ID：12695134
> 
> 赞同：1
> 
> 时间：2012-10-02T17:21:56.900
> 
> 标签：c++, registry, type-conversion

我很难将值转换为 LPWSTR。我正在获取一个注册表值，并尝试将结果作为 LPWSTR 返回。使用 RegQueryValueExW 的注册表调用似乎适用于存储结果的各种类型，但我无法将它们中的任何一个转换回 LPWSTR。

```
LPWSTR value;
HKEY hKey;

long result = RegOpenKeyExW(HKEY_LOCAL_MACHINE, L"RegEntry1", 0, ACCESS|KEY_WOW64_32KEY, &hKey); 
if (result == ERROR_SUCCESS)
{
   //WCHAR buffer[512];
   //TCHAR buffer[512];
   LPWSTR buffer[512];
   DWORD bufferSize = sizeof(buffer); 
   ULONG queryVal = 0; 

   queryVal = RegQueryValueExW(hKey, L"Path", 0, NULL, (LPBYTE)buffer, &bufferSize); 
   if (queryVal == ERROR_SUCCESS)
   { 
      //Access violation error here; I need some type of conversion.
      value = buffer;
   }
} 
```

到目前为止，我在这里读过的任何帖子都没有让我得到答案。C++ 不是我的主要开发语言。

更新：没有一个建议的答案对我有用。我找到了另一种方法来做我需要的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T17:29:10.397

你不想要 的缓冲区`LPWSTR`，你想要 的缓冲区`wchar_t`。`LPWSTR`指向它的指针将是`wchar_t *`.

WinNT.h 中的这两行是相关的：

```
typedef wchar_t WCHAR;    // wc,   16-bit UNICODE character

typedef __nullterminated WCHAR *NWPSTR, *LPWSTR, *PWSTR; 
```

**编辑：**我怀疑问题出在您没有向我们展示的部分代码上。你是`value`从函数返回吗？如果是这样，那么问题是您正在返回一个指向已超出范围并被销毁的缓冲区的指针。我会返回一个`std::wstring`or `CString`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T17:40:33.483

当你的`buffer`变量`wchar_t*`应该声明一个 512 个`wchar_t`字符的数组时，它声明了一个由 512 个指针组成的数组。注释掉的第一行代码是正确的代码：

```
WCHAR buffer[512]; 
DWORD bufferSize = sizeof(buffer);  

ULONG queryVal = RegQueryValueExW(hKey, L"Path", 0, NULL, (LPBYTE)buffer, &bufferSize);  
if (queryVal == ERROR_SUCCESS) 
{  
    //...
} 
```

请记住，如果注册表值未使用自己的空终止符存储，则缓冲区不会以空终止，因此您应该为自己的空终止符分配一些额外的空间，以防万一：

```
WCHAR buffer[512+1]; 
DWORD bufferSize = (sizeof(buffer) - sizeof(WCHAR));  

LONG queryVal = RegQueryValueExW(hKey, L"Path", 0, NULL, (LPBYTE)buffer, &bufferSize);  
if (queryVal == ERROR_SUCCESS) 
{  
    buffer[bufferSize / sizeof(WCHAR)] = 0;
    //...
} 
```

或者，`RegGetValue()`改为使用它为您处理空终止符：

```
WCHAR buffer[512+1];
DWORD bufferSize = sizeof(buffer);  

LONG queryVal = RegGetValueW(hKey, NULL, L"Path", RRF_RT_REG_SZ | RRF_RT_REG_EXPAND_SZ, NULL, buffer, &bufferSize);
if (queryVal == ERROR_SUCCESS) 
{  
    //...
} 
```

# ruby - 将两个数组组合成一个哈希

> ID：12695135
> 
> 赞同：4
> 
> 时间：2012-10-02T17:22:10.683
> 
> 标签：ruby, arrays, hash

我正在尝试将两个数组组合成一个哈希。

```
@sample_array = ["one", "Two", "Three"]
@timesheet_id_array = ["96", "97", "98"] 
```

我想将结果输出到一个名为@hash_array 的哈希中。有没有一种简单的方法可以将两者组合在一个代码块中，这样如果你在最后调用 puts 它在控制台中看起来像这样

```
{"one" => "96", "Two" => "97", "Three" => "98"} 
```

我认为这可以用一两行代码来完成。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-10-02T17:30:06.140

试试这个

```
keys = [1, 2, 3]
values = ['a', 'b', 'c']
Hash[keys.zip(values)] 
```

谢谢

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-02T17:29:55.430

```
@hash_array = {}
@sample_array.each_with_index do |value, index|
  @hash_array[value] = @timesheet_id_array[index]
end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-06-12T15:09:48.263

恕我直言，看起来最好：

```
[:a,:b,:c].zip([1,2,3]).to_h

# {:a=>1, :b=>2, :c=>3} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T17:26:06.527

Nic 博士建议在[http://drnicwilliams.com/2006/10/03/zip-vs-transpose/上很好地解释了 2 个选项](http://drnicwilliams.com/2006/10/03/zip-vs-transpose/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-02T17:27:32.230

```
@hash_array = {}
0.upto(@sample_array.length - 1) do |index|
  @hash_array[@sample_array[index]] = @timesheet_id_array[index]
end
puts @hash_array.inspect 
```

# php - 有没有办法为没有实际支持页面的 URL 提供网页？

> ID：12695142
> 
> 赞同：2
> 
> 时间：2012-10-02T17:22:45.607
> 
> 标签：php, html, url, webserver

我很想知道是否有办法让 PHP 页面或其他一些服务器端逻辑拦截 URL，例如，如果查询 URL “www.mysite.com/about/mission_statement”但我没有“about/mission_statement”的页面，我可以从“some/other/folder/with/pages”中提供内容。

有人知道这是否可能，还是我必须确保我有一个可用于我希望处理的每个 url 地址的页面？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T17:24:27.123

您不能直接在 PHP 中执行此操作，因为调用 PHP 页面是为了处理给定的 URL，但您可以在 Web 服务器中执行此操作。

假设 Apache 看看 URL 重写

[http://httpd.apache.org/docs/2.2/rewrite/](http://httpd.apache.org/docs/2.2/rewrite/)

特别是对于您的情况，子主题

[http://httpd.apache.org/docs/2.2/rewrite/remapping.html](http://httpd.apache.org/docs/2.2/rewrite/remapping.html)

是相关的。

IIS 具有类似的功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T17:42:12.787

再次假设您使用 Apache，那么您有很多选择：

对特定页面/内容使用重写规则（在另一个答案中指定）或在 .htaccess 文件中包含一行，将任何不存在的请求（404）重定向到您选择的特定位置/文件。

这通常是在您的 docroot 目录或其他选择的目录中使用[.htaccess文件中的以下代码来调用的：](http://httpd.apache.org/docs/current/howto/htaccess.html)

```
ErrorDocument 404 /whatever/path/to/file.php 
```

如果您在 PHP 中使用由 ID 或其他动态值键入的动态页面，例如：

```
http://www.somedomain.com/page.php?id=4 
```

那么如果内容不匹配或不存在，您需要创建一个重定向到您选择的页面的函数。

# java - 将 C++ 加密转换为 Java

> ID：12695145
> 
> 赞同：0
> 
> 时间：2012-10-02T17:23:16.293
> 
> 标签：java, c++, encryption, xor

我有以下 C++ 代码用 XOR 加密字符串。

```
#define MPI_CIPHER_KEY "qwerty"

Buffer FooClient::cipher_string(const Buffer& _landing_url)
{
    String key(CIPHER_KEY);
    Buffer key_buf(key.chars(), key.length());
    Buffer landing_url_cipher = FooClient::XOR(_url, key_buf);

    Buffer b64_url_cipher;
    base64_encode(landing_url_cipher, b64_url_cipher);

    return b64_url_cipher;
}

Buffer FooClient::XOR(const Buffer& _data, const Buffer& _key)
{
    Buffer retval(_data);
    unsigned int klen=_key.length();
    unsigned int dlen=_data.length();
    unsigned int k=0;
    unsigned int d=0;

    for(;d<dlen;d++)
    {
        retval[d]=_data[d]^_key[k];
        k=(++k<klen?k:0);
    }

    return retval;
} 
```

我在[这个问题](https://stackoverflow.com/questions/5126616/xor-operation-with-two-strings-in-java)中看到过这样的java impl。这对这种情况有用吗？

```
String s1, s2;

StringBuilder sb = new StringBuilder();
for(int i=0; i<s1.length() && i<s2.length();i++)
    sb.append((char)(s1.charAt(i) ^ s2.charAt(i)));
String result = sb.toString(); 
```

或者有更简单的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T18:04:43.177

在我看来不一样。无论 _key 长度是多少，c++ 版本都会循环遍历所有 _data，并根据需要循环遍历 _key。（`k=(++k<klen?k:0);`在 C++ 代码中）

一旦击中最短的键或数据，您的就会返回。

就个人而言，我将从 C++ 到 Java 的最接近的字面翻译开始，保持参数和本地名称相同。

然后为它编写具有已知 C++ 输入和输出的单元测试

然后开始将 java 版本重构为使用 java idioms/etc 确保测试仍然通过。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T18:03:19.390

不 - java 代码只会异或到较小字符串的长度 - 而 C++ 代码将完全异或整个数据。假设 s1 是您的“关键”，这可以通过更改为

```
for(int i=0; i<s2.length();i++)
     sb.append((char)(s1.charAt(i%s1.length()) ^ s2.charAt(i))); 
```

也缺少返回值的 base-64 编码。

# php - 使用日光浴室的 Solr HTTP 错误“未知字段”错误

> ID：12695146
> 
> 赞同：0
> 
> 时间：2012-10-02T17:23:18.463
> 
> 标签：php, mysql, solr, solarium

我正在尝试使用 Solarium 和 PHP 从 MySQL 索引表。为了测试，我有一个国家列表，并在 Solr 中设置了一个核心来反映我在查询中检索的字段。尝试使用 Solarium 添加这些内容时出现错误：

```
Fatal error: Uncaught exception 'Solarium_Client_HttpException' with message 'Solr HTTP error: ERROR: [doc=1] unknown field 'code' (400)' in solariumQuickStart\Library\Solarium\Result.php on line 98
( ! ) Solarium_Client_HttpException: Solr HTTP error: ERROR: [doc=1] unknown field 'code' (400) in solariumQuickStart\Library\Solarium\Result.php on line 98 
```

这是我的代码：

```
foreach($worldDBRecords as $record)
{

    // create a new document for the data
    $doc = $update->createDocument();
    $doc->code = $record[0];
    $doc->name = $record[1];
    $doc->continent = $record[2];
    $doc->region = $record[3];
    $doc->population = $record[4];
    $update->addDocument($doc);
}

$update->addCommit();
$result = $client->update($update); 
```

我与 Solr 的连接正常，并且我在 Solarium_Client 配置中定义了核心。我还在我的模式文件中定义了代码字段，但它没有被识别。任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:36:48.287

我重新设置了 Solr 核心以确保我的配置正确。此外，我在 Solarium 配置中缺少“适配器选项”设置，它在此之后起作用：

```
$config = array(
'adapteroptions' => array(
'host' => 'localhost',
'port' => 8983,
'path' => '/solr/',
'core' => 'world'
)
); 
```

# jquery-ui - 当第一个字符为 0 时，自动完成不会启动

> ID：12695148
> 
> 赞同：4
> 
> 时间：2012-10-02T17:23:25.567
> 
> 标签：jquery-ui, jquery, autocomplete

有谁知道为什么当我输入的第一个字符为 0（零）时我的自动完成功能不起作用？出于调试目的，我将我的 AC 设置为只告诉我是否找到了一行，而且似乎对于我输入的任何字符作为第一个字符，它都会告诉我，除了 0。我必须在 0 之后输入第二个字符它开始工作并开始工作。就好像`minLength`属性是`2`第一个字符为 0 时。有没有人遇到或听说过这个并知道如何解决它？这是我的代码：

```
//AutoComplete code in question
$(function() {
    var itemcode_ac = {
        source: "/webservices/whs_bincodeAC.php",
        select: function(event, ui) {
            $('#txtBin').val(ui.item.value);
            getWhsInfo();
        },
        minLength: 1
    }
    $('#txtBin').autocomplete(itemcode_ac);
}); 
```

whs_bincodeAC.php：

```
<?php
if(isset($_GET["term"]) && !empty($_GET["term"])) {
    include_once $_SERVER['DOCUMENT_ROOT'].'/path/to/dbConnect.php';
    $term = mysql_real_escape_string(trim($_GET["term"]));
    //wildcard appended here for parameterized query (MySqli)
    $term .= "%";

    $query = "SELECT DISTINCT BinCode, ItemCode, ItemName, WhsCode, DataAsOfDate FROM whse_tbl 
        WHERE BinCode LIKE '$term' or ItemCode LIKE '$term' ORDER BY BinCode LIMIT 0, 10";
    $res = mysql_query($query);

    //This is the debug code I described above
    /*if($row = mysql_fetch_assoc($res))
        echo json_encode(array(array('value' => "is row")));
    else
        echo json_encode(array(array('value' => "no row")));
    return;*/

    $matches = array();
    while($row = mysql_fetch_assoc($res))
    {
        $matches[] = array('value' => $row["BinCode"], 'label' => $row["BinCode"].' - '.$row["ItemCode"],
            'name' => $row["ItemName"], 'whscode' => $row["WhsCode"], 'asOfDate' => $row["DataAsOfDate"]);
    }

    echo json_encode($matches);
}
?> 
```

注意：我的老板现在让我使用 MySql 而不是 MySqli 扩展。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T18:50:03.820

可能您正在执行以下操作。

`if(empty($_GET["bin"]))`或`if(!$_GET["bin"])`检查它的价值。

但是在这种情况下，如果`bin`是`0`，则第一种情况会导致结果，`true`而第二种情况会导致`false`.

所以`isset($_GET["bin"])`改用。

# javascript - JavaScript 淡入/淡出问题

> ID：12695150
> 
> 赞同：0
> 
> 时间：2012-10-02T17:23:29.600
> 
> 标签：javascript, jquery

我在尝试让我的淡入淡出效果正常工作时遇到了一些困难。我想我把它复杂化了。

我有 4 张图像，但是只有前 2 张需要淡出并在图像悬停时进入（其他 2 张图像与页面上的其他一些功能一起发挥作用）。

我的 HTML 是：

```
<div class="square">
    <div class="imageHolder">    
        <!--Comment out and uncomment BG image to show transitions on BG images-->    
        <img class="one" src="image_01.jpg" />
        <img class="two" src="image_02.jpg" />
        <img class="three" src="image_03.jpg" />
        <img class="four" src="image_04.jpg" />
    </div>
</div> 
```

图像，二，三，四不显示

JS：

```
$('.square').mouseover(function () {
            $(this).find('img').each(function () {
                if ($(this).attr('class') === 'two') {
                    $(this).fadeIn('slow');
                }
                if ($(this).attr('class') === 'one') {
                    $(this).fadeOut('slow');
                }
            });
    }); 
```

任何帮助将非常感激。

感谢您的回复。

我试图变得太聪明，它不需要它。有没有办法让淡入和淡出同时发生而不使用插件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T17:27:39.867

尝试这样做：

```
$(".one").fadeIn("slow", function() { $(this).fadeOut("slow") });
$(".two").fadeIn("slow", function() { $(this).fadeOut("slow") }); 
```

更新：

我误读了你的问题，并认为你想要淡入淡出。要使第一个淡入和第二个淡出，请使用以下内容：

```
$(".one").fadeIn("slow");
$(".two").fadeOut("slow"); 
```

如果您有其他带有`one`and`two`类的元素并且不想影响它们，您可以输入`$(".imageHolder .one")`and`$(".imageHolder .two")`而不是`$(".one")`and `$(".two")`。

如果您`imageHolder`的页面上有多个元素，请使用*epascarello*或*sushanth reddy*`find()`建议的函数。

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T17:27:52.973

为什么每个而不是仅仅选择它们？

```
var imgs = $(this).find("img");
imgs.filter(".one").fadeOut('slow');
imgs.filter(".two").fadeIn('slow'); 
```

或者

```
var imgs = $(this);
imgs.find(".one").fadeOut('slow');
imgs.find(".two").fadeIn('slow'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T17:36:14.340

基本上为需要在悬停时淡入/淡出的图像组分别分配一个类

```
<div class="square">
        <div class="imageHolder">    
            <!--Comment out and uncomment BG image to show transitions on BG images-->    
            <img class="one fadeeffect" src="image_01.jpg" />
            <img class="two fadeeffect" src="image_02.jpg" />
            <img class="three" src="image_03.jpg" />
            <img class="four" src="image_04.jpg" />
        </div>
    </div> 
```

javascript:

```
$('.fadeeffect')..hover(function(){
    // write your code here
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T17:29:22.750

您不需要 .each 循环 .. 只需在 div 中找到 img 并对其进行操作

试试这个。。

```
$('.square').mouseover(function() {

    $(this).find('.two').fadeIn('slow');
    $(this).find('.one').fadeOut('slow');

});​ 
```

[检查小提琴](http://jsfiddle.net/sushanth009/u6dpt/1/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-02T17:30:31.343

我想这就是你要找的：

```
 $('.square img')
    .mouseover(function () {
      $(this).fadeIn('slow');
    })
    .mouseout(function () {
      $(this).fadeOut('slow');
    }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-02T17:32:42.560

我认为你会更好地使用 jquery.hoverIntent.js。当您将光标快速移动到不同的图像上时，它会产生一点延迟时间。

一个例子

```
$(document).ready(function(){
    var config = {    
     interval: 230,
     over: zoomIn,
     out: zoomOut  
    };

    $("div#clients_wrap div").hoverIntent(config);

    }); 
```

zoomIn 和 zoomOut 是函数，你可以分别用淡入和淡出声明它们。这只是一个改进。**

# php - PHP 中的嵌入式 HEX 文件

> ID：12695155
> 
> 赞同：-3
> 
> 时间：2012-10-02T17:23:50.050
> 
> 标签：php, perl, cgi

是否可以将虚拟 HEX 文件写入 PHP 页面，然后在用户请求 php 页面时动态生成真实文件？

例如在 Perl 中，我使用`__DATA__`了一些 HEX 内容

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T17:37:35.143

是的。只需将您的文件转储为 HEX 形式，将其分配给变量，然后通过变量的内容并恢复“真实”字节并将其发送给客户端。或者，如果可能，使用[heredoc](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc)。但这对于大于 50KB 的文件非常无效。

# php - ajax调用重置窗口滚动位置

> ID：12695160
> 
> 赞同：1
> 
> 时间：2012-10-02T17:24:12.613
> 
> 标签：php, javascript, jquery, ajax

我在我的网站上添加了一个简单的投票功能。出于某种原因，ajax 调用将窗口滚动重置到页面顶部。这对用户来说显然很烦人，因为他们每次对帖子投票时都必须从顶部开始滚动。

我似乎无法理解为什么会这样。有什么建议么？

```
function vote_up(post_id)
{
  //alert("Up: " + post_id);
  $.ajax({
  url: '<?php echo URL::base(); ?>voting_ajax.php?vote_up&post_id=' + post_id,
  dataType: 'json',
  success: function(data) {
      if(data.result == 1)
      {
        $('#up_count_'+post_id).html(data.vote_up);
        $('#down_count_'+post_id).html(data.vote_down);
      }
      if(data.msg != '')
      {
    $.msgbox(data.msg);
      }
    }
  });

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T17:32:53.313

您的标签中是否有空的“href”或井号，例如

`<a href="#" onclick="action();">vote me up</a>`?

如果是这种情况，则井号是向上滚动回顶部的内容。你应该改用

`<a href="javascript:void(0);" onclick="action();">vote me up</a>`

或者有一个事件处理程序返回 false 作为默认操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T17:34:28.580

您可以按照@lkrups 所说的去做，或者 在函数末尾添加`event.preventDefault();`甚至添加应该可以工作。`return false;`

# php - PHP/MYSQL 根据另一个标准检索名称

> ID：12695162
> 
> 赞同：0
> 
> 时间：2012-10-02T17:24:19.163
> 
> 标签：php, mysql, database, login, pdo

所以我有一个登录系统，我想检索登录人的名字。这是我的 php：

```
function verify_Username_and_Pass($un, $pwd) {
        $query = "SELECT `First Name`, Username, Password
                FROM table
                WHERE Username = :un AND Password = :pwd
                LIMIT 1";

        $stmt = $this->conn->prepare($query);
        $stmt->bindParam(':un', $un);
        $stmt->bindParam(':pwd', $pwd);
        $stmt->execute();

        if ($stmt->rowCount() > 0) {
            // User exist
            return true;
            $stmt->close();
        }
        else {
            // User doesn't exist
            return false;
            $stmt->close();
        }
    } 
```

这是具有 1 个私有变量 $conn 的类的一部分。登录工作完美，但我只想得到这个人的名字。我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T17:48:12.580

首先，永远不要从数据库中获取密码，这是非常糟糕的做法。

其次，如果只返回一行，您只想接受用户是正确的。

最后`bindColumn`是你要找的。

```
<?php
function verify_Username_and_Pass($un, $pwd) {
    $query = "SELECT `First Name`, Username
              FROM table
              WHERE Username = :un AND Password = :pwd";
    // Don't limit the query to only one, if there is a chance that you can
    // return multiple rows, either your code is incorrect, bad data in the database, etc...

    $stmt = $this->conn->prepare($query);
    $stmt->bindParam(':un', $un);
    $stmt->bindParam(':pwd', $pwd);
    $stmt->execute();

    // Only assume proper information if you ONLY return 1 row.
    // Something is wrong if you return more than one row...
    if ($stmt->rowCount() == 1) {
        // User exist
        $stmt->bindColumn('First Name', $firstName);
        $stmt->bindColumn('Username', $username);
        // You can now refer to the firstName and username variables.
        return true;
        $stmt->close();
    } else {
        // User doesn't exist
        return false;
        $stmt->close();
    }
}
?> 
```

那应该对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T17:36:39.033

您需要将结果绑定如下

```
 if ($stmt->rowCount() > 0) {
        $stmt->bind_result($fname, $uname, $pwd);
        $stmt->fetch()
        echo $fname // here you get firsname

        // either you can return this $fname or store into session variable for further

        // User exist
        return true;
        $stmt->close();
    }
    else {
        // User doesn't exist
        return false;
        $stmt->close();
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T17:37:16.747

在您返回 true 的部分中，您可以改为返回实际的用户数据（并且带有数据的数组无论如何都会评估为 true）。

警告的话，你应该使用散列密码。不要存储密码 y plain。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T17:26:56.357

只是改变查询语句？

```
 $query = "SELECT `First Name`
            FROM table 
            WHERE Username = :un AND Password = :pwd 
            LIMIT 1"; 
```

如果这引发错误，您将不得不显示更多该类正在做什么来管理数据库事务

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-02T17:29:35.523

只需更改此行，仅`First Name`在查询中选择：

```
 $query = "SELECT `First Name`, Username, Password
            FROM table
            WHERE Username = :un AND Password = :pwd
            LIMIT 1";` 
     to 

 $query = "SELECT `First Name`
            FROM table
            WHERE Username = :un AND Password = :pwd
            LIMIT 1";` 
```

# facebook - 即使用户已授权应用，也无法使用应用凭据提取用户帖子

> ID：12695164
> 
> 赞同：0
> 
> 时间：2012-10-02T17:24:20.180
> 
> 标签：facebook, authentication

我有一个应用程序和一个用户，他添加了该应用程序并使用权限授权它：read_stream 和 user_status。我有一个节点 js 应用程序正在运行，它试图进行 API 调用（仅使用应用程序凭据）来拉取用户的帖子，但我收到以下错误：“请求此资源需要用户访问令牌。”

每次我想提取他们的提要时，如何在不必让用户登录的情况下做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T17:45:58.293

它不能；您需要一个用户访问令牌来访问该用户的数据 - 我认为错误消息对此非常清楚。

检查[身份验证](https://developers.facebook.com/docs/authentication/)文档 - 您应该存储用户的访问令牌并使用这些令牌代表这些用户进行 API 调用

# asp.net-mvc - 如何创建 ASP.NET MVC 控制器扩展？

> ID：12695171
> 
> 赞同：0
> 
> 时间：2012-10-02T17:24:34.783
> 
> 标签：asp.net-mvc

我想定义一个扩展控制器方法。这可能吗？当我尝试它时，它会编译，但我收到的是 404，而不是 200。

```
 public static ActionResult MyMethod(this Controller)
    {
        return new EmptyResult();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T17:26:23.967

你不能有一个静态的动作方法，所以这是行不通的。

您可以做的是使用公共实例方法创建一个基本控制器类：

```
public class BaseController : Controller
{
    public ActionResult MyMethod()
    {
        return new EmptyResult();
    }
} 
```

# clips - CLIPS：多字段插槽

> ID：12695176
> 
> 赞同：1
> 
> 时间：2012-10-02T17:25:02.157
> 
> 标签：clips

我正在做一个练习，我需要在哪里创建一个简单的约会机构匹配系统。目前每个人都有一个爱好，爱好是按活跃和不活跃的类别，如果两个爱好匹配并且两个人有异性，约会机构认为这些人是匹配的。

所以现在我需要系统能够允许多种爱好，但我似乎无法理解这一点。

这是我所拥有的：

```
(deftemplate MAIN::person
    (slot name)
    (slot age)
    (multislot hobby)
    (slot town)
    (slot sex))

(person (name "Jane")
        (age 25)
        (hobby fashion gardening)
        (town montrose)
        (sex female))

(deffacts hobby_types "Hobby categories"
    (hobby_type gardening active)
    (hobby_type swinging active)
    (hobby_type reading inactive)
    (hobby_type fashion inactive)
)

(defrule compatible_hobbies
    (opposite_sex ?name1 ?name2)
    (person (name ?name1) (hobby ?hobby1))
    (person (name ?name2) (hobby ?hobby2))
    (hobby_type ?hobby1 ?type)
    (hobby_type ?hobby2 ?type)
    =>
    (assert (hobbies_match ?name1 ?name2))
) 
```

所以首先，我是否正确声明了 multislot 字段？以及如何调整我的 compatible_hobbies 规则以匹配一个人可能拥有的任何一个爱好？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T10:17:19.350

正确地声明了多槽爱好。但是您的规则不会正确匹配爱好，并且会将同一事实与表明 Jane 与 Jane 兼容的同一事实匹配。实际上，如果规则匹配事实，它会生成人员事实的笛卡尔积（或大量不希望的匹配）。

我将规则修改为：

`(defrule compatible_hobbies (person (name ?n1) (hobby $? ?h1 $?)) (person (name ?n2) (hobby $? ?h1 $?)) (hobby_type ?h1 ?x) (test (neq ?n1 ?n2)) => (assert (hobbies_compatible ?n1 ?n2)) )`

因此，如果您断言两个人的事实，例如

`(person (name "Jane") (hobby blah1 gardening blah2))`然后`(person (name "Jim") (hobby blah3 gardening blah4))`规则将触发并且事实 (hobbies_compatible Jim Jane) 将被断言（以及事实 (hobbies_compatible "Jim" "Jane")）。

通配符 $? 变量匹配所需匹配爱好之前和之后的一组符号。你的异性事实可能也应该是一个测试而不是一个事实。

# entity-framework - 使用 EF 获取 SqlCommand

> ID：12695180
> 
> 赞同：1
> 
> 时间：2012-10-02T17:25:20.007
> 
> 标签：entity-framework, sqldependency

我在我的应用程序中创建了一个 SqlDependency 服务。当我手动输入查询时它工作得很好，但我不能包含通配符（我真的不知道为什么）。

例如：

```
//Using this SqlCommand will work
new SqlCommand("SELECT [employees].[name] FROM [dbo].[employees]", sqlNotificationConn)

//But this one won't
new SqlCommand("SELECT [employees].* FROM [dbo].[employees]", sqlNotificationConn)

//And this one won't either
new SqlCommand("SELECT * FROM [dbo].[employees]", sqlNotificationConn) 
```

所以基本上，我想让我的 DbContext 生成一个完整的 SELECT 命令，其中包含它处理的每个字段。

在 Linq 2 SQL 中，我使用了这个服务`dbContext.GetCommand(.....);`

在 EF 4.0（或者是 4.1？）中，我使用了`dbContext.employee.ToTraceString();`

但是在 EF 4.4 中，我找不到任何东西来生成该 SELECT 查询字符串....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T18:12:16.237

使用`DbContext`( `DbQuery`) 它很简单：

```
query.ToString() 
```

带`ObjectContext`( `ObjectQuery`)：

```
((ObjectQuery)query).ToTraceString() 
```

顺便说一句，`query`可以是任何基于 a `DbSet`（或`ObjectSet`，分别）的表达式。所以类似的东西`dbContext.employee.Where(e => e.Name == "Gates").ToString()`也会显示生成的 SQL 查询。

强制执行的 LINQ 语句（如`ToList()`、`Single()`、`FirstOrDefault()`等）创建一个新对象`ToString()`并将返回该对象的类型名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T17:34:03.417

`ToTraceString()`还在 EF 中，一直在同一个地方。但是，它在`ObjectQuery`，不是`DbQuery`。话虽如此，我从未见过用于 EF 的 SQL Server 提供程序`*`；它总是使用 SQL 中的离散字段。

# cocoa - Mac App中的PNG和多表示TIFF都支持视网膜显示吗？

> ID：12695181
> 
> 赞同：0
> 
> 时间：2012-10-02T17:25:26.653
> 
> 标签：cocoa, png, tiff, retina-display

在 Xcode 中，我为我的图像添加`image.png`（正常大小）和`image@2x.png`（视网膜大小）作为资源。当我构建我的应用程序并查看`/Contents/Resources/`捆绑包时，它会同时显示一个`image.png`文件和一个`image.tiff`文件。TIFF 包含*正常*和视网膜表示。

是否`image.png`需要包含在最终的应用程序包中？

我认为它不会，因为 TIFF 文件包含相同的图像（以及视网膜版本）。它似乎只是不必要地增加了应用程序包的大小。我正在使用适用于 10.6 或更高版本的 10.8 SDK 进行构建。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T22:57:44.213

我清理了我的项目并重建了应用程序，PNG 就消失了。只剩下 TIFF。我想我应该早点尝试过，但我会留下这个答案，以防它帮助其他人。

现在，您必须确保在源代码中引用“.tiff”文件，但如果您引用任何 PNG 文件。例如：

```
// "png" changes to "tiff"
NSString *pathForImage = [[NSBundle mainBundle] pathForResource:@"bg" ofType:@"tiff"]; 
```

# c# - 带超时的异步 HTTPWebrequest

> ID：12695182
> 
> 赞同：1
> 
> 时间：2012-10-02T17:25:34.033
> 
> 标签：c#, .net-3.5, windows-ce

环境：Windows CE / .NET Compact FrameWork 3.5。

我需要一些指导

1) 为异步 Web 请求实现超时功能。ThreadPool::RegisterWaitForSingleObject() 不适用于.NetCf，我有点卡住了。

2）如何确定网络本身是否不可用？谷歌搜索没有帮助。

注意：ThreadPool::RegisterWaitForSingleObject 不适用于 .NET Compact FrameWork。

这是我的异步实现：

```
void StartRequest ()
{
    try
    {
        HttpWebRequest myHttpWebRequest = (HttpWebRequest)WebRequest.Create("http://192.78.221.11/SomeFunc/excpopulatedept");
        RqstState myRequestState = new RqstState();
        myRequestState.request = myHttpWebRequest;

        // Start the asynchronous request.
        IAsyncResult result =
                    (IAsyncResult)myHttpWebRequest.BeginGetResponse(new AsyncCallback(RespCallback), myRequestState);

        // Release the HttpWebResponse resource.
        myRequestState.response.Close();
    }
    catch (WebException ex)
    {
        ;
    }
    catch (Exception ex)
    {
        ;
    }
}

private void RespCallback(IAsyncResult asynchronousResult)
{
    try
    {
        //State of request is asynchronous.
        RqstState myRequestState = (RqstState)asynchronousResult.AsyncState;
        HttpWebRequest myHttpWebRequest = myRequestState.request;
        myRequestState.response = (HttpWebResponse)myHttpWebRequest.EndGetResponse(asynchronousResult);

        // Read the response into a Stream object.
        Stream responseStream = myRequestState.response.GetResponseStream();
        myRequestState.streamResponse = responseStream;

        // Begin the Reading of the contents of the HTML page and print it to the console.
        IAsyncResult asynchronousInputRead = responseStream.BeginRead(myRequestState.BufferRead, 0, 1024, new AsyncCallback(ReadCallBack), myRequestState);
        return;
    }
    catch (WebException e)
    {
        Console.WriteLine("\nRespCallback Exception raised!");
        Console.WriteLine("\nMessage:{0}", e.Message);
        Console.WriteLine("\nStatus:{0}", e.Status);
    }
}

private void ReadCallBack(IAsyncResult asyncResult)
{
    try
    {
        RqstState myRequestState = (RqstState)asyncResult.AsyncState;
        Stream responseStream = myRequestState.streamResponse;
        int read = responseStream.EndRead(asyncResult);
        // Read the HTML page and then print it to the console.
        if (read > 0)
        {
            myRequestState.requestData.Append(Encoding.ASCII.GetString(myRequestState.BufferRead, 0, read));
            IAsyncResult asynchronousResult = responseStream.BeginRead(myRequestState.BufferRead, 0, 1024, new AsyncCallback(ReadCallBack), myRequestState);
            return;
        }
        else
        {
            //Console.WriteLine("\nThe contents of the Html page are : ");
            if (myRequestState.requestData.Length > 1)
            {
                string stringContent;
                stringContent = myRequestState.requestData.ToString();
                responseStream.Close();
            }
            catch (WebException e)
            {
            }
        }
    }
} 
```

感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T23:10:53.117

要继续 Eric J 评论的内容，您`myRequestState.response.Close()`就在抓到之前。这几乎*总是*会抛出异常，因为要么`response`为空，要么`response`不会打开。这是因为您正在异步调用`BeginGetResponse`，并且在调用下一行 (response.close) 时，您给它的回调可能不会被调用。你会想要解决这个问题，而不是仅仅隐藏异常，因为你不知道它们为什么会发生。

就超时而言，因为您正在处理本质上没有可配置超时的事情，所以您必须设置一个计时器并在超时结束时简单地关闭连接。例如

```
HttpWebRequest myHttpWebRequest; // ADDED
Timer timer; // ADDED

private void StartRequest()
{
        myHttpWebRequest = (HttpWebRequest)WebRequest.Create("http://192.78.221.11/SomeFunc/excpopulatedept");
        RqstState myRequestState = new RqstState();
        myRequestState.request = myHttpWebRequest;

        timer = new Timer(delegate { if (!completed) myHttpWebRequest.Abort(); }, null, waitTime, Timeout.Infinite); // ADDED
        // Start the asynchronous request.
        IAsyncResult result =
                    (IAsyncResult)myHttpWebRequest.BeginGetResponse(new AsyncCallback(RespCallback), myRequestState);
}

//... 

private void ReadCallBack(IAsyncResult asyncResult)
{
    try
    {
        RqstState myRequestState = (RqstState)asyncResult.AsyncState;
        Stream responseStream = myRequestState.streamResponse;
        int read = responseStream.EndRead(asyncResult);
        // Read the HTML page and then print it to the console.
        if (read > 0)
        {
            myRequestState.requestData.Append(Encoding.ASCII.GetString(myRequestState.BufferRead, 0, read));
            IAsyncResult asynchronousResult = responseStream.BeginRead(myRequestState.BufferRead, 0, 1024, new AsyncCallback(ReadCallBack), myRequestState);
        }
        else
        {
            completed = true; // ADDED
            using(timer)  // ADDED
            {
                timer = null;
            }
            if (myRequestState.requestData.Length > 1)
            {
                string stringContent;
                stringContent = myRequestState.requestData.ToString();
                responseStream.Close();
            }
        }
    }
} 
```

我只复制并粘贴了您的代码，因此它与您最初提供的代码一样可能编译，但应该有足够的内容让您朝着正确的方向前进。

# debugging - 开发者工具让 IE9 崩溃

> ID：12695183
> 
> 赞同：1
> 
> 时间：2012-10-02T17:25:35.717
> 
> 标签：debugging, internet-explorer-9, ie-developer-tools

我在使用 IE9 的网站上遇到问题，需要我在该浏览器中打开开发人员工具。那是我真正的问题发生的时候，因为 IE9 简单地崩溃并报告以下错误：

```
Problem signature:
  Problem Event Name:   APPCRASH
  Application Name: iexplore.exe
  Application Version:  9.0.8112.16447
  Application Timestamp:    4fca012b
  Fault Module Name:    KERNELBASE.dll
  Fault Module Version: 6.1.7601.17651
  Fault Module Timestamp:   4e21213c
  Exception Code:   e06d7363
  Exception Offset: 000000000000cacd
  OS Version:   6.1.7601.2.1.0.256.48
  Locale ID:    1030
  Additional Information 1: 4200
  Additional Information 2: 42004fe80739b889628da270848694a8
  Additional Information 3: 7bb7
  Additional Information 4: 7bb73118f9bbd17fcc14066196aedb9d 
```

我也收到以下代码的错误：

```
Exception Code: c000041d 
```

IE9 在没有任何开发工具帮助我的情况下友好地重新启动。

知道是什么原因造成的吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T09:20:32.227

重置和修复并没有解决它。另一方面，使用相应的 Windows 更新进行完整的卸载-重新安装程序就可以了。

对于任何对此感兴趣的人，方法如下：http: [//windows.microsoft.com/en-US/windows7/how-do-i-install-or-uninstall-internet-explorer-9](http://windows.microsoft.com/en-US/windows7/how-do-i-install-or-uninstall-internet-explorer-9)

谢谢马克的建议！

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T17:36:58.750

重置 Internet Explorer 设置并检查是否可以解决问题。

运行以下文章中的“修复它”：

[http://support.microsoft.com/kb/923737](http://support.microsoft.com/kb/923737)

# c++ - 缓存单个覆盖计算 C++11

> ID：12695184
> 
> 赞同：1
> 
> 时间：2012-10-02T17:25:37.953
> 
> 标签：c++, oop, caching, c++11

我想要关于缓存由两个派生类共享的计算的方法的建议。作为说明，我有两种类型的归一化向量 L1 和 L2，它们各自定义了自己的归一化常数（注意：我从`std::vector`这里继承的良好实践作为一个快速说明——信不信由你，我真正的问题不是关于 L1 和 L2 向量！）：

```
#include <vector>
#include <iostream>
#include <iterator>
#include <math.h>

struct NormalizedVector : public std::vector<double> {
  NormalizedVector(std::initializer_list<double> init_list):
    std::vector<double>(init_list) { }
  double get_value(int i) const {
    return (*this)[i] / get_normalization_constant();
  }
  virtual double get_normalization_constant() const = 0;
};

struct L1Vector : public NormalizedVector {
  L1Vector(std::initializer_list<double> init_list):
    NormalizedVector(init_list) { }
  double get_normalization_constant() const {
    double tot = 0.0;
    for (int k=0; k<size(); ++k)
      tot += (*this)[k];
    return tot;
  }
};

struct L2Vector : public NormalizedVector {
  L2Vector(std::initializer_list<double> init_list):
    NormalizedVector(init_list) { }
  double get_normalization_constant() const {
    double tot = 0.0;
    for (int k=0; k<size(); ++k) {
      double val = (*this)[k];
      tot += val * val;
    }
    return sqrt(tot);
  }
};

int main() {
  L1Vector vec{0.25, 0.5, 1.0};
  std::cout << "L1 ";
  for (int k=0; k<vec.size(); ++k)
    std::cout << vec.get_value(k) << " ";
  std::cout << std::endl;

  std::cout << "L2 ";
  L2Vector vec2{0.25, 0.5, 1.0};
  for (int k=0; k<vec2.size(); ++k)
    std::cout << vec2.get_value(k) << " ";
  std::cout << std::endl;
  return 0;
} 
```

对于大型向量，此代码不必要地慢，因为它`get_normalization_constant()`重复调用，即使它在构造后没有更改（假设修饰符 like`push_back`已适当禁用）。

如果我只考虑一种形式的标准化，我会简单地使用一个双精度值来缓存这个结果：

```
struct NormalizedVector : public std::vector<double> {
  NormalizedVector(std::initializer_list<double> init_list):
    std::vector<double>(init_list) {
    normalization_constant = get_normalization_constant();
  }
  double get_value(int i) const {
    return (*this)[i] / normalization_constant;
  }

  virtual double get_normalization_constant() const = 0;
  double normalization_constant;
}; 
```

`NormalizedVector`然而，这是可以理解的，因为构造函数试图调用一个纯虚函数（派生的虚表在基初始化期间不可用），因此无法编译是可以理解的。

**选项 1：** 派生类必须`normalization_constant = get_normalization_constant();`在其构造函数中手动调用该函数。

**选项 2：** 对象定义一个用于初始化常量的虚函数：

```
init_normalization_constant() {
  normalization_constant = get_normalization_constant();
} 
```

然后由工厂构造对象：

```
struct NormalizedVector : public std::vector<double> {
  NormalizedVector(std::initializer_list<double> init_list):
    std::vector<double>(init_list) {
    //    init_normalization_constant();
  }
  double get_value(int i) const {
    return (*this)[i] / normalization_constant;
  }

  virtual double get_normalization_constant() const = 0;
  virtual void init_normalization_constant() {
    normalization_constant = get_normalization_constant();
  }

  double normalization_constant;
};

// ...
// same code for derived types here
// ...

template <typename TYPE>
struct Factory {
  template <typename ...ARGTYPES>
  static TYPE construct_and_init(ARGTYPES...args) {
    TYPE result(args...);
    result.init_normalization_constant();
    return result;
  }
};

int main() {
  L1Vector vec = Factory<L1Vector>::construct_and_init<std::initializer_list<double> >({0.25, 0.5, 1.0});
  std::cout << "L1 ";
  for (int k=0; k<vec.size(); ++k)
    std::cout << vec.get_value(k) << " ";
  std::cout << std::endl;

  return 0;
} 
```

**选项3：** 使用实际缓存：`get_normalization_constant`定义为新类型，CacheFunctor；第一次`CacheFunctor`被调用，它保存返回值。

在 Python 中，这与最初的编码一样工作，因为虚拟表始终存在，即使在`__init__`基类中也是如此。在 C++ 中，这要复杂得多。

我非常感谢您的帮助；这对我来说很重要。我觉得我已经掌握了 C++ 中良好的面向对象设计的窍门，但在编写非常高效的代码时并不总是如此（尤其是在这种简单缓存的情况下）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T17:33:03.697

我建议使用非虚拟接口模式。当您需要一种方法来提供通用和独特的功能时，这种模式非常出色。（在这种情况下，缓存是共同的，计算是唯一的。）

[http://en.wikibooks.org/wiki/More_C%2B%2B_Idioms/Non-Virtual_Interface](http://en.wikibooks.org/wiki/More_C%2B%2B_Idioms/Non-Virtual_Interface)

```
// UNTESTED
struct NormalizedVector : public std::vector<double> {
 ...
  double normalization_constant;
  bool cached;
  virtual double do_get_normalization_constant() = 0;
  double get_normalization_constant() {
    if(!cached) {
      cached = true;
      normalization_constant = do_get_normalization_constant();
    }
    return normalization_constant;
}; 
```

Ps 你真的不应该公开从`std::vector`.

PPs 使缓存失效就像设置`cached`为 false 一样简单。

* * *

### 完整的解决方案

```
#include <vector>
#include <iostream>
#include <iterator>
#include <cmath>
#include <algorithm>

struct NormalizedVector : private std::vector<double> {
private:
  typedef std::vector<double> Base;
protected:
  using Base::operator[];
  using Base::begin;
  using Base::end;
public:
  using Base::size;

  NormalizedVector(std::initializer_list<double> init_list):
    std::vector<double>(init_list) { }
  double get_value(int i) const {
    return (*this)[i] / get_normalization_constant();
  }

  virtual double do_get_normalization_constant() const = 0;
  mutable bool normalization_constant_valid;
  mutable double normalization_constant;
  double get_normalization_constant() const {
    if(!normalization_constant_valid) {
      normalization_constant = do_get_normalization_constant();
      normalization_constant_valid = true;
    }
    return normalization_constant;
  }

  void push_back(const double& value) {
    normalization_constant_valid = false;
    Base::push_back(value);
  }

  virtual ~NormalizedVector() {}
};

struct L1Vector : public NormalizedVector {
  L1Vector(std::initializer_list<double> init_list):
    NormalizedVector(init_list) { get_normalization_constant(); }
  double do_get_normalization_constant() const {
    return std::accumulate(begin(), end(), 0.0);
  }
};

struct L2Vector : public NormalizedVector {
  L2Vector(std::initializer_list<double> init_list):
    NormalizedVector(init_list) { get_normalization_constant(); }
  double do_get_normalization_constant() const {
    return std::sqrt(
      std::accumulate(begin(), end(), 0.0,
        [](double a, double b) { return a + b * b; } ) );
  }
};

std::ostream&
operator<<(std::ostream& os, NormalizedVector& vec) {
  for (int k=0; k<vec.size(); ++k)
    os << vec.get_value(k) << " ";
  return os;
}

int main() {
  L1Vector vec{0.25, 0.5, 1.0};
  std::cout << "L1 " << vec << "\n";

  vec.push_back(2.0);
  std::cout << "L1 " << vec << "\n";

  L2Vector vec2{0.25, 0.5, 1.0};
  std::cout << "L2 " << vec2 << "\n";

  vec2.push_back(2.0);
  std::cout << "L2 " << vec2 << "\n";
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T17:32:53.557

一个快速而肮脏的解决方案是使用静态成员变量。

```
 double get_normalization_constant() const {
    static double tot = 0.0;
    if( tot == 0.0 )
    for (int k=0; k<size(); ++k)
      tot += (*this)[k];
    return tot;
  } 
```

在这种情况下，它只会被计算一次。每次它都会返回最新的值。

**注意：** 这个双头将被所有相同类型的对象共享。如果您将创建许多 L1Vector 类型的对象，请不要使用它

# git - Perforce 类似于 git 的 GUI 客户端

> ID：12695186
> 
> 赞同：3
> 
> 时间：2012-10-02T17:25:47.617
> 
> 标签：git, user-interface, perforce

是否有任何类似于 Perforce 的 git GUI 客户端？我觉得使用文件比更改列表更舒服。git 显示事物的方式是基于提交的，它并不那么直观。使用 Perforce GUI 客户端非常直观，因为我正在处理文件 - P4 强调文件（至少在 GUI 中）。

我不想要 git cola 或其他强调提交历史/更改列表的 GUI git 客户端。我正在寻找基于文件工作的客户。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T19:28:15.010

你应该试试 SmartGit，它可以免费用于非商业用途，并且几乎可以在所有操作系统上运行。

SmartGit 将允许您根据更改工作，但也会为您提供一个文件资源管理器，您将在其中进行混合。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-09-07T11:32:19.610

我已经使用 perforce 多年了。没有像强制一样好的版本控制 gui，从来没有找到任何一个。包括任何已知的 git 客户端。

背景：我使用 clearcase、cvs、subversion、git.... 版本系统已经开发了 10 多年。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T02:06:45.640

我不确定您正在使用什么操作系统，但如果您碰巧在 Mac OS X 上工作，您可能想尝试 Atlassian 的 Source Tree [http://www.atlassian.com/software/sourcetree/overview](http://www.atlassian.com/software/sourcetree/overview)

与 SmartGit 一样，它是免费的，可以处理更改（提交历史），并且具有支持差异的文件浏览器视图。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-02-24T06:08:40.707

使用[SourceTree](http://www.atlassian.com/software/sourcetree/overview "源树")，它是最好的。

# pdf - 嵌入式 PDF 打印偏离中心

> ID：12695188
> 
> 赞同：1
> 
> 时间：2012-10-02T17:25:50.757
> 
> 标签：pdf, printing, embed

```
<embed width="100%" height="100%" src="filename.pdf" type="application/pdf"> 
```

我可以使用上面的简单代码将 PDF 文件嵌入到网页中。但是当我去打印网页时（使用 CTRL+P），只有一半的 PDF 出现在打印预览中，因为它已经偏离中心。此网页上也会发生同样的情况：http: [//pdfobject.com/examples/simplest-full-window.html](http://pdfobject.com/examples/simplest-full-window.html)。

这是一个“打印版本”网页的示例，其中嵌入的 PDF 在打印时居中 (CTRL+P)：[http](http://www.bbc.co.uk/food/recipes/our_paella_92328.pdf) ://www.bbc.co.uk/food/recipes/our_paella_92328.pdf 。此示例也是响应式的，这很有用，因为无论浏览器窗口的大小如何，打印外观都保持一致。

首先，如何在打印时将嵌入的 PDF 居中？其次，如何使嵌入的 PDF 响应式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T17:43:46.200

当您想要打印嵌入的 PDF 时，您必须使用 PDF 插件中的打印命令，而不是 Web 浏览器中的打印命令。

在第一个示例中，Javascript 代码加载 PDF 插件并将 HTML 文档替换为 PDF 文档。如果您按 CTRL+P，则会显示来自 Internet Explorer 的打印对话框。如果单击 PDF 插件，然后按 CTRL+P，则会显示 Adob​​e PDF 插件的打印对话框。

在第二个示例中，您直接打开 PDF 文件。在这种情况下，PDF 插件会自动加载和激活。无需单击它。按 CTRL+P 会带来它自己的打印对话框。

# javascript - JavaScript 和面向对象编程 (OOP)

> ID：12695195
> 
> 赞同：0
> 
> 时间：2012-10-02T17:26:25.203
> 
> 标签：javascript, oop

在搜索并阅读了有关如何编写面向对象的 JavaScript 之后，我将它们总结为以下代码：

```
/********************************************************/
// Enumeration.
var Fruits = {
    Apple: 0,
    Orange: 1,
    Watermelon: 2,
    Banana: 3
}; // <-- Don't forget ;

// Using enumeration.
// function SquishFruit(fruit) {
//     switch (fruit) {
//         case Fruits.Apple : Chop();
//         case Fruits.Orange : Pulp();
//         case Fruits.Watermelon : Smash();
//         case Fruits.Banana : Peel();
//     }
/********************************************************/

/********************************************************/
// Base class.
function BaseClass(arg) {

    // Constructor.
    alert("I am BaseClass constructor.\n arg=" + arg);

    // Private fields.
    // Use m_privateField, Not this.m_privateField in the class scope.
    var m_privateField = "I am BaseClass.m_privateField";

    // Public fileds.
    // Use this.PublicField, Not PublicField in the class scope.
    this.PublicField = "I am BaseClass.PublicField";

    // Private methods.
    // Invoke PrivateMethod(), Not this.PrivateMethod() in the class scope.
    function PrivateMethod(arg) {
        alert("I am BaseClass.PrivateMethod.\n arg=" + arg + "\n m_privateField=" + m_privateField);
        return;
    }

    // Public methods.
    // ----------------------------------------------------------------------
    // Note: Using "prototype" increases efficiency but breaks the encapsulation.
    // Example:
    // function MyClass() {
    //     var _value = 1;
    // }
    // MyClass.prototype.getValue = function () {
    //     // the function assigned to getValue is
    //     // no longer in scope with _value it can't access it.
    //     return _value;
    // }
    // ----------------------------------------------------------------------
    // Invoke this.PublicMethod(), Not PublicMethod() in the class scope.
    this.PublicMethod = function (arg) {
        alert("I am BaseClass.PublicMethod.\n arg=" + arg + "\n PublicField=" + this.PublicField);
        return;
    };  // <-- Don't forget ;

    // Virtual methods.
    // Invoke this.VirtualMethod(), Not VirtualMethod() in the class scope.
    this.VirtualMethod = function (arg) {
        alert("I am BaseClass.VirtualMethod.\n arg=" + arg + "\n");
        return;
    };  // <-- Don't forget ;
}

// Static fields.
BaseClass.StaticField = "I am BaseClass.StaticField";

// Static methods.
BaseClass.StaticMethod = function (arg) {
    alert("I am BaseClass.StaticMethod.\n arg=" + arg + "\n StaticField=" + BaseClass.StaticField);
    return;
}
/********************************************************/

/********************************************************/
// Derived class.
function DerivedClass(arg) {

    // Call base class constructor.
    // Never forget this call.
    BaseClass.call(this, arg);

    // Constructor.
    alert("I am DerivedClass constructor.\n arg=" + arg);

    // Private fields.
    // Use m_privateField2, Not this.m_privateField2 in the class scope.
    var m_privateField2 = "I am DerivedClass.m_privateField2";

    // Public fileds.
    // Use this.PublicField2, Not PublicField2 in the class scope.
    this.PublicField2 = "I am DerivedClass.PublicField2";

    // Private methods.
    // Invoke PrivateMethod2(), Not this.PrivateMethod2() in the class scope.
    function PrivateMethod2(arg) {
        alert("I am DerivedClass.PrivateMethod.\n arg=" + arg + "\n m_privateField2=" + m_privateField2);
        return;
    }

    // Public methods.
    // Invoke this.PublicMethod2(), Not PublicMethod2() in the class scope.
    this.PublicMethod2 = function (arg) {
        alert("I am DerivedClass.PublicMethod2.\n arg=" + arg + "\n PublicField2=" + this.PublicField2);
        return;
    };  // <-- Don't forget ;

    // Virtual methods.
    // Invoke this.VirtualMethod(), Not VirtualMethod() in the class scope.
    this.VirtualMethod = function (arg) {
        alert("I am DerivedClass.VirtualMethod.\n arg=" + arg + "\n");
        return;
    };  // <-- Don't forget ;
}

// Make DerivedClass derived from BaseClass.
// Never forget these two lines.
// Note: Constructor of BaseClass invoked here.
DerivedClass.prototype = new BaseClass; // () not required!
DerivedClass.prototype.constructor = DerivedClass;

// Static fields.
DerivedClass.StaticField2 = "I am DerivedClass.StaticField2";

// Static methods.
DerivedClass.StaticMethod2 = function (arg) {
    alert("I am DerivedClass.StaticMethod2.\n arg=" + arg + "\n StaticField2=" + DerivedClass.StaticField2);
    return;
}
/********************************************************/

/********************************************************/
// Tests.

alert("---------- Tests started ----------");

// Test enumuration.
var fruit = Fruits.Apple;
alert("Test enumuration.\n fruit=" + fruit);

// Test BaseClass.
var baseClass = new BaseClass("Hello BaseClass.");

// Test private fields.
alert("Test private fields:\n baseClass.m_privateField=" + baseClass.m_privateField); // undefined.

// Test public fields.
alert("Test public fields:\n baseClass.PublicField=" + baseClass.PublicField);

// Test private methods.
// TypeError: baseClass.PrivateMethod is not a function
// baseClass.PrivateMethod("Hello PrivateMethod.");

// Test public methods.
baseClass.PublicMethod("Hello PublicMethod.");

// Test virtual methods.
baseClass.VirtualMethod("Hello VirtualMethod.");

// Test Static fields.
// Note: Use class name instead of objact name.
// BaseClass.StaticField expression is correct.
// baseClass.StaticField expression is incorrect (baseClass.StaticField value is undefined).
alert("Test Static fields:\n BaseClass.StaticField=" + BaseClass.StaticField);

// Test Static methods.
// Note: Use class name instead of objact name.
BaseClass.StaticMethod("Hello StaticMethod.");

// Test DerivedClass.
var derivedClass = new DerivedClass("Hello DerivedClass.");

// Test private fields.
alert("Test private fields:\n derivedClass.m_privateField=" + derivedClass.m_privateField); // undefined.
alert("Test private fields:\n derivedClass.m_privateField2=" + derivedClass.m_privateField2); // undefined.

// Test public fields.
alert("Test public fields:\n derivedClass.PublicField=" + derivedClass.PublicField);
alert("Test public fields:\n derivedClass.PublicField2=" + derivedClass.PublicField2);

// Test private methods.
// TypeError: derivedClass.PrivateMethod is not a function
// derivedClass.PrivateMethod("Hello PrivateMethod.");
// TypeError: derivedClass.PrivateMethod2 is not a function
// derivedClass.PrivateMethod2("Hello PrivateMethod2.");

// Test public methods.
derivedClass.PublicMethod("Hello PublicMethod.");
derivedClass.PublicMethod2("Hello PublicMethod2.");

// Test virtual methods.
derivedClass.VirtualMethod("Hello VirtualMethod.");

// Test Static fields.
// Note: Use class name instead of objact name.
alert("Test Static fields:\n DerivedClass.StaticField=" + DerivedClass.StaticField); // undefined. Use BaseClass.StaticField.
alert("Test Static fields:\n DerivedClass.StaticField2=" + DerivedClass.StaticField2);

// Test Static methods.
// Note: Use class name instead of objact name.
// TypeError: DerivedClass.StaticMethod is not a function
// DerivedClass.StaticMethod("Hello StaticMethod.");
DerivedClass.StaticMethod2("Hello StaticMethod2.");

/********************************************************/

/********************************************************/
// References:
// http://people.apache.org/~martinc/OOP_with_ECMAScript/
// http://stackoverflow.com/questions/107464/is-javascript-object-oriented
// https://developer.mozilla.org/en-US/docs/JavaScript/Introduction_to_Object-Oriented_JavaScript
// https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Details_of_the_Object_Model
/********************************************************/ 
```

我测试了这段代码，它工作正常。

我通过 IE9、FireFox 15 和 Google Chrome 22 对其进行了测试。

我无法实现的一些功能是：

*   人类可读形式的命名空间。
*   私有静态字段。
*   私有静态方法。

我是否错过了关于 JavaScript 中的面向对象编程的任何内容，或者对于封装、多态性和继承类有更好的想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T17:31:05.587

这是我使用的 JavaScript 中一个很好的结构，具有很好的封装和抽象。

```
 var musicPlayer = {
               init: function(target_items, name){
                  //do something
                  anotherFunction('test');
                },
                anotherFunction(argument){
                }
    };
    $(document).ready(function(){
         musicPlayer.init('.container', 'tooltip');

    }); 
```

# android - Android - 按下后退按钮时如何退出活动？

> ID：12695199
> 
> 赞同：1
> 
> 时间：2012-10-02T17:26:45.307
> 
> 标签：android, button, back

> **可能重复：**
> [android按下后退按钮应该退出应用程序](https://stackoverflow.com/questions/2354336/android-pressing-back-button-should-exit-the-app)

我正在构建一个注册和登录屏幕只是为了练习。所以我放了 SharedPreferences 以便当用户再次打开应用程序时，它将引导他们登录活动，而不是从注册重新开始。但是，当我从登录活动中按下返回按钮时，它仍然会带我返回注册活动，这可能会更改已保存的 SharedPreferences。我想禁用此功能，当用户按下后退按钮时如何简单地退出应用程序？

谢谢，

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-02T17:31:26.683

如果您*不*希望后退按钮返回注册屏幕，最干净的解决方案是使用[`noHistory`](http://developer.android.com/guide/topics/manifest/activity-element.html#nohist)清单中的属性将其从活动历史记录中排除，即

```
 <activity
        android:name=".RegistrationActivity"
            ...
        android:noHistory="true" >

        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T17:29:40.720

```
@Override
public void onBackPressed() {
    // TODO Auto-generated method stub
    super.onBackPressed();
} 
```

此方法在按下后退按钮时捕获。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T17:37:58.983

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event)
{
   if (keyCode == KeyEvent.KEYCODE_BACK && event.getAction() ==KeyEvent.ACTION_DOWN)
     {
        //Handler for KEYCODE_BACK Pressing.
     }
} 
```

如果要关闭活动：

```
public void finish () 
```

.当您的活动完成并应该关闭时调用它。ActivityResult 被传播回通过 onActivityResult() 启动你的人。

如果要关闭通过 startActivityForResult 启动的另一个活动：

```
public void finishActivity (int requestCode) 
```

.Force 完成您之前使用 startActivityForResult(Intent, int) 启动的另一个活动。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T17:38:30.063

除了 Paul-Jan 的回答，您可以在注册活动中调用 startActivity(...) 后立即调用 finish() 。

# javascript - 在 ECMA-262 或 ECMA 5.1 之前，Javascript 是否真的没有伪经典继承或原型继承支持？

> ID：12695200
> 
> 赞同：2
> 
> 时间：2012-10-02T17:26:49.383
> 
> 标签：javascript

原因是，虽然我们可以在 Javascript 中使用伪经典继承，但实际上我们必须实现自己的`extend`or `inherit`。

原型继承呢——我认为它确实有这样的特性，如果`foo.bar`使用了，如果`bar`不是 的属性`foo`，解释器或编译代码（例如如果使用 Google V8）将沿着原型链上升，但是有没有内置方法可以使 object`b`的隐藏原型属性指向`a`原型链。我们必须通过定义一个`clone()`函数或`Object.create()`. 更重要的是，我想我在纯原型继承代码中看到没有任何构造函数。所以看起来在原型代码中，没有构造函数（构造函数）。但是如果我们使用原型继承，我们实际上必须`clone()`使用构造函数来实现——这更像是伪经典继承方面。

所以看起来原来的 Javascript 实际上既不是伪经典也不是原型继承？[根据维基百科的这篇文章](http://en.wikipedia.org/wiki/Brendan_Eich)，我读到它需要在 10 天内上市，否则市场上会出现更糟糕的情况。但我也有些纳闷，为什么在 1995 年 Javascript 出现后的 1 年或 2 年，至少 Netscape 版本的 Javascript 还没有添加`extend`and`Object.create()`方法？

这个问题旨在理解和澄清 Javascript 的伪经典和原型部分中的一些概念。这是真的吗——原始的 Javascript 本身并没有伪经典或原型继承支持？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T18:11:12.370

最初的目标是模仿类 C 语言，让 JS 看起来足够熟悉以加速采用。

在 1997 年，没有人以任何接近先进的方式使用 JS，甚至懒得考虑查看原型。

人们仍在制作如下物品：

```
var car = new Object();
car.doors = 4;
car.wheels = 4;
car.position = new Object();
car.position.x = 230;
car.position.y = 400; 
```

更好的是那些使用数组来制作这些对象的人。

```
var car = new Array();
car["doors"] = 4;
car["wheels"] = 4;
car["position"] = new Array();
car["position"]["x"] = 230;
car["position"]["y"] = 400; 
```

这就是当时***很多***JS 的样子。

老实说，仍然有很多看起来是这样的，因为人们仍然从 Java 或 C# 或 C++ 或 PERL 或 PHP 进来，并认为它看起来如此熟悉以至于他们不需要费心去学习它- 他们可以把数组变成对象，或者变成集合，或者变成字典，这没关系......

这就是他们所做的。

没有人认为 JS 会成为一件大事。从来没有人想到过。所以浏览器间的标准直到它已经成为一件大事时才出现，并且在那个时候，每个人对 JS*是*什么都有不同的想法。

即便如此，Internet Explorer 拥有最广泛的市场份额，以及最糟糕和最不标准的 JS 实现......这已经改变了，但说真的，我们现在刚刚达到一个点，所有新版本的浏览器都很重要（大 5）支持五年前概述和标准化的功能......

......当你谈论这样的事情时，这就是转身所需的时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T17:35:47.723

是 [的 http://kangax.github.com/es5-compat-table/](http://kangax.github.com/es5-compat-table/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T17:37:20.810

经典继承不是官方语言功能，但原型继承*是*（并且已经存在很长时间）但它有点笨拙。

但事实证明，您可以使用原型复制经典继承，但反之则不行。并且有很多图书馆可以做到这一点。我喜欢John Resig 的[here](http://ejohn.org/blog/simple-javascript-inheritance/)或[backbone](http://backbonejs.org/#Model-extend)或[coffee script classes](http://coffeescript.org/#classes)。

您确实有构造函数，但没有超级构造函数。

[这是一个如何在普通的旧 javascript 中进行简单继承的示例。](http://jsfiddle.net/px9x4/2/)

```
// Parent "class"
var Foo = function() {
  this.barVal = 'baz';
};

// Parent instance method
Foo.prototype.bar = function() {
  return this.barVal;
};

// Test out an instance
var foo = new Foo();
console.log(foo.bar()); // 'baz'

// Child "class"
var Foo2 = function() {
  Foo.call(this); // invokes previous constructor 
};

// Assign prototypical ancestor
Foo2.prototype = new Foo();

// Child instance method
Foo2.prototype.bar = function() {
  var prevResult = Foo.prototype.bar.call(this); // invoke previous method implementation
  return prevResult + '!';
}

// New child instance method
Foo2.prototype.newMethod = function() { // new method only on child class
  return 'Some new method!'
};

// Test out an instance
var foo2 = new Foo2()
console.log(foo2.bar()) // 'baz!'
console.log(foo2.newMethod()) // 'Some new method!'​ 
```

但这里也有边缘情况。使用一个小的帮助程序库来使这更容易一点也不丢人。

# java - 使用 Netty 4.x 将两种类型的消息写入通道

> ID：12695217
> 
> 赞同：0
> 
> 时间：2012-10-02T17:27:51.283
> 
> 标签：java, netty

使用 Netty 的新 4.x API，发生了一些变化（有些大有些小）。我已经迁移了我的旧服务器核心以使用新的 API，但我无法找到解决此问题的方法。在 3.x 中，我可以使用

```
 MessageEvent e 
```

这使我可以将 e 转换为我需要的类型（在本例中为 ServerMessage 和 String，因为它们是用于服务器->客户端消息的两种类型）。

使用 3.x 时，我可以这样做：

```
 public void writeRequested(ChannelHandlerContext chctx, MessageEvent e)
    {
        if(e.getMessage() instanceof ServerMessage) //change 
        {
         ServerMessage message = (ServerMessage) e.getMessage();
        Channels.write(chctx,e.getFuture(),message.getData());
        logger.debug("Message sent (id: "+message.getMessageID()+ " data: "+message.getMessageBody()+")");

    }

        else if(e.getMessage() instanceof String)
        {
            String data =(String)e.getMessage();
            ChannelBuffer buffer = ChannelBuffers.buffer(data.length());
            buffer.writeBytes(data.getBytes());

            Channels.write(chctx,e.getFuture(),buffer);

            logger.debug("Written string (possible <policy-file-request />) to client #id ->" +
                    +Environment.getGameInstance().getManager().getSession(chctx.getChannel());
        }
    } 
```

但是，对于 4.x，我对我可以使用什么感到有点困惑。我已经部分实现了像这样的简单发送；

```
public void encode(ChannelHandlerContext ctx, ServerMessage msg, ByteBuf buffer) {

   if(msg instanceof ServerMessage) {

        ServerMessage message = (ServerMessage)msg;
        ctx.channel().write(message.getData());
        logger.debug("Message sent (id: "+message.getMessageID()+ " data: "+message.getMessageBody()+")");

   }
    else {
                 // string stuff here
            }
   } 
```

我的基本问题是，我将如何向客户端编写字符串和 ServerMesssage？（我的字符串很简单）

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T09:13:05.473

如果您真的想对两个对象使用相同的 ChannelHandler，只需使用这两个消息的公共超类，然后像在 3.x 中所做的那样进行转换。无论如何，我认为如果你只使用两个不同的 ChannelHandler 会更干净。

# android - android - facebook 对处理分享意图的看法 - 如何处理它

> ID：12695218
> 
> 赞同：3
> 
> 时间：2012-10-02T17:27:51.080
> 
> 标签：android, facebook

刚刚跌跌撞撞

facebook上的讨论：[Android Intent Sharing is Broken](https://developers.facebook.com/bugs/332619626816423)

并了解到 facebook 在处理分享意图方面的立场是..

> ...我们的 FB 应用程序处理意图，因为它是用户在其 Facebook 上共享链接（例如您的应用程序 URL）等内容的有效方式。但是，就像我之前提到的，为我们的用户预先填写消息是违反我们的政策的，因为它会破坏用户声音的真实性，因此我们的应用程序不接受 EXTRA_* 字段。...

我现在想知道如何处理。当然，我可以在一定程度上理解 Facebook 的立场，无论如何我们都必须接受它。尽管如此，Facebook 对共享意图的处理肯定会导致 Android 应用程序方面的用户体验不佳。现在

*   有没有办法将 facebook 应用程序排除在处理意图之外
*   有没有办法填补这个领域

到目前为止，我在我的[应用程序中所做的是将要共享的建议文本复制到剪贴板中，如果需要，用户可以将其粘贴到 (facebook) 字段中。](https://play.google.com/store/apps/details?id=com.dorjeduck.justdharmaquotes)这当然可行，但恐怕没有人得到这个。因此，我想知道您如何处理 Facebook 对分享意图的这种不满意的情况。

谢谢哥们

马丁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T06:28:34.930

“绕过”它的唯一方法是集成 Facebook SDK 并在用户的时间轴上创建对象。

# ios - ios自动布局视觉格式-对齐

> ID：12695222
> 
> 赞同：3
> 
> 时间：2012-10-02T17:28:16.630
> 
> 标签：ios, cocoa, autolayout

在 iOS6 中，我使用自动布局。

*   我以编程方式创建了 2 个视图 v1 和 v2。
*   v2 作为子视图添加到 v1
*   v1 的约束已经以编程方式创建（此处未显示）。
*   我希望 v1 和 v2 具有相同的大小，并且我希望将 v2 放置在 v1 的顶部，完全匹配水平和垂直中心，以便 v2 正好位于 v1 的顶部

**问题：**

*   我怎样才能做到这一点（最好使用视觉格式，如果不可能的话，你可以建议替代方法）？

**代码**- 下面给出了我的尝试，但它没有提供所需的输出。- 没有抛出错误。V1 放置正确，但 V2 是 V1 的左手角之一

**注意 - 我在下面的评论中解释了我想要做什么。**

```
[v1 addSubView:v2];

v1.translatesAutoresizingMaskIntoConstraints        = NO;
v2.translatesAutoresizingMaskIntoConstraints        = NO;

NSDictionary *viewDictionary = NSDictionaryOfVariableBindings(v1,
                                                              v2);

//I wanted v1 and v2 to be of the same height and wanted the center Y to be aligned together
NSArray *horizontalConstraints = [NSLayoutConstraint constraintsWithVisualFormat:@"H:[v2(==v1)]"
                                                                         options:NSLayoutFormatAlignAllCenterY
                                                                         metrics:nil
                                                                           views:viewDictionary];

//I wanted v1 and v2 to be of the same height and wanted the center X to be aligned together
NSArray *verticalConstraints = [NSLayoutConstraint constraintsWithVisualFormat:@"V:[v2(==v1)]"
                                                                       options:NSLayoutFormatAlignAllCenterX
                                                                       metrics:nil
                                                                         views:viewDictionary];

[v1 addConstraints:horizontalConstraints];
[v1 addConstraints:verticalConstraints]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T02:32:19.523

不应该只是这个工作吗？

```
NSMutableArray *constraints = [NSMutableArray new];

constraints addObjectsFromArray:[NSLayoutConstraint constraintsWithVisualFormat:@"|[v2]|"
                                                                        options:0
                                                                        metrics:nil
                                                                          views:NSDictionaryOfVariableBindings(v2)];
constraints addObjectsFromArray:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|[v2]|"
                                                                        options:0
                                                                        metrics:nil
                                                                          views:NSDictionaryOfVariableBindings(v2)];
[v1 addConstraints:constraints]; 
```

这样做是它使 v2 将其高度和宽度拉伸到其父视图的大小，在本例中为 v1 并将其定位在其父视图的顶部。

在您的情况下，您似乎不需要对齐视图 centerX 和 centerY。否则，我无法正确理解您的问题的上下文。

# excel - Powershell设置数据验证打开的Excel单元格值

> ID：12695223
> 
> 赞同：1
> 
> 时间：2012-10-02T17:28:18.820
> 
> 标签：excel, powershell

我有一个受保护的电子表格，其中一些单元格启用了数据验证。我想使用 Powershell 将合法值写入这些单元格。

尝试类似：

```
$Worksheet.Item($col,$row)=$value 
```

总是返回：

> 例外设置“项目”：“您尝试更改的单元格或图表受到保护，因此是只读的。
> 
> 要修改受保护的单元格或图表，首先使用取消保护工作表命令（查看选项卡，更改组）删除保护。系统可能会提示您输入密码。” 在 H:\scripts\ecmTrack_Shell.ps1:81 char:27 + $WSheet.Cells.Item <<<< ($col,$row)=$value + CategoryInfo : NotSpecified: ( :) []，SetValueInvocationException + FullyQualifiedErrorId：CatchFromBaseAdapterParameterizedPropertySetValueTI

[在Use VBA to change value of cell with data validation applied 中](https://stackoverflow.com/questions/11979055/use-vba-to-change-value-of-cell-with-data-validation-applied)发现了类似的问题，但由于没有声明任何类型，因此看不到这种方法如何应用于 PShell。

非常感谢任何帮助！

# ios - 从横向到纵向时如何解决视口问题

> ID：12695224
> 
> 赞同：4
> 
> 时间：2012-10-02T17:28:20.627
> 
> 标签：ios, viewport, ipod, iphone-4

我一直在对 iPod 和 iPhone 4 的 Safari 中的视口问题进行一些研究，但我找不到关于这个问题的任何答案。关于从纵向到横向的问题有几个线程，但不是从横向到纵向。问题如下：

从纵向到横向时，我曾经遇到过正常的缩放问题，所以我添加了标签：

> `<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">`

这样就解决了这个问题。现在，当我回到纵向模式时，我制作的页面会被拉伸，并且会以增加的右边距呈现。这使页面更宽，因此您必须向左扫才能获得页面的原始位置（认为它保留了新的“右边距”）。

抱歉，如果有人已经回答了这个问题，但我似乎找不到任何对此问题的回应。

让我知道是否需要一些额外的信息。请记住这是我的第一个问题：/

谢谢！

编辑：我正在运行 iOS 6，并遇到此问题。当我在 iOS 5.1.1 上运行我的页面时，它会正确显示，因此它可能是以前修复的视口错误的新版本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T19:29:57.610

我认为您想将此添加到您的 CSS 或样式块中。（[在这个帖子里](https://stackoverflow.com/questions/1619802/uiwebview-resizes-text-after-rotating-looking-for-explanation-for-magical-bug-o)）

```
 html {
      -webkit-text-size-adjust: none; /* Never autoresize text */
  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-25T19:02:18.470

我通过 jquery 和 css 找到了解决方法。我不知道它的效果如何，但它是满足我需求的一种选择。基本上，将#orient id 标签添加到您的body 标签中，然后使 .ios6-mobile 类具有您遇到问题的设备的最大宽度。在我的例子中，它适用于运行 ios6 的 iphone 尺寸，所以我的最大宽度为 320 像素。这是jquery代码。

jQuery

```
window.addEventListener("orientationchange", function() {
  if(window.orientation == 0){
      $("#orient").addClass("io6-mobile");
  } else if (window.orientation !== 0){
      $("#orient").removeClass("io6-mobile");
  }
}, false); 
```

CSS

```
#orient { /* Don't need any code. Just a helpful ID to pass to jQuery */ }
.ios6-mobile { max-width:320px /* change the width to whatever size your device is */; overflow:hidden; } 
```

希望这在某种程度上有所帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T08:42:46.483

这帮助我解决了同样的问题

```
@media (max-width:640px) and (orientation: landscape) {
    body {-webkit-text-size-adjust: 100%;}
} 
```

而对于 Retina 显示错误

```
@media (max-width:640px) and (orientation: landscape) and (-webkit-min-device-pixel-ratio:2) {
    body {-webkit-text-size-adjust: 70%;}
} 
```

# java - 已实现的链表中的获取方法，Java

> ID：12695226
> 
> 赞同：4
> 
> 时间：2012-10-02T17:28:37.867
> 
> 标签：java, linked-list

我需要实现一个从零开始的整数链接列表（不使用现有的 LinkedList 类）。

这是代码：

*单个链接类*

```
public class Link {
    public int data;
    public Link nextLink;

    public Link(int d1) {
        data = d1;      
    }

    public void printListElements(){
        System.out.println(data);
    }
} 
```

*和 LinkedList 类*

```
public class LinkedList {
    private Link first;
    public LinkedList(){
        first = null;
    }

    public void add(int data1){
        Link linklist = new Link(data1);
        linklist.nextLink = first;
        first = linklist;
    }

    public void printList(){
    Link current=first;
    System.out.println("List Elements are ");
    while(current!=null){
       current.printListElements();
       current=current.nextLink;
    }
  }
} 
```

如您所见，它已经*添加*和*printList*方法。但是我如何创建一个 get() 方法，它返回一个特定索引的值。

这就是我的意思：

```
public static void main(String args[]){
    LinkedList MyList = new LinkedList();

    MyList.add(1);
    MyList.add(2);
    MyList.add(3);
    MyList.add(4);

    System.out.println("MyList.get(0)"); // should get 1
        System.out.println("MyList.get(1)"); // should get 2 etc
} 
```

先感谢您。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T17:31:10.377

好吧，既然它是一个链表，除了第一个元素之外，你没有任何方法可以直接访问任何元素，对吧？因此，唯一的方法是从那里开始并逐步执行（通过连续跟随指向下一个元素的链接），直到到达索引指定的元素，然后返回该元素。最简单的方法是使用循环。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-02T17:32:54.557

你不能用你当前的实现来做到这一点。因为您将每个新节点添加为头节点。

如果您更改您的`add()`以便将每个新节点添加为最后一个节点，那么您可以使用`index`传递给的值`get()`作为循环计数器来执行此操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T17:43:38.943

在 LinkedList 中，您可以还原您的元素。

```
public int get(int i) {
    int n = indexOf(first); // count-1 actually
    Link current = first;
    while (n > i) {
        --n;
        current = current.nextLink;
    }
    return current.data;
}

private int indexOf(Link link) {
    if (link == null) {
        return -1;
    }
    return 1 + indexOf(link.nextLink);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T18:53:15.353

我建议使用双链表：

```
class Node<T> {
   Node<T> next;
   Node<T> prev;
   T data;
}

class LinkedList<T> {
   Node<T> head;
   Node<T> tail;
   int count;
} 
```

您的 add 方法实际上只是创建一个新节点，并将其附加到尾部的“下一个”指针，重新分配尾部，并增加计数。（是的，只要你有一个尾指针，你就可以用一个链表来做到这一点）

这种方法 add 是一个恒定时间操作并保留插入顺序（与您采用的单链表方法不同，其中不保留插入顺序）。

此外，您可以优化“get”以查看请求的索引是否更接近头部或尾部，并从适当的末端遍历以获得您想要的节点。

我认为这是家庭作业，所以我不想放弃整个代码。

# jquery - 将jsonp与jquery一起使用时解析json文件

> ID：12695227
> 
> 赞同：0
> 
> 时间：2012-10-02T17:28:38.647
> 
> 标签：jquery, json, jsonp

json文件：

```
{
"weather": [
    {
        "location": "G",
        "temp": "9"
    },
    {
        "location": "L",
        "temp": "6"
    },
    {
        "location": "W",
        "temp": "10"
    }
] 
```

}

脚本

```
<script type="text/javascript">
                    // <![CDATA[
                    $(document).ready(function() {
                        var url =  ".../Json.php";
                        $.getJSON(url + "?callback=?", null, function(weather) {
                            for(i in weather) {
                                location = weather[i].location;
                                temp = weather[i].temp;
                                $("#footer").append(location.text + temp.text+"<hr />");
                            }
                        });
                    });

                    // ]]>
</script> 
```

有人可以告诉我我在哪里做错了吗？那是因为我使用的 json url 属于不同的域吗？我尝试使用 jsonp 但它仍然无法正常工作，....
非常感谢。
P/S：我在哪里得到了Jsonp想法[示例](https://stackoverflow.com/questions/2681466/jsonp-with-jquery)，我无法配置服务器，这是被禁止的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T17:36:12.760

问题是您请求 JSONP 并获取 JSON。它只会被解析并默默地忽略，因为没有函数调用来对对象做任何事情。

您的 JSONP 响应应该有一个围绕对象的函数调用，如下所示：

```
func({
  "weather": [
    {
        "location": "G",
        "temp": "9"
    },
    {
        "location": "L",
        "temp": "6"
    },
    {
        "location": "W",
        "temp": "10"
    }
  ]
}); 
```

使用 querystring 参数的值`callback`作为函数名，而不是`func`在上面的示例中。

* * *

然后当你得到结果时，它不是一个数组，它是一个具有数组属性的对象。使用`weather`属性获取数组：

```
for(i in weather.weather) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T17:31:49.360

你不能使用这个

```
var url =  ".../Json.php"; 
```

您无法调用其他域 url

尽管 XMLHttpRequest API 很强大，但它的使用受到“同源”策略的限制。这意味着您发送 XMLHttpRequest 的 url 的主机名不能与 Web 服务器的主机名不同。

# ruby-on-rails - 向大规模分发的网站添加安全功能是否安全？

> ID：12695228
> 
> 赞同：1
> 
> 时间：2012-10-02T17:28:43.290
> 
> 标签：ruby-on-rails, deployment, ssl, openid

我正在制作一个网站，我计划让用户可以轻松部署该网站；他们将能够获取我的源代码并将其部署到他们自己的服务器并作为他们自己的服务器运行。

我正在考虑尝试将 SSL 和 OpenID 以及其他功能合并到网站中。让用户访问这些文件（例如我的 OpenID/Twitter/Facebook 客户端密钥和机密，或 SSL 证书的东西，或其他任何东西..）会成为潜在的安全隐患或任何东西吗？他们能利用这些信息做任何危险的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T17:31:28.127

SSL 不是应用程序的关注点

所有客户端密钥和秘密都是您自己的责任......我不会公开分发它们。

通常所做的是从环境中读取这些信息

```
facebook_client_key = ENV["FACEBOOK_CLIENT_KEY"] 
```

所以部署者只需要配置环境，而不是应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T17:34:03.713

我会避免将诸如您的客户密钥和机密之类的内容添加到您分发给用户的任何文件中。他们被称为秘密是有原因的！我不知道 Facebook 或 Twitter API 的来龙去脉，但肯定有 Akismet 等产品，它是 Wordpress 的反垃圾邮件插件，密钥用于识别您的特定 Wordpress 实例。

如果您出于商业目的使用 Wordpress 网站，则应该为 Akismet 付费。问题是，虽然您自己可能不会将其用于商业目的，但取决于您制作和分发的内容，这并不是说其他​​人不会将其用于商业目的，最终不仅会为您毁掉它，但适用于使用您的软件的其他人。

您应该将密钥和秘密作为应用程序配置的一部分，并且也许提供有关您的用户如何获取自己的密钥的说明。

# java - 通过 OpenCV 在 Android 中使用本机函数

> ID：12695232
> 
> 赞同：3
> 
> 时间：2012-10-02T17:29:15.227
> 
> 标签：java, android, c++, opencv, java-native-interface

我想使用 OpenCV+Android，使用原生函数。但是，我有点困惑如何将位图用作参数以及如何返回已编辑位图（或 Mat）的值。

例如，我有一个本机功能：

```
#include <jni.h>
#include <opencv2/core/core.hpp>
#include <opencv2/imgproc/imgproc.hpp>

JNIEXPORT ??? JNICALL Java_com_my_package_name_and_javaclass_myFunction(JNIEnv* env, jobject javaThis, cv::Mat mat1){
    //here will be code to perform filtering, blurring, canny edge detection or similar things.
        //so I want to input a bitmap, edit it and send it back to the Android class.

return ???
    } 
```

所以在这里我使用 cv::Mat 作为参数。我知道这是错误的，但我不确定它应该是什么，以及对应的 java 类中应该是什么。它应该是一个字节数组吗？然后在上面的本机函数中，参数将是 jByteArray （或类似的）？

对于返回对象，我应该放什么？这应该是一个数组吗？

基本上我正在寻找的是在 Java 类中我有一个 Mat（或位图）我将它发送到本机函数进行编辑并返回一个很好编辑的位图。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T23:19:41.237

这是 Android 的 OpenCV 教程代码。我记得我花了一段时间才理解 JNI 约定。先看看 JNI 代码

```
#include <jni.h>
#include <opencv2/core/core.hpp>
#include <opencv2/imgproc/imgproc.hpp>
#include <opencv2/features2d/features2d.hpp>
#include <vector>

using namespace std;
using namespace cv;

extern "C" {
JNIEXPORT void JNICALL Java_org_opencv_samples_tutorial3_Sample3View_FindFeatures(JNIEnv* env, jobject thiz, jint width, jint height, jbyteArray yuv, jintArray bgra)
{
    jbyte* _yuv  = env->GetByteArrayElements(yuv, 0);
    jint*  _bgra = env->GetIntArrayElements(bgra, 0);

    Mat myuv(height + height/2, width, CV_8UC1, (unsigned char *)_yuv);
    Mat mbgra(height, width, CV_8UC4, (unsigned char *)_bgra);
    Mat mgray(height, width, CV_8UC1, (unsigned char *)_yuv);

    //Please make attention about BGRA byte order
    //ARGB stored in java as int array becomes BGRA at native level
    cvtColor(myuv, mbgra, CV_YUV420sp2BGR, 4);

    vector<KeyPoint> v;

    FastFeatureDetector detector(50);
    detector.detect(mgray, v);
    for( size_t i = 0; i < v.size(); i++ )
        circle(mbgra, Point(v[i].pt.x, v[i].pt.y), 10, Scalar(0,0,255,255));

    env->ReleaseIntArrayElements(bgra, _bgra, 0);
    env->ReleaseByteArrayElements(yuv, _yuv, 0);
}
} 
```

然后是Java代码

```
package org.opencv.samples.tutorial3;

import android.content.Context;
import android.graphics.Bitmap;

class Sample3View extends SampleViewBase {

    public Sample3View(Context context) {
        super(context);
    }

    @Override
    protected Bitmap processFrame(byte[] data) {
        int frameSize = getFrameWidth() * getFrameHeight();
        int[] rgba = new int[frameSize];

        FindFeatures(getFrameWidth(), getFrameHeight(), data, rgba);

        Bitmap bmp = Bitmap.createBitmap(getFrameWidth(), getFrameHeight(), Bitmap.Config.ARGB_8888);
        bmp.setPixels(rgba, 0/* offset */, getFrameWidth() /* stride */, 0, 0, getFrameWidth(), getFrameHeight());
        return bmp;
    }

    public native void FindFeatures(int width, int height, byte yuv[], int[] rgba);

    static {
        System.loadLibrary("native_sample");
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T18:15:30.510

您最好阅读[Android 示例](http://docs.opencv.org/doc/tutorials/introduction/android_binary_package/android_binary_package_using_with_NDK.html)（本机）的默认 OpenCV。

当然，不能`cv::Mat`用作参数，因为这是 c++ 类而不是 java。但是，如果我没记错的话，您可以从 java 源代码调用 c++ 类方法（它也是 JNI 的一部分）。

在您的情况下，您必须使用指向图像数据的指针（它可能是`uchar*`或`int*`在 c++ 中，它与`byte[]`或`int[]`在 java 中相同）。例如，您可以使用[getPixels](http://developer.android.com/reference/android/graphics/Bitmap.html#getPixels%28int%5B%5D,%20int,%20int,%20int,%20int,%20int,%20int%29)方法从 Android Bitmap 获取像素。在 C++ 中，您可以使用特定的[mat 构造函数](http://opencv.willowgarage.com/documentation/cpp/basic_structures.html#mat)，该构造函数采用指向图像数据的指针：

```
// constructor for matrix headers pointing to user-allocated data
Mat(int _rows, int _cols, int _type, void* _data, size_t _step=AUTO_STEP);
Mat(Size _size, int _type, void* _data, size_t _step=AUTO_STEP); 
```

希望能帮助到你。

# zend-framework - 如何下载 Zend_Jabber 库？

> ID：12695236
> 
> 赞同：3
> 
> 时间：2012-10-02T17:29:26.233
> 
> 标签：zend-framework, xmpp, zend-framework-modules

我已经下载了 Zend 框架，但没有包含 ZEND_JABBER 库。我怎样才能下载它？（[http://framework.zend.com/wiki/pages/viewpage.action?pageId=30641](http://framework.zend.com/wiki/pages/viewpage.action?pageId=30641)）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T17:41:13.880

该页面是 ZF 课程的提案，但似乎从未完成。无论如何，它从来都不是 ZF 1 的一部分。目前似乎也没有任何用于处理 Jabber 的 ZF2 软件包。该提案的代码可在[google 代码](http://code.google.com/p/phpjabberlib/downloads/list)上找到，但自 2007 年以来没有更改过，可能不完整。

[xmpphp和](http://code.google.com/p/xmpphp/)[JAXL](https://github.com/abhinavsingh/JAXL)一样，看起来像是一个有前途的 xmpp 库。还有许多其他[php jabber 客户端](http://www.google.com/search?q=php+jabber+client)都应该与您的 ZF 应用程序一起使用。

# python - 如何从字符串创建 n 个字母计数

> ID：12695239
> 
> 赞同：1
> 
> 时间：2012-10-02T17:29:30.753
> 
> 标签：python, string

如何转换字符串以获得三个字母的计数？例如，说字符串`"i like walking"`to`""i l", " li", "lik" "`等等？

如果我想知道我总共有多少计数并列出每个计数出现的时间怎么办？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-02T17:33:49.893

一个简单的列表理解：

```
s = "i like walking"
triplets = [s[i:i+3] for i in range(len(s) - 2)] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-02T17:33:13.683

```
s = "i like walking"
print [s[i:i+3] for i in xrange(0, len(s) - 2)] 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-02T17:36:05.960

这是列表推导的替代方法：

```
>>> s = "i like walking"
>>> map(''.join, zip(s, s[1:], s[2:]))
['i l', ' li', 'lik', 'ike', 'ke ', 'e w', ' wa', 'wal', 'alk', 'lki', 'kin', 'ing'] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T17:34:59.553

```
>>> strs="i like walking"
>>> pair_size=3

>>> [strs[i:i+pair_size] for i in range(len(strs)-(pair_size-1))]
['i l', ' li', 'lik', 'ike', 'ke ', 'e w', ' wa', 'wal', 'alk', 'lki', 'kin', 'ing']

>>> pair_size=4
>>> [strs[i:i+pair_size] for i in range(len(strs)-(pair_size-1))]
['i li', ' lik', 'like', 'ike ', 'ke w', 'e wa', ' wal', 'walk', 'alki', 'lkin', 'king'] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-02T17:43:52.127

另一种方法：

```
mystr="i like walking"
mylist=[]

i=0
while i<len(mystr)-2:
  mylist.append(mystr[i:i+3])
  i+=1

print mylist 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-02T17:33:12.793

像这样的一些想法应该有效：

```
result = []
for i in range(0,len(yourString) - 2):
   temp = yourString[i] + yourString[i+1] + yourString[i+2]
   result.append(temp) 
```

# php - 带有 jquery 的活动单选按钮

> ID：12695242
> 
> 赞同：3
> 
> 时间：2012-10-02T17:29:39.580
> 
> 标签：php, jquery, select, button, radio

我使用此站点上的所有有用答案来尝试构建一个 jquery 脚本来选择单选按钮，但由于某种原因它们不起作用。难道我做错了什么？为了简单起见，我从第一格开始。

我在下面附上了 php 生成的表单生成的格式。我尝试了多个浏览器，但无法获得任何按钮来选择任何内容。是否有一些我没有考虑到的复杂性？该页面是一个.php页面，表单是用php生成的。

很抱歉这个基本问题 - 任何帮助将不胜感激。不确定它是否相关，但我希望这些按钮可以在移动设备和各种浏览器上使用。

表格代码：

```
 <form class="form-horizontal" method="get" action="submit.php" name="form">
    <div class="control-group">
        <div class="row-fluid">
            <div class="span2"></div>
            <div class="span8">
                <label class = "control-label" for="input1"> foreign policy </label>

                <div class="controls">
                    <label class="checkbox inline"><input type="radio" name="group1" id="1_l" value="1_l"> Liberal</label>
                    <label class="checkbox inline"><input type="radio" name="group1" id="1_m" value="1_m"> Moderate</label>
                    <label class="checkbox inline"><input type="radio" name="group1" id="1_c" value="1_c"> Conservative</label>
                </div>
            </div>
        </div>

        <div class="row-fluid">
            <div class="span2"></div>
            <div class="span8">
                <br>
                <center><button type="submit" class="btn btn-danger btn-large">Generate</button></center>
            </div>
            <div class="span2"></div>
        </div>
</form> 
```

jQuery代码：

```
$('button').click(
function() {
    $('#1_l').attr('checked', true);
}
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T18:12:54.583

使用 jQuery 中的 ":checked" 选择器来选择选中的输入，否则只会得到第一个。

```
$(function () {

    $('button.btn').click(function () {
        var $box = $('.checkbox input:checked');
        if ($box.length > 0)
            alert($box.val());
    });

});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T18:09:14.707

确保仅在加载 DOM 后绑定处理程序：

```
$(function() {
  $('button').click(function() {
    $('#1_l').attr('checked', true);
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T18:19:32.870

这是我看到的你有一个没有关闭的 div 我关闭了它

我将按钮类型更改为按钮而不是提交，所以我可以看到它工作并且一切都很好

[看我的工作演示](http://jsfiddle.net/hacjx/2/)

```
<form class="form-horizontal" method="get" action="submit.php" name="form">
    <div class="control-group">
        <div class="row-fluid">
            <div class="span2"></div>
            <div class="span8">
                <label class = "control-label" for="input1"> foreign policy </label>

                <div class="controls">
                    <label class="checkbox inline"><input type="radio" name="group1" id="1_l" value="1_l"> Liberal</label>
                    <label class="checkbox inline"><input type="radio" name="group1" id="1_m" value="1_m"> Moderate</label>
                    <label class="checkbox inline"><input type="radio" name="group1" id="1_c" value="1_c"> Conservative</label>
                </div>
            </div>
        </div>

        <div class="row-fluid">
            <div class="span2"></div>
            <div class="span8">
                <br>
                <center><button type="button" class="btn btn-danger btn-large">Generate</button></center>
            </div>
            <div class="span2"></div>
        </div>
    </div>
</form>​ 
```

这是jQuery

```
$(function () {
    $('button').click(function() {
        $('#1_l').attr('checked', true);
    });​
} 
```

# html - fullCalendar 日历 div 不显示在带有 phonegap 的设备上

> ID：12695244
> 
> 赞同：1
> 
> 时间：2012-10-02T17:29:44.260
> 
> 标签：html, cordova, fullcalendar

fullCalendar 在设备 (Android ICS) 上启动时不会在 PhoneGap 上显示日历。

但是内容是通过 Chrome 或 Firefox 加载的，它可以正常加载并且可以看到内容。我还尝试在 phonegap 内没有任何自定义代码的情况下自行运行 fullCalendar 演示，并且日历不会呈现。

```
<!DOCTYPE HTML>
<html>
 <head>
  <title>a</title>
  <meta name="viewport" content="width=device-width, initial-scale=1"> 
  <link rel="stylesheet" href="./jquery.mobile-1.1.1/jquery.mobile-1.1.1.min.css" />
  <link rel="stylesheet" href="./fullcalendar/fullcalendar.css">
  <link rel="stylesheet" href="./fullcalendar/fullcalendar.print.css" media="print">
  <script type="text/javascript" charset="utf-8" src="cordova-2.1.0.js"></script>
  <script type="text/javascript" src="./jquery.mobile-1.1.1/jquery-1.8.1.min.js"></script>
  <script type="text/javascript" src="./jquery.mobile-1.1.1/jquery-ui-1.8.23.custom.min.js"></script>
  <script type="text/javascript" src="./jquery.mobile-1.1.1/jquery.mobile-1.1.1.min.js"></script>
  <script type="text/javascript" src="./fullcalendar/fullcalendar.min.js"></script>
    <script type='text/javascript'>
    $(document).ready(function() {

        var date = new Date();
        var d = date.getDate();
        var m = date.getMonth();
        var y = date.getFullYear();

        var calendar = $('#calendar').fullCalendar({
            header: {
                left: 'prev,today,next',
                right: 'agendaDay'

            },
            defaultView: "agendaDay",
            selectable: true,
            selectHelper: true,
            select: function(start, end, allDay) {
                var title = prompt('Event Title:');
                if (title) {
                    calendar.fullCalendar('renderEvent',
                        {
                            title: title,
                            start: start,
                            end: end,
                            allDay: allDay
                        },
                        true // make the event "stick"
                    );
                }
                calendar.fullCalendar('unselect');
            },
            editable: true,
            events: [
                {
                    title: 'Morning Status Meeting',
                    start: new Date(y, m, d, 9, 30),
                    allDay: false
                },
                {
                    title: 'Lunch meeting with John Appleseed',
                    start: new Date(y, m, d, 12, 0),
                    end: new Date(y, m, d, 13, 30),
                    allDay: false
                },
                {
                    title: 'Android Product Review',
                    start: new Date(y, m, d, 14, 0),
                    end: new Date(y, m, d, 15, 0),
                    allDay: false
                },
                {
                    title: 'Andrew and Matthew\'s baseball finals',
                    start: new Date(y, m, d, 17, 0),
                    end: new Date(y, m, d, 19, 0),
                    allDay: false
                },
                {
                    title: 'Birthday Party',
                    start: new Date(y, m, d+1, 19, 0),
                    end: new Date(y, m, d+1, 22, 30),
                    allDay: false
                },
            ]
        });

    });

</script>

    <style type='text/css'>
        body {
            margin-top: 40px;
            text-align: center;
            font-size: 14px;
            font-family: "Lucida Grande",Helvetica,Arial,Verdana,sans-serif;
            }

        #wrap {
            width: 400px;
            margin: 0 auto;
            }

        #external-events {
            float: left;
            width: 150px;
            padding: 0 10px;
            border: 1px solid #ccc;
            background: #eee;
            text-align: left;
            }

        #external-events h4 {
            font-size: 16px;
            margin-top: 0;
            padding-top: 1em;
            }

        .external-event { /* try to mimick the look of a real event */
            margin: 10px 0;
            padding: 2px 4px;
            background: #3366CC;
            color: #fff;
            font-size: .85em;
            cursor: pointer;
            }

        #external-events p {
            margin: 1.5em 0;
            font-size: 11px;
            color: #666;
            }

        #external-events p input {
            margin: 0;
            vertical-align: middle;
            }

        #calendar {
            float: right;
            width: 400px;
            background-color: white;
            }

    </style>

 </head>
<body> 
    <!-- Start of first page -->
    <div data-role="page" id="service-booking" data-theme="b">
        <div data-role="header">
            <h1>Service Appointment Booking</h1>
            <a href="index.html" data-icon="gear" class="ui-btn-right">Options</a>
        </div>
        <div data-role="content" class="ui-content" role="main">

        <div class="ui-grid-a">
            <div class="ui-block-a" width="300">
            <div id='wrap'>
                <div id='calendar'></div>
            </div>
            </div>
        </div><!-- /grid-a -->
        </div><!-- /content -->
    </div><!-- /page -->

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T22:52:25.820

我在 Android 上显示边距时遇到了一些问题。尝试无边际。

# browser - 如何从网页启动程序？

> ID：12695245
> 
> 赞同：-1
> 
> 时间：2012-10-02T17:29:43.483
> 
> 标签：browser, remote-access

我只是想从网页中打开我的电脑中的程序。例如，我出去了，拿起智能手机，进入网页，然后单击一个按钮，然后在我的电脑（在家，连接到互联网）中启动程序。我怎样才能做到这一点？

我试过：打开文件，但浏览器（Firefox、Internet Explorer）尝试下载此文件但未打开。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T17:37:28.723

纯粹出于安全原因，Web 浏览器无法在远程机器上运行文件，因为它显然会造成严重危害。这只有在您尝试在用于访问网站的机器上运行文件时才可行。有一些可用的应用程序可以在远程计算机上或从远程计算机打开文件，但它们倾向于使用 TCP 或 UDP 连接来传输数据，而不是 HTTP 连接。

解决此问题的最佳方法是在您的 PC 上安装服务器应用程序，然后使用智能手机上的客户端应用程序连接到 PC。

只需在 google 上搜索`Remote control smartphone pc`，或类似的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T17:33:29.033

您无法使用网页执行此操作。您必须使用 VNC。有许多带有移动客户端应用程序的开源版本。

# header - WSO2 标头调解，401

> ID：12695246
> 
> 赞同：1
> 
> 时间：2012-10-02T17:29:46.343
> 
> 标签：header, http-headers, wso2, wso2esb

我想在身份验证失败后对消息返回 401 响应。我相信这可以通过标头调解来完成，但不确定。我只是不知道它将是什么命名空间或将其设置为什么。

我分别相信#status# 和 HTTP/1.1 401。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T04:31:02.447

HTTP_SC [http://wso2.org/project/esb/java/4.0.3/docs/properties_guide.html](http://wso2.org/project/esb/java/4.0.3/docs/properties_guide.html)

# d3.js - d3.js 图形宽度

> ID：12695248
> 
> 赞同：3
> 
> 时间：2012-10-02T17:29:51.560
> 
> 标签：d3.js

[http://jsfiddle.net/BhrpA/1/embedded/result/](http://jsfiddle.net/BhrpA/1/embedded/result/)

为什么图形没有扩展完整的 789px？（黑色容器 div 的宽度）

SVG 元素是 789，但最右边有 100px 左右的黑色空间。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T17:50:59.557

您的 x 域设置不正确。由于数组是基于 0 的，因此您的最大索引`length-1`不是`length`. 因此，如果您将其更改为：

```
x=d3.scale.linear().domain([0,data.length-1]).range([0,w]) 
```

您会看到它现在按预期完成了全长。

# c# - 编组 LPSTR 和浮动时的不平衡堆栈

> ID：12695249
> 
> 赞同：2
> 
> 时间：2012-10-02T17:29:53.357
> 
> 标签：c#, c++, pinvoke

我正在使用平台/调用，我正在尝试将浮点 LPSTR 和 int 编组到 c++ 函数，我收到以下错误：对 PInvoke 函数“Game！Game.Graphics::CreateModel”的调用使堆栈不平衡。这可能是因为托管 PInvoke 签名与非托管目标签名不匹配。检查 PInvoke 签名的调用约定和参数是否与目标非托管签名匹配。这是我的 C# 代码：

```
public struct Graphics
        {
        [DllImport(@"Graphics.dll", EntryPoint = "StartGL")]
        public static extern void StartGL();
        [DllImport(@"Graphics.dll", EntryPoint = "CreateModel")]
        public static extern void CreateModel([MarshalAs(UnmanagedType.LPStr)]string ModelPath, [MarshalAs(UnmanagedType.LPStr)]string TexturePath,float xposh, float yposh, float zposh, float rotAngleh, float xroth, float yroth, float zroth);
        [DllImport(@"Graphics.dll", EntryPoint = "rotateModel")]
        public static extern void rotateModel(int id,float rotAngle,float x, float y, float z);
        }
    class Program
    {
        static void Main(string[] args) 
        {
            OpenGL();
        }
        static void OpenGL()
        {
            Graphics.CreateModel("box.obj","asd.png",0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f);
            Graphics.rotateModel(0,1.5707963267948966192313216916398f, 1.0f, 0.0f, 0.0f);
            Graphics.StartGL();
            //end of program
        } 
```

和 c++ 函数的声明：

```
extern "C"  __declspec(dllexport)void StartGL();
extern "C"  __declspec(dllexport)void CreateModel(LPSTR ModelPath,LPSTR TexturePath,float xposh,float yposh,float zposh,float rotAngleh,float xroth,float yroth,float zroth)
{
    m3Dobject mod = m3Dobject(ModelPath,TexturePath,xposh,yposh,zposh,rotAngleh,xroth,yroth,zroth);
    Models.push_back(mod);
}
    extern "C"  __declspec(dllexport)void moveModel(int id,float x,float y,float z)
{
    Models[id].xpos = x;
    Models[id].ypos = y;
    Models[id].zpos = z;
}
extern "C"  __declspec(dllexport)void rotateModel(int id,float rotAnglef,float x,float y,float z)
{
    Models[id].rotAngle = rotAnglef;
    Models[id].xrot = x;
    Models[id].yrot = y;
    Models[id].zrot = z;
} 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T17:33:27.287

默认情况下，C++ 使用`__cdecl`调用约定，但 C# 默认为`__stdcall`. 因此，您需要在 PInvoke 声明中指定这一点，即::

```
[DllImport(@"Graphics.dll", EntryPoint = "StartGL", CallingConvention=CallingConvention.Cdecl)] 
```

# java - 我的 Java 代码无法运行，为什么？（只有几行）

> ID：12695255
> 
> 赞同：1
> 
> 时间：2012-10-02T17:30:08.510
> 
> 标签：java

我不得不为一个班级项目写这个。编译时我没有收到任何错误，但是当我尝试执行它时程序不会运行。

我们必须编写一个程序 myRandomWalkers.java，它接受两个命令行参数 N 和 T。在每个 T 个独立实验中，模拟 N 步的随机游走并计算平方距离。输出均方距离（T 方距离的平均值）。

我写了以下内容：

```
public class myRandomWalkers {

    public static void main(String[] args) {

        int n= Integer.parseInt(args[0]);
        int t= Integer.parseInt(args[1]);
        int x= 0; // starting x position
        int y= 0; // starting y position
        int sum = 0; // for calculating mean square distance
        double r;

        int count = 0;
        while (count <= t)
        {
            for (int i=0; i<n; i++) {

                r= Math.random();
                if (r<=0.25) x++;
                else if(r<=0.50) x--;
                else if(r<=0.75) y++;
                else if(r<=1.0) y--;        

                int z = ((x*x) + (y*y));
                sum +=z;
            }
        }

        int average = (sum/t);
        System.out.println ("mean squared distance = " + average);
    }        
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-02T17:33:13.683

输出将取决于您传递给程序的参数。然而：

*   如果`count > t`不会执行while循环
*   如果`count <= t`由于您不增加计数而导致 while 循环永远不会结束 - 您可能需要`count++;`在 while 循环中的某个位置添加一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T17:47:13.157

正如 assylias 所说，你的 while 循环的退出条件永远不会达到，因为`count`永远不会改变。

但是，我还要评论您使用了 2 个不同的循环，而这两个循环的情况非常相似。有些人会争辩说，您在这里使用哪种类型的循环是个人喜好，但使用 2 种不同的样式没有意义。我倾向于使用这样的原则，即如果我知道会有多少次迭代然后使用 for 循环（所以任何使用计数器的东西都符合条件）

其他考虑（额外的信用）可能是看看你的 parseInt 调用，我相信负数会很好，但你的计算不会考虑它们。而且非数字也可以很容易地传递到命令行，那么你的程序会做什么呢？你希望它做什么？

# javascript - jquery从选择框中获取列表中所有项目的索引

> ID：12695258
> 
> 赞同：-1
> 
> 时间：2012-10-02T17:30:19.837
> 
> 标签：javascript, jquery

我有一个选择框，例如：

```
<select name="blah" id="meh">
<option value="1">Car</option>
<option value="2">Horse</option>
<option value="3">Van</option>
</select> 
```

然后我有一些Json，例如：

```
[Object { id="1",  label="Car",  value="1"}, Object { id="3",  label="Van",  value="3"}] 
```

我想要做的是从选择中获取与我的json中的值匹配的索引，并且我想从我的选择中获取不在我的json中的索引。所以我写了这段代码：

```
$.map( data, function( item ) {
        $('#meh option').filter(function() {
            if($(this).text() == item.label){
                $('ul.chzn-results').append('<li id="meh_chzn_o_'+$(this).index()+'" class="active-result">' + item.label + '</li>');
                }
        });
}); 
```

现在这让我得到了我的 json 中的索引；但是，我正在努力获取那些不在 json 中的内容，然后`$('#meh_chzn_c_'+$(this).index()+').remove();`对那些不属于 json 的内容进行处理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T08:16:52.143

所以我想出了以下代码来解决这个问题：

```
$.getJSON(surl+'contacts/_ajax/ajax_listTribes.cfm?bIsAjax=true&lstTribeIDs='+lsttribeids, function(data) {
    var arrids = $.map(data,function(obj){ return obj.id });
    $('#lstTribeIDs option').each(function(){
        if( $.inArray($(this).val() , arrids) != -1 ) {
            //do stuff
        } else {
            //do other stuff
        }
    });
}); 
```

因此，获取 JSON 对象，获取其中的 'id' 部分并转换为数组，然后循环我`<select>`并检查当前的值是否`<option>`在我的数组中。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-02T17:37:15.083

看起来你的json搞砸了..

```
{ id="1",  label="Car",  value="1"} 
```

所有键值对都应该在**"" 双引号**中。**以及用冒号**分隔的键值对：

 **所以你的 json 应该是这样的

```
[
  { "id" : "1",  "label" : "Car",  "value" :"1"},
  { "id" : "3",  "label" : "Van" ,  "value" : "3"}
] 
```

修复 json 对象后，这是输出。

[检查演示](http://jsfiddle.net/sushanth009/u6dpt/2/)**

# rest - RestEasy 中的 Reg xml 输出

> ID：12695262
> 
> 赞同：1
> 
> 时间：2012-10-02T17:30:43.207
> 
> 标签：rest, jaxb, resteasy

我正在尝试从 restEasy 服务获取 XML 输出。它工作正常。问题是我看不到没有任何值的元素。我在必要时在域类中使用了@xmlElement。在 Json 响应中，我可以看到具有空值的元素。这不适用于 XML。例如：

JSON响应：“chemStructure”：{“inchi”：null，“inchiKey”：null，“smiles”：null，“iupac”：null，“imageUri”：null，“notation”：null}

XML 响应：

我想至少看到带有空标签的元素

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T17:33:17.970

默认情况下，JAXB（这是 RESTEasy 等 JAX-RS 实现的默认绑定层）不会编组空值。`nillable`您可以通过在 上指定设置来更改此行为`@XmlElement`。

```
@XmlElement(nillable=true)
private String imageUri; 
```

然后`null`将在 XML 中使用该`xsi:nil`属性表示一个值。

```
<imageUri xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/> 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2012/04/binding-to-json-xml-handling-null.html](http://blog.bdoughan.com/2012/04/binding-to-json-xml-handling-null.html)

# java - 验证在休眠中成功执行的创建/更新/删除

> ID：12695268
> 
> 赞同：3
> 
> 时间：2012-10-02T17:31:10.733
> 
> 标签：java, hibernate

在休眠中如何确认/验证 session.save(entity)、session.delete(entity) 和 session.update(entity) 操作是否已成功执行而无需再次调用 db？

我的意思是如果你删除一个实体，你如何确认它被删除。可以在不再次调用数据库的情况下完成吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-02T17:47:29.817

如果要使用会话对象上的实体捕获保存/更新/删除调用的失败，您应该注意它`HibernateException`的子类。`RuntimeException`如果没有抛出异常，则说明操作成功。

如果您使用 JPA 语义，那么您应该注意处理此类故障场景`PersistenceException`的对应部分。`HibernateException`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T17:50:29.897

`session.delete,session.save and session.update`方法在失败时不加检查`HibernateException`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T07:56:58.513

如果指定的操作失败，将抛出 Hibernate 异常。所以，你应该有一个 HibernateException 的 catch 块。如果控制进入该块，那么您应该返回 false 以指示操作不成功。

# javascript - 总是包装 水平滚动条出现时文本到窗口

> ID：12695269
> 
> 赞同：0
> 
> 时间：2012-10-02T17:31:13.067
> 
> 标签：javascript, jquery, html, css

我的 HTML 文件中的文本可以很好地换行，直到窗口大小调整为小于具有静态宽度的表格/图像。一旦出现滚动条，文本就会停止换行。

当水平滚动条似乎可以容纳静态表格/图像时，我需要所有`<p>`元素继续包装到窗口大小，但我一生都找不到有关如何完成此操作的任何文档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T17:33:54.813

安迪，设置 CSS 溢出属性有帮助吗？发生溢出时，您可以使其可滚动或隐藏文本。见：[http ://www.w3schools.com/cssref/pr_pos_overflow.asp](http://www.w3schools.com/cssref/pr_pos_overflow.asp)

```
<p style="overflow:auto"></p> 
```

将其设置为自动将仅在文本“溢出”边界时显示滚动条。

# javascript - 使用 jquery 点击处理程序使 Selenium IDE 记录点击对象

> ID：12695270
> 
> 赞同：1
> 
> 时间：2012-10-02T17:31:14.747
> 
> 标签：javascript, jquery, selenium-ide

我正在使用 Selenium 记录 Web 应用程序的测试脚本。

应用程序中的某些页面包含表示数据库中记录列表的表。有一个 jquery click 处理程序附加到表行，它加载一个页面，允许用户在单击表行时编辑相关记录。

不幸的是，Selenium IDE 不会记录对表行的点击。我看过代码，相关函数是：

```
Recorder.prototype.findClickableElement = function(e) {
    if (!e.tagName) return null;
    var tagName = e.tagName.toLowerCase();
    var type = e.type;
    if (e.hasAttribute("onclick") || e.hasAttribute("href") || tagName == "button" ||
        (tagName == "input" && 
         (type == "submit" || type == "button" || type == "image" || type == "radio" || type == "checkbox" || type == "reset"))) {
        return e;
    } else {
        if (e.parentNode != null) {
            return this.findClickableElement(e.parentNode);
        } else {
            return null;
        }
    }
} 
```

我试图通过添加以下内容来修改它：

```
if($ && $._data) {
    var ev = $._data(e, "events");
    if(ev && ev.click)
        return e;
} 
```

但是， $._data 为空！

如果我在 Firebug 中查看相同的变量，打开相同的网页，$._data 存在，并且 $._data(e, "events").click 也存在。

我不确定为什么它存在于 Firebug 中，但不存在于 Selenium 中。Selenium 是否有可能在不同的上下文中运行，所以有 2 个不同的“$”变量，还是什么？

# c# - Sharepoint 沙盒解决方案 - 在 webprovisioned 事件上更新 Sitepages/Home.aspx，偶尔发生冲突错误

> ID：12695275
> 
> 赞同：1
> 
> 时间：2012-10-02T17:31:44.417
> 
> 标签：c#, sharepoint, sandbox

作为我正在创建的沙盒解决方案的一部分，我有一个 Web 配置的事件接收器，它执行以下操作：

*   更新新网站品牌以匹配根网站
*   更新默认的 sitepages/home.aspx（如果存在）
*   删除 OOTB default.aspx（如果站点有站点页面/主页）

这一切似乎大部分时间都在工作，但偶尔在创建子站点时会出现以下错误消息：

> 错误 - 文件 SitePages/Home.aspx 已于 2012 年 10 月 2 日 08:51:36 -0700 被 xxx@xxx 修改。

它不会一直发生，这使得理解和调试真的很奇怪。如果您在创建另一个站点后快速创建一个站点，这似乎会发生？

谁能帮我理解为什么会发生这种情况。值得注意的是，我在 SharePoint Online 上，因此无法检查相关 ID。

```
public override void WebProvisioned(SPWebEventProperties properties)
    {

        // Get and set child and top sites
        SPWeb childSite = properties.Web;
        SPWeb topSite = childSite.Site.RootWeb;

        // Apply branding from top site to childsite
        childSite.MasterUrl = topSite.MasterUrl;
        childSite.CustomMasterUrl = topSite.CustomMasterUrl;
        childSite.AlternateCssUrl = topSite.AlternateCssUrl;
        childSite.SiteLogoUrl = topSite.SiteLogoUrl;
        childSite.Update();

        // Construct HTML for new home.aspx page
        string content = "Test Content";

        // Check if the newsite has a sitepages library and home.aspx
        SPFile oFile = childSite.GetFile("Sitepages/Home.aspx");
        if (oFile.Exists)
        {
            // replace page content with new html
            oFile.Item["WikiField"] = content;

            // Update
            oFile.Item.Update();

            // Delete old Default page. 
            SPFile oDefault = childSite.GetFile("default.aspx");
            if (oDefault.Exists) 
            {
                oDefault.Delete();
            }
            oDefault.Update();
        }

    } 
```

# php - 如何使用Javascript转移替换功能来替换多个字符？

> ID：12695277
> 
> 赞同：0
> 
> 时间：2012-10-02T17:32:06.140
> 
> 标签：php, javascript, replace

我使用这段代码：

```
<script type="text/javascript">
    function transfer(which) {
        which = which.replace(/[\-]+/g,'-');    // to remove extra hypens
                which = which.replace( 'č', 'c' ); 
                which = which.replace( 'ē', 'e' ); 
                which = which.replace( 'ģ', 'g' ); 
                which = which.replace( 'ī', 'i' ); 
                which = which.replace( 'ķ', 'k' );
                which = which.replace( 'ļ', 'l' ); 
                which = which.replace( 'ņ', 'n' ); 
                which = which.replace( 'ū', 'u' ); 
                which = which.replace( 'ž', 'z' ); 
                which = which.replace( 'š', 's' ); 
                which = which.replace( 'ā', 'a' );  
        which = which.replace(/\s/g,'-'); // to replace spaces with hypens
        which = which.replace(/[\-]+/g,'-');    // to remove extra hypens
        which = which.replace(/[^a-zA-Z0-9\-]/g,'').toLowerCase(); // to convert to lower case 
        document.getElementById("url_slug").value = which;
   }
</script> 
```

如您所见，现在有许多已更改的字符，但我还需要将所有俄语字符更改为拉丁语。如果我这样做，我的代码会很长。所以我的问题是：是否可以使用 Javascript 转移替换功能替换许多字符而不是每行一个字符。类似于 PHP 的东西

```
 $cyr  = array('а','б','в','г','д','e','ж','з','и','й','к','л','м','н','о','п','р','с','т','у', 
        'ф','х','ц','ч','ш','щ','ъ','ь', 'ю','я','А','Б','В','Г','Д','Е','Ж','З','И','Й','К','Л','М','Н','О','П','Р','С','Т','У',
        'Ф','Х','Ц','Ч','Ш','Щ','Ъ','Ь', 'Ю','Я' );
        $lat = array( 'a','b','v','g','d','e','zh','z','i','y','k','l','m','n','o','p','r','s','t','u',
        'f' ,'h' ,'ts' ,'ch','sh' ,'sht' ,'a' ,'y' ,'yu' ,'ya','A','B','V','G','D','E','Zh',
        'Z','I','Y','K','L','M','N','O','P','R','S','T','U',
        'F' ,'H' ,'Ts' ,'Ch','Sh' ,'Sht' ,'A' ,'Y' ,'Yu' ,'Ya' );
        $textcyr = str_replace($cyr, $lat, $textcyr); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T17:42:03.980

JavaScript 中没有内置函数来执行此操作，但您可以很容易地创建自己的函数。在对象中创建俄语到拉丁语的映射，然后使用`for..in`. 对于循环处理的每个键值对，进行替换。

```
function transfer(which) {
    // define a Russian-to-Latin mapping object
    var map = {
                'б':'b',
                'в':'v',
                 // all the rest ...
              };

    // replace non-Latin chars with Latin replacements
    for(cyr in map) {
        var lat = map[cyr];
        which = which.replace(new RegExp(cyr, 'g'), lat);

        // Or without RexExp: 
        //   which = which.split(cyr).join(lat);
    }

    // general cleanup
    which = which.replace(/\s/g,'-')      // spaces to hyphens
                 .replace(/[\-]+/g,'-')   // remove duplicate hyphens
                 .replace(/[^a-zA-Z0-9\-]/g,'').toLowerCase();

    // show the result
    document.getElementById("url_slug").value = which;
} 
```

请注意，当`replace`使用字符串作为其第一个参数时，它仅替换字符串的第一个实例（例如，`"aaa".replace('a','b')`返回`"baa"`，而不是`"bbb"`）。您需要使用全局正则表达式多次替换字符串，就像我在示例中所做的那样。只需确保您的俄语没有任何特殊的正则表达式字符，如`^`, `$`, `(`,`)`等（但从您的示例来看，我猜这不会有问题）。**或者**，您可以使用我作为评论添加的`split`/解决方案。`join`

根据您的需要，您可以将`map`对象作为参数提供，而不是将其内置到函数中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T08:46:39.993

朋友，在 javascript 中没有类似的内置方法`str_replace`...但是您可以通过使用此名称创建一个函数来创建此方法...在您的 javascript 文件中或`script`在您的 html 页面的标签下附加此函数...

```
function str_replace(search, replace, subject){ // same as php
    for(var i=0;i<search.length;i++){
        subject=subject.replace(new RegExp(search[i],"g"),replace[i]);
    }
    return subject;
} 
```

如何使用：

```
var cyr = ['а','б','в','г','д','e','ж','з','и','й','к','л','м',
           'н','о','п','р','с','т','у','ф','х','ц','ч','ш','щ',
           'ъ','ь','ю','я','А','Б','В','Г','Д','Е','Ж','З','И',
           'Й','К','Л','М','Н','О','П','Р','С','Т','У','Ф','Х',
           'Ц','Ч','Ш','Щ','Ъ','Ь', 'Ю','Я'],
    lat = ['a','b','v','g','d','e','zh','z','i','y','k','l','m',
           'n','o','p','r','s','t','u','f','h','ts','ch','sh',
           'sht','a','y','yu','ya','A','B','V','G','D','E','Zh',
           'Z','I','Y','K','L','M','N','O','P','R','S','T','U',
           'F' ,'H' ,'Ts','Ch','Sh','Sht','A','Y','Yu','Ya'];

textcyr = str_replace(cyr, lat, textcyr); 
```

如果您想将方法名称更改为`str_replace`其他名称，只需更改函数名称...

# python - PyAudio 正在剪辑声音的结尾

> ID：12695288
> 
> 赞同：4
> 
> 时间：2012-10-02T17:33:10.087
> 
> 标签：python, pyaudio

我已经编写/正在使用 PyAudio 用 python 编写的软件 FSK 调制解调器。起初我将声音调制成 *.wav 文件，然后在稍后播放，但这不是一个长期的解决方案。我已经放置了一些代码，它接受一些给定的输入，准备要发送的 8N1 数据，然后尝试播放它。

我的问题是声音本身似乎没有完全播放；我已经通过注意到解调器产生正确的消息而不用最后几个字符来验证这一点。记录调制器输出的波也证实了这一观察。

我认为这个问题与 frames_per_buffer 有关，但我不知道发生了什么。我试图通过一次发送所有数据（在 stream.write(...) 中）来吸引 PyAudio 本身，但这失败了。我也尝试过一次发送一个块（如[http://people.csail.mit.edu/hubert/pyaudio/](http://people.csail.mit.edu/hubert/pyaudio/)的情况）。但是，我不是从文件中播放，而是从一组样本中播放。

问题可能是什么？

# perl - Apache2::Const qw() 等效于 Apache::Constants qw(:common :response)

> ID：12695293
> 
> 赞同：0
> 
> 时间：2012-10-02T17:33:16.523
> 
> 标签：perl, apache, apache2, porting

我仍然在尝试将遗留的 perl 应用程序从 Apache 1.3.x（谁真正知道 perl 的版本）移植到 RHEL6 ......这是 Apache 2.2.x / perl 5.10.x

无论如何，如果有人知道等价于

```
use Apache::Constants qw(:common :response); 
```

...需要重构以使用 Apache2 ...

```
use Apache2::Const qw(:common :response);  <--This is _not_ correct. 
```

看起来有 :common，但是 :response 抛出错误：“unknown apache2_const:: group `response'”

另外，如果有人可以在这里“教人钓鱼”，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T17:37:22.183

根据文档，使用 TAG 导入`:common`将带来以下内容：

```
Apache2::Const::AUTH_REQUIRED
Apache2::Const::DECLINED
Apache2::Const::DONE
Apache2::Const::FORBIDDEN
Apache2::Const::NOT_FOUND
Apache2::Const::OK
Apache2::Const::REDIRECT
Apache2::Const::SERVER_ERROR 
```

您知道导入时您愿意使用哪些标签`:response`吗？[如果是这样，请尝试在这里](http://search.cpan.org/~phred/mod_perl-2.0.7/docs/api/Apache2/Const.pod)寻找它们

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T18:39:24.197

如果您不导入任何内容并使用`use strict;`，如果您使用未导入的常量，您几乎肯定会遇到编译错误。所以可以使用

```
use Apache2::Const qw( ); 
```

然后将您实际需要的内容添加到导入列表中，这通过查看编译时错误消息来确定。

# python - Python中的正确列表和递归尾部

> ID：12695297
> 
> 赞同：2
> 
> 时间：2012-10-02T17:33:18.597
> 
> 标签：python, cons, cdr

在各种 Lisps 中，[正确的列表](https://en.wikipedia.org/wiki/Lisp_%28programming_language%29#Conses_and_lists)是`nil`（空值）或[cons](https://en.wikipedia.org/wiki/Cons)单元格，其中第一个（head，first，car）值指向一个值，第二个（tail，rest，cdr）指向另一个正确的列表。其他各种函数式编程语言都实现了这种头尾功能，包括 Erlang 和 Scala。在 Common Lisp 和 Emacs Lisp 中，您可以无限递归地找到列表的尾部：

```
(rest (rest (rest (rest (rest (rest ())))))) 
```

它会产生`nil`。我想在 Python 中模拟这种行为。当然，为了性能，我最好坚持使用经过大量优化的本机数据类型，所以这只是为了练习。我的代码是：

```
class MyList:
    def __init__(self, *xs):
        self._x = []
        self._x.extend(xs)
        self.is_empty = not xs
        self.head = xs[0] if xs else None
        self.tail = MyList(*xs[1:]) if xs[1:] else MyList([]) 
```

但是，现在调用`tail`会进入递归并导致最大递归深度错误。我怎样才能使如下表达式成为可能？换句话说，我如何在 Python 中创建适当列表的功能？

```
a = MyList(1,2)
my_list.tail.tail.tail.tail.tail.tail 
```

相关问题，但没有回答我的问题：[LISP cons in python](https://stackoverflow.com/q/8073882/596361)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T17:44:25.653

我已经尝试稍微重写您的示例-这似乎对我有用而不会破坏堆栈。

```
class MyList(object):
    def __init__(self, *xs):
        self._x = xs if all(xs) else tuple()
        self.head = xs[0] if xs else None

    @property
    def is_empty(self):
        return not self._x

    @property
    def tail(self):
        return MyList(self._x[1:]) if self._x[1:] else MyList([])

s = MyList(1, 2)
print s.tail.tail.tail.tail.tail.tail 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T17:50:23.000

与其尝试创建类并将其绑定到列表，不如编写自己的链表（这基本上是 lisps 使用的，包含元素的节点链和下一个节点（代表列表的其余部分） ）。

我的蟒蛇有点生锈，但我会尝试一下。考虑这个伪代码：

```
class WugList:
    def __init__(self, *xs):
        self.head = xs[0] if (len(xs) > 0) else None
        self.tail = WugList(xs[1:]) if (len(xs) > 0) else self
        self.is_empty = (len(xs) > 0)

    def car(self):
        return self.head

    def cdr(self):
        return self.tail 
```

然后，您应该能够使用以下内容：

```
derp = WugList([1,2,3,42,69,9001])
a = derp.car()                   # 1
b = derp.cdr().car()             # 2
c = derp.cdr().cdr().cdr().car() # 42

# chaining cdr infinitely is possible because the last node's head is None
# and its tail is itself
d = derp.cdr().cdr().cdr().cdr().cdr().cdr().cdr().cdr().cdr().cdr()
              .cdr().cdr().cdr().cdr().cdr().cdr().cdr().cdr().cdr()
              .cdr().cdr().cdr().cdr().cdr().cdr().cdr().cdr().car() # None 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T17:44:39.027

如果您想无限地获取`tail`列表的属性，则需要使用`property`. 这样，在您请求之前不会评估尾部，这可以防止无限递归。

```
class MyList:
    def __init__(self, *xs):
        self._x = []
        self._x.extend(xs)
        self.is_empty = not xs
        self.head = xs[0] if xs else None

    @property
    def tail(self):
        return MyList(*self._x[1:])

a = MyList(1,2)
print a._x
# [1, 2]
print a.tail._x
# [2]
print a.tail.tail._x
# []
print a.tail.tail.tail._x
# []
print a.tail.tail.tail.tail._x
# [] 
```

# c# - GridView SelectionMode，在 Windows 8 应用程序中最多有 2 个选择

> ID：12695300
> 
> 赞同：2
> 
> 时间：2012-10-02T17:33:32.323
> 
> 标签：c#, windows-8, microsoft-metro

我想最大化 Gridview 中的项目选择，以便用户选择 1 或 2 个项目。在 XAML 中，只有`SelectionMode`像`Multiple`、`Extended`、`Single`、中的预定义选项`None`。恐怕我需要另一种方法来最大化选择。你能给我一个建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T20:13:48.167

模拟最多 2 个选择的一种方法是订阅[SelectionChanged事件并从](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.primitives.selector.selectionchanged.aspx)[SelectedItems](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.listviewbase.selecteditems.aspx)集合中删除第一个/最后一个元素：

XAML：

```
<GridView SelectionMode="Multiple" SelectionChanged="GridView_SelectionChanged" /> 
```

代码隐藏：

```
private void GridView_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
    var gridView = sender as GridView;
    if (gridView == null) return;
    if (gridView.SelectedItems.Count > 2)
    {
        gridView.SelectedItems.Remove(gridView.SelectedItems[0]);
    }
} 
```

# javascript - 如何在新的函数构造中嵌入数组

> ID：12695301
> 
> 赞同：-2
> 
> 时间：2012-10-02T17:33:36.677
> 
> 标签：javascript

如何在我这样创建的函数中获取 javascript 数组： ![在此处输入图像描述](../Images/372574e9410e99d58ef6d41daafe9cc9.png)

谢谢。

**编辑：** 感谢您关心评估、邪恶等，但我的问题实际上与评估的利弊无关。谢谢。

**编辑2 ：** 谢谢萨姆。您的回答将我推向了正确的方向： ![在此处输入图像描述](../Images/d67b15163e3878ce33248cb595d6b53a.png)

**PS** 编程习语有时会变成宗教。反正我有我需要的。快乐编码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T17:50:28.400

您必须确保传递给构造函数的任何主体都是字符串，因此如果 myArray 是您的数组，请使用

```
'['+myArray.join(',')+']' 
```

或者在你的情况下，

```
var fBody = 'console.log(['+myArray.join(',')+']);';
var b = new Function(fBody); 
```

# jquery - JQuery复选框复制值不起作用

> ID：12695309
> 
> 赞同：0
> 
> 时间：2012-10-02T17:34:08.597
> 
> 标签：jquery

我写了这个表格，它工作正常，除了应该复制地址值的复选框。不管我怎么写，改写，改正。它根本行不通。

代码的第一部分是表单，第二部分是代码的复制部分，第三部分是不相关的掩码。

```
$(document).ready(function () {
//Any hidden errors that were passed back from 4D?
// for signup forms, we need to see which form we will show the errors on
if ($("#referralForm1").is(":visible")){
    show4DErrors("#referralForm1"); 
}

$("#referralForm1").validate({
    rules: {
        Referral_Name_T: "required",
        Referral_Company_T: "required",
        Referral_Address_T: "required",
        Referral_City_T: "required",
        Referral_State_T: "required",

        Referral_Zip_T: {
            required: true,
            zipCode: true
        },

        Referral_PhoneFull_T: {
            required: true,
            phoneNumber: true
        },

        Referral_Email_T: {
            required: true,
            email: true,

        },
        Referral_EmailConfirm_T: {
            required: true,
            email: true,
            equalTo: "#Referral_Email_T"
        },

        Referral_PayToName_T: "required",
        Referral_PayToAddress_T: "required",
        Referral_PayToCity_T: "required",
        Referral_PayToState_T: "required",

        Referral_PayToZip_T: {
            required: true,
            zipCode: true
        },

    }
});

$("Referral_SameAsAbove_T").click(function(){ 
    if ($("Referral_SameAsAbove_T").is(':checked')) 
    { 
        // Checked, copy values 
        $("#Referral_PayToAddress_T").val($("#Referral_Address_T").val()); 
        $("#Referral_PayToCity_T").val($("#Referral_City_T").val()); 
        $("#Referral_PayToState_T").val($("#Referral_State_T").val()); 
        $("#Referral_PayToZip_T").val($("#Referral_Zip_T").val()); 
    } 
    else 
    { 
        // Clear on uncheck 
        $("#Referral_Address_T").val(""); 
        $("#Referral_City_T").val(""); 
        $("#Referral_State_T").val(""); 
    } 
}); 

//Mask Setup
$('#Referral_PhoneFull_T').mask('(999) 999-9999');
$('#Referral_Zip_T').mask('99999');
$('#Referral_PayToZip_T').mask('99999'); 
```

});

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T17:39:36.017

看起来你的选择器是错误的

```
$("Referral_SameAsAbove_T")

If it is a class then supposed to be   $(".Referral_SameAsAbove_T") // prepended by a dot

If it is a id then supposed to be   $("#Referral_SameAsAbove_T") // prepended by a pound 
```

**编辑**

处理文本框的更改事件..

```
$('input[type="text"]').on('change' , function() {
    if ($("Referral_SameAsAbove_T").is(':checked')) {
         if( this.id.indexOf('Address') > -1){
            $("#Referral_PayToAddress_T").val($(this).val());
         }

          if( this.id.indexOf('City') > -1){
            $("#Referral_PayToCity_T").val($(this).val());
         }
       // Other textbox conditions here

    }
    else{
        $(this).val('');
    }

}); 
```

[小提琴](http://jsfiddle.net/sushanth009/q7f9a/)

注意：这只是为了处理 PayToAddress_T 文本框的更改事件。为他人

# transactions - 在使用 Spring Integration 提交事务之前不会触发的异步消息传递

> ID：12695310
> 
> 赞同：1
> 
> 时间：2012-10-02T17:34:14.430
> 
> 标签：transactions, spring-integration

我正在使用 Spring Integration，并且有以下场景。今天，当实体被保存、更新或删除时，我让我的 Dao 向发布-订阅频道发送一个事件。它基本上是这样实现的：

事件网关接口：

```
public interface DaoEventGateway {
  @Gateway
  void sendEvent(EntityEvent event);
} 
```

一个道：

```
public class ADao {

  private DaoEventGateway gateway;

  public void save(A aEntity) {
    ... do some stuff to save it.
    fireEvent(aEntity, EntityType.SAVE);
  }

  protected void fireEvent(A entity, EventType eventType) {
    if (eventGateway != null) {
      EntityEvent event =
                    new EntityEvent(entity, eventType);
      eventGateway.sendEvent(event);
    }
  }
} 
```

事件的某种监听器：

```
public class AEventLoggingService {
  public void receiveEvent(Event event) {
    A event = event.getEntity();
    Long id = event.getId();
    ... look up some associations based on the id ...
    ... log something about the event ...
  }
} 
```

配置如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:int="http://www.springframework.org/schema/integration"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/integration http://www.springframework.org/schema/integration/spring-integration-2.0.xsd">

    <int:publish-subscribe-channel id="aEventChannel" />

    <int:gateway id="aEventGateway" service-interface="com.factorlab.persistence.DaoEventGateway"
                 default-request-channel="aEventChannel">
        <int:method name="sendEvent" request-channel="aEventChannel" />
    </int:gateway>

    <bean id="aDao" class="com.factorlab.ADao">
        <property name="eventGateway" ref="aEventGateway" />
    </bean>

    <int:service-activator input-channel="aEventChannel"
                           ref="aEventLoggingService" method="receiveEvent" />

</beans> 
```

现在一切正常，除了性能，因为我认为所有订阅者都在与发布者相同的线程（和相同的事务）中操作。

我想将侦听器完成的工作与 DAO 中完成的工作分离，并使其异步。但是，侦听器可以依赖于他们收到关于已经在数据库中的通知的东西。所以，我不希望在事务提交之前发送（或至少不接收）消息。

对此有标准方法吗？人们对如何实现这一目标有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T18:20:22.120

Spring Integration 2.2 中的新[事务同步](http://blog.springsource.org/2012/09/26/whats-new-in-spring-integration-2-2-part-2-transaction-synchronization/)是您要找的吗？发布候选版已经发布，所以我认为最终版本应该很快就会发布，但我不确定多快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T14:02:58.363

您可以将记录写入处于待处理状态的数据库。然后根据该挂起状态轮询数据库中的挂起记录。这个过程有效地解耦了当前的同步处理，并帮助您实现想要实现的目标。

# html - 具有相同 z-index 的绝对定位元素：哪个元素将在顶部？

> ID：12695313
> 
> 赞同：12
> 
> 时间：2012-10-02T17:34:29.267
> 
> 标签：html, css, cross-browser, z-index

假设您在 a`DIV`中有几张图像，它们的位置是绝对重叠的，但*没有定义 z-index*：

**CSS**

```
img {
    position: absolute;
    top: 0px;
    left: 0px;
    width: 100px;
    height: 100px;
} 
```

**HTML**

```
<div>
    <img src="...">
    <img src="...">
    <img src="...">
</div> 
```

我注意到 Safari 和 Chrome 会在顶部显示*最后一个元素。*这是标准行为吗？换句话说，假设大多数浏览器会在顶部显示最后一个元素是否*相对安全？*

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-02T17:37:38.787

是的，可以肯定地假设。根据**[W3C](http://www.w3.org/TR/CSS2/visuren.html#propdef-z-index)**：

> 每个盒子属于一个堆叠上下文。给定堆叠上下文中的每个定位框都有一个整数堆叠级别，这是它在 z 轴上相对于同一堆叠上下文中其他堆叠级别的位置。具有较高堆栈级别的框总是在具有较低堆栈级别的框之前格式化。盒子可能有负的堆栈级别。**在堆叠上下文中具有相同堆叠级别的框根据文档树顺序从后到前堆叠**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T17:37:58.080

通常，最后激活的将在顶部。

```
div a is z-index 10, and appears first in the document

div b is z-index 10, and appears second in the document 
```

当文档呈现时，b 将在 a 之上，因为 a 被写入，然后 b 被写入顶部。

修改 a 可以把它放在首位。

基本上，如果您需要 a 出现在 b 之上，您应该在“a”上设置一个点击处理程序来提升它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-02T17:35:41.917

将显示浏览器读取的同一位置的最后一张图像。是的，这是一个安全的赌注，在所有浏览器中都是如此，因为所有文件都是逐行读取的。

# objective-c - 自定义 DatePicker 的算法

> ID：12695315
> 
> 赞同：0
> 
> 时间：2012-10-02T17:34:39.227
> 
> 标签：objective-c, ios, algorithm, uipickerview

我正在研究一种`UIPickerView`会显示时间的习惯。我需要它们与下面显示的网站相匹配。

时间将从现在开始，`x`但现在是午夜（可以是任何时间）。然后它将增加`i`. 对于下图`i = 7`。

我遇到的问题是当我更改时间时，例如**1am**，分钟也需要更改，以便用户只能为该小时选择一分钟，即以 为增量`i`，但我不确定运行正确的算法。

现在我使用`60 % i == 0`then 使用`UIDatePicker`and 设置`minuteInterval`to `i`，但如果`60 % i != 0`那是我需要使用这个客户选择器的地方。

任何人都可以帮助我提供一种算法，该算法可以为我提供*小时*、*分钟*的行数，并根据间隔填充小时和分钟吗？

![在此处输入图像描述](../Images/395cda996fe30d74e1c5094fcaa173dc.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T18:27:59.680

我不能告诉你任何关于objective-c、ios 或uipickerview 的事情......对于算法。这是一些没有特别语言的伪代码：

```
i = 7      // this is i in your example
offset=420 // This is where you could say you want 
           // to start at 7:00 (420 minutes after midnight) 
           // you could use any number here obviously.
counter = offset
while (counter<1440+offset){
    counter = counter+i
    minutes = counter%60
    hours   = counter/60  // Use integer division 
} 
```

modulous 每次都会通过给您剩余的时间来为您提供分钟数。因此，在您的示例中，分钟数将从 56 => 63 => 3 开始，这就是您想要的。

如果您只想知道给定间隔的分钟和小时数（假设间隔从 0 到 206（一天有 206 个 7 分钟间隔），那么您可以执行以下操作：

```
minutes = (i*intervalNum) % 60
hours =   (i*intervalNum) / 60    // Integer division! 
```

如果您需要一段时间内的间隔数，您可以执行以下操作：

```
keep a hashmap (again I don't know how objective-c handles these) that maps an hour to a list of the minutes that mark intervals.  In your example you could have a hashmap that looks like:

{0 => (0,7,14,21,28,35,42,49,56),
 1 => (3,10,17,24,31,38,45,52,59),
 2 => (6,13,20,27,34,41,48,55),
 ...
} 
```

您将在第一轮通过时构建此地图。要获取 2-3 时隙中的间隔数，只需返回 map[2].length （或任何等效项）。

显然，这是执行此操作的许多方法之一，并且需要更多上下文才能进入任何进一步的细节。

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T19:48:52.553

感谢ajon，我想出了这段代码

```
NSInteger counter = startTime;
while (counter + minuteInterval < endTime) {
    counter = counter + minuteInterval;
    NSLog(@"Hours: %d Minutes: %d", counter / 60, counter % 60);
} 
```

我不得不做一些修改，但我会发布我的代码，以防其他人遇到这个问题。我将他标记为答案，因为它提供了此代码的基础。

# r - 在 R 中加载后，我应该如何关闭 hdf5 文件？

> ID：12695318
> 
> 赞同：5
> 
> 时间：2012-10-02T17:35:00.857
> 
> 标签：r, hdf5

我已经在 linux 机器上成功安装了 hdf5 包。我现在希望循环读取大量 hdf5 文件中的数据并创建一个时间序列。每个 hdf5 文件对应不同的时间。在读入许多文件（刚刚超过 1000 个）后，R 说打开了太多文件。我想找到一种关闭它们的方法，以便循环可以继续。这是代码：

```
 fdate <- "200605312355" # the first date for my test loop
    fmax <- 1400
    arr <- vector()

    for (i in 1:fmax){
      fname <- paste(fdate,"_.h5") # path of h5 file
      fid <- hdf5load(fname) # fid = NULL
      arr[i] <- somevariable$data_array[lon,lat]
      # would like to close the file here
      fdate <- newdate(fdate,60*5) # a function that increments the date by seconds.
    } 
```

hdf5 包包含函数 hdf5cleanup，看起来它可以清理东西，但它需要一个文件标识符。我上面代码中的 fid 返回 NULL。尝试插入文件名，即 hdf5cleanup(fname) 导致 R 中止。也许 hdf5load 应该关闭文件并失败。如果是这种情况，有没有办法通过发出 system() 命令或其他方式来关闭连接？

顺便说一句，showConnections() 什么也不返回，好吧，实际上只是标题名称“描述类模式文本 isopen 可以读取可以写入”。

简而言之，我的问题是：使用 hdf5load() 加载 R 中的 hdf5 文件后，如何关闭它的连接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T18:40:04.560

注意：根据评论，以下答案将不起作用。离开它，至少现在是为了标记一条不成功的追求路线。

* * *

我没有`hdf5`安装，所以我无法检查这是否有效，所以这有点在黑暗中拍摄：

```
fname <- paste(fdate,"_.h5") # path of h5 file
# fhandle <- open(fname) # Comment pointed out this was not the intended function
fhandle <- file(description = fname, open = "rb")
hdf5load(fhandle) # hdf5load returns nothing when load=TRUE (the default)
arr[i] <- somevariable$data_array[lon,lat]
close(fhandle) 
```

文档说它`hdf5load`需要一个文件名，但它也可能需要一个文件句柄。如果是这样，这可能会奏效。

# php - 一个奇怪的字符编码案例，PHP 到 MySQL 并返回

> ID：12695319
> 
> 赞同：0
> 
> 时间：2012-10-02T17:35:06.357
> 
> 标签：php, mysql, database, encoding, character

我被一个问题难住了。似乎我尝试过的大多数技巧根本不起作用。问题概述如下：

1.  创建表，排序规则设置为 utf8_unicode_ci。列也一样。

2.  表单所在页面的字符编码为 UTF-8（在`<meta>`标签中）。表单设置为接受 UTF-8 ( `<form action="execute.php" method="POST" accept-charset="utf-8">`)字符集

3.  Execute.php 使用`htmlspecialchars(@trim($str), ENT_QUOTES, "UTF-8");`并运行`mysql_real_escape_string($str);`. 声明数据库连接应以 UTF-8 ( `mysql_set_charset('utf-8');`) 编码。将值插入数据库。如果我停止数据库插入并回显查询，我会得到正常的输出。

4.  现在乐趣开始了。MySQL 行显示奇数字符，例如 ß 变成 ÃŸ。

5.  如果我检索数据库数据并将其呈现在使用 UTF-8 编码的页面上，则字符看起来也很混乱（ÃŸ）。但是，当我将页面编码更改为西方 ISO 时，字符显示就好了 - ß。

我怀疑表单将数据提交到数据库时出现问题......但我无法确定到底哪里出了问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T17:41:48.983

一些东西

1.  不要通过`htmlspecialchars`或任何卫生设施运行您发布的数据。验证输入，但如果有效则按原样存储。
2.  如果需要，清理输出，例如使用`htmlspecialchars`.
3.  确保仅对 UTF8 字符串使用二进制安全函数。您不太可能在现代 PHP 中遇到这种情况，但这是可能的。
4.  停止使用已弃用的 mysql 库并切换到 mysqli (easy) 或 PDO。
5.  `SET NAMES utf8`在你用 mysqli 初始化你的数据库连接之后。
6.  Make sure your PHP file (or any used) are saved as UTF8.
7.  Set your response header to UTF8: `header('Content-type: text/html; charset=utf-8');` You can do this from anywhere in your code if you're using output buffering.
8.  Add `<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />` to page `<head>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T17:42:52.520

Did you try without the htmlspecialchars() ?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T18:05:22.077

You need the character set of the database table and columns set to UTF-8 as well. Collation only deals with how data will be sorted/compared not how it is encoded.

# android - 为 ListView 设置选择器时出现异常

> ID：12695321
> 
> 赞同：1
> 
> 时间：2012-10-02T17:35:09.163
> 
> 标签：android, android-listview

我正在尝试像这样设置 ListView 选择器：

```
fileList.setSelector(android.R.layout.simple_list_item_checked); 
```

我得到：

```
10-02 18:30:08.365: E/AndroidRuntime(13294): java.lang.IllegalStateException: Could not execute method of the activity
10-02 18:30:08.365: E/AndroidRuntime(13294):    at android.view.View$1.onClick(View.java:3044)
10-02 18:30:08.365: E/AndroidRuntime(13294):    at android.view.View.performClick(View.java:3511)
10-02 18:30:08.365: E/AndroidRuntime(13294):    at android.view.View$PerformClick.run(View.java:14109)
10-02 18:30:08.365: E/AndroidRuntime(13294):    at android.os.Handler.handleCallback(Handler.java:605)
10-02 18:30:08.365: E/AndroidRuntime(13294):    at android.os.Handler.dispatchMessage(Handler.java:92)
10-02 18:30:08.365: E/AndroidRuntime(13294):    at android.os.Looper.loop(Looper.java:137)
10-02 18:30:08.365: E/AndroidRuntime(13294):    at android.app.ActivityThread.main(ActivityThread.java:4424)
10-02 18:30:08.365: E/AndroidRuntime(13294):    at java.lang.reflect.Method.invokeNative(Native Method)
10-02 18:30:08.365: E/AndroidRuntime(13294):    at java.lang.reflect.Method.invoke(Method.java:511)
10-02 18:30:08.365: E/AndroidRuntime(13294):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
10-02 18:30:08.365: E/AndroidRuntime(13294):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
10-02 18:30:08.365: E/AndroidRuntime(13294):    at dalvik.system.NativeStart.main(Native Method)
10-02 18:30:08.365: E/AndroidRuntime(13294): Caused by: java.lang.reflect.InvocationTargetException
10-02 18:30:08.365: E/AndroidRuntime(13294):    at java.lang.reflect.Method.invokeNative(Native Method)
10-02 18:30:08.365: E/AndroidRuntime(13294):    at java.lang.reflect.Method.invoke(Method.java:511)
10-02 18:30:08.365: E/AndroidRuntime(13294):    at android.view.View$1.onClick(View.java:3039)
10-02 18:30:08.365: E/AndroidRuntime(13294):    ... 11 more
10-02 18:30:08.365: E/AndroidRuntime(13294): Caused by: android.content.res.Resources$NotFoundException: File res/layout/simple_list_item_checked.xml from drawable resource ID #0x1090005
10-02 18:30:08.365: E/AndroidRuntime(13294):    at android.content.res.Resources.loadDrawable(Resources.java:1923)
10-02 18:30:08.365: E/AndroidRuntime(13294):    at android.content.res.Resources.getDrawable(Resources.java:664)
10-02 18:30:08.365: E/AndroidRuntime(13294):    at android.widget.AbsListView.setSelector(AbsListView.java:2196)
10-02 18:30:08.365: E/AndroidRuntime(13294):    at com.blablabla.android.helpers.gui.dialog.fexplorer.FileExplorer.initializeViews(FileExplorer.java:85)
10-02 18:30:08.365: E/AndroidRuntime(13294):    at com.blablabla.android.helpers.gui.dialog.fexplorer.FileExplorer.<init>(FileExplorer.java:76)
10-02 18:30:08.365: E/AndroidRuntime(13294):    at com.example.pruebaandroid.MainActivity.click(MainActivity.java:34)
10-02 18:30:08.365: E/AndroidRuntime(13294):    ... 14 more
10-02 18:30:08.365: E/AndroidRuntime(13294): Caused by: org.xmlpull.v1.XmlPullParserException: Binary XML file line #17: invalid drawable tag CheckedTextView
10-02 18:30:08.365: E/AndroidRuntime(13294):    at android.graphics.drawable.Drawable.createFromXmlInner(Drawable.java:863)
10-02 18:30:08.365: E/AndroidRuntime(13294):    at android.graphics.drawable.Drawable.createFromXml(Drawable.java:804)
10-02 18:30:08.365: E/AndroidRuntime(13294):    at android.content.res.Resources.loadDrawable(Resources.java:1920)
10-02 18:30:08.365: E/AndroidRuntime(13294):    ... 19 more 
```

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T17:41:50.083

您正在尝试将来自（特别是该布局文件是一个简单元素）的*布局*资源设置为选择器，这显然无法正常工作，因为它需要一个*可绘制*资源。你很可能想要一个**drawable**：`SDK``CheckedTextView`

 ***```
android.R.drawable.something 
```

（例如：`android.R.drawable.list_selector_background`，默认选择器）***

# css - 保存网页和压缩 css

> ID：12695326
> 
> 赞同：0
> 
> 时间：2012-10-02T17:35:34.337
> 
> 标签：css, concatenation, extract

晚上好。

我有一个带有 +20 css 文件导入的 html 页面。如何将这些连接到一个 css 文件中并仅提取与 html 页面相关的 css 规则？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T17:50:13.907

> [这个问题不能解决OP的问题。但是，它留在这里作为来自搜索引擎的客人的参考。]

您的方法略有缺陷。

请允许我将您重定向到 Chris Coyer @ CSS-Tricks 的一篇精彩文章：一二**[或三](http://css-tricks.com/one-two-three/)**。

这是简短的版本，根据这种方法，每个页面最多应该有 3 个 CSS 文件：

1.  global.css - 包含站点级规则（正文背景、CSS 重置、排版等）。
2.  section.css - 包含部分级别的规则，我的意思是，Stack Overflow 的主页将具有某种风格，而所有常见问题解答共享另一个不同的常见问题解答特定规则文件。
3.  page.css - 包含页面级规则。如果需要特定页面的特定规则（例如，关于页面），它们会被放在这里。

原因是，不会更改的文件会被缓存。这意味着，用户只会下载一次 CSS 文件（假设它没有更改），并且在以后的访问中，文件将从用户的机器上加载，从而节省了宝贵的时间和带宽。

如果您提供一个文件，该文件是根据用户正在查看的页面生成的，那么您将失去缓存能力。因此，虽然文件大小会更小，但您需要一遍又一遍地下载文件。

tl;博士

制作一个保持静态的全局 CSS 文件，将其缩小并提供服务。然后制作一堆更具体的 CSS 文件，在您的网站/应用程序的不同部分提供。在您需要第三页特定文件的地方不会发生太多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T17:38:45.270

创建一个空白的 CSS 文件。将所有 CSS 复制到该文件中。缩小新的 CSS 文件。导入新的 CSS 文件并删除对所有其他 CSS 文件的引用。留给浏览器“只提取与html页面相关的css规则”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T22:03:26.873

我想不出一个简单的解决方案。但是如果你使用 jQuery，你可以试试下面的代码。它在 CSS 中搜索 DOM 中的每个元素并将其输出。只需将其粘贴到`<script type="text/javascript"></script>`您部分的标签中`<head>`，并确保包含 jQuery。

仅使用 Chrome 和[一个简单的测试站点](http://jsfiddle.net/Vjmnh/)进行了测试，但它也应该适用于更复杂的样式表和 DOM 结构。

```
$(function(){
    var styles = new Array;
    $('body, body *').each(function(index, element){
        //Get all stylesheets
        var sheets = document.styleSheets;
        for(var i in sheets) {
            //For every stylesheet...
            var rules = sheets[i].rules || sheets[i].cssRules;
            for(var r in rules) {
                //Check or every rule if it matches the element & check if already appended
                if($(element).is(rules[r].selectorText) &&
                   $.inArray(rules[r].cssText,styles) == -1){
                    //Append CSS to array
                    styles.push(rules[r].cssText);
                }
            }
        }
    });
    //Output
    $('body').text(styles.join(''));
});
        ​ 
```

# wix - 不使用 WixUtilExtension 的 Wix 打开页面

> ID：12695328
> 
> 赞同：0
> 
> 时间：2012-10-02T17:35:36.220
> 
> 标签：wix, wix-extension

卸载完成后，我遵循了[Wix Open 网页上的解决方案](https://stackoverflow.com/questions/1819686/wix-open-web-page-when-uninstall-completes)

它有效，但我想修改解决方案，以便在使用 light.exe 时不必放置 -ext WixUtilExtension

```
<Property Id="MyURL"><![CDATA[http://www.myurl.com/]]></Property>
<CustomAction Id="SetOpenURL" Property="WixShellExecTarget" Value="[MyURL]" />
<Binary Id="WixCA" SourceFile="C:\LocationOfFile\WixUtilExtension.dll" /> 
<CustomAction Id="OpenURL" BinaryKey="WixCA" DllEntry="WixShellExec" Impersonate="yes" Return="ignore" />

<InstallExecuteSequence>
    <!-- Launch webpage during full uninstall, but not upgrade -->
    <Custom Action="SetOpenURL" After="InstallFinalize"></Custom>
    <Custom Action="OpenURL" After="SetOpenURL"></Custom>
</InstallExecuteSequence> 
```

但是，此解决方案不起作用。有人可以向我解释为什么吗？

# uml - 从 UML 练习编码的简单 UML 项目

> ID：12695332
> 
> 赞同：1
> 
> 时间：2012-10-02T17:35:48.893
> 
> 标签：uml

我想找一个简单的（阅读小项目）完全开发的 UML 项目。我的目标是从专业级的 UML 项目中练习编写应用程序，同时获得一些经验来开始创建我自己的 UML 项目。

理想情况下，该项目将是一个 Web 应用程序，尽管我知道，理论上，UML 应该是独立于平台的，但我并不接近特定于平台的（语言、框架）项目，只要它是用于软件的。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T12:18:51.317

As a very simple starting point you could try [BlueJ](http://www.bluej.org/).

Once you have got to grips with the basics download the trial edition of [Enterprise Architect](http://www.sparxsystems.com.au/products/ea/trial.html) and play around with the reverse engineering an open source project in the supported languages.

# css - 使用 HEX 或 RGBA

> ID：12695336
> 
> 赞同：2
> 
> 时间：2012-10-02T17:36:08.143
> 
> 标签：css, colors, hex, rgba

我有一个简单的问题：如果我不打算在 RGBA 上使用 Alpha，对于某些颜色，我应该在这些颜色上使用 HEX 吗？HEX 有什么 RGBA 没有的吗？比如浏览器兼容性？还是一直使用 RGBA 就可以了？我觉得它更好，因为如果我想使用 Alpha，我可以。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T17:58:35.463

两者都应该与任何符合标准的浏览器兼容。

编辑： IE 中可能存在一些错误行为（惊喜！）：[http ://css-tricks.com/ie-background-rgb-bug/](http://css-tricks.com/ie-background-rgb-bug/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T18:07:24.863

从浏览器兼容性的角度来看，任何现代浏览器几乎没有*真正的区别。*

如果可以，我会选择 HEX。更短，一个字符串，因此更容易复制到第三方程序（例如 Photoshop 等），而且您没有[Erty 提到的 IE 错误](http://css-tricks.com/ie-background-rgb-bug/)。

我倾向于只在我需要 alpha 的地方使用 RGBA，在我使用 HEX 的所有其他元素上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T18:00:08.860

使用 RGBA 时，我相信正确的语法*是*使用 R、G、B 值。由此得名。我没有尝试使用 Hex，这可能会导致意外行为。

在浏览器兼容性方面，Hex 和 RGB 几乎相同/相同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T19:10:47.037

你实际上可以（几乎）总是使用十六进制。

即使您需要 alpha，也有一种方法可以将 RGBA 值转换为等效的 Hex 值，只要背景颜色（在具有 rgba 的元素下）是单一纯色。

这种转换的算法在[这里](https://stackoverflow.com/questions/2049230/convert-rgba-color-to-rgb/2645218#2645218)。

```
Source => Target = (BGColor + Source) =
Target.R = ((1 - Source.A) * BGColor.R) + (Source.A * Source.R)
Target.G = ((1 - Source.A) * BGColor.G) + (Source.A * Source.G)
Target.B = ((1 - Source.A) * BGColor.B) + (Source.A * Source.B) 
```

（我实际上已经使用了几次，它对我来说效果很好。

正如前面的答案中提到的，这里的好处是预期的 RBGA 颜色看起来应该在 ie8 及以下。

# ruby-on-rails - 将 params[:thing] 传递给另一个函数

> ID：12695337
> 
> 赞同：0
> 
> 时间：2012-10-02T17:36:08.830
> 
> 标签：ruby-on-rails, ruby

因此，我得到以下代码来解析 CSV 文件：

```
CSV.foreach(params[:file]) do |row|
    #bingbangbong
end 
```

但我有两个功能，一个用于显示 CSV 解析文件，另一个用于将其保存在数据库中。

我的问题是：如何将`params[:file]`var 传递给另一个函数，如下所示：

```
def show_CSV
    CSV.foreach(params[:file]) do |row|
        #Showing the parsed CSV
    end
end

def save_CSV
    CSV.foreach(params[:file]) do |row|
        #Showing the parsed CSV
    end
end 
```

但是，无需让用户再次上传文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T17:52:40.677

```
def show_and_save_CSV(options={})
  CSV.foreach(params[:file]) do |row|
    if options[:show]
      #Showing the parsed CSV
    end
    if options[:save]
      # save
    end
  end
end 
```

请记住，`CSV.foreach`循环遍历所提供文件的行，因此您只需读取一次文件。

```
def save_CSV
  show_and_save_CSV(:save => true)
end

def show_CSV
  show_and_save_CSV(:show => true)
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T17:48:47.883

在当前包含您的代码中`CSV.foreach(params[:file])`，只需调用两个不同的函数 - 一个用于保存文件，一个用于显示文件：

```
def show_CSV f
    CSV.foreach f do |row|
        # show
    end
end

def save_CSV! f
    CSV.foreach f do |row|
        # save
    end
end

def some_calling_function # I'm guessing... in your controller?
    ...
    save_CSV! params[:file]
    show_CSV params[:file]
    ...
end 
```

# eclipse - 从 jar 中删除的空资源目录

> ID：12695338
> 
> 赞同：3
> 
> 时间：2012-10-02T17:36:10.573
> 
> 标签：eclipse, resourcebundle

我的 Eclipse 插件项目包括作为项目模板的资源（文件和目录）。该插件有一个创建模板项目的向导。该插件基本上会查看资源包以找到正确的项目模板并将资源复制到用户的工作区中。

它在 Eclipse 中测试时工作正常，用户可以使用向导选择项目模板，并在他的工作区中创建模板。

但是当我创建一个产品（添加一个产品文件+导出产品）并测试它时，它可以工作，但是模板中的所有空目录都没有复制到用户的工作区中。当我检查插件（jar）文件时，实际上所有资源都在那里，除了空文件。因此，不知何故，当构建产品时，空目录会被忽略。

build.properties 是（'templates/' 目录是存储所有模板的目录，有些有空目录）：

```
source.. = src/
output.. = bin/
bin.includes = plugin.xml,\
           META-INF/,\
           .,\
           icons/,\
           resources/,\
           templates/,\
           OSGI-INF/,\
           intro/ 
```

有没有办法强制 jar 获取**所有**资源（即包括空目录）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T17:53:43.643

我的任务是将空文件放在这些目录中，然后在从向导生成项目时忽略它们。

# mysql - mysql 两个select语句合为一个标记与列值的区别

> ID：12695339
> 
> 赞同：0
> 
> 时间：2012-10-02T17:36:11.847
> 
> 标签：mysql

好的，我有两个选择语句

我想要做的是在一个选择语句中执行此操作，其中 im.alias_title =(in_image_alias_title OR a.user_id = user_id)AND a.approved = in_album_approved AND a.visible = in_album_visible;

我需要在两个结果集之间进行识别——有没有办法在查询中创建另一个列值，比如它是用户相册还是属于图像的相册。一张图片可以有多个相册。或者最好分开

```
/* Select all albums associated with an image */
SELECT a.alias_title, a.title, a.hits, a.created_on, a.updated_on, a.updated_by 
FROM album a 
INNER JOIN album_image ai ON a.id = ai.album_id 
INNER JOIN image im ON ai.image_id = im.id
WHERE im.alias_title =in_image_alias_title AND a.approved = in_album_approved AND a.visible = in_album_visible;

/* Select a users albums */
SELECT a.alias_title, a.title, a.hits, a.created_on, a.updated_on, a.updated_by 
FROM album a 
INNER JOIN album_image ai ON a.id = ai.album_id 
INNER JOIN image im ON ai.image_id = im.id
WHERE a.approved = in_album_approved AND a.visible = in_album_visible AND a.user_id = user_id; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T18:38:34.660

您可以在描述时指定过滤条件，并使用布尔表达式的结果来指示记录所在的原始查询/查询：

```
SELECT a.alias_title, a.title, a.hits, a.created_on, a.updated_on, a.updated_by,
       im.alias_title = in_image_alias_title AS q1,  -- was included in 1st query
       a.user_id      = user_id              AS q2   -- was included in 2nd query
FROM   album       a
  JOIN album_image ai ON a.id        = ai.album_id
  JOIN image       im ON ai.image_id = im.id
WHERE  (im.alias_title = in_image_alias_title OR a.user_id = user_id)
   AND a.approved = in_album_approved
   AND a.visible  = in_album_visible 
```

# iphone - 以编程方式设置 UIView 的自动调整大小掩码？

> ID：12695343
> 
> 赞同：59
> 
> 时间：2012-10-02T17:36:13.380
> 
> 标签：iphone, objective-c, ios, uiview, autoresizingmask

我必须以编程方式为`UIView`.

我不知道如何实现这一点。

![在此处输入图像描述](../Images/c412a69a24f6a61c0cfebba08dd12fed.png)

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2013-11-12T06:27:35.837

要实现该屏幕截图中的内容，您需要执行与 DrummerB 建议相反的操作。你想要一个固定的上边距，这样你就可以像这样使每一边都变得灵活：

**目标 C：**

```
view.autoresizingMask = UIViewAutoresizingFlexibleRightMargin |
                        UIViewAutoresizingFlexibleLeftMargin |
                        UIViewAutoresizingFlexibleBottomMargin; 
```

不将一侧设置为灵活意味着它将被固定（默认行为），这就是为什么没有 UIViewAutoResizingFixedTopMargin 这样的东西（因为它与不设置 UIViewAutoresizingFlexibleTopMargin 相同）

**为 Swift 编辑：**

```
view.autoresizingMask = [.FlexibleRightMargin, .FlexibleLeftMargin, .FlexibleBottomMargin] 
```

感谢 Tom Calmon 添加了第一版的 swift 版本。

**斯威夫特 5.0 更新：**

```
view.autoresizingMask = [.flexibleRightMargin, .flexibleLeftMargin, .flexibleBottomMargin] 
```

干杯。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-10-02T17:37:21.727

您必须设置视图的`autoresizingMask`属性：

```
view.autoresizingMask = UIViewAutoresizingFlexibleTopMargin; 
```

可能的值定义在`UIViewAutoresizing`：

```
enum {
   UIViewAutoresizingNone                 = 0,
   UIViewAutoresizingFlexibleLeftMargin   = 1 << 0,
   UIViewAutoresizingFlexibleWidth        = 1 << 1,
   UIViewAutoresizingFlexibleRightMargin  = 1 << 2,
   UIViewAutoresizingFlexibleTopMargin    = 1 << 3,
   UIViewAutoresizingFlexibleHeight       = 1 << 4,
   UIViewAutoresizingFlexibleBottomMargin = 1 << 5
};
typedef NSUInteger UIViewAutoresizing; 
```

您可以使用按位或运算符设置多个值`|`。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2015-09-18T12:06:09.670

**斯威夫特 2.0：**

```
view.autoresizingMask = [.FlexibleRightMargin, .FlexibleLeftMargin, .FlexibleBottomMargin] 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-08-27T16:11:31.183

**斯威夫特 4.1：**

```
view.autoresizingMask = [.flexibleHeight, .flexibleWidth, .flexibleTopMargin, .flexibleRightMargin, .flexibleLeftMargin, .flexibleBottomMargin] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-16T04:58:59.753

要设置 UIView 的灵活上边距、下边距、左边距和右边距，请编写以下代码 -

```
autoresizingMask=UIViewAutoresizingFlexibleTopMargin|UIViewAutoresizingFlexibleBottomMargin|UIViewAutoresizingFlexibleLeftMargin|UIViewAutoresizingFlexibleRightMargin; 
```

# types - 元组中的 OCaml 意外类型不匹配

> ID：12695347
> 
> 赞同：7
> 
> 时间：2012-10-02T17:36:52.583
> 
> 标签：types, ocaml, value-restriction

我正在尝试编写一个函数，它接受一个整数和一个三元组，并在给定位置返回三元组的一个元素（Hickey 书中的练习 5.3）。Triplet 应该能够包含不同类型的元素。

我想，如果我写 3 个小函数，每个返回三元组的一个特定元素，并让我的大函数相应地返回其中一个，那么它会成功，但它不起作用。

我试图摆弄这个“eta-expansion”概念，但我没有得到它。

```
let nth1 (a, _, _) = a
let nth2 (_, b, _) = b
let nth3 (_, _, c) = c

let nth i = match i with
    | 1 -> nth1
    | 2 -> nth2
    | _ -> nth3

let main = printf "%d\n" (nth 1 ("hello", 2, 'c')) 
```

所以这里应该只写“2”。有什么建议吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T17:47:20.457

您的问题的基本答案：

> 在 OCaml 中，类型系统的工作方式将强制`nth`只返回一个*类型*。你想要的是类似于*交集类型*的东西，但是 OCaml 的静态类型语义将强制`nth`只返回一个*类型*。这样做的结果是您的元组必须退化为元素是相同类型的情况。

让我们考虑一下这种交互：

```
# let nth1 (a,_,_) =a;;
val nth1 : 'a * 'b * 'c -> 'a = <fun>
# let nth2 (_,b,_) = b;;
val nth2 : 'a * 'b * 'c -> 'b = <fun>
# let nth3 (_,_,c) = c;;
val nth3 : 'a * 'b * 'c -> 'c = <fun>
# let nth i = match i with
      | 1 -> nth1
      | 2 -> nth2
      | _ -> nth3;;
val nth : int -> 'a * 'a * 'a -> 'a = <fun> 
```

所以你的问题很奇怪，不是因为`printf`调用，而是因为`nth`. 相反，您可能会考虑制作一种独特的类型，它是其中一些类型的组合。

确实，您描述的那种行为有点像依赖类型，您获得的类型实际上*取决于*input 的值`i`。这自然应该是有问题的，因为依赖类型比 ML 中的 let 绑定多态性更具表现力！

我会说，您可以对元组的*实例*执行此操作，例如，您可以创建一个类型：

```
type IntOrStringOrX = int | string | X 
```

然后你可以相应地写下第n个类型...

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-02T17:47:11.877

在编写代码之前考虑类型通常会有所帮助。您建议的函数类型是什么？

# android - 切换按钮未显示在应用程序中

> ID：12695349
> 
> 赞同：1
> 
> 时间：2012-10-02T17:36:54.407
> 
> 标签：android, android-layout, togglebutton

我创建了一个带有切换按钮的活动。我还编写了处理点击的代码。

但是当我运行应用程序时，切换按钮不会显示在活动屏幕上。

我认为这可能是模拟器的问题，所以我将其导出并在手机上尝试。

但它也不会出现在手机上。

这是活动布局文件描述。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <Button
        android:id="@+id/btnStartService"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text="Start Notifying" />

    <EditText
        android:id="@+id/txtUserMsg"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/btnStartService"
        android:layout_centerHorizontal="true"
        android:layout_marginBottom="82dp"
        android:ems="10"
        android:inputType="textMultiLine" >

        <requestFocus />
    </EditText>

    <TextView
        android:id="@+id/txtWelcomeMsg"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="18dp"
        android:text="TextView" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/txtUserMsg"
        android:layout_centerHorizontal="true"
        android:text="Message to reply with" />

    <Button
        android:id="@+id/stopNotifying"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/btnStartService"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="40dp"
        android:text="Stop Notifying" />

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/btnStartService"
        android:layout_alignLeft="@+id/txtUserMsg"
        android:layout_marginBottom="29dp"
        android:text="Caller Notifications" />

    <ToggleButton
        android:id="@+id/tglStartStop"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/textView2"
        android:layout_alignBottom="@+id/textView2"
        android:layout_toRightOf="@+id/txtWelcomeMsg"
        android:text="ToggleButton"
        android:visibility="visible" />

</RelativeLayout> 
```

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T17:44:57.947

通常你只在 id 字段中使用@+id。否则，您的所有作业都使用@id。但这不应该引起问题，请在您使用切换按钮的地方发布代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T17:45:07.073

我认为您有一个概念错误，在定位与他人相关的小部件时，您应该这样做：示例：

```
android:layout_toRightOf="@id/txtWelcomeMsg" 
```

代替：

```
android:layout_toRightOf="@+id/txtWelcomeMsg" 
```

# mysql - Mysql查询以获取输入的最后状态值

> ID：12695352
> 
> 赞同：1
> 
> 时间：2012-10-02T17:37:01.527
> 
> 标签：mysql

我有一张这样的桌子-

```
+----+---------------------+------------+---------+--------------------+
| id | check_date          | number     | status  | sid                |
+----+---------------------+------------+---------+--------------------+
|  5 | 2012-09-29 17:44:34 | 3366064235 | SUCCESS | 1348940709163284   |
|  6 | 2012-09-29 19:40:30 | 3366064235 | FAILED  | 12345678876543     |
|  7 | 2012-09-29 17:47:30 | 4466064235 | SUCCESS | 7895345678876543   |
|  8 | 2012-09-29 19:47:30 | 4466064235 | SUCCESS | 789876545678876543 |
+----+---------------------+------------+---------+--------------------+ 
```

我想获得每个号码的最后更新状态。我怎么得到这个？我尝试按 check_date desc 按编号顺序分组，但它不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T17:40:16.133

你可以使用这样的东西：

```
select t1.id, 
    t1.check_date,
    t1.number,
    t1.status
from yourtable t1
inner join
(
    select max(check_date) maxdate, number
    from yourtable
    group by number
) t2
    on t1.check_date = t2.maxdate
    and t1.number = t2.number 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/cb084/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T17:40:19.607

```
select number, Status, Check_date from MYTable A
where check_date = (select max(Check_date) from MYTable where number=A.number) 
```

# javascript - 在heroku上使用socket.io的Nodejs

> ID：12695358
> 
> 赞同：5
> 
> 时间：2012-10-02T17:37:20.543
> 
> 标签：javascript, node.js, heroku, socket.io

我正在尝试在 heroku 上使用 express 和 socket.io 运行 nodejs 应用程序，结果出现此错误

EACCESS，权限被拒绝

当我尝试运行以下代码时：

```
app.configure(function () {
   app.set('port', process.env.PORT || 3000);
});
var server = http.createServer(app).listen(app.get('port'))
io = require('socket.io').listen(server); // it crashes on this line
io.configure(function () {
    io.set("transports", ["xhr-polling"]);
    io.set("polling duration", 10);
    io.set("log level", 1);
}); 
```

甚至可以在heroku上做到这一点吗？

依赖项：

```
"socket.io": "*",
"express": "3.0.0rc4", 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T17:39:32.807

检查此链接：在 heroku上[使用 socket.io 和 node.js。](https://devcenter.heroku.com/articles/using-socket-io-with-node-js-on-heroku)

[**更新 1** ]

检查这个[答案](https://stackoverflow.com/a/10944579/1647507)，我认为它可以帮助您解决问题。

[**更新 2** ]

具有工作代码的问题的[链接](https://stackoverflow.com/questions/11962995/socket-io-chat-app-on-heroku-with-node-js)（无论客户的错误，问题本身的动机）。

```
var port = process.env.PORT || 3000;

var app = require('express').createServer()
var io = require('socket.io').listen(app);

app.listen(port);

// Heroku setting for long polling
io.configure(function () { 
    io.set("transports", ["xhr-polling"]); 
    io.set("polling duration", 10); 
});

// To set handlers for data received, etc ... use io.sockets.on('...', ...) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T18:59:54.073

当你：

```
io = require('socket.io');
app.configure(function () {
   app.set('port', process.env.PORT || 3000);
});
var server = http.createServer(app).listen(app.get('port'))
io.listen(server); // it crashes on this line
io.configure(function () {
    io.set("transports", ["xhr-polling"]);
    io.set("polling duration", 10);
    io.set("log level", 1);
}); 
```

我意识到不应该做任何不同的事情，但我只是好奇。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-29T21:13:11.367

可能您只是在同一个端口上启动 2 台服务器 - 您的`app`（快速服务器）和这台`server = http.createServer(app).listen(app.get('port'))`

试着写这个

```
server = http.createServer(app).listen(/*port not from app*/) 
```

# css - 在 div 中将 div 居中于内容之上（简单的点赞）

> ID：12695362
> 
> 赞同：-5
> 
> 时间：2012-10-02T17:37:24.767
> 
> 标签：css, html, web, center

我做了以下小提琴：

[http://jsfiddle.net/hxQE4/](http://jsfiddle.net/hxQE4/)

查看右箭头如何将图像向下推。我希望右箭头以大 div 为中心，无论其中图像的大小如何。我不能使用绝对定位，但我希望箭头相对于 div 居中（从 div 开始向下大约 300px），无论里面有什么图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T17:43:44.770

一种快速而肮脏的解决方案是将按钮 (.slider-right) 的包含跨度设置为 100% 的高度，然后应用“位置：相对；顶部：50%；” 到按钮（.slider-right .circle）。这会将按钮的顶部放在中间标记处，因此您可能需要将其稍微调整为 48% 或任何看起来最好的值。

如果您走那条路线，您还需要从包含跨度中删除上边距，否则按钮将被下拉该数量。

我还注意到您在跨度内有 div。您应该避免将块级元素（如 div）放置在内联级元素（如 span）中。它可能会按原样验证失败。

**更新** 的CSS：

```
.slider-right {
position: relative;
float: right;
height: 100%;
margin-top: 0px;
position: relative;
right: 6px;
width: 32px;
z-index: 30;
}

.circle{
position: relative;
top: 48%;
display:table;
line-height:30px;
width:10px;
height:10px;
padding:3px 5px 3px 7px;
border:2px solid #CFC5CD;
border-radius:21px;
background: #000000; /* Old browsers */
opacity: .99;
} 
```

# .net - NCover 覆盖率较低，因为没有覆盖模型。提高 ncover 覆盖率。

> ID：12695364
> 
> 赞同：0
> 
> 时间：2012-10-02T17:37:28.770
> 
> 标签：.net, c#-4.0, ncover

Ncover 覆盖率：项目中有一些类像模型一样使用（仅包含属性）。测试用例中没有这些的代码覆盖率。提高覆盖率的一般方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T17:56:21.810

如果一个类只包含属性（我的意思是真正的属性，只有没有副作用的 getter 和 setter），则无需测试它们。你会测试什么？没什么可做的。

因此，无需为它们提供代码覆盖率，并且您的代码覆盖率很好。我不担心纯属性的代码覆盖率，或者只是分配给纯属性的构造函数。这是浪费时间。

再说一次，这就是我的看法。你的旅费可能会改变。

# java - 为什么我会收到来自 Log4J 1.2.17 的警告？

> ID：12695368
> 
> 赞同：2
> 
> 时间：2012-10-02T17:37:38.807
> 
> 标签：java, spring, log4j, spring-webflow

为什么我会收到来自 Log4J 1.2.17 的警告？我正在尝试在我的 java 项目中使用 log4j，但我不断收到以下警告。有人可以告诉我为什么吗？

警告：

```
log4j:WARN Continuable parsing error 2 and column 87
log4j:WARN Document root element "log4j:configuration", must match DOCTYPE root "null".
log4j:WARN Continuable parsing error 2 and column 87
log4j:WARN Document is invalid: no grammar found. 
```

我的 log4j.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<log4j:configuration xmlns:log4j = "http://jakarta.apache.org/log4j/" debug = "false">
    <appender name = "FILE" class = "org.apache.log4j.RollingFileAppender">
        <param name = "File" value = "test.log"/>
        <param name = "MaxFileSize" value = "5MB"/>
        <param name = "MaxBackupIndex" value = "50"/>
        <layout class = "org.apache.log4j.PatternLayout">
            <param name = "ConversionPattern" value = "[%d{dd/MM/yy hh:mm:ss:sss z}] %5p %c{2}: %m%n"/>
        </layout>
    </appender>

    <appender name="console" class="org.apache.log4j.ConsoleAppender">
        <layout class="org.apache.log4j.PatternLayout">
            <param name="ConversionPattern" value="%d [%t] %-5p %c - %m%n" />
        </layout>
    </appender>

    <category name = "org.uftwf">
        <priority value = "debug"/>
    </category>

    <!-- 
    <category name = "org.apache.catalina">
        <priority value = "error"/>
    </category>

    <category name = "org.hibernate">
        <priority value = "debug"/>
    </category>

    <category name="org.hibernate.SQL"> 
        <priority value="TRACE"/>  
    </category> 

    <category name="org.hibernate.type"> 
         <priority  value="TRACE"/> 
     </category> 

     -->

    <root>
        <priority value = "warn"/>
        <appender-ref ref = "console"/>
    </root>
</log4j:configuration> 
```

我知道这只是一个警告，但我想知道为什么我会得到它们并阻止它们来......谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T17:44:26.430

你应该`<!DOCTYPE log4j:configuration SYSTEM "log4j.dtd">`在你的`<log4j:configuration`.

# html - 响应式网页设计限制

> ID：12695371
> 
> 赞同：1
> 
> 时间：2012-10-02T17:37:44.570
> 
> 标签：html

我希望我的网站在窗口较大时展开，并相应地居中，但是当窗口缩小时，我希望网站折叠到某个点，然后折叠停止。

有没有办法在响应式网站上设置最小宽度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T17:38:39.187

```
body{min-width:480px} 
```

或者你想要的任何最小宽度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T17:38:45.010

您当然可以使用一个 css 属性[min-width 。](http://www.w3.org/wiki/CSS/Properties/min-width)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T17:42:17.390

min-width 的额外好处是您可以为主窗口设置它，也可以为页面上的每个组件设置它——侧边栏或内容块。

每个最小宽度/最大宽度可以不同，因此当您调整页面大小时，这些块将符合它们的限制。

如果所有最小宽度块开始垂直堆叠，按照您在 HTML 中编写它们的顺序（减去您在其中的任何浮动/固定位置块），这使得创建一个快速而肮脏的移动站点变得非常简单。

# python - Python Ceasar Cypher 帮助关卡

> ID：12695376
> 
> 赞同：1
> 
> 时间：2012-10-02T17:38:08.470
> 
> 标签：python

有人可以帮我弄清楚如何将加密句子的所有字母保持在同一行。该代码有效，虽然很长哈。

```
sentence = raw_input('Enter a sentence to be encrypted ')
shift = input('Enter a shift value ')

def createDict (shift):
    alphabet = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ .,'
    alphaList=[]

    for letter in alphabet:
        alphaList.append(letter)
    alphaDict={}
    for letter in alphaList:
        valueLetterIndex = (alphaList.index(letter) + shift)%len(alphaList)
        valueLetter = alphaList[valueLetterIndex]
        alphaDict[letter] = valueLetter
    return alphaDict

def encryptText(sentence, shift):
    dict = createDict(shift)
    for letter in sentence:
        encryptC = dict [letter]
        print encryptC

print encryptText(sentence, shift) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T17:42:19.473

在列表中收集您的加密字符，然后打印连接结果：

```
def encryptText(sentence, shift):
    encryptionmap = createDict(shift)
    output = []
    for letter in sentence:
        output.append(encryptionmap[letter])
    print ''.join(output) 
```

我重命名了您的`dict`变量以`map`避免掩盖内置`dict`类型。

您的`createDict`功能可以简化为：

```
def createDict (shift):
    alphabet = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ .,'

    alphaDict = {}
    for pos, letter in enumerate(alphabet):
        valueLetterIndex = (pos + shift) % len(alphabet)
        valueLetter = alphabet[valueLetterIndex]
        alphaDict[letter] = valueLetter
    return alphaDict 
```

因为字符串和列表一样是序列；无需先转换为列表。通过使用`enumerate`，我们省去了查找每个字母索引的麻烦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T17:56:14.983

这是一些较短的“pythonic”代码，因为您提到了长度。

```
def createDict (shift):
    alphabet = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ .,'
    L = len(alphabet)

    return dict( (letter, alphabet[(i + shift) % L]) 
                    for i, letter in enumerate(alphabet))    

def encryptText(sentence, shift):
    D = createDict(shift)
    return ''.join(D[l] for l in sentence) 
```

# charts - Telerik RadChart 中不显示零标签

> ID：12695377
> 
> 赞同：0
> 
> 时间：2012-10-02T17:38:12.977
> 
> 标签：charts, telerik, radchart

我正在使用 Telerik RadChart 绘制折线图。一切都很好，除了零值没有显示为附件。

![在此处输入图像描述](../Images/25e6d6dc8ed7635e3b218bfe76618a9e.png) ![在此处输入图像描述](../Images/a66c840989a2d8410888713c22e6d9a0.png)

是否存在负责此行为的外观属性？

我正在创建这样的控件：

```
 /// <summary>
    /// builds the chart object
    /// </summary>
    /// <param name="chartSeriesItems">Series Items For index values</param>
    /// <param name="chartAvrageSeriesItems">Avrage 2 seies items for start and end</param>
    /// <returns></returns>
    private RadChart BuildChart(List<ChartSeriesItem> chartSeriesItems, List<ChartSeriesItem> chartAvrageSeriesItems)
    {
        RadChart chart = new RadChart();

        chart.ID = "SparklineChart";
        chart.Width = 200;
        chart.Height = 140;
        chart.DefaultType = ChartSeriesType.Line;
        chart.AutoLayout = true;
        chart.ChartTitle.Visible = false;

        chart.Appearance.Dimensions.Margins = ChartMargins.Parse("0px, 0px, 0px, 0px");
        chart.Appearance.Dimensions.Paddings = ChartPaddings.Parse("0px, 0px, 0px, 0px");
        chart.Appearance.Dimensions.AutoSize = true;
        chart.Appearance.Dimensions.Height = 140;
        chart.Appearance.Dimensions.Width = 200;
        chart.Appearance.FillStyle.FillType = FillType.Solid;
        chart.Appearance.FillStyle.MainColor = Color.Transparent;
        chart.Appearance.Border.Visible = false;

        chart.Legend.Visible = false;

        chart.PlotArea.XAxis.Visible = ChartAxisVisibility.False;
        chart.PlotArea.YAxis.Visible = ChartAxisVisibility.False;
        chart.PlotArea.Appearance.Dimensions.Margins = ChartMargins.Parse("0px, 0px, 0px, 0px");
        chart.PlotArea.Appearance.Dimensions.Paddings = ChartPaddings.Parse("0px, 0px, 0px, 0px");
        chart.PlotArea.Appearance.FillStyle.FillType = FillType.Solid;
        chart.PlotArea.Appearance.FillStyle.MainColor = Color.Transparent;
        chart.PlotArea.Appearance.Border.Visible = false;
        chart.PlotArea.EmptySeriesMessage.TextBlock.Appearance.AutoTextWrap = AutoTextWrap.True;
        chart.PlotArea.EmptySeriesMessage.TextBlock.Text = Resources.Text.NoData;

        //add series
        ChartSeries scoreSeries = new ChartSeries();
        scoreSeries.Name = "Score";
        scoreSeries.DefaultLabelValue = "#Y" + FormatText.GetFormat(Global.GetUserProfile().NumbersFormat, Global.GetUserProfile().DecimalDigits).Replace("0:", "");
        scoreSeries.Appearance.FillStyle.MainColor = Color.Black;
        scoreSeries.Appearance.LabelAppearance.Visible = true;
        scoreSeries.Type = ChartSeriesType.Line;
        scoreSeries.Items.AddRange(chartSeriesItems);

        ChartSeries avrageSeries = new ChartSeries();
        avrageSeries.Name = "Avrage";
        avrageSeries.DefaultLabelValue = "#Y" + FormatText.GetFormat(Global.GetUserProfile().NumbersFormat, Global.GetUserProfile().DecimalDigits).Replace("0:", "");
        avrageSeries.Appearance.FillStyle.MainColor = Color.Gray;
        avrageSeries.Appearance.LabelAppearance.Visible = true;
        avrageSeries.Type = ChartSeriesType.Line;
        avrageSeries.Appearance.LineSeriesAppearance.Width = 1;
        avrageSeries.Items.AddRange(chartAvrageSeriesItems);

        chart.Series.Add(scoreSeries);
        chart.Series.Add(avrageSeries);

        return chart;
    } 
```

我正在添加这样的值：

```
 ChartSeriesItem seriesItem = new ChartSeriesItem()
                            {
                                Name = "1",
                                XValue = index++,
                                YValue = 200
                            };
                        totalYValue += 200;
                        seriesItem.Label.Appearance.FillStyle.MainColor = SAObjectsUtilities.GetColorFromStatus(SA_Globals.Status.Blue);
                        //seriesItem.Label.TextBlock.Appearance.TextProperties.Color = SAObjectsUtilities.GetLabelForeGroundColor(item.ScoreStatus);
                        seriesItem.Label.TextBlock.Appearance.TextProperties.Font = new Font(new FontFamily("Arial"), 7);
                        seriesItem.Label.TextBlock.Appearance.TextProperties.Color = Color.Black;
                        chartSeriesItems.Add(seriesItem);

                        ChartSeriesItem seriesItem2 = new ChartSeriesItem()
                        {
                            Name = "2",
                            XValue = index++,
                            YValue = 0
                        };
                        totalYValue += 0;
                        seriesItem2.Label.Appearance.FillStyle.MainColor = SAObjectsUtilities.GetColorFromStatus(SA_Globals.Status.Red);
                        //seriesItem.Label.TextBlock.Appearance.TextProperties.Color = SAObjectsUtilities.GetLabelForeGroundColor(item.ScoreStatus);
                        seriesItem2.Label.TextBlock.Appearance.TextProperties.Font = new Font(new FontFamily("Tahoma"), 7);
                        seriesItem2.Label.TextBlock.Appearance.TextProperties.Color = Color.Black;
                        chartSeriesItems.Add(seriesItem2); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T15:14:43.200

如果有人遇到同样的问题：

我最终使用了一个调整后的值（所以如果值为 0，我使用 0.001）所以它实际上渲染了点（或 Bar 在我的情况下），然后使用我自己的字符串属性作为标签的值。

```
 private static decimal MIN_GRAPH_VALUE = new decimal(0.001);
    public decimal AjustedValue
    {
        get { return (_value.Equals(0)) ? MIN_GRAPH_VALUE : _value; }
    }
    public string StringValue
    {
        get { return _value.ToString("0.00%"); }
    } 
```

对于 BarSeries 绑定：

```
<telerik:BarSeries Name="My value" Stacked="false" DataFieldY="AjustedValue">
    <Appearance>
        <FillStyle BackgroundColor="#92b622"></FillStyle>
    </Appearance>
    <LabelsAppearance ClientTemplate='#=dataItem.StringValue#' Position="OutsideEnd">
    </LabelsAppearance>
</telerik:BarSeries> 
```

# sql - 类似于 NOT LIKE（从其他表中选择语句）

> ID：12695393
> 
> 赞同：0
> 
> 时间：2012-10-02T17:39:09.010
> 
> 标签：sql, database, sqlite

我有 3 张桌子

```
SUFFIX_LIST(Item VARCHAR),
PREFIX_LIST(Item VARCHAR), and
VALID_LIST(Part1 VARCHAR, Part2 VARCHAR) 
```

现在我需要列 VALID_LIST.Part1 和 VALID_LIST.Part2，因为 Part1 不与 SUFFIX_LIST 中的任何项目部分匹配，而 Part2 不与 PREFIX_LIST 中的任何项目部分匹配。

我正在使用 SQLite 作为我的本地数据库并使用 c# 进行应用程序开发！

提前致谢！

## 编辑澄清

有效名单

```
sample1, somedomain.com
samplebanword, someotherdomain.com
simplestring, someotherotherdomain.net
morestring, my-domain.com 
```

PREFIX_LIST

```
ban
text 
```

SUFFIX_LIST

```
.net
otherother 
```

现在，我想要的是，当我必须得到查询时

```
Output
--------
sample1, somedomain.com
morestring, my-domain.com 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T17:45:44.847

这是一个使用您提供的附加信息的解决方案：

```
SELECT * FROM VALID_LIST WHERE NOT EXISTS 
  (SELECT * FROM PREFIX_LIST WHERE VALID_LIST.Part1 LIKE '%' || Item || '%')
  AND NOT EXISTS
  (SELECT * FROM SUFFIX_LIST WHERE VALID_LIST.Part2 LIKE '%' || Item || '%') 
```

你可以在这里看到它的运行情况：[http ://sqlfiddle.com/#!7/1da46/3/0](http://sqlfiddle.com/#!7/1da46/3/0)

# android - 导出已签名的 Android 项目时，我收到 Dalvik 错误 1

> ID：12695396
> 
> 赞同：3
> 
> 时间：2012-10-02T17:39:33.583
> 
> 标签：android

我已经阅读了一些关于这个问题的类似问题，但与那些提出的解决方案不同，我很确定这与 Proguard 或重复的 jars 无关。

此错误仅在尝试导出为签名 APK 时发生。只是在设备上编译和运行不会导致任何问题。

我尝试了以下方法：

*   清理项目
*   重启 Eclipse
*   删除我的 bin 文件夹
*   删除和恢复所有库
*   从头开始创建一个新项目

问题并没有消失。就在几天前，我能够毫无问题地导出。我没有 Proguard 文件，并且 proguard 行在 project.properties 文件中被注释掉了。我也彻底检查过了，jar 文件不是重复的，它们也不包含重复的类（自上周成功导出以来，我没有添加任何新的库）。

有没有其他已知的方法来解决这个问题？我准备打埃里克施密特的嘴。

# opencv - 在 opencv 中使用自动对焦网络摄像头进行立体设置

> ID：12695402
> 
> 赞同：1
> 
> 时间：2012-10-02T17:40:16.760
> 
> 标签：opencv, computer-vision, camera-calibration

我确实有一个带有两个网络摄像头的立体声设置。问题是，如果这些相机拥有自动对焦技术，会不会有任何问题。如果是，请详细说明问题及其解决方案。

这对相机校准有影响吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T17:51:18.683

自动对焦会对校准产生影响，因为使用低质量镜头，焦点的变化也会改变焦距和光学中心。

您对此无能为力 - 但由于您只使用简单的网络摄像头，因此可能不需要担心它，因为无论如何您的准确性都会受到限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-22T14:18:53.370

是的，据我所知，自动对焦相机肯定会出现问题。

随着焦距的变化，相机参数也会发生变化。因此，具有自动对焦功能的相机总是存在问题。

当然，它会影响相机校准。

# c# - c#比较操作的奇怪结果

> ID：12695406
> 
> 赞同：2
> 
> 时间：2012-10-02T17:40:39.227
> 
> 标签：c#, asp.net

我的 c# 代码（后面的 asp.net 代码）有一个奇怪的行为。我在这里发布了监视窗口的屏幕截图：

![奇怪的空比较结果](../Images/23dbf4734f846b5e5f440fb92025d5b4.png)

我有一个为 null 的对象用户（如您所见），比较：user == null 返回 false。我不明白为什么！

有人可以解释为什么会发生这种情况吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-02T17:43:25.900

那么你可以很容易地编写你自己的类来给出这个结果：

```
public class Evil
{
    public static bool operator ==(Evil lhs, Evil rhs)
    {
        return false;
    }

    public static bool operator !=(Evil lhs, Evil rhs)
    {
        return false;
    }
} 
```

目前，我们只是在猜测……但这解释了症状。

（我刚刚尝试覆盖 ToString，但无法获得所需的输出。）

# java - Java 代码质量趋势和统计（LOC、方法等）趋势

> ID：12695408
> 
> 赞同：4
> 
> 时间：2012-10-02T17:41:04.317
> 
> 标签：java, sonarqube, cruisecontrol, emma

我最近将 Junit 和 Emma 集成到 CruiseControl (CC) 中，因此它可以为每个构建创建漂亮的报告。我希望根据 Emma 提供的一些信息（例如覆盖率百分比数字和摘要）查看一些趋势图：

```
OVERALL STATS SUMMARY  
total packages: 54  
total executable files: 1001  
total classes:  1133  
total methods:  11814  
total executable lines: 112428 
```

理想情况下，我们可以有一个页面，其中包含（谷歌图表？）每个构建都会更新的图表。我用谷歌搜索了一下，看起来有一个 jenkins 插件可以做到这一点，但我没有看到 CC 有任何类似的东西。我也计划让 Sonar 在 CC 中启动并运行，所以也许 Sonar 会这样做？

我当然可以编写自己的代码来创建趋势图（解析 emma 输出并创建图表页面似乎并不难），但我宁愿不重新发明轮子。

啊 - 刚刚发现这个“另一种方法是使用 Hudson 的 Sonar 插件来保持随时间推移的覆盖趋势”在[我的构建中是否可以规定我的代码覆盖率永远不会变得更糟？](https://stackoverflow.com/questions/389680/can-my-build-stipulate-that-my-code-coverage-never-get-worse) 我可以安装 Hudson 并使用它而不是 CC，但如果我不需要的话，我宁愿不用。

所以 - 我的问题 - 在我的 java 代码（希望在 CruiseControl 中）获得趋势覆盖/统计数据的最简单方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T06:46:41.997

使用 Sonar Hudson/Jenkins 插件绝对不是必须能够运行声纳分析。您可以从任何工具（命令行、CC 等 CI 工具等）调用 Sonar。

您只需要向 Sonar 提供一些信息，如果您使用 Maven，可能在 POM 中，如果您使用 Ant，可能在 build.xml 文件中，如果您计划在“sonar-project.properties”文件中使用简单的 Sonar Runner，或者如果您将使用 Jenkins/Hudson，则只需传递属性。

查看[我们](http://docs.codehaus.org/display/SONAR/Installing+Sonar)关于调用 Sonar 的不同方式的文档，以了解有关这一切的更多信息。

# xslt - 天线屋 xsl 错误

> ID：12695414
> 
> 赞同：0
> 
> 时间：2012-10-02T17:41:24.407
> 
> 标签：xslt, xsl-fo, antenna-house

我们正在使用 Antenna House xsl 格式化程序。xml 和 xsl 文件位于我们双方都可以访问的服务器上，具有相同的权限设置。我们通过远程桌面连接到服务器机器。我的同事一切正常。

我收到一个奇怪的错误：
错误是：

```
9185(2003) FO Transformation is failed
Keyword xsl:script may not be used in namespace http://www.w3.org/1999/XSL/Transform

Error occurred during compilation of included or imported stylesheet 
  'file:///C:/folder/subfilder/lib_someXSLIncludedInTheOneI_Use.xsl' 
```

同样，当我将远程桌面从我的用户连接到服务器机器时 - 我收到错误。我的同事去同一台服务器，所有的格式都很好。
帮助！！！请 ！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T18:14:39.263

您的 Antenna House XSL 格式化程序版本支持哪个版本的 XSLT？您的样式表声称是哪个版本的 XSLT（请参阅 version= 属性。）？

`xsl:script`是提议的 XSLT 1.1 草案的一部分，该草案从未通过 W3C 批准流程。Antenna House XSL 格式化程序似乎不支持它……或者可能不支持样式表使用的特定脚本语言（例如 javascript）。

这本身并不能解释您的同事认为没有问题的事实，但它可能会阐明答案。如果 XSL 样式表*不*应该与您正在使用的 XSL 处理器一起工作，那么怪异不在您身上，而是我会寻找证据证明您和您的同事可能无意中运行了不同的处理器或不同的样式表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T21:44:41.280

谢谢你。我找到了解决问题的方法。但是，我仍然不知道为什么它不在我的登录名下，而是在其他人的登录名下。
我所做的是，我发现格式设置-> XSLT 设置下有设置。我必须提供到 saxon.jar 和 XML Transformer.jar 的 expernal 路径

默认选项是使用 MSXML MSXML3，它对我不起作用。
当我提供这个

```
java -cp "C:/libs/saxon/saxon.jar;C:\libs\XMLTransformer.jar" com.icl.saxon.StyleSheet -o %3 %1 %2 
```

它开始工作

# javascript - 克隆和更改 onchange 参数在 IE 中不起作用

> ID：12695415
> 
> 赞同：1
> 
> 时间：2012-10-02T17:41:25.380
> 
> 标签：javascript, jquery, internet-explorer

我的表单上有一个表，其中包含一行或多行，每行包含一些`<select`> 和`<input>`字段，这些字段具有包含包含的 id 的 onchange 处理程序`tr`，如

```
<select id="System_row_0_environment" class="fixedwidth" 
  onchange="changeAccessSystem('System_row_0', 'environment')" name="System_environment"> 
```

我想克隆其中一行，并更新 id 和对 onchange 处理程序的调用。（idGlob 是一个带行数的全局变量）

```
function cloneLine(previd) {
  var id = '<% $prefix %>_row_' + idGlob;
  idGlob++;

  var $prevLine = jQuery('#' + previd);

  var prevId = $prevLine.attr('id');

  var regExp = new RegExp(prevId, 'g');

  var replaceIdFunction = function(row, attr) {
    if (attr) {
      return attr.replace(regExp, id);
    }
  };

  var $newLine = $prevLine.clone();
  $newLine.attr('id', id).find('*').each(function(index, element) {
     jQuery(element).attr(
     {
        'id': replaceIdFunction,
        'onchange' : replaceIdFunction,
        'for' : replaceIdFunction,
        'onclick' : replaceIdFunction
     })
  });

  // XXX This is a work-around for a bug in Firefox.  Clone is supposed to
  // copy the value, but it doesnt for select and textarea!
  // https://bugzilla.mozilla.org/show_bug.cgi?id=230307
  $prevLine.
    find('select,textarea').each(function(index, element) {
        var $element = jQuery(element);
        var name = $element.attr('name');
        $newLine.find('[name="' + name + '"]').val(
            $element.val());
    });

  $prevLine.after($newLine);
} 
```

这在所有常见的嫌疑人（Chrome，Firefox，Safari）中都很好用，但在 IE 上出于某种奇怪的原因，即使您使用 Firebug Lite 检查元素并且它显示克隆具有`onchange="changeAccessSystem('System_row_1', 'environment')`，当您更改它时，changeAccessSystem 函数被调用第一个参数是“System_row_0”。我是否打电话似乎并不重要`.clone`。`true``false`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T17:51:32.517

在我之前对 IE 有过这样的麻烦。我找到了 2 个解决方案。首先，从您选择的内联“onchange”事件中删除该函数。相反，使用 jQuery/JavaScript 添加事件。如：

```
$("select").change(function(e) { // do work .... 
```

其次，在较旧的 IE 中，change/onchange 事件无法正常触发。因此，您必须巧妙地处理“propertychange”事件。像这样：

```
$('select').bind($.browser.msie ? 'propertychange': 'change', function(e) { // do work 
```

当然，您可以在事件函数中调用您的函数，并根据调用绑定事件的元素根据需要设置参数。你也可以使用.each，如果你想要一个特定的计数或获取特定行号的父 tr 索引，等等....

希望这会有所帮助，如果需要更多示例，请在评论中点击此帖子

# excel - Excel 2010 的简单 HLOOKUP 失败

> ID：12695417
> 
> 赞同：3
> 
> 时间：2012-10-02T17:41:45.177
> 
> 标签：excel, excel-formula, excel-2010, worksheet-function, spreadsheetgear

我有一个 Excel 电子表格（由电子表格设备生成，但它更像是一个 Excel 问题）在使用[HLOOKUPS](http://office.microsoft.com/en-us/excel-help/hlookup-HP005209114.aspx)时无法正常运行。我使用一个简单的 HLOOKUP 在表格中查找给定百分比的值。对于两个特定值，HLOOKUP 失败。这些值为 0.9993 和 0.999。此 excel 文档演示了该问题： [http](http://dsokol.com/tokio/excelna.xlsx) ://dsokol.com/tokio/excelna.xlsx 。单元格 C6 和 C7 显示为 N/A，当它们打算用 B 和 C 填充时。如果我重新键入值，HLOOKUP 将再次开始工作。

谁能解释为什么会这样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T18:00:31.013

问题是这些数字被存储为字符串而不是整数。我想您需要在 SpreadSheet Gear 中明确声明列类型。

如果您将 xlsx 文件作为 zip 文件打开，并在覆盖值之前和之后`Sheet1.xml`从文件夹中提取，则任何差异工具（例如 winmerge 都会使这一点变得明显）。`xl\WorkSheets`

我已经在[这个 gist](https://gist.github.com/3821711)上发布了 XML 差异。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T20:45:51.643

我同意巴里的观点。这个问题与它们是数字还是字符串（它们都是数字）无关。这似乎是在二进制中存储浮点数的限制 - 如此处所述：http: [//support.microsoft.com/kb/214118](http://support.microsoft.com/kb/214118)

> Microsoft Excel 和 Microsoft Works 中浮点数的许多算术运算组合可能会产生看起来不正确的结果。例如，方程 =1*(.5-.4-.1) 可以计算为数量 (-2.78E-17)，或 -0.0000000000000000278 而不是 0。

这个问题也不是excel独有的，而是以下原因的结果：

> IEEE 754 规定数字以二进制格式存储，以减少存储需求，并允许所有微处理器上可用的内置二进制算术指令以相对快速的方式处理数据。但是，一些简单的、不重复的十进制数会被转换为重复的二进制数，无法完全准确地存储。

这种现象在“算术平等”中可见：

![有趣的问题](../Images/cd330d4798ebb2d845fbf2f809cf03a2.png)

同样，这不是 excel 独有的问题：

> 此行为不是 Excel 或 Works 中的问题或限制；出现此问题的原因是电气和电子工程师协会 (IEEE) 754 浮点标准要求数字以二进制格式存储。

祝你好运。

# javascript - 即使当前表单未完全提交，Window.location 也会将我带到新页面。

> ID：12695424
> 
> 赞同：1
> 
> 时间：2012-10-02T17:42:17.017
> 
> 标签：javascript

我正在尝试在提交当前表单后重定向到不同的页面，但事实证明，使用`window.location`am 非常快速地转移到新页面，并且似乎我当前的表单根本没有提交。

这是正在使用的功能。

```
function updateImportJobTypeSettings()
{
    var importJob = document.getElementById("jobtype").value;
    var parser = document.getElementById("selectparser");
    var parserValue = parser.options[parser.selectedIndex].value;
    document.importJobManagmentForm.action="/admin/ImportJobManagment.jsp";
    document.importJobManagmentForm.requestAction.value="updateImportJobSettings";
    document.importJobManagmentForm.ImportJobParser.value=parserValue;
    document.importJobManagmentForm.ImportJobManagmentType.value=importJob;
    document.importJobManagmentForm.DivHidden.value="visible";
    document.importJobManagmentForm.submit();
    window.location = "/admin/ImportJobManagmentList.jsp"
} 
```

我的目标是在 ImportManagment.jsp 页面提交后，我想回到 ImportJobManagmentList.jsp 页面查看所有提交到 ImportJobManagment.jsp 的数据

这里要注意的是，如果我打开调试器，那么我确实看到在 JobList 上创建了新作业，但是如果我去尝试更新它，则会再次创建新作业，而不是对以前的作业进行更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T17:45:37.480

你有一个竞争条件。您正在尝试执行两种不同的操作！表单提交尝试转到一个页面，而您正尝试重定向到另一个页面。

重定向应该从带有表单提交的服务器发生，而不是从客户端发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T17:46:17.293

当您提交带有操作 ( `document.importJobManagmentForm.action="/admin/ImportJobManagment.jsp";`) 的表单时，它将转到该页面......但是在您告诉脚本转到之后，`"/admin/ImportJobManagmentList.jsp"`我会在特定条件下将重定向权放在 ImportJobManagement.jsp 中。

# php - 防止html中的pre标签调试html代码

> ID：12695428
> 
> 赞同：-1
> 
> 时间：2012-10-02T17:42:26.857
> 
> 标签：php, javascript, html

我想知道有没有办法让标签避免调试它之间的html代码。因为我试图将 html 代码显示为网页上的代码，但它只是调试。但它不调试 php、javascript 或任何其他语言脚本只是 html，请帮助我，以便我可以在不调试的情况下正确显示 html 代码...我已经搜索了很多解决方案，但不幸的是一切都是徒劳的。 .

喜欢：-

`<div id="sayHello">` `<h1>Hellow World!</h1>` `</div>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T17:44:49.520

您可以使用[`htmlentities()`](http://us3.php.net/htmlentities)php 函数来执行此操作

用这个

```
 echo "<pre>";
                echo htmlentities("<h>this is h1 tag</h>");//h=h1
                echo"</pre>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T17:43:49.720

运行一串html代码通过`htmlspecialchars()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T17:44:54.747

您需要使用[htmlentities](http://us3.php.net/htmlentities)转义 HTML 实体。

# oracle - 如何使用 XA 连接通过 jboss 设置 oracle v$session.program 或 v$session.process

> ID：12695433
> 
> 赞同：1
> 
> 时间：2012-10-02T17:42:59.507
> 
> 标签：oracle, jdbc, jboss

我正在尝试将`v$session.program`or`v$session.process`连接属性设置`jboss`为一个值，以便区分不同的 jboss 实例。我们正在使用 xa 连接。 [该](http://community.jboss.org/wiki/HowToSpecifyOracleConnectionProgramProperty)站点显示了如何为本地 tx 数据源而不是 XA 执行此操作。我读过一些地方说 - 使用 XA 数据源您无法实现这一点。真的吗？我们确实需要能够查看哪个会话与哪个进程相关联。

[这个](https://community.jboss.org/thread/72628)人也有同样的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T10:24:42.310

我不知道 jboss，但也许 DBMS_APPLICATION_INFO 对你有帮助——见[http://docs.oracle.com/cd/B28359_01/appdev.111/b28419/d_appinf.htm#CHECEIEB](http://docs.oracle.com/cd/B28359_01/appdev.111/b28419/d_appinf.htm#CHECEIEB)

尤其是看看：

> DBMS_APPLICATION_INFO.SET_CLIENT_INFO (client_info IN VARCHAR2);
> 
> 参数 client_info
> 
> 提供有关客户端应用程序的任何附加信息。此信息存储在 V$SESSION 视图中。超过 64 字节的信息将被截断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-11T05:39:20.017

有一个[类似的问题](https://stackoverflow.com/a/8256692/131929)的答案建议设置此属性：

```
<xa-datasource-property name="connectionProperties">v$session.program=YourUniqueName</xa-datasource-property> 
```

# google-drive-api - Google 云端硬盘标题包含未按预期工作的查询

> ID：12695434
> 
> 赞同：6
> 
> 时间：2012-10-02T17:43:07.203
> 
> 标签：google-drive-api

使用 google drive api 中的搜索时，我注意到一些看起来有点奇怪的东西。例如，如果我有一个名为“purple-people-eater.jpg”的文件，并且我使用查询进行搜索，`title contains 'purple'`那么它将返回应有的文件。但是，如果我使用查询`title contains 'people'`进行搜索，则不会得到任何结果。如果我将文件重命名为“purple people eater.jpg”并运行上述任一查询，那么两者都将返回相同的文件。

以下是返回搜索结果的网址。

`https://www.googleapis.com/drive/v2/files?access_token=my_access_token&q=title%20contains%20%27purple%27`

`https://www.googleapis.com/drive/v2/files?access_token=my_access_token&q=title%20contains%20%27people%27`

我的问题是，这是预期的行为吗？如果是这样，有没有办法绕过它（除了手动进行所有搜索），如果没有，那么我的`q`参数有问题，还是其他原因？

# razor - 在 cshtml 文件中使用 TypeScript

> ID：12695451
> 
> 赞同：28
> 
> 时间：2012-10-02T17:44:23.300
> 
> 标签：razor, typescript

我想知道有没有办法在 Razor cshtml 文件上使用 TypeScript？

例如，像这样

```
<script language="text/typescript">
/// typescript goes here
</script> 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-04T04:39:20.713

这是可能的。我开发了[TypeScript Compile](https://github.com/niutech/typescript-compile) - 一种将 TypeScript 自动编译为 JavaScript 的即时编译器。试试！

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-10-02T17:46:47.683

TypeScript 不是运行时；它被交叉编译成 JavaScript。因此，您需要编写 TypeScript，对其进行编译，然后将其包含在 JavaScript 脚本标签中或作为外部文件。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-02T22:25:35.687

让我添加到 Rob 的回答中，在技术上可以将 typescript 编译器嵌入到页面下载中，并让浏览器编译用标签编写的`<script language="text/typescript">`代码。

然而，性能将是次优的，并且在服务器上进行预编译将是首选。从技术上讲，也没有什么可以阻止预处理器执行此操作（T4 可以执行此操作）。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-10-04T23:49:55.083

我刚刚检查了我最喜欢的 VS 扩展：[Web Essentials](http://visualstudiogallery.msdn.microsoft.com/07d54d12-7133-4e15-becb-6f451ea3bea6)

他们已经在保存时包含了 .ts 文件编译（建议也使用 Intellisense 的原始插件）。

不过，这显然只适用于 .ts 文件。在我看来，一旦你达到了选择 typescript 而不是 javascript 的复杂性，你应该在一个单独的文件中使用它，无论如何。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-07T22:38:55.660

您可以使用 tsc.exe 手动编译 TypeScript 文件，然后将生成的 Javascript 添加到您的项目或使用工具，例如保存时编译的[Web Essentials](http://visualstudiogallery.msdn.microsoft.com/07d54d12-7133-4e15-becb-6f451ea3bea6)。

由于编译器可以编译为 Javascript，因此您也可以让用户的浏览器即时编译（以性能和文件大小为代价，编译器相当大）。这种方法的一个例子是 niutech 的解决方案。

如果您使用捆绑和缩小，我刚刚发布了 IBundleTransform 的实现，它将 TypeScript 编译为 Javascript。它在[GitHub](https://github.com/wouterdevinck/TypeScript-BundleTransform/)和 NuGet (Install-Package TypeScriptBundleTransform) 上。如果您还没有使用 Bundling and Minification，那么值得一看！

# android - 如何使用图像按钮从 layout2 导航到 layout3

> ID：12695462
> 
> 赞同：1
> 
> 时间：2012-10-02T17:45:05.207
> 
> 标签：android, android-layout, imagebutton

我试图从 layout2（包含 8 个图像按钮）导航到 Layout2（这是一个 ImageView），但我仍然无法连接到所需的布局。我猜代码中有一些滞后，但无法获取缺失的条件。

我当前的布局是explored_homie.xml

Layout2 Java 代码：

```
setContentView(R.layout.explored_homie);
gallery1 = (ImageButton)findViewById(R.id.gallery1);

gallery1.setOnClickListener(new OnClickListener() {

    public void onClick(View v) {
        switch (v.getId()) {
          case R.id.gallery1:
               setContentView(R.layout.gallery_layout);
               break;
         case R.id.upcoming1:
             setContentView(R.layout.rough);
             break; 
```

这应该调用以下布局：gallery_layout.xml

Layout1 仅包含一个图像按钮，单击该按钮，将带我到explored_homie layout2，它再次包含 8 个图像按钮，我试图从上面的 layout2(explored_homie) 访问按钮库(id:galler1)，但我仍然无法导航到所需的页面，谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T18:24:11.950

在活动中多次调用 setcontentview 是一种不好的做法。简单的方法是将两种布局放在同一个 xml 中，其中一个处于可见性消失，并在需要时切换可见性。当然，这是一种丑陋的方式，更优雅的方式是使用某种视图切换器或 Fragments API（为每个布局创建两个片段并使用 FragmentManager 更改视图）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T18:38:24.603

您应该使用 LayoutInfalter 类而不是这样做。然后，如果您想删除视图，请在代码中使用 removeView() 方法。

# c++ - 在 C++ 中重新分配 3 维数组

> ID：12695467
> 
> 赞同：4
> 
> 时间：2012-10-02T17:45:13.003
> 
> 标签：c++, arrays, multidimensional-array, delete-operator

我在头文件中创建这样的数组：

```
double (*arrayName)[b][c]; 
```

并在 cpp 文件中像这样分配它：

```
arrayName= new double[a][b][c]; 
```

其中 a、b 和 c 是基于我正在处理的数据大小的常量。

如何解除分配这个数组？我尝试在[Deallocation of 3 dimensional array](https://stackoverflow.com/questions/7439939/deallocation-of-3-dimensional-array)中提出建议，但这给了我“警告 C4154：删除数组表达式；转换为提供的指针”并导致堆损坏错误。

我宁愿不要更改为向量，因为我正在使用正在重新利用但需要尽可能与原始代码保持相似的遗留代码。我已经不得不从使用静态分配更改为新建/删除，因为我们正在处理的数据规模正在溢出堆栈。

编辑：WhozCraig 的方法似乎是正确的。我认为我释放这个数组（以及其他类似的数组）的方式是我的问题，但我注意到我的代码中存在另一个问题。我想我已经解决了这个问题，我会在我的程序重新运行完成后报告（至少需要一两天）。感谢所有回复的人。

编辑 2：事情仍然没有 100% 工作，但这些问题超出了这个问题的范围，我能够调整一些值以使事情工作得足够好以完成工作。再次感谢所有回复的人。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-02T17:53:38.697

矢量删除应该为此工作。

```
static const int b = 10;
static const int c = 10;
double (*arrayName)[b][c] = NULL;
arrayName = new double[10][b][c];
delete [] arrayName; 
```

如果您必须像这样动态地立即分配它，并且想要证明析构函数被正确触发......

```
#include <iostream>
using namespace std;

class MyObj
{
public:
    MyObj() : val(1.0) {};
    ~MyObj() { cout << "~MyObj()" << endl;}

private:
    double val;
};

int main()
{
    static const int b = 3;
    static const int c = 3;
    MyObj (*arrayName)[b][c] = NULL;
    arrayName = new MyObj[3][b][c];
    delete [] arrayName;
    return 0;
} 
```

将导致以下输出（不要费心计算，其中有 27 个）

```
~MyObj()
~MyObj()
~MyObj()
~MyObj()
~MyObj()
~MyObj()
~MyObj()
~MyObj()
~MyObj()
~MyObj()
~MyObj()
~MyObj()
~MyObj()
~MyObj()
~MyObj()
~MyObj()
~MyObj()
~MyObj()
~MyObj()
~MyObj()
~MyObj()
~MyObj()
~MyObj()
~MyObj()
~MyObj()
~MyObj()
~MyObj() 
```

# java - 有没有办法在 JSP 加载时触发 Javascript 函数

> ID：12695470
> 
> 赞同：2
> 
> 时间：2012-10-02T17:45:31.653
> 
> 标签：java, javascript, jsp

我有一个 JSP 页面，它获取数据库结果并需要很长时间才能加载，有时有超过 500 个结果。我对此有几个问题：-

1.  有没有办法优化这个过程？我在我的 servlet 中使用 JDBC 来获取结果并将它们呈现给 JSP。

2.  我认为另一种方法是在 JSP 加载时显示“加载栏”PNG 图像，并在加载完成时将其隐藏，这样用户就不会在我的 UI 上发疯。那么如何在 JSP 初始化时实例化一个 Javascript 函数，然后在 JSP 加载完成时再次调用该函数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T17:49:03.673

JavaScript 运行在客户端，JSP 代码运行在服务器上。它们不会同时运行，所以 JavaScript 没有用。如果需要很长时间，您需要找出服务器上的问题并分析您的代码。

您可以尝试在没有记录的情况下最初加载页面。然后，您可以使用 Ajax 请求加载内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T18:10:46.603

使用响应刷新：（JSP）

```
response.setHeader("Transfer-Encoding", "chunked");
response.getWriter().write("<html><head><script>alert('this will take awhile');</script></head>");
response.getWriter().flush();
...
/* long running JSP jdbc query and output */ 
```

使用 AJAX 或更简单的 IFRAME：

```
<!-- home.jsp -->
<html><head></head>
<body>
    <div id="loading">Your content is loading</div>
    <iframe name="content" src="jdbcquery.jsp" onLoad="document.getElementById('loading').innerHTML=='Load Succeeded';">
    </iframe>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T19:46:47.093

1.  你可以考虑分页。或者在用户向下滚动时使用 Ajax 动态添加行。

2.  您可以使用以下伪代码在加载时显示动画。

伪代码：

```
<div id="loader">Loading / GIF animation</div>
<div id="result" style="display:none;">
  Lots of data.
  Should be flushed to the browser every now and then.
  This will take seconds...
</div>
<script type="text/javascript">
  $("#loader").hide();
  $("#result").show();
</script> 
```

# mongodb - 为远程 MongoVUE GUI 访问设置 CentOS 防火墙

> ID：12695471
> 
> 赞同：3
> 
> 时间：2012-10-02T17:45:33.723
> 
> 标签：mongodb, ssh, centos, mongovue

我正在尝试设置 MongoVUE 以连接到运行 MongoDB 的联网服务器。我可以通过 Putty 中的 SSH 或在 windows 命令行中使用 mongo ip:port 轻松连接到它。

但是，当通过 MongoVUE 的 SSH 隧道建立连接时，我收到错误消息：

```
Unable to connect to server 127.0.0.1:5252: No connection could be made because the target machine actively refused it 127.0.0.1:5252. 
```

所以我认为防火墙配置有问题。

但是，我的 /etc/sysconfig/iptables 包含以下行：

```
-A INPUT -m state --state NEW -m tcp -p tcp --dport 27017 -j ACCEPT 
```

还应该准备什么来让这种连接？

这是 MongoVue SSH 配置：

![在此处输入图像描述](../Images/60834a54f2753260e7a4e0409518213b.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T03:17:56.343

使用 MongoVUE 的内置 SSH 功能时，我得到了同样的错误。

我怀疑这是 MongoVUE 中的一个错误。我能够按照[http://www.mongovue.com/2011/08/04/mongovue-connection-to-remote-server-over-ssh/](http://www.mongovue.com/2011/08/04/mongovue-connection-to-remote-server-over-ssh/)上的说明使用 Putty 让 SSH 工作。

![在此处输入图像描述](../Images/3b21f22c022f7d03638c50b872b063c8.png)

![在此处输入图像描述](../Images/6d324e602326b203d0609376a69b2b38.png)

下面是 Putty Tunnel 配置：Putty 配置为侦听 5151，然后连接到远程系统 (MongoD) 上的 27017。

![在此处输入图像描述](../Images/3b5c9a3fc27691137ce9d77fdb64a816.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T23:21:36.630

我不得不使用一个小技巧来使内置的“SSH 隧道”工作。

事实证明，`localhost`Windows 7 中 a 的默认 IP 是 Ipv6 地址，因此您必须在*\System32\drivers\etc\hosts*文件中添加（或取消注释）以下行

```
127.0.0.1       localhost 
```

并按如下方式配置 Mongovue 连接（确保使用您的 IP）：

*   设置：![设置](../Images/3ce1f1e9a803e2d569bd1cd8997a9f7a.png)
*   SSH 隧道：![SSH 隧道](../Images/fa7af41f42a77cefb2cf84b6a889e4d1.png)

注意两个选项卡上的相同 IP

# environment-variables - 如何在 Expect 脚本中访问环境变量？

> ID：12695474
> 
> 赞同：45
> 
> 时间：2012-10-02T17:45:45.797
> 
> 标签：environment-variables, expect

我想访问期望脚本中的 PATH 环境变量。

我怎样才能做到这一点？

我的实际脚本是：

```
#!/usr/bin/expect
set timeout 300
send "echo $PATH\r" 
```

它的输出是：

```
can't read "PATH": no such variable
    while executing
"send "echo $PATH\r"" 
```

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-10-02T22:06:45.183

Expect 是[Tcl](http://www.tcl.tk)的扩展。Tcl 通过全局[`env`数组](http://tcl.tk/man/tcl8.5/TclCmd/tclvars.htm#M4)访问环境变量：

```
send_user "$env(PATH)\n" 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-01-22T14:02:41.300

您可以通过以下方式使用全局 env 数组：

```
$::env(PATH) 
```

这个概念也适用于程序内部。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-26T10:04:44.787

如果要读取目标 $PATH 变量，则必须转义 "$" ：

exp_sent -- echo "\$PATH\r"

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-01T11:22:39.940

两者都`$::env(PATH)`工作`$env(PATH)`得很好。前者在其他脚本中也可以（例如`expect -c "..."`，后者更像是“编程风格”。

# objective-c - 初始化和分配多个变量/对象 | 目标 C

> ID：12695477
> 
> 赞同：0
> 
> 时间：2012-10-02T17:45:57.533
> 
> 标签：objective-c, variables, initialization, alloc

我将如何转这个：

```
xmlObject *system_domain  = [xmlObject alloc] 
xmlObject *system_description = [xmlObject alloc]
xmlObject *system_type = [xmlObject alloc] 
```

变成我只需要编写一次 xmlObject 和 [xmlObject alloc] 的东西。

```
xmlObject *system_domain, *system_description, *system_type = [xmlObject alloc] 
```

这使它们都成为 xmlObjects，但不会分配每一个。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T18:45:50.367

如果你有一组相关的对象，并且能够迭代它们比能够简洁地访问它们更重要，你应该把它们放在一个集合中：

```
NSMutableDictionary *system_info = [NSMutableDictionary dictionary];
for (id key in @[@"domain", @"description", @"type"]) {
  system_info[key] = [xmlObject alloc];
} 
```

然后，而不是`system_dictionary`你使用`system_info[@"dictionary"]`. （如果这很重要，您甚至可以使用 KVC 使事情更简洁。）当然，如果这不适合您的用例，那么首先将它们放在字典中是很愚蠢的。

在任何其他用例中，您所做的是声明三个`xmlObject`s 的常规、惯用的 Objective C 方式。如果你真的想知道是否有办法绕过它，当然有，但大多数都很傻。

更好的解决方案可能是切换语言。Python、Ruby、Applescript、ObjC++、eero 等都让您可以像访问 ObjC 一样轻松访问 ObjC 运行时，并且拥有更简洁的惯用方式做事。例如，在 Python 中：

```
system_domain = xmlObject.alloc()
system_description = xmlObject.alloc()
system_type = xmlObject.alloc() 
```

甚至：

```
system_domain, system_description, system_type = [xmlObject.alloc() for _ in range(3)] 
```

如果你必须连续初始化 500 个这样的东西，另一个合理的选择是编写一些简单的代码来生成你的 ObjC 代码。

但如果你真的想留在 ObjC 中，这里有一些愚蠢的解决方案：

您可以`xmlObject`通过执行以下操作将出现次数从 6 次减少到 4 次：

```
xmlObject *system_domain = [xmlObject alloc],
     *system_description = [xmlObject alloc],
            *system_type = [xmlObject alloc]; 
```

或到 3：

```
id system_domain = [xmlObject alloc];
id system_description = [xmlObject alloc];
id system_type = [xmlObject alloc]; 
```

或为 1：

```
Class x = xmlObject;
id system_domain = [x alloc];
id system_description = [x alloc];
id system_type = [x alloc]; 
```

或者：

```
id makeXmlObject() { return [xmlObject alloc]; }
...

id system_domain = makeXmlObject();
id system_description = makeXmlObject();
id system_type = makeXmlObject(); 
```

一些旁注：

您可能不想使用`[xmlObject alloc]`. 这是一个足够的内存块来构造一个`xmlObject`, 连接到`xmlObject`类，但在其他方面完全未初始化。你必须调用一个初始化器——通常是`-[init]`，但通常是这样的`-[initWithValue: andOtherValue:]`——在你可以用它做任何有用的事情之前。

因此，大多数惯用的 ObjC 代码都会充满这样的调用：

```
Foo *foo = [[Foo alloc] init];
Bar *bar = [[Bar alloc] initWithFoo:foo]; 
```

此外，除非您使用 ARC（或 GC），否则您通常希望`autorelease`在对象初始化后立即使用它；否则，您必须手动管理内存（这很难做到正确，因为要快 10 倍）。所以，如果你不得不处理非 ARC 代码，你会看到：

```
Bar *bar = [[[Bar alloc] initWithFoo:foo] autorelease]; 
```

幸运的是，许多类都提供了类构造函数，它们可以合二为一：

```
NSString *s = [NSString stringWithUTF8String:c]; // ARC or no ARC 
```

当它们存在时，您应该使用这些便利方法，但要习惯`alloc] init];`（并且`alloc] init] autorelease];`，如果您必须处理 pre-ARC/pre-GC 代码）惯用语，因为您将需要它。

在所有其他具有 ObjC 运行时绑定的语言中也是如此；例如，在 Python 中，您`Bar.barWithFoo(foo)`尽可能地这样做，`Bar.alloc().initWithFoo_(foo)`否则。

同时，你不能这样的原因：

```
xmlObject *system_domain, *system_description, *system_type = [xmlObject alloc]; 
```

……或者……</p>

```
system_domain = system_description = system_type = [xmlObject alloc]; 
```

*……唯一合理的*解释是将所有三个对象设置为`xmlObject`. 如果您只调用`alloc`一次，则只会分配一件事。

最后，使用小写首字母命名 ObjC 类被认为是不好的风格。它应该是`XMLObject`（或者也许`XmlObject`，但 Apple 喜欢明确缩写词和首字母缩写词），而不是`xmlObject`. 而且，除了非常简单的项目，大多数人喜欢给他们的所有类一个 2 或 3 个字母的前缀（如 Apple 的 NS），以便区分来自不同子项目、第三方库等的类。 ，所以“ALIXMLObject”可能会更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T17:49:02.083

您必须执行以下操作：

```
xmlObject *system_domain = [xmlObject alloc],
     *system_description = [xmlObject alloc],
            *system_type = [xmlObject alloc]; 
```

这几乎不比你的第一个版本好。

# python - App Engine、PIL 和覆盖文本

> ID：12695480
> 
> 赞同：3
> 
> 时间：2012-10-02T17:46:13.930
> 
> 标签：python, image, google-app-engine, python-imaging-library

我正在尝试在 GAE 上的图像上覆盖一些文本。现在他们公开了 PIL 库，这应该不是问题。

这就是我所拥有的。它有效，但我不禁认为我应该直接写入背景图像，而不是创建单独的叠加图像然后合并。

我可以使用[Image.frombuffer](http://www.pythonware.com/library/pil/handbook/image.htm)什么的吗，我已经尝试过了，但我就是不明白...

```
from PIL import Image, ImageDraw, ImageFont
from google.appengine.api import images
from google.appengine.ext import blobstore
from google.appengine.api import files

def compose(key):

    # create new image
    text_img = Image.new('RGBA', (800,600), (0, 0, 0, 0))
    draw = ImageDraw.Draw(text_img)
    draw.text((0, 0), 'HELLO TEXT', font=ImageFont.load_default())

    # no write access on GAE
    output = StringIO.StringIO()
    text_img.save(output, format="png")
    text_layer = output.getvalue()
    output.close()

    # read background image
    blob_reader = blobstore.BlobReader(key)
    background = images.Image(blob_reader.read())

    # merge
    merged = images.composite([(background, 0, 0, 1.0, images.TOP_LEFT), 
                               (text_layer, 0, 0, 1.0, images.TOP_LEFT)], 
                               800, 600)

    # save
    file_name = files.blobstore.create(mime_type='image/png')
    with files.open(file_name, 'a') as f:
        f.write(merged)
    files.finalize(file_name) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T18:08:49.133

您应该改用该`[Image.open][1]`方法。`Image.frombuffer`并`Image.fromstring`解码像素数据而不是原始图像。

在你的情况下，你可以使用类似的东西：

```
blob_reader = blobstore.BlobReader(key)
text_img = Image.open(blob_reader)
......... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T23:01:00.717

您需要使用 PIL 打开图像，而不是应用引擎图像类型（另一个答案被一个字符关闭：`Image`，而不是`Images`）：

```
blob_reader = blobstore.BlobReader(key)
text_img = Image.open(blob_reader) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T20:36:45.857

直接在背景图像上绘制将是最直接的：

```
draw = ImageDraw.Draw(background)
draw.text((0, 0), 'HELLO TEXT', font=ImageFont.load_default()) 
```

# css - 下拉菜单宽度问题

> ID：12695484
> 
> 赞同：1
> 
> 时间：2012-10-02T17:46:24.890
> 
> 标签：css, menu

尽管付出了很多努力，但我无法使下拉菜单的宽度与父级相同。请帮帮我。[在这里提琴](http://jsfiddle.net/XLxJk/)

```
#menu, #menu ul {
    margin: 0;
    padding: 0;
    list-style: none;
}
#menu {
    width: 958px;
    /*margin: 60px auto;*/
    border: 1px solid #222;
    background-color: #111;
    background-image: linear-gradient(#444, #111);

    box-shadow: 0 1px 1px #777;
}
#menu:before,
#menu:after {
    content: "";
    display: table;
}

#menu:after {
    clear: both;
}

#menu {
    zoom:1;
}
#menu li {
    float: left;
    border-right: 1px solid #222;
    box-shadow: 1px 0 0 #444;
    position: relative;
}

#menu a {
    float: left;
    padding: 11px 40px;
    color: #999;
    text-transform: uppercase;

    text-decoration: none;
    text-shadow: 0 1px 0 #000;
}

#menu li:hover > a {
    color: #fafafa;
}

*html #menu li a:hover { /* IE6 only */
    color: #fafafa;
}
#menu ul {
    margin: 20px 0 0 0;
    _margin: 0; /*IE6 only*/
    opacity: 0;
    visibility: hidden;
    position: absolute;
    top: 38px;
    left: 0;
    z-index: 1000000;    
    background: #444;    
    background: linear-gradient(#444, #111);
    box-shadow: 0 -1px 0 rgba(255,255,255,.3);    

    transition: all .2s ease-in-out;  
}

#menu li:hover > ul {
    opacity: 1;
    visibility: visible;
    margin: 0;
}

#menu ul ul {
    top: 0;
    left: 150px;
    margin: 0 0 0 20px;

    _margin: 0; /*IE6 only*/
    box-shadow: -1px 0 0 rgba(255,255,255,.3);        
}

#menu ul li {
    float: none;
    display: block;
    border: 0;
    _line-height: 0; /*IE6 only*/
    box-shadow: 0 1px 0 #111, 0 2px 0 #666;
}

#menu ul li:last-child {   
    box-shadow: none;    
}

#menu ul a {    
    padding: 10px;
    width: 130px;
    _height: 10px; /*IE6 only*/
    display: block;
    white-space: nowrap;
    float: none;
    text-transform: none;
}

#menu ul a:hover {
    background-color: #000000;
}
#menu ul li:first-child > a {
    /*border-radius: 3px 3px 0 0;*/
    padding: 11px 13px;
}

#menu ul li:first-child > a:after {
    content: '';
    position: absolute;
    left: 40px;
    top: -6px;
}

#menu ul ul li:first-child a:after {
    left: -6px;
    top: 50%;
    margin-top: -6px;
    border-left: 0;    

}

#menu ul li:first-child a:hover:after {
    border-bottom-color: #000; 
}

#menu ul ul li:first-child a:hover:after {
    border-right-color: #000; 
    border-bottom-color: transparent;     
}

#menu ul li:last-child > a {
    /*border-radius: 0 0 3px 3px*/;
    padding: 11px 20px;

}
​

HTML:

<ul id="menu">

                                                          <li><a href="#">About </a></li>

                                                          <li><a href="#">Programmes</a>
                                                          <ul>
                                                                <li><a href="#">Undergraduate</a></li>
                                                                <li><a href="#">Postgraduate</a></li>
                                                                </ul>
                                                          </li>
                                                          <li><a href="#">Academics</a></li>
                                                          <li><a href="#">Research</a></li>
                                                          <li><a href="#">Facilities</a></li>
                                                          <li></li>             
                                        </ul>  

    ​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T18:09:02.647

在下拉菜单中的 ul 元素中添加“right: 0”（或在您的情况下为 -1px 以考虑边框）：

```
#menu ul {
margin: 20px 0 0 0;
_margin: 0; /*IE6 only*/
opacity: 0;
visibility: hidden;
position: absolute;
top: 38px;
left: 0;
right: -1px /*  <-- add this */
z-index: 1000000;    
background: #444;    
background: linear-gradient(#444, #111);
box-shadow: 0 -1px 0 rgba(255,255,255,.3);    

transition: all .2s ease-in-out;
} 
```

然后删除 a 元素中的 width 属性：

```
#menu ul a {    
padding: 10px;
_height: 10px; /*IE6 only*/
display: block;
white-space: nowrap;
float: none;
text-transform: none;
} 
```

这将独立于菜单容器宽度工作。

工作小提琴[http://jsfiddle.net/chopsticks/XLxJk/4/](http://jsfiddle.net/chopsticks/XLxJk/4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T17:54:13.343

```
#menu ul a {    
 padding: 10px;
 width: 150px;
 _height: 10px; /*IE6 only*/
 display: block;
 white-space: nowrap;
 float: none;
 text-transform: none;
}
#menu ul li:first-child > a {
 padding: 11px 20px;
} 
```

[演示](http://jsfiddle.net/afshinprofe/XLxJk/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T17:55:16.947

因此，通过绝对定位您的下拉菜单，您可以将其从流程中移除。这会导致它不再按其父元素的宽度调整大小。您需要显式设置宽度，通过 js 显式设置宽度（如果您希望菜单项根据它们包含的文本调整大小）或弄清楚如何以不同的方式定位它以便继承宽度。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T18:01:36.527

这个怎么样 ？

只需在#menu ul 中将宽度设置为 100%，您就有一个相同大小的下拉菜单。

[http://jsfiddle.net/XLxJk/3/](http://jsfiddle.net/XLxJk/3/)

# ruby - 格式化来自 RubyDatamapper 的输出，类似于 SQL

> ID：12695493
> 
> 赞同：2
> 
> 时间：2012-10-02T17:47:17.727
> 
> 标签：ruby, datamapper, irb

在 psql 中运行一条`select`语句会返回在表格中格式良好的输出：

```
mydb=# SELECT * FROM users WHERE login = 'foo';
  id  | login | first_name | last_name 
------+-------+------------+------------
 1000 | foo   | Dude       | HowdyHeyYo 
```

但是，我经常在 IRB 中运行我的数据库查询，并使用 datamapper 连接到 Postgres。当使用 Ruby 和 Datamapper 运行这样的查询时，获得类似于上表格式的输出的最佳方法是什么？

```
>> User.all(:login => 'foo') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T18:47:09.740

psql 正在将输出格式化为 ASCII 表布局。psql 在这一点上等同于 IRB，因此您要么必须编写一个调用方法来包装查询并输出格式化结果，要么使用一些 IRB 插件。

看看[IRBTools](https://github.com/janlelis/irbtools)，尤其是[hirb](https://github.com/cldwalker/hirb)。

# udp - 未收到来自外部客户端的 UDP 数据报包

> ID：12695497
> 
> 赞同：0
> 
> 时间：2012-10-02T17:47:38.937
> 
> 标签：udp, datagram

我有一个带有 UDP/TCP 服务器和客户端的游戏。一个 UDP 端口 (2406) 用于更新客户端的位置，一个 TCP 端口 (2407) 用于聊天。这里的问题是 2406。

当我在本地网络中播放客户端时，一切正常。但是当外部客户想要加入时，我只收到第一个包（加入命令），然后......什么也没有。我（在本地网络上登录）看不到外部播放器。但他们可以看到我。聊天对双方都有效。所以它确实与DatagramSocket有关。我将尝试发布尽可能多的与 UDP 而不是 TCP 相关的信息。

任何人都知道这里的问题是什么？

*端口的转发方式类似于 UDP 2406、TCP 2407。*

服务器，套接字：

```
DatagramSocket socket = new DatagramSocket(2406, InetAddress.getLocalHost());
ServerSocket serversocket_chat = new ServerSocket(2407, 0, InetAddress.getLocalHost()); 
```

服务器，接收线程：

```
byte[] buffer = new byte[1024];
DatagramPacket dp = new DatagramPacket(buffer, 1024);

while(true){
    try{
        this.socket.receive(dp);

        String data = new String(dp.getData(), 0, dp.getLength()).trim();
        String[] args = data.split(":");
        String command = args[0];

        String reply = null;
        try{
            reply = handleCommand(dp, command, args);
        } catch( Exception e ){
            System.err.println("Error while handling command: " + command);
            e.printStackTrace();
        }

        if(reply != null){
            reply += "\n";
            DatagramPacket reply_packet = new DatagramPacket(reply.getBytes(), reply.length(), dp.getSocketAddress());

            this.socket.send(reply_packet);
        }

    } catch (IOException e){
        e.printStackTrace();
    }
}

new Thread(chat_receive).start(); 
```

一旦有人发送消息，handleCommand 方法就会找出它是什么。每条消息都是从 String 派生的 byte[]。如果消息是“cj:Hello”，handleCommand 会找到命令 cs，用户名 Hello。THIS 由服务器接收。之后，如果同一个人发送了一些东西，则将不会收到任何东西。

客户端套接字：

```
private DatagramSocket socket;
private Socket socket_chat; 
```

客户端连接：

```
this.socket = new DatagramSocket();
this.socket_chat = new Socket(ip, port+1); 
```

客户端发送：

```
private Runnable send = new Runnable() {
    @Override
    public void run() {
        DatagramPacket dp;
        String sendStringBuffered;
        while(true){
            if(sendString != null){
                sendStringBuffered = sendString;
                dp = new DatagramPacket(sendStringBuffered.getBytes(), sendStringBuffered.length(), ip, port);
                try {
                    socket.send(dp);
                } catch (IOException ex) {
                    Logger.getLogger(NewClient.class.getName()).log(Level.SEVERE, null, ex);
                }
                 sendString = null;
            }
        }
    }
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T17:58:09.350

想到两点：

*   UDP 不可靠。数据报随时可能丢失
*   UDP 数据包通常不会像那样穿越 NAT

为了系统故障排除，使用数据包嗅探器/分析器（如 tcpdump 或 wireshark）确保数据包真正到达目的地

# ruby-on-rails - rails3条件缓存怎么做

> ID：12695499
> 
> 赞同：0
> 
> 时间：2012-10-02T17:47:43.233
> 
> 标签：ruby-on-rails, ruby-on-rails-3, caching, conditional-statements

我有一个带有 Article 模型的 Rails3 应用程序。

管理员登录后，只需转到 article/show 方法即可查看“未授权”的文章：

```
if !@article.is_authorized and !user_signed_in?
  raise ActionController::RoutingError.new('Not Found')
end 
```

我想从授权的那一刻起缓存文章。在管理员审查它们时，如何防止它们被缓存？

如何在操作中放置如下代码？

```
if @article.is_authorized
  cache_action
  or cache_fragment
  or whatever 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T18:22:06.490

[如文档中所述](http://guides.rubyonrails.org/caching_with_rails.html#action-caching)，您可以传递一个 Proc：

```
caches_action :foo, if: lambda { your_condition_here } 
```

# c# - 获取 C# 字符串中第一个非空白字符的索引

> ID：12695501
> 
> 赞同：24
> 
> 时间：2012-10-02T17:47:47.570
> 
> 标签：c#

有没有办法在不编写我自己的循环代码的情况下在 C# 中获取字符串中第一个非空白字符的索引（或更一般地说，第一个匹配条件的字符的索引）？

**编辑**

通过“编写我自己的循环代码”，我真正的意思是我正在寻找一个紧凑的表达式来解决问题，而不会使我正在处理的逻辑混乱。

对于在这一点上的任何混淆，我深表歉意。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-10-02T17:57:16.773

A`string`当然是 an`IEnumerable<char>`所以你可以使用 Linq：

```
int offset = someString.TakeWhile(c => char.IsWhiteSpace(c)).Count(); 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-10-02T17:56:15.937

我喜欢定义自己的扩展方法来返回满足序列中自定义谓词的第一个元素的索引。

```
/// <summary>
/// Returns the index of the first element in the sequence 
/// that satisfies a condition.
/// </summary>
/// <typeparam name="TSource">
/// The type of the elements of <paramref name="source"/>.
/// </typeparam>
/// <param name="source">
/// An <see cref="IEnumerable{T}"/> that contains
/// the elements to apply the predicate to.
/// </param>
/// <param name="predicate">
/// A function to test each element for a condition.
/// </param>
/// <returns>
/// The zero-based index position of the first element of <paramref name="source"/>
/// for which <paramref name="predicate"/> returns <see langword="true"/>;
/// or -1 if <paramref name="source"/> is empty
/// or no element satisfies the condition.
/// </returns>
public static int IndexOf<TSource>(this IEnumerable<TSource> source, 
    Func<TSource, bool> predicate)
{
    int i = 0;

    foreach (TSource element in source)
    {
        if (predicate(element))
            return i;

        i++;
    }

    return -1;
} 
```

然后，您可以使用 LINQ 来解决您原来的问题：

```
string str = "   Hello World";
int i = str.IndexOf<char>(c => !char.IsWhiteSpace(c)); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-02T18:08:43.443

```
string s= "   \t  Test";
Array.FindIndex(s.ToCharArray(), x => !char.IsWhiteSpace(x)); 
```

返回 6

要添加条件，只需...

```
Array.FindIndex(s.ToCharArray(), x => !char.IsWhiteSpace(x) && your condition); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-02T17:51:52.520

您可以使用[String.IndexOfAny](http://msdn.microsoft.com/en-us/library/56y4ddbk.aspx)函数，该函数返回指定 Unicode 字符数组中第一次出现的任何字符。

或者，您可以使用[String.TrimStart](http://msdn.microsoft.com/en-us/library/system.string.trimstart.aspx)函数从字符串的开头删除所有空白字符。第一个非空白字符的索引是原始字符串的长度与修剪后的长度之间的差异。

你甚至可以选择一组字符来修剪:)

基本上，如果您正在寻找一组有限的字符（比如说数字），您应该使用第一种方法。

如果您试图忽略一组有限的字符（如空格），您应该使用第二种方法。

最后一种方法是使用[Linq](http://msdn.microsoft.com/en-us/library/bb397933.aspx)方法：

```
string s = "        qsdmlkqmlsdkm";
Console.WriteLine(s.TrimStart());
Console.WriteLine(s.Length - s.TrimStart().Length);
Console.WriteLine(s.FirstOrDefault(c => !Char.IsWhiteSpace(c)));
Console.WriteLine(s.IndexOf(s.FirstOrDefault(c => !Char.IsWhiteSpace(c)))); 
```

输出：

```
qsdmlkqmlsdkm
8
q
8 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-02T17:53:13.097

```
var match = Regex.Match(" \t test  ", @"\S"); // \S means all characters that are not whitespace
if (match.Success)
{
    int index = match.Index;
    //do something with index
}
else
{
    //there were no non-whitespace characters, handle appropriately
} 
```

如果您经常这样做，出于性能原因，您应该缓存`Regex`为此模式编译的内容，例如：

```
static readonly Regex nonWhitespace = new Regex(@"\S"); 
```

然后像这样使用它：

```
nonWhitespace.Match(" \t test  "); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-10-02T20:08:54.553

由于这里有几种解决方案，我决定进行一些性能测试，看看每个解决方案的表现如何。决定将这些结果分享给有兴趣的人...

```
 int iterations = 1000000;
    int result = 0;
    string s= "   \t  Test";

    System.Diagnostics.Stopwatch watch = new Stopwatch();

    // Convert to char array and use FindIndex
    watch.Start();
    for (int i = 0; i < iterations; i++)
        result = Array.FindIndex(s.ToCharArray(), x => !char.IsWhiteSpace(x)); 
    watch.Stop();
    Console.WriteLine("Convert to char array and use FindIndex: " + watch.ElapsedMilliseconds);

    // Trim spaces and get index of first character
    watch.Restart();
    for (int i = 0; i < iterations; i++)
        result = s.IndexOf(s.TrimStart().Substring(0,1));
    watch.Stop();
    Console.WriteLine("Trim spaces and get index of first character: " + watch.ElapsedMilliseconds);

    // Use extension method
    watch.Restart();
    for (int i = 0; i < iterations; i++)
        result = s.IndexOf<char>(c => !char.IsWhiteSpace(c));
    watch.Stop();
    Console.WriteLine("Use extension method: " + watch.ElapsedMilliseconds);

    // Loop
    watch.Restart();
    for (int i = 0; i < iterations; i++)
    {   
        result = 0;
        foreach (char c in s)
        {
            if (!char.IsWhiteSpace(c))
                break;
            result++;
        }
    }
    watch.Stop();
    Console.WriteLine("Loop: " + watch.ElapsedMilliseconds); 
```

结果以毫秒为单位......

*其中 s = " \t Test"*
转换为 char 数组并使用 FindIndex：`154`
修剪空格并获取第一个字符的索引：`189`
使用扩展方法：`234`
循环：`146`

*其中 s = "Test"*
转换为 char 数组并使用 FindIndex：`39`
修剪空格并获取第一个字符的索引：`155`
使用扩展方法：`57`
循环：`15`

*其中 s = (1000 个无空格的字符串)*
转换为 char 数组并使用 FindIndex：`506`
修剪空格并获取第一个字符的索引：`534`
使用扩展方法：`51`
循环：`15`

*其中 s = (1000 以“\t Test”开头的字符串)*
转换为 char 数组并使用 FindIndex：`609`
修剪空格并获取第一个字符的索引：`1103`
使用扩展方法：`226`
循环：`146`

> 得出你自己的结论，但我的结论是使用你最喜欢的那个，因为性能差异在现实世界的场景中是微不足道的。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-04-12T11:42:06.073

这里有很多将字符串转换为数组的解决方案。这不是必需的，字符串中的单个字符可以像数组中的项一样被访问。

这是我应该非常有效的解决方案：

```
private static int FirstNonMatch(string s, Func<char, bool> predicate, int startPosition = 0)
{
    for (var i = startPosition; i < s.Length; i++)
        if (!predicate(s[i])) return i;

    return -1;
}

private static int LastNonMatch(string s, Func<char, bool> predicate, int startPosition)
{
    for (var i = startPosition; i >= 0; i--)
        if (!predicate(s[i])) return i;

    return -1;
} 
```

要使用这些，请执行以下操作：

```
var x = FirstNonMatch(" asdf ", char.IsWhiteSpace);
var y = LastNonMatch(" asdf ", char.IsWhiteSpace, " asdf ".Length); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-10-02T17:52:49.990

您可以修剪、获取第一个字符并使用 IndexOf。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-02-19T10:12:41.387

**有一个非常简单的解决方案**

```
string test = "    hello world";
int pos = test.ToList<char>().FindIndex(x => char.IsWhiteSpace(x) == false); 
```

pos 将是 4

您可以有更复杂的条件，例如：

```
pos = test.ToList<char>().FindIndex((x) =>
                {
                    if (x == 's') //Your complex conditions go here
                        return true;
                    else 
                        return false;
                }
            ); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-10-02T18:00:14.577

是的，你可以试试这个：

```
string stg = "   xyz";
int indx = (stg.Length - stg.Trim().Length); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-10-02T18:05:40.723

有些东西会在某处循环。为了完全控制什么是空白和什么不是空白，您可以使用 linq to objects 来执行循环：

```
int index = Array.FindIndex(
               s.ToCharArray(), 
               x => !(new [] { '\t', '\r', '\n', ' '}.Any(c => c == x))); 
```

# c# - FileInfo.Extension 是否返回最后一个 *.* 模式或其他内容？

> ID：12695502
> 
> 赞同：29
> 
> 时间：2012-10-02T17:47:55.407
> 
> 标签：c#, string, file-extension, fileinfo

我很好奇以下行为到底是什么：

```
FileInfo info = new FileInfo("C:/testfile.txt.gz");
string ext = info.Extension; 
```

这会返回“.txt.gz”还是“.gz”？

更多扩展名的行为是什么，例如“.txt.gz.zip”或类似的东西？

编辑：

需要明确的是，我已经对此进行了测试。我想要一个关于财产的解释。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-10-02T17:53:52.580

它将返回 .gz，但来自 MSDN（[FileSystemInfo.Extension Property](http://msdn.microsoft.com/en-us/library/system.io.filesysteminfo.extension.aspx)）的解释不清楚为什么：

" *Extension 属性返回 FileSystemInfo 扩展名，包括句点 (.)。例如，对于文件 c:\NewFile.txt，此属性返回 ".txt"。* "

`Extension`所以我用反射器查找了属性的代码：

```
public string Extension
{
    get
    {
        int length = this.FullPath.Length;
        int startIndex = length;
        while (--startIndex >= 0)
        {
            char ch = this.FullPath[startIndex];
            if (ch == '.')
            {
                return this.FullPath.Substring(startIndex, length - startIndex);
            }
            if (((ch == Path.DirectorySeparatorChar) || (ch == Path.AltDirectorySeparatorChar)) || (ch == Path.VolumeSeparatorChar))
            {
                break;
            }
        }
        return string.Empty;
    }
} 
```

它检查文件路径末尾的每个字符，直到找到一个点，然后从点返回一个子字符串到文件路径的末尾。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-02T17:59:28.710

```
[TestCase(@"C:/testfile.txt.gz", ".gz")]
[TestCase(@"C:/testfile.txt.gz.zip", ".zip")]
[TestCase(@"C:/testfile.txt.gz.SO.jpg", ".jpg")]
public void TestName(string fileName, string expected)
{
    FileInfo info = new FileInfo(fileName);
    string actual = info.Extension;
    Assert.AreEqual(actual, expected);
} 
```

全部通过

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-02T17:57:29.243

它从最后一个点返回扩展名，因为它无法猜测文件名的另一部分是否是扩展名的一部分。在这种情况下`testfile.txt.gz`，您可以争辩说扩展名是`.txt.gz`，但是呢`System.Data.dll`？扩展名应该是`.Data.dll`？可能不会……没有办法猜测，所以该`Extension`属性不会尝试。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-02T18:10:24.087

文件扩展名从最后一个点开始。不幸的是，[FileSystemInfo.Extension](http://msdn.microsoft.com/en-us/library/system.io.filesysteminfo.extension.aspx)的文档没有回答这个问题，但它在逻辑上必须返回与[Path.GetExtension](http://msdn.microsoft.com/en-us/library/system.io.path.getextension.aspx)相同的值，文档指出：

> **评论**
> 
> path 的扩展是通过在 path 中搜索句点 (.) 获得的，从 path 中的最后一个字符开始，一直到 path 的开头。如果在 DirectorySeparatorChar 或 AltDirectorySeparatorChar 字符之前找到句点，则返回的字符串包含句点及其后面的字符；否则，返回 Empty。
> 
> 有关常见 I/O 任务的列表，请参阅常见 I/O 任务。

一般来说，有一个关于文件名的权威答案会很好，但我很难找到它。

# android - 没有 EditText 的 Android 键盘 InputType

> ID：12695503
> 
> 赞同：7
> 
> 时间：2012-10-02T17:47:58.153
> 
> 标签：android, android-softkeyboard

对于具有自定义设计的 android 应用程序，我手动打开键盘，因为它没有可关注的输入。

我使用以下方法打开它：

```
InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE); 
imm.toggleSoftInput (InputMethodManager.SHOW_FORCED, InputMethodManager.HIDE_IMPLICIT_ONLY); 
```

我想将键盘设置为 InputType.TYPE_CLASS_NUMBER 但找不到任何有关如何执行此操作的文档。

提前致谢 ！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T15:41:29.853

此问题的解决方案是将所有编辑文本设置在 LinearLayout 中，并将该 LinearLayout 上的可见性设置为“Gone”，而不是 EditText(s)。

这样，您仍然可以通过单击任何其他元素以编程方式专注于 EditText。

# javascript - 在javascript中使用按位或转换为整数

> ID：12695504
> 
> 赞同：1
> 
> 时间：2012-10-02T17:48:03.690
> 
> 标签：javascript, string, integer, bit-manipulation, ecmascript-5

我们可以做以下转换：

```
var a = "129.13"|0,  // becomes 129

var b = 11.12|0; // becomes 11

var c = "112"|0; // becomes 112 
```

这似乎可行，但不确定这是否是标准的 JS 功能。有谁知道这是否可以安全地用于将字符串和小数转换为整数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T17:51:09.040

是的，这是标准行为。位运算符仅对整数进行操作，因此它们将给出的任何数字转换为有符号的 32 位整数。

这意味着最大范围是有符号 32 位整数减 1，即`2147483647`.

```
(Math.pow(2, 32) / 2 - 1)|0; // 2147483647

(Math.pow(2, 32) / 2)|0; // -2147483648 (wrong result) 
```

# jquery - jQuery 生成器？

> ID：12695506
> 
> 赞同：-2
> 
> 时间：2012-10-02T17:48:15.073
> 
> 标签：jquery, builder

如果您看一下： [http](http://api.jquery.com/jQuery.ajax/) ://api.jquery.com/jQuery.ajax/作为示例，有很多选项可以设置并且几乎总是我得到一个 { 或 a ) 搞砸了。是否有某种 jquery builder 可用？换句话说，您可能有一个函数的下拉菜单，而在该下拉菜单的下方，每个参数都有一个下拉菜单以及每个参数的选择？

谢谢，吉姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T17:52:21.517

如果您使用的是 Visual Studio，您可以启用 jQuery Intellisense，看看这篇[文章](http://www.stefanprodan.eu/2011/05/improve-visual-studio-2010-jscript-editor-with-jquery-intellisense-and-code-outlining/)。

# objective-c - 用新数据更新 UITableView

> ID：12695508
> 
> 赞同：0
> 
> 时间：2012-10-02T17:48:17.357
> 
> 标签：objective-c, ios, uitableview, xcode4.2

我有一个带有数据的表格视图。

我正在从服务器获取数据，那么如何重新加载包含单元格数量、数据等的表格视图？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T17:50:35.040

一旦你得到你的数据，你应该打电话

```
[tableView reloadData] 
```

# c# - OpenXML SDK 保存缺少文件的 .xlsx

> ID：12695511
> 
> 赞同：2
> 
> 时间：2012-10-02T17:48:24.503
> 
> 标签：c#, openxml, openxml-sdk

我正在使用 OpenXML SDK 创建一个电子表格。电子表格有几个工作表、样式等。

*   当我在 Excel 中打开文件时，它呈现良好，没有错误，并正确显示所有单元格格式和数据。
*   当我在移动设备上打开文件时，根据应用程序的不同，我收到指示文件已损坏或完全丢失的错误。

我在 Excel 中打开了 .xlsx 文件并将其保存到另一个文件中；然后我对相应 zip 文件中的目录结构进行了比较。我注意到：

*   新副本（通过 Excel 的副本）现在可以在所有经过测试的移动应用程序上正确呈现。
*   只有新副本包括：
*   *   /doc道具
*   *   /xl/主题
*   *   docProps/app.xml
*   *   docProps.core.xml
*   *   docProps/theme1.xml
*   只有旧副本包括：
*   *   /xl/工作表/_rels/
*   *   表#.xml.rels
*   修改后的文件：
*   *   工作表#.xml
*   *   共享字符串.xml
*   *   样式.xml
*   *   工作簿.xml
*   *   [内容类型].xml

在保存之前我需要对这个文件做些什么来解决这些冲突？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:34:09.537

问题似乎是关系 URI。有关类似问题，请参阅此问题：

[在 .NET 中创建的 OpenXML 电子表格无法在 iPad 中打开](https://stackoverflow.com/questions/10929054/openxml-spreadsheet-created-in-net-wont-open-in-ipad)

最大的问题是工作表 XML 文件必须是“sheet1.xml”而不是“/xl/sheet1.xml”，就像其他相关的 XML 文件一样。

# c++ - 对应于 AS3 Number (Integral) 的 C++ 数据类型是什么

> ID：12695514
> 
> 赞同：3
> 
> 时间：2012-10-02T17:48:35.813
> 
> 标签：c++, actionscript-3

那么我正在查看的数据类型是什么。我知道 AS3 Number 是 64 位的，但它是双精度的。我正在将代码转换为 C++，因为在 AS3 中这样做是有效的：

```
var i:Number = 123;
i >> 3; // Yeah shift right a double precision datatype 
```

因此，在 C++ 中，我现在需要一个数据类型，该数据类型位于 AS3 中 Number 类型的整数范围内（即双精度）。请注意，我正在转换和编码/解码以前与 AS3 代码一起使用的函数，因此我必须得到相同的结果。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T18:17:08.417

AS3 移位运算符将要移位的表达式和移位量转换为 32 位整数。在 C++ 中，您可以通过将 double 数据类型转换为 int 并移位来模拟此行为：

```
#include <iostream>

int main(int argc, char **argv) {
    double i(91.5);
    int v(static_cast<int>(i) >> 3);
    std::cout << "v = " << v << std::endl; // outputs "v = 11"
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T18:16:29.850

基本上，在 AS3 中 Number 是一个双精度数，所以在 C++ 中它将是`double`类型。但是，AS3 中的位移是通过隐式转换完成的。您应该检查结果实际上是 int 还是 double，如果是 int，则执行

```
i=floor(i/8.0); 
```

如果双倍，你放弃 floor() 电话。

简而言之，您必须显式重写在整数而不是双精度上完成的操作。`(int)i`但是，当一个操作需要一个 int 并且 i 是 double 时，你可以这样做。

# javascript - 平滑 jQuery 密码确认验证

> ID：12695515
> 
> 赞同：2
> 
> 时间：2012-10-02T17:48:37.710
> 
> 标签：javascript, jquery, html, validation, client-side

我对 jQuery 相当陌生，并且编写了以下代码来向用户显示他/她输入的密码/确认是否有效。我觉得代码是重复的和肮脏的，只有当用户不删除他们输入的部分内容时它才能正常工作。然后事情变得有点古怪。

这是 js 小提琴：http: [//jsfiddle.net/JCTAc/](http://jsfiddle.net/JCTAc/)

这是 JS *（忽略复选框的东西）：

```
$(function() {
  $('.checkbox').hide();
  $("#password").blur(function(){

var passwordVal = $("#password").val();
var checkVal = $("#password_confirmation").val();

  if ( passwordVal.length >=6 ) {
       $("#password").css("border","1px solid #9EAD3A"); 
      }
  else {
       $("#password").css("border","1px solid #E93E3C");
      $('.checkbox').hide();
  }
});

$("#password_confirmation").keyup(function() {

var passwordVal = $("#password").val();
var checkVal = $("#password_confirmation").val();

    if (passwordVal == checkVal) {
        if (checkVal.length > 5 ) {
        $("#password_confirmation").css("border","1px solid #9EAD3A");
        $(".checkbox").show(100);
    }
}
    else {
        $("#password_confirmation").css("border","1px solid #E93E3C");
        $('.checkbox').hide();
    }
});

$("#password,#password_confirmation").blur(function(){

var passwordVal = $("#password").val();
var checkVal = $("#password_confirmation").val();

    if (passwordVal != checkVal) {
        $('.checkbox').hide();
        $("#password_confirmation").css("border","1px solid #E93E3C");

    }
  });
}); 
```

​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T18:02:54.030

你为什么不为此使用[Jquery Validation](http://docs.jquery.com/Plugins/Validation)。可能有帮助。

谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T18:29:48.253

首先，你不应该在 jQuery/javascript 中设置边框颜色。尽可能将样式和浏览器行为分开是很重要的。更好的方法是设置一个类（例如 .error、.validated）并从 css 控制样式。您还经常在代码中重复自己。相同的功能写了 3 次。将功能分解为功能的真正标志。

一个提示是如果输入未验证，则禁用提交功能，然后在验证时允许它。

我稍微修改了一下。验证模糊和键控。我相信这段代码也可以进行更多优化，但可能会略有改进：http: [//jsfiddle.net/JCTAc/5/](http://jsfiddle.net/JCTAc/5/)

# android - Android：滚动视图显示 nre 记录膨胀/添加后的最新记录

> ID：12695518
> 
> 赞同：1
> 
> 时间：2012-10-02T17:48:52.957
> 
> 标签：android, layout, scrollview

我正在开发一个应用程序，当用户添加记录时，记录会膨胀到 ScrollView 的底部。我想问一下如何设置视图，以便一旦用户单击添加按钮，滚动视图将自动“滑动”并显示底部添加的最新记录？非常感谢！！

是否要添加到 layout.xml 文件中？xml编码如下：

```
<TableRow android:id="@+id/tableRow3" 
      android:layout_height="match_parent" 
      android:layout_width="match_parent"
      android:layout_weight="1"
      android:background="@color/light_yellow">
      <ScrollView android:id="@+id/SlotScrollView" 
         android:layout_width="match_parent"  
         android:layout_span="8"         
         android:padding="0dp">
            <TableLayout android:id="@+id/SlotTableLayout" 
               android:layout_width="match_parent" 
               android:layout_height="match_parent" 
               android:padding="0dp" 
               android:stretchColumns="*"></TableLayout>
      </ScrollView>
   </TableRow> 
```

# asp.net-mvc - VS 2012 中缺少“浏览方式...”按钮

> ID：12695527
> 
> 赞同：4
> 
> 时间：2012-10-02T17:49:52.287
> 
> 标签：asp.net-mvc, c#-4.0, visual-studio-2012

我根据此处的说明将我的 MVC 3 项目升级到 MVC 4： [http ://www.asp.net/whitepapers/mvc4-release-notes#_Toc303253806](http://www.asp.net/whitepapers/mvc4-release-notes#_Toc303253806)

一切正常，除了我没有新的 Browse with.. 按钮出现在工具栏中，我也无法在项目的上下文菜单中激活此选项。

我应该注意到该按钮在新的 MVC4 项目中正确显示（即那些从头开始创建而不是升级的项目）。

我怎样才能解决这个问题？

**更新：** 请参阅下面我的答案中的解决方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T22:12:54.123

右键单击顶部菜单并添加“标准”工具栏。

如果它仍然不存在，您可以右键单击 -> 自定义，选择“命令”选项卡。选择工具栏：标准，然后点击“全部重置”（这只会重置“标准”工具栏）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T18:08:33.370

尝试将“.aspx”网络表单文件添加到您的项目中。在解决方案资源管理器中右键单击该文件时，您应该在上下文菜单中获得“使用...浏览”选项。您应该能够以这种方式更改浏览器。然后，您可以在选择浏览器后删除“.aspx”文件。我过去不得不这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T18:27:23.387

我能够通过创建一个新的 .sln 并将我的项目添加到其中来修复它。

# debugging - CUDA 在 Nsight 调试中无法查看共享内存值

> ID：12695533
> 
> 赞同：5
> 
> 时间：2012-10-02T17:50:10.647
> 
> 标签：debugging, cuda, shared-memory, nsight

我一直在努力解决一个我似乎无法找到解决方案的问题。问题是当我尝试在 Visual Studio 2008 下使用 Nvidia Nsight 调试我的 CUDA 代码时，我在使用共享内存时得到了奇怪的结果。

我的代码是：

```
template<typename T>
__device__
T integrate()
{
   extern __shared__ T s_test[]; // Dynamically allocated shared memory
   /**** Breakpoint (1) here ****/
   int index = threadIdx.x + threadIdx.y * blockDim.x; // Local index in block. Column major ordering
   if(index < 64 && blockIdx.x==0) { // Only work on a few values. Just testing
      s_test[index] = (T)index;
      /* Some other irelevant code here */
   }
   return v;
} 
```

当我到达断点 1 并检查 Visual Studio Watch 窗口中的共享内存时，只有数组的前 8 个值发生变化，其他值保持为空。我希望所有前 64 人都这样做。 ![Visual Studio 中的观察窗口](../Images/fafc4582e0a01e8e29a5a09e351d793f.png)

我认为这可能与所有未同时执行的经线有关。所以我尝试同步它们。我在里面添加了这段代码`integrate()`

```
template<typename T>
__device__
T integrate()
{
   /* Old code is still here */

   __syncthreads();
   /**** Breakpoint (2) here ****/
   if(index < 64 && blockIdx.x==0) {
      T tmp = s_test[index]; // Write to tmp variable so I can inspect it inside Nsight Watch window
      v = tmp + index; // Use `tmp` and `index` somehow so that the compiler doesn't optimize it out of existence
   }
return v;
} 
```

但问题仍然存在。此外， tmp 中的其余值`0`与监视窗口窗体 VS 所指示的不同。 ![Nsight 的观察窗口](../Images/cf25b2cbdc19bcc6db88d445abec93bd.png)

我必须提到，它需要很多步骤才能跨越`__syncthreads()`，所以当我到达它时，我只是跳转到断点 2。到底发生了什么！？

* * *

**编辑**有关系统/启动配置的信息

**系统**

*   名称 Intel(R) Core(TM)2 Duo CPU E7300 @ 2.66GHz
*   架构 x86
*   频率 2.666 MHz
*   核心数 2
*   页面大小 4.096
*   总物理内存 3.582,00 MB
*   可用物理内存 1.983,00 MB
*   版本名称 Windows 7 Ultimate
*   版本号 6.1.7600

**设备**GeForce 9500 GT

*   驱动程序版本 301.42
*   驱动器型号 WDDM
*   CUDA 设备索引 0
*   GPU 系列 G96
*   计算能力 1.1
*   SM 数量 4
*   帧缓冲区物理大小 (MB) 512
*   帧缓冲带宽 (GB/s) 16
*   帧缓冲总线宽度（位） 128
*   帧缓冲区位置专用
*   图形时钟 (Mhz) 812
*   内存时钟 (Mhz) 500
*   处理器时钟 (Mhz) 1625
*   内存类型 DDR2

**IDE**

*   微软 Visual Studio 团队系统 2008
*   NVIDIA Nsight Visual Studio 版本，版本 2.2 内部版本号 2.2.0.12255

**编译器**命令

1> "C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v4.2\bin\nvcc.exe" -G -gencode=arch=compute_10,code=\"sm_10,compute_10\" --machine 32 -ccbin "C:\Program Files\Microsoft Visual Studio 9.0\VC\bin" -D_NEXUS_DEBUG -g -D_DEBUG -Xcompiler "/EHsc /W3 /nologo /Od /Zi /RTC1 /MDd "-I"inc" -I"C: \Program Files\NVIDIA GPU Computing Toolkit\CUDA\v4.2\include" -maxrregcount=0 --compile -o "Debug/process_f2f.cu.obj" process_f2f.cu

**启动配置**。共享内存大小似乎并不重要。我试过几个版本。我合作最多的一个是：

*   共享内存 2048 字节
*   网格/块大小：{101、101、1}、{16、16、1}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-17T17:03:40.000

您是否尝试在分配值后放置**__syncthreads()**？

```
template<typename T>
__device__
T integrate()
{
   extern __shared__ T s_test[]; // Dynamically allocated shared memory
   int index = threadIdx.x + threadIdx.y * blockDim.x; // Local index in block. Column major ordering
   if(index < 64 && blockIdx.x==0) { // Only work on a few values. Just testing
      s_test[index] = (T)index;
      /* Some other irelevant code here */
   }
   __syncthreads();
   /**** Breakpoint (1) here ****/
   return v;
} 
```

并尝试查看此断点处的值。

# java - Android Dialer & Phonebook 拦截意图

> ID：12695536
> 
> 赞同：3
> 
> 时间：2012-10-02T17:50:19.243
> 
> 标签：java, android

我有两个简单的问题：

*   是否可以在 Android Dialer 应用程序中拦截 ACTION_CALL Intent 并向用户提供要使用另一个应用程序拨打的号码（即当用户单击“拨号”按钮时）。我知道拨号器是每个 ROM 上的自定义应用程序，所以我想这是不可能的？
*   当用户从电话簿/联系人中选择一个联系人并按下特定号码（可能预定义了一些前缀或后缀）时，应用程序是否可以识别并使用第三方应用程序而不是默认拨号器完成拨号？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T18:01:11.020

是的，可以拦截意图并让您的应用程序显示在提示用户使用默认拨号程序或您自己的拨号程序继续呼叫的对话框中。这可能会有所帮助：

[Android 拨号器应用程序](https://stackoverflow.com/questions/5029183/android-dialer-application)

# javascript - 在 div 的排序列表中插入新项目

> ID：12695538
> 
> 赞同：2
> 
> 时间：2012-10-02T17:50:27.870
> 
> 标签：javascript, alphabetical

```
<list>
    <div>abacus</div>
    <div>abstract paint</div>
    <div>australian coco</div>
     .........
     .........
     .........
    <div>mango</div>
    <div>parrot</div>
    <div>salt</div>
    <div>upi</div>
</list> 
```

“list”标签位于`body`HTML 文档的内部……“list”标签包含超过 5000 个 div……因为它是一个非常大的数字，我展示了其中的一部分……

我需要`<div>apache</div>`根据这些 div 按字母顺序在这些 div 中插入一个新的 div（like ） `innerHTML`（`innerHTML`只包含字母和数字，没有符号）......但问题是如果我使用`insertBefore()`方法，我会在末尾得到 div清单...我该怎么做...？？

请不要使用任何 jQuery ......只有 Javascript ......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T18:06:49.147

```
 var list         = document.getElementsByTagName('list')[ 0 ],
     DOMitems     = list.getElementsByTagName('div'),
     items        = Array.prototype.slice.call( DOMitems );

function addItem( text ) {
    var position          = 0,
        newElem           = document.createElement('div');
        newElem.innerHTML = text;

    items.push( newElem );
    items.sort(function( a, b ) {
        return a.innerHTML.localeCompare( b.innerHTML );
    });

    position = items.indexOf( newElem );
    list.insertBefore( newElem, DOMitems[ position ] );
}

addItem('apache'); 
```

[小提琴](http://jsfiddle.net/9UNB3/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T18:08:23.513

您使用的是 div 而不是 ul/li 似乎很奇怪。这是您可以做的一种方法。

```
var words = document.getElementById("wordsList")
var indexes = null;
function InsertItem​(word) {
    if (!indexes) {
        getItems();
    }        
    indexes.push(word);
    console.log(indexes);
    indexes.sort();
    var position = indexes.indexOf(word);
    var list = words.getElementsByTagName("div");    
    var newDiv = document.createElement("div");
    newDiv.innerHTML = word;
    words.insertBefore(newDiv, list[position]);
}
function getItems(){
    var elems = words.getElementsByTagName("div");
    indexes = [];
    for (var i=0;i<elems.length;i++) {
        indexes.push(elems[i].innerHTML);
    }
}

InsertItem("apple");
InsertItem("aaaaa");
InsertItem("zzzzz");
​ 
```

[JSFiddle](http://jsfiddle.net/VV2mL/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T18:53:56.093

正如您在要插入什么 div-nr 之前似乎知道的那样，您可以使用： insertBefore(node,yourlist.childNodes[(nr-1)*2])

```
<!DOCTYPE html>
<meta charset=UTF-8>
<title>Insert</title>

<list id=alist>
<div>abacus</div>
<div>abstract paint</div>
<div>australian coco</div>
<div>mango</div>
<div>parrot</div>
<div>salt</div>
<div>upi</div>
</list>

<script>
var nr = 3,//insert before the third div
alist = document.getElementById('alist'),
node = document.createElement('div');
node.innerHTML = 'apache';

alist.insertBefore(node,alist.childNodes[(nr-1)*2]);
</script> 
```

# sitefinity-4 - 在 sitefinity 中创建标题字符串

> ID：12695545
> 
> 赞同：0
> 
> 时间：2012-10-02T17:50:46.693
> 
> 标签：sitefinity-4

我正在尝试在*sitefinity*创建一个独特的标题，当前的标题是这样的：“鸡肉三明治”。这是创建标题的代码：

```
Page.Title  = (this._Product.PageTitle != "" ) ? this._Product.PageTitle : this._Product.Name; 
```

我想标题是这样的“鸡肉三明治的营养信息”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T18:55:55.643

在 Sitefinity 4/5 中，您有 2 个不同的标题。第一个是页面的“名称”，第二个是搜索引擎的标题。该名称在 Sitefinity 的整个后端都可见，并用于导航小部件。[在此处](https://dl.dropbox.com/u/19007909/sitefinity-pages.PNG)查看屏幕截图

您可以通过以下语句检索两者：

```
string shorttitle = new PageManager().GetPageNode(new Guid(SiteMapBase.GetCurrentProvider().CurrentNode.Key)).Title; 
```

和

```
string longtitle = new PageManager().GetPageNode(new Guid(SiteMapBase.GetCurrentProvider().CurrentNode.Key)).Page.HtmlTitle; 
```

希望能帮助到你！

约赫姆

# ruby-on-rails - 控制器中的 Rails has_one 关系安全资源.build_resource

> ID：12695547
> 
> 赞同：0
> 
> 时间：2012-10-02T17:50:50.740
> 
> 标签：ruby-on-rails, has-one

我有一个页面，当用户创建帐户以创建他们的第一个资源时，他们会通过一个简短的注册教程。在我的应用程序中，:hotel 属于 :user，并且 :user has_one 酒店。对于教程页面，在我的控制器中，我有：

```
 @hotel = current_user.build_hotel 
```

哪个有效，除了用户以某种方式在教程页面上找到他，该命令取消了他们先前创建的酒店的关联。换句话说，用户第二次访问该页面时：

```
 @hotel = current_user.build_hotel 
```

他们第一次创建的酒店中的 user_id 字段变为 nil。显然这是一个严重的问题。我可以在那个页面上做一个 before_filter，但我不太高兴有一种方法让用户只需访问一个页面就可以搞砸一切。我应该如何正确使用构建命令来建立 has_one 关系？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T18:14:00.247

您可以在建造酒店之前测试酒店的存在：

```
 @hotel = current_user.hotel || current_user.build_hotel 
```

# asp.net - Bigrock服务器上的Mysql连接字符串

> ID：12695552
> 
> 赞同：0
> 
> 时间：2012-10-02T17:51:01.380
> 
> 标签：asp.net, mysql, hosting

我正在尝试将 mysql（由域提供商提供）与服务器上的 asp.net 4.0 应用程序连接起来。我的连接字符串是

```
server=71.83.24.256;uid=arrest;pwd=password;database=admin_db1; 
```

但我收到以下错误...

建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：命名管道提供者，错误：40 - 无法打开与 SQL Server 的连接）

我该如何解决这个问题...任何想法？？？？？？

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
        DataSourceID="SqlDataSource1">
    <Columns>
        <asp:BoundField DataField="username" HeaderText="username" 
            SortExpression="username" />
        <asp:BoundField DataField="password" HeaderText="password" 
            SortExpression="password" />
    </Columns>
</asp:GridView>
    <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
        ConnectionString="<%$ ConnectionStrings:ConnectionString %>"></asp:SqlDataSource> 
```

这是我的 .cs 代码

```
SqlDataSource1.SelectCommand = "Select * from [Login]";
GridView1.DataBind(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T17:52:34.780

听起来您使用了错误的提供程序类型，因为这是 SQL Server 提供程序错误消息。您需要更改提供程序以匹配您需要用于 MySQL 的提供程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-08T15:28:35.397

SqlDataSource 应该通过指定“ProviderName”来使用 MySql 连接器：

1.  下载并安装 .Net 连接器：http: [//dev.mysql.com/downloads/connector/net/](http://dev.mysql.com/downloads/connector/net/)

2.  连接字符串：

`<connectionStrings> <add name="AaaConnectionString" connectionString="database=dbname;server=LOCALHOST;User Id=dba;password=*****"/> </connectionStrings>`

3.  在 .aspx 中：

    `<asp:SqlDataSource ID="SqlTableProcess" runat="server" ConnectionString="<%$ ConnectionStrings:AaaConnectionString%>" ProviderName="MySql.Data.MySqlClient" SelectCommand="SELECT * FROM Process ORDER BY DateIssued DESC"> </asp:SqlDataSource>`

# android - Android AlertDialog BUTTON_POSITIVE / BUTTON_NEGATIVE 顺序

> ID：12695556
> 
> 赞同：3
> 
> 时间：2012-10-02T17:51:22.627
> 
> 标签：android, android-alertdialog

我知道在 ICS 之前，AlertDialog 中的标准订单是“Ok”/“Cancel”，并且在 ICS 中发生了变化（标准订单变成了“Cancel”/“Ok”）

但是，即使我使用

```
alert.setButton(AlertDialog.BUTTON_POSITIVE, "Ok", ...)
alert.setButton(AlertDialog.BUTTON_NEGATIVE, "Cancel", ...) 
```

我在 pre-ICS 和 ICS 中运行应用程序得到了相同的结果：正面选项出现在左侧，负面选项出现在右侧。

这不应该是自动的吗，因为我们使用系统常量来定义正面 (AlertDialog.BUTTON_POSITIVE) 和负面 (AlertDialog.BUTTON_NEGATIVE) 的位置？

**编辑：** 接受解决方案后，我想指出我现在正在使用以下代码在 ICS 和 pre-ICS 中以正确的顺序设置按钮：

```
if (Build.VERSION.SDK_INT < Build.VERSION_CODES.ICE_CREAM_SANDWICH) { // pre-ICS, show Positive/Negative
    alertDialog.setButton(labelPositive, positiveListener);
    alertDialog.setButton2(labelNegative, negativeListener);    
} else { // ICS+, show Negative/Positive
    alertDialog.setButton(labelNegative, negativeListener);
    alertDialog.setButton2(labelPositive, positiveListener);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T19:03:00.320

我不确定您期望得到什么答案...常数值是相同的，Android 只是换了措辞。

您可能知道它`BUTTON_POSITIVE`没有与“肯定”行动相关联的授权。因此`BUTTON_POSITIVE`，“取消”代码与“确定”代码一样容易，实际上它们只是常量（正数：-1，中性：-2，负数：-3）。

`<-`想象一下带有分别标记为和的正（左）和负（右）按钮的 pre-ICS 对话框`->`。观察如果 ICS*确实*自动切换现有常量的值会发生什么：

```
 Pre-ICS Dialog          |        Post-ICS Dialog
--------------------------------|-------------------------------
      | <- |       | -> |       |      | -> |       | <- |
 ie.   "Ok"       "Cancel"      |     "Cancel"       "Ok" 
```

按钮不再有意义...

简而言之，ICS 会通过*自动重新排序*按钮在一代中破坏现有代码。因此，如果在ICS 之前和之后的设备中默认标签的顺序不一致*的*想法**真的**让您感到困扰，那么请考虑使用它们的常量值 ( `-1`, `-2`, `-3`) 而不是它们的别名。

# android - 在 Twitter 上发布视频内容和缩略图

> ID：12695559
> 
> 赞同：3
> 
> 时间：2012-10-02T17:51:32.610
> 
> 标签：android

我已成功将 Twitter 集成到我的应用程序中。但我无法在我的推特帐户墙上发布内容。我尝试了很多示例和教程。请帮我解决这个问题。提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T20:02:26.703

好的，我使用 Twitter4j 库，您可以从[http://twitter4j.org](http://twitter4j.org)下载它并添加到项目中的 libs 文件夹中。

对于回调 url，你必须在你的 AndroidManifest 中设置它，如下所示：

```
 <activity
            android:name=".MyActivity"
            >
            <intent-filter>
                <action android:name="android.intent.action.VIEW" />
                <category android:name="android.intent.category.DEFAULT" />
                <category android:name="android.intent.category.BROWSABLE" />

                <data android:scheme="callback-url" />
            </intent-filter>
        </activity> 
```

在您取回访问令牌后，我会执行以下操作来推文文件：

```
public void tweet(File f, String Message)
            throws TwitterException {

            StatusUpdate status = new StatusUpdate(Message);
            status.setMedia(f);
            // twitter is an object of Twitter for which you have set the authentication token
            twitter.updateStatus(status);
    } 
```

这适用于图像，但我没有尝试过视频，但在我看来它会起作用，但你必须尝试一下。我希望这有帮助。

# asp.net-mvc - 日期范围验证使控件变成日期时间输入类型，只需要文本类型

> ID：12695561
> 
> 赞同：0
> 
> 时间：2012-10-02T17:51:47.633
> 
> 标签：asp.net-mvc, validation, razor, controls

我有一个 Razor 网页，其中有一个模型

```
public class UploadModel
{
    [Required]
    [StringLength(25)]
    public string PatientID { get; set; }
    [DataType(DataType.Date)]
    [DateRange("1000/12/01", "4010/12/16")]
    public DateTime DrawDate { get; set; }
}
public class DateRangeAttribute : ValidationAttribute
{
    private const string DateFormat = "yyyy/MM/dd";
    private const string DefaultErrorMessage =
    "'{0}' must be a date between {1:d} and {2:d}.";

    public DateTime MinDate { get; set; }
    public DateTime MaxDate { get; set; }

    public DateRangeAttribute(string minDate, string maxDate)
        : base(DefaultErrorMessage)
    {
        MinDate = ParseDate(minDate);
        MaxDate = ParseDate(maxDate);
    }

    public override bool IsValid(object value)
    {
        if (value == null || !(value is DateTime))
        {
            return true;
        }
        DateTime dateValue = (DateTime)value;
        return MinDate <= dateValue && dateValue <= MaxDate;
    }
    public override string FormatErrorMessage(string name)
    {
        return String.Format(CultureInfo.CurrentCulture,
        ErrorMessageString,
        name, MinDate, MaxDate);
    }

    private static DateTime ParseDate(string dateValue)
    {
        return DateTime.ParseExact(dateValue, DateFormat,
        CultureInfo.InvariantCulture);
    }
} 
```

对日期时间进行验证

但是在视图中，当我遍历模型中的所有元素时

```
@Html.EditorFor(m => m) 
```

它正在创建一个日期时间类型，这会产生问题，因为我使用 jquery 来进行日历日期选择，因为它是跨浏览器。即使使用验证类，有什么方法可以强制日期时间成为文本？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T18:42:39.370

我相信您只需要从 DrawDate 属性中删除 DataType 属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T19:23:53.727

既然您正在编写自定义验证，为什么不更改

```
public DateTime DrawDate { get; set; } 
```

到字符串类型并相应地调整您的验证？

# visual-studio - VS2012 - VS2013 - VS2015 - VS2017 - VS2019 的水晶报表

> ID：12695563
> 
> 赞同：62
> 
> 时间：2012-10-02T17:51:56.060
> 
> 标签：visual-studio, crystal-reports

我在新的 PC 上安装了 VS2012 Ultimate。我尝试在我的项目中添加 Crystal Reports 文件，但在 VS2012 的 Add New Item 菜单中没有可用的 Crystal Report .crt Item

有VS2012的版本吗？或者我是否必须为水晶报告安装一个额外的设置文件，这是多余的，因为我已经安装了 VS2012。

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2013-01-17T17:22:51.723

## 这里是！- SP 25 适用于 Visual Studio 2019，SP 21 适用于 Visual Studio 2017

SAP 发布**SAP Crystal Reports，Microsoft Visual Studio 开发者版**

## [您可以在此处获取](http://www.crystalreports.com/crvs/confirm/)（单击“Visual Studio IDE 的安装包”）

> 要集成“SAP Crystal Reports，Microsoft Visual Studio 开发人员版”，您必须**运行 Install Executable**。运行 MSI 不会将 Crystal Reports 完全集成到 VS 中。根据定义，MSI 文件仅用于运行时分发。

## 

> SP25 版本中的新功能
> 
> Visual Studio 2019，已解决的事件，Win10 1809，安全更新

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-02T18:00:29.710

[这篇文章来自 SAP 于 2012 年 9 月 20 日](http://scn.sap.com/community/crystal-reports-for-visual-studio/blog/2012/09/20/sap-crystal-reports-developer-version-for-microsoft-visual-studio--2012-support-update)。

简而言之，他们仍在开发支持 VS2012 的 Crystal Reports 版本（包括对 Windows 8 的支持）。它将以更新当前支持 VS2010 的版本的服务包版本的形式出现。那时，他们将从名称中删除 2010/2012，并简单地将其称为 Crystal Reports Developer。

如果你想下载那个版本，你可以在[这里](http://www.businessobjects.com/jump/xi/crvs2010/us2_default.asp)找到。

此外，可以在[此处](http://scn.sap.com/docs/DOC-7824)找到发布时的服务包等。

* * *

我还要补充一点，我目前正在使用 Visual Studio 2012。只要您不编辑现有报告，它们就可以继续编译并正常工作。即使在 Windows 8 上。当我需要修改报表时，我仍然可以使用 VS2010 打开项目，做我的工作，保存我的更改，然后切换回 2012。这有点痛苦，但是 VS2010 和 VS2012 的能力在这方面共存很好。我也在使用 TFS2012，到目前为止，我在 2010 年的“2012”解决方案上修改文件没有问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T00:59:40.190

`managed to modify CR for VS.NET 2010 to install on 2012, using MS ORCA`在这个线程中还有一个人：http: [//scn.sap.com/thread/3235515](http://scn.sap.com/thread/3235515)。不过，我自己无法让它工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-11-05T15:42:00.003

“SP25 在 Visual Studio 2019 上的工作”有点夸张。这是非常不可靠的，应该不惜一切代价避免。我目前必须使用 V2015 维护第二个开发环境来进行报表开发。

# javascript - jQuery 中的直接 vs 委托和冒泡 vs 捕获

> ID：12695568
> 
> 赞同：0
> 
> 时间：2012-10-02T17:52:11.490
> 
> 标签：javascript, javascript-events, jquery

**HTML**

```
<div>
 <span></span>
 <span></span>
 <span></span>
 <span></span>
</div> 
```

**jQuery**

```
$('div span').on('click', function(){
  //direct - 1st method
});

$('div').on('click','span', function(){
  //delegation - 2nd method
}); 
```

我在我的代码中使用了上述两种方法。我知道第二种方法更好，因为它只有一个处理程序。我的问题是，

1.  第一种方法（直接）是指称为事件捕获的概念吗？它是事件捕获的示例吗？
2.  第二种方法（委托）是指称为事件冒泡的概念吗？它是事件冒泡的一个例子吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T18:03:19.343

似乎所有 jQuery 事件方法都使用事件冒泡，而不是事件捕获。

因此，您的两个示例都将使用事件冒泡。

在某些浏览器中存在焦点和模糊事件没有冒泡的边缘情况。在受影响的浏览器中，事件捕获用于焦点和模糊事件。

* * *

作为参考，您可以简单地查看源代码。[http://code.jquery.com/jquery.js](http://code.jquery.com/jquery.js)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T18:01:25.477

```
$('div span').on('click', function(){
  //direct - 1st method
}); 
```

此事件仅将事件处理程序附加到当前存在于 DOM 中的 Div 内的跨度。即；如果将新的 span 元素添加到 div ，则该 span 不会有与之关联的点击事件。

第一个和第二个是**事件冒泡的例子**

出现了事件委托的概念，在祖先中，事件处理程序被赋予了事件处理程序，并且被委托给了孩子。

第二个例子是事件委托的例子。其中事件附加到父元素..所以div类中的所有span元素都附加到事件处理程序..

因此，如果将新的 span 元素添加到 div ，因为该事件与 span 的祖先相关联，在这种情况下该事件将触发

这在某些情况下会有所帮助

```
$('div').on('click','span', function(){
  //delegation - 2nd method
}); 
```

我不知道 jQuery 库中在哪里使用事件捕获

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-09T02:13:21.390

回答您的问题：

1.  这不是冒泡、捕获或委托。它只是将事件侦听器直接添加到元素。

2.  是的，这是在引擎盖下依赖于点击冒泡的委托。

事件冒泡和捕获是同一概念的不同实现，分别由 Microsoft 和 Netscape 提供。两者都在监听父元素上的事件。请注意，它们以不同的顺序发生：捕获从父级到后代发生，而冒泡则相反。

PPK 网站上的更多详细信息及其历史：[http ://www.quirksmode.org/js/events_order.html](http://www.quirksmode.org/js/events_order.html)

现代浏览器同时支持捕获和冒泡（冒泡是现在的默认设置），您可以在使用原生 addEventListener 时指定要使用哪一个：

element.addEventListener('click', function(){}, false); // 气泡 element.addEventListener('click', function(){}, true); // 捕获

但是，某些事件，如焦点、模糊、滚动、鼠标悬停等仅通过捕获阶段事件支持，因此在使用 addEventListener 时必须指定“true”。

不幸的是，看起来 jQuery 不支持所有捕获阶段事件的委托，只支持焦点和模糊（参见[https://github.com/jquery/jquery/blob/ad032d3c7df04827989a4187117614c29bf3a4ad/src/event.js#L728](https://github.com/jquery/jquery/blob/ad032d3c7df04827989a4187117614c29bf3a4ad/src/event.js#L728)）。

简短的回答：对于焦点和模糊以外的捕获阶段事件的委托，您需要使用本机 addEventListener，而不是 jQuery。

# factorization - 如何获得范围内数字的因子数？

> ID：12695569
> 
> 赞同：1
> 
> 时间：2012-10-02T17:52:11.940
> 
> 标签：factorization

通常我会进行素数分解并获得所有素数，然后我会进行排列和组合以找到所有因数。

例如：1824 是我要考虑的数字。现在我需要 300 中的 1824 的无因数。

有什么诀窍吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-22T06:45:52.820

一个技巧是不要搜索超过您正在搜索因子的数字的平方根的数字。例如，要从 2-300 中查找因子，您只需要从 2-ceil(sqrt(1824)) 中搜索，即 2-43。找到 2-43 范围内的数字后，将其分成 1824 以检查可能高于 43 的其他因素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T03:20:27.230

作为蛮力解决方案，您不需要为此对数字进行素数分解。您可以简单地检查范围内的所有数字。

让您希望找到因子的数字范围为 [range_start, range_end]。只需在循环中遍历这些数字，并为每个数字（比如 x）检查 if ( `number % x == 0`)，如果是，则 x 是数字的一个因子。

# android - 无法更新 android 应用资产文件夹中的文件

> ID：12695571
> 
> 赞同：5
> 
> 时间：2012-10-02T17:52:25.093
> 
> 标签：android, android-file

当用户单击按钮时，我想更新资产文件夹中的文件。

我的听众是经典

```
OnClickListener myUpdateListener = new OnClickListener() {
    public void onClick(View v) {
        updateAllParams();
    }
}; 
```

新文件以这种形式指向一个 url

`http://sample.test/android/params.dtf`

*assets*文件夹中的文件是

```
params.dtf 
```

但我不知道如何用网站上的新版本替换这个文件。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T17:57:45.327

> 我想更新资产文件夹中的文件

你不能。

assets 文件夹是只读的，您不能写入或更新那里的任何文件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-02T18:22:39.900

打包并安装应用程序后，您无法更新资产文件夹。但是，您可以存储到设备的内存并从那里读入您的文件。有关此主题的更多信息，请访问[http://developer.android.com/guide/topics/data/data-storage.html#filesInternal](http://developer.android.com/guide/topics/data/data-storage.html#filesInternal)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-11T06:41:06.463

据我说，资产文件夹是只读的。将您的文件存储在 sdcard 中。

# php - 将文本框值保存到数据库

> ID：12695575
> 
> 赞同：0
> 
> 时间：2012-10-02T17:52:42.350
> 
> 标签：php, mysql, database, date, submit

我对 PHP 和 MySQL 有点陌生。

```
<p>Pickup Date: <input type="date" name="date"></p>
<input type='submit' name='submit' value='Secure Order!'> 
```

所以我在我的代码中有他的部分。我希望将日期保存在我的数据库中。在我的数据库中，我有一个名为 date 的表，其中包含“date”和“account name”列。我希望当我单击“安全订单”按钮时，文本框中的日期会保存在数据库中。此外，当前登录的用户也将保存在帐户名中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T18:00:00.503

在您的表格上假设您有：

```
<form id="myform" action="myphppage.php" method="post"> 
```

现在，当您点击提交时，输入中的数据将发布到 myphppage.php。

现在您需要编写 myphppage.php。

在顶部，您将有类似的内容：

```
<?php
    $account = $_POST['account'];
    $mydate = $_POST['date'];
    $query="INSERT INTO date (date,account name) VALUES($mydate,$account)";
    //Use mysqli object to execute query.
?> 
```

我没有使用过 mysqli 库，因为我已经习惯了使用旧的 mysql_ 库，但我因为建议它而被大喊大叫，因为它现在已被弃用。

这应该让你开始。

将表单与数据一起回传也很常见。在其中想象您的表单位于“myphppage.php”页面上，那么您可以在顶部有以下内容：

```
<?php 
    if(isset($_POST['submit'])){
        //continue with the php code from above here
    }
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T18:04:48.847

为什么你在你的第一个使用双引号`<input>`，然后在你的第二个使用简单的引号`<input>`？大多数时候，在 HTML 中，我们会鼓励使用双引号。

此外，这个表格有很多缺失的部分是正确的。这只是一个如何使用输入中键入的变量的示例：

```
<?php
    if(isset($_POST['date'])) {
        echo "You picked ", $_POST['date'], "\n"
    }
?>
<form action="<?php $_SERVER['PHP_SELF']; ?>" method="post">
    <p>Pickup Date: <input type="date" name="date"></p>
    <input type="submit" value="Secure Order!">
</form> 
```

至于 MySQL 部分，你需要自己学习和尝试一下。从那里开始：[http ://www.php.net/manual/en/book.mysqli.php](http://www.php.net/manual/en/book.mysqli.php)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-02T18:02:22.347

您可以使用 PHP $_POST SuperGlobal 来做到这一点：

HTML：

```
<input type="text" name="username" /> 
```

PHP-onsubmit

```
<?php

if(isset($_POST['submit'])
{
   $username= $_POST["username"];
   $date= $_POST["date"];

// your insert code //

}
?> 
```

# mongodb - Mongodb模式差异

> ID：12695576
> 
> 赞同：2
> 
> 时间：2012-10-02T17:52:49.570
> 
> 标签：mongodb

**是否有任何开源工具可用于区分两种不同的 mongodb 模式？** 例如，如果模式 M1 有集合 C1、C2、C3、C4 模式 M2 有集合 C1、C2、C3。是否有任何开源工具可用于获取它们之间的差异？还想比较模式 M1 和 M2 中的索引。

我想可以使用脚本或使用 java mongodb 驱动程序的简单 java 程序来做基本的事情。只是想看看是否有人已经遇到过这样的工具？我正在考虑关系模式的 liquibase。

我从第二市场遇到了 Mongeez，并进行了一些初步搜索。有没有人有使用它的经验？

# javascript - 如何链接到您最近在 Tumblr 上的帖子？

> ID：12695579
> 
> 赞同：-1
> 
> 时间：2012-10-02T17:53:01.597
> 
> 标签：javascript, php, html, tumblr

> **可能重复：**
> [如何使用 Javascript 显示指向我最新的 Tumblr 帖子的链接？](https://stackoverflow.com/questions/5617378/how-to-display-a-link-to-my-latest-tumblr-post-using-javascript)

有没有办法让我链接到我在 tumblr 上的最新帖子，记住每次我创建新帖子时 URL 都会改变？我已经检查了 API，但我很难尝试编写链接。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T18:38:42.353

只需阅读您的 tumblr RSS 提要（即使用 php）并使用第一项的链接。IE。“nationalpost”的 tumblr RSS 提要的 URL 如下所示：

```
http://nationalpost.tumblr.com/rss 
```

xml api 还为您提供最新帖子的 url

```
http://nationalpost.tumblr.com/api/read 
```

也可以作为 json 使用，所以你可以用 javascript 来做

```
http://nationalpost.tumblr.com/api/read/json 
```

使用 jQuery，它可能看起来像这样：

```
$(document).ready(function() {
    $.getJSON('http://nationalpost.tumblr.com/api/read/json?callback=?', function(result) {
        $('#link').html('<a href="'+ result.posts[0].url +'">Latest Post</a>');
    });
}); 
```

这是[jsfiddle 上的工作示例](http://jsfiddle.net/PdeZc/)

# linux - 在shell中调用Porperty的正确语法是什么

> ID：12695580
> 
> 赞同：0
> 
> 时间：2012-10-02T17:53:07.350
> 
> 标签：linux, bash, shell, unix, aix

我正在尝试运行以下脚本：

```
#!/bin/sh
. ./test.prop

for ((i=0; i<10;i++)
do
    echo $F($i)
done 
```

它来源的文件包含参数分配：

```
F1=20
F2=30
F3=40
.
.
. 
```

脚本的期望输出将是

```
10
20
30
40
.
.
. 
```

什么是正确的语法`$F($i)`？还是我不能简单地使用它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T18:01:04.940

您可以使用间接参数扩展：

```
for ((i=0; i<10; i++)); do
    f="F$i"
    echo "${!f}"
done 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T18:02:23.533

为什么不使用数组？

```
F=(10 20 30 ...) 
```

和

```
for i in {0..9}; do
    echo ${F[i]}
done 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-02T18:01:12.320

您可能应该使用`eval`：

```
eval "echo \$F$i" 
```

eval 用于评估然后运行命令，允许您动态生成命令。通过转义第一个美元符号，它在生成的命令中显式使用，而注意转义第二个美元符号允许我们将其值扩展为用于生成变量名称的数字。所以假设`$i`包含值“1”，生成的命令是`echo $F1`。

希望这会有所帮助=)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T18:01:12.420

您可以使用 grep 命令：

```
grep ^F prop.test | awk -F= '{print $2}' 
```

这将 grep 所有以 . 开头的行`F`并打印`=`.

# php - 通过 php 打开 mp4 会导致在播放前完全下载

> ID：12695586
> 
> 赞同：1
> 
> 时间：2012-10-02T17:53:41.050
> 
> 标签：php, flash, video, fopen, mp4

我正在尝试通过 php 将 mp4 文件提供给 flash 播放器，并且视频在开始播放之前已完全下载。

```
$src = '/var/www/user/data/www/domain.com/video.mp4';
if(file_exists($src) and is_readable($src)) {
    header('Content-Type: video/mp4');
    header('Content-Length: '.filesize($src));
    readfile($src);
} else die('error'); 
```

我试过 curl 有类似的结果。任何想法是什么导致了这种延迟？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T18:08:54.347

您的 Flash 播放器很可能希望您能够处理 HTTP`Range`请求，以便它可以更快地开始播放。

HTML5/Flash 音频播放器[jPlayer 在其开发人员指南中有一个关于此的部分](http://www.jplayer.org/latest/developer-guide/#jPlayer-server-response)。滚动到有关字节范围请求的部分：

> 您的服务器必须启用 Range 请求。这很容易通过查看服务器的响应是否在其标头中包含 Accept-Ranges 来检查。

另请注意，`Range`如果您必须使用 PHP 而不是直接下载，它们会提供用于处理请求的 PHP 解决方案。

**smartReadFile.php**
[https://groups.google.com/forum/#!msg/jplayer/nSM2UmnSKKA/bC-l3k0pCPMJ](https://groups.google.com/forum/#!msg/jplayer/nSM2UmnSKKA/bC-l3k0pCPMJ)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T18:15:45.207

另一种选择是让 apache 自己发送文件，而不是在 php 中读取它并使用 X-Sendfile 将其转储到输出。

首先确保使用 sendfile 支持编译 apache，然后将输出代码更改为：

```
header ('X-Sendfile: ' . $src);
header ('Content-Type:  video/mp4');
header ('Content-Disposition: attachment; filename="' . $filename . '"');
exit; 
```

这通常比通过 PHP 更快。

# html - 为什么我们不能在标签中添加 id 属性？

> ID：12695588
> 
> 赞同：1
> 
> 时间：2012-10-02T17:53:44.420
> 
> 标签：html, css

每当我们`id`向标签添加属性时`<img>`，图像都不会显示。

例如。

`<img src="something.jpg" id="sidebarAd">`

此图像不会显示。另外，如果我也将其放入其中`<div>`。不起作用。例如

```
<div id="sidebarAd">
<img src="something.jpg">
</div> 
```

但是，如果我使用类标签。一切都像魅力一样。为什么会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T17:59:34.857

这可能是由响应您的 ID 名称的 AdBlocker 过滤器引起的`#sidebarAd`。这是预期的行为，因为......嗯......这是一个广告:)

**[@zzzzBov 的这个演示演示](http://jsfiddle.net/b6Sjx/2/)**了当我的 AdBlock Chrome 扩展程序处于活动状态时，图像是不可见的，但是当禁用时，图像会显示出来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T17:56:12.380

很可能您在某个地方有一个关于该 id 的 css 规则，该规则`#sidebarAd`将拥有它的元素设置为不可见..

`display:none`例如

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T18:01:00.240

确保您使用的是唯一 ID 和结束标记。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T17:55:18.367

打开您的开发者控制台（大多数浏览器中为 f12）并检查元素以查看是否有一些 CSS 规则。

另一个想法：由于您在 id 中有“ad”一词，请确保您没有启用 adblock 扩展。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-02T17:56:04.803

您是否有任何与该 ID 关联的 CSS 可能隐藏它？任何 HTML 元素都可以有一个与之关联的 ID，但所有 ID 必须是唯一的（它们在每个页面上只能出现一次）。

# php - strip_tags php 函数正在离开标签

> ID：12695589
> 
> 赞同：0
> 
> 时间：2012-10-02T17:53:44.953
> 
> 标签：php, html, strip-tags

当我检查不删除用户名的 HTML 标记的页面源时，我的下面的代码给出了一个输出，即使我指定删除它们。如果我删除`<p>`底部的标签并仅`echo`通过 PHP 函数`Login()`本身，`strip_tags`则可以，但如果我尝试在 HTML 中输出条带标签的值，则会失败。

PHP代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
</head>
<body>
<?php

function Login() {
    $username = $_POST['username'];
    $password = $_POST['password'];

    $username = strip_tags($username);
    $password = strip_tags($password);
    $username = trim($username);
    $password = trim($password);
?>

<?php echo "<p>" . $username . "</p>" ?></p>
<?php echo "<p>" . $password . "</p>" ?></p> 
</body>
</html> 
```

任何关于为什么回显文本 $username 和 $password 与标签一起显示的见解仍然将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T17:58:27.960

您没有`Login()`在此示例中调用该函数，并且`}`在函数声明之后缺少 a。此外，变量范围已关闭。考虑以下 ：）

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
</head>
<body>
<?php

function Login() {
    $username = strip_tags(trim($_POST['username']));
    $password = strip_tags(trim($_POST['password']));
    echo '<p>', $username, '</p><p>', $password, '</p>';
}

if (!empty($_POST)) Login();
?>
</body>
</html> 
```

# node.js - Node.js / Express.js - app.router 是如何工作的？

> ID：12695591
> 
> 赞同：306
> 
> 时间：2012-10-02T17:53:47.977
> 
> 标签：node.js, middleware, express

在我询问之前，`app.router`我认为我至少应该解释一下我认为在使用中间件时会发生什么。要使用中间件，要使用的功能是`app.use()`. 当中间件被执行时，它要么通过 using 调用下一个中间件，`next()`要么让它不再调用中间件。这意味着我放置中间件调用的顺序很重要，因为一些中间件依赖于其他中间件，而靠近末尾的一些中间件甚至可能不会被调用。

今天我正在处理我的应用程序，并让我的服务器在后台运行。我想进行一些更改并刷新我的页面并立即查看更改。具体来说，我正在更改我的布局。我无法让它工作，所以我在 Stack Overflow 上搜索了答案并找到[了这个问题](https://stackoverflow.com/questions/5612777/stylus-and-express-stylesheets-are-not-re-compiled-when-modified)。它说要确保`express.static()`在下面`require('stylus')`。但是当我查看那个 OP 的代码时，我看到他`app.router`在中间件调用的最后进行了调用，我试图弄清楚为什么会这样。

当我创建我的 Express.js 应用程序（版本 3.0.0rc4）时，我使用了命令`express app --sessions --css stylus`，并且在我的 app.js 文件中，代码与我`app.router`上面的`express.static()`和`require('stylus')`调用一起设置。所以看起来，如果它已经以这种方式设置，那么它应该保持这种方式。

重新安排我的代码以便我可以看到我的 Stylus 更改后，它看起来像这样：

```
app.configure(function(){
  //app.set() calls
  //app.use() calls
  //...
  app.use(app.router);
  app.use(require('stylus').middleware(__dirname + '/public'));
  app.use(express.static(__dirname + '/public', {maxAge: 31557600000}));
});

app.get('/', routes.index);

app.get('/test', function(req, res){
  res.send('Test');
}); 
```

所以我决定第一步是找出为什么`app.router`在我的代码中包含它很重要。所以我将其注释掉，启动了我的应用程序并导航到`/`. 它很好地显示了我的索引页面。嗯，也许它起作用了，因为我正在从我的路由文件（routes.index）导出路由。所以接下来我导航到`/test`它并在屏幕上显示测试。哈哈，好吧，我不知道是什么`app.router`。无论它是否包含在我的代码中，我的路由都很好。所以我肯定错过了一些东西。

**所以这是我的问题：**

有人可以解释一下`app.router`它的作用，它的重要性，以及我应该将它放在我的中间件调用中的什么位置吗？如果我能得到一个关于`express.static()`. 据我所知，`express.static()`是我的信息的缓存，如果应用程序找不到请求的页面，它会检查缓存是否存在。

* * *

## 回答 #1

> 赞同：333
> 
> 时间：2012-10-02T18:09:13.343

**注意：**这描述了 Express 在版本 2 和 3 中的工作方式。有关 Express 4 的信息，请参阅本文末尾。

* * *

`static`只是从磁盘提供文件（*静态*资源）。您给它一个路径（有时称为挂载点），它会为该文件夹中的文件提供服务。

例如，`express.static('/var/www')`将提供该文件夹中的文件。因此，对您的节点服务器的请求`http://server/file.html`将服务`/var/www/file.html`。

`router`是运行您的路线的代码。当你这样做时`app.get('/user', function(req, res) { ... });`，它`router`实际上是调用回调函数来处理请求。

您传递事物`app.use`的顺序决定了每个中间件有机会处理请求的顺序。例如，如果您`test.html`在静态文件夹中调用了一个文件和一个路由：

```
app.get('/test.html', function(req, res) {
    res.send('Hello from route handler');
}); 
```

哪一个被发送给请求的客户`http://server/test.html`？先给哪个中间件`use`。

如果你这样做：

```
app.use(express.static(__dirname + '/public'));
app.use(app.router); 
```

然后提供磁盘上的文件。

如果换一种方式，

```
app.use(app.router);
app.use(express.static(__dirname + '/public')); 
```

然后路由处理程序获取请求，并将“来自路由处理程序的Hello”发送到浏览器。

通常，您希望将路由器*放在*静态中间件之上，以便意外命名的文件无法覆盖您的路由之一。

请注意，如果您没有明确地`use`，`router`它会在您定义路由时由 Express 隐式添加（这就是即使您注释掉了您的路由仍然有效的原因`app.use(app.router)`）。

* * *

一位评论者[提出了](https://stackoverflow.com/questions/12695591/node-js-express-js-how-does-app-router-work/12695813?noredirect=1#comment21483353_12695813)关于顺序的另一点`static`我`router`没有解决的问题：对您的应用程序整体性能的影响。

`use` `router`上面的另一个原因`static`是优化性能。如果您`static`放在第一位，那么您将在每个请求上点击硬盘驱动器以查看文件是否存在。在[快速测试](https://gist.github.com/daguej/5100313)中，我发现在未加载的服务器上，此开销总计约为 1 毫秒。（这个数字在负载下​​很可能会更高，因为请求将竞争磁盘访问。）

`router`首先，匹配路由的请求永远不必访问磁盘，从而节省宝贵的毫秒数。

当然，有一些方法可以减轻`static`'s 的开销。

最好的选择是将所有静态资源放在特定文件夹下。（IE `/static`）然后您可以挂载`static`到该路径，以便它仅在路径以以下开头时运行`/static`：

```
app.use('/static', express.static(__dirname + '/static')); 
```

在这种情况下，你可以把它放在上面`router`。如果文件存在，这可以避免处理其他中间件/路由器，但老实说，我怀疑你会获得那么多。

您也可以使用[`staticCache`](http://www.senchalabs.org/connect/middleware-staticCache.html)，它将静态资源缓存在内存中，这样您就不必为经常请求的文件访问磁盘。（**警告：** `staticCache` [将来显然会被删除](https://github.com/senchalabs/connect/issues/617)。）

但是，我不认为`staticCache`缓存否定答案（当文件不存在时），所以如果你把它放在`staticCache`上面`router`而不将它安装到路径上，它就没有帮助。

与所有有关性能的问题一样，**测量和基准测试您的实际应用程序**（在负载下）以查看瓶颈的真正位置。

* * *

## 快递4

Express 4.0**删除了** `app.router`. 现在，所有中间件 ( `app.use`) 和路由 ( `app.get`et al) 都按照它们添加的顺序进行处理。

换句话说：

> 所有路由方法都将按照它们出现的顺序添加。你不应该**这样**做`app.use(app.router)`。这消除了 Express 最常见的问题。
> 
> 换句话说，混合`app.use()`和`app[VERB]()`将**完全**按照它们被调用的顺序工作。
> 
> ```
> app.get('/', home);
> app.use('/public', require('st')(process.cwd()));
> app.get('/users', users.list);
> app.post('/users', users.create); 
> ```

[阅读有关 Express 4 更改的更多信息。](https://github.com/visionmedia/express/wiki/New-features-in-4.x)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-11-04T17:21:17.953

> 路由意味着确定应用程序如何响应客户端对特定端点的请求，该端点是 URI（或路径）和特定的 HTTP 请求方法（GET、POST 等）。每个路由可以有一个或多个处理函数，当路由匹配时执行。
> 
> 在 Express 4.0 路由器中，我们在定义路由时获得了前所未有的灵活性。
> 
> express.Router() 多次用于定义路由组。
> 
> 路由用作处理请求的中间件。
> 
> 路由用作中间件以使用“.param()”验证参数。
> 
> app.route() 用作路由器的快捷方式，以在路由上定义多个请求
> 
> 当我们使用 app.route() 时，我们正在将我们的应用程序与该路由器连接起来。

```
var express = require('express'); //used as middleware
var app = express(); //instance of express.
app.use(app.router);
app.use(express.static(__dirname + '/public')); //All Static like [css,js,images] files are coming from public folder
app.set('views',__dirname + '/views'); //To set Views
app.set('view engine', 'ejs'); //sets View-Engine as ejs
app.engine('html', require('ejs').renderFile); //actually rendering HTML files through EJS. 
app.get('/', function (req, res) {
  res.render('index');  
})
app.get('/test', function (req, res) {
  res.send('test')
}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-09-12T07:54:21.663

在 express 版本 4 中，我们可以通过以下方式轻松定义路由：

**server.js：**

```
const express = require('express');
const app = express();
const route = require('./route');

app.use('/route', route);
// here we pass in the imported route object

app.listen(3000, () => console.log('Example app listening on port 3000!')); 
```

**路由.js：**

```
const express = require('express');
const router = express.Router();

router.get('/specialRoute', function (req, res, next) {
     // route is now http://localhost:3000/route/specialRoute
});

router.get('/', function (req, res, next) {
    // route is now http://localhost:3000/route
});

module.exports = router; 
```

* * *

在`server.js`我们导入`route.js`文件的路由器对象并以下列方式应用它`server.js`：

```
app.use('/route', route); 
```

现在所有路由`route.js`都具有以下基本 URL：

[http://localhost:3000/路由](http://localhost:3000/route)

## 为什么采用这种方法：

采用这种方法的主要优点是现在我们的应用程序更加**模块化**。现在可以将某个路由的所有路由处理程序放入不同的文件中，这使得所有内容都更易于维护和查找。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-17T16:50:47.680

[@kelyvinn](https://twitter.com/kelyvinn) 2016 年的[一篇文章](https://caffeinecoding.com/better-express-routing-for-nodejs/)旨在展示模块化，包括以下代码：

```
// controllers/apis/dogs/index.js
const
    express = require('express'),
    dogService = require('../../../services/dogs');

let router = express.Router();

router.get('/', dogService.getDogs);
router.get('/:id', dogService.getDogWithId);

module.exports = router;
```

# python - 通过鼻子测试与多个实体组运行事务时出错

> ID：12695592
> 
> 赞同：10
> 
> 时间：2012-10-02T17:53:48.483
> 
> 标签：python, google-app-engine, nose

我正在使用 Google App Engine 框架使用 Python 2.7 构建应用程序。为了测试我的应用程序，我有几个测试通过使用 nosegae 插件的nosetests 运行。我使用以下命令运行它们：

```
nosetests --with-gae --gae-lib-root=/usr/local/google_appengine/ -w . -w */test/ -v 
```

在我的应用程序的模型层中，我需要运行多个数据库操作，这些操作会影响同一事务中的多个实体组。我通过使用 db 包的 run_in_transaction_options 函数来做到这一点： [https ://developers.google.com/appengine/docs/python/datastore/functions#run_in_transaction](https://developers.google.com/appengine/docs/python/datastore/functions#run_in_transaction)

不幸的是，在运行我的测试套件时，我在那些尝试运行此类事务的测试用例中收到以下错误：

> BadRequestError：多个实体组上的事务仅允许使用 High Replication 数据存储

我在鼻子测试中找不到任何可以启用 HRD 的标志。

我想知道是否可以从鼻子测试中运行 HRD，如果可以，如何设置？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-02T18:43:41.120

我强烈建议您从**db**切换到**ndb**，您可以在其中使用[跨组事务](https://cloud.google.com/appengine/docs/python/ndb/transactions)。

要模拟 HRD，您可以将此部分添加到`setUp`测试的功能中，来自[编写高复制数据存储测试](https://cloud.google.com/appengine/docs/python/tools/localunittesting#Python_Writing_High_Replication_Datastore_tests)：

```
# Create a consistency policy that will simulate the High Replication consistency model.
self.policy = datastore_stub_util.PseudoRandomHRConsistencyPolicy(probability=0)

# Initialize the datastore stub with this policy.
self.testbed.init_datastore_v3_stub(consistency_policy=self.policy) 
```

# javascript - 在 Javascript 中搜索字符串数组时可以使用通配符吗？

> ID：12695594
> 
> 赞同：18
> 
> 时间：2012-10-02T17:53:50.613
> 
> 标签：javascript

给定一个字符串数组：

```
x = ["banana","apple","orange"] 
```

是否有用于执行通配符搜索的内置快捷方式？

即，也许

```
x.indexOf("*na*") //returns index of a string containing the substring na 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-02T18:26:49.773

扩展 Pim 的答案，正确的方法（没有 jQuery）是这样的：

```
Array.prototype.find = function(match) {
    return this.filter(function(item){
        return typeof item == 'string' && item.indexOf(match) > -1;
    });
} 
```

但实际上，除非您在多个地方使用此功能，否则您可以使用现有`filter`方法：

```
var result = x.filter(function(item){
    return typeof item == 'string' && item.indexOf("na") > -1;            
}); 
```

RegExp 版本类似，但我认为它会产生更多开销：

```
Array.prototype.findReg = function(match) {
    var reg = new RegExp(match);

    return this.filter(function(item){
        return typeof item == 'string' && item.match(reg);
    });
} 
```

不过，它确实提供了允许您指定有效 RegExp 字符串的灵活性。

```
x.findReg('a'); // returns all three
x.findReg("a$"); // returns only "banana" since it's looking for 'a' at the end of the string. 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-08-20T13:37:36.803

扩展 @Shmiddty 的答案，这里有一些有用的 JavaScript 想法：

*   使用新方法扩展 Array：`Array.prototype.method = function(arg) { return result; }`
*   使用以下方法过滤数组：`Array.filter(function(e) { return true|false; })`
*   将公式应用于数组中的元素：`Array.map(function(e) { return formula(e); })`
*   使用正则表达式：要么`/.*na.*/`或`new Regex('.*na.*')`
*   使用正则表达式进行匹配：`let result = regex.test(input);`
*   在对数组的每个元素运行函数后，使用[Array.prototype.reduce聚合结果](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce)

即我更喜欢输入参数是一个正则表达式，所以，它给你：

*   一个简短但通用的模式匹配输入，
    *   例如包含、开始于、结束宽度，以及更复杂的匹配
*   将输入模式指定为字符串的能力

**解决方案 1：过滤、测试、映射和 indexOf**

```
Array.prototype.find = function(regex) {
  const arr = this;
  const matches = arr.filter( function(e) { return regex.test(e); } );
  return matches.map(function(e) { return arr.indexOf(e); } );
};
let x = [ "banana", "apple", "orange" ];
console.log(x.find(/na/)); // Contains 'na'? Outputs: [0]
console.log(x.find(/a/)); // Contains 'a'? Outputs: [0,1,2]
console.log(x.find(/^a/)); // Starts with 'a'? Outputs: [1]
console.log(x.find(/e$/)); // Ends with 'e'? Outputs: [1,2]
console.log(x.find(/pear/)); // Contains 'pear'? Outputs: []
```

**解决方案2：减少，测试**

```
Array.prototype.find = function(regex) {
  return this.reduce(function (acc, curr, index, arr) {
    if (regex.test(curr)) { acc.push(index); }
    return acc;
  }, [ ]);
}
let x = [ "banana", "apple", "orange" ];
console.log(x.find(/na/)); // Contains 'na'? Outputs: [0]
console.log(x.find(/a/)); // Contains 'a'? Outputs: [0,1,2]
console.log(x.find(/^a/)); // Starts with 'a'? Outputs: [1]
console.log(x.find(/e$/)); // Ends with 'e'? Outputs: [1,2]
console.log(x.find(/pear/)); // Contains 'pear'? Outputs: []
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T18:16:57.283

您可以扩展数组原型以在数组中查找匹配项

```
Array.prototype.find = function(match) {
    var matches = [];
    $.each(this, function(index, str) {
        if(str.indexOf(match) !== -1) {
            matches.push(index);
        }
    });
    return matches;
} 
```

然后你可以像这样在你的数组上调用 find

```
// returns [0,3]
["banana","apple","orange", "testna"].find('na'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-12T12:13:03.853

使用正则表达式可以在 javascript 中做到这一点

```
var searchin = item.toLowerCase();
var str = columnId;
str = str.replace(/[*]/g, ".*").toLowerCase().trim();
return new RegExp("^"+ str + "$").test(searchin); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-11T22:51:01.557

除了已经说过的所有其他内容之外，您还可以执行以下操作：

```
var x = ["banana", "apple", "orange"];
var y = [];
for (var i in x) {
    if (x[i].indexOf('na') > -1) {
        y.push(i);
    }
} 
```

结果：y = [0]

# jquery - 将日期添加到日期选择器

> ID：12695598
> 
> 赞同：0
> 
> 时间：2012-10-02T17:54:04.613
> 
> 标签：jquery, jquery-ui, datepicker

我正在尝试重现与此[http://jsfiddle.net/JKGvD/](http://jsfiddle.net/JKGvD/)相同的内容（唯一的问题是到达字段的格式） 字段 1：出发日期 字段 2：夜间数量 字段 3：日期到达 在这个 jsfiddle 中，字段 3 中是否有与 field1 相同的格式？（我在[这里](http://jsfiddle.net/ranell/UgkgY/5/)做了一个测试，但它没有用）谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T04:04:49.940

使用`$.datepicker.formatDate`实用功能：http: [//jsfiddle.net/JKGvD/244/](http://jsfiddle.net/JKGvD/244/)

参考：[http ://docs.jquery.com/UI/Datepicker/formatDate](http://docs.jquery.com/UI/Datepicker/formatDate)

# android - JSON 响应显示 nil

> ID：12695600
> 
> 赞同：1
> 
> 时间：2012-10-02T17:54:14.797
> 
> 标签：android, json

```
// Creating JSON Parser instance
JSONParser jParser = new JSONParser();

// getting JSON string from URL
JSONObject json = jParser.getJSONFromUrl(url); 
```

我正在使用上面的代码，但“json”在调试时似乎为空，程序崩溃。我一直在使用 具有相同 url的著名示例[http://www.androidhive.info/2012/01/android-json-parsing-tutorial/ 。](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/)服务器没有问题，因为我在 Firefox 浏览器中收到响应。

# unix - Solaris 5.10 是否支持 sed 不区分大小写的匹配？

> ID：12695602
> 
> 赞同：1
> 
> 时间：2012-10-02T17:54:26.230
> 
> 标签：unix, sed

当我尝试使用模式末尾的 I 选项执行不区分大小写的 S&R 时`s/find-word/replace-word/Ig`，我收到命令出现乱码的错误。如果我在没有 I 的情况下运行它，则完全相同，即`s/find-word/replace-word/g`. 我正在使用 Solaris 5.10，我们的 sed 是否可能是旧的并且不支持我？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-02T17:56:06.307

~~我建议使用小写的 i：s/from/to/gi~~

* * *

编辑：好的，我和我的智能...根据[http://www.unix.com/shell-programming-scripting/202109-sed-i-not-available-solaris-5-10-a.html](http://www.unix.com/shell-programming-scripting/202109-sed-i-not-available-solaris-5-10-a.html)和许多其他链接，似乎 sed 系统上的 sed 工具不支持 -i 选项......那么最好的解决方案是使用busybox，为您的系统重建GNU sed，或使用perl脚本来完成工作.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T19:21:23.160

如果您的版本`sed`不支持该`ignorecase`标志，您可以将所有输入预先小写`tr`：

```
<infile tr 'A-Z' 'a-z' | sed ... 
```

# entity-framework - 为什么 LinqPad 不能使用 EF 自动生成上下文对象？

> ID：12695603
> 
> 赞同：0
> 
> 时间：2012-10-02T17:54:28.790
> 
> 标签：entity-framework, linqpad

有谁知道为什么 LinqPad 不能自动生成实体框架上下文对象（就像使用 Linq-to-SQL 一样）？看来我必须创建一个包含 EF 上下文的程序集，然后在 LinqPad 中引用该程序集。但我不需要用 L2S 来做这件事。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T04:31:18.330

LINQPad 将 LINQ-to-SQL 用于自动数据上下文，因为它更轻、更快。在许多情况下，LINQ-to-SQL 还可以生成更好的 SQL，并允许在最终投影中使用任意函数。

原则上，为实体框架编写驱动程序并不难。它不作为选项存在的原因是[需求不足](http://linqpad.uservoice.com/forums/18302-linqpad-feature-suggestions/suggestions/3057911-entity-framework)。

如果您愿意，您可以将 EF 支持无缝地实现为第三方驱动程序。实现的唯一棘手的事情是支持 EF 的每个版本。

# ruby-on-rails - 无法使用 Twitter Bootstrap 添加“好”类来设计注册表单 (form_for)

> ID：12695608
> 
> 赞同：3
> 
> 时间：2012-10-02T17:54:42.667
> 
> 标签：ruby-on-rails, ruby, devise, twitter-bootstrap

为什么渲染页面时不显示“well”类？

```
<div class="container">
  <div class="row">
    <div class="offset4 span4">
      <h2>Sign up</h2>

      <%= form_for(resource, :html => { :class => "well" }, :as => resource_name, :url => registration_path(resource_name)) do |f| %>
        <%= devise_error_messages! %>

        <div><%= f.label :email %><br />
        <%= f.email_field :email %></div>

        <div><%= f.label :password %><br />
        <%= f.password_field :password %></div>

        <div><%= f.label :password_confirmation %><br />
        <%= f.password_field :password_confirmation %></div>

        <div><%= f.submit "Sign up" %></div>
      <% end %>

      <%= render "devise/shared/links" %>
    </div>
  </div>
</div> 
```

呈现时表单如下所示：

```
 <form method="post" id="new_user" class="new_user" action="/users" accept-charset="UTF-8"><div style="margin:0;padding:0;display:inline"><input type="hidden" value="✓" name="utf8"><input type="hidden" value="P3KHtU5CRNy0/kVEvck4coilSOWCHYaKPZ5D1xCxQj4=" name="authenticity_token"></div>

        <div><label for="user_email">Email</label><br>
        <input type="email" value="" size="30" name="user[email]" id="user_email"></div>

        <div><label for="user_password">Password</label><br>
        <input type="password" size="30" name="user[password]" id="user_password"></div>

        <div><label for="user_password_confirmation">Password confirmation</label><br>
        <input type="password" size="30" name="user[password_confirmation]" id="user_password_confirmation"></div>

        <div><input type="submit" value="Sign up" name="commit"></div>
</form> 
```

通知类只是“new_user”。没有“好”，为什么以及如何解决它？

谢谢

更新：

我已将其更新为：

```
 <%= form_for(resource, :class => "well", :as => resource_name, :url => registration_path(resource_name)) do |f| %> 
```

呈现的 HTML：

```
<form method="post" id="new_user" class="new_user" action="/users" accept-charset="UTF-8"><div style="margin:0;padding:0;display:inline"><input type="hidden" value="✓" name="utf8"><input type="hidden" value="P3KHtU5CRNy0/kVEvck4coilSOWCHYaKPZ5D1xCxQj4=" name="authenticity_token"></div> 
```

还是行不通。使用 Rails 3.2.8 在应用程序的其余部分使用 HAML，即使这些文件是 ERB。会是这样吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-02T16:11:40.370

实际上，您的 form_for 不附加该类的原因是因为使用 form_for，您需要在 :html 哈希中声明它：

```
form_for(resource, :html => {:class => "well"}, :as => resource_name, :url => registration_path(resource_name)) do 
```

[api.rubyonrails.org form_for](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-form_for)，阅读描述三个哈希选项（:url、:namespace 和 :html）的段落

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-23T17:35:45.347

对于其他遇到此问题的人，Speed 的解决方案对我有用。

我决定分享我的工作解决方案的代码。让我的应用看起来像[http://twitter.github.com/bootstrap/examples/signin.html](http://twitter.github.com/bootstrap/examples/signin.html)

我修改了我的 /views/devise/sessions/new.html.erb 看起来像：

```
<%= form_for(resource, :as => resource_name, :html => {class:"form-signin"}, :url => session_path(resource_name)) do |f| %>
<h2 class:"form-signin-heading">Please sign in</h2>
<%= f.email_field :email, :autofocus => true, class:"input-block-level", placeholder:"Email address" %>
<%= f.password_field :password, class:"input-block-level", placeholder:"Password"%>

<% if devise_mapping.rememberable? -%> 
    <label class="checkbox">
        <%= f.check_box :remember_me %> Remember Me
    </label>
<% end -%>

<%= f.submit "Sign in", class:"btn btn-large btn-primary" %>

<hr>

<%= render "devise/shared/links" %><% end %> 
```

不要忘记将引导示例头部的 css 添加到 /assets/css 请注意，使用 [type="email"] 代替引导示例中的 [type="text"]。

```
.form-signin {
    max-width: 300px;
    padding: 19px 29px 29px;
    margin: 40px auto 20px;
    background-color: #fff;
    border: 1px solid #e5e5e5;
    -webkit-border-radius: 5px;
       -moz-border-radius: 5px;
            border-radius: 5px;
    -webkit-box-shadow: 0 1px 2px rgba(0,0,0,.05);
       -moz-box-shadow: 0 1px 2px rgba(0,0,0,.05);
            box-shadow: 0 1px 2px rgba(0,0,0,.05);
}

.form-signin .form-signin-heading,
.form-signin .checkbox {
    margin-bottom: 10px;
}

.form-signin input[type="email"],
.form-signin input[type="password"] {
    font-size: 16px;
    height: auto;
    margin-bottom: 15px;
    padding: 7px 9px;
} 
```

快乐编码！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T17:50:51.123

根本问题是无法修改视图。它不仅限于我在 form_for 中正确声明的类。正确答案： [在 Rails 中自定义设计视图](https://stackoverflow.com/questions/6646845/customizing-devise-views-in-rails) 这是投票数较高的答案。

我无法修改视图，因为我跑了

```
rails generate devise:views User 
```

应该是

```
rails generate devise:views 
```

注意没有提到用户。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T18:09:52.943

```
<%= form_for(resource, :class => "well", :as => resource_name, :url => registration_path(resource_name)) do |f| %> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-16T05:40:55.337

应用自定义样式的方法（使用 Devise 3.5.3 并且当您拥有多个 Devise 模型时）是在`config/initializers/devise.rb`.

它默认为假。将其更改为：

> config.scoped_views = true

# android - 添加到 JNI 固定数组引用表失败（1024 个条目）

> ID：12695610
> 
> 赞同：5
> 
> 时间：2012-10-02T17:54:55.383
> 
> 标签：android, c, android-ndk, java-native-interface, overflow

我从java复制了一个多维数组，但是在使用它后释放内存时遇到了一些问题。

我所做的是：

```
jfieldID h_valID = (*env)->GetFieldID(env, h_cls, "val", "[[I");
jobjectArray h_val_obj = (*env)->GetObjectField(env, h, h_valID);
int h_val_local[xdim][ydim];
for(i=0; i<xdim; i++)
{
    h_val_one_dim = (jintArray) (*env)->GetObjectArrayElement(env, h_val_obj, i);
    h_val_elem = (*env)->GetIntArrayElements(env, h_val_one_dim, 0);
    for(j=0; j<ydim; j++)
    {
        h_val_local[i][j] = h_val_elem[j];
    }
    (*env)->ReleaseIntArrayElements(env, h_val_one_dim, h_val_elem, 0);
    (*env)->DeleteLocalRef(env, h_val_one_dim);
}
(*env)->DeleteLocalRef(env, h_val_obj); 
```

我在该方法上还有 4 个数组，全部在参数上，我得到指针，然后在使用它后释放。

```
int *x = (*env)->GetIntArrayElements(env,x_p,0);
int *y = (*env)->GetIntArrayElements(env,y_p,0);
int *v = (*env)->GetIntArrayElements(env,v_p,0);
int *w = (*env)->GetIntArrayElements(env,w_p,0); 
```

...

```
(*env)->ReleaseIntArrayElements(env, x_p, x, 0);
(*env)->ReleaseIntArrayElements(env, y_p, y, 0);
(*env)->ReleaseIntArrayElements(env, v_p, v, 0);
(*env)->ReleaseIntArrayElements(env, w_p, w, 0); 
```

对于更大的文件，我在参考表上溢出了。我忘记释放什么或如何解决这个问题？

日志：

> 10-02 14:18:58.885: W/dalvikvm(23598): 参考表溢出 (max=1024)
> 
> 10-02 14:18:58.885：W/dalvikvm(23598)：JNI 固定数组引用表中的最后 10 个条目：
> 
> 10-02 14:18:58.885: W/dalvikvm(23598): 1014: 0x46109fe8 cls=[I (24 字节)
> 
> 10-02 14:18:58.885: W/dalvikvm(23598): 1015: 0x4610a008 cls=[I (24 字节)
> 
> 10-02 14:18:58.885: W/dalvikvm(23598): 1016: 0x46109fa8 cls=[I (24 字节)
> 
> 10-02 14:18:58.885: W/dalvikvm(23598): 1017: 0x46109fc8 cls=[I (24 字节)
> 
> 10-02 14:18:58.885: W/dalvikvm(23598): 1018: 0x46109fe8 cls=[I (24 字节)
> 
> 10-02 14:18:58.885: W/dalvikvm(23598): 1019: 0x4610a008 cls=[I (24 字节)
> 
> 10-02 14:18:58.885: W/dalvikvm(23598): 1020: 0x46109fa8 cls=[I (24 字节)
> 
> 10-02 14:18:58.885: W/dalvikvm(23598): 1021: 0x46109fc8 cls=[I (24 字节)
> 
> 10-02 14:18:58.885: W/dalvikvm(23598): 1022: 0x46109fe8 cls=[I (24 字节)
> 
> 10-02 14:18:58.885: W/dalvikvm(23598): 1023: 0x4610a008 cls=[I (24 字节)
> 
> 10-02 14:18:58.885：W/dalvikvm(23598)：JNI 固定数组引用表摘要（1024 个条目）：
> 
> 10-02 14:18:58.885: W/dalvikvm(23598): 1024 of [I 24B (4 unique)
> 
> 10-02 14:18:58.885: W/dalvikvm(23598): 被跟踪的 refs 直接持有的内存是 96 字节
> 
> 10-02 14:18:58.885：E/dalvikvm(23598)：添加到 JNI 固定数组引用表失败（1024 个条目）

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T12:05:57.887

我发现我做错了什么，更好的是，我忘了做什么。我在代码中有另一个返回点，但是在这种情况下我忘记在返回之前释放数组，我只是在函数结束时释放它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T21:29:19.163

对我来说，这看起来像是 JNI 实现中的一个错误。一种明显的解决方法是改用一维数组。该数组在 Java 端似乎没有锯齿状，因此来回转换非常简单。`(i,j)`一维数组中元素的索引将是`i*xdim + j`。

# php - 动态 PHP 页面：缓存还是不缓存？

> ID：12695612
> 
> 赞同：1
> 
> 时间：2012-10-02T17:55:12.223
> 
> 标签：php, browser-cache

一般来说，你应该为动态 PHP 页面做任何浏览器/标题缓存吗？如果是这样，您应该使用什么设置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T17:56:20.800

一般规则是：用你的大脑。

如果页面不太可能发生太大变化，请将其缓存。多长时间？好吧，只要它不太可能改变。

一旦页面发生变化，那就是缓存应该过期的时候。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T18:04:01.483

一般来说，尽可能缓存。这基本上意味着如果您知道内容不会改变，就不要花费任何周期重新创建或重新发送它。您必须考虑每种具体情况。我已经写了[一个完整的解释](http://docforge.com/wiki/Web_application/Caching)。

# delphi - 如何在不使用 TSysDevEnum.GetMoniker 的情况下使用已知的视频捕获源初始化 TFilter？

> ID：12695617
> 
> 赞同：1
> 
> 时间：2012-10-02T17:55:19.973
> 
> 标签：delphi, directshow, dspack

是否可以在不使用 TSysDevEnum.GetMoniker(...) 的情况下创建/初始化具有已知视频捕获源的 TFilter 对象？

Video Capture Source 的名称和其他详细信息是已知的，可以通过 GraphEdit Filter Browser 获取。目的是加快 TFilter 的初始化并以编程方式将其附加到 FilterGraph。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T18:27:12.563

不，[您需要通过 moniker 来完成](http://msdn.microsoft.com/en-us/library/windows/desktop/dd377566%28v=vs.85%29.aspx)。它取决于支持视频源过滤器的实际 COM 类，但几乎总是没有唯一的`CLSID`，并且不可能不通过名字对象来实例化它。

如果您有 moniker 显示名称，您可以使用`MkParseDisplayName`绕过枚举快速获取 IMoniker。或者，您可以列举并将名字对象的显示名称与您已经拥有的名称进行比较。

> 要选择音频或视频捕获设备，请使用系统设备枚举器，如主题使用系统设备枚举器中所述。System Device Enumerator 返回设备名字对象的集合，按设备类别选择。名字对象是一个 COM 对象，其中包含有关另一个对象的信息。名字对象使应用程序无需实际创建对象即可获取有关对象的信息。

# mysql - 在 MySQL 中选择不是追随者的追随者和连接

> ID：12695620
> 
> 赞同：2
> 
> 时间：2012-10-02T17:55:44.047
> 
> 标签：mysql

我有一个复杂的查询要解决，但我不知道如何获得正确的结果。首先，让我向您展示我拥有的表格：

```
+------------+
| users      |
+------------+
| id         |
| first_name |
| last_name  |
+------------+

+--------------+
| clients      |
+--------------+
| id           |
| users_id     |
| uid          |
| access_token |
+--------------+

+---------------+
| users_follows |
+---------------+
| users_id      |
| follow_id     |
+---------------+

+-------------------+
| users_connections |
+-------------------+
| id                |
| users_id          |
| clients_id        |
| uid               |
| name              |
+-------------------+ 
```

我们的网站使用 Facebook Connect，因此每个连接的用户都有一个客户端 UID（Facebook UID）。对于网站的功能，我需要一个执行以下操作的查询：选择所有您关注的人（`users_id=ME`）加上 users_connections 但如果 users_connection 也是我关注的人，则不要将其包含在最终结果中。最后，对于这一行，如果它是我需要的“关注” `users.first_name`，`users.last_name`并且如果它是未在我们的网站上注册的连接，我需要`users_connections.name`。

我将有很多行，可能会有很多人关注所以 NOT IN 和 id 连接我认为这不是扩展它的最佳方式。

谁能给我一些光？

先感谢您！

# objective-c - iOS/ObjectiveC 中异常使用的优缺点

> ID：12695622
> 
> 赞同：8
> 
> 时间：2012-10-02T17:55:53.780
> 
> 标签：objective-c, ios

我阅读了 Apple 关于[异常](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Exceptions/Exceptions.html#//apple_ref/doc/uid/10000012i)使用和[NSError](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/ErrorHandlingCocoa/ErrorHandling/ErrorHandling.html#//apple_ref/doc/uid/TP40001806)使用的建议：

另外，我阅读了几个类似的堆栈溢出问题，讨论是否使用异常。

[iOS 中的异常处理](https://stackoverflow.com/questions/6782804/exception-handeling-in-ios)

[在 Objective-C 中使用异常](https://stackoverflow.com/questions/9726192/using-exceptions-in-objective-c)

[Objective-C 异常](https://stackoverflow.com/questions/4648952/objective-c-exceptions)

我试图找出使用异常作为 iOS 中错误通知/处理方法的利弊（坦率地说，我对 Apple 的句子不满意（它说明了要做什么，但没有说明我们为什么要这样做）：

> 您应该将异常用于编程或意外的运行时错误，例如越界集合访问、尝试改变不可变对象、发送无效消息以及失去与窗口服务器的连接。您通常在创建应用程序时而不是在运行时处理这些类型的异常错误。

异常使用优点：

*   不需要修改错误生成代码和错误处理代码之间的所有中间代码

*   它不会污染方法的参数和返回值

缺点：

*   对于所有手动管理的内存代码，我们必须格外小心（我们需要将其包装在自动释放对象中以确保资源被释放）。

*   我们需要小心我们的代码和框架之间的边界。如果我们的异常离开我们的代码，我们可能会遇到麻烦（因为框架可能会手动管理内存）

我错过了什么吗？还有其他的缺点/优点吗？

看起来异常对于像代码这样的库应该没问题（当我们有大量紧密打包的代码时，它们与外部系统/框架的通信不多。而且看起来异常很难用于积极的代码与其他框架交互。

你的经验能证明这个理论吗？

我感谢有关此主题的任何其他信息。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-02T18:10:02.047

tl;dr 异常应仅用于致命/不可恢复/程序员错误。尝试在 Java 或其他可恢复异常的环境中使用它们会导致代码更脆弱、更难维护和难以重构，同时还会限制您利用系统框架的能力。

* * *

缺点：如果您在代码中使用异常来控制流程和/或可恢复错误，那么您的代码在设计上将与 Apple 的设计模式不同。

最终结果？

• 你不能在你的代码中使用 Apple 的 API *，*除非你的代码和 Apple 之间的边界*总是*隔离异常行为

• 每次重构时，都必须重构大量异常处理代码

• 许多本应微不足道的事情将变得非常复杂。例如，您将无法将您的对象放入可枚举的集合中并在没有该枚举的情况下枚举它们——块、for循环等……——在边界处也有异常处理。

考虑：

```
 NSArray *a = @[yourExceptionfulInstance, yourExceptionfulInstance, yourExceptionfulInstance];

@try {
    for(id k in a) { [k doSomething]; }
} @catch(...) {
} 
```

如果出于任何原因可能会引发上述情况，则违反了框架的记录设计模式，因为您将在 Apple 框架内的框架*之间*`doSomething`引发异常。

 *这是一个巨大的骗局。大到我无法想象有一组专业人士能胜过它。*

# c++ - 使用 Clang 4.1 (LLVM 3.1svn) 退出时 Boost 测试崩溃

> ID：12695625
> 
> 赞同：9
> 
> 时间：2012-10-02T17:56:05.310
> 
> 标签：c++, macos, boost, segmentation-fault, clang

考虑这个简单的程序：

```
#include <string>
#include <iostream>

#define BOOST_TEST_DYN_LINK
#define BOOST_TEST_MODULE "MyTest"
#include <boost/test/unit_test.hpp>

using namespace std;

template<char* S>
void Test()
{
    BOOST_REQUIRE("Boom!" != string(S));
}

char bang[] = "Bang!";

BOOST_AUTO_TEST_CASE(Boom)
{
    char boom[] = "Boom!";
    Test<bang>();
} 
```

我在[Mac OS X v10.8.2](http://en.wikipedia.org/wiki/OS_X_Mountain_Lion) (Mountain Lion) 上并安装了[XCode](http://en.wikipedia.org/wiki/Xcode) 4.5。

该程序在使用[GCC](http://en.wikipedia.org/wiki/GNU_Compiler_Collection)编译时可以工作，例如，

```
gcc test.cpp -lboost_unit_test_framework-mt -lstdc++ 
```

但是当使用 Apple [Clang](http://en.wikipedia.org/wiki/Clang) 4.1 (tags/Apple/clang-421.11.65) (基于[LLVM](http://en.wikipedia.org/wiki/LLVM) 3.1svn)编译时它会崩溃

```
clang -std=c++11 -stdlib=libc++ -lc++ test.cpp -lboost_unit_test_framework-mt 
```

我使用的是使用 BREW 安装的 Boost 1.51.0。使用 Clang 重新编译 Boost 没有帮助。

这个谜团有解决办法吗？

```
./a.out
Running 1 test case...

*** No errors detected
Segmentation fault: 11

gdb ./a.out
GNU gdb 6.3.50-20050815 (Apple version gdb-1822) (Sun Aug  5 03:00:42 UTC 2012)
...
This GDB was configured as "x86_64-apple-darwin"...Reading symbols for shared libraries .... done

(gdb) r
Starting program: /private/tmp/xx/a.out 
Reading symbols for shared libraries +++............................. done
Running 1 test case...

*** No errors detected

Program received signal EXC_BAD_ACCESS, Could not access memory.
Reason: 13 at address: 0x0000000000000000
0x0000000100056c56 in boost::unit_test::test_unit::~test_unit ()
(gdb) where
#0  0x0000000100056c56 in boost::unit_test::test_unit::~test_unit ()
#1  0x000000010002435f in boost::unit_test::master_test_suite_t::~master_test_suite_t ()
#2  0x00000001000244dd in boost::unit_test::framework_impl::~framework_impl ()
#3  0x00007fff96179307 in __cxa_finalize ()
#4  0x00007fff9617af57 in exit ()
#5  0x00007fff944897e8 in start ()

lldb a.out
Current executable set to 'a.out' (x86_64).
(lldb) r
Process 71553 launched: '/private/tmp/xx/a.out' (x86_64)
Running 1 test case...

*** No errors detected
Process 71553 stopped
* thread #1: tid = 0x1c03, 0x0000000100056c56 libboost_unit_test_framework.dylib`boost::unit_test::test_unit::~test_unit() + 86, stop reason = EXC_BAD_ACCESS (code=13, address=0x0)
    frame #0: 0x0000000100056c56 libboost_unit_test_framework.dylib`boost::unit_test::test_unit::~test_unit() + 86
libboost_unit_test_framework.dylib`boost::unit_test::test_unit::~test_unit() + 86:
-> 0x100056c56:  lock   
   0x100056c57:  xaddl  %ecx, -8(%rax)
   0x100056c5b:  testl  %ecx, %ecx
   0x100056c5d:  jg     0x100056c68               ; boost::unit_test::test_unit::~test_unit() + 104

clang --version
Apple clang version 4.1 (tags/Apple/clang-421.11.65) (based on LLVM 3.1svn)
Target: x86_64-apple-darwin12.2.0
Thread model: posix 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-02T18:57:37.010

使用 C++11 选项重新编译 Boost 可以解决问题。

```
./bootstrap.sh --with-toolset=clang --prefix=/usr/local
sudo ./b2 install toolset=clang cxxflags="-std=c++11 -stdlib=libc++" linkflags="-stdlib=libc++" threading=multi 
```

我`./b2 install`上次使用时犯了一个错误，但是安装步骤似乎是在安装之前构建了一些库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-08T10:02:03.480

我和timlukins有同样的问题。我不得不这样做`cmake .. -DBoost_USE_STATIC_LIBS=YES`。但是，例如，由于我在使用 boost_timer 进行编译时遇到了其他问题，我发现我的包含不正确。

我不得不更换：

```
#include <boost/test/included/unit_test.hpp> 
```

和：

```
#include <boost/test/unit_test.hpp> 
```

它在 gcc 和 VS13 上运行良好，但在 clang 上运行良好。如果它可以帮助...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T18:47:29.970

以下似乎有效，但您可能需要其他参数。

```
USER (~/tmp)
$ clang++ -pedantic test.cpp -lboost_unit_test_framework-mt 

USER (~/tmp)
$ ./a.out 
Running 1 test case...

*** No errors detected 
```

# javascript - 为 li 和 ul li设置不同的标签（嵌套）

> ID：12695628
> 
> 赞同：1
> 
> 时间：2012-10-02T17:56:11.627
> 
> 标签：javascript, jquery, html, navigation, html-lists

我真的需要解决这个问题……我已经做得太久了。

**我想我需要获取每个`<a>`元素的 innerText 并将其放入 li_text 变量中。**

以下是此主题的“提供”代码。该主题不支持子菜单。但我需要这个，所以我试图让它与子菜单一起工作。

以下 js 脚本部分地“构建”了 HTML。

```
var$ $main_menu = $('#main_menu');

  $main_menu.find('li').each( function(){
    var $this_li = $(this),
li_text = $this_li.find('a').html();

$this_li.find('a').html( '<span class="main_text">' + li_text + '</span>' + '<span class="menu_slide">' + li_text + '</span>' )
    } ); 
```

**好像是这段代码： li_text = $this_li.find('a').html(); 从上面。这需要调整....我需要那条线从上面最接近的父级中取'a'......这有意义吗？**

连同这个（来自header.php）

```
$primaryNav = '';
  if (function_exists('wp_nav_menu')) {
    $primaryNav = wp_nav_menu( array( 'theme_location' => 'primary-menu', 'container' => '',  'fallback_cb' => '', 'menu_class' => $menuClass, 'menu_id' => $menuID, 'echo' => false )   );} 
```

导航 HTML 如下所示：

```
<nav id="main_menu" style="opacity: 1; display: none;">
  <ul id="menu-dk-fl370" class="clearfix">
    <li id="menu-item-23" class="mcdu_left menu-item menu-item-type-post_type menu-item-object-page menu-item-23 even">
    <li id="menu-item-48" class="mcdu_right menu-item menu-item-type-post_type menu-item-object-page menu-item-48 odd">
    <li id="menu-item-27" class="nolink menu-item menu-item-type-custom menu-item-object-custom menu-item-27 even">
    <li id="menu-item-55" class="has_sub mcdu_right menu-item menu-item-type-post_type menu-item-object-page menu-item-55 odd">
      <a href="http://fl370.com/?page_id=53">
        <span class="main_text">MEDIA</span>
        <span class="menu_slide">MEDIA</span>
      </a>
        <ul id="sub-menu" class="sub-menu" style="display: none;">
          ***<li id="menu-item-67" class="mcdu_sub mcdu_right menu-item menu-item-type-post_type menu-item-object-page menu-item-67">
            <a href="http://fl370.com/?page_id=60">
              <span class="main_text">
                <span class="main_text">MEDIA</span>
                <span class="menu_slide">MEDIA</span>
              </span>
              <span class="menu_slide">
                <span class="main_text">MEDIA</span>
                <span class="menu_slide">MEDIA</span>
              </span>
            </a>
         </li>***
         <li id="menu-item-66" class="mcdu_sub mcdu_right menu-item menu-item-type-post_type menu-item-object-page menu-item-66">
      </ul>
   </li>
  </ul>
</nav> 
```

等等...

**

这就是我想要得到的……

```
 <span class="main_text">
                <span class="main_text">BILLEDER</span>
                <span class="menu_slide">BILLEDER</span>
              </span>
              <span class="menu_slide">
                <span class="main_text">VIDEO</span>
                <span class="menu_slide">VIDEO</span>
              </span> 
```

这些“名称”是通过 js 中的 li_text 函数插入的。但似乎它只插入了第一个 li 一个名字。

我需要脚本从其“自己的”/父 li a 中获取页面名称。并且仍然应用 js 脚本....

**

希望有人可以帮助....

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T18:40:37.843

如果您的代码结构保持不变，那么您可以通过执行此操作来获取该内容。我假设您不能使用类名或 ID

```
$main_menu.find('> ul > ul').html(); 
```

或者

```
$('#main_menu > ul > ul').html(); 
```

这将返回 ul 内部的所有内容，但不返回 ul 本身，因此您需要创建并添加它。

```
var container_ul = '<ul class="' + $main_menu.find('> ul > ul').attr("class") + '" id="' + $main_menu.find('> ul > ul').attr("id") + '">'; 
```

在循环之外定义 container_ul，所以最后的东西看起来像这样

```
var $main_menu = $('#main_menu');
var container_ul = '';
var final_content = '';

$main_menu.find('> ul > ul').each( function(){
    container_ul = '<ul class="' + $(this).attr("class") + '" id="' + $(this).attr("id") + '">';
    li_text = $(this).html();
    final_content += container_ul + li_text + '</ul>';
}); 
```

所以 final_content 会有你想要的代码块，从这里你可以决定如何处理那个代码块。可能不是获取内容的最漂亮方式，但它应该可以工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T18:15:07.610

就个人而言，我讨厌使用`html()`来填充 HTML 片段。我更喜欢创建元素，并将它们附加到 DOM。你最终会对你正在做的事情有更多的控制和理解。

```
$("#main_menu li").each( 
    function(i, element)
    {
        $("<a />").attr("href", "some link here").appendTo(element);
        $("<span />").addClass("class name here").text("some text here").appendTo(element);
        // ...etc.
    }
); 
```

*（如果你发布更多关于你最终期望什么代码的信息，我可以给你更多关于我在这里的意思的细节......）*

除此之外，您可能会遇到额外的问题，因为您的 HTML 格式不正确。你关闭你的`<a>`标签两次，你没有关闭你的`<li>`标签。此外，您不会关闭`<span>`标签，因为您的尖括号之一是反转的 ( `>/span>`)。如果处理不当，jQuery 将很难剖析 HTML 元素。

# css - 奇怪的位置：Mac webkit 浏览器上的绝对行为

> ID：12695632
> 
> 赞同：0
> 
> 时间：2012-10-02T17:56:15.473
> 
> 标签：css, html

我正在尝试通过执行以下操作在菜单项旁边放置一个复选标记：

```
#userInfo div.dropDownContent p span
{
    position: absolute;
    margin-left: -20px;
} 
```

段落内的 span 是绝对定位的，以保持菜单项文本的居中，否则复选标记与文本一起居中，它看起来很糟糕。

正如您在这个[jsFiddle](http://jsfiddle.net/6L8AA/4/)中看到的那样，复选标记在您的普通 Windows 浏览器中看起来不错，但是 Mac 和 iPad 上的 Safari（甚至可能是 Mac 上的 Chrome）在菜单外显示复选标记，我无能为力它甚至移动一个像素。

有谁知道我做错了什么？它是一个 webkit 错误吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T18:10:50.380

我确实在 Safari 中看到了这种奇怪的行为，我真的无法解释为什么它只出现在那个浏览器中。

话虽如此，[这个更新的小提琴](http://jsfiddle.net/6L8AA/5/)应该告诉你什么对我有用。

基本上，我没有绝对定位跨度，而是使用相对定位并将其设置为左 -20px，如下所示：

```
#userInfo div.dropDownContent p span
{
    position: relative;
    left: -20px;
} 
```

# jekyll - Jekyll 方法覆盖：posts_collat e

> ID：12695638
> 
> 赞同：1
> 
> 时间：2012-10-02T17:56:32.653
> 
> 标签：jekyll

我正在尝试更改帖子在主页上的显示方式，但无论我做什么，更改似乎都没有得到反映。以下是我遵循的步骤：

_config.yml

```
JB :
  version : 0.2.13
  posts_collate : 
     provider : "custom" 
```

然后我创建了文件 _includes/custom/posts_collat​​e，其内容与 _includes/JB/posts_collat​​e 完全相同，但做了一些调整。

我原来的 posts_collat​​e 是这样开始的：

```
 {% if site.JB.posts_collate.provider == "custom" %}
  {% include custom/posts_collate %}
  {% else %}
    {% for post in posts_collate  %}
       {% capture this_year %}{{ post.date | date: "%Y" }}{% endcapture %}
       {% capture this_month %}{{ post.date | date: "%B" }}{% endcapture %}
       {% capture next_year %}{{ post.previous.date | date: "%Y" }}{% endcapture %}
       {% capture next_month %}{{ post.previous.date | date: "%B" }}{% endcapture %} 
```

我在编辑正确的文件吗？我的更改未反映在自定义文件夹中的原因可能是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T03:18:18.733

如果您还没有修复它，下面是我测试过的有效信息。你设置`_config.yml`正确。

你需要做的另外两件事。

1.  将包含路径更新`'JB/custom/posts_collate'`为引用路径`_includes/`
2.  停止并重新启动服务器，`$ jekyll --server`以便它也可以解析您更新的`_config.yml`文件

# sql - 如何选择 col1 值 x 并复制到 col1 值 y 的新行，如果再次运行查询，不应再次复制

> ID：12695643
> 
> 赞同：3
> 
> 时间：2012-10-02T17:57:43.263
> 
> 标签：sql, db2

如何将行复制到选择column1 value = 55的同一张表和column 1 value = 56的新行，**如果我们第二次运行查询，它不应该再次复制旧行**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T18:00:47.077

您可以使用以下命令添加一个`where`子句以防止重复插入`not exists`：

```
insert  YourTable
        (col1, col2, col3, ...)
select  56 -- New value
,       col2
,       col3
,       ...
from    YourTable
where   col1 = 55 -- Old value
        and not exists
        (
        select  *
        from    YourTable
        where   col1 = 56 -- New value
        ) 
```

# c# - C#中的正则表达式用于密码

> ID：12695649
> 
> 赞同：2
> 
> 时间：2012-10-02T17:58:16.120
> 
> 标签：c#, regex

我有用于验证用户密码的正则表达式以包含：

> *   至少 8 个字母数字字符
> *   1个大写字母
> *   1个小写字母
> *   1 位数
> 
> 允许特殊字符！@#$%*.~

我正在使用以下正则表达式：

```
(?=(.*\w){8,})(?=(.*[A-Z]){1,})(?=(.*[a-z]){1,})(?=(.*[0-9]){1,})(?=(.*[!@#$%*.~])) 
```

但是，这不会阻止用户输入其他特殊字符，例如 <、> 和 &。

如何限制允许的特殊字符数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T18:00:47.180

验证*所有内容*的*单个*正则表达式最终看起来像线路噪音。

 *相反，我建议：

*   使用简单的字符串函数来测试长度
*   使用正则表达式测试字符包含和有效性

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T18:08:52.217

```
^(?=.*[a-z])(?=.*[A-Z])(?=.*[^a-zA-Z])[a-zA-Z0-9!@#$%*.~]{8,}$ 
```

顺便说一下，锚定（`^`和`$`）很重要。*

# c# - 删除站点核心项目子项时出现 NullReferenceException

> ID：12695650
> 
> 赞同：0
> 
> 时间：2012-10-02T17:58:17.093
> 
> 标签：c#, sitecore

我正在尝试将一些旧的民意调查数据导入我们的 sitecore 解决方案。对于导入的一部分，我正在尝试创建新的站点核心项目来保存基于我们已经为民意调查设置的母版页的数据。这个主人在它下面设置了几个默认项目，我想在添加旧投票数据之前删除几个特定的​​默认项目。但是，当我尝试使用 item.DeleteChildren() 删除默认项目之一时，我在 sitecore 内核中`NullReferenceException`被抛出。`Sitecore.Tasks.ItemEventHandler.OnItemDeleted(Object sender, EventArgs args)`如果有人知道可能导致这种情况的原因，我将不胜感激。我们使用的是 sitecore 版本 5.3.2。

这是我用来尝试基于母版创建/编辑项目的代码。创作一切都很完美，它是 DeleteChildren() 调用不起作用。

```
 Guid LegacyPollFolderGuid = new Guid("8AE89A44-9DCD-4AC2-B0F3-DD438188A575");
   Guid QuizOMaticMasterGuid = new Guid("74B95ABF-1898-4870-8B4F-50AF0078AE22");

   var master = Sitecore.Configuration.Factory.GetDatabase("master");
   var root = master.GetItem(new Sitecore.Data.ID(LegacyPollFolderGuid));
   var quizMasterTemplate = master.Masters[new Sitecore.Data.ID(QuizOMaticMasterGuid)];

   var quizPage = root.Add("Test Quiz", quizMasterTemplate);
   if (quizPage != null)
   {
      var quiz = quizPage.Children["Column One"].Children["QuizOMatic"];
      if (quiz != null)
      {
         var questionFolder = quiz.Children["Questions"];
         var questionTemplate = questionFolder.Children[0].Template;
         var resultsFolder = quiz.Children["Results"];
         var linksFolder = quiz.Children["Links"];

         using (new Sitecore.SecurityModel.SecurityDisabler())
         {
            questionFolder.DeleteChildren();
         }
      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-14T11:13:37.490

我已经构建了一个具有相同功能的工具；删除特定文件夹下的所有项目。我得到了同样的错误，但我看到项目被删除。所以我多次重新运行该工具，最终所有项目都被删除。

# c# - 使用 Simple Java Runner 的具有多个模块的 Sonar C# 项目

> ID：12695651
> 
> 赞同：2
> 
> 时间：2012-10-02T17:58:22.443
> 
> 标签：c#, .net, sonarqube, sonar-runner

我正在尝试将 Sonar 3.2 与 C# 项目（唯一的插件是 C# Core 和 C# FX Cop）并使用 Simple Java Runner。

它在具有单个项目的解决方案上运行良好，但是当我尝试使用具有 2 个项目的解决方案进行分析时，我总是收到以下错误：

```
    17:01:41.775 INFO .sbbProjectModule - ------------- 分析项目1
    17:01:42.055 INFO .sbProfileProvider - 选定的质量配置文件：[name=Custom C#,language=cs]
    17:01:42.075 信息 nPluginsConfigurator - 配置 Maven 插件...
    17:01:42.125 INFO org.sonar.INFO - 与之前的分析比较
    17:01:42.155 INFO org.sonar.INFO - 比较超过 5 天 (2012-09-27)
    17:01:42.175 INFO org.sonar.INFO - 比较超过 30 天 (2012-09-02)
    17:01:42.215 INFO .bpSensorsExecutor - 初始化程序 ProjectFileSystemLogger...
    17:01:42.215 信息 jectFileSystemLogger - 源目录：
    17:01:42.215 信息 jectFileSystemLogger - $（解决方案文件夹）\Project1
    17:01:42.215 INFO .bpSensorsExecutor - 初始化 ProjectFileSystemLogger 完成：0 毫秒
    17:01:42.225 INFO .bpSensorsExecutor - 初始化程序 CSharpProjectInitializer...
    17:01:42.225 INFO .bpSensorsExecutor - 初始化程序 CSharpProjectInitializer 完成：0 毫秒
    17:01:42.255 信息 ospcpd.CpdSensor - C# 不支持检测重复代码。
    总时间：8.442s
    最终内存：5M/118M
    线程“主”org.sonar.runner.RunnerException 中的异常：java.lang.NullPointerException
        在 org.sonar.runner.Runner.delegateExecution(Runner.java:288)
        在 org.sonar.runner.Runner.execute(Runner.java:151)
        在 org.sonar.runner.Main.execute(Main.java:84)
        在 org.sonar.runner.Main.main(Main.java:56)
    引起：java.lang.NullPointerException
        在 org.sonar.plugins.csharp.api.sensor.AbstractRegularCSharpSensor.assembliesFound(AbstractRegularCSharpSensor.java:101)
        在 org.sonar.plugins.csharp.api.sensor.AbstractRegularCSharpSensor.shouldExecuteOnProject(AbstractRegularCSharpSensor.java:81)
        在 org.sonar.plugins.csharp.api.sensor.AbstractRuleBasedCSharpSensor.shouldExecuteOnProject(AbstractRuleBasedCSharpSensor.java:48)
        在 org.sonar.api.batch.BatchExtensionDictionnary.shouldKeep(BatchExtensionDictionnary.java:109)
        在 org.sonar.api.batch.BatchExtensionDictionnary.getFilteredExtensions(BatchExtensionDictionnary.java:99)
        在 org.sonar.api.batch.BatchExtensionDictionnary.select(BatchExtensionDictionnary.java:57)
        在 org.sonar.batch.phases.SensorsExecutor.execute（SensorsExecutor.java:57）
        在 org.sonar.batch.phases.Phases.execute（Phases.java:93）
        在 org.sonar.batch.bootstrap.ProjectModule.doStart（ProjectModule.java:139）
        在 org.sonar.batch.bootstrap.Module.start（Module.java:83）
        在 org.sonar.batch.bootstrap.BatchModule.analyze(BatchModule.java:131)
        在 org.sonar.batch.bootstrap.BatchModule.analyze(BatchModule.java:126)
        在 org.sonar.batch.bootstrap.BatchModule.doStart(BatchModule.java:121)
        在 org.sonar.batch.bootstrap.Module.start（Module.java:83）
        在 org.sonar.batch.bootstrap.BootstrapModule.doStart（BootstrapModule.java:121）
        在 org.sonar.batch.bootstrap.Module.start（Module.java:83）
        在 org.sonar.batch.Batch.execute(Batch.java:104)
        在 org.sonar.runner.internal.batch.Launcher.executeBatch（Launcher.java:69）
        在 org.sonar.runner.internal.batch.Launcher.execute（Launcher.java:61）
        在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        在 sun.reflect.NativeMethodAccessorImpl.invoke（未知来源）
        在 sun.reflect.DelegatingMethodAccessorImpl.invoke（未知来源）
        在 java.lang.reflect.Method.invoke（未知来源）
        在 org.sonar.runner.Runner.delegateExecution(Runner.java:285)
    ... 3 更多

```

解决方案文件夹包含以下 sonar-project.properties：

```
# Project identification
sonar.projectKey=com.project.btg
sonar.projectVersion=1.0
sonar.projectName=BTG

# Info required for Sonar
sonar.sources=.
sonar.language=cs

sonar.dotnet.visualstudio.solution.file=Sonar.project.sln
sonar.dotnet.buildPlatform=x86
sonar.dotnet.buildConfiguration=Debug

sonar.modules=Project1,Project2

#modules specific configuration
Project1:sonar.sources=.\Project1
Project1:sonar.projectName=Project 1

Project2:sonar.sources=.\Project2
Project2:sonar.sources=Project 2 
```

该解决方案只有这两个项目。

我尝试在每个项目的 sonar-project.properties 中添加模块配置，只需：

```
# Project identification
sonar.projectName=Project 1 
```

对于我使用的单个项目，我有：

```
# Project identification
sonar.projectKey=com.Project1
sonar.projectVersion=1.0
sonar.projectName=Project 1

# Info required for Sonar
sonar.sources=.
sonar.language=cs 
```

我觉得我错过了一些非常简单的东西，但我找不到太多关于此的信息。

如果有人可以帮我解决这个问题，我还有一个问题：你能分析 C++ 和 C# 项目的混合解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T06:39:54.357

C# 插件内置了多模块支持，您**不需要**（也不应该）指定：

```
sonar.modules=Project1,Project2

#modules specific configuration
Project1:sonar.sources=.\Project1
Project1:sonar.projectName=Project 1

Project2:sonar.sources=.\Project2
Project2:sonar.sources=Project 2 
```

，也不在每个模块内添加“sonar-project.properties”。

**C# 插件依赖于 SLN 文件来自动发现模块。**查看[我们的示例应用程序](https://github.com/SonarCommunity/sonar-dotnet/tree/master/tools/dotnet-tools-commons/src/test/resources/solution/Example)，只需将 Maven POM 替换为单个“sonar-project.properties”文件。

# sml - 制作一个全局变量会解决这个问题吗？

> ID：12695656
> 
> 赞同：1
> 
> 时间：2012-10-02T17:58:58.183
> 
> 标签：sml, smlnj

每当我定义一个函数说funct（n）时，我可以将n的值分配给不同的变量，例如m，以便我可以将函数内变化的n值与m的初始值进行比较。此外，由于我嵌套了有时独立的其他函数，有没有办法使 m 变量通用？

我所做的是：

```
fun funct(n)= let val m=n in if (condition) then... 
```

此外，这里funct调用funct1，funct1调用funct2。错误消息读取

```
Error: unbound variable or constructor: m 
```

对于函数 2

```
Error: unbound variable or constructor: funct1 
```

对于函数 1

```
Error: unbound variable or constructor: funct1 
```

对于功能

我想 m 的单次更正将解决整个级联错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T08:40:11.160

您可以从比定义标识符的范围更深的范围访问任何标识符。例如

```
fun funct(n) =
  let fun funct1(x, y, z) = if n < 1 then ...
  ... 
```

在此示例中，`funct1`可以访问`n`已在外部范围中定义的 （即作为 的参数`funct`）。

但是要小心，在像 ML 这样的函数式语言中，标识符与像 C 这样的命令式语言中的标识符具有不同的含义。在您的示例中，`n`并且`m`不是变量，这意味着标识符表示的值不会改变。您只能重新定义标识符；但是，在重新定义之前使用标识符的代码将始终引用该标识符的原始值。

# html - 为什么可以设置样式和查看html标签？

> ID：12695657
> 
> 赞同：0
> 
> 时间：2012-10-02T17:58:58.833
> 
> 标签：html, css

我在玩 css 并在 ie7 之类的浏览器中发现了带有边距的问题，我最终在 css 中设置了 html 标记的样式，以使事情看起来不错。当 body 标签应该是 html 文档的可见部分的开始时，如何设置 html 标签的样式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T18:01:00.610

实际上，就 CSS 而言，[视口](http://www.w3.org/TR/CSS21/visuren.html#viewport)是绘制页面所有内容的画布，然后[`html`是 HTML 文档的根](http://www.w3.org/TR/html401/struct/global.html#h-7.3)，然后[`body`是文档正文](http://www.w3.org/TR/html401/struct/global.html#h-7.5)。该`body`元素可能是可以放置可见内容的 HTML 文档的开始，但它不是视图画布的根，至少就 CSS 而言。

就此而言， even`head`和它的内容可能是样式化的，而不仅仅是`html`,`body`和`body`. 事实上，实现 CSS 的浏览器实际上必须应用`display: none`到`head`其用户代理样式表中的元素才能隐藏它。

# app-store - trigger.io - 发布 ipa - 应用商店的文件

> ID：12695661
> 
> 赞同：2
> 
> 时间：2012-10-02T17:59:10.080
> 
> 标签：app-store, trigger.io, application-loader

我已经使用 trigger.io 成功创建了一个 ipa，但不幸的是，没有关于如何在 Apple 的 appstore 上上传 ipa 文件的说明。

任何人都可以帮助我吗？

谢谢，

安内

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T18:04:08.333

可以在 iOS 开发中心找到信息 - [https://developer.apple.com/devcenter/ios/index.action](https://developer.apple.com/devcenter/ios/index.action)

准备好上传后，您可以使用 Application Loader 上传您的 ipa 文件。这是一个PDF -

[https://itunesconnect.apple.com/docs/UsingApplicationLoader.pdf](https://itunesconnect.apple.com/docs/UsingApplicationLoader.pdf)

# ruby-on-rails - 如何在不接触硬盘的情况下创建文件？

> ID：12695663
> 
> 赞同：0
> 
> 时间：2012-10-02T17:59:11.817
> 
> 标签：ruby-on-rails, ruby

我正在尝试创建可以存储在外部服务器上的 PDF。

我这样做：

```
 File.new("temp.pdf", "w").close
    File.open("temp.pdf", "wb") do |f|
        f.write(bytes)
    end
    File.open("temp.pdf", "r") do |f|
        # upload `f` to server
    end
    File.delete("temp.pdf") 
```

然后将它们上传到服务器。

在我的本地机器上这工作正常，但是，我最近尝试在另一台机器上运行，并且在日志中出现权限错误。

有没有办法：

1.  将字节写入文件。
2.  切勿触摸硬盘。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T18:08:51.430

为什么不直接将字节上传到服务器？

您可能需要比正常级别低一些，但请检查例如gem的`UploadIO`类。`multipart-post`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T01:26:24.947

我意识到我必须写入文件并删除文件，因为 UploadIO 接受一个打开的文件所以我创建了一个新文件，将内容写入其中，将其作为 File.open 传递给 UploadIO，然后在我删除文件后发送。

# java - JNI unsatisfiedLinkError？

> ID：12695668
> 
> 赞同：1
> 
> 时间：2012-10-02T17:59:56.697
> 
> 标签：java, java-native-interface

我正在练习 JNI 并创建了共享库文件 Samplelib.so。我将创建库文件的目录添加到 java.library.path 中，当我运行 java 文件时，我得到 java.lang.UnsatisfiedLinkError。这是我的 Sample.java。

```
import java.util.*;
public class Sample{
public native int intmethod(int n);
public native String stringmethod(String s);
public static void main(String[] args) {
    try{
    //System.setProperty( "java.library.path", "/home/sudhagar/Project" );
    System.load("libSample");
    Sample sample=new Sample();
    int sq=sample.intmethod(2);
    String text=sample.stringmethod("JAVA");
    System.out.println(sq);
    System.out.println(text);
}
catch(UnsatisfiedLinkError e){
    String property = System.getProperty("java.library.path");
    StringTokenizer parser = new StringTokenizer(property, ";");
    while (parser.hasMoreTokens()) {
    System.err.println(parser.nextToken());
    }
}
}
} 
```

我的 Sample.c 文件，

```
#include "Sample.h"
#include <string.h>

JNIEXPORT jint  JNICALL Java_Sample_intmethod
(JNIEnv *env, jobject obj, jint n){
    return n*n;
}

JNIEXPORT jstring JNICALL Java_Sample_stringmethod
(JNIEnv *env, jobject obj, jstring n){
    return n;
}   

void main(){} 
```

我使用以下命令创建创建共享库 gcc -shared -I/.../include -I/.../include/linux -o libSample.so Sample.c

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T18:06:45.830

采用

```
 System.loadLibrary("Samplelib"); 
```

代替

```
System.load("Samplelib"); 
```

# android - 关于 DialogInterface.OnClickListener 的 AlertDialog 查询 - Android

> ID：12695672
> 
> 赞同：1
> 
> 时间：2012-10-02T18:00:03.407
> 
> 标签：android, android-alertdialog

我正在使用 SharedPreferences 文件中的条目填充我的 AlertDialog。

有 8 个条目。在 SharePreferences 文件中，它们被输入为（“serverurl”，London，UK）。

AlertDialog 按字母顺序显示值（伦敦、英国等），这正是我想要的。

单击选项时，我使用以下代码：

```
new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialoginterface,
                int i) {;
                setServer(i);   
            }
        }) 
```

这就是我的问题所在。我不想根据所选选项的位置传递整数，我希望它传递该值的键。

例如，如果用户单击位置 4 的华盛顿特区，我不想使用“4”作为参数，我希望它传递密钥（在此示例中它将是 URL/IP 地址）。

简而言之，这可能吗？还是共享首选项中的选项只能使用它们出现的位置访问？

# c++ - 引用指向 int 的指针会导致错误

> ID：12695674
> 
> 赞同：2
> 
> 时间：2012-10-02T18:00:13.890
> 
> 标签：c++, pointers, reference, int

我有以下一段代码，它是数组大小调整函数的实现。这似乎是正确的，但是当我编译程序时出现以下错误：

```
g++ -Wall -o "resizing_arrays" "resizing_arrays.cpp" (in directory: /home/aristofanis/Desktop/coursera-impl)
resizing_arrays.cpp: In function ‘int main()’:
resizing_arrays.cpp:37: error: invalid initialization of non-const reference of type ‘int*&’ from a temporary of type ‘int*’
resizing_arrays.cpp:7: error: in passing argument 1 of ‘void resize(int*&, int, int, int)’
resizing_arrays.cpp:39: error: invalid initialization of non-const reference of type ‘int*&’ from a temporary of type ‘int*’
resizing_arrays.cpp:7: error: in passing argument 1 of ‘void resize(int*&, int, int, int)’
resizing_arrays.cpp:41: error: invalid initialization of non-const reference of type ‘int*&’ from a temporary of type ‘int*’
resizing_arrays.cpp:7: error: in passing argument 1 of ‘void resize(int*&, int, int, int)’
Compilation failed. 
```

这是代码：

```
int N=5;

void resize( int *&arr, int N, int newCap, int initial=0 ) { // line 7
  N = newCap;
  int *tmp = new int[ newCap ];
  for( int i=0; i<N; ++i ) {
    tmp[ i ] = arr[ i ];
  }
  if( newCap > N ) {
    for( int i=N; i<newCap; ++i ) {
      tmp[ i ] = initial;
    }
  }

  arr = new int[ newCap ];

  for( int i=0; i<newCap; ++i ) {
    arr[ i ] = tmp[ i ];
  }
}

void print( int *arr, int N ) {
  for( int i=0; i<N; ++i ) {
    cout << arr[ i ];
    if( i != N-1 ) cout << " ";
  }
}

int main() {
  int arr[] = { 1, 2, 3, 4, 5 };

  print( arr, N );
  resize( arr, N, 5, 6 ); // line 37
  print( arr, N);
  resize( arr, N, 10, 1 ); // line 39
  print( arr, N );
  resize( arr, N, 3 ); // line 41
  print ( arr, N );

  return 0;
} 
```

有人可以帮我吗？提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T18:03:36.077

在`main`中，您声明

```
int arr[] = { 1, 2, 3, 4, 5 }; 
```

一个普通的数组，而不是一个`int*`，这是你必须传递给`resize`.

而且，尽管这对于您的实现在技术上不是必需的`resize`，因为您从来没有`delete[]`在那里分配过任何内存 - 您应该修复空间泄漏 - 您传递给的指针`resize`应该指向 -分配的`new`内存块（您应该`delete[]`在 中`resize`）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-02T18:03:28.060

`arr`是在堆栈上分配的数组。你不能改变它的大小。如果您需要可调整大小的数组，请使用指针并使用`new`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T18:09:02.793

数组**不是**指针。特别是，数组保持不变。你不能移动它。在您使用 poibters 的上下文中，您还将创建内存泄漏和越界访问。

要创建可调整大小的数组，您需要维护一个指针，该指针最初是从数组中的元素副本设置的。就个人而言，我不会打扰和使用`std::vector<int>`（除非我正在开发自己的标准 C++ 库并实现`std::vector<T>`）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T18:38:41.887

当你说它`int&`意味着一个`int`我可以改变它的值的变量时，同样当你说它时`int*&`，它意味着一个`int*`我可以改变它的值的变量。现在看看你的代码，你能改变`arr`. 说合法`arr = new int[10]`吗？你看它是不合法的，在 C++ 术语中它不是一个`Lvalue`（它不能位于等号运算符的左侧）并且所有非常量引用必须是`Lvalue`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-02T18:15:53.447

你得到你得到的特定错误的原因是它`arr`会衰减到一个临时`int*`的使用。然后，您尝试将非常量引用（参数）绑定到临时值，这是非法的。看这里：

[为什么非常量引用不能绑定到临时对象？](https://stackoverflow.com/questions/1565600/how-come-a-non-const-reference-cannot-bind-to-a-temporary-object)

# javascript - 全局可接受的数组对象，但不在循环中

> ID：12695677
> 
> 赞同：0
> 
> 时间：2012-10-02T18:00:17.027
> 
> 标签：javascript, jquery

所以我有一个数组，其中填充了对象。这些对象有两个值，一个包含一个列表项，另一个包含一个浮点数（价格）。我正在尝试将列表推送到 DOM 元素中，但该变量是全局未定义的。

此代码将第二个数组项输出到控制台：

```
$('#coll-price-filter').change(function() {
    var newList = [];
    $('#coll-product-list li').each(function(idx, li) {
        pprice = $(li).find('.coll-prod-price').html().trim().substring(1)
        pprice = parseInt(pprice);
        newList[idx] = {
            value: $(li).wrap('<div></div>').parent().html(),
            price: pprice
        }
        newList.sort(function(a, b){  
            a = a.price, b = b.price;
            return a > b ? 1 : a < b ? -1 : 0;
        });
    });
    console.log(newList[1].value);
}); 
```

然而这并不

```
$('#coll-price-filter').change(function() {
    var newList = [];
    $('#coll-product-list li').each(function(idx, li) {
        pprice = $(li).find('.coll-prod-price').html().trim().substring(1)
        pprice = parseInt(pprice);
        newList[idx] = {
            value: $(li).wrap('<div></div>').parent().html(),
            price: pprice
        }
        newList.sort(function(a, b){  
            a = a.price, b = b.price;
            return a > b ? 1 : a < b ? -1 : 0;
        });
    });

    i = newList.length;
    while (i > 0) {
        console.log(newList[i].listItem);
        i--;
    }
}); 
```

因此，while 循环似乎破坏了`newList[]`对象的可访问性。我已经尝试了几种方法，如果我在`.each()`迭代器中它就可以工作。但我需要在外面访问它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T18:03:10.823

因为数组索引是`0`基于的，所以：

```
 i = newList.length; 
```

应该是这样的：

```
 i = newList.length - 1; 
```

否则，起始索引超出范围，因此`newList[i]`将是`undefined`，并且访问属性`undefined`是*TypeError*。

更正后，您可能希望访问对象上定义的属性，例如`.value`or `.price`，否则它将记录`undefined`每次迭代。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T18:02:17.513

这不应该：

```
i = newList.length;
while (i > 0) {
    console.log(newList[i].listItem);
    i--;
} 
```

是这个吗？

```
i = newList.length-1; // start on the last index, not length
while (i > 0) {
    console.log(newList[i].value); // value, like in your top example
    i--;
} 
```

# python - 如何在 matplotlib 图形窗口中轻松修改导航工具栏？

> ID：12695678
> 
> 赞同：18
> 
> 时间：2012-10-02T18:00:19.240
> 
> 标签：python, matplotlib

是否可以执行以下操作来修改 matplotlib 中的导航工具栏？

1.  生成一个图形窗口，其中：`fig = figure()`
2.  获取导航工具栏的参考，使用：`tbar = fig.get_navigation_toolbar()`，或者更好的是，只需：`tbar = fig.navtbar`
3.  通过引用修改工具栏`tbar`，例如删除/添加/编辑按钮，如下所示：
       `tbar.add_button(<a Button object>);`
       `tbar.remove_button(a reference to a button);`
       `tbar.edit_button(a reference to a button);`

4.  用以下内容更新图形：`fig.canvas.draw()`

非常感谢。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-21T14:01:34.283

我发现删除不需要的工具栏项的方法是创建一个子类，该子类在 GTK 应用程序中被实例化并使用。无论如何，当我手动创建 Figure、FigureCanvas 和 NavigationToolbar 对象时，这是最简单的方法。

```
class NavigationToolbar(NavigationToolbar2GTKAgg):
    # only display the buttons we need
    toolitems = [t for t in NavigationToolbar2GTKAgg.toolitems if
                 t[0] in ('Home', 'Pan', 'Zoom', 'Save')] 
```

如果你想创建自定义按钮，你应该看看`NavigationToolbar2`backend_bases 中的定义。您可以轻松地将自己的条目添加到`toolitems`列表中，并在工具栏子类中定义适当的回调函数。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-06-28T22:45:41.937

使用 MPL 1.2.1 可以获得标准 MPL 图的导航工具栏的处理程序`figure.canvas.toolbar`。我不确定以前的版本。

至少使用 QT 后端，可以使用 QT 方法将任意小部件添加到导航工具栏`.addWidget()`。我想其他后端也可以使用类似的方法，但我还没有测试过它们。

这是一个工作示例（使用 QT 后端），它`QLineEdit()`向导航工具栏添加 a 以更改 MPL 图的标题（从 IPython (pylab) 运行`run -i ...`，然后启动`test()`）：

```
from PySide import QtGui, QtCore

def test():
    plot([1,2,3], lw=2)
    q = qt4_interface(gcf())
    return q   # WARNING: it's paramount to return the object otherwise, with 
               # no references, python deletes it and the GUI doesn't respond!

class qt4_interface:
    def __init__(self,fig):
        self.fig = fig

        toolbar = fig.canvas.toolbar
        self.line_edit = QtGui.QLineEdit()
        toolbar.addWidget(self.line_edit)
        self.line_edit.editingFinished.connect(self.do_something) 

    def do_something(self, *args):
        self.fig.axes[0].set_title(self.line_edit.text())
        self.fig.canvas.draw()
        #f = open('l','a'); f.write('yes\n'); f.flush(); f.close() 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-18T13:40:45.840

以前的答案有效，但非常特定于后端。一个稍微更优雅的解决方案是继承 NavigationToolbar2，就像在另一个答案中所做的那样：[Matplotlib/Tkinter - 自定义工具栏工具提示](https://stackoverflow.com/questions/23172916/matplotlib-tkinter-customizing-toolbar-tooltips) 目的是更改工具提示，但添加或删除按钮同样微不足道。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-11T03:50:57.593

除了上面 torfbotl 的解决方案之外，您可能还会在末尾挂一个额外的按钮（带有绿色复选标记的那个）。

这可以在子类构造函数中得到缓解：

```
from matplotlib.backends.backend_qt4agg import NavigationToolbar2QT as NavigationToolbar

class PanOnlyToolbar(NavigationToolbar):
    # only display the buttons we need
    toolitems = [t for t in NavigationToolbar2GTKAgg.toolitems if
                 t[0] in ("Pan", )]

    def __init__(self, *args, **kwargs):
        super(PanOnlyToolbar, self).__init__(*args, **kwargs)
        self.layout().takeAt(1)  #or more than 1 if you have more buttons 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-04-04T15:43:20.080

使用 PyQt5 和 matplotlib 版本 '3.0.2'

如果您想添加一些按钮，只需按照从 matplotlib.backends.backend_qt5agg 导入的 NavigationToolbar2QT() 中初始化的类 NavigationToolbar2() 给出的文档：

```
# list of toolitems to add to the toolbar, format is:
# (
#   text, # the text of the button (often not visible to users)
#   tooltip_text, # the tooltip shown on hover (where possible)
#   image_file, # name of the image for the button (without the extension)
#   name_of_method, # name of the method in NavigationToolbar2 to call
# ) 
```

因此，您需要重新定义您的类，如前所述（您还可以在下面看到可用的预定义按钮）。就我而言，我想删除 2 个按钮（我评论的“保存”和“子图”），这样我就得到了：

```
class NavigationToolbar2QT(NavigationToolbar2QT):
    # only display the buttons we need
    NavigationToolbar2QT.toolitems = (
        ('Home', 'Reset original view', 'home', 'home'),
        ('Back', 'Back to previous view', 'back', 'back'),
        ('Forward', 'Forward to next view', 'forward', 'forward'),
        (None, None, None, None),
        ('Pan', 'Pan axes with left mouse, zoom with right', 'move', 'pan'),
        ('Zoom', 'Zoom to rectangle', 'zoom_to_rect', 'zoom'),
        # ('Subplots', 'Configure subplots', 'subplots', 'configure_subplots'),
        (None, None, None, None),
        # ('Save', 'Save the figure', 'filesave', 'save_figure'),
    ) 
```

并调用 NavigationToolbar2QT（在我的情况下）：

```
figure = plt.figure()
canvas = FigureCanvas(figure)
toolbar = NavigationToolbar2QT(canvas, self) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-08-03T16:27:51.440

我发现就是这样

```
fig = plt.figure()
toolbar = fig.canvas.manager.toolbar
tb=toolbar.toolitems
while len(tb)>0:
    tb.pop(0) 
```

努力删除所有工具，并且弹出单个工具也有效。也就是说，

```
toolbar.toolitems=[] 
```

没用，所以代码必须在某处对该数组有另一个引用。

# jquery - 带有颜色框的 jQuery 平滑 Div 滚动

> ID：12695685
> 
> 赞同：1
> 
> 时间：2012-10-02T18:00:46.390
> 
> 标签：jquery, html, colorbox, smooth-scrolling

我在网上找到了你的 jQuery Smooth Div Scroll 工具。我打算捐赠，但我无法像您在您的网站上那样使用颜色框选项： [http ://www.smoothdivscroll.com/colorbox.html](http://www.smoothdivscroll.com/colorbox.html)

我是一名平面艺术家和网页设计师，正在寻找画廊选项来展示我的作品。似乎当我添加链接到大图像的 href 标记时，它会破坏可滚动图库。我在我的 html 的 head 部分中链接了一个 colorbox.css 文件：

```
<link rel="Stylesheet" type="text/css" href="css/colorbox.css" /> 
```

我在文档的正文中也有这个：

```
<script type="text/javascript">
$(document).ready(function () {
// Init Smooth Div Scroll   
$("#makeMeScrollable").smoothDivScroll({
    mousewheelScrolling: "allDirections",
    manualContinuousScrolling: true
});

// Init colorbox
$("#makeMeScrollable a").colorbox({ speed: "500" }); 
```

});

我还缺少另一个拼图吗？一个javascript文件？

这个画廊将完美运作。非常感谢您提供的任何帮助或建议！

谢谢，

格里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T18:23:30.937

您需要包含 jQuery 库文件和 colorbox 脚本。

```
<!-- jQuery library - Please load it from Google API's -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js" type="text/javascript"></script>
<!-- jQuery UI Widget and Effects Core (custom download)
     You can make your own at: http://jqueryui.com/download -->
<script src="js/jquery-ui-1.8.23.custom.min.js" type="text/javascript"></script>
<!-- Latest version of jQuery Mouse Wheel by Brandon Aaron
     You will find it here: http://brandonaaron.net/code/mousewheel/demos -->
<script src="js/jquery.mousewheel.min.js" type="text/javascript"></script>
<!-- jQuery Kinetic - for touch -->
<script src="js/jquery.kinetic.js" type="text/javascript"></script>
<!-- Smooth Div Scroll 1.3 minified-->
<script src="js/jquery.smoothdivscroll-1.3-min.js" type="text/javascript"></script>
<!-- If you want to look at the uncompressed version you find it at
     js/jquery.smoothDivScroll-1.3.js -->
<!-- Colorbox -->
<script src="js/jquery.colorbox-min.js" type="text/javascript"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T18:23:37.683

[彩盒](http://www.jacklmoore.com/colorbox)包括：

*   jquery.colorbox.js
*   彩盒.css
*   用于加载、边框、关闭等的图像

# javascript - 如果一个是复选框，则捕获正确输入的值

> ID：12695689
> 
> 赞同：2
> 
> 时间：2012-10-02T18:00:47.670
> 
> 标签：javascript, jquery, html

给定以下标记：

```
<input name="active" type="hidden" value="0" />
<input id="active" name="active" type="checkbox" value="1" /> 
```

当复选框未选中并提交表单时，服务器将获得“活动”参数的值“0”。当复选框被选中并提交表单时，服务器将为“活动”参数获取值“1”。这工作得很好。

我想要做的是基于此在 JavaScript 中捕获正确的值。然而，诀窍是我不知道输入是否是复选框。就我的脚本而言，它只是作用于一组输入。

我在这里创建了一个 JSFiddle：http: [//jsfiddle.net/bcardarella/5QRjF/](http://jsfiddle.net/bcardarella/5QRjF/)来演示这个问题。

TL;DR 我想确保从每个输入中捕获的值是发送到服务器的实际值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T18:10:59.957

不知道您是否真的要检查复选框，但此代码有效：

```
$(function() {
    var getCheckBoxValue = function() {
        if ($('[name="active"]:checkbox').attr("checked")) {
            return $('[name="active"]:checkbox').val();
        } else {
            return $('[name="active"]').val();
            }
    }
    var result = $('#result');

    result.append($('<p/>', {text: 'Expected value 0, got: ' + getCheckBoxValue()}));

    $(':checkbox')[0].checked = true;

    result.append($('<p/>', {text: 'Expected value 1, got: ' + getCheckBoxValue()}));
}); 
```

基本上，如果复选框被选中，请使用它，否则，使用隐藏输入中的默认值。

**编辑**

把我的评论变成了小提琴，我还添加了另一个字段，一个文本字段，以更好地展示它背后的想法：http: [//jsfiddle.net/45qup/](http://jsfiddle.net/45qup/)

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T18:07:17.853

写下复选框的点击事件..

```
$('#active').on('click', function(){

     var isChecked = this.checked;
     var val = 0;
     if(isChecked){
         val = 1
     }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T18:08:48.490

尝试类似的东西

```
$("form#formID :input").each(function(){
   if ($(this).attr() == 'checkbox') return $(this).checked();
   else return $(this).val();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T18:54:09.680

不知道我是否愿意这样做 ;) ，但它有效：

```
var getCheckBoxValue = function() {
    var values = $('[name="active"]')
        .filter(':checked, :hidden')
        .map(function(){ 
            return parseInt($(this).val(), 10); 
        }
    );

    return Math.max.apply(Math, values);
} 
```

[http://jsfiddle.net/Xc5H7/1/](http://jsfiddle.net/Xc5H7/1/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-02T21:02:45.147

受@Deleteman 想法的启发，这是一种稍微简单的方法：

```
var getCheckBoxValue = function() {
    var input = $('[name="active"]');
    return $(input[1].checked ? input[1] : input[0]).val();
} 
```

这假设只有两个具有此名称的字段，这是对您尝试做的事情的合理假设。

它还假设隐藏字段总是出现在复选框之前，这也是，因为我认为，对于 Rails，这是一个理智的假设:)

# objective-c - 更改 iOS 模拟器设备名称

> ID：12695692
> 
> 赞同：0
> 
> 时间：2012-10-02T18:00:57.693
> 
> 标签：objective-c, xcode, cocoa-touch, ios-simulator

我正在做一个有很多视图控制器的大项目。通过这些视图的进展取决于在冗长的表格中填写的数据。

以我不那么聪明的方式，我正在自动填充数据，以便我可以加速到我正在处理的当前功能。我正在使用这样的条件......

```
if(
   [[[UIDevice currentDevice] name] hasPrefix:@"Rob"] ||
   [[[UIDevice currentDevice] name] hasPrefix:@"iPad Simulator"]
   )
{
    self.label.text = @"xxx";
    ...
} 
```

...这很好，因为我可以在我的 iPad 和模拟器上进行测试。现在客户也希望能够在他们的模拟器上进行测试，所以我不能留下我的自动填充。我认为最简单的解决方案就是更改模拟器的名称。

在模拟器上的 Settings.app 中，它是不可编辑的。我也没有看到 ~/Library/Application Support/iPhone Simulator/5.1 中的任何文件中出现文本“iPad Simulator”或“Simulator”。我已经对设置 plist 属性进行了搜索，但没有运气。

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T18:18:54.163

您将能够通过检查型号而不是当前设备的名称来检查它是否正在运行 iPhone 模拟器。应该执行以下操作：

```
if ([[[UIDevice currentDevice] model] isEqualToString:@"iPhone Simulator"]) {
    // Run for iPhone simulator
} 
```

**注意**：当您使用 iPad 模拟器时，您需要使用“iPad 模拟器”

此外，您当前使用 hasPrefix 的代码根本不安全。Rob 是一个通用名称，因此如果其他人的设备名称以 Rob 开头，那么它将暴露您的测试信息。我强烈建议您只针对模拟器使用此自动完成功能

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T18:25:25.943

只需创建一个新类并将您的加载逻辑放在那里。

之后，从您的委托 didFinishLaunchingWithOptions 方法调用此类。

有了这个，您可以随时或更好地评论上述调用，检查数据是否已经加载并忽略它。

# c# - Crystal Report 中的 OLE 对象

> ID：12695700
> 
> 赞同：1
> 
> 时间：2012-10-02T18:01:21.950
> 
> 标签：c#, asp.net, crystal-reports

我非常非常困惑如何在 Crystal Report 中使用 OLE 对象

我正在执行以下步骤：-

（RC - 插入 - OLE 对象）。从文件中选择：选择图像并将 Ole 对象放置到 Crystal Report。

但是在这样做之后，如果您尝试显示预览，则此处不会显示任何内容。

所以请描述一下这背后的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-06T12:06:36.210

例如，您想在 c#.net 中将 ole 对象添加到您的报告中您可以这样做首先您必须添加对项目的引用我通常使用 CRAXDRT.dll 和 CrystalDecisions.Shared.dll 然后您可以使用下面的代码添加您的ole 反对您的报告：

```
CRAXDRT.OleObject to3 = report2.Sections[i].AddPictureObject("YourPictureName.bmp", 0, 0);
to3.Height = 1600;  //just a number as height
to3.Width = 1250;   //just a number as width
to3.Left = 0;       //the left part of the object will be start from the value which you set for this property
to3.Top = 0;        //the top part of the object will be start from the value which you set for this property 
```

# list - GNU prolog如何将列表列表转换为单个列表

> ID：12695710
> 
> 赞同：0
> 
> 时间：2012-10-02T18:02:05.663
> 
> 标签：list, prolog

所以我有一个列表 [[],[1],[2,3]] 的列表，我想将它合并到一个列表中。

到目前为止，这是我尝试过的 GNU Prolog：

```
function([],[]).
function([Varlist|Vars],Var):-
  function(Varlist,Var1),
  function(Vars,Var2),
  append(Var1,Var2,Var). 
```

但是当我得到数字 1 时这失败了，现在已经尝试了几个小时。

希望你能帮忙:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T19:39:37.143

如果您考虑这种概括：

```
function1(L, L).
function1([Varlist|Vars],Var) :-
    function1(Varlist,Var1),
    function1(Vars,Var2),
    append(Var1,Var2,Var). 
```

你会看到我们得到的比要求的多：

```
?- function1([[],[1],[2,3]], R).
R = [[], [1], [2, 3]] ;
R = [[1], [2, 3]] ;
R = [1, [2, 3]] ;
R = [1, 2, 3] ;
false. 
```

我们应该只保留最后一个解决方案。没那么容易......恢复到原始代码：

```
function2([], []).
function2([Varlist|Vars],Var) :-
    ... 
```

如果我们假设 Varlist**是**一个列表，那么我们将立即将其用作 append/3 的参数来获取 Var，并且我们只是递归到“扁平化”Vars（剩余的列表列表）

```
function2([], []).
function2([Varlist|Vars], Var) :-
    function2(Vars, VarTemp1),
    append(Varlist, VarTemp1, Var). 
```

确实如此，我们解决了这个问题：

```
?- function2([[],[1],[2,3]], R).
R = [1, 2, 3]. 
```

但是有一个bug，不容易发现。事实证明，解决它也会使程序更有效率。看看你能不能找到bug*并*解决它...

# sql-server - SQL Server 事务日志在 Logging 中的使用

> ID：12695714
> 
> 赞同：-1
> 
> 时间：2012-10-02T18:02:26.947
> 
> 标签：sql-server, logging

我可以使用事务日志文件来显示数据更改的历史记录吗？我要报告数据。如果是，如何？我需要记录表记录中的更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T18:06:43.723

[DBMS 的事务日志](http://en.wikipedia.org/wiki/Transaction_log)的目的是在故障恢复期间使用它，并且 DB 用户通常无法访问它。

您应该在主数据表上维护自己的审计表，在主表上编写触发器以在数据更改时填充这些审计表，并使用审计表生成有关更改的报告。

# http - 需要从日志文件中提取数据并打印到另一个文件，然后寻找唯一性

> ID：12695717
> 
> 赞同：2
> 
> 时间：2012-10-02T18:02:45.300
> 
> 标签：http, parsing, logging, server

我有来自 http 访问日志的数据，我需要执行以下操作：

1.  在特定目录中的所有文件中搜索模式
2.  将该数据写入另一个文件
3.  检查新文件的唯一性并删除重复条目

数据如下所示：

> `<IP address> - - [09/Sep/2012:17:35:39 +0000] "GET /api/v1/user/followers?user_id=577670686&access_token=666507ba-8e88-423b-83c6-9df44bee2c8b& HTTP/1.1" 200 172209 <snip>`

我对以下的数字部分特别感兴趣：user_id=577670686，我想将其打印到一个新文件中（我还没有尝试过那个部分）......

我尝试使用 sed，但我并没有真正尝试操作数据，所以它看起来非常笨拙......查看 awk，但数据并不是真正基于列的，并且 $# 指定没有无法处理这些数据（它应该是 10 美元，对吗？）而且，我看不出有一种方法可以摆脱使用 $# 产生的部分数据。有人建议我使用 perl，所以我查看了 google 中的示例，但这对我来说太陌生了。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T18:09:56.073

用于`sed`提取相关部分，然后`sort`一`uniq`对报告：

```
$ sed -r 's/.*user_id=([0-9]+)&.*/\1/' access.log | sort | uniq -c 
```

这将打印所有唯一`user_id`值以及出现的总数。

# android - 用于 LG C710h 的 wpa_supplicant，可启用 ad hoc 网络

> ID：12695718
> 
> 赞同：1
> 
> 时间：2012-10-02T18:02:46.577
> 
> 标签：android, root

我一直在寻找一段时间，现在试图找到一个 wpa_supplicant 可以在我的 LG C710h 上工作并启用对 ad hoc 网络的检测。我已经尝试了在论坛上找到的 4 或 5 个，但它们都不起作用，我尝试启动我的 WiFi，但它只是挂起然后关闭。

我的 wpa_supplicant 的当前版本是 0.5.11，但我尝试[了 this](http://forum.xda-developers.com/showthread.php?t=754961)、[this](http://forum.xda-developers.com/showthread.php?t=1777413)和[this](http://forum.xda-developers.com/showthread.php?t=1806937)仅举几例，但没有一个有效。

我交换 wpa_supplicant 文件的方法如下：

*   下载 zip 并在 sdcard/download 中解压
*   关闭 WiFi
*   打开cmd7.exe
*   `adb shell`
*   `cp sdcard/download/wpa_supplicant system/bin/wpa_supplicant.new`
*   `mv system/bin/wpa_supplicant system/bin/wpa_supplicant.old`
*   `mv system/bin/wpa_supplicant.new system/bin/wpa_supplicant`
*   重启wifi

有没有人找到可以检测此设备的自组织网络的 wpa_suppliment？请告诉我。

提前感谢您提供有用的意见或建议。

# c++ - SDL_Window 没有命名类型

> ID：12695719
> 
> 赞同：4
> 
> 时间：2012-10-02T18:02:53.470
> 
> 标签：c++, window, sdl

我正在使用 GNU/Linux、C++、SDL 1.3 我正在尝试为“Window”类编写代码。

```
#ifndef WINDOW_H
#define WINDOW_H

#include "SDL/SDL.h"
#include "SDL/SDL_video.h"
#include "../other/Logger.h"

using namespace std;

class Window {
    public:
        Window(int width, int height, string title);
        ~Window();

    private:
        static const string TAG;
        SDL_Window* window; 
        int width;
        int height;
};

#endif /* WINDOW_H */ 
```

当我尝试编译时，我得到了这个错误：

```
In file included from Window.cpp:1:0:
Window.h:15:3: error: ‘SDL_Window’ does not name a type. 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T18:37:50.593

`SDL_Window`是来自 SDL 2 的数据类型。如果您使用的是 SDL 1.x，则需要以不同的方式编写代码。有关详细信息，请参阅[迁移指南](http://wiki.libsdl.org/moin.cgi/MigrationGuide)。

# java - 获取 CXF 端点的 URL

> ID：12695722
> 
> 赞同：7
> 
> 时间：2012-10-02T18:03:13.383
> 
> 标签：java, web-services, cxf

# 情况

我正在将带有 Apache CXF 2.6.2 的 Web 服务部署到 Tomcat 服务器。我正在使用 CXFServlet 和以下基于 Spring 的配置导出服务：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:jaxws="http://cxf.apache.org/jaxws"
       xsi:schemaLocation="
         http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
         http://cxf.apache.org/jaxws http://cxf.apache.org/schemas/jaxws.xsd">
    <import resource="classpath:META-INF/cxf/cxf.xml"/>
    <import resource="classpath:META-INF/cxf/cxf-servlet.xml"/>

    <jaxws:endpoint id="test_endpoint"
                    implementor="org.xyz.TestImpl"
                    address="/test"/>

    <bean id="testBean" class="org.xyz.TestBean">
        <property name="endpoint" ref="test_endpoint" />
    </bean>
</beans> 
```

在我的示例部署中，CXFServlet 使用相对路径 /service，例如 TestImpl 类实现的 Web 服务可作为[http://domain.com/tomcat-context/services/test](http://domain.com/tomcat-context/services/test) 使用 TestBean 类有一个端点设置器和它是由 Spring 设置的。

# 目标

我想使用端点字段确定 TestBean 类中的端点 test_endpoint 提供的地址（URL）。结果应该是“http://domain.com/tomcat-context/services/test”。

# 我试过的

```
log.info("Endpoint set to " + endpoint);
log.info("Address: " + endpoint.getAddress());
org.apache.cxf.jaxws.EndpointImpl ep = (org.apache.cxf.jaxws.EndpointImpl) endpoint;
log.info("Other Address: " + ep.getBindingUri());
log.info("Props: " + ep.getProperties()); 
```

但结果只是

```
Address: /Sachbearbeiter
Other Address: null
Props: {} 
```

如何获得完整的 URL？有没有办法不用我自己构建？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T03:49:51.930

您是否尝试过查看 CXF 消息以查看它是否在其中一个属性中？我将 Camel 与 CXF 一起使用，并获得如下实际的 CXF 消息：

```
Message cxfMessage = exchange.getIn().getHeader(CxfConstants.CAMEL_CXF_MESSAGE, Message.class); 
```

您应该能够像这样在普通的 CXF 中获取 CXF 消息：

```
PhaseInterceptorChain.getCurrentMessage() 
```

请参阅此 URL：[有没有办法从 CXF 中的 JAX-RS REST 资源访问 CXF 消息交换？](https://stackoverflow.com/questions/8750820/is-there-a-way-to-access-the-cxf-message-exchange-from-a-jax-rs-rest-resource-wi)

从那里，您可以获得以下属性：

```
org.apache.cxf.request.url=someDomain/myURL 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-21T10:33:57.017

您可以使用以下代码构造 url。您可以根据您的环境进行适当的编辑。

```
String requestURI = (String) message.get(Message.class.getName() + ".REQUEST_URI");
Map<String, List<String>> headers = CastUtils.cast((Map) message.get(Message.PROTOCOL_HEADERS));
List sa = null;
String hostName=null;
    if (headers != null) {
            sa = headers.get("host");
        }

        if (sa != null && sa.size() == 1) {
            hostName = "http://"+ sa.get(0).toString()+requestURI;
        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-27T12:02:09.493

我有同样的要求。但是，我认为仅从端点定义中检索主机和端口是不可能的。正如您所提到的，`endpoint.getAddress()`只是给出了服务名称而不是整个 url。这是我的理由：

让我们检查一个预期的端点地址：[http ://domain.com/tomcat-context/CXFServlet-pattern/test](http://domain.com/tomcat-context/CXFServlet-pattern/test)

CXF 运行时在 servlet 容器上运行。中间两部分 ( `tomcat-context/CXFServlet-pattern`) 实际上由 servlet 容器处理，可以从`ServletContext`. 您可以`org.springframework.web.context.ServletContextAware`在 Spring 中实现。最后一部分（即`test`服务名称）由 CXF 处理，可以通过. 例如，您的服务可能会同时收到对or的请求，而 CXF 运行时在部署服务时永远不会知道它。但是，当请求到来时，可以从其他帖子中提到的请求或消息中检索它。`endpoint.getAddress()``schema://host:port``http://domain.com``https://doman.com`

高温高压

# javascript - bootstrap.js 手风琴活动索引？

> ID：12695725
> 
> 赞同：0
> 
> 时间：2012-10-02T18:03:22.670
> 
> 标签：javascript, jquery, twitter-bootstrap

我正在尝试检索活动索引，以便我可以使用上一个/下一个按钮，并在手风琴的每个阶段错误检查表单值。

有没有办法获得手风琴的活动索引？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T18:17:29.013

```
var index = $('#accordion .in').parent().index(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T18:16:26.477

您可以使用以下方法获取手风琴组手风琴组：

```
var accordionItem = $('.accordion .accordion-body.in:first').parents('.accordion-group'); 
```

现在您可以获得手风琴项的索引。

# html - 图像超出容器 div 范围

> ID：12695726
> 
> 赞同：27
> 
> 时间：2012-10-02T18:03:25.200
> 
> 标签：html, css

有人可以看看下面的小提琴：http: [//jsfiddle.net/R4bCy/1/](http://jsfiddle.net/R4bCy/1/)

我认为一个 div 应该调整它的高度以适应它的元素，除非元素是绝对定位的。

为什么 div 没有扩展到图像的全高？

我需要将图像向右对齐。我知道如何做到这一点的唯一方法是`align='right'`,`position:absolute; right: 0;`和`float:right`，所有这些都使包含的 div 不会将其高度调整为图像高度。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-02T18:09:18.550

```
.intro {
margin: 10px;
outline: 1px solid #CCC;
background: #A00;
color: #FFF;
height:auto;
overflow:auto;
}
​.img{
float:right;
height:auto;
}​

<div class="intro">
    <div class="img"> <img src="http://1.bp.blogspot.com/_74so2YIdYpM/TEd09Hqrm6I/AAAAAAAAApY/rwGCm5_Tawg/s1600/tall+copy.jpg"    style="margin: 10px 10px; "/></div>

  <p>Sorry, but the page you requested could not be found.</p>
</div>​​​​​​​​​​ 
```

[演示](http://jsfiddle.net/afshinprofe/R4bCy/7/)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-02T18:23:55.520

> “为什么 div 没有扩展到图像的全高？”

因为浮动会与块重叠，所以只有块格式化上下文包含浮动。（您可以在这里找到整个主题的一个很好的概述：[http](http://www.yuiblog.com/blog/2010/05/19/css-101-block-formatting-contexts/) ://www.yuiblog.com/blog/2010/05/19/css-101-block-formatting-contexts/ ）

关于解决手头的问题：

这`align=right`实际上会导致 img 存在`float: right`（该`align`属性已被弃用，应使用 css）。

要将浮动图像包含在其父级中`div`，您需要让父级`div`建立块格式化上下文（块格式化上下文包含嵌套的浮动）或在`img`样式为`clear: right`.

创建块格式化上下文的一个简单解决方案也是浮动父`div`级，尽管在这种情况下我首选的解决方案是简单地将其设置`overflow`为`hidden`（也导致块格式化上下文）。

查看更新的小提琴[http://jsfiddle.net/R4bCy/8/](http://jsfiddle.net/R4bCy/8/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-02T18:14:42.243

您需要做的是在 p 标签之后添加，

```
<div style="clear:both;"></div> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T18:06:40.453

哎呀，道歉，发布并且您编辑了您的问题 - 我相信 align right 是浮动的（您应该使用 float:right 和某种[clearfix](http://css-tricks.com/snippets/css/clear-fix/)）。

示例：http: [//jsfiddle.net/R4bCy/5/](http://jsfiddle.net/R4bCy/5/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-02T18:21:57.223

这就是我相信你想要的：http: [//jsfiddle.net/R4bCy/6/](http://jsfiddle.net/R4bCy/6/)

如果您希望文本在左侧，图像浮动到右侧，请使用您的 CSS：http: [//jsfiddle.net/R4bCy/15/](http://jsfiddle.net/R4bCy/15/)

您还可以`div`在一个容器中包含两个宽度为 50% 的 s `div`。这将使您在放置图像时有更多的灵活性，因为文本和图像都将具有自己`div`的具有独立属性的可修改 s

# objective-c - 跨不同平台管理 iOS 应用

> ID：12695731
> 
> 赞同：0
> 
> 时间：2012-10-02T18:03:42.757
> 
> 标签：objective-c, ios, xcode, ipad, ios6

我目前有一个 iOS 5.0 应用程序，并且对跨多个平台和多个操作系统升级部署该应用程序有一些疑问。我想知道是否有一个干净且可配置的系统允许我让一个项目处理部署到 iPhone iOS5 和 iOS6 以及最新的 iPad iOS，而不会到处都有丑陋的选择语句来确定应用程序当前正在运行的平台。所以我想知道是否有办法从开发人员管理代码，这样我就可以支持我的应用程序的所有版本/平台特定功能，具体取决于它当前正在运行的平台/版本（例如自动切换如果应用程序在带有 iOS 6 的 iPhone 5 上运行，则使用较长尺寸的背景图像）

有没有办法拥有这个功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T18:14:26.797

我对你的问题有点困惑，但我会解释我所知道的。Xcode 已经有一种方法可以根据用户运行的设备/iOS 版本来更改您的应用程序。如果您使用故事板，那么它将根据屏幕是否支持 Retina 以及屏幕大小自动调整您的应用内容的大小。此外，您可以为 iPad 创建一个故事板，这样当您运行该应用程序时，它将使用 iPad 版本。它还将更改应用程序图标。只需转到项目设置并向下滚动，直到找到图标和午餐图像。

现在，如果您的意思是要直接使用源代码更改应用程序的工作方式，那么就没有简单的方法来管理它。最好的选择是使用 Storyboard，因为它可以很容易地根据您使用的设备调整内容的大小。

# haskell - 我可以在当前的 Haskell 平台上使用更新的 GHC 吗？

> ID：12695742
> 
> 赞同：5
> 
> 时间：2012-10-02T18:04:14.513
> 
> 标签：haskell, ghc

我有最新的 Haskell Platform (2012.2.0.0) 64bit OSX。但是.. 我[在 Mac 上遇到了 64 位编译器的问题](http://hackage.haskell.org/trac/ghc/ticket/7040)，这意味着`yesod devel`它一启动就会崩溃。

我无法切换到 32 位版本，因为让 GTK+ 工作的问题完全不同。

我看到 GHC 的问题在 7.6.1 中已修复，但最新的 HP 附带 7.4。那么，我可以在工作的 HP 安装之上安装 GHC 7.6，还是会搞砸一切？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T18:14:47.363

是的，只需将其安装在单独的目录中，并记住每次您想将其与不同版本一起使用时更改路径，或者更改您的 bin 中 simulink 的名称，就像 mac ports 所做的那样，例如在我的 bin 中`ghc`，`ghc-7.4.1`并且`ghc-7.4.2`这些都是不同的版本。

所以在你的情况下，我会在 /bin 中创建两个模拟链接， `ghc-32`并`ghc-64`为两个单独的版本中的每一个

同样重要的是不要忘记更改每个构建的安装前缀，通常`--prefix`在编译 GHC 时表示

# android - 带有单选按钮的 Android 微调器适配器 setDropDownViewResource 自定义布局

> ID：12695746
> 
> 赞同：1
> 
> 时间：2012-10-02T18:04:26.450
> 
> 标签：android, android-widget, android-ui

我在对话模式下使用 Spinner。我使用 setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item); 为 Spinner 设置 SimpleCursorAdapter 这很好用。

现在，我尝试传递我的自定义布局，而不是 simple_spinner_dropdown_item，它也可以很好地工作。

但是有一个但是......它没有原始 simple_spinner_dropdown_item 的单选按钮。是否可以在显示微调器对话框时选择的自定义 spinner_dropdown_item 内添加单选按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T04:07:04.530

是的，它可能，但你必须为 spinner 定义另一个类。看看[这个](https://stackoverflow.com/questions/867518/how-to-make-an-android-spinner-with-initial-text-select-one)

您还有另一种选择来满足您的要求。那是`Alert dialog`

只需在 Android 中查看这个[带有单选按钮的警报对话框窗口，](http://wptrafficanalyzer.in/blog/alert-dialog-window-with-radio-buttons-in-android/)以及[如何在 android 中创建自定义和下拉类型对话框和对话框](http://androidtrainningcenter.blogspot.in/2012/07/how-to-create-custom-and-default-alert.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T19:52:59.227

好吧，我找到了解决方案。ListView（微调器对话框内的内容）将检查您的 View 是否为 Checkable 并调用 setChecked。由于 android.R.layout.simple_spinner_dropdown_item 是可检查的，它可以工作。因此，对于我的自定义列表项，我创建了实现 Checkable 的 LinearLayout

```
public class CheckableLinearLayout extends LinearLayout implements Checkable
{
private boolean _isChecked = false;

public CheckableLinearLayout(Context context)
    {
    super(context);
    }

public CheckableLinearLayout(Context context, AttributeSet attrs)
    {
    super(context, attrs);
    }

@Override
public void setChecked(boolean checked)
    {
    _isChecked = checked;

    for (int i = 0; i < getChildCount(); i++)
        {
        View child = getChildAt(i);
        if (child instanceof Checkable)
            {
            ((Checkable) child).setChecked(_isChecked);
            }
        }
    }

@Override
public boolean isChecked()
    {
    return _isChecked;
    }

@Override
public void toggle()
    {
    _isChecked = !_isChecked;
    }

} 
```

因此 ListView 调用 setChecked 并将其传播到子视图，并且我的 CheckBox / RadioButton 将被正确选中/取消选中。

# c# - 在asp.net + jquery中实现自动注销+警告？

> ID：12695747
> 
> 赞同：9
> 
> 时间：2012-10-02T18:04:41.547
> 
> 标签：c#, php, javascript, jquery, asp.net

许多网站（例如银行网站） - 在会话即将到期之前实施注销 + 1 分钟警告。（20 分钟）

（*这个话题讨论得不多——我看到的唯一问题是使用 asp.net 会员资格——我不使用*）

每个用户都会有一个`session["lastActionTime"]`

此会话将更新为当前*时间*：

*   页面已加载
*   Ajax 请求已执行（由于用户操作）

现在 - 当页面加载时，我设置会话值。（假设是 19:00）

此外，对于每个 ajax 请求（我的站点不创建回发 - 仅 ajax jquery） - 我使用 ASHX 处理程序将会话`IRequiresSessionState`更新为当前时间。

我使用这样的东西：

```
jQuery(document).ajaxStart(function(){
    gotoHandlerAndUpdateSessionTime();
}) 
```

现在 - 警告消息前 1 分钟的部分（“*您的会话即将到期*”）：

每个 ajax 返回事件或事件 - 我在*javascript*中`page load`激活：分钟（20-1=19）。（当然 - 取消所有 prev setIntervals...）*`setInterval``[sessionTime-1]`*

 *现在当事件（setInterval）发生时 - 到期时间前 1 分钟：（19 分钟）

我显示一个警告 div ，用户可以选择`exit`或`stay`。

问题 ：

1）如果用户没有在警告 div 上按任何内容，我将如何（*在显示 div 1 分钟后*）将他注销？我应该在显示 div 时打开 1 分钟的 setTimeout 然后（如果没有按下）将他注销吗？

2）这是正确的做法吗？

3）在这个奇怪的故事中不应该有饼干吗？:-)

*（请 - 没有会员资格 - 或表单身份验证）。我也将这个问题标记为 PHP，因为我知道它也与 php 程序员有关，我想听听他们的知识。*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T18:07:51.237

Royi，要回答你的两个问题，我会说是。我已经多次构建了这些（通常使用 Forms Auth），但基本上你有一个倒计时以显示第一个警告的计时器，然后是另一个倒计时并让用户 X 秒回答的计时器。我通常将 X 秒倒计时放在警告消息上，这样他们就可以看到他们还剩下多少时间。如果他们在分配的时间内没有回答，则会调用 Logout.ashx（或其他）来破坏会话，然后 javascript 可以将它们重定向回登录页面。我希望这会有所帮助。

关于您的第三个问题，只要您正在跟踪会话，您就不需要 cookie。当 javascript 计时器倒计时时，只需在 PHP 中执行 session_destroy() 或在 C# 中执行 Session.Abandon() 即可。

这是我在我的一个网站上使用的一些代码（可能不是最干净的，但你明白了）：

```
var timeoutPolled = 0;
var timeoutSeconds = 10;
var countDownCounter = 61;
var timeoutBetweenPolls = 5000;
var stopCountDown = false;

function InitializePollTimer(timeoutMinutes) {
    timeoutSeconds = timeoutMinutes * 60;

    StartPollTimer();
}

function StartPollTimer() {
    setTimeout(PollForTimeout, timeoutBetweenPolls);
}

function PollForTimeout() {
    timeoutPolled++;

    if ((timeoutPolled * timeoutBetweenPolls) > 1 * (timeoutSeconds * 1000)) {
        $("#timeoutDialog").dialog({
            autoOpen: false,
            bgiframe: true,
            resizable: false,
            height: 250,
            draggable: false,
            modal: true,
            zindex: 99999999,
            position: 'top',   
            open: function(event, ui) { $(".ui-dialog-titlebar-close").hide(); },       
            buttons: {
                "Continue using Website?": function() {
                    StopCountDown();

                    $.ajax({
                        type: "GET",
                        url: "RefreshSession.aspx",
                        cache: false
                    });

                    $(this).dialog("close");

                    timeoutPolled = 0;
                    StartPollTimer();
                },
                "Logout": function() {
                    Logout();
                }
            }
        });

        $("#timeoutDialog").dialog("open");

        countDownCounter = 61;

        CountDown();
    }
    else {
        StartPollTimer();
    }
}

function CountDown() {
    if (stopCountDown) {
        stopCountDown = false;
    }
    else {
        countDownCounter--;
        $("#countdownTimer").html(countDownCounter);

        if (countDownCounter > 0) {
            setTimeout(CountDown, 950);
        }
        else {
            Logout();
        }
    }
}

function StopCountDown() {
    stopCountDown = true;
}

function Logout() {
    window.location.href = 'Logout.aspx';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T18:31:59.073

有可能我不会告诉你任何你不知道的事情，但无论如何这是我的两分钱 -

在用户没有按下警告按钮时，有两个区域：(1) 当前显示在屏幕上的信息 (2) 更多信息的附加请求被阻止 - 首先，如果没有，javascript 计时器应该转发到 LoggedOut 页面通过单击警告对话框的肯定结果取消，其次，服务器端逻辑肯定应该检查当前请求是否处于登录用户的上下文中。

至于 cookie，如果您没有更改会话状态的默认设置，听起来您已经在使用了 - 我认为它被称为 .ASPNET 但我可能错了，您可以使用代理工具进行检查。*

# entity-framework - 无法通过将 Object DataSource 拖到 WinForm 来创建 Gridview

> ID：12695754
> 
> 赞同：4
> 
> 时间：2012-10-02T18:05:09.443
> 
> 标签：entity-framework, frameworks, entity

我想通过将它们各自的 DataSources 拖到窗体上来创建一组 DataGridView 控件。我会为一个对象及其导航属性之一（来自数据源）执行此操作，因此在主从关系中有两个网格。

移至 Visual Studio 2012（和 EF 5.0）后，第一个网格按预期出现（使用导航器）。但是，对于“详细”网格，只出现两列（“Count”和“IsReadOnly”）。我已经尝试过使用其他表/对象，但遇到了同样的问题。我试过“编辑列”和“添加列”不可用。我以北风为例。我想要一个表单中的 2 个 datagridview。一个用于客户，另一个用于相关订单。一个典型的主/细节视图。

1.  我在项目（edmx）文件中添加了一个模型。

2.  为模型添加了一个新的数据源。两个对象。客户和订单表！

3.  将客户实体拖动为 datagridview。所有字段（属性）都在网格中。

4 当从客户实体而不是订单实体本身拖动订单时，只有“count”和“readonly”两列

上述过程在 linq to sql VS 2012、EF 4.0、.NET 4.5 中运行良好。但不适用于 EF 5.0。

和，

[这些步骤与 beth massi 在http://blogs.msdn.com/b/bethmassi/archive/2008/12/10/master-details-with-entity-framework-explicit-load.aspx](http://blogs.msdn.com/b/bethmassi/archive/2008/12/10/master-details-with-entity-framework-explicit-load.aspx)中描述的方式完全相同但是这不是延迟加载或急切加载的问题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T15:30:16.803

在您尝试使用的实体的类中，将导航属性类型更改为 ObservableCollection。

由此：

```
public Customer()
    {
        this.CustomerAddresses = new HashSet<CustomerAddress>();
    }

    public virtual ICollection<CustomerAddress> CustomerAddresses { get; set; }
} 
```

对此：

```
public Customer()
    {
        this.CustomerAddresses = new ObservableCollection<CustomerAddress>();
    }

    public virtual ICollection<CustomerAddress> CustomerAddresses { get; set; }
} 
```

由于这是自动生成的代码，您还需要更改代码生成文件中的一些规则。尝试手动进行这些更改以确保它们首先工作，然后进行更改。对我来说，我必须对我的 .tt 文件进行以下更改

添加使用 System.Collections.ObjectModel 通过添加下面提到的行。

```
return inHeader == string.IsNullOrEmpty(_code.VsNamespaceSuggestion())
        ? string.Format(
            CultureInfo.InvariantCulture,
            "{0}using System;{1}" +
            "{2}",
            inHeader ? Environment.NewLine : "",
            includeCollections ? (Environment.NewLine + "using System.Collections.Generic;") : "",
            includeCollections ? (Environment.NewLine + "using System.Collections.ObjectModel;") : "",
            inHeader ? "" : Environment.NewLine)
        : ""; 
```

并将您的 HastSet 声明更改为 Observable Collection

```
this.<#=code.Escape(navigationProperty)#> = new ObservableCollection<<#=typeMapper.GetTypeName(navigationProperty.ToEndMember.GetEntityType())#>>(); 
```

另外，将此处的 ICollection 更改为 ObservableCollection

```
navigationProperty.ToEndMember.RelationshipMultiplicity == RelationshipMultiplicity.Many ? ("ICollection<" + endType + ">") : endType, 
```

您的代码生成文件可能与我的不同，但这些代码部分应该让您了解要在文件中搜索的内容。

# c++ - c++ virtual classes：有趣的点

> ID：12695763
> 
> 赞同：5
> 
> 时间：2012-10-02T18:05:48.737
> 
> 标签：c++, polymorphism, virtual, virtual-inheritance

请告诉我为什么以下程序的输出如下。我没有得到 C++ 中的虚拟类。观察下面的代码：

```
class B
{
public:
    B(char c = 'a') : m_c(c) {}

public:
    char get_c() const { return m_c; }
    void set_c(char c) { m_c = c; }

private:
    char m_c;
};

class C: public B
{ };

class D: public B
{ };

class E
    : public C
    , public D
{ };

int main()
{
    E e;
    C &c = e;
    D &d = e;
    std::cout << c.get_c();
    d.set_c('b');
    std::cout << c.get_c() << std::endl;
    return 0;
} 
```

O/P：aa 我希望输出是 ab。得到“aa”的原因是什么？

如果我有 c.set_c('b') 而不是 d.set_c('b') 那么我将得到 O/P ：“ab”，在这里，我也不明白为什么会这样。c、d 都只指一个对象。

```
class C:virtual public B{};
class D:virtual public B{}; 
```

如果 C 类、D 类实际上是从 B 继承的，那么 O/P 将始终为“ab”

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-02T18:09:59.787

`B`in有两份`E`，一份是 via `C`，一份是 via `D`。当您调用时`d.set_c('b')`，您正在修改`m_c`in`D`的`B`。当你打电话时`c.get_c()`，你会得到`m_c`in `C`，`B`它没有改变。

当您从虚拟中创建`C`和`D`继承时`B`，它解决了问题，因为只有一个`B`in副本`E`。

这是相关的：http: [//www.parashift.com/c++-faq/virtual-inheritance-where.html](http://www.parashift.com/c++-faq/virtual-inheritance-where.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T18:35:04.757

考虑`class C : public B`然后指向一个以 as 开头`C* c = new C`的存储也是。这是为了`c``B``C*``B*``true``class D : public B`.

现在为`class E : public C, public D`和`E* e = new E()`。记忆`e`是这样的：

```
{| B of C | other members of C }{| B of D | other members of D} 
```

正如您在上面的例子中看到的那样，我们有 2 个实例，`B`一个用于`C`，另一个用于`D`，现在很明显，当您调用时，`((D*)e)->set_c( 'b' )`您只更改`B`实例，`D`并且`B`实例`C`将保持不变。

现在当你说`class C : public virtual B`，C++`B`与任何其他虚拟继承的类共享实例`B`。所以在这种情况下`e`是这样的：

```
 | shared B |
    | C members | | D members | 
```

正如你所看到的，我们只有一个`B`这样的呼唤`((C*)e)->set_c`，并且`((D*)e)->set_c`都将采取同样的行动`B`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T18:09:47.110

我不确定我是否理解这个问题，但你的问题包含答案，将 B 声明为 C 和 D 的虚拟基础，你就明白了。

```
#include <iostream>

class B
{
public:
    B(char c = 'a') : m_c(c) {}

public:
    char get_c() const { return m_c; }
    void set_c(char c) { m_c = c; }

private:
    char m_c;
};

// note virtual inheritance
class C: virtual public B
{ };

// note virtual inheritance
class D: virtual public B
{ };

class E
: public C
, public D
{ };

int main()
{
    E e;
    C &c = e;
    D &d = e;
    std::cout << c.get_c() << std::endl;;
    d.set_c('d');
    std::cout << c.get_c() << std::endl;
    c.set_c('c');
    std::cout << d.get_c() << std::endl;
    return 0;
} 
```

这会产生你想要的输出，不是吗？

```
a
d
c 
```

# objective-c - 使用 Objective-C / Cocos2D 绘制一个实心正方形

> ID：12695766
> 
> 赞同：1
> 
> 时间：2012-10-02T18:06:32.923
> 
> 标签：objective-c, cocos2d-iphone, fill

我拼命地尝试用 Cocos2D 绘制一个实心正方形，但我无法找到一个关于如何做到这一点的示例：

这是我的绘制方法。我成功地画了一个正方形，但我无法填充它！

我读过我需要使用一个`glDrawArrays`带有参数的OpenGL方法`GL_TRIANGLE_FAN`来绘制一个填充的正方形，这就是我尝试过的。

```
-(void) draw
{
    // Disable textures - we want to draw with plaine colors
    ccGLEnableVertexAttribs( kCCVertexAttribFlag_Position | kCCVertexAttribFlag_Color );

    float l_fRedComponent = 0;
    float l_fGreenComponent = 0;
    float l_fBlueComponent = 0;
    float l_fAlphaComponent = 0;
    [mpColor getRed:&l_fRedComponent green:&l_fGreenComponent blue:&l_fBlueComponent alpha:&l_fAlphaComponent];

    ccDrawColor4F(l_fRedComponent, l_fGreenComponent, l_fBlueComponent, l_fAlphaComponent);
    glLineWidth(10);

    CGPoint l_bottomLeft, l_bottomRight, l_topLeft, l_topRight;
    l_bottomLeft.x = miPosX - miWidth / 2.0f;
    l_bottomLeft.y = miPosY - miHeight /  2.0f;
    l_bottomRight.x = miPosX + miWidth /  2.0f;
    l_bottomRight.y = miPosY - miHeight /  2.0f;
    l_topRight.x = miPosX + miWidth /  2.0f;
    l_topRight.y = miPosY + miHeight /  2.0f;
    l_topLeft.x = miPosX - miWidth /  2.0f;
    l_topLeft.y = miPosY + miHeight /  2.0f;

    CGPoint vertices[] = { l_bottomLeft, l_bottomRight, l_topRight, l_topLeft, l_bottomLeft };
    int l_arraySize = sizeof(vertices) / sizeof(CGPoint) ;

    // My old way of doing this, it draws a square, but not filled.
    //ccDrawPoly( vertices, l_arraySize, NO);

    // Deprecated method :(
    //glVertexPointer(2, GL_FLOAT, 0, vertices);

    // I've found something related to this method to replace the deprecated one, but can't understand this method !
    glVertexAttribPointer(kCCVertexAttrib_Position, 3, GL_FLOAT, GL_FALSE, 0, vertices);
    glDrawArrays(GL_TRIANGLE_FAN, 0, l_arraySize);  
} 
```

我找到了一些旧版本的 Cocos2D (1.0) 的示例，但是由于它“最近”升级到了[2.0 版](http://www.cocos2d-iphone.org/wiki/doku.php/prog_guide%3amigrate_to_v2.0)，所以我发现的所有示例都给了我编译错误！

任何人都可以在这里启发我的道路吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T19:21:27.740

我不知道今天是“重新发明轮子”日。:)

```
ccDrawSolidRect(CGPoint origin, CGPoint destination, ccColor4F color); 
```

如果您要发疯并想绘制填充的多边形，那么还有：

```
ccDrawSolidPoly(const CGPoint *poli, NSUInteger numberOfPoints, ccColor4F color); 
```

“solid”方法是 Cocos2D 2.x 中的新方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T18:11:28.407

您可以简单地创建具有所需内容大小的 CCLayerColor 实例并将其用作填充正方形。在其他情况下，您必须对多边形进行三角剖分（如果是正方形，它将有两个三角形）并使用 OpenGL 绘制它。

---编辑没有测试这段代码，用谷歌找到它，但它似乎工作正常。

[http://www.deluge.co/?q=cocos-2d-custom-filled-polygon](http://www.deluge.co/?q=cocos-2d-custom-filled-polygon)

# bash - 使用“nohup”在后台运行“top”命令

> ID：12695770
> 
> 赞同：6
> 
> 时间：2012-10-02T18:06:40.333
> 
> 标签：bash, signals, nohup

我在使用 nohup 在后台运行 top 命令时遇到问题。首先，我在本地运行它，如

```
nohup top & 
```

`nohup.out`它用文字抱怨`top: failed to get tty`。我的最终目标是在远程机器上运行 top ，比如

```
nohup ssh -t user@hostname top & 
```

目前，上述命令也失败了

```
Pseudo-terminal will not be allocated because stdin is not a terminal.^M 
TERM environment variable not set 
```

有任何想法吗？

PS：我运行这个命令`machineB`从`machineA`. `machineA`总是活着，但并不总是登录。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-02T18:31:36.947

你试过top命令的-b（批处理模式）开关吗？

# linux-kernel - 在linux内核中实现彩票调度算法

> ID：12695775
> 
> 赞同：2
> 
> 时间：2012-10-02T18:07:02.183
> 
> 标签：linux-kernel, kernel

我必须为内核实现彩票调度算法。这个关于 SO 的[问题](https://stackoverflow.com/questions/3086864/how-to-create-a-new-linux-kernel-scheduler)很有帮助，但在旧版本的内核上。此外，我想知道其他调度算法在哪里实现。我的意思是我可以在内核源代码中找到与循环调度相关的源代码。

任何帮助

# java - 将 Doubles 数组转换为 BigDecimals 数组

> ID：12695776
> 
> 赞同：1
> 
> 时间：2012-10-02T18:07:04.373
> 
> 标签：java, arrays, double, type-conversion, biginteger

我正在尝试将一个值数组转换为一个`Double`值数组`BigInteger`，但我只是不知道如何准确地告诉 java 创建一个`BigInteger`与原始数组长度相同的新空数组。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T18:08:39.193

```
BigInteger[] dest = new BigInteger[src.length]; 
```

`src`原始双数组在哪里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T18:08:51.637

因为你有你的长度`Double array`。你可以把它作为你的`BigInteger`数组的大小。

```
BigInteger[] bigIntegerArr = new BigInteger[doubleArray.length]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T18:08:56.690

```
BingInteger[] secondArray = new BigInteger[doublArray.length]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T18:09:22.170

使用双精度数组的长度对其进行初始化。

```
Double[] doubleArray = ...;
BigInteger[] bigIntArray = new BigInteger[doubleArray.length]; 
```

# android - 您将如何更改 Android AVD 设置以使模拟器像在真正的 android 设备上一样流畅？

> ID：12695777
> 
> 赞同：1
> 
> 时间：2012-10-02T18:07:05.660
> 
> 标签：android, avd, smooth, setting

> **可能重复：**
> [慢速安卓模拟器](https://stackoverflow.com/questions/1554099/slow-android-emulator)

**这是我的设置：** 名称 = JellyBean_x86，目标 = Android 4.1 - API 级别 16，CPU/ABI = Intel Atom (x86)，SD 卡 = 2048 MB，启用快照，皮肤 = WVGA800，抽象 LCD 密度 = 240，最大 VM 应用程序堆大小 48，设备内存大小 = 512。

它在我的笔记本电脑上运行英特尔酷睿 i5-M540 和 8 GB RAM 时运行良好，但它并不像我想象的那样流畅和快速。事实上，将 CPU 设置从 x86 更改为 ARM 不会产生显着差异。我们还能做些什么来调整它们？

谢谢，

# ios - iOS的登录流程

> ID：12695778
> 
> 赞同：0
> 
> 时间：2012-10-02T18:07:07.817
> 
> 标签：ios

在我的最后一个项目中，我正在为一个应用程序工作。

在启动时，有一个用于登录过程的视图控制器。该页面包含两个文本字段和一个按钮。一个文本字段用于用户名，另一个用于密码。我已经连接到网络服务。

现在我想在用户用正确的用户名和密码填写两个文本字段后进行设置，他需要单击按钮登录。在这里，我想使用 if else 语句对按钮执行一个操作。这里应该是什么：

```
if (username and password == YES)
go to next page
else (username and password == NO)
alert 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T18:17:46.677

Wazza，来 stackoverflow 完成作业并不酷。

UITextFiled 有一个属性文本，即 NSString。NSString 有一个称为长度的属性。

所以你应该面对类似的事情

```
- (void) loginAction:(id)sender
{
   if ([self.usernameTextField.text length] > 0 &&
       [self.passwordTextField.text length] > 0)
   {
      //Call webservice to login
   }
   else {
      //Show alert
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T18:19:54.557

您应该遵循以下步骤：

*   开放式界面构建器
*   右键单击您的登录按钮
*   选择您需要的活动，可能是**Touch Up Inside**
*   将其拖到 File`S Owner 并将其与您的 IBAction 连接起来，应该如下所示：

```
- (IBAction)performLogin:(id)sender)
{
   // your logic here
} 
```

# fonts - 字体大小波动和不一致

> ID：12695781
> 
> 赞同：0
> 
> 时间：2012-10-02T18:07:21.843
> 
> 标签：fonts, sencha-touch, extjs, sencha-touch-2, font-size

我目前正在开发一个由 ST2 驱动的网络应用程序，并且在整个应用程序中字体大小的一致性遇到了一些奇怪的事情。最初我认为这可能是由于我在自定义 SASS 文件中设置的字体大小属性，但是当我从我的 SASS 文件中删除所有“字体大小”属性时，我仍然看到字体呈现不一致。

我们正在从多个“根”视图推送视图，但没有设置 font-size 属性，我希望所有字体都呈现相同的大小。我错过了什么吗？请注意，我不是在谈论跨多个设备的字体大小……这通常是应用程序本身的字体大小。

查看附加的图像和到达每个视图的路径。它们是具有相同组件的完全相同的视图——唯一的区别是用户到达那里的路径。请记住，我已删除所有自定义字体属性，因此此时它纯粹是引用 Sencha 的样式（已在 Chrome、iOS 模拟器和 iPhone 本地运行应用程序上进行了测试）。

**用户路径：**仪表板视图（根视图）> 团队资料

![在此处输入图像描述](../Images/a1eb9bc7436382b90d662f56bdb74953.png)

**用户路径：**仪表板视图（根视图）> 程序视图（根视图）> 团队资料

![在此处输入图像描述](../Images/d3c9b441091689b8cd628c511d7734f3.png)

请注意第二个“团队简介”视图的字体大小如何？由于没有为整个应用程序设置字体，无论您如何到达视图，我都希望它是相同的。有人可以向我解释一下这里可能发生了什么吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T00:18:01.587

我发现我的问题不包括`styleHtmlContent: true`在具有较大字体的视图的配置中。如果您没有在视图中设置该选项，请添加它并查看它是否有所作为。

# jakarta-ee - 如何将安全主体从 WebSphere 传播到 JBoss？

> ID：12695787
> 
> 赞同：1
> 
> 时间：2012-10-02T18:07:49.813
> 
> 标签：jakarta-ee, websphere, ejb-3.0, java-ee-6, jaas

我正在构建一个需要调用托管在 JBoss 4 上的远程 EJB 3.0 的应用程序，并且我需要将 Principal 从 WebSphere 传播到 JBoss。我编写了一个自定义登录模块和一个自定义主体，并将它们注册到 WebSphere。

从 WAS 环境中的任何层（Web 或 EJB 层），我可以恢复使用 LoginModule 进行身份验证的主体，因此我可以从 WebSphere 执行以下操作：

```
Principal principal = context.getCallerPrincipal();
String name = principal.getName(); .... 
```

这将正确返回经过身份验证的主体及其属性。

我还可以从 WebSphere 成功访问托管在 JBoss 中的远程 EJB，但在这种情况下，问题是每当我尝试从 JBoss 恢复 Principal 时，调用 getCallerPrincipal() JBoss 容器都会引发异常：

```
[10/2/12 12:56:37:594 BRT] 0000007f BusinessExcep E   CNTR0020E: EJB threw an unexpected (non-declared) exception during invocation of method "remoteJBossEJBCall" on bean "BeanId(JBossRemoteEJBCall#ejbModule.jar#WAS_EJB, null)". Exception data: javax.ejb.EJBException: java.lang.IllegalStateException: No valid security context for the caller identity; nested exception is: java.lang.IllegalStateException: No valid security context for the caller identity 
```

……

我已经设置了 WebSphere Global Security 来传播安全属性，但这也没有解决问题：

![WebSphere 出站安全传播](../Images/b6fab8a4a9d6fbd8029407af20ebed97.png)

我已经完成了记录在以下位置的所有步骤：

[http://pic.dhe.ibm.com/infocenter/wasinfo/v8r5/topic/com.ibm.websphere.nd.multiplatform.doc/ae/tsec_enablesecattprop.html](http://pic.dhe.ibm.com/infocenter/wasinfo/v8r5/topic/com.ibm.websphere.nd.multiplatform.doc/ae/tsec_enablesecattprop.html)

但仍然无法正常工作。

# scala - 大文件的 Play2 迭代器和枚举器流式传输失败

> ID：12695788
> 
> 赞同：1
> 
> 时间：2012-10-02T18:08:10.393
> 
> 标签：scala, streaming, playframework-2.0, enumerator, iterate

> **可能重复：**
> [Play2 Framework 代理向客户端流式传输内容在流式传输完成后保持连接打开](https://stackoverflow.com/questions/12736320/play2-framework-proxy-streaming-content-to-client-keeps-connection-open-after-st)

我正在将一个 11mb 的文件从 Web 服务流式传输到客户端。这本质上是一个直通代理。这是我的代码：

```
def getStreamEnumerator(streamUrl: String, mimeType: String) = {
    Akka.future {
        val dataContent = Enumerator.imperative[Array[Byte]]()

        WS.url(streamUrl).withHeaders("Accept"->mimeType).get { response =>
            Iteratee.fold[Array[Byte], PushEnumerator[Array[Byte]]](dataContent)({
                (pipe, bytes) => {
                    println(bytes.length)
                    pipe.push(bytes)
                    pipe
                }
            })
        }.orTimeout("Oops", 20000L).map {eitherPromiseOrTimeout =>
            println(eitherPromiseOrTimeout)
            dataContent.close()
        }
        dataContent
    }
} 
```

我称之为：

```
 getStreamEnumerator(imageUrl, "image/png").map { e =>
            Ok.stream(e).withHeaders(
                "Content-Type"->"image/png",
                "Connection"->"Close"
            )
        } 
```

对于慢速服务，这很好用，我得到了整个文件。对于快速服务，我只得到文件的一小部分（大小不同，顺便说一句），其余的图像被切断。如果图像是 11mb，在 .close() 方法终止流之前，我可能只会得到 2mb。

我知道 Iteratee 获取了所有数据（我在打印出来时看到了它），但是，似乎 Enumerator 上的 .close() 调用运行得太快了，并且在 interatee 能够之前切断了枚举器填补;填写（表格，资料。

我有几个问题：

1.  这是做代理的正确方法吗？我首先用传统的 Java IO 流来做这个，它工作正常，但不是惯用的或非阻塞的

2.  如果这是解决此问题的合理方法，那么 Enumerator.close() 方法应该去哪里？.onRedeem 与 .orTimeout 有同样的问题

谢谢！

# html - P 标签打破浮动 div 中的浮动

> ID：12695796
> 
> 赞同：0
> 
> 时间：2012-10-02T18:08:47.607
> 
> 标签：html, css

```
<div class="dates-container">

</div>
<div class="info">
   <h1>Header</h1>                             
   <p class="long">Boktjänst arrangerar tillsammans med förlagen läromedelsutställningar på olika platser i Sverige.</p>                        
   <a href="#" class="icon_window">Läs mer på Boktjänst.se</a>
</div>

CSS:
.dates-container,.info {
float:left;
}

.dates-container {
width:30px;
} 
```

好的，问题是 P 比容器（具有灵活宽度的父容器）更长，并且在 .info 块中中断浮动。并且 .info 块位于 .dates-container 下。如何不让 P 中断浮动？示例 - [http://jsfiddle.net/rgcsC/](http://jsfiddle.net/rgcsC/)

**好的。我只找到了一种解决方案。设置为以 % 为单位的 div.info 宽度。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T18:18:16.657

您的 p 标签将扩展到可用的全宽。尝试在 p 标签上设置宽度，或将其向左浮动。

# css - 使 DIV 覆盖父级的边距

> ID：12695803
> 
> 赞同：0
> 
> 时间：2012-10-02T18:08:51.947
> 
> 标签：css, html

我不确定如何最好地解释这一点，但我会尽力而为。我有 Drupal 主题，在主要内容/帖子 DIV 上有阴影边框和文本填充。但是，在某些页面上，我想覆盖文本填充，以便 DIV 标记可以充满内容 DIV。

我可以通过删除文本填充并在每个页面上手动添加它来实现相同的效果，但这将是很多工作；特别是考虑到我只需要在几页上使用这个*“特殊” DIV。*

我希望这是有道理的 - 可能有更好的方法来解释它，但这就是为什么我自己找不到答案！提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T18:11:06.300

对子级使用等于父级填充的负边距。IE：

```
div.parent {
  padding: 0 10px;
}

div.child {
  margin: 0 -10px;
} 
```

# git - 分支主仓库并合并本地副本

> ID：12695822
> 
> 赞同：1
> 
> 时间：2012-10-02T18:09:48.177
> 
> 标签：git

如何将与服务器上的 master 分歧的本地 master 分支与从 repo 上的当前 master 分支创建的新分支合并？

我一直在处理主分支的本地副本，并且主分支的状态与我开始处理本地副本时不同。如何将我的本地副本合并到我想从主分支创建的新分支中？

我想这样做是为了将我的本地更改推送到服务器以确保安全。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T18:18:18.470

首先，首先在本地 master 上创建一个新分支：

```
git checkout master
git branch my_feature_branch 
```

然后，只需将本地 master 移动到上游 master

```
git branch -f master origin/master 
```

并且，将您的新分支向上推：

```
git checkout my_feature_branch
git push origin my_feature_branch 
```

# oop - Scala 类继承

> ID：12695823
> 
> 赞同：2
> 
> 时间：2012-10-02T18:09:50.293
> 
> 标签：oop, class, scala, inheritance

标记为家庭作业。在尝试实现一个类时，我在面向对象的世界中遇到了麻烦。

我正在实现各种功能来对列表采取行动，我用来模拟一个集合。例如，我不太担心如何找到联合的逻辑，但实际上只是结构。

例如：

```
abstract class parentSet[T] protected () {

    def union(other:parentSet[T]):parentSet[T]

} 
```

现在我想要一个扩展 parentSet 的新类：

```
class childSet[T] private (l: List[T]) extends parentSet[T] {
    def this() = this(List())
    private val elems = l
    val toList = List[T] => new List(l)

    def union(other:parentSet[T]):childSet[T] = {
        for (i <- this.toList) {
            if (other contains i) {}
            else {l :: i}
        }
        return l
    }
} 
```

编译时，我收到错误，例如在 def union 中找不到类型 childSet，也没有类型 T 来保持它的参数化。另外，我认为我的 toList 不正确，因为它抱怨它不是对象的成员；仅举几例。

我的语法哪里错了？

**编辑**

现在我已经弄清楚了：

```
 def U(other:parentSet[T]):childSet[T] = {
    var w = other.toList
    for (i <- this.toList) {
        if (!(other contains i)) {w = i::w}
    }
    return new childSet(w) 
```

}

现在，我正在尝试对 map 执行相同的操作，这就是我正在处理/使用的：

```
def U(other:parentSet[T]):MapSet[T] =  {
    var a = Map[T,Unit]
    for (i <- this.toList) {
        if (!(other contains i)) {a = a + (i->())}
    }
    return new MapSet(elems + (a->()))
  } 
```

我仍然想使用 toList 使它易于遍历，但是在弄乱地图时我仍然遇到类型错误..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T18:46:43.720

这段代码有几个问题：

似乎您没有意识到这`List[T]`是一种*不可变*类型，这意味着一旦创建就无法更改其值。因此，如果您有 a`List[T]`并且您调用该`::`方法来添加一个值，该函数将返回一个新列表并保持您现有的列表不变。Scala 具有可变集合，例如`ListBuffer`其行为可能更像您期望的那样。所以当你时`return l`，你实际上是在返回原始列表。

另外，您使用的顺序有误`::`。它应该去`i :: l`，因为它`::`是一个右绑定函数（因为它以 a 结尾`:`）。

最后，在你的 union 方法中你正在做`(other contains i)`. 也许只是 Scala 语法让你感到困惑，但这与做是一样的`(other.contains(i))`，显然`contains`不是`parentSet`. 它是类型上的一种方法`List[T]`，但您没有调用`contains`列表。

您将此标记为家庭作业，因此我不会修复您的代码，但我认为您应该

1.  查看一些涉及列表的正确 Scala 代码示例，请[在此处](http://anders.janmyr.com/2009/10/lists-in-scala.html)尝试初学者

2.  在 Scala REPL 中玩耍并尝试创建和使用一些列表，这样您就可以了解不可变集合是如何工作的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T21:14:53.433

要回答您的直接问题，即使 childSet 继承 parentSet 原始方法将 parentSet 指定为返回类型而不是 childSet。您可以仅使用 parentSet 作为类型，也可以将返回类型指定为继承 parentSet 的任何内容。

# ruby-on-rails - 对于经过身份验证的 Ruby on Rails 站点，哪个操作最适合映射到站点索引页面？

> ID：12695830
> 
> 赞同：0
> 
> 时间：2012-10-02T18:10:06.633
> 
> 标签：ruby-on-rails, ruby-on-rails-3, authentication, controller, action

我的 Ruby on Rails Web 应用程序具有标准身份验证。当用户从索引页面登录时，我决定将索引页面建模为“user_sessions”资源的“新”操作。

我决定使用 css 隐藏登录表单，以便它可以在 javascript 启动的模式对话框中显示。

现在的问题是当用户关闭 javascript 时我该怎么办？我在哪里发送他们登录？

我考虑从 javascript 中隐藏登录表单，所以如果 javascript 被关闭，表单将保持可见。这样做的问题是，当页面加载时，表单会在消失之前短暂出现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T18:17:44.647

我不会那样做的。建立一个正常的索引页面，并链接到登录表单。然后使用`ujs`，将链接设置为`remote`（因此它是异步管理的）并注册其处理程序以在弹出窗口中显示结果表单。

```
(in the view)
link_to new_user_session_path, :remote => true, :class => "possibly-modal-dialog"

(in some js or coffee file)
$(document).on "click", "a.possibly-modal-dialog", (event) ->
  event.preventDefault
  # to whatever needed to show the dialog. 
```

这样，没有 javascript 的用户将看到正常的链接，而使用 javascript 的用户只会触发模态对话框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T18:22:35.017

你真的需要关闭 javascript 的用户吗？在主页上通知他们：

```
<noscript>
    <p><font color="red" size="3"><b>Javascript is turned off. <br/> 
    You need to <a href="/settings">change your browser settings</a>.</b></font>
</noscript> 
```

# awk - AWK-如何改进这个正则表达式？

> ID：12695831
> 
> 赞同：2
> 
> 时间：2012-10-02T18:10:11.153
> 
> 标签：awk

我有一个例子：

```
pic@pic:~$ echo ",article{gjn2010jucs, Author =   {Grzegorz J. Nalepa}, " | awk '{gsub(/[^,],.*/,""); print }' 
,article{gjn2010juc 
pic@pic:~$ 
```

如何改进正则表达式以获得结果：

```
,article{gjn2010jucs 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T23:24:38.230

`sub()`如果您希望改进正则表达式：您将需要使用捕获组，而这些在or中不可用`gsub()`。您将需要使用`gensub()`. [您可以在此处](http://www.gnu.org/software/gawk/manual/html_node/String-Functions.html)阅读有关字符串操作函数的更多信息。

我会这样使用`gensub()`：

```
awk '{ print gensub(/(,[^,]+).*/,"\\1", "g") }' 
```

测试：

```
echo ",article{gjn2010jucs, Author =   {Grzegorz J. Nalepa}, " | awk '{ print gensub(/(,[^,]+).*/,"\\1", "g") }' 
```

结果：

```
,article{gjn2010jucs 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T00:27:59.680

或者，与其寻找要丢弃的东西，不如寻找要保留的东西：保留第一个逗号和所有后续的非逗号字符：

```
gawk 'match($0, /^,[^,]+/, ary) {print ary[0]}' 
```

毛克更新：

```
mawk 'match($0, /^,[^,]+/) {print substr($0, RSTART, RLENGTH)}' 
```

# javascript - 依赖注入 vs. 托管依赖 vs. 全局对象

> ID：12695832
> 
> 赞同：5
> 
> 时间：2012-10-02T18:10:13.960
> 
> 标签：javascript, oop, model-view-controller, backbone.js, requirejs

我在 Javascript + BackboneJS（一个 MVC 框架）+ RequireJS 框架中工作，但这个问题有点面向对象。

让我首先解释一下，在 Backbone 中，您的视图是传统视图和控制器的混合体，而您的 HTML 模板是传统的 MVC 视图

一段时间以来一直在为此绞尽脑汁，但我不确定正确/务实的方法应该是什么。

我有一个 User 对象，其中包含许多代码所依赖的用户首选项（如单位系统、语言选择等）。

我的一些视图在不使用模板的情况下完成了大部分工作（通过使用 3rd 方库，如映射和图形库），因此它们依赖于 User 对象来处理单位转换。我目前正在使用 RequireJS 来管理该依赖项，而不会过多地破坏封装。

我的一些视图自己做的工作很少，只将模型数据传递给我的模板引擎/模板，这些模板引擎/模板完成工作并且确实依赖于用户对象，同样，用于单位转换之类的事情。将此依赖项传递到模板中的唯一方法是将其注入模型中，然后将模型传递到模板引擎中。

我的问题是，如何最好地处理如此广泛需要的依赖项？- 创建一个可在任何地方访问的应用程序范围的引用/全局对象？(YUK) - 使用 RequireJS 托管依赖项，尽管通常只建议对类/对象定义而不是具体对象使用托管依赖项加载。- 或者，只使用依赖注入，并手动将该依赖传递给需要它的所有东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T18:54:46.647

从纯粹的技术角度来看，我认为可交换的全局变量（可能会改变的全局变量），尤其是在 javascript 中，是危险和错误的。特别是因为 javascript 充满了异步执行的部分代码。考虑以下代码：

```
window.loggedinuser = Users.get("Paul");
addSomeStuffToLoggedinUser();
window.loggedinuser = Users.get("Sam");
doSomeOtherStuffToLoggedinUser(); 
```

现在，如果`addSomeStuffToLoggedinUser()`在某处异步执行（例如，它执行一个 ajax 调用，然后在第一个完成时执行另一个 ajax 调用），它很可能正在向新的登录用户（“Sam”）添加内容，当它到达第二个时阿贾克斯调用。显然不是你想要的。

话虽如此，我更不支持拥有一些用户对象，我们一直在从一个功能到另一个功能，无限地传递。

就个人而言，不得不在这两个邪恶之间做出选择，我会选择一个全球范围的“很少改变”的事情——除非我正在建造一个核电站或其他什么东西。所以，我倾向于让登录用户在我的应用程序中全局可用，冒着风险，如果出于某种原因，某些呼叫运行得很晚，并且我遇到一个用户注销而另一个用户直接登录的情况，某事可能会发生奇怪的事情。（再说一次，如果流星坠入托管我的应用程序的数据中心，也可能会发生一些奇怪的事情......我也没有防止这种情况发生）。实际上，一个可能的解决方案是在有人注销后立即重新加载整个应用程序。

所以，我想这一切都取决于你的应用程序。让它变得更好的一件事（让你觉得你仍然得到一些 OO 业力点）是将你的数据隐藏在一些命名空间的单例中：

```
var myuser = MyApp.domain.LoggedinDomain.getLoggedinUser();
doSomethingCoolWith(myuser); 
```

代替

```
doSomethingCoolWith(window.loggedinuser); 
```

虽然最后都差不多...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T18:21:53.430

我认为您已经回答了自己的问题，您只是希望其他人为您说：) 使用 DI，但您并没有真正“手动”将该依赖项传递给所有内容，因为无论如何您都需要引用它来使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T19:00:49.510

考虑到 TDD 方法，您将如何测试它？DI 最适合新项目，但 JS 为您提供了灵活的选项来在测试时处理具体的全局依赖关系，即：上下文构造。回顾过去，Yahoo 制定了一种模块模式，其中所有模块松散耦合并且不相互依赖，但可以拥有全局上下文。该全局上下文可以使您的应用程序构建对于不断重用的事物更加实用。只是您需要明智地/谨慎地应用它，并且需要非常有力的案例来证明这些事物是动态的。

# php - fetch all results as an array with integer index only

> ID：12695838
> 
> 赞同：-1
> 
> 时间：2012-10-02T18:10:49.373
> 
> 标签：php, fetch

So ok before you start talking about that I should have looked it up and stuff, I did but found nothing that matches my needs exactly,so lets see;

Here is a sample from php.net describing how is it possible to fetch all results at once([click link](http://www.php.net/manual/en/pdostatement.fetchall.php)),

look at Example #1 and tell me please how do I modify the given code to receive this result instead:

```
Array
(
[0] => Array
    (
        [0] => pear
        [1] => green
    )

[1] => Array
    (
        [0] => watermelon
        [1] => pink
    )

) 
```

sorry for inconvenience and not using code spans,I just don't know how to do it :).

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T18:17:58.637

in the given example, you need to change the line

`$result = $sth->fetchAll();` to

`$result = $sth->fetch(PDO::FETCH_NUM);`

Here's the [manual](http://php.net/manual/en/pdostatement.fetch.php) for `PDO::fetch`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T18:13:05.517

You need to use below to get index array result

```
$result = $sth->fetchAll(PDO::FETCH_NUM); 
```

# android - 安卓平板屏幕尺寸

> ID：12695844
> 
> 赞同：2
> 
> 时间：2012-10-02T18:11:12.383
> 
> 标签：android, android-layout, android-screen

我只需要为 android tablet 10.1 开发 android 应用程序。

为此，我可以在我`res--->layout folder`的 10.1 平板电脑大小中创建我的 xml 文件吗？

还是我必须`res--->layout-large folder`为此目的而创建？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T18:16:12.367

您可以使用现有的布局文件夹，因为您不想支持任何其他屏幕尺寸。虽然您必须在标签下的 AndroidManifest 中指定

例如：

```
 <supports-screens android:resizeable="false"
                  android:smallScreens="false"
                  android:normalScreens="false"
                  android:largeScreens="true"                  
                  /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T18:28:36.897

如果您只希望您的应用程序出现在 10 英寸平板电脑的市场上，EddyK 的回答是正确的。如果您想提供 10 英寸平板电脑特定的资源，您可以使用`-sw700dp`限定符限定相应的资源文件夹。

```
layout-sw700dp
values-sw700dp 
```

等使用这些来支持`-large`,`-normal`等限定符（在 Android 3.2+ 上）。

有关详细信息，请参阅Android 开发者网站上的[声明平板电脑布局。](http://developer.android.com/guide/practices/screens_support.html#DeclaringTabletLayouts)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T18:29:12.517

```
Kindly Use This qualifier for your Android Project with compatible screen size.

Resource          Screen Size 

layout-small       <3 inch

layout-normal      3-4 inch

layout-large       >4 inch<7.1

layout-xlarge      7.1 - 10.1 inch 
```

# java - {0} 和 {0,number,integer} 有什么区别

> ID：12695847
> 
> 赞同：4
> 
> 时间：2012-10-02T18:11:26.767
> 
> 标签：java, localization, number-formatting, messageformat

我试图更多地了解 Java 的[MessageFormat](http://docs.oracle.com/javase/6/docs/api/java/text/MessageFormat.html)实用程序，在我们的代码库和其他地方的示例中，我看到了两者`{0}`并被`{0,number,integer}`用于数字，但我不确定哪一个更可取。

快速测试打印差异：

```
import java.text.MessageFormat;
import java.text.NumberFormat;
import java.util.Locale;

public class MessageFormatTest
{
    public static void main(String[] args){
        MessageFormat simpleChoiceTest = new MessageFormat("{0}");
        MessageFormat explicitChoiceTest = new MessageFormat("{0,number,integer}");
        int[] set = new int[]{0,1,4,5,6,10,10000,24345};
        Locale[] locs = new Locale[]{Locale.US,Locale.UK,Locale.FRANCE,Locale.GERMANY};
        for(Locale loc : locs){
            simpleChoiceTest.setLocale(loc);
            explicitChoiceTest.setLocale(loc);
            for(int i : set){
                String simple = simpleChoiceTest.format(new Object[]{i});
                String explicit = explicitChoiceTest.format(new Object[]{i});
                if(!simple.equals(explicit)){
                    System.out.println(loc+" - "+i+":\t"+simple+
                        "\t"+NumberFormat.getInstance(loc).format(i));
                    System.out.println(loc+" - "+i+":\t"+explicit+
                        "\t"+NumberFormat.getIntegerInstance(loc).format(i));
                }
            }
        }
    }
} 
```

输出：

```
fr_FR - 10000:  10 000  10 000
fr_FR - 10000:  10,000  10 000
fr_FR - 24345:  24 345  24 345
fr_FR - 24345:  24,345  24 345
de_DE - 10000:  10.000  10.000
de_DE - 10000:  10,000  10.000
de_DE - 24345:  24.345  24.345
de_DE - 24345:  24,345  24.345 
```

这让我感到惊讶，如果有什么我会预料`{0}`到不会对这个数字做任何事情，`{0,number,integer}`而是为了正确地对其进行本地化。相反，两者都被本地化，但似乎显式形式总是使用 en_US 本地化。

根据链接的文档，`{0}`当`NumberFormat.getInstance(getLocale())`显式表单使用`NumberFormat.getIntegerInstance(getLocale())`. 然而，当我直接调用它们（输出中的最后一列）时，它们看起来都相同，并且都正确定位。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T20:23:35.373

你说的对。当您使用“MessageFormat("{0,number,integer}")”时，格式化程序在初始化时使用默认语言环境（en_US），并且数字在默认语言环境（en_US）中被标记为使用整数格式，因为执行以下代码在初始化时间本身。

```
// this method is internally called at the time of initialization
MessageFormat.makeFormat()
// line below uses default locale if locale is not
// supplied at initialization (constructor argument) 
newFormat = NumberFormat.getIntegerInstance(locale); 
```

由于您是在之后设置区域设置，因此对分配给数字的格式模式没有影响。如果您想以数字格式使用所需的语言环境，请在初始化时使用 locale 参数，例如：

```
MessageFormat test = new MessageFormat("{0,number,integer}", Locale.FRANCE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T09:13:33.613

在我看来，这是一个 Java 错误（接口错误）或文档问题。您应该在 Oracle 上开一个新问题来纠正这个问题。

正如 Yogendra Singh 所说，格式化程序（DecimalFormat）的实例是在 MessageFormat 构造函数中创建的。

```
MessageFormat simpleChoiceTest = new MessageFormat("{0}");
System.out.println(simpleChoiceTest.getFormatsByArgumentIndex()[0]);
//Prints null
MessageFormat explicitChoiceTest = new MessageFormat("{0,number,currency}");
System.out.println(explicitChoiceTest.getFormatsByArgumentIndex()[0]);
//Prints java.text.DecimalFormat@67500 
```

当调用 MessageFormat.setLocale 时，它​​不会更改其内部格式化程序的语言环境。

至少应更改文档以反映此问题。

那是我的 java 版本：java 版本 "1.7.0_07" Java(TM) SE Runtime Environment (build 1.7.0_07-b11)

# c++ - C中的OpenCV拼接器例程，如何获得像素变换？

> ID：12695853
> 
> 赞同：3
> 
> 时间：2012-10-02T18:11:44.663
> 
> 标签：c++, opencv

因此，我设法使用 opencv 的拼接器例程在 C++ 中实现全景拼接。

缝合完成后，输出显示初始内在参数，以及每个缝合的相机参数为 3x3 矩阵。

这些参数是什么意思？

我想找出从每个单独的图像到生成的全景图的像素映射。像素偏移量是多少。这可能是一个二维向量，因为像素是向左或向右平移，然后向上或向下平移。

如何获取输出全景图中每个像素的数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T22:16:26.003

3x3 矩阵只是 2d 仿射变换（缩放 + 旋转 + 平移）的表示。

要将一个图像上的 (x1, y1) 转换为具有拼接矩阵 M 的另一幅图像上的 (x2, y2) 您只需执行

```
 (x1, y1, 1) = M * (x2, y2, 1) 
```

其中`*`是通常的矩阵向量乘法。

有关此类矩阵和齐次（三重）坐标的信息，请参见此处[（Wiki，仿射变换） 。](http://en.wikipedia.org/wiki/Affine_transform)

# jquery - 是否可以使用 jquery 拖放来重新定位项目并调整该项目的大小以适应边界？

> ID：12695854
> 
> 赞同：0
> 
> 时间：2012-10-02T18:11:46.923
> 
> 标签：jquery, drag-and-drop, resize

例如，Windows 任务栏。您可以将其拖动到左侧、右侧、顶部和底部。任务栏自动保持相同的大小，只是水平或垂直。我正在寻找一个菜单或任何带有示例的项目，在 jquery 中我可以做到这一点。我发现了很多菜单和拖放示例。

我没有发现任何可以调整大小的拖放操作，尤其是基于窗口大小的，比如 Windows 任务栏。

谢谢你的帮助。

我搜索过：

[https://stackoverflow.com/questions/10749685/drag-and-drop-with-resize-jquery](https://stackoverflow.com/questions/10749685/drag-and-drop-with-resize-jquery)

许多网站都具有拖放和调整大小，但没有像我提到的那样......菜单的想法和任务栏一样只是示例。

编辑：我唯一发现的是这个，但它看起来并不顺利...... [http://sagifogel.brinkster.net/](http://sagifogel.brinkster.net/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T18:19:12.590

是的。你可能想看看[jQuery UI Sortable](http://jqueryui.com/demos/sortable/)

请记住，您可以将可排序列表设置为水平，这描述了您的要求。

# linqpad - 为什么实体框架无视我的订单？

> ID：12695855
> 
> 赞同：2
> 
> 时间：2012-10-02T18:12:00.950
> 
> 标签：linqpad, entity-framework-5

我正在重写一个需要复制旧大型机系统的字母排序逻辑的应用程序。在旧的大型机系统中，项目更改记录 ID 按字母顺序从 A 到 Z，然后以 AA、AB 等重新开始。不幸的是，SQL Server 和 .NET 都希望将 AA 放在 A 和 B 之间，所以我不得不跳过一些障碍。我试图先按长度降序对更改 ID 进行排序，然后按字母顺序降序排列。

这是我用来检索数据的方法：

```
protected internal IList<TeamViewModel> GetTeams(string recordId, string changeId)
{
    var viewModels = (from x in repository.Teams
               where x.RecordId == recordId && x.ChangeId.Length <= changeId.Length && 
                 (x.ChangeId.CompareTo(changeId) == -1 || x.ChangeId.CompareTo(changeId) == 0)
               orderby x.ChangeId.Length descending, x.ChangeId descending, x.ChangeId descending
               group x by x.TeamId into grp
               select grp.FirstOrDefault())
               .ToList()
               .Select(TeamViewModel.FromEntity)
               .ToList();

            return viewModels;
} 
```

每个“记录”都有一组更改记录，每个更改记录一个 ChangeId 属性和进行更改的 TeamId。我正在尝试获取每个不同 teamId 的“最新”（根据旧的大型机排序逻辑）更改记录。换句话说，我正在尝试对记录进行排序，按团队对它们进行分组，然后从每个组中获取第一条记录。

repository.Teams 属性返回一个 IQueryable，它包装了在我的 ObjectContext 中声明的 ObjectSet。

真正让我大吃一惊的是，当我在 Linqpad（使用默认配置）中运行它时，这个查询工作正常，当我将我的存储库的模拟注入到这个类中时，这个方法在单元测试中执行得很好，我已经设置**为**发出与 SQL 数据库中完全相同的数据。

但是，当在运行时执行此方法时，它的行为就好像完全省略了带有 orderbys 的行，实际上，当我注释掉带有 orderbys 的行时，我得到的结果与我得到的 Linqpad（使用默认配置）相同。SQL Profiler 显示生成的 SQL 几乎不可能被人类破译，但它的任何地方都不包含“order”一词。

最后一点，当我将 Linqpad 配置为在项目程序集中使用我的 EF 生成的类型化数据集时，我得到的结果与我在运行时看到的结果相同，结果似乎忽略了 orderbys。

我希望我能显示实际结果，但数据是专有的，所以只需考虑 Linqpad 和我的单元测试提供的正确结果，包含带有“Y”和“Z”等 ID 的更改记录，其中无法解释（对我来说) 我在运行时在项目中看到的结果类似于“A”和“B”。

谁能看到这里发生了什么，同样重要的是，我需要改变什么才能使这个功能达到我的预期？

我的项目使用的是实体框架 5.0，我使用的是 Linqpad 4.42.01。

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T18:19:20.497

Group by 不保证保留原始订单。如果你想订购，你必须在group by之后订购。

事实上，在 group by 之前 order by 甚至没有意义，因为 group by 保证会更改顺序（除非只有一个组）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T18:34:37.750

I'll make a wild guess...

Your ChangeId's are all the same length. The database has them mapped as a CHAR(10) column or something instead of a VARCHAR, so A is really "A " and AB is really "AB ". Mainframes and COBOL and flat files with offsets come to mind as my rationale. If this is the case you'd have to Trim() the ChangeId first before getting the Length.

# c# - 使用 TPC 时，实体框架代码如何首先从基类集中查找类型化实体

> ID：12695857
> 
> 赞同：0
> 
> 时间：2012-10-02T18:12:16.690
> 
> 标签：c#, entity-framework, code-first

所以这个问题可能听起来有点深奥，但我注意到一些“神奇”的东西，我担心引擎盖下发生的事情的表现。假设我使用 TPC 设计创建实体，所有实体（直接或间接）从根基础实体继承，并且根基础实体包含在保存之前在代码中生成的全局唯一标识符（例如 Guid）（即，不是由数据库生成）。

我希望以下代码能够通过查询与对应的泛型类型相关的表来返回一个类型化的动态代理（它确实如此）：

`context.Set<ConcreteDerivedEntityClass>().Find(someGuid)`

但是，我也注意到我可以执行以下操作：

`context.Set<BaseEntityClass>().Find(someGuid)`

这非常酷，并且会神奇地为正确的具体类的请求 ID 返回一个类型化的动态代理。EF 到底如何知道 Id 属于哪个派生类/表？它是否会查看它知道的每个表/实体类型，直到找到匹配项（因此存在性能问题）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-25T19:18:08.877

继承表/实体的主键也是指向基表的外键。

然后它需要做的就是查看从基类继承的类。它也可能在加载时将关系缓存在内存中的某个地方，以避免每次调用反射对性能的影响，因为关系是运行时静态的。

剩下的就是查询与子类名称匹配的表。由于需要继承，这将是一个*聚集索引搜索。*因此，虽然存在性能损失，但考虑到您获得的抽象，它是微不足道的。

编辑：

默认情况下，代码首先使用每个层次结构的表 (TPH)，它是 1 个非规范化表，其中将实体类型编码到`Descriminator`列中。在这种情况下，该列告诉 EF 要将结果类型转换为哪个实体。

上面提到的 TPC 需要在 DBContext 中添加一个额外的代码来指定正确的表映射。它可能会将其缓存在内存中，并运行上面已经描述的例程。

# sql - 如何与“row_number() over (partition by [Col] order by [Col])”相反

> ID：12695858
> 
> 赞同：9
> 
> 时间：2012-10-02T18:12:17.377
> 
> 标签：sql, sql-server, sql-server-2005, row-number

我正在尝试合并数据表中的重复条目并给它们一个新编号。

这是一个示例数据集（[可运行副本](https://data.stackexchange.com/stackoverflow/query/81485/query-for-http-stackoverflow-com-questions-12695858?opt.textResults=true)）

```
declare @tmpTable table
    (ID Varchar(1), 
     First varchar(4), 
     Last varchar(5), 
     Phone varchar(13),
     NonKeyField varchar(4))

insert into @tmpTable select 'A', 'John', 'Smith', '(555)555-1234', 'ASDF'
insert into @tmpTable select 'B', 'John', 'Smith', '(555)555-1234', 'GHJK'
insert into @tmpTable select 'C', 'Jane', 'Smith', '(555)555-1234', 'QWER'
insert into @tmpTable select 'D', 'John', 'Smith', '(555)555-1234', 'RTYU'
insert into @tmpTable select 'E', 'Bill', 'Blake', '(555)555-0000', 'BVNM'
insert into @tmpTable select 'F', 'Bill', 'Blake', '(555)555-0000', '%^&*'
insert into @tmpTable select 'G', 'John', 'Smith', '(555)555-1234', '!#RF'

select row_number() over (partition by First, Last, Phone order by ID) NewIDNum, *  
from @tmpTable order by ID 
```

现在它给了我结果

```
NewIDNum             ID   First Last  Phone         NonKeyField
-------------------- ---- ----- ----- ------------- -----------
1                    A    John  Smith (555)555-1234 ASDF
2                    B    John  Smith (555)555-1234 GHJK
1                    C    Jane  Smith (555)555-1234 QWER
3                    D    John  Smith (555)555-1234 RTYU
1                    E    Bill  Blake (555)555-0000 BVNM
2                    F    Bill  Blake (555)555-0000 %^&*
4                    G    John  Smith (555)555-1234 !#RF 
```

然而，这与我想要的相反，`NewIDNum`每当它找到一个新的密钥组合时，它都会重置它的计数器。我希望所有相同的组合都具有相同的 ID。因此，如果它以我想要的方式运行，我将得到以下结果

```
NewIDNum             ID   First Last  Phone         NonKeyField
-------------------- ---- ----- ----- ------------- -----------
1                    A    John  Smith (555)555-1234 ASDF
1                    B    John  Smith (555)555-1234 GHJK
2                    C    Jane  Smith (555)555-1234 QWER
1                    D    John  Smith (555)555-1234 RTYU
3                    E    Bill  Blake (555)555-0000 BVNM
3                    F    Bill  Blake (555)555-0000 %^&*
1                    G    John  Smith (555)555-1234 !#RF 
```

获得我想要的结果的正确方法是什么？

* * *

**我没有在原始帖子中包含此要求**：如果添加了更多行，我需要在`NewIDNum`此查询的后续运行中为现有行生成相同的数字（假设如果订单所有新行将具有更高的 ID“值” by 在 ID 列上完成）

因此，如果在以后的日期完成了以下操作

```
insert into @tmpTable select 'H', 'John', 'Smith', '(555)555-1234', '4321'
insert into @tmpTable select 'I', 'Jake', 'Jons', '(555)555-1234', '1234'
insert into @tmpTable select 'J', 'John', 'Smith', '(555)555-1234', '2345' 
```

再次运行正确的查询会给

```
NewIDNum             ID   First Last  Phone         NonKeyField
-------------------- ---- ----- ----- ------------- -----------
1                    A    John  Smith (555)555-1234 ASDF
1                    B    John  Smith (555)555-1234 GHJK
2                    C    Jane  Smith (555)555-1234 QWER
1                    D    John  Smith (555)555-1234 RTYU
3                    E    Bill  Blake (555)555-0000 BVNM
3                    F    Bill  Blake (555)555-0000 %^&*
1                    G    John  Smith (555)555-1234 !#RF
1                    H    John  Smith (555)555-1234 4321
4                    I    Jake  Jons  (555)555-1234 1234
1                    J    John  Smith (555)555-1234 2345 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T18:15:44.163

你可以使用`dense_rank()`：

```
dense_rank() over (order by First, Last, Phone) as NewIDNum 
```

作为对您的评论的回应，您可以使用相同组合`Id`对每组行的旧列的最小值进行排序：`(First, Last, Phone)`

```
select  *
from    (
        select  dense_rank() over (order by min_id) as new_id
        ,       *
        from    (
                select  min(id) over (
                            partition by First, Last, Phone) as min_id
                ,       *
                from    @tmpTable 
                ) as sub1
        ) as sub3
order by
        new_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T18:36:38.253

以@Andomar 的原始答案为基础——这将适用于您更新的要求（尽管这可能不会很好地扩展）

```
select
    DENSE_RANK() over (ORDER BY IdRank, First, Last, Phone) AS NewIDNum,
    ID,
    First,
    Last,
    Phone,
    NonKeyField
from
(
    select
        MIN(ID) OVER (PARTITION BY First, Last, Phone) as IdRank,
        *
    from
        @tmpTable
) as x
order by
    ID; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T18:42:07.587

感谢[Andomar 的回答](https://stackoverflow.com/a/12695897/80274)作为起点，我自己解决了

```
select sub1.rn, tt.*
from @tmpTable tt
inner join (
    select row_number() over (order by min(ID)) as rn, first, last, phone
    from @tmpTable
    group by first, last, phone
    ) as sub1 on tt.first = sub1.first and tt.last = sub1.last and tt.phone = sub1.phone 
```

这会产生

```
rn                   ID   First Last  Phone         NonKeyField
-------------------- ---- ----- ----- ------------- -----------
1                    A    John  Smith (555)555-1234 ASDF
1                    B    John  Smith (555)555-1234 GHJK
1                    D    John  Smith (555)555-1234 RTYU
1                    G    John  Smith (555)555-1234 !#RF
1                    H    John  Smith (555)555-1234 4321
1                    J    John  Smith (555)555-1234 2345
2                    C    Jane  Smith (555)555-1234 QWER
3                    E    Bill  Blake (555)555-0000 BVNM
3                    F    Bill  Blake (555)555-0000 %^&*
4                    I    Jake  Jons  (555)555-1234 1234 
```

* * *

查看 SQL 执行计划，对于更大的数据集，Adnomar 的答案将比我的运行得更快。（53% 的执行时间 VS 47% 的执行时间在彼此相邻运行并选中“包括实际执行计划”时。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-02T18:20:38.330

这应该工作

```
select dense_rank() over (order by First, Last, Phone) NewIDNum, *  
from @tmpTable order by ID 
```

# php - PHP OOP 链接方法

> ID：12695860
> 
> 赞同：0
> 
> 时间：2012-10-02T18:12:28.187
> 
> 标签：php, method-chaining

我有这个代码：

```
class one{
    public $instance;

    function instance(){
        $this->instance = 'instance was created';
    }

    function execute(){
        $this->instance .= "and something happened";
    }
}

$class = new one;

$class->instance();
$class->execute();

echo $class->instance; 
```

它做了我期望它做的事情，但是我如何链接操作，例如我如何在一行中调用这些函数：

```
$class->instance()->execute(); 
```

而且我知道可以这样做：

```
one::instance()->execute(); 
```

但在这种情况下，我需要拥有使事情变得复杂的静态函数，我需要对这些事情进行一些解释

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T18:15:32.777

为了使链接起作用，您需要`$this`从每个要链接的方法中返回：

```
class one{
    public $instance;

    function instance(){
        $this->instance = 'instance was created';
        return $this;
    }

    function execute(){
        $this->instance .= "and something happened";
        return $this;
    }
} 
```

此外，将属性与方法同名也是一个坏主意。这对解析器来说可能是明确的，但对开发人员来说却是令人困惑的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T18:20:01.787

`$this`链接的一般方法是作为`return`需要链接的任何方法返回。因此，对于您的代码，它可能看起来像这样。

```
class one{
    public $instance;

    function instance(){
        $this->instance = 'instance was created';
        return $this;
    }

    function execute(){
        $this->instance .= "and something happened";
        return $this;
    }
} 
```

所以你冷做：

```
$one = new one;
$one->instance()->execute(); // would set one::instance to 'instance was createdand something happened'
$one->instance()->instance()->instance(); // would set one::instance to 'instance was created';
$one->instance()->execute()->execute(); / would set one::instance to 'instance was createdand something happenedand something happened' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T18:15:57.393

您需要在函数结束时返回实例：

```
class one{
    public $instance;

    function instance(){
        $this->instance = 'instance was created';
        return $this;
    }

    function execute(){
        $this->instance .= "and something happened";
        return $this;
    }
} 
```

然后你可以链接它们。

顺便说一句，这可能只是示例代码，但您的`instance`函数实际上并没有创建实例；）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T18:16:46.490

$class->instance()->execute();

应该可以，但是您需要在方法中返回值。

# c# - 使用 Sitecore Web 服务在多列表字段中添加项目

> ID：12695862
> 
> 赞同：0
> 
> 时间：2012-10-02T18:12:28.983
> 
> 标签：c#, sitecore, sitecore6

我正在使用 Sitecore Web 服务在 Sitecore 中插入字段值。如果我的字段是单行文本，那么它可以很好地插入。但是当它是 Multilist 类型时，没有插入。这是我添加项目的代码：

```
 private static void GetCountries(DataRow reader, XmlElement myNode)
    {
        myNode.RemoveChild(myNode.LastChild);
        foreach (DataRow wireRow in reader.GetChildRows("Countries"))
        {
            var newNode = myNode.OwnerDocument.CreateElement("Value");
            newNode.InnerText = wireRow["COUNTRY_NAME"].ToString();
            myNode.AppendChild(newNode);
        }
    } 
```

在此调用之后，该字段的 myNode 如下所示：

```
<field itemid="{2C16342E-7662-432B-9895-5EDB15914D7F}" language="en" version="1" 
fieldid="{1F5956D6-EABE-4F74-A248-B25B7EE90350}" name="Categories" title=""
type="Multilist" source="/sitecore/content/data/Countries" section="Content" 
tooltip=""><value>US</value><value>China</value><value>India</value></field> 
```

在此之后，我调用**save**：

```
 var okay = sitecoreService.Save(getItem.OuterXml, database, myCred); 
```

但我没有看到 Multilist 字段中的国家/地区。这里发生了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T19:03:07.567

多列表字段采用管道分隔的 GUID 字符串，因此要将国家/地区添加到此字段中，您需要查找每个`Country`项目的 Sitecore ID，然后用管道连接它们。

`<value>{US-GUID}|{China-GUID}|{India-GUID}</value>`

不推荐使用 Sitecore Web 服务来执行这些操作。您使用 Web 服务而不是常规 API 是否有特定原因（这会使这些调用更容易）？

# php - 图书 Web 应用程序的内部和外部链接

> ID：12695863
> 
> 赞同：1
> 
> 时间：2012-10-02T18:12:30.743
> 
> 标签：php, codeigniter, tinymce

我正在使用 PHP 框架 CodeIgniter 开发一个网络图书应用程序。用户将能够添加书籍、他们的章节以及每章中的页面。页面内容将是 HTML，带有内部和外部链接。

如何从任何内部书籍添加页面的内部链接，该页面将位于带有书籍和章节编号参考的表格中？我可能需要添加来自同一本书和来自同一应用程序的其他书籍的链接。我可能还需要为外部网站添加链接。

我使用 tinymce 作为页面编辑器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T18:24:51.380

这完全取决于你想怎么做：

根据需要设置您的网址：www.yourbooksite.com/book/id/pageid 或 /book/id#pageid

您还可以使用 Codeigniters url 函数并执行以下操作：www.yourbooksite.com/book/book_name/page_number 或 /book/book_name#page_number。

如果您在同一页面上编译了所有页面，则使用页面锚点（`#page_id`或`#page_num`）。您也可以在外部网站上使用它，文档将滚动到页面的该部分。

如果他们的页面显示在他们自己的页面上，那么只需使用 page_id 或 page_number 作为您传递的另一个参数。

这是一个简单的话题，纯粹是偏好。我无法提供代码，也无法帮助修复您未显示的代码。我可以说得更具体一些，但是缺少你的问题，所以最终，我不能给你一个关于如何做某事的明确答案。

# c# - 如何动态地将多个参数传递给 ObjectDataProvider（在代码中）

> ID：12695866
> 
> 赞同：1
> 
> 时间：2012-10-02T18:12:40.163
> 
> 标签：c#, wpf

我是 WPF 新手，想知道如何将多个参数传递给`ObjectDataProvider`后面的代码。

Xaml（工作正常）：

```
<ObjectDataProvider ObjectType="{x:Type local:GetListOpremaNajem}"
                  MethodName="GetOprema" x:Key="getData">
<ObjectDataProvider.MethodParameters>
  <system:String>TextToSearch</system:String>
  <system:Integer>5</system:Integer>
</ObjectDataProvider.MethodParameters> 
```

对象方法：

```
public GetListOpremaNajem GetOprema(string searchText, UInt16 eID)
{
    if (!string.IsNullOrEmpty(searchText)) 
    {
        return Databases.CallStoredOprema(currentConnSTRING, searchText, eID);
    } 
    else 
    {
        return new GetListOpremaNajem();
    }
} 
```

但是下面的代码什么也不返回：

```
ObjectDataProvider _odProvider = new ObjectDataProvider();
_odProvider.ObjectType = typeof(GetListOpremaNajem);
_odProvider.MethodName = "GetOprema";
_odProvider.MethodParameters.Add("TextToSearch");
_odProvider.MethodParameters.Add(5);
this.DataContext = _odProvider; 
```

仅使用一个参数（即`searchText`）时，效果很好。如何在后面的代码中传递两个参数？我在网上搜索过，没有发现传递多个参数的语法。我究竟做错了什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T18:40:07.280

替换这个 -

```
_odProvider.MethodParameters.Add(5); 
```

和

```
_odProvider.MethodParameters.Add((UInt16)5); 
```

您的方法没有被调用，因为您`int`在参数列表中添加了类型，但您的方法需要 type 的第二个参数`UInt16`。因此，将 caste 键入 UInt16 ，然后它应该可以正常工作。

# java - 在 requestFocusInWindow 之后 KeyEvent 未发送到预期的组件

> ID：12695868
> 
> 赞同：0
> 
> 时间：2012-10-02T18:12:45.583
> 
> 标签：java, swing, focus, awt, awtrobot

我使用 java.util.Robot 将关键事件发送到我的 Swing 应用程序的某些组件。我遇到了以下问题：要将事件发送到未聚焦的组件，我调用 requestFocusInWindow （从 AWT 线程获得预先输入的保证，如[http://docs.oracle.com/javase/1.5.0中所示/docs/api/java/awt/doc-files/FocusSpec.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/awt/doc-files/FocusSpec.html)），然后我等待组件接收到 FOCUS_GAINED 事件。然后我使用机器人发布我的关键事件。但是它们被传递到错误的组件...如果我等待至少 200 毫秒，它就可以工作...

任何想法 ？

（使用 Java 1.6.0_21）

# java - 在 Java 中访问另一个类中的静态变量时出现 NullPointerException

> ID：12695874
> 
> 赞同：0
> 
> 时间：2012-10-02T18:13:55.237
> 
> 标签：java

我试图访问 B 类中 A 类的静态变量，但是我得到了 NullPointerException。代码是：

```
public class OutgoingMessage {
    public static SMPPSession session;
    public static void main(String [] args)
    {
         session = new SMPPSession();

    }
  } 
```

和

```
public class SendSMS {
    public static void main(String [] args)
    {
      if(OutgoingMessage.session.getSessionState().toString().equals("Connected"))//Line 44 
        {
        }
    } 
} 
```

错误读取

```
Exception in thread "main" java.lang.NullPointerException
        at SendSMS.main(SendSMS.java:44) 
```

知道我错过了什么吗？

谢谢

萨提亚

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T18:15:15.907

当然-您正在使用`OutgoingMessage.session`，除非您*还*运行，否则它将为空`OutgoingMessage.main`。这不像`main`方法会在任何地方自动调用 - 这只是应用程序的入口点。

我建议不要将其更改为使用静态初始化程序或类似的东西，而是尽量*避免*使用静态变量。

`OutgoingMessage`为什么有一个静态`session`变量有意义？我希望两者能够一起工作，而不是一个由另一个组成......例如，我可以想象：

```
SMPPSession session = new SMPPSession();
session.send(outgoingMessage); 
```

甚至：

```
SMPPSession session = new SMPPSession();
outgoingMessage.sendInSession(session); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T18:15:04.570

`OutgoingMessage.session`在`null`你打电话的地方

```
if(OutgoingMessage.session.getSessionState() 
```

这导致`NullPointerException`.

确保在制作之前执行`OutgoingMessage`类`main`方法 `if(OutgoingMessage.session.getSessionState()`

除非你使用 OutgoingMessage 作为主类，否则在那里定义 main 方法是没有意义的，这更令人困惑。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T19:33:54.093

您可以在`OutgoingMessage.main(args);`之前添加：

```
if(OutgoingMessage.session.getSessionState().toString().equals("Connected")) //Line 44 ... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T18:17:25.767

你还没有初始化你的静态变量..这就是为什么..

实际上你已经做到了`main()`，但这真的不会影响你的输出。因为你的 main 永远不会运行。你只能在声明的地方初始化它。

```
public static SMPPSession session = new SMPPSession(); 
```

在 main 方法之前.. 但是将它作为静态变量是没有意义的..

您应该将其声明为实例变量并使用`Constructor`..为您创建的每个实例初始化它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-02T18:15:38.173

您在 OutgoingMessage 中缺少一个静态 getter 方法，而您只需要一个 main 方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-02T18:16:28.097

问题是当你使用`OutgoingMessage.session`它时它还没有初始化。要正确初始化它，请执行以下操作：

```
public class OutgoingMessage {
    public static SMPPSession session = new SMPPSession();
  } 
```

# xml - ASP.Net MVC3-将序列化的 XML 对象返回到调用视图

> ID：12695878
> 
> 赞同：1
> 
> 时间：2012-10-02T18:14:10.987
> 
> 标签：xml, asp.net-mvc, razor

使用 Razor 表单 (Html.BeginForm()) 我在 BooksController 中调用一个操作，该操作对 www.isbndb.com 进行 api 调用以获取图书信息。序列化 XML 响应后，我不确定如何将该数据传回以在调用视图中使用。

### 创建.cshtml

```
@using (Html.BeginForm("searchForISBN", "Books"))
        {
            @Html.TextBoxFor(m => m.Title)
            <input class="btn " id="searchForISBN" type="submit" value="Search" />
        } 
```

### XML 响应

```
<?xml version="1.0" encoding="UTF-8"?>
    <ISBNdb server_time="2005-07-29T03:02:22">
        <BookList total_results="1">
            <BookData book_id="paul_laurence_dunbar" isbn="0766013502">
                <Title>Paul Laurence Dunbar</Title>
                <TitleLong>Paul Laurence Dunbar: portrait of a poet</TitleLong>
                <AuthorsText>Catherine Reef</AuthorsText>
                <PublisherText publisher_id="enslow_publishers">
                    Berkeley Heights, NJ: Enslow Publishers, c2000.</PublisherText>
                <Summary> A biography of....</Summary>
                <Notes>"Works by Paul Laurence Dunbar": p. 113-114.
                   Includes bibliographical references (p. 124) and index.</Notes>
                <UrlsText></UrlsText>
                <AwardsText></AwardsText>
             </BookData>
        </BookList>
  </ISBNdb> 
```

### BooksController 动作

```
public StringBuilder searchForISBN(Books books)
    {
        HttpWebRequest request = WebRequest.Create("http://isbndb.com/api/books.xml?access_key=xxxxxx&index1=title&value1="+books.Title) as HttpWebRequest;
        string result = null;
        using (HttpWebResponse resp = request.GetResponse() as HttpWebResponse)
        {
            StreamReader reader = new StreamReader(resp.GetResponseStream());
            result = reader.ReadToEnd();
        }
        StringBuilder output = new StringBuilder();
        using (XmlReader reader = XmlReader.Create(new StringReader(result)))
        {
            reader.ReadToFollowing("BookList");
            reader.MoveToFirstAttribute();
            reader.MoveToNextAttribute();
            reader.MoveToNextAttribute();
            reader.MoveToNextAttribute();
            string shown_results = reader.Value;
            int numResults;
            bool parsed = Int32.TryParse(shown_results, out numResults);

            for (int i = 0; i < numResults; i++)
            {
                reader.ReadToFollowing("BookData");
                reader.MoveToFirstAttribute();
                reader.MoveToNextAttribute();
                string isbn = reader.Value;
                output.AppendLine("The isbn value: " + isbn);
            }
        }
        return ouput;
    } 
```

我正在尝试将数据返回到调用视图以在 Create.cshtml 中的搜索栏表单下方显示结果。目前它正在返回一个路径为 localhost:xxxxx/Books/searchForISBN 的新视图。

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T19:04:25.223

XmlReader 是用于性能关键代码的低级 API，并且正如您所猜测的，它本身并不会为您创建可以传递给视图的对象。

您可能需要考虑创建自己的强类型对象，该对象封装了 isbndb.com 返回的所有信息。您还可以在紧要关头使用 XmlDocument 类，并使用 XPath 查询它的属性。

```
 XmlDocument doc = new XmlDocument();
    doc.Load(stream);
    string xpath = "data/element[@id='paul_laurence_dunbar']/AuthorsText";
    XmlNode node = doc.SelectSingleNode(xpath);
    if (node != null) {
          Console.WriteLine(node.InnerText);
    } 
```

HTH。粘土

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T19:07:11.543

您可以直接返回视图。像这样：

```
return View("CallingViewName",model); 
```

您可能必须构建一个序列化 XML 书籍信息的模型，但您希望将其传递回视图。

# r - 错误：“\R”是开头“C:\R”的字符串中无法识别的转义

> ID：12695879
> 
> 赞同：31
> 
> 时间：2012-10-02T18:14:16.017
> 
> 标签：r

我正在运行 Windows XP Pro 并且 R 版本 2.15.1 R 安装在以下文件夹中：

> C:\Program Files\R\R-2.15.1

我正在尝试创建一个读取 .csv 文件的函数，如下所示：

```
xxx <- function(id, directory, summarize = FALSE) {
    data <- read.table('C:\xxx\classes\R_Prog\specdata\data.csv')
    head(data)
} 
```

我得到错误

> 错误：“\R”是开头“C:\R”的字符串中无法识别的转义

我的目录结构/文件夹命名约定有问题吗？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-10-02T18:17:05.803

你必须转义，`\`因为它本身就是一个转义字符。

`read.table('C:\\xxx\\classes\\R_Prog\\specdata\\data.csv') head(data) }`

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-10-02T18:28:00.363

由于还没有人建议使用正斜杠，请允许我这样做：

```
R> list.files("C:/opt", pattern="R")
[1] "R-current"  "R-library"  "R-local215" "RStudio"    "Rtools"    
R> 
```

我发现正斜杠“在眼睛上更容易”，因为它使跨操作系统的路径更加一致，并且您也不需要转义它们。这意味着您每次都保存一个完整的字节。雅皮士。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-02T23:12:03.473

还没有人建议`file.path`。这将使用特定于平台的分隔符将字符串连接在一起以形成文件路径（默认`/`在 Windows 上）

```
file.path('c:', 'xxx', 'classes', 'R_prog','specdata', 'data.csv')
## [1] "c:/xxx/classes/R_prog/specdata/data.csv" 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-02T18:16:47.127

你需要逃避你的反斜杠。尝试将它们加倍：c:\\xxx\\classes\\R_Prog\\ 等。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2015-04-06T17:40:12.383

我发现这两个 \ （转义）

```
C:\\xxx\\classes\\R_Prog\\specdata\\data.csv 
```

和 / 解决方案的工作：

```
C:/xxx/classes/R_prog/specdata/data.csv 
```

我个人觉得后者更容易使用。

# sbt - 如何将库添加到 Intellij IDEA sbt Scala Android 项目？

> ID：12695886
> 
> 赞同：1
> 
> 时间：2012-10-02T18:14:56.843
> 
> 标签：sbt, android-library, library-project, sbt-idea

当我尝试在控制台中编译我的 sbt 项目时，出现以下错误：

> compile [info] Wrote D:\androidProjects\myfootball\target\scala-2.9.1\src_managed\main\scala\my\android\myfootball\TR.scala [info] 将 4 个 Scala 源代码和 1 个 Java 源代码编译到 D:\ androidProjects\myfootball\target\scala-2.9.1\classes... [错误] D:\androidProjects\myfootball\target\scala-2.9.1\src_managed\main\scala\my\android\myfootball\TR.scala： 9:**类型 MapView 不是包 ru.yandex.yandexmapkit 的成员**
> [error] **val map = TypedResourceru.yandex.yandexmapkit.MapView** [error] ^ [error] 发现一个错误 [error] {file:/D:/androidProjects/ myfootball/}MyFootball/compile:compile: Compilation failed [error] Total time: 2 s, completed 02.10.2012 21:36:23

我已经在*Project Module Settings* -> *Libraries*中添加了带有 MapView 的库，并且 ctrl+click 在 MapView 组件上工作正常。我也尝试通过在我的 build.sbt 文件中添加依赖来做到这一点

```
 libraryDependencies += "ru.yandex" % "yandexmapkit" % "1.0" 
```

并且当我在控制台中更新 sbt 时成功下载了依赖项......但一切都是徒劳的...... ..我在尝试编译我的项目时失败了。有人知道添加库的另一种方法吗？

# sed - 提取文件列表并创建包含此列表的新文件 [第 2 部分]

> ID：12695887
> 
> 赞同：0
> 
> 时间：2012-10-02T18:15:01.870
> 
> 标签：sed, awk, extract, filenames

我之前问过一个类似的问题

[提取文件列表并创建包含此列表的新文件](https://stackoverflow.com/questions/12592513/extracting-a-list-of-files-and-creating-a-new-file-containing-this-list)

然而，这一次更具挑战性：

我目前正在处理一个包含大约 1000 个文件的文件夹，我必须从该文件夹中提取一些文件名并创建另一个包含这些文件名的文件（配置文件）。

基本上，该文件夹具有以下格式的文件名：

```
1_Apple_A1_someword.txt 
1_Apple_A2_someword.txt
2_Apple_A1_someword.txt 
2_Apple_A2_someword.txt 
3_Apple_A1_someword.txt 
3_Apple_A2_someword.txt 
```

依此类推，直到

```
1000_Apple_A1_someword.txt
1000_Apple_A2_someword.txt 
```

我想为这些文件中的每一个创建另一个具有“标签”（Unix变量）的文件，其值是每个“标签”的两个文件的名称，格式如下。（每个标签的两个文件由选项卡分隔）。此外，“标签”是文件名的一部分（直到单词“Apple”）例如，

```
1_Apple=1_Apple_A1_someword.txt 1_Apple_A2_someword.txt
2_Apple=2_Apple_A1_someword.txt 2_Apple_A2_someword.txt
3_Apple=3_Apple_A1_someword.txt 3_Apple_A2_someword.txt 
```

等等……直到

```
1000_Apple=1000_Apple_A1_someword.txt 1000_Apple_A2_someword.txt 
```

你能告诉我一个执行此操作的单行 Unix 命令吗？也许使用“awk”和“sed”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T19:04:25.160

使用 sed 脚本：

```
#!/bin/sed -nf

: loop
H
s/\([^_]*_[^_]*\)_.*/\1/g

t clear_flag
: clear_flag

$! {
    N
    s/^\([^_]*_[^\n]*\)\n\(\1[^\n]*\)$/\2/
    t loop
}

x
s/^\n//
s/\([^_]*_[^_]*\)_/\1=\1_/
s/\n/ /gp

s/.*//
x
D 
```

我会尽力解释一切。首先，我们有一个循环将所有以相同前缀开头的文件连接在一起。我根据您的示例定义了一个前缀，它被定义为以第二个下划线结尾的字符串。循环由标签定义，使用“：”命令。在这里，我们将循环标记为“循环”。再往下，必要时，我们使用“t”测试命令“跳”回循环的开始。

第一个命令是将行附加到保持空间（辅助缓冲区）中。该行在附加之前由 sed 自动以换行符 ('\n') 为前缀。

第二个命令提取前缀。我们通过捕获一系列非下划线 ( `[^_]*`) 的字符来做到这一点，然后是一个下划线，然后是更多的非下划线字符。因为此模式位于反斜线括号 (`\(`和`\)`) 之间，所以 sed 将捕获与此模式匹配的输入并保存到一个名为的辅助变量中`\1`（因为它是该行上的第一个捕获）。然后我们跳过一个下划线，后跟一个任意字符序列。替换是我们捕获的，所以实际上我们只是删除了包括第二个下划线之后的所有内容。

我们现在使用一种解决方法来清除 seds 内部标志，该标志指示自上一个“t”命令或脚本启动以来是否发生了成功的替换。如果替换命令成功，测试命令（“t”）将分支（跳转）到标签，然后清除内部标志。这对于我们下面的第二个“t”命令是必要的。如果它成功或失败（即它是否分支），它仍然会在“clear_flag”标签之后继续执行。

现在我们使用“{”命令来启动一组命令。但是，我们在它之前有一个地址前缀，sed 使用它来确定它是否应该运行这些命令。在我们的例子中，只有在读取的最后一个输入行不是最后一行时才执行该组（美元符号“$”代表最后一个输入行，“!”代表否定）。

该组中的第一个命令会将输入中的下一行附加到当前模式空间（即工作缓冲区）中。上一行和新行由换行符 ( `\n`) 分隔。

第三个命令将检查新读取的行是否以我们的前缀开头，并删除孤立的前缀（即前一行）。因为我们从前一行保留的前缀中删除了第二个下划线，并且因为我们附加了一个新行，所以隔离的前缀现在在换行符之前结束。因此，捕获的模式现在读取下划线后不是换行符 ( `[^\n]*`) 的字符。在我们捕获隔离前缀后，我们跳过分隔前一行和新行的换行符，然后我们开始另一个捕获（将存储在`\2`，因为它是这条线上的第二次捕获）。此捕获将（希望）与第二行匹配。希望因为我们要求匹配完全按照第一次捕获中匹配的内容开始（这就是为什么第二次捕获中的第一件事是对第一个 cature 的反向引用，即。`\1`）。之后，我们匹配一个不是换行符的字符序列，并且在第二次捕获之后，我们期望行尾。

如果最后一个替换命令成功，我们发现新读取的行也有相同的前缀，所以我们现在必须跳回到循环的开头。这就是“t”命令的功能。它将测试自上一个“t”命令以来是否有任何替换命令成功，如果是，则分支到给定标签。在我们的例子中，我们分支（跳转）回“循环”标签。现在我们可以看到为什么我们需要以前的“t”解决方法。没有它，第一个替代命令可能会成功，而我们真正感兴趣的命令可能会失败，并且“t”仍会分支回“循环”标签。

如果它离开循环，则意味着新读取的行没有相同的前缀。因此，我们现在可以打印之前匹配的内容。

我们首先使用交换（“x”）命令将模式空间的内容与保持空间的内容交换。现在我们的模式空间包含所有具有相同前缀的文件，并且我们的保持空间包含当前前缀在一个孤立的行中，然后是第一个文件不共享相同前缀的行。

由于之前我们将所有文件名附加到保持空间，所有文件名都由换行符分隔，并且由于第一个文件名也被附加，当前模式空间中的第一个字节是换行符。要删除它，我们只需将其替换为空即可。

现在我们必须生成作业的格式。这就是为什么我们有一个熟悉的替代命令，我们再次提取前缀，除了现在我们已经删除了`.*`以保持该行的其余部分完整。替换包括前缀（捕获的）、一个等号，我们还恢复了我们从模式空间中的第一个文件中删除的内容：它的前缀和它的下划线。

我们几乎准备好打印出该行，但文件名仍由换行符分隔。因此，我们`g`用空格替换所有换行符（该标志告诉 sed 在输入行上尽可能多地重复替换命令）。由于现在该行已准备就绪，我们可以添加`p`前缀来告诉 sed 打印它。

最后一步是为下一个前缀准备再次启动脚本。保留空间必须为空，以便用于存储具有新前缀的文件名。那就是我们有一个命令将模式空间中的每个字符都替换为空，然后是一个交换命令。

存放空间已准备就绪。现在我们必须准备模式空间。它必须仅包含带有新前缀的文件名的第一行。要处于这种状态，我们所要做的就是删除存储在第一行中的旧前缀。我们可以做一些事情，比如`s/.*\n//`替换除最后一行的字符（包含带有新前缀的文件名）之外的所有字符，但是该`D`命令将执行此操作并强制脚本再次开始执行而不读取另一行，所以它为我们节省了一些打字时间。

尽管脚本可能有点神秘并且描述过于繁琐，但一旦您了解发生了什么，它就会开始变得简单(r) =)

必须提到的一点：输入必须排序（或者至少具有相同前缀的文件必须组合在一起）。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T12:09:02.303

```
> ls -1 | perl -F_ -ane 'chomp;if($_=~m/Apple_A/){$X{$F[0]."_".$F[1]}=$X{$F[0]."_".$F[1]}." ".$_;}END{foreach (keys %X){print $_."=".$X{$_}."\n"}}'
3_Apple= 3_Apple_A1_someword.txt 3_Apple_A2_someword.txt
2_Apple= 2_Apple_A1_someword.txt 2_Apple_A2_someword.txt
1_Apple= 1_Apple_A1_someword.txt 1_Apple_A2_someword.txt 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T22:38:31.343

这可能对您有用（GNU sed）：

```
sed '$!N;s/^\(\(.*\)_.*_.*\)\n/\2=\1 /' file 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T06:25:44.987

```
num=1
while [ $num -le 1000 ]
do
echo "${num}_Apple=${num}_Apple_A1_someword.txt ${num}_Apple_A2_somword.txt"
num=`expr $num + 1`
done 
```

输出：

```
1_Apple=1_Apple_A1_someword.txt 1_Apple_A2_somword.txt
2_Apple=2_Apple_A1_someword.txt 2_Apple_A2_somword.txt
3_Apple=3_Apple_A1_someword.txt 3_Apple_A2_somword.txt
4_Apple=4_Apple_A1_someword.txt 4_Apple_A2_somword.txt
5_Apple=5_Apple_A1_someword.txt 5_Apple_A2_somword.txt
........... 
```

如果数字 1000 不是静态的，那么您可以从文件本身获取值：

```
num=`cat file|sort|tail -1|awk -F"_" '{print $1}' 
```

谢谢

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-02T19:38:53.987

使用简短的 awk one-liner：

```
awk -F'_' '{if (NR % 2) {printf("%s_%s=%s", $1, $2, $0)} else {print}}' FILE 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-02T19:42:51.807

使用 sed：

```
sed 'N;s/\n/ /;s/\([^_]*_Apple\)/\1=\1/' 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-02T18:37:00.903

使用 Perl：

```
perl -pe 'if ($. % 2) { /([0-9]+_Apple)/ and print "$1="; s/\s+$/ /; }' 
```

在奇数行上，匹配 ...Apple，用 = 输出，并将行尾的空格替换为一个空格。

**注意：** Unix 变量的名称不能以数字开头。

# c++ - 在不复制代码的情况下重载 C++ 模板函数

> ID：12695890
> 
> 赞同：1
> 
> 时间：2012-10-02T18:15:10.123
> 
> 标签：c++

我写了以下函数：

```
template< class C, typename T, typename U >
void addVarCB(C * _this, const std::string &name, 
    T(C::*getter)(void) const, U(C::*setter)(const T&), const std::string &def); 
```

然后我意识到如果 setter 将 T 作为输入，它将不起作用，所以我重载了该函数：

```
template< class C, typename T, typename U >
void addVarCB(C * _this, const std::string &name, 
T(C::*getter)(void) const, U(C::*setter)(T), const std::string &def = ""); 
```

现在我意识到，如果吸气剂返回，即使这样也会失败

```
const T &
T &
const T *
T *
const T // yeah this is dumb but someone on my team wrote code like this... 
```

我注定要到处复制相同的代码吗？希望至少解决方案仅适用于参考版本？

请注意，该函数采用指向对象的 this 指针、getter 和 setter 公共成员函数。然后，该函数将与 GUI 接口，允许稍后回调 getter 和 setter。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T18:41:36.483

一些模板元编程可以解决您的问题：（以下需要 C++11，但同样可以使用 boost 来实现）

```
#include<string>
#include<type_traits>

template<typename T>
struct BaseType {
    typedef typename std::remove_const<typename std::remove_reference<T>::type>::type type;
};

struct MyClass{
    int a;
    std::string s;
    const int & getA() const {return a;}
    void setA(int a) {this->a=a;}
    std::string getS() const {return s;}
};

template< class C, typename Tget, typename Tset, typename U, 
    class = typename std::enable_if<
                std::is_same<
                   typename BaseType<Tget>::type, 
                   typename BaseType<Tset>::type>::value,void>::type >
void addVarCB(C * _this, const std::string &name, 
    Tget(C::*getter)(void) const, U(C::*setter)(Tset), const std::string &def = "") {
}

int main() {
    MyClass c;
    addVarCB(&c,std::string("a"),&MyClass::getA,&MyClass::setA,std::string("a"));
    //addVarCB(&c,std::string("a"),&MyClass::getS,&MyClass::setA,std::string("a")); // Compiler error
} 
```

在这里，我们简单地让 get 和 set 类型（`Tget`和`Tset`分别）独立推导。然后我们去除这些类型的任何常量或引用并检查它们是否相同；如果没有，我们会使用`enable_if`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T18:22:02.130

只需制作`GetType`独立`SetType`的模板参数，让编译器担心它们是否可转换。

例如。这个：

```
template< class C, typename T, typename U >
void addVarCB(C * _this, const std::string &name, 
    T(C::*getter)(void) const, U(C::*setter)(const T&), const std::string &def); 
```

要求 that的参数是对任何返回`setter`值的 const 引用。`getter`然而，这：

```
template <typename Class, typename GetResult, typename SetArg, typename SetResult>
void addVarCB(Class *instance, std::string const& name,
              GetResult (Class::*getter)() const,
              SetResult (Class::*setter)(SetArg),
              std::string const &def); 
```

允许`setter`参数和`getter`返回类型不同。现在，假设你想将一个传递给另一个，它只会在它们是可转换的情况下编译（或者你可以使用 C++11 或 Boost.TypeTraits`is_convertible`来明确断言）。

* * *

...如果这*不起作用*`addVarCB`，如果你展示里面的内容，或者解释你想要实现的目标，它可能会有所帮助。

# javascript - 加载的子部分视图应如何更改父视图中的 javascript 变量？

> ID：12695892
> 
> 赞同：3
> 
> 时间：2012-10-02T18:15:22.883
> 
> 标签：javascript, ajax, asp.net-mvc-partialview

这是在 asp.net mvc 3 中，但是我认为这种情况相当普遍。

我有一个从 ajax 加载的部分视图作为预览。在预览中，如果部分预览动作不正确，可以选择复选标记。我需要在启动预览的视图中重新捕获它。我已经开始这样做了：

```
<script>
 var checkmark = false;
 $.ajax(/*load view*/);
 function calledLaterAfterPartialViewRendered(){
  if( checkmark == true ){
    //action
  }
 }
</script> 
```

加载视图：

```
<script>
 //checkmark's state will be determined by the user
 $("#SomeCheckBoxInput").click(function(){ checkmark = this.value; });
</script> 
```

一旦状态被确定，整个局部视图就会从 DOM 中移除。访问状态是否有更好的做法？我知道选中标记将在加载的视图中可用，并且在加载的视图消失后调用的函数将能够访问更新的变量。但是，这似乎不是最好的可读性。

这是标准吗，在这种情况下是否有最佳实践？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T18:18:19.300

好的，我明白你现在在问什么。只需检查该复选框是否在您的函数正文中被选中。所以你的复选框看起来像：

```
<input type='checkbox' id='check'/> 
```

在您的功能中：

```
if ($('#check').prop('checked')){
    // The checkbox is checked
} 
```

# matlab - Matlab：采用普通 Matlab ODE 参数的 CVODE 接口

> ID：12695899
> 
> 赞同：3
> 
> 时间：2012-10-02T18:15:52.257
> 
> 标签：matlab, ode

CVODE 是流行的[SUNDIALS 包](https://computation.llnl.gov/casc/sundials/main.html)中的两个 ODE 求解器之一。提供了一个Matlab接口，但是用法和标准的Matlab`ode*`接口不一样。必须初始化求解器，然后逐步遍历所需的每个时间点，最后释放内存。显然，它不是类似`ode15s`. **有没有人围绕 CVODE 编写了一个包装器，它采用 Matlab ODE 求解器的常用参数？**

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-15T18:25:20.917

好吧，也许你已经找到了答案，但如果没有，你应该看看这个页面：

[http://bmi.bmt.tue.nl/sysbio/software/pua.html](http://bmi.bmt.tue.nl/sysbio/software/pua.html)

我已经使用这个软件几个月了，它完全符合您的要求。

# python - 动画帮助，带有 Pygame 的 Python 3.2

> ID：12695903
> 
> 赞同：1
> 
> 时间：2012-10-02T18:16:11.590
> 
> 标签：python, animation, pygame

我目前正在制作横向滚动游戏。我画了一个简笔画，画了一个动画，当'W'键被按下时他会向右走。问题是当我按住 W 时，我不知道如何使原始图纸（他保持不动的那张）消失，因此它们相互重叠。这是我的代码：

```
def pulse_ninja(screen,x,y):

    #Head
    pygame.draw.ellipse(screen,PULSEPURPLE,[14+x,-8+y,15,15],0)

     #Legs
    pygame.draw.line(screen,WHITE,[20+x,17+y],[25+x,27+y],4)
    pygame.draw.line(screen,WHITE,[20+x,17+y],[15+x,27+y],4)

     #Body
    pygame.draw.line(screen,PULSEPURPLE,[20+x,16+y],[20+x,-2+y],4)

     #Arms
    pygame.draw.line(screen,PULSEPURPLE,[20+x,3+y],[30+x,18+y],4)
    pygame.draw.line(screen,PULSEPURPLE,[20+x,3+y],[10+x,18+y],4)

    #Sword
    if event.type == pygame.KEYUP:
        if event.key == pygame.K_w:
            pygame.draw.line(screen,GREEN,[30+x,18+y],[35+x,0+y],3)
    if event.type == pygame.KEYDOWN:
        if event.key == pygame.K_w:
            pygame.draw.line(screen,GREEN,[30+x,18+y],[50+x,16+y],3)

def ninja_animate_right(screen,x,y):

     if event.type == pygame.KEYDOWN:
         if event.key == pygame.K_d:
            # Head
            pygame.draw.ellipse(screen,PULSEPURPLE,[16+x,-6+y,15,15],0)

            # Legs
            pygame.draw.arc(screen,WHITE,[10+x,0+y,15,30], 3*pi/2, 2*pi, 2)
            #pygame.draw.arc(screen,WHITE,[20+x,17+y],[15+x,27+y],4)

            # Body
            pygame.draw.line(screen,PULSEPURPLE,[20+x,16+y],[25+x,-2+y],4)

            # Arms
            pygame.draw.line(screen,PULSEPURPLE,[20+x,3+y],[30+x,18+y],4)
            pygame.draw.line(screen,PULSEPURPLE,[20+x,3+y],[10+x,18+y],4) 
    if event.type == pygame.KEYUP:
        if event.key == pygame.K_w:
            pygame.draw.line(screen,GREEN,[30+x,18+y],[35+x,0+y],3)
    if event.type == pygame.KEYDOWN:
        if event.key == pygame.K_w:
            pygame.draw.line(screen,GREEN,[30+x,18+y],[50+x,16+y],3) 
```

当我打电话给他们时，我只是让他们一个接一个

```
pulse_ninja(screen,x,y)

ninja_animate_right(screen,x,y) 
```

我猜我需要一个while循环？有停止模块吗？假设我想运行一个函数，然后在满足条件后停止它。这基本上就是我想要做的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T18:30:11.973

好吧，一个小建议，在你的课堂上，定义一个状态：向左、向右、停止等。在你的移动领域，根据你角色的当前状态绘制东西。所以你唯一需要做的是：

```
if event.type == pygame.KEYUP:
    if event.key == pygame.K_w:
        character.state = WALKING

if event.type == pygame.KEYDOWN:
    if event.key == pygame.K_w:
        character.state = STANDING 
```

在您的移动功能中，您将查看当前状态，并相应地进行绘制。我推荐使用类，因为变量和函数会更有条理。

# canvas - 如何测量动力学js中的文本宽度？

> ID：12695913
> 
> 赞同：5
> 
> 时间：2012-10-02T18:16:45.857
> 
> 标签：canvas, kineticjs, text-width

在 KineticJs 中，是否有一种方法或解决方法可以返回文本形状中字符串的文本宽度？

我需要它在画布上精确定位 TextShape。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-11T08:58:07.440

Kinetic.Text 具有 getTextHeight() 和 getTextWidht() 方法来为您执行此操作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-25T12:34:24.527

[这](http://www.html5canvastutorials.com/tutorials/html5-canvas-text-metrics/)可能会帮助你。它演示了如何获取某些文本的宽度。还有一个指向另一个示例的链接，显示如何对多行文本执行此操作，[此处](http://www.html5canvastutorials.com/tutorials/html5-canvas-wrap-text-tutorial/)。

# razor - ReSharper 支持自定义剃须刀指令

> ID：12695916
> 
> 赞同：2
> 
> 时间：2012-10-02T18:17:03.940
> 
> 标签：razor, resharper

我正在通过覆盖 WebRazorHostFactory、MvcWebPageRazorHost 和相关类来扩展 MVC3，以创建一个自定义指令（如 @model），它将视图的基类更改为从 WebPageBase 派生的自定义类，并且还将为其添加第二个通用参数。一切正常，课程生成正确；但是，ReSharper 无法识别新指令。有没有办法扩展 ReSharper 来识别这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T08:11:25.507

詹姆斯，理论上，使用 ReSharper SDK 是可能的。但这将是一个非常核心的插件，与许多子系统相关。如果您要朝这个方向采取行动，我们可以帮助您，回答具体问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T08:12:57.957

理论上你可以为 ReSharper 编写这样的插件。但这很复杂，结果无法保证。准备好用 DotPeek 查看 ReSharper 的代码数小时。您可以从查看 RazorModelDirective、RazorCSharpMvcLanguage 和 RazorCSharpMvcLanguageService 开始。您需要制作与这些类似的课程。

# linq - 如何向 WCF 数据服务添加简单计数

> ID：12695921
> 
> 赞同：0
> 
> 时间：2012-10-02T18:17:18.863
> 
> 标签：linq, rest, wcf-data-services

我有一个简单的 WCF 数据服务设置。我选择了 Linq-to-SQL 解决方案。

```
public class MyDataService : DataService<SomeDataContext>
{
        public static void InitializeService(DataServiceConfiguration config)
        {
            config.SetEntitySetAccessRule("*", EntitySetRights.AllRead);
            config.SetEntitySetPageSize("*", 20);
            config.DataServiceBehavior.MaxProtocolVersion = DataServiceProtocolVersion.V3;
        } 
```

由于我使用的是 Linq，我必须为键添加部分类

```
[DataServiceKey("MessageId")]
public partial class Message
{
}

[DataServiceKey("UserId")]
public partial class User
{
} 
```

...

所以我想添加一个原始方法来获取已发送消息的特殊用户。由于[不支持诸如计数之类的 Linq 聚合运算符，](http://msdn.microsoft.com/en-us/library/ee622463%28v=vs.103%29.aspx)我认为一个不错的解决方法是为计数创建一个只读资源端点。所以我添加了一个方法

```
 [WebGet]
    public int NumSpecialUsers()
    {
        var context = new SomeDataContext();
        int numUsers =
            context.Messages
            .Where(x => x.special == true && x.UserId != null)
            .Select(x => x.UserId)
            .Distinct()
            .Count();

        return numUsers;
    } 
```

并将必要的配置添加到`InitializeService()`

```
 config.SetServiceOperationAccessRule("NumUsers", ServiceOperationRights.AllRead); 
```

我可以通过 localhost:1234/MyDataService.svc/NumSpecialUsers 成功调用该方法，但是在 localhost:1234/MyDataService.svc 中没有发现此方法。这似乎不对。如果不显示在 localhost:1234/MyDataService.svc 中，这将违反 REST，因为这意味着一个不可发现的端点。这也意味着当您使用 Visual Studio 创建 OData Linq 代理时，它也不会在那里显示该方法。

我既不是 REST | 数据 | WCF 数据服务专家，所以如果有人对此有想法，我很想听听他们的意见。我刚刚开始涉足 OData 和 WCF 数据服务，我想对事情采取一种好的方法。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T19:58:58.507

问题是要在服务文档中显示服务操作，如果服务操作带参数，url 会是什么样子？

我们可以选择不显示任何服务操作或仅显示不带参数的服务操作 - 我们在一致性方面犯了错误并做出了前一种选择。

如果你仍然认为只显示不带参数的服务操作会更好，那么我很乐意听到这个论点，如果我们得到很多关于这个特性的反馈，我什至会做出改变。

谢谢普拉蒂克

# redirect - 重定向和谷歌索引

> ID：12695925
> 
> 赞同：1
> 
> 时间：2012-10-02T18:17:33.547
> 
> 标签：redirect, indexing

我在这里为客户设计了一个网站：[http ://www.haniabyanyacole.com](http://www.haniabyanyacole.com)

我正在使用元 http-equiv="refresh" 将用户从启动页面重定向到 haniabyanyacole.com/site/ （我知道不建议这样做），我认为这导致谷歌返回第一个搜索结果使用[http://haniabyanyacole.com/site](http://haniabyanyacole.com/site)代替根目录的 公司名称。

是否有重定向解决方案（301、302？）将强制 Google 索引根目录而不是 /site/？仅供参考，我已将站点地图上传到 Google 网站管理员工具，其中包括 haniabyanyacole.com/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T18:42:54.310

与其使用谷歌等同于重定向响应标头的 META HTTP-EQUIV，您可以尝试使用 javascript 延迟为您执行重定向。也许是这样的：

```
<script type="text/javascript">
<!--
function redirect_to_site(){
    window.location = "http://haniabyanyacole.com/site"
}
//-->
</script> 
```

在您的页眉中，然后在正文标记中添加：

```
onLoad="setTimeout('redirect_to_site()', 10000)" 
```

所以它看起来像：

```
<body onLoad="setTimeout('redirect_to_site()', 10000)" > 
```

这将`http://haniabyanyacole.com/site`在 10 秒后重定向到。

# ruby-on-rails - 如何在 rails 属性中传递动态内容？

> ID：12695933
> 
> 赞同：0
> 
> 时间：2012-10-02T18:17:58.633
> 
> 标签：ruby-on-rails, ruby

我有两个模型：

```
Class Foo
field :title
end

Class Bar
 field :description
end 
```

在 IRB 我试过：

```
1.9.3p125 :001 > f = Foo.new(title: "<%= bar.description %>")
 => #<Foo _id: 506b2de61d41c84b07000002, _type: nil, title: "<%= bar.description %>"> 
1.9.3p125 :002 > f.save
 => true
1.9.3p125 :004 > f.title
=> "<%= bar.description %>" 
```

我如何放入`Object Bar`内部`f.title`属性？

是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T18:22:17.533

您不需要字符串插值，只需将标题设置为 bar.description

```
f = Foo.new(title: bar.description) 
```

如果你想在其中包含额外的东西，你可以这样做。

```
f = Foo.new(title: "Title for: #{bar.description}") 
```

如果你真的想要那里的 erb 处理程序，你可以这样做

```
f = Foo.new(title: "<%= #{bar.description} %>") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T18:24:42.073

这种字符串插值适用于`.erb`模板，但不适用于简单的 ruby​​ 对象。如果您仍想使用插值，那么您可以执行以下操作：

```
f = Foo.new(title: "#{bar.description}") 
```

# unit-testing - TypeScript 中的单元测试

> ID：12695934
> 
> 赞同：38
> 
> 时间：2012-10-02T18:18:03.073
> 
> 标签：unit-testing, typescript

我知道，TypeScript 已经诞生了一天。但我很好奇这里是否有某种单元测试框架或如何为 TypeScript 编写和运行单元测试？

TypeScript 可以编译为 JavaScript，我可以为该 JavaScript 编写测试，但这不是我想要的。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-02T18:32:08.037

TypeScript 不是运行时语言。要执行您的 TypeScript 代码，您首先需要将其编译为 JavaScript；同样适用于测试它。你的测试也可以在 TypeScript 中，编译成 JavaScript 并使用你最喜欢的测试框架来执行测试。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-10-02T21:31:26.570

您可以使用任何现有的 JavaScript 单元测试框架在 TypeScript 或 JavaScript 中编写单元测试。

很快，我想现有的框架将获得 TypeScript 环境定义文件（更新 - 它们有：[http](http://definitelytyped.org/) ://definitelytyped.org/ ），这将使它们就 TypeScript 而言是静态类型的。同时，您可能需要阅读环境声明并在测试开始时添加一些您自己的声明。

或者，您可以使用[tsUnit TypeScript 单元测试框架](http://tsunit.codeplex.com/)，这是一个用 TypeScript 编写的单元测试框架 - 所以它与 TypeScript 配合得很好（也可以在 JavaScript 中使用）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-30T16:50:50.870

似乎还有另一个名为 Intern 的测试运行程序/框架。[https://theintern.github.io/](https://theintern.github.io/)

这是一篇解释如何将它与 TypeScript 结合使用的文章：[https ://www.sitepen.com/blog/2015/03/24/testing-typescript-with-intern/](https://www.sitepen.com/blog/2015/03/24/testing-typescript-with-intern/)

当您使用 TypeScript 并且正在寻找支持源映射的单元测试设置时，看起来很有希望。

示例测试：

```
import registerSuite = require('intern!object');
import assert = require('intern/chai!assert');
// Assume that we now have a version of our model in TypeScript:
import SimpleTodoModel = require('todo/model/SimpleTodoModel');

registerSuite({
    name: 'SimpleTodoModel',
    // Assume we have a promises interface defined
    'default data'() {
        var emptyModel = new SimpleTodoModel(),
            id:string = emptyModel.get('id'),
            length:number = emptyModel.get('todos').length,
            incomplete:number = emptyModel.get('incomplete'),
            complete:number = emptyModel.get('complete');
        assert.strictEqual(id, 'todos-dojo',
                    'Id should default to "todos-dojo"');
        assert.strictEqual(length, 0,
                    'Todos array should default to an empty array.');
        assert.strictEqual(incomplete, 0,
                    'Incomplete count should default to 0.');
        assert.strictEqual(complete, 0,
                    'Incomplete count should default to 0.');
    }
}); 
```

# ios - 我的应用程序崩溃了……在 NSLog 中？真的吗？

> ID：12695936
> 
> 赞同：1
> 
> 时间：2012-10-02T18:18:17.550
> 
> 标签：ios, crash, nslog

这听起来非常非常奇怪，但似乎是这个堆栈跟踪所暗示的。

有任何想法吗？

```
Thread: Unknown Name (Crashed)
0   0   libsystem_kernel.dylib              0x38a79350 __pthread_kill + 8
1   1   libsystem_c.dylib                   0x34002973 abort + 94
2   2   libsystem_c.dylib                   0x33fccf19 <redacted>
3   3   libsystem_c.dylib                   0x33fcd1dd <redacted> + 28
4   4   libsystem_c.dylib                   0x33f9977b <redacted> + 214
5   5   libsystem_c.dylib                   0x33f98773 <redacted> + 1198
6   6   libsystem_c.dylib                   0x33f98293 malloc_zone_malloc + 70
7   7   CoreFoundation                      0x36a32a10 <redacted> + 252
8   8   CoreFoundation                      0x36a33e4c <redacted> + 92
9   9   CoreFoundation                      0x3695b777 CFDictionarySetValue + 166
10  10  CoreFoundation                      0x36a27467 <redacted> + 102
11  11  CoreFoundation                      0x369a2347 CFCalendarCreateWithIdentifier + 534
12  12  CoreFoundation                      0x36a06f8b <redacted> + 106
13  13  CoreFoundation                      0x369ab021 _CFLogvEx + 188
14  14  Foundation                          0x347a5d8f NSLogv + 86
15  15  Foundation                          0x347a5d2f NSLog + 26
16  16  TypOHD                              0x000efe5f -[TypoViewControllerBase markIt:] (TypoViewControllerBase.m:325) 
```

这就是奇怪的原因：方法中的所有 NSLog 调用都使用静态 NSString 常量。这是方法：

```
- (IBAction) markIt:(id)sender
{

    NSLog(@"Marking it");
    NSMutableArray *arr = [[NSMutableArray alloc] init];
    NSRange visible = [self visibleRangeOfTextView:self.source];
    NSRange last = NSMakeRange(visible.location, 0);
    //    int cursorPos = self.textView.selectedRange.location;
    NSString *text = self.source.text;
    while (true) {
        NSRange error = [controller rangeOfMisspelledWordInString:text onlyInRange:visible startingAt:last.location + last.length];
        last = error;
        if (error.location == NSNotFound || error.length == 0) {
            break;
        }
        [arr addObject:[NSValue valueWithRange:error]];
    }
    NSLog(@"Spellchecked");

    UIGraphicsBeginImageContextWithOptions(self.overlay.frame.size, NO, 0); 
    [[UIColor redColor] setStroke];
    UITextPosition *current = self.source.beginningOfDocument;
    int curTextPos = 0;
    CGFloat dash[] = {2.0f, 2.0f} ;
    int sourceLen = text.length;
    // Make the text ranges and mark them
    for (NSValue *val in arr) {
        NSRange range = [val rangeValue]; 
        if (range.location + range.length >= sourceLen) {
            break;
        }
        int toMove = range.location - curTextPos;
        UITextPosition *start = [self.source positionFromPosition:current offset:toMove];
        current = start;
        curTextPos = range.location;
        UITextPosition *end = [self.source positionFromPosition:start offset:range.length];

        UITextRange *textRange = [self.source textRangeFromPosition:start toPosition:end];
        CGRect rectInTextView = [self.source firstRectForRange:textRange];
        CGRect toDraw = rectInTextView;
        toDraw.origin.y -= self.source.contentOffset.y;
        UIBezierPath*    aPath = [UIBezierPath bezierPath];
        [aPath setLineDash:dash count:2 phase:0];

        CGPoint lineStart = toDraw.origin;
        lineStart.y += toDraw.size.height;
        CGPoint lineEnd = lineStart;
        lineEnd.x += toDraw.size.width;

        [aPath moveToPoint:lineStart];
        [aPath addLineToPoint:lineEnd];
        [aPath stroke];        
    };
    self.overlay.image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();    
    NSLog(@"Done");
} 
```

编辑：

一些在日志中的挖掘表明这是一种内存不足的情况，导致后来的怪异。但我怀疑内存泄漏并不是这种方法特别引起的。据我所知，它正确地释放了它的上下文，对吧？

```
Oct  2 20:23:55 Admins-MacBook-Pro.local SkrivestotteHD[35780] <Error>: CGBitmapContextInfoCreate: unable to allocate 8552448 bytes for bitmap data
Oct  2 20:23:55 Admins-MacBook-Pro.local SkrivestotteHD[35780] <Error>: CGContextSetStrokeColorWithColor: invalid context 0x0
Oct  2 20:23:55 Admins-MacBook-Pro.local SkrivestotteHD[35780] <Error>: CGContextSaveGState: invalid context 0x0
Oct  2 20:23:55 Admins-MacBook-Pro.local SkrivestotteHD[35780] <Error>: CGContextSetLineWidth: invalid context 0x0
Oct  2 20:23:55 Admins-MacBook-Pro.local SkrivestotteHD[35780] <Error>: CGContextSetLineJoin: invalid context 0x0
Oct  2 20:23:55 Admins-MacBook-Pro.local SkrivestotteHD[35780] <Error>: CGContextSetLineCap: invalid context 0x0
Oct  2 20:23:55 Admins-MacBook-Pro.local SkrivestotteHD[35780] <Error>: CGContextSetMiterLimit: invalid context 0x0
Oct  2 20:23:55 Admins-MacBook-Pro.local SkrivestotteHD[35780] <Error>: CGContextSetFlatness: invalid context 0x0
Oct  2 20:23:55 Admins-MacBook-Pro.local SkrivestotteHD[35780] <Error>: CGContextSetLineDash: invalid context 0x0
Oct  2 20:23:55 Admins-MacBook-Pro.local SkrivestotteHD[35780] <Error>: CGContextAddPath: invalid context 0x0
Oct  2 20:23:55 Admins-MacBook-Pro.local SkrivestotteHD[35780] <Error>: CGContextDrawPath: invalid context 0x0
Oct  2 20:23:55 Admins-MacBook-Pro.local SkrivestotteHD[35780] <Error>: CGContextRestoreGState: invalid context 0x0
Oct  2 20:23:55 Admins-MacBook-Pro.local SkrivestotteHD[35780] <Error>: CGContextSaveGState: invalid context 0x0
Oct  2 20:23:55 Admins-MacBook-Pro.local SkrivestotteHD[35780] <Error>: CGContextSetLineWidth: invalid context 0x0
Oct  2 20:23:55 Admins-MacBook-Pro.local SkrivestotteHD[35780] <Error>: CGContextSetLineJoin: invalid context 0x0
Oct  2 20:23:55 Admins-MacBook-Pro.local SkrivestotteHD[35780] <Error>: CGContextSetLineCap: invalid context 0x0
Oct  2 20:23:55 Admins-MacBook-Pro.local SkrivestotteHD[35780] <Error>: CGContextSetMiterLimit: invalid context 0x0
Oct  2 20:23:55 Admins-MacBook-Pro.local SkrivestotteHD[35780] <Error>: CGContextSetFlatness: invalid context 0x0
Oct  2 20:23:55 Admins-MacBook-Pro.local SkrivestotteHD[35780] <Error>: CGContextSetLineDash: invalid context 0x0
Oct  2 20:23:55 Admins-MacBook-Pro.local SkrivestotteHD[35780] <Error>: CGContextAddPath: invalid context 0x0
Oct  2 20:23:55 Admins-MacBook-Pro.local SkrivestotteHD[35780] <Error>: CGContextDrawPath: invalid context 0x0
Oct  2 20:23:55 Admins-MacBook-Pro.local SkrivestotteHD[35780] <Error>: CGContextRestoreGState: invalid context 0x0
Oct  2 20:23:55 Admins-MacBook-Pro.local SkrivestotteHD[35780] <Error>: CGContextSaveGState: invalid context 0x0
Oct  2 20:23:55 Admins-MacBook-Pro.local SkrivestotteHD[35780] <Error>: CGContextSetLineWidth: invalid context 0x0
Oct  2 20:23:55 Admins-MacBook-Pro.local SkrivestotteHD[35780] <Error>: CGContextSetLineJoin: invalid context 0x0
Oct  2 20:23:55 Admins-MacBook-Pro.local SkrivestotteHD[35780] <Error>: CGContextSetLineCap: invalid context 0x0
Oct  2 20:23:55 Admins-MacBook-Pro.local SkrivestotteHD[35780] <Error>: CGContextSetMiterLimit: invalid context 0x0
Oct  2 20:23:55 Admins-MacBook-Pro.local SkrivestotteHD[35780] <Error>: CGContextSetFlatness: invalid context 0x0
Oct  2 20:23:55 Admins-MacBook-Pro.local SkrivestotteHD[35780] <Error>: CGContextSetLineDash: invalid context 0x0
Oct  2 20:23:55 Admins-MacBook-Pro.local SkrivestotteHD[35780] <Error>: CGContextAddPath: invalid context 0x0
Oct  2 20:23:55 Admins-MacBook-Pro.local SkrivestotteHD[35780] <Error>: CGContextDrawPath: invalid context 0x0
Oct  2 20:23:55 Admins-MacBook-Pro.local SkrivestotteHD[35780] <Error>: CGContextRestoreGState: invalid context 0x0
Oct  2 20:23:55 Admins-MacBook-Pro.local SkrivestotteHD[35780] <Error>: CGContextSaveGState: invalid context 0x0
Oct  2 20:23:55 Admins-MacBook-Pro.local SkrivestotteHD[35780] <Error>: CGContextSetLineWidth: invalid context 0x0
Oct  2 20:23:55 Admins-MacBook-Pro.local SkrivestotteHD[35780] <Error>: CGContextSetLineJoin: invalid context 0x0
Oct  2 20:23:55 Admins-MacBook-Pro.local SkrivestotteHD[35780] <Error>: CGContextSetLineCap: invalid context 0x0
Oct  2 20:23:55 Admins-MacBook-Pro.local SkrivestotteHD[35780] <Error>: CGContextSetMiterLimit: invalid context 0x0
Oct  2 20:23:55 Admins-MacBook-Pro.local SkrivestotteHD[35780] <Error>: CGContextSetFlatness: invalid context 0x0
Oct  2 20:23:55 Admins-MacBook-Pro.local SkrivestotteHD[35780] <Error>: CGContextSetLineDash: invalid context 0x0
Oct  2 20:23:55 Admins-MacBook-Pro.local SkrivestotteHD[35780] <Error>: CGContextAddPath: invalid context 0x0
Oct  2 20:23:55 Admins-MacBook-Pro.local SkrivestotteHD[35780] <Error>: CGContextDrawPath: invalid context 0x0
Oct  2 20:23:55 Admins-MacBook-Pro.local SkrivestotteHD[35780] <Error>: CGContextRestoreGState: invalid context 0x0
Oct  2 20:23:55 Admins-MacBook-Pro.local SkrivestotteHD[35780] <Error>: CGContextSaveGState: invalid context 0x0
Oct  2 20:23:55 Admins-MacBook-Pro.local SkrivestotteHD[35780] <Error>: CGContextSetLineWidth: invalid context 0x0
Oct  2 20:23:55 Admins-MacBook-Pro.local SkrivestotteHD[35780] <Error>: CGContextSetLineJoin: invalid context 0x0
Oct  2 20:23:55 Admins-MacBook-Pro.local SkrivestotteHD[35780] <Error>: CGContextSetLineCap: invalid context 0x0
Oct  2 20:23:55 Admins-MacBook-Pro.local SkrivestotteHD[35780] <Error>: CGContextSetMiterLimit: invalid context 0x0
Oct  2 20:23:55 Admins-MacBook-Pro.local SkrivestotteHD[35780] <Error>: CGContextSetFlatness: invalid context 0x0
Oct  2 20:23:55 Admins-MacBook-Pro.local SkrivestotteHD[35780] <Error>: CGContextSetLineDash: invalid context 0x0
Oct  2 20:23:55 Admins-MacBook-Pro.local SkrivestotteHD[35780] <Error>: CGContextAddPath: invalid context 0x0
Oct  2 20:23:55 Admins-MacBook-Pro.local SkrivestotteHD[35780] <Error>: CGContextDrawPath: invalid context 0x0
Oct  2 20:23:55 Admins-MacBook-Pro.local SkrivestotteHD[35780] <Error>: CGContextRestoreGState: invalid context 0x0
Oct  2 20:23:55 Admins-MacBook-Pro.local SkrivestotteHD[35780] <Error>: CGContextSaveGState: invalid context 0x0
Oct  2 20:23:55 Admins-MacBook-Pro.local SkrivestotteHD[35780] <Error>: CGContextSetLineWidth: invalid context 0x0
Oct  2 20:23:55 Admins-MacBook-Pro.local SkrivestotteHD[35780] <Error>: CGContextSetLineJoin: invalid context 0x0
Oct  2 20:23:55 Admins-MacBook-Pro.local SkrivestotteHD[35780] <Error>: CGContextSetLineCap: invalid context 0x0
Oct  2 20:23:55 Admins-MacBook-Pro.local SkrivestotteHD[35780] <Error>: CGContextSetMiterLimit: invalid context 0x0
Oct  2 20:23:55 Admins-MacBook-Pro.local SkrivestotteHD[35780] <Error>: CGContextSetFlatness: invalid context 0x0
Oct  2 20:23:55 Admins-MacBook-Pro.local SkrivestotteHD[35780] <Error>: CGContextSetLineDash: invalid context 0x0
Oct  2 20:23:55 Admins-MacBook-Pro.local SkrivestotteHD[35780] <Error>: CGContextAddPath: invalid context 0x0
Oct  2 20:23:55 Admins-MacBook-Pro.local SkrivestotteHD[35780] <Error>: CGContextDrawPath: invalid context 0x0
Oct  2 20:23:55 Admins-MacBook-Pro.local SkrivestotteHD[35780] <Error>: CGContextRestoreGState: invalid context 0x0
Oct  2 20:23:55 Admins-MacBook-Pro.local SkrivestotteHD[35780] <Error>: CGContextSaveGState: invalid context 0x0
Oct  2 20:23:55 Admins-MacBook-Pro.local SkrivestotteHD[35780] <Error>: CGContextSetLineWidth: invalid context 0x0
Oct  2 20:23:55 Admins-MacBook-Pro.local SkrivestotteHD[35780] <Error>: CGContextSetLineJoin: invalid context 0x0
Oct  2 20:23:55 Admins-MacBook-Pro.local SkrivestotteHD[35780] <Error>: CGContextSetLineCap: invalid context 0x0
Oct  2 20:23:55 Admins-MacBook-Pro.local SkrivestotteHD[35780] <Error>: CGContextSetMiterLimit: invalid context 0x0
Oct  2 20:23:55 Admins-MacBook-Pro.local SkrivestotteHD[35780] <Error>: CGContextSetFlatness: invalid context 0x0
Oct  2 20:23:55 Admins-MacBook-Pro.local SkrivestotteHD[35780] <Error>: CGContextSetLineDash: invalid context 0x0
Oct  2 20:23:55 Admins-MacBook-Pro.local SkrivestotteHD[35780] <Error>: CGContextAddPath: invalid context 0x0
Oct  2 20:23:55 Admins-MacBook-Pro.local SkrivestotteHD[35780] <Error>: CGContextDrawPath: invalid context 0x0
Oct  2 20:23:55 Admins-MacBook-Pro.local SkrivestotteHD[35780] <Error>: CGContextRestoreGState: invalid context 0x0
2 
```

在 malloc_error_break 中设置断点告诉我内存不足的情况是由这一行引起的：

```
CGRect rectInTextView = [self.source firstRectForRange:textRange]; 
```

或者更确切地说，特别是 firstRectForRange 方法。

但是：注释掉整个 markIt 方法只会将内存不足的情况移到其他地方。我想是时候真正学习如何使用 XCode 工具来查找内存泄漏了。

# c# - 无法访问嵌套在 Gridview 内的超级表单

> ID：12695939
> 
> 赞同：0
> 
> 时间：2012-10-02T18:18:20.040
> 
> 标签：c#, asp.net, forms, gridview, obout

我正在尝试从嵌套的 Obout SuperForm 更新 GridView 对象。但是，当我尝试访问 GridView 的 SuperForm 控件时，我的代码后面的方法不断返回 null，就像这样......

```
 protected void AwardsSuperForm_ItemUpdating(object sender, DetailsViewUpdateEventArgs e)
        {
            SuperForm sfAwards = AwardsOboutGrid.FindControl("AwardsSuperForm") as SuperForm;

        } 
```

这总是空的，GridView 的 FindControl 方法看不到“AwardsSuperForm”，即使它是一个嵌套元素。这是 ASP 标记...

```
<obout:Grid ID="AwardsOboutGrid" runat="server" Serialize="true" AutoGenerateColumns="false"
        OnInsertCommand="InsertRecordGrid" OnDeleteCommand="DeleteRecordGrid" OnUpdateCommand="UpdateRecordGrid"
        PageSize="50" AutoGenerateRows="false" AutoGenerateInsertButton="true" 
        AutoGenerateEditButton="true" AutoGenerateDeleteButton="true" OnRebind="RebindForm">
        <Columns>
            <obout:Column AllowEdit="true" AllowDelete="true" HeaderText="Edit" Width="100"/>

            <obout:Column ID="ID" DataField="ID" ReadOnly="true" Visible="false" runat="server">
                <TemplateSettings RowEditTemplateControlID="ID" RowEditTemplateControlPropertyName="value" />
            </obout:Column>

            <obout:Column ID="OrgName" DataField="OrgName" HeaderText="Organization Name"  Width="250" runat="server">
                <TemplateSettings RowEditTemplateControlId="SuperForm_OrgName" RowEditTemplateControlPropertyName="value" />
            </obout:Column>

            <obout:Column ID="AwardName" DataField="AwardName" HeaderText="Award" runat="server">
                <TemplateSettings RowEditTemplateControlId="SuperForm_AwardName" RowEditTemplateControlPropertyName="value" />
            </obout:Column>

            <obout:Column ID="Date" DataField="Date" HeaderText="Date Due" HtmlEncodeFormatString="True" HtmlEncode="True" runat="server">
                <TemplateSettings RowEditTemplateControlId="SuperForm_Date" RowEditTemplateControlPropertyName="value" />
            </obout:Column>

            <obout:Column ID="Link" DataField="Link" HeaderText="Link"  Width="222" runat="server">
                <TemplateSettings RowEditTemplateControlId="SuperForm_Link" RowEditTemplateControlPropertyName="value" />
            </obout:Column>
        </Columns>
        <TemplateSettings RowEditTemplateId="AwardsTplRowEdit" />
        <Templates>
            <obout:GridTemplate runat="server" ID="AwardsTplRowEdit">
                <Template>
                    <input type="hidden" id="ID" />

                    <obout:SuperForm ID="AwardsSuperForm" runat="server"
                        DataSourceID="AwardsObjectDataSource" AutoGenerateRows="false"
                        AutoGenerateInsertButton="True" AutoGenerateEditButton="True"
                        AutoGenerateDeleteButton="false"  DataKeyNames="ID" DefaultMode="Edit"
                        OnItemInserting="AwardsSuperForm_ItemInserting"  
                        OnItemUpdating="AwardsSuperForm_ItemUpdating"
                        Width="99%">
                        <Fields>
                            <obout:BoundField DataField="OrgName" HeaderText="Organization Name" FieldSetID="FieldSet1" />
                            <obout:BoundField DataField="AwardName" HeaderText="Award Name" FieldSetID="FieldSet1" />
                            <obout:DateField DataField="Date" HeaderText="Date Due" FieldSetID="FieldSet2" 
                                DataFormatString="{0:MM/dd/yyyy}" ApplyFormatInEditMode="true"/>
                            <obout:BoundField DataField="Link" HeaderText="Link" FieldSetID="FieldSet2" />
                        </Fields>
                        <FieldSets>
                            <obout:FieldSetRow>
                                <obout:FieldSet ID="FieldSet1" Title="Award Information" />
                                <obout:FieldSet ID="FieldSet2" Title="Date Information" />
                            </obout:FieldSetRow>
                            <obout:FieldSetRow>
                                <obout:FieldSet ID="FieldSet3" ColumnSpan="3" />
                            </obout:FieldSetRow>
                        </FieldSets>
                    </obout:SuperForm>
                </Template>
            </obout:GridTemplate>
        </Templates>
    </obout:Grid> 
```

# python - 将多项选择轮询添加到句子并将结果写入 csv 文件（Django/Python）

> ID：12695941
> 
> 赞同：0
> 
> 时间：2012-10-02T18:18:50.607
> 
> 标签：python, django, csv, submit, voting

我想显示一个问题并让用户从 1 到 5 对其进行投票作为投票。五个单选按钮。我生成了问题，但我不确定如何为用户创建 5 个选项。

目标是每次用户通过单击提交按钮（选择选项后）对其进行投票时，将问题和评级导出到 csv 文件。它需要将问题和选定的评分（1、2、3、4 或 5）写到文件中。我需要一些帮助才能开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T20:23:25.077

这是写入文件的一般思路。用您的数据替换“A”、“B”、“C”。

也许它来自一个表单，request.POST['selected_choice'] 等。

```
import csv

with open('foo.csv', 'ab') as f:
    writer = csv.writer(f)
    writer.writerow(['A', 'B', 'C']) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T20:50:15.123

```
from django import forms
from django.forms import ModelForm
from django.db import models

class Poll(models.Model):
    RATING_CHOICES = [(i,i) for i in range(1,6)]
    question = models.TextField()
    rating = models.PositiveSmallIntegerField(choices=RATING_CHOICES)

class PollForm(ModelForm):
    class Meta:
        model = Poll
        fields = ('question', 'rating')
        widgets = {'rating': forms.RadioSelect} 
```

在您看来，您将拥有以下内容：

```
import csv

from django.http import render_to_response, HttpResponseRedirect
from myproject.forms import PollForm

def myview(request):
    context = {}
    if request.method == 'POST'
        form = PollForm(request.POST)
        if form.is_valid():
            obj = form.save()
            with open('foo.csv', 'ab') as f:  # Shamelessly stolen from Yuji
                writer = csv.writer(f)
                writer.writerow([obj.question, obj.rating])
            return HttpResponseRedirect('somesuccesspage')
    # More boring code here to handle the GET requests and stuff..
    context['form'] = form
    return render_to_response('somepath/mytempplate.html', context) 
```

没有运行上面的代码，但它肯定是让你开始的东西。

# c++ - 在 C/C++ 中使用整数的位标志实际上安全吗？

> ID：12695943
> 
> 赞同：15
> 
> 时间：2012-10-02T18:19:04.457
> 
> 标签：c++, c

我注意到许多 C/C++ 程序员使用如下方式实现标志集：

```
#define FLAG_1 (1 << 0)
#define FLAG_2 (1 << 1)
#define FLAG_3 (1 << 2)

unsigned int my_flags = 0; /* no flag set */
my_flags |= FLAG_2; /* set flag 2 */ 
```

但这种方法真的合理吗？在我看来，它似乎是在假设不属于 C/C++ 语言标准的无符号整数的二进制表示。例如，那个“0”实际上是0x0000。

我错了吗？或者我在理论上是对的，但在当前标准硬件的情况下实际上不是？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-02T18:24:39.903

## C++

C++11 标准的重要部分是 §3.9.1/7 ( *ISO/IEC 14882:2011(E)* )：

> 整数类型的表示应使用纯二进制计数系统定义值。

这在脚注中得到了澄清：

> 49) 使用二进制数字 0 和 1 的整数的位置表示，其中由连续位表示的值是相加的，从 1 开始，并乘以 2 的连续整数幂，可能最高位置的位除外. （改编自美国国家信息处理系统词典。）

移位运算符的结果以数学方式定义。例如，对于`E1 << E2`：

> 如果 E1 具有无符号类型，则结果的值为 E1 × 2 ^(E2)，比结果类型中可表示的最大值多模一减少。否则，如果 E1 具有带符号类型和非负值，并且 E1 × 2 ^(E2)在结果类型中是可表示的，那么这就是结果值；否则，行为未定义。

位运算符具体定义为按位。例如，对于按位或：

> 执行通常的算术转换；结果是操作数的按位异或函数。

当然，在 as-if 规则下，表示不一定是纯二进制计数系统。编译器必须只生成一个*像*它一样运行的程序。

## C

在 C99 ( *ISO/IEC 9899:TC3* ) 中，仅对位域和类型对象`unsigned char`(§6.2.6.1/3) 保证纯二进制表示法：

> 存储在无符号位域和无符号字符类型对象中的值应使用纯二进制表示法表示。

在脚注中再次澄清：

> 整数的位置表示，它使用二进制数字 0 和 1，其中由连续位表示的值是相加的，从 1 开始，并乘以 2 的连续整数幂，可能位置最高的位除外。（改编自美国国家信息处理系统词典。）

该标准特别指出按位运算取决于内部表示（§6.5/4）：

> 某些运算符（一元运算符 ~ 和二元运算符 <<、>>、&、^ 和 |，统称为*按位运算符*）需要具有整数类型的操作数。这些运算符产生的值取决于整数的内部表示，并且具有符号类型的实现定义和未定义方面。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-02T18:21:50.400

虽然理论上可以在使用非 2 次幂运算的架构上运行 C 或 C++，但`|`、`&`和`^`运算符被定义为具有按位行为，因此这样的机器需要模拟二进制运算。

因此，它是完全安全和便携的。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-02T18:21:32.887

当前的 C 和 C++ 标准都将无符号整数表示形式限制为纯二进制表示形式，因此您上面的内容是完全安全的，并且可以保证工作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-02T18:21:33.120

向右位移总是会减小整数的值，而向左位移总是会增大整数的值。这与机器的字节序无关，所以要回答你的问题：“是的，这是合理的，因为无论系统的字节序如何，位移都是一样的”

这是否回答你的问题？

# php - 如何将 $_POST 数据存储在数组中并使用 foreach 访问它并保存到 mysql

> ID：12695945
> 
> 赞同：0
> 
> 时间：2012-10-02T18:19:09.410
> 
> 标签：php

> **可能重复：**
> [PHP $_POST 打印变量名和值](https://stackoverflow.com/questions/3489387/php-post-print-variable-name-along-with-value)

我只是想知道如何将 $_POST 变量存储在数组中。

我有几个 $_POST 变量，如下所示：

```
$_POST['cCode'];
$_POST['sSubject'];
$_POST['lect'];
$_POST['rRoom'];
$_POST['dDay'];
$_POST['sTime'];
$_POST['eTime']; 
```

如何使用 a 同时访问它们`foreach()`？

我知道如何访问一个，像这样：

```
 $data = $_POST['cCode'];
    foreach($data as $code){
        echo $code;
    } 
```

然后我想把它保存到mysql ..

这是我的数据库：

```
DROP TABLE IF EXISTS `ocs_database`.`schedule`;
CREATE TABLE  `ocs_database`.`schedule` (
  `schedID` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `courseCode` varchar(30) NOT NULL,
  `subjectName` varchar(45) NOT NULL,
  `roomName` varchar(45) NOT NULL,
  `lecturerName` varchar(45) NOT NULL,
  `day` varchar(45) NOT NULL,
  `startTime` varchar(45) NOT NULL,
  `endTime` varchar(45) NOT NULL,
  PRIMARY KEY (`schedID`)
) ENGINE=InnoDB AUTO_INCREMENT=82 DEFAULT CHARSET=latin1; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T18:20:25.677

```
foreach ($_POST as $key => $value) {
    echo "$key = $value<br>";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T18:21:41.680

$_POST 本身是一个数组，因此您不需要将其存储在其他数组中。照glavic说的做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T18:24:09.850

`$array = $_POST;`因为 $_POST 本身就是一个数组。以防万一，您希望`$array`将来使用。`foreach()`并按照您所展示的方式访问它。您可以使用`array_values($_POST)`, 如果它只是您关心的值。所以像，

```
 $values = array_values($_POST);
    var_dump($values); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T18:24:44.610

您可以像这样使用它来查看 $_POST 数组中的所有变量。 `print_r($_POST)`

# .net - SqlDataReader 将带符号的 SQL 转换为 .NET 无符号整数

> ID：12695948
> 
> 赞同：0
> 
> 时间：2012-10-02T18:19:19.050
> 
> 标签：.net, sql-server-2008, sqldatareader

经常使用 SQL 标识作为 .NET 对象的 ID。
从 0 或 1 开始 ID，因为不希望对象具有负 ID。
ID 呈现给用户，因此它需要对人类来说是合乎逻辑的。

也经常使用类似 ((Int32)key1 << 32) + key2; 对于哈希
如果 unsigned 可以更快 (UInt32)key1 << 32 | 键2；

由于 SQL 没有无符号数据类型，因此丢失了一半的范围。

**在 .NET 中从签名的 SQL 转换为未签名的良好做法是什么？**

**转换从 0 到最大值的位置。**
**直接转换不起作用，因为 (UInt16)Int16.Min = Int16.Max +1。**
**需要将 Int16.Min 转换为 0，将 Int16.Max 转换为 UInt16.Max。**

在 SQL 中，将数据类型的 Identity 种子设置为最小值（或最小值 +1）。

目前有一种情况会突破 Int32 max 但怀疑它是否会超过 UInt32 max。如果它确实超过了 UInt32 max，则应用程序和数据库将需要全面审查。

尝试对 SqlDataReader 进行扩展，它似乎有效。
将作为答案发布。
尚未投入生产，因此请检查 SO 是否有更好的方法或有关该方法的警告。

不需要 DataTable 兼容性，因为这个应用程序使用零并且永远不会。

我们不使用实体框架或 SQL LINQ。Grunge TSQL 和 SP。

```
public static class MyExtensions
{
    public static UInt16 GetUInt16(this SqlDataReader rdr, int i)
    {
        //return (UInt16)rdr.GetInt16(i);  // wrong answer
        Int16 int16 = rdr.GetInt16(i);
        UInt16 uint16 = (UInt16)(int16 + 32768);
        return uint16;
    }
    public static UInt32 GetUInt32(this SqlDataReader rdr, int i)
    {
        Int32 int32 = rdr.GetInt32(i);
        UInt32 uint32 = (UInt32)(int32 + 2147483648);
        return uint32;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T18:21:43.460

您可以将 UInt32 存储为 SQL Server 中的 Int32。保存到 SQL 时，将无符号整数转换为有符号整数。

大于 Int32.MaxValue 的 UInt32 值将在 SQL 中表示为负数，但您可以在从数据库读取后将它们转换回 UInt32。

**如果使用 ADO.Net**

```
uint hash; 
```

读取数据时

```
while (reader.Read())
{
    uint hash = (uint)reader.GetInt32(myIndex);
} 
```

写入数据时

```
cmd.Parameters.AddWithValue("MyParamName", (int)hash); 
```

**如果首先使用 EF 代码**

公开一个仅包装散列值的 Int32 类型的属性，并将实际的散列属性标记为*NotMapped*。

```
private uint hash;

[NotMapped]
public uint Hash 
{ 
    get { return hash; }
    set { hash = value; }
}

public int HashAsLong 
{ 
    get { return hash; }
    set { hash = value; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T19:38:25.143

最后，我所做的就是让对象负责翻译。

sqlID 的只读签名属性。
对于返回数据库的更新，决定不应该与该值混淆。

这些对象还公开了一个未签名的 ID，供其他对象、哈希和 UI 使用。

# vb.net - Web 服务调用...空引用异常...属性评估失败

> ID：12695950
> 
> 赞同：1
> 
> 时间：2012-10-02T18:19:32.077
> 
> 标签：vb.net

我尝试调用我的网络服务，它给了我一个“空引用异常”。该代码曾经有效。从通话中收到的状态码正常：200。会发生什么？

```
'** Shipping.Carriers is my web service
dim myWs as Shipping.Carriers
dim strCode as string

Using myWS = New Shipping.Carriers
    myWS.Credentials = System.Net.CredentialCache.DefaultCredentials

    '** when I pause here and check the status of the Web service...
    '** I see the Property Evaluation Failed on all of the functions in the web service

    myWS.Timeout = 400000

    '** the next line of code gives me the nullreference exception
    strCode = myWS.fUPS(my parameters go here)
    txtMsg.Text = strCode
End Using 
```

# php - wordpress 打印中的简码始终位于顶部，内联 HTML

> ID：12695953
> 
> 赞同：1
> 
> 时间：2012-10-02T18:19:36.617
> 
> 标签：php, html, wordpress, shortcode

我编写的插件中有一个简码。简码总是打印在顶部，经过一番研究后，我发现我必须“返回”而不是“回显”才能将它放在正确的位置。

我在 PHP 文件中的各种脚本标签中有内联 HTML 、 css 、 javascript 。有没有一种方法可以让它工作而无需尝试返回所有内联 HTML。（向所有 html 标签添加“返回”是一项巨大的努力）？

我知道有人问了一个关于顶部短代码打印的问题，但这与我遇到的问题并不完全相同。

感谢您的回答。

只是为了让人们了解我正在处理的代码：这只是代码的一小部分，但是到处都是 html、css。

```
extract(shortcode_atts(array(
    'id'=>'0', 'key'=>'0'), $atts));

if(substr($id, -3) == "***") $id = substr($id, 0, 8);
$id_licenses = getDbInfo($id);

$id_desc = array();
if(is_array($id_licenses)) $id_desc = $id_licenses;
else $id_desc[0] = $id_licenses;

if(isset($_POST['desc'])) {     
    $info = $_POST['desc'];

    $ids = getDbInfoByDesc($info);
}

?>

<style type="text/css">
label.inputlabel
{
width: 8em;
float: left;
text-align: left;
margin-right: 0.5em;
display: block; 
padding-left: 0.5em;

font-family: Tahoma;
  } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T18:34:29.193

您必须返回最终结果，但如果您愿意，您可以缓冲结果和`echo`缓冲区内的任何内容，然后可以重新调整缓冲的数据，即

```
function yourShortCodeFunction(){
    ob_start();
    echo "Hello"; // this will not print out
    // more code
    $result = ob_get_contents(); // get everything in to $result variable
    ob_end_clean();
    return $result;
} 
```

# iphone - 检查文件是否为空？

> ID：12695954
> 
> 赞同：1
> 
> 时间：2012-10-02T18:19:39.983
> 
> 标签：iphone, objective-c, ios

我正在构建一个应用程序来检查 csv 文件的内容。我能够正确检查行和列。现在，我想知道整个文件是否为空。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T18:36:34.087

如果“空”是指其中绝对没有任何内容（0 字节），则可以执行以下操作：

```
NSFileManager *manager = [NSFileManager defaultManager];
if ([manager fileExistsAtPath:path]) {
    NSDictionary *attributes = [manager attributesOfItemAtPath:path error:nil];
    unsigned long long size = [attributes fileSize];
    if (attributes && size == 0) {
        // file exists, but is empty.
    }
} 
```

# office-2013 - 我可以在 Outlook 2013 Mail App 的电子邮件中获取所选文本吗？

> ID：12695959
> 
> 赞同：1
> 
> 时间：2012-10-02T18:19:56.473
> 
> 标签：office-2013

我正在为 Office 2013 开发一个邮件应用程序，当用户在电子邮件中选择一些文本时，我真的很想采取行动。如果我正在创建任务窗格应用程序，这似乎相对微不足道；我只是补充：

```
Office.context.document.addHandlerAsync(Office.EventType.DocumentSelectionChanged, handleSelectionChange); 
```

我的`handleSelectionChange`函数被调用。但是，在 Mail App 中，`document`is`undefined`和`mailbox`of 的属性`context`没有任何与事件相关的方法，至少根据我看到的文档是这样。

我正在寻求做的事情可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T13:23:17.343

我能够就此与首席项目经理进行交谈，结果表明，该功能在当前版本的 Office 2013 API 中不可用。他确实同意这会带来一些有趣的可能性，但仅此而已。我希望有一天能在 API 的未来版本中看到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-03T23:05:19.347

我知道这已经晚了，但下面的链接显示了如何通过 ActiveExplorer 方法从电子邮件（正文）中获取选定的文本。希望能帮助到你。

[使用 ActiveExplorer（不是 ActiveInspector）从 Outlook Mailitem 中获取选定的文本](https://stackoverflow.com/questions/28151297/get-selected-text-from-outlook-mailitem-using-activeexplorer-not-activeinspecto#new-answer)

# c++ - 创建字符串到函数向量的哈希图

> ID：12695962
> 
> 赞同：2
> 
> 时间：2012-10-02T18:20:15.647
> 
> 标签：c++, events, hashmap, function-pointers

我正在用 C++ 实现一个简单的事件系统。该系统旨在根据字符串（事件名称）识别事件，然后在事件触发时调用一系列回调函数。这是一个简单的蓝图：

```
class EventManager:
    public:
        register_event(string name) // creates a new entry in the event table
        register_listener(string name, callback) // adds the callback to name's entry in the event table
        fire_event(string name// executes all functions in the event table entry for name
    private:
        hashmap<string, vector<function>> //the event table 
```

我目前正在努力解决的是如何创建一个字符串到函数向量的哈希图，然后遍历这些函数来执行它们。你可以假设每个回调都知道它自己的函数类型，所以每个回调都会有参数`(void* userdata, ...)`，我将在回调中处理管理 va_list。

如果有人可以给我一个快速的片段，展示如何创建哈希图，以及如何循环调用函数，那将很有用。

**编辑**使用无用的答案，我现在得到以下错误：

事件管理器.h

```
#include <string>
#include <unordered_map>
#include <vector>

using namespace std;

typedef unordered_map<string, vector<function<void()>>> CallbackMap;

class EventManager{
public:
    EventManager(){
        callbacks = CallbackMap();
    }

    void EventManager::RegisterEvent(string const& name);
    void EventManager::RegisterListener(string const &name, function<void()> callback);
    void EventManager::FireEvent(string name);
private:
    CallbackMap callbacks;
}; 
```

事件管理器.cpp

```
#include "EventManager.h"
#include <string>

using namespace std;

void EventManager::RegisterEvent(string const& name){
    callbacks[name] = NULL;
}

void EventManager::RegisterListener(string const &name, function<void()> callback)
{
    callbacks[name].push_back(callback);
}

bool EventManager::FireEvent(string name){
    auto event_callbacks = callbacks.find(event_name);
    if (event_callbacks == callbacks.end()){
        return false; // ?
    }

    // or std::for_each
    for (auto cb = event_callbacks->second.begin();
         cb != event_callbacks->second.end(); ++cb)
    {
        (*cb)();
    }
    return true;
} 
```

终端

```
$ g++ EventManager.cpp -std=c++0x
In file included from EventManager.cpp:1:0:
EventManager.h:7:38: error: ‘function’ was not declared in this scope
EventManager.h:7:52: error: template argument 1 is invalid
EventManager.h:7:52: error: template argument 2 is invalid
EventManager.h:7:53: error: template argument 2 is invalid
EventManager.h:7:53: error: template argument 5 is invalid
EventManager.h:7:55: error: expected unqualified-id before ‘&gt;’ token
EventManager.h:11:5: error: ‘CallbackMap’ does not name a type
EventManager.h:18:47: error: ‘function’ has not been declared
EventManager.h:18:55: error: expected ‘,’ or ‘...’ before ‘&lt;’ token
EventManager.h: In constructor ‘EventManager::EventManager()’:
EventManager.h:14:9: error: ‘callbacks’ was not declared in this scope
EventManager.h:14:33: error: ‘CallbackMap’ was not declared in this scope
EventManager.cpp: In member function ‘void EventManager::RegisterEvent(const string&)’:
EventManager.cpp:7:5: error: ‘callbacks’ was not declared in this scope
EventManager.cpp: At global scope:
EventManager.cpp:10:57: error: ‘function’ has not been declared
EventManager.cpp:10:65: error: expected ‘,’ or ‘...’ before ‘&lt;’ token
EventManager.cpp: In member function ‘void EventManager::RegisterListener(const string&, int)’:
EventManager.cpp:12:5: error: ‘callbacks’ was not declared in this scope
EventManager.cpp:12:31: error: ‘callback’ was not declared in this scope
EventManager.cpp: At global scope:
EventManager.cpp:15:6: error: prototype for ‘bool EventManager::FireEvent(std::string)’ does not match any in class ‘EventManager’
EventManager.h:19:10: error: candidate is: void EventManager::FireEvent(std::string) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T18:26:51.143

> 字符串到函数向量的哈希映射...

```
typedef unordered_map<string, vector<function<void()>>> CallbackMap; 
```

话都在那里。请注意，您可以使用`unordered_multimap`而不是向量的哈希图，并且`function`类型反映了您的回调接口（例如，您可能想要`function<void(Event*)>`什么）。

正如 Ram 在评论中指出的那样，如果您不需要哈希（或者没有 C++11，尽管您也可以使用 boost::unordered_map），它们是等效的基于树的关联容器`map`。`multimap`

> ...还有一个关于如何循环调用函数的...

```
bool EventManager::fire_event(string const& event_name)
{
    auto event_callbacks = callbacks.find(event_name);
    if (event_callbacks == callbacks.end()) return false; // ?

    // or std::for_each
    for (auto cb = event_callbacks->second.begin();
         cb != event_callbacks->second.end(); ++cb)
    {
        (*cb)();
    }
    return true;
} 
```

哦，注册很简单：

```
void EventManager::register_listener(string const &name,
                                     function<void()> callback)
{
    callbacks[name].push_back(callback);
} 
```

（我让它懒惰地按需创建事件条目）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T18:31:54.373

就像是：？

```
typedef void(*ExampleFunction) (std::string str, int bar);

void foo(std::string str, int bar){
}
void foo2(std::string str, int bar){
}

int main(){
    std::map<std::string,std::vector<ExampleFunction> > f_map;
    std::vector<ExampleFunction> v_func;
v_func.push_back(foo);
v_func.push_back(foo2);

f_map["tiny"] = v_func;
f_map["tiny"][0]("Woo",1);
return 1;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T18:32:19.223

如果 C++ 11 是一个选项（VS2012，gcc 的最新版本），那么您可以通过 C++ 库获取哈希图：

```
#include <unordered_map>

std::unordered_map<KeyType, ValueType> map {{x,y},{n,m1},{a,b}};
map[x] = y;
ValueType q = map[y]; 
```

等等。`std::unordered_map`和之间的区别在于`std::map`它`std::map`是排序的，因此在下面使用[红黑树](https://stackoverflow.com/questions/5288320/why-is-stdmap-implemented-as-red-black-tree)。这实际上可能足以满足您的需求，在这种情况下，您也可以使用 C++03。

请注意，我发现 MSVC '12 不支持地图的默认分配，如我的示例所示。如果需要，请使用 boost::assign:

```
#include <boost/assign.hpp>

std::unordered_map<K,V> map = boost::assign::map_list_of<K,V> (x,y)(a,b)(n,q); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T18:35:22.243

首先，您需要定义什么是回调。您的选择基本上归结为一个函数指针：

```
typedef void (* EventCallback)(void * userdata, ...); 
```

或者一个接口：

```
class IEventCallback
{
public:
    virtual void callback(void * userdata, ...) = 0;
}; 
```

我更喜欢接口版本——您可以将函数指针包装在实现此接口的类的对象中；走另一条路要困难得多。

在您的`EventManager`上，定义地图和类型（使迭代更容易）：

```
private:
    typedef std::vector<IEventCallback &> EventCallbackList_t;
    typedef std::map<std::string, EventCallbackList_t> EventMap_t;

    EventMap_t m_eventMap; 
```

接下来，实现相当简单：

```
void EventManager::register_event(std::string const & name)
{
    m_eventMap.insert(std::make_pair(name, EventCallbackList_t()));
}

void EventManager::register_listener(std::string const & name, IEventCallback & callback)
{
    EventMap_t::iterator event = m_eventMap.find(name);

    if (event == m_eventMap.end()) {
        throw "No such event.";
    }

    event->second.push_back(callback);
}

void EventManager::fire_event(std::string const & name, void * userdata, ...)
{
    EventMap_t::iterator event = m_eventMap.find(name);

    if (event == m_eventMap.end()) {
        throw "No such event.";
    }

    for (EventCallbackList_t i = event->second.begin(); i != event->second.end(); ++i) {
        i->callback(userdata, ...);
    }
} 
```

这个实现仍然存在一些问题，我将由您来解决：

*   并发。如果它们将从多个线程调用，请确保注册/触发操作是同步的。
*   回调对象所有权。考虑使用共享指针类型来管理它们的生命周期。

# mysql - 在 MySQL 中查找断开的关系

> ID：12695963
> 
> 赞同：6
> 
> 时间：2012-10-02T18:20:21.287
> 
> 标签：mysql, relational-database

我有一个关于关系数据库的问题。我知道在使用它时我应该正确设置我的外键，但我没有立即这样做，所以现在我必须清理我凌乱的数据库以删除关系中断的条目。我的表看起来有点像这样：

友情链接
| 编号 | 网址 | 其他不相关的领域 |

LINK_USERS
| 编号 | 链接ID | 其他不相关的领域 |

应该很明显 LINK_USERS 通过 link_id 字段（即 LINKS 表中条目的 id）与 LINKS 有关系

我已经搞砸了一段时间，不知何故，我似乎无法从 LINK_USERS 中选择在 LINKS 中没有引用的所有行。

我必须在这里补充一点，删除应该只发生在 LINKS 表上。所以我想要从查询中选择所有行 FROM LINK_USERS WHERE link_id 在 LINKS 表中找不到。

正如您可能已经想到的那样，我不是 MySQL 专家。如果我的问题含糊不清，请告诉我，我会尝试更好地制定它。

提前致谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-02T18:23:20.147

您的问题一点也不含糊；你可以用非常简单的 SQL 得到你想要的（它看起来很像你对你正在寻找的东西的英语描述）：

```
 SELECT * FROM LINK_USERS WHERE link_id NOT IN (SELECT id FROM LINKS); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-02-04T04:41:41.337

这是 LEFT JOIN 版本：

```
SELECT *
FROM LINK_USERS
LEFT JOIN LINKS ON LINK_USERS.link_id = LINKS.link_id
WHERE LINKS.link_id IS NULL 
```

它做同样的事情，但在更大的桌子上可能会更快。YMMV。

# javascript - 如何为下面的这个示例执行 $_POST？

> ID：12695965
> 
> 赞同：0
> 
> 时间：2012-10-02T18:20:35.787
> 
> 标签：javascript, jquery

我的 javascript 代码中有多行按钮，这些按钮来自 AZ：

```
<?php
    $a = range("A","Z");
?>

<table id="answerSection">
    <tr>

<?php
    $i = 1;
    foreach($a as $key => $val){
        if($i%7 == 1) echo"<tr><td>";
        echo"<input type=\"button\" onclick=\"btnclick(this);\" value=\"$val\" id=\"answer".$val."\" name=\"answer".$val."Name\" class=\"answerBtns answers answerBtnsOff\">";      
        if($i%7 == 0) echo"</td></tr>";
        $i++;
    }
?>
    </tr> 
```

下面是打开和关闭每个单独按钮的 javascript 函数：

```
function btnclick(btn)
{

$(btn).toggleClass("answerBtnsOff");
$(btn).toggleClass("answerBtnsOn");

    return false;
} 
```

我想执行 $_POST 以便它发布所有已打开的按钮。有谁知道应该如何为此编写 post 方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T18:23:45.760

这取决于您要如何提交表单。如果您只想将其作为普通表单提交并且您不希望提交关闭按钮，您可以使用 disabled html 属性将它们标记为已禁用。这样他们就不会被发布

如果您使用 ajax，则需要获取值并使用 $.post 或 $.ajax 发布它们

例如。

```
$(btn).attr('disabled',true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T18:25:22.807

我建议添加一个隐藏字段以及与按钮同名的打开按钮。这样，您将获得带有值的 POST 返回给您。此代码未经测试，但它应该像这样工作：

```
<?php
$a = range("A","Z");
?>

<table id="answerSection">
<tr>

<?php
$i = 1;
foreach($a as $key => $val){
    if($i%7 == 1) echo"<tr><td>";
    echo"<input type=\"button\" onclick=\"btnclick(this);\" value=\"$val\" id=\"answer".$val."\" name=\"answer".$val."Name\" class=\"answerBtns answers answerBtnsOff\">";
    echo"<input type=\"hidden\" value=\"1\" id=\"hiddenAnswer".$val."\" name=\"hidden".$val."\" class=\"onButtons\">";
    if($i%7 == 0) echo"</td></tr>";
    $i++;
}
?>
</tr> 
```

使用以下 JavaScript（假设您使用的是 jQuery）：

```
function btnclick(btn)
{
    $(btn).toggleClass("answerBtnsOff");
    $(btn).toggleClass("answerBtnsOn");

    var hiddenId = '#hiddenAnswer'+btn.value;
    if ( $(btn).hasClass("answerBtnsOff") )
    {
        $(hiddenId).val('0');
        $(hiddenId).toggleClass('offButtons');
        $(hiddenId).toggleClass('onButtons');       
    }
    else
    {
        $(hiddenId).val('1');
        $(hiddenId).toggleClass('onButtons');
        $(hiddenId).toggleClass('offButtons');
    }   

    return false;
} 
```

因此，如果您的按钮具有 $val 的“Hello”、“World”、“Foo”、“Bar”，您将收到以下帖子，它们是 1（按钮打开）或 0（按钮关闭）：

```
$_POST['hiddenHello']
$_POST['hiddenWorld']
$_POST['hiddenFoo']
$_POST['hiddenBar'] 
```

请注意，所有按钮从一开始就“打开”。

# android - 三星 Nexus S 与 HTC - NFC 意图过滤器 + AAR

> ID：12695967
> 
> 赞同：2
> 
> 时间：2012-10-02T18:20:40.830
> 
> 标签：android, nfc, intentfilter, ndef, android-applicationrecord

我将 AAR 保存在我的 NFC-Tag 上。如果我用 Nexus S (Android 4.1.1) 扫描 TAG，我会得到 NfcAdapter.ACTION_NDEF_DISCOVERED 并且 NFCReaderActivity 直接启动。

如果我对 HTC X (Android 4.0.3) 执行相同操作，则应用程序会启动，但我只获得了 android.intent.action.MAIN，因此 NFCReaderActivity 不会出现，并且标签也不会被扫描。

这适用于三星 Nexus S，但不适用于 HTC：

```
<activity android:name=".activities.NFCWriterActivity"></activity>
<activity android:name=".activities.NFCReaderActivity">
        <intent-filter>
          <action android:name="android.nfc.action.NDEF_DISCOVERED"/>
          <category android:name="android.intent.category.DEFAULT"/>
        </intent-filter>              
</activity>
<activity android:name=".activities.NFCBeamActivity">        
</activity>
<activity android:name=".activities.WifiManagerActivity"></activity>
<activity android:name=".activities.WifiConfiguratorActivity"></activity>
<activity android:name=".activities.TagWriterOptionsActivity"></activity>
<activity android:name=".activities.WifiScannerTagActivity"></activity>
<activity android:name=".activities.WifiScannerActivity"></activity>  
<activity android:name=".activities.WifiListActivity">

</activity> 
```

这是我的活动和过滤器。

有人出主意吗？

* * *

**编辑：**

这适用于 HTC，但不适用于三星 Nexus S：

```
<activity android:name=".activities.NFCWriterActivity"></activity>
<activity android:name=".activities.NFCReaderActivity">
        <intent-filter>
          <action android:name="android.nfc.action.NDEF_DISCOVERED"/>
          <category android:name="android.intent.category.DEFAULT"/>
          <data android:mimeType="application/vnd.wfa.wsc" />
        </intent-filter>              
</activity>
<activity android:name=".activities.NFCBeamActivity">    

</activity>
<activity android:name=".activities.WifiManagerActivity"></activity>
<activity android:name=".activities.WifiConfiguratorActivity"></activity>
<activity android:name=".activities.TagWriterOptionsActivity"></activity>
<activity android:name=".activities.WifiScannerTagActivity"></activity>
<activity android:name=".activities.WifiScannerActivity"></activity>  
<activity android:name=".activities.WifiListActivity"></activity> 
```

在这里我得到以下异常@HTC - 也许这是我不知道的问题：堆栈：

```
D/AudioTrack( 3938): stop 0x1601940
D/AudioFlinger(  142): releasing 231 from 3938
D/AudioTrack( 3938): AudioTrack destructor X
D/power   (  277): Already locked performance.
W/CpuWake (  277): >>acquireCpuPerfWakeLock!
W/CpuWake (  277): <<acquireCpuPerfWakeLock!
E/ActivityManager(  277): startLaunchActivity get appname failed
E/ActivityManager(  277): java.lang.NullPointerException
E/ActivityManager(  277):   at com.android.server.am.ActivityStack.startLaunchActivity(ActivityStack.java:4831)
E/ActivityManager(  277):   at com.android.server.am.ActivityStack.startActivityMayWait(ActivityStack.java:3352)
E/ActivityManager(  277):   at com.android.server.am.ActivityManagerService.startActivity(ActivityManagerService.java:2509)
E/ActivityManager(  277):   at android.app.ActivityManagerNative.onTransact(ActivityManagerNative.java:131)
E/ActivityManager(  277):   at com.android.server.am.ActivityManagerService.onTransact(ActivityManagerService.java:1751)
E/ActivityManager(  277):   at android.os.Binder.execTransact(Binder.java:338)
E/ActivityManager(  277):   at dalvik.system.NativeStart.run(Native Method)
I/ActivityManager(  277): START {act=android.nfc.action.NDEF_DISCOVERED typ=application/vnd.wfa.wsc pkg=at.nfc.wifi (has extras)} from pid 3938
W/ActivityManager(  277): Duplicate finish request for ActivityRecord{41163a90 com.android.nfc/.NfcRootActivity}
D/power   (  277): Already locked performance.
I/Intent  (  277): @test_code: getHtcIntentFlag: 0 obj: 1094379848
W/CpuWake (  277): >>acquireCpuPerfWakeLock!
W/CpuWake (  277): <<acquireCpuPerfWakeLock! 
```

* * *

也许问题是版本 4.1.1 vs 4.0.3 - 我不知道：事实是：只有 Ndef 适用于三星，如果我添加

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T13:35:14.120

Android 中有一个[bug](http://code.google.com/p/android/issues/detail?id=41197)使得 AAR 基本上一文不值。根据手机状态，当 NFC 服务处理标签时，AAR 或意图过滤器优先。如果 AAR 获胜，您将无法获得标签。

您可以正确处理此问题的唯一方法是删除 AAR，将其替换为您控制的服务器的 URL，该服务器可以重定向到您在 Google Play 上的应用页面。

# javascript - 如何在弹出窗口加载时调试javascript？

> ID：12695968
> 
> 赞同：20
> 
> 时间：2012-10-02T18:20:41.653
> 
> 标签：javascript, debugging, scorm1.2

调试在弹出窗口中运行的 JavaScript 代码的最有效方法是什么？具体来说，我需要跟踪页面加载时发生的情况。

这适用于在 LMS 中运行的 SCORM 1.2 课程，它依赖于父窗口中的其他 JavaScript 对象，因此单独调试弹出窗口将不起作用。

尽管我大部分时间都在调试这些课程，但我可以将一种技术用于其他环境。

我可以在浏览器内调试器中使用类似选项的东西，它会在为弹出页面执行的 JavaScript 的第一行暂停，就好像我在那里放了一个断点一样。（我不能，或者至少不知道如何设置断点，直到页面开始之后）

**编辑：**

该`debugger;`语句有效，但仅适用于我控制的代码。我有时需要跟踪在某些弹出窗口打开时运行的 JavaScript，并且由于代码已经运行而无法添加断点。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-02T18:24:00.633

你可以把魔法

```
debugger; 
```

在您的 javascript 代码中的任何位置声明（我所知道的每个调试器都会通过在该行自动设置断点来停止）。

如果这也没有帮助，我只需“在新窗口/选项卡中打开该页面”并自己设置断点或也使用`debugger;`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-08-15T00:17:37.890

扩展@jAndy 的答案，我发现 Fiddler 的 AutoResponder 是一种`debugger;`在您无法控制的代码中放入语句或其他有用调用的有效方法。

就像是：

1.  在开始之前清除缓存。
2.  运行该站点，允许加载您要使用的所有文件。
3.  识别您想要篡改的请求，例如您想要调试的 JavaScript 文件。
4.  将该会话从 Fiddler 导出到本地文件。
5.  编辑本地文件以添加`debugger;`语句或其他内容。
6.  回到 fiddler，再次选择请求，然后选择 AutoResponder 选项卡。
7.  选择“添加规则”，默认情况下将为该确切 URL 创建一个新规则。
8.  在底部的组合框中，选择 Find a file.. 然后浏览到您篡改的文件。
9.  确保选中顶部的“启用自动响应”和“不匹配的请求直通”。
10.  再次清除浏览器中的缓存，然后重新启动您尝试调试的站点或页面。

现在，浏览器将加载文件的本地版本，而不是从站点加载。可能还有其他方法可以用本地文件替换浏览器中的远程 URL（Charles 也有 AutoResponder 和 Proxomitron 之类的东西，我不知道是否有浏览器插件可以做到这一点，但 Greasemonkey 之类的东西也可能工作）。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-12-14T19:14:00.320

自 2016 年起，Chrome 现在将其作为 ChromeDevTools 设置中的一个选项

[https://twitter.com/chromedevtools/status/697993811696291842?lang=en](https://twitter.com/chromedevtools/status/697993811696291842?lang=en)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-10-31T03:11:08.887

在 Chrome 中：加载弹出窗口，当它还在加载时，让它集中，快速按 F12（打开开发者工具），然后按 F8。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-01-21T10:09:05.793

在 Chrome 中，您可以附加`// @sourceURL=myScriptName.js`到脚本的末尾，然后在弹出窗口打开时加载到`Sources`Chrome 的检查中的选项卡中。

请参阅[调试 JavaScript](https://developer.chrome.com/devtools/docs/javascript-debugging)

此外，如果您使用的是 ASP.NET MVC，则可以附加文件`@{Write("//@ sourceURL=myScriptName.js");}`中的脚本`*.cshtml`。

[![铬检查](../Images/578070cde352a2a4a0476e9a41d3bc35.png)](https://i.stack.imgur.com/nSlz5.png)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-02T18:22:58.823

我建议通过该`console`功能将信息输出到控制台。然后，您可以在调试工具（例如 Firefox 的 Firebug 或 Chrome 中的内置工具）中查看此信息。或者，您可以始终`alert`用于调试。

或者，也许我对你的问题有些不理解......

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-03-01T21:24:40.940

这是似乎对我有用的唯一方法：

```
 --- CONTEXT: CODE EDITOR ------
  1.) Put this line at the top of the .js file to be debugged (will cause breakpoint as soon as the file is opened by the browser):
      debugger;
  2.) Push the new code to the server.   

  --- CONTEXT: CHROME Browser ------
  1.) Close all the Chrome browser windows except 1 window, 1 tab
  2.) Close Chrome browser (Chrome / Quit)
  3.) From the COMMAND LINE in MAC... 
      /Applications/Google\ Chrome.app/Contents/MacOS/Google\ Chrome --auto-open-devtools-for-tabs
      (this will open Chrome and every window / tab that opens will open the debugger)
  4.) Open Chrome browser (1 window, 1 tab appears)
  5.) Enter link where the debugger line of code was added in step 1 
        (Debugger should stop on first line of Javascript content) 
```

# python-3.x - 如果使用 for 循环，如何保存用户的多个输入？

> ID：12695972
> 
> 赞同：0
> 
> 时间：2012-10-02T18:20:50.290
> 
> 标签：python-3.x

```
for i in n:
    sn = str(input("What is the student's name? "))
    sg = eval(input("What is the student's grade? ")) 
```

如果您这样做，那么您将如何保留用户的输入并存储它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T18:25:28.267

你可以使用一个数组：

```
names = []
grades = []
for i in n:
    sn = str(input("What is the student's name? "))
    names.append(sn)
    sg = eval(input("What is the student's grade? "))
    grades.append(sg) 
```

# sql - SQL 函数接受一个 sql 字符串，执行该字符串并返回表

> ID：12695974
> 
> 赞同：1
> 
> 时间：2012-10-02T18:21:03.370
> 
> 标签：sql, sql-server, tsql, sql-function

我已经完成了很多返回表格的函数，但不知何故，这个函数一直给我一个错误，`Begin`我无法弄清楚为什么。我的`where`语句存储在一个表中。这个函数我想传入一个值和 where 语句。

```
CREATE FUNCTION dbo.Testtesttest(@employeeID        AS INT,
                                 @sqlWhereStatement AS VARCHAR(max))
Returns TABLE
  BEGIN
      DECLARE @mySQLStatement VARCHAR(max)

      SET @mySQLStatement = 'Set Quoted_Identifier OFF Select '
                           + CONVERT(VARCHAR, @employeeID) + ',* from (
        select m.ManagerID, m.Name,m.Email,e.BU,
        e.PSC from m inner join e on m.ManagerID = e.EmployeeID
        group by m.ManagerID, m.Name,m.Email,e.BU,e.SC,
        e.PSC) x where ' + @sqlWhereStatement

      EXEC(@mySQLStatement)

      RETURN
  END 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T18:22:06.147

您不能在函数中使用动态 SQL，因此您无法通过 TSQL TVF 执行此操作。

也许 CLR UDF 可以做这样的事情，但无论如何我都会找到不同的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T19:31:28.077

你为什么不把这个逻辑包装在一个存储过程中呢？如果需要将 sproc 的结果放入表中，可以使用 INSERT INTO EXEC

```
INSERT INTO
yourTable(col1, col2, col3)
EXEC Testtesttest @employeeID, @sqlWhereStatement 
```

# diff - 颜色编码的修订历史

> ID：12695976
> 
> 赞同：3
> 
> 时间：2012-10-02T18:21:08.990
> 
> 标签：diff, versioning, revision-history

是否有任何工具或代码可以基本上比较同一文件的多个先前版本并给出一种“组合”差异，可能颜色编码代表每个修订？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T13:59:23.567

有许多：

*   SVN，与 Diff 比较 ![在此处输入图像描述](../Images/5bf968ffb8fa2868ee667c4a6745f391.png)
*   WinMerge ![在此处输入图像描述](../Images/6efa7a9df7859c45cb7d83be43d72b52.png)
*   比特桶

![在此处输入图像描述](../Images/100e39b70661c2d12fff6172c9fe723c.png)

*   Github

选择你喜欢的那个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T10:13:53.343

您可以使用`Beyond Compare`. 这是一个比较文件的好工具，它以不同的颜色显示差异，以便您轻松识别它们，您甚至可以通过单击将更改的数据从一个文件转移/合并到另一个文件。虽然它不是免费的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T18:27:31.067

`Team`Eclipse 在上下文菜单中具有相同的注释功能。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-02T18:26:26.263

Visual Studio/TFS 可以通过“注释”功能做到这一点。否则，它将取决于您的工具集。

# json - Jackson 和 Hibernate 延迟加载实体

> ID：12695977
> 
> 赞同：2
> 
> 时间：2012-10-02T18:21:09.250
> 
> 标签：json, hibernate, lazy-loading, jackson

我想知道如何控制延迟加载实体的杰克逊反序列化。例如，我的设置包含两个实体

```
Country 1------many State and 
State many----1 Country 
```

现在，当我加载国家并序列化为 JSON 时，它会在获取一个国家的州和该州的国家等之间进行无限递归，然后出错。

我只想停止在一个级别上获取。说国家只停留在状态（或只是它的 id 属性）并且不需要获取它的国家。我怎样才能做到这一点？

谢谢。

# pass-by-reference - 返回新多边形对象的过程

> ID：12695980
> 
> 赞同：1
> 
> 时间：2012-10-02T18:21:12.510
> 
> 标签：pass-by-reference, pascal

我正在使用 Pascal 编写多项式数据类型的作业。我遇到的最大问题是当我尝试使用过程 setCoeff(var p: poly; n: integer; coeff: real) 时，它返回一个新的 poly 对象，其系数仅为索引 n 或 x^n。如何保持其他值不变并使用该程序设置新系数？我出于绝望尝试了很多事情，但这是我使用的两种方法：

```
procedure setCoeff(var p : poly; n : integer; coeff : real);
{ prints error and halts if n < 0 or n > MAX_DEGREE; setting the coefficient of a term to zero where n >= 0 and n <= MAX_DEGREE will result in that term becoming or remaining non-existent }

var i : integer;

Begin
if n < 0 then
Begin
        writeln('Error - illegal coefficient; program halted');
    Halt(0);
End;
if n > MAX_DEGREE then
Begin
        writeln('Error - illegal coefficient; program halted');
    Halt(0);
End;
p[n] := coeff;
End;
End; 
```

-和-

```
procedure setCoeff(var p : poly; n : integer; coeff : real);
{ prints error and halts if n < 0 or n > MAX_DEGREE; setting the coefficient of a term to zero where n >= 0 and n <= MAX_DEGREE will result in that term becoming or remaining non-existent }

var i : integer;

Begin
if n < 0 then
Begin
        writeln('Error - illegal coefficient; program halted');
    Halt(0);
End;
if n > MAX_DEGREE then
Begin
        writeln('Error - illegal coefficient; program halted');
    Halt(0);
End;
p[n] := coeff;
for i := MAX_DEGREE downto 0 do
Begin
getCoeff(p,i,coeff);
if coeff <> 0.0 then
    p[i] := coeff;
End;
End; 
```

我知道数组是通过引用传递的，但是每次运行 setCoeff(...) 时似乎都会重置数组的值。这是我的数据类型的顶部，包括它是如何声明的：

```
unit
polynomial;

interface

uses
    Math;

const
MAX_DEGREE = 1000;

type
poly = Array[0..MAX_DEGREE] of Real;

var
coeff: Real;
degree : Integer; 
```

# java - 为什么 checkstyle 会抱怨这个？

> ID：12695982
> 
> 赞同：4
> 
> 时间：2012-10-02T18:21:18.340
> 
> 标签：java, checkstyle

我有一个类字段，它是一个数据对象。为什么 checkstyle 抱怨“写出现 b”，这是什么意思？doSomething1() 总是在 doSomething() 之前调用

```
public class A{
  private B b;
  public void doSomething() {
    if(b!=null) {
      b.setYear(2012);
      b.setDay("Tuesday");
   } 
  }
  public void doSomething1(){
    b = new B();
    b.setDate(new Date());
  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-09-11T16:02:44.773

这不是来自 Checkstyle，而是来自 Eclipse 本身。

如果您突出显示您的类的一个属性，它将显示该属性在该类中的出现，并在右侧滚动条中带有标记。这些是黄色的，就像 Checkstyle 标记一样。

它将突出显示读取属性的实例（“X 的出现”）以及该属性可以写入的实例（“X 的写入出现”），例如，如果您将其作为参数传递给方法。

可以看到消息在哪里配置[http://grepcode.com/file/repository.grepcode.com/java/eclipse.org/3.5.2/org.eclipse.jdt/ui/3.5.2/org/eclipse/ jdt/internal/ui/search/SearchMessages.properties](http://grepcode.com/file/repository.grepcode.com/java/eclipse.org/3.5.2/org.eclipse.jdt/ui/3.5.2/org/eclipse/jdt/internal/ui/search/SearchMessages.properties)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T13:36:25.420

我最近对 ​​CheckStyle、FindBugs 等进行了一些研究。

对于 FindBugs (findbugs.sourceforge.net)，一个常见的问题是 FindBugs 所说的“死存储”，即从不读取值而只*写入*值。会不会是这个问题？

您的示例似乎非常简化-您能提供更多详细信息吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-10-21T19:02:55.397

这不是错误。当您将光标上下文放在特定术语上时，会发生这种现象，在您的情况下为“b”。当您这样做时，您可以看到该术语的所有出现由代码窗口右侧的空灰色框划分。您还将以淡黄色看到该术语（如果它是一个变量）已写入数据的位置。

试试这个，点击 Exception 这个词的某个地方，你会看到只有浅灰色的空心盒子。现在在您的代码中尝试一个真实变量，您应该会看到灰色框和一个或多个淡黄色框。

我自己从未使用过此功能，但也许有人觉得它很有价值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T19:25:51.813

您确定这不是您自己的自定义规则吗？看起来不像 checkstyle 附带的其中之一[http://checkstyle.sourceforge.net/availablechecks.html](http://checkstyle.sourceforge.net/availablechecks.html)如果这是您自己的自定义规则，您需要询问编写该自定义检查的人。

我只能认为该规则适用于非可变对象，它们更容易维护。

# javascript - Ember.js 查看获取上下文中隐式迭代器的值

> ID：12695983
> 
> 赞同：1
> 
> 时间：2012-10-02T18:21:24.307
> 
> 标签：javascript, ember.js, handlebars.js

`{{.}}`是否可以从内部引用隐式迭代器的值`Ember.View`？

例如

**查看模板**

```
{{#each simple_old_array_of_numbers}}
    {{view App.Subview}}
{{/each}} 
```

**查看代码**

```
App.Subview = Em.View.extend({
    template_name: 'subview_template',
    didInsertElement: function() {
        //do some logic based on the implicit iterator
        //have tried this.get('.'), but that didn't work
    }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T19:27:55.137

我不知道我是否理解得很好，但你可以做类似的事情

```
{{#each item in simple_old_array_of_numbers}}
  {{view App.Subview itemBinding="item"}}
{{/each}}

App.Subview = Em.View.extend({
  template_name: 'subview_template',
  item: null,
  didInsertElement: function() {
    console.log(this.get('item'));
  }
}); 
```

# java - iText 忽略图像后添加的空间

> ID：12695987
> 
> 赞同：4
> 
> 时间：2012-10-02T18:21:40.650
> 
> 标签：java, image, itext, space

我在使用 iText for java（版本 5.3.2）格式化 PDF 文档时遇到问题。

我的文档应该是这样的：

```
text1word1 text1word2 text1word3\.    --
***                                   |
-----------                           |
| image 1 |                           |
-----------                           |- page 1
***                                   |
***                                   | 
text2word1 text2word2 text2word3\.     |
***                                  --
-----------                          --
| image 2 |                           |
-----------                           |
***                                   |
***                                   |- page 2
text3word1 text3word2 text3word3\.     | 
***                                   |
-----------                           |
| image 3 |                           |
-----------                          -- 
```

*** = 空格

但是在一个接一个地添加所有元素之后，我得到了这样的结果：

```
text1word1 text1word2 text1word3\.     --
***                                    |
-----------                            |
| image 1 |                            |
-----------                            |- page 1
***                                    |
***                                    |
text2word1 text2word2 text2word3\.      |
***                                   --
-----------                           --
| image 2 |      (where is all my space here gone??)
-----------  <----/                    |
text3word1 text3word2 text3word3\.      |- page 2
***                                    |
-----------                            |
| image 3 |                            |
-----------                           -- 
```

*** = 空格

只有当图像是新页面的第一个对象时，才会出现问题！

图像是缩放以适应 385x500 点的屏幕截图。文本和屏幕截图分布在几页上。我已经尝试填充段落、表格和空白图像以强制空间......到目前为止没有任何工作......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T06:58:44.820

你的空间去哪儿了？它在上一页！

如果图像不适合一页，iText 会将其保留到下一页，并首先添加其他内容。

如何避免这种情况？采用`writer.setStrictImageSequence(true);`

现在 iText 不会尝试在当前页面上添加尽可能多的内容。

这个答案取自我的书“iText in Action - Second Edition”p52。

# java - 我如何调试 Hadoop map reduce

> ID：12695991
> 
> 赞同：5
> 
> 时间：2012-10-02T18:21:48.363
> 
> 标签：java, debugging, logging, hadoop, mapreduce

我试图建立一个地图减少工作。

它运行到完成，但最后会出现奇怪的数据。

当我尝试使用 system.out.println("debug data") 对其进行调试时，它不会显示在屏幕上。

使用 java API 生成外部日志文件，尝试使用 log.severe("log data") 或使用 log4j 记录器方法 log.info(log data) 打印到屏幕也不起作用/

我唯一看到我的调试消息时没有任何效果是在 map reduce 作业中出现异常时。

如何修复它以便我可以在文件或屏幕上看到我的调试消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T12:05:00.013

由于您正在处理大数据，因此跟踪消息的大小可能很大，因此可能会导致问题。考虑“system.out.println”样式日志的替代方案很有用：

*   使用计数器（[这里](http://www.philippeadjiman.com/blog/2010/01/07/hadoop-tutorial-series-issue-3-counters-in-action/)是一个简单的例子）
*   [使用MultipleOutputs](https://hadoop.apache.org/docs/r2.6.3/api/org/apache/hadoop/mapreduce/lib/output/MultipleOutputs.html)将日志写入 HDFS

Counters 和 MultipleOutputs 最好的地方 - 您可以通过编程方式访问它们，如果是 MultipleOutputs，您甚至可以运行 map/reduce 任务以从日志中提取一些统计信息。

在生产环境中调试的另一种替代方法是单元测试，MiniMRCluster 将帮助您在单元测试期间测试您的 map-reduce 作业。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T18:37:05.863

我使用 maven 在 Eclipse 中开发我的 map/reduce 代码来构建运行时 jar 并管理依赖项。在我的机器上安装并运行 hadoop 以支持 HDFS 后，我可以在 Eclipse 中运行和调试我的代码。这意味着在 Eclipse 调试透视图中使用断点和其他所有内容。