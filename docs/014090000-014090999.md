# StackOverflow 问答 14090000-14090999

# objective-c - Simperium - 文件上传但设备之间不同步

> ID：14090002
> 
> 赞同：0
> 
> 时间：2012-12-30T10:37:39.183
> 
> 标签：objective-c, ios, core-data, simperium

我今天在寻找 iCloud 同步我的核心数据数据库的替代方案时偶然发现了 Simperium。

它通过数据浏览器传输数据的速度和可见性给我留下了深刻的印象，据我所知，iCloud 无法轻易提供。我遵循了 simpleToDo 示例应用程序并设法让它工作（该应用程序的 ipad 版本有一些需要修复的错误）。

在对它的工作方式感到满意后，我决定按照与示例中相同的步骤在我的应用程序中实现它。我删除了所有与 icloud 相关的代码，并通过虚拟镜像示例中提供的代码（仅对我的托管对象模型稍作改动）重新实现了应用程序委托核心数据代码。

在我的应用程序中创建记录方面似乎一切顺利，我可以看到更改已通过网站的仪表板数据浏览器工具上传。

**我的问题**

我已经验证数据正在从两个设备发送到服务器，但是，这些更改都没有显示在另一个设备上。

我错过了什么？我在 simpleToDo 示例的代码中找不到任何东西，这似乎表明在收到某种通知后可以调用该方法来执行表视图的更新或刷新。

此外，我看不到任何日志显示已检测到/添加到队列或下载了新记录。

我与 Simperium 相关的最后日志是：

```
2012-12-30 21:00:46:772 myClients[745:907] Simperium authentication success!
2012-12-30 21:00:46.781 myClients[745:907] Reachability Flag Status: -R ------- networkStatusForFlags
2012-12-30 21:00:46:782 myClients[745:907] Simperium starting network managers...
2012-12-30 21:00:49:514 myClients[745:907] Simperium finished processing index for Client 
```

任何帮助将不胜感激，我真的很期待看到这对我有用，因为我相信这将是一个不错的选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T18:51:27.930

您可以在 Simperium 实例上启用更详细的日志记录：

```
simperium.verboseLoggingEnabled = YES; 
```

这将帮助您确认每台设备上正在接收数据。正如您已经发现的那样，您应用程序的基于 Web 的数据浏览器可以帮助您确认数据是否正在发送。

除此之外，您提到的示例使用 an`NSFetchedResultsController`这是一个本机类，它会`UITableView`在 Core Data 中添加、删除和更改项目时自动更新 a。如果您以这种方式构建应用程序，则无需执行任何其他操作即可更新表格视图。

如果您需要更完整的控制，或者您有想要手动更新的 UI 元素，您可以使用`SPBucketDelegate`在数据更改时收到通知。您的每个实体都有一个存储桶，您可以从您的 Simperium 实例中检索该存储桶。然后你可以`SPBucketDelegate`在那个桶上设置：

```
SPBucket *bucket = [simperium bucketForName:@"Todo"];
bucket.delegate = self; 
```

该`self`实例现在将具有诸如`bucket:didChangeObjectForKey:forChangeType:`在作为 Todo 实体的任何对象更改时调用的方法。您可以在 中查看这些委托方法的完整列表`SPBucket.h`。

# android - 在eclipse中将外部jar jwordpress-0.5.1.jar添加到android项目

> ID：14090004
> 
> 赞同：1
> 
> 时间：2012-12-30T10:38:14.097
> 
> 标签：android, eclipse, jar

我添加了一个外部 jar jwordpress-0.5.1.jar。在 logcat 我看到：

*   12-30 09:34:41.041: E/dalvikvm(379): 找不到类 'net.bican.wordpress.Wordpress'，引用自方法 ru.androiden.client.MainActivity.onCreate
*   12-30 09:34:41.201：E/AndroidRuntime(379)：致命异常：主要
*   12-30 09:34:41.201: E/AndroidRuntime(379): java.lang.NoClassDefFoundError: net.bican.wordpress.Wordpress

我使用了几种方法来添加jar，例如：

*   [如何添加。JAR 在我的项目中？](https://stackoverflow.com/questions/13564208/how-to-add-jar-in-my-project)
*   [如何将外部 JSON jar 文件导入 ANDROID 项目](https://stackoverflow.com/questions/10674601/how-to-import-external-json-jar-file-into-android-project)

我该怎么办？我已经解决了这个问题两天了。问候，丹尼斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T12:20:50.303

**听起来**jar 文件没有与您的应用程序一起打包。

即它在你的eclipse类路径中（假设eclipse的java编辑器没有抱怨你的import语句？）所以它在编译时就在那里。**但是**jar 文件实际上并未与您的应用程序捆绑在一起，因此您引用的类在运行时实际上并不可用。

要解决这个问题，只需在您的项目中创建一个 libs 目录，然后按照您阅读的步骤从那里导入 jar 文件。这应该确保 jar 被捆绑并且它的类在运行时可用。

# python - 在 SQL 中创建许多相关对象，例如 INSERT ... SELECT

> ID：14090008
> 
> 赞同：11
> 
> 时间：2012-12-30T10:38:55.753
> 
> 标签：python, django

我正在发送消息，我需要跟踪发送的每条消息、发送时间、发送给谁等。

因此，除了消息之外，我还有一个额外的表模型中的收件人，并且每次创建新消息时都需要填充收件人。消息的`Recipient`将从第三个模型中填充，其中包含我要发送到的所有当前电子邮件地址。

所以我的问题是我将如何以最有效的方式进行？
我知道我可以做类似的事情：

```
m = Message.objects.create(*args)
for email in ModelWithEmails.active.values_list('email', flat=True):
    Recipient.objects.create(message=m, email=email) 
```

但这仍然涉及从数据库中获取所有电子邮件地址，如果可能的话，我希望将其全部保存在数据库中，因为每次都会获取数千个地址。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-30T10:42:30.453

您不能使用 django ORM 执行 INSERT .. SELECT，但您可以执行批量插入（从 django 1.4 开始）：

```
m = Message.objects.create(*args)
recipients = []
for email in ModelWithEmails.active.values_list('email', flat=True):
    recipients.append(Recipient(message=m, email=email))

Recipient.objects.bulk_create(recipients) 
```

  或者更高效一点：

```
m = Message.objects.create(*args)
emails = ModelWithEmails.active.values_list('email', flat=True)
Recipient.objects.bulk_create([Recipient(message=m, email=email) for email in emails]) 
```

对于 INSERT .. SELECT，您将不得不退回到原始 SQL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T12:25:37.747

Django ORM 不再需要用户使用原始 sql。这很方便，但可能不是很灵活。如果您想使用 ORM，bulk_create 将成为您的朋友，正如 Pavel Anossov 所说。

# c# - 如何向/从服务器发送图像文件

> ID：14090010
> 
> 赞同：0
> 
> 时间：2012-12-30T10:39:09.700
> 
> 标签：c#, sql-server, bitmap, sql-server-2012

我想实现以下两个服务：（使用 web api ）

1.  从服务器获取图片。
2.  将新图片添加到服务器。

服务器将图片存储在 DB iun varbinary 中。图片可以是bmp、jpg、ico

我的函数签名是

```
AddIcon(string Id, byte[] IconFile) 
```

然后我想把它插入到数据库中。现在，如果我通过我的 DTO 传递 BitmapImage，我需要引用许多对象，我认为这不是最佳做法。这就是为什么我更喜欢 byte[]。

1.  有没有办法在不知道其结构的情况下将 BitmapImage 转换为 Byte[] ？
2.  检索文件时，有没有办法在不知道其结构的情况下将 Byte[] 转换回 BitmapImage（例如从磁盘加载时）谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T11:00:30.933

BitmapImage 经过优化，它隐藏了编解码器信息等细节。您可以使用：

```
 public static byte[] SaveToPng(this BitmapSource bitmapSource)
    {
        return SaveWithEncoder<PngBitmapEncoder>(bitmapSource);
    }

    private static byte[] SaveWithEncoder<TEncoder>(BitmapSource bitmapSource) where TEncoder : BitmapEncoder, new()
    {
        if (bitmapSource == null) throw new ArgumentNullException("bitmapSource");

        using (var msStream = new MemoryStream())
        {
            var encoder = new TEncoder();
            encoder.Frames.Add(BitmapFrame.Create(bitmapSource));
            encoder.Save(msStream);
            return msStream.ToArray();
        }
    }

    public static BitmapSource ReadBitmap(Stream imageStream)
    {
        BitmapDecoder bdDecoder = BitmapDecoder.Create(imageStream, BitmapCreateOptions.PreservePixelFormat, BitmapCacheOption.OnLoad);
        return bdDecoder.Frames[0];
    } 
```

# node.js - 尝试在另一条路线上访问它时 req.session 内容消失

> ID：14090014
> 
> 赞同：1
> 
> 时间：2012-12-30T10:39:58.430
> 
> 标签：node.js, session, express

我无法理解使用 expressjs 会话的代码有什么问题。

我正在设置`req.session.is_logged = true`一条路线`/login`，然后按 F5 调用该路线`/session`，其值为`req.session.is_logged`false。

这是一些代码

```
var express = require("express");
var app = express();

app.configure(function(){
    app.use(express.bodyParser());
    app.use(express.cookieParser());
    app.use(express.session({secret: 'test', store: express.session.MemoryStore({
        reapInterval: 60000 * 10
    })}));
});

app.get('/session', function(req, res){
        if (req.session.is_logged){
            console.log('|-->Session recognized');
            res.status(200);
            res.send({ response: "OK" });
        }else{
            console.log('|-->Any session recognized');
            res.status(403);
            res.send({ response: "KO" })
        };
});

app.get('/login', function(req, res){
    req.session.is_logged = true;
    res.status(200);
    res.send({ response: "OK" });       
});

app.listen(3000); 
```

我看到了一些类似的方法，它似乎有效......感谢您的帮助！

快递 v3.0.5

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T07:09:08.350

你可能不尊重[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)，会话系统不支持 CORS。

您的代码没有错，但是如果您访问 URL`mydomain.com`并到达您的节点服务器，`mydomain.com:3000`它就无法工作。

有很多方法可以使它工作（Apache 代理反向，NGINX ......），进行一些研究并采取最适合您的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T15:52:29.093

你在 /login 路由上设置 req.session.is_logged = false 那么它怎么可能是真的..

使用内存存储进行会话的更好方法是

```
var MemoryStore = express.session.MemoryStore
,store = new MemoryStore();
app.use(express.session({ secret: 'something', store: store })); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T01:52:44.760

问题是您没有使用登录路由发送响应，因此客户端不知道设置 cookie。解决方法是简单地发送任何响应：

```
app.get('/login', function(req, res){
    req.session.is_logged = true;            
    res.send('Ok!'); /* Now the 'Set-Cookie' HTTP header will be sent to the client. */
}); 
```

并确保您将`MemoryStore`对象正确引用为属性，`express.session`因为它不是全局对象：

```
app.use(express.session({secret: 'test', store: express.session.MemoryStore({
    reapInterval: 60000 * 10
})})); 
```

# mysql - Count the number of rows in 30 day bins

> ID：14090016
> 
> 赞同：7
> 
> 时间：2012-12-30T10:40:29.387
> 
> 标签：mysql, select, count, datediff

Each row in my table has a date time stamp, and I wish to query the database from now, to count how many rows are in the last 30 days, the 30 days before that and so on. Until there is a 30 day bin going back to the start of the table.

I have successfully carried out this query by using Python and making several queries. But I'm almost certain that it can be done in one single MySQL query.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T13:06:44.503

如果你只需要计算至少有一行的间隔，你可以使用这个：

```
select
  datediff(curdate(), `date`) div 30 as block,
  count(*) as rows_per_block
from
  your_table
group by
  block 
```

这也显示了开始日期和结束日期：

```
select
  datediff(curdate(), d) div 30 as block,
  date_sub(curdate(),
           INTERVAL (datediff(curdate(), `date`) div 30)*30 DAY) as start_block,
  date_sub(curdate(),
           INTERVAL (1+datediff(curdate(), `date`) div 30)*30-1 DAY) as end_block,
  count(*)
from your_table
group by block 
```

但如果您还需要显示所有间隔，您可以使用这样的解决方案：

```
select
  num,
  date_sub(curdate(),
           INTERVAL (num+1)*30-1 DAY) as start_block,
  date_sub(curdate(),
           INTERVAL num*30 DAY) as end_block,
  count(`date`)
from
  numbers left join your_table
  on `date` between date_sub(curdate(),
           INTERVAL (num+1)*30-1 DAY)  and
  date_sub(curdate(),
           INTERVAL num*30 DAY)
where num<=(datediff(curdate(), (select min(`date`) from your_table) ) div 30)
group by num 
```

但这要求您`numbers`已经准备好表格，或者[在此处查看小提琴](http://sqlfiddle.com/#!2/096b3/2/0)以获取没有数字表格的解决方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-05T02:19:53.070

没有存储过程、临时表、只有一个查询，以及给定日期列索引的高效执行计划：

```
select

  subdate(
    '2012-12-31',
    floor(dateDiff('2012-12-31', dateStampColumn) / 30) * 30 + 30 - 1
  ) as "period starting",

  subdate(
    '2012-12-31',
    floor(dateDiff('2012-12-31', dateStampColumn) / 30) * 30
  ) as "period ending",

  count(*)

from
  YOURTABLE
group by floor(dateDiff('2012-12-31', dateStampColumn) / 30); 
```

除了这个咒语之外，这里发生的事情应该很明显：

```
floor(dateDiff('2012-12-31', dateStampColumn) / 30) 
```

该表达式出现多次，其计算结果为 30 天前的周期`dateStampColumn`数。`dateDiff`返回以天为单位的差值，将其除以 30 以在 30 天的周期内得到它，然后将其全部输入以`floor()`将其舍入为整数。一旦我们有了这个数字，我们就可以`GROUP BY`了，然后我们做一些数学运算，将这个数字转换回该时期的开始和结束日期。

如果您愿意，请替换`'2012-12-31'`为。`now()`以下是一些示例数据：

```
CREATE TABLE YOURTABLE
    (`Id` int, `dateStampColumn` datetime);

INSERT INTO YOURTABLE
    (`Id`, `dateStampColumn`)
VALUES
    (1, '2012-10-15 02:00:00'),
    (1, '2012-10-17 02:00:00'),
    (1, '2012-10-30 02:00:00'),
    (1, '2012-10-31 02:00:00'),
    (1, '2012-11-01 02:00:00'),
    (1, '2012-11-02 02:00:00'),
    (1, '2012-11-18 02:00:00'),
    (1, '2012-11-19 02:00:00'),
    (1, '2012-11-21 02:00:00'),
    (1, '2012-11-25 02:00:00'),
    (1, '2012-11-25 02:00:00'),
    (1, '2012-11-26 02:00:00'),
    (1, '2012-11-26 02:00:00'),
    (1, '2012-11-24 02:00:00'),
    (1, '2012-11-23 02:00:00'),
    (1, '2012-11-28 02:00:00'),
    (1, '2012-11-29 02:00:00'),
    (1, '2012-11-30 02:00:00'),
    (1, '2012-12-01 02:00:00'),
    (1, '2012-12-02 02:00:00'),
    (1, '2012-12-15 02:00:00'),
    (1, '2012-12-17 02:00:00'),
    (1, '2012-12-18 02:00:00'),
    (1, '2012-12-19 02:00:00'),
    (1, '2012-12-21 02:00:00'),
    (1, '2012-12-25 02:00:00'),
    (1, '2012-12-25 02:00:00'),
    (1, '2012-12-26 02:00:00'),
    (1, '2012-12-26 02:00:00'),
    (1, '2012-12-24 02:00:00'),
    (1, '2012-12-23 02:00:00'),
    (1, '2012-12-31 02:00:00'),
    (1, '2012-12-30 02:00:00'),
    (1, '2012-12-28 02:00:00'),
    (1, '2012-12-28 02:00:00'),
    (1, '2012-12-30 02:00:00'); 
```

结果：

```
period starting     period ending   count(*)
2012-12-02          2012-12-31      17
2012-11-02          2012-12-01      14
2012-10-03          2012-11-01      5 
```

期间端点包括在内。

[在SQL Fiddle](http://www.sqlfiddle.com/#!2/6d778/9)中玩这个。

有一点潜在的愚蠢之处在于，任何匹配行为零的 30 天期间都不会包含在结果中。如果您可以将其与一个时期表结合起来，则可以将其消除。然而，MySQL 没有像 PostgreSQL 的[generate_series()](http://www.postgresql.org/docs/8.2/static/functions-srf.html)这样的东西，所以你必须在你的应用程序中处理它或者尝试[这个聪明的 hack](https://stackoverflow.com/questions/6870499/generate-series-equivalent-in-mysql)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-30T11:02:41.933

尝试这个：

```
SELECT 
  DATE_FORMAT(t1.`Date`, '%Y-%m-%d'),
  COUNT(t2.Id)
FROM 
(
  SELECT SUBDATE(CURDATE(), ID) `Date`
  FROM
  (
    SELECT  t2.digit * 10 + t1.digit + 1 AS id
    FROM         TEMP AS t1
    CROSS JOIN TEMP AS t2
  ) t 
  WHERE Id <= 30 
) t1
LEFT JOIN YOURTABLE t2 ON DATE(t1.`Date`) = DATE(t2.dateStampColumn)
GROUP BY t1.`Date`; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/59aef/8)

但是，您需要`Temp`像这样创建一个临时表：

```
CREATE TABLE TEMP 
(Digit int);
INSERT INTO Temp VALUES(0),(1),(2),(3),(4),(5),(6),(7),(8),(9); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-30T10:44:47.280

Could you please try the following:

```
SELECT Count(*)
FROM
  yourtable
where
  dateColumn between Now() and Now() - Interval 30 Day 
```

It needs some looping, for a better answer to isolote all 30 days intervals going back. As you also need a 30 day interval between min(Date) in the table and the last loop date :) Or to the least another table that carries the dates of each 30 day interval, and then join.

Here is getting count just by each calendar month. Not exactly what you need.

```
SELECT
  extract(month from datecolumn),
  count(*)
FROM
  yourtable
GROUP BY
  extract(month from datecolumn); 
```

Given a thought to my latter comment and Stefan's comment, here is a long code yet with proper resutls. Based on my own sample data and compatible with MYSQL with `interval`. If you need to use with SQL Server please use `DateADD` or quivalent function.

*   [SQLFIDDLE](http://sqlfiddle.com/#!2/a4093/3)

Sample data:

```
ID_MAIN  FIELD1  FILTER
----------------------------------------
1        red     August, 05 2012 00:00:00+0000
2        blue    September, 15 2012 00:00:00+0000
3        pink    September, 20 2012 00:00:00+0000
4        blue    September, 27 2012 00:00:00+0000
5        blue    October, 02 2012 00:00:00+0000
6        blue    October, 16 2012 00:00:00+0000
7        blue    October, 22 2012 00:00:00+0000
8        pink    November, 12 2012 00:00:00+0000
9        pink    November, 28 2012 00:00:00+0000
10       pink    December, 01 2012 00:00:00+0000
11       pink    December, 08 2012 00:00:00+0000
12       pink    December, 22 2012 00:00:00+0000 
```

Query:

```
set @i:= 0;
SELECT MIN(filter) INTO @mindt
FROM MAIN
;
select
  count(a.id_main),
  y.dateInterval,
  (y.dateInterval - interval 29 day) as lowerBound
from
  main a join (
    SELECT date_format(Now(),'%Y-%m-%d') as dateInterval
    from dual
    union all
    select x.dateInterval
    from (
      SELECT
        date_format(
          DATE(DATE_ADD(Now(),
                        INTERVAL @i:=@i-29 DAY)),'%Y-%m-%d') AS dateInterval
      FROM Main, (SELECT @i:=0) r
      HAVING datediff(dateInterval,@mindt) >= 30
      order by dateInterval desc) as x) as y
  on a.filter <= y.dateInterval 
     and a.filter > (y.dateInterval - interval 29 day)
group by y.dateInterval
order by y.dateInterval desc
; 
```

Results:

```
COUNT(A.ID_MAIN)    DATEINTERVAL    LOWERBOUND
----------------------------------------------
2                   2012-12-30  2012-12-01
3                   2012-12-01  2012-11-02
2                   2012-11-02  2012-10-04
4                   2012-10-04  2012-09-05 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-04T10:44:37.933

创建一个存储过程以按 30 天计算行数。

首先运行此过程，然后在要生成数据时调用相同的过程。

```
DELIMITER $$

DROP PROCEDURE IF EXISTS `sp_CountDataByDays`$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `sp_CountDataByDays`()
BEGIN 
    CREATE TEMPORARY TABLE daterange (
            id INT(10) UNSIGNED NOT NULL AUTO_INCREMENT, 
            fromDate DATE, 
            toDate DATE, 
            PRIMARY KEY (`id`)
    ); 

    SELECT DATEDIFF(CURRENT_DATE(), dteCol) INTO @noOfDays 
    FROM yourTable ORDER BY dteCol LIMIT 1;

    SET @counter = -1;
    WHILE (@noOfDays > @counter) DO 
        INSERT daterange (toDate, fromDate) 
        VALUES (DATE_SUB(CURRENT_DATE(), INTERVAL @counter DAY), DATE_SUB(CURRENT_DATE(), INTERVAL @counter:=@counter + 30 DAY));
    END WHILE;

    SELECT d.id, d.fromdate, d.todate, COUNT(d.id) rowcnt 
    FROM daterange d  
    INNER JOIN yourTable a ON a.dteCol BETWEEN d.fromdate AND d.todate 
    GROUP BY d.id;

    DROP TABLE daterange;
END$$

DELIMITER ; 
```

然后**调用**程序：

```
CALL sp_CountDataByDays(); 
```

你得到如下输出：

```
ID  From Date   To Date     Row Count
1   2012-12-06  2013-01-05  17668
2   2012-11-06  2012-12-06  2845
3   2012-10-07  2012-11-06  2276
4   2012-09-07  2012-10-07  4561
5   2012-08-08  2012-09-07  5415
6   2012-07-09  2012-08-08  8954
7   2012-06-09  2012-07-09  4387
8   2012-05-10  2012-06-09  7911
9   2012-04-10  2012-05-10  7935
10  2012-03-11  2012-04-10  2566 
```

# python - Tear down method for twisted reactor?

> ID：14090020
> 
> 赞同：3
> 
> 时间：2012-12-30T10:40:50.713
> 
> 标签：python, twisted

I'm writing a custom reactor for twisted and it needs some cleaning to do when it has to stop. I tried overriding the stop method like this:

```
def stop(self):
    posixbase.PosixReactorBase.stop(self)
    #cleanup code here 
```

It does, however, seem to **not** always be called. When I run trial like this `python -m cProfile /usr/bin/trial -r custom tests/ | grep "stop"` the only *stop* methods that are called are:

```
 2    0.000    0.000    0.000    0.000 abstract.py:397(stopReading)
    1    0.000    0.000    0.000    0.000 abstract.py:405(stopWriting)
    1    0.000    0.000    0.000    0.000 log.py:691(stop)
    1    0.000    0.000    0.000    0.000 protocol.py:678(stopProtocol)
    3    0.000    0.000    0.000    0.000 reporter.py:97(stopTest)
    3    0.000    0.000    0.000    0.000 result.py:79(stopTest)
    1    0.000    0.000    0.000    0.000 udp.py:218(stopListening) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T16:56:42.920

不要这样做。不要子类化反应器，不要覆盖它的方法。如果要在反应堆停止时运行代码，请使用`reactor.addSystemEventTrigger("before", "shutdown", f)`（或`"during"`关闭或`"after"`关闭）。

或者使用更高级别的 API 并[`Service`](http://twistedmatrix.com/documents/current/api/twisted.application.service.Service.html)使用`stopService`方法定义 a 并将您的服务连接到[`application`](http://twistedmatrix.com/documents/current/core/howto/application.html).

# informatica-powercenter - Informatica: Prev column value display

> ID：14090025
> 
> 赞同：2
> 
> 时间：2012-12-30T10:41:10.827
> 
> 标签：informatica-powercenter, informatica

The data in the source table is as follows: -

```
Empno   Ename  sal
101     Allen  1000
102     Alex   2000
103     Tom    1500
104     Cb     2100 
```

I want the output to be as follows :-

```
Empno   Ename  sal
101     Allen  0
102     Alex   1000
103     tom    2000
104     Cb     1500 
```

Can you please tell me by using which transformation i can acheive the result. Also plz let me know the logic.

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-31T09:06:25.007

添加具有两个变量端口的表达式转换：

```
PORT             EXPRESSION
in_sal           N/A
v_previous_sal   v_current_sal
v_current_sal    in_sal
out_sal          v_previous_sal 
```

阅读文档摘录以了解端口顺序：

> 集成服务按以下顺序评估端口：
> 
> 1.  输入端口。集成服务首先评估所有输入端口，因为它们不依赖于任何其他端口。因此，您可以按任何顺序创建输入端口。由于它们不引用其他端口，因此集成服务不会对输入端口进行排序。
>     
>     
> 2.  可变端口。变量端口可以引用输入端口和变量端口，但不能引用输出端口。因为变量端口可以引用输入端口，所以集成服务会在输入端口之后评估变量端口。同样，由于变量可以引用其他变量，因此变量端口的显示顺序与集成服务评估每个变量的顺序相同。
>     
>     
>     
>     例如，如果您计算建筑物的原始价值，然后调整折旧，您可以将原始价值计算创建为可变端口。此可变端口需要出现在调整折旧的端口之前。
>     
>     
> 3.  输出端口。因为输出端口可以引用输入端口和变量端口，所以集成服务最后评估输出端口。输出端口的显示顺序无关紧要，因为输出端口不能引用其他输出端口。确保输出端口显示在端口列表的底部。

# android - preference manager

> ID：14090026
> 
> 赞同：0
> 
> 时间：2012-12-30T10:41:19.593
> 
> 标签：android

By preferences.xml an users choose a value from 4 by listpref. After first time that android runs preference(), when an users choose again another value by listfref, how execute preference()? Where I put preference() within my code? thanks!

In the MainActivity, I've

```
@Override
    public void onCreate(Bundle savedInstanceState){ 
      super.onCreate(savedInstanceState);

      preference(); 
```

[...] my code: buttons, textview, etc [...]

```
private void preferences() {

    SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(getBaseContext());
    CheckboxPreference = prefs.getBoolean("checkboxPref", true);
    ListPreference = prefs.getString("listpref", ""); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T11:04:31.273

我想您想知道如何获得最新的首选项，或者如果用户更改了首选项，如何通知您。您的 preferences() 方法查询最新的首选项。通过在 onCreate(...) 方法中调用首选项，您可以在创建相应的活动时检索最新的首选项。在最初检索您的偏好后，我看到了两种获得最新偏好的可能性：

*   在需要时检索最新的首选项。在您需要最新首选项之前调用您的首选项方法（）。例如，如果您需要最新的首选项，请将其放在您的 onUpdate(...) 方法中。
*   更改首选项时收到通知。使用监听器来监听偏好的变化。[SharedPreferences 接口](http://developer.android.com/reference/android/content/SharedPreferences.html)定义了 OnSharedPreferenceChangeListener，您可以实现它并将其传递给您的 SharedPreferences 。

我不得不承认，第一种可能性是一个相当笼统的答案。[android 开发者存储选项站点](http://developer.android.com/guide/topics/data/data-storage.html)有更多关于使用共享首选项的信息。

# jquery - jquery.transit: rotation about given point

> ID：14090028
> 
> 赞同：2
> 
> 时间：2012-12-30T10:41:56.887
> 
> 标签：jquery

I'm using [transit plugin](http://ricostacruz.com/jquery.transit/) to rotate A`<div>`. This rotate the element about center point, but I want to rotate them from bottom-center point. Is it possible? It's the style of `<div>`:

```
#triangle-down {
    width: 0;
    height: 0;
    border-left: 50px solid transparent;
    border-right: 50px solid transparent;
    border-top: 100px solid red;
} 
```

Exactly I want rotate it from head of triangle in bottom.

**UPDATE:**
You can see the code here: [http://jsfiddle.net/BbKLM/2/](http://jsfiddle.net/BbKLM/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T11:31:02.580

您可以使用 CSS3 `transform-origin`，并将其设置为`center bottom`. 对于 webkit/chrome，使用 -webkit 前缀：

```
-webkit-transform-origin: center bottom; 
```

更新小提琴：http: [//jsfiddle.net/BbKLM/4/](http://jsfiddle.net/BbKLM/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T12:53:16.193

This works even in older IE versions (Without animation support):

```
 var x = $('#tri1').outerWidth() / 2;
        var y = $('#tri1').outerHeight();
        $('#tri1').css({ transformOrigin: x + 'px ' + y + 'px' }); 
```

See [this JSFiddle](http://jsfiddle.net/BbKLM/2/) for complete code.

# android - No Activity found to handle Intent action.VIEW when clicking email link

> ID：14090034
> 
> 赞同：13
> 
> 时间：2012-12-30T10:42:51.750
> 
> 标签：android, exception, android-intent, html-email

I got this new crash exception after the newest app update. It seems to not point anywhere. Would anyone be able to tell what the issue is? It looks like a possible email-formatting issue due to this: dat=mailto:xxxx@xxxxxxxxx.xxx (has extras) ....but I am not sure I have any errors in emails.

```
android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.VIEW
dat=mailto:xxxx@xxxxxxxxx.xxx (has extras) }
        at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1512)
        at android.app.Instrumentation.execStartActivity(Instrumentation.java:1384)
        at android.app.Activity.startActivityForResult(Activity.java:3190)
        at android.app.Activity.startActivity(Activity.java:3297)
        at android.text.style.URLSpan.onClick(URLSpan.java:62)
        at android.text.method.LinkMovementMethod.onTouchEvent(LinkMovementMethod.java:212)
        at android.widget.TextView.onTouchEvent(TextView.java:8344)
        at android.view.View.dispatchTouchEvent(View.java:5542)
        at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1957)
        at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1726)
        at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1957)
        at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1726)
        at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1957)
        at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1726)
        at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1957)
        at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1726)
        at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1957)
        at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1726)
        at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1957)
        at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1726)
        at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1912)
        at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1371)
        at android.app.Activity.dispatchTouchEvent(Activity.java:2364)
        at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1860)
        at android.view.View.dispatchPointerEvent(View.java:5722)
        at android.view.ViewRootImpl.deliverPointerEvent(ViewRootImpl.java:2897)
        at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2473)
        at android.view.ViewRootImpl.processInputEvents(ViewRootImpl.java:845)
        at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2482)
        at android.os.Handler.dispatchMessage(Handler.java:99)
        at android.os.Looper.loop(Looper.java:137)
        at android.app.ActivityThread.main(ActivityThread.java:4424)
        at java.lang.reflect.Method.invokeNative(Native Method)
        at java.lang.reflect.Method.invoke(Method.java:511)
        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
        at dalvik.system.NativeStart.main(Native Method) 
```

Thank you!

Here is the manifest file:

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.mypackage"
    android:versionCode="123"
    android:versionName="1.2.3" >

    <supports-screens  android:largeScreens="true"   android:normalScreens="true"  android:smallScreens="true"/> 

    <uses-sdk android:minSdkVersion="4" android:targetSdkVersion="16"/>

    <uses-permission android:name="android.permission.INTERNET" />

    <uses-permission android:name="android.permission.READ_PHONE_STATE"/>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />

    <permission android:name="com.problemio.permission.C2D_MESSAGE" 
        android:protectionLevel="signature" />
    <uses-permission android:name="com.problemio.permission.C2D_MESSAGE" />

    <!-- App receives GCM messages. -->
    <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" /> 
    <!-- GCM requires a Google account. -->
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />
    <!-- Keeps the processor from sleeping when a message is received. -->
    <uses-permission android:name="android.permission.WAKE_LOCK" /> 

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" 
        android:theme="@style/CustomTheme" 
        android:name="MyApplication"
                >

        <!--  For Google Cloud Messaging -->
        <receiver android:name="com.google.android.gcm.GCMBroadcastReceiver" android:permission="com.google.android.c2dm.permission.SEND" >
          <intent-filter>
            <action android:name="com.google.android.c2dm.intent.RECEIVE" />
            <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
                <category android:name="com.problemio" />
          </intent-filter>
        </receiver>   

        <service android:name=".GCMIntentService" />
        <!--  End of Google Cloud Messaging -->

        <activity
            android:name=".ProblemioActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity
            android:name=".AddProblemActivity"
            android:configChanges="orientation|keyboardHidden"
            android:label="@string/add_problem" />

        <activity
            android:name=".LoginActivity"
            android:label="@string/login" />        

        <activity
            android:name=".MyProblemsActivity"
            android:label="@string/your_problems" /> 

        <activity
            android:name=".CreateProfileActivity"
            android:configChanges="orientation|keyboardHidden"
            android:label="@string/create_account" />         

        <activity
            android:name=".ProblemActivity"
            android:label="@string/problem_page_header" />   

        <activity
            android:name=".WePromoteActivity"
            android:label="@string/we_promote" /> 

<!--  
        <activity
            android:name=".SuggestSolutionActivity"
            android:label="@string/suggest_solution_header" />  

        <activity
            android:name=".SuggestedSolutionActivity"
            android:label="@string/suggested_solution_header" />          

        <activity
            android:name=".ViewSolutionsActivity"
            android:label="@string/view_solutions_header" />        
-->        
        <activity
            android:name=".TopicActivity"
            android:label="@string/topic_header" 
            android:configChanges="keyboardHidden|orientation"
            android:windowSoftInputMode="stateHidden"/>         

        <activity
            android:name=".ForgotPasswordActivity"
            android:configChanges="orientation|keyboardHidden"
            android:label="@string/forgot_password_heading" />         

        <activity
            android:name=".AskQuestionActivity"
            android:configChanges="orientation|keyboardHidden"
            android:label="@string/ask_question_heading" />         

        <activity
            android:name=".QuestionActivity"
            android:label="@string/question_header" 
            android:configChanges="keyboardHidden|orientation"
            android:windowSoftInputMode="stateHidden"/>     

        <activity
            android:name=".MyQuestionsActivity"
            android:label="@string/see_my_questions_header" />        

        <activity
            android:name=".LearnActivity"
            android:label="@string/learn_header" />         

        <activity
            android:name=".ExtraHelpActivity"
            android:configChanges="orientation|keyboardHidden"
            android:label="@string/extra_help_header" />          

        <activity
            android:name=".content.AdvertisingActivity"
            android:label="@string/advertising_header" />           

        <activity
            android:name=".content.ProductStrategyActivity"
            android:label="@string/product_strategy_header" />         

        <activity
            android:name=".content.BusinessModelsActivity"
            android:label="@string/business_models_header" />           

        <activity
            android:name=".content.StageTacticsActivity"
            android:label="@string/stage_tactics_header" />         

        <activity
            android:name=".content.InvestorsActivity"
            android:label="@string/funding_header" />         

        <activity
            android:name=".content.TargetMarketActivity"
            android:label="@string/target_market_header" />           

        <activity
            android:name=".SettingsActivity"
            android:label="@string/settings_header" />         

        <activity
            android:name=".content.BusinessIdeasActivity"
            android:label="@string/business_ideas" /> 

        <activity
            android:name=".content.MarketIdeaValidationActivity"
            android:label="@string/market_idea_validation" />         

        <activity
            android:name=".content.UnitEconomicsActivity"
            android:label="@string/unit_economics" />  

        <activity
            android:name=".content.PremiumWebAdvertisingActivity"
            android:label="@string/premium_web_marketing" />          

        <activity
            android:name=".content.PsychologyActivity"
            android:label="@string/business_psychology" />  

        <activity
            android:name=".NumberOfBusinessesActivity"
            android:label="@string/num_of_businesses" />          

        <activity
            android:name=".TimelineActivity"
            android:label="@string/timeline" />          

        <activity
            android:name=".content.PitchBusinessActivity"
            android:label="@string/pitch" />   

        <activity
            android:name=".content.TopMistakesActivity"
            android:label="@string/top_mistakes" />        

        <activity
            android:name=".content.MarktingAndConversionActivity"
            android:label="@string/marketing_and_conversion" />           

        <activity
            android:name=".content.HelpInstructionsActivity"
            android:label="@string/help_instructions" />          

        <activity
            android:name=".content.WebSetupActivity"
            android:label="@string/web_setup_page" />          

        <activity
            android:name=".UpdateProfileActivity"
            android:configChanges="orientation|keyboardHidden"
            android:label="@string/update_profile" />           

        <activity
            android:name=".FeedbackActivity"
            android:label="@string/feedback" 
            android:configChanges="keyboardHidden|orientation"
            android:windowSoftInputMode="stateHidden"/> 

        <activity
            android:name=".BaseActivity" />

        <activity
            android:name=".BaseListActivity"/> 

        <activity
            android:name=".EditBusinessActivity"
            android:configChanges="orientation|keyboardHidden"
            android:label="@string/edit_business" />   

        <activity
            android:name=".TopicEditActivity"
            android:configChanges="orientation|keyboardHidden"
            android:label="@string/topic_edit" />        

        <activity
            android:name=".InviteFriendsActivity"
            android:configChanges="orientation|keyboardHidden"
            android:label="@string/invite_friends" />

        <activity
            android:name=".EnterInviteCodeActivity"
            android:configChanges="orientation|keyboardHidden"
            android:label="@string/enter_invite_code" />        

        <activity
            android:name=".CommunityActivity"
            android:configChanges="orientation|keyboardHidden"
            android:label="@string/community_page" />   

        <activity
            android:name=".CommunitySignupActivity"
            android:label="@string/community_signup" />           

        <activity
            android:name=".PlanExamplesActivity"
            android:label="@string/plan_examples" />

        <activity
            android:name=".Settings"
            android:label="@string/plan_examples" />        

        <activity
            android:name=".GiveBackActivity"
            android:label="@string/give_back" /> 

        <activity
            android:name=".MotivationActivity"
            android:label="@string/motivation_page" />         

        <activity
            android:name=".AdsActivity"
            android:label="@string/ads_activity" />         

        <activity
            android:name=".content.WebsiteServiceActivity"
            android:label="@string/website_service_activity" />         

        <activity
            android:name=".MoreArticlesActivity"
            android:label="@string/more_articles" />           

<!--         
        <service android:name="BillingService" />

        <receiver android:name="BillingReceiver">
            <intent-filter>
                <action android:name="com.android.vending.billing.IN_APP_NOTIFY" />
                <action android:name="com.android.vending.billing.RESPONSE_CODE" />
                <action android:name="com.android.vending.billing.PURCHASE_STATE_CHANGED" />
            </intent-filter>
        </receiver>        
 -->

        <activity android:name="com.tapjoy.TJCOffersWebView" android:configChanges="keyboardHidden|orientation" />
        <activity android:name="com.tapjoy.TapjoyFullScreenAdWebView" android:configChanges="keyboardHidden|orientation" />
        <activity android:name="com.tapjoy.TapjoyDailyRewardAdWebView" android:configChanges="keyboardHidden|orientation" />
        <activity android:name="com.tapjoy.TapjoyVideoView" android:configChanges="keyboardHidden|orientation" />

        </application>

</manifest> 
```

Could something like this be a problem:

```
<TextView
    android:id="@+id/contact_email"    
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop ="15dp" 
    android:autoLink="email"
    android:text="some@email.com"

    /> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-09-25T15:20:37.710

**复制自我的另一个[答案](https://stackoverflow.com/a/26042099/3569421)**

我已经遇到了同样的问题，我通过创建一个新类来解决它，该类`null`在实际启动`Intent`.

您所要做的就是`URLSpan`在设置 ' 文本之前替换所有跨度`TextView`（这意味着您不能使用`setAutoLinkMask()`）。

必须这样做，因为`URLSpan`'s`onClick()`方法不执行任何类型的`null`检查。

如何进行：

```
TextView txt = ...
txt.setLinksClickable(true);
txt.setText(SafeURLSpan.parseSafeHtml(<<YOUR STRING GOES HERE>>));
txt.setMovementMethod(LinkMovementMethod.getInstance()); 
```

可用于的字符串种类`<<YOUR STRING GOES HERE>>`：

```
"Click here: <a href=\"http://google.com\">My links</a>"
"Mail me: <a href=\"mailto:john@doe.com\">My email</a>"
... and so on... 
```

这是`SafeURLSPan`类的源代码（我在我的应用[FPlay](https://github.com/carlosrafaelgn/FPlayAndroid)中使用它，并且已经在 Android 10+ 上进行了测试）：

```
import android.content.Context;
import android.content.Intent;
import android.net.Uri;
import android.provider.Browser;
import android.text.Html;
import android.text.Spannable;
import android.text.style.URLSpan;
import android.view.View;

public final class SafeURLSpan extends URLSpan {
    public SafeURLSpan(String url) {
        super(url);
    }

    @Override
    public void onClick(View widget) {
        try {
            final Uri uri = Uri.parse(getURL());
            final Context context = widget.getContext();
            final Intent intent = new Intent(Intent.ACTION_VIEW, uri);
            if (context != null && intent != null) {
                intent.putExtra(Browser.EXTRA_APPLICATION_ID, context.getPackageName());
                context.startActivity(intent);
            }
        } catch (Throwable ex) {
        }
    }

    public static CharSequence parseSafeHtml(CharSequence html) {
        return replaceURLSpans(Html.fromHtml(html.toString()));
    }

    public static CharSequence replaceURLSpans(CharSequence text) {
        if (text instanceof Spannable) {
            final Spannable s = (Spannable)text;
            final URLSpan[] spans = s.getSpans(0, s.length(), URLSpan.class);
            if (spans != null && spans.length > 0) {
                for (int i = spans.length - 1; i >= 0; i--) {
                    final URLSpan span = spans[i];
                    final int start = s.getSpanStart(span);
                    final int end = s.getSpanEnd(span);
                    final int flags = s.getSpanFlags(span);
                    s.removeSpan(span);
                    s.setSpan(new SafeURLSpan(span.getURL()), start, end, flags);
                }
            }
        }
        return text;
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-24T02:02:56.520

我也遇到了这个问题，问题是当你定义：

```
android:autoLink="email"
android:text="some@email.com" 
```

或 TextView 中的任何其他类型的自动链接，android 会为您处理一切。

在模拟器中默认没有设置电子邮件，因此没有应用程序来处理意图，如果您单击自动链接的电子邮件地址，这会使您的应用程序崩溃。如果您打开邮件应用程序并按照说明进行设置，那么当您单击电子邮件地址时，它将起作用。

我不知道你能做些什么来解决这个问题。我想假设用户有邮件设置或至少一个能够处理该意图的应用程序可能不安全。我还猜想应用程序不应该崩溃......我认为这是 android 的问题，因为在这种情况下你无法处理异常。

如果您查看 URLSpan 的来源（如果设置了自动链接，Tex​​tView 使用 android.text.util.Linkify.addLinks(..) 创建 URLSpan 的实例来创建链接）： [http ://grepcode.com/file/repository .grepcode.com/java/ext/com.google.android/android/4.1.2_r1/android/text/style/URLSpan.java#URLSpan](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.2_r1/android/text/style/URLSpan.java#URLSpan)

```
public void onClick(View widget) {
    Uri uri = Uri.parse(getURL());
    Context context = widget.getContext();
    Intent intent = new Intent(Intent.ACTION_VIEW, uri);
    intent.putExtra(Browser.EXTRA_APPLICATION_ID, context.getPackageName());
    context.startActivity(intent);
} 
```

他们可以处理异常或使用 PackageManager 在调用 startActivity() 之前确定 Intent 是否会成功（就像他们推荐的那样：http: [//developer.android.com/training/basics/intents/sending.html#Verify](http://developer.android.com/training/basics/intents/sending.html#Verify)）或使用一个选择器。

> 尽管 Android 平台保证某些 Intent 将解析为内置应用程序之一（例如电话、电子邮件或日历应用程序），但您应该始终在调用 Intent 之前包含验证步骤。
> 
> 注意：如果您调用一个意图并且设备上没有可以处理该意图的应用程序，您的应用程序将崩溃。

所以我的问题是：是否有任何保证电子邮件意图将始终在真实设备上解决？

好的...在同一部分，他们还提到：

> 注意：您应该在您的活动首次启动时执行此检查，以防您需要在用户尝试使用之前禁用使用该意图的功能。如果您知道可以处理意图的特定应用程序，您还可以为用户提供下载该应用程序的链接（请参阅如何在 Google Play 上链接到您的产品）。

人们总是可以在应用程序启动时检查意图是否解析为任何活动，设置一个标志，每次包含此类 TextView 的布局被夸大时，我们都会找到它并禁用电子邮件的自动链接等（这是我思考的时候通过编码杀死独角兽）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-27T23:13:44.380

顺便说一句，如果设备上没有设置电子邮件帐户，则不会出现电子邮件客户端，因此从技术上讲，这也可以在真实设备上发生。如果 novettam 建议不可用，以下是禁用 AutoLink 的代码：

```
protected boolean checkIntent(Intent intent)
{
    PackageManager packageManager = getPackageManager();
    List<ResolveInfo> apps = packageManager.queryIntentActivities(intent, 0);
    return apps.size() > 0 && !( apps.get(0).activityInfo.name.equals(activity.getClass().getName()) && apps.size() == 1) ;
}

protected Intent createDummyEmailIntent()
{
    final Intent emailIntent = new Intent(Intent.ACTION_SENDTO, Uri.fromParts(
            "mailto", "abc@gmail.com", null));
    emailIntent.putExtra(Intent.EXTRA_SUBJECT, "EXTRA_SUBJECT");
    return emailIntent;
}

protected Intent createDummyWebIntent()
{
    final Intent webIntent = new Intent(Intent.ACTION_VIEW).setData(Uri.parse("http://www.google.co.uk"));
    return webIntent;
}

protected Intent createDummyPhoneIntent(){
    String uri = "tel:" + "0131 666 7777".trim() ;
    final Intent phoneIntent = new Intent(Intent.ACTION_DIAL);
    phoneIntent.setData(Uri.parse(uri));
    return phoneIntent;
}
//Checking
if ( !checkIntent(intent) ) {
            textview.setAutoLinkMask(0);
}
//be sure that you call setText after this 
```

# java - First launch and after update alert android

> ID：14090037
> 
> 赞同：1
> 
> 时间：2012-12-30T10:42:59.100
> 
> 标签：java, android, launch

I want my application(android) to go to another activity on the first launch, so people immediately change their settings. After I update my application I want to show a changelog. I know you can make this happen with shared preferences and I made something like this:

```
package me.wouter.schoolwork;

import android.app.Activity;
import android.app.AlertDialog;

import android.os.Bundle;

public class Updater extends Activity{

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.update);
    checkFirstLaunch();
}

public void checkFirstLaunch(){
    boolean firstrun = getSharedPreferences("PREFERENCE", MODE_PRIVATE).getBoolean("firstrun", true);
    if (firstrun){
        new AlertDialog.Builder(this).setTitle("Welcome").setMessage("Welcome on  ").setNeutralButton("OK", null).show();

    getSharedPreferences("PREFERENCE", MODE_PRIVATE)
        .edit()
        .putBoolean("firstrun", false)
        .commit();
    }
} 
```

}

I'm not sure if this works, and this doesn't work for updating. Can anyone help me?

Thanks in advance :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T11:01:49.250

尝试这个：

```
final SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);
int currentVersion = 0;
    try {
        currentVersion = getPackageManager().getPackageInfo(getSherlockActivity().getPackageName(), PackageManager.GET_CONFIGURATIONS).versionCode;
    } catch (final NameNotFoundException e) {
    }

    final int lastVersion = prefs.getInt("lastVersion", -1);
    if (currentVersion > lastVersion) {
        showChangelogDialog();
        prefs.edit().putInt("lastVersion", currentVersion).commit();
    } 
```

# telerik - Windows Phone 8: Some files are not added to XAP file on build

> ID：14090039
> 
> 赞同：0
> 
> 时间：2012-12-30T10:43:17.087
> 
> 标签：telerik, windows-phone-8

I'm building a Windows Phone 8 app in which I'm using the Telerik Rad Controls for WP8\. The app is localised to en-US, en-GB, da-DK, de-DE, fr-FR, es-ES & it-IT. When I run the Store Test Kit I get the following error;

```
[ERROR]: A file registered in the AppManifest.xaml is missing: fr-FR/Telerik.Windows.Controls.Input.resources.dll.
[ERROR]: A file registered in the AppManifest.xaml is missing: it-IT/Telerik.Windows.Controls.Input.resources.dll.
[ERROR]: A file registered in the AppManifest.xaml is missing: it-IT/Telerik.Windows.Controls.Primitives.resources.dll. 
```

The file are present in the relative /Bin/Release folders but are not being included in the .xap file. I've cracked open the xap and the correct files are added for all other languages but the above 3 are definitely missing.

I'm using the latest build of RadControls (2012.3.1211 DEC. 11, 2012)

Does anyone have any idea what the problem may be?

Cheers Si

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T09:49:04.060

似乎其他人也有类似的问题，但没有解决方案：[应用程序提交失败，出现与 Microsoft.Advertising.Mobile.resources.dll 相关的 1016](https://stackoverflow.com/questions/13449614/app-submission-fails-with-1016-related-to-microsoft-advertising-mobile-resources)

作为一种解决方法，可以在构建后添加文件，然后 xap 通过 Store Test Kit（我假设将通过认证！）。

我安装了 7zip，因此为了解决我的特定问题，我使用了以下构建后事件命令行：

```
"C:\Program Files\7-Zip\7z.exe" a -tzip $(TargetDir)<YOUR XAP FILE NAME>.xap $(TargetDir)it-IT\
"C:\Program Files\7-Zip\7z.exe" a -tzip $(TargetDir)<YOUR XAP FILE NAME>.xap $(TargetDir)fr-FR\ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T12:29:36.387

您是否尝试将 resources.dll 的 Build Action 设置为 Content、Compile 或 Embedded Ressource？这样，文件应该在构建过程中包含在内。

# qt - Does multiple QMutex needed for every critical section?

> ID：14090040
> 
> 赞同：0
> 
> 时间：2012-12-30T10:43:17.880
> 
> 标签：qt, critical-section, thread-synchronization

Should i define one QMutex for all of my critical sections? or i should define one QMutex for each critical sections?

is there any identical concept in Qt like `lock(object) {...}` in c Sharp?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T11:03:56.343

如果您将为`QMutex`所有关键部分定义一个，`QMutex::lock()`则将锁定对使用此 QMutex 对象的所有关键部分的访问。如果您将使用许多`QMutex`对象，那么每个对象都会锁定相应的代码段。

假设你有：

```
QMutex mutex;

void method1()
{
 mutex.lock();
 //section1
 mutex.unlock();
}

void method2()
{
 mutex.lock();
 //section2
 mutex.unlock();
} 
```

线程调用method1() 还是method2() section1 和section2 是否被锁定。在后一种情况下：

```
QMutex mutex1;
QMutex mutex2;

void method1()
{
 mutex1.lock();
 //section1
 mutex1.unlock();
}

void method2()
{
 mutex2.lock();
 //section2
 mutex2.unlock();
} 
```

section1 和 section2 分别被两个不同的互斥锁锁定。所以调用 method1() 不会锁定对 section2 的访问。

`QMutexLocker`另请注意，在大多数情况下，它比`QMutex`单独使用更容易、更安全。

# c++ - Less-than function dereferencing pointers

> ID：14090043
> 
> 赞同：5
> 
> 时间：2012-12-30T10:43:44.330
> 
> 标签：c++

There are cases where one has pointers in an STL container and where less-than comparison shall not be made by pointer but by the objects pointed to. A simple example would be a vector which shall be sorted by the real numbers. Currently I solve this with:

```
template<class T_PTR> struct ltDeref
{
    bool operator()(T_PTR p0,T_PTR p1) const {return *p0<*p1;}
}; 
```

and use it as

```
vector<double*> vIn;
sort(vIn.begin(),vIn.end(),ltDeref<double*>()); 
```

or

```
set<double*,ltDeref<double*> > someSet; 
```

Instead of writing my own comparison function, is there a more "standard" way in C++ which doesn't require a user made template?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T11:33:47.583

通常，您可以使用[可用的`functional`](http://en.cppreference.com/w/cpp/utility/functional)函子来纯粹从标准构造中构造结果排序函子。

但是没有取消引用指针的方法`T*`，因此您必须使用自己的比较器。

* * *

您可以获得的最接近的是当您的“指针类型”不是原始类型，而是一些`operator*`可以解决的用户定义类型时。

以下代码是 C++11（使用`std::bind`起来比`std::bind1st`and更简单`std::bind2nd`）。

```
#include <vector>
#include <algorithm>
#include <functional>
#include <iostream>

// Fakes a "smart pointer" wrapper around data
template <typename T>
struct Ptr
{
    Ptr(T data) : data(data) {};
    const T& operator*() const { return data; }

private:
    T data;
};

int main()
{
    std::vector<Ptr<double>> vIn;
    vIn.push_back(Ptr<double>(5));
    vIn.push_back(Ptr<double>(2));
    vIn.push_back(Ptr<double>(6));

    using namespace std::placeholders;
    std::sort(
        vIn.begin(),
        vIn.end(),
        std::bind(
            std::less<double>(),
            std::bind(&Ptr<double>::operator*, _1),
            std::bind(&Ptr<double>::operator*, _2)
        )
    );

    std::vector<Ptr<double>>::const_iterator it = vIn.begin(), end = vIn.end();
    for ( ; it != end; ++it)
        std::cout << ',' << **it;
} 
```

*   [输出](https://ideone.com/dPztYr)：,2,5,6

因此，如果不是`double*`你有`std::unique_ptr<double>`or `std::shared_ptr<double>`，那么这可以工作：

```
#include <vector>
#include <memory>
#include <algorithm>
#include <functional>
#include <iostream>

int main()
{
    typedef std::unique_ptr<double> STDUPD;

    std::vector<STDUPD> vIn;
    vIn.push_back(STDUPD(new double(5)));
    vIn.push_back(STDUPD(new double(2)));
    vIn.push_back(STDUPD(new double(6)));

    using namespace std::placeholders;
    std::sort(
        vIn.begin(),
        vIn.end(),
        std::bind(
            std::less<double>(),
            std::bind(&STDUPD::operator*, _1),
            std::bind(&STDUPD::operator*, _2)
        )
    );

    std::vector<STDUPD>::const_iterator it = vIn.begin(), end = vIn.end();
    for ( ; it != end; ++it)
        std::cout << ',' << **it;
} 
```

*   [相同的输出](https://ideone.com/ZAoTle)

如果可以的话，还有另一个避免“原始”指针的原因......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T15:29:54.603

正如其他答案所说，没有现成的解决方案。原始指针解引用比较器可以通过使其仅可用于具有以下显式模板特化的原始指针类型来稍微改进。我希望在使用非指针类型的情况下，编译器会给出更好的错误消息。

```
template<class T>
struct PointeeLess;

template<class T>
struct PointeeLess<T const *>
{
    bool operator()( T const * a , T const * b ) const { return *a < *b; }
}; 
```

OTOH，问题中的模板将适用于实现 operator* 的非原始指针类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-18T17:26:51.610

我在 STL 中寻找同样的东西，但找不到。最后写了我自己的（处理NULL）

```
class DeRefPtrLess {

public:

template<typename T>
    bool operator()(const T *l, const T *r) const {
        if (l == NULL
                && r == NULL) {
            return false;
        }
        if (l == NULL) {
            return true;
        }

        return *l < *r;
    } 
```

};

# asp.net - What is a postpback request in asp.net?

> ID：14090045
> 
> 赞同：0
> 
> 时间：2012-12-30T10:44:21.430
> 
> 标签：asp.net, web, request

I'm new to web programming, recently started to learn asp.net. Could anyone explain to me what is a postback request and how it defers from simple (if I can call it so) request?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T10:57:42.403

微软试图让 web 编程有点像 windows 编程……它提出了 webforms。当您第一次从 asp.net 获取页面时，您会执行 GET，然后您会得到一个“webform”，它是一个带有按钮、文本框、组合框的网页，很像一个窗口对话框。

现在，microsoft 框架有一点魔力，您可以配置更改（如单击按钮或更改组合框）来进行回发。这意味着浏览器将 POST 包含更改的页面，然后将其转换为事件，例如文本更改、按钮单击或组合框更改。您可以处理它，然后它将更改的页面重新发送回浏览器。

所以基本上回发是触发点，您可以在使用网络表单时处理服务器上的事件。这并不是其他 Web 框架的工作方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T10:48:16.703

简单的请求是“给我某某页面”。

回发请求是“给我某某页面（我已经在上面了），但是当您**将**其发**回**时，请相应地更改这些数据（这将是用户选择组合框或选中单选按钮或任何）。

当您编写 asp.net 代码时，您会将第一次访问页面时发生的所有内容`page_load`放在

```
if (!postback)
{
} 
```

这确保了当用户设置了上述选项时，应该在用户第一次访问页面时加载的代码不会发生

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-30T13:02:39.260

PostBack 是将 ASP.NET 页面提交到服务器进行处理的过程的名称。如果要根据数据库检查页面的某些凭据（例如验证用户名和密码）或进行一些计算，则会完成 PostBack。
这是客户端机器无法完成的事情，因此这些细节必须“回发”到服务器。
`Postback`通常在您单击`button`、`radiobutton`或`checkbox`（`any other control`如果您`OnClick`在标记中指定事件）时发生。如果在标记中指定，许多其他事件也会调用回发。

**注意**：当回发到服务器时，它也会处理`page_Load`当前页面的事件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-30T10:47:58.100

在 ASP.NET 中，有一个叫做 PostBack 的东西。在经典的 ASP.NET WebForm中，整个页面内只能有一个`<form>`元素。`method="post"`每次您单击此表单内的按钮或执行某些操作时，ASP.NET 都会 POST 到同一个 WebForm。因此名称为 PostBack。所以基本上你将第一次使用 GET 请求来呈现 webForm，从现在开始，你在这个表单上所做的一切都会导致对自身的 POST 请求。

在普通的 Web 应用程序中，您可以`<form>`在 HTML 中包含多个元素。每个表单都可以发布到不同的端点，一些使用 GET，另一些使用 POST 请求。

# iphone - 如何记录没有被拖放的元素

> ID：14090051
> 
> 赞同：-1
> 
> 时间：2012-12-30T10:44:44.230
> 
> 标签：iphone, ios, xcode, ios5

我在屏幕上有 4 个苹果和 4 个橙子，还有 2 个篮子，每个篮子一个。我成功地将苹果和橙子拖到各自的篮子中。我希望在所有物品都放入篮子后出现下一个屏幕按钮。

如何计算所有物品都放在他们的篮子里？: 我的代码

```
 CGPoint location = [touch locationInView:touch.view];
    apple.center = location;

   if (apple.center.x == 233 || apple.center.y == 368)
   {
    apple.hidden = YES;
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T11:04:14.400

使用 2 个`int`计数器：`numberOfApplesInBasket`和`numberOfOrangesInBasket`。

```
CGPoint location = [touch locationInView:touch.view];
apple.center = location;

if (apple.center.x == 233 || apple.center.y == 368)
{
  apple.hidden = YES;
  numberOfApplesInBasket += 1;
  if (numberOfApplesInBasket == 4 && numberOfOrangesInBasket == 4) {
    // Do your thing
  }
} 
```

# view - 在哪里实现变量以显示在视图文件中？

> ID：14090054
> 
> 赞同：0
> 
> 时间：2012-12-30T10:45:04.230
> 
> 标签：view, yii

我想在 Yii 项目的表单中显示一个带有 for items 的下拉列表。我知道我可以使用

```
echo $form->dropDownList($model,'element_id', $Options); 
```

在 _form.php 视图文件中。

实现 $options 变量的最佳位置在哪里？在哪个文件中？看法 ？控制器 ？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-31T11:57:55.233

当前模型是实现此目的的最佳选择，因为`_form.php`可以访问模型，因此您可以轻松获取数据。虽然您可以将数据从控制器传递到`_form.php`，但这是更多的工作。

如果你想从数据库中填充数据——例如，你想从数据库表中显示国家`tbl_countries`——你可以在你的模型中编写一个函数来加载它们：

```
/* Get all countries. */
public function getCountries(){
  $allCountries =  Countries::model()->findAll();
  return CHtml::listData($allCountries, "id", "name")
} 
```

这将为您提供一个数组，其中 id 编号作为键，国家名称作为值。然后，您可以从视图文件中调用此函数：

```
echo $form->dropDownList($model,'element_id', $model->countries()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T12:16:14.740

您应该将变量从控制器传递到视图。变量中的数据应该来自模型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T12:38:05.393

$options 将在更多视图中使用？如果答案是肯定的，我会将它放在主控制器（所有控制器都扩展的那个）或 main.php 中。

如果该变量将仅在一个视图中使用并且涉及到 clases、ids，则该位置应该在同一个视图中

# asp.net - WebMatrix：从网络文件夹打开网站

> ID：14090055
> 
> 赞同：1
> 
> 时间：2012-12-30T10:45:05.103
> 
> 标签：asp.net, windows, macos, webmatrix, network-drive

我和我的朋友正在建立一个小型网站，但在我们自己的工作场所工作。我们使用 WebMatrix 来构建网站。我们的设置是，我们都在同一个 Intranet 上，文件保存在我们的文件服务器上。

我们正面临这样的问题。在 WebMatrix 中，有一个选项可以将文件夹打开为网站。如果我尝试导航到保存文件的网络文件夹并选择该文件夹，WebMatrix 会正确打开它，但无法在 IIS 上运行网站。IIS 找不到文件，我猜它不适用于网络文件夹。

我还尝试映射网络驱动器，然后进行处理。仍然无法正常工作，IIS 无法读取网站。

如何使 WebMatrix + IIS 8.0 与我的网络拓扑一起工作。我在某处读过，如果我让我的文档指向网络文件夹，那么 WebMatrix 将起作用，而不是创建映射的网络驱动器。我无法弄清楚如何做到这一点。如果您能弄清楚，请参阅此链接。[http://www.iis.net/learn/develop/troubleshooting-webmatrix/microsoft-webmatrix-my-documents-on-network-shares](http://www.iis.net/learn/develop/troubleshooting-webmatrix/microsoft-webmatrix-my-documents-on-network-shares)

任何建议，将不胜感激。

PS 使 WebMatrix 与网络网站文件一起工作还有另一个原因。这样，我可以将 VirtualBox 与多个操作系统和浏览器一起使用来测试网站的跨平台功能，如果您知道 VirtualBox 通过网络文件夹连接到主机操作系统。

问候法拉兹·阿扎尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T14:54:19.950

我花了相当多的时间试图按照你的描述让它工作，最终放弃了。相反，特别是因为您处于组环境中，您应该在文件服务器上保留网站的“主”副本。在您的本地驱动器上，您将“工作”副本保存在您并且只有您进行更改的地方。当您对所做的更改感到满意时，将它们重新检入主服务器。要做到这一点，要么

*   手动执行，或通过批处理文件（不寒而栗）
*   安装 git 或其他配置管理工具
*   使用 github（我们就是这样做的）或其他云配置管理工具

这似乎需要付出很多努力，但是即使只有一个开发人员，像 git 这样正确设置的配置管理工具也非常有用，而且对于 2 个或更多开发人员来说几乎是强制性的。

# vb.net - 根据子表单大小调整 MDI 父工作区的大小

> ID：14090057
> 
> 赞同：1
> 
> 时间：2012-12-30T10:45:12.210
> 
> 标签：vb.net, mdi

我正在尝试使我的父表单 MDI 工作区从子表单大小进行调整..

我有这个代码

```
Child.MdiParent = Me
Child.Show()
Me.Size = New Size(Child.Width, Child.Height) 
```

但它会调整整个父表单的大小。在 MDI 工作区中显示一些滚动条。

`Parent size`: `H:400`,`W: 800`

父级 mdisize。`H:350`, `W:800`.. theres 50 因为我有自定义标题栏。停靠在顶部。

`Child size`: `H:200`,`W: 400`

现在我想要`parent size`，`H:250`...`W:400`但它显示滚动条意味着它不完全适合。需要帮助的家伙...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T13:54:09.177

其他人可能有更好的建议，但我一直这样做的方法是计算父表单的客户端大小与其实际大小之间的差异：

```
Dim nonClientWidth As Integer = Me.Size.Width - Me.ClientSize.Width
Dim nonClientHeight As Integer = Me.Size.Height - Me.ClientSize.Height
Me.Size = New Size(Child.Width + nonClientWidth, Child.Height + nonClientHeight) 
```

# mysql - 简单地将 mysql 查询转换为 rails 活动记录

> ID：14090059
> 
> 赞同：1
> 
> 时间：2012-12-30T10:45:17.423
> 
> 标签：mysql, ruby-on-rails, ruby-on-rails-3, activerecord

我在 MySQL 中有这个查询，我需要将它转换为 rails 活动记录：

```
select p.*,x.* from
(select * from users  ,roles_users
 where users.id=roles_users.user_id and roles_users.role_id not in(2,3)) as P
left join  
(select * 
  from cad_dispaths as T
 where `startdate_dispatch` = 
       ( select max(`startdate_dispatch`)
           from cad_dispaths
          where users_id = T.users_id ))  x 
on   x.users_id = p.user_id 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T11:10:44.477

我认为在这种情况下最好的解决方案是使用[find_by_sql](http://api.rubyonrails.org/classes/ActiveRecord/Querying.html#method-i-find_by_sql)。一个重要的警告是，它旨在一次获取一种东西。我不知道你的应用程序的语义，所以我不能说这是否是这个查询正在做的事情，但似乎它可能不是。

例如，您可以这样做：

`User.find_by_sql(your_sql)`

这将返回满足该查询的用户对象的集合。任何额外的数据，截至我上次尝试这样的东西（rails 2.3.x），都会被塞入集合中每个对象的属性中。非常丑陋，但有时它可能比替代品更漂亮。

# c# - 使用多个像素着色器？

> ID：14090060
> 
> 赞同：1
> 
> 时间：2012-12-30T10:46:04.433
> 
> 标签：c#, xna, shader, effect

我刚开始使用带有 xna 的像素着色器，但我无法理解几件事，而且似乎在任何地方都没有明确的答案......

我使用`spriteBatch.Begin(SpriteSortMode.Immediate, BlendState.AlphaBlend);`并且我想将着色器应用于我正在绘制的特定精灵，然后将其取消回默认着色器或无着色器。

那么，你能帮我关注吗？

*   如果我在效果文件中有几种技术 - 我如何调用特定的技术？因为目前我所做的是：`shaders.CurrentTechnique.Passes[0].Apply();`它适用于一种技术，但我想拥有很多。

*   如果技术有几次通过，我如何应用所有这些？

*   如果我已经应用了着色器，我该如何取消它？我当然可以结束当前的精灵批次并开始另一个。但我真的不知道是否应该这样做以提高效率。

还有其他使用像素着色器的技巧吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T12:02:59.870

您可以在效果文件中定义不同的技术，如下所示：

```
// shading code ...

technique Technique1
{
    pass Pass1
    {
        // VertexShader = ...
        // PixelShader = ...
    }

    pass Pass2
    {
        // VertexShader = ...
        // PixelShader = ...
    }

    // more passes if you want
}

technique Technique2
{
    pass Pass1
    {
        // VertexShader = ...
        // PixelShader = ...
    }

    // more Passes if you want ...
} 
```

从您的 C# 代码中使用您的效果文件，如下所示：

```
// declar your variable by loading the effect file from the content pipeline
Effect effect = ContentManager.Load<Effect>("NameOfMyEffectFile");

// use a particular technique
effect.CurrentTechnique = effect.Techniques["Technique1"];

// apply a particular pass
effect.CurrentTechnique.Passes[1].Apply();

// begin some drawing
effect.Begin();

// draw ...

// end some drawing
effect.End(); 
```

如果您想应用多个通道，只需像这样迭代所有通道：

```
foreach(EffectPass p in effect.CurrentTechnique.Passes)
{
    // begin some drawing
    p.Begin();

    // draw ...

    // end some drawing
    p.End();
} 
```

# groovy - Ormlite 和 Groovy 可能吗？

> ID：14090061
> 
> 赞同：2
> 
> 时间：2012-12-30T10:46:13.717
> 
> 标签：groovy, ormlite

有谁知道是否可以将 ORMLite 与 Groovy 类一起使用？

鉴于 ORMLite 使用适用于字节码的 Java 反射，我想这将是合格的。

任何人都以这种方式使用 ORMLite 的经验？如果您有任何建议或意见？

我知道我仍然可以从 Groovy 访问 Java 类，所以这是一个回退。但见鬼，我很好奇。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-08T16:19:12.533

我刚开始使用 ORMLite，但至少 4.48 版可以使用 Groovy：

```
@DatabaseTable(tableName = "people")
class Person {

    @DatabaseField(id = true)
    int id

    @DatabaseField(columnName = "first_name")
    String firstName

    @DatabaseField(columnName = "last_name")
    String lastName
}

class Tester {
    def static main(String[] args) {
        def url = "jdbc:..." // elided

        def connSource = new JdbcConnectionSource(url)
        Dao<Person, Integer> personDao = DaoManager.createDao(connSource, Person.class)
        def person = personDao.queryForId(1)
        println("${person.lastName}, ${person.firstName}") // prints 'Smith, Joe'
        connSource.close()
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-05T15:05:34.393

我尝试了最新版本 5.0（在写作时），它适用于 Groovy（至少 2.4.4），这是一个完整的 MySQL 类似的 - 有点短 - 示例（文件名 Tester.groovy）：

```
@GrabConfig(systemClassLoader=true)
@Grab(group='mysql', module='mysql-connector-java', version='5.1.6')

import com.j256.ormlite.jdbc.JdbcConnectionSource
import com.j256.ormlite.dao.Dao
import com.j256.ormlite.dao.DaoManager
import com.j256.ormlite.field.DatabaseField
import com.j256.ormlite.table.DatabaseTable

class Tester {
    static main(args) {
        def url = "jdbc:mysql://localhost/sample?user=root&password="
        def connSource = new JdbcConnectionSource(url)
        Dao<Person, Integer> personDao = DaoManager.createDao(connSource, Person)
        personDao.queryForAll().each { person ->
          println "${person.name}, ${person.age}, ${person.comment}"
        }
        connSource.close()
    }

}

@DatabaseTable(tableName = "person")
class Person {

    @DatabaseField(id = true)
    int id

    @DatabaseField(columnName = "age")
    int age

    @DatabaseField(columnName = "name")
    String name

    @DatabaseField(columnName = "comment")
    String comment
} 
```

命令行运行器：

```
groovy -cp "ormlite-jdbc-5.0.jar;ormlite-core-5.0.jar" Tester.groovy 
```

希望这有帮助。

# iphone - 减少 UIImage 出错的文件大小

> ID：14090064
> 
> 赞同：0
> 
> 时间：2012-12-30T10:47:16.867
> 
> 标签：iphone, objective-c, uiimage

我得到了一些奇怪的结果，试图减小`UIImage`.

* * *

## 代码

```
UIImage *image = [info objectForKey:@"UIImagePickerControllerOriginalImage"];
        NSData *data = UIImageJPEGRepresentation(image, 0.5f);
        UIImage *img = [[UIImage alloc] initWithData:data]; 
```

变量`img`是发送到数据库的内容。但是它从来没有被压缩过。

让整个事情变得更奇怪的是它工作了一段时间。那一次我第一次尝试“修复它”，但放弃并撤销了更改。那是它起作用的时候，它又回到了以前的样子。

后来我对应用程序的完全不同的部分进行了另一项更改，但压缩再次停止工作。

有人知道发生了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T10:52:44.407

您的代码`UIImage`从图像选择器控制器（第 1 行）获取一个实例，然后将其压缩为 JPEG 文件（第 2 行），然后再次展开（解压缩）它（第 3 行）。

您不想将展开的图像（`UIImage`称为实例`img`）发送到数据库。相反，您需要将压缩的 JPEG 图像（`NSData`称为实例`data`）发送到数据库。

顺便说一句：这段代码有用吗？是否有可能存储一个`UIImage`实例？

# c++ - 静态常量字符串数组，如何使用

> ID：14090065
> 
> 赞同：0
> 
> 时间：2012-12-30T10:47:27.017
> 
> 标签：c++, class, static, constants

如何初始化和使用静态常量字符串数组？我做了一个例子，标题：

```
const static string validFileTypesToSendToClient[]; 
```

实施：

```
const string Settings::validFileTypesToSendToClient[] = {"html","css","js"}; 
```

这有效，但我该如何使用它？例如在这种情况下：

```
string fileTypesToAllow[] = Settings::validFileTypesToSendToClient; 
```

我得到错误：

```
Initialization with ‘{…}’ expected for aggregate object. 
```

那么，我怎样才能以正确的方式使用字符串的静态常量数组呢？我已经找到了这个：[Initializing a static const array of const strings in C++](https://stackoverflow.com/questions/6536805/initializing-a-static-const-array-of-const-strings-in-c)，但他们没有描述如何使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T10:54:07.560

您不能将一个数组分配给另一个数组，您必须一个一个地复制元素：

```
 string fileTypesToAllow[3];

 for(int i=0; i<3; i++)
 {
    fileTypesToAllow[i] = Settings::validFileTypesToSendToClient[i];
 } 
```

要访问数组，您可以这样做：

```
std::cout << Settings::validFileTypesToSendToClient[0] << std::endl; 
```

可以只使用向量而不是数组或 std::array

```
struct Settings
{
  const static std::vector<std::string> validFileTypesToSendToClient;
  static std::vector<std::string> makeData() 
  { 
    std::vector<std::string> v;
    v.push_back("html");
    v.push_back("css");
    v.push_back("js");
    return v;
  }
}; 
```

执行：

```
const std::vector<std::string> Settings::validFileTypesToSendToClient = Settings::makeData(); 
```

现在您可以轻松复制`validFileTypesToSendToClient`：

```
int main()
{      
  std::vector<std::string> fileTypesToAllow = validFileTypesToSendToClient;
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T10:54:25.037

这一行：

```
string fileTypesToAllow[] = Settings::validFileTypesToSendToClient; 
```

是错的。C/C++ 不允许数组赋值。您可以将一个数组分配给指针，但可以分配另一个数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-30T11:00:47.257

C++ 中不存在内置数组赋值。但是，您可以这样做：

```
#include <array>
#include <string>

std::array<std::string, 3> string_array = 
{
  "foo", 
  "bar", 
  "baz", 
};

int main()
{
  std::array<std::string, 3> second_string_array = string_array;
} 
```

它是 C++11，但现在几乎所有编译器都支持它。（顺便说一句，为什么您首先要复制这样的数组似乎值得怀疑。此外，这是我考虑使用 const char* 的情况之一，即使您肯定会忘记该数组的分配。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-30T11:04:58.810

在下一行中，您将声明一个新的字符串数组，并尝试使用另一个数组对其进行初始化。这在 C++ 中是不允许的。

```
string fileTypesToAllow[] = Settings::validFileTypesToSendToClient; 
```

您应该做的是声明数组，然后将值复制过来：

```
const int size = 3; // Same as the size of the Settings::validFileTypesToSendToClient array
string fileTypesToAllow[size];

for(int i = 0; i < size; i++)
{
    fileTypesToAllow[i] = Settings::validFileTypesToSendToClient[i];
} 
```

# php - 使用 symfony2 在学说中创建子类实体

> ID：14090069
> 
> 赞同：3
> 
> 时间：2012-12-30T10:48:00.370
> 
> 标签：php, symfony, doctrine

我正在尝试在我的 symfony2 项目中创建一个用户系统，其中有两种类型的用户；买家和卖家。两者都是用户，因此扩展基本用户类对他们来说是有意义的。

```
// Acme/UserBundle/Entity/BaseUser
/**
 * @ORM\MappedSuperclass
 */
abstract class BaseUser implements UserInterface, \Serializable {
    /**
     * @ORM\Column(type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;

    /**
     * @ORM\Column(type="string", length=255, unique=true)
     */
    protected $username;

    /**
     * @ORM\Column(type="string", length=255)
     */
    protected $salt;

    /**
     * @ORM\Column(type="string", length=255)
     */
    protected $password;

    /**
     * @ORM\Column(type="string", length=255)
     */
    protected $email;

    /**
     * @ORM\Column(type="string", length=255)
     */
    protected $region;

    /**
     * @ORM\Column(type="string", length=255)
     */
    protected $city;

    /**
     * @ORM\Column(name="is_validated", type="boolean")
     */
    protected $isValidated;

    public function __construct() {
        $this->isValidated = false;
        $this->salt = md5(uniqid(null, true));
    }

    /**
     * @inheritDoc
     * All users must return the role: ROLE_USER
     */
    public function getRoles() {
        return array('ROLE_USER');
    }

    /**
     * @inheritDoc
     */
    public function eraseCredentials() {

    }

    /**
     * @see \Serializable::serialize()
     * We only need to return the ID because you can use the ID to load the rest from the database.
     */
    public function serialize() {
        return serialize(array(
            $this->id,
        ));
    }

    public function unserialize($serialized) {
        list (
            $this->id,
        ) = unserialize($serialized);
    }

    // Getters and Setters removed
} 
```

然后有一个买家来扩展这个类：

```
// Acme/UserBundle/Entity/Buyer
/**
 * ORM\Entity
 * ORM\Table(name="buyer")
 */
class Buyer extends BaseUser {
    /**
     * @ORM\Column(name="first_name", type="string", length=255)
     */
    protected $firstName;

    /**
     * @ORM\Column(name="last_name", type="string", length=255)
     */
    protected $lastName;

    /**
     * @ORM\Column(name="date_of_birth", type="string", length=255)
     */
    protected $dateOfBirth;

    /**
     * @ORM\Column(type="string", length=255)
     */
    protected $gender;

    /**
     * @ORM\Column(name="mobile_number", type="string", length=255)
     */
    protected $mobileNumber;

    /**
     * @ORM\Column(name="receive_newsletter", type="boolean", length=255)
     */
    protected $receiveNewsletter;

    /**
     * @inheritDoc
     * Buyers have their own buyer role
     */
    public function getRoles() {
        return array_push(parent::getRoles(), 'ROLE_BUYER');
    }
} 
```

我正在尝试使用教义工具在 Buyer.php 中自动生成 getter/setter 方法，但我收到了错误消息：

```
$ php app/console doctrine:generate:entities Acme/UserBundle/Entity/Buyer
Generating entity "Acme\UserBundle\Entity\Buyer"

  [Doctrine\ORM\Mapping\MappingException]
  Class "Acme\UserBundle\Entity\Buyer" sub class of "Acme\UserBundle\En
  tity\BaseUser" is not a valid entity or mapped super class.

doctrine:generate:entities [--path="..."] [--no-backup] name 
```

我还没有尝试自己实现这些方法、创建模式和持久化买家对象。我想如果该工具说有问题，那么我做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T11:27:44.707

您在买家注释中的“ORM”之前忘记了“@”

# r - 自动以 lm() 函数的形式创建具有变量名称的动态字符串，以拟合 R 中的线性模型

> ID：14090074
> 
> 赞同：1
> 
> 时间：2012-12-30T10:48:38.403
> 
> 标签：r

> **可能重复：**
> [具有动态变量数的公式](https://stackoverflow.com/questions/4951442/formula-with-dynamic-number-of-variables)

我正在拟合具有许多变量的线性模型，并希望按照 R 中的 lm() 函数的形式自动生成一个动态字符串（“Y ~ X1 + ... + Xn”）。这个想法是将字符串插入到 lm() 公式中，因此不必手动写下所有名称。

另外我想设置响应变量的名称，以便它被识别并包含在字符串的第一位（“Y ~ ...”）

这可能吗？我正在玩“state.x77”数据集。假设我想使用“Life Exp”变量作为响应。

```
 state.x77                            
    str(state.x77)                       
    st = as.data.frame(state.x77)
n=ncol(st) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T10:59:16.340

```
names(st) <- make.names(names(st))
y <- "Life.Exp"
x <- names(st)[!names(st) %in% y]
x
y
mymodel <- as.formula(paste(y, paste(x, collapse="+"), sep="~"))
lm(mymodel, data=st) 
```

# css - CSS 定义的边框不显示在网页上

> ID：14090078
> 
> 赞同：3
> 
> 时间：2012-12-30T10:49:38.710
> 
> 标签：css

在[这个页面上](http://zorl.net/f65b246/t12301140.php)，我在`div`另一个之下有许多 s。菜单栏具有以下 CSS：

```
 #menu-bar {
        border-left:3px white solid;
        border-right:3px white solid;
    } 
```

这很好用。接下来`div`，*“内容”*定义了相同的边框，但不显示。我能想到的唯一主要区别是*“内容”* div 有 2 个浮动 div 用于列，但我认为这并不重要。

任何想法为什么边界不显示？
也欢迎其他建设性的批评。

（出于测试目的，CSS 包含在 HTML 文件中。）

**更新**
*mkk*`overflow`似乎是解决方案，但底部有一个小问题：在更新[的页面](http://zorl.net/f65b246/t12301141.php)中，尽管已`margin-bottom`为*“内容”*`margin-top` div和“*页脚”* div 为 0。我可以通过将页脚的上边距设置为负值来修复它，但这似乎不是正确的方法......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T10:57:53.293

`div#content`没有高度，因此没有边界。将此添加到您的 CSS 中，使其与内部 div 一样高：

```
#content:after {
  content: ".";
  display: block;
  visibility: hidden;
  clear: both;
  height: 0;
  line-height: 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T10:52:36.077

很重要！如果您在#div 中只有浮动元素，它将没有定义高度和宽度。您需要将`overflow: hidden`属性添加到 #div [ 在您的情况下为 #content ] 以使其按预期工作。

您可以通过使用例如 firebug 或 chrome 开发人员工具看到这是正确的。悬停内容并查看它未突出显示，然后添加溢出：隐藏并观察这解决了问题。

# iphone - 在 UINavigationBar 的中心添加分段控件

> ID：14090079
> 
> 赞同：3
> 
> 时间：2012-12-30T10:49:54.667
> 
> 标签：iphone, objective-c, xcode, cocoa-touch, ios6

我正在尝试将 a 添加到仅一个视图（而不是整个视图控制器）`UISegmentedControl`的中间。`UINavigationBar`我该怎么做呢？

我阅读的其他答案只允许整个视图控制器包含 a`UINavigationItem`作为标题。我需要它只在一个视图上显示。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T09:47:50.213

此代码将为您提供帮助。

```
UISegmentedControl *segmentedControl = [[UISegmentedControl alloc] initWithItems:
                                            [NSArray arrayWithObjects:@"Add",@"Delete",
                                             nil]];
    segmentedControl.frame = CGRectMake(0, 0, 80, 30);
    segmentedControl.segmentedControlStyle = UISegmentedControlStyleBar;
    [segmentedControl setWidth:35.0 forSegmentAtIndex:0];
    [segmentedControl setWidth:45.0 forSegmentAtIndex:1];

    [segmentedControl addTarget:self action:@selector(segmentAction:) forControlEvents:UIControlEventValueChanged];
    segmentedControl.momentary = YES;

    UIBarButtonItem *segmentBarItem = [[UIBarButtonItem alloc] initWithCustomView:segmentedControl];
    [segmentedControl release];

    self.navigationItem.leftBarButtonItem = segmentBarItem;
    [segmentBarItem release]; 
```

这段代码的结果是

![在此处输入图像描述](../Images/814032efcd9ae4112f8c9a6807c555b2.png)

**编辑：**

可以工作的确切代码：

```
UISegmentedControl *segmentedControl = [[UISegmentedControl alloc] initWithItems:
                                            [NSArray arrayWithObjects:@"Add",@"Delete",
                                             nil]];
    segmentedControl.frame = CGRectMake(0, 0, 80, 30);
    segmentedControl.segmentedControlStyle = UISegmentedControlStyleBar;
    [segmentedControl setWidth:35.0 forSegmentAtIndex:0];
    [segmentedControl setWidth:45.0 forSegmentAtIndex:1];

    [segmentedControl addTarget:self action:@selector(segmentAction:) forControlEvents:UIControlEventValueChanged];
    segmentedControl.momentary = YES;

    self.navigationItem.titleView = segmentedControl; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-31T13:20:03.417

您可以将 UISegmentedControl 作为 SubView 添加到导航栏。

```
NSArray *arrayOfItems = [[NSArray alloc] initWithObjects:@"A",@"B",@"C", nil];
UISegmentedControl *segmentedControl = [[UISegmentedControl alloc] initWithItems:arrayOfItems];
segmentedControl.frame=CGRectMake(60, 0, 200, 44);
[self.navigationController.navigationBar addSubview:segmentedControl]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-05T12:00:34.040

如果要添加以任何视图为中心的 UISegmentedControl，而不仅仅是 UINavigationView：

```
UISegmentedControl *segmentedTab = [[UISegmentedControl alloc] initWithItems:[NSArray arrayWithObjects:@"a", @"b", @"c", nil]];
segmentedTab.center = CGPointMake(segmentedView.frame.size.width / 2, segmentedView.frame.size.height / 2);
[self.segmentedView addSubview:segmentedTab]; 
```

segmentedView 是一个包含我们的 UISegmentedControl 的视图。

# php - Wordpress 检查小部件位置是否有小部件

> ID：14090081
> 
> 赞同：0
> 
> 时间：2012-12-30T10:50:17.293
> 
> 标签：php, wordpress-theming, wordpress

我在 wordpress 主题中创建了小部件位置：

```
 <div class="row">
        <?php if ( dynamic_sidebar('Top')) ?>
    </div> 
```

如果在这个位置没有任何活动的小部件，那么我想隐藏整个代码。

有没有像 joomla 这样的 wordpress 代码

`<?php if($this->countModules('Top')): ?>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T11:04:00.190

`is_active_sidebar`应该做的工作，至少 WP 源代码看起来好像函数会检查，如果侧边栏是空的：

```
/**
* Whether a sidebar is in use.
*
* @since 2.8
*
* @param mixed $index Sidebar name, id or number to check.
* @return bool true if the sidebar is in use, false otherwise.
*/
function is_active_sidebar( $index ) {
   $index = ( is_int($index) ) ? "sidebar-$index" : sanitize_title($index);
   $sidebars_widgets = wp_get_sidebars_widgets();
   if ( !empty($sidebars_widgets[$index]) )
           return true;
   return false;
} 
```

# python - 是什么导致不同 GTK 版本之间 GtkIconView 的显示行为不同？

> ID：14090094
> 
> 赞同：9
> 
> 时间：2012-12-30T10:53:14.147
> 
> 标签：python, gtk3, pygobject

图片将解释标题：

在 LMDE 和 Ubuntu 12.04 下，我的 GtkIconView 看起来像这样 - 就图标之间的间距而言，它是正确的：

![间距 Ubuntu 12 04 RB 96](../Images/cf2535ce2c1ec5f3327c4caa38050d01.png)

在 Ubuntu 12.10、13.04 和 Fedora 17 下，相同的代码显示如下：

![间距 Ubuntu 12 10 RB 97](../Images/9a69066774e397a344eff621ebd17f8a.png)

注意 - 这是一个节奏盒 python 插件 - 源代码[在 GitHub 上](https://github.com/fossfreedom/coverart-browser)

我检查了以下 GtkIconView 属性 - 它们在 Ubuntu 12.04 和错误显示的 12.10 版本中完全相同。

*   项目填充
*   行间距
*   列间距
*   项目宽度

**当我将text_column**或**markup_column**（图标下的文本）设置为可见列（即将值从 -1 更改为列号）时，此显示行为会立即发生。

如果文本列/标记列被隐藏（即值为 -1），则所有发行版上的显示都是正确的。

由于它在完全相同的音乐集上运行相同的代码 - 我只能推测 Fedora 17/Ubuntu 12.10/13.04 中较新的 GTK 库的行为不同。

我的 google-fu 只找到[了这个](http://list-archives.org/2012/08/07/ubuntu-accomplishments-contributors-lists-launchpad-net/spacing-issues-in-the-viewer/f/1251053531)听起来相同的参考。但是检查 ubuntu-accomplishment-viewer 源代码并没有真正启发我。

有没有其他人遇到过这个？关于进一步调查的最佳方法有什么建议吗？

* * *

好的 - 我试图将其简化为基本要素 - 这个简单的 glade 文件和这个简单的代码会产生这个问题。但是我仍然不知道是什么导致了这种视觉效果：/

```
#!/usr/bin/env python

从 gi.repository 导入 Gtk, GdkPixbuf

窗口 = Gtk.Window()
window.connect('delete_event', Gtk.main_quit)

ui = Gtk.Builder()
ui.add_from_file('reproduce.ui')

page = ui.get_object('main_box')
window.add(页面)

ls = Gtk.ListStore(str, GdkPixbuf.Pixbuf)
图标 = GdkPixbuf.Pixbuf.new_from_file_at_size(
    str("/usr/share/icons/gnome/48x48/actions/zoom-out.png"), 90, 90)

对于范围内的 i (15)：
    ls.append(['项目 %d' % i, 图标])

cover_view = ui.get_object('covers_view')
cover_view.set_model(ls)
封面视图.set_text_column(0)
覆盖视图.set_pixbuf_column(1)
cover_view.set_item_width(100)

# 这些行更容易看出问题
crt, crp = cover_view.get_cells()
crt.set_property('背景', '#000')
crt.set_property('前景', '#AAA')
打印 crt.get_request_mode()

window.set_default_size(600,400)
window.show_all()
gtk.main()

```

和林间空地 - [http://pastebin.com/uvQ9mWeg](http://pastebin.com/uvQ9mWeg)

* * *

[根据deinonychusaur](https://stackoverflow.com/users/1099682/deinonychusaur)的建议，我查看了[gtkparasite](https://unix.stackexchange.com/questions/37626/any-tool-for-inspecting-gtk3-elements)

仅供参考 - 我在 Ubuntu 12.04 和 12.10 中都使用了[来自 AnthonyWong](https://launchpad.net/~anthonywong/+archive/gtkparasite)的现成PPA。

两个版本的结果是相同的。尝试使用应用程序更改 IconView 属性并没有真正解决这个问题。

deinonychusaur 的下一个建议看起来很有趣，我可以确认 - 即

IconView CellRendererText 是 Fedora 17/12.10/13.04 中 IconView Pixbuf 大小的 2 倍，但是 12.04 中 IconView Pixbuf 大小的 1 倍。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T20:39:30.163

### 观察的原因。

上游 GTK 开发人员决定[更改算法](https://mail.gnome.org/archives/commits-list/2012-May/msg02665.html)，以计算 IconView 的 TextRenderer 单元格的宽度。

> 在这里，我们使用相同的旧猜测，尝试图标大小并将列表中找到的第一个图标的大小设置为两倍，天真但大部分时间都有效

此更改是在 Ubuntu 12.04 和 LMDE 中较旧的 GTK 版本之后提交的。它进入了 Ubuntu 12.10 & 13.04 & Fedora 17 中的较晚 GTK 版本。

### 错误或没有错误

自 Ubuntu 12.04 发布以来，这个问题已经发生了一年多，看来这不是一个错误，而是一个设计决定。

可能有点奇怪 - 在 Bugzilla 上，[这是](https://bugzilla.gnome.org/show_bug.cgi?id=680953)针对另一个应用程序（Pitivi 视频编辑器）报告的，但在撰写本文时仍处于未确认状态。

### 解决方法

该链接中有用的是一个附件，它提供了一种解决方法，您可以在其中创建 CellRendererText 并将其分配给 IconView，然后再定义标记/文本列。

以下是我对解决方法的解释

```
封面大小=100
markup_text="一些文字"

self._text_renderer = Gtk.CellRendererText()
self._text_renderer.props.alignment = Pango.Alignment.CENTER
self._text_renderer.props.wrap_mode = Pango.WrapMode.WORD
self._text_renderer.props.xalign = 0.5
self._text_renderer.props.yalign = 0
self._text_renderer.props.width = cover_size
self._text_renderer.props.wrap_width = cover_size
self._cover_view.pack_end(self._text_renderer, False)
self._cover_view.add_attribute(self._text_renderer, 'markup', markup_text)

```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T13:17:15.150

使用@qama 所说的关于“on-resize-set-size-request hack”的内容，可以修复该行为（尽管以一种非常骇人听闻的方式）。

只需添加一个回调：

```
def keep_size(crt, *args):

    crt.handler_block(crt_notify)
    crt.set_property('width', 100)
    crt.handler_unblock(crt_notify) 
```

并将其连接到`CellRendererText`：

```
crt, crp = covers_view.get_cells()
crt_notify = crt.connect('notify', keep_size) 
```

如果您将 a 添加`print crt, args`到回调中，您可以看到它会出现大约 10-20 次......同时处理属性`width`和`wrap-width`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T12:21:19.890

为了正确重现这一点：

*   不要使用系统 gtk rc
*   不要使用用户 gtk rc
*   仅应用您自己的 gtk rc
*   在例如 virtualbox 中设置两个版本
*   均衡系统参数，例如 dpi
*   使用相同的数据运行
*   发布使用的精确版本、py、pygtk、gtk+、依赖库

话虽如此，但我遇到了不同版本的 gtk+ 行为不同的问题，以至于我无法在 linux（最新的 gtk）上可靠地开发并部署到 Windows（固定版本）。

随着时间的推移，在 gtk+ 中修复了错误，引入了新功能，您不能真正期望在不同版本之间实现像素完美的再现。

# delphi - 使用 Delphi 7 在运行时获取类中的变量名列表

> ID：14090095
> 
> 赞同：1
> 
> 时间：2012-12-30T10:53:15.390
> 
> 标签：delphi, delphi-7

我想在运行时获取当前类/表单上的变量列表。我该怎么办？我正在使用 delphi 7 并且没有 RTTI 来帮助我，或者没有？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-30T10:58:24.247

您不能在 Delphi 7 中动态迭代类中的变量（使用 RTTI 或其他方式）。

您可以使用 RTTI 访问已发布的属性（以及实现任何支持 RTTI 的接口的过程/函数），仅此而已。

如果你想迭代表单中的组件，这很容易使用表单的`Components`属性。

# c# - 具有两种突出显示的列表视图

> ID：14090096
> 
> 赞同：1
> 
> 时间：2012-12-30T10:53:26.457
> 
> 标签：c#, wpf, listview, highlight

我正在使用 C# wpf 并且我有一个列表视图，我想在其中设置一个黑色突出显示，当双击列表视图中的一个项目并且单击一个项目时，它应该有一个明亮的突出显示。双击的项目应在黑暗中保持突出显示，直到双击另一个项目。我怎样才能做到这一点？

# java - 如何使用 Java CountDownLatch 使我的算法并行处理？

> ID：14090099
> 
> 赞同：0
> 
> 时间：2012-12-30T10:54:16.093
> 
> 标签：java, concurrency, java.util.concurrent, concurrent-programming

我正在玩 Java lacthes 并编写了一段代码以并行方式计算一些东西。数据基本上由一个 Map 组成，每个 Map 都有一个数字列表作为值。我的目标是总结此地图中所有键的所有值。首先，我认为在单独的线程中获取每个键的所有值的总和是一个好主意（每个键都有自己的单独线程），最后我将每个线程返回的内容相加得到总和。我在我的代码中使用了一个简单的 CounDownLatch：

```
public static void main(String[] args) throws InterruptedException, ExecutionException
    {
        //final CountDownLatch startGate = new CountDownLatch(1);
        final CountDownLatch endGate = new CountDownLatch(3);

        Map> data =  new HashMap>();
        Set summedData = new HashSet();
        // populate the map with data
        populateMap(data);
        //separate the data with keys
        //send each list to a new thread to process

        for (String key : data.keySet())
        {
            final List list = data.get(key);
            System.out.println(list);

            //create a FutureTask
            FutureTask future = new FutureTask(new Callable()
            {

                @Override
                public Integer call() throws Exception
                {
                    int sum = new Mapx(list).getSum();
                    endGate.countDown();
                    return sum;
                }
            });

            Thread t = new Thread(future);
            t.start();
            System.out.println(t.getState());
            summedData.add(future.get());
        }
        //keep the main method on hold until all the thread do their job
        endGate.await();
        //send to reduce
        int total = new Reduce(summedData).addAll();
        System.out.println(total);

    }
```

我的期望是，如果计算一个键的列表中所有项目的总和需要很长时间，则为该键运行的线程将在后台运行，而另一个用于下一个键的线程开始计算。换句话说，计算是并行进行的。但是，我发现情况并非如此，线程是串行运行的。有人可以帮助我如何实现我的目标并使这段代码并行吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T11:10:18.173

您`future.get()`从循环内调用。此方法将阻塞，直到计算出结果，因此在另一个线程完成计算之前循环不会继续，从而导致您得到序列化的行为。

为了获得你想要的行为，你应该有一个循环在线程上启动所有 futureTasks，然后一个循环从所有`FutureTask`s using中获取结果`get()`。

您最好将 Callable 提交给 ExecutorService （请参阅[Executors](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Executors.html)），然后它`ExecutorService`会`Future`为您制作。

实际上，并行启动计算并等待其结果是`ExectorService`'s[`invokeAll()`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html#invokeAll%28java.util.Collection%29)方法为您所做的。

使用`CountDownLatch`是多余的，因为`Future`对象已经具有必要的同步行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-14T08:54:02.077

只是想添加一件事，只有当您的处理器至少是双核时，这种并行处理才会花费更少的时间。如果你有一个单核处理器，那么这种方法实际上可能需要更多时间

# less - 更少的 CSS 不需要 @import 缺点

> ID：14090104
> 
> 赞同：0
> 
> 时间：2012-12-30T10:54:32.700
> 
> 标签：less

我有一个 CSS 目录结构的项目，如下所示：

```
-public
-admin
-includes 
```

*在包含该目录中所有文件的包含*文件夹中创建“导入程序”文件是否有任何缺点`@import`？然后将该文件包含在 public/admin 目录中的每个文件中。不必总是加载它们，但这种方式比在每个文件顶部手动导入依赖项更干净。

我想它编译它们的速度可能会慢一些，因为它必须读取更多文件，但它会为我节省更多时间，并且不需要考虑项目中的依赖关系。我这样做会失去一些东西还是绝对可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T12:21:58.493

我认为这种方法听起来不错。我通常认为，如果您将代码结构良好并在运行时将其加载到 1 个文件中（使用较少的编译器左右），则将代码拆分为文件是一个好主意。这样就更容易构建它，更容易找到你需要的东西。对我来说，这为编译器赢得了额外时间的小负面影响。

# bash - 带有 s3fs 和 fuse 的 Amazon S3。用于卸载和挂载的脚本

> ID：14090105
> 
> 赞同：1
> 
> 时间：2012-12-30T10:54:37.940
> 
> 标签：bash, amazon-web-services, amazon-s3, fuse, s3fs

Redhat with Fuse 2.4.8
S3FS 版本 1.59

另外：[Amazon S3 with s3fs and fuse，transport endpoint is not connected](https://stackoverflow.com/questions/14010115/amazon-s3-with-s3fs-and-fuse-transport-endpoint-is-not-connected)

我想制作一个脚本来解决这种情况。该脚本将卸载并安装目录。我需要使用的命令是：
fusermount -u /s3
/usr/bin/s3fs -o allow_other bucketname /s3

对于熟悉这种情况的人，我应该关心其他事情吗？或者这就足够了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T11:03:27.793

您不应该在生产环境中使用 amazon s3 作为 unix 文件系统。S3 不是这样构建的。来自[s3fs 文档](http://code.google.com/p/s3fs/wiki/FuseOverAmazon)

> 重要限制最终一致性由于 S3 的“最终一致性”限制，文件创建可能并且偶尔会失败。即使在成功创建之后，后续读取也可能在不确定的时间内失败，即使在一次或多次成功读取之后也是如此。创建并读取足够多的文件，您最终会遇到此故障。这不是 s3fs 的缺陷，也不是像 s3fs 这样的 FUSE 包装器可以解决的问题。重试选项不能解决这个问题。您的应用程序必须容忍或补偿这些故障，例如通过重试创建或读取。有关更多详细信息，请参阅最终一致性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-14T08:59:47.370

好读。

我想规避一下，我的 2 美分价值是您可以每分钟执行一次 cron 来将文件从已安装的 S3 驱动器复制到您的服务器。如果上下文适合，那就是

# text - 带有英雄单元文本的 Twitter Bootstrap 进度条未正确显示

> ID：14090107
> 
> 赞同：0
> 
> 时间：2012-12-30T10:54:46.030
> 
> 标签：text, twitter-bootstrap, progress-bar, alignment, vertical-alignment

我对带有一些文本的标准 Twitter Bootstrap 进度条有问题，如果它在 内`<div class="hero-unit">`，还有标准 Twitter Bootstrap 类：

```
<div class="hero-unit">
<div class="container">
    <div class="progress progress-striped active">
        <div class="bar" style="width: 80%;">80%</div>
    </div>
</div>
</div>
​ 
```

这是一个[jsFiddle](http://jsfiddle.net/3qe8K/)代码，显示文本未正确对齐。为什么会发生这种情况以及如何解决？我试图修复它，但没有运气。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T11:04:29.630

这是导致问题`line-height: 30px`的原因。`hero-unit`

我已经改变了这样的代码：

```
<div class="hero-unit" style="line-height: inherit"> 
```

当然，最好给它分配一个类，而不是使用 style 属性。

# asp.net-mvc - asp.net mvc appliction_start 中的应用程序配置代码

> ID：14090112
> 
> 赞同：1
> 
> 时间：2012-12-30T10:55:22.473
> 
> 标签：asp.net-mvc

现在我有一些代码只需要在应用程序生命周期中执行一次。我在 application_start 事件中有该代码，但这会减慢我的第一个请求，因为需要完成一些繁重的配置。

有没有其他选择？是否可以在部署过程中执行一些逻辑？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T14:53:38.273

每次您的应用程序池回收时都会发生这种情况。因此，如果您的应用程序池每天回收一次，那么回收后的第一个请求将会很慢。我为缓解此问题所做的工作是在应用程序回收后立即让脚本访问网站，以获取初始性能影响，而不是最终用户。

# wpf - 带有 GridView 选定行的 ListView - 删除 3D 外观

> ID：14090113
> 
> 赞同：2
> 
> 时间：2012-12-30T10:55:24.283
> 
> 标签：wpf, listview, gridview

我有一个包含 GridView 的 WPF ListView。我希望所选行看起来“扁平”而不是 3d 样式。

剂量有人知道怎么做吗？谢谢， 斯玛达尔

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-30T22:54:42.663

3D 外观是默认样式的一部分。要更改这一点，您需要替换`ControlTemplate`for `ListViewItem`。这是一个简单的示例，它产生以下内容：![列表视图截图](../Images/31b82fbf4f1c44f17facd00ec8c2ecbd.png)

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <ListView>
            <ListView.View>
                <GridView>
                    <GridViewColumn Header="A"/>
                </GridView>
            </ListView.View>
            <ListView.Items>
                <ListViewItem Content="Item 1"/>
                <ListViewItem Content="Item 2"/>
                <ListViewItem Content="Item 3"/>
            </ListView.Items>

            <ListView.ItemContainerStyle>
                <Style TargetType="ListViewItem">
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="ListViewItem">
                                <Border CornerRadius="2" SnapsToDevicePixels="True"
                                        BorderThickness="{TemplateBinding     BorderThickness}" 
                                        BorderBrush="{TemplateBinding BorderBrush}" 
                                        Background="{TemplateBinding Background}">
                                    <Border Name="InnerBorder" CornerRadius="1"   BorderThickness="1">
                                        <Grid>
                                            <Grid.RowDefinitions>
                                                <RowDefinition MaxHeight="11" />
                                                <RowDefinition />
                                            </Grid.RowDefinitions>
                                            <Rectangle Name="UpperHighlight" Visibility="Collapsed" Fill="#75FFFFFF" />
                                            <GridViewRowPresenter Grid.RowSpan="2" 
                                                VerticalAlignment="{TemplateBinding VerticalContentAlignment}" 
                                                SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" />
                                        </Grid>
                                    </Border>
                                </Border>
                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsSelected" Value="True">
                                        <Setter Property="Background" Value="LightBlue"/>
                                    </Trigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>
            </ListView.ItemContainerStyle>
        </ListView>
    </Grid>
</Window> 
```

注意：默认模板位于此处[http://msdn.microsoft.com/en-us/library/ms788747.aspx](http://msdn.microsoft.com/en-us/library/ms788747.aspx)。由于无法更改`ControlTemplate`现有模板的一部分或基础模板，因此我通常会尝试尽可能多地保留默认模板，并且只更改我关心的部分。这有点冗长，但应该做你正在寻找的。

# java - 在android中比较和匹配两个声音

> ID：14090116
> 
> 赞同：5
> 
> 时间：2012-12-30T10:56:21.070
> 
> 标签：java, android

我需要从 android 2.3 版麦克风捕获声音并将其与存储在卡上的波形文件匹配。

如果它确实匹配，那么我需要触发一个特定的动作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T11:00:38.380

如果这些是语音样本，并且您需要专业的解决方案，您可以使用 PESQ 算法： [http](http://en.wikipedia.org/wiki/PESQ) ://en.wikipedia.org/wiki/PESQ 或最新的 POLQA： [http ://en.wikipedia.org/wiki/ POLQA](http://en.wikipedia.org/wiki/POLQA) 这些标准用于电信语音质量解决方案。

# c# - 我的百分比计算显示错误的结果

> ID：14090117
> 
> 赞同：0
> 
> 时间：2012-12-30T10:56:23.147
> 
> 标签：c#, .net

我正在计算一定数量的百分比，我的代码是：

```
calc = ((tax / 100) * amount); 
```

其中tax=5，amount=1000，都是长值，预期结果为50，但我得到0

任何人都可以帮助我，我错在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T10:57:16.663

整数除法 ( `5 / 100`) 的结果为 0，请确定是浮点除法：

```
calc = ((tax / 100.0) * amount);
// or
calc = ((tax / 100f) * amount); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T10:59:22.943

尝试关注

```
calc = (( (float)tax / 100) * amount); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T05:34:09.820

如果您将整数相除，那么您将得到结果零而不是小数（百分比）。

(tax / 100)..... 以整数值计算；任何小数部分都被删除。

在您的情况下，5/100 = 0.05。它将删除 .05，结果为 0

放松[链接](http://social.msdn.microsoft.com/Forums/en-US/csharplanguage/thread/cbb0c38d-5581-4615-9beb-58d68a1e8f50)，那里提供了相同的示例。

# java - 将值发送到 JAVA 中另一个类中的另一个方法

> ID：14090118
> 
> 赞同：-2
> 
> 时间：2012-12-30T10:56:23.370
> 
> 标签：java, methods

抱歉，我是 Java 新手。我想在方法 Calculator 中将 mark1 传递给类 Exam，但是我遇到了一些错误，我该怎么做才能让程序说不兼容类型。我能做些什么？

我想通过这个方法发送 mark1：

```
public float SendMark(){
    Exam ex = new Exam();
    for (int i=0; i<students.length; i++) {
        mark1 = students[i].getMark();
    }
    return ex.Calculator(mark1);
} 
```

到这个类和方法计算器......但它说不兼容的类型......这个方法我想对数组值求和并得到数组值的平均值......它是正确的方法吗？我应该在这里写什么...？请帮我详细说明谢谢...

```
public class Exam {
    public Calculator (float mark1) {
        AddList ad = new AddList();

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T10:57:34.957

您缺少方法计算器的返回类型。

```
public Calculator (float mark1) 
```

应该

```
public float Calculator (float mark1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T11:42:22.137

根据我从您的问题中了解到的情况，这是我的答案。

```
 public float **s**endMark(){
        Exam ex = new Exam();
        for (int i=0; i<students.length; i++) {
            mark1 = students[i].getMark(); //this does not make any sense.
        }
        //Since you insisted that you wanted to only print, just call the calculator method and do not return anything. change the return type of calculator method to void.
        ex.Calculator(mark1);
        return "something";//since your method's definition says so
   }

public class Exam {
    public void **c**alculator (float mark1) {
        //Do your stuff

    }
} 
```

您可能还想查看 sun java 的编码约定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T11:07:45.650

您的`Calculator`方法没有返回语句，并且它的签名（方法头）没有声明返回类型。另外，我看不到您声明的位置`mark1`，您只在`for`循环中对其进行了初始化。同时，我还发现了一个逻辑错误，`mark1`总是会发送数组中的最后一个分数，因为它的值会在循环中被重复覆盖；只有最后一个值存在。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-30T11:11:55.257

当您不需要返回类型时，您键入`void method_name(args)`，就像在 C中一样。是*无返回类型*`Void`的占位符。其次，你的代码比其他菜鸟好，但你仍然有很多不必要的细节，这意味着你没有自己调试。更好地定位问题（删除所有不必要的重现）。让专家立即看到您的问题会更简单。你甚至会自己看到或猜到。否则，如果不学习本地化错误，您将永远不会成为程序员。并不必要地浪费SO。

 ** * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-30T11:12:44.720

您的代码中有几个小问题：

*   通常方法名称应以 Java 代码约定中的小写字母开头

*   方法中的`for`循环有什么作用`SendMark`？只是多次覆盖浮点变量？

*   在您的评论中，您提到您想要`Exam.Calculator`方法打印结果，但没有返回值。然后你应该将`void`返回类型添加到 method `Calculator()`。

*   如果您不期望方法有任何返回值`Calculator()`，为什么要`return ex.Calculator(mark1)`在您的`SendMark()`方法中，并且类型是浮点数？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-30T13:42:25.413

一种方法是将您的学生数组传递给计算器，然后在计算器方法内部迭代学生总结标记，如标记 = 标记 + 学生 [i].getMark() 和 avg = 标记/学生.长度

其他可能是，通过标记 = 标记 + 学生 [i].getMark() 在您的主要方法中形成标记，然后将标记和长度传递给计算器方法以计算平均值。

还请仔细阅读 java 编码约定以及如何选择返回类型。

希望这可以帮助。*

# c - 自动打印 C 中的结构和变量

> ID：14090119
> 
> 赞同：5
> 
> 时间：2012-12-30T10:56:24.393
> 
> 标签：c, debugging, pointers, printing, structure

我正在处理 4-5 个 .c 文件（每个文件大约 2000 到 5000 行），其中包括几个标题。目前我没有任何调试打印可以帮助我在执行过程中调试程序。

我的问题是：-有没有办法（或一些现有的工具）来解析 .c 文件并为 .c 文件中当前范围内的所有变量添加一组新的打印语句？就像 VC++ 允许我们看到局部变量和全局变量等一样。我需要在每一步打印它们。此外，应该取消引用指针。

例如。假设在 .c 文件中的某一时刻，有 10 个全局变量和 3 个局部变量。我需要生成智能 printfs 来打印这 13 个变量。稍后在程序中，如果有 20 个变量，我应该能够打印 20 个变量等。包含的头文件包含每个
变量的所有相关声明（可以是结构/指针/数组或某些组合等）。 ) 我试图通过 perl 脚本来实现这一点。

我所做的是，我生成了预处理文件（.i 文件）并尝试通过 perl 解析它，然后生成特定于每个变量的单独打印函数，但经过半天的努力，我意识到它太耗时了。有没有工具可以做到这一点？如果不是这样，任何接近它的东西都应该足够好（我可以在上面应用一些 perl 处理等）我的目标是在程序执行之后，在程序执行期间的每一步，我应该能够看到变量（有效在那个范围内）而不必调用调试器。

我被允许处理 .c 文件并重新编写它们等等。希望我的问题很清楚，并感谢您的回复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T11:26:49.487

假设您的 C 程序可以通过 Frama-C 的值分析来解释，这远非给定，您可以使用它来获取程序每个点或兴趣点处所有活动变量的值的日志。

考虑以下程序：

```
int x = 1;

main(){
  int l;

  x=2;
  Frama_C_dump_each();
  l=3;
  Frama_C_dump_each();
  {
    int blocklocal = l + 1;
    Frama_C_dump_each();
    x = blocklocal + 1;
    Frama_C_dump_each();
  }
  Frama_C_dump_each();
  return 0;
} 
```

在这个程序上运行`frama-c -val -slevel 1000000000 -no-results t.c`会产生日志：

```
[value] Values of globals at initialization
        x ∈ {1}
[value] DUMPING STATE of file t.c line 7
        x ∈ {2}
        =END OF DUMP==
[value] DUMPING STATE of file t.c line 9
        x ∈ {2}
        l ∈ {3}
        =END OF DUMP==
[value] DUMPING STATE of file t.c line 12
        x ∈ {2}
        l ∈ {3}
        blocklocal ∈ {4}
        =END OF DUMP==
[value] DUMPING STATE of file t.c line 14
        x ∈ {5}
        l ∈ {3}
        blocklocal ∈ {4}
        =END OF DUMP==
[value] DUMPING STATE of file t.c line 16
        x ∈ {5}
        l ∈ {3}
        =END OF DUMP== 
```

这些`Frama_C_dump_each()`语句是由我手动插入的，但您也可以轻推解释器，以便它在每个语句处自动转储一个状态。

要使这种方法起作用，您需要程序的整个源代码，包括标准库函数（`strlen()`、`memcpy()`、 ...），并且您必须在函数开头对输入值进行硬编码`main()`。否则，它将表现为它真正的静态分析器，而不是表现为 C 解释器。

您还可以使用[GUI](http://frama-c.com/value.html)观察程序中变量的值，但如果它不是线性的，由于函数调用或循环而多次访问的语句将显示执行期间可以获取的所有值。

# php - jquery 表格元素的滑动效果

> ID：14090120
> 
> 赞同：0
> 
> 时间：2012-12-30T10:56:52.067
> 
> 标签：php, javascript, jquery, rotation, autorotate

目前，我正在为我的网站上的列表设置自动滚动功能。

但是，在列表中的第一项消失后，第二项是第一项的“跳入位置”。我想知道是否可以让第二个项目滑入 jquery 中的位置，我该怎么做？以下是javascript代码和html。感谢您提前提供任何帮助。

Javascript：

```
 <script>
    var $target=$("tr.latest_arr td.rotate:first");
    $target.animate({
        marginLeft: -200,
        opacity: 0,
    }, function(){
        $target.css({
            marginLeft: 200
        }).appendTo('tr.latest_arr').animate({
            marginLeft: 0,
            opacity: 1
        })
    });
},5000);
    </script> 
```

生成的 HTML（示例）：

```
 <table>  
    <tr class="latest_arr">
       <td class="rotate" style="float:left;width:200px">Item 1</td>
       <td class="rotate" style="float:left;width:200px">Item 2</td>
       <td class="rotate" style="float:left;width:200px">Item 3</td>
       <td class="rotate" style="float:left;width:200px">Item 4</td>
       <td class="rotate" style="float:left;width:200px">Item 5</td>
            ...
            ...
            ...
    </tr>
 </table> 
```

我可以为列表执行此操作，但是当我将标签切换为表格元素时它会发生变化。

这就是我现在面临的：

[http://jsfiddle.net/fxHAe/](http://jsfiddle.net/fxHAe/)

这就是我正在寻找的，但以表格形式：

[http://jsbin.com/welcome/53677](http://jsbin.com/welcome/53677)

任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T11:19:18.547

结果是预期的！，我会这样做

```
 var ad_refresh=setInterval(function(){
    var $target=$("ul.latest_arr li.rotate:first");
    $target.animate({
        marginLeft: -200,
        opacity: 0,
    }, function(){
        $target.css({
            marginLeft: 200
        }).appendTo('ul.latest_arr').animate({
            marginLeft: 0,
            opacity: 1
        })
    });
},1000);​

<ul class="latest_arr">
    <li class="rotate">foo1</li>
    <li class="rotate">foo2</li>
    <li class="rotate">foo3</li>
    <li class="rotate">foo4</li>
    <li class="rotate">foo5</li>
</ul>

        <style type="text/css">
         li{float:left}
        </style>​ 
```

[这里](http://jsfiddle.net/fxHAe/1/)的结果 当然，根据需要更改 ul css 宽度会更适合您的情况

# machine-learning - 如何从 DARPA pcap 文件中导出 KDD99 特征？

> ID：14090121
> 
> 赞同：5
> 
> 时间：2012-12-30T10:56:57.187
> 
> 标签：machine-learning, pcap, intrusion-detection

我最近使用 DARPA 网络流量数据包及其在 KDD99 中用于入侵检测评估的派生版本。

请原谅我在计算机网络领域的知识有限，我只能从 DARPA 数据包头中导出 9 个特征。而不是 KDD99 中使用的 41 个特性。

我打算继续我在 UNB ISCX 入侵检测评估数据集上的工作。但是，我想从 pcap 文件中导出 KDD99 中使用的 41 个功能，并将其保存为 CSV 格式。有没有一种快速/简单的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-30T12:02:23.350

小心这个数据集。

[http://www.kdnuggets.com/news/2007/n18/4i.html](http://www.kdnuggets.com/news/2007/n18/4i.html)

部分摘录：

> 人工数据是使用封闭网络、一些专有网络流量生成器和手动注入攻击生成的
> 
> 在提出的问题中，最重要的似乎是没有执行任何验证来表明 DARPA 数据集实际上看起来像真实的网络流量。
> 
> 2003 年，Mahoney 和 Chan 构建了一个简单的入侵检测系统，并针对 DARPA tcpdump 数据运行它。他们发现了许多违规行为，包括——由于数据的生成方式——所有恶意数据包的 TTL 为 126 或 253，而几乎所有良性数据包的 TTL 为 127 或 254。
> 
> **DARPA 数据集（以及扩展的 KDD Cup '99 数据集）从根本上被破坏了，并且无法从使用它们进行的任何实验中得出任何结论**
> 
> 我们强烈建议 (1)**所有研究人员停止使用 KDD Cup '99 数据集**

至于使用的特征提取。IIRC 的大多数功能只是*解析*的IP/TCP/UDP 标头的属性。例如，端口号、IP 的最后一个八位字节和一些数据包标志。

因此，无论如何，这些发现不再反映*现实的*攻击。今天的 TCP/IP 堆栈比创建数据集时**更加健壮**，“死亡 ping”会立即锁定 Windows 主机。TCP/IP 堆栈的每个开发人员现在都应该意识到这种格式错误的数据包的风险，并对堆栈进行压力测试。

这样一来，**这些功能就变得毫无意义了**。网络攻击中不再使用错误设置的 SYN 标志等；这些要复杂得多；并且很可能不再攻击 TCP/IP 堆栈，而是攻击运行在下一层的服务。因此，我不会费心找出在 99 年代早期使用 90 年代早期有效的攻击的有缺陷的模拟中使用了哪些低级数据包标志......

# javascript - 在控制器中动态添加视图和存储 - Ext-JS 4.1.1a

> ID：14090122
> 
> 赞同：0
> 
> 时间：2012-12-30T10:57:12.497
> 
> 标签：javascript, extjs

我想在控制器中动态添加视图和存储。所以，我有这个：

```
Ext.define('App.controller.MyController', {
    extend: 'Ext.app.Controller',
    stores: ['App.store.Users'],
    views: ['App.view.Users.Index'], 
```

我正在使用以下方法动态创建此控制器：

```
var controller = this.getController("Users"); 
```

如何动态添加商店和视图，例如：

```
var controller = this.getController(moduleID);

controller.stores = [];
controller.views = [];

controller.stores.push('App.store.Users');
controller.views.push('App.view.Users.Index'); 
```

但是当我这样做时，它不起作用。控制台告诉我 Ext 不能“从未定义缓冲”，所以我认为我必须使用`Ext.apply()`or`Ext.merge()`或类似的东西来获取`getters`和`setters`for `stores`。

你怎么看？

**编辑@asgoth：**

当你使用`this.getController("nameOfController");`控制器时，如果控制器不存在，Ext-JS 会为你创建一个。这是 100% 有效的，因为当我`console.log(controller);`获取数据时（文档也这么说）。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T12:00:45.157

您没有太多选择，因为在实例化控制器时需要准备好数组。默认情况下，这只发生一次，因为它应该由`Ext.app.Application`控制器（实例）管理。

第一点是你不能在`getController`这里使用该方法，因为它不接受任何额外的配置。所以最简单的解决方案是实现你自己的`getController`方法，稍微重命名以避免覆盖。

这是一个例子：

```
getControllerInstance: function(name, cfg) {
    var me = this.application,
        controllers = me.controllers,
        controller = controllers.get(name);

    if (!controller) {
        controller = Ext.create(me.getModuleClassName(name, 'controller'), Ext.ApplyIf({
            application: me,
            id: name
        },cfg);

        controllers.add(controller);
        if (me._initialized) {
            controller.doInit(me);
        }
    }

    return controller;
} 
```

**请注意，此变体不会向任何数组参数添加值，而是会覆盖任何现有参数！**

另请注意，您的所有控制器都需要从具有此方法的控制器继承。

# android - 安卓多分辨率支持

> ID：14090125
> 
> 赞同：-1
> 
> 时间：2012-12-30T10:57:20.147
> 
> 标签：android, android-resources, android-resolution

我正在创建一个游戏，我需要为艺术家提供背景图像的 PIXEL SIZE，以便他可以在 photoshop/flash 中绘制它们。

我想支持大多数手机和平板电脑。

我需要多大的背景图片？到什么文件夹？

请（！）不要让我参考[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html) 它有很多信息，我无法在那里找到答案。

我只需要以像素为单位的背景图像大小（全屏）..

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T11:23:17.310

![表比较](../Images/1c410d4f9fb117a6cb576a5ae065f819.png)

这是典型分辨率的表格。**但是**，最佳做法是不要针对单个像素密度，因为在野外有大量的 Android 设备，并且都有不同的分辨率。因此，无论您在应用程序中生成/包含多少背景图像，总会有图像看起来很糟糕/失真的设备。您可以做的是选择填充屏幕边缘的背景颜色（或重复纹理），并在中间有一个居中的图像，由 Android 系统根据屏幕分辨率进行缩放。这样，无论设备的分辨率如何，您都将始终拥有清晰的“全屏”图像。

# asp.net-mvc-4 - 您必须调用“WebSecurity.InitializeDatabaseConnection”

> ID：14090126
> 
> 赞同：0
> 
> 时间：2012-12-30T10:57:23.303
> 
> 标签：asp.net-mvc-4, entity-framework-5, membership-provider

我在使用 [Authorize(Roles = "admin")] 属性时遇到问题。

```
[Authorize(Roles = "admin")]
    public ActionResult GetAllLocations()
    { 
```

我收到以下错误

> 在调用“WebSecurity”类的任何其他方法之前，您必须调用“WebSecurity.InitializeDatabaseConnection”方法。此调用应放置在站点根目录中的 _AppStart.cshtml 文件中。

我首先使用我自己的数据库使用 EF 5 代码构建了一个 MVC 4 应用程序。

一点背景：

*   我创建了一个从 MembershipProvider 继承的自定义会员提供程序

*   我在这个网站上看过很多关于这个问题的问题，但没有找到答案。

*   在一些答案中，我看到了如何禁用会员提供程序

像这样：

```
 <add key="enableSimpleMembership" value="false"/>
    <add key="autoFormsAuthentication" value="false"/> 
```

这就是我实现自定义会员提供程序的方式

```
 <membership defaultProvider="ATWMembershipProvider">
  <providers>
    <clear/>
    <add name="ATMMembershipProvider" type="AroundTheWorldWeb.Infrastructure.AuthenticationProvider.ATMMembershipProvider"
         enablePasswordRetrieval="false"
         enablePasswordReset="true"
         requiresQuestionAndAnswer="false"
         equiresUniqueEmail="false"
         maxInvalidPasswordAttempts="5"
         minRequiredPasswordLength="6"
         minRequiredNonalphanumericCharacters="0"
         passwordAttemptWindow="10" applicationName="myApplication" />
  </providers>
</membership>
<roleManager enabled="true" defaultProvider="AspNetSqlRoleProvider">
  <providers>
    <remove name="AspNetSqlRoleProvider" />
    <add name="AspNetSqlRoleProvider" type="WebMatrix.WebData.SimpleRoleProvider, WebMatrix.WebData, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
    <!-- note: WebMatrix registers SimpleRoleProvider with name
     'AspNetSqlRoleProvider'. I don't know why but i kept it. -->
  </providers>
</roleManager> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-29T18:11:21.797

我通过从模板创建 MVC 4 解决了这个问题。我认为选择空模板时没有加载一些 DLL。所以我从模板创建它并覆盖所有帐户的方法并且还实现了自定义成员和角色提供程序

# php - 没有得到图像

> ID：14090129
> 
> 赞同：0
> 
> 时间：2012-12-30T10:57:46.587
> 
> 标签：php, html

我试图通过标签获取图像文件名，但是当我通过 isset($_FILES['imgFile']) 检查它时，它总是返回 false。

这是我用于获取图像文件的 HTML 标记：

```
<input type="file" name="imgFile" accept="image/*" id="imgFile" src=""/> 
```

这是我的 php 代码来检索它：

```
if(isset($_FILES['imgFile']))
{
  $img = $_FILES['imgFile']['name'];
  echo $img";
}
else
{
  echo "Image not set";
} 
```

尽管我选择了图像，但它总是生成“图像未设置”作为输出。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T11:00:23.980

您是否在表单上使用了正确的编码类型？

```
<form enctype="multipart/form-data"> 
```

使用文件上传元素时，这是必需的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T11:02:57.647

只需使用：

```
enctype="multipart/form-data" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T11:25:55.120

说这是你的表格：

```
<form action="same_page.php" method="post" enctype="multipart/form-data">
    <input type="file" name="imgFile" accept="image/*" id="imgFile" src=""/>
    <input type="submit" name="upload" value="Upload" />
</form> 
```

并且您用于检索图像名称的 php 代码位于表单所在的同一页面中，那么您的代码应如下所示：

```
<?php
if (isset($_POST["upload"])) {
    if (isset($_FILES['imgFile'])) {
        $img = $_FILES['imgFile']['name'];
        echo $img;
    } else {
        echo "Image not set";
    }
}
?> 
```

但是如果您的php代码在另一个页面中，那么您只需要以`enctype="multipart/form-data"`其他答案中提到的形式使用。

# c# - windows phone 中的网格

> ID：14090133
> 
> 赞同：0
> 
> 时间：2012-12-30T10:58:40.747
> 
> 标签：c#, windows-phone-7, grid

如何仅使用 C# 在 windows phone 7 中获取主网格 (ContentElement) 而无需使用 this.contentPanel 从 XAML 获取它

换句话说，我正在开发一个库，它将向应用程序添加 UI 元素，并且我想在用户请求时将这些元素添加到主网格（我不希望用户将其作为参数传递给我，我想通过代码得到它）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T11:12:20.470

无论您可以在 XAML 中做什么，都可以在代码中执行。要通过代码驱动网格，您需要添加[列定义](http://msdn.microsoft.com/en-us/library/system.windows.controls.grid.columndefinitions.aspx)和[行定义](http://msdn.microsoft.com/en-us/library/system.windows.controls.grid.rowdefinitions.aspx)。然后，您可以将其他控件添加到 Grid [Children集合，并使用附加属性](http://msdn.microsoft.com/en-us/library/system.windows.controls.panel.children.aspx)[Grid.Row](http://msdn.microsoft.com/en-us/library/system.windows.controls.grid.row.aspx)和[Grid.Column](http://msdn.microsoft.com/en-us/library/system.windows.controls.grid.column.aspx)放置在适当的“单元格”中。

这是添加控件的代码示例：

```
TextBox txt=new TextBlock();
txt.Text="Hallo";
contentPanel.Children.Add(txt);
Grid.SetRow(txt, 0);
Grid.SetColumn(txt, 1); 
```

您也可以采用混合方法，通过在 XAML 中创建行/列定义，并在代码中添加控件。

# c# - 为函数指定的参数值无效。[ 参数 # = 1，函数名称（如果已知） = isnull ]

> ID：14090135
> 
> 赞同：3
> 
> 时间：2012-12-30T10:59:07.507
> 
> 标签：c#, c#-4.0, sql-server-ce, sql-server-ce-4

我想从列与给定参数匹配的表中进行选择。如果参数为空，我想从表中选择所有记录。下面的相关代码是引发此错误的原因。

```
 private static string _dbJobCreate = 
"CREATE TABLE Job (jID int primary key identity(1,1), jAddress nvarchar(64) not null);";

    private static string _dbJobSelect = 
"SELECT jID FROM Job WHERE jAddress = @jAddress OR @jAddress IS NULL";

    public static DataTable GetJobs(string jAddress)
    {
        SqlCeParameter pjAddress = new SqlCeParameter();
        pjAddress.ParameterName = "@jAddress";

        if (!string.IsNullOrEmpty(jAddress))
        {
            pjAddress.Value = jAddress;
        }
        else
        {
            pjAddress.Value = DBNull.Value;
        }

        return ExecuteDataTable(_dbJobSelect, pjAddress);
    } 
```

例外：`The specified argument value for the function is not valid. [ Argument # = 1,Name of function(if known) = isnull ]`

如何在 SQLCE 中有效地完成此操作而不会出错？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-20T15:51:39.693

您可以通过指定传递给查询的参数类型来避免此错误。所以你需要做的就是：

```
pjAddress.DbType = DbType.String; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T11:30:00.423

我的解决方案是从数据库中选择所有行，如果传入了参数，则过滤掉 .NET 中的行。如果有大量作业，这可能会变得很麻烦，尽管我想我会转移到真正的数据库如果发生这种情况。

```
private static string _dbJobSelect = "SELECT jID, jAddress FROM Job";

public static DataTable GetJobs(string jAddress)
{
    DataTable dt = ExecuteDataTable(_dbJobSelect);

    if (!string.IsNullOrEmpty(jAddress))
    {
        DataView dv = dt.DefaultView;
        dv.RowFilter = string.Format("jAddress = '{0}'", jAddress);
        dt = dv.ToTable();
    }

    return dt;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-14T08:03:37.010

您可以将其投射到`varchar`

```
SELECT jID FROM Job WHERE jAddress = @jAddress 
    OR cast(@jAddress AS varchar(4000)) IS NULL 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-21T14:41:08.413

我最近遇到了这个问题，发现我实际上并没有将查询参数添加到`IDbCommand`. 我不确定您的`ExecuteDataTable`方法是什么样的，但我的代码类似于以下内容（实例在哪里）`db`：`IDbConnection`

```
var sql = "SELECT jID FROM Job WHERE jAddress = @jAddress OR @jAddress IS NULL";
var cmd = db.CreateCommand();
cmd.CommandText = sql;
var param = cmd.CreateParameter();
param.DbType = DbType.String;
param.ParameterName = "@jAddress";
param.Value = string.IsNullOrEmpty(pjAddress) ? DBNull.Value : (object)pjAddress;
cmd.Parameters.Add(param);  // THIS WAS THE STEP I WAS MISSING!!!
// ... rest of the code to execute the query and load the results ... 
```

添加后`cmd.Parameters.Add(param)`，异常消失了。

# c++ - 避免插件中的单例在所有实例之间共享

> ID：14090141
> 
> 赞同：3
> 
> 时间：2012-12-30T11:00:32.187
> 
> 标签：c++, singleton

我正在构建一个将在主机中使用的插件。这个插件使用单例来提供我想在任何地方轻松访问的服务。当我多次实例化同一个插件时，问题就来了，同一个（静态）单例，特定于可运行，将在所有实例化插件中分片。一般来说，有没有一种方法可以减少单例 (c++) 的范围？由于每个插件本身就是一个实例，我显然可以将插件的根类传递给它的所有子类，但我希望尽可能保持相同的全局单例设计。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T11:29:48.390

有单身的理由吗？基本原理是当您需要强制只有一个，并且需要提供单点访问时。如果这些不是真正的要求，那么只需创建一个并在需要的地方传递它。

我会逐渐摆脱单身人士。

单身人士做了很多，还是不多？

您可能需要将其分成几部分。

如果它做的不多，只需将它传递到需要的地方，并摆脱它的单一性。

如果它提供大量服务，请为每个服务创建接口并将它们传递到需要它们的地方。您的设计将得到改进，变得更易于测试和理解。

起初，接口的实现可以委托给原始单例，但您希望最终使它们自包含。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T14:10:36.693

单例在内部使用静态变量。此静态变量的范围由源文件指定，在该源文件中它由当前可运行文件定义和分区。出于这些原因，在同一主机（然后是同一可运行对象）下运行时，两个插件（它们是相同的代码）确实共享相同的静态变量（并且扩展为相同的单例）。正如我们在这个问题中假设每个插件的代码相同，拆分这些单例的唯一方法是运行一个新的可执行文件。这可以使用 fork unix 命令来完成，例如两个进程都将拥有自己的内存范围。显然（正如你们大多数人评论的那样）在这种情况下避免使用单例是一种更好的方法，因为分叉一个进程只会增加无用的复杂性。

# java - 在 Linux 上安装 Java EE SDK 时出错

> ID：14090142
> 
> 赞同：2
> 
> 时间：2012-12-30T11:00:32.493
> 
> 标签：java, linux, installation, sh

我确实安装了 JDK，并将 $JDK_HOME/bin 放在我的 PATH 上。但是，我仍然无法安装 Java EE。你们能给我一些提示吗？谢谢。

```
dav@Bruno:~$ ls
[some stuff...]
33511405_3645.jpg               glassfish                      stuff
bea                             hplip-3.11.12-plugin.run       temp
bin                             hpscan001.png                  Templates
C03_08.txt                      java_ee_sdk-6u4-jdk7-linux.sh  Tomcat
c4c                             jdk1.7.0_10                   Ubuntu One
[some stuff2...]

dav@Bruno:~$ echo $PATH 
```

/home/dav/jdk1.7.0_10/lib:/usr/share/java:/home/dav/jdk1.7.0_10:/home/dav/jdk1.7.0_10/bin:/home/dav/Fluent.Inc/ **_** _ bin:/home/dav/bin:/usr/lib/lightdm/lightdm:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr /games:/home/dav/jdk1.7.0_10/lib:/usr/share/java

```
dav@Bruno:~$ sudo sh java_ee_sdk-6u4-jdk7-linux.sh

Could not locate a suitable jar utility.
Please ensure that you have Java 6 or newer installed on your system
and accessible in your PATH or by setting JAVA_HOME
dav@Bruno:~$ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T11:17:23.340

我认为您面临的问题是您正在查看的 PATH 变量是为用户“dav”设置的，但是因为您正在使用 sh 命令，PATH 更改为 root 的，这可能不会包含 JDK。

我认为您应该尝试显式设置 JAVA_HOME 环境变量，尝试运行：

```
sudo JAVA_HOME=/home/dav/jdk1.7.0_10 sh java_ee_sdk-6u4-jdk7-linux.sh 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-05T09:56:15.597

如果有人仍然对此感到沮丧：

（“找不到合适的 jar 实用程序。请确保您的系统上安装了 Java 7 或更新版本，并且可以在 PATH 中或通过设置 JAVA_HOME 访问”）

首先确保您没有使用“sudo”来安装 java ee。当您使用 sudo 时，您使用不同的环境（root，不一定具有相同的环境变量）。在这种情况下（ee 安装）不需要 sudo。

在其他需要 root 访问权限的情况下，请确保在系统级别设置所需的用户/系统变量，而不是（仅）在用户级别设置。

在系统级别而不是用户级别设置变量 在系统级别脚本中定义变量，即 /etc/profile 或 /etc/profile.d

否则，如果您没有使用 SUDO 尝试安装 jee，并且仍然存在“未设置 JAVA_HOME”问题，请尝试以下操作：

原因似乎是安装脚本找不到 JAVA_HOME 变量。因此调整 ~/.bashrc 来定义 JAVA_HOME。JAVA_HOME 当然要指向你的oracle java (se/jdk) 安装。如果你还没有安装它，那是第一件事。JAVA_HOME应该指向安装的根目录（而不是里面的bin目录），即：

```
 export JAVA_HOME=/usr/local/jdk1.7.1_02. 
```

下一个更改路径如下： PATH=$JAVA_HOME:$JAVA_HOME/bin:$JAVA_HOME/jre/bin:$PATH

*   保持信念
*   不要让挫折战胜你（也许会让你把它发泄在你的同事或亲人身上：o）
*   不要让压力积累太多。抽空看一段有趣的视频或
*   漫步到咖啡机前，或者与离你几张桌子的那个可爱的人聊天。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T11:09:11.910

您需要为“jar”可执行文件创建一个更新替代方案，例如：

> sudo update-alternatives --install "/usr/bin/jar" "jar" "/usr/lib/jvm/jdk1.6.0/bin/jar" 1

注意：您可能需要在您的情况下使用适当的路径。

# mysql - MySQL按用户获取订单总数和总数

> ID：14090145
> 
> 赞同：-2
> 
> 时间：2012-12-30T11:01:10.357
> 
> 标签：mysql, select, group-by

我有一个名为 orders 的表，我在其中存储有关用户订单的信息。

```
order_id    |   user_id |   amount
+++++++++++++++++++++++++++++++++++
1           |   1       |   100
2           |   1       |   200
3           |   2       |   200
4           |   3       |   100
5           |   3       |   100
6           |   4       |   500 
```

我想要的最终结果是用户的订单数量和这些订单的总价值。

所以在上述情况下，输出应该是这样的，

```
user_id     |   count   |   sum
+++++++++++++++++++++++++++++++++++
1           |   2       |   300
2           |   1       |   200
3           |   3       |   600
4           |   1       |   500 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-30T11:05:06.177

您在这里需要的是，`GROUP BY`就像`COUNT`这样`SUM`：

```
SELECT
  user_id,
  COUNT(User_id) Count,
  SUM(amount) Sum
FROM Orders
GROUP BY user_id; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/69783/2)

这会给你：

```
| USER_ID | COUNT | SUM |
-------------------------
|       1 |     2 | 300 |
|       2 |     1 | 200 |
|       3 |     2 | 200 |
|       4 |     1 | 500 | 
```

# jquery - jQuery if else not work on click

> ID：14090154
> 
> 赞同：2
> 
> 时间：2012-12-30T11:02:29.090
> 
> 标签：jquery, node.js

我一直试图让这个工作，但没有成功。该代码似乎在第一次单击时可以正常工作，但在几次单击后，它会随机输出两个 if 条件的次数。

在服务器端，我在 Node.js 上

```
var sys = require('sys');
var net = require('net');
var mqtt = require('mqttclient');

var io  = require('socket.io').listen(5000);
var client = new mqtt.MQTTClient(1883, '192.168.1.33', 'SERVER NODO');

io.sockets.on('connection', function (socket) {
  socket.on('subscribe', function (data) {
    console.log('Subscribing to '+data.topic);
    client.subscribe(data.topic);
  });

});

io.sockets.on('connection', function (socket) {

socket.on('publish', function (data){
console.log('publishing to '+data.topic);
client.publish(data.topic,data.payload);

});

});

//Sends to Web 
client.addListener('mqttData', function(topic, payload){
  sys.puts(topic+'='+payload);
  io.sockets.emit('mqtt',{'topic':String(topic),
    'payload':String(payload)});
}); 
```

在客户端，我有这个页面，它可以正确加载，第一个 if 块似乎很好，是我遇到麻烦的第二个块。我没有任何编程经验，但我正在努力学习！

已经尝试了不同的组合以使其正常工作（例如，在 if contition 之后单击 on，但结果相同。

```
<link rel="stylesheet" href="style2.css">
<script type="text/javascript" src="http://192.168.1.33:5000/socket.io/socket.io.js</script>
<script type="text/javascript" src="jquery-1.8.3.js"></script>
<script type="text/javascript">
  var socket = io.connect('http://192.168.1.33:5000');
$(document).ready(function(){
    socket.on('connect', function () {
      socket.on('mqtt', function (msg) {

        console.log(msg.topic+' '+msg.payload);

           var classe = 0;

                if (msg.topic == "uno"){

                  if (msg.payload == "a")
                     $('#button').addClass('on');
                      classe = 1;       
                  if (msg.payload == "b")
                     $('#button').removeClass('on');
              casse = 0;        

            }

            $('#button').on('click', function(){

                        if (classe == 1)){ 
                               classe = 3;
                               socket.emit('publish',{topic:"unor", payload:"off"});
                        }

                        if (classe == 0){
                               classe = 3;
                               socket.emit('publish',{topic:"unor", payload:"on"});

                        }
            }); 

}); 

 socket.emit('subscribe',{topic:"uno"});

});
</script>
<tbody>
        <section>
            <a href="#" id="button">&#xF011;</a>
            <span></span>
        </section>
</tbody> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T11:33:45.907

您的问题可能是**点击事件**尝试使用以下代码。

```
$('#button').off('click').on('click', function(){

      if (classe == 1)){ 
               classe = 3;
               socket.emit('publish',{topic:"unor", payload:"off"});
                      }

      if (classe == 0){
              classe = 3;
              socket.emit('publish',{topic:"unor", payload:"on"});
                     }
            }); 
```

我希望这对你有帮助。

# php - jQuery textarea 值不适用于空格和返回键

> ID：14090167
> 
> 赞同：0
> 
> 时间：2012-12-30T11:03:57.960
> 
> 标签：php, javascript, jquery, html

我正在将 PHP 与 jquery 一起使用。

我通过 jquery 命令获取 textarea 值：

```
$('#textarea_id').val() 
```

如果我在 textarea 中使用空格，例如`My Text`，它只会得到`My`.

如果我在我的文本区域中使用返回键，例如，

`My`

`Text`

它变得`MyText`

**编辑：**

它似乎`$('#textarea_id').val()`确实有效。

实际上，我正在使用类似的函数调用

```
func1(...,$('#textarea_id').val(),...); 
```

在 中`func1`，我有：

```
function func1(...,textarea_content,...) {
  $('#textarea_id').load('/test.php?textarea_content=' + textarea_content + ...);
} 
```

而且`test.php`我也抓住`textarea_content`了`$textarea_content = $_REQUEST['textarea_content'];`

如果我`echo $textarea_content`用于查看 textarea 内容。

的情况下`MyText`，就可以了。

万一`My Text`它将为空！

如果是

`My`

`Text`

这将是`MyText`

**解决方案：**

我找到了解决方案

[Jquery .val() 不在文本区域中返回换行符](https://stackoverflow.com/questions/5534928/jquery-val-not-returning-line-breaks-in-a-textarea)

解决方案是：`encodeURIComponent($('#textarea_id').val())`

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T13:30:27.503

我找到了解决方案

[Jquery .val() 不在文本区域中返回换行符](https://stackoverflow.com/questions/5534928/jquery-val-not-returning-line-breaks-in-a-textarea)

解决方案是：`encodeURIComponent($('#textarea_id').val())`

# javascript - 如何在 ul li jquerymobile jquery 或 javascript phonegap 中获取锚标记

> ID：14090172
> 
> 赞同：0
> 
> 时间：2012-12-30T11:04:14.923
> 
> 标签：javascript, jquery, jquery-mobile, html-lists, anchor

我在phonegap工作我想计算锚标签的主题这是我的代码
我只想计算li中锚标签中的主题b

```
<ul id='uSignUp' onclick="getlistitem()"  data-role='listview' data-inset='true' data-split-theme="d" data-theme="a">
            <li><a href='#'   rel="external">Accessing Your Needs</a>
            <a href="#" data-theme="b" id="A_an"  data-icon="check"> Accessing your needs status</a>
            </li>
            <li><a href='#' onclick="ToShowDF();"   rel="external">Develop Your Fitness</a>
            <a href="#"  data-theme="b" id="A_df"   data-icon="check"> Develop your fitness status</a>
            </li>
            <li><a href='#' onclick="ToShowPQ();"  rel="external">PAR-Q</a>
            <a href="#"  data-theme="d"  id="A_pq" data-icon="check"> PAR-Q Form</a>
            </li>
            <li><a href='#' onclick="ToShowLS();"  rel="external">Lifestyle Related Questions</a>
            <a href="#"  data-theme="d"  id="A_ls"  data-icon="check"> LifeStyle  status</a>
            </li>
           <li><a href='#' onclick="ToShowTNC();"  rel="external">Terms And Conditions</a>
            <a href="#"  data-theme="d"  id='A_Tnc' data-icon="check"> Terms and Conditions status</a>
           </li>
            <li><a href='#' onclick="ToShowIND();"  rel="external">Indemnity Declaration</a>
            <a href="#"  data-theme="d"  id='A_ind' data-icon="check"> Indemnity declaration status</a>
            </li>                
    </ul> 
```

当我在 firebug 中调试代码时，它会显示一个 div 和一个锚标记，并且在锚标记中有两个跨度，在第二个跨度上我需要那个。

谁能帮忙？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T11:58:20.967

```
var count = 0;
$('#uSignUp > li > a').each(function() {
    var theme = $(this).data("theme");
    if (theme != undefined && theme == 'b') {
        //console.log($(this).data("theme"));
        count++;
    }
})

alert(count);​ 
```

[小提琴](http://jsfiddle.net/Qrjkh/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T11:14:47.643

尝试：

```
var countB = $('#uSignUp [data-theme="b"]').length;

alert( countB ); 
```

***[小提琴演示](http://jsfiddle.net/hBz77/)***

# haskell - Haskell monad：词源与意义？

> ID：14090183
> 
> 赞同：6
> 
> 时间：2012-12-30T11:05:24.030
> 
> 标签：haskell, terminology, monads

当我对某个概念有所了解时，我发现无法看到概念名称的明显词源与我认为我对该概念的理解有何关联，这非常令人不满意。如果我看不到这种联系，我就会觉得这个名字试图传达一些我还没有发现的重要洞察力。

Monad：源自希腊语，意为统一。周一=一；ad = 包含一定数量的组或单元。这构成“由一个事物组成的组或单元”。

[http://www.haskell.org/haskellwiki/All_About_Monads](http://www.haskell.org/haskellwiki/All_About_Monads)说：

“monad 是一种根据值和使用这些值的计算序列来构建计算的方法。Monad 允许程序员使用顺序构建块来构建计算，这些构建块本身可以是计算序列。” ...“其他单子用于构建执行 I/O、具有状态、可能返回多个结果等的计算”

没有什么关于一体性的。

[http://www.haskell.org/haskellwiki/Monad](http://www.haskell.org/haskellwiki/Monad)声称 monad 一词的唯一性是指monad 将产生的*一个输出。*但是鉴于*任何*函数都会产生一个输出（并且上面的参考资料说“可能返回多个结果”，更不用说带外/错误结果），并且没有关于“组或单元”的任何内容，这种解释似乎没有说服力.

有更好的解释吗？

[编辑：回应“离题”标志。我的问题不是关于“monad”这个词本身的词源。它是关于 monad 的 Haskell 概念，以及 monad 这个词的根源如何告诉我们这个概念，或者实际上可能误导我们理解这个主题。鉴于 monad 在 Haskell 中是一个众所周知的难以沟通的概念，这当然是一个关于编程的问题。

受访者关于“monad”的根源如何与手头的主题相关的不同建议强化了这是一个突出的问题，包括观察到 Haskell 自己的文档中的解释是高度可疑的。

也就是说，我对给出的答案非常满意（谢谢！），所以不需要重新打开这个话题。但我主张不要将它移到别处，以便其他*对重要的 Haskell 概念*有同样困惑的人可以在这里找到它。]

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-30T11:17:05.977

> 有更好的解释吗？

简短的回答：不，真的没有。

稍微简短的回答：它几乎肯定与“monoid”有关，与“monad”的任何其他用途无关（至少有两个），而且这个词是在数学家聚会上创造的，所以甚至可能没有书面来源，这是该术语的第一次使用。

引用和引文[的更长答案：我在这里写的那个。](https://english.stackexchange.com/a/30661/10124)

顺便说一句，维基上关于所谓含义的说法对我来说似乎很可疑。

# string - 为什么将字符串指针转换为 void 指针并返回会导致字符串数据消失？(OpenCV)

> ID：14090184
> 
> 赞同：0
> 
> 时间：2012-12-30T11:05:50.453
> 
> 标签：string, pointers, opencv, void

我正在尝试创建一个函数，在一个地方为每个 OpenCV 窗口初始化我的所有鼠标处理程序。该代码在主循环中工作，但不在我的函数内（是的，我通过引用传递）。
问题似乎源于传递一个指向字符串的指针——当它从另一端出来时，它不会成功取消引用 (*)。是什么赋予了？

这是我正在谈论的一个极简主义示例（它为两个相同的窗口设置鼠标处理程序 - 一个窗口工作，另一个窗口不工作）：

```
// mouse problem.cpp : Defines the entry point for the console application.
#include "stdafx.h"
#include "opencv2/core/core.hpp"
#include "opencv2/imgproc/imgproc.hpp"
#include <opencv2/highgui/highgui.hpp>
#include <string.h>
#include <iostream>  //for cout, cin

using namespace std;
using namespace cv;

void onMouse(int event, int x, int y, int flags, void* param){ 

    string windowname = *((string*)param);  //just recasting the void* we passed into the mousehandler to string
    if(windowname.empty()){
        cout << "ERROR.";
    }else{
        cout << "SUCCESS for window:" << windowname;
    }
    cout <<  "  param: "<< param << " windowname: "<< windowname << "\n";
}

void initializer(const string& name){
        namedWindow( name, CV_WINDOW_AUTOSIZE );
        cout << " initializing mouse handler for " << name << " with string at address :" << &name << "\n";
        setMouseCallback(name, onMouse, (void*)&name);  //this line is exactly the same as the other setmousecallback line
}

int _tmain(int argc, _TCHAR* argv[]){
    string name; Mat src; VideoCapture cap(0);  cap >> src; // get a single frame from camera

    //this works just fine
    name = "frameA";
    namedWindow( name, CV_WINDOW_AUTOSIZE );
    cout << " initializing mouse handler for " << name << " with string at address :" << &name << "\n";
    setMouseCallback(name, onMouse, (void*)&name);

    //this fails even though it contains the same code and we pass by reference
    initializer("frameB");

    imshow("frameA",src);   imshow("frameB",src);  //display frame - mouseing over them triggers the OnMouse() event
    while(true){  //loop forever
        waitKey(30);
    }
    return 0;
} 
```

这[是](http://screencast.com/t/E0CyoDJVm)我将鼠标悬停在每个窗口一次后的结果。

真正**杀死**我的是，正如您在图片中看到的那样，字符串的地址被成功识别！并且将其转换为字符串没有错误！但是当我取消引用它时，它说它是空的！
是的，我确实尽量避免使用 Void*。可悲的是，我无法避免*空虚。OpenCV 要求 void*作为任何鼠标处理函数的最后一个参数 :(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T11:09:13.207

这个问题与演员表无关。您保留一个指向临时`string`对象的指针，并在对象超出范围后尝试取消引用该指针。

以下：

```
initializer("frameB"); 
```

相当于：

```
initializer(std::string("frameB")); 
```

换句话说，创建了一个临时对象，该函数获取并保留该临时对象的地址。由于临时变量在语句末尾消失，因此您留下了一个悬空指针。

# javascript - 如何使用主干停止在 touchstart 上触发的 touchend 事件

> ID：14090186
> 
> 赞同：0
> 
> 时间：2012-12-30T11:06:00.100
> 
> 标签：javascript, backbone.js, views, touch

我正在使用骨干编写一个应用程序，并且已经达到了一个完整的症结，并且似乎无法发现第二次在 touchstart 上触发了 touchend 事件。

我第一次点击“.slider” div 时一切正常。然而，当我第二次触摸屏幕移动幻灯片时，它会立即触发 touchend 功能 - 而不是等到 touchend 事件。是否有处理触摸事件和主干的特殊方法？

这是我的视图代码：

```
navigateTouch :function (event) {
    event.preventDefault();
    var xOrigPos = event.originalEvent.touches[0].pageX;
    var startPos = parseInt($('.slider', this.$el).css('margin-left'));
    var xPos = event.originalEvent.touches[0].pageX;
    var move;
    var stage = this.model.get('stage');
    var extraMargin = parseInt($('.graphic', this.$el).css('margin-right'));
    var movementSize = $('.slide', this.$el).width()+extraMargin;
    var narrativeSize = $('.graphic', this.$el).length;
    $('.slider', this.$el).on('touchmove', function (event) {
        event.preventDefault();
        xPos = event.originalEvent.touches[0].pageX;
        move = (xPos + startPos) - (xOrigPos);
        $('.slider', this.$el).css('margin-left', move);
    });
    $('.slider', this.$el).one('touchend', function (event) {
        alert('fires')
        event.preventDefault();
        $('.slider', this.$el).unbind('touchmove');
        if (xPos < xOrigPos) {
            stage ++;
            $('.slider', this.$el).animate({'margin-left': -(movementSize*stage)});    
        }
        if (xPos > xOrigPos) {
            stage --;
            $('.slider', this.$el).animate({'margin-left': -(movementSize*stage)})
        }
        this.model.set({'stage':stage});
        $('.progress', this.$el).removeClass('selected').eq(stage).addClass('selected');

    });
} 
```

我的观点在事件中是这样的：

```
events: {
    'click .controls':'navigateClick',
    'click .progress':'navigateProgress',
    'touchstart .slider':'navigateTouch'
} 
```

我的模板呈现了这个：

```
<div class="slide">
     <a href="#" class="button controls left">
     </a>
     <a href="#" class="button controls right">
     </a>
     <div class="slider clearfix">
          {{#each graphic}}
          <div class="graphic">
               <img src="{{image}}" alt="{{alt}}" title="{{graphicTitle}}"/>
          </div>
          {{/each}}
     </div>
     <div class="indicators">
        {{#each graphic}}
        <a href="#" class="button progress"></a>
        {{/each}}
    </div>
</div> 
```

我有一种感觉，这可能与我如何附加事件有关，但找不到任何关于使用主干在事件内部附加事件的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T21:52:41.477

解决了我自己的问题......哇！结果在 touchend 事件上触发警报会导致在单击“确定”按钮时调用另一个 touchstart 事件。仅在 iPhone 和 iPad 上......很奇怪。

# android - 如何在 Android 应用程序上获取 Yandex 流量源

> ID：14090189
> 
> 赞同：1
> 
> 时间：2012-12-30T11:06:04.227
> 
> 标签：android, maps, yandex-api

我对 Android 很陌生，我正在尝试从 yandex 的地图服务中获取交通信息。我需要的只是获取伊斯坦布尔总体交通状况的实时信息，因为它显示了地图“İstanbul Trafik Durumu 3\. derece 12.27 Yer yer yoğun, akıcı trafik”。

我不需要显示地图或其他东西。我阅读了文档，但没有找到明确的内容。你能给我一些建议吗？或者您能推荐其他服务来完成这项任务吗？

![在此处输入图像描述](../Images/573591677613f4d238540bd5ea4a6d56.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T13:25:49.563

好像我必须回答我自己的问题：s：D

我的一个朋友就这个问题给 Yandex 发了一封电子邮件，回复是：

（从土耳其语翻译成英语）

> 你好！
> 
> 感谢您对 Yandex 地图工具包 API 尚未带到土耳其的兴趣 ( [http://api.yandex.ru/mapkit/](http://api.yandex.ru/mapkit/) )
> 
> 但是您可以查看我们的 GitHub 个人资料以了解我们的软件，这可能会帮助您进行 iOS 和 Android 开发。( [https://github.com/yandexmobile/](https://github.com/yandexmobile/) )

# android - 使用 libgdx 绘制大背景图像 - 最佳实践？

> ID：14090190
> 
> 赞同：5
> 
> 时间：2012-12-30T11:06:11.347
> 
> 标签：android, performance, opengl-es, textures, libgdx

我正在尝试编写一个 libgdx livewallpaper（OpenGL ES 2.0），它将显示一个独特的背景图像（不可拆分为精灵）。

我想以平板电脑为目标，所以我需要以某种方式能够显示至少**1280x800**的背景图像，在其上还会发生更多动作，所以我需要它尽可能快地渲染。

现在我只有关于 libgdx 和 opengl es 的基本知识，所以我不知道解决这个问题的最佳方法是什么。

通过谷歌搜索，我发现了一些选项：

*   将纹理分割成更小的纹理。*大多数设备上的GL_MAX_TEXTURE_SIZE*似乎至少为 1024x1024 ，但我不想达到最大值，所以也许我可以使用*512x512*，但这并不意味着要绘制很多图块，在每一帧上重新绑定许多纹理 => 低性能?
*   libgdx 有[GraphicsTileMaps](http://code.google.com/p/libgdx/wiki/GraphicsTileMaps)，它似乎是自动绘制图块的工具。但它也支持我不需要的许多功能（将信息映射到图块），也许使用手动拆分会更好？

同样，这里的重点是我的性能 - 因为绘制背景预计是最基本的东西，更多的动画将在它之上！

随着平板电脑屏幕尺寸的增加，我预计很快我将需要能够舒适地渲染更大的图像尺寸:)

任何意见是极大的赞赏！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T14:00:19.173

许多平板电脑（和一些手机）支持 2048 纹理。将其绘制成一件将是最快的选择。如果您仍然需要 100% 确定，您可以在 GL_MAX_TEXTURE 恰好较小 (640x400) 时将背景分成 2 块。

“未来”表肯定会支持更大的纹理，所以不要太担心。

对于实际绘图，只需创建一个尽可能使用 VBO 的 libgdx 网格！;)

你没有提到的两件事对性能非常重要。纹理过滤器（如果您不进行像素完美映射，GL_NEAREST 是最丑陋的，但最快）和纹理格式（RGBA_8888 将是最好和最慢的，您可以将其降级直到满足您的需求 - 至少您可以删除 alpha，不是吗？）。

您还可以研究将大大降低填充率的压缩格式！

我建议您开始编写代码，然后调整性能。您遇到的这个特殊问题在以后并不难优化。

# objective-c - 在部分之间移动一行

> ID：14090194
> 
> 赞同：0
> 
> 时间：2012-12-30T11:06:55.650
> 
> 标签：objective-c, ios, uitableview

我的`moveRowAtIndexPath:toIndexPath`代码有问题。

当我在一个部分中移动单元格时它工作正常，但是当我尝试将一行从一个部分（比如 from `indexPath [1,1]`to `indexPath [2,0]`）移动到另一个部分时，我收到以下错误消息的崩溃：

> ***由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“无效更新：第 1 节中的行数无效。更新 (2) 后现有节中包含的行数必须等于其中包含的行数更新前的那个节 (2)，加上或减去从该节插入或删除的行数（0 插入，0 删除），加上或减去移入或移出该节的行数（0 移入，1搬出）。'

这是我的代码，如果两个 indexPaths 共享相同的节号，它可以正常工作：

```
- (void)moveRowAtIndexPath:(NSIndexPath *)indexPath toIndexPath:(NSIndexPath *)newIndexPath
{
    NSMutableArray *cells = [[self cellsAtSectionOfIndexPath:indexPath] mutableCopy];
    Cell *cell = [self dataAtIndexPath:indexPath];
    Cell *newCell = [self dataAtIndexPath:newIndexPath];

    if ([indexPath section] == [newIndexPath section])
    {
        [cells replaceObjectAtIndex:indexPath.row withObject:newCell];
        [cells replaceObjectAtIndex:newIndexPath.row withObject:cell];
        [self replaceCellsAtIndexPath:indexPath withCells:cells];
    }
    else
    {
        NSMutableArray *newCells = [[self cellsAtSectionOfIndexPath:newIndexPath] mutableCopy];
        [cells replaceObjectAtIndex:indexPath.row withObject:newCell];
        [newCells replaceObjectAtIndex:newIndexPath.row withObject:cell];
        [self replaceCellsAtIndexPath:indexPath withCells:cells];
        [self replaceCellsAtIndexPath:newIndexPath withCells:newCells];
    }

    [super moveRowAtIndexPath:indexPath toIndexPath:newIndexPath];
} 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T11:20:46.867

问题在于您的数据源。该错误意味着您正在从一个部分中删除一行，但是`numberOfRowsInSection:`当它应该返回旧数字减 1 时，该方法返回相同的数字。将行添加到另一个部分也是如此。

# ranking - 关键词排名

> ID：14090195
> 
> 赞同：3
> 
> 时间：2012-12-30T11:07:04.013
> 
> 标签：ranking, text-mining

我有一个从 95 个文档中提取的关键字列表。我想对它们的重要性进行排名，但我只有关键字出现的文档数量以及关键字在所有文档中的最大频率。我正在寻找一个可以提供帮助的排名公式。目前我正在使用**IDF**，但我想知道是否有更好的公式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T18:38:18.413

TF-IDF 绝对是一个很好的基础并且易于实现。

添加其他偏见也很常见，例如您的条款在文档中的位置；出现在文档开头的词，或者更好的是，出现在标题中的词往往比出现在中间或结尾的词更相关。

但是您必须记住，选择算法及其偏见还取决于文档的性质。例如，长文档（例如研究论文或书籍）需要位置偏差，但不一定是新闻文章。“IDF”度量也是如此，它必须在内容类型与您的文档相似的大型文档语料库上进行计算。如果您的文档是关于半导体的研究论文，您不希望在“电视和电影”语料库上计算相关性分数。

我的两分钱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T11:41:27.860

词频已经通过列出英语（和许多其他语言）中最重要的词来完成，[维基词频列表](http://en.wiktionary.org/wiki/Wiktionary%3aFrequency_lists)除了[电视和电影最常见的词](http://en.wiktionary.org/wiki/Wiktionary%3aFrequency_lists#TV_and_movie_scripts)和许多其他词外，还有许多基于[最重要和最热门词的列表类型。](http://en.wiktionary.org/wiki/Wiktionary%3aFrequency_lists#Top_English_words_lists)

如果你喜欢做一些基于单词排名的算法，我建议你不要远离 [TF-IDF](http://en.wikipedia.org/wiki/Tf%E2%80%93idf)

[在这里](http://en.wikipedia.org/wiki/Latent_semantic_indexing)你可以找到潜在语义索引算法，这对你来说可能是一种资产。

希望那是你所需要的。

# android - 从我的 android 应用程序访问我的 gmail

> ID：14090199
> 
> 赞同：1
> 
> 时间：2012-12-30T11:07:59.303
> 
> 标签：android, gmail

> **可能重复：**
> [如何从 gmail android 接收电子邮件](https://stackoverflow.com/questions/7146706/how-to-receive-email-from-gmail-android)

有没有办法将所有收到的消息从我的 gmail 获取到我的 android 应用程序。基本上，我想从 Gmail 帐户获取收到的邮件，如果我收到来自特定发件人的邮件，我将对邮件的内容执行一些操作。有可能这样做吗？如果是的话，你能告诉我从哪里开始吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T11:23:31.037

[Javamail-android](http://code.google.com/p/javamail-android/downloads/list)

[本教程非常有用](http://www.jondev.net/articles/Sending_Emails_without_User_Intervention_%28no_Intents%29_in_Android)

[类似的问题](https://stackoverflow.com/questions/2020088/sending-email-in-android-using-javamail-api-without-using-the-default-built-in-a)

要阅读未读邮件，您可以使用[gmail4j](https://github.com/spajus/gmail4j)

```
GmailClient client = new RssGmailClient();
GmailConnection connection = new HttpGmailConnection(LoginDialog.getInstance().show("Enter Gmail Login"));
client.setConnection(connection);
final List<GmailMessage> messages = client.getUnreadMessages();
for (GmailMessage message : messages) {
    System.out.println(message);
} 
```

# sql - 尝试将数据插入表中时出错

> ID：14090200
> 
> 赞同：0
> 
> 时间：2012-12-30T11:08:06.527
> 
> 标签：sql, insert, create-table

尝试将数据插入表时出现此错误。

> 列数与第 3 行的值数不匹配

这是我要插入的数据：

```
INSERT INTO shirts_link (adult, kids, babies, shirt_id, size_id, price_id) VALUES
    ('n','n','y','1','1','1'),('n','n','y','1','2','1'),('n''n','y','1','3','1'),('n','n','y','1','4','1'),
    ('n','n','y','1','5','1'),('n','n','y','1','6','1'),('n','n','y','1','7','1'),('n','n','y','1','8','1'),
    ('n','y','n','1','9','1'),('y','y','n','1','10','1'),('y','y','n','1','11','1'),('y','y','n','1','12','1'),
    ('y','y','n','1','13','1'),('y','n','n','1','14','2'),('y','n','n','1','15','3'),('y','n','n','1','16','4'),
    ('y','n','n','1','17','5'),

    ('y','n','n','2','10','6'),('y','n','n','2','11','6'),('y','n','n','2','12','6'),('y','n','n','2','13','6'),
    ('y','n','n','2','14','7'),('y','n','n','2','15','8'),('y','n','n','2','16','9'),('y','n','n','2','17','10'),

    ('y','n','n','3','10','11'),('y','n','n','3','11','11'),('y','n','n','3','12','11'),('y','n','n','3','13','11'),
    ('y','n','n','3','14','11'),

    ('y','y','n','4','10','12'),('y','y','n','4','11','12'),('y','y','n','4','12','12'),('y','y','n','4','13','12'),
    ('y','n','n','4','14','13'),('y','n','n','4','15','14'),

    ('y','y','n','5','10','15'),('y','y','n','5','11','15'),('y','y','n','5','12','15'),('y','y','n','5','13','15'),
    ('y','n','n','5','14','16'),('y','n','y','5','15','17'),

    ('y','y','n','6','10','18'),('y','y','n','6','11','18'),('y','y','n','6','12','18'),('y','y','n','6','13','18'),
    ('y','n','n','6','14','19'),

    ('y','y','n','7','10','20'),('y','y','n','7','11','20'),('y','y','n','7','12','20'),('y','y','n','7','13','20'),
    ('y','n','n','7','14','21'),

    ('y','n','n','8','10','22'),('y','n','n','8','11','22'),('y','n','n','8','12','22'),('y','n','n','8','13','22'),
    ('y','n','n','8','14','23'),

    ('n','n','y','9','5','24'),('n','n','y','9','6','24'),('n','n','y','9','6','24'),('n','n','y','9','7','24'),
    ('n','n','y','9','8','24'),('y','y','n','9','9','24'),('y','y','n','9','10','24'),('y','y','n','9','11','24'),
    ('y','y','n','9','12','24'),('y','y','n','9','13','24'),('y','n','n','9','14','25'),('y','n','n','9','15','26'),
    ('y','n','n','9','16','25'),

    ('n','n','y','10','1','1'),('n','n','y','10','2','1'),('n','n','y','10','3','1'),('n','n','y','10','4','1'); 
```

以下是表的设置方式：

```
CREATE TABLE shirts_link (
    adult VARCHAR(1) NOT NULL,
    kids VARCHAR(1) NOT NULL,
    babies VARCHAR(1) NOT NULL,
    shirt_id INT UNSIGNED NOT NULL,
    size_id INT UNSIGNED NOT NULL,
    price_id INT UNSIGNED NOT NULL,
    PRIMARY KEY (shirt_id,size_id,price_id),
    FOREIGN KEY (`shirt_id`) REFERENCES `shirts`(`id`),
    FOREIGN KEY (`size_id`) REFERENCES shirt_sizes(`id`),
    FOREIGN KEY (`price_id`) REFERENCES shirt_prices(`id`)
    )ENGINE=INNODB; 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T11:12:00.387

查看第 3 行的记录，您有这组值，

```
('n''n','y','1','3','1')
    ^ HERE 
```

在上面加一个逗号。

```
('n','n','y','1','3','1') 
```

它不会返回语法错误，因为它实际上是有效的。它只是*转义了单引号*。如果成功执行，将插入的值为

```
n'n 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T11:13:23.050

看起来你错过了一个逗号。

它应该是`('n','n','y','1','3','1')`

# iphone - 当我们有三个 UIViewControllers 时如何添加返回按钮

> ID：14090204
> 
> 赞同：0
> 
> 时间：2012-12-30T11:09:09.570
> 
> 标签：iphone, objective-c, uiviewcontroller, uinavigationcontroller, ios6

我正在从此[链接](http://www.appcoda.com/use-storyboards-to-build-navigation-controller-and-table-view/)学习导航控制器。

我已经按照这个链接创建了它。但是，现在我想要的是在第一个`UIViewController`之前添加一个，我将有一个按钮作为`My Recipe Book`. 当我单击此按钮时，我将看到示例中的第一个屏幕。当我看到第二个屏幕（其中我将有一个项目列表（示例中的屏幕 1））时，导航栏应该有一个后退按钮，就像我在第二个屏幕中的示例上方那样。

知道如何完成这项工作吗？

我尝试添加新的`UIViewController`和添加导航控制器并将其连接`UIViewController`到第一个`UIViewController`示例中`MODAL`。

它可以工作，但是我没有看到后退按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T11:33:24.080

我得到了答案……是的，我终于成功了……

我添加了新`UIViewController`的并将这个新链接`UIViewController`到已经存在的导航控制器。

早些时候：

```
Navigation Controller >> UIViewController 1 >> UIViewController 2 
```

我正在尝试的方法不起作用

```
Navigation Controller >> New UIViewController >> Navigation Controller >> UIViewController 1 >> UIViewController 2 
```

**以下是有效的**

```
Navigation Controller >> New UIViewController >> UIViewController 1 >> UIViewController 2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T10:37:42.503

使用...为每个视图控制器的 viewDidLoad 方法设置标题。

```
 [self setTitle:@"myViewController"]; 
```

如果导航栏被隐藏，则使用 ...... 使其可见

```
[self.navigationController setNavigationBarHidden:NO]; 
```

# jquery - 如何声明变量scrollTop

> ID：14090207
> 
> 赞同：1
> 
> 时间：2012-12-30T11:09:48.927
> 
> 标签：jquery

我有这个功能。

```
$(".link").click(function(){
            var page = $(this).attr("id");
            var color = $(this).attr("class");
            var height = $(this).attr("class");
            var scrolltop = 100;
            color = color.substr(5,6);
            height = height.substr(12,6);
            $('#all_pages').animate({left: (page-1)*(-650) }); 
            $("body").animate({backgroundColor: '#'+color});
            $('html, body').animate({scrollTop: scrolltop}, 'slow');
            $("#container").animate({height: height});
            $("#all_pages").animate({height: height});
            $("#menu ul li").removeClass('active');
            $(this).addClass('active'); 
        }); 
```

和这些链接：

```
<div id="menu">
            <ul>
                <li id="1" class="link 99CCCC 0620px 0000px active">Home</li>
                <li id="2" class="link FF9933 0890px 0200px">Services</li>
                <li id="3" class="link 66FFCC 1265px 0210px">Tourism</li>
                <li id="4" class="link 99FF99 1580px 0220px">Prices</li>
                <li id="5" class="link FF9999 0485px 0230px">Ask question</li>
                <li id="6" class="link 00CCFF 0450px 0240px">Partners</li>
                <li id="7" class="link EBF291 0450px 0250px">FAQ</li>   
                <li id="8" class="link FFFF66 0850px 0260px">Contact Us</li>                            
            </ul>
        </div> 
```

从链接我得到背景的颜色，页面的高度。我也想获取页面上位置的信息，但我不知道如何获取变量的值--- `var scrolltop`。

谁能帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T11:23:40.067

您可以使用`data-*`属性来保存自定义属性的值。

利用

```
<li data-page="1" data-color="99CCCC" data-height="620" data-position="0" class="link active">Home</li> 
```

代替

```
<li id="1" class="link 99CCCC 0620px 0000px active">Home</li> 
```

用于`.data()`从 JavaScript 获取属性。

```
$(".link").click(function() {
    /* cache the selector */
    var $this = $(this);
    /* Get the properties */
    var page = $this.data("page");
    var color = $this.data("color");
    var height = $this.data("height");
    /* I suppose this is what you wanted */
    var scrolltop = $this.data("position");
    ...
});​ 
```

* * *

如果通过单击每个`<li>`应该将视口滚动到另一个元素所在的页面中的某个位置。然后你可以得到那个元素的位置并在那里滚动而不是硬编码这些值。

例如，

您想滚动到`id`设置为的元素`home`。

```
<div id="home"> 
```

将`data-position`属性设置为它的选择器，`#home`.

```
<li data-page="1" data-color="99CCCC" data-height="620" data-position="#home" class="link active">Home</li> 
```

使用选择器获取元素，使用它获取它的位置[`.offset()`](http://api.jquery.com/offset/)并滚动到它。

```
var $target = $($this.data("position"));
var scrolltop = $target.offset().top;
$('html, body').animate({ scrollTop: scrolltop }, 'slow'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T11:29:41.273

在唯一的情况下，您无法更改 HTML 结果：
用于`.split(' ')`从 attr 类中检索数据并且您不需要 'px' 和前导*零*，因此请使用`parseInt`.

## [jsBin 演示](http://jsbin.com/ewiweb/1/edit)

```
$(".link").click(function(){

  var myClass   = $(this).attr("class").split(' '); // split class
  var color     = myClass[1];
  var height    = parseInt( myClass[2] , 10);
  var scrolltop = parseInt( myClass[3] , 10); 

  alert( color+' '+height+' '+scrolltop );

}); 
```

在所有其他情况下，使用`.data()`@Alexander 建议的属性

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-30T11:21:54.293

您可以使用此代码获得职位

```
$(this).offset().top; 
```

您可以在此链接上找到有关此功能的更多信息

[http://api.jquery.com/offset/](http://api.jquery.com/offset/ "。抵消（）")

我希望这会很有用。

# ruby-on-rails-3 - 载波 + s3 + 雾（Excon::Errors::SocketError）

> ID：14090210
> 
> 赞同：8
> 
> 时间：2012-12-30T11:10:26.723
> 
> 标签：ruby-on-rails-3, amazon-s3, carrierwave, fog

我目前收到以下错误：`Excon::Errors::SocketError - Broken pipe (Errno::EPIPE)`上传大于约 150kb 的图像时。150kb 以下的图像可以正常工作。研究表明其他人也遇到过这个问题，但我还没有找到解决方案。

**错误信息**

```
Excon::Errors::SocketError at /photos

Message Broken pipe (Errno::EPIPE)
File    /Users/thmsmxwll/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/openssl/buffering.rb
Line    375 
```

**image_uploader.rb**

```
class ImageUploader < CarrierWave::Uploader::Base
  include CarrierWave::RMagick

  storage :fog

  include CarrierWave::MimeTypes
  process :set_content_type

  def store_dir
    "uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}"
  end

  version :large do
    process :resize_to_limit => [800, 600]
  end
end 
```

**载波.rb**

```
CarrierWave.configure do |config|
  config.fog_credentials = {
    :provider               => 'AWS',
    aws_access_key_id: ENV['AWS_ACCESS_KEY_ID'],                        
    aws_secret_access_key: ENV['AWS_SECRET_ACCESS_KEY'],
    :region                 => 'us-east-1'
  }
  config.fog_directory  = 'abcd'                   
  config.fog_public     = true                                  
  config.fog_attributes = {'Cache-Control'=>'max-age=315576000'}
end 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-09-12T03:20:19.737

对我来说，该解决方案需要我在美国标准区域重新创建存储桶。最初，存储桶位于俄勒冈州地区，虽然我没有在载波设置中指定地区，但即使文件非常小，我也无法完成上传。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T14:54:02.257

我有同样的问题，我注意到只有在我上传大文件（400kb）时才会发生，而较小的文件（100kb）它工作正常。

# github-api - Github Repo 信息中的参数大小是什么意思

> ID：14090214
> 
> 赞同：5
> 
> 时间：2012-12-30T11:11:07.050
> 
> 标签：github-api

我正在使用 Github API 来获取 repo 信息。在那里有一个参数'size'，它没有写在github api文档中它的确切含义。它是提交到存储库的代码行的大小（以字节为单位）吗？

在这里您可以看到返回的响应中的 size 参数 [http://developer.github.com/v3/repos/](http://developer.github.com/v3/repos/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-30T13:00:12.200

考虑到命令是针对完整仓库（list、get、edit、...）的，它应该引用该仓库中元素的完整大小，如“[**在克隆之前查看 github 仓库的大小？**](https://stackoverflow.com/a/8679592/6309) ”中所述。

它似乎**在 Kb 中**：

*   [对于像示例 repo "HelloWorld"](https://api.github.com/repos/octocat/Hello-World)之类的小型 repos : `"size": 140,`: 一旦我克隆它，它就会在我的硬盘上注册，略低于 140 Kb，
*   对于更大的存储库（例如[git](https://api.github.com/repos/git/git)存储库本身，超过 40Mo: `"size": 40844,`）。

* * *

更新（2013 年 2 月，来自[nulltoken](https://stackoverflow.com/users/335418/nulltoken)的[评论](https://stackoverflow.com/questions/14090214/what-does-the-parameter-size-mean-in-github-repo-information/14090905#comment20574555_14090905)）

答案“[在克隆之前查看 github 存储库的大小？](https://stackoverflow.com/a/8679592/6309) ”确认[git 替换对象](http://git-blame.blogspot.fr/2012/08/bringing-bit-more-sanity-to-alternates.html)的大小以 Kb 为单位。

> 针对裸存储库的磁盘使用不考虑共享对象存储，因此通过 API 调用返回“不完整”值。

# python - redis redis.client rq 队列 job.result # => None

> ID：14090215
> 
> 赞同：0
> 
> 时间：2012-12-30T11:11:08.887
> 
> 标签：python, redis, python-rq

我试图弄清楚 rq 使用 redis 排队。我有简单的 test_job 函数，我想在队列中使用它。

```
def test_job():
    return "OK" 
```

脚本主要取自 rq 文档：

```
#!/usr/bin/env python

import redis.client
from rq import Queue
import time

from helpers import test_job

def main():

    q = Queue(connection=redis.client.Redis('localhost',6379)) 

    job = q.enqueue(test_job)
    print job.result   # => None

    while not job.result:
        time.sleep(2)
        print job.result   # => None

if __name__ == "__main__":
    main() 
```

问题是我没有离开while循环。job.result 仍然没有。但是，根据日志，redis 连接似乎有效：

```
[1279] 30 Dec 12:08:20.041 - 0 clients connected (0 slaves), 612560 bytes in use
[1279] 30 Dec 12:08:21.371 - Accepted 127.0.0.1:58541
[1279] 30 Dec 12:08:25.337 - DB 0: 23 keys (0 volatile) in 32 slots HT.
[1279] 30 Dec 12:08:25.337 - 1 clients connected (0 slaves), 633664 bytes in use 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T11:41:46.270

您是否启动了工作人员来处理任务？

看起来没有工作人员正在运行（因为只有您的客户端连接到 Redis）。`rqworker`从项目的根目录运行。

# .htaccess - 是否可以将 /mystring_value/ 重写为 ?parameter=value？

> ID：14090217
> 
> 赞同：0
> 
> 时间：2012-12-30T11:11:30.887
> 
> 标签：.htaccess, mod-rewrite

可以重写此 URL：

```
http://wwww.mywebsite.com/number_one/ 
```

到这个网址：

```
http://www.mywebsite.com/?n=one 
```

在.htaccess 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T11:21:41.810

我猜你想用[mod_rewrite](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)来做这件事。在这种情况下，您需要的是`RewriteCond`匹配查询字符串：

```
RewriteCond %{QUERY_STRING} ^n=([^&]+)
RewriteRule ^$ number_%1? 
```

（`?`末尾的`RewriteRule`告诉 mod_rewrite 丢弃旧的查询字符串。）

另请注意，正如所写，这是一个内部重写。如果您希望更改对用户可见，请将标志`[R]`（或者`[R=301]`如果您想要永久重定向）附加到`RewriteRule`.

* * *

**编辑：**如果你想走另一条路，从`site.com/number_one`你`site.com/?n=one`的问题现在读到的，它更容易：

```
RewriteRule ^number_([^/]+) ?n=$1 
```

（如所写，此重写规则将丢弃数字后面的第一个斜杠之后的任何内容，以及任何现有的查询字符串参数。如果需要，您可以通过将`[QSA]`标志添加到规则来保留原始查询字符串。）

# c# - LINQ 从多行的条件中选择一个布尔值

> ID：14090234
> 
> 赞同：3
> 
> 时间：2012-12-30T11:14:01.147
> 
> 标签：c#, .net, linq

我有数据系列，其中每个成员都包含一些元素，并且每个元素都有浮点变量 D 表示 OADate（excel 格式）中的日期。我需要找出是否有任何系列与“邻居”相交。所以结果是一个布尔值。有没有办法在 LINQ 中做到这一点？这是我当前的工作代码

```
 bool overlaps = false;
        for (int i = 0; i < series.Count-1; i++) {
            if (series[i].elements.Last().D > series[i + 1].elements.First().D) {
                overlaps = true;
                break;
            }           
        } 
```

谢谢 ：-）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T11:22:23.037

```
series.Skip(1)
      .Where((s,i) => series[i].elements.Last().D > s.elements.First().D).Any(); 
```

说明：因此我们跳过了第一个元素，然后`series[i]`实际上将与`series[i]`您的示例中的相同，并且`s`将是 index 处的项目`series[i+1]`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T11:25:15.637

```
series.Zip(series.Skip(1).Concat(series.Take(1)), (a, b) => 
        new { a = a, b = b })
       .Any(c=>c.a.elements.Last().D > c.b.elements.First().D); 
```

以自身四舍五入的方式进行压缩`series`，然后将主项`series`与旋转项中的对应项进行比较！

# windows - 从服务运行时 WinHttpSendRequest 失败

> ID：14090236
> 
> 赞同：0
> 
> 时间：2012-12-30T11:14:31.593
> 
> 标签：windows, winapi

我正在尝试从作为服务运行的我的程序中调用 WinHttpSendRequest。该函数失败并出现错误 12029。如果我正常运行它（不是作为服务），则该函数成功。我知道 WinInet 不应该在服务中使用，但我认为 WinHttp 应该可以正常工作。

有任何想法吗？

# mysql - 像片段一样缓存 activerecord 结果

> ID：14090241
> 
> 赞同：0
> 
> 时间：2012-12-30T11:14:47.490
> 
> 标签：mysql, ruby-on-rails, memcached

在我看来，我做了很多这样的事情：

```
<% cache("sports_menu_" +session[:lang], {:expires_in => 60.minutes}) do %>
...... # a load of stuff
<% end %> 
```

但是，我发现很多时间都花在查询数据库以获取不经常更改的数据。**有没有办法以类似的方式缓存这些数据？**

例如：

```
Model.find(:all, :select => "only a few fields", :conditions => "nasty conditions", :include => "some joins", :order => "date_time desc") 
```

这大约需要 7 秒，主表保存了大约 20M 条记录。许多用户点击了这个特定的操作，查询只运行一次/点击。但是将其缓存几分钟是有意义的，这样对其他人来说，它将从缓存中加载。顺便说一句，我正在使用内存缓存。

我无法缓存整个操作，因为有时会更改某些参数以及视图中的某些特定于语言环境的代码。

我考虑过将其移至视图级别，但对此感觉不太舒服，这会破坏使用 Rails 的意义。

蒂亚！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T11:22:53.190

在我看来[ActiveRecord::Cache::Store](http://api.rubyonrails.org/classes/ActiveSupport/Cache/Store.html)就是你想要的。你可以像[这样](https://stackoverflow.com/questions/11218917/confusion-caching-active-record-queries-with-rails-cache-fetch)使用它。

# jar - 将 jruby 宝石包装在独立的罐子中

> ID：14090243
> 
> 赞同：2
> 
> 时间：2012-12-30T11:15:10.240
> 
> 标签：jar, gem, jruby, sass, warbler

我正在尝试将 compass/sass 打包到一个独立的 jar 中，这样我就可以在不安装 jruby 的情况下使用 compass。

我在运行 Java 1.6.0_37 的 Windows7 机器上安装了 jruby 和 warbler

我创建了一个文件夹，将其命名为 jrcompass，然后将 compass 安装到其中，即

```
jruby -S gem install compass -i . 
```

然后我跑进去：

```
jruby -S warble 
```

它创建了一个名为 jrcompass.jar 的文件，大小约为 20MB。到目前为止，一切都很好。

问题是当我尝试执行 jar 时，我收到一条错误消息（如下）。从错误看来，jruby.home 没有设置，所以我将它作为命令行中的属性传递并且有效，但这违背了拥有独立 jar 的目的。

如果我尝试通过。作为 jruby.home 然后我得到一个错误，它找不到 ruby​​gems

任何帮助，将不胜感激。TIA。

```
C:\Apps\test\jrcompass>java -jar jrcompass.jar 
```

Gem::LoadError: 在 jar:file:/C:/Users/Admin/AppData/Local/Temp/jruby9093955264697226808extract/jruby-stdlib-1.7 的 [rake-0.9.2.2] to_specs 中找不到指南针 (>= 0)。 1.jar!/META-INF/jruby.home/lib/ruby/shared/rubygems/dependency.rb:247 to_spec at jar:file:/C:/Users/Admin/AppData/Local/Temp/jruby9093955264697226808extract/jruby- stdlib-1.7.1.jar!/META-INF/jruby.home/lib/ruby/shared/rubygems/dependency.rb:256 gem at jar:file:/C:/Users/Admin/AppData/Local/Temp/ jruby9093955264697226808extract/jruby-stdlib-1.7.1.jar!/META-INF/jruby.home/lib/ruby/shared/rubygems.rb:1231（根）在文件：/C:/Apps/test/jrcompass/jrcompass。 jar!/jrcompass/bin/compass:22 在 org/jruby/RubyKernel.java:1046 (root) 处加载：/C:/Apps/test/jrcompass/jrcompass.jar!/META-INF/main.rb: 1 要求 org/jruby/RubyKernel.java：1027 (root) at file:/C:/Apps/test/jrcompass/jrcompass.jar!/META-INF/main.rb:1 (root) at jar:file:/C:/Users/Admin/AppData/Local /Temp/jruby9093955264697226808extract/jruby-stdlib-1.7.1.jar!/META-INF/jruby.home/lib/ruby/shared/rubygems/custom_require.rb:1

# php - 公共服务器上的 PHP geoplugin 失败

> ID：14090244
> 
> 赞同：0
> 
> 时间：2012-12-30T11:15:12.687
> 
> 标签：php, geolocation

```
$location  = "http://www.geoplugin.net/php.gp?ip=115.67.131.206";
$geoplugin = unserialize(file_get_contents($location));
$country   = $geoplugin['geoplugin_countryName'];
$city      = $geoplugin['geoplugin_city']; 
```

我在 IIS 上运行上述 PHP 代码（来自 Geoplugin 的示例），它运行良好，返回国家和城市；但是，当从公共托管服务器运行时，不会返回任何内容，也不会显示错误。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T11:24:49.023

在你的服务器上找到 php.ini 然后寻找 allow_url_fopen 让它

```
allow_url_fopen = On 
```

请让我们知道这是否解决了您的问题或其他问题

# mono - 为什么 atmel 处理器上的单声道不能很好地与 LayoutKind.Explicit 配合使用？

> ID：14090247
> 
> 赞同：1
> 
> 时间：2012-12-30T11:15:55.613
> 
> 标签：mono, arm, atmel, layoutkind.explicit

我创建了一个如下结构：

```
[StructLayout(LayoutKind.Explicit, Pack = 1)]
    public class NodRecord
    {
        [FieldOffset(0)]
        public ushort Driver;

        [FieldOffset(2)]
        public ushort BaudRate;

        [FieldOffset(4)]
        public ushort EnquiryInterval;

        [FieldOffset(6)]
        public byte Protocol;

        [FieldOffset(7)]
        public ushort Delay;

        [FieldOffset(9)]
        public NodIPAddress IP_Addr_Other;

        [FieldOffset(13)]
        public ushort IP_Port_Other;

        [FieldOffset(15)]
        public ushort IP_Port_Own;

        [FieldOffset(17)]
        public ushort Application;
    } 
```

然后我用下面的代码阅读了它：

```
 readBuffer = reader.ReadBytes(sizeType);
 handle = GCHandle.Alloc(readBuffer, GCHandleType.Pinned);
 nodes = (NodRecord)Marshal.PtrToStructure(handle.AddrOfPinnedObject(), typeof(NodRecord));
 handle.Free(); 
```

我想知道在 x86、x64 和 cortex arm 处理器中一切正常，但在 Atmel ARM9 AT91SAM9G20 上的`ushort`变量我得到了错误的值，例如第一个和第三个下一个字节值替换而不是第一个和第二个下一个字节，但是对于字节值一切都很好

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T09:05:56.733

一些旧的 ARM 处理器（以及一些新的，取决于它们的配置和操作系统）在涉及任何未对齐的地址时有一个错误的概念：它们不会出错，也不会在指定的地址加载值。他们所做的是（我忘记了细节）某种无意识的旋转或地址对齐，以便数据的输出与您（或其他任何人）所期望的不同。Mono 不能很好地处理这种情况（这意味着要为所有表现良好的情况减慢代码速度，因此我们做出了权衡，让几乎每个人都能享受速度，而少数人处理边缘情况）。您有两种可能的解决方案：

# c# - ASP.NET - 请求排队和请求被拒绝

> ID：14090252
> 
> 赞同：1
> 
> 时间：2012-12-30T11:17:09.347
> 
> 标签：c#, asp.net, performance, performancecounter

我正在运行 ASP.NET 服务。服务在高负载下开始返回 - “服务不可用 - 503”。

以前它能够应对这些负载，我仍在调查为什么现在会发生这种情况。

我看到请求拒绝率很高（通过 ASP.NET 性能计数器）；但是，请求排队率（通过 ASP.NET 性能计数器）因部署而异，从 1 到 150。对于某些显示高请求拒绝率的部署，我可以将其与高请求排队率相关联。但是，对于某些部署，排队的请求很少 - 1-5，但请求拒绝率很高。

我在这里错过了什么吗？有关如何进一步调查此问题的任何指示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T11:31:54.173

我会用探查器偷看一下，看看你是否在其他你以前没有的领域得到了负载，比如同步数据库和网络调用。

查看 newRelic（使用简单）并找出瓶颈，因此简单的代码更改可能会帮助您摆脱当前的漏洞。

展望未来，使代码库更加异步（如果还没有的话）。

# php - 如何让搜索引擎索引动态生成的页面

> ID：14090256
> 
> 赞同：4
> 
> 时间：2012-12-30T11:17:49.623
> 
> 标签：php, mysql, .htaccess, dynamic, sitemap

我正在尝试创建一个博客..对于每个条目，我都有一个名为 entry.php 的模板页面，我通过从我的主页创建一个链接来创建页面，如下所示

```
mywebsite.com/entry.php?title=My Title&content=This is my blog 
```

这个链接被传递给entry.php，并根据我写的链接动态生成一个页面，但搜索引擎不会索引这些。

我真的必须为我创建的每个条目创建一个独特的页面吗？

像 youtube 这样的网站是否对每个视频都有单独的页面，或者它们是否像我试图做的那样动态生成。如果是这样，视频如何显示在搜索结果中？

我听说可以使用名为 .htaccess 或 sitemap.xml 的东西，但我不知道它们是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T11:22:47.740

### 学习关于`.htaccess`

有很多生成器`.htaccess`，您可以使用其中之一。最好的办法是，使用`.htaccess`文件，以这种方式创建路径：

```
mywebsite.com/entry.php?title=My Title&content=This is my blog 
```

将它们更改为：

```
mywebsite.com/My Title/This is my blog 
```

相同的代码是：

```
RewriteEngine On
RewriteRule ^([^/]*)/([^/]*)\.html$ /entry.php?title=$1&content=$2 [L] 
```

### 提供生成器的网站：

*   [.htaccess 重定向](http://www.generateit.net/mod-rewrite/)
*   [Mod重写生成器](http://www.webmaster-toolkit.com/mod_rewrite-rewriterule-generator.shtml)
*   [搜索引擎优化工具 » mod_rewrite 重写器生成器](http://www.htaccessredirect.net/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T11:24:11.267

只要页面**从*某个地方***链接到，搜索引擎就会找到该页面。页面是如何生成的并不重要。链接是一个 URL，当请求此 URL 时，浏览器或任何其他客户端（包括搜索引擎）会收到页面内容、句号。它像任何其他常规页面一样工作，搜索引擎不知道也不关心幕后发生了什么来生成这个页面。

# macos - 从 .o 制作动态库时出错

> ID：14090257
> 
> 赞同：-1
> 
> 时间：2012-12-30T11:17:56.230
> 
> 标签：macos, linker, dylib

我正在尝试从一组 .o 文件中创建动态库，但是当我这样做时

> gcc -dynamiclib -current_version 1.0 mymod.o -o mylib.dylib

或者

> ld *.o -o mylib.dylib

我收到很多错误，例如：

> “_objc_msgSend”，引用自：-[NSObject(NSObject_SBJSON) JSONFragment] in NSObject+SBJSON.o
> 
> “operator new(unsigned long)”，引用自：MStatistic.o 中的 MStatistic::instance() StatisticObserver.o 中的 StatisticProfileLoggingObserver::instance()
> 
> ld：未找到架构 x86_64 的符号

你能帮我吗，如何解决它并获得我的.dylib？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T11:24:09.350

您可以将`-undefined dynamic_lookup`选项传递给`ld`, or:
`-Wl,-undefined -Wl,dynamic_lookup`to `gcc`or `clang`（将其传递给链接器）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T11:23:07.007

从这一行：

```
ld: symbol(s) not found for architecture x86_64 
```

听起来您正在构建一些库，这些库具有仅针对 32 位体系结构构建的文件。

您需要修改您正在构建的*所有*库/框架的 makefile 以构建 32 位和 64 位；实际上，所有出厂的 MacOS 机器都支持 64 位，因此***只***为 64 位构建可能是安全的。

在您的编译/链接行中，添加如下内容：“ `-arch x86_64`”，这应该为 64 位端编译东西。要同时执行 32 位和 64 位，您基本上需要使用自己的“ `-arch i386`”和“ `-arch x86_64`”行复制编译和链接行。

# ruby-on-rails - 如何为“查看已购买字段”提供 CanCan 能力？

> ID：14090267
> 
> 赞同：-1
> 
> 时间：2012-12-30T11:20:34.957
> 
> 标签：ruby-on-rails, devise, cancan

我正在建立一个人们可以在线购买和观看视频的网站。付费用户会看到视频，其他用户只会看到描述和立即购买按钮。

有一个“订单”模型，其中“LineItems”指向视频。

我正在使用“视频”资源，与 CanCan 一起设计身份验证。购买视频的人具有“客户”角色。

用户完成支付后，订单*状态*变为已*完成*。所以我需要一种方法来检查当前用户是否购买了视频，并显示它。虽然这可以在 Controller 中完成，但有没有办法在 CanCan 中完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T15:08:53.413

这就是我解决它的方法：

向用户模型添加了“purchased_videos”方法，代码如下。

```
def purchased_videos
  Video.joins(:line_items => {:order => :user}).where(:orders => {:user_id => self, :status => 'successful'})
end 
```

在ability.rb 中，添加以下代码：

```
# Free videos can be watched by anyone
can :watch, Video do |video|
  video.price == 0 || user.purchased_videos.exists?(video.id)
end 
```

现在我可以在视频视图中做这样的事情：

```
# Show video if user can watch it
render 'video_partial' if can?(:watch, @video)

# Show preview otherwise
render 'preview_partial' if cannot?(:watch, @video) 
```

# css - div 后面的 SwfObject

> ID：14090272
> 
> 赞同：1
> 
> 时间：2012-12-30T11:21:33.290
> 
> 标签：css, jwplayer, swfobject

这个问题可能已经被问过很多次了，但我认为仍然有很多因素会影响解决方案的工作

我这里有一个网站

[http://www.radioali.com/valy-mikham-toro-bebinam-video_51e244dc3.html](http://www.radioali.com/valy-mikham-toro-bebinam-video_51e244dc3.html)

站点的标题是静态的。如果您注意到向上滚动页面，则除了视频之外的所有内容都可以正常滚动。它永远不会落后于标题 div。

这是 Flash 播放器的问题，使用 wmode 可以解决此问题。我试过设置不透明和透明但没有结果。

有人可以建议我如何使 flash 对象正常运行并在标题 div 后面滚动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T11:24:54.593

只需将 z-index 更改为 0

所以

```
#video-wrapper {
  position: relative;
  z-index: 4999;
} 
```

将会

```
#video-wrapper {
  position: relative;
  z-index: 0;
} 
```

# android - 从异步任务发送广播

> ID：14090287
> 
> 赞同：10
> 
> 时间：2012-12-30T11:23:41.300
> 
> 标签：android, android-asynctask

我有一个做某事的异步任务，当它完成时，我希望它广播它已经完成。

通常我会这样做：`context.sendBroadcast(new Intent(MYINTENT));`但是 asynctask 没有上下文。我已经看到这个问题的一些答案，建议将应用活动上下文的引用发送到异步任务。但是如果用户旋转屏幕，这个参考是不好的。并且手动维护引用是一个糟糕的解决方案（创建异步任务的活动需要太多，我无法控制）。现在的问题是：

1）为什么android是这样设置的？当广播可以注册并由其他上下文处理时，为什么我什至需要一个上下文来发送广播？

2）这个问题有很好的解决方案吗？（好=尽可能少地从创建异步任务的活动中要求，在旋转中幸存下来，等等。）。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-30T12:29:33.683

您现在在 AsyncTask 中使用的上下文是您当前活动的上下文。默认情况下，屏幕旋转将破坏该 Activity 的当前实例并创建一个新实例。这是（即使一开始看起来不是这样）预期的行为。这样做的原因是您可能希望针对不同的屏幕方向使用不同的资源（布局、可绘制对象等）。为了应用这些可能不同的资源，Android 将在每次轮换时重新创建 Activity。

`android:configChanges`您可以通过在文件中设置属性来抵消这种情况，`AndroidManifest.xml`但在您的情况下，不建议使用此解决方案。

处理此问题的正确方法是将 Application Context 传递给`AsyncTask`而不是您的 Activity （`Activity`继承自`Context`）。您可以通过`getApplicationContext()`从 Activity 实例调用来做到这一点。您的应用程序上下文将持续存在诸如屏幕旋转和生命之类的事件，直到系统终止应用程序。

至于为什么需要一个 Context 实例来完成基本任务：

> 与有关应用程序环境的全局信息的接口。这是一个抽象类，其实现由Android系统提供。它允许访问特定于应用程序的资源和类，以及向上调用应用程序级操作，例如启动活动、广播和接收意图等。

This is how the official documentation defines a `Context`. Maybe someone can explain this better but for myself this definition is sufficient.

# jquery - 以 ul/li 为单位的动态图像宽度

> ID：14090292
> 
> 赞同：1
> 
> 时间：2012-12-30T11:24:40.330
> 
> 标签：jquery, css

我有在窗口调整大小时动态设置 li 宽度的代码。它除以当前的 li 标签数 100%。

代码如下所示：

```
$(document).ready(function() {
    var num = $('li').length;
    var width_li = 100 / num;
    $('li').css('width', width_li + '%');
});​ 
```

在这里测试它：http: [//jsfiddle.net/jbew7/](http://jsfiddle.net/jbew7/)

如何让它调整 li 标签内的图像大小？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T11:26:57.823

您可以使用 CSS：

```
li img {
   width: 100%;
   height: auto;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T11:30:04.430

```
li img {
   width: 100%;
   height: 100%;
} 
```

100% 将确保图像宽度/高度与 li..

# xamarin.ios - 使用 montouch 将 SegmentControl 嵌入到 UIViewController 的标头中

> ID：14090296
> 
> 赞同：0
> 
> 时间：2012-12-30T11:24:55.463
> 
> 标签：xamarin.ios

我正在使用 monotouch 并创建了一个 UIViewController。我想将 SegmentControl 添加到视图的标题中。

在最近的 iphone 上的通话设置中，这正是我想要做的。我已经设法在界面构建器中创建了段控件，但我不知道如何将它移动到标题中。

任何人都可以帮忙吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T00:52:37.957

在 Monotouch 示例中的各个位置都有一些很好的 SegmentControl 示例，尤其是“目录”示例：[https ://github.com/xamarin/monotouch-samples/tree/master/MonoCatalogSample](https://github.com/xamarin/monotouch-samples/tree/master/MonoCatalogSample)

“工具栏”部分是视图顶部的分段控件的工作示例，分段部分显示了如何自定义它。也检查其他的，因为在日期选择器和其他部分中使用了多个段控件。

从我目前（非常有限的）机器翻译经验来看，我建议以编程方式而不是通过 IB 创建元素；这样可以更轻松地控制元素布局。

干杯

# ruby-on-rails - Rails 设计空间错误

> ID：14090299
> 
> 赞同：1
> 
> 时间：2012-12-30T11:25:25.790
> 
> 标签：ruby-on-rails, devise, gem, space, var

我的 Rails 应用程序没有任何更改，今天当我试图到达那里时，出现以下错误：

```
Errno::ENOSPC in Devise/sessions#new

Showing /var/www/services/compolib/app/views/layouts/application.html.erb where line #6 raised:

No space left on device - /var/www/services/compolib/tmp/cache/assets/sprockets%2Fcffd775d018f68ce5dba1ee0d951a99420121230-22757-1fwwx98
Extracted source (around line #6):

3:   <head>
4:     <title><%= full_title(yield(:title)) %></title>
5:     <%= stylesheet_link_tag    "application", media: "all" %>
6:     <%= javascript_include_tag "application" %>
7:     <%= javascript_include_tag "jquery-1.4.2.min.js", 'application' %>
8:     <%= csrf_meta_tags %>
9:     <%= render 'layouts/shim' %>    
Rails.root: /var/www/services/compolib

Application Trace | Framework Trace | Full Trace
app/views/layouts/application.html.erb:6:in `_app_views_layouts_application_html_erb__1997016315920621486_42305140' 
```

我去看看文件系统出了什么问题，是这样的：

```
deployer@one4:~/compolib/tmp$ df
Filesystem           1K-blocks      Used Available Use% Mounted on
/dev/xvda1             3850292    421916   3428376  11% /
none                    496384       140    496244   1% /dev
none                    509664         0    509664   0% /dev/shm
none                    509664      6868    502796   2% /tmp
none                    509664        76    509588   1% /var/run
none                    509664         0    509664   0% /var/lock
none                    509664         0    509664   0% /lib/init/rw
/dev/mapper/vg00-usr   4184064   2805952   1378112  68% /usr
/dev/mapper/vg00-var   4184064   4184044        20 100% /var
/dev/mapper/vg00-home
                       4184064   2472208   1711856  60% /home 
```

所以似乎 /var 空间不足。但为什么？设计 gem 是否填充了所有 /var 空间？如何解决？因为我的应用程序中的 /tmp 文件夹是空的。

# android - android.graphics.Camera的坐标系？

> ID：14090301
> 
> 赞同：3
> 
> 时间：2012-12-30T11:25:42.607
> 
> 标签：android, canvas, camera, coordinate-systems

我必须使用相机在画布中绘制一些东西。但是我无法检测到相机的坐标系是`Right hand`或`Left hand`。我测试了翻译，似乎是这样`Left hand`，但是当我围绕 Y 轴旋转位图时，它会像`Right hand`我一样旋转不明白是什么问题。

# php - 获取数据mysql和动态页面

> ID：14090302
> 
> 赞同：-3
> 
> 时间：2012-12-30T11:25:51.770
> 
> 标签：php, mysql

```
$menu=$_GET[menu];
if (empty($menu))
    {
    $menu==1;
    }

$menusql= "select * from menu order by menu_id asc";
$menusorgu= mysql_query($menusql);
while (@$menusonuc = mysql_fetch_array($menusorgu)) 
{
    if ($menusonuc[menu_id]= $menu)
    {
    echo "<li class=\"active first\"><a href=\"portal.php?menu=\"$menusonuc[menu_id]\"\">$menusonuc[menu]</a></li>";
    }
    else
    {
    echo "<li><a href=\"portal.php?menu=\"$menusonuc[menu_id]\"\">$menusonuc[menu]</a></li>";
    }
} 
```

在数据库中，我有 menu_id 和菜单“第一活动”类显示你在哪里这个代码写入所有菜单但不能显示“第一活动”类有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T11:28:18.700

它必须`==`处于 if 条件

```
if ($menusonuc["menu_id"] == $menu){
..
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T11:28:32.937

基本语法陷阱，你正在使用`=`你应该使用的地方`==`

```
if ($menusonuc[menu_id] == $menu) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-30T11:28:40.680

您应该使用相等运算符`==`而不是赋值运算`=`符`$menusonuc[menu_id]= $menu`

您的代码还有其他一些问题。

1.  **数组索引必须加引号**。所以`$menusonuc[menu_id]`应该是`$menusonuc['menu_id']`
2.  不要`@`在简单变量前面使用。这没有任何意义。您可以在函数调用或表达式之前使用它。`@$arr[$index]` 说得通。
3.  根本不要使用`@`。这个[错误控制运算符](http://www.php.net/manual/en/language.operators.errorcontrol.php)非常慢。此外，它隐藏了错误并使其难以调试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-30T11:40:15.660

您已经使用`=`了应该使用的地方`==`并`==`使用了只应该使用的地方`=`，而您忘记了在数组键的名称周围使用引号。尝试使用此代码而不是您的代码（已修改）：

```
$menu = $_GET["menu"];
if (empty($menu)) {
    $menu = 1;
}

$menusql = "select * from menu order by menu_id asc";
$menusorgu = mysql_query($menusql);
while ($menusonuc = mysql_fetch_array($menusorgu)) {
    if ($menusonuc["menu_id"] == $menu) {
        echo "<li class='active first'><a href='portal.php?menu={$menusonuc["menu_id"]}'>{$menusonuc['menu']}</a></li>";
    } else {
        echo "<li><a href='portal.php?menu={$menusonuc["menu_id"]}'>{$menusonuc["menu"]}</a></li>";
    }
} 
```

# django - 来自 Google Apps 用户的管理员权限

> ID：14090304
> 
> 赞同：0
> 
> 时间：2012-12-30T11:25:55.500
> 
> 标签：django, google-apps, google-provisioning-api

我需要从谷歌应用程序用户那里获得详细的管理员权限。从 Provisioning API 我可以知道用户是否是超级管理员的最大值。但我想知道用户是否可以修改用户帐户、添加用户、编辑用户等。当我有 user_feed 时，我可以在 user_feed.login.admin 中找到 admin 是真还是假。有没有可能找到这个？

我在 Audit API 中看到的东西，但这不适合我。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T18:36:21.850

如果不尝试这些操作，则无法确定用户是否是委派管理员并有权创建/更新/读取/删除用户。显然，如果 user_feed.login.admin 为 true，则该用户是超级管理员并拥有所有这些权限。

我建议你简单地设计你的应用程序来捕获当非特权用户尝试这些操作时发生的错误，并显示一个错误，解释需要授予用户哪些权限才能继续。

# delphi - Delphi软件包安装错误：找不到PAS文件

> ID：14090307
> 
> 赞同：2
> 
> 时间：2012-12-30T11:26:43.263
> 
> 标签：delphi, installation, package

我正在尝试为 Delphi 7 安装第 3 方包。打开 DPK 后，我按下`Install`按钮，出现`File not found`错误。如果我先按`Compile`，然后按 ，也会发生同样的情况`Install`。

错误消息指的是`contains`在 DPK 部分中首先列出的单位。*包目录不包含 PAS 文件，但它包含该* `contains` *部分中列出的每个 PAS 的 DCU。*包目录被添加到`Library path`. 我试图关闭`Explicit rebuild`，但它没有帮助。我还尝试删除对 PAS 文件的引用并添加 DCU 文件，但错误消息保持不变。

Delphi 显然想重新编译包，但我没有源文件。我应该怎么做才能让它使用 DCU？提前谢谢你的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-30T15:44:55.990

编译器需要源代码（即使 .dcus 可用）这一事实通常意味着 .dcu 文件是由不同版本的 Delphi 编译的。.dcu 文件在编译器版本之间不兼容（D2006->D2007 除外），这意味着编译器的每个新版本都意味着您的所有源代码都需要重新编译才能与之兼容。

您需要联系供应商以获取与您当前的 Delphi 版本兼容的新 .dcu 文件。

如果您已经有更新的源代码，编译器没有找到它以便重新编译，这意味着您需要检查*项目->选项->目录和条件->搜索路径*以确保它已更新。您可能还需要检查*Tools->Options->Environment Options->Delphi Options->Library - Win32->Search Path*，具体取决于您安装先前版本的方式。

这就是你不应该在*没有*获得源代码的情况下购买或使用第三方包的原因。您现在依赖于供应商将文件提供给您（或仍在营业），而您在他们这样做之前就被困住了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-19T10:23:21.020

Delphi 7（称为 7.1）有一个更新。DCU 在这些之间不兼容。你有安装更新吗？请参阅： http: [//edn.embarcadero.com/article/32337](http://edn.embarcadero.com/article/32337) [http://edn.embarcadero.com/article/32400](http://edn.embarcadero.com/article/32400)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T15:02:50.020

File not found 错误意味着编译器找不到 pas 文件。“包目录不**包含**PAS 文件...”但是您将包目录添加到库路径中，因此编译器无法找到 pas 文件。如果您有 pas 文件，请确保在 IDE 中为包含该包的 pas 文件的文件夹设置了一个库路径。如果您没有 pas 文件，请从开发人员处获取它们。

# cluster-computing - RabbitMQ 集群真的可以用来支持高可用性吗？

> ID：14090312
> 
> 赞同：1
> 
> 时间：2012-12-30T11:27:28.817
> 
> 标签：cluster-computing, rabbitmq, message-queue, high-availability

我一直将 RabbitMQ 视为高度可用且可靠的消息代理的候选者。我需要的是一个在 n 台物理机器上运行的消息代理，即使在单个实例的硬件或网络故障后也能继续运行。需要使用至少一次语义可靠地传输单个消息。集群还需要能够自我修复并允许在没有额外手动发明的情况下重新启动崩溃的实例！

阅读 RabbitMQ 文档，集群部分有一些可怕的警告，例如“代理必须通过可靠的 LAN 链接连接”。其他部分也提到重新启动崩溃的节点可能需要一些手动干预。RabbitMQ 能否满足我的要求，如果不能，是否有其他 OSS 替代方案可以满足我的要求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:20:22.810

对于您描述的要求，RabbitMQ 没有开箱即用的灵丹妙药。如果您想使用 RabbitMQ 解决您的实际业务需求，您将需要构建一些可能特定于您的应用程序的额外功能。在这种情况下，您可能需要从 RabbitMQ 讨论列表或 google 寻求指导以获取 RabbitMQ 咨询。

请注意，您不会*修复*集群中的崩溃节点，而是*替换*它们。您可以使用检查 Rabbit 退出代码的内容来包装 Rabbit 启动脚本，并在发生崩溃时删除节点并创建一个全新的节点。

# java - 从java中的arrayList中删除一个项目

> ID：14090313
> 
> 赞同：0
> 
> 时间：2012-12-30T11:27:43.783
> 
> 标签：java, netbeans, collections, arraylist

我有一个程序从文件中获取输入，将文件中的每个单词保存为标记，然后将每个标记添加到数组列表中。

问题是 arrayList 出现例如 ["cat","dog"," "," ","bird"]，我不想要 arrayList 中的空格。

读取的文件设置如下：

```
cat dog

bird 
```

很明显是空行导致了空格，但是空行是必要的。

无论如何，我的代码如下：

```
import java.io.BufferedReader;
import java.io.DataInputStream;
import java.io.FileInputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.Collection;
import java.util.Iterator;
import java.util.List;

public class NewMain{

public static void main(String[] args){

    try{
        FileInputStream fstream = new FileInputStream("Filename");

        //Get the object of datainputstream
        DataInputStream in = new DataInputStream(fstream);
        BufferedReader br = new BufferedReader(new InputStreamReader(in));
        String strLine;

        List<String> listOfWords = new ArrayList<String>();
       while((strLine = br.readLine()) != null){
        String [] tokens = strLine.split("\\s+");
        String [] words = tokens;
        for(String word : words){
            listOfWords.add(word);
            System.out.print(word);
            System.out.print(" ");      
        } 
        System.out.print("\n");
    }
       System.out.println(listOfWords);

        List<String> space = new ArrayList<String>();
        String[] spaces = {" "};
        space.addAll(Arrays.asList(spaces));

        editList(listOfWords,space);

        System.out.println(listOfWords);
in.close();
    }
    catch(Exception e){
        System.err.println("Error: " + e.getMessage());    
    }  
}

public static void editList(Collection<String> list1, Collection<String> list2){
    Iterator<String> it = list1.iterator();
        while(it.hasNext()){         
       if(list2.contains(it.next())) {
                it.remove();
            }  
       }
}
} 
```

`String[] spaces = {" "};`应该删除空格，因为我已经通过从非文件数组列表中删除空格来测试它。奇怪的是，如果我将其更改为`String[] spaces = {"cat"};`它将从 arrayList 中删除 cat。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T11:32:08.770

原因很明显。一个可能的解决方案是使用这个：

`strLine = br.readLine().trim()`

然后将您的`while`循环实现为：

`while (strLine != null && !strLine.isEmpty()) { //do stuff }`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T11:30:06.953

在你的 for 循环中添加一个 if 条件：

```
for(String word : words){
            if(!word.equals(""))  /* OR if( (word.length > 0) )*/  {
            listOfWords.add(word);
            System.out.print(word);
            System.out.print(" ");   
           }   
        } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-30T11:32:20.350

尝试删除*空*字符串 - 因为您通过空格模式拆分，所以`\s+`您的列表中*不会*有`" "`，但是`""`：

```
String[] spaces = {""}; 
```

但是不要在之后删除它们，而是**首先不要添加它们**！

```
if (word.length() == 0) continue;
listOfWords.add(word); 
```

（并添加您需要的任何类似过滤器！）

这**不仅仅是简单**的。它也更有效率。从数组列表中删除元素成本`O(n)`。因此，您用于过滤的代码的复杂性是`O(n^2)`（您可以`O(n)`通过复制到第二个列表来解决这个问题）。首先不添加元素本质上是免费的；通过这种方式，您的解析甚至会变得更快一些 - 仍然在`O(n)`，但比第二步中的 filter 更快。

# php - PHP脚本无故停止工作

> ID：14090316
> 
> 赞同：7
> 
> 时间：2012-12-30T11:28:17.793
> 
> 标签：php, mysql, linux, apache, shell

我正在运行一个 BIG PHP 脚本，它可能需要一*整天*才能完成它的工作，
这个脚本从 MySQL 数据库中获取数据并将其与 curl 一起使用来测试东西..它使用大约*40,000*条记录来完成它..
所以让它只要需要就在后台运行，我使用终端来执行它。在 PHP 脚本本身中，它具有这些设置，以确保它尽可能长时间地运行，直到它完成：

```
set_time_limit(0); // run without timeout limit 
```

因为我从另一个单独的 PHP 脚本执行它，所以我使用这个函数

```
ignore_user_abort(1); // ignore my abort 
```

因为直接从命令行执行它，它会给我两个选择..
1）等到脚本完成
2）取消整个过程

在搜索之后，有一篇文章给了我第三个选择，它**通过**创建一个外部 PHP 脚本来使用这个函数在后台执行主要的 BIG PHP 脚本，从而尽可能地在后台运行它：

```
exec("php bigfile.php"); 
```

这意味着我可以从浏览器正常打开此外部页面并无需担心退出它，因为`ignore_user_abort`它将使其在后台运行..**这仍然不是问题**

问题是..在一段未知时期之后，脚本停止工作..*我怎么知道？*我告诉它在一个外部文件中写入它工作的每条记录的当前日期时间，所以我每次都刷新到那个外部页面，看看它是否停止更新，

在一段未知的时间之后，它实际上无缘无故地停止了，脚本没有说停止或任何东西..如果发生任何错误，我告诉它跳过记录（没有任何错误发生，它们都在同一行工作，如果一个工作，然后一切都应该工作）

但是，我的主要疑问如下：

*   Apache有一个超时杀死它
*   这不是在后台执行 PHP 脚本的正确方法
*   在某个地方存在超时，无论是在 PHP 还是 Apache 或（**MySQL！？**）
    这就是我最大的疑问所在**。MySQL**，它会停止向 PHP 循环提供记录`while`吗？如果发生错误，它会导致整个脚本崩溃吗？它是否有任何使整个脚本崩溃的超时？

如果这些都不适用，有什么方法可以记录脚本现在到底发生了什么？或者为什么会崩溃？任何详细的方式来记录一切？

* * *

**更新**：

我在以下`messages`文件中找到了这个`/var/log/`：

```
Dec 29 16:29:56 i0sa shutdown[5609]: shutting down for system halt
Dec 29 16:30:14 i0sa exiting on signal 15
Dec 29 16:30:28 i0sa syslogd 1.5.0#6: restart.
Dec 29 16:50:28 i0sa -- MARK --
            .....
Dec 29 18:50:31 i0sa -- MARK --
Dec 29 19:02:36 i0sa shutdown[3641]: shutting down for system halt
Dec 29 19:03:11 i0sa exiting on signal 15
Dec 29 19:03:48 i0sa syslogd 1.5.0#6: restart. 
```

它说系统停止..我会尽量确保这可能是未来的崩溃和比赛时间，这可能是造成它的原因吗？为什么？`memory_limit`是 128M 而我有`2GB`服务器内存 ram，可能是这样吗？

PS：我手动重启了几次服务器..但是这个说shutdown and halt ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-30T11:40:41.337

对于这种情况，我使用这样的成功 nohup 命令：

```
nohup php  /home/cron.php >/dev/null  2>&1 & 
```

您可以在此之后检查脚本是否正在运行：

```
jobs -l 
```

注意：当您使用 nohup 命令时，php 文件的路径必须是绝对的，而不是相对的。我认为从一个 php 文件调用另一个 php 文件只是为了防止执行在完成工作之前停止是不太优雅的。

外部参考： [http ://en.wikipedia.org/wiki/Nohup](http://en.wikipedia.org/wiki/Nohup)

还要确保您的脚本中没有内存泄漏，这会使脚本在一段时间后因为“内存不足”而崩溃。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T11:36:06.413

您是否尝试过使用 nohup？

```
exec("nohup php bigfile.php &"); 
```

如果您的主机允许使用 nohup 命令，则该命令应在后台运行，并且调用 exec 的脚本应立即继续。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-30T11:33:49.133

Osa，你的 Apache 很可能已经杀死了这个，我可以详细介绍一下可能的原因，其他人肯定会这样做。我宁愿回答你的问题而不是你的问题，并建议你使用`tmux`你描述的任务（或者`screen`如果`tmux`不可用）。

所以你要做的就是打开`tmux`并从那里启动脚本。分离`ctrl-b d`并稍后重新连接`tmux attach`以查看它有多远。分离时，您可以在不停止的情况下注销。

对于其他内容的简短介绍`tmux`，您还不需要，但可以帮助您理解方法[http://victorquinn.com/blog/2011/06/20/tmux/](http://victorquinn.com/blog/2011/06/20/tmux/) 或更高版本 [http://blog.hawkhost .com/2010/06/28/tmux-the-terminal-multiplexer/](http://blog.hawkhost.com/2010/06/28/tmux-the-terminal-multiplexer/)还可以

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-30T11:32:20.770

执行时间不是唯一需要考虑的事情。下一个可能的罪魁祸首是脚本超过 max_memory_limit

您是否检查/启用了错误记录？可能会默默地失败。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-30T11:38:16.583

如果您使用 Apache，大约有 300 秒的超时。`apache_reset_timeout();`如果您不停止脚本，定期调用可以让脚本永远运行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-30T11:43:09.143

首先，我遇到了这个问题并解决了，但我想强调你的 MySQL 服务器不负责这个挂起只有你需要更改 Apache 中的一些设置。将以下这些行放在 PHP 文件的上面。

```
ini_set('max_execution_time', 1000);
ini_set('memory_limit', '50M');
set_time_limit(0); 
```

并且每个获取数据都应该使用：

```
$url_class = $URL_path;
//open connection
$ch_school_class = curl_init();
curl_setopt($ch_school_class, CURLOPT_URL, $url_class);
$result_school_class = curl_exec($ch_school_class);
//clean up
curl_close($ch_school_class);

//Each fetch like this 
$url_class = $URL_path;
//open connection
$ch_school_class = curl_init();
curl_setopt($ch_school_class, CURLOPT_URL, $url_class);
$result_school_class = curl_exec($ch_school_class);
//clean up
curl_close($ch_school_class); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-30T11:55:23.453

[1：考虑使用popen()](http://php.net/manual/en/function.popen.php)、[pclose()](http://php.net/manual/en/function.pclose.php)等在外部运行 PHP 脚本。

2：您可以使用[multi curl 处理程序缩短 cURL 请求的长度](http://php.net/manual/en/function.curl-multi-exec.php)

3：如果可能的话，你应该尝试用不同的语言来做。众所周知，PHP 对于较大的任务相当慢。为什么要花一整天时间，最多只能在几个小时内完成（我说几个小时，因为它必须向 40,000 个不同的地址发出网络请求）

4：而且，正如许多其他人所说，如果可以，请尝试使用 nohup。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-31T08:05:03.373

使用 ignore_user_abort 通过 apache 运行长时间运行的脚本是一种肮脏的方式。

最简单的方法是使用**GNU screen**，只需键入 screen ，您将连接到当前控制台内的新控制台，启动脚本然后使用**ctrl-a d （**[此处](http://www.rockfloat.com/howto/screen.html)为完整手册）从屏幕分离，屏幕将继续即使您与服务器断开连接也能正常工作。

要重新连接到您的屏幕，请使用**screen -r**，您将返回到正在运行的脚本。

最难的方法（也是最干净的方法）是重写你的脚本以作为系统守护进程工作，有很多库可以帮助你做到这一点，我建议你深入研究 pear 的守护进程库（[这里](http://kvz.io/blog/2009/01/09/create-daemons-in-php/)有一个例子）。

至于内存限制问题（？），在决定更新 memory_limit 配置之前，您必须检查您的脚本消耗的内存是否比当前配置中写入的更多，制作一个简单的**ps aux|grep php**并查找**RSS**专栏，这就是你的脚本正在吃的所有内存。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-01-17T08:47:56.267

我们通常会面临其他许多问题。

1.  您失败的程序可能正在以不适当的用户权限连接到任何其他用户/服务/服务器。因为通常 web-php 使用的是用户 apache(centos) 或 www-data (在 ubuntu 中)，它们不是执行 sudo list 的一部分。给予相关许可，然后尝试。
    2.  检查 php.ini 并检查 disabled_function 行：exec、shell_exec 或其他内容，删除/注释该行，然后尝试。

# c# - 将 0 和 1 的字符串转换为字节数组

> ID：14090317
> 
> 赞同：1
> 
> 时间：2012-12-30T11:28:19.823
> 
> 标签：c#, textbox, byte, bit

我想在文本框中写入以下位序列，如下所示：

> 000101100000000100000001000000010000000000100111001100010010000000110000001011100011000000110000001100000011000000100000001100110011100100101110001101110011010100100000001100000010111000110000001110000010000000110000001011100011000000110000001000000011000000101110001100000011000000110000001100000000010111010111

但是每8位对应一个字节，所以我想将它们存储在一个`byte[]`数组中。当然，如果我这样阅读它们：

```
byte[] byteBuffer = Encoding.ASCII.GetBytes(messageTextBox.Text); 
```

每个`0`or`1`变成一个完整的字节，这不是我想要的。

有没有直接的解决方案，比如一些现有的方法，或者我必须自己开发？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T12:26:15.827

您可以使用`Convert.ToByte()`并执行以下操作：

```
string str = messageTextBox.Text;
byte[] byteBuffer = Enumerable.Range(0, str / 8).
                        Select(pos => Convert.ToByte(
                        str.Substring(pos * 8, 8),
                        2)).ToArray(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T12:26:42.223

我在没有任何编译器的情况下在旅途中编写了以下代码，因此请对语法错误表示歉意 - 您还必须自己处理到达文本字符串的末尾，它不包括在内。我认为下面的方法可以做你想做的事情..

```
private bytes[] extractBytes (string text) {

    byte[] bytes = new byte[100];
    int i = 0;
    int j = 0;
    string currentByte = "";

    while (i <= text.Length) {

         currentByte += text.Substring(i, 1);

         i++;

         if (i % 8 == 0) {

             j++;

             bytes[j] = convertToDecimal(currentByte);
             currentByte = "";
         }
    )

    return bytes;
} 
```

如果要保存由从字符串中提取的二进制值表示的十进制值，可以使用以下转换方法：

```
private byte convertToDecimal (string binary) {

    int i = 0;
    int byte = 0;

    while (i < s.Length) {

        if (s.Substring(s.Length - 1 - i, 1).Equals("1")) {

            sum += (byte)Math.Pow(2, i);
        }

        i++;
    }

    return sum;
} 
```

# javascript - Chrome onMessage 监听器没有被调用

> ID：14090322
> 
> 赞同：5
> 
> 时间：2012-12-30T11:28:41.390
> 
> 标签：javascript, google-chrome, google-chrome-extension

我正在试验`chrome.extension`API。

**清单.json**

```
{
    "name": "First",
    "version": "1.0",
    "manifest_version": 2,
    "description": "First extension",
    "background": {
        "scripts": ["test.js"]
    },    
    "page_action": {
        "default_icon": "icon.png",
        "default_popup": "popup.html"
    },    
    "content_scripts": [ {
        "js": [ "jquery.min.js", "display.js"  ],
        "matches": [ "http://*/*", "https://*/*" ]    
    } ],

    "permissions" : [
        "tabs",
    "http://*/*", "https://*/"
        ]
} 
```

**显示.js**

```
alert("inside display.js");

chrome.extension.onMessage.addListener(
        function(request, sender, sendResponse){
            alert("inside msg");
            var time = request.sel_text;
            alert(time);

        }); 
```

**测试.js**

```
function check(tab_id, data, tab){
    if(tab.url.indexOf("google") > -1){
        chrome.pageAction.show(tab_id);
        chrome.tabs.executeScript(null, {"file" : "display.js"}) ;
    }
};
chrome.tabs.onUpdated.addListener(check); 
```

**popup1.js**

```
function myfunc(){

    var x = $('#options option:selected').text();
    alert(x);
    chrome.extension.sendMessage({sel_text: x});

}

$(document).ready(function(){
    $('#options').change(myfunc);

}); 
```

现在，当我的页面加载时，我会`three(3)`弹出窗口说`inside display.js`但从`chrome.extension.onMessage.addListener`未被调用。

那么，我做错了什么。我们可以`chrome.extension.*`从内容脚本访问 API。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-30T12:03:54.930

`chrome.extension.sendMessage`仅触发`onMessage`扩展范围内的侦听器，**不包括内容脚本**。

您可以使用该方法通知内容脚本[`chrome.tabs.sendMessage`](http://developer.chrome.com/extensions/tabs.html#method-sendMessage)，如下所示：

```
function myfunc() {
    var x = $('#options option:selected').text();
    var message = {sel_text: x};
    chrome.tabs.query({active: true, currentWindow: true}, function(tabs) {
        var tabId = tabs[0].id;
        chrome.tabs.sendMessage(tabId, message);
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T11:35:43.903

`chrome.extension.sendMessage({sel_text: x});``popup1.js`您的清单文件中未使用或引用它。你在哪里使用`popup1.js`你的扩展？

[chrome.extension.onMessage.addListener](https://developer.chrome.com/extensions/extension.html#event-onMessage)在从扩展进程或内容脚本发送消息时触发，您的代码中没有发送任何消息！。

此外，您为什么`chrome.tabs.executeScript(null, {"file" : "display.js"}) ;`要从`background page`已注册的脚本重新注入`manifest file`.

# xml - 有谁知道允许使用给定 xs:schema 创建 XML 的程序或在线服务？

> ID：14090323
> 
> 赞同：0
> 
> 时间：2012-12-30T11:29:19.153
> 
> 标签：xml, schema

有谁知道允许使用给定 xs:schema 创建 XML 的程序或在线服务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T11:50:55.227

发现这个： http: [//www.codeproject.com/Articles/3645/A-Dynamically-Generated-XML-Data-Editor](http://www.codeproject.com/Articles/3645/A-Dynamically-Generated-XML-Data-Editor)

我记得大多数商业 XML 编辑器都不是很轻巧。

# php - 奇怪的 PHP PDO 错误 - 意外的 null

> ID：14090325
> 
> 赞同：-3
> 
> 时间：2012-12-30T11:29:31.900
> 
> 标签：php, mysql, forms, pdo, checkbox

我不明白为什么 MySQL 会导致 PHP PDO 抛出这个错误：

> 致命错误：未捕获的异常 'PDOException' 带有消息'SQLSTATE [23000]：完整性约束违规：1048 列'免责声明'不能为空'[...]

这个特殊的表单前端和后端涉及相当多的代码，所以我只引用相关的部分。

HTML：

```
<label for="disclaimer" class="container ten columns">*Blah blah legalese</label>
            <input type="checkbox" name="dislcaimer" value="disclaimer"> 
```

PHP：

```
 if(!isset($_POST['fname']) ||
        !isset($_POST['sname']) ||
        !isset($_POST['email']) ||
        // and so on ...   
        !isset($_POST['dislcaimer']) ||
          (
          !isset($_POST['mf'])&&!isset($_POST['me'])&&!isset($_POST['ms'])&&!isset($_POST['wf'])&&!isset($_POST['we'])&&!isset($_POST['ws'])
        )
      )
    {
        died('We are sorry, but you appear to have left at least one of the mandatory fields blank.');    
} 
```

[...]

```
$disclaimer = $_POST['disclaimer']; // variable initialisation 
```

PHP/PDO：

```
 $data = array($first_name, $last_name, $email_from, $telephone, $dateofbirth, $licence, $club, $countynm, $mf, $me, $ms, $wf, $we, $ws, $party, $disclaimer);
  $STH = $dbh->prepare("INSERT INTO competitor (fname, sname, email, phone, dob, licence, club, country, mf, me, ms, wf, we, ws, party, disclaimer) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)");
  $STH->execute($data); 
```

MYSQL：

![数据库的一部分 - phpmyadmin](../Images/4206d8f1852d3d931a9c519c24707b56.png)

我只是不明白。在调试复选框返回NULL，但它肯定应该触发未填写必填字段时生成的自动错误？我在此设置中处理复选框是否完全错误？对于其他可选复选框，我会为它们分配一些整数，以防它们被取消勾选（例如“0”），这样就不会出现这种错误。我是否需要为此做同样的事情，但如果设置了它，则分配它可能是“1”......？：/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T11:38:04.270

你不知道有两种感觉

1.  未选中时，复选框不会发送到服务器。
2.  您必须始终与发生的每个错误保持联系。

对于后一条规则，将此行添加到您的引导文件中

```
error_reporting(E_ALL); 
```

因此，您将收到一般的每个错误的通知，以及`$_POST['disclaimer'];`在这种情况下的缺失。
因此，在这种情况下，您必须手动定义它

顺便说一句，如果它只是一个复选框，可以防止数据在不存在时保存，我认为将其存储在数据库中没有意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T11:37:16.550

在这里打错字：

```
name="dislcaimer" 
```

和这里

```
!isset($_POST['dislcaimer']) 
```

但不是在这里：

```
$disclaimer = $_POST['disclaimer']; 
```

还有一件事，在更正那个错字之后，`$_POST['disclaimer']`会有价值`disclaimer`，但你有 tinyint 字段，所以你应该`value="1"`在输入中使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-30T11:44:24.337

如果您选中复选框，则发布的值是免责声明。这不是您在数据库中的整数。您可以将其设置为 1，或者您必须在 php.ini 中更改它。

在 php 中，您可以执行以下操作以使其正常工作：

```
<?php
if ($_POST['disclaimer'] == 'disclaimer') {
//checked
$disclaimer = 1;
} else {
// not checked
$disclaimer = 0;
} 
```

# php - Orchestra（Laravel）中的独立与资源扩展

> ID：14090336
> 
> 赞同：0
> 
> 时间：2012-12-30T11:30:35.363
> 
> 标签：php, routing, laravel

我正在尝试将[Orchestra 平台](http://bundles.laravel.com/bundle/orchestra)用于[Laravel 框架](http://laravel.com)。

我已经为该平台安装了[Authorize](http://bundles.laravel.com/bundle/authorize)、[Robotix](http://bundles.laravel.com/bundle/robotix)、[Melody Theme Manager](http://bundles.laravel.com/bundle/melody)和[Cello CMS](http://bundles.laravel.com/bundle/cello)扩展。

我注意到 Authorize、Robotix 和 Cello CMS 扩展都列在 Resources 下，而 Melody Theme Manager 被列为 Extensions 旁边的顶级项目。

我想要的是让 Cello CMS 扩展可以通过`/orchestra/manages/pages`与 Melody Theme Manager 可以通过相同的方式访问`/orchestra/manages/melody.themes`。

我已经确定要添加顶部菜单项，我可以使用以下内容：

```
// Attach a menu only if user has the authorization to manage Pages
$acl = Orchestra\Acl::make('cello');
$menu = Orchestra::menu();

if ($acl->can('manage-pages')) {
    $menu->add('Cello', 'after:themes')
        ->title('Pages')
        ->link(handles('orchestra::resources/cello'));
} 
```

代替`Event::listen('orchestra.started: backend', function()`

哪个添加了一个工作链接，当然，问题是那仍然指向`resources/cello`所以我怎样才能让它响应`manages/pages`呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T14:37:23.467

Cello CMS 是设计使用的`Orchestra\Resources`，它为复杂的 CRUD 提供更好的 API，`manages/pages`只是简单的事件侦听器，您必须添加额外的代码才能将其路由到控制器。现在此时 Cello 只处理页面内容，但未来我们正在考虑向其添加帖子（某种博客），如果我们遵循`manages/pages`API 将很难维护（个人偏好）。

以这两个用例为例，“旋律主题管理器”和“授权”。Melody 使用`pages/manages`仅仅是因为它只需要主题选择（通过单个 ACL），而 Authorize 使用是`resources`因为它有两种类型的 ACL，“manage-acl”和“manage-role”以及两种类型的资源，它们是 CRUD用于角色和 ACL 指标配置。

我正在考虑切换资源是否被列出的可能性，但是这种方法有优缺点，这是您可能正在寻找的，但它指向资源 URL 而不是`manages/pages`.

# spring-data - 支持 spring-data-mongodb 中的 Auditable？

> ID：14090337
> 
> 赞同：1
> 
> 时间：2012-12-30T11:30:37.660
> 
> 标签：spring-data, spring-data-mongodb

据我所知，spring-data-mongodb项目（1.1.1.RELEASE版本）中不支持org.springframework.data.domain.Auditable。有没有人有一些提示或参考如何实现这个功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T12:28:28.400

Spring Data MongoDB 的下一个版本中即将提供支持。该实现不仅包含`Auditable`支持，还包含 Spring Data Commons 中引入的基于注释的支持（即使用的能力`@CreatedBy`，`@LastModifiedDate`更具体地说明应该设置什么并防止需要实现接口）。相关的 JIRA 问题在[这里](https://jira.springsource.org/browse/DATAMONGO-577)，相应的提交在[这里](https://github.com/SpringSource/spring-data-mongodb/commit/94823500624432de101e464f6adf72d98b37a347)。如果您想试一试，请随时从我们的[Maven 存储库](https://repo.springsource.org/libs-snapshot/org/springframework/data/spring-data-mongodb/1.2.0.BUILD-SNAPSHOT/)中获取快照构建。

# php - 如何在多行中（在一个段落中）编写文本？

> ID：14090340
> 
> 赞同：4
> 
> 时间：2012-12-30T11:31:22.467
> 
> 标签：php, imagettftext

当我使用此代码时，我可以用文本制作图像，但在一行中，

```
function writetext($image_path,$imgdestpath,$x,$y,$angle,$text,$font,$fontsize) {
      $image=imagecreatefromjpeg("$image_path");
      $height = imageSY($image);
      $width = imageSX($image);
      $color = imagecolorallocate($image,0,0,0);
      $textwidth = $width;
      imageTTFtext($image,$fontsize,$angle,$x,$y,$color,$font, $text );
      ImageJPEG($image,$imgdestpath);
} 
```

请告诉如何在多行段落中制作此图像？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-30T11:37:26.420

对于每一行，您需要使用 $y 的新值调用新的 imageTTFtext 函数，例如：

```
$text = 'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer non nunc lectus.     Curabitur hendrerit bibendum enim dignissim tempus. Suspendisse non ipsum auctor metus consectetur eleifend. Fusce cursus ullamcorper sem nec ultricies. Aliquam erat volutpat. Vivamus massa justo, pharetra et sodales quis, rhoncus in ligula. Integer dolor velit, ultrices in iaculis nec, viverra ut nunc.';

// Break it up into pieces 125 characters long
$lines = explode('|', wordwrap($text, 115, '|'));

// Starting Y position
$y = 513;

// Loop through the lines and place them on the image
foreach ($lines as $line)
{
imagettftext($image, $font_size, 0, 50, $y, $font_color, $font, $line);

// Increment Y so the next line is below the previous line
$y += 23;
} 
```

[资源](http://php.net/manual/en/function.imagettftext.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-03T17:13:15.523

```
function writeonimage(){ 

// Create Image From Existing File
$jpg_image = imagecreatefromjpeg('wp-content/themes/ibestquotes/images/background.jpg');

// Allocate A Color For The Text
$white = imagecolorallocate($jpg_image, 255, 255, 255);

// Set Path to Font File
$font_path = 'wp-content/themes/ibestquotes/fonts/arial-italic.ttf';

// Set Text to Be Printed On Image
$text = get_the_title($_REQUEST['did']);

// Break it up into pieces 25 characters long
$lines = explode('|', wordwrap($text, 25, '|'));

// Starting Y position
$y = 100;

// Loop through the lines and place them on the image
foreach ($lines as $line)
{
imagettftext($jpg_image, 20, 0, 40, $y, $white, $font_path, $line);

// Increment Y so the next line is below the previous line
$y += 40;
}

// Send Image to Browser but we are using download image
//imagejpeg($jpg_image,'wp-content/themes/ibestquotes/name.jpg');

header("Content-type: image/jpeg");  
header("Cache-Control: no-store, no-cache");  
header('Content-Disposition: attachment; filename="avatar.jpg"');
imagejpeg($jpg_image);

// Clear Memory
imagedestroy($jpg_image); 
}

//This code is working on 
http://ibestquotes.com/?t=d&did=56 
```

# c++ - Visual Studio 2010 和 2012 中 STL 容器的字节大小差异

> ID：14090341
> 
> 赞同：2
> 
> 时间：2012-12-30T11:31:31.203
> 
> 标签：c++, visual-studio, dll, stl, visual-studio-2012

**我正在使用 VS2010 和 VS2012 项目的解决方案。**

VS2010 项目调用 VS2012 中的函数，反之亦然。起初这很好用，但是当我还需要在两个项目之间共享变量时，我注意到变量似乎没有相同的内存对齐方式，并且每个项目对相同的内存地址的解释不同。

**更新**：它似乎只在使用**STL-containers**时发生，其他不包含 std:: 的结构和类工作正常。

为了说明这个问题，以下代码在不同的 Visual Studio 版本上运行时应该会产生不同的结果。

```
#include <string>
#include <vector>

int main()
{
    int stringSize = sizeof(std::string);           // Yelds 32 on VS2010, 28 on VS2012
    int intVectorSize = sizeof(std::vector<int>);   // Yelds 20 on VS2010, 16 on VS2012

    return 0;
}; 
```

对我来说，将两个项目更新到相同的版本是**不可能的**，因为我有一些依赖于每个版本。

**有谁知道解决方案或绕过问题的方法？**

我会尽快将这两个项目升级到 VS2012 编译器，但现在我正在寻找一个**快速而肮脏的解决方案**，这样我就可以和工作相处了。由于它似乎只发生在 STL 容器中，是否有可能在所有项目中使用旧版本的库？还是有可能欺骗编译器？也许改变填充大小？

此外， std::vector 中**的第一个**元素似乎读得很好，只有向量中的**后续**元素似乎被**打乱了**。（*见图。*）

![调试图像](../Images/5407bc8638318a5bab735a39c183ce10.png)

*调试 2010 年和 2012 年编译的“main.cpp”中的“Fetched”变量的图像。*

* * *

**有人希望我澄清变量的共享方式。**

我们正在 VS2012 编译模式下将第一个项目编译成 DLL，然后尝试在 VS2010 中访问该项目。

这是一些重现问题的代码。如果您想亲自尝试，可以在[此处](http://dl.dropbox.com/u/12273871/%28Program%29/DllHell.zip)下载完整的 VS2012 解决方案。

**这段代码使用 VS2012 编译成 DLL。**

*DLLExport.h*

```
#ifdef DLLHELL_EX
#define DLL_API __declspec(dllexport) 
#else
#define DLL_API __declspec(dllimport) 
#endif

#include <vector>
#include <string>

class DLL_API Foo
{
public:
    Foo();
    ~Foo();

    std::vector<std::string>* exposedMember;
}; 
```

*DLLExport.cpp*

```
#include "DllExport.h"

Foo::Foo()
{
    // Create member
    exposedMember = new std::vector<std::string>();

    // Fill member with juicy data
    for(int i=0; i<5; i++)
            exposedMember->push_back("Fishstick");
}

Foo::~Foo()
{
    // Clean up behind ourselves like good lil' programmers
    delete exposedMember;
} 
```

**此代码使用 DLL 并使用 VS2010 编译。**

*主文件*

```
#include "DllExport.h"

int main()
{
    // Creating class from DLL
    Foo bar;

    // Fetching "exposedMember" from class
    std::vector<std::string>* member = bar.exposedMember;

    return 0;
} 
```

使用[本](http://msdn.microsoft.com/en-us/library/ms235636.aspx)教程创建了 DLL

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-30T21:54:40.913

您绝对不应该混合来自不同版本的运行时的类型。即使它们的大小相同，它们也可能将变量存储在不同的位置，或者某些算法可能会略有变化。即使类型完全相同，不同的编译器也可能选择以不同的方式表示它们。

确实没有什么好的方法可以做到这一点。C++ 不保证其标准库的实现不会改变，编译器似乎无法就 ABI 达成一致（即使在同一编译器的版本之间），即使它们没有达成一致。在编写 API 供他人使用时，大多数人选择只导出完全在他们控制之下的 C 类型。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-01T23:51:47.667

由于我没有不使用不同版本的选项，我认为最接近解决问题的方法是使用指向**STL 容器**的指针而不是直接访问它们（例如`std::vector<std::string*>*`，而不是`std::vector<std::string>*`）。

如果可能的话，我仍然非常喜欢**非指针**解决方案，但至少这样我就不必发明自己的字符串和向量类作为解决方法。

![视觉工作室内的指针](../Images/193bfb29ac7647f77d646c4fb3e099c3.png)

* * *

**更新**

人们显然不太喜欢这个答案。就我个人而言，我认为最好被告知有解决方案，而不是被告知根本不应该做某事。该解决方案拯救了我们，因为它允许我们继续工作，直到几周后我们可以将所有内容升级到相同的编译器。

虽然，批评有一些优点。该解决方案虽然可行，但可能非常危险，并且当单独分配而不是作为结构的一部分分配时，两个编译器中的 String 类的布局可能是相同的，这可能是一个巧合。

更好的解决方案可能只是：

> 改用 C 类型，例如使用`.c_str()`公开 C 字符串而不是直接从 DLL 访问您的字符串或用 C 字符串替换所有字符串。

我现在认为这就是@CoryNelson 的意思`most people choose to export only C types`，但由于我当时对 C 类型的无知和缺乏经验，我不明白这一点，我以为我只是被告知这是不可能的，我很愚蠢试。

如果您提供解释而不是我自己猜测的原因，那么对于投反对票的人来说，将不胜感激。只要给出理由，我对批评没有意见。

# sql - SQL查询以从每个组中选择一行，并具有偏好

> ID：14090352
> 
> 赞同：2
> 
> 时间：2012-12-30T11:32:51.130
> 
> 标签：sql

例如，假设我有一个包含两列`X`和`Y`. 现在我想`select`从这个表中得到一些具有以下规则的行：

1.  将“组”定义为具有相同列值的一组行`Y`。
2.  从一个组中，只选择一行。
3.  在组中，如果其中一个行具有`X=a`预定义的 a，则从该组中选择该行。
4.  在一个组中，如果没有行有`X=a`，则可以选择任何行。

在单个 SQL 查询中执行此操作的选项有哪些？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T11:54:02.540

试试这个：

```
SELECT DISTINCT
  t1.Y,
  COALESCE(a2.x, a1.x) 'x'
FROM Tablename t1
LEFT JOIN
(
    SELECT Y, MIN(x) x
    FROM Tablename
    GROUP BY Y
) a1 ON t1.Y = a1.Y
LEFT JOIN
(
    SELECT Y, MIN(x) x
    FROM Tablename
    WHERE x = 'a'
    GROUP BY Y
) a2 ON t1.Y = a2.Y; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/24577/4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T14:50:28.797

```
DROP SCHEMA tmp CASCADE;
CREATE SCHEMA tmp ;
SET search_path=tmp;

CREATE TABLE yx
        ( Y INTEGER NOT NULL
        , x CHAR NOT NULL
        , PRIMARY KEY (y,x)
        );
INSERT INTO yx (y,x) VALUES
 (10,'b') ,(10,'d') ,(10,'e' )  -- y==10 does not have an 'a'
,(20,'b') ,(20,'a') ,(20,'d')   -- y==20 does have an 'a'
        ;

        --
        -- using a CTE
        --
WITH    this AS (
        SELECT y,x
        , row_number() OVER (PARTITION by y ORDER BY (x='a') DESC, x ASC) AS rnk
        FROM yx
        )
SELECT this.y,this.x 
FROM this
WHERE this.rnk = 1
        ;

        --
        -- with a subselect instead of a CTE
        --
SELECT this.y,this.x 
FROM (
        SELECT y,x
        , row_number() OVER (PARTITION by y ORDER BY (x='a') DESC, x ASC) AS rnk
        FROM yx
        ) this
WHERE this.rnk = 1
        ; 
```

# python - 使用 Signals 和 Slots 在两个小部件之间发送消息

> ID：14090353
> 
> 赞同：4
> 
> 时间：2012-12-30T11:32:51.693
> 
> 标签：python, qt, pyqt, pyside, signals-slots

我需要让小部件相互通信。

我的中心 Widget 有 2 个小部件实例：`widget A`(instance of `A()`), `widget B`(instance of `B()`) 当 a`widget A`受事件影响时（例如：）`mouseRelease`，我需要`widget A`调用*一个函数*并进行一些计算、处理数据。然后我需要将此处理后的数据*传递给*，`widget B`而后者在从*接收此数据*时`widget A`，将使用此数据调用一个函数，对其进行处理，并对其进行更多操作。

这两个小部件都是从`QWidget`. 我几乎可以肯定我需要使用信号和插槽，但我不明白如何实现函数调用部分。

我在这里一遍又一遍地阅读了 Qt 的解释：http: [//qt-project.org/wiki/Signals_and_Slots_in_PySide](http://qt-project.org/wiki/Signals_and_Slots_in_PySide)但是我无法弄清楚如何连接两个处理数据发出和发送的小部件。

我真的很感激这里的一些帮助。如果你不能用 Python 回答但又能胜任 C++，请尽管使用它来解释，而不是完全避免。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-30T15:07:39.167

这是一个示例，演示 PyQt4 中两个小部件之间的信号/插槽连接：

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-

from PyQt4 import QtCore, QtGui

class widgetB(QtGui.QWidget):
    procDone = QtCore.pyqtSignal(str)

    def __init__(self, parent=None):
        super(widgetB, self).__init__(parent)

        self.lineEdit = QtGui.QLineEdit(self)
        self.button = QtGui.QPushButton("Send Message to A", self)
        self.layout = QtGui.QHBoxLayout(self)
        self.layout.addWidget(self.lineEdit)
        self.layout.addWidget(self.button)

        self.button.clicked.connect(self.on_button_clicked)

    @QtCore.pyqtSlot()
    def on_button_clicked(self):
        self.procDone.emit(self.lineEdit.text())

    @QtCore.pyqtSlot(str)
    def on_procStart(self, message):
        self.lineEdit.setText("From A: " + message)

        self.raise_()

class widgetA(QtGui.QWidget):
    procStart = QtCore.pyqtSignal(str)

    def __init__(self, parent=None):
        super(widgetA, self).__init__(parent)

        self.lineEdit = QtGui.QLineEdit(self)
        self.lineEdit.setText("Hello!")

        self.button = QtGui.QPushButton("Send Message to B", self)
        self.button.clicked.connect(self.on_button_clicked)

        self.layout = QtGui.QHBoxLayout(self)
        self.layout.addWidget(self.lineEdit)
        self.layout.addWidget(self.button)

    @QtCore.pyqtSlot()
    def on_button_clicked(self):
        self.procStart.emit(self.lineEdit.text())

    @QtCore.pyqtSlot(str)
    def on_widgetB_procDone(self, message):
        self.lineEdit.setText("From B: " + message)

        self.raise_()

class mainwindow(QtGui.QMainWindow):
    def __init__(self, parent=None):
        super(mainwindow, self).__init__(parent)

        self.button = QtGui.QPushButton("Click Me", self)
        self.button.clicked.connect(self.on_button_clicked)

        self.setCentralWidget(self.button)

        self.widgetA = widgetA()
        self.widgetB = widgetB()

        self.widgetA.procStart.connect(self.widgetB.on_procStart)
        self.widgetB.procDone.connect(self.widgetA.on_widgetB_procDone)

    @QtCore.pyqtSlot()
    def on_button_clicked(self):
        self.widgetA.show()
        self.widgetB.show()

        self.widgetA.raise_()

if __name__ == "__main__":
    import sys

    app  = QtGui.QApplication(sys.argv)
    main = mainwindow()
    main.show()
    sys.exit(app.exec_()) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-01-15T14:41:01.210

为 PyQt5 更新@user1006989 的答案：

```
from PyQt5 import QtCore, QtGui, QtWidgets

class widgetB(QtWidgets.QWidget):

    procDone = QtCore.pyqtSignal(str)

    def __init__(self, parent=None):
        super(widgetB, self).__init__(parent)

        self.lineEdit = QtWidgets.QLineEdit(self)
        self.button = QtWidgets.QPushButton("Send Message to A", self)
        self.layout = QtWidgets.QHBoxLayout(self)
        self.layout.addWidget(self.lineEdit)
        self.layout.addWidget(self.button)

        self.button.clicked.connect(self.on_button_clicked)

    @QtCore.pyqtSlot()
    def on_button_clicked(self):
        self.procDone.emit(self.lineEdit.text())

    @QtCore.pyqtSlot(str)
    def on_procStart(self, message):
        self.lineEdit.setText("From A: " + message)

        self.raise_()

class widgetA(QtWidgets.QWidget):
    procStart = QtCore.pyqtSignal(str)

    def __init__(self, parent=None):
        super(widgetA, self).__init__(parent)

        self.lineEdit = QtWidgets.QLineEdit(self)
        self.lineEdit.setText("Hello!")

        self.button = QtWidgets.QPushButton("Send Message to B", self)
        self.button.clicked.connect(self.on_button_clicked)

        self.layout = QtWidgets.QHBoxLayout(self)
        self.layout.addWidget(self.lineEdit)
        self.layout.addWidget(self.button)

    @QtCore.pyqtSlot()
    def on_button_clicked(self):
        self.procStart.emit(self.lineEdit.text())

    @QtCore.pyqtSlot(str)
    def on_widgetB_procDone(self, message):
        self.lineEdit.setText("From B: " + message)

        self.raise_()

class mainwindow(QtWidgets.QMainWindow):
    def __init__(self, parent=None):
        super(mainwindow, self).__init__(parent)

        self.button = QtWidgets.QPushButton("Click Me", self)
        self.button.clicked.connect(self.on_button_clicked)

        self.setCentralWidget(self.button)

        self.widgetA = widgetA()
        self.widgetB = widgetB()

        self.widgetA.procStart.connect(self.widgetB.on_procStart)
        self.widgetB.procDone.connect(self.widgetA.on_widgetB_procDone)

    @QtCore.pyqtSlot()
    def on_button_clicked(self):
        self.widgetA.show()
        self.widgetB.show()

        self.widgetA.raise_()

if __name__ == "__main__":
    import sys

    app = QtWidgets.QApplication(sys.argv)
    main = mainwindow()
    main.show()
    sys.exit(app.exec_()) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-30T15:05:20.037

我认为您可以在这里使用两种不同的方法：使`A`and`B`类紧密耦合，或者使用主窗口作为中介。

在第一种情况下，您将不得不“让`A`知道`B`”，这意味着`A`引用`B`. 在这种情况下，您甚至根本不必执行信号和插槽，但您可以直接调用`B`'s 方法。

另一种方法是`A`发出一个带有参数的信号*，该参数*包含应该由 接收的数据，`B`主窗口捕获该信号并`B`使用数据调用。或者，您可以将数据放在一个`A`的属性中，让主窗口直接从这里获取它，而不将其作为信号的参数传递。

后一种方法可以让你写得更自由一点`A`，`B`因为`A`不必知道如何调用`B`.

在代码中解释它应该是这样的：

```
class A(QWidget):
    the_signal = Signal(...)
    def mouseReleaseEvent(self, event):
        self.a_function()
        self.the_data = self.produce_data()
        self.the_signal.emit()

class B(QWidget):
    def process_data(self, data):
        pass

class MainWindow(QMainWindow):
    def __init__(self):
        self.a_widget = A()
        self.b_widget = B()
        self.a_widget.the_signal.connect(self.do_process)
        # if the signal has the data as argument:
        # self.a_widget.the_signal.connect(self.b_widget.process_data)
    def do_process(self):
        self.b_widget.process_data(self.a_widget.the_data) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-30T15:09:43.143

可以使用几种方法来完成，最简单的一种（不是最聪明的）是建立中间连接，从对象 A 到主窗口，从主窗口到 B

主窗口.h

```
#ifndef MAINWINDOW_H
#define MAINWINDOW_H

#include <QMainWindow>
#include "classa.h"
#include "classb.h"

namespace Ui {
class MainWindow;
}

class MainWindow : public QMainWindow
{
    Q_OBJECT

public:
    explicit MainWindow(QWidget *parent = 0);
    ~MainWindow();

private:
    Ui::MainWindow *ui;
    classA *a;
    classB *b;

signals:
    void TosignalA();
    void TosignalB();

public slots:
    void emitB();

private slots:
    void on_pushButton_clicked();
};

#endif // MAINWINDOW_H 
```

主窗口.cpp

```
#include "mainwindow.h"
#include "ui_mainwindow.h"

MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    ui->setupUi(this);
    a = new classA(this);
    b=new classB(this);
    connect(this,SIGNAL(TosignalA()),this->a,SLOT(emitsig()));
    connect(this->a,SIGNAL(signal()),this,SLOT(emitB()));
    connect(this,SIGNAL(TosignalB()),this->b,SLOT(on_signal()));

}

MainWindow::~MainWindow()
{
    delete ui;
}

void MainWindow::emitB()
{
    emit TosignalB();
}

void MainWindow::on_pushButton_clicked()
{
    emit TosignalA();
} 
```

类.h

```
#ifndef CLASSA_H
#define CLASSA_H

#include <QObject>

class classA : public QObject
{
    Q_OBJECT
public:
    explicit classA(QObject *parent = 0);

signals:
    void signal();

public slots:
    void emitsig();

};

#endif // CLASSA_H 
```

类.cpp

```
#include "classa.h"

classA::classA(QObject *parent) :
    QObject(parent)
{

}

void classA::emitsig()
{
    emit signal();
} 
```

类b.h

```
#ifndef CLASSB_H
#define CLASSB_H

#include <QObject>
#include <QtGui>

class classB : public QObject
{
    Q_OBJECT
public:
    explicit classB(QObject *parent = 0);

signals:

public slots:
    void on_signal();

};

#endif // CLASSB_H 
```

类b.cpp

```
#include "classb.h"

classB::classB(QObject *parent) :
    QObject(parent)
{
}
void classB::on_signal()
{
    QMessageBox *msgBox = new QMessageBox();
     msgBox->setText("signal emitted!");
     msgBox->exec();
} 
```

# r - 如何索引异常值？

> ID：14090361
> 
> 赞同：0
> 
> 时间：2012-12-30T11:34:00.117
> 
> 标签：r, dataframe, outliers

我有下面的数据。我如何确定哪个作者的出版物数量最多？

我试试这个

```
 (which(status$researchers==max(status$publications)) 
```

但它似乎不起作用。

```
#PUBLICATIONS

researchers = c("Smith", "Johnson", "Williams", "Brown", "Jones", "Miller", "Davis", "García", "Rodriguez", "Wilson", "Martinez", "Anderson", "Taylor", "Thomas", "Hernandez", "Moore", "Martin", "Jackson", "Thompson", "White", "Lopez", "Lee", "Gonzalez", "Harris", "Clark", "Lewis", "Robinson", "Walker", "Perez", "Hall", "Young", "Allen", "Sanchez", "Wright", "King", "Scott", "Green", "Baker", "Adams", "Nelson", "Hill", "Ramirez", "Campbell", "Mitchell", "Roberts", "Carter", "Phillips", "Evans", "Turner", "Stapel", "Torres", "Parker", "Collins", "Edwards", "Stewart", "Flores", "Morris", "Nguyen", "Murphy", "Rivera", "Cook", "Rogers", "Morgan", "Peterson", "Cooper", "Reed", "Bailey", "Bell", "Gomez", "Kelly", "Howard", "Ward", "Cox", "Diaz", "Richardson", "Wood", "Watson", "Brooks", "Bennett", "Gray", "James", "Reyes", "Cruz", "Hughes", "Price", "Myers", "Long", "Foster ", "Sanders", "Ross", "Morales", "Powell", "Sullivan", "Russell", "Ortiz", "Jenkins", "Gutierrez", "Perry", "Butler", "Barnes", "Fisher", "De Jong", "Jansen", "De Vries", "vd Berg", "Van Dijk", "Bakker", "Janssen", "Visser", "Smit", "Meijer", "De Boer", "Mulder", "De Groot", "Bos", "Smeesters", "Vos", "Peters", "Hendriks", "Van Leeuwen", "Dekker", "Brouwer", "De Wit", "Dijkstra", "Smits", "De Graaf", "Van der Meer", "Muller", "Schmidt", "Schneider", "Fischer", "Meyer", "Weber", "Schulz", "Wagner", "Becker", "Hoffmann", "Wagemakers",  "Molenaar", "Jansen", "White", "Bargh", "Dijksterhuis", "Poldermans", "Kanazawa", "Lynne", "Ling", "Vorst", "Borsboom", "Wicherts")

articles = data.frame(cbind(researchers, publications))
write.table(articles, file = "scientific status.txt", sep = " ")

status = read.table("scientific status.txt", header = TRUE, sep = "", quote = "\"'") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T12:01:29.837

这不是一般响应，但在这里您只需要提取重复项。

```
researchers[duplicated(researchers)]
[1] "Jansen" "White"  ## this 2 authors have 1 publications more than others! 
```

要查看 ouliers，您可以这样做，例如：

```
plot(table(researchers)) 
```

![在此处输入图像描述](../Images/9ff5e4e17bdde6862e30b0d5d7cd26f5.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T12:07:22.767

目前尚不清楚您的数据代表什么。如果它已经按作者汇总，即每个作者有一行，并且该`publications`列包含出版物的数量，请执行以下操作：

```
status$researchers[which.max(status$publications)] 
```

相反，如果您的数据没有汇总，即每篇文章有一个，您可以执行以下操作：

```
tail(sort(table(status$researchers)), 1) 
```

# sql - 时间戳 SQL 与 Limit 之间的平均时间

> ID：14090363
> 
> 赞同：0
> 
> 时间：2012-12-30T11:34:16.623
> 
> 标签：sql, timestamp

我想知道是否有可能在 SQL 中找到一行时间戳之间的平均值。我在互联网上找到了一些解决方案。但就我而言，我不想包括超过 4 小时的差异。是否可以在 MSQL 中执行此操作？因此，例如以下时间戳：

```
12-12-12 18:00:00
12-12-12 17:50:00
12-12-12 17:30:00
12-12-12 11:00:00 
```

平均为：(20+10)/2=15

这可能吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T14:54:08.250

这个想法是在任何行上找到小于给定时间戳的最大时间戳。最兼容 SQL 的方式是使用相关子查询，它适用于任何数据库。

但是，时间戳在数据库之间通常不兼容，取差和比较常量的功能也不是标准的。这是 MySQL 中的一种方法，它将所有内容转换为算术的秒数：

```
select avg(TIME_TO_SEC(TIMEDIFF(TimeStamp, prevTimeStamp))
from (select t.*,
             (select max(t2.timestamp) from t t2 where t2.timestamp < t.timestamp) as prevTimeStamp
      from t
     ) t
where TIME_TO_SEC(TIMEDIFF(TimeStamp, prevTimeStamp) < 4*60*60 
```

子查询应该在任何数据库中工作。数据库之间的时间函数不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T12:32:02.410

你对信息有点害羞。也许您可以发布您现有的查询，以便我们获得更好的视角？

我假设您指的是 Microsoft SQL。我还希望您有其他标识符来关联时间戳，因此我将让您确定如何限制您的结果集。

我最初的建议是使用嵌套查询：

```
--Sample Table
declare @TimeTable table ( RowId int Identity, Stamp datetime)
insert into @TimeTable select '12/1/2012 04:00'
insert into @TimeTable select '12/1/2012 04:30'
insert into @TimeTable select '12/1/2012 05:00'

--Test Query -  Find the next record
select Stamp,
    (
        select top 1 Stamp 
        from @TimeTable t2 
        where RowId > T1.RowId
    ) as CompareDate
from @TimeTable T1

--Test Query - Instead of dates, show difference in minutes
select
    datediff(n,
        Stamp,
            (
            select top 1 Stamp 
            from @TimeTable t2 
            where RowId > T1.RowId
            )
        ) as Mins
from @TimeTable T1

--Finally we average the result of minutes
select avg(AverageTable.Mins)
from 
    (
        select
            datediff(n,
                Stamp,
                    (
                    select top 1 Stamp 
                    from @TimeTable t2 
                    where RowId > T1.RowId
                    )
                ) as Mins
        from @TimeTable T1
    ) as AverageTable 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T12:10:15.260

想象一下你有

```
12-12-12 18:00:00
12-12-12 17:50:00
12-12-12 17:30:00
12-12-12 11:00:00
12-12-12 10:50:00
12-12-12 10:30:00 
```

并且您不想包含超过 4 小时的差异。你会拒绝哪些时间戳？嗯...您可以建立总平均值，包括所有时间戳。然后你可以计算它的变化并拒绝某些`outliers`。查看上面的行时，异常值会是什么？您必须拒绝整个`morning cluster`或整个`evening cluster`. 但是，我敢肯定这两个都不是你想要的。因此，您应该将`rejection criteria` *> 4 小时*视为坏事，并为您想要的东西找到更有意义的东西。

# java - HQL如何查询String的ElementCollection

> ID：14090364
> 
> 赞同：8
> 
> 时间：2012-12-30T11:34:34.720
> 
> 标签：java, hibernate, jdbc, hql

我有课

```
public User{
   Long id;
   Set<String> roles;
} 
```

如何查询`User`具有角色的所有对象`"ADMIN"`

**编辑：**

我正在使用休眠 3.0.5。并尝试了大多数明显的方法。

`from Users where roles in('ADMIN')`给出 JDBC 错误。 `from Users u where u.roles in('ADMIN')`给出一个类转换异常

我认为这可能是这个特定版本的休眠的问题。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2014-04-18T10:38:14.990

我找到了解决方案：

```
"from User as user where 'ADMIN' in elements(user.roles)"; 
```

不知何故，hql 函数 value() 必须对此有所帮助，您也可以尝试一下，但是上面的 hql 查询对我有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T12:03:23.107

您可以使用下面的查询

```
"from User as user where user.id in (select user.id from Role as role left join role.user as user where role.name = 'ADMIN')" 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-12-30T11:40:20.060

这应该这样做：

```
session.createQuery("from User where roles in ('ADMIN')"); 
```

# ruby-on-rails - 无法批量分配受保护的属性：confirmed_at

> ID：14090365
> 
> 赞同：2
> 
> 时间：2012-12-30T11:34:40.597
> 
> 标签：ruby-on-rails, devise

我正在使用 rails 中的设计身份验证创建一个演示应用程序

我正面临这个错误

```
rake aborted!
Can't mass-assign protected attributes: confirmed_at 
```

我的 User.rb 类是

```
class User < ActiveRecord::Base
  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :name, :email, :password, :password_confirmation, :remember_me
  # attr_accessible :title, :body

validates_presence_of :name
validates_uniqueness_of :name, :email, :case_sensitive => false
end 
```

我的 db.seed.rb 文件代码是

```
# This file should contain all the record creation needed to seed the database with its default values.
# The data can then be loaded with the rake db:seed (or created alongside the db with db:setup).
#
# Examples:
#
#   cities = City.create([{ name: 'Chicago' }, { name: 'Copenhagen' }])
#   Mayor.create(name: 'Emanuel', city: cities.first)

puts 'SETTING UP DEFAULT USER LOGIN'
user = User.create! :name => 'First User', :email => 'user@example.com', :password => 'please', :password_confirmation => 'please', :confirmed_at => DateTime.now
user2 = User.create! :name => 'Second User', :email => 'user2@example.com', :password => 'please', :password_confirmation => 'please', :confirmed_at => DateTime.now
puts 'New user created: ' << user.name 
```

user.rb 是一个模型类。当我运行命令 $ bundle exec rake db:seed

我正面临这个错误 rake aborted！无法批量分配受保护的属性：confirmed_at

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T12:23:03.733

您可以使用：

```
Model.create!(fieldsValues, :without_protection => true) 
```

在你的情况下：

```
User.create!({:name => 'First User', :email => 'user@example.com', :password => 'please', :password_confirmation => 'please', :confirmed_at => DateTime.now}, :without_protection => true) 
```

`without_protection`将允许您设置受保护字段的值

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-30T11:40:07.310

在创建用户时您实际上不必设置`confirmed_at`，相反，您可以调用`confirm!`每个用户对象就完成了，这更好，因为调用`confirm!`除了设置之外还有很多其他的事情`confirmed_at`。

```
user = User.create! :name => 'First User', :email => 'user@example.com', :password => 'please', :password_confirmation => 'please'
user.confirm! 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-30T12:46:04.177

您可以使用上述两个答案中的任何一个或在 application.rb 中禁用保护来将白名单属性设置为 false，例如：

```
config.active_record.whitelist_attributes = false 
```

而且，您可以将 confirm_at 添加为 attr_accessible 但您不需要像 Ahmad Sherif 提到的那样设置 confirm_at 来创建新用户。

# unix - 在多线程（带有pthreads）进程中fork（）之后，所有可重入函数都可以安全使用吗？

> ID：14090368
> 
> 赞同：2
> 
> 时间：2012-12-30T11:35:12.150
> 
> 标签：unix, pthreads, fork

我正在开发一个 C++ 项目，该项目使用 pthreads 进行多线程处理，但有时也需要这样做`fork`。我已经阅读了代码中散布的警告，即以后*永远不*应该进行内存分配，但在找到[这篇文章](http://www.linuxprogrammingblog.com/threads-and-fork-think-twice-before-using-them)`fork`之前我并不知道确切的原因。我总结了几点：

1.  当主线程`fork`s时，其他线程可能正在调用某个库函数；`fork`ing 不会复制其他线程，从而使调用永远卡住；

2.  `malloc`使用全局变量，并使用锁来实现线程安全。因此，如果父进程的一个线程恰好在`malloc`调用的中间，则`fork`ed 子进程实际上有一个`malloc`永远卡住且永远无法恢复的调用。同样的事情`printf`，等等。

我意识到这与[reentrancy](http://en.wikipedia.org/wiki/Reentrancy_%28computing%29)有关，文章中没有提到这个术语。该声明似乎等同于：

1.  `f` *如果在父进程的主线程中*调用了一些非进入函数，子进程就不能调用`f`。

2.  `malloc`是不可重入的。

这是否正确，意味着所有可重入函数都可以在`fork`ing 之后安全使用？还是我仍然错过了 pthread 和传统 UNIX 进程模型如何交互的一些讨厌的角落？

如果我是对的，还有另一个问题：`malloc`已知是不可重入的，但是 C++`new`呢？我在谷歌上搜索的相关结果并不多（主要是因为很难找到正确的“新”：），但至少有一个声明[`new` **是**可重入](https://stackoverflow.com/questions/4613077/c-using-the-new-operator-efficiently#4613231)的。还有一个关于整个 C++ 标准库的[相关问题没有令人满意的答案。](https://stackoverflow.com/questions/4036520/is-libstdc-reentrant-library)

PS。对于感兴趣的，C++ 项目是[fish shell](https://github.com/fish-shell/fish-shell/)。shell 肯定需要分叉，并且使用线程来提高响应能力。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T11:59:05.177

正如@cnicutar 所指出的，文章确实提到您可以在分叉后调用异步安全函数。根据[这篇文章](http://www.ibm.com/developerworks/linux/library/l-reent/index.html)，可重入函数始终是异步的（但不是相反），因此在分叉后调用是安全的。

我的主要问题到此结束。我会在另一个线程中问额外的问题（没有双关语）。

[更新：我在这里](https://stackoverflow.com/questions/14090589/is-cs-new-operator-reentrant-or-async-safe)问了额外的问题。

# selenium - find_element_by_tag_name 和 find_elements_by_tag_name 有什么区别？

> ID：14090369
> 
> 赞同：2
> 
> 时间：2012-12-30T11:35:20.470
> 
> 标签：selenium, selenium-webdriver

单数名称的函数和复数名称的函数有什么区别？

```
find_element_by_name
find_elements_by_name 
```

和

```
find_element_by_tag_name
find_elements_by_tag_name 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-30T12:08:21.713

我对 python 和 selenium 不是很熟悉，但大多数 DOM 函数的行为方式相同。

`find_element_by_name`应该返回一个名称属性与名称匹配的元素（找到的第一个实例）

```
<input name="username" type="text" value="Enter Username" /> 
```

`find_elements_by_name`将返回匹配元素的集合/数组

```
<input name="continue" type="submit" value="Login" />
<input name="continue" type="button" value="Clear" /> 
```

`find_element_by_tag_name`将类似只返回具有匹配标签名称的元素的第一个实例。

```
find_element_by_tag_name("a") // return the first anchor 
```

`find_elements_by_tag_name`将再次返回匹配标签名称的集合/数组。

如果可以链接这些命令，或者在存储的元素上调用它们，则`get_element(s)_*`函数的结果将与其调用的节点相关。

```
<html>
  <body>
    <div>
       <a href="#1">Example 1</a>
       <a href="#2">Example 2</a>
    </div>
    <span>
       <a href="#3">Example 3</a>
       <a href="#4">Example 4</a>
    </span>
  </body>
</html> 
```

例子

`find_element_by_tag_name("a")`==`Example 1`

`find_element_by_tag_name("span").find_element_by_tag_name("a")`==`Example 3`

对集合/数组的迭代

```
links = browser.find_elements_by_tag_name("a")

for link in links
 # link should be a Selenium WebElement? 
```

如果有疑问，您可以转储整个结果以查看其中的内容。

[调试 python 对象/属性](https://stackoverflow.com/questions/192109/is-there-a-function-in-python-to-print-all-the-current-properties-and-values-of)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-17T16:10:42.467

## find_element_by_tag_name(tag_name)

具有单数名称的函数是[`find_element_by_tag_name(tag_name)`](https://www.selenium.dev/selenium/docs/api/py/webdriver_remote/selenium.webdriver.remote.webdriver.html#selenium.webdriver.remote.webdriver.WebDriver.find_element_by_tag_name)通过标签名称查找元素并返回该元素。

*   细节：

    ```
    find_element_by_tag_name(tag_name)        

    Args :  
        name - name of html tag (eg: h1, a, span)

    Returns :   
        WebElement - the element if it was found

    Raises :    
        NoSuchElementException - if the element wasn’t found 
    ```

*   用法 ：

    ```
    element = driver.find_element_by_tag_name("h1") 
    ```

* * *

## find_elements_by_tag_name(tag_name)

具有复数名称的函数是[`find_elements_by_tag_name(tag_name)`](https://www.selenium.dev/selenium/docs/api/py/webdriver_remote/selenium.webdriver.remote.webdriver.html#selenium.webdriver.remote.webdriver.WebDriver.find_elements_by_tag_name)通过标签名称查找元素并返回一个列表。

*   细节：

    ```
    find_elements_by_tag_name(tag_name): 

    Args :  
        name - name of html tag (eg: h1, a, span)

    Returns :
        list of WebElements - a list with elements if any was found. An empty list if not 
    ```

*   用法 ：

    ```
    elements = driver.find_elements_by_tag_name("h1") 
    ```

# matlab - 如何在matlab中绘制受约束的函数

> ID：14090373
> 
> 赞同：-1
> 
> 时间：2012-12-30T11:35:45.757
> 
> 标签：matlab, optimization, plot, constraints, inequality

我有这个功能：

```
function f=cost(x)
f=1.10471*x(1)^2*x(2)+0.04811*x(3)*x(4)*(14.0+x(2)); 
```

受制于

```
g(1)=tau-tau_max;
g(2)=sigma-sigma_max;
g(3)=x(1)-x(4);
g(4)=0.10471*x(1)^2+0.04811*x(3)*x(4)*(14+x(2))-5.0;
g(5)=0.125-x(1);
g(6)=delta-delta_max;
g(7)=P-PcX; 
```

所有 g[1..7] 应该 <= 0

我必须将它们中的任何两个保持为常数并绘制 f(x) 的上限和下限分别为 (x1..x4)

```
LowerBound=[0.125  0.1   0.1  0.125];
UpperBound=[5.0   10.0  10.0    5.0]; 
```

提前致谢...

编辑：到目前为止我做了什么：

```
function [x1,x2,x3,x4]=objFuncPlot
[x2, x3] = meshgrid(0.1:.1:10, 0.1:.1:10);
//x1 and x4 is constant
x1=0.1996;
x4=0.2107;
//calculating constraints
[g1,g2,g3,g4,g5,g6,g7]=constraints(x1,x2,x3,x4); 
G1=[g1,g2,g4,g6,g7];
G2=[g3,g5];
infeasible=~all(G1(:)<=0) | ~all(G2(:)<=0);
//objective function
f=1.10471.*x1^2.*x2+0.04811.*x3.*x4.*(14.0+x2);
f(infeasible)=nan;
//plotting surf
surf(x2,x3,f,'LineStyle','none');
view(68,20)
hold on
xlabel('x');ylabel('y');zlabel('z');
hold off

//Constraints & Constants & Equations
function [g1,g2,g3,g4,g5,g6,g7]=constraints(x1,x2,x3,x4)
P=6000;
L=14;
E=30.*10^6;
G=12.*10^6;
tau_max=13600;
sigma_max=30000;
delta_max=0.25;
M=P*(14+x2./2);
R=sqrt(x2^2./4+(x1+x3)^2./4);
J=2.*(x1.*x2.*sqrt(2).*(x2^2/12+(x1+x3)^2/4));
tau_one=P./(sqrt(2).*x1.*x2);
tau_two=(M.*R)./J;
tau=sqrt(tau_one^2+2.*tau_one.*tau_two.*x2./(2.*R)+tau_two^2);
sigma=(6.*P.*L)./(x4.*x3^2);
delta=(4.*P.*L^3)./(30.*10^6.*x4.*x3^3);
PcX=4.013.*E./L^2.*sqrt(x3^2.*x4^6./36).*(1-x3.*sqrt(E./(4.*G))./(2.*L));
g1=tau-tau_max;
g2=sigma-sigma_max;
g3=x1-x4;
g4=0.10471.*x1^2+0.04811.*x3.*x4.*(14+x2)-5.0;
g5=0.125-x1;
g6=delta-delta_max;
g7=P-PcX; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T14:41:56.107

你有一个由四个自变量组成的函数，所以本质上是一个五维的东西。你想画什么？？？？？？你有一个显示器，或者一张纸。这些东西有两个维度，而不是五个维度。

这里的约束并不那么重要，因为无论如何您都无法绘制这种关系。

仅仅想做某事是不够的。如果愿望是马，乞丐就会骑马。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T20:16:47.977

一个简单的方法是定义一个新函数，当它的参数小于或等于 0 时返回 1，并为 +ve argumentmnt 返回 NaN

```
function H = mod_neg_step(argument)
         H = zeros(size(argument));
         H(argument<= 0) = 1;
         H(argument> 0) = NaN;
end 
```

然后将您的函数 f 重新定义为

```
f=1.10471*x(1)^2*x(2)+0.04811*x(3)*x(4)*(14.0+x(2));
f=f*mod_neg_step(g(1))*mod_neg_step(g(2))*mod_neg_step(g(3))*mod_neg_step(g(4))...
  *mod_neg_step(g(5))*mod_neg_step(g(6))*mod_neg_step(g(7)); 
```

这将确保当 g(1)...g(7) 为正时，您的函数 f 返回值 NaN。只有当所有 g(1)...g(7) 都为 0 或负时，函数 f 才会返回

```
f=1.10471*x(1)^2*x(2)+0.04811*x(3)*x(4)*(14.0+x(2)); 
```

# compiler-construction - As2 编译器对代码行数有限制吗？

> ID：14090374
> 
> 赞同：0
> 
> 时间：2012-12-30T11:35:50.263
> 
> 标签：compiler-construction, actionscript-2, flash-cs5

我编写了一个 AS2 代码来开发某个应用程序。

当我的代码超过 2352 行时，swf 不会编译，也不会给我任何错误。我检查了任何语法错误，但没有。

为 as2 编译器编写的行数是否有特定限制？请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T12:25:25.393

Hm, I don't think so. To be sure, I wrote a script to generate some random AS2 code (makes random variables, random loops, if statements, methods + calls, objects, and trace statements). The result was an .as file that was over 13,000 lines long which ran with no problems under AS2 inside the flash cs5 ide.

# emacs - 字体集在 emacs 中是如何工作的？

> ID：14090375
> 
> 赞同：3
> 
> 时间：2012-12-30T11:35:56.067
> 
> 标签：emacs, character-encoding, fonts

我阅读了一些关于 Emacs 中字体配置的文档，我发现了两个概念，它们是`FONT`和`FONTSET`. 目前，我的理解是，`fontset`是一组`font`按`script`（又名编码）分组的，我们可以创建一个字体集并指定一些字符集来使用特定的字体。

但是直到现在，一些实验代码并不总是像我希望的那样工作，所以我想找出问题所在？

首先，我创建自己的字体集

```
(create-fontset-from-fontset-spec
 "-outline-Cousine-normal-normal-normal-*-*-*-*-*-*-*-fontset-Consolas") 
```

然后我想将它用作当前的 emacs 字体集（或者这可能吗？我不确定），以下代码似乎有效：

```
(set-frame-font "fontset-Consolas" nil t) 
```

然后我尝试为某些特定字符或编码自定义我的字体集：

```
(set-fontset-font "fontset-Consolas" 'han "Microsoft YaHei" nil 'prepend) 
```

但是，很遗憾这不起作用，并且`'han`category中的char并没有改变它的字体。然后我得到了一些示例代码并尝试以下代码：

```
(set-fontset-font "fontset-Default" 'han "Microsoft YaHei" nil 'prepend) 
```

这一次，它起作用了，'han 类别中的字符使用正确的字体。但为什么我需要改变`fontset-default`而不是我的`fontset-consolas`. 然后我尝试使用以下代码还原我的更改：

```
(set-fontset-font "fontset-Default" 'han "Consolas" nil 'prepend) 
```

但是，`'han`char 类别保持不变，我希望这些 char 不应该正确显示，因为我使用的字体不包含那些 char。为什么`fontset-default`这次改变不起作用？

除了上面的代码，还有一些更普遍的问题：

1.  如何将emacs默认字体集更改为我自己的，可以吗？
2.  是多个字体集同时工作还是只有一个字体集工作？为什么我的测试代码需要更改`default`而不是我的？
3.  第二`set-fontset-font`个参数是`target`，如何知道哪个脚本名称适合当前光标下的字符。我可以`describe-char`用来显示 char 信息，但我找不到这个描述中的哪个词是该`target`参数的正确词。
4.  emacs中字体配置有哪些值得注意的地方？

我的问题有点长，所以感谢您的耐心并分享您的建议。

# c# - c#状态栏menuItem中的记事本实现

> ID：14090377
> 
> 赞同：0
> 
> 时间：2012-12-30T11:36:15.680
> 
> 标签：c#, textbox, statusbar, multiline, notepad

我正在编写一个像记事本一样的 Windows 应用程序，但采用 MDI 格式。我为此找到了很多示例，但没有一个实现了视图菜单项中的状态栏，我的意思是在每个记事本中都有一个菜单名为 View 的项目，如果单击此项目，则可以在未选中自动换行选项时激活或停用状态栏，如果这样做，行号和列号会出现在 StatusBarLabel 中，请告诉我应该如何实现我的应用程序中记事本的这一部分？我为此目标找到了这些用户定义的属性，但它们对我不起作用！

```
public int CurrentColumn
{
     get { return textBox1.SelectionStart - textBox1.GetFirstCharIndexOfCurrentLine() + 1; }
}

public int CurrentLine
{
    get { return textBox1.GetLineFromCharIndex(textBox1.SelectionStart) + 1; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T18:35:05.937

尽管我从未使用过此函数，[但 TextBoxBase.GetPositionFromCharIndex](http://msdn.microsoft.com/en-us/library/system.windows.forms.textboxbase.getpositionfromcharindex.aspx)看起来就像您需要的那样。它给出了一个点，它告诉我您将从单个函数中获取列和行信息。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-04T10:31:41.210

回答太晚了，但是，

根据我对您的问题的理解，我认为您也想实现一个状态栏。为此，您可以将工具箱中的控件**StatusStrip**添加到存在输入区域的表单中。

之后，您必须添加一个状态标签，您将在其中显示当前行号和当前行中的插入符号位置，即列号。您可以通过单击小按钮并从出现的列表中选择状态标签来添加标签。它看起来像 [这样](https://i.stack.imgur.com/G9jj2.png)：

这是可选的，但您可以通过将对齐属性更改为 Right 来将状态标签向右对齐（就像在 Microsoft 记事本中一样）。如果在属性窗口中找不到对齐属性。您可以通过添加以下行将其手动添加到表单的 Designer.cs 文件中：

```
 this.StatusLabel.Alignment=System.Windows.Forms.ToolStripItemAlignment.Right; 
```

您还可以通过将 Border 属性更改为**Etched来为左侧标签添加边框**

您描述的用户定义属性用于从多行文本框获取当前行和列。

正如您所提到的，这些属性对您不起作用，您可以在 TextBox 的**SelectionChanged**事件中使用它们，这样当您在 TextBox 中移动光标时它会不断更新。如果您使用这些属性，它将看起来像这样。

```
private void TextBox_SelectionChanged(object sender, EventArgs e)
        {
            StatusLabel.Text = String.Format("Ln {0}, Col {1}", CurrentLine, CurrentColumn);
        } 
```

要隐藏状态栏，您可以通过以下方式切换其可见性：

```
StatusBar.Visible=!StatusBar.Visible; 
```

# hibernate - SELECT 查询上的 Hibernate ConstraintViolationException

> ID：14090386
> 
> 赞同：3
> 
> 时间：2012-12-30T11:38:09.423
> 
> 标签：hibernate, hql, unique-constraint, transactional

我有一个带有多字段唯一约束的持久类。但是定义的唯一约束对我来说是不够的，因为在其中一个字段不相等但相似的值也是唯一的。

我实现了一个`checkUniqueConstraint`方法。在 DAO 类的添加和更新方法中，我`checkUniqueConstraint`在添加或更新持久对象之前调用。

`checkUniqueConstraint`方法只需运行一个 SELECT 查询来查找类似于输入的对象并在找到一些对象时抛出一个检查异常。

```
public class PersistClassDao {    
public void checkUniqueConstraint(PersistClass persistObject) throws DuplicateEntityException {
    /**
    * creating a query string that find persist objects similar to input parameter.
    **/
    try {
        PersistClass result = (PersistClass) query.uniqueResult();
        if(result != null && (persistObject.getId() == null  || persistObject.getId() != result.getId())){
            throw new DuplicateEntityException(exceptionMessage, "");
        } 
    } catch (NonUniqueResultException e) {
        throw new DuplicateEntityException(exceptionMessage);
    }
}

public long add(/* field of new persistObject*/) throws DuplicateEntityException {
    //creates a transisent instance of persistObject
    PersistClass newObject = getPersistClass(/* field of new persistObject*/);
    checkUniqueConstraint(newObject);
    try {
        getCurrentSession().save(newObject);
        getCurrentSession().flush();
        return newObject.getId();
    } catch (ConstraintViolationException e) {
        throw new DuplicateEntityException();
    }
} 
```

我有一个用于添加的事务服务方法和另一个用于更新的方法。

当我运行我的测试时

*   首先添加2个persistObjects（通过服务方法）。
*   然后更新其中一个（通过服务方法），使其与另一个相似
*   我希望抛出 DuplicatException

但实际上是 org.hibernate.exception。通过 checkUniqueConstraint 抛出 ConstraintViolationException！

为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T08:53:41.140

问题必须出在**FlushMode**中。默认情况下，Hibernate 在执行查询之前会刷新实体，请参阅[http://docs.jboss.org/hibernate/core/3.5/javadocs/org/hibernate/FlushMode.html#AUTO](http://docs.jboss.org/hibernate/core/3.5/javadocs/org/hibernate/FlushMode.html#AUTO)。

您必须已部分初始化新实体，将它们与会话绑定的实体相关联，现在尝试进行查询。Hibernate 会话在查询之前执行刷新并失败并出现 ConstraintViolationException，这没关系。

解决方案：

1.  在整个应用程序的 cfg 文件中将 FlushMode*更改*为COMMIT *，*
2.  *通过session.setFlushMode(FlushMode.COMMIT)*只修改一个会话或
3.  *您可以通过调用query.setFlushMode(FlushMode.COMMIT)*将更改的影响缩小到单个查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-08T10:55:57.120

只有在. `select`_ 默认情况下，当调用或时，Hibernate 不会立即将更改提交到数据库。这是为了利用 JDBC 批处理来提高性能。Hibernate 只会在会话**关闭**、**事务提交**或向数据库发出**选择**时刷新对数据库的更改。之前的刷新是必要的，因为如果没有将先前的更改刷新到数据库，查询结果可能不正确。`insert / update``select``save``update`******`select`******

 ******因此，您的插入/更新实际上是在 find 方法之前调用的对象创建/更新，并且仅在`select`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T13:14:05.493

我怀疑你里面的 getter 或 setter`PersistClass`不是简单的 get/set 逻辑。如果您的 getter 没有返回 Hibernate 传递给 setter 的相同实例，Hibernate 将在事务完成时刷新“脏”实体。

你能粘贴你的`PersistClass`代码，也许是 Hibernate 日志来验证它吗？******

# java - 更新链表的数据

> ID：14090388
> 
> 赞同：-4
> 
> 时间：2012-12-30T11:38:10.873
> 
> 标签：java, linked-list

是否可以更新 LinkedList 节点的数据？如果是，那怎么办？我真的需要一个提示！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T11:58:58.687

这里有两个选项，取决于您是否存储可变类型：

1.  如果您要存储可变类型（带有 getter/setter 方法的 frex 简单 Bean），您可以简单地更新对象的状态（与 LinkedList 实现本身无关）
2.  [如果您要存储不可变类型（frex 字符串），则可以使用LinkedList.set()](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedList.html#set%28int,%20E%29)用新实例覆盖链表中该位置的前一个元素

如果您要存储自定义类型，那么这确实是设计问题（您是否想让该类型可变）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T11:40:37.980

是的，你可以这么做。使用[`LinkedList.set(pos, newValue)`](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedList.html#set%28int,%20E%29).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T12:02:22.783

> 但我可以手动完成吗？如果是，比怎么样？

如果通过“手动执行”，您的意思是打破`LinkedList`类封装并直接更新类私有数据结构......

*   可以使用反射来做到这一点。
*   尝试这是一个非常糟糕的主意/不好的做法。

正确的方法是使用`set`操作。如果您担心迭代链表的成本，请使用不同的`List`实现。上的`set`操作很快`ArrayList`，或者您可以使用自定义链表实现来完成此操作。

# arrays - Matlab：将双向量数组转换为字符串单元格数组

> ID：14090392
> 
> 赞同：8
> 
> 时间：2012-12-30T11:38:45.070
> 
> 标签：arrays, string, matlab, double, cell

```
map1 = containers.Map({'212','2','12','44'},[4,5,6,7]);
keyset = str2double(keys(map1)); 
```

现在我对键集进行了一组操作，这些操作将返回

```
Keyset= [203,2,12,39]; 
```

我厌倦了以下内容：

```
num2cell(num2str(keyset));
num2cell(num2str(keyset,1));
num2cell(num2str(keyset,'%11.0g'));
num2cell(num2str(keyset,3)); 
```

以上所有在最终的单元格数组中给出了奇怪的结果。我只需要将整数用作另一个容器映射的键。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-31T00:13:04.453

我提出了 5 个额外的解决方案，其中三个比目前提出的解决方案快 4-5 倍。从中吸取的教训是：

*   `num2str`是缓慢的
*   `cellfun`并且`arrayfun`会增加大量开销
*   有多种方法可以将数值数组转换为字符串元胞数组。

三个最高性能的解决方案在性能方面非常相似：

循环分配单元格元素

```
n4 = length(Keyset);
tmp4 = cell(n4,1);
for i4 = 1:n4
    tmp4{i4} = sprintf('%i',Keyset(i4));
end 
```

将所有转换为字符串并调用`textscan`

```
tmp6 = textscan(sprintf('%i\n',Keyset'),'%s');
tmp6 = tmp6{1}; 
```

将所有转换为字符串并调用`regexp`.

```
tmp3 = regexp(sprintf('%i ',Keyset),'(\d+)','match'); 
```

* * *

这是带有时间的完整测试代码：

```
function t = speedTest

t=zeros(7,1);
for ii=1:100, 
    Keyset=randi(1,10,100); % random keys
    tic; 
    eval( [ 'tmp1 = { ', sprintf(' %d ', Keyset), ' }; '] );
    t(1)=t(1)+toc; 
    tic;
    tmp2=arrayfun(@num2str, Keyset, 'Uniform', false);
    t(2)=t(2)+toc;

    tic;
    tmp3 = regexp(sprintf('%i ',Keyset),'(\d+)','match');
    t(3) = t(3)+toc;

    tic;
    n4 = length(Keyset);
    tmp4 = cell(n4,1);
    for i4 = 1:n4
        tmp4{i4} = sprintf('%i',Keyset(i4));
    end
    t(4) = t(4)+toc;

    tic;
    n5 = length(Keyset);
    tmp5 = cell(n5,1);
    for i5 = 1:n5
        tmp4{i5} = num2str(Keyset(i5));
    end
    t(5) = t(5)+toc;

    tic;
    tmp6 = textscan(sprintf('%i\n',Keyset'),'%s');
    tmp6 = tmp6{1};
    t(6) = t(6)+toc;

    tic;
    tmp7 = num2cell(Keyset);
    tmp7 = cellfun(@(x)sprintf('%i',x),tmp7,'uni',false);
    t(7) = t(7)+toc;

end;
t

t =

    1.7820
   21.7201
    0.4068
    0.3188
    2.2695
    0.3488
    5.9186 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-30T12:06:49.617

怎么样：

```
arrayfun(@num2str, Keyset, 'Uniform', false)' 
```

这应该为您的示例产生一个 4×1 单元格数组：

```
ans = 
    '203'
    '2'
    '12'
    '39' 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-30T11:53:56.997

怎么样：

```
eval( [ 'NewKeySetStr = { ', sprintf(' %d ', Keyset), ' }; '] );
NewKeySetStr 
```

我不确定这是实现预期结果的最优雅的方式，但它似乎工作......

将运行时与 Eitan 的解决方案进行比较：

```
t=zeros(2,1);
for ii=1:100, 
    Keyset=randi(1,10,100); % random keys
    tic; 
    eval( [ 'NewKeySetStr = { ', sprintf(' %d ', Keyset), ' }; '] );
    t(1)=t(1)+toc; 
    tic;
    tmp=arrayfun(@num2str, Keyset, 'Uniform', false);
    t(2)=t(2)+toc;
end;
t 
```

产量：

```
t =
   0.3986
   2.2527 
```

似乎提议的解决方案更快。

注意：似乎当前的实现`cellfun`没有针对速度进行优化。据传，在未来的版本中，Mathworks 打算引入更好的`cellfun`. 因此，Eitan 的解决方案在当前版本中可能不是最优的，但它似乎是 Matlab 技能的一个很好的实践。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-30T12:42:36.790

想出了如何使用拆分功能改进大整数的正则表达式解决方案。此外，我被 Jonas 的一个解决方案误导了，该解决方案没有评估 for 循环中的所有 sprintf 调用。编辑：还添加了评论中建议的新 2016 字符串功能。

```
t = speedTest()

function t = speedTest

t=zeros(5,1);
for ii=1:100
    Keyset=randi(10000000,10,1000); % random keys

    tic;
    n4 = numel(Keyset); % changed to numel (length only gives number of columns)
    tmp1 = cell(n4,1);
    for i4 = 1:n4
        tmp1{i4} = sprintf('%i',Keyset(i4));
    end
    t(1) = t(1)+toc;

    tic;
    tmp2 = regexp(sprintf('%i ',Keyset),'(\d+)','match');
    t(2) = t(2)+toc;

    tic;
    tmp3 = regexp(sprintf('%i ',Keyset),' ','split');
    tmp3(end) = [];
    t(3) = t(3)+toc;

    tic;
    tmp4 = string(Keyset(:));
    t(4) = t(4)+toc;

    # test in case you want to go back to characters
    tic;
    tmp5 = char(string(Keyset(:)));
    t(5) = t(5)+toc;
end
end 
```

带有 split 的 regexp 解决方案会产生更好的性能，而 string 方法甚至更快：

```
t =

    6.1916
    1.1292
    0.8962
    0.6671
    0.7523 
```

# android - 用相机拍照 Android 在 Eclipse 中出错

> ID：14090394
> 
> 赞同：2
> 
> 时间：2012-12-30T11:38:46.983
> 
> 标签：android, image

Eclipse 在以下代码中给了我一个 TAKE_PICTURE 错误。我尝试用 CAMERA_PIC_REQUEST 替换它并得到同样的错误。我在这里为 Android 4.2 开发。

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    File file = new File(Environment.getExternalStorageDirectory(), "test.jpeg");
    Uri outputFileUri = Uri.fromFile(file);

    Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
    intent.putExtra(MediaStore.EXTRA_OUTPUT, outputFileUri);

    startActivityForResult(intent, TAKE_PICTURE);
} 
```

任何想法我必须做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-21T18:02:29.417

我想这是您从某处复制的不完整示例代码，startActivityForResult 函数接收任意请求代码，稍后您自己的应用程序将使用该代码来找出刚刚完成的活动，如下所示：

```
startActivityForResult(i, 100);
...    

startActivityForResult(i, 200);
...

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == 100){
        //First Activity has just finished
    }
    if (requestCode == 200){
        //Second Activity has just finished
    }
} 
```

所以基本上，你应该在你的应用程序中为 TAKE_PICTURE 定义一个任意值。

# java - 是否可以在后台线程内交换片段

> ID：14090395
> 
> 赞同：4
> 
> 时间：2012-12-30T11:38:49.253
> 
> 标签：java, android, asynchronous, android-asynctask, android-fragments

我的想法是在 AsyncTask 中创建新片段，然后在 onPostExecute 上将其与显示的进度条片段交换。我的问题是该片段永远不会交换，因此它与进度条片段保持一致。这不可能吗？这是一个不好的方法吗？我应该在 DetailFragment 中有进度条吗？（会有很多带有进度条的片段）

```
@Override
protected void onStart() {      
    super.onStart();
    getSupportFragmentManager().beginTransaction()
            .replace(R.id.content_frame, new ProgressBarFragment()).commit();
    TestSwapFragment d = new TestSwapFragment();
    d.execute(data);
}

class TestSwapFragment extends AsyncTask<FragmentData, Void, MyFragment> {

FragmentData data = null;

    @Override
    protected MyFragment doInBackground(FragmentData... params) {

        try {
            Thread.sleep(15000); // Simulate the long running method below
        } catch (InterruptedException e) {                  
            e.printStackTrace();
        }

        this.data = params[0];
        DetailFragment df= new DetailFragment();
        df.ExecuteFragment(this.data); // Long running

        return df;
    }

    @Override
    protected void onPostExecute(MyFragment result) {               
        super.onPostExecute(result);

        if (this.data.Position == FragmentPosition.PaneOne)
                getSupportFragmentManager().beginTransaction()
                .replace(R.id.content_frame, result).commit();
        else
                getSupportFragmentManager().beginTransaction()
                .replace(R.id.content_frame2, result).commit();
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T12:14:47.793

我没有看到任何理论上的理由为什么这不应该起作用。但是说，这对我来说是一种非常奇怪的方法。

通常`AsyncTask.doInBackground()`用于创建/下载/处理数据，`AyncTask.onPostExecute()`用于更新 UI。但是您在这两种方法上都分发了 UI 部分。

此外，Fragment 是一个 UI 类，您使用它来进行数据处理，再次混合每个类的用途。作为一般规则，在我的项目中，我倾向于遵循类似的规则（就像显示一些通用名称的示例，但在真实的东西上，使用有意义的名称，我也可能会忽略一些构造函数，只是为了保持简短）

```
MyActivity.java
public class MyActivity extends Activity{

      private class MyWorker extends AsyncTask<SomeDataObject, Integer, SomeDataListObject>{
            @Override
            protected MyFragment doInBackground(SomeDataObject... params) {
                 // in here we use SomeDataObject to generate the SomeDataListObject
                 return MyDataCruncher.processData(someDataObject);
                 // see it's a static method, process A and generates B, that's all.
                 // but very important that it's its own class, separate from Activity and Fragment
            }

            @Override
            protected void onPostExecute(SomeDataListObject result){
                if(results != null){
                     // Here we create the fragment, pass the data to it and do the transaction
                     getSupportFragmentManager().beginTransaction().replace(R.id.content_frame, MyFrag.newInstance(result)).commit();

                }else{ /* do some error handling or whatever */ }
            }
} 
```

然后在你的片段上你做：

```
public class MyFrag extends Fragment{
    private static String KEY_DATA = "_key_data_"
    public static MyFrag newInstance(SomeDataListObject data){
        MyFrag frag = new MyFrag();
        Bundle b = new Bundle();
        frag.setArguments(b);
        // it's important to make your data parcelable and pass it with a Bundle as part of the fragment life-cycle
        b.putParcelableArrayList(KEY_DATA, data);
        return frag;
    }

    // then inside onCreateView
     SomeDataListObject data = getArguments.getParcelableArray(KEY_DATA);
    // ---

} 
```

希望能帮助到你

# php - 关于“mysql结果”资源

> ID：14090396
> 
> 赞同：3
> 
> 时间：2012-12-30T11:38:53.807
> 
> 标签：php, mysql

当我使用时`mysql_query`，Mysql 是否真的立即执行查询，还是等到我打电话`mysql_fetch_*()`？

我的意思是如果查询非常慢（例如，结果有很多记录），这些函数中的哪一个会运行得很慢？:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T11:46:05.883

来自[mysql_unbuffered_query](http://bd1.php.net/mysql_unbuffered_query)的 PHP.net 手册，

> mysql_unbuffered_query() 将 SQL 查询发送到 MySQL **，而不像 mysql_query() 那样自动获取和缓冲结果行**。这为生成大型结果集的 SQL 查询节省了大量内存，并且您可以在检索到第一行后立即开始处理结果集，因为您不必等到执行完完整的 SQL 查询。要在多个数据库连接打开时使用 mysql_unbuffered_query()，您必须指定可选参数 link_identifier 以标识您要使用的连接。

因此，对于具有大 mysql 结果的查询`mysql_query`将运行缓慢。你应该使用`mysql_unbuffered_query`这个。

让我们看看`mysql_query`mysql扩展里面有什么。

`mysql_query`执行查询。如果它有任何要返回的行（`SELECT`等`SHOW`语句），它会获取结果并将其存储在`MYSQL_RES`C 结构中。它是否获取结果取决于它是调用`mysql_use_result`还是`mysql_store_result`C函数。后者存储整个结果。来自[mysql_use_result](http://dev.mysql.com/doc/refman/5.0/en/mysql-use-result.html) MySQL C API 手册，

> mysql_use_result() 启动结果集检索，但并不像 mysql_store_result() 那样实际将结果集读入客户端。相反，必须通过调用 mysql_fetch_row() 单独检索每一行。**这直接从服务器读取查询结果，而不将其存储在临时表或本地缓冲区中，这比 mysql_store_result() 更快并且使用更少的内存**。

所以`mysql_store_result`读取整个结果但`mysql_use_result`不要。

现在 对应 的[C代码](https://github.com/php/php-src/blob/master/ext/mysql/php_mysql.c#L1560)`mysql_query`是

```
php_mysql_do_query(INTERNAL_FUNCTION_PARAM_PASSTHRU, MYSQL_STORE_RESULT); 
```

这里`php_mysql_do_query`调用`php_mysql_do_query_general`和`php_mysql_do_query_general`函数[**PHP 调用 mysql_store_result**](https://github.com/php/php-src/blob/master/ext/mysql/php_mysql.c#L1513)

```
 if(use_store == MYSQL_USE_RESULT) { //use_store = MYSQL_STORE_RESULT here
    mysql_result=mysql_use_result(mysql->conn);
} else {
    mysql_result=mysql_store_result(mysql->conn);
} 
```

所以**`mysql_query`立即运行查询并将整个结果集存储在内存中**。因此，对于大型结果集，它可能会很慢。

一旦`mysql_fetch_*`函数被调用，就会开始从 PHP 的内部缓冲区中获取行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T11:40:56.987

调用时会获取结果`mysql_query`。`mysql_fetch_*`只返回结果对象的相关部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-30T11:42:06.737

回答您的问题，`mysql_query()`运行查询，并返回由`mysql_fetch_*()`. 所以 mysql_query() 将是一个慢查询运行缓慢的查询。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-30T11:47:34.463

如前所述，`mysql_query`运行查询。因此，如果查询本身很慢（涉及复杂或未优化的条件等），那么`mysql_query`调用将需要一些时间。

如果查询速度很快，但导致记录太多，则`mysql_fetch_all`可能需要一些时间，因为所有记录都必须复制到 PHP 内存中。

# perl - 如何在 Perl 中用空格和前导零分割

> ID：14090399
> 
> 赞同：-1
> 
> 时间：2012-12-30T11:39:04.473
> 
> 标签：perl

很抱歉这个微不足道的问题，但在这里。我有一个文件要解析。它以一些空格开头，然后是第一个字段，然后是更多空格，另一个字段等。

例如：

```
000123 KST B4765 
```

我将其拆分如下：

```
my @fields = split /\s+/; 
```

它在拆分时可以正常工作，但有一个例外：`$fields[0]`是`123`并且我想保持原样`"000123"`- 一个纯字符串。

这是完整的部分：

```
open UU, "<$file", or die;
while (<UU>) {
  chomp;
  next if /^\#/;
  my @fields = split/\s+/;
  my $pno = 'EQ'."$fields[1]";
  print "$pno\n";
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T11:47:18.707

不，`000123`将存储为字符串。但是，如果您不小心将其转换为数字，您可能会将其视为数字。例如

```
my @fields = split ' ', "000123 KST B4765";
print $fields[0];   # prints 000123
$fields[0] += 0;    # converts string to number
print $fields[0];   # prints 123 
```

另请注意， using`/\s+/`类似于使用默认值`' '`，因为它在空格上拆分，除了它不会去除前导空格，这可能是也可能不是您想要的。

# url-rewriting - 上下文路径之外的 UrlRewriteFilter

> ID：14090401
> 
> 赞同：3
> 
> 时间：2012-12-30T11:39:25.393
> 
> 标签：url-rewriting, oracle-apex

我正在尝试使用 [http://tukey.org/urlrewrite/](http://tuckey.org/urlrewrite/)将 Not Found URLs 映射到新页面。但问题是，在 Google 中编入索引的旧网址没有上下文路径。例如：

旧 URL：mydomain.com/xxxx 新规则：mydomain.com/apex/f?p=xxx

我能够从 mydomain.com/apex/xxxx 映射到 mydomain.com/apex/yyyyy。但是，我需要将类似于 mydomain.com/xxxx（没有“apex”上下文路径）的任何即将到来的请求映射到 mydomain.com/apex/f?p=xxx 中。

我该怎么做 ？我正在使用 Glassfish 开源 3.1.2.2 Oracle Apex Listener 2

# ajax - 如何根据每个按钮的唯一 ID 加载 URL？

> ID：14090403
> 
> 赞同：0
> 
> 时间：2012-12-30T11:39:42.320
> 
> 标签：ajax, jquery

我正在尝试将特定的 html 文件动态加载到具有单个 onclick 功能的容器 DIV 中，而不是每个按钮一个。

我对此很陌生（这是我第一次使用 AJAX 或 JQuery），这是我迄今为止设法提出的。

```
$(document).ready(function(){

$("#container").load("home.html");

$("#home").click(function(){
    $("#container").load("home.html");
});
$("#news").click(function(){
    $("#container").load("news.html");
});
$("#about").click(function(){
    $("#container").load("about.html");
});
$("#contact").click(function(){
    $("#container").load("contact.html");
});
}); 
```

如您所见，目前我有 4 个具有唯一 ID 的按钮和每个按钮的功能。但我想做的是简化这一点并创建一个函数，该函数获取每个按钮的 ID 并将其用作要加载到容器中的页面的 URL。所以那个 URL = ID + ".html"。

这将帮助我避免在我的投资组合中的每个新条目中添加脚本。

有人对我如何做到这一点有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T11:42:23.557

你可以这样做：

```
$("#home, #news, #about, #contact").click(function(){ 
    $("#container").load(this.id+".html");
} 
```

但正确的做法是使用属性而不是 id ：

```
<div link=home>something</div>
...
$("[link]").click(function(){ 
    $("#container").load($(this).attr('link')+".html");
} 
```

这样您就不必在每次添加链接时更改选择器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T11:47:41.030

对所有按钮使用一个类：

```
$(".myButtons").click(
   function(){
   id = $(this).attr("id");
   $("#container").load(id + ".html");  
}
); 
```

# c# - 将复选框状态保存到本地设置，Windows 8

> ID：14090410
> 
> 赞同：3
> 
> 时间：2012-12-30T11:40:32.490
> 
> 标签：c#, windows-8, microsoft-metro

我目前正在尝试将复选框的状态（选中/未选中）保存到我的 Modern UI 应用程序的 ApplicationData 的 LocalSettings 中。在过去的 6-7 个小时里，我一直在解决这个问题，尝试了很多不同的方法，但我相信我现在完全迷失在自己的代码中了。到目前为止我的代码：

```
 void MainPage_Loaded(object sender, RoutedEventArgs e)
    {
        if (localSettings.Values.ContainsKey("isFirstChecked") == false || cbFirst.IsChecked == false)
        {
            cbFirst.IsChecked = false;
            test.Text = "UnChecked";
        }
        else 
        {
            cbFirst.IsChecked = true;
            test.Text = "Checked";
        }
    }

    private void cbFirst_Checked(object sender, RoutedEventArgs e)
    {
        test.Text = "Checked";
        localSettings.Values["isFirstChecked"] = cbFirst.IsChecked = true;
    }

    private void cbFirst_Unchecked(object sender, RoutedEventArgs e)
    {
        test.Text = "UnChecked";
        var test2 = localSettings.Values["isFirstChecked"] = cbFirst.IsChecked = false;

    } 
```

就像我已经说过的那样，我尝试了几种方法来解决这个问题，但没有一个能够真正拯救这两种状态，只有一种（我希望你们中的一些人可能知道为什么，因为我是如此暂时丢失）。

出于某种原因，当我调试时，即使未选中复选框，也会触发“已检查”代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T10:34:26.617

您的初始代码的问题在于您正在检查您的状况中的不同内容。您正在检查您存储的设置是否存在，然后检查该复选框是否已选中。您当前没有做的是获取设置值（如果存在）。在加载时尝试以下操作。

```
void MainPage_Loaded(object sender, RoutedEventArgs e)
{
    bool valueFromSettings = false;

    if (!localSettings.Values.ContainsKey("isFirstChecked"))
    {
        // if the setting doesn't exist, probably wise to create it here.
        // setting the default to "false", but you can change to true if that makes more sense.
        localSettings.Values.Add("isFirstChecked", false);
    }
    else
    {
        // read the value of the setting here.  
        // If we just created it, it should default to false (see above)
        valueFromSetting = ((bool)localSettings.Values["isFirstChecked"]);
    }

    if(valueFromSettings)
    {
        cbFirst.IsChecked = true;
        test.Text = "Checked";
    }
    else 
    {
        cbFirst.IsChecked = false;
        test.Text = "UnChecked";
    }
} 
```

然后，您可以使用您之前定义的处理程序（但请注意细微的变化 - 您无需检查复选框的值，但可以直接分配设置。）

```
private void cbFirst_Checked(object sender, RoutedEventArgs e)
{
    test.Text = "Checked";
    localSettings.Values["isFirstChecked"] = true;
}

private void cbFirst_Unchecked(object sender, RoutedEventArgs e)
{
    test.Text = "UnChecked";
    localSettings.Values["isFirstChecked"] = false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T11:49:16.507

```
private void cbFirstCheckedChanged(object sender, EventArgs e)
{
    var checkBox = serder as CheckBox;
    if (checkBox == null) return;
    test.Text = checkBox.IsChecked ? "Checked" : "UnChecked";
    localSettings.Values["isFirstChecked"] = cbFirst.IsChecked
}

void MainPage_Loaded(object sender, RoutedEventArgs e)
{
    checkBox.IsChecked = localSettings.Values["isFirstChecked"];
} 
```

# ruby-on-rails - Rails 管理员和 has_and_belongs_to_many

> ID：14090414
> 
> 赞同：1
> 
> 时间：2012-12-30T11:40:42.870
> 
> 标签：ruby-on-rails, gem, rails-admin

我正在使用[Rails Admin](https://github.com/sferik/rails_admin) gem。我有以下两个模型：

```
class Category < ActiveRecord::Base
  attr_accessible :description, :name

  has_and_belongs_to_many :experiences
end

class Experience < ActiveRecord::Base
  attr_accessible :description, :city_id, :price, :title, :user_id
  attr_accessible :categories

  validates :title, :description, :user_id, :presence => true

  belongs_to :user
  belongs_to :city
  has_and_belongs_to_many :categories
end 
```

在 Rails 管理员中，我无法将类别添加到现有体验。在特定体验的编辑站点中，我看到：

![经验不能加类](../Images/f764fd4980fe11dd130fc67ff9ac4e86.png)

如您所见，即使我创建了多个类别，我也无法选择任何类别。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T12:14:56.860

通过将以下内容添加到体验模型中解决了该问题：

```
attr_accessible :category_ids 
```

代替

```
attr_accessible :categories 
```

# c# - c#中的comexception错误

> ID：14090415
> 
> 赞同：0
> 
> 时间：2012-12-30T11:40:51.277
> 
> 标签：c#, visual-studio-2010, excel, comexception, hresult

我想在 Visual Studio 2010 高级版中将一些数据写入 excel 文件，但是当我运行我的代码时，出现此错误：

```
comexception was unhandled by user code 
Exception from HRESULT: 0x800A03EC 
```

我在详细视图中的错误：

```
System.Runtime.InteropServices.COMException was unhandled by user code
  Message=Exception from HRESULT: 0x800A03EC
  Source=Microsoft.Office.Interop.Excel
  ErrorCode=-2146827284
  StackTrace:
       at Microsoft.Office.Interop.Excel.Workbooks.Open(String Filename, Object UpdateLinks, Object ReadOnly, Object Format, Object Password, Object WriteResPassword, Object IgnoreReadOnlyRecommended, Object Origin, Object Delimiter, Object Editable, Object Notify, Object Converter, Object AddToMru, Object Local, Object CorruptLoad)
       at Cagri.Button1_Click(Object sender, EventArgs e) in c:\Users\Erdi\Documents\Visual Studio 2010\WebSites\DBE_Yazilim\Cagri.aspx.cs:line 117
       at System.Web.UI.WebControls.Button.OnClick(EventArgs e)
       at System.Web.UI.WebControls.Button.RaisePostBackEvent(String eventArgument)
       at System.Web.UI.WebControls.Button.System.Web.UI.IPostBackEventHandler.RaisePostBackEvent(String eventArgument)
       at System.Web.UI.Page.RaisePostBackEvent(IPostBackEventHandler sourceControl, String eventArgument)
       at System.Web.UI.Page.RaisePostBackEvent(NameValueCollection postData)
       at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint)
  InnerException: 
```

我使用 microsoft office 2013，我有参考资料：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Net.Mail;
using Microsoft.Office.Interop.Excel; 
```

最后我在以下代码部分中出现了这个错误：

```
workbook = excelObj.Workbooks.Open(HttpContext.Current.Server.MapPath("~/") + fileName, 0, false, Type.Missing, "", "", true, Microsoft.Office.Interop.Excel.XlPlatform.xlWindows, "\t", true, false, Type.Missing, true, 0, 0); 
```

我的完整代码：

```
 Microsoft.Office.Interop.Excel.Application excelObj = null;
 Microsoft.Office.Interop.Excel.Workbook workbook = null;

 excelObj = new Microsoft.Office.Interop.Excel.Application();

string fileName = "DBE_BAKIM_FORMU" + ".xlsx";

System.Threading.Thread.CurrentThread.CurrentCulture = new System.Globalization.CultureInfo("en-US");

        workbook = excelObj.Workbooks.Open(HttpContext.Current.Server.MapPath("~/") + fileName, 0, false, Type.Missing, "", "", true, Microsoft.Office.Interop.Excel.XlPlatform.xlWindows, "\t", true, false, Type.Missing, true, 0, 0);
        Microsoft.Office.Interop.Excel.Sheets sheets = workbook.Worksheets;
        Microsoft.Office.Interop.Excel.Worksheet worksheet = (Microsoft.Office.Interop.Excel.Worksheet)sheets.get_Item(1);

        worksheet.Cells[6, 3] = c.TalepTarihi.ToString();
        worksheet.Cells[7, 3] = c.TalepTuru;
        worksheet.Cells[8, 3] = c.ModulAdi;
        worksheet.Cells[9, 3] = c.EkranRaporAdi;
        worksheet.Cells[10, 3] = c.VerilenSure; 
        worksheet.Cells[11, 4] = c.USER.UserName +" " +c.USER.UserSurname;
        worksheet.Cells[12, 4] = Convert.ToInt64(c.USER.UserTel);

        workbook.Save();

        excelObj.Workbooks.Close();
        excelObj.Application.Quit(); 
```

提前谢谢..为什么我会犯这个错误？请帮忙..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-04-17T23:01:55.183

检查您的 Excel 插件。删除其他应用程序的插件。众所周知，福昕阅读器 PDF 插件会破坏许多不同的平台和应用程序——Visual Studio、Matlab、Labview ......。是福昕阅读器让我伤心了一个星期。

# vb.net - Interop.Outlook 不会在拖放时清除选定的邮件

> ID：14090420
> 
> 赞同：4
> 
> 时间：2012-12-30T11:41:27.047
> 
> 标签：vb.net, drag-and-drop, outlook-addin, outlook-2010

我有一个控件，我可以将邮件放在上面，工作正常，但我无法清除选择/项目。

例如：我拖放邮件 1 --> 邮件 1 在我的列表中 我从列表中删除邮件 1 返回 Outlook 并拖放邮件 2
邮件 2 出现在我的列表中，但邮件 1 也恢复了！我发现了很多关于`Marshal.ReleaseComObject`但我想我没有以正确的方式做的帖子？

规格：VS2010，4.0 框架。Windows 7 操作系统，Outlook 2010

这是我的代码的一部分：

调用我的`Save`方法：

```
ElseIf e.Data.GetDataPresent("FileGroupDescriptor") Then
    Try
        Dim SafeSaveMethod As New dlgCallSaveMails(AddressOf SaveMailsFromSelection)
        Me.BeginInvoke(SafeSaveMethod, Me.FileData.Pad) 
```

`Save`方法：

```
Private Sub SaveMailsFromSelection(_path As String)
    ' File uit Outlook
    Dim x As Integer
    Dim xitmndx As Integer = 0
    Dim DestFile As String
    Dim oOutLook As New Outlook.Application
    Dim oExplorer As Outlook.Explorer
    Dim oSelection As Outlook.Selection
    Dim strFile As String

    oExplorer = oOutLook.ActiveExplorer
    oSelection = oExplorer.Selection
    Dim currentFolder As MAPIFolder = oExplorer.CurrentFolder
    Dim folders As Folders = currentFolder.Folders

    Try
        For Each mitem As Object In oSelection
            xitmndx += 1

            Dim mi As Microsoft.Office.Interop.Outlook.MailItem = TryCast(mitem, Microsoft.Office.Interop.Outlook.MailItem)

                        mi.SaveAs(_path & "\" & String.Format("{0:yyyy-MM-dd_hh-mm-ss-tt}", mi.CreationTime) & "-" & CleanInput(mi.Subject) & ".msg", Outlook.OlSaveAsType.olMSG)

                Marshal.ReleaseComObject(mi)
                mi = Nothing
        Next

    Catch ex As System.Exception
        WriteError2EventLog("Error picDropZone_DragDrop 4: " & ex.ToString)
        MsgBox(Err.Description, MsgBoxStyle.Exclamation, "mycontrol")
    Finally
        Marshal.ReleaseComObject(oExplorer)
        Marshal.ReleaseComObject(oSelection)
        Marshal.ReleaseComObject(currentFolder)
        Marshal.ReleaseComObject(folders)
        Marshal.FinalReleaseComObject(oExplorer)
    End Try
End Sub 
```

我也尝试过`oExplorer.ClearSelection()`，但从 count 属性可以看出，它根本不清楚

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-08-24T08:36:25.640

在花了几个小时阅读这个问题的不同解决方案之后，当移动一个可以处理另一个程序中拖放的控件时，最终在 Outlooks 处理输入事件的方式中出现了一个错误，我发现你可以修复它只需一行代码，这就是应该传播的东西！

Microsoft 使用剪贴板来存储有关选择的信息等。Outlook 用于此目的的类隐藏在名为 RenPrivateMessages 的键后面。它不能使用，因为它们不会释放界面，但是通过阅读它可以清除选择的锁定。

因此，您在代码中的 drop-event 中所要做的就是添加这一行（假设您的 EventArg 被命名为 e）：

**e.data.GetData("RenPrivateMessages");**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-28T09:25:10.827

我在网上搜索解决方案，但没有切换窗格的解决方法。在找到适合我的解决方案后，我想在这里分享。

最后的线索是使用活动资源管理器的 RemoveFromSelection 方法，因为 Marshal.ReleaseComObject 只是不清除选择。

```
Public Sub outlook_drop()
    Try
        get_outlook_application_explorer()
        If IsNothing(oExplorer) = True Then
            MessageBox.Show("Cannot open Outlook.")
            Exit Sub
        End If

        Dim selection As Selection = oExplorer.Selection
        If selection.Count = 0 Then
            Marshal.ReleaseComObject(selection)
            MessageBox.Show("Nothing selected.")
            Exit Sub
        End If

        Dim filename As String
        Dim ext As String = ".msg"

        Dim mail As MailItem                                ' Important, no 'Shadow'-objects, such as "For Each mail as MailItem in selection", cos you need to free it with Marshal.ReleaseComObject()...
        For Each mail In selection
            Dim subtxt As String = mail.Subject
            If Not String.IsNullOrEmpty(subtxt) Then
                If subtxt.Length > 120 Then
                    subtxt = Left(subtxt, 120)
                End If
            End If

            filename = fill_filename(mail.Attachments.Count.ToString, subtxt, mail.SenderName, mail.ReceivedTime.ToShortDateString)

            Dim newFile As String = IO.Path.Combine(fuldir, filename + ext)
            Dim count As Integer = 0
            While IO.File.Exists(newFile)
                count += 1
                If count > 25 Then
                    newFile = Nothing
                    Exit While
                End If

                newFile = IO.Path.Combine(fuldir, filename + "(" + count.ToString + ")" + ext)
            End While

            If String.IsNullOrEmpty(newFile) = False Then
                mail.SaveAs(newFile)
            End If
            oExplorer.RemoveFromSelection(mail) ' Important, to remove the object from Selection, ReleaseComObject() only don't do.
            Marshal.ReleaseComObject(mail)  
        Next

        Marshal.ReleaseComObject(selection)
    Catch ex As System.Exception
        MessageBox.Show(ex.Message)
    End Try
End Sub 
```

问候，

卡利

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T19:22:26.697

使用委托并不是一个好主意，事实证明你可以做一个解决方法来重新激活你的前景。

将邮件项保存到文件后，我调用 SwitchOutlookPanes()

```
 Public Sub SwitchOutlookPanes()
    Dim Outlook As Microsoft.Office.Interop.Outlook.Application
    Dim explorer As Microsoft.Office.Interop.Outlook.Explorer = Nothing
    Try
        If Outlook Is Nothing Then
            If Outlook Is Nothing Then Outlook = CType(Microsoft.VisualBasic.Interaction.GetObject("", "Outlook.Application"), Microsoft.Office.Interop.Outlook.Application)
            explorer = Outlook.ActiveExplorer
        End If

        If Outlook IsNot Nothing And explorer IsNot Nothing Then
            Dim nMAPIFOlder As Interop.Outlook.MAPIFolder = explorer.CurrentFolder
            explorer.CurrentFolder = Outlook.OlDefaultFolders.olFolderContacts
            System.Threading.Thread.Sleep(1500)
            explorer.CurrentFolder = nMAPIFOlder
        End If
    Catch ex As System.Exception
    Finally
        Marshal.ReleaseComObject(explorer)
        Marshal.ReleaseComObject(Outlook)
    End Try

End Sub 
```

这将清除选择并防止 Outlook 冻结/挂起。

问候，

麦克风

# javascript - highcharts 实时更新和 YII 框架

> ID：14090422
> 
> 赞同：1
> 
> 时间：2012-12-30T11:41:39.277
> 
> 标签：javascript, highcharts

我必须使用 highcharts 显示一些传感器数据，并且我使用 YII 作为 php 框架。我将时间存储在mysql（v5.6）中作为时间戳（3）我需要毫秒分数，我想使用它，因为我的数据几乎都在一秒或2秒内

我的控制器给我作为输出 `["2012-12-01 15:00:00.070",45]` ，但这一点没有显示在我的图表中，并且只有一次我在“var series = chart.series[0],”级别上收到 firebug 错误时才发出 ajax 请求，我没有不知道问题出在我的 highchart 代码中还是时间格式中 我也不知道如何在收到点后在我的代码中使用 Dateparse 请帮忙！

```
function requestData() {
 $.ajax ({
            type:"get" ,
        url: "<?php echo CController::createUrl('beam/GetSensorsDataLive') ?>",
        data: {"beamId" : "<?php echo $modelBeam['poutre_id'] ?>" },
         dataType: "json",

          success: function(response,point) {
          var series = chart.series[0], //// error here 

    shift = series.data.length > 20;// shift if the series is longer than 20
          chart.series[0].addPoint( point,true, false); // add the point
          setTimeout(requestData, 1000);    // call it again after one second

                                   },
                                 cache: false
    });
           }  

 $(document).ready(function() {
     var chart;

        chart = new Highcharts.Chart({
        chart: {
            renderTo: 'graph',
            type: 'spline',
            events: {
                load: requestData   
            }
        },

        xAxis: {
          type: 'datetime',
          },
              tooltip: {

                  formatter: function() {

                    return '<b>'+ this.series.name +'</b><br/>'+

                    Highcharts.dateFormat('%H:%M:%S:%m', this.x) +'<br/>'+

                    Highcharts.numberFormat(this.y, 2);

            }

        },  

                    series: [{
            name: 'Live Data From sensor <?php echo $modelBeam['poutre_id'] ;?>  ',
             data:[] 
        }]

    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T09:47:12.203

您的数据 x 应该是以毫秒为单位的 JS 时间戳，您也可以从 php 解析数据并使用 Date.UTC() 函数。

# python - 使用python基于一个公共字段合并2个csv文件

> ID：14090424
> 
> 赞同：1
> 
> 时间：2012-12-30T11:41:50.717
> 
> 标签：python

我从 2 个 mysql 表中生成了 2 个 csv 文件。现在我想将这两个文件合并在一起。

我为第一个 csv 手动添加了这个标题：

```
ID,name,sector,sub_sector 
```

这是第二个 csv 标头：

```
ID,url 
```

我的目标是拥有 1 个文件：

```
ID,name,sector,sub_sector,url 
```

注意：不是第一个文件中的全部记录在第二个文件中都有匹配项。

这是我使用的片段：

```
#!/usr/bin/env python
import glob, csv
if __name__ == '__main__':

    infiles = glob.glob('./*.csv')
    out = 'temp.csv'
    data = {}
    fields = []

    for fname in infiles:
        df = open(fname, 'rb')
        reader = csv.DictReader(df)
        for line in reader:
            # assuming the field is called ID
            if line['ID'] not in data:
                data[line['ID']] = line
            else:
                for k,v in line.iteritems():
                    if k not in data[line['ID']]:
                        data[line['ID']][k] = v
            for k in line.iterkeys():
                if k not in fields:
                    fields.append(k)
        del reader
        df.close()

    writer = csv.DictWriter(open(out, "wb"), fields, extrasaction='ignore', dialect='excel')
    # write the header at the top of the file
    writer.writeheader()
    writer.writerows(data)
    del writer 
```

取自另一个软线程。这是我得到的错误：

```
 File "db_work.py", line 30, in <module>
    writer.writerows(data)
  File "/usr/lib/python2.7/csv.py", line 153, in writerows
    rows.append(self._dict_to_list(rowdict))
  File "/usr/lib/python2.7/csv.py", line 144, in _dict_to_list
    ", ".join(wrong_fields))
ValueError: dict contains fields not in fieldnames: 4, 4, 4, 6
~/Development/python/DB$ python db_work.py
Traceback (most recent call last):
  File "db_work.py", line 30, in <module>
    writer.writerows(data)
  File "/usr/lib/python2.7/csv.py", line 153, in writerows
    rows.append(self._dict_to_list(rowdict))
  File "/usr/lib/python2.7/csv.py", line 145, in _dict_to_list
    return [rowdict.get(key, self.restval) for key in self.fieldnames]
AttributeError: 'str' object has no attribute 'get' 
```

任何想法如何解决这一问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T12:19:01.870

`.writerows()` expects a *list*, but you are passing in a `dict` instead. I think you wanted to write the values of `data` only:

```
writer = csv.DictWriter(open(out, "wb"), fields, dialect='excel')
# write the header at the top of the file
writer.writeheader()
writer.writerows(data.values()) 
```

Personally, I'd read the file with just the `id, url` rows, add those to a dict, then read the other file and write each row one at a time by adding the corresponding `url` entry.

```
import csv

with open('urls.csv', 'rb') as urls:
    reader = csv.reader(urls)
    reader.next()  # skip the header, won't need that here
    urls = {id: url for id, url in reader}

with open('other.csv', 'rb') as other:
    with open(out, 'wb') as output:
        reader = csv.reader(other)
        writer = csv.writer(output)
        writer.writerow(reader.next() + ['url'])  # read old header, add urls and write out
        for row in reader:
            # write out original row plus url if we can find one
            writer.writerow(row + [urls.get(row[0], '')]) 
```

# pentaho - 如何使用 Pentaho Data Integration (Spoon 4.4) 进行星形建模

> ID：14090429
> 
> 赞同：1
> 
> 时间：2012-12-30T11:42:26.800
> 
> 标签：pentaho

我正在寻找一种工具来构建蒙德里安的多维数据集 XML 描述文件以在我的星型模式上使用（一个事实表和 4 个维度表直接链接到事实表）。

我有点迷茫，浏览教程没有帮助，因为它们似乎是关于我的另一个版本。我的不包括`Star Model`视角，我只是有一个`Model`视角。

我的感觉是，这种`Model`观点对于为平面模型（只有一个大事实表）构建蒙德里安立方体很有用。如果有人能证实这一点，我会很高兴。但我的主要需求是：如何构建星模型描述模式（使用 Pentaho 的工具）？如果缺少插件，如何安装？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T09:26:13.897

您暂时需要下载一个单独的工具，称为模式工作台。从 SourceForge 上的 mondrian not pentaho 项目中获取。

该工具将在未来 6 个月内被新的东西取代，但它可以满足您的需要，并且内置了方便的验证

# sql - 为什么我的 ActiveRecord 顺序方法拒绝从选择方法中获取派生列的知识？

> ID：14090430
> 
> 赞同：2
> 
> 时间：2012-12-30T11:43:00.903
> 
> 标签：sql, ruby-on-rails, postgresql, activerecord

我编写了一个 ActiveRecord 查询，旨在通过关联表（Invoice has_many :item_numbers）中的列的总和对我的发票进行排序。它涉及一些复杂的（对我来说）类方法，但它最终是这样的；

```
Invoice.where(user_id: 1, deleted: false, status: 'Sent').joins(:item_numbers).select('invoices.*, sum(item_numbers.amount) as total').group('invoices.id').order('total asc').limit(20) 
```

如果我在控制台中运行这个查询，我会得到预期的结果——我的前 20 张发票按其 item_number 的总数排序。但是，当它在开发服务器中运行时，我从 Postgresql 收到以下错误；

```
PG::Error: ERROR:  column "total" does not exist 
```

由于在服务器上运行的查询依赖于很多范围和类方法，为了检查查询是否正确，我调用`.to_sql`了它，浏览器中的输出是；

```
SELECT  invoices.*, sum(item_numbers.amount_with_gst) as total FROM "invoices" INNER JOIN "item_numbers" ON "item_numbers"."invoice_id" = "invoices"."id" WHERE "invoices"."user_id" = 1 AND "invoices"."deleted" = 'f' AND "invoices"."status" = 'Sent' GROUP BY invoices.id ORDER BY total asc LIMIT 20 
```

如果我在控制台中调用查询本身，我会得到完全相同的输出`.to_sql`，如果我将此输出放入`Invoice.find_by_sql`控制台中，我不会收到错误消息。

这感觉像是某种奇怪的错误，但我知道这个错误很可能是我的。我已经狩猎了几个小时，没有任何线索 - 谁能看到我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T11:58:16.020

这不是 ActiveRecord 的问题。正如您所演示的，ActiveRecord 对您的代码没有任何问题，它会愉快地创建一条 SQL 语句。但是 PostgreSQL 不喜欢的一个：`PG::Error`异常是来自数据库适配器的低级异常，表明您的 SQL 查询无效。

PostgreSQL 根本不支持语句中的**表达式别名**`ORDER BY`。（查看[文档`ORDER BY`](http://www.postgresql.org/docs/current/static/sql-select.html#SQL-ORDERBY)）

您必须在 order 语句中重复表达式：

```
Invoice.select('invoices.*, sum(item_numbers.amount) as total')
  .order('sum(item_numbers.amount) asc') 
```

不用担心，查询优化器会检测到这一点，并且您的总和仍然只计算一次。

您很可能在控制台和开发服务器上使用不同的 DBMS。（MySQL 还是 SQLite？）有些数据库引擎接受表达式别名，有些则不接受。

# mysql - 使用 AND 而不是 COMMA 时，UPDATE 语句未生成语法错误

> ID：14090431
> 
> 赞同：3
> 
> 时间：2012-12-30T11:43:07.847
> 
> 标签：mysql, sql, sql-update

我正在浏览有关更新的 MySQL 文档。[*请参阅更新语法*](http://dev.mysql.com/doc/refman/5.0/en/update.html)。我发现语法是

```
UPDATE [LOW_PRIORITY] [IGNORE] table_reference
    SET col_name1={expr1|DEFAULT} [, col_name2={expr2|DEFAULT}] ...
    [WHERE where_condition]
    [ORDER BY ...]
    [LIMIT row_count] 
```

当我执行这个语句

```
UPDATE SampleTB
SET NAME = '123' AND Address = '456'
WHERE ID = 1; 
```

[*请参阅此处获取 SQL Fiddle 演示链接*](http://sqlfiddle.com/#!2/7a8f82/1)

`Name`查询成功执行，值为`0`。我期待查询出现语法错误。

有人可以向我解释为什么它没有产生错误吗？为什么列的新值是 is`zero`而不是`123`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-30T11:45:09.863

```
SET NAME = '123' AND Address = '456' 
```

被解析为：

```
SET NAME = ('123' AND (Address = '456')) 
```

这是`AND`字符串和布尔操作数的比较和布尔值。

所以它获取当前行的`Address`列值，将其与字符串进行比较，比较`'456'`结果用作第二个操作数`AND``'123' AND false`

# android - 默认铃声不播放

> ID：14090433
> 
> 赞同：1
> 
> 时间：2012-12-30T11:43:10.607
> 
> 标签：android, android-mediaplayer, listitem, ringtone

我一直在制作铃声应用程序，但我遇到了问题。我可以在 listitem 中播放声音，也可以设置铃声，但是当我从电话设置中检查时，它不会播放。问题出在哪里，谢谢。

```
public class AndroidListViewActivity extends ListActivity {

int [] sesdosya;
    MediaPlayer mediaPlayer;     

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    sesdosya= new int[]    {R.raw.aramabeni,R.raw.azsonra,R.raw.baglama,R.raw.crank,R.raw.haha,R.raw.hippopchicken,R.raw.nokiaturkish,R.raw.nuri,
              R.raw.policemix,R.raw.polistelsiz,R.raw.ramiz,R.raw.veryfunnybaby,R.raw.wahwah,R.raw.walawalabingbang,R.raw.windowsmusic};

    // storing string resources into Array
    String[] sesler = getResources().getStringArray(R.array.sesler);        
    // Binding Array to ListAdapter
    this.setListAdapter(new ArrayAdapter<String>(this, R.layout.list_item, R.id.label,  sesler));

    ListView lv = getListView();

    // listening to single list item on click
    lv.setOnItemClickListener(new OnItemClickListener() {
      public void onItemClick(AdapterView<?> parent, View view,
          int position, long id) {     

          // selected item 
          String product = ((TextView) view).getText().toString();     

  // Launching new Activity on selecting single List Item            
          Intent intent = new Intent(getApplicationContext(), SingleListItem.class);
          // sending data to new activity
          intent.putExtra("position", position);
          startActivity(intent);            
      }

    private String getItemAtPosition(int position) {
        // TODO Auto-generated method stub
        return null;
    }
    });
}
} 
```

其他类；（播放和设置铃声）

```
public class SingleListItem extends Activity{

 int [] sesdosya;
 String[] sesisim;
 MediaPlayer mediaPlayer;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);        
    sesisim = new String[] {"aramabeni","azsonra","baglama","crank","haha","hippopchicken","nokiaturkish","nuri","policemix",
            "polistelsiz","ramiz","veryfunnybaby","wahwah","walawalabingbang","windowsmusic"}; 
    sesdosya= new int[] {R.raw.aramabeni,R.raw.azsonra,R.raw.baglama,R.raw.crank,R.raw.haha,R.raw.hippopchicken,R.raw.nokiaturkish,R.raw.nuri,
            R.raw.policemix,R.raw.polistelsiz,R.raw.ramiz,R.raw.veryfunnybaby,R.raw.wahwah,R.raw.walawalabingbang,R.raw.windowsmusic};

    this.setContentView(R.layout.single_list_item_view);

    TextView txtProduct = (TextView) findViewById(R.id.product_label);

    Intent intent = getIntent();
    int position = intent.getExtras().getInt("position");

    mediaPlayer = MediaPlayer.create(this, sesdosya[position]); 
    Button b = (Button) findViewById(R.id.button1);
    b.setOnClickListener(new View.OnClickListener(){

     public void onClick(View arg0) {                           
            mediaPlayer.start();                        
    //start the progress dialog
     }                   
    });

    Button zil = (Button) findViewById(R.id.btnzilsesi);
    zil.setOnClickListener(new View.OnClickListener(){

     public void onClick(View arg0) {            

        Intent intent = getIntent();                     
        int position = intent.getExtras().getInt("position");
        setRingtone(sesdosya[position]);                        

    //start the progress dialog
     }
    });

 }

@SuppressLint("SdCardPath")
public boolean setRingtone(int p){

    byte[] buffer=null;  
    InputStream fIn = getBaseContext().getResources().openRawResource(p);  
    int size=0;  

    try {
        size = fIn.available();
        buffer = new byte[size];
        fIn.read(buffer);
        fIn.close();
        } catch (IOException e) {
        // TODO Auto-generated catch block
        return false;
        }

    String path=Environment.getExternalStorageDirectory().getPath()+"/sdcard/media/audio/ringtones/"; 
    String filename=sesisim+".mp3";  

    boolean exists = (new File(path)).exists();  
    if (!exists){new File(path).mkdirs();}  

   sendBroadcast(new Intent(Intent.ACTION_MEDIA_SCANNER_SCAN_FILE, Uri.parse("file://"+path+filename)));  

    File k = new File(path);  

    ContentValues values = new ContentValues();  
    values.put(MediaStore.MediaColumns.DATA, k.getAbsolutePath());  
    values.put(MediaStore.MediaColumns.TITLE,filename);  
    values.put(MediaStore.MediaColumns.MIME_TYPE, "audio/mp3");  
    values.put(MediaStore.Audio.Media.ARTIST, "test1");  
    values.put(MediaStore.Audio.Media.IS_RINGTONE, true);  
    values.put(MediaStore.Audio.Media.IS_NOTIFICATION,false);  
    values.put(MediaStore.Audio.Media.IS_ALARM, false);  
    values.put(MediaStore.Audio.Media.IS_MUSIC, false);  

    //Insert it into the database

    Uri uri = MediaStore.Audio.Media.getContentUriForPath(k.getAbsolutePath());

   getContentResolver().delete(uri, MediaStore.MediaColumns.DATA + "=\"" + k.getAbsolutePath() + "\"", null);

    Uri newUri = getContentResolver().insert(uri, values);

    RingtoneManager.setActualDefaultRingtoneUri(
            SingleListItem.this,
      RingtoneManager.TYPE_RINGTONE,
      newUri
    );
    return true;

   }  
} 
```

# java - Skydrive API - 限制返回的结果？

> ID：14090439
> 
> 赞同：4
> 
> 时间：2012-12-30T11:44:15.803
> 
> 标签：java, android, cloud, live, windows-live

目前我正在使用`client.getAsync(folder + "/files", liveListener)`检查特定文件的文件夹内容。目前它运行良好，但如果文件夹中有很多文件（很可能有），那么返回的结果会相当大，所以我想知道是否有任何方法可以限制这一点？

使用 Google Drive api，我可以查询特定 mimetype 的文件，这意味着返回的结果大大减少。

Windows Live api有这样的东西吗？

文档不建议这样..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T23:47:46.300

从这里：

[http://msdn.microsoft.com/en-us/library/live/hh826531.aspx](http://msdn.microsoft.com/en-us/library/live/hh826531.aspx)

看起来像各种过滤和选择机制。不是一个明确的 MIME 类型，但它确实让你过滤一些“类型”的概念：

> 通过使用上述代码中的 filter 参数并指定项目类型，仅获取某些类型的项目：全部（默认）、照片、视频、音频、文件夹或相册。例如，要仅获取照片，请使用 FOLDER_ID/files?filter=photos。

看起来您可以按各种标准排序，然后按偏移量选择，这对于您上面讨论的内容似乎非常有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T21:09:52.890

在文件存储中引入一个重要的文件夹结构。文件夹是文件的自然过滤机制。

# php - PHP - 表单错误处理问题

> ID：14090440
> 
> 赞同：3
> 
> 时间：2012-12-30T11:44:21.497
> 
> 标签：php, html, forms, error-handling

如果不满足某些条件，我正在尝试创建错误消息。因此，用户填写表单，如果字段为空或未通过我的验证，则会返回错误消息。

这是表格：

```
if (isset($_POST)) {
    if (checkEmail($email) == TRUE && $name != NULL && $surName != NULL) {    
        mysql_query(    "INSERT INTO USR_INFO (NAME, MAIL, SURNAME) 
                         VALUES ('$name', '$email','$surName') ") or die(mysql_error());
        header('Location: thanks.php');
    } 

    else {
        echo'<form action="<?php echo $_SERVER[\'PHP_SELF\']; ?>" method="POST">            
                <label for="name">First Name</label>
                <input type="text" name="name" id="name" value="' .$_POST['name'].'" />
                <span class="required">&#42;</span>

                <label for="surName">Last Name</label>
                <input type="text" name="surName" id="surName" value="' .$_POST['surName']. '" />
                <span class="required">&#42;</span>

                <label for="email">E-mail</label>
                <input type="email" id="email" name="email" placeholder="example@domain.com" value="' .$_POST['email']. '" />
                <span class="required">&#42;</span>

                <input type="submit" name="submit" id="submit">
            </form>';
    }
} else {
        echo'<form action="<?php echo $_SERVER[\'PHP_SELF\']; ?>" method="POST">            
                <label for="name">First Name</label>
                <input type="text" name="name" id="name" value="" />
                <span class="required">&#42;</span>

                <label for="surName">Last Name</label>
                <input type="text" name="surName" id="surName" value="" />
                <span class="required">&#42;</span>

                <label for="email">E-mail</label>
                <input type="email" id="email" name="email" placeholder="example@domain.com" value="" />
                <span class="required">&#42;</span>

                <input type="submit" name="submit" id="submit">
            </form>';
} 
```

所以我尝试添加一个数组来显示错误消息，如下所示：

```
$errorMessage = array(); 
```

并将其添加到带有正确消息的 html 表单字段中：

```
$error[] = "Error Message"; 
```

现在我坚持的是，我只想在用户不满足条件时才显示错误

```
if ($name == NULL) {$error[] = "Error Message";}
if ($surName == NULL) {$error[] = "Error Message 2";}
if (checkEmail($email) == FALSE || NULL) {$error[] = "Error Message 3";} 
```

但我不能让它工作。当我尝试实现此逻辑时，它会很好地解析页面并且验证也可以正常工作，但是如果我将必填字段留空，则不会显示错误消息。我的猜测是我没有正确循环它。

非常感谢您的帮助！

**编辑**：

我尝试了 Frosty Z 发布的答案，这就是我目前所拥有的：

```
 if (isset($_POST)) {
    $errorMessage = array();
        if ($name == '') { $errors[] = "Input name please." }
        if ($surName == '') { $errors[] = "Input last name please." }
        if (!checkEmail($email)) { $errors[] = "Email address not valid." }

    if (count($error) == 0) { 
            mysql_query(    "INSERT INTO USR_INFO (NAME, MAIL, SURNAME) 
                             VALUES ('$name', '$email', '$surName') ") or die(mysql_error());
            header('Location: thanks.php');
            exit;
    else {

        if (count($errors) > 0)
            echo "<p>Sorry, there are problems with the information you have provided:</p>";

        foreach($errors as $error)
            echo '<p class="error">'.$error.'</p>';

        echo'<form action="<?php echo $_SERVER[\'PHP_SELF\']; ?>" method="POST">            
                <label for="name">Name</label>
                <input type="text" name="name" id="name" value="' .$_POST['name'].'" />
                <span class="required">&#42;</span>

                <label for="surName">Last name</label>
                <input type="text" name="surName" id="surName" value="' .$_POST['surName']. '" />
                <span class="required">&#42;</span>

                <label for="email">E-mail</label>
                <input type="email" id="email" name="email" placeholder="example@domain.com" value="' .$_POST['email']. '" />
                <span class="required">&#42;</span>

                <input type="submit" name="submit" id="submit">
            </form>';
    }
} else {
        echo'<form action="<?php echo $_SERVER[\'PHP_SELF\']; ?>" method="POST">            
                <label for="name">Name</label>
                <input type="text" name="name" id="name" value="" />
                <span class="required">&#42;</span>

                <label for="surName">Achternaam</label>
                <input type="text" name="surName" id="surName" value="" />
                <span class="required">&#42;</span>

                <label for="email">E-mail</label>
                <input type="email" id="email" name="email" placeholder="example@domain.com" value="" />
                <span class="required">&#42;</span>

                <input type="submit" name="submit" id="submit">
            </form>';
} 
```

有了这个我的页面将不会被解析。我有错误报告，但除了

> 内部服务器错误 500

在我的控制台日志中（萤火虫）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T11:59:41.043

这是对您的工作的一些重写，对错误消息的处理最少。

顺便说一句，您应该考虑采用一个体面的 PHP 框架，这将帮助您处理许多常见的开发任务。

```
$name = '';
$surName = '';
$email = '';

if ($_SERVER['REQUEST_METHOD'] === 'POST') {

    $name = $_POST['name'];
    $surName = $_POST['surName'];
    $email = $_POST['email'];

    $errors = array();

    if ($name == '') { $errors[] = "Please type your name."; }
    if ($surName == '') { $errors[] = "Please type your surname."; }
    if (!checkEmail($email)) { $errors[] = "Wrong email format."; }

    if (count($errors) == 0) {
        // tip: use PDO or mysqli functions instead of mysql ones to bind variables.
        // currently there is a risk of SQL injection here
        mysql_query("INSERT INTO USR_INFO (NAME, MAIL, SURNAME) 
                     VALUES ('$name', '$email','$surName') ") or die(mysql_error());
        header('Location: thanks.php');
        exit;
    }
}

if (count($errors) > 0)
    echo '<p>Sorry, there are problems with the information you have provided:</p>';

foreach($errors as $error)
    echo '<p class="error">'.$error.'</p>';

echo '<form action="'.$_SERVER['PHP_SELF'].'" method="POST">            
            <label for="name">First Name</label>
            <input type="text" name="name" id="name" value="'.htmlspecialchars($name).'" />
            <span class="required">&#42;</span>

            <label for="surName">Last Name</label>
            <input type="text" name="surName" id="surName" value="'.htmlspecialchars($surName).'" />
            <span class="required">&#42;</span>

            <label for="email">E-mail</label>
            <input type="email" id="email" name="email" placeholder="example@domain.com" value="'.htmlspecialchars($email).'" />
            <span class="required">&#42;</span>

            <input type="submit" name="submit" id="submit">
        </form>'; 
```

# c++ - 数组的输出与输入不同

> ID：14090442
> 
> 赞同：-2
> 
> 时间：2012-12-30T11:44:46.463
> 
> 标签：c++, arrays, for-loop, multidimensional-array

我正在尝试输入

```
1
HHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHH 
```

但由于某种原因，我把它作为我的输出 `HHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHIHHH`

它应该在所有 H 中输出完全相同的东西，但不是输出更少的随机 I。那是什么？

```
#include <iostream>

using namespace std;

const int arrayElements = 40;
int main()
{
    int lineInputs = 0;

    cin >> lineInputs;

    char mySexyArray [lineInputs-1][arrayElements-1];
    int whatever =0;
    for (int i=0;i<lineInputs;i++)
    {
       // cin >> whatever;
        for (int j=0;j<arrayElements;j++)
        {
           cin >>mySexyArray[i][j];
        }
    }

    for (int i=0;i<lineInputs;i++)
    {
        for (int j=0;j<arrayElements;j++)
        {
          cout << mySexyArray[i][j]<<"";
        }
        cout << endl;
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T11:48:09.487

您正在覆盖数组的边界，导致**Undefined Behavior**。
当您有一个具有未定义行为的程序时，它可以向您显示任何输出。

您的数组声明是：

```
char mySexyArray [lineInputs-1][arrayElements-1]; 
```

当你的循环运行时：

```
 for (int i=0;i<lineInputs;i++)
    {
        for (int j=0;j<arrayElements;j++) 
```

数组下标从`0`所以刚写到不属于你的数组的内存开始。

# .net - 如何使用现有流在 WP7 中编写 xml

> ID：14090443
> 
> 赞同：1
> 
> 时间：2012-12-30T11:44:57.117
> 
> 标签：.net, rss, windows-phone, rss-reader, isolatedstorage

我正在尝试开发一个 RSS 阅读器应用程序，并且我想缓存我的 RSS fedd。我要做的是，使用 URL 加载的提要在隔离存储中创建一个 XML 文件。这是我到目前为止所做的。

```
// Constructor
    public MainPage()
    {
        InitializeComponent();
        using (IsolatedStorageFile isstorage = IsolatedStorageFile.GetUserStoreForApplication())
        {
            if (isstorage.FileExists(rssCacheFile))
            {
                MessageBox.Show("Reading from cache");
                readCache(rssCacheFile);
            }
            else
            {
                MessageBox.Show("Reading from web");
                readFeed(rssLink);
            }
        }
    }

    public void readFeed(string link) 
    {
        WebClient wc = new WebClient();
        wc.OpenReadCompleted += new OpenReadCompletedEventHandler(wc_OpenReadCompleted);
        wc.OpenReadAsync(new Uri(link, UriKind.Absolute));
    }

    void wc_OpenReadCompleted(object sender, OpenReadCompletedEventArgs e)
    {

        Stream rssStream = e.Result;
        XmlReader response = XmlReader.Create(rssStream);
        SyndicationFeed feeds = SyndicationFeed.Load(response);

        foreach (SyndicationItem f in feeds.Items) 
        {
            itemList.Add(new RssItem {Title = f.Title.Text });
        }

        listBox1.ItemsSource = itemList;

        //Write to the cache
        writeXML(rssStream);
    }

    public void writeXML(Stream rssStream) 
    {
        using (IsolatedStorageFile isstorage = IsolatedStorageFile.GetUserStoreForApplication())
        {
            using (IsolatedStorageFileStream isstream = new IsolatedStorageFileStream(rssCacheFile, FileMode.Create, FileAccess.Write, isstorage))
            {
                byte[] buffer = new byte[rssStream.Length];
                while (rssStream.Read(buffer, 0, buffer.Length) > 0)
                {
                    isstream.Write(buffer, 0, buffer.Length);
                }

                isstream.Flush();
                System.Threading.Thread.Sleep(0);
            }
        }
    }

    public void readCache(string fileName) 
    {
        //IsolatedStorageFile isstorage = IsolatedStorageFile.GetUserStoreForApplication();
        using (IsolatedStorageFile isstorage = IsolatedStorageFile.GetUserStoreForApplication())
        {
            if (isstorage.FileExists(fileName))
            {
                try
                {
                    using (isstorage)
                    {
                        IsolatedStorageFileStream stream = isstorage.OpenFile(fileName, FileMode.Open, FileAccess.Read);
                        using (StreamReader reader = new StreamReader(stream))
                        {
                            rssXml.Text = reader.ReadToEnd();
                        }
                    }
                }
                catch (Exception ex)
                {
                    MessageBox.Show(ex.Message);
                }
            }
            else 
            {
                MessageBox.Show("Cache is empty....");
            }
        }
    } 
```

但问题是，我无法从写入的 XML 文件中读取。当我检查文件是否存在时，它就在那里。但我无法从中读取。谁能告诉我一个解决方案。任何帮助，将不胜感激。谢谢。

更新：我已经更新了上面的代码，我没有收到任何错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T12:11:17.830

您不应该将您的 isstorage 变量放在 using 中，因为它会在 using 结束时处理它，而这不是您想要的类变量。还将您的流变量放在 readCache 中的 using 中，以便它关闭并处理流。

还要确保您检查了您得到的例外情况，以便我们可以提供更好的帮助。

# php - 你能告诉我我博客的这段代码有什么问题吗？

> ID：14090445
> 
> 赞同：0
> 
> 时间：2012-12-30T11:45:07.630
> 
> 标签：php, mysql, pdo

如果我删除此代码，我的页面就会加载。但是如果我添加这个，我会从我的网络矩阵中得到一个 HTTP 错误 500。

```
<?php
try {    
  if(isset(['submit'])) {
    include('config.php');
    $subject = $_POST['subject'];
    $content = $_POST['editor1'];
    $date = $_POST['date'];
    $tags = $_POST['tags'];
    $author = $_POST['author'];
    $thumbnail = $_POST['thumbnail'];
    $sql = "INSERT INTO articles (Subject, Content, Date, Author, Tags, Thumbnail) VALUES ('$subject','$content','$date','$author','$tags', '$thumbnail')";
    $dbh->query($sql);   
  }
} catch(PDOException $e) {
   echo $e->getMessage();
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T11:47:25.337

在行

```
if (isset(['submit'])) 
```

缺少一个变量。您可能想使用这一行：

```
if(isset($_POST['submit'])) 
```

顺便说一句，您的 SQL 代码对 SQL 盲注是开放的。您应该解析参数，或者更好的是，使用准备好的语句。

```
$stmt = $dbh->prepare("INSERT INTO articles (Subject, Content, Date, Author, Tags, Thumbnail) VALUES (':subject',':content',':date',':author',':tags', ':thumbnail')");
$stmt->bindParam(':subject', $subject);
$stmt->bindParam(':content', $content);
// ...
$stmt->execute(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T11:47:26.083

这不是一个声明：

```
if (isset(['submit'])) 
```

它应该是：

```
if (isset($_POST['submit'])) 
```

有机会。

无论如何，您应该将参数绑定到查询，而不是将它们硬编码到其中。

# html - 在 WebView XCode (Cocoa) 中启用和使用 HTML5 地理定位

> ID：14090453
> 
> 赞同：4
> 
> 时间：2012-12-30T11:47:12.060
> 
> 标签：html, cocoa, webview, webkit, geolocation

我正在尝试使用 HTML5 内容构建 Mac OS X 应用程序，并且我想在 WebView 中使用 HTML5 地理定位功能。

对于我的测试，我使用了这个基本的演示页面：[http](http://html5demos.com/geo)
://html5demos.com/geo 在 Chrome 或 Safari 上，这个页面正在运行，浏览器向我显示有关位置共享的警报（Chrome 警报信息： https: [//support.google .com/chrome/bin/answer.py?hl=en&answer=142065](https://support.google.com/chrome/bin/answer.py?hl=en&answer=142065)）。

在我的应用程序（窗口中的一个简单 WebView）中，地理定位的尝试直接失败了。
这是一个（不必要的）屏幕截图：http: [//i46.tinypic.com/fedqtw.png](http://i46.tinypic.com/fedqtw.png)

所以，我不知道该怎么做，但也许有一种方法可以拦截地理定位的尝试并使用模态 YesNo 警报框来通知用户......

在此先感谢您的帮助:)

贝尼

**PS：**我查看了`WebPreferencesPrivate`是否可能存在启用的本机选项，但没有。

# c# - 套接字发送客户端列表

> ID：14090467
> 
> 赞同：2
> 
> 时间：2012-12-30T11:49:47.507
> 
> 标签：c#, winforms, sockets

我对 C# 不是很熟练，但我将它用于家庭作业。我创建了一个函数来将连接到服务器的客户端列表发送给其他客户端

```
private void SendListToClients()
    {
        Socket userSocket=null;
        string username = null;
        string role = null;
        foreach (User Users in UserList)
        {
            userSocket = Users.getSocket();
            username = Users.getUsername();
            role = Users.getRole();
            userSocket.Send(Encoding.ASCII.GetBytes("!ListStart\n"));
            for(int i=0;i<UserList.Count;i++)
            {
                User UsersControl = (User)UserList[i];
                string roleU = UsersControl.getRole();
                string usernameU = UsersControl.getUsername();

                userSocket.Send(Encoding.ASCII.GetBytes("!ClientList:"+usernameU + ":" + roleU+"\n"));       
            }

        }
    } 
```

我的问题出在 userSocket.Send() 行中，当我在客户端收到此消息时，我没有收到（例如，如果列表中的用户是 5 个）5 个发送，但 1 个与所有 5 个用户一起发送。我该如何解决这个问题？否则有可能通过套接字直接发送我的对象（UserList）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T12:33:09.920

从[Socket.Receive 方法](http://msdn.microsoft.com/en-us/library/8s4y8aff.aspx)文档：

> 如果您使用的是面向连接的 Socket，则 Receive 方法将读取尽可能多的数据，直到缓冲区的大小。

因此，即使服务器一次发送 5 条消息，它们都存储在客户端的输入缓冲区中并立即读取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T12:44:36.910

您所看到的是设计使然。这就是 TCP 的工作原理。或者正如其他人会告诉你的那样，“TCP 是流协议，而不是消息协议。”

简短摘要：仅仅因为您“发送”了 N 个字节，并不意味着您将“接收”N 个字节。TCP 将独立于应用程序如何构建其“发送”调用来流式传输字节。您的接收端代码应该准备好处理所有不同大小的接收字节块，并且不一定在等于您的应用程序消息大小的块中

# objective-c - Objective-C 中的 alloc 内存泄漏

> ID：14090472
> 
> 赞同：0
> 
> 时间：2012-12-30T11:51:23.557
> 
> 标签：objective-c, memory-management, memory-leaks

我是 Objective-C 的新手，所以我在理解内存管理方面遇到了一些问题。我创建了一个没有 ARC 的项目（以了解内存管理），我想知道如何避免内存泄漏。

我用一些 C++ 代码解释。例如，我想用 3 个向量创建一个矩阵，所以在 C++ 中我们可以这样做（第一种方法）：

```
Matrix mat(Vector(1, 1, 1), Vector(2, 2, 2)); 
```

在函数结束时，所有对象都被销毁并且没有内存泄漏

在 Objective-C 中，我们做这样的事情：

```
Matrix mat = [[Matrix alloc] init:[[Vector alloc] init:1:1:1]:[[Vector alloc] init:2:2:2]]; 
```

在 C++ 中是（第二种方法）：

```
Matrix mat = new Matrix(new Vector(1, 1, 1), new Vector(2, 2, 2)); 
```

但是通过这种方式，我们无法破坏 2 个向量，因此我们会产生内存泄漏。

所以我的问题是，有没有办法在 Objective-C 中执行第一种方法？如果没有，我想我必须创建 2 个临时变量，其中包含 2 个向量并在矩阵初始化后释放，或者还有另一种方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T12:06:51.397

除了您的语法不是真正符合 Obj-C 的事实之外，在这种情况下还有多种管理内存的选项。

**注意**：我假设您不想将参数存储到变量中，否则只需在将这些变量传递给构造函数后释放它们即可。使用 ARC，这并没有什么大的区别，因为您在任何情况下都不需要发布。

**没有弧。工厂方法**

Objective-C 中的工厂方法是按照惯例自动发布的。这个约定是如此强大，以至于即使是 ARC 也会期望这样的方法会被自动发布，所以要小心

```
Matrix *mat = [Matrix matrixWithVectors:[Vector vectorWithCoordinatesX:1 y:1 z:1],
                                        [Vector vectorWithCoordinatesX:1 y:1 z:1],
                                        [Vector vectorWithCoordinatesX:1 y:1 z:1], nil]; 
```

的实现`vectorWithCoordinates`，例如，应该类似于

```
+ (Vector *)vectorWithCoordinatesX:(CGFloat)x y:(CGFloat)y z:(CGFloat)z {
    return [[[Vector alloc] initWithCoordinatesX:x y:y z:z] autorelease];
} 
```

**没有弧。自动释放**

如果因为内联创建参数而没有保留对参数的引用，则还可以显式地自动释放它们。

```
Matrix *mat = [[[Matrix alloc] initWithVectors:[[[Vector alloc] initWithCoordinatesX:1 y:1 z:1] autorelease],
                                               [[[Vector alloc] initWithCoordinatesX:1 y:1 z:1] autorelease],
                                               [[[Vector alloc] initWithCoordinatesX:1 y:1 z:1] autorelease], nil] autorelease]; 
```

**弧**

在 ARC 中不需要发布，因为编译器会处理它。

所以两者

```
Matrix *mat = [Matrix matrixWithVectors:[Vector vectorWithCoordinatesX:1 y:1 z:1],
                                        [Vector vectorWithCoordinatesX:1 y:1 z:1],
                                        [Vector vectorWithCoordinatesX:1 y:1 z:1], nil]; 
```

和

```
Matrix *mat = [[Matrix alloc] initWithVectors:[[Vector alloc] initWithCoordinatesX:1 y:1 z:1],
                                              [[Vector alloc] initWithCoordinatesX:1 y:1 z:1],
                                              [[Vector alloc] initWithCoordinatesX:1 y:1 z:1], nil]; 
```

是正确的。

我在这里的假设也是`Matrix`构造函数将任意数量的向量作为参数，`nil`终止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T11:59:29.197

您是正确的，您需要使用临时变量来正确释放对象。

通常在 pre-ARC 代码中，你会使用 autorelease 代替：

```
Matrix mat = [[Matrix alloc] init:[[[Vector alloc] init:1:1:1] autorelease] :[[[Vector alloc] init:2:2:2] autorelease]]; 
```

或者，更好的是，您可以为 Vector 添加一个方便的方法：

```
+ (Vector*) vector:(int)a :(int)b :(int)c
{
    return [[[Vector alloc] init:a :b :c] autorelease];
} 
```

然后使用它：

```
Matrix mat = [[Matrix alloc] init:[Vector vector:1 :1 :1] :[Vector vector:2 :2 :2]]; 
```

（顺便说一句，在冒号前不带单词来命名方法是一种不好的形式——很难阅读。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T11:56:07.930

您的 Objective-C 代码是错误的。你的假设是对的

> 所以我的问题是，有没有办法在 Objective-C 中执行第一种方法？如果没有，我想我必须创建 2 个临时变量，其中包含 2 个向量并在矩阵初始化后释放，或者还有另一种方法可以做到这一点？

另一种方法是使用类方法来获取自动释放的对象。这些方法以加号开头。或者你也可以自己自动释放向量。

```
[[[Vector alloc] init:1:1:1] autorelease]; 
```

顺便说一句：在 Objective-C 中你不应该使用未命名的参数。所以你的初始化应该是这样的：

```
[[[Vector alloc] initWithX:1 y:1 z:1] autorelease]; 
```

但我强烈建议使用 ARC 并停止担心内存管理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-30T12:00:46.910

您需要释放您分配的所有对象，如 C++ new 和 delete。因此，一种方法是如您所说创建临时变量然后释放它们。

然而，当包含对象的自动释放池被释放时，也有 autorelease 来释放对象，例如，如果你没有创建自己的池，在主 NSApplication 循环中。在这种情况下，这允许您在线进行内存管理。

所以

```
Matrix mat = [[[Matrix alloc] init:[[[Vector alloc] init:1:1:1]autorelease]
                  :[[[Vector alloc] init:2:2:2]autorelease]
                  autorelease]; 
```

请参阅[Apple 关于内存管理的文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/MemoryMgmt.html)作为开始。

我会看一些例子来学习这个机制，但是去 ARC 做任何实际的工作——你可能需要了解底层的发布机制来调试。

# java - 使用服务器进行回合制游戏（Android） - 如何存储数据？

> ID：14090476
> 
> 赞同：1
> 
> 时间：2012-12-30T11:52:05.050
> 
> 标签：java, android, tomcat, servlets

我正在为两名玩家在 Android 中编写一个简单的回合游戏。我已经开发了一个离线版本（当两个人交换电话时），现在想创建一个在线版本。

我想要这样做的方式是为我的网站使用 Tomcat 或我自己的 PHP 服务器。我的问题是是否有可能以及如何存储数据？

我认为我唯一需要发送到服务器的是当前分数和代表棋盘的数组。然后我将能够在客户端检索这些信息。我在想正确吗？

我得说，我对所有这些东西完全陌生。我和使用 Java 编程的朋友交谈，他告诉我应该使用 Tomcat。但是怎么做？它是一个本地服务器，所以它可以工作的唯一方法是两部手机连接到同一个网络还是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T11:59:09.547

最简单的方法是在在线服务器上实现一组[RESTful服务。](http://en.wikipedia.org/wiki/REST#RESTful_web_services)如果您愿意，您可以使用 Tomcat，但最便宜的方法是使用 ie PHP 进行简单的网络托管。创建 REST API 之类`/get/board, /get/move, /update/move, /authenticated`的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T14:26:04.810

最简单的开始方式可能甚至不需要任何真正的服务，而只是几个 PHP 脚本和一个 MySQL 数据库。

您将需要一些服务器，例如只是一个简单的 FTP 服务器，您可以在其中放置一些互联网上可访问的脚本，并托管（MySQL）数据库。

然后，为了保持分数，您只需要 2 个脚本：1 个用于保存，1 个用于检索玩家的分数。

保存分数只需要您调用一个链接，例如：www.server.com/saveScore.php?playerId=111&score=60 在 PHP 中，您可以使用 $_GET['playerId'] 和 $ _GET['score'] 并通过查询将这些值保存到您的数据库中。

将分数返回到您的应用程序可以通过调用链接来解决：www.server.com/retrieveScore.php?playerId=111 这将简单地查询您的数据库以获取有关该播放器的信息，然后将其打印为 XML 或 JSON。然后您的应用程序可以再次解析响应（xml/json）。

一个好主意是将它从 $_GET 移动到 $_POST （POST 在链接中不可见，但您需要更复杂的代码来通过它传输数据）一旦它工作。

一旦你开始着手实际构建服务，REST 将是一个不错的选择，以提高可维护性、可扩展性和安全性。

# xml - 使用lua存储游戏数据效率高吗？

> ID：14090478
> 
> 赞同：2
> 
> 时间：2012-12-30T11:52:20.873
> 
> 标签：xml, database, cocos2d-iphone, lua, game-engine

我是 lua 新手，我想知道，使用 lua 存储游戏数据（例如怪物的描述、法术）是否有效。

我的问题是，当我尝试每秒创建一个怪物对象时，我必须运行 lua 文件并重复获取数据，我认为这可能效率不高。

在尝试使用 lua 之前，我使用 XML 来存储数据。在游戏开始时，我将“monster.xml”文件读取了一次，并一直保存在内存中，每次需要创建怪物时，我只是参考它。这种 XML 方法是否比 lua 更有效？还是有其他更好的解决方案？

谢谢 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-30T12:27:54.020

Why not read the Lua file only once, store the data in memory and copy it whenever needed?

Or, if (some of) the data doesn't change, you don't even need to copy it; just have all the monsters of that type refer to the same copy of the data.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T15:50:20.050

如果你通过 加载 Lua 文件`lua_load()`，你会得到一个编译过的块作为 Lua 函数。

所以所有的文件读取和解析只发生一次。运行这个函数并从 Lua 状态读取结果需要自己的成本，但我猜应该比从 XML 结构中获取数据要快。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-02T18:14:11.240

1.  从磁盘加载 X，然后在需要时从内存中读取。
2.  每次需要数据时从磁盘加载 X。

对于任何 X 值（XML、Lua），#1 都将比 #2 快。

您正在将 #1(X=XML) 与 #2(X=Lua) 进行比较，这是一个苹果与橘子的比较。

如果你更喜欢使用 Lua 作为你的数据存储格式——无论出于何种原因（更简洁、更灵活等）——假设你对待相同的目的，没有理由不能像使用 XML 一样快加载的数据相同。

假设您将 Lua 用作加载*数据*（而不是行为）的一种方式，看起来您正在这样做，那么无论如何您都应该将数据提取到某些结构化数据类型中。一旦数据被吞入，该数据的*来源*（XML、Lua 等）对程序来说并不重要。

# vb.net - 从外部应用程序的特定文本框中获取文本 - Visual Basic .Net

> ID：14090479
> 
> 赞同：5
> 
> 时间：2012-12-30T11:52:28.313
> 
> 标签：vb.net, vb.net-2010, external-application

我可以从外部应用程序文本框中获取文本，但现在我想从外部应用程序的所需文本框中获取文本。我的英语不太好，所以请看下图。

![在此处输入图像描述](../Images/96a35780560e48787e8296c14dfe0ac0.png)

下面的代码仅返回第一个文本框值。

```
Imports System.Runtime.InteropServices

Public Class Form1

Private Const WM_GETTEXT As Integer = &HD
Declare Auto Function SendMessage Lib "user32.dll" (ByVal hWnd As IntPtr, ByVal msg As Integer, _
ByVal wParam As IntPtr, ByVal lParam As IntPtr) As IntPtr
<DllImport("user32.dll", SetLastError:=True, CharSet:=CharSet.Auto)> _
Private Shared Function FindWindowEx(ByVal parentHandle As IntPtr, _
                                 ByVal childAfter As IntPtr, _
                                 ByVal lclassName As String, _
                                 ByVal windowTitle As String) As IntPtr
End Function

Declare Auto Function FindWindow Lib "user32.dll" (ByVal lpClassName As String, ByVal lpWindowName As String) As IntPtr

Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    'Find the running notepad window
    Dim Hwnd As IntPtr = FindWindow(Nothing, TextBox1.Text)

    'Alloc memory for the buffer that recieves the text
    Dim Handle As IntPtr = Marshal.AllocHGlobal(100)

    'send WM_GWTTEXT message to the notepad window
    Dim NumText As Integer = SendMessage(Hwnd, WM_GETTEXT, 50, Handle)

    'copy the characters from the unmanaged memory to a managed string
    Dim Text As String = Marshal.PtrToStringUni(Handle)

    'Display the string using a label
    Label1.Text = Text

    'Find the Edit control of the Running Notepad
    Dim ChildHandle As IntPtr = FindWindowEx(Hwnd, IntPtr.Zero, "Edit", Nothing)

    'Alloc memory for the buffer that recieves the text
    Dim Hndl As IntPtr = Marshal.AllocHGlobal(200)

    'Send The WM_GETTEXT Message
    NumText = SendMessage(ChildHandle, WM_GETTEXT, 200, Hndl)

    'copy the characters from the unmanaged memory to a managed string
    Text = Marshal.PtrToStringUni(Hndl)

    'Display the string using a label
    Label2.Text = Text

End Sub

End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-14T14:39:41.707

您必须遍历主窗口（外部应用程序）的子窗口并获取它们的属性。您将使用以下内容：

```
<DllImport("User32.dll")> _
    Public Function EnumChildWindows _
        (ByVal WindowHandle As IntPtr, ByVal Callback As EnumWindowProcess, _
        ByVal lParam As IntPtr) As Boolean
    End Function

    Public Delegate Function EnumWindowProcess(ByVal Handle As IntPtr, ByVal Parameter As IntPtr) As Boolean

Public Function GetChildWindows(ByVal ParentHandle As IntPtr) As IntPtr()
    Dim ChildrenList As New List(Of IntPtr)
    Dim ListHandle As GCHandle = GCHandle.Alloc(ChildrenList)
    Try
        EnumChildWindows(ParentHandle, AddressOf EnumWindow, GCHandle.ToIntPtr(ListHandle))
    Finally
        If ListHandle.IsAllocated Then ListHandle.Free()
    End Try
    Return ChildrenList.ToArray
End Function 
```

有关详细信息，请查看[如何使用 VB.Net 获取弹出消息框中包含的控件的属性](https://stackoverflow.com/questions/24719147/how-can-i-get-properties-of-controls-contained-in-a-popup-message-box-using-vb-n/24723000?noredirect=1#comment38358369_24723000)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-10T13:18:27.060

' 在 excel vbe 上试试这个

```
External_application_handle=findwindow(vbNullString,"External_application")
textbox_1_handle=findwindowex(External_application_handle,0&,"Edit",vbNullString)
next_handle=textbox_1_handle
textbox_2_handle=findwindowex(External_application_handle,next_handle,"Edit",vbNullString")
Length = SendMessage(textbox_2_handle, WM_GETTEXTLENGTH, 0,0)
buffer$=space(Length)
call sendmessage(textbox_2_handle,Length+1,buffer$)
msgbox buffer 
```

# apache - 在文件夹之间内部重写 URL，index.php 除外

> ID：14090483
> 
> 赞同：1
> 
> 时间：2012-12-30T11:53:05.113
> 
> 标签：apache, .htaccess, mod-rewrite

我有两个文件夹：

```
/forum/admin
/forum/adminhide 
```

我想在论坛文件夹中有一个.htaccess 文件，它将在内部将除/admin 上的index.php 之外的所有内容重写为/adminhide。

例子：

```
http://website.com/forum/admin/index.php -> don't do anything
http://website.com/forum/admin/image.png -> internal rewrite to http://website.com/forum/adminhide/image.png 
```

到目前为止，我所有的尝试都只产生了服务器内部错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T12:04:12.067

这可能有效（在根级 .htaccess 文件中）：

```
RewriteRule ^forum/admin/index\.php$ - [S=1]
RewriteRule ^forum/admin/(.*) forum/adminhide/$1 
```

任何匹配第一个规则的 URL 都不会被重写（因为替换具有魔法值`-`），并且`[S=1]`如果第一个规则匹配，则该标志会导致下一个规则（实际重写）被跳过。

请注意，这从字面上解释了您的要求：*每个*以开头的 URL 路径`forum/admin/`都被重写，除了`forum/admin/index.php`. 您可能更愿意将第一条规则更改为更宽松的规则，例如：

```
RewriteRule ^forum/admin/(index\.php(/.*)?)?$ - [S=1] 
```

这也将匹配（并因此从重写中排除）URL 路径`forum/admin/`和`forum/admin/index.php/whatever`.

* * *

**编辑：**如果要将 .htaccess 文件放在文件`forum`夹中，只需`forum/`从规则中删除首字母并[`RewriteBase`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritebase)适当设置：

```
RewriteBase /forum/

RewriteRule ^admin/index\.php$ - [S=1]
RewriteRule ^admin/(.*) adminhide/$1 
```

# asp.net - 使用 asp.net 和 Visual Studio 2010 使用 Web 服务

> ID：14090484
> 
> 赞同：0
> 
> 时间：2012-12-30T11:53:10.727
> 
> 标签：asp.net, asp.net-mvc, wcf

我正在尝试在 Visual Studio 2010 中使用/使用 Web 服务。API 文档提供了 3 个 url：

*   [http://testwebpay.interswitchng.com/test_paydirect/services/webpayservice.svc](http://testwebpay.interswitchng.com/test_paydirect/services/webpayservice.svc)
*   [http://testwebpay.interswitchng.com/test_paydirect/api/v1/gettransaction.xml](http://testwebpay.interswitchng.com/test_paydirect/api/v1/gettransaction.xml)
*   [http://testwebpay.interswitchng.com/test_paydirect/api/v1/gettransaction.json](http://testwebpay.interswitchng.com/test_paydirect/api/v1/gettransaction.json)

文档给出了两个例子。对于 json，他们说示例请求如下：

```
Http://testwebpay.interswitchng.com/test_paydirect/api/v1/gettransaction.json?productid=21&transactionreference=8421941122&amount=300000 HTTP/1.1
UserAgent: Mozilla/4.0 (compatible; MSIE 6.0; MS Web Services Client Protocol 4.0.30319.239)
Hash: F6FF2E22F99D93DDDA52D71811FD92B3A71FA1968A66216E0D310DAD 
```

对于 XML：

```
GET Http://testwebpay.interswitchng.com/test_paydirect/api/v1/gettransaction.xml?productid=21&transactionreference=8421941122&amount=300000 HTTP/1.1
UserAgent: Mozilla/4.0 (compatible; MSIE 6.0; MS Web Services Client Protocol 4.0.30319.239)
Hash: F6FF2E22F99D93DDDA52D71811FD92B3A71FA1968A66216E0D310DAD 
```

文档没有给出使用`.svc`url的示例

我正在尝试`Add -> Webservice Reference`在 VS 2010 中使用，但我不断收到以下`.svc`url 错误（上面 3 中的第一个错误）：

> *下载时出错`https://testwebpay/test\_paydirect/services/WebPAYService.svc?wsdl`。
> 无法解析远程名称：“testwebpay”
> 元数据包含无法解析的引用：`https://testwebpay/test\_paydirect/services/WebPAYService.svc?wsdl`。
> 没有`https://testwebpay/test\_paydirect/services/WebPAYService.svc?wsdl`可以接受消息的端点监听。这通常是由不正确的地址或 SOAP 操作引起的。有关更多详细信息，请参阅 InnerException（如果存在）。
> 无法解析远程名称：“testwebpay”*

我需要使用以上 3 个 URL 中的哪一个来添加服务引用。是服务端有问题还是我做错了什么？

请建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T12:05:25.903

这是一个相当奇怪的网络服务....

如果您转到作为第一个 URL 提供的 URL：

```
http://testwebpay.interswitchng.com/test_paydirect/services/WebPAYService.svc 
```

你会得到一个“帮助页面”，它会告诉你——是的，确实，这里有一个 SOAP 服务。

**但是：**在该页面顶部添加 Web 引用的 URL**无效**：

```
https://testwebpay/test_paydirect/services/WebPAYService.svc?wsdl 
```

这是一个*本地*网址 - 缺少域名......

所以基于这个 URL，你真的必须连接到

```
https://testwebpay.interswitchng.com/test_paydirect/services/WebPAYService.svc?wsdl 
```

为了获得服务的 SOAP 定义（描述该服务所有细节的 Web 服务描述语言文件）。一旦您在那里连接，并且一旦您忽略了证书问题（如果您信任该公司/服务提供商），那么您将获得正确的 WSDL，并且您可以构建您的服务客户端。

或者：转到

```
https://testwebpay.interswitchng.com/test_paydirect/services/webpayservice.svc 
```

（您的第一个 URL，但使用`https://`而不是`http://`）并且您从一开始就获得了 WSDL 的正确 URL...

# objective-c - 使用情节提要支持 iPad 上的多个方向的最佳方法（无 AutoLayout 或 AutoResizing）

> ID：14090485
> 
> 赞同：9
> 
> 时间：2012-12-30T11:53:11.653
> 
> 标签：objective-c, ios, xcode, ipad, storyboard

我想在我的 iPAD 应用程序上支持横向和纵向方向，该应用程序使用情节提要，而不涉及`Auto Layout`on`iOS6+`和`Auto Resizing`on`iOS 5`和更早的复杂性（因为该应用程序将同时支持 iOS 5 和 6，所以`AutoLayout`这里不允许），我想到了什么作为解决方案的起点如下：

创建两个单独的故事板：`MainStoryboard-Portrait`& `MainStoryboard-Landscape`，当当前视图控制器（我们将其命名为 FirstViewController）是纵向的，并且用户将设备旋转到横向时，我从故事板中`instantiate`新建一个，反之亦然，当用户旋转回纵向时。我在方法中做了这样的事情：`FirstViewController``MainStoryboard-Landscape``willRotateToInterfaceOrientation``FirstViewController.m`

```
 UIStoryboard *storyboard  = [UIStoryboard storyboardWithName:@"MainStoryboard-Landscape" bundle:[NSBundle mainBundle]];
  FirstViewController *VC =  [storyboard instantiateViewControllerWithIdentifier:@"VC1"];
  self.view = VC.view; 
```

但是在 iOS6+: 上发生了以下崩溃`A view can only be associated with at most one view controller at a time!`，在 iOS5 上也尝试过，不会崩溃但旋转无法正常工作：窗口边界旋转但视图本身保持原样。

如何让它在 iOS 5 和 6 上运行？或者如果有其他更好的方法，请为我​​提供一个工作代码示例，我将奖励你 50 分。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-02T00:48:39.050

如果您真的不想使用自动布局，在单个 .storyboard 中执行此操作仍然可以通过使用 an`IBOutlet (weak, nonatomic) UIView* portraitView`和 an来完成`IBOutlet (weak, nonatomic) UIView* landscapeView`。将每个视图创建`view`为`FirstViewController`.storyboard 中主视图的子视图。

然后在 中`willRotateToInterfaceOrientation:`，执行以下操作：

```
 if (UIInterfaceOrientationIsPortrait(toInterfaceOrientation))
    {
        self.portraitView.hidden = NO;
        self.landscapeView.hidden = YES;
    }
    else
    {
        self.portraitView.hidden = YES;
        self.landscapeView.hidden = NO;
    } 
```

在 .storyboard 中处理视图时，您可以通过选中/取消选中`hidden`右侧边栏中的标志来更好地查看每个子视图。

那么，这样做的另一个优点是，如果您有一些无论方向如何看起来都不错的视图，您不必为它们维护单独的故事板文件和场景。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T11:54:55.660

自动布局确实是要走的路。一旦你有两个故事板，你就会遇到维护和一致性问题——如果你希望纵向和横向用户体验相同。如果您出于某种原因特别希望它们有所不同，那么两个故事板是合适的。

# python - 辨别回文的代码

> ID：14090488
> 
> 赞同：-1
> 
> 时间：2012-12-30T11:53:34.223
> 
> 标签：python

```
def is_palindrome(s):

    if s == ' ':
        return True

    if s[0] != s[-1]:
        return False

    return is_palindrome(s[1:-1]) 
```

这是我的代码，它不起作用。它适用于诸如 abab 之类的情况，但不适用于 abba。谁能告诉我为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T11:58:01.857

```
def is_palindrome(s): 
  return s == s[::-1] 
```

如果您担心*大*字符串，可以使用迭代器：

```
def is_palindrome(xs):
  return all( imap( lambda a,b: a == b, iter(xs), reversed(xs)) ) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-30T12:00:49.360

如果*必须*使用递归，请使用更好的终止子句：

```
def is_palindrome(s):
    if len(s) <= 1:
        return True
    if s[0] != s[-1]:
        return False
    return is_palindrome(s[1:-1]) 
```

因此，当您的字符串减少到 1 或 0 个字符时，您就有了回文。

这给出了：

```
>>> is_palindrome('abba')
True
>>> is_palindrome('palindrome')
False
>>> is_palindrome('aba')
True 
```

您最初的错误是测试空格，而`s`被缩减为*空*字符串。测试 for`s == ''`也可以，但由于单字符字符串也有资格作为回文，您不妨将其设为显式终止测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-30T11:59:08.890

```
def is_palindrome(s):
    if s == '':  # <-- See this change, '' instead of ' '
        return True
    if s[0] != s[-1]:
        return False
    return is_palindrome(s[1:-1])

>>> is_palindrome('')
True
>>> is_palindrome('a')
True
>>> is_palindrome('aba')
True
>>> is_palindrome('abba')
True
>>> is_palindrome('abcba')
True
>>> is_palindrome('abcbac')
False
>>> is_palindrome(' ')
True
>>> is_palindrome('able was i ere i saw elba')
True 
```

不过，这根本不是一个好的实现。你应该尝试不同的方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-30T12:05:22.680

像这样的东西应该有效地处理大量输入（以及测试值直到中间）：

```
from itertools import islice, izip

def is_palindrome(s):
    middle = len(s) // 2
    return all(i[0] == i[1] for i in islice(izip(s, reversed(s)), middle + 1)) 
```

在 Python 3 中，您可以只替换`izip()`为`zip()`.

# three.js - 较新的 Threejs 版本和鼠标悬停

> ID：14090489
> 
> 赞同：1
> 
> 时间：2012-12-30T11:53:50.400
> 
> 标签：three.js

我试图使用最后三个版本来加载 Collada Loader。此外，我只想将鼠标悬停在事件上。

我一直在相关论坛上阅读（并分析很多示例），有关 intersectObjects 的问题（此功能使鼠标悬停在 evet 上成为可能）。

问题很简单：如何在模型片段上编写鼠标悬停事件？

[这是我的示例](http://webgl.drapps.info/)，但它没有使用最新版本的 threejs 库。

目前没有别的，我认为从这个库开始很难，没有那么多文档......

我的根本问题是当鼠标不在画布上时，threejs 通过事件检测到鼠标悬停在我的模型的某些部分上......我想如果我更新threejs，这可能会得到修复

谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T19:35:35.957

据我所见，您已经实现了 intersectObjects。尝试在您的画布上使用它：

`position : absolute, top : 0px`

在我看来，您没有使用正确的 mousePosition 进行计算。尝试使用画布而不是文档的相对 mousePosition。而且我不会检查每个渲染调用的交叉点。也许在 mouseMove 事件或间隔上。

# javascript - DOM更改后如何更新存储在变量中的jQuery对象？

> ID：14090495
> 
> 赞同：8
> 
> 时间：2012-12-30T11:54:36.843
> 
> 标签：javascript, jquery, dom

我通常将我的 jQuery 对象存储在变量中，以避免将选择器写得到处都是。

当我更改 DOM 时，我想让对象自行更新。删除未使用的引用并使用新引用进行更新。我怎样才能做到这一点？理想情况下，我想用以下逻辑做一些事情：

```
var test = $('div.bar');
console.log(test);
>> [<div class="bar" id="b1"></div>, <div class="bar" id="b2"></div>]

$('#b2').remove();
console.log(test);
>> [<div class="bar" id="b1"></div>, <div class="bar" id="b2"></div>]

test.update();
console.log(test);
>> [<div class="bar" id="b1"></div>]

$('body').append('<div class="bar" id="b3"></div>');
console.log(test);
>> [<div class="bar" id="b1"></div>]

test.update();
console.log(test);
>> [<div class="bar" id="b1"></div>, <div class="bar" id="b3"></div>] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-30T11:54:36.843

[这个插件](https://github.com/fmsf/jQuery-obj-update)解决了这个问题：

```
(function ( $ ) {
  $.fn.update = function(){
    var newElements = $(this.selector),i;    
    for(i=0;i<newElements.length;i++){
      this[i] = newElements[i];
    }
    for(;i<this.length;i++){
      this[i] = undefined;
    }
    this.length = newElements.length;
    return this;
  };
})(jQuery); 
```

只需将其添加到您的代码中并执行以下操作：

```
var $foo = $("div.bar"); // selects all "div.bar"
(... many dom modifications ...)
$foo.update(); 
```

# dependency-injection - 在 LOB/DI 应用程序中实施横切概念

> ID：14090498
> 
> 赞同：2
> 
> 时间：2012-12-30T11:55:08.203
> 
> 标签：dependency-injection, application-design, lob

我目前正在创建一个小型个人窗口（桌面）.NET [LOB](http://en.wikipedia.org/wiki/Line_of_business)应用程序，我想借此机会增加我对[DI](http://en.wikipedia.org/wiki/Dependency_injection)的知识和经验。我已将我的应用程序分为模型、DAO 和 GUI 部分，但我想知道如何实现一些横切概念，例如：

*   当前登录用户 - 用于：
    *   声明权限 - 在应用程序的某些部分，我检查用户是否拥有必要的权限
    *   审计 - 将用户操作记录到单独的数据库表中
    *   ETC
*   当前应用程序参数（从配置文件或表中加载） - 用于：
    *   定义业务战略
    *   定义 UI（例如主题）
    *   ETC
*   记录到文件/数据库日志 - 用于：
    *   记录 UI 动作（点击按钮等）
    *   记录业务流程（计算结果、战略决策等）
    *   记录基础设施的东西（用于 CRUD 操作的 SQL）
    *   ETC

目前我可以想到几种方法来提供这些信息：

*   使用静态属性 - UserEntity.Current、Configuration.Current、Logger.Current 等。
    *   优点：
        *   易于实施
        *   使用简单
    *   缺点：
        *   变得凌乱
        *   目前尚不清楚应用程序的哪个部分使用了什么
        *   如果您需要更精细的粒度，则不能使用（例如，如果应用程序中的某些进程需要覆盖当前值）
*   使用[DI](http://en.wikipedia.org/wiki/Dependency_injection) - 为每个需要此信息的类提供属性/ctor 参数
    *   优点：
        *   每个班级都清楚它需要什么
        *   单元测试很容易
    *   缺点：
        *   它似乎只是让构造函数爆炸
        *   如果类需要具有默认构造函数，则会出现问题
        *   当类被第 3 方 (XAML) 实例化时难以设置
*   使用[服务定位器](http://en.wikipedia.org/wiki/Service_locator_pattern)
    *   优点：
        *   易于设置
        *   便于使用
    *   缺点：
        *   目前尚不清楚应用程序的哪个部分使用了什么
        *   难以设置更精细的粒度（但并非不可能）

我目前倾向于使用 ServiceLocator，因为我以前使用过它，而且效果很好。但是我担心失去控制。很容易找到服务定位器，而不是尝试解决设计问题。

有人可以提供他们的经验/知识吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T17:17:21.283

[听起来像是从面向方面的](/questions/tagged/aspect-oriented "显示标记为“面向方面”的问题")方法开始的完美案例。您的应用程序的 LOB 将根据已与不同的非功能需求交叉的业务功能需求进行设计：身份验证、审计、日志记录等。

同时，一些*当前的应用需求*可以通过[依赖注入](/questions/tagged/dependency-injection "显示标记为“依赖注入”的问题")来解决。首先，我建议首先识别[*composition root*](http://blog.ploeh.dk/2011/07/28/CompositionRoot.aspx)。例如，在[wpf](/questions/tagged/wpf "显示标记为“wpf”的问题")应用程序中，它就是`Application.OnStartup`方法。如果您能够识别*组合根*，最好避免[使用 service-locator](/questions/tagged/service-locator "显示标记为“服务定位器”的问题")。*服务定位器*在维护和测试时会增加不必要的复杂性，因为它实际上可以解决任何问题，因此依赖关系管理会很复杂。

下一步，要决定：*依赖注入*和*面向方面的方法*应该分开还是结合。这两种方法都有优点和缺点。

在选择*分离*的方法时，您可以使用具有很多好处的[postsharp](/questions/tagged/postsharp "显示标记为“postsharp”的问题")：很棒的示例和文档、社区和准备使用的方面。但是没有什么是免费的，*postsharp*在免费版本中只有有限数量的功能以及与[continue-integration 的](/questions/tagged/continues-integration "显示标记为“继续集成”的问题")复杂集成。

另一种解决方案：将[依赖注入](/questions/tagged/dependency-injection "显示标记为“依赖注入”的问题")与[dynamic-proxy](/questions/tagged/dynamic-proxy "显示标记为“动态代理”的问题")结合起来。只要您遵循概念：针对接口而不是实现进行编程-您将满足所有要求。好处：在一个地方连接所有组件。有两个主要缺点：第一个*动态代理*本身非常有限，第二个 -*依赖注入容器*和*动态代理*之间的集成- 对于某些容器它已经存在，对于其他容器不存在。示例：[Ninject 扩展 Interception](https://github.com/ninject/ninject.extensions.interception)或 StructureMap 和 Interception。

我建议您查看以下资源以自己找到更多答案： * Book [AOP in .NET: Practical Aspect-Oriented Programming by Matthew D. Groves](http://www.manning.com/groves/)：第一章免费提供 * Book [Dependency Injection in .NET by Mark Seemann](http://www.manning.com/seemann/)：写得很好的关于*依赖注入*的书，第 9 章专门介绍拦截，我发现在你所描述的情况下，这种方法非常有用。这本书的作者还有[一个优秀的博客，专门介绍*依赖注入*](http://blog.ploeh.dk/)和关于使用[*依赖注入*](http://channel9.msdn.com/Events/GOTO/GOTO-2011-Copenhagen/CPH-Aspect-Oriented-Programming-with-Dependency-Injection)[*的面向方面*编程的](http://channel9.msdn.com/Events/GOTO/GOTO-2011-Copenhagen/CPH-Aspect-Oriented-Programming-with-Dependency-Injection)*视频。*

# c# - open new Thread inside for statement 等到我的线程完成后再打开新线程

> ID：14090501
> 
> 赞同：1
> 
> 时间：2012-12-30T11:56:01.473
> 
> 标签：c#, winforms

我尝试在不同的线程中执行我的操作，但我想等到我的 Tread 完成后再打开新线程：

```
public class Play
{
    private string _filePath;
    private int _deviceNumber;

    public Play(string filePath, int deviceNumber)
    {
        _filePath = filePath;
        _deviceNumber = deviceNumber;
    }

    public void start()
    {
        Thread thread = new Thread(send);
        thread.IsBackground = true;
        thread.Start();
    }

    private void send()
    {
        ProcessStartInfo processStartInfo = new ProcessStartInfo(@"D:\SendQueue\SendQueue\bin\Debug\Send.exe");
        processStartInfo.Arguments = string.Format("{0} {2}{1}{2}", (_deviceNumber).ToString(), _filePath, "\"");
        processStartInfo.WindowStyle = ProcessWindowStyle.Hidden;
        processStartInfo.RedirectStandardOutput = true;
        processStartInfo.RedirectStandardError = true;
        processStartInfo.CreateNoWindow = true;
        processStartInfo.UseShellExecute = false;
        processStartInfo.ErrorDialog = false;

        using (Process process = Process.Start(processStartInfo))
        {
            process.WaitForExit();
        }
    }
} 
```

从开始按钮单击我正在播放列表框中的所有文件：

```
for (int i = 0; i < ListBox.Items.Count && shouldContinue; i++)
{
    PlayFile play = new PlayFile ((string)ListBox.Items[i], add);
    playCapture.start();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T11:58:23.060

```
 Task taskA = Task.Factory.StartNew(() => send());
    taskA.Wait(); 
```

但这会阻塞任务的调用者线程（工作将在第二个线程中完成，但实际上，调用者线程将在执行期间被阻塞）你不会从另一个线程中的工作中受益！

[这个链接](http://msdn.microsoft.com/en-us/library/dd537610.aspx)可以帮助你

如果您需要在另一个线程中完成所有工作，并保持主流畅通无阻，您可以将您的`for`语句放在一个线程中，这将完美运行。

# c++ - 将 std::function 作为参数传递时的问题

> ID：14090506
> 
> 赞同：2
> 
> 时间：2012-12-30T11:56:45.670
> 
> 标签：c++, clang, std-function

我在使用 clang 3.1（gcc 工作正常）时遇到了这个奇怪的问题（我在这里简化了代码）。是不当使用 std::function （按值传递）还是 clang 错误？

```
template <typename Container>
struct A
{
  using function_type = std::function<char(char)>;

  A(Container c, function_type f) : it_(c.begin()), f_(f) {}
  typename Container::value_type operator*() { return *it_; }

  typename Container::iterator it_;
  function_type f_;
};

template <typename Cont>
A<Cont> makeA(Cont c, std::function<char(char)> f)
{
  return A<Cont>(c, f);
}

char f(char ch) { return ch; }

int main()
{
  std::string s { "foo" };
  auto a = makeA(s, f); // wraps s.begin()
  std::clog << "main: " << *(s.begin()) << std::endl; // prints 'f'
  std::clog << "main: " << *a << std::endl; // prints garbage
  return 0;
} 
```

我在 Max OS X Lion 上使用 Apple clang 4.1 (llvm 3.1)。

如果我将第二个参数的类型更改为其他类型（例如 int），则一切正常。

如果我直接从 ctor 构造 A 对象，而不是使用“make”工厂，那么一切正常。

我真的不明白这是一个clang bug还是我的误解。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-30T12:01:10.993

您将按`string`值传递给 的构造函数`A`，然后在本地字符串中创建一个迭代器。然后在构造函数的末尾销毁字符串，留下无效的迭代器和未定义的行为。

```
//`c` is a local copy of the string
A(Container c, function_type f) :
    //c.begin() returns an iterator into `c`
    it_(c.begin()),
    f_(f)
{
}//`c` is destroyed, leaving it_ as a dangling iterator

//Dereferences `it_` -- undefined behaviour
typename Container::value_type operator*() { return *it_; } 
```

# java - EntityProxy 的 RequestFactory Nullpointer 异常

> ID：14090507
> 
> 赞同：0
> 
> 时间：2012-12-30T11:57:00.983
> 
> 标签：java, gwt, requestfactory

我想通过带有 RequestFactories 的线路发送通用对象。因为我想在服务器上测试它是什么类，并从数据库中为所请求的类返回一个值。

例如，我使用一个`NewsProxy`或一个`ProfileProxy`（每个扩展`EntityProxy`）或其他一些代理发送请求。

这是我的客户代码：

```
private void loadComments() {
    NewsProxy proxy = **Some News Proxy**
    ICommentRequest commentRequest = clientfactory.getRequestFactory().commentRequest();
    commentRequest.getComments(proxy).fire();

} 
```

接口`ICommentRequest`：

```
@Service(value = Comment.class, locator = OperatorServiceLocator.class)
public interface ICommentRequest extends RequestContext {
    Request<List<ICommentProxy>> getComments(EntityProxy object); 
} 
```

服务器实现: `Comment.java`:

```
public static List<Comment> getComments(Object o) {

    ...

} 
```

当我触发这个事件时，我得到一个`NullPointerException`. 我不知道在哪里...

```
Dec 30, 2012 12:39:25 PM com.google.web.bindery.requestfactory.server.RequestFactoryServlet doPost
SEVERE: Unexpected error
java.lang.NullPointerException
    at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:768)
    at com.google.web.bindery.requestfactory.server.ServiceLayerCache.getOrCache(ServiceLayerCache.java:225)
    at com.google.web.bindery.requestfactory.server.ServiceLayerCache.resolveClass(ServiceLayerCache.java:156)
    at com.google.web.bindery.requestfactory.server.RequestState$1.getTypeFromToken(RequestState.java:76)
    at com.google.web.bindery.requestfactory.shared.impl.IdFactory.getId(IdFactory.java:198)
    at com.google.web.bindery.requestfactory.server.RequestState.getBeansForPayload(RequestState.java:142)
    at com.google.web.bindery.requestfactory.server.SimpleRequestProcessor.processOperationMessages(SimpleRequestProcessor.java:509)
    at com.google.web.bindery.requestfactory.server.SimpleRequestProcessor.process(SimpleRequestProcessor.java:218)
    at com.google.web.bindery.requestfactory.server.SimpleRequestProcessor.process(SimpleRequestProcessor.java:135)
    at com.google.web.bindery.requestfactory.server.RequestFactoryServlet.doPost(RequestFactoryServlet.java:133)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
    at ch.zhaw.ams.server.auth.AuthFilter.doFilter(AuthFilter.java:35)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.api.socket.dev.DevSocketFilter.doFilter(DevSocketFilter.java:74)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.ResponseRewriterFilter.doFilter(ResponseRewriterFilter.java:123)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:34)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:61)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:125)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:94)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:383)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:938)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:755)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:218)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T12:21:17.977

您正在尝试从引用的集合中获取对象`null`

```
Object key = null;
//ConcurentHashMap: 768
int hash = hash(key.hashCode()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T12:27:57.990

看起来这是 GAE（Google 应用引擎）中的版本问题。你能在这里检查问题[吗](http://www.techques.com/question/1-7261630/Android-to-Appengine-RPC-Nullponter-on-server)？

尝试将 Google 应用引擎的版本更新到 1.6.1。

# html - 在 Html Div 中，溢出隐藏对我不起作用

> ID：14090510
> 
> 赞同：0
> 
> 时间：2012-12-30T11:57:23.030
> 
> 标签：html, css

我正在使用以下 html，请参阅此[jsfiddle](http://jsfiddle.net/H3nXk/)

```
 <div style="float: left;">
            <div style="padding-left: 3px; padding-top: 3px;">
                <div style="float: left;">
                    Title: 
                </div>
                <div style="float: left; padding-left: 12px">
                    ABC
                </div>
                <div style="clear: both"></div>
            </div>
            <div style="padding-left: 3px; padding-top: 3px;">
                <div style="float: left;">
                    Lyrics: 
                </div>
                <div style="float: left; padding-left: 3px">
                    <div style="overflow: hidden; width: 180px">
                        ABC DEF GHI JKl MNO dsa  dsa sddsa d s
                    </div>
                    <div style="overflow: hidden; width: 180px">
                        ABC DEF GHI JKl MNO MNO dsa  dsa sddsa d s
                    </div>
                </div>
                <div style="clear: both"></div>
            </div>
        </div>

        <div style="float: right; border-left: 1px solid black;">

            <img src="http://cdn1.iconfinder.com/data/icons/snowish/72x72/actions/gtk-media-play-ltr.png">
        </div>
    </div> 
```

但是我的文本溢出并没有隐藏。当我使用小文本而不是 '

> ABC DEF GHI JKl MNO dsa dsa sddsa ds

'那么一切都很好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T11:59:21.123

### 给`white-space: nowrap`：

```
 <div style="float: left;">
        <div style="padding-left: 3px; padding-top: 3px;">
            <div style="float: left;">
                Title: 
            </div>
            <div style="float: left; padding-left: 12px">
                ABC
            </div>
            <div style="clear: both"></div>
        </div>
        <div style="padding-left: 3px; padding-top: 3px;">
            <div style="float: left;">
                Lyrics: 
            </div>
            <div style="float: left; padding-left: 3px">
                <div style="overflow: hidden; white-space: nowrap; width: 180px; ">
                    ABC DEF GHI JKl MNO dsa  dsa sddsa d s
                </div>
                <div style="overflow: hidden; white-space: nowrap; width: 180px">
                    ABC DEF GHI JKl MNO MNO dsa  dsa sddsa d s
                </div>
            </div>
            <div style="clear: both"></div>
        </div>
    </div>

    <div style="float: right; border-left: 1px solid black;">

        <img src="http://cdn1.iconfinder.com/data/icons/snowish/72x72/actions/gtk-media-play-ltr.png">
    </div>
</div> 
```

### 小提琴：http: [//jsfiddle.net/H3nXk/1/](http://jsfiddle.net/H3nXk/1/)

* * *

### 或者如果您关心高度，则需要`height`明确指定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T11:59:36.327

您需要指定一个高度，以便容器知道溢出从哪里开始。

# iphone - UIImageView autoresizingMask 行为

> ID：14090522
> 
> 赞同：0
> 
> 时间：2012-12-30T11:59:08.110
> 
> 标签：iphone, objective-c, ios, uikit

我有一个显示自定义单元格的视图表视图。如果设备处于横向模式，这些单元格有一个 UIImageView 需要缩放。

我将`autoresizingMask`tableView 设置为`UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth`，对我的自定义单元格和 UIImageView 做了同样的事情。

**我的问题**是`autoresizingMask`UIImageView 的设置会更改视图的框架，而无需旋转任何设备。

这是我的 UIImageView 的初始化代码。

```
- (UIImageView *)bigImageView
{
  if (!_bigImageView)
  {
    _bigImageView = [[UIImageView alloc] initWithFrame:(CGRect){2, [self.header getHeight], 272, 272}];
    [_bigImageView setImage:[UIImage imageNamed:@"square.png"]];

    [_bigImageView setAutoresizingMask:UIViewAutoresizingFlexibleWidth];

    [_bigImageView setBackgroundColor:[UIColor redColor]];

  }
  return _bigImageView;
} 
```

宽度应为**272**但会自动更改为**232**。

预期的结果`autoresizingMask` **应该是：** ![蓝色为 TableView，红色为 UIImageView](../Images/4f65b78e2ee0fac9725a8e25004f751e.png)

**但我得到：**

![不要介意影子](../Images/46ff429740cc2e6277727b10c2d4c79b.png)

这个比例不再被尊重。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T12:15:04.267

发生这种情况是因为每个单元格都以 44 点的高度开始。你可以在init中检查。

也许您可以更正 in`drawRect:`或 in中的单元格元素的大小`layoutSubviews`。

# android - 使用合并在 Android 2.1 上对齐问题

> ID：14090526
> 
> 赞同：0
> 
> 时间：2012-12-30T11:59:26.177
> 
> 标签：android, layout

主要思想是 FrameLayout（黑色）居中，LinearLayout（红色）在底部对齐。这在我的 4.x 模拟器和我的 Galaxy Nexus 上完美运行。像这样：

![良好的布局](../Images/b8e79e66071dfec7382d560083b5527d.png)

在 Eclipse ADT 中，所有尺寸的布局预览看起来都很好。然而，当在 2.1 模拟器上运行时，FrameLayout (Black) 似乎向下移动。

![布局错误](../Images/643f2228bf8c40880a8d2e0c9fa0cc74.png)

我得到了以下布局：

```
<merge xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    tools:context=".MainActivity" >

    <FrameLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center" >

        <LinearLayout
            android:layout_width="300dp"
            android:layout_height="200dp"
            android:layout_marginBottom="70dp"
            android:background="#000000" >

        </LinearLayout>
    </FrameLayout>

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="70dp"
        android:layout_gravity="bottom|center"
        android:background="#FF0000"
        android:orientation="horizontal" >

    </LinearLayout>

</merge> 
```

有人知道是什么原因造成的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T12:26:11.480

这应该有效：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:layout_width="fill_parent"
     android:layout_height="fill_parent"
     android:orientation="vertical" >

     <LinearLayout
         android:layout_width="fill_parent"
         android:layout_height="0dip"
         android:layout_weight="1" >

         <LinearLayout
             android:layout_width="300dp"
             android:layout_height="200dp"
             android:background="#000000" />
     </LinearLayout>

     <LinearLayout
         android:layout_width="fill_parent"
         android:layout_height="70dp"
         android:layout_gravity="bottom"
         android:background="#FF0000" />

</LinearLayout> 
```

# mysql - MySQl navicat :: 添加参数时出错

> ID：14090530
> 
> 赞同：1
> 
> 时间：2012-12-30T11:59:44.243
> 
> 标签：mysql, stored-procedures, parameters, navicat

```
 CREATE DEFINER = CURRENT_USER PROCEDURE `NewProc`(IN `pName` varchar)
BEGIN
    SELECT * from ss

END;; 
```

当我尝试使用navicat将此SP保存到MySql Db时，我在第1行遇到语法错误问题，当我删除参数时，SP被保存

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T06:42:47.810

**您必须在参数中指定pName**的长度。

试试这个：

```
DELIMITER $$

DROP PROCEDURE IF EXISTS `NewProc`$$

CREATE DEFINER = CURRENT_USER PROCEDURE `NewProc`(IN `pName` VARCHAR(100))
BEGIN
    SELECT * FROM ss;
END$$

DELIMITER ; 
```

# sql - Sybase：复制回具有不同ID的同一个表

> ID：14090532
> 
> 赞同：1
> 
> 时间：2012-12-30T12:00:03.567
> 
> 标签：sql, select, insert, sybase

我有一个表，我想将一些数据复制回同一个表，其中两列被更改：

例如：

```
TableMusic

titleid   musicid  tap_id            value

1234         1      3                 this is music
1324         1      3                 this is music test 
```

我希望将 titleid 和 value 写回到同一个 table 与 musicid=3

这里的索引列是titleid，musicid

我已完成以下脚本，但出现错误：尝试在具有唯一索引“pk_tablemusic”的对象“tablemusic”中插入重复的键行

```
insert into tablemusic (titleid, musicid, value )
  select titleid, 3, value
  from tablemusic
  where musicid=1 
```

我在这里做错了什么？有人可以想出一个干净的脚本来完成工作。

以下是我的数据库中一个 titleID 的摘录：

```
titleid   musicid    tap_id              value

462847        1        3               this is my music value 
462847        2        1    
462847        3        1    
462847        4        1 
```

这对于所有 titleid 都是一样的。现在我想做的是将值从musicid = 1复制到musicid = 3，并且有时将tap_id更改为3。我希望这足以清楚我想要实现的目标

最终结果想要达到：

titleid musicid tap_id 值

```
462847        1        3               
462847        2        1    
462847        3        3               this is my music value 
462847        4        1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T14:29:55.007

复杂性在于存在一些记录，因此尝试简单的插入会复制密钥并且您会收到错误。你在这里要做的就是把查询分成两个prts

1.  更新存在的 musicid = 3 行
2.  插入音乐 id=3 不存在的行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T07:43:04.453

这是基于上面马克回答的脚本，有一些更改。谢谢马克-你是我的英雄。

首先我运行了这个脚本：

从音乐 ID=3 的 tablemusic 中删除

在上述之后，我运行了以下脚本：

插入 tablemusic (titleid, musicid, tap_id, value) select titleid, 3, 3, value from tablemusic
where musicid=1

这给了我想要达到的结果，如上面的问题所示。

# php - 在php中读取文件中的偶数行和奇数行

> ID：14090536
> 
> 赞同：-3
> 
> 时间：2012-12-30T12:00:40.947
> 
> 标签：php

我想从文本文件 d.txt 中读取数据。然后创建 2 个新的文本文件，在单独的文件 e.txt 中写入偶数行，在另一个文件 o.txt 中写入奇数行。

```
 <?php
 $evenhandler = fopen("e.txt","w");        
 $oddhandler = fopen("o.txt","w");
 $handle = fopen('d.txt', 'r');
 while (!feof($handle))
   {
      $f=fgets($handle);
   fwrite($evenhandler,$f);
    }
  fclose($file); 

 ?> 
```

实际上我不明白如何实现它，根据我的代码，屏幕上没有显示任何输出。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T12:04:04.223

```
<?php
 $evenhandler = fopen("e.txt","w");        
 $oddhandler = fopen("o.txt","w");
 $handle = fopen('d.txt', 'r');
 $i=0;
 while (!feof($handle))
   {
      $f=fgets($handle);
      if($i%2==0)
      {
        fwrite($evenhandler,$f);
      }
      else
      {
        fwrite($oddhandler,$f);
      }
    $i++;
  }
  fclose($handle); 
  fclose($evenhandler); 
  fclose($oddhandler); 
?> 
```

**性能提示：**

您甚至可以进一步提高其性能（以防您的输入文件非常大）。您可以从**$i**的值为0 开始，然后在循环中检查它是否为 0，将其设置为 1，反之亦然。然后，**如果**您可以检查 i = 1 或 i =0 来做出决定。这样，您可以避免在每次传递中都使用模运算符并且仍然得到相同的结果

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T12:15:11.803

使用模数运算符`%`可以帮助您

```
 $outhandler[0] = fopen("e.txt","w");        
 $outhandler[1] = fopen("o.txt","w");
 $handle = fopen('d.txt', 'r');
 $linenum = 0;
 while (!feof($handle))
 {
    $f=fgets($handle);
    fwrite($outhandler[$linenum % 2],$f);
    $linenum++;
 }

fclose($handle);
fclose($outhandler[0]);
flcose($outhandler[1]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T12:09:50.460

嗨，这实际上很容易，你几乎已经做到了。您只需为偶数行和奇数行传递不同的 f.handler。

```
<?php
$evenhandler = fopen("e.txt","w");        
$oddhandler = fopen("o.txt","w");
$data = file('d.txt'); // this reads entire file and puts it into array, each line separate item
for($i=0;$i<count($data);$i++) {
  // Even shorter, if you put all this in only 1 line :)
  $fHandler = ($i%2==0)? $evenhandler:$oddhandler;
  fwrite($fHandler, $data[$i];
}
fclose($evenhandler); 
fclose($oddhandler);
?> 
```

# visual-studio-2010 - Azure 包缺少项目 dll

> ID：14090545
> 
> 赞同：3
> 
> 时间：2012-12-30T12:01:36.357
> 
> 标签：visual-studio-2010, azure

我的工人角色不会运行，并且会不断回收。我得到一个 filenotfoundexception，它指向我丢失程序集的方向。当然，在本地一切正常。

我已经浏览了工作者角色项目的参考资料，并确保在必要时本地复制是正确的。通过 RDP'ing 到 VM，我可以看到，当我部署我的工作角色时，我的解决方案的几个项目 dll（如我的实体和数据 dll）丢失并且不在包中。我不明白他们为什么会失踪。它们是为 .Net 4、“任何 cpu”编译的，并且本地复制是真的。我错过了什么？

谢谢马特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-14T14:37:18.670

如果您的角色相互引用，就会发生这种情况。例如，我在 azure 项目中有一个工作角色和一个 Web 角色。webrole 引用了 worker 角色。一旦我移动了参考，包装就可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T14:05:24.327

我没有深入了解这一点，但我所做的解决了它是创建另一个工人角色。我也确实注意到我没有包含 app.config 并始终正确设置副本，这是一个不同的问题，但值得注意的是其他人发现这一点。

# c# - RouteValues 与 QueryString MVC？

> ID：14090546
> 
> 赞同：7
> 
> 时间：2012-12-30T12:01:45.380
> 
> 标签：c#, asp.net-mvc, routes

`QueryString`in`Request`和 和有什么不一样`RouteData.Values`？
我们可以改用它们吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-30T16:44:02.827

RouteValues 仅在 global.asax 中定义时才从查询字符串中收集，例如：

```
routes.MapRoute(
 "Example", // Route name
 "{controller}/{action}/{id}/{inRouteValues}", // URL with parameters
 new { controller = "Home", action = "Index" } // Parameter defaults
 ); 
```

将捕获 inRouteValues，`yourdomain/testController/testAction/14/myTestValue` 其中`RouteData.Values["inRouteValues"]`将是值为“myTestValue”的字符串。
但是，如果您将构建 URL 就像`yourdomain/testController/testAction/14?inRouteValues=myTestValue`它不会得到它。所以不同之处在于，它`RouteData.Values`只会从与`RouteCollection`global.asax匹配的 URL 中获取值，并且`QueryString`如果它与变量名匹配，则会从查询字符串中捕获每个值。

# spring - Spring注解事务管理

> ID：14090547
> 
> 赞同：0
> 
> 时间：2012-12-30T12:02:06.660
> 
> 标签：spring, hibernate, transactions, annotations

我有一个 Spring & Hibernate Web 应用程序，我将在其中连接到两个数据库。

在`web.xml`我已经配置了应用程序上下文文件的路径如下

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
            classpath:config/*.xml
    </param-value>
</context-param> 
```

我在 config 目录下有三个文件

*   1-主要的hibernateContext.xml
*   2-二级hibernateContext.xml
*   3-根上下文.xml

在第一个文件中，我配置了主数据源、会话工厂和事务管理器（primary_manager）

我在第二个文件中做了同样的事情

在第三个文件中，我配置了组件扫描和事务注释配置如下

```
<tx:annotation-driven/>
<!-- Enable Spring annotation configuration -->
<context:annotation-config />
<!-- Scan the application for all possible Services & autowire -->
<context:component-scan base-package="net.mr2.*.service" />
<context:component-scan base-package="net.mr2.*.dao" /> 
```

我有一个 servlet 上下文 xml 文件，我在其中配置了调度程序 servlet，如下所示

```
<annotation-driven />
<context:component-scan base-package="net.mr2.*.web" use-default-filters="false">
    <context:include-filter type="annotation" expression="org.springframework.stereotype.Controller"/>
</context:component-scan> 
```

服务类带有注释`@service`& `@Transactional(value="secondary_transactionManager", readOnly=true, rollbackFor=Exception.class)`。

我有一个自动连接服务的控制器。

我从控制器调用服务类中的三个方法（`save1()`、`save2()`、`save3()`）。我在第三种方法中抛出异常，我假设第三种方法应该回滚，但这不会发生。

我打开了mysql的日志，检查了三个保存语句，发现语句没有在事务中执行。我意识到，因为我没有`SET AUTOCOMMIT`在插入语句之前和之后找到语句。

所以，我假设事务没有配置好。

我的设置会出现什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T18:39:31.587

您配置了应用程序，以便它为每次调用服务（即事务类）打开一个新事务。您需要在控制器中启动事务或将调用包装在服务级别的另一个方法中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T11:34:45.820

我意识到我用错误的事务管理器注释了服务，这导致了以前的奇怪行为

服务（我正在使用）被注释

@transactional(value='transaction_manger_1')

此事务管理器配置为与 read_only DB 一起使用，而注入的 DAO 正在使用与读/写 DB 一起使用的正确会话工厂。

因此，我已将事务管理器更改为正确的，并且一切正常。

# iphone - 是否有用于 1D 矢量重采样的 vDSP 功能？

> ID：14090549
> 
> 赞同：0
> 
> 时间：2012-12-30T12:02:08.420
> 
> 标签：iphone, objective-c, macos, fft, accelerate-framework

我希望能够使用矢量作为包络，将 fft 均衡应用于相当大的声音块，具有不同的大小。

为了能够将频域 bin 乘以包络，包络需要具有与 fft 数据相同的分辨率，这将随着声音块的大小而变化。

所以，我需要一个函数来重新采样我的包络向量。您知道 vDSP 是否为此目的提供功能吗？我来回浏览了参考资料，但一无所获。这并不意味着那里什么都没有 - 在搜索 vDSP 参考时很容易错过一些东西......

并不是我自己无法实现某些东西，但如果有一个 vDSP 功能，它可能会比我想出的任何东西都要快得多。这是相关的，因为该项目也针对 iOS 设备。

而且没有必要重新发明轮子:)

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T12:30:20.813

如果我理解正确，您有一个一维包络值数组，您希望将其与一维频率仓数组相乘。您要解决的问题是将包络数组缩放到与 FFT 数组相同的长度。首先了解如何生成信封数组会很有帮助，您不能简单地以正确的长度生成它吗？如果是这样，问题解决了:)

如果没有，那么如何使用`vDSP_vtabi`从您当前拥有的值的查找表中生成包络向量？您可以使用 生成查找表输入向量`vDSP_vramp`A。

不过，这对我来说似乎相当复杂和昂贵，需要大量的缓冲区分配/重新分配。计算应该将多少 FFT 样本乘以每个包络值可能会更简单，然后循环使用每个包络样本`vDSP_vsmul`将 FFT 向量的块乘以包络值。

哪种解决方案的性能更好实际上很大程度上取决于每个向量的相对大小。了解 FFT 向量为什么大小不同以及如何首先生成包络数组以给出更准确的答案也会很有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T18:26:53.910

我建议通过不同的方式。

因为您的输入信号以固定采样率来自硬件，并且您确切知道包络值的数量，所以只需使用以下方法进行采样率转换

AudioConverterFillComplexBuffer

它速度很快，并且在重新采样时会考虑过滤和插值。

# java - 嵌入webview时android phonegap意外退出应用程序

> ID：14090552
> 
> 赞同：1
> 
> 时间：2012-12-30T12:02:37.560
> 
> 标签：java, android, cordova

我正在尝试在我的应用程序中嵌入 CordovaWebview。单独运行已经在工作，但是当尝试嵌入它时，webview 会加载 index.html 一秒钟，然后应用程序退出！

xml,

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >  
        <org.apache.cordova.CordovaWebView 
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" 
        android:id = "@+id/cordovaWebview"/>

</LinearLayout> 
```

java类，

```
public class AndroidPGBase extends Activity implements CordovaInterface
{

    CordovaWebView cordovaWebview;

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.main);

        cordovaWebview = (CordovaWebView) findViewById(R.id.cordovaWebview);

        cordovaWebview.loadUrl("file:///android_asset/www/index.html");
    } 
```

//这里所有需要的方法都实现了，并且在getActivity上也返回了“this”。

日志猫，

```
12-30 12:58:03.235: I/BootReceiver(1763): Copying /data/tombstones/tombstone_09 to DropBox (SYSTEM_TOMBSTONE)
12-30 12:58:03.265: I/WindowManager(1763): WIN DEATH: Window{409b5b80 com.myurl.androidpgbase/com.myurl.androidpgbase.AndroidPGBase paused=false}
12-30 12:58:03.265: I/ActivityManager(1763): Process com.myurl.androidpgbase (pid 28441) has died.
12-30 12:58:03.285: D/Zygote(1480): Process 28441 terminated by signal (11)
12-30 12:58:03.346: I/SemcMusicPlayer(15196): Client binding to ProxyService with intent action: com.sonyericsson.music.SERVICE. Returning binder.
12-30 12:58:03.346: E/CMarlinMediator(1481): [1079724664] ERROR : const sony::drm::CTime sony::drm::CMarlinMediator::getTrustedTime() calling tt_GetTrustedTime. return code 588120065 
12-30 12:58:03.376: W/InputManagerService(1763): Got RemoteException sending setActive(false) notification to pid 28441 uid 10179
12-30 12:58:03.406: I/Mali-EGL(1927): Mali libraries compiled on Mar  6 2012, at 14:14:25
12-30 12:58:03.406: W/ActivityManager(1763): Unable to start service Intent { act=com.sonyericsson.airtouch.service.ACTION_ENABLE (has extras) }: not found
12-30 12:58:03.416: W/kernel(1487): [33873.732696] Mali<2>: MMU session begin
12-30 12:58:03.416: W/kernel(1487): [33873.732757] Mali<2>: Page directory for session 0xcf931700 placed at physical address 0x08FC9000
12-30 12:58:03.416: W/kernel(1487): [33873.732818] Mali<2>: MMU session begin: success
12-30 12:58:03.416: W/kernel(1487): [33873.732818] Mali<2>: Core: session_begin: for Mali-400 PP
12-30 12:58:03.416: W/kernel(1487): [33873.732849] Mali<2>: Core: session_begin: for Mali-400 GP
12-30 12:58:03.606: D/CustomizationProvider(1903): openFile -- START uri=content://com.sonyericsson.provider.customization/settings/com.sonyericsson.textinput.uxp
12-30 12:58:03.616: I/CrashMonitor(25656): CrashMonitorService: invokeService: android.intent.action.DROPBOX_ENTRY_ADDED
12-30 12:58:03.676: D/dalvikvm(15196): GC_EXPLICIT freed 245K, 47% free 3116K/5831K, external 1759K/2129K, paused 99ms
12-30 12:58:03.776: E/CMarlinMediator(1481): [1079454424] ERROR : const sony::drm::CTime sony::drm::CMarlinMediator::getTrustedTime() calling tt_GetTrustedTime. return code 588120065 
12-30 12:58:03.786: E/CMarlinMediator(1481): [61] ERROR : const sony::drm::CTime sony::drm::CMarlinMediator::getTrustedTime() calling tt_GetTrustedTime. return code 588120065 
12-30 12:58:03.796: I/SemcMusicPlayer(15196): Received a CallState event. State: 0
: E/(): Device disconnected 
```

# ubuntu - Foreman start 在 ubuntu 10.04 中抛出 .profile not found 错误

> ID：14090554
> 
> 赞同：0
> 
> 时间：2012-12-30T12:03:12.300
> 
> 标签：ubuntu, foreman, .profile

我正在尝试将工头用于heroku。这是我的设置中存在的内容：

1.  使用 Ubuntu 10.04 机器安装工头
2.  安装的 Ruby 版本是：1.9.3-p362
3.  安装的 Rubygems 版本为：1.8.24
4.  我可以触发一个工作正常的示例 test.rb 文件。下面的代码：

    ```
    root@ubuntu-test:~# cat test.rb

    #/usr/local/rvm/rubies/ruby-1.9.3-p362/bin/ruby
    require 'rubygems'
    puts "Hello world!" 
    ```

5.  使用代码创建了一个 Gemfile：

    ```
    source :rubygems
    gem 'sinatra', '1.1.0'
    gem 'thin' 
    ```

6.  使用代码创建了一个 Procfile： web: bundle exec ruby​​ test.rb -p $PORT

7.  发布工头开始 - 失败如下：

    ```
    06:37:09 web.1  | started with pid 3638
    06:37:09 web.1  | .: 39: .profile: not found
    06:37:09 web.1  | exited with code 2
    06:37:09 system | sending SIGTERM to all processes
    SIGTERM received 
    ```

我还安装了特定版本的工头（0.60.2），它在启动时显示与上述相同的错误。

.profile 文件位于我机器的以下位置：

```
 /home/user/.profile
    /etc/skel/.profile
    /root/.profile 
```

其中包含： # ~/.profile：由兼容 Bourne 的登录 shell 执行。

```
if [ "$BASH" ]; then
  if [ -f ~/.bashrc ]; then
    . ~/.bashrc
  fi
fi

mesg n 
```

这可能是因为路径设置错误吗？是什么阻止工头启动？

*   拉梅什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T02:38:12.283

我遇到了类似的错误，但细节略多：

```
21:16:46 bridge.1 | /var/lib/gems/1.9.1/gems/foreman-0.61.0/bin/foreman-runner: 37: .: .profile: not found 
```

因此，我查看了 foreman-runner ，看起来它正在尝试从当前目录加载 .profile 文件。虽然我正在从我有一个 .profile 的目录运行工头，但它仍然没有找到它。

似乎使用 -p 参数调用了 foreman-runner。然后它会测试 .profile 文件是否存在，然后才会尝试获取它。因此它会检查文件但无法获取它。实际做源代码的行如下：

```
. .profile 
```

该文件开始 #!/bin/sh 所以我运行 /bin/sh 并尝试了 . .profile 从命令行，果然它抱怨 .profile 没有找到，是吧？！其实它说的是：

```
/bin/sh: 4: .: .profile: not found 
```

那个4在那里做什么？也许它只是不喜欢我的 .profile 中的某些内容。

**所以我将我的 .profile 移到 profile.bak 和 viola，工头现在运行。**

# iphone - 设置 ALAsset 名称

> ID：14090555
> 
> 赞同：1
> 
> 时间：2012-12-30T12:03:20.587
> 
> 标签：iphone, objective-c, ios, xcode, avfoundation

*   根据 AVCam 示例，在浏览相册时，资产的名称是 IMG_* 符号，我想将资产的名称更改为有意义的名称，是否可以将资产的名称设置为任何名称除了 'IMG_*' 吗？如何 ？

*   有没有办法用 ALAsset 对象保存自由文本元数据？

    任何帮助将不胜感激。

# python-3.x - 如何使输入只接受数字

> ID：14090557
> 
> 赞同：0
> 
> 时间：2012-12-30T12:03:28.863
> 
> 标签：python-3.x

我无法在互联网上找到解决这个问题的方法（也许我不够努力），但我不知道如何让输入只接受数字。我试图让输入通过一些方程式，并且每次我在输入中输入一个字母时程序都会停止。我想知道是否有办法检测输入是字母还是数字。我会展示我的程序。

```
 Radius=input("What is the radius of the circle/sphere?")

    Areacircle=(int(Radius)**2)*3.14159265359
    Perimetercircle=2*3.14159265359*int(Radius)
    Permsphere=4*3.14159265359*(int(Radius)**2)
    Areasphere=(4/3)*3.14159265359*(int(Radius)**3)

    print("The radius' length was:",Radius)
    print("The surface area of each circle is:",Areacircle)
    print("The perimeter of the circle is:",Perimetercircle)
    print("The volume of the sphere would be:",Areasphere)
    print("The perimeter of the Sphere would be:",Permsphere) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T12:20:29.453

As suggested in the comments, you can [***handle***](http://docs.python.org/3/tutorial/errors.html#handling-exceptions) a [**`ValueError`**](http://docs.python.org/3/library/exceptions.html#ValueError) when the [conversion to `int`](http://docs.python.org/3/library/functions.html#int) fails (and save doing this same conversion throughout the rest of your code).

```
Radius = None
while not Radius:
    unchecked_radius = input("What is the radius of the circle/sphere? ")
    try:
        Radius = int(unchecked_radius)
    except ValueError:
        print('"{}" is not an integer. Redo.'.format(unchecked_radius)) 
```

I recommend reading the [Python Tutorial](http://docs.python.org/3/tutorial/) section on [Handling Exceptions](http://docs.python.org/3/tutorial/errors.html#handling-exceptions), which has a very similar example.

# big-o - 递归关系 - 它是多少？

> ID：14090565
> 
> 赞同：0
> 
> 时间：2012-12-30T12:04:53.593
> 
> 标签：big-o, recurrence

我需要解决：T(n) = T(n-1) + O(1)

当我找到一般的 T(n) = T(nk) + k O(1) 它是什么总和？我的意思是当我达到基本情况时： nk=1; k=n-1 是“sum k, k=1 to n”吗？但是这个总和的结果是 n(n-1)/2，我知道结果是 O(n)。所以我知道我不需要这个关系的总和，但是对于这个递归关系，什么总和是正确的？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T17:26:57.567

如果我们做出（合理的）假设 T(0) = 0（或 T(1) = O(1)），那么我们可以应用您的
T(n) = T(n - k) + k⋅O(1 ) 到 k = n 并获得

T(n) = T(n - n) + n⋅O(1) = 0 + n⋅O(1) = O(n)。

编辑：如果您坚持将重复表示为总和，则为：

T(n) = T(n - 1) + O(1) = T(n - 2) + O(1) + O(1) = ... = Σ [k = 1,...n] O(1 ) = n⋅O(1) = O(n)

# tfsbuild - 在使用 TFS 的持续部署中不包括某些文件夹（跳过命令？）

> ID：14090567
> 
> 赞同：0
> 
> 时间：2012-12-30T12:05:14.590
> 
> 标签：tfsbuild, webdeploy, continuous-deployment

使用带有 Web Depoly 的 Team Foundation Server 持续部署，是否可以停止部署某些文件夹？如果是，如何？

**更新** 您不能通过命令行（如 MSBuild 参数）指定跳过规则，[因为它们被声明为项目，而不是属性。](https://stackoverflow.com/questions/12982061/msbuild-command-line-parameter-for-skipping-the-directory)

可以在发布配置文件中指定[跳过命令。](http://technet.microsoft.com/en-us/library/dd569089%28WS.10%29.aspx)但是，似乎[发布配置文件仅适用于 Visual Studio 中的内置发布](https://stackoverflow.com/questions/4890289/how-do-i-configure-msbuild-to-use-a-saved-publishprofile-for-webdeploy)，而不是 Web Deploy 3。

Web Deploy 有没有办法接受发布配置文件，如果有，是否应该将其检入 TFS？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T22:38:21.883

听起来您将*MSDeploy*命令行与通过命令行执行*MSBuild*混淆了。

如果您正在执行 msdeploy.exe 或生成的*deploy.cmd*文件，MSBuild 甚至不会进入其中，您可以自由使用[MSDeploy Skip 命令](http://technet.microsoft.com/en-us/library/dd569089%28WS.10%29.aspx)（您可以将其他命令行参数附加到*cmd*调用，它们将被传递到 msdeploy.exe)。

如果您使用 MSBuild + "DeployOnBuild" 或 MSBuild + 发布配置文件，您需要将您的跳过要求声明为`MsDeploySkipRules`项目。如果您在此之前单独构建您的包并想要部署它，[您将遇到一些障碍](https://stackoverflow.com/questions/11683243/deploying-an-existing-package-using-publish-profiles)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-19T19:54:00.517

我也遇到了同样的问题，但是发现您可以使用不需要配置文件的开关。话虽如此，个人资料还有其他好处。这是我使用的有效论点

/p:SkipExtraFilesOnServer=true

# wcf - SilverLight 连接到 Windows 服务中托管的 NetTcp WCF

> ID：14090573
> 
> 赞同：0
> 
> 时间：2012-12-30T12:06:46.170
> 
> 标签：wcf, silverlight, windows-services, nettcpbinding, clientaccesspolicy.xml

我有一个托管在 Windows 服务中的 WCF 服务

它使用 NetTCPBinding 并且我可以连接，我想实现新的 Silverlight 客户端来访问该服务

我已经完成了添加服务引用的常规方法，并且添加了 Empty "ServiceReferences.ClientConfig"

所以我查看了一些线程和主题，最后我为服务手动编写了我的配置

当我尝试连接它时显示此异常无法连接到 net.tcp://localhost:4502/MyService/Service。连接尝试持续了 00:00:02.2111265 的时间跨度。TCP 错误代码 10013：尝试以访问权限禁止的方式访问套接字。这可能是由于尝试以跨域方式访问服务，而该服务未配置为跨域访问. 您可能需要联系服务的所有者以通过 HTTP 公开套接字跨域策略，并将服务托管在允许的套接字端口范围 4502-4534 中。

我相信与 ClientAccessPolicy.xml 文件有关的问题

搜索后人们说我需要安装 IIS7 并且可以通过它访问文件，我已经尝试过了，但我无法让它工作

但是，我以前做过这方面的工作，但是我使用 PollinghttpBinding 没有 NetTCP，并且我创建了另一个服务合同来返回 ClientAccessPolicy 文件

我曾尝试用 PollinghttpBinding 做同样的事情，但我无法编写正确的服务配置

我的客户拒绝使用 IIS，所以我可以使用这种方式吗？我应该使用该服务的正确配置是什么？

这是我用于我的服务的配置

```
<service behaviorConfiguration="serviceBehavior" name="MyService">
              <endpoint address="net.tcp://localhost:4502/MyService/Service"       behaviorConfiguration="endpointBehavior" binding="netTcpBinding"         bindingConfiguration="netTcpServiceBinding" contract="IMyService">
                  <identity>
                      <dns value="localhost"/>
                  </identity>
              </endpoint>
              <endpoint address="net.tcp://localhost:7000/MyService/mex"     binding="mexTcpBinding" contract="IMetadataExchange"/>
          </service> 
```

任何人都可以提供帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T19:59:49.500

Silverlight 中不支持“开箱即用”的 Net.tcp 绑定。这就是配置为空的原因。但无论如何，您都可以使用它，方法是使用 customBinding 并设置您需要的属性。但是，我自己从未尝试过。

如果这是一个跨域问题，则需要与 ClientAccessPolicy.xml 文件相关。通常（如各种论坛上的许多地方所述），这可以通过将文件放在站点的根目录中来解决。因此，如果您的服务在“http://localhost/MyService”上运行，则应放置该文件，以便在“http://lovalhost”中可用。

但是，如果没有可用的 IIS，则必须以另一种方式完成。您必须在该文件可用的 Windows 服务中手动在根上创建一个端点。这是一个普通的 BasicHttp 绑定，您可以使用“net.tcp”或“http”。

我以这种方式成功地做到了这一点：

**政策界面：**

```
using System;
using System.IO;
using System.ServiceModel;
using System.ServiceModel.Web;

namespace MyPolicyService
{
    [ServiceContract]
    public interface IPolicyRetriever
    {
        [OperationContract]
        Stream GetPolicy();
    }
} 
```

**策略类：**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;
using System.ServiceModel.Web;

namespace MyPolicyService
{
    public class PolicyRetrieverBase : IPolicyRetriever
    {
        public Stream StringToStream(String result)
        {
            WebOperationContext.Current.OutgoingResponse.ContentType = "application/xml";
            return new MemoryStream(Encoding.UTF8.GetBytes(result));
        }

        public Stream GetSilverlightPolicy()
        {
            string result = @"<?xml version=""1.0"" encoding=""utf-8""?>
<access-policy>
    <cross-domain-access>
        <policy>
            <allow-from http-request-headers=""*"" http-methods=""*"">
                <domain uri=""*""/>
            </allow-from>
            <grant-to>
                <resource path=""/"" include-subpaths=""true""/>
            </grant-to>
        </policy>
    </cross-domain-access>
</access-policy>";

            return StringToStream(result);
        }

        public Stream GetFlashPolicy()
        {
            string result = @"<?xml version=""1.0"" encoding=""utf-8""?>
<!DOCTYPE cross-domain-policy SYSTEM ""http://www.macromedia.com/xml/dtds/cross-domain-policy.dtd"">
<cross-domain-policy>
    <site-control permitted-cross-domain-policies=""all""/>
    <allow-access-from domain=""*"" secure=""false"" />
    <allow-http-request-headers-from domain=""*"" headers=""*"" secure=""false"" />
</cross-domain-policy>";

            return StringToStream(result);
        }
    }
} 
```

创建这些类时，几乎就像启动“net.tcp”服务一样创建服务，但当然将其更改为 BasicHttpBinding 并使用与 BasicHttpBinding 相关的一些不同行为和属性值（如 TransferMode = Buffered 等）。

不用说，该策略服务应该在站点根目录 (http://localhost) 上启动。如果您有在此服务器上运行的 IIS，请不要启动此策略服务，因为这将接管此地址 :-)

希望这能让你朝着正确的方向前进:-)

# c# - 如果在析构函数中我创建了一个对对象的活动引用怎么办？

> ID：14090579
> 
> 赞同：9
> 
> 时间：2012-12-30T12:07:36.310
> 
> 标签：c#, .net

情况：

1.  对象符合 GC 条件
2.  GC 开始收集
3.  GC 调用析构函数
4.  例如，在析构函数 I 中，将当前对象添加到静态集合中

在收集对象的过程中变得不符合 GC 的条件，并且将来会符合条件，但在规范中说 Finalize 只能被调用一次。

问题：

1.  对象会被销毁吗？
2.  会在下一次 GC 上调用 finalize 吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-30T12:10:31.490

该对象*不会*被垃圾回收 - 但下次它有资格进行垃圾回收时，终结器*将不会*再次运行，除非您调用[`GC.ReRegisterForFinalize`](http://msdn.microsoft.com/en-US/library/system.gc.reregisterforfinalize.aspx).

示例代码：

```
using System;

class Test
{
    static Test test;

    private int count = 0;

    ~Test()
    {
        count++;
        Console.WriteLine("Finalizer count: {0}", count);
        if (count == 1)
        {
            GC.ReRegisterForFinalize(this);
        }
        test = this;
    }

    static void Main()
    {
        new Test();
        Console.WriteLine("First collection...");
        GC.Collect();
        GC.WaitForPendingFinalizers();

        Console.WriteLine("Second collection (nothing to collect)");
        GC.Collect();
        GC.WaitForPendingFinalizers();

        Test.test = null;
        Console.WriteLine("Third collection (cleared static variable)");
        GC.Collect();
        GC.WaitForPendingFinalizers();

        Test.test = null;
        Console.WriteLine("Fourth collection (no more finalization...)");
        GC.Collect();
        GC.WaitForPendingFinalizers();
    }
} 
```

输出：

```
First collection...
Finalizer count: 1
Second collection (nothing to collect)
Third collection (cleared static variable)
Finalizer count: 2
Fourth collection (no more finalization...) 
```

# bash - 在 bash - 如何获取行中的最后一个元素

> ID：14090580
> 
> 赞同：1
> 
> 时间：2012-12-30T12:07:36.940
> 
> 标签：bash, while-loop

输入：1 -> 2

```
while read -a line; do

  if (( line[2] < 1 )); then
    echo "Graph does not match known sites3"
    exit
  fi

done < "$2" 
```

错误

```
syntax error: invalid arithmetic operator (error token is "") 
```

由于某种原因 line[2] 不被视为数字 2 ......我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T12:12:47.207

要获取最后一个数组元素：

```
$ x=( a z e r t y)
$ echo ${x[-1]}
y 
```

# c++ - 具有类成员和 constexpr 链接时优化的 C++11 枚举

> ID：14090583
> 
> 赞同：5
> 
> 时间：2012-12-30T12:08:04.750
> 
> 标签：c++, constexpr, enum-class, lto

在我的项目中，我有很多枚举需要具有与枚举成员关联的附加属性以及与枚举类型关联的辅助静态方法。

据我所知，标准枚举类 MyItem {...} 是不可能的，因此对于我项目中的每个枚举类，我都有一个辅助类 MyItemEnum，它封装了这些辅助静态方法并实例化了本身，这样我就可以访问他们的方法以获得额外的属性。

下面举个例子（尽可能简化，但我相信要讨论的所有功能都保留在那里）。

我的项目.h

```
enum class MyItem : unsigned int {
    Item1   = 1,
    Item2   = 5
};

class MyItemEnum {
private:
    MyItem myItem;
    size_t extInfo;

    MyItemEnum(const MyItem& myItem, size_t extInfo);
    ~MyItemEnum();
public:
    static MyItemEnum Item1;
    static MyItemEnum Item2;
    static const MyItemEnum &get(MyItem myItem);

    operator MyItem() const;
    size_t getExt() const;
    bool hasNext() const;
    MyItem next() const;
}; 
```

我认为含义很明显，我不需要在此处提供 .cpp 部分...当我需要访问扩展功能时，我使用 MyItem 作为要在接口和 MyItemEnum 中传递的参数。

**我的第一个问题是，上面的方法可以吗，还是我应该考虑完全不同的东西？**

我的第二个问题涉及我尝试使用 constexpr 对这个枚举进行优化：

```
enum class MyItem : unsigned int {
    Item1   = 1,
    Item2   = 5
};

class MyItemEnum {
private:
    MyItem myItem;
    size_t extInfo;

    constexpr MyItemEnum(const MyItem& myItem, size_t extInfo);
public:
    static MyItemEnum Item1;
    static MyItemEnum Item2;
    static constexpr MyItemEnum &get(MyItem myItem);

    constexpr operator MyItem();
    constexpr size_t getExt();
    constexpr bool hasNext();
    constexpr MyItem next();
}; 
```

它可以编译，但显然 constexpr 没有机会被使用，因为如果我访问：

```
MyItemEnum::Item1.getExt() 
```

所以编译器不知道 Item1 用什么值来实例化。 **在链接时间优化期间，上面的表达式是否有可能被评估为 constexpr？** 或者我可以使用

```
static constexpr MyItemEnum Item1 = MyItemEnum(MyItem::Item1, 123); 
```

这将激活 constexpr 编译时优化，但我担心在某些情况下，**当 constexpr 无法在编译时评估时，编译器将不得不创建 MyItemEnum 的本地实例**（而不是使用对单个全局的引用静态实例）并且我担心这可能会导致性能损失（我的真实枚举具有比单个成员更多的属性，因此本地实例化可能需要一些时间？）。**这是一个合理的担忧吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T16:18:11.480

我还没有直接使用 of`constexpr`和由此产生的编译器优化的经验，但我可以告诉你，只需`const`在类本身的成员或实例上使用 VS2012 和 g++ 4.7 编译器即可进行跨模块优化：

```
class MyItemEnum {
private:
    // make sure to put const here...
    const MyItem myItem;
    const size_t extInfo;

    MyItemEnum(const MyItem& myItem, size_t extInfo);
    ~MyItemEnum();
public:
    // and put const in here too...
    static const MyItemEnum Item1;
    static const MyItemEnum Item2;
}; 
```

需要注意的是，构造函数*必须*使用 C++ 风格的初始化列表语法，如果你只是用常量值填充它们，这应该不是问题。（初始化列表只有在需要非平凡设置时才会变得痛苦）。

我没有在 Clang/LLVM 上验证这一点，所以如果那是你的工具链，那么我强烈建议你采用这个简化的例子并自己取消结果。即使您不熟悉汇编语言，对简单测试用例的反汇编也很容易解析。在这种情况下，您可以编译两个版本：一组在一个模块中，一个分为两个模块 - 并比较结果以确保 LTO 正在完成您需要的工作。

# c++ - vec3的移位尺寸

> ID：14090584
> 
> 赞同：1
> 
> 时间：2012-12-30T12:08:08.283
> 
> 标签：c++, performance, glm-math, simplify

## 问题

我想将三维向量的维度 x、y 和 z 移动`vec3`一个数字 n。

```
vec3 shift(int n, vec3 vector); 
```

如何改进我的算法以获得最佳性能并简化逻辑？我想这个任务有一个通用的方法，是吗？

## 算法

```
vec3 shift(int Dimension, vec3 Vector)
{
    float in[3] = { Vector.x, Vector.y, Vector.z };
    float out[3];
    for(int i = 0; i < 3; ++i)
    {
        int n = i + Dimension;
        while(n > Dimension - 1) n -= Dimension;
        out[i] = in[n];
    }
    return vec3(out[0], out[1], out[2]);
} 
```

## 例子

比如`shift(2, vec3(12, 42, 30))`应该给我`vec3(42, 30, 12)`。

*   维度 0 是 x 并保存值 12。它移动 2 到维度 2，即 z。所以 z 为 12。
*   维度 1 是 y 并保持 42。移动 2 会导致维度 4 不存在，因此我们将其环绕，它的值变成维度 0 的值，即 x。
*   维度 2 是 z，也环绕边缘，其值落在 y 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T12:28:46.073

在您的情况下，您可以移动 2 次，第三次将是原来的。因此，我建议不要为 2 个不同的班次创建一个通用函数，而是从中创建两个更简单的函数。

```
vec3 shiftOnce(vec3 Vector)
{
    return vec3(Vector.z, Vector.x, Vector.y);
}

vec3 shiftTwice(vec3 Vector)
{
    return vec3(Vector.y, Vector.z, Vector.x);
} 
```

这将更快，更容易阅读。我不是代码重复的朋友，但在这样的小情况下，它只是首选的解决方案。

如果需要维度参数：

```
vec3 shift(int dimension, vec3 v)
{
    if(dimension % 3 == 1)      return vec3(v.z, v.x, v.y); // shift once 
    else if(dimension % 3 == 2) return vec3(v.y, v.z, v.x); // shift twice
    else                        return v;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T12:58:21.193

您可以进一步优化算法：

```
// copy a reference of your vector, is better than copy all it´s components.
   vec3 shift (int dimension, const vec3& Vector)
   {
       float in [3] = { Vector.x , Vector.y , Vector.z };
       float out [3];

       for (int i = 0; i < 3; i++)
              out [ (i + dimension) % 3 ] = in [i];
       return vec3 (out [0], out [1], out [2])
   } 
```

为了移动向量分量，一种方法是获取索引加维度值之和与
向量维度之间的除模，即三。

例如。在你的情况下。输入向量（in）：12、42、30

尺寸：2

输出向量（out）

```
 out [(0 + 2) % 3] = in [0] => out [2%3] = in [0] => out [2] = in [0]
         z holds the value of the x component.

         out [(1 + 2) % 3] = in [1] => out [3%3] = in [1] => out [0] = in [1]
         x holds the value of the y component

         out [(2 + 2) % 3] = in [2] => out [4%3] = in [2] => out [1] = in [2]
         y holds the value of z component. 
```

所以，输出向量必须是： in [1] ， in [2] ， in [0] = vec3 (42,30,12)

# android - OpenCV 安卓 ICS

> ID：14090585
> 
> 赞同：-2
> 
> 时间：2012-12-30T12:08:10.570
> 
> 标签：android, opencv, android-ndk, android-camera

我扩展了一个 OpenCV4Android 示例（基于 2.4.3.1 中的 JavaCameraView）以在我的应用程序中进行一些视觉处理。该处理适用于 2.3.3 及更高版本，但任何 4.x 手机除外。我已经研究了这个问题，似乎问题在于使用了以下行：

```
mCamera.setPreviewDisplay(null); 
```

显然 ICS 不喜欢被交给一个空的surfaceView。在 4.x 上的结果是屏幕看起来是黑色的，并且没有传递给 onPreviewFrame() 的帧。

我真的很感激这方面的任何帮助！

完整的代码可以在[这里](http://fossies.org/dox/OpenCV-2.4.3/android_09JavaCameraView_8java_source.html)找到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T15:55:44.690

答案是我使用的是 2.4.3.1，正如我所说，它在 ICS 上不起作用。我没有意识到它已在 2.4.3.2 中修复，这只是将问题中提到的行更改为：

```
 if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
      mSurfaceTexture = new SurfaceTexture(MAGIC_TEXTURE_ID);
      getHolder().setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
      mCamera.setPreviewTexture(mSurfaceTexture);
  } else
      mCamera.setPreviewDisplay(null); 
```

目标需要更改为 3.0 才能使用 SurfaceTexture。

[您可以在Google Groups](https://groups.google.com/forum/#!msg/android-opencv/KVqUzyF8e3A/d4F5kZFQzacJ)中找到有关此问题的更多讨论。

# c++ - C++ 的新操作符是可重入的（或异步安全的）吗？

> ID：14090589
> 
> 赞同：10
> 
> 时间：2012-12-30T12:08:45.060
> 
> 标签：c++, reentrancy

背景是我的[这个问题](https://stackoverflow.com/questions/14090368)。简而言之，我*必须* `fork`在一个多线程 C++ 程序中，所以我想弄清楚当仅限于可重入函数时我能做多少，其中最重要的事情之一是动态内存。

因此，已知`malloc`是[不可重入的](https://stackoverflow.com/questions/3941271)。但是 C++ 的`new`呢？我用谷歌搜索了相关结果并不多（主要是由于难以找到正确的“新”），但至少有一个声明[`new` **是**reentrant](https://stackoverflow.com/questions/4613077#4613231)。还有一个关于整个 C++ 标准库的[相关问题没有令人满意的答案。](https://stackoverflow.com/questions/4036520)

编辑：我想标准没有说明这一点，所以我最关心的是主要实现。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T12:19:18.737

我查看了`gcc` [libsupc++](https://github.com/mirrors/gcc/tree/master/libstdc++-v3/libsupc++)和`clang` [libc++](http://llvm.org/svn/llvm-project/libcxx/trunk/src/)源代码，用于替换符合标准的 C++ new/delete 运算符 - 以支持平台上的原生 SIMD 对齐要求，而`malloc`.

它们基本上是一些 EH 逻辑等的包装器`malloc`。`free`我不是语言律师，但除非两者都错了，否则我认为可以安全地得出结论：不，它们不是可重入的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-30T12:29:41.587

标准**允许** `new`只是一个包装器`malloc`，所以如果`malloc`不能重入，那么可以`new`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-30T12:19:09.253

线程安全和重入并不*完全相同*。

AFAIK，C++ ISO 标准不保证`new`和`delete`运算符的线程安全。但是`g++`实现确实提供了线程安全（这是它速度慢的原因之一）。

# ruby-on-rails - has_and_belongs_to_many 为什么我想要其他模型的 attr_accessible？

> ID：14090599
> 
> 赞同：0
> 
> 时间：2012-12-30T12:11:02.690
> 
> 标签：ruby-on-rails, associations

如果我有两个模型：经验和类别，它们是多对多关联，看起来像这样：

```
class Experience < ActiveRecord::Base
  has_and_belongs_to_many :categories
end

class Category < ActiveRecord::Base
  has_and_belongs_to_many :experiences
end 
```

为什么有时人们会添加：

`attr_accessible :category_ids`在体验模型中？我发现自己必须这样做，所以在 Rails 管理 gem 中我可以为特定体验添加类别，但我不明白为什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T12:33:33.333

如果您在 Experience 和 Category 之间设置了 HABTM 关系，那么除了其他之外，您还有可用的方法`Experience#category_ids`。此方法返回当前体验具有的类别的各个 id。

```
Experience.first.category_ids 
```

现在这个方法也有`Experience#category_ids=`变体，所以你可以用它来分配类别的 id：

```
Experience.first.category_ids = [1, 2, 3] 
```

现在，当您拥有一个让您为体验选择类别的表单时，您只有所选类别的 ID。当您提交表单时，这些 id 会`Experience#category_ids=`通过批量分配传递给，如果您没有这个`category_ids`in `attr_accessible`，您会收到错误消息。

# python - Scala 中的斑马拼图

> ID：14090600
> 
> 赞同：2
> 
> 时间：2012-12-30T12:11:16.997
> 
> 标签：python, scala

我正在尝试使用 Scala 完成 Udacity 的 CS212，但在使用 Zebra Puzzle 时遇到了问题，

python 中的一些概念并不容易转换为 Scala，尤其是对于像我这样的初学者。

![python代码的SS](../Images/4f945dd67d169b6b53867f0a8775e7f1.png)

这些是我到目前为止管理的代码，

```
 val houses = List(1, 2, 3, 4, 5)
  val orderings = houses.permutations

  def imright(h1: Int, h2: Int): Boolean = {
    if (h1 - h2 == 1) true
    else false
  }

  def nextto(h1: Int, h2: Int): Boolean = {
    if (math.abs(h1 - h2) == 1) true
    else false
  } 
```

`the houses = [first, _, middle, _. _] = [1, 2, 3, 4, 5]`难倒我。此外，我如何`for (red, green, ivory, yellow, blue) in orderings`在 Scala 中表达？请帮助我，谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-30T12:18:05.817

你要

```
val houses = List(1, 2, 3, 4, 5)
val List(first, _, middle, _, _) = houses 
```

和

```
for (List(red, green, ivory, yellow, blue) <- orderings) 
```

分别。另外，请注意，在 Scala 中，这些类型的解构必须分配给以小写字母开头的变量；大写表示它应该与现有变量匹配（如果不匹配，则抛出异常！）。

# html - 在 smarty mailto 函数的输出中插入 html

> ID：14090603
> 
> 赞同：1
> 
> 时间：2012-12-30T12:11:22.643
> 
> 标签：html, smarty

我知道如何使用 smarty mailto 函数来创建`mailto`带有编码的锚链接。但我想知道是否可以将 html 图像标签 [ `<img>`] 插入到此函数的输出中。我试过了：

```
[SMARTY]
{$text = '<img src="/images/qr_code.jpg" alt="member sign up qr code">'}
{mailto address="test@example.com" encode="hex" text={$text}}

[HTML RESULT]
<a href="mailto:%74%65%73%74@%65%78%61%6d%70%6c%65.%63%6f%6d">
      &lt;img  src="/images/qr_code.jpg" 
               alt="member sign up qr code" &gt;
 </a> 
```

我更喜欢这个输出：

```
 <a href="mailto:%74%65%73%74@%65%78%61%6d%70%6c%65.%63%6f%6d">
      <img src="/images/qr_code.jpg" 
           alt="member sign up qr code">
 </a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T12:32:28.573

从阅读此代码[https://bitbucket.org/pferor/dbless/src/04b228943e39/dbless/lib/smarty/plugins/function.mailto.php](https://bitbucket.org/pferor/dbless/src/04b228943e39/dbless/lib/smarty/plugins/function.mailto.php)看来，当您使用“十六进制”编码时，它不仅编码地址和文本（第 147 行）：

```
$text_encode = '';
for ($x=0; $x < strlen($text); $x++) {
    $text_encode .= '&#x' . bin2hex($text[$x]).';';
} 
```

不确定这是否是问题所在。

如果您不介意编辑 Smarty 源代码，您可以更改这一行 (153)：

```
return '<a href="'.$mailto.$address_encode.'" '.$extra.'>'.$text_encode.'</a>'; 
```

对此：

```
return '<a href="'.$mailto.$address_encode.'" '.$extra.'>'.$text.'</a>'; 
```

让它发挥作用。

如果您尝试“无”编码，它会显示图像吗？

# mysql - 从具有以下条件的mysql数据库中获取记录列表：

> ID：14090608
> 
> 赞同：0
> 
> 时间：2012-12-30T12:12:28.173
> 
> 标签：mysql, sql

**首先，我为模糊的问题标题道歉，我不知道该写什么。请让我知道，我会更新它。**

现在它来了..
我有3个

```
Table   : target
Columns : target_id , target_employee_id, target_location_id, target_location_name, target_scheduled_on, target_exec_end_time, target_damaged, target_damaged_text

Table   : employee  
Columns : employee_id, employee_manager_id

Table   : location
Columns : location_id, location_name 
```

Little Explaination-> Managers 的角色是为员工创建一个目标，这意味着新目标将具有位置名称和预定时间。然后员工将访问该位置并报告是否有任何损坏。对于同一个位置，这可能会在一个月内发生多次。

我需要显示的内容-> 有损坏的目标列表- 在两个日期之间（target_exec_end_time），如果同一位置有多个记录，则显示具有最大日期的那个。

更多解释-> 可以有多个具有相同位置的目标条目，但我只需要显示一个实例。[目标表图像](http://tinypic.com/r/2mwil3t/6)

我已经尽力解释了。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T12:17:48.470

这个怎么样：

```
 select * from target join employee on target.target_employee_id = employee.employee_id
     join location on target.target_location_name = location.location_name
     where target_exec_end_time between <start_date> and <end_date>
        and target_exec_end_time = (select max(target_exec_end_time) from location loc2
        where loc2.location_name = target.location_name)
     group by target.location_name; 
```

不确定是否将两个`target_exec_end_time`子句都放在 where 中。也许您只想要最大值？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T12:25:42.243

```
select t.target_location_name,case when t.target_damaged >0 
then t.target_damaged_text else 'Not Damaged' end target_damaged_text, 
max(t.target_exec_end_time) from target t
inner join employee e on t.target_employee_id=e.employee_id
inner join location l on t.target_location_id=l.location_id
where t.target_exec_end_time between 'DATE1' and 'DATE2'
group by t.target_id,t.target_damaged_text 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T12:25:51.760

```
SELECT MAX(target_exec_end_time), *
FROM target
WHERE target_damaged=1
    AND target_exec_end_time BETWEEN '2012-12-01' AND '2012-12-31'
GROUP BY target_location_id 
```

# css - CSS：当前值的百分比

> ID：14090615
> 
> 赞同：0
> 
> 时间：2012-12-30T12:13:49.450
> 
> 标签：css

如果一个元素已经有一个固定的属性值对，比如说

```
div {
    top: X px;
} 
```

是否可以在使用 CSS 进行初始声明后将该值设置为 (X 的 50%)？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T12:22:57.557

您需要使用 JS，例如：`el.style.top = el.style.top * 1.5`.

编辑：或者，如果您使用的是 SASS 之类的东西，您可以将初始值声明为变量，然后简单地将其相乘：`$initialTop = 50; div {top: $initialTop * 1.5}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T12:15:50.247

不，百分比将从父元素计算。您需要使用 Javascript 来实现该功能。

# xna - XNA 碰撞检测

> ID：14090616
> 
> 赞同：0
> 
> 时间：2012-12-30T12:14:08.110
> 
> 标签：xna, collision-detection, collision

对于学校，我需要在 XNA 中制作这个游戏项目，我选择制作基于 mario 的游戏。但是，我这几天一直在进行碰撞检测，但仍然找不到问题。

这是项目的链接： [ProjectMario](http://brambelg.sinners.be/mariospeed.rar)

好的，这就是它的作用。 ![在此处输入图像描述](../Images/c265875425d816a9312bcad162362add.png)

这是我的代码

瓷砖管理器

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Audio;
using Microsoft.Xna.Framework.Content;
using Microsoft.Xna.Framework.GamerServices;
using Microsoft.Xna.Framework.Graphics;
using Microsoft.Xna.Framework.Input;
using Microsoft.Xna.Framework.Media;
using Microsoft.Xna.Framework.Net;
using Microsoft.Xna.Framework.Storage;

namespace mariospeed.ManagerClasses
{
    class TileManager
    {
        int[,] tilemap;
        int tilesize;
        int mapSizeX;
        int mapSizeY;
        int tileindex;
        Texture2D tex;
        List<Texture2D> texlis;
        public List<Rectangle> blocks;
        public List<Rectangle> blocksTop;
        public List<Rectangle> blocksLeft;
        public List<Rectangle> blocksRight;
        public List<Rectangle> tile;
        public int mapX;
        public int MapW;

        public TileManager()
        {
            tilemap = new int[,]
            {
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,1,1,1,0,0,1,0,0,0,0,0,0,0,0,0,0},
                {0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0},
                {0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,1,1,0,1,1,1,1,1,1,1,1,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0},
                {0,0,0,0,0,1,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                {1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}
            };

            tilesize = 28;
            texlis = new List<Texture2D>();
            mapSizeX = tilemap.GetLength(1);
            mapSizeY = tilemap.GetLength(0);
            blocks = new List<Rectangle>();
            blocksTop = new List<Rectangle>();
            blocksLeft = new List<Rectangle>();
            blocksRight = new List<Rectangle>();
            tile = new List<Rectangle>();
            mapX = 0;

            for (int x = 0; x < mapSizeX; x++)
            {
                for (int y = 0; y < mapSizeY; y++)
                {
                    if (tilemap[y, x] == 1)
                    {
                        blocks.Add(new Rectangle(x * tilesize - mapX, y * tilesize, 28, 30));

                    }
                }
            }

            foreach (Rectangle block in blocks)
            {
                blocksTop.Add(new Rectangle(block.Center.X, block.Top, block.Width, block.Height));
            }
            foreach (Rectangle block in blocks)
            {
                blocksLeft.Add(new Rectangle(block.Left, block.Y, 1, block.Height));
            }
            foreach (Rectangle block in blocks)
            {
                blocksRight.Add(new Rectangle(block.Right, block.Y, block.Width / 2, block.Height));
            }

            for (int x = 0; x < mapSizeX; x++)
            {
                for (int y = 0; y < mapSizeY; y++)
                {
                    tile.Add(new Rectangle(x * tilesize, y * tilesize, 28, 30));
                }
            }

            MapW = tilesize * mapSizeX;

        }
            //

        public void LoadContent(Texture2D tex1, Texture2D tex2)
        {
            texlis.Add(tex1);
            texlis.Add(tex2);

        }

        public void Draw(SpriteBatch sp)
        {

            for (int i = 0; i < mapSizeX; i++)
            {
                for (int j = 0; j < mapSizeY; j++)
                {
                    tileindex = tilemap[j, i];
                    tex = texlis[tileindex];

                    sp.Draw(tex, new Rectangle(i * 28 - mapX, j * 30, 28, 30), Color.White);

                }

            }

        }

    }
}

Mario Class

    using System;
using System.Collections.Generic;
using System.Linq;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Audio;
using Microsoft.Xna.Framework.Content;
using Microsoft.Xna.Framework.GamerServices;
using Microsoft.Xna.Framework.Graphics;
using Microsoft.Xna.Framework.Input;
using Microsoft.Xna.Framework.Media;
using mariospeed.GameScenes;

namespace mariospeed.GameComponents
{
    /// <summary>
    /// This is a game component that implements IUpdateable.
    /// </summary>
    public class Mario : Microsoft.Xna.Framework.DrawableGameComponent
    {

        Texture2D texture2;
        public Vector2 cameraPosition;
        public Vector2 worldPosition;
        public Rectangle rectangle;
        public Rectangle footBounds;
        public Rectangle leftRec;
        public Rectangle rightRec;
        KeyboardState keystate;
        KeyboardState oldkeys;
        public string facing;
        public string state;
        public bool jump;
        float jumpSpeed;
        public float gravity;

        public float speed;
        float time;
        public string prevstate;
        Point frameSize;
        Point sheetSize;
        Point currentFrame;
        public Rectangle source;
        float interval;
        //
        Texture2D charr;
        Vector2 charPos;
        bool jumping; //Is the character jumping?
        public float startY, jumpspeed = 0; //startY to tell us //where it lands, jumpspeed to see how fast it jumps
        protected Texture2D texture;
        protected Vector2 position = new Vector2();

        protected const int WIDTH = 64;
        protected const int HEIGHT = 80;

        protected Rectangle screenBounds;

        protected List<Rectangle> frames;    // hierin de grenzen v/d frames
        private int activeFrame;
        public Mario(Game game, Texture2D texture)
            : base(game)
        {
            this.texture = texture;
            screenBounds = new Rectangle(0, 0,
               Game.Window.ClientBounds.Width, Game.Window.ClientBounds.Height);

            frames = new List<Rectangle>();

            CreateFrames();
            activeFrame = 0;
            PutInStartPosition();

            charr = texture; //Load image
            charPos = new Vector2(230, 450);//Char loc, X/Y
            startY = charPos.Y;//Starting position
            jumping = false;//Init jumping to false
            jumpspeed = 0;//Default no speed

            //
            cameraPosition = new Vector2(0, 0);
            worldPosition = new Vector2(40, 0);
            startY = worldPosition.Y;
            facing = "right";
            prevstate = state;
            state = "stand";
            jump = false;
            gravity = 0f;
            speed = 5f;
            frameSize = new Point(28, 30);
            sheetSize = new Point(6, 7);
            currentFrame = new Point(0, 0);
            time = 0f;
            interval = 100f;
            //
        }
        public void PutInStartPosition()
        {
            position.X = 10;
            position.Y = (screenBounds.Height - (texture.Height+18));

        }

        public Vector2 marioPosition()
        {
            return position;
        }
        public void CreateFrames()
        {

            frames.Add(new Rectangle(0, 0, WIDTH, HEIGHT));
            frames.Add(new Rectangle(WIDTH, 0, WIDTH, HEIGHT));
            frames.Add(new Rectangle(2*WIDTH, 0, WIDTH, HEIGHT));
           // frames.Add(new Rectangle(3*WIDTH, 0, WIDTH, HEIGHT));

        }

        /// <summary>
        /// Allows the game component to perform any initialization it needs to before starting
        /// to run.  This is where it can query for any required services and load content.
        /// </summary>
        public override void Initialize()
        {
            // TODO: Add your initialization code here

            base.Initialize();
        }

        /// <summary>
        /// Allows the game component to update itself.
        /// </summary>
        /// <param name="gameTime">Provides a snapshot of timing values.</param>
        public override void Update(GameTime gameTime)
        {
            time += (float)gameTime.ElapsedGameTime.TotalSeconds;
            oldkeys = keystate;
            keystate = Keyboard.GetState();
            cameraPosition.Y += gravity;
            worldPosition.Y += gravity;
            if (keystate.IsKeyDown(Keys.Right))
            {
                cameraPosition.X += speed;
                worldPosition.X += speed;

                facing = "right";

            }
            if (keystate.IsKeyDown(Keys.Left))
            {
                cameraPosition.X -= speed;
                worldPosition.X -= speed;

                facing = "left";

            }
            if (oldkeys.IsKeyDown(Keys.Left) && !keystate.IsKeyDown(Keys.Left))
            {
                state = "stand";
            }

            if (oldkeys.IsKeyDown(Keys.Right) && !keystate.IsKeyDown(Keys.Right))
            {
                state = "stand";
            }

            if (state == "stand")
            {

                if (keystate.IsKeyDown(Keys.Left))
                {
                    state = "walk";
                     MoveAnimation(gameTime);
                }
                if (keystate.IsKeyDown(Keys.Right))
                {
                    state = "walk";
                    MoveAnimation(gameTime);
                }
            }

            if (state == "walk")
            {
                activeFrame = (activeFrame + 1) % frames.Count;
                gravity = 5f;

            }
            if (state == "stand")
            {
                activeFrame = 0;
                gravity = 5f;
                 StandAnimation();
            }

            //

            if (jump)
            {
                state = "jump";
                cameraPosition.Y += jumpSpeed;
                worldPosition.Y += jumpSpeed;
                jumpSpeed += 1f;
                if (jumpSpeed == 0)
                {
                    jumpSpeed = 0;
                    jump = false;
                    state = "fall";
                }

            }
            else
            {
                if (worldPosition.Y == startY)
                {
                    if (keystate.IsKeyDown(Keys.Space) && !oldkeys.IsKeyDown(Keys.Space))
                    {
                        jumpSpeed -= 18f;
                        jump = true;
                        gravity = 0f;
                    }
                }
            }

            if (state == "fall")
            {
                gravity = 5f;
                JumpAnimation();
            }
            if (state == "jump")
            {
                JumpAnimation();
            }
            if (worldPosition.Y > startY)
            {
                state = "fall";

            }

            rectangle = new Rectangle((int)worldPosition.X, (int)worldPosition.Y, WIDTH, HEIGHT);
            footBounds = new Rectangle(rectangle.Center.X, rectangle.Center.Y, rectangle.Width, 1);
            rightRec = new Rectangle(rectangle.Center.X, rectangle.Y, rectangle.Width / 2, rectangle.Height);
            leftRec = new Rectangle(rectangle.Left, rectangle.Y, 1, rectangle.Height);

            base.Update(gameTime);

        }
        public override void Draw(GameTime gameTime)
        {
            SpriteBatch sBatch = (SpriteBatch)Game.Services.GetService(typeof(SpriteBatch));
            if (facing == "right")
            {
                sBatch.Draw(texture, cameraPosition, frames[activeFrame], Color.White, 0f, new Vector2(rectangle.Width / 2, rectangle.Height / 2), 1.0f, SpriteEffects.None, 0);
                    }

            if (facing == "left")
            {
                sBatch.Draw(texture, cameraPosition, frames[activeFrame], Color.White, 0f, new Vector2(rectangle.Width / 2, rectangle.Height / 2), 1.0f, SpriteEffects.FlipHorizontally, 0);

            }
            //sBatch.Draw(texture, position, frames[activeFrame], Color.White);

            base.Draw(gameTime);
        }

        public void MoveAnimation(GameTime gt)
        {

            time += (float)gt.ElapsedGameTime.TotalMilliseconds;
            currentFrame.Y = 3;

            frameSize = new Point(33, 33);
            if (time > interval)
            {
                currentFrame.X++;
                if (currentFrame.X > 4)
                {
                    currentFrame.X = 1;
                }
                source = new Rectangle(currentFrame.X * frameSize.X, currentFrame.Y * 25, frameSize.X, frameSize.Y);
                time = 0f;
            }
        }

        public void JumpAnimation()
        {

            currentFrame.Y = 5;
            currentFrame.X = 1;
            frameSize = new Point(33, 33);
            source = new Rectangle(currentFrame.X * frameSize.X, currentFrame.Y * frameSize.Y, frameSize.X, frameSize.Y);

        }

        public void FallAnimation()
        {
            currentFrame.X = 5;
            currentFrame.X = 2;
            frameSize = new Point(33, 33);
            source = new Rectangle(currentFrame.X * frameSize.X, currentFrame.Y * frameSize.Y, frameSize.X, frameSize.Y);
        }
        public void StandAnimation()
        {
            currentFrame.X = 1;
            currentFrame.Y = 2;
            frameSize = new Point(33, 33);
            source = new Rectangle(currentFrame.X * frameSize.X, currentFrame.Y * 19, frameSize.X, frameSize.Y);

        }

    }
}

And The Collision Detection Method

    public void Collision()
        {

            foreach (Rectangle top in map.blocksTop)
            {
                if (top.Intersects(mario.footBounds))
                {
                    mario.gravity = 0f;
                    mario.state = "stand";
                    mario.startY = mario.worldPosition.Y;
                }
            }

            foreach (Rectangle left in map.blocksLeft)
            {
                if (left.Intersects(mario.rightRec))
                {
                    if (mario.footBounds.Y >= left.Y)
                    {

                        mario.worldPosition.X -= 5f;
                        mario.cameraPosition.X -= 5f;
                    }
                }
            }

            foreach (Rectangle right in map.blocksRight)
            {
                if (right.Intersects(mario.leftRec))
                {
                    if (mario.footBounds.Y >= right.Y)
                    {
                        mario.worldPosition.X += 5f;
                        mario.cameraPosition.X += 5f;
                    }
                }
            }

        } 
```

有人可以告诉我我做错了什么吗？

亲切的问候 Trustos

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T14:37:24.467

您可以使用内置碰撞功能，该功能基本上适用于游戏中的方形对象，或者构建一个布尔函数，如果您的对象位于其他对象的同一位置或试图穿过它，则返回 true。或者尝试 youtube 上的碰撞教程或一些物理知识 :)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T17:44:05.573

这是一种为侧面滚动进行平铺碰撞的简单方法。如果角色走得很快，这将不起作用。假设您的游戏以 60 fps 运行以获得更好的结果。

在两个轴上分开测试。从 Y 开始。如果目的地的瓷砖被占用，则将 Y 夹在顶部或底部。

然后以同样的方式做 X。它非常基本，但适用于这种情况。

```
Tile tileY = GetTileAt(Position.X, Position.Y + Velocity.Y);

if (tileY.IsOccupied)
{
    if (Velocity.Y >= 0) // Player is falling down
    {
        // Set position (feet) on top of the tile
        Position.Y = tileY.Y;
    }
    else
    {
        // Set position bellow the tile
        Position.Y = tileY.Y + TILE_HEIGHT + CHARACTER_HEIGHT;
    }
}

// Similar for X, but use the update Y position to fetch the tile
Tile tileX = GetTileAt(Position.X + Velocity.X, Position.Y);
if (tileX.IsOccupied)
{
    if (Velocity.X >= 0) // Player is going right
    {
        Position.X = tileX.X - (CHARACTER_WIDTH / 2);
    }
    else
    {
        Position.X = tileX.X + TILE_WIDTH + (CHARACTER_WIDTH / 2);
    }
} 
```

# css - div 在调整浏览器窗口大小时发生变化

> ID：14090618
> 
> 赞同：0
> 
> 时间：2012-12-30T12:14:11.710
> 
> 标签：css, html

我是这个网站的新手，所以请坦白我的错误。我想将第三个 div 保持在同一个位置，并且在调整窗口大小而不是移动时应该出现一个滚动条。我不能使用固定宽度，因为我想在它下面再添加一个 div...

```
 #wrapper {
float:left;
height:600px;
         }

#one {
clear:right;
float:left;
width:720px;
height:600px;
    background-color:#000;

    }

#two {
clear:right;
float:left;
width:300px;
height:300px;
    background-color:#999;

   }

   #three {
clear:right;
float:left;
width:320px;
height:300px;
    background-color:#600;

    }

   <head>
   </head>

   <body>

   <div id="wrapper">

  <div id="one">
      </div>
      <div id="two">
      </div>
      <div id="three">
      </div>

  </div>

  </body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T12:20:38.640

Give `#wrapper` fixed width:

```
#wrapper {
  width: 1340px; /* 720 + 300 + 320 */
} 
```

# json - AngularJS - 如何将所有 jsons 请求放气和编码/解码为 base64？

> ID：14090619
> 
> 赞同：9
> 
> 时间：2012-12-30T12:14:21.543
> 
> 标签：json, http, base64, angularjs, deflate

假设我的角度应用程序周围有几个 $resources 和一些 $http：

```
myApp.factory('Note', function($resource) {

  return $resource('http://', {id: '@id'}, 
    { 'index': { method: 'GET', isArray: true },
      'update': { method: 'PUT'},
    });
  }); 
```

带控制器

```
myApp.controller('NotesController',function NotesController($scope, Note, AuthenticationService) {

$scope.notes = Note.index({}, function(data){
    console.log('success, got data: ', data);
    $scope.response = "yoy!"
  }, function(err){
    console.log('error, got data: ', err);
    $scope.response = "yay!"
  }); 
}); 
```

并且一些请求是由 $http 直接发出的，如身份验证

```
var request = $http.post('http://', {email: email, password: password}); 
```

在发出实际请求/接收响应之前，我在哪里以及如何告诉 Angular 将 JSON 压缩和编码/解码为 base64？

我想我会将用于放气和编码/解码的外部库包装到工厂中。然后这个工厂会被注入到这里？喜欢 $httpBackend 吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-30T12:40:19.660

您应该查看服务的**请求/响应转换**器：http `$http`: [//docs.angularjs.org/api/ng.$http](http://docs.angularjs.org/api/ng.$http)

请求/响应转换器是可以在内容发送/返回给调用者之前调用的简单函数。您可以全局指定转换函数（针对所有请求/响应）以及基于每个请求：

> 要在本地覆盖这些转换，请将转换函数指定为配置对象的 transformRequest 和/或 transformResponse 属性。要全局覆盖默认转换，请覆盖 $httpProvider 的 $httpProvider.defaults.transformRequest 和 $httpProvider.defaults.transformResponse 属性。

要定义全局请求/响应转换器，可以按照这些行编写代码（它更像是伪代码，不适用于所有浏览器，请参阅下面有关 Base64 的注释）：

```
angular.module('sample', [], function($httpProvider) {

    $httpProvider.defaults.transformRequest = function(data, headersGetter) {
        return btoa(JSON.stringify(data));
    };

    $httpProvider.defaults.transformResponse = function(data, headersGetter) {
        return JSON.parse(atob(data));
    };

}) 
```

当然，您的转换代码可能更复杂，并且取决于请求/响应标头，但总体思路就在这里。带有代码的 jsFiddle（检查控制台以查看请求是否已转换，您需要使用 Mozilla 或 WebKit 浏览器）：http: [//jsfiddle.net/Ydt5j/](http://jsfiddle.net/Ydt5j/)

对于从 / 到 Base64 的实际转换，请检查以下问题：[如何在 JavaScript 中将字符串编码为 Base64？](https://stackoverflow.com/q/246801/1418796)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T19:25:24.157

```
angular.module('services.base64',[]);
angular.module('services.base64').provider('base64', function () {

  this.encode = function(str) {
    return base64_encode(str);
  }

  this.decode = function(str) {
    return base64_decode(str);
  }

  this.$get = function() {
    return {};
  }

});

var myApp = angular.module('myApp',['services.base64'])

myApp.config(['base64Provider', function (base64Provider) {
    $httpProvider.defaults.transformRequest = function(request){return base64Provider.encode(request)};

    $httpProvider.defaults.transformResponse = function(response){return base64Provider.decode(response)};
}]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-04T03:16:21.560

这就是我在过滤器中的做法。item.htmlBody 包含带有 html 标签的 base64 编码文本

```
// in template
<div ng-bind-html="item.htmlBody | decodeBase64">{{item.htmlBody}}</div>

//inside controller.js

.filter('decodeBase64', function(){
   return function(text){
   return atob(text);
   }
}) 
```

好吧，我知道这并不能完全回答这个问题，但是通过一些小的调整，你可以得到你想要的（针对未来有同样问题的人）

# ruby-on-rails - 可排序的表列在 MongoDB 中不起作用

> ID：14090621
> 
> 赞同：1
> 
> 时间：2012-12-30T12:14:37.440
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, mongodb, mongoid

我正在使用 rails cast 视频[http://railscasts.com/episodes/240-search-sort-paginate-with-ajax](http://railscasts.com/episodes/240-search-sort-paginate-with-ajax) 。它适用于 Mysql 数据库。我想在MongoDB中实现这个。我的 application_helper.rb 文件是这样的

```
def sortable(column, title = nil)
    title ||= column.titleize
    css_class = column == sort_column ? "current #{sort_direction}" : nil
    direction = column == sort_column && sort_direction == "asc" ? "desc" : "asc"
    link_to title, params.merge(:sort => column, :direction => direction, :page => nil), {:class => css_class}
  end 
```

我的 products_controller.rb 文件是这样的

```
helper_method :sort_column, :sort_direction
  def index
   @products = Product.search(params[:search]).order_by(sort_column + " " + sort_direction)

  end

private

  def sort_column
    Product.column_names.include?(params[:sort]) ? params[:sort] : "name"
  end

  def sort_direction
    %w[asc desc].include?(params[:direction]) ? params[:direction] : "asc"
  end 
```

我的 product.rb 模型是这样的

```
class Product
  include Mongoid::Document
  include Mongoid::Timestamps
  field :name, type: String
  field :price, type: String
  field :released_at, type: String

  def self.search(search)
    if search
       where(name: /#{Regexp.escape(search)}/i) 
     else
       scoped
    end
  end
end 
```

它在 Mysql 数据库中运行良好，但对于 Mongodb 它会抛出类似的错误

```
undefined method `column_names' for Product:Class
app/controllers/products_controller.rb:81:in `sort_column'
app/controllers/products_controller.rb:6:in `index' 
```

我搞砸了。我是 MongoDB 的新手。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T08:17:15.293

Mongoid 本身不支持 column_names 方法。您需要做的是自己提供一个，将其添加到您的模型中。

```
 def self.column_names
    self.fields.collect { |field| field[0] }
  end 
```

# iphone - 将 GameKit 限制为蓝牙（替代方案：查明 GameKit 是使用蓝牙还是 W iFi）

> ID：14090627
> 
> 赞同：2
> 
> 时间：2012-12-30T12:14:57.250
> 
> 标签：iphone, objective-c, ios, bluetooth, gamekit

## 问题是什么？

我想通过蓝牙在两个 iDevices（iPhone、iPod、iPad、iPad mini）之间进行通信。据我所知，[GameKit](http://developer.apple.com/library/ios/#documentation/GameKit/Reference/GameKit_Collection/_index.html#//apple_ref/doc/uid/TP40008303)是 Apple 在不使用私有 API 的情况下提供的全部。不幸的是，AFAIK 无法将 GameKit 限制为蓝牙，因为 GameKit 自己决定是使用蓝牙还是 W​​iFi 连接连接到其他对等方。更糟糕的是，我没有找到任何方法来确定已建立的 GameKit 连接是使用蓝牙还是 W​​iFi。

## 问题是什么？

*   首选：如何将 GameKit 限制为蓝牙？
*   备选方案 1：如何确定 GameKit 连接是使用蓝牙、WiFi 还是其他方式？
*   备选方案 2：我还能用什么在两个 iDevice 之间通过蓝牙进行通信？

## 限制？

*   没有私有 API aka AppStore 兼容
*   必须离线工作
*   不限于蓝牙 4.0 低功耗

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-12-30T14:52:39.137

从 iOS 5 开始，Apple 发布了 Core Bluetooth Framework。看看那个：http: [//developer.apple.com/library/ios/documentation/CoreBluetooth/Reference/CoreBluetooth_Framework/_index.html](http://developer.apple.com/library/ios/documentation/CoreBluetooth/Reference/CoreBluetooth_Framework/_index.html)

# iphone - 如何在启用自动布局的情况下更改 iOS6 中的 UIView 大小？

> ID：14090634
> 
> 赞同：3
> 
> 时间：2012-12-30T12:15:49.250
> 
> 标签：iphone, ios, autolayout

我理解 iOS6 中新的自动布局技术的想法是您不再需要设置框架，而是按意图编写代码？

如果我通过它的框架更改 UIView 的大小，那么在运行时从这个开始，它的任何子视图当前都不会随着视图移动和更改。

因此，我为 UIView 上的约束创建了一个出口，并更改了该约束的常量。这会改变 UIView 的大小，并且所有子视图也会相应地移动。

因此，我在正确的轨道上吗？这是我想在自动布局下更改 UIView 大小的方式吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-30T12:52:06.737

你不设置框架。您改为更新相关约束（您将需要对这些约束的引用，无论是作为出口还是作为您在代码中创建约束后保留的属性）。

举个简单的例子，如果您固定了视图的宽度，只需更改`.constant`宽度约束的属性即可在视图上设置新的宽度。

这是一个包含子视图的示例视图控制器：

![在此处输入图像描述](../Images/a7fe8b96ca2561e0f8b30179d5f84f00.png)

创建宽度和高度约束的出口，并在您想要调整视图大小时更改它们。

# bash - 从 Asterisk 以 root 身份执行脚本

> ID：14090638
> 
> 赞同：0
> 
> 时间：2012-12-30T12:16:25.317
> 
> 标签：bash, asterisk

我有以下内容`extension.conf`：

```
exten => XXX,Answer()
exten => XXX,n,Playback(/var/lib/asterisk/sounds/delExtHDD)
exten => XXX,n,System(/bin/sh /etc/asterisk/deletekeys.sh)
exten => XXX,n,Hangup() 
```

脚本 chmod 是 4755，由 root 拥有。

脚本本身包含以下内容：

```
#/bin/sh
#/usr/bin/wipe -f -q /XXX
/bin/umount /media/sda/
/sbin/cryptsetup luksClose sda_crypt 
```

显然脚本已执行，但它不会卸载文件系统，因此我建议它没有 root 权限。

如何以 root 身份执行脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T13:45:19.833

感谢[Mat](https://stackoverflow.com/users/635608/mat)对 unix stackexchange 的提示！

我编译了一个 C 程序，可以在[https://unix.stackexchange.com/a/369/16009](https://unix.stackexchange.com/a/369/16009)找到它以 root 身份执行脚本。

# php - 用 while 循环填充表

> ID：14090640
> 
> 赞同：1
> 
> 时间：2012-12-30T12:17:23.073
> 
> 标签：php

我正在尝试填充从我的 MySQL 数据库中提取数据的表，数据库中有 3 个条目，但由于某种原因回显数据不起作用，尽管我可以看到它正在循环 3 次（表创建3 个复选框，每个条目 1 个）

代码

```
<?php 
    $qry2="SELECT * FROM buytraff WHERE username='$username'";
    $result2=mysql_query($qry2) or die(mysql_error()); 
    while ($rows = mysql_fetch_assoc($result2)):?>

<tr class="first">
<td class="tc">&nbsp;</td>
<td class="tc"><center><font face="Arial, Helvetica, sans-serif"></font><font face="Arial, Helvetica, sans-serif"><? echo $rows['id']; ?></font>
</center></td>
<td class="tc"><center><font face="Arial, Helvetica, sans-serif"><? echo $rows['url']; ?></font></center></td>

<td><center><font face="Arial, Helvetica, sans-serif"><? echo $rows['nichecountry']; ?></font></center></td>
<td class="tc"><center><font face="Arial, Helvetica, sans-serif"><?php if($rows['type']=='1.99'){
echo "something";
}

elseif($rows['type']=='2.99'){
echo "something";
}

elseif($rows['type']=='3.00'){
echo "something";
}

elseif($rows['type']=='4.00'){
echo "something";
}

?></font></center></td>
<td class="tc"><center><font face="Arial, Helvetica, sans-serif"><? echo $rows['price']; ?> $</font></center></td>
<td class="tc"><center><font face="Arial, Helvetica, sans-serif"><? echo $rows['amount']; ?></font></center></td>
<td class="tc"><center><font face="Arial, Helvetica, sans-serif"><? echo $rows['delivered']; ?></font></center></td>
<td class="tc"><center><font face="Arial, Helvetica, sans-serif"><? echo $rows['status']; ?></font></center></td>
<td class="tc"><center><input name="checkbox[]" type="checkbox" class="checkbox" id="checkbox[]" value="<? echo $rows['id']; ?>"></center></td> 
</tr>
<?php endwhile; ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T12:44:38.170

### 使用 PHP 短标签

在 XAMPP 中，您需要在以下位置启用此选项`PHP.ini`：

```
short_open_tag = On 
```

# c++ - Implementing Depth First Traversal for a Graph using Adjacency Matrix C++

> ID：14090644
> 
> 赞同：0
> 
> 时间：2012-12-30T12:17:57.850
> 
> 标签：c++, graph, traversal, depth-first-search, adjacency-matrix

I have got a set of nodes and few edges that represent which nodes are connected. V_nodes 1 7 22 97 48 11 V_arcs (1 22) (97 22) (7 1) (11 48) (48 7) (11 0) V_weight 1

I have created its adjacency matrix that shows 1 for connected and 0 for disconnected vertices. Now I want to implement a Depth First Traversal for this graph using its Adjacency Matrix. I have seen the tutorials on DFS but I am confused How can I traverse it using my Adjacency matrix. I just need to print the nodes using Depth First Traversal. Any help will be appreciated.

```
// Prints the adjacency matrix

cout<<"Adjacency Matrix : \n";
for(int i=0;i<6;i++)
    cout<<"       "<<nodes[i].nodevalue;
cout<<endl<<endl;

for(int i=0;i<6;i++)
{
    for (int j=0;j<6;j++)
    {
        cout<<"       "<<edges[i][j];
    }
    cout<<endl<<nodes[i].nodevalue;
    cout<<endl<<endl;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T12:25:58.220

You'll want to use a last-in first-out queue, otherwise known as a [stack](http://www.cplusplus.com/reference/stack/stack/). You could also use recursion, but you risk having a stack overflow if you graph is too large.

For each node, loop through all the nodes that node is connected to, adding them to the stack.

Pop the first node off of the stack, do whatever operation you wanted to do, and then repeat the process.

This could look like

```
void dfs(int node){
  std::stack<int> expand;
  expand.push(node);
  while(!expand.empty()){
    int tnode=expand.top();expand.pop();
    do_operation_on(tnode);
    for(int i=0;i<ADJACENCY_MATRIX_DIMENSION;i++)
      if(adj_matrix[tnode][i])
        expand.push(i);
  }
} 
```

Note that if you have a cycle in your graph there will be problems.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-22T14:18:53.790

```
 #include<cstdio>
    #include<iostream>
    #include<stack>
    #include<cstring>
    using namespace std;
    int G[10][10],n;
    void dfs(int strt)
    {
        int vis[n];
        memset(vis,0,sizeof vis);
        stack<int>st;
        st.push(strt);
        while(!st.empty())
        {
            int pre=st.top();st.pop();

            if(!vis[pre])
            {
                cout<<pre<<" ";
                vis[pre]=1;
                for(int i=n-1;i>=0;i--)
                {

                    if(G[pre][i]==1 and !vis[i])
                    {
                        st.push(i);
                    }
                }
            }
        }
        cout<<endl;
    }
    int main()
    {
        cin>>n;
        for(int i=0;i<n;i++)
           for(int j=0;j<n;j++)
            cin>>G[i][j];
        dfs(2);
    } 
```

在这里，我以相反的顺序添加连接到节点的节点，它的工作。[https://ideone.com/AGm2xe](https://ideone.com/AGm2xe)

# jquery - datatables with checkboxes not storing checked data across pagination

> ID：14090646
> 
> 赞同：3
> 
> 时间：2012-12-30T12:18:24.700
> 
> 标签：jquery, jquery-datatables

Hi i'm using datatables from datatables.net, everything was working well until i tried to add checkboxes to my table. I'm using table-tools, with column filtering and show/hide column. I added the checkboxes which work across all pages in the pagination however when i submit the form it only sends the data for the checkboxes displayed on the current page. How can i somehow store all the checkboxes that have been checked even if they're on other pages within the table. I'm not a Js man so i really have know idea. i need to be able to store the id for each user who was checked in the check[].

Thanks for any help :)

It's a foreach loop generating the data and the checkboxes are:

```
<td><input name="check[]" type="checkbox" value="{{ $staff->id }}" /> </td> 
```

The Jquery code is:

```
 var asInitVals = new Array();

$(document).ready(function() {

    /*
     * Support functions to provide a little bit of 'user friendlyness' to the textboxes in
     * the footer
     */
    jQuery("tfoot input").each( function (i) {
        asInitVals[this.name] = this.value;
    } );

    jQuery("tfoot input").focus( function () {
        if ( this.className == "search_init" )
        {
            this.className = "";
            this.value = "";
        }
    } );

    jQuery("tfoot input").blur( function (i) {
        if ( this.value == "" )
        {
            this.className = "search_init";
            this.value = asInitVals[this.name];
        }
    } );

    var oTable = $('.data-tbl-tools').dataTable( {
        "sPaginationType": "full_numbers",
        "iDisplayLength": 10,
        "oLanguage": {
            "sSearch": "Search all columns:"
        },
        "sDom": '<"tbl-tools-searchbox"fl<"clear">>,<"tbl_tools"CT<"clear">>,<"table_content"t>,<"widget-bottom"p<"clear">>',
        "oTableTools": {
        "sSwfPath": "../swf/copy_cvs_xls_pdf.swf"
        }

    } );

    $("tfoot input").keyup( function () {
    var id = $(this).attr('id').split("-")[1];
    oTable.fnFilter( this.value, id );
    });

} ); 
```

# android - Android不确定进度条没有动画

> ID：14090647
> 
> 赞同：7
> 
> 时间：2012-12-30T12:18:41.577
> 
> 标签：android, android-activity, widget, progress-bar

我想要一个无限的进度条，就像在 Activity Indicatior, Activity bar 下一样

[http://www.google.de/imgres?um=1&hl=de&client=firefox-a&hs=H9I&tbo=d&rls=org.mozilla:de:official&biw=1280&bih=697&tbm=isch&tbnid=AX0X8So5n4iiPM:&imgrefurl=http://developer. android.com/design/building-blocks/progress.html&docid=8Hr06JHpY9T3rM&imgurl=http://developer.android.com/design/media/progress_download.png&w=760&h=348&ei=bDDgULSzELL64QTa74DgBg&zoom=1&iact=rc&dur=318&sig=116802410&56=2&tbnh2=318&sig=21872 143&tbnw=265&start=35&ndsp=40&ved=1t:429,r:51,s:0,i:243&tx=131&ty=39](http://www.google.de/imgres?um=1&hl=de&client=firefox-a&hs=H9I&tbo=d&rls=org.mozilla:de:official&biw=1280&bih=697&tbm=isch&tbnid=AX0X8So5n4iiPM:&imgrefurl=http://developer.android.com/design/building-blocks/progress.html&docid=8Hr06JHpY9T3rM&imgurl=http://developer.android.com/design/media/progress_download.png&w=760&h=348&ei=bDDgULSzELL64QTa74DgBg&zoom=1&iact=rc&dur=318&sig=116802181569187224100&page=2&tbnh=143&tbnw=265&start=35&ndsp=40&ved=1t:429,r:51,s:0,i:243&tx=131&ty=39)

我的实现没有动画，也没有旋转。怎么了？谢谢

```
<ProgressBar
    android:id="@+id/progressBar"
    style="?android:attr/progressBarStyleHorizontal"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" /> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-30T12:30:49.150

添加`android:indeterminate="true"`到您的 xml - 这应该可以解决它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T13:19:53.830

这是我的xml，它工作正常：

> ```
> <ProgressBar
>     android:id="@+id/progressBar1"
>     style="?android:attr/progressBarStyleLarge"
>     android:layout_width="wrap_content"
>     android:layout_height="wrap_content"
>     android:layout_centerHorizontal="true"
>     android:layout_centerVertical="true" /> 
> ```

# java - Java swt delete/undo for paint commad

> ID：14090654
> 
> 赞同：2
> 
> 时间：2012-12-30T12:19:12.123
> 
> 标签：java, shell, graphics, swt, java-canvas

Consider -

```
public class MainCanvas extends Canvas {...} 
```

And

```
Display display = new Display();
display = new Display();
myShell = new Shell(display);
myCanvas = new MainCanvas(myShell, SWT.NO);
GC myGC = new GC(myShell);
myGC.fillOval(10,20,30,40) ; //paint shape .. 
```

Now I want to delete the shape painted by `myGC.fillOval(10,20,30,40) ;` from the canvas .

Is there any command to delete the last paint , or command to clear the canvas ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-23T14:30:29.027

非常好的问题。我刚开始使用 JAVA SWT，遇到了同样的问题。

我想出的解决方案是用一个新的 Canvas 替换它，每次我必须清空它的内容而不影响其他任何东西时，它都是相同的。

为此，我正在使用**canvas.dispose()**命令并使用**shell.redraw()**和**shell.pack()**重绘和重新打包 Shell，以便正确调整窗口大小。这些命令是从另一个事件中调用的，例如按下按钮（下面提供的示例中的 Enter 按钮）。另外，请注意，在下面的示例中，我使用的是 GridLayout（有关更多信息，请参阅[http://www.eclipse.org/articles/article.php?file=Article-Understanding-Layouts/index.html](http://www.eclipse.org/articles/article.php?file=Article-Understanding-Layouts/index.html)）我正在使用整数数组创建一条折线。

```
 myCanvas = new Canvas(shell, SWT.BORDER); // create the initial instance of the Canvas
    gridData = new GridData(GridData.FILL, GridData.FILL, true, true);
    gridData.widthHint = 1100; // set desired width
    gridData.heightHint = 800; // set desired height
    gridData.verticalSpan = 3; // set number of columns it will occupy
    myCanvas.setLayoutData(gridData);

    myEnter_Button.addSelectionListener(new SelectionAdapter() {
        public void widgetSelected(SelectionEvent mainEvent) {
            myCanvas.dispose(); // delete the Canvas
            myCanvas = new Canvas(shell, SWT.BORDER);
            GridData redrawGridData = new GridData(GridData.FILL, GridData.FILL, true, true);
            redrawGridData.widthHint = 1100;
            redrawGridData.heightHint = 800;
            redrawGridData.verticalSpan = 3;
            myCanvas.setLayoutData(redrawGridData);
            shell.redraw();
            shell.pack(); // pack shell again

    myCanvas.addPaintListener(new PaintListener() {
                public void paintControl(final PaintEvent event) {
                    // coordinateIntegerArray not displayed in this example
                    event.gc.drawPolyline(coordinateIntegerArray);//draw something

                    }
                }
            });

            myCanvas.redraw();
        }
    }); 
```

我希望这会有所帮助。如果我设法找到一种专门删除/撤消绘制的最后一个绘画对象的方法，我一定会让你知道。

干杯!

# php - HTML 文本触发 PHP

> ID：14090655
> 
> 赞同：0
> 
> 时间：2012-12-30T12:19:12.700
> 
> 标签：php, html

我对 PHP 很陌生，但我对它的工作原理有一个很好的了解。我的问题是：是否有可能在 HTML 中有类似 %username% 的内容，并且当 PHP 识别此文本时，它会输出用户名？即：将 %username% 转换为实际用户名？

这将如何完成，或者它是如何工作的？

提前感谢所有帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-30T12:33:21.573

这通常通过像**Smarty这样的****模板引擎**来完成。参见[smarty.net的下一个定义](http://smarty.net)

 **> **[什么是模板引擎，我为什么要使用它？](http://smarty.incutio.com/?page=SmartyFrequentlyAskedQuestions#basics-1)**
> 
> Smarty 是 PHP 的模板引擎。更具体地说，它有助于以一种可管理的方式将应用程序逻辑和内容与其表示分离。这最好在应用程序程序员和模板设计者扮演不同角色的情况下进行描述，或者在大多数情况下不是同一个人。例如，假设您正在创建一个显示报纸文章的网页。文章标题、标语、作者和正文是内容元素，它们不包含有关如何呈现的信息。它们由应用程序传递给 Smarty，然后模板设计者编辑模板并使用 HTML 标签和模板标签的组合来格式化这些元素的表示形式（HTML 表格、背景颜色、字体大小、样式表等）。) 有一天程序员需要改变获取文章内容的方式（应用程序逻辑的改变）。这种改变不会影响模板设计者，内容仍然会完全一样地到达模板中。同样，如果模板设计者想要完全重新设计模板，这不需要更改应用程序逻辑。因此，程序员可以对应用程序逻辑进行更改而无需重构模板，模板设计者可以对模板进行更改而不破坏应用程序逻辑。这不需要更改应用程序逻辑。因此，程序员可以对应用程序逻辑进行更改而无需重构模板，模板设计者可以对模板进行更改而不破坏应用程序逻辑。这不需要更改应用程序逻辑。因此，程序员可以对应用程序逻辑进行更改而无需重构模板，模板设计者可以对模板进行更改而不破坏应用程序逻辑。

除了 smarty 之外，还有许多其他的模板引擎，只需 google 即可。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T12:21:32.750

是的，像这样：

```
<?
$username = "However you get your username";
// other serverside logic
?>

<HTML>
    <BODY>
        <? echo $username; ?>
    <BODY>
</HTML> 
```

它不会变得更短。

这只是一个回声声明，我认为我不需要解释。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T12:34:26.873

有更多选项可以实现这一点 - 您可以使用 php.ini 选项[`short_open_tag`](http://de2.php.net/manual/en/ini.core.php#ini.short-open-tag)来使用`<?=$varname ?>`语法。您还可以使用 php.ini 选项`asp_tags`用于`<%=$var %>`var 输出。

但我认为最好的选择是使用像[Smarty](http://www.smarty.net/)这样的模板引擎。使用模板引擎，您可以严格分离设计和代码逻辑。**

# magento - Select only certain colors for a product in Magento

> ID：14090658
> 
> 赞同：1
> 
> 时间：2012-12-30T12:19:36.683
> 
> 标签：magento, colors, attributes, selection

I just downloaded Magento and was playing with the product attributes. Is there a way to make a product only show specific colors that are available in inventory. Say Shirt one only comes in red, white and blue.

Is there a way to only show these colors to be available in the shopping cart? Or do I have to create unique color attributes for each item?

I know the color list is quite extensive and I can see adding a couple colors, but not all will be needed for each product.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T14:24:44.707

您需要创建一个可配置的产品。

为此，您需要创建可用于可配置类型产品的属性“颜色”。

创建后，您可以使用此属性来定义您的产品详细信息，包括颜色。有关更多详细信息，请参阅[此](http://www.magentocommerce.com/knowledge-base/entry/tutorial-creating-a-configurable-product)链接。

# windows - passing parameters to file uri

> ID：14090667
> 
> 赞同：0
> 
> 时间：2012-12-30T12:21:16.433
> 
> 标签：windows, uri, parameter-passing

im trying to mail localy the software with the input parameters so software will be opened up with the contex data.

is there a way to mail the link to open the software ? tried the uri, which allows to open the software with file://

however the uri does not seem to handle parameters. do you know how?

Is it possible to pass parameters to

```
File://C:\folder\a.exe value1 value2 
```

?

if this is not the syntax, what is the currect syntax?

assuming this is a local system.

# php - 在mysql数据库中保存股票报价太慢

> ID：14090676
> 
> 赞同：0
> 
> 时间：2012-12-30T12:22:49.477
> 
> 标签：php, mysql, csv, stockquotes

目前我正在尝试通过加载雅虎的 csv 文件来保存库存数据。我创建了一个名为 stock 的数据库，其中包含 NASDAQ/NYSE/AMEX 的股票代码名称作为表格（大约 6,5 K 个表格）。问题是我得到的数据的保存时间太长了。我想在 1 分钟内加载并保存数据。加载大约需要 30 秒，节省大约 3 分钟。我必须减少保存时间。这是我为获取和保存数据而编写的脚本：

```
 include('mysql_connect.php');

 $ticker=array();
 $db="stocks";
 $res=mysql_query("SHOW TABLES FROM $db");
 while($row=mysql_fetch_array($res,MYSQL_NUM)){
    $ticker[]=$row[0];
 }

 $ticker_length=count($ticker);
 $steps=floor($ticker_length/200);

for($j=0;$j<=$steps;$j++){
    $ticker_url="";
    if($j<$steps){
        for($i=$j*200;$i<($j+1)*200;$i++){
            if($i==(($j+1)*200)-1){
                $ticker_url=$ticker_url.$ticker[$i];
            }else{
                $ticker_url=$ticker_url.$ticker[$i]."+";
            }
        }

    $url="http://finance.yahoo.com/d/quotes.csv?s='$ticker_url'&f=snxab2l1va2p2opm3m4ghd1t1=.csv";
    $filehandle=fopen("$url","r");
    while(!feof($filehandle)){

        $line=fgetcsv($filehandle,1024);
        if( $line[0]=="" || $line[0]==null || !isset($line[0]) ){
            //echo"Leer<br/>";
        }else{
            $Symbol=strtolower($line[0]);
            $Name=$line[1];
            $LastTradePriceOnly=$line[5];
            $Volume=$line[6];

                    $query=mysql_query("INSERT INTO $Symbol(symbol,Name,LastTradePriceOnly,Volume) 
                    VALUES('$Symbol','$Name','$LastTradePriceOnly','$Volume')");
        }

     }
     fclose($filehandle);   

    }else{
        for($i=$j*200;$i<$ticker_length;$i++){
            if($i==$ticker_length-1){
                $ticker_url=$ticker_url.$ticker[$i];
            }else{
                $ticker_url=$ticker_url.$ticker[$i]."+";
            }
        }

    $url="http://finance.yahoo.com/d/quotes.csv?s='$ticker_url'&f=snxab2l1va2p2opm3m4ghd1t1=.csv";
    $filehandle=fopen("$url","r");
    while(!feof($filehandle)){

        $line=fgetcsv($filehandle,1024);
        if( $line[0]=="" || $line[0]==null || !isset($line[0]) ){
            //echo"empty<br/>";
        }else{
            $Symbol=strtolower($line[0]);
            $Name=$line[1];
            $LastTradePriceOnly=$line[5];
            $Volume=$line[6];

                    $query=mysql_query("INSERT INTO $Symbol(symbol,Name,LastTradePriceOnly,Volume) 
                    VALUES('$Symbol','$Name','$LastTradePriceOnly','$Volume')");
        }

     }
     fclose($filehandle);
    }
} 
```

所以现在我想知道：

1.  有没有办法通过更改脚本更快地保存？
2.  我知道有可能配置 mysql 设置，如 buffer_size 等。我该怎么做以及我必须改变什么？
3.  如果这是我需要的节省时间，我无法使用 mysql，还有什么替代方案？

得到一些帮助会很高兴。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T01:00:26.520

我找到了解决方案。Mysql 允许您从 csv 中保存行和列，而无需读取复杂循环中的行：

```
 $url = "http://finance.yahoo.com/d/quotes.csv?s=AAPL+MSFT+GOOG&f=...the datas you need=.csv";

    $sql = "LOAD DATA LOCAL INFILE '" . $url . "' 
    INTO TABLE `" . $data_tablename . "` 
    FIELDS 
    TERMINATED BY ',' 
    OPTIONALLY ENCLOSED BY '\"' 
    LINES 
    TERMINATED BY '\n' 
    (`your_cols`,``,.....)";

     mysql_query($sql)or die(mysql_error()); 
```

我的脚本在服务器上花了我 250 秒，但现在只花了 45 秒。惊人的时间收益......

# ios - 无法从 uitablecell 打开视图控制器

> ID：14090680
> 
> 赞同：0
> 
> 时间：2012-12-30T12:23:33.877
> 
> 标签：ios, uitableview

我有一个 uitableview，我想在按下它时打开一个新的 viewController。

我正在使用在其他类中有效的代码，但在这个类中没有。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    NSLog(@"Row selected:%d",indexPath.row);
    UIStoryboard * storyBoard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
    [[self navigationController] pushViewController:[storyBoard instantiateViewControllerWithIdentifier:@"SingleCamera"] animated:YES];

} 
```

我不知道为什么，因为这是我迄今为止使用的代码。它不会播放我输入的任何标识符，它不会去任何地方。

我也试过这个：

```
[self performSegueWithIdentifier:@"SingleCamera" sender:tableView]; 
```

但我收到`NSInvalidargument`错误

编辑：我的项目的结构是这样的：我有一个导航控制器和一个初始视图 A。从视图 A，我将使用完全相同的代码查看 B。从视图 B 我要查看 C，在故事板内部使用 segue 模式模式，在视图 C 中是使用上述代码的 tableviewcontroller。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T12:34:17.407

改为这样写：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    NSLog(@"Row selected:%d",indexPath.row);
    UIViewController *viewController = [self.storyboard instantiateViewControllerWithIdentifier:@"SingleCamera"];
    [[self navigationController] pushViewController:viewController animated:YES];
} 
```

并在该行设置断点`pushView...`以查看 viewController 是否已实例化。

**编辑：**

关于`performSegue...`, 让你在故事板中有那个 segue。

# css - div之间的自动间距

> ID：14090682
> 
> 赞同：2
> 
> 时间：2012-12-30T12:23:51.303
> 
> 标签：css, html

我必须创建一个带有大 div（灰色）和附近有许多 div（黑色）的网页（向左浮动）。

![](../Images/318bd6c57bd8a7e8bc2d55e08a5b3a76.png)

目前我正在使用`margin-right`分隔黑色 div 的边距 ( )。（我不介意灰色的 div，因为它已经完成了。）我的问题是每一行最正确的 div 不能有，`margin-right`因为我没有更多的空间给它。我无法`margin-right: 0`为它们创建特定的类 ( )，因为所有黑色 div 都将被动态添加。我的问题有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T12:36:45.983

[http://jsfiddle.net/aFkfm/1/](http://jsfiddle.net/aFkfm/1/)

HTML：

```
<div id="wrapper">
  <div id="big"></div>
  <span></span>
  <span></span>
  ....
</div> 
```

CSS：

```
div#wrapper {
    margin-left: -20px;
}
div#big {
    float: left;
    width:  220px;
    height: 220px;
    margin-left: 20px;
}
span {
    float: left;
    width: 100px;
    height: 100px;
    margin-left: 20px;
    margin-bottom: 20px;
}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T12:42:38.077

我会在所有盒子上设置相同的边距（比如`margin: 5px`），然后简单地`margin: -5px`在容器上：http: [//jsfiddle.net/ZKJeN/](http://jsfiddle.net/ZKJeN/)

```
body {
    background: #f3f3f3;
    padding: 15px;
}

/* Container */
ul {
    width: 300px;
    overflow: hidden; /* Clearfix */
    margin: -5px; /* To compensate for the 5px margin around each box */
    list-style: none;
}

    /* Small */
    ul li {
        background: #fff;

        float: left;
        width: 40px;
        height: 40px;
        margin: 5px;

        border: 5px solid #000;
    }

    /* Big */
    ul li:first-child {
        width: 100px;
        height: 100px;
    } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-30T12:34:56.760

您可以使用[nth-child 选择器](http://www.w3schools.com/cssref/sel_nth-child.asp)设置它们的样式。它有一个特殊的形式`(an+b)`，其中`a`是循环大小并且`b`是偏移量。

```
.blackboxes:nth-child(3n+0) {margin-right:0}
.blackboxes:nth-child(5n+6) {margin-right:0}
.blackboxes:nth-child(3n+6) {margin-right:5px} 
```

你可能需要把 6 变成 7 才能把事情做好。

请注意，最终样式旨在覆盖第一个有效隔离第一组六个黑框的样式。

# c++ - 在win7-64bit中通过mingw用boost.python编译一些代码

> ID：14090683
> 
> 赞同：2
> 
> 时间：2012-12-30T12:24:17.823
> 
> 标签：c++, python, boost, mingw, boost-python

我决定让我的程序与windows环境兼容。但是我在windows上的编程经验很少。有一些错误需要帮助。

环境：

*   操作系统：win7-64位，
*   ide：codeblocks12.11，
*   python: Python 2.7.3 Windows X86-64 安装程序（Windows AMD64 / Intel 64 / X86-64 二进制 [1] -- 不包括源代码）
*   编译器：来自codeblocks安装包的mingw。
*   升压：升压1.52

我只复制和测试来自“.\boost_1_52_0\libs\python\example\tutorial”的这个“hello”代码

代码：

```
#include <iostream>
#include <boost/python/module.hpp>
#include <boost/python/def.hpp>

char const* greet()
{ return "hello, world"; }

BOOST_PYTHON_MODULE(hello_ext)
{
    using namespace boost::python;
    def("greet", greet);
}

using namespace std;
int main()
{
    cout << "Hello world!" << endl;
    return 0;
} 
```

错误信息：

```
mingw32-g++.exe -Wall -fexceptions  -g  -ID:\boost\include\boost-1_52 -IC:\Python27\include  -c E:\project\snail-MW\test1\main.cpp -o obj\Debug\main.o
mingw32-g++.exe -LD:\boost\lib\ -LC:\Python27\libs  -o bin\Debug\test1.exe obj\Debug\main.o  
obj\Debug\main.o: In function `inithello_ext':
E:/project/snail-MW/test1/main.cpp:11: undefined reference to `boost::python::detail::init_module(char const*, void (*)())'
obj\Debug\main.o: In function `ZNK5boost6python9type_info4nameEv':
D:/boost/include/boost-1_52/boost/python/type_id.hpp:165: undefined reference to `boost::python::detail::gcc_demangle(char const*)'
obj\Debug\main.o: In function `ZNK5boost6python15to_python_valueIRKPKcEclES5_':
D:/boost/include/boost-1_52/boost/python/converter/builtin_converters.hpp:161: undefined reference to `boost::python::converter::do_return_to_python(char const*)'
................ 
```

它也有一些错误，只能通过“.\boost_1_52_0\libs\python\example\tutorial”站中的“bjam toolset=gcc variant=release”命令编译。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-30T20:30:37.563

你得到了路径，但你没有链接到 boost 和 python 库：

```
-lboost_python -lpython27 
```

此外，您正在尝试创建一个可执行文件（这就是为什么您必须`main()`在示例中添加 a 才能编译它）。对于 python 模块，您想要创建一个共享库，与`BOOST_PYTHON_MODULE(...)`宏定义的名称匹配。这些模块的扩展应该是`.pyd`.

```
-shared -o hello_ext.pyd 
```

如果链接器找不到 boost_python 库，请检查您的 boost 库目录。根据您的安装，您应该有一个 `libboost_python.a`或`libboost_python-mgw??-mt-1_??.a`。如果找不到类似的东西，则必须先构建它们。您应该决定是要构建静态库还是共享库。更多细节[在这里](http://www.boost.org/doc/libs/1_52_0/libs/python/doc/building.html)。

```
c:\boost_1_52> b2 toolset=gcc --with-python 
```

如果 boost 找不到您的 python 安装，这将失败。要配置（通常是非标准位置）python，请编辑`user-config.jam`. 这可能在您的`%HOMEDRIVE%%HOMEPATH%`或`boost_1_52_0\tools\build\v2`. 在该文件中找到`Python configuration`并设置正确的路径（如果 python 安装在默认位置，则不需要此步骤）。语法是：

```
using python : python_version : python_base : python_incl : python_lib ; 
```

例如：

```
using python : 2.7 : c:/Python27 : c:/Python27/include : c:/Python27/libs ; 
```

如果您选择构建静态 boost python 库，则在链接程序时可能会遇到其他错误。如果是这种情况，您必须表明您想要链接到静态库：

```
-DBOOST_PYTHON_STATIC_LIB 
```

最后，编译器可能会抱怨`::hypot`没有被声明。为了解决这个问题，`#include <cmath>`在包含 boost/python 标头之前。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-03T16:06:25.833

为了使教程在 Boost 1_60_0 上运行，在 Windows 7 上，使用 64 位 mingw gcc（版本 4.8.1），我需要在 msys shell 中使用命令：

```
rm -rf bin.v2/libs/python stage/lib/libboost_python-mgw48-*
./b2.exe toolset=gcc define=MS_WIN64 --with-python link=static 
```

制作boost python库。此命令应在 Boost 根目录中执行。请注意，如果没有`define=MS_WIN64`我得到未定义的错误，`__imp_py_InitModule4`如[Python extensions for Win64 via GCC](https://stackoverflow.com/questions/3778370/python-extensions-for-win64-via-gcc)所示。

之后，编译 Python boost 教程就很简单了：

```
g++ hello.cpp -I /c/projects/boost_1_60_0/ -I /c/prog64/Python27/include -DBOOST_PYTHON_STATIC_LIB  /c/projects/boost_1_60_0/stage/lib/libboost_python-mgw48-mt-1_60.a /c/prog64/Python27/python27.dll -DMS_WIN64 -shared -o hello_ext.pyd 
```

这也适用于 Boost 1_54_0

# iphone - I want to update my universal app to iPad only app in itunes connect. But while submitting binary i am getting following error

> ID：14090687
> 
> 赞同：6
> 
> 时间：2012-12-30T12:25:39.557
> 
> 标签：iphone, ios, ipad, ios5, plist

![enter image description here](../Images/41ee17117ee9726acc446af240d8858d.png)

But when i added my device target as universal. then binary of app is validated successfully. Please let me know if you have any solution. Really needfull.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-30T12:31:52.743

这是不可能的。如果您发布了一次支持 iPhone 的应用程序，则所有更高版本也需要支持 iPhone。

对于仅限 iPad 的应用程序，您需要将其发布为具有不同名称和标识符的新应用程序名称。但是，正如您可能知道的那样，您可能会失去很多用户。

另见：

*   [苹果技术问答 QA1623](http://developer.apple.com/library/ios/#qa/qa1623/_index.html)
*   [App Store：UIRequiredDeviceCapabilities 的问题](https://stackoverflow.com/questions/3752025/app-store-problem-with-uirequireddevicecapabilities)

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-12-30T12:39:34.460

你需要改变两件事：

1) 目标设备系列只能是 iPad

2）部署目标必须与iPad兼容（现在至少4.3）。

之后我会说做一个清洁，然后构建和分析以确保一切正常。

# android - 当 CursorLoader 的构造函数不支持时，如何在 CursorLoader 中使用连接查询

> ID：14090695
> 
> 赞同：22
> 
> 时间：2012-12-30T12:26:58.213
> 
> 标签：android, sqlite

我有两个具有 1:n 关系的表，我正在使用内容提供程序和 cursorloader。

我将如何进行连接查询以使用游标加载器？我可以在内容提供程序中使用 rawSql 以某种方式破解它，但是如何在游标加载器构造函数中做到这一点超出了我的范围。

非常感谢 ！

**CursorLoader（上下文上下文，Uri uri，String[] 投影，String 选择，String[] selectionArgs，String sortOrder）**

当 Uri 只能指向一个表时如何查询连接

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-12-30T12:53:34.530

`Uri`不指向任何表。它指向你想要指向的任何东西。

让我们假设你的两张桌子是`Customer`and `Order`。一位客户可能有很多订单。您想要执行查询以获取所有未完成的订单……但您想要加入一些您需要的与客户相关的列，例如客户的姓名。

让我们进一步假设您已经拥有`content://your.authority.goes.here/customer`并`content://your.authority.goes.here/order`定义为纯粹查询这些表。

你有两个选择：

1.  在您的`/order` `Uri`. 拥有另一个可用列可能不会破坏提供者的任何现有消费者（尽管测试总是一个好主意）。这就是`ContactsContract`它的作用——它在几乎所有表的所有查询中加入一些基本列，例如联系人的姓名。

2.  创建`content://your.authority.goes.here/orderWithCust`它执行相同的基本查询`/order`，但包含您的联接。在这种情况下，您可以使用`insert()`,`update()`并`delete()`抛出某种`RuntimeException`, 来提醒您不应该使用`/orderWithCust`as来修改数据`Uri`。

最后，设计一个`ContentProvider` `Uri`系统类似于设计一个 REST Web 服务的 URL 系统。在这两种情况下，连接都必须在提供者/服务器端完成，因此您可能需要打破单表对一 URL 基线以提供一些有用的连接。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-12-13T23:11:28.443

我找到了使用 ContentProvider 子类的解决方案。假设您有表 tblA 和另一个表 tblB。我建议创建两个类“AContentProvider”和“BContentProvider”。最重要的是，确保两个表都设置在同一个数据库中。

解决方案的主要部分是覆盖 ContentProvider 中的 ContentProvider.query() ，您将从 CursorLoader 调用 - URI 决定它是哪一个：

```
@Override
public Cursor query(Uri uri, String[] projection, String selection, String[] selectionArgs, String sort) {
    SQLiteQueryBuilder qb = new SQLiteQueryBuilder();

    qb.setTables(
            "tblA LEFT JOIN tblB"
                    + " ON ("
                    + "tblA.b_id"
                    + " = "
                    + "tblB.id"
                    + ")"
    );

    ...
    // Content of projection is set by CursorLoader
    // usually in an Activity that implements LoaderManager.LoaderCallbacks<>

    Cursor c = qb.query(
            database,
            projection,
            selection,
            selectionArgs,
            groupBy,
            having,
            orderBy
    );

    ...
    return c;
} 
```

如您所见，**JOIN 是在 setTables() 中完成的**。使用**投影**，您可以确保只显示您真正需要的列，最重要的是，您没有重复的列，例如两个表中的“id”：

```
final String[] projection = new String[] {
        "tblA.*",
        "tblB.columnThatOnlyBHas"
}; 
```

利用覆盖并尝试在子类中完成尽可能多的工作；例如：如果游标结果集发生更改，我所有的覆盖 query() 方法都会调用 setNotificationUri() 来通知 ContentResolver。：

```
c.setNotificationUri(getContext().getContentResolver(), uri); 
```

# linux - How can I keep a Free Pascal console application running "forever"?

> ID：14090697
> 
> 赞同：6
> 
> 时间：2012-12-30T12:27:20.913
> 
> 标签：linux, freepascal

In a Linux Free Pascal 2.6.0 console application, a HTTP server is started and runs in a separate thread, so the call to Start will immediately return.

```
begin
  ...
  MyHTTPServer.Start;
  ...
  WriteLn('Application terminated');
end; 
```

To keep the console from closing I could use a simple endless loop like:

```
// wait, read and ignore input from stdin
while True do ReadLn; 
```

or

```
// Sleep as long as possible
while True do Sleep(MaxInt); 
```

Which one would you prefer? Or is there a better way to keep the application running?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T20:30:32.383

这是一个*非常*好的问题，我不知道为什么人们会否决它。从我上来一个。

这不仅仅是永远等待的问题（而 checkforsomeevent do sleep(10); 将在 checkforsomeevent 检查您想要终止的任何事件时执行此操作，如果您不这样做，则为 TRUE。由于线程无事可做，因此睡眠（0）似乎浪费资源）

更大的问题是，Windows 将终止长时间运行的控制台程序，这些程序会在一段时间后初始化线程支持，因为它认为它们“挂起”。

我不完全确定这是在（墙上）运行时间或 CPU 资源上。

Free Pascal 帮助编译器 chmcmd 可以运行很长时间（几分钟，因为它正在压缩 html）。它支持 *nix 上的线程，但我从来没有让它在 Windows 下正常工作。（不可否认，由于 chmcmd 主要用于 *nix，它不是一个高优先级项目）

我当时研究了一下，看来您必须注册一个窗口句柄并处理消息以避免这种情况。我试过这个但失败了，并且找不到补丁 atm，它可能在我的工作系统上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T13:01:34.173

在 Linux 上，您可以调用[`pause()`](http://www.kernel.org/doc/man-pages/online/pages/man2/pause.2.html)哪些块，直到收到信号。因此，您需要调用`pause()`is 一个循环。这比睡眠的优点是您的进程可以被终止信号终止。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T13:07:13.177

如何创建 HTTP 服务器？如果您使用的是 TFPHTTPServer，则在明确销毁或崩溃之前，它永远不会关闭。

# c++ - 哈希溢出

> ID：14090698
> 
> 赞同：0
> 
> 时间：2012-12-30T12:27:22.837
> 
> 标签：c++, hash, integer-overflow

```
int hash (const string &key, int tableSize) {
   int hashVal = 0; 

   for (int i = 0; i < key.length(); i++)
        hashVal = 37*hashVal + key[i]; 
   hashVal %= tableSize; 
   if (hashVal < 0)   /* in case overflows occurs */
        hashVal += tableSize; 

   return hashVal;      
}; 
```

为什么我们要控制 hashVal 是否小于零？这怎么可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T12:34:22.267

您可以在变量 hashVal 中溢出。这（有时）会导致负值。例如，尝试在 C++ 程序中打印 3 * 1000 * 1000 * 1000 的值：

```
std::cout << 3 * 1000 * 1000 * 1000; 
```

在我的计算机上，使用我的编译器，它会打印 -1294967296。

结果 3000000000 是二进制的 10110010110100000101111000000000，但由于在这个特定平台上整数是 32 位，并且我们使用二进制补码方法来表示负数，所以这个位模式表示负数。

该标准将整数溢出定义为未定义的行为，因此实际上任何事情都可能发生，但这是典型的效果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T12:38:27.177

如果字符串足够长，代码：

```
for (int i = 0; i < key.length(); i++)
    hashVal = 37*hashVal + key[i]; 
```

可能会导致 的值`hashVal`超过 an 的最大值`int`（通常类似于 2 ^(31) - 1）并变为负数。这称为[整数溢出](http://en.wikipedia.org/wiki/Integer_overflow)。

C++ 标准[没有规定](https://stackoverflow.com/questions/7594508/modulo-operator-with-negative-values)负操作数的操作符的值`%`是正数还是负数；因此，根据您的编译器和 CPU 架构（以及可能的编译时开关），表达式 like`-47 % 37`可能会计算为`-10`or 或`27`. 因此，您引用的代码通过在结果为负数时将模数添加到结果中来防止前一种可能性。

顺便说一句，避免此问题的更简单方法是将定义`hashVal`为无符号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T12:38:37.353

如果 key 足够长，`hashVal`value 可能会变为负数。您可以尝试不同长度的字符串（例如“1”、“11”、“111”、“1111”等），看看哪里`hashVal`会变成负数（大约 5-7 个字符就足够了）。

然后你尝试得到负数的模，这也是负数。但是您不能指向负数组索引（似乎，此函数计算要存储的字符串的位置），因此您将其设为正并且适合作为数组索引。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-30T12:41:03.417

`hashVal`在`for`循环中变得越来越大，它很容易变得大于`signed int`最大值，这取决于平台。如果`hashVal`在`for`循环之后为负，则在操作符之后可能仍然为负`%=`，这也是平台相关的（在某些情况下，它总是返回非负值，而它也可能返回负值）然后，您需要在`hashVal`之后检查是否为负。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-30T12:45:58.220

尝试通过以下方式调用您的哈希函数

```
hash("HelloHello",100); 
```

然后单步执行程序或在散列函数中打印一条消息，以查看散列是否低于 0。

例如，在`for`循环中你可以放

```
if(hashVal < 0)
{
    cout<<"OVERFLOW HAS HAPPENED\n";
    break;
} 
```

你会看到 hashVal 低于 0。

# android - 动画翻译视图到屏幕边缘

> ID：14090700
> 
> 赞同：2
> 
> 时间：2012-12-30T12:27:33.297
> 
> 标签：android, android-animation

我试图将视图从其位置动画到屏幕边缘，并将`100%p`视图移出屏幕，

![所需的动画](../Images/cabef596ea6a94f0389e2f771f067481.png)

该图像描述了所需的动画，对于任何要求代码的人：

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android"
    android:duration="1000"
    android:fillAfter="true" >

    <translate
        android:fromXDelta="0%"
        android:toXDelta="100%" />

</set> 
```

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-30T14:21:53.193

来自[安卓文档](http://developer.android.com/guide/topics/resources/animation-resource.html)：

> 机器人：toXDelta
> 
> 浮动或百分比。结束 X**偏移量**。表示为：相对于正常位置的像素（如“5”），**相对于元素宽度**的百分比（如“5%”），或**相对于父宽度**的百分比（如“5%p” ）。

假设您的按钮宽度是其父宽度的 20%，您必须将 toXDelta 指定为

`50%p-(20%p/2) = 40%p`

此解决方案的问题在于，您可能不知道按钮宽度为“其父宽度的百分比”（不确定，因为您没有发布 xml）。所以我建议以编程方式定义你的动画。

# java - 编组时 JAXB @XMLREFID 不存储 @XMLID 字段

> ID：14090704
> 
> 赞同：1
> 
> 时间：2012-12-30T12:27:59.887
> 
> 标签：java, xml, jaxb, marshalling

我有一个类（Bundle），其中包含对 Bundle 的“父”实例的引用。这用于记录新 Bundle 是从哪个对象“复制”的。此类包含在另一个类 (Main) 的 List<> 中，并且它本身包含一个 (不同) 子类 (Elements) 的 List<>。

保存到 XML 时，引用属性包含来自父 Bundle 中包含的元素的 ID，而不是父 Bundle 的 ID。

我的问题是如何让 Bundle.parent 在 XML 中显示为 Bundle.id？

代码片段如下，所有类都是 FIELD 访问器。

```
public class Element {
    @XmlID
    @XmlAttribute
    public String id;
}

public class Bundle extends AbstractList<Element> {
    @XmlID
    @XmlAttribute
    public String id;

    @XmlElementWrapper
    @XmlElemet(name = "element")
    @XmlIDREF
    public List<Element> elements;

    @XmlElement
    public Bundle parent;
}

public class Main AbstractList<Bundle> {
    @XmlAttribute
    @XmlID
    public String id;

    @XmlElementWrapper
    @XmlElement(name = "bundle")
    public List<Bundle> bundles; 

    @XmlElementWrapper
    @XmlElement(name = "masterBundle")
    static final public List<Bundle> masterBundles; 
}

final JAXBContext jc = JAXBContext.newInstance(Main.class); 
```

Bundle.parent 字段通常是从一个Bundle in bundles 到一个Bundle in masterBundles。这是一个示例输出：

```
<masterBundles>
    <bundle id="999594e2-043d-45ed-9ee3-34b11e6297fd" name="Bundle1">
        <elements>
            <element>4501a2e5-05af-4760-92be-29dacb2e2d70</element>
            <element>449cec85-7eb7-4ba9-b03e-2b5708bee076</element>
        </elements>
    </bundle>
</masterBundles>
<bundles>
    <bundle id="7e07ae32-2bcc-49db-be0b-f04ab53f75e0" name="New Bundle">
        <elements>
            <element>4501a2e5-05af-4760-92be-29dacb2e2d70</element>
            <element>449cec85-7eb7-4ba9-b03e-2b5708bee076</element>
        </elements>
        <parent>4501a2e5-05af-4760-92be-29dacb2e2d70</parent>
        <parent>449cec85-7eb7-4ba9-b03e-2b5708bee076</parent>
    </bundle>
</bundles> 
```

**更新：** 我想我发现了问题，JAXB 将父元素视为一个集合（它就是这样），所以正在转储集合的所有成员！恼人的。

# android - 自定义时钟小部件在 android 4.1.2 中不起作用

> ID：14090705
> 
> 赞同：0
> 
> 时间：2012-12-30T12:28:23.530
> 
> 标签：android, android-widget

我在以下链接中获得了一个自定义模拟时钟小部件示例。 [https://github.com/xxv/24hAnalogWidget](https://github.com/xxv/24hAnalogWidget)

它适用于除 android4.1.2 之外的所有 android 版本。

它没有显示任何错误，所以我找不到这有什么问题。谁能告诉我有什么问题？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T07:09:19.480

我没有发现您提供的自定义小部件有任何问题。我使用设备和模拟器对其进行了测试

如果你想尝试一些不同的东西[看这个](https://github.com/RonzyFonzy/ClockWidget)

# c# - 使用 ArrayAdaptor 时出现 ResourceNotFound 异常

> ID：14090717
> 
> 赞同：1
> 
> 时间：2012-12-30T12:31:09.357
> 
> 标签：c#, mono, xamarin.android, android-arrayadapter

有一个 ListAdapter 的噩梦。我已经阅读了有关如何实例化 ListView 的所有代码。我肯定会将有效 TextView 的 id 传递给 ListView.Adaptor。

现在代码执行良好，并最终成功地离开了 LoadAllStats() 函数和周围的 trycatch。然后一切都以 Unexpected stop -> Force Close 对话框爆炸。

Logcat 表示抛出的异常是 ResourcesNotFoundException。它声称文本视图无效，但它绝对是一个文本视图，并且我已经使用已在其他控件中成功使用的文本视图对其进行了测试，所以我不知道这里到底发生了什么。

有任何想法吗？（在我砸烂我的安卓手机之前？）

谢谢。

```
namespace Project
{    
    [Activity(Label="History")]
    public class HistoryFileDialog : Activity
    {
        ListView ItemList;
        ADatabase<Stats> Database;
        List<Stats> History;

        protected override void OnCreate(Bundle savedInstanceState)
        {
            base.OnCreate(savedInstanceState);

            SetContentView(Resource.Layout.HistoryWnd);

            ItemList = FindViewById<ListView>(Resource.Id.ListView);
            ItemList.ItemClick += new EventHandler<AdapterView.ItemClickEventArgs>    (ItemList_ItemClick);

        ItemList = FindViewById<ListView>(Resource.Id.ListView);

        string Path = Globals._SDROOT + Globals._PROFILEDIR + "user" + "//progress.profile";
        LoadAllStats(Path);
    }

    private void LoadAllStats(string HistoryDBasePath)
    {
        this.Database = new ADatabase<Stats>(this.ApplicationContext,
            HistoryDBasePath);

        List<Stats> All = Database.ReadAll();
        this.History = new List<Stats>(All.Count);

        string[] Test = new string[] { "work", "you", "goddamn", "list", "adapter" };

        try
        {
   // just some test data for the adaptor.
            ItemList.Adapter = new ArrayAdapter<String>(this, Resource.Id.Output, Test);
        }
        catch (Exception e)
        {
            string Foo = e.StackTrace;
        }
    }
} 
```

}

```
Full Logcat = 
12-30 02:01:56.948: E/AndroidRuntime(16400): FATAL EXCEPTION: main
12-30 02:01:56.948: E/AndroidRuntime(16400): android.content.res.Resources$NotFoundException: Resource ID #0x7f050026 type #0x12 is not valid
12-30 02:01:56.948: E/AndroidRuntime(16400):    at android.content.res.Resources.loadXmlResourceParser(Resources.java:1892)
12-30 02:01:56.948: E/AndroidRuntime(16400):    at android.content.res.Resources.getLayout(Resources.java:740)
12-30 02:01:56.948: E/AndroidRuntime(16400):    at android.view.LayoutInflater.inflate(LayoutInflater.java:318)
12-30 02:01:56.948: E/AndroidRuntime(16400):    at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:332)
12-30 02:01:56.948: E/AndroidRuntime(16400):    at android.widget.ArrayAdapter.getView(ArrayAdapter.java:323)
12-30 02:01:56.948: E/AndroidRuntime(16400):    at android.widget.AbsListView.obtainView(AbsListView.java:1430)
12-30 02:01:56.948: E/AndroidRuntime(16400):    at android.widget.ListView.measureHeightOfChildren(ListView.java:1307)
12-30 02:01:56.948: E/AndroidRuntime(16400):    at android.widget.ListView.onMeasure(ListView.java:1127)
12-30 02:01:56.948: E/AndroidRuntime(16400):    at android.view.View.measure(View.java:8510)
12-30 02:01:56.948: E/AndroidRuntime(16400):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3202)
12-30 02:01:56.948: E/AndroidRuntime(16400):    at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1017)
12-30 02:01:56.948: E/AndroidRuntime(16400):    at android.widget.LinearLayout.measureVertical(LinearLayout.java:386)
12-30 02:01:56.948: E/AndroidRuntime(16400):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:309)
12-30 02:01:56.948: E/AndroidRuntime(16400):    at android.view.View.measure(View.java:8510)
12-30 02:01:56.948: E/AndroidRuntime(16400):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3202)
12-30 02:01:56.948: E/AndroidRuntime(16400):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
12-30 02:01:56.948: E/AndroidRuntime(16400):    at android.view.View.measure(View.java:8510)
12-30 02:01:56.948: E/AndroidRuntime(16400):    at android.widget.LinearLayout.measureVertical(LinearLayout.java:531)
12-30 02:01:56.948: E/AndroidRuntime(16400):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:309)
12-30 02:01:56.948: E/AndroidRuntime(16400):    at android.view.View.measure(View.java:8510)
12-30 02:01:56.948: E/AndroidRuntime(16400):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3202)
12-30 02:01:56.948: E/AndroidRuntime(16400):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
12-30 02:01:56.948: E/AndroidRuntime(16400):    at android.view.View.measure(View.java:8510)
12-30 02:01:56.948: E/AndroidRuntime(16400):    at android.view.ViewRoot.performTraversals(ViewRoot.java:871)
12-30 02:01:56.948: E/AndroidRuntime(16400):    at android.view.ViewRoot.handleMessage(ViewRoot.java:1939)
12-30 02:01:56.948: E/AndroidRuntime(16400):    at android.os.Handler.dispatchMessage(Handler.java:99)
12-30 02:01:56.948: E/AndroidRuntime(16400):    at android.os.Looper.loop(Looper.java:143)
12-30 02:01:56.948: E/AndroidRuntime(16400):    at android.app.ActivityThread.main(ActivityThread.java:4196)
12-30 02:01:56.948: E/AndroidRuntime(16400):    at java.lang.reflect.Method.invokeNative(Native Method)
12-30 02:01:56.948: E/AndroidRuntime(16400):    at java.lang.reflect.Method.invoke(Method.java:507)
12-30 02:01:56.948: E/AndroidRuntime(16400):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
12-30 02:01:56.948: E/AndroidRuntime(16400):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
12-30 02:01:56.948: E/AndroidRuntime(16400):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T14:27:33.033

我的*猜测*是：

*   您正在使用标识符 id 而不是布局 id

或者

*   您的 resourceid 文件不知何故与 java 文件不同步。

* * *

要测试第一个，请尝试更改 ArrayAdapter 以使用如下构造函数：

```
 new ArrayAdapter<string>(this, Resource.Layout.list_item, Test); 
```

* * *

尝试测试第二个...

尝试全部重新构建，尝试删除生成的资源设计器 cs 文件，尝试添加更多控件，尝试对编译器大喊大叫，等等。

# android - 如何在JAVA中使编辑文本不可编辑但可点击

> ID：14090718
> 
> 赞同：100
> 
> 时间：2012-12-30T12:31:10.900
> 
> 标签：android, android-layout, android-edittext

是否可以使`EditText`可点击但不可编辑。

我不希望它是可编辑的（键盘也不应该出现，我们也不应该改变提示）

实际上，我只想将编辑文本用作带有提示（无法更改）的图像。我知道实际的方法是使用 an `ImageView`and one `TextView`，但我希望它尝试一下，`EditText`因为我将只使用一个视图而不是 2。而且每件事都是动态的，所以没有 XML。

对于上述要求，XML 中的解决方案是，`android:editable="false"`但我想在 Java 中使用它。

但，

如果我使用：-

```
et.setEnabled(false); 
```

或者

```
 et.setKeyListener(null); 
```

它使它`EditText`不可编辑，但同时它也使它不可点击。

* * *

## 回答 #1

> 赞同：184
> 
> 时间：2012-12-30T13:30:40.327

这里的诀窍是：-

```
et.setFocusable(false);
et.setClickable(true); 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2018-08-08T07:57:56.980

正如`editable`已弃用。您可以在设计 xml 时使用 none 或`android:inputType`在**编码中使用****InputType.TYPE_NULL**。

> 设计 XML

```
<android.support.v7.widget.AppCompatEditText
    android:id="@+id/edt"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:clickable="true"
    android:focusable="false"
    android:inputType="none"
    android:text="EditText"/> 
```

> 编码

```
edt.setClickable(true);
edt.setFocusable(false);
edt.setInputType(InputType.TYPE_NULL); 
```

下面是点击事件`edittext`

```
edt.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View v) {
        Toast.makeText(YourActivity.this,"edt click", Toast.LENGTH_LONG).show();
    }
}); 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2013-04-12T05:10:41.770

您可以`EditText`使用 java 代码作为休闲设置：-

```
edittext.setFocusable(false);
edittext.setClickable(true); 
```

或通过在 XML 文件中使用以下代码`EditText`。

```
android:editable="false" 
android:inputType="none" 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-12-30T14:17:44.510

你可以用这个..

```
android:focusableInTouchMode="false" 
```

使edittext在xml中不可编辑。对于可点击事件，您可以使用**setOnTouchListener（）**事件来做同样的事情......

```
editText.setOnTouchListener(new OnTouchListener() {

    @Override
    public boolean onTouch(View v, MotionEvent event) {
        // TODO Auto-generated method stub
                        //do your stuff here..
        return false;
    }
}); 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2017-06-20T10:55:49.400

**`Edittext`启用和禁用这样的编辑**

```
EditText edit = (EditText) findviewby(R.id.edittext); 
```

> 通过java代码

```
edit.setEnabled(false); //non editable
edit.setEnabled(true); //editable 
```

> 通过xml

```
<EditText
    android:id="@+id/otp_mpin"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:editable="false"
    android:focusable="false"/> 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2016-04-18T11:18:49.923

`android:editable`已弃用，但您可以像下面这样执行 stg：

```
android:editable="false"
android:focusable="false"
android:focusableInTouchMode="false" 
```

我将上面的 cade 用于编辑文本，我使用选择器在其中设置数据。您可以使用输入布局。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-05-31T23:40:37.320

自 2020 年起，如果您还关心可访问性，则应避免设置`et.setFocusable(false);`，因为这将使 EditText 无法使用键盘导航访问。

这是我的解决方案：

科特林

```
editText.isFocusableInTouchMode = false

editText.isLongClickable = false //this will prevent copy and paste

editText.setOnClickListener {
   // handle the click
   // this will automatically make the edittext clickable = true
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-03-26T10:52:44.117

对我来说，没有一个答案会产生一个完全可行的解决方案。

我的修复展示[https://www.youtube.com/watch?v=oUA4Cuxfdqc](https://www.youtube.com/watch?v=oUA4Cuxfdqc)

**指南（noob-friendly）**，请注意代码中的一些注释。

`EditText`为名为*EditTextDispatched.java*的自定义创建 Java 类

 *```
import android.content.Context;
import android.util.AttributeSet;
import android.view.MotionEvent;
import android.widget.RelativeLayout;

/**
 * @author Martin Pfeffer
 * @see <a href="https://celox.io">https://celox.io</a>
 */
public class EditTextDispatched extends android.support.v7.widget.AppCompatEditText {

    private static final String TAG = "DispatchingEditText";

    private boolean editable = true;

    public EditTextDispatched(Context context) {
        super(context);
    }

    public EditTextDispatched(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public EditTextDispatched(Context context, AttributeSet attrs, int defStyleAttr) {
        super(context, attrs, defStyleAttr);
    }

    // get the current state
    public boolean isEditable() {
        return editable;
    }

    // set your desired behaviour
    public void setEditable(boolean editable) {
        this.editable = editable;
    }

    @Override
    public boolean dispatchTouchEvent(MotionEvent motionEvent) {

        if (editable) {
            // default behaviour of an EditText
            super.dispatchTouchEvent(motionEvent);
            return true;
        }

        // achieve the click-behaviour of a TextView (it's cuztom)
        ((RelativeLayout) getParent()).onTouchEvent(motionEvent);
        return true;
    }

} 
```

在您的 xml 中引用`EditTextDispatched`（您必须更改 pgk 名称）：

```
 <io.celox.brutus.EditTextDispatched
    android:id="@+id/row_field_value"
    style="@style/row_field_text_display"
    android:layout_alignParentBottom="true"
    android:text="@string/sample_field_value" /> 
```

调用：

```
private void changeEditTextBehaviour(EditTextDispatched value, boolean editable) {
    value.setEditable(editable);
    value.setEnabled(editable);
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-01-21T09:36:11.427

也许你可以试试

```
editText.setEnabled(false); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-07-04T19:32:25.003

我知道这个问题已经得到解答，但为了提供更最新的（即 2018 年）答案，我使用设置来实现请求的（即非输入或可编辑）效果：

```
 val etUserLoc: EditText = themedEditText(R.style.Pale_Blue_Text_Bold_13) {
                id = R.id.et_comp_user_keys_var_user_location
                inputType = InputType.TYPE_NULL
                isClickable = true
                isFocusable = false
                textColor = resources.getColor(R.color.magenta)  // overrides the default theme color
                text = Editable.Factory.getInstance().newEditable(resources.getString(R.string.loc_swakopmund))
            }.lparams(width = matchConstraint, height = matchParent) {   } 
```

是的，这是 ANKO，因为我不再在我的任何 Android 项目中使用 XML。“inputType”负责“isEditable”弃用。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2016-09-22T07:20:28.743

你也可以`android:inputMethod="@null"`在你的`EditText`，它不会显示光标或键盘，然后你可以通过设置监听器轻松掌握点击。*

# c# - 如何在 C++ 中像 C# 中的委托一样使用回调？

> ID：14090719
> 
> 赞同：0
> 
> 时间：2012-12-30T12:31:11.277
> 
> 标签：c#, c++, delegates, callback, function-pointers

> **可能重复：** [什么是 C++ 委托？](https://stackoverflow.com/questions/9568150/what-is-a-c-delegate)

我需要在 C++中使用[回调，就像 C# 中的委托一样。](http://en.wikipedia.org/wiki/Callback_%28computer_programming%29)例如，在 C# 中，我们有：

```
...
      public delegate void SomeWorkhandeler(object Arg);
...
class A
{
    private SomeWorkhandeler doWork= null;
    public SomeWorkhandeler DoWork { get { return doWork; } set { doWork= value; } }
} 
```

现在，与此示例类似的 C++ 代码是什么？

# java - 获取子字符串并用java中的先前文本替换

> ID：14090721
> 
> 赞同：0
> 
> 时间：2012-12-30T12:31:26.927
> 
> 标签：java, string, replaceall

我通过 getWebsite() 从 bean 获取爬取的网站。我有时会得到网站[http://www.stackoverflow.com](http://www.stackoverflow.com)，有时会得到[http://stackoverflow.com](http://stackoverflow.com)。我的问题是我想用“info@st​​ackoverflow.com”替换 setEmail() 到 bean 而不是那个。是否可以借助 substring 和 replaceAll 方法？

我在下面尝试了自己

```
 String s=str.substring(0,11);
    System.out.println("String s (0,11) :"+s);
    String string=str.substring(0,7);
    System.out.println("string  (0,7):"+string);
    String name=str.substring(11);
    String name1=str.substring(7);
    System.out.println("name  :"+name);
    boolean b=((!(s.length()==11)) || (string.length()==7))? true : ((!(string.length()==7)) || (s.length()==11))? false : true ;
    System.out.println(b);
    if(b==true)
    {
        System.out.println("condition TRUE");
        String replaceString=string.replaceAll(string,"info@");
        System.out.println("replaceString  :"+replaceString+name1);
    }
    if(b==false) 
    {
        System.out.println("condition FALSE");
        String replaceString=s.replaceAll(s,"info@");
        System.out.println("replaceString  :"+replaceString+name);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T12:41:23.397

好的，不要给自己带来困难，只需将字符串中的`http://`或其他可能的模式替换为. 建议使用正则表达式`str.replaceAll()``info@`

```
String str = "http://www.stackoverflow.com";

str = str.replaceAll("http:\\/\\/(www\\.)?","info@");
System.out.println(str); 
```

[http://rextester.com/SJD79549](http://rextester.com/SJD79549)

那么我的问题是？你想做什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T12:44:37.187

一个例子

```
String orig = "Hello World!";

String repl = orig.substring(6, 11); // "World"

String newstr = orig.replaceAll(repl, "user1937829"); // Hello user1937829! 
```

在你的情况下，你不需要`http://(www)`

```
String newstr = orig.replaceAll("www", "").replaceAll("http://", "info@"); 
```

`newstr`将等于`info@stackoverflow.com`if `orig`is `http://www.stackoverflow.com`or `http://stackoverflow.com`。

希望这就是你想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T12:44:41.230

您需要在替换函数中使用正则表达式

```
String str1= "http://www.stackoverflow.com";
String str2 = "http://stackoverflow.com";
System.out.println(str1.replaceAll("http:\\/\\/(www\\.)?","info@"));
System.out.println(str2.replaceAll("http:\\/\\/(www\\.)?","info@")); 
```

# javascript - 使用 Jquery 中的切换功能时，动态添加的图像未添加到页面上

> ID：14090728
> 
> 赞同：0
> 
> 时间：2012-12-30T12:32:26.200
> 
> 标签：javascript, jquery

下面是在 Javascript 中添加图像的代码。

```
function AddFirstRow() {
    //Create an input type dynamically.
    var element ;
    var seatArr = document.getElementById("seatArr");

    //Assign different attributes to the element.
    var  rowCounter ;
    for( rowCounter = 1 ; rowCounter < 8 ; rowCounter++ ){
        element = document.createElement("input");
        element.setAttribute("type", "image");
        element.setAttribute("src","../Images/available_seat_img.png") ;
        element.setAttribute("class", "seatRightMostRow1");
        element.setAttribute("id", "1V");
        seatArr.appendChild(element);
    }
} 
```

添加图像的正文元素。

```
<div class="seatArr">        
    <span id="seatArr" >&nbsp;</span> 
    <input type="image" class="seatRightMostRow1" id="1A" alt="sfdsf" src="../Images/available_seat_img.png"  />
    <input type="image" class="seatRightMostRow2" id="1B" alt="sfdsf" src="../Images/available_seat_img.png"  />
</div> 
```

JQuery 用于图像上的切换功能。

```
$("input[id]").toggle(function(){
    $(this).attr("src","../Images/selected_seat_img.png");
},function(){
    $(this).attr("src","../Images/available_seat_img.png");
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T13:13:21.750

这取决于您接线的顺序。

如果我确保在连接`toggle`处理程序之前插入图像，它们切换适用于所有图像：

```
$(function(){
  AddFirstRow();
});

$("input[id]").toggle(function(){
  $(this).attr("src","../Images/selected_seat_img.png");
},function(){
  $(this).attr("src","../Images/available_seat_img.png");
}); 
```

如果我在连接`AddFirstRow`后将调用移动到发生`toggle`，它确实只会触发初始图像。

小提琴：http: [//jsfiddle.net/frankvanpuffelen/HPPKv/1/](http://jsfiddle.net/frankvanpuffelen/HPPKv/1/)

通常你可以使用 jQuery`on`来设置一个也会触发动态元素的处理程序，但我不确定它如何与`toggle`. 我会检查。

**更新**

此代码使用该`on`函数确保处理程序为动态元素触发：

```
$(".seatArr").on('click', 'input', function(){
  $(this).attr("src",
    $(this).attr("src") == "../Images/selected_seat_img.png"
    ? "../Images/available_seat_img.png"
    : "../Images/selected_seat_img.png"
  );
}); 
```

# ruby - Ruby 中并发的同步方法

> ID：14090731
> 
> 赞同：19
> 
> 时间：2012-12-30T12:32:53.707
> 
> 标签：ruby

> **可能重复：**
> [ruby 是否有 Java 等效的 synchronize 关键字？](https://stackoverflow.com/questions/3208462/does-ruby-have-the-java-equivalent-of-synchronize-keyword)

在 Java 中，我们可以通过在函数定义中使用“synchronized”关键字来使方法“同步”。

我们如何在 Ruby 中做到这一点？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-30T12:40:42.827

Ruby 中不存在 Synchronize 关键字。或者，只需将方法调用包装到`Mutex`（即 Lock 的花哨词）。

为该类创建新的共享互斥锁（每个人都必须使用相同的互斥锁（锁）来访问相同的变量）：

```
NUM_THREADS = 4

class Foo
  def initialize
    @my_mutex = Mutex.new
    @my_val = 0 # should be private
  end

  def synchronize(&block)
    # to see what it does without the mutex in this example:
    # 1) comment this line
    @my_mutex.synchronize(&block)
    # 2) uncomment this line
    # yield
  end

  def current_value
    synchronize do
      @my_val
    end
  end

  def modify
    # the value should be 0 before and 0 after, if the Mutex is used correctly
    synchronize do
      @my_val += 1
      sleep 0.25
      @my_val -= 1
      sleep 0.25
    end
  end
end

foo = Foo.new

threads = []

# spawn N threads, all trying to change the value
threads += (1..NUM_THREADS).map { |i|
  Thread.new {
    puts "thread [##{i}]: modifying"
    foo.modify
  }
}

# spawn checking thread
threads << Thread.new {
  # print the value twice as fast as the other threads are changing it, so we are more likely to stumble upon wrong state
  (NUM_THREADS * 2).times {
    puts "thread [check]: checking..."
    raise if foo.current_value != 0 # locking failed, crash
    sleep 0.25
  }
}

threads.map { |t| t.join } # wait for all threads

puts "even though it took a while longer, it didn't crash, everyone is happy, managers didn't fire me... it worked!" 
```

请参阅[http://apidock.com/ruby/Mutex](http://apidock.com/ruby/Mutex)

由于所有这些锁定，程序运行时间更长。速度取决于您的 ruby​​ 实现（例如绿色线程、本机线程..）和内核数量。如果您在上面的示例中禁用互斥锁，程序会立即崩溃，因为检查线程中的提升防护。请注意，检查线程也必须使用互斥锁，否则它仍然能够读取其他线程更改中间的值。即每个人都必须使用相同的互斥锁来访问该变量。

为了弥补`synchronized`关键字的不足，我定义`synchronize`了使用类定义的方法`Mutex`。

# javascript - 获取ckeditor元素的高度

> ID：14090733
> 
> 赞同：1
> 
> 时间：2012-12-30T12:32:57.890
> 
> 标签：javascript, ckeditor

我在页面上有 CKEditor。每当用户通过拖动编辑器改变高度时，我想知道新的高度，所以我可以保存它。

使用`CKEDITOR.config.height`我可以获得*配置*的高度，但我想要*当前*高度。

我也尝试过使用 jQuery 中的 height()，但这只会给我通过 CSS 设置的高度 - 如果没有设置高度，它会给我“43”。

我想要么

*   获取 CKEditor textarea 的当前高度（减去菜单，但我可以自己计算）
*   每当高度变化时让CKEditor触发一些东西

原因是，我想将此信息与内容一起保存，以便调整 iframe 的大小，以便正确显示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T13:40:14.797

1.  要获得当前高度，您可以使用：

    ```
    editor.ui.space( 'contents' ).getStyle( 'height' ); // e.g. 200px 
    ```

    这会找到名为 contents 的 UI 空间，这是一个放置可编辑 iframe 的元素。当您通过[editor#resize()](http://docs.ckeditor.com/#!/api/CKEDITOR.editor-method-resize)方法设置编辑器的高度时，此大小直接在内容 UI 空间上设置。

2.  当编辑器的大小发生变化时，您可以监听[editor#resize事件以执行一些代码：](http://docs.ckeditor.com/#!/api/CKEDITOR.editor-event-resisze)

    ```
    editor.on( 'resize', function() {
        console.log( 'resized...' );
    } ); 
    ```

PS。这个答案对 CKEditor 4.0 有效。它可能不适用于 CKEditor 3.6.x

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-12-16T15:31:45.270

如果要查找整个“经典”CKEditor（带工具栏）的高度，请尝试：

```
editor.container.$.clientHeight; 
```

其中`editor`指向 CKEditor 实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-07T11:48:15.757

此代码使用 JQuery 在“经典编辑器”（带有工具栏）中获取文档正文的高度。'editor' 是 CKEDITOR 的一个实例：

```
CKEDITOR.on( 'instanceReady', function( evt )
  {
    var editor = evt.editor;

   editor.on('change', function (e) { 
    var contentSpace = editor.ui.space('contents');
    var ckeditorFrameCollection = contentSpace.$.getElementsByTagName('iframe');
    var ckeditorFrame = ckeditorFrameCollection[0];
    var innerDoc = ckeditorFrame.contentDocument;
    var innerDocTextAreaHeight = $(innerDoc.body).height();
    console.log(innerDocTextAreaHeight);
    });
 }); 
```

[https://codepen.io/edsonperotoni/pen/OJJZzZq](https://codepen.io/edsonperotoni/pen/OJJZzZq)

参考：

[https://github.com/ckeditor/ckeditor4/blob/af6f5152347bcecd5feb6a89a5b7882cc99292a3/plugins/wysiwygarea/plugin.js](https://github.com/ckeditor/ckeditor4/blob/af6f5152347bcecd5feb6a89a5b7882cc99292a3/plugins/wysiwygarea/plugin.js)

[https://ckeditor.com/old/forums/CKEditor/Get-height-of-content-in-the-Ckeditor](https://ckeditor.com/old/forums/CKEditor/Get-height-of-content-in-the-Ckeditor)

# redirect - 带有和不带有斜杠的 Nginx 永久重定向

> ID：14090735
> 
> 赞同：3
> 
> 时间：2012-12-30T12:33:12.037
> 
> 标签：redirect, url-rewriting, nginx, rewrite

我找不到任何方法来使带有和不带有斜杠的 url 重定向工作。

我想在 url 调用时完成它，`example.com/info`并将`example.com/info/`在`example.com/info-page/`url 后面添加“-page”字符串。

```
location /info/ {
     rewrite ^(/info)(.*)$ http://example.com/$1-page/ permanent;
} 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-08T00:47:26.013

你不需要`location`，只需使用：

```
rewrite ^/info/?$ http://$host/info-page/ permanent; 
```

或者

```
if ($request_uri !~ "^/info/?$")
{
  return 301 http://$host/info-page/;
} 
```

# objective-c - 覆盖 -performSelector: 在 UIBarButtonItem 子类中

> ID：14090738
> 
> 赞同：4
> 
> 时间：2012-12-30T12:33:24.053
> 
> 标签：objective-c, ios, cocoa, subclass, uibarbuttonitem

我正在尝试子类`UIBarButtonItem`化以添加一些特殊功能。我需要`barButtonItem`在触摸时切换其外观，因此我试图覆盖`performSelector:`.

当我使用下面的代码时，我得到一个`EXC_BAD_ACCESS (code=2 ...)`

```
-(id)performSelector:(SEL)aSelector withObject:(id)object1 withObject:(id)object2
{
    // Do something

    return [super performSelector:aSelector withObject:object1 withObject:object2];
} 
```

我的猜测是，我要么错误地尝试覆盖`performSelector:`（还有其他方法吗？），要么错误地在`super`.

在寻找解决方案 3 多个小时后，我一无所获。任何帮助是极大的赞赏。

**更新：** 以下作品：

```
@implementation CustomBarButtonItem

- (void)setTarget:(id)target
{
    _realTarget = target;
    super.target = self;
}

- (void)setAction:(SEL)action
{
    _realAction = action;
    super.action = @selector(pressed);
}

- (void)pressed
{
    [self doCustom]; // implement this somewhere
    [_realTarget performSelector:_realAction withObject:nil afterDelay:0];
} 
```

不幸的是，我想通过设置有时只能`customView`在外观和正常外观之间切换。但这是一个完全不同的问题。谢谢大家。`UIBarButtonItem``self.customView = nil`

我会再等一会儿再选择一个最佳答案，看看是否有更好的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T12:42:58.683

使用一个简单的实现这个功能可能更好`UIView`，您可以以任何给定的方式简单地修改它。

`UIBarButtonItem`确实提供了一种基于自定义 UIView 进行初始化的方法：

`- (id)initWithCustomView:(UIView *)customView`

然后，您可以告诉`UIView`. 根据触发的触摸事件更改其外观`UIBarButtonItem`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T12:37:21.650

压倒`performSelector:`一切绝对不是正确的方法。该类可以`performSelector:`用来做各种事情，而不仅仅是 Target-Action 部分。

`performSelector`不幸的是，在for 目标操作执行之前没有正在执行的公共方法。

但是，您可以在视图控制器中使用 Target-Action 来实现该操作，或者您可以覆盖私有方法。

此外，了解“特殊功能”的含义会很有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-30T22:34:30.063

我会做以下事情：

1.  添加向上/向下处理程序

    ```
    CAGradientLayer *gradient = [CAGradientLayer layer];
    loginButton.clipsToBounds = YES;
    UIColor *topColor = [UIColor colorWithRed:255/255 green:255/255 blue:255/255 alpha:0.9];
    UIColor *middleColor = [UIColor colorWithRed:61.0/255 green:130.0/255 blue:244.0/255 alpha:1.0];
    UIColor *bottomColor = [UIColor colorWithRed:24.0/255 green:77.0/255 blue:214.0/255 alpha:1.0];
    gradient.colors = [NSArray arrayWithObjects:(id)topColor.CGColor,
                       (id)middleColor.CGColor, (id)bottomColor.CGColor, nil];
    gradient.locations = [NSArray arrayWithObjects:
                          [NSNumber numberWithFloat:0.0f],
                          [NSNumber numberWithFloat:0.05f],
                          [NSNumber numberWithFloat:0.7],
                          nil];
    gradient.frame = [[loginButton layer] bounds];
    gradient.cornerRadius = 4.0;
    gradient.borderWidth = 0.5;
    [loginButton setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal];
    [loginButton.layer insertSublayer:gradient atIndex:0]; 
    [loginButton addTarget:self action:@selector(loginTouchDown:)
                    forControlEvents:UIControlEventTouchDown];
    [loginButton addTarget:self action:@selector(loginTouchUp:)
                  forControlEvents:UIControlEventTouchUpOutside]; 
    ```

2.  在处理程序中，我会使用渐变层或简单层（之前准备好的）来做你需要的外观。

    ```
    - (IBAction)loginTouchDown:(id)sender
    {
            CAGradientLayer *gradient = [loginButton.layer.sublayers objectAtIndex:0];
            UIColor *topColor = [UIColor colorWithRed:24.0/255 green:77.0/255 blue:214.0/255 alpha:1.0];
            UIColor *middleColor = [UIColor colorWithRed:24.0/255 green:77.0/255 blue:214.0/255 alpha:1.0];
            UIColor *bottomColor = [UIColor colorWithRed:24.0/255 green:77.0/255 blue:214.0/255 alpha:1.0];
            gradient.colors = [NSArray arrayWithObjects:(id)topColor.CGColor, (id)middleColor.CGColor,
                               (id)bottomColor.CGColor, nil];
    }

    - (IBAction)loginTouchUp:(id)sender
    {
            CAGradientLayer *gradient = [loginButton.layer.sublayers objectAtIndex:0];
            UIColor *topColor = [UIColor colorWithRed:255/255 green:255/255 blue:255/255 alpha:0.9];
            UIColor *middleColor = [UIColor colorWithRed:61.0/255 green:130.0/255 blue:244.0/255 alpha:1.0];
            UIColor *bottomColor = [UIColor colorWithRed:24.0/255 green:77.0/255 blue:214.0/255 alpha:1.0];
            gradient.colors = [NSArray arrayWithObjects:(id)topColor.CGColor,
                               (id)middleColor.CGColor, (id)bottomColor.CGColor, nil];
    } 
    ```

# windows-7 - 如何查看 Pyserial 数据流

> ID：14090740
> 
> 赞同：0
> 
> 时间：2012-12-30T12:33:34.227
> 
> 标签：windows-7, python-2.7, serial-port, arduino, pyserial

我是pyserial的初学者。我从网上写了代码：

```
import serial

ser = serial.Serial(0)  # open first serial port
print ser.portstr       # check which port was really used
ser.write("hello")      # write a string
ser.close() 
```

该程序运行没有任何错误，并显示输出“COM 7”。我在我的 HP Pavilion 笔记本电脑上运行代码，系统硬件上没有可视 COM 端口（但在设备管理器中它列出了 6 个 COM 端口）。我想知道，我在代码中编写的字符串“hello”去了哪里，如何“虚拟查看”从系统到任何连接设备的数据流？此外，如果我将设备连接到笔记本电脑上的 USB 端口之一，数据（在本例中为字符串“hello”）将被传输到设备。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T17:17:16.250

我对它不是很熟悉，但我认为 Portmon 工具可能会有所帮助。它监控 Windows 机器上并行和串行端口的状态和活动。

[Portmon for Windows v3.03](http://technet.microsoft.com/en-us/sysinternals/bb896644.aspx)

# c++ - 将 PCL XYZ 云转换为 XY（3D 到 2D）

> ID：14090742
> 
> 赞同：1
> 
> 时间：2012-12-30T12:34:00.293
> 
> 标签：c++, point-clouds, point-cloud-library

# 环境

我有一个 PCL 类型的点云`PointXYZ`。我需要将它转换为 type 的网格图`vector<vector<bool> >`，`map[x][y]`如果至少有一个点它应该是真的。地图应该代表点云的某个区域（比如 20x30 个单元格，覆盖 x=[-10,10],y=[-15,15] 的点云维度。

# 我现在拥有的

目前我有两种方法：

1.  扫描所有点并将地图中的相应单元格设置为true。
2.  将点投影到平面，创建一个 Kd-Tree，然后为地图中的每个单元格查询树中最近的点，如果它落入单元格中，则将单元格设置为 true。

现在，第一种方法适用于小点云：O(n)，其中 n 是点云中的点数。

我认为第二种方法适用于大型云。最终查询只有 O(m)，其中 m 是地图的大小。但是，构建 Kd 树和将云投影到平面上都应该是 O(n) 左右。

我认为第二种方法总是更糟，但我会进行测试看看。

# 问题

有没有更好的方法？也许有八叉树或体素网格（二维）？方法一的问题是，我不必要地查看感兴趣区域之外的点。

在我看来，我不可能是第一个遇到这个问题的人，对吧？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T09:36:17.990

如果点云已经“组织好”（例如，如果它直接来自 RGBD 传感器），您可以通过巧妙地遍历 2D 阵列在最佳情况下击败 O(N)。有关有组织的点云的信息，请参阅[https://pcl.readthedocs.io/projects/tutorials/en/latest/basic_structures.html](https://pcl.readthedocs.io/projects/tutorials/en/latest/basic_structures.html)

如果点云没有组织，那么除了点本身之外，点云中没有关于空间组织的信息，因此您几乎在每种情况下都必须触摸它们中的每一个。如果地图足够小，您可以在地图满时退出，但我猜这不太可能发生。

如果您对概率结果感到满意，那么您可以通过随机采样点云来构建地图。

# clojure - 将 LazySeqs 组合成一个地图集合

> ID：14090747
> 
> 赞同：1
> 
> 时间：2012-12-30T12:34:26.077
> 
> 标签：clojure, lazy-sequences

我正在尝试将几个 LazySeq 组合成一个地图集合。

```
("a" "b" "c" ...)
("x" "y" "z" ...) 
```

进入

```
({:key1 "a" :key2 "x"} {:key1 "b" :key2 "y"} ...) 
```

保证 LazySeq 的长度相同。这样做的功能性方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T13:56:33.780

`map`将适用于多个 seq，每次接受一个参数：

```
(def a ["a" "b" "c"])
(def b ["x" "y" "z"])

(map (fn [x y] {:key1 x :key2 y}) a b)  ; a and b could be lazy...
;=> ({:key1 "a", :key2 "x"} {:key1 "b", :key2 "y"} {:key1 "c", :key2 "z"}) 
```

# ruby-on-rails - 设计及相关模型

> ID：14090750
> 
> 赞同：0
> 
> 时间：2012-12-30T12:34:57.550
> 
> 标签：ruby-on-rails, associations

我有一个由设计管理的用户模型。

我与另一个名为 Plans 的模型有关联，因为 User has_many Plans。一个计划属于一个用户。

我试图了解允许用户管理他们的计划（创建、编辑、删除）的最佳方式，但我看不到我应该创建哪种控制器以及我的路线看起来如何。

任何人都可以指导我完成这个吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T13:47:01.167

我建议，通过 Michael Hartl 教程[http://ruby.railstutorial.org/ruby-on-rails-tutorial-book](http://ruby.railstutorial.org/ruby-on-rails-tutorial-book)或使用脚手架生成器给你一个好的开始

设计，将处理所有登录/身份验证，因此您只需要考虑您希望用户在登录后执行的操作。如果他们在用户主页上（显示操作），也许您可​​以在此处放置一个链接以添加新的计划。这意味着您需要一种方法来处理该操作。所以你可以创建一个计划控制器......添加你希望用户采取的行动。对于路线，将您想要的任何内容与您需要的每个操作相匹配。因此，您可以添加计划资源或各种操作（匹配 'new_plan', :to => "plans#new"）。

# android - 如何在选项卡式应用程序中替换 LinearLayout 下的 Fragment

> ID：14090751
> 
> 赞同：1
> 
> 时间：2012-12-30T12:35:16.763
> 
> 标签：android, android-layout, android-fragments, android-linearlayout, android-tabs

我有一个带有 3 个 xml 布局文件的选项卡式应用程序。片段以编程方式创建并添加到 LinearLayouts。

但是，其中一个 LinearLayouts 看起来像这样：

地图.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/map"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:weightSum="4" >

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/primary"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="YOLO" />
    </LinearLayout>

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/secondary"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="3"
        android:orientation="horizontal" >
    </LinearLayout>

</LinearLayout> 
```

此选项卡应分为两种布局，一种占屏幕的 25%，另一种占 75%。

这使我的 TabListener 无法替换整个 .xml 文件，而我只能替换`secondary`LinearLayout，因为这是我在`onCreate`活动方法期间添加片段的地方。

因此，我最终得到 25% 的应用程序顶部是静态的并且永远不会改变。

当我尝试替换父布局`map`时，应用程序崩溃。

我能做些什么？

```
package com.nfc.demo;

import android.app.ActionBar;
import android.app.ActionBar.Tab;
import android.app.Activity;
import android.app.Fragment;
import android.app.FragmentManager;
import android.app.FragmentTransaction;
import android.content.res.Configuration;
import android.os.Bundle;

import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.GoogleMapOptions;
import com.google.android.gms.maps.MapFragment;

public class NFCDemoActivity extends Activity {

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        FragmentManager fm = getFragmentManager();
        FragmentTransaction ft = fm.beginTransaction();

        GoogleMapOptions options = new GoogleMapOptions();
        options.mapType(GoogleMap.MAP_TYPE_SATELLITE).compassEnabled(false)
                .rotateGesturesEnabled(false).tiltGesturesEnabled(false);

        MapFragment mMapFragment = MapFragment.newInstance(options);
        Fragment mSettingsFragment = new SettingsFragment();
        Fragment mAboutFragment = new AboutFragment();

        ft.add(R.id.secondary, mMapFragment);
        ft.commit();

        ActionBar bar = getActionBar();
        bar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
        bar.setDisplayOptions(0, ActionBar.DISPLAY_SHOW_TITLE);

        ActionBar.Tab mapTab = bar.newTab().setText("Map");
        ActionBar.Tab settingsTab = bar.newTab().setText("Settings");
        ActionBar.Tab aboutTab = bar.newTab().setText("About");

        mapTab.setTabListener(new TabListener(mMapFragment));
        settingsTab.setTabListener(new TabListener(mSettingsFragment));
        aboutTab.setTabListener(new TabListener(mAboutFragment));

        bar.addTab(mapTab, 0);
        bar.addTab(settingsTab, 1);
        bar.addTab(aboutTab, 2);

        setContentView(R.layout.map);
    }

    @Override
    protected void onRestoreInstanceState(Bundle savedInstanceState) {
        super.onRestoreInstanceState(savedInstanceState);
    }

    @Override
    protected void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
    }
    @Override
    public void onConfigurationChanged(Configuration newConfig) {
        super.onConfigurationChanged(newConfig);
    }

    protected class TabListener implements ActionBar.TabListener {
        private Fragment fragment;

        public TabListener(Fragment fragment) {
            this.fragment = fragment;
        }

        public void onTabSelected(Tab tab,
                FragmentTransaction fragmentTransaction) {
            fragmentTransaction.replace(R.id.secondary, this.fragment, null);
        }

        public void onTabUnselected(Tab tab,
                FragmentTransaction fragmentTransaction) {
            fragmentTransaction.remove(this.fragment);
        }

        public void onTabReselected(Tab tab,
                FragmentTransaction fragmentTransaction) {
            // do nothing
        }
    }
} 
```

尝试替换 R.id.map 而不是替换 R.id.secondary 时的错误日志

```
12-30 14:01:16.035: E/AndroidRuntime(12377): FATAL EXCEPTION: main
12-30 14:01:16.035: E/AndroidRuntime(12377): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.nfc.demo/com.nfc.demo.NFCDemoActivity}: java.lang.IllegalStateException: Can't change container ID of fragment MapFragment{41ca1660 id=0x7f04000c}: was 2130968588 now 2130968585
12-30 14:01:16.035: E/AndroidRuntime(12377):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
12-30 14:01:16.035: E/AndroidRuntime(12377):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
12-30 14:01:16.035: E/AndroidRuntime(12377):    at android.app.ActivityThread.access$600(ActivityThread.java:141)
12-30 14:01:16.035: E/AndroidRuntime(12377):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
12-30 14:01:16.035: E/AndroidRuntime(12377):    at android.os.Handler.dispatchMessage(Handler.java:99)
12-30 14:01:16.035: E/AndroidRuntime(12377):    at android.os.Looper.loop(Looper.java:137)
12-30 14:01:16.035: E/AndroidRuntime(12377):    at android.app.ActivityThread.main(ActivityThread.java:5039)
12-30 14:01:16.035: E/AndroidRuntime(12377):    at java.lang.reflect.Method.invokeNative(Native Method)
12-30 14:01:16.035: E/AndroidRuntime(12377):    at java.lang.reflect.Method.invoke(Method.java:511)
12-30 14:01:16.035: E/AndroidRuntime(12377):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
12-30 14:01:16.035: E/AndroidRuntime(12377):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
12-30 14:01:16.035: E/AndroidRuntime(12377):    at dalvik.system.NativeStart.main(Native Method)
12-30 14:01:16.035: E/AndroidRuntime(12377): Caused by: java.lang.IllegalStateException: Can't change container ID of fragment MapFragment{41ca1660 id=0x7f04000c}: was 2130968588 now 2130968585
12-30 14:01:16.035: E/AndroidRuntime(12377):    at android.app.BackStackRecord.doAddOp(BackStackRecord.java:407)
12-30 14:01:16.035: E/AndroidRuntime(12377):    at android.app.BackStackRecord.replace(BackStackRecord.java:429)
12-30 14:01:16.035: E/AndroidRuntime(12377):    at com.nfc.demo.NFCDemoActivity$TabListener.onTabSelected(NFCDemoActivity.java:77)
12-30 14:01:16.035: E/AndroidRuntime(12377):    at com.android.internal.app.ActionBarImpl.selectTab(ActionBarImpl.java:570)
12-30 14:01:16.035: E/AndroidRuntime(12377):    at com.android.internal.app.ActionBarImpl.addTab(ActionBarImpl.java:509)
12-30 14:01:16.035: E/AndroidRuntime(12377):    at com.android.internal.app.ActionBarImpl.addTab(ActionBarImpl.java:490)
12-30 14:01:16.035: E/AndroidRuntime(12377):    at com.nfc.demo.NFCDemoActivity.onCreate(NFCDemoActivity.java:47)
12-30 14:01:16.035: E/AndroidRuntime(12377):    at android.app.Activity.performCreate(Activity.java:5104)
12-30 14:01:16.035: E/AndroidRuntime(12377):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
12-30 14:01:16.035: E/AndroidRuntime(12377):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
12-30 14:01:16.035: E/AndroidRuntime(12377):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T18:43:08.723

好的，我查看了`BackStackRecord`的源代码，发现片段实例只能附加到一个容器的 id。

所以这个问题的解决方案就是以编程方式创建`FrameLayout`. 给它设置一些id。将创建的布局添加到 first `LinearLayout`。将片段添加到`FrameLayout`的 id。并在需要时从一个中删除创建的布局`LinearLayout`并添加到另一个。

示例代码

```
public void onCreate(Bundle savedInstanceState) {
    ...

    mLayout = new FrameLayout(this);
    mLayout.setId(R.id.tertiary);
    ((LinearLayout) findViewById(R.id.primary)).addView(mLayout, new LinearLayout.LayoutParams(LinearLayout.LayoutParams.FILL_PARENT, LinearLayout.LayoutParams.FILL_PARENT));
    ft.add(R.id.tertiary, mMapFragment);
    ft.commit();

    ...
}

...

    public void onTabSelected(Tab tab, FragmentTransaction fragmentTransaction) {
        ((LinearLayout) findViewById(R.id.primary)).removeView(mLayout);
        ((LinearLayout) findViewById(R.id.secondary)).addView(mLayout, new LinearLayout.LayoutParams(LinearLayout.LayoutParams.FILL_PARENT, LinearLayout.LayoutParams.FILL_PARENT));
    } 
```

# sql - 如果 X 确定 Y，那么 Y 可以是一个集合吗？

> ID：14090752
> 
> 赞同：1
> 
> 时间：2012-12-30T12:35:30.133
> 
> 标签：sql, database, math, database-design, normalization

这是我关于数据库规范化的问题，这与功能依赖关系非常相关。

我的问题是关于下表：

> { ID，NR_ID，IMPRESSION_TYPE，VALUE}

```
Say ID -> NR_ID, ID->IMPRESSION_TYPE, ID->Value. 
Also, { NR_ID, IMPRESSION_TYPE } -> VALUE. 
```

所以我可以说，`ID -> { NR_ID, IMPRESSION_TYPE }`从而打破了 3NF 的规则，即不应该有传递依赖吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T13:02:11.320

是的，当然它具有传递依赖。因为

ID 可以确定值，即`(ID-->Value)` NR_ID 和 IMPRESSION_TYPE 可以确定值，即

```
 ( NR_ID, IMPRESSION_TYPE --> Value) 
```

所以这是 2NF 形式，必须删除传递依赖以使其成为 3NF，我的建议是在另一个表中有 ID 和 Value

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T13:48:25.687

> 所以我可以说，ID -> { NR_ID, IMPRESSION_TYPE } 从而打破了 3NF 的规则，即不应该有传递依赖吗？

不，您不能通过重新排列术语来消除传递依赖。

依赖关系是基于集合的。表达式 A->B 的意思是“称为‘A’的属性集合决定了称为‘B’的属性集合”。Date 说：“基本上，函数依赖……是在给定 relvar 中从一**组属性到另一组属性的***多对一关系。”* （日期，*数据库系统简介*，第 7 版，第 330 页。已添加重点。）

 ***其次，[阿姆斯特朗的公理](http://en.wikipedia.org/wiki/Armstrong%27s_axioms)（分解）说那`ID -> { NR_ID, IMPRESSION_TYPE }`等价于`ID -> NR_ID, ID->IMPRESSION_TYPE`。这并不意味着 ID 不再决定 Value，或者 { NR_ID, IMPRESSION_TYPE } 不再决定 Value。***

# html - 带有 html 格式问题的 Yahoo Pipes 和 Regex

> ID：14090753
> 
> 赞同：1
> 
> 时间：2012-12-30T12:35:57.083
> 
> 标签：html, regex, yahoo-pipes

我正在努力了解如何使用正则表达式将不可打印的回车字符添加到 html 字符串中。

它是一个 WordPress 的东西，自动嵌入视频我需要将 URL 放在 html 中自己的行上。

首先我使用正则表达式：

```
In item.vid_src replace ($) with \\r$1 
s is checked. 
```

之后，我使用了一个带有字符串生成器的循环 - 我将 vid_src 添加到描述的开头，因此：

```
item.vid_src
<br><br>
item.description

assign results to item.description 
```

在我在管道中包含 Regex 模块之前，我得到了这个：

```
http://www.youtube.com/watch?v=THA_5cqAfCQ<br><br><p><h1 class="MsoNormal">Cheetahs on
the edge</h1> 
```

但我需要这个：

```
http://www.youtube.com/watch?v=THA_5cqAfCQ
<br><br><p><h1 class="MsoNormal">Cheetahs on the edge</h1> 
```

添加正则表达式模块我得到这个：

```
http://www.youtube.com/watch?v=THA_5cqAfCQ&#92;r<br><br><p><h1 class="MsoNormal">
Cheetahs on the edge</h1> 
```

显然它插入的正是我所要求的，但这不是我所期望的，我需要用换行符格式化 html。有没有人知道如何解决这个问题？

# ruby - 看不到自定义本地 gem

> ID：14090763
> 
> 赞同：0
> 
> 时间：2012-12-30T12:38:37.210
> 
> 标签：ruby, ruby-on-rails-3, rubygems

这是一个`topic.gemspec`：

```
Gem::Specification.new do |s|
  s.name        = 'topic'
  s.version     = '1.0.0'
  s.date        = '2012-12-30'
  s.files   = ["lib/models/topic.rb"]
end 
```

gem 位于我的应用程序根目录中。

在 Gemfile 中：

```
gem 'topic', :path => '.' 
```

运行应用程序时，我看不到主题类。

```
uninitialized constant ApplicationController::Topic 
```

我究竟做错了什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T19:50:26.823

您应该确保捆绑程序需要您的 gem。你应该有一个文件`lib/topic.rb`。添加一个`puts`语句并检查它是否在您启动应用程序或控制台时显示。

作为旁注。我认为您不应该在目录的根目录中有 gemspec。这将导致您的 lib 文件夹用于 gem 和 rails 应用程序。例如，最好创建一个子文件夹`topic/`，然后在其中托管 gem。然后，您可以将其添加到 Gemfile 中：

```
gem 'topic', :path => './topic' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T20:32:31.813

正如 Yves 所说，我强烈建议您将 gem 放在它自己的目录中。

但是你也可能有其他问题，让我们尝试一些事情：

您似乎正在尝试在控制器内使用主题，也许它没有在外面搜索？:s 尝试`::Topic`改用。:: 告诉查看“根”，因此它不会搜索`ApplicationController::Topic`

如果这不起作用，那么您的 gem 中可能没有命名空间。我认为 bundle 或任何需要命名空间（模块）的命名空间（模块）的命名方式与 gem 相同，因此您应该拥有：

```
# in topic/lib/topic.rb
module Topic
end

#require other parts of the gem
require 'topic/foo'
require 'topic/bar' 
```

希望我能帮上忙

# c# - 何时将对象返回到其池中

> ID：14090765
> 
> 赞同：3
> 
> 时间：2012-12-30T12:38:57.010
> 
> 标签：c#, multithreading, garbage-collection, objectpool

我想在我的 C# 应用程序中使用对象池，并且我知道 C# 中没有任何引用计数。如果同一个对象可以传递给多个线程，我怎么知道什么时候没有对该对象的引用，以便我可以将它返回到对象池？

本来想在`dispose`方法里做的，但是已经晚了，而且已经被处理掉了，无法返回池中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-30T16:51:39.510

在 .Net 中实现对象池可以使用终结器来完成。

实际上，.Net 中实现的大多数池也在这样做（例如 - 数据库连接池）。

使用终结器可以让您知道不再引用该对象，因为在 GC 确定没有可能的路由到该对象之后调用终结器。

该技术不是在您的 Dispose 中执行任何破坏性方法（我将在接下来得到这个）并完成方法。

假设您有一个 PooledObject 类型和一个管理池的 ObjectPool 类型。

在 ObjectPool 中，添加一个名为 ReturnToPool(PooledObject obj) 的内部方法，该方法将获取该对象并使其可供其他调用者使用。

在 PooledObject 类型中，您应该添加一个名为 ReleaseResources 的内部方法 - 只有当整个池应从内存中删除时才会由 ObjectPool 调用 - 在此方法中，您将实现您的处置逻辑（关闭句柄，释放非托管内存， ETC..）。在 PooledObject Dispose 和 Finalize 方法中，您应该调用 ObjectPool 中的 ReturnToPool 方法（静态或内部存储在池对象中） - 这称为 - 复活。在终结器中调用 ReturnToPool 方法时，您实际上是在复活对象并使其再次可用。

确保在 ObjectPool - GC.ReRegisterForFinalize 方法的 ReturnToPool 方法中重新注册 PooledObject 以完成最终确定。

当然，这两种类型都应该在同一个程序集中。（以确保他们可以互相调用内部方法）

但是，您应该以任何一种方式实现 Dispose 模式。当不再使用对象时（例如在离开使用范围之后），它将节省时间并将对象返回到池中。

希望这可以帮助。奥菲尔。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T12:44:45.497

它应该在`Close`/`Release`方法中。创建和处置实例的责任在于 ObjectPool 本身。

要从/向 ObjectPool 请求/释放对象，请使用`Open`/`Close`或`Acquire`/ `Release`。

A [The Code Project](http://en.wikipedia.org/wiki/The_Code_Project)文章*[C# Object Pooling](http://www.codeproject.com/Articles/20848/C-Object-Pooling)*介绍了一个很好的轻量级自定义对象池实现。

您还可以查看[ADO.NET 的连接池机制](http://msdn.microsoft.com/en-us/library/8xx3tyca.aspx)以获取对象池示例的提示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T12:52:04.287

> 我怎么知道什么时候不再有对该对象的引用，以便我可以将它返回到对象池。

嗯。您实现引用计数。

同样有效的是它周围的代理，它有一个 Disposable 方法。完成代理后，dispose 实现将内部对象放入池中（外部对象 tuhs 非常小）。

但最后你必须知道何时释放。这称为编程。这仅对具有显着初始化开销的“胖”对象有意义，然后您必须确保您确切知道何时通过逻辑（即自定义计数等）将它们放回原处。

# android - ListView 在 android 中使应用程序崩溃

> ID：14090768
> 
> 赞同：1
> 
> 时间：2012-12-30T12:39:21.870
> 
> 标签：android, android-layout, listview

我有一个包含 4 个不同按钮的主菜单。当您单击一个按钮时，应该会出现一个列表视图。最后，当您选择列表中的一项时，应该会启动一个显示一些文本的新活动。当我单击 Tiffins 按钮时，应用程序关闭而不是显示列表视图。请帮忙。

这是我的代码。

activity_main.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/icon"
tools:context=".MainActivity" >

<Button
    android:id="@+id/curries"
    android:layout_width="150dp"
    android:layout_height="130dp"
    android:layout_alignParentRight="true"
    android:layout_alignTop="@+id/tiffins"
    android:drawableBottom="@drawable/curries"
    android:text="@string/Curries" 
    android:onClick="CurriesMenu"/>

<Button
    android:id="@+id/tiffins"
    style="@style/AppTheme"
    android:layout_width="150dp"
    android:layout_height="130dp"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginTop="40dp"
    android:drawableBottom="@drawable/tiffins"
    android:text="@string/Tiffins" 
    android:onClick="TiffinsMenu"/>

<TextView
    android:id="@+id/textView2"
    android:layout_width="100dp"
    android:layout_height="30dp"
    android:layout_alignBottom="@+id/textView1"
    android:layout_alignParentLeft="true"
    android:layout_marginLeft="19dp"
    android:text="@string/Tiffins"
    android:textSize="25dp" />

<TextView
    android:id="@+id/textView1"
    android:layout_width="100dp"
    android:layout_height="30dp"
    android:layout_above="@+id/curries"
    android:layout_alignLeft="@+id/curries"
    android:layout_marginLeft="24dp"
    android:text="@string/Curries"
    android:textSize="25dp" />

<TextView
    android:id="@+id/textView3"
    android:layout_width="100dp"
    android:layout_height="30dp"
    android:layout_alignLeft="@+id/textView2"
    android:layout_centerVertical="true"
    android:text="@string/Snacks"
    android:textSize="25dp" />

<Button
    android:id="@+id/Snacks"
    android:layout_width="150dp"
    android:layout_height="130dp"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/textView3"
    android:drawableBottom="@drawable/snacks"
    android:text="@string/Snacks"
    android:onClick="SnacksMenu" />

<TextView
    android:id="@+id/textView4"
    android:layout_width="100dp"
    android:layout_height="30dp"
    android:layout_alignBaseline="@+id/textView3"
    android:layout_alignBottom="@+id/textView3"
    android:layout_alignLeft="@+id/curries"
    android:layout_alignParentRight="true"
    android:text="@string/Pindivantalu"
    android:textSize="25dp" />

<Button
    android:id="@+id/pindivantalu"
    android:layout_width="150dp"
    android:layout_height="130dp"
    android:layout_alignBottom="@+id/Snacks"
    android:layout_alignParentRight="true"
    android:drawableBottom="@drawable/pindivantalu"
    android:text="@string/Pindivantalu"
    android:onClick="PindivantaluMenu" /> 
```

activity_display_tiffinsmenu.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".DisplayTiffinsmenu" >

<ListView
    android:id="@+id/listView1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_centerVertical="true"
    android:background="@drawable/tiffins1"
    android:entries="@array/tiffinslist" >

</ListView> 
```

MainActivity.java

```
 package com.example.andhrarecipies;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.View;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    public void TiffinsMenu(View view){
        Intent intent = new Intent(this, DisplayTiffinsmenu.class);
        startActivity(intent);
    }

    public void CurriesMenu(View view){
        Intent intent = new Intent(this, DisplayCurriesmenu.class);
        startActivity(intent);
    }

    public void SnacksMenu(View view){
        Intent intent = new Intent(this, DisplaySnacksmenu.class);
        startActivity(intent);
    }

    public void PindivantaluMenu(View view){
        Intent intent = new Intent(this, DisplayPindivantalumenu.class);
        startActivity(intent);

    }

} 
```

DisplayTiffinsmenu.java

```
package com.example.andhrarecipies;

import java.util.ArrayList;

import android.os.Bundle;
import android.app.Activity;
import android.app.ListActivity;
import android.view.Menu;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.Toast;

public class DisplayTiffinsmenu extends ListActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
 //      setContentView(R.layout.activity_display_tiffinsmenu);

        ListView TiffinsMenu = (ListView) this.findViewById(R.id.listView1);
        String[] menu = getResources().getStringArray(R.array.tiffinslist);

        setListAdapter(new ArrayAdapter<String>(this, R.layout.activity_display_tiffinsmenu, menu));

    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        // TODO Auto-generated method stub
        super.onListItemClick(l, v, position, id);
        Object o = this.getListAdapter().getItem(position);
        String keyword = o.toString();
            Toast.makeText(this, "you have selected" + keyword, Toast.LENGTH_LONG).show() ;
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_display_tiffinsmenu, menu);
        return true;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T13:04:45.753

使用时`ListActivity`，您的`activity_display_tiffinsmenu.xml`-layout 必须包含 a `ListView`，其`android:id`属性设置`@android:id/list`如下：

```
<ListView 
  android:id="@android:id/list"
  android:layout_width="match_parent"  
  android:layout_height="wrap_content" >  
</ListView> 
```

# jquery - 将鼠标悬停在 li 列表上以更改图像，但无法赶上

> ID：14090769
> 
> 赞同：1
> 
> 时间：2012-12-30T12:39:24.043
> 
> 标签：jquery

我有以下代码：

```
$(document).ready(function(){
$('.active-bean-bag ul li.bean-bag-image').mouseover(function() {
        var activeBeanBag = 'menu-' + $(this).attr("id");
        $('.active-bean-bag img.menu-image').stop(true, true).fadeOut();
        $('.active-bean-bag img.menu-image').fadeOut(function(){
                $('.active-bean-bag img.menu-image').attr("src", '/skins/template/customer/images/'+activeBeanBag+'.png');
                $('.active-bean-bag img.menu-image').fadeIn();
        });
}); 
```

});

但是，当您快速移动 li 选项以到达您想要的选项时，它不会赶上并显示不正确的图像

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T12:41:50.237

首先使用[停止](http://api.jquery.com/stop/)功能。这会取消所有排队的动画。

```
$('.selector').stop(true, true).fadeOut(); 
```

编辑:: 试试这个代码：

```
$(document).ready(function(){
$('.active-bean-bag ul li.bean-bag-image').mouseover(function() {
        var activeBeanBag = 'menu-' + $(this).attr("id");
        $('.active-bean-bag img.menu-image').stop(true, true).fadeOut(function(){
                $('.active-bean-bag img.menu-image').attr("src", '/skins/template/customer/images/'+activeBeanBag+'.png');
                $('.active-bean-bag img.menu-image').stop(true, true).fadeIn();
        });
}); 
```

# asp.net - WebSecurity SimpleMembershipProvider 不能一起工作？

> ID：14090779
> 
> 赞同：2
> 
> 时间：2012-12-30T12:40:46.990
> 
> 标签：asp.net, asp.net-mvc, authentication

对我在使用 WebSecurity 时不断遇到的所有奇怪异常感到有点失望。此外，与 OAuth 的不良集成并没有使它看起来更漂亮。考虑放弃概念并手动编写整个用户管理......

无论如何，我正在使用 WebSecurity 来管理用户和密码。现在我尝试实现可以​​删除帐户的部分。奇怪的是，这个方法不在静态类 WebSecurity 上。显然我需要通过 SimpleMembershipProvider 删除帐户。

```
var provider = new SimpleMembershipProvider();
provider.DeleteAccount(username); 
```

deleteAccount 方法抛出一个无效操作异常，并显示以下消息：

```
You must call the "WebSecurity.InitializeDatabaseConnection" method before you call 
any other method of the "WebSecurity" class. This call should be placed in an 
_AppStart.cshtml file in the root of your site. 
```

这很奇怪，因为我的 _ViewStart 中已经有了这个（否则我一开始就无法创建帐户）。

```
 if (!WebSecurity.Initialized)
        {
            WebSecurity.InitializeDatabaseConnection(
                "DefaultConnection",
                "Users",
                "UserId",
                "UserName",
                true);
        } 
```

这次我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T13:00:48.713

你有没有尝试过：

```
Membership.DeleteUser(username); 
```

# php - 从php上的大文件创建拇指

> ID：14090781
> 
> 赞同：1
> 
> 时间：2012-12-30T12:41:06.153
> 
> 标签：php, gd, thumbnails, fatal-error

我需要从上传的文件（jpg、gif、png）创建拇指。我正在使用GD。

当尝试从上传的大文件（1262x16482）创建拇指时 - 我收到致命错误 **致命错误：允许的内存大小为 134217728 字节用尽（试图分配 60126336 字节）**
行
$image = imagecreatefromjpeg($file);

我试图找到关于这个问题的答案，其中大多数是关于增加 php.ini 中的 memory_limit。由于某些原因，这个解决方案不适合我。

也许有一些 php 扩展允许不是将所有文件读入内存，而只是其中的一部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T12:55:53.050

Depending on the type of file it may be *mandatory* to load the whole thing into memory before doing work on it.

Most graphics file formats don't store the info in a linear format. Rather the data in one section may refer to some structure in another section or vv. Your best bet would be to either up your allowed memory in php.ini or limit the file size at upload time.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T13:31:28.320

我认为 TimThumb 的使用对你来说会更容易，因为你可能有一些错误的操作 [http://code.google.com/p/timthumb/](http://code.google.com/p/timthumb/)

您只需要下载它并调用图像即可。

# c# - 程序通信和文件权限（服务器端）

> ID：14090782
> 
> 赞同：0
> 
> 时间：2012-12-30T12:41:14.330
> 
> 标签：c#, php, security, file-io

我做了一个小程序来管理网络上的 xml 文件。该程序将数据发送到 PHP 文件（在服务器上）并且 PHP 将内容修改为 xml。如果对 PHP 和 XML 的权限为 777，则所有工作都已完成。程序通过以下方式发送数据

```
WebRequest request = WebRequest.Create(url); 
```

我的问题是如何保护文件，只允许我的程序访问 PHP，以及如何只允许 PHP 编写 XML 文件。

# image - 定位系统中摄像机倾斜的程序化校正

> ID：14090787
> 
> 赞同：6
> 
> 时间：2012-12-30T12:41:58.433
> 
> 标签：image, image-processing, computer-vision

简要介绍：
我们正在开发一种定位系统，其工作方式如下。我们的摄像头位于机器人上并朝上（看天花板）。在天花板上，我们有类似地标的东西，多亏了我们可以计算机器人的位置。它看起来像这样：

![在此处输入图像描述](../Images/7605a1cb0e61465ba083cf6bb47d4334.png)

我们的问题：
相机有点倾斜（我认为是 0-4 度），因为机器人的表面并不完全平整。这意味着，当机器人转身但停留在相同的坐标时，相机会看到天花板上的不同位置，因此我们的定位程序会产生机器人的不同位置，即使它只是转身而没有移动少量。

我们当前的（硬编码）解决方案：
我们从相机拍摄了一些测试照片，将其围绕镜头轴转动。从我们推断出它倾斜的图片中，它大约是倾斜的。图片“向上”方向4度。使用一些简单的几何变换，我们设法减少了倾斜效应并找到了真实的相机位置。在下面的图片中，灰点标记了图片的中心，黑点是天花板上相机所在的真实位置。黑点是从灰点转换而来的（它的位置是通过校正灰点位置来计算的）。您可以很容易地注意到，灰点在天花板上形成一个圆圈，黑点是这个圆圈的中心。

![在此处输入图像描述](../Images/5483be5b9d101db69be361d1163ab36e.png)

![在此处输入图像描述](../Images/28fcdaa832c1f48a175ebe015a455ce7.png)

![在此处输入图像描述](../Images/df4ef88eb68047e788adc21ee4d1aeae.png)

![在此处输入图像描述](../Images/de64fa47a7401464f7973d1d63547609.png)

我们解决方案的问题：
我们的方法完全不可移植。如果我们将相机移动到新机器人上，则必须完全重新校准倾斜的角度和方向。因此，我们希望将校准阶段留给用户，这需要拍摄一些照片，由他评估倾斜参数，然后在程序中设置它们。我对你的问题是：你能想出更好的（更自动的）解决方案来计算倾斜参数或校正图片上的倾斜吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-30T16:46:12.330

不错的作品。进行自动校准是一个很好的挑战。

一个想法是使用屋顶瓦片的平行线：如果相机完全水平，那么图片中的所有线也将平行。如果相机倾斜，那么所有线都将被割线（它们在消失点相交）。

现在，这可能很难实现。使用您使用的相机，首先需要校正失真，以使线条确实笔直。

您的实用方法可能更简单，更健壮。正如您所描述的，它似乎可以自动变得用户友好。让机器人自行开启并务实地识别图片中哪个点保持在同一位置。

# ms-access - 如何在打开时显示带有滚动条的连续表单的左侧

> ID：14090788
> 
> 赞同：3
> 
> 时间：2012-12-30T12:42:00.723
> 
> 标签：ms-access, scrollbar, continuous-forms

我有由标题部分和详细信息部分组成的连续表格。详细信息部分的控件绑定到记录集，而标题中的控件未绑定。

在打开时，将焦点放在详细信息部分的第一个（左）控件上，或者，如果记录集为空，则将焦点放在标题部分的第一个（左）控件上。在这种情况下，对于需要水平滚动条的表单，滚动条将设置在表单的右侧，而左侧的信息将被隐藏，从而使用户感到困惑。

有什么方法可以确保在所有情况下，我的表单都会在左侧可见的情况下打开？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T09:00:10.163

通常为了避免焦点差异，我使用一个小的透明按钮，我只是`btDeadFocus`在表格的标题 - 或详细信息部分 - 中调用它。

这个不可见的按钮实际上除了捕捉焦点之外没有任何作用。我只是确保使用 tab 顺序列表将此按钮设置为表单上的第一个控件。

在无法将焦点保持在控件上的情况下，该按钮也很有用。例如需要禁用的控件。我只是把它移到了`btDeadFocus`。

# actionscript-3 - AS3 游戏中流畅/准确的 Kinect 运动

> ID：14090794
> 
> 赞同：1
> 
> 时间：2012-12-30T12:42:49.777
> 
> 标签：actionscript-3, kinect, physics

对于一个项目，我需要使用 Kinect for Xbox 制作一个 flashgame。使用 AS3NUI 库来访问大多数 Kinect 功能对我来说效果很好。

这是一个乒乓球游戏，你必须通过手部运动垂直移动你的球拍。我尝试了几种移动桨的方法，但没有一个是真正准确的。如果它们更准确，它们就不再平滑了。

我的第一个方法是将 paddle.y 设置为 hand.y 的值。

```
 _paddleLeft.y = (userLeft.leftHand.position.y); 
```

当然，结果很糟糕。这是我的下一次尝试：

```
 _paddleLeft.y = (userLeft.leftHand.position.rgbRelative.y * stage.stageHeight*2); 
```

这非常准确，但一点也不顺畅，有时很难到达舞台的顶部或底部。

最后，我尝试了其他方法。我保存了最后一个 Y 位置的手，并检查了新位置是更高还是更低，然后我向上或向下移动了桨。

```
 currYLeft = userLeft.leftHand.position.rgb.y;
 currYRight = userRight.rightHand.position.rgb.y;

if (currYLeft > prevYLeft + 10){
    isDown1 = true;
    isUp1 = false;
}else if( currYLeft < prevYLeft - 10){
    isDown1 = false;
        isUp1 = true;
}

prevYLeft = userLeft.leftHand.position.rgb.y;
    prevYRight = userRight.rightHand.position.rgb.y; 
```

在另一个 enterframehandler 中，我让它们向上或向下移动。

这是我实现的最流畅的方式，但它不再很准确。前两种方法没有某种延迟。

我想知道是否有可能同时使运动平稳和准确？以及这是怎么可能的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T16:07:52.253

如果您已经有一个准确的解决方案，也许您可​​以尝试在其中放一些缓和以使其平滑。您可能想尝试在 enterFrame 循环中使用它

```
 _paddleLeft.y += 
            ((userLeft.leftHand.position.rgbRelative.y * stage.stageHeight*2)
             -_paddleLeft.y)*0.3; 
```

0.3 可以更改为 0 到 1 之间的其他数字，具体取决于您想要的缓动速度......这是我最好的猜测，希望这会有所帮助^^

# jquery - Jquery 图片上传计数和限制

> ID：14090799
> 
> 赞同：1
> 
> 时间：2012-12-30T12:43:43.053
> 
> 标签：jquery

我一直在尝试想出一个可能的解决方案来上传带有即时预览的图像。这一切都是通过 J'Query 完成的，但是如果用户尝试上传的内容超出了允许的范围，我希望发出警报。

上传图片的代码：

```
$(".share_button").click(function() 
        {
            var shareval = $("#share").val();
            var uploadvalues=$("#uploadvalues").val();
            var X = $('.preview').attr('id');

            if(X)
            {
                var Z = X+','+uploadvalues;
            }   
            else
            {
                var Z = 0;
                var dataString = 'share='+ shareval+'&uploads='+Z;
            }

            if($.trim(shareval).length==0)
            {
                alert("Please Enter Some Text");
            }
            else
            {
                // Hide No Shares If Visible
                $("#Nodata").slideUp();                    
                // Display Quick Update
                $("#flash").show();
                $("#flash").fadeIn(400).html('Posting Share...');
                $.ajax({
                    type: "POST",
                    url: "<?php echo SITE_PATH; ?>app/web/home/share_ajax.php",
                    data: dataString,
                    cache: false,
                    success: function(html)
                    {

                        $("#flash").fadeOut('slow');
                        $("#content").prepend(html);
                        $("#share").val('');   
                        $("#share").focus();
                        $('#preview').html('');
                        $('#uploadvalues').val('');
                        $('#photoimg').val('');
                    }
                });

                $("#preview").html('');
                $('#imageupload').slideUp('fast');
            }
            return false;
        }); 
```

我认为一个解决方案可以将它放在文本检查之前：

```
 if( $.trim(X).length > 2)
 {
   alert("Only Two Images No More");
 } 
```

但这没有用，我对 J'Query 不太感兴趣。任何帮助或指导将不胜感激。

更新：

这是 HTML 标记：

```
 <div id="imageupload" style="display:none;">        
    <form id="imageform" method="post" enctype="multipart/form-data" action='<?php echo SITE_PATH; ?>app/web/home/image_ajax.php'> 
        <!-- Upload Preview -->
        <div id="preview"></div>
        <!-- Upload Image -->
        <div class="clear"></div>
        <input type="file" name="photoimg" id="photoimg" style="display:none"/>
        <a id="upload-share-button" class="button" style="width:570px;text-align:center;margin:10px;">Upload Images</a>
        <input type='hidden' id='uploadvalues'/>
    </form>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T13:11:17.067

似乎您正在为文件输入使用多个属性，您可以使用对象`length`的属性检查所选图像/文件的长度`files`：

```
var len = $("#uploadvalues").get(0).files.length;
if (len > 2) {
   alert("Only Two Images No More");
   return;
} 
```

[http://jsfiddle.net/T2Xhk/](http://jsfiddle.net/T2Xhk/)

请注意，Internet Explorer 不支持文件 API。

# c++ - MPI 和集群

> ID：14090800
> 
> 赞同：3
> 
> 时间：2012-12-30T12:43:44.590
> 
> 标签：c++, cluster-computing, mpi, hpc

只需学习在由约 100 个节点组成的超级计算机上编程，每个节点由 4 个 Xeon CPU 和 64GB 内存组成。

我想要做的是给每个节点分配作业，然后在每个节点上创建本地多线程程序，我想知道的是，默认情况下，当 MPI 创建一组进程时，每个节点之间是否存在 1-1 映射任务进程和一个特定的本地节点是否？（在我的例子中，它是一个由 4 个 Xeon CPU 组成的节点，总共有 24 个内核和 64GB 内存）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T13:04:00.133

MPI 将在 N 个节点上运行 M 个进程，其中 M 可能小于、等于或大于 N。

[该站点](http://www.clustermonkey.net/MPI/processes-processors-and-mpi-oh-my.html)描述了设置。

我找不到您问题的直接答案，但互联网上有许多网站讨论`process migration`和`checkpointing`. 但这些网站的总体主题似乎是，这仍然是一项正在进行中的工作。因此，我不希望这会在您的 MPI 实现中自动发生。

[该站点](https://www.mcs.anl.gov/research/projects/mpi/mpi-standard/mpi-report-1.1/node143.htm#Node147)讨论了`MPI_GET_PROCESSOR_NAME`可用于进程迁移的命令，但指出“MPI 中没有任何内容需要或定义进程迁移；MPI_GET_PROCESSOR_NAME 的定义只是允许这样的实现”。使用此命令，您至少可以检查您的代码是否正在被主动迁移。

# php - 回显变量，但不显示结果

> ID：14090801
> 
> 赞同：-1
> 
> 时间：2012-12-30T12:43:52.770
> 
> 标签：php, mysql

**编辑：这很尴尬......我忘了连接到数据库。带来不便敬请谅解 ：（**

我想回显变量 $number_row 的值，但没有显示任何内容

```
<?php 
$resultado = mysql_query("SELECT * FROM videos"); // this counts how many videos are
$number_rows = mysql_num_rows($resultado);
echo "$number_rows";
?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-30T12:49:56.000

您编写的代码没有任何问题。问题一定出在其他地方。你成功连接mysql了吗？

尽管已弃用，因此不应像使用它一样使用它，您的代码中有类似的东西吗？

```
mysql_connect('localhost','name','pwd');
mysql_select_db('db'); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-30T12:52:50.063

试试这个：

```
$resultado = mysql_query("
    SELECT COUNT(*) AS num_of_videos 
    FROM videos
"); // this counts how many videos are
if ($resultado) {
    $row = mysql_fetch_array($resultado);
    echo $row["num_of_videos"];
} 
```

# php - WOO 主题缺少博客页面

> ID：14090802
> 
> 赞同：1
> 
> 时间：2012-12-30T12:43:53.360
> 
> 标签：php, wordpress, woothemes

我正在为客户[http://draristotle.com/](http://draristotle.com/)在此站点上工作，但只是注意到博客页面无法正常工作。几天前它还在工作。我对 WOO 主题没有太多经验，但我检查了它是否是指定帖子所在位置的特定页面，是否通过 WP 设置设置但找不到。

它是一个函数吗？如何找到博客页面？任何想法/修复？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T14:05:27.117

我很确定您必须创建一个空白页面（您可以将其称为“博客”），并且从右侧有一个名为“模板”的下拉框。从该下拉框中，您应该能够看到博客模板选项。

如果您在前端看不到新页面，请记住将新页面添加到您的菜单中。

希望这可以帮助 ;）

# backbone.js - 多次触发主干验证

> ID：14090807
> 
> 赞同：0
> 
> 时间：2012-12-30T12:44:21.433
> 
> 标签：backbone.js

我想知道为什么当我将模型添加到集合时，模型上的 Validate 方法会运行多次。

即使我将我的模型验证剥离到这个...

```
Client.Model = Backbone.Model.extend ({

    validate : function(attrs) {
        if ( !attrs.first_name ){
            return 'Required';
        }   
    }  

}); 
```

如果我从 validate 方法中进行 console.log() ，我可以看到它被调用了 5 次。前两个验证成功，第三个失败，然后第四个和第五个也通过（随后它在服务器上正确同步）

这造成了一个问题，因为我正在构建一个自定义消息插件，并且在验证发生时它被调用了 5 次。

我知道当我创建一个新模型并从服务器检索模型时它会被正确调用。但我无法理解的是这个“第三次”验证调用总是失败。（顺便说一句，我已经设法弄清楚这不是服务器问题）

我想知道我在这里缺少什么..

提前致谢。

:)

JSBIN - [http://jsbin.com/ucowoq/2/edit](http://jsbin.com/ucowoq/2/edit)

检查控制台，显然POST有错误，但它显示验证方法运行了5次，在我的应用程序上，它每次都在第3次验证失败！服务器只为创建的模型返回 500 错误或 JSON。

希望这对任何查看此内容的人有所帮助。

编辑：我想出了这个技巧来让一切正常工作。我仍然对 validate 方法被调用 5 次感到不满意，但是因为导致验证失败的 1 次出现包含一个具有键和“未定义”值的对象，所以我只是在返回任何内容之前检查它。这允许我实现我的“消息”插件，因为我现在可以在正确的时间检索错误。

```
 validate: function( attrs ){
      if (attrs.first_name !== undefined){
        if (!attrs.first_name)
          return 'first name required';
      }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T14:54:46.200

造成这种混乱的行是：[Backbone 0.9.9 Line 411](https://github.com/documentcloud/backbone/blob/0.9.9/backbone.js#L411)它在再次设置之前清除模型的属性。

为什么这很重要？它将无法验证，是的，但该验证的结果永远不会在任何地方使用，因此您不需要在编辑中检查 undefined 。

# php - 从链接数组创建 youtube 播放列表

> ID：14090812
> 
> 赞同：0
> 
> 时间：2012-12-30T12:44:38.607
> 
> 标签：php, arrays, youtube, youtube-api, playlist

嗨，我可以制作一个 php 函数，我可以在其中传递一组 youtube 链接，并在 youtube 中为某个用户创建一个播放列表，我已经阅读了 youtube 文档，但仍然无法弄清楚。 [https://developers.google.com/youtube/2.0/developers_guide_php#Adding_a_Playlist_Video](https://developers.google.com/youtube/2.0/developers_guide_php#Adding_a_Playlist_Video) 在文档上显示以下代码。

```
 $newPlaylist = $yt->newPlaylistListEntry();
$newPlaylist->summary = $yt->newDescription()->setText('description of my new playlist');
$newPlaylist->title = $yt->newTitle()->setText('title of my new playlist');
// post the new playlist
$postLocation = 'http://gdata.youtube.com/feeds/api/users/default/playlists';
try {
  $yt->insertEntry($newPlaylist, $postLocation);
} catch (Zend_Gdata_App_Exception $e) {
  echo $e->getMessage();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T13:46:04.710

我几乎不是专家，但我认为这就是您要寻找的：

```
//Make a loop to go over all of the values within the array
     for ($i = 0; $i <= count($array); $i++){
$postUrl = $playlistToAddTo->getPlaylistVideoFeedUrl();
// video entry to be added
$videoEntryToAdd = $yt->getVideoEntry($array[i]);

// create a new Zend_Gdata_PlaylistListEntry, passing in the underling DOMElement of the VideoEntry
$newPlaylistListEntry = $yt->newPlaylistListEntry($videoEntryToAdd->getDOM());

// post
try {
  $yt->insertEntry($newPlaylistListEntry, $postUrl);
} catch (Zend_App_Exception $e) {
  echo $e->getMessage();
}
} 
```

该变量`$array`显然应该是一个包含 ytvideos 'ID' 的一维数组。希望有帮助。

# oracle - 抑制 oracle 数据未找到异常

> ID：14090818
> 
> 赞同：1
> 
> 时间：2012-12-30T12:45:26.233
> 
> 标签：oracle, stored-procedures, plsql

我有一个独特的场景，我需要将多个列值放入多个变量中。我面临的问题是，当一个列值存在时，其他列值不需要存在，因此我最终得到 DATA NOT FOUND 异常，而我想抑制它并将空值放入剩余的变量中。

```
 select nvl(A,''), nvl(B,''), nvl(C,'') 
   into A1, B1, C1  
   from SAMPLE_TABLE 
  where name ='W6'; 
```

表中A的值可以是'hello'，表中B的值为空，C的值为空。
当语句在存储过程的主体内执行时，我不希望出现 DATA NOT FOUND 异常，而是希望 A1 的值为“hello”，B1 为“”，C1 为“”。我将动态运行它并且 where 条件不断变化，因此我也不想打开那些游标。谁能让我知道我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-30T12:52:51.077

你的分析不太正确。如果整行丢失，您只会收到*DATA NOT FOUND*`name ='W6'`错误，即 WHERE 条件不选择任何行。

为避免该错误，您可以使用异常处理：

```
BEGIN
    select A, B, C 
    into A1, B1, C1  
    from SAMPLE_TABLE where name ='W6';

EXCEPTION
    WHEN NO_DATA_FOUND THEN
        A1 := 'hello';
        B1 := NULL;
        C1 := NULL;
END; 
```

**更新**：

如果即使 WHERE 条件不匹配任何行，您也想选择 NULL 值，那么您可以尝试以下查询：

```
SELECT t.A, t.B, t.C
FROM DUAL
LEFT JOIN SAMPLE_TABLE t ON t.name = 'W6'; 
```

**更新 2：查询正好一行**：

此查询应始终返回单行：

```
SELECT A, B, C
  INTO A1, B1, C1
FROM (
   SELECT t.A, t.B, t.C
   FROM DUAL
   LEFT JOIN SAMPLE_TABLE t ON t.name = 'W6'
) x
WHERE ROWNUM <= 1; 
```

# c# - 实体框架不保存/停止正在重建的数据库

> ID：14090819
> 
> 赞同：3
> 
> 时间：2012-12-30T12:45:29.320
> 
> 标签：c#, entity-framework, persistence

我正在使用[http://msdn.microsoft.com/en-us/data/jj591506](http://msdn.microsoft.com/en-us/data/jj591506)上的教程自学实体框架。我正在使用下面的代码。

```
using (var db = new DatabaseEntities())
{
        var section = new Section
        {
            SectionID = 1,
            SectionName = "Bob"
        };
        db.Sections.Add(section);
        db.SaveChanges();
} 
```

由于某种原因，此代码未写入我的数据库。没有错误被抛出。你有什么想法我可以看到或可能是什么原因？这是上面链接的 MSDN 页面上给出的示例的几乎完全相同的副本。

这个问题看起来非常类似于这个问题中发生的事情：[Entity Framework not 实际上保存更改](https://stackoverflow.com/questions/3736543/entity-framework-not-actually-saving-changes)不幸的是回答这个问题的人没有解释他们是如何解决这个问题的。他们解释说，他们检查了转到数据库的 SQL，这很好，经过一番调查，结果证明他们在项目中有一个数据库副本，在重建时覆盖了输出中的那个副本. 我的问题是我不知道如何阻止这种情况的发生。你能帮我吗？

我也看过：

*   [实体框架保存上下文](https://stackoverflow.com/questions/12387771/entity-framework-saving-context)
*   [实体框架：未保存的附加实体](https://stackoverflow.com/questions/2776041/entity-framework-attached-entities-not-saving)
*   来自谷歌的许多页面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T22:21:22.730

所以我最终接受了上面的建议，不幸的是创建了一个新项目，但没有成功。10 个小时的谷歌搜索后，我找到了解决方案。我怀疑数据库正在重建。

要防止数据库被重建，请在解决方案资源管理器中右键单击它并转到属性。在属性下找到属性`Copy to output directory`并将值更改为`Do not copy`。

这实际上破坏了我的代码，因为数据库不在输出目录中。为了让程序再次运行，我必须手动将数据库的副本放在我的调试目录中。对于我的项目。在带有 Visual Studio 2012 的 Windows 8 中，它位于：

```
%UserProfile%\Documents\Visual Studio 2012\Projects\PROJECTNAME\PROJECTNAME\bin\Debug 
```

希望这可以节省其他人连续几个小时在 Internet 上搜索的时间。

# android - sharedpreferences 不更新

> ID：14090820
> 
> 赞同：0
> 
> 时间：2012-12-30T12:45:35.347
> 
> 标签：android

我有一个更改动画持续时间的代码，首先启动程序“preferenze”运行以读取 sharedpreferences，稍后，用户可以通过 Preferences.class 更改动画持续时间。似乎还可以，但我无法更新首选项，我的代码：

```
@Override
    public void onCreate(Bundle savedInstanceState){ 
      super.onCreate(savedInstanceState); 
```

// 每次应用启动时运行

```
preferenze(); 
```

// 读取共享私有 void preferenze() {

```
 SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(getBaseContext());
        CheckboxPreference = prefs.getBoolean("checkboxPref", true);
        String ListPreference = prefs.getString("listpref", "1500");

public boolean onCreateOptionsMenu(Menu menu) {

menu.add("Impostazioni").setOnMenuItemClickListener(new OnMenuItemClickListener() {
            public boolean onMenuItemClick(MenuItem item) {
                    //Toast.makeText(getApplicationContext(), "Vai al Racconto... Non attivo", Toast.LENGTH_SHORT).show();
                    //goToPage();
                Intent settingsActivity = new Intent(getBaseContext(),
                        Preferences.class);
        startActivity(settingsActivity);

public void onSharedPreferenceChanged(SharedPreferences prefs,
            String listpref) {
        Toast.makeText(getApplicationContext(), "eseguo changed: "+listpref, Toast.LENGTH_SHORT).show();
          if (fade == 500){
            animazione = R.style.MyCustomTheme1;
        }
        else if (fade == 1000){
            animazione = R.style.MyCustomTheme2;
        }
        else if (fade == 1500){
            animazione = R.style.MyCustomTheme3;
        }
        else if (fade == 2000){
            animazione = R.style.MyCustomTheme4;
        }

    } 
```

显现：

```
<uses-sdk
    android:minSdkVersion="7"
    android:targetSdkVersion="17" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T12:59:17.900

If your `onSharedPreferenceChanged` is being called then you forget to commit your edited changes to your properties file. Try to replace you method with the following one:

```
public void onSharedPreferenceChanged(SharedPreferences prefs,
            String listpref) {
        Toast.makeText(getApplicationContext(), "eseguo changed: "+listpref, Toast.LENGTH_SHORT).show();
          if (fade == 500){
            animazione = R.style.MyCustomTheme1;
        }
        else if (fade == 1000){
            animazione = R.style.MyCustomTheme2;
        }
        else if (fade == 1500){
            animazione = R.style.MyCustomTheme3;
        }
        else if (fade == 2000){
            animazione = R.style.MyCustomTheme4;
        }

        SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(getBaseContext());
        SharedPreferences.Editor editor = prefs.edit();
        editor.putString("listpref", fade);
        editor.commit();
    } 
```

IDK if this your point, but you should follow the kind of ideia. After the change always commit edited values. Let me know if it works.

# regex - 正则表达式：匹配除字符串之外的所有内容

> ID：14090826
> 
> 赞同：1
> 
> 时间：2012-12-30T12:46:12.647
> 
> 标签：regex, .htaccess, mod-rewrite

我有正则表达式

```
^(.)+?domain\.com 
```

哪个大砍刀

```
www.domain.com or
domain.com or
something.domain.com but
.domain.com too. 
```

我想要的是“过滤掉”“.domain.com”的可能性。它应该匹配 [something].domain.com 和 domain.com 但不匹配 .domain.com。（或 ..domain.com）。它应该是一个有效的子域。完成这项工作的正确正则表达式是什么？

更新了问题以阐明要求。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-30T12:48:20.530

这个模式[会做](http://www.regexpal.com/?flags=gm&regex=%5E(.%2B%5C.%7C)domain%5C.com&input=www.domain.com%0Adomain.com%0Asomething.domain.com%0A.domain.com%0Adomain.com%0Asub.domain.domain.com)

```
^([^.]+\.)*domain\.com 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T12:53:14.143

实际上它也会匹配`otherdomain.com`。更好的方法可能是允许出现零次或一次非点+点：

```
^([^.]+\.)?domain.com$ 
```

正如评论中所建议的，要允许多个级别的子域，请更改`?`为`*`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T13:13:34.270

这将允许多个子域和域本身

```
^(.*\.)?domain.com& 
```

# c++ - VC++ 错误 LNK2005 已经定义在

> ID：14090827
> 
> 赞同：3
> 
> 时间：2012-12-30T12:46:37.000
> 
> 标签：c++, visual-c++, include, linker-errors

嗨，我目前正在使用 C++ 编写程序，而我的 IDE 显然是 VC++，我遇到了这个链接器错误。

```
error LNK2005: "class Graphics TheGraphics" (?TheGraphics@@3VGraphics@@A) already defined in Game.obj 
```

我查找了如何修复它，但没有一个链接可以修复它。所以我想我自己问你。这些都是我的文件

```
Game.h
Graphics.h
Inc.h
Main.h

Game.cpp
Graphics.cpp
Main.cpp
WndProc.cpp 
```

在所有头文件中我都有

```
#ifndef ...
#define...
..
#endif 
```

而且我在头文件中也有一些包含。

在 Inc.h 我在 #ifndef 和 #define 之间有这个

```
#include <Windows.h>
#include <d3d9.h>
#include <d3dx9.h>

#include "Game.h"
#include "Graphics.h" 
```

在 Main.h 我在 #ifndef 和 #define 之间有这个

```
#include "Inc.h" 
```

我还创建了对象 Game 和 Graphics 对象

```
extern Game TheGame;
extern Graphics TheGraphics 
```

我还声明了 1 个函数

```
LRESULT CALLBACK WndProc(HWND hWnd,
                         UINT Msg,
                         WPARAM wParam,
                         LPARAM lParam); 
```

这是 Main.h

在 Game.h 和 Graphics.h 我在 #ifndef 和 #define 之前有这个

```
#include "Main.h" 
```

在 Game.h 中，我创建了一个名为 Game 的类和一个名为 GAMESTATE 的枚举。在 Graphics.h 中，我创建了一个名为 Graphics 的类。

该类的所有 .cpp 文件仅包含其类头文件，而 WndProc 包含 Main.h

毕竟我在编译时得到了这个。

```
1>Graphics.obj : error LNK2005: "class Graphics TheGraphics" (?TheGraphics@@3VGraphics@@A) already defined in Game.obj
1>Graphics.obj : error LNK2005: "class Game TheGame" (?TheGame@@3VGame@@A) already defined in Game.obj
1>Main.obj : error LNK2005: "class Graphics TheGraphics" (?TheGraphics@@3VGraphics@@A) already defined in Game.obj
1>Main.obj : error LNK2005: "class Game TheGame" (?TheGame@@3VGame@@A) already defined in Game.obj
1>WndProc.obj : error LNK2005: "class Graphics TheGraphics" (?TheGraphics@@3VGraphics@@A) already defined in Game.obj
1>WndProc.obj : error LNK2005: "class Game TheGame" (?TheGame@@3VGame@@A) already defined in Game.obj
1>F:\Games\Zombie Lypse\Release\Zombie Lypse.exe : fatal error LNK1169: one or more multiply defined symbols found 
```

请帮助我到处寻找，我试图自己修复它。依然没有。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T13:08:52.883

您已经在任何地方外部化了全局变量，但没有在任何地方定义它。

`extern`不定义变量。它只是告诉编译器该变量是在别处定义的。所以你必须在别处实际定义它。

你可以这样做。

在头文件中

```
/* main.h */

MYEXTERN Game TheGame;
MYEXTERN Graphics TheGraphics 
```

在第一个 .c 文件中

在 main.cpp

```
/* MYEXTERN doesn't evaluate to anything, so var gets defined here */
#define MYEXTERN 
#include "main.h" 
```

在其他 .cpp 文件中

```
/* MYEXTERN evaluates to extern, so var gets externed in all other CPP files */
#define MYEXTERN extern
#include "main.h" 
```

所以它只在一个 .cpp 文件中定义，并在所有其他文件中被外部化。

# php - 搜索字符串中间的匹配项

> ID：14090831
> 
> 赞同：0
> 
> 时间：2012-12-30T12:47:23.770
> 
> 标签：php, regex, string

我的正则表达式：

`(?<=span class="ope">)[a-z0-9]+?\.(pl|com|net\.pl|tk|org|org\.pl|eu)|$(?=<\/span>)$`

目前，只有在文本的开头找到字符串时它才会匹配，当它在中间时，它会失败。

例如。

`Something example.com`- 失败

`example.com Something`- 成功（`example.com`找到）。

这个有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T14:36:50.300

```
(?<=span class="ope">).*?([a-zA-Z0-9]*\.(pl|com|net\.pl|tk|org|org\.pl|eu)).*(?=<\/span>) 
```

测试：[http ://www.regex101.com/r/wK0aA2](http://www.regex101.com/r/wK0aA2)

如果你使用它，你将不得不拉出第 1 组而不是第 0 组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T14:45:08.477

这是一个经过测试的解决方案：

```
(?<=span class="ope">).*?(?P<domain>\w+\.(?:pl|com|net\.pl|tk|org|org\.pl|eu)).*?(?=<\/span>) 
```

它返回`domain`您想要的域的密钥。在这里试试：[http ://www.regex101.com/r/mK1fP0](http://www.regex101.com/r/mK1fP0)

两人背后的问题。第二个必须是前瞻。我还插入了`.*?`两次以匹配域中的一些内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T13:01:10.913

试试这个

```
(?<=span class="ope">)[a-zA-Z0-9\s]*[a-z0-9]+?\.(pl|com|net\.pl|tk|org|org\.pl|eu)|$(?=<\/span>)$ 
```

# actionscript-3 - 将其设为外部后的类错误

> ID：14090832
> 
> 赞同：0
> 
> 时间：2012-12-30T12:47:29.417
> 
> 标签：actionscript-3, flash, class, object

我在我的舞台上有对象 char，我用 main.as 控制它，但是当我决定把它做成 char.as 并将它添加到 main.as 时，就变成了错误..

**主文件**

```
package 
{

    import flash.display.MovieClip;
    import flash.events.*;
    import flash.display.Sprite;
    import flash.sampler.DeleteObjectSample;
    import flashx.textLayout.utils.CharacterUtil;

    public class main extends MovieClip
    {

        public function main()
        {
            var mychar:char = new char();
            mychar.x = 60;
            mychar.y = 60;
            addChild(mychar);
        }

    }
} 
```

**字符.as**

```
package 
{

    import flash.display.MovieClip;
    import flash.events.*;
    import flash.display.Sprite;
    import flash.sampler.DeleteObjectSample;

    public class char extends MovieClip
    {
        //char vars
        var isRight:Boolean = false;
        var isLeft:Boolean = false;
        var isUp:Boolean = false;
        var isDown:Boolean = false;
        var angleDegree;
        var angleRadian;
        //stage vars
        var objects = new Array(50);

        public function char()
        {
            for (var i = 0; i<numChildren; i++) {
                objects[i] = getChildAt(i);
            }

            addEventListener(Event.ENTER_FRAME, charEnterFrame);
            addEventListener( MouseEvent.MOUSE_DOWN , MouseClick);
            addEventListener(KeyboardEvent.KEY_DOWN, KeyDown);
            addEventListener(KeyboardEvent.KEY_UP, KeyUp);
        }
        function charEnterFrame(e:Event)
        {

            // **Char rotation
            angleRadian=Math.atan2(mouseY-this.y,mouseX-this.x);
            angleDegree = angleRadian * 180 / Math.PI;
            this.rotation = angleDegree;
            // **Char Movement
            if (isRight==true)this.x +=  5;
            if (isLeft==true)this.x -=  5;
            if (isUp==true)this.y -=  5;
            if (isDown==true)this.y +=  5;

        }
        function MouseClick(event:MouseEvent)
        {
            var radius = 30;
            trace(objects.length);
            var dx = radius * Math.cos(angleRadian);
            var dy = radius * Math.sin(angleRadian);
            var movex = 20 * Math.cos(angleRadian);
            var movey = 20 * Math.sin(angleRadian);
            var bullet = new Sprite();
            bullet.graphics.beginFill(0x000000);
            bullet.graphics.drawCircle(this.x+dx, this.y+dy, 3);
            bullet.graphics.endFill();
            var i = 1;
            var f:Function;
            addChild(bullet);
            bullet.addEventListener(Event.ENTER_FRAME, f = function(){ 
            bullet.x += movex*i;
            bullet.y += movey*i;
            for (var j = 0; j < objects.length-1; j++) {
                if (bullet.hitTestObject(objects[j])) {
                    bullet.graphics.clear();
                }
            }
            i++;
            });

        }

        function KeyDown(event:KeyboardEvent):void
        {
            if (event.keyCode == 39)isRight = true;
            if (event.keyCode == 37)isLeft = true;
            if (event.keyCode == 38)isUp = true;
            if (event.keyCode == 40)isDown = true;
        }
        function KeyUp(event:KeyboardEvent):void
        {
            if (event.keyCode == 39)isRight = false;
            if (event.keyCode == 37)isLeft = false;
            if (event.keyCode == 38)isUp = false;
            if (event.keyCode == 40)isDown = false;

        }

    }
} 
```

闪现结果：http://www.shareswf.com/media/games/swf/28063.swf

# ruby-on-rails - 如何使用导轨预填充文本区域

> ID：14090834
> 
> 赞同：4
> 
> 时间：2012-12-30T12:48:17.137
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms

我想用一个值预设一个文本区域，但它不起作用。

```
<%= f.text_area(:self_summary, :input_html => { "date-pre" => "I will get to this later."}, :class => "textareastyle") %> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-30T12:55:19.227

```
<%= f.text_area(:self_summary, :value => "I will get to this later.", :class => "textareastyle") %> 
```

# java - 具有分离的键/值级联行为的两个实体类的映射

> ID：14090837
> 
> 赞同：1
> 
> 时间：2012-12-30T12:48:47.730
> 
> 标签：java, jpa-2.0

我有三个实体类，`Key`现在看起来像`Value``X``X`

```
public class X {
  ...
  @ManyToMany
  Map<Key, Value> aMap;
  ...
} 
```

我的目标是配置`aMap`这种方式，当我从中删除映射时，`Value`它将从 db 中删除但
`Key`保留下来。
基本上，`Key`应该不受所有 db 操作的影响`X`，但`Value`
应该与`X`.
这可能吗？

# iphone - how to download multiple images asyncronously

> ID：14090844
> 
> 赞同：-1
> 
> 时间：2012-12-30T12:50:44.870
> 
> 标签：iphone, objective-c, ios

> **Possible Duplicate:**
> [Download image asynchronously](https://stackoverflow.com/questions/9763979/download-image-asynchronously)

I would like to download multiple images asynchronously. I have array of 10 images and I want to show these images in 10 `uiimageview`, I am doing like this but it show only one image

```
- (void)loadImage {
  NSData* imageData = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:[myarray objectatindex:0]]];
  UIImage* image = [[[UIImage alloc] initWithData:imageData] autorelease];
  [imageData release];
  [self performSelectorOnMainThread:@selector(displayImage:) withObject:image waitUntilDone:NO];
}

The final method we need to create takes in the image to display and sets it on our image view.

- (void)displayImage:(UIImage *)image {
  [imageView setImage:image]; //UIImageView
} 
```

So kindly tell me how I can show multiple images on different without creating 10 different methods.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T12:54:48.503

Don't use the `initWithContentsOfURL` method of `NSData`, which is synchronous.

You may want to consider the UIImageView+AFNetworking category that you can find [here](https://github.com/AFNetworking/AFNetworking/tree/master/AFNetworking), that adds to `UIImageView` the ability to retrieve its content asynchronously.

As suggested in the comments you can also look at [SDWebImage](https://github.com/rs/SDWebImage), which does basically the same.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T13:55:12.623

只需将这些类放入您的项目中，您就必须导入一些类。对于 sdwebimage，您将获得一个用于 uiimageview 的方法，类似于“loadimagefrom url:withplaceholderimage”，一旦我不记得方法名称就检查一下。

# html - Span 和 img 标签作为 div 的垂直中心

> ID：14090850
> 
> 赞同：0
> 
> 时间：2012-12-30T12:52:13.110
> 
> 标签：html, css

我有 div 标签，在他里面是 span 和 img 标签，我希望 span 和 img 将作为 div 的垂直中心，我正在调整这一点，但 span 标签`margin-top`不起作用，我无法将 span 标签居中。什么是解决方案？

```
<div>
    <span>
        some text
    </span>
    <img  src="..." />
</div> 
```

CSS：

```
div {
    width: 200px; 
    height: 40px; 
    background: #ccc   
}

span {
    margin-top: -10px; 
}

img {
   width:20px;
    height: 20px;   
    margin-top: 10px;
} 
```

这是演示[http://jsfiddle.net/Q9utY/4/](http://jsfiddle.net/Q9utY/4/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T13:01:47.833

用填充试试这个

```
div {
   width: 200px; 
   padding: 20px;
   background: #ccc   
}

img {
   width:20px;
   height: 20px;   
   vertical-align: middle;
} 
```

[http://jsbin.com/isijop/1/](http://jsbin.com/isijop/1/)

在这里我们可以使用 line-height 和 height

```
div {
   width: 200px; 
   height: 40px;
   line-height: 40px;
   background: #ccc   
}

img {
   width:20px;
   height: 20px;   
   vertical-align: middle;
} 
```

[http://jsbin.com/apawag/1/](http://jsbin.com/apawog/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T13:09:04.147

Span 默认是内联元素，所以边距不影响它。

要解决此问题，请添加`display:block`或`display:inline-block`跨越。

但我个人认为这不是最好的方法。这是一些有6种方法的文章。

[6种使用CSS垂直居中的方法](http://www.vanseodesign.com/css/vertical-centering/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T13:01:54.490

为 img 类添加垂直对齐：中间。

```
vertical-align:middle; 
```

在这里试试

[http://jsfiddle.net/Q9utY/4/](http://jsfiddle.net/Q9utY/4/)

# devise - 通过代码登录 Devise 托管用户

> ID：14090852
> 
> 赞同：0
> 
> 时间：2012-12-30T12:52:27.763
> 
> 标签：devise

我正在使用设计来管理用户身份验证。鉴于我们有注册用户帐户的电子邮件和密码，我可以使用代码登录此帐户吗？

我问这是因为我需要为移动应用程序提供登录服务器 api。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T23:45:19.930

只是我对 Rails 很陌生，Devise 用户类有它的公共函数来调用登录/注销，这一切都在文档中

# java - animation using repaint()

> ID：14090857
> 
> 赞同：3
> 
> 时间：2012-12-30T12:52:56.223
> 
> 标签：java, swing, button, actionlistener, repaint

I am trying to create a simple animation which draws random rectangles when a button is pressed. So far I managed to create rectangle on the press of a button. I want to further develop the code so that when I press the button, more than multiple random rectangles are created. I tried to create a for loop which asks the inner class to repaint itself but it still didn't work. can anyone help me please.

```
 public class TwoButtonsRandomRec {

    JFrame frame;
    private int width = 500;
    private int height = 500;
    private DrawPanel dp;

    public int getWidth() {
        return width;
    }

    public void setWidth(int width) {
        this.width = width;
    }

    public int getHeight() {
        return height;
    }

    public void setHeight(int height) {
        this.height = height;
    }

    public static void main (String[] args)
    {   
        TwoButtonsRandomRec test = new TwoButtonsRandomRec(); 
        test.go();
    }

    public void go()
    {   
        dp = new DrawPanel();

        JButton start = new JButton("Start");
        start.addActionListener(new startListener());
        JButton stop = new JButton("Stop");
        stop.addActionListener(new stopListener());

        frame = new JFrame();
        frame.setSize(getWidth(), getHeight());
        frame.setVisible(true);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.getContentPane().add(BorderLayout.NORTH, start);
        frame.getContentPane().add(BorderLayout.SOUTH, stop);
    }

    class startListener implements ActionListener{
        public void actionPerformed(ActionEvent event){
            frame.getContentPane().add(BorderLayout.CENTER, dp);
            frame.repaint();
            frame.getRootPane().revalidate();       
            for(int i=0; i<10; i++){
                dp.repaint();
            }
        }
    }

    class stopListener implements ActionListener{
        public void actionPerformed(ActionEvent event){
            System.out.println("stop");
        }
    }

    class DrawPanel extends JPanel{

        public void paintComponent(Graphics g){
            int w = 5+(int)(Math.random() * width-5);
            int h = 5+(int)(Math.random() * height-5);
            int maxX = width-w; // diffX & diffY are used to ensure that rectangle is
            int maxY = width-h; // draw completely inside the window
            int x = (int)(Math.random() * maxX);
            int y = (int)(Math.random() * maxY);
            Color color = new Color((int) (Math.random()*256), // random red
                    (int) (Math.random()*256), // random green
                    (int) (Math.random()*256));// random blue
            g.setColor(color);
            g.fillRect(x,y,w,h);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T13:02:16.763

`repaint()`只是告诉 Swing “当你有时间时，请重新粉刷这个区域”。因此，如果您在循环中添加矩形并在每次迭代时调用 repaint，则所有矩形只会在循环完成并且操作事件已处理后才会出现。

要制作动画，您需要在单独的线程中循环。最简单的方法是使用[Swing Timer](http://docs.oracle.com/javase/6/docs/api/javax/swing/Timer.html)。启动“开始”按钮时，启动一个计时器，该计时器添加一个随机矩形并`repaint()`每 X 毫秒调用一次。按下停止按钮时，停止计时器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T13:12:45.617

您应该做的是将循环放在 paintComponent 方法中，而不是在循环中调用 repaint。所以你的paintComponent方法应该是这样的：

```
 public void paintComponent(Graphics g){
        for (int i = 0; i < 10; i++) {
        int w = 5+(int)(Math.random() * width-5);
            int h = 5+(int)(Math.random() * height-5);
            int maxX = width-w; // diffX & diffY are used to ensure that rectangle is
            int maxY = width-h; // draw completely inside the window
            int x = (int)(Math.random() * maxX);
            int y = (int)(Math.random() * maxY);
            Color color = new Color((int) (Math.random()*256), // random red
                    (int) (Math.random()*256), // random green
                    (int) (Math.random()*256));// random blue
            g.setColor(color);
            g.fillRect(x,y,w,h);
        }
    } 
```

您执行的操作应如下所示：

```
public void actionPerformed(ActionEvent event){
    frame.getContentPane().add(BorderLayout.CENTER, dp);
    frame.repaint();
    frame.getRootPane().revalidate();       
    dp.repaint();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T13:44:53.733

好吧，在这里我为你做了一个简短的 EG。它在随机屏幕位置显示随机矩形、随机时间。（**您可以根据自己的要求设置自己的随机化值和屏幕位置最大界限。**）

![在此处输入图像描述](../Images/e685c3dc21d226069ac6f33744e91f10.png)

还要注意

```
 int i=(int)(Math.random()*10);

             int j=(int)(Math.random()*10);

             for(;i<j;i++) 
```

有时我可能比 j.So,loop 可能无法在一个或两个 cliks 上工作。根据您的需要进行更改。

这是工作代码：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class SimpleStamper extends JApplet {

  public void init() {

     Display display = new Display();
     setContentPane(display);
  }

  class Display extends JPanel implements MouseListener {

     Display() {

         setBackground(Color.black);
         addMouseListener(this);
     }

     public void mousePressed(MouseEvent evt) {

         if ( evt.isShiftDown() ) {

            repaint();
            return;
         }

         int x = evt.getX(); 
         int y = evt.getY();  

         Graphics g = getGraphics();  

            //***MODIFY THE FOLLOWING LINES****//   
             int i=(int)(Math.random()*10);
             int j=(int)(Math.random()*10);
             for(;i<j;i++)
             { g.setColor(Color.red);

               x=(int)(Math.random()*100);
               y=(int)(Math.random()*100);
             g.fillRect( x , y , 60, 30 );
             g.setColor(Color.black);
             g.drawRect(x , y , 60, 30 );}

         g.dispose();  
      } 
     public void mouseEntered(MouseEvent evt) { }
     public void mouseExited(MouseEvent evt) { }
     public void mouseClicked(MouseEvent evt) { }
     public void mouseReleased(MouseEvent evt) { }

   } 

  } 
```

# notepad++ - Notepad++ Remove everything before the : string?

> ID：14090864
> 
> 赞同：4
> 
> 时间：2012-12-30T12:53:39.273
> 
> 标签：notepad++

I have a file like so...

> user@hotmail.com:password

I would like to remove the hotmail address and just keep the password with no :

So the file will look like the following in a nice list..

> passwords passwords

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-30T13:00:29.107

使用查找和替换选项 ( `CTRL`+ `H`)：

使用**正则表达式**模式并替换`.*:`为空字符串。

这将产生一个以行分隔的密码列表。

然后，如果要删除换行符，请切换到**Extended *\n, \r ...)**模式并替换`\n`为空格。（您可能需要`\r\n`取决于您保存文件的方式）

# javascript - Prevent default action of opening keypad on iOS 5.1

> ID：14090865
> 
> 赞同：2
> 
> 时间：2012-12-30T12:53:50.950
> 
> 标签：javascript, cordova, jquery-mobile, ios5

I built my site with phonegap. When the keypad appeared the whole content of the page slid up. How can I prevent the default action of opening the keypad on iOS 5.1.1 ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T14:03:47.677

我读了一个这样的问题，但很老，你可以试试一些漂亮的代码

`stopPropagation() , preventDefault()` 尊重是 `stopPropagation`阻止事件在事件链上冒泡。

`preventDefault`阻止浏览器对该事件执行的默认操作。

还有一个变量可以设置为 true

```
e = window.event;
e.cancelBubble = true; 
```

[这篇文章](https://stackoverflow.com/questions/5963669/whats-the-difference-between-event-stoppropagation-and-event-preventdefault)中有一些有用的链接

我希望这对你有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T13:39:29.853

我很确定，您无法阻止这种行为。

在 Android 上可以配置它，但如果你做一些花哨的 CSS，它就不能很好地工作。

如果内容不会向上滑动，键盘可能会隐藏输入的文本。

如果将输入元素设置为只读，则不会触发键盘。可能您可以在页面完全加载后禁用输入并启用它。

# javascript - GWT/CSS - 标签的样式部分

> ID：14090866
> 
> 赞同：2
> 
> 时间：2012-12-30T12:54:20.433
> 
> 标签：javascript, css, html, gwt

有没有办法在标签中设置部分文本的样式 - 更改颜色、粗体、大小等？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T13:22:44.287

使用 HTML 小部件而不是标签。然后：

```
HTML label = new HTML();
label.setHtml("Brown <span class=\"brown\">fox</span>"); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-31T01:17:19.457

我有点无聊，我想我可以提供一些有用的东西，所以，也就是说，我提供*这个*：

```
function elemStyle(el, needle, settings) {
    // if there's no 'el' or 'needle' arguments, we quit here
    if (!el || !needle) {
        return false;
    }
    else {
        // if 'el' has a nodeType of 1, then it's an element node, and we can use that,
        // otherwise we assume it's the id of an element, and search for that
        el = el.nodeType == 1 ? el : document.getElementById(el);

        // if we have a 'settings' argument and it's an object we use that,
        // otherwise we create, and use, an empty object
        settings = settings && typeof settings === 'object' ? settings : {};

        // defining the defaults
        var defaults = {
            'class': 'presentation',
            'elementType': 'span'
        },
            // get the text from the 'el':
            haystack = el.textContent || el.innerText;

        // iterate over the (non-prototypal) properties of the defaults
        for (var prop in defaults) {
            if (defaults.hasOwnProperty(prop)) {
                // if the 'settings' object has that property set
                // we use that, otherwise we assign the default value:
                settings[prop] = settings[prop] || defaults[prop];
            }
        }

        // defining the opening, and closing, tags (since we're using HTML
        // as a string:
        var open = '<' + settings.elementType + ' class="' + settings.class + '">',
            close = '</' + settings.elementType + '>';

        // if 'needle' is an array (which is also an object in JavaScript)
        // *and* it has a length of 2 (a start, and stop, point):    
        if (typeof needle === 'object' && needle.length === 2) {
            var start = needle[0],
                stop = needle[1];
            el.innerHTML = haystack.substring(0, start) + open + haystack.substring(start, stop) + close + haystack.substring(stop);
        }
        // otherwise if it's a string we use regular expressions:
        else if (typeof needle === 'string') {
            var reg = new RegExp('(' + needle + ')');
            el.innerHTML = haystack.replace(reg, open + '$1' + close);
        }
    }
} 
```

上面是这样调用的：

```
// a node-reference, and a string:
elemStyle(document.getElementsByTagName('label')[0], 'Input');​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/VRnpc/)。

```
// a node-reference, and a start-stop array:
elemStyle(document.getElementsByTagName('label')[0], [6, 8]);​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/VRnpc/1/)。

```
// an id (as a string), and a string to find, with settings:
elemStyle('label1', 'Input', {
    'elementType' : 'em'
});​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/VRnpc/3/)。

这肯定可以与一些错误捕获有关（例如，如果将数组传递给小于或大于两个元素的函数，则[没有任何](http://jsfiddle.net/davidThomas/VRnpc/4/)反应，并且没有错误返回给用户/开发人员；如果`el`变量既不是一个节点引用或一个`id`，[事情出错了：）`Uncaught TypeError: Cannot read property 'textContent' of null`](http://jsfiddle.net/davidThomas/VRnpc/5/)。

话虽如此，我觉得很脏，所以我添加了一个简单的错误检查和报告，如果`el`不能解析到文档中的实际节点：

```
el = el.nodeType == 1 ? el : document.getElementById(el);
// if 'el' is null, and therefore has no value we report the error to the console
// and then quit
if (el === null) {
    console.log("You need to pass in either an 'id' or a node-reference, using 'document.getElementById(\"elemID\")' or 'document.getElementsByTagName(\"elemTag\")[0].");
    return false;
} 
```

参考：

*   [`document.getElementById()`](https://developer.mozilla.org/en-US/docs/DOM/document.getElementById).
*   [JavaScript 正则表达式](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)。
*   [`Node.nodeType`](https://developer.mozilla.org/en-US/docs/DOM/Node.nodeType).
*   [`string.replace()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace).
*   [`String.substring()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/substring).
*   [`typeof variable`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/typeof).

# sql - 哪个更适合 Firebird 中的价格计算：十进制还是数字？

> ID：14090867
> 
> 赞同：6
> 
> 时间：2012-12-30T12:54:33.640
> 
> 标签：sql, firebird

在 Firebird DB 中：我读到了数字和小数之间的区别，但仍然不确定哪个更适合价格计算：小数还是不带舍入数字的数字？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-30T14:12:26.170

两者的实现`NUMERIC`和`DECIMAL`在 Firebird 中几乎相同。*Interbase 6.0 数据定义指南*说存在细微差别（因为`NUMERIC`精度与声明的完全相同，因为`DECIMAL`精度至少等于声明的）。根据Helen Borrie*的 The Firebird Book*，只有精度小于 5 的数字存在差异，因为`NUMERIC`精度 1-4 的 a 映射到精度 1-9 的`SMALLINT`a 。本书还说明了两者都符合SQL-92 类型的行为。`DECIMAL``INTEGER``NUMERIC``DECIMAL``DECIMAL`

话虽如此，我建议选择`DECIMAL`，因为它的行为符合 SQL 标准中定义的行为，因此对于不熟悉 Firebird 但确实了解标准行为的人来说并不那么惊讶。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T13:10:01.527

它们都同样适用于价格计算。但总会有某些类型的计算需要四舍五入，无论您使用哪一种。

十进制是两者中更灵活的。

# xml - When is a semi-structured data model more appropriate than a structured one?

> ID：14090868
> 
> 赞同：0
> 
> 时间：2012-12-30T12:54:35.207
> 
> 标签：xml, database, relational-database, non-relational-database

Let's consider a semi-structured data model like XML and a structured one like the well known relational data model.

**When is better to store the data in a XML database instead of a relational dbms ?**

It obviously depend on the kind of data that we want to manage, but is there a specific kind of data for which it is definitely better to use a XML database?

The only advantage I can see with XML is that we can save memory if we have entities with a lot of null values which change only in respect to the value of an attribute 'type'. In a XML file we simply do not store the attributes that would be null in a relational table.

It seems to me that there is a lot more to that, but I am clueless.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T13:07:07.857

半结构化数据模型仅适用于一种数据：半结构化数据。

也就是说，当您具有以下形式的结构化数据时：

```
<node>
    <text>foo</text>
    <bold>
        <text>bar</text>
    </bold>
    <text>baz</text>
</node> 
```

那么通过去除冗余的“文本”节点来压缩表示是有意义的：

```
<node>
    foo
    <bold>bar</bold>
    baz
</node> 
```

这就是 XML 通过严格结构化的数据表示为您提供的全部内容。本质上，这就是文档（尤其是 HTML）。

请注意，这仅与*表示*有关。上述两种数据模型是*等价*的，都用树表示。

# ruby - Send a stream of data fetched from a url as http respone in ruby

> ID：14090875
> 
> 赞同：1
> 
> 时间：2012-12-30T12:56:06.310
> 
> 标签：ruby, file-io, stream, sinatra

I am building a web application using sinatra. It basically takes a url of a page as request and fetches the link to media file from the page. Once that is retrieved it opens a stream to the media file. Now I want to send this stream as http response to client. I tried to do the following.

```
get '/' do
  url=PM.link(params[:url])
  puts url
  buf=nil
  open(url, 'rb') do |rf|
    while(buf=rf.read(1024)) do
      stream do |out|
        out << buf
      end
    end  
  end
end 
```

and also this

```
get '/' do
  url=PM.link(params[:url])
  puts url
  buf=nil
  open(url, 'rb') do |rf|
    stream do |out|
      out.write rf.read
    end  
  end
end 
```

But neither work. I tried storing the media file in a local file it stores it properly. But when I try to write it to out stream it responds with no data. Am I missing something? Or sinatra doesn't allow writing binary from one stream to other.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T08:20:07.017

一个问题是您没有正确提出请求。要`http request`做到这一点：

```
uri = URI.parse(yoururl)
http = Net::HTTP.new(uri.host, uri.port)
request = Net::HTTP::Get.new(uri.request_uri)
response = http.request(request) 
```

然后你可以对响应做你想做的事。在您的情况下，它可能如下所示：

```
get '/' do
  url=PM.link(params[:url])
  uri = URI.parse(url)
  http = Net::HTTP.new(uri.host, uri.port)
  request = Net::HTTP::Get.new(uri.request_uri)
  response = http.request(request)

end 
```

但是，这不适用于流式传输。这是一个可以帮助您的教程：http: [//www.intridea.com/blog/2012/5/24/building-streaming-rest-apis-with-ruby#](http://www.intridea.com/blog/2012/5/24/building-streaming-rest-apis-with-ruby#)

# java - Appengine Backend not triggered from cron

> ID：14090879
> 
> 赞同：0
> 
> 时间：2012-12-30T12:56:21.167
> 
> 标签：java, google-app-engine

Here's my configuration in backends.xml and cron.xml respectively:

```
 <backends>
<backend name="score">
    <class>B1</class>
    <instances>2</instances>
    <options>
        <dynamic>true</dynamic>
    </options>
</backend></backends> 
```

and

```
<cronentries><cron>
    <url>/ProcessingEngine</url>
    <description>Get Posts</description>
    <schedule>every 45 minutes</schedule>
    <target>score</target>
</cron></cronentries> 
```

I configured it this way so as to call the Backend job through cron.xml. But, for some reason, the Backend is not triggered and I don't see any logs that indicate Backend code has been executed. The Cron Tab in Admin section of AppEngine says the cron failed.

Note: I am able to run the Backend job via Admin console's Start button.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T07:06:18.073

原来是一个愚蠢的错误。您唯一需要做的就是在管理控制台中启动后端实例并保持这种状态。仅在必要时将其关闭。

# javascript - Javascript 选择性缓存控制库

> ID：14090880
> 
> 赞同：2
> 
> 时间：2012-12-30T12:56:21.677
> 
> 标签：javascript, html, caching, cordova

我需要控制我缓存的文件，列出这些文件并通过某种形式的 Javascript 删除某些文件（用户选择）。是否有任何 Javascript 代码能够做到这一点？

**笔记：**

*   我不需要回退到旧浏览器。
*   存储的文件可能包括视频及其相应的元（超大数组）。
*   我正在使用 Adob​​e(Formerly Nitoki) [PhoneGap Build](http://build.phonegap.com)，所以我很高兴使用内置的解决方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T13:41:28.587

通常，您使用前端 HTTP 服务器和`Expires`和`Cache-Control`标头来控制缓存。例如，看看这篇文章：[http ://www.mnot.net/cache_docs/](http://www.mnot.net/cache_docs/)

或者，如果您想要一个可以在离线模式下运行的 web 应用程序，您可以使用 HTML5 中的新离线功能。有一个[关于这个的视频](http://www.youtube.com/watch?v=CoUSIBep1G8)。[另外，请查看有关 HTML5 Rocks](http://www.html5rocks.com/en/tutorials/appcache/beginner/)的教程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-28T21:00:23.270

不，JavaScript 不能更改/删除/添加缓存文件。

# jquery - jquery on scroll fixed position

> ID：14090882
> 
> 赞同：1
> 
> 时间：2012-12-30T12:56:31.973
> 
> 标签：jquery, slide, fixed, absolute

how to make div block, witch will start scrolling on one point in site with scrollbar (position: fixed) and ends scrolling in other point.

[http://postimage.org/image/oka20h80z/](http://postimage.org/image/oka20h80z/)

Block starts scrolling on first black line and end scrolling on second black line and stays

```
<div class="header"></div>
<div class="wrapper">
    <div class="content"></div>
    <div class="slider"></div>
</div>
<div class="footer"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T13:24:33.683

你需要使用滚动条。就像是

```
if( scrollTop() > 500 ){
  selector.css('position', 'fixed');
}
if( scrollTop() > 1000 ){
  selector.css('position', 'relative');
} 
```

像这样的东西。如果它已滚动超过 500 像素，请将其固定。如果它已滚动超过 1000 条，请执行此操作。

# ios - xcode 中的文本光标未输入。闪烁的矩形而不是闪烁的线

> ID：14090883
> 
> 赞同：0
> 
> 时间：2012-12-30T12:56:41.117
> 
> 标签：ios, xcode, interface-builder, text-editor

我在属于前雇员的系统上使用 Xcode，但我无法打字。有一个奇怪的矩形文本光标闪烁，底部有一个空白行，以一种奇怪的方式响应我的键类型。如果我按下一个键，文本光标就会变小。还有我当前所在文件的位置路径，我也希望将其删除。谢谢

![在此处输入图像描述](../Images/d50d759f197bb1f3c9f8372e393d4ee1.png)

在每个问题旁边添加红色数字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T13:06:43.550

我怀疑您的前雇员可能已经自定义了 Xcode，或者更有可能将 Macintosh 自定义为非 vanilla（可能是文本输入条目设置或某些国际化或某些第三方扩展或首选项窗格）。

尝试这样做：转到 Xcode 中的“文本编辑”首选项并切换一些东西，看看你是否有更好的运气。如果这不起作用，请在 Macintosh 上创建一个新用户，然后从该新用户帐户启动并运行 Xcode。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T06:54:17.720

XVim.xcplugin <--这是导致所有这些的文件。删除并重新启动后，一切恢复正常。您可以在此处找到有关它的更多信息：[https ://github.com/WarWithinMe/xVim](https://github.com/WarWithinMe/xVim)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T06:08:19.920

本期由 XVim.xcpluginxc 组成。通过删除它，我们可以摆脱这个问题。对于这个问题。请按照以下步骤操作。

```
 1.Open the terminal.
 2.Type "find ~/ XVim.xcpluginxc". This will list your entire system with this particular file/folder name.
 3.From that list copy that particular path having this folder.
 4.Type "rm -Rf path that you copied earlier".
 5.Press "Enter".
 6.type "exit". 
```

最后关闭终端并重新启动 Xcode。

# css - JavaFX 2 TableView 标题字体颜色

> ID：14090884
> 
> 赞同：6
> 
> 时间：2012-12-30T12:56:47.793
> 
> 标签：css, tableview, javafx-2, textcolor

如何更改 TableView 组件标题的文本颜色？

我厌倦了这个：

```
.table-view .column-header, .table-view .filler {
    -fx-text-fill: white;
    -fx-border-width: 0, 0;
    -fx-font-size: 12px;
} 
```

这将删除边框，并更改字体大小，但不会更改字体颜色。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-03T03:25:53.193

这样的事情可能会奏效。

```
.table-view .column-header .label {
    -fx-text-fill: white;
    -fx-font-weight: bold;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-17T20:25:33.413

@David Charles： TableColumn 的样式类也适用于列标题，因此要设置单个列标题的样式，您可以使用

```
.table-view .column-header.foo .label {
    -fx-text-fill: white;
    -fx-font-weight: bold;
} 
```

在Java中

```
tableColumn.getStyleClass().add("foo"); 
```

# c# - Animate Drawing Circle in WPF with XAML

> ID：14090889
> 
> 赞同：3
> 
> 时间：2012-12-30T12:58:05.390
> 
> 标签：c#, wpf, animation, geometry

I want to be able to smoothly draw a circle (ellipse) so that you can see it being drawn on screen.

Is there anyway possible using DoubleAnimation to do this? If not what is an alternative method?

An example of what I have:

*   One outer ellipse (black)
*   Inner ellipse (white) - this is the one I want to animate

Code:

```
<Ellipse Width="200" Height="200" Stroke="Black" StrokeThickness="20"/>
    <Ellipse Width="190" Height="190" Stroke="White" StrokeThickness="10" Canvas.Left="5"    Canvas.Top="5" x:Name="animatedEllipse">
        <Ellipse.Triggers>
            <EventTrigger RoutedEvent="Ellipse.Loaded">
                <BeginStoryboard>
                    <Storyboard>
                        <DoubleAnimation/>
                    </Storyboard>
                </BeginStoryboard>
            </EventTrigger>
        </Ellipse.Triggers>
    </Ellipse> 
```

I've look at a few examples for example:

*   [http://elegantcode.com/2009/08/21/a-simple-wpf-loading-animation/](http://elegantcode.com/2009/08/21/a-simple-wpf-loading-animation/)
*   [http://www.charlespetzold.com/blog/2012/03/The-Animated-Pie-Slice-in-Windows-8.html](http://www.charlespetzold.com/blog/2012/03/The-Animated-Pie-Slice-in-Windows-8.html)
*   [Ellipse Drawing WPF Animation](https://stackoverflow.com/questions/2428524/ellipse-drawing-wpf-animation)

The first two are a bit confusimg for me being new to WPF animation. The latter has 7 votes as "Correct answer" but it is not working for me as I get error "the collection element StrokeDashArray[0] is not a dependency property" (and also I don't want dashes, Although I tried this even on an ellipse with dashes as per the above article and it still failed on this error.

Update:

A method I got sort of working using code is this:

```
public static class ExtensionMethods
{
    private static Action EmptyDelegate = delegate() { };

    public static void Refresh(this UIElement uiElement)
    {
        uiElement.Dispatcher.Invoke(DispatcherPriority.Render, EmptyDelegate);
    }
}

public partial class Page1 : Page
{
    private void Page_Loaded_1(object sender, RoutedEventArgs e)
    {
        path = new Path();
        group = new GeometryGroup();
        path.Data = group;

        path.Stroke = new SolidColorBrush(Colors.White);
        path.StrokeThickness = 3;

        canvas.Children.Add(path);
        BackgroundWorker worker = new BackgroundWorker();
        worker.DoWork += worker_DoWork;
        worker.RunWorkerAsync();
    }

    void worker_DoWork(object sender, DoWorkEventArgs e)
    {
        int radius = 90;
        for (double i = 0.0; i < 360.0; i += 1)
        {
            double angle = i * System.Math.PI / 180;
            double x = (int)(100 + radius * System.Math.Cos(angle));
            double y = (int)(100 + radius * System.Math.Sin(angle));
            canvas.Dispatcher.Invoke(new Action(delegate
            {
                group.Children.Add(new EllipseGeometry(new Point(x, y), 5, 5));
            }));
            canvas.Refresh();
            System.Threading.Thread.Sleep(1);

        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T13:40:49.517

您可能需要三个元素：

1.  外圈（填充颜色为浅色）。

2.  带有透明填充颜色的内圈。

3.  弧段将在它们之间具有半径的厚度差。

4.  圆弧将以 45 角定位，可以在两个圆上设置动画。

这只是一个想法，我可能需要自己测试它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T13:09:55.147

您可以通过使用 an[`ArcSegment`](http://msdn.microsoft.com/en-us/library/system.windows.media.arcsegment.aspx)而不是椭圆走得更远：

```
<PathFigure StartPoint="100,100">
    <PathFigure.Segments>
        <PathSegmentCollection>
            <ArcSegment Size="100,100" IsLargeArc="True"
                        SweepDirection="CounterClockwise" Point="200,200" />
        </PathSegmentCollection>
    </PathFigure.Segments>
</PathFigure> 
```

它需要`PathFigure`是指定起点的 - 的一部分。

然后，您可以对弧的终点进行动画`Point`处理，以从起点通过 360 度到达终点。

# java - 如何将数据从一个 Web 服务发送到另一个？

> ID：14090890
> 
> 赞同：2
> 
> 时间：2012-12-30T12:58:10.757
> 
> 标签：java, web-services

我在 Glassfish 服务器上部署了两个 Java Web 服务，它们都在同一个 Web 应用程序中。将授权令牌（10 位数字）从一个 Web 服务发送到另一个 Web 服务的最简单方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T13:27:31.247

这完全取决于你的意思*send*。

我**假设**您的意思是要允许 Web 服务 #2 访问由 Web 服务 #1 生成的令牌？

这里有几个选项，但有几个让我想到的是：

*   将令牌存储在[Map](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html)支持的[Singleton](http://en.wikipedia.org/wiki/Singleton_pattern)中。这将在应用程序范围内可用。
*   通过[set/getAttribute()](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html#setAttribute%28java.lang.String,%20java.lang.Object%29)方法将令牌存储在[ServletContext](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html)下的[Map中。](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html)您应该能够通过Web 服务 #1 和 #2 中的[WebServiceContext访问](http://docs.oracle.com/javaee/6/api/javax/xml/ws/WebServiceContext.html)[ServletContext ，方法是：](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html)`webServiceContext.getMessageContext().get(MessageContext.SERVLET_CONTEXT);`

这些假设您可以以某种方式（通过用户 ID 或其他方式）键入令牌。

此外，这不包括 auth 令牌被视为有效的持续时间，以及当应用程序停止/启动/重新部署时它是否应该有效。上面也没有考虑负载平衡或任何类似的时髦；假设您正在运行一个 Glassfish 实例。

# ruby-on-rails - 对 Rails 中的嵌套资源和身份验证感到困惑

> ID：14090894
> 
> 赞同：5
> 
> 时间：2012-12-30T12:58:32.907
> 
> 标签：ruby-on-rails, devise, associations, crud

让我们看看我是否可以很好地解释自己的疑问。

我有一个由设计管理的用户模型。所以在我的路线中，我有：

```
devise_for :users 
```

在**User模型中，我与模型****Plan**有关联。关联是：

```
User has_many Plans
Plan belongs_to User 
```

在这一点上，我还有一个计划模型的资源，所以我可以获取所有的计划，显示一个特定的计划等等。但我想更进一步。

我希望能够查看特定用户的计划，并让特定用户查看他自己的计划并对其进行编辑。

因此，例如，每当我去：

/users/:id/计划

我希望能够看到该特定 :id 用户的计划。如果访问该 url 的用户是登录的用户，我希望他能够编辑这些计划。

我该如何管理所有这些行为？有什么宝石可以帮助它吗？或者我需要在视图中做条件说如果 current_user ...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T14:13:21.327

让我们从路线开始，您可以像这样制作路线：

```
resources :users do
  resources :plans, only: [:index]
end

resources :plans, except: [:index] 
```

我曾经`resources :plans`在里面`resources :users`有这样的路线`/users/:user_id/plans`，而`resources :plans`外面是不需要 a 的其余操作（编辑，销毁，...）`user_id`，即计划由唯一的 id 标识，所以你不需要需要`user_id`从数据库中获取它以进行编辑或销毁。

现在对于控制器，我们可以这样：

```
class PlansController < ApplicationController
  before_filter :is_plan_owner?, only: [:edit, :update]

  def index
    @plans = Plan.where(:user_id => params[:user_id])
  end

  def edit
    @plan = Plan.find(params[:id])
  end

  private

  def is_plan_owner?
    if current_user != Plan.find(params[:id]).user
      # Scream, shout, call 911 and/or redirect else where
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-30T14:19:36.913

这与使用任何其他嵌套资源没有什么不同。`devise_for`文件中的调用`routes.rb`不向用户模型提供 RESTful 路由。考虑一下没有嵌套资源的情况，只需一个标准的 Devise 安装。如果你是你，`rake routes`你会得到类似以下的东西：

```
 new_user_session GET  /users/sign_in(.:format)       devise/sessions#new
      user_session POST /users/sign_in(.:format)       devise/sessions#create
     user_password POST /users/password(.:format)      devise/passwords#create
 new_user_password GET  /users/password/new(.:format)  devise/passwords#new
edit_user_password GET  /users/password/edit(.:format) devise/passwords#edit
           sign_in GET  /sign_in(.:format)             devise/sessions#new 
```

这对索引或显示用户没有任何帮助，因此您仍然需要为此添加路由：

```
resources :users, only: [:index, :show] 
```

现在你得到：

```
users GET /users(.:format)     users#index
 user GET /users/:id(.:format) users#show 
```

好的，现在我们到了某个地方，然后它只是添加了嵌套资源，而 Devise 一直不介意。

```
resources :users, only: [:index, :show] do
  resources :plans
end 
```

为您提供所需的资源丰富的路由

```
 user_plans GET /users/:user_id/plans(.:format)          plans#index
              POST /users/:user_id/plans(.:format)          plans#create
 new_user_plan GET /users/:user_id/plans/new(.:format)      plans#new
edit_user_plan GET /users/:user_id/plans/:id/edit(.:format) plans#edit
     user_plan GET /users/:user_id/plans/:id(.:format)      plans#show
               PUT /users/:user_id/plans/:id(.:format)      plans#update
            DELETE /users/:user_id/plans/:id(.:format)      plans#destroy 
```

这就是它的全部。设计在这方面不会妨碍您。

# java - Servlet gives 404 (Eclipse + Tomcat)

> ID：14090896
> 
> 赞同：0
> 
> 时间：2012-12-30T12:58:41.377
> 
> 标签：java, eclipse, tomcat

I'm learning with Lars Vogel's tutorial on [http://www.vogella.com/articles/EclipseWTP/article.html](http://www.vogella.com/articles/EclipseWTP/article.html) and I'm stuck with a 404 error. So I created a Dynamic Web Project in Eclipse and then created FileDao.java and FileCounter.java according to the tutorial. And Eclipse generated a web.xml file for me, here it is:

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
  <display-name>de.vogella.wtp.filecounter</display-name>
  <welcome-file-list>
    <welcome-file>index.html</welcome-file>
    <welcome-file>index.htm</welcome-file>
    <welcome-file>index.jsp</welcome-file>
    <welcome-file>default.html</welcome-file>
    <welcome-file>default.htm</welcome-file>
    <welcome-file>default.jsp</welcome-file>
  </welcome-file-list>
  <servlet>
    <description></description>
    <display-name>FileCounter</display-name>
    <servlet-name>FileCounter</servlet-name>
    <servlet-class>de.vogella.wtp.filecounter.servlets.FileCounter</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>FileCounter</servlet-name>
    <url-pattern>/FileCounter</url-pattern>
  </servlet-mapping>
</web-app> 
```

I'm using Tomcat 6.0 and I chose Dynamic web module version 2.5 while creating the project.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T13:11:08.973

您要访问哪个 URL？... 尝试

```
http://localhost:8080/<Include Your Project Name>/FileCounter 
```

# java - 如何精确地将毫秒转换为秒

> ID：14090898
> 
> 赞同：30
> 
> 时间：2012-12-30T12:58:55.370
> 
> 标签：java, precision, divide, milliseconds

我想以尽可能高的精度将毫秒转换为秒（例如 1500 毫秒到 1.5 秒，或 500 毫秒到 0.5 秒）。

`Double.parseDouble(500 / 1000 + "." + 500 % 1000);`不是最好的方法：我正在寻找一种从除法运算中获取余数的方法，因此我可以简单地将余数相加。

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-12-30T13:00:21.930

当然你只需要：

```
double seconds = milliseconds / 1000.0; 
```

无需单独手动执行这两个部分 - 您只需要浮点运算，使用`1000.0`（作为`double`文字）强制。（我假设您的`milliseconds`值是某种形式的整数。）

请注意，与往常一样`double`，您可能无法准确表示结果。`BigDecimal`如果您想将 100ms*精确地*表示为 0.1 秒，请考虑使用。（鉴于它是一个物理量，而 100 毫秒一开始并不准确，a`double`可能是合适的，但是......）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-30T13:01:00.540

你为什么不简单地尝试

```
System.out.println(1500/1000.0);
System.out.println(500/1000.0); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-10-08T09:01:43.153

我也遇到了这个问题，不知何故我的代码没有提供确切的值，而是将秒数四舍五入到 0.0（如果毫秒小于 1 秒）。帮助我的是将小数添加到除法值中。

```
double time_seconds = time_milliseconds / 1000.0;   // add the decimal
System.out.println(time_milliseconds);              // Now this should give you the right value. 
```

# swt - Java SWT 键，MouseWheel 监听器

> ID：14090904
> 
> 赞同：2
> 
> 时间：2012-12-30T12:59:28.493
> 
> 标签：swt, keylistener, mousewheel

我在 Shell 中添加了一个“KeyListener”来更改 FullScreen 与否。我还在 GLCanvas 中添加了一个“MouseWheelListener”来改变它的深度。

但是有一个问题，如果我在 Shell 中启用 KeyLisetner，MouseWheelListener 不起作用。如果我禁用另一个，KeyListener 也不起作用。

什么可能导致它？

代码： [http](http://codepad.org/4V5ExY27) ://codepad.org/4V5ExY27 外壳 [http://codepad.org/BYnTWlMf](http://codepad.org/BYnTWlMf) 鼠标滚轮

谢谢。

# c++ - 使对象可点击（如果鼠标在对象区域中，请单击）

> ID：14090906
> 
> 赞同：3
> 
> 时间：2012-12-30T13:00:18.650
> 
> 标签：c++, algorithm, opengl

我的窗口上有一个矩形，我试图通过定义矩形的区域来使这个矩形可点击。

如果鼠标点击在这个区域内，那么它是一个点击，否则不是。

例如：在窗口上，假设矩形的顶点是：
`x = 40, y = 50; width = 200, height = 100;`
那么，当
`(mouseXPos > getX()) && (mousxPos < (getX()+width)) && (mouseYPos > getY()) && (mouseYPos > getY()+height)`

现在，我正在通过继承一个具有`lookAt`函数的类来对对象进行外观转换。另外，我正在使用相机来检查对象的不同面（相机旋转）。因此，当物体沿各个轴旋转并在使用相机时显示不同的面。

但是，当对象移动时，我会认为矩形的顶点会发生变化。矩形的顶点也应该在执行`gluLookAt`功能时发生变化，但看起来它们没有变化，并且我的点击区域始终在这些点保持静止，尽管对象不存在。我该如何解决这个问题？如何使我的对象可点击并在其上添加一些鼠标事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T13:50:12.313

看到没有其他人回答，我会试一试。:)

虽然对opengl不是很有经验，但这对我来说似乎是预期的行为，而且您似乎将世界坐标与屏幕坐标混合在一起。

可以这样想，如果你从两个不同的角度拍摄客厅里的一张桌子，它看起来会有所不同，但在两张照片中都会占据那个房间的相同空间。在使用 opengl 时，实体也可以这样说，即使您移动相机，实体的坐标也不会改变，只是对它的感知。

现在，如果我没记错的话，您可以通过应用与 opengl 相同的转换将您的世界坐标转换为屏幕坐标。我建议看看这个：[OpenGL：将鼠标点击投影到几何上](https://stackoverflow.com/questions/113352/opengl-projecting-mouse-click-onto-geometry)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T14:09:41.577

如果您尝试单击 3D 形状，并且您正在移动相机，我不会在屏幕坐标中检查它。

相反，您可以将用户单击的点投影到 3D 空间中的一条线上，并将其与可以单击的对象相交。

GL 有一个功能：`gluUnproject()`

如果您向该函数提供视图的详细信息，以及被点击的屏幕点，它可以告诉您用户点击了 3D 空间中的哪个位置。如果您在近平面和远平面上检查一个点，则可以根据您的对象检查这些点之间的线。

另一种选择是某种 ID 缓冲区，您可以在其中将场景渲染到屏幕外，但不是输出阴影像素，而是输出每个对象的 ID 值。然后，命中测试只是从该缓冲区中读取一个像素的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T04:29:29.183

为 ID 缓冲区替代方案竖起大拇指。我多次使用它，这确实是正确的做法：没有昂贵的几何选择，并且与底层几何几乎完全断开连接。

不过，您只能选择最接近的几何图形（即屏幕上“可见”的几何图形），而不能选择可能隐藏在后面的模型。处理半透明材料时也会出现同样的问题。

一种解决方案可能是通过在 RGBA ID 纹理中渲染四个对象来进行一些 ID 剥离（我觉得它可能不是最佳的，但值得一试）。

# sql - 如何在 ADO.Net 面向连接的模式下在 SQL 数据库中插入行

> ID：14090914
> 
> 赞同：3
> 
> 时间：2012-12-30T13:01:09.460
> 
> 标签：sql, ado.net

我有一个数据库，其中一个表具有`Registration`用于注册用户的名称。

它只有两列，一是`Username`，一是`password`。

一个名为的页面`Register.aspx`用于注册成员，该页面有两个文本框，一个用于获取`Username(textbox1)`，一个用于获取`password(textbox2)`，一个按钮用于将这些值插入数据库。

主要问题是我们不能这样写语句：

```
Insert into Registration (Username, password) 
values ('TextBox1.text','TextBox2.text') 
```

我正在使用 ADO.net 面向连接的模式，我用谷歌搜索，但我没有找到任何方法在连接模式下在 SQL 数据库中插入行。请给我一个插入这一行的想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-30T13:27:44.267

ADO.NET 具有支持连接模式的 DataReader。其他都断开了。

> DataReader 是连接架构，因为它保持连接打开，直到获取所有记录

如果要在 ADO.NET 中插入，则应执行以下步骤：

```
private void btnadd_Click(object sender, EventArgs e)
{
  try
  {
   //create  object  of Connection Class..................
   SqlConnection con = new SqlConnection();

   // Set Connection String property of Connection object..................
  con.ConnectionString = "Data Source=KUSH-PC;Initial Catalog=test;Integrated           Security=True";

 // Open Connection..................
  con.Open();

 //Create object of Command Class................
 SqlCommand cmd = new SqlCommand();

//set Connection Property  of  Command object.............
cmd.Connection = con;
//Set Command type of command object
//1.StoredProcedure
//2.TableDirect
//3.Text   (By Default)

cmd.CommandType = CommandType.Text;

//Set Command text Property of command object.........

cmd.CommandText = "Insert into Registration (Username, password) values ('@user','@pass')";

//Assign values as `parameter`. It avoids `SQL Injection`
cmd.Parameters.AddWithValue("user", TextBox1.text);
cmd.Parameters.AddWithValue("pass", TextBox2.text);

 Execute command by calling following method................
  1.ExecuteNonQuery()
       This is used for insert,delete,update command...........
  2.ExecuteScalar()
       This returns a single value .........(used only for select command)
  3.ExecuteReader()
     Return one or more than one record.

  cmd.ExecuteNonQuery();
  con.Close();

  MessageBox.Show("Data Saved");          
  }
     catch (Exception ex)
     {
            MessageBox.Show(ex.Message);
            con.Close();
     }

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-05T21:09:44.890

```
 try
        {

            using (var connection = new SqlConnection(yourConnectionString))
            {
                string queryString = "Select id, name, age from Table where name = @name";
                using (var command = new SqlCommand(queryString, Connection))
                {
                    command.Parameters.AddWithValue("@name", name);

                    Connection.Open();
                    SqlDataReader dataReader = command.ExecuteReader();

                    while (dataReader.Read())
                    {
                        item = new Item(long.Parse(dataReader[0].ToString()),
                                        dataReader[1].ToString(),
                                        int.Parse(dataReader[2].ToString()));
                    }
                    dataReader.Close();
                }

            }
        }
        catch (Exception ex)
        {
           // if exception will happen in constructor of SqlConnection or Command, the // resource can leak but Dispose method will never be called, couse the object was not created yet.        

          // Trace and handle here
            throw;
        }
        finally
        {

        } 
```

但是 ADO.net 对企业发展毫无用处。您必须从数据访问层进行抽象，然后转到实体，而不是表记录 使用 ORM，Luke！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-30T13:26:42.637

```
using System.Data.SqlClient;

string cnstr = "server=.;database=dbname;user=username;password=password;";
SqlConnection con = new SqlConnection(cnstr);
SqlCommand cmd = new SqlCommand { Connection = con };
cmd.CommandText = "Insert into Registration (Username, password) values ('@user','@pass')";
cmd.Parameters.AddWithValue("user", TextBox1.text);
cmd.Parameters.AddWithValue("pass", TextBox2.text);
try
{
    con.Open();
    cmd.ExecuteNonQuery();
}
catch (Exception)
{
    //something;
}
finally
{
    if (con != null)
       con.Close();
} 
```

# servicestack - 是否可以制作像 SocialBootstrapApi 这样的 ServiceStack+MVC3 的自托管项目？

> ID：14090916
> 
> 赞同：3
> 
> 时间：2012-12-30T13:01:15.167
> 
> 标签：servicestack

我正在学习 ServiceStack 如何在自托管项目的帮助下工作。自托管项目更容易调试和理解，因为 IIS 内部不会发生任何奇迹。

我按照这些步骤，阅读[http://www.servicestack.net/mythz_blog/?p=785](http://www.servicestack.net/mythz_blog/?p=785)并将它们向后应用。

它适用于 Docs，但不适用于 SocialBootstrapApi。Global.asax 中的 Application_Start() 中的代码是我认为的问题

## ServiceStack 文档的步骤

*   下载 ServiceStack Docs 示例项目

*   创建一个新的控制台项目（.Net 3.5，因为 Docs 仍然是 3.5）

*   复制旧 Web 项目中除 web.config 之外的所有文件。（我第一次使用拖放，但只是移动了文件，并没有更新 .csproj 文件，所以我不得不使用编辑器来复制一些 ItemGroup 部分。）

*   将 AppHost 移到单独的类文件中，改为从 AppHostHttpListenerBase 继承

*   从 RazorRockstars 项目复制 Programs.cs 文件

*   更改 baseUrl： var baseUrl = "http://localhost:2001/"; // ConfigUtils.GetAppSetting("WebHostUrl");

*   从 RazorRockstars 项目复制 app.config 文件（但这不是必需的）

*   将控制台项目的输出路径更改为 .\ 因为否则 PageManager.Init 的路径错误并且找不到大多数文件

*   完成此操作后，下载完整的 ServiceStack 源代码并在 Debug 模式下重新编译，将 Docs 项目中的所有 ServiceStack 引用替换为新编译的内容。现在，您可以轻松单步执行所有 ServiceStack 代码、设置断点等，并了解发生了什么以及何时发生。控制台项目还有其他一些优点，它们启动速度更快，编辑并继续工作更频繁。

## 对于 SocialBootstrapApi，我做了同样的事情，除了/和

*   将 web.config 重命名为 app.config

*   注释掉 // [程序集：WebActivator.PreApplicationStartMethod(typeof(SocialBootstrapApi.AppHost), "Start")]

*   现在，项目的正常 ServiceStack 部分可以正常工作，尽管 url 没有初始 /api/

*   尝试将 Application_Start() 从 Global.asax 移动到 AppHost.Configure ==>> 拒绝启动

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T07:53:57.340

ASP.NET MVC 不能托管在自托管的 HttpListener 中（因为它与 ASP.NET 耦合），但 ServiceStack 确实支持在自托管的 HttpListener 应用程序中托管它的 Razor 和 Markdown 视图引擎。

[Razor Rockstars](http://razor.servicestack.net/)网站是 ServiceStack 的 Razor 和 Markdown 视图引擎支持的展示网站。[razor-console.servicestack.net](http://razor-console.servicestack.net/)是托管在 HttpListener 自主机中的同一网站。RazorRockstars的源代码[位于 GitHub 上](https://github.com/ServiceStack/RazorRockstars)，[RazorRockstars.SelfHost](https://github.com/ServiceStack/RazorRockstars/tree/master/src/RazorRockstars.SelfHost)示例包含 razor-console 的源代码。对于自托管网站，您必须记住的一件事是 VS.NET 中的 Razor 视图页面**Build Action**需要设置为**Copy if Newer**，以便将视图复制到`/bin`目录中，以便 ServiceStack 在运行时找到它们。

# javascript - 如何在需要时将 javascript 加载到单页 ASP.NET MVC4 网站中？

> ID：14090919
> 
> 赞同：0
> 
> 时间：2012-12-30T13:01:31.943
> 
> 标签：javascript, jquery, asp.net-mvc-3, asp.net-mvc-4

当用户单击登录按钮时，我有以下代码将登录页面加载到我的单页网站中。在这种情况下，href 调用一个 MVC4 控制器，它返回一个带有 HTML 的局部视图。

```
$('#loginLink')
   .click(function () {
      var $link = $(this);
      var href = $link.attr('data-href');
      $('#article').load(href);
   }
   return false;
}); 
```

但我还需要从服务器加载一些额外的 Javascript。有人可以告诉我如何**在页面加载**时做到这一点。而不是在我所有的 javascript 都加载到浏览器中时开始。

这是登录页面的 MVC4 代码：

```
@model WebUx.Models.LoginModel

<section id="content" class="grid_9">
    ........
</section>

@Scripts.Render("~/bundles/jqueryval") 
```

这是 javascript 包的 C# 代码：

```
bundles.Add(new ScriptBundle("~/bundles/jqueryval").Include(
            "~/Scripts/jquery.unobtrusive*",
            "~/Scripts/jquery.validate*")); 
```

即使脚本呈现，当我使用 chrome 开发人员工具检查时，它们似乎也没有添加到网页中。理想情况下，我不希望他们内联。我希望它们作为普通 js 加载，浏览器可以检查其 js 缓存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T13:10:21.223

脚本实际上是添加的。在您的特定情况下，您正在添加 jquery 不显眼的验证脚本，我猜它们对您不起作用，因为`$.validator.unobtrusive.parse`一旦将新内容注入 DOM，您就没有调用该方法：

因此，请确保您已使用不显眼的验证框架将所有新添加的元素注册到 DOM：

```
$('#loginLink').click(function () {
    var $link = $(this);
    var href = $link.attr('data-href');
    $('#article').load(href, function() {
        $('form').removeData('validator');
        $('form').removeData('unobtrusiveValidation');
        $.validator.unobtrusive.parse('form');
    });
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T13:33:52.573

要执行您使用 ajax 加载的代码，您可以使用该代码创建一个新标签，并将其添加到页面中。例如 ：

```
 $("#article").append("<script type='text/javascript' src='script.js'></script>"); 
```

应该执行“script.js”的内容（前提是页面中有一个id为“#article”的元素）。在 IE 中，必须在您希望脚本运行时将标签添加到页面（您不能只在脚本标签上使用 .load）。

# android - android 的 facebook 集成在 eclipse 中是忙碌的过程

> ID：14090921
> 
> 赞同：1
> 
> 时间：2012-12-30T13:01:37.200
> 
> 标签：android, facebook

我曾尝试将 FacebookSDK 集成到 Eclipse 中，但这是一个非常忙碌的过程。Eclipse一直报错，我看过教程，根据他们和developers.facebook.com，我们需要做的就是清理并在Eclipse中构建项目。我已经这样做了数千次，但同样的事情发生了，FacebookSDK 带有感叹号或一些不寻常的错误。我尝试了两种方式：

1) **File -> Import -> Existing Project Into Workspace** ，将导入的项目名称命名为带有感叹号的***FacebookSDK 。***（项目属性 -> Android -> 是否已检查库和 Java 编译器 -> JDK 合规性 ->1.6）我已经清理、构建，但出现异常错误。

2) **File -> New -> Android Project -> Create Project From Existing Source -> (浏览从developers.facebook.com下载的SDK)** 现在，项目名称为**com_facebook_android**

谁能告诉我，整合 Facebook for Android 的正确方法？![在此处输入图像描述](../Images/ea171e9df3c193cc17818936e7d06626.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T07:05:20.677

问题解决了，我使用的是旧的 Eclipse 版本，下载了新的 Eclipse(juno) [http://www.eclipse.org/downloads/](http://www.eclipse.org/downloads/) 并将 ADT 更新到 21 和 SDK。

然后按照developers.facebook.com和Bingo的程序！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T13:06:42.477

```
your step 1) and 2) are correct but you have to do more step...i give u proper step:

Facebook Integeration

Go to github and download Facebook sdk
Extract to C drive. Import to eclipse, Select Facebook
Your App > Right click > Properties>Android>Library>Facebook
You need to get AppID  
                ------ To create facebook android native app you need to provide your Android application signature in facebook app settings. You can generate your application signature (keyhash) using keytool that comes with java. But to generate signature you need openssl installed on your pc. If you don’t have one download openssl and set it in your system environment path.

5\. Download openssl
--------Open your command prompt (CMD) and run the following command to generate your keyhash.

keytool -exportcert -alias androiddebugkey -keystore "&lt;path-to-users-directory&gt;\.android\debug.keystore" | openssl sha1 -binary | openssl base64

...keytool -exportcert -alias androiddebugkey -keystore "C:\Users\deepika\.android\debug.keystore" | openssl sha1 -binary | openssl base64.............

After generating your app signature successfully, register your facebook application by going to create new facebook application and fill out all the information needed. And select Native Android App and give your hashkey there which you generated previously using keytool and note down your facebook App ID

6.Generate Access-Token

----To obtain an App Access Token, perform an HTTP GET on:
https://graph.facebook.com/oauth/access_token?
   client_id=YOUR_APP_ID
  &client_secret=YOUR_APP_SECRET
  &grant_type=client_credentials 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T13:09:40.663

您是否为 FacebookSDK 设置了项目构建目标？在 Properties->Android 下，右键单击 FacebookSDK 项目。

# php - 根据父数组的结果填充数组

> ID：14090929
> 
> 赞同：2
> 
> 时间：2012-12-30T13:02:41.770
> 
> 标签：php, database, arrays

我有一个包含年份的父数组 `1994, 1995, 1996, 1997, 1998, 1999, 2000, 2005`

另一方面，我从我的数据库中获取返回 year 和 count 的结果，现在，我要做的是根据父数组（年）填充一个数组，以便为​​以下内容生成结果：

```
由 sql 生成的结果
+----------------+
 年份 | 数数
 1994 | 16
 1995 | 16
 1996 | 16
+----------------+

```

数组应存储以下值，以检查 sql 查询结果是否包含父数组年份的结果

```
1994 | 16
1995 | 16
1996 | 16
1997 | 0
1998 | 0
1999 | 0
2000 | 0
2005 | 0

```

谢谢，注意我希望在上面提到的数组中生成reuslt，因为我必须将这些值传递给highcharts（用于生成图形）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T13:10:21.273

取决于如何`$years_db`构建，这里是一个例子：

```
$years       = array(1994, 1995, 1996, 1997, 1998, 1999, 2000, 2005);
$years_db    = array(1994 => 16, 1995 => 16, 1996 => 16);

$array_temp = array();
foreach ($years as $year)
{
    /* if (in_array($year, array_keys($years_db)))
     * $array_temp[$year] = $years_db[$year];
     * else
     * $array_temp[$year] = 0;
     */

    // @gumbo suggestion is more efficient. THX!
    $array_temp[$year] = isset($years_db[$year]) ? $years_db[$year] : 0;
}

output of $array_temp:
array (
  1994 => 16,
  1995 => 16,
  1996 => 16,
  1997 => 0,
  1998 => 0,
  1999 => 0,
  2000 => 0,
  2005 => 0,
) 
```

# php - 从位于域名目录上方的不同目录中调用所有文件

> ID：14090931
> 
> 赞同：2
> 
> 时间：2012-12-30T13:02:54.097
> 
> 标签：php

我正在尝试在 PHP 中创建一个脚本，该脚本从域名目录上方的目录中读取并包含所有文件。

例如：

我的域名是 example.com，位于 /var/www/html/example.com/，我希望 /var/www/html/example.com/file.php 能够读取：

*   /var/www/html/videos/video1/ 其中包含 index.html 和文件夹：
    *   /var/www/html/videos/video1/images/ 和 /var/www/html/videos/video1/scripts/

例如 www.example.com/file.php?dir=/var/www/html/videos/video1/index.html

如果我使用 include (/var/www/html/videos/video1/index.html) 它只会调用 html 文件，这是完美的。但是，图像文件夹和脚本文件夹中的所有文件都无法加载。

我不想单独复制或调用每个文件。我希望能够只需要调用 index.html 然后让浏览器认为它在该目录中并自动读取其中的任何文件。

我知道这是可行的，因为 Moodle 使用这种方法（在 file.php 中）通过将学习文件存储在公用文件夹上一层的 moodledata 文件夹中来保护学习文件。我看过但无法理解它，我已经搜索了互联网以实现我上面解释的方法但没有任何成功。

我想这样做的原因是避免在服务器上为托管在同一服务器上的其他站点提供重复的视频文件。非常感谢您花时间提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T12:38:03.983

看看是否可以直接在浏览器中加载图像，如果可以，则可能是您的代码有问题，如果不能，则可能是权限问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T13:11:39.560

```
$dir = realpath(dirname(__FILE__)."/../"); 
```

这将是您要查找的目录。需要与此相关的文件。

要输出不同的文件，请查看直接输出到缓冲区的[readfile](http://php.net/manual/en/function.readfile.php)，或者使用可以保存在变量中的[file_get_contents 。](http://php.net/manual/en/function.file-get-contents.php)

# sockets - 使用 ObjectOutputStream 通过 J2ME 套接字连接发送 String[] 数组

> ID：14090932
> 
> 赞同：0
> 
> 时间：2012-12-30T13:03:17.463
> 
> 标签：sockets, java-me

我正在尝试`String[]`使用 j2me 发送一个数组`ObjectOUputStream`，但我不断收到此错误，

> java.lang.IllegalArgumentException：不是 HTTP URL

这是我的代码：

```
 OutputStream os=null;
    HttpConnection hc= null;
    ObjectOutputStream oj=null;

    //get the URL
    String serverURL=entry.getUrl();

    hc=(HttpConnection)Connector.open(serverURL, Connector.READ_WRITE, true);
    hc=(HttpConnection)Connector.open(serverURL);

    hc.setRequestMethod (HttpConnection.POST);
    hc.setRequestProperty ("Content-Type", "application/x-www-form-urlencoded");
    hc.setRequestProperty ("User-Agent", "Profile/MIDP-2.0 Configuration/CLDC-1.0");
    hc.setRequestProperty ("Content-Language", "en-US");

    System.out.println ("Posting to the URL: " + entry.getVectorParams());

    //open the output stream to send the post parameters
    //os=hc.openOutputStream();

    oj=(ObjectOutputStream)hc.openOutputStream();
    //writing post parameters
    String[] bg=entry.getVectorParams();

    oj.writeObject(bg); 
```

请给个建议。

我检查了我的 URL，它是正确的，关于 Connector.open()，我在这里粘贴了两次，而不是在我的实际代码中。还有什么我做错了吗？

，`System.out.println("Posting to the URL: " + entry.getVectorParams())`这仅打印帖子参数，我在这里传递了serverurl：

```
String serverURL=entry.getUrl();
hc=(HttpConnection)Connector.open(serverURL, Connector.READ_WRITE, true); 
```

我的服务器网址是：`http://localhost:8080/Web/gServer.jsp`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T22:48:25.953

您的`serverURL`变量的值不能是有效的 URL。尝试打印出来，然后检查。

你有这个调试语句：

```
System.out.println ("Posting to the URL: " + entry.getVectorParams()); 
```

但那是打印出参数，而不是 url。您应该打印出`serverURL`变量。

此外，您`Connector.open()`连续两次调用。没有必要这样做。

**更新：**我还认为您将 POST 参数写入连接的`OutputStream`. 我不会使用`ObjectOutputStream`. 有关进行 J2ME POST 调用的示例，请参阅[类似的内容。](http://codetrips.blogspot.com/2007/04/http-post-from-j2me-midlet.html)基本上，您制作一个`String`POST 参数，以 . 分隔`&`，然后用于`String.getBytes()`转换为 a`byte[]`以写入`OutputStream`.

# android - Android DatePickerDialog 到了一年的历史

> ID：14090933
> 
> 赞同：0
> 
> 时间：2012-12-30T13:03:32.043
> 
> 标签：android, datepicker, history

我正在编写一个关于埃及历史的 android 应用程序，我想在对话框中添加一个 DatePicker，我将在其中显示年份，并且每当用户设置年份时，它都会在布局中显示该年份的事件。如果他改变年份，事件改变......等等这是一个历史应用程序，我不知道该怎么做！我需要帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T13:11:25.453

根据文档（http://developer.android.com/reference/android/widget/DatePicker.html）

您可以根据要覆盖的时代设置最小和最大日期：

```
android:maxDate     The minimal date shown by this calendar view in mm/dd/yyyy format. 
android:minDate     The minimal date shown by this calendar view in mm/dd/yyyy format. 
```

然后使用 onDateChangedListener 显示正确的 Layout。

[http://developer.android.com/reference/android/widget/DatePicker.OnDateChangedListener.html](http://developer.android.com/reference/android/widget/DatePicker.OnDateChangedListener.html)

由于您只想使用一年，我建议您改用 NumberPickerDialog。DatePicker 对于您的用例来说可能“太多”了。

# objective-c - 我应该如何重新创建 iOS 主屏幕打开文件夹动画？

> ID：14090934
> 
> 赞同：3
> 
> 时间：2012-12-30T13:03:32.893
> 
> 标签：objective-c, ios, cocoa-touch, animation

起初我认为这不会太难，但结果比我想象的要多一些。

![iOS文件夹打开](../Images/4018ef8e12504175d0cd66b99bcdf5ca.png)

目前我的代码基于此：[https](https://github.com/jwilling/JWFolders) ://github.com/jwilling/JWFolders 。但是，它不是很干净，最大的问题是每次打开文件夹时都会截取屏幕截图（renderInContext: 对 CPU 的负担很大，因此 fps 非常低）。除此之外，这个实现看起来不像 Apple 动画那样干净和优美。

Apple 设法实现了不滞后的像素完美动画。我也想做同样的事！最好的方法是什么/你会怎么做 - 一个干净编码、好看和流畅的动画？目前，我的动画在所有这些方面都缺乏，我对如何才能做得更好（就像 Apple 所做的那样）感到困惑。

-

我不是在乞求代码，只是最好的方法/方法。但是，如果您想继续编写代码，那么我无法拒绝（那绝对值得）！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T13:45:49.203

我会将 Springboard 分成几个视图，其中每个视图都是一行图标。
如果单击文件夹图标，我会为所有以下视图设置动画以向下和向上移动以放置文件夹内容。同时，我会添加一个表示文件夹内容的子视图，并在必要时以与其大小和位置相同的速度进行动画处理。

为了支持跨越整个屏幕的背景图像，我会将其切割成碎片并将这些碎片作为背景图像视图添加到每一行的视图中。

* * *

我写了一个快速而肮脏的示例代码，动画从任何点击位置开始，也可以[在 github 上作为完整项目提供](https://github.com/vikingosegundo/VSFolderAnimation)。

![截屏](../Images/1cd8469dc7fa62d1fb5c7246585b1867.png)

```
@interface ViewController ()

@property (nonatomic, strong) UIView *upperView;
@property (nonatomic, strong) UIView *lowerView;

@property (nonatomic, strong) UIImageView *upperImageView;
@property (nonatomic, strong) UIImageView *lowerImageView;

@property (nonatomic, strong) UIView *folderContentsView;

@property (nonatomic, assign) CGRect startRect;
@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    UIImage *bgImg = [UIImage imageNamed:@"bg.png"];
    self.upperImageView = [[UIImageView alloc] initWithImage:bgImg];
    self.lowerImageView = [[UIImageView alloc] initWithImage:bgImg];
    [self.upperImageView setContentMode:UIViewContentModeTop];
    [self.lowerImageView setContentMode:UIViewContentModeTop];

    self.upperView = [[UIView alloc] initWithFrame:self.upperImageView.frame];
    self.lowerView = [[UIView alloc] initWithFrame:self.lowerImageView.frame];
    [self.upperView addSubview:_upperImageView];
    [self.lowerView addSubview:_lowerImageView];

    [self.view addSubview:_lowerView];
    [self.view addSubview:_upperView];

    UITapGestureRecognizer *upperTapRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self
                                                                                         action:@selector(openOverlay:)];
    UITapGestureRecognizer *lowerTapRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self
                                                                                         action:@selector(openOverlay:)];

    [self.upperView setUserInteractionEnabled:YES];
    [self.upperView addGestureRecognizer:upperTapRecognizer];
    [self.upperView setClipsToBounds:YES];

    [self.lowerView setUserInteractionEnabled:YES];
    [self.lowerView addGestureRecognizer:lowerTapRecognizer];
    [self.lowerView setClipsToBounds:YES];

    self.folderContentsView = [[UIView alloc] initWithFrame:CGRectZero];
    self.folderContentsView.backgroundColor = [UIColor redColor];
    UITapGestureRecognizer *closeTapRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self
                                                                                         action:@selector(closeOverlay:)];
    [self.folderContentsView addGestureRecognizer:closeTapRecognizer];
    [self.view addSubview:self.folderContentsView];

    [self.folderContentsView addSubview:[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"bgFolder.png"]]];
    [self.folderContentsView setClipsToBounds:YES];

    self.startRect = [self.upperView frame];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
}

-(void)openOverlay:(UITapGestureRecognizer *) sender
{
    [self.upperView setUserInteractionEnabled:NO];
    [self.lowerView setUserInteractionEnabled:NO];
    CGPoint location = [sender locationInView:sender.view];

    self.folderContentsView.frame = CGRectMake(0, location.y,
                                    _lowerView.frame.size.width, 0);
    self.lowerView.frame = CGRectMake(0, location.y,
                                      _lowerView.frame.size.width, _lowerView.frame.size.height);
    self.upperView.frame = CGRectMake(0, 0,
                                      _upperView.frame.size.width, location.y);
    self.lowerImageView.frame = CGRectMake(_lowerImageView.frame.origin.x, -location.y,
                                           _lowerImageView.frame.size.width, _lowerImageView.frame.size.height);

    [UIView animateWithDuration:.5 animations:^{
        self.folderContentsView.frame = CGRectMake(0, location.y,
                                    _lowerView.frame.size.width, 200);
        self.lowerView.frame = CGRectOffset(_lowerView.frame, 0, 200);
    }];    
}

-(void) closeOverlay:(UITapGestureRecognizer*) sender
{
    [UIView animateWithDuration:.5 animations:^{
        self.lowerView.frame = CGRectOffset(_lowerView.frame, 0, -200);
        self.folderContentsView.frame = CGRectMake(0, self.folderContentsView.frame.origin.y,
                                        self.folderContentsView.frame.size.width, 0);
    } completion:^(BOOL finished) {
        [self.upperView setUserInteractionEnabled:YES];
        [self.lowerView setUserInteractionEnabled:YES];
        self.upperView.frame = self.startRect;
    }];
}

@end 
```

两个视图在图层中配备了相同的背景。如果检测到点击，则调整两个视图的大小，以便上视图在点击的 y 坐标处结束，而下视图从那里开始。添加到 lowerView 的 UIImageView 向相反方向移动，以便图像保持在原位。

现在 lowerView 向下滑动，同时添加 contentView 并以相同的速度调整大小。

如您所见，不需要图像渲染或其他艰难的操作。只是 UIView 动画。

![在此处输入图像描述](../Images/aaea772b0c4c372072f9cf806a9756ce.png)

# iframe - 为什么 and cannot be closed like this />?

> ID：14090935
> 
> 赞同：0
> 
> 时间：2012-12-30T13:03:35.710
> 
> 标签：iframe, xhtml, coding-style

> **Possible Duplicate:**
> [What are all the valid self-closing elements in XHTML (as implemented by the major browsers)?](https://stackoverflow.com/questions/97522/what-are-all-the-valid-self-closing-elements-in-xhtml-as-implemented-by-the-maj)

If you're writing XHTML writing `<div class="whatever />` would be perfect and the page will continue to flow normally behind this `<div>` while writing `iframe` and `textarea` like this:

```
<textarea name="whatever" />
<iframe /> 
```

is considered invalid and the tags behind will be ignored as if the browser is waiting for these 2 elements to be closed?

What's the reason for this inconsistency? There must be a particular reason why these 2 particular elements cannot be closed like the `<div />` example

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T13:07:55.350

Because they are not self closing tags. They have to to be closed after they are opened. See this as a reference

[What are all the valid self-closing elements in XHTML (as implemented by the major browsers)?](https://stackoverflow.com/questions/97522/what-are-all-the-valid-self-closing-elements-in-xhtml-as-implemented-by-the-maj)

Also check as different types of tags here

[http://www.w3.org/TR/html5/syntax.html](http://www.w3.org/TR/html5/syntax.html)

# django - 使用 celery 进行数据迁移。这是个好主意吗？

> ID：14090943
> 
> 赞同：2
> 
> 时间：2012-12-30T13:05:15.140
> 
> 标签：django, celery

我正在进行数据迁移，处理图像/视频等被下载然后使用其 api 发送到保管箱。

我正在为整个网络应用程序使用 python-django，但我想这将占用大量带宽，并且可能存在很多问题，即保存一个图像失败不应停止整个迁移。

因此，芹菜是个好主意吗？还是扭曲？

我有点困惑这对我有什么帮助。我想到的是为处理单个图像或一小组图像的过程生成一个服务器/线程，从而能够在多个线程上执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T14:15:37.307

对您的问题的简短回答“芹菜是个好主意吗？” 是是的”。我使用 Celery 实现了一个类似的过程，其中用户提交表单会启动对 Twitter API 的异步调用，然后将其写回我数据库中保存的对象。我发现 Celery 非常适合这项任务（没有双关语）。

Celery 将允许您启动预定义的任务（在某种程度上，可以将其视为添加了 @task 装饰器的“普通”Python 函数），每次用户表示他们想要下载图像或图片。Celery 为您提供了对错误和重试的精细化、每个任务的控制，并且任务可以单独提交，也可以作为链、和弦或组提交，这意味着即使单个图像下载失败，您也绝对可以满足继续迁移的要求.

我建议花一些时间在这里学习 Celery 教程和[这里](http://docs.celeryproject.org/en/latest/getting-started/first-steps-with-celery.html)的 Celery-Django 教程[，](http://docs.celeryproject.org/en/latest/django/index.html)这将向您介绍 Celery 和 Django 的基本工作流程。

我无法谈论 Twisted 的优点，但如果您正在寻找关于每个人的相对优势和劣势的意见，这些看起来是一个好的开始：

*   [扭曲或芹菜？哪个适合我的具有大量 SOAP 调用的应用程序？](https://stackoverflow.com/questions/6357737/twisted-or-celery-which-is-right-for-my-application-with-lots-of-soap-calls)
*   [进程的同步生成：设计问题 - Celery 或 Twisted](https://stackoverflow.com/questions/4635033/async-spawing-of-processes-design-question-celery-or-twisted)

# symfony - Symfony2：网站、移动网站和 API 的代码结构？

> ID：14090946
> 
> 赞同：3
> 
> 时间：2012-12-30T13:05:51.837
> 
> 标签：symfony, project-organization, code-structure

我想建立一个中型网站，其中还包括一个移动网站和一个 API。因为我已经有一些 Symfony 的经验，所以我想在它之上构建这个项目。

但是，我不知道如何构建我的项目。也许有一些指导方针如何解决这个问题？

将每个组件构建为单独的 Bundle 是否是个好主意？例如 CoreBundle、APIBundle、WebsiteBundle 和 MobileWebsiteBundle，而 CoreBundle 将包含所有模型和验证以及其他捆绑控制器和视图？

还是有完全不同的方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T13:41:04.280

您不需要将所有代码放入包中。事实上，你放在那里的代码越多，你就越会将它耦合到框架中。

考虑将一些与 Symfony 无关的代码提取到单独的命名空间中，并将包视为 PHP 代码和 Symfony 框架之间的粘合剂。

例如：

*   极致
    *   捆绑
        *   ApiBundle
        *   网站捆绑
    *   实体
    *   工具
    *   枝条

如果您决定将实体放在捆绑包之外，则必须在*app/config/config.yml*中配置新映射：

```
doctrine:
    orm:
        mappings:
            Bossa:
                type:       annotation
                is_bundle:  false
                dir:        %kernel.root_dir%/../src/Acme/Entity
                prefix:     Acme\Entity\
                alias:      Acme 
```

# android - 无法更改 Android 应用程序上的字符串

> ID：14090947
> 
> 赞同：0
> 
> 时间：2012-12-30T13:05:55.187
> 
> 标签：android, string, project

我想在`/res/strings.xml`. 我重写了一个新字符串，它的名称，我可以在页面`town`上看到一个新字符串。`town.xml`我清理项目并运行应用程序，但在模拟器上看不到新字符串，我看到旧字符串。问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T13:14:24.560

可能 Eclipse 无法覆盖模拟器上安装的 APK。从模拟器中删除您的应用，然后重试。

如果 Eclipse 似乎无法在模拟器中重新安装应用程序，请尝试重新启动您的模拟器。

这假设您在*Town.xml*中正确分配了字符串（`getResources().getString(R.strings.youreditedstring)`如果您通过 Java 代码而不是直接在 xml 中分配字符串）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T13:10:29.817

*   尝试手动删除`/gen/your-package/R.java`文件并再次构建/运行应用程序
*   您是否在“项目”菜单中禁用了“自动构建”？
*   您是否可以“手动”在 Java 代码中分配字符串？
*   从模拟器中手动删除应用程序（通过系统设置 --> 应用程序 --> 卸载）并从 Eclipse 再次运行它

# javascript - Kendo UI 货币格式

> ID：14090948
> 
> 赞同：8
> 
> 时间：2012-12-30T13:06:16.077
> 
> 标签：javascript, jquery, formatting, grid, kendo-ui

如何格式化网格单元以使用 £s 而不是默认的 $s？

我看了看高低，但没有答案。

我有：

```
{field: "price", title: "Price (£)", width: 95, format: "{0:c}"}, 
```

这给出了 0.00 美元，但我如何获得 0.00 英镑？

我试过打电话：

```
kendo.culture("en-gb"); 
```

在网格之前，但它什么都不做。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-30T14:30:11.527

您应该首先确保包含英语文化 JavaScript 文件。然后调用`kendo.culture("en-GB")`（大小写很重要）。

更多信息可以在[全球化](http://docs.kendoui.com/getting-started/framework/globalization/overview)帮助主题中找到。

# php - 如何在 CakePHP 中生成安全的私有 URL？

> ID：14090951
> 
> 赞同：5
> 
> 时间：2012-12-30T13:06:42.430
> 
> 标签：php, cakephp, cakephp-2.0

我喜欢为用户的条目创建一个安全的 URL（删除和编辑链接）。

例如，这是我的实际网址

```
http://localhost/project/blogs/delete/1/test-title 
```

我想做的是，

```
http://localhost/project/blogs/delete/4324143563443/test-title (some hash made of salt+user auth id) 
```

我的主要目的是创建一个安全哈希以及删除和编辑方法的 URL。是否有任何自定义方法可用？我在 CakePHP 安全功能[http://book.cakephp.org/2.0/en/core-utility-libraries/security.html](http://book.cakephp.org/2.0/en/core-utility-libraries/security.html)中进行了搜索，但不确定它是否正确或不确定使用哪种算法）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-30T13:38:13.860

首先，虽然我不太清楚您要如何/为什么要这样做，但听起来您想通过隐藏它们的 URL 来“保护”这些链接。这被称为“[通过默默无闻的安全](http://en.wikipedia.org/wiki/Security_through_obscurity)”，通常是不赞成的。

在 Cake（和大多数应用程序）中，实现此目的的常用方法是允许用户登录（请参阅：[Auth 组件](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html)），然后，例如，在您的删除操作中（即对于 URL /delete/1）请求将被检查对于有效的用户会话，并且该用户具有足够的删除权限。

尽管我强烈建议不要这样做，但如果您确实希望创建这些晦涩的 URL，那么您可能应该使用[Security::hash();](http://book.cakephp.org/2.0/en/core-utility-libraries/security.html#Security::hash) . 这样做的问题是，您不能只对 id 进行散列，然后直接从散列中确定 id（这就是重点！）。相反，您需要将哈希存储在数据库中，然后查询哈希（每个帖子都可以有一个从 id 或随机数据生成的唯一哈希，两者都可以）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-30T14:00:27.957

如前所述，“默默无闻的安全性”不是很聪明。然而，实现您想要的最简单的方法是使用 UUID 作为表的主键，而不是数字自动增量。

# algorithm - 如何使用 OSRM 计算单源最短路径？

> ID：14090954
> 
> 赞同：8
> 
> 时间：2012-12-30T13:06:57.690
> 
> 标签：algorithm, openstreetmap, graph-algorithm, dijkstra, osrm

我最近一直在玩[OSRM](http://project-osrm.org/)路由库。它似乎在解决最短路径问题方面非常有效。但是，我没有看到如何用它计算单源最短路径。更准确地说，给定一个固定起点，计算在给定距离限制内（例如，30 分钟内可到达）到所有位置的最短距离。

OSRM 在内部使用收缩层次结构。据我了解，在计算现实世界数据中两个位置之间的距离时，这种技术要优于 Dijkstra 算法。但是，对于我的问题，Dijkstra 的算法似乎更适合，不是吗？

OSRM 是否提供 API 来计算单源最短路径问题（有距离限制）？还有其他更适合此类问题的免费路由库吗？最好是对 OpenStreetMap 数据有良好支持的一种。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-05T17:52:18.143

OSRM 正在使用收缩层次结构 (CH) 来快速实现“一对一路由”。要使 CH 正常工作，您需要一种适应的双向算法（A*、Dijkstra、...），因此单源情况更加困难。但是，如果您事先知道您想要哪些目的地，那么一对多算法相对简单。

如果您想要使用查找表的“非目标导向的双向搜索”的解决方案，还可以查看论文“ [Fast Detour Computation for Ride Sharing](http://algo2.iti.kit.edu/1377.php) ”或[此处。](http://drops.dagstuhl.de/opus/volltexte/2010/2752/pdf/8.pdf)

> 其他免费路由库？

我会建议我的 Java GraphHopper 项目；）

但当然还有更多：[http ://wiki.openstreetmap.org/wiki/Routing](http://wiki.openstreetmap.org/wiki/Routing)

# windows - 用于重命名和移动文件的批处理脚本

> ID：14090959
> 
> 赞同：0
> 
> 时间：2012-12-30T13:07:40.840
> 
> 标签：windows, shell, batch-file

我有一个广播管理系统，它能够在演出后运行批处理脚本。

我正在寻找一个批处理脚本文件，它可以像这样重命名目录中的任何文件：

> 1.mp3 --> [重播]1.mp3

然后将文件从文件夹 a 移动到文件夹 b。

关于如何在语法级别创建这样的脚本有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T09:55:24.647

干得好

```
ren *.mp3 [Replay]*.* 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-01T07:58:36.193

有很多方法可以满足您的要求，此脚本通过搜索`mp3`当前文件夹中的所有文件并将它们移动到`folderb`指定新名称来实现。

```
@ECHO off

FOR %%i IN (*.mp3) DO (
  MOVE "%%i" "folderb\[Replay]%%i"
) 
```

# yql - 如何连续获取股市数据值

> ID：14090962
> 
> 赞同：0
> 
> 时间：2012-12-30T13:07:53.457
> 
> 标签：yql, stock, yahoo-finance

我正在开发一个 BE 级项目，并希望连续获取股市数据并将其填充到我机器上的本地服务器（可能是 oracle）中。问题是如何做到这一点？我是否需要编写 javascript 或其他代码来不断获取数据？或者，我的机器怎么可能一开机就开始获取数据。我正在考虑使用 YQL/yahoo-finance-api 来获取股票行情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T13:19:18.830

您可以使用 YQL 语句作为参数访问调用 HTTP get 的 YQL API，因此您不必使用 javascript（我不推荐它，因为它在客户端机器上运行）。您应该创建一个服务器端脚本来完成此操作，使用您喜欢的任何语言。使脚本在启动时运行取决于您使用的操作系统。

# java - 我们如何处理异步网络服务调用的异常？

> ID：14090964
> 
> 赞同：0
> 
> 时间：2012-12-30T13:08:39.370
> 
> 标签：java, asynchronous, error-handling, jax-ws

我无法弄清楚如何做到这一点，并且网络上的所有教程似乎都只关注在一切正常的情况下检索结果。但是我应该如何改进以下代码以在出现异常时获取异常？

```
Future<?> fooFuture = webserviceEjbService.getWebServiceEjbPort()
        .fooAsync(new AsyncHandler<FooResponse>() {
        @Override
        public void handleResponse(Response<FooResponse> res) {
            if (res.isDone()) {
        result = res.get().getResponse();
        }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T13:14:33.963

如果计算抛出 ，A`Future`的[`get()`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html#get%28%29)方法将抛出。这被设置为 的原因。[`ExecutionException`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutionException.html)`Exception``Exception``ExecutionException`

这允许检查计算结果的线程处理该计算引发的异常。

# php - 提交更新查询后用户激活码未激活

> ID：14090970
> 
> 赞同：0
> 
> 时间：2012-12-30T13:09:53.923
> 
> 标签：php, mysql, zend-framework

我正在使用 ZEND 进行项目

一件非常奇怪和不合逻辑的事情不断发生。

当用户注册时，它会生成一个激活码并写入 DB：

```
//Generate Activation Code;
$activation_code = date('YmdHis');
$activation_code .= substr(number_format(time() * rand(),0,'',''),0,10); 
```

在我得到的数据库中。像这样的代码：**201212301653302670595490**

用户应该去链接 `/user/activation/201212301653302670595490`

我用控制器得到这个参数：

```
public function activateAction() {

$activation_code = htmlentities(trim($this->_getParam('activation_code', 0)));
$activation_code = preg_replace("/[^0-9]/","", $activation_code);

    $usersModel = new Users_Model_DbTable_Users();
    $result = $usersModel->activUser($activation_code);

    if($result) {

        $this->view->message = 'Your account is activated. You may now Login.';

    } else {

        $this->view->message = 'Something went wrong.';

    }
} 
```

这个动作在我的模型中调用了一个函数：

```
public function activUser($activation_code) {

    $data = array(
        'status' => 2
    );

    if($this->update($data, 'activation_code = '. $activation_code)) {
        return true;            
    }

} 
```

这是我的引导程序中的自定义路由：

```
$activateUserRoute = new Zend_Controller_Router_Route("user/activate/:activation_code", array(
   'module' => 'users',
   'controller' => 'manage',
   'action' => 'activate'
));

$router->addRoute('activateUserRoute', $activateUserRoute); 
```

我在 DB 表中的单元格**activation_code**是 VARCHAR，长度为 24（因为生成的代码长度为 24 个符号）。

**尴尬时刻**

它一直在激活过程中失败。它总是返回 false；

如果我去数据库，用任何数字 1、1231231231234 甚至生成的代码本身（201212301653302670595490）替换生成的代码，它会激活。

也许你能告诉我这里出了什么问题？有什么练习吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T18:24:18.560

尝试[http://framework.zend.com/manual/1.12/en/zend.db.profiler.html](http://framework.zend.com/manual/1.12/en/zend.db.profiler.html)查看生成的 SQL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T03:06:59.790

我得先问这个：

有什么意义：`$activation_code = preg_replace("/[^0-9]/","", $activation_code);`看起来您正在用任何内容替换激活代码中的所有值。

您将激活码传递给[$where 参数](http://framework.zend.com/manual/1.12/en/zend.db.table.html#zend.db.table.update)的方式已被弃用。在某些地方，语法可能仍然有效，但在其他地方却不行。

```
public function activUser($activation_code) {

    $data = array(
        'status' => 2
    );
    $where = $this->getAdapter()->quoteInto('activation_code = ?', $activation_code);
    //update() returns number of rows updated,
    if($this->update($data, $where) === 0) {
        return false;            
    } else {
        return true;
    }
} 
```

因为`update()`返回更新的行数，您当前`if()`语句中的任何不真实条件都是不准确的。IT 可能在大多数情况下都能正常工作......
如果您准确地测试了应该更新的行数并且如果没有返回该数字则失败，那就更好了。

`htmlentities()`可能不是过滤输入参数的最佳选择。过滤您知道的数据类型可能会更好。[Zend_Filter_Input](http://framework.zend.com/manual/1.12/en/zend.filter.input.html)具有非常有用的过滤器和验证器。

# r - 通过调用 datadist() + options() 设置 rms 时测试失败

> ID：14090973
> 
> 赞同：6
> 
> 时间：2012-12-30T13:10:12.147
> 
> 标签：r, testthat

我正在尝试使用`testthat`包进行一些单元测试，但我似乎无法让它与`rms`包一起正常工作。下面的例子：

```
library(rms)
set.seed(10)
ds <- data.frame(
  ftime = rexp(200),
  fstatus = sample(0:1,200,replace=TRUE),
  x1 = runif(200),
  x2 = runif(200),
  x3 = factor(sample(LETTERS[1:3], size=200, replace=TRUE)))

ddist <- datadist(ds)
options(datadist="ddist")

s <- Surv(ds$ftime, ds$fstatus == 1)
fit <- cph(s ~ x1 + x2 + x3, data=ds) 
```

返回此错误：

> 设计错误（eval.parent（m））：未找到选项的数据集 ddist（datadist=）

即使 print(ddist) 有效并且 options("datadist") 返回正确的变量，这也是如此。是否`testthat`有导致错误的不同变量范围？

## 更新

我通过在我的包目录（Eclipse StatET）中启动的 R 控制台运行测试：

```
library(testthat)
test_dir("inst/tests")
q() 
```

R CMD check --as-cran 也会出现同样的错误

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-08-02T14:50:45.170

虽然@agstudy 的建议是正确的，但我已经通过使用将变量分配给全局环境的**<<-**运算符为该错误找到了一个简单的解决方法，这是一个有效的测试文件：

```
set.seed(10)
n <- 11
ds <- data.frame(
  y = rnorm(n),
  x1 = factor(sample(c("a", "aa", "aaa"), size = n, replace = TRUE)))

suppressMessages(library(rms))
dd <<- datadist(ds)
options(datadist = "dd")

context("rms")
test_that("test", {
  fit <- ols(y ~ x1, data=ds)
  s <- summary(fit)
  expect_true(inherits(s, "summary.rms"))
}) 
```

如果您碰巧在以下范围内进行分配，这也有效`test_that`：

```
context("rms")
test_that("test", {
  set.seed(10)
  n <- 11
  ds <- data.frame(
    y = rnorm(n),
    x1 = factor(sample(c("a", "aa", "aaa"), size = n, replace = TRUE)))

  suppressMessages(library(rms))
  dd <<- datadist(ds)
  options(datadist = "dd")

  fit <- ols(y ~ x1, data=ds)
  s <- summary(fit)
  expect_true(inherits(s, "summary.rms"))
}) 
```

这也相当于下面的代码（也许更容易理解）：

```
env <- globalenv() # Grab the global environment
env$dd <- datadist(ds) # Assign the datadist to it 
```

如果您想了解有关环境如何工作的更多信息，我可以推荐 Hadley 对该[主题](http://adv-r.had.co.nz/Environments.html)的出色 Advanced R 覆盖。我发现这解释了我遇到的许多问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T19:49:15.580

是的，这是错误提示的范围问题。

一个可能的解决方法是定义`ds`你打电话的地方`test_dir`

例如你创建文件，`runtest.R`像这样

```
library(rms)
set.seed(10)
ds <- data.frame(
  ftime = rexp(200),
  fstatus = sample(0:1,200,replace=TRUE),
  x1 = runif(200),
  x2 = runif(200),
  x3 = factor(sample(LETTERS[1:3], size=200, replace=TRUE)))
ddist <- datadist(ds)
options(datadist="ddist")
library(testthat)
test_dir("inst/tests") 
```

# c++ - 虚拟表 C++

> ID：14090981
> 
> 赞同：1
> 
> 时间：2012-12-30T13:11:01.703
> 
> 标签：c++, inheritance, virtual-functions, vtable

> **可能重复：**
> [派生对象上的 C++ 虚函数调用是否通过 vtable？](https://stackoverflow.com/questions/4464144/does-c-virtual-function-call-on-derived-object-go-through-vtable)

我有一个关于 c++ 虚拟表的问题，特别是针对 gcc。考虑以下代码

```
class A{
public:
virtual void doSomething(){}

}

class B : public A{
public:
virtual void doSomething(){}
}

//1 

A* a = new A()
a->doSomething(); 
```

现在的问题是，由于指针 a 指向 A 的对象，编译器是否会费心在虚函数中进行查找，或者它是否足够聪明地解决这个问题并摆脱虚表垃圾。？

谢谢

# php - 一段时间后刷新页面或重定向页面到循环中的新 URL

> ID：14090988
> 
> 赞同：-1
> 
> 时间：2012-12-30T13:11:46.467
> 
> 标签：php, javascript

我想在 4 分钟后刷新页面或将页面重定向到新的 url 每次刷新或重定向
**示例这样的事情**

```
$i=1
while($i = 100){
 //** Now URL redirect here 
$url="u_pc_change.php?id=$i";
echo '<meta http-equiv="refresh" content="2;url='.$url.'">';
$i++;
 } 
```

一些代码在这里等待 4 分钟并将页面重定向或刷新到新的 url，比如

```
u_pc_change.php?id=1
u_pc_change.php?id=2
u_pc_change.php?id=3 
```

上面的代码将不起作用，因为它执行快速循环，并且什么都不会等待 4 分钟......我需要一种方法来等待 4 分钟，然后再进行第二次循环......以进行刷新或重定向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T13:21:38.260

您可以使用以下代码将您的页面重定向到随机 url

```
<script type="text/javascript">

var urls = new Array("http://www.firstURL.com/", "http://www.SecondURL.com/");

function redirect(){
    window.location = urls[Math.floor(urls.length*Math.random())];
}

setInterval("redirect()", 4000);

</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T13:32:41.253

如果你想等待 4 分钟，你可以像这样使用 JS：

```
<script>setTimeout(function() { document.location='your_desired_location';},1000 * 60 * 4);</script> 
```

如果我对您的理解正确，您希望每 4 分钟显示一次不同的内容，无论用户是刷新页面、离开并返回，还是仅在页面上停留 4 分钟。

您可以节省用户刷新时间并下次检查。

```
session_start();
if( !isset($_SESSION['lastRefresh']) ) $_SESSION['lastRefresh'] = time(); //User is here for first time
else {        
    if( time() - $_SESSION['lastRefresh']  > 60 * 4 )//Show something else
    {
      $_SESSION['lastRefresh'] = time();//This is in if, so "timer" won't reset if user refresh before 4 minutes.
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T14:05:31.313

当然，您可以按照其他人的建议在 JS 中刷新页面，也可以使用您在示例中使用的元刷新。但是，使用任何类型的超时（或间隔）都没有意义，因为您想刷新整个页面。

我会在后端处理整个逻辑，一次只担心一次刷新。如果您想按顺序刷新页面，只需创建一个 URL 数组并始终从您所在的页面中选择下一个 URL。如果您想要随机页面加载，只需为每页选择一个随机数组索引。

同样，不需要任何循环或间隔。他们在任何一端都不会活到足够长的时间来发挥作用。

# salesforce - VisualForce，在“单个”页面上列出两个对象

> ID：14090989
> 
> 赞同：0
> 
> 时间：2012-12-30T13:11:52.863
> 
> 标签：salesforce, apex-code, visualforce, force.com

我已经阅读了大多数教程并在谷歌上搜索了很多，但没有成功......

假设我有两个 DB 对象。

我想要一个“单页”，并排列出他们的记录。结果看起来像一个网格 UI。

有可能吗？我知道我们可以有一个“扩展控制器”来处理一些定制的控制器。我仍然想知道如何从单个控制器中的两个对象中检索记录...

有什么建议吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T13:16:59.717

你能提供更多细节吗，因为我在这里看不到任何复杂的东西。

控制器：

```
sObject obj1 {get;set;}
sObject obj1 {get;set;}

void methodName() {
 obj1 = [select ... ];
 obj2 = [select ... ];
} 
```

视觉力量页面：

```
<apex:page controller="blablablaController" 
    title="blabla"
    sidebar="false"
>

    <apex:pageMessage rendered="{!(errorMessage != null)}" summary="{!errorMessage}" severity="warning" strength="2" />

    <apex:form id="blaForm" >

        <apex:pageBlock mode="edit">
            <apex:pageBlockSection columns="1">
                <apex:outputPanel >
                    <apex:outputText value="{!obj1.field1}" 
                        style="
                            font-weight:bold;
                            font-size:large;
                        "
                    />
                    <br/>
                    <apex:outputText value="{!obj2.field1}" 
                        style="
                            font-weight:bold;
                            font-size:large;
                        "
                    />
... 
```

等等...

请向我们提供有关您要实现的目标的更多信息。因为对我来说这个解决方案是显而易见的。

# jquery - 将 jquery 的 after 与 divs 属性一起使用

> ID：14090993
> 
> 赞同：1
> 
> 时间：2012-12-30T13:12:17.427
> 
> 标签：jquery

如何使用[jQuery`after()`](http://api.jquery.com/after/)在具有特定属性的 div 之后插入数据？

我`<div>`的就是这样

```
<div id="mod" mod-id="1" mod-user="user1">
Content 1
</div>

<div id="mod" mod-id="2" mod-user="user2">
Content 2
</div>

<div id="mod" mod-id="3" mod-user="user3">
Content 3
</div> 
```

在这里，我如何告诉 jQuery`after()`在之后插入数据`id="mod" and mod-id="2"`？

我可以告诉`after()`insert after `id="mod"`，但不知道如何根据 a`div`的 data 属性告诉它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T13:22:21.963

ID 必须是唯一的，您可以使用类而不是自定义属性，您可以使用 HTML5`data-*`属性：

```
<div class="mod" data-mod-id="1" data-mod-user="user1">
  Content 1
</div>

<div class="mod" data-mod-id="2" data-mod-user="user2">
  Content 2
</div>

<div class="mod" data-mod-id="3" data-mod-user="user3">
  Content 3
</div> 
```

现在您可以使用类和属性选择器来选择元素。

```
$('div.mod[data-mod-id="2"]').after('data'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T13:16:38.750

首先，您不能拥有多个相同的 ID。将它们更改为类。既然是一堂课，

```
var field = $('.mod');

field.each(function(){
     if($(this).attr('mod-id')==2){
           $(this).after();
     }
}); 
```

或者

```
$('.mod[mod-id=2]').after(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T13:15:39.273

```
$("div[id=mod]").each(function() {
   if ($(this).attr("mod-id") == 2) {
      $(this).after("CVVVVVVVVVV");
   }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-30T13:21:43.507

你可以这样做

```
$( '[id=mod][mod-id=2]' ).after( 'xy' );​ 
```

但你真的不应该多次使用 ids！它也很少使用自定义属性，例如`mod-id`，更好地使用自 html 5 以来的数据属性`data-mod-id`

# windows-runtime - 如何根据 Windows Store App 中的恒定宽度、字体和大小计算文本高度

> ID：14090996
> 
> 赞同：1
> 
> 时间：2012-12-30T13:12:48.847
> 
> 标签：windows-runtime, height, windows-store-apps, winrt-xaml

我需要`TextBlock`在代码中计算高度才能正确构建网格。我看过一些例子，但`Graphics.MeasureString`命名空间是不同的。如何在 Windows Store App 中进行操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T15:58:03.170

检查[这个问题](https://stackoverflow.com/questions/10556019/how-to-calculate-the-textbock-height-and-width-in-on-load-if-i-create-textblock)的答案。基本上你需要创建一个并调用布局过程来`TextBlock`强制布局传递给你`ActualWidth/Height`。`TextBlock`

# android - ksop2 java.io.IOException：传输端点未连接

> ID：14090997
> 
> 赞同：1
> 
> 时间：2012-12-30T13:12:50.633
> 
> 标签：android, web-services

你好 stackoveflow 团队，

我遇到了一个奇怪的错误。我使用 ksop2 对[http://www.webserviceX.NET](http://www.webserviceX.NET)进行肥皂调用。当我使用 android 2.3.3 的 avm 或智能手机时，以下代码可以完美运行。当我在版本 4 的 android 智能手机上运行此代码时，我收到此错误：

E/ActivityRecord(212)：sendActivityPerformanceInfo 异常发生：java.io.IOException：传输端点未连接

这是代码：

```
 soapObject = new SoapObject(namespace, "GetCitiesByCountry");
  soapObject.addProperty("CountryName", countryIn); 
  envelope.setOutputSoapObject(soapObject);
  envelope.bodyOut = soapObject;
  envelope.dotNet = true;
  httpTransportSE = new HttpTransportSE("http://www.webservicex.net/globalweather.asmx");
  httpTransportSE.debug = true;
  Log.d(TAG, "********** http - Call ***********");
  httpTransportSE.call("http://www.webserviceX.NET/GetCitiesByCountry", envelope); 
```

错误发生在 httpTransportSE.call(..) 也许你可以帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T01:41:08.467

假设您已经检查了所有这些步骤（并且由于某种原因，其中许多没有返回正确的异常名称）

*   你有一个活跃的连接。
*   您拥有 Internet 权限。
*   用于 2.x 终端的代码与 4.x 终端使用的代码相同。
*   您最近使用作为 soapUI 的应用程序或其他终端测试了您的服务链接类型。
*   您确定您的代码当前在其他终端上正确运行。

我别无选择，只能得出结论，您正在尝试从主线程建立连接，从而生成自 API 11 (3.0) 以来添加的[**NetworkOnMainThreadException类型的异常**](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)

对此的解决方案是，您必须从第二个线程运行您的调用，并使用某种策略作为“观察者”获得结果

*这是一个示例代码，如果你想实现这个方法*

***SOAP 连接器类***

```
 public class SOAPConnector extends Observable  {

    private static boolean isRunAction=false;   

    private static String ACTION = "";  
    private static String METHOD_NAME = ""; 
    private static String NAMESPACE = "";
    private static String URL_hprotocol = "";
    private static String URL_host = "";
    private static String URL_service = ""; 
    private static String outData = ""; 
    private static String inData = "";

    private final static int HTTPS_PORT = 443;
    private final static int HTTPS_TIMEOUT = 5000;

    private static boolean isHttps=false;    

    public SOAPConnector(String action, 
                     String method, 
                     String namespace, 
                     String hprotocol, 
                     String host,
                     String service){
        if(!isRunAction){
            ACTION = action;  
                METHOD_NAME = method; 
                NAMESPACE = namespace;
                URL_hprotocol = hprotocol;
                URL_host = host;
            URL_service = service;
        }

     }

    public void sendSoapData(String data,boolean https){
        if(!isRunAction){           
            isHttps = https;        
            outData = data;        
            Thread threadsoap = new Thread(runSendSoap);
            threadsoap.start();
        }
    }

    private Runnable runSendSoap = new Runnable(){
         public void run(){
            launchSendSOAP();
            handlerSendSOAP.sendEmptyMessage(0);
         }
         private Handler handlerSendSOAP = new Handler() {              
             public void handleMessage(Message msg) {}
        };         

    };

    private void launchSendSOAP(){
           isRunAction=true;
           try {
                SoapObject client = new SoapObject(NAMESPACE,METHOD_NAME);              
                SimpleDateFormat sdf = new SimpleDateFormat("dd/MM/yyyy HH:mm:ss");
                String tmpDate = sdf.format(new Date(System.currentTimeMillis()));                              
                String tmpData = outData;                                               
                client.addProperty("dataFIELD",(String)tmpData);                
                client.addProperty("dateFIELD",(String)tmpDate);
                client.addProperty("codeFIELD","NULL");             
                SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER12);
                envelope.dotNet=false;
                envelope.setOutputSoapObject(client);               
               if(isHttps){
                  HttpsTransportSE androidHttpsTransport = new HttpsTransportSE(URL_host, HTTPS_PORT, URL_service,HTTPS_TIMEOUT);
                  androidHttpsTransport.call(ACTION,envelope);
               }else{
                  HttpTransportSE androidHttpTransport = new HttpTransportSE(URL_hprotocol+URL_host+URL_service);
                  androidHttpTransport.call(ACTION,envelope);
               }                 
               Object result = envelope.getResponse();
               inData=result.toString();
            } catch (Exception e) {
               inData="ERROR";
            }         
           isRunAction=false;
           setChanged();
           notifyObservers(inData);

   }
} 
```

***活动电话***

```
private SOAPConnector soapConnector = null;
private ConnectorObserver conObserver =null;
private boolean isActionSoap=false;

private void setServiceObserver(){
    soapConnector =  new SOAPConnector(SOAP_ACTION_dummy,
                                       METHOD_NAME_dummy,
                                       NAMESPACE_dummy,
                                       URL_hprotocol,
                                       URL_host,
                                       URL_service);        
}   

private void soapSendProcess(){
    if(!isActionSoap){
        isActionSoap=true;          
        if(soapConnector==null){
            setServiceObserver();
        }
        conObserver = new ConnectorObserver();
        soapConnector.deleteObservers();                    
        soapConnector.addObserver((Observer)conObserver);
        soapConnector.sendSoapData("TEST",false);
    }

public class ConnectorObserver implements Observer{
    @Override
    public void update(Observable observable, Object data){
        String resultData = (String)data;
        if(resultData.equals("ERROR")){
             //TODO fail action
        }else{      
             //TODO parsing action
        }
        soapConnector.deleteObservers();
        isActionSoap=false;

    }
} 
```

> **此代码已使用 2.2 ~ 4.03 终端
> 和 ksoap2-android-assembly-3.0.0-jar-RC.4-with-dependencies.jar 库进行了测试。**