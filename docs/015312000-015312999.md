# StackOverflow 问答 15312000-15312999

# java - 在 JDO 中使用一对多拥有关系 - AppEngine

> ID：15312001
> 
> 赞同：1
> 
> 时间：2013-03-09T14:49:48.967
> 
> 标签：java, google-app-engine, entity-relationship, one-to-many, jdo

我是 JDO 及其概念的新手。我之前使用过 ORMLite，这非常简单，我不知道在 JDO 中应该如何做我在 ORMLite 中所做的事情。我有 2 个实体，`Broadcast`并且`Movie`. 每个`Broadcast`都有一个`Movie`，一个`Movie`可以有很多个`Broadcasts`。广播的 id 不会生成，它是在持久化之前配置的。所以这就是我所做的：

```
@PersistenceCapable
public class Broadcast {

    @PrimaryKey
    private String id;

    @Persistent
    private Movie movie;

    //More fields....
} 
```

现在这是`Movie`类（同样没有生成 id，它是在保存对象之前配置的）：

```
@PersistenceCapable
public class Movie {

    @PrimaryKey
    private String id;

    @Persistent(mappedBy = "movie")
    private List<Broadcast> broadcasts;

    //More fields....
} 
```

现在，我有一个 servlet，它可以获取并保存数据库中的所有数据。首先，我获取所有的`Broadcasts`, 对于每个`Broadcast`的电影，我只知道标题和它的 ID，所以我`Broadcast`用一个`Movie`对象在其中保存一个事务（因为有两个对象被保存，所以这必须是原子的行动）：

```
// Check if this broadcast already exist.
try {
     mgr.getObjectById(Broadcast.class, brdcst.getId());
} catch (Exception e) {
     if(e instanceof JDOObjectNotFoundException){
    Transaction tx = null;
    try{
        tx = mgr.currentTransaction();
        tx.begin();
        mgr.makePersistent(brdcst);
        tx.commit();
    }
    catch(Exception e1){
        sLogger.log(Level.WARNING, e.getMessage());
    }
    finally{
        if (tx.isActive()) {
            tx.rollback();
        }
        mgr.flush();
    }

     }
     else sLogger.log(Level.WARNING, e.getMessage());
} 
```

然后，我正在获取电影的数据并保存它，使用相同的 ID，覆盖前一个对象（在没有引用该`Broadcast`对象的其他线程中）。

```
try {
    sLogger.log(Level.INFO, "Added the movie: " + movie);
    mgr.makePersistent(movie);
} catch (Exception e) {
    e.printStackTrace();
}
finally{
    mgr.flush();
} 
```

所以要明确一点，这就是 ORMLite 中发生的事情，也是我想在这里发生的事情。当我保存`Broadcast`对象时，我正在向其中添加带有 ID 的电影，因此将来此 ID 将帮助他`Movie`在数据库中获取对其的引用。

但是，每当我在数据库中查询广播并希望在其中找到对电影的引用时，我得到的都是 null 或者这个异常：

```
Field Broadcast.movie should be able to provide a reference to its parent but the entity does not have a parent.  Did you perhaps try to establish an instance of Broadcast as the child of an instance of Movie after the child had already been persisted? 
```

那么，我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T16:57:35.573

要在 GAE 中使用 ralations，您必须使用`com.google.appengine.api.datastore.Key`long 或 String 键来代替。[例子](http://gae-java-persistence.blogspot.ru/2009/10/creating-bidrectional-owned-one-to-many.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T14:10:27.177

对这里发生的事情的一点解释：我有一个`List`从网络获取的广播。列表中的每个 Broadcast 内部都有一个 Movie 对象 (Broadcast.setMovie)，它只有一个标题。我的目的是遍历这个广播列表并为每个广播的电影获取所需的信息（这就是我在每个操作结束时使用 mgr.flush() 的原因）。因此，如果广播不存在，我首先将其添加到数据存储中，然后获取电影的数据并将其保存。还有我的问题，在 ORMLite 中，当您有一个外来字段并存储此对象时，框架将保存此对象和外来字段对象的 id。所以，假设我有一个 id=10 的广播和一个 id=2 的电影，框架会将广播保存到电影字段中的 2 的数据库中。所以这就是我想在这里做的，但在 JDO 中' 不是这样工作的。在遵循@Noofiz 在他的回答中分享的好例子之后，我发现我做错了，需要以相反的顺序做。从每个广播对象中获取电影，使用 Movie.addBroadcast 将广播添加到电影中并将其保存在数据存储中，这就是我所做的，它工作正常。

所以感谢大家的帮助，我希望这对其他人有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T09:03:58.870

对于所有类型的关系（包括您拥有的 1-N bidir 拥有的），有大量的[代码示例](http://code.google.com/p/datanucleus-appengine/source/browse/#svn/trunk/tests/com/google/appengine/datanucleus/test/jdo)和[相关的持久性代码可用于 GAE JDO。](http://code.google.com/p/datanucleus-appengine/source/browse/#svn/trunk/tests/com/google/appengine/datanucleus/jdo)

交易完成后你有一些“冲洗”，我不确定。您没有关联 Movie 和 Broadcast 对象的代码（即 Movie.addBroadcast 在哪里？）。您根本没有参考日志（它告诉您所有进出数据存储的 PUT 和 GET）。您说您正在检索电影并“保存它以覆盖相同的 id”，但是没有代码可以做到这一点，或者提到当时对象处于什么状态......瞬态？分离？

# linux - 使用 find 命令在目录中递归地搜索在外部文件中定义的文件（文件类型）的 Bash 脚本

> ID：15312002
> 
> 赞同：1
> 
> 时间：2013-03-09T14:49:48.843
> 
> 标签：linux, bash, file, scripting, find

我想在目录结构中递归搜索特定文件类型的文件。但我需要从外部文件传递文件类型。输出应该是列表，其中每一行都是文件的绝对路径。我将使用输出进行进一步处理。文件类型列表所在的外部文件看起来像这样（filter.lst）：

```
*.properties 
```

我试过这个（searchfiles.sh）：

```
while read line
do
 echo "$(find $1 -type f -name $line)"
done < $2 
```

脚本中的 echo 命令仅用于测试目的。我运行了脚本：

```
./searchfiles.sh test_scripting filter.lst 
```

find 命令的 echo 输出为空。为什么？我尝试通过以下方式更改脚本以测试命令是否正确构建并且文件 *.properties 是否存在：

```
while read line
do
 echo "find $1 -type f -name $line"
 echo "$(find $1 -type f -name $line)"
done < $2 
```

我有输出：

```
./searchfiles.sh test_scripting filter.lst
find test_scripting -type f -name *.properties 
```

如果我手动复制“find test_scripting -type f -name *.properties”并将其粘贴到shell，则正确找到文件：

```
find test_scripting -type f -name *.properties
test_scripting/dir1/audit.properties
test_scripting/audit.properties
test_scripting/dir2/audit.properties 
```

为什么“查找”命令不能正确处理变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T13:29:55.003

奇怪行为的原因是输入 filter.lst 文件中的隐藏字符。filter.lst 在 Windows 操作系统中创建，然后复制到 Linux 操作系统。因此 find 命令没有找到预期的文件。测试输入文件是否包含隐藏字符：

```
od -c filter.lst
0000000   *   .   p   r   o   p   e   r   t   i   e   s  \r  \n
0000016 
```

隐藏字符是“\r”。编辑脚本以在每行中使用 sed 命令删除隐藏字符。

```
while read line
do
 echo "$(find $1 -type f -name $(echo $line | sed -e 's/\r$//'))"
done < $2 
```

有关删除隐藏字符的更多信息在此[线程](https://stackoverflow.com/questions/8132575/how-to-fix-windows-characters-in-test-files-in-linux)中。

注意：最好的方法是在空目录中运行脚本。如果在您运行脚本的目录中有名为 example.properties 的文件，“echo $line”（作为 echo *.properties 执行）将仅显示 .properties 文件列表 - 在这种情况下仅显示文件示例.属性。

# html - 防止 IE 切换到兼容或怪癖模式

> ID：15312004
> 
> 赞同：0
> 
> 时间：2013-03-09T14:50:01.890
> 
> 标签：html, internet-explorer, ie8-compatibility-mode

我正在开发一个网站并打算支持 IE8 及更高版本，所以我不太关心旧的 IE 版本。

当用户在 IE 中打开网站时，它总是跳转到兼容模式或 Quirks 模式。我可以使用它关闭该功能吗？

```
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
```

W3 验证不是一个问题，我们想要的唯一目标是强制 IE 不在兼容模式或怪癖模式下打开，该元是否可以解决这个问题？

这是我正在使用的 DOCTYPE：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T14:53:51.940

看看[这个 SO 帖子](https://stackoverflow.com/questions/14637943/what-is-x-ua-compatible-when-it-references-ie-edge-chrome-1)。

基本上它应该做你需要的，我过去使用过它并且它有效。它将在 IE 中以标准模式打开。

请注意，如果您在 IE 中打开开发人员工具并选择兼容模式，这就是 IE 将以（兼容模式）打开的内容，并且标签将不起作用（因为您正在使用开发人员工具来覆盖标签行为） . 它确实有效，但您必须在没有开发人员工具设置的情况下对其进行测试。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-08-18T08:16:06.153

您可以使用元标记明确告诉 IE 浏览器使用其最新可用的渲染引擎。这也可以防止 IE 在渲染页面时打开 Quirks 模式。

[http://technowide.net/2013/06/21/forcing-ie-browsers-to-behave-properly/](http://technowide.net/2013/06/21/forcing-ie-browsers-to-behave-properly/)

# ubuntu - 使用子域配置 nginx 服务器块的问题

> ID：15312005
> 
> 赞同：1
> 
> 时间：2013-03-09T14:50:06.507
> 
> 标签：ubuntu, nginx

我一直将 apache 用于我自己的 vps。最近我决定切换nginx。我以前从未使用过它，所以我正在解决在使用子域配置虚拟主机时遇到的一些问题。

我的 vps 正在运行 ubuntu 12.04，全新安装，没有安装 apache。

我想在文件夹 /usr/share/nginx 中存储多个网站。在这个目录中，我有以下结构：

```
root@mauro-vps:/usr/share/nginx# tree
.
├── blog.marano.tk
│   └── public_html
│       └── index.php
└── marano.tk
    └── public_html
        └── index.php 
```

如您所见，我设置了一个免费域名（marano.tk）指向我的 vps 的 ip。我想在这台服务器上存储两个网站：

*   博客.marano.tk
*   马拉诺.tk

只是为了了解 nginx 的工作原理。

My`/etc/nginx/nginx.conf`是默认的，我没有在其中编辑任何内容。

在里面`/etc/nginx/sites-aviable`我有两个配置文件（每个域一个）：

*   默认（指向 marano.tk）
*   博客.marano.tk

第一个文件 `#/etc/nginx/sites-aviable/default`

```
 server {

        #listen   80; ## listen for ipv4; this line is default and implied
        #listen   [::]:80 default ipv6only=on; ## listen for ipv6

        #root /usr/share/nginx/www;
        root /usr/share/nginx/marano.tk/public_html;
        index index.html index.htm index.php;

        # Make site accessible from http://localhost/
        server_name marano.tk www.marano.tk;

        location / {
            # First attempt to serve request as file, then
            # as directory, then fall back to index.html
            try_files $uri $uri/ /index.html;
            # Uncomment to enable naxsi on this location
            # include /etc/nginx/naxsi.rules
        }

        location /doc/ {
            alias /usr/share/doc/;
            autoindex on;
            allow 127.0.0.1;
            deny all;
        }

        location ~ \.php$ {
            try_files $uri =404;
            fastcgi_split_path_info ^(.+\.php)(/.+)$;
            # NOTE: You should have "cgi.fix_pathinfo = 0;" in php.ini

            # With php5-cgi alone
            fastcgi_pass 127.0.0.1:9000;
            # With php5-fpm;
            #  fastcgi_pass unix:/var/run/php5-fpm.sock;
            fastcgi_index index.php;
            include fastcgi_params;
        }

    } 
```

第二个文件`/etc/nginx/sites-aviable/blog.marano.tk`

```
 server {
        #listen   80; ## listen for ipv4; this line is default and implied
        #listen   [::]:80 default ipv6only=on; ## listen for ipv6

        root /usr/share/nginx/blog.marano.tk/public_html;
        index index.html index.htm index.php;

        # Make site accessible from http://localhost/
        server_name blog.marano.tk www.blog.marano.tk;

        location / {
            # First attempt to serve request as file, then
            # as directory, then fall back to index.html
            try_files $uri $uri/ /index.html;
            # Uncomment to enable naxsi on this location
            # include /etc/nginx/naxsi.rules
        }

        location /doc/ {
            alias /usr/share/doc/;
            autoindex on;
            allow 127.0.0.1;
            deny all;
        }

    location ~ \.php$ {
       try_files $uri =404;
       fastcgi_split_path_info ^(.+\.php)(/.+)$;
       # NOTE: You should have "cgi.fix_pathinfo = 0;" in php.ini

        # With php5-cgi alone
        fastcgi_pass 127.0.0.1:9000;
        # With php5-fpm;
    #  fastcgi_pass unix:/var/run/php5-fpm.sock;
        fastcgi_index index.php;
        include fastcgi_params;
      } 
    } 
```

然后我对这两个文件进行了符号链接：

```
ln -s /etc/nginx/sites-aviable/default /etc/nginx/sites-enabled/
ln -s /etc/nginx/sites-aviable/blog.marano.tk /etc/nginx/sites-enabled/ 
```

如果我指向*blog.marano.tk重新启动 nginx 和 php 后，我仍然会得到***/usr/share/nginx/marano.tk/public_html/index.php**中的内容**/usr/share/nginx/blog.marano.tk** **/public_html/index.php**

我哪里错了？

对不起，我的英语不好

# java - Android Java Socket Mobile Phone to PC -- 重新连接socket

> ID：15312006
> 
> 赞同：0
> 
> 时间：2013-03-09T14:50:08.077
> 
> 标签：java, android, multithreading, sockets

我一直在为我正在开发的安卓应用而疯狂。我正在制作这样的套接字：

```
Socket socket = new Socket(IPAdress, Port); 
```

当我新安装该应用程序时，它运行良好。但随后我关闭了应用程序（也关闭了服务器，重新启动服务器）。我打电话

```
socket.close(); 
```

销毁我的应用程序时（onDestroy）。当我重新启动应用程序时，我无法再次连接，我需要从现金中手动删除应用程序，然后它才能再次运行。

当我输入错误的 IP 地址时也会发生同样的事情。我不能只是重新输入一个新地址并尝试再次创建一个新套接字。我这样做：

```
socket.close();
socket = null;
Socket socket = new Socket(IPAdress, Port); 
```

它不允许我这样做。我正在一个新的 `Thread`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T16:52:20.517

`onDestroy`不是关闭套接字的正确位置。它仅在系统资源不足时调用。

我不确定您到底在用套接字做什么，但是如果当应用程序不再对用户可见时您不需要它，您应该在`onPause`or中关闭它`onStop`。

[请参阅http://developer.android.com/reference/android/app/Activity.html](http://developer.android.com/reference/android/app/Activity.html)中的应用程序生命周期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T19:55:52.020

所以我弄清楚了为什么我的应用程序在调用时不断崩溃的原因。即使应用程序关闭，套接字仍保持活动状态，因为它保留在缓存中。因此，当退出应用程序时，我有一个布尔值，它告诉我是否有一个有效的套接字，然后我可以关闭它。如果我无法打开套接字，我不需要关闭它。

然后在重新启动时，我只是这样做：

套接字 = 空；

然后我可以创建一个新的套接字！

（很抱歉无法正确缩进和格式化此文本，我尝试了四个空格，但这不起作用:(

# html - 容器中的中心网格元素（960 网格）

> ID：15312008
> 
> 赞同：0
> 
> 时间：2013-03-09T14:50:19.420
> 
> 标签：html, css, wordpress, grid, 960.gs

所以我试图在首页上创建一个小部件，我为此使用以下代码：

```
<div id="widgets" class="container_24">
    <?php if (function_exists('dynamic_sidebar') && dynamic_sidebar('frontpage_widget')) : else : ?>  
        <h4>Widget Ready</h4>  
        <p>This frontpage_widget is widget ready! Add one in the admin panel.</p>  
    <?php endif; ?>
    </div> 
```

小部件本身得到了这个代码：

```
register_sidebar(array(
        'name' => 'Frontpage Widget',
        'id'   => 'frontpage_widget',
        'description'   => 'Widget area for frontpage',
        'before_widget' => '<div id="%1$s" class="fp_widget roundedCorners %2$s grid_6">',
        'after_widget'  => '</div>',
        'before_title'  => '<h2>',
        'after_title'   => '</h2><hr />'
    )); 
```

如果我在该区域放置 4 个小部件，一切都很好，显示得很好，但是，当只有 3 个小部件时，它们不会居中。

我已经尝试添加一个额外的 div 并添加下面的 css，但这似乎也没有多大作用。

```
margin-left:auto;margin-right:auto; 
```

有人知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T14:57:48.390

960 网格系统的工作方式，默认情况下所有内容都左对齐或右对齐。这是因为该`float: left`声明（以及`float: right`在从右到左的国家/地区）。要使小部件居中，您需要将它们设置为 grid_8，或者使容器本身更窄以适应。

如果您传入小部件的数量，并且它们都是响应式设计的，您可以执行以下操作：

```
'before_widget' => '<div id="%1$s" class="fp_widget roundedCorners %2$s grid_'. (24 / $widget_count) .'">', 
```

编辑：

要将三个小部件向右移动一个小部件宽度的一半（这将使它们居中），请将类添加`push_3`到第一个小部件。这将在元素的左侧添加 240 像素的填充，并且它们将显示为居中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T15:50:02.297

它们并不意味着首先居中 - float 属性从左到右排列元素，填充整个容器的宽度（从左到右），直到它超过容器的宽度，然后继续下一个线。因此，所有元素都将向左刷新而不是居中。

简而言之，除非您在浮动元素`display: inline-block`上设置（并移除浮动），然后`text-align: center`在父元素上设置，否则您无法居中浮动元素。为了缓解每个 inline-block 元素之间存在空格的问题，请将父容器中的字体大小设置为 0，并在子容器中重新声明所需的字体大小：

```
.container {
    background-color: #eee;
    text-align: center;
    font-size: 0; /* To remove space between inline-block elements */
    width: 100%; /* or 960px, or any other value you desire */
}
.widget {
    background-color: #aaa;
    display: inline-block;
    width: 25%;
    font-size: 16px; /* Reset font size in widgets */
} 
```

HTML：

```
<div class="container">
    <div class="widget">Widget 1</div>
    <div class="widget">Widget 2</div>
    <div class="widget">Widget 3</div>
</div> 
```

在这里看小提琴 - [http://jsfiddle.net/SzsuN/](http://jsfiddle.net/SzsuN/)

# c# - 组合框 SelectedValue 不起作用？

> ID：15312013
> 
> 赞同：1
> 
> 时间：2013-03-09T14:50:57.793
> 
> 标签：c#, combobox, microsoft-metro

我在 xaml 中创建了一个组合框，如下所示：

```
ComboBox x:Name="cbTest" SelectedValue="{Binding TestSpeed}" HorizontalAlignment="Left" Margin="0,10,0,0" Width="250" SelectionChanged="cbTest_SelectionChanged"/> 
```

Combobox 中填充了以下项目：

```
 for (int i = 1; i < 6; i++)
            cbTest.Items.Add(i); 
```

我看到组合框中的项目，但它没有显示我之前选择的 SelectedValue。这是属性：

```
private short _testSpeed;
public short TestSpeed
{
    get
    {
        return _testSpeed;
    }
    set
    {
        _testSpeed= value;
        NotifyPropertyChanged();
    }
} 
```

这是我在 SelectedChanged 上更改项目的时候

```
 _vm.TestSpeed = (short)Convert.ToInt16(cbTest.SelectedValue); 
```

TestSpeed 在调试中给了我正确的数据，但是 selectedValue 绑定不起作用！？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T16:47:11.023

在您的情况下，绑定模式必须是`OneWayToSource`这样的`SelectedValue="{Binding Path=TestSpeed, Mode=OneWayToSource}`。当 TestSpeed 是`string`或`int`那是工作，当`short`- 不工作。我认为您需要编写特定的转换器来使用`short`或使用`int`，不要担心

# cocos2d-iphone - 蜜蜂应用 CCFadeOutBLTiles 效果后的 cocos2d 精灵状态

> ID：15312014
> 
> 赞同：0
> 
> 时间：2013-03-09T14:50:59.263
> 
> 标签：cocos2d-iphone, cocos2d-x

应用 CCFadeOutBLTiles 效果之类的东西后，精灵（或图层）发生了什么，它似乎消失了，如何让它再次开始使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T18:07:08.880

将`opacity`属性设置为 255。还要确保`visible`设置为 YES。

# vb.net - 在水晶报表 vb.net 中显示特定行

> ID：15312016
> 
> 赞同：-1
> 
> 时间：2013-03-09T14:51:05.207
> 
> 标签：vb.net, crystal-reports, report

我的水晶报告有问题。有什么办法可以在水晶报表中显示特定行？例如，ID 为 00234 的所有记录都将显示在完整的水晶报表中。有办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T19:03:22.273

使用部门专家。

去`Report -> Section Expert`。选择`Details`左侧的部分。`Suppress`单击右侧选项旁边的公式图标，然后在编辑器中输入公式。评估结果为 True 的行不会出现在报告中。如果您输入`[ID] <> 00234`，则报告中只会显示 ID = 00234 的行。

# twitter-bootstrap - Bootstrap 词缀和溢出-y 冲突

> ID：15312019
> 
> 赞同：2
> 
> 时间：2013-03-09T14:51:18.357
> 
> 标签：twitter-bootstrap, scroll, scrollbar, overflow, affix

我现在遇到的问题涉及 twitter bootstraps 词缀和 css overflow-y。

**细节**

我有一个固定在顶部和底部的 41 像素引导导航栏（用于页眉/页脚）。

`div.container-fluid`用作主要内容主体。我习惯`position: absolute`将它定位在页眉和页脚之间，我必须`overflow-y: scroll`让它滚动浏览溢出的内容。

`div.side-bar`用作页面左侧的侧边导航，嵌套在`div.span3`. 我使用 jquery 来调用侧导航上的词缀。

**问题**

当我添加`overflow-y: scroll`到时，`div.container-fluid`我在正确的位置滚动......但没有应用词缀（基于动作）

但是当我完全删除时`overflow-y: scroll`，滚动条会延伸到整个页面（而不仅仅是`div.container-fluid`），但词缀确实适用。

这里有两个链接指向一个带有溢出-y 和一个没有溢出-y

**无词缀效果** [http://jsfiddle.net/VincentWilkie/YRxkU/](http://jsfiddle.net/VincentWilkie/YRxkU/)

**滚动不良的词缀效果** [http://jsfiddle.net/VincentWilkie/cKJV2/](http://jsfiddle.net/VincentWilkie/cKJV2/)

我需要它，以便滚动条不会延伸到页眉和页脚:(

谢谢你的帮助！

文森特·威尔基

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T21:03:06.390

我能够找到适合我的解决方案。

我最终使用 .affix({ offset: { x: 10, top: 20 } }) 来正确定位它。

我还删除了溢出。

谢谢！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T18:02:41.273

您只需要添加`data-spy="affix"`到#side-bar div。这是一个工作示例：

[http://jsfiddle.net/skelly/YRxkU/2/](http://jsfiddle.net/skelly/YRxkU/2/)

# apache - HAML/Sinatra/Passenger 错误中的 Unicode 字符

> ID：15312021
> 
> 赞同：1
> 
> 时间：2013-03-09T14:51:33.180
> 
> 标签：apache, sinatra, haml, passenger

如果我把它放到我的 HAML 中，

```
:ruby
  foo = "2".asdf
%p ss 
```

正如预期的那样，我从 Sinatra 得到了这个错误：

```
NoMethodError at /
undefined method `asdf' for "2":String 
```

但是当我的HAML 中有一个**UNICODE CHARACTER时：**

```
:ruby
  foo = "2".asdf
%p ß 
```

我不再收到错误，而是 Apache 崩溃（“500 内部服务器错误”）并`Premature end of script headers:`输出到 Apache 错误日志中。

有人可以解释为什么 Sinatra 错误消息不喜欢 HAML 中其他地方的 unicode 字符吗？我应该提到，当没有出现错误时，unicode 字符工作正常。

顺便说一句，我当然`set :show_exceptions, true`在我的 Sinatra 应用程序中完成了（在开发模式下），这就是错误首先出现的原因。

# xaml - 混合，大 xaml 文件 (cad)

> ID：15312027
> 
> 赞同：0
> 
> 时间：2013-03-09T14:51:47.280
> 
> 标签：xaml, expression-blend, cad

我正在尝试将 cad 模型导入混合，然后在其上制作一些故事板。想法是从solidworks导出xaml文件，然后将其导入混合。

文件在混合中打开，模型正确显示并且一切正常，直到我缩放/移动或进行任何导致程序立即崩溃的操作。

Xaml 文件大约 5mb，外部混合在我的程序中运行良好，我可以旋转、自由缩放并具有良好的性能。

有没有人遇到过类似的问题，或者有转换cad->xaml的好方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T14:59:26.017

我在开发桌面应用程序中的增强现实功能时这样做了。

我的解决方案是将对象转换为 fbx 格式并使用 XMA 游戏工作室控件来查看它。然后我就可以做我想做的事了。

# c - C全局无大小数组？

> ID：15312029
> 
> 赞同：6
> 
> 时间：2013-03-09T14:51:56.520
> 
> 标签：c, arrays, linked-list

我们有一个学校项目，任何使用 C 的信息系统。为了保持学生记录的动态大小列表，我选择了链表数据结构。今天早上我的朋友让我看看他的系统。我对他的记录清单感到惊讶：

```
#include <stdio.h>
/* and the rest of the includes */

/* global unsized array */
int array[];

int main()
{
    int n;
    for (n=0; n < 5; n ++) {
         array[n] = n;
    }

    for (n=0; n < 5; n ++) {
         printf("array[%d] = %d\n", n, array[n]);
    }
    return 0;
} 
```

与代码一样，他声明了一个对整个程序来说是全局（在 bss 段中）的未调整大小的数组。他能够通过用非零值覆盖后续内存块来向数组添加新条目，这样他就可以遍历数组：

```
for (n=0; array[n]; n++) {
    /* do something */
} 
```

他使用（我也测试过）Turbo C v1。我在 linux 中尝试过，它也可以工作。

由于我以前从未遇到过这种技术，我认为它存在问题。所以，是的，我想知道为什么这是一个坏主意，为什么更喜欢它而不是链表。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-09T14:56:16.177

```
int array[]; 
```

技术上称为**类型不完整的数组**。简单地说它相当于：

```
int array[1]; 
```

这不好仅仅因为：

1.  它产生一个**未定义的行为**。不完整类型数组的主要用途是在**[Struct Hack](http://www.informit.com/guides/content.aspx?g=cplusplus&seqNum=288)**中。请注意，在 C99 中标准化的不完整数组类型以前是非法的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-09T15:00:43.790

这是**未定义的行为**。您正在写入未分配的内存（超出数组）。为了编译它，编译器至少分配了一个元素，然后你在写超出这个元素。尝试更大范围的数字。例如，如果我在 Linux 上运行您的代码，它可以工作，但如果我将循环更改为 50,000，它就会崩溃。

**编辑**代码可能适用于较小的值，`n`但对于较大的值，它将失败。为了证明这一点，我编写了您的代码并对其进行了测试`n = 1000`。

这是[**CODEPAD**](http://codepad.org/OhHm2W73)的链接，您可以看到对于 n = 1000，会发生**分段错误**。

而使用相同编译器的相同代码，它适用于 n = 10，请参阅此链接[CODEPAD](http://codepad.org/XejRMejG)。所以这被称为**未定义的行为**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T15:13:24.733

如果您使用链表，您可以检查内存是否分配正确。

```
int *ptr;
ptr = (int *)malloc(sizeof(int))
if(ptr==NULL)
{
  printf("No Memory!!!");
} 
```

但是使用您的代码，如果使用具有较大界限的数组进行测试，程序就会崩溃。

# c# - 将 DTO 列表添加到主 DTO

> ID：15312031
> 
> 赞同：1
> 
> 时间：2013-03-09T14:52:04.773
> 
> 标签：c#, entity-framework, dto

我有两个 DTO：

```
public class MasterDTO
{
    public int Id { get; set; }
    public string Name { get; set; }
    public List<DetailDTO> Details { get; set; }
}

public class DetailDTO
{
    public int Id { get; set; }
    public string DetailName { get; set; }
} 
```

另外，我有一个功能：

```
using (var context = new Context())
{
    var r = context.MasterData
                   .Select(d => new MasterDTO
                   {
                       Id = d.Id,
                       Name = d.Name,
                   }
} 
```

我也需要填写 DetailDTO 列表并在单个请求中完成。

此时，我必须获取DetailsData数据列表并通过**foreach**将其添加到MasterDTO，这当然会导致对数据库服务器的大量请求。

有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T15:14:24.713

在您的数据调用中，对您的 DetailData 进行急切加载。例子：

`var r = context.MasterData.Include("DetailData")`

**DetailData**应该是附加到`MasterData`实体的导航属性的名称。

这将导致详细数据与您对`MasterData`.

完整的调用可能如下所示：

```
using (var context = new Context())
{
    context.LazyLoadingEnabled = false;
    var r = context.MasterData.Include("DetailData")
        .Select(d => new MasterDTO()
        {
            Id = d.Id,
            Name = d.Name,
            Details = d.Details.Select(dt => new DetailDTO()
            {
                Id = dt.Id,
                DetailName = dt.DetailName
            })
        });
} 
```

# linux - 使用 cp 命令会损坏跨不同文件系统传输的文件吗？我应该改用 rsync 之类的东西吗？

> ID：15312032
> 
> 赞同：-1
> 
> 时间：2013-03-09T14:52:10.730
> 
> 标签：linux, ubuntu-10.04, rsync, cp, ubuntu-server

`cp`我正在尝试使用该命令将文件从一个硬盘复制到我的家庭服务器中的另一个。我正在从 NTFS 格式的分区复制到已安装的新硬盘驱动器上的 ext4 分区。

`cp`该命令是否有可能损坏传输的文件？

我是否应该使用类似`rsycn`的方法来验证文件完整性，而不是在完成时检查？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T16:39:17.450

复制文件时，rsync 应该比 cp 好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T16:40:40.843

我会使用rsync。

rsync 可以给你额外的校验和，但真正的力量是中断后恢复的能力。这对于像虚拟机这样的大文件很有帮助。

这确实是一个服务器故障问题 - 请参阅[copying-a-large-directory-tree-locally-cp-or-rsync](https://serverfault.com/questions/43014/copying-a-large-directory-tree-locally-cp-or-rsync)。

# codeigniter - codeigniter 更新特定的数据库行

> ID：15312033
> 
> 赞同：0
> 
> 时间：2013-03-09T14:52:31.527
> 
> 标签：codeigniter

我正在尝试设置我的 codeigniter 安装以允许我更新我的数据库。我已经设法做到这一点：

```
function updateValues(){
    $this->load->model("get_db");
    $newrow = array(
        array(
            "id" => "3",
            "name" => "bruce"
        ),
        array(
            "id" => "4",
            "name" => "billybob"
        )
    );
    $this->get_db->update2($newrow);
    echo "update successful"    ;   
} 
```

这有效并更新了第 3 行和第 4 行。我现在需要根据我的活动用户 ID 更新一行。我已经尝试了通过谷歌在许多不同地方找到的几行代码。代码如：

回声 $this->db->insert_id()

所有这一切都是返回一个“0”。

所以我的问题是如何回显或返回存储在数据库中的当前活动用户 ID。

我很确定我错过了一些基本的东西，因为我是 codeigniter 的新手。任何帮助将不胜感激。

谢谢

蒂姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T16:17:14.607

最简单的方法是在他们登录时将 userId 存储在会话中，然后您可以在需要时随时检索会话变量。

```
Login routine
$this->db->where('userName',$userName);
$this->db->where('password',$password);
$data = $this->db->get('users');
if($data->num_rows() ==1)
{
    $userData = $data->result();
    $this->session->set_userdata('userId',$userData->userId);
} 
```

然后任何时候你需要它，你只需记住那个 userId

```
$userId = $this->session->userdata('userId');
$newrow = array(
    'id'=>$userId,
    'name'='Cornelius'
); 
```

# c - 使用 zmq API 编译 C 代码

> ID：15312034
> 
> 赞同：9
> 
> 时间：2013-03-09T14:52:32.183
> 
> 标签：c, linker, zeromq

我无法使用 ZeroMQ API 编译内置示例 hwserver.c。我已经尝试了所有可能的方法。

```
gcc -lzmq hwserver.c -o hwserver 
```

它提示我：

```
 hwclient.c:(.text+0x22): undefined reference to `zmq_ctx_new'
 hwclient.c:(.text+0x3a): undefined reference to `zmq_socket'
 hwclient.c:(.text+0x52): undefined reference to `zmq_connect'
 hwclient.c:(.text+0x94): undefined reference to `zmq_send'
 hwclient.c:(.text+0xb8): undefined reference to `zmq_recv'
 hwclient.c:(.text+0xe4): undefined reference to `zmq_close'
 hwclient.c:(.text+0xf0): undefined reference to `zmq_ctx_destroy'
 collect2: error: ld returned 1 exit status 
```

我在 ubuntu-12.10 上使用 zeromq-3.2.2

任何帮助都非常感谢。

谢谢，

-山姆

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-09T14:55:00.587

参数的顺序`gcc`确实很重要。

尝试

```
 gcc -Wall -g hwserver.c -lzmq -o hwserver 
```

您首先需要警告和优化或调试标志（例如`-Wall`，所有警告，`-g`调试信息），然后是可选的预处理器标志（如`-D`或`-I`但您没有），然后是源文件，最后是库`-lzmq`（顺序是相关：从高级库到低级库）和输出选项`-o hwserver`（可能在其他地方）。

阅读`gcc`文档，尤其是关于[调用 GCC](http://gcc.gnu.org/onlinedocs/gcc/Invoking-GCC.html)的章节。

不要忘记`-Wall`: 你真的想得到所有的警告，你应该改进你的代码，直到没有给出警告。您甚至可能想要`-Wextra`获得更多额外的警告。

不要忘记调试信息标志`-g`：您将需要使用`gdb`调试器来调试您的程序。

稍后，使用`-O`或`-O2`优化二进制程序（编译器将生成更高效但可调试性更低的机器代码）。仅在调试程序时才关心这一点。

只要您想开发实际大小的 C 程序（即您的项目由几个源文件和一些头文件组成），您就需要一个构建器基础架构，例如[GNU make](http://www.gnu.org/software/make/)（一个非常常见的构建器；您可以尝试[omake](http://omake.metaprl.org/index.html)代替）。

另请参阅相关问题的[答案。](https://stackoverflow.com/a/7937638/841108)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-23T06:04:23.247

再试一次

```
gcc hwserver.c -o hwserver -lzmq 
```

您的参数顺序不正确。

# java - 如何处理客户端-服务器 java 应用程序中的线程数？

> ID：15312041
> 
> 赞同：0
> 
> 时间：2013-03-09T14:53:38.853
> 
> 标签：java, multithreading

正如标题所示，我正在实现一个小项目，它允许客户端使用多线程连接到服务器来管理连接。我想限制连接，当服务器充满请求时，其他客户端应该放在一个队列中，例如：服务器只允许 2 个客户端同时连接服务器，其他客户端直到轮到他们。

这是我的服务器类

```
public class Server {

    static BufferedReader userInput = new BufferedReader(new InputStreamReader(System.in));
    //Declare an instance of CommandParameter class

    static CommandParameter par;
    //Initialize a BufferedReader and BufferedWriter
    static BufferedReader bufferedReader;
    static BufferedWriter bufferWriter;
    //
    static int port;
    static String serverData;
    static int proc_count;
    private static String command;

    public static void main(String[] args) throws Exception {
        command = userInput.readLine();
        System.out.println("Server is available");
        //Thread.sleep(2000);
        processCommand(command);
        startServer(port);

    }

    public static void startServer(int port) {
        ServerSocket serverSocket = null;
        try {
            //create a port for server in order to listen incoming connections
            serverSocket = new ServerSocket(port);
            //allow client connect to server

        } catch (IOException e) {
            System.out.println(e);
        }
        while (true) {
            try {
                new ThreadSocket(serverSocket.accept(),serverData).start();

            } catch (IOException ex) {
                System.out.println("Server starts fail");
            }
        }
    }

    public static void processCommand(String input) {
        //assign the user input to an String array
        String inputLine = input;
        int commandCount = checkCommand(inputLine);
        if(commandCount>3 || commandCount ==-1){
            System.out.println("Invalid command");
            System.exit(1);
        }
        //assign the user input to an String array
        String[] command = inputLine.split(" ");
        par = new CommandParameter();

        //JCommander parses the command to get the pairs parameter name and value
        JCommander jc = new JCommander(par, command);
        port = par.getPort();
        serverData = par.getServerdata();
        proc_count = par.getProc_count();
    }
    public static int checkCommand(String inputLine) {
        int count = 0;
        if (inputLine.contains("-port")) {
            count++;
        }else if (inputLine.contains("-data")) {
            count++;
        } else if (inputLine.contains("-proc_count")) {
            count++;
        } else{
            return -1;
        }

        return count;
    }
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T17:14:33.750

这正是异步 IO 最有用的地方。【大量 IO 请求需要由有限数量的工作线程处理】。大多数现代操作系统中都有系统调用允许异步 IO 操作。例如，Linux 中的 epoll，Windows、AIX 和 Solaris 中的 IOCP，BSD 风格和 Mac OS 中的 KQueue。在 Java 中，本地非阻塞调用被抽象在不同的​​ SPI 后面 - 示例 - sun.nio.ch.WindowsSelectorImpl、sun.nio.ch.KQueueSelectorImpl、sun.nio.ch.EPollSelectorImpl 等。

我推荐你使用的是[Netty](http://netty.io/)。

使用较小的固定线程数为大量 HTTP 请求提供服务的示例是使用 netty API 的简单任务。

具有一个侦听器线程和两个工作人员的示例引导代码将如下所示

```
public static void setupHTTPListeners()
{
    ServerBootstrap bootstrap = new ServerBootstrap(new NioServerSocketChannelFactory(Executors.newFixedThreadPool(1),
    Executors.newFixedThreadPool(2)));
    -----
    -----
} 
```

在相同的上下文中，最受欢迎的读物之一是这里 - [C10k 问题](http://www.kegel.com/c10k.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T15:29:10.883

Use `ServerSocket(int port, int backlog);` the backlog parameter is the maximum number of connections allowed.

# python - @login_required() 不重定向已注销的用户

> ID：15312046
> 
> 赞同：0
> 
> 时间：2013-03-09T14:54:01.947
> 
> 标签：python, django, python-decorators

未登录的用户被`@login_required()`装饰器重定向到`LOGIN_URL`指定的`settings.py`. 到现在为止还挺好。但我不想那样。我不想重定向它们，而是想向未登录的人显示错误消息。

我认为这可能有效，但我得到了一个`TypeError: ios_login_required() takes exactly 1 argument (0 given)`我不明白的。是装饰器，需要什么参数？

```
def ios_login_required(f):
    def wrapper(request, *args, **kwargs):
        if not request.user.is_authenticated:
            return HttpResponse("You need to be logged in.")
        else:
            return f(request, *args, **kwargs)
    return wrapper 
```

带有装饰器的视图可能如下所示：

```
@ios_login_required()
def amiloggedinornot(request):
    return HttpResponse("Congrats, you are logged in!") 
```

有什么想法我哪里出错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T15:02:28.810

```
@ios_login_required()
def amiloggedinornot(request):
    ...

# equals to 
def amiloggedinornot(request):
    ...
amiloggedinornot = ios_login_required()(amiloggedinornot) 
```

您可以看到`ios_login_required`它在需要参数时被调用而没有任何参数`f`。

因此尝试类似（没有`()`after `@ios_login_required`）：

```
@ios_login_required
def amiloggedinornot(request):
    ...

# which equals to
def amiloggedinornot(request):
    ...
amiloggedinornot = ios_login_required(amiloggedinornot) 
```

[您可以在此处](https://stackoverflow.com/questions/739654/understanding-python-decorators)和[此处](http://docs.python.org/2/reference/compound_stmts.html#function)阅读有关 Python 装饰器的更多信息

此外，`user.is_authenticated`是一个方法，您需要调用它才能获得布尔结果。`not user.is_authenticated`永远都是`False`。

# excel - 在 Excel 中，如何根据值将文本放入特定单元格中？

> ID：15312049
> 
> 赞同：0
> 
> 时间：2013-03-09T14:54:30.927
> 
> 标签：excel, excel-2007, excel-formula

我有 7 个不同的单元格（对应于星期几）和一个可变值（星期几），我想使用它在相应的单元格中放置一个文本值。

例如，如果星期几是 1，那么文本应该放在单元格 A1 中；如果星期几是 2，那么文本应该放在单元格 A2 中，依此类推。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T16:42:15.797

作为工作表函数，您可以将以下内容放在七个相邻的列中：

```
=IF(WEEKDAY(NOW()) = COLUMN() - 0 ; "Text" ; "") 
```

将 0 替换为第 1 列的编号（0 是 A 列的正确值）。

作为 VBA 子程序中的一行：

```
[A1:G1].Cells(1, DatePart("w", Date)).Value = "Text" 
```

范围在方括号中指定。

在这两种情况下，1 = 星期日；请参阅 DatePart 或 Weekday 的帮助以使用不同的开始日期。

# android - 如何阻止用户等待很长时间才能获得位置修复？

> ID：15312052
> 
> 赞同：5
> 
> 时间：2013-03-09T14:54:34.720
> 
> 标签：android, gps, location, locationmanager, location-provider

我正在构建一个 GPS Android 应用程序，它根据用户的当前位置获取最近的位置。

这就是我的应用程序所做的：

*   检查 GPS 或网络是否可用
*   如果两者都不可用，则不要做任何事情。否则，我们首先检查 GPS 是否存在，如果没有，则检查网络。
*   使用其中之一后，我们获取当前位置，然后将其发送到服务器。
*   一旦我们从服务器检索数据并更新 UI，我们就会停止监听进一步的位置更新。一次就足够了，直到他们按下重新启动的刷新按钮。

我希望做什么：

*   如果 GPS 或网络未能检索到位置，例如 2 分钟，那么我们会切换提供商。我们不希望用户等待太久。

*   能够同时使用这两个提供程序并从中获得最准确的信息也很好。我查看了[http://developer.android.com/guide/topics/location/strategies.html](http://developer.android.com/guide/topics/location/strategies.html)并看到了 isBetterLocation 方法。我将如何将此方法集成到我的应用程序中？我无法理解应该如何、在何处以及何时调用它。我假设 isBetterLocation() 要求我同时调用网络和 GPS。对于我的应用程序来说，听听两者的准确性会很好。我该怎么做呢？如果其中一个不可用怎么办？

这是我的部分代码：

```
if(!GPSEnabled && !networkEnabled)
{
    Toast.makeText(this, "Error: This application requires a GPS or network connection",
            Toast.LENGTH_SHORT).show();
}
else
{
    if(GPSEnabled)
    {
        locManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, this);
    }
    else if(networkEnabled)
    {
        System.out.println("Getting updates from network provider");
        locManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, this);
    }
} 
```

这就是`onLocationChanged`方法。我得到 lat/lng 值，然后将它们发送到我的服务器，然后用它做适当的事情。

```
public void onLocationChanged(Location location)
{
    //Get coordinates
    double lat = (location.getLatitude());
    double lng = (location.getLongitude());
    Log.d("MainActivity", "got location: " + lat + ": " + lng);
    //get nearest locations
    new GetLocations().execute(SharedVariables.root + SharedVariables.locationsController + SharedVariables.getNearestMethod + lat + "/" + lng); 

    // Zoom in, animating the camera after the markers have been placed
    map.animateCamera(CameraUpdateFactory.newLatLngZoom(new LatLng(lat, lng), 10));
    System.out.println("lat = " + lat + ", lng = " + lng);

     //Stop listening for updates. We only want to do this once. 
     locManager.removeUpdates(this);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T17:05:46.973

无论是使用 GPS 还是网络，您都无法大幅减少获取位置的最终等待时间。

这两种定位方法各有优缺点：

*   GPS 通常需要较长时间才能知道您的位置，因为寻找和校准 GPS 卫星是一项艰巨的任务（*至少*需要找到3 颗正确对齐的卫星）。最重要的是，添加最终阻碍信号的物体/环境。除非您在应用启动之前/启动时启用 GPS，否则必须等待。**另一方面**，您会得到一个细粒度的位置。

*   如果您只需要一个粗略的位置，使用网络是一种解决方案：它会在几秒钟内返回数据。**然而**，位置的精度取决于可用/使用的网络；我没有任何实际的例子，但我猜精度可能会有*很大*差异。GPS 将*始终*拥有比网络更精细的位置。

明白**没有预定义的选择**。任何事情都取决于您的应用程序如何处理这些数据。

如果可用，请使用 GPS，同时向网络发出位置请求，如果没有 GPS 设备，则回退到网络。然后采取：

*   如果您只需要一个位置，首先出现的结果
*   如果您想要最精确的数据，首选结果

> 如果 GPS 或网络未能检索到位置，例如 2 分钟，那么我们会切换提供商。我们不希望用户等待太久。

在这两种情况下，不要设置后备计时器：您只会在第一个提供者失败的情况下延长等待时间；所以同时请求两个请求，除非 android API 不允许异步位置请求。

# c - 用c语法构建ast时管理操作优先级

> ID：15312053
> 
> 赞同：1
> 
> 时间：2013-03-09T14:54:39.530
> 
> 标签：c, operators, antlr, grammar, antlr3

我正在尝试用我的 C 语法构建一个 AST，可以在[这里](http://sd-g1.archive-host.com/membres/up/24fe084677d7655eb57ba66e1864081450017dd9/cAST3.txt)找到。但是它不考虑操作的优先级，例如当我输入此代码时：

```
 l = k*j*5 - 10; 
```

我明白了：

![AST](../Images/d85d6218569797d23a906474525cf642.png)

操作由以下代码管理：

```
multiplicative_expression
: primary_expression (('*'^ additive_expression) | ('/'^ additive_expression) | ('%'^ additive_expression) )*
;

 additive_expression
: multiplicative_expression (('+'^ multiplicative_expression) | ('-'^ multiplicative_expression))*
; 
```

请问有解决办法吗？

另一个问题，有没有办法在构建 AST 时添加特殊令牌？例如这样的：

```
A B C -> ^( "VAR" B C) 
```

VAR 是只能通过 AST 看到的新代币。

是否可以用其他东西重命名“nil”令牌？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T15:22:06.017

我绝不是 ANTLR 方面的专家，但这不应该满足您的需求吗？

```
multiplicative_expression
: primary_expression (('*'^|'/'^|'%'^) multiplicative_expression)*
;

 additive_expression
: multiplicative_expression (('+'^|'-'^) multiplicative_expression)*
; 
```

编辑：很高兴它对你有用。对于 Daniel Fischer 关于关联性的观点，想到的解决方案是

```
multiplicative_expression
: primary_expression |
  (multiplicative_expression ('*'^|'/'^|'%'^) primary_expression)
;

 additive_expression
: multiplicative_expression |
  (additive_expression ('+'^|'-'^) multiplicative_expression)
; 
```

但是，我似乎记得曾经读过 ANTLR 无法应对这样的左递归。让我知道它是否不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T16:28:45.723

我找到了添加新令牌的解决方案，为此我将其放在开头：

```
 tokens {
     VAR;
 } 
```

然后我就可以使用它了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T17:14:26.330

周围有很多正确的[C 语法](http://www.lysator.liu.se/c)，为什么不使用其中的一种呢？或者至少从那里开始？

# java - 从另一个 Applet 启动另一个 Applet

> ID：15312058
> 
> 赞同：1
> 
> 时间：2013-03-09T14:54:57.123
> 
> 标签：java, applet, japplet

我制作了一个加载器小程序，它向用户打招呼，当用户单击该小程序上显示的按钮时，它会启动主小程序，加载程序小程序被销毁。

但是点击另一个小程序没有启动！

**加载程序小程序：**

```
import java.awt.Button;
import java.awt.FlowLayout;
import java.awt.Graphics;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JApplet;

public class Loader extends JApplet implements ActionListener{
    Display secondApplet;
    Button button;

    @Override
    public void init() {
        setSize(800,600);
    }

    @Override
    public void start() {
        setLayout(new FlowLayout());
        button = new Button ("Click me !!");
        add(button);
        button.addActionListener(this);
    }

    @Override
    public void paint(Graphics g) {

    }

    @Override
    public void actionPerformed(ActionEvent e) {
        secondApplet = (Display)getAppletContext().getApplet("Display");
        if (secondApplet != null) {
            secondApplet.init();
            secondApplet.start();
        }
        else {
            System.out.println("Not Running\n");
        }
    }
} 
```

**显示小程序：**

```
import java.awt.Color;
import java.awt.Graphics;
import javax.swing.JApplet;

public class Display extends JApplet {

    @Override
    public void init() {
        setSize(600,400);
    }

    @Override
    public void paint(Graphics g) {
        g.fillRect(0, 0, this.getWidth(), this.getHeight());
    }
} 
```

**如何创建另一个 Applet 的实例并销毁当前 Applet ！**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T15:08:14.940

由于 Applet/JApple 本身就是**java.awt.Panel**，因此您可以将一个嵌入到另一个中，对于您的特定情况，您可以使用 Loader 中的面板将 Display 嵌入**到**Loader 中，**以便**根据**需要**重新加载**Display**。

 ****像这样的东西：

```
Panel container = new Panel();
container.setLayout(new GridLayout(1,0));
container.add(secondApplet); //Display Applet
add(container):

secondApplet.init();
secondApplet.start();

button.setVisible(false); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T11:33:42.533

小程序有很多问题，很难知道从哪里开始。但是，让我们首先专注于一种更明智的策略，以引起一种观点和另一种观点之间的变化。

1.  不是有两个小程序，而是有两个面板在一个`CardLayout`
2.  不要将两个小程序放在一个页面中，而是调用`getAppletContext().showDocument(secondAppletURL);`. 可能`secondAppletURL`与托管第一个小程序的页面的 URL 不同。

好的 - 第一个小程序的问题：

1.  不要尝试设置小程序的大小。它由 HTML 设置。
2.  方法中的所有方法调用`start()`都应该移到`init()`方法中，因为`start()`方法可能会被重复调用。那么根本没有理由重写`start()`。
3.  不要在没有正当理由的情况下混用 Swing（例如`JApplet`）和 AWT（例如）组件。`Button`在这种情况下，请使用`JButton`而不是`Button`.
4.  作为风格点，创建匿名内部通常`ActionListener`比在父类上实现它更好。
5.  用空实现覆盖`paint()`不是一个好主意。原来`paint()`绘制小程序和组件，所以现在它什么也不做。
6.  中的方法`actionPerformed()`同样荒谬。`AppletContext`直到调用了`init()`&之后，小程序才会包含在`start()`其中，这意味着显式调用这些方法会导致它们被第二次调用。虽然该`start()`方法应该被多次调用，但该`init()`方法应该只被调用一次。

第二个小程序。

1.  同上第 1 点。关于第一个小程序。
2.  被覆盖的`paint()`方法..将绘制 BG 颜色（或 FG 颜色 - 不确定），但仅此而已。同样，不要覆盖它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T15:10:52.457

试试这个方法来加载另一个小程序。看看它是否有效。

```
Class applet2 = Class.forName("Applet2");
Applet appletToLoad = (Applet)applet2.newInstance();
appletToLoad.setStub(this);
setLayout(new GridLayout(1,0));
add(appletToLoad);
appletToLoad.init();
appletToLoad.start(); 
```****

# c# - 通过 GSM 调制解调器使用 AT 命令在 C# 中发送 Unicode 消息（例如波斯语和阿拉伯语）

> ID：15312059
> 
> 赞同：9
> 
> 时间：2013-03-09T14:54:57.680
> 
> 标签：c#, unicode, sms, gsm, at-command

我正在使用 AT 命令在 C#.Net 中为 GSM 调制解调器（D-Link DWM-156）开发应用程序。我在发送 Unicode 消息（例如用波斯语或阿拉伯语编写的消息）时遇到问题。这是我的程序的核心：

```
SerialPort GSMPort = new SerialPort();

GSMPort.PortName = "COM6";
GSMPort.BaudRate = 9600;
GSMPort.Parity = Parity.None;
GSMPort.DataBits = 8;
GSMPort.StopBits = StopBits.One;
GSMPort.Handshake = HandShake.RequestToSend;
GSMPort.DtrEnable = true;
GSMPort.RtsEnable = true;

GSMPort.Open();

GSMPort.Write("AT\r");
Thread.Sleep(1000);
GSMPort.Write("AT+CMGF=1\r");
Thread.Sleep(1000);
GSMPort.Write("AT+CMGS=\"" + destinationNumber + "\"\r\n");
Thread.Sleep(1000);
GSMPort.Write(shortMessage+ "\x1A"); 
```

它适用于英文和 ASCII 字母。我已经阅读[了这篇文章](http://www.smssolutions.net/tutorials/gsm/sendsmsat/)，并且可以使用 AT 命令在超级终端中发送 Unicode 消息：

```
AT [Enter]
OK
AT+CSCS="UCS2" or AT+CSCS="HEX" [Enter] ---> We have to convert our message to hex 
OK
AT+CMGF=1 [Enter]
OK
AT+CMGS="destinationNumber" [Enter]
> 0633064406270645002006450631062D06280627 ---> The hex format of our message (سلام مرحبا)
+CMGS: 139
OK 
```

由于此命令正常工作，我已将其添加`GSMPort.Write("AT+CSCS=\"UCS2\"\r");`到我的应用程序中，并尝试发送**0645 0631 062D 0628 0627** (مرحبا) 或**0633 0644 0627 0645** (سلام)。

```
GSMPort.Write("AT\r");
Thread.Sleep(1000);
GSMPort.Write("AT+CSCS=\"UCS2\"\r");
Thread.Sleep(1000);
GSMPort.Write("AT+CMGF=1\r");
Thread.Sleep(1000);
GSMPort.Write("AT+CMGS=\"" + destinationNumber + "\"\r\n");
Thread.Sleep(1000);
GSMPort.Write("0633064406270645" + "\x1A"); 
```

但与超级终端中的 AT 命令不同，目的地没有收到正确的字母。C# 代码和超级终端代码中的这些 AT 命令有什么区别？如果您能帮我解决这个问题，我将不胜感激。

* * *

***附加信息：*** 如您所知，通过超级终端和使用 AT 命令发送 Unicode 消息（例如波斯字母）没有问题。在下面的代码中，我尝试发送سلام，“0633064406270645”是它的十六进制形式。但我的手机收到□□□□。

```
GSMPort.Encoding = UnicodeEncoding.GetEncoding(1256);
GSMPort.Write("AT\r");
Thread.Sleep(1000);
GSMPort.Write("AT+CSCS=\"UCS2\"\r");
Thread.Sleep(1000);
GSMPort.Write("AT+CMGF=1\r");
Thread.Sleep(1000);
GSMPort.Write("AT+CMGS=\"" + destinationNumber + "\"\r\n");
Thread.Sleep(1000);
GSMPort.Write("0633064406270645" + "\x1A"); 
```

另一方面，在超级终端环境中，一切正常，我收到了سلام。

```
AT [Enter]
OK
AT+CSCS="UCS2"
OK
AT+CMGF=1 [Enter]
OK
AT+CMGS="destinationNumber" [Enter]
> 0633064406270645 [Ctrl+Z]
+CMGS: 139
OK 
```

我注意到，如果我在超级终端属性中检查“发送行以换行符结尾”（它在属性->设置-> ASCII 设置中，请查看下图），我将遇到与我相同的问题C# 代码。`GSMPort.Write`我认为默认情况下启用“以换行符发送行结束” ？如果是，我该如何禁用它？

![在此处输入图像描述](../Images/dbd0daa1783c83be8af2bdc50ebbfe94.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-16T15:10:18.540

我终于找到了解决这个问题的方法。正如我在问题的“附加信息”部分中所说，发送以换行符结尾的行会导致`SerialPort`超级终端中用于发送 Unicode 消息的 C# 和 AT 命令之间的这种不匹配。我刚刚`\r`用`\n`换行符替换。修改后的代码如下：

```
GSMPort.Write("AT\n");
Thread.Sleep(1000);
GSMPort.Write("AT+CSCS=\"UCS2\"\n");
Thread.Sleep(1000);
GSMPort.Write("AT+CMGF=1\n");
Thread.Sleep(1000);
GSMPort.Write("AT+CMGS=\"" + destinationNumber + "\"\n");
Thread.Sleep(1000);
GSMPort.Write("0633064406270645" + "\x1A"); 
```

保持`SerialPort.Encoding`和`SerialPort.NewLine`属性不变。无需更改它们的默认值，只需设置`AT+CSCS="UCS2"`为以 Unicode 格式发送消息即可。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-09T15:48:12.293

首先检查您的调制解调器支持`unicode`，然后将您的代码更改为此
我们必须为 Unicode 消息指定正确的 DCS（数据编码方案），即 0x08。

我们可以通过将 AT+CSMP 命令的第四个参数更改为“8”来设置该值：

AT+CSMP=1,167,0,8

```
 GSMPort.Write("AT\r");
    Thread.Sleep(1000);
    GSMPort.Write("AT+CSCS=\"UCS2\"\r");
    Thread.Sleep(1000);
    GSMPort.Write("AT+CMGF=1\r");
    Thread.Sleep(1000);
    GSMPort.Write("AT+CSMP=1,167,0,8\r"); //AT+CSMP=1,167,0,8
    Thread.Sleep(1000);
    GSMPort.WriteLine("AT+CMGS=\"" + destinationNumber + "\"\r\n");
    Thread.Sleep(1000);
    GSMPort.WriteLine("0633064406270645" + "\x1A"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-09T15:03:02.477

的默认编码`SerialPort`是`Encoding.ASCII`. 设置`SerialPort.Encoding`为一种编码以支持您正在使用的字符集（如`Encoding.UTF32`），或者`SerialPort.Write(char[], int, int)`以任何喜欢的方式使用您的 Unicode 字符串并将其转换为字节。

# c# - 你调用的对象是空的。在 MVC 布局中 = null

> ID：15312062
> 
> 赞同：7
> 
> 时间：2013-03-09T14:55:08.107
> 
> 标签：c#, asp.net, asp.net-mvc, exception, nullreferenceexception

我收到一个奇怪的错误，位于

```
@{
    Layout = null;
} 
```

这是错误：

> 你调用的对象是空的。
> 
> 说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.NullReferenceException：对象引用未设置为对象的实例。

和堆栈跟踪：

```
[NullReferenceException: Object reference not set to an instance of an object.]      
ASP._Page_Views_Home_Index_cshtml.Execute() in f:\Web Prog\my work\mcpd\mvc\FilippoPhotography\FP.WebUI\Views\Home\Index.cshtml:4    
System.Web.WebPages.WebPageBase.ExecutePageHierarchy() +197    
System.Web.Mvc.WebViewPage.ExecutePageHierarchy() +97     
System.Web.WebPages.StartPage.RunPage() +17    
System.Web.WebPages.StartPage.ExecutePageHierarchy() +62    
System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage) +76    
System.Web.Mvc.RazorView.RenderView(ViewContext viewContext, TextWriter writer, Object instance) +260    
System.Web.Mvc.BuildManagerCompiledView.Render(ViewContext viewContext, TextWriter writer) +115    
System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context) +295    
System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(ControllerContext controllerContext, ActionResult actionResult) +13    
System.Web.Mvc.<>c__DisplayClass1a.<InvokeActionResultWithFilters>b__17() +23    
System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation) +242   
System.Web.Mvc.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19() +21    
System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 filters, ActionResult actionResult) +177       
System.Web.Mvc.Async.<>c__DisplayClass2a.<BeginInvokeAction>b__20() +89    
System.Web.Mvc.Async.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult) +102    
System.Web.Mvc.Async.WrappedAsyncResult`1.End() +57    
System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeAction(IAsyncResult asyncResult) +43    
System.Web.Mvc.<>c__DisplayClass1d.<BeginExecuteCore>b__18(IAsyncResult asyncResult) +14    
System.Web.Mvc.Async.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar) +23    
System.Web.Mvc.Async.WrappedAsyncResult`1.End() +62    
System.Web.Mvc.Controller.EndExecuteCore(IAsyncResult asyncResult) +57 
System.Web.Mvc.Async.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar) +23    
System.Web.Mvc.Async.WrappedAsyncResult`1.End() +62    
System.Web.Mvc.Controller.EndExecute(IAsyncResult asyncResult) +47    
System.Web.Mvc.Controller.System.Web.Mvc.Async.IAsyncController.EndExecute(IAsyncResult asyncResult) +10    
System.Web.Mvc.<>c__DisplayClass8.<BeginProcessRequest>b__3(IAsyncResult asyncResult) +25    
System.Web.Mvc.Async.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar) +23    
System.Web.Mvc.Async.WrappedAsyncResult`1.End() +62    
System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +47    
System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result) +9    
System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +9629296 
System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +155 
```

这是我的这个视图的控制器：

```
namespace FP.WebUI.Controllers
{
    public class HomeController : Controller
    {
        private IInfoRepo repo;
        public HomeController(IInfoRepo repoParam)
        {
            repo = repoParam;
        }
        public ViewResult Index()
        {
            Info model = repo.Info.FirstOrDefault();
            return View(model);
        }
    }
} 
```

这是视图本身：

```
@model FP.Domain.Entities.Info

@{
    Layout = null;
}

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title>A.Filippo Photography</title>
    <link rel="Stylesheet" type="text/css" href="~/Content/css/whole.css" />
    <link rel="Stylesheet" type="text/css" href="~/Content/css/Homepage.css" />
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script src="~/Content/js/homepage.js" type="text/javascript"></script>
</head>
<body>
    <div id="whole_wrapper">
        <header>
            <div id="follow">
                <a href="http://@Model.Facebook.Substring(Model.Facebook.IndexOf("http://")+1,Model.Facebook.Length)"><img src="~/Content/img/temp.png" alt="facebook"/></a>
                <a href="http://@Model.Twitter.Substring(Model.Twitter.IndexOf("http://")+1,Model.Twitter.Length)"><img src="~/Content/img/temp.png" alt="twitter"/></a>
                <a href="mailto://@Model.Email"><img src="~/Content/img/temp.png" alt="email"/></a>
            </div>
            <div id="iconlabel">
                <a href="~/Views/Home/Index"><img src="~/Content/img/logo.png" alt="logo"/></a>
            </div>
        </header>

        <div id="main_content">
                <div id="slides_wrapper">
                    <a href="gallery.aspx">
                        <div id="gallery_slide">                        
                            <p>Gallery</p>
                        </div>
                    </a>
                    <a href="sessions.aspx">
                        <div id="session_slide">
                            <p>Sessions</p>
                        </div>
                    </a>
                    <a href="offers.aspx">
                        <div id="offers_slide">
                            <p>Offers</p>
                        </div>
                    </a>
                    <a href="about.aspx">
                        <div id="about_slide">
                            <p>About Us</p>
                        </div>
                    </a>
                    <a href="contact.aspx">
                        <div id="contact_slide">
                            <p>Contact Us</p>
                        </div>
                    </a>
                </div>                
            </div>

            <div id="footer">
                <div id="copyright">
                    <div id="rights">
                        <p>All rights reserved.© - Best viewed using the latest version of <a href="http://www.google.com/chrome">Google Chrome</a> or <a href="www.mozilla.org/en-US/firefox/new/">Mozilla Firefox</a>.</p>                    
                    </div>
                    <div id="stamp">                    
                        <p>Crafted by</p>
                        <a href="http://about.me/rafael.adel">Rafael Adel</a>
                    </div>                   
                </div>
            </div>

    </div>   
</body>
</html> 
```

任何帮助将不胜感激，我在这里感到沮丧。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-27T11:54:23.480

可能的异常行：

```
<a href="http://@Model.Facebook.Substring(Model.Facebook.IndexOf("http://")+1,Model.Facebook.Length)"><img src="~/Content/img/temp.png" alt="facebook"/></a>
<a href="http://@Model.Twitter.Substring(Model.Twitter.IndexOf("http://")+1,Model.Twitter.Length)"><img src="~/Content/img/temp.png" alt="twitter"/></a> 
```

可能代码`Info model = repo.Info.FirstOrDefault();`返回一个默认值，这意味着 null 并且调用任何方法，如`Substring()`使用 null 会导致异常。

# python - 在python中拆分列表

> ID：15312065
> 
> 赞同：4
> 
> 时间：2013-03-09T14:55:21.827
> 
> 标签：python

我有一个对象列表，我希望得到一个对象列表，使用另一个列表中的对象进行拆分，如下所示：

```
l = ['x',1,2,3,'a',5,6,1,7] 
```

和另一个对象列表

```
s = ['a', 1, 4] 
```

我希望得到这样的结果：

```
[ ['x'], [1, 2, 3], ['a', 5, 6], [1, 7] ] 
```

有没有一种不错的/pythonic的方式来做到这一点？

编辑：

我希望每个结果列表的头部都是 的元素`s`，并且所有这些列表都使初始列表的元素保持相同的顺序。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T15:02:35.973

生成器会很快为您完成：

```
def split_on_members(seq, s):
    s = set(s)
    chunk = []
    for i in seq:
        if i in s and chunk:
            yield chunk
            chunk = []
        chunk.append(i)
    if chunk:
        yield chunk 
```

这使：

```
>>> list(split_on_members(l, s))
[['x'], [1, 2, 3], ['a', 5, 6], [1, 7]] 
```

当然，您可以只循环生成器而不创建完整列表：

```
>>> for group in split_on_members(l, s):
...     print group
... 
['x']
[1, 2, 3]
['a', 5, 6]
[1, 7] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T15:00:41.670

试试这两个功能，

1.  “返回”类型

    ```
    def overlap_split_list(l,s):
        l1 = []
        l2 = []
        for i in l:
            if i in s:
                l1.append(l2)
                l2 = []
            l2.append(i)
        if l2: l1.append(l2)
        return l1 
    ```

2.  发电机类型

    ```
    def generator_overlap_split_list(l,s):
        l2 = []
        for i in l:
            if i in s:
                yield l2
                l2 = []
            l2.append(i)
        if l2: yield l2 
    ```

对于输出（全部相同）

```
print overlap_split_list(l,s)    
print [i for i in generator_overlap_split_list(l,s)]
print list(generator_overlap_split_list(l,s)) 
```

# c# - 加入EF的联系方式

> ID：15312066
> 
> 赞同：-1
> 
> 时间：2013-03-09T14:55:27.010
> 
> 标签：c#, linq-to-sql

使用这两个表时，我对 EF 和 linq2sql 有以下问题

表格1：

```
Id | Name
1  | Name1
2  | Name2 
```

表 2：

```
Id | Table1Id | Name
1  | 1        | SomeText1
2  | 1        | SomeText2
3  | 2        | SomeText3 
```

我想创建一个 linq2sql 查询以获取带有模板的结果集

```
Table1Id:contact(Table2.Name+";") 
```

例如

```
1:SomeText1;SomeText2
2:SomeText3 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T08:59:09.480

今天早上有几分钟的空闲时间，所以请在下面找到一个示例实现。除了您为实现所需而指定的表之外，您还需要在两个表之间添加关联（多对多）。这将在连接表上运行，并向您的两个实体添加导航属性。

下面的查询本质上是说选择表 1 条目并包括来自 Table2 导航属性的关联记录。例如，我在上下文中关闭了延迟加载（您几乎应该一直这样做，因为它会导致跨层和/或在您的应用程序中序列化时出现问题）。

```
 // db first
        using (var db = new SO15312066Entities())
        {
            // iterate over table 1, with join values from 2
            var query = db.Table1.Include("Table2");

            foreach (var item in query)
            {
                Console.WriteLine("{0}:{1}", item.Id, string.Join(";", item.Table2.Select(x => x.Name).ToList()));
            }
        }

        //output
        //1:SomeText1;SomeText2
        //2:SomeText3 
```

此实现的假设是它首先是 EF 数据库（正如您最初所说的那样，您在 EF 中遇到了问题）。SO15312066Entities 是查询的 ObjectContext。

我还没有检查过它的性能如何，我将在你的实际实现中留给你。

# loops - 组装 x86 延迟循环

> ID：15312067
> 
> 赞同：1
> 
> 时间：2013-03-09T14:55:43.953
> 
> 标签：loops, assembly, x86, delay

嗨，我制作的程序将旋转两个符号 - \ 和 / 但我不知道如何在嵌套循环中设置 cx 计数器有人可以给我建议或帮助我吗？

这是那部分的代码

```
program:  
      mov ah, 0fh   ; function - get video mode
      int 10h
      push ax       ; save number of columns
      push bx       ; save page number
      mov ah, 0     ; function - set video mode
      int 10h

      mov al, 0003h     ;set video mode
      int 10h

      mov cx,10d  ; Outer loop counter how many symbols rotate

      mov bx,50d  ;   this is for delay loop
      OuterLoop:
      push cx

      mov ah,02h
      mov bh, 0        ;cursor set
      mov dh, 2
      mov dl, 10
      int 10h

      mov AH,0Ah
      mov al,"/"    symbol /
      mov bh,0
      mov cx,1
      int 10h

      mov cx,bx
      call Delay       ;delay loop
      sub bx,15d

      mov ah,02h
      mov bh, 0
      mov dh, 2            cursor set
      mov dl, 10
      int 10h

      mov AH,0Ah
      mov al,"\"             ;symbol \
      mov bh,0 
      mov cx,1
      int 10h

      mov cx,bx
      call Delay  ; another delay
      sub bx,10

      pop cx       ; Restore current CX
      loop OuterLoop

      jmp START     ; and after end it should jump to start where is menu with choices 
```

它应该像这样工作

写入/延迟例如 10 秒写入\延迟 8 秒并跳转到开头并循环

感谢您的建议

这是我的延迟程序

```
Delay   PROC    NEAR                    ;

    push    ds                      ;
    push    si                      ;
    push    ax                      ;
    xor     ax, ax                  ;AX = 0
    mov     ds, ax                  ;DS = 0
    mov     si, 046Ch               ;
t1:     mov     ax, [si]                ;
t2:     cmp     ax, [si]                ;
    je      t2                      ;
    loop    t1                      ;
    pop     ax                      ;
    pop     si                      ;
    pop     ds                      ;
    ret                             ;

Delay   ENDP                            ; 
```

我仍在开发此应用程序，但它无法正常工作我所需要的只是执行此步骤

程序：循环开始\延迟延迟100次/延迟延迟80次循环并在每个循环之后减少延迟100次80、60、40等等，但我不知道在哪里放置push和pop cx，因为我的延迟程序正在与 cx 合作。例如，我只是将 cx 设置为 100，它会产生延迟等等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T17:47:36.000

我看到两个问题：

首先，`bx`在这里初始化

```
mov bx,50d  ;   this is for delay loop 
```

但随后它被

```
mov bh, 0 
```

`bh`是位 15:8`bx`

其次，在延迟过程中，是什么修改了位置以`[si]`使`je t2`分支通过？就目前而言，这是一个无限循环：

```
xor     ax, ax                  ;AX = 0
mov     ds, ax                  ;DS = 0
mov     si, 046Ch               ;
t1:     mov     ax, [si]        ;
t2:     cmp     ax, [si]        ;
        je      t2              ;
        loop    t1              ; 
```

**更新：** 我发现地址 0x46c 是一个包含时间信息的 BIOS 地址。

[http://www.osdata.com/system/physical/lowmem.htm](http://www.osdata.com/system/physical/lowmem.htm)

因此，您在该循环中查看的内存是由 BIOS 更新的位置，带有计时器滴答计数器（每 54.9 毫秒计数一次），请参阅

[http://code.google.com/p/xtideuniversalbios/source/browse/trunk/Assembly_Library/Src/Time/TimerTicks.asm?spec=svn131&r=131](http://code.google.com/p/xtideuniversalbios/source/browse/trunk/Assembly_Library/Src/Time/TimerTicks.asm?spec=svn131&r=131)

因此，要回答您的问题，在调用您的`Delay`程序之前，您应该加载`CX`您希望延迟的 BIOS 滴答计数（以毫秒为单位的时间除以 54.9）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T08:08:34.233

为了绘制我自己的光标，我使用定时器中断来在不同的高性能 CPU 上实现更稳定的延迟。

```
Cursor_Speed = 7
;-------------DATA--------------------------------------
          CURFLAG DB 0, 0, 0, 0
          ALTVEC  DD 0
;-------------CODE--------------------------------------
          cli
          xor      ax, ax
          mov      es, ax
          mov      ebx, DWORD PTR es:[8*4] ; Get the old Vector (Offset/Segment)
          mov     DWORD PTR[ALTVEC], ebx   ; save it
          mov     cs:DWORD PTR[OLDVEC], ebx
          mov      es:[8*4], OFFSET NEWVEC ; Set the new IRQ-Vector
          mov      es:[(8*4)+2], cs

          mov      al, 36h                    ; Set 18,2 Hertz(Standard)
          out      43h, al
          xor      al, al
          out      40h, al           ; low
          out      40h, al           ; high
          sti
;---------------------------------------------------
          ......
;---------------------------------------------------
NEWVEC:   inc     BYTE PTR[CURFLAG+1]
          cmp     BYTE PTR[CURFLAG+1], Cursor_Speed
          jb  short NOHIT
          mov     BYTE PTR[CURFLAG+1], 0
          xor     BYTE PTR[CURFLAG], 1

NOHIT:    DB 0EAh                         ; jmp far
OLDVEC    DD 0
;--------------------------------------------------- 
```

……

或者，我们可以等待带有轮询端口 3DAh 的 vsinc 以减少精确延迟。

短剑

# java - Java Swing - 将矩形拖到 JPanel 上的有效方法？

> ID：15312070
> 
> 赞同：5
> 
> 时间：2013-03-09T14:56:11.330
> 
> 标签：java, swing, user-interface, drawing

我有一些代码来绘制矩形。它用于在 a 上绘制矩形`JPanel`，以标记小部件的边界。这里首先是代码，然后我将解释我的问题cq。问题。

首先，我有一个`WidgetDrawingPanel`扩展类 ( ) `JPanel`。

```
public WidgetDrawingPanel(int width, int height) {
    /*To make things visible at least*/
    widgets.add(new Widget(10,10,100,100, WidgetType.TextField));
    widgets.add(new Widget(50,50,100,200, WidgetType.TextField));
    this.width = width;
    this.height = height;
    this.setBackground(Color.BLUE);
    addListener(); //adds both MouseMotionListener and MouseListener
} 
```

下面你会看到我参考`ch`了很多。这是一个`CoordinateHolder`，它保存了我的鼠标移动的开始坐标和当前坐标。

```
private void addListener() {
    this.addMouseMotionListener(new MouseMotionListener() {
        @Override
        public void mouseDragged(MouseEvent arg0) {
            ch.currentX = arg0.getX();
            ch.currentY = arg0.getY();
            System.out.println("dragging " + ch.currentX + ","+ch.currentY);
            WidgetDrawingPanel.this.repaint();
        }
    });
    this.addMouseListener(new MouseListener() {
        @Override
        public void mouseReleased(MouseEvent event) {
            ch.endX = event.getX();
            ch.endY = event.getY();
            try {
                checkCoords();
            } catch (OutsidePanelException e) {
                e.printStackTrace();
                JOptionPane.showMessageDialog(null, "drawn Outside Panel");
            }
        }

        @Override
        public void mousePressed(MouseEvent event) {
            ch = new CoordinateHolder(event.getX(), event.getY());
        }
    });
} 
```

最后是`paintComponent(Grapics)`方法。有循环`Widgets`，实际上只是已经绘制`Rects`（x，y，w，h 属性），但其中包含更多信息，这在应用程序的绘图部分中没有用。每次释放鼠标时，`CoordinateHolder`都会转换为 Widget，并添加到`widgets`.

```
@Override
public void paintComponent(Graphics g) {
    super.paintComponent(g);
    System.out.println("Paint");
    g.setColor(Color.BLUE);
    g.fillRect(0, 0, width, height); //making the whole panel blue
    g.setColor(Color.RED);
    Graphics2D g2 = (Graphics2D)g;
    g2.setStroke(new BasicStroke(3));
    for (Widget w : widgets) { 
        g.drawRect(w.getX(), w.getY(), w.getW(), w.getH());
    }
    if (ch != null)
        g.drawRect(ch.startX, ch.startY, ch.currentX - ch.startX, ch.currentY - ch.startY);
} 
```

这段代码正在运行，但我怀疑这是非常低效和低效的，因为上面的代码会不断刷新`JPanel`鼠标拖动，也就是说，每 10 毫秒一次？我想它很快就会变慢，尤其是当用户创建大量矩形时（它们也会不断地重绘，如 参考资料所示`painComponent(Graphics)`）。

**问题cq。问题**

有没有更好、资源消耗更少的方法，用户可以平滑地拖动矩形？

我[在 Java 中阅读了对 JFrame 上的 Drag rectangle](https://stackoverflow.com/questions/1150084/drag-rectangle-on-jframe-in-java)的答案，但该答案的作者似乎和我一样。但是再一次，这太低效了，对吧？或者计算机是否应该能够轻松地不断重绘组件，这实际上是一种有效的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T15:08:54.253

要显示许多不变的背景形状，请将它们绘制到 BufferedImage，然后在`paintComponent(...)`方法中显示该 BufferedImage。因此，在绘制形状时，将其绘制进去，`paintComponent(...)`但一旦绘制完成，可能在 mouseRelease 上，然后在后台 BufferedImage 中绘制它。

请注意，最会减慢您当前绘图代码的可能是您的调试 SOP 语句，但我假设这些将从完成的代码中删除。

例如：

```
import java.awt.*;
import java.awt.event.*;
import java.awt.image.BufferedImage;

import javax.swing.*;

@SuppressWarnings("serial")
public class DrawingPanel extends JPanel {
   private static final int PREF_W = 600;
   private static final int PREF_H = 400;
   private static final Color DRAWING_COLOR = new Color(255, 100, 200);
   private static final Color FINAL_DRAWING_COLOR = Color.red;

   private BufferedImage backgroundImg;
   private Point startPt = null;
   private Point endPt = null;
   private Point currentPt = null;

   public DrawingPanel() {
      backgroundImg = new BufferedImage(PREF_W, PREF_H,
            BufferedImage.TYPE_INT_ARGB);
      Graphics g = backgroundImg.getGraphics();
      g.setColor(Color.blue);
      g.fillRect(0, 0, PREF_W, PREF_H);
      g.dispose();

      MyMouseAdapter myMouseAdapter = new MyMouseAdapter();
      addMouseMotionListener(myMouseAdapter);
      addMouseListener(myMouseAdapter);
   }

   @Override
   protected void paintComponent(Graphics g) {
      super.paintComponent(g);
      if (backgroundImg != null) {
         g.drawImage(backgroundImg, 0, 0, this);
      }

      if (startPt != null && currentPt != null) {
         g.setColor(DRAWING_COLOR);
         int x = Math.min(startPt.x, currentPt.x);
         int y = Math.min(startPt.y, currentPt.y);
         int width = Math.abs(startPt.x - currentPt.x);
         int height = Math.abs(startPt.y - currentPt.y);
         g.drawRect(x, y, width, height);
      }
   }

   @Override
   public Dimension getPreferredSize() {
      return new Dimension(PREF_W, PREF_H);
   }

   public void drawToBackground() {
      Graphics g = backgroundImg.getGraphics();
      g.setColor(FINAL_DRAWING_COLOR);
      int x = Math.min(startPt.x, endPt.x);
      int y = Math.min(startPt.y, endPt.y);
      int width = Math.abs(startPt.x - endPt.x);
      int height = Math.abs(startPt.y - endPt.y);
      g.drawRect(x, y, width, height);
      g.dispose();

      startPt = null;
      repaint();
   }

   private class MyMouseAdapter extends MouseAdapter {
      @Override
      public void mouseDragged(MouseEvent mEvt) {
         currentPt = mEvt.getPoint();
         DrawingPanel.this.repaint();
      }

      @Override
      public void mouseReleased(MouseEvent mEvt) {
         endPt = mEvt.getPoint();
         currentPt = null;
         drawToBackground();
      }

      @Override
      public void mousePressed(MouseEvent mEvt) {
         startPt = mEvt.getPoint();
      }
   }

   private static void createAndShowGui() {
      DrawingPanel mainPanel = new DrawingPanel();

      JFrame frame = new JFrame("Drawing Panel");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(mainPanel);
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
} 
```

# java - JPA 有批注解吗？

> ID：15312072
> 
> 赞同：0
> 
> 时间：2013-03-09T14:56:17.097
> 
> 标签：java, hibernate, jpa, eclipselink

我们遇到的问题是我们正在执行大量查询以加载我们的应用程序。有明显的地方可以优化查询以一次提取一堆记录，而不是一次提取一个。但是，我发现的批处理注释似乎只存在于实际的持久性实现（Hibernate / EclipseLink）中。我错过了什么吗？

任何建议将不胜感激。

谢谢，

小号

# backbone.js - Marionette.View 中 UI 元素的可用性

> ID：15312075
> 
> 赞同：14
> 
> 时间：2013-03-09T14:56:38.337
> 
> 标签：backbone.js, user-interface, binding, view, marionette

我只是想了解 Backbone.Marionette 关于 UI 元素的观点背后的决定。在现有 DOM 元素上实例化 Marionette.View 时，如下所示：

```
view = new Marionette.ItemView({
     el: "#element",
     ui : {
         whatever : "#whatever"
     }
}); 
```

到目前为止，我可以访问`view.$el`里面的 jquery 选择器。`view.initialize`但是，当我尝试访问时`view.ui.whatever`，我只能访问选择器，即字符串“#whatever”，而不是实际的`$("#whatever")`jquery 选择器。

这样做的原因是因为`Marionette.View.bindUIElements()`只被调用`render`而不是之前`initialize`。

**我想知道您是否认为这种行为是合乎逻辑的，为什么？**

我只是在将视图附加到`el`现有`render()`.

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-09T20:52:03.643

将视图附加到现有元素是一个例外。正常的视图生命周期涉及调用`render`，如果不这样做，UI 元素将无法绑定任何内容。

当您需要将视图附加到现有元素时，只需调用`this.bindUIElements()`您的方法。`initialize`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T23:26:22.007

当我使用 Marionette 时，我将必须访问 ui 元素的代码放在 onShow 方法中。这个事件在 dom 准备好并且元素准备好被操作之后触发。在此方法中，您的 ui.whatever 现在将指向一个元素而不是字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-28T11:23:10.510

我认为你有这个问题，因为你必须访问 jQuery 元素

```
this.ui.whatever 
```

因为“this”已经是一个视图实例。请参阅： http: [//marionettejs.com/docs/v2.4.4/marionette.itemview.html#organizing-ui-elements](http://marionettejs.com/docs/v2.4.4/marionette.itemview.html#organizing-ui-elements)

# asp.net - SignalR 跨域无法在 IE10 以外的浏览器上运行

> ID：15312077
> 
> 赞同：5
> 
> 时间：2013-03-09T14:56:50.947
> 
> 标签：asp.net, signalr

我正在使用 SignalR 跨域通信编写 Web 应用程序。我正在使用最新版本的 SignalR，1.0.1。以下是 jQuery 的文档就绪事件中的代码：

```
var connection = $.hubConnection(url);
  var proxy = connection.createHubProxy(hubName);

  connection.start().done(function () {
    proxy.invoke('serverMethod');
  }); 
```

我尝试在 Opera、Firefox、Chrome 和 IE 10 上运行该应用程序。我的操作系统是 Windows 7。它在 IE 10 上运行良好，在其他浏览器上不运行。我将使用开发人员工具的 IE 模式更改为 IE 9，它停止工作。如果我使用 SignalR 0.5.3 版，相同的代码适用于所有浏览器。

在浏览器的开发者工具中，我发现响应协商请求的 HTTP 状态码如下：“HTTP/1.1 403 Forbidden”。

我在这里错过了什么吗？它在 IE 10 以外的浏览器上中断的原因是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-09T19:15:11.053

确保在您的 MapHubs 调用中启用跨域。

```
RouteTable.Routes.MapHubs(new HubConfiguration() { EnableCrossDomain = true }); 
```

在本地测试跨域时，IE10 有一个有趣的功能，它将任何 localhost 端口都视为不是跨域的。

# c# - 将名称=值格式的字符串反序列化为对象

> ID：15312079
> 
> 赞同：1
> 
> 时间：2013-03-09T14:56:53.227
> 
> 标签：c#

我想读取文件，每个文件都包含一个人的详细信息，如下所示，并将其转换为 Person 对象。

隐藏在下面

```
id=1
firstName=John
lastName=Smith 
```

至：

```
public class Person
{

   public int Id {get;set;}
   public string FirstName{get;set;}
   public string LastName{get;set;}

} 
```

是否有 .NET 内置方法可以做到这一点，或者第三方库。我无法通过谷歌找到它。

**更新：**

文件格式不能更改。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T15:10:54.913

.NET 真正融入了 XML，因此您不会找到类似 INI 格式的内置功能。但是有很多库可以很容易地读取和写入这样的文件，例如[ini-parser](https://github.com/rickyah/ini-parser/)或[nini](http://nini.sourceforge.net/download.php)，但是您仍然必须手动执行与对象的映射。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T15:12:13.600

例如使用`File.ReadAllLines`一点点 Linq 和`String.Substring`?

```
var lines = File.ReadAllLines(path).Select(l => l.Trim());
var idLine = lines.FirstOrDefault(l => l.StartsWith("id=", StringComparison.OrdinalIgnoreCase));
var lNameLine = lines.FirstOrDefault(l => l.StartsWith("lastname=", StringComparison.OrdinalIgnoreCase));
var fNameLine = lines.FirstOrDefault(l => l.StartsWith("firstname=", StringComparison.OrdinalIgnoreCase));
if (idLine != null && lNameLine != null && fNameLine != null)
{
    Person person = new Person()
    {
        Id = int.Parse(idLine.Substring(idLine.IndexOf("=") + 1)),
        FirstName = fNameLine.Substring(fNameLine.IndexOf("=") + 1),
        LastName = lNameLine.Substring(lNameLine.IndexOf("=") + 1)
    };
} 
```

（假设每个文件只有一个人）

但我会使用不同的格式，比如 XML（当然也可以是数据库）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T15:13:21.070

`String.Split`您可以使用LINQ解析文本：

```
Dictionary<string, string> dict = text
    .Split(new[] { Environment.NewLine }, StringSplitOptions.None)
    .Select(e => e.Split('='))
    .ToDictionary(strings => strings[0], strings => strings[1]); 
```

[然后使用Dictionary Adapter 之](http://docs.castleproject.org/Default.aspx?Page=Castle-DictionaryAdapter&NS=Tools&AspxAutoDetectCookieSupport=1)类的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T15:11:10.427

我真的认为您应该考虑将输入数据格式更改为更标准的格式（例如 XML 或 JSON）。

但这并不意味着您根本无法读取您的文件。您应该自己阅读文本文件：

```
var people = new List<Person>();
using (var stream = File.OpenRead("Input.txt"))
{
    using (var reader = new StreamReader(stream))
    {

        while (!reader.EndOfStream)
        {
            int id = int.Parse(reader.ReadLine().Substring(3));
            string firstName = reader.ReadLine().Substring(10);
            string lastName = reader.ReadLine().Substring(9);

            var newPerson = new Person()
            {
                Id = id,
                FirstName = firstName,
                LastName = lastName
            };

            people.Add(newPerson);
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-09T15:06:32.883

如果您的数据格式如下：

```
<Person>
<Id>1</Id>
<FirstName>John</FirstName>
<LastName>Smith</LastName>
</Person> 
```

然后这个 C# 代码将反序列化为 Person 的一个实例

```
//assuming you have a string called "data" that contains the above XML.
XDocument xd=XDocument.Parse(data); //needs System.Xml.Linq for XDocument type.
using(var reader = xd.CreateReader())
{
    using(XmlSerializer ser = new XmlSerializer(typeof(Person))
    {
       Person p = ser.Deserialize(reader) as Person;
       //p will be null if it didn't work, so make sure to check it!
    }
} 
```

请注意，反序列化器区分大小写，因此您需要确保元素大小写与类中属性的大小写匹配（您可以通过使用告诉序列化器如何在[此处](http://msdn.microsoft.com/en-us/library/83y7df3e%28v=vs.71%29.aspx)映射它们的序列化器属性装饰您的属性来解决此问题）

普通的原生序列化器非常适合像这样的简单对象，但可能会在某些数据类型上绊倒你，比如 char、bool 等，所以请检查属性上的链接。

如果您想按照问题中提供的格式执行此操作，则需要编写一个自定义序列化程序，在您的情况下，我的建议是从您的文件中读取并使用[XDocument](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.aspx)从数据中生成 XML希望有帮助。

# php - CodeIgniter URL Rewrite 然后获取数据选择？

> ID：15312080
> 
> 赞同：-1
> 
> 时间：2013-03-09T14:56:55.293
> 
> 标签：php, codeigniter, url-rewriting

我想重写 URL。我已经删除了`index.php`。但;

`site.com/controller/function?haber=deneme_haberi`

或者

`site.com/controller/function?cat=teknoloji&haber=deneme_haberi`

我想要;

`site.com/controller/function/deneme_haberi`

或者

`site.com/controller/function/teknoloji/deneme_haberi`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T16:06:00.480

据我所知，在 Codeigniter 中，如果您发送 URL

site.com/controller1/my_function/teknoloji/deneme_haberi，你直接将控制器名称后面的段映射为函数中的参数：

```
class Controller1 extends CI_Controller { 

[...]

public function my_function( $cat, $haber )
{
    echo $cat;
    echo $haber;
} 
```

`$cat`并且`$haber`将分别具有第二和第三段值，打印“teknoloji”和“deneme_haberi”。重要的是，您在编写 url 时注意到顺序很重要，因为它将是您发​​送参数的顺序。

# mysql - SBJson *parser 嘿，我在 *parser 下得到了红线 我应该如何在目标 c 中使用 SBJson 解析？

> ID：15312087
> 
> 赞同：-3
> 
> 时间：2013-03-09T14:57:28.467
> 
> 标签：mysql, objective-c

我在 SBJson *parser 下得到一条红线，现在我不知道如何删除此错误。我应该安装某种库，或者我应该怎么做才能消除这个错误？我被困在目标 C 中的 json 解析中。

```
SBJSON *parser=[[SBJsonParser alloc] init];

NSURLRequest *request =[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://localhost/jsontest1.php"]];

NSData *response = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];

NSString *json_string = [[NSString alloc] initWithData:response encoding: NSUTF8StringEncoding];

NSArray *statuses = [parser objectWithString:json_string error:nil];
for (NSDictionary *status in statuses)
{
    NSLog(@"%@ - %@", [status objectForKey:@"text"],

          [[status objectForKey:@"user"]objectForKey:@"screen_name"]);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T15:26:13.943

首先，您应该停止执行同步请求。他们阻塞了主线程，您的应用程序似乎不负责任。其次，除非你有充分的理由使用 SBJSON（针对 iOS < 5），否则你应该坚持使用 NSJSONSerialization：

```
NSError *err = nil;
NSArray *statuses = [NSJSONSerialization JSONObjectWithData:response options:0 error:&err]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T06:54:07.620

[您应该从这里](http://superloopy.io/json-framework/)将用于 JSON 解析的文件添加到您的项目中。

将正确的 .h 文件包含到您的代码中。

# unity3d - Unity3D WWW 发布数据异步

> ID：15312091
> 
> 赞同：0
> 
> 时间：2013-03-09T14:57:59.550
> 
> 标签：unity3d

我想使用 WWW 类将 JSON 发布到网站，但我从服务器得到这个答案：“同步问题。”。有没有办法从同步更改为异步？谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-04T23:17:17.257

您可以在协程中运行您的 WWW 作业（WWW 很好地支持这一点）：

```
using UnityEngine;

public class PostJSON : MonoBehaviour {

    void Start () {

        string url = "http://your_url_endpoint";

        WWWForm form = new WWWForm();
        Hashtable headers = form.headers;
        headers["Content-Type"] = "application/json";
        Hashtable data = new Hashtable();
        data["message"] = "a sample message sent to service as json";
        string json = JSON.JsonEncode(data);

        byte[] bytes = Encoding.UTF8.GetBytes(json);
        WWW www = new WWW(url, bytes, headers);

        StartCoroutine(WaitForRequest(www));
    }

    IEnumerator WaitForRequest(WWW www)
    {
        yield return www

        // check for errors
        if (www.error == null)
        {
            Debug.Log("WWW Ok!: " + www.data);
        } else {
            Debug.Log("WWW Error: "+ www.error);
        }    
    }    
} 
```

在这里，您有一个正在运行的项目，我用它来与一个名为 KiiCloud 的基于 json 的 REST 服务通信：

[http://blog.kii.com/?p=2939](http://blog.kii.com/?p=2939)

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-22T14:57:55.553

German 的回答非常有帮助，但我做了一些调整，以便它能够编译和运行（带有示例序列化/反序列化位）。

只需传入您要发布到的 BaseUrl，即 [http://www.domain.com/somecontroller/someaction](http://www.domain.com/somecontroller/someaction)或其他任何内容。

```
using System;
using System.Text;
using System.Collections;
using System.Collections.Generic;

using UnityEngine;

[Serializable]
public class Person
{
    public string Name;
}

[Serializable]
public class Response
{
    public string SomeValue;
}

public class PostJSON : MonoBehaviour
{
    public string BaseUrl;

    private WWWForm form;
    private Dictionary<string, string> headers = null;

    void Start () 
    {
        var basUrlNotSpecified = string.IsNullOrEmpty(BaseUrl);

        if(basUrlNotSpecified) 
        {
            Debug.LogWarning("BaseUrl value not specified. Post abandoned.");
            return;
        }

        form = new WWWForm();
        headers = form.headers;
        headers["Content-Type"] = "application/json";
        headers["Accept"] = "application/json";

        var person = new Person
        {
            Name = "Iulian Palade"
        };

        var json = JsonUtility.ToJson(person);

        byte[] bytes = Encoding.UTF8.GetBytes(json);

        WWW www = new WWW(BaseUrl, bytes, headers);

        StartCoroutine(WaitForRequest(www));
    }

    IEnumerator WaitForRequest(WWW www)
    {
        yield return www;

        if (www.error == null)
        {
            Debug.Log("WWW Ok!: " + www.text);
            var response = JsonUtility.FromJson<Response>(www.text);
            Debug.Log(response.SomeValue);
        } 
        else 
        {
            Debug.Log("WWW Error: "+ www.error);
        }    
    }    
} 
```

# infragistics - UltraGrid中设置子band的数据源

> ID：15312094
> 
> 赞同：2
> 
> 时间：2013-03-09T14:58:04.840
> 
> 标签：infragistics

我的 Windows 窗体应用程序中有一个 UltraGrid，它必须有两个波段。通过使用以下代码，我能够毫无问题地设置父乐队：

```
 Try
            con.Open()
            da = New SqlDataAdapter("SELECT o.OJTID, o.Surname + ', ' + o.FirstName + ' ' + o.MiddleName AS FullName, t.TotalGrade FROM tblOJTs o INNER JOIN tblTGrades t ON o.OJTID = t.OJTID", con)
            da.Fill(ds, "tblOGrades")
            con.Close()
        Catch ex As Exception
            MsgBox("Error connecting to databe.", MsgBoxStyle.Critical)
            MsgBox(ex.ToString)
            con.Close()
            Exit Sub
        End Try

        UltraGrid1.DisplayLayout.ViewStyle = Infragistics.Win.UltraWinGrid.ViewStyle.MultiBand
        UltraGrid1.DataSource = ds.Tables("tblOGrades") 
```

现在的事情是，我不知道如何设置儿童乐队的数据源。由于分层数据源功能，我没有遇到 UltraWebGrid 的此类问题，但我认为它不适用于 WinForms。我知道你们会帮助提前谢谢:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T18:22:36.833

您需要使用与第一个表相关的数据填充 DataSet 中的另一个 DataTable。之后，您应该定义两个数据表之间的关系，最后将 UltraWinGrid 的 DataSource 设置为 DataSet 本身，而不是单个 DataTable。

例如：

```
con.Open()
da = New SqlDataAdapter("SELECT o.OJTID, o.Surname ....", con)
da.Fill(ds, "tblOGrades")
da = new SqlDataAdapter("SELECT .related data....", con)
da.Fill(ds, "tblRelated")
ds.Relations.Add("Grades_Relation", _
   ds.Tables("tblOGrades").Columns("OJTID"), _
   ds.Tables("tblRelated").Columns("relatedID"))
con.Close()

....

UltraGrid1.DataSource = ds 
```

# html - HTML5 如何使用 Dropzone

> ID：15312100
> 
> 赞同：0
> 
> 时间：2013-03-09T14:58:31.423
> 
> 标签：html, drag-and-drop

您好，我要为人员列表制作一个 Dropzone。我对使用 Html5 的新 Dropzone 很感兴趣，唯一的问题是没有明确解释它是什么，如何使用它，也没有 w3schools.com 中的示例

它给出的只是它的价值观：复制、移动、链接。有人能给出一个简单易懂的例子吗？

我的想法是有 2 个 div，div1 包含学生列表，div2 包含当前注册学生的列表。我希望用户能够将学生从 div1 拖到 div2，并且它的名称显示在 div2 上。那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-03T19:56:18.167

在这里玩游戏有点晚了，您不能开箱即用 [dropzone]，因为任何浏览器都不支持它。请参阅[我的项目](https://github.com/stevendwood/html5-dropzone)，该项目试图实现我认为的规范。方法。您可以使用它轻松实现您的用例。

# php - php mysql + 评论系统

> ID：15312104
> 
> 赞同：-1
> 
> 时间：2013-03-09T14:59:17.943
> 
> 标签：php, mysql, comments, dreamweaver

我正在创建具有评论系统的社交媒体网站，其中用户编写的文本将发布在板上并存储在数据库中，但问题是没有显示文本，也没有文本存储在数据库中，但旁边的其他字段文本已存储，因此任何人都可以帮助我？？？

# 配置文件.php

```
<?php  
ob_start();
session_start();
require_once('for members/scripts/global.php'); 

if($_SESSION['login'] != 'true'){
        header("location:index.php");
    }
$user_id = $_SESSION['user_id'];
$send =(isset($_POST['send']));
$writenCom = (isset($_POST['post']));
if($send && $writenCom){
   echo $writenCom;
 $query = mysql_query("INSERT INTO comment(sender_id, text, comment_date)VALUES('$user_id', '$writenCom', now())")or die(mysql_error());

 while($row = mysql_fetch_array($query)){

 echo"comment success";

 }

}

?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="style/stylesheet.css"rel="stylesheet" type="text/css"/>
<title>
<?php print($_SESSION['first_name']); ?>
<?php print($_SESSION['last_name']); ?>'s profile</title>
<style type="text/css">

</style>

<link href="style/stylesheet.css" type="text/css"/>
</head>

<body>
<?php require_once('header.php'); ?>

<div class="container center"> 
<div class="postForm">
<form action="<?php echo($_SESSION['first_name']); ?>" method="post">
  <textarea id="post" name="post" rows="5" cols="70"> </textarea>
  <input type="submit" name="send" value="Post" style="background-color:#DCE5EE; float:right; border:1px solid #666; color:#666; height:73px; width:65px;" />
</form>

</div>

<div class="profilePost">Your Post will go here...

</div>
<!--for posting area -->
<div class="textProfileHeader"><?php echo($_SESSION['first_name']); ?>'s profile</div>

<!--end of posting -->
<div class="profileImage"><img src="image with highlight 2/images/new images/imageHover/homeHover.jpg" height="250" width="200" alt="<?php echo($_SESSION['first_name']); ?>'s profile" title="="<?php echo($_SESSION['first_name']);?>'s profile /></div>

<div class="profiletextContent">Some Content about  this person profile...</div>

<div class="textProfileHeaderFriends"><?php echo($_SESSION['first_name']); ?>'s Friends</div>

<div class="profileImgFriends"> <img src="image with highlight 2/images/new images/imageHover/homeHover.jpg" height="50" width="40" />&nbsp;&nbsp; <img src="image with highlight 2/images/new images/imageHover/homeHover.jpg" height="50" width="40" />&nbsp;&nbsp; <img src="image with highlight 2/images/new images/imageHover/homeHover.jpg" height="50" width="40" />&nbsp;&nbsp; <img src="image with highlight 2/images/new images/imageHover/homeHover.jpg" height="50" width="40" />&nbsp;&nbsp; <img src="image with highlight 2/images/new images/imageHover/homeHover.jpg" height="50" width="40" />&nbsp;&nbsp; <img src="image with highlight 2/images/new images/imageHover/homeHover.jpg" height="50" width="40" />&nbsp;&nbsp; <img src="image with highlight 2/images/new images/imageHover/homeHover.jpg" height="50" width="40" />&nbsp;&nbsp; <img src="image with highlight 2/images/new images/imageHover/homeHover.jpg" height="50" width="40" />&nbsp;&nbsp; </div>

<!--
<form id="form" method="post" action="profile.php" enctype="multipart/form-data" target="iframe">
    <input type="file" id="file" name="file" />
    <input type="submit" name="submit" id="submit" value="Upload File" />
</form>
-->
<!--
<a href="#">edit profile</a><br />
<a href="#">account settings</a><br />
-->
<?php
//}else{
    //header("Location: home.php");
?>
<!--
<a href="#">private message</a><br />
<a href="#">add as friend</a><br />
--> 
<?php
//}
?>
</div>

<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<?php require_once('footer.php'); ?>

</body>
</html>

<?php flush(); ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T15:06:20.490

你应该使用[`mysql_affected_rows`](http://www.php.net/manual/en/function.mysql-affected-rows.php)而不是`mysql_fetch_array`

```
if (mysql_affected_rows() > 0) {
    echo "comment success";
} else {
    echo "insert comment failed";
} 
```

`mysql_fetch_array`用于获取查询的结果集`select`。

或者，您可以只测试 的返回值`mysql_query`，这对于插入语句来说是`TRUE`成功还是失败`FALSE`

```
if ($query) {
    echo "comment success";
} else {
    echo "insert comment failed";
} 
```

除此之外，您应该考虑切换到`mysqli`or `PDO`，因为`mysql_*`现在不推荐使用函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T15:05:32.697

我在您的代码中看到了多个问题。首先，`$writenCom = (isset($_POST['post']));`设置`$writenCom`为 TRUE/FALSE，这是您尝试在 DB 中插入的值。其次，仅当您执行查询`mysql_fetch_array`时才有意义。`SELECT`此外，您应该始终转义来自用户的数据（建议使用`mysqli`or `PDO`，而不是 obsolete `mysql`）

# function - 如何计算函数的最大值？

> ID：15312106
> 
> 赞同：1
> 
> 时间：2013-03-09T14:59:29.433
> 
> 标签：function, fortran, max

如何计算 Fortran 中 [a,b] 上定义的平滑函数的最大值？为简单起见，使用多项式函数。

背景是几乎所有数值通量（数值 PDE 中的一个概念）都涉及计算某个函数在区间 [a,b] 上的最大值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T15:31:49.180

对于具有平滑且易于计算的导数的一维问题，请使用[Newton-Raphson](http://en.wikipedia.org/wiki/Newton%27s_method#Minimization_and_maximization_problems)找到一阶导数的零点。

对于多维和易于计算的导数，最好使用近似 Hessian 的方法。这种类型有几种方法，但我发现[L-BFGS](http://en.wikipedia.org/wiki/Limited-memory_BFGS)方法可靠且有效。西北大学的一个小组提供了一个方便的、[获得 BSD 许可的软件包。](http://users.eecs.northwestern.edu/~nocedal/lbfgs.html)[在http://www.netlib.org/](http://www.netlib.org/)也有相当多的经过良好测试的代码

# php - 通过 PHP 脚本服务替换图像

> ID：15312108
> 
> 赞同：0
> 
> 时间：2013-03-09T14:59:38.217
> 
> 标签：php, apache, .htaccess

我正在尝试通过 PHP 脚本提供我所有的图像。最终目标是在满足某些条件时动态替换图像，但现在我只是想让脚本返回特定的图像文件。我有一个 .htaccess，它将所有图像请求发送到此脚本，但目前图像未显示在页面上。

PHP脚本的完整内容：

```
$img = '/imgs/img1.jpg';
$type = 'image/jpeg';
header('Content-Type:'.$type);
header('Content-Length: ' . filesize($img));
readfile($img); 
```

我想获取重定向到此脚本的图像请求的 URL。根据条件，我想立即提供图像或使用图像生成带有 GD 的新图像并将其返回。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T18:22:52.160

您提供的是硬盘驱动器中位置的路径，而不是 docroot。因此，除非文件位于 /imgs/ 中的硬盘驱动器中，否则它将无法工作。尝试：

```
$img = $_SERVER['DOCUMENT_ROOT'] . '/imgs/img1.jpg';
$type = 'image/jpeg';
header('Content-Type:'.$type);
header('Content-Length: ' . filesize($img));
readfile($img); 
```

# python - Python 输出换行

> ID：15312113
> 
> 赞同：3
> 
> 时间：2013-03-09T15:00:01.077
> 
> 标签：python, osx-mountain-lion

我在 OS X 10.8 终端中运行以下 Python 脚本，行长约为 200 个字符。但是，脚本的输出大约在第 80 行处换行。如何使输出行持续到控制台的长度？

这是我的 Python 脚本：

```
import csv as csv 
import numpy as np
#Open up the csv file in to a Python object
csv_file_object = csv.reader(open('./data/train.csv', 'rb')) 
header = csv_file_object.next()  #The next() command just skips the 
                                 #first line which is a header
data=[]                          #Create a variable called 'data'
for row in csv_file_object:      #Run through each row in the csv file
    data.append(row)             #adding each row to the data variable
data = np.array(data)            #Then convert from a list to an array
#Be aware that each item is currently a string in this format
for datum in data:
    print datum[0:10] 
```

我得到的输出是这样的：

```
['1' '3' 'Najib, Miss. Adele Kiamie "Jane"' 'female' '15' '0' '0' '2667'
 '7.225' '']
['0' '3' 'Gustafsson, Mr. Alfred Ossian' 'male' '20' '0' '0' '7534'
 '9.8458' ''] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T15:11:56.450

这是 numpy 的数组表示的设置，要让它整行，你必须`datum`自己打印每个`str.join`.

# vb.net - 如何确定特定进程是否正在运行

> ID：15312116
> 
> 赞同：1
> 
> 时间：2013-03-09T15:00:13.793
> 
> 标签：vb.net, skype4com

我正在构建一个应用程序，以便在运行特定程序时将我的 Skype 状态更改为忙。我尝试了以下代码：

```
Private Sub WaitTimer_Tick(sender As Object, e As EventArgs) Handles WaitTimer.Tick
        For Each Me.Process In Process.GetProcesses(My.Computer.Name)
            On Error Resume Next
            If Process.ProcessName = Process.ProcessName = "SCII" Then
                skype.Changeuserstatus(TUserStatus.cusAway)
                Button1.Text = "SCII is running"
                Exit Sub
            End If
        Next
        Button1.Text = "SCII is not running"
    End Sub 
```

每当我运行它时，它总是说 SCII 是打开的，而它不是。我究竟做错了什么？除了计时器之外，还有更好更有效的方法来检查正在运行的进程吗？

作为旁注，我导入 Skype4COMLib。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T15:30:41.473

这就是问题 ：

```
If Process.ProcessName = Process.ProcessName = "SCII" Then 
```

它应该是 ：

```
If Process.ProcessName = "SCII" Then 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T15:32:37.463

问题是`On Error Resume Next`。这是在 if 语句中恢复的。由于比较`(Process.ProcessName = Process.ProcessName) = "SCII"`总是引发异常，因此您总是在第一个循环的 if 内恢复。

`On Error Resume Next`如果您不希望出现错误，请考虑将其删除，或者如果出现错误，请考虑将其替换为`try catch`块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-09T20:41:36.693

如果从所有正在运行的进程中找到一个进程，这会在消息框中告诉您。如果进程正在运行，它将在几秒钟左右显示出来。

```
Sub CheckIfRunning()
    Dim pList() As System.Diagnostics.Process = System.Diagnostics.Process.GetProcesses
    For Each proc As System.Diagnostics.Process In pList
        If proc.ProcessName.ToString = "App".ToString Then
              MsgBox(proc.ProcessName.ToString & " Found")
        End If
    Next
End Sub 
```

# c# - 在 asp.net mvc 中编写查询的正确位置

> ID：15312117
> 
> 赞同：3
> 
> 时间：2013-03-09T15:00:21.310
> 
> 标签：c#, asp.net, asp.net-mvc, entity-framework, entity-framework-5

假设我有一个博客，其中包含不同作者的帖子，作者应该能够看到他们写了哪些文章。

现在我使用实体框架的数据库上下文编写查询。

现在的问题是查询应该在控制器或模型类的特定操作方法中去哪里。

我有点新，这件事让我很困惑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T15:33:36.323

## 控制器应尽可能精简

所以放置查询的最佳位置是在控制器操作之外，所有类型的持久性查询通常放置在存储库（[存储库模式](http://msdn.microsoft.com/en-us/library/ff649690.aspx)）或某些业务逻辑层 - 这实际上取决于应用程序的复杂性。

简而言之，存储库模式实际上是在应用程序中只有一个地方包含持久性以及如何查询它的知识，通常我们可以在那里找到[CRUD](http://en.wikipedia.org/wiki/Create,_read,_update_and_delete)操作。通常，每个“域上下文”（订单、博客文章……）都有一个存储库。

例如（小型应用程序的工作流程）：

```
OrderController -> OrderRepository -> Persistance
CreateOrderAction -> SaveOrder -> Query 
```

因为。想想看。如果您有`OrderController`，然后假设 a`SpecialOrderController`但两者都需要 Order 数据怎么办？在这种情况下，您最终会遇到查询代码重复，如果是存储库模式的情况，您可以避免这个“陷阱”。如您所知， [DRY](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)原则是我们工艺中最伟大的原则之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T15:04:01.370

我会将这些类型的查询放入存储库类中；这样，您就可以在应用程序的多个部分中使用相同的查询。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T15:04:45.533

这取决于应用程序的层。它是 MVC 的事实并不重要。你有数据层吗？如果是这样，它会去那里。

这有点像询问您的查询在 WinForms 应用程序中的位置。同样，如果这是一个不平凡的应用程序，您可能有一个 UI、一个服务层、一个业务逻辑层和一个数据层。数据层是您的查询所在。

在 MVC 应用程序中，控制器知道如何对视图中的事件做出反应。在我工作过的应用程序中，控制器将调用业务逻辑层，然后 BLL 将连接到数据层。在琐碎的应用程序中，这将是矫枉过正，但我​​不确定您的应用程序有多广泛。

BLL 和 DAL 是您的模型。所以，简短的回答是：

> 查询属于模型，而不是控制器。

# ruby-on-rails - 对于长时间运行的任务，delayed_job vs cron

> ID：15312123
> 
> 赞同：0
> 
> 时间：2013-03-09T15:01:20.527
> 
> 标签：ruby-on-rails, ruby-on-rails-3, cron, delayed-job

每个`Thing`插入数据库的都有一个`archive`属性。当设置为 0 时，什么都不会发生。但是，如果不是，我希望将其添加到要处理的队列中。

归档 a`Thing`可能需要 3 到 30 秒，因为发送和处理了大量请求。所以我的问题是我是否做到了：

1.  当 a设置`Thing`为`archive`1 时，将其放入队列以每隔一段时间（每 15 分钟左右）由 Rake 任务处理，然后将`archive`属性设置为 2，以阻止它再次被处理
2.  在 上创建一个`do_archive`方法`Thing`，并在保存时执行`self.delay.do_archive`，并让`delayed_job`我为我处理所有这些

有些`Things`不需要处理，归档不是时间必需的事情。我的直觉是这`delayed_job`可能是一个更好的主意，因为它不是特定时间的，只是通过队列而不是每天午夜运行脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T15:25:46.487

我认为你在最后一段中几乎把它钉牢了。如果它是时间相关的而不是事件驱动的，那么 cron 更有意义。但是如果有一个事件发生并且可以排队，并且它不依赖于时间，那么使用后台作业。

您可能要考虑的一件事是实际的消息传递系统是否更有意义。虽然像[RabbitMQ](http://www.rabbitmq.com/)这样的东西对于你现在的情况来说可能有点矫枉过正，但还有其他更简单的选择。[Sidekiq](https://github.com/mperham/sidekiq)或[Resque](https://github.com/defunkt/resque)是两个流行的选项，它们使您可以更好地控制后台作业，并提供延迟作业的简单性和消息传递系统的健壮性。

# php - 从页面加载或脚本标记调用 jQuery Ajax 函数

> ID：15312128
> 
> 赞同：0
> 
> 时间：2013-03-09T15:01:57.580
> 
> 标签：php, jquery, ajax, wordpress

我正在为 Wordpress 中的自定义帖子类型开发 AJAX 过滤器。它工作得很好，但是我有一件事我无法工作。我想从正文中的脚本标记执行 AJAX 函数（如果效果更好，则从正文 onload 执行），这样我可以告诉函数在加载页面时打开哪些过滤器。

这是加载 AJAX 的函数

```
// ajaxLoop.js
jQuery(function($){

var loading = true;
var $window = $(window);
var $content = $("body #filterAanbod");

// ajax inladen, afhankelijk van categorie, onderwijs type en kerndoel. 
function loadActiviteiten(cat, type, doel, populair){
            $.ajax({
                type       : "GET",
                data       : {categorie : cat, type : type, kerndoel : doel, pop: populair},
                dataType   : "html",
                url        : "loopHandler.php",
                beforeSend : function() {
                          $content.fadeOut(100);
                          $content.append(
                            '<img src="images/ajax-loader.gif" />'
                          );  

                   } 
                })
              .done(function(data) {
                        $content.hide();
                        $content.html(data);
                        $content.fadeIn(500, function() { 
                                loading = false;
                                  $("#temp_load").remove();
                                });
                        })
              .fail(function() {   $("#temp_load").remove(); alert("failed miserably"); });

    } 
```

我使用 jQuery click 函数来执行`loadActiviteiten(cat, type, doel, populair)`过滤器导航。这工作得很好。但是，当我想在模板文件中执行它时，它什么也不做。

这就是我在 template.php 中所做的一切

```
<script type="text/javacsript">
$(function() {
  loadActiviteiten();
});
</script> 
```

这个想法是制作一个自定义元框，用户可以在其中选择要打开当前页面的过滤器并转换为 javascript 函数 ex。`loadActiviteiten(term-slug,0,0,0);`只加载与分类“categorie”的“term-slug”匹配的帖子。

我真的不明白为什么它没有执行，任何人都可以帮助我吗？

oo fyi，我的控制台中没有任何错误。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T18:25:36.040

你可以这样做：

第一步：首先加载jquery库。

第 2 步：加载您的 ajaxLoop.js：

```
<script src="ajaxLoop.js"></script> 
```

**ajaxLoop.js**

```
function loadActiviteiten(cat, type, doel, populair){
var loading = true;
var $window = $(window);
var $content = $("body #filterAanbod");

// ajax inladen, afhankelijk van categorie, onderwijs type en kerndoel. 

            $.ajax({
                type       : "GET",
                data       : {categorie : cat, type : type, kerndoel : doel, pop: populair},
                dataType   : "html",
                url        : "loopHandler.php",
                beforeSend : function() {
                          $content.fadeOut(100);
                          $content.append(
                            '<img src="images/ajax-loader.gif" />'
                          );  

                   } 
                })
              .done(function(data) {
                        $content.hide();
                        $content.html(data);
                        $content.fadeIn(500, function() { 
                                loading = false;
                                  $("#temp_load").remove();
                                });
                        })
              .fail(function() {   $("#temp_load").remove(); alert("failed miserably"); });

    } 
```

第三步：

现在你的函数是一个全局函数。

所以你可以这样称呼它：

```
<script type="text/javascript">
jQuery(document).ready(function($){

    loadActiviteiten(cat, type, doel, populair);
});
</script> 
```

只需确保在加载 ajaxLoop.js 文件后调用您的函数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T15:07:22.673

我发现最简单的方法是`success: function(result) {}`在 ajax 调用中添加一个子句。此外，您应该以不同的方式调用它，以确保 dom 已准备好进行操作。

```
$(document).ready(loadActiviteiten); 
```

代替

```
$(function() {
  loadActiviteiten();
}); 
```

# mysql - 我可以在mysql中拥有多个具有相同用户信息的记录，但电话号码除外

> ID：15312130
> 
> 赞同：0
> 
> 时间：2013-03-09T15:02:17.860
> 
> 标签：mysql, database

我可以在一个表中拥有相同的用户名和电子邮件但不同的电话号码，其中电话号码保存在另一个具有用户表 ID 的表中。

如果我将相同的用户信息记录多于一个表中的记录，即在该表中具有不同电话号码的用户表（不是通过将外键概念放在另一个电话号码表中），那么还有什么问题。

我是数据库新手，请让我清楚我的概念。请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T15:05:13.923

是的，您可以在表格中使用相同的用户名和电子邮件，但通过制作不同的电话号码

```
GROUP BY phone_number 
```

请注意：对于拥有多个电话号码的用户，您将被选中多行，如果您正在寻找简单的用户结果，这可能并不理想。因此，您可能需要考虑查询。

# django - 如果上下文中缺少变量，如何使 Django 模板引发错误

> ID：15312135
> 
> 赞同：33
> 
> 时间：2013-03-09T15:02:55.297
> 
> 标签：django, templates

我在非 Django 项目中使用 Django 模板，我想确保我的模板不包含对不在上下文中的变量的引用，为此我需要 Django 模板渲染器在看到`{{ non_existent_variable }}`没有`non_existent_variable`在上下文中。

`TEMPLATE_STRING_IF_INVALID`可以设置为某个东西，然后我们可以检查这个东西是否不在渲染的模板中，但这一点也不优雅。

我可以在没有太多工作的情况下以某种方式覆盖 Context 吞下丢失的关键错误的方式吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-09T15:20:03.767

有一个[Django Snippet](http://djangosnippets.org/snippets/646/)提供了一个解决方案：

```
# settings.py
class InvalidVarException(object):
    def __mod__(self, missing):
        try:
            missing_str=unicode(missing)
        except:
            missing_str='Failed to create string representation'
        raise Exception('Unknown template variable %r %s' % (missing, missing_str))
    def __contains__(self, search):
        if search=='%s':
            return True
        return False

TEMPLATE_DEBUG=True
TEMPLATE_STRING_IF_INVALID = InvalidVarException() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-16T16:34:50.957

您可以轻松地将模板后端切换到 jinja2 来获得它。

**第 0 步**：添加`jinja2`到您的 Pipfile 或 requirements.txt

**第 1 步**：`settings.py`将 TEMPLATES 更改为如下所示：

```
TEMPLATES = [
    {
        'BACKEND': 'django.template.backends.jinja2.Jinja2',
        'APP_DIRS': True,
        'OPTIONS': {
            'undefined': jinja2.StrictUndefined
        },
    },
    {
        "BACKEND": "django.template.backends.django.DjangoTemplates",
        ... 
```

**第 2 步**：将您的`templates`目录重命名为`jinja2`

**第 3 步**：（可能不需要，取决于您在模板中使用的内容）根据[https://jinja.palletsprojects.com/en/2.10.x/switching/#django更新您的模板](https://jinja.palletsprojects.com/en/2.10.x/switching/#django)

# php - Apache 将 url 中的文件夹重写为变量（如 codeigniter）

> ID：15312140
> 
> 赞同：0
> 
> 时间：2013-03-09T15:03:11.503
> 
> 标签：php, apache, .htaccess, variables, mod-rewrite

我想使用我的 .htaccess 以下列方式重写我的 URL：

```
 http://localhost/admin/variable1/variable2/variable3/ (etc) 
```

至：

```
 <?php
 $var1 = $_GET['variable1'];
 $var2 = $_GET['variable2'];
 $var3 = $_GET['variable3'];
 ?> 
```

此外，它应该适用于 0、1、2、3、4 和更多变量。有谁知道如何做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T15:09:37.163

您可以这样做：首先创建一个**.htaccess**文件，“假设您使用的是 apache”。

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.*)$ index.php?r=$1 [L]
</IfModule> 
```

PHP 代码将是这样的：

```
<?php

    $route = isset($_GET["r"]) ? $_GET["r"] : "/";
    var_dump($route, explode("/", $route)); 
```

然后，当您访问以下 URL 时：

```
http://127.0.0.1/example/a/b/c/d/e/f 
```

输出：

```
string 'a/b/c/d/e/f' (length=11)
array (size=6)
  0 => string 'a' (length=1)
  1 => string 'b' (length=1)
  2 => string 'c' (length=1)
  3 => string 'd' (length=1)
  4 => string 'e' (length=1)
  5 => string 'f' (length=1) 
```

# jquery - jQuery 淡入淡出。淡化 div 和 h1

> ID：15312148
> 
> 赞同：0
> 
> 时间：2013-03-09T15:03:50.377
> 
> 标签：jquery, html

我只想淡化 div。这段代码淡化了 div 和其中的文字。因此，即使我希望它保持黑色，文字也会变灰。

```
<body>
    <div id="bc"><h1>Welcome Russell!</h1></div>
</body> 
```

如果我将 h1 从 div 中取出，它将看起来像

* * *

"""""""""""""""""""""""
|"这里不写"|

"""""""""""""""""""""""
我的标题在这里

* * *

但我希望它像这样
"""""""""""""""""""""""
|"我的标题在这里"|

"""""""""""""""""""""""

* * *

```
$(document).ready(function(){
    $("div").mouseover(function(){
        $("#bc").fadeTo("slow", 0.5);
});
    $("div").mouseout(function(){
        $("#bc").fadeTo("slow", 1);
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T15:12:38.833

这就是它的工作方式，当父元素的不透明度为 0.5 时，它的后代也会继承该属性。如果要更改 DIV 元素的背景颜色，可以使用`rgba`值和`css`方法。

```
$(document).ready(function(){
    $("div").mouseenter(function(){
        $(this).css("background-color", 'rgba(0,0,0, 0.5)');
    }).mouseleave(function(){
        $(this).css("background-color", 'rgba(0,0,0, 1)');
    });
}); 
```

**注意**：如果你想为元素的背景颜色设置动画，你应该加载 jQuery UI。

您还可以使用 CSS3 过渡属性：

```
div {
    background-color: rgba(0,0,0,1);
    color: white;
    -moz-transition: .5s background-color;
    -webkit-transition: .5s background-color;
    -o-transition: .5s background-color;
    transition: .5s background-color;
}
div:hover {
    background-color: rgba(0,0,0,0.5);
} 
```

[http://jsfiddle.net/vyBgW/](http://jsfiddle.net/vyBgW/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T15:15:15.057

您还可以包含 jQuery UI，它可以让您为背景颜色等属性设置动画。

然后，您的代码可能如下所示：-

```
$(document).ready(function(){
    $("div").mouseover(function(){
        $("#bc").animate({backgroundColor: "Red"});

});
    $("div").mouseout(function(){
        $("#bc").animate({backgroundColor: "Gray"});
});
}); 
```

[http://jsfiddle.net/BrN4t/](http://jsfiddle.net/BrN4t/)

显然，您应该更改颜色以更改为更适合您。我的例子只是展示了它是如何工作的基础知识。

# ios - CAayer - (void)drawInContext:(CGContextRef)ctx 永远不会被调用

> ID：15312149
> 
> 赞同：3
> 
> 时间：2013-03-09T15:04:00.793
> 
> 标签：ios, uiview, calayer

我试图通过子类化使用 CALayer 进行绘制。我知道有一些关于我已经看过其中大部分的帖子并遵循了给出的解决方案但没有成功。比如设置帧大小。这是代码。提前需要一些帮助

```
//
//  NewView.m
//  layerPractise

#import "NewView.h"
#import "QuartzCore/QuartzCore.h"
#import "NewLayer.h"
#import "NewLayer2.h"

@interface NewView() {
//  NSMutableArray *_normalizedValues;

}
@end

@implementation NewView
@synthesize _containerLayer;

@synthesize layer,shouldAddNewLayer;

-(void)doInitialSetup {
    self._containerLayer = [CALayer layer];
    [_containerLayer setFrame:self.frame];
    [self.layer addSublayer:self._containerLayer];
//    [_containerLayer retain];
}

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        [self doInitialSetup];
    }

    return self;
}

-(id)initWithCoder:(NSCoder *)aDecoder {
    if (self = [super initWithCoder:aDecoder]) {
        [self doInitialSetup];
    }

    return self;
}

- (void)addCustomLayer{

    NewLayer *newLayer = [NewLayer layer];

    newLayer.frame = self.bounds;

    [_containerLayer addSublayer:newLayer];
    [newLayer setNeedsDisplay];

}

// Only override drawRect: if you perform custom drawing.
// An empty implementation adversely affects performance during animation.

//- (void)drawRect:(CGRect)rect
//{
//    // Drawing code
//}

@end 
```

和 NewLayer 类

```
- (id)initWithLayer:(id)layer{

    self = [super initWithLayer:layer];
    if (self) {

    }

    return self;
}

- (id)init {
    self = [super init];
    if (self) {

        self.frame = CGRectMake(0, 0, 500, 500);
        self.delegate = self;
        CGRect r = self.frame;
        [self setNeedsDisplay];
    }

    return self;
}

+ (BOOL)needsDisplayForKey:(NSString *)key {

    [super needsDisplayForKey:key];

}

- (void)drawInContext:(CGContextRef)ctx{

    CGContextMoveToPoint(ctx, 100, 100);
    CGContextAddLineToPoint(ctx, 500, 800);
    CGContextSetStrokeColorWithColor(ctx, [UIColor blackColor].CGColor);

    CGContextDrawPath(ctx, kCGPathStroke);

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T20:21:35.723

该`addCustomLayer`方法永远不会被调用。在`doInitialSetup`一个层被创建但它的类型是`CALayer`而不是你的自定义子类`NewLayer`。

# javascript - 在 asp.net 中将图像文件用于 FileUpload 控件的 Javascript 正则表达式

> ID：15312151
> 
> 赞同：0
> 
> 时间：2013-03-09T15:04:01.617
> 
> 标签：javascript, asp.net, regex

我正在尝试使用javascript验证用户在客户端网页的FileUpload控件中选择的图像文件。谁能告诉我我该怎么做。我正在尝试这个代码不起作用：

```
function validateFileExtension() 
{
    var re =/\.(gif|jpg|JPEG|tiff|png)$/i;
    var temp = document.getElementById('<%=FileUpload1.ClientID %>').value;

    if (re.test(temp)) 
    {
        return ("Invalid image file type.");

        return false;
    }

    return "";
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T16:03:33.547

检查这对我有用...

```
 function validateImage() {
        var uploadcontrol = document.getElementById('<%=imgUploader.ClientID%>').value;
        //Regular Expression for fileupload control.
        var reg = /^(([a-zA-Z]:)|(\\{2}\w+)\$?)(\\(\w[\w].*))+(.jpg|.jpeg|.png|.gif)$/;
        if (uploadcontrol.length > 0) {
            //Checks with the control value.
            if (reg.test(uploadcontrol)) {
                return true;
            }
            else {
                //If the condition not satisfied shows error message.
                alert("Only .jpg, .jpeg,.png, .gif  files are allowed!");
                return false;
            }
        }
    } //End of function validate. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-05T16:55:18.343

```
private  final String IMAGE_PATTERN = "([^\\s]+(\\.(?i)(jpg|png|gif|bmp))$)"; 
```

# web-hosting - 这是什么类型的虚拟主机？(DNS/CNAME)

> ID：15312154
> 
> 赞同：0
> 
> 时间：2013-03-09T15:04:20.697
> 
> 标签：web-hosting

我喜欢通过同一家公司注册我的域，所以当我寻找网络主机时，我有一个非常具体的要求——我只需要空间来上传可以通过我的注册商的 DNS/CNAME 设置定向到的内容。我不需要“免费”域名、电子邮件或转移我现有的注册。只需空间和配置信息即可向其发送流量。

所以我现在正在四处寻找新主机，想知道我所追求的是否有一个简写术语，因为这似乎是一个相当常规的要求，并且会有一个术语。

所以这是我的问题，真的。向潜在主机说明我需要的主机类型最简洁的方式是什么？（当然，所有对做这种事情的好、*负担得起的房东的建议都非常感激！）*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T15:08:42.783

大多数托管公司都会为您执行此操作。我相信您要的是**VirtualHost一词**

# sql - 如何在 SQL 中四舍五入

> ID：15312156
> 
> 赞同：1
> 
> 时间：2013-03-09T15:04:28.573
> 
> 标签：sql, sql-server, database

我们刚开始学习 SQL，我似乎对一个练习有一点问题。

我需要四舍五入的结果

```
SELECT AVG(points) AS Average FROM table; 
```

我试图用子查询来做到这一点，但我只是没有击中正确的一个，即使只有选择的艰难的类似子查询似乎也能很好地工作。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T15:07:06.533

使用[圆形](http://msdn.microsoft.com/en-gb/library/ms175003.aspx)

```
SELECT ROUND(AVG(POINTS), 2) AS Average
FROM table; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T15:07:55.090

试试这个

```
 SELECT ROUND(AVG(POINTS), 3) AS Average FROM your_table;

                             ^^--if you want round by two decimals then use 2 and so on 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T15:09:13.577

使用该`ROUND()`功能。

```
SELECT ROUND(AVG(POINTS), 1) AS Average FROM table; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T15:14:45.713

从表中选择 Round(Avg(Points),2) 作为平均值

参考： http: [//msdn.microsoft.com/en-us/library/ms175003.aspx](http://msdn.microsoft.com/en-us/library/ms175003.aspx) 这有帮助吗？

# javascript - 使用 Javascript 更改页面

> ID：15312158
> 
> 赞同：2
> 
> 时间：2013-03-09T15:04:44.410
> 
> 标签：javascript, cordova, navigation

我构建了一个 Phonegap 应用程序。我有 7-8 页，我需要使用 Javascript 在它们之间导航。我试过使用`window.open`，`window.location`但那些不起作用。

如何使用 Javascript 更改页面？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-01T09:40:29.623

以下代码为我工作。

**window.location="成功.html";**

登录成功后，我正在调用上面的代码。它正在重定向到 android phonegap 中的成功页面。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-01T15:02:25.583

尝试这个。我想它会帮助你。

**HTML**

```
<a href="#" onClick="goPage1();">Go to Page1</a> 
```

**JavaScript：**

```
function goPage1()
{
   var dirPath = dirname(location.href);
   fullPath = dirPath + "/page1.html";
   window.location=fullPath;
}
function dirname(path)
{
   return path.replace(/\\/g,'/').replace(/\/[^\/]*$/, '');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-22T11:30:28.663

如果它是相同的主机名，您可以简单地使用**路径名**更改页面：

例如，如果您有文件名：

> 索引.html

> 登录.html

您可以使用以下命令访问*login.html*：

```
window.location.pathname = "login.html"; 
```

# php - 默认从下拉框中的 mysql 查询中选择值

> ID：15312161
> 
> 赞同：0
> 
> 时间：2013-03-09T15:05:00.713
> 
> 标签：php, drop-down-menu, selected

到目前为止，你们一直对我很有耐心并且很有帮助，所以我会尝试另一个。我在这里环顾四周并尝试了许多不同的 select="selected" 选项，但我无法正确获取代码或其他东西，我确信为你们提供了一个简单的修复。我想要做的是有一个从国家表中填充的下拉列表，默认为美国。这是代码：

```
<select name="cnt" id="">
<option value="">Select</option>
<?php
$rescnt=mysql_query("select * from `country` ORDER by cnt_name ASC");
while($rowcnt=mysql_fetch_array($rescnt)) {
?>
<option value="<?php echo $rowcnt['cnt_id']; ?>"><?php echo $rowcnt['cnt_name']; ?></option>
<?php } ?>
</select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T15:08:17.047

假设美国的 cnt_id 是“US”，选项行应该是：

```
<option value='<?php echo $rowcnt['cnt_id']; ?>'<?php if($rowcnt['cnt_id']=='US') echo ' selected'; ?>><?php echo... 
```

# java - 在单独的文件中为每个枚举定义方法

> ID：15312168
> 
> 赞同：2
> 
> 时间：2013-03-09T15:06:10.137
> 
> 标签：java, enums

我正在寻找一种能够为每个枚举实例定义方法的方法。我们都知道本页底部的代码构造。

我正在寻找的区别是能够在一个单独的文件中为每个枚举定义一个或多个抽象方法，该文件经过编译时验证。这意味着如果有人要添加另一个枚举实例，我会得到一个编译时错误，而不是运行时错误，这是我在本页底部的构造中得到的。

请求的原因是，在我正在查看的某些代码中，应该为每个枚举定义许多方法，但与枚举定义实际上无关，所以我想将它们放在单独的文件中，但不会失去好处解决这个问题的“标准”方式。

```
public enum MyEnum {
X {
    public void calc(Outer o) {
        // do something
    }
},
Y {
    public void calc(Outer o) {
        // do something
    }
};

// abstract method
abstract void calc(Outer o); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T15:15:12.503

您不能为类之外的类定义方法！

您可以定义一个回调接口，每个枚举实例都必须具有以下实例：

```
public interface MyEnumCallback {
  doStuff(final Outer o)
} 
```

然后你的枚举看起来像

```
public enum MyEnum {
  X(new XCallback()),
  Y(new YCallbaxk());

  private final MyEnumCallback callback;

  public MyEnum(final MyEnumCallback callback) {
     this.callback = callback;
  }

  public <Whatever> call(final Outer o) {
     callback.doStuff(o);
  }
} 
```

这将您`Enum`与您想要的方法分开 - 如果有人没有为实例`MyEnumCallback`的构造函数提供实现，它也会引发编译时错误。`Enum`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T15:18:34.597

考虑以下代码：

```
interface Delegate{
    void calc();
}

enum TestEnum {

    EnumValue1(new Delegate() {
        @Override
        public void calc() {

        }
    }),

    EnumValue2(new Delegate() {
        @Override
        public void calc() {

        }
    });

    private Delegate delegate;

    TestEnum(Delegate d){
        this.delegate = d;
    }

    public Delegate getDelegate() {
        return delegate;
    }
}

public class Test {
    public static void main() {
        TestEnum.EnumValue1.getDelegate().calc();
        TestEnum.EnumValue2.getDelegate().calc();
    }
} 
```

# python - pylab scilimits 不工作

> ID：15312170
> 
> 赞同：2
> 
> 时间：2013-03-09T15:06:20.233
> 
> 标签：python, matplotlib

我正在尝试使用 python 2.7 的 matplotlib 模块制作一个简单的图表。

我遇到的问题是该函数`ticklabel_format(style='sci',axis='y',scilimits=(-3.0e-6,-1.0e-6))`没有应用给定的 scilimit 值。我尝试在 plot 命令之前和之后关闭自动缩放

如果我使用`ylim`函数中的值，它确实有效，但它不会采用科学计数法。任何帮助都会很热。

```
from pylab import *

v=[-1,-2,-3,-4,-5]
i=[-1.57e-6,-1.8e-6,-1.97e-6,-2.18e-6,-2.30e-6]

plot(v,i,"bo")
autoscale(enable=False)
xlim(-6,0)
#ylim(-3e-6,-1e-6)
ticklabel_format(style='sci',axis='y',scilimits=(-3.0e-6,-1.0e-6))

xlabel("Voltage/(V)")
ylabel("Current/(A)")
title("Current vs Voltage \n(Schottky Reverse Bias)")
grid()
show() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T10:27:20.400

尝试：

```
gca().ticklabel_format(style='sci',axis='y',scilimits=(0,0))
ylim(-3e-6,-1e-6) 
```

# php - php 版本 5.3.19 empty() 问题

> ID：15312178
> 
> 赞同：1
> 
> 时间：2013-03-09T15:07:09.607
> 
> 标签：php

我编写了一个计算流量的 Joomla 扩展程序，最近遇到了一个奇怪的问题。我通常使用

```
if (empty($items) AND ($bot == 0) AND ($iplock == 0)) 
```

它运行良好，直到最近其中一个用途向我发送了一条消息，解释说除非他将其更改为该系统，否则该系统不计算在内。

```
$ei = empty($items) AND ($bot == 0) AND ($iplock == 0); 
```

如果 ($ei == 1)

他在他的网络服务器上使用 PHP 版本 5.3.19，谁能解释为什么第二个可以工作，但第一个不行。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T15:09:22.897

两种说法**不**相等

第二个语句是这样评估的

`($ei = empty($items)) AND ($bot == 0) AND ($iplock == 0);`

因为`$items`是空的，所以`$ei`获取值`1`。

不要使用`AND`运算符，它的优先级低于`=`, 使用`&&`

检查[运算符优先级](http://php.net/manual/en/language.operators.precedence.php)

# ping - 使用 Ping ICMP 消息定义往返时间

> ID：15312184
> 
> 赞同：0
> 
> 时间：2013-03-09T15:07:31.783
> 
> 标签：ping, latency, roundtrip

使用“简单”ping 命令如何定义 RTT？

示例（Win7）：

```
ping -l 600 www.google.de 
```

我的理解是：会有600字节（请求）大小的ICMP消息发送给google。Google 复制该消息（600 字节）并将其发送回目的地（回复）。RTT 是涉及发送和获取 600 字节消息的整个过程的（延迟）时间。

是对的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T08:54:23.270

延迟通常主要由两个原因引起：

1）两个节点之间的**距离；**这在计算延迟中起着至关重要的作用。例如，考虑一个场景，节点 A 和节点 B 需要通信，相互发送 ICMP 消息，反之亦然。a) 跳数越少，延迟越低。更多的跃点，更多的延迟。解决方案：您可以选择一条备用路径进行通信，可能是距离较近的路径。

**2）网络**有多忙；每当数据包从一个网络发送到另一个网络时，路由器都会处理这些数据包，而这又需要几毫秒的时间。它将来回计算延迟所花费的所有时间。a) 这取决于过程设备，它有多忙。如果不那么忙，数据包将被更快地处理和转发，如果忙则需要时间。解决方案：一种可能的解决方案是使用 QOS，您可以在其中对流量进行优先级排序，当然不是 ICMP 流量，也可以是其他类型的流量。

# c# - 删除文件的最后 10 个字符

> ID：15312195
> 
> 赞同：2
> 
> 时间：2013-03-09T15:08:25.953
> 
> 标签：c#, file

我想删除文件的最后 10 个字符。假设一个字符串`"hello i am a c# learner"`是文件中的数据。

我只希望那个文件是`"hello i am a "`. 作为字符串的文件的最后 10 个字符`"c# learner"`应在文件内删除。

**解决方案：**

1.  将整个文件读入一个字符串并删除最后 10 个字符并写回字符串（但是当文件大小太大时，这种方法会失败，比如大约 200 MB 文件，当我们只需要最后一个时，读取整个文件甚至是不必要的方法10 个字符。所以我不能尝试这种方法）

2.  我想以写模式打开文件并设置光标位置这样的东西`file.seek(-10,SeekOrigin.End)`并写空字节`file.writebye((byte)((char)' '));`

但它似乎没有向文件写入任何内容。

谁能告诉我更好的方法来处理它而不是将整个文件读入字符串。

**注意**我正在使用 c# 来执行此操作

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-09T15:26:37.683

如果文件路径在文本框中：

```
FileStream fs = new FileStream(textBox1.Text, FileMode.Open, FileAccess.ReadWrite);
fs.SetLength(fs.Length - 10);
fs.Close(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T15:16:31.820

获取文件大小（使用 FileInfo），打开文件（使用 FileStream）并将其 Length 设置为所需的大小。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T15:23:08.950

也许你可以尝试这样的事情？

```
yourString = yourString.Remove(yourString.Length -10); 
```

# ember.js - 在 Ember 中预加载数据：Fixture 与 REST 适配器

> ID：15312198
> 
> 赞同：4
> 
> 时间：2013-03-09T15:08:36.083
> 
> 标签：ember.js, ember-data, preload

我有一个相当复杂的 Ember.js 对象，我想在页面加载时将其与初始 HTML/javascript 一起发送（以避免单独访问服务器），然后允许用户对其进行修改。

所以我知道如何设置直接存在的 FIXTURE 数据，并且我知道如何设置 RESTAdapter 以便我可以加载/保存到服务器......我可以两者都做吗？

似乎*商店*设置了一次，对于一个或另一个。对于一个数据源，我可以拥有多个商店吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T12:22:54.667

如果你想从你的应用程序代码之外加载数据，你可以这样做：

向您的文档添加预加载功能（在所有 app.js 和 store.js 下方）：

```
<script>
    window.preload = function(store) {
        store.loadMany(App.Post,[10,11],[{ id: 10, content: "testcontent", author_id: 1 },{ id: 11, content: "testcontent2", author_id: 1 }]);
        store.load(App.User,{ id: 1, username: "supervisor"});
    }
</script> 
```

在您的**ApplicationRoute**中，您使用 store 作为参数调用 preload 函数。

```
App.ApplicationRoute = Ember.Route.extend({
    setupController: function(controller, model) {
        window.preload(this.store);
    }
}); 
```

通过这种方式，您可以减少初始化应用程序时发出的请求量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-09T22:51:22.227

无论您使用哪种适配器，您始终可以将数据直接加载到存储中。例如，

```
App.Store = DS.Store.extend({
    init: function() {
        this._super();
        this.load(App.Post, {
            id: 1,
            text: 'Initial post.'
        });
    }
});

App.Post = DS.Model.extend({
  text: DS.attr('string')
}); 
```

有关完整示例，请参阅[此 jsfiddle](http://jsfiddle.net/ahmacleod/WSNSL/)。

# qt - Qt - 从资源加载 htm 文件

> ID：15312199
> 
> 赞同：0
> 
> 时间：2013-03-09T15:08:37.197
> 
> 标签：qt, user-interface, qwebview, qwebkit

我在 QWebView 小部件中打开本地 html 文件时遇到问题。所以，我这样做：

```
QWebView *myWebView = new QWebView;    
myWebView->load(QUrl("qrc:/index.htm")); 
```

当然，我在资源中添加了 index.htm。但是在 QWebView 中有白屏。我试过用火狐打开本地文件，没关系。

我应该怎么做才能修复它？

PS：htm-page 使用 js 和 css 文件，但我也将它们添加到资源中。PSS：另外，我尝试这样做：

```
QFile res(":/index.htm");
res.open(QIODevice::ReadOnly|QIODevice::Text);
myWebView->setHtml(res.readAll()); 
```

但这无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T15:52:35.360

我会先试试这个：

```
connect(myWebView, SIGNAL(loadFinished(bool)), this, SLOT(finishedLoad(bool)));
....
void finishedLoad(bool ok){
    qDebug() << ok;
} 
```

然后你会知道 web 视图在加载时是否遇到错误。该错误可能是由于 html 格式不正确等造成的。

另一种方法是将资源的内容加载到字符串中，然后：

```
myWebView->setHtml(stringFromResource); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T16:02:19.170

您是否尝试过将文件加载到 QByteArray 以验证它是否正确加载？

编辑：

类似的东西（未经测试，但你明白了）：

```
QFile file(":/index.htm");
if(file.open(QIODevice::ReadOnly)) {
    QByteArray dump = file.readAll();
    qDebug() << "contents: " << dump;
} else {
    qDebug() << "error: " << file.error();
} 
```

该`error()`方法返回[`QFile::FileError`](https://doc.qt.io/qt-5/qfiledevice.html#FileError-enum)枚举。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T19:03:44.337

您的问题在于使用资源文件。这里有一些建议：

*   您的文件真的位于驱动器上吗？
*   您是否在构建之前保存了资源文件？尝试保存所有内容并进行干净构建。
*   首先检查（如果需要，显示）您的`.qrc`-file（它是类似 xml 的文本文件），是否正确？有没有加前缀 ( `<qresource prefix="/">`) 等等
*   尝试使用别名`<file alias="cut-img.png">images/cut.png</file>`，然后可以`:/cut-img.png`从应用程序访问您的文件。

当然，别忘了查看文档——http: [//qt-project.org/doc/qt-4.8/resources.html](http://qt-project.org/doc/qt-4.8/resources.html)

祝你好运！

# php - JSON在本地主机上工作但不在服务器上？

> ID：15312201
> 
> 赞同：0
> 
> 时间：2013-03-09T15:08:49.953
> 
> 标签：php, json

```
while($res = mysql_fetch_object($u_result)) {
  //print_r($res);
  $task_id = $res - > task_id;
  //print_r($json['task_info']);
  //$task_id = $json['task_info'][0]->task_id;
  $sql_g = "SELECT `grade` FROM `t_grades` WHERE `student_id`='$student_id' AND `task_id`= $task_id";
  $res_g = mysql_query($sql_g);

  if(mysql_num_rows($res_g) > 0) {
    $row_g = mysql_fetch_object($res_g);
    $res->grade = $row_g['grade'];
  }
  else {
    $res->grade = 'none';
  }
  //print_r($res);
  $json['task_info'][] = $res;
}
echo json_encode($json); 
```

我收到此错误：

```
Fatal error: Cannot use object of type stdClass as array like this. 
```

这在 localhost 中工作正常，但在服务器上返回错误。什么会导致这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T15:12:29.593

错误消息告诉您问题所在。您正在使用`mysql_fetch_object()`（顺便说一句，不推荐使用，就像整个[`mysql_*`家庭](http://www.php.net/manual/en/function.mysql-connect.php)一样），然后尝试将其作为数组访问。更改您的代码如下：

```
$row_g = mysql_fetch_object($res_g);
$res->grade = $row_g->grade; 
```

# c++ - 作为参数传递的 C++ 调用方法

> ID：15312209
> 
> 赞同：2
> 
> 时间：2013-03-09T15:09:29.900
> 
> 标签：c++, function, templates, c++11, bind

我有一个 Session 类，它定义了多个接收不同参数的 Send 方法。例如：

```
class Session
{
public:
    void SendInt(int i);
    void SendTwoInts(int i1, int i2);
    void SendStringAndInt(const std::string& str, int i);
}; 
```

我还有 SessionsManager 类，它包含所有会话。

```
class SessionsManager
{
private:
    std::vector<Session*> m_Sessions;
    ...
}; 
```

我想将广播方法添加到为每个会话调用相同方法的 SessionsManager 类。如果我只是为每个 Session Send 方法定义一个单独的广播方法，我会像这样结束：

```
class SessionsManager
{
public:
     void BroadcastInt(int i) { for(auto it : m_Sessions) { it->SendInt(i); } };
     void BroadcastTwoInts(int i1, int i2) { for(auto it : m_Sessions) { it->SendTwoInts(i1, i2); } };
...
}; 
```

复制粘贴太多了，理论上发送方法的数量将来会增加。我想要更聪明的东西。

在完美的场景中，我想象有模板化的 Broadcast 方法，它将 Session 方法及其参数作为参数，例如：

```
template<typename Method, typename ...Args)
void Broadcast(Method, Args ... args)
{
...
} 
```

广播呼叫将是

```
Broadcast(&Session::SendInt, 2);
Broadcast(&Session::SendTwoInts, 2, 3); 
```

问题是我不确定它是否可能以及如何准确地实现广播。我正在考虑 std::function 和 std::bind 但我仍然无法编译我的代码。

欢迎任何想法。

*   更新

可以有 2 个具有相同参数但语义不同的 Send 方法。例如：

```
void SendName(const std::string& name);
void SendDescription(const std::string& description); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T15:17:49.067

老实说，我会通过使用可变参数模板来解决这个问题`Broadcast`，并简单地为不同的参数重载`Send()`方法。

这是代码：

```
#include <vector>
#include <string>

class Session
{
public:

    void Send(int i) { }
    void Send(int i1, int i2) { }
    void Send(const std::string& str, int i) { }
};

class SessionsManager
{

public:

    template<typename... Args>
    void Broadcast(Args&&... args)
    {
        for(auto it : m_Sessions)
        {
            it->Send(std::forward<Args>(args)...);
        }
    }

private:

     std::vector<Session*> m_Sessions;

}; 
```

以下是您将如何使用它：

```
int main()
{
    SessionsManager sm;
    sm.Broadcast(1, 2);
    sm.Broadcast(1);
    sm.Broadcast("Hello", 2);
} 
```

这是一个[活生生的例子](http://liveworkspace.org/code/4sAas7%2442)。

* * *

**更新：**

如果您*真的*无法承受重载，则此解决方案可以满足您的原始要求：

```
#include <vector>
#include <string>

class Session
{
public:

    void SendInt(int i) { }
    void SendTwoInts(int i1, int i2) { }
    void SendStringAndInt(const std::string& str, int i) { }
};

class SessionsManager
{
public:

    template<typename M, typename... Args>
    void Broadcast(M m, Args&&... args)
    {
        for(auto it : m_Sessions)
        {
            ((*it).*m)(std::forward<Args>(args)...);
        }
    }

private:

     std::vector<Session*> m_Sessions; // You could use shared_ptr<> here

}; 
```

这是你将如何使用它：

```
int main()
{
    SessionsManager sm;
    sm.Broadcast(&Session::SendTwoInts, 1, 2);
    sm.Broadcast(&Session::SendInt, 1);
    sm.Broadcast(&Session::SendStringAndInt, "Hello", 1);
} 
```

这是一个[活生生的例子](http://liveworkspace.org/code/4sAas7%2443)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T15:53:20.233

一个解决方案`std::bind`可能看起来像

```
#include <iostream> 
#include <functional> 
#include <vector> 

class Session
{
public:
    void SendInt(int i){ std::cout << i; }
    void SendTwoInts(int i1, int i2){ std::cout << i1;}
};

class SessionsManager
{
public:
   std::vector<Session*> m_Sessions;
    template<typename T, typename ...Args>
    void Broadcast(T f, Args&& ...args) {
        for (auto it : m_Sessions) {
            std::bind(f, it, std::forward<Args>(args)...)();
        }
    }
};

int main() {
   SessionsManager m;
   m.m_Sessions.push_back(new Session());
   m.m_Sessions.push_back(new Session());
   m.Broadcast(&Session::SendInt, 2);
   m.Broadcast(&Session::SendTwoInts, 3, 2);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T15:27:01.267

我不知道你真正想要达到什么目的。它看起来像`one SessionsManager have multiple Sessions`。执行一个动作，`SessionManager`将该动作转发给它的所有`Session`s

并且您有一个广播器，可以将命令发送到`SessionManager`

```
struct SessionManager{
   template <typename F>
   void broadcast(F f){
     std::for_each(m_sessions.begin(), m_sessions.end(), f);
   }

   std::vector<Session*> m_sessions;
}; 
```

现在你做`boost::bind`并将它们发送到`SessionManager::broadcast`

# c# - 从复选框列表中获取项目字符串

> ID：15312212
> 
> 赞同：2
> 
> 时间：2013-03-09T15:09:40.600
> 
> 标签：c#, winforms, checkboxlist

我想做这样的事情。

```
String s = "";
foreach (var item in checkedListBox1.Items)
{
        s = checkedListBox1.Items(item).tostring;
         // do something with the string
} 
```

我想要`string`列表框中的项目。

我怎样才能让它运行起来？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T15:21:20.313

我还没有尝试过，但我认为这应该可行。

```
string s = "";
foreach (var item in checkedListBox1.Items)
{
        s = item.ToString();
         // do something with the string
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T15:18:01.093

```
string  s = "";
foreach (string item in checkedListBox1.Items)
{
   s = item;
   // do something with the string

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T15:19:19.773

我相信您正在寻找的是：

```
foreach (var item in checkedListBox1.Items)
{
    checkedListBox1.GetItemText(item);
} 
```

可能不是最有用的，但[这里是](http://msdn.microsoft.com/en-us/library/system.windows.forms.listcontrol.getitemtext.aspx)它的 MSDN。

# jquery - Ajax 发布到控制器动作跨域

> ID：15312216
> 
> 赞同：2
> 
> 时间：2013-03-09T15:10:02.793
> 
> 标签：jquery, ajax, asp.net-mvc, asp.net-mvc-3, post

我在“网站 A”上有一个表格，该表格发布到“网站 B”。代码包括在下面。

我无法从目标域获得成功或返回消息。

有什么建议么？我究竟做错了什么？

```
<script type="text/javascript">

$.fn.serializeObject = function()
{
   var o = {};
   var a = this.serializeArray();
   $.each(a, function() {
       if (o[this.name]) {
           if (!o[this.name].push) {
               o[this.name] = [o[this.name]];
           }
           o[this.name].push(this.value || '');
       } else {
           o[this.name] = this.value || '';
       }
   });
   return o;
};

$(document).ready(function(){
    $("#submit").bind("click", function(){

        //turn form into json
        var formData = $("#digForm").serializeObject();
        var jsonData = JSON.stringify(formData);

        alert(jsonData);

        $.ajax({
            url: URL,
            data: jsonData,
            dataType: 'jsonp',
            cache: false,
            success: function (data) {
                alert(data);
            },
            error: function (jqXHR, textStatus, errorThrown) {
                                alert(errorThrown);
                            }
        });
    })
});
</script> 
```

这是控制器：

```
[HttpPost]
public ActionResult Index(string submission)
{
    SubmissionModel model = new SubmissionModel();

    //validate everything we need is here
    var serializer = new JavaScriptSerializer();

    // get json data from url
    var json =  submission;
    var submissionData = serializer.Deserialize<SubmissionModel>(json);

    model.SiteID = submissionData.SiteID;
    model.FirstName = submissionData.FirstName;
    model.LastName = submissionData.LastName;
    model.Email = submissionData.Email;
    model.Comments = submissionData.Comments;
    model.Like = submissionData.Like;
    model.Dislike = submissionData.Dislike;
    model.SubmitDate = DateTime.Now;
    db.Submissions.Add(model);
    db.SaveChanges();

    return View();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T16:50:49.693

您正在使用 json，但对于跨浏览器 ajax 帖子，您应该使用 jsonp

[http://forums.asp.net/t/1780255.aspx/1](http://forums.asp.net/t/1780255.aspx/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T14:40:16.667

需要这样做：

```
$.ajax({
    url: URL,
    data: {submission: jsonData},
    dataType: 'jsonp',
    cache: false,
    success: function (data) {
        alert(data);
    },
    error: function (jqXHR, textStatus, errorThrown) {
        alert(errorThrown);
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T18:03:33.600

我过去遇到过类似的问题。

冒着教奶奶吸鸡蛋的风险……

**首先，关于问题的诊断，** 我很确定这是一个同源策略问题，因为这些结果没有得到成功或错误消息，这是非常典型的。为了诊断它，您可以在 firefox 上使用 firebug，并查看 http 请求/响应本身**。**在那里你会**看到**响应，因为这是在被浏览器过滤之前。

**关于解决方案。**

就像安东尼说的，你可以使用**jsonp**。JsonP 实际上是一种 hack，它通过隐藏数据，就好像它是一个 JS 函数一样，围绕同源策略工作。

我通常使用 getJson 而不是 ajax() 。 [http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

我将它设置为手动使用 jsonp，方法是在 post 参数中添加“callback=AnyName”。

另外，我看不到你服务器B的响应码，但是json数据需要用AnyName()封装；所以如果你的 json 数据是 {json, data}，你的响应应该是 AnyName({json,data});

# c++ - 关闭 boost asio ssl 套接字时需要调用 ssl::stream::shutdown 吗？

> ID：15312219
> 
> 赞同：6
> 
> 时间：2013-03-09T15:10:17.913
> 
> 标签：c++, sockets, boost, ssl, boost-asio

我的代码如下：

```
declaration: boost::asio::ssl::stream<boost::asio::ip::tcp::socket> m_remote_socket;

m_remote_socket.shutdown(ec);
if (ec)
{      
    cdbug<<"id: "<<m_id<<", error when ssl shutdown: "    <<boost::system::system_category().message(ec.value()).c_str(); 
}
m_remote_socket.lowest_layer().shutdown(boost::asio::ip::tcp::socket::shutdown_both, ec);
if (ec)
{
    cdbug<<"id: "<<m_id<<", error when tcp shutdown: "<<boost::system::system_category().message(ec.value()).c_str(); 
} 
```

每次我打电话`m_remote_socket.shutdown`，都会出错。这种错误值非常大的未知错误。

但是`m_remote_socket.lowest_layer().shutdown()`不调用直接调用也是可以的`m_remote_socket.shutdown`。

谁能告诉我如何关闭 ssl 流式套接字？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-09T15:32:59.787

`shutdown()`同时调用 the`ssl::stream`和 its是最干净的`lowest_layer()`。第一个[结束 SSL 连接](http://en.wikipedia.org/wiki/Transport_Layer_Security#Alert_protocol)，第二个[结束 TCP 连接](http://en.wikipedia.org/wiki/Transmission_Control_Protocol#Connection_termination)。如果您在 SSL 关闭时遇到错误，则可能是对方在结束连接时没有那么优雅。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-06-09T02:04:23.760

我强烈建议您不要使用关闭方法并且不要尊重 SSL 层 + TCP 层（lowest_layer）。保持安全并关闭 tcp 最低层为

m_remote_socket.lowest_layer().close(ec);

我面临的问题是，当您尊重 SSL 或 TCP 时，应用程序资源（套接字处理程序）将存储在内存中，直到服务器端发送关闭会话确认。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-10T23:06:32.363

只需调用 close()。关闭 SSL 套接字是不合法的：在 SSL 中没有半关闭这样的事情。请参阅 RFC 2246，关于 close_notify 的讨论。

# actionscript-3 - 离开框架时停止声音！闪存 AS3

> ID：15312220
> 
> 赞同：0
> 
> 时间：2013-03-09T15:10:37.917
> 
> 标签：actionscript-3, flash, audio

我希望当用户单击下一帧时背景声音停止，这将如何解决？

我正在使用的代码是：

```
 var req4:URLRequest = new URLRequest("TickTock.mp3");
   var TickTock: Sound = new Sound();
   TickTock.load(req4);

   TickTock.play(0); 
```

当我添加`ticktock.stop();` 时，会出现：通过静态类型 flash.media:Sound 的引用调用可能未定义的方法。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T15:13:44.130

您需要`.stop();`为该按钮调用 clickListener。并且不要在下一帧本身中调用它，因为它将超出范围。
显示按钮的代码。

要使用`.stop();`，您必须将其附加到 SoundChannel

```
var mySound:Sound = new Sound();
var myChannel:SoundChannel = new SoundChannel();
mySound.load(new URLRequest("TickTock.mp3"));
myChannel = mySound.play(); 
```

然后打电话

```
myChannel.stop(); 
```

# ruby-on-rails-3 - 为什么 Rails & Bundler 包消失了？

> ID：15312221
> 
> 赞同：0
> 
> 时间：2013-03-09T15:10:46.887
> 
> 标签：ruby-on-rails-3, ubuntu, rvm, bundler, rvmrc

[我正在关注 Michael Hartl 的 Ruby on Rails 教程，在我达到这个阶段](http://ruby.railstutorial.org/ruby-on-rails-tutorial-book#sec-heroku_setup)之前，一切都运行良好。

出于某种原因，当我尝试运行捆绑程序或 rails 命令时，它说它们没有安装，即使它们之前正在工作并且我试图重新安装它们。

这可能与我的 rvm gemset 有关吗？我不确定如何检查 rvmrc 文件。

或者可能与我的操作系统有关。我正在 Windows 7 中托管的虚拟盒子上开发 ubuntu 12.10。

在此先感谢您的帮助。

如果它有帮助，这里是应用程序的[repo](https://github.com/rossmc/first_app.git)。

## 控制台读出

```
first_app: $ bundle install --without production
ERROR: Gem bundler is not installed, run `gem install bundler` first.

first_app: $ bundle update
ERROR: Gem bundler is not installed, run `gem install bundler` first.

first_app: $ gem install bundler
Successfully installed bundler-1.3.2
1 gem installed

first_app: $ bundle install --without production
ERROR: Gem bundler is not installed, run `gem install bundler` first.

first_app: $ ruby -v
ruby 1.9.3p392 (2013-02-22 revision 39386) [x86_64-linux]

first_app: $ rails -v
The program 'rails' can be found in the following packages:
 * rails
 * ruby-railties-3.2
Try: sudo apt-get install <selected package>

first_app: $ gem install rails -v 3.2.12
Successfully installed rails-3.2.12
1 gem installed
    first_app: $ rails -v
The program 'rails' can be found in the following packages:
 * rails
 * ruby-railties-3.2
Try: sudo apt-get install <selected package>

first_app: $ sudo apt-get install rails -v 3.2.12
[sudo] password for ross: 
apt 0.9.7.5ubuntu5.1 for amd64 compiled on Dec 12 2012 13:50:19
Supported modules:
*Ver: Standard .deb
*Pkg:  Debian dpkg interface (Priority 30)
 Pkg:  Debian APT solver interface (Priority -1000)
 S.L: 'deb' Standard Debian binary tree
 S.L: 'deb-src' Standard Debian source tree
 Idx: Debian Source Index
 Idx: Debian Package Index
 Idx: Debian Translation Index
 Idx: Debian dpkg status file
 Idx: EDSP scenario file

first_app: $ rails -v
The program 'rails' can be found in the following packages:
 * rails
 * ruby-railties-3.2
Try: sudo apt-get install <selected package>
first_app: $ 

~: $ gem list bundler

*** LOCAL GEMS ***

~: $ rvm gemset list

gemsets for ruby-1.9.3-p392 (found in /home/ross/.rvm/gems/ruby-1.9.3-p392)
   (default)
   global
=> rails3tutorial2ndEd

~: $ which gem
/home/ross/.rvm/bin/gem

first_app: $ gem uninstall bundler && rvm @global do gem install bundler && bundle -v

You have requested to uninstall the gem:
    bundler-1.3.2
bundle-0.0.1 depends on [bundler (>= 0)]
multi_json-1.6.1 depends on [bundler (~> 1.0)]
rails-3.2.12 depends on [bundler (~> 1.0)]
uglifier-1.3.0 depends on [bundler (~> 1.0)]
uglifier-1.2.3 depends on [bundler (~> 1.0)]
If you remove this gems, one or more dependencies will not be met.
Continue with Uninstall? [Yn]  y
Remove executables:
    bundle

in addition to the gem? [Yn]  y
Removing bundle
Successfully uninstalled bundler-1.3.2
Successfully installed bundler-1.3.2
1 gem installed
ERROR: Gem bundler is not installed, run `gem install bundler` first. 
```

## 用户/.rvm/bin/gem

```
#!/usr/bin/env bash

if [[ -s "/home/ross/.rvm/environments/ruby-1.9.3-p392@rails3tutorial2ndEd" ]]
then
  source "/home/ross/.rvm/environments/ruby-1.9.3-p392@rails3tutorial2ndEd"
  exec gem "$@"
else
  echo "ERROR: Missing RVM environment file: '/home/ross/.rvm/environments/ruby-1.9.3-p392@rails3tutorial2ndEd'" >&2
  exit 1
fi 
```

## /home/ross/.rvm/environments/ruby-1.9.3-p392@rails3tutorial2ndEd

```
export PATH ; PATH="/home/ross/.rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/bin:/home/ross/.rvm/gems/ruby-1.9.3-p392@global/bin:/home/ross/.rvm/rubies/ruby-1.9.3-p392/bin:/home/ross/.rvm/bin:$PATH"
export rvm_env_string ; rvm_env_string='ruby-1.9.3-p392@rails3tutorial2ndEd'
export rvm_path ; rvm_path='/home/ross/.rvm'
export rvm_ruby_string ; rvm_ruby_string='ruby-1.9.3-p392'
export rvm_gemset_name ; rvm_gemset_name='rails3tutorial2ndEd'
export RUBY_VERSION ; RUBY_VERSION='ruby-1.9.3-p392'
export GEM_HOME ; GEM_HOME='/home/ross/.rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd'
export GEM_PATH ; GEM_PATH='/home/ross/.rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd:/home/ross/.rvm/gems/ruby-1.9.3-p392@global'
export MY_RUBY_HOME ; MY_RUBY_HOME='/home/ross/.rvm/rubies/ruby-1.9.3-p392'
export IRBRC ; IRBRC='/home/ross/.rvm/rubies/ruby-1.9.3-p392/.irbrc'
unset MAGLEV_HOME
unset RBXOPT 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T16:11:21.570

看起来您错过[了本教程 rvm install 部分的最后一步](http://ruby.railstutorial.org/ruby-on-rails-tutorial-book#sec-install_ruby)：

```
$ rvm use 1.9.3@rails3tutorial2ndEd --create --default
Using /Users/mhartl/.rvm/gems/ruby-1.9.3 with gemset rails3tutorial2ndEd 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T23:40:24.980

此问题是由于我对**~/.bashrc 文件**进行了修改以自定义终端中的提示所致。我放在**~/.bashrc 文件**`PS1='\[\033[01;31m\]\W: \[\033[01;33m\]\$ \[\033[01;37m\]'`的底部。

 **我必须`PS1='\[\033[01;31m\]\W: \[\033[01;33m\]\$ \[\033[01;37m\]'`从我的系统中删除并完全卸载并删除 RVM 和 Ruby 并重新安装它们。我试图`rvm implode`删除所有内容，但起初这不起作用，它说没有安装 rvm！当我尝试时`source ~/.rvm/scripts/rvm`，我能够成功运行`rvm implode`。

我可以通过输入来自定义我的提示：

```
PS1='\[\033[01;31m\]\W: \[\033[01;33m\]\$ \[\033[01;37m\]'

source ~/.rvm/scripts/rvm 
```

进入我的 ~/.bash_profile**

# mysql - mySql 查询中的多个时间聚合

> ID：15312223
> 
> 赞同：0
> 
> 时间：2013-03-09T15:10:50.007
> 
> 标签：mysql, sql, average

我设法按时间聚合一个值，给出如下查询结果：

```
SELECT date(takenat) AS takendate,
         hour(takenat) AS HourTaken, 
         avg(reading) AS ch1av 
FROM readings 
WHERE channelid = 4 
GROUP BY takendate, HourTaken 
ORDER BY takenat, HourTaken 
```

一些示例输出：

```
takendate HourTaken ch1av

2013-01-01 0 105.5082
2013-01-01 1 107.2167
2013-01-01 2 106.4833
2013-01-01 3 107.0333 
```

但是，我希望有多个 channelid 的结果（在同一个查询中）

takedate HourTaken ch1av ch2av ch4av

因此，例如 channelid=1,2 和 4 的每小时平均值

我尝试了子查询，但我的 sql foo 还不够！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T15:12:04.887

`IN`如果您有多个条件，请使用，

```
select date(takenat) AS takendate,
       hour(takenat) AS HourTaken, 
       avg(reading) AS ch1av,
       channelid 
from   readings 
where  channelid IN (1,2,4)
group  by takendate, HourTaken, channelid 
order  by takenat, HourTaken 
```

这与使用相同`OR`

```
select date(takenat) AS takendate,
       hour(takenat) AS HourTaken, 
       avg(reading) AS ch1av,
       channelid  
from   readings 
where  channelid = 1 OR 
       channelid = 2 OR
       channelid = 4
group  by takendate, HourTaken, channelid
order  by takenat, HourTaken 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T15:19:54.127

听起来你想要这样的东西：

```
SELECT DATE(takenat) AS takendate,
       HOUR(takenat) AS HourTaken,
       AVG(CASE WHEN channelid = 1 THEN reading ELSE null END) AS ch1av, 
       AVG(CASE WHEN channelid = 2 THEN reading ELSE null END) AS ch2av, 
       AVG(CASE WHEN channelid = 4 THEN reading ELSE null END) AS ch4av
FROM readings 
WHERE channelid IN (1,2,4)
GROUP BY takendate, HourTaken
ORDER BY takenat, HourTaken 
```

# node.js - 在 Socket.IO Node.js 上安装 SSL

> ID：15312229
> 
> 赞同：2
> 
> 时间：2013-03-09T15:11:21.863
> 
> 标签：node.js, ssl, socket.io

我购买了 GoDaddy 标准 SSL 证书并将其安装在[http://mysite.com](http://mysite.com)上。现在[https://mysite.com](https://mysite.com)运行良好。

[现在，我想为在http://mysite.com:3000](http://mysite.com:3000)运行的 socket.io 安装证书

我尝试通过以下方式连接 SSL：

```
var socket = io.connect('https://www.mysite.com:3000', {secure:true}); 
```

但它不起作用。这是 server.js

```
var io = require('socket.io'), 
    connect = require('connect'), 
    mysql = require('mysql');

var app = connect().use(connect.static('../public_html/node/'));
app.listen(3000);
var server = io.listen(app);
server.sockets.on('connection', function(socket) { 
     socket.emit('getid', {message: "A New user is online"});
} 
```

和客户端 index.html

```
<script type = "text/javascript" src = "http://www.mysite.com:3000/socket.io/socket.io.js"></script>

<script type = "text/javascript">
var socket = io.connect('http://www.mysite.com:3000'); 
</script> 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T17:05:00.257

您的客户正在连接到`http`，请尝试让您的客户 index.html 连接到`https`。

此外，您需要加载证书。

```
const crypto = require('crypto'),
  fs = require("fs"),
  http = require("http");

var privateKey = fs.readFileSync('privatekey.pem').toString();
var certificate = fs.readFileSync('certificate.pem').toString();

var credentials = crypto.createCredentials({key: privateKey, cert: certificate});

var handler = function (req, res) {
  res.writeHead(200, {'Content-Type': 'text/plain'});
  res.end('Hello World\n');
};

var server = http.createServer();
server.setSecure(credentials);
server.addListener("request", handler);
server.listen(8000); 
```

创建您的自签名`.pem`文件。（要获得奖励积分，请`.csr`由信誉良好的公司签署。）

```
openssl genrsa -out privatekey.pem 2048 
openssl req -new -key privatekey.pem -out certrequest.csr 
openssl x509 -req -in certrequest.csr -signkey privatekey.pem -out certificate.pem 
```

# php - 如何识别节点是否存在是只添加几个孩子

> ID：15312231
> 
> 赞同：0
> 
> 时间：2013-03-09T15:11:36.683
> 
> 标签：php, xml-parsing

我有一个 xml，其中包含我的供应商给我的大量产品

有一些节点在所有领域都是相同的，并且它们仅相差一个。让我举一个例子来更好地理解：

```
<product><name>Sweater x</name><color> Red </color></product>
<product><name>Sweater x</name><color> Green </color></product> 
```

可以获得类型的结果

```
 <product><name>Sweater x</name><color>Red, Green</color></product> 
```

?

# java - 如何在运行时获取方法的 JavaDoc？

> ID：15312238
> 
> 赞同：30
> 
> 时间：2013-03-09T15:12:19.813
> 
> 标签：java, oop, runtime, javadoc

在运行时很容易得到`a method Name`一个 但是 我如何在运行时得到一个方法？ `Class`

`JavaDoc`

如下例

我们的类，包括`JavaDoc`我们的目标方法

```
public class MyClass {
    /**
     * 
     * @param x value of ....
     * @return result of ....
     */
    public String myMethod(int x) {
        return "any value";
    }

} 
```

我们的类有一个 main 方法

```
public class TestJava {
    public static void main(String[] args) {
        // get Class method Name at run time
        String methodName = MyClass.class.getMethods()[0].getName();
        System.out.println(methodName); // will print myMethod
        // How to  get a JavaDoc of myMethod `method` at run time
        // MyClass.class.getMethods()[0].????
        // expected to print a JavaDoc of myMethod
    }
} 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2014-02-19T18:51:13.310

The only way to get it at runtime is to use custom annotations.

Create a custom annotation class:

```
@Retention(RUNTIME)
@Target(value = METHOD)
public @interface ServiceDef {
  /**
   * This provides description when generating docs.
   */
  public String desc() default "";
  /**
   * This provides params when generating docs.
   */
  public String[] params();
} 
```

Use it on a method of a class, e.g.:

```
@ServiceDef(desc = "This is an utility class",
            params = {"name - the name","format - the format"})     
public void read(String name, String format) 
```

Inspect the annotations via reflection:

```
for (Method method : Sample.class.getMethods()) {
  if (Modifier.isPublic(method.getModifiers())) {
    ServiceDef serviceDef = method.getAnnotation(ServiceDef.class);
    if (serviceDef != null) {
      String[] params = serviceDef.params();
      String descOfMethod = serviceDef.desc();
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-09T15:14:33.847

你不能：`class`文件不包含评论。

“解决方案”是在构建程序时将 javadoc 生成为 HTML，并根据类名和方法名构建 URL。[您还可以使用doclet API](http://docs.oracle.com/javase/6/docs/technotes/guides/javadoc/doclet/overview.html)以比 HTML 更合适的格式生成 javadoc 。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2017-08-25T18:17:07.277

注释处理器可以访问源代码中的 Javadoc 注释。如果您可以控制对 Javadoc 感兴趣的类的编译过程，则可以使用注释处理器在编译时获取 Javadoc，并在稍后的运行时使其可用。

这是在[therapi-runtime-javadoc](https://github.com/dnault/therapi-runtime-javadoc)项目中使用的方法（披露：这是我编写的并且我无耻地插入）。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-09T15:33:13.653

您可以[以编程方式运行 javadoc](http://docs.oracle.com/javase/1.5.0/docs/guide/javadoc/standard-doclet.html#runningprogrammatically)并传递选项以生成所需类的文档，然后解析生成的文档以获取所需方法的文档。您将在运行时需要源代码，因为注释不在类文件中。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-09T15:16:15.547

注释在字节码中没有表示形式，它们被编译器剥离并且“在运行时”不可用。

# c# - 使用 IValueConverter 启用/禁用按钮的 IsDefault 属性

> ID：15312248
> 
> 赞同：0
> 
> 时间：2013-03-09T15:12:58.473
> 
> 标签：c#, xaml, mvvm, ivalueconverter

我的视图有 2 个按钮，称为 BrowseButton 和 UploadButton。

BrowseButton[是默认值](http://msdn.microsoft.com/en-GB/library/system.windows.controls.button.isdefault.aspx)，UploadButton 不是。我的目标是在单击 BrowseButton 后更改默认值（即 BrowseButton 不是默认值，但 UploadButton 是）。

单击 BrowseButton 时，会设置我的 ViewModel 中的属性（字符串）。这意味着我可以绑定到该属性并将该属性的值传递给我的 IValueConverter 并返回 true 或 false。这可以按需要工作。

我的 BoolConverter 看起来像

```
 public class BoolConverter : IValueConverter
    {
        public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            if (value == null || string.IsNullOrEmpty(System.Convert.ToString(value)))
                return false;

            return true;
        }

        public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            throw new NotImplementedException();
        }
    } 
```

还有我的 Xaml

```
<Button Content="Browse for file" Width="150" Margin="5" Command="{Binding BrowseForFileCommand}" IsDefault="{Binding File, Converter={StaticResource BConverter}}" />
<Button Content="Upload" Width="75" Margin="5" Command="{Binding UploadCommand}"  IsDefault="{Binding File, Converter={StaticResource BConverter}}" /> 
```

问题是，它们都绑定到同一个 BoolConverter 类，因此它们都是相等的（即，如果一个是假的，那么两个都是假的！）。再次，我可以理解为什么。

我的问题是，我该如何解决这个问题？真的只是拥有多个 Converter 类的情况吗？

例如

```
public class BoolConverterForThis : IValueConverter
{//implementation}
public class BoolConverterForThat : IValueConverter
{//implementation}
public class BoolConverterForOther : IValueConverter
{//implementation} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T15:47:10.033

我很想做这样的事情：

```
public class StringIsEmptyToBoolConverter : MarkupExtension, IValueConverter
{
    public StringIsEmptyToBoolConverter()
    {
        this.Result = false;
    }

    public bool Result { get; set; }

    public object Convert(object value, Type targetType, 
                          object parameter, CultureInfo culture)
    {
        return string.IsNullOrEmpty(value as string) ? this.Result : !this.Result;
    }

    public object ConvertBack(object value, Type targetType, 
                              object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }

    public override object ProvideValue(IServiceProvider serviceProvider)
    {
        return this;
    }
} 
```

您可以像这样在 Xaml 中使用它：

```
<Window.Resources>
    <wpfApplication2:StringIsEmptyToBoolConverter 
        x:Key="TrueResultConverter" Result="True"/>
    <wpfApplication2:StringIsEmptyToBoolConverter 
        x:Key="FalseResultConverter" Result="False"/>
</Window.Resources>
<Grid>
    <!-- because the converter derives from MarkupExtension you can 
         create an instance directly instead of creating a resource -->
    <Button IsDefault="{Binding File,
          Converter={wpfApplication2:StringIsEmptyToBoolConverter Result=True}}"/>

    <!-- or use a resource -->
    <Button IsDefault="{Binding File, 
          Converter={StaticResource TrueResultConverter}}"/>
    <Button IsDefault="{Binding File, 
          Converter={StaticResource FalseResultConverter}}"/>
</Grid> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T15:28:47.263

I had the same problem and I had to resort to coding a True Visibility converter and False Visiility converter. Not that you can't code a visibility converter, but for the benefit of someone who doesn't, this is what my code looked like.

```
public class TrueVisibilityConverter : IValueConverter
{
    public object Convert(
        object value,
        Type targetType,
        object parameter,
        CultureInfo culture)
    {
        bool visibility = (bool)value;
        return visibility ? Visibility.Visible : Visibility.Collapsed;
    }

    public object ConvertBack(
        object value,
        Type targetType,
        object parameter,
        CultureInfo culture)
    {
        Visibility visibility = (Visibility)value;
        return (visibility == Visibility.Visible);
    }
}

public class FalseVisibilityConverter : IValueConverter
    {
        public object Convert(
            object value,
            Type targetType,
            object parameter,
            CultureInfo culture)
        {
            bool visibility = (bool)value;
            return visibility ? Visibility.Collapsed:Visibility.Visible ;
        }

        public object ConvertBack(
            object value,
            Type targetType,
            object parameter,
            CultureInfo culture)
        {
            Visibility visibility = (Visibility)value;
            return (visibility == Visibility.Collapsed);
        }
    } 
```

# java - JTabbedPane - ArrayIndexOutOfBoundsException

> ID：15312252
> 
> 赞同：0
> 
> 时间：2013-03-09T15:13:22.107
> 
> 标签：java, jtabbedpane

我在 JTabbedPane 中动态添加和删除选项卡。代码：

```
 //Method which adds new tab  
     private void addTab(String title, MainPanel panel) {
        tabbed.addTab(title, panel);
        int index = tabbed.indexOfComponent(panel);
        JPanel tabPanel = new JPanel();
        tabPanel.setOpaque(false);
        tabPanel.add(panel.getLabel());
        JButton closeButton = new JButton(new CloseTabAc(index));
        tabPanel.add(closeButton);
        panel.getLabel().setText(title);
        tabbed.setTabComponentAt(index, tabPanel);
        tabbed.setSelectedIndex(index);
        currentPanel = panel;
    }

//Action to close tab
private class CloseTabAc extends AbstractAction {

    private int tabNum;

    CloseTabAc(int tabNum) {
        putValue(Action.NAME, "x");
        this.tabNum = tabNum;
    }

    @Override
    public void actionPerformed(ActionEvent ev) {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                MainPanel panel = (MainPanel) tabbed.getComponentAt(tabNum);
                tabbed.remove(tabNum);
            }
        });
    }
} 
```

所以这是代码。切换时，删除选项卡我收到此错误：

```
Exception in thread "AWT-EventQueue-0" java.lang.IndexOutOfBoundsException: Index: 1, Size: 1
    at java.util.ArrayList.rangeCheck(ArrayList.java:604)
    at java.util.ArrayList.get(ArrayList.java:382)
    at javax.swing.JTabbedPane.getComponentAt(JTabbedPane.java:1224)
    at jnotepad.MainFrame$CloseTabAc$1.run(MainFrame.java:247)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:727)
    at java.awt.EventQueue.access$200(EventQueue.java:103)
    at java.awt.EventQueue$3.run(EventQueue.java:688)
    at java.awt.EventQueue$3.run(EventQueue.java:686)
    at java.security.AccessController.doPrivileged(Native Method)
    ... 
```

我试图解决它几天，但我看不出有什么问题。我唯一看到此错误发生在我打开几个选项卡并随机关闭它们的情况下。所以例如。我打开 3 个选项卡：1、2 和 3。如果我按顺序关闭它们：3、2、1 我得到异常但一切都关闭了。但是当我尝试按顺序关闭它们时：3、1、2 然后 3 将关闭但在 1 上将引发异常并且它不会时不时地关闭。所以请帮我解决我的问题。

**编辑：**我根据让的解决方案修改了我的代码，现在我得到以下异常：

```
Exception in thread "AWT-EventQueue-0" java.lang.ArrayIndexOutOfBoundsException: -1
    at java.util.ArrayList.elementData(ArrayList.java:371)
    at java.util.ArrayList.get(ArrayList.java:384)
    at javax.swing.JTabbedPane.getComponentAt(JTabbedPane.java:1224)
    at jnotepad.MainFrame$ChangeHandler.stateChanged(MainFrame.java:228)
    at javax.swing.JTabbedPane.fireStateChanged(JTabbedPane.java:416)
    at javax.swing.JTabbedPane$ModelListener.stateChanged(JTabbedPane.java:270)
    ... 
```

看起来异常在第 228 行。这是我的 stateChanged 侦听器：

```
 private class ChangeHandler implements ChangeListener {
        @Override
        public void stateChanged(ChangeEvent ev) {
            currentPanel = (MainPanel) tabbed.getComponentAt(tabbed.getSelectedIndex());
        }
    } 
```

每个选项卡中都有 MainPanel 实例。When another tab is selected I get this panel and set is as currentPanel in MainFrame. 这个异常不会像以前那样破坏我的 GUI，但我想摆脱它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T15:16:51.920

如果你有三个标签

| 标签 0 | 标签 1 | 标签 2 |

如果您删除选项卡 1，选项卡 2 索引将为 1。这就是您获得`IndexOutOfBoundsException`.

将选项卡项的引用而不是其在选项卡式窗格中的索引传递给侦听器。

# vb.net - 使用 vb.net 时如何在 Facebook C# SDK 中启动身份验证

> ID：15312254
> 
> 赞同：2
> 
> 时间：2013-03-09T15:13:30.177
> 
> 标签：vb.net, facebook

我终于下载了 Facebook C# SDK 如何以 Windows 形式运行身份验证，还是必须打开他们的网络浏览器。

# java - 断言 VS 运行时异常

> ID：15312258
> 
> 赞同：4
> 
> 时间：2013-03-09T15:13:56.553
> 
> 标签：java, runtime-error

我正在编写 API，所以我的 API 将被外部模块使用。这是一种我无法弄清楚使用什么断言或`java.lang.IllegalArgumentException`

```
/**
 * Adds translation of information to underlying store for particular language
 * @param languageId The identifier of the language 
 * @param translation The translation provided for the specific language
 * @throws AssertionError if the provided language id is {@code null} or empty
 *         or provided translation is {@code null} or empty
 */
public final void addTranslation(String languageId, String translation){
    assert !(Strings.isNullOrEmpty(languageId));
    assert !(Strings.isNullOrEmpty(translation));

    translations.put(languageId, translation);
} 
```

如果我使用运行时异常，我认为它可能会损害使用此 API 的应用程序的执行。如果我使用断言，那么如果断言标志被禁用，它将损害我的 API。

还尝试阅读类似的帖子[何时使用断言以及何时使用异常](https://stackoverflow.com/questions/1957645/when-to-use-assertion-vs-exception)。但是检测哪种情况是我的有点令人困惑。

**是否有严格定义的方式，在哪里使用断言以及在哪里使用运行时异常？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T15:15:45.583

断言通常是一种可以在生产中关闭的开发技术。在 Java、Eiffel、C++ 以及我所知道的所有使用它们的语言中都是如此。

就个人而言，我更喜欢运行时异常来执行合同。你不能把它们关掉。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T15:17:22.373

不要使用断言来验证 API 的输入数据。例如，如果您的 API 使用不正确，只需抛出运行时异常`IllegalArgumentException`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T15:18:05.500

断言仅用于**测试**。对于其他用途，您应该使用异常或 if structores（首选第二种解决方案，因为它比捕获异常快得多）

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-03-09T15:48:24.097

断言和异常都不应该用于实现业务逻辑。原因很简单：**处理异常非常慢**。想象一下，您的代码被非常频繁地调用，然后处理错误的输入，将花费太长时间。只接受一份合约：在调用前检查变量，只传递干净的参数或在方法开始时使用 if 语句检查变量。

**更新**：

> 断言应该用于检查不应该发生的事情，而异常应该用于检查可能发生的事情。

[在 Java 中使用断言](http://java.sys-con.com/node/36819)

> 断言会引发错误而不是异常，因为它们的目的是使您的程序崩溃。

[类错误](http://docs.oracle.com/javase/7/docs/api/java/lang/Error.html)

> Error 是 Throwable 的子类，表示合理的应用程序不应尝试捕获的严重问题。大多数此类错误是异常情况。

AssertionError 是 Error 的子类

# c++ - 陷阱：静态堆栈变量 Singleton 类

> ID：15312264
> 
> 赞同：3
> 
> 时间：2013-03-09T15:14:24.280
> 
> 标签：c++, singleton

我已经有一些使用指针的单例类：

```
class Logger
{
public:

    static Logger* Instance()
    {
        if (!m_pInstance) m_pInstance = new Logger;
        return m_pInstance;
    }
private:
    Logger();
    Logger(Logger const&);
    Logger& operator=(Logger const&);
    static Logger* m_pInstance;
}; 
```

但是，有一种更简单的方法，使用引用：

```
class Logger
{
public:
    static Logger& Instance()
    {
        static Logger theLogger;
        return theLogger;
    }
private:
    Logger();
    Logger(Logger const&);
    Logger& operator=(Logger const&);
    ~Logger();
}; 
```

阅读文章[C++ Singleton design pattern](http://www.yolinux.com/TUTORIALS/C++Singleton.html)，它警告第二种方式：

> [潜在陷阱]：由于对象的预期寿命，这种形式的单例可能会出现问题。如果一个单例在另一个中实例化，则必须敏锐地意识到析构函数的调用顺序。

但我无法理解，有人可以告诉我一个不好的用法，我应该避免它吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-09T16:27:32.753

确实，这两种选择都存在问题。

**典型的单身人士**

```
class Logger
{
public:

    static Logger* Instance()
    {
        if (!m_pInstance) m_pInstance = new Logger;
        return m_pInstance;
    }
private:
    Logger();
    Logger(Logger const&);
    Logger& operator=(Logger const&);
    static Logger* m_pInstance;
}; 
```

此代码不是线程安全的，因此调用`new Logger`可能会发生多次（在不同的线程中）。它还会泄漏`Logger`实例（因为它从未被删除），如果应该执行析构函数，这可能是一个问题。

**迈耶的单身人士**

```
class Logger
{
public:
    static Logger& Instance()
    {
        static Logger theLogger;
        return theLogger;
    }
private:
    Logger();
    Logger(Logger const&);
    Logger& operator=(Logger const&);
    ~Logger();
}; 
```

Meyer's Singleton 的问题确实是由于对象的破坏。从 main 返回后，所有全局变量的析构函数将按照构造这些全局变量¹的相反顺序运行。这就*好像*那些全局变量是在堆栈上构建的。

如果一个对象是在你的 Logger 之前构造的，并试图在它自己的析构函数中使用它；那么它将使用一个已经被破坏的对象，导致未定义的行为。

¹更准确地说，他们的构造函数以相反的顺序完成。

* * *

最简单的替代方法是重新访问*典型的 Singleton*：

```
class Logger {
public:
    static Logger& Instance() {
        static Logger* L = new Logger;
        return *L;
    }
private:
    ...
}; 
```

这现在是线程安全的，但仍然泄漏。但实际上这里需要泄漏，因为它保证该对象比任何其他将调用其析构函数的对象保持存活的时间更长。*警告：如果你在析构函数中有什么事情要做，它永远不会运行。*

还有其他变体，例如 Alexandrescu 的 Phoenix Singleton 会从灰烬中复活，如果您在它死后需要它；然而，在销毁过程中同时获得线程安全*和*安全行为是很难实现的。

# php - 编写自适应 PHP 方法？

> ID：15312266
> 
> 赞同：0
> 
> 时间：2013-03-09T15:14:31.843
> 
> 标签：php, class, design-patterns, methods

假设我有一个名为 Books 的课程。在该类中，我有一个方法可以获取一本书或几本书的标题、价格和类别。所以是这样的：

```
public function fetchRows () {
  $sql = $con->prepare("SELECT Title, Price, Category FROM Books");
  $sql->execute();
  return $sql->fetchAll();
} 
```

一切都很好，但是可以说我现在想获取另一行，`order`结果和`limit`返回的行数。为此编写另一种方法会起作用，但这会导致方法数量荒谬，而且这很混乱并且不符合 DRY 规则。我可以使用参数来自定义准备语句，然后我可能最终会在一个参数中编写整个查询，而且这似乎也不可靠和干净。

我的问题是我如何编写/构造方法/类来适应最终用户想要得到的东西？

抱歉，这真的不是针对特定问题的问题。我已经阅读了一些关于我的问题的材料，但是我很难将这种模式缠绕在我的脑海中，我希望有人可以提供一个解释或示例来帮助我理解这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T15:27:40.697

您是否考虑过使用位于数据库顶部的 ORM（对象关系映射器）？我强烈推荐 Doctrine 2 [http://www.doctrine-project.org](http://www.doctrine-project.org)。这样，您可以将数据库表中的行视为对象：所有数据库交互都被抽象出来（如果需要，您仍然可以直接运行 SQL 查询）。

如果您不熟悉 ORM 的概念，Doctrine 使您能够编写如下代码：

```
$user = new User();
$user->username = 'test';
$user->email = 'test@example.com';
$entityManager->persist($user);
$entityManager->flush(); 
```

您刚刚运行`INSERT INTO user (username, email) VALUES ('test', 'test@example.com');`而没有编写任何 SQL。

类似地，可以按如下方式检索用户：

`$user = $entityManager->getRepository('User')->findOneByUsername('test')`

`$user = $entityManager->getRepository('User')->findOneByEmail('test@example.com')`

这些查找器方法是根据用户表上存在的字段自动为您生成的，可帮助您保持代码 DRY。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-09T15:32:53.513

> 适应最终用户想要得到的东西？

你在这里进入摇摇欲坠的地方。您可能希望最终用户允许她访问数据库层，以便她可以准备查询。

否则你开始重新发明轮子。老实说，我怀疑你真的有那么多功能和那么多参数。

因此，这在很大程度上取决于您的最终用户。如果最终用户想做很多事情，请以源代码形式提供软件，以便最终用户可以根据需要修改软件。

在那之前，发布您的软件并从最终用户那里获得真正需要哪些功能的反馈。

也就是说，对于您的应用程序来说，ORM 可能只是一种无用的开销，但您只需要在 PDO 之上增加一些功能，例如延迟查询和稍后重命名列名的一些功能。

```
$result = PDOQuery::create('* FROM config')->limit(2);

$result->orderBy('`option`');

$result->aliasNames(['option' => 'name'], $removeOther = true);    

foreach ($result as $row) {
    print_r($row);
} 
```

这只是示例性的，代码只会将行提供为关联数组：

```
Array
(
    [name] => Insert Option 50e60ca17bdf4
)
Array
(
    [name] => Insert Option A 50e78a79ead49
) 
```

仅在涉及到 foreach 时执行（例如，您可以将其传递到视图中，如果视图不需要它，则永远不会执行数据库查询）。

您可以进一步扩展它，例如定义查询的所有内容都将成为您可以传递的查询定义。

您可以使迭代器成为堆叠迭代器，这样如果查询已被执行，您可以对结果应用限制，而不是再次运行查询。什么不是。

这实际上所做的只是根据您的需要增强 PDO 的接口，因此您需要自己编写该组件。

它也应该比上面示例代码中概述的更加解耦。

# jquery - 将easytabs jquery插件添加到wordpress

> ID：15312270
> 
> 赞同：0
> 
> 时间：2013-03-09T15:15:04.317
> 
> 标签：jquery, wordpress

我想将[http://os.alfajango.com/easytabs/](http://os.alfajango.com/easytabs/)添加到 TwentyTwelve 子主题我知道有一种“正确的方法”可以使用 wp_enqueue_script 将 jquery 插件添加到 Wordpress 并在子主题 functions.php 中添加操作

有人可以提供一步一步的指南来添加这个特定的插件，这样我就可以分析它并从中学习。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T16:00:59.980

您应该使用[`wp_register_script`](http://codex.wordpress.org/Function_Reference/wp_register_script)和[`wp_enqueue_script`](http://codex.wordpress.org/Function_Reference/wp_enqueue_script)。将文件添加到您的主题文件夹。

```
function include_jquery_easytabs(){
  wp_enqueue_script( 'jquery');
  wp_register_script( 'jq_easytabs', get_template_directory_uri() . 'PATH TO YOUR JS FILE' );
  wp_enqueue_script( 'jq_easytabs' );
}

add_action( 'wp_enqueue_scripts', 'include_jquery_easytabs' ); 
```

将以下剪辑添加到您`footer.php`的`</body>`标签之前或您`header.php`的`</head>`标签之前：

```
<script>
jQuery(document).ready(function($){
  $('your-target-element').easytabs();
});
</script> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-09T15:22:21.423

来自：[Wordpress 支持页面](http://wordpress.org/support/topic/installing-a-jquery-plugin-into-a-wordpress-install)

添加到**functions.php**

```
/** 
 *  if jQuery not been 
 *  added already
**/
wp_enqueue_script('jquery');

/**
 *  Register the script to Wordpress
**/
wp_register_script('easytabs','js/easytabs.js');

/** 
 * Add the Registered script to queue.
**/
wp_enqueue_script('easytabs'); 
```

`<head>`您可以通过在（`wp_head()`调用的地方）中查看您的 HTML 源代码来检查它是否有效。

将下面的代码段放在`jQuery(document).ready(function($){ /** Your code **/ });`添加中：

```
$('#container-name-for-tabs').easytabs(); 
```

# c# - 遍历以邻接矩阵表示的图

> ID：15312273
> 
> 赞同：4
> 
> 时间：2013-03-09T15:15:16.350
> 
> 标签：c#, matrix, traversal, depth-first-search, breadth-first-search

我想使用深度优先和广度优先方法来遍历图形。我以前在一个简单的节点列表上做过这个，但我从来没有用邻接矩阵尝试过，老实说，我什至不知道从哪里开始。

这是我的矩阵：

```
999999999 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 
1 999999999 0 3 1 0 0 0 0 0 0 0 0 0 0 0 
1 0 999999999 3 0 1 0 0 0 0 0 0 0 0 0 0 
0 3 3 999999999 0 0 0 8 0 0 0 0 0 0 0 0 
0 1 0 0 999999999 0 1 3 0 0 0 0 0 0 0 0 
0 0 1 0 0 999999999 0 3 1 0 0 0 0 0 0 0 
0 0 0 0 1 0 999999999 0 0 3 0 1 0 0 0 0 
0 0 0 8 3 3 0 999999999 0 8 8 0 3 0 0 0 
0 0 0 0 0 1 0 0 999999999 0 3 0 0 1 0 0 
0 0 0 0 0 0 3 8 0 999999999 0 0 0 0 3 0 
0 0 0 0 0 0 0 8 3 0 999999999 0 0 0 0 3 
0 0 0 0 0 0 1 0 0 0 0 999999999 0 0 1 0 
0 0 0 0 0 0 0 3 0 0 0 0 999999999 0 1 1 
0 0 0 0 0 0 0 0 1 0 0 0 0 999999999 0 1 
0 0 0 0 0 0 0 0 0 3 0 1 1 0 999999999 0 
0 0 0 0 0 0 0 0 0 0 3 0 1 1 0 999999999 
```

这是我创建此矩阵的方法（C#）：

```
private static int[,] CreateMatrix()
        {
            int A = 0;
            int B = 1;
            int C = 2;
            int D = 3;
            int E = 4;
            int F = 5;
            int G = 6;
            int H = 7;
            int I = 8;
            int J = 9;
            int K = 10;
            int L = 11;
            int M = 12;
            int N = 13;
            int O = 14;
            int P = 15;

            int[,] matrix = new int[16, 16];

            matrix[A, B] = 1;
            matrix[A, C] = 1;
            matrix[B, D] = 3;
            matrix[B, E] = 1;
            matrix[C, D] = 3;
            matrix[C, F] = 1;
            matrix[D, H] = 8;
            matrix[E, G] = 1;
            matrix[E, H] = 3;
            matrix[F, H] = 3;
            matrix[F, I] = 1;
            matrix[G, J] = 3;
            matrix[G, L] = 1;
            matrix[H, J] = 8;
            matrix[H, K] = 8;
            matrix[H, M] = 3;
            matrix[I, K] = 3;
            matrix[I, N] = 1;
            matrix[J, O] = 3;
            matrix[K, P] = 3;
            matrix[L, O] = 1;
            matrix[M, O] = 1;
            matrix[M, P] = 1;
            matrix[N, P] = 1;

            matrix[B, A] = 1;
            matrix[C, A] = 1;
            matrix[D, B] = 3;
            matrix[E, B] = 1;
            matrix[D, C] = 3;
            matrix[F, C] = 1;
            matrix[H, D] = 8;
            matrix[G, E] = 1;
            matrix[H, E] = 3;
            matrix[H, F] = 3;
            matrix[I, F] = 1;
            matrix[J, G] = 3;
            matrix[L, G] = 1;
            matrix[J, H] = 8;
            matrix[K, H] = 8;
            matrix[M, H] = 3;
            matrix[K, I] = 3;
            matrix[N, I] = 1;
            matrix[O, J] = 3;
            matrix[P, K] = 3;
            matrix[O, L] = 1;
            matrix[O, M] = 1;
            matrix[P, M] = 1;
            matrix[P, N] = 1;

            for (int i = 0; i < 16; i++)
            {
                for (int j = 0; j < 16; j++)
                {
                    if (matrix[i, j] == 0)
                        matrix[i, j] = 0;

                    if (i == j)
                        matrix[i, j] = 999999999;

                }
            }

            return matrix;
        } 
```

任何帮助，将不胜感激！！

该矩阵表示的图形：

![在此处输入图像描述](../Images/c62807a34a7747b339d67e55c1506bd7.png)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-09T16:13:22.517

计算机科学中的每一个问题，*除了一个之外，*都可以通过*添加更多抽象*来解决。

首先以最抽象的方式编写广度优先遍历：

```
void BreadthFirstTraversal(Graph graph, Vertex start)
{
    /* A miracle happens */
} 
```

我们有一种方法可以做我们想做的事。除了它还没有写出来。所以用*稍微少一点的抽象*来写它：

```
void BreadthFirstTraversal(Graph graph, Vertex start)
{
    /* make a queue of vertices */
    /* make a mark set of vertices */
    /* enqueue and mark start */
    /* while the queue is not empty */
        /* dequeue a vertext */
        /* enqueue and mark all the unmarked neighbours of the vertex */
} 
```

继续前进，移除越来越多的抽象。

```
void BreadthFirstTraversal(Graph graph, Vertex start)
{
    var queue = new VertexQueue();
    var markSet = new VertexMarkSet();
    queue.Enqueue(start);
    markSet.Add(start);
    while(queue.NotEmpty())
    {
        var vertex = queue.Dequeue();
        foreach(Vertex neighbour in graph.ListNeighbours(vertex))
        {
            if (!markSet.Contains(neighbour))
            {
                markSet.Add(neighbour);
                queue.Enqueue(neighbour);
            }
        }
     }
} 
```

好的，现在您已经有了一个适用于*任何图形*的算法，无论其内部表示是什么。所以你所要做的就是写`ListNeighbours(Vertex)`，你就完成了。（假设您已经知道如何编写队列和集合，或者愿意使用基类库附带的类型。）您将如何做到这一点？

你看到我在那里是如何使用抽象的了吗？我真的不在乎它是邻接矩阵还是邻接列表，我只关心图形为我提供了为我提供顶点邻居的服务。

`ListNeighbours(Vertex)`那么，在给定邻接矩阵 的情况下，您将如何编写？

两种可能的调查解决方案：

*   使`Graph.ListNeighbours(Vertex)`方法返回一个`List<Vertex>`. 构建列表并将其分发出去。

*   使其返回`IEnumerable<Vertex>`并使用`yield return`以产生一系列相邻顶点。

* * *

更新：好的，那么我们实际上如何从邻接矩阵中创建一系列邻居？

假设每个顶点都有编号，`Vertex`实际上也是如此`int`；传统上，这就是邻接矩阵的处理方式。我们想要接收一个顶点——一个整数——并返回一个顶点序列，这些顶点是它的邻居。

如果 vertex是 vertex 的邻居，我们有一个具有`array[i, j]`非零属性的数组。`j``i`

再次，开始抽象并朝着实现的方向努力：

```
public List<int> ListNeighbours(int vertex)
{
    /* a miracle happens */
} 
```

我们需要做什么才能让这个奇迹发生？

```
public List<int> ListNeighbours(int vertex)
{
    /* create a new list */
    /* for each vertex j in the graph */
        /* if j is a neighbour of i then add it to the list */
    /* return the list */
} 
```

或者，您可以使用`yield return`创建一个序列：

```
public IEnumerable<int> ListNeighbours(int vertex)
{
    /* for each vertex j in the graph */
        /* if j is a neighbour of i then yield return j */
} 
```

`yield return`迭代器往往更简单，但初学者程序员通常很难搞清楚控制流。 **尝试两种方式都写，看看效果如何。**

# java - 程序到接口 - 如何有效地访问调用类？

> ID：15312274
> 
> 赞同：1
> 
> 时间：2013-03-09T15:15:17.773
> 
> 标签：java, oop, interface, reference

我正在创建一个遗传算法框架，并且我有一个包含 a`Tournament`和一个`EvolutionStrategy`对象的人口类，以便我可以插入不同的锦标赛类型和进化策略。

目前我已经设置它，以便我通过从人口`EvolutionStrategy`中传入对象来创建一个新对象-`Population`

```
EvolutionStrategy strategy = new BasicStrategy(this); 
```

在`BasicStrategy`构造函数中我有

```
Population pop;
public BasicStrategy(Population pop)
{
    this.pop = pop;
} 
```

我对此有两个问题

1）这是否会创建正确的参考变量，从而可以立即访问人口更新，`EvolutionStrategy`或者我应该使用某种形式的同步？

2）有没有更好的方法来做到这一点？对我来说，在 中为策略提供`Population`一个参考变量，在`Strategy`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T16:38:55.203

1.  没事
2.  我认为您应该有一个额外的类，例如*EvolutionAlgorithm*，您可以在其中分别存储*Population*（就正在进化的对象而言）和*EvolutionStrategy*。当你想进化你的种群时，你只需调用以种群为参数的进化策略方法（策略模式）。我认为 EvolutionStartegy 不需要存储人口。没有进化策略，人口也有意义。

# java - java - 如何在java中只获取一次ArrayList的所有元素？

> ID：15312275
> 
> 赞同：0
> 
> 时间：2013-03-09T15:15:26.427
> 
> 标签：java, string, arraylist

如果我有一个包含“Cat”“Cat”“Dog”“Bee”“Dog”“Cat”的 ArrayList。

然后我怎样才能在java中生成一个包含每个元素的数组只包含一次？

我想最终拥有以下数组：

“猫”“狗”“蜜蜂”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T15:17:48.623

您可以`Set`为此使用 a：-

```
Set<String> uniqueElements = new HashSet<String>(myList); 
```

现在这`Set`将包含您的所有元素，`ArrayList`但没有**重复项**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T15:17:52.530

您应该将元素添加到[`Set`](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html)根据定义要求元素是唯一的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T15:18:54.383

`Set`包含独特的元素：

```
Set<String> set = new HashSet<String>(list); 
```

然后将其转换为`array`：

```
String[] array = set.toArray(new String[set.size()]); 
```

# bash - 使用 vim（或者可能是 shell）进行文本操作

> ID：15312276
> 
> 赞同：1
> 
> 时间：2013-03-09T15:15:27.880
> 
> 标签：bash, vim, join, scripting, awk

我有一个完整的文件，其中包含如下记录：

```
"Full name","URL-style name","key_1a","key_2a"
"Full name","URL-style name","key_1b","key_2b"
"Full name","URL-style name","key_1c","key_2c"
... 
```

我有另一个文件，里面有这样的记录：

```
"URL-style name","key_1a","key_2a"
"URL-style name","key_1b","key_2b"
"URL-style name","key_1c","key_2c"
... 
```

知道 ( `"key_1","key_2"`) 是主键（唯一），我想在第二个文件中添加该`"Full name"`列。

你会怎么做？我正在寻找带有`vim`或 in的解决方案`bash shell script`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T16:52:40.590

让我们对您的示例数据进行修改：

### 文件 1

```
"Full nameA","URL-style name","key_1a","key_2a"
"Full nameB","URL-style name","key_1b","key_2b"
"Full nameC","URL-style name","key_1c","key_2c" 
```

### 文件2

```
"URL-style name1","key_1a","key_2a"
"URL-style name2","key_1b","key_2b"
"URL-style name3","key_1c","key_2c" 
```

### 加工

如评论中所述，该命令的一个限制`join`是它只能连接单个列，但问题有一个包含两列的复合键。当然，有一些方法可以解决这个问题：基本上，您将输入重新格式化，`join`以便复合列可识别为使用的分隔符下的单个列，并且您必须确保每个文件中的数据按顺序正确排序复合柱。不过，`join`可能是这样做的方法；只需要一些准备工作和后处理。此外，Bash v4 具有“进程替换”，这对这个命令非常有用。

1.  `file1`使用我们需要的数据生成一个可连接的文件。

    做这件事有很多种方法; 两者`sed`（有点不可思议）或`awk`可以使用：

    ```
    $ sed 's/\([^,]*\),[^,]*,\([^,]*\),\([^,]*\)/\2:\3,\1/' file1
    "key_1a":"key_2a","Full nameA"
    "key_1b":"key_2b","Full nameB"
    "key_1c":"key_2c","Full nameC"
    $ awk -F, '{ printf "%s:%s,%s\n", $3, $4, $1 }' file1
    "key_1a":"key_2a","Full nameA"
    "key_1b":"key_2b","Full nameB"
    "key_1c":"key_2c","Full nameC"
    $ 
    ```

2.  `file2`使用我们需要的数据生成可连接文件：

    ```
    $ sed 's/\([^,]*\),\([^,]*\),\([^,]*\)/\2:\3,\1/' file2
    "key_1a":"key_2a","URL-style name1"
    "key_1b":"key_2b","URL-style name2"
    "key_1c":"key_2c","URL-style name3"
    $ awk -F, '{ printf "%s:%s,%s\n", $2, $3, $1 }' file2
    "key_1a":"key_2a","URL-style name1"
    "key_1b":"key_2b","URL-style name2"
    "key_1c":"key_2c","URL-style name3"
    $ 
    ```

3.  鉴于这种预处理，直接`sort`就足以让数据准备好`join`。

    ```
    $ join -t, -o 2.2,0,1.2 \
    >      <(awk -F, '{ printf "%s:%s,%s\n", $3, $4, $1 }' file1 | sort) \
    >      <(awk -F, '{ printf "%s:%s,%s\n", $2, $3, $1 }' file2 | sort)
    "URL-style name1","key_1a":"key_2a","Full nameA"
    "URL-style name2","key_1b":"key_2b","Full nameB"
    "URL-style name3","key_1c":"key_2c","Full nameC"
    $ 
    ```

4.  现在我们需要将冒号后处理成逗号：

    ```
    $ join -t, -o 2.2,0,1.2 \
    >      <(awk -F, '{ printf "%s:%s,%s\n", $3, $4, $1 }' file1 | sort) \
    >      <(awk -F, '{ printf "%s:%s,%s\n", $2, $3, $1 }' file2 | sort) |
    > sed 's/":"/","/'
    "URL-style name1","key_1a","key_2a","Full nameA"
    "URL-style name2","key_1b","key_2b","Full nameB"
    "URL-style name3","key_1c","key_2c","Full nameC"
    $ 
    ```

显然，您可以选择任何合适的字符而不是冒号；`Control-A`(0x01) 不太可能出现在您的 HTML 中。

这假定，如图所示，您的 CSV 数据在字符串中没有逗号。如果字符串中有逗号，那么生活会更加艰难；您需要一个合适的 CSV 解释器来处理数据。Perl 有[`Text::CSV`](http://search.cpan.org/perldoc?Text%3A%3ACSV)并且还有[`csvfix`](http://code.google.com/p/csvfix/).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T16:57:07.560

在`awk`：

```
$ awk -F, 'NR==FNR{a[$3$4]=$1;next}($2$3 in a){print a[$2$3]","$0}' file1 file2
"Full name","URL-style name","key_1a","key_2a"
"Full name","URL-style name","key_1b","key_2b"
"Full name","URL-style name","key_1c","key_2c" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T15:34:57.970

您正在搜索的命令是`join`.

请参阅[`man join`](http://linux.die.net/man/1/join)详细信息。

如果您遇到错误，例如`pfull.txt:6: is not sorted`您可以使用`sort`命令对输入文件进行排序，或者`--nocheck-order`尝试使用该选项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T18:20:04.277

如果您不必相互匹配条目，因为两个文件中的数据顺序相同：

**使用 Vim 视觉块模式。**

在 Vim 中的两个窗口中打开这两个文件（`:sp <filename>`或`:vsp <filename>`将对此有所帮助），使用 开始块选择所需的文本`CTRL``v`，使用 复制`y`。

使用 在窗口之间移动`CTRL``w``h j k l`，具体取决于您是否有垂直或水平拆分。

将光标放在要粘贴剪贴板数据的位置，按`p`。

# javascript - 如何选择活动层？

> ID：15312279
> 
> 赞同：2
> 
> 时间：2013-03-09T15:16:02.403
> 
> 标签：javascript, photoshop, photoshop-script

看来，为了调整层的大小，必须从 API 角度选择（从 UI 角度）并激活它。否则，我在任何不支持此函数的函数调用上都会出错。

所以在调整大小之前我做

```
var a = doc.artLayers.getByName("iPad");
app.activeDocument.activeLayer = a; 
```

这不会在视觉上改变选定的图层，因此调用 resize 函数之后会失败。让它工作的唯一方法是手动单击图层（任何图层），然后它就可以工作了。在没有用户交互的情况下调整图层大小的正确方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-11T12:35:51.663

你只需要修改你的代码：

```
var doc = app.activeDocument;
doc.activeLayer = doc.artLayers.getByName("iPad"); 
```

这会将活动层设置为名为“ipad”的层。这是选择图层（按名称）然后进一步处理图像的标准方法，在您的情况下调整它的大小。显然，我不知道 PSD 中还有什么可以选择或忽略的层。另一种方法是遍历所有层并处理它们。

这里有两个有用的功能：一个会选择图层蒙版有一个，另一个会取消选择图层蒙版并返回位图图层

```
// FUNCTION DESELECT LAYER MASK AND SELECT IMAGE LAYER
// --------------------------------------------------------
function deselectLayerMaskAndSelectImageLayer()
{
  // =======================================================
  var id248 = charIDToTypeID( "slct" );
  var desc48 = new ActionDescriptor();
  var id249 = charIDToTypeID( "null" );
  var ref36 = new ActionReference();
  var id250 = charIDToTypeID( "Chnl" );
  var id251 = charIDToTypeID( "Chnl" );
  var id252 = charIDToTypeID( "RGB " );
  ref36.putEnumerated( id250, id251, id252 );
  desc48.putReference( id249, ref36 );
  var id253 = charIDToTypeID( "MkVs" );
  desc48.putBoolean( id253, false );
  executeAction( id248, desc48, DialogModes.NO );
}

// FUNCTION SELECT MASK
// --------------------------------------------------------
function selectMask(LayerName)
{
  try
  {
    var desc = new ActionDescriptor();
    var ref = new ActionReference();
    ref.putEnumerated( charIDToTypeID('Chnl'), charIDToTypeID('Chnl'), charIDToTypeID('Msk ') );
    ref.putName( charIDToTypeID('Lyr '), LayerName );
    desc.putReference( charIDToTypeID('null'), ref );
    desc.putBoolean( charIDToTypeID('MkVs'), true );
    executeAction( charIDToTypeID('slct'), desc, DialogModes.NO );

    // =======================================================
    var id1083 = charIDToTypeID( "setd" );
    var desc238 = new ActionDescriptor();
    var id1084 = charIDToTypeID( "null" );
    var ref161 = new ActionReference();
    var id1085 = charIDToTypeID( "Chnl" );
    var id1086 = charIDToTypeID( "fsel" );
    ref161.putProperty( id1085, id1086 );
    desc238.putReference( id1084, ref161 );
    var id1087 = charIDToTypeID( "T   " );
    var ref162 = new ActionReference();
    var id1088 = charIDToTypeID( "Chnl" );
    var id1089 = charIDToTypeID( "Ordn" );
    var id1090 = charIDToTypeID( "Trgt" );
    ref162.putEnumerated( id1088, id1089, id1090 );
    desc238.putReference( id1087, ref162 );
    executeAction( id1083, desc238, DialogModes.NO );
  }
  catch(e)
  {
  //alert(e)
  //alert( "This layer has NO layer mask!" );
  activeDocument.selection.deselect();
  }
} //end function 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-17T10:01:28.233

您可以在extendscript 的数据浏览器视图中找到它：

```
var doc = app.activeDocument;

// set active layer
doc.activeLayer = doc.layers.getByName("Layer Name Here"); 
```

# javascript - JavaScript / Expressjs - app.del() 路由不起作用

> ID：15312282
> 
> 赞同：1
> 
> 时间：2013-03-09T15:16:25.703
> 
> 标签：javascript, express

我已将此 JavaScript 放入我的 HTML 代码中，以尝试`delete`向我的页面添加一个功能按钮。我已经测试了脚本是否可以识别单击并且确实可以，但是它没有通过我的删除路线，目前我只是在测试路线所以只在其中放置了一个简单的控制台日志但是在这里是代码。有任何想法吗？

```
script(type = 'text/javascript')
 $('#teamDelete').live('click', function () {
  var teamId = #{teamData.key};
  $.del('/team/' + teamId, function (response) {
    console.log(response);
  });
}); 
```

路线：

```
app.del('/team/:key', function(req, res) {
  util.log('Serving request for url [DEL] ' + req.route.path);
  util.log('success');
}); 
```

应用程序：

```
app.configure(function(){
  app.set('port', process.env.PORT || 3000);
  app.set('views', __dirname + '/views');
  app.enable('jsonp callback');
  app.set('view engine', 'jade');
  app.set('view options', {layout : false});
  app.use(express.bodyParser());
  app.use(express.cookieParser());
  app.use(express.session({
    secret : 'secretsecret'
  }));
  app.use(express.methodOverride());
  app.use(express.static(__dirname + '/public'));
  app.use(function(req, res, next){
    res.locals.session = req.session;
    next();
  });
  app.use(app.router);
}); 
```

/团队

```
 app.get('/team'/*, lim("Must be logged in to see teams")*/, getAllTeams, function(req, res){
    util.log('Serving request for url [GET] ' + req.route.path);
    // Pass it the list of all Teams
    res.render('team', {'teamsList' : req.teamsList} );
  });

  /**
    * POST /team
    * Save new Team
    */
  app.post('/team', function(req, res) {
    util.log('Serving request for url [POST] ' + req.route.path);

    // Output to console the contents of req.body
    // console.log('body: ', req.body);
    // console.log('body.teamForm: ', req.body.teamForm);
    // console.log('body.teamForm.name: ', req.body.teamForm.name);
    // console.log('body.teamForm.teamKey: ', req.body.teamForm.teamKey);

    // Get data from teamForm
    var teamForm = req.body.teamForm;

    // Save team in teamForm as new Team
    var name = teamForm.name;
    var team = new Team();
    team.name = name;

    // Save new Team to datbase
    team.save(function(err){
      var message = '';
      var retStatus = '';
      // No error - Successful Save
      if(!err){
        util.log('Successfully created new team: ' + name);
        message = 'Successfully created new team: ' + name;
        retStatus = 'success';
      } 
      // Error - Unsuccessful Save, show error
      else {
        util.log('Error while creating team: ' + name + ' error : ' + util.inspect(err));
        if(err.code === 11000){
          message = 'Team already exists';
        }
        retStatus = 'failure';
      }
      // Return whether the Save was successful
      res.json({
        'retStatus' : retStatus,
        'message' : message
      });
    });
  });

  /**
    * GET /team/:key
    * Get Team details by key
    */
  app.get('/team/:key', function(req, res) {
    util.log('Serving request for url [GET] ' + req.route.path);
    Team.findByKey(req.params.key, function(err, teamData){
      if(!err && teamData){
        teamData = teamData;
        res.render('teamDetails', { 'teamData' : teamData } );
      } else {
        util.log('Error in fetching Team by key : ' + req.params.key);
        res.json({
          'retStatus' : 'failure',
          'msg' : 'Error in fetching Team by key ' + req.params.key
        });
      }
    });
  });

  /**
    * DEL /team/:key
    * Delete Team by key
    */
  app.del('/team/:key', function(req, res) {
    util.log('Serving request for url [DEL] ' + req.route.path);

    util.log(req.params.key);

    Team.remove(req.params.key, function(err){
      var message = '';
      var retStatus = '';
      if (!err) {
        util.log('Successfully deleting Team with key: ' + req.params.key);
        message = 'Successfully deleting Team with key: ' + req.params.key;
        retStatus = 'Success';
      } else {
        util.log('Error deleting Team with key: ' + req.params.key + 'Error: ' + util.inspect(err));
        res.json({
          'retStatus' : 'failure',
          'msg' : 'Error in fetching Team with key ' + req.params.key
        });
      }
    });
  }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T15:29:58.500

`$.del()`不存在。您可以使用 生成删除请求`$.ajax`，但使用更安全`$.post()`：

```
$.post('/team/' + teamId, { _method : 'delete' }, function(response) {
  console.log(response);
}); 
```

为此，您还需要`methodOverride`在 Express 中使用中间件（*在*定义`app.del`路由之前）：

```
app.use(express.bodyParser()); // this has to come before the next line
app.use(express.methodOverride()); 
```

# c# - 从 Datepicker 在 Excel 中保存日期

> ID：15312285
> 
> 赞同：0
> 
> 时间：2013-03-09T15:16:52.083
> 
> 标签：c#, excel, date, time, datepicker

我正在尝试将 Windows 窗体上的 DatePicker 中的日期保存到现有的 Excel 电子表格中。

以下代码将 DatePicker 的 ShortDate 值分配给字符串：

```
if (checkupCheck.Checked)
            {
                newCheckupDate = checkupPicker.Value.Date.ToShortDateString();
            }
            else
            {
                newCheckupDate = null;
            } 
```

然后使用以下代码将该值放入数据网格中后保存：

```
for (int i = 0; i < dataGridView1.Rows.Count - 1; i++)
            {
                for (int k = 0; k < dataGridView1.Columns.Count; k++)
                {
                    worksheet.Cells[i + 2, k + 1] = dataGridView1.Rows[i].Cells[k].Value.ToString();
                }
            }
workbook.Save(); 
```

在断点处查看 newCheckupDate 字符串的值时，它显示为我想要的`"dd/mm/yyyy"`

但是，当将其保存到 Excel 中时，单元格将包含`"dd/mm/yyyy 00:00:00"`. 我不想添加时间。该单元格被格式化为日期单元格。

我有一种感觉，Excel可能是这里问题的原因，但我不知道如何解决它。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T16:14:06.573

无需深入研究原因，您可以简单地格式化循环中的单元格：

```
for (int i = 0; i < dataGridView1.Rows.Count - 1; i++)
{
    for (int k = 0; k < dataGridView1.Columns.Count; k++)
    {
        worksheet.Cells[i + 2, k + 1] = dataGridView1.Rows[i].Cells[k].Value.ToString();
        worksheet.Cells[i + 2, k + 1].NumberFormat = "dd/mm/yyyy"
    }
}

workbook.Save(); 
```

# python - 如何在 wx python 中检索位图按钮名称

> ID：15312287
> 
> 赞同：0
> 
> 时间：2013-03-09T15:17:18.557
> 
> 标签：python, wxpython, wxwidgets

这是我的代码。

```
 self.bid += 1
 name = "ct %d" % self.bid
 self.newct = wx.BitmapButton(self, -1, pic, pos = pos, size=(33,33), style = wx.NO_BORDER, name = name)
 dbox=wx.TextEntryDialog(None, "Enter the Value", 'Button Info', "")
    if dbox.ShowModal()==wx.ID_OK:
        value=dbox.GetValue()
 btdict = {'button id': self.bid, 'value': value}

 self.newct.SetToolTip(wx.ToolTip('ID: %d, Value: %d' %(self.bid, value))) 
```

之后如何找回名字？

我正在使用一个需要创建动态数量的位图按钮的工具，这些按钮可以在面板周围拖动。当我有多个按钮时，很难将一个与另一个区分开来，因此我希望为每个显示按钮名称的按钮添加一个工具提示。

另外我在这里收到错误“TypeError：%d 格式：需要一个数字，而不是 unicode”

```
self.newct.SetToolTip(wx.ToolTip('ID: %d, Value: %d' %(self.bid, value)) 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T11:09:54.780

要获取按钮的名称，只需使用`GetName()`方法。按钮的名称可以在构造函数（`wx.BitmapButton(self,..., name = someName)`）中设置，也可以在创建按钮后使用`SetName()`方法。在您的代码中，`value`似乎是按钮的新名称，因此您应该在获取`value`.

# java - Java 扩展 Thread 不起作用，但实现 Runnable 可以。我不明白为什么？

> ID：15312290
> 
> 赞同：1
> 
> 时间：2013-03-09T15:17:32.343
> 
> 标签：java, multithreading, extend, runnable

我不敢相信这给我带来了麻烦。我的测试`extend Thread`不起作用，我`implement Runnable`的。我与过去编写的工作线程代码进行了比较，看不出有什么问题。

有人可以指出我的菜鸟错误吗？

**不工作**

```
public class PrimeThread extends Thread
{
    long minPrime;

    public PrimeThread(long minPrime)
    {
        this.minPrime = minPrime;
    }

    public static void main(String[] args) 
    {
        PrimeThread p = new PrimeThread(11);
        p.start();
    }

    public void Run()
    {
        System.out.println("wtf");
    }
} 
```

**在职的**

```
public class PrimeRun implements Runnable
{
    long minPrime;
    public PrimeRun(long in)
    {
        minPrime=in;
    }
    public static void main(String[] args) 
    {
        PrimeRun p = new PrimeRun(143);       
        new Thread(p).start();
    }

    @Override
    public void run()
    {
        System.out.println("hello");
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T15:21:35.700

您的“运行”方法大写。所以这是一种不同的方法（即你没有覆盖“运行”）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T15:22:42.980

只需将您的方法名称编辑`run`为`Run`

# php - 如何在 PHP 中读取 Facebook JSON 结果

> ID：15312291
> 
> 赞同：0
> 
> 时间：2013-03-09T15:17:37.880
> 
> 标签：php, json, facebook-graph-api, request, file-get-contents

对不起 - 这会有点措辞不好。

我的代码`fbid`来自表格。我知道如何获取和显示由`file_get_contents()`.

```
<?php echo $_POST["fbid"]; ?>
<?php $x=$_POST['fbid'];?>
<?php echo file_get_contents("http://graph.facebook.com/" . $x); ?> 
```

请参阅下面的代码，这就是`file_get_contents()`显示的内容：

```
{
  "id": "4",
  "name": "Mark Zuckerberg",
  "first_name": "Mark",
  "last_name": "Zuckerberg",
  "link": "http:\/\/www.facebook.com\/zuck",
  "username": "zuck",
  "gender": "male",
  "locale": "en_US"
} 
```

如何回显字段`name`并`gender`从此字符串中回显？

```
Name: Their name 
Gender: Their gender 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T15:20:20.303

用于`json_decode()`解析数据。Facebook 图形搜索结果以 JSON 格式返回，因此您只需解析它们即可访问它们。

```
<?php

$data = file_get_contents("http://graph.facebook.com/" . $x);
$array = json_decode($data, true);

echo $array['name'];
echo $array['gender'];

?> 
```

看看[PHP 手册](http://php.net/manual/en/function.json-decode.php)。

# android - Air Android - 调整意图过滤器以接收来自其他应用程序的内容

> ID：15312297
> 
> 赞同：2
> 
> 时间：2013-03-09T15:18:01.397
> 
> 标签：android, android-intent, air

我想使用[Android 意图过滤器](http://developer.android.com/training/sharing/receive.html#handling-content)从 Air for Android 应用程序中的其他应用程序接收内容。我需要输入`.ui.MyActivity`什么？

这是来自Android文档：

> 当另一个应用程序试图通过构造一个意图并将其传递给 startActivity() 来共享这些内容时，您的应用程序将在意图选择器中列为一个选项。如果用户选择了您的应用程序，相应的活动（上例中的.ui.MyActivity）将被启动。然后由您在代码和 UI 中适当地处理内容。

```
<activity android:name=".ui.MyActivity" >
 <intent-filter>
        <action android:name="android.intent.action.SEND" />
        <category android:name="android.intent.category.DEFAULT" />
        <data android:mimeType="text/plain" />
    </intent-filter>
</activity> 
```

我正在使用 Adob​​e Air 3.6 和 Flash CS 6。谢谢。乌里

# jquery - Modernizr 加载和 cssanimations

> ID：15312298
> 
> 赞同：1
> 
> 时间：2013-03-09T15:18:03.793
> 
> 标签：jquery, modernizr

我有一个幻灯片，当代码直接添加到头部时效果很好，但在 Modernizr 加载功能中不起作用。

我希望同一页面根据浏览器加载所需的代码文件。我尝试同时使用 Modernizr cssanimations 和 !Modernizr cssanimations 无济于事。

这是带有注释的代码。请帮助 - 戈登。

```
css3 animations works in Safari
<!--link href="_css3/css3_SLIDEglobal.css" rel="stylesheet" type="text/css">
<script src="_css3/css3_QUERYdisclose.js"></script-->

jQuery works in old Firefox and Opera
<!--link href="_jQ/jQ_SLIDEglobal.css" rel="stylesheet" type="text/css">
<script src="_jQ/jQ_QUERYanimateDisclose.js"></script-->

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script src="modernizr-latest.js"></script> 
```

Modernizr 加载不，即！Modernizr，如问答中所推荐：

```
<script>
        Modernizr.load({
        test :        !Modernizr.cssanimations,
        yep :        ['_jQ/jQ_SLIDEglobal.css', '_jQ/jQ_QUERYanimateDisclose.js' ],
        nope  :      ['_css3/_css3_SLIDEglobal.css', '_css3/css3_QUERYdisclose.js']
                       });
        </script> 
```

Modernizr 加载与在其他网站上看到的一样：

```
<script>
        Modernizr.load({
        test :      Modernizr.cssanimations,
        yep  :      ['_css3/_css3_SLIDEglobal.css', '_css3/css3_QUERYdisclose.js'],
        nope :      ['_jQ/jQ_SLIDEglobal.css', '_jQ/jQ_QUERYanimateDisclose.js' ],
                       });
        </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:19:16.727

Vagrant extra li 潜伏在代码中。修复后，Modernizr.load 会按预期工作。有趣的是，当只加载一组样式表时，即使使用 li 页面也能正常工作。

# c++ - 我在进程中注入了一个dll，那么如何调用目标进程的函数呢？

> ID：15312306
> 
> 赞同：0
> 
> 时间：2013-03-09T15:19:15.260
> 
> 标签：c++, visual-studio, winapi, dll

我想知道是否可以从注入的 dll 调用目标进程的函数。如果是，该怎么做？

我是新手，所以欢迎任何建议/线索/参考。谢谢~

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T15:36:15.763

是的，它肯定是......您需要创建一个 API，它允许程序注册某种回调，这些回调可以被 DLL 中的逻辑访问。

# android - 自定义视图 Android 上的叠加视图

> ID：15312313
> 
> 赞同：0
> 
> 时间：2013-03-09T15:19:56.117
> 
> 标签：android, class, view

我正在为儿童编写 Phonics 游戏，我目前有一个活动类，它使用自定义视图类来显示字母的图片，但是我还需要在屏幕上实现按钮。我想知道如何将这些按钮放在视图类上，因为需要一个 XML 视图，但我不确定我将如何去做。

PhonicsActivity.java 类

```
public class PhonicsActivity extends Activity{

protected void onCreate (Bundle savedInstanceState){

    super.onCreate(savedInstanceState);

    View view = new PhonicsView(this);
    setContentView(view);

} 
```

PhonicsView.java 类

```
public class PhonicsView extends View {

public PhonicsView(Context context) {
    super(context);
    // TODO Auto-generated constructor stub
}

protected void onDraw(Canvas canvas) {

    drawLetterA(canvas);

} 
```

基本上我将如何获得下一个字母、上一个字母和菜单的按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T15:26:36.457

您可以使用接收 XML 布局元素

```
Button button = (Button)findViewById(R.id.button)
yourView.addView(button); 
```

如果您想以编程方式执行此操作。

```
Button button = new Button(this);
button.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
yourView.addView(button); 
```

# java - Java Swing 对话框按钮和图标

> ID：15312314
> 
> 赞同：0
> 
> 时间：2013-03-09T15:20:00.250
> 
> 标签：java, swing, button, dialog, icons

我目前正在学习 Java，并且正在上一堂教授对话框的课程。目前我知道如何更改图标选项，但如何添加一些按钮？

```
JOptionPane.showMessageDialog(null, "Text to display", "Title", JOptionPane.WARNING_MESSAGE); 
```

^ 显示应有的警告错误和确定按钮，但我还想有一个取消按钮

很遗憾

```
JOptionPane.showMessageDialog(null, "Text to display", "Title", JOptionPane.WARNING_MESSAGE, JOptionPane.OK_CANCEL_OPTION); 
```

返回错误。基本上，因为我是初学者，所以我不知道在哪里放置 ok_cancel_option 部分。谢谢 ！:D

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T15:26:04.327

```
JOptionPane.showConfirmDialog(parent, 
                              "message", 
                              "title", 
                              JOptionPane.YES_NO_OPTION); 
```

`showMessageDialog()`如果您想要一个必须使用的确认对话框，则用于警报，`showConfirmDialog()`如上所示

PS：忘了说`showConfirmDialog()`返回结果

```
int result = JOptionPane.showConfirmDialog(parent, 
                                           "message", 
                                           "title", 
                                            JOptionPane.YES_NO_OPTION);

if (result == JOptionPane.YES_OPTION){
     //stuff to do if yes
}
if (result == JOptionPane.NO_OPTION){
     //stuff to do if no
} 
```

# c# - 在服务器上调用任务的正确方法

> ID：15312315
> 
> 赞同：0
> 
> 时间：2013-03-09T15:20:02.020
> 
> 标签：c#, service

我正在编写一个 C# 应用程序来自动化几个常见的服务器管理任务，而我想要自动化的任务之一是关闭或重新启动服务器（因为许多其他应用程序必须按特定顺序停止，这很痛苦）。

在服务器上调用任务的最佳方式是什么？服务器和服务关闭的安全方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T15:27:09.360

Use `shutdown.exe` of Windows.

```
using System.Diagnostics;

Process.Start("shutdown","-s -t 10"); 
```

# php - 制作 pdo 包装器

> ID：15312317
> 
> 赞同：0
> 
> 时间：2013-03-09T15:20:05.307
> 
> 标签：php, pdo

使用 PDO，您可以连接到不同的驱动程序、MySQL、SQLITE 等。我想知道在我的包装器上实现它的好方法是什么。

我的第一个想法是创建一个工厂模式来创建 PDO 对象（取决于指定的驱动程序），然后简单地将 PDO 对象注入到包装器中。

像这样的东西：

```
<?php

class db
{
    private $db;

    public function __construct(PDO $db) {
        $this->db = $db;
        ...
    }
}

class factory {
    public function create($driver = 'mysql')
    {
        switch ($driver) {
        ...
        }
    }
} 
```

关于使包装器尽可能灵活和可重用的任何更好的建议？还是我提出的解决方案是一个好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T15:39:20.430

您的 CRUD 命令需要根据您的数据库而有所不同，MySQL 和 SQLITE 在创建/更改表、行替换和行更新的方式上存在细微差别。如果将它们包含在同一个文件中，请注意不要向 MySQL 和 SQLITE 发送相同的命令。

# ajax - Ext.grid.Panel 未从 Ext.data.Store 加载数据

> ID：15312320
> 
> 赞同：1
> 
> 时间：2013-03-09T15:20:15.693
> 
> 标签：ajax, extjs4.1

我正在尝试使用以下代码从商店填充 ExtJS 网格面板：

应用程序.js

```
Ext.define('UC', {
    extend: 'Ext.data.Model',
    fields: ['PMNumber']
});

var ds = Ext.create('Ext.data.Store', {
    storeID :'s',
    model: 'UC',
    proxy: {
        type:'ajax',
        url:'data.php',
        reader: {
            type : 'json',      
            root: "myInventory",
            fields: [
                {name: 'PMNumber', type: 'int', mapping: 'PMNumber'},
            ]
        }
    }
});

Ext.onReady(function() 
{
    ds.load();
    Ext.create('Ext.grid.Panel', {
        title: 'Attendanace',
        store: Ext.data.StoreManager.lookup('s'),
        columns: [
            { int: 'PMNumber',  dataIndex: 'PMNumber' }
        ],
        height: 200,
        width: 400,
        renderTo: document.getElementById('aa')
    });
}); 
```

data.php 在单独调用时以 JSON 格式返回以下数据

```
{"myInventory":[{"PMNumber":"2003010001"},{"PMNumber":"2003010002"}]} 
```

有人我在哪里失踪吗？

谢谢

# javascript - Knockout-Kendo Grid 中的服务器分页绑定到视图模型中的本地（服务器填充）ko.observableArray 属性

> ID：15312324
> 
> 赞同：2
> 
> 时间：2013-03-09T15:20:34.363
> 
> 标签：javascript, knockout.js, kendo-ui, single-page-application, kendo-grid

我正在为我的 js + HTML5 SPA 使用[Knockout-Kendo.js](http://rniemeyer.github.com/knockout-kendo/index.html)库。在我的视图模型中，我有一个`myItems`Knockout Observable Array。我有一个客户端存储库，负责从服务器获取数据并保存它。我希望能够`myItems`根据对 API 的 POST 请求填写我的视图模型，该 API 将过滤器对象（包含过滤器和分页信息）发送到服务器并返回过滤项目的列表。

*   据我所知，Knockout-Kendo 不支持 Kendo Grid DataSource。我应该通过它的`data`属性 instesd设置源`dataSource`。我对吗？如果是，我能达到下面问题中的要求吗？
*   如何设置网格的选项，以便为服务器分页设置结果总数、页码、顶部、跳过等？（例如，我应该能够根据单击的 Kendo Grid 的页码在视图模型中设置我的过滤器对象，并将其与我的 POST 请求一起发送到服务器。）
*   此外，为了能够获得分页项目的总数，我应该以如下格式从服务器接收 JSON 数据：`{total: 675, data: {some JSON array containing items for the current page}}`还是有其他方法可以实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T16:25:42.107

如果您需要在 Knockout-Kendo 中实际使用数据源，您实际上可以直接使用。如果您使用`data`false 或指定选项，然后也`{}`指定`dataSource`选项，那么它将使用它。

例如，您可以像这样绑定它：

```
<div data-bind="kendoGrid: gridOptions"></div> 
```

使用视图模型：

```
var grid = {
  data: false,
  dataSource: {
    type: "odata",
    transport: {
      read: "http://demos.kendoui.com/service/Northwind.svc/Orders"
    },
    schema: {
      model: {
        fields: {
          OrderID: {
            type: "number"
          },
          Freight: {
            type: "number"
          },
          ShipName: {
            type: "string"
          },
          OrderDate: {
            type: "date"
          },
          ShipCity: {
            type: "string"
          }
        }
      }
    },
    pageSize: 50,
    serverPaging: true,
    serverFiltering: true,
    serverSorting: true
  },
  height: 250,
  sortable: true,
  pageable: true,
  columns: [{
    field: "OrderID",
    filterable: false
  },
    "Freight", {
    field: "OrderDate",
    title: "Order Date",
    width: 100,
    format: "{0:MM/dd/yyyy}"
  }, {
    field: "ShipName",
    title: "Ship Name",
    width: 200
  }, {
    field: "ShipCity",
    title: "Ship City"
  }]
};

ko.applyBindings({
  gridOptions: grid
}); 
```

示例：http: [//jsfiddle.net/rniemeyer/shwrb/](http://jsfiddle.net/rniemeyer/shwrb/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-02T11:15:20.703

dataSource: { pageSize: 20 } 像这样指定....如果你只提到 pageSize: 20 这样的，它不起作用

# database - 数据库：大量外键

> ID：15312325
> 
> 赞同：1
> 
> 时间：2013-03-09T15:20:50.117
> 
> 标签：database, database-design, foreign-keys, primary-key, foreign-key-relationship

我有一个关于 gps 系统的 mysql 数据库。它有大约70张桌子。

其中一张表称为**车辆**，它只有一列包含车辆的 ID，并且它是主键。

其余表包含一个名为*vehicleId*的列，它们都是外键。

我开始担心有这么多外键只指向一张表是否正常。

实际上这是我的问题：**70 个外键只指向一个主键是否正确？**

PS 有些关系是一对一的，有些是一对多的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T15:24:51.403

你引用的问题并不一定意味着你有问题，但这并不意味着这是一个好的设计。

有什么选择？在 70 个表格中复制该车辆信息？这对我来说听起来不是一个好主意。

我不理解只有 ID 的单列车辆表。需要的车辆是否没有有意义的属性？车辆识别号？制作？模型？年？车库地址？我不喜欢这种声音。我会仅在此基础上质疑您的其余设计。

70张桌子*不是*一个大数目。

你的问题到底是什么？您是否发现由于过多的 JOIN 导致性能问题？一个 JOIN 中的七个或更少的表是通常的经验法则。

我担心每张桌子都以这种方式耦合。它与过于耦合的对象模型具有相同的问题。您没有就您的问题提供足够的详细信息来说明您为什么来到这个地方，但我希望有一个更好的设计来拥有自然相关的表集群。与每个人交谈的每个人都觉得它可能是一张大桌子。一点都不好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T15:34:12.630

首先，我假设您正在使用某种关系数据库管理系统，可能是 SQL 系统。

如果“现实世界”中的关系是正确的，即 70 个表中的每一个表中的每一行确实包含与一辆车有关的信息，那么这样做本身并没有错，尽管人们通常希望找到更多比“车辆”表中的单个主键值。

从纯粹的数据库[规范化](http://en.wikipedia.org/wiki/Database_normalization)的角度来看，有人可能会争辩说，在涉及一对一表映射的情况下，每个表的列都可以移动到“车辆”表中。但是，如果您在其他一对一表中有大量列（假设任何人有兴趣直接查看表......它可能无论如何，所有这些都被您的应用程序的前端抽象出来，或者您可以通过使用简单的查询有选择地检查具有大量列的单个表）。

再说一次，有时有很好的性能原因来选择性地对数据库的部分进行[非规范化。](http://en.wikipedia.org/wiki/Denormalization)

这完全取决于您要实现的目标。对规范化和非规范化有很好的理论理解可能是一个很好的起点。

我通常采用的方法是，对于 RDBMS，我默认进行标准化，除非有充分的理由不这样做。在将非规范化作为提高性能的一种选择之前，我会先正确地索引并构建查询。

我认为，就您而言，根据所提供的信息，我想将列从一对一表格移到“车辆”表格上。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-09T16:17:59.360

如果您有一个良好的 ER 模型，可以识别管理要存储在数据库中的所有值的实体、关系和属性。为每个实体创建一个表，其中包含一个标识列，该列对实体的每个实例具有唯一值。

为关系添加外键。对于多对多关系，添加表以保存外键对（或三元组等）。对于一对一关系，请考虑将两个实体表合并为一个。如果关系是可选的，您可能希望将表分开，但使用以下标签中概述的技术： [shared-primary-key](/questions/tagged/shared-primary-key "显示标记为“共享主键”的问题")

如果这会产生一个像您所拥有的那样的数据库模式，那么对于大多数目的来说它可能已经足够好了。如果没有，请考虑更改您的架构。

# clojure - Noir css无法加载？

> ID：15312327
> 
> 赞同：0
> 
> 时间：2013-03-09T15:20:55.430
> 
> 标签：clojure, noir

我发现我无法在黑色应用程序中加载 css。也不能改css源文件，是不是路由有什么问题？

```
(ns my-web.views.common
  (:use noir.core
        hiccup.core
        hiccup.page-helpers
        ))

(defpartial layout [& content]
            (html5
              [:head
               [:title "website from noir"]
               (include-css "/css/reset.css")]
              [:body
               [:div#idnumber content]])) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T13:24:05.510

你在哪里保存CSS？这将假设 css 位于`/resources/public/css/reset.css`.

如果您熟悉 Rails 和资产管道，您应该看看 Dieter ( [https://github.com/edgecase/dieter](https://github.com/edgecase/dieter) )。

# jquery - Google Map 未在 div 液体布局中显示

> ID：15312328
> 
> 赞同：-1
> 
> 时间：2013-03-09T15:21:03.533
> 
> 标签：jquery, ajax, google-maps, html

我正在尝试在具有液体布局的页面内加载谷歌地图。

这是我的**index.php**页面的 CSS：

```
html, body {
    margin: 0;
    height: 100%;
    width: 100%;
    overflow: hidden;
    position: fixed;
    font: normal 13px/150% Arial, Helvetica, sans-serif;
}
#div1 {
    width: 50%;
    height: 50%;
    float: left;
    background: #DDD;
    overflow: scroll;
}
#div2 {
    width: 50%;
    height: 100%;
    float: right;
    background: #AAA;
    overflow: scroll;
}
#div3 {
    width: 50%;
    height: 50%;
    float: left;
    background: #777;
    overflow: scroll;
} 
```

我的地图包含在另一个页面**map.php**下面是我的 map.php 页面的内容：

```
<html>
<head>
    <style type="text/css">
        html { width: 100%; height: 100%; }
        body { width: 100%; height: 100%; margin: 0; padding: 0; border: 0; }
        #map { width: 100%; height: 100%; border: 0px; padding: 0px; }
    </style>

    <script src="http://maps.google.com/maps/api/js?v=3&sensor=false" type="text/javascript"></script>
    <script type="text/javascript">
      // google map code
    </script>
</head>

<body onload="initMap()">
    <div id="map"></div>
</body> 
```

当我从 map.php 打开地图时，它工作得很好。但是当我尝试在index.php 的**div#2**中加载它时，我看到的只是一个灰色区域。

我不知道是什么导致了问题。非常感谢您的帮助。谢谢！

编辑：

```
<?php
    // include db connect class
    require_once 'db_connect.php';

    // connecting to db
    $db = new DB_CONNECT();
?>

        <script src="http://maps.google.com/maps/api/js?v=3&sensor=false" type="text/javascript"></script>
        <script type="text/javascript">
            // google map code with a query inside
        </script>

        <div id="map"></div> 
```

地图仍然没有显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T15:40:53.273

问题就在这里...

```
<body onload="initMap()"> 
```

`body.onload`如果该页面是通过加载的，您将不会收到此事件`ajax`。 仅在加载或刷新`body.onload`原始页面 ( ) 时触发一次。`index.php`加载到此页面的任何内容`ajax`都不会获得另一个`body.onload`事件。`ajax`（这是在不刷新页面的情况下加载内容的要点之一。）

为了解决这个问题，利用[回调`.load()`函数](http://api.jquery.com/load/)......加载完成*后*它会触发。`ajax`

```
$("#div2").load('map.php', function() {
    // put init inside the callback
    initMap();
}); 
```

我还将重新考虑 HTML，`map.php`这样您就不会在`index.php`. 换句话说，`<html></html>`您不能`<head></head>`在.`<body></body>``<div>`

将您的 CSS 移动到您的全局 CSS 文件或`head`of `index.php`，您的`map.php`页面应*仅*包含以下内容：

```
<script src="http://maps.google.com/maps/api/js?v=3&sensor=false" type="text/javascript"></script>
<script type="text/javascript">
    // google map code
    function initMap() { // etc.
        ....
</script>
<div id="map"></div> 
```

# data-structures - 使用线性探针将行中的3个键插入哈希，第4个元素的概率是多少需要3个探针

> ID：15312329
> 
> 赞同：0
> 
> 时间：2013-03-09T15:21:18.517
> 
> 标签：data-structures, hash, hashtable, probability, hashcode

使用线性探针将行中的 3 个键插入哈希中，第 4 个元素需要 3 个探针的概率是多少？，我得到 12/n^3，因为在插入第一个元素后，您可以为第二个元素插入 3 个位置（第一个元素的左边，第一个元素，第一个元素的右边），即 3/n。第三个元素你有 4 个地方可以插入以使它们连续，所以 4/n 和最后的第 4 个元素必须插入到第一个元素的散列中，所以 1/n。概率是 3/n *4/n *1/n =12/n^3 还是只是 12/n^2 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T20:25:05.987

我认为您错过了前两个元素不相邻但第三个元素填补空白的（一对）案例。数学是相似的，虽然 3/n*4/n + 2/n*2/n = 16/n^2 得到三个相邻的，然后 1/n 的几率击中第一个得到 16/n^3。

# java - 安装错误：INSTALL_PARSE_FAILED_BAD_SHARED_USER_ID

> ID：15312330
> 
> 赞同：1
> 
> 时间：2013-03-09T15:21:19.397
> 
> 标签：java, android, xml, eclipse

```
Configuration : Eclipse for Android Developper - jre1.7 - Windows 8 (:s) - 
```

我正在开发一个小应用程序，其中列出了 android 设备上存在/安装的所有应用程序。但是在尝试运行代码时出现以下错误。

```
[2013-03-09 16:10:34 - XXX] Installation error: INSTALL_PARSE_FAILED_BAD_SHARED_USER_ID
[2013-03-09 16:10:34 - XXX] Please check logcat output for more details.
[2013-03-09 16:10:34 - XXX] Launch canceled! 
```

请任何人都可以帮我解决这个错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-03-05T10:08:48.090

这可能是由于您的`sharedUserId`值是不允许的值。它必须具有与包结构相同的格式（例如`com.android`）。

# html - Safari 将内联呈现为块，其中 :before 和 :after 伪元素为 display:table-row

> ID：15312334
> 
> 赞同：1
> 
> 时间：2013-03-09T15:21:33.447
> 
> 标签：html, css, safari

我在 Safari 5.1.7（在 Windows 上）上进行测试，令人惊讶的是我在 Chrome 中没有遇到同样的问题。也适用于 FF19 和 IE9。

我正在尝试在`<span>`. 它可以工作，但是一旦我`<span>`包含其他内联元素，它们就会在单独的行中分解。

这是代码：

```
.c { display: inline-table; vertical-align: middle; }
.c:before { content: 'above'; display: table-header-group; }
.c:after { content: 'below'; display: table-footer-group; } 
```

工作正常： ，`<span class="c">word</span>`呈现为
以下
文字

不起作用：`<span class="c"><b>word1</b><b>word2</b></span>`，呈现为
上面
**word1**
**word2**
下面

而不是（在所有其他浏览器中）：
上面
**word1** **word2**
下面

这是一个演示：http: [//jsfiddle.net/3LuHx/11/](http://jsfiddle.net/3LuHx/11/)

我试过了

*   `table-row`而不是`table-header-group`/ `table-footer-group`，
*   将`<b>`' 明确标记为`inline !important`,
*   将`<b>`'s 标记为`display:inline-block`+ `float:left`,
*   设置`.c`为`white-space:nobreak`,

但结果都是一样的。

如果我将 ' 包装在另一个中并将其设置为，它*确实*有效，但由于and首先使我的 DOM 脚本编写变得更加容易，我宁愿不引入任何新元素。`<b>``<span>``display:table-row``:before``:after`

以前有没有人遇到过这个问题并提出解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T05:22:02.260

好吧，我最终插入了一个额外`span`的`display: table-row`-- 似乎是解决这个问题的唯一方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-16T08:40:51.907

我只是通过添加`float: left`元素来解决这个问题。希望有帮助！

# database - 支持网络共享的 Delphi 嵌入式数据库

> ID：15312337
> 
> 赞同：0
> 
> 时间：2013-03-09T15:21:57.603
> 
> 标签：database, delphi, networking, embedded-database

我不知道我是否在做正确的问题，但情况就是这样：

我需要开发一个将连接到数据库的应用程序。这个相同的应用程序将在同一网络上的两台计算机上使用（我将调用 PC1 和 PC2）。数据库位于 PC1 上。PC2 应用程序应该访问 PC1 上的数据库，因此两者可以共享同一个数据库。

我想使用嵌入式数据库，无需在计算机中安装我自己的应用程序之外的任何东西。

有什么更好的方法呢？我应该使用什么数据库？

谢谢你。

# memory - 在 C 中将内存打印为 1 字节十六进制

> ID：15312340
> 
> 赞同：3
> 
> 时间：2013-03-09T15:22:10.627
> 
> 标签：memory, printing, hex

你能帮我解决以下C问题吗？我正在尝试打印从某个内存地址开始的 30 个连续值的列表。我想在每个内存位置打印 1 个字节作为十六进制。作为要插入哪个内存地址的指示，我在程序开始时打印了一个虚拟的地址。

问题是我得到的值超过 1 个字节。对于长的零序列，这仍然会导致 00，但是一旦出现非零值，我就会得到一个 4 字节“窗口”的打印。这将产生以下输出：

```
Main function address is 0x8048494 
Dummy variable address is 0x9a2e008 
Enter the address (without the 0x):9a2e008
You entered: 9a2e008 
Address     Byte value 
0x9a2e008   00 
0x9a2e009   00 
0x9a2e00a   00 
0x9a2e00b   00 
0x9a2e00c   00 
0x9a2e00d   00 
0x9a2e00e   00 
0x9a2e00f   00 
0x9a2e010   00 
0x9a2e011   f1000000 
0x9a2e012   ff10000     
0x9a2e013   20ff100 
0x9a2e014   20ff1 
0x9a2e015   3900020f 
0x9a2e016   61390002 
0x9a2e017   32613900 
0x9a2e018   65326139 
0x9a2e019   30653261 
0x9a2e01a   30306532 
0x9a2e01b   38303065 
0x9a2e01c   383030 
0x9a2e01d   3830 
0x9a2e01e   38 
0x9a2e01f   00 
0x9a2e020   00 
0x9a2e021   00 
0x9a2e022   00 
0x9a2e023   00 
0x9a2e024   00 
0x9a2e025   00 
```

到目前为止，我的代码是：

```
#include <assert.h>
#include <stdio.h>
#include <stdlib.h>

#define NUMBER_OF_BYTES 10

void showAddresses(void);
void printMemoryAtAddress(void);

int * dummy;                                    
int dumpSize = 30;                                          

int main(void)
{
    dummy = (int *) malloc     (sizeof(int));                                       showAddresses();                                        
    printMemoryAtAddress();
    return 0;
}

void showAddresses(void)
{
    printf("Main function address is %p \n", main);
    printf("Dummy variable address is %p \n",(void*)dummy);
}

void printMemoryAtAddress(void)
{
    int input;
    printf("Enter the address (without the 0x):");
    scanf("%x", &input);
    printf("You entered: %x \n", input);
    printf("Address \tByte value \n");

    int i;
    for(i=0;i<dumpSize;i++)
    {
        int* address;
        address = (int*) (input+i);
        printf("%p \t", address);   
        printf("%.2x \n", *address);                                        
    }
} 
```

任何有关此问题的帮助将不胜感激！如果这个问题很愚蠢，我很抱歉。（我仍在学习，经过数小时的尝试似乎无法找到解决方案！）乔

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-09T15:27:03.570

你的问题在这里：

```
void printMemoryAtAddress(void)
{
    int input;
    printf("Enter the address (without the 0x):");
    scanf("%x", &input);
    printf("You entered: %x \n", input);
    printf("Address \tByte value \n");

    int i;
    for(i=0;i<dumpSize;i++)
    {
        int* address;
        address = (int*) (input+i);
        printf("%p \t", address);   
        printf("%.2x \n", *address);                                        
    }
} 
```

**地址**应该是无符号字符* 而不是 int*。作为一个 int* 它读取内存，就好像它是一个整数，你希望它被读取为一个只有一个字节的 char。

祝你好运！

# python - 如何在 Python 中使用新的 Twitter API 1.1 搜索？

> ID：15312341
> 
> 赞同：3
> 
> 时间：2013-03-09T15:22:18.413
> 
> 标签：python, django, json, api, twitter

众所周知，Twitter 正在过渡到新的 API (1.1)，而旧的 API (1.0) 面临停电并最终终止。

我正在使用 Python/ [Django](http://en.wikipedia.org/wiki/Django_%28web_framework%29)开展一个小组项目，似乎没有一个大型 Python Twitter 库使用 API 1.1。我可以直接与 API 交互而不使用 Python 接口，但由于需要使用[OAuth](http://en.wikipedia.org/wiki/OAuth)登录，我遇到了问题。

所以我有两个问题。

1.  是否有支持 Twitter API 1.1 的 Python 库？

2.  如果我们直接与以下 URL 中的新 API 交互，考虑到我们需要使用 OAuth 登录，我们如何让它工作？

    网址：`https://api.twitter.com/1.1/search/tweets.json?q=#freebandnames&since_id=24012619984051000&max_id=250126199840518145&result_type=mixed&count=4`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T03:56:29.783

Twitter 模块有效。您可以使用它要求 Twitter 进行身份验证、访问 Twitter 网站、输入用户名和密码，并将令牌保存在您的计算机上。

我使用此代码搜索 Twitter 状态（实时搜索与标准 Twitter 搜索有点不同）。

### 代码：

```
# -*- coding: utf-8 -*-

import os
import twitter
import json
import csv

from twitter.oauth import write_token_file, read_token_file
from twitter.oauth_dance import oauth_dance

def login():
    # Go to http://twitter.com/apps/new to create an app and get these items.
    # See also http://dev.twitter.com/pages/oauth_single_token.

    APP_NAME = 'xxx'
    CONSUMER_KEY = 'xxx'
    CONSUMER_SECRET = 'xxx'
    TOKEN_FILE = '/token.txt'

    try:
        (oauth_token, oauth_token_secret) = read_token_file(TOKEN_FILE)
    except IOError, e:
        (oauth_token, oauth_token_secret) = oauth_dance(APP_NAME, CONSUMER_KEY,
                CONSUMER_SECRET)
        print e.errno
        print e

        if not os.path.isdir('out'):
            os.mkdir('out')

        write_token_file(TOKEN_FILE, oauth_token, oauth_token_secret)

    auth=twitter.oauth.OAuth(oauth_token, oauth_token_secret,CONSUMER_KEY, CONSUMER_SECRET)
    return twitter.TwitterStream(auth = auth, secure = True)

if __name__=="__main__":
    t = login()
    res = t.statuses.filter(track = "search text")

    res_list = []
    tweetfields = set()
    for r in res:
        if len(res_list)<100:
            print len(res_list)
            res_list.append(r)
            tweetfields = tweetfields.union(r.keys())
        else:
            break

    fname = '/results.csv'
    f = open(fname,'w')
    dw = csv.DictWriter(f,fieldnames=list(tweetfields))
    dw.writeheader()

    for r in res_list:
        dw.writerow({k:v.encode('utf8') if isinstance(v,unicode) else v for k,v in r.items()})
    f.close()

    print [result['text'] for result in res_list] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T15:42:39.183

如果我们直接与新的 API 接口如下，考虑到我们需要使用 OAuth 登录，我们如何让它工作？

```
>>> import twitter
>>> client = twitter.Api(username='yourusername', password='yourpassword')
>>> update = client.PostUpdate('The Twitter API is easy') 
```

# .net - 从应用程序内部执行 procdump 以创建应用程序本身的转储

> ID：15312343
> 
> 赞同：1
> 
> 时间：2013-03-09T15:22:22.027
> 
> 标签：.net, visual-studio-2010, procdump

我正在尝试让我的应用程序（针对框架 .NET 4.0 编译的 VB.NET）编写自身的进程转储以帮助我进行调试。为此，我正在使用 Sysinternals 的 Procdump。

首先，我只需在单击事件上执行以下代码（因此调用堆栈上应该有可识别的内容）：

```
Dim p As New Process
p.StartInfo.FileName = "C:\procdump.exe"
p.StartInfo.Arguments = "-accepteula -ma " & Process.GetCurrentProcess.Id
p.Start()
p.WaitForExit()
p.Dispose()       ' Breakpoint 
```

最后一行也是一个断点。

要创建转储，我在 VS 2010 中以调试模式启动应用程序，单击按钮以执行此代码，当它遇到断点时，我知道转储已被写入。此时，我还使用 Visual Studio 创建了另一个转储文件（Debug -> Save Dump As..）。

这给我留下了两个大小大致相等（400 Mb）的转储文件，一个由 Procdump.exe 创建，一个由 Visual Studio 创建。在不触及任何已构建的代码的情况下，我现在打开两个转储文件（在构建代码打开的情况下，我按 Ctrl+O）并在符号文件夹选项中指定调试输出文件夹。

现在，当我在 Visual Studio 创建的转储上单击“混合调试”时，我得到一个调用堆栈（在主线程上），其中包含可识别的方法名称，并且调试器将它很好地定位在源代码中的断点位置曾是。

但是，当我在 Procdump 创建的转储上单击“混合调试”时，（主线程的）调用堆栈仅包含诸如 clr.dll!6cb34e46()、KERNELBASE.dll!75106a8e() 和 ntdll.dll 之类的东西！ 76f07094() 在顶部。没有可识别的代码，也没有与手表相关的内容。

**这是为什么？** 实际上，我期望这两个转储几乎相等（仅通过几行代码）。 *[与附加的调试器有关，请参阅下面的编辑。]*

请注意，在这两种情况下都正确加载了符号。我在 Debug->Windows->Modules 中获得的列表显示了要为两个转储加载的相同符号。此外，如果我在两个转储中切换到后台线程，我会在两个转储中为这些（及其变量的值等）获得正确的调用堆栈。

**编辑**

我注意到，通过在没有附加调试器的情况下执行应用程序，我得到了预期的进程转储（即，等于 Visual Studio 捕获的进程转储，但相差一行）。问题解决了。但是我仍然很好奇为什么在附加调试器的情况下我没有得到这个结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T23:38:47.273

procdump 本身就是一个调试器。你正在做的是要求它转储一个已经被调试的进程，因此是差异转储文件。

# java - 在Java中恢复线程并传入一个对象

> ID：15312347
> 
> 赞同：0
> 
> 时间：2013-03-09T15:22:50.503
> 
> 标签：java, multithreading, object

我对java中的线程比较陌生。我想知道以下是否可能。

*   （从另一个对象）调用线程 [a]。
*   它做了一些事情，然后在同一个对象中启动另一个线程 [b]。
*   然后它会暂停自己并等待另一个线程完成。
*   当它完成时，它将正在处理的结果传递给暂停的线程 [a] 并恢复它。
*   然后线程 [a] 将结果返回给调用它的原始对象。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T15:51:04.847

有很多方法可以做到这一点。

以下示例通常是完成任务的最佳方式。它在主线程中做一些工作，然后将 a 传递给在另一个线程中做一些工作的`Callable`an 。`ExecutorService`调用`future.get`阻塞直到第二个线程完成并返回返回的`Object`那个`Callable`。

```
private static final ExecutorService executorService = Executors.newFixedThreadPool(1);

public static void main(String[] args) {
    //do some stuff       
    final Future<Object> future = executorService.submit(new MyOtherWork());
    final Object object;
    try {
        object = future.get();
    } catch (InterruptedException ex) {
        Thread.currentThread().interrupt();
    } catch (ExecutionException ex) {
        //handle exception
    }       
    //do some other stuff

}

private static class MyOtherWork implements Callable<Object> {

    public Object call() throws Exception {
        //do stuff in another thread
    }
} 
```

请注意，由于`ExecutorService`默认情况下使用非守护线程，因此您的应用程序在关闭之前不会退出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T15:40:36.793

如果您想使用 Java 中的线程让您的生活更轻松，请不要使用 wait()、notify()，您将不得不使用同步方法和语句，我的建议是使用从主线程传递到的 ReentrantLock 和 Condition次要线程

[在这里你可以阅读更多关于它的信息](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Condition.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T15:31:49.943

线程 a 正在等待的[SynchronousQueue](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/SynchronousQueue.html)`take()`和线程 b`put()`的结果如何？

> 同步队列类似于 CSP 和 Ada 中使用的集合通道。它们非常适合切换设计，其中一个线程中运行的对象必须与另一个线程中运行的对象同步，以便将一些信息、事件或任务交给它。

如果要添加超时，请让线程 a`poll()`获得结果，线程 b 获得结果`offer()`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T16:17:44.583

我认为您正在寻找的是`java.util.Callable`and `java.util.Executors`。

这是我能写的最短的代码：

```
import java.util.concurrent.Callable;
import java.util.concurrent.ExecutionException;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;

public class TestCallable {

    public static void main(String[] args) throws InterruptedException, ExecutionException {

        ExecutorService executor = Executors.newSingleThreadExecutor();
        try {
            Integer five = executor.submit(new Callable<Integer>() {

                @Override
                public Integer call() throws Exception {
                    ExecutorService executor = Executors.newSingleThreadExecutor();
                    try {
                        return executor.submit(new Callable<Integer>() {

                            @Override
                            public Integer call() throws Exception {
                                return 5;
                            }

                        }).get();
                    } finally {
                        executor.shutdown();
                    }
                }

            }).get();

            System.out.println(five); // prints 5

        } finally {
            executor.shutdown();
        }
    }
} 
```

# jquery - FineUploader 淡入每一行

> ID：15312348
> 
> 赞同：3
> 
> 时间：2013-03-09T15:22:52.693
> 
> 标签：jquery, image, uploadify, fine-uploader

我正在尝试使用fineUploader，但遇到了问题。这个问题真的是因为我对 jQuery 不是很精通，所以如果这是一个愚蠢的问题，我很抱歉。

下面是我的代码。我想淡出在fineUploader中成功加载的每一行，以便在上传结束时出现的所有内容都是原始上传按钮或上传失败。如果您上传 1000 个文件，它看起来真的很俗气，每张上传的图像都有 1000 行绿色框。我喜欢 Uploadify 的工作方式，而每行在最后以这种方式上传后都会慢慢淡出，没有上传的图像行。任何人都可以为我建议一个解决方案吗？谢谢！

```
This is the container which jQuery loads each success or failed row into...
<ul id="basicUploadFailureExample" class="unstyled"></ul>

$(document).ready(function() {
var errorHandler = function(event, id, fileName, reason) {
    qq.log("id: " + id + ", fileName: " + fileName + ", reason: " + reason);
};

var uploader3 = new qq.FineUploader({
    element: $('#basicUploadFailureExample')[0],
    callbacks: {
        onError: errorHandler,
        onComplete: function(id, fileName, responseJSON) {
            if (responseJSON.success == true) {
                            // I would think the fade out would go here but I am just not sure... 
            } 
        }
    },
    request: {
        endpoint: "../server/php/example.php",
        params: {"generateError": true}
    },
    failedUploadTextDisplay: {
        mode: 'custom',
        maxChars: 5
    }
}); 
```

});

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T04:49:13.910

实际上，这很容易做到，而且您的想法是正确的，您只是缺少一个关键的 API 函数。

您的代码应如下所示（只需添加/更改一行）：

```
var uploader3 = new qq.FineUploader({
    element: $('#basicUploadFailureExample')[0],
    callbacks: {
        onError: errorHandler,
        onComplete: function(id, fileName, responseJSON) {
            if (responseJSON.success == true) {
               $(this.getItemByFileId(id)).hide('slow');
            } 
        }
    },
    request: {
        endpoint: "../server/php/example.php",
        params: {"generateError": true}
    },
    failedUploadTextDisplay: {
        mode: 'custom',
        maxChars: 5
    }
}); 
```

我添加到您的处理程序的一行`onComplete`调用了该`getItemByFileId`函数，该函数返回包含 UI 中显示的文件详细信息的元素。只需将其隐藏，或对其执行一些其他动画，最终将其隐藏。

顺便说一句，我认为这是一个很酷的想法（淡出所有上传失败的内容）。

# php - 行检索错误

> ID：15312351
> 
> 赞同：0
> 
> 时间：2013-03-09T15:23:26.873
> 
> 标签：php, mysql

我一直在做一个画廊项目，但我遇到了这个错误。例如，基本上当用户访问 image.php?id=37 时，它会从行 id 等于 url 参数的图像表中检索所有行信息。对于要检索的实际图像 url、画廊 ID 和图像 ID，所有这些都运行良好。我现在正在尝试将描述合并到此页面中，该页面也是从图像表中检索的。我已经继续添加列，输入了一些测试描述并将代码添加到我的 PHP 页面中，因为过去几天我一直在成功执行此操作，但出现此错误：

无法运行查询：SQLSTATE [42000]：语法错误或访问冲突：1064 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 5 行的“desc FROM images WHERE id = 37”附近使用正确的语法

我看不出哪里出了问题，因为没有什么与过去的尝试不同：L。

我的 image.php 页面：

```
<?php foreach($rows as $row): ?> 
    <div class="image" style="background: url('resources/galleries/images/<?php echo htmlentities($row['url'], ENT_QUOTES, 'UTF-8'); ?>') no-repeat; background-size: 100%; ">
        <? if(empty($_SESSION['user'])) { } else { print '<div class="image-overlay"><a href="admin/includes/delete-img.php?id=' . $galname . '">Delete</a></div>';}?>
    </div>
    <div class="image-info">
        <a href="gallery.php?id=<?php echo htmlentities($row['gallery'], ENT_QUOTES, 'UTF-8'); ?>">&larr; Back to Gallery</a>
        <p class="desc"><? echo htmlentities($row['desc'], ENT_QUOTES, 'UTF-8'); ?></p>
    </div>
<?php endforeach; ?> 
```

和 $id = $_GET['id']; 的查询：

```
$query = " 
    SELECT 
        id,
        url, 
        gallery,
        desc
    FROM images
    WHERE id = $id
"; 
```

唯一的变化是在查询中添加了 desc 并添加了 PHP 以回显描述。我的表有必要的额外列，我看不出发生了什么。这可能只是一个简单的错误，但我在语法中看不到错误。任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T15:28:21.590

The other option if you don't want to delimit your columns with backticks around your query is to supply an alias on the table, eg

```
SELECT  i.id,
        i.url, 
        i.gallery,
        i.desc
FROM    images i
WHERE   id = $id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T15:25:26.503

`desc`是 SQL 中的关键字。需要用引号括起来。IE

```
SELECT 
    id,
    url, 
    gallery,
    `desc`
FROM images
WHERE id = $id 
```

# javascript - 如何以内联样式获取javascript变量

> ID：15312353
> 
> 赞同：1
> 
> 时间：2013-03-09T15:23:37.107
> 
> 标签：javascript, styles, inline

我想在内联样式声明中使用 javascript 变量 screen 作为样式背景属性。

```
<div id ="content" style=" position: relative; top: -400px;  left: 0px;  width: 60px; height: 400px; z-index: 901;background-image: url(' + screen + ') "></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T18:09:06.257

```
document.write('<div id ="content"
  style="
    position: relative;
    top: -400px;
    left: 0px;
    width: 60px;
    height: 400px;
    z-index: 901;
    background-image: url(' + screen + ')
  ">
</div>') 
```

或者

```
document.getElementById('content').style.backgroundImage = screen; 
```

# vim - Vim：“E185：找不到日晒的配色方案”

> ID：15312357
> 
> 赞同：10
> 
> 时间：2013-03-09T15:23:51.087
> 
> 标签：vim, color-scheme, pathogen

设置一台新机器并尝试让 Solarized 在 Vim 中运行。运行 vim 时出现以下错误：

`E185: Cannot find color scheme solarized`

尝试按照[官方 repo 上的 Solarized README 中的](https://github.com/altercation/vim-colors-solarized#option-2-pathogen-installation-recommended)Pathogen 安装说明进行操作。检查[了这个类似的问题和答案](https://stackoverflow.com/questions/8804767/e185-cannot-find-color-scheme-solarized)，它通过在目录中实际拥有正确的文件来解决问题，但正如您在下面看到的，我的目录确实充满了好东西（我只是克隆了它）。

## 细节

*   iTerm2
*   .vimrc 正在加载，其他插件正在运行
*   也尝试手动安装 Solarized（通过将 solarized.vim 移动到 .vim/colors 中），但得到了同样的错误

### .vimrc

```
32 syntax enable  
33 " colo wombat  
34  
35 """ Solarized """  
36 let g:solarized_termcolors=256  
37 set background=dark  
38 colorscheme solarized 
```

### .vim 目录

```
├── autoload  
│   └── pathogen.vim  
├── bundle  
│   ├── ctrlp.vim  
│   │   ├── autoload  
│   │   │   ├── ctrlp  
│   │   │   │   ├── bookmarkdir.vim  
│   │   │   │   ├── buffertag.vim  
│   │   │   │   ├── changes.vim  
│   │   │   │   ├── dir.vim  
│   │   │   │   ├── line.vim  
│   │   │   │   ├── mixed.vim  
│   │   │   │   ├── mrufiles.vim  
│   │   │   │   ├── quickfix.vim  
│   │   │   │   ├── rtscript.vim  
│   │   │   │   ├── tag.vim  
│   │   │   │   ├── undo.vim  
│   │   │   │   └── utils.vim  
│   │   │   └── ctrlp.vim  
│   │   ├── doc  
│   │   │   ├── ctrlp.txt  
│   │   │   └── tags  
│   │   ├── plugin  
│   │   │   └── ctrlp.vim  
│   │   └── readme.md  
│   ├── supertab  
│   │   ├── Makefile  
│   │   ├── README.rst  
│   │   ├── doc  
│   │   │   ├── supertab.txt  
│   │   │   └── tags  
│   │   └── plugin  
│   │       └── supertab.vim  
│   ├── vim-colors-solarized  
│   │   ├── README.mkd  
│   │   ├── autoload  
│   │   │   └── togglebg.vim  
│   │   ├── bitmaps  
│   │   │   └── togglebg.png  
│   │   ├── colors  
│   │   │   └── solarized.vim  
│   │   └── doc  
│   │       ├── solarized.txt  
│   │       └── tags  
│   ├── vim-jade  
│   └── vim-surround  
│       ├── README.markdown  
│       ├── doc  
│       │   ├── surround.txt  
│       │   └── tags  
│       └── plugin  
│           └── surround.vim  
└── colors  
    └── wombat.vim 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T17:46:18.640

我在使用 Gnome 终端时遇到了同样的问题（尽管 gvim 可以正常工作），这些是我必须添加到我的`.vimrc`：

```
se t_Co=16
let g:solarized_termcolors=256  
set background=dark  
colorscheme solarized 
```

`se t_co=256`没有, 的设置`let g:solarized_termcolors=256`也将显示颜色，但不会根据颜色方案显示正确的颜色，因为它会恢复为具有 256 种颜色的后备模式。

这与 Mike 的建议类似。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-04-01T13:49:58.340

在以上都没有为我工作之后的另一个解决方案。这个是真面子。

确保

```
""" Solarized """  
let g:solarized_termcolors=256  
set background=dark  
colorscheme solarized 
```

或者您使用的任何设置都*在*您的`pathogen#infect()`代码之后。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-09T17:19:30.130

*   确保语法在你的 .vimrc 中
*   检查从您的术语模拟器（快速：echo &t_Co）中获取的 t_Co vim。如果它是 8，你会想要设置 t_Co=16。您也可以尝试 set t_Co=256 虽然没有 let g:solarized_termcolors=16 这将使用 256 后备模式，这不是完全正确的配色方案。

[我的来源](https://stackoverflow.com/questions/5560658/ubuntu-vim-and-the-solarized-color-palette)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-10-22T09:43:28.360

发现这个错误：

[https://github.com/altercation/vim-colors-solarized/issues/104](https://github.com/altercation/vim-colors-solarized/issues/104)

```
cp ~/.vim/bundle/vim-colors-solarized/colors/solarized.vim ~/.vim/colors/ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-15T00:47:49.367

将其留在这里，以供其他人寻找类似 E185 vim 颜色方案错误的可能解决方案：对我来说，果冻豆颜色方案在启动时抛出相同的错误，无论我在系统范围内`/usr/share/vim/vimfiles/colors/jellybeans.vim`还是在`~/.vim/colors/jellybeans.vim/jellybeans.vim`.

我注意到当我以 sudo 运行 vim 时，我的颜色突然起作用了！这让我发现 jellybeans.vim 文件需要对“其他”的写权限才能工作（不知道为什么，没有查看它的代码）。我做了一些测试，至少对于 vim 7.4 上的 jellybeans，vim 将无法找到并加载颜色方案，直到文件权限为：`rw-rw-rw-`

# java - 动态生成的 java 字节码是否需要任何优化？

> ID：15312358
> 
> 赞同：7
> 
> 时间：2013-03-09T15:23:58.850
> 
> 标签：java, jvm, bytecode

我使用 ASM 生成了一些 java 字节码。
通过以访问者模式遍历某种小型 DSL 的某种 AST。
而且我担心生成的字节码太“直截了当”，即没有任何“编译时优化”。
虽然在我的情况下，如果生成的字节码没有优化也可以，但我还是忍不住要问：那些在运行时生成字节码的项目是否需要进行字节码优化？
我知道对于 jvm，大部分“优化”工作都是在程序运行时通过 jit 编译完成的。所以编译时的字节码优化可能影响不大。
但是，真的吗？对动态生成的字节码进行字节码优化是绝对没有意义的吗？有没有人可以分享一些关于有和没有任何形式优化的字节码之间差异的经验，主要是在运行时性能方面？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T16:23:40.033

我知道至少有一种基于 JVM 的语言，它的共享仍然是无名的，速度慢得要命。它可能使用了一些编译时优化。

Javac 和 JVM 分析的编程模型大致相同，因此 Javac 可以采用的任何优化技术也可以被 JVM 采用。那么，Javac 重复这项工作就没有多大意义了。实际上，Javac 可能更倾向于保留尽可能多的源代码结构，以便 JVM 可以更好地推理代码。

如果源语言不是 Java 语言，则不适用。

想一想，CPU也做了很多精彩的优化，那么JVM为什么需要做任何优化呢？为什么不把它全部交给 CPU。因为 CPU 和 JVM 正在分析非常不同的代码。CPU 正在分析任意序列的机器指令（尽管它可以根据高级语言的常见行为做出假设）。JVM 正在分析一种非常具体的、更高级别的语言，JVM 可以根据 CPU 几乎不可能从机器指令中发现的知识来推理和转换代码。

回到您的情况，您（作为编译器）有可能对您的更高级别的源语言了解得更多，您可以执行 JVM 不可能执行的转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T15:55:08.587

不，没有必要。

如果您查看 Javac 的输出，它实际上根本没有进行编译时优化。并且由于 Hotspot 的 JIT，很难说改变字节码会对优化产生什么影响。除非您能证明确实存在瓶颈并有时间进行调查，否则最好不要担心此类事情。

# android - 相机意图：无法恢复致命异常并且不存储

> ID：15312359
> 
> 赞同：1
> 
> 时间：2013-03-09T15:24:04.813
> 
> 标签：android

我有这段代码，我试图从相机中获取图像。我不断收到“：无法打开文件进行阅读”。它将文件保存在指定的目录中。我遇到的另一个问题是

```
public class MainActivity extends Activity {
private Uri imageUri;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

}

public void takePic(View view){
    Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
    File imagesFolder = new File(Environment.getExternalStorageDirectory(), "MyImages");
    imagesFolder.mkdirs(); // <----
    File photo = new File(imagesFolder, "image_001.jpg");
    intent.putExtra(MediaStore.EXTRA_OUTPUT,
            Uri.fromFile(photo));
    imageUri = Uri.fromFile(photo);
    startActivityForResult(intent, 100);

}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    switch (requestCode) {
    case 100:
        if (resultCode == Activity.RESULT_OK) {
            Uri selectedImage = imageUri;
            getContentResolver().notifyChange(selectedImage, null);
            ImageView imageView = (ImageView) findViewById(R.id.iv_photo);
            ContentResolver cr = getContentResolver();
            Bitmap bitmap;
            try {
                 bitmap = android.provider.MediaStore.Images.Media
                 .getBitmap(cr, selectedImage);

                imageView.setImageBitmap(bitmap);
                Toast.makeText(this, selectedImage.toString(),
                        Toast.LENGTH_LONG).show();
            } catch (Exception e) {
                Toast.makeText(this, "Failed to load", Toast.LENGTH_SHORT)
                        .show();
                Log.e("Camera", e.toString());
            }
        }
    }

}

public void doCrop(){
    Intent intent = new Intent("com.android.camera.action.CROP");
    intent.setType("image/*");
    intent.setData(imageUri);
    Log.d("Gothere", "awesome");
    intent.putExtra("outputX", 200);
    intent.putExtra("outputY", 200);
    intent.putExtra("aspectX", 1);
    intent.putExtra("aspectY", 1);
    intent.putExtra("scale", true);
    intent.putExtra("return-data", true);
    Log.d("Gothere", "awesome2");
    startActivityForResult(intent, 1333);
} 
```

}

```
 03-09 08:20:27.456: E/AndroidRuntime(18776): FATAL EXCEPTION: main
    03-09 08:20:27.456: E/AndroidRuntime(18776): java.lang.RuntimeException: Unable to resume         activity {com.example.cameracode/com.example.cameracode.MainActivity}: java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=100, result=-1, data=null} to activity {com.example.cameracode/com.example.cameracode.MainActivity}: java.lang.NullPointerException
03-09 08:20:27.456: E/AndroidRuntime(18776):    at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2617)
03-09 08:20:27.456: E/AndroidRuntime(18776):    at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2645)
03-09 08:20:27.456: E/AndroidRuntime(18776):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2118)
03-09 08:20:27.456: E/AndroidRuntime(18776):    at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:3554)
03-09 08:20:27.456: E/AndroidRuntime(18776):    at android.app.ActivityThread.access$800(ActivityThread.java:139)
03-09 08:20:27.456: E/AndroidRuntime(18776):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1230)
03-09 08:20:27.456: E/AndroidRuntime(18776):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-09 08:20:27.456: E/AndroidRuntime(18776):    at android.os.Looper.loop(Looper.java:137)
03-09 08:20:27.456: E/AndroidRuntime(18776):    at android.app.ActivityThread.main(ActivityThread.java:4918)
03-09 08:20:27.456: E/AndroidRuntime(18776):    at java.lang.reflect.Method.invokeNative(Native Method)
03-09 08:20:27.456: E/AndroidRuntime(18776):    at java.lang.reflect.Method.invoke(Method.java:511)
03-09 08:20:27.456: E/AndroidRuntime(18776):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1004)
03-09 08:20:27.456: E/AndroidRuntime(18776):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:771)
03-09 08:20:27.456: E/AndroidRuntime(18776):    at dalvik.system.NativeStart.main(Native Method)
03-09 08:20:27.456: E/AndroidRuntime(18776): Caused by: java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=100, result=-1, data=null} to activity {com.example.cameracode/com.example.cameracode.MainActivity}: java.lang.NullPointerException
03-09 08:20:27.456: E/AndroidRuntime(18776):    at android.app.ActivityThread.deliverResults(ActivityThread.java:3183)
03-09 08:20:27.456: E/AndroidRuntime(18776):    at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2604)
03-09 08:20:27.456: E/AndroidRuntime(18776):    ... 13 more
03-09 08:20:27.456: E/AndroidRuntime(18776): Caused by: java.lang.NullPointerException
03-09 08:20:27.456: E/AndroidRuntime(18776):    at android.os.Parcel.readException(Parcel.java:1431)
03-09 08:20:27.456: E/AndroidRuntime(18776):    at android.os.Parcel.readException(Parcel.java:1379) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T17:11:37.597

也许尝试注释掉这一行：

```
getContentResolver().notifyChange(selectedImage, null); 
```

还要检查一下，您以全分辨率加载从相机拍摄的图片，对于您的应用程序中的大约 1 或 2 个位图来说，内存是足够的，使用此代码，您可以对图像进行采样而不将其加载到内存中，所以当您加载时它以合理的大小进入内存

```
String selectedImagePath = selectedImage.getAbsolutePath();

             BitmapFactory.Options options = new BitmapFactory.Options();
                options.inJustDecodeBounds = true;
                BitmapFactory.decodeFile(selectedImagePath, options);
                int imageHeight = options.outHeight;
                int imageWidth = options.outWidth;
                String imageType = options.outMimeType;
                if(imageWidth > imageHeight){
                    options.inSampleSize = calculateInSampleSize(options,512,256);//<------the size you need if landscape
                }else{
                    options.inSampleSize = calculateInSampleSize(options,256,512);//<------the size you need if portrait
                }
                options.inJustDecodeBounds = false;
                bitmap = BitmapFactory.decodeFile(selectedImagePath,options); 
```

这是方法

```
public static int calculateInSampleSize(
        BitmapFactory.Options options, int reqWidth, int reqHeight) {
// Raw height and width of image
final int height = options.outHeight;
final int width = options.outWidth;
int inSampleSize = 1;

if (height > reqHeight || width > reqWidth) {

    // Calculate ratios of height and width to requested height and width
    final int heightRatio = Math.round((float) height / (float) reqHeight);
    final int widthRatio = Math.round((float) width / (float) reqWidth);

    // Choose the smallest ratio as inSampleSize value, this will guarantee
    // a final image with both dimensions larger than or equal to the
    // requested height and width.
    inSampleSize = heightRatio < widthRatio ? heightRatio : widthRatio;
}

return inSampleSize;
} 
```

# algorithm - 组合优化 - 在创造家具时最大化利润

> ID：15312360
> 
> 赞同：2
> 
> 时间：2013-03-09T15:24:06.080
> 
> 标签：algorithm, optimization, combinatorics

一些公司提供大木板。这些面板被切割成所需的部分。例如，要制作书架，他们必须从大面板上切下几块。在大多数情况下，猪面板不是100%使用的，会有一些损失，一些剩余件，不能使用。因此，为了最大限度地减少损失，他们必须在大面板/面板上找到单独部件的最佳布局。我认为这被称为“二维矩形装箱问题”。

现在它变得越来越有趣了。

并非所有面板都相同，它们的色调可能略有不同。理想的书架是由一块或多块具有相同色调的面板切割而成的。但是书架可以生产不同的质量（理想的一个；一个具有不同色调的一个；两个......，使用三种不同的颜色板；等等......）。每种品质都有自己的价格。（质量越好越贵）。

现在我们有一些木板库存并要求提供一些家具（例如 100 个书架）。目标是最大化利润（例如，创建一些质量理想的产品和一些质量较差的产品，以保持较低的材料损失）。

如何解决这个问题呢？如何将它与装箱问题结合起来？和提示，论文/文章将不胜感激。我知道我可以通过整数线性规划最小化/最大化一些函数和不等式，但我真的不知道如何解决这个问题。

（请不要考虑真实的场景，例如，最好只创造理想的场景……想象一下，剩余材料的损失是 X 钱/cm^2，Y 是特定产品质量的价格，而X 和 Y 可以是“任意的”）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T03:23:19.773

我可以说明这些问题是如何解决的，以及为什么你的问题特别困难。

在一个典型的优化问题中，您希望相对于一组变量（例如长度）最大化或最小化一个函数（例如能量）。例如，为了最大限度地减少储存的能量，弹簧应该多长。答案只是一个数字，即弹簧的平衡长度。另一个例子是“我们应该为我们的产品设定什么价格来最大化利润？” （太贵了，没有人会买任何东西；太便宜了，您将无法支付您的费用。）同样，答案只是一个数字，即最优价格。像这样的优化是用普通的微积分来处理的。

一个更困难的优化问题是答案不是数字，而是一个函数，比如一个形状。一个例子是：为了最小化它的重力势能，一条吊链会做成什么样的形状。或者：为了最大化利润，我们应该从这些板上切出什么形状？这种类型的问题是使用变分微积分来解决的，这非常困难。

无论如何，在数值求解优化问题时，需要遵循几个基本步骤。首先，您必须定义一个函数，例如要针对某些变量 'cuts' 最大化的函数，例如 Profit(cuts,params)，而其他参数 'params' 是固定的。“参数”存储信息，例如您拥有的木材数量和类型，以及不同类型家具的价值。

第二步是猜测最佳剪切集，我们称之为cuts_guess。为了做到这一点，您需要提出一种算法，该算法会建议您可以使用您拥有的用品实际制作的一套家具。例如，如果您可以用每块木板制作至少一个书架，那么这可能是您对使用木材的最佳方式的初步猜测。

第三阶段是优化。对于初始化，设置 cuts_best=cuts_guess 和 profit_best=profit_guess=profit(cuts_guess, params)。然后，您需要（一种算法）对“削减”进行小的伪随机更改，并检查利润是增加还是减少。记录您找到的最佳削减集以及相应的利润。通常最好有一些随机性，以便探索最大数量的可能性，而不是“卡”在一个糟糕的选择上。如果您查找“蒙特卡洛算法”，您会找到这样的示例。

Anyway, all of this will be very difficult for your problem. It's easy how to come up with a guess for a variable (e.g. length), and then how to change that guess (e.g. increase or decrease the length a bit). It's not at all obvious how to make a 'guess' for how to place a cut-out on a board, or how to make a small change.

# php - 使用 curl 登录到保管箱（用户登录）

> ID：15312361
> 
> 赞同：1
> 
> 时间：2013-03-09T15:24:09.190
> 
> 标签：php, curl, dropbox

我正在尝试使用 cURL 和 PHP 以用户身份登录 Dropbox。

```
$ch = curl_init(); 
$data = array(
    't'=>'hxdlvCcN7SKKcfKCvpEO8-s2',
    'lhs_type'=>'anywhere',
    'login_email'=>'myemail@mail.com',
    'password'=>'mypass',
    'login_submit'=>1,
    'remember_me'=>'on',
    'login_submit_dummy'=>'Sign in'
);

// set cURL options and execute
curl_setopt($ch, CURLOPT_URL, "https://www.dropbox.com/login?lhs_type=anywhere");  
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);  
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "POST");
curl_setopt($ch, CURLOPT_POSTFIELDS,http_build_query($data));
$request_token_response = curl_exec($ch);       
var_dump($request_token_response ); 
```

我得到带有此文本的 403 页：

```
It seems you tried to do something we can't verify. Did you log into a different Dropbox account in a different window? Try clicking here to go back to the page you came from, or just go home. 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T15:34:48.127

这是可能的，并且有一个当前的类可以使它变得容易。 [https://github.com/jakajancar/DropboxUploader/](https://github.com/jakajancar/DropboxUploader/)

这很容易

```
require 'DropboxUploader.php';
$uploader = new DropboxUploader('email@address.com', 'password'); 
```

`$uploader->loggedin`无论您是否登录，都会返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T15:50:18.407

我想你会发现 't' 值只能使用一次。每次登录时，您都需要调用一个新的。

如果您查看另一篇文章中建议的课程，您会发现它就是这样做的。

# android - java.lang.UnsatisfiedLinkError：找不到本机方法

> ID：15312362
> 
> 赞同：3
> 
> 时间：2013-03-09T15:24:15.430
> 
> 标签：android, android-ndk, java-native-interface

我正在尝试制作 NDK 应用程序，但出现此错误：

```
java.lang.UnsatisfiedLinkError: Native method not found: com.example.hellondk.jni.HelloNDK.hello:()I 
```

看不懂因为C++函数的名字跟Java包名和类一样

你好NDK.cpp

```
#include <jni.h>

JNIEXPORT jint JNICALL Java_com_example_hellondk_jni_HelloNDK_hello(JNIEnv* env, jobject o){
    return (jint) 2;
} 
```

你好NDK.java

```
package com.example.hellondk.jni;

public class HelloNDK {
    public native int hello();

    static {
        System.loadLibrary("HelloNDK");
    }
} 
```

安卓.mk

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

LOCAL_MODULE    := HelloNDK
LOCAL_SRC_FILES := HelloNDK.cpp

include $(BUILD_SHARED_LIBRARY) 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-09T15:28:35.767

You're exporting it as a C++ function, but the JNI linker doesn't understand C++ name mangling, so it won't be able to find it.

You can use `extern "C"` to have the function exported without C++ name mangling:

```
extern "C" JNIEXPORT jint JNICALL Java_com_example_hellondk_jni_HelloNDK_hello(JNIEnv* env, jobject o)
{
    return (jint) 2;
} 
```

# ruby - HAML - 一个非常奇怪的缩进差异 - 错误？

> ID：15312365
> 
> 赞同：4
> 
> 时间：2013-03-09T15:24:30.100
> 
> 标签：ruby, sinatra, haml

这个 HAML

```
%script{:type => "text/javascript"}
  :plain
    $(document).ready(function() {
      bar();
      var foo = foo_func("#{}");
    }); 
```

正如预期的那样：

```
<script type='text/javascript'>
  $(document).ready(function() {
    bar();
    var foo = foo_func("");
  });
</script> 
```

但是这个**几乎相同**的HAML（仅更改`bar()`为`prep()`）：

```
%script{:type => "text/javascript"}
  :plain
    $(document).ready(function() {
      prep();
      var foo = foo_func("#{}");
    }); 
```

给出了这个：

```
<script type='text/javascript'>
  $(document).ready(function() {
  prep();
  var foo = foo_func("");
});
</script> 
```

**注意第二种情况下的混乱缩进**。

为什么会改变`bar()`导致`prep()`这种奇怪的差异？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T17:45:43.917

这是由匹配 Haml 用于处理空格的正则表达式中的字符`pre`引起的。`prep()`

在 Haml 中，您使用空格来指定元素的内容，通常这是可以的，因为在查看 HTML 时，空格会被“压缩”，使其显示为单个字符。但是，空格在某些 HTML 元素（和）中很重要`pre`，Haml 会尝试检测和处理这些元素。在这种情况下，正则表达式匹配并且第一行之后的块不缩进。`code``textarea`

此代码已在最新版本（当前为 4.0.1.rc.1）中更改，并且在该版本中不会发生这种情况。我还创建了一个[拉取请求，用于修复 3-1 分支中的正则表达式](https://github.com/haml/haml/pull/649)。

# javascript - 用零填充时无法使 JavaScript 循环工作

> ID：15312366
> 
> 赞同：2
> 
> 时间：2013-03-09T15:24:32.590
> 
> 标签：javascript

试图以 001、002、003 样式格式将一些 html 写入 div，但我无法让它工作。

这是代码：

```
function loadpics(x, url) {
  var txt, i;
  txt = "";
  for(i = 1; i < x; i++) {
    txt = txt + String.format("%03d", i) + "<br/>";
  }
  document.getElementById("myDiv").innerHTML = txt;
} 
```

当我希望让它工作时，我打算将一些图像加载到 div 中，如下所示：

```
function loadpics(x, url) {
  var txt, i;
  txt = "";
  for(i = 1; i < x; i++) {
    txt = txt + "<img src=\"" + url + "/t/" + String.format("%03d", i) + ".jpg\"></img><br/>";
  }
  document.getElementById("myDiv").innerHTML = txt;
} 
```

但是无法使字符串格式正常工作。不完全确定我做错了什么。

如果有人能让我直截了当，那将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T15:29:55.797

尝试使用`pad()`而不是`String.format()`.

```
function pad(number, length) {
  var str = '' + number;
  while (str.length < length) {
    str = '0' + str;
  }
  return str;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T15:33:07.560

将此添加到您的页面

```
function pad(number, length) {
  var str = '' + number;
  while (str.length < length) {
    str = '0' + str;
  }
  return str;
} 
```

并`txt=txt...`用这个替换

```
txt +=  "<img src='" + url + "/t/" + pad(i,3) + ".jpg'></img><br/>"; 
```

也看看[这个话题](https://stackoverflow.com/questions/2018731/why-is-javascript-called-javascript-since-it-has-nothing-to-do-with-java)

# wordpress - WP 博客的 Htaccess - 显示目录列表而不是主页

> ID：15312368
> 
> 赞同：0
> 
> 时间：2013-03-09T15:24:41.103
> 
> 标签：wordpress, .htaccess

我正在博客目录中运行一个带有 htaccess 文件的博客。但是，博客索引页面显示的是目录列表而不是主页。

htaccess 如下所示：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /blog/
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /blog/index.php [L]
</IfModule>

# END WordPress 
```

有什么想法吗？

谢谢。-TM值

# python - 通过 urllib2 python 发送/设置 cookie

> ID：15312369
> 
> 赞同：2
> 
> 时间：2013-03-09T15:24:50.000
> 
> 标签：python, urllib2, python-requests

我对 python 还是很陌生，现在尝试用 urllib2 发送一个 cookie 让我很震惊几天。所以，基本上，在我想要获取的页面上，我从萤火虫看到有一个“发送的 cookie”，它看起来像：

```
 list_type=height 
```

..它基本上按一定顺序排列页面上的列表。

我想通过 urllib2 发送上面的 cookie 信息，以便呈现的页面使上面的设置生效 - 这是我试图编写的使其工作的代码：

```
class Networksx(object):
    def __init__(self):
        self.cj = cookielib.CookieJar()
        self.opener = urllib2.build_opener\
                #socks handler
        self.opener.addheaders = [
        ('User-Agent', 'Mozilla/5.0 (Windows; U; Windows NT 6.1; en-GB; rv:1.9.2.13) Gecko/20101203 Firefox/3.6.13'),
        ('Accept-Charset', 'ISO-8859-1,utf-8;q=0.7,*;q=0.7'),
        ('Keep-Alive', '115'),
        ('Connection', 'keep-alive'),
        ('Cache-Control', 'max-age=0'),
        ('Referer', 'http://www.google.com'),
        ("Cookie", {"list_type":"height"}),
    ]
    urllib2.install_opener(self.opener)
    self.params = { 'Set-Cookie': "list_type":"height"}
    self.encoded_params = urllib.urlencode( self.params )

    def fullinfo(self,url):
        return self.opener.open(url,self.encoded_params).read() 
```

..如您所见，我尝试了几件事：

*   通过标头设置参数
*   设置 cookie

但是，这些似乎并没有按照我的意愿以特定的 list_order （高度）呈现页面。我想知道是否有人可以为我指出如何使用 urllib2 发送 cookie 信息的正确方向

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T15:40:36.000

生成 cookie.txt 的简单方法是这个 chrome 扩展：[https ://chrome.google.com/webstore/detail/cookietxt-export/lopabhfecdfhgogdbojmaicoicjekelh](https://chrome.google.com/webstore/detail/cookietxt-export/lopabhfecdfhgogdbojmaicoicjekelh)

```
import urllib2, cookielib

url = 'https://example.com/path/default.aspx'
txheaders =  {'User-agent' : 'Mozilla/4.0 (compatible; MSIE 5.5; Windows NT)'}

cj = cookielib.LWPCookieJar()
# cj.load signature: filename=None, ignore_discard=False, ignore_expires=False
cj.load('/path/to/my/cookies.txt') 

opener = urllib2.build_opener(urllib2.HTTPCookieProcessor(cj))
urllib2.install_opener(opener)

req = urllib2.Request(url, None, txheaders)
handle = urllib2.urlopen(req) 
```

[更新]

抱歉，我是从一个早已被遗忘的旧代码片段中粘贴的。从 LWPCookieJar 文档字符串：

> LWPCookieJar 保存一系列“Set-Cookie3”行。"Set-Cookie3" 是 libwww-perl 库使用的格式，不知道与任何浏览器兼容，但它易于阅读并且不会丢失有关 RFC 2965 cookie 的信息。

所以它与现代浏览器生成的 cookie.txt 不兼容。如果您尝试加载它，您将获得：`LoadError: 'cookies.txt' does not look like a Set-Cookie3 (LWP) format file`.

您可以作为 OP 执行并转换文件：

> chrome 扩展的输出格式有问题。我刚刚搜索了 lwp 问题，发现：code.activestate.com/recipes/302930-cookielib-example 代码以 lwp 格式吐出 cookie，然后我按照您的步骤进行操作。-[詹姆斯 W](https://stackoverflow.com/users/848746/james-w)

您也可以使用此[Firefox 插件](https://addons.mozilla.org/en-US/firefox/addon/cookie-exporter/?src=api)，然后使用“工具->导出 cookie”。确保 cookies.txt 文件的第一行是“#Netscape HTTP Cookie File”并使用：

```
cj = cookielib.MozillaCookieJar('/path/to/my/cookies.txt')
cj.load() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T15:28:17.810

You would better look into the 'request' module for Python making HTTP much easier approachable than through the low-level urllib modules.

See

[http://docs.python-requests.org/en/latest/user/quickstart/#cookies](http://docs.python-requests.org/en/latest/user/quickstart/#cookies)

# javascript - jQuery UI Portlet 问题（无法点击输入框）

> ID：15312371
> 
> 赞同：1
> 
> 时间：2013-03-09T15:25:00.447
> 
> 标签：javascript, jquery, jquery-ui, jquery-plugins

我正在使用 jQuery UI Portlet [http://jqueryui.com/sortable/#portlets](http://jqueryui.com/sortable/#portlets)

在其中一个容器中，我创建了一个表单。

现在，当 portlet 移动并且一切正常时，我遇到了一个表单问题。

我无法使用鼠标单击表单域（输入框）。我可以通过键盘制表并输入数据，但不能使用鼠标单击。

这是某种已知问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-29T02:20:11.157

有点晚了 - 但我最近遇到了这个问题，并没有看到太多当前的解决方案..

jQuery UI Sortable 和 Draggable 都提供了一个“取消”选项，您可以按如下方式传入该选项，以防止可排序/可拖动事件绑定到指定元素。例如，这将解决在使用可拖动 portlet 时能够单击输入字段的问题。

```
$( ".selector" ).sortable({
  cancel: "a, button, #idName, .class-name"
}); 
```

[http://api.jqueryui.com/sortable/#option-cancel](http://api.jqueryui.com/sortable/#option-cancel)

[http://api.jqueryui.com/draggable/#option-cancel](http://api.jqueryui.com/draggable/#option-cancel)

如果您仍然想使用表单字段拖动 portlet，您可以尝试这个，如另一个线程中所述：

```
$('.draggable input').click(function() {
  $(this).focus();
}); 
```

# c - 关于栈帧的对齐，来自 CSAPP 的一个例子

> ID：15312373
> 
> 赞同：0
> 
> 时间：2013-03-09T15:25:23.457
> 
> 标签：c, assembly, compiler-construction, x86

IA32 遵循确保每个堆栈帧都是 16 字节长的倍数的约定。这是一个示例函数：

```
char *gets( char *s ); //get String
void puts( char *s ); //put string to the screen
void echo()
{
    char buf[8];
    gets(buf);
    puts(buf);
 } 
```

get 和 puts 只是函数调用，您可以不理会它们。

其汇编代码如下：（FROM CSAPP[计算机系统：程序员的视角]）

```
1 echo:
2 pushl %ebp            //Save %ebp on stack
3 movl %esp, %ebp
4 pushl %ebx            //Save %ebx
5 subl $20, %esp        //Allocate 20 bytes on stack
6 leal -12(%ebp), %ebx  //Compute buf as %ebp-12
7 movl %ebx, (%esp)     //Store buf at top of stack
8 call gets             //Call gets
9 movl %ebx, (%esp)     //Store buf at top of stack
10 call puts            //Call puts
11 addl $20, %esp       //Deallocate stack space
12 popl %ebx            //Restore %ebx
13 popl %ebp            // Restore %ebp
14 ret                  //Return 
```

堆栈就像：

```
 ________
| old ebp|  4 bytes 
|________|
| ebx    |  4 bytes
|________|           ___
| buf[7] |            |
|________|            |
|  ...   |            |
                      |
                      |
|________|         20 bytes
| buf[0] |            |
|________|  ebp-12    |
|  ...   |            |
                      |
|________|           _|_ 
```

那么为什么编译器分配 20 个字节而不是 24 个字节呢？因为 20+4+4 = 28 不是 16 字节的倍数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T05:13:01.397

不要忘记栈顶的返回地址！在跳转到目标之前`call`将当前压入堆栈，然后弹出该 pc 并跳回它。因此，堆栈更准确`pc``ret`

```
saved pc
old ebp
ebx
buf[7]
...
buf[0]
... 
```

它的总高度为 32 个字节。

# image-processing - 是否可以在背景的最大部分是大屏幕（播放视频）的视频中提取前景？

> ID：15312376
> 
> 赞同：1
> 
> 时间：2013-03-09T15:25:44.223
> 
> 标签：image-processing, computer-vision, background-foreground

我正在使用一系列 kinect 相机进行多视图远程呈现项目。
为了提高视觉质量我们想提取前景，例如站在中间的人使用彩色图像，彩色图像而不是深度图像，因为我们想使用更可靠的彩色图像来修复深度图像中的一些伪影.

现在的问题是前景物体（通常是 1-2 人）正站在一个巨大的屏幕前，该屏幕显示远程呈现系统的另一方也一直在移动，并且该屏幕对于某些 kinect 是可见的。是否仍然可以提取这些 kinect 的前景，如果可以，你能指出我正确的方向吗？

关于现有系统的更多信息：
我们已经有一个正在运行的系统，它可以合并所有 kinect 的深度图，但这只是到目前为止。kinect 深度传感器存在很多问题，例如与传感器的干扰和距离。颜色和深度传感器也略有偏移，因此当您将颜色（如纹理）映射到使用深度数据重建的网格上时，您有时会将地板映射到人身上。

所有这些问题都会降低深度数据的整体质量，但不会降低颜色数据的质量，因此可以将彩色图像轮廓视为“真实”图像，将深度图像视为“破损”图像。但尽管如此，网格是使用深度数据构建的。所以提高深度数据等于提高系统质量。
现在，如果您有剪影，您可以尝试在剪影之外删除/修改不正确的深度值和/或在内部添加缺失的深度值

感谢您提供的每一个提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T16:01:24.180

根据我对此类问题的经验，您提出的策略*并不是*最好的方法。

由于您具有非常量的背景，因此您要解决的问题实际上是 2D 分割。这是一个难题，人们通常使用深度来使分割更容易，而不是相反。我会尝试组合/合并来自您的 Kinect 的多个深度图，以改善您的深度图像，可能以[Kinect 融合](http://research.microsoft.com/en-us/projects/surfacerecon/)的方式，或使用经典的[传感器融合](http://en.wikipedia.org/wiki/Sensor_fusion)技术。

如果您绝对决心遵循您的策略，您可以尝试使用您不完善的深度图来组合 Kinect 的 RGB 相机图像，以重建背景的完整视图（不被前面的人遮挡）。但是，由于屏幕上不断变化的背景图像，这需要您的 Kinects 的 RGB 相机同步，我认为这是不可能的。

**根据评论/更新进行编辑**

我认为利用您对屏幕上图像的了解是您进行背景减除以增强轮廓的唯一机会。如果我理解正确的话，我认为这是一个棘手的问题，因为屏幕是立体显示器。

当您在屏幕上显示某个图像时，您可以尝试计算一个模型来描述您的 Kinect RGB 相机所看到的内容（给定立体显示及其位置、传感器类型等），本质上是一个告诉您的函数：Kinect K 看到`(r, g, b)`像素`(x, y)`当我`(r',g',b')`在显示器上显示像素`(x',y')`时。要做到这一点，您必须创建一系列校准图像，在显示器上显示，没有人站在它前面，并使用 Kinect 进行拍摄。这将允许您预测您的屏幕在 Kinect 相机中的外观，从而计算背景减法。这是一项非常具有挑战性的任务（但如果可行的话，它会给出一篇很好的研究论文）。

**附注：**您可以轻松计算 Kinect 深度相机与其彩色相机的几何关系，以避免将地板映射到人身上。某些 Kinect API 允许您检索深度相机的原始图像。如果您覆盖 IR 投影仪，您可以使用深度和 RGB 相机拍摄校准图案，并计算外部校准。

# php - 我想添加一个指向上一页的 php 文档的链接

> ID：15312377
> 
> 赞同：1
> 
> 时间：2013-03-09T15:25:45.337
> 
> 标签：php

我正在使用 PHP 向我发送电子邮件表单，当您未填写必填字段时，您将被发送到另一个页面，其中包含您需要更正的错误。

在这些错误的底部，我想创建返回链接，但我无法弄清楚我做错了什么，因为 Dreamweaver 在我写的那行显示了一个错误。所以这是代码，我将用注释标记该行。

```
<?php
if(isset($_POST['email'])) {

$email_to = "example@example.com";
$email_subject = "website html form submissions";

function died($error) {
    echo "Atsiprašome, bet yra klaidų Jūsų užpildytoje formoje.<br /><br /> ";
    echo $error."<br /><br />";
    echo "Grįžkite ir ištaisykite klaidas.<br /><br />";
    echo "<a href="contacts.html">Atgal</a>";  //this is the line
    die();
}

if(!isset($_POST['first_name']) || !isset($_POST['last_name']) || !isset($_POST['email']) || !isset($_POST['telephone']) || !isset($_POST['comments'])) {
    died('Atsiprašome, bet yra klaidų Jūsų užpildytoje formoje.');       
}

$first_name = $_POST['first_name']; // required
$last_name = $_POST['last_name'];   // required
$email_from = $_POST['email'];      // required
$telephone = $_POST['telephone'];   // not required
$comments = $_POST['comments'];     // required

$error_message = "";
$email_exp = '/^[A-Za-z0-9._%-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$/';
if(!preg_match($email_exp,$email_from)) {
    $error_message .= 'Neteisingai įvestas el. paštas.<br />';
}
$string_exp = "/^[A-Za-z .'-]+$/";
if(!preg_match($string_exp,$first_name)) {
    $error_message .= 'Neteisingai įvestas vardas.<br />';
}
if(!preg_match($string_exp,$last_name)) {
    $error_message .= 'Neteisingai įvesta pavardė.<br />';
}
if(strlen($comments) < 2) {
    $error_message .= 'Neteisingai įvesta žinutė.<br />';
}
if(strlen($error_message) > 0) {
    died($error_message);
}
$email_message = "Form details below.\n\n";

function clean_string($string) {
    $bad = array("content-type","bcc:","to:","cc:","href");
    return str_replace($bad,"",$string);
}

$email_message .= "First Name: ".clean_string($first_name)."\n";
$email_message .= "Last Name: ".clean_string($last_name)."\n";
$email_message .= "Email: ".clean_string($email_from)."\n";
$email_message .= "Telephone: ".clean_string($telephone)."\n";
$email_message .= "Comments: ".clean_string($comments)."\n";

$headers = 'From: '.$email_from."\r\n".'Reply-To: '.$email_from."\r\n" .'X-Mailer: PHP/' . phpversion();
@mail($email_to, $email_subject, $email_message, $headers);  
?>

<!-- place your own success html below -->

Ačiū už Jūsų žinutę.

<?php
}
die();
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T15:28:09.027

```
echo "<a href="contacts.html">Atgal</a>";  //this is the line 
```

What you are doing here is ending the string literal at `<a href=`.

What you need to do is change it to:

```
echo "<a href='contacts.html'>Atgal</a>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T15:37:00.587

在 PHP 中，引号用于标记字符串的开始和结束。您可以使用单引号或双引号。

`'This is a string'`

`"This too!"`

如您所见，您可以使用单引号或双引号。但是，我们也希望引号出现*在*字符串中。那么我们该如何处理呢？

好吧，一种选择是使用 Chris Cooney 的答案，并确保字符串中的引号与标记开始和结束的引号不同：

`"I'm a string"`

`'"Murder," she wrote'`

这些都是有效的。

但是当你需要在你的字符串中使用与你打开它的*相同类型的引号时呢？*例如，也许您的字符串中需要这两种类型。在这种情况下，您必须*转义*引号。这意味着 `\`在他们面前添加。

`'I\'m a valid string!'`

基于此，您可以在此行上解决您的问题：

```
echo "<a href="contacts.html">Atgal</a>"; 
```

通过编写以下任何一项：

```
echo "<a href='contacts.html'>Atgal</a>";

echo "<a href=\"contacts.html\">Atgal</a>";

echo '<a href=\'contacts.html\'>Atgal</a>'; 
```

仅举几个。

# php - php无法显示图片

> ID：15312380
> 
> 赞同：0
> 
> 时间：2013-03-09T15:25:57.867
> 
> 标签：php, image

图像存在于我的服务器中，但我无法在以下代码的帮助下找到或显示图像

```
$myimages='/uk/images/7.jpg';
echo $myimages;
echo '<img src="'; echo $myimage; echo '">';

if (file_exists($myimages)) {
    echo "The file $myimages exists";
}
else {
    echo "The file $myimages does not exist";
    $myimages=$info['aw_image_url'];
    echo $myimages;
} 
```

代码总是返回`The file doesn't exist`也不显示图像。代码有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T15:29:23.457

The path is correct for your browser, but not for `file_exists`. It checks path relative to your filesystem, so if you start the path with `/`, it will check starting from the root of your filesystem

Also, variable name where you're outputing image is `$myimages`, not `$myimage`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T15:31:37.310

1）您使用不同的变量来输出图像标签，因此图像标签被破坏

2）`file_exists`查看服务器的绝对路径，因此它不是从图像标签查看的“webroot”角度查看它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T15:32:42.117

尝试这个

```
$myimages="uk/images/7.jpg";
 echo $myimages;
 echo "<img src='$myimages' />";

if (file_exists($myimages)) {
    echo "The file $myimages exists";
} else {
echo "The file $myimages does not exist";
$myimages=$info['aw_image_url'];
echo $myimages;
} 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-03-09T15:28:55.853

You need to close the image tag with `/`

`$myimages='/uk/images/7.jpg'; echo $myimages; echo '<img src="'; echo $myimages; echo '"/>';`

Note you are also missing the letter "s" in the `$myimages` variable on line three

# c++ - 在 C++ 中打印 * 模式

> ID：15312383
> 
> 赞同：4
> 
> 时间：2013-03-09T15:26:22.007
> 
> 标签：c++

我正在尝试打印这样的图案

```
*******
*     *
*     *
*     *
*     *
*     *
******* 
```

在这里，它应该看起来像一个空盒子。但不知何故，我并没有走得更近

到目前为止，我对此进行了编码

```
#include <iostream>
using namespace std;

int main( int argc, char ** argv ) {
for(int i=1;i<=7;i++)
{
    for(int j=1;j<=7;j++)
    {
        if(j==1||j==7)
        printf("*");
        else printf(" ");
    }

    printf("\n");
}
return 0;
} 
```

我的输出是

```
*     *
*     *
*     *
*     *
*     *
*     *
*     * 
```

最好只有 for 循环

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-09T15:32:11.057

```
if(j==1||j==7)
printf("*");
else printf(" "); 
```

此逻辑适用于除第一行和最后一行之外的所有行。所以你必须考虑行值并对第一行和最后一行进行特殊检查。这两个没有空格。

[假设这是一个家庭作业，我只是给出一个提示。你几乎已经完成了，上面的提示应该足以让它工作。]

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-09T15:28:45.390

Your `if` condition simply needs to be:

```
if (i==1 || i==7 || j==1 || j==7) 
```

That is, you need to check whether you're on either the first or last rows as well as either the first or last columns, and then print a `*`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-09T15:28:37.813

You need to behave differently during first and last row:

```
int W = 7, H = 7;
for(int i=0;i<=H;i++)
{
  for(int j=0;j<=W;j++)
  {
     // if row is the first or row is the last or column is the first of column is the last
     if (i == 0 || i == H-1 || j == 0 || j == W-1)
       printf("*");
     else printf(" ");
  }

  printf("\n");
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-09T15:31:22.690

你很亲密。问题出在这一行：

```
 if(j==1||j==7) 
```

更改它，使其也考虑到顶行和底行。

祝你好运

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-09T15:35:35.937

此功能将正常工作：

```
#include <iostream>
#include <string>

void printBox(int width, int height) {
    if (width < 2 or height < 1) return;
    for (int i = 1; i <= height; i++) {
        if (i == 1 or i == height) {
            std::string o(width, '*');
            std::cout << o << std::endl;
        } else {
            std::string o(width-2, ' ');
            o = '*' + o + '*';
            std::cout << o << std::endl;
        }
    }
} 
```

它可以用作：

```
printBox(2, 2); 
```

打印：

```
**
** 
```

或者作为：

```
printBox(6, 4); 
```

打印：

```
******
*    *
*    *
****** 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-08-07T18:14:33.060

由于我不是编程专家，所以我想出了这个简单的代码：

```
#include <stdio.h>

int main(void)
{
    int i,j,k,n;

    printf("Enter no of rows : \n");
    scanf("%d", &n);

    for(i=0; i<n; i++)
    {
        if(i == 0 || i == (n-1))
        {
            for(j=0; j <n-1; j++)
                printf("*");
        }              
        else
        {
            for(k=0; k<n; k++)
            {
                if (k == 0 || k == (n-2))
                    printf("*");
                else
                    printf(" ");
            }
        }

        printf("\n");
    }

    return 0; 
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-08-08T08:23:17.347

```
for(int j=1;j<=7;j++)
{
    if(j==1||j==7)
        printf("*******\n");
    else
        printf("*     *\n");
}

printf("\n"); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-09T15:30:06.050

您平等地对待所有行，而忽略了必须以不同方式处理第一行和最后一行的事实。你需要类似的东西

```
if (i == 1 || i == 7)
{
    for (j=1;j<7;j++) printf("*");
    printf("\n");
}
else { /* your routine */ } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-09T15:30:18.727

这就是你的代码应该是这样的：

```
#include <iostream>
using namespace std;

int main( int argc, char ** argv ) {
for(int i=1;i<=7;i++)
{
    for(int j=1;j<=7;j++)
    {
        if(j == 1 || j == 7)
           printf("*");
        else if (i == 1 || i == 7 ) //added this check
             printf ("*");
        else printf(" ");
    }

    printf("\n");
}
return 0;
} 
```

[活生生的例子](http://liveworkspace.org/code/2AZaXl%249)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-08-15T03:17:42.507

```
#include <iostream>
#include<iomanip>
using namespace std;

main()
{
      int Width;
      char MyChar;
      int LCV;    //Loop control
      int LCVC, LCVR;    //Loop control for LCVC=Columns LCVR=Rows

      cout<<"\nEnter Width: "; cin>>Width;
      cout<<"\nEnter a Character: "; cin>>MyChar;

      for (LCV=1;LCV<=Width;LCV++)
      {cout<<MyChar;}
      cout<<endl;
      for(LCVC=1;LCVC<=Width;LCVC++)
      { cout<<MyChar<<setw(Width-1)<<MyChar<<endl;

      }
      for (LCV=1;LCV<=Width;LCV++)
      {cout<<MyChar;}
      cout<<endl;
      system("pause");
}

/*
Enter Width: 6

Enter a Character: #
######
#    #
#    #
#    #
#    #
#    #
#    #
######
Press any key to continue . . .
*/ 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-08-08T01:41:33.537

正如其他人所说，您需要处理第一行和最后一行。构建每一行的一种方法是使用字符串构造函数之一，因此您不需要编写内部循环。

```
#include <string>
#include <iostream>
using namespace std;

int main()
{
    int height = 7, width = 7;

    for( int i=0; i<height; i++ )
    {
        char c = (i == 0 || i == height-1) ? '*' : ' ';
        string line(width, c);
        line[0] = line[width-1] = '*';
        cout << line << endl;
    }
    return 0;
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-03-04T16:18:59.353

打印此模式输入一个数字=每个数字，例如 23517 **

* * *

* * *

*

* * *

然后 ** *** ***** * ******* 然后 ** * *** * ***** *

* * *

和 * * * * *

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-03-09T15:58:24.833

你需要一个嵌套循环。因为您在它们之间有两个选项，所以您需要两个嵌套循环。在迭代 1 和 7（0 和 6）中，一个用于空格，一个用于填充“*”。

打印第 1 行和第 7 行，用“*”填充边界星。使用

```
if (i == 0 || i == 7)  // in-case you're initializing i with 0
    // loop for printf ("*"); 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-08-06T07:44:53.980

我想出了一个简单的解决方案。您可以保持它非常简单，而不是使用您使用的 char 数组指针。

```
#include <iostream>
using namespace std;

int main() {
    int rows = 7;
    for(int i = 1; i<=rows;i++){
        if(i == 1 || i == rows){
            cout<<"*******"<<endl;
        }else{
            cout<<"*     *"<<endl;
        }
    }
    return 0;
}   // This code outputs 7 rows with 7 characters in 1st and 7 line each and 1 each character at the start and last position of the remaining rows 
```

但是如果你想要自定义的行数，你可以试试下面的代码

```
#include <iostream>
using namespace std;

int main() {
    int rows;
    cout<<"Enter the number of rows: ";
    cin>>rows;  // gets input rows from the user

    for(int i = 1; i<=rows;i++){
        if(i == 1 || i == rows){
            cout<<"*******"<<endl;
        }else{
            cout<<"*     *"<<endl;
        }
    }
    return 0;
} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-05-12T11:25:46.593

你可以加：

```
 `if(i==0 || i==6)
    {
    cout<<"*";
    }` 
```

# wordpress - 使用短代码更改页面标题

> ID：15312385
> 
> 赞同：3
> 
> 时间：2013-03-09T15:26:36.783
> 
> 标签：wordpress

我正在编写一个插件，我使用一个短代码来呈现页面内容。我想更改页面标题。我用这个：

```
// Change the title of the page of the charts to add the current month. 
add_filter('the_title', 'charts_title', 10, 2);
function charts_title($title, $id) { 
  $title .= ' ' . date('F Y');
  return $title;
} 
```

但它对所有帖子和页面都这样做。我可以只对包含我创建的短代码的页面执行此操作吗？我试图这样做，但它不起作用。

```
add_shortcode('charts-vote', 'charts_vote');
function charts_vote($atts) {
    // Add the filter only in the short code function callback.
    add_filter('the_title', 'charts_title', 10, 2);   

    // ... // 
    return $content;
} 
```

有人可以帮帮我吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T19:30:15.193

我了解您的设置细节可能需要检查简码，但也许可以使用自定义字段：

```
add_filter( 'the_title', 'charts_title_so_15312385', 10, 2 );

function charts_title_so_15312385( $title, $post_id ) 
{ 
    // Admin area, bail out
    if( is_admin() )
        return $title;

    // Custom field not set, bail out
    $mod_title = get_post_meta( $post_id, 'mod_title', true );
    if( !$mod_title )
        return $title;

    // Ok, modify title
    $title .= ' ' . date( 'F Y' );
    return $title;
} 
```

简码甚至可以与自定义字段“对话”以进行扩展配置。

为了便于使用，您可以制作[自定义元框](https://wordpress.stackexchange.com/search?q=%2Badd_meta_box+%2Bsave_post+is%3Aanswer)或使用[高级自定义字段](http://wordpress.org/extend/plugins/advanced-custom-fields/)之类的插件。

# c - 不完整的数组类型是否保证能够存储一个元素？

> ID：15312392
> 
> 赞同：1
> 
> 时间：2013-03-09T15:27:20.197
> 
> 标签：c, arrays, incomplete-type

**在著名的***[Struct hack](http://www.informit.com/guides/content.aspx?g=cplusplus&seqNum=288)******中使用了不完整的数组类型***，并且从 c99 标准开始就允许使用它们。在 c99 标准之前，这些是不允许的。我正在查看标准，但无法得出结论：**

 **结构之外是否允许不完整的数组类型？（*我在标准 C99：6.7.2.1.15 中找到的所有参考资料都将其作为结构中的最后一个元素进行讨论*）。

那么是否允许按照标准编译以下程序？

```
int array[];
int main(){return 0;} 
```

我的问题的第二部分是，如果允许这样做，则`array`保证能够存储它们类型的***至少一个***元素`int`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T15:29:20.977

*是否允许按照标准编译以下程序？*

是的，根据：

> (C99, 6.9.2p5) "示例 2 如果在包含 int i[] 的翻译单元的末尾；数组 i 仍然具有不完整类型，则隐式初始化程序会导致它有一个元素，该元素在程序启动时设置为零。”

所以

```
int array[];
int main(){return 0;} 
```

有效且等效于：

```
int array[1];
int main(){return 0;} 
```

请注意，仅当`array`具有（如上）外部链接时才可以：

> （C99，6.9.2p3）“如果对象标识符的声明是一个暂定定义并且具有内部链接，则声明的类型不应是不完整的类型。”**

# postgresql - FluentNHibernate - overriding already existing automappings

> ID：15312393
> 
> 赞同：0
> 
> 时间：2013-03-09T15:27:30.120
> 
> 标签：postgresql, fluent-nhibernate, fluent-nhibernate-mapping

I'm trying hard to find a solution to be able to override the automapping of my entity.

The flow of execution is that AutoMapping (using conventions) occurs first and then mapping overrides are executed.

My entity "Signature" is already mapped by automapper (do not confuse with Automapper library!) and I want to change the db type of some columns.

If I do something like this:

```
public class SignatureMap : IAutoMappingOverride<Signature>
{
    public void Override(AutoMapping<Signature> mapping)
    {
        mapping.Map(x => x.SignType).CustomSqlType("character varying");
        mapping.Map(x => x.Status).CustomSqlType("integer").Nullable();
    }
} 
```

I get NHibernate errors with `NpgsqlParameterCollection` (index out of range) when trying to execute an insert to the table.

This probably occurs because the `mapping.Map` function just adds another mapping to the collection instead of overriding one that already exists (I examined the FluentNHibernate source code).

What is the proper way to override the Sql type using `IAutoMappingOverride` ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T15:58:22.127

您使用的覆盖语法没有任何问题，请确保您：
1）在配置中实际引用您的覆盖映射：`.UseOverridesFromAssemblyOf<SignatureMap>();`
2）验证 NHibernate 是否按预期处理您的数据库模式。您可以为此使用类似的东西`new SchemaExport(config).Create(true, false);`，这会将 sql 输出到控制台。

如果 1 和 2 都可以，那么问题可能出在您的插入代码中。

# angularjs - angularjs：在 ng-model $scope.resource 之后看起来不一样

> ID：15312396
> 
> 赞同：0
> 
> 时间：2013-03-09T15:27:48.710
> 
> 标签：angularjs, angularjs-scope

我的控制器中有两个功能。

*   `showEditScreen`实际加载用户记录 的函数`$resource.get`。
*   `updateUserDetails`应该更新用户的功能。

在`showEditScreen`函数中一切正常。用户详细信息通过 json 解析，并且在查看`$scope.user`对象函数时，如`$get`, `$post`,`$update`存在。

当查看函数中的相同（也是未修改的）对象时，`updateUserDetails`该对象已更改，并且所有函数（如`$get`、`$post`等`$update`）都丢失了。

这是一个非常奇怪的行为。有人对此有解释吗？

当我使用 http.put 时，我可以顺便保存对象。

**showEditScreen() 函数中的 console.log($scope.user) 输出**

```
Resource {$get: function, $save: function, $query: function, $remove: function, $delete:      function…}
firstName: "Mista"
id: "d419375a-ba0b-4177-93cf-842e2c3e046e"
lastName: "BlaaahBlaaah1"
password: "bla"
roles: Array[2]
username: "blabla1"
__proto__: Resource 
```

**updateUserDetails() 函数中的 console.log($scope.user)：**

```
Resource {id: "d419375a-ba0b-4177-93cf-842e2c3e046e", firstName: "Mista", lastName: "BlaaahBlaaah1", username: "blabla1", password: "bla"…}
firstName: "Mista"
id: "d419375a-ba0b-4177-93cf-842e2c3e046e"
lastName: "BlaaahBlaaah1"
password: "bla"
roles: Array[2]
username: "blabla1"
__proto__: Resource 
```

**在 updateUserDetails() 函数中执行 $scope.user.$update() 时：**

```
POST http://localhost:8080/api/user/.json 405 (Request method 'POST' not supported)      angular.js:9120
(anonymous function) angular.js:9120
sendReq angular.js:8977
$http angular.js:8768
Resource.(anonymous function) angular-resource.js:385
Resource.(anonymous function) angular-resource.js:431
UserCtrl.$scope.updateUserDetails controllers.js:37
(anonymous function) angular.js:6212
(anonymous function) angular.js:12751
Scope.$eval angular.js:7905
Scope.$apply angular.js:7985
$delegate.__proto__.$apply index.html:500
(anonymous function) angular.js:12750
(anonymous function) angular.js:1928
forEach angular.js:110
eventHandler angular.js:1927 
```

**HTML：**

```
<div id="user_list" class="listview_list">
<div id="user_row" class="listview_row" ng-repeat="user in users">
    <div id="user_username" class="listview_column"><span class="listview_fat">   {{user.username}}</span></div>
    <div id="user_firstname" class="listview_column">{{user.firstName}}</div>
    <div id="user_lastname" class="listview_column">{{user.lastName}}</div>
    <button class="listview_row_button" ng-click="showEditScreen(user.id)">Edit</button>
</div>
</div>

<div id="user_edit" class="edit_form" ng-show="userEditScreenIsVisible">
<form name="edit_user">
    <label>Username</label><br/>
    <input name="username" ng-model="user.username" required/><br/>
    <label>Firstname</label><br/>
    <input name="firstName" ng-model="user.firstName" required/><br/>
    <label>Lastname</label><br/>
    <input name="lastName" ng-model="user.lastName" required/><br/>
    <button class="button" ng-click="hideEditScreen()">Close</button>
    <button class="button" ng-click="updateUserDetails()">Update</button>
</form>
</div> 
```

**控制器：**

```
/*
* Controller to display and manipulate users.
*/
function UserCtrl($scope, $http, Users, User) {
// set edit screen to invisible by default
$scope.userEditScreenIsVisible = false;

// set new screen to invisible by default
$scope.userNewScreenIsVisible = false;

// display list with users
Users.query(
    {}, //params
    function (data) { //success
        $scope.users = data.data;
    },
    function (data) { //failure
        console.log("Error occurred while getting list of users");
    });

// show edit screen if edit button is clicked
$scope.showEditScreen = function(id) {
    $scope.user = User.get({userId: id});
    console.log($scope.user);
    $scope.userEditScreenIsVisible = true;
}

// hide edit screen if close button is clicked
$scope.hideEditScreen = function() {
    $scope.userEditScreenIsVisible = false;
}

$scope.updateUserDetails = function() {
    console.log($scope.user);
    $scope.user.$update();
    //$http.put("http://localhost:8080/api/user/" + $scope.user.id + ".json", $scope.user);
}

// show new screen if add button is clicked
$scope.showNewScreen = function() {
    $scope.userNewScreenIsVisible = true;
}
} 
```

**服务：**

```
angular.module('user.services', ['ngResource']).
factory('Users', function($resource) {
    return $resource('http://localhost\\:8080/api/user/all.json', {}, {
        query: {method:'GET', params:{}, isArray:false}
    });
}).
factory('User', function($resource){
    return $resource('http://localhost\\:8080/api/user/:userId.json', {}, {
       get: {method:'GET'},
       update: {method:'PUT'}
    });
}) 
```

**问题解决了！！！！**

服务：

```
// User Service
angular.module('user.services', ['ngResource']).
factory('User', function($resource){
    return $resource('/api/user/:userId', {userId: '@id'}, {
       query: {method: 'GET', headers: [{'Content-Type': 'application/json'}, {'Accept'  : 'application/json'}]},
       get: {method:'GET', headers: [{'Content-Type': 'application/json'}, {'Accept' :  'application/json'}]},
       update: {method:'PUT', headers: [{'Content-Type': 'application/json'}, {'Accept'  : 'application/json'}]}
    });
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T22:38:19.933

Vineet 解决了第一个问题。实际上存在 $get、$post、$delete 等函数。在 Chrome Batarang 环境中扩展日志记录时再往下走。

我的实际问题是默认查询方法不喜欢最后的文件扩展名，例如 .json

如果在不解析 Id 时使用文件扩展名，则会发生以下情况：

*   /api/user/.json

但我们希望有以下显示所有用户：

*   /api/用户/

因此不应使用文件扩展名。Content-Type 应通过标头协商。然后文件扩展名将不是确定 Content-Type 所必需的。

我通过以下方式更改了我的 user.service：

```
angular.module('user.services', ['ngResource']).
factory('User', function($resource){
    return $resource('http://localhost\\:8080/api/user/:userId', {userId: '@id'}, {
       query: {method: 'GET', headers: [{'Content-Type': 'application/json'}, {'Accept': 'application/json'}]},
       get: {method:'GET', headers: [{'Content-Type': 'application/json'}, {'Accept': 'application/json'}]},
       update: {method:'PUT', headers: [{'Content-Type': 'application/json'}, {'Accept': 'application/json'}]},
       create: {method:'POST', headers: [{'Content-Type': 'application/json'}, {'Accept': 'application/json'}]},
       delete: {method:'DELETE', headers: [{'Content-Type': 'application/json'}, {'Accept': 'application/json'}]}
    });
}) 
```

我的控制器如下所示：

```
function UserCtrl($scope, $resource, User) {
// set edit screen to invisible by default
$scope.userModScreenIsVisible = false;

// initialize buttons as invisible
$scope.updateUserDetailsButtonIsVisible = false;
$scope.saveUserDetailsButtonIsVisible = false;

// display list with users
$scope.getList = function() {
    User.query(
        {}, //params
        function (data) { //success
            $scope.users = data.data;
        },
        function (data) { //failure
            console.log("Error occurred while getting list of users");
        });
}
$scope.getList();

// show edit screen if edit button is clicked
$scope.showEditScreen = function(id) {
    $scope.user = User.get({userId: id});
    $scope.updateUserDetailsButtonIsVisible = true;
    $scope.userModScreenIsVisible = true;
}

// hide edit screen if close button is clicked
$scope.hideEditScreen = function() {
    $scope.updateUserDetailsButtonIsVisible = false;
    $scope.saveUserDetailsButtonIsVisible = false;
    $scope.userModScreenIsVisible = false;
}

// update a user
$scope.updateUserDetails = function() {
    $scope.user.$update();
    for(var i=0;i<$scope.users.length;i++) {
        if($scope.users[i].id == $scope.user.id) {
            angular.extend($scope.users[i], $scope.user);
            break;
        }
    }
    console.log($scope.user);
    //$scope.user = User.get({userId: $scope.user.id});
    $scope.updateUserDetailsButtonIsVisible = false;
    $scope.userModScreenIsVisible = false;
}

// show a new user screen
$scope.showNewScreen = function() {
    $scope.user = new User();
    $scope.saveUserDetailsButtonIsVisible = true;
    $scope.userModScreenIsVisible = true;
}

// save a new user
$scope.saveUserDetails = function() {
    $scope.user.$create();
    $scope.users.push($scope.user);
    $scope.saveUserDetailsButtonIsVisible = false;
    $scope.userModScreenIsVisible = false;
}

// delete a user
$scope.deleteUser = function(id) {
    $scope.user = User.get({userId: id});
    $scope.user.$delete();
}
} 
```

的HTML：

```
<div id="user_list" class="listview_list">
<div id="user_row" class="listview_row" ng-repeat="u in users">
    <div id="user_username" class="listview_column"><span class="listview_fat">{{u.username}}</span></div>
    <div id="user_firstname" class="listview_column">{{u.firstName}}</div>
    <div id="user_lastname" class="listview_column">{{u.lastName}}</div>
    <button class="listview_row_button" ng-click="deleteUser(u.id)">Delete</button>
    <button class="listview_row_button" ng-click="showEditScreen(u.id)">Edit</button>
</div>
</div>
<div id="user_new" class="new_user">
<button class="new_user_button" ng-click="showNewScreen()">Add user</button>
</div>

<div id="user_mod" class="mod_form" ng-show="userModScreenIsVisible">
<form name="mod_user">
    <label>Username</label><br/>
    <input name="username" ng-model="user.username"/><br/>
    <label>Firstname</label><br/>
    <input name="firstName" ng-model="user.firstName"/><br/>
    <label>Lastname</label><br/>
    <input name="lastName" ng-model="user.lastName"/><br/>
    <button class="button" ng-click="hideEditScreen()">Close</button>
    <button class="button" ng-click="updateUserDetails()" ng-show="updateUserDetailsButtonIsVisible">Update</button>
    <button class="button" ng-click="saveUserDetails()" ng-show="saveUserDetailsButtonIsVisible">Save</button>
</form>
</div> 
```

# c# - Counting threads with lock and without (c#)

> ID：15312397
> 
> 赞同：1
> 
> 时间：2013-03-09T15:27:57.123
> 
> 标签：c#, .net, multithreading, asynchronous, synchronization

[Grant Crofton's answer](https://stackoverflow.com/a/3465873/200449) to the question "Unordered threads problem" has a comment:

> "And if you remove the lock the final count might be less than 100."

Why?

Here is the code for context

```
class Program
{
    static object locker = new object();
    static int count=0;

    static void Main(string[] args)
    {
        for (int j = 0; j < 100; j++)
        {
            (new Thread(new ParameterizedThreadStart(dostuff))).Start(j);
        }
        Console.ReadKey();
    }

    static void dostuff(object Id)
    {
        lock (locker)
        {
            count++;
            Console.WriteLine("Thread {0}: Count is {1}", Id, count);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T15:42:57.583

这是**没有**锁*可能*发生的情况：

 **```
Count = 0

ThreadA Reads Count As 0 
ThreadB Reads Count As 0
ThreadA Writes New Incremented Count As 0 + 1
ThreadB Writes New Incremented Count As 0 + 1

Count = 1 
```

这些被称为[竞争条件](http://en.wikipedia.org/wiki/Race_condition)，并通过使操作[原子化来解决](http://en.wikipedia.org/wiki/Linearizability)

```
Count = 0

ThreadB Wins Race To Lock()
ThreadB Reads Count As 0
ThreadB Writes New Incremented Count As 0 + 1
ThreadB Unlocks

ThreadA Next for Lock()
ThreadA Reads Count As 1
ThreadA Writes New Incremented Count As 1 + 1
ThreadA Unlocks

Count = 2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T15:32:56.197

因为锁保护`count`变量免受多个线程试图一次增加它的影响。如果发生这种情况，可能会给您带来奇怪的结果。

锁确保线程一次只能进入一个函数，因此一次只能执行一个函数内部的操作。

如果你删除它，那么线程可以同时进入，在任何这些操作的中间被中断，给你奇怪的结果，乱序的结果等等。**

# java - How to use an array that was returned from a method in Java

> ID：15312399
> 
> 赞同：2
> 
> 时间：2013-03-09T15:28:05.407
> 
> 标签：java, arrays, methods, multidimensional-array, return

I created a method that reads a bunch of numbers from a file, takes the first two numbers to be the row and the column length of the array, then converts the rest of them into integers and places the integers into the two dimensional array:

```
public static int[][] fillArray(String myFile){
    //uses another class to create a text field
    TextFileInput in = new TextFileInput(myFile); 

    int[][] filledArray;
    //uses a method in class TextInputFile to read a line then go to the next line
    String line = in.readLine();
    //int i=0;
    int row, col;
    row = Integer.parseInt(line);
    line = in.readLine();
    col = Integer.parseInt(line);
    filledArray = new int[row][col];
    for(int i=0; i<row; i++){
        for (int j=0; j<col; j++){
            line = in.readLine();
            filledArray[i][j] = Integer.parseInt(line);
        }
    }
    return filledArray;
} 
```

My question is how would I access the individual elements in my multidementional array `filledArray`? As in, how would I print what's in `filledArray[1][3]` or add `filledArray[1][3]+filledArray[2][3]` in the main method?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T15:31:40.443

fillArray 方法返回对其创建的数组的*引用。*您所要做的就是在您的 main 方法中为此分配一个局部变量。

```
public static void main(String[] args) {
   int[][] arr = fillArray("file.txt");

   System.out.println(arr[1][3]);

   System.out.println(arr[1][3] + arr[2][3]);
} 
```

您可以通过使用数组中的索引来访问各个元素，例如`arr[4][2]`. 请注意不要生成*IndexOutOfBoundsException*，这就是为什么在 for 循环中检查数组长度是个好主意的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T15:31:42.977

只需将返回的数组存储在本地数组中

```
public static void main(String[]args){
  int[][]array = fillArray("fileName"); // call the method
  // traverse the array using a loop

  for(int i=0;i<array.length;i++)
    for(int j=0;j<array[i].length;j++)
     System.out.println(a[i][j]); // do something with elements 

 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T15:32:08.870

您将获取 的结果`fillArray(...)`，将其存储在变量中，然后对其进行处理。

例如

```
int[][] filled=fillArray("file.txt");
System.out.println(filled[1][3]);
System.out.println(filled[1][3]+filled[2][3]); 
```

# iphone - 试图通过使用委托点击取消来关闭视图控制器（根本不工作）

> ID：15312407
> 
> 赞同：0
> 
> 时间：2013-03-09T15:28:37.063
> 
> 标签：iphone, uiviewcontroller, delegation, popviewcontroller

在导航控制器中有两个视图控制器：

`PhoneNumbersTVC`> 保存由`NewPhoneNumberTVC` `NewPhoneNumberTVC`> 添加电话号码的控制器添加的电话号码列表

当我点击取消时，`NewPhoneNumberTVC`我想回到`PhoneNumbersTVC`一个代表团，如下所示。

**电话号码TVC.h**

```
#import <UIKit/UIKit.h>
#import "NewPhoneNumberTVC.h"

@interface PhoneNumbersTVC : UITableViewController <NewPhoneNumberTVCDelegate>

@end 
```

**电话号码TVC.m**

```
- (void)saveBtnWasTappedOnNewPhoneNumberTVC:(NewPhoneNumberTVC *)newPhoneNumberTVC
{
    NSLog(@"saveBtnWasTappedOnNewPhoneNumberTVC");
    [newPhoneNumberTVC.navigationController popViewControllerAnimated:YES];
}

- (void)cancelBtnWasTappedOnNewPhoneNumberTVC:(NewPhoneNumberTVC *)newPhoneNumberTVC
{
    NSLog(@"cancelBtnWasTappedOnNewPhoneNumberTVC");
    [newPhoneNumberTVC.navigationController popViewControllerAnimated:YES];
} 
```

**新电话号码TVC.h**

```
#import <UIKit/UIKit.h>

@class NewPhoneNumberTVC;

@protocol NewPhoneNumberTVCDelegate <NSObject>

- (void)saveBtnWasTappedOnNewPhoneNumberTVC:(NewPhoneNumberTVC *)newPhoneNumberTVC;
- (void)cancelBtnWasTappedOnNewPhoneNumberTVC:(NewPhoneNumberTVC *)newPhoneNumberTVC;

@end

@interface NewPhoneNumberTVC : UITableViewController

@property (weak, nonatomic) id <NewPhoneNumberTVCDelegate> delegate;
@property (strong, nonatomic) NSManagedObjectContext *managedOC;

@property (weak, nonatomic) IBOutlet UITextField *phoneNumberTextField;

- (IBAction)saveBtnTapped:(UIBarButtonItem *)sender;
- (IBAction)cancelBtnTapped:(UIBarButtonItem *)sender;

@end 
```

**新电话号码TVC.m**

```
- (IBAction)cancelBtnTapped:(UIBarButtonItem *)sender
{
    NSLog(@"cancelBtnTapped");
    self.phoneNumberTextField.text = @"";
    self.phoneKindTextField.text = @"";
    [self.delegate cancelBtnWasTappedOnNewPhoneNumberTVC:self]; 
```

}

当我点击取消时，`NewPhoneNumberTVC`我看到上面的方法`cancelBtnTapped`触发但`delegation`不起作用，没有`method`执行`PhoneNumbersTVC`。视图没有消失，我没有看到：`cancelBtnWasTappedOnNewPhoneNumberTVC`on `console`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T16:05:25.550

如果你想`cancelBtnWasTappedOnNewPhoneNumberTVC:`调用这个方法，你肯定需要将你的对象的委托设置`NewPhoneNumberTVC`为一个`PhoneNumbersTVC`对象。例如，**PhoneNumbersTVC.m**中应该存在一些代码：

```
NewPhoneNumberTVC *myNewPhoneNumberTVC = [[NewPhoneNumberTVC alloc] init];
myNewPhoneNumberTVC.delegate = self; 
```

您可以按以下方式登录以验证委托是否设置成功“

**新电话号码TVC.m**

```
- (IBAction)cancelBtnTapped:(UIBarButtonItem *)sender
{
NSLog(@"cancelBtnTapped");
self.phoneNumberTextField.text = @"";
self.phoneKindTextField.text = @"";
NSLog(@"self.delegate :%@",self.delegate);
[self.delegate cancelBtnWasTappedOnNewPhoneNumberTVC:self];
} 
```

# c++ - Unexpected behavior in Qt Model View classes

> ID：15312409
> 
> 赞同：1
> 
> 时间：2013-03-09T15:28:43.863
> 
> 标签：c++, qt, model-view-controller

I have a piece of code in my application as follows :

`....`

 ````
QStandardItemModel* authorModel = getAuthorModel(author);

// Create result tab
QTableView* tblView = new QTableView();
tblView->setModel(authorModel);

controller.queryAuthor(author, authorModel);
qDebug() << authorModel->setHeaderData(0, Qt::Horizontal, QVariant("Author Name"), Qt::DisplayRole);
qDebug() << authorModel->setHeaderData(1, Qt::Horizontal, QVariant("Author Id"), Qt::DisplayRole);

int tabIdx = ui->mainTabWidget->addTab(tblView, author);
ui->mainTabWidget->setCurrentIndex(tabIdx);

tblView->setColumnHidden(1, true); 
````  `This code is called multiple times creating different tableviews. When authorModel is empty, then setting headerdata fails, also, setColumnHidden fails and once the data is populated default numeric headers are shown and column 1 is visible. Both qDebug statements return false.

However, when the same populated model is used to create a new table view, in the new view column 1 is hidden without issues, and headers are set as they should be. Both qDebug statements return true.

What is the problem and how can it be alleviated ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T21:44:36.980

进入 QStandardItemmodel 实现表明，对于这些函数，除非列存在以开始更新标题数据，否则无效。

因此，可以通过设置模型之前使用的列数来解决此问题

```
authorModel->setColumnCount(2); 
```

这样，即使模型数据为空列计数也将返回 2，并且在您的情况下调用设置标题数据应该没问题`

# android - Android ListView. Vertical scrollbar isn't visible always for wide list

> ID：15312413
> 
> 赞同：1
> 
> 时间：2013-03-09T15:29:07.293
> 
> 标签：android, listview, android-listview

I have ListView which is wider than parent view. To have horizontal scrolling I've wrapped it with HorizontalScrollView.

Simplified layout XML:

```
<HorizontalScrollView
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <RelativeLayout
        android:id="@+id/main"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <ListView 
            android:id="@+id/children"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            />
    </RelativeLayout>
</HorizontalScrollView> 
```

So that I have vertical scrollbar in the ListView and horizontal scrollbar in the HorizontalScrollView.

My problem is that I don't see vertical list scrollbar unless the HorizontalScrollView isn't scrolled to the rightest position. Because vertical scrollbar along the right edge of the ListView.

Is there a way to make vertical scrollbar visible along the right edge of HorizontalScrollView? To make list vertical scrollbar visible in any HorizontalScrollView position.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T15:42:28.550

试试这个：

```
<HorizontalScrollView 
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" 
        android:scrollbars="none">

            <LinearLayout android:id="@+id/main"
                    android:layout_width="wrap_content"
                    android:layout_height="fill_parent"
                    android:orientation="horizontal">

                    <ListView android:id="@+id/children"
                        android:layout_width="fill_parent"
                        android:layout_height="fill_parent" />
        </LinearLayout>
</HorizontalScrollView> 
```

# javascript - Checkbox change function does not work except clicking on it

> ID：15312418
> 
> 赞同：-1
> 
> 时间：2013-03-09T15:29:29.543
> 
> 标签：javascript, jquery

I have written a function for a hdcheck checkbox.

```
$('#hdcheck').change(function () {
  if($(this).is(':checked')) {
    alert("It is Checked");
  }
  else {
    alert("It is Unchecked");
  }
}); 
```

It works find when I check or uncheck the checkbox but I have made a function that problematically make this checkbox checked or unchecked. Here is the function on checkbox `chk_1`:

```
$('#chk_1').change(function () {
  if($(this).is(':checked')) {
    $('#hdcheck').prop("checked", true);
  }
  else {
    $('#hdcheck').prop("checked", false);
  }
}); 
```

This function works fine on making the first checkbox (`hdcheck`) checked or unchecked but it does not pop ups the alert message. Mean the function `$('#hdcheck').change(function()` does not work.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T15:31:49.713

当您以编程方式更改属性时，您应该触发更改事件，这是代码的缩小版本 + 更改触发器。

```
$('#chk_1').change(function() {
    $('#hdcheck').prop("checked", this.checked).change();
}); 
```

这不是*错误*，这是预期的行为。

# python - 解决 RestructuredText 中的替换问题

> ID：15312420
> 
> 赞同：7
> 
> 时间：2013-03-09T15:29:42.163
> 
> 标签：python, substitution, restructuredtext, docutils

我想采用以下包含[替换定义](http://docutils.sourceforge.net/docs/ref/rst/restructuredtext.html#substitution-definitions)的重组文本片段：

```
text = """

|python|

.. |python| image:: python.jpg
""" 
```

并解析定义，以便显示替换文本：

```
resolved_text = """
.. image:: python.jpg

""" 
```

docutils 或其他模块中是否有可以执行此操作的功能或实用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T16:36:20.920

`docutils`提供[发布者函数](http://docutils.sourceforge.net/docs/api/publisher.html#publisher-convenience-functions)以将 docutils 用作库。

因此 using`docutils.core.publish_string`可能是您的用例的一个选项。

```
In [90]: from docutils import core

In [91]: text = '|python|\n\n.. |python| image:: python.jpg\n'

In [92]: print core.publish_string(text)
<document source="<string>">
    <paragraph>
        <image alt="python" uri="python.jpg">
    <substitution_definition names="python">
        <image alt="python" uri="python.jpg"> 
```

默认情况下`puplish_string`使用`pseudoxml`编写器，您可以在输出中看到它。但是，如果您真的想从问题中获得纯文本输出，则需要一个从`docutils.writers.Writer`. 我不确定如何实现这一点，也许`Sphinx` [TextWriter](https://bitbucket.org/birkenfeld/sphinx/src/8ec0b3a74e791e59dfee2d484380c34881530a89/sphinx/writers/text.py?at=default#cl-133)可能是一个起点。

似乎如果你真的只需要简单的替换，`replace`在你的文本上使用会是一个更简单的解决方案，如果你需要更复杂的东西，使用 docutils 实现这个也很复杂。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T22:51:40.060

查看[Docutils 黑客指南](http://docutils.sourceforge.net/docs/dev/hacking.html)。它解释了 docutils 是如何工作的。

`Transform`您可能会通过对通过解析输入文件生成的节点树应用适当的来逃避。应用转换后，您应该使用`Writer`对象再次输出 ReStructuredText。这个作家还不存在，所以你必须先创建它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T05:15:36.050

不确定我是否完全理解这个问题，但这里是使用列表理解进行提取的一个尝试：

```
extracted_line = [x for x in text.split("\n") if x[:2] == ".."][0]
resolved_text = """{}""".format(extracted_line.replace("|python|","")) 
```

如果预期不止一次出现 sub def，则需要添加一些逻辑。

# c# - 如何通过使用委托来改进代码重用？

> ID：15312424
> 
> 赞同：0
> 
> 时间：2013-03-09T15:30:14.390
> 
> 标签：c#, methods, delegates, code-reuse

我正在编写一个类，它利用`USING`语句连接到服务器上的任务调度程序并“做事”；比如启用/禁用任务、启动和停止等。我想改进代码重用，也许通过使用委托，但我不知道如何去做。这是我当前的一些代码：

```
private static void StopRunningTask(string taskName, string hostName)
{
   Regex regex = GetRegexForFindTask(taskName);
   using (TaskService ts = new TaskService(hostName))
   {
      foreach (Task t in ts.FindAllTasks(regex, true))
      {
         if (t.Name.Equals(taskName, StringComparison.OrdinalIgnoreCase) && t.State == TaskState.Running)
           t.Stop();
      }
   }

private static void RunTask(string taskName, string hostName)
{
   Regex regex = GetRegexForFindTask(taskName);
   using (TaskService ts = new TaskService(hostName))
   {
      foreach (Task t in ts.FindAllTasks(regex, true))
      {          
         if (t.Name.Equals(taskName, StringComparison.OrdinalIgnoreCase) && t.State == TaskState.Ready)
         t.Run();
      }
   }

private static void ChangeTaskEnabledState(string taskName, bool enabled, string hostName)
{
   Regex regex = GetRegexForFindTask(taskName);
   using (TaskService ts = new TaskService(hostName))
   {
      foreach (Task t in ts.FindAllTasks(regex, true))
      {
         if (t.Name.Equals(taskName, StringComparison.OrdinalIgnoreCase))
         t.Enabled = enabled;
      }
   }

private static Regex GetRegexForFindTask(string taskName)
{
   var regex = new Regex(string.Format(@"{0}", taskName), RegexOptions.IgnoreCase);
   return regex;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T15:38:14.197

您可以只为该方法提供回调 - 例如

```
private static void FindTasks(string taskName, string hostName, Action<Task> callback)
{
    Regex regex = GetRegexForFindTask(taskName);

    using (TaskService ts = new TaskService(hostName))
    {
        foreach (Task t in ts.FindAllTasks(regex, true))
            if (t.Name.Equals(taskName, StringComparison.OrdinalIgnoreCase))
                callback(t);
    }
} 
```

然后调用：

```
FindTask("SomeTaskName", "SomeHost", (task) => t.Enabled = true); 
```

显然，尽管您的`FindTask`实现看起来略有不同（您在某些情况下检查 IsEnabled 等），因此您可以在检查匿名委托的地方使用类似的东西：

```
FindTask("SomeTaskName", "SomeHost", (task) => 
    { 
        // Check if it is running first
        if(t.IsRunning) t.Enabled = false; 
    }); 
```

或者您可以将谓词传递`FindTask`给过滤列表的方法 - 让我只是挖掘语法..

编辑：会是这样的：

```
public static void FindTask(string taskName, string hostName, Expression<Func<T, bool>> filter, Action<Task> callback)
{
    Regex regex = GetRegexForFindTask(taskName);

    using (TaskService ts = new TaskService(hostName))
    {
        foreach (Task t in ts.FindAllTasks(regex, true).Where(filter)) // Use linq filter here to narrow down the list of tasks
            if (t.Name.Equals(taskName, StringComparison.OrdinalIgnoreCase))
                callback(t);
    }
} 
```

并使用：

```
FindTask("SomeTaskName", "SomeHost", task => task.IsEnabled, (task) => task.IsEnabled = false); 
```

所以它只会在`IsEnabled`任务上运行回调

显然，您必须想知道您可以将什么放入谓词中！余额由您决定:)

但是，您唯一需要考虑的是，允许另一个用户（可能是第 3 方）使用它可以让他们对任务执行任何他们想做的事情，因为他们会重新获得任务的实例来进行操作。至少在您的原始实现中，您仅限于您指定的操作。（如果它只是供您自己使用/内部使用，这对您来说可能不是问题）

# c# - 防止旋转过程中的图像剪辑 Windows Phone

> ID：15312426
> 
> 赞同：2
> 
> 时间：2013-03-09T15:30:18.967
> 
> 标签：c#, rotation, windows-phone-8, writeablebitmap, writeablebitmapex

我正在使用 WriteableBitmapEx 扩展方法来旋转 WriteableBitmap。`bi`代码中是一个WritableBitmap。该`RotateFree`方法将位图旋转任意角度并返回一个新的旋转 WritableBitmap。我的代码：

```
 private void rotate()
    {
        degree += 1;
        var rotate = bi.RotateFree(degree);
        ImageControl.Source = rotate;
    } 
```

我的问题是由于 ImageControl 大小是固定的，它会导致旋转的位图被剪裁。那么防止这种情况的最佳方法是什么？我想我正在寻找一种在旋转期间调整 ImageControl 大小以防止剪辑的方法。有什么建议么？

![原始图像](../Images/8705e872b30f413016d410e4e9d387b6.png)

![旋转图像](../Images/56cb3b8cf2f5c3cc9242e0e5b3b120f3.png)

**更新**

基于这个有用的信息[从已知的边界框坐标计算旋转的矩形大小](https://stackoverflow.com/questions/9971230/calculate-rotated-rectangle-size-from-known-bounding-box-coordinates)我想我设法计算了边界框的宽度（bx）和高度（by）并在旋转期间相应地调整它的大小

```
double radian = (degree / 180.0) * Math.PI;
double bx = rotate.PixelWidth * Math.Cos(radian) + rotate.PixelHeight * Math.Sin(radian);
double by = rotate.PixelWidth * Math.Sin(radian) + rotate.PixelHeight * Math.Cos(radian); 
```

虽然 ImageControl 的宽度和高度似乎在旋转过程中增加/减少，但图像仍在被剪裁。

**更新 2**

根据@Rene 的建议，我设法防止了剪辑。结合 ImageControl Width/Height 计算，图像大小在旋转期间通过还将其拉伸属性设置为 NONE 来保持。

现在的问题是确保 ImageControl 从其中心调整大小，使其看起来不会移动。如果有人感兴趣，我可以包含一个示例项目

**更新 3**

对于那些可能对最终解决方案感兴趣的人。我就是这样做的。结果是，图像在没有剪裁的情况下旋转，并且在旋转过程中保持其大小。此外，旋转似乎起源于中心。

为了在调整 ImageControl 的大小时调整它的位置，以使旋转看起来起源于中心，我使用了这个代码。

```
var translationDelta = new Point((ImageControl.ActualWidth - bx) / 2.0, (ImageControl.ActualHeight - by) / 2.0);           
UpdateImagePosition(translationDelta);
ApplyPosition();

   // This code update the ImageControl position on the canvas
    public void UpdateImagePosition(Point delta)
    {
        var newPosition = new Point(ImagePosition.X + delta.X, ImagePosition.Y + delta.Y);
        ImagePosition = newPosition;            
    }

    //This apply the new position to make the ImageControl rotate from center
    public void ApplyPosition()
    {
        ObjComposite.TranslateX = ImagePosition.X;
        ObjComposite.TranslateY = ImagePosition.Y;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T05:56:36.767

使用 RotateFree 并将裁剪参数设置为 false：RotateFree(degree, false)。还将 ImageControl Stretch 属性设置为 Uniform：Stretch="Uniform"。

*   雷内

# django - Django all() 得到了一个意外的关键字参数“用户”

> ID：15312429
> 
> 赞同：1
> 
> 时间：2013-03-09T15:30:31.137
> 
> 标签：django

我正在开发一个简单的应用程序。我的应用程序允许用户创建帐户并添加板。

我正在尝试检索用户创建并显示在模板上的所有板，而不会出现此错误。

```
all() got an unexpected keyword argument 'user'

Traceback:
File "C:\Python26\Lib\site-packages\django\core\handlers\base.py" in get_response
111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "C:\o\mysite\pet\views.py" in Display
69\.     board = Board.objects.all(user=request.user) 
```

我的模型.py

```
from django.db import models
from django.db.models.signals import post_save
from django.contrib.auth.models import User

class Person(models.Model):
    user = models.ForeignKey(User)
    name = models.CharField(max_length=100)
    image = models.FileField(upload_to="images/",blank=True,null=True)

    def __unicode__(self):
        return self.name

class Board(models.Model):
    user = models.ForeignKey(User)
    name = models.CharField(max_length=100)
    def __unicode__(self):
        return self.name 
```

**我的部分views.py（问题在这里）**

```
def Display(request):
    if not request.user.is_authenticated():
        return HttpResponseRedirect(reverse('pet.views.LoginRequest'))
    board = Board.objects.all(user=request.user)
    return render(request,'edit.html',{'board':board}) 
```

我的edit.html

```
{% if board %}
<ul>           
    <li>Name: {{ board.name }}</li>

</ul>
{% endif %} 
```

![在此处输入图像描述](../Images/3a7f88d34aa4cb979efd8676d71c0798.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T15:32:50.367

all() 就是全部。如果要根据值查询，请使用 filter()

```
def Display(request):
    if not request.user.is_authenticated():
        return HttpResponseRedirect(reverse('pet.views.LoginRequest'))
    board = Board.objects.filter(user=request.user)
    return render(request,'edit.html',{'board':board})

{% if board %} 
<ul>  
    {% for b in board %}         
    <li>Name: {{ b.name }}</li>
    {% endfor %}
</ul>
{% endif %} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T15:33:59.433

要获得所有 where `user`is `request.user`，您应该使用该`filter`方法。所以与其：

```
board = Board.objects.filter(user=request.user) 
```

希望这能解决它！

# android - 如何通过检查堆状态来防止 OutOfMemoryError

> ID：15312434
> 
> 赞同：1
> 
> 时间：2013-03-09T15:30:58.780
> 
> 标签：android

我认为检查`Runtime.getRuntime().freeMemory()`会做到这一点，但以下测试似乎表明它没有用：

```
List<Byte> listDebug = new ArrayList<Byte>();
Log.d("Free memory", String.format("%1$.2f", (float)Runtime.getRuntime().freeMemory()/(1024*1024)));
for (int i = 0; i < 100; i++) {
    try {
        listDebug.addAll(Arrays.asList(new Byte[1024 * 100]));
        Log.d("Free memory", i + ":" + String.format("%1$.2f", (float)Runtime.getRuntime().freeMemory()/(1024*1024)));
    } catch (Exception ex) {
        Log.d("Free memory", ex.getMessage());
    }
    catch (Error e)
    {
        Log.d("Free memory", e.getMessage());
    }
} 
```

输出如下：

```
03-09 03:16:11.267: D/Free memory(3860): 1.30
03-09 03:16:11.277: D/Free memory(3860): 0:1.25
03-09 03:16:11.287: D/Free memory(3860): 1:2.63
03-09 03:16:11.298: D/Free memory(3860): 2:3.86
03-09 03:16:11.298: D/Free memory(3860): 3:3.08
03-09 03:16:11.317: D/Free memory(3860): 4:4.85
03-09 03:16:11.317: D/Free memory(3860): 5:4.06
03-09 03:16:11.317: D/Free memory(3860): 6:3.28
03-09 03:16:11.367: D/Free memory(3860): 7:7.84
03-09 03:16:11.367: D/Free memory(3860): 8:7.06
03-09 03:16:11.367: D/Free memory(3860): 9:6.27
03-09 03:16:11.387: D/Free memory(3860): 10:7.84 
```

`freeMemory()`测试应用程序在返回最高数字时在扩展列表 11 次后崩溃。我深感不解。我的测试代码是否存在根本缺陷或`freeMemory()`完全无关`java.lang.OutOfMemoryError`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T15:38:19.930

简短的回答是它有点无关紧要。[javadoc](http://developer.android.com/reference/java/lang/Runtime.html#freeMemory())说：

> **退货**
> 
> 可用内存的*大致*数量，以字节为单位。

SO还有一些其他问题更详细地解决了这个问题：

*   [什么是 Runtime.getRuntime().totalMemory() 和 freeMemory()？](https://stackoverflow.com/questions/3571203/what-is-the-exact-meaning-of-runtime-getruntime-totalmemory-and-freememory)
*   [关于 Runtime.getRuntime().totalMemory() 的问题](https://stackoverflow.com/questions/6039094/a-question-on-runtime-getruntime-totalmemory)

您可以尝试使用具有一定误差范围的值（例如，将 85% 的内存使用视为没有可用内存），但也许最好的方法是简单地捕获`OutOfMemoryError`它发生的时间并相应地调整行为（使用 less 重新启动进程内存密集型方法，从内存中清除其他内容并重试相同的过程，完全跳过该过程，提醒用户，放弃等）。

# xml - 使用 Excel VBA 创建 XML 文件

> ID：15312466
> 
> 赞同：4
> 
> 时间：2013-03-09T15:34:06.323
> 
> 标签：xml, excel, vba

我正在尝试从 Excel 中的 VBA 创建一个 XML 文件，但我对细节有点模糊，我以前从未接触过 XML 或 VBA。我需要用以下格式写出一个 XML 文件：

```
<TextField0 xfdf:original="Brand Name">HEADING1</TextField0> 
```

会有一堆这样的行，比如TextField1，就是“Product”等等。到目前为止，我对本节感兴趣的代码是这样的：

```
 'create Heading element
   Set objXMLelement = objDom.createElement("TextField0")
   objXMLRootelement.appendChild objXMLelement

   'create Attribute to the Heading Element and set value
   Set objXMLattr = objDom.createAttribute("xfdf:original")
   objXMLattr.NodeValue = "Brand Name"
   objXMLelement.setAttributeNode objXMLattr 
```

这将创建此输出：

```
<TextField0 xfdf:original="Brand Name"/> 
```

这当然是缺少 HEADING1 并且我一生都无法弄清楚如何将那个位放在那里。我似乎无法将任何内容附加到属性。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T16:03:01.493

HEADING1 是属于`TextField0`元素的文本，而不是属性。

因此，您可以使用该`objXmlElement.text`属性进行设置。

回应评论：

> 我正在努力寻找这些东西的文档

[这个 MSDN 页面](http://msdn.microsoft.com/en-us/library/windows/desktop/ms766564(v=vs.85).aspx)是一个好的开始。

# php - 使用 php 从 img src 中提取更改的图像

> ID：15312467
> 
> 赞同：1
> 
> 时间：2013-03-09T14:03:58.167
> 
> 标签：php, image

我正在尝试使用PHP从weather.com（当前状况图像）中提取图像，但我不知道该怎么做，因为图像会随着天气变化而变化，所以我无法直接链接到它. 有没有办法从标签中提取图像，所以当图像源更改时，PHP 会得到新的？

这是我希望 PHP 从中提取的标签：

```
<img class="wx-weather-icon" src="http://s.imwx.com/v.20120328.084208//img/wxicon/120/32.png" height="93" width="93" alt="Sunny"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T16:02:41.107

[简单HTMLDOM](http://simplehtmldom.sourceforge.net/)

可能是您最好的选择，那么您可以继续执行以下操作

```
// Create DOM from URL or file
$html = file_get_html('http://www.weather.com/');

foreach($html->find('img[class=wx-weather-icon]') as $element) {
   echo $element->src;
} 
```

# android - 从 Sqlite Android 检索数据时出错

> ID：15312470
> 
> 赞同：0
> 
> 时间：2013-03-09T15:34:17.553
> 
> 标签：android

当我尝试从 sqlite db 检索数据并将其设置为文本视图时，我正在逼近。这是获取方法：

```
public ArrayList<Object> getRow() {

        ArrayList<Object> list= new ArrayList<Object>();
        Cursor cursor;
        String[] columns={PRIMARY_KEY,COLUMN_NAME,COLUMN_EMAIL,COLUMN_PASSWORD,COLUMN_PASSWORD};

        cursor= sp.query(TABLE_NAME,columns,null,null,null,null,null);
                int i_id=cursor.getColumnIndex(PRIMARY_KEY);
        int i_name=cursor.getColumnIndex(COLUMN_NAME);
        int i_contact=cursor.getColumnIndex(COLUMN_CONTACT);
        int i_email=cursor.getColumnIndex(COLUMN_EMAIL);
        int i_pass=cursor.getColumnIndex(COLUMN_PASSWORD);

        for(cursor.moveToFirst(); !cursor.isAfterLast(); cursor.moveToNext())
        {

                list.add(cursor.getLong(i_id));
                list.add(cursor.getString(i_name));
                list.add(cursor.getString(i_contact));
                list.add(cursor.getString(i_email));
                list.add(cursor.getString(i_pass));

        }   

        return list;
    }

} 
```

这是settext的代码，请帮助我，我尽了一切可能，确实创建了表并插入了值，但获取不起作用。

```
private void getTable() {

info.open();
    try{

    ArrayList<Object> list= info.getRow();

    AccBalanceTV.setText((String)list.get(1));
    AccEmailTV.setText((String)list.get(2));
    AccContactTV.setText( (String)list.get(3));
    AccVehTV.setText((String)list.get(4));
    }
    catch(Exception e)
    {
        Toast.makeText(getApplicationContext(), String.valueOf(e), Toast.LENGTH_LONG).show();
    }
    finally{
        info.close();
    }
    } 
```

日志猫：

```
03-09 21:09:46.180: D/dalvikvm(10971): GC_FOR_ALLOC freed 57K, 6% free 12245K/12931K, paused 10ms, total 11ms
03-09 21:09:46.185: I/dalvikvm-heap(10971): Grow heap (frag case) to 16.032MB for 3686416-byte allocation
03-09 21:09:46.195: D/dalvikvm(10971): GC_CONCURRENT freed 1K, 5% free 15844K/16583K, paused 1ms+1ms, total 11ms
03-09 21:09:46.250: D/dalvikvm(10971): GC_FOR_ALLOC freed <1K, 5% free 16873K/17671K, paused 9ms, total 9ms
03-09 21:09:46.250: I/dalvikvm-heap(10971): Grow heap (frag case) to 18.815MB for 1865972-byte allocation
03-09 21:09:46.270: D/dalvikvm(10971): GC_CONCURRENT freed <1K, 5% free 18695K/19527K, paused 11ms+2ms, total 21ms
03-09 21:09:46.315: D/libEGL(10971): loaded /system/lib/egl/libEGL_mali.so
03-09 21:09:46.320: D/libEGL(10971): loaded /system/lib/egl/libGLESv1_CM_mali.so
03-09 21:09:46.320: D/libEGL(10971): loaded /system/lib/egl/libGLESv2_mali.so
03-09 21:09:46.325: D/(10971): Device driver API match
03-09 21:09:46.325: D/(10971): Device driver API version: 10
03-09 21:09:46.325: D/(10971): User space API version: 10 
03-09 21:09:46.325: D/(10971): mali: REVISION=Linux-r2p4-02rel0 BUILD_DATE=Tue Oct 16 15:37:13 KST 2012 
03-09 21:09:46.350: D/OpenGLRenderer(10971): Enabling debug mode 0
03-09 21:09:48.205: D/dalvikvm(10971): GC_FOR_ALLOC freed 1041K, 10% free 17741K/19527K, paused 9ms, total 9ms
03-09 21:09:48.210: I/dalvikvm-heap(10971): Grow heap (frag case) to 21.545MB for 3840016-byte allocation
03-09 21:09:48.220: D/dalvikvm(10971): GC_CONCURRENT freed 2K, 8% free 21489K/23303K, paused 1ms+1ms, total 12ms
03-09 21:09:48.415: E/SpannableStringBuilder(10971): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length
03-09 21:09:48.415: E/SpannableStringBuilder(10971): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length
03-09 21:09:56.660: D/AbsListView(10971): Get MotionRecognitionManager
03-09 21:09:57.990: D/GestureDetector(10971): [Surface Touch Event] mSweepDown False, mLRSDCnt : -1 mTouchCnt : 3 mFalseSizeCnt:0
03-09 21:09:58.135: D/AndroidRuntime(10971): Shutting down VM
03-09 21:09:58.135: W/dalvikvm(10971): threadid=1: thread exiting with uncaught exception (group=0x411cb2a0)
03-09 21:09:58.140: E/AndroidRuntime(10971): FATAL EXCEPTION: main
03-09 21:09:58.140: E/AndroidRuntime(10971): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.miniproject.parkme/com.miniproject.parkme.Account}: java.lang.NullPointerException
03-09 21:09:58.140: E/AndroidRuntime(10971):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2024)
03-09 21:09:58.140: E/AndroidRuntime(10971):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2125)
03-09 21:09:58.140: E/AndroidRuntime(10971):    at android.app.ActivityThread.access$600(ActivityThread.java:140)
03-09 21:09:58.140: E/AndroidRuntime(10971):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1227)
03-09 21:09:58.140: E/AndroidRuntime(10971):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-09 21:09:58.140: E/AndroidRuntime(10971):    at android.os.Looper.loop(Looper.java:137)
03-09 21:09:58.140: E/AndroidRuntime(10971):    at android.app.ActivityThread.main(ActivityThread.java:4898)
03-09 21:09:58.140: E/AndroidRuntime(10971):    at java.lang.reflect.Method.invokeNative(Native Method)
03-09 21:09:58.140: E/AndroidRuntime(10971):    at java.lang.reflect.Method.invoke(Method.java:511)
03-09 21:09:58.140: E/AndroidRuntime(10971):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1008)
03-09 21:09:58.140: E/AndroidRuntime(10971):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:775)
03-09 21:09:58.140: E/AndroidRuntime(10971):    at dalvik.system.NativeStart.main(Native Method)
03-09 21:09:58.140: E/AndroidRuntime(10971): Caused by: java.lang.NullPointerException
03-09 21:09:58.140: E/AndroidRuntime(10971):    at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:228)
03-09 21:09:58.140: E/AndroidRuntime(10971):    at android.database.sqlite.SQLiteOpenHelper.getDatabaseLocked(SQLiteOpenHelper.java:224)
03-09 21:09:58.140: E/AndroidRuntime(10971):    at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:164)
03-09 21:09:58.140: E/AndroidRuntime(10971):    at com.miniproject.parkme.databaseManager.<init>(databaseManager.java:40)
03-09 21:09:58.140: E/AndroidRuntime(10971):    at com.miniproject.parkme.Account.<init>(Account.java:12)
03-09 21:09:58.140: E/AndroidRuntime(10971):    at java.lang.Class.newInstanceImpl(Native Method)
03-09 21:09:58.140: E/AndroidRuntime(10971):    at java.lang.Class.newInstance(Class.java:1319)
03-09 21:09:58.140: E/AndroidRuntime(10971):    at android.app.Instrumentation.newActivity(Instrumentation.java:1068)
03-09 21:09:58.140: E/AndroidRuntime(10971):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2015)
03-09 21:09:58.140: E/AndroidRuntime(10971):    ... 11 more
03-09 21:10:07.220: I/Process(10971): Sending signal. PID: 10971 SIG: 9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T15:46:47.513

从您的 LogCat 中：

```
Caused by: java.lang.NullPointerException
    ...
    at com.miniproject.parkme.databaseManager.<init>(databaseManager.java:40)
    at com.miniproject.parkme.Account.<init>(Account.java:12) 
```

看起来您正在`info`使用无效的上下文进行初始化。
你不能这样做，稍后会导致 NullPointerException：

 ~~~~```
private DBHelper info = new DBHelper(this); 
```~~ 

~~您必须等到 Activity 的 Context 有效：~~

 ~~```
private DBHelper info;

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    info = new DBHelper(this); 
```~~~~

# java - 带有 GroupLayout 的 JFrame

> ID：15312472
> 
> 赞同：0
> 
> 时间：2013-03-09T15:34:32.423
> 
> 标签：java, swing, layout

我正在尝试创建一个扩展 JFrame 并使用 GroupLayout 的类，但我找不到如何做到这一点。JPanel 非常简单：

```
GroupLayout layout=new GroupLayout(this);
setLayout(layout); 
```

但是如果我使用 JFrame，它会说我在第二行为框架添加了两个容器，但没有该行，则不添加布局，显示最后添加的组件。尝试谷歌搜索，没有运气。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T15:37:42.837

对于`GroupLayout`主机容器，您需要使用将所有可见组件添加到`JFrame`. 这是`ContentPane`：

```
JFrame frame = new JFrame();
GroupLayout groupLayout = new GroupLayout(frame.getContentPane());
frame.setLayout(groupLayout); 
```

# javascript - 未捕获的类型错误：无法读取未定义的属性“名称”

> ID：15312479
> 
> 赞同：11
> 
> 时间：2013-03-09T15:35:08.453
> 
> 标签：javascript, facebook, facebook-graph-api, facebook-javascript-sdk

我尝试使用 facebook api 将数据提取到表单输入中。现在，一切都很好，直到我尝试获取当前用户的位置。

如果当前用户分享了他的位置（他住在哪里），那么我没有问题。但是，如果用户没有在 facebook 上分享他的位置，我会收到一个错误： `Uncaught TypeError: Cannot read property 'name' of undefined`

这是我一直在使用的代码。如果您有任何解决方法的想法，请在此处发表评论:)

```
<div id="fb-root"></div>
<script>
  // Additional JS functions here
  window.fbAsyncInit = function() {
    FB.init({
      appId      : '*******', // App ID
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true  // parse XFBML
    });

    FB.getLoginStatus(function(response) {
  if (response.status === 'connected') {

    FB.api('/me', function(response) {
  document.getElementById("user_login").value="FB - " + response.username;
  document.getElementById("user_email").value=response.email;
  document.getElementById("first_name").value=response.first_name;
  document.getElementById("last_name").value=response.last_name;
  document.getElementById("user_url").value=response.link;
  document.getElementById("fbid").value=response.id;
  if(response.location !== 'undefined')
  {
    document.getElementById("location").value=response.location.name;
    alert(response.location.name);
  }
  document.getElementById("registerform").submit();

});

  } else if (response.status === 'not_authorized') {
    alert('error');
  } else {
    alert('Please Log In!');
  }
 });

  };

  // Load the SDK Asynchronously
  (function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     ref.parentNode.insertBefore(js, ref);
   }(document));
</script> 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-09T15:36:38.350

在这条线上：

```
if(response.location !== 'undefined') 
```

...您正在检查是否`response.location`不是**string** `"undefined"`。由于`undefined`不是字符串`"undefined"`，因此条件为真。然后你尝试使用`response.location.name`并按原样`response.location`，`undefined`你得到错误。

您可能的意思是：

```
if(response.location) 
```

或者

```
if(typeof response.location !== 'undefined') 
```

# c - 如何在 C 控制台中居中文本？

> ID：15312482
> 
> 赞同：0
> 
> 时间：2013-03-09T15:35:53.400
> 
> 标签：c

作为标题。有什么办法可以解决问题吗？假设我想在屏幕中央打印“Hello World”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T17:03:50.920

您需要知道将字符串居中需要多宽的空间；你需要知道字符串有多长。您编写适当数量的空格、字符串和换行符。

```
#include <stdio.h>

int main(void)
{
    int width = 80;
    char str[] = "Hello world";
    int length = sizeof(str) - 1;  // Discount the terminal '\0'
    int pad = (length >= width) ? 0 : (width - length) / 2;

    printf("%*.*s%s\n", pad, pad, " ", str);
    return(0);
} 
```

详尽的测试程序（最大宽度 80）：

```
#include <stdio.h>
#include <string.h>

int main(void)
{
    int width = 80;
    char str[81];
    for (int i = 1; i <= width; i++)
    {
        memset(str, 'a', i);
        str[i] = '\0';
        int length = i;
        int pad = (length >= width) ? 0 : (width - length) / 2;
        printf("%*.*s%s\n", pad, pad, " ", str);
    }
    return(0);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T15:40:16.900

您可以使用[SetConsoleCursorPosition](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686025%28v=vs.85%29.aspx)函数。获取控制台窗口的宽度和高度，然后调用它。

```
COORD coord;
coord.X = width / 2;
coord.Y = height / 2;
SetConsoleCursorPosition(GetStdHandle(STD_OUTPUT_HANDLE), coord); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-09T16:26:57.707

您可以使用 gotoxy() 函数，就像在 C++ 中一样，但在 C 中，它不是预先定义的，因此您应该先定义它。另一种方法是制表符和换行符（\t 和 \n...）

# php - 通过php在gammu中打开设备错误

> ID：15312490
> 
> 赞同：0
> 
> 时间：2013-03-09T15:36:57.667
> 
> 标签：php, linux, gammu

我正在尝试通过 php 中的 gammu 发送短信。当我在控制台中运行代码时，它运行良好，当我通过 exec 函数执行它时，它显示错误打开设备它不存在。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T21:22:50.543

您需要将用户 www-data 添加到组拨出以允许其使用任何 tty 设备：

```
sudo adduser www-data dialout 
```

# python - 读取和写入相同的文本文件

> ID：15312493
> 
> 赞同：2
> 
> 时间：2013-03-09T15:37:09.727
> 
> 标签：python, file

我想做的事：

*   打开一个文本文件
*   阅读内容
*   对其进行一些更改
*   将其写回文件

现在修改后的文本应该只有修改后的内容，而不是初始内容。

我们可以通过仅使用`open()`function 设置 mode 参数来实现吗？

如果是，参数应该是什么？
如果否，我们可以只通过一个 with 语句来实现吗？

我用 2 个语句来实现它，如下所示

```
replace_pattern = re.compile(r"<.+?>",re.DOTALL)

def text_process(file):

    with open(file,'r') as f:
        text = f.read()

    with open(file,'w') as f:
        f.write(replace_pattern.sub('',text)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T15:38:56.083

如果你想用“固定”版本替换文件中的文本，你必须重新打开文件，或者在`r+`（读+写）模式下打开它并在写入前截断：

```
with open(file,'r+') as f:
    text = f.read()
    f.seek(0)
    f.truncate()
    f.write(replace_pattern.sub('',text)) 
```

如果您不先截断文件，那么您将面临写出*太少新字节*的风险。你`foo bar baz`读和写出来`foo spam`，然后你的文件最终因为`foo spambaz`旧*数据*没有被删除并且更长。

# java - 覆盖 JMenu 上的 actionPerformed

> ID：15312494
> 
> 赞同：0
> 
> 时间：2013-03-09T15:37:10.350
> 
> 标签：java, swing, menu

我试图在用户单击“关于”菜单时出现一个弹出窗口。在Java中可以做到吗？我已经看到单击菜单不会调用 actionPerformed。经过一番搜索，我发现我应该尝试使用它：

`new AbstractAction("Do XY")`

但 NetBeans 告诉我需要一个标识符。有没有其他方法可以做到这一点，或者 Java 不允许直接在菜单栏上使用按钮？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T17:28:51.497

当然，您可以在 Java 中执行此操作。您可以简单地添加一个`MenuListener`到您的菜单。

这是一个这样的例子（它也实现了传统的“关于”菜单项）：

```
import java.awt.event.ActionEvent;

import javax.swing.AbstractAction;
import javax.swing.JDialog;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;
import javax.swing.SwingUtilities;
import javax.swing.event.MenuEvent;
import javax.swing.event.MenuListener;

public class TestAboutMenu {

    protected void initUI() {
        final JFrame frame = new JFrame("test");
        JMenuBar bar = new JMenuBar();
        JMenu help = new JMenu("Help");
        help.addMenuListener(new MenuListener() {

            @Override
            public void menuSelected(MenuEvent e) {
                showAboutDialog(frame);
            }

            @Override
            public void menuDeselected(MenuEvent e) {
                // TODO Auto-generated method stub

            }

            @Override
            public void menuCanceled(MenuEvent e) {
                // TODO Auto-generated method stub

            }
        });
        JMenuItem about = new JMenuItem(new AbstractAction("About") {

            @Override
            public void actionPerformed(ActionEvent e) {
                showAboutDialog(frame);
            }
        });
        help.add(about);
        bar.add(help);
        frame.setJMenuBar(bar);
        frame.setSize(400, 400);
        frame.setVisible(true);
    }

    protected void showAboutDialog(final JFrame frame) {
        JDialog dialog = new JDialog(frame);
        dialog.add(new JLabel("About this program"));
        dialog.setModal(true);
        dialog.pack();
        dialog.setLocationRelativeTo(frame);
        dialog.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TestAboutMenu().initUI();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T15:44:20.867

为此，您可能需要编写自己的菜单栏类。但是你可以这样做：用 mouseClicked() 方法编写鼠标监听器。如果您将菜单栏放在顶部，那么您知道它的边界是：0、windowWidth()、~20（菜单栏高度）、windowWidth()。然后你检查鼠标的位置是否在这个矩形中。如果是 - 您将显示弹出窗口。这只是当场的想法，所以让我知道它是否适合你。

# jquery - 选项卡：显示所有选项卡内容的初始页面加载

> ID：15312495
> 
> 赞同：1
> 
> 时间：2013-03-09T15:37:23.097
> 
> 标签：jquery, tabs

在我的弹出页脚中，我有在页面加载时显示每个选项卡/div 的所有内容的选项卡。但是，当单击选项卡时，它会按应有的方式执行，仅显示该选定选项卡/div 中的内容我将如何隐藏所有其他 div/选项卡以在第一个视图中仅显示第一个活动 div 内容？

到目前为止，这是我的代码：

HTML

```
<ul id='tab'>
    <li><a href='#' class="active" id="tab1">FOLLOW</a></li>
    <li><a href='#' id="tab2">NEWSLETTER</a></li>
    <li><a href='#' id="tab3">SITE INFORMATION</a></li>
</ul>
<div id="cnt-footer">
<div id='cnt-tab1'>
<div id='cnt-tab2'> 
```

Javascript

```
$(document).ready(function () {
  $('#tab a').click(function (ev) {
    ev.preventDefault();

    var el = $(this), target = el.attr('id');

    if(el.hasClass('active')) return;

    $('#tab a').removeClass('active');
    el.addClass('active');

    $('#cnt-footer>div').hide();
    $("#cnt-footer>div:not(:first)").hide();
    $('#cnt-footer #cnt-' + target).fadeIn('fast');
  });
}); 
```

任何帮助将不胜感激..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T15:45:20.113

试试这个：[样本](http://jsfiddle.net/N5SLH/1/)

```
$(document).ready(function () {
 $("#cnt-footer>div:not(:first)").hide();
 $('#tab a').click(function (ev) {
    ev.preventDefault();

    var el = $(this),
        target = this.id;

    if (el.hasClass('active')) return;

    $('#tab a').removeClass('active');
    el.addClass('active');

    $('#cnt-footer>div').hide();
    $('#cnt-footer #cnt-' + target).fadeIn('fast');
 });
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-09T15:57:49.973

您可以将非活动元素的显示设置为隐藏在 HTML 中。这样您就不必依赖用户的浏览器来隐藏元素`document.ready`

```
<ul id='tab'>
    <li><a href='#' class="active" id="tab1">FOLLOW</a></li>
    <li><a href='#' id="tab2">NEWSLETTER</a></li>
    <li><a href='#' id="tab3">SITE INFORMATION</a></li>
</ul>
<div id="cnt-footer">
<div id='cnt-tab1' style='display: hidden'>
<div id='cnt-tab2' style='display: hidden'> 
```

# grails - 如何在 Spring-Security-Acl 中创建 ACL

> ID：15312496
> 
> 赞同：0
> 
> 时间：2013-03-09T15:37:33.907
> 
> 标签：grails, spring-security, acl

我刚刚开始使用 Grails，并且正在尝试配置 spring-security-acl 插件。我一直在关注[官方插件教程](http://grails-plugins.github.com/grails-spring-security-acl/docs/manual/guide/single.html#3.%20Tutorial)，但在尝试运行我的应用程序时无法通过引导阶段（使用`Position`域类而不是`Report`类。我的大多数问题都围绕着应用程序的 ACL 部分。

我无法解决的问题`grantPermissions()`在于`Bootstrap.groovy`. 根据教程的说明，按功能开始是这样的：

```
private void grantPermissions() {
    def positions = []
    100.times {
        long id = it + 1
        def position = new Position(title: "position$id").save()
        positions << position
        aclService.createAcl(
                objectIdentityRetrievalStrategy.getObjectIdentity(position))
    } 
```

IntelliJ 在`aclService.createAcl`“无法推断参数类型。此检查报告类型不兼容的分配”的行上警告我。事实上，如果我仍然尝试运行该应用程序，它会在该行崩溃并出现错误：

```
| Error 2013-03-09 09:35:24,207 [localhost-startStop-1] ERROR context.GrailsContextLoader  - Error initializing the application: Cannot get property 'id' on null object
Message: Cannot get property 'id' on null object
    Line | Method
->>   68 | doCall                           in BootStrap$_grantPermissions_closure4
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|     63 | grantPermissions                 in BootStrap
|     29 | doCall . . . . . . . . . . . . . in BootStrap$_closure1
... 
```

任何帮助将不胜感激！

* * *

**附录**

万一这很重要，我的`Position`域对象如下所示：

```
class Position {

    String title
    Boolean draft

    static constraints = {
    }
} 
```

我不认为这个问题是相关的，但它是与教程的 ACL 相关的偏差，所以为了后代......我（我认为）我已经解决的第一个问题是在 PositionService.groovy 中，我在代码块上的 IntelliJ 中遇到错误：

```
def acl = aclUtilService.readAcl(position)

// Remove all permissions associated with this particular
// recipient (string equality to KISS)
acl.entries.eachWithIndex { entry, i ->
    if (entry.sid.equals(position) &&
            entry.permission.equals(permission)) {
        acl.deleteAce i
    }
} 
```

看起来问题是无法`deleteAce`在通用`acl`对象上找到函数；我可以通过指定类型来解决这个`MutableAcl`问题

```
MutableAcl acl = aclUtilService.readAcl(position) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T15:58:36.077

所有属性都有一个隐式`nullable:false`约束，但您只是设置`title`属性。`draft`未设置，因此验证失败并且您的所有`Position`s 都为空。

这应该有效：

```
def position = new Position(title: "position$id", draft: false).save() 
```

# c - 如何在 C 中使用 SMTP 身份验证？

> ID：15312497
> 
> 赞同：2
> 
> 时间：2013-03-09T15:37:33.953
> 
> 标签：c, sockets, email, smtp, openssl

我正在尝试与 SMTP 服务器进行简单连接（需要身份验证）。我使用 SSL（C 中的 OpenSSL 库）在端口 587 上连接到 smtp.live.com。

我首先使用 socket() 函数初始化我的套接字，然后使用 connect() 连接到服务器。然后我启动 SSL 通道，然后尝试登录。

这是我的外壳上的输出：

```
server : 220 BLU0-SMTP261.phx.gbl Microsoft ESMTP MAIL Service, Version: 6.0.3790.4675     ready at  Sat, 9 Mar 2013 07:25:17 -0800 

EHLO [127.0.0.1]
server : 250-BLU0-SMTP261.phx.gbl Hello [163.5.221.45]
250-TURN
250-SIZE 41943040
250-ETRN
250-PIPELINING
250-DSN
250-ENHANCEDSTATUSCODES
250-8bitmime
250-BINARYMIME
250-CHUNKING
250-VRFY
250-TLS
250-STARTTLS
250 OK

STARTTLS
server : 220 2.0.0 SMTP server ready

EHLO [127.0.0.1]
server : 250-BLU0-SMTP261.phx.gbl Hello [163.5.221.45]
250-TURN
250-SIZE 41943040
250-ETRN
250-PIPELINING
250-DSN
250-ENHANCEDSTATUSCODES
250-8bitmime
250-BINARYMIME
250-CHUNKING
250-VRFY
250-AUTH LOGIN PLAIN
250 OK

AUTH LOGIN
server : 334 VXNlcm5hbWU6

Y2hlcmGhvdXXXXXXXXXXXuY29tXHJcbg0K
serveur : 
U2hsYWXXXXXXXXXXXwblxyXG4NCg0K
server : 
```

如您所见，用户名和密码均采用 base64 编码（不带 \r\n）。我不明白为什么服务器不回答任何事情......（我试图在读取套接字之前放置一个 sleep() ，但我得到了相同的结果）

连接服务器的代码：

```
static int              _connect_IPV4(int socket, struct hostent *host)
{
  struct sockaddr_in    addr;

  addr.sin_port = htons(587);
  addr.sin_family = AF_INET;
  addr.sin_addr = *(struct in_addr *)host->h_addr;
  bzero(&addr.sin_zero, 8);
  if (connect(socket, (struct sockaddr *)&addr, sizeof(struct sockaddr_in)) == -1)
    printf("%s\n", strerror(errno));
  else
    return (socket);
} 
```

启动 SSL 的代码：

```
static void     _launch_ssl(int socket)
{
  read_socket(socket);
  write_socket(socket, "EHLO [127.0.0.1]\r\n");
  read_socket(socket);
  write_socket(socket, "STARTTLS\r\n");
  read_socket(socket);
} 
```

连接 SSL 的代码：

```
connection      *ssl_connect()
{
  connection    *c;

  c = malloc(sizeof(connection));
  c->ssl_handle = NULL;
  c->ssl_context = NULL;
  c->socket = connect_TCP_IP();
  _launch_ssl(c->socket);
  if (c->socket != -1)
    {
      SSL_load_error_strings();
      SSL_library_init();

      SSL_CTX_new(SSLv23_client_method());
      SSL_new(c->ssl_context);
      SSL_set_fd(c->ssl_handle, c->socket);
      SSL_connect(c->ssl_handle);
    }
  return (c);
} 
```

主要的 ：

```
int             main()
{
  connection    *c;

  c = ssl_connect();
  ssl_write_socket(c, "EHLO [127.0.0.1]\r\n");
  ssl_read_socket(c);
  ssl_write_socket(c, "AUTH LOGIN\r\n");
  ssl_read_socket(c);
  ssl_write_socket(c, "Y2hlcmNoZXN0b3lhQGhvdG1haWwuY29tXHJcbg0K");
  printf("\n");
  ssl_read_socket(c);
  ssl_write_socket(c, "U2hsYWdldHRvUHIwblxyXG4NCg0K");
  printf("\n");
  ssl_read_socket(c);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T16:17:35.410

首先，我希望您打算改进您的客户端，以便它真正对服务器发送的内容做出反应。例如，看起来在您的`_launch_ssl`函数中，您实际上并没有检查服务器的回复，`EHLO`以确保`STARTTLS`在您尝试使用它之前将其作为选项提供。该函数的伪代码应该是：

1.  发送 EHLO（最好不要使用 [127.0.0.1] 之类的无意义的东西！）
2.  检查服务器的回复
3.  如果 STARTTLS 不在提供的选项中，则保释
4.  如果 STARTTLS 是提供的选项之一，请发送 STARTTLS 并继续。

同样，在 中`main()`，您需要检查`EHLO`服务器是否实际响应了 250，然后检查`AUTH`服务器是否实际响应了 334。

否则，问题似乎是您`\r\n`在回复后没有发送。换句话说：

```
ssl_write_socket(c, "Y2hlcmNoZXN0b3lhQGhvdG1haWwuY29tXHJcbg0K"); 
```

应该：

```
ssl_write_socket(c, "Y2hlcmNoZXN0b3lhQGhvdG1haWwuY29tXHJcbg0K\r\n"); 
```

此外，您的 base64 字符串包含嵌入*在*`\\r\\n\r\n`字符串中的(反斜杠 + 'r' + 反斜杠 + 'n' + CR + LF) ，就好像它们是用户名的一部分一样。假设这是错误的，那么实际上，您的代码可能实际上应该是：*`\\r\\n\r\n`*

 *```
ssl_write_socket(c, "Y2hlcmNoZXN0b3lhQGhvdG1haWwuY29t\r\n"); 
```*

# asp.net - 为什么我的 png 没有显示在我的网页网站上？

> ID：15312500
> 
> 赞同：1
> 
> 时间：2013-03-09T15:38:08.177
> 
> 标签：asp.net, html, href, webmatrix, asp.net-webpages

我已经使用“Starter Site”模板启动了我的 asp.net WebPages 站点。它包含在 Default.cshtml 中引用的布局页面 _SiteLayout.cshtml。

在 _SiteLayout 中，有这个 HTML：

```
 <header>
        <div class="content-wrapper">
            <div class="float-left">
                <p class="site-title"><a href="~/Images/something.png"></a></p>
            </div> 
```

它最初有一个“附带”站点的图像而不是“something.png”，但由于我在运行它时没有在浏览器中看到原始图像，所以我首先将其更改为 ~/Images/orderedList7.png然后到“something.png”以尝试引发错误消息或警告。但不是！宽容，你的名字是html！（或者反之亦然？）。

无论如何，为什么我在运行站点时看不到布局文件中指定的图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T15:41:53.413

```
<header>
        <div class="content-wrapper">
            <div class="float-left">
                <p class="site-title"><img src="~/Images/something.png" /></p>
            </div> 
```

试试看，您使用的是锚点而不是图像标签。

# rest - restler 3跨域不工作

> ID：15312506
> 
> 赞同：0
> 
> 时间：2013-03-09T15:38:43.407
> 
> 标签：rest, cross-domain, restler

我的 restler 3 api 在本地测试服务器上运行良好，如果从同一台服务器调用，则在生产服务器上运行良好，但如果我远程进行调用，那么它会失败。

将相同的 rest 客户端与 luracast 在线示例一起使用，它可以在远程调用中正常工作，因此必须是我的配置中的某些内容（我的 api 或我的生产服务器）。

我发现提到需要发送标头，因此尝试将这些标头添加到 index.php 文件中：

```
header('Access-Control-Allow-Origin:  *');
header('Access-Control-Allow-Methods: POST, GET, OPTIONS, PUT, PATCH, DELETE');
header('Access-Control-Max-Age: 1000');
header('Access-Control-Allow-Headers: *'); 
```

但这没有帮助。在 Firefox 中使用 RESTClient 插件，我可以看到这些标头已发送，无论我是否使用这些标头命令，浏览器都会在本地和远程显示数据。

这是一个示例调用： [https ://api.masterpiecesolutions.org/v1/artists/?key=A4oxMOYEUSF9lwyeFuleug==](https://api.masterpiecesolutions.org/v1/artists/?key=A4oxMOYEUSF9lwyeFuleug==)

我的那个调用的 index.php 使用这个，第二个参数映射到根级别

```
$r->addAPIClass('Artists', ''); 
```

不知道这是否相关。

另外，生产服务器是 Amazon EC2，所以可能与安全策略有关？

或者，也许是其他一些标题问题？在 google chrome 中，使用 Advanced Rest Client 扩展，它给出了状态`403 Forbidden`和`Content-Type`是`text/plain`（无论是使用本地服务器还是远程服务器），所以它根本不起作用，不像 firefox 插件。

我还看到了`$_SERVER['HTTP_ORIGIN']`在 Restler.php 中的使用，这似乎不是到处都支持吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:39:58.350

至少对我来说，问题在于使用 SSL，而 restclient 类不适应这种情况。

所以我添加了（从 phpclasses.org 到我的 RestClient.class.php） curl_setopt($this->curl, CURLOPT_SSL_VERIFYPEER, false); // 对于 SSL，现在它可以工作了。

还需要设置 public static $crossOriginResourceSharing = true; 在 Restler 3 的 Defaults.php 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T11:51:45.373

`*``Access-Control-Allow-Headers`不是响应标头的有效值。您需要列出每个非简单请求标头。例如：

```
header('Access-Control-Allow-Headers: Content-Type'); 
```

还可以考虑放置一个原始值或仅`*`用于`Access-Control-Allow-Origin`标题。我刚刚访问了您的示例网址，并且该标头中有多个值。虽然这应该根据 CORS 规范工作，但它还没有被广泛采用。

最后我注意到服务器正在设置`Access-Control-Allow-Credentials: true`. 如果您将其设置为`true`，那么您还需要做另外两件事：

1.  标头的值`Access-Control-Allow-Origin`必须是 Origin 的值（例如`http://localhost`，不能是`*`）。
2.  您需要`xhr.withCredentials = true;`在 JavaScript 客户端代码中进行设置。

如果你只是在测试，你应该尝试在不设置`Access-Control-Allow-Credentials`标题的情况下让事情正常工作。这将使事情更容易调试。

# javascript - 逻辑：组合下拉框来切换可见性

> ID：15312507
> 
> 赞同：0
> 
> 时间：2013-03-09T15:38:43.407
> 
> 标签：javascript, logic, toggle, visibility

我有 100 行数据，每行有 3 个属性：年龄、位置、性别。

我有 3 个选择框，用于根据年龄、位置和性别过滤我的数据。

我的函数 setVisible(true) 或 setVisible(false) 使一行隐藏或可见。

我想根据下拉框选择的内容过滤我的数据。

我已经设置了 3 个事件监听器：

```
$('.age_selector').change(function() {
    for (i=0;i<data.length;i++){
        if (data[i].age == $('.age_selector').val()){
            data[i].setVisible(true);
        } else {
            data[i].setVisible(false);
        }
    }
});
$('.location_selector').change(function() {
    for (i=0;i<data.length;i++){
        if (data[i].location == $('.location_selector').val()){
            data[i].setVisible(true);
        } else {
            data[i].setVisible(false);
        }
    }
});
$('.gender_selector').change(function() {
    for (i=0;i<data.length;i++){
        if (data[i].gender == $('.gender_selector').val()){
            data[i].setVisible(true);
        } else {
            data[i].setVisible(false);
        }
    }
}); 
```

我的问题是可见性仅取决于我最近选择的下拉选项。例如，如果我选择美国作为地点，那么我选择男性，我的列表会显示*所有*男性，无论地点/年龄如何。我如何结合逻辑以便将其过滤为仅显示美国男性？

谢谢

编辑：我希望有一些类似柜台的东西，所以不要有

```
if (data[i].age == $('.age_selector').val()){
    data[i].setVisible(true);
} 
```

我会有类似的东西

```
if (data[i].age == $('.age_selector').val()){
    data[i].counter++;
}else{
    data[i].counter--;
} 
```

最后，如果计数器高于某个值，则数据将可见。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T15:58:10.460

我会做这样的事情：

```
// Store our current selections
var age_selection, location_selection, gender_selection;

// Do the real filtering
function do_filter() {
    // For each element
    for (i=0;i<data.length;i++) {
        // If our data doesn't match one of the selections, set it to not visible
        if (age_selection != null && data[i].age != age_selection) {
            data[i].setVisible(false);
        } else if (location_selection != null && data.location != location_selection) {
            data[i].setVisible(false);
        } else if (gender_selection != null && data.gender != gender_selection) {
            data[i].setVisible(false);
        } else {
            // Otherwise, set it visible
            data[i].setVisible(true);
        }
    }
}

// When one of the selectors changes, store the selection, and call do_filter
$('.age_selector').change(function() {
    age_selection = $('.age_selector').val();
    do_filter();
});
$('.location_selector').change(function() {
    location_selection = $('.location_selector').val();
    do_filter();
});
$('.gender_selector').change(function() {
    gender_selection = $('.gender_selector').val();
    do_filter();
}); 
```

# ios - 带有 EMOJI 的文本字符串导致 NSRange 出现问题

> ID：15312508
> 
> 赞同：5
> 
> 时间：2013-03-09T15:38:52.133
> 
> 标签：ios, utf-8, nsstring, emoji, nsrange

我正在使用 TTTAttributedLabel 将格式应用于文本，但它似乎崩溃了，因为我试图将格式应用于包含表情符号的范围。例子：

```
NSString *text = @"@user1234  #hashtag"; // text.length reported as 22 by NSLog as each emoji is 2 chars in length
cell.textLabel.text = text;

int length = 8;
int start = 13;

NSRange *range = NSMakeRange(start, length);

if (!NSEqualRanges(range, NSMakeRange(NSNotFound, 0))) {
    // apply formatting to TTTAttributedLabel
    [cell.textLabel addLinkToURL:[NSURL URLWithString:[NSString stringWithFormat:@"someaction://hashtag/%@", [cell.textLabel.text substringWithRange:range]]] withRange:range];
} 
```

注意：我从 API 传递了 NSRange 值以及文本字符串。

在上面我试图将格式应用于#hashtag。通常这工作正常，但因为我在字符串中涉及表情符号，我相信识别的范围正在尝试格式化表情符号，因为它们实际上是 UTF 值，在 TTTAttributedLabel 中会导致崩溃（它实际上挂起而没有崩溃，但是。 ..)

**奇怪的是，如果有 1 个表情符号，它可以正常工作，但如果有 2 个则中断。**

谁能帮我弄清楚在这里做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T16:18:00.807

问题是字符串中任何 Unicode 值为 \U10000 或更高的 Unicode 字符将在`NSString`.

由于您要格式化主题标签，因此您应该使用更动态的方式来获取开始和长度值。用于`NSString rangeOfString`查找`#`角色的位置。使用该结果和字符串的长度来获得所需的长度。

```
NSString *text = @"@user1234  #hashtag"; // text.length reported as 22 by NSLog as each emoji is 2 chars in length
cell.textLabel.text = text;

NSUInteger start = [text rangeOfString:@"#"];
if (start != NSNotFound) {
    NSUInteger length = text.length - start;
    NSRange *range = NSMakeRange(start, length);
    // apply formatting to TTTAttributedLabel
    [cell.textLabel addLinkToURL:[NSURL URLWithString:[NSString stringWithFormat:@"someaction://hashtag/%@", [cell.textLabel.text substringWithRange:range]]] withRange:range];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T16:52:35.220

我假设这是来自 Twitter API，并且您正在尝试使用它们返回的实体字典。我刚刚编写代码来支持处理这些范围以及`NSString`字符串范围的版本。

我的方法是“修复” Twitter 返回的实体字典以应对额外的字符。由于各种原因，我无法共享代码，但这就是我所做的：

1.  制作实体字典的深层可变副本。
2.  `unichar`通过 循环遍历字符串的整个范围`unichar`，执行以下操作：
    1.  检查 是否`unichar`在代理对范围 ( `0xd800`-> `0xdfff`) 中。
    2.  如果它是代理对代码点，则遍历实体字典中的所有条目，如果它们大于字符串中的当前位置（以`unichar`s 为单位），则将索引移动 1。然后将循环计数器加 1 以跳过该代理对的伙伴，因为它现在已被处理。
    3.  如果它不是代理对，则什么也不做。
3.  遍历所有实体并检查它们是否都超出了字符串的末尾。他们不应该，但只是以防万一。我发现了一些 Twitter 返回 duff 数据的情况。

我希望这会有所帮助！我也希望有一天我可以开源这段代码，因为我认为它会非常有用！

# sql - 每月 SQL 订单数据透视结果

> ID：15312509
> 
> 赞同：1
> 
> 时间：2013-03-09T15:38:54.770
> 
> 标签：sql, pivot, unpivot

我需要根据月份或顺序而不是按字母顺序对行进行排序。

当我运行下面的查询时，我得到以下结果

```
Col Mon Tue Wed Thu Fri
--- --- --- --- --- ---
Feb 1   2   3   4   5
Jan 2   3   4   5   6 
Mar 3   4   5   6   7 
```

我怎样才能按如下方式订购：

```
Col Mon Tue Wed Thu Fri
--- --- --- --- --- ---
Jan 2   3   4   5   6 
Feb 1   2   3   4   5
Mar 3   4   5   6   7 
```

我的查询：

```
select *
from
(
  select LEFT(datename(dw,datetime),3) as DateWeek,
    col, 
    value
  from DataTable
  cross apply 
  (
    values ('Jan', JData), ('Feb', FData),  ('Mar', MData)
  ) c (col, value)
) src
pivot
(
  sum(value)
  for dateweek in (Mon, Tue, Wed, Thu, Fri)
) piv 
```

目前我将值的行替换为：

```
values ('1.Jan', JData), ('2.Feb', FData),  ('3.Mar', MData) 
```

我想有更好的解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T15:50:23.797

尝试这个：

```
select * from DataTable
order by convert(datetime, '2012/'+ Col +'/01') 
```

[SQLFiddle](http://sqlfiddle.com/#!3/10b1d/1/0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T16:55:40.940

感谢 Wawrzyniec Sz.，我想出了解决方案。添加一个额外的列就可以了。

几个月的代码如下：

```
select col, Mon, Tue, Wed, Thu, Fri
from
(
  select LEFT(datename(dw,datetime),3) as DateWeek, 
    ord,
    col, 
    value
  from DataTable
  cross apply 
  (
    values ('1','Jan', AVol_Offered), ('2','Feb', OVol_Offered),  ('3','Mar', AAHT)
  ) c (ord, col, value)
) src
pivot
(
  sum(value)
  for dateweek in (Mon, Tue, Wed, Thu, Fri)
) piv
order by ord 
```

这将适用于其他值，例如，如果我想保持列为 C、A、B 的顺序（您不能按 asc 或 des 排序），您也可以使用以下相同的代码：

```
select col, Mon, Tue, Wed, Thu, Fri
from
(
  select LEFT(datename(dw,datetime),3) as DateWeek, 
    ord,
    col, 
    value
  from DataTable
  cross apply 
  (
    values ('1','C', AVol_Offered), ('2','A', OVol_Offered),  ('3','B', AAHT)
  ) c (ord, col, value)
) src
pivot
(
  sum(value)
  for dateweek in (Mon, Tue, Wed, Thu, Fri)
) piv
order by ord 
```

感谢您的帮助/提示

# jms - 在 WL.Server.writeJMSMessage 中设置 JMS 消息字段

> ID：15312511
> 
> 赞同：2
> 
> 时间：2013-03-09T15:38:56.623
> 
> 标签：jms, ibm-mobilefirst

我在 Websphere Liberty Profile 8.5 next beta 上安装了 WL 5.0.5.1，JMS 适配器工作正常。我可以发送带有自定义属性的短信。我无法更改其他属性，例如优先级。文档非常神秘，反编译是我最后的手段。我会欣赏如何更改相关 ID、优先级和其他消息字段的示例。

```
WL.Server.writeJMSMessage({
  destination: "myQueue",
  properties: {
    MY_PROPERTY: "123",  // becomes custom property
    priority: 9,         // becomes custom property JMSPriority is unchanged
    JMSPriority: 9,      // ignored, neither changes JMSPriority nor becomes custom property
  },
  priority: 9,    // ignored as docs do not allow params here
  JMSPriority: 9, // ignored
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T07:59:30.770

查看 JMS 适配器的代码，看起来这是一个错误，无论您提供什么，消息都将以默认优先级 (4) 发送。

目前，我没有看到设置优先级的解决方法。

我在内部打开了一个缺陷，它可能会尽快修复，因为它相对容易修复，感谢您帮助我们找到这个错误。

关于相关性，设置`JMSCorrelationID`应该有效。

# html - 引导设计理念

> ID：15312512
> 
> 赞同：0
> 
> 时间：2013-03-09T15:39:17.237
> 
> 标签：html, twitter-bootstrap

我想从你们那里得到一个想法。我有 3 个复选框，我想在一个框内的每一行中显示一个，有点像文本区域。什么引导工具可以让我做到这一点？

我试图创建一个文本区域并在其中删除我的复选框，但代码被翻译为文本区域中的文本。所以我不能那样做。这样做的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T15:45:58.853

在制作网站时，您不应限制自己*仅*使用Bootstrap 元素。Bootstrap 只是漂亮元素的集合；自己制作也很好（并且可能有必要）。

如果您只是希望您的复选框位于带有轮廓的框中，那么对于没有相应的 Bootstrap 元素来说，这有点太简单了。

在最简单的形式中，它的 HTML 和 CSS 看起来像[这个 JSFiddle。](http://jsfiddle.net/33FSA/)

# html

```
<div class='checkbox-container'>
  <input type='checkbox' id='one'>
  <label for='one'>Hello</label>
</div> 
```

# CSS

```
.checkbox-container {
  margin: 10px 0;
  padding: 10px 0;
  border: 1px solid #aaa;
} 
```

如果您希望将所有复选框都放在一个框中，那么您只需添加更多代码即可。[在 JSFiddle 上查看。](http://jsfiddle.net/33FSA/1/)

如果出于某种奇怪的原因您只能使用使用 Bootstrap 元素，那么 ananda 的答案非常好。使用 well 元素可以为您提供边框、内部阴影和背景颜色。[**在 JSFiddle 上查看井**](http://jsfiddle.net/HfbCU/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T15:42:56.127

尝试将它们放在“井”元素中

# javascript - 这个简单的js代码有内存泄漏吗？

> ID：15312516
> 
> 赞同：3
> 
> 时间：2013-03-09T15:39:27.987
> 
> 标签：javascript, memory-leaks

我有一个简单的 html/javascript 代码，它将创建一些 DOM，然后将它们删除。

```
<!DOCTYPE html>
<html>

  <head lang="en">
    <meta charset="utf-8">
    <title>Custom Plunker</title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
  </head>

  <body>
    <button onclick="create()"> Create </button>
    <button onclick="clearContainer()"> Clear </button>

    <div id="container"></div>

  </body>

</html>

<script>
  function create() {
    var c = $("#container");
    for(var i = 0;i<10000; i++){
    c.append("<li>Hellosd fssd f df sdf  f f wef ewf we fwe f wef ewf wef ew few f ewf wf ewf wef </li>");
    }
  }

  function clearContainer() {
    var c = $("#container");
    c.empty();
  }
</script> 
```

会有一个`Create`按钮和一个`Clear`按钮。当我单击创建按钮时，它会将 10000`li`个元素附加到容器 div 中，当我单击清除按钮时，它将删除它们。

当我在chrome上尝试时，chrome进程的初始内存使用量大约为30M，在我点击几次创建按钮后增加到70M，当我点击清除按钮时，它变成了50M。比初始多20M。

然后我在IE8上试了一下，IE进程初始内存使用量大约30M，我只点击一次create按钮后就增长到100M以上，点击clear按钮后就变成了80M。比初始多50M。

代码有内存泄漏吗？如何解决？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-09T15:43:14.313

> 代码有内存泄漏吗？

不。浏览器只是保留了他们分配的一些内存，以防他们需要重用它，和/或还没有（还）垃圾收集不再引用的对象。因为您已经释放了对列表项元素的所有引用（通过 jQuery 的`empty`调用），所以要让浏览器真正放开它们。

当然，这个答案假设您调用的 jQuery 函数中没有导致内存泄漏的错误（特别是创建`li`元素的那个）。这可能是一个合理的假设，当然，即使是受人尊敬的图书馆偶尔也会出现错误。如果 jQuery 的一个常用功能（包括元素构造）在给定版本中存在严重的内存泄漏，那么考虑到使用该库的人数和背后的参与团队，它很可能会在合理的时间内被发现、报告和修复它。

而且我们还假设浏览器在处理 DOM 操作时没有导致内存泄漏的错误，这是一个不太确定的假设。（从历史上看，浏览器 [无论哪种风格] 都会遇到各种内存泄漏问题；我认为没有*任何*浏览器可以幸免。）

但是，如果您明白我的意思，*您的*代码中没有泄漏。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-09T15:56:12.373

通过在 Chromium/linux 上进行测试，我可靠地重现了您的泄漏：每个创建/清除周期都会使内存增长 5MB 到 10MB，并且该内存似乎没有被释放。

我注意到可以通过稍微改变 clear 函数来替换父元素而不是清空它来避免泄漏：

```
 function clearContainer() {
    var c = $("#container");
    c.remove();
    $('<ul id="container"></ul>').appendTo(document.body);
  } 
```

使用此代码，内存在每个创建/清除周期后恢复到相同的水平。

我不认为问题出在 jQuery 中，但更可能在浏览器的 DOM 对象中，因为 Firefox 似乎没有同样的问题。

* * *

**编辑**：

通过自动化测试以将其推得更远，我可以看到内存最终减少（我的选项卡超过了大约 150 MB，然后可能会回到 70 MB）。这里管理内存的方式显然是贪婪的，但没有真正的内存泄漏。由于内存消耗可能如此不同，我建议您删除父元素而不是清除它，但这不会防止任何崩溃，因为内存崩溃似乎不太可能。

# java - JTextPane 换行

> ID：15312521
> 
> 赞同：0
> 
> 时间：2013-03-09T15:40:11.003
> 
> 标签：java, html, swing, jtextpane, htmleditorkit

我可以使用此代码制作新行

```
StringBuilder sb = new StringBuilder();  
sb.append("<span style=\"color:black\">--------------</span> <br>");  
sb.append("<span style=\"color:red\">Error." + e.toString() + "</span> <br>");
sshoutput.setContentType("text/html");  
sshoutput.setText(sb.toString()); 
```

但是当我用另一个文本再次执行此操作时，它只显示第二个文本**而不是在此之后**

> 错误。” + e.toString()

对不起，我的英语不是很好。我希望你明白。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T16:02:46.273

我现在正在使用 JTextPane，我所做的是：

```
JTextPane pane = new JTextPane();
StyledDocument doc = pane.getStyledDocument(); 
```

所以我可以使用以下方法在任何地方插入字符串：

```
doc.insertString(STRING POSITION, STRING, null); 
```

我对这种方法没有例外。还有一种简单的方法可以使用以下方式设置字母样式：

```
SimpleAttributeSet set = new SimpleAttributeSet();
//Here you modify set. Set is collection of
//various style instructions
//(letters color, bolded, italic, background color etc.)
//You modify set using StyleConstants class.
doc.setCharacterAttributes(START, LENGTH, set, true); 
```

**编辑：**一个示例，它创建文本窗格并在其中写入样式为“Hello World”：

```
JTextPane pane = new JTextPane();
StyledDocument doc = pane.getStyledDocument();
doc.insertString(0, "Hello", null);
SimpleAttributeSet set = new SimpleAttributeSet();
StyleConstans.setForeground(set, Color.RED);
doc.setCharacterAttributes(0, 5, set, true);
doc.insertString(5, "World!", null);
SimpleAttributeSet set = new SimpleAttributeSet();
StyleConstans.setForeground(set, Color.BLUE);
doc.setCharacterAttributes(5, 6, set, true); 
```

使用 GridLayout(1, 1) 将其添加到 JPanel 中，您应该会看到其中包含红色字符串“Hello”和蓝色字符串“World”的文本窗格。

# ruby-on-rails - 如何在win 7上安装凯迪克？

> ID：15312522
> 
> 赞同：2
> 
> 时间：2013-03-09T15:40:11.537
> 
> 标签：ruby-on-rails, ruby, rubygems, gem

我已经创建了一个并且我想在 phpfog 上上传它但是我在第一步上传我的数据库时遇到了麻烦，我有 win 7 x64，我下载并安装了 ruby​​ 的命令提示符，同时创建了一个隧道：

```
 C:\Ruby200\devkit>gem install caldecott --platform=ruby
    Temporarily enhancing PATH to include DevKit...
    Building native extensions.  This could take a while...
    ERROR:  Error installing caldecott:
            ERROR: Failed to build gem native extension.

        C:/Ruby200/bin/ruby.exe extconf.rb
    creating Makefile

    make
    generating generator-i386-mingw32.def
    compiling generator.c
    generator.c: In function 'cState_aref':
    generator.c:632:5: warning: variable 'state' set but not used [-Wunused-but-set-
    variable]
    generator.c: In function 'isArrayOrObject':
    generator.c:867:5: warning: suggest parentheses around '&&' within '||' [-Wparen
    theses]
    linking shared-object json/ext/generator.so

    make install
    /usr/bin/install -c -m 0755 generator.so C:/Ruby200/lib/ruby/gems/2.0.0/gems/jso
    n-1.6.8/ext/json/ext/json/ext
    /usr/bin/install: cannot create regular file `C:/Ruby200/lib/ruby/gems/2.0.0/gem
    s/json-1.6.8/ext/json/ext/json/ext': No such file or directory
    make: *** [install-so] Error 1

    Gem files will remain installed in C:/Ruby200/lib/ruby/gems/2.0.0/gems/json-1.6.
    8 for inspection.
    Results logged to C:/Ruby200/lib/ruby/gems/2.0.0/gems/json-1.6.8/ext/json/ext/ge
    nerator/gem_make.out

    C:\Ruby200\devkit>gem install caldecott --platform=ruby

` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T10:45:39.220

我有 Win7 x64、Ruby 2.0.0、DevKit (DevKit-mingw64-32-4.7.2-20130224-1151)

我遇到了同样的问题。我的解决方案：

1.  从 github 下载 gem 源 - [https://github.com/cloudfoundry/caldecott/archive/master.zip](https://github.com/cloudfoundry/caldecott/archive/master.zip)
2.  解压到 C:\caldecott（例如）
3.  打开文件 caldecott.gemspec 并将 json 依赖的版本更改为“~> 1.7”
4.  打开命令提示符，移动到 gem 源目录并执行：

    gem 构建 caldecott.gemspec

    宝石安装 caldecott-0.0.5.gem

就这样

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T10:26:24.077

Ruby 2.0.0 版本会出现此错误。降级到 Ruby 1.9.3

# javascript - 解析来自 JSON 对象的循环引用

> ID：15312529
> 
> 赞同：15
> 
> 时间：2013-03-09T15:40:41.520
> 
> 标签：javascript, jquery, knockout.js, json.net

如果我有来自 json.net 的序列化 JSON，如下所示：

```
User:{id:1,{Foo{id:1,prop:1}},
FooList{$ref: "1",Foo{id:2,prop:13}} 
```

我想在 FooList 上进行淘汰赛输出，但我不确定如何继续，因为 $ref 东西可能会抛出东西。

我认为解决方案是通过不使用以某种方式强制将所有 Foos 呈现在 FooList 中：

```
PreserveReferencesHandling = PreserveReferencesHandling.Objects 
```

但这似乎很浪费..

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-02T06:25:20.917

我发现了一些错误并实现了数组支持：

```
function resolveReferences(json) {
    if (typeof json === 'string')
        json = JSON.parse(json);

    var byid = {}, // all objects by id
        refs = []; // references to objects that could not be resolved
    json = (function recurse(obj, prop, parent) {
        if (typeof obj !== 'object' || !obj) // a primitive value
            return obj;
        if (Object.prototype.toString.call(obj) === '[object Array]') {
            for (var i = 0; i < obj.length; i++)
                // check also if the array element is not a primitive value
                if (typeof obj[i] !== 'object' || !obj[i]) // a primitive value
                    continue;
                else if ("$ref" in obj[i])
                    obj[i] = recurse(obj[i], i, obj);
                else
                    obj[i] = recurse(obj[i], prop, obj);
            return obj;
        }
        if ("$ref" in obj) { // a reference
            var ref = obj.$ref;
            if (ref in byid)
                return byid[ref];
            // else we have to make it lazy:
            refs.push([parent, prop, ref]);
            return;
        } else if ("$id" in obj) {
            var id = obj.$id;
            delete obj.$id;
            if ("$values" in obj) // an array
                obj = obj.$values.map(recurse);
            else // a plain object
                for (var prop in obj)
                    obj[prop] = recurse(obj[prop], prop, obj);
            byid[id] = obj;
        }
        return obj;
    })(json); // run it!

    for (var i = 0; i < refs.length; i++) { // resolve previously unknown references
        var ref = refs[i];
        ref[0][ref[1]] = byid[ref[2]];
        // Notice that this throws if you put in a reference at top-level
    }
    return json;
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-11T08:19:58.783

您从服务器接收的 json 对象包含[Circular References](http://www.asp.net/web-api/overview/formats-and-model-binding/json-and-xml-serialization#handling_circular_object_references)。在使用对象之前，您必须首先`$ref`从对象中删除所有属性，这意味着`$ref : "1"`您必须放置此链接指向的对象。

*在您的情况下，它可能指向 id 为 1 的用户对象*

为此，您应该查看[github 上的 Douglas Crockfords 插件](https://github.com/douglascrockford/JSON-js)。有一个 cycle.js 可以为您完成这项工作。

或者您可以使用以下代码（未经测试）：

```
function resolveReferences(json) {
    if (typeof json === 'string')
        json = JSON.parse(json);

    var byid = {}, // all objects by id
        refs = []; // references to objects that could not be resolved
    json = (function recurse(obj, prop, parent) {
        if (typeof obj !== 'object' || !obj) // a primitive value
            return obj;
        if ("$ref" in obj) { // a reference
            var ref = obj.$ref;
            if (ref in byid)
                return byid[ref];
            // else we have to make it lazy:
            refs.push([parent, prop, ref]);
            return;
        } else if ("$id" in obj) {
            var id = obj.$id;
            delete obj.$id;
            if ("$values" in obj) // an array
                obj = obj.$values.map(recurse);
            else // a plain object
                for (var prop in obj)
                    obj[prop] = recurse(obj[prop], prop, obj)
            byid[id] = obj;
        }
        return obj;
    })(json); // run it!

    for (var i=0; i<refs.length; i++) { // resolve previously unknown references
        var ref = refs[i];
        ref[0][ref[1]] = byid[refs[2]];
        // Notice that this throws if you put in a reference at top-level
    }
    return json;
} 
```

让我知道它是否有帮助！

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2017-02-22T17:53:50.010

如果您利用`JSON.parse`'`reviver`参数，这实际上非常简单。

下面的例子。请参阅浏览器控制台以获取输出，因为 StackOverflow 的片段控制台输出不会提供结果的准确图片。

```
// example JSON
var j = '{"$id":"0","name":"Parent","child":{"$id":"1", "name":"Child","parent":{"$ref":"0"}},"nullValue":null}'

function parseAndResolve(json) {
    var refMap = {};

    return JSON.parse(json, function (key, value) {
        if (key === '$id') { 
            refMap[value] = this;
            // return undefined so that the property is deleted
            return void(0);
        }

        if (value && value.$ref) { return refMap[value.$ref]; }

        return value; 
    });
}

console.log(parseAndResolve(j));
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-11-18T15:04:06.483

我在 Alexander Vasiliev 的回答中遇到了阵列校正问题。

我无法评论他的答案（没有足够的声誉点;-)），所以我不得不添加一个新的答案......（我有一个弹出窗口作为最佳做法，不回答其他答案，只回答原始问题-bof）

```
 if (Object.prototype.toString.call(obj) === '[object Array]') {
        for (var i = 0; i < obj.length; i++) {
            // check also if the array element is not a primitive value
            if (typeof obj[i] !== 'object' || !obj[i]) // a primitive value
                return obj[i];
            if ("$ref" in obj[i])
                obj[i] = recurse(obj[i], i, obj);
            else
                obj[i] = recurse(obj[i], prop, obj);
        }
        return obj;
    } 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-05-21T21:02:59.667

在公认的实现中，如果您正在检查一个数组并遇到一个原始值，您将返回该值并覆盖该数组。相反，您希望继续检查数组的所有元素并在最后返回数组。

```
function resolveReferences(json) {
    if (typeof json === 'string')
        json = JSON.parse(json);

    var byid = {}, // all objects by id
        refs = []; // references to objects that could not be resolved
    json = (function recurse(obj, prop, parent) {
        if (typeof obj !== 'object' || !obj) // a primitive value
            return obj;
        if (Object.prototype.toString.call(obj) === '[object Array]') {
            for (var i = 0; i < obj.length; i++)
                // check also if the array element is not a primitive value
                if (typeof obj[i] !== 'object' || !obj[i]) // a primitive value
                    continue;
                else if ("$ref" in obj[i])
                    obj[i] = recurse(obj[i], i, obj);
                else
                    obj[i] = recurse(obj[i], prop, obj);
            return obj;
        }
        if ("$ref" in obj) { // a reference
            var ref = obj.$ref;
            if (ref in byid)
                return byid[ref];
            // else we have to make it lazy:
            refs.push([parent, prop, ref]);
            return;
        } else if ("$id" in obj) {
            var id = obj.$id;
            delete obj.$id;
            if ("$values" in obj) // an array
                obj = obj.$values.map(recurse);
            else // a plain object
                for (var prop in obj)
                    obj[prop] = recurse(obj[prop], prop, obj);
            byid[id] = obj;
        }
        return obj;
    })(json); // run it!

    for (var i = 0; i < refs.length; i++) { // resolve previously unknown references
        var ref = refs[i];
        ref[0][ref[1]] = byid[ref[2]];
        // Notice that this throws if you put in a reference at top-level
    }
    return json;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-02-05T00:35:40.997

我的解决方案（也适用于数组）：

用法：rebuildJsonDotNetObj(jsonDotNetResponse)

编码：

```
function rebuildJsonDotNetObj(obj) {
    var arr = [];
    buildRefArray(obj, arr);
    return setReferences(obj, arr)
}

function buildRefArray(obj, arr) {
    if (!obj || obj['$ref'])
        return;
    var objId = obj['$id'];
    if (!objId)
    {
        obj['$id'] = "x";
        return;
    }
    var id = parseInt(objId);
    var array = obj['$values'];
    if (array && Array.isArray(array)) {
        arr[id] = array;
        array.forEach(function (elem) {
            if (typeof elem === "object")
                buildRefArray(elem, arr);
        });
    }
    else {
        arr[id] = obj;
        for (var prop in obj) {
            if (typeof obj[prop] === "object") {
                buildRefArray(obj[prop], arr);
            }
        }
    }
}

function setReferences(obj, arrRefs) {
    if (!obj)
        return obj;
    var ref = obj['$ref'];
    if (ref)
        return arrRefs[parseInt(ref)];

    if (!obj['$id']) //already visited
        return obj;

    var array = obj['$values'];
    if (array && Array.isArray(array)) {
        for (var i = 0; i < array.length; ++i)
            array[i] = setReferences(array[i], arrRefs)
        return array;
    }
    for (var prop in obj)
        if (typeof obj[prop] === "object")
            obj[prop] = setReferences(obj[prop], arrRefs)
    delete obj['$id'];
    return obj;
} 
```

# ios - 将paypal与ios集成

> ID：15312531
> 
> 赞同：7
> 
> 时间：2013-03-09T15:40:54.053
> 
> 标签：ios, paypal

我正在开发一个需要将支付与 PayPal 集成的应用程序，我已经下载了[PayPal iOS SDK](http://www.github.com/paypal/PayPal-iOS-SDK)，一切都与沙箱完美配合，但现在我不知道如何切换生产模式。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-09T19:43:02.620

如果您购买实物商品，PayPal SDK 很好。关于您的问题：要切换到直播，您只需删除此行

```
[PayPalPaymentViewController setEnvironment:PayPalEnvironmentNoNetwork]; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-12T16:27:51.947

您可能在[iOS 集成文档](https://developer.paypal.com/webapps/developer/docs/integration/mobile/ios-integration-guide/)中遵循的示例代码将环境设置为`PayPalEnvironmentNoNetwork`：

```
// Start out working with the test environment! 
// When you are ready, remove this line to switch to live.
[PayPalPaymentViewController setEnvironment:PayPalEnvironmentNoNetwork]; 
```

您只需删除该行即可上线，因为默认值为`PayPalEnvironmentProduction`.

但是，您可能希望通过将环境更改为：在上线之前测试您的集成`PayPalEnvironmentSandbox`：

```
[PayPalPaymentViewController setEnvironment:PayPalEnvironmentSandbox]; 
```

[您可以在这里](https://developer.paypal.com/)创建沙盒帐户。

切换到生产时，而不是删除该行，更安全、更清晰的是：

```
[PayPalPaymentViewController setEnvironment:PayPalEnvironmentProduction]; 
```

另请参阅[有关环境的 PayPalPaymentViewController.h 文档](https://developer.paypal.com/webapps/developer/docs/integration/mobile/ios-integration-guide/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-27T04:38:19.307

在`PaymentMethodViewController`

1.  将**PayPalEnvironmentSandbox**替换为全局变量的**PayPalEnviromentProduction 。**`kPayPalEnvironment`
2.  设置贝宝帐户的*实时凭据*。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-19T10:33:37.440

```
//for testing    
[PayPalPaymentViewController setEnvironment:self.environment]; 

//for Paypal live app than it set  in our app code  
[PayPalPaymentViewController setEnvironment:PayPalEnvironmentProduction];   

//check in Paypal sandbox account
[PayPalPaymentViewController setEnvironment:PayPalEnvironmentSandbox]; 
```

# jquery - 将css悬停类更改为jquery click

> ID：15312533
> 
> 赞同：0
> 
> 时间：2013-03-09T15:41:06.107
> 
> 标签：jquery, function, css, click, hover

我正在为一个站点创建一个菜单。我正在尝试更改悬停以单击链接上的效果。

当我将鼠标悬停在子菜单上时，必须更改菜单项。

这是代码

```
<li class="dropdown">
            <a href="#">item 1</a>
            <ul>
                <li><a href="#">subitem 1</a></li>
                <li><a href="#">subitem 2</a></li>
                <li><a href="#">subitem 3</a></li>
                <li><a href="#">subitem 4</a></li>
            </ul>
        </li>
        <li class="dropdown">
            <a href="#">item 2</a>
            <ul>
                <li><a href="#">subitem 1</a></li>
                <li><a href="#">subitem 2</a></li>
                <li><a href="#">subitem 3</a></li>
                <li><a href="#">subitem 4</a></li>
            </ul>
        </li> 
```

和CSS

```
.nav>li>a {
            position: relative;
            display: block;
            width: 150px;
            margin-left: -5px;
            padding: 10px 10px 10px 15px;
            font-family: 'Open Sans', sans-serif;
            font-size: 14px;
            letter-spacing: 1px;
            font-weight: 900;
            text-decoration: none;
            color: #383838;
}
.nav>li>a:hover, .nav>li:hover>a {
            color: white;
            width: 169px;
            height: 4px;
            background: -webkit-linear-gradient(bottom, #A30C0C, #C42D2D);
            background: -ms-linear-gradient(bottom, #A30C0C, C42D2D);
            background: -moz-linear-gradient(bottom, #A30C0C, C42D2D);
            background: -o-linear-gradient(bottom, #A30C0C, C42D2D);
            filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff',                         endColorstr='#f3f3f3',GradientType=0);
} 
```

请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T16:14:15.060

你需要这样的东西吗：[SAMPLE](http://jsfiddle.net/RZV4a/)

```
$(".dropdown ul").hide();
$(".dropdown ul li").click(function(){
     $(this).parent().prev('a').html($(this).text());
});
$(".dropdown").hover(function(){
     $(this).find('ul').stop(true,true).slideDown('normal');
      }, function(){
     $(this).find('ul').stop(true,true).slideUp('normal');
}); 
```

# iphone - 合并截图和生成pdf文件

> ID：15312537
> 
> 赞同：0
> 
> 时间：2013-03-09T15:41:39.260
> 
> 标签：iphone, ios, ipad

我正在尝试使用包含 UITextfield、UITextview 和 UIImage 的不同单元格制作 UITable。我想生成一个类似报告的 pdf，其中包含所有单元格，包括图像和文本。

我有为 UITableviewcell 制作一个屏幕截图的代码。但我不知道如何制作多个屏幕截图，然后将它们合并在一起形成一个 pdf 文件。

下面是我制作 UITableviewcell 屏幕截图的代码。谢谢

```
NSUInteger index[] = {0, 0}; // section, row
    NSIndexPath *indexPath = [[NSIndexPath alloc] initWithIndexes:index length:2];

    // Get the cell
    UITableViewCell *cell = [self.tableView cellForRowAtIndexPath:indexPath];

    // Render a graphics context to turn your cell into a UIImage
    CGSize imageSize = cell.bounds.size;
    UIGraphicsBeginImageContext(imageSize);
    CGContextRef imageContext = UIGraphicsGetCurrentContext();

    [cell.layer renderInContext:imageContext];

    // Retrieve the screenshot image

    UIImage *imagefinal = UIGraphicsGetImageFromCurrentImageContext();

       UIGraphicsEndImageContext();

  UIImageWriteToSavedPhotosAlbum(imagefinal, nil, nil, nil); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T20:12:53.503

我不知道如何拍摄多个屏幕截图，但我已经完成了一些合并两个图像的编码，您需要对此代码进行一些更改以合并多个屏幕截图。这是代码。

```
 CGSize endImageSize = CGSizeMake(0, 0);

        endImageSize =  CGSizeMake(CELL_IMAGE_WIDTH,DesiredHeight);

        UIGraphicsBeginImageContext(endImageSize);

        // draw images into this context
        [anOriginalImage1 drawInRect:CGRectMake(0, 0,
                                               endImageSize.width, IMAGE1_HEIGHT)];
        [anOriginalImage2 drawInRect:CGRectMake(0, IMAGE1_HEIGHT,
                                            endImageSize.width, IMAGE2_HEIGHT)];

        //convert context into a UIImage
        UIImage *endImage = UIGraphicsGetImageFromCurrentImageContext();

        //cleanup   
        UIGraphicsEndImageContext(); 
```

# google-maps-api-3 - 通过谷歌地图显示来自 postgis 的数据

> ID：15312540
> 
> 赞同：0
> 
> 时间：2013-03-09T15:41:53.770
> 
> 标签：google-maps-api-3, vector, kml, postgis, spatial

我正在做一个项目，我正在使用 postgres/postgis 和 asp.net 以及与谷歌地图 api v3 连接的 c#。

我的问题是我希望能够显示空间数据，例如：地图上数据库的兴趣点。

是否存在任何库可以将 postgis 转换为 .kml 之类的格式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T15:47:11.670

PostGIS 的函数有一个名为[as_kmldoc](http://blog.mackerron.com/2010/09/29/as_kmldoc/)`ST_AsKML`的包装器，您可以尝试一下。它不是很复杂，但可以满足您的需求。

```
SELECT as_kmldoc(osgb_location, NAME, code) FROM wunderground_stations; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T19:27:33.553

您可以使用 ST_AsKML，但您仍然需要使用该数据创建 KML 字符串。这是完整的函数（在 php 中），它从 mysql 数据库创建具有世界边界的 kml。

```
public function generateWorld() {

    $tolerance = 20000;

    $select = $this->_db->select()
        ->from ( array( 'w' => 'world_borders'),
                array ('cat', 'cntry_name', 'geom' => "ST_AsKML(transform(ST_SimplifyPreserveTopology(transform(w.the_geom, 2249), " . $tolerance . "),4326))"));
    $result = $this->_db->fetchAll($select);

    $countriesByCat = array();
    foreach ($result as $r) {
        if ($countriesByCat[$r['cat']] === null) $countriesByCat[$r['cat']] = array();
        array_push($countriesByCat[$r['cat']], $r);
    }

    $kml = '<?xml version="1.0" encoding="UTF-8"?>
        <kml xmlns="http://www.opengis.net/kml/2.2" xmlns:gx="http://www.google.com/kml/ext/2.2" xmlns:kml="http://www.opengis.net/kml/2.2" xmlns:atom="http://www.w3.org/2005/Atom">
        <Document>
            <name>borders</name>';

    for($i = 0; $i < count($countriesByCat); $i++) {
        $kml .= '<Placemark><name>'.$countriesByCat[$i][0]['cntry_name'].'</name>';
            if (count($countriesByCat[$i]) > 1) {
            $kml .= '<MultiGeometry>';
            foreach ($countriesByCat[$i] as $geom) {
                $kml .= $geom['geom'];
            }
            $kml .= '</MultiGeometry>';
        }
        else {
            $kml .= $countriesByCat[$i][0]['geom'];
        }

        $kml .= '</Placemark>';
    }

    $kml .= '</Document></kml>';

    echo $kml;
} 
```

# delphi - Delphi XE3 KEY_WRITE 未找到

> ID：15312541
> 
> 赞同：3
> 
> 时间：2013-03-09T15:42:02.513
> 
> 标签：delphi, registry, delphi-xe3

我找不到注册表常量的存储位置。在以下示例中，`KEY_WRITE`不识别，也不识别`HKEY_LOCAL_MACHINE`.

是否有任何可用于 XE3 的体面的帮助 - '旧的' Delphi 帮助更有帮助！

```
uses System.Win.Registry;
...
...
...
...
reg := TRegistry.Create(KEY_WRITE); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-09T15:43:20.023

将`Winapi.Windows`单位添加到您的使用条款中：

```
uses
  Winapi.Windows, System.Win.Registry; 
```

* * *

下次您将丢失某个符号时，请注意您可以使用您喜欢的文件浏览器通过在`..\Source`您的 Delphi 安装路径的目录中搜索来搜索它。如果您将仅对`*.pas`文件和整个单词进行细化搜索，您将获得例如`KEY_WRITE`符号 3 文件，其中存在此​​符号：

```
..\Source\data\dsnap\Datasnap.DataBkr.pas
..\Source\rtl\common\System.Win.ComObj.pas
..\Source\rtl\win\Winapi.Windows.pas 
```

然后，如果您打开这 3 个文件并查看那里的符号是如何使用的，您会发现它是在`Winapi.Windows.pas`文件中定义的，而其余两个文件仅在某些函数调用中使用。

# android - 在android中动态更新活动内容

> ID：15312543
> 
> 赞同：0
> 
> 时间：2013-03-09T15:42:08.527
> 
> 标签：android, dynamic, android-activity

我目前正在开发一个消息应用程序，并且我有一个存储收到的消息的活动。因此，当显示此活动（列出收到的消息的活动）时，如果有消息出现，我如何动态更改内容，即如何将新消息添加到列表中。消息显示在文本视图中。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T15:51:45.487

假设您的 TextViews 包含在 LinearLayout

```
LinearLayout ll = (LinearLayout) findViewById(R.id.myLL);

TextView tv = new TextView(context);

LayoutParams lp = new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT);
tv.setLayoutParams(lp);

tv.setText(messageString);

ll.addView(tv); 
```

**编辑**

如果您只有一个 TextView，也许我不了解情况

```
TextView tv = (TextView) findViewById(R.id.myTV);

tv.append(messageString); 
```

# android - Android - 如何使用现有布局按需创建选项卡？

> ID：15312553
> 
> 赞同：0
> 
> 时间：2013-03-09T15:43:04.883
> 
> 标签：android, tabs, android-tabhost

强制性背景信息：我正在构建一个平板电脑应用程序，供房地产经纪人在报价房屋和建筑物时使用。由于家庭或公寓可以有任意数量的房间，我认为构建一个基于选项卡的解决方案会很好，该解决方案允许逐个房间并根据需要为每个房间创建一个选项卡。

我已经阅读了几个选项卡教程，但我发现的所有解决方案都处理预定义数量的选项卡，并使用已弃用的 TabHost。

```
TabHost.TabSpec ourSpec = tabhost.newTabSpec("tag1");
ourSpec.setContent(new TabHost.TabContentFactory()
{

    @Override
    public View createTabContent(String tag)
    {
        // Put some GUI stuff here
        return null;
    }
}); 
```

问题：我想为新选项卡重用现有布局，并以某种方式计算到目前为止已创建的选项卡数量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T02:30:01.890

为此，我使用了以下代码

```
TabSpec fifthTabSpec = tabHost.newTabSpec("tid5");
addTab(fifthTabSpec , "",
        getResources().getDrawable(R.drawable.icon), new Intent(
                A.this, B.class)); 
```

这是 addTab 方法

```
private void addTab(TabSpec spec, String labelId, Drawable drawable,
            Intent intent) {

        View tabIndicator = LayoutInflater.from(this).inflate(
                R.layout.tab_indicator, getTabWidget(), false); // tab_indicator is a layout for the tab widget as i used custom icon and style

        ImageView icon = (ImageView) tabIndicator.findViewById(R.id.icon);
        icon.setImageDrawable(drawable);
        icon.setScaleType(ImageView.ScaleType.FIT_CENTER);

        spec.setIndicator(tabIndicator);
        spec.setContent(intent);
        tabHost.addTab(spec);
    } 
```

这是 tab_indicator

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="0dip"
android:layout_height="55dip"
android:layout_weight="1"
android:orientation="vertical"
android:weightSum="55" >

<ImageView
    android:id="@+id/icon"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_weight="30"
    android:adjustViewBounds="false"
    android:padding="10dp"
    android:background="@drawable/tab_icon_selector"  // tab_icon_selector is custom selector
    android:src="@drawable/icon" /> 
```

希望你会发现这很有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T18:52:51.883

经过大量研究，终于设法将一些可行的东西放在一起。

Sankar Ganesh 的[教程](http://sankarganesh-info-exchange.blogspot.com.ar/2011/04/adding-tabs-dynamically-in-android.html)非常有用。

MainActivity.java：

```
package com.example.workingdynamictabexample;

import android.app.TabActivity;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.widget.TabHost;

@SuppressWarnings("deprecation")
public class MainActivity extends TabActivity
{
    private TabHost tabHost;

    private int z = 0;

    private static final int
        ADD_TAB = Menu.FIRST + 11,
        DELETE_TAB = Menu.FIRST + 12;

    private String Test = null;

    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        this.tabHost = getTabHost();

        Intent newRoom = new Intent();

        newRoom.setClass(this, RoomActivity.class);

        Test = Intent.CATEGORY_LAUNCHER;

        Log.d("Test", Test);

        tabHost.addTab(
                tabHost.newTabSpec("Main")
                        .setIndicator("New room")
                        .setContent(newRoom)
                        );
    }

    private void addTab()
    {
        Intent newRoom = new Intent();

        newRoom.setClass(this, RoomActivity.class);

        tabHost.addTab(
                tabHost.newTabSpec("NewRoomTab")
                        .setIndicator("New room")
                        .setContent(newRoom)
                );

        Log.d("z", Integer.toString(z));

        ++z;
    }

    // "Boss, we really cannot delete one a'dem tab gubbinz, so we hides 'em."
    private void deleteTab() 
    {
        int position = tabHost.getCurrentTab();
        Log.d("Position", Integer.toString(position));

        Log.d("Z val in delete()", Integer.toString(z));

        tabHost.getCurrentTabView().setVisibility(View.GONE);

        if (position > 0)
        {
            tabHost.setCurrentTab(position + 1);

            z -= 1;

            if (z < 0)
            {
                z = 0;
            }
        }
        else if (position == 0)
        {
            tabHost.setCurrentTab(position + 1);

            z = 0;
        }
        else if (position == z)
        {
            tabHost.setCurrentTab(z - 1);

            Log.d("Z value in final", "lol");
            Log.d("Pos", Integer.toString(position));
            Log.d("Z pos", Integer.toString(z));
        }       
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) 
    {
        menu.add(Menu.NONE, ADD_TAB, Menu.NONE, "New room")
            .setAlphabeticShortcut('a');

        return (super.onCreateOptionsMenu(menu));
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item)
    {
        switch (item.getItemId())
        {
        case ADD_TAB:
            addTab();

            return (true);

        case DELETE_TAB:
            deleteTab();

            return (true);
        }

        return (super.onOptionsItemSelected(item));
    }
} 
```

RoomActivity.java：

```
package com.example.workingdynamictabexample;

import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;

public class RoomActivity extends Activity
{
    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.tabhost);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) 
    {
        return (super.onCreateOptionsMenu(menu));
    }
} 
```

活动主.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <LinearLayout
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:padding="5dp">

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:tag="tabPane" />

            <FrameLayout
                android:id="@android:id/tabcontent"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent">                
            </FrameLayout>

    </LinearLayout>
</TabHost> 
```

tabhost.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <LinearLayout
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:padding="5dp">

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:tag="tabPane" 
        />

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent">

            <RelativeLayout
                android:id="@+id/tab_room"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent">

                 <Button
                     android:id="@+id/btnAddTab"
                     android:layout_width="wrap_content"
                     android:layout_height="wrap_content"
                     android:layout_alignParentBottom="true"
                     android:layout_alignParentRight="true"
                     android:onClick="addTab"
                     android:text="Add room" />

                 <TextView
                     android:id="@+id/lblType"
                     android:layout_width="wrap_content"
                     android:layout_height="wrap_content"
                     android:layout_alignParentLeft="true"
                     android:layout_alignParentTop="true"
                     android:layout_marginLeft="20dp"
                     android:layout_marginTop="30dp"
                     android:text="Room type:" />

                 <Spinner
                     android:id="@+id/spinnerType"
                     android:layout_width="wrap_content"
                     android:layout_height="wrap_content"
                     android:layout_alignBottom="@+id/lblType"
                     android:layout_marginLeft="20dp"
                     android:layout_toRightOf="@+id/lblType" />

                 <TextView
                     android:id="@+id/lblWidthX"
                     android:layout_width="wrap_content"
                     android:layout_height="wrap_content"
                     android:layout_alignLeft="@+id/lblType"
                     android:layout_below="@+id/lblType"
                     android:layout_marginTop="30dp"
                     android:text="Dimension 1:" />

                 <TextView
                     android:id="@+id/lblWidthY"
                     android:layout_width="wrap_content"
                     android:layout_height="wrap_content"
                     android:layout_alignLeft="@+id/lblWidthX"
                     android:layout_below="@+id/lblWidthX"
                     android:layout_marginTop="30dp"
                     android:text="Dimension 2:" />

                 <EditText
                     android:id="@+id/txtWidthX"
                     android:layout_width="wrap_content"
                     android:layout_height="wrap_content"
                     android:layout_alignBaseline="@+id/lblWidthX"
                     android:layout_alignBottom="@+id/lblWidthX"
                     android:layout_alignLeft="@+id/txtWidthY"
                     android:layout_alignParentRight="true"
                     android:ems="10" >

                     <requestFocus />
                 </EditText>

                 <EditText
                     android:id="@+id/txtWidthY"
                     android:layout_width="wrap_content"
                     android:layout_height="wrap_content"
                     android:layout_alignBaseline="@+id/lblWidthY"
                     android:layout_alignBottom="@+id/lblWidthY"
                     android:layout_alignParentRight="true"
                     android:layout_toRightOf="@+id/lblWidthY"
                     android:ems="10" />

                 <TextView
                     android:id="@+id/lblFloors"
                     android:layout_width="wrap_content"
                     android:layout_height="wrap_content"
                     android:layout_alignLeft="@+id/lblWidthY"
                     android:layout_below="@+id/txtWidthY"
                     android:layout_marginTop="30dp"
                     android:text="Floors:" />

                 <EditText
                     android:id="@+id/txtFloors"
                     android:layout_width="wrap_content"
                     android:layout_height="wrap_content"
                     android:layout_alignBaseline="@+id/lblFloors"
                     android:layout_alignBottom="@+id/lblFloors"
                     android:layout_alignParentRight="true"
                     android:layout_toRightOf="@+id/lblFloors"
                     android:ems="10" />

            </RelativeLayout>

        </FrameLayout>
    </LinearLayout>
</TabHost> 
```

# php - 在 WordPress 中使用 wp_remote_get 处理 XML

> ID：15312554
> 
> 赞同：7
> 
> 时间：2013-03-09T15:43:09.423
> 
> 标签：php, xml, wordpress

我怀疑我错过了一些非常基本和明显的东西，所以提前道歉！

我一直在使用`simple_xml_load`XML 文件，但是我的客户的托管服务提供商阻止了通过这种方法加载外部文件。我现在正在尝试使用`wp_remote_get`WordPress 内置的功能来重建我的工作。

这是我的代码（注意：此示例中的密钥和庇护所 ID 是通用的）：

```
$url = "http://api.petfinder.com/shelter.getPets?key=1234&count=20&id=abcd&status=A&output=full";
$pf_xml = wp_remote_get( $url );
$xml = wp_remote_retrieve_body($pf_xml); 
```

使用它，我可以检索我需要的所有数据的数组，但我不知道如何定位特定数据。以下是来自的输出`print_r($xml)`：

```
<petfinder xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="http://api.petfinder.com/schemas/0.9/petfinder.xsd">
    <header>
        <version>0.1</version>
        <timestamp>2013-03-09T15:03:46Z</timestamp>
        <status>
        <code>100</code>
        <message/>
        </status>
    </header>
    <lastOffset>5</lastOffset>
    <pets>
        <pet>
            <id>13019537</id>
            <name>Jordy</name>
            <animal>Dog</animal>
        </pet>
        <pet>
            <id>13019888</id>
            <name>Tom</name>
            <animal>Dog</animal>
        </pet>
    </pets>
</petfinder> 
```

例如，如果我想要`echo`状态码，我该怎么做？使用 simplexml，我会写`$xml->header->status->code`. 我似乎无法弄清楚使用`wp_remote_get`.

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-10T10:15:42.410

到目前为止，您的代码确实将 XML 作为字符串检索：

```
$url      = "http://api.petfinder.com/shelter.getPets?key=1234&count=20&id=abcd&status=A&output=full";
$response = wp_remote_get($url);
$body     = wp_remote_retrieve_body($response); 
```

`SimpleXMLElement`要像以前一样将字符串（而不是 URL）加载到 a中[`simplexml_load_file`](http://php.net/simplexml_load_file)（您没有显示具体代码，所以我假设您根据您的描述这样做了），您现在需要加载字符串[`simplexml_load_string`](http://php.net/simplexml_load_string)：

```
$xml  = simplexml_load_string($body);
$code = $xml->header->status->code; 
```

我稍微更改了您的变量名称（尤其是`wp_remote_*`函数名称），以便更清楚地了解这些变量的含义。

# android - 应用程序崩溃，如何解决？

> ID：15312555
> 
> 赞同：0
> 
> 时间：2013-03-09T15:43:10.787
> 
> 标签：android, eclipse

当我运行我的应用程序并从我的微调器中选择一个项目而不是像应用程序崩溃那样打开一个新类时遇到问题，我想知道是否有人可以帮助我解决为什么会发生这种情况。我不确定要包含代码的哪一部分，所以我将包含 Logcat，如果您请求任何代码，我将编辑这篇文章。

谢谢。

日志猫：

```
03-09 15:36:53.814: E/AndroidRuntime(13429): FATAL EXCEPTION: main
03-09 15:36:53.814: E/AndroidRuntime(13429): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.famouspeople/com.example.famouspeople.SeanConnery}: java.lang.NullPointerException
03-09 15:36:53.814: E/AndroidRuntime(13429):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2100)
03-09 15:36:53.814: E/AndroidRuntime(13429):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2125)
03-09 15:36:53.814: E/AndroidRuntime(13429):    at android.app.ActivityThread.access$600(ActivityThread.java:140)
03-09 15:36:53.814: E/AndroidRuntime(13429):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1227)
03-09 15:36:53.814: E/AndroidRuntime(13429):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-09 15:36:53.814: E/AndroidRuntime(13429):    at android.os.Looper.loop(Looper.java:137)
03-09 15:36:53.814: E/AndroidRuntime(13429):    at android.app.ActivityThread.main(ActivityThread.java:4898)
03-09 15:36:53.814: E/AndroidRuntime(13429):    at java.lang.reflect.Method.invokeNative(Native Method)
03-09 15:36:53.814: E/AndroidRuntime(13429):    at java.lang.reflect.Method.invoke(Method.java:511)
03-09 15:36:53.814: E/AndroidRuntime(13429):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
03-09 15:36:53.814: E/AndroidRuntime(13429):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
03-09 15:36:53.814: E/AndroidRuntime(13429):    at dalvik.system.NativeStart.main(Native Method)
03-09 15:36:53.814: E/AndroidRuntime(13429): Caused by: java.lang.NullPointerException
03-09 15:36:53.814: E/AndroidRuntime(13429):    at com.example.famouspeople.SeanConnery.initialize(SeanConnery.java:44)
03-09 15:36:53.814: E/AndroidRuntime(13429):    at com.example.famouspeople.SeanConnery.onCreate(SeanConnery.java:28)
03-09 15:36:53.814: E/AndroidRuntime(13429):    at android.app.Activity.performCreate(Activity.java:5206)
03-09 15:36:53.814: E/AndroidRuntime(13429):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1083)
03-09 15:36:53.814: E/AndroidRuntime(13429):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2064)
03-09 15:36:53.814: E/AndroidRuntime(13429):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T12:37:03.873

通常，当应用程序因单击微调器而崩溃时，问题出在您用于填充微调器的适配器上，请仔细检查您定义的适配器长度。遵循此代码

```
 int num = SpinnerData.length;
    SpinnerData = new String[num];
Log.d("ArrayAdapter",""+ SpinnerData.length);
                    ArrayAdapter<String> spinnerArrayAdapter = new ArrayAdapter<String>(CurrentActivity.this, android.R.layout.simple_list_item_1, SpinnerData);
                    //spinnerArrayAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
                    spinner.setAdapter(spinnerArrayAdapter); 
```

仔细检查长度..我希望这有帮助

# php - 使用下拉列表 Jquery 从 sql 填充文本字段

> ID：15312558
> 
> 赞同：0
> 
> 时间：2013-03-09T15:43:33.173
> 
> 标签：php, mysql, ajax

您好，第一次这样做，基本上我对如何从数据库中重新填充文本框感到很困惑。

我当前的问题是，基本上我的数据库“USER”和“STATISTICS”中有两个表。目前正在工作的是我的代码正在“USER”表中查找“User_ID”的值并填充下拉列表中的值。

我想要从那里填充文本字段，这些字段对应于数据库中查找“User_ID”EG“goal_scored”、“assist”、“clean_sheets”等的那些值。

我很困惑，我查看了各种不同的问题，但找不到我要找的东西。

```
<?php
$link = mysql_connect("localhost","root","");
mysql_select_db("f_club",$link);
$sql = "SELECT * FROM user ";
$aResult = mysql_query($sql);

?>

<html>
<body>
<title>forms</title>
<link rel="stylesheet" type="text/css" href="css/global.css" />
</head>
<body>
<div id="container">

<form action="update.php" method="post">
<h1>Enter User Details</h1>
<h2>
<p> <label for="User_ID"> User ID: </label> <select id="User_ID" id="User_ID" name="User_ID" >
   <br> <option value="">Select</option></br>
    <?php
        $sid1 = $_REQUEST['User_ID'];

        while($rows=mysql_fetch_array($aResult,MYSQL_ASSOC))
        {

        $User_ID = $rows['User_ID'];
        if($sid1 == $id)
        {
        $chkselect = 'selected';

        }
        else
        {
        $chkselect ='';
        }
        ?>
        <option value="<?php echo  $id;?>"<?php echo $chkselect;?>>
        <?php echo $User_ID;?></option>
        <?php }
        ?>
        I had to put this in because everytime I have text field under the User_ID it goes next to it and cuts it off :S

         <p><label for="null"> null: </label><input type="text" name="null" /></p>
    <p><label for="goal_scored">Goal Scored: </label><input type="text" name="Goal_Scored" /></p>
    <p><label for="assist">assist: </label><input type="text" name="assist"  /></p>
    <p><label for="clean_sheets">clean sheets: </label><input type="text" name="clean_sheets" /></p>
    <p><label for="yellow_card">yellow card: </label><input type="text" name="yellow_card" /></p>
    <p><label for="red_card">red card: </label><input type="text" name="red_card" /></p>

    <p><input type="submit" name="submit" value="Update" /></p></h2>
</form>
</div>
</body>
</html> 
```

如果有人可以帮助了解如何进入下一阶段，将不胜感激谢谢 x

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T16:03:50.700

与其把时间花在像 AJAX 这样复杂的东西上，我建议使用带有查询的简单页面路线，例如`user.php?id=1`.

制作一个`user.php`文件（如您的文件），如果`id`已设置（`if isset($_GET['id'])`）从数据库中选择该用户（当然，在清理了您的输入之后）`select * from users where id = $id`（我当然假设您`id`对每个用户都有一个）。

您仍然可以拥有`<select>`，但请记住使用 关闭它`</select>`。你可能会得到这样的结果：

```
<form method="get">
  <label for="user">Select user:</label>
  <select name="id" id="user">
    <option value="1">User 1</option>
    ...
  </select>
  <submit name="submit" value="Select user" />
</form> 
```

这将发送`?id=<id>`到当前页面，然后您可以填写表格。如果您还想编辑该数据，请创建一个新表单，其中填充有代码的数据，`<input type="text" name="goal_scored" value="<?php echo $result['goal_scored']; ?>" />`然后确保`method="post"`监听`isset($_POST['submit'])`并更新您的数据库。

一个例子：

```
<?php
// init
// Use mysqli_ instead, mysql_ is deprecated
$result = mysqli_query($link, "SELECT id, name FROM users");
// Create our select
while ( $row = mysqli_fetch_array($link, $result, MYSQL_ASSOC) ) {?>
  <option value="<?php echo $result['id']; ?>"><?php echo $result['name'] ?></option>
<?php}

// More code ommitted

if (isset($_GET['id'])) {
  $id = sanitise($_GET['id']); // I recommend creating a function for this,
                               // but if only you are going to use it, maybe
                               // don't bother.
  $result = mysqli_query($link, "SELECT * FROM users WHERE id = $id");
  // now create our form.

  if (isset($_POST['submit'])) {
    // data to be updated
    $data = sanitise($_POST['data']);
    // ...

    mysqli_query($link, "UPDATE users SET data = $data, ... WHERE id = $id");
    // To avoid the 'refresh to send data thing', you might want to do a
    // location header trick
    header('Location: user.php?id='.$id);
  }
} 
```

请记住，这只是我正在谈论的想法的一个示例，很多代码已被省略。我通常不喜欢在标签之外编写真正的 HTML `<?php ?>`，但我猜它可以工作。特别是对于较小的东西。

# ios - 我将 UIButton 子类化以创建自己的自定义按钮外观，但它不会重绘所有触摸事件

> ID：15312560
> 
> 赞同：0
> 
> 时间：2013-03-09T15:43:46.810
> 
> 标签：ios, ios6, uibutton, subclass

我正在尝试创建一个按钮子类，它根据它是否是多项选择问题的正确答案来为按钮着色（当它被选中时）。

我这样做是这样的：在我的 UIViewController 中：

```
- (IBAction)answerQuestion:(id)sender {
    QGPrettyButton *answerButton;
    if ([sender isKindOfClass:[UIButton class]]) {
        answerButton = (QGPrettyButton *)sender;
        answerButton.isCorrectAnswer = [self.quizGame checkAnswer:self.currentQuestion answer:answerButton.titleLabel.text];
        [self performSelector:@selector(removeQuestion) withObject:nil afterDelay:TIME_TO_SHOW_CORRECT_ANSWER];
    }
} 
```

在 isCorrectAnswer 的 setter 方法中：

```
- (void)setIsCorrectAnswer:(BOOL)isCorrectAnswer
{
    self.selected = YES;
    [self setNeedsDisplay];
    [self performSelector:@selector(returnToUnselected) withObject:nil afterDelay:TIME_TO_SHOW_CORRECT_ANSWER];
    _isCorrectAnswer = isCorrectAnswer;
}

- (void)returnToUnselected
{
    self.selected = NO;
    [self setNeedsDisplay];
} 
```

在我的 QGPrettyButton 绘制方法中：

```
CGFloat hue = UNSELECTED_HUE;
CGFloat saturation = UNSELECTED_SATURATION;

if (self.state == UIControlStateHighlighted) {
    hue = HOVERED_HUE;
    saturation = HOVERED_SATURATION;
}
if (self.state == UIControlStateSelected) {
    hue = self.isCorrectAnswer ? CORRECT_HUE : INCORRECT_HUE;
} 
```

压倒一切的触摸：

```
-(void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    [super touchesBegan:touches withEvent:event];
    [self setNeedsDisplay];
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    [super touchesMoved:touches withEvent:event];
    [self setNeedsDisplay];

}

- (void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event {
    [super touchesCancelled:touches withEvent:event];
    [self setNeedsDisplay];
    [self performSelector:@selector(hesitateUpdate) withObject:nil afterDelay:0.1];
}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    [super touchesEnded:touches withEvent:event];
    [self setNeedsDisplay];
    [self performSelector:@selector(hesitateUpdate) withObject:nil afterDelay:0.1];
} 
```

如果您将鼠标按下按钮并再次释放，这一切正常，但如果您真的快速点击它，则会调用 IBAction，但未设置按钮的颜色，它只是快速闪烁白色然后回到未选择的颜色.. .

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T15:52:01.327

您可能会尝试`[self setNeedsDisplay]`从您的`touchesEnded:withEvent:`and`touchesCancelled:withEvent:`方法中移出并进入您的`hesitateUpdate`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-12T18:04:32.463

你可以试试`highlighted`UIView 的属性。

如果您希望它突出显示，请执行以下操作：

```
self.highlighted = YES; 
```

反之亦然。

# python - 使用列表推导获取多个子目录中所有文件的计数

> ID：15312563
> 
> 赞同：0
> 
> 时间：2013-03-09T15:44:07.513
> 
> 标签：python, list-comprehension

我有一个包含多个子目录的文件夹，每个子目录都包含多个文件。我想获得所有子目录中所有文件的总和。以下列表理解效果很好：

```
sum_total = len([file for file in os.listdir(current_directory)]) 
```

我将如何修改它以包括计算所有子目录（不仅仅是 current_directory）中的所有文件？还是我必须使用传统的 for 循环和计数器？我可以使用类似于以下内容的东西吗？

```
sum_total = len([file in os.listdir(current_directory + '\\' + folder) for folder in os.listdir(current_directory)]) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T15:49:24.587

[os.walk](http://docs.python.org/2/library/os.html#os.walk)将遍历所有子目录：

```
import os
total = sum(len(files) for root, dirs, files in os.walk('.')) 
```

请注意，这仅计算文件，而不是任何子目录的名称。这与您发布的代码不同。

```
len([file for file in os.listdir(current_directory)]) 
```

计算文件和（顶级）子目录的名称。

* * *

顺便说一句，尽管您要求列表理解，但我建议使用[生成器表达式](http://www.python.org/dev/peps/pep-0289/)：

```
(len(files) for root, dirs, files in os.walk('.')) 
```

速度没有显着差异（至少对于中等大小的目录），但生成器表达式使用的内存更少。

# javascript - 将 Javascript 输入隐藏字段的值设置为在另一个输入文本字段中输入的值

> ID：15312564
> 
> 赞同：4
> 
> 时间：2013-03-09T15:44:13.547
> 
> 标签：javascript, jquery, html, jsp, hidden

我有`name: qtyText`一个用户输入值的输入文本字段 ( )。我想将此值设置为`name: qtyTextHidden`使用 JavaScript 的另一个隐藏字段 ( ) 的值。我该怎么办？

HTML

```
<input name = "qtyText" type = "textbox" size = "2" value = "" />
<input type="hidden"  value = "" name="qtyTextHidden"/> 
```

我努力使用 JS 设置字段值，但我无法将值发送到 servlet。因此，我尝试使用函数直接设置值，然后尝试将其发送到 servlet。我想拥有`value = someJSFunction()`一种。该函数需要在“qtyText”输入字段中的“onChange”时触发。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-09T16:10:58.523

使用 jQuery：

```
$(document).ready(function() {
    $('input:text[name="qtyText"]').keyup(function() {
        $('input:hidden[name="qtyTextHidden"]').val( $(this).val() );
    });
}); 
```

使用 JavaScript：

```
window.onload = function() {
    if(document.readyState == 'complete') {
        document.getElementsByTagName('input')[0].onkeyup = function() {
            document.getElementsByTagName('input')[1].value = this.value;
        };
    }
}: 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T16:13:48.703

我建议：

```
function updateHidden(valueFrom, valueTo) {
    valueTo.value = valueFrom.value;
}

var inputs = document.getElementsByTagName('input'),
    textInputs = [],
    hiddenInputs = [],
    refersTo;

for (var i = 0, len = inputs.length; i < len; i++) {
    switch (inputs[i].type) {
        case 'hidden':
            hiddenInputs.push(inputs[i]);
            break;
        case 'text':
        default:
            textInputs.push(inputs[i]);
            break;
    }
}

for (var i = 0, len = textInputs.length; i < len; i++) {
    refersTo = document.getElementsByName(textInputs[i].name + 'Hidden')[0];
    if (refersTo !== null) {
        textInputs[i].onchange = function () {
            updateHidden(this, document.getElementsByName(this.name + 'Hidden')[0]);
        };
    }
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/YmCWb/1/)。

顺便说一句：***没有*** `type="textbox"`. 完全没有。*曾经*。***HTML 中的任何地方***，甚至在 HTML 5 中：它是`type="text"`. *它适用*的唯一原因`type="textbox"`是浏览器非常宽容，如果`type`不理解，它*默认*为`type="text"`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T18:04:41.690

要设置隐藏字段的值，最简单的方法是使用传递三个参数 、 和名称的`from`javascript`to`函数`form`：

```
<script type="text/javascript">
    function someJSFunction(form, from, to){
      var el_from=form[from], el_to=form[to];
      el_to.value=el_from.value;
      return el_to.value;
    }
</script>
<form name="myform">
<input name = "qtyText" type = "textbox" size = "2" value = "" onchange="someJSFunction(myform, 'qtyText', 'qtyTextHidden')"/>
<input type="hidden"  value = "" name="qtyTextHidden"/> 
```

# php - 使用从 mysql 检索的数据制作列表

> ID：15312565
> 
> 赞同：0
> 
> 时间：2013-03-09T15:44:20.210
> 
> 标签：php, codeigniter

我有这个问题我有这 3 个实体`Operator`，`Programs`和`News`。`Programs`和`News`表有一个确定的列，`Operator_ID`即来自 one `Operator`。

然后在网页的主要部分，我想在一个列表中列出和`Operator`他的列表。我有这个代码 html 但我需要与 php 合并..`News``Program`

```
<div id="news-block">
    <h3 id="news-title">
        <a href="">NAME OPERATOR</a></h3>
    <ul id="news-content">
        <li><a target="_blank" href="">Program</a></li>
        <li><a target="_blank" href="">New</a></li>
    </ul>
</div> 
```

当操作员没有新闻但有节目时，问题就来了……或者没有节目但有新闻……

* * *

编辑：

```
<?php
if($programas!=null)
{
  $nombre = null;
  foreach ($programas as $programa) {
    if($programa->ingreso!= date('Y-m-d',time()-(24*60*60))){
      if ($programa->operador!= $nombre) {
        $nombre = $programa->operador;
        echo  "<div id='news-block'>";
        echo "<h3 id='news-title'>".anchor('locheco/Ver_Operador/'.$programa->user_id, $programa->nombre)."</h3>";
        echo '<ul id="news-content">';
      }
      echo "<li>".anchor('programa/Ver_Programa/'.$programa->id, $programa->titulo,'target="_blank"')."</li>";
      foreach ($promociones as $pr) {
        if($pr->operador==$programa->operador  && $programa->ingreso!=date('Y-m-d',time()-(24*60*60)))
        {
          echo "<li>".anchor('programa/Ver_Programa/'.$pr->id, $pr->titulo,'target="_blank"')."</li>";
        }
      }
    }
  }
  echo "</div>";
}
?> 
```

因此，如果没有节目并且有新闻，请不要显示它..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T16:09:44.587

好的，在澄清问题时，答案是不同的。将新闻和节目检索到单独的变量中。

控制器：

```
$data['news']=array();
$data['news']=$this->modelname->getNews($operatorId);
$data['programs']=array();
$data['programs']=$this->modelname->getPrograms($operatorId); 
```

看法：

```
if(!empty($news))
{
    //display news code in here
}
if(!empty($programs))
{
    //display programs code in here
} 
```

# javascript - 获取此 DIV 的父 ID

> ID：15312567
> 
> 赞同：4
> 
> 时间：2013-03-09T15:44:25.263
> 
> 标签：javascript, jquery

当在 jquery / javascript 中的“.buttonleft0”中单击按钮时，我希望从此布局中找到父 div id（即“Bakerloo”）。

```
<div id='Bakerloo' class='box'>bakerloo<p></p><span class='buttons'>
<span class='buttonleft0'><button onClick='up()'><span class='icon icon10'></span>
</button>
</span><span class='buttonleft'></span><span class='buttonright'></span></span>
<div class='comingup'></div>
<div class='more'></div></div> 
```

我努力了：

```
$(this).parent('id'); 
```

但这只会返回“未定义”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T15:48:30.603

```
$(this).closest('div').attr('id') 
```

我想这就是你想要的

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-09T15:46:39.277

该`parent()`函数返回 jQuery 对象，因此您需要使用`attr()`它的任何属性，如下所示：

```
$(this).closest().attr('id'); 
```

**编辑：**在进一步检查中，该按钮似乎不是 的直接子级`div`，因此需要使用该`closest()`功能。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-11T19:35:36.060

直截了当的 Javascript 总是对我有用。

```
<div id='Bakerloo' class='box'>
    bakerloo<p></p>
    <span class='buttons'>
        <span class='buttonleft0'>
        <button onClick='alert(this.parentNode.parentNode.id)'>
             <span class='icon icon10'></span>
        </button>
        </span>
        <span class='buttonleft'></span>
        <span class='buttonright'></span>
    </span>
    <div class='comingup'></div>
    <div class='more'></div>
</div> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-09T16:04:52.837

您的代码本身几乎没有错误，所以这是正确的：

**HTML**

```
<div id='Bakerloo' class='box'>bakerloo<p></p><span class='buttons'>
<span class='buttonleft0'><button><span class='icon icon10'>Click here</span>
</button>
</span><span class='buttonleft'></span><span class='buttonright'></span></span>
<div class='comingup'></div>
<div class='more'></div></div> 
```

**jQuery**

```
jQuery(document).ready(function($){
    $("button").on('click',function(){
       alert($(this).closest('div').attr('id'));
    });
}); 
```

这是小提琴[http://jsfiddle.net/cpeeyush/ydk4e/](http://jsfiddle.net/cpeeyush/ydk4e/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-09T15:49:18.023

尝试这个：

```
$(this).parent().attr("id"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-09T15:56:19.063

尝试这个：

$(this).closest('div[id]')

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-05-13T13:08:23.787

```
alert($(this).parent().id); 
```

如果您想确保选择正确的课程，请尝试：

```
alert($(this).parent('.div').id); 
```

如果您有更深的层次结构，您可以使用：

```
alert($(this).parents('.div:eq(n)').id); 
```

其中 n 是您想要获得的父母

# c# - 更新文本框

> ID：15312571
> 
> 赞同：1
> 
> 时间：2013-03-09T15:44:53.267
> 
> 标签：c#, winforms, timer, backgroundworker

我正在编写一个程序来帮助玩游戏。我需要它来更新显示当前 exp 值的文本框，在论坛加载时它确实显示 exp，我需要它来更新`exp`每个*`3 seconds`*.

我该怎么做呢？

这是我到目前为止所拥有的：

```
 Client C = Client.GetClients()[0];
        Player P;
        P = C.GetPlayer();
        expTextBox.Text = ("Experience: " + P.Experience.ToString()); 
```

我不确定我是否需要一个`timer`（我已经尝试过，但我很不擅长制作）或者是否`backGroundWorker`是最好的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T16:10:34.747

根据您的评论，我建议您在玩家攻击时更新您的 UI，而不是使用计时器。这将使您的 UI 保持最新，并且可能比 3 或 10 秒计时器更好地为您服务。你会有这样的方法：

```
public void Attack(Enemy e)
{
  //do your attack code

  //did the enemy die?
  KillEnemy();

  //add exp just for landing a successful attack
  AddExp(e);
}

public void AddExp(Enemy e)
{
  CurrentPlayer.Exp += e.ExperienceGain;

  //update the UI with the new exp
  GameWindow.ExperienceBox.Text = CurrentPlayer.Exp;
} 
```

这当然是更多的伪代码，因为我不知道你的设计是什么样的，但我做了很多游戏，而且我总是这样做。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T15:51:57.707

如果您使用无限循环进入后台工作人员，我会鼓励您使用 Timer，但在使用后台工作人员时需要注意两件事：

1.  更新文本框或任何其他 UI 将不起作用，因为它需要从主线程完成。所以你需要先检查 myTextbox.requireInvoke() 函数。
2.  检查后台工作人员是否收到取消信号以存在无限循环。

另一方面。当您使用计时器更新文本框时，您会消耗一些时间。因为计时器将进入窗口中的事件处理周期，然后触发事件，最后您将在计时器事件中编写代码。

# ruby-on-rails - 使用 rspec 和 capybara 测试 rails+backbone 应用程序

> ID：15312572
> 
> 赞同：0
> 
> 时间：2013-03-09T15:45:03.533
> 
> 标签：ruby-on-rails, backbone.js, rspec, capybara

我正在使用列出的 gem 为我的应用程序编写测试。我找不到如何设置 Capybara 以使用主干（全部为 ajax）
示例测试：

```
require 'spec_helper' describe "Main" do   describe "GET /" do
    it "displays articles" do
      Article.create!(title:'title',body:'<p>body text</p>')
      visit '/'
      page.should have_content('body text')
    end   
  end 
end 
```

和测试的输出：

```
Failures:

  1) Main GET / displays articles
     Failure/Error: page.should have_content('body text')
       expected there to be text "body text" in "Loading..."
     # ./spec/features/main_spec.rb:8:in `block (3 levels) in <top (required)>' 
```

“正在加载...”是我的视图模板中的前 ajax 文本...

关键是我现在不想在这个应用程序中使用 Jasmine

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T17:49:04.007

看起来您正在使用默认的 Rack::Test 驱动程序运行 Capybara，这意味着没有 JavaScript。Rack::Test 正在加载您的应用程序并在 Capybara API 后面伪造一个浏览器 DOM。

您需要使用在真正的 Web 浏览器中运行测试的驱动程序。有几种不同的选择：Selenium 驱动程序随 Capybara 一起在真正的浏览器（通常是 Firefox）中运行您的测试，其他的则在单独的 gem 中实现，例如使用 PhantomJS 和无头 WebKit 浏览器的[Poltergeist 。](https://github.com/jonleighton/poltergeist)

Capybara[自述](https://github.com/jnicklas/capybara#selecting-the-driver)文件中有关于设置正确驱动程序的说明。您可以通过将选项添加到描述块来切换一组测试以使用支持 JavaScript 的驱动程序`js`，例如：

```
describe "Main with JavaScript", :js => true do
  # ...
end 
```

# flash - 未定义属性 oneSecTimer 的访问

> ID：15312573
> 
> 赞同：-2
> 
> 时间：2013-03-09T15:45:05.747
> 
> 标签：flash, timer

我真的不知道出了什么问题。我继续一遍又一遍地遇到同样的错误。访问第 31、32 和 46 行的未定义属性 OneSecTimer。这是我第一次使用 Flash 编码，所以我真的不知道这里发生了什么。OnTimeComplete 应该是私有的，但这就是不访问事物的原因吗？

包裹 {

```
import flash.display.MovieClip;

import flash.events.TimerEvent;
import flash.utils.Timer;

public class MainTimer extends MovieClip {
    // Init vars for class
    private var currentMin:int;
    private var currentSec:int;
    // create a one second timer from Flash's Timer class
    private var onSecTimer:Timer = new Timer(1000,1);            

    public var timerHasStopped:Boolean = false;

    public function MainTimer() {
        // constructor code
        trace("the main timer is here");
        currentMin= 2;
        currentSec = 5;

        minBox.text = String(currentMin);
        if(currentSec < 10){
            secBox.text = "0" + String(currentSec);
        }else{
            secBox.text = String(currentSec);
        }

        oneSecTimer.addEventListener(TimerEvent.TIMER_COMPLETE, onTimerComplete);
        oneSecTimer.start();
    }

    private function onTimerComplete(event:TimerEvent):void{
        currentSec = currentSec - 1;
        if (currentSec < 0){
            currentSec = 59;
            currentMin -= 1;
        } //end if
        if(currentMin < 0){
            currentMin = 0;
            currentSec = 0;
            timerHasStopped = true;
        }else{
            oneSecTimer.start();
        } //end else

        //update the display
        minBox.text = String(currentMin);
        secBox.text = String(currentSec);
        if(currentSec < 10){
            secBox.text = "0" + String(currentSec);
        }//end if                

    }//end function 

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T15:46:10.617

你有一个拼写错误

```
private var onSecTimer:Timer = new Timer(1000,1); 
```

应该

```
private var oneSecTimer:Timer = new Timer(1000,1); 
```

（你错过了一个`e`）

当您收到有关缺少属性的错误时，您通常应该做的第一件事是转到您认为定义它的位置，并确保它的定义与您期望的完全一致:)

# sql-server - EWL 验证的电话号码字段的正确数据类型是什么？

> ID：15312574
> 
> 赞同：1
> 
> 时间：2013-03-09T15:45:12.563
> 
> 标签：sql-server, types, enterprise-web-library

SQL Server 中电话号码的数据类型应该是什么？varchar？多长？而且，我在哪里可以找到类似字段（邮政编码等）的 EWL 的此类信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:39:53.743

是的，`varchar`用于电话号码。我可能会使用类似的东西`varchar(25)`。据我所知，没有关于每种 EWL 数据类型使用哪种 SQL Server 数据类型的文档。您可以做的一件事是查看`Validator`类中的验证方法，看看它们能够返回什么。我知道这不是一个理想的解决方案，但我认为这是你现在最好的选择。

# php - 如果在 CSV 中找到元素，PHP 代码将进行搜索和替换

> ID：15312577
> 
> 赞同：2
> 
> 时间：2013-03-09T15:45:35.740
> 
> 标签：php, search, csv, replace

假设我们创建了一个 CSV，其中包含以下项目；

```
A   B   C   D   E   F
G   H   I   J   K   L
M   N   O   P   Q   R 
```

我试图弄清楚如何使用以下代码

```
$f = fopen($file, "r");
while ($row = fgetcsv($f,'',';')) {
    if ($row[1] == 'H') {       
        echo ('FOUND ! ');      
    }
} 
```

要打开文件并在`H`CSV 文件中找到的项目之后，我想将`K`项目替换为`K+replace`. 这是怎么做到的？

我想用它来有条件地在一百万条目 CSV 中插入值，我的意思是如果发现一个元素用其他值更新这个项目。

我之所以选择 CSV，是因为 MySQL 需要 0.5 秒以上的时间来搜索-查找-更新/替换每个项目。（一切都在一个循环中完成）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T16:03:20.817

最简单的方法是打开文件并像您一样一次读取一行，然后打开一个“输出”文件并在循环遍历“源文件。所以基本上

```
$f = fopen($file, "r");
$o = fopen($output_file, "a");
while ($row = fgetcsv($f,'',';')) {
  if ($row[1] == 'H') {         
    $row[4] = '??'; // whatever you want to replace K with
     echo ('FOUND ! ');        
  }
  fputcsv($o,$row,';');    
} 
```

# java - 参数（整数）

> ID：15312578
> 
> 赞同：1
> 
> 时间：2013-03-09T15:45:39.573
> 
> 标签：java

我是java的初学者，我正在从互联网上做练习题。我偶然发现了这个问题，我被卡住了。

编写一个名为 distance 的方法，它接受四个整数坐标 x1、y1、x2 和 y2 作为参数，并计算笛卡尔平面上点 (x1, y1) 和 (x2, y2) 之间的距离。例如，对 distance(1, 0, 4, 4) 的调用将返回 5.0，对 distance(10, 2, 3, 5) 的调用将返回 7.615773105863909。

```
public static int distance(int x1,int y1,int x2,int y2){
   int d=(x2-x1)*(x2-x1)-(y2-y1)*(y2-y1))^0.5;
    return (double)d;

} 
```

我想澄清两件事。当我使用 ^ 时，他们一直给我一个错误，说它不能应用。其次，我尝试在等式中的一个数字内输入 double。但它也一直给我一个错误.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T15:48:05.777

`^`是二元异或运算符。

请改用[Math.pow](http://docs.oracle.com/javase/6/docs/api/java/lang/Math.html#pow%28double,%20double%29)。或[Math.sqrt](http://docs.oracle.com/javase/6/docs/api/java/lang/Math.html#sqrt%28double%29)（更好）。

您不应将结果转换为`int`然后再转换为`double`. 只需使用

```
public static double distance(int x1,int y1,int x2,int y2){
    return Math.sqrt((x2-x1)*(x2-x1)-(y2-y1)*(y2-y1)));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T15:48:10.633

```
int d=(x2-x1)*(x2-x1)-(y2-y1)*(y2-y1))^0.5; 
```

在java中，`^`是XOR运算符。使用`Math.pow()`.

提高到一半的幂，在平方路由中也是一样的，可以用`Math.sqrt()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T15:48:00.770

1.  如果你想使用 Math.pow() 而不是 ^ 运算符。或 Math.sqrt()
2.  你不能投双，因为你的方法返回**int**。将其更改为*public static double*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T15:48:39.567

你可以使用`Math.sqrt()`，它是java数学中的内置方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-09T15:55:17.653

首先，如果您的小说期望一个 int 值，则您不能返回 double 。其次，您可以使用`Math.pow()`而不是`^`，在您的情况下，您可以使用`Math.Sqrt()`. 第三，如果您想要双倍结果，则需要将您使用的 int 值转换为双倍：

```
public static double distance(int x1,int y1,int x2,int y2){

    double d = Math.sqrt(((x2-x1)*(x2-x1)-(y2-y1)*(y2-y1)));
    return d;
} 
```

# symfony - 表单主题展示图片

> ID：15312579
> 
> 赞同：0
> 
> 时间：2013-03-09T15:45:40.253
> 
> 标签：symfony, symfony-2.1, symfony-forms

我去了[这个教程](http://symfony.com/doc/master/cookbook/form/form_customization.html)。我得到了这个例子。但我不明白，因为我无法为我的情况定制它。

我想为我的每个 facebook 朋友显示一张图片，并将个人资料图片的地址从 facebook 传递到复选框元素前面的图像标签。

**更新**

我行动的一部分：

```
//the array is on part of my update.
$choice_test = array();
$choice_test[] = array('id' => 1, 'username' => 'test');
$choice_test[] = array('id' => 2, 'username' => 'test2');

->add('friend', 'choice', array(
     'required' => true,
     'expanded' => true,
     'choice_list' => $choice_test, //this is my update
     'choices' => $fb_friends_form,  //$fb_friends_form[1]= 'First Lastane';
     'multiple' => true,
     'constraints' => array(new CheckChoicesFbFriends(array('fb_friends_form' => $fb_friends_form))),
     'mapped' => true
     ))

return $this->render('FrontendChancesBundle::createrequest.html.php', array(
                'form' => $form->createView())); 
```

模板：

```
<?php $view['form']->setTheme($form, array('FrontendDemoBundle:Form')) ;?>
<?php  echo $view['form']->widget($form['friend'])?> 
```

在 FrontendDemoBundle/Ressources/views/Form/form_widget_pics.html.php 中：

```
<input
 type="<?php echo isset($type) ? $view->escape($type) : 'checkbox' ?>"
 <?php if (!empty($value)): ?>value="<?php echo $view->escape($value) ?>"<?php endif ?>
 <?php echo $view['form']->block($form, 'checkbox_widget') ?>
 /> 
```

我怎么能传递一个变量，在我的例子中，用户名（`$fb_username[0] = 'username' of facebook 到 from_widget_pics.html.php 以及如何在我的 aciton 中使用表单 bulider 显示它：

```
<img src="www.facebook.com/+FirstLastname> 
<input type="checkbox"
   id="form_friend_0"
   name="form[friend][]"
   value="1"/> 
<label for="form_friend_0" >First Lastname</label>
<img src="www.facebook.com/+nextfriend> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-02T08:59:54.807

尝试使用“choice_list”选项将自定义选定对象的数组或集合传递给表单时，我收到了相同的异常消息。

我以这种方式解决了它（简化示例）：

控制器代码：

```
use Symfony\Component\Form\Extension\Core\ChoiceList\SimpleChoiceList;

class UsedCarsController extends Controller {

..... action code:

$usedCars = $carRepository->findAllUsed();

$choiceList = new SimpleChoiceList($usedCars);

$form = $this->createForm(new UsedCarsType($choiceList),null, array('label' => 'Used cars form'));

... now render view, etc. 
```

二手车类型：

```
class UsedCarsType extends AbstractType
{
    private $choicesList;

public function __construct($choicesList)
{
    $this->choicesList = $choicesList;
}

public function buildForm(FormBuilderInterface $builder, array $options)
{
    $builder->add('usedCars', 'choice',array('label'=>'Used cars',
                                     'required'=>true,
                                     'choice_list' => $this->choicesList,
                                     'empty_value' => '-- used car --'))
        ;
} 
```

Choice_list 选项必须是 SimpleChoiceList 类的实例，而不是数组。

有点晚了，但希望这会有所帮助。

顺便说一句：我正在使用 Symfony 2.3

# c# - 尝试读取 Web.config 配置部分时出现转换错误

> ID：15312580
> 
> 赞同：1
> 
> 时间：2013-03-09T15:45:50.643
> 
> 标签：c#, api, authentication, configuration, servicestack

我试图找出是否可以配置 ServiceStack 以使用主机标头中的 API 密钥对调用进行身份验证？

我在这里找到了一个例子：[http ://rossipedia.com/blog/2013/03/06/simple-api-key-authentication-with-servicestack/](http://rossipedia.com/blog/2013/03/06/simple-api-key-authentication-with-servicestack/)

但由于某种原因，在我的 Clients.cs 中，它看起来像这样：

```
using System;
using System.Collections.Generic;
using System.Configuration;
using System.Linq;
using System.Web;

namespace Servicestack_MVC.Models
{
public static class Clients
{
    private static Lazy<ClientSection> section = new Lazy<ClientSection>(() =>
          (ClientSection)ConfigurationManager.GetSection("apiClients"));

    public static bool VerifyKey(string apiKey)
    {
        return section.Value.Cast<ClientSection.ClientElement>()
               .SingleOrDefault(ce => ce.ApiKey == apiKey);
    }
}

} 
```

我得到错误：

错误 9 实例参数：无法从“Servicestack_MVC.Models.ClientSection”转换为“System.Linq.IQueryable”和

错误 10“Servicestack_MVC.Models.ClientSection”不包含“Cast”的定义，并且最佳扩展方法重载“System.Linq.Queryable.Cast(System.Linq.IQueryable)”有一些无效参数

在 web.config 部分中，我添加了：

```
<section name="apiClients" type="ClientSection" requirePermission="false"/> 
```

并添加了部分

```
<apiClients>
  <clients>
    <client name="Client1" apiKey="somelongrandomkey" />
    <client name="Client2" apiKey="somelongrandomkey" />
    <!-- etc -->
  </clients>
</apiClients> 
```

谁能告诉我我做错了什么？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T16:48:02.447

这实际上是我帖子上的一个错误。它已被修复。实际代码应如下所示：

```
public static bool VerifyKey(string apiKey)
{
    return section.Value.Cast<ClientSection.ClientElement>()
           .Any(ce => ce.ApiKey == apiKey);
} 
```

此外，您的配置节处理程序需要完全合格。从外观上看，您似乎已将代码放置在`Servicestack_MVC.Models`名称空间中。

在这种情况下，您的`<section>`标签需要如下所示：

```
<section name="apiClients" type="Servicestack_MVC.Models.ClientSection" requirePermission="false"/> 
```

希望有帮助！

# php - 为什么我使用 JavaScript 进行的表单验证不会阻止表单被发送？

> ID：15312585
> 
> 赞同：2
> 
> 时间：2013-03-09T15:46:07.557
> 
> 标签：php, javascript

我有这个小 javascript 来检查电子邮件是否有效，我检查客户端，因为它不是 100% 重要的是邮件是有效的，我不想重定向用户只是为了检查。

问题是弹出窗口确实出现了，但仍然插入了用户值

```
 <script>
function popup()
{  

    var email = document.getElementById("email").value;
    var atpos=email.indexOf("@");
    var dotpos=email.lastIndexOf(".");

if (document.getElementById("email").value == "") {

    alert("Enter an email");
    return false;

 }
else if (atpos<1 || dotpos<atpos+2 || dotpos+2>=email.length) {

    alert("The email is not valid");
    return false;

 }
else
    window.location = "email.php";
    return true;
}
   </script> 
```

这是HTML表单

```
 <form action="email.php" accept-charset="UTF-8" class="signup_form" id="signup_form" method="post">

<input class="txt accent-color colorize_border-color required" id="email" name="email" placeholder="Indtast E-mail her" data-label-text="Email" type="email">

<input class="submit button big btn" id="submit_button" name="submit" value="Deltag nu!" onclick="return popup()"  type="submit">

</form> 
```

如果我删除“类型提交”它可以工作，但我没有在下一页上获得带有 $_POST 的值，它们为空。

有什么办法可以解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T15:55:55.300

典范

```
window.onload=function() {
  document.getElementById(("signup_form").onsubmit=function() {
    var email = document.getElementById("email").value;
    var atpos=email.indexOf("@");
    var dotpos=email.lastIndexOf(".");

    if (document.getElementById("email").value == "") {
      alert("Enter an email");
      return false;
    }
    if (atpos<1 || dotpos<atpos+2 || dotpos+2>=email.length) {
      alert("The email is not valid");
      return false;
    }
    return true;
  }
 } 
```

使用

```
<form action="email.php" accept-charset="UTF-8" class="signup_form" id="signup_form" method="post">
  <input class="txt accent-color colorize_border-color required" id="email" name="email" placeholder="Indtast E-mail her" data-label-text="Email" type="email">
  <input class="submit button big btn" id="submit_button" name="submit" value="Deltag nu!"   type="submit">
</form> 
```

# mysql - MySQL 无法登录 mysqldump

> ID：15312587
> 
> 赞同：0
> 
> 时间：2013-03-09T15:46:15.140
> 
> 标签：mysql, mysqldump

我正在尝试`mysqldump`从命令行在我的服务器中使用。

```
root@xxxxx:/xx/xx/xx/backups/09-03-13# mysqldump db_name_xxxx --tab=. --user=xxxx 
   --password=xxxxx
mysqldump: Got error: 1045: Access denied for user 'xxxxx'@'localhost' (using 
   password: YES) when executing 'SELECT INTO OUTFILE' 
```

所以我认为这是用户名/密码的问题。

`mysql`但是，我可以使用完全相同的登录详细信息进入 MySQL 命令行。

什么可能导致`mysqldump`失败，但不是`mysql`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T17:21:34.977

您的问题不在于登录详细信息，而在于您登录的用户。

为了执行 mysqldump，您至少需要`SHOW DATABASES, SELECT, LOCK`数据库中每个表的权限。如果您使用更多奇特的选项（例如锁定等），事情会变得更加复杂。

[对于 mysqldump 中的哪些选项需要哪些权限，这](http://openconcept.ca/mysql_permissions_for_backup)是一个很好的参考。

# sql - oracle to_date 函数操作

> ID：15312588
> 
> 赞同：0
> 
> 时间：2013-03-09T15:46:18.040
> 
> 标签：sql, database, oracle, date-arithmetic

我想使用 sql 查询做一些操作，比如显示今天日期 + 3，这意味着如果今天是 2013-03-09 ，那么加上 3 天就是 2013-03-12。

这是我的示例表：

```
PLACES(VARCHAR)   TMS(NUMBER)
LONDON            20130301
TAIWAN            20130302 
```

我必须使用 to_date 函数将其转换为日期格式。

```
select to_char(to_date(TMS,'YYYY-MM-DD'),'YYYY-MM-DD') from city; 
```

结果 ：

```
TO_CHAR(TO_DATE(TMS,'YYYY-MM-DD'),'YYYY-MM-DD')
2013-03-01
2013-03-02 
```

我试过如下：

```
select to_char(to_date(TMS+3,'YYYY-MM-DD'),'YYYY-MM-DD') from city; 
```

但它不能工作。有什么提示吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T15:51:31.843

```
select to_char(to_date(TMS,'YYYY-MM-DD')+3,'YYYY-MM-DD') from city; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T15:56:11.077

希望对你有帮助..

```
select to_char(to_date(TMS,'YYYY-MM-DD')+ INTERVAL '3' DAY,'YYYY-MM-DD') from city; 
```

# android - 在单个 execSQL 查询中可以指定的 SQL 变量的限制是多少

> ID：15312590
> 
> 赞同：24
> 
> 时间：2013-03-09T15:46:38.990
> 
> 标签：android, sqlite, android-sqlite

我正在尝试提高我的 android 数据库插入的速度。我目前正在做的是生成一个字符串，如：

```
SELECT ? as title, ? as musician_id, ? as album_id, ? as genre
UNION SELECT ?, ?, ?, ?
UNION SELECT ?, ?, ?, ?
UNION SELECT ?, ?, ?, ?
UNION SELECT ?, ?, ?, ?
UNION SELECT ?, ?, ?, ? 
```

然后执行它

```
SQLiteDatabase database = //initialized in some way
String insertQuery; // the string of the query above
String [] parameters; // the parameters to use in the insertion.
database.execSQL(insertQuery.toString(), parameters); 
```

当我尝试插入大约 2000 行时出现以下错误：

```
Caused by: android.database.sqlite.SQLiteException: too many SQL variables (code 1): , while compiling: INSERT INTO songs (title, musician_id, album_id, genre)
SELECT ? as title, ? as musician_id, ? as album_id, ? as genre
UNION SELECT ?, ?, ?, ?
UNION SELECT ?, ?, ?, ? 
```

当我尝试插入大约 200 行时，一切正常。

我想这很明显 - 我试图在单个`execSQL`. 有谁知道限制是什么，以便我可以将插入的行拆分为适当的批次？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-03-09T17:06:13.680

该限制在[sqlite3.c](https://raw.github.com/android/platform_external_sqlite/master/dist/sqlite3.c)中硬编码并设置为 999。不幸的是，它可以更改，但只能在编译时更改。以下是相关的片段：

```
/*
** The maximum value of a ?nnn wildcard that the parser will accept.
*/
#ifndef SQLITE_MAX_VARIABLE_NUMBER
# define SQLITE_MAX_VARIABLE_NUMBER 999
#endif

/*
** The datatype ynVar is a signed integer, either 16-bit or 32-bit.
** Usually it is 16-bits.  But if SQLITE_MAX_VARIABLE_NUMBER is greater
** than 32767 we have to make it 32-bit.  16-bit is preferred because
** it uses less memory in the Expr object, which is a big memory user
** in systems with lots of prepared statements.  And few applications
** need more than about 10 or 20 variables.  But some extreme users want
** to have prepared statements with over 32767 variables, and for them
** the option is available (at compile-time).
*/
#if SQLITE_MAX_VARIABLE_NUMBER<=32767
typedef i16 ynVar;
#else
typedef int ynVar;
#endif 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-03-09T16:50:08.287

> 我正在尝试**提高我的 android 数据库插入速度**。我目前正在做的是生成一个字符串，如：

你考虑过使用**`TRANSACTION`**吗？我建议您使用它而不是您的方法。我认为 use**`UNION`**子句根本不是“胜利”，并且有更好且主要更安全的方法来实现它。

```
db.beginTransaction();
try {
   for (int i = 0 ; i < length ; i++ ) { // or another kind of loop etc.
     // make insert actions
   }
   db.setTransactionSuccessful(); // now commit changes
}
finally {
    db.endTransaction();
} 
```

# javascript - jQuery设置属性值问题

> ID：15312595
> 
> 赞同：0
> 
> 时间：2013-03-09T15:46:56.107
> 
> 标签：javascript, jquery, html, local-storage

我有一些文本框，在 save 上，我将本地存储数据保存到它们；

```
$(".formFieldUserData").each(function () {
  var key = $(this).attr("name");
  var value = $(this).attr("value");
  localStorage.setItem(key, value);
} 
```

现在由于某种原因，即使我在文本框中输入了一些值，也总是`$(this).attr("value")`返回`undefined`。

问题是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T15:50:12.617

[`.val()`](http://api.jquery.com/val/)您使用而不是检索表单字段值`.attr("value")`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T15:50:22.387

这是您的解决方案：

```
$(".formFieldUserData").each(function() {
    var key = $(this).attr("name");
    var value = $(this).val();

    localStorage.setItem(key, value);
}); 
```

**注意：** `"value"`你的标签的属性是可变的，所以你使用`$.val()`方法来获取它的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T15:50:39.063

尝试这个

```
$(".formFieldUserData").each(function()
        {
        var key = $(this).attr("name");
        var value = $(this).val();
        localStorage.setItem(key, value);
        } 
```

# jquery - Bootstrap 将下拉菜单放入图像中

> ID：15312601
> 
> 赞同：2
> 
> 时间：2013-03-09T15:47:14.527
> 
> 标签：jquery, twitter-bootstrap

我正在尝试在图片中插入一个带有下拉菜单的按钮。为了创建悬停效果，我依靠这个插件：[http ://www.backslash.gr/demos/contenthover-jquery-plugin/](http://www.backslash.gr/demos/contenthover-jquery-plugin/)

在必要的预防措施css之后一切正常，但我得到了一个不令人满意的结果，即下拉菜单保留在图像内而不是在图像顶部，这是错误的，因为如果图像太靠近菜单被剪切！有更好的方法来获得结果吗？

```
<img class="hov" src="http://dummyimage.com/300x120/a26/fff" />
           <div class="contenthover">
               <div class="btn-group">
                    <a class="btn dropdown-toggle mybutton" data-toggle="dropdown" href="#">
                        <i class="icon-pencil"></i>
                    </a>
                    <ul class="dropdown-menu" role="menu">
                        <li><a tabindex="-1" href="#">Modifica</a></li>
                        <li><a tabindex="-1" href="#">Imposta come predefinito</a></li>
                        <li class="divider"></li>
                        <li><a tabindex="-1" href="#">Elimina immagine</a></li>
                    </ul>
               </div>
               <div class="conhov">
                        <p>Description</p>
               </div>
           </div> 
```

这里的演示：http: [//jsfiddle.net/lughino/Aa9Qd/](http://jsfiddle.net/lughino/Aa9Qd/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T15:53:19.570

将此添加到您的CSS

```
.open > .dropdown-menu {
  top: -1px;
  width: 84%;
  left: 3px;
} 
```

随意玩弄它

# java - JSP Continuos Scrolling 在会话中存储页面变量

> ID：15312607
> 
> 赞同：0
> 
> 时间：2013-03-09T15:47:56.473
> 
> 标签：java, jakarta-ee, web, pagination

我有一个当前工作的连续滚动分页，因为 Http 是无状态的，并且无法从 HttpRequest 取回以前的数据集，将页面变量存储到用户会话中是一种好习惯吗？（比如添加最后加载内容的 id，以便在下一次加载或下一次请求时将下一个元素加载到它）（假设页面是通过 AJAX 加载的）我已经这样实现了。

因此，例如，如果用户搜索某个名称，它将转到执行此操作的某个操作。

```
paginationHelperBean = new PaginationHelper();

        if(page == 0 && name != null){
            paginationHelperBean.setCurrent_page(0);
        } else {
            paginationHelperBean.setCurrent_page(page);
        }

        //Set the paginationBean for display references in JSP later
        paginationHelperBean.setPer_page(RESULTS_PER_PAGE);
        paginationHelperBean.setTotal_count(profileService.countSearchProfiles(name, paginationHelperBean.getCurrent_page(), RESULTS_PER_PAGE));
        paginationHelperBean.setNumber_of_pages();

    session.put("profileSearchKey", this.name);
    session.put("profileSearchPage", page); 
```

当用户请求另一个片段或数据集时，它将执行先前加载的内容中的下一个项目，它将执行执行此操作的操作。

```
String key = (String)session.get("profileSearchKey");

int page = (Integer)session.get("profileSearchPage")+1;
profiles = profileService.searchProfiles(key, page, RESULTS_PER_PAGE);
session.put("profileSearchPage", page); 
```

所以我的问题是，在 Session 中存储与页面相关的变量以进行分页是一种不好的做法（例如，连续滚动的搜索分页？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T16:54:02.320

在我看来，无限滚动应该与使用任何 ajax 调用来获取额外内容没有什么不同，你有一些东西会触发额外数据的获取（用户滚动到页面底部）并且当它到达时你会显示它。此外，您可以使用获取的最后页码更新 JavaScript 变量，以便当用户再次滚动到页面底部时，您可以获取下一页（无需将此信息存储在会话变量中，例如 ajax 调用 / nextPage.jsp?page_number=[valueFromJavaSript]）。

将此与将获取的最后一页存储在会话变量中进行对比。想象一下您的用户离开无限滚动页面并返回，您期望会发生什么？当您导航回它时，让 jsp 页面重置页码的会话变量，以便后续的 ajax 调用获取正确的页码。此外，如果您添加多个无限滚动页面，您将在会话中存储多个“当前页面”。

我想在提交答案之前检查其他人是如何做的，我很确定 Slashdot 曾经有无限滚动，不幸的是它现在有一个下一步按钮。[但是我在这里](http://www.tripwiremagazine.com/2012/04/30-infinite-scrolling-websites.html)找到了一篇文章“30+ 无限滚动网站的伟大示例” 。我使用提琴手（[http://www.fiddler2.com/fiddler2/](http://www.fiddler2.com/fiddler2/)）来检查他们是否在请求中传递了页码（即没有将其存储在会话中），而我检查的那些是（页码，偏移量，或类似的东西，但信息显然在请求中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T05:54:09.303

将页面变量存储到用户会话中是否是一种好习惯：否。因为会话属性不是线程安全的。因为只有有权访问特定 HttpSession 的人才能访问它。为了更好地查看[Servlet 中的请求和会话](https://stackoverflow.com/questions/15131210/request-and-session-in-servlet)

您编写的代码可以通过同步问题。如果一个线程正在获取它之前设置的值，那么另一个线程可能已经修改并设置了不同的值。所以当第一个线程尝试通过它获取值时可能会获得价值，但可能不是正确的价值。代码 session.put("profileSearchKey", this.name); session.put("profileSearchPage", page); 假设线程 A 为 profileSearchKey 和 profileSearchPage 设置值。当线程 A 尝试获取属性名称 profileSearchKey 和 profileSearchPage 的值时，this.name 和 page 的值可能会被另一个线程修改。因此，在获取值时会出现同步问题。

# image-processing - 使用双线性插值调整图像大小的结果不匹配

> ID：15312615
> 
> 赞同：2
> 
> 时间：2013-03-09T15:48:34.033
> 
> 标签：image-processing, cuda, image-resizing

我使用双线性插值实现了一个 CUDA 函数来调整图像大小。该函数应该给出正确的结果（视觉上），直到我在一个小矩阵上进行测试以检查输出图像的确切值。我得到的结果与 OpenCV 和 MATLAB 的结果不同。我在我的算法中找不到任何明显的缺陷。有人可以帮我吗？

## 双线性插值器功能：

```
texture<float, cudaTextureType2D> tex32f;

//Device function 
__device__ float blinterp(const float xIndex, const float yIndex)
{
    //floor the coordinates to get to the nearest valid pixel
    const int intX = static_cast<int>(xIndex);
    const int intY = static_cast<int>(yIndex);

    //Set weights of pixels according to distance from actual location
    const float a = xIndex - intX;  
    const float b = yIndex - intY;

    /* _____________________
     *|          |          |
     *|(1-a)(1-b)| (a)(1-b) |
     *|__________|__________|
     *|          |          |
     *| (1-a)(b) |  (a)(b)  |
     *|__________|__________|
     */

    //Compute the weighted average of 4 nearest pixels
    float out   =   (1 - a) * (1 - b)   *   tex2D(tex32f, intX,intY)
                +   (a) * (1 - b)       *   tex2D(tex32f,intX + 1,intY)
                +   (1 - a) * (b)       *   tex2D(tex32f, intX,intY + 1)
                +   (a * b)             *   tex2D(tex32f,intX + 1,intY + 1);

    return out;
} 
```

## 调整内核大小：

```
__global__ void kernel_resize(float* dst, int dstWidth, int dstHeight, int dstPitch, float xScale, float yScale)
{
    const int xIndex = blockIdx.x * blockDim.x + threadIdx.x;
    const int yIndex = blockIdx.y * blockDim.y + threadIdx.y;

    if(xIndex>=dstWidth || yIndex>=dstHeight)   return;

    const unsigned int tid = yIndex * dstPitch + xIndex;

    const float inXindex = xIndex * xScale;
    const float inYindex = yIndex * yScale;

    dst[tid] = blinterp(inXindex,inYindex);
} 
```

## 包装功能：

```
int resize_32f_c1(float* src,float* dst,int srcWidth,int srcHeight, int srcPitch, int dstWidth,int dstHeight,int dstPitch)
{
    if((srcWidth == dstWidth) && (srcHeight == dstHeight))
    {
        cudaMemcpy2D(dst,dstPitch,src,srcPitch,srcWidth * sizeof(float),srcHeight,cudaMemcpyDeviceToDevice);
        return 0;
    }

    cudaBindTexture2D(NULL,tex32f,src,srcWidth,srcHeight,srcPitch);

    dim3 Block(16,16);
    dim3 Grid((dstWidth + Block.x - 1)/Block.x, (dstHeight + Block.y - 1)/Block.y);

    float x = (float)(srcWidth)/(float)dstWidth;
    float y = (float)(srcHeight)/(float)dstHeight;

    kernel_resize<<<Grid,Block>>>(dst,dstWidth,dstHeight,dstPitch/sizeof(float),x,y);

    cudaUnbindTexture(tex32f);

    return 0;
} 
```

# 结果（按比例缩小 2）：

## 输入（10 x 10）：

```
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
0 0 0 1 1 1 1 0 0 0
0 0 0 1 1 1 1 0 0 0
0 0 0 1 1 1 1 0 0 0
0 0 0 1 1 1 1 0 0 0
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 
```

## MATLAB 和 OpenCV 输出：

```
0   0     0    0    0
0   0.25  0.5  0.25 0
0   0.5   1    0.5  0
0   0.25  0.5  0.25 0
0   0     0    0    0 
```

## 我的输出：

```
0 0 0 0 0
0 0 0 0 0
0 0 1 1 0
0 0 1 1 0
0 0 0 0 0 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T17:53:38.790

根据@talonmies 提供的建议，我最终找到了问题的原因。

在计算输入图像中像素的位置时，像素的坐标应以像素为中心，即应在计算的像素坐标上加上 0.5 的偏移量。不仅如此，还应使用以像素为中心的坐标来计算像素的权重。输入图像中像素的坐标应在内核内部计算如下：

```
const float inXindex = xIndex * xScale + 0.5f;
const float inYindex = yIndex * yScale + 0.5f; 
```

或者，该`blinterp`功能可以修改如下：

```
__device__ float blinterp(const float xIndex, const float yIndex)
{
    //round the coordinates to get to the nearest valid pixel
    const int intX = static_cast<int>(xIndex + 0.5f);
    const int intY = static_cast<int>(yIndex + 0.5f);

    //Set weights of pixels according to distance from actual location
    const float a = xIndex - intX + 0.5f;  
    const float b = yIndex - intY + 0.5f;
    .
    .
    . 
```

# java - 延迟从 xml 加载视图

> ID：15312626
> 
> 赞同：1
> 
> 时间：2013-03-09T15:50:02.217
> 
> 标签：java, android, xml-parsing, android-canvas, lazy-loading

我正在处理来自服务器的巨大 xml 文件（1.3 mb），从服务器下载大约需要 25 秒。

我正在从服务器获取坐标。我必须在屏幕上绘制它们，所以有没有办法可以*延迟加载视图*？

我能够下载 xml 文件并将其存储在内部存储器中并使用 SAX 解析器对其进行解析。

我还可以分块下载 xml 并在继续进行时解析它们吗？

为了详细说明我的问题，

**1.**我需要从服务器下载并解析一个xml文件。该文件大约为 1.3 MB

**2.**下载大约需要30秒，解析大约需要4秒。

**3.**我将它存储在本地文件中并使用 SAX 解析器对其进行解析。

**4.**在这个 xml 文件中，我得到了在画布上重新创建绘图的绘图点。

那么，当正在下载 xml 文件并在下载的文件块上解析以最小化延迟并解析来自服务器的较小段时，有什么方法可以处理绘图部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T16:03:47.373

我不确定你在谈论什么样的视图/数据（`MapView`？），但你必须在下载和解析操作发生时显示*一些东西。*

[Android 设计指南](http://developer.android.com/design/building-blocks/progress.html)建议显示一个居中的`ProgressBar`，他们称之为“活动圈”。操作完成后，隐藏进度条并显示您的视图（使用 a`FrameLayout`重叠“等待”和“就绪”视图，以便您可以通过更改可见性轻松地在它们之间切换）。

> 在此示例中，加载邮件时在 Gmail 应用程序中使用活动圈（在 Holo Light 中），因为无法确定下载电子邮件需要多长时间。
> 
> 显示活动圈时，不要包含文字来传达应用正在做什么。仅移动圆圈就提供了有关延迟的足够反馈，并且以一种将影响降至最低的低调方式提供了反馈。

![活动圈](../Images/256905e4d839f31e3e4d7cb17cdc3102.png)

# hibernate - 使用休眠搜索构建多个索引

> ID：15312634
> 
> 赞同：1
> 
> 时间：2013-03-09T15:50:34.803
> 
> 标签：hibernate, jpa, spring-mvc, hibernate-search

我正在研究 spring MVC 项目中的全文搜索功能。搜索功能必须能够搜索多个实体（可由用户选择）。我为以下函数创建了一个 RequestMapping，它允许我为模型中的 @Indexed 类构建索引。

```
public void bouwIndex(HttpServletResponse response) throws InterruptedException {
    OutputWriter output = new HttpResponseOutputWriter(response);
    FullTextEntityManager fullTextEntityManager = org.hibernate.search.jpa.Search.getFullTextEntityManager(em);
    fullTextEntityManager.createIndexer().startAndWait();
    output.writeLn("Lucene index built!");
} 
```

假设我有两个类（Profielwerkstuk 和 Begrip），我已对其进行了注释并希望对其进行索引。当将@Indexed 注释添加到 Profielwerkstuk 类而不是 Begrip 类并调用索引构建器 URL 时，Profielwerkstuk 在合理的时间内（20 秒左右）被正确编入索引，并且在此索引上搜索 Profielwerkstukken 工作得很好。类似地，当 @Indexed 注解添加到 Begrip 类而不是 Profielwerkstuk 类时，Begrip 的索引也会在合理的时间内（10 秒左右）正确创建。

当我将@Indexed 类添加到 Profielwerkstuk 类和 Begrip 类并尝试构建索引时出现问题，现在创建的索引运行了 10 多个小时而没有完成（我在 10 小时后终止了它）。我希望索引器完成的任务与首先构建 Profielwerkstuk 索引然后构建 Begrip 索引相同，两者都经过测试以在合理的时间内完成。有谁知道是什么可能导致我的索引器花费这么长时间？

**编辑：** 根据要求添加 Profielwerkstuk 和 Begrip 的相关注释部分。

开始：

```
@Indexed
@Analyzer(impl = DutchAnalyzer.class)
public class Begrip {

    @Field
    private String naam;

    @Lob
    @Field
    private String omschrijving;

    @OneToMany(mappedBy = "begrip")
    @IndexedEmbedded(includePaths = { "onderwerp.naam" })
    private List<OnderwerpBegripRelatie> onderwerpen;

    @OneToOne(optional=true, cascade=CascadeType.ALL)
    @IndexedEmbedded(includePaths = { "content", "elementen.content" })
    private ContainerElement inhoud;
} 
```

Profielwerkstuk:

```
@Indexed
@Analyzer(impl = DutchAnalyzer.class)
public class Profielwerkstuk {

    @Field
    private String titel;

    @OneToOne(cascade = CascadeType.ALL)
    @IndexedEmbedded(includePaths = { "content", "elementen.content" })
    private ContainerElement inhoud;

    @Lob
    @Field
    private String bronvermelding;

    @OneToMany(mappedBy="profielwerkstuk")
    @IndexedEmbedded(includePaths = { "vraag", "toelichting", "eindtermen.keywords.keyword" })
    private List<Onderzoeksvraag> onderzoeksvragen = new ArrayList<Onderzoeksvraag>();
} 
```

我可以补充一点，嵌入在 Begrip 中的 OnderwerpBegripRelatie 类与 Profielwerkstuk 无关，而 Profielwerkstuk 中的 Onderzoeksvraag 与 Begrip 无关。ContainerElement 部分也可能有助于回答这个问题，因为 Profielwerkstuk 和 Begrip 都有一个带有 @IndexedEmbedded 的 ContainerElement 字段。

容器元素：

```
public class ContainerElement extends Element {

    @OneToMany(mappedBy="container", cascade = CascadeType.ALL)
    @IndexedEmbedded(includePaths = { "content" })
    protected List<Element> elementen;
} 
```

及其父类Element：

```
public class Element {

    @Lob
    @Field
    private String content;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T19:34:09.393

我认为您可能遇到了[HSEARCH-598](https://hibernate.onjira.com/browse/HSEARCH-598)，您可以通过大幅减少 MassIndexer 使用的线程数或在连接池中设置非常大的连接限制来发现。另外不要忘记配置您的数据库以允许多个连接。

如果是这种情况，请对问题发表评论，我们会提高优先级。抱歉，我还没有解决它，因为到目前为止提出的任何解决方案都会对整体索引时间产生不良影响。

# c# - 会话 - 登录以查看用户数据

> ID：15312636
> 
> 赞同：0
> 
> 时间：2013-03-09T15:50:47.740
> 
> 标签：c#, asp.net

在开始之前，我想声明我对 ASP.NET 和 C# 非常陌生，而且真的是一般的编程。我创建了一个带有登录页面的 Web 应用程序，该页面查找包含用户数据及其登录详细信息的自定义数据库。我这样做而不是使用 ASP.NET Membership，因为在我的大学网络上使用它会很复杂。

由于该表包含许多用户数据记录，我想做的是让用户登录应用程序并（基于他们的登录详细信息）允许他们从我创建的表中查看他们的详细信息，因为他们有很多记录的用户数据。

我是否正确，我应该根据他们的用户名和密码创建一个会话，并使用这个，以某种方式将其与他们在表中的记录相匹配，使用 SQL 将只显示他们的数据而不是显示整个表？

如果是这种情况，我真的不知道如何实现这一点。

我知道这将非常不安全，但用户都是虚构的，这个应用程序不会发布到网络上。我只希望它以最简单的形式为我的任务工作，我将在我的报告中介绍安全方面并说明如何改进它。

任何建议将不胜感激，干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T15:58:41.283

每当您发现用户的凭据足以登录时，将他的部分/全部凭据添加到当前会话中，例如，

```
Session.Add("sessionvariablename",textBoxLogin.Text); 
```

在登录后出现的另一个页面上，检查以下内容，

```
if(Session["sessionvariablename"].ToString()=="xyz")
{
Do whatever you want
} 
```

出于安全考虑，您可能不想将敏感信息添加到会话中。用于 `Guid.NewGuid()`为每个用户创建一个唯一的 32 个字符的十六进制代码并将其存储在会话中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T15:59:25.467

如果我做对了，使用用户名和密码作为会话参数将起作用，但这不是最好的主意。通常，您的用户表包含每条记录的唯一标识符（guid 或自动增量 id）。您可以将此标识符用作会话参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T16:21:54.220

您的表中应该有具有唯一标识符的行。像 ID 或 userNr 或类似的东西，将其设为整数并设置为主键，然后通过双击将其标识规范（即标识）设置为是（我假设您正在使用 Visual Studio）。

当用户在那里提交登录信息并签出时，您在会话中保存唯一标识符。

当您需要提取特定于相关用户的信息时，您使用 sql WHERE ID（或 userNr）等于会话 ID。

希望这是您需要的，这是我在这里的第一个答案，所以我想提供帮助。

# android - 如何在主要活动中访问我的形状参数？

> ID：15312638
> 
> 赞同：0
> 
> 时间：2013-03-09T15:51:00.977
> 
> 标签：android, view

我在我的自定义视图类中编写了这段代码 protected void onDraw(Canvas canvas) {

```
Paint p1 = new Paint();
p1.setStyle(Style.FILL);
p1.setColor(Color.BLACK);
p1.setAntiAlias(true);

RectF rect1 = new RectF(canvas.getWidth()/2,500, canvas.getWidth() ,canvas.getHeight() );
canvas.drawRoundRect(rect1, 4, 4, p1);
super.onDraw(canvas);
    } 
```

我想访问`rect1`我活动中的参数，以便动态更改它们，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T15:53:13.993

您可以将公共 getter 和 setter 函数添加到您的视图类中，以检索或修改 rect1 成员的参数，然后从您的活动类中调用这些函数。

# uitableview - UITableView横向无响应区域

> ID：15312640
> 
> 赞同：0
> 
> 时间：2013-03-09T15:51:28.050
> 
> 标签：uitableview, constraints, autolayout, landscape

我正在开发一个 iPad 应用程序，其中我有一个 UITableView 托管在 UIScrollView 上的屏幕。UITableView 的前导空格和尾随空格被固定到 superview。

我在我的项目中使用自动布局。

当此屏幕以横向模式出现或旋转到它时，UITableView 的所有可见元素都会正确调整大小。但是 x=768pt 之后的区域是不可触及的。这绝对是一个区域，因为可编辑元素（文本视图和文本字段）的开头是可触摸的。我检查了 table 的 contentSize，它没问题（在我的情况下是 1024）。此外，当我将 iPad 从横向旋转到纵向时，表格的 contentSize 仍然保持横向（1024）。我尝试了这个主题的解决方案：[方向更改后 UITableView 布局中的错误](https://stackoverflow.com/questions/14307037/bug-in-uitableview-layout-after-orientation-change)并且它有效。不知道这是否与我的问题有关。

我试图放置常规视图而不是我的 UITableView。在这个视图上旋转后触摸区域没问题。但是，当我将桌子放在此视图右侧区域时，仍然没有响应。

Table 的属性 clipsToBounds 设置为 YES，因此内容似乎没有超出 UITableView。

请指出可能导致此问题的原因。现在我完全不知道可能导致这种情况的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T09:33:37.093

我找到了解决方案。问题出在我的自定义单元格中的覆盖方法 -(void)layoutSubviews 中。我只是忘记在其中调用 [super layoutSubviews]。

永远不要忘记在任何非标准视图中调用 [super layoutSubviews]。

希望我的解决方案能帮助人们不要在简单的问题上浪费时间。

# asp.net - 如何在运行时从字符串变量运行 asp.net 代码？

> ID：15312643
> 
> 赞同：1
> 
> 时间：2013-03-09T15:51:40.907
> 
> 标签：asp.net, string, runtime, execute

我在运行时的字符串变量中有以下代码

```
<form runat="server">

    <asp:textbox runat="server"
        ID="a1"
        Text="enter text here"
    />
    <asp:button runat="server"
        Text="enter text here"
    />
    <br />
</form> 
```

那么如何通过单击某个按钮左右在新页面上运行时运行它？
最早的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T16:12:58.507

您提到从文本文件加载。我认为您应该查看用户控件。这是从包含的文件加载 asp.net 内容和控件的首选方法。

[http://msdn.microsoft.com/en-us/library/y6wb1a0e(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/y6wb1a0e(v=vs.100).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T17:00:09.907

将此代码放入用户控件中，并将控件名称作为字符串传递。

```
void Page_Init(object sender, System.EventArgs e)
{
    //your string
    string controlName = "TempControl_Samples1.ascx.cs";

    // instantiate usercontrol object
    MyControl myControl1 = (MyControl)LoadControl(controlName);
    PlaceHolder1.Controls.Add(myControl1);
} 
```

# android - GalleryView 不显示第一张图片

> ID：15312649
> 
> 赞同：0
> 
> 时间：2013-03-09T15:52:05.410
> 
> 标签：android, galleryview

大家好，我有一个问题，在 GalleryView 中没有获得第一个图像的 onItemSelected 事件。下面是图像

![在此处输入图像描述](../Images/eebc2021c33f299c684152ccdf475703.png) 当我拖动以选择索引 = 0 处的第一张图像时，onItemSelected 没有调用。我`gallery.setSpacing(-IMEGE_WIDTH/2);`
在删除设置间距时设置它可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-03T06:29:14.467

您可以使用 3D 轮播视图

[关联](http://www.pocketmagic.net/2013/06/a-3d-carousel-view-for-android/#.Uu82Xz2Syi4)

# php - 传递对私有数组的引用

> ID：15312652
> 
> 赞同：0
> 
> 时间：2013-03-09T15:52:25.493
> 
> 标签：php

我必须承认，关于 PHP 的“引用传递”的所有困惑都影响了我，现在我还不清楚。我会想到以下代码：

```
class TestClass {

    private $my_precious = array ('one','two','three');

    public function &give_reference() {
        return $this->my_precious;
    }

}

$foobar = new TestClass();
$my_ref = $foobar->give_reference();
$my_ref = array ("four", "five", "six");

echo print_r($foobar,true); 
```

会打印：

```
TestClass Object
(
    [my_precious:TestClass:private] => Array
        (
            [0] => four
            [1] => five
            [2] => six
        )

) 
```

但是，唉，我的参考似乎没有持久力，而只是回声：

```
TestClass Object
(
    [my_precious:TestClass:private] => Array
        (
            [0] => one
            [1] => two
            [2] => three
        )

) 
```

我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T16:00:42.697

您还必须通过引用分配：

```
$my_ref =& $foobar->give_reference(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T16:11:16.540

尝试：

```
class TestClass {

    private $my_precious = array ('one','two','three');

    public function & give_reference() {
        return $this->my_precious;
    }

}

$foobar = new TestClass();
$my_ref = & $foobar->give_reference();
$my_ref = array ("four", "five", "six");

echo print_r($foobar,true); 
```

# c# - 使用 COM 接口 C# 从 c++ 访问会产生错误

> ID：15312654
> 
> 赞同：0
> 
> 时间：2013-03-09T15:52:49.460
> 
> 标签：c#, c++, com, interop

我有一个 c++ 项目，它将调用一个 C# 函数，之后，c# 将调用一个 c++ 函数（两者都有返回值）。我卡在stackoverflow上有人给我的COM接口上（我对c++或c#没有太多经验，只有java），但由于某种原因，当我尝试编译C++代码时它给了我一个错误，致命错误C1196 : 'FaceTrackingBasics-WPF' : 在类型库 c:\FaceTrackingBasics-WPF/bin/x86/Debug/FaceTrackingBasics-WPF.tlb 中找到的标识符不是有效的 C++ 标识符。

你能发现一些错误吗？也许我不应该在一个文件中有两个类？顺便说一句，c# 代码与一个窗口相关联，我不知道它是否会导致问题。谢谢

C# 代码

```
 // --------------------------------------------------------------------------------                ------------------------------------
    // <copyright file="FaceTrackingViewer.xaml.cs" company="Microsoft">
    //     Copyright (c) Microsoft Corporation.  All rights reserved.
    // </copyright>
    // --------------------------------------------------------------------------------        ------------------------------------

    namespace FaceTrackingBasics
    {
using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Media;
using Microsoft.Kinect;
using Microsoft.Kinect.Toolkit.FaceTracking;

using System.Globalization;

/////
using System.Runtime.InteropServices;

using Point = System.Windows.Point;

/// <summary>
/// Class that uses the Face Tracking SDK to display a face mask for
/// tracked skeletons
/// </summary>
public partial class FaceTrackingViewer : UserControl, IDisposable
{
    public static readonly DependencyProperty KinectProperty = DependencyProperty.Register(
        "Kinect", 
        typeof(KinectSensor), 
        typeof(FaceTrackingViewer), 
        new PropertyMetadata(
            null, (o, args) => ((FaceTrackingViewer)o).OnSensorChanged((KinectSensor)args.OldValue, (KinectSensor)args.NewValue)));

    private const uint MaxMissedFrames = 100;

    private Boolean drawFlat = false;

    public FaceTrackingViewer()
    {
        this.InitializeComponent();
    }

    ~FaceTrackingViewer()
    {
        this.Dispose(false);
    }

    public KinectSensor Kinect
    {
        get
        {
            return (KinectSensor)this.GetValue(KinectProperty);
        }

        set
        {
            this.SetValue(KinectProperty, value);
        }
    }

    public void Dispose()
    {
        this.Dispose(true);
        GC.SuppressFinalize(this);
    }

    //i deleted the rest of the code, i dont think its relevant
    }
}

//***********************//

[ComVisible(true)]
[Guid("2EF06BCB-A25B-41AD-B233-33A956DBEB69")]
public struct Ponto
{
    public double x;
    public double y;

    public Ponto(double x, double y)
    {
        this.x = x;
        this.y = y;
    }
}

[ComVisible(true)]
[Guid("EB9258F5-DCFB-4F91-8342-5A05EB17557D")]
public interface IManagedClass
{
    Ponto[] Foo();
}

[ComVisible(true)]
[Guid("11B23AD7-F79E-45D7-BC87-89F0DBC8B83F")]
[ClassInterface(ClassInterfaceType.None)]
public class ManagedClass : IManagedClass
{
    private List<Ponto> points;

    public ManagedClass()
    {
        points = new List<Ponto>();
        points.Add(new Ponto(1.0, 1.0));
        points.Add(new Ponto(2.0, 2.0));
        points.Add(new Ponto(3.0, 3.0));
    }

    public Ponto[] Foo()
    {
        return points.ToArray();
    }
} 
```

c++代码

```
 #include "stdafx.h"

   #import        "C:/Users/Pedro/Dropbox/0000000TESE/000_visual_studio/0FaceTMS/FaceTrackingBasics-              WPF/bin/x86/Debug/FaceTrackingBasics-WPF.tlb"
   #include <iostream>

   using namespace FaceTrackingBasics;
   using namespace std;

   int main()
   {
::CoInitialize(NULL);

{
    IManagedClassPtr pManagedClass(__uuidof(ManagedClass));

    SAFEARRAY* psa = pManagedClass->Foo();
    Ponto* pPoints = (Ponto*)psa->pvData;

    for (int i = 0; i < 3; ++i)
        cout << pPoints[i].x << " " << pPoints[i].y << endl;
}

::CoUninitialize();
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T20:38:37.667

```
'FaceTrackingBasics-WPF' : ... is not a valid C++ identifier 
```

It is not, a C++ identifier cannot contain a dash, "-". Just like C# btw. This name came from your project name. Which set the type library name. Which set the name of the namespace that the #import directive created.

Several possible workarounds beyond simply renaming your project. You can [apply attributes](http://msdn.microsoft.com/en-us/library/298h7faa%28v=VS.90%29.aspx) to the #import directive. Like "auto-rename", "no-namespace" and "rename-namespace":

```
 #import "FaceTrackingBasics-WPF.tlb" rename_namespace("managed")
   using namespace managed; 
```

# html - 将 div 的整个高度锚定为 display:block

> ID：15312656
> 
> 赞同：2
> 
> 时间：2013-03-09T15:52:55.763
> 
> 标签：html, css

我有简单的html：

```
<div class='mydiv'>
    <a href='#'>Link</a>    
<div> 
```

和CSS：

```
div.mydiv { height: 200px; width: 200px; background-color:red; }
div.mydiv a { display:block; color:yellow; background-color:green; } 
```

我需要锚占据 div 的整个空间，为此我添加了 display:block; 到我的 css，但只占据 div 的顶行。

出了什么问题，我该如何解决？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T15:54:22.357

添加`height:100%`到锚CSS：

```
div.mydiv a {
    display:block;
    color:yellow;
    background-color:green;
    height:100%;
} 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/JRukG/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T15:54:27.017

您可以像这样定义 ancor 的高度

```
a {height: 100%} 
```

# c# - Azure 实例更改代码回滚

> ID：15312658
> 
> 赞同：4
> 
> 时间：2013-03-09T15:53:08.713
> 
> 标签：c#, visual-studio-2010, azure

我是 Azure 的新手，我有一个小型云服务实例，在过去的一周内，我的实例更改了 2 次，我的所有项目数据都丢失了，它将回滚到 1 个月前。我所有的客户数据都丢失了，有没有办法恢复这些数据以及为什么会出现这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T16:03:52.257

无法恢复您的数据，也无法防止这种情况发生。这是设计使然。

每当您的机器崩溃或系统有更新时，它就会被完全擦除。将复制一个新的系统映像，机器将再次启动并复制您的应用程序。Azure 云服务是平台即服务 (PaaS)。

这为您提供了两种可能的选择。第一种是不以第一种方式将持久数据存储在云服务上。这不是 Azure 云服务的正确方法。而是将数据存储在 Azure 存储或 Azure SQL 数据库（或任何您喜欢的位置）中。

另一种选择是使用虚拟机而不是云服务。那台机器完全在你手中。您有责任对其进行更新、确保其安全并尽其所能保持其运行。使用这种方法，您还必须注意负载均衡器、多个实例等，因此扩展变得更加困难。这就是基础设施即服务 (IaaS)。

所以这实际上取决于你想做什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T16:17:27.247

云实例是无状态的，这意味着您为虚拟机存储在本地存储中的任何内容都可以并且将在发生节点故障、系统升级，甚至是您部署的包的新部署时被删除上传。

你可以做几件事：

1.  如果您需要在部署时向项目添加其他文件或配置，请使用 OnStart() 来执行它。这可以确保在每次部署或故障恢复时，您都能恢复到您一直拥有的相同环境。
2.  为避免丢失源代码，我建议您设置源代码控制并将其与您的云实例实现集成。您可以使用 Git 或 Team Foundation Service 执行此操作（结帐 tfspreview.com）
3.  如果需要在服务器上存储文件（例如资产或客户端更新的媒体），请考虑使用 Azure Blob 存储。如果您选择这样做，Blob 存储将在数据中心本地复制和异地复制到其他数据中心。

希望有帮助

# php - php +ajax + 评论系统错误

> ID：15312659
> 
> 赞同：-4
> 
> 时间：2013-03-09T15:53:11.463
> 
> 标签：php, mysql, ajax, comments, dreamweaver

我正在使用 php mysql 和 ajax 创建一个评论系统，但不断收到语法错误，我找不到大坝错误，这是 comments.php 代码，如果有人帮助我，我将不胜感激

# 评论.php

```
<?php

mysql_connect("localhost","root",""); //connect to the database: change user and pass to your own DB's user and pass
mysql_select_db("ajaxComment"); //change this to the name of your mysql database
if(isset($_POST['type'] == "addcomment")) {
    $author = mysql_real_escape_string($_POST['author']);
    $message = mysql_real_escape_string($_POST['message']);
    //the mysql_real_escape_string() is to prevent sql injections and such.
    if($author == "" || $message == "") { //one of the fields was empty...
        die("<p><font color='red'>Error: Please fill out BOTH fields.</font></p>"); //...tell them
    }
    $q1 = mysql_query("INSERT INTO `comments` (`author`, `message`) VALUES ('$author', '$message')") or die("<p>Mysql Error: <b>".mysql_error()."</b></p>"); //if there was a mysql error, let them know
    echo "<p><font color='green'>Comment added successfully. You should see it in a few seconds.</font></p>";
} elseif(isset($_POST['type'] == "getcomments")) { //ajax wants the comments.
    $q1 = mysql_query("SELECT * FROM `comments`");
    $n1 = mysql_num_rows($q1);
    if($n1 == 0) { //no comments found
        die("<p><font color='red'>No comments were found.</font></p>");
    }
    echo "<table border=1>";
    echo "<tr><td><b>Author</b></td><td><b>Comment</b></td></tr>";
    while($r1 = mysql_fetch_assoc($q1)) { //if there were any comments, loop through them
        $a = $r1['author'];
        $m = $r1['message'];
        echo "<tr><td>$a</td><td>$m</td></tr>";
    }
    echo "</table>";
} else {
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Ajax Comment Tutorial</title>
<script src="http://code.jquery.com/jquery-1.4.2.min.js" type="text/javascript"></script>
<!--The above code will get the jquery AJAX library and include it into the page-->
<script type="text/javascript">
(document).ready(function() {
    $("submit").click(function(){ //this will execute code if the submit button was clicked
        var user = $("#author").val(); //receive the contents of the field with the ID "author" and put it into the user var
        var comment = $("#message").val(); //same as above, but with the message field instead.
        $.post("comments.php",{type: "addcomment",author: user,message: comment},function(data){$("#return").html(data)});
        //the first parameter of the above, is the page to send the post data too. In this example, this page is called comments.php, so we send it there.
        //the second parameter is the post data, it goes: {pn: pd} where pn is the name you use in PHP's $_POST and pd is the data it will contain.
        //the third parameter is for the return data, in this case we sent it to the "return" div we made below our form. The first two parameters are not required.
        return false; //this will stop the page submitting, so it won't refresh.
    });
});
    function getComments() { //this function will collect the comments
        $.post("comments.php",{type: "getcomments"},function(data){$("#comments").html(data)});
        //for an explanation on this, simply read the click function above.
    }
        setInterval("getComments()",10000); //gets the comments every 10 seconds.
</script>
</head>

<body>
    <div style="font-size: 18px;">
        <p>Current Comments: </p>
        <div id="comments"></div> <!--This div will be filled with AJAX-->
        <hr />
        <p>Add a comment:</p>
        <form action="comments.php" method="post">
            <p>Username: <input type="text" name="author" id="author" /></p>
            <p>Comment: <textarea name="message" cols="70" rows="10" id="message"></textarea></p>
            <p><input type="submit" name="submit" value="Add Comment" id="submit" /></p>
        </form>
        <div id="return"></div> <!--This div will be filled with the return data from the comment processing script at the top-->
    </div>
</body>
</html>
<?php }  ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T15:57:18.040

PHP错误在这一行：

```
if(isset($_POST['type'] == "addcomment")) { 
```

你可能希望它是：

```
if (isset($_POST['type']) && $_POST['type'] == "addcomment") { 
```

# php - 这是什么编码？

> ID：15312661
> 
> 赞同：0
> 
> 时间：2013-03-09T15:53:17.307
> 
> 标签：php, decode, encode

当我反序列化一个对象时，我在一个变量中得到了这个：

GRANITV GEN 10 B

`serialize`用PHP中的函数序列化

但正确的文字应该是 GRANITVÄGEN 10 B

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T15:56:14.593

看起来您在一台服务器上安装了 UTF-8，而在另一台服务器上安装了 ANSI，尽管您从中获取数据的地方应该告诉您编码，所以最好的选择是去那里搜索。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T15:58:48.110

它很可能是 UTF-8，以错误的编码显示。查看[http://en.wikipedia.org/wiki/Unicode_equivalence](http://en.wikipedia.org/wiki/Unicode_equivalence)了解为什么您会看到一些字符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T15:56:46.963

它似乎是 UTF-8 显示为 ISO-8859-1 或类似的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T18:00:40.593

我只需要做一个 utf8_decode .. 但我认为我不必这样做，因为它已经正确存储在我的数据库中？

# css - 谷歌自定义搜索 Wordpress 侧边栏 CSS 样式被压扁

> ID：15312665
> 
> 赞同：0
> 
> 时间：2013-03-09T15:53:21.950
> 
> 标签：css, sidebar, google-custom-search

嗨，聪明的 CSS 大师等

我刚刚将 Google 自定义搜索小部件添加到我的 wordpress 网站，但我的样式有问题吗？

它应该看起来像这个侧边栏之一 - [http://googlecustomsearch.blogspot.co.uk/](http://googlecustomsearch.blogspot.co.uk/) 但在我的网站上它看起来像这样 - [http://brightmist.co.uk/blog/](http://brightmist.co.uk/blog/)

关于如何解决它的任何想法？感谢你的帮助

朱迪思

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T17:09:35.913

首先，如果您可以访问您的 CSS 样式表（'/wp-content/themes/modernize/style.css'），请转到第 40 行它有...

```
tr th, tr td{padding: 9px 20px;} 
```

我认为 20px 的填充是把它压成那样的原因。那就是真正使用的通用样式，这将影响您网站上的每个 HTML 表格。如果您希望网站上的某些表具有该填充，请给它们一个类并将该填充仅应用于具有该类的表。或者尝试添加...

```
#cse-search-form74 table td{padding: 0; border: none;} 
```

希望有帮助。

# asp.net-mvc-3 - MVC 视图模型冗余

> ID：15312670
> 
> 赞同：1
> 
> 时间：2013-03-09T15:54:18.993
> 
> 标签：asp.net-mvc-3, asp.net-mvc-4, asp.net-mvc-viewmodel

创建 ViewModel 不会导致冗余吗？从某种意义上说，我有我的域模型，我需要在视图上显示来自它的数据。所以我们创建 ViewModels，添加 DataAnnotations 并将其显示在 View 上。此时我有 2 个具有几乎相同数据的对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T18:12:16.497

正如其他人已经说过的那样，只有最简单的应用程序才能将其域模型直接传递给视图。即使那样，由于很多原因，它仍然不是一个好主意。

视图的要求与数据模型的要求不同。例如，您可能有一个字段在您的视图中是必需的，但在您的 vie 模型中可以为空。如果您添加一个“[必需]”属性，那么您的模型现在将认为该字段不可为空。

然而，我从不在视图中使用域模型的最大原因是为了安全。MVC 允许您向其发布任何值，并且默认模型绑定器会愉快地将您发布的值插入模型中，这意味着如果您有一个 IsAdmin 标志，并且有人为 IsAdmin 发布了一个真实值，那么当您将更改保存到模型，有人现在是管理员。

Web 安全的第一条规则是永远不要信任来自用户的输入，并且将视图模型直接传递给视图基本上放弃了对数据的清理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T16:04:44.677

是的，这是一种冗余形式。但通常需要冗余来实现其他目标。在模型的情况下，视图模型和域模型的这种分离有助于实现视图和数据存储之间的解耦设置。ViewModel 并不经常是 Domain 的精确副本。

这意味着，任何一个都可以改变而不会影响其他。我可以看到这很有价值的情况 - 表中的数据类型更改不需要部署 Web 应用程序。

因此，总而言之，虽然存在冗余，但系统是否足够复杂以从这种冗余中受益是一个设计选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T16:10:12.750

在 99% 的情况下，ViewModel 不会导致冗余。

我想到的唯一 1% 是带有贫乏领域模型和页面的简单应用程序，它在页面上只显示一个模型。这是内容管理页面特有的。

在任何其他情况下：
1）您的 ViewModel 将加入来自多个域模型的信息
2）您将在域模型中具有特定于您的域的逻辑
3）将特定于视图的元信息（如 DataAnnotations）混合到您的域中不是一个好主意

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T16:05:31.023

不，使用 ViewModel 有它自己的目的。让我们考虑一下当您的视图有两个或更多来自域模型的实体时，如果没有 ViewModel，您将如何组织数据？有时视图所需的数据与域模型并不完全一样，它可以包含更少或更多的信息，有时我们必须在渲染视图之前对域中的数据进行预处理（例如，格式化日期时间取决于客户的文化）。

此外，ViewModel 有助于将 Web UI 与域层分离。领域模型中的实体不仅仅是数据表示（这是视图模型的唯一目的），它们还具有模仿业务规则的操作，您不希望将太多领域知识暴露给不需要的 UI 层要知道。

# zend-framework2 - 表单数据未发布到下一页

> ID：15312674
> 
> 赞同：0
> 
> 时间：2013-03-09T15:54:27.210
> 
> 标签：zend-framework2

我正在使用 ZF2，由于设计原因，我的一些字段是按惯例创建的。虽然很少是通过 zend 形式创建的。问题是，当我发布数据时，我只会得到那些通过 ZF2 表单创建的字段，例如我的用户名字段、性别、标题。其余字段未发布。这是我的代码的片段

```
 <?php
 $form = $this->form;
 $form->prepare();

 echo $this->form()->openTag($form);

?>
<div class="featureBox">
<div class="profile_address">
    <div class="main">
        <div class="address_head"><h4><?php echo $form->get('username')->getValue(); ?> > Account Detail</h4></div>
        <div class="field_set">
            <div class="field_input">
                <label><?php echo $form->get('username')->getLabel(); ?></label>
                <div class="field"><input type="text" readonly="readonly"value="<?php echo $form->get('username')->getValue(); ?>"></div>
            </div>
            <div class="field_input">
                <label><?php echo $form->get('email')->getLabel(); ?></label>
                <div class="field"><input type="text" value="<?php echo $form->get('email')->getValue(); ?>"></div>
            </div>
        </div>     
        </div>
        <div class="field_set">
            <div class="field_input">
                <?php echo $this->formRow($form->get('gender')->setAttribute('class', 'stylish-select')); ?>
            </div>

        </div>
        <div class="field_set">
            <div class="field_input">
                <?php echo $this->formRow($form->get('title')); ?>
            </div>
        </div>
        <div class="free-btn">
            <input type="submit" value="Save" onclick="return validatePassword();"/>
            <input type="button" value="Back" class="button" onclick="window.location='<?php echo $this->url('admin_administrator'); ?>';return false;" />
        </div>
    </div>
</div>
</div>
<?php
$this->form()->closeTag();
?> 
```

如果我使用，任何关于出错的想法我都可以解决

> $this->formRow()

所有领域，但如果我使用它会破坏我的设计要求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T16:15:16.043

例如，您的输入没有`name`属性

```
<input type="text" value="<?php echo $form->get('email')->getValue(); ?>"> 
```

应该

```
<input type="text" name="email" value="<?php echo $form->get('email')->getValue(); ?>">
missing------------^ 
```

# java - 如何在主键列中重用 Oracle 序列间隙？

> ID：15312676
> 
> 赞同：0
> 
> 时间：2013-03-09T15:55:13.067
> 
> 标签：java, oracle, architecture, oracle11g, sequence

我使用Oracle序列作为表的主键，在Java应用程序中使用int映射这个主键，现在我发现我的客户已经达到了表中的最大int，甚至序列可以不断增加。但是Java int 不再能够存储它，我不想将Java代码从int更改为long，因为成本非常高。然后我发现客户数据库在 ID 列中有很多很大的空白。有什么办法可以重复使用这些丢失的身份证号码吗？

如果可以在数据库级别执行此操作，例如我可以重新组织此序列以将这些缺失的数字添加到其中，因此无需更改 Java 代码，那么我可以使用这些间隙。它应该很棒。

我将编写一个函数来查找间隙范围，在有了这些数字之后，如果可以的话，我想将它们分配给序列值的池，所以也许从现在开始，它不会使用自动递增，只使用我的数字分配的。在 Java 代码中，我可以继续使用 findNextNumber 来调用序列。但序列将能够返回我分配给它的值。这似乎是不可能的，对吧？有什么选择吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T16:07:16.120

你的意思是，序列是否会返回一个“间隙”范围内的值？我不这么认为，除非您出于某种原因删除/重新创建它。我想您可以编写某种函数来查找表中的 PK 间隙，然后将这些间隙范围保存到另一个表中，并使用间隙表“滚动”您自己的序列函数。十分难看。试图“恢复”这些差距听起来像是在拼命尝试避免不可避免的情况——您的 java PK 数据类型应该与 DB 数据类型保持一致。很久以前，我在一个 VB 应用程序中遇到了同样的问题，该应用程序的类键定义为 16 位整数，并且序列超过 32K，必须将变量更改为 Long。我说，咬紧牙关，进行转换。现在有点痛苦，以后会为你省去很多持续的痛苦。只是我的观点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T11:49:32.693

我肯定会进行更改以使用更长的数字，但与此同时，您可能会进行管理，直到您可以通过使用生成负数的序列来进行更改。PK 指数的维护会对性能产生影响，而且它会以不成比例的速度增长得更快，不过

# isabelle - 语言环境中的 code_pred

> ID：15312678
> 
> 赞同：0
> 
> 时间：2013-03-09T15:55:21.037
> 
> 标签：isabelle

我想`inductive`在`locale`. 如果没有`locale`一切正常：

```
definition "P a b = True"

inductive test :: "'a ⇒ 'a ⇒ bool" where
  "test a a" |
  "test a b ⟹ P b c ⟹ test a c" 

code_pred test . 
```

但是，当我在 a 中尝试相同的操作时`locale`，它不起作用：

```
locale localTest
begin
definition "P' a b = True"

inductive test' :: "'a ⇒ 'a ⇒ bool" where
  "test' a a" |
  "test' a b ⟹ P' b c ⟹ test' a c" 

code_pred test' 
end 
```

语言环境中的`code_pred`行返回以下错误：

```
Not a constant: test' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T03:52:39.163

粗略地说，语言环境是一种抽象机制，允许引入与满足假设属性的某些假设常量相关的新常量，而代码生成则更为具体（您需要实现函数所需的所有信息，而不仅仅是其抽象规范）。

因此，您首先需要解释语言环境，然后才能生成代码。当然，在您的示例中没有假设的常数和属性，因此解释是微不足道的

```
interpretation test: localTest . 
```

之后，您可以使用

```
code_pred test.test' . 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T05:23:32.107

您可以给出替代介绍规则（参见`isabelle doc codegen`第 4.2 节：替代介绍规则），从而避免解释。这也适用于带参数的语言环境（甚至适用于未归纳定义的常量）。您的示例的变体具有参数：

```
locale l =
  fixes A :: "'a set"
begin
definition "P a b = True"

inductive test :: "'a ⇒ 'a ⇒ bool" where
  "a ∈ A ⟹ test a a" |
  "test a b ⟹ P b c ⟹ test a c" 
end 
```

我们引入一个新常数

```
definition "foo A = l.test A" 
```

并证明它的引入规则（因此新常数对旧常数是正确的）。

```
lemma [code_pred_intro]:
  "a ∈ A ⟹ foo A a a"
  "foo A a b ⟹ l.P b c ⟹ foo A a c"
  unfolding foo_def by (fact l.test.intros)+ 
```

最后，我们必须证明新的常量也是完整的旧常量：

```
code_pred foo by (unfold foo_def) (metis l.test.simps) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T22:11:17.987

在这里完成猜测，但我想知道重命名是否`test`给`test'`你带来了麻烦。（考虑`code_pred test'`改为`code_pred "test'"`。）

# c - 在 Linux 上使用 Redis 编译 C 代码

> ID：15312679
> 
> 赞同：1
> 
> 时间：2013-03-09T15:55:23.930
> 
> 标签：c, linker, redis

当我使用 credis API 编译用 C 编写的测试代码时，如何更正以下错误：

```
 gcc -g -Wall -lcredis test_redis.c -o redisOUT

 /tmp/ccetckOb.o: In function `main':
 /home/faris/Downloads/credis-0.2.3/test_redis.c:12: undefined reference to `credis_connect'
 /home/faris/Downloads/credis-0.2.3/test_redis.c:15: undefined reference to `credis_ping'
 /home/faris/Downloads/credis-0.2.3/test_redis.c:18: undefined reference to `credis_set'
 /home/faris/Downloads/credis-0.2.3/test_redis.c:21: undefined reference to `credis_get'
 /home/faris/Downloads/credis-0.2.3/test_redis.c:25: undefined reference to `credis_close'

 collect2: error: ld returned 1 exit status 
```

示例：[http ://code.google.com/p/credis/wiki/Examples](http://code.google.com/p/credis/wiki/Examples)

我头疼了这么久。

感谢您的解决方案。

山姆·艾弗里什

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T15:57:58.620

将库放在引用它的源文件*之后：*

```
gcc -g -Wall test_redis.c -lcredis -o redisOUT 
```

# java - 如何在网络服务器中添加用户定义扩展效果

> ID：15312681
> 
> 赞同：1
> 
> 时间：2013-03-09T15:55:44.483
> 
> 标签：java, jsp, servlets, download

我的 JSP 页面是

```
<a href="xxx.lice">xx.lice</a> 
```

我希望用户下载文件，而不是在单击链接时打开它。

我尝试将“虱子”扩展名放在tomcat中`web.xml`，但什么也没发生。

```
<mime-mapping> 
    <extension>lic</extension> 
    <mime-type>application/lic</mime-type> 
</mime-mapping>` 
```

我还在下面尝试了另一种方法，但什么也没发生

```
 function openfile(url)   {   
      var a =window.open(url,"_blank","");   
      a.document.execCommand("SaveAs");   
      a.close();   
  }

  <a href="#" onclick='openfile('xxx.lice')' /> 
```

然后我在上一页尝试在下面添加一些代码，对话框存在，但看不到其他信息，我希望人们点击`<a>`标签然后开始弹出“saveas”对话框。

```
 String url = request.getRequestURL().substring(0,request.getRequestURL().lastIndexOf("/")+1) + "upload/xxx.lice";
//            //set .lic to mime type
//            String filename = "xxx.lice";
//            String mimeType = new MimetypesFileTypeMap().getContentType(filename);
//            response.setContentType( mimeType);
//            response.setHeader( "Content-Disposition", "attachment;filename="
//                    + filename );
            request.setAttribute("message", "Upload has been done successfully!\r\n The new license file is<a href=\""+ url +"\" >xxx.lice</a>"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T18:06:05.350

```
 function openfile(url)   {   
      var a =window.open(url,"_blank","");   
  }

  <a href="#" onclick="openfile('SownloadLiceFileServlet')" /> 
```

在那个 Servlet 中

```
 //set .lic to mime type
  String filename = "xxx.lice";
  String mimeType = new MimetypesFileTypeMap().getContentType(filename);
  response.setContentType( mimeType);
  response.setHeader( "Content-Disposition", "attachment;filename=" + filename );
  // Read the file content as a byte array
  java.io.File liceFile = new java.io.File("[File Path]");
  byte[] fileBytes = new byte[(int)liceFile.length()];
  java.io.FileInputStream liceFileStream = new java.io.FileInputStream(liceFile);
  liceFileStream.read(fileBytes);
  liceFileStream.close();
  //Push that byte array to the browser (user).
  ServletOutputStream sos = response.getOutputStream();
  sos.write(fileBytes); 
```

# angularjs - AngularJS：使用 OrderBy 的自定义排序功能

> ID：15312686
> 
> 赞同：3
> 
> 时间：2013-03-09T15:56:16.610
> 
> 标签：angularjs, angularjs-orderby

我正在尝试使用[http://docs.angularjs.org/api/ng.filter:orderBy](http://docs.angularjs.org/api/ng.filter:orderBy)提供的文档定义我自己的排序函数。

在解释编写的代码之前，我还将提及我所期望的行为。
我有一个包含表头（th）和表数据（td）的表。当用户点击表格中的一列时（按列，我的意思是th），表格数据必须根据该列中的值进行排序。

如果用户再次单击同一列，则如果先前的排序条件分别为降序/升序，则排序将更改为升序/降序。
用户可以使用多列进行排序。选择的第一列是第一优先级。如果第一列值相同，则使用选择用于排序的第二列。

现在是代码。可以在这里找到：http: [//jsfiddle.net/xkjmv/](http://jsfiddle.net/xkjmv/)

问题是`customSortFunction`按预期返回数组，但排序不起作用 - 当用户单击列标题时，排序应该是升序或降序（基本上每次单击时都会切换）。

**我想返回一个字符串谓词数组，因为我将有多个列要排序，但是使用字符串谓词本身的单列排序不起作用**

编辑：如果从代码中不明显，您可以检查控制台以查看自定义排序函数返回的输出。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T16:16:17.260

在这个[plunker 中](http://plnkr.co/edit/hB1yzCr16RAyDCdZwRKx?p=preview)，您可以找到一个您正在寻找其他东西的示例，希望对您有所帮助。

### 更新：

正如[blazemonger](https://stackoverflow.com/users/901048/blazemonger)要求的代码：

控制器.js：

```
app.controller('ctrlRead', ['$scope', '$filter', 'Items', function($scope, $filter, Items) {
  // init
  $scope.sortingOrder  = sortingOrder;
  $scope.reverse       = false;
  $scope.filteredItems = [];
  $scope.groupedItems  = [];
  $scope.itemsPerPage  = 5;
  $scope.pagedItems    = [];
  $scope.currentPage   = 0;
  //#####################################
  // get the items from the Items service
  Items.then(function(data){
    $scope.items = data;
    $scope.search();
  });
  //#####################################
  var searchMatch = function (haystack, needle) {
    if (!needle) {
      return true;
    }
    return haystack.toLowerCase().indexOf(needle.toLowerCase()) !== -1;
  };
  // init the filtered items
  $scope.search = function () {
    $scope.filteredItems = $filter('filter')($scope.items, function (item) {
      for(var attr in item) {
        if (searchMatch(attr, $scope.query)){
          return true;
        }
      }
      return false;
    });
    // take care of the sorting order
    if ($scope.sortingOrder !== '') {
      $scope.filteredItems = $filter('orderBy')($scope.filteredItems, $scope.sortingOrder, $scope.reverse);
    }
    $scope.currentPage = 0;
    // now group by pages
    $scope.groupToPages();
  };
  // calculate page in place
  $scope.groupToPages = function () {
    $scope.pagedItems = [];
    for (var i = 0; i < $scope.filteredItems.length; i++) {
      if (i % $scope.itemsPerPage === 0) {
        $scope.pagedItems[Math.floor(i / $scope.itemsPerPage)] = [ $scope.filteredItems[i] ];
      } else {
        $scope.pagedItems[Math.floor(i / $scope.itemsPerPage)].push($scope.filteredItems[i]);
      }
    }
  };
  $scope.range = function (start, end) {
    var ret = [];
    if (!end) {
      end   = start;
      start = 0;
    }
    for (var i = start; i < end; i++) {
      ret.push(i);
    }
    return ret;
  };
  $scope.prevPage = function () {
    if ($scope.currentPage > 0) {
      $scope.currentPage--;
    }
  };
  $scope.nextPage = function () {
    if ($scope.currentPage < $scope.pagedItems.length - 1) {
      $scope.currentPage++;
    }
  };
  $scope.setPage = function () {
    $scope.currentPage = this.n;
  };
  // change sorting order
  $scope.sort_by = function(newSortingOrder) {
    if ($scope.sortingOrder == newSortingOrder){
      $scope.reverse = !$scope.reverse;
    }
    $scope.sortingOrder = newSortingOrder;
    // icon setup
    $('th i').each(function(){
        // icon reset
        $(this).removeClass().addClass('icon-sort');
    });
    if ($scope.reverse){
      $('th.'+newSortingOrder+' i').removeClass().addClass('icon-chevron-up');
    }else{
      $('th.'+newSortingOrder+' i').removeClass().addClass('icon-chevron-down');
    }
  };
}]); 
```

应用程序.js：

```
var app = angular.module('plunker', []); 
```

项目.json：

```
[
    {
    "ProgramCode":"3DS",
    "ProgramGroup":"NCIM",
    "EventCode":"20130424TX3DS",
    "StartDate":"2013-04-22 00:00:00",
    "FormalDate":"April 22-24, 2013",
    "LocCity":"Richardson",
    "LocState":"TX",
    "LocAddress":"3400 Waterview Parkway, #200",
    "LocName":"America First Insurance Company",
    "Price":"0.00",
    "LicenseeURL":null,
    "GateKeeper_length":"0",
    "GateKeeperHTML":null,
    "SeatsAreAvailable":"1",
    "LocLatitude":"32.9695",
    "LocLongitude":"-96.7409",
    "EventType":"SSIH",
    "LocationUnivURL":null,
    "UnivCourseNumber":null,
    "UnivCourseType":"",
    "UnivFaculty":null,
    "Course_Type":"Richardson, TX",
    "cls":"LIMITED_SEATS"
  },
  {
    "ProgramCode":"PA",
    "ProgramGroup":"CISR",
    "EventCode":"20130422SDPA",
    "StartDate":"2013-04-22 00:00:00",
    "FormalDate":"April 22, 2013",
    "LocCity":"Rapid City",
    "LocState":"SD",
    "LocAddress":"445 Mt. Rushmore Road",
    "LocName":"Adoba Eco Hotel Rapid City \/ Mt. Rushmore",
    "Price":"150.00",
    "LicenseeURL":null,
    "GateKeeper_length":"0",
    "GateKeeperHTML":null,
    "SeatsAreAvailable":"19",
    "LocLatitude":"44.0853",
    "LocLongitude":"-103.213",
    "EventType":"SS",
    "LocationUnivURL":null,
    "UnivCourseNumber":null,
    "UnivCourseType":"",
    "UnivFaculty":null,
    "Course_Type":"Rapid City, SD",
    "cls":"LIMITED_SEATS"
  },
  {
    "ProgramCode":"RME",
    "ProgramGroup":"CRM",
    "EventCode":"20130425FLRME",
    "StartDate":"2013-04-22 00:00:00",
    "FormalDate":"April 22-25, 2013",
    "LocCity":"Orlando",
    "LocState":"FL",
    "LocAddress":"8101 World Center Dr.",
    "LocName":"Caribe Royale",
    "Price":"430.00",
    "LicenseeURL":"http:\/\/www.faia.com\/PV\/Core\/Events\/Events.aspx",
    "GateKeeper_length":"0",
    "GateKeeperHTML":null,
    "SeatsAreAvailable":"32",
    "LocLatitude":"28.3916",
    "LocLongitude":"-81.4734",
    "EventType":"LSIHOERS",
    "LocationUnivURL":null,
    "UnivCourseNumber":null,
    "UnivCourseType":"",
    "UnivFaculty":null,
    "Course_Type":"Orlando, FL",
    "cls":""
  },
  {
    "ProgramCode":"ALM",
    "ProgramGroup":"CISR",
    "EventCode":"20130423MNALM",
    "StartDate":"2013-04-23 00:00:00",
    "FormalDate":"April 23, 2013",
    "LocCity":"Shoreview",
    "LocState":"MN",
    "LocAddress":"1000 Gramsie Road",
    "LocName":"Hampton Inn",
    "Price":"0.00",
    "LicenseeURL":"http:\/\/www.iiaba.net\/MN\/03_Education\/01_Calender\/NAV_EDUCalendar?ContentPreference=MN&ActiveState=MN&ActiveTab=NA&ContentLevel1=EDUCTN&ContentLevel2=EDUCAL",
    "GateKeeper_length":"0",
    "GateKeeperHTML":null,
    "SeatsAreAvailable":"40",
    "LocLatitude":"45.0856",
    "LocLongitude":"-93.1353",
    "EventType":"LS",
    "LocationUnivURL":null,
    "UnivCourseNumber":null,
    "UnivCourseType":"",
    "UnivFaculty":null,
    "Course_Type":"Shoreview, MN",
    "cls":""
  },
  {
    "ProgramCode":"AO",
    "ProgramGroup":"CISR",
    "EventCode":"20130423ILAO",
    "StartDate":"2013-04-23 00:00:00",
    "FormalDate":"April 23, 2013",
    "LocCity":"Bannockburn",
    "LocState":"IL",
    "LocAddress":"1500 South Lakeside Drive",
    "LocName":"Mesirow Financial",
    "Price":"0.00",
    "LicenseeURL":"https:\/\/protech.piiai.org\/Events\/CalendarEventsListView.aspx",
    "GateKeeper_length":"0",
    "GateKeeperHTML":null,
    "SeatsAreAvailable":"40",
    "LocLatitude":"42.1693",
    "LocLongitude":"-87.8656",
    "EventType":"LS",
    "LocationUnivURL":null,
    "UnivCourseNumber":null,
    "UnivCourseType":"",
    "UnivFaculty":null,
    "Course_Type":"Bannockburn, IL",
    "cls":""
  },
  {
    "ProgramCode":"AO",
    "ProgramGroup":"CISR",
    "EventCode":"20130423TXAO",
    "StartDate":"2013-04-23 00:00:00",
    "FormalDate":"April 23, 2013",
    "LocCity":"Richardson (North Dallas)",
    "LocState":"TX",
    "LocAddress":"900 East Lookout Drive",
    "LocName":"Renaissance Dallas-Richardson Hotel",
    "Price":"169.00",
    "LicenseeURL":"http:\/\/www.iiah.org\/displaycommon.cfm?an=1&SUBARTICLENBR=228",
    "GateKeeper_length":"0",
    "GateKeeperHTML":null,
    "SeatsAreAvailable":"16",
    "LocLatitude":"32.9934",
    "LocLongitude":"-96.659",
    "EventType":"SS",
    "LocationUnivURL":null,
    "UnivCourseNumber":null,
    "UnivCourseType":"",
    "UnivFaculty":null,
    "Course_Type":"Richardson (North Dallas), TX",
    "cls":"LIMITED_SEATS"
  },
  {
    "ProgramCode":"FUN",
    "ProgramGroup":"CSRM",
    "EventCode":"20130423CAFUN",
    "StartDate":"2013-04-23 00:00:00",
    "FormalDate":"April 23, 2013",
    "LocCity":"San Bernardino",
    "LocState":"CA",
    "LocAddress":"1950 S. Sunwest Lane, Suite 102",
    "LocName":"SCS JPA Conference Center",
    "Price":"179.00",
    "LicenseeURL":null,
    "GateKeeper_length":"0",
    "GateKeeperHTML":null,
    "SeatsAreAvailable":"16",
    "LocLatitude":"34.0807",
    "LocLongitude":"-117.274",
    "EventType":"SS",
    "LocationUnivURL":null,
    "UnivCourseNumber":null,
    "UnivCourseType":"",
    "UnivFaculty":null,
    "Course_Type":"San Bernardino, CA",
    "cls":"LIMITED_SEATS"
  },
  {
    "ProgramCode":"IP",
    "ProgramGroup":"CISR",
    "EventCode":"20130423MAIP",
    "StartDate":"2013-04-23 00:00:00",
    "FormalDate":"April 23, 2013",
    "LocCity":"Peabody",
    "LocState":"MA",
    "LocAddress":"43 Newbury Street",
    "LocName":"Springhill Suites by Marriott",
    "Price":"0.00",
    "LicenseeURL":"http:\/\/www.massagent.com\/education\/cisr.cfm",
    "GateKeeper_length":"0",
    "GateKeeperHTML":null,
    "SeatsAreAvailable":"27",
    "LocLatitude":"42.534",
    "LocLongitude":"-70.9615",
    "EventType":"LS",
    "LocationUnivURL":null,
    "UnivCourseNumber":null,
    "UnivCourseType":"",
    "UnivFaculty":null,
    "Course_Type":"Peabody, MA",
    "cls":""
  },
  {
    "ProgramCode":"IP",
    "ProgramGroup":"CISR",
    "EventCode":"20130423MIIP",
    "StartDate":"2013-04-23 00:00:00",
    "FormalDate":"April 23, 2013",
    "LocCity":"Troy",
    "LocState":"MI",
    "LocAddress":"2601 West Big Beaver Road",
    "LocName":"Somerset Inn",
    "Price":"0.00",
    "LicenseeURL":"http:\/\/www.michagent.org\/eweb\/DynamicPage.aspx?Site=AgentNet2&WebKey=2847b6dd-e47d-40ea-b5d1-504c5ff0f800",
    "GateKeeper_length":"0",
    "GateKeeperHTML":null,
    "SeatsAreAvailable":"46",
    "LocLatitude":"42.5635",
    "LocLongitude":"-83.1841",
    "EventType":"LS",
    "LocationUnivURL":null,
    "UnivCourseNumber":null,
    "UnivCourseType":"",
    "UnivFaculty":null,
    "Course_Type":"Troy, MI",
    "cls":""
  },
  {
    "ProgramCode":"PA",
    "ProgramGroup":"CISR",
    "EventCode":"20130423CAPA",
    "StartDate":"2013-04-23 00:00:00",
    "FormalDate":"April 23, 2013",
    "LocCity":"Santa Clara (San Jose)",
    "LocState":"CA",
    "LocAddress":"5201 Great America Parkway",
    "LocName":"Network Meeting Center",
    "Price":"169.00",
    "LicenseeURL":null,
    "GateKeeper_length":"0",
    "GateKeeperHTML":null,
    "SeatsAreAvailable":"17",
    "LocLatitude":"37.3932",
    "LocLongitude":"-121.961",
    "EventType":"SS",
    "LocationUnivURL":null,
    "UnivCourseNumber":null,
    "UnivCourseType":"",
    "UnivFaculty":null,
    "Course_Type":"Santa Clara (San Jose), CA",
    "cls":"LIMITED_SEATS"
  },
  {
    "ProgramCode":"PA",
    "ProgramGroup":"CISR",
    "EventCode":"20130423CTPA",
    "StartDate":"2013-04-23 00:00:00",
    "FormalDate":"April 23, 2013",
    "LocCity":"Middletown",
    "LocState":"CT",
    "LocAddress":"213 Court Street",
    "LocName":"MiddleOak",
    "Price":"0.00",
    "LicenseeURL":"http:\/\/www.pia.org\/EDU\/schedule.php?state=CT",
    "GateKeeper_length":"0",
    "GateKeeperHTML":null,
    "SeatsAreAvailable":"40",
    "LocLatitude":"41.5537",
    "LocLongitude":"-72.6632",
    "EventType":"LS",
    "LocationUnivURL":null,
    "UnivCourseNumber":null,
    "UnivCourseType":"",
    "UnivFaculty":null,
    "Course_Type":"Middletown, CT",
    "cls":""
  },
  {
    "ProgramCode":"PA",
    "ProgramGroup":"CISR",
    "EventCode":"20130423WVPA",
    "StartDate":"2013-04-23 00:00:00",
    "FormalDate":"April 23, 2013",
    "LocCity":"Charleston",
    "LocState":"WV",
    "LocAddress":"129 Summers Street",
    "LocName":"Summit Conference Center",
    "Price":"150.00",
    "LicenseeURL":"http:\/\/www.ohiopia.com",
    "GateKeeper_length":"0",
    "GateKeeperHTML":null,
    "SeatsAreAvailable":"4",
    "LocLatitude":"38.3506",
    "LocLongitude":"-81.6303",
    "EventType":"SS",
    "LocationUnivURL":null,
    "UnivCourseNumber":null,
    "UnivCourseType":"",
    "UnivFaculty":null,
    "Course_Type":"Charleston, WV",
    "cls":"LIMITED_SEATS"
  },
  {
    "ProgramCode":"PR",
    "ProgramGroup":"CISR",
    "EventCode":"20130423MEPR",
    "StartDate":"2013-04-23 00:00:00",
    "FormalDate":"April 23, 2013",
    "LocCity":"South Portland",
    "LocState":"ME",
    "LocAddress":"363 Maine Mall Road",
    "LocName":"DoubleTree by Hilton",
    "Price":"0.00",
    "LicenseeURL":"http:\/\/www.massagent.com\/education\/cisr.cfm",
    "GateKeeper_length":"0",
    "GateKeeperHTML":null,
    "SeatsAreAvailable":"10",
    "LocLatitude":"43.6315",
    "LocLongitude":"-70.2727",
    "EventType":"LS",
    "LocationUnivURL":null,
    "UnivCourseNumber":null,
    "UnivCourseType":"",
    "UnivFaculty":null,
    "Course_Type":"South Portland, ME",
    "cls":""
  },
  {
    "ProgramCode":"PR",
    "ProgramGroup":"CISR",
    "EventCode":"20130423MOPR",
    "StartDate":"2013-04-23 00:00:00",
    "FormalDate":"April 23, 2013",
    "LocCity":"Springfield",
    "LocState":"MO",
    "LocAddress":"2720 North Glenstone",
    "LocName":"Holiday Inn Hotel and Suites",
    "Price":"0.00",
    "LicenseeURL":"http:\/\/www.iiaa.org\/MO\/03_Education\/01_Calender\/NAV_EDUCalender?ContentPreference=MO&ActiveState=MO&ActiveTab=STATE&ContentLevel1=EDUCTN&ContentLevel2=EDUCAL",
    "GateKeeper_length":"0",
    "GateKeeperHTML":null,
    "SeatsAreAvailable":"40",
    "LocLatitude":"37.2571",
    "LocLongitude":"-93.2902",
    "EventType":"LS",
    "LocationUnivURL":null,
    "UnivCourseNumber":null,
    "UnivCourseType":"",
    "UnivFaculty":null,
    "Course_Type":"Springfield, MO",
    "cls":""
  },
  {
    "ProgramCode":"PR",
    "ProgramGroup":"CISR",
    "EventCode":"20130423NCPR",
    "StartDate":"2013-04-23 00:00:00",
    "FormalDate":"April 23, 2013",
    "LocCity":"Greensboro",
    "LocState":"NC",
    "LocAddress":"414 Gallimore Dairy Rd.",
    "LocName":"BB&T Greensboro",
    "Price":"0.00",
    "LicenseeURL":"http:\/\/members.iianc.com\/wcm\/IIANC_Members\/Events\/List\/Core\/Events\/Events.aspx?hkey=90e5e7da-2e1f-4674-ae30-7c12ced0885c",
    "GateKeeper_length":"0",
    "GateKeeperHTML":null,
    "SeatsAreAvailable":"16",
    "LocLatitude":"36.0839",
    "LocLongitude":"-79.9412",
    "EventType":"LSIH",
    "LocationUnivURL":null,
    "UnivCourseNumber":null,
    "UnivCourseType":"",
    "UnivFaculty":null,
    "Course_Type":"Greensboro, NC",
    "cls":""
  },
  {
    "ProgramCode":"PR",
    "ProgramGroup":"CISR",
    "EventCode":"20130423NMPR",
    "StartDate":"2013-04-23 00:00:00",
    "FormalDate":"April 23, 2013",
    "LocCity":"Albuquerque",
    "LocState":"NM",
    "LocAddress":"2600 Louisiana, NE",
    "LocName":"Sheraton Albuquerque Uptown",
    "Price":"145.00",
    "LicenseeURL":null,
    "GateKeeper_length":"0",
    "GateKeeperHTML":null,
    "SeatsAreAvailable":"15",
    "LocLatitude":"35.1064",
    "LocLongitude":"-106.579",
    "EventType":"SS",
    "LocationUnivURL":null,
    "UnivCourseNumber":null,
    "UnivCourseType":"",
    "UnivFaculty":null,
    "Course_Type":"Albuquerque, NM",
    "cls":"LIMITED_SEATS"
  },
  {
    "ProgramCode":"PR",
    "ProgramGroup":"CISR",
    "EventCode":"20130423SDPR",
    "StartDate":"2013-04-23 00:00:00",
    "FormalDate":"April 23, 2013",
    "LocCity":"Rapid City",
    "LocState":"SD",
    "LocAddress":"445 Mt. Rushmore Road",
    "LocName":"Adoba Eco Hotel Rapid City \/ Mt. Rushmore",
    "Price":"150.00",
    "LicenseeURL":null,
    "GateKeeper_length":"0",
    "GateKeeperHTML":null,
    "SeatsAreAvailable":"18",
    "LocLatitude":"44.0853",
    "LocLongitude":"-103.213",
    "EventType":"SS",
    "LocationUnivURL":null,
    "UnivCourseNumber":null,
    "UnivCourseType":"",
    "UnivFaculty":null,
    "Course_Type":"Rapid City, SD",
    "cls":"LIMITED_SEATS"
  },
  {
    "ProgramCode":"SR",
    "ProgramGroup":"CISR",
    "EventCode":"20130423ORSR",
    "StartDate":"2013-04-23 00:00:00",
    "FormalDate":"April 23, 2013",
    "LocCity":"Portland",
    "LocState":"OR",
    "LocAddress":"8931 SE Foster Road Suite 200",
    "LocName":"Assurety Northwest",
    "Price":"0.00",
    "LicenseeURL":"http:\/\/www.piawest.com\/calendar-of-events",
    "GateKeeper_length":"0",
    "GateKeeperHTML":null,
    "SeatsAreAvailable":"40",
    "LocLatitude":"45.4786",
    "LocLongitude":"-122.562",
    "EventType":"LS",
    "LocationUnivURL":null,
    "UnivCourseNumber":null,
    "UnivCourseType":"",
    "UnivFaculty":null,
    "Course_Type":"Portland, OR",
    "cls":""
  },
  {
    "ProgramCode":"ADM",
    "ProgramGroup":"CSRM",
    "EventCode":"20130424CAADM",
    "StartDate":"2013-04-24 00:00:00",
    "FormalDate":"April 24, 2013",
    "LocCity":"San Bernardino",
    "LocState":"CA",
    "LocAddress":"1950 S. Sunwest Lane, Suite 102",
    "LocName":"SCS JPA Conference Center",
    "Price":"179.00",
    "LicenseeURL":null,
    "GateKeeper_length":"0",
    "GateKeeperHTML":null,
    "SeatsAreAvailable":"18",
    "LocLatitude":"34.0807",
    "LocLongitude":"-117.274",
    "EventType":"SS",
    "LocationUnivURL":null,
    "UnivCourseNumber":null,
    "UnivCourseType":"",
    "UnivFaculty":null,
    "Course_Type":"San Bernardino, CA",
    "cls":"LIMITED_SEATS"
  }
] 
```

服务.js：

```
app.factory('Items', ['$http', function($http){
  var Url   = "items.json";
  var Items = $http.get(Url).then(function(response){
     return response.data;
  });
  return Items;
}]); 
```

索引.html：

```
<!doctype html>
<html ng-app="plunker">
<head>
  <meta charset="utf-8">
  <title>AngularJS Plunker</title>
  <script>document.write('<base href="' + document.location + '" />');</script>
  <link
    rel="stylesheet"
    href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-combined.min.css"
  >
  <link rel="stylesheet" href="style.css">
  <link
    rel="stylesheet"
    href="//netdna.bootstrapcdn.com/font-awesome/3.0.2/css/font-awesome.css"
  >
</head>
<body>
  <script>
    var sortingOrder = 'name';
  </script>
  <div ng-controller="ctrlRead">
    <div class="input-append">
      <input
        type="text"
        ng-model="query"
        ng-change="search()"
        placeholder="Search"
        class="input-large search-query"
      >
      <span class="add-on"><i class="icon-search"></i></span>
    </div>
    <table class="table table-striped table-condensed table-hover">
      <thead>
        <tr>
          <th class="LocName">
            Id&nbsp;
            <a ng-click="sort_by('LocName')">
              <i class="icon-sort"></i>
            </a>
          </th>
          <th class="Price">
            Name&nbsp;
            <a ng-click="sort_by('Price')">
              <i class="icon-sort"></i>
            </a>
          </th>
          <th class="Course_Type">
            Description&nbsp;
            <a ng-click="sort_by('Course_Type')">
              <i class="icon-sort"></i>
            </a>
          </th>
          <th class="cls">
            Field 3&nbsp;
            <a ng-click="sort_by('cls')">
              <i class="icon-sort"></i>
            </a>
          </th>
          <th class="SeatsAreAvailable">
            Field 4&nbsp;
            <a ng-click="sort_by('SeatsAreAvailable')">
              <i class="icon-sort"></i>
            </a>
          </th>
          <th class="StartDate">
            Field 5&nbsp;
            <a ng-click="sort_by('StartDate')">
              <i class="icon-sort"></i>
            </a>
          </th>
        </tr>
      </thead>
      <tfoot>
        <td colspan="6">
          <div class="pagination pull-right">
            <ul>
              <li ng-class="{disabled: currentPage == 0}">
                <a href ng-click="prevPage()">« Prev</a>
              </li>
              <li
                ng-click="setPage()"
                ng-class="{active: n == currentPage}"
                ng-repeat="n in range(pagedItems.length)"
              >
                <a href ng-bind="n + 1">1</a>
              </li>
              <li ng-class="{disabled: currentPage == pagedItems.length - 1}">
                <a href ng-click="nextPage()">Next »</a>
              </li>
            </ul>
          </div>
        </td>
      </tfoot>
      <tbody>
        <tr ng-repeat="item in pagedItems[currentPage] | orderBy:sortingOrder:reverse">
          <td>{{item.LocName}}</td>
          <td>{{item.Price}}</td>
          <td>{{item.Course_Type}}</td>
          <td>{{item.cls}}</td>
          <td>{{item.SeatsAreAvailable}}</td>
          <td>{{item.StartDate}}</td>
        </tr>
      </tbody>
    </table>
  </div>
  <script src="http://code.jquery.com/jquery.min.js"></script>
  <script src="http://code.angularjs.org/1.1.5/angular.js"></script>
  <script src="app.js"></script>
  <script src="controllers.js"></script>
  <script src="services.js"></script>
</body>
</html> 
```

# 更好的方法是使用[ng-grid](http://angular-ui.github.io/ng-grid/)模块。

# macos - vim 颜色未加载或不工作

> ID：15312691
> 
> 赞同：2
> 
> 时间：2013-03-09T15:56:39.760
> 
> 标签：macos, vim

我是一个新的 vim 用户，我想尝试新的颜色主题。
我创建了一个 .vim 目录，其中包含带有主题的颜色目录和 .vimrc 文件，并在我的主目录中创建了一个符号链接，它指向 ./vim/.vimrc 文件。

这是我的.vimrc：

```
syntax enable
set t_Co=256
set synmaxcol=240
set background=dark
colorscheme twilight
let g:solarized_termcolors=256 
```

这是屏幕截图：
![在此处输入图像描述](../Images/d301be6f6f9b0f4e1d6429eb76d747cf.png)
这就是我想要的：
![在此处输入图像描述](../Images/e48aa066c12735d1d4755bbb0a79f4ae.png)

怎么了？

**注意：**
如果我使用图形 macvim，它可以工作，所以我的终端有问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T17:10:48.017

1.  The `let g:solarized_termcolors=256` is only useful if you use the solarized colorscheme. Since you want to use twilight, this line is useless and should be removed.

2.  暮光之城主题只有 GUI。它的颜色是用十六进制值定义的，只有 MacVim/GVim 才能理解。无论您做什么，它都不会在终端中工作。您可以改用[twilight256](http://www.vim.org/scripts/script.php?script_id=3436)，它专为彩色终端设计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T17:09:16.580

vim 主题为 GUI（即`gvim`）和终端（即`vim`）定义了一组单独的颜色，因此您最终可能会在 gvim 和 vim 中看到不同的颜色。其背后的原因是与 GUI 相比，终端支持的颜色数量有限。

### CSApprox

但是您可以使用像[CSApprox](http://www.vim.org/scripts/script.php?script_id=2390)这样的插件，它将 GUI 颜色方案中的颜色转换为终端的等效颜色，这样您就可以看到几乎相似的一组颜色。大多数支持 88 或 256 色的现代终端（如 Gnome 终端、控制台、OSX 终端）都可以使用此插件正常工作。

该`CSApprox`插件的好处是不需要单独配置，仅在您的`.vim`目录中有这个插件就足够了。当您运行`colorscheme`命令选择配色方案时，只要您的终端支持 88 或 256 色，此插件就会自动为您转换颜色。

And if you're running `gvim` or the terminal does not support 88/256 colors, this plugin just merely remains silent without doing any color conversions. And there is a mechanism to export the converted colors too I believe.

### Alternative

Another similar plugin that I've heard is [guicolorscheme](http://www.vim.org/scripts/script.php?script_id=1809) which is similar to `CSApprox`, but you need to set the color scheme using the command `:GuiColorScheme <color scheme name>`.

# java - 休眠多个本机 SQL 语句

> ID：15312697
> 
> 赞同：0
> 
> 时间：2013-03-09T15:57:03.710
> 
> 标签：java, mysql, hibernate

我想使用 Hibernate 从文件运行本机 SQL。SQL 可以包含多个创建数据库结构的语句（即表、约束但没有插入/更新/删除语句）。

示例，下面是非常简单的查询（其中包含以下两条 SQL 语句）

```
CREATE DATABASE test;
CREATE TABLE test.testtbl( id int(5)); 
```

我正在使用 MySQL db，当我运行上述查询时，我返回 gettng 语法错误。当我一个一个运行它们时，没关系。

```
Caused by: com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: 
You have an error in your SQL syntax; check the manual that corresponds to your 
MySQL server version for the right syntax to use near 
'CREATE TABLE test.testtbl( id int(5))' at line 1 
```

运行查询的代码如下（上面的语句分配给'sql'变量）：

```
session = sf.openSession();
session.beginTransaction();
Query qry = session.createSQLQuery(sql);
qry.executeUpdate();
session.getTransaction().commit(); 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T16:30:44.320

正如其他人所解释的那样
，您必须一一运行这些查询。
休眠代码被翻译成在 JDBC 上运行一条更新语句。
但是您提供了两个更新声明。
此外，
我个人更喜欢在一些 DB 脚本中使用在 Java 应用程序之外创建表的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T09:15:57.450

createSQLQuery方法的参数是t-sql代码；t-sql 代码确保在mysql 接口分析器中正确。您可以尝试更改 sql :'CREATE TABLE testtbl(id int(5));' 顺便说一下可以使用JDBC Connection api（不推荐这样做） 如：java.sql.Connection conn=session.connection();

# windows - 在 R 中导入 *.xls 文件？

> ID：15312700
> 
> 赞同：1
> 
> 时间：2013-03-09T15:57:32.423
> 
> 标签：windows, r

我正在努力将 *.xls 文件读入 R：

我做了以下事情：

我将工作目录设置为 *.xls 文件，然后：

```
> library(gdata)                   # load the gdata package 
> mydata = read.xls("comprice.xls", sheet=1, verbose=FALSE) 
Mistake in findPerl(verbose = verbose) :  perl executable not found. Use perl= argument to specify the correct path. mistake in file.exists(tfn) : unknown 'file' argument 
```

但是，我的路径是正确的，并且有文件！怎么了？

**更新**

我已经安装了它，但是现在我得到：异常：找不到函数“read.xls”...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T16:05:27.900

此错误消息表示您的计算机上未安装 perl 或未在您的路径上设置它。

如果安装了 perl，那么您可以将参数`perl=`放入 `read.xls()`函数中。

```
read.xls(xlsfile, perl="C:/perl/bin/perl.exe") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-09T16:06:31.540

作为替代方案，您可以尝试`xlsx`打包：

`read.xlsx("comprice.xls", 1)`读取您的文件并使 data.frame 列类几乎有用，*但*对于大型数据集来说非常慢。

`read.xlsx2("comprice.xls", 1)`更快，但您必须手动定义列类。如果您运行该命令两次，您将不需要计算那么多列：

```
data <- read.xlsx2("comprice.xls", 1)    
data <- read.xlsx2("comprice.xls", 1, colClasses= rep("numeric", ncol(data))) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-09T16:06:10.653

Perl 要么未安装，要么找不到。您可以安装它，也可以使用指定安装路径

```
perl='path of perl installation' 
```

在通话中。

# phpstorm - PHPStorm 和 Compass Watch 错误

> ID：15312702
> 
> 赞同：0
> 
> 时间：2013-03-09T15:57:47.830
> 
> 标签：phpstorm, compass-geolocation

我刚刚从 NetBeans 切换到 PHPStorm，虽然我很享受这种变化，但我开始在我的 compass watch 例程中不时弹出错误消息（我直接在命令上运行）线）：

```
Errno::ENOENT on line ["131"] of /home/daniel/.rvm/gems/ruby-1.9.3-p286/gems/fssm-0.2.10/lib/fssm/tree.rb: No such file or directory - /srv/www/c-nbuilding.co.uk/scss/application.scss
Run with --trace to see the full backtrace 
```

当我在它抱怨的任何文件上点击保存按钮时，这种情况似乎时不时发生（即在这种情况下，`application.scss`），并且该文件确实存在，这意味着一旦我重新启动监视进程（我通过running `compass watch --debug-info`)，它照常进行。

这不会一直发生，但它发生得足以让它变得烦人，尤其是当我的控制台窗口位于其他东西后面时，这意味着我没有注意到它已经失败，让我坐在那里，刷新屏幕，等待让更改弹出。

# delphi - GetTempFileName 创建一个空文件

> ID：15312704
> 
> 赞同：2
> 
> 时间：2013-03-09T15:57:54.513
> 
> 标签：delphi, winapi

我不确定我是否是第一个注意到这一点的人，但是（大声笑，这有点有趣......）每当我打电话时（我调试应用程序以验证这一点） GetTempFileName （来自 Windows.pas 单元），它会在我的 D:\ （不知道为什么存在）驱动器中创建一个空（0 字节）文件...

我有 2 个逻辑驱动器... C:\（主）和 D:\（逻辑），现在只有当我调用它时第一个参数（arg0）只是一个点（'.'）时才会发生这种情况，这很奇怪对我来说，它在 D:\ 中创建它，因为父目录是 2 个点（'..'）。

无论如何，对此的虚拟绕过就是删除新创建的文件...-_-，我需要的只是文件名，而不是文件系统本身...

Edit1：我的问题是，为什么会这样？有没有办法避免调用创建一个新的空文件？

```
// Creates a name for a temporary file.
Function GetTempFileName(const ext: string): string;
var
  // This buffer should be MAX_PATH characters to accommodate the path plus the terminating null character.
  lpTempFileName: Array[0..MAX_PATH] of char;
begin
  // If uUnique is zero, GetTempFileName creates an empty file and closes it.
  // If uUnique is not zero, you must create the file yourself. Only a file name is created
  Windows.GetTempFileName('.', nil, 0, lpTempFileName);
  DeleteFile(lpTempFileName); // delete created file
  Result := ChangeFileExt(lpTempFileName, ext);
  Delete(Result, 1, 2); // ".\"
end; 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-09T16:01:58.980

***为什么 GetTempFileName 函数会创建新的空文件？***

它在[`GetTempFileName`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364991%28v=vs.85%29.aspx)功能描述中（由我强调）：

> 为临时文件创建一个名称。**如果生成了唯一的文件名，则创建一个空文件**并释放它的句柄；否则，只会生成一个文件名。

* * *

***使用 GetTempFileName 函数时如何避免创建新文件？***

要么你不能让函数生成一个唯一的文件名（这会创建一个空文件），要么只是在[`GetTempFileName`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364991%28v=vs.85%29.aspx)函数返回后删除创建的空文件。从参考资料（我强调）：

> 名称已由该函数创建的临时文件**不会自动删除。要删除这些文件，请调用 DeleteFile**。

# mysql - MySQL字段从不同行到一个字符串

> ID：15312709
> 
> 赞同：1
> 
> 时间：2013-03-09T15:58:22.033
> 
> 标签：mysql, sql

我有这样的数据表：

```
Id   sort     name
1      1       abc
1      2       kci
2      1       asd
2      2       eww
2      3       der
2      4       acu
3      1       awq
3      2       see
3      3       eee 
```

是否可以创建可以给我结果的查询

```
Id     ConcName
1      abc,kci
2      asd,eww,der,acu
3      awq,see,eee 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T15:59:43.470

利用`GROUP_CONCAT()`

```
SELECT  ID, 
        GROUP_CONCAT(name ORDER BY sort ASC) ConcName
FROM    tableName
GROUP   BY ID 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/d83bf/3)
*   [GROUP_CONCAT()](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T16:01:29.060

```
SELECT `id`, GROUP_CONCAT(`name` ORDER BY `sort`)
FROM `myTable`
GROUP BY `Id` 
```

# java - 最终确定方法中的位图回收无法正常工作

> ID：15312716
> 
> 赞同：0
> 
> 时间：2013-03-09T15:58:41.817
> 
> 标签：java, android, bitmap, heap-memory, finalize

当我尝试加载大小接近应用程序堆最大大小的图像时，我的应用程序崩溃了。我第一次加载图像时很好，然后我删除了对 Bitmap 对象的引用，并在我调用 mBitmap.recycle() //nativeRecycle 的地方完成了它。显然内存使用减少了，但是当我尝试再次加载图像时，我得到了 OutOfMemory 的崩溃。有趣的是，如果我在删除引用的同一个类中调用回收，似乎内存被释放，我可以再次加载图像。所以基本上，如果我直接调用 mBitmap.recycle() 与将 mBitmap.recycle() 放在引用位图的对象的最终确定中，我会得到不同的结果。知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T19:38:02.530

如果您接近使用堆的最大大小，那么您可能只是走运（或不走运）。直接调用 recycle() 与从终结器调用它可能会以您看到差异的方式改变 GC 的时间和行为。

在您尝试重新分配位图之前，您确定您的终结器（和 recycle()）被调用了吗？终结器是不可靠的，可以无限期推迟。即使您当前在测试期间看到在重新分配之前调用了终结器，也不能保证这种情况总是会发生（尤其是对于不同的堆状态或未来/不同版本的 Dalvik）。

如果可以，请尽可能从终结器外部调用 recycle()。如果您知道何时完成，只需调用该方法；否则考虑使用 ReferenceQueue ( [https://stackoverflow.com/a/10879076/150001](https://stackoverflow.com/a/10879076/150001) )。

自从我查看 Dalvik 已经有一段时间了，但我似乎记得位图缓冲区可能需要几个 GC 周期才能被清理，因为 VM 需要确保没有本地代码有任何剩余的指针指向它。因此，缓冲区可能不会在您期望的时候完全释放。

堆碎片也有可能导致问题，尽管很有可能使用 mmap() 分配大缓冲区并且不会导致碎片（再次，取决于当前版本的 Dalvik）。

# payment-gateway - aMember Pro 到 PayPal 结帐不起作用

> ID：15312717
> 
> 赞同：0
> 
> 时间：2013-03-09T15:58:47.120
> 
> 标签：payment-gateway, paypal-subscriptions, amember

我们目前使用的是“aMember Pro 版本 3.1.2”，并且遇到了 PAYPAL 插件结帐问题。

这是问题：

1.  会员选择他们的“订阅”，选择“PAYPAL”作为他们的付款方式，然后点击“订阅”按钮结帐。

2.  他们到达第二页，上面写着：

“您将在大约 2 秒后自动重定向到安全支付页面”</p>

1.  然后他们到达第三页和最后一页，这是一个 PayPal URL：

[https://www.paypal.com/ca/cgi-bin/webscr?cmd=_flow&SESSION=HhJUVdQR6TiXtJ79AF7kp7ycke9qtt43VcRfeaz_nyUrK-iL0P7HxV02RHO&dispatch=5885d80a13c0db1f8e263663d3faee8dd75b1e1ec3ad97daf26](https://www.paypal.com/ca/cgi-bin/webscr?cmd=_flow&SESSION=HhJUVdQR6TiXtJ79AF7kp7ycke9qtt43VcRfeaz_nyUrK-iL0P7HxV02RHO&dispatch=5885d80a13c0db1f8e263663d3faee8dd75b1e1ec3ad97b7af62835dd81d5d52)

使用此错误消息：

“您用于进入 PayPal 系统的链接无效。请查看链接并重试。”</p>

事实#1：如果会员选择其他付款结账方式，例如“CLICKBANK”，则一切正常（即他们可以结账）。

事实 #2：PayPal IPN 运行良好，因为我们目前正在接收来自 PayPal 的通知

事实#3：每次会员尝试使用“PAYPAL”结账时，它都会在我们的会员管理员中注册并显示正确的“已付费”和“状态”信息（例如已付费 = 否，状态 = 未付费）。

事实 #4：PayPal 结账不适用于现有和新会员注册。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T16:17:02.620

它可能与重定向中传递的某些内容有关，例如您发布到 PayPal 的变量。您可以尝试捕获请求并将其发布在此处，我可以查看它们以了解可能导致问题的原因，或提供指向您结帐的链接。

# python - python文件处理

> ID：15312721
> 
> 赞同：0
> 
> 时间：2013-03-09T15:59:19.710
> 
> 标签：python, string, file

我正在使用 Python 3.3 Windows。
我想编写一个脚本，在文本文件中查找逗号并显示逗号之间的单词
Like

```
Denis, John, Blah ,Blah Blah 
```

我想知道如何获取逗号之间的值，然后将其与我给出的值匹配。
例如：我给出`John`并且程序在文件中找到它我希望也能够找到这个词，即使它是一个反向的，`nohj`而不是`john`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T16:08:58.887

```
contents = open('textfile','r')
[re.search('John', p) for p in contents.read().split(',')]
contents.close() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T16:09:41.983

用于`str.split(",")`用逗号分隔字符串。这会产生一个列表。然后你可以处理它：

```
def process(s):
    if s.strip() == "John":
        print("Hi John")
        # do something interesting

data = open("/path/to/file.txt", "r").read()
map(process, data.split(",")) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T16:19:59.293

试试这个

```
def get_chars(string):
    l = []
    for c in string:
        if c not in l:
            l.append(c)
    return sorted(l)

with open('filename','r') as f:
    data = f.read()
data = [i.strip().lower() for i in data.split(',')]
search = input('Word to find: ').strip().lower()
for i in data[:]:
    if get_chars(i) == s_chars:
        print i 
```

# javascript - vb.net web 方法接受 json

> ID：15312726
> 
> 赞同：1
> 
> 时间：2013-03-09T16:00:10.620
> 
> 标签：javascript, asp.net, ajax

如何创建一个接受的 asp.net web 方法：

```
{"LevelNameAddLevel":"Admin","PriviledgeIDAddLevels":"|1|2|3|4|5|6|7|"} 
```

作为参数。我这样做了：

```
<WebMethod()> _
Public Shared Function CreateUserLevel(ByVal userLevel As String, ByVal userPrivi As String) As String
    Return "true"
End Function 
```

它没有被解雇。请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T16:18:38.617

将方法的参数更改为包含适当属性的已发布对象。确保新创建的 vb 对象的属性与 json 对象属性的名称匹配。

另外，确保发送 json 的请求的内容类型设置为“application/json; charset=utf-8”

参考这篇文章： [http ://encosia.com/using-jquery-to-directly-call-aspnet-ajax-page-methods/](http://encosia.com/using-jquery-to-directly-call-aspnet-ajax-page-methods/)

# php - Android 应用无法将数据发送到远程服务器

> ID：15312728
> 
> 赞同：-2
> 
> 时间：2013-03-09T16:00:32.117
> 
> 标签：php, android, mysql, database, wamp

我正在制作一个应用程序，它只需使用 POST 方法将数据发送到数据库。我遇到的问题是应用程序在必须发送时什么都不做：没有崩溃，没有错误，什么都没有。我已经单独测试了PHP代码并且它可以工作，所以我确定问题出在代码中但我找不到它。你能帮助我吗？对于不是英语的 var 语言，我很抱歉。

安卓代码：

```
public class AggiungiProdotto extends Activity {

  private static String indirizzo = "http://10.0.2.2/tesina/Aggiungi_Ordinazione";

  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.aggiungi_prodotto);
    new AggiungoOrdinazione().execute();
  }

  private class AggiungoOrdinazione extends AsyncTask < String, Void, String > {

    @Override
    protected void onPreExecute() {
      super.onPreExecute();
    }

    @Override
    protected String doInBackground(String...arg0) {
      InputStream is = null;
      String result = "";
      JSONObject jsonResult = null;
      TextView tv;
      //Intent intent = getIntent();
      String Nome = new String();

      //String Tavolo = intent.getStringExtra("Tavolo");
      int NumTavolo = 1;
      String Tavolo = Integer.toString(NumTavolo);
      Nome = "ciao";

      HttpPost httppost = new HttpPost(indirizzo);

      HttpParams httpParams = new BasicHttpParams();

      int timeOutConnection = 5000;
      HttpConnectionParams.setConnectionTimeout(httpParams, timeOutConnection);
      int timeoutSocket = 5000;
      HttpConnectionParams.setSoTimeout(httpParams, timeoutSocket);
      HttpClient httpclient = new DefaultHttpClient(httpParams);

      List < NameValuePair > Comanda = new ArrayList < NameValuePair > ();
      Comanda.add(new BasicNameValuePair("Nome", Nome));
      Comanda.add(new BasicNameValuePair("Tavolo", Tavolo));

      try {
        httppost.setEntity(new UrlEncodedFormEntity(Comanda));
        HttpResponse response = httpclient.execute(httppost);
        HttpEntity entity = response.getEntity();
        is = entity.getContent();

        BufferedReader reader = new BufferedReader(new InputStreamReader(is, "UTF-8"));

        StringBuilder sb = new StringBuilder();
        String line = null;
        while((line = reader.readLine()) != null) {
          sb.append(line + "\n");
        }
        is.close();
        result = sb.toString();
        jsonResult = new JSONObject(result);

      } catch(UnsupportedEncodingException e) {
        e.printStackTrace();
      } catch(ClientProtocolException e) {
        e.printStackTrace();
      } catch(IOException e) {
        e.printStackTrace();
      } catch(JSONException e) {
        e.printStackTrace();
      }

      return null;
    }
  }
  protected void onPostExecute() {
  }
} 
```

PHP代码：

```
$Nome;
$Tavolo;

$Risposta = array();

//Apro la connessione con il server mySQL

$Conn = mysql_connect("localhost", "root", "");
if(!$Conn) {
    die('Errore di connessione: '.mysql_error());
}

//Seleziono il mio database
$DBS = mysql_select_db('ordinazioni', $Conn);
if(!$DBS) {
    die('Accesso al database non riuscito: '.mysql_error());
}

//echo "Mi sono connesso!";

$Nome = $_POST['Nome'];
$Tavolo = $_POST['Tavolo'];

$strSQL = mysql_query("INSERT INTO Comande (Nome, Tavolo) VALUES ('$Nome', '$Tavolo')");

if($strSQL) {
    $Risposta["Esito"] = 1;
    $Risposta["Messaggio"] = "Comanda aggiunta!";
    echo json_encode($Risposta);
    echo "Ho aggiunto!";
}
else {
    $Risposta["Esito"] = 0;
    $Risposta["Messaggio"] = "Errore nell'aggiunta!";
    echo "Non ho aggiunto!";
    echo json_encode($Risposta);
}

?> 
```

显现：

```
<uses-sdk
    android:minSdkVersion="9"
    android:targetSdkVersion="17" />
<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.gabriele.tesina.Menu_Iniziale"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name="com.gabriele.tesina.Listino"
        android:label="Il Nostro Menù" >
    </activity>
    <activity
        android:name="com.gabriele.tesina.Ordinazioni_Cuoco"
        android:label="Le pietanze da preparare" >
    </activity>
    <activity
        android:name="com.gabriele.tesina.Ordinazioni_Pizza"
        android:label="Le pizze da infornare" >
    </activity>
    <activity android:name="com.gabriele.tesina.Primi" />
    <activity android:name="com.gabriele.tesina.Secondi" />
    <activity android:name="com.gabriele.tesina.Contorni" />
    <activity android:name="com.gabriele.tesina.Dolci" />
    <activity android:name="com.gabriele.tesina.Pizze" />
    <activity android:name="com.gabriele.tesina.Bevande" />
    <activity
        android:name="com.gabriele.tesina.AggiungiProdotto"
        android:label="Aggiungi Prodotto" >
    </activity>
</application> 
```

日志猫：

```
03-09 14:43:09.347: W/Trace(771): Unexpected value from nativeGetEnabledTags: 0
03-09 14:43:09.737: W/System.err(771): org.json.JSONException: Value <!DOCTYPE of type java.lang.String cannot be converted to JSONObject
03-09 14:43:09.737: W/System.err(771):  at org.json.JSON.typeMismatch(JSON.java:111)
03-09 14:43:09.737: W/System.err(771):  at org.json.JSONObject.<init>(JSONObject.java:158)
03-09 14:43:09.747: W/System.err(771):  at org.json.JSONObject.<init>(JSONObject.java:171)
03-09 14:43:09.747: W/System.err(771):  at com.gabriele.tesina.AggiungiProdotto$AggiungoOrdinazione.doInBackground(AggiungiProdotto.java:113)
03-09 14:43:09.758: W/System.err(771):  at com.gabriele.tesina.AggiungiProdotto$AggiungoOrdinazione.doInBackground(AggiungiProdotto.java:1)
03-09 14:43:09.758: W/System.err(771):  at android.os.AsyncTask$2.call(AsyncTask.java:287)
03-09 14:43:09.767: W/System.err(771):  at java.util.concurrent.FutureTask.run(FutureTask.java:234)
03-09 14:43:09.767: W/System.err(771):  at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
03-09 14:43:09.777: W/System.err(771):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
03-09 14:43:09.777: W/System.err(771):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
03-09 14:43:09.777: W/System.err(771):  at java.lang.Thread.run(Thread.java:856) 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T16:09:07.653

> java.lang.String 类型的 DOCTYPE 无法转换为 JSONObject

您需要亲自检查请求格式以及为什么您的服务器没有发送有效的 JSON。

调试您的应用程序以检查来自服务器的响应。

检查 JSON 是否有效。

使用[JSON 皮棉。](http://jsonlint.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T16:05:25.160

我在您的清单中没有看到任何互联网许可。如果您希望应用程序能够连接，您需要明确授予应用程序互联网访问权限。

将此添加到您的清单中：

```
<uses-permission android:name="android.permission.INTERNET"></uses-permission> 
```

[资源](https://stackoverflow.com/a/2169311/1781026)

# python - django.core.exceptions.ImproperlyConfigured：加载 MySQLdb 模块时出错：没有名为 MySQLdb 的模块

> ID：15312732
> 
> 赞同：101
> 
> 时间：2013-03-09T16:00:59.193
> 
> 标签：python, mysql, database, django

我在尝试连接到 mysql 数据库时遇到的问题。我还给出了我使用的数据库设置。

```
 Traceback (most recent call last):
 File "manage.py", line 10, in <module>
 execute_from_command_line(sys.argv)
 File "/home/ar/Desktop/test/testprac/local/lib/python2.7/site-packages/django/core/management/__init__.py", line 453, in execute_from_command_line
utility.execute()
File "/home/ar/Desktop/test/testprac/local/lib/python2.7/site-packages/django/core/management/__init__.py", line 392, in execute
self.fetch_command(subcommand).run_from_argv(self.argv)
File "/home/ar/Desktop/test/testprac/local/lib/python2.7/site-packages/django/core/management/__init__.py", line 272, in fetch_command
klass = load_command_class(app_name, subcommand)
File "/home/ar/Desktop/test/testprac/local/lib/python2.7/site-packages/django/core/management/__init__.py", line 77, in load_command_class
module = import_module('%s.management.commands.%s' % (app_name, name))
File "/home/arundhati/Desktop/test/testprac/local/lib/python2.7/site-packages/django/utils/importlib.py", line 35, in import_module
__import__(name)
File "/home/ar/Desktop/test/testprac/local/lib/python2.7/site-packages/django/core/management/commands/syncdb.py", line 8, in <module>
from django.core.management.sql import custom_sql_for_model, emit_post_sync_signal
File "/home/ar/Desktop/test/testprac/local/lib/python2.7/site-packages/django/core/management/sql.py", line 9, in <module>
from django.db import models
File "/home/ar/Desktop/test/testprac/local/lib/python2.7/site-packages/django/db/__init__.py", line 40, in <module>
backend = load_backend(connection.settings_dict['ENGINE'])
File "/home/ar/Desktop/test/testprac/local/lib/python2.7/site-packages/django/db/__init__.py", line 34, in __getattr__
return getattr(connections[DEFAULT_DB_ALIAS], item)
File "/home/ar/Desktop/test/testprac/local/lib/python2.7/site-packages/django/db/utils.py", line 93, in __getitem__
backend = load_backend(db['ENGINE'])
File "/home/ar/Desktop/test/testprac/local/lib/python2.7/site-packages/django/db/utils.py", line 27, in load_backend
return import_module('.base', backend_name)
File "/home/ar/Desktop/test/testprac/local/lib/python2.7/site-packages/django/utils/importlib.py", line 35, in import_module
__import__(name)
File "/home/ar/Desktop/test/testprac/local/lib/python2.7/site-packages/django/db/backends/mysql/base.py", line 17, in <module>
raise ImproperlyConfigured("Error loading MySQLdb module: %s" % e)
django.core.exceptions.ImproperlyConfigured: Error loading MySQLdb module: No module named MySQLdb 
```

数据库设置::

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': 'ar_test_db',                      # Or path to database file if using 
        # The following settings are not used with sqlite3:
        'USER': '',
        'PASSWORD': '',
        'HOST': '',                      # Empty for localhost through domain sockets or   '127.0.0.1' for localhost through TCP.
        'PORT': '',                      # Set to empty string for default.
    }
} 
```

非常感谢您的帮助 ！！

* * *

## 回答 #1

> 赞同：140
> 
> 时间：2013-03-09T16:02:41.340

看起来你没有安装 python mysql 包，试试：

```
pip install mysql-python 
```

或者如果不使用虚拟环境（在 *nix 主机上）：

```
sudo pip install mysql-python 
```

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2015-12-18T23:11:24.277

如果您在尝试使用 pip 安装 mysqlclient 时遇到错误，您可能缺少 mysql 开发库。通过运行安装它：

```
apt-get install libmysqlclient-dev 
```

并再次尝试安装 mysqlclient：

```
pip install mysqlclient 
```

* * *

## 回答 #3

> 赞同：40
> 
> 时间：2013-05-24T12:15:10.480

你必须安装 python-mysqldb - MySQL 的 Python 接口

尝试
`sudo apt-get install python-mysqldb`

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2014-05-15T14:30:22.483

我的答案类似于@Ron-E，但我得到了一些错误/更正，所以我将我的步骤放在下面，用于 Mac OSX on Mavericks 和 Python 2.7.6。

1.  安装 Python mysql 包（如果收到成功消息，则忽略以下步骤）

    ```
    pip install mysql-python 
    ```

2.  当我执行上述操作时，我收到错误“EnvironmentError: mysql_config not found” ![在此处输入图像描述](../Images/2ab88536c1527e350e62a428448cb3dc.png) 为了解决这个问题，我在终端中执行了以下操作：

    ```
    export PATH=$PATH:/usr/local/mysql/bin 
    ```

3.  当我重新运行第 1 步时，我收到一个新错误“错误：命令 'cc' 失败，退出状态为 1” ![在此处输入图像描述](../Images/1132911ec639278d9e0c47724e440b2a.png) 为了解决这个问题，我在终端中执行了以下操作：

    ```
     export CFLAGS=-Qunused-arguments
     export CPPFLAGS=-Qunused-arguments 
    ```

4.  我重新运行第 1 步并收到成功消息“成功安装 mysql-python”！

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2013-10-02T09:35:46.583

当我使用 python、mysql、sequel pro 应用程序在 Mac OS X Mountain Lion 中为 PyCharm 设置 Django 开发环境时，我遇到了与该线程所有者相同的错误。但是，我对在 Mac OS Mountain Lion x86_x64（MySql 和 Python 也应该是相同的架构）下运行 python-mysqldb 并且已经尝试过 pip 等一切的人的回答。为了解决这个问题，请执行以下步骤：

1.  [从这里](http://sourceforge.net/projects/mysql-python/)下载 MySql for Python
2.  解压下载的文件。在终端窗口中执行以下操作：tar xvfz downloade.tar。
3.  cd /到解压目录
4.  运行 sudo python setup.py install
5.  如果你得到类似这样的错误：“环境错误：/usr/local/bin/mysql_config not found”然后尝试添加路径如下：“export PATH=$PATH:/usr/local/mysql/bin”。但是 id 对我没有帮助，我找到了另一个解决方案。在命令执行错误输出结束时，如下所示：

    mysql_config 中的文件“/path_to_file/MySQL-python-1.2.4b4/setup_posix.py”，第 25 行引发 EnvironmentError("%s not found" % (mysql_config.path,))

6.  使用 vim 打开 setup_posix.py 并转到第 25 行（在您的情况下，它可以不同，除非它是相同的版本）。

7.  编辑后第 25 行应如下所示，除非您的 mysql 具有如下符号链接，如“/usr/local/mysql/bin/”：

    `f = popen("%s --%s" % ('/usr/local/mysql/bin/mysql_config', what))`

8.  在此之后，我收到另一个错误，如下所示：

    django.core.exceptions.ImproperlyConfigured：加载 MySQLdb 模块时出错：dlopen(/Library/Python/2.7/site-packages/MySQL_python-1.2.4b4-py2.7-macosx-10.8-intel.egg/_mysql.so, 2) ：库未加载：libmysqlclient.18.dylib 引用自：/Library/Python/2.7/site-packages/MySQL_python-1.2.4b4-py2.7-macosx-10.8-intel.egg/_mysql.so 原因：找不到图像

9.  最后我在控制台中做了以下操作：

    sudo ln -s /usr/local/mysql/lib/libmysqlclient.18.dylib /usr/lib/libmysqlclient.18.dylib

目前一切正常。所以我希望它对使用Mac的人有所帮助。:)

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2014-01-29T00:13:52.743

您缺少 python`mysqldb`库。使用这个命令（对于 Debian/Ubuntu）来安装它： `sudo apt-get install python-mysqldb`

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2018-08-25T19:34:07.493

这是因为它没有找到 sql 连接器。尝试：

```
pip install mysqlclient 
```

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2019-02-17T06:20:14.647

如果您使用 Python 3.4 或更高版本，则必须安装

```
sudo apt-get install python3-dev libmysqlclient-dev 
```

在您的终端中。然后安装`pip install mysqlclient`在您的虚拟环境或安装 pip 的位置。

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2019-03-10T10:18:06.447

我已经在这个环境中**解决**了这个问题：

```
$ pyenv --version
pyenv 1.2.9

$ python --version
Python 3.7.2

$ python -m django --version
2.1.7 
```

***./settings.py***

```
DATABASES = {
    'default': {
        'NAME': 'my_db_name',
        'ENGINE': 'mysql.connector.django',   # 'django.db.backends.mysql'
        'USER': '<user>',
        'PASSWORD': '<pass>',
        'HOST': 'localhost',
        'PORT': 3306,
        'OPTIONS': {
            'autocommit': True,
        },
    }
} 
```

如果你使用`'ENGINE': 'mysql.connector.django'`，安装驱动程序执行：

```
$ pip install mysql-connector-python
Successfully installed mysql-connector-python-8.0.15 protobuf-3.7.0 six-1.12.0 
```

**请注意，这`$ pip install mysql-python`对我不起作用。**

请注意，如果您使用 `'ENGINE': 'django.db.backends.mysql'`，您应该安装驱动程序执行：
`$ pip install mysqlclient`

最后执行：
`$ python manage.py migrate`

如果没问题，python 会创建所有这些表 id 数据库：

```
auth_group
auth_group_permissions
auth_permission
auth_user
auth_user_groups
auth_user_user_permissions
django_admin_log
django_content_type
django_migrations
django_session 
```

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2013-11-20T09:13:59.860

从这里下载并安装 Mysql-python for windows 环境。 [http://www.lfd.uci.edu/~gohlke/pythonlibs/#mysql-python](http://www.lfd.uci.edu/~gohlke/pythonlibs/#mysql-python)。

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2017-12-12T05:43:19.467

对于 Ubuntu 16.04 和 18.04 或 python 3 版本

```
sudo apt-get install python3-mysqldb 
```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2014-01-18T21:19:23.140

在 Ubuntu 上，建议使用发行版存储库。

```
sudo apt-get install python-mysqldb 
```

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2019-10-16T17:39:15.613

尝试：

```
pip install mysqlclient 
```

我建议在虚拟环境中使用它。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2015-05-05T17:30:36.057

使用与 Will 相同的错误消息，它首先安装 mysql 对我有用，因为将在安装过程中添加丢失的文件。所以之后

```
brew install mysql

pip install mysql-python 
```

运行没有错误。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2016-11-22T11:56:30.140

这也发生在我身上，我相信这已经成为一个常见的错误，不仅对于 Django 开发人员而且对于 Flask 也是如此，所以我解决这个问题的方法是使用 brew。

1.  `brew install mysql`
2.  `sudo pip install mysql-python`

这样每个问题都解决了，两个框架都工作得很好。

PS：对于那些使用 macports 的人（比如我自己），这可能是一个问题，因为 brew 在不同的级别上工作，我的建议是使用 brew 而不是 macports

我希望我能有所帮助。

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2020-11-03T07:18:15.250

我认为是版本错误。

尝试按以下顺序安装：

1.  `sudo apt-get install python3-mysqldb`

2.  `pip3 install mysqlclient`

3.  `python3 manage.py makemigrations`

4.  `python3 manage.py migrate`

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2019-02-13T05:12:04.060

我遇到了同样的问题。以下解决了我的问题

在你的 shell 中运行**pip install pymysql**

然后，编辑项目源目录中的 init.py 文件（与 settings.py 相同），然后

添加：

**导入 pymysql**

**pymysql.install_as_MySQLdb()**

这应该可以解决问题。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2013-08-20T08:19:35.623

只是为了添加其他答案，如果您使用的是 Django，建议您在安装 Django 之前安装 mysql-python。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2016-10-01T18:21:38.090

我在这上面浪费了很多时间。结果表明 Python 3 不支持默认数据库库。[您必须使用不同的](https://stackoverflow.com/questions/35152201/django-1-8-throwing-importerror-no-module-named-mysqldb).

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2016-11-06T07:08:49.987

如果错误看起来像这样

```
django.core.exceptions.ImproperlyConfigured: Error loading MySQLdb module:
dlopen(/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/_mysql.so, 2): Library not loaded: 
/usr/local/opt/mysql/lib/libmysqlclient.20.dylib
Referenced from: /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/_mysql.so 
```

然后尝试：

```
pip install python-mysqldb 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2017-11-22T14:16:06.937

面临类似的问题。我尝试`mysql-python`使用 pip 安装，但由于 gcc 依赖错误而失败。

对我有用的解决方案

```
conda install mysql-python 
```

请注意，我已经安装了 anaconda，它没有 gcc 依赖项。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2020-12-29T10:15:11.187

[来源](https://dev.mysql.com/doc/connector-python/en/connector-python-django-backend.html)

安装（如果没有找到）：

```
pip install mysql.connector 
```

设置：

```
'default': {
    'ENGINE': 'mysql.connector.django',
    'NAME': '...',
    'HOST': '...',
    'PORT': '3306',
    'USER': '...',
    'PASSWORD': '...',
} 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2021-03-05T02:21:15.050

**当我想使用 MySQL 作为默认数据库时，我遇到了类似的错误。**
这些错误可能是由于尚未安装[mysqlclient造成的。](https://pypi.org/project/mysqlclient/)
这可以使用命令行安装；
`pip install mysqlclient` （对于最新版本的python）
或 `pip install mysql-python`（对于旧版本的python）
**就我而言，在满足此要求后，我仍然遇到同样的错误，并解决如下；** 在您的*django 项目目录*中，***选择 venv 目录***并在这些目录下，
选择***pyvenv.cfg***文件，然后在询问您是否要编辑此文件的对话框上单击允许。在这个文件中，
`include-system-site-packages`设置为`false`. 所以像这样把这行代码改成true；

```
include-system-site-packages = true 
```

现在一切正常

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2021-09-03T13:02:43.367

试试这个，只需使用 pip：在 Windows 上，推荐的命令是：

```
python -m pip install mysqlclient 
```

在虚拟环境中使用它

* * *

## 回答 #25

> 赞同：-3
> 
> 时间：2017-07-26T05:54:08.570

也许您可以尝试以下操作模式：
`sudo python manage.py runserver 0.0.0.0:8000`

# html - 无法对齐 div

> ID：15312734
> 
> 赞同：0
> 
> 时间：2013-03-09T16:01:00.573
> 
> 标签：html, twitter-bootstrap

我正在尝试将 3 个 div 彼此相邻对齐，但我正在尝试根据屏幕的百分比设置宽度，但如果它使所有 div 的宽度加起来为 100%，则它不适合所有一条线。请看下面

![这显示了它在我的显示器上的样子](../Images/1a3cff40901876ab4c662379a1d391bc.png)

这是我正在使用的html代码

```
<div style="width:100%;">
<div id='donate' class="hero-unit" style="width:20%; height:200px; margin-left:15px; Float:left">
<h1 style="font-size:35px;">Donate</h1>
<p>Interested in supporting us? Click below for more information</p>
<p>
<a class="btn btn-primary btn-large" link href="http://www.universalpvp.com">
Learn more &raquo;
</a>
</p>
</div>
<center>
<div id='forum' class="hero-unit" style="width:60%; height:200px; Float:left;">
<h1 style="font-size:35px;">Forum</h1>
<p>Want to talk to other members? Click below</p>
<p>
<a class="btn btn-primary btn-large" link href="http://www.universalpvp.com">
Learn more &raquo;
</a>
</p>
</div>
</center>
<div id='info' class="hero-unit" style="width:20%; height:200px; margin-right:15px; Float:right">
<h1 style="font-size:35px;">Server Information</h1>
<p>Click below for more information about the server</p>
<p>
<a class="btn btn-primary btn-large" href="http://www.universalpvp.com">
Learn more &raquo;
</a>
</p>
</div>
</div> 
```

请帮我完成这项工作，使其适合所有尺寸的显示器。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T16:07:48.783

您的总页面宽度为 100%。最多，三者最多可以达到33%。但是，我看到您还希望他们在三人组的左侧和右侧有一些边距。

你甚至不需要父母`<div>`说`width: 100%;`

尝试这个：

```
<div id='donate' class="hero-unit" style="width:18%; height:200px; margin-left:2%; float:left">
<h1 style="font-size:35px;">Donate</h1>
<p>Interested in supporting us? Click below for more information</p>
<p>
<a class="btn btn-primary btn-large" link href="http://www.universalpvp.com">
Learn more &raquo;
</a>
</p>
</div>
<center>
<div id='forum' class="hero-unit" style="width:58% !important; height:200px; float:left;">
<h1 style="font-size:35px;">Forum</h1>
<p>Want to talk to other members? Click below</p>
<p>
<a class="btn btn-primary btn-large" link href="http://www.universalpvp.com">
Learn more &raquo;
</a>
</p>
</div>
</center>
<div id='info' class="hero-unit" style="width:18%; height:200px; margin-right:2%; float: left;">
<h1 style="font-size:35px;">Server Information</h1>
<p>Click below for more information about the server</p>
<p>
<a class="btn btn-primary btn-large" href="http://www.universalpvp.com">
Learn more &raquo;
</a>
</p>
</div> 
```

您现在可以玩弄 % 值，但要确保它们不超过 100%（宽度和边距相结合）。如果它仍然不起作用，您可能有一些其他样式会影响`<div>`s 的显示方式。

![这就是它的样子](../Images/2508d8d9b9c6ed4e106082a01ebd6cf2.png)

# java - 枚举 Java 中的私有成员

> ID：15312735
> 
> 赞同：6
> 
> 时间：2013-03-09T15:49:03.440
> 
> 标签：java, enums

```
public class Test {

    public static enum MyEnum {
        valueA(1),valueb(2),valuec(3),valued(4);
        private int i;
        private Object o;

        private MyEnum(int number) {
             i = number;
        }

        public void set(Object o) {
            this.o = o;
        }

        public Object get() {
            return o;
        }

     } 

    public static void main(String[] args) {
        System.out.println(MyEnum.valueA.i); // private
    }
} 
```

输出：1

如果它是枚举中的私有成员，为什么会显示 1？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T16:03:47.143

外部类可以完全访问其内部类的成员变量，因此 `i`在类中是可见的`Test`。

相反，如果`MyEnum`在`Test`类外部，编译器会抱怨`i`,

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-09T16:04:17.517

它是 (i) 在同一类 (MyEnum) 中引用的成员字段；没有访问修饰符可以阻止 - 在 i 上定义的私有访问修饰符将阻止它在此类之外的可见性。 [推荐阅读](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T16:13:43.967

允许从包含类型到嵌套类型的私有访问，请参阅[为什么枚举类型上的私有字段对包含类可见？](https://stackoverflow.com/questions/5069374/why-are-private-fields-on-an-enum-type-visible-to-the-containing-class)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T16:09:07.633

`vlaueA`被认为是一个静态变量，因此您可以在其中调用它，`MyEnum`因为`i`在同一`enum`类中播放与类相同，因此`MyEnum`可以访问`valueA`哪个可以访问`i`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-09T16:13:19.177

外部类将有权访问内部类成员，即使它是私有的，因为您`main`在外部类中定义了方法。

# ios - for循环内的方法只被调用一次？

> ID：15312736
> 
> 赞同：0
> 
> 时间：2013-03-09T16:01:12.367
> 
> 标签：ios, objective-c, uiwebview

我想我错过了一些非常基本的东西，但无论如何我都会冒险:)。我正在使用 for 循环将不同的 html 加载到`UIWebView`. 当 html 完成加载时，我想做一些不相关的事情并继续前进。出于某种原因`webViewDidFinishLoad`，即使我在 htmlArray 中有 20 个对象并且我正在尝试找出方法，也只会在 for 循环的过程结束时调用一次。

有什么创造性的方法来解决吗？

谢谢

```
 for(int i=0;i<[_htmlArray count];i++)
        {
            msg = [_htmlArray objectAtIndex:i];
            [_tempWebView loadHTMLString:msg baseURL:nil];
        }
} 
```

...

```
- (void)webViewDidFinishLoad:(UIWebView *)webView {

    [self doSomeStuff:webView]; // <--only called once

    NSLog(@"didFinish Snip Snap: %@; stillLoading:%@", [[webView request]URL],
          (webView.loading?@"NO":@"YES"));
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T16:05:21.493

我假设正在发生的事情是通过`loadHTMLString:baseURL:`多次调用，你只是覆盖了你要求做的`UIWebView`事情。所以最后一个获胜，代表只被调用一次。

当然`UIWebView`可以写成在一个单独的线程上异步加载（它确实如此），但即便如此，你在 for 循环中执行它的速度如此之快，以至于之前的加载在它们有机会之前被取消了加载，只有最后一个获胜。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T16:06:25.910

如果您几乎同时调用多个负载，`webViewDidFinishLoad:`则可能要等到最后一个负载完成加载后才会调用。也有可能只有最后一个甚至会开始加载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T16:06:44.413

for 循环在再次开始加载之前不会等待视图完成加载，因此很可能只有最后一次调用实际上有机会完成并调用`webViewDidFinishLoad`.

创建一个名为的实例变量`count`并加载`viewDidLoad`. 在`webViewDidFinishLoad`增量实例变量。当`count`你达到20时，你就完成了。

这样，在调用下一个页面之前加载每个页面。

# hibernate - 我如何在休眠映射中为双向多对一指定级联？

> ID：15312741
> 
> 赞同：1
> 
> 时间：2013-03-09T16:01:29.617
> 
> 标签：hibernate, nhibernate-mapping, cascade

嗨，我对休眠映射和以下保存操作有一些疑问。

我有 Dealer.class 这个属性：

```
public class Dealer extends Persistent {

private static final long serialVersionUID = 306594798010394718L;

private Domain domain;
private Integer status;
private DealerData activeData;        // this property belongs to DealerData.class
private Set<DealerData> historyData; 
```

他的映射是这样的

```
<hibernate-mapping>
<class name="sk.bantip.hotel.server.dao.book.Dealer" table="book_dealer" dynamic-update="true" select-before-update="true">
    <id column="idBook_dealer" name="id" type="java.lang.Long">
        <generator class="identity" />
    </id>

    <many-to-one name="activeData" column="idBook_dealerData"
        class="sk.bantip.hotel.server.dao.book.DealerData" />
    <set name="historyData" inverse="true">
        <key column="idBook_dealer" />
        <one-to-many class="sk.bantip.hotel.server.dao.book.DealerData" />
    </set>
    <property name="status" not-null="false" />
</class> 
```

和 DealerData.class

```
public class DealerData extends Persistent {

private static final long serialVersionUID = 8424120040396958913L;

private String name;
private String registration;
private String taxNumber;
private Long authorUserId;
.... many other props 
```

和 DealerData hbm.xml

```
<hibernate-mapping>
<class name="sk.bantip.hotel.server.dao.book.DealerData" table="book_dealerData" dynamic-update="true" select-before-update="true" >
    <id column="idBook_dealerData" name="id" type="java.lang.Long">
        <generator class="identity" />
    </id>
    <property name="name" not-null="true" />
    <property name="registration" not-null="true"/>
    <property name="taxNumber" not-null="true" />
    <property name="timestamp" not-null="true"  />
    <property name="authorUserId" column="idAuthor" not-null="true" update="false"/>
    <many-to-one name="dealer" column="idBook_dealer"
        not-null="true" class="sk.bantip.hotel.server.dao.book.Dealer" update="false" />

</class> 
```

基于这个我的映射我不知道我必须在哪里定义`cascade="save-update"`操作。当我想通过 JSF 输入字段从表单 DealerData 保存属性并提交整个页面时，此语句必须在`<many-to-one>`DealerData 或 Dealer 的标签内？

我也将 DealerData 的外键设置为 Dealer 中的 NULL。DealerData 中 Dealer 的外键检查为 NOT-NULL，我想保存 DealerData 值，然后必须保存 Dealer。所以经销商的 ID 也必须生成，但不知道如何，因为我得到了 FK 列**Column 'id_dealer' 不能为空**

有人可以帮我解决这个问题，以及我如何正确构造保存方法，以便两个类都保存在这个方法中吗？非常感谢您的建议。干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-11T13:15:56.800

您可以使用：

```
<bag name="Log" cascade="delete" inverse="true" order-by="DateEntry ASC">
    <key column="complaint" />
    <one-to-many class="ComplaintLog" />
</bag> 
```

或者

```
<many-to-one name="Status" class="ProcessStatus" cascade="none" not-null="true" /> 
```

当您在 [class].hbm.xml 映射文件中设置列时

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-18T16:24:16.037

请从代码中给出的类代码中删除扩展

# opencl - OpenCl 工作组

> ID：15312742
> 
> 赞同：5
> 
> 时间：2013-03-09T16:01:33.060
> 
> 标签：opencl

例如，当我设置我的金额时会发生什么

1.  工作组到 5120 和 localsize 1
2.  工作组到 2560 和 localsize 2
3.  工作组到 640 和 localsize 4

这对我的工作项目数量和对资源的访问有何影响？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-09T20:58:31.850

1.  你会有`5120 threads. 5120 groups. 1 thread per group`. 每个组（1 个线程）将占用一个处理器。您不能同步它们中的任何一个（在传统意义上）。
2.  你会有`2560 threads. 1280 groups. 2 threads in each group`. 每个组（2 个线程）将占用一个处理器。您可以同步这两个线程（在传统意义上）。
3.  你会有`640 threads. 160 groups. 4 threads in each group`. 每个组（4 个线程）将占用一个处理器。您可以同步这四个线程（在传统意义上）。

在 OpenCL 中，您需要根据线程总数来表示全局工作大小。底层 OpenCL API 将查看全局 Work Size 并除以本地 Work Size 以计算出您的线程安排。

现在（这是一个一般性建议。可能在某些情况下您需要这样做，但现在..）

1.  是一个可怕的想法。清楚地。一次给它 1 个线程是在浪费处理器时间。虽然这可能不是 CPU 的世界末日，但它是现代 GPU 的世界末日。为什么？因为你的 GPU 上的每个处理器都会有多个内核。一切准备就绪。在这种情况下，只有其中一个有效。另外，如果需要，您无法同步线程。

2.  一样。

3.  一样。

如果我没记错的话，NVIDIA 建议在一组中至少使用 32 个线程以获得最佳性能。

# android - 使用按钮在顺序文本上书写的自定义键盘

> ID：15312747
> 
> 赞同：0
> 
> 时间：2013-03-09T16:02:21.687
> 
> 标签：android, eclipse, keyboard

`ImageButton`我使用s for Android（使用 Eclipse）设计了一个自定义键盘。我想单击一个按钮在文本上书写，但每次单击一个按钮时，它都会重置文本，删除我之前写的内容。

我怎样才能让它从以前的文本继续写作？

这是我的代码的基本部分，使用两个按钮和一个文本字段。

```
package com.example.nonachan;

import android.R.string;
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ImageButton;
import android.widget.TextView;

public class MainActivity extends Activity {

    char g;
    char h;

    int i = 0; 

    //char buf[] = new char[10];    

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        final EditText t =(EditText)findViewById(R.id.t1);

             ImageButton n = (ImageButton)findViewById(R.id.b1);            
            n.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View arg0) {
                    // TODO Auto-generated method stub

                    g = 'd';
                    // buf[i] = 'd';
                      t.setText( "" + g);  
                     i++;
                }       

            });

            ImageButton a = (ImageButton)findViewById(R.id.b2);
            a.setOnClickListener(new View.OnClickListener() {     
                @Override
                public void onClick(View arg0) {
                    // TODO Auto-generated method stub

                //   buf[i] = 'h';
                     h = 'h' ;
                     t.setText( "" +h); 
                     i++; 

                }
            });

            Button l = (Button)findViewById(R.id.b3);
            l.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View arg0) {
                    // TODO Auto-generated method stub      

                }

            });

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T16:13:09.727

```
t.setText( "" + g); 
```

代码中的上述行表示将`t`' 的文本设置`"" + g`为等于`"d"`。它永远不会附加文本，因为您没有告诉它。

尝试在文本字段中添加现有文本：

```
t.setText(t.getText().toString() + g); 
```

你也必须这样做`t.setText( "" +h);`。

# visual-studio-2012 - 我如何告诉 WebMatrix 将项目放在哪里？

> ID：15312749
> 
> 赞同：2
> 
> 时间：2013-03-09T16:02:32.613
> 
> 标签：visual-studio-2012, webmatrix, asp.net-webpages

使用 Visual Studio 创建网站项目（文件 | 新网站 | ASP.NET 网站 (Razor 2)）的问题在于，它让您无法从空站点开始。OTOH WebMatrix 的问题在于，它不允许您指定（在硬盘驱动器上）放置您的站点的位置，并且也不能明确放置站点的位置。

*有*没有办法强制 WebMatrix 将网站存储在特定位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T19:47:07.933

文件 » 选项 » 站点 » 默认站点位置

# android - 动态创建的按钮不适用于创建的搜索栏

> ID：15312751
> 
> 赞同：0
> 
> 时间：2013-03-09T16:02:43.020
> 
> 标签：android, button, seekbar

这是我的代码，我希望创建的切换按钮将创建的搜索栏的位置设置为 100/0，但是只有创建的最后一个切换按钮才能设置最后一个搜索栏的位置。我已经创建了按钮和搜索栏，并使用 for 循环为它们分配了 ID。谢谢您的帮助。

```
public class MainActivity extends Activity {

TableLayout tl = null;
SeekBar seekbar = null;
TextView t = null;
ToggleButton bt = null;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    tl = (TableLayout)findViewById(R.id.lightslist);
    t = (TextView)findViewById(R.id.progress);

    for(int i = 1; i <= 20; i++){

         TableRow tr = new TableRow(this);

         seekbar = new SeekBar(this);
         seekbar.setMax(100);
         seekbar.setId(i);
         seekbar.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {

                public void onStopTrackingTouch(SeekBar sb) {
                    // TODO Auto-generated method stub
                    int progress = sb.getProgress();
                    t.setText(sb.getId() + " at " + progress);

                }

                public void onStartTrackingTouch(SeekBar sb) {
                    // TODO Auto-generated method stub
                    Toast.makeText(getBaseContext(), "Start", Toast.LENGTH_SHORT).show();
                }

                public void onProgressChanged(SeekBar sb, int progress, boolean a) {
                    // TODO Auto-generated method stub

                }

            });

            TableRow.LayoutParams ob = new TableRow.LayoutParams(LayoutParams.WRAP_CONTENT,
                    LayoutParams.WRAP_CONTENT,
                    1);

            bt = new ToggleButton(this);
            bt.setId(i + 100);

            bt.setOnClickListener(new OnClickListener()
            {
                @Override
                public void onClick(View v)
                {

                    if (bt.isChecked())
                    {
                             seekbar.setProgress(100);
                    }else{
                        seekbar.setProgress(0);
                    }
                }

          });

            tr.addView(bt);

            tr.addView(seekbar, ob);

            tl.addView(tr);

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T16:12:08.020

`seekbar`每次在 for 循环中都会重新分配您。所以最后创建的 Seekbar 的值是成员变量中最终可用的值。

代替成员变量，您可以创建一个最终变量并将动态创建的实例分配给它。

```
final SeekBar seekbar = new SeekBar(this); 
```

**或者**

您可以将 设置`seekbar`为 的标记并在方法`ToggleButton`中检索该标记。`onClick`

```
 bt = new ToggleButton(this);
        bt.setId(i + 100);
        bt.setTag(seekbar);

        bt.setOnClickListener(new OnClickListener()
        {
            @Override
            public void onClick(View v)
            {

                if (bt.isChecked())
                {
                         SeekBar sb = (SeekBar)getTag();
                         sb.setProgress(100);
                }else{
                    sb.setProgress(0);
                }
            }

      }); 
```

# c# - 如何使用 c# 获取所有 Facebook 页面类别和区域

> ID：15312753
> 
> 赞同：0
> 
> 时间：2013-03-09T16:02:44.753
> 
> 标签：c#, facebook, api, categories

我的应用程序需要向用户显示所有可用的页面类别，以便他可以选择要关注和/或喜欢的页面。有没有办法在c#中使用api来获取所有类别？

我还需要将 Facebook 中的所有可用区域用作位置和/或家乡等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T17:27:34.740

经过一番研究，这似乎是不可能的。Facebook FQL 需要 where 子句来搜索页面。这意味着您需要提供以下内容之一：关键字、page_id、名称或用户名。由于您似乎没有任何这些字段，或者更具体地说，您想要所有内容，因此这些字段对您来说并不重要。总结一下：`select categories from pages`不是有效的 FQL，它有一个 where 子句。例子：

```
select categories from pages where page_id = x
select categories from pages where keyword = x
select categories from pages where name = x
select categories from pages where username = x 
```

这对我来说似乎很奇怪，因为如果导航到[https://www.facebook.com/pages](https://www.facebook.com/pages)该网站肯定能够枚举可用页面。如果您只是枚举站点上的所有页面，则可以基于大量递归搜索构建自己的类别列表。这需要不经常进行并在本地存储到您的应用程序中。

要回答您问题的第二部分，FQL 允许搜索已标记有位置数据的帖子（[https://developers.facebook.com/docs/reference/fql/location_post](https://developers.facebook.com/docs/reference/fql/location_post)）但是这只会返回基于以下内容的结果4条规则：

*   你在帖子中被标记
*   一位朋友在帖子中被标记
*   您撰写了帖子
*   一位朋友撰写了这篇文章

他们在这里所指的“您”是用于执行查询的 OAuth 令牌的所有者。同样，我不相信这会导致您能够检索位置列表，因为与`where`上面看到的相同的子句限制。

官方 Facebook API 部分到此结束。您当然可以依靠基本的网页抓取，类似于 Silamril 提供的答案。但是我不确定这是否适用于位置，因为该搜索框似乎是一个实时搜索自动完成框。这意味着您必须放入一些东西才能取出一些东西。我建议您查看 geoapi 提供程序，或者甚至简单地抓取一个 wikipage，例如[http://en.wikipedia.org/wiki/List_of_lists_of_settlement_in_the_United_States](http://en.wikipedia.org/wiki/List_of_lists_of_settlements_in_the_United_States)。有一些地图信息提供商，例如 OpenStreetMap，它们能够以 API 格式为您提供相同的信息。请参阅 OSM wiki ( [http://wiki.openstreetmap.org/wiki/Key:place](http://wiki.openstreetmap.org/wiki/Key:place) )。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T17:19:27.867

您可以使用[https://gist.github.com/bloudermilk/2173940上的脚本获取所有页面类别](https://gist.github.com/bloudermilk/2173940)

# html - 没有字段的 HTML 字段集

> ID：15312758
> 
> 赞同：1
> 
> 时间：2013-03-09T16:03:16.757
> 
> 标签：html

我正在写一篇博客文章，我想添加一个“注释”框，我希望它看起来非常像`<fieldset>`一个`<legend>`

```
<fieldset>
    <legend>Note</legend>
    Please take note of this.
</fieldset> 
```

（见[http://www.w3schools.com/tags/tag_fieldset.asp](http://www.w3schools.com/tags/tag_fieldset.asp)）

如您所见，这`<fieldset>`实际上不包含任何字段，因此为了使布局更容易工作，这似乎有点肮脏。

有谁知道是否有另一个类似于`<fieldset>`\的标签`<legend>`更适用于它将包含的文本内容？

我可以用 CSS 做到这一点，但我只是想知道是否有一个 HTML 元素可以使标记变得更好:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T16:20:38.950

从语义的角度来看，标签的选择不应该由所需的表示（您希望它*看起来像*什么）来决定，而是要描述内容实际*是*什么。另一方面，没有什么表现得非常相似`legend`（这是一个相当奇怪的元素），所以确实没有可靠的选择，但你可以接近。这是许多可能的解决方案中[的一个示例：](http://jsfiddle.net/AEec5/)

```
<div>
    <h3>Notes</h3>
    <p>Lorem Ipsum is simply dummy text...</p>
</div> 
```

```
div {
    padding:20px;
    border:1px solid #ccc;
}
h3 {
    margin-top:-30px; /* estimated, you can be more accurate */
    background:#fff;  /* hide the top border behind it */
    float:left;       /* make it the smallest width possible */
} 
```

我不认为拥有没有表单输入的字段集在*技术上*是非法的（也就是说，您的标记仍将有效），但它实际上是用于表单的。如果您可以通过 CSS 找到替代解决方案，那将是解决难题的理想方法。

# neo4j - 图数据库的变更管理？

> ID：15312760
> 
> 赞同：10
> 
> 时间：2013-03-09T16:03:29.080
> 
> 标签：neo4j, graph-databases

我最近接触了图形数据库的世界。对于像我这样的老关系狗来说，这是一个非常有趣的范式转变。

也是最近，我一直在修补 liquibase，它是管理数据库的一个非常好的工具。

所以，两个世界发生了碰撞，我只是想知道是否有任何工具可以对图形数据库进行类似 liquibase 的更改管理。我对`neo4j`和特别感兴趣`orientdb`。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-05-28T22:18:06.423

[Liquigraph](http://liquigraph.github.io/)现在存在，虽然还很新，但作者非常乐于接受反馈并积极致力于该项目。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-11T21:30:31.117

Pramod Sadalage 和 Martin Fowler 在 2003 年发表的关于[进化数据库设计](http://martinfowler.com/articles/evodb.html)的有影响力的文章对我如何管理数据库中的模式更改产生了重大影响。我继续在 Java 和 .NET 生态系统中使用[DbDeploy](http://dbdeploy.com)和 DbDeploy.net，现在使用[ActiveRecord 迁移](http://guides.rubyonrails.org/migrations.html)。如果你觉得 liquibase 很有趣，我建议你看看这些工具。

[Neo4j.rb 文档](https://github.com/andreasronge/neo4j/wiki/migrations)讨论了针对 Neo4j的这些类型的迁移。

我个人没有使用工具来管理 Neo4j 中的迁移，但我编写了迁移脚本，这些脚本完成了重命名属性、更改边缘标签或创建索引等操作。作为一个示例用例，下面是 Gremlin Groovy 脚本的一个片段，我用来重新映射存储在 Neo4j 图中的一些外键并更新索引：

```
try {
  projects.each { node ->
    old_id = node.ref_id
    new_id = old_to_new_ids[old_id]
    index.remove('project', old_id, node)
    node.ref_id = new_id
    index.put('project', new_id, node)
  }
} catch (Throwable e) {
  println(e)
} finally {
  g.shutdown()
} 
```

从 Neo4j 版本 1.8 开始，有一个 PropertyContainer 可用于图元数据。使用这个容器来更新“schema_version”属性会很简单。代码看起来像：

```
EmbeddedGraphDatabase db = new EmbeddedGraphDatabase(dbFilename);        
Transaction tx = db.beginTx();
PropertyContainer properties = db.getNodeManager().getGraphProperties();
properties.setProperty("schema_version", 3);
tx.success();
tx.finish(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-28T17:24:36.200

就个人而言，我会对基于 TinkerPop API 的东西更感兴趣。我认为这个 API 被多个不同的数据库支持，这就是它的设计目的。我希望能够定义我的顶点标签、边缘标签、属性、索引等——而不是试图与为关系数据库设计的（伟大的）技术保持一致。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-11-12T13:29:38.890

Objectivity/DB 是一个面向对象/图形数据库，具有称为“Schema Evolution”的功能。此功能允许您创建架构、加载数据、更改架构以及加载更多数据。您可以根据需要多次更改架构。我们的客户已经部署了操作系统，并且已经更改了数百次架构，而无需重新加载数据。

模式演变功能使用模式“形状”的概念，其中每个形状都存储在模式目录中，每个对象都有一个形状 ID。从磁盘读取对象时，形状 id 用于从目录中查找模式形状。然后，如果目录形状不是该架构类型的“最新”形状，则实际对象数据会即时“进化”以匹配该对象类型的最新形状。这使得操作系统不必仅仅因为有人想要一个额外的属性就重新加载 PB 级数据库。

有许多类型的模式更改是允许的，添加、删除、重新键入属性，但有一些模式更改是不允许的，因为它们会在功能上破坏数据和/或模式。

免责声明：我受雇于 Objective, Inc.

# java - 带有文本和按钮的 Java 对话框

> ID：15312769
> 
> 赞同：1
> 
> 时间：2013-03-09T16:03:56.993
> 
> 标签：java, swing, input, dialog

如何制作一个顶部有文本的对话框，在其下方有一个空白区域，用户可以在其中键入，在右侧有一个`OKAY`按钮，当您单击它时对话框会消失？

像这样：

![输入对话框](../Images/0f32bcb7515349dd499379ff0b032f60.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T16:04:31.507

```
String input = JOptionPane.showInputDialog(..); 
```

有关详细信息，请参阅[如何制作对话框](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html)。这是该文档中的一个示例。

```
String s = (String)JOptionPane.showInputDialog(
                this,
                "Complete the sentence:\n"
                + "\"Green eggs and...\"",
                "Customized Dialog",
                JOptionPane.PLAIN_MESSAGE,
                null,
                null,
                "ham"); 
```

![JOptionPane 请求输入](../Images/46ceaa6bfa68919ce71751c0e20a5c3d.png)

# c - C fgets 没有得到全文

> ID：15312770
> 
> 赞同：1
> 
> 时间：2013-03-09T16:04:05.383
> 
> 标签：c, char, fgets

当我使用此代码时

```
char *openFile(const char file[1024]){
FILE *f = fopen(file, "r");
char c[1000];
char *d;
if (f!=NULL) {
    if (fgets(c, 1000, f) !=NULL){
        d = c;
    }
    else{
        d = "No text";
    }
}
else{
    d="error";
    printf("%s", d);
}
fclose(f);

return d;
} 
```

例如，获取这么长的文本

```
fosndjfnsondfnsnkdfsjndfoweoingfoweljksdnflwkengdfwoensldkfwejlnfkdlskdfnlskdnflskdnflksndlfknslkdnflkndlknfslnlfjnlksdnjfnjwnejnfwenfnjwenlfodnakdoifnkleroglknerolkdfgnrkldsfgnlskdfgnlksdfglndlfkngkldnslkgnlkfdnkglnklsndfklnglfdlskgknllkdglksdfkkngkresoirigknlsdf 
```

（这个文本没有任何意义，它只是一个测试）我返回`char *d;`它输出这个

```
fosndjfnsondfnsnkdfsjndfoweoingfoweljksdnflwkengdfwoensldkfwejlnfkdlskdfnlskdnflskdnflksndlfknslkdnflkndlknfslnlfjnlksdnjfnjwnejnfwenfnjwenlfodnakdoifnkleroglknerolkdfgnrkldsfgnlskdfgnlksdfglndlfkngkldnslkgnlkfdnkglnklsndfklnglfdlskgknllkdglksdfkkngkresoir¯ˇˇˇˇˇˇˇv”[ 
```

为什么最后会有那些奇怪的角色？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T16:07:58.387

您已`c`在`openFile`. 假设您的读取成功，您将在`d`. 它在 结束时被销毁`openFile`，因此`d`成为一个悬空指针。在返回后尝试使用它会`openFile`导致未定义的行为。

Possible cures include defining `c` as `static`, and returning a buffer allocated with `malloc` instead. Defining `c` as `static` has a fair number of pitfalls, especially when/if multi-threading gets involved, so dynamic allocation is often quite a bit cleaner.

# c++ - 使用先前已移动的输出迭代器调用 move() 是标准 C++ 吗？

> ID：15312773
> 
> 赞同：2
> 
> 时间：2013-03-09T16:04:35.133
> 
> 标签：c++, sorting, stl, c++11, move-semantics

在复习算法设计和学习 C++11 的同时，我想出了以下堆排序的实现：

> ```
> template <typename It, typename Comp>
> void heapSort(It begin, It end, Comp compFunc, std::random_access_iterator_tag)
> {
>     std::make_heap(begin, end, compFunc);
>     std::sort_heap(begin, end, compFunc);
> }
> 
> template <typename It, typename Comp, typename IterCat>
> void heapSort(It begin, It end, Comp compFunc, IterCat)
> {
>     typedef typename It::value_type value_type;
> 
>     std::vector<value_type> randomAccessContainer;
>     randomAccessContainer.reserve(std::distance(begin, end));
>     std::move(begin, end, std::back_inserter(randomAccessContainer));
> 
>     heapSort(std::begin(randomAccessContainer), std::end(randomAccessContainer), compFunc, std::random_access_iterator_tag());
>     std::move(std::begin(randomAccessContainer), std::end(randomAccessContainer), begin);
> } 
> ```

`[begin, end)`首先从新容器移入新容器，然后从该容器移回新容器是标准 C++`[begin, end)`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T16:18:17.873

> 首先从 [begin, end) 移动到新容器，然后从该容器移回 [begin, end) 是标准 C++ 吗？

我最初对您使用“*标准*”一词感到困惑，并编辑了问题，以便询问这是否“*合法*”。这个问题的答案是：“**是**的，*这是完全合法的*”。在原始范围内的元素被移出后，它们仍然处于有效（即使未指定）状态。

因此，第二次调用`std::move()`将只移动分配元素，并且这些元素的类型应具有不带前置条件的移动分配运算符。只要是这种情况，我认为没有问题。

但是，在编辑了您的问题后，我开始怀疑您是否真的想问这是否是“标准”，意思是“惯例”，这就是我恢复原始措辞的原因。

这个问题的答案是“**部分**”。您通常会使用几个*移动迭代器*而不是调用来初始化临时向量`std::move`：

```
std::vector<value_type> randomAccessContainer(
    std::make_move_iterator(begin),
    std::make_move_iterator(end)
    ); 
```

除此之外，您的实现对我来说似乎是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T16:13:29.677

不，不是。

如果还没有，我可以看到您如何需要它成为随机访问容器。在这种情况下，更喜欢`std::make_move_iterator`：

```
std::vector<value_type> randomAccessContainer(
     std::make_move_iterator(begin), 
     std::make_move_iterator(end)); 
```

在所有其他情况下，您都希望就地排序。（除非您可能需要对异常“无影响”）

# pointers - 分配块指针：Objective-C 与 C++ 类之间的差异

> ID：15312774
> 
> 赞同：4
> 
> 时间：2013-03-09T16:04:44.410
> 
> 标签：pointers, clang, subclass, objective-c-blocks, objective-c++

我发现分配块对于 Objective-C 类参数和 C++ 类参数的行为不同。

想象一下，我有这个简单的 Objective-C 类层次结构：

```
@interface Fruit : NSObject
@end

@interface Apple : Fruit
@end 
```

然后我可以写这样的东西：

```
Fruit *(^getFruit)();
Apple *(^getApple)();
getFruit = getApple; 
```

这意味着，*对于 Objective-C 类*，块**的返回类型是协变的**：返回更具体的块可以看作是返回更一般的块的“子类”。在这里，`getApple`可以将传递苹果的区块安全地分配给`getFruit`区块。事实上，如果以后使用，`Apple *`当您期待`Fruit *`. 而且，从逻辑上讲，反过来是行不通的：`getApple = getFruit;`不编译，因为当我们真的想要一个苹果时，我们不高兴只得到一个水果。

同样，我可以这样写：

```
void (^eatFruit)(Fruit *);
void (^eatApple)(Apple *);
eatApple = eatFruit; 
```

这表明块**的参数类型是协变的**：可以处理更一般的参数的块可以用于需要处理更具体的参数的块。如果一个块知道如何吃水果，它也会知道如何吃苹果。同样，反之亦然，这将无法编译：`eatFruit = eatApple;`.

这一切都很好——在 Objective-C 中。现在让我们在 C++ 或 Objective-C++ 中尝试一下，假设我们有这些类似的 C++ 类：

```
class FruitCpp {};

class AppleCpp : public FruitCpp {};

class OrangeCpp : public FruitCpp {}; 
```

可悲的是，这些块分配不再编译：

```
 FruitCpp *(^getFruitCpp)();
 AppleCpp *(^getAppleCpp)();
 getFruitCpp = getAppleCpp; // error!

 void (^eatFruitCpp)(FruitCpp *);
 void (^eatAppleCpp)(AppleCpp *);
 eatAppleCpp = eatFruitCpp; // error! 
```

Clang 抱怨“从不兼容的类型分配”错误。因此，*对于 C++ 类，块***在返回类型和参数类型**方面似乎是不变的。

这是为什么？我对 Objective-C 类提出的相同论点不也适用于 C++ 类吗？我错过了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-11T14:32:32.983

由于 Objective-C 和 C++ 对象模型之间的差异，这种区别是有意的。特别是，给定一个指向 Objective-C 对象的指针，可以将该指针转换/强制转换为指向基类或派生类，而无需实际更改指针的值：无论如何，对象的地址都是相同的。

因为 C++ 允许多重和虚拟继承，所以 C++ 对象不是这种情况：如果我有一个指向 C++ 类的指针，并且我将该指针转换/转换为指向基类或派生类，我可能必须调整指针的值。例如，考虑：

```
class A { int x; }
class B { int y; }
class C : public A, public B { }

B *getC() { 
  C *c = new C;
  return c;
} 
```

假设 getC() 中的新 C 对象被分配在地址 0x10。指针“c”的值为 0x10。在 return 语句中，指向 C 的指针需要调整为指向 C 中的 B 子对象。因为 B 在 C 的继承列表中位于 A 之后，所以它将（通常）在内存中布局在 A 之后，因此这意味着添加一个到指针的 4 个字节 (== sizeof(A)) 的偏移量，因此返回的指针将为 0x14。类似地，将 B* 转换为 C* 将从指针中减去 4 个字节，以说明 B 在 C 中的偏移量。在处理虚拟基类时，想法是相同的，但偏移量不再是已知的，编译时常量：它们在执行期间通过 vtable 访问。

现在，考虑一下这对分配的影响，例如：

```
C (^getC)();
B (^getB)();
getB = getC; 
```

getC 块返回一个指向 C 的指针。要将它变成一个返回指向 B 的指针的块，我们需要通过添加 4 个字节来调整从块的每次调用返回的指针。这不是对块的调整；这是对块返回的指针值的调整。可以通过合成一个包装前一个块并执行调整的新块来实现这一点，例如，

```
getB = ^B() { return getC() } 
```

这在编译器中是可以实现的，当用具有需要调整的协变返回类型的虚函数覆盖虚函数时，它已经引入了类似的“thunk”。但是，对于块，它会导致一个额外的问题：块允许与 == 进行相等比较，因此要评估是否“getB == getC”，我们必须能够查看由赋值“getB =”生成的 thunk getC" 来比较底层块指针。同样，这是可以实现的，但需要更重量级的块运行时，它能够创建（独特的）thunk，能够对返回值（以及任何逆变参数）执行这些调整。虽然所有这些在技术上都是可行的，但成本（在运行时大小、复杂性和执行时间方面）超过了收益。

回到 Objective-C，单继承对象模型永远不需要对对象指针进行任何调整：只有一个地址指向给定的 Objective-C 对象，而不管指针的静态类型如何，所以协变/逆变从不需要任何 thunk，块分配是一个简单的指针分配（ARC 下的 + _Block_copy/_Block_release）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T21:36:44.753

该功能可能被忽略了。有些[提交](http://llvm.org/viewvc/llvm-project?view=revision&revision=125445)表明 Clang 人关心在 Objective-C++ 中为 Objective-C 类型提供协变和逆变工作，但我找不到 C++ 本身的任何东西。块的[语言规范](http://clang.llvm.org/docs/BlockLanguageSpec.html)没有提到 C++ 或 Objective-C 的协变或逆变。

# jquery - css：在浏览器中包含随机定位的图像

> ID：15312779
> 
> 赞同：0
> 
> 时间：2013-03-09T16:05:08.243
> 
> 标签：jquery, html, css

我试图将我所有随机定位的图像包含在它的 100% 环绕中，图像在页面加载时随机定位，但是当我将环绕设置为溢出时：隐藏了一些图像被切断。是否可以在包装中包含所有图像同时也不重叠图像？
这是一个 jsfiddle：http: [//jsfiddle.net/mdxZL/2/](http://jsfiddle.net/mdxZL/2/)
HTML：

```
<div id="wrap" style="width: 100%; height: auto; position: absolute; left: 0; top: 0; overflow: hidden;">

<div id="images">
    <img src="http://placekitten.com/200/200" />
    <img src="http://placekitten.com/200/200" />
    <img src="http://placekitten.com/200/200" />
    <img src="http://placekitten.com/200/200" />
    <img src="http://placekitten.com/200/200" />
</div>
</div> 
```

CSS：

```
 #images
    {
        left: 0; top: 0;
        width: 100%;
    }

    #images img
    {
        padding: 10px;
        position:relative;
} 
```

jQuery：

```
$(document).ready(function(){
$("#images img").each(
function(intIndex) {

var l = Math.floor(Math.random() * $("#images").width());
var t = Math.floor(Math.random() * $("#images").height());

$(this).css("margin-left", l);
$(this).css("margin-top", t);

}

);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T16:07:36.787

尝试

```
#images img
{
    padding: 10px;
    position:relative;
    width:100%;
} 
```

# c++ - 用于解析包含单位的字符串的库

> ID：15312780
> 
> 赞同：3
> 
> 时间：2013-03-09T16:05:09.613
> 
> 标签：c++, units-of-measurement

我正在寻找一个可以解析用户提供的字符串的 C++ 库，例如：

```
25 meters/day
3.4 light-years/s
10 cm^3 yr^-1 
```

并将这些作为可以相加、相乘等的对象返回。

这样的事情存在吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-10T18:33:27.410

如果您事先知道数量的*维度*（我想如果您正在解决一个实际的物理问题，您仍然可以使用 Boost.Units，因为转换因子总是必然存在（被定义）。喜欢这里： http: [//www.boost.org/doc/libs/1_37_0/doc/html/boost_units/Examples.html#boost_units.Examples.RuntimeUnits](http://www.boost.org/doc/libs/1_37_0/doc/html/boost_units/Examples.html#boost_units.Examples.RuntimeUnits)

如果问题确实是单元名称/操作的解析，那么 Boost.Spirit 或 C++ 正则表达式可以提供帮助。

# azure - 如何在 Windows azure 中修改我的网站的位置？

> ID：15312781
> 
> 赞同：7
> 
> 时间：2013-03-09T16:05:12.650
> 
> 标签：azure, azure-web-app-service

在 windows azure 上配置我的网站时，我选择 Est of USA 作为网站，并选择北欧作为数据库。

你可以猜到，性能很差，我的大部分用户都在欧洲。查看msdn，他们说无法更改位置数据库。

那么如何更改我的网站的位置呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-09T16:20:03.113

您需要将您的网站代码重新部署到位于欧洲的新网站。如果您使用 git，这应该就像为新网站设置新的远程位置并重新进行推送一样简单。

未来：始终将网站+数据库部署在同一个数据中心。这避免了性能延迟以及数据中心外的数据出口成本。

# php - 从 mysql 过渡到 PDO

> ID：15312782
> 
> 赞同：0
> 
> 时间：2013-03-09T16:05:14.250
> 
> 标签：php, mysql, pdo

我正在学习PDO。我开始从这里更改我的数据库连接：

```
$dbname = "database1";

mysql_connect(
  ':/Applications/MAMP/tmp/mysql/mysql.sock',
 'root',
 'root'
) or die( mysql_error());
mysql_select_db($dbname) or die("MySQL Error: " . mysql_error()); 
```

到 PDO 连接：

```
$username = "root";
$password = "root";

try {
$conn = new PDO('mysql:host=localhost;dbname=database1', $username, $password);
$conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
} catch(PDOException $e) {
echo 'ERROR: ' . $e->getMessage();
} 
```

连接似乎正常，但是当我尝试登录网站（本地主机）时，找不到我的用户名和密码。

1.  自从我将数据库连接更改为 PDO 后，是否需要将所有 mysql_query 更改为 PDO？
2.  在这个过渡阶段，我可以请你参考一些好的教程来帮助我吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T16:12:09.647

1.  是的你是。
2.  这是一个很好的[PDO 教程](http://goo.gl/vFWnC)和[这个](http://www.phpro.org/tutorials/Introduction-to-PHP-PDO.html)

# vba - 按顺序重命名 Zip 文件

> ID：15312783
> 
> 赞同：-1
> 
> 时间：2013-03-09T16:05:16.033
> 
> 标签：vba, batch-file, cmd

我想通过 Sched 任务每 30 分钟重命名一个 zip 文件。

文件清单：

BULK_CALL1.ZIP BULK_CALL2.ZIP BULK_CALL3.ZIP 等等。

进入：

BULK_CALL.ZIP BULK_CALL2.ZIP BULK_CALL3.ZIP 等等。

BULK_CALL.ZIP 将被程序删除。因此，在 30 分钟内，我希望将 BULK_CALL2.ZIP 重命名为 BULK_CALL.ZIP 等等，直到所有文件都处理完毕。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T17:19:50.210

```
@ECHO OFF
IF NOT EXIST bulk_call.zip FOR %%i IN (bulk_call*.zip) DO REN %%i bulk_call.zip&GOTO :eof 
```

可以做你想做的事——取决于对你要求的更好解释。

您是否担心文件的处理顺序 - 无论是调用`bulk_call?.zip`还是`test?.txt`

所需的顺序是日期顺序吗？

如果是这样，请尝试

```
@ECHO OFF
IF NOT EXIST bulk_call.zip FOR /f %%i IN ( 
  ' dir /b /a-d /od bulk_call*.zip ' ) DO REN %%i bulk_call.zip&GOTO :eof 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T16:20:36.873

使用 VBA... 要重命名文件名，请使用以下语法：

```
Name "BULK_CALL.ZIP" As "BULK_CALL2.ZIP" 
```

要在 30 分钟的时间使用说明后重复该过程：

```
Application.OnTime 
```

您必须在其中添加两个参数。

# mysql - mysql 列再次开始排序

> ID：15312785
> 
> 赞同：0
> 
> 时间：2013-03-09T16:05:17.430
> 
> 标签：mysql, sorting

我有一个包含 2000 个条目的表。表排序有一个名为“title_sort”的 varchar(100) 字段（unicode ut8 ci/ with key） 我的问题是返回的结果不正确。

它对 AZ 进行排序，然后从 A 重新开始。（大约在第 750 行）

这对我来说似乎是一个错误，这是我的查询：

```
SELECT m.* 
FROM medias as m 
WHERE 1 
ORDER BY m.title_sort ASC 
LIMIT 1000 
```

这会从 AZ 返回 763 行，然后在结果 764 处再次从 A 开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T16:28:43.507

您可以使用它来修剪前导空间

```
 SELECT TRIM(LEADING ' ' FROM your_column) 
```

或这个

```
 TRIM( `col_name` ) 
```

# iphone - 提高drawRect的性能：

> ID：15312792
> 
> 赞同：1
> 
> 时间：2013-03-09T16:05:29.180
> 
> 标签：iphone, objective-c, xcode

我每 0.1 秒使用 NSTimer 从网格中绘制单元格。大小约为 96x64 => 6144 个单元格/图像。如果我正在绘制图像而不是（例如）绿色矩形，它会慢 4 倍！

```
- (void)drawRect:(CGRect)rect
{
    CGContextRef context = UIGraphicsGetCurrentContext();
    UIGraphicsPushContext(context);
    CGContextSetRGBFillColor(context, 0, 0, 0, 1);
    CGContextFillRect(context, CGRectMake(0, 0, self.bounds.size.width, self.bounds.size.height));
    int cellSize = self.bounds.size.width / WIDTH;
    double xOffset = 0;
    for (int i = 0; i < WIDTH;i++)
    {
        for (int j = 0; j < HEIGHT;j++)
        {                
                NSNumber *currentCell = [self.state.board objectAtIndex:(i*HEIGHT)+j];
                if (currentCell.intValue == 1)
                {
                   [image1 drawAtPoint:CGPointMake(xOffset + (cellSize * i),cellSize * j )];
                }
                else if (currentCell.intValue == 0){
                   [image2 drawAtPoint:CGPointMake(xOffset + (cellSize * i),cellSize * j )];
                }
        }
    }
    UIGraphicsPopContext();
} 
```

如果我想在每个矩形中绘制 png 或 jpg，知道如何加快速度吗？图像已经缩放到适当的大小。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T16:25:52.407

*   a) 不要重绘视图边界之外的图像/矩形。

*   b）不要重绘dirtyRect之外的图像/矩形

*   c) 不要重绘自上次更新以来没有更改的图像/矩形。

*   d) 使用图层预渲染图像，因此您不需要在绘图时渲染它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T23:50:20.413

这种情况正是 Instruments 的用途。用它。在这里提出建议的任何人都在猜测瓶颈是什么。

也就是说，我要猜测瓶颈是什么。您正在使用 CPU 绘制 6114 个图像（通过使用时间分析器确认这一点。找到您的 drawRect 方法，并检查花费最多时间的位置。如果是 drawInRect，那么这就是您的问题）

如果是这样，我们如何减少它的使用？一个简单的胜利就是只重绘我们需要绘制的图像。CALayers 让这一切变得简单。删除您的 drawRect 方法，为每个图像添加一个子层到您的视图层，并将图像设置为层的内容属性。当图像需要更改时，不要使视图无效，只需将相关层的内容属性切换到新图像即可。

CALayers 的另一个好处是它们在 GPU 上缓存图层内容，这意味着确实发生的重绘将需要更少的 CPU 时间，并且当它们发生时不会阻塞应用程序的其余部分。

如果这么多层的开销是不可接受的（同样，Instruments 是您的朋友），请查看 CAReplicatorLayer。它不如拥有许多 CALayer 灵活，但允许以最小的开销多次复制单个图像。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T17:12:20.343

我试图从性能角度改进您的代码。但是，也请查看我对瓶颈的评论。

```
- (void)drawRect:(CGRect)rect {
    CGContextRef context = UIGraphicsGetCurrentContext();
    //UIGraphicsPushContext(context); //not needed UIView does it anyway

    //use [UIView backgroundColor] instead of this
    //CGContextSetRGBFillColor(context, 0, 0, 0, 1);
    //CGContextFillRect(context, CGRectMake(0, 0, self.bounds.size.width, self.bounds.size.height));

    int cellSize = self.bounds.size.width / WIDTH;
    double xOffset = 0;

    CGRect cellFrame = CGRectMake(0, 0, cellSize, cellSize);
    NSUinteger cellIndex = 0;

    for (int i = 0; i < WIDTH; i++) {
        cellFrame.origin.x = xOffset;

        for (int j = 0; j < HEIGHT; j++, cellIndex++) {                
            cellFrame.origin.y = 0;

            if (CGRectIntersectsRect(rect, cellFrame) {
                NSNumber *currentCell = [self.state.board objectAtIndex:cellIndex];

                if (currentCell.intValue == 1) {
                    [image1 drawInRect:cellFrame];
                }
                else if (currentCell.intValue == 0) {
                    [image2 drawInRect:cellFrame];
                }
            }

            cellFrame.origin.y += cellSize;
        }

        cellFrame.origin.x += cellSize;
    }

    //UIGraphicsPopContext(context); //not needed UIView does it anyway
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T16:46:01.563

用于`CGRectIntersects`检查图像的矩形是否在dirtyRect 内，以检查是否需要绘制它。

# ios - 一起使用 Novocaine 和 AVCam

> ID：15312794
> 
> 赞同：2
> 
> 时间：2013-03-09T16:05:31.463
> 
> 标签：ios, avcam, novocaine

我的问题很简单。我想使用 Apple 的[AVCam](https://developer.apple.com/library/ios/#samplecode/AVCam/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010112-Intro-DontLinkElementID_2)示例项目录制电影。在录制时，我想过滤音频通道以提取我稍后将使用的一堆信息（我发现[Novocaine](https://github.com/alexbw/novocaine) + [NVDSP](https://github.com/bartolsthoorn/NVDSP)对我来说是最好的解决方案）。现在，我发现 Novocaine 和 AVCam 不能很好地协同工作，例如。他们都试图访问麦克风，但只有其中一个可以控制它（AVCam 似乎在这里“获胜”）。

是否可以让 AVCam 记录音频通道，同时让 Novocaine 在单独的过程中分析该数据？AVCam 应该记录来自麦克风的“真实”声音，而 Novocaine 会出于不同的目的对它们进行详细说明。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:10:39.020

由于我无法让这两个组件一起工作，我不得不使用`Novocaine`和[`GPUImage`](https://github.com/BradLarson/GPUImage)一起实现一个自定义电影录像机。第一个将记录音频会话，而后者将记录视频会话。录制结束后，我将两个会话合并在一起以获得最终的电影输出。

它有点复杂，但这是我发现单独处理视频和音频的唯一方法。

# c - 用于打印字符串的自包含 C 例程

> ID：15312803
> 
> 赞同：6
> 
> 时间：2013-03-09T16:06:29.603
> 
> 标签：c, assembly, operating-system, osdev

我想制作一个打印字符串的自包含 C 函数。这将是操作系统的一部分，所以我不能使用`stdio.h`. 我将如何制作一个函数来打印我传递给它的字符串而不使用`stdio.h`？我必须在汇编中编写它吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T02:51:36.860

假设您在 X86 PC 上执行此操作，您需要直接读取/写入位于 address 的视频内存`0xB8000`。对于彩色显示器，您需要指定一个 ASCII 字符字节和一个属性字节，它们可以指示颜色。访问此内存时通常使用宏：

```
#define VIDEO_BASE_ADDR    0xB8000
#define VIDEO_ADDR(x,y)    (unsigned short *)(VIDEO_BASE_ADDR + 2 * ((y) * SCREEN_X_SIZE + (x))) 
```

然后，围绕它编写自己的 IO 例程。下面是我用来从屏幕缓冲区写入的一个简单函数。我用它来帮助实现粗略的滚动功能。

```
void c_write_window(unsigned int x, unsigned int y, unsigned short c)
{
  if ((win_offset + y) >= BUFFER_ROWS) {
    int overlap = ((win_offset + y) - BUFFER_ROWS);
    *VIDEO_ADDR(x,y) = screen_buffer[overlap][x] = c;
  } else {
    *VIDEO_ADDR(x,y) = screen_buffer[win_offset + y][x] = c;
  }
} 
```

要了解有关此内容和其他 osdev 主题的更多信息，请参阅[http://wiki.osdev.org/Printing_To_Screen](http://wiki.osdev.org/Printing_To_Screen)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-09T16:43:37.117

您可能想要查看或可能只是使用FreeBSD C 库中的[stdio 函数的源代码，它是 BSD 许可的。](http://www.freebsd.org/cgi/cvsweb.cgi/src/lib/libc/stdio/)

要实际产生输出，您至少需要一些可以将字符写入输出设备的功能。为此，stdio 例程最终会调用[write](http://www.unix.com/man-page/FreeBSD/2/write/)，后者会对内核执行系统调用。

# jquery - 如何使用jQuery在所有浏览器中计算相同的身体高度

> ID：15312811
> 
> 赞同：2
> 
> 时间：2013-03-09T16:06:45.770
> 
> 标签：jquery, height, document-body

我有一个我不知道如何解决的问题。

基本上，我正在集成一个 ScrollToFixed jQuery 插件并计算限制，我使用

```
jQuery( document ).height() - jQuery( \'body\').offset().top 
```

或者

```
jQuery( 'body' ).height() 
```

问题是它在所有浏览器中的工作方式都不同。我已经在 Chrome 中开发了我的实现，但是当我在其他浏览器中测试它时，它是一团糟。我将值输出到控制台，我得到了 600px 的高度差。

现在，由于我的客户将在多个网站上使用我的脚本，我必须找到一个通用的解决方案，如果它只对我来说会容易得多。

你能帮帮我吗，这甚至可能吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T17:53:42.713

首先确保你[标准化你的 css](http://necolas.github.com/normalize.css/)，所以它在所有浏览器中都是一样的。

~~然后用于`$(window).height()`获取浏览器窗口的高度。~~

* * *

更新：我不得不去寻找`scrollToFixed`插件，因为那里有多个类似的命名插件。我[在这里找到了](https://github.com/bigspotteddog/ScrollToFixed)。

如果您查看文档和限制选项的定义

> 元素开始向上滚动页面的垂直滚动位置（绝对）。

所以你需要做的就是在那个位置定位一个元素，就像作者在[“非常完整的例子”演示](http://jsfiddle.net/ZczEt/167/)中所做的那样：

```
limit: $('.footer').offset().top - $('#summary').outerHeight(true) - 10; 
```

`.footer`显然是底部的页脚。它得到偏移顶部，然后减去滚动窗口的高度，再加上一个微小的边距（加宽结果框架以查看摘要滚动窗口）。

# javascript - 在流星中准备好DOM后如何执行辅助函数

> ID：15312812
> 
> 赞同：13
> 
> 时间：2013-03-09T16:06:53.010
> 
> 标签：javascript, meteor

我有一个`<li>`使用 Meteor.startup 填充 find() 的列表，如下所示。然后我`<li>`使用 data() 获取这些的所有数据属性并将其放入一个对象中并尝试 return/console.log 它以便我可以查看它是否有效。但我得到`null`了结果。

```
 Meteor.startup(function () {
    Template.messages.lists = function () {
        var allitems = lists.find();
        return allitems;
    };
    var map;
    map = new GMaps({
        div: '#map_canvas',
        lat: -12.043333,
        lng: -77.028333
    });
    var lat = map.getCenter().lat();
    var lng = map.getCenter().lng();
    map.addMarker({
        lat: lat,
        lng: lng,
        draggable: true,
        title: 'Test',
        dragend: function (e) {
            $('#lat').val(this.getPosition().lat());
            $('#lng').val(this.getPosition().lng());
        }
    });
    console.log(getMarkers());
});

function getMarkers() {
    var coordinates = {};
    coordinates = $('li.message').data();
    return coordinates;
} 
```

我直接在我的控制台中尝试了相同的方法并且它有效 - 我得到了一个对象 - 所以我猜测在这个函数执行之前 DOM 没有准备好/填充。

我很难理解 Meteor.startup 和 Template.mytemplate.rendered 之类的东西之间的区别。在这种情况下，它们似乎都没有按我的意愿工作？

用 DOM 做事的正确方法/地点是什么（遍历、获取属性、操作）？

**编辑**

因为为了做我想做的事情，代码发生了很大变化，所以我发布了整件事。

```
Meteor.startup(function () {
  var map;
  map = new GMaps({
    div: '#map_canvas',
    lat: 50.853642,
    lng: 4.357452
  });
  Meteor.subscribe('AllMessages', function() {
    var allitems = lists.find().fetch();
    console.log(allitems);
    allitems.forEach(function(item) { 
      var lat = item.location.lat; 
      var lng = item.location.lng;
      console.log('latitude is: ' + lat);
      console.log('longitude is: ' + lng);
      map.addMarker({ 
        lat: lat, 
        lng: lng, 
        draggable: true, 
        title: 'Test', 
        dragend: function(e) { 
          $('#lat').val(this.getPosition().lat()); 
          $('#lng').val(this.getPosition().lng()); 
        } 
      }); 
    });
  });
}); 
```

上面的代码在 Meteor.Startup 中创建了一个新的谷歌地图（使用 GMaps.js 插件），然后在嵌套的订阅中从集合中获取所有文档，forEaches 结果并获取纬度和经度值，然后继续添加谷歌地图上的标记...

**编辑 2**

我以这种方式将我的“地图”变量设为全局变量，无需嵌套 .subscribe 和 .startup。：

```
Meteor.subscribe('AllMessages', function() {
  var allitems = lists.find().fetch();
  console.log(allitems);
  allitems.forEach(function(item) { 
    var lat = item.location.lat; 
    var lng = item.location.lng;
    console.log('latitude is: ' + lat);
    console.log('longitude is: ' + lng);
    map.addMarker({ 
      lat: lat, 
      lng: lng, 
      draggable: true, 
      title: item.description, 
      dragend: function(e) { 
        $('#lat').val(this.getPosition().lat()); 
        $('#lng').val(this.getPosition().lng()); 
      } 
    }); 
  });
});

Meteor.startup(function () {
  map = new GMaps({
    div: '#map_canvas',
    lat: 50.853642,
    lng: 4.357452
  });
});

Template.messages.lists = function () {
  var allitems = lists.find().fetch();
  return allitems;
} 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-09T21:21:02.917

[**流星启动**](http://docs.meteor.com/#meteor_startup)

`Meteor.startup()`只运行一次，它在客户端和服务器上运行。因此，当浏览器加载并且初始 DOM 准备好或服务器启动时。正如 Sohel Khalifa 所说，您将初始化函数放在这里。不要在这里定义模板，因为模板需要在这个函数被触发之前准备好。

[**Template.myTemplate.onRendered(function() {... })**](http://docs.meteor.com/#template_rendered)

这是在流星完成并渲染 DOM 时运行的。此外，**每次**模板内的 HTML 更改时都会运行。因此，对于子模板中列表中的每个项目/项目中的更改/更新等以及列表，如果您使用它进行检查，您将看到 console.log 返回一些内容。有时会在调用数据时返回`null`/ `undefined`（我会解释）：

**这是否意味着所有的 DOM 都准备好了？不！**：

我认为这可能会给您带来一些麻烦。如果您使用 Google 地图等外部 API，它们可能仍会呈现地图。这`Template.myTemplate.rendered()`意味着*Meteor*已经完成了使用必要的反应变量渲染模板。因此，要了解您的 Google 地图何时准备就绪，您需要连接到 Google 地图 API。看看[这个问题](https://stackoverflow.com/questions/832692/how-to-check-if-google-maps-is-fully-loaded)

[**使用 Meteor.subscribe**](http://docs.meteor.com/#meteor_subscribe)

您在使用时可能会得到`null`/的原因是因为这是流星通常将数据渲染到模板中的过程`undefined``rendered`

你基本上`console.log(getMarkers());`是在订阅完成之前打电话，这就是你得到`null`/`undefined`

Meteor 使用模板和反应数据的这个总结过程：

1.  构建没有数据和渲染的模板 - 在这个阶段还没有数据
2.  向服务器请求集合中的数据
3.  使用新数据重建模板并渲染

因此，如果在过程 1) 很短的时间内您将没有数据，这就是为什么您可能会`null`在第一次渲染时获得（例如在您的代码中）&。要克服这个问题，您应该使用`Meteor.subscribe`从服务器下载所有数据时运行的回调：例如

```
Meteor.subscribe("lists", function() {
    //Callback fired when data received
}); 
```

注意：在使用它之前，您应该阅读有关使用[订阅](http://docs.meteor.com/#meteor_subscribe)的文档，因为您需要删除`autopublish`包，并在服务器上创建相应的`Meteor.publish`功能。虽然这可能看起来很乏味，但您最终还是会这样做，以便为您的用户提供自己的列表和/或实施某种安全措施。

**建议对您的代码进行修改：**

您在正确的位置进行 DOM 遍历，`Template.mytemplate.onRendered(function()..`但您还需要连接到 Google Maps 的 API 以捕获他们的地图何时完成绘制。您还应该使用`Meteor.subscribe`以确保您获得正确的时间而不是获得`null`/ `undefined`。

确保你把你的模板助手放在 a`Meteor.isClient`而不是 a`Meteor.startup`因为 Meteor.startup 在你的初始 DOM 准备好之后被触发（初始是第一个但在它被反应变量或路由器改变之前）所以你的模板定义需要在*之前*运行这个阶段。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T17:41:13.927

结果返回`null`的原因是，您已将其放在`Meteor.startup()`. 它实际上在从服务器加载数据之前运行。所以`lists.find()`返回null。

这`Meteor.startup()`是一个用于初始化全局变量、响应会话和订阅来自服务器的主要数据的地方。您在那里编写的所有内容都将在客户端启动后立即执行一次。

是meteor提供的`Template.myTemplate.rendered()`一个特殊的helper，每次对应的数据发生变化时都会运行，主要用于获取模板中包含的属性或操作DOM元素。

因此，请将您的帮助代码放在公共`isClient()`区域之外。并使用`.rendered()`helper 遍历 DOM，获取或操作 DOM 元素的属性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-06-02T14:46:08.307

非常感谢 Akshat 的详细回答）

我有更复杂的使用 Meteor.subscribe 的情况，我有模板，其中包含来自 DB 的图像。所以我需要等待来自两个集合图像和新闻的数据（这里的所有其他数据）。

我以这种方式准备好我的 DOM：

```
imageIsLoaded = new Promise(function(resolve){
    Meteor.subscribe('images',function(){
        resolve()
    });
});

newsIsLoaded = new Promise(function(resolve){
    Meteor.subscribe('news',function(){
        resolve()
    });
});

Template.newsList.onRendered(function(){
    Promise.all([imageIsLoaded, newsIsLoaded]).then(function() {
        // DOM IS READY!!!
        newsServices.masonryInit();
    })
}); 
```

模板结构：

```
<template name="newsList">
         {{#each news}}
            {{> news_item}}
        {{/each}}
</template> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-09T20:59:53.557

最好的方法是将代码放入 Template.x.rendered() 并使用 Session 反应变量来跟踪代码是否已运行。例如，您可以这样做：

```
Template.x.rendered = function () {
  if (Session.get('doneMarkers') == null) {
    // Do your stuff
    if (getMarkers() != null) {
      Session.set('doneMarkers', 'yes');
    }
  }
});

function getMarkers() {
  var coordinates = {};
  coordinates = $('li.message').data();
  return coordinates;
} 
```

如果你想重新运行那部分代码，你只需要调用：

```
Session.set('doneMarkers', null); 
```

# java - 减少 Java 游戏中碰撞方法的数量

> ID：15312820
> 
> 赞同：0
> 
> 时间：2013-03-09T16:07:52.463
> 
> 标签：java, awt, collision, graphics2d, java-2d

我正在用java制作一个简单的游戏，我有很多方法可以测试两个对象是否碰撞。对象包括人、敌人、箭、墙、硬币等。我有一堆方法可以计算可能发生的每种类型的碰撞，它们看起来像这样：

```
 public boolean collide(Arrow a, Enemy b)
    {
        Rectangle a1 = a.getBounds();
        Rectangle b1 = b.getBounds();
        if(a1.intersects(b1)) return true;
        else return false;
    } 
```

有没有创建一个通用方法？我尝试使用对象 a 和对象 b 作为参数，但编译器认为它找不到对象的 getBounds()。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T16:12:03.187

您可以执行以下操作：

```
public boolean collide(HasBounds a, HasBounds b){... 
```

使用界面：

```
public interface HasBounds{
  Rectangle getBounds();
} 
```

你应该在你的对象上定义`Arrow`，`Enemy`等等......（你可能已经有一个适合的对象层次结构）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T16:15:03.727

你觉得这怎么样..

```
 public boolean collide(Rectangle a1, Rectangle b1)
 {
        return a1.intersects(b1);
 } 
```

或者可能是创建一个界面

```
public interface CanCollide {
   Rectangle getBounds();
} 
```

并在方法中使用它...

```
 public boolean collide(CanCollide a, CanCollide b)
 {
     Rectangle a1 = a.getBounds();
     Rectangle b1 = b.getBounds();
     if(a1.intersects(b1)) return true;
     else return false;
 } 
```

希望你觉得它有用。

谢谢！

@leo。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-09T16:14:34.853

只需使用方法：Rectangle2D getShape() 创建抽象类 GameObject。此方法可能如下所示：

```
abstract class GameObject {
    private Image image;

    GameObject(String path) {
        try {
          image = ImageIO.read(new File(path));
        } catch (IOException ex) {}
    }

    Rectangle2D getShape() {
       return new Rectangle2D.Float(0, 0, (int)image.getWidth(), (int)image.getHeight());
    }
} 
```

Player、Enemy、Arrow、Wall 将是 GameObject 类的子类

# java - 在Java问题中使用JLayer在线程中仅播放一个mp3文件

> ID：15312822
> 
> 赞同：0
> 
> 时间：2013-03-09T16:07:58.347
> 
> 标签：java, multithreading, mp3, javasound, jlayer

我正在使用带有 GUI 的 Java 编写的音频播放器。为了播放 mp3 文件，我选择了 javazoom 的 JLayer 库，因为我看到它非常流行和使用。我制作了 GUI，设法从播放列表中播放选定的 mp3 文件。

我的问题是，如果我多次按下播放按钮或播放列表中的文件，它将开始播放歌曲的次数与我按下它的次数一样多，我想在同一个线程中播放它；如果我再次按下播放按钮，我想再次播放而不是在播放当前歌曲时开始播放同一首歌曲。

这是我播放 mp3 文件的代码：

```
 public class Playing implements Runnable{

        private Player mp3Player;
        private Thread playerThread;

        public void createPlayer(FileInputStream file) throws JavaLayerException{

            mp3Player = new Player(file);

            playerThread = new Thread(this);
            playerThread.start();
    }

   @Override
   public void run(){

        try {

            mp3Player.play();
        } 
        catch (JavaLayerException ex) {

            Logger.getLogger(Playing.class.getName()).log(Level.SEVERE, null, ex);
        }
   } 
```

这是我的播放按钮方法：

```
 public void createPlayButton(){

        play = new JButton();
        playButton = new ImageIcon("D:/Audio Player/Images/playButton.png");
        play.setBounds(125, 100, 50, 50);
        play.setIcon(playButton);
        play.addActionListener(new ActionListener() {

        @Override
        public void actionPerformed(ActionEvent e) {

            for (int i = 0; i < select.getFilesPath().size(); i++){

                if (select.getFilesPath().get(i).toString().contains(playlistBody.getSongName())){

                    try {
                        mp3Player.createPlayer(new FileInputStream(new File(select.getFilesPath().get(i).toString())));
                    } catch (JavaLayerException ex) {
                        Logger.getLogger(PlayerBody.class.getName()).log(Level.SEVERE, null, ex);
                    } catch (FileNotFoundException ex) {
                        Logger.getLogger(PlayerBody.class.getName()).log(Level.SEVERE, null, ex);
                    }

                }
            }

        }
    });
} 
```

我提到我是多线程的新手，所以不要对我这么苛刻。如果我不能用 JLayer 做到这一点，请向我推荐一个可以播放 mp3 文件的好库。提前感谢您，我正在等待您的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T13:52:22.083

我用线程解决了我的问题；我会提出解决方案，也许会帮助某人。

```
 static int fileRunning = 0;

     public void playMp3(FileInputStream file) throws JavaLayerException{

         if (fileRunning == 0){

             mp3Player = new Player(file);

             playerThread = new Thread(this);
             playerThread.start();

             fileRunning = 1;

         }
     } 
```

所以主要的想法是，当我开始播放歌曲时，int 将取值为 1，并且不会为 0，因此无法创建更多线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-27T16:24:47.610

按下播放按钮后使用此功能，一旦播放器启动，线程已启动，该按钮将禁用，并在歌曲完成后再次启用

```
 yourplaybutton.setEnabled(false); 
```

# c - 专业的数组处理

> ID：15312827
> 
> 赞同：1
> 
> 时间：2013-03-09T16:08:17.280
> 
> 标签：c, arrays, malloc

我是一个没有经验的 C 程序员：我想要所有低于 5000 且是 5 的倍数的数字。这是我目前的做法：

```
int main()
{
    int i;
    const int max =5000-1;
    for(i=2; i<(max+1); i++)
    {
        if(!(i%5))
        {
            printf("%d\n", i);
        }
    }
    return 0;
} 
```

假设我希望它们都列在一个数组中。我能做的只是预先分配一个整数数组并填写各种位置。当然，我无法事先知道确切的所需长度，所以我会高估它的长度。

但是，我来自 C++ 背景，所以通常我会做的是推回一个向量，一切都干净整洁。但是在 C 中做到这一点的专业方法是什么？你们会预先分配还是动态调整数组的大小？

我目前正在使用 Herbert Schildt 的“Turbo C/C++”，我确信当我深入研究时会有更好的（和最新的）参考。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T18:14:54.330

`realloc`做你所说的一切。分配一个数组，增加一个数组，缩小一个数组：这一切都完成了。

```
int max = 5000; /* why subtract one if you have to add one to use it? */
int *arr = NULL;
int i;

arr = realloc(arr, max * sizeof *arr); /* allocate generous array */
for (i = 0; i < max; i++) {
    /* ... */
}
max = 10000;
arr = realloc(arr, max * sizeof *arr); /* grow array */

max = 100;
arr = realloc(arr, max * sizeof *arr); /* shrink array */ 
```

现在有一些流行的建议，您应该始终将返回值保存`realloc`为一个单独的变量，并在覆盖您的真实指针变量之前检查它是否为 NULL。这是因为在某些奇怪的情况下 realloc 可能会失败，即使在像缩小数组这样无害的情况下也是如此。如果 malloc 子系统是使用固定大小的存储桶实现的，则可能会发生这种情况。如果根本没有更多可用的“小”区域，则使用固定大小的存储桶系统的收缩请求可能会失败。

如果`realloc`失败，则返回 NULL，但原始分配保持不变。如果您只是将返回值写入指针变量，则该数据将丢失。所以，一般来说，你应该尝试这样做：

```
int *tmp;
tmp = realloc(arr, max * sizeof *arr);
if (tmp) {
    arr = tmp;
} else {
    /* maybe issue an error message? */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T17:21:10.007

如果你想分配完美的大小，你可以试试这个：

```
 #include <stdio.h>
    #include <stdlib.h>

    int main(){

        int i, j;
        int max = 5000;
        int * ourNumbers = 0;
        int count = 0;

        for(i = 2; i < max; i++){

            if (i % 5 == 0){

                count += 1;
            }
        }

        printf("\ncount = %d\n", count);

        ourNumbers = (int *) malloc(sizeof (int) * count);

        // and after you can populate your array with those values;
        // like this you will allocate the exact memory

    } 
```

我知道这不是那么有效，但我希望它会帮助你:)

# c++ - 如何通过访问计算机或 gpu 内存来提取具有像素 rgb 颜色的矩阵（从整个屏幕）？

> ID：15312828
> 
> 赞同：2
> 
> 时间：2013-03-09T16:08:17.833
> 
> 标签：c++, opengl, colors, pixel, rgb

我正在开发一个需要操纵整个屏幕上像素的 rgb 颜色的迷你项目。到目前为止我提出的解决方案是连续截屏并通过一些处理找到 rgb 颜色。它足够快，但由于屏幕截图部分，它需要大量的 cpu 使用。

所以，我想知道是否有一种方法可以使用 C++ 库、opengl* 或其他方法从计算机内存或 gpu 内存中提取我需要的数据（以矩阵形式）。

我正在使用 Windows 7 64 位，但如果解决方案是跨平台（windows/linux/mac），我会喜欢它。如果该解决方案可以用 C/C++/Java/Python 实现（这些都可以），那也很好。

*上周我做了一些研究，我认为opengl不可能。不过，我不太确定……

**编辑**现在我有 Java 和 Python 中的工作代码，可以截取我的整个显示器的屏幕截图并平均像素的 rgb 颜色。在 java 中我使用处理和机器人库，在 python 中我使用 PIL。在 java 中，我使用 createScreenCapture() 抓取图像并使用 getRGB() 读取值。在 python 中，我使用 ImageGrab.grab() 抓取图像，加载对象并读取元组中的值。

作为示例的python代码是这样的：

```
from PIL import Image
from PIL import ImageGrab
import operator

#######################################
#scree resolution
width = 1920
height = 1080
step = 10
#######################################

def process(pix):
    temp = (0, 0, 0)
    count = 0
    for i in range(0, width, step):
        for j in range(0, height, step):
            temp = tuple(map(operator.add, temp, pix[i,j]))
            count += 1
    return (int(temp[0]/count), int(temp[1]/count), int(temp[2]/count))

while True:
    img=ImageGrab.grab()
    pix = img.load()
    res = process(pix)
    print(res) 
```

但是，此代码仅适用于 Windows（由于 imageGrab）...

# c - 在 C 中使用常量时遇到问题

> ID：15312829
> 
> 赞同：0
> 
> 时间：2013-03-09T16:08:20.500
> 
> 标签：c, makefile, constants

在我的原型文件 proto.h 中，我有

```
#define LOOP_LIMIT 90.00
#define PI 3.14159

#ifndef _PROTO_H
#define _PROTO_H

#include <stdio.h>
#include <math.h>

#include "get_problem.c"
#include "deg_to_rad.c"
#include "evaluate_sin.c"
#include "evaluate_cos.c"
#include "evaluate_tan.c"

int main(void);
int get_problem();
double deg_to_rad(int deg);
void evaluate_sin(int deg);
void evaluate_cos(int deg);
void evaluate_tan(int deg);

#endif 
```

在我的lab7.c 中，我有我的主要功能，并且包含了proto.h。当我尝试使用“make”命令在 Linux 上编译时，我收到以下消息：

> gcc -c deg_to_rad.c deg_to_rad.c：在函数“deg_to_rad”中：
> 
> deg_to_rad.c:2：错误：“PI”未声明（在此函数中首次使用）
> 
> deg_to_rad.c:2: error: (每个未声明的标识符只报告一次
> 
> deg_to_rad.c:2：错误：对于它出现的每个函数。）
> 
> 制作：*** [deg_to_rad.o] 错误 1

我真的不明白这一点，因为我的主要功能正确使用了 LOOP_LIMIT，但 PI 不起作用。

deg_to_rad.c:

```
double deg_to_rad(int deg) {
    double rad = (PI * deg) / 180;
    return rad;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T16:10:39.760

```
#include "get_problem.c"
#include "deg_to_rad.c"
#include "evaluate_sin.c"
#include "evaluate_cos.c"
#include "evaluate_tan.c" 
```

**不不，你不应该包含 C 文件！！！**

通常，您在头文件（.h）中声明函数，在源文件（.c）中定义它们，并将头文件包含在源文件（.c）中，只要您需要使用这些函数。

另外，显示`deg_to_rad()`函数的定义，编译器清楚地告诉你问题出在哪里，我怀疑你试图调用函数中的其他函数之一。
编译器正确地抱怨，因为函数是在包含源文件的点 *之后声明的。*

您需要遵循上面提到的头文件和源文件的一般做法。

# jboss - 强制退出播放框架应用程序

> ID：15312830
> 
> 赞同：4
> 
> 时间：2013-03-09T16:08:25.683
> 
> 标签：jboss, playframework, playframework-2.0, port

我无法使用典型的错误消息绑定到我的常规端口 9000：

```
[error] org.jboss.netty.channel.ChannelException: Failed to bind to: /0.0.0.0:9000 
```

但是，我目前没有在该端口上运行任何东西..

检查 9000 列出的端口：

```
sudo lsof -i -P | grep "9000" 
```

给我：

```
java       2642      ow  137u  IPv6 0xe9a3870d7acf02fd      0t0    TCP *:9000 (LISTEN)
java       2642      ow  142u  IPv6 0xe9a3870d7e430f1d      0t0    TCP localhost:9000->localhost:62403 (CLOSE_WAIT)
java       2642      ow  156u  IPv6 0xe9a3870d856676dd      0t0    TCP localhost:9000->localhost:60860 (CLOSE_WAIT) 
```

知道如何关闭它吗？

* * *

**编辑**

原来谷歌浏览器正在使用我的 9000，这有点奇怪

```
Google    51558      ow  125u  IPv4 0xe9a3870d8683581d      0t0    TCP localhost:61238->localhost:9000 (ESTABLISHED) 
```

当我杀死它时，chrome崩溃了

猜猜我将不得不开始使用不同的端口！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-09T16:33:11.637

游戏不再运行了？

否则作为参考，可以找到 Play 进程并使用or`ps auxwww | grep play`杀死它。`kill <pid>``kill -9 <pid>`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-04-24T13:57:05.810

我对使用 scalaVersion := "2.11.7" 的播放框架有同样的问题。

```
java      19068  ecamur  342u  IPv6 40371923      0t0  TCP *:9000 (LISTEN) 
```

我用下面的评论杀死了

```
kill -9 19068 
```

似乎什么都没有坠毁。我运行应用程序没有任何问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T16:16:56.710

当我的 Play 应用程序挂出而不释放套接字时，我经常遇到同样的问题。

我找到的最简单的解决方案是重新启动网络接口。

```
ifconfig en0 down
ifconfig en0 up 
```

（假设`en0`是你的主界面）

# mysql - MySQL 建议建立具有连接表的数据库

> ID：15312833
> 
> 赞同：0
> 
> 时间：2013-03-09T16:08:41.847
> 
> 标签：mysql, sql

我想建立一个数据库，在表中保存有关用户的信息：

```
User
 -username (primary key)
 -first_name
 -second_name
 -Image 
```

在这个数据库中将有另一个表，如下所示：

```
Image
 -name (primary key)
 -file_name 
```

# 我想要达到的目标

我希望每个用户都将 Image 作为其字段之一。我知道要做到这一点，我必须连接表格。

# 到目前为止我所知道的

首先，我应该将表定义为 InnoDB，然后使用 phpmyadmin 单击关系视图。

# 问题

如何使用 phpmyadmin 实现我上面描述的关系？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T16:28:47.457

如果用户只有一张图像，则它是一对一的关系。一张桌子可以做任何事情。

像这样的东西：

```
CREATE TABLE users (
  userId INT UNSIGNED NOT NULL AUTO_INCREMENT,
  userFirstName VARCHAR(80) NOT NULL,
  userSecondName VARCHAR(80),
  imageName VARCHAR(100) NOT NULL,
  PRIMARY KEY (userId)
) ENGINE=MyISAM DEFAULT CHARSET=utf8; 
```

多个图像必须对一个用户，存在一对多的关系。因此，您可以创建两个表和一个查找表。

像这样：

```
CREATE TABLE users (
   userId INT UNSIGNED NOT NULL AUTO_INCREMENT,
   userFirstName VARCHAR(80) NOT NULL,
   userSecondName VARCHAR(80),
   imageName VARCHAR(100) NOT NULL,
   PRIMARY KEY (userId)
) ENGINE=MyISAM DEFAULT CHARSET=utf8;

CREATE TABLE images (
   imageId INT UNSIGNED NOT NULL AUTO_INCREMENT,
   imageName VARCHAR(100) NOT NULL,
   PRIMARY KEY (imageId)
) ENGINE=MyISAM DEFAULT CHARSET=utf8; 
```

查找表：

```
CREATE TABLE user_image ( 
   userId INT UNSIGNED,
   imageId INT UNSIGNED
) ENGINE=MyISAM DEFAULT CHARSET=utf8; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T16:12:17.323

您应该在 table 上放置一个`Image`将在 table 上引用的列`User`，例如，一个用户可以有多个图像。前任，

**用户**

*   用户名（*主键*）
*   名
*   第二个名字

**图片**

*   名称（*主键*）
*   文件名
*   用户名（*外键*）

* * *

翻译成 DDL：

```
CREATE TABLE `User`
(
    userName VARCHAR(15),
    first_name VARCHAR(15),
    second_name VARCHAR(15),
    CONSTRAINT tb_pk PRIMARY KEY (userName),
    CONSTRAINT tb_uq UNIQUE (first_name, last_name)
);

CREATE TABLE `Image`
(
    name VARCHAR(15),
    file_name VARCHAR(75),
    userName VARCHAR(15)
    CONSTRAINT tb_pk PRIMARY KEY (name),
    CONSTRAINT tb_fk FOREIGN KEY (userName) REFERENCES `User`(userName)
); 
```

# mysql - 测验应用程序的数据库设计

> ID：15312839
> 
> 赞同：4
> 
> 时间：2013-03-09T16:09:38.817
> 
> 标签：mysql, sql, database, database-design, database-table

我对我的测验应用程序的数据库设计不太了解。请指导我 -

我的应用程序 UI 会是这样的 -

![图片](../Images/90f4d73085a347f09d3082e4ad98e5d2.png)

我的`DB`桌子 -

**用户**-

```
user_id
user_name
user_email
user_password
user_registration_date
user_active 
```

**问题**-

```
question_id
question_title
question_category_id
question_level_id
question_author_id
question_status
question_create_date 
```

**类别**-

```
cat_id
cat_name
cat_author
cat_create-date
cat_status 
```

**水平**-

```
level_id
level_name 
```

**答案**——

```
????????? 
```

**查询**-

我被答案表困住了..意味着我不确定要在答案表中`data type`为此设置哪些列。

我的答案只会是选项格式，意味着 1,2,3,4 选项或选项中的真假没有文本类型答案..只是一个选项选择。

请指导我，因为我坚持这一点。

请指出上述表格中是否也有问题，并让我知道为级别创建单独的表格是否是`OK`坏的（级别只会是 - 初级、中级、高级）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-09T16:17:57.750

过去，当我这样做时，我以这种方式处理答案：

表：QuestionAnswers
字段：ID、QuestionID、AnswerText（字符串）、AnswerCorrect（布尔）

表：QuestionAnswerResponses
字段：ID、QuestionAnswerID（链接到上面的 ID 表）、Userid、AnswerSelected (bool)、TimeAnswered (datetimr)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T16:21:09.893

首先，在表中包含的每个字段中重复表名有点多余。所以我建议不要这样做。唯一可能的例外是主键/自动增量字段，因为当两个表都有一个 ID 字段时，有些人发现必须键入 myTable.id 会让人感到困惑或额外的工作。我不确定为什么 myTable.id 比 myTable_id 更有效，但是你有它。

我过去使用的是

table **Distractor**（电子学习类型称为问题的可用答案）
id
question_id（问题表的 FK）
text（要在屏幕上显示该答案的文本）
isCorrect
displayOrder

如果您想要重用答案的灵活性，您会想要使用连接表，而不是在干扰项表中使用问题 id。但是，由于您想确定问题的创建日期，您可能希望使答案严格指向一个问题。

# java - xml 声明只允许在文档的开头

> ID：15312843
> 
> 赞同：2
> 
> 时间：2013-03-09T16:09:50.833
> 
> 标签：java, xml, jsp

我正在尝试从 jsp 文件中读取 xml 文件。它们都在同一个目录下，我正在使用 BufferReader 从 xml 文件中读取。我收到错误“第 3 行第 6 列错误：xml 声明仅在文档开头允许”。在网上搜索原因，我得到的只是 xml 文件不应该以新行开头，但我已经检查了我的 xml，删除了开头的每个空格。这是我程序中唯一的 xml 文件，所以我真的不知道可能是什么问题。我正在添加我的 xml 文件和我的 jsp 文件。我正在做一些错误的事情，但我只是不知道是什么。

我的 xml 文件：

```
 <?xml version="1.0"encoding="UTF-8"?>
       <quiz>
         <question type="multichoice"  >
       <name>
    <text>Name of question</text>
      </name>
     <questiontext format="html">
    <text>What is the answer to this question?</text>
     </questiontext>
     <answer fraction="100">
    <text>The correct answer</text>
    <feedback><text>Correct!</text></feedback>
     </answer>
     <answer fraction="0">
     <text>A distractor</text>
     <feedback><text>Ooops!</text></feedback>
     </answer>
         <answer fraction="0">
             <text>Another distractor</text>
             <feedback><text>Ooops!</text></feedback>
         </answer>
         <shuffleanswers>1</shuffleanswers>
         <single>true</single>
         <answernumbering>abc</answernumbering>
         </question>
            <question type="truefalse">
        <name>
              <text>Name of question</text>
            </name>
            <questiontext format="html">
            <text>What is the answer to this question?</text>
            </questiontext>
            <answer fraction="100">
               <text>true</text>
               <feedback><text>Correct!</text></feedback>
            </answer>
            <answer fraction="0">
               <text>false</text>
               <feedback><text>Ooops!</text></feedback>
            </answer>
          </question>
          <question type="numerical">
        <name>
               <text>Name of question</text>
            </name>
            <questiontext format="html">
              <text>What is the answer to this question?</text>
            </questiontext>
            <answer fraction="100">
              <text>23</text>
              <feedback><text>Feedback</text></feedback>
            </answer>
         </question>
    </quiz> 
```

xml 定义之前没有空格（文件中的第一行）。和我的jsp文件：

```
 <%@ page contentType="text/xml" %>
    <%@ page import="java.io.*" %>    
    <%
    //dump out the file
    BufferedReader in = new BufferedReader(new FileReader("questions.xml"));
    String line;
    while((line = in.readLine())!=null){
    out.print(line);
    }
    in.close();
    %> 
```

我是使用 java 进行 html 编程的新手，所以如果你能帮助我，那就太好了..thanx

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T19:31:47.317

我假设您在导航到 JSP 页面时会在浏览器中看到该错误。问题出在 JSP 顶部的页面指令中

```
<%@ page contentType="text/xml" %>
<%@ page import="java.io.*" %> 
```

由于每一个后面都有一个换行符，因此您最终会`out`在数据（由`out.println`语句写入）之前写入两个换行符，这就是错误消息说您在第 3 行有 XML 声明的原因。

删除换行符，或者将它们移动到指令内部而不是它们之间应该可以解决这个问题：

```
<%@ page contentType="text/xml"
%><%@ page import="java.io.*"
%><%
BufferedReader .... 
```

顺便说一句，对于读取文件，您可能应该使用`FileInputStream`（或更好`application.getResourceAsStream`）和`InputStreamReader`明确设置为正确的字符编码来匹配 XML 文件，而不是依赖于`FileReader`始终使用平台默认编码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-14T10:51:43.097

您可以在文档开头添加以下行：

```
<%@ page trimDirectiveWhitespaces="true" %> 
```

这应该可以解决您的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T19:55:11.647

xml文件可能有问题，检查它是否包含字节顺序标记，如果是删除它。您可以使用简单的 Notepad++ 通过编辑和检查格式化 UTF-8 而不使用 BOM 来删除它

[http://en.wikipedia.org/wiki/Byte_order_mark](http://en.wikipedia.org/wiki/Byte_order_mark)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T16:15:37.943

改变这个：

```
<?xml version="1.0"encoding="UTF-8"?> 
```

至

```
<?xml version="1.0" encoding="UTF-8"?> 
```

您忘记在`"1.0"`和之间添加空格`encoding`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-22T19:32:14.307

它是 php Storm 的一个 bug 如果你使用 phpstorm ， phpstorm 会让你的代码从第二行开始（不管你做什么）！所以你应该去你的主机并通过直接管理员或 cpanel 编辑器编辑你的文件，然后把你的

```
 <?xml version=“1.0” encoding=“UTF-8” ?> 
```

第一行代码，“希望有帮助”</p>

# java - 从另一个类调用 UIWebView 方法

> ID：15312846
> 
> 赞同：2
> 
> 时间：2013-03-09T16:10:16.507
> 
> 标签：java, ios, xcode, uiviewcontroller, uiwebview

好的，我相信这很简单，但我会尝试详细解释我所做的一切，以便有人可以向我展示我的错误。Xcode，iOS SDK 6.1，我正在使用 StoryBoard。

- 我有带有一些按钮的 MenuViewController（视图控制器）。在身份检查器中，我设置了我的自定义类。每个按钮在 MenuViewController.h 中都有它的出口（使用 Ctrl 拖动）。每个按钮都是在 MenuController.m 中合成的，到目前为止我唯一要做的就是在 MenuViewController.m 的 -viewDidLoad 方法中设置背景

-我有另一个 WebViewController（带有导航栏、条形按钮和 UIWebView 的视图控制器）。我还为该 ViewController 创建了新类并将其设置在身份检查器中。WebView 在 WebViewController.h 中有它的出口，它在 WebViewController.m 中合成

- 我也通过 Xcode 在这两个 ViewController 之间建立了联系。我的 MenuViewController 中的一个按钮正在打开 WebViewController（我已经通过 Ctrl+将该按钮拖动到 WebViewController 并且样式设置为 Modal 来完成此操作）。我对 WebViewController 的 NavigationBar 中的按钮做了同样的事情，在单击时建立了打开 MenuViewController 的连接（类似于后退按钮）。

- 现在，当 WebViewController 中的 -viewDidLoad 方法被调用时，WebView 正在打开一些网页。

**我想做的是在我的 MenuViewController 中设置 buttonPressed 操作，例如，如果按下一个按钮，我想切换到 WebViewController 并打开一些特定的 URL。如果按下另一个按钮，我还想打开同一个 WebViewController 并加载一些不同的 URL。这应该不难，但我只是希望有人向我展示从另一个类调用 webView 方法的正确方法。我是Objective C的新手，到目前为止我知道的唯一语言是Java，所以我对这个.h.m的东西有点困惑，不知道在哪里正确声明什么。此外，如果有人可以比较 Objective-C 中的某些东西在 Java 中的外观，那将非常有助于理解。**

谢谢各位！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T18:21:34.640

我不使用情节提要并做这样的事情：

在您的 WebViewController .m 文件中创建一个方法，如下所示：

```
-(id)initWithURL:(NSString *)urlstring
{
    self = [super init];
    receivedURL = [NSURL URLWithString:urlstring];
    return self;
} 
```

并在 .h 文件中声明一个 NSURL 对象

```
NSURL *receivedURL; 
```

就在@end上方

```
-(id)initWithURL:(NSString *)urlstring; 
```

并在 WebViewController 的 viewDidLoad 方法中执行

```
[webview loadRequest:[NSURLRequest requestWithURL:receivedURL]]; 
```

现在在您的 MenuViewController 中，每当执行按钮操作时，请执行以下操作：

```
WebViewController *webViewObj = [[WebViewController alloc]initWithURL:yourURLString];
[self presentModalViewController:webViewObj animated:YES]; 
```

# android - error with null pointer

> ID：15312850
> 
> 赞同：1
> 
> 时间：2013-03-09T16:10:38.070
> 
> 标签：android, nullpointerexception, runtime-error

I got null exception errors I need some help to figure it out as I tried to update my Manifest and it's seems fine but still getting the error

here is the logcat

```
03-09 16:00:53.803: E/JSON(540): {"tag":"login","success":1,"error":0,"uid":"513b5349d86546.88432881","user":{"name":"p","email":"p","created_at":"2013-03-09 23:20:41","updated_at":null}}
03-09 16:00:54.863: E/AndroidRuntime(540): FATAL EXCEPTION: main
03-09 16:00:54.863: E/AndroidRuntime(540): java.lang.RuntimeException: Unable to start activity     ComponentInfo{com.mohammed.watzIslam/com.mohammed.watzIslam.maincontentview}: java.lang.NullPointerException
03-09 16:00:54.863: E/AndroidRuntime(540):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
03-09 16:00:54.863: E/AndroidRuntime(540):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
03-09 16:00:54.863: E/AndroidRuntime(540):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
03-09 16:00:54.863: E/AndroidRuntime(540):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
03-09 16:00:54.863: E/AndroidRuntime(540):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-09 16:00:54.863: E/AndroidRuntime(540):  at android.os.Looper.loop(Looper.java:123)
03-09 16:00:54.863: E/AndroidRuntime(540):  at android.app.ActivityThread.main(ActivityThread.java:4627)
03-09 16:00:54.863: E/AndroidRuntime(540):  at java.lang.reflect.Method.invokeNative(Native Method)
03-09 16:00:54.863: E/AndroidRuntime(540):  at java.lang.reflect.Method.invoke(Method.java:521)
03-09 16:00:54.863: E/AndroidRuntime(540):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
03-09 16:00:54.863: E/AndroidRuntime(540):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
03-09 16:00:54.863: E/AndroidRuntime(540):  at dalvik.system.NativeStart.main(Native Method)
03-09 16:00:54.863: E/AndroidRuntime(540): Caused by: java.lang.NullPointerException
03-09 16:00:54.863: E/AndroidRuntime(540):  at com.mohammed.watzIslam.maincontentview.onCreate(maincontentview.java:28)
03-09 16:00:54.863: E/AndroidRuntime(540):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
03-09 16:00:54.863: E/AndroidRuntime(540):  at  android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
03-09 16:00:54.863: E/AndroidRuntime(540):  ... 11 more 
```

and this is my java file that can't be launched

```
import android.app.Activity;
import android.content.ActivityNotFoundException;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class maincontentview extends Activity {

public void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

    String[] contentarray = getResources().getStringArray(R.array.contnarr);
    this.setListAdapter(new ArrayAdapter<String>(this, R.layout.maincontentview,    R.id.label1, contentarray));

 ListView lv = getListView();

 // listening to single list item on click
 lv.setOnItemClickListener(new OnItemClickListener() {
   public void onItemClick(AdapterView<?> parent, View view,
       int position, long id) {
         // start different activities
       switch(position){
        case 0:
        Intent  txt = new Intent(view.getContext(),TextA.class);

          try{
            startActivity(txt);
          } catch(ActivityNotFoundException e) {
            e.printStackTrace();
          }
          break;
        case 1:
         Intent video = new Intent(view.getContext(),Videos.class);
          try{
            startActivity(video);
          }catch(ActivityNotFoundException e){
            e.printStackTrace();
          }
          break;

        default: break;

        }           

}
 });
}

    private ListView getListView() {
    // TODO Auto-generated method stub
    return null;
    }

    private void setListAdapter(ArrayAdapter<String> arrayAdapter) {
    // TODO Auto-generated method stub

    }

 } 
```

and finally the chief Manifest

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.mohammed.watzIslam"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<uses-permission android:name="android.permission.INTERNET" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
     >
    <activity
        android:name=".Mymain"
        android:label="@string/title_activity_mymain" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".DashboardActivity"
        android:label="@string/title_activity_mymain" >
        <intent-filter>
            <action android:name="com.mohammed.watzIslam.DashboardActivity" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
     <!--  Login Activity -->
    <activity
        android:label="Login Account" 
        android:name=".LoginActivity"></activity>

    <!--  Register Activity -->
    <activity
        android:label="Register New Account" 
        android:name=".RegisterActivity"></activity>
    <activity
        android:label="application interface" 
        android:name=".Appinterface"></activity>
    <activity
        android:label="content list view" 
        android:name=".maincontentview"></activity>
    <activity
        android:label="forum view" 
        android:name=".Forum"></activity>

    <activity
        android:label="videos list" 
        android:name=".Videos"></activity>
    <activity
        android:label="videoa view" 
        android:name=".VideoA"></activity>
    <activity
        android:label="videob view" 
        android:name=".VideoB"></activity>

</application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T16:14:43.047

You are extending your class from the `Activity` and still you are using **`getListView()`**.

**getListView()** is used only while using **ListActivity**. For the normal Activity, you would need to use setContentView(View) to generate the layout.

Seeing your code, I think you should be using a **`ListActivity`**.

**`public class maincontentview extends ListActivity`**

# python - 修改包装器 python print 以返回类型

> ID：15312852
> 
> 赞同：2
> 
> 时间：2013-03-09T16:10:46.853
> 
> 标签：python, wrapper

我从这段代码中得到的只是，python 中的 print 是`write`方法的包装函数，`stdout`所以如果我给它一个返回类型，它也必须返回它，对吗？那我为什么不能这样做？

```
import sys
class CustomPrint():
    def __init__(self):
        self.old_stdout=sys.stdout

    def write(self, text):
        text = text.rstrip()
        if len(text) == 0: return
        self.old_stdout.write('custom Print--->' + text + '\n')
        return text
sys.stdout=CustomPrint()
print "ab" //works
a=print "ab" //error! but why? 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T16:17:50.747

在 python2.x 中，`print`是一条*语句*。所以，`a = print "ab"`是非法的语法。试试吧`print "ab"`。

在 python3 中，`print`是一个*函数*——所以你会写： `a = print("ab")`. 请注意，从 python2.6 开始，您可以`print`通过`from __future__ import print_function`.

最终，你想要的是这样的：

```
#Need this to use `print` as a function name.
from __future__ import print_function
import sys   

class CustomPrint(object):
    def __init__(self):
        self._stdout = sys.stdout
    def write(self,text):
        text = text.rstrip()
        if text:
            self._stdout.write('custom Print--->{0}\n'.format(text))
            return text
    __call__ = write

print = CustomPrint()

a = print("ab") 
```

# javascript - json响应后加载图片

> ID：15312856
> 
> 赞同：0
> 
> 时间：2013-03-09T16:11:15.823
> 
> 标签：javascript, asp.net-mvc, asp.net-mvc-3, jquery

json 响应成功后如何加载图像？

**jQuery**

```
$.post('@Url.Action("Upload", "Camera")', {
  type: 'data',
  image: canvas.toDataURL("image/png")
}, function (result) {
  if(result.success) {
    alert('The image was successfully sent to the server for processing');

    var $image = $("<img src='~/temp/" + @ViewData["CaputredImage"] + "'/>");
    $image.live("load", function () {
      $("#imageContainer").append(this);
    });

  }
}); 
```

**图像容器**

```
<div id="imageContainer"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T16:18:39.513

我可能会在从服务器发回的 JSON 中包含新提交的图像的路径，然后：

```
$.post('@Url.Action("Upload", "Camera")', {
  type: 'data',
  image: canvas.toDataURL("image/png")
}, function (result) {
  if(result.success) {
    alert('The image was successfully sent to the server for processing');

    // *** Change is on next line ***
    var $image = $("<img src='" + result.imagePath + "'/>");
    // *** Another change on the next line ***
    $image.on("load", function () {
      $("#imageContainer").append(this);
    });

  }
}); 
```

另请注意，我将`live`呼叫更改为`on`. 首先，这不是正确的使用方式`live`，其次，它已被弃用一段时间，现在实际上已被删除。

另外，你在那里有一个竞争条件（尽管在这种情况下，一个不太可能真正给你带来问题的条件）：`load`直到你指定了它*的*`src`. 尽管浏览器上的 JavaScript 是单线程的（除非您使用 Web Worker），但*浏览*器*不是*. 如果它已经在缓存中有图像（同样，在这种情况下不太可能），它可以`load`在你钩住它之前触发事件 - 并且看到没有附加到事件的处理程序，它不会在 JavaScript 下一次空闲时将它们排队运行.

此外（在另一个极端），您正在等待将图像添加到文档中，直到它被加载；如果图像不在任何文档中，我不能 100% 确定所有浏览器都会加载图像。

所以对于它的价值：

```
$.post('@Url.Action("Upload", "Camera")', {
  type: 'data',
  image: canvas.toDataURL("image/png")
}, function (result) {
  if(result.success) {
    alert('The image was successfully sent to the server for processing');

    // *** Changes start here ***
    var $image = $("<img>");
    $image.css({
        position: "absolute",
        left: -10000,
        top: 0
    });
    $image.attr("src", image.imagePath);
    $image.appendTo(document.body);
    $image.on("load", function () {
      $image.remove();
      $("#imageContainer").append("<img src='" + result.imagePath + "'>");
    });
    // *** End of changes ***
  }
}); 
```

这会在`img`页面外创建一个元素，但在文档中，挂钩图像加载，设置`src`, 并在加载时删除该`img`元素，以支持新创建的未应用 CSS 的元素。（您可以将这些调用链接在一起，为清楚起见将它们分开。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T16:20:06.517

```
var img = new Image();
img.onload = function () {
   $("#imageContainer").append(img);
}); 
img.src ='~/temp/' + @ViewData["CaputredImage"] ; 
```

# java - 获取蓝牙信号强度

> ID：15312858
> 
> 赞同：45
> 
> 时间：2013-03-09T16:11:17.180
> 
> 标签：java, android

我想获取连接到我手机的另一台设备的蓝牙信号强度，

**如何获取蓝牙信号强度？**

我试图通过谷歌搜索很多，但没有找到任何答案。

有人知道我该如何实施吗？

这是我的活动：

```
public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        registerReceiver(receiver, new IntentFilter(BluetoothDevice.ACTION_FOUND));

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    private final BroadcastReceiver receiver = new BroadcastReceiver(){
        @Override
        public void onReceive(Context context, Intent intent) {

            String action = intent.getAction();
            if(BluetoothDevice.ACTION_FOUND.equals(action)) {
                int rssi = intent.getShortExtra(BluetoothDevice.EXTRA_RSSI,Short.MIN_VALUE);
                Toast.makeText(getApplicationContext(),"  RSSI: " + rssi + "dBm", Toast.LENGTH_SHORT).show();
            }
        }
    };

} 
```

我的清单文件中也有蓝牙权限。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-03-09T16:31:36.587

要获取信号，您可以检查蓝牙 RSSI，您可以读取已连接设备的 RSSI，或执行蓝牙发现以检查附近任何设备的 RSSI。

基本上，蓝牙发现是向范围内的所有站点广播以进行响应。随着每个设备的响应，Android 会触发一个 ACTION_FOUND 意图。在此意图中，您可以通过 getExtra EXTRA_RSSI 获取 RSSI。

请注意，并非所有蓝牙硬件都支持 RSSI。

还相关：[关于 Android 蓝牙 RSSI 的 Android IRC 办公时间问题](https://stackoverflow.com/questions/2149776/android-irc-office-hours-question-about-android-bluetooth-rssi) **这是一个蓝牙经典广播接收器示例**

```
private final BroadcastReceiver receiver = new BroadcastReceiver(){
    @Override
    public void onReceive(Context context, Intent intent) {

        String action = intent.getAction();
        if(BluetoothDevice.ACTION_FOUND.equals(action)) {
            int  rssi = intent.getShortExtra(BluetoothDevice.EXTRA_RSSI,Short.MIN_VALUE);
            Toast.makeText(getApplicationContext(),"  RSSI: " + rssi + "dBm", Toast.LENGTH_SHORT).show();
        }
    }
}; 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2013-08-05T00:35:36.960

我认为您的代码还可以，但是您需要实施`startDiscovery()`才能看到结果。

事实是，这`BluetoothDevice.EXTRA_RSSI`仅适用于发现设备，当您连接到其中一个设备时，您将无法再获得其 RSSI。

在这里，我开发了一个非常简单的 Activity 示例，可让您查看附近设备的 RSSI。您首先需要在布局中添加一个 TextView 和一个 Button，然后启用蓝牙适配器，然后只需单击该按钮。

```
package com.in2apps.rssi;

import android.os.Bundle;
import android.app.Activity;
import android.bluetooth.BluetoothAdapter;
import android.bluetooth.BluetoothDevice;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;

public class RSSIActivity extends Activity {

    private BluetoothAdapter BTAdapter = BluetoothAdapter.getDefaultAdapter();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_rssi);
        registerReceiver(receiver, new IntentFilter(BluetoothDevice.ACTION_FOUND));

        Button boton = (Button) findViewById(R.id.button1);
        boton.setOnClickListener(new OnClickListener(){
            public void onClick(View v) {
                BTAdapter.startDiscovery();
            }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_rssi, menu);
        return true;
    }

    private final BroadcastReceiver receiver = new BroadcastReceiver(){
        @Override
        public void onReceive(Context context, Intent intent) {

            String action = intent.getAction();
            if(BluetoothDevice.ACTION_FOUND.equals(action)) {
                int rssi = intent.getShortExtra(BluetoothDevice.EXTRA_RSSI,Short.MIN_VALUE);
                String name = intent.getStringExtra(BluetoothDevice.EXTRA_NAME);
                TextView rssi_msg = (TextView) findViewById(R.id.textView1);
                rssi_msg.setText(rssi_msg.getText() + name + " => " + rssi + "dBm\n");
            }
        }
    };
} 
```

它看起来是这样的：

![RSSI 检测 - Android 示例](../Images/3a7fe015eff77caecf7773fb3ff85ce8.png)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-03-07T23:28:08.380

API 18 (Android 4.3) 中引入了必要的 API。您需要调用[`BluetoothGatt#readRemoteRssi()`](https://developer.android.com/reference/android/bluetooth/BluetoothGatt.html#readRemoteRssi())以发起请求。响应显示在[`BluetoothCallback#onReadRemoteRssi()`](https://developer.android.com/reference/android/bluetooth/BluetoothGattCallback.html#onReadRemoteRssi(android.bluetooth.BluetoothGatt,%20int,%20int))回调中。（即处理连接、发现、特征读取等的回调对象）

不再需要广播接收器的东西。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-03-27T09:47:35.680

您可以使用*[蓝牙](https://developer.android.com/reference/android/bluetooth/BluetoothDevice.html)*设备的 rssi 获取蓝牙设备的信号强度。这可以使用*[BluetoothAdapter](https://developer.android.com/reference/android/bluetooth/BluetoothAdapter.html)*来获取有界设备。

一旦你有了你感兴趣的，只需调用它的*[connectGatt()](https://developer.android.com/reference/android/bluetooth/BluetoothDevice.html#connectGatt(android.content.Context,%20boolean,%20android.bluetooth.BluetoothGattCallback))*并定义一个新的*[BluetoothGattCallback](https://developer.android.com/reference/android/bluetooth/BluetoothGattCallback.html)*。这是一个提供很少方法覆盖的接口。下面写的两个将允许您在每次连接状态更改时拥有 rssi。

```
@Override
protected void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);

  // Get the default bluetoothAdapter to store bonded devices into a Set of BluetoothDevice(s)
  BluetoothAdapter bluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
  // It will work if your bluetooth device is already bounded to your phone
  // If not, you can use the startDiscovery() method and connect to your device
  Set<BluetoothDevice> bluetoothDeviceSet = bluetoothAdapter.getBondedDevices();

  for (BluetoothDevice bluetoothDevice : bluetoothDeviceSet) {
    bluetoothDevice.connectGatt(this, true, new BluetoothGattCallback() {
      @Override
      public void onConnectionStateChange(BluetoothGatt gatt, int status, int newState) {
        super.onConnectionStateChange(gatt, status, newState);
      }
      @Override
      public void onReadRemoteRssi(BluetoothGatt gatt, int rssi, int status) {
        if(status == BluetoothGatt.GATT_SUCCESS)
          Log.d("BluetoothRssi", String.format("BluetoothGat ReadRssi[%d]", rssi));
      }
    });
  }

} 
```

注意：此示例需要在清单文件中声明以下权限

```
<uses-permission android:name="android.permission.BLUETOOTH" /> 
```

# ruby-on-rails - 如何创建包含查询参数的命名路由？

> ID：15312859
> 
> 赞同：0
> 
> 时间：2013-03-09T16:11:20.800
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一条路线来匹配这个：

> /en/companies/:id/设置

但我想要一个命名路由来生成这个路径：

> /en/companies/:id/settings?setting=resources

我有一些 JS 在最后获取参数。我想创建一个可以在我的代码中使用的路径，如下所示：

> 资源设置公司路径

现在我一直在这样做：

> settings_company_path(id) + "?setting=resources"

我已经查看了高级路由，但在这种情况下似乎没有任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T16:12:52.840

你可以这样做：

```
settings_company_path(id, setting: 'resources') 
```

这与效果相同

```
settings_company_path(id) + "?setting=resources" 
```

但是您可以轻松添加更多参数而不会弄乱`&`, `?`。此外，您不必担心参数编码。

# javascript - 无法通过 keyup 功能在选项值中使用文本

> ID：15312863
> 
> 赞同：-2
> 
> 时间：2013-03-09T16:11:30.250
> 
> 标签：javascript, jquery

我希望能够捕获到 name=`formdesc`一个选项值，它是文本而不是数字，但我需要数字来计算下面的价格点。有没有办法改变它，以便它正确计算（在JS下面）并将选项值捕获为文本而不是数字（HTML）？

我需要的样本：

```
 <select id="apparelType" name="formdesc">
    <option selected="selected" value="na">Select</option>
    <option value="tshirt">T-Shirt</option> 
```

但是破坏了我的 JS！

HTML：（我现在拥有的）

```
<select id="apparelType" name="formdesc">
    <option selected="selected" value="na">Select</option>
    <option value="0">T-Shirt</option>
    <option value="1">Shorts</option>
    <option value="2">Hat</option>
    <option value="3">Bag</option>
</select>
<input id="numb" type="number" name="formterm">
<id="tot"><Total: $0.00&nbsp;> 
```

JS：

```
<script type="text/javascript">// <![CDATA[
// 
$(document).ready(function(){
                          $('#numb').keyup(function(){
                                                        var appVal = new Array();
                                                        appVal[0] = 15; <--[tshirt]
                                                        appVal[1] = 20;
                                                        appVal[2] = 25;
                                                        appVal[3] = 30;
                                                        var cost = 0;
                                                        var fmapVal = $('#apparelType').val();
                                                        if (fmapVal == 'na')
                                                        { alert ('Please select an apparel type.');
                                                        }
                                                        else
                                                        {
                                                            cost = appVal[fmapVal];
                                                        };
                                                        //alert(cost);
                                                        var getNumb = $('#numb').val();
                                                        var baseTotal = cost * getNumb;
                                                        var getTax = baseTotal * .06;
                                                        var getTotal = baseTotal + getTax;
                                               $('#tot').html('Total: $' +  getTotal.toFixed(2));
                                                        $('#formbal').val(getTotal.toFixed(2));
                                         });
           });
  // ]]></script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T16:20:39.787

如果您需要使用选项名称，那么`val`这不是您所需要的。而是试试这个：

```
var optionName = $('#apparelType').find('option:selected').text(); 
```

希望我正确地理解了你（虽然这很难）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T16:52:55.883

```
<form>
<select id="apparelType" name="apparelType">
    <option selected="selected" value="na">Select</option>
    <option value="0">T-Shirt</option>
    <option value="1">Shorts</option>
    <option value="2">Hat</option>
    <option value="3">Bag</option>
</select>

<label for="numb">Total: <span>$</span></label>
<input id="numb" type="number" name="formterm" value="0.00" >
<input id="pretaxTotal" type="hidden" value="0.00" >
<br>
<textarea id="formdesc" name="formdesc" rows="12" cols="20"></textarea>
</form>

<script type="text/javascript">

  $('#apparelType').change(function(){
    var apparelType = $('#apparelType');
    var fmapVal = apparelType.val();

    if (fmapVal == 'na') {
      alert('Please select an apparel type.');
    } else {
      var appVal = [ 15, 20, 25, 30 ];
      var description = apparelType.find('option:selected').text();
      var cost = appVal[fmapVal];

      var pretaxTotal = parseInt($('#pretaxTotal').val());
      var subtotal = pretaxTotal + cost;
      var updatedTotal = ( subtotal * 1.06 ).toFixed(2);

      $('#pretaxTotal').val(subtotal);
      $('#numb').val(updatedTotal);

      $('#formdesc').append(description + '\n');
    }
  });

  /* The following code is cosmetic. Makes dollar sign appear to be inside the input field */
  $('label > span').css('position','relative').css('left','20px').css('font-size','80%');
  $('input[type=number]').css('padding-left','15px');

</script> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-09T16:20:50.283

可以使用带有 case 语句的函数从传递的文本字符串中获取成本：

```
function getVal(value) {
    switch(value) {
        case 'tshirt':
            cost = 15;
            break;
        case 'shorts':
            cost = 15;
            break;
        case 'hat':
            cost = 15;
            break;
        case 'bag':
            cost = 15;
            break;
        default:
            cost = 'Please select an option...';
            break;
    }
    return cost;
} 
```

然后在您的`if`声明中使用`cost = getVal(fmapVal);`.

# http - REST 服务器对授权的响应

> ID：15312865
> 
> 赞同：1
> 
> 时间：2013-03-09T16:11:35.530
> 
> 标签：http, rest, basic-authentication

我有一个关于 REST 的问题。我正在创建一个服务，其中客户端使用基本授权（标头`Authorization: Basic user:password`）发送 HTTP 请求。我希望服务器控制用户凭据，如果它们是正确的，它将发送`200 OK`，否则`401 Unauthorized`。如果凭据正常，我还想发回用户 ID。我的问题是，发送它的最佳方式是什么？我的选择是：响应正文中的标头或 json。提前谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T16:15:16.440

就个人而言，我会把它送回体内。我认为没有任何标准标题适合该类型的信息，除非您将其设置在 cookie 中。

# html5-canvas - 带有点击事件的画布中的多个弧

> ID：15312866
> 
> 赞同：0
> 
> 时间：2013-03-09T16:11:38.490
> 
> 标签：html5-canvas, kineticjs

问题 ：

尝试创建一个如下所示的布局，其中每个部分都是可点击的并且具有单独的实体。

![在此处输入图像描述](../Images/f6dba176c168cfd919b1acf50ac77a62.png)

尝试过的解决方案和问题：

用画布创建弧线。必须用笔画添加圆弧。中风不可点击。尝试了其他答案的黑客攻击，但它们似乎不起作用。

[形状（弧）笔划上的单击事件不起作用](https://stackoverflow.com/questions/14434407/click-event-on-a-stroke-of-the-shapearc-doesnt-work)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T16:51:14.560

与其用弧线绘制，不如这样：

**使用楔形而不是弧形**

*   将 3 个外部形状绘制为楔形并将它们放在图层#1 上。
*   将 10 个内部形状绘制为楔形并将它们放在图层#1 上方的另一个图层#2 上。
*   将中心圆画成圆形，并将其放在图层#1 和图层#2 上方的另一个图层#3 上。
*   附上。（“点击”）到每个单独的楔子。

分层将为您提供您正在寻找的视觉“嵌套”效果。

分层将为您提供对每个楔块的适当点击控制。

# php - 如何从数据库中为在 php 中输入的特定字段选择条目

> ID：15312868
> 
> 赞同：0
> 
> 时间：2013-03-09T16:11:50.317
> 
> 标签：php, oracle10g, oracle11g

我有 php 页面，它从用户那里获取 startdate、enddate、hotelname、city、price 和 type 的值。现在我需要检查我的数据库中只有用户输入的值。那可能吗？对于留空的任何条目，不应用相应的条件（例如，如果城市留空，则考虑所有城市）。就像如果用户只输入酒店名称，那么我需要从 hname = 酒店名称的酒店中选择 *。

如果我继续检查所有可能的条件集，那么可能会有 63 种组合！那么有什么出路吗？请帮忙！谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T16:21:55.780

您应该编写一个循环输入变量并查找有效列名的方法，而不是单独处理每个输入。然后确保在 SQL（mysqli、PDO）中使用准备好的语句。

要检查特定的输入变量，您应该执行

`if (isset($_POST['var']) && !empty($_POST['var']))`

如果每个字段都需要特别注意或单独的数据库表，那么您很可能需要单独处理每个字段。

这最终取决于您的需求。但根据我的经验，总有一种方法可以以编程方式进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T16:25:20.500

当您在代码中构建查询时，仅包含其中具有值的项目。

您正在动态构建查询，不是吗？

# image - 将图像转换为矩阵

> ID：15312874
> 
> 赞同：3
> 
> 时间：2013-03-09T16:12:17.677
> 
> 标签：image, delphi, matrix, bmp

我正在尝试将图像（比如说黑白）转换为矩阵（其中 0 = 黑色，1 = 白色）

我试过这段代码：

```
procedure TForm1.Button1Click(Sender: TObject);
type
  tab = array[1..1000,1..1000] of byte;
var i,j: integer;
    s : string;
    image : TBitmap;
    t : tab;
begin
  image := TBitmap.Create;
  image.LoadFromFile('c:\image.bmp');

  s := '';
  for i := 0 to image.Height do
  begin
     for j := 0 to image.Width do
     begin
      if image.Canvas.Pixels[i,j] = clWhite then
        t[i,j] := 0
      else
        t[i,j] := 1;

     end;
  end;
  for i := 0 to image.Height do
  begin
    for j := 0 to image.Width do
     begin
      s:=s + IntToStr(t[i,j]);
     end;
     Memo1.Lines.Add(s);
     s:='';
  end;
end; 
```

但它给了我错误的结果。

任何的想法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-09T16:27:53.027

您的代码中有五个错误和另外两个问题！

**首先**，

```
for i := 0 to image.Height do 
```

必须替换为

```
for i := 0 to image.Height - 1 do 
```

（为什么？）同样，

```
for j := 0 to image.Width do 
```

必须替换为

```
for j := 0 to image.Width - 1 do 
```

**其次**，`Pixels`数组接受参数`[x, y]`，而不是`[y, x]`。因此，您需要更换

```
image.Canvas.Pixels[i,j] 
```

经过

```
image.Canvas.Pixels[j,i] 
```

**第三**，你写了“0 = black and 1 = white”，但显然你做了相反的事情！

**第四**，您尝试访问`t[0, 0]`，即使您的矩阵开始索引在`1`. 用来`array[0..1000,0..1000] of byte;`解决这个问题。

**第五**，您有内存泄漏（`image`未释放--使用`try..finally`）。

**另外**，最好使用动态数组：

```
type
  TByteMatrix = array of array of byte;

var
  mat: TByteMatrix; 
```

你从

```
SetLength(mat, image.Height - 1, image.Width - 1); 
```

如果你想让它索引`[y, x]`，否则相反。

**最后**，在这种情况下，您根本不应该使用该`Pixels`属性，因为它非常慢。相反，使用该`Scanline`属性。有关更多信息，请参阅[此](https://stackoverflow.com/questions/15297320/change-a-bitmaps-pixel-colour)或[那个](https://stackoverflow.com/questions/13583451/how-to-use-scanline-property-for-24-bit-bitmaps)或[其他内容](http://www.google.se/search?q=Delphi+scanline&aq=f&oq=Delphi+scanline&sourceid=chrome&ie=UTF-8)。

`Memo1.Lines.BeginUpdate`此外，只需在更新之前和`Memo1.Lines.EndUpdate`之后添加备忘录控件，您将获得很多速度。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-09T16:39:48.400

以下过程将输入`ABitmap`位图转换为多维`AMatrix`字节数组，它表示像素，其中 0 值表示白色像素，1 表示任何其他颜色：

```
type
  TPixelMatrix = array of array of Byte;

procedure BitmapToMatrix(ABitmap: TBitmap; var AMatrix: TPixelMatrix);
type
  TRGBBytes = array[0..2] of Byte;
var
  I: Integer;
  X: Integer;
  Y: Integer;
  Size: Integer;
  Pixels: PByteArray;
  SourceColor: TRGBBytes;
const
  TripleSize = SizeOf(TRGBBytes);
begin
  case ABitmap.PixelFormat of
    pf24bit: Size := SizeOf(TRGBTriple);
    pf32bit: Size := SizeOf(TRGBQuad);
  else
    raise Exception.Create('ABitmap must be 24-bit or 32-bit format!');
  end;

  SetLength(AMatrix, ABitmap.Height, ABitmap.Width);
  for I := 0 to TripleSize - 1 do
    SourceColor[I] := Byte(clWhite shr (16 - (I * 8)));

  for Y := 0 to ABitmap.Height - 1 do
  begin
    Pixels := ABitmap.ScanLine[Y];
    for X := 0 to ABitmap.Width - 1 do
    begin
      if CompareMem(@Pixels[(X * Size)], @SourceColor, TripleSize) then
        AMatrix[Y, X] := 0
      else
        AMatrix[Y, X] := 1;
    end;
  end;
end; 
```

`AMatrix`此过程将多维字节数组打印到`AMemo`备忘录框：

```
procedure ShowPixelMatrix(AMemo: TMemo; const AMatrix: TPixelMatrix);
var
  S: string;
  X: Integer;
  Y: Integer;
begin
  AMemo.Clear;
  AMemo.Lines.BeginUpdate;
  try
    AMemo.Lines.Add('Matrix size: ' + IntToStr(Length(AMatrix[0])) + 'x' +
      IntToStr(Length(AMatrix)));
    AMemo.Lines.Add('');

    for Y := 0 to High(AMatrix) do
    begin
      S := '';
      for X := 0 to High(AMatrix[Y]) - 1 do
      begin
        S := S + IntToStr(AMatrix[Y, X]);
      end;
      AMemo.Lines.Add(S);
    end;
  finally
    AMemo.Lines.EndUpdate;
  end;
end; 
```

以及上述程序的用法：

```
procedure TForm1.Button1Click(Sender: TObject);
var
  Bitmap: TBitmap;
  PixelMatrix: TPixelMatrix;
begin
  Bitmap := TBitmap.Create;
  try
    Bitmap.LoadFromFile('d:\Image.bmp');
    BitmapToMatrix(Bitmap, PixelMatrix);
  finally
    Bitmap.Free;
  end;
  ShowPixelMatrix(Memo1, PixelMatrix);
end; 
```

上述`BitmapToMatrix`过程的扩展允许您指定参数[`luminance`](http://www.itu.int/dms_pubrec/itu-r/rec/bt/R-REC-BT.601-6-200701-S!!PDF-E.pdf#page=2)给定的级别`AMinIntensity`将像素视为非白色。

该`AMinIntensity`值越接近 0，越亮的像素被视为非白色。这允许您使用颜色强度容差（例如，更好地识别抗锯齿文本）：

```
procedure BitmapToMatrixEx(ABitmap: TBitmap; var AMatrix: TPixelMatrix;
  AMinIntensity: Byte);
type
  TRGBBytes = array[0..2] of Byte;
var
  X: Integer;
  Y: Integer;
  Gray: Byte;
  Size: Integer;
  Pixels: PByteArray;
begin
  case ABitmap.PixelFormat of
    pf24bit: Size := SizeOf(TRGBTriple);
    pf32bit: Size := SizeOf(TRGBQuad);
  else
    raise Exception.Create('ABitmap must be 24-bit or 32-bit format!');
  end;

  SetLength(AMatrix, ABitmap.Height, ABitmap.Width);

  for Y := 0 to ABitmap.Height - 1 do
  begin
    Pixels := ABitmap.ScanLine[Y];
    for X := 0 to ABitmap.Width - 1 do
    begin
      Gray := 255 - Round((0.299 * Pixels[(X * Size) + 2]) +
        (0.587 * Pixels[(X * Size) + 1]) + (0.114 * Pixels[(X * Size)]));

      if Gray < AMinIntensity then
        AMatrix[Y, X] := 0
      else
        AMatrix[Y, X] := 1;
    end;
  end;
end; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-09T16:45:21.100

备忘录行位置下降，但您的循环 image.height 首先将在备忘录中反转结果，尝试此代码

```
procedure TForm1.Button1Click(Sender: TObject);
var i,j: integer;
    s : string;
    image : TBitmap;
begin
  image := TBitmap.Create;
  image.LoadFromFile('c:\image.bmp');

  s := '';
  for i := 0 to image.width-1 do
  begin
     for j := 0 to image.Height-1 do
     begin
      if image.Canvas.Pixels[i,j] = clWhite then
        s := s+'0'
      else
        s := s+'1';
     end;
     memo1.Lines.Add(s);
     s:='';
  end;
end; 
```

# delphi - 如何在 DLL 中获取组件类

> ID：15312876
> 
> 赞同：0
> 
> 时间：2013-03-09T16:12:37.043
> 
> 标签：delphi, dll

我正在制作一个包含许多子表单的 mdi 应用程序，其中一个是显示报告的表单。在报表上，我使用 dll 文件来显示表单上的所有组件并在每个组件中查找值，我使用以下代码来执行此操作。

```
// this code i write in dll or bpl file
procedure getReportParams(Form : Tform); stdcall;
var
i : integer;
str, cbstr : string;
b : boolean;
begin

for i:=0 to Form.ComponentCount-1 do
  begin
  str:=str+Form.Components[i].Name+' - '+Form.Components[i].ClassName+', ';
      if (Form.Components[i] is TcxLookupComboBox) then
          begin
          showmessage('test 1');

          // if i uncomment the code below, the program get error Einvalidcast 
          // cbstr:=(Form.Components[i] as TcxDBLookupComboBox).Text;
          // if (Form.Components[i] as TcxDBLookUpCombobox).Parent=Form.FindComponent('pnledit') then
          //     showmessage((Form.Components[i] as TcxDBLookUpCombobox).Name);
          end;
  end;
showmessage(str);
// this showmessage work well in dll, bpl, or other unit
if b then
showmessage(cbstr+' true') else showmessage(cbstr+' false');
end; 
```

简单的问题是如何`cbstr:=(Form.Components[i] as TcxDBLookupComboBox).Text;`使用 corecly 编写代码而不会出现 EInvalidCast 错误？

顺便说一句，如果我在其他单元中编写此代码，dll 和 bpl 程序会出错，但如果我在同一单元（单元报告）中编写该代码，则代码运行良好。感谢提前。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T18:14:56.287

您的问题是 DLL 中的类与可执行文件中的类不同。您有这些类的两个实例，即使它们是从相同的代码编译的。当编译器说对象不是您将其转换为的类时，它是准确的。您根本无法使用 DLL 共享 Delphi 类。

解决方案是：

1.  将所有代码编译成一个可执行文件。
2.  使用运行时包来共享类。

在您的场景中，将代码放在一个包中是不够的。问题是 devexpresses 类。您需要链接到使用运行时包的那些。因为您没有这样做，所以您有这些类的多个不同版本。

您注意到 is 运算符的结果似乎与 ClassName 函数不一致。嗯，那是因为类的所有不同版本都具有相同的名称。

我还注意到您遇到的问题与您之前的问题相同：[如何将 TForm 作为参数传递给 DLL？](https://stackoverflow.com/questions/15175678/) 您在那里接受的答案的解释和建议在这里同样适用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T18:13:00.567

如果您已经使用了`(Foo is TSomething)`类型检查，那么您知道 foo 是 a`TSomething`并且您可以使用静态强制转换： `TSomething(Foo)`

如果您尝试将此代码链接到另一个可执行文件或 dll 中，则您可能没有包含正确的单元如果编译失败，并且如果它在运行时失败，则您没有打开 BPL 链接选项（使用运行时包，并确保包名称列表完整）。请记住，检查“某事是 TSomething”是在将一个类声明与另一个活动对象的类进行比较。类不是由字符串名称定义的。它实际上是链接到您的应用程序的类型信息。

当您链接一个 DLL（没有运行时包）时，您实际上可能已经链接`TSomething`到您的主 EXE 和您的 DLL，它们是具有相同名称的类的两个不同副本，并且名称并不重要。当您比较身份时，无法在运行时知道它们是同一件事。所以他们不是。

您以您在屏幕上看到代码的方式思考代码。当它运行时，它被编译成代码，类型只是exe或DLL中的数据。所以 TSomething-in-myexe.exe 与 TSomething-in-mydll.dll 不是同一个类。

如果您希望它们相同，请为您想要比较不同编译部分之间的类型信息的所有位置启用使用运行时包 (BPL)。特别是在未启用 bpl 的链接目标之间传递指针或对 VCL 类型的引用不会像您想象的那样工作。

您还应该确保运行时包列表包含定义您正在使用的类的包。（TcxSomething 可能是一个开发者快递组件，去查找它定义在什么包 BPL 中。）

# ios - MFMailComposeViewController：附加照片（多张照片）

> ID：15312881
> 
> 赞同：-1
> 
> 时间：2013-03-09T16:13:13.077
> 
> 标签：ios, attachment, email-attachments, mfmailcomposeviewcontroller, mfmailcomposer

我想使用此代码为我的应用程序将多张照片附加到一封邮件我只能将最后一张照片附加到邮件但我可以在 uiimageview 中阅读所有照片如何将所有照片附加到一封邮件？这是读取图像的代码

```
- (void)elcImagePickerController:(ELCImagePickerController *)picker didFinishPickingMediaWithInfo:(NSArray *)info {

 [self dismissModalViewControllerAnimated:YES];

 ////
    if ([MFMailComposeViewController canSendMail]) {

        MFMailComposeViewController * mailControler = [[MFMailComposeViewController alloc]init];
        mailControler.mailComposeDelegate = self;
        mailControler.modalPresentationStyle = UIModalPresentationFormSheet;

        NSString *emailBody = @"";  // optional
        [mailControler setMessageBody:emailBody isHTML:YES];

    for (UIView *v in [scrollview subviews]) {
        [v removeFromSuperview];
    }

 CGRect workingFrame = scrollview.frame;
 workingFrame.origin.x = 0;

 for(NSDictionary *dict in info) {

  imageview = [[UIImageView alloc] initWithImage:[dict objectForKey:UIImagePickerControllerOriginalImage]];

        [imageview setContentMode:UIViewContentModeScaleAspectFit];
  imageview.frame = workingFrame;

  [scrollview addSubview:imageview];
  [imageview release];

  workingFrame.origin.x = workingFrame.origin.x + workingFrame.size.width;
        NSLog(@"image %@", imageview.image);

        NSData * data = UIImageJPEGRepresentation(imageview.image, 0.0);

 [mailControler addAttachmentData:data mimeType:@"image/jpeg" fileName:@"Photos"];

 }

    [scrollview setPagingEnabled:YES];
    [scrollview setContentSize:CGSizeMake(workingFrame.origin.x, workingFrame.size.height)];

    } 
```

第 2 部分去邮件

```
-(IBAction)actionEmailComposer
{

  [self presentViewController:mailControler animated:YES completion:nil];
} 
```

应用程序崩溃了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T23:18:43.350

You've got a whole mess of code in there about obtaining your images and dealing with your UI that is irrelevant to the question (and quite possibly why your app is crashing -- doesn't look like it's crashing because of your MFMailComposeViewController interaction). How you're obtaining your images is very hard to follow without the context of your larger UI.

But to focus on just your core question: how do you attach multiple photos to one email?

Answer: call `[mailControler addAttachmentData: mimeType: fileName:` multiple times. You can call it as many times as you need, provided you don't send two items with the same filename.

# wpf - WindowInteropHelper.Handle — 我需要释放它吗？

> ID：15312883
> 
> 赞同：0
> 
> 时间：2013-03-09T16:13:19.990
> 
> 标签：wpf, winapi, com

在 WPF 中，我使用以下代码获取 IntPtr 句柄：

```
IntPtr mainWindowHandle = new WindowInteropHelper(Application.Current.MainWindow).Handle 
```

当我使用完这个句柄时，我是否需要以任何方式释放它（例如使用 Marshal.FreeHGlobal() 方法）？

编辑：我在考虑 Marshal.FreeHGlobal()，而不是 Marshal.Release()，对不起！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T17:49:27.500

这与 COM 没有任何关系，Marshal.Release() 不适用。您只需获得本机窗口句柄的副本，它不必被释放。当窗口被销毁时，您需要停止使用句柄。由 Window.Close 事件发出信号。

# android - 您可以更改 SQLite (Android) 中的 _id 自动增量字段吗？

> ID：15312887
> 
> 赞同：1
> 
> 时间：2013-03-09T16:13:38.740
> 
> 标签：android, sqlite

我有一个带有 SQLite 的 Android 应用程序，并在创建表时使用以下行：

```
_id integer primary key autoincrement 
```

我的问题是，如果我的用户愿意，我可以对此行进行更新并更改 _id 吗？因此，例如，我将在数据库中有两条记录：

```
1 My First Record
2 My Second Record 
```

现在在我更新之后，我想要这样的东西：

```
1 My First Record
38 My Second Record 
```

SQLite 会允许这样做并轻松适应吗？即下一个自动创建的主键将是#39？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T19:32:32.700

如[文件](http://www.sqlite.org/autoinc.html)所述，更改`_id`是允许的，并将正确更新自动增量序列。

去尝试一下：

```
$ sqlite3
SQLite version 3.7.16 2013-01-11 09:58:54
Enter ".help" for instructions
Enter SQL statements terminated with a ";"
sqlite> CREATE TABLE MyTable(_id INTEGER PRIMARY KEY AUTOINCREMENT);
sqlite> INSERT INTO MyTable DEFAULT VALUES;
sqlite> INSERT INTO MyTable DEFAULT VALUES;
sqlite> UPDATE MyTable SET _id = 38 WHERE _id = 2;
sqlite> INSERT INTO MyTable DEFAULT VALUES;
sqlite> SELECT * FROM MyTable;
1
38
39 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T16:18:21.400

如果你想做这样的事情，你必须自己管理自动增量。SQLite**不允许**您更改自动生成字段的值。另一种方法是添加另一个字段并使用它。

此外，如果有某种解决方法，我可以向您保证，这不是一个好习惯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T16:22:28.773

1.  你不应该以这种方式修改主键，例如考虑外键等。Sqlite 不允许这样做。
2.  除此之外，自动增量计数器存储在一个单独的表中，不知道你在做什么。即使允许更改主键，计数器也不会受到影响。

# python - Django，使用默认设置提供静态文件

> ID：15312889
> 
> 赞同：0
> 
> 时间：2013-03-09T16:13:40.940
> 
> 标签：python, django

我正在使用 Django Python Web 框架编写一个应用程序。我将我的应用程序添加到 settings.py 中的 INSTALLED_APPS 中，并且我的模板可以毫无问题地提供。但是，关于静态文件，我对它们有一点问题。我想在 STATICFILES_FINDER 中使用默认参数：

```
STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
) 
```

例如，当我想在我的模板中包含一个 css 文件时（假设 '/' 将是我的应用程序文件夹中的静态/应用程序名称）：

```
<link rel='stylesheet' href="/css/style.css"> 
```

我做错了吗，如果是这样，处理静态文件的好方法是什么？

更新：我的 base.html 模板：

```
{% load staticfiles %}
<!doctype html>
<html>
    <head>
        {% block head %}
            <meta charset='utf-8'>       
            <title> {% block title %} {% endblock %} - Find Something </title>
            <link rel='stylesheet' href="{% static  'css/style.css' %}">            
        {% endblock head %}        
    </head>
    <body>

    </body>
</html> 
```

我的继承模板是：

```
{% extends "frontend/base.html" %}

{% block title %} {{ title }} {% endblock %}
{% block head %}
{{ super() }}
{% endblock %} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T16:22:09.807

```
 {% static %}
 <link rel='stylesheet' href="{% static 'css/style.css' %}">

 {% block head %}
     {{block.super}}
 {% endblock %} 
```

# ruby - Ruby 中的破坏性方法和 bang 方法

> ID：15312891
> 
> 赞同：2
> 
> 时间：2013-03-09T16:13:45.177
> 
> 标签：ruby

*David A. Black*在他的书中说：

> 危险可能意味着编写该方法的人希望它意味着什么。在内置类的情况下，它通常意味着这个方法，不像它的非爆炸等效物，永久地修改它的接收器。但并不总是这样：退出！是退出的危险替代方案，因为它在退出程序时不会运行任何终结器。
> 
> 潜艇的危险！（一种用替换字符串替换字符串中匹配模式的方法）部分是它改变了它的接收者，部分是它`nil`在没有发生变化的情况下返回 - 不像 sub，它总是返回原始字符串的副本和替换（或不更换）。

虽然以上都明白了，但无法理解他在下面试图说什么。

> ***此外，不要假设 bang 方法和破坏性方法之间存在直接关联。它们经常重合，但它们不是一回事。***

基于什么概念，我们可以对方法进行分类并将其放入破坏性或危险列表中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T16:18:02.443

破坏性方法是那些改变被调用对象的属性值的方法。所以他所说的可以重申为：

> 不要假设这`method!`会改变属性的值。这种情况经常发生，但不是规则。

# c# - Roslyn 可以编译 await 关键字吗？

> ID：15312892
> 
> 赞同：8
> 
> 时间：2013-03-09T16:13:47.460
> 
> 标签：c#, async-await, c#-5.0, roslyn

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-09T17:20:39.397

`await`当前的 Roslyn CTP 中没有实现支持（尽管它现在在内部构建中实现）。

错误报告差异的原因是我们首先构建了 Roslyn 解析器，以便它可以处理整个 C# 4 语言，然后一次为特性填充语义。由于`await`是 C# 5 的特性，它甚至不被解析器识别，也没有地方识别它的使用并提供一个很好的错误。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-09T17:20:51.737

实际上，罗斯林论坛确实有答案。如果您查看文章[*Known Limitations and Unimplemented Language Features*](http://social.msdn.microsoft.com/Forums/en-US/roslyn/thread/f5adeaf0-49d0-42dc-861b-0f6ffd731825)，您会注意到它在 C# 中尚未实现的功能中包含“异步”。

该列表是关于 6 月 CTP 的，但由于[6 月 CTP 和 12 月 CTP 之间的更改列表](http://social.msdn.microsoft.com/Forums/en-US/roslyn/thread/5a56122b-d6e5-40e0-8912-60eba3fc9a01)没有列出异步，这意味着它还没有实现。

我认为错误消息不同的原因是 Roslyn 确实理解`dynamic`（但还没有实现它）。另一方面，它不理解`async`- `await`，所以它会给你一般的编译错误。

# titanium - 钛：如何获取位于 /res-long-port-ldpi 内的文件

> ID：15312894
> 
> 赞同：1
> 
> 时间：2013-03-09T16:13:54.140
> 
> 标签：titanium, appcelerator, splash-screen

我试图在运行时访问位于**/assets/android/images/res-long-port-ldpi**中的文件但没有成功...我尝试了许多不同的路径，但是 exists() 总是返回 false 任何想法如何做到这一点?

```
var path = "/images/res-long-port-ldpi/default.png";
var splashScreenOld = Titanium.Filesystem.getFile(Titanium.Filesystem.resourcesDirectory, path);
Ti.API.info("screen: file exist = "+splashScreenOld.exists()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T13:53:48.693

我尝试使用 :/images 设置的路径，但没有成功打开文件。

我的目标是在应用程序启动时随机显示初始屏幕图像。似乎只有 1 个名为 default.png 的图像位于目录之一 -res-long-port-ldpi -res-long-port-hdpi - etc....

将被加载并用作启动画面。appcelerator 似乎没有提供一种具有不同启动画面的方法。因此，如果我在目录中有 4 张图片，可以说

默认.png，默认1.png，默认3.png，默认2.png

我想打开文件并在运行时将其重命名为 default.png，从而在每次启动应用程序时更改文件以获得不同的启动画面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T16:23:51.970

Android 根据设备密度在密度文件夹之间切换。此文件可在低密度设备上的 /images 中访问。它不能在其他密度设备上直接访问。

如果您在切换初始屏幕时遇到问题，请确保您在重新运行之前已从测试设备中删除了构建文件夹和应用程序。

如果您有不同的用例，请进一步解释一下。

# actionscript - Actionscript：平铺图像，如背景重复-x

> ID：15312897
> 
> 赞同：0
> 
> 时间：2013-03-09T16:14:06.963
> 
> 标签：actionscript

```
var bar:Sprite=new Sprite();        
bar.graphics.clear();
var y:*=stage.stageHeight-(el.sprite.height+margin);    
bar.graphics.beginBitmapFill((el.sprite.content as Bitmap).bitmapData);
bar.graphics.drawRect(margin,y,stage.stageWidth-margin*2,el.sprite.height);
bar.graphics.endFill(); 
```

el.sprite 是`Loader`实例。

要重复的图像-x

![在此处输入图像描述](../Images/9a1e278a4cc08085b4f1366ab37a4e3e.png)

我得到奇怪的渲染结果： ![在此处输入图像描述](../Images/ec242a626c08b8c5897d642c5a17a61f.png)

我做错了什么？

**更新帖子**

![在此处输入图像描述](../Images/93a89e27243ab8b43a82bd4ba6397fd3.png) ![在此处输入图像描述](../Images/59c642b52d6ba4bb0473a99d8605f04d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T16:59:03.487

我不确定您要对边距/y 值做什么，但是如果您希望位图在容器内重复，从 x=y=0 开始，那么以下工作：

```
var bar:Sprite = new Sprite();
bar.graphics.beginBitmapFill((el.sprite.content as Bitmap).bitmapData);
bar.graphics.drawRect(0,0,desiredBarWidth, desiredBarHeight);
bar.graphics.endFill(); 
```

对于任何填充/边距，将条放置在容器内并以这种方式定位。当然，如果您使用的是第一张图像（渐变，而不是箭头），您可以简单地执行以下操作：

```
var bar:Sprite = new Sprite();
bar.addChild(el.sprite.content as Bitmap);
bar.width = desiredBarWidth; 
```

这会将条及其内容拉伸到您指定的任何宽度 - 如果您使用拉伸时不会改变的位图（例如渐变），它可能会更干净和更灵活。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T16:38:15.970

改成这个，帮了我。但我还是不明白。问题是什么？

```
bar.graphics.clear();
var y:*=stage.stageHeight-(el.sprite.height+margin);  
bar.graphics.beginBitmapFill((el.sprite.content as Bitmap).bitmapData);
bar.graphics.drawRect(0,0,stage.stageWidth-margin*2,el.sprite.height);
bar.graphics.endFill();
bar.y=y; 
```

# java - 将文件插入 Google Drive 时无法设置文件修改日期

> ID：15312899
> 
> 赞同：2
> 
> 时间：2013-03-09T16:14:34.437
> 
> 标签：java, android, google-drive-api

我正在使用 Google Drive API Java 客户端库将文件插入到 Google Drive。上传到云端硬盘的任何文件都采用上传时的修改时间，而不是原始文件的修改时间。我已经使用`setModifiedDate`of`File`对象来设置日期。

在查看[Google Developers](https://developers.google.com/drive/v2/reference/files/insert)的文档时，我看到以下文本 -

> 上次此文件被任何人修改的时间（格式化的 RFC 3339 时间戳）。当设置了 setModifiedDate 参数时，这仅在更新时是可变的。

但是，我在文档中找不到参数`setModifiedDate`，Java 库也没有`setSetModifiedDate(Boolean arg)`类中的方法`com.google.api.services.drive.Drive.Files.Insert`（相反，更新类`com.google.api.services.drive.Drive.Files.Update`包含`setSetModifiedDate(Boolean arg)`完美工作的方法）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-28T16:36:44.267

此代码适用于我在将文件上传到云端硬盘之前保留文件的修改日期和时间。

```
long modifiedDateTime = new java.io.File("/path/to/file").lastModified();
Time t = new Time();
t.set(modifiedDateTime);
t.switchTimezone(Time.getCurrentTimezone());
String modifiedDateAsRfc3339 = t.format3339(false);

// create the file to upload here
com.google.api.services.drive.model.File body = new File();
body.setTitle("/path/to/file");
body.setMimeType("mimetype");
// here is where you set the modified date to match the file's modified date
body.setModifiedDate(com.google.api.client.util.DateTime.parseRfc3339(modifiedDateAsRfc3339));

InputStreamContent mediaContent;
...... 
```

# scons - 我可以将变量添加到对“构建身份”无关紧要的 SConstruct 吗？

> ID：15312908
> 
> 赞同：1
> 
> 时间：2013-03-09T16:15:33.967
> 
> 标签：scons

我想添加一个只会影响编译器错误显示的变量，如下所示：

```
vars = Variables()
vars.Add(BoolVariable('fatal', 'Stop on first error', True))
# ...
if env['fatal']:
    env.MergeFlags(['-Wfatal-errors']) 
```

但是，照原样，如果我运行`scons fatal=yes`后跟`scons fatal=no`，我会得到一个完整的重建，而没有理由这样做，因为这个标志对于已经编译的目标文件无关紧要。

SCons 允许这样做吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T03:09:49.257

SCons 并没有真正允许你想做的事情。必须构建的每个节点都有一个与之关联的命令行操作。存储命令行字符串的 MD5 校验和，如果这些校验和发生更改，则会触发重建。如果更改警告标志，则用于构建目标文件的命令行会更改，即使生成的目标文件相同。

如果你真的下定决心，总有办法绕过它。例如，您可以更改在 SCons 内计算 MD5 总和的方式。作为概念证明，我让 SCons`-Wall`在考虑重建时忽略了该标志。这是通过将以下代码放在 SConstruct 文件的顶部来更改报告与操作关联的命令行的方法来完成的。

```
import SCons
import types
SCons.Action.ActionBase.get_contents_orig = SCons.Action.ActionBase.get_contents
def get_contents(self, *args, **kw):
    norebuild = ("-Wall",)
    cnt = self.get_contents_orig(*args, **kw).split()
    cnt_norebuild = " ".join(i for i in cnt if i not in norebuild)
    return cnt_norebuild
SCons.Action.ActionBase.get_contents = types.MethodType(
        get_contents, None, SCons.Action.ActionBase) 
```

这对我来说是一个非常简单的 SConstruct 文件。不过，这是一个非常糟糕的 hack，并且可能会在不同版本之间或更复杂的构建之间中断。

因此，总而言之，可以按照您的要求进行操作，但非常不明智。

# android - 带有异步任务的 GPS 跟踪器示例：错误“提供者不存在：null”

> ID：15312909
> 
> 赞同：1
> 
> 时间：2013-03-09T16:15:35.117
> 
> 标签：android

我正在寻找一个非常示例，显示带有 asynctask 的经度和纬度跟踪器。

我发现此代码[https://stackoverflow.com/a/6788457](https://stackoverflow.com/a/6788457)但他不起作用：/我在以下位置捕获了这个奇怪的异常“提供程序不存在：null”：

```
public boolean startService() {
    try {
        // this.locatorService= new
        // Intent(FastMainActivity.this,LocatorService.class);
        // startService(this.locatorService);

        FetchCordinates fetchCordinates = new FetchCordinates();
        fetchCordinates.execute();
        return true;
    } catch (Exception error) {
        Log.i("exception", error.getMessage());
        return false;
    }

} 
```

搜索后，我看到这篇文章（[https://stackoverflow.com/a/13851305/2137454](https://stackoverflow.com/a/13851305/2137454)）解释我必须使用这条线：

```
List<String> providers = locationManager.getAllProviders(); 
```

但我不明白在我的 gpstracker 课程中在哪里以及如何使用这些技巧......有人可以帮助我吗？

这里是完整的 gpstracker 类：

```
public class GPSTracker extends Service implements LocationListener {

    private final Context mContext;
    boolean isGPSEnabled = false;
    boolean isNetworkEnabled = false;
    boolean canGetLocation = false;

    Location location = null; 
    double latitude = 0; 
    double longitude = 0; 
    double altitude = 0;

    private static final long MIN_DISTANCE_CHANGE_FOR_UPDATES = 10;
    private static final long MIN_TIME_BW_UPDATES =  1000* 60 * 1;
    protected LocationManager locationManager;

    public GPSTracker(Context context) { 
        this.mContext = context.getApplicationContext(); 
        getLocation();
    }

    public Location getLocation() {
        try {
            locationManager = (LocationManager) mContext.getSystemService(LOCATION_SERVICE);

            isGPSEnabled = locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER);

            isNetworkEnabled = locationManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER);

            if (!isGPSEnabled && !isNetworkEnabled) {
               Log.i("Je tombe...","...ici !");
            } else {
                this.canGetLocation = true;
                if (isGPSEnabled) {
                    if (location == null) {
                        locationManager.requestLocationUpdates(
                                LocationManager.GPS_PROVIDER,
                                MIN_TIME_BW_UPDATES,
                                MIN_DISTANCE_CHANGE_FOR_UPDATES, this);
                        Log.d("GPS Enabled", "GPS Enabled");
                        if (locationManager != null) {
                            location = locationManager
                                    .getLastKnownLocation(LocationManager.GPS_PROVIDER);
                            if (location != null) {
                                latitude = location.getLatitude();
                                longitude = location.getLongitude();
                                altitude = location.getAltitude();
                            }
                        }
                    }
                }
            }

        } catch (Exception e) {
            e.printStackTrace();
        }

        return location;
    }

    public void stopUsingGPS() {
        if (locationManager != null) {
            Log.i("STOPUSINGGPS", "EFFECTIF");
            locationManager.removeUpdates(GPSTracker.this);
        }
    }

    public double getLatitude() {
        if (location != null) {
            Log.i("LATITUDE", "EFFECTIF");
            latitude = location.getLatitude();
        }
        return latitude;
    }

    public double getLongitude() {
        if (location != null) {
            Log.i("LONGITUDE", "EFFECTIF");
            longitude = location.getLongitude();
        }
        return longitude;
    }

    public double getAltitude() {
        if (location != null) {
            Log.i("ALTITUDE", "EFFECTIF");
            altitude = location.getAltitude();
        }
        return altitude;
    }

    public boolean canGetLocation() {
        return this.canGetLocation;
    }

    @Override
    public void onLocationChanged(Location location) {
    }

    @Override
    public void onProviderDisabled(String provider) {
    }

    @Override
    public void onProviderEnabled(String provider) {
    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
    }

    @Override
    public IBinder onBind(Intent arg0) {
        return null;
    }

} 
```

编辑：我的 GPS 已打开

# ruby-on-rails - 使用 Ruby on Rails 使用 3rd 方 api

> ID：15312912
> 
> 赞同：0
> 
> 时间：2013-03-09T16:15:43.357
> 
> 标签：ruby-on-rails, ruby, api

我正在尝试使用第 3 方 api 并将其存储在数据库中。然后，我想将我自己的 api 暴露给一些私有应用程序（网络、移动设备等）。

使用和存储 3rd 方 API 内容的原因是因为 api 对每天和每秒的调用次数有严格的限制。

在我的项目中，我会在哪里放置用于消费和调度 api 消费的代码？我正在使用 httparty 来获取 api 内容，并且我计划将该数据映射到活动记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T16:32:38.660

我建议使用[when](https://github.com/javan/whenever)来安排诸如cron之类的任务并将内容保存到数据库中。

然后，我想每个第 3 方对象（用户、推文等）都有模型，以及与这些模型相对应的控制器并从数据库中提取信息，并提供可以被第 4 方应用程序解析的 JSON。

# action - Selenium WebDriver 中的拖放操作问题

> ID：15312915
> 
> 赞同：0
> 
> 时间：2013-03-09T16:16:11.203
> 
> 标签：action, selenium-webdriver

我已经编写了以下代码，但找不到该元素。该网站的链接是[http://plugnedit.com/](http://plugnedit.com/)。

我尝试了各种方法来定位页面上的元素以尝试拖动对象。它不工作。我收到“无法找到元素”错误。

我正在使用火狐。

谢谢。

```
 driver.navigate().to("http://plugnedit.com/");
        Actions dragAndDrop = new Actions(driver);
        WebElement itemToDrag = driver.findElement(By.id("p1003upperspan"));

        // drag downwards
        int numberOfPixelsToDragTheScrollbarDown = 10;
        for (int i=10;i<150;i=i+numberOfPixelsToDragTheScrollbarDown){
            // this causes a gradual drag of the scroll bar, 10 units at a time
            dragAndDrop.moveToElement(itemToDrag).clickAndHold().moveByOffset(0,numberOfPixelsToDragTheScrollbarDown).release().perform();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T19:21:23.703

由于您尝试拖放的元素存在于框架内，因此您需要先切换到包含该元素的框架，然后执行拖放功能。

从您的代码中，我能够确定您尝试拖动的图像是上面带有咖啡杯的图像。该图像出现在网页的第一帧中。

所以我在拖放代码之前添加了以下单行代码。

```
driver.switchTo().frame(0); 
```

//这里的框架不包含任何名称。所以我使用了索引。这里`frame(0)`表示第一帧标签。

有效 ！使用此代码。

```
driver.navigate().to("http://plugnedit.com/");

     driver.switchTo().frame(0);
        Actions dragAndDrop = new Actions(driver);
        WebElement itemToDrag = driver.findElement(By.id("p1003upperspan"));

        // drag downwards
        int numberOfPixelsToDragTheScrollbarDown = 10;
        for (int i=10;i<150;i=i+numberOfPixelsToDragTheScrollbarDown){
            // this causes a gradual drag of the scroll bar, 10 units at a time
            dragAndDrop.moveToElement(itemToDrag).clickAndHold().moveByOffset(0,numberOfPixelsToDragTheScrollbarDown).release().perform();
        } 
```

# php - 在后端与前端设置“字符集”

> ID：15312920
> 
> 赞同：0
> 
> 时间：2013-03-09T16:16:48.553
> 
> 标签：php, html, http

我可以在后端（PHP）设置“字符集”：

```
header('charset=utf-8'); 
```

我也可以在前端设置它（HTML）：

```
<meta charset="UTF-8"> 
```

我应该在哪里设置它，为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T16:25:10.660

您还可以在 Apache 或 Nginx 或任何配置中的服务器级别设置它。

简短的回答是，对于大多数面向用户的浏览器用例来说，这并不重要。大多数浏览器会以相同的方式解释后端和前端字符集标签。

话虽如此，在许多情况下，最好在后端设置标签。它略微减少了发送给用户的 HTML 总量，它将显示在 HEAD http 请求中，等等。此外，如果在前端设置一些其他元标记，例如 X-UA-Compatible 元标记，则在某些情况下会表现得很奇怪。

# java - 如何使用颜色量化器描述符？

> ID：15312921
> 
> 赞同：2
> 
> 时间：2013-03-09T16:16:51.940
> 
> 标签：java, bmp, javax.imageio, jai, quantization

遵循[@PhiLho 对如何将 BufferedImage 转换为 8 位的回答的想法？](https://stackoverflow.com/a/11062157/196844)，我想用来`ColorQuantizerDescriptor`转换一个`BufferedImage`，imageType TYPE_INT_RGB，但是[RenderedOp#getColorModel()](http://docs.oracle.com/cd/E17802_01/products/products/java-media/jai/forDevelopers/jai-apidocs/javax/media/jai/RenderedOp.html#getColorModel())抛出以下异常：

```
java.lang.IllegalArgumentException：指定的 ColorModel 与图像 SampleModel 不兼容。
    在 javax.media.jai.PlanarImage.setImageLayout(PlanarImage.java:541)
    在 javax.media.jai.RenderedOp.createRendering(RenderedOp.java:878)
    在 javax.media.jai.RenderedOp.getColorModel(RenderedOp.java:2253)

```

这是我尝试使用的代码：

```
final RenderedOp medianCutQuantizerOp = ColorQuantizerDescriptor.create(rgbImage, ColorQuantizerDescriptor.MEDIANCUT, 256, null, null, null, null, null);
final BufferedImage bi = medianCutQuantizerOp.getAsBufferedImage(null, medianCutQuantizerOp.getColorModel()); 
```

我该如何使用`ColorQuantizerDescriptor`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T17:34:08.107

The following example has been modified from [http://code.google.com/p/color-reduction-experiments/source/browse/trunk/it/geosolutions/mapproducers/MapProducersTest.java?r=2](http://code.google.com/p/color-reduction-experiments/source/browse/trunk/it/geosolutions/mapproducers/MapProducersTest.java?r=2)

```
public class Main {
    public static void main(String[] args) throws Exception {

        BufferedImage original = ImageIO.read(new File("/Users/Nick/Desktop/with_flowers.jpg"));
         // 300 seems to be a good number
        final RenderedOp cqImage = ColorQuantizerDescriptor.create(
           original, ColorQuantizerDescriptor.OCTTREE,
           new Integer(255), new Integer(300), null, new Integer(2),
           new Integer(2), null);

        assert cqImage.getColorModel() instanceof IndexColorModel;
        final BufferedImage converted = cqImage.getAsBufferedImage();
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                final JFrame f = new JFrame();
                f.setTitle("Test");
                f.getContentPane().add((new ScrollingImagePanel(converted, 300, 300)));
                f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                f.pack();
                f.setVisible(true);
            }
        });
    }
} 
```

Works for me:![Using octree](../Images/9b7e074103148fe48c5cc1db4c51487f.png)

Edit: tried with your median cut and seems to work as well, though much slower.

![Using median cut](../Images/243f6208cfddc01077bb4455d8039ca3.png)

# asp.net-mvc-4 - Asp.net MVC4，defaultRedirect 不起作用？

> ID：15312925
> 
> 赞同：0
> 
> 时间：2013-03-09T16:17:08.603
> 
> 标签：asp.net-mvc-4

网页配置

```
<customErrors mode="On" defaultRedirect="~/Error/HttpError"> // is not working
    <error redirect="~/Error/NotFound" statusCode="404" />
    <error redirect="~/Error/HttpError" statusCode="500" /> // also it is not working
</customErrors> 
```

错误控制器

```
public class ErrorController : Controller
{
    //
    // GET: /Error/

    public ActionResult HttpError()
    {
        return Content("HttpError was called!");
        //return View("Error");
    }

    public ActionResult NotFound(string aspxerrorpath)
    {
        return View();
    }

    public ActionResult Index()
    {
        return RedirectToAction("Index", "Home");
    }
} 
```

对于 404 错误，它也会调用 NotFound 操作，但对于其他错误，它从未命中 HttpError 方法。

```
public ActionResult ETest()
{
    throw new Exception("yahoo");
} 
```

我运行上面的测试代码，直接进入Error.cshtml页面。

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T18:00:50.447

你的 FilterConfigs.cs 中有这个吗？

```
public static void RegisterGlobalFilters(GlobalFilterCollection filters)
{
    filters.Add(new HandleErrorAttribute());
} 
```

HandleError 属性是处理默认错误所必需的。

# csv - 更改 Gnumeric 文本导入导出默认设置

> ID：15312927
> 
> 赞同：5
> 
> 时间：2013-03-09T16:17:13.760
> 
> 标签：csv, gnumeric

我正在使用 Gnumeric 电子表格导入、更新和导出由管道“|”分隔的 csv 文件 分隔器。Gnumeric 默认通过其 .gnumeric 文件扩展名将其文件保存为 xml。因此，用户需要通过数据 > 获取外部数据 > 导入文本文件来导入文件。然后用户必须导航向导以选择导入选项。用户下次导入文件时不会“记住”这些默认设置。该过程应该与导出类似（通过另存为>文本（可配置），但我没有看到导出向导。

有没有办法更改 Gnumeric 的 DEFAULT 设置，以便它使用管道分隔符导入/导出 .csv 文件并将所有数据视为文本（不是一般）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T11:57:35.803

目前没有办法做到这一点。实现此功能的最简单方法可能是一个新插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-14T13:31:21.550

我解决了编写包装脚本 gnumeric.sh 的问题，该脚本将分号转换为逗号（在该逗号之前为`::`），将其写入临时文件并使用 gnumeric 打开该文件（csv 来自服务器生成从浏览器保存/打开的数据）

结果我仍然遇到了相同或类似的陷阱，因为 gnumeric 自动检测日期格式错误……这是可以配置的，但不能从命令行配置。

# c# - 用 C# 开发基于控制台的银行应用程序！

> ID：15312934
> 
> 赞同：-2
> 
> 时间：2013-03-09T16:17:42.673
> 
> 标签：c#, .net, arrays, c#-3.0

我正在用 C# 开发一个基于控制台的银行应用程序！我必须动态获取帐户的详细信息。我很困惑使用对象数组还是列表。因为我是初学者，所以我对两者都不太了解。谁能帮我用什么？我应该分别保存储蓄账户和透支账户的详细信息。我应该根据帐号检索数据以执行提款和存款。所以请帮助我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T16:21:31.880

除非您知道不同之处，否则[将 a`List<T>`](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)用于所有内容。`List`s 在幕后实现所谓的动态数组，它是一个常规数组，其大小可按需增加。

示例用法：

```
// Create an integer array
List<int> list = new List<int>();

// Add 5 numbers
list.Add(1);
list.Add(5);
list.Add(3);
list.Add(4);
list.Add(2);

// Get value at index 0 and write to console
Console.WriteLine(list[0]); // 1 
```

这是 .NET 3.5 中引入的使用 LINQ 的一些更高级的用法。

```
// Get all values less than 4 and put into an 'IEnumerable'
var lessThanFour = list.Where(e => e < 4);

// Write all values less than 4 to the console
foreach (var val in lessThanFour)
{
    Console.WriteLine(val);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T16:22:12.823

好的。我将帮助您设计数据结构，但我怀疑有人会直接给您代码。

* * *

**账户类**

听起来，对我来说，你想要一个班级帐户。An`Account`可能具有某些值：

*   账户持有人。
*   一个帐号。
*   平衡。

这应该让您对`Account`类中的字段有所了解。

就类的功能而言，您似乎希望能够：

*   获取帐号。
*   获取账户余额
*   获取帐户持有人。
*   设置新的账户余额

您还提到您需要不同类型的帐户。阅读一些关于[继承](http://msdn.microsoft.com/en-gb/library/ms173149%28v=vs.80%29.aspx)的内容，这应该会激发你的创造力。

* * *

**存储机制**

如果是我，我会将其存储在[List](http://msdn.microsoft.com/en-gb/library/6sh2ey19.aspx)中。列表是一个动态对象，这意味着您可以在其中存储任意数量的帐户对象。要使用列表，您应该阅读提供的文档。

* * *

希望这将帮助您解决问题。:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T16:23:21.037

您并没有真正说出您需要对您的集合做什么，但总体而言，a`List<someObject>`将更加灵活，但会导致更多的性能损失。

如果您正在使用`someObject[]`，它可能会提高性能，但会牺牲“功能”。

基本上，摇滚`List<someObject>`并玩得开心。

# javascript - 从表单字段中获取最高数字

> ID：15312938
> 
> 赞同：2
> 
> 时间：2013-03-09T16:17:51.840
> 
> 标签：javascript, jquery, html

我有一个 html 表单，我想使用 javascript 从字段中提取最高数字。例如：

```
 <input id="temp_**0**__Amount" name="temp[**0**].Amount" type="text" value="lorum ipsum">
<input id="temp_**1**__Amount" name="temp[**1**].Amount" type="text" value="lorum ipsum">
<input id="temp_**2**__Amount" name="temp[**2**].Amount" type="text" value="lorum ipsum"> 

```

在这种情况下，我想要一个 javascript 来生成 2。

我正在尝试使用 jQuery，但我无法再进一步：

```
$('input[name^="temp"]').last().name; 
```

这会产生`temp[2].Amount`. 但我只想提取 2。不是整个句子。而且我知道我可以只使用子字符串之类的东西，但我想知道是否有一种“干净”的方式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T16:22:47.757

```
var max = Math.max.apply(Math, $('input').map(function(){
      return this.name.match(/\d+/);
}).get());

console.log(max); 
```

[http://jsfiddle.net/fmpw3/](http://jsfiddle.net/fmpw3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T16:22:43.093

如果您只想提取数字 2：

```
$('input[name^="temp"]').size()-1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T16:22:43.110

在此处使用 data- 属性：-

```
<input id="temp_0__Amount" name="temp[0].Amount" data-amount="0" type="text" value="lorum ipsum">
<input id="temp_1__Amount" name="temp[1].Amount" data-amount="1" type="text" value="lorum ipsum">
<input id="temp_2__Amount" name="temp[2].Amount" data-amount="2"  type="text" value="lorum ipsum"> 
```

您可以在 jquery 中获得价值：-

```
 var amount = $('input[name^="temp"]').last().data('amount'); 
```

在此处查看现场演示[现场演示链接](http://jsfiddle.net/eL2ne/2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T16:27:00.800

有点花哨（另一种解决方案）：

```
var max = $('input').map(function(){
   return this.name.match(/\d+/);
}).get().sort().reverse()[0]; 
```

[http://jsfiddle.net/wSmEV/](http://jsfiddle.net/wSmEV/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-09T16:34:21.633

尝试：

```
var lastName = $('input[name^="temp"]').find(":last").prop("name"),
    amount = lastName.replace(/^temp\[|\]\.Amount/g,''); 
```

# ruby-on-rails-3 - Rails 3 - 为什么在 Mongoid 游标上调用 .first 开始新的查询

> ID：15312939
> 
> 赞同：0
> 
> 时间：2013-03-09T16:17:56.353
> 
> 标签：ruby-on-rails-3, mongodb, mongoid

我一直在分析我网站上的速度，我发现它有问题。这是我的控制器：

```
 before_filter :authorize
  before_filter :load_stuff

  def load_stuff
    @messages = current_user.messages.desc(:created_at).limit(5)
    @accounts = current_user.accounts.limit(5)
    @searches = current_user.searches.desc(:updated_at).where(complete: true).limit(5)
    @last_message = @messages.first.message_body if @messages.first.present?
    @last_video = @messages.first.video_id if @messages.first.present?
  end

  def index
    @message = Message.new url: @last_video, message_body: @last_message
  end 
```

这是它生成的查询列表：

```
Processing by PromoteController#index as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7179ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tp3_development collection=users selector={"_id"=>"5130abdfc9f2672059000005"} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields=nil (0.3302ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tp3_development collection=messages selector={"$query"=>{"user_id"=>"5130abdfc9f2672059000005"}, "$orderby"=>{"created_at"=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.5000ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tp3_development collection=messages selector={"$query"=>{"user_id"=>"5130abdfc9f2672059000005"}, "$orderby"=>{"created_at"=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.3879ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tp3_development collection=messages selector={"$query"=>{"user_id"=>"5130abdfc9f2672059000005"}, "$orderby"=>{"created_at"=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.3750ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tp3_development collection=messages selector={"$query"=>{"user_id"=>"5130abdfc9f2672059000005"}, "$orderby"=>{"created_at"=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.3281ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tp3_development collection=accounts selector={"user_id"=>"5130abdfc9f2672059000005"} flags=[:slave_ok] limit=5 skip=0 batch_size=nil fields=nil (0.3731ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tp3_development collection=searches selector={"$query"=>{"user_id"=>"5130abdfc9f2672059000005", "complete"=>true}, "$orderby"=>{"updated_at"=>-1}} flags=[:slave_ok] limit=5 skip=0 batch_size=nil fields=nil (3.7348ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tp3_development command={:count=>"messages", :query=>{"user_id"=>"5130abdfc9f2672059000005"}} (0.3629ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tp3_development collection=messages selector={"$query"=>{"user_id"=>"5130abdfc9f2672059000005"}, "$orderby"=>{"created_at"=>-1}} flags=[:slave_ok] limit=5 skip=0 batch_size=nil fields=nil (0.3257ms)
  Rendered promote/index.html.erb within layouts/application (7.4ms)
Completed 200 OK in 17ms (Views: 11.3ms) 
```

现在如果我删除这两行：

```
@last_message = @messages.first.message_body if @messages.first.present?
@last_video = @messages.first.video_id if @messages.first.present? 
```

比查询数下降到这个：

```
Processing by PromoteController#index as HTML
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.5271ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tp3_development collection=users selector={"_id"=>"5130abdfc9f2672059000005"} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields=nil (0.2854ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tp3_development collection=accounts selector={"user_id"=>"5130abdfc9f2672059000005"} flags=[:slave_ok] limit=5 skip=0 batch_size=nil fields=nil (0.5162ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tp3_development collection=searches selector={"$query"=>{"user_id"=>"5130abdfc9f2672059000005", "complete"=>true}, "$orderby"=>{"updated_at"=>-1}} flags=[:slave_ok] limit=5 skip=0 batch_size=nil fields=nil (6.1519ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tp3_development command={:count=>"messages", :query=>{"user_id"=>"5130abdfc9f2672059000005"}} (0.3920ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tp3_development collection=messages selector={"$query"=>{"user_id"=>"5130abdfc9f2672059000005"}, "$orderby"=>{"created_at"=>-1}} flags=[:slave_ok] limit=5 skip=0 batch_size=nil fields=nil (0.2959ms)
  Rendered promote/index.html.erb within layouts/application (11.2ms)
Completed 200 OK in 99ms (Views: 15.4ms) 
```

所以我的问题是，为什么这两行会产生 4 个额外的查询，以及如何避免它？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-11T17:15:22.627

因为 **@messages**是您的 mongoid 标准

这意味着它不会触发查询，它会为您构建查询（如 arel）并且不像

缓存查询结果的关系数据库 mongodb 不会缓存您的查询

所以例如假设上面

```
Does MongoDB handle caching?
Yes. MongoDB keeps all of the most recently used data in RAM. If you have created indexes for your queries and your working data set fits in RAM, MongoDB serves all queries from memory.

MongoDB does not implement a query cache: MongoDB serves all queries directly from the indexes and/or data files. 
```

直接从 Mongo 文档中检查[此](https://stackoverflow.com/questions/6112420/mongoid-query-caching)问题的答案

1个**查询**

`@messages.first.present?`

**2 查询**

`@messages.first.message_body`

**3 查询**

`@messages.first.present?`

**4 查询**

`@messages.first.video_id`

天哪，我必须做好的事情是准确的，你不必担心它

a) MongoDB 旨在提高读取操作的速度。

b) 如前所述，如果 mongo 文档如果您从查询创建索引，则很可能会更改查询结果将从内存中获取

**注意：**我知道在 mongoid 的[这个](http://mongoid.org/en/mongoid/docs/extras.html#caching)缓存中我不知道它做了什么，因为我上次尝试它的工作方式不是它记录的方式

# spring - Servlet/EJB 容器与 Spring 容器

> ID：15312945
> 
> 赞同：-1
> 
> 时间：2013-03-09T16:18:03.943
> 
> 标签：spring, websphere, tomcat5.5

如果这是正确的[Spring vs EJB。Spring可以替代EJB吗？](https://stackoverflow.com/questions/1779169/spring-vs-ejb-can-spring-replace-ejb).

我的问题：**Spring 是不是一套超级应用服务器？**

如果 Spring（开源）是一个容器，它是 EJB 容器的一个很好的替代品，那么像 WAS（读取许可）、WebLogic（读取开源）这样的应用服务器有什么用？如果需要 web 容器，我们可以使用 tomcat5/6

假设：tomcat 7 不用作 Prod 环境中的应用程序服务器，并且可以与 Spring 一起使用（而不是 EJB）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T14:25:52.887

不，spring 不是应用服务器的超级集合。Spring 依赖于某种底层服务器（您可以启动/停止的东西，例如 Tomcat、WebSphere、WebLogic 等），并且对于大多数实际目的，Spring 也依赖于具有 servlet 容器的服务器。

# android - Android Listview：如何更改 xml 中的字体样式和字体颜色？并在 xml 中显示分隔符

> ID：15312946
> 
> 赞同：0
> 
> 时间：2013-03-09T16:18:04.810
> 
> 标签：android

我是android编程新手..我只想问如何在xml中更改字体样式和字体颜色???..以及如何在xml中显示分隔符？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T16:26:47.160

使用 android:textcolor 颜色和 android:typeface 字体以使用自定义字体，您可以使用 java 中的以下内容

```
TextView text = (TextView) findViewById(R.id.textview03);
Typeface tf = Typeface.createFromAsset(getAssets(), "fonts/Molot.otf");
text.setTypeface(tf); 
```

您将自定义字体文件放在 assets 文件夹中的位置。

# ios - Facebook iOS SDK 登录

> ID：15312950
> 
> 赞同：0
> 
> 时间：2013-03-09T16:18:29.857
> 
> 标签：ios, facebook

我正在尝试将 Facebook iOS SDK 添加到我的移动应用程序中。我有它，所以它可以登录，但想知道我该怎么做，所以当按下登录时它不会带我去 safari。如何在我的应用程序中获得一个用于登录的弹出窗口。我正在运行 iOS6。

# python - 选择以给定字符串开头的文件

> ID：15312953
> 
> 赞同：60
> 
> 时间：2013-03-09T16:18:38.507
> 
> 标签：python, file

在一个目录中，我有很多文件，名称或多或少是这样的：

```
001_MN_DX_1_M_32
001_MN_SX_1_M_33
012_BC_2_F_23
...
... 
```

在 Python 中，我必须编写一个代码，从目录中选择一个以某个字符串开头的文件。例如，如果字符串是`001_MN_DX`，Python 选择第一个文件，依此类推。

我该怎么做？

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2013-03-09T17:16:59.430

```
import os
prefixed = [filename for filename in os.listdir('.') if filename.startswith("prefix")] 
```

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2013-03-09T16:25:24.510

尝试使用`os.listdir`和。 长格式（带有 for 循环），`os.path.join``os.path.isfile`

```
import os
path = 'C:/'
files = []
for i in os.listdir(path):
    if os.path.isfile(os.path.join(path,i)) and '001_MN_DX' in i:
        files.append(i) 
```

带有列表理解的代码是

```
import os
path = 'C:/'
files = [i for i in os.listdir(path) if os.path.isfile(os.path.join(path,i)) and \
         '001_MN_DX' in i] 
```

[在这里](https://stackoverflow.com/revisions/15313024/2)查看详细的解释......

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2019-06-24T20:44:48.777

您可以使用模块**glob**，它遵循 Unix shell 规则进行模式匹配。 [看更多。](https://docs.python.org/fr/3.6/library/glob.html)

```
from glob import glob

files = glob('*001_MN_DX*') 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-03-09T16:30:56.443

```
import os, re
for f in os.listdir('.'):
   if re.match('001_MN_DX', f):
       print f 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-03-09T16:40:44.050

您可以使用 os 模块列出目录中的文件。

例如：查找当前目录下所有名称以 001_MN_DX 开头的文件

```
import os
list_of_files = os.listdir(os.getcwd()) #list of files in the current directory
for each_file in list_of_files:
    if each_file.startswith('001_MN_DX'):  #since its all type str you can simply use startswith
        print each_file 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-03-31T18:26:41.610

使用较新的`pathlib`模块，请参阅[链接](https://realpython.com/python-pathlib/#reading-and-writing-files)：

```
from pathlib import Path
myDir = Path('my_directory/')

fileNames = [file.name for file in myDir.iterdir() if file.name.startswith('prefix')]    
filePaths = [file for file in myDir.iterdir() if file.name.startswith('prefix')] 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2018-04-09T17:30:40.170

```
import os
 for filename in os.listdir('.'):
    if filename.startswith('criteria here'):
        print filename #print the name of the file to make sure it is what 
                               you really want. If it's not, review your criteria
                #Do stuff with that file 
```

# android - 获取一个最大值的 SQL 查询

> ID：15312956
> 
> 赞同：0
> 
> 时间：2013-03-09T16:19:35.527
> 
> 标签：android, sql, sqlite, max

你好堆栈溢出：D

我正在构建一个带有需要某种排序的列表视图的 android 应用程序，因为它可以重新洗牌。所以我的数据库中有一个排序列，它保存数据库中每个值的位置。现在，每当我在列表中创建一个新元素时，我希望它的排序值为`maximum+1`，因此它将位于列表的末尾。问题是，我不知道如何编写将返回一个值的原始查询，并检查它以确保完全检索到一个值（数据库可能为空）。

到目前为止我的努力：

```
Cursor sortcursor = ourDatabase.rawQuery("SELECT MAX(" + KEY_SORT + ") FROM " + TABLE_CASTING + " WHERE " + KEY_USER + "='" + username + "';", null);
int maxSort = sortcursor.getInt(sortcursor.getColumnIndex(KEY_SORT));
maxSort++;
cv.put(KEY_SORT, maxSort); 
```

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T16:35:12.520

在您的情况下，光标只有一列，因此您应该使用`sortcursor.getInt(0)`而不是`sortcursor.getInt(sortcursor.getColumnIndex(KEY_SORT))`. 试试下面的代码：

```
Cursor cursor = ourDatabase.rawQuery("SELECT MAX(" + KEY_SORT + ") FROM " + TABLE_CASTING + " WHERE " + KEY_USER + "='" + username + "';", null);
int maxSort = 0;

if (cursor != null) {
    try {
        if (cursor.moveToFirst() && !cursor.isNull(0)) {
            maxSort = cursor.getInt(0) + 1;
        }
    } finally {
        cursor.close();
    }
}

cv.put(KEY_SORT, maxSort); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T18:00:03.180

下面将起作用，虽然请注意它是用 MYSQL 而不是 sqllite 编写的，但我假设相同的功能可用。我只是将下一个订单值插入到表中，如果表为空则返回 1，如果不是则将值增加 1。第二个子查询返回顺序，但我发现将它与插入结合起来很方便。

```
INSERT INTO table_name (order_column_name) 
VALUES ( 
    (SELECT CASE WHEN MAX(tn.order_column_name) IS NULL THEN 1 
     ELSE MAX(tn.order_column_name)+1 END
     AS order_column_name FROM table_name tn
     ORDER BY tn.order_column_name DESC LIMIT 1)
); 
```

# android - 构建仅在 iPad 和 Android 平板电脑上运行的网站？

> ID：15312957
> 
> 赞同：0
> 
> 时间：2013-03-09T16:19:45.197
> 
> 标签：android, html, tablet, viewport

我有 HTML5 动画内容，希望在 iPad 和 Android 平板电脑上的浏览器中查看。

我已经为 iPad (Safari) 做了一个版本，效果很好。

我最好设计几个不同的网站布局和屏幕尺寸（视口愚蠢），还是可以设计一个使内容适应不同浏览器、屏幕和视口尺寸的网站？

有这方面的在线教程和资源吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T16:36:54.627

最佳做法是

*   检查浏览器功能而不是（品牌）通过用户代理字符串嗅探。
*   就像你说的那样，尽可能地将内容设计为“使内容适应不同浏览器、屏幕和视口大小的单一网站”。说起来容易做起来难，但这是前进的方向......
*   通过应用对目标受众有意义的修复来管理您无法以这种方式做的事情。（就像 IE 条件注释，它可能不适用于 iOS 或 Android，但为什么要停在那里 :)

有很多资源可以找到。搜索以下关键字。“CSS 媒体查询”、“流畅布局”、“响应式设计”、...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T16:49:43.277

HTML5 媒体查询将允许您在不同的视口等上隐藏和显示内容，从而保持相同的 HTML 源代码，但通过链接各种 CSS 样式表来调整其视觉附加性。我倾向于使用：

```
<!-- MOBILE DEVICES -->
<link href="CSS/basic.css" rel="stylesheet" media="screen and (max-device-width: 767px)" />
<!--ANDROID MOBILE FIX-->
<link href="CSS/basic.css" rel="stylesheet" media="screen and (-webkit-device-pixel-ratio: 1.5)" />
<!-- TABLET DEVICES -->
<link href="CSS/tablet.css" rel="stylesheet" media="screen and (min-device-width: 768px) and (max-device-width: 1024px)" />
<!--DESKTOP DEVICES -->
<link href="CSS/desktop.css" rel="stylesheet" media="screen and (min-device-width: 1025px)" /> 
```

这是一个[CSS3 媒体查询教程](http://webdesignerwall.com/tutorials/responsive-design-with-css3-media-queries)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T16:38:11.720

您应该始终尝试制作根据屏幕尺寸改变尺寸的流体/液体网站布局（基于屏幕宽度/高度的百分比）。

如果此“动画内容”具有固定大小的元素，您可能会在侧面添加一些黑条以在 Android 平板电脑上弥补这一点。

[一些像Bootstrap](http://twitter.github.com/bootstrap/)这样的前端框架可以为你处理所有的流动性。

# java - 我可以使用关键字 default 声明类或成员吗？

> ID：15312961
> 
> 赞同：0
> 
> 时间：2013-03-09T14:19:52.230
> 
> 标签：java, keyword

我可以使用关键字*default*声明一个类默认值吗？例如：

```
default class Test{

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T16:26:07.020

没有称为 as 的访问修饰符`default`，如果您没有为类或方法指定任何修饰符，则隐式地，它们默认为包私有。

但是，Java 有一个`default`关键字，用于`switch` `case`语句中。如果在任何情况下都没有提供的选项，并且您指定了默认行为，那么将使用该选项。

例如，

```
public class SwitchDemo {
    public static void main(String[] args) {

        int month = 8;
        String monthString;
        switch (month) {
            case 1:  monthString = "January";
                     break;
            case 2:  monthString = "February";
                     break;
            case 3:  monthString = "March";
                     break;
            case 4:  monthString = "April";
                     break;
            case 5:  monthString = "May";
                     break;
            case 6:  monthString = "June";
                     break;
            case 7:  monthString = "July";
                     break;
            case 8:  monthString = "August";
                     break;
            case 9:  monthString = "September";
                     break;
            case 10: monthString = "October";
                     break;
            case 11: monthString = "November";
                     break;
            case 12: monthString = "December";
                     break;
            default: monthString = "Invalid month";
                     break;
        }
        System.out.println(monthString);
    }
} 
```

在这里，如果您给出了任何无效的月份，那么它将属于默认部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-04T10:44:46.057

java 8 有一个新特性，使用 default 关键字我们可以在接口中定义方法。

```
interface I {
   public default void show() {
     System.out.println("Hello");
   }
} 
```

在 Java 8 [JLS-13.5.6 中描述。接口方法声明](http://docs.oracle.com/javase/specs/jls/se8/html/jls-13.html#jls-13.5.6)

> 添加默认方法或将方法从抽象更改为默认方法不会破坏与预先存在的二进制文件的兼容性，但如果预先存在的二进制文件尝试调用该方法，则可能会导致 IncompatibleClassChangeError。如果限定类型 T 是两个接口 I 和 J 的子类型，其中 I 和 J 都声明具有相同签名和结果的默认方法，并且 I 和 J 都不是另一个的子接口，则会发生此错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-18T16:33:31.263

“如果你没有为类或方法指定任何修饰符，隐含地，它们默认为包私有”这句话是完全错误的。如果一个类是私有的，那么即使在同一个包中，该类也无权访问。但是，如果我们不提及任何访问说明符，则该类将被视为在包内具有访问权限的默认类。

# java - Spring IOC GenericXmlApplicationContext 不起作用组件扫描

> ID：15312965
> 
> 赞同：0
> 
> 时间：2013-03-09T16:20:23.483
> 
> 标签：java, spring

全部！

我有这个片段：

```
SomeCustomClassLoader customClassLoader = new SomeCustomClassLoader();
GenericXmlApplicationContext ctx = new GenericXmlApplicationContext();
ctx.setClassLoader(customClassLoader);
ctx.load(new ByteArrayResource(bytesData));
ctx.refresh();
Object testService = ctx.getBean("testService"); 
```

我正在尝试使用自定义类加载器创建新的应用程序上下文。上下文文件如下所示：

```
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
           http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
           http://www.springframework.org/schema/context
           http://www.springframework.org/schema/context/spring-context-3.1.xsd
           ">

    <context:annotation-config />

    <context:component-scan base-package="some.base.package" />

    <bean name="testService" class="some.base.package.TestService"/>
</beans> 
```

问题：如果只有在上下文文件中明确声明，为什么我可以得到*TestService ，如果这个服务有**@Service*注释它没有被创建。如何启用组件扫描。我的代码有什么问题？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T10:00:11.470

我认为问题出在[https://jira.springsource.org/browse/SPR-3815](https://jira.springsource.org/browse/SPR-3815)。

调试 Spring Core 后的解决方案可能如下所示：

如果我们查看**GenericXmlApplicationContext**类，我们将看到它具有字段（xml 阅读器）

```
private final XmlBeanDefinitionReader reader = new XmlBeanDefinitionReader(this); 
```

这将被称为请求**BeanDefinitionRegistry的调用链**

在扫描类进程期间将要求获取资源，其中参数将如下所示：**classpath*:some/package/name/**/*.class**

**org.springframework.context.annotation.ClassPathScanningCandidateComponentProvider#findCandidateComponents**

这意味着 GenericXmlApplicationContext 可能有重写的方法来负责：

```
GenericXmlApplicationContext ctx = new GenericXmlApplicationContext() {
    @Override
    public Resource[] getResources(String locationPattern) throws IOException {
        if(locationPattern.endsWith(".class")) {
            List<byte[]> classes = customClassLoader.getAllClasses();
            Resource[] resources = new Resource[classes.size()];
            for (int i = 0; i < classes.size(); i++) {
                resources[i] = new ByteArrayResource(classes.get(i));
            }
            return resources;
        }

        return super.getResources(locationPattern);
    }
}; 
```

# xpages - XPages 扩展库 - 在工具栏节点中选择值

> ID：15312966
> 
> 赞同：0
> 
> 时间：2013-03-09T16:20:24.403
> 
> 标签：xpages, lotus-notes

我正在使用 Xpages 为现有数据库开发新的用户界面。在 Notes 客户端中，数据库有一个操作，用户可以在其中设置多个文档的状态。在提示框中，用户可以选择状态，然后将所选状态设置为所有选定的文档。

在我的 XPages 界面中，我使用扩展库中的工具栏控件创建了操作栏。当我使用硬编码状态时，一切正常，但是当用户单击工具栏操作时，我不知道如何向用户显示值选择器或类似的东西。

任何其他解决我的问题的概念也值得赞赏。也许还有其他（更好的）方法可以在 Xpages 中实现这个过程。

提前致谢

约尔格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T13:11:34.777

您可能可以在操作栏中使用带有各种选项的下拉按钮。如果它们需要可配置，您可以为下拉值选择重复节点。您不想在 Web 应用程序中出现弹出窗口 - 这是客户端应用程序 UI 样式

# css - 链接样式仅在列表中的特定链接

> ID：15312978
> 
> 赞同：2
> 
> 时间：2013-03-09T16:21:14.110
> 
> 标签：css

我有一个看起来像这样的列表 CSS 样式：

```
.my-list {
    text-align: center;
    list-style: none;
    a { color: #000000; }
} 
```

我想用另一种颜色设置此列表中某些链接的颜色。我怎样才能做到这一点？

```
<li class=my-list>

    <a href="www.blah.com">this link is black</a>

    <a href="www.blahblah.com">I WANT THIS LINK TO BE ANOTHER COLOR</a>

</li> 
```

我想要一个不需要手动更改链接颜色的 CSS 解决方案来解决这个问题。我有很多这样的列表，手动解决方案是不可行的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T16:23:30.890

使用`nth-child`CSS3 选择器`<a>`通过它的索引来选择元素`<li>`：

```
.my-list a:nth-child(2) {
    color: red;
} 
```

示例：http: [//jsfiddle.net/6hCWY/](http://jsfiddle.net/6hCWY/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T16:23:33.617

您要在`a`之后添加`mylist`以表明您要将其应用于`CSS`标签`a`。您可以使用`pseudo selectors, first-child, nth-child`在列表中选择特定标签：

```
.my-list a {
    background-color : #000000; 
} 
```

使用`first-child`伪选择器。

```
.my-list a:first-child {
    background-color: red;
} 
```

**选择列表中的第二个链接**

使用`nth-child selector`：

```
.my-list a:nth-child(2) {
    background-color: red;
} 
```

[http://jsfiddle.net/6JSSJ/](http://jsfiddle.net/6JSSJ/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T16:23:40.457

利用：

```
.my-list {
  //some styles here
}
.my-list a {
  //some styles for links here
} 
```

您不能将 CSS 嵌套在块中，它不像编程语言。将一个块嵌套在另一个块中的唯一情况是定义媒体查询。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-09T16:25:23.250

向您想要不同颜色的链接添加一个类：

```
.my-list {
    text-align: center;
    list-style: none;
}

.my-list a.diffcolor {
    color:red

} 
```

然后，您可以在班级中标记您想要具有该颜色的那些。

```
<li class=my-list>

    <a href="www.blah.com">this link is black</a>

    <a href="www.blahblah.com" class="diffcolor">I WANT THIS LINK TO BE ANOTHER COLOR</a>

</li> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-09T16:25:47.713

您可以添加额外的 CSS 类或使用属性选择器[http://css-tricks.com/attribute-selectors/](http://css-tricks.com/attribute-selectors/)

# list - Haskell 模式匹配出错了

> ID：15312981
> 
> 赞同：2
> 
> 时间：2013-03-09T16:21:47.263
> 
> 标签：list, haskell, pattern-matching

我正在学习一些 Haskell，并且试图了解模式匹配的工作原理。为此，我编写了一个简单的`nth`函数。

```
nth' :: Integer -> [a] -> a
nth' n [] = error "Index out of bound"
nth' n (x:xs) = if n == 0 then x else nth' (n - 1) xs 
```

这第一个实现似乎按预期工作。

```
-- nth' 25 ['a'..'z']
-- 'z'
-- nth' 26 ['a'..'z']
-- *** Exception: Index out of bound 
```

但是，当我重构它用模式匹配替换 if 语句时，我最终得到了“索引越界”异常，而我显然不应该这样做。

```
nth' :: Integer -> [a] -> a
nth' _ [] = error "Index out of bound"
nth' 0 (x:[]) = x
nth' n (_:xs) = nth' (n - 1) xs

-- nth' 2 ['a'..'z']
-- *** Exception: Index out of bound 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-09T16:25:19.850

该模式`x:[]`匹配一​​个只包含一个元素的列表。因此`nth' 0 (x:[])`，仅当第一个参数为 0 且第二个参数为单元素列表时，才会执行您的案例。如果第二个参数是一个包含多个参数的列表，它将进入最后一种情况。

您需要将第二种情况更改为`nth' 0 (x:_) = x`，以便无论列表中有多少元素（只要它至少是一个），它都匹配。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-09T16:26:03.933

有问题的条款：

```
nth' 0 (x:[]) = x 
```

它只匹配一个元素列表。尝试更改它：

```
nth' 0 (x:_) = x 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T16:35:30.400

尝试：

```
 nth' :: Integer -> [a] -> a
    nth' _ [] = error "Index out of bound"
    -- nth' 0 (x:[]) = x -- matches one element list x:[] = [x]
    nth' 0 (x:_) = x     -- matches first element and everything (not just empty list)
    nth' n (_:xs) = nth' (n - 1) xs 
```

# ruby - 使用 rvm 在我的 linux 终端中出错

> ID：15312983
> 
> 赞同：2
> 
> 时间：2013-03-09T16:21:55.107
> 
> 标签：ruby, linux, bash, terminal, rvm

这个错误是什么意思？它发生在我的 ubuntu VM 上的终端

```
bash: /home/greg/.bashrc: line 110: conditional binary operator expected
bash: /home/greg/.bashrc: line 110: syntax error near `"$HOME/.rvm/scripts/rvm"'
bash: /home/greg/.bashrc: line 110: `[[ -s "$HOME/.rvm/scripts/rvm"]] && source $HOME/.rvm/scripts/rvm"' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T16:24:32.263

这里需要一个空格，就在`]]`：

```
`[[ -s "$HOME/.rvm/scripts/rvm"]] 
```

如：

```
`[[ -s "$HOME/.rvm/scripts/rvm" ]] 
```

# sql - RODBC - 一个 sqlQuery() 调用中的多个语句

> ID：15312984
> 
> 赞同：2
> 
> 时间：2013-03-09T16:21:55.167
> 
> 标签：sql, r

在 R 中，每当我将带有多个语句的查询传递给 sqlQuery 时，都会出现错误。例如，

```
sqlQuery(ch, 'DROP TABLE IF EXISTS t1; DROP TABLE IF EXISTS t2;') 
```

产生错误

```
[1] "42000 1064 [MySQL][ODBC 5.1 Driver][mysqld-5.5.27]You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'DROP TABLE IF EXISTS t2' at line 1"
[2] "[RODBC] ERROR: Could not SQLExecDirect 'DROP TABLE IF EXISTS t1; DROP TABLE IF EXISTS t2;'" 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T10:12:21.067

首先，尝试 R 中的一个语句`Drop table if exists t1`；对我来说（我正在使用 Access 数据库进行测试）这失败了，表明 ODBC`if exists`在我的环境中不支持。MySQL Workbench 中的测试不是一个公平的比较；但是，您的构造可能适用于 RMySQL 包提供的函数。

ODBC 在很多方面都不同，所以为了测试是否可行，我通常使用 Access 通过 ODBC 连接到数据库并使用 SQL 设计器。以下内容在那里不起作用：

```
CREATE TABLE b (id INT PRIMARY KEY);
DROP TABLE b; 
```

作为单独的陈述，它可以正常工作。

# java - 生成反向词

> ID：15312986
> 
> 赞同：0
> 
> 时间：2013-03-09T16:22:03.733
> 
> 标签：java

我是java的初学者，我正在网上做练习题。我尝试过这个问题，但我不明白这个错误。

编写一个名为 processName 的方法，该方法接受控制台的 Scanner 作为参数并提示用户输入他或她的全名，然后以相反的顺序打印名称（即姓氏、名字）。您可以假设只会给出名字和姓氏。您应该使用扫描仪一次读取整行输入，然后根据需要将其拆分。这是与用户的示例对话：

请输入您的全名：Sammy Jankis 您的名字倒序是 Jankis，Sammy

```
public static void processName(Scanner console) {
    System.out.print("Please enter your full name: ");

    String full=console.nextLine();

    String first=full.substring(0," ");
    String second=full.substring(" ");

    System.out.print("Your name in reverse order is: "+ second + "," + first);

} 
```

也许我会解释我的代码。所以我尝试将这两个词分开。所以我使用子字符串来找到这两个词，然后我硬编码来反转它们。我认为逻辑是正确的，但我仍然得到这些错误。

```
Line 6
You are referring to an identifer (a name of a variable, class, method, etc.) that is not recognized. Perhaps you misspelled it, mis-capitalized it, or forgot to declare it?
cannot find symbol
symbol  : method substring(int,java.lang.String)
location: class java.lang.String
    String first=full.substring(0," ");
                     ^
Line 7
You are referring to an identifer (a name of a variable, class, method, etc.) that is not recognized. Perhaps you misspelled it, mis-capitalized it, or forgot to declare it?
cannot find symbol
symbol  : method substring(java.lang.String)
location: class java.lang.String
    String second=full.substring(" ");
                      ^
2 errors
33 warnings 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T16:26:29.843

查看[substring()](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#substring%28int,%20int%29)方法的文档。它不将字符串作为其第二个参数。

```
 String first=full.substring(0," ");
  String second=full.substring(" "); 
```

您可能想要的是[indexOf()](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#indexOf%28java.lang.String%29)方法。首先找到空格字符的索引。然后找到直到该点的子字符串。

```
 int n = full.indexOf(" ");
  String first=full.substring(o, n); //gives the first name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T16:25:18.507

```
public static void processName(Scanner console) {
    System.out.print("Please enter your full name: ");

    String[] name = console.nextLine().split("\\s");

    System.out.print("Your name in reverse order is: "+ name[1] + "," + name[0]);

} 
```

当然，它仅在名称有 2 个单词时才有效。对于更长的名称，您应该编写一个反转数组的方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T16:29:20.593

转到这里[http://docs.oracle.com/javase/6/docs/api/java/lang/String.html](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html)并阅读以了解。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T16:25:46.073

根据 Java API，`substring()`接受一个 int 参数`substring(int beginIndex)`和两个 int 参数，`substring(int startIndex, int endIndex)`但您使用字符串参数调用。所以你得到了这些错误。更多信息可以在这里找到 [String API](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-02-24T03:13:29.413

```
public class ex3_11_padString {
    public static void main(String[] args) {
        System.out.print("Please enter your full name: ");
        String f_l_Name = console.nextLine();
        String sss[] = f_l_Name.split(" ", 2);
        System.out.print("Your name in reverse order is " + sss[1] + ", " + sss[0]);
    }
} 
```

# php - 通过传入标准字符串未定义的属性

> ID：15312988
> 
> 赞同：0
> 
> 时间：2013-03-09T16:22:10.460
> 
> 标签：php, class, undefined

它返回通知：未定义的属性：C:\wamp\www\classes\Profile.class.php 中的 stdClass::$testing@e-mail.com

我知道解决方案很接近......但是为什么？请帮忙。

代码如下：

```
$this -> set('userFname', $this -> p -> get_value_by_Profile("testing@e-mail.com"));

function get_value_by_Profile($value){
         return $this->get_from_table("user",$value,"userID",1);    
    }

function get_from_table($table,$value,$column,$where){

    $this->dbo->setFetchMode(Zend_Db::FETCH_OBJ);

    $select = $this->dbo->select()
    ->from($table)
    ->where($column.' = ?', $where);
    $obj =  $this->dbo->fetchRow($select);  

    if($obj)
    return $obj->$value;    
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T16:29:52.740

尝试将 return 语句更改为：

```
return $obj->$column; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T16:40:52.393

```
you read you code carefully you are retuning 
$obj->testing@e-mail.com; 
but you need to return 
$obj->userID;
means return 
$obj->$column; 
```

# mysql - mysql优化

> ID：15312993
> 
> 赞同：0
> 
> 时间：2013-03-09T16:22:36.840
> 
> 标签：mysql, sql, query-optimization, indexing

我想请您帮忙优化电子商店应用程序的一部分。我有一个在 MySQL 上运行的数据库，在进行大型产品导入时，我在性能上苦苦挣扎。特别是，有以下表格（省略不重要的字段）：

这是商店中可用的产品表。除此信息外，它还包含价格、成本、尺寸和其他目前不重要的内容，大小约为 15,000 行。

```
product {
  `product_id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `model_number` varchar(16) NOT NULL,
  `codemaster_id` int(16) NOT NULL
} 
```

该表设置了所有车辆的配置，这些车辆的大小约为 500,000 行。

```
vehicle_superconfig {
  `EngineConfigID` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `EngineDesignationID` int(11) NOT NULL,
  `EngineVINID` int(11) NOT NULL,
  `ValvesID` int(11) NOT NULL,
  `EngineBaseID` int(11) NOT NULL,
  `FuelDeliveryConfigID` int(11) NOT NULL,
  `AspirationID` int(11) NOT NULL,
  `CylinderHeadTypeID` int(11) NOT NULL,
  `FuelTypeID` int(11) NOT NULL,
  `IgnitionSystemTypeID` int(11) NOT NULL,
  `EngineMfrID` int(11) NOT NULL,
  `EngineVersionID` int(11) NOT NULL,
  `PowerOutputID` int(11) NOT NULL,
  `VehicleID` int(11) NOT NULL,
  `BaseVehicleID` int(10) unsigned NOT NULL,
  `SubmodelID` int(11) unsigned NOT NULL,
  `SteeringConfigID` int(32) NOT NULL,
  `DriveTypeID` int(10) NOT NULL,
} 
```

此表规定了零件适用于车辆的要求（例如，该螺钉进入 BMW 328i 并仅在欧洲提供这种类型的发动机，它需要预先安装一些其他零件等。如果没有要求对于特定区域，该属性设置为 0（例如，后视镜不关心汽车发动机是否使用汽油或柴油或其他任何东西）。大约大小为 10,000 行。

```
product_application{
  `ID` int(32) unsigned NOT NULL AUTO_INCREMENT,
  `product_id` int(10) unsigned NOT NULL,
  `basevehicle_id` int(10) unsigned NOT NULL,
  `submodel_id` int(10) unsigned NOT NULL,
  `EngineConfigID` int(10) unsigned NOT NULL,
  `EngineDesignationID` int(11) NOT NULL,
  `EngineVINID` int(11) NOT NULL,
  `ValvesID` int(11) NOT NULL,
  `EngineBaseID` int(11) NOT NULL,
  `FuelDeliveryConfigID` int(11) NOT NULL,
  `AspirationID` int(11) NOT NULL,
  `CylinderHeadTypeID` int(11) NOT NULL,
  `FuelTypeID` int(11) NOT NULL,
  `IgnitionSystemTypeID` int(11) NOT NULL,
  `EngineMfrID` int(11) NOT NULL,
  `EngineVersionID` int(11) NOT NULL,
  `PowerOutputID` int(11) NOT NULL,
  `VehicleID` int(11) NOT NULL,
  `BaseVehicleID` int(10) unsigned NOT NULL,
  `SubmodelID` int(11) unsigned NOT NULL,
  `SteeringConfigID` int(32) NOT NULL,
  `DriveTypeID` int(10) NOT NULL,
  ... several other fields that are not used in the queries here
}

// this table determines what kind of part we have
// and where it belongs (e.g. that it is a mirror on right side)
// approximate size 30,000 rows
part_codemaster { 
  `codemaster_id` int(16) NOT NULL,
  `part_type` int(16) NOT NULL,
  `position` int(8) NOT NULL,
} 
```

应用程序获取车辆规格，确定车辆 ID 和引擎配置，并应该列出适合该车辆的部件。位置包括在内，因为某些产品适合很多地方（例如螺丝） 我需要根据上表中的数据填写此表缺少连接（表产品中大约 500 种新产品）。

```
product_to_vehicle {
  `ID` int(64) NOT NULL,
  `product_id` int(10) NOT NULL,
  `vehicle_id` int(10) NOT NULL,
  `engine_config_id` int(16) NOT NULL,
  `position` int(8) NOT NULL
} 
```

如前所述，我的任务是将缺失的连接填充到新导入产品的表 product_to_vehicle 中。我的问题是如何在合理的时间内做到这一点（让我们说在 1 小时内 - 当新的更新出现时，这个查询将在命令行上运行一次左右）。我特别感兴趣的是：

*   我的查询有点愚蠢吗？怎么写比较好？
*   我应该为表生成哪些索引？我的猜测是每一列的索引是不够的......
*   我应该使用什么类型的表（InnoDB 或 MyISAM）？
*   还有什么可以帮助的吗？

我现在使用的查询是：

```
START TRANSACTION;
INSERT IGNORE INTO 
    product_to_vehicle(product_id, vehicle_id, engine_config_id, position) (
    SELECT DISTINCT
        att.product_id,
        sup.vehicle_id,
        sup.engine_config_id,
        c.position as position
    FROM
        product_application as att,
        vehicle_super as sup,
        product as p,
        codemaster as c
    WHERE p.product_id > 10000 AND p.product_id < 10500
      AND (sup.base_vehicle_id = att.base_vehicle_id OR att.base_vehicle_id = 0)
      AND (sup.submodel_id = att.submodel_id OR att.submodel_id = 0)
      AND (att.AspirationID = sup.AspirationID OR att.AspirationID = 0)
      AND (att.DriveTypeID = sup.DriveTypeID OR att.DriveTypeID = 0)
      AND (att.CylinderHeadTypeID = sup.CylinderHeadTypeID OR att.CylinderHeadTypeID =  0)
      AND (att.FuelTypeID = sup.FuelTypeID OR att.FuelTypeID = 0)
      AND (p.CodeMasterID = c.CodeMasterID)
      AND (att.ProductID = p.product_id)
  );
COMMIT; 
```

我为单个产品（p.product_id = 10000）运行了大约 4 个小时的查询，但它仍然没有完成。我很乐意提出任何建议。

# ruby - 安装 OpenSSL 1.0.1e 编译 ruby 1.9.3p392 时出现分段错误

> ID：15312997
> 
> 赞同：1
> 
> 时间：2013-03-09T16:23:16.150
> 
> 标签：ruby, openssl, osx-mountain-lion

我试图让我的 Rails 网站在我全新安装的 Mountain Lion 服务器上运行。不使用 RVM，因为我不需要很多 rails 或 ruby​​ 安装。配置 ruby​​ 和 rails 以使其平稳运行是一件令人头疼的事情。

使用以下命令编译最新版本的 OpenSSL：

```
sudo ./configure --prefix=/usr/local/ darwin64-x86_64-cc
sudo make
sudo make install 
```

现在，当我输入时，我得到了这个：

```
grid:ruby-1.9.3-p392 Clu$ openssl version
OpenSSL 1.0.1e 11 Feb 2013 
```

当我尝试从源代码配置 Ruby 时，我遇到了 Segmentation Fault：

```
compiling md5init.c
compiling md5ossl.c
linking shared-object digest/md5.bundle
installing default md5 libraries
compiling rmd160init.c
compiling rmd160ossl.c
linking shared-object digest/rmd160.bundle
installing default rmd160 libraries
compiling sha1init.c
compiling sha1ossl.c
linking shared-object digest/sha1.bundle
collect2: ld terminated with signal 11 [Segmentation fault: 11]
make[2]: *** [../../../.ext/x86_64-darwin12.2.1/digest/sha1.bundle] Error 1
make[1]: *** [ext/digest/sha1/all] Error 2
make: *** [build-ext] Error 2 
```