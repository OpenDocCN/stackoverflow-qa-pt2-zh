# StackOverflow 问答 13647000-13647999

# javascript - 是否有跨浏览器的方式来防止在纯 Javascript 中剪切、复制和粘贴网站？

> ID：13647000
> 
> 赞同：13
> 
> 时间：2012-11-30T14:21:24.320
> 
> 标签：javascript

我找到了答案，但它是针对 JQuery 的。链接在这里：

[http://jquerybyexample.blogspot.com/2010/12/disable-cut-copy-and-paste-function-for.html](http://jquerybyexample.blogspot.com/2010/12/disable-cut-copy-and-paste-function-for.html)

：我想要一些在 chrome、最新的 firefox、safari 和 IE 8 和 9 上工作的纯 Javascript 的东西。

## 更新

由于所有负面评论都说这对互联网站点来说是个坏主意，我只能说“我同意”。请注意，这适用于需要覆盖剪切、复制和粘贴的“内部网”应用程序，因为需要自定义剪切复制和粘贴的默认浏览器行为以处理富文本区域中的嵌入标签

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-30T14:41:24.470

当然，做这样的事情是不合适的，但这不是@Zubairs 的问题，所以我认为在这里投反对票是不正确的，因为他的观点很清楚。

现在问题来了：如果 jQuery 能做到，那么原生 javascript 当然也能做到。

您必须防止剪切、复制和粘贴事件：

```
document.body.oncopy = function() { return false; }
document.body.oncut = function() { return false; }
document.body.onpaste = function() { return false; } 
```

这可以防止右键单击上下文菜单，如果您使用其他 3 个事件处理程序，则不需要这样做，只是为了让您知道 ;-)

```
document.body.oncontextmenu = function() { return false; } 
```

重要提示：必须加载正文（当然），document.body，因为 IE 需要它（document.oncopy 只能在 chrome/firefox/safari 中工作）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-20T07:28:46.837

一个好方法

```
var D=document.getElementById('b4');

if(D.addEventListener){
D.addEventListener('paste',function(e){false;e.preventDefault();},false);}
else{
D.attachEvent('onpaste',function(){return false;});} 
```

**警告**：代码必须在 html target/s 下，例如在关闭 body 标记之前

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-30T14:36:20.007

编辑：将此添加到正文标签似乎适用于我所有的测试浏览器，包括 Opera、Chrome、Seamonkey（所以我假设是 Firefox）和 IE9

`<body oncopy='return false' oncut='return false' onpaste='return false'>`

如果您想在某些地方允许某些功能而不在其他地方允许某些功能，您可以将它们放在其他标签中

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-30T14:25:35.077

你可以抓住一个`[Ctrl]+[C]`按键：

```
addEventListener("keydown", function(e){
    evt = (e) ? e : window.event; // Some cross-browser compatibility.
    if(evt.ctrlKey && evt.which == 67){ // [x] == 88; [c] == 67; [v] == 86;
        console.log("Ctrl+C pressed!");
        evt.preventDefault(); // Cancel the copy-ing function for the client.
        // Manual Copy / Paste / Cut code here.
    }
});​ 
```

**[工作片段](http://jsfiddle.net/6drrX/)**

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-07-15T15:21:52.083

```
oncopy="return false" oncut="return false" onpaste="return false" 
```

此代码将防止剪切、复制和粘贴网站。

[工作片段](http://faruk247.blogspot.com/2017/07/how-to-disable-cut-copy-and-paste.html)

# xmpp - XMPP名册存在

> ID：13647002
> 
> 赞同：0
> 
> 时间：2012-11-30T14:21:28.743
> 
> 标签：xmpp, user-presence, rostering

我的名册机制有问题，我正在使用 JSJaC javascript 库。

我的情况：

用户 A 有一个简单的名册，其中包含另一个订阅“both”的用户 B。用户 B 具有相同的配置。

当用户 A 登录到 openfire 时，我调用我的“getRoster()”函数返回用户的朋友列表（在我的情况下，只有用户 B），但是我如何检查用户 B 当前是否可以聊天？

我看到有一些存在机制，但我不明白如何使用这些机制。

对不起我糟糕的英语。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-20T18:17:35.220

您应该注册一个`presence`处理程序。假设您有 roster 作为用户数据数组，您可以这样做：

```
xmpp.registerHandler 'presence', (response) ->
  user = _.find @roster, jid: (response.getFrom().split '/').shift()
  if user
    if response.getType() is 'unavailable'
      user.online = no
    else
      user.online = yes 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T20:05:36.340

当您将自己的存在发送到服务器时，服务器开始将您订阅的联系人的所有存在发送给您。默认情况下，您必须将所有联系人视为离线。

我对 JSJaC 不熟悉，但可能存在一个回调。

# c# - 自定义控件属性通知

> ID：13647007
> 
> 赞同：1
> 
> 时间：2012-11-30T14:21:37.430
> 
> 标签：c#, visual-studio-2010, properties, inotifypropertychanged

我正在尝试使用 PenProperties 类创建自定义控件。

![特性](../Images/85b6a479f157f6e76b20554aaee3e64d.png)

除了 DashOffSet 之外，所有其他属性都会在我更改它们后立即更新字符串。我尝试使用 INotifyPropertyChanged 接口但没有成功。我将不胜感激任何帮助谢谢！

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Drawing;
using System.Data;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace CircuitSim
{

[TypeConverter(typeof(PenPropertiesConverter))]
public partial class Grid : UserControl
{
    private PenProperties _PenProp = new PenProperties();
    public Grid()
    {
        InitializeComponent();
    }
    public PenProperties Pen 
    {
        get { return _PenProp; }
        set 
        {
            _PenProp = value;
        }
    }
   }
}

using System;
using System.ComponentModel;
using System.Diagnostics;
using System.Drawing;
using System.Drawing.Drawing2D;

namespace CircuitSim
{

public class GridLinesProperties
{
    private bool _Visible;
    private int _Frequency;
    public PenProperties _PenProp = new PenProperties();
    public GridLinesProperties() { }

}

[TypeConverterAttribute(typeof(PenPropertiesConverter))]
public class PenProperties:INotifyPropertyChanged
{
    #region private variables
    private Color _Color;
    private DashCap _DashCap;
    private DashStyle _DashStyle;
    private int _DashOffset;
    private LineCap _EndCap;
    private LineCap _StartCap;

    #endregion

    public PenProperties()
    {
        _Color = Color.Black;
        _DashCap = DashCap.Flat;
        _DashStyle = DashStyle.Solid;
        _DashOffset = 0;
        _EndCap = LineCap.Flat;
        _StartCap = LineCap.Flat;           
    }

    public PenProperties(Color color, DashCap dashCap, DashStyle dashstyle, int dashoffset,      
    LineCap endcap, LineCap startcap)
    {
        _Color = color;
        _DashCap = dashCap;
        _DashStyle = dashstyle;
        _DashOffset = dashoffset;
        _EndCap = endcap;
        _StartCap = startcap;         
    }
    #region Properties

    public Color Color
    {
        get { return _Color; }
        set
        {
            _Color = value;                
        }
    }
    public DashCap DashCap
    {
        get { return _DashCap; }
        set
        {
            _DashCap = value;               
        }
    }

    public DashStyle DashStyle
    {
        get { return _DashStyle; }
        set
        {
            _DashStyle = value;
        }
    }

    public int DashOffset
    {
        get { return _DashOffset; }
        set
        {
            if (this._DashOffset != value)
            {
                _DashOffset = value;
                OnPropertyChanged("DashOffSet");
            }
        }
    }

    public LineCap EndCap
    {
        get { return _EndCap; }
        set
        {
            _EndCap = value;
        }
    }
    public LineCap StartCap
    {
        get { return _StartCap; }
        set
        {
            _StartCap = value;
        }
    }

    #endregion

    public event PropertyChangedEventHandler PropertyChanged;

    protected void OnPropertyChanged(PropertyChangedEventArgs e)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null)
            handler(this, e);
    }

    protected void OnPropertyChanged(string propertyName)
    {
        OnPropertyChanged(new PropertyChangedEventArgs(propertyName));
    }
}

public class PenPropertiesConverter : TypeConverter
{
    public PenPropertiesConverter() { }
    public override bool GetPropertiesSupported(ITypeDescriptorContext context)
    {
        return true;
    }
    public override PropertyDescriptorCollection GetProperties(ITypeDescriptorContext context, 
    object value, System.Attribute[] attributes)
    {
        return TypeDescriptor.GetProperties(typeof(PenProperties));
    }
    public override bool CanConvertFrom(ITypeDescriptorContext context, System.Type sourceType)
    {
        if (sourceType == typeof(string)) return true;
        return base.CanConvertFrom(context, sourceType);
    }
    public override object ConvertTo(ITypeDescriptorContext context, 
    System.Globalization.CultureInfo culture, object value, System.Type destinationType)
    {
        if (destinationType == typeof(string) && value is PenProperties) 
        {
            PenProperties _PenProp = (PenProperties)value;
            System.ComponentModel.TypeConverter converter = 
    System.ComponentModel.TypeDescriptor.GetConverter(_PenProp.Color);
            string _Color = converter.ConvertToString(_PenProp.Color);
            return _Color + "," + _PenProp.DashCap + "," + _PenProp.DashStyle + "," + 
                   _PenProp.DashOffset + "," + _PenProp.EndCap + "," +
                   _PenProp.StartCap;                
        }
        return base.ConvertTo(context, culture, value, destinationType);
    }
    public override object ConvertFrom(ITypeDescriptorContext context, 
    System.Globalization.CultureInfo culture, object value)
    {
        if (value is string) 
        {
            string[] v = ((string)value).Split(new char[]{','});
            return new PenProperties(Color.FromName(v[0]), 
                                    (DashCap)Enum.Parse(typeof(DashCap), v[1]),  
                                    (DashStyle)Enum.Parse(typeof(DashStyle),v[2]),
                                     int.Parse(v[3]), (LineCap)Enum.Parse(typeof(LineCap), v[4]),
                                    (LineCap)Enum.Parse(typeof(LineCap), v[5]));
        }

        return base.ConvertFrom(context, culture, value);
    }

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T14:28:37.993

您的 DashOffset 属性大小写与您引发的 OnPropertyChanged 事件不同。OffSet 中的“s”在 OnPropertyChanged 中大写，但不在属性本身的名称中

# regex - jSoup - 如何获取具有背景样式的元素（内联 CSS）？

> ID：13647013
> 
> 赞同：2
> 
> 时间：2012-11-30T14:21:55.057
> 
> 标签：regex, jsoup, railo, cfml

我正在 Railo 中构建一个应用程序，它使用 jSoup .jar 库。这一切都在我的 CFML 语言中运行良好。

无论如何，我可以使用“样式”属性来抓取每个元素：

```
<cfset variables.mySelection = variables.myDocument.select("*[style]") /> 
```

但这会返回一个数组，其中包含有时没有“背景”或“背景图像”样式的元素。例如，HTML 可能如下所示：

```
<p style="color: red;">I should not be selected</p>
<p style="background: green">I **should** be selected</p>
<p style="text-align: left;">I should not be selected</p>
<p style="background-image: url("/path/to/image.jpg");">I **should** be selected</p> 
```

所以我可以得到上面的这些元素，但我不希望我的数组中的第一个和第三个，因为它们没有背景样式......你知道我怎么只能抓住和使用这些吗？

请注意，我**不**追求 COMPUTATED 样式或任何复杂的样式，我只是想知道是否可以根据内联 CSS 样式的属性进行过滤。也许事后一些正则表达式？我对想法持开放态度！

我试着把弄乱`:contains(background)`作为一个关键词，但我不确定这是否是正确的路径？

非常感谢您的帮助。迈克尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T14:25:46.823

尝试：

```
variables.myDocument.select("*[style*='background']") 
```

与[`*=`](http://www.w3.org/TR/css3-selectors/#attribute-substrings)匹配属性内容中的子字符串的标准选择器一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-18T06:39:40.057

```
Elements els = doc.select(div[style*=dashed]); 
```

或者

```
Elements elements = doc1.select("span[style*=font-weight:bold]"); 
```

# java - 线程“主”java.lang.NoClassDefFoundError 中的异常：=

> ID：13647016
> 
> 赞同：2
> 
> 时间：2012-11-30T14:22:11.920
> 
> 标签：java, eclipse, main, noclassdeffounderror, classnotfoundexception

我在 Eclipse 中创建了一个新的 maven 项目，在运行时出现此错误：

```
Exception in thread "main" java.lang.NoClassDefFoundError: =
Caused by: java.lang.ClassNotFoundException: =
    at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
Could not find the main class: =. Program will exit. 
```

在其他线程中，提到了问题发生的类，但在这里它只是什么也没说。该代码也用于不同的项目（在调用方法方面略有调整），但其余部分相同。如果有人可以帮助我解决此问题..将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T14:24:18.443

看起来*有些东西*`=`作为类名传入。它什么也没说——它说`=`。

例如，当我运行时：

```
java = 
```

我得到：

```
Error: Could not find or load main class = 
```

没有冒号，但在其他方面是一样的。

查看您*尝试*指定类名的位置，并查看是否有流浪者`=`。例如，假设您有：

```
java -Dfoo = bar ClassName 
```

代替

```
java -Dfoo=bar ClassName 
```

你会看到同样的事情。我不熟悉 Maven，但如果您在其中指定了一组参数，我会查看配置文件的那部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-22T03:17:12.547

**删除工作区**对我有用。

# knockout.js - Knockout Validation 首次阻止点击处理程序

> ID：13647017
> 
> 赞同：2
> 
> 时间：2012-11-30T14:22:11.647
> 
> 标签：knockout.js, knockout-validation

似乎淘汰验证插件以某种方式阻止执行点击处理程序。这是我的简化代码。

HTML：

```
<div>
    <input type="text" data-bind="value: code" />
    <button data-bind="click: execute">VALIDATE</button>
</div 
```

Javascript：

```
<script type="text/javascript" language="javascript">
    $(document).ready(function () {
        var ViewModel = function () {
            var self = this;
            this.code = ko.observable();
            this.code.extend({ required: true });
            this.execute = function () {
                if (self.code.isValid()) {
                    alert("SUCCEED");
                }
                else {
                    self.code.valueHasMutated(); //just to show error message
                    alert("FAILED");
                }
            };
        };

        ko.applyBindings(new ViewModel());
    });
</script> 
```

**我的场景：**

1.  加载页面
2.  单击 VALIDATE - 出现错误消息并且警报显示 FAILED
3.  在输入中输入任何文本并立即单击验证 - 错误消息消失，但没有显示警报。
4.  再次单击 VALIDATE - 只有现在可以看到带有 SUCCEED 文本的警报。

如何解决此问题，以便验证按钮从第一次单击时就可以正常工作？

谢谢， 伊霍尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T15:03:17.570

3）你从不点击按钮：D

发生的情况是，当您从该字段失去焦点时，它会验证该字段并删除文本，从而使按钮更改位置并且您的点击错过了按钮

[http://jsfiddle.net/s2bbd/](http://jsfiddle.net/s2bbd/)

这个工作就像你怀疑 [http://jsfiddle.net/s2bbd/1/](http://jsfiddle.net/s2bbd/1/)

```
Stackoverflow wont let me post this without code 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-09T13:03:40.007

单击前验证的另一种方法是使用鼠标悬停来模糊当前元素。

```
<button data-bind="click: execute" onmouseover="document.activeElement.blur();">VALIDATE</button> 
```

# c# - 自定义属性，可以访问它正在装饰的方法的输入/输出参数

> ID：13647018
> 
> 赞同：0
> 
> 时间：2012-11-30T14:22:12.317
> 
> 标签：c#, custom-attributes

我想知道如何编写一个可以访问函数的输入和输出参数的自定义属性。

以下是我希望实现的示例

```
[CustomAttribute("Creating Foo")]
public Foo CreateFoo(Foo newFoo)
{
    //do logic
    return newlyCreatedFoo;
} 
```

由此，`CustomAttribute`将在数据库中创建一个带有“Creating Foo”标签的条目，这很容易做到，但我希望能够同时访问`newFoo`两者`newlyCreatedFoo`。这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T14:36:39.253

自定义属性通常无法做到这一点：它们的目的是将元数据添加到方法中以在反射期间查看。

话虽如此，在某些情况下会利用属性来做到这一点。例如，ASP.Net MVC 使用实现 IAuthorizationFilter 的自定义属性来为某些网页提供安全性。这是因为 ASP 首先使用反射来启动这些方法。一旦它得到方法，它就会检查是否有任何属性是 IAuthorizationFilters，并在它们是时做一些额外的工作。有关更多信息，请参阅[此链接。](http://forums.asp.net/t/1852017.aspx/1?How%20does%20IAuthorizationFilter%20s%20OnAuthorization%20event%20fire%20in%20MVC4%20)

考虑这一点的另一种方法是考虑[面向方面的编程](http://en.wikipedia.org/wiki/Aspect-oriented_programming)。我认为 C# 的 AOP 框架倾向于根据实现某个接口的属性对方法进行编译时修饰，但我没有使用过。

我最喜欢的处理这个问题的方法是好的旧[代理](http://en.wikipedia.org/wiki/Proxy_pattern)模式。创建日志记录代理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T14:24:08.570

恐怕这对于自定义属性是不可能的。

这可以通过编译后处理来实现。[PostSharp 之](http://www.sharpcrafters.com/postsharp/features)类的工具可以让您实现此功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T14:39:22.660

也许您应该将您的问题改写为“如何拦截对特定方法的调用并记录参数”？

自定义属性只是方法上的装饰。它不会拦截或以任何方式影响方法的执行。它甚至不知道它附属于哪个成员。

如果您想拦截调用，您可以使用依赖注入框架或任何其他 .NET 的 AOP 框架来做到这一点。他们中的一些人实际上使用属性来标记他们的目标，但这不是必需的。

PostSharp 只是 .NET 的一种 AOP 框架。

另一种选择是使用 MEF 之类的 IoC/依赖注入库将您的类包装在代理对象中，该代理对象将拦截所有调用并仅记录使用特殊属性修饰的方法的值。

# sql-server-2008 - 动态 SQL 问题

> ID：13647019
> 
> 赞同：0
> 
> 时间：2012-11-30T14:22:13.810
> 
> 标签：sql-server-2008, dynamic-sql

我有一个动态 SQL，它位于存储过程中，但是当我运行存储过程时，我没有看到任何结果。这很奇怪，因为当我从字符串中删除 SQL 并将其作为 SQL 查询运行时，我确实得到了结果。我已经尝试让动态 SQL 打印出来，这样我就可以看到发生了什么，但这也不起作用。因此，我不知道我做错了什么，并且会问是否有人能看到哪里错了。以下是查询：

```
SELECT @SQL = @SQL + 'Select Production_Site, CSN, Target, Action, Fail '
SELECT @SQL = @SQL + 'From syn_products prod, '
SELECT @SQL = @SQL + '(select Production_Site, CSN, SUM([Target]) AS Target,SUM([Action]) AS Action,SUM([Fail]) AS Fail '
SELECT @SQL = @SQL + ' from '
SELECT @SQL = @SQL + ' ( '
SELECT @SQL = @SQL + ' select Production_Site, value, Period, YEAR, week, CSN '
SELECT @SQL = @SQL + ' from t_Pqe_Grocery '
SELECT @SQL = @SQL + ' unpivot ( '
SELECT @SQL = @SQL + ' value '
SELECT @SQL = @SQL + ' for col in (Grocery_Packaging_And_Coding, Grocery_Measurable, '
SELECT @SQL = @SQL + ' Grocery_Appearance, Grocery_Aroma, '
SELECT @SQL = @SQL + ' Grocery_Flavour, Grocery_Texture)) unp '
SELECT @SQL = @SQL + ' ) src '
SELECT @SQL = @SQL + ' pivot '
SELECT @SQL = @SQL + ' ( '
SELECT @SQL = @SQL + ' count(value) '
SELECT @SQL = @SQL + ' for value in ([Target], [Action], [Fail]) '
SELECT @SQL = @SQL + ' ) piv '
SELECT @SQL = @SQL + ' where Production_Site IN ( ''' + @Site + ''') AND YEAR BETWEEN ' + CONVERT(varchar(50),CONVERT(BIGINT,@ToYear))+ 'AND '+ CONVERT(varchar(50),CONVERT(BIGINT,@FromYear))+ 'AND Period BETWEEN ' + CONVERT(varchar(50),CONVERT(BIGINT,@ToPeriod))+ ' AND '+ CONVERT(varchar(50),CONVERT(BIGINT,@FromPeriod))+ 'AND Week BETWEEN ' + CONVERT(varchar(50),CONVERT(BIGINT,@ToWeek))+ ' AND '+CONVERT(varchar(50),CONVERT(BIGINT,@FromWeek))+ ' GROUP BY Production_Site CSN'
SELECT @SQL = @SQL + ' ) pit'
SELECT @SQL = @SQL + ' WHERE prod.pProductCode = pit.CSN AND prod.pPowerBrand = ''POW'''
EXECUTE(@SQL) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T15:05:32.590

有时，以不同的方式格式化您的查询可以帮助您发现查询中的任何错误。您的查询字符串中缺少一些空格：

```
declare @sql varchar(max)
declare @Site varchar(10) = 'testSite'
declare @ToYear int = 2010
declare @FromYear int = 2012
declare @ToPeriod int = 45
declare @FromPeriod int = 56
declare @ToWeek int = 10
declare @FromWeek  int = 1

SET @SQL =
 'Select Production_Site, CSN, Target, Action, Fail 
  From syn_products prod
  inner join 
  (
    select Production_Site, CSN, SUM([Target]) AS Target,SUM([Action]) AS Action,SUM([Fail]) AS Fail 
    from 
    ( 
      select Production_Site, value, Period, YEAR, week, CSN 
      from t_Pqe_Grocery 
      unpivot 
      ( 
        value 
        for col in (Grocery_Packaging_And_Coding, 
                    Grocery_Measurable, Grocery_Appearance, 
                    Grocery_Aroma, Grocery_Flavour, Grocery_Texture)
      ) unp 
    ) src 
    pivot
    ( 
      count(value)
      for value in ([Target], [Action], [Fail])
    ) piv 
    where Production_Site IN ( ''' + @Site + ''') 
      AND YEAR BETWEEN ' + CONVERT(varchar(50),CONVERT(BIGINT,@ToYear))+ ' AND '+ CONVERT(varchar(50),CONVERT(BIGINT,@FromYear))
      + ' AND Period BETWEEN ' + CONVERT(varchar(50),CONVERT(BIGINT,@ToPeriod))+ ' AND '+ CONVERT(varchar(50),CONVERT(BIGINT,@FromPeriod)) 
      + ' AND Week BETWEEN ' + CONVERT(varchar(50),CONVERT(BIGINT,@ToWeek))+ ' AND '+CONVERT(varchar(50),CONVERT(BIGINT,@FromWeek))
    + ' GROUP BY Production_Site CSN
  ) pit
     on prod.pProductCode = pit.CSN 
  where prod.pPowerBrand = ''POW'''

select @sql 
```

现在正在打印 --- 请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/d41d8/6861) --- 我还将查询更改为使用 ANSI 连接语法而不是逗号分隔的连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T14:28:04.080

这些可能是语法错误：

```
... CONVERT(BIGINT,@ToYear))+ 'AND '+ ...
                               ^--- no space

... @FromYear))+ 'AND Period BETWEEN ...
                  ^---no space

... @FromPeriod))+ 'AND Week BETWEEN
                    ^-- yet again no space 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T15:07:47.707

您的变量之一可能是`NULL`. 将一个`NULL`值连接到您的字符串中将产生一个 NULL 字符串。两者`PRINT`和`EXECUTE`当给定`NULL`字符串时..

首先，您需要将`@SQL`参数设置为空字符串或更改第一行以设置值而不是连接它。然后，您可能需要进行某种检查以验证参数是否为 NOT NULL，如果是，请删除条件或替换其他内容：

```
DECLARE @SQL VARCHAR(MAX)
SELECT @SQL = ''
SELECT @SQL = @SQL + ... -- now build the SQL Statement
SELECT @SQL = @SQL + ' where Production_Site IN ( ''' + ISNULL(@Site, '') + ''' ... -- check for NULLs here

PRINT ISNULL(@SQL, 'NULL) -- this should now print something even if the SQL is NULL 
```

最后，**提防 SQL 注入攻击**！避免像这样将参数连接到动态 SQL 语句中。相反，参数化动态 SQL，并将参数与 EXECUTE 语句一起传递。

# rtc - 如何合并两个或多个流

> ID：13647021
> 
> 赞同：6
> 
> 时间：2012-11-30T14:22:20.287
> 
> 标签：rtc

如果我有两个开发流（称为 Stream1、Stream2）并且我想将这两个流合并为一个流。

这就是我目前的做法：

1.  创建一个新的流 - Stream3。Stream 3 将包含 Stream1 和 Stream2 的合并
2.  从 Stream3 创建一个新的存储库工作区（称为 workspace1）
3.  将workspace1的流目标设置为Stream1
4.  在“待定更改”中，Stream1 中可用但 Stream2 中不可用的所有更改集现在应该显示为可以交付给 Stream3 的更改集

这是合并 2 个或更多流的最佳做法，还是有更优雅的方法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-30T14:41:56.620

创建一个新流？？？没必要。

当您打开一个 repo 工作区时，您有一个名为“流目标”的部分，其中包含由您的流（特征为“默认”）。

向其中添加流源（您要合并的流），将其设置为“当前”，您将在“待定更改”视图中看到“传入”部分，其中包含来自该的所有更改集或基线源流。

这个想法是让您接受这些更改集，将它们加载到本地工作区并测试它们（编译和测试），然后*将*它们交付回您的默认流。

“接受”阶段是合并发生的地方（自动进行，如果冲突则手动进行）。
正如[这个线程](https://jazz.net/forum/questions/92850/how-does-branchmerge-in-rtc-relate-to-branchmerge-in-clearcase)中提到的：

> RTC 中的合并算法在逻辑上与 ClearCase 中的相同，即给定一个配置（流、工作区），选择给定文件的不同版本，找到两个版本的共同祖先，然后执行 3-方式合并。
> 更改工作区的“流目标”只是 RTC 让您指定要合并到工作区的分支（流）的方式（`cleartool findmerge`为您提供相同的灵活性）。
> 请注意，ClearCase 和 RTC 使用不同的共同祖先算法。

最后一步假设您返回“流目标”部分，并将默认流设置回“当前”。

我更喜欢这个工作流程而不是这个：

![合并](../Images/16fe4cfd5c4f5ca4e9b5ee2c42a2ab48.png)

在这里，布伦特将*目标*流设置为当前，以传递合并的结果。这是另一种工作流程，也在“[如何在 Rational Team Concert 3.0.1 中保持您的流顺畅流动](https://jazz.net/library/article/649/#Example)”中进行了描述。

# java - 在 JPA/Hibernate 中为 java.util.Date 或 java.time.Instant 使用 BIGINT 列

> ID：13647030
> 
> 赞同：3
> 
> 时间：2012-11-30T14:22:56.133
> 
> 标签：java, hibernate, jpa

我需要访问使用`BIGINT`列存储时间戳的现有 MySQL 数据库：

```
create table mytable (created bigint); 
```

现在我更喜欢使用`java.util.Date`or`java.time.Instant`实例而不是整数，所以我试图让 Hibernate 直接转换值。不幸的是，当这样注释时，Hibernate 将无法识别该列：

```
@Column(name = "created")
private Date created; 
```

或像这样：

```
@Column(name = "created")
@Temporal(TemporalType.TIMESTAMP)
private Calendar created; 
```

这确实会在未来返回一些东西，例如`2017-07-01T04:14:00+02:00`. 如何使 Hibernate`BIGINT`正确转换列，这样我就不必在 getter 和 setter 中转换它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T15:42:07.743

Hibernate 的`TemporalType.TIMESTAMP`映射到`java.sql.Timestamp`. 构造`Timestamp`函数采用 Long 值，即自纪元以来的毫秒数。数据库中的值存储为 Unix 时间戳，即自纪元以来的秒数。

我写了一个`UnixTimestampType`需要几秒钟而不是几毫秒并创建`Date`实例的代码：

```
public class UnixTimestampType extends AbstractSingleColumnStandardBasicType<Date> implements IdentifierType<Date>, LiteralType<Date> {
    private static final long serialVersionUID = 1L;
    public static final UnixTimestampType INSTANCE = new UnixTimestampType();

    public UnixTimestampType() {
        super(UnixTimestampTypeDescriptor.INSTANCE, JdbcDateTypeDescriptor.INSTANCE);
    }

    @Override
    public String getName() {
        return "date";
    }

    @Override
    public String[] getRegistrationKeys() {
        return new String[] { getName(), java.sql.Date.class.getName() };
    }

    @Override
    public String objectToSQLString(Date value, Dialect dialect) throws Exception {
        final java.sql.Date jdbcDate = java.sql.Date.class.isInstance(value) ? (java.sql.Date) value : new java.sql.Date(value.getTime());
        return StringType.INSTANCE.objectToSQLString(jdbcDate.toString(), dialect);
    }

    @Override
    public Date stringToObject(String xml) {
        return fromString(xml);
    }
} 
```

和

```
public class UnixTimestampTypeDescriptor implements SqlTypeDescriptor {
    private static final long serialVersionUID = 1L;
    public static final UnixTimestampTypeDescriptor INSTANCE = new UnixTimestampTypeDescriptor();

    @Override
    public int getSqlType() {
        return Types.INTEGER;
    }

    @Override
    public boolean canBeRemapped() {
        return true;
    }

    @Override
    public <X> ValueBinder<X> getBinder(final JavaTypeDescriptor<X> javaTypeDescriptor) {
        return new BasicBinder<X>(javaTypeDescriptor, this) {
            @Override
            protected void doBind(PreparedStatement st, X value, int index, WrapperOptions options) throws SQLException {
                Date date = javaTypeDescriptor.unwrap(value, Date.class, options);
                date.setTime(date.getTime() / 1000);
                st.setDate(index, date);
            }
        };
    }

    @Override
    public <X> ValueExtractor<X> getExtractor(final JavaTypeDescriptor<X> javaTypeDescriptor) {
        return new BasicExtractor<X>(javaTypeDescriptor, this) {
            @Override
            protected X doExtract(ResultSet rs, String name, WrapperOptions options) throws SQLException {
                Date date = new Date(rs.getLong(name) * 1000);
                return javaTypeDescriptor.wrap(date, options);
            }
        };
    }
} 
```

# c++ - GTK 窗口的活动窗口的 X11 屏幕截图失败

> ID：13647039
> 
> 赞同：5
> 
> 时间：2012-11-30T14:23:43.173
> 
> 标签：c++, c, gtk, x11, xlib

这是一个更大的研究项目的子项目。我试图每 100 毫秒截取一次活动窗口（浏览器）的屏幕截图，然后将其存储在内存中以进行 OpenCV 处理。我从一个类似的问题中找到了截屏的解决方案，我目前正在使用代码来查看是否可以使用它。以下片段在获取整个桌面屏幕截图或特定窗口屏幕截图时似乎都有效，但它不适用于 GTK 窗口。我尝试在 Debian Squeeze 上截取 Iceweasel & Nautilus 的屏幕截图，但它根本不起作用。我是 X11 的菜鸟，不知道如何检查错误，或者我是否缺少 GTK 的东西，因为这似乎适用于 QT 窗口。

```
typedef int (*handler)(Display *, XErrorEvent *);

int handleX11Error(Display *d, XErrorEvent *er)
{
   std::cout << "X11 Error: " << er->error_code << std::endl;
}

int main()
{
    std::cout << "Sleeping 5 seconds" << std::endl;
   // we may need to sleep if we want to focus another window.
   sleep(5); 
   std::cout << "taking screenshot" << std::endl;

   Display *display = XOpenDisplay(NULL);
   //Window root = DefaultRootWindow(display);
   XWindowAttributes gwa;
   int revert = RevertToNone;
   Window active;
   XErrorEvent *error;
   handler myHandler = &handleX11Error;
   XSetErrorHandler(myHandler);

   // X11 - Get Window that has focus
   XGetInputFocus(display,&active,&revert);

   //XGetWindowAttributes(display, root, &gwa);
   if (!XGetWindowAttributes(display, active, &gwa))
     std::cout << "XGetWindowAttributes failed" << std::endl;

   int width = gwa.width;
   int height = gwa.height;

   //XImage *image = XGetImage(display,root, 0,0 , width,height,AllPlanes, ZPixmap);
   XImage *image = XGetImage(display,active, 0,0 , width,height,XAllPlanes(), ZPixmap);

   unsigned char *array = new unsigned char[width * height * 3];
   CImg<unsigned char> pic(array,width,height,1,3);

   for (int x = 0; x < width; x++){
      for (int y = 0; y < height ; y++){
     pic(x,y,0) = (XGetPixel(image,x,y) & image->red_mask ) >> 16;
     pic(x,y,1) = (XGetPixel(image,x,y) & image->green_mask ) >> 8;
     pic(x,y,2) = XGetPixel(image,x,y) & image->blue_mask;
      }
   }
   delete[] array;
   pic.save_png("blah.png");
   std::cout <<  "Finished" << std::endl;
   return 0;
} 
```

上面的代码适用于完整的桌面截图或 QT。我没有收到错误（不知道我是否正确处理它们）。只是几个字节的空图片，这让我觉得其中一个 X 函数失败了（XGetInputFocus、XGetWindowAttributes、XGetImage），而我对 XGetFocus 的赌注无法正常工作。我错过了什么，或者，有什么替代方法吗？请注意，我正在运行 KDE (4.4.5)，如果它很重要的话。

更新：

我尝试使用 Qt4 截取屏幕截图，虽然它工作正常，但在尝试从 X11 获取焦点窗口时，它会遇到同样的问题：

```
int main(int argc, char **argv)
{
    sleep(5);
    Display *display = XOpenDisplay(NULL);
    int revert = RevertToNone;
    Window active;
    XGetInputFocus(display,&active,&revert);
    QApplication app(argc, argv);    
    QPixmap pixmap = QPixmap::grabWindow(active);
    pixmap.save("test.png","PNG");
    QPushButton quit("Quit");
    quit.resize(75, 30);
    quit.setFont(QFont("Times", 18, QFont::Bold));
    QObject::connect(&quit, SIGNAL(clicked()), &app, SLOT(quit()));
    quit.show();
    return app.exec();
} 
```

因此，我确信 XGetInputFocus() 以某种方式失败了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-30T20:53:44.753

由于我还没有得到任何答案，而且我花了一整天的大部分时间寻找解决方案，我想我会分享我是如何设法让它工作的。该系统是 Debian Squeeze，运行 KDE 4.4.5。显然 KDE 和 GTK 应用程序不能很好地相互配合。引用stackoverflow和互联网上其他帖子的人的话，非kde应用程序可能不尊重_NET_WM_STATE，或者它可能是其他东西，我真的不知道。但是，我尝试的 GTK 应用程序无法使用所有 Qt4 应用程序都可以工作的代码，这暗示了与某种形式的报告相关的问题。在网上找到了一些罕见的（我真的是说很少见的）解决方案，也许可以遍历 X11 窗口树以找到活动窗口，但这对我来说似乎太复杂了，我阅读了人们没有获得成功结果的帖子。我想出的（这是在网上找到的一些片段）是使用 xdo（Debian 上的 libxdo）的以下内容：

```
 Display *display = XOpenDisplay(NULL);
   Window active;
   XWindowAttributes gwa;

   // Use xdo to find the active window - care on the display !
   xdo_t* xdocontext = xdo_new(0);
   xdo_window_get_active(xdocontext, &active);
   if(active){
      XGetWindowAttributes(display, active, &gwa);
      XImage *image = XGetImage(display,active, 0,0 , gwa.width,gwa.height,XAllPlanes(), ZPixmap);
      unsigned char *array = new unsigned char[gwa.width * gwa.height * 3];
      CImg<unsigned char> pic(array,gwa.width,gwa.height,1,3);

      for (int x = 0; x < gwa.width; x++){
         for (int y = 0; y < gwa.height ; y++){
             pic(x,y,0) = (XGetPixel(image,x,y) & image->red_mask ) >> 16;
             pic(x,y,1) = (XGetPixel(image,x,y) & image->green_mask ) >> 8;
             pic(x,y,2) = XGetPixel(image,x,y) & image->blue_mask;
         }
      }
      delete[] array;
      pic.save_png("blah.png");
   } else std::cout << "xdo failed to get active window" << std::endl; 
```

The above works with GTK & KDE apps, I really hope it may help someone stuck at this as there seem to be very few posts on this.

# windows-forms-designer - C# Windows 窗体 - 连接到 Windows 窗体应用程序的数据管道

> ID：13647041
> 
> 赞同：-1
> 
> 时间：2012-11-30T14:23:44.897
> 
> 标签：windows-forms-designer

大家好，我需要一些有关此数据管道的帮助。它是我的导师写的，我们在一个 Web 开发项目中使用它。我正在尝试将它用于 Windows 窗体应用程序以连接到数据库，但出现以下错误：

尝试为文件 C:\Users.... 附加自动命名的数据库失败。存在同名数据库，或无法打开指定文件，或位于 UNC 共享上。

如果我在 asp.net 网站上使用它而不是在我尝试研究但没有运气的 Windows 窗体上使用它，数据管道确实有效。我只是用两个文本框和一个保存按钮来测试它
谢谢

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Data.SqlClient;
using System.Data.OleDb;
using System.Data;

///This class uses the ado.net sql classes to provide a connection to an sql server database.
///it is free for use by anybody so long as you give credit to the original author i.e me
///Matthew Dean mjdean@dmu.ac.uk De Montfort University 2011

//you will need to modify the name of the namespace to suit your own program.
namespace MyClassLibrary
{
    public class clsDataConduit
    {
        //connection object used to connect to the database
        SqlConnection connectionToDB = new SqlConnection();
        //data adapter used to transfer data to and from the database
        SqlDataAdapter dataChannel = new SqlDataAdapter();
        //ado.net class for building the sql commands
        SqlCommandBuilder commandBuilder = new SqlCommandBuilder();
        //stores a list of all of the sql parameters
        List<SqlParameter> SQLParams = new List<SqlParameter>();
        //data table used to store the results of the stored procedure
        DataTable queryResults = new DataTable();
        //data row used to store the data for a new record
        DataRow newRecord;
        //string variable used to store the connection string
        private string connectionString;

        public clsDataConduit()
        {
            //this is the constructor for the class
            //you will need to modify this to suit your own database name and folder structure
            //
            //variable to store the patth to the database
            string DbPath;
            //variable to store the partial path and file name of your database 
            //modify this line to suit your own needs
            string DatabaseName = "\\MyDatabase\\NamesData.mdf";
            //set the DbPath concatenating the name of your database
            DbPath = GetParentPath() + DatabaseName;
            //build up the connection string for the sql server database
            connectionString = "Data Source=.\\SQLEXPRESS;AttachDbFilename=" + DbPath + ";Integrated Security=True;User Instance=True";
        }

        private string GetParentPath()
        ///this function returns the path to the parent folder of the solution
        {
            //get the folder for the project
            string DbPath = System.AppDomain.CurrentDomain.BaseDirectory;
            //variable to store the position of the \\ characters
            int Posn;
            //loop through the path twice
            for (int Counter = 0; Counter != 2; Counter++)
            {
                //find the right most instance of \\
                Posn = DbPath.LastIndexOf("\\");
                //split the path at that point
                DbPath = DbPath.Substring(0, Posn);
                //do it one more time
            }
            //return the new path
            return DbPath;
        }

        public void AddParameter(string ParamName, string ParamValue)
        ///public method allowing the addition of an sql parameter to the list of parameters
        ///it accepts two parameters the name of the parameter and its value
        {
            //create a new instance of the sql parameter object
            SqlParameter AParam = new SqlParameter(ParamName, ParamValue);
            //add the parameter to the list
            SQLParams.Add(AParam);
        }

        public void Execute(string SProcName)
        {
            ///public method used to execute the named stored procedure
            ///accepts one parameter which is the name of the stored procedure to use
            //open the stored procedure
            //initialise the connection to the database
            connectionToDB = new SqlConnection(connectionString);
            //open the database
            connectionToDB.Open();
            //initialise the command builder for this connection
            SqlCommand dataCommand = new SqlCommand(SProcName, connectionToDB);
            //add the parameters to the command builder
            //loop through each parameter
            for (int Counter = 0; Counter < SQLParams.Count; Counter += 1)
            {
                //add it to the command builder
                dataCommand.Parameters.Add(SQLParams[Counter]);
            }
            //set the command type as stored procedure
            dataCommand.CommandType = CommandType.StoredProcedure;
            //initialise the data adapter
            dataChannel = new SqlDataAdapter(SProcName, connectionToDB);
            //set the select command property for the data adapter
            dataChannel.SelectCommand = dataCommand;
            //use the copmmand builder to generate the sql insert delete etc
            commandBuilder = new SqlCommandBuilder(dataChannel);
            //fill the data adapter
            dataChannel.Fill(queryResults);
            //get the structure of a single record
            newRecord = queryResults.NewRow();
            //close the connection
            connectionToDB.Close();
        }

        public void WriteToDatabase()
        //void method that updates changes to the data adapter thus changing the database
        {
            //update any changes
            dataChannel.Update(queryResults);
        }

        public DataRow NewRecord
        ///this method provides access to the new record as a single data row
        {
            get
            {
                //return the blank data row
                return newRecord;
            }
        }

        public void RemoveRecord(int Index)
        //void method that removes a record at a specified index in the query results
        {
            //remove the record
            queryResults.Rows[Index].Delete();
        }

        public void AddToDataTable()
        //void method that adds the new record to the table data
        {
            //add the new record to the table 
            queryResults.Rows.Add(newRecord);
            //re initialise the new record
            newRecord = queryResults.NewRow();
        }

        public int Count
        //property that returns the count of records in the query results
        {
            get
            {
                //return the count of the query results
                return queryResults.Rows.Count;
            }
        }

        public DataTable QueryResults
        //public property that provides access to the query results
        {
            get
            {
                //return the query results
                return queryResults;
            }
            set
            {
                //set the query results
                queryResults = value;
            }
        }
    }
} 
```

这是我的名字类的代码。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace MyClassLibrary
{
   public class clsName
    {
       private string firstName;
       private string lastName;

       public string FirstName
       {
           get
           {
               return firstName;
           }

           set
           {
               firstName = value;
           }
       }

       public string LastName
       {
           get
           {
               return lastName;
           }

           set
           {
               lastName = value;
           }
       }

       public void Save()
       {
           clsDataConduit Names = new clsDataConduit();
           Names.Execute("sproc_tblNames_GetAll");
           Names.NewRecord["FirstName"] = firstName;
           Names.NewRecord["LastName"] = lastName;
           Names.AddToDataTable();
           Names.WriteToDatabase();
       }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T14:02:50.360

谢谢你们，但我终于设法使它工作。我不确定这是否是正确的方法，但你所做的是我已经注释掉了公共 clsDataConduit() {} 方法，在此方法之前我修改了连接字符串，添加了我的数据库的完整路径，如下所示: 私有字符串 connectionString = (@"Data Source=.\SQLEXPRESS;AttachDbFilename=C:\Users...\NamesData.mdf;Integrated Security=True;Connect Timeout=30;User Instance=True");

# ruby-on-rails-3 - has_many ：通过并构建

> ID：13647043
> 
> 赞同：1
> 
> 时间：2012-11-30T14:24:03.750
> 
> 标签：ruby-on-rails-3, activerecord

我有三个模型，帐户，用户和联系人：

```
class User < ActiveRecord::Base
  has_one :account

  has_many :contacts, :through => :account
end

class Account < ActiveRecord::Base
  belongs_to :owner, :class_name => 'User'

  has_many :contacts
end

class Contact < ActiveRecord::Base
  belongs_to :account
end 
```

我正在尝试通过用户记录来建立一个新的联系人，就像在我的联系人控制器中一样。

```
def create
    @contact = current_user.contacts.build(params[:contact])

    respond_to do |format|
      if @contact.save
        ...
      else
        ...
      end
    end
end 
```

当我这样做时，我没有收到任何错误，联系人记录保存到数据库中，但是未在联系人上设置 account_id 列，并且未将其添加到集合中，因此调用 @current_user.contacts 返回一个空集合.

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T14:35:40.220

使用`build`在内存中创建一个新的联系人实例，但您需要手动设置`account_id`记录（例如`@contact.account_id = current_user.account.id`），或者可能将其设置在`new`用于显示联系人的表单中的隐藏字段中，以便在传递给`build`方法的 params 数组。

您可能还想考虑`accepts_nested_attributes_for`在这种情况下是否有帮助。另一种选择可能是使用`delegate`，尽管在这两种情况下，您的使用可能与它们的用途相反（通常在“父级”上定义）。

更新：在您的情况下，该`build`方法被添加到用户实例和帐户（可能是“所有者”）实例中，因为您在用户和联系人之间具有多对多关系，以及一对多关系- 帐户和联系人之间的许多关系。所以要得到`account_id`我认为你需要调用帐户的构建，比如

```
@contact = current_user.accounts.contacts.build(params[:contact]) 
```

这行得通吗？

# r - 避免臭名昭著的“eval(parse())”构造

> ID：13647046
> 
> 赞同：20
> 
> 时间：2012-11-30T14:24:15.463
> 
> 标签：r, parsing, expression, eval, interpreter

好的，所以我正在运行一些循环来处理存储在列表对象中的数据。考虑到臭名昭著的`fortune`告诫不要使用`eval(parse(mystring))`，我想出了这个：

```
Rgames> bar
$foo
$foo$fast
[1] 1 2 3 4 5

$foo$slow
[1]  6  7  8  9 10

$oof
$oof[[1]]
[1]  6  7  8  9 10

$oof[[2]]
[1] 1 2 3 4 5

Rgames> rab<-'bar'
Rgames> do.call('$',list(as.name(rab),'oof'))
[[1]]
[1]  6  7  8  9 10

[[2]]
[1] 1 2 3 4 5 
```

通常我会选择一个列表（其中`bar`一个），然后选择一个 `oof`包含我的数据的列表元素（例如）。上面的代码与`eval(parse(text=paste(rab,'$','oof',sep='')))`.
我这样做是因为我想使用列表的名称而不是`[[x]]`符号作为安全机制（因为并非所有列表对象的内容都以相同的顺序排列）。

我是否应该坚持 R 中 DWin 的建议[：eval(parse(...)) 通常不是最理想的](https://stackoverflow.com/questions/11025031/r-evalparse-is-often-suboptimal)？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-30T14:33:25.770

使用`get`和`[[`：

```
bar <- list(foo = list(fast = 1:5, slow = 6:10),
            oof = list(6:10, 1:5))

rab <- 'bar'

get(rab)[['oof']]
# [[1]]
# [1]  6  7  8  9 10
# 
# [[2]]
# [1] 1 2 3 4 5 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-30T17:20:27.893

如果您的顶级列表的名称将更改并由具有该名称的变量访问，那么最好将这些列表放入另一个列表中，然后您可以访问您想要使用的列表`[[`。还阅读`fortune(312)`和帮助`?'[['`。

然后，您可以以不同的方式访问这些片段（在帮助页面上有详细说明`?'[['`）。

```
mylist <- list()
mylist$bar <- bar

mylist[[rab]][['oof']]
#or
mylist[[ c(rab,'oof') ]] 
```

# xml - 使用所有属性更改 XML 中的标记名称

> ID：13647055
> 
> 赞同：2
> 
> 时间：2012-11-30T14:24:31.627
> 
> 标签：xml, xslt

您好，我有如下给出的 xml 输出

```
<?xml version="1.0" encoding="ISO-8859-2"?>
    <shahid id="hyxq68qa41" nazwa="RAPORT BIEZACY" opis="RAPORT BIEZACY">
      <ali pos="2">
        <khan id="tlpyad6dn2" pos="1:2" multiplier="" timePeriodEx="" inne=":"/>
        <khan id="bu13zh6dnc" pos="2:2" multiplier="" timePeriodEx="" inne=":" columnSpan="11">KOMISJA NADZORU FINANSOWEGO</khan>
        <khan id="wzj6a46dne" pos="13:2" multiplier="" timePeriodEx="" inne=":"/>
      </ali>
      <ali pos="4">
        <khan id="3lmobr88c2" pos="1:4" multiplier="" timePeriodEx="" inne=":"/>
        <khan id="am4kjn88c3" pos="2:4" multiplier="" timePeriodEx="" inne=":"><html>  <head></head>  <body><font face='Times New Roman'>   <p></p>  </font></body></html></khan>
        <khan id="1aij3588c4" pos="3:4" multiplier="" timePeriodEx="" inne=":"><font face='Times New Roman'></font></khan>
        <khan id="6enzqb88c7" pos="4:4" multiplier="" timePeriodEx="" inne=":" columnSpan="4">Raport biezacy nr</khan>
        <khan id="umdc9y88o3" pos="8:4" multiplier="" timePeriodEx="" inne=":">66</khan>
        <khan id="11uzg088c9" pos="9:4" multiplier="" timePeriodEx="" inne=":">/</khan>
        <khan id="ntkz6p88ca" pos="10:4" multiplier="" timePeriodEx="" inne=":">2012</khan>
        <khan id="80nzo689x3" pos="11:4" multiplier="" timePeriodEx="" inne=":"/>
        <khan id="purzp388cb" pos="12:4" multiplier="" timePeriodEx="" inne=":"><html> <head>    </head>  <body>  </body></html>
        </ali>
    </shahid> 
```

我想使用 XSL 转换这个 xml 输出

```
<table id="hyxq68qa41" nazwa="RAPORT BIEZACY" opis="RAPORT BIEZACY">
  <tr pos="2">
    <td id="tlpyad6dn2" pos="1:2" multiplier="" timePeriodEx="" inne=":"/>
    <td id="bu13zh6dnc" pos="2:2" multiplier="" timePeriodEx="" inne=":" columnSpan="11">KOMISJA NADZORU FINANSOWEGO</td>
    <td id="wzj6a46dne" pos="13:2" multiplier="" timePeriodEx="" inne=":"/>
  </tr>
  <tr pos="4">
    <td id="3lmobr88c2" pos="1:4" multiplier="" timePeriodEx="" inne=":"/>
    <td id="am4kjn88c3" pos="2:4" multiplier="" timePeriodEx="" inne=":"><html>  <head></head>  <body><span face='Times New Roman'>   <p></p>  </span></body></html></td>
    <td id="1aij3588c4" pos="3:4" multiplier="" timePeriodEx="" inne=":"><span face='Times New Roman'></span></td>
    <td id="6enzqb88c7" pos="4:4" multiplier="" timePeriodEx="" inne=":" columnSpan="4">Raport biezacy nr</td>
    <td id="umdc9y88o3" pos="8:4" multiplier="" timePeriodEx="" inne=":">66</td>
    <td id="11uzg088c9" pos="9:4" multiplier="" timePeriodEx="" inne=":">/</td>
    <td id="ntkz6p88ca" pos="10:4" multiplier="" timePeriodEx="" inne=":">2012</td>
    <td id="80nzo689x3" pos="11:4" multiplier="" timePeriodEx="" inne=":"/>
    <td id="purzp388cb" pos="12:4" multiplier="" timePeriodEx="" inne=":"><html> <head>    </head>  <body>  </body></html>
    </tr>
</table> 
```

*   标签“shahid”被替换为表格标签（开始标签和结束标签）
*   标签 'ali' 被替换为 tr 标签
*   标签 'khan' 被替换为 td 标签
*   标签 'font' 替换为 span 标签
*   标签的所有属性也应该被复制

我不知道如何为此编写 XSl。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T15:23:45.413

这是[身份转换](http://en.wikipedia.org/wiki/Identity_transform)的工作，它是 XSLT 中最常见的设计模式之一。首先使用这个模板，它只复制节点（包括属性）

```
<xsl:template match="@*|node()">
   <xsl:copy>
      <xsl:apply-templates select="@*|node()"/>
   </xsl:copy>
</xsl:template> 
```

您可以简单地扩展它以添加模板以根据需要将元素转换为具有新名称。例如，要将**shahid**元素转换为**表格**元素，请执行以下操作：

```
<xsl:template match="shahid" >
   <table>
      <xsl:apply-templates select="@*|node()"/>
   </table>
</xsl:template> 
```

除了创建新元素之外，它还会添加所有现有属性，然后继续处理其子元素。

为您的其他更改执行此操作是一个简单的案例。这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>

   <xsl:template match="shahid" >
      <table>
         <xsl:apply-templates select="@*|node()"/>
      </table>
   </xsl:template>

   <xsl:template match="ali" >
      <tr>
         <xsl:apply-templates select="@*|node()"/>
      </tr>
   </xsl:template>

   <xsl:template match="khan" >
      <td>
         <xsl:apply-templates select="@*|node()"/>
      </td>
   </xsl:template>

   <xsl:template match="font" >
      <span>
         <xsl:apply-templates select="@*|node()"/>
      </span>
   </xsl:template>

   <xsl:template match="@*|node()">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
   </xsl:template>
</xsl:stylesheet> 
```

当应用于您的 XML 时，将输出以下内容

```
<table id="hyxq68qa41" nazwa="RAPORT BIEZACY" opis="RAPORT BIEZACY">
   <tr pos="2">
      <td id="tlpyad6dn2" pos="1:2" multiplier="" timePeriodEx="" inne=":"/>
      <td id="bu13zh6dnc" pos="2:2" multiplier="" timePeriodEx="" inne=":" columnSpan="11">KOMISJA NADZORU FINANSOWEGO</td>
      <td id="wzj6a46dne" pos="13:2" multiplier="" timePeriodEx="" inne=":"/>
   </tr>
   <tr pos="4">
      <td id="3lmobr88c2" pos="1:4" multiplier="" timePeriodEx="" inne=":"/>
      <td id="am4kjn88c3" pos="2:4" multiplier="" timePeriodEx="" inne=":">
         <html>
            <head/>
            <body>
               <span face="Times New Roman">
                  <p/>
               </span>
            </body>
         </html>
      </td>
      <td id="1aij3588c4" pos="3:4" multiplier="" timePeriodEx="" inne=":">
         <span face="Times New Roman"/>
      </td>
      <td id="6enzqb88c7" pos="4:4" multiplier="" timePeriodEx="" inne=":" columnSpan="4">Raport biezacy nr</td>
      <td id="umdc9y88o3" pos="8:4" multiplier="" timePeriodEx="" inne=":">66</td>
      <td id="11uzg088c9" pos="9:4" multiplier="" timePeriodEx="" inne=":">/</td>
      <td id="ntkz6p88ca" pos="10:4" multiplier="" timePeriodEx="" inne=":">2012</td>
      <td id="80nzo689x3" pos="11:4" multiplier="" timePeriodEx="" inne=":"/>
      <td id="purzp388cb" pos="12:4" multiplier="" timePeriodEx="" inne=":">
         <html>
            <head/>
            <body/>
         </html>
      </td>
   </tr>
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T14:36:07.637

```
 <?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
    <xsl:output method="xml"/>
    <xsl:template match="/shahid">
        <table>
            <xsl:copy-of select="@*"/>
            <xsl:for-each select="ali">
                <tr>
                    <xsl:copy-of select="@*"/>
                    <xsl:apply-templates select="khan"/>
                </tr>
            </xsl:for-each>
        </table>
    </xsl:template>
    <xsl:template match="khan">
        <td>
            <xsl:apply-templates select="@*|node()"/>
        </td>
    </xsl:template>

    <xsl:template match="@*|node()">
    <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
    </xsl:template>

    <xsl:template match="font">
    <span>
    <xsl:copy-of select="@*"/>
    </span>
    </xsl:template>
</xsl:stylesheet> 
```

# ios - 从 Dropbox 下载 UIImages

> ID：13647056
> 
> 赞同：1
> 
> 时间：2012-11-30T14:24:37.773
> 
> 标签：ios, xcode, dropbox

我正在尝试以这种方式从 Dropbox 下载一些图像：

```
-(void)catchTheImage{

NSString *title = [[NSUserDefaults standardUserDefaults]objectForKey:@"Folder3"];
PhotoViewController* sharedSingleton = [PhotoViewController sharedManager];
NSString *filename2 = [NSString stringWithFormat:@"/%@photofile.png.%ld", title, (long)sharedSingleton.tagNumber];

NSString *tmpPngFile = [NSTemporaryDirectory() stringByAppendingPathComponent:[NSString stringWithFormat:@"%@", filename2]];

[restClient loadFile:filename2 intoPath:tmpPngFile];

[NSTimer scheduledTimerWithTimeInterval:10 target:self selector:@selector(lf) userInfo:nil repeats:NO];

}

-(void)lf{

NSString *tmpPngFile = [NSTemporaryDirectory() stringByAppendingPathComponent:[NSString stringWithFormat:@"%@", filename2]];
UIImage* image = [UIImage imageWithContentsOfFile:tmpPngFile];
photoView.image = image;
} 
```

我知道计时器不是一个好主意，但它只是为了尝试。TagNumber 可以是 1、2 或 3，因为 Dropbox 上的图像是 3，但图像没有显示出来。我认为它们根本没有保存在文件夹中。可能是我对 NSTemporaryDirectory 的工作方式有误解......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T09:17:28.473

是的，您需要实现 Dropbox 委托方法，该方法将返回有关您的加载过程的状态

这里是

```
- (void)restClient:(DBRestClient*)client loadedFile:(NSString*)destPath;
// Implement the following callback instead of the previous if you care about the value of the
// Content-Type HTTP header and the file metadata. Only one will be called per successful response.
- (void)restClient:(DBRestClient*)client loadedFile:(NSString*)destPath contentType:(NSString*)contentType metadata:(DBMetadata*)metadata;
- (void)restClient:(DBRestClient*)client loadProgress:(CGFloat)progress forFile:(NSString*)destPath;
- (void)restClient:(DBRestClient*)client loadFileFailedWithError:(NSError*)error; 
```

在你的情况下：

```
- (void)restClient:(DBRestClient*)client loadedFile:(NSString*)destPath contentType:(NSString*)contentType metadata:(DBMetadata*)metadata {

NSString *tmpPngFile = [NSTemporaryDirectory() stringByAppendingPathComponent:[NSString stringWithFormat:@"%@", filename2]];
UIImage* image = [UIImage imageWithContentsOfFile:tmpPngFile];
photoView.image = image;

}

- (void)restClient:(DBRestClient*)client loadFileFailedWithError:(NSError*)error {

    [[[UIAlertView alloc] initWithTitle:@"Oops!!!" message:@"Try again." delegate:nil cancelButtonTitle:@"OK" otherButtonTitles: nil] show];
} 
```

# android - android中的动态壁纸渲染脚本背景图像

> ID：13647059
> 
> 赞同：1
> 
> 时间：2012-11-30T14:24:49.007
> 
> 标签：android, live-wallpaper, bitmapimage, renderscript

我是渲染脚本的新手。我正在浏览动态壁纸应用程序。

现在的问题是我没有得到我的背景图片（动态壁纸中的静态背景）。

我附上下面的代码。

提前致谢。

LiveWallpaperView 文件

```
public class LiveWallpaperView extends RSSurfaceView {
private RenderScriptGL mRSGL;
private LiveWallpaperRS mRender;

LiveWallpaper sf;

Context context;

public LiveWallpaperView(Context context) {
    super(context);

    this.context = context;

}

@Override
public void surfaceCreated(SurfaceHolder holder) {
    // TODO Auto-generated method stub
    super.surfaceCreated(holder);

}

@Override
public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {
    super.surfaceChanged(holder, format, w, h);

    if (mRSGL == null) {
        RenderScriptGL.SurfaceConfig sc = new RenderScriptGL.SurfaceConfig();
        mRSGL = createRenderScriptGL(sc);
        mRSGL.setSurface(holder, w, h);

        mRender = new LiveWallpaperRS(w, h);

        mRender.init(mRSGL, getResources(), false);
        mRender.start();

    }
}

@Override
protected void onDetachedFromWindow() {
    if (mRSGL != null) {
        mRSGL = null;
        destroyRenderScriptGL();
    }
}

} 
```

动态壁纸.rs

```
// Built-in header with graphics API's
#include "rs_graphics.rsh"
#include "rs_core.rsh"

rs_mesh livewMesh;

// fragment shader
rs_program_fragment gPFLW;
rs_allocation gBgImage; // Background image(*****************************************)
rs_program_fragment gSingleTextureFragmentProgram; // fragment shader

static void drawBackground() {
if (gBgImage.p != 0) {
    rs_matrix4x4 projection, model;
    rsMatrixLoadOrtho(&projection, -1.0f, 1.0f, -1.0f, 1.0f, 0.0f, 1.0f);
    rsgProgramVertexLoadProjectionMatrix(&projection);

    rsMatrixLoadIdentity(&model);
    rsgProgramVertexLoadModelMatrix(&model);

    rsgBindTexture(gSingleTextureFragmentProgram, 0, gBgImage);

    rsgDrawQuad(
        gBgVertices[0].x, gBgVertices[0].y, gBgVertices[0].z,
        gBgVertices[1].x, gBgVertices[1].y, gBgVertices[0].z,
        gBgVertices[2].x, gBgVertices[2].y, gBgVertices[0].z,
        gBgVertices[3].x, gBgVertices[3].y, gBgVertices[0].z
    );
  } else {
    //rsgClearColor(gBgColor.x, gBgColor.y, gBgColor.z, gBgColor.w);
  }
} 
```

后台方法在根方法中调用，然后在同一个类中调用。

LiveWallpaperRS.java

```
 public void setBackgroundBitmap(Bitmap bitmap) {
    if (bitmap == null) {
        return;
    }
    final Allocation bitmapAllocation = Allocation.createFromBitmap(mRS, bitmap,   Allocation.MipmapControl.MIPMAP_NONE, Allocation.USAGE_GRAPHICS_TEXTURE);
    mScript.set_gBgImage(bitmapAllocation);
} 
```

最后我在我的 LiveWallpaperService 类中调用了它

```
 @Override
    public void onSurfaceChanged(SurfaceHolder holder, int format,
            int width, int height) {
        super.onSurfaceChanged(holder, format, width, height);

        if (mRenderScriptGL != null) {
            mRenderScriptGL.setSurface(holder, width, height);
        }
        if (mlivewRS == null) {
            mlivewRS = new LiveWallpaperRS(width, height);

            mlivewRS.setBackgroundBitmap(BitmapFactory.decodeResource(getResources(), R.drawable.ic_launcher));
            mlivewRS.init(mRenderScriptGL, getResources(), isPreview());

            mlivewRS.start();
        } else {
            //mlivewRS.resize(width, height);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T19:46:07.363

您应该在回调中调用`mlivewRs.setBackgroundBitmap`after`mlivewRS.init`方法`onSurfaceChanged`

# html - 如何使用引导程序格式化文本以换行到第二行？

> ID：13647061
> 
> 赞同：2
> 
> 时间：2012-11-30T14:24:51.370
> 
> 标签：html, css, django, twitter-bootstrap

如果它不适合第一行，我正在尝试格式化下面的图像以使文本换行到第二行。如果它的文本多于第二行，它将被截断。我也有多个连续拍摄的图像。我不清楚如何做到这一点，我正在为我的 CSS 使用 Bootstrap。关于如何做到这一点的任何建议？

# 编辑：使用溢出更新图像：隐藏已删除。

我试图让第二行与人的图像后的第一行对齐。 ![在此处输入图像描述](../Images/88e82e01538f6574e665395189b2e0f9.png)

# 模板中的html，使用django

```
 {% for video in feed %}     
        <!-- wrapper div -->
        <div class='wrapper'>           
            <!-- image -->
            <div style="position: relative; left: 0; top: 0;">

            <div class = "image_container">
                <div class = 'imageblur'>   
                    <a href="{{video.3}}"> <img src = "{{video.2}}"></a>
                </div>
            </div>

            <p style = "width: 290px; font-size: 12px; word-wrap: break-word;"><img src = "http://graph.facebook.com/{{ user.username}}/picture">
            {{ video.1|truncatechars:80}}</p>

            </div>
            <!-- end image div -->
        </div>
        <!-- end wrapper div -->
    {% endfor %} 
```

# css

```
div.wrapper{
    float:left; /* important */
    position:relative; /* important(so we can absolutely position the description div */ 
    padding: 5px;
}

div.imageblur{
    position: relative; 
    overflow:hidden;
    top: 0; 
    left: 0; 
    width: 250px; 
    filter: blur(5px);
       -webkit-filter: blur(5px);
       -moz-filter: blur(5px);
       -o-filter: blur(5px);
       -ms-filter: blur(5px);

   margin:-1px;
   padding:1px;
}

div.image_container{
   width:248px;
   overflow:hidden;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-30T14:28:43.797

使用`word-wrap: break-word;`这对我有用

# xml - xmlParse 不工作

> ID：13647066
> 
> 赞同：2
> 
> 时间：2012-11-30T14:25:07.667
> 
> 标签：xml, r, parsing

我正在尝试解析以下 url 上的 xml 文档：

```
"http://ifis.iowafloodcenter.org/ifis/ws/sites.php?format=xml" 
```

使用以下代码：

```
library(XML)
ifc=xmlParse("http://ifis.iowafloodcenter.org/ifis/ws/sites.php?format=xml") 
```

但我收到以下错误：

```
No such file or directoryfailed to load external entity
"http://ifis.iowafloodcenter.org/ifis/ws/sites.php?format=xml"
Error: 1: No such file or directory2: failed to load external entity "http://ifis.iowafloodcenter.org/ifis/ws/sites.php?format=xml" 
```

# ssis - 运行 xmla 脚本时遇到问题

> ID：13647068
> 
> 赞同：-1
> 
> 时间：2012-11-30T14:25:27.230
> 
> 标签：ssis, ssas, ssms, data-warehouse, xmla

我正在遵循学习 SSIS 的指南，并且在实际的 ssis 工作开始之前我正在运行一些 xmla 脚本。

xmla 脚本针对示例分析数据库 AdventureWorksDW2008R2 运行。剧本：

```
<Batch xmlns="http://schemas.microsoft.com/analysisservices/2003/engine">
  <Parallel>
   <Process xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ddl2="http://schemas.microsoft.com/analysisservices/2003/engine/2" xmlns:ddl2_2="http://schemas.microsoft.com/analysisservices/2003/engine/2/2" xmlns:ddl100_100="http://schemas.microsoft.com/analysisservices/2008/engine/100/100" xmlns:ddl200="http://schemas.microsoft.com/analysisservices/2010/engine/200" xmlns:ddl200_200="http://schemas.microsoft.com/analysisservices/2010/engine/200/200">
    <Object>
      <DatabaseID>Adventure Works DW 2008R2</DatabaseID>
      <DimensionID>Dim Time</DimensionID>
    </Object>
    <Type>ProcessUpdate</Type>
    <WriteBackTableCreation>UseExisting</WriteBackTableCreation>
   </Process>
  </Parallel>
</Batch> 
```

我得到输出：

```
<return xmlns="urn:schemas-microsoft-com:xml-analysis">
  <results xmlns="http://schemas.microsoft.com/analysisservices/2003/xmla-multipleresults">
   <root xmlns="urn:schemas-microsoft-com:xml-analysis:empty">
      <Exception xmlns="urn:schemas-microsoft-com:xml-analysis:exception" />
      <Messages xmlns="urn:schemas-microsoft-com:xml-analysis:exception">
       <Error ErrorCode="3239313431" Description="Errors in the metadata manager. The process type specified for the Date dimension is not valid since it is not processed." Source="Microsoft SQL Server 2008 R2 Analysis Services" HelpFile="" />
      </Messages>
    </root>
  </results>
</return> 
```

我在想这是在尝试处理维度时间吗？没有这样的维度。 ![Adventureworks dw内部的尺寸](../Images/f67beda413509702951cf630dc6919b6.png)

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T16:01:20.747

维度的 ID 不一定与名称相同。双击您的日期维度，您将看到 ID 为 Dim Time。

该错误表明尚未处理日期维度。你能浏览维度吗？尝试右键单击 -> 处理维度并比较脚本（处理维度 - 日期窗口顶部的脚本按钮）

# security - OpenAM 10 iPlanetDirectoryPro cookie 更改

> ID：13647069
> 
> 赞同：1
> 
> 时间：2012-11-30T14:25:29.333
> 
> 标签：security, cookies, openam

ForgeRock 网站上的几个文档提到在 openAM 10 中更改 iPlanetDirectoryPro cookie 名称，但从未提及要更改它的文件。我尝试了几个，包括 AgentService.xml 和 AMAuth.xml 无济于事。有没有人成功做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T08:58:34.087

您不必在文件中更改它，您提到的文件是“OpenAM 服务描述”，在配置 OpenAM 时会加载到配置存储中。

稍后您必须使用控制台或 ssoadm 更改服务属性。

您可以通过更改“服务器和站点”下的“服务器默认值”中的值来更改 SSO 会话跟踪 cookie 的名称。

如果您有以正常 SSO 模式运行的代理，请确保也采用该值。

# java - 类图和管理员权限

> ID：13647070
> 
> 赞同：0
> 
> 时间：2012-11-30T14:25:33.427
> 
> 标签：java, class, administration, class-diagram

作为练习，我想使用 JSF 在 Java EE 中创建一个论坛。

我在类图中完全是个菜鸟。

我不知道是否需要为管理员创建一个类。

例如，有一个类 User，然后是通过继承的 admin 类。这样，管理员就可以做用户所做的一切。但我的问题是我想要不同级别的管理员。比方说，版主，超级管理员等...所以我可以创建一个角色属性，说明他在管理员中拥有哪些权限。

但是在那种情况下，创建一个管理类是否有用，我可以使用这个角色属性创建一个用户类，它会说明是用户还是管理员以及哪个管理员等。

我有点失落。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T14:30:49.480

为什么你需要一个不同的类？最常用的方法是创建一个`User`类（称它为其他名称，因为许多 DB 不喜欢它），每个用户都有几个`Roles`或`Permissions`.

也就是说，您很可能不应该在您的应用程序中处理这个问题。使用`JAAS`模型，让容器处理；您在应用程序中的唯一用途可能是为用户分配角色。

# java - 无法连接到基于属性文件的数据库

> ID：13647078
> 
> 赞同：-3
> 
> 时间：2012-11-30T14:25:58.540
> 
> 标签：java, oracle, jsp, jdbc

嗨，我是 java/jsp 开发的新手。

我正在尝试根据 jsp 文件从上一页接收的参数连接到数据库。如果我连接到单个数据库，我的程序就可以工作

```
 try {
        InputStream in = getServletContext().getResourceAsStream("/WEB-INF/db.properties");
        properties.load(in);
        connString = properties.getProperty("db_conn").toString();
        connUser = properties.getProperty("db_user").toString();
        connPass = properties.getProperty("db_pass").toString();
        bPath = properties.getProperty("exec_path").toString();
        in.close();
      } catch (IOException ex) {
        System.out.println(ex);
      } 
```

和 db.properties 文件包含

```
 db_conn=jdbc:oracle:thin:@33.333.3.33:3333:DKSE1
      db_user=guest
      db_pass=guestpw 
```

我的尝试：

```
 String userinfo = request.getParameter("userinfo");
 try {
        InputStream in = getServletContext().getResourceAsStream("/WEB-INF/db.properties");
        properties.load(in);
        db_conn = userinfo + "_conn";
        db_user = userinfo + "_user";
        db_pass = userinfo + "_pass";
        connString = properties.getProperty(db_conn).toString();
        connUser = properties.getProperty(db_user).toString();
        connPass = properties.getProperty(db_pass).toString();
        bPath = properties.getProperty("exec_path").toString();
        in.close();
      } catch (IOException ex) {
        System.out.println(ex);
      }

      try {
        // --- Required database stuff ---
        DriverManager.registerDriver(new oracle.jdbc.OracleDriver());
        Connection conn = DriverManager.getConnection(connString, connUser, connPass);
        Statement stmt = conn.createStatement();
        More codes....
       } 
```

数据库属性

```
 guest_conn=jdbc:oracle:thin:@33.333.3.33:3333:DKSE1
       guest_user=guest
       guest_pass=guestpw

       user_conn=jdbc:oracle:thin@11.222.3.33:4444:ESMZ1
       user_user=user
       user_pass=upw1

       user1_conn=jdbc:oracle:thin@11.11.1.11:1111:GEPD1
       user1_user=user1
       user1_pass=upw1 

       batch_exec_path = ${SERVER_DIR} 
```

堆栈跟踪

```
Nov 30, 2012 9:03:55 AM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet [jsp] in context with path [/dashboard] threw exception [An exception occurred processing JSP page /alpharunBatch.jsp at line 106

103:             db_conn = userinfo + "_conn";
104:             db_user = userinfo + "_user";
105:             db_pass = userinfo + "_pass";
106:             connString = properties.getProperty(db_conn).toString();
107:             connUser = properties.getProperty(db_user).toString();
108:             connPass = properties.getProperty(db_pass).toString();
109:             bPath = properties.getProperty("exec_path").toString();

Stacktrace:] with root cause
java.lang.NullPointerException
    at org.apache.jsp.alpharunBatch_jsp._jspService(alpharun_jsp.java:192)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

我在做一些根本错误的事情吗？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T14:31:48.800

尝试以下测试：

改变那个

```
InputStream in = getServletContext().getResourceAsStream("/WEB-INF/db.properties"); 
```

到

```
InputStream in = getServletContext().getResourceAsStream("db.properties"); 
```

并将您的属性放在类路径文件夹（src）中

进一步改变

```
properties.getProperty("exec_path").toString(); 
```

到

```
properties.getProperty("batch_exec_path").toString(); 
```

# c# - 使用名称而不是 IP 连接到 WCF 服务

> ID：13647080
> 
> 赞同：0
> 
> 时间：2012-11-30T14:26:03.797
> 
> 标签：c#, wcf

嘿，我已经创建了 WCF 服务，并希望能够使用我设置的 dns 连接到它？因为现在我必须通过计算机 ip 连接到基地址。并且 DHCP 有时会提供新的 ip，然后客户端必须知道新的 ip 等等......你希望得到它:)

那么我怎样才能让它通过名称连接呢？并且喜欢在基地址中有本地主机

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <system.serviceModel>
    <services>
      <service behaviorConfiguration="metaAndErrors" 
               name="VenatoWCF.WCFService">
        <endpoint address="http://localhost:8732/End"
                  binding="basicHttpBinding"
                  contract="VenatoWCF.IService">
          <identity>
            <dns value="dendei"/>
          </identity>
        </endpoint>
        <endpoint address="http://localhost:8732/mex" 
                  binding="mexHttpBinding" 
                  contract="IMetadataExchange">
          <identity>
            <dns value="dendei"/>
          </identity>
        </endpoint>
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:8732/VenatoWCFconsole/" />
          </baseAddresses>
        </host>
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="metaAndErrors">
          <serviceDebug includeExceptionDetailInFaults="true"/>
          <serviceMetadata httpGetEnabled="true"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>
</configuration> 
```

一直在尝试这样的事情，但没有运气xD，我想从客户端连接“http://dendei:8732/VenatoWCFconsole/”

因此，即使我的 ip 更改了客户端也不必进行更改即可连接到我

谢谢你的回答！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T14:47:19.977

我认为这是一个应该“正常工作”的场景。您在服务配置中的服务基地址应该能够使用 localhost，如您所示。在您的客户端配置中，您应该使用运行服务的主机的 DNS 名称来配置端点地址。

检查客户端机器是否可以使用 DNS 名称 ping 服务机器。如果可以解决，则 WCF 没有理由不连接。当 DHCP 服务器决定分配一个新的 IP 地址时，您不必更改任何配置，只要客户端仍然可以将 DNS 名称解析为新的 IP 地址。

例如，在您的客户端配置中...

```
<client>
  <endpoint address="http://dendei:8732/VenatoWCFconsole/End"
    binding="basicHttpBinding" bindingConfiguration="sameBindingConfigYouAlreadyUse"
    contract="Whatever.YourContractNameIs" name="YourEndpointName" />
</client> 
```

更新：我刚刚发现上面的服务配置有问题。在服务端点配置中，您应该将地址指定为将附加到基地址的 URI 的附加部分。因此，`address="http://localhost:8732/End"`您只需要`address="End"`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T14:54:01.983

据我了解，您没有静态 IP 地址并尝试通过使用静态 DNS 名称来克服这个问题，在我看来，这是行不通的，因为您应该有一个静态 IP 地址，而不是为其分配一个静态 DNS 名称，然后尝试连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T14:40:55.007

无论如何，都必须提供端点地址（即 ip/port）。如果该值设置为经常更改，我会在您的客户端和服务之间设置一个端口转发器。

[http://en.wikipedia.org/wiki/Port_forwarding](http://en.wikipedia.org/wiki/Port_forwarding)

# jquery - .prevUntil(".class:nth-child("+(index + 1)+") 在 Chrome 中似乎无法正常工作，关于如何让它工作的任何想法

> ID：13647082
> 
> 赞同：3
> 
> 时间：2012-11-30T14:26:09.823
> 
> 标签：jquery, jquery-selectors

见小提琴：http: [//jsfiddle.net/hp7Cz/25/](http://jsfiddle.net/hp7Cz/25/)

```
$('.moveDownLink').click(function() {

var $thisQuestion = $(this).parent();
var originalIndex = $thisQuestion.index();    
var $textField = $(this).next();
var fieldVal = parseInt($textField.val());

        var $target = $('.question:eq('+(fieldVal - 1)+')');
        var $newElement = $thisQuestion.clone().insertAfter($target);
        $newElement.prevUntil(".question:nth-child("+ (originalIndex + 1)  +")").each(function() {
            var $tField = $(this).find('input');
            var val = parseInt($tField.val());
            $tField.attr('value',(val - 1));
        });

        $thisQuestion.detach();

});​ 
```

示例代码仅处理向下移动的问题，即从位置 1 到 4 等。奇怪的是，如果首先将问题 1 移动到第 4 位，它将在 Chrome 中工作。但是将任何更高的位置（即问题 2）移到第 3 位将失败，因为 .prevUntil() 不会在选择器中的指定元素处停止并继续枚举所有元素，而与第 n 个子过滤器中指定的索引无关。

在 IE 和 FireFox 中一切正常，每次都正确排序：1,2,3,4

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T19:36:48.633

当您克隆对象时，您会丢失事件侦听器。对我来说，它在 FF 或 IE 中不起作用。

尝试使用 .on() 代替，[http://jsfiddle.net/hp7Cz/30/](http://jsfiddle.net/hp7Cz/30/)

```
$('#container').on("click", ".moveDownLink", function() {} 
```

# vb.net - 更改每行的颜色

> ID：13647084
> 
> 赞同：0
> 
> 时间：2012-11-30T14:26:11.440
> 
> 标签：vb.net

我有一个在 3D CAD 程序中画线的控制台应用程序。现在为了让这一点更清楚，我想用不同的颜色改变这些线条。

我的代码从文本文件中读取变量并从中计算数据，然后从计算的数据中生成一行。文本文件中包含数据的每一行都会重复此过程。

现在我希望 Visual Basic 每次绘制一条新线来改变颜色，所以我得到不同颜色的线。

我尝试使用 For.. To.. Step 方法，但这不起作用。我还尝试使用我的文本文件中的变量（这些是不同的，所以当读取新行时，RGB 代码会改变），但这只会给我很多蓝色。

有什么建议么？

编辑：

这就是我用来绘制曲线的方法，每次生成一条带有新数据的线时，RGB 代码都必须更改：

```
' Creating a Curve2d object by using the above defined points
                    objLineString = objLineStrings.AddByPoints(PointCount:=points, points:=dataArray)
                    objGeometricStyle = objLineString.Style
                    color = objGeometricStyle.LinearColor
                    objGeometricStyle.LinearColor = RGB(0,0,0) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T14:57:53.110

关于什么 ：

```
Dim rand As New Random() ' Used to generate random numbers
Dim colors(100) as Integer

' Create the colors
For i as Integer = 0 to 100 Step 1
    colors(i) = RGB(rand.Next(256), rand.Next(256), rand.Next(256))
Next

For i As Integer = 0 To 100 Step 1 ' Adjust to your needs
    ' Creating a Curve2d object by using the above defined points
    objLineString = objLineStrings.AddByPoints(PointCount:=points, points:=dataArray)
    objGeometricStyle = objLineString.Style
    color = objGeometricStyle.LinearColor
    objGeometricStyle.LinearColor = colors(i Mod 100) ' Mod returns the remainder of i / 100, so it's always less than 100.
Next 
```

这并不总是给你“漂亮”的颜色，但每行都会有所不同。如果您想控制生成的颜色，您可以设置一组预定义颜色并在迭代中使用这些颜色。

# objective-c - NSCompoundPredicate

> ID：13647089
> 
> 赞同：6
> 
> 时间：2012-11-30T14:26:27.353
> 
> 标签：objective-c, uisearchbar, uisearchdisplaycontroller, nscompoundpredicate

我正在尝试`UITableView's`使用`UISearchDisplayController`and过滤数据`NSCompoundPredicate`。我有一个带有 3 的自定义单元格`UILabels`，我想在搜索中全部过滤，因此`NSCompoundPredicate`.

```
 // Filter the array using NSPredicate(s)

  NSPredicate *predicateName = [NSPredicate predicateWithFormat:@"SELF.productName contains[c] %@", searchText];
  NSPredicate *predicateManufacturer = [NSPredicate predicateWithFormat:@"SELF.productManufacturer contains[c] %@", searchText];
  NSPredicate *predicateNumber = [NSPredicate predicateWithFormat:@"SELF.numberOfDocuments contains[c] %@",searchText];

  // Add the predicates to the NSArray

  NSArray *subPredicates = [[NSArray alloc] initWithObjects:predicateName, predicateManufacturer, predicateNumber, nil];

  NSCompoundPredicate *compoundPredicate = [NSCompoundPredicate orPredicateWithSubpredicates:subPredicates]; 
```

但是，当我这样做时，编译器会警告我：

> 使用“NSPredicate *”类型的表达式初始化“NSCompoundPredicate *_strong”的不兼容指针类型

我在网上看到的每个例子都做同样的事情，所以我很困惑。该`NSCompoundPredicate orPredicateWithSubpredicates:`方法采用`(NSArray *)`最后一个参数，所以我真的很困惑。

怎么了？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-30T14:45:22.757

首先，使用“contains”很慢，考虑一下“beginswith”？其次，你想要的是：

```
NSPredicate *predicate = [NSCompoundPredicate orPredicateWithSubpredicates:subPredicates]; 
```

三，你可以这样做：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"SELF.productName beginswith[cd] %@ OR SELF.productManufacturer contains[cd] %@", searchText, searchText]; 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-30T14:39:03.823

`orPredicateWithSubpredicates:`被定义为返回一个 NSPredicate*。您应该能够将最后一行代码更改为：

```
NSPredicate *compoundPredicate = [NSCompoundPredicate orPredicateWithSubpredicates:subPredicates]; 
```

...并且仍然应用了所有复合谓词。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-28T20:32:46.993

这是我根据上面的答案创建的一个有用的方法（我非常感谢！）

它允许通过发送过滤器项数组和表示搜索条件的字符串来动态创建 NSPredicate。

在原来的情况下，搜索条件发生了变化，所以它应该是一个数组而不是一个字符串。但无论如何它可能会有所帮助

```
- (NSPredicate *)dynamicPredicate:(NSArray *)array withSearchCriteria:(NSString *)searchCriteria
{
    NSArray *subPredicates = [[NSArray alloc] init];
    NSMutableArray *subPredicatesAux = [[NSMutableArray alloc] init];
    NSPredicate *predicate;

    for( int i=0; i<array.count; i++ )
    {
        predicate = [NSPredicate predicateWithFormat:searchCriteria, array[i]];
        [subPredicatesAux addObject:predicate];
    }

    subPredicates = [subPredicatesAux copy];

    return [NSCompoundPredicate orPredicateWithSubpredicates:subPredicates];
} 
```

# c - C - 返回第一个非空白字符

> ID：13647093
> 
> 赞同：-1
> 
> 时间：2012-11-30T14:26:46.437
> 
> 标签：c, char, ascii, whitespace

我被要求编写一个函数，该函数返回输入字符串中的第一个非空白字符。

当我输入诸如“hello”之类的内容或任何不以空格开头的内容时，它就起作用了。但是当我输入“你好”之类的东西时，它会返回一个空格。

这是我的代码：

```
int question6()
{
    printf("Start typing stuff in \n");
    char myChar = returnFirstNonWhite();

    printf("First non-white space character is: %c",myChar);
}

int returnFirstNonWhite()
{
    int ch,temp;
    ch = getchar();
    while (ch != 32)
    {
        temp = ch;
        printf("Found first success %c\n", ch);
    }
    return temp;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T14:31:32.543

```
ch = getchar();
while (ch == 32)
{
    ch = getchar();
}
return ch; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T14:45:44.380

一个简单的选择是使用`scanf()`而不是`getchar()`. `scanf()`将采用一个字符串（因此无需循环获取字符），它将去除任何起始空白，因此您只需要获取它具有的第一个字符。

```
int returnFirstNonWhite()
{
    char str[50];
    memset(str, '\0', 50);
    scanf("%s", str);
    return str[0];
} 
```

所以

```
>>      hello 
```

将返回 104 (ascii 'h')

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T14:31:54.013

起初，您只输入一个字符。而且如果不等于32 int值，程序应该是无限循环的！！！这是一个无代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T14:32:12.510

这里的一切似乎都很好，除了在你的`while`循环中你不会继续获取下一个字符。换句话说，它获取初始字符，比如说一个空格，然后永远在那个`while`循环中继续，因为`ch`变量永远不会改变。

尝试`ch = getchar();`在您的 while 循环中添加，以便它不断获取下一个要检查的字符。另外，我刚刚意识到您需要检查字符是否*等于*32，而不是*不等于*，以便如果字符是空格，它会继续获取下一个字符。

# jquery - 使用 Spring 标签从带有 jQ uery 的数组中添加选项

> ID：13647095
> 
> 赞同：1
> 
> 时间：2012-11-30T14:26:51.673
> 
> 标签：jquery, json, spring-mvc

当我使用 Spring 标签时，选择框的自动填充不起作用。

以下解决方案有效，

```
 <html>
    <head></head>
    <body>
      <select id="articleLocation">
      </select>
    </body>
    </html>

    /*javascript*/
    var jsonList = {"Table" : [{"stateid" : "2","statename" : "Tamilnadu"},
                {"stateid" : "3","statename" : "Karnataka"},
                {"stateid" : "4","statename" : "Andaman and Nicobar"},
                 {"stateid" : "5","statename" : "Andhra Pradesh"},
                 {"stateid" : "6","statename" : "Arunachal Pradesh"}]}

    $(document).ready(function(){
      var listItems= "";
      for (var i = 0; i < jsonList.Table.length; i++){
        listItems+= "<option value='" + jsonList.Table[i].stateid + "'>" + jsonList.Table[i].statename + "</option>";
      }
      $("#articleLocation").html(listItems);
    }); 
```

下面的解决方案（使用 Spring 标签）不起作用。错误消息是“'option' 标签只能在有效的 'select' 标签内使用。”

```
 <html>
    <head></head>
    <body>
      <form:select path="articleLocation">                                                 
      </form:select>
    </body>
    </html>

    /*javascript*/
    var jsonList = {"Table" : [{"stateid" : "2","statename" : "Tamilnadu"},
                {"stateid" : "3","statename" : "Karnataka"},
                {"stateid" : "4","statename" : "Andaman and Nicobar"},
                 {"stateid" : "5","statename" : "Andhra Pradesh"},
                 {"stateid" : "6","statename" : "Arunachal Pradesh"}]}

    var listItems= "";
    for (var i = 0; i < jsonList.Table.length; i++){
      listItems+= "<form:option value='" + jsonList.Table[i].stateid + "' label='" + jsonList.Table[i].statename + "'/>";
    }
    $("#articleLocation").appendTo(listItems); 
```

# asp.net - 获取数据行的总和 asp.net

> ID：13647103
> 
> 赞同：0
> 
> 时间：2012-11-30T14:27:22.800
> 
> 标签：asp.net, datatable, dataset

我试图从单行中的每一列中获取值等于总数。这是我在 c# asp.net 中用来实现此目的的代码

```
DataTable dt = ds.Tables.Add("InspireTable");
        string pass = (String)Session["name"];
        if (pass.Equals("High"))
        {
            dt.Columns.Add("Inspire", typeof(string));
            dt.Columns.Add("SNS", typeof(int));
            dt.Columns.Add("TT", typeof(int));
            dt.Columns.Add("Music", typeof(int));
            dt.Columns.Add("Total", typeof(string));

            DataRow row = dt.NewRow();
            row["Inspire"] = "Score";
            row["SNS"] = 10;
            row["TT"] = 10;
            row["Music"] = 0;

            dt.Rows.Add(row);
            Chart1.DataSource = dt;
            this.GridView1.Visible = true;
            GridView1.DataSource = dt;
            GridView1.DataBind();

        } 
```

有任何想法吗？我曾尝试调用每一列并添加它们，但这似乎不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T14:33:36.277

使用旧[`DataTable.Compute`](http://msdn.microsoft.com/en-us/library/system.data.datatable.compute.aspx)方法，例如：

```
int snsTotal = (int) dt.Compute("SUM(SNS)", null); // the second argument is the filter 
```

这是“现代” [**Linq**](http://msdn.microsoft.com/en-us/library/bb386977.aspx)方法：

```
int snsTotal = dt.AsEnumerable().Sum(r => r.Field<int>("SNS")); 
```

**编辑**：似乎您想将每行的数值加到“总计”列中。然后你可以使用列表达式：

```
dt.Columns.Add("Total", typeof(int), "SNS + TT + Music"); 
```

# apache2 - 具有多个域的 JBOSS 的自签名 SSL 证书

> ID：13647106
> 
> 赞同：1
> 
> 时间：2012-11-30T14:27:31.070
> 
> 标签：apache2, ssl-certificate, jboss5.x, apache-config, self-signed

有没有办法为**多个域创建****自签名**SSL 证书？我的环境是 jboss-5.1.0.GA。

 **我已经使用以下 java keytool 命令为单个域创建了自签名 SSL 证书。

```
 keytool -genkey -alias jbosskey -keypass changeit -keyalg RSA -keystore    server.keystore
 *Answer the prompts.  Use myHostname when asked for first/last name
 keytool -export -alias jbosskey -keypass changeit -file server.crt -keystore   server.keystore
 keytool -import -alias jbosscert -keypass changeit -file server.crt -keystore server.keystore 
```

然后我在 JBOSS server.xml 中启用 SSL，如下所示；

```
 <Connector protocol="HTTP/1.1" SSLEnabled="true" 
       port="7443" address="${jboss.bind.address}"
       scheme="https" secure="true" clientAuth="false" 
       keystoreFile="${jboss.server.home.dir}/conf/server.keystore"
       keystorePass="changeit" sslProtocol = "TLS" /> 
```

这工作正常。现在我需要向该证书添加另一个单独的域名。

请注意，这不是我所说的支持子域的通配符证书。

我需要做的是，将完全独立的域名添加到单个密钥库文件中。

**附言**

我正在研究 apache + JBOSS 环境。apache 服务器作为代理工作。

我可以在 apache httpd-ssl.conf 配置中为不同的域提供单独的 SSL 证书文件。但是当我来到JBOSS时，我不知道如何处理它。

如果我们使用 apache 作为代理（即在 apache 中配置 ssl），我们可以忽略来自 JBOSS 的 SSL 吗？

我试图忽略条目 (keystoreFile="${jboss.server.home.dir}/conf/server.keystore") 但它给出了一个错误。

如果没有支持多个域的 SSL 证书，是否有任何方法可以处理这种情况？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T10:14:53.970

如果我理解正确，您可以让您的 Apache 服务器处理 SSL 身份验证，然后如果代理正在处理它，Jboss 可以忽略 SSL 证书（JBoss 设计是允许从部署中控制/验证 SSL 证书，在这种情况下听起来没有必要）

我有一个类似的设置，其中托管在其他地方的代理处理 SSL 身份验证 & 只是通过 DMZ 将请求转发到 JBoss 服务器，然后它可以忽略证书。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-27T07:21:59.040

如果我可以给出一个额外的答案 - Apache+JBoss 的一个非常常见的设置是使用 Apache 作为 JBoss 前面的某种负载均衡器/反向代理。SSL 通信完全由 Apache 完成。一种首选方法是在 Apache 和 JBoss 之间使用 AJP 而不是 HTTP，因为它在 Servlet 请求中设置所有必要的信息，而不是使用 X-forwarded-... 信息作为需要显式读取的附加标头。

在这种情况下（使用 mod_jk 或 mod_cluster），您还可以非常轻松地管理 Apache 后面的多个 JBoss 实例。当然 - Apache 和 JBoss 之间的通信没有加密（我知道 AJP 不支持 SSL）。

如果您想进行加密通信并且 Apache 仍在进行所有外部 SSL 通信，那么 Apache 和 JBoss 之间的内部通信只需要由一个证书覆盖，并且 Apache 需要信任该证书。

还有一个 - 您可以将多个证书/私钥放入密钥库，只需将它们导入现有的密钥库即可。使用 keystore -list 您可以查看密钥库的内容。我还没有测试过，如果 JBoss 将使用 SNI 来识别传入请求的正确证书/密钥。但是较新的 JBoss 和 Java 默认支持 SNI。**

# opengl - OpenGL中的矩阵堆栈已弃用？

> ID：13647108
> 
> 赞同：5
> 
> 时间：2012-11-30T14:27:38.837
> 
> 标签：opengl, glsl

我刚读到这个：

“OpenGL 提供了使用标准矩阵堆栈（GL_MODELVIEW 和 GL_PROJECTION）管理坐标变换和投影的支持。然而，在核心 OpenGL 4.0 中，所有支持矩阵堆栈的功能都已被删除。因此，我们有责任提供我们的自己支持通常的转换和投影矩阵，然后将它们传递到我们的着色器中。”

这很奇怪，那我现在如何设置模型视图和投影矩阵呢？我应该在opengl应用程序中创建它们，然后将顶点着色器中的顶点与矩阵相乘？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-30T14:45:04.677

> 这很奇怪

没有。固定功能已被可编程管道取代，可让您根据需要设计转换。

> 我应该在opengl应用程序中创建它们，然后将顶点着色器中的顶点与矩阵相乘？

如果你想要一些像旧的 OpenGL 矩阵堆栈对一样工作的东西，那么你想让你的顶点着色器看起来像，例如：

```
in vec4 vertexPosition; 
// ...

uniform mat4 ModelView, Projection;

void main() {
    gl_Position = Projection * ModelView * vertexPosition;
    // ...
} 
```

*（当然，您可以对其进行一些优化）*

相应的客户端大小代码（此处显示为 C++）将如下所示：

```
std::stack<Matrix4x4> modelViewStack;
std::stack<Matrix4x4> projectionStack;

// Initialize them by
modelViewStack.push(Matrix4x4.Identity());
projectionStack.push(Matrix4x4.Identity());

// glPushMatrix:
stack.push(stack.top());
    // `stack` is either one stack or the other;
    // in old OpenGL you switched the affected stack by glMatrixMode

// glPopMatrix:
stack.pop();

// glTranslate and family:
stack.top().translate(1,0,0);

// And in order to pass the topmost ModelView matrix to a shader program:
GLint modelViewLocation = glGetUniformLocation(aLinkedProgramObject,
                                               "ModelView");
glUniformMatrix4fv(modelViewLocation, 1, false, &modelViewStack.top()); 
```

我在这里假设您有一个 Matrix4x4 类，它支持诸如`.translate()`. 像[GLM](http://glm.g-truc.net/)这样的库可以为您提供矩阵和向量的客户端实现，它们的行为类似于相应的 GLSL 类型，以及像`gluPerspective`.

* * *

您还可以通过 OpenGL 兼容性配置文件继续使用 OpenGL 1 功能，但不建议这样做（那时您不会使用 OpenGL 的全部潜力）。

OpenGL 3（和 4）的接口比 OpenGL 1 更底层；如果您认为上面的代码太多，那么您最好使用渲染引擎，例如 Irrlicht。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-30T14:39:45.233

矩阵堆栈是已弃用的固定功能管道的一部分。您仍然可以通过兼容性扩展访问旧功能，但您应该避免这样做。

有一些关于矩阵和相机的很好的教程，但我更喜欢[这个。](http://blog.db-in.com/cameras-on-opengl-es-2-x/)如您所说，将矩阵发送到着色器并乘以矩阵的顶点。

# android - Android 备份/恢复示例不起作用？

> ID：13647109
> 
> 赞同：5
> 
> 时间：2012-11-30T14:27:40.787
> 
> 标签：android, backup

我遇到了同样的问题 - 正如在谷歌开发者组中发现的那样。我引用了 Chris Grebeldinger（原作者）的非常详细的解释。

“在文档中：http: [//developer.android.com/guide/topics/data/backup.html#Testing](http://developer.android.com/guide/topics/data/backup.html#Testing)

它建议通过以下方式测试应用程序的备份/恢复：

1.  安装您的应用
2.  确保启用备份/恢复
3.  更改一些数据并调用 dataChanged()
4.  强制 bmgr 运行备份通道
5.  卸载应用程序
6.  重新安装应用程序并检查您的数据是否已恢复

一切似乎都很好，直到第 4 步，当我在日志中看到这一点时：

V/BackupManagerService(306): removePackageParticipantsLocked: uid=10078 #1 V/BackupManagerService(306): 移除com.example.app的备份知识

然后是第 5 步：

V/BackupManagerService（306）：restoreAtInstall pkg=com.example.app token=21 V/BackupManagerService（306）：没有恢复集——跳过恢复

显然，当卸载应用程序时，备份的数据会被破坏，这意味着官方测试工作流程可能无法正常工作？最好的测试方法是什么？”

有没有人设法正确运行和测试这个样本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T16:01:13.697

再次感谢 Chris Grebeldinger，他热情地回答了我对他在 google android 开发人员组中的原始帖子的回复。

它是如何工作的：

*   在设备 A 中安装应用程序。
*   在设备 A 中设置任何数据或首选项。
*   在设备 A 上强制备份。（使用 adb shell bmgr backup [app_name]，adb shell bmgr run）。
*   获取第二个设备 B.
*   在设备 B 上执行恢复出厂设置。
*   重置后，再次安装应用程序。
*   还原操作应该会成功。

令我烦恼的是，谷歌 Android 文档中显示的“步骤”似乎非常详细，但决定省略看起来是必要和强制性的步骤。

正如克里斯在他的回复中提到的那样，我希望这可以帮助其他发现同样问题的人。

谢谢。

编辑：

在使用不同设备进行进一步测试后，似乎整个备份/恢复过程可能因制造商和设备而异。我可以使用 Google 的文档方法测试示例应用程序，即使用 nexus 7 卸载和安装 - 只是巧合。因此，我的建议是不要期望在您的测试中出现相同的行为和一致性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-11-30T22:15:10.063

尝试使用模拟器进行测试。只需卸载和安装应用程序，带有 API 22 的 Nexus 5 就可以为我工作。

全流程：

1.  通过 adb 启用备份：`bmgr enable true`
2.  设置本地传输： `bmgr transport android/com.android.internal.backup.LocalTransport`
3.  运行您的应用程序并准备备份
4.  运行备份：`bmgr backup <package> & bmgr run`
5.  从模拟器卸载应用程序
6.  再次安装应用程序 - 应该会自动恢复

提示：为“备份”活动查找 logcat

# erlang - erlang nif 中的 Protobuf 消息和 memcpy

> ID：13647112
> 
> 赞同：0
> 
> 时间：2012-11-30T14:27:53.487
> 
> 标签：erlang, protocol-buffers, memcpy, erlang-nif

我在 nif 函数（erlang nif）中使用 protobuf，需要创建 protobuf 消息类型的资源。我写了这样的东西：

```
ERL_NIF_TERM create_resource(ErlNifEnv *env, const MyClass &msg)
{
    size_t size = sizeof(MyClass);

    MyClass *class = (MyClass *)enif_alloc_resource(MY_CLASS, size);

    memcpy(class, &msg, size);
    // class->CopyFrom(&msg);

    ERL_NIF_TERM term = enif_make_resource(env, class);
    enif_release_resource(class);

    return term;
} 
```

问题是.. 像这样复制 protobuf 消息是否合法，并且在清理时只需释放它：

```
 delete pointer 
```

? 似乎一切都在这里，但我不舒尔，因为复制对象的构造函数没有被调用，并且可能有一些带有静态变量等的魔法......另外..我需要在 memcpy 之后调用 CopyFrom ?

更新：MyClass 是 C++ 类而不是 C

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T07:33:08.923

enif_alloc_resource、enif_release_resource 和 enif_make_resource 为您完成所有内存管理。您可以通过将资源类型设置为指针来使其更容易一些，在这种情况下，您可以从定义的资源析构函数（调用 enif_open_resource_type 时传递的函数指针）中调用 delete。

至于你用 memcpy 做什么，它对于复杂的对象是不安全的。例如，如果您的类成员之一是指向动态分配资源的指针，该资源在其析构函数中销毁，并且您对其进行 memcpy，则两个对象现在共享同一资源。当其中一个对象被销毁（超出范围，删除运算符）时，另一个对象会留下一个指向已释放内存的指针。

如果您有一个复杂的类，这就是为什么要定义复制和赋值构造函数的原因。实际上，我猜 CopyFrom 应该既是您的赋值又是复制构造函数。

# sql - TSQL：如何判断 UDF 的类型？

> ID：13647113
> 
> 赞同：0
> 
> 时间：2012-11-30T14:27:53.330
> 
> 标签：sql, sql-server, tsql

使用 TSQL 有没有办法确定 UDF 是返回标量值还是表值？

我检查了此查询的结果，但看不到基于类型的函数有任何差异：

```
select * from sysobjects where type = 'FN' 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T14:42:13.797

实际上你快到了:)

标量函数被列为`FN`in类型`sysobjects`，表函数被列为 type `TF`。

```
SELECT * from sysobjects WHERE Xtype IN ('FN','TF') 
```

或者

```
SELECT * from sysobjects WHERE [type] IN ('FN','TF') 
```

将返回两者。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T14:36:46.323

我认为`sp_help`做你想做的

`sp_help 'dbo.InlineFunction'`

```
Name            Owner   Type                Created_datetime
InlineFunction  dbo     inline function     2012-11-20 10:23:59.260 
```

对...

`sp_help 'dbo.ScalarFunction'`

```
Name            Owner   Type                Created_datetime
ScalarFunction  dbo     scalar  function    2012-11-20 10:23:59.260 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T14:36:06.663

你试过加入吗`sys.parameters`

```
select * FROM sys.objects AS SO
INNER JOIN sys.parameters AS P 
ON SO.OBJECT_ID = P.OBJECT_ID where type = 'FN' 
```

该`type_desc`列应该是`SQL_SCALAR_FUNCTION`或者`SQL_TABLE_VALUED_FUNCTION`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T14:40:17.210

除了`sysobjects`and`sys.Types`您可以检查 UDF 并查看它是否仅返回 a`value`或 a `table`。

```
CREATE FUNCTION getCost(@person VARCHAR(10), @month TINYINT)
RETURNS INT 
AS
BEGIN
--function body here 
```

在上述情况下，它只返回`INT`所以类型是`FN`

```
CREATE FUNCTION getCost(@person VARCHAR(10), @month TINYINT)
RETURNS TABLE
AS
BEGIN
--function body here 
```

由于函数正在返回，`table`因此它的类型是`TF`（表值函数）

[UDF 类型](http://msdn.microsoft.com/en-us/library/ms177499%28v=sql.90%29.aspx)

# php - 腾出空间

> ID：13647120
> 
> 赞同：4
> 
> 时间：2012-11-30T14:28:18.057
> 
> 标签：php, forms, extjs

我有这个菜单：

```
items:[      
{
    xtype: 'form',
    id: 'searchPanel',
    title: 'Search',
    collapsible: true,
    bodyPadding: 10,
    height: 210,
    buttonAlign: 'left',
    defaults: {
        width: 400,
        labelWidth: 120,
        allowBlank: true,
        enableKeyEvents: true        
    },
    layout: {
        type: 'table',
        columns: 2
    },
    items: [
        {
            xtype: 'textfield',
            name: 'txtFltrSiteName',
            fieldLabel: 'Site name or alias',
            id: 'txtFltrSiteName'
        },

        {
            xtype: 'textfield',
            name: 'txtDiskCost',
            fieldLabel: 'Disk cost',
            id: 'txtDiskCost',
            style: 'margin-left: 100px;'
        },

        {
            xtype: 'textfield',
            name: 'txtFltrProjectName',
            fieldLabel: 'Project name',
            id: 'txtFltrProjectName'
        },

       // many other fields 
```

并且复选框和文本字段的宽度不同，因此看起来很难看。
**所以问题是：**
如何使`<td>`这种形式为空？
例如，我想要 6-2 项：

```
----------
| 1 | 1 |
| 2 | 2 |
| 3 | |
| 4 | |
|..等等...|
----------

```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T07:26:09.020

只需进行隐藏输入。像这样：

```
{
    xtype: 'hidden',
    name: 'hidden1',
    id: 'hidden1'
}, 
```

这将成为`<td>`列，但它将是空的，因为它将被`hidden`输入其中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-16T00:39:56.947

这是一个更好的：

```
{
  xtype : 'label',
  text  : '',
  labelSeparator: ''
} 
```

# c# - 如何制作普通的var？

> ID：13647121
> 
> 赞同：-5
> 
> 时间：2012-11-30T14:28:20.877
> 
> 标签：c#

大家好，有代码：

```
namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        public bool od_auth(string login, string pass)
        {
            var cook­ies = new CookieContainer();
            request.CookieContainer = cookies;

            if (response.Headers["Location"] != null)
            {
                return true;
            }
            else
            {
                return false;

            }
        }

        public bool od_info_changer()
        {
            request.CookieContainer = cookies;
            if (response.Headers["Location"].IndexOf("st.cmd=userSettings") != -1)
            {
                return true;
            }
            else
            {
                return false;
            }

        }

        private void Auth_Click(object sender, EventArgs e)
        {
            string login = textBox1.Text;
            string pass = textBox2.Text;
            bool avt = od_auth(login, pass);
            bool change = od_info_changer();
            if (avt == true)
            {

            }
            else
            {
            }
            if (change == true)
            {
            }
            else
            {
            }

        }

        private void Form1_Load(object sender, EventArgs e)
        {

        }
    }
} 
```

我必须在`"public bool od_info_changer()"`var cookie 中使用`public bool od_auth(string login, string pass)`。我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T14:30:21.063

您可以简单地使用字段或属性：

[领域](http://msdn.microsoft.com/en-us/library/ms173118.aspx)：

```
private CookieType cookie; 
```

[属性](http://msdn.microsoft.com/en-us/library/x9fsa0sw.aspx)：

```
private CookieType cookie { get; set; } 
```

该值将在对象内部可见

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T14:31:01.190

不要`var`在这种情况下使用并将 cookie 设为字段：

```
namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        private CookieContainer cookies;

        public Form1()
        {
            InitializeComponent();
        }

        public bool od_auth(string login, string pass)
        {
            cook­ies = new CookieContainer();
            request.CookieContainer = cookies;

            if (response.Headers["Location"] != null)
            {
                return true;
            }
            else
            {
                return false;

            }
        }

        public bool od_info_changer()
        {
            request.CookieContainer = cookies;
            if (response.Headers["Location"].IndexOf("st.cmd=userSettings") != -1)
            {
                return true;
            }
            else
            {
                return false;
            }

        }

        private void Auth_Click(object sender, EventArgs e)
        {
            string login = textBox1.Text;
            string pass = textBox2.Text;
            bool avt = od_auth(login, pass);
            bool change = od_info_changer();
            if (avt == true)
            {

            }
            else
            {
            }
            if (change == true)
            {
            }
            else
            {
            }

        }

        private void Form1_Load(object sender, EventArgs e)
        {

        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T14:30:55.180

只需将变量移至类级别并在类中声明它们，但在表单的构造函数之前。然后，您班级中的所有方法都可以访问它们。

# visual-studio-2012 - VS2012在一个解决方案中发布多个项目

> ID：13647129
> 
> 赞同：14
> 
> 时间：2012-11-30T14:28:45.347
> 
> 标签：visual-studio-2012, publish

我们正在使用VS2012。我们有一个包含多个 Web 项目的解决方案，并且正在使用发布来部署项目。解决方案中已经有相当多的项目。一次发布所有这些是非常耗时的。有没有办法一次发布所有项目？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-04T07:37:56.333

我发现我可以在命令行中使用 msbuild 来发布多个项目。

```
msbuild example.sln /p:Configuration=Test;DeployOnBuild=true;PublishProfile=Test.example.pubxml /MaxCpuCount:8 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-05T16:59:28.560

您可能对从命令行发布感兴趣：

```
msbuild YourSolution.sln /property:Configuration=Release;DeployOnBuild=true;PublishProfile=Production 
```

[例如，您可以在Scott Hanselman 的博客](http://www.hanselman.com/blog/TinyHappyFeatures3PublishingImprovementsChainedConfigTransformsAndDeployingASPNETAppsFromTheCommandLine.aspx)上找到进一步的阅读材料。

# c++ - 回文编程

> ID：13647135
> 
> 赞同：-4
> 
> 时间：2012-11-30T14:29:12.533
> 
> 标签：c++

问题是

回文是一个在两个方向上读取相同的字符串，例如，racecar、eye 等。编写一个程序，提示用户输入一个字符串并使用递归函数来确定给定的输入是否是回文

到目前为止我已经这样做了，但它不起作用：

```
#include<stdio.h>
#include<conio.h>
#include<string.h>// to save string

int isPalindrome(char*str);

int main (void)
{
    int result;
    char str[50];

    printf("\n pls enter string; \n");
    gets(str);
    result = isPalindrome(str);

    if(result ==1) 
    {
        printf("\n input string in a palindrome string ");
    }
    else
    {
        printf(" not a palindrome");
    }

    getch();

    return 1;
}

int isPalindrome(char*str)
{
    static int length = strlen(str);

    if(length<1)
    {
        return 1;
    }

   if(str[0]=str[lenght - 1])
   {
       length-=2;
   }

   return isPalindrome(str + 1)
}

{
     return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-30T14:51:21.557

由于您将问题标记为 C++，因此这种方法可行：

```
#include <string>
#include <algorithm>
#include <iostream>

bool isPalindrome(const std::string& str)
{
    // comparison based on 2 string iterators - a "normal" one
    // and a reversed one
    return std::equal(str.rbegin(), str.rend(), str.begin());
}

int main()
{
    std::cout << isPalindrome("racecar") << std::endl; // prints 1
    std::cout << isPalindrome("truck") << std::endl; // prints 0
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T15:17:11.110

鉴于 Stephan 的回答中的测试功能是如此之小，我们可以使用 lambda 语法进一步简化它......

```
#include <string>
#include <algorithm>
#include <iostream>

int main()
{
    auto isPalindrome = [](const std::string& str)->bool{return std::equal(str.rbegin(), str.rend(), str.begin());};
    std::cout << isPalindrome("racecar") << std::endl; // prints 1
    std::cout << isPalindrome("truck") << std::endl; // prints 0
} 
```

这将允许你做一些像这样的整洁的东西

```
#include <string>
#include <algorithm>
#include <iostream>
#include <vector>

int main()
{
    std::vector<std::string> v{"cat", "racecar", "truck", "1991", "eye", "fish"};

    std::cout << "There are " <<
    count_if(v.begin(), v.end(), [](const std::string& str)->bool{return std::equal(str.rbegin(), str.rend(), str.begin());})
    << " palindromes in the list";
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-30T14:43:13.300

几乎有关此功能的所有内容都被破坏了：

```
int isPalindrome(char*str)
{
    static int length = strlen(str);

    if(length<1)
    {
        return 1;
    }

    if(str[0]=str[lenght - 1])
    {
        length-=2;
    }

    return isPalindrome(str + 1)
}

{
     return 0;
} 
```

我假设你刚刚做了一个非常粗心的复制和粘贴。基本上，`return 0`不是函数范围的一部分，因此您的测试*永远不会返回 0*。因此它将接受所有字符串作为回文。这甚至在您的第一个和最后一个字符测试也被打错和不正确的事实之前。

修复最明显的错误：

```
int isPalindrome(char*str)
{
    static int length = strlen(str);

    if(length<1)
    {
        return 1;
    }

    if(str[0]==str[length - 1])
    {
        length-=2;

        return isPalindrome(str + 1)
    }

    return 0;
} 
```

导致一些代码至少会构建、运行并给出正确的结果。但它不是 C++！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T14:36:19.353

这条线有问题：

```
if(str[0]=str[lenght - 1]) 
```

首先，变量是`length`，**不是** `lenght`。
仅此一项就表明您发布的代码**不是**您实际运行的代码。

其次，在 C 中，相等比较是`==`，而不是单等号（用于赋值）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-30T14:44:52.477

您在标签中说 C++，所以..

```
#include <iostream>
#include <algorithm>
#include <string>

int main ()
{
    std::string input, tupni;
    std::cout << "Enter string: ";
    std::getline(std::cin, input);

    tupni = input;
    std::reverse(tupni.begin(), tupni.end());

    if(tupni==input){
        std::cout << "Is a palindrome" <<std::endl;
    }else{
        std::cout << "Not a palindrome" <<std::endl;
    }
} 
```

这使用了`reverse`来自 STL 的算法。始终查看可用的现有算法。几乎总会有一些东西可以帮助您快速解决问题。

这里的字符串副本有点浪费。为了提高效率，请使用 Stephan 建议的反向迭代器方法。

# actionscript-3 - As3 Flash：3d 网格的属性

> ID：13647136
> 
> 赞同：0
> 
> 时间：2012-11-30T14:29:13.797
> 
> 标签：actionscript-3, flash, apache-flex, flash-cs5, away3d

下面我特意制作了一个测试脚本：你可以在[www.parele.com/plane.html](http://www.parele.com/plane.html)上看到它 所有源代码都在下面，我想要做的是改变我的网格......请注意：我想改变材料我的模型网格，到另一种颜色，任何颜色都不会创建一个新平面，因为这个样本是一个例子来测试这个不是我的实际爱好项目，我很乐意提供任何需要的文件或信息..我一直在这整整 20 多个小时被困在这里，它杀死了我

```
import away3d.containers.Scene3D;
import away3d.containers.View3D;
import away3d.containers.ObjectContainer3D;
import away3d.debug.AwayStats;
import away3d.entities.Mesh;
import away3d.containers.ObjectContainer3D;
import away3d.loaders.Loader3D;
import flash.display.Sprite;
import flash.display.StageAlign;
import flash.display.StageScaleMode;
import flash.events.Event;
import flash.events.MouseEvent;
import away3d.*;
import away3d.materials.ColorMaterial;
import away3d.materials.TextureMaterial;
import away3d.textures.BitmapTexture;
import sunag.animation.AnimationTarget;
import sunag.events.SEAEvent;
import sunag.sea3d.SEA3D;
import away3d.materials.methods.*;
import away3d.primitives.*;
import away3d.textures.*;
import away3d.utils.*;
import away3d.events.*;
[SWF(width = "955",height = "600",frameRate = "50")]
var view:View3D;
var scene:Scene3D;
var sea3d:SEA3D;
var _container:ObjectContainer3D = new ObjectContainer3D();
[Embed(source = "Models/plane.sea",mimeType = "application/octet-stream")]
var homepage:Class;
stage.stageFocusRect = false;
stage.showDefaultContextMenu = false;
stage.align = StageAlign.TOP_LEFT;
stage.scaleMode = StageScaleMode.NO_SCALE;
scene = new Scene3D();
view = new View3D(scene);
view.backgroundColor = stage.color;
view.antiAlias = 4;
var dat:BitmapData = new BitmapData(256, 256, false, WHATEVERCOLOUR);
var mMaterial = new TextureMaterial(new BitmapTexture(dat));
scene.addChild(_container);
addChild(view);
sea3d = new SEA3D();
view.blendMode = BlendMode.NORMAL;
sea3d.addEventListener(SEAEvent.COMPLETE, onComplete);
sea3d.loadBytes(new homepage());

function onEnterFrame(e:Event):void
{

 var body1:Mesh = sea3d.getMesh("body");
 body1.material = mMaterial;
 view.render();
 }
 function onComplete(e:SEAEvent):void
 {
 view.camera = sea3d.getCamera("Camera001");
  stage.addEventListener(Event.ENTER_FRAME, onEnterFrame);
  scene.addChild(sea3d.container);
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T01:55:45.623

我相信这就是你要找的东西：[SubMeshes](http://away3d.com/livedocs/away3d/4.0/away3d/entities/Mesh.html#subMeshes)

从模型中提取的网格通常至少由 SubMesh 组成，但可以包含多个。更改该“根”网格对象上的材质不会传播到其子网格。您需要遍历其子网格并更改其材质。

hth。

# java - 向上/向下舍入到数字

> ID：13647137
> 
> 赞同：-1
> 
> 时间：2012-11-30T14:29:14.787
> 
> 标签：java

我有一堆整数需要向上或向下舍入到除以 25 的最接近的值。

例如：

417 轮到 425

405 舍入到 400

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T15:49:28.757

```
int roundedValue = (valueToRound + 12) / 25 * 25; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T14:30:39.397

*   将数字除以 25，将其转换为整数，然后将其乘以 25
*   或者取它的值并删除值 %25 的结果
*   在任何值之前添加 25/2 以四舍五入到最接近的值

    函数roundTo（值，舍入）{ temp = value + rounding/2; return temp - temp%rounding; }

# php - 缓存来自 php 脚本的输出文件未按预期工作

> ID：13647139
> 
> 赞同：0
> 
> 时间：2012-11-30T14:29:29.803
> 
> 标签：php

我有一个每天发送不同图像的 php 脚本。我希望在白天缓存图像，但我的脚本没有按预期工作，因为在每个请求中都返回 200 OK 。

代码是：

```
<?php

$uno = '1.jpg';
$dos = '2.jpg';
$tres = '3.jpg';
$cuatro = '4.jpg';
$cinco = '5.jpg';
$seis = '6.jpg';
$siete = '7.jpg';

$today=date(l); 

header('Content-Disposition: inline');
header('Content-Type: image/jpg');
header("Content-Transfer-Encoding: Binary");

$expire=60*60*24*1; // seconds, minutes, hours, days
header('Pragma: public');
header('Cache-Control: maxage='.$expire);
header('Expires: ' . gmdate('D, d M Y H:i:s', time()+$expire) . ' GMT');
header('Last-Modified: ' . gmdate('D, d M Y H:i:s') . ' GMT');

// Find what today is? using date function
if($today==Monday){
readfile($uno);
exit;
}

elseif($today==Tuesday){
readfile($dos);
exit;
}

elseif($today==Wednesday){
readfile($tres);
exit;
}

elseif($today==Thursday){
readfile($cuatro);
exit;
}

elseif($today==Friday){
readfile($cinco);
exit;
}

elseif($today==Saturday){
readfile($seis);
exit;
}

elseif($today==Sunday){
readfile($siete);
exit;
}

?> 
```

这有什么问题？

**更新：**

我刚刚尝试按照[WebnetMobile.com](https://stackoverflow.com/a/13647315/1618163)的说法重构代码，但似乎*缓存*问题仍然存在，因为它仍然返回 200 OK。

新代码是：

```
<?php

$today=date("l"); 

header('Content-Disposition: inline');
header('Content-Type: image/jpg');
header("Content-Transfer-Encoding: Binary");

$expire=60*60*24*1;// seconds, minutes, hours, days
header('Pragma: public');
header('Cache-Control: maxage='.$expire);
header('Expires: ' . gmdate('D, d M Y H:i:s', time()+$expire) . ' GMT');
header('Last-Modified: ' . gmdate('D, d M Y H:i:s') . ' GMT');

// Find what today is? using date function

$map = array( 'Monday' => '1.jpg',
              'Tuesday' => '2.jpg',
              'Wednesday' => '3.jpg',
              'Thursday' => '4.jpg',
              'Friday' => '5.jpg',
              'Saturday' => '6.jpg',
              'Sunday' => '7.jpg'
             );

readfile( $map[ $today ] );

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T14:33:18.613

Monday 应该是一个字符串，否则 PHP 会将其视为一个常量，发现该常量不存在，发出警告，然后确定您的意思是它是一个字符串。

```
if($today=="Monday"){ 
```

同样适用于所有其他工作日名称

警告消息可能会弄乱输出

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T14:39:43.823

您需要与字符串进行比较，否则您将尝试与**不存在**的常量进行比较。所以应该是

```
if( $today == 'Monday' ) {
   // do someting...
} 
```

但更好的是`if/elseif`，您应该使用而不是使用一堆`switch/case`

```
switch( $today ) {
   case 'Monday':
       // do someting...
       break;
} 
```

最好的是，如果您需要做的只是拾取正确的图像，那么您应该这样做更聪明：

```
$map = array( 'Monday' => '1.jpg',
              'Tuesday' => '2.jpg',
              ...
             );

readfile( $map[ $today ] ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T14:39:56.020

扩展上述标记答案的简短评论 - 请将您的代码重构为：

```
header('Content-Disposition: inline');
header('Content-Type: image/jpg');
header("Content-Transfer-Encoding: Binary");

$expire=60*60*24*1; // seconds, minutes, hours, days
header('Pragma: public');
header('Cache-Control: maxage='.$expire);
header('Expires: ' . gmdate('D, d M Y H:i:s', time()+$expire) . ' GMT');
header('Last-Modified: ' . gmdate('D, d M Y H:i:s') . ' GMT');

readfile( date('w') . '.jpeg' );
exit; 
```

将您的 sunday/domingo 文件重命名为`0.jpg`- 利用[`date('w')`](http://php.net/manual/en/function.date.php).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T15:27:03.383

我认为你应该从生成 HTML 的 PHP 文件中解决这个问题，而不是检索图像的文件。如果您想在周日加载图像，在周一加载另一个图像，.. 您可以在调用页面上使用类似的内容。

```
echo('<img src="'.date('w').'.jpeg" />'); 
```

（或使用任何其他方法来查找此页面中显示的正确文件名，例如 date('l')+array）

这样，您就可以让浏览器/服务器处理真实文件的缓存并显示当天正确的文件。

或者

```
<!other HTML here...>
<img src="<? echo('.date('w').'.jpeg');?>" />
<!other HTML here...> 
```

如果文件是“主要是 HTML”。

如果您不想在星期二看到星期一的图像，那么缓存是一个坏主意，当然，除非那是您想要的。

（如果你真的想缓存它们，那么 $expires 应该是=到下一个午夜的秒数）

# c# - 将 Excel.WorkSheets 放入相同的 Excel.Workbook

> ID：13647141
> 
> 赞同：3
> 
> 时间：2012-11-30T14:29:38.627
> 
> 标签：c#, excel, automation

因此，经过大量研究并在类中使用下面的代码后，我传递的项目（数据表）在 Excel 中打开。我有大约 5 张纸需要在同一本书中打开。下面的代码是前 2 个。问题是它们都在 NEW WorkBooks 中打开——我需要它们都在 SAME WorkBook 中打开。但是，它们在每个新工作簿中的正确工作表上打开。我认为一个简单的“如果”语句会起作用，但是，它不是——任何关于如何将它们合并到一个工作簿中的输入将不胜感激，并提前致谢！

```
Microsoft.Office.Interop.Excel.Application oExcel = new               
Microsoft.Office.Interop.Excel.Application();
Microsoft.Office.Interop.Excel.Workbooks oBooks;
Microsoft.Office.Interop.Excel.Sheets oSheets;
Microsoft.Office.Interop.Excel.Workbook oBook;
Microsoft.Office.Interop.Excel.Worksheet oSheet;

oExcel.Visible = true;
oExcel.DisplayAlerts = false;
oExcel.Application.SheetsInNewWorkbook = 5;
oBooks = oExcel.Workbooks;

oBook = (Microsoft.Office.Interop.Excel.Workbook)(oExcel.Workbooks.Add(Type.Missing));
oSheets = oBook.Worksheets;

        if (sheetName == "Combined")
        {

            oSheet = (Microsoft.Office.Interop.Excel.Worksheet)oSheets.get_Item(1);
            oSheet.Name = sheetName;

            object[,] arr = new object[dt.Rows.Count, dt.Columns.Count];

            for (int r = 0; r < dt.Rows.Count; r++)
            {
                DataRow dr = dt.Rows[r];
                for (int c = 0; c < dt.Columns.Count; c++)
                {
                    arr[r, c] = dr[c];
                }
            }

            Microsoft.Office.Interop.Excel.Range c1 = (Microsoft.Office.Interop.Excel.Range)oSheet.Cells[1, 1];
            Microsoft.Office.Interop.Excel.Range c2 = (Microsoft.Office.Interop.Excel.Range)oSheet.Cells[1 + dt.Rows.Count - 1, dt.Columns.Count];
            Microsoft.Office.Interop.Excel.Range range = oSheet.get_Range(c1, c2);

            range.Value2 = arr;
         }
         else  if (sheetName == "Auto") 
            {

            oSheet = (Microsoft.Office.Interop.Excel.Worksheet)oSheets.get_Item(2);
            oSheet.Name = sheetName;
            object[,] arr = new object[dt.Rows.Count, dt.Columns.Count];

            for (int r = 0; r < dt.Rows.Count; r++)
            {
                DataRow dr = dt.Rows[r];
                for (int c = 0; c < dt.Columns.Count; c++)
                {
                    arr[r, c] = dr[c];
                }
            }

            Microsoft.Office.Interop.Excel.Range c1 =       
            (Microsoft.Office.Interop.Excel.Range)oSheet.Cells[1, 1];
            Microsoft.Office.Interop.Excel.Range c2 = 
            (Microsoft.Office.Interop.Excel.Range)oSheet.Cells[1 + dt.Rows.Count - 1,  
            dt.Columns.Count];
            Microsoft.Office.Interop.Excel.Range range = oSheet.get_Range(c1, c2);

            range.Value2 = arr;
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T14:35:50.773

好吧，如果没有注释，您的代码有点太长无法理解，但是如果您想在当前工作簿中添加新工作表，则可以使用 myWorkbook.Sheets.Add() 方法（其中 myWorkbook 是当前工作簿的引用）。

[http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.sheets.add(v=office.14).aspx](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.sheets.add(v=office.14).aspx)

# jquery - 通过 AJAX 调用定期加载数据表

> ID：13647146
> 
> 赞同：1
> 
> 时间：2012-11-30T14:30:03.343
> 
> 标签：jquery, jquery-datatables

下面是我的代码：

```
(function worker() {
oTable = $('#example').dataTable({"iDisplayLength" : 25, "sAjaxSource": "/getservicevers/?value=" + QueryString.stage ,"bDestroy" : true ,  "fnServerData" :
                function ( sSource, aoData, fnCallback ) {
                        $.ajax( {
                                 "dataType": 'json',
                                "type": "GET",
                                "url": sSource,
                                "async":false,
                                "success": function (json)
                                {
                                        fnCallback(json);
                                },
                                complete: function() {
                                setTimeout(worker, 5000);
                                }
                        })
                }
                });
        })(); 
```

在 UI 方面，我确实看到定期发出 AJAX 请求，但问题是 DataTables 仅在浏览器中首次完美加载（宽度/大小）：

```
Show                                                                                                                                                                                                 Search

XXXXXX                                          XXXXXXXXXXXXX                             XXXXXXXXXXXX                                XXXXXXXXXXXXXX

Showing ...                                                                                                                                                                                        Prev / Next 
```

第二次收到 AJAX 响应时，DataTables 只会缩小：

```
Show                                                                                                                                                                                                 Search

                                                                                  XXXXX    XXXX  XXXXX    XXXX

Showing ...                                                                                                                                                                                        Prev / Next 
```

请注意标签和数据是正确的，但只是表格缩小了 - 请帮助解决问题

提前致谢。

======================================更新============= ==========================

我尝试了以下代码：

```
oTable = $('#example').dataTable();
(function worker() {
                        $.ajax( {
                                "dataType": 'json',
                                "type": "GET",
                                "url": "/getservicevers/?data=" + QueryString.data,
                                "async":false,
                                "success": function (data)
                                {
                                        alert("myObject is " + data.toSource());
                                        alert(data.aaData[0][0]);
                                        oTable.fnClearTable();
                                        for(var i = 0; i < data.length; i++) {
                                            oTable.fnAddData([
                                                data.aaData[i][0],
                                                data.aaData[i][1],
                                                data.aaData[i][2]
                                        ]);
                                }
                                },
                                complete: function() {
                                        oTable.fnDraw();
                                        setTimeout(worker, 5000);
                                }
                });
        })(); 
```

AJAX 调用成功方法中前两个 alert 语句的输出为：

```
myObject is ({iTotalRecords:1, iTotalDisplayRecords:1, aaData:[[" data1", " data2", " data3"]]})
data1 
```

该代码工作正常，但在页面中我没有在数据表中看到任何数据，而是：

```
Show                                                                                                                                                                                                 Search

    XXXXXX                                          XXXXXXXXXXXXX                             XXXXXXXXXXXX                                XXXXXXXXXXXXXX

                                         No data available in table    
    Showing ... 
```

我需要进一步解决这个问题，并注意在发出 AJAX 请求时我没有看到“正在加载...”文本。以下是我的完整代码：

```
<!DOCTYPE html>
<html>

<head>
        <title>My Details</title>
        <meta charset='UTF-8' />
        <link rel="stylesheet" type="text/css" href="http://ajax.aspnetcdn.com/ajax/jquery.dataTables/1.9.4/css/jquery.dataTables.css" />
        <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
        <script src="http://ajax.aspnetcdn.com/ajax/jquery.dataTables/1.9.4/jquery.dataTables.min.js"></script>
        <script>
        $(document).ready(function() {
        var QueryString = function () {
                                                  var query_string = {};
                                                  var query = window.location.search.substring(1);
                                                  var vars = query.split("&");
                                                  for (var i=0;i<vars.length;i++) {
                                                    var pair = vars[i].split("=");
                                                    if (typeof query_string[pair[0]] === "undefined") {
                                                      query_string[pair[0]] = pair[1];
                                                    } else if (typeof query_string[pair[0]] === "string") {
                                                      var arr = [ query_string[pair[0]], pair[1] ];
                                                      query_string[pair[0]] = arr;
                                                    } else {
                                                      query_string[pair[0]].push(pair[1]);
                                                    }
                                                  }
                                                    return query_string;
                                          } ();
        /* Add the events etc before DataTables hides a column */
        $("thead input").keyup( function () {
                /* Filter on the column (the index) of this element */
                oTable.fnFilter( this.value, oTable.oApi._fnVisibleToColumnIndex(
                        oTable.fnSettings(), $("thead input").index(this) ) );
        } );

        /*
         * Support functions to provide a little bit of 'user friendlyness' to the textboxes
         */
        $("thead input").each( function (i) {
                this.initVal = this.value;
        } );

        $("thead input").focus( function () {
                if ( this.className == "search" )
                {
                        this.className = "";
                        this.value = "";
                }
        } );

        $("thead input").blur( function (i) {
                if ( this.value == "" )
                {
                        this.className = "search";
                        this.value = this.initVal;
                }
        } );
        oTable = $('#example').dataTable();
        (function worker() {
                                $.ajax( {
                                        "dataType": 'json',
                                        "type": "GET",
                                        "url": "/getservicevers/?data=" + QueryString.data,
                                        "async":false,
                                        "success": function (data)
                                        {
                                                alert("myObject is " + data.toSource());
                                                alert(data.aaData[0][0]);
                                                oTable.fnClearTable();
                                                for(var i = 0; i < data.length; i++) {
                                                    oTable.fnAddData([
                                                        data.aaData[i][0],
                                                        data.aaData[i][1],
                                                        data.aaData[i][2]
                                                ]);
                                        }
                                        },
                                        complete: function() {
                                                oTable.fnDraw();
                                                setTimeout(worker, 5000);
                                        }
                        });
                })();
                } );
        </script>
</head>
<body>
        <table id="example">
        <thead>
                <tr>
                        <th>Data1</th>
                        <th>Data2</th>
                        <th>Data3</th>
                </tr>
        </thead>
        <tfoot>
                <tr>
                        <th>Data1</th>
                        <th>Data2</th>
                        <th>Data3</th>
                </tr>
        </tfoot>
        <tbody>
        </tbody>
        </table>
</body>

</html> 
```

通过以下 URL 从浏览器访问的页面：

[http://mybox.com/mon.html?data=test](http://mybox.com/mon.html?data=test)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T23:11:08.423

您的功能看起来很简单，所以我想知道这是否是由浏览器引起的图形故障。添加一个`oTable.fnDraw();`可能就可以了。

或者，如果您的 AJAX 调用返回整个数据集，您可以先使用 a 清除表格，然后通过循环[DataTable 的 .fnAddData() 方法](http://datatables.net/api)`oTable.fnClearTable();`更改将数据添加到表格中的方式。

```
$.ajax({
    url: '/getservicevers/?value=" + QueryString.stage',
    type: 'post',
    data: data, // this would be an array
    success: function(data) {
        oTable.fnClearTable();
        // populate the table with data
        for(var i = 0; i < data.length; i++) {
            oTable.fnAddData([
                data[i].column1,
                data[i].column2,
                data[i].column3
            ]);
        }
    }
}); 
```

# url-rewriting - 连接处理程序的两个不同调用中的相同指针地址

> ID：13647147
> 
> 赞同：1
> 
> 时间：2012-11-30T14:30:09.340
> 
> 标签：url-rewriting, g-wan

我正在重写 url 并用 siege 对其进行测试，但我遇到了一个问题。

有时，gwan 在处理程序连接中对主函数的 2 次调用使用相同的地址。为了在两次调用之间有所不同，我使用带有 rand() 的整数。

在下面的示例中，我们发现 2 个调用的相同地址非常接近......

```
init 1412811699 : buff 0x10d3760 -> GET /imagesproduitnew-100018-imagesgallery/BIG-1.jpg HTTP/1.1

init 687109171 : buff 0x10d3760 -> GET /imagesproduitnew-100018-imagesgallery/BIG-1.jpg HTTP/1.1

regex OK 1412811699 : buff 0x10d3760 -> GET /imagesproduitnew-100018-imagesgallery/BIG-1.jpg HTTP/1.1

extarctPart 1412811699 : buff 0x10d3760 -> GET /imagesproduitnew-100018-imagesgallery/BIG-1.jpg HTTP/1.1

regex OK 687109171 : buff 0x10d3760 -> GET /imagesproduitnew-100018-imagesgallery/BIG-1.jpg HTTP/1.1

rewriteJPG 1412811699 : buff 0x10d3760 -> GET /imagesproduitnew-100018-imagesgallery/BIG-1.jpg HTTP/1.1

xbufreplace 1412811699 : buff 0x10d3760 -> GET /imagesproduitnew/imagesgallery/BIG/100018.jpg HTTP/1.1

-- HERE buffer is changed by the previous step because both have the same address -- 
extarctPart 687109171 : buff 0x10d3760 -> GET /imagesproduitnew/imagesgallery/BIG/100018.jpg HTTP/1.1 
```

为了解决这个问题，我使用来自其他服务器的 siege 以及不同 URL 的列表。

谢谢你的帮助

* * *

我需要重写 URL：/-100018-imagesgallery/BIG-1.jpg 必须发送到文件 /imagesproduitnew/imagesgallery/BIG/100018.jpg

我的代码：

```
int main(int argc, char *argv[])
{
  const long state = (long)argv[0];
  if(state == HDL_AFTER_READ)
  {
    int test = rand();

    xbuf_t *read_xbuf = (xbuf_t*)get_env(argv, READ_XBUF);
    printf ("init %i : buff %p -> %s\n", test, read_xbuf->ptr, read_xbuf->ptr);

    //function to test if URL needs to be rewrite
    if(regexRewriteJPG(read_xbuf->ptr) == 0){
      printf ("regex OK %i : buff %p -> %s\n", test, read_xbuf->ptr, read_xbuf->ptr);

      char *URL;
      char *newURL;
      //extractPart, extract the URL from buffer (/imagesproduitnew-100018-imagesgallery/BIG-1.jpg for exemple)
      URL = extractPart(read_xbuf->ptr, str_regexJPG);
      printf ("extarctPart %i : buff %p -> %s\n", test, read_xbuf->ptr, read_xbuf->ptr);
      if(URL){
        //rewriteJPG return the reel path of the file (/imagesproduitnew/imagesgallery/BIG/100018.jpg for exemple)
        newURL = rewriteJPG(URL);
        printf ("rewriteJPG %i : buff %p -> %s\n", test, read_xbuf->ptr, read_xbuf->ptr);
        if(newURL){
          xbuf_repl(read_xbuf, URL, newURL);
          printf ("xbufreplace %i : buff %p -> %s\n", test, read_xbuf->ptr, read_xbuf->ptr);
          free(newURL);
        }
        else{
          printf("newURL is NULL\n");
        }
        free(URL);
      }
      else{
        printf("URL is NULL\n");
      }
    }
    printf ("END %i : buff %p -> %s\n", test, read_xbuf->ptr, read_xbuf->ptr);
  }
return 255; // execute next connection 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T15:39:58.477

这种`printf()`自定义处理程序变量的转储肯定是有意义的......一旦可以访问您的处理程序的源代码。

如果*“处理程序连接中主函数的 2 次调用的相同地址”*是指`READ_XBUF`地址，请记住：

*   G-WAN 内部缓冲区在运行中被重新使用以处理请求（它们在连接的生命周期内不附加）。

*   `printf()`将显示*连续*（以及*并发*）连接

*   使用计时器不会让您知道请求是并发的还是顺序的，直到您为处理程序中每个处理步骤的开始和停止计时。

这可以解释在您的情况下地址是相同的。

更一般地说，在描述问题时，请尝试说明：

1.  您正在使用的输入（数据示例）
2.  你想做什么（简短描述）
3.  你是怎么做的（源代码）
4.  您没有得到的预期输出
5.  您获得的输出。

这将帮助其他人回答您的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T10:55:51.270

只是备注，但您的 URL 映射：

```
/-100018-imagesgallery/BIG-1.jpg 
```

...比您的文件系统目标更少逻辑和更少 RESTFUL：

```
/imagesproduitnew/imagesgallery/BIG/100018.jpg 
```

...因为它破坏了资源的层次结构。

此外，使用文件系统映射将为您节省求助于缓慢的 RegEx 库的障碍。

我并不是说你*“做错了”*，我只是表明有很多方法可以达到你的目标，而不必解决这个不直观的 URI 映射所产生的问题。

如果您*确实*需要在 URI 中进行反转`"100018"`，`"imagesgallery"`那么您可以在不使用 RegEx 的情况下更轻松、更快地完成它。

如果此 URI 映射旨在隐藏资源的真实 PATH，则使用类似于以下 URI 的内容：

```
/imagesproduitnew/imagesgallery/BIG/100018.jpg 
```

由处理程序修改如下：

```
/imagesproduitnew/imagesgallery/BIG/957345.jpg 
```

转换可以通过一个非常简单的操作*就地*完成，比如对资源名称进行异或。

这就是为什么在尝试做不一定是最佳解决方案的事情之前质疑最初的目标是一个好主意。

# c++ - typedef 带参数的模板类

> ID：13647148
> 
> 赞同：0
> 
> 时间：2012-11-30T14:30:10.123
> 
> 标签：c++, templates, typedef

对于大型项目的需要，我需要 typedef 一个模板类的对象，并用参数实例化。

```
Foo< A, B, C > FooItem(bar1, bar2); 
```

`FooItem`是对象，用`bar1`和构造`bar2`。

有没有办法对这个对象进行类型定义（它必须作为一种类型重新用于另一个模板）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T14:34:23.587

你不能 typedef *objects*。您可以 typedef*类型*。（线索就在名字里！）

对于对象，如果您需要较短的句柄，则需要*引用：*

```
typedef Foo<A, B, C> FooABC;

FooABC FooItem(bar1, bar2);

auto & f = FooItem;    // 'f' is a FooABC &

auto copy_of_f = f;    // this is a FooABC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T15:32:09.547

新建类呢？

```
template <typename T1, typename T2, typename T3>
struct Foo1 : public Foo<T1,T2,T3>
{
    Foo1()
    : Foo<T1,T2,T3>(bar1, bar2)   //bar1, bar2 - global or static objects?
    {}
// ......       
};

Foo1<int, char, double> a;
//....
typedef Foo1<A,B,C>  FooItem;
FooItem b; 
```

# iphone - 在 iOS Safari 上更改方向时闪烁白色

> ID：13647150
> 
> 赞同：3
> 
> 时间：2012-11-30T14:29:38.570
> 
> 标签：iphone, ios, google-chrome, safari, media-queries

在装有 iOS 6 的 iPhone 上将方向从纵向更改为横向时，是什么导致响应式设计右侧出现白色闪烁？

**在适用于 iOS 6 的 Safari 上试用：**

1.  像这样的网站不这样做：[http ://html5boilerplate.com](http://html5boilerplate.com)
2.  但是这个确实： http: [//www.initializr.com](http://www.initializr.com)

与重新处理（CPU 延迟）以适应更宽的屏幕有关吗？

它不会发生在适用于 iOS6 的 Chrome 中......

* * *

例如，我刚刚`img`从我自己的测试站点中删除了所有内容并将等的背景设置为非白色，但它仍然会发生`<body>`。`<html>`这似乎发生在许多不同的网站上，但其他网站完全不受它的影响......

可能是网站上的某个人有问题，还是 iOS Safari 错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-11T13:16:50.097

那是因为[http://www.initializr.com/](http://www.initializr.com/)标题中的元素在改变方向时出现（dis）。它强制标题调整大小，并将下面的元素向下推。这会导致 DOM 重绘，从而导致 iO 上出现短暂的白色闪烁。

# sharepoint - SharePoint 2010 扩展重复 CAML 查询超出列表视图阈值

> ID：13647152
> 
> 赞同：0
> 
> 时间：2012-11-30T14:30:21.077
> 
> 标签：sharepoint, recurring-events

为了从列表中获取事件项目，我发出了一个 CAML 查询，它只返回少量项目（大约 17 个）。当我将列表视图阈值设置为 10000 时，一切正常，但是当我将 LVT 设置为 5000 时，我收到“超出管理员设置的列表视图阈值”错误。我的 CAML 查询非常简单：

```
<Where>
<And>
    <DateRangesOverlap>
        <FieldRef Name="EventDate" />
        <FieldRef Name="EndDate" />
        <FieldRef Name="RecurrenceID" />
        <Value Type="DateTime">
            <Now />
        </Value>
    </DateRangesOverlap>
    <And>
        <BeginsWith>
            <FieldRef Name="Place" />
            <Value Type="Text">Boston</Value>
        </BeginsWith>
        <Or>
            <Eq>
                <FieldRef Name="Status" />
                <Value Type="Text">Status1</Value>
            </Eq>
            <Eq>
                <FieldRef Name="Status" />
                <Value Type="Text">Status2</Value>
            </Eq>
        </Or>
    </And>
</And> 
```

谁能解释为什么会发生这种情况？是因为在扩展重复次数时，SP 实际上运行了一个单独的查询，导致超出了 LVT？任何重组查询的建议都很好，但我确实需要查看所有重复事件的出现（不仅仅是主项目）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T14:51:35.660

如果有人感兴趣，我已经设法使用 Query 并找出如何避免达到阈值。我所做的只是更改查询元素的顺序，以便首先列出我的索引字段，最后列出 DateRangesOverlap 节点。这是有效的结果：

```
 <Where>
<And>
    <BeginsWith>
        <FieldRef Name="Place" />
        <Value Type="Text">Boston</Value>
    </BeginsWith>
    <And>
        <Or>
            <Eq>
                <FieldRef Name="Status" />
                <Value Type="Text">Status1</Value>
            </Eq>
            <Eq>
                <FieldRef Name="Status" />
                <Value Type="Text">Status2</Value>
            </Eq>
        </Or>
        <DateRangesOverlap>
            <FieldRef Name="EventDate" />
            <FieldRef Name="EndDate" />
            <FieldRef Name="RecurrenceID" />
            <Value Type="DateTime">
                <Now />
            </Value>
        </DateRangesOverlap>
    </And>
</And>
</Where> 
```

# c++ - Qt std::runtime_error 等效

> ID：13647154
> 
> 赞同：1
> 
> 时间：2012-11-30T14:30:31.357
> 
> 标签：c++, qt, exception

Qt 有一个等价于`std::runtime_error`（like`QString`等价于`std::string`）的类吗？

具体来说，`std::runtime_error`保存一个描述错误的字符串，所以你可以这样做：

```
throw std::runtime_error("my error description"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T14:36:33.160

不，Qt 不使用异常（除了 QtConcurrent::Exception 用于跨线程抛出和捕获异常）。只需使用标准 C++ 异常类。

# c# - 使用路径作为 SQL 参数时无法识别的转义序列

> ID：13647155
> 
> 赞同：1
> 
> 时间：2012-11-30T14:30:33.933
> 
> 标签：c#, string, sqlparameter

我正在尝试存储字符串或`nvarchar(500)`SQL。当我将完整文件路径作为字符串参数传递时，出现无法识别的转义序列错误。

由于路径不是此存储过程期望的常用参数，我如何打开这种可能性，以便它可以接受字符串，例如`c:\foldername\subfoldername`. 我是想`@`在字符串的乞求时添加还是使用 StringBuilder？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T14:32:41.610

由于反斜杠被视为特殊字符（**转义**），因此导致了问题。在路径中使用`/`或作为：`\\`

```
 c:/foldername/subfoldername
      c:\\foldername\\subfoldername 
```

或者如你所说，`@`在前面使用：

```
 @"c:\foldername\subfoldername" 
```

**编辑**：对于 Javascript，我将简单地替换`\`为`/`如下：

```
 path = path.split("\\").join("/"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T14:36:57.260

例如，您还可以通过将 @ 添加到字符串的前面来转义反斜杠（）

```
@"This\Is\Some\Path" 
```

# .net - Global.asax 中的计时器

> ID：13647156
> 
> 赞同：0
> 
> 时间：2012-11-30T14:30:36.120
> 
> 标签：.net, global-asax, dispatchertimer

我想在 IIS 中启动应用程序时启动一个计时器。

你认为最好的地方是 Global.asax 的 Application_Start 吗？

非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T14:45:10.590

这是一个好地方，因为通过这种方式，您可以绝对捕获应用程序池启动的那一刻，但这并不意味着它必须存在于那里而不是在 Singleton 类中，例如，它从`Application_Start`.

这实际上取决于您以后需要在哪里使用该计时器。

# java - 使用 Hmap 进行 Java 解析

> ID：13647157
> 
> 赞同：0
> 
> 时间：2012-11-30T14:30:38.230
> 
> 标签：java, parsing, split

我是 Java 新手。我想解析这种格式的数据

苹果;芒果;橙子:1234;橙子:1244;...;

在任何时间点都可能有多个“橙色”。数字 (1,2...) 增加并相应地作为“橙色”。

好的。拆分后，假设我已将前两个数据（Apple，Orange）存储在一个变量（在 setter 中）以在 getter 函数中返回相同的数据。现在我想将“橙色”事物中的值（1234,1244....等）添加到变量中以便稍后返回。在此之前，我必须检查有多少橙子来了。为此，我知道我必须使用 for 循环。但不知道如何将“值”存储到变量中。

请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T16:24:14.557

让我尝试通过我如何解释这个问题以及——更重要的是——它如何关注输入和输出（期望）而不是实际实现来重新表述这个问题：

> 我需要解析字符串
> 
> `"Apple;Mango;Orange:1234;Orange:1244;...;"`
> 
> 在某种程度上，我可以检索`':'`与水果相关的值（之后的数字）：
> 
> *   *在示例中，我应该收到Apple*和*Mango*的空列表，因为它们没有价值；
> *   我应该收到一份*橙色*`1234, 1244`的清单*的清单。*

 *当然，您的直觉`HashMap`是正确的，但是如果您不太了解具体细节，那么总有人会提出更好的解决方案。

剩下几个白点：

*   没有值的水果应该有一个默认值吗？
*   没有价值的水果应该在地图上吗？
*   输入错误应该如何处理？
*   应该如何处理重复值？

* * *

鉴于这种情况，我们可以开始编写代码：

```
import java.util.*;

public class FruitMarker {

  public static void main(String[] args) {
    String input = "Apple;Mango;Orange:1234;Orange:1244";
    // replace with parameter processing from 'args'

    // avoid direct implementations in variable definitions
    // also observe the naming referring to the function of the variable
    Map<String, Collection<Integer>> fruitIds = new HashMap<String, Collection<Integer>>();

    // iterate through items by splitting
    for (String item : input.split(";")) {
      String[] fruitAndId = item.split(":"); // this will return the same item in an array, if separator is not found
      String fruitName = fruitAndId[0];
      boolean hasValue = fruitAndId.length > 1;

      Collection<Integer> values = fruitIds.get(fruitName);
      // if we are accessing the key for the first time, we have to set its value
      if (values == null) {
        values = new ArrayList<Integer>(); // here I can use concrete implementation
        fruitIds.put(fruitName, values);   // be sure to put it back in the map
      }
      if (hasValue) {
        int fruitValue = Integer.parseInt(fruitAndId[1]);
        values.add(fruitValue);
      }
    }

    // display the entries in table iteratively
    for (Map.Entry<String, Collection<Integer>> entry : fruitIds.entrySet()) {
      System.out.println(entry.getKey() + " => " + entry.getValue());
    }
  }

} 
```

如果执行此代码，您将获得以下输出：

```
Mango => []
Apple => []
Orange => [1234, 1244] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T14:53:11.453

```
 String input = "Apple;Mango;Orange:1234;Orange:1244;...;"
 String values[] = input.split(";");
 String value1 = values[0];
 String value2 = values[1];

 Hashmap< String, ArrayList<String> > map = new HashMap<String, ArrayList<String>>();
 for(int i = 2; i < values.length; i = i + 2){
      String key = values[i];
      String id = values[i+1];

      if (map.get(key) == null){
          map.put(key, new ArrayList<String>());
      }
      map.get(key).add(id);
 }

 //for any key s:
  // get the values of s
  map.get(s);  // returns a list of all values added
  // get the count of s
  map.get(s).size(); // return the total number of values. 
```*

# mysql - 是否有任何其他库可用于在 Ruby 中连接 MySQL？

> ID：13647160
> 
> 赞同：0
> 
> 时间：2012-11-30T14:30:46.643
> 
> 标签：mysql, ruby, require, dbi

我现在正在使用

> 需要'dbi'

但我只是想知道是否还有其他选择？哪个是最好的？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T15:44:38.423

mysql2 是最常用的库

[https://github.com/brianmario/mysql2](https://github.com/brianmario/mysql2)

宝石安装'mysql2'

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T14:32:16.113

有一个用于 ruby​​ 的 mySql gem。这是它的页面 - [http://rubygems.org/gems/mysql](http://rubygems.org/gems/mysql)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T15:41:55.930

这些是我想到的：

*   续集：[http ://sequel.rubyforge.org/](http://sequel.rubyforge.org/)
*   阿雷尔：https://github.com/rails/arel

# c# - Sys.WebForms.PageRequestManagerServerErrorException：一个实体对象不能被多个 IEntityChangeTracker 实例引用

> ID：13647165
> 
> 赞同：2
> 
> 时间：2012-11-30T14:30:57.480
> 
> 标签：c#, asp.net, entity-framework, telerik-grid

故事：

当我尝试保存某些内容时出现一个奇怪的错误，我收到了此错误消息

> 一个实体对象不能被多个 IEntityChangeTracker 实例引用。

我真的不知道那是什么，为什么会出现，只有当我尝试保存我的插入和更新正在工作的东西时才会出现，只有当我尝试从 Telerik 网格中将某些东西保存在 db 中时才会出现

```
 if (this.annualVacationList != null)
        {
            List<AnnualVacation> vacationToSave = this.annualVacationList;
            IEnumerable<AnnualVacation> existing = paramUser.AnnualVacations;
            foreach (AnnualVacation toSave in vacationToSave)
            {
                AnnualVacation existingItem = existing.Where(x => x.AnnualVacationId == toSave.AnnualVacationId).SingleOrDefault();
                if (existingItem == null)
                {
                    ctx.AddToAnnualVacations(toSave);
                }
                else
                {
                    existingItem.FromDate = toSave.FromDate;
                    existingItem.ToDate = toSave.ToDate;
                    existingItem.WorkingTime = toSave.WorkingTime;
                    existingItem.VacationDays = toSave.VacationDays;
                }
            }
        }
        ctx.SaveChanges();
    } 
```

调试后，我看到代码在 Project.Name.Designer.cs 中停止运行 ..... Oo

```
 public void AddToAnnualVacations(AnnualVacation annualVacation)
    {
        base.AddObject("AnnualVacations", annualVacation);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T14:19:17.437

嘿嘿

我自己得到了它，视图状态并没有分离上下文，这就是我刚刚创建的问题

```
var tmp = new AnnualVacation
                    {
                        FromDate = toSave.FromDate,
                        ToDate = toSave.ToDate,
                        WorkingTime = toSave.WorkingTime,
                        VacationDays = toSave.VacationDays,
                        UserId = toSave.UserId
                    }; 
```

在上面的相同 if 查询中 (if(existing Item==null)) 并且它有效，但仍然感谢所有试图帮助我的人^^

# java - 为什么其他包中的类定义不能实现接口或扩展java中默认包中的类定义

> ID：13647169
> 
> 赞同：3
> 
> 时间：2012-11-30T14:31:03.453
> 
> 标签：java, interface, package

下面的接口在默认包中定义

```
public interface Foo{  
} 
```

* * *

```
package com.code  
public class  MyClass implements Foo{  
} 
```

* * *

上面的代码会给出以下编译错误：
Foo can't be resolve to type
why???

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T14:35:02.007

这就是为什么建议您将所有代码放入包中的原因。

当您在不使用包名的情况下引用类或接口时，假设该类与引用它的代码在同一个包中。所以编译器看到了这个：

```
 package com.code  
  public class  MyClass implements com.code.Foo{  
   } 
```

由于无法在代码中引用默认包，因此不要使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T15:01:54.463

如果您希望您的类实现一个接口，那么您应该将它们都放在同一个包中，或者在创建类之前导入包含接口的包，或者在声明中使用接口的整个路径。

# php - 两个日期的差异并获得小时和分钟

> ID：13647172
> 
> 赞同：-3
> 
> 时间：2012-11-30T14:31:19.207
> 
> 标签：php

> **可能重复：**
> [两个日期之间的时间差异（以分钟为](https://stackoverflow.com/questions/7929612/time-diff-in-minutes-between-2-dates)
> [单位）php date_diff（以小时为单位）](https://stackoverflow.com/questions/11066503/php-date-diff-in-hours)

我有：

```
$datetime1 = new DateTime('2012-12-01 10:40:00');
$datetime2 = new DateTime('2012-12-03 12:00:00');
$interval = $datetime1->diff($datetime2);
echo $interval->format('%1 day %h hours %i minutes'); 
```

这工作正常，但我怎样才能只显示小时和分钟？对于这个例子应该是：

**49 小时 10 分钟**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T14:42:31.690

来自 PHP 手册：

> 笔记：
> 
> DateInterval::format() 方法不会重新计算时间字符串或日期段中的结转点。这是意料之中的，因为不可能溢出像“32 天”这样的值，它可以解释为从“1 个月零 4 天”到“1 个月零 1 天”的任何内容。

换句话说，`DateInterval`班级不会自己做你要求的事情。您必须自己进行计算。

这样的事情应该这样做：

```
$hours = $interval->h + ($interval->d*24);
print "{$hours} hours ".$interval->format('%i minutes'); 
```

# java - 地址搜索排除特殊字符

> ID：13647173
> 
> 赞同：2
> 
> 时间：2012-11-30T14:31:20.647
> 
> 标签：java

地址只能包含字母、数字、% 和一个破折号 (-)，不允许使用所有其他特殊字符。单破折号 (-) 只能位于 2 个数字之间。% 符号可以位于地址中的任何位置，并且可以多次出现。

```
Valid:   1-10 Downing Street
Valid:   Downing Street 1-10
Valid:   Downing Street
Valid:   Downing%
Valid:   %Downing Street
Valid:   %Dow%ng Street
Invalid: -10 Downing Street 
```

我正在使用 Java Pattern 和 Matcher 来验证地址。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T14:40:40.453

试试这个正则表达式：

```
"[%\\w][%\\w ]+( \\d+-?\\d+)?|(\\d+-?\\d+ )?[%\\w][%\\w ]+" 
```

# centos - CentOS 中的 Horde 和 IMP

> ID：13647174
> 
> 赞同：3
> 
> 时间：2012-11-30T14:31:26.033
> 
> 标签：centos, imp, horde

我在使用 IMP 和 Horde 时遇到了一些问题，

我正在尝试登录邮件控制面板但没有成功，这就是 shell 中出现的内容

```
 user is not authorized for imp on line 259 of "usr/share/pear/Horde/Registry.php 
```

我已经用谷歌搜索了，我发现了这个： http: [//lists.horde.org/archives/horde/Week-of-Mon-20110711/041448.html](http://lists.horde.org/archives/horde/Week-of-Mon-20110711/041448.html)

我按照他们在那里所说的话，但问题仍然存在。

有什么线索吗？！

# c# - 使用 tweetsharp 在 Twitter 上进行特定搜索

> ID：13647177
> 
> 赞同：1
> 
> 时间：2012-11-30T14:31:34.667
> 
> 标签：c#, twitter, tweepy, tweetsharp, twitter-client

```
TwitterService vice = new TwitterService();
           var tweeting = vice.Search("#Ghaza", 100);
           List<TwitterSearchStatus> resultList = new List<TwitterSearchStatus>(tweeting.Statuses);
           foreach (var twt in resultList)
           {
               Console.WriteLine(resultList);
           } 
```

它给了我这样的输出

```
System.Collection.Generic.List '1[TweetSharp.TwitterSearchStatus] 
```

即使我的代码运行没有错误，它也不会返回我的推文

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T13:29:23.900

```
Console.WriteLine(twt.Text); 
```

在你的循环中使用它。有用 。

# c# - 在 WPF 中实现类似 Excel 的功能

> ID：13647180
> 
> 赞同：0
> 
> 时间：2012-11-30T14:31:37.773
> 
> 标签：c#, wpf

我正在努力实现对当前系统的要求。

该系统旨在管理成本和项目细节，目前通过基于 Excel 的解决方案提供。每个项目由数周组成，由列表示，行上显示各种数据项。项目长度使得许多项目超过 150 列。可以动态添加列和数据项，并且用户希望能够使用键盘控件在网格中快速导航。

业务正在从这种不受支持的基于 Excel 的解决方案转移到用 C# 编写的带有 WPF 前端的应用程序，但用户仍然需要一个接近其现有电子表格的解决方案。我最初尝试使用我在其他地方使用过的 Telerik WPF 网格控件来实现这一点，使用动态/扩展对象来保存数据并使用 AutoGeneratingColumn 事件为每个列创建控件。最初性能是可以接受的，但我不得不关闭列和行虚拟化以使用户能够通过选项卡浏览字段，这导致性能显着降低，特别是在添加新行和使用过滤时。

网格控件是否是满足此要求的正确方法——另一个第三方网格能否更好地处理动态列的创建——或者是否有可以同时满足性能和用户界面要求的替代设计？

# html - 底部边框颜色使用文本颜色

> ID：13647189
> 
> 赞同：1
> 
> 时间：2012-11-30T14:32:10.360
> 
> 标签：html, css, google-chrome

我想包裹`<a>`一个div。当我添加它时，边框的颜色保持与文本颜色相同的橙色。

当我在 Chrome 的开发人员工具中切换规则时，橙色变为黑色`color`，但我显然不希望查看器被要求做同样的事情。

请注意，只有 Block Fuse 项目框存在此问题，其他框都没有，因为它们没有`<a>`标签。

我已经在以下位置复制了这个问题：

*   Chrome 版本 23.0.1271.95
*   Chrome 金丝雀版本 25.0.1342.0

这是相关的html：

```
<a href="projects/blockfuse.html">
<div class="project">
    <div class="projectTitle">Block Fuse</div>
    <div class="projectDescription">Block Fuse is a game about knocking as many blocks onto the floor as possible.
        <div class="projectImage"><img class="projectImage" src="images/BlockFuse.png"></img></div>
    </div>
</div>
</a> 
```

这是相关的CSS：

```
div.projectTitle {
    text-align: center;
    font-size: 20pt;
    color: #F90;
    padding: 20px 0px 15px 0px;
    font-family: "Arial", "Helvetica", Sans-Serif;
    border-radius: 20px 20px 0px 0px;
    border-style: solid;
    border-width: 0px 0px 1px 0px;
    border-color: black;
    background-color: #444;
}

div.projectDescription {
    height: 310px;
    font-family: "Arial", "Helvetica", Sans-Serif;
    font-size: 12pt;
    color: #EEE;
    text-shadow: 1px 1px 1px #000;
    background-color: #777;
    padding: 17px;
    border-radius: 0px 0px 20px 20px;
} 
```

![显示橙色底部边框，注意只有这个项目框有这个问题，因为它有一个标签](../Images/3d88030e83611a6b9e5457e060618eb4.png)

在我的网站上试用：[http ://www.rollingkinetics.com/index.html](http://www.rollingkinetics.com/index.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T14:49:09.933

我认为这里的问题是您需要为`a:visited`选择器设置颜色。我最初没有看到这个问题，但是在我点击链接后我看到了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T14:49:30.317

我建议将超链接*放在*div 中。正如我所经历的那样，这会产生更好的行为。
（在这种情况下，链接将应用于 div 的子项，并且外部不会获得额外的 a:link 颜色）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T14:42:36.427

在超链接上不做文字装饰只需添加这个

```
a{
  text-decoration:none;} 
```

# javascript - 将 java 脚本函数参数发送到 ASP.NET MVC 帮助器方法

> ID：13647192
> 
> 赞同：0
> 
> 时间：2012-11-30T14:32:22.187
> 
> 标签：javascript, json, asp.net-mvc-3, html-helper

我的 asp.net mvc 应用程序中有一个 Ajax 表单，它有一个 onSuccess 回调，如下所示：

```
function onSuccessReport(context)
        {
            $('reportChart').empty();

            var line1=@Html.GetStrippedString(context.Expenses);
} 
```

我定义了一个 html 助手，它接受一个字符串并对其进行操作并返回一个字符串。

我传递给 onSuccessReport 的是一个 json 结果，其结构如下：

![在此处输入图像描述](../Images/d819f1f732843ebc71f8de92c844ef18.png)

但我无法发送 context.Expenses 并且应用程序抛出语法错误。

如何将 javascript 变量发送给我的助手？

谢谢

**编辑：** 我认为的错误

****错误1当前上下文中不存在名称'context'****

C#方法

```
json = json.Replace("\"Date\":", string.Empty);

            json = json.Replace("\"Total\":", string.Empty);

            json = json.Replace('}', ']');

            json = json.Replace('{', '[');

            return MvcHtmlString.Create(json); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T14:44:03.087

您将客户端代码 (javascript) 与服务器端代码 (HtmlHelper) 混合在一起。您不能将客户端变量传递给服务器端助手。如果该`context`变量仅在客户端上是已知的，那么您将不得不编写客户端 javascript 函数而不是服务器端帮助程序。因此，将您在此帮助程序中编写的逻辑转移到`Html.GetStrippedString`您可以从脚本中调用的 javascript 函数中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T15:03:34.440

实际上，如果您使用 Ajax，您可以将 javascript 值发送到服务器端。与其按照您的方式使用您的辅助方法，只需将其更改为控制器中的一个操作以返回一些 Json（可能只是一个字符串、数字、对象等）。这是您可以尝试的示例。

看法

```
function onSuccessReport(context)
    {
        $('reportChart').empty();
        var expenses = context.Expenses;
        $.getJSON('@Url.Action("GetStrippedString", "ControllerName")', { expenses: expenses }, function (data) {
            //pending what you pass back as data, do whatever with it
            alert(data);
        });
 } 
```

控制器

```
public JsonResult GetStrippedString(string expenses)
{
    var result = string.Empty;
    //Do something to string
    return Json(result, JsonRequestBehavior.AllowGet);
} 
```

# java - Java 中的程序代码修改（例如变量提取）

> ID：13647193
> 
> 赞同：1
> 
> 时间：2012-11-30T14:32:25.397
> 
> 标签：java, reflection, bytecode-manipulation

我知道使用反射可以做一些很好的事情，例如调用方法或更改字段的值。但是，是否可以在运行时和以编程方式进行更重的代码修改？

例如，如果我有一个方法：

```
public void foo(){
    this.bar = 100;
} 
```

我可以写一个程序来修改这个方法的内部结构，注意到它为一个字段分配了一个常量，然后把它变成下面这样：

```
public int baz = 100;

public void foo(){
    this.bar = baz;
} 
```

也许 Java 并不是真正可以做这种事情的语言——如果不是，我愿意接受一些语言的建议，这些语言可以让我基本上以这种方式重新解析或检查代码，并能够如此精确地改变它。不过，我可能在这里做白日梦，所以请告诉我是否也是这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T14:43:34.347

您正在寻找允许您进行字节码操作的软件，有几个框架可以实现这一点，但目前最知名的两个是：

*   [ASM](http://asm.ow2.org/)
*   [javassist](http://www.javassist.org)

在 Java 类中在运行时执行字节码修改时，请记住以下几点：

*   如果在类加载器加载类之后更改类的字节码，则必须找到一种方法来重新加载它的类定义（通过类加载技巧或使用热交换功能）

*   如果您更改类接口（例如添加新方法或字段），您将只能通过反射访问它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T14:49:23.470

可以公平地说，Java 在设计时并未考虑到这个目的，但您*可以*做到这一点。如何以及何时取决于练习的最终目的。几个选项：

*   在源代码级别，您可以使用[Java Compiler API](http://docs.oracle.com/javase/6/docs/api/javax/tools/JavaCompiler.html)将任意代码编译为类文件（然后可以加载）。

*   在字节码级别，您可以编写一个安装 [ClassFileTransformer](http://docs.oracle.com/javase/6/docs/api/java/lang/instrument/ClassFileTransformer.html)的代理，以便在加载类时“动态”更改它。在实践中，如果您这样做，您也可能会使用诸如[BCEL（字节码工程库）](http://commons.apache.org/bcel/)之类的库来简化对类的操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T03:28:05.013

您想研究[程序转换系统 (PTS)](http://en.wikipedia.org/wiki/Program_transformation)，它为在源代码级别解析和转换语言提供了通用工具。PTS 提供的重写规则实际上是使用目标语言的表面语法说“如果你看到这个模式，用那个模式替换它”。这是使用完整的解析器完成的，因此重写规则实际上对语言语法而不是文本起作用；与基于正则表达式的工具不同，此类重写规则显然不会尝试修改注释中的类似代码的文本。

我们的 DMS 软件再造工具包就是其中之一。它不仅提供通常的解析、AST 构建和漂亮打印（再现带有注释的可编译源代码），而且还支持符号表以及控制和数据流分析。几乎所有有趣的转换都需要这些。DMS 还具有各种 Java 方言以及许多其他语言的前端。

字节码转换器的存在是因为它们更容易构建；“解析”字节码非常容易。当然，您不能使用字节码转换器对源代码进行永久性更改，因此它的用处要小得多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T02:16:36.110

你的意思是这样吗？

```
String script1 = "println(\"OK!\");";
eval( script1 );
script1 += "println(\"... well, maybe NOT OK after all\");";
eval( script2 ); 
```

输出：

```
OK!
OK!
... well, maybe NOT OK after all 
```

... 使用 Java 的脚本扩展。Groovy 和其他类似的东西可能会让你做你想做的事。我自己编写了一个脚本扩展，它通过反射几乎无缝地与 Java 集成；如果您对详细信息感兴趣，请与我联系。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-30T14:41:10.547

只需添加朋友的建议 - Apache Commons 的 BCEL 看起来很棒：

[http://commons.apache.org/bcel/manual.html](http://commons.apache.org/bcel/manual.html)

> 字节码工程库 (Apache Commons BCEL™) 旨在为用户提供一种方便的方法来分析、创建和操作（二进制）Java 类文件（以 .class 结尾的文件）。类由包含给定类的所有符号信息的对象表示：特别是方法、字段和字节码指令。此类对象可以从现有文件中读取，由程序（例如运行时的类加载器）转换并再次写入文件。一个更有趣的应用是在运行时从头开始创建类。如果您想了解 Java 虚拟机 (JVM) 和 Java .class 文件的格式，字节码工程库 (BCEL) 可能也很有用。

# c++ - 为什么我的 CUDA 程序的初始执行时间比后续执行时间长？

> ID：13647195
> 
> 赞同：1
> 
> 时间：2012-11-30T14:32:28.320
> 
> 标签：c++, cuda, thrust

我有 test.cu 文件，它正在用 NVCC 编译

```
void sort()
{

thrust::host_vector<int> dat1(50);
thrust::generate(dat1.begin(),dat1.end(),rand);

for(int i=0; i<dat1.size(); i++)
{
    std::cout << dat1[i] << std::endl;
}

thrust::device_vector<int> dev_vec1 = dat1;

thrust::sort(dev_vec1.begin(),dev_vec1.end());
thrust::copy(dev_vec1.begin(),dev_vec1.end(),dat1.begin());

for(int i=0; i<dat1.size(); i++)
{
    std::cout << dat1[i] << std::endl;
}

}

#include "test.cuh"

int main()
{
   sort();
   return 0;
} 
```

但是在设备上进行排序需要 40 秒。但是当我第二次运行它时，它运行得很快。什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T14:45:46.317

最可能的原因是，在首次运行期间，您的操作系统正在加载 CUDA 库并在实际初始化 CUDA 上下文之前执行一些其他技术任务。在第二次运行时，所有内容都已加载，并且上下文初始化更快。

# spree - Spreecommerce 文件位置

> ID：13647201
> 
> 赞同：1
> 
> 时间：2012-11-30T14:32:49.790
> 
> 标签：spree

我喜欢在本地部署 Spreecommerce 并希望实现自己的更改。我已经成功部署，但我不知道实际的源文件来自哪里或在哪里运行。我需要帮助来解决这个问题。请任何人帮助我。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T20:59:42.713

Bundler 将依赖的 gem 下载到一个缓存位置，但如果您想要更改代码，您不想弄乱它。当您更新宝石时，您在那里更改的任何内容都会丢失。

您需要熟悉标准的 Rails 自定义方法。按照干扰最小到最大的顺序：

*   装饰器 - 宿主应用程序的应用程序文件夹结构（资产、控制器、模型、覆盖、视图等）中的文件，它们通过使用语法`Spree::[whatever class].class_eval do`然后使用标准 ruby​​ 方法定义（后跟`end`）更改 Spree 对象上的单个方法。这些文件与同一文件夹中的 Spree 对应文件匹配，只是在您的应用程序中而不是 Spree 的源中。并`_decorator`添加到文件名的末尾。在此处查看示例：[https ://github.com/binaryphile/spree_dibs_1.2/blob/master/app/controllers/spree/admin/payments_controller_decorator.rb](https://github.com/binaryphile/spree_dibs_1.2/blob/master/app/controllers/spree/admin/payments_controller_decorator.rb)
*   覆盖整个 Spree 文件 - 将 Spree 源文件复制到应用程序中的相同位置，然后进行必要的源更改。这将覆盖 Spree 的同名文件（`_decorator`这次没有）。您负责将 Spree 对该文件的所有未来代码更改迁移到您的副本中，这就是不太理想的原因。
*   Fork the Spree 源 - 将您的 Gemfile 引用更改为您的版本而不是 Spree。直接对此代码进行更改并运行它而不是常规 Spree。这是非常不可取的，因为它使升级 Spree 版本非常复杂和困难。

如果您打算使代码可重用，您还可以研究将其变成内部或已发布的扩展。请参阅有关该方法的 Spree 文档。

# android - android: Canvas.drawColor(Color.BLACK) 无法清除画布

> ID：13647204
> 
> 赞同：0
> 
> 时间：2012-11-30T14:32:52.240
> 
> 标签：android, android-canvas

我有一个`LinearLayout`背景颜色设置为黑色。在此`LinearLayout`，我有一个我`View`在其中使用`Canvas`. 因为`onDraw()`方法会被多次调用，所以我想在调用`onDraw()`方法时清除之前绘制的内容，因此我使用`Canvas.drawColor(Color.BLACK)`清除画布。

但是我得到的是一个没有任何东西的黑屏，即使我画了一些新的东西。`Canvas.drawColor(Color.BLACK)`在添加`onDraw()`方法之前，我已经可以绘制一些东西了。

编辑：我的`onDraw()`方法代码

```
String value = "";
static Bitmap bitmap;
static Canvas canvas;
public void init(){// this is called by constructor method
  this.setWillNotDraw(false);
  bitmap = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);
  canvas = new Canvas();
  canvas.setBitmap(bitmap);
}
public void onDraw(Canvas canvas){
  canvas.drawBitmap(bitmap, 0, 0, null);
  drawGrid();
}
public void drawGrid(){
  Paint paint = new Paint();
  paint.setColor(Color.GRAY);
  paint.setStrokeWidth(1);
  canvas.drawText(value, somex, somey, paint);
}
public void changeData(String value){
  this.value = value;
  this.postInvalidate();
} 
```

另一个问题，我打电话的正确地点在哪里`Canvas.drawColor(Color.BLACK)`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T14:38:22.767

我使用了下面的代码，它对我有用。清除画布上的绘图。

```
public void resetBitmapCanvasAndPath() {
    // TODO Auto-generated method stub
    mDrawingUtilities.mBitmap = Bitmap.createBitmap(Constants.SCREEN_WIDTH,Constants.SCREEN_HEIGHT ,
            Bitmap.Config.ARGB_8888);
    mDrawingUtilities.mCanvas = new Canvas(mDrawingUtilities.mBitmap);
    mDrawingUtilities.mPath = new Path();
} 
```

这是与您的问题类似的链接，并查看已接受的答案。 [如何清除手指上的油漆？](https://stackoverflow.com/questions/8338635/how-to-clear-finger-paint)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-30T14:38:03.530

使用`Color.TRANSPARENT`而不是使用`Color.BLACK`

# google-apps-script - 使用 Google Apps 脚本读取电子邮件标头

> ID：13647206
> 
> 赞同：4
> 
> 时间：2012-11-30T14:33:05.287
> 
> 标签：google-apps-script

我想通读我所有的 Gmail 电子邮件的标题以查找特定信息。

我知道无法通过 GmailApp 服务访问（好吧，无论如何都非常肯定）。

关于如何使用主要基于 Apps 脚本的解决方案获取标头信息的任何想法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-30T14:57:18.893

不可以，不能通过 Apps 脚本服务使用电子邮件标头。为此，您必须使用[IMAP](https://developers.google.com/google-apps/gmail/imap_extensions)或 SMTP 路由。

-- **更新**

你让我很好奇，看起来你可以通过`getRawContent()`并手动解析重要的。

这是您可以尝试的代码 -

```
function processInbox() {
  //get first message in first thread
  var message = GmailApp.getInboxThreads(0,1)[0].getMessages()[0];
  Logger.log(message.getRawContent());
}; 
```

这是LinkedIn群组消息的输出 -

```
From: Google APPS users Group Members <group-digests@linkedin.com>
To: Arun Nagarajan <REMOVED@gmail.com>
Message-ID: <1440795364.35263280.1354293878345.JavaMail.app@ela4-app2521.prod>
Subject: [2] discussions, [1] comment and [1] job on LinkedIn
MIME-Version: 1.0
Content-Type: multipart/mixed; 
    boundary="----=_Part_35263277_1178500841.1354293878345"
X-LinkedIn-Template: anet_digest_type
X-LinkedIn-Class: GROUPDIGEST
X-LinkedIn-fbl: s-uPmFAdhOYxvH52TwUlkvTF6rOfu4R6CRfjIFaaCOYfXQgGt9OunBRp

------=_Part_35263277_1178500841.1354293878345
Content-Type: multipart/related; 
    boundary="----=_Part_35263278_821958406.1354293878345"

------=_Part_35263278_821958406.1354293878345
Content-Type: multipart/alternative; 
    boundary="----=_Part_35263270_1718315066.1354293878331"

------=_Part_35263270_1718315066.1354293878331
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

message here
<snip> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-17T08:27:57.167

感谢@Arun，只是在您的顶部添加一个小示例，例如获取“X-LinkedIn-Template”标头值：

```
var header = message.getRawContent().match(/(X-LinkedIn-Template:)(.*)/);
header[0] // the whole match == X-LinkedIn-Template: anet_digest_type
header[1] // the header key  == X-LinkedIn-Template
header[2] // the value       == anet_digest_type 
```

# c# - 复选框和控制器

> ID：13647210
> 
> 赞同：0
> 
> 时间：2012-11-30T14:33:15.713
> 
> 标签：c#, asp.net-mvc-3, entity-framework, controller

我有一个模型有两个虚拟属性，即

> 公共虚拟 IEnumerable MediumIds { get; 放; }
> 公共虚拟 IEnumerable AnsLanguageIds { 获取；放; }

我已经使用 ViewBag 来填充它们，即

> ViewBag.MediumIds = db.ExamMediums.Where(x => x.ExamId == _ExamId).Select(x => x.Medium); ViewBag.AnsLanguageIds = new SelectList(db.AnswerLanguages.ToList(), "AnswerLanguageId", "AnsLanguage");

我的观点是

> @foreach（ViewBag.MediumIds 中的变量项）{

```
 <input id="MediumIds" name="MediumIds" value="@item.MediumId" type="checkbox"  /><strong>
                            @item.Medium1 </strong>

                        @Html.DropDownList("AnsLanguageIds")
                        <br />
                    } 
```

我想要选择复选框时的功能，而不仅仅是启用下拉菜单，否则它应该被禁用，而且我想要选择哪种语言的媒体

您的回答将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T15:03:34.857

您可以通过`new { disabled = "disabled" }`作为`DropDownList()`方法的`htmlAttributes`参数传递默认禁用下拉列表。选中每个复选框时，此jQuery应切换选择的禁用状态：

```
$(function() {
    $("input#MediumIds").click(function() {
        var checkbox = $(this);
        var dropDownlist = checkbox.sibling("select:first");
        dropDownlist.attr("disabled", checkbox.is(":checked") ? "" : "disabled");
    });
}); 
```

...我不确定您所说的“我想要为哪种媒体选择哪种语言”是什么意思？

# python - 从 pandas 数据框中绘制数据行，由一列中的键标识，而不是由不同的列

> ID：13647222
> 
> 赞同：1
> 
> 时间：2012-11-30T14:33:41.293
> 
> 标签：python, matplotlib, pandas

我正在运行一个模拟，它为我提供了一个在结构上与以下 pandas 数据框相对应的 csv 文件：

```
df = DataFrame({'series': {0: 'A',  1: 'B',  2: 'C',  3: 'A',  4: 'B',  5: 'C',  6: 'A',  7: 'B',  8: 'C',  9: 'A',  10: 'B',  11: 'C',  12: 'A',  13: 'B',  14: 'C'}, 'step': {0: '0',  1: '0',  2: '0',  3: '1',  4: '1',  5: '1',  6: '2',  7: '2',  8: '2',  9: '3',  10: '3',  11: '3',  12: '4',  13: '4',  14: '4'}, 'value': {0: '0',  1: '0',  2: '5',  3: '1',  4: '0',  5: '4',  6: '2',  7: '1',  8: '3',  9: '3',  10: '2',  11: '2',  12: '4',  13: '4',  14: '1'}})

    step  value series
0      0      0      A
1      0      0      B
2      0      5      C
3      1      1      A
4      1      0      B
5      1      4      C
6      2      2      A
7      2      1      B
8      2      3      C
9      3      3      A
10     3      2      B
11     3      2      C
12     4      4      A
13     4      4      B
14     4      1      C 
```

**鉴于此`df`，我如何绘制`(step, value)`每个系列的配对？**

也就是说，我想获取图像

![在此处输入图像描述](../Images/ff51cb29dbae67cd9534ca0fddd59898.png)

这很容易获得（只要`df2.plot("step")`我可以将我的 DataFrame 转换为格式`df2`

```
 A  B  C  step
0  0  0  5     0
1  1  0  4     1
2  2  1  3     2
3  3  2  2     3
4  4  4  1     4 
```

但我不知道如何进行转换`df`→<code>df2 或`df`以任何其他方式从（这是我从模拟中得到的）获取绘图。

在我的情况下，我可以更改我的模拟代码以将相应的数据写入 16 个单独的表列而不是`series`一`value`列，但是 16 是大多数模拟的值，有些不使用所有这些系列，将来我可能需要进一步拆分这些，所以这对我来说不是最好的解决方案。

* * *

为了生成两个示例数据帧，我朝另一个方向做了

```
df2 = pandas.DataFrame({"step":xrange(5),"A":xrange(5),"B":[i*(i+1)/5 for i in xrange(5)],"C":xrange(5,0,-1)})
dfA = df2[["step","A"]].rename(columns={"A":"value"})
dfA["series"] = "A"
dfB = df2[["step","B"]].rename(columns={"B":"value"})
dfB["series"] ="B"
dfC = df2[["step","C"]].rename(columns={"C":"value"})
dfC["series"] ="C"
df = dfA.append(dfB).append(dfC).sort("step")
df.index = xrange(15) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T14:47:52.803

这是获取 DataFrame 的一种方法，您可以在其中更轻松地进行绘图：

```
In [5]: df2 = DataFrame(dict(
                 (L, df[df['series'] == L]['value'].values)
                       for L in df['series'].unique()))

In [6]: df2
Out[6]: 
   A  B  C
0  0  0  5
1  1  0  4
2  2  1  3
3  3  2  2
4  4  4  1 
```

如果将索引名称设置为`'step'`，则可以根据需要进行绘图：

```
In [7]: df2.index.name = 'step'
Out[7]: 
      A  B  C
step         
0     0  0  5
1     1  0  4
2     2  1  3
3     3  2  2
4     4  4  1

In [8]: df2.plot() 
```

*这给出了所需的数字。*

# scala - 如何用 sbt 编译一些文件？

> ID：13647225
> 
> 赞同：9
> 
> 时间：2012-11-30T14:34:06.753
> 
> 标签：scala, sbt

我与 sbt（Scala 构建工具）配合得很好。如果您在代码中只有小问题，那很容易。

现在，在添加了一个主要功能之后，我的大部分代码都被破坏了，我似乎对依赖关系的方式感到困惑。我可以帮助它，首先编译基本模块，但它似乎不允许我这样做。

它的帮助系统...臭名昭著。

```
> help compile
Compiles sources. 
```

是的，嗯。我猜到了。

我想听到的是：我如何只编译 - 说 - `src/module/A.scala`。

这甚至可能是不可能的（再次你好`make`，永远不会抛弃你！）。至少我在 Internet 上找不到任何`sbt compile`仅适用于单个文件的参考。

我在命令行提示符下使用 sbt，而不是 IDE。

**更新：**

是我的错。:/ 将一个源文件拆分为多个，但忘记将一个`package`子句复制到每个新文件。哎呀。

将保持打开一段时间，因为只编译一个文件（即类似的文件`sbt compile filename`）不会是一件坏事。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T14:50:37.420

您可以定义一个[多项目构建](http://www.scala-sbt.org/release/docs/Getting-Started/Multi-Project.html)，其中您想要单独编译的文件被封装在一个项目中。根据文档，以下是可能的：

> 在 sbt 交互式提示符下，键入 projects 以列出您的项目和 project 以选择当前项目。当您运行诸如编译之类的任务时，它会在当前项目上运行。所以你不一定要编译根项目，你可以只编译一个子项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-20T13:01:56.927

我只想在这里提一下，我遇到了 sbt-compile-quick-plugin ( [https://github.com/etsy/sbt-compile-quick-plugin](https://github.com/etsy/sbt-compile-quick-plugin) )。它按照罐头上说的做，只需添加`addSbtPlugin("com.etsy" % "sbt-compile-quick-plugin" % "1.3.0")`到您的`project/plugins.sbt`，然后您就可以启动`sbt`并运行`compileQuick /path/to/your/file`

（见[https://stackoverflow.com/a/46849619/1358677](https://stackoverflow.com/a/46849619/1358677)）

# java - 如何浅克隆未实现 Cloneable 的实例？

> ID：13647228
> 
> 赞同：1
> 
> 时间：2012-11-30T14:34:26.053
> 
> 标签：java, clone, shallow-clone

我的框架处理任何类的域对象。我需要能够浅克隆这样一个域对象实例`foo`，就好像它实现了`Cloneable`（它没有实现）并且我调用`Object.clone()`它返回一个浅克隆。

不起作用的事情：

*   强制 foo 的类实现`Cloneable`公共方法`clone()`。
*   通过反射调用 foo.clone() （到达受保护的方法`Object.clone()`）。它抛出`CloneNotSupportedException`是因为`foo`'s 类没有实现`Cloneable`。
*   序列化和反序列化 foo：我需要浅拷贝，而不是深拷贝。

限制：

*   `foo`的类在编译时是不知道的。
*   `foo`可能具有未作为 getter/setter 公开的字段。

注意：有几个类似的问题，但似乎没有一个专注于获得浅层克隆。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T15:54:57.093

[BeanUtils](http://commons.apache.org/beanutils/api/org/apache/commons/beanutils/BeanUtilsBean.html#cloneBean%28java.lang.Object%29)可以克隆不可克隆的 Bean，只要它们具有 setter/getter。不幸的是， [Orika](http://code.google.com/p/orika/) bean 映射器也不支持私有字段的映射。

最后，您可能更容易基于自己的反射来实现它（正如 hoaz 建议的那样），因为大多数 bean 映射库都尝试执行深度复制，并且您似乎有一些特殊要求（例如支持用于复制私有字段）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T14:46:21.963

```
class A{
    private int a;
    private int[] b;

    public int getA() {
        return a;
    }
    public void setA(int a) {
        this.a = a;
    }
    public int[] getB() {
        return b;
    }
    public void setB(int[] b) {
        this.b = b;
    }

    public static A shallowCopyOf(A instanceOfA){ //performs shallow copy
        A newInstance  = new A();
        newInstance.setA(instanceOfA.getA());
        newInstance.setB(instanceOfA.getB());
        return newInstance;
    }
} 
```

# javascript - innerHTML 没有隐藏在 javascript 验证中

> ID：13647232
> 
> 赞同：0
> 
> 时间：2012-11-30T14:34:32.697
> 
> 标签：javascript

```
function editvalidation() {

    var isDataValid = true;

    var currentCourseO = document.getElementById("currentCourseNo");
    var newCourseNoO = document.getElementById("newCourseNo");

    var currentCourseMsgO = document.getElementById("currentAlert");
    var newCourseMsgO = document.getElementById("newAlert");

    if (currentCourseO.value == "") {
        currentCourseMsgO.innerHTML = "Please Select a Course to edit from the Course Drop Down Menu";
        newCourseMsgO.innerHTML = "";
        isDataValid = false; 
    } else {
        currentCourseMsgO.innerHTML = ""; 
    }

    if (newCourseNoO.value == "") {
        newCourseMsgO.innerHTML = "Please fill in the Course ID in your Edit";
        isDataValid = false;
    } else {
        newCourseMsgO.innerHTML = ""; 
    }

    return isDataValid;

} 
```

嗨，在上面的代码中，我想要做的是，如果`currentCourseO.value == ""`满足，则显示其字符串消息，但不显示字符串消息`newCourseMsgO`。

如果`currentCourseO.value == ""`未满足，则显示满足此验证的`newCourseMsgO`字符串`newCourseMsgO.innerHTML = "Please fill in the Course ID in your Edit";`。

目前它并没有隐藏`newCourseMsgO`何时`currentCourseO.value == ""`满足的字符串。请问我可以用javascript回答吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T14:38:08.173

听起来你的两个 if-else 语句应该连接起来，现在它们不相互依赖。试试这个：

```
if (currentCourseO.value == "") {
    currentCourseMsgO.innerHTML = "Please Select a Course to edit from the Course Drop Down Menu";
    newCourseMsgO.innerHTML = "";
    isDataValid = false; 
} else {
    if (newCourseNoO.value == "") {
        newCourseMsgO.innerHTML = "Please fill in the Course ID in your Edit";
        isDataValid = false;
    } else{
        newCourseMsgO.innerHTML = ""; 
    }
} 
```

# ruby - 按字符串长度和相关的磅排序

> ID：13647237
> 
> 赞同：0
> 
> 时间：2012-11-30T14:34:50.547
> 
> 标签：ruby, sorting

我有一个令人不安的案例：我想对具有相关权重的字符串列表进行排序，如下所示：

```
@array = [{0 => "string"}, {0 => "my string"}, {2 => "my very long string which I want to match"}] 
```

排序的结果应该是：

```
{2 => "my very long string which I want to match"}
{0 => "my string"}
{0 => "string"} 
```

第一个元素是非常长的字符串，因为 pound/string.length 的差异比其他元素具有更好的百分比。

我尝试按重量分组，然后按字符串排序，但它不起作用。我也尝试计算比率，但我仍然没有得到正确的有序列表。

非常感谢你的回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T14:49:05.653

```
@array.sort_by do |h| 
  pound, string = h.first
  -pound.to_f / string.length
end
#=> [{2=>"my very long string which I want to match"}, {0=>"my string"}, {0=>"string"}] 
```

# jquery - 如何动态检查元素是否命中窗口顶部

> ID：13647239
> 
> 赞同：4
> 
> 时间：2012-11-30T14:34:57.567
> 
> 标签：jquery, each, scrolltop

我在彼此下方有多个元素。我想检查这些元素何时到达窗口顶部。我知道如何使用单个元素，但不知道如何使用多个元素。

单元素：

```
$(function(){   
var itemOffset = $('.test').offset().top;

$(window).scroll(function(){
    var scrollTop = $(window).scrollTop();
    if(scrollTop >= itemOffset){
        console.log("item has reached the top");
        }
});}); 
```

但现在我有 5 个带有“测试”类的元素。如果 .test 元素到达顶部，我想说： div 1 已到达顶部；div 2 已到达顶部；等等。所以它必须查看它是哪个 div（也许获取 attr ID 或其他东西？）

这就是我到目前为止所拥有的。

```
$(function(){   
$('.test').each(function(){
    var itemOffset = $(this).offset().top;

    $(window).scroll(function(){
        var scrollTop = $(window).scrollTop();
        var toet = itemOffset - scrollTop;

        if(scrollTop >= itemOffset){console.log("New div has reached the top!")}
    });     
});}); 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T15:24:07.153

我对到达顶部的意思有点模糊，我的意思是它是滚动到视野之外还是可见还是正好在顶部。也就是说，我认为一旦得到答案，数学就很简单，你真正需要做的是检查滚动函数中的每个 div.test 。您可以在需要记录时获取 id 甚至内部文本或任何内容。

这将告诉你哪些是可见的时期，如果你想完全可见那是一个不同的计算。您必须记住的一件事是，滚动事件的触发频率比您想象的要高。

```
$('#container').scroll(function(){
    $('.test').each(function(){
        var itemOffset = Math.abs($(this).offset().top);
        var height = $('#container').height();
        if (itemOffset > 0 && itemOffset < height) {
             alert($(this).attr('id'));
        }
    });
}); 
```

[在这里摆弄](http://jsfiddle.net/tAN6m/28/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-28T10:42:09.373

只需检查滚动位置是否大于元素顶部位置（y 位置）。

```
$(window).scroll(function(){
  if ($(window).scrollTop() > $('#element').position().top) {
    console.log('#element hits top!');
  }
}); 
```

# backbone.js - 是否可以在backbone.js 视图中使用全局变量？

> ID：13647240
> 
> 赞同：10
> 
> 时间：2012-11-30T14:34:58.433
> 
> 标签：backbone.js

是否可以在backbone.js 视图中使用全局变量？

示例：

```
var TodoView = Backbone.View.extend({

 counter: null ; // is this possible ?

 initialize: function(){ 

 this.render();

 },

 render: function(){

}

}); 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-30T15:16:36.063

您可以轻松地将变量存储在至少 3 个不同的范围内：

*   每个视图实例唯一的常规实例变量
    *   这些可以存储为视图`this`对象的属性
    *   例子：`this.selectedItem = this.$el.find('.selected');`
*   视图的所有实例共享的类级变量
    *   这些可以存储在 View 类的构造函数中
    *   示例：（`TodoView.counter = 0;`将其放在整个`.extend`调用之后）
*   真正的全局变量（是的，这些很糟糕，但既然你问了）
    *   您可以通过省略`var`或仅显式分配给`window`对象来泄漏这些
    *   例子：`window.appLaunchTime = new Date()`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-30T17:53:52.973

除了 Peter 已经说过的内容之外，如果您有兴趣拥有一个可在`TodoView`您创建的所有实例中使用的私有变量，那么您可以执行以下操作。

```
(function () {
  var counter = 0; //This can be used now as a private variable inside TodoView

  window.TodoView = Backbone.View.extend({

    initialize: function(){ 
      this.render();
      counter += 1;
    },

    render: function(){
    }
  });
})(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-24T10:21:39.563

尝试将其放在静态范围内

```
var TodoView = Backbone.View.extend({
TodoView.counter++//reference it this way
},{
 counter: null ;}) 
```

可能有点像全局变量

# google-search - 如何让我的页面在搜索结果中更高？

> ID：13647243
> 
> 赞同：-1
> 
> 时间：2012-11-30T14:35:17.113
> 
> 标签：google-search

首先，我有一个博客网站，现在已经 2 个月了，因为它已经上线了。为了使其对 SEO 友好，我已经按照以下步骤操作：

1.  我所有的页眉都在 h1 标签内。
2.  添加了相应的元关键字、元描述和标题标签。

但是，当我从我的一个元关键字中复制粘贴内容并将其粘贴到谷歌时，我发现我的页面没有在任何地方列出..

所以，我很困惑，我应该使用什么关键字来让我的页面在搜索结果中更高？另外，是否有任何值得信赖的 SEO 工具可以帮助我识别相同的内容？

PS：我的网站托管在一个子域中，例如 blog.xyz.in

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T14:38:32.080

您可以使用谷歌的[https://www.google.com/webmasters/tools/](https://www.google.com/webmasters/tools/)和谷歌分析，网站管理员工具将帮助您优化等...

# php - 与用于数据库连接的 parameters.yml 和 config_(dev|stage|prod).yml 混淆

> ID：13647245
> 
> 赞同：7
> 
> 时间：2012-11-30T14:35:27.397
> 
> 标签：php, database, symfony, configuration, doctrine

我理解为什么我应该将我的数据库连接保留在`parameters.yml`文件中，但我还想为开发、阶段和生产环境设置额外的数据库连接以及不同的主机。我以为我可以用 来做到这一点`config_dev.yml`，`config_test.yml`并`config_prod.yml`结合`config.yml`，我错了吗？

在`parameters.yml`我持有主数据库连接但我可以将它移动到配置中吗？

例子：`config.yml`

```
# Doctrine Configuration - notice there is no host defined here
doctrine:
    dbal:
      default_connection: blah
      connections:
        blah:
          driver:   pdo_pgsql
          port:     5432
          dbname:   blah
          user:     blah_user
          password: blah_pass
          charset:  UTF8
        foo:
          driver:   pdo_pgsql
          port:     5432
          dbname:   foo
          user:     foo_user
          password: foo_pass
          charset:  UTF8 
```

例子：`config_dev.yml`

```
# Doctrine Configuration - Here I define the dev hosts
doctrine:
    dbal:
      connections:
        blah:
          host: blah_dev
        foo: 
          host: foo_dev 
```

例子：`config_test.yml`

```
# Doctrine Configuration - Here I define the stage or QA hosts
doctrine:
    dbal:
      connections:
        blah:
          host: blah_stage
        foo: 
          host: foo_stage 
```

例子：`config_prod.yml`

```
# Doctrine Configuration - Here I define the prod hosts
doctrine:
    dbal:
      connections:
        blah:
          host: blah_prod
        foo: 
          host: foo_prod 
```

现在我也删除了其中的设置，`parameters.yml`但 Symfony / Doctrine 不喜欢这样。我错过了什么吗？我怎样才能设置像我一样的东西？

现在，如果我在中定义默认数据库连接，`parameters.yml`我可以连接到它，然后

```
parameters:
    database_driver: pdo_pgsql
    database_host: blah_prod
    database_port: 5432
    database_name: blah
    database_user: blah_user
    database_password: blah_pass 
```

并在 config.yml

```
doctrine:
    dbal:
        driver:   "%database_driver%"
        host:     "%database_host%"
        dbname:   "%database_name%"
        user:     "%database_user%"
        password: "%database_password%" 
```

但是现在我失去了我需要的多个数据库以及从 dev 到 stage 到 prod 数据库服务器的切换能力。

我必须缺少一些正在解决此问题的其他文档，任何帮助都会很棒。

我已经看到了 Multiple Database connections with Doctrine 的文档

*   [http://symfony.com/doc/current/cookbook/doctrine/multiple_entity_managers.html](http://symfony.com/doc/current/cookbook/doctrine/multiple_entity_managers.html)

但我想避免为每个开发、阶段和产品服务器添加三个数据库选项，如下所示`parameters.yml`

```
parameters:
    database_driver: pdo_pgsql
    database_host: blah_dev
    database_port: 5432
    database_name: blah
    database_user: blah_user
    database_password: blah_pass
    #database_driver2: pdo_pgsql
    database_host2: blah_stage
    #database_port2: 5432
    #database_name2: blah
    #database_user2: blah_user
    #database_password2: blah_pass
    #database_driver3: pdo_pgsql
    database_host3: blah_prod
    #database_port3: 5432
    #database_name3: blah
    #database_user3: blah_user
    #database_password3: blah_pass 
```

（也许只是配置不同的主机？）

这看起来很难看，而且是 PITA，这仅适用于 blah 数据库，我必须为 foo 和我需要配置的任何其他数据库执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-03-16T18:38:30.013

如果你的连接在每个环境中都是相同的，只是配置值不同，你应该使用参数配置文件。在 parameters.yml.dist 文件中定义您需要的环境变量，如下所示：

```
# parameters.yml.dist
parameters:
    database_host_1: blah
    database_host_2: blub
    ... 
```

您的 config.ml 可能如下所示：

```
# config.yml
imports:
    - { resource: parameters.yml }
...
doctrine:
    dbal:
  default_connection: blah
  connections:
    blah:
      driver:   pdo_pgsql
      port:     5432
      host:     "%database_host_1%"
      dbname:   blah
      user:     blah_user
      password: blah_pass
      charset:  UTF8
    foo:
      driver:   pdo_pgsql
      port:     5432
      host:     "%database_host_2%"
      dbname:   foo
      user:     foo_user
      password: foo_pass
      charset:  UTF8 
```

例如，如果您的 parameters.yml 丢失，您将在下次调用*composer update*时要求您提供数据库主机名。

如果您想将所有配置保存在单独的文件中，您应该在 config_XXX.yml 文件的开头添加以下内容：

```
# config_XXX.yml
imports:
    - { resource: config.yml }
    - { resource: parameters_XXX.yml } 
```

将 XXX 替换为您的环境。为每个环境创建一个 parameters_XXX.yml 并在其中为您的主机设置配置参数，就像在默认 parameters.yml 文件中一样。

```
# parameters_XXX.yml
parameters:
    database_host_1: blahInXXXEnv
    database_host_2: blubInXXXEnv
    ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T14:58:37.507

我认为没有理由使用不同的 prod 和 dev 参数配置文件。您可以使用特定的`parameters.yml.dist`

*   [http://symfony.com/doc/master/cookbook/workflow/new_project_git.html](http://symfony.com/doc/master/cookbook/workflow/new_project_git.html)

在您的 PC 上使用所有已定义的连接文件。

多个连接并与它们一起工作：

*   [http://symfony.com/doc/master/reference/configuration/doctrine.html](http://symfony.com/doc/master/reference/configuration/doctrine.html)
*   [http://symfony.com/doc/current/cookbook/doctrine/multiple_entity_managers.html](http://symfony.com/doc/current/cookbook/doctrine/multiple_entity_managers.html)

# winapi - SPTI“模式选择”在 Win 7 64 位中意外失败

> ID：13647247
> 
> 赞同：1
> 
> 时间：2012-11-30T14:35:31.890
> 
> 标签：winapi, windows-7, scsi

我正在转换一些旧代码以与自定义 SCSI 设备通信。原始代码是为 WinXP 和 ASPI 编写的，而较新的代码需要在 Win7 和 SPTI 上工作。我的问题是，较新的代码在调用 SCSI“模式选择”操作时失败，状态代码为 2，这是一个 SCSI“检查条件”错误 - 但 WinXP 下的旧代码不会发生这种情况。

通常，当您获得“检查条件”代码时，您可以向设备发出“请求感知”命令以查明发生了什么。不幸的是，这个设备（在我看来）是有问题的，当你执行请求感知时总是返回“一切正常”。所以我在这里在黑暗中工作。

因此，我希望对我可能在 SPTI 代码中做错的地方提出一些建议，并感谢任何反馈。

以下是我想到的一些可能会影响这一点的事情：

*   设备期望的顺序是“Reserve Unit”、“Rezero Unit”、“Mode Select”，然后是一些其他操作，然后是“Release Unit”。看起来“保留单元”、“重新归零单元”和“释放单元”都工作正常，但其他操作失败，因为“模式选择”失败。
*   对于每个操作，SPTI 代码打开和关闭 SCSI 主机适配器的句柄。我应该在“保留单元”中打开一个句柄并让它在整个序列中保持打开状态吗？
*   发送到 DeviceIoControl() 的 ioctl 是 IOCTL_SCSI_PASS_THROUGH。我应该使用 IOCTL_SCSI_PASS_THROUGH_DIRECT 进行“模式选择”操作吗？这是一个简单的操作，所以我认为更简单的 API 就足够了，但也许我错了。

有问题的代码是：

```
void MSSModeSelect(const ModeSelectRequestPacket& inRequest, StatusResponsePacket& outResponse) 
{
    IPC_LOG("MSSModeSelect(): PathID=%d, TargetID=%d, LUN=%d", inRequest.m_Device.m_PathId,
        inRequest.m_Device.m_TargetId, inRequest.m_Device.m_Lun);
    int adapterIndex = inRequest.m_Device.m_PathId;
    HANDLE adapterHandle = prvOpenScsiAdapter(inRequest.m_Device.m_PathId);
    if (adapterHandle == INVALID_HANDLE_VALUE)
    {
        outResponse.m_Status = eScsiAdapterErr;
        return;
    }

    SCSI_PASS_THROUGH_WITH_BUFFERS sptwb;
    memset(&sptwb, 0, sizeof(sptwb));

#define MODESELECT_BUF_SIZE 32

    sptwb.spt.Length = sizeof(SCSI_PASS_THROUGH);
    sptwb.spt.PathId = inRequest.m_Device.m_PathId;
    sptwb.spt.TargetId = inRequest.m_Device.m_TargetId;
    sptwb.spt.Lun = inRequest.m_Device.m_Lun;
    sptwb.spt.CdbLength = CDB6GENERIC_LENGTH;
    sptwb.spt.SenseInfoLength = 0;
    sptwb.spt.DataIn = SCSI_IOCTL_DATA_IN;
    sptwb.spt.DataTransferLength = MODESELECT_BUF_SIZE;
    sptwb.spt.TimeOutValue = 2;
    sptwb.spt.DataBufferOffset =
       offsetof(SCSI_PASS_THROUGH_WITH_BUFFERS,ucDataBuf);

    sptwb.spt.Cdb[0] = SCSIOP_MODE_SELECT;
    sptwb.spt.Cdb[4] = MODESELECT_BUF_SIZE;

    DWORD length = offsetof(SCSI_PASS_THROUGH_WITH_BUFFERS,ucDataBuf) +
                        sptwb.spt.DataTransferLength;
    memset(sptwb.ucDataBuf, 0, sizeof(sptwb.ucDataBuf));
    sptwb.ucDataBuf[2] = 0x10;
    sptwb.ucDataBuf[4] = 0x01;
    sptwb.ucDataBuf[5] = 0x04;

    ULONG bytesReturned = 0;
    BOOL okay = DeviceIoControl(adapterHandle,
                             IOCTL_SCSI_PASS_THROUGH,
                             &sptwb,
                             sizeof(SCSI_PASS_THROUGH),
                             &sptwb,
                             length,
                             &bytesReturned,
                             FALSE);
    DWORD gle = GetLastError();
    IPC_LOG("  DeviceIoControl() %s", okay ? "worked" : "failed");
    if (okay)
    {
        outResponse.m_Status = (sptwb.spt.ScsiStatus == 0) ? eOk : ePrinterStatusErr;
    }
    else
    {
        outResponse.m_Status = eScsiPermissionsErr;
    }

    CloseHandle(adapterHandle);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T17:57:00.667

该解决方案被证明有两个部分。

首先，sptwb.spt.DataIn 需要是 SCSI_IOCTL_DATA_OUT 而不是 SCSI_IOCTL_DATA_IN - 因为，当然，“模式选择”是告诉设备做什么，而不是询问它的信息。这将 DeviceIoControl() 的结果从 TRUE 更改为 FALSE，然后 GetLastError() 返回值 87，表示参数无效。

其次，正如我所推测的，ioctl 事务需要使用 IOCTL_SCSI_PASS_THROUGH_DIRECT 而不是 IOCTL_SCSI_PASS_THROUGH 来完成。

一旦通过这两个更改正确设置了所有内容，“模式选择”命令就成功了。

# c# - 将 xml 查询结果分配给变量

> ID：13647255
> 
> 赞同：1
> 
> 时间：2012-11-30T14:36:03.183
> 
> 标签：c#, xml, linq, variables

我的 xml 看起来像这样：

```
<x>
  <y a1= "abc" a2= "xyz" a3="2" a4="4" a5="8"/>
  <y a1= "def" a2= "hij" a3="5" a4="10" a5="15"/>
</x> 
```

以下代码过滤我的 xml 的值并将结果打印到屏幕：

```
 static void Main(string[] args)
            {
                int first;
                int second;
                int third;
                XDocument doc = XDocument.Load(xmlFile);
                IEnumerable<XElement> rows = from row in doc.Descendants("x")
                                             where row.Attribute("a1").ToString() == "abc" & row.Attribute("a2").ToString() == "xyz"
                                             select row;
                foreach (XElement ele in rows)
                {
                    IEnumerable<XAttribute> aList = from att in ele.DescendantsAndSelf().Attributes()
                                                    select att;
                    foreach (XAttribute xatr in atrList)
                    {
                        Console.WriteLine(att);
                    }
                }
            }
        }
    } 
```

我不想将结果显示到屏幕上，而是将过滤行的值 a3、a4 和 a5 分配给变量 first、second 和 third。我还想用新值覆盖 a3、a4 和 a5 的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T14:44:41.807

```
static void Main(string[] args)
        {
            XDocument doc = XDocument.Load(xmlFile);
            IEnumerable<XElement> rows = from row in doc.Descendants("x")
                                         where row.Attribute("a1").ToString() == "abc" & row.Attribute("a2").ToString() == "xyz"
                                         select row;

            int first;
            int second;
            int third;

            foreach (XElement ele in rows)
            {
                Int32.TryParse(ele.Attribute("a3").Value, out first);
                Int32.TryParse(ele.Attribute("a4").Value, out second);
                Int32.TryParse(ele.Attribute("a5").Value, out third);

                Console.WriteLine(string.Format("{0} {1} {2}", first, second, third);
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T14:38:17.957

您可以根据索引将它们设置为过滤后的行。将您的内部 foeach() 循环替换为：

```
IEnumerable<XAttribute> aList = (from att in ele.DescendantsAndSelf().Attributes()
                                                    select att).ToList();
first = atrList[2];
second = atrList[3];
third = atrList[4]; 
```

# linux - ftp把本地文件锁

> ID：13647257
> 
> 赞同：1
> 
> 时间：2012-11-30T14:36:06.367
> 
> 标签：linux, ftp

谁能告诉我Linux上的标准ftp put实现是否在读取本地文件时对其进行了锁定？（我意识到这应该是一个相对简单的测试，但我没有可用的盒子。）

（就上下文而言，我们有一个定期替换的文件，但每隔一段时间就会被某人锁定。我将其追溯到特定的用户/机器，而 ftp put 脚本是我看到的唯一可能需要的东西一把锁。）

欣赏它！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T14:39:36.230

-rw-r--r--。1 ftpuser ftpuser 12031 11 月 30 日 17:50 index.php

可能这就是你要找的东西，我使用我的 ftp 客户端将一个文件传输到我的服务器，但没有做任何事情，我正在运行 vsftpd。

# android - 可以在android中使用自定义地图（例如商场、办公室的楼层地图）编写自定义地图视图吗

> ID：13647259
> 
> 赞同：-1
> 
> 时间：2012-11-30T14:36:16.657
> 
> 标签：android

> **可能重复：**
> [如何为 Android 构建商场地图](https://stackoverflow.com/questions/12358715/how-to-build-a-mall-map-for-android)

可以在 android 中使用自定义地图（例如商场、办公室的楼层地图）编写自定义地图视图吗？

我们该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T15:01:48.070

您无法使用 Android 提供的标准工具集（MapView 和整个 Google Maps 包）来执行此操作。

有一些商业第三方解决方案。谷歌用于室内定位或室内导航。

作为替代方案，您可以调整迄今为止开发的开源地图查看器和导航系统之一。看看openstreetmap，例如：

[http://wiki.openstreetmap.org/wiki/Main_Page](http://wiki.openstreetmap.org/wiki/Main_Page)

[http://wiki.openstreetmap.org/wiki/Software/Mobile](http://wiki.openstreetmap.org/wiki/Software/Mobile)

# mysql - 通过模型设计避免条件连接

> ID：13647265
> 
> 赞同：0
> 
> 时间：2012-11-30T14:36:33.997
> 
> 标签：mysql, sql, database

我正在设计我的数据库，并试图找出避免将来出现条件连接的最佳方法。我已经阅读了显示条件连接的文章，如果可能的话，这绝对是我想要避免的事情。

我有一张`CHECK`表，`CHECK`将存储一些数据（金额、日期等）。我还有 3 个“其他”表，`VENDOR`, `VENDOR_DEPT`，`VENDOR_ACCOUNT`其中`VENDOR_ACCOUNT`有一个 fk to `VENDOR_DEPT`，并且`VENDOR_DEPT`有一个 fk to `VENDOR`。

我的问题是：我如何设计我的模型，以便 CHECK 可以分配给`VENDOR`，`VENDOR_DEPT`或者`VENDOR_ACCOUNT`没有`vend_id`，`vendacct_id`并且`venddept_id`在我的`CHECK`表中或者有一个包含列的 VENDOR_CHECK 表，，，`check_id`.... `vendor_level`（`join_id`希望你明白）

有没有更清洁的方法？顺便说一句，我正在使用 MYSQL，但我希望该解决方案也可以在其他平台上工作。

由于我处于模型设计阶段，因此我愿意接受所有建议，当然包括重新设计这些表格 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T15:01:51.993

您正在尝试在 SQL 中实现“一对一”关系。这种类型的关系可能有点挑战性。我想解决它的“关系”方式是说你真的有一个CHECK_ENTITY，这个实体可以是这三种类型之一。然而，这似乎是不必要的麻烦。

一种建议是在表中包含三个不同的列。我的猜测是，您经常希望将 vend_id 用于报告目的。只需为给定的 CHECK 填充适当的值。

是的，您的数据随后会被非规范化，因为 vend_id 将同时位于 CHECK 表和 VEND_ACCT 表中。如果账户和部门发生变化，那么这将捕获 CHECK 时的关系，这可能是您想要的。

另一种选择是拥有一个虚拟帐户，意思是“整个供应商”。然后只使用这个值来表示整个供应商。同样，您需要每个部门的帐户。

这种方法需要一些纪律。建立一个供应商层次结构是很诱人的，它具有任何可能的深度，并带有一个返回父级的链接（帐户 --> 部门 --> 供应商，那么为什么不概括它呢？）。SQL 在层次查询中甚至比在一种关系中更糟糕。“更糟”是指处理此类查询的方法非常依赖于数据库。

# java - 如何将 bean 从外部库共享到 GWT 客户端？

> ID：13647270
> 
> 赞同：3
> 
> 时间：2012-11-30T14:37:00.223
> 
> 标签：java, gwt, javabeans

我有一个关于将库中的 java bean 共享给 gwt 客户端的问题我知道 GWT 客户端和服务器之间的 bean 共享通常放入包 domain.shared 中。

但是，如何在 GWT 客户端上使用外部 jar 库中的现有 bean？

因为我总是收到这个消息。xxxx.xxxx.bean 类型没有可用的源代码您是否忘记继承所需的模块？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T20:12:45.107

鉴于您的 bean 在 package`xxx.xxx.bean`中，并且它们在导入的`my_beans.jar`库中。

在应用程序`src`树中创建一个文件夹（或者`src/main/java`如果您使用的是 maven），其名称为`xxx/xxx`

在此文件夹中创建一个新的模块文件，`MyBeans.gwt.xml`并使用以下内容调用：

```
<module>
  <inherits name='com.google.gwt.user.User'/>
  <source path="bean"/>
</module> 
```

编辑您的`Application.gwt.xml`并添加此行

```
<inherits name="xxx.xxx.MyBeans"/> 
```

请注意，`xxx.xxx.bean`包中的所有类都必须使用 GWT 支持的类。

您还应该检查该`my_beans.jar`库是否包含您要使用的 bean 的 java 源文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T17:00:03.717

1）您只能包含来自外部 jar 库的 bean，前提是它与 GWT 兼容并声明一个`<ThirdPartyModuleName>.gwt.xml`包含您需要使用的 bean 的包的文件。

2）您应该将其`<ThirdPartyModuleName>`包含在您自己的`<Module>.gwt.xml`using`<inherits>`标签中。

# build - Tycho 在每次构建时下载 p2.indexes

> ID：13647273
> 
> 赞同：10
> 
> 时间：2012-11-30T14:37:15.073
> 
> 标签：build, tycho, p2

我正在使用 Maven & Tycho 构建 RCP 和其他几个插件。这很好用，除非有一个问题：

在每次（！）构建时，Tycho 都会加载~~所有需要的 eclipse 库，即使 10 秒前已经下载了。它们不是自动保存在本地存储库中，还是我缺少一些配置？~~所有`p2.index`es。但这也很烦人。我可以把它关掉，让它每周只检查一次吗？

```
 <properties>
    <tycho-version>0.15.0</tycho-version>
  </properties>

  <repositories>
   <repository>
      <id>eclipse-indigo</id>
      <layout>p2</layout>
      <url>http://download.eclipse.org/releases/indigo</url>
   </repository>
  </repositories>

  <build>
    <plugins>
      <plugin>
        <groupId>org.eclipse.tycho</groupId>
        <artifactId>tycho-maven-plugin</artifactId>
        <version>${tycho-version}</version>
        <extensions>true</extensions>
      </plugin>
    </plugins>
  </build> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T10:00:35.930

p2 工件以及 content.jar 和 artifacts.jar 等元数据文件被缓存。p2 将仅在每个构建（使用 HTTP HEAD）上进行时间戳比较检查，以检查本地缓存是否已过时。

如果要避免这种情况，请使用 maven 离线模式（CLI 选项 --offline）

# osx-mountain-lion - Postgres 不能用作 Induction 上的适配器

> ID：13647276
> 
> 赞同：1
> 
> 时间：2012-11-30T14:37:26.387
> 
> 标签：osx-mountain-lion, induction, postgres.app

我正在使用 Postgres.app 和最新版本的 Induction（版本 0.1.0 (28)），我不能选择“Postgres”作为适配器。我只有 mongodb、redis 和 sqlite 的选项。如果我尝试手动输入它（即“postgres://locahost”），一旦我单击另一个表单输入，它就会自动恢复为“（null）”。

是否需要在某个地方指定我在本地使用 Postgres（特别是将 PATH 设置为应用程序中的 Postgres.app 位置）？

我正在使用 Mac OS X 10.8.2、Postgres 9.1.4、Postgres.app 1.0 (11) 和 Induction 0.1.0 (28)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-24T20:36:47.977

我有针对 Homebrew 安装的 PostgreSQL 9.3 的 Induction。

它看到如果您没有设置数据库，那么 postgres 不会出现在适配器列表中，但是当我在设置 PostgreSQL 后回到它，为其创建数据库和用户时，'postgres' 可用在适配器中。

连接如下（无论如何，一种方式）

将适配器设置为 postgres，但不是填写字段，而是单击顶部字段并输入字符串：

postgres://user_name:user_pass@127.0.0.1/database_name

127.0.0.1 表示您将通过 tcp/ip 进行连接，并且需要（例如，如果运行 Rails）host: localhost 在您正在开发的 database.yaml 文件中

# java - hadoop中明显的内存泄漏

> ID：13647277
> 
> 赞同：1
> 
> 时间：2012-11-30T14:37:31.737
> 
> 标签：java, memory-leaks, hadoop

我正在运行的 hadoop 程序中有明显的内存泄漏。具体来说，我收到消息：ERROR GC overhead limit exceeded 随后是异常

```
attempt_201210041336_0765_m_0000000_1: Exception in thread "Tread for syncLogs" java.lang.OutOfMemoryError: GC overhead limit exceeded
attempt_201210041336_0765_m_0000000_1: at java.util.Vector.elements (Vector.java:292)
attempt_201210041336_0765_m_0000000_1: at org.apache.log4j.helpers.AppenderAtachableImpl.getAllAppenders(AppenderAttachableImpl.java:84
attempt_201210041336_0765_m_0000000_1: at org.apache.log4j.Category.getAllAppenders (Category.java:415)
attempt_201210041336_0765_m_0000000_1: at org.apache.hadoop.mapred.TaskLog.syncLogs(TaskLog.java:256)
attempt_201210041336_0765_m_0000000_1: at org.apache.hadoop.mapred.Child$3.run(Child.java:157) 
```

我在初始试验中运行的数据集应该非常小，所以我不应该达到任何内存限制。更重要的是，我不想更改 hadoop 配置；如果程序不能以当前配置运行，则程序需要重写。

谁能帮我弄清楚如何诊断这个问题？是否有命令行参数来获取内存使用的堆栈跟踪？跟踪此问题的任何其他方式？

附言。我手动编写了错误消息，无法从有问题的系统复制粘贴。所以请忽略任何错字，因为这是我的愚蠢错误。

编辑：更新到这个。我又跑了几次；虽然我总是得到错误 GC 开销限制超出消息，但我并不总是得到 log4j 的堆栈跟踪。所以问题可能不是 log4j，而是 log4j 碰巧失败，原因是……其他原因导致的内存不足？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T09:59:56.750

“超出 GC 开销限制”可能意味着正在创建许多短期对象，超过 GC 可以处理的数量，而不会消耗超过 98% 的总时间。请参阅[此问题](https://stackoverflow.com/questions/7498121/how-to-see-what-objects-have-been-garbage-collected-in-java)，了解如何使用[JProfiler](http://www.ej-technologies.com/products/jprofiler/overview.html)找到有问题的类和分配点。

免责声明：我公司开发 JProfiler。

# list - Nhibernate, Criteria List 作为搜索参数

> ID：13647281
> 
> 赞同：1
> 
> 时间：2012-11-30T14:37:55.030
> 
> 标签：list, nhibernate, hibernate-criteria, ilist

基本上我想做的是找回一名军官。我调用这个方法并传递一个官员 ID 的 IList。我想做的是使用该 Ilist ，其中将包含许多唯一 ID。将每个 id 的一条记录拉入 IList 中，我返回并与之一起做事。

我的问题是我一生都无法弄清楚如何正确地获得限制。所以说列表中有 3 、 6 、 9 和 12 ，它会得到所有这些记录。

```
 public IList<Officer> GetOfficer(IList<int> OfficerId)
    {
        return session.CreateCriteria<Officer>()
                .Add(Restrictions.Eq("OfficerId", OfficerId))
                .SetCacheable(true)
                .List<Officer>();
    } 
```

任何帮助将不胜感激谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T15:12:56.230

解决方案应该在`InExpression`：

```
public IList<Officer> GetOfficer(IList<int> OfficerId)
{
  return session.CreateCriteria<Officer>()
    .Add(new NHibernate.Criterion.InExpression("OfficerId"
               , OfficerId.Cast<object>().ToArray()))
    .SetCacheable(true)
    .List<Officer>();
} 
```

# asp.net - 从网格视图的第一列中删除行单击事件

> ID：13647291
> 
> 赞同：-1
> 
> 时间：2012-11-30T14:38:22.530
> 
> 标签：asp.net, vb.net, gridview

我创建了一个网格视图。然后我绑定了行点击事件，该事件应用于其所有行。

以下是代码：-

```
Protected Sub DG1_RowDataBound(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.GridViewRowEventArgs) Handles DG1.RowDataBound                                                                               
    e.Row.Attributes.Add("onmouseover", "this.style.cursor='pointer';")
    e.Row.Attributes.Add("onClick", "javascript:Call_Ajax('" & e.Row.DataItem("id") & "');")
End Sub 
```

但我想从第一列（编辑列）中删除行点击事件。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T17:32:55.090

在数据绑定事件上，您可以删除 onclick 属性。

```
Private Sub DG1_DataBound(sender As Object, e As EventArgs) Handles DG1.DataBound
    dg1.Rows(0).Attributes.Remove("onclick")
End Sub 
```

# php - 使用 GoogleAPI 返回 2 个不同查询的搜索结果数。(PHP)

> ID：13647295
> 
> 赞同：3
> 
> 时间：2012-11-30T14:38:35.590
> 
> 标签：php, google-api

我正在为我的荣誉项目做一个小实验。我想要实现的是根据 2 个 Google 搜索查询计算返回的结果数量之间的相似性。当我有 2 个结果时，我希望将一个除以另一个以返回某种“比率”。

现在，使用 API 返回一个结果很容易，我一直在使用以下代码：

```
$query="CinammonRolls";
$url = "http://ajax.googleapis.com/ajax/services/search/web?v=1.0&q=$query";

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$body = curl_exec($ch);
curl_close($ch);

$json = json_decode($body);

print 'The results for ' . $query . ' are: ' .  $json->responseData->cursor->estimatedResultCount; 
```

那段代码，返回结果很好。但是我对 PHP 比较陌生，所以下面的代码永远不会起作用；但我给了它一个bash。

```
$query="CinammonRolls";
$query2="CinammonRollsChinese";
$url = "http://ajax.googleapis.com/ajax/services/search/web?v=1.0&q=$query";
$url2 = "http://ajax.googleapis.com/ajax/services/search/web?v=1.0&q=$query2";

$ch = curl_init();

$ch2 = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch2, CURLOPT_URL, $url2);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch2, CURLOPT_RETURNTRANSFER, 2);
$body = curl_exec($ch);
$body2 = curl_exec($ch2);
curl_close($ch);
curl_close($ch2);

$json = json_decode($body);
$json2 = json_decode($body2);
print 'The results for ' . $query . ' are: ' .  $json->responseData->cursor->estimatedResultCount;

print 'The results for ' . $query2 . ' are: ' . $json2->responseData->cursor->estimatedResultCount; 
```

那只是返回错误：

```
Notice: Undefined property: stdClass::$estimatedResultCount in C:\Program Files\EasyPHP-5.3.9\www\googleTest.php on line 24 
```

所以我恳请大家，有没有办法解决这个问题？会不会像在单独的函数中计算两个结果一样？我难住了。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T15:06:22.593

通过将查询代码提取到方法或类中来避免代码重复，这会变得更加复杂。请参阅下面的重写：

```
function print_google_query_results($query) {
    $url = "http://ajax.googleapis.com/ajax/services/search/web?v=1.0&q=$query";
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    $body = curl_exec($ch);
    curl_close($ch);
    $json = json_decode($body);
    print 'The results for ' . $query . ' are: ' .  $json->responseData->cursor->estimatedResultCount;
}

$query="CinammonRolls";
$query2="CinammonRollsChinese";

print_google_query_results($query);
print_google_query_results($query2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T14:55:12.520

我想你的意思是：

```
curl_setopt($ch2, CURLOPT_RETURNTRANSFER, 2); 
```

成为：

```
curl_setopt($ch2, CURLOPT_RETURNTRANSFER, 1); 
```

该选项将根据布尔值的第三个参数打开和关闭，因此为 0 或 1。我认为当您复制并粘贴第二个查询的行并将 1 更改为 2 时，您不小心将 1 布尔值更改为 2 （非布尔值）。

**"CinammonRollsChinese" 返回 NO RESULTS 因此没有估计的结果计数。**在对它进行任何操作之前，您需要检查 $json2->responseData->cursor->estimatedResultCount 是否存在，因为并非每个搜索字符串都会产生结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T16:01:15.267

感谢大家的帮助，我真的很感激。它的工作方式与我现在所希望的完全一样（代码也更简洁！）。即使主要问题是我“有哑巴”的原因！感谢您指出这一点，我会一直坚持到午夜。问题是 a) 我的代码很糟糕，可以编译得更好。b) 我没有检查我的第二个查询“CinammonRollsChinese”是否确实返回了任何结果。它没有。

这是最终的工作代码。

```
$query="CinammonRolls";
$query2="DeliciousCake";

print_google_query_results($query);
print '<br>';
print_google_query_results($query2);

function print_google_query_results($query) {
    $url = "http://ajax.googleapis.com/ajax/services/search/web?v=1.0&q=$query";
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    $body = curl_exec($ch);
    curl_close($ch);
    $json = json_decode($body);
    print 'The results for ' . $query . ' are: ' .  $json->responseData->cursor->estimatedResultCount;
} 
```

高超。再次非常感谢大家。

# tfs-migration - 将 TFS 2008 升级到 TFS 2012

> ID：13647298
> 
> 赞同：6
> 
> 时间：2012-11-30T14:38:42.310
> 
> 标签：tfs-migration

我目前正在进行 TFS 2008 到 2012 的升级。这是我的情况：我当前的 TFS 2008 机器是带有 SQL Server 2005 后端的 Server 2K3。我不完全确定我的升级路径是什么，但我认为以下两种情况最有可能：

*   将数据库从 SQL 2005 迁移到 SQL 2012，然后将 TFS 2008 指向新的 SQL Server。从那里我可以将 TFS 2008 升级到 2012。
*   启动一个新的 Server 2008R2 机器并使用 SQL Server 2012 后端进行 TFS 2012 的全新安装。

网络人员真的希望我执行选项 2，因为他们想要停用 Server 2003 机器，但我担心的是如何将 TFS 2008 中的所有数据转移到 TFS 2012 实例？我查看了 MSDN 和 Google，但没有遇到任何解释如何进行这种升级的文档。

此外，还有什么我应该注意的陷阱吗？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T18:14:52.667

Microsoft 文档并没有非常清楚地说明这一点，因此对于将来处于类似情况的任何人来说，[这](http://blog.damianbrady.com.au/2012/06/03/upgrading-tfs2010-tfs2012-rc-done/)是一个很好的小方法。某些屏幕与您实际看到的有所不同，但大部分都在现场。

几点

*   如果您将数据和应用程序层分布在多个服务器上，请确保您为“报告阅读者帐户”指定的用户帐户可以访问这两个服务器并具有“本地登录”权限。
*   陷阱：配置 TFS 2012 后，当 VS2012 尝试连接到导入的项目集合时，我收到了一个奇怪的 URL 异常，但在尝试连接到从 2012 年创建的项目集合时却没有。服务器反弹纠正了这个问题。

所有的过程都非常简单，TFS2012 很快就站起来了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T19:17:00.897

MSDN 上有很棒的文档：http: [//msdn.microsoft.com/en-us/library/ms404860 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ms404860(v=vs.100).aspx)

# c++ - 在类头 C++ 中声明类对象

> ID：13647299
> 
> 赞同：2
> 
> 时间：2012-11-30T14:38:43.230
> 
> 标签：c++, class, object, declare

我试图在头文件中声明一个类对象，但我无法让它工作。我目前有 2 个头文件和 2 个 cpp 文件来定义每个函数的作用。这些类称为 Heltal 和 Array，它们都在自己的头文件中（heltal.h 和 array.h）。

我试图在 Array 类的私有部分中声明 Heltal 类对象，但无论我做什么我都找不到声明它的方法。我尝试将 heltal.h 标头包含到 array.h 标头中，但随后它开始抱怨被重新定义。

然而，在 array.cpp 中声明它工作得很好，但我想在标题中定义它。

以下是文件目前的样子：

heltal.h

```
class Heltal {
    public:
        Heltal();
        Heltal(int tal);
        ~Heltal();

        void set(int tal);
        bool operator < (const Heltal &heltal) const
        {
            return (heltal < heltal.heltal);
        }
        bool operator > (const Heltal &heltal) const
        {
            return (heltal > heltal.heltal);
        }
    private:
        int heltal;
}; 
```

数组.h

```
#include <vector>
class Array {
public:
    Array();
    Array(int in);
    ~Array();
    int Random(int min, int max);
private:
    Heltal h;
    int size;
}; 
```

两个头文件都包含在 main.cpp 中

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T14:42:12.957

`Heltal.h`当您包括在内时，您开始沿着正确的道路前进`Array.h`。

将[*包含保护*](http://en.wikipedia.org/wiki/Include_guard)添加到您的标题中，这将帮助您避免重复包含：

```
#ifndef HELTAL_H
#define HELTAL_H

class Heltal {
    ...
};

#endif 
```

现在您可以安全地包含`Heltal.h`在顶部`Array.h`，您的问题将得到解决。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T14:44:45.860

编译 ac/cpp 文件时，包含的文件将首先在 c/cpp 文件中展开。并且某些课程的顺序应该正确。例如，Heltal 必须在 Array 之前，因此您的包含顺序应确保这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T14:42:23.830

您确实需要在 array.h 中包含 heltal.h，但两个文件都需要包含保护：

```
#ifndef array_h_guard
#define array_h_guard

// contents of array.h go here

#endif // array_h_guard 
```

heltal.h 也是如此。这将防止多重包含。

请注意，您可以只包含来自 array.h 的 heltal.h，这也解决了当前的问题，但包含防护更安全。

# javascript - 鼠标事件javascript问题

> ID：13647300
> 
> 赞同：0
> 
> 时间：2012-11-30T14:38:55.040
> 
> 标签：javascript, jquery, html, clipboard

我正在研究剪贴板功能...

我正面临鼠标事件问题...在下面的代码中，当我删除`label tag`and 时`style="display:none" class="hide"`，我的剪贴板功能正常工作，但剪贴板功能不工作..

请检查以下代码：我需要进行哪些更改才能使其完美运行？

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Copy to Clipboard with ZeroClipboard, Flash 10 and jQuery</title>
    <link href="_assets/css/Style.css" rel="stylesheet" type="text/css" />

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js" type="text/javascript"></script>

    <script src="_assets/js/ZeroClipboard.js" type="text/javascript"></script>

    <script type="text/javascript">

function myfunc2() {
 var selectedobj=document.getElementById('texter');

  if(selectedobj.className=='hide'){  //check if classname is hide 
    selectedobj.style.display = "block";
    selectedobj.readOnly=true;
    selectedobj.className ='show';
  }else{
    selectedobj.style.display = "none";
    selectedobj.className ='hide';
 }
}

    </script>

<script type="text/javascript">

jQuery(document).ready(function(){

  var clip = new ZeroClipboard.Client();
  clip.setText('');  

   jQuery('#copy-button').click(function(){
  clip.setText(jQuery('#texter').val());
 });
});

        $(document).ready(function () {
            var clip = new ZeroClipboard.Client();

            clip.setText(''); // will be set later on mouseDown

            clip.addEventListener('mouseDown', function (client) {
                // set text to copy here
                clip.setText(jQuery('#texter').val());

                // alert("mouse down"); 
            });

            clip.glue('copy-button');
        });
</script>

</head>
<body>

    <label  onmouseover="myfunc2()">Click here</label> 

<textarea name="texter" id="texter"  style="display:none" class="hide"   readonly>sdfdsfsdfgdfdfg</textarea>
<input type="button" value="Copy to clipboard" id="copy-button" />

</body>
</html> 
```

# javascript - 将参数传递给 onchange 在运行时不使用参数

> ID：13647302
> 
> 赞同：0
> 
> 时间：2012-11-30T14:39:10.647
> 
> 标签：javascript

你好我正在使用函数

```
function prepareRadios(radioGroupName) {
  var radios = document.getElementsByName(radioGroupName);
  for( i = 0; i < radios.length; i++ ) {
    document.getElementById(radios[i].id).onchange = function() {
      radioUpdated(radioGroupName, radios[i].id); 
    };
  }
} 
```

问题是，onchange 事件使用引用 (radioGroupName, radios[i].id) 触发，而不是使用我的函数将这些值放入其中

我需要传递它们的值，而不是变量的名称

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T14:46:07.017

现在是[关闭时间](https://stackoverflow.com/questions/750486/javascript-closure-inside-loops-simple-practical-example):)

```
function prepareRadios(radioGroupName) {
    var radios = document.getElementsByName(radioGroupName);
    for( i = 0; i < radios.length; i++ ) {
        document.getElementById(radios[i].id).onchange = (function(name, id) {
            return function() { radioUpdated(name, id); }
        })(radioGroupName, radios[i].id);
    }
} 
```

# common-lisp - 创建一个在发出信号时调用调试器的条件？

> ID：13647304
> 
> 赞同：3
> 
> 时间：2012-11-30T14:39:13.347
> 
> 标签：common-lisp

我正在尝试做的事情：我想要`simple-error`另一个错误中的功能。我想要这个，原因如下：

*   能够在 的单独子句中处理它`handler-case`。

*   避免一遍又一遍地指定消息字符串...

*   在发生错误时调用调试器。

我有点困惑，默认情况下这不会自然发生，从未对这个问题给予足够的关注，但这显然是它的功能......我能做的是发出错误信号，稍后我可以处理使用`handler-case`or `handler-bind`，但这很糟糕，因为我并不总是记得函数是否抛出，以及当它抛出时，但我忘记处理它，函数只是提前返回，好像什么也没发生一样。但是如果我继续使用`simple-error`，那么我的代码开始看起来像：

```
...
(signal "Container ~S has no key ~S~&" :container foo :key bar)
...
(signal "Container ~S has no key ~S~&" :container foo :key baz)
... 
```

等等，到处都是：/当然我可以专门使用一个变量来保存消息文本，也许还有一个宏可以使它更短，但这并没有真正的帮助，因为它只会隐藏实际的混乱而不是解决问题。

到目前为止我能做的：

```
(define-condition missing-key (condition)
  ((key :initarg :key
        :accessor key-of)
   (container :initarg :container
              :accessor container-of))
  (:documentation
   "An error rised when a KEY is not in the CONTAINER"
   :report
   #'(lambda (condition stream)
       (unless *print-escape*
         (format stream "~&Container ~S has no key ~S"
                 (container-of condition)
                 (key-of condition))))))

(handler-bind
    ((missing-key
      #'(lambda (condition)
          (invoke-debugger condition))))
  (signal 'missing-key :key 'foo :container 'bar)) 
```

然而，发生的事情是报告函数永远不会被调用......当错误发出信号时，它会打印一条通用消息`Condition MISSING-KEY was signalled.`

编辑：

感谢 sds 的回答，这就是我现在所拥有的：

```
(define-condition missing-key (error)
  ((key :initarg :key
        :accessor key-of)
   (container :initarg :container
              :accessor container-of))
  (:documentation
   "An error rised when a KEY is not in the CONTAINER")
  (:report
   (lambda (condition stream)
     (format stream "Container ~S has no key ~S"
             (container-of condition)
             (key-of condition)))))

(defmacro signal-missing-key (container key)
  `(let ((*break-on-signals*
          (cond
            ((null *break-on-signals*) 'missing-key)
            ((consp *break-on-signals*)
             (list 'or 'missing-key (cdr *break-on-signals*)))
            (t (list 'or *break-on-signals* 'missing-key)))))
     (signal 'missing-key :key ,container :container ,key))) 
```

我可能可以通过将更多参数传递给它来使其更通用`signal`，但这正是我最初想做的事情，所以，除非有更好的方法来做同样的事情，否则我可能会使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T21:05:08.210

您的代码通过以下修改按预期工作：删除`#'`之前`lambda`，删除`~&`（`format`错误报告会这样做等等），关闭`:documentation`子句并打开`:report`子句：

```
(define-condition missing-key (condition)
  ((key :initarg :key
        :accessor key-of)
   (container :initarg :container
              :accessor container-of))
  (:documentation
   "An error rised when a KEY is not in the CONTAINER")
  (:report
   (lambda (condition stream)
       (unless *print-escape*
         (format stream "Container ~S has no key ~S"
                 (container-of condition)
                 (key-of condition))))))
MISSING-KEY
(signal 'missing-key :key 'foo :container 'bar)
==> NIL
(handler-bind
    ((missing-key
      #'(lambda (condition)
          (invoke-debugger condition))))
  (signal 'missing-key :key 'foo :container 'bar))

*** - Container BAR has no key FOO
The following restarts are available:
ABORT          :R1      Abort main loop
Break 1 [46]> 
```

即，除了调用调试器`signal`之外什么都不打印。`handler`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T02:37:09.797

如果您希望调用调试器，除非条件以其他方式处理，否则您可以使用[`error`](http://www.lispworks.com/documentation/HyperSpec/Body/f_error.htm)或与您自己的条件类型一起使用。[`cerror`](http://www.lispworks.com/documentation/HyperSpec/Body/f_cerror.htm)这也适用于不是[`simple-error`](http://www.lispworks.com/documentation/HyperSpec/Body/e_smp_er.htm).

如果您也想要这种行为[`signal`](http://www.lispworks.com/documentation/HyperSpec/Body/f_signal.htm#signal)，您可以将变量设置[`*break-on-signals*`](http://clhs.lisp.se/Body/v_break_.htm)为相应的类型。例如，您可以将其设置为`t`以便为*每个*未处理的条件调用调试器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T19:41:11.037

使您的条件成为`ERROR`而不是的子类`CONDITION`。并非所有条件都是需要通过调试器进行干预的错误，并且条件类层次结构旨在区分它们。

# html - 如何在 HTML 中锚定音频或视频？

> ID：13647306
> 
> 赞同：1
> 
> 时间：2012-11-30T14:39:14.310
> 
> 标签：html

我只是一个初学者..如何使用锚标签播放视频或音频？我用*标签 n 它正常播放...我使用了*它播放了...但是当我锚定它时：**

 **```
<html>
<a href ="D:\Owl City\Owl City - All Things Bright and Beautiful [iTumrd Bonus Track Version]-AAC-(2011)\13 Alligator Sky (No Rap Version).m4a"> Click here! </a>
</html> 
```

它启动了 WMP 或 VLC... 是否可以在不启动其他应用程序的情况下播放它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T14:49:25.560

您可以使用 HTML5 标签，例如[video](http://www.w3schools.com/html/html5_video.asp)或[audio](http://www.w3schools.com/html/html5_audio.asp)。定制相当容易。请参阅[此示例](http://www.w3schools.com/html/tryit.asp?filename=tryhtml5_video_js_prop)。

请注意，旧浏览器不支持 HTML5，并且您需要为几个浏览器提供不同版本的文件。这一切都在链接的网站上进行了解释。

您现在正在做的是使用 a 标签来链接文件。这不会将内容嵌入您的网站，但会在您的计算机上打开一个播放器。**

# jquery - 暂停视频、显示链接、播放另一个（部分）视频

> ID：13647307
> 
> 赞同：0
> 
> 时间：2012-11-30T14:39:18.207
> 
> 标签：jquery, html, video, interactive, popcornjs

我想制作一部电影，游客可以通过做出决定来改变历史。我计划播放一个序列，而不是使用 CUE 暂停或停止视频（如果可能）并提供两种或三种可能性（例如 - 向右还是向左？）。假设我们选择“向右”。现在我需要播放显示答案“向右走”的相应视频的视频，依此类推。最后，访问者将拥有自己的历史……到目前为止的想法……

我怎样才能做到这一点？我从 popcorn.js 查看了文档，但我不确定它是否是我需要的。

有人有想法或例子吗？

甚至可能吗？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T19:08:32.037

很有可能。您需要做两件事 1/ 控制按钮显示的代码 2/ 重定向播放头的代码

对于 1，最简单的做法是添加一个基于 timeupdated 事件的事件监听器，该事件触发您用于显示按钮的代码（并可能阻止视频走得太远）。这将查找一个表格，其中列出了基于视频 currentTime 属性在特定时间应该发生的事情（例如，从 00:50 到 00:55 显示按钮“向左”和“向右”。在 00:55 暂停）

对于 2，该按钮只需要暂停视频，调整 currentTime 然后播放

# javascript - 如何使 RaphaelJS 图形与流体布局一起使用

> ID：13647311
> 
> 赞同：2
> 
> 时间：2012-11-30T14:39:37.557
> 
> 标签：javascript, svg, raphael, fluid-layout, vml

由于 IE8，我使用 RaphaelJS 生成将`SVG`在所有现代浏览器（例如 Chrome、FireFox、Safari、IE9+）中但将`VML`在 IE8 中的图形。

此图嵌入在 a`<div>`中，它是使用流畅布局的页面的一部分。使用 pure `SVG`，我可以使用 和 之类的属性`viewBox`使其`preserveAspectRatio`工作，也就是说，图形（以及其中的元素）随着浏览器窗口大小的调整而上下缩放。

但它是如何处理这个`VML`案子的呢？我是否需要在窗口调整大小事件时重新绘制整个图表来自己滚动？RaphaelJS 有什么方法可以简化这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T13:02:45.017

对于所有好的浏览器，您可以以百分比设置宽度/高度，这将使图像自动“流动”（它将使用 DIV 容器调整大小），对于 IE7-8，您应该使用`paper.setViewBox()`手动调整大小的自定义功能：

```
 if($.browser.msie && $.browser.version < 9){
       R = Raphael('divID', 640, 480);
       $(window).on('resize', yourCustomfluidResizeFunction);
  }else{
       R = Raphael('divID', '100%', '100%');
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T15:16:31.367

[Paper.setViewBox](http://raphaeljs.com/reference.html#Paper.setViewBox)应该为 VML 和 SVG AFAIK 处理这个问题。

也就是说，我不确定 VML 处理流体布局的能力如何。

# c++ - 结构上的 std::replace_if

> ID：13647312
> 
> 赞同：2
> 
> 时间：2012-11-30T14:39:39.300
> 
> 标签：c++, structure, std

如果满足条件，我想要做的只是替换结构向量上的一个结构字段。所以这是我的代码：

```
struct DataST{
    int S_num,Charge,Duplicate_Nu;
    float PEP;
    string PEPTIDE;
    vector<MZIntensityPair> pairs;
    bool GetByT(const DataST& r,int T)
    {
      switch (T)
      {
          case 1:
            return (S_num == r.S_num);
          case 2:
            return (Charge == r.Charge);
          case 3:
            return !(PEPTIDE.compare(r.PEPTIDE));
          case 4:
            return (Duplicate_Nu == r.Duplicate_Nu);
          case 5:
            return ((S_num == r.S_num)&&(Charge == r.Charge));
          default:
            return false;
      }
    }
  };
int main()
{
 .
 .
 vector<DataST> spectrums;
 .
 .
 DataST tempDT_dup;
 tempDT_dup.PEPTIDE="Test";
 replace_if(spectrums.begin(), spectrums.end(), boost::bind(&DataST::GetByT, _1,tempDT_dup,3),11);
 .
 .
} 
```

所以在这个例子中，如果该项目的 PEPTIDE 字段等于“test”，我想用 11 更改所有 Duplicate_Nu 光谱项目，但是当我想使用函数 GetByT 而不是操作“=”时出现以下错误

> */usr/include/c++/4.6/bits/stl_algo.h:4985:4: 错误：'_ first*中的 'operator=' 不匹配。_gnu_cxx::__normal_iterator<_Iterator, _Container>::operator* with _Iterator = DataST*, _Container = std::vector, __gnu_cxx::__normal_iterator<_Iterator, _Container>::reference = DataST& = __new_value' /usr/include/c++/ 4.6/bits/stl_algo.h:4985:4: 注意: 候选是: hello_pwiz/hello_pwiz.cpp:14:8: 注意: DataST& DataST::operator=(const DataST&) hello_pwiz/hello_pwiz.cpp:14:8: 注意: 没有已知的参数 1 从 'int DataST::* const' 到 'const DataST&' 的转换</p>

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T14:45:02.803

到目前为止的问题是您试图通过副本传递不可复制的对象。这是因为您作为参数提供的任何内容都将`boost::bind()`被复制。

```
boost::bind(&DataST::GetByT, _1,tempDT_dup,3),
                                 /|\
                                  |
  This means pass by copy. -------- 
```

如果您不想通过副本传递，您必须做的是通过指针传递（复制指针不会造成任何伤害）。或者，您可以使用[`boost::ref`](http://www.boost.org/doc/libs/release/doc/html/ref.html)通过引用传递，例如：

```
boost::bind(&DataST::GetByT, _1,boost::ref(tempDT_dup),3), 
```

另一个问题是您指定`11`为[`std::replace_if()`](http://en.cppreference.com/w/cpp/algorithm/replace). 它是一个元素应该被替换的值（如果谓词返回`true`）。它应该与存储在数组中的对象具有相同的类型（或可转换为）。但是你不能将`11`（这是一个普通的有符号整数又名`int`）转换为类型的对象`DataST`。你需要这样的东西：

```
vector<DataST> spectrums;
DataST tempDT_dup;
DataST replacee; // What you want to replace with...
replace_if(spectrums.begin(), spectrums.end(),
           bind(&DataST::GetByT, _1, boost::ref(tempDT_dup), 3),
                replacee); 
```

# javascript - 离开网站或关闭浏览器时触发的事件

> ID：13647314
> 
> 赞同：0
> 
> 时间：2012-11-30T14:39:41.793
> 
> 标签：javascript, jquery, javascript-events

当用户通过在浏览器中键入地址并点击返回或用户关闭浏览器单击“x”按钮离开网站时，我正在尝试执行 javascript 函数。

我尝试了卸载事件，但我无法收到警报

这就是我正在做的事情：

```
$(window).unload(function () {
    alert("Are you sure?");
}); 
```

还

```
$(body).unload(function () {
    alert("Are you sure?");
}); 
```

我快没主意了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T14:42:16.153

当页面被卸载时，您可以监听`beforeunload`在 unload 事件之前触发的事件。

```
$(window).on('beforeunload', function(){
    // ...
}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T14:43:05.037

某些浏览器（如 Chrome）会在卸载事件处理程序中阻止警报，以防止此类烦人的消息。尝试使用 console.log 或在其中设置断点以查明当您在那里没有警报时是否触发了处理程序。

类似的问题：

[window.onunload 在 Chrome 浏览器中无法正常工作。谁能帮我？](https://stackoverflow.com/questions/7794301/window-onunload-is-not-working-properly-in-chrome-browser-can-any-one-help-me)

您只能通过[在 beforeunload 处理程序（HT @undefined）中返回一个字符串来](https://stackoverflow.com/questions/6063522/jquery-beforeunload/6065085#6065085)传递警报，但我什至会避免这样做，因为弹出窗口通常很糟糕，而且大多数人会做最少的处理来解决 make-this-thing-在他们真正考虑盒子的内容之前离开选项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T14:50:30.597

您在 window.onbeforeunload 中定义的函数，如果它返回一个字符串，它将弹出一个带有该消息的确认导航提示。

**警报可能会被忽略！**

```
window.onbeforeunload = function() {
    return "All unsaved data will be lost. Are you sure?";
}; 
```

**一些浏览器处理 onbeforeunload 的方式不同。例如，最近的 Firefox 将忽略您的返回字符串并仅显示一条标准消息。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T14:44:58.513

```
$(window).bind('beforeunload', function(){
    alert("Are your sure?")
}); 
```

# c++ - std::bind、this 和 QtConcurrent

> ID：13647319
> 
> 赞同：3
> 
> 时间：2012-11-30T14:39:56.257
> 
> 标签：c++, c++11, qtconcurrent, stdbind

我正在尝试使用`std::bind`绑定`this`到中使用的方法`QtConcurrent::blockingMapped`

标题：

```
class TuringMachine
{
private:
    TRTable table;
    std::set<ConfigNode*> currentConfigs;

    //function object
    std::function<std::set<ConfigNode*>( const TuringMachine*, ConfigNode*)> step_f;
    //method it will hold
    std::set<ConfigNode *> step(TuringMachine* this_m ,ConfigNode *parent);

    std::set<ConfigNode*>& makeStep(); 
```

}

资源：

```
 TuringMachine::TuringMachine(/**/)  
{

    step_f = std::bind(&TuringMachine::step, this, std::placeholders::_1);
}

std::set<ConfigNode*> &TuringMachine::makeStep(){

    auto configSet = QtConcurrent::blockingMapped<QLinkedList<std::set<ConfigNode*>>>(currentConfigs, step_f);//concurrent execution!

   /**/ 
   return currentConfigs;
}
std::set<ConfigNode*> TuringMachine::step(TuringMachine *this_m, ConfigNode * parent){     //the actual step
  /**/
} 
```

`blockingMapped`所以我在这里做的是在每个`ConfigNode`in上同时运行 step `currentConfigs`。我使用`std::bind`绑定`this`到，`step`所以它只需要一个参数，如`blockingMapped`.

我越来越

```
error: no match for call to '(std::_Bind<std::_Mem_fn<std::set<ConfigNode*> (TuringMachine::*)(TuringMachine*, ConfigNode*)>(TuringMachine*, std::_Placeholder<1>)>) (const TuringMachine*, ConfigNode*)'
.../Qt/474/gcc/include/QtCore/qtconcurrentmapkernel.h:121: error: no match for call to '(std::function<std::set<ConfigNode*>(const TuringMachine*, ConfigNode*)>) (ConfigNode* const&)'
.../Qt/474/gcc/include/QtCore/qtconcurrentmapkernel.h:136: error: no match for call to '(std::function<std::set<ConfigNode*>(const TuringMachine*, ConfigNode*)>) (ConfigNode* const&)' 
```

和`note: 2 arguments expected, 1 provided`

我哪里做错了？

**编辑**

更正的工作版本（供将来“参考”）：

标题：

```
 //function object
    std::function<std::set<ConfigNode*>( ConfigNode*)> step_f;
    //method it will hold
    std::set<ConfigNode *> step(ConfigNode *parent); 
```

资源：

```
 TuringMachine::TuringMachine(/**/)  
{
    step_f = std::bind(&TuringMachine::step, this, std::placeholders::_1);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T14:46:41.150

如果要绑定成员函数，则必须传递一个`this`指针，在您的情况下，这意味着您必须传递 2 个`this`指针：

正常调用成员函数：

```
struct bar {
  int a;
  void foo() {
    std::cout << a << std::endl;
  }

  void call_yourself() {
     auto f = std::bind(&bar::foo, this);
     f();
  }
}; 
```

你的情况：

```
 step_f = std::bind(&TuringMachine::step, this, this,std::placeholders::_1); 
```

在不了解您的代码的情况下，我可能会重新设计您的代码，以便您可以避免双`this`指针。

# php - CodeIgniter 表单验证无法正常工作

> ID：13647321
> 
> 赞同：2
> 
> 时间：2012-11-30T14:39:57.473
> 
> 标签：php, codeigniter, validation

我在控制器中设置了一个表单，它从数据库加载表单及其先前填充的内容，并根据需要处理表单。问题是 $this->form_validation->run() 永远不会评估为 FALSE，即使不符合规则。

控制器：

```
public function edit_version($node, $lang)
{
    // load form validation class
    $this->load->library('form_validation');

    // set validation rules
    $this->form_validation->set_rules("title|Title|required");

    // run validation
    if ($this->form_validation->run() !== FALSE)
    {
        // save input to database
        die("validation successful");
    }
    else
    {
        // either validation was not passed or no data to validate
        // load page edition view and display databse contents

        // load page model
        $this->load->model("page_model");

        // get the page from database
        $data["page"] = $this->page_model->get_page($node, $lang);

        // load views
        $this->load->view("admin/header.php", array("title" => "Edit page no.: $node, $lang version - Admin"));
        $this->load->view("admin/pages/edit_page.php", $data);
        $this->load->view("admin/footer.php");
    }
} 
```

模型：

```
class Page_model extends CI_Model
{
public function get_page($node, $lang)
{
    // load the page
    return $this->db->get_where("pages", array("node" => $node, "lang" => $lang))->row();
}

public function save_version($page)
{
    $this->db->where("node", $page["node"]);
    $this->db->where("lang", $page["lang"]);
    $this->db->update("pages", $page);
}

public function search($query)
{
    return $this->db->get_where("pages", $query)->result();
}
} 
```

看法：

```
<h2>Edit page</h2>
<?php
// load form helper
    $this->load->helper("form");

// open a form
echo form_open("admin/page/{$page->node}/edit/{$page->lang}");

// print validation errors
echo validation_errors();

// title and content fields
echo form_label("Title: ", "title");
echo form_input("title", set_value("title", $page->title));

// aesthetic line break
echo "<br>";

echo form_label("Content: ", "content") . "<br>";
echo form_textarea("content", set_value("content", $page->content));

// save button and close form
echo form_submit("submit", "Save page");
echo form_close(); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T19:41:05.097

**设置规则的语法是**

```
 $this->form_validation->set_rules('field_name', 'Label', 'rule1|rule2|rule3'); 
```

通过考虑规则，您设定的规则线将是

```
$this->form_validation->set_rules('title','Title', 'required"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T14:43:52.243

我不是 CodeIgniter 经验丰富的开发人员，但从文档来看，正确的语法不是以下内容吗？

```
$this->form_validation->set_rules("title","Title","required"); 
```

根据此链接： [http ://ellislab.com/codeigniter/user-guide/libraries/form_validation.html#validationrules](http://ellislab.com/codeigniter/user-guide/libraries/form_validation.html#validationrules)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-15T22:58:15.417

利用

```
$this->form_validation->set_rules("title","Title","required"); 
```

而不是这个

```
$this->form_validation->set_rules('title','Title','required'); 
```

我已经对此进行了测试。它就像一个魅力。

# java - 为什么遵循控制结构条件的声明需要在一个块中？

> ID：13647323
> 
> 赞同：6
> 
> 时间：2012-11-30T14:39:58.410
> 
> 标签：java, syntax

尝试编译以下内容时

```
public class Test {
    public void method(String foo) {
        // This compiles if the curly braces are uncommented
        if(foo instanceof Object) // {
            Object bar = (Object) foo;
        // }
    }
} 
```

我收到以下错误

```
javac -Xlint:all Test.java
Test.java:5: error: not a statement
            Object bar = foo;
            ^
Test.java:5: error: ';' expected
            Object bar = foo;
                  ^
2 errors 
```

为什么`Object bar = (Object) foo;`代码需要在一个块中才能编译？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-30T14:48:01.757

> 为什么 Object bar = (Object) foo; 需要在代码块中编译吗？

因为当这是块中唯一的语句时，*声明一个变量是没有意义的。*该声明没有意义，因为您将无法在任何后续代码中引用该变量。（变量的范围*只是*声明。）

基本上，编译器会阻止你做一些毫无意义的事情。

就规范而言，这是您尝试使用的产品（[JLS 的第 14.9 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.9)）：

```
IfThenStatement:
    if ( Expression ) Statement 
```

现在 Statement 产生式由[第 14.5 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.5)定义。

```
Statement:
    StatementWithoutTrailingSubstatement
    LabeledStatement
    IfThenStatement
    IfThenElseStatement
    WhileStatement
    ForStatement

StatementWithoutTrailingSubstatement:
    Block
    EmptyStatement
    ExpressionStatement
    AssertStatement
    SwitchStatement
    DoStatement
    BreakStatement
    ContinueStatement
    ReturnStatement
    SynchronizedStatement
    ThrowStatement
    TryStatement

StatementNoShortIf:
    StatementWithoutTrailingSubstatement
    LabeledStatementNoShortIf
    IfThenElseStatementNoShortIf
    WhileStatementNoShortIf
    ForStatementNoShortIf 
```

请注意，那里没有 LocalVariableDeclarationStatement。这*仅发生在 JLS*[第 14.4 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.4)中定义的 BlockStatement 产品中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T14:46:04.117

**您不能声明局部范围变量以便直接在父范围中使用它。**

当您不放置花括号时，它会导致条件的单个解释语句。

因此，如果这个语句是一个赋值，那么这个赋值显然不能在之后使用，因为只有父作用域（大括号之外）是操作它的唯一方式。

因此，编译器抱怨这种情况。

为了避免这种情况并且不使用花括号，您必须执行以下操作：

```
public void method(String foo) {
        Object bar;
        if(foo instanceof Object)   //redundant here by the way...
          bar = (Object) foo;
          //...
} 
```

# outlook - HTML 电子邮件，链接上的文本装饰

> ID：13647329
> 
> 赞同：0
> 
> 时间：2012-11-30T14:40:27.113
> 
> 标签：outlook, gmail, href, html-email, text-decorations

我正在制作一个 html 邮件模板，但我不知道如何完全删除文本装饰。我在 Thunderbird 中工作得很好，但在 Outlook 和 Gmail 中却不行。在 Outlook 中，访问过的链接会变成不同的颜色，而我 Gmail 中的所有链接都会变成蓝色。我希望它一直是黑色的。

这是我的代码：

```
<span style="font-weight: bold; font-size: 16px; text-align: left;">
    <a style="text-decoration: none; color: black;" href="[% doc.url %]">
        This is a link
    </a>
</span> 
```

我在 Gmail 中也有一个问题，有一个透明的 1x1px 间隔图像（“spacer.gif”），显示为 ca。高度为 5 像素。

我的布局基于表格，但我不知道它是否是相关信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T17:44:46.573

在回答您的评论时，将 href 设置为如下样式：

```
<a href="" style="color:#000001; text-decoration:none;">click here</a> 
```

由于某种原因，Gmail 不喜欢纯黑色 (#000000) 或白色 (#FFFFFF) 代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T14:45:46.410

不要使用 html 保留字，黑色使用 #000000（而不是 #000）。对于间隔图像添加`display:block;`.

> 我的布局基于表格

这是正确的。

# java - 区分分隔符

> ID：13647333
> 
> 赞同：-1
> 
> 时间：2012-11-30T14:40:45.367
> 
> 标签：java, nodes, delimiter

我想从文本文件中读取一些数据。例如：

1 // 总共 1 个客户端数据

192.168.1.116;pc3;/home/pc3/Documents;C:/user/windows/Desktop; // 客户端数据的详细信息。

这是我的代码：

```
String strLine;
String [] values = new String[4];
int counter = 0;
int clientCounter = 0;
//Read File Line By Line
while ((strLine = br.readLine()) != null)   
{
// Print the content on the console
String delims = ";";
String[] tokens = strLine.split(delims);
if(counter == 0)//Reading total clients
{                       
    totalClient = Integer.parseInt(tokens[0]);
    counter++;
}
else
{   
for (int i = 0; i < tokens.length; i++)
{
values[i] = tokens[i];  
}
dc = new DisplayClient(clientCounter,values[0],values[1]," ",values[2],values[3]);
clientList.add(dc); 
```

但现在我需要阅读的文件几乎没有分隔符。例如：

0:1,0.5,2,0.7,3,0.2; // 7 项

1:0,0.5,7,1;//5 项

2:0,0.7;// 3 项

我正在使用这些数据来创建 p2p 模拟。

2:0,0.7;//表示节点2连接到节点0，带宽为700kbps

1:0,0.5,7,1;//表示节点1以500kbps连接到节点0，节点1也以1000kbps（1mbps）连接到节点7。

但现在它有 3 个分隔符，节点的项目可能是静态的。它可能是 3 个项目或 5 个项目或 7 个项目或可能更多。我怎样才能阅读这个并让每个数据用分隔符区分？

抱歉我的无知，并提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T15:04:42.210

我会试试这个：

1.  每行保留一个路由，但删除分号。
2.  用逗号和冒号而不是分号分隔路由。
3.  加载第一个 int （它是你的源节点）
4.  迭代加载您的下一对整数（它们是您的目标节点和速度）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T15:14:44.660

我会以不同的方式表示数据：

1:0,0.5;7,1;n,s;.......

1.拆分“：”上的行并将源节点设置为数组的第一个元素。

2.用“;”分割第二个条目 并遍历结果数组，每个条目将代表一个节点，对于每个条目，您可以将其拆分为“，”并获取节点编号和速度。

3.对于每个源节点，您现在拥有所有连接的节点及其速度，无论其数量多少。

# android - 懒惰的编译器/调试器？

> ID：13647337
> 
> 赞同：0
> 
> 时间：2012-11-30T14:41:12.627
> 
> 标签：android, xamarin.android

我现在正在寻找几个小时来解决这个问题：

在我的 android 应用程序的最开始，向用户显示了一个带有按钮的布局。如果他单击“任务”按钮，则应该会弹出一个 listView（另一个活动和布局）以向他显示所有可用的任务，并且单击一个他可以做更多的事情，但它们不是我的问题所必需的。关键是，该应用程序不会从数据库中获取任何数据，但是当我**进入**或跨过为所有**DBStuff**调用方法的行时，它可以工作。以下是必要的行：

```
 if (connection1.OpenDatabase(1, getDataBaseName()))
        {
            CTask = connection1.DBQueryTable(getDataBaseName(), "Tasks", TempFieldT);
            CEquipment = connection1.DBQueryTable(getDataBaseName(), "Equipment", TempFieldE);
            connection1.CloseDatabase();
        } 
```

所以他会跑过这些线，执行下面的线，但不会返回任何数据，当我没有用断点和步骤监督它时。当我这样做时，所有事情都按应有的方式工作。

应用程序在这个地方运行的数据库东西。

```
public Android.Database.ICursor DBQueryTable(string DataBaseName, string TableName, string[] Fields)
    {
        FindDBPath(DataBaseName);
        Android.Database.ICursor c;
        string TempF = "";
        string str = "";
        foreach (string n in Fields)
        { TempF += n + ","; }
        SQLQuery = "SELECT " + (str = TempF.TrimEnd(',')) +" FROM " + TableName;
        c = sqldTemp.RawQuery(SQLQuery, null);
        return c;        
    } 
```

那么为什么应用程序/编译器/调试器会这样呢？我有什么错误，但我现在不知道吗？

Ps：是的，我知道有一个查询功能，但这里没有必要，只要它可以解决我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T14:46:55.860

您的`DBQueryTable`方法返回一个*cursor*。关闭以下行中的连接后，它将立即失效：

```
connection1.CloseDatabase(); 
```

只要您需要光标，就应该保持连接打开。例如，您可以从游标中获取所有数据，*然后*关闭连接。

# google-chrome - 编辑 Chrome 清单

> ID：13647338
> 
> 赞同：4
> 
> 时间：2012-11-30T14:41:15.543
> 
> 标签：google-chrome, manifest

如果我没记错的话，前段时间我使用网络引擎为 Chrome 做了一个主题。

它一直有效，直到 Chrome 升级到版本 23。现在，当我想安装主题时，我收到此错误：

无法从“/extension_path/”加载扩展。'manifest_version' 键必须存在并设置为 2（不带引号）。有关详细信息，请参阅 developer.chrome.com/extensions/manifestVersion.html。

我想我必须打开 manifest.json 并将键值编辑为 2？我真的不知道，从来没有使用过它。如何打开清单？

如果我安装了扩展并更新到 23，它会继续工作而没有任何问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-02T03:35:29.287

查看 Chrome 的[Manifest Version](http://developer.chrome.com/extensions/manifestVersion.html)文档。`manifest.json`在扩展的文件夹中找到文件并添加

```
"manifest_version": 2, 
```

在那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T03:40:37.787

确保在将清单密钥添加到 manifest.json 后进行测试。您的扩展程序可能无法正常工作。我的没有。

# jquery - 在对话框内加载 aspx 页面时，JQuery 对话框未第二次打开

> ID：13647343
> 
> 赞同：0
> 
> 时间：2012-11-30T14:41:24.377
> 
> 标签：jquery, asp.net, html, jquery-ui, jquery-dialog

我已经检查过类似的问题，但没有人给我一个解决方案......这就是为什么发布这个问题......所以请给我一个解决方案而不是投反对票......

我正在我的对话框中加载一个 aspx 页面。它第一次工作正常，但是如果我第二次关闭并重新打开它..它没有被打开..

这是我处理对话框脚本的 default.aspx

```
 <html>
        <head>
            <script type="text/javascript">
                    $(document).ready(function() {
                    $("#thedialog").dialog({
                            autoOpen: false,
                            modal: true,
                            position: 'center',
                            width: 900,
                            open: function() {
                            $('#thedialog').load("AddDetails.aspx");
                            }
                        });

                         $('#link').click(function() {
                          $('#thedialog').dialog('open');

                        });

                    });
             </script>
        </head>
        <body>
            <div id="thedialog" style="display: none; overflow: hidden">
           <span id="link" style="color: #88b807; margin-left: 839px;
                            margin-top: -12px; cursor: pointer; display: block">Create</span>
</div>
        </body>
        </html> 
```

这是我的 AddDetails.aspx

```
<body>
    <form id="form1" runat="server">
    <div>
        <table id="table" style="border-spacing: 7px 7px; margin-left: 5px">
            <tr>
                <td>
                    <span class="SubHeading">Private Space Name </span>
                </td>
                <td>
                    <asp:TextBox ID="txt_spacename" runat="server" />
                </td>
            </tr>
            <tr>
                <td>
                    <span class="SubHeading">Private Space Description </span>
                </td>
                <td>
                    <asp:TextBox ID="txt_spacedesc" TextMode="MultiLine" runat="server" />
                </td>
            </tr>
</table>
</div>
</form>
</body> 
```

如果我只是打开一个对话框，而不是加载一个页面，它正在打开，但如果我在对话框中加载一个页面，它不会打开......

帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T15:45:36.327

从您更新的代码看来，您单击的链接位于您正在加载 ajax 调用的 div 内。如果是这种情况，那么您加载对话框的点击事件只会被绑定一次（在初始页面加载时）。当再次加载链接元素时（我假设它在加载的 ajax 响应中），它不再绑定 click 事件。

要解决这个问题，您可以：

1.  将您的链接移到#thedialog div 元素之外（现在看起来它没有正确关闭）
2.  修改您的 javascript 以添加一个委托，以便即使页面 (DOM) 发生更改，点击事件也会在该类型的元素上触发，例如：

    ```
    $("#thedialog").delegate("#link", "click", function () {
        $('#thedialog').dialog('open');
        return false;
    }); 
    ```

    选项 2 可能会产生一些奇怪的结果，但如果对话框本身中有一个 #link 元素 - 如果这解决了问题，我会选择第一个选项。

* * *

**更新：**

以上适用于我的浏览器，但为了确保我会尝试以下代码并查看它是否有效，我猜可能是 jquery / jquery ui 的版本不正常或不是最新的。

```
<html>
<head>
<title>Test dialog page</title>
<link href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" rel="stylesheet"
    type="text/css" />
<script src="http://code.jquery.com/jquery-1.8.3.js" type="text/javascript"></script>
<script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $("#thedialog").dialog({
            autoOpen: false,
            modal: true,
            position: 'center',
            width: 900,
            height: 300,
            open: function () {
                $('#thedialog').load("AddDetails.aspx");
            }
        });

        $('#link').click(function () {
            $('#thedialog').dialog('open');
        });

    });
</script>
</head>
<body>
<div id="thedialog" style="display: none; overflow: hidden">
</div>
<span id="link" style="color: #88b807; cursor: pointer; display: block">Create</span>
</body>
</html> 
```

我会尝试/推荐的其他事情：

*   从 AddDetails.aspx 中删除包装体标签（除非您以非 ajax 方式使用它）。还要确保它没有引用母版页。
*   确保页面上没有正在运行其他 javascript - 例如，在 AddDetails 页面中没有引用脚本。
*   如果您仍然遇到问题，请尝试在 Firebug 中的控制台或其他浏览器中的等效项中查看 - 是报告错误还是静默失败？

# mysql - 用于获取 Joomla 用户及其个人资料字段的 MySQL 查询

> ID：13647344
> 
> 赞同：3
> 
> 时间：2012-11-30T14:41:24.720
> 
> 标签：mysql, joomla

我正在 Joomla 2.5 中创建一个用户配置文件插件来扩展标准用户字段。

问题是我需要一种有效的方法来通过 MySQL 查询检索用户（以及额外的字段）。目前我能想到的最好的方法是查询 #__user_profiles 表并处理该数据以确定要加载的额外字段，然后生成一个查询，该查询为每个额外的用户字段在 #__user_profiles 表上创建一个单独的连接。

显然，这不是很有效，并且在大型用户群中，查询速度很慢。

有没有更好的方法将作为另一个表中单独记录的额外用户字段组合到一个查询中？

编辑：

我有一个外部脚本需要获取所有用户及其扩展字段，因此我需要合并 #_ *users 和 #* _user_profiles 表

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T20:59:50.920

这只是两个表之间的连接

```
select u.*, p.*
from #__users u
left join #__user_profiles p on p.user_id = u.id 
```

这将检索所有用户和关联的配置文件条目。根据您真正需要的行或配置文件条目，您可以使用附加的 where 子句限制此查询。

如果您希望用户和关联的配置文件条目在一行中，您可以将配置文件条目与`group_concat`

```
select u.*, group_concat(p.profile_key, '=', p.profile_value)
from #__users u
left join #__user_profiles p on p.user_id = u.id
group by u.id 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T10:30:22.690

最后我决定采用数据透视表方法

例子：

```
SELECT
    #__users.*,
    MAX(CASE WHEN profile_key = "example.firstname" THEN profile_value END) AS FirstName,
    MAX(CASE WHEN profile_key = "example.lastname" THEN profile_value END) AS LastName,
    MAX(CASE WHEN profile_key = "example.company" THEN profile_value END) AS Company
FROM #__users LEFT JOIN #__user_profiles ON #__users.id = #__user_profiles.user_id
GROUP BY #__users.id 
```

这使我可以将所有额外的用户数据放在一行中，以便我可以轻松排序和过滤。

# c# - 在控制器中调用异步方法

> ID：13647346
> 
> 赞同：26
> 
> 时间：2012-11-30T14:41:30.210
> 
> 标签：c#, asp.net-mvc-4, async-await

我有一个类似于以下内容的控制器：

```
public MyController : Controller
{
    public ActionResult DoSomething()
    {
        CallSomeMethodWhichDoesAsyncOperations();
        return Json(new { success = successful }, JsonRequestBehavior.AllowGet);
    }
} 
```

调用我的控制器时，出现以下错误：

> 此时无法启动异步操作。异步操作只能在异步处理程序或模块内或在页面生命周期中的某些事件期间启动。如果在执行 Page 时发生此异常，请确保将 Page 标记为`<%@ Page Async="true" %>`。

现在我无法控制`CallSomeMethodWhichDoesAsyncOperations`并且方法本身不是异步的，但在内部会执行一些异步触发并忘记。我能做些什么来修复它？已尝试将控制器更改为`AsyncController`和/或使控制器中的方法异步。

编辑：

当我尝试使用我第一次尝试的 AsyncController 时，结果相同

```
public MyController : AsyncController
{
    public ActionResult DoSomething()
    {
        CallSomeMethodWhichDoesAsyncOperations();
        return Json(new { success = successful }, JsonRequestBehavior.AllowGet);
    }
} 
```

接着

```
public MyController : AsyncController
{
    public async Task<ActionResult> DoSomething()
    {
        CallSomeMethodWhichDoesAsyncOperations();
        return Json(new { success = successful }, JsonRequestBehavior.AllowGet);
    }
} 
```

这确实将异常更改为以下“异步模块或处理程序已完成，而异步操作仍处于挂起状态”。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-30T15:24:13.113

> 现在我无法控制 CallSomeMethodWhichDoesAsyncOperations 并且方法本身不是异步的，但在内部会执行一些异步触发并忘记。我能做些什么来修复它？

联系编写它的人并让*他们*修复它。

说真的，这是最好的选择。对此没有很好的解决方法 - 只有一个 hack。

你可以破解它像这样工作：

```
public MyController : Controller
{
  public async Task<ActionResult> DoSomething()
  {
    await Task.Run(() => CallSomeMethodWhichDoesAsyncOperations());
    return Json(new { success = successful }, JsonRequestBehavior.AllowGet);
  }
} 
```

**不建议这样做。**此解决方案将工作推到后台线程，因此当`async`操作恢复时，它们将没有`HttpContext`等。此解决方案在仍有待处理的情况下完成请求。如果服务器在错误的时间停止/回收，此解决方案将无法正常运行。

只有一个合适的解决方案：改变`CallSomeMethodWhichDoesAsyncOperations`。

# google-maps-api-3 - 谷歌地图 api 在新查询上重置图层

> ID：13647347
> 
> 赞同：1
> 
> 时间：2012-11-30T14:41:35.693
> 
> 标签：google-maps-api-3

我有一个基于 SQL 查询显示层的函数，用户在表单中插入参数。我想在每次新查询时重新初始化（清空）图层，而不使用重置按钮。如果你能帮助我，谢谢。

有以下功能：

```
function CS_query() {
    CSsearch = document.getElementById('CS_Input').value;
    layer_imm = new google.maps.FusionTablesLayer({
        query: {
            select: 'geometry',
            from: '1ckqpE8ZxVzfgJ5bT-vAkpBwjVANbV-KiNjfScjw',
            where: "CODE_CS LIKE '%" + CSsearch + "%'"
        }
    }); 
    layer_imm.setMap(map);  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T14:12:04.783

谢谢你们的回答。

```
google.maps.event.addDomListener(document.getElementById('CS'),
    'click', CS_query);

layer_imm = new google.maps.FusionTablesLayer();

function CS_query() {
    CSsearch = document.getElementById('CS_Input').value;
    layer_imm.setOptions({
        query: {
            select: 'geometry',
            from: '1_SY_lmkaQ3_3_pPDzho1-X9fc8WtdJGfo2w1VVg',
            where: "CODE_CS LIKE '%" + CSsearch + "%'"
        },
        map:map
    }); 

}

<input type="text" id="CS_Input">
<input type="button" id="CS" value="Submit" > 
```

# javascript - Javascript 中的正则表达式不像它应该的那样贪婪？

> ID：13647351
> 
> 赞同：5
> 
> 时间：2012-11-30T14:41:56.660
> 
> 标签：javascript, regex

我制作了一个简单的代码来捕获字符串中的某个组：

```
/[a-z]+([0-9]+)[a-z]+/gi    (n chars , m digts , k chars). 
```

[代码](http://jsbin.com/irehej/2/edit)：

```
var myString='aaa111bbb222ccc333ddd';
var myRegexp=/[a-z]+([0-9]+)[a-z]+/gi;

var match=myRegexp.exec(myString);
console.log(match)

 while (match != null)
{
  match = myRegexp.exec(myString);
  console.log(match)
} 
```

结果是：

```
["aaa111bbb", "111"]
["ccc333ddd", "333"]
null 
```

但是等一下，为什么他没有尝试这个`bbb222ccc`部分？

我的意思是，它看到了，`aaa111bbb`但他应该尝试一下`bbb222ccc`……（太贪心了！）

我错过了什么？

# 还

看着

```
 while (match != null)
    {
      match = myRegexp.exec(myString);
      console.log(match)
    } 
```

它是如何发展到第二个结果的？起初有：

var match=myRegexp.exec(myString);

稍后（在一个while循环中）

```
match=myRegexp.exec(myString);
match=myRegexp.exec(myString); 
```

它是**同一**行......它在哪里记得第*一个*结果已经显示？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T14:52:19.690

`.exec`使用`g`标志时是有状态的。状态保存在正则表达式对象的`.lastIndex`属性中。

```
var myString = 'aaa111bbb222ccc333ddd';
var myRegexp = /[a-z]+([0-9]+)[a-z]+/gi;
var match = myRegexp.exec(myString);
console.log(myRegexp.lastIndex); //9, so the next `.exec` will only look after index 9
while (match != null) {
    match = myRegexp.exec(myString);
    console.log(myRegexp.lastIndex);
} 
```

可以通过设置`.lastIndex`为`0`或通过`execing`不同的字符串来重置状态。`re.exec("")`例如将重置状态，因为状态被保留为`'aaa111bbb222ccc333ddd'`.

这同样适用于`.test`方法，因此，如果您不喜欢意外，切勿将`g`标志与正则表达式一起使用。`.test`请参阅[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp/exec](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp/exec)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T14:54:45.713

您还可以手动更新`lastIndex`属性：

```
var myString='aaa111bbb222ccc333ddd';
var myRegexp=/[a-z]+([0-9]+)[a-z]+/gi;

var match=myRegexp.exec(myString);
console.log(match);

 while (match != null)
{
  myRegexp.lastIndex -= match[0].length - 1; // Set the cursor to the position just after the beginning of the previous match
  match = myRegexp.exec(myString);
  console.log(match)
} 
```

请参阅此链接[MDN exec](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp/exec)。

* * *

**编辑 ：**

顺便说一句，您的正则表达式应该是：`/[a-z]{3}([0-9]{3})[a-z]{3}/gi`

# webserver - 搜索引擎检查特定 IP 是否是 Web 服务器

> ID：13647358
> 
> 赞同：0
> 
> 时间：2012-11-30T14:42:13.963
> 
> 标签：webserver, ip, search-engine

我必须自动查找特定 IP 范围内的 Web 服务器

它不应该看起来像攻击，所以我不能使用 ping、curl、lynx。我也不能使用反向 dns。

另一种方法是使用 google 或 bing 等搜索引擎。稍后我可以通过将 ip 放入搜索框中进行搜索我可以检查地址是否包含 ip 然后我知道那是 Web 服务器。

但谷歌不返回有用的数据。例如，对于 ip 212.77.100.101（这是网络服务器）不返回有用的结果，结果网页上的任何结果都不包含地址上的 212.77.100.101 (https://www.google.pl/search?q=212.77 .100.101)。

该问题是否有其他解决方案，或者是否有任何搜索引擎可供使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T14:53:39.963

这实际上取决于很多因素。您将需要一些脚本来通过直接的谷歌结果搜索您想要的信息。另外，服务器是什么意思？就像普通的 ole 网站服务器一样？您可能会以某种方式使用 arin whois 来查询 IP 地址以及属于 google、yahoo 等的任何您可以识别为 LIKELY 服务器 IP 地址的地址。如果您希望查看它是否是基于更多技术信息（如操作系统、端口等）的服务器，那么您在 google 上可能找不到太多信息。

例如，一个 google ip 的 ARIN WHOIS 出现在这里，[http://whois.arin.net/rest/net/NET-74-125-0-0-1/pft](http://whois.arin.net/rest/net/NET-74-125-0-0-1/pft)。使用您对语言的偏好，您可能会查询网页并将 DOM 或 w/e 返回到变量，然后查找具有识别信息的元素，例如名称下的 google 名称或其他内容影响。

真正分辨 AFAIK 的最佳方法是检查端口和其他技术，而您无法通过它的声音来做到这一点。我不知道您可以访问一个数据库，该数据库也可以通过 IP 地址获得该信息......

你说的服务器是什么意思？这将有助于缩小您希望完成的工作。只是提供某种数据的任何 IP？或者任何回到 linux 盒子或其他东西的东西？

更多详情！:D

# javascript - 从字符串中删除最后一行

> ID：13647360
> 
> 赞同：16
> 
> 时间：2012-11-30T14:42:21.660
> 
> 标签：javascript, jquery

如果我不知道字符串有多大，如何从字符串中删除最后一行“\n”？

```
var tempHTML = content.document.body.innerHTML;
var HTMLWithoutLastLine = RemoveLastLine(tempHTML);

function RemoveLastLine(tempHTML)
{
   // code
} 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-30T14:45:41.337

尝试：

```
if(x.lastIndexOf("\n")>0) {
    return x.substring(0, x.lastIndexOf("\n"));
} else {
    return x;
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-30T14:49:15.197

您可以使用正则表达式（根据“最后一行”的意思进行调整）：

```
return x.replace(/\r?\n?[^\r\n]*$/, ""); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-12-20T02:25:37.070

一个正则表达式会做到这一点。这是最简单的一个：

```
string.replace(/\n.*$/, '') 
```

[请参阅 regex101 了解其工作原理](https://regex101.com/r/sRai58/1)

`\n`匹配字符串中的最后一个换行符

`.*`匹配任何字符，介于零次和无限次之间（行终止符除外）。所以无论最后一行是否有内容，这都有效

`$`匹配字符串的结尾

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-28T19:34:57.993

在您的特定情况下，该功能确实可能如下所示：

```
function(s){
  return i = s.lastIndexOf("\n")
    , s.substring(0, i)
} 
```

尽管您可能也不希望最后有空格；在这种情况下，一个简单的替换可能会很好：

```
s.replace(/s+$/, '') 
```

但是请记住，新版本的 Javascript（**ES6+**）提供了使用内置原型函数（[trim](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/Trim)、[trimLeft](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/trimLeft)、[trimRight](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/trimRight)）执行此操作的速记方法

```
s.trimRight() 
```

干杯!

# c# - 多方向子弹[阅读]

> ID：13647361
> 
> 赞同：0
> 
> 时间：2012-11-30T14:42:22.610
> 
> 标签：c#, vector, xna, bullet

一段时间以来，我一直在为一个我仍在为学校工作的项目编写代码，即使它已经完成了。

我想制作一个手榴弹，向与之相撞的敌人发射子弹，但我需要使用 atm 的帮助是一次向所有不同方向发射 8 发子弹。

这是我老师给我的代码（我向他寻求帮助）

```
if (mouse.LeftButton == ButtonState.Pressed)
            {
                Texture2D pewTexture;
                pewTexture = game.Content.Load<Texture2D>("pew");
                game.firingSound.Play();
                //Tweak pews to shoot at mouse, rather than just going straight on the y axis.
                pew = new CPew(game, pewTexture);
                pew.velocity = new Vector2((float)Math.Cos(rotation), (float)Math.Sin(rotation)) * 10f + spriteVelocity;
                pew.position = position + pew.velocity * 5;

                //easy cheesy way:
                //pew.position = position;
                //pew.position.X += 15f;
                //pew.position.Y -= 20f;

                //super awesome cool way for cool people and celebrities
                pew.position = position +
                    new Vector2(
                        texture.Width * .2f - pew.texture.Width * .2f,
                        -pew.texture.Height);

                game.pews.Add(pew);

                myFiringDelay = 10;

            }
            else
            {
                if (mouse.RightButton == ButtonState.Pressed)
                {
                    float pi2 = (float)Math.PI * 2.0f;
                    int numShots = 10;
                    float pi2overnum = pi2 / numShots;

                    for (int i = 0; i < numShots; i++)
                    {
                        Vector2 direction = PiToVec2(pi2overnum * i);

                        //particles[i].reset(position,direction, vector2.zero, 6);
                        game.pews[i].Reset(pew.position, direction, Vector2.Zero);

                    }

           Vector2 PiToVec2(float piT)
           {
              return new Vector2((float)Math.Sin(piT), (float)Math.Cos(piT));

           } 
```

显然，这将使它在鼠标右键单击时向各个方向射击，但是每次我尝试它时，我的游戏都会直接崩溃然后我们有一个 pew 类，它是子弹，这就是我想同时朝这些方向射击的东西

你们可能无法帮助我向您展示的代码，我花了一段时间寻找一种方法来做到这一点，但我似乎找不到任何东西

以前的示例和/或源代码真的很有帮助，至少是另一种看待这个的方式，谢谢。

当它崩溃时显示给我，它告诉我索引超出范围或为负数，如果你们能告诉我多向子弹的基本代码，我会很高兴

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T04:24:36.823

您遇到的问题是，当您尝试遍历您的 game.pews 集合时，您正在尝试对集合中的前 10 个项目调用 Reset() 。然而，那里似乎没有 10 个长椅。因此，当您到达最后并尝试访问下一个时，就会出现“索引超出范围”错误。

对于问题的手榴弹部分的 8 颗子弹，我认为您想做这样的事情。

```
//Once a grenade has collided with an enemy 
float pi2 = (float)Math.PI * 2.0f;
int numShots = 8;
float pi2overnum = pi2 / numShots;

for (int i = 0; i < numShots; i++)
{
   Vector2 direction = PiToVec2(pi2overnum * i);

   pew = new CPew(game, pewTexture);

   pew.velocity = new Vector2((float)Math.Cos(rotation), (float)Math.Sin(rotation)) * 10f + spriteVelocity;

   //Set the position based off of the grenades last position.
   //Set the direction.
   //Set any other attributes needed.

   game.pews.Add(pew);
} 
```

现在你有八颗子弹从手榴弹爆炸的不同方向移动。要更新它们并绘制它们，我建议使用 foreach 循环，这样您就不必担心“索引超出范围”错误。

```
foreach CPew pew in game.pews
{
   pew.Update();
} 
```

# ios - 即使在完成后也将 NSOperation 保留在队列中

> ID：13647365
> 
> 赞同：3
> 
> 时间：2012-11-30T14:42:28.510
> 
> 标签：ios, cocoa, nsoperation

通常，一旦`main`an 的方法`NSOperation`完成，操作就会被标记为完成并从队列中删除。但是，我的操作进行网络调用，我想处理重试。`NSOperation`在`NSOperationQueue`我明确表示可以删除之前，我如何保留它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T16:01:24.287

我找不到我在当前项目中所做工作的原始来源。

我已将 NSOperation 子类化并执行此操作...

在 .m... 中添加私有属性

```
@property (nonatomic) BOOL executing;
@property (nonatomic) BOOL finished;
@property (nonatomic) BOOL completed; 
```

启动操作...

```
- (id)init
{
    self = [super init];
    if (self) {
        _executing = NO;
        _finished = NO;
        _completed = NO;
    }
    return self;
} 
```

添加函数以返回属性...

```
- (BOOL)isExecuting { return self.executing; }
- (BOOL)isFinished { return self.finished; }
- (BOOL)isCompleted { return self.completed; }
- (BOOL)isConcurrent { return YES; } 
```

在“开始”函数中（这是 operationQueue 调用的位......

```
- (void)start
{
    if ([self isCancelled]) {
        [self willChangeValueForKey:@"isFinished"];
        self.finished = YES;
        [self didChangeValueForKey:@"isFinished"];
        return;
    }

    // If the operation is not canceled, begin executing the task.
    [self willChangeValueForKey:@"isExecuting"];
    self.executing = YES;
    [self didChangeValueForKey:@"isExecuting"];

    [NSThread detachNewThreadSelector:@selector(main) toTarget:self withObject:nil];
} 
```

然后主要把你的工作代码...

```
- (void)main
{
    @try {
        //this is where your loop would go with your counter and stuff
        //when you want the operationQueue to be notified that the work
        //is done just call...
        [self completeOperation];
    }
    @catch (NSException *exception) {
        NSLog(@"Exception! %@", exception);
        [self completeOperation];
    }
} 
```

编写完成操作的代码...

```
- (void)completeOperation {
    [self willChangeValueForKey:@"isFinished"];
    [self willChangeValueForKey:@"isExecuting"];

    self.executing = NO;
    self.finished = YES;

    [self didChangeValueForKey:@"isExecuting"];
    [self didChangeValueForKey:@"isFinished"];
} 
```

就是这样。

只要你有这些，那么操作就会起作用。

您可以根据需要添加任意数量的其他功能和属性。

事实上，我实际上已经对这个类进行了子类化，因为我有一个函数可以为不同类型的对象完成所有工作（这是一个上传的东西）。我定义了一个函数...

```
- (void)uploadData
{
    //subclass this method.
} 
```

然后我在子类中只有一个自定义的“uploadData”方法。

我发现这非常有用，因为它可以让您对何时完成操作等进行精细控制......

# sql-server-2008 - 参数数据类型 numeric 对子字符串函数的参数 1 无效

> ID：13647370
> 
> 赞同：4
> 
> 时间：2012-11-30T14:42:42.183
> 
> 标签：sql-server-2008

我收到此代码的以下消息

```
case when substring(New_Limit,11,1)=' ' then '0'+substring(New_Limit,1,10) 
```

'then' 位用于连接 0 和子字符串。有什么帮助吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-30T14:51:15.613

这意味着您的`New_Limit`变量是一个数值。您可能想`CAST`在它周围放置一个 to (n)varchar。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-06-16T02:35:50.067

您首先尝试将其转换为字符串类型（varchar）：

```
SUBSTRING(CAST(New_Limit AS varchar(38)), 11, 1) 
```

# algorithm - 数组就地重新排序的算法

> ID：13647375
> 
> 赞同：-2
> 
> 时间：2012-11-30T14:43:08.187
> 
> 标签：algorithm

> **可能重复：**
> [数组元素的重新排序](https://stackoverflow.com/questions/5557326/reordering-of-array-elements)
> [面试测试 - 重新排列数组](https://stackoverflow.com/questions/8106376/interview-test-rearrange-the-array)

我有一个数组，其中三个语义元素（a，b，c）以以下形式存储：

```
[a][b][c][a][b][c][a][b][c]... 
```

这意味着 ab 和 c 不是实际值。第一个 a 可能是 10，第二个是 1，第三个是 25，依此类推。ab 和 c 表示程序将为您看到“a”的所有索引赋予特定的语义含义，b 和 c 也是如此。

我想重新排序，使其具有以下形式：

```
[a][a][a]...[b][b][b]...[c][c][c].... 
```

有没有办法“就地”执行此操作，即不使用临时“缓冲区”数组？

带有值的示例：

起始数组：

> [11][5][3][284][123123][841823][0][11][22]

我需要将其重新排序为：

> [11][284][0][5][123123][11][3][841823][22]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T15:45:16.163

有一个 O(n.lgn) 时间分治算法，额外的内存使用量为 O(1)：

假设您要重新排序 3n 大小的数组，如下所示：

A=[1,n+1,2n+1, 2,n+2,2n+2, ... , n,2n,3n]。

将 A 分成两个子数组 A1 和 A2，A1 包括编号从 1 到 3*[n/2] 的索引，A2 包括索引 3*[n/2]+1 到 3n。以递归方式重新排序 A1 和 A2（就地）。然后，A 变成类似于 6 部分数组 [p1,p3,p5,p2,p4,p6] 的东西，每个部分都是后继元素的正确排序子数组，您可以将它们重新排序为 [p1,p2, p3,p4,p5,p6] in O(n) in-place with swap 操作。

T(n)=2T(n/2)+O(n)=O(n lgn)

# windows - 设置编译路径时会发生什么？

> ID：13647380
> 
> 赞同：0
> 
> 时间：2012-11-30T14:43:17.407
> 
> 标签：windows, compiler-construction, compilation, path, development-environment

我知道它以某种方式建立连接，以便编译器在调用时将源代码连接到它需要的任何库。

但是在更技术层面上发生了什么，或者更好地说明我需要知道什么才能自信地编译代码。

我正在使用 C++ 和 MinGW，并开始研究 Sublime Text 2 的构建文件和东西（到目前为止主要在 unix 或 Java + eclipse 下学习）。但是我不明白在你的路径中添加编译器对你有什么好处？

我是否需要为要编译的每个文件夹添加它？还是系统范围的？我真的是第一次学习这些东西，我们从未展示过如何设置开发环境甚至在其他系统上部署代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T15:02:22.733

您可能是指在编译器中包含路径和库路径：

*   包含路径：编译器将在其中查找标头；和
*   库路径：编译器调用的链接器将在其中查找二进制库以完成项目的构建。

如果是这种情况，请[在此处](http://www.network-theory.co.uk/docs/gccintro/gccintro_21.html)寻找温和的解释。基本上，正在发生的事情是编译器在某些位置查找由操作系统和安装在系统范围内的其他库定义的符号。除了这些路径之外，您还需要告诉编译器在哪里可以找到您自己的项目中定义的符号。

您可能还意味着与安装编译器本身或配置编辑器以使用它有关的内容。在这种情况下，您需要告诉构建系统在哪里可以找到编译器的可执行文件。

基本上，可能发生的事情是您的编辑器想知道编译器在哪里，以便它可以为您的代码提供实时反馈。将编译器添加到系统路径通常（但并非总是）可以解决您的问题。

更详细地说：C++ 构建是一个相当复杂的工具链，包括确定依赖关系、预处理、编译和链接。有一些工具可以自动化该工具链，而这些工具又被封装到现代 IDE 的功能中，例如 Eclipse、Visual C++ 或 Sublime Text 2。您需要告诉您的编辑器在哪里可以找到它用来为您提供的工具与这些服务。

# vba - 将 ADODB 参数数组传递给函数？

> ID：13647381
> 
> 赞同：1
> 
> 时间：2012-11-30T14:43:19.640
> 
> 标签：vba

我正在尝试在 calligng 代码中创建我的 ADODB 命令和参数，以便可以将它们传递给通用 SQL 函数，但是从列表中检索参数时出现错误：

```
 Dim prm As ADODB.Parameter
    Dim cmd As ADODB.Command
    Dim ParameterList(0) As Variant

    Value = Cells(3,3).Value

    Set cmd = New ADODB.Command
    Set prm = cmd.CreateParameter("@Field", adVarChar, adParamInput, 50)
    cmd.Parameters.Append prm
    cmd.Parameters("@Field").Value = Value    

    ParameterList(0) = prm

    Call SQLFunc(Data, SQLStr, adCmdStoredProc, cmd, ParameterList)
    .
    .

sub SQLFunc(ByRef Data as Variant, SQLStr as String, CommandType As ADODB.CommandTypeEnum, ByRef cmd As ADODB.Command, ParamList As Variant)

    .
    .
    .
    If cmd.CommandType <> adCmdStoredProc Then
        cmd.Execute
    Else

        'Append the parameters
        For i = LBound(ParamList, 1) To UBound(ParamList, 1)
            Dim TempParam As ADODB.Parameter
            Set TempParam = ParamList(i)
            cmd.Parameters.Append TempParam 'Error here
        Next

        Set Rst = cmd.Execute 
```

谁能告诉我如何实现这一目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T15:40:41.057

后

```
ParameterList(0) = prm 
```

`ParameterList(0)`是`Empty`，解决这个问题；

```
set ParameterList(0) = prm 
```

我也会强烈输入这个，而不是变体使用`Dim ParameterList(0) As ADODB.Parameter`

您看到的错误是因为您在调用之前已经将参数附加到命令`SQLFunc`中，而您在其中非法尝试再次这样做。绑定到命令时，参数名称必须是唯一的。

您可以删除绑定和使用；

```
Set prm = cmd.CreateParameter("@Field", adVarChar, adParamInput, 50)
prm.Value = Value 
```

然后`prm`保持独立于`cmd`。

# javascript - 网络套接字性能

> ID：13647384
> 
> 赞同：0
> 
> 时间：2012-11-30T14:43:33.737
> 
> 标签：javascript, html, websocket

当套接字连接负载很重时，浏览器缓存会影响 web-socket 性能吗？如果需要，关闭 Web 套接字连接并重新连接的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T17:23:11.933

我不知道您认为浏览器缓存如何影响 WebSocket 性能。重新启动 WebSocket 应该很容易；您可以只监听错误或关闭事件，然后再次打开套接字。我运行一个 WebSocket 连接，每秒需要大约 2.5k 短（即 150b）JSON 消息，而不会出汗。使用消息中的信息更新 DOM 的速度要慢得多（以至于我们不得不限制 DOM 更新）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-29T17:23:54.803

您是否认为浏览器会缓存断开的 Web 套接字连接，并且此缓存会影响 Web 套接字连接性能？只是想知道您所指的*缓存？*如果您担心关闭或断开的 Web 套接字连接，浏览器不会缓存任何 Web 套接字连接（关闭或断开）。我猜，您指的缓存是内存或网络套接字对象。

# sql - 在 GROUP BY 之后连接一个字段

> ID：13647394
> 
> 赞同：3
> 
> 时间：2012-11-30T14:44:50.463
> 
> 标签：sql, sql-server, group-by, scalability, sql-server-group-concat

这个问题在 SO 中被问过很多次，但没有一个答案能满足我的情况。

1.  [问题 1](https://stackoverflow.com/questions/8005846/sql-server-combining-multiple-rows-into-one-row)
2.  [问题2](https://stackoverflow.com/questions/102317/how-to-get-multiple-records-against-one-record-based-on-relation)
3.  [问题 3](https://stackoverflow.com/questions/273238/how-to-use-group-by-to-concatenate-strings-in-sql-server)
4.  [问题 4](https://stackoverflow.com/questions/3856224/group-and-concatenate-many-rows-to-one)

我正在处理一个`DataObjectVersions`包含大约 120 万个唯一对象（并且还在增加）的多个版本的表。我需要为每个唯一对象连接来自特定字段的更改。

现在，我正在使用 Q3 中提供的 XML 路径的解决方案，但在此表上运行这样的查询完全是性能灾难。SQL Server 在 1900 万之后开始返回数据。知道此数据将比连接两次，您可以想象其影响。

我正在寻找最有效的可扩展性感知方式来连接由其他字段分组的不同行的相同字段的值（这当然不是键）。更准确地说，这是在数据仓库的视图中使用的。

**编辑：**

我试图简化描述，但这是一个完整的概述我有多个表格，其中包含以下列

```
   [ID]
   [创建时间]
   [由...制作]
   [删除时间]
   [删除者]
   [资源 ID]
   [帐户ID]
   [类型]

```

视图用于返回所有表中所有记录的联合，该联合仍将返回相同的列（在我的问题中由版本表描述）。`[ResourceId]`并且`[AccountId]`是对象的唯一复合标识符（组成员资格、系统帐户等。特别是资源分配）。`[Type]`用于标识不同的级别（如文件分配情况下的读/写/执行）

对于不同的唯一对象，所有其他字段都包含相同的值（在不同的表中）。我需要获取对象并连接`[Type]`列的值。之后处理所有行，并且 ( `[ResourceId]`, `[AccountId]`) 组合必须是唯一的（存在不同类型时不是这种情况）。

**编辑2：**

我正在使用这个功能：

```
CREATE FUNCTION [dbo].[GetUniqueType]
(
    @ResourceId as uniqueidentifier,
    @Account as uniqueidentifier
)
RETURNS nvarchar(100)
AS
BEGIN   
    return STUFF((select ',' + raType.Type from vwAllAssignments raType where raType.AccountId = @Account and raType.ResourceId = @ResourceId and raType.DeletedBy is null for xml path('')), 1,1,'')
END

GO 
```

`vwAllAssignments`是返回所有表行的并集的视图。

最后我选择

```
SELECT [CreatedTime]
      ,[DeletedTime]
      ,[DeletedBy]
      ,[ResourceId]
      ,[AccountId]
      ,dbo.GetUniqueType([ResourceId],[AccountId]) AS [Type]
FROM vwAllAssignments
GROUP BY [ResourceId], [AccountId], [CreatedTime], [DeletedTime], [DeletedBy] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T20:02:04.517

试试这个：

```
SELECT [CreatedTime]
      ,[DeletedTime]
      ,[DeletedBy]
      ,[ResourceId]
      ,[AccountId]
      ,STUFF((select ',' + raType.Type 
              from vwAllAssignments raType 
              where raType.AccountId = vwAllAssignments.AccountId and 
                    raType.ResourceId = vwAllAssignments.ResourceId and 
                    raType.DeletedBy is null 
              for xml path('')), 1,1,'') AS [Type]
FROM vwAllAssignments
GROUP BY [ResourceId], [AccountId], [CreatedTime], [DeletedTime], [DeletedBy] 
```

像这样的索引应该会有所帮助。

```
create index IX_vwAllAssignments on vwAllAssignments(AccountId, ResourceId, DeletedBy) include(Type) 
```

# java - 在 mahout 中使用 GenericRecommenderIRStatsEvaluator 的精度非法？

> ID：13647402
> 
> 赞同：1
> 
> 时间：2012-11-30T14:45:10.573
> 
> 标签：java, mahout

我正在遵循以下代码示例：

```
 RandomUtils.useTestSeed();
    DataModel model = new FileDataModel(new File(file));
    RecommenderIRStatsEvaluator evaluator = new GenericRecommenderIRStatsEvaluator();
    RecommenderBuilder recommenderBuilder = new RecommenderBuilder() {
        public Recommender buildRecommender(DataModel model)
                throws TasteException {
            UserSimilarity similarity = new PearsonCorrelationSimilarity(
                    model);
            UserNeighborhood neighborhood = new NearestNUserNeighborhood(2,
                    similarity, model);
            return new GenericUserBasedRecommender(model, neighborhood,
                    similarity);
        }
    };
    IRStatistics stats = evaluator.evaluate(recommenderBuilder, null,
            model, null, 4, 4, 0.5);
    System.out.println(stats.getPrecision());
    System.out.println(stats.getRecall()); 
```

文件中的数据是：

```
 1,101,5.0
 1,102,3.0
 1,103,2.5
 2,101,2.0
 2,102,2.5
 2,103,5.0
 2,104,2.0
 3,101,2.5
 3,104,4.0
 3,105,4.5
 3,107,5.0
 4,101,5.0
 4,103,3.0
 4,104,4.5
 4,106,4.0
 5,101,4.0
 5,102,3.0
 5,103,2.0
 5,104,4.0
 5,105,3.5
 5,106,4.0 
```

在数据文件上运行上面的代码时，我得到了

> java.lang.IllegalArgumentException: Illegal precision: NaN 为什么会这样？我[在这里](http://web.archiveorange.com/archive/v/wfftazNFSXvNc1JJ8dEd)找到了一些相关的东西，但它是在 2009 年发布的，无法解释我的困惑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T15:28:35.283

最终，错误意味着无法计算精度或召回率，这是因为测试数据集太小以至于无法进行有意义的测试。我认为这还不够，但是，将 0.5 更改为 1.0 并将阈值从 4 降低到 3。

这`IllegalArgumentException`只是一个不应该发生的外观错误。不久前它已在 SVN 中修复。但它会告诉你精确度和召回率是不确定的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-09T11:28:40.117

非常感谢肖恩..在您建议的更改后它正在工作：

```
IRStatistics stats = evaluator.evaluate(recommenderBuilder, null,
                                        model, null, 3, 4, 1.0); 
```

# java - 通过 Spring Data 将 joda DateTime 插入 MongoDB 时出错

> ID：13647405
> 
> 赞同：3
> 
> 时间：2012-11-30T14:45:24.210
> 
> 标签：java, spring, mongodb, jodatime, spring-data

今天我遇到了以下问题。当我将 joda DateTime 字段添加到我的域类之一时，我无法再将此类的任何对象保存到我的 MongoDB 中。过了一会儿，一个 StackOverflowError 被抛出，这似乎有某种循环。一旦我删除该字段，一切都会再次正常运行。

我尝试了 java mongo 驱动程序 2.9.3 和 2.10.0。数据绑定通过 Spring-Data-Mongo 1.1.1.RELEASE 进行。Mongo 版本是 2.2.1。

为了持久化我使用 MongoTemplate#save 的对象。

```
User user = new User("user");
mongoTemplate.save(user, "users"); 
```

User 类看起来像这样（为简单起见，被删除）：

```
public final class User {

  private final String suid;
  private DateTime datetime = DateTime.now();

  public User(String suid) {
    this.suid = suid;
  }

  public String getSuid() {
    return suid;
  }
} 
```

我尝试了几次网络搜索，但找不到其他人遇到此问题或任何提示如何处理 joda 时间。

对此的任何提示将不胜感激。

谢谢，克里斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T16:13:05.203

StackOverflowError 听起来像是一个错误，如果它不是来自您的代码，您[应该提交它。](https://jira.springsource.org/browse/DATAMONGO)您是否尝试过使用[自定义转换器](http://static.springsource.org/spring-data/data-mongodb/docs/current/reference/html/#mongo.custom-converters)来解决此问题？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-03T20:12:15.040

它是 Spring Data MongoDB 中的一个错误，我在将 JODA LocalTime 插入数据库时​​遇到了相同的 stackoverflow 错误，但是当我切换到 java LocalTime 时，它​​工作正常。

# elasticsearch - 如何将html文件的转储索引到elasticsearch？

> ID：13647406
> 
> 赞同：8
> 
> 时间：2012-11-30T14:45:33.553
> 
> 标签：elasticsearch

我对弹性完全陌生，所以我的知识仅来自[弹性搜索](http://www.elasticsearch.org/guide/reference/api/index_.html)网站，我需要帮助。我的任务是将 html 格式的大行数据索引到弹性搜索中。我已经抓取了我的数据并将其存储到磁盘上（200 000 个 html 文件）。我的问题是将所有 html 文件索引到 elasticsearch 中的最简单方法是什么？我是否应该手动为每个文档提出对弹性的放置请求？例如像：

```
curl -XPUT 'http://localhost:9200/registers/tomas/1' -d '{
    "user" : "tomasko",
    "post_date" : "2009-11-15T14:12:12",
    "field 1" : "field data"
    "field 2" : "field 2 data"
}' 
```

第二个问题是我是否必须解析 HTML 文档以检索 JSON 字段 1 的数据，如示例代码中的？

最后，索引后我可以删除所有 HTML 文档吗？谢谢大家。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T20:45:59.730

我会查看允许您在单个请求中发送多个文档的[批量 API](https://www.elastic.co/guide/en/elasticsearch/reference/current/docs-bulk.html)，以加快您的索引过程。您可以批量发送 10、20 个或更多文档，具体取决于它们的大小。

根据您要索引的内容，您可能需要解析 html，除非您想将整个 html 索引为单个字段（在这种情况下，您可能希望使用[html strip char 过滤器](https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis-htmlstrip-charfilter.html)从索引中去除 html 标签文本）。

建立索引后，我建议确保映射正确，并且您可以找到所需的内容。您始终可以使用 elasticsearch 在后台存储的[_source](https://www.elastic.co/guide/en/elasticsearch/reference/current/mapping-source-field.html)特殊字段重新索引，但如果您已经编写了索引器代码，您可能希望在需要时再次使用它来重新索引（当然使用相同的 html 文档）。在实践中，你永远不会索引你的数据一次......所以要小心:) 即使弹性搜索总是帮助你使用 _source 字段），它只是查询现有索引并在另一个索引上重新索引其所有文档的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-18T00:29:30.453

@javanna 建议查看 Bulk API 肯定会引导您朝着正确的方向前进。如果您使用 NEST，您可以将所有对象存储在一个列表中，然后您可以序列化 JSON 对象以索引内容。

具体来说，如果您想在索引和存储内容之前去除 html 标记，您可以使用映射器附件插件 - 当您定义映射时，您可以将 content_type 分类为“html”。

映射器附件对很多事情都很有用，尤其是在您处理多种文档类型时，但最值得注意的是 - 我相信仅使用它来去除 html 标签就足够了（您不能使用 html_strip 字符过滤器来做到这一点）。

只是一个警告 - 不会存储任何 html 标签。因此，如果您确实需要这些标签，我建议您定义另一个字段来存储原始内容。另一个注意事项：您不能为映射器附件文档指定多字段，因此您需要将其存储在映射器附件文档之外。请参阅下面的工作示例。

您需要生成此映射：

```
{
  "html5-es" : {
    "aliases" : { },
    "mappings" : {
      "document" : {
        "properties" : {
          "delete" : {
            "type" : "boolean"
          },
          "file" : {
            "type" : "attachment",
            "fields" : {
              "content" : {
                "type" : "string",
                "store" : true,
                "term_vector" : "with_positions_offsets",
                "analyzer" : "autocomplete"
              },
              "author" : {
                "type" : "string",
                "store" : true,
                "term_vector" : "with_positions_offsets"
              },
              "title" : {
                "type" : "string",
                "store" : true,
                "term_vector" : "with_positions_offsets",
                "analyzer" : "autocomplete"
              },
              "name" : {
                "type" : "string"
              },
              "date" : {
                "type" : "date",
               "format" : "strict_date_optional_time||epoch_millis"
              },
              "keywords" : {
                "type" : "string"
              },
              "content_type" : {
                "type" : "string"
              },
          "content_length" : {
                "type" : "integer"
              },
              "language" : {
                "type" : "string"
              }
            }
          },
          "hash_id" : {
            "type" : "string"
          },
          "path" : {
            "type" : "string"
          },
          "raw_content" : {
            "type" : "string",
            "store" : true,
            "term_vector" : "with_positions_offsets",
            "analyzer" : "raw"
          },
          "title" : {
            "type" : "string"
          }
        }
      }
    },
    "settings" : { //insert your own settings here },
    "warmers" : { }
  }
} 
```

这样在 NEST 中，我将按如下方式组装内容：

```
Attachment attachment = new Attachment();
attachment.Content =   Convert.ToBase64String(File.ReadAllBytes("path/to/document"));
attachment.ContentType = "html";

Document document = new Document();
document.File = attachment;
document.RawContent = InsertRawContentFromString(originalText); 
```

我在 Sense 中对此进行了测试 - 结果如下：

```
"file": {
    "_content": "PGh0bWwgeG1sbnM6TWFkQ2FwPSJodHRwOi8vd3d3Lm1hZGNhcHNvZnR3YXJlLmNvbS9TY2hlbWFzL01hZENhcC54c2QiPg0KICA8aGVhZCAvPg0KICA8Ym9keT4NCiAgICA8aDE+VG9waWMxMDwvaDE+DQogICAgPHA+RGVsZXRlIHRoaXMgdGV4dCBhbmQgcmVwbGFjZSBpdCB3aXRoIHlvdXIgb3duIGNvbnRlbnQuIENoZWNrIHlvdXIgbWFpbGJveC48L3A+DQogICAgPHA+wqA8L3A+DQogICAgPHA+YXNkZjwvcD4NCiAgICA8cD7CoDwvcD4NCiAgICA8cD4xMDwvcD4NCiAgICA8cD7CoDwvcD4NCiAgICA8cD5MYXZlbmRlci48L3A+DQogICAgPHA+wqA8L3A+DQogICAgPHA+MTAvNiAxMjowMzwvcD4NCiAgICA8cD7CoDwvcD4NCiAgICA8cD41IDA5PC9wPg0KICAgIDxwPsKgPC9wPg0KICAgIDxwPjExIDQ3PC9wPg0KICAgIDxwPsKgPC9wPg0KICAgIDxwPkhhbGxvd2VlbiBpcyBpbiBPY3RvYmVyLjwvcD4NCiAgICA8cD7CoDwvcD4NCiAgICA8cD5qb2c8L3A+DQogIDwvYm9keT4NCjwvaHRtbD4=",
    "_content_length": 0,
    "_content_type": "html",
    "_date": "0001-01-01T00:00:00",
    "_title": "Topic10"
},
"delete": false,
"raw_content": "<h1>Topic10</h1><p>Delete this text and replace it with your own content. Check your mailbox.</p><p> </p><p>asdf</p><p> </p><p>10</p><p> </p><p>Lavender.</p><p> </p><p>10/6 12:03</p><p> </p><p>5 09</p><p> </p><p>11 47</p><p> </p><p>Halloween is in October.</p><p> </p><p>jog</p>"
},
"highlight": {
"file.content": [
    "\n    <em>Topic10</em>\n\n    Delete this text and replace it with your own content. Check your mailbox.\n\n     \n\n    asdf\n\n     \n\n    10\n\n     \n\n    Lavender.\n\n     \n\n    10/6 12:03\n\n     \n\n    5 09\n\n     \n\n    11 47\n\n     \n\n    Halloween is in October.\n\n     \n\n    jog\n\n  "
    ]
} 
```

# javascript - 选择国家后填充县列表

> ID：13647416
> 
> 赞同：2
> 
> 时间：2012-11-30T14:45:56.097
> 
> 标签：javascript, jquery, html-select

我有一个旧的 JavaScript 代码，它应该允许用户首先选择一个国家，然后激活该国家选项的县列表。加载时，国家选项显示为 ANY，县标签选项应显示先选择选择国家，但事实并非如此。只有当用户先选择一个国家然后返回选择 ANY 时，才会出现先选择一个县的条件。

我一点也不擅长 JavaScript，更不用说 jQuery。如何纠正现有的 js，甚至用更好的精益代码实现我想要的？

提前谢谢你的帮助。

```
<div>
  <label id="country">Country of birth:</label>
  <select name="country"  tabindex="7" onchange="populateCountiesDropdown(this[this.selectedIndex].value);">
    <option value="">Any</option>
    <option value="ENGLAND">England</option>
    <option value="IRELAND">Ireland</option>
    <option value="SCOTLAND">Scotland</option>
    <option value="WALES">Wales</option>
  </select>
  <script type="text/javascript">
        setSelect(document.main.country, '');
</script> 
</div>
<div>
  <label id="county">County of birth:</label>
  <select name="county"  tabindex="8">
  </select>
  <script type="text/javascript">
    populateCountiesDropdown(document.main.country.value);
    setSelect(document.main.county, "");
</script> 
</div>
<script type="text/javascript">
    var counties_dropdown = new Array(); 

        counties_dropdown["ENG"] = new Array("   |All counties in country" ,"BDF|Bedfordshire","BRK|Berkshire","BKM|Buckinghamshire","CAM|Cambridgeshire","CHI|Channel Islands","CHS|Cheshire","CON|Cornwall","CUL|Cumberland","DBY|Derbyshire","DEV|Devon","DOR|Dorset","DUR|Durham","ESS|Essex","GLS|Gloucestershire","HAM|Hampshire","HEF|Herefordshire","HRT|Hertfordshire","HUN|Huntingdonshire","IOM|Isle of Man","KEN|Kent","LAN|Lancashire","LEI|Leicestershire","LIN|Lincolnshire","LND|London","MDX|Middlesex","NFK|Norfolk","NTH|Northamptonshire","NBL|Northumberland","NTT|Nottinghamshire","OXF|Oxfordshire","RUT|Rutlandshire","SAL|Shropshire","SOM|Somerset","STS|Staffordshire","SFK|Suffolk","SRY|Surrey","SSX|Sussex","WAR|Warwickshire","WES|Westmorland","WIL|Wiltshire","WOR|Worcestershire","YKS|Yorkshire" );

        counties_dropdown["IRL"] = new Array("   |All counties in country" ,"ANT|Antrim","ARM|Armagh","CAR|Carlow","CAV|Cavan","CLA|Clare","COR|Cork","LDY|Derry (Londonderry)","DON|Donegal","DOW|Down","DUB|Dublin","FER|Fermanagh","GAL|Galway","KER|Kerry","KID|Kildare","KIK|Kilkenny","OFF|Kings (Offaly)","LET|Leitrim","LIM|Limerick","LOG|Longford","LOU|Louth","MAY|Mayo","MEA|Meath","MOG|Monaghan","NAI|Nairnshire","LEX|Queens (Laois)","ROS|Roscommon","SLI|Sligo","TIP|Tipperary","TYR|Tyrone","WAT|Waterford","WEM|Westmeath","WEX|Wexford","WIC|Wicklow" );

        counties_dropdown["SCT"] = new Array("   |All counties in country" ,"ABD|Aberdeenshire","ARL|Argyllshire","AYR|Ayrshire","BAN|Banffshire","BEW|Berwickshire","BUT|Buteshire","CAI|Caithness","CLK|Clackmannanshire","DFS|Dumfriesshire","DNB|Dunbartonshire","FIF|Fife","ANS|Forfarshire (Angus)","ELN|Haddingtonshire (East Lothian)","INV|Invernessshire","KCD|Kincardineshire","KRS|Kinrossshire","KKD|Kirkcudbrightshire","LKS|Lanarkshire","WLN|Linlithgowshire (West Lothian)","MLN|Midlothian","MOR|Morayshire","PEE|Peeblesshire","PER|Perthshire","RFW|Renfrewshire","ROC|Ross and Cromarty","ROX|Roxburghshire","SEL|Selkirkshire","SHI|Shetland Islands","STI|Stirlingshire","SUT|Sutherland","WIG|Wigtownshire" );

        counties_dropdown["WLS"] = new Array("   |All counties in country" ,"AGY|Anglesey","BRE|Brecknockshire","CAE|Caernarvonshire","CGN|Cardiganshire","CMN|Carmarthenshire","DEN|Denbighshire","FLN|Flintshire","GLA|Glamorganshire","MER|Merionethshire","MON|Monmouthshire","MGY|Montgomeryshire","PEM|Pembrokeshire","RAD|Radnorshire" );

    function populateCountiesDropdown(formObj, country) {
        formObj.county.options.length = 0;
        if(country == "") {
            formObj.county.options[0] = new Option('Choose a country first', '');
            return;
        }
        for(i = 0; i < counties_dropdown[country].length; i++) {
            var option = new Option(counties_dropdown[country][i].substr(counties_dropdown[country][i].indexOf('|')+1), 
                                    counties_dropdown[country][i].substr(0,counties_dropdown[country][i].indexOf('|')));
            formObj.county.options[i] = option;
        }
        formObj.county.options[0].value = '';
    }
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T14:56:35.373

有很多不同的方法可以解决这个问题，但一种简单的方法是在 HTML 中硬编码初始状态，然后在需要时用 Javascript 覆盖它。

```
<select name="county"  tabindex="8">
  <option>Choose a country first</option>
</select> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T15:25:23.023

正如您在评论中所建议的那样，使用 jQuery 肯定会使这段代码更易于阅读。但是，在我看来，您可以进行的最佳优化是在您的县数据结构中：将其设为地图，而不是项目由竖线字符分隔的数组，然后您必须对其进行拆分。那是：

```
 var counties = {
    'ENGLAND': {
      'BDF': 'Bedfordshire',
      'BRK': 'Berkshire',
      ...
    },
    'IRELAND': {
      'ANT': 'Antrim',
      'ARM': 'Armagh',
      ...
    },
    'SCOTLAND': {
      'ABD': 'Aberdeenshire',
      'ARL': 'Argyllshire',
      ...
    },
    'WALES': {
      'AGY': 'Anglesey',
      'BRE': 'Brecknockshire',
      ...
    }
  }; 
```

您现在可以使用国家/地区选择值中的键来驱动它并填充县下拉列表。要查看国家/地区的变化，您可以使用 jQuery 的`.change()`功能。

我建议阅读[jQuery API](http://api.jquery.com)文档并进行试验。让 SO 用户回答您的问题，您不会进步太多！但是，也就是说，这是我的工作解决方案：http: [//jsfiddle.net/pfYEb/](http://jsfiddle.net/pfYEb/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T15:31:24.397

给你，也添加了一些评论。测试工作。

```
<script type="text/javascript">
    var counties_dropdown = new Array();
    counties_dropdown["ENG"] = new Array("   |All counties in country", "BDF|Bedfordshire", "BRK|Berkshire", "BKM|Buckinghamshire", "CAM|Cambridgeshire", "CHI|Channel Islands", "CHS|Cheshire", "CON|Cornwall", "CUL|Cumberland", "DBY|Derbyshire", "DEV|Devon", "DOR|Dorset", "DUR|Durham", "ESS|Essex", "GLS|Gloucestershire", "HAM|Hampshire", "HEF|Herefordshire", "HRT|Hertfordshire", "HUN|Huntingdonshire", "IOM|Isle of Man", "KEN|Kent", "LAN|Lancashire", "LEI|Leicestershire", "LIN|Lincolnshire", "LND|London", "MDX|Middlesex", "NFK|Norfolk", "NTH|Northamptonshire", "NBL|Northumberland", "NTT|Nottinghamshire", "OXF|Oxfordshire", "RUT|Rutlandshire", "SAL|Shropshire", "SOM|Somerset", "STS|Staffordshire", "SFK|Suffolk", "SRY|Surrey", "SSX|Sussex", "WAR|Warwickshire", "WES|Westmorland", "WIL|Wiltshire", "WOR|Worcestershire", "YKS|Yorkshire");
    counties_dropdown["IRL"] = new Array("   |All counties in country", "ANT|Antrim", "ARM|Armagh", "CAR|Carlow", "CAV|Cavan", "CLA|Clare", "COR|Cork", "LDY|Derry (Londonderry)", "DON|Donegal", "DOW|Down", "DUB|Dublin", "FER|Fermanagh", "GAL|Galway", "KER|Kerry", "KID|Kildare", "KIK|Kilkenny", "OFF|Kings (Offaly)", "LET|Leitrim", "LIM|Limerick", "LOG|Longford", "LOU|Louth", "MAY|Mayo", "MEA|Meath", "MOG|Monaghan", "NAI|Nairnshire", "LEX|Queens (Laois)", "ROS|Roscommon", "SLI|Sligo", "TIP|Tipperary", "TYR|Tyrone", "WAT|Waterford", "WEM|Westmeath", "WEX|Wexford", "WIC|Wicklow");
    counties_dropdown["SCT"] = new Array("   |All counties in country", "ABD|Aberdeenshire", "ARL|Argyllshire", "AYR|Ayrshire", "BAN|Banffshire", "BEW|Berwickshire", "BUT|Buteshire", "CAI|Caithness", "CLK|Clackmannanshire", "DFS|Dumfriesshire", "DNB|Dunbartonshire", "FIF|Fife", "ANS|Forfarshire (Angus)", "ELN|Haddingtonshire (East Lothian)", "INV|Invernessshire", "KCD|Kincardineshire", "KRS|Kinrossshire", "KKD|Kirkcudbrightshire", "LKS|Lanarkshire", "WLN|Linlithgowshire (West Lothian)", "MLN|Midlothian", "MOR|Morayshire", "PEE|Peeblesshire", "PER|Perthshire", "RFW|Renfrewshire", "ROC|Ross and Cromarty", "ROX|Roxburghshire", "SEL|Selkirkshire", "SHI|Shetland Islands", "STI|Stirlingshire", "SUT|Sutherland", "WIG|Wigtownshire");
    counties_dropdown["WLS"] = new Array("   |All counties in country", "AGY|Anglesey", "BRE|Brecknockshire", "CAE|Caernarvonshire", "CGN|Cardiganshire", "CMN|Carmarthenshire", "DEN|Denbighshire", "FLN|Flintshire", "GLA|Glamorganshire", "MER|Merionethshire", "MON|Monmouthshire", "MGY|Montgomeryshire", "PEM|Pembrokeshire", "RAD|Radnorshire");

    function populateCountiesDropdown(country) {
        // get the html element
        var select = document.getElementById("county");

        // remove all options from select
        select.options.length = 0;

        if (country == "") {
            select.options[0] = new Option('Choose a country first', '');
            return;
        }
        for (i = 0; i < counties_dropdown[country].length; i++) {

            // split the element of county array
            // for example after split county array will contain
            // county[0] = 'BDF',
            // county[1] = 'Bedfordshire',
            var county = counties_dropdown[country][i].split('|');

            // add a new option to the select by inserting it to the index of length
            // note that length is zero based, so current length would be the index that you need to
            // add the new option.
            select.options[select.options.length] = new Option(county[1], county[0]);
        }
    }
</script>
<div>
    <label for="country">Country of birth:</label>
    <select id="country" name="country" tabindex="7" onchange="populateCountiesDropdown(this[this.selectedIndex].value);">
        <option value="" selected="selected">Any</option>
        <option value="ENG">England</option>
        <option value="IRL">Ireland</option>
        <option value="SCT">Scotland</option>
        <option value="WLS">Wales</option>
    </select>
</div>
<div>
    <label for="county">County of birth:</label>
    <select id="county">
        <option value=""> Choose a country first</option>
    </select>
</div> 
```

# xml - 如何使用通过xml获取未知数量参数的动态sql？

> ID：13647417
> 
> 赞同：1
> 
> 时间：2012-11-30T14:46:00.807
> 
> 标签：xml, oracle, dynamic, parameters, ref-cursor

尽管我通过谷歌阅读了这个论坛和许多其他论坛，但我仍然遇到问题。也许有人可以给我一个提示。我必须在 oracle 10g 中创建一个提供`Cursor`结果的 ref 的过程。此结果可以通过参数过滤，该参数包含`String`xml 格式。

结构是

```
 <filter>
    <columnNameToSearch>
       SearchValue
    </columnNameToSearch>
 </filter> 
```

因为我不知道哪些列会被过滤，所以我将它动态连接起来，如下所示。但是由于 Sql Injection 的可能性，我想参数化过滤器部分。

```
CREATE OR REPLACE PROCEDURE TEST_GET_VALUES(p_recordset OUT SYS_REFCURSOR,    
p_xml    IN VARCHAR2 DEFAULT '<filter />')
AS
p_roleId ROLES.ROLE_ID%TYPE;
p_xmlDocument dbms_xmldom.DOMDocument;
p_xmlNode dbms_xmldom.DOMNode;
p_filterNodes dbms_xmldom.DOMNodeList;
p_nodeName          VARCHAR2(50);
p_nodeValue         VARCHAR2(50);
p_filterNodesLength NUMBER;
p_sqlStatement      VARCHAR2(4000);
p_filterStatement   VARCHAR2(4000);
BEGIN
p_xmlDocument := dbms_xmldom.newDOMDocument(XMLTYPE(p_xml));
p_xmlNode     := dbms_xmldom.makeNode(dbms_xmldom.getDocumentElement(p_xmlDocument));
p_filterNodes       := dbms_xmldom.getChildNodes(p_xmlNode);
p_filterNodesLength := DBMS_XMLDOM.getLength(p_filterNodes);
FOR i               IN 0 .. p_filterNodesLength - 1
LOOP
p_xmlNode   := DBMS_XMLDOM.item(p_filterNodes, i);
p_nodeName  := DBMS_XMLDOM.getNodeName(p_xmlNode);
p_nodeValue := DBMS_XMLDOM.getNodeValue(DBMS_XMLDOM.getFirstChild(p_xmlNode));
p_filterStatement := p_filterStatement || ' AND ' || p_nodeName || ' = ' || p_nodeValue;
END LOOP;

p_sqlStatement := 'SELECT firstname, lastname, phone FROM myTable WHERE 1 = 1 ' || p_filterStatement;
OPEN p_recordset FOR p_sqlStatement;
END TEST_GET_VALUES; 
```

我尝试使用 dbms_sql 包，但无法让它工作。也许有人可以给我一个例子，或者给我提示该怎么做。

# java - 检查日历日期是否为星期日

> ID：13647422
> 
> 赞同：11
> 
> 时间：2012-11-30T14:46:24.313
> 
> 标签：java, date, calendar

我试图弄清楚如何让我的程序计算一周中的星期日数。

我尝试了以下事情：

```
if (date.DAY_OF_WEEK == date.SUNDAY) {
    System.out.println("Sunday!");
} 
```

然而它似乎不起作用？

当我尝试时，`System.out.Println the date.DAY_OF_WEEK`我得到：`7`

有谁知道我如何检查当前日历日期是否为星期日？

**更新更多信息**

1.  首先是 date.DAY_OF_WEEK 是一个 Calendar 对象！

2.  我确保将日历对象设置`date`为星期天

我得到 7 的系统输出是当我尝试运行时它返回给我的内容，`date.DAY_OF_MONTH`即使它设置为星期天

**亚历克斯的第二次更新**

这或多或少是我的代码

```
Calendar startDate = Calendar.getInstance();

    startDate.set(2012, 12, 02);
    if (startDate.get(Calendar.DAY_OF_WEEK) == Calendar.SUNDAY) {
        System.out.println("true");
    }else {
        System.out.println("FALSE");
    } 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-30T14:47:50.367

```
Calendar cal = ...;
if (cal.get(Calendar.DAY_OF_WEEK) == Calendar.SUNDAY) {
    System.out.println("Sunday!");
} 
```

`Calendar.DAY_OF_WEEK`始终等于`7`无论`Calendar`您使用什么实例（[请参阅此链接](http://docs.oracle.com/javase/7/docs/api/constant-values.html#java.util.Calendar.DAY_OF_WEEK)），它都是一个常量，用于与`Calendar.get()`检索正确值的方法一起使用。

调用`Calendar.get(Calendar.DAY_OF_WEEK)`它会返回真正的星期几。`Calendar`此外，您会在类中找到有用的值`Calendar.SUNDAY`（以及其他日期和月份），以便您在代码中更加明确并避免错误，例如`JANUARY`等于`0`.

**编辑**

就像我说的那样，`Calendar`该类确实包含有用的常量供您使用。`12`它们没有开始的月份编号`0`（见上文），Java 日期处理中的`DECEMBER`月份编号也是如此。`11`

```
Calendar startDate = Calendar.getInstance();
startDate.set(2012, Calendar.DECEMBER, 02);
if (startDate.get(Calendar.DAY_OF_WEEK) == Calendar.SUNDAY) {
    System.out.println("true");
} else {
    System.out.println("FALSE");
} 
```

当然会打印`true`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T09:10:40.897

**注意：** Joda [-Time](http://joda-time.sourceforge.net/)项目现在处于维护模式。如果您不必使用旧代码，请参阅[此答案。](https://stackoverflow.com/a/55466522/1288408)

* * *

如果您必须经常使用日期或时间，您可能想尝试使用[Joda-Time](http://joda-time.sourceforge.net/)。

您的代码将如下所示：

```
LocalDate startDate = new LocalDate(2012, 12, 2);
int day = startDate.dayOfWeek().get();   // gets the day of the week as integer

if (DateTimeConstants.SUNDAY == day) {
    System.out.println("It's a Sunday!");
} 
```

您还可以从以下位置获取文本字符串`dayOfWeek()`：

```
String dayText = startDate.dayOfWeek().getAsText(); 
```

将返回字符串“Sunday”。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-04-02T03:22:18.933

# .net - NServiceBus 与 MassTransit

> ID：13647423
> 
> 赞同：94
> 
> 时间：2012-11-30T14:46:28.250
> 
> 标签：.net, nservicebus, esb, masstransit

我正在为有关 NServiceBus 和 MassTransit 的优缺点列表而苦苦挣扎。

现在我知道这里已经有一个线程，但它并没有真正回答我的问题。

这是我到目前为止所读到的：

1.  NServiceBus，是的，它已获得许可，而且不是免费提供的。
2.  MassTransit，是的，它是开源的，但文档似乎有些欠缺。

NServiceBus 较旧，并且有更多参考。很难找到有关 MassTransit 的信息，但我很开放。但是我必须提供一个可靠的解决方案，所以我不得不问。

所以，请有这两个框架经验的人。我为什么要选择 NServiceBus？或者 我为什么要选择 MassTransit？

是性能、安全性、规模还是？

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2012-12-01T20:45:37.493

如果我必须总结一下，这就是我要说的：

如果您需要商业支持，请选择 NServiceBus。如果您对使用论坛作为支持手段感到满意，MassTransit 是一个不错的选择。到目前为止，开发人员对我们的问题非常敏感。如果您选择 MassTransit，现在您将在 MSMQ 和 RabbitMQ 之间进行选择。如果您需要 DTC，请使用 MSMQ。如果您想要更多功能和更好的管理，请使用 RabbitMQ。

在我们的项目中，我们从 NServiceBus 切换到 MassTransit 有两个原因：

1.  大众运输是免费的
2.  我们喜欢 RabbitMQ

* * *

这两个框架我都用过。我使用 MassTransit 的时间比使用 NServiceBus 的时间长。这是我看到的亮点。

成本：

*   MassTransit 获得 Apache 2.0 许可，可免费用于商业生产用途，而 NServiceBus 则不是。

支持：

*   正如 Udi 提到的，有一个商业 NServiceBus 支持选项，我还没有看到 MassTransit 支持。

运输：

*   MassTransit 支持 MSMQ 和 RabbitMQ
*   ~~NServiceBus 仅支持 MSMQ~~ RabbitMQ 在 NServiceBus 4+ 中被支持

RabbitMQ 与 MSMQ：

*   MSMQ 支持 DTC（分布式事务协调器），用于涉及潜在多台机器（例如 SQL 服务器、Windows 服务）上的多个进程的事务
*   RabbitMQ 具有出色的[管理界面](http://www.rabbitmq.com/management.html)
*   MSMQ 存在的时间更长，是 Microsoft 的产品
*   RabbitMQ 是较新的、开源的、免费的，由 VMWare 赞助
*   MSMQ 默认安装在大多数 Windows 机器上

Udi Dahan 和 MassTransit 的人（Chris Patterson、Dru Sellers 和 Travis Smith）都是才华横溢的人。

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2012-12-01T15:09:49.150

作为 NServiceBus 的原作者，我可能对自己的技术有点偏颇，但我会尽量保持平衡。

**[运输支持](https://docs.particular.net/transports/)**

NServiceBus 和 MassTransit 都支持[RabbitMQ](https://docs.particular.net/transports/rabbitmq/)和[Azure Service Bus](https://docs.particular.net/transports/azure-service-bus/)，但 NServiceBus 也支持：

*   [亚马逊 SQS](https://docs.particular.net/transports/sqs/)
*   [Azure 存储队列](https://docs.particular.net/transports/azure-storage-queues/)
*   [SQL Server（使用普通表）](https://docs.particular.net/transports/sql/)
*   [MSMQ](https://docs.particular.net/transports/msmq/)

**关于 RabbitMQ 的话题**

可以说 NServiceBus 对 RabbitMQ 有更强的支持——例如，在它的[延迟交付功能](https://docs.particular.net/transports/rabbitmq/delayed-delivery)中，而 Mass Transit[声明](http://masstransit-project.com/MassTransit/usage/scheduling/rabbitmq-delayed.html)他们的“插件仍被认为是实验性的。它由 MassTransit 支持，但我们不能保证除了插件之外的任何东西保证自己。”

我们还与 RabbitMQ 团队密切合作，[为 .net SDK 做出贡献，以](https://github.com/rabbitmq/rabbitmq-dotnet-client/issues/251)造福整个生态系统。

**谈到 Azure 服务总线**

我们与 Azure 服务总线团队的合作水平更高，[他们的 .net 核心 SDK 有超过 70 个 PR](https://github.com/Azure/azure-service-bus-dotnet/pulls?q=is%3Apr%20author%3ASeanFeldman)。

当您使用 NServiceBus 时，您将受益于该知识的全部深度。

**工装**

这是最大的不同。

一旦你建立了一个实质性的系统，了解所有不同的移动部件如何相互通信就变得非常重要。[除了通过诊断源](http://masstransit-project.com/MassTransit/usage/monitoring/diagnostic-source.html)与 Application Insights 或 Open Trace 等第 3 方工具进行小规模集成外，MassTransit 在这方面没有太多优势。

NServiceBus 周围的服务平台走得更远，使您能够使用[ServiceInsight](https://docs.particular.net/serviceinsight/#sequence-diagram)查看所有端点的序列图：

[![使用 ServiceInsight 的序列图](../Images/7064334219f7f8b9f9fe86ed723009ac.png)](https://i.stack.imgur.com/SJyPt.png)

您还可以获得所有端点和消息的逻辑视图：

[![NServiceBus 系统的逻辑视图](../Images/743c98f75fc176b0d74493c8476dbb0a.png)](https://i.stack.imgur.com/Hx7TP.png)

从本质上讲，您可以获得系统架构的实时文档。

**管理与监控**

这是 MassTransit 没有太多资源的另一个领域。当您集成的第 3 方系统变得不可用并且系统中的一堆消息最终进入错误队列时，MassTransit 的唯一解决方案是让您稍后使用[RabbitMQ Shovel 插件](https://stackoverflow.com/questions/48952398/masstransit-how-should-i-handle-error-queues)手动将这些消息移回。

NServiceBus 周围的服务平台包括对该错误队列的监控、用于查看这些错误原因的图形工具，以及重放这些失败消息的组并*查看它们实际上是否*在一个简单的 Web 应用程序中得到成功处理的能力称为[ServicePulse](https://docs.particular.net/servicepulse/intro-failed-messages)。

[![使用 ServicePulse 进行消息分组失败](../Images/4b5b10c90359ec23b3ad1f0a775e2d7e.png)](https://i.stack.imgur.com/ugtvH.png)

还有定期运行的健康检查的可视化，可以在消息开始失败之前提供问题的早期警告。

最后，平台中提供了[性能监控](https://particular.net/real-time-monitoring)：

[![NServiceBus 性能监控](../Images/f5d5d7a8a26e0713a5f77b9c052fd6b2.png)](https://i.stack.imgur.com/lZDYb.png)

在生产支持方面，您确实获得了完整的软件包。

**长期支持和向后兼容性**

虽然 Mass Transit 的人一直非常擅长帮助任何在[Gitter](https://gitter.im/MassTransit/MassTransit)或他们的[Google Group](https://groups.google.com/forum/#!forum/masstransit-discuss)上对此有疑问的人，但我认为他们不会为旧版本提供错误修复。当您的生产系统已经存在了几年，并且您不能一直升级所有内容时，这开始变得很重要。

NServiceBus[支持包括](https://docs.particular.net/nservicebus/upgrades/support-policy)：

*   每个主要版本 2 年以上
*   额外 2 年的[扩展支持](https://docs.particular.net/nservicebus/upgrades/support-policy#extended-support-for-nservicebus-version-5)
*   保证对关键问题的响应时间
*   24x7 可用性

**咨询与培训**

从线下的角度来看，NServiceBus 上有世界各地的公共课程，还有许多顾问可以被带到现场来启动项目或在出现问题时提供帮助。我听说有几家公司决定从 MassTransit 切换到 NServiceBus，因为他们在需要时无法派人到现场。

**许可**

有些人仍然不知道 NServiceBus 是[免费供个人使用和初创公司使用的](https://particular.net/licensing)。

[![免费供个人使用和初创公司使用](../Images/d9f8488fd5d987521707c435d5e1972f.png)](https://i.stack.imgur.com/huDZQ.png)

在[商业用途](https://particular.net/licensing)方面，NServiceBus 周围的许可模型非常灵活，正如广泛的客户所表明的那样，并且可以很好地证明管理的合理性。当然，使用 MassTransit，许可是免费的。

希望在某种程度上有所帮助。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2019-02-15T14:33:17.910

我知道现在回答这个问题已经很晚了，但是为了可折叠性，我不得不提到[Rebus](https://github.com/rebus-org/Rebus)（我恰好是它的主要作者）。

Rebus 现在大约 8 岁了，它从一开始就被用来转移资金和控制发电厂。

它支持大多数基本的队列系统，如 MSMQ、RabbitMQ、Azure 服务总线、Azure 存储队列、Amazon SQS 等，但它也支持更有趣的东西，如使用 MSSQL、PostgreSQL 和 Oracle 作为传输。

[文档 wiki](https://github.com/rebus-org/Rebus/wiki)相当全面，尽管很多人似乎都过得去，因为 Rebus 的 API 很容易被发现。

Rebus 一直（并且将永远）完全免费。它是 MIT 许可的，因此您基本上可以随心所欲地使用它。

如果您最终成为一名认真的 Rebus 用户，并且您需要正式的支持协议和额外的工具，您可以订阅[Rebus Pro](https://rebus.fm/rebus-pro/)，它由[Rebus FM](https://rebus.fm/)（Rebus 背后的公司）提供。

上面提到的“额外工具”目前以[Fleet Manager](https://rebus.fm/services/fleet-manager/)的形式出现，它可以帮助解决问题。例如，Fleet Manager*完全替换了错误队列*，因此失败的消息被存储在那里。这意味着在 Fleet Manager 中单击几下即可随时查看、管理和重试失败的消息。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2020-06-22T13:41:57.517

只是为了给出一个更新的答案，我已经在这两个生态系统中进行了专业开发，它们现在都支持广泛的 MQ 技术和 .NET Core。

几年前我在一个新的云产品上使用了 NServicebus，我们需要当时 Mass Transit 不支持的 .NET Core。我不得不说 - 作为开发人员使用它是一件很可爱的事情，有很多不错的单线，很棒的工具/监控和文档非常好。

提供各种级别的支持和许可，有一次我们需要一些帮助，质量很好。

* * *

我在一家新公司使用了几个月的 Mass Transit，他们更喜欢拥有一个免费的开源库。旅程有点坎坷——机器翻译的文档有些地方缺乏，很多例子/问题已经过时了。高级功能的范围也不大，但您可能不需要它们的用例。

不过它工作得很好，而且 MT 开发人员似乎付出了很多努力来支持他们的 OSS——远远超出了您的合理预期。

因此，就我个人而言，我的 TLDR 将是 - 如果您的公司能够被说服支付 NServicebus，则购买 NServicebus，但 MT 是一种可用的替代方案，并且您可以免费获得最好的。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-12-01T05:27:01.810

您总是可以使用 Shuttle (FOSS)：[https](https://github.com/Shuttle/shuttle-esb) ://github.com/Shuttle/shuttle-esb :)

文档（不断改进）：[http ://shuttle.github.io/shuttle-esb/](http://shuttle.github.io/shuttle-esb/)

Shuttle 项目已经进行了将近 2 年，并用于生产系统。这将是一个选择与你产生共鸣的问题。

NServiceBus 有良好的记录。我以前在生产系统（1.9）上使用过它，但自从它商业化（我开始使用 Shuttle 时）之后就没有使用过。

我还没有尝试过大众运输。

我想您的所有选项都将具有基础知识（命令/事件/发布-订阅）。然而，NServiceBus 确实有 sagas 和数据总线的东西，尽管我认为它很容易处理服务总线本身之外的数据，例如在您的端点消息处理程序中。我不知道 MassTransit 是否有 sagas/data 总线，但 Shuttle 肯定没有。

另一个考虑因素可能是您打算如何使用服务总线。如果它要成为产品的一部分，那么对于 NServiceBus 等商业选项，您需要考虑对产品用户的成本影响，尽管它仍然是内部开发需要考虑的事情，但它当然可以有道理。

# java - 如何从 java 应用程序 mvn deploy-deploy:file

> ID：13647427
> 
> 赞同：1
> 
> 时间：2012-11-30T14:46:40.123
> 
> 标签：java, maven-3, maven-embedder

我正在尝试使用 java 程序中的 maven-embedder 3.0.4 将文件部署到本地存储库，但出现以下错误：

```
Failed to execute goal org.apache.maven.plugins:maven-deploy-plugin:2.7:deploy-file
(default-cli) on project test: Failed to deploy artifacts/metadata: No connector available   
to access repository local (file://~/.m2/repository) of type default 
using the available factories 
```

我正在尝试使用 MavenCli.doMain(String[], String, PrintStream, PrintStream) 函数来实现这一点，但似乎我无法使其工作。

任何帮助将不胜感激。另外，如果有另一种从 java 程序部署文件的方法，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T17:21:55.053

我建议使用[Aether](https://docs.sonatype.org/display/AETHER/Home)而不是 Maven 嵌入器。来源在[github 上](https://github.com/sonatype/sonatype-aether)。

# java - 使用套接字发送 TCP/IP 命令

> ID：13647428
> 
> 赞同：0
> 
> 时间：2012-11-30T14:46:47.233
> 
> 标签：java, android, sockets, tcp, telnet

我对 Java 完全陌生，并且正在慢慢学习基础知识，如果这听起来很愚蠢，我深表歉意。

我正在尝试创建一个应用程序，单击按钮即可将特定命令发送到某个 IP 和端口。端口将固定在端口 32，但 IP 将从 Intent 中获取。

```
public class IPControl extends Activity {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // Get the message from the intent
    Intent intent = getIntent();
    String message = intent.getStringExtra(IPEntry.ACTUALIP); 
```

这是迄今为止得到的。

它将需要连接到 IP 发送“Root”（用户名）命令，然后等待回复，然后发送另一个命令“Root”（密码），然后等待另一个回复，然后在建立连接后，我希望能够在按钮单击时发送更多命令。

我绞尽脑汁在网上搜索了几天，似乎找不到正确的解决方案。

我将正确地学习 Java，它在我要做的事情清单上，但这对我首先完成至关重要。

如果有人可以提供帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T14:53:35.363

这是 android 中 TCP/IP 工作类型的完整示例

[TCP/IP](http://www.edumobile.org/android/android-development/socket-programming/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T14:55:45.243

Java 与此关系不大。

在客户端，您必须使用Android平台提供的网络工具。例如，如果要使用 HTTP (web) 协议，请参见：http: [//developer.android.com/reference/android/net/http/package-summary.html](http://developer.android.com/reference/android/net/http/package-summary.html)。

在服务器端，您需要有一个 HTTP 服务器来接受您的调用并处理它们。您可以使用 Sinatra 轻松构建类似的东西：[http](http://www.sinatrarb.com/) ://www.sinatrarb.com/ 。如果您不喜欢基于 Ruby 的框架，例如 Sinatra，您可以轻松找到许多其他基于 Java 的框架（但 Java 对于此任务要复杂得多）。

BTW：您尝试构建的工具通常称为“身份验证系统”或“登录系统”。

# delay - qTip 2：延迟显示前触发隐藏？

> ID：13647430
> 
> 赞同：0
> 
> 时间：2012-11-30T14:46:48.527
> 
> 标签：delay, show-hide, qtip2

我在使用 qTip 2 时遇到了一个烦人的小交互问题。我页面上的一个按钮附有一个提示，设置为延迟`mouseover`后出现`500ms`并立即消失`mouseout`。

单击按钮时，整个视图会发生变化，并且该特定按钮会消失，因此我强制提示立即隐藏（否则，它会一直徘徊，直到用户移动鼠标，即使触发它的按钮不再可见）。

问题是如果它恰好首先发生，立即`hide`事件似乎不会取消延迟事件。`show`换句话说，如果用户指向按钮并在 小于 时单击它`500ms`，则`hide`事件触发（什么都不做），*然后*事件在`show`触发`500ms`，即使按钮不再存在（并且错误）也会导致工具提示显示位置启动，因为它无法在按钮不可见的情况下正确定位自身）。

当我触发`hide`事件时，有没有办法告诉它停在那里而不执行任何其他事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T17:27:48.903

*未测试*

您可以使用 show 事件来检查按钮是否可见，如果不可见则不显示它....

像这样的东西：

```
 events: {
       show: function(event, api) {
           var target = event.originalEvent.target;
           if($("#idOfButton").length === 0 ) {
              event.preventDefault();
              //or try this (commednt the above and uncomment the code below)
              //clearTimeout(api.timers.custom);  
           }
       }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T21:57:44.913

我这样解决了（@Daniel，你的答案很接近，所以我也会支持你）：

```
events: {
    show: function(event, api) {
        if ($("#mybutton").is(':hidden')) {
            try { event.preventDefault(); } catch(e) {}
        }
    }
}; 
```

这是[qTip 文档](http://craigsworks.com/projects/qtip2/tutorials/events/#stop)推荐的方法。

# java - 如何将 http 会话的角色传递给 websocket？

> ID：13647431
> 
> 赞同：2
> 
> 时间：2012-11-30T14:46:48.417
> 
> 标签：java, session, tomcat, websocket

在我的情况（tomcat）中，我使用 tomcat-users.xml 来管理用户和角色之间的链接

```
<tomcat-users>
    <role rolename="role1"/>
    <role rolename="role2"/>
    <user password="tomcat" roles="tomcat" username="tomcat"/>
    <user password="123456" roles="role1,role2" username="user1"/>
</tomcat-users> 
```

并且 web.xml 配置如下：

```
<listener>
    <listener-class>com.WebSocketServletListener</listener-class>
</listener>
<security-constraint>
    <display-name>Tomcat Server Configuration Security Constraint</display-name>
    <web-resource-collection>
      <web-resource-name>Protected Area</web-resource-name>     
      <url-pattern>/application.jsp</url-pattern>           
    </web-resource-collection>
    <auth-constraint>
      <role-name>role1</role-name>
    </auth-constraint>
</security-constraint>
<login-config>
    <auth-method>FORM</auth-method>
    <realm-name>Cloud Authentication</realm-name>
    <form-login-config>
      <form-login-page>/login.jsp</form-login-page>
      <form-error-page>/error.jsp</form-error-page>
    </form-login-config>
</login-config> 
```

与应用程序的连接有两个步骤：

1.  我通过“login.jsp”记录我的应用程序，将我引向我的应用程序“application.jsp”的单个页面。在 application.jsp 我可以知道与 request.isUserInRole("role1"); 连接的用户的角色；

2.  application.jsp 使用服务器打开一个 WebSocket，该 webSocket 创建一个 session.java。所有通信都将通过 WebSocket 完成。问题出在 webSocket 的上下文中，我不知道我的用户的角色。

在 webSocket 的会话中恢复所有用户信息的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T22:00:04.727

我不知道您在 JSP 中使用的是什么，如果您使用的是 Tomcat Websocket 类，当您使用

```
createWebSocketInbound

protected abstract StreamInbound createWebSocketInbound(String subProtocol,
                                                        HttpServletRequest request) 
```

您可以阅读`HttpServletRequest request`，您应该能够获取所有握手数据并将连接映射到用户。它应该与 JSP 请求具有相同的上下文，但为了提高安全性，您可能应该`HttpServletRequest request`直接在您编写的代码中处理 webSocket 连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T17:25:38.403

WebSockets 连接以正常的 HTTP 请求/响应开始，因此您应该能够像往常一样从中收集所有相关的用户详细信息。

# javascript - 最准确的 jQuery 转换时间翻译延迟

> ID：13647432
> 
> 赞同：0
> 
> 时间：2012-11-30T14:46:49.793
> 
> 标签：javascript, jquery

所以; 我听说 jQuery 转换延迟时间的公平翻译可能是 1000 = 1 秒。

**这是最准确/近似的翻译方式吗？**

*EG*：看下面的脚本；我正在尝试将延迟/动画转换为最近似的秒/毫秒。

```
onReady=function(){
    $('#chart1_lines').delay(1000).animate({ width:97 }, 1000, 'easeOutQuad', onComplete1 );
}

onComplete1=function () {
    $('#chart1_values').css('width',156);
    $('#chart1_lines').delay(250).animate({ width:183 }, 1000, 'easeOutQuad', onComplete2 );
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T14:56:54.780

这些值 - `1000`,`250`等 - 是以毫秒为单位的时间/持续时间，因此每 1000 精确等于 1 秒。

# sql - 如何在存储过程中获取sql错误

> ID：13647437
> 
> 赞同：11
> 
> 时间：2012-11-30T14:47:02.067
> 
> 标签：sql, sql-server, tsql, sql-server-2005, stored-procedures

我正在使用 SQL Server 2005。我创建了一个大部分时间都可以工作的存储过程，但我发现了一个实例，它不能满足我的要求。

目前，代码做了这样的事情

```
if @@error <> 0
  begin
   select @message_error = "There was a database error adding product "+ @product + " to product line
  end 
```

哪里`@message_error`是输出变量。

所以，我可以`select @@error`得到一个数字，但我真正想要的只是 SQL 错误。

像*嘿，我不能这样做，因为此列*或其他内容上有 fk 约束。[我在 msdn http://msdn.microsoft.com/en-us/library/ms178592(v=sql.90).aspx](http://msdn.microsoft.com/en-us/library/ms178592(v=sql.90).aspx)上找到了这篇文章

但它只会抛出自定义异常`RAISERROR`，我不想创建自己的错误消息或异常，我只想知道为什么东西不起作用。我可以通过 Management Studio 执行存储过程并查看确切的 SQL 错误，但是尝试匹配来自站点的数据并以这种方式手动插入它是很乏味的。

如何将 SQL 错误文本放入输出变量？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-30T15:05:22.680

这是我使用的存储过程模板的一部分：

```
/*  CREATE PROCEDURE...  */

DECLARE
  @ErrorMessage   varchar(2000)
 ,@ErrorSeverity  tinyint
 ,@ErrorState     tinyint

/*  Additional code  */

BEGIN TRY

/*  Your code here  */

END TRY

BEGIN CATCH
    SET @ErrorMessage  = ERROR_MESSAGE()
    SET @ErrorSeverity = ERROR_SEVERITY()
    SET @ErrorState    = ERROR_STATE()
    RAISERROR(@ErrorMessage, @ErrorSeverity, @ErrorState)

    BREAK
END CATCH

/*  Further cleanup code  */ 
```

Try/Catch 块可能很棘手，但比 @@error 更彻底。更重要的是，您可以在其中使用各种 error_xxx() 函数。在这里，我将正确的错误消息存储在变量 @ErrorMessage 中，以及足以重新引发错误的其他数据。从这里，可以使用任意数量的选项；您可以将@ErrorMessage 设为输出变量，测试并处理特定错误，或构建您自己的错误消息（或调整现有错误消息以使其更清晰——您可能会因为发现您想要执行此操作的频率而感到恼火）。其他选项将显示它们。

需要注意的地方：在某些情况下，SQL 会背靠背抛出两条错误消息......并且`error_message()`只会捕获最后一条，通常会说“尝试创建对象失败”，真正的错误在第一条错误消息。这是构建您自己的错误消息的地方。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-30T15:00:09.430

您可以使用一般的 Try/Catch，然后在 CATCH 部分中构造有关错误的更多详细信息，例如

```
DECLARE @DetailedErrorDesc VARCHAR(MAX)
BEGIN TRY

--tsql code goes here

END TRY
BEGIN CATCH

SELECT @DetailedErrorDesc =         
  CAST(ERROR_NUMBER() AS VARCHAR) + ' : '+
  CAST(ERROR_SEVERITY() AS VARCHAR) + ' : ' +
  CAST(ERROR_STATE() AS VARCHAR) + ' : ' +
  ERROR_PROCEDURE() + ' : ' +
  ERROR_MESSAGE() + ' : ' +
  CAST(ERROR_LINE() AS VARCHAR);

--Now you can decide what to do with the detailed error message....return it or log it etc

END CATCH 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-30T15:01:06.353

使用 try ... catch 并在 catch 块中可以使用 ERROR_MESSAGE()、ERROR_LINE()、ERROR_PROCEDURE()、ERROR_STATE()、ERROR_SEVERITY()、ERROR_NUMBER() 函数

# django - django-guardian get_objects_for_group

> ID：13647450
> 
> 赞同：1
> 
> 时间：2012-11-30T14:48:18.323
> 
> 标签：django, django-guardian

将行级权限集成到所有模型中的最佳方法是什么，以便列出会导致简单的 JOIN？

我希望有一个像这样的快捷方式来返回我一个查询集

```
from guardian.shortcuts import get_objects_for_group
get_objects_for_group(GROUP_ID, 'view_invoice').
    filter(status__in=[InvoiceStatus.Issued, InvoiceStatus.Created]) 
```

这个调用产生的不仅仅是查询

# objective-c - OS X 上的 NSWindow 和 iOS 上的 UIView 一样吗？

> ID：13647453
> 
> 赞同：2
> 
> 时间：2012-11-30T14:48:50.217
> 
> 标签：objective-c, macos, cocoa

自 iOS3 以来，我一直是 iOS 开发人员。我决定尝试 Mac 开发，但我遇到了很多不同之处。所以我有几个问题。

1.  iOS 上是 NSWindow == UIView 吗？如果是这样，控制器类是什么？（即 UIViewController）。

2.  有谁知道一些来自 iOS 背景的 Mac 开发者的好教程？谷歌今天没有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T14:55:38.160

[NSWindow](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSWindow_Class/Reference/Reference.html)与[UIView](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)不同（[NSView](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSView_Class/Reference/NSView.html)更接近 UIView）。查看链接的开发人员文档以了解差异。

当我从 iOS 转到 OS XI 时，我得到了Hillegass 和 Preble的[Cocoa Programming for Mac OS X （亚马逊英国链接）的副本。](http://www.amazon.co.uk/dp/0321774086)我跳过了关于 Objective-C 基础的第一部分，主要集中在 UI 差异上。特别是 NSTableViews 与 UITableViews 大不相同。几天后，我对自己的应用有了足够的了解，并且将这本书用作参考书。

此外，开发者文档就是你的圣经。我下载了[DocSets](https://itunes.apple.com/us/app/docsets/id509945577?mt=8)应用程序（4.99 美元的 App Store 链接 -[也可在 GitHub 上获得](https://github.com/omz/DocSets-for-iOS)），以便在我的 iPad 上查看它，并在开发时将它放在我的 Macbook 旁边。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T14:56:17.413

看看开发者网站。例如，[今天开始开发 Mac 应用程序](https://developer.apple.com/library/mac/#referencelibrary/GettingStarted/RoadMapOSX/chapters/01_Introduction.html)。

您了解 Objective-C、Cocoa 哲学和开发环境。所以你会很快地完成这个，你会很容易看到差异。这是一个基本的教程演练 - 但有很多相关部分的链接可供您阅读。

留意 Cocoa Bindings - 它不在 iOS 上，但对于编写桌面应用程序非常有用。

**从对另一个答案的评论中跟进**

与屏幕上只有一个窗口但视图很多的 iOS 不同，桌面使用更多的窗口。从 iOS 视图和控制器范式的角度思考会受到限制。查看[Windows 编程指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/WinPanel/Introduction.html#//apple_ref/doc/uid/10000031i)以帮助您入门。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T15:40:58.947

2的答案。

你可以参考很多网站，我想和你分享我的学习过程。

我开始学习这些...

斯坦福讲座 CS193

琳达的视频

Aaron Hillegas 的 Mac OS X 的 Cocoa 编程

Cocoadevcentral.com

最后一个当然是 Stack Overflow……这是解决你所有疑惑的最佳场所。

# c# - 按 foreach 错误分组

> ID：13647455
> 
> 赞同：1
> 
> 时间：2012-11-30T14:48:53.270
> 
> 标签：c#, asp.net, exception, razor, asp.net-mvc-4

我在 Razor 中有 foreach 循环，它遍历`group by`-ed 元素，所以每个元素都必须有一个 Key 属性，但它会抛出异常：

```
'object' does not contain a definition for 'Key' 
```

![笏](../Images/cf53b37d639444c14b48e6d1d5a4ff90.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T15:04:20.220

尝试将循环更改为

```
foreach(IGrouping<T1, T2> g in ViewBag.Links)
{
    ...
} 
```

替换分组键和值的实际类型。

# c# - c# windows 窗体中的 Rijndael 密码错误

> ID：13647456
> 
> 赞同：0
> 
> 时间：2012-11-30T14:48:59.130
> 
> 标签：c#, visual-studio-2010, encryption

我目前有兴趣进一步提高我在加密和解密方面的编程技能，并找到了许多 Rijndael 密码的示例。

我开始在 C# 中编写自己的程序，我单击我的加密按钮，该按钮打开一个对话框窗口以允许我选择一个文件....到目前为止一切正常

我选择一个文件，并逐步执行我的代码，我得到我的文件的根路径，生成一个密钥，然后我开始将我的纯文本转换为密文......这就是我遇到问题的地方。

```
 try
        {
            OpenFileDialog dialog = new OpenFileDialog();
            dialog.Filter = "All Files (*.*)|";
            dialog.InitialDirectory = @"Desktop";
            dialog.Title = "Please select a file to encrypt.";

            dialog.ShowDialog();

            inputFile = dialog.FileName;
            outputFile = inputFile;

            string password = @"secrets"; // key to encrypt files
            UnicodeEncoding UE = new UnicodeEncoding();
            byte[] key = UE.GetBytes(password);

            string cryptFile = outputFile;
            FileStream fsCrypt = new FileStream(cryptFile, FileMode.Create);

            RijndaelManaged RMCrypto = new RijndaelManaged();

            CryptoStream cs = new CryptoStream(fsCrypt,
                RMCrypto.CreateEncryptor(key, key),
                CryptoStreamMode.Write);

            FileStream fsIn = new FileStream(inputFile, FileMode.Append);

            int data;
            while ((data = fsIn.ReadByte()) != -1)
                cs.WriteByte((byte)data);

            fsIn.Close();
            cs.Close();
            fsCrypt.Close();
        }
        catch(Exception ex)
        {
            MessageBox.Show(ex.ToString());
        }
    } 
```

当我到达这段代码时问题就来了

```
 CryptoStream cs = new CryptoStream(fsCrypt,
                RMCrypto.CreateEncryptor(key, key),
                CryptoStreamMode.Write); 
```

我得到的错误是 system.windows.forms.mouseeventargs 有人可以帮我吗？

编辑！！！这是我的错误的实际错误消息。指定的初始化向量（IV）与该算法的块大小不匹配。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T15:59:07.087

这是一些代码，它打开所选文件并使用随机文件名在同一目录中加密。

```
private void button1_Click(object sender, EventArgs e)
    {
        try
        {
            var dialog = new OpenFileDialog
                {
                    Filter = "All Files (*.*)|",
                    InitialDirectory = @"Desktop",
                    Title = "Please select a file to encrypt."
                };

            dialog.ShowDialog();

            string inputFile = dialog.FileName;

            // NOTE: The password should not be hardcoded in here
            const string password = @"secrets";

            var fileInfo = new FileInfo(inputFile);

            if(fileInfo.Directory != null)
            {
                string cryptFile = Path.Combine(fileInfo.Directory.ToString(),
                                                Path.GetRandomFileName());

                using (var rijndael = InitSymmetric(Rijndael.Create(), password, 256))
                {

                    using(var fsCrypt = new FileStream(cryptFile, FileMode.Create))
                    {
                        using (var cs = new CryptoStream(fsCrypt,
                                                         rijndael.CreateEncryptor(),
                                                         CryptoStreamMode.Write))
                        {
                            using (var fsIn = new FileStream(inputFile, FileMode.Open))
                            {
                                int data;

                                while ((data = fsIn.ReadByte()) != -1)
                                {
                                    cs.WriteByte((byte)data);
                                }
                            }
                        }
                    }
                }
            }

        }
        catch(Exception ex)
        {
            MessageBox.Show(ex.ToString());
        }
    }

    public static SymmetricAlgorithm InitSymmetric(SymmetricAlgorithm algorithm, string password, int keyBitLength)
    {
        // NOTE: Salt is for example purposes, would not normally have this in here.
        var salt = new byte[] { 1, 3, 66, 234, 73, 48, 134, 69, 250, 6 };
        const int iterations = 10000;

        var rfc2898DeriveBytes = new Rfc2898DeriveBytes(password, salt, iterations);

        if (!algorithm.ValidKeySize(keyBitLength))
            throw new InvalidOperationException("Invalid size key");
        algorithm.Key = rfc2898DeriveBytes.GetBytes(keyBitLength / 8);
        algorithm.IV = rfc2898DeriveBytes.GetBytes(algorithm.BlockSize / 8);
        return algorithm;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T15:01:39.573

> 我得到的错误是 system.windows.forms.mouseeventargs 有人可以帮我吗？

查看 catch 语句。您没有指定一个变量来保存异常，但在您内部使用`e`. 由于您在事件处理程序中，因此 e 已被声明为方法的参数。

您的捕获应如下所示：

```
 catch (Exception ex)
    {
        // now ex holds your exception
    } 
```

> 指定的初始化向量 (IV) 与此算法的块大小不匹配。

用于`GenerateIV`创建有效的 IV。如果要指定自己的 IV，请确保它适合算法的块大小。在这种情况下：16 字节

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T16:33:07.983

您将密码直接放入密钥和 IV 中。那是错误的做法。

1.  对于每个加密，IV 应该是随机且不同的。使用自动生成的 IV 并将其与密文一起存储。
2.  使用真正的密钥，而不是密码。或者通过 PBKDF2 发送密码和盐，请求 16 个输出字节并将它们用作密钥。

# openstreetmap - OpenStreetMap：如何显示一个国家的地区边界？

> ID：13647458
> 
> 赞同：1
> 
> 时间：2012-11-30T14:49:03.133
> 
> 标签：openstreetmap

我需要显示一个国家的地区边界加上该地区的主要城市。稍后，我想根据我的应用程序（本机 C++）计算的一些值对区域进行着色。

由于任务的最低预算，我可能想使用 OpenStreetMap。但我对地理事物很陌生，还有很多新东西要学。我需要一些提示从哪里开始。

感谢您的时间和经验，

彼得

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T17:25:41.957

您只需使用 openstreetmap 提供的众多工具之一来编辑相应的地图。

看看[http://wiki.openstreetmap.org/wiki/Main_Page](http://wiki.openstreetmap.org/wiki/Main_Page)

在这里：[http](http://wiki.openstreetmap.org/wiki/Editing) ://wiki.openstreetmap.org/wiki/Editing 。

您可以在查看 openstreetmap（Potlach：[http](http://wiki.openstreetmap.org/wiki/Potlatch_2) ://wiki.openstreetmap.org/wiki/Potlatch_2 ）网络上的地图时使用在线编辑器和一些基于桌面的工具，例如 Merkaartor：

[http://merkaartor.be/](http://merkaartor.be/)

完整列表在这里：

[http://wiki.openstreetmap.org/wiki/Comparison_of_editors](http://wiki.openstreetmap.org/wiki/Comparison_of_editors)

只要确保您在地图中添加有意义的、无版权的数据，因为它将是每个人都会使用的同一张地图（全世界！）。

如果您需要一个私有版本的 openstreetmap（即：只对您的用户可见的地图），您将必须托管您自己的图块/地图服务器。这需要硬件、软件、技能和时间。

无论如何，请查看论坛和 openstreetmap 的邮件列表，并与那里的人交谈。您将获得项目所需的所有信息。

如果您需要构建地图查看器或类似的东西，请查看 QuantumGIS（基于 C++ 和 Qt 的地图查看器和编辑器）以及由 openstreetmap 社区创建的基于桌面的程序。最有可能的是，您可以找到可以使用的东西。至少，您会发现一些代码可用作起点或工作示例。QGIS在这里：

[http://www.qgis.org/](http://www.qgis.org/)

# java - 如何在朴素贝叶斯垃圾邮件过滤器中实现信息检索技术？

> ID：13647463
> 
> 赞同：1
> 
> 时间：2012-11-30T14:49:18.680
> 
> 标签：java, machine-learning, information-retrieval, bayesian

我已经实现了一个朴素贝叶斯垃圾邮件过滤器，它在给定的数据集上学习，然后将任何新输入预测为垃圾邮件或火腿。但现在我想将信息检索技术纳入其中，以提高过滤器的有效性。例如，更正拼写错误，例如如果写了 v1agra 而不是 viagra 或写了 m0rtgage，那么朴素贝叶斯应该更正它，它不应该在概率计算中产生任何问题。

任何好的教程或一些将信息检索技术与 Java 中的实现结合起来的工作都会有很大的帮助。

还有什么其他技术可以用来提高过滤器的有效性？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T02:01:02.697

您要查找的内容称为[词干提取](http://en.wikipedia.org/wiki/Stemming)。这通常用于消除诸如“walking”与“walked”之类的差异（Porter Stemmer 会将这两个词都转换为“walk”）。在您的情况下，您想设置一些规则来消除大部分垃圾邮件噪音（删除所有非字母字符？使所有单词小写等）

# c++ - 如何检查用户是否输入了整数

> ID：13647467
> 
> 赞同：1
> 
> 时间：2012-11-30T14:49:30.650
> 
> 标签：c++, int

如果用户输入的是整数而不是字符或字符串，我需要检查我的程序。字符并不是那么糟糕，因为它实际上是一个整数，但是如果用户输入一个字符序列，那么它就会发疯。

我做了这个功能

```
int* ask_lung(int* lung)
{
int tmp; // length of a word

cout << "Inserisci la lunghezza della parola da indovinare: ";
cin >> tmp;

if(cin)
{
    // Se i è uguale a o minore di 0 allora ritorna all'inizio

    if(tmp <= 0)
    {
        cout << endl << "\tNon puoi inserire 0." << endl << endl;
        ask_lung(lung);
    }
    else
    {
                    // the error is about here, when it reaches this part of the code it keeps showing the first line "Inserisci la lunghezza della parola da indovinare: "
        *lung = tmp;
    }
}
else ask_lung(lung);

return lung;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T14:54:33.943

如果是字符串，您的流包含大量无效字符，您需要将这些字符的流刷新到新状态。与其递归地这样做，不如在循环中这样做。这对你来说就足够了。

```
while(true)
{
  cout << "Please Enter an Integer" << endl ;
  if (cin >> temp)  //true if a leading integer has entered the stream
    break ;
  else
  {
    cout << "Invalid Input" << endl ;
    cin.clear() ;
    cin.ignore(std::numeric_limits<streamsize> :: max(), '\n') ;
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T15:05:47.297

您可以[`std::all_of`](http://en.cppreference.com/w/cpp/algorithm/all_any_none_of)与[`std::isdigit`](http://en.cppreference.com/w/cpp/algorithm/all_any_none_of)as 一起使用：

```
std::string input;
std::cin >> input;

if ( std::all_of(input.begin(), input.end(), std::isdigit) )
{
     //input is integer
} 
```

或者，如果您想测试并且还想要整数，那么最好使用`input`as `int`，正如其他答案所建议的那样。`std::stoi`如果您已经（阅读）了该字符串，则可以考虑使用。请注意，错误时[`std::stoi`](http://en.cppreference.com/w/cpp/string/basic_string/stol)会引发异常。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-30T14:56:02.237

输入被正确处理，问题是您正在返回一个指向局部变量的指针。该变量在堆栈上，一旦函数返回，它将被释放。相反，您应该只返回整数本身，而不是指向它的指针。

编辑：我看到实际上您并没有返回指向整数的指针，而是分配给指针指向的整数。不过，最好只返回整数本身。

# firefox - Firefox XUI 文本框在插件内自动完成？

> ID：13647471
> 
> 赞同：0
> 
> 时间：2012-11-30T14:49:47.743
> 
> 标签：firefox, firefox-addon

我正在为 Firefox 创建一个标记插件，并希望一个文本框以类似于 Firefox 自己的书签弹出窗口上的“标签”字段的方式自动完成。这可能吗？

如果 XUI 文本框组件无法做到这一点，是否可以在 chrome 上的某处有“普通”表单组件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T17:24:05.397

是的，这可以通过 XUL`<textbox type="autocomplete" autocompletesearch="...">`组件实现。

您至少必须创建一个生成自动完成结果的 XPCOM 组件。当前值和`autocompletesearchparam`属性都提供给搜索组件，然后它可以在必要时使用它来影响结果。

有一个[MDN 文档](https://developer.mozilla.org/en-US/docs/How_to_implement_custom_autocomplete_search_component)，虽然它可能有点过时了。

# javascript - 添加简单静态的原因是什么 tag via document.write()?

[问问题](https://stackoverflow.com/questions/ask)问问题 2012-11-30T14:50:09.380325 次This question shows research effort; it is useful and clear11This question does not show any research effort; it is unclear or not usefulBookmark this question.Show activity on this post.

I just looked at the page source of a [random app page](http://apptivate.ms/apps/28/metrose) on apptivate.ms and noticed this JavaScript in the `<head>`:

```
<script type="text/javascript">
 document.write("<style type=\"text/css\">.app-description { max-height: 600px }</style>");
</script> 
```

It is obviously totally static on the client side so I wonder what the use-case there is. Since they Stack Exchange developers (who are behind apptivate.ms) are pretty smart I'm *sure* there is some reason for it, but I can't figure out which. I guess it's related to delaying the rule from becoming active until the whole document is loaded but I'd expect the rule to be applied as soon as the browser "sees" the new tag...

[javascript](/tags/javascript "show questions tagged 'javascript'")[html](/tags/html "show questions tagged 'html'")[css](/tags/css "show questions tagged 'css'")4

## 2 回答 2

This answer is useful9

It's because part of the content of the `.app-description` element is hidden, and can be shown by clicking a "Show more" button.

If JavaScript is disabled, the button won't work, so if the style in question was directly in the stylesheet, you could never see the rest of the content. By adding that style in the `<head>`, with JavaScript, it ensures that users with JS enabled will not see all the content at once, but will instead get the "enhanced" experience, and those *without* JS enabled will still be able to use the site.

Here's a screenshot when JS is enabled. The "show more" button uses JavaScript to expand the element to full height:

![enter image description here](https://i.stack.imgur.com/EPllU.png)

This is a nice approach to progressive enhancement - by using `document.write` to insert the new `style` element inside the `head` you avoid any possible flash of unstyled content (in this case, the developers could have waited until DOM ready and then used JavaScript to add the `maxHeight` property dynamically, but that would have resulted in users seeing the full height briefly before the JavaScript executed on DOM ready).

于 2012-11-30T14:55:00.030 回答This answer is useful2

This is known as "progressive" enhancement. Basically, the notion is simple; don't assume that everyone will have JavaScript enabled, even if 98% of them will...but if they do, let's do some nice things with it.

The idea is to have your **DOM** (HTML) in place and working without the explicit **NEED** to have JS enabled to use it.

Then, if the JS loads (which it would have to in this case to add that style) you can target an element with a specific class name. In this case, it is `.app-description`. If you don't have JS on, the item in question remains unaffected.

Hope that makes some sense :)

**EDIT**: Now, you could still load a JS file that does some CSS things, but the reason it is placed IN the script tag itself on the page, is because you can then avoid the HTTP request all-together if it isn't needed.

于 2012-11-30T15:03:46.140 回答

#### Related

[1](/questions/12644653 "Question score (upvotes - downvotes)")[database-design - 将没有模式的文件加载到数据库](/questions/12644653)[1](/questions/12644657 "Question score (upvotes - downvotes)")[objective-c - init 方法中常用的基本 Objective-C 语法](/questions/12644657)[2](/questions/12644658 "Question score (upvotes - downvotes)")[asp.net - 什么时候使用 FileUpload 控件上传文件？](/questions/12644658)[1](/questions/12644663 "Question score (upvotes - downvotes)")[jquery - 追加下一页而不是在jquery mobile中重新加载](/questions/12644663)[2](/questions/12644666 "Question score (upvotes - downvotes)")[php - 设置基于 MySQL 值选择的下拉列表](/questions/12644666)[1](/questions/12644669 "Question score (upvotes - downvotes)")[php - 检测 MYsql 表中的单词数量](/questions/12644669)[1](/questions/12644670 "Question score (upvotes - downvotes)")[guava - 番石榴和 javafx](/questions/12644670)[1](/questions/12644671 "Question score (upvotes - downvotes)")[jdbc - 单击 JButton 以创建数据库时线程“AWT-EventQueue-0”java.lang.NullPointerException 中的异常](/questions/12644671)[2](/questions/12644673 "Question score (upvotes - downvotes)")[objective-c - 结构如何通过值传递？](/questions/12644673)[1](/questions/12644684 "Question score (upvotes - downvotes)")[android - 包含拉丁字符的 URL 的 FileNotFoundException](/questions/12644684)

#### Reference

[php](https://php.github.net.cn) × 1429865[c/c++](https://c-cpp.com) × 756500[nginx](https://nginx.github.net.cn) × 49975[mongodb](https://mongodb.net.cn) × 159057[mybatis](https://mybatis.net.cn) × 3233[anaconda](https://anaconda.org.cn) × 13410[pycharm](https://pycharm.net.cn) × 14671[python](https://python.github.net.cn) × 1902243[vscode](https://vscode.github.net.cn) × 56040[docker](https://dockerdocs.cn) × 110988[github](https://github.net.cn) × 49000[flask](https://flask.github.net.cn) × 49129[ffmpeg](https://ffmpeg.github.net.cn) × 24037[jmeter](https://jmeter.net) × 16910[matplotlib](https://matplotlib.net) × 63493[bootstrap](https://getbootstrap.net) × 54641[](https://stackoverflow.com)

##### [Stack Overflow 中文网](https://stackoverflow.org.cn)

遵从 CC BY-SA 知识共享许可协议。

> ID：13647477
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

# c# - AzureStorage 库 v2 中的“tableClient.CreateTableIfNotExist”在哪里？

> ID：13647479
> 
> 赞同：11
> 
> 时间：2012-11-30T14:50:15.183
> 
> 标签：c#, azure, azure-table-storage, azure-storage

在 Windows Azure 存储中，我们曾经这样做来创建一个表：

```
var tableClient = account.CreateCloudTableClient();
tableClient.CreateTableIfNotExist(TableName); 
```

我刚刚下载了 azure storage library (v2) 的最新版本，我之前的代码不再工作了：

> “Microsoft.WindowsAzure.Storage.Table.CloudTableClient”不包含“CreateTableIfNotExist”的定义，并且找不到接受“Microsoft.WindowsAzure.Storage.Table.CloudTableClient”类型的第一个参数的扩展方法“CreateTableIfNotExist”。

v2 中的好代码是什么？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-30T14:50:15.183

在 v2 中有一些重大变化。这是新代码：

```
 var tableClient = account.CreateCloudTableClient();
    // Create the table if it doesn't exist.
    var cloudTable = tableClient.GetTableReference(TableName);
    cloudTable.CreateIfNotExists(); 
```

一些好的输入：

*   如何使用表存储服务：在[v1.7](https://www.windowsazure.com/en-us/develop/net/how-to-guides/table-services-v17/)和[v2](https://www.windowsazure.com/en-us/develop/net/how-to-guides/table-services/)中。
*   Azure 存储团队的[Windows Azure 存储客户端库 2.0 重大更改和迁移指南](http://blogs.msdn.com/b/windowsazurestorage/archive/2012/10/29/windows-azure-storage-client-library-2-0-breaking-changes-amp-migration-guide.aspx)

# sql - sql server 2005 中“=”附近的语法不正确。Where 子句中的 case 语句出错

> ID：13647481
> 
> 赞同：1
> 
> 时间：2012-11-30T14:50:18.950
> 
> 标签：sql, sql-server, sql-server-2005

我想在 where 子句中使用 case 语句，但在下面的查询中出现错误。

```
where 
 (r.WeekId=@WeekId or @WeekId is null) and
 (ShiftId=@ShiftId or @ShiftId is null)
 and (placeid=@PlaceId or @PlaceId is null)
 and (r.StatusId=3)
 AND     
CASE WHEN @day = 1 THEN ((firstday=@time and (allocateddays is null or NOT (AllocatedDays  LIKE '%1%')))) 
 WHEN @day = 2 THEN ((secondday=@time and (allocateddays is null or NOT (AllocatedDays LIKE '%2%'))))  
 WHEN @day = 3 THEN ((thirdday=@time  and (allocateddays is null or NOT (AllocatedDays LIKE '%3%')))) 
 ELSE AND (1 = 1) 
END 
```

我在第行的 Case 语句中遇到错误 `CASE WHEN @day = 1`。我的查询出了什么问题。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T14:53:10.110

`CASE`应该重写为一个`OR`链，每个链都用于它的`@day = n`一个条件，因为它`CASE`被期望返回一个值。它不能在`WHERE`子句中有条件地执行。

如果条件类似`@day = 1`返回，则它与语句的其余部分一起`TRUE`用作布尔值。`AND`这些中的每一个都链接`OR`到前一个。

```
where 
 (r.WeekId=@WeekId or @WeekId is null) and
 (ShiftId=@ShiftId or @ShiftId is null)
 and (placeid=@PlaceId or @PlaceId is null)
 and (r.StatusId=3)
 /* I *think* I have the () groups correct here... There's an unnecessary double (()) around firstday|secondday|thirddad */
 AND (
   (@day = 1 AND ((firstday=@time and (allocateddays is null or NOT (AllocatedDays  LIKE '%1%')))))
   OR (@day = 2 AND ((secondday=@time and (allocateddays is null or NOT (AllocatedDays LIKE '%2%')))))
   OR (@day = 3 AND ((thirdday=@time  and (allocateddays is null or NOT (AllocatedDays LIKE '%3%')))))
   /* Not certain if this is necessary in your case, as a catch-all to replace your ELSE */
   OR (@day NOT IN (1,2,3) AND 1=1) 
 ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T14:57:17.433

在`WHERE`子句中，该`CASE`语句只能用于指定比较的替代值，如下所示：

```
where @day = 
    case @SomeCondition
        when 1 then @Sunday
        when 2 then @Monday
        ...
    end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T15:40:29.833

你不可能`ELSE AND...`没有编译器来处理这个问题（Fortran 等语言除外）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T14:55:11.287

错误的一件事是您在 where 子句中的 CASE 语句正在分配值。例如，当您这样做时`firstdaay=@time`。你不能那样做。您只能将表达式放在计算为`true`or的 where 子句中`false`，仅此而已。结果，您的整个 where 子句是错误的，坦率地说，对我来说没有多大意义。

条款中的那些条件`where`似乎更属于`select`条款：

```
select ... 
case when @day=1  and (allocateddays is null or NOT (AllocatedDays  LIKE '%1%') then firstday=@time else null end as first_day,
case when @day=2 and (allocateddays is null or NOT (AllocatedDays LIKE '%2%') then secondday=@time else null end as second_day

from ... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-30T15:00:01.050

这行：ELSE AND (1 = 1) 看起来非常可疑。拿出来试试。

# c - 双核 x86 可以处理字节级并发访问（？）还有谁？

> ID：13647483
> 
> 赞同：-1
> 
> 时间：2012-11-30T14:50:26.730
> 
> 标签：c, linux, caching, multiprocessing, shared-memory

我编写了以下代码，由多个进程并行执行：

```
// spawn 10 times with id=0..9 by a master process.
void slave_processing(int id)
{
  SHARED_TYPE last=id;
   for(;;) {
     /* each slave operates on a specific byte of the shared array. */
     if (shared[id]!=last) fprintf(stderr,"S%i expected %i\n",id,last);
     shared[id]+=id;
     last+=id;
     if (last>10*id) {last=0; shared[id]=0;}
   }
} 
```

它们都使用相同的（IPC/linux）共享内存，但每个都访问数组的一个单独条目。它可以在我的双核机器上完美运行，无论是 when `SHARED_TYPE`is`int`还是`char`. 我使用积极优化 (-O3) 进行编译并检查组装的二进制文件以确认内存引用是针对`shared[id]`访问执行的，并且寄存器用于`last`.

然而，我很困惑。我曾预料到，在某个时候，来自一个核心的影响字节可能不会反映在来自另一个核心的缓存内容上。例如，一个核心可能在缓存中有 [xxyyzzuu] 并将 [xxyyZZuu] 写回内存，而同时另一个核心已将内存字升级为 [XXyyzzuu]（假设每对 char 是我的 32 位字中的一个字节） .

linux是否在做一些神奇的设置，以便`shmget`无法缓存获得的内存？或者是否正在进行一些低级缓存同步以确保核心#1 可以读取核心#2 的最新修改以更新所选字节而不会产生讨厌的副作用？

是否有任何其他（多核）架构您知道上述代码会在哪里失败（输入 fprintf）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T15:25:54.897

该代码假定编译器不会缓存（例如，将内存中的内容一次读入寄存器并继续使用寄存器而不是内存）它在循环中干预的任何值，但会为每次读取从共享段。为确保所有部分都能看到写入内存的数据，`shared`应使用内存屏障访问数组。

`shared`虽然依赖于编译器，但如果你是易失性的，它通常会进行内存获取。

由于您调用 fprintf()，编译器必须假定 fprintf() 可以访问或更新`shared`数组中的某些内容 - 毕竟，编译器不知道 fprintf() 做了什么，所以理论上它可以访问全局数组，编译器是需要重新获取该内存`shared`（除非它可以证明 fprintf 无法更新它）

`shared`如果不是 volatile ，您的代码可能会有不同的行为，而您例如这样做

```
SHARED_TYPE last=id;
int wrong = 0,i;
for(i = 0; i < 10000000;i++) {
  if (shared[id]!=last) wrong++;
  shared[id]+=id;
  last+=id;
  if (last>10*id) {last=0; shared[id]=0;}
}
return wrong; 
```

编译器不需要执行内存获取来获取`shared[id]`每次迭代的最新值。再说一次，如果编译器确实缓存了一个值，它可能只是旋转循环，一次又一次地检查相同的正确事物，而不会从内存中获取更新的值，从而使`wrong`= 0 符合预期。无论您在这里做什么都是不安全的，并且取决于编译器将为您生成什么代码 - 它可能会为小的代码更改生成具有显着不同结果的代码。

与此相关的是可以从内存中原子读取哪些数据类型，这取决于处理器、数据类型以及访问是否与内存对齐。

这是对缓存一致性的补充。我们使用的常见桌面和服务器平台是缓存一致的，这意味着硬件负责更新内存的魔力，因此所有处理器/内核都可以看到更改，而不是例如在另一个内核需要时仅驻留在一个内核上的 L1 缓存中访问相同的内存位置。（某些内存区域，例如用于 DMA 的区域可能无法为您提供此类缓存一致性保证）

今天的桌面/服务器平台看起来很像 NUMA，但许多更大、更特殊的内置 NUMA 系统没有缓存一致性保证。

# spring - Spring Validator Junit 错误

> ID：13647484
> 
> 赞同：2
> 
> 时间：2012-11-30T14:50:26.837
> 
> 标签：spring, junit, validation

我正在为验证器编写 junit 测试。下面的代码有效：

```
// initialize errors
errors = createNiceMock(BindingResult.class);
errors.rejectValue("orgId", "mismatch.LaunchQueryForm.orgId");

// activate the mock
replay(errors);

// go ahead and run validate now
launchQueryValidator.validate(launchQueryForm, errors);

// verify the errors
verify(errors); 
```

但是下面在junit中不起作用-这里的区别是我发送了一个附加参数以显示在错误消息中，知道如何为此编写junit吗？

```
errors.rejectValue("typeInput", "mismatch.LaunchQueryForm.typeInput",
                           new Object[]
                { launchQueryForm.getTypeInput() }, null); 
```

在这种情况下我得到的错误是：

```
java.lang.AssertionError: 
  Expectation failure on verify:
    BindingResult.rejectValue("typeInput", "mismatch.LaunchQueryForm.typeInput", ["X"], null): expected: 1, actual: 0 
```

提前感谢您对此进行调查。

最好的，普拉萨德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T15:04:34.583

这个问题表明在这种情况下使用 mock 不是一个好主意。

使用真正的`BindingResult`实现并检查其状态：

```
BindingResult errors = 
    new BeanPropertyBindingResult(launchQueryForm, "LaunchQueryForm");

launchQueryValidator.validate(launchQueryForm, errors);

assertEquals("mismatch.LaunchQueryForm.orgId", 
    errors.getFieldError("orgId").getCode()); 
```

# oracle - 根据 score 列获取前 10% 的记录

> ID：13647485
> 
> 赞同：0
> 
> 时间：2012-11-30T14:50:28.303
> 
> 标签：oracle, top-n

我有一个 SCORE 列。如何从 EMPLOYEE 表中选择得分最高的前 10%？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T14:53:27.580

您可以使用[分析](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions004.htm#i81407)来做到这一点。假设分数在上升（分数越高越好）：

```
SELECT e.*
  FROM (SELECT e.*,
               row_number() OVER (ORDER BY score DESC)
               / COUNT(*) OVER () pct
          FROM employee e) e
 WHERE pct <= 0.1 
```

这将选择最多 10% 的员工。如果它们之间的分数相等，则上述 SQL 将以非确定性的方式在它们之间进行选择。如果您想包括所有前 10% 的分数（包括重复分数），请替换[`row_number()`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions156.htm#i86310)为[`rank()`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions141.htm#i1269223).

您还可以使用以下[`NTILE`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions115.htm#i85619)功能：

```
SELECT e.*
  FROM (SELECT e.*,
               ntile(10) OVER (order by score DESC) ntile#
          FROM employee e) e
 WHERE ntile# = 1 
```

# android - Galaxy Note 无法使用 MediaPlayer 播放声音

> ID：13647487
> 
> 赞同：1
> 
> 时间：2012-11-30T14:50:34.003
> 
> 标签：android, android-mediaplayer, galaxy

我写了一个非常简单的 android 应用程序来测试 Android 中的 MediaPlayer。应用程序在一些安卓手机上运行良好，但这个应用程序在 Galaxy Note 上不起作用。

```
MediaPlayer mediaPlayer;

protected class SoundPlayer extends AsyncTask<Integer, Void, Void> {
    @Override
    protected Void doInBackground(Integer... params) {
        mediaPlayer = new MediaPlayer();
        mediaPlayer.setAudioStreamType(AudioManager.STREAM_RING);
        Uri uri = Uri.parse("android.resource://com.example.mediaplayertest/" + params[0]);
        try {
            mediaPlayer.setDataSource(getApplicationContext(), uri);
            mediaPlayer.prepare();
            mediaPlayer.start();
            mediaPlayer.setLooping(false);
        } catch (Exception e) {
            Log.d("MPT", e.getMessage());
        }
        return null;
    }
}   

public void startPlayingSound(View v) {
    soundPlayer = new SoundPlayer();
    try {
        soundPlayer.execute(R.raw.alarm);
    } catch(Exception e) {
        Log.d("MPT", e.getMessage());
    }
}

public void stopPlayingSound(View v) {
    if(mediaPlayer.isPlaying()) {
        mediaPlayer.stop();
    }
} 
```

你知道原因吗？你有什么主意吗？这是 Galaxy Note 中的错误还是我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T08:28:04.800

问题：MediaPlayer 无法在 Galaxy Note 中播放 WAV 声音文件。我已经在 Galaxy Gio、S 和索尼 Xperia 上测试了该应用程序，一切正常。

基于此[链接](http://www.weston-fl.com/blog/?p=2988)：

典型错误如下： 1\. 文件路径错误。找到不正确的目录或 Url 或 Uri。2\. 媒体文件错误，格式不兼容。3.缺少权限。

最后我发现媒体格式不正确。更改媒体文件和“注意”播放声音！

# domain-driven-design - 具有深层层次结构的聚合根在 DDD 中是否合适？

> ID：13647490
> 
> 赞同：7
> 
> 时间：2012-11-30T14:50:38.800
> 
> 标签：domain-driven-design, aggregateroot

我有一个系统，用户在表单中回答问题。我有代表这个模型的对象，但我不太确定如何根据 DDD 组织这些对象。

1.  表格（有自己的列表）部分；
2.  部分->（有自己的）组列表；
3.  组->（有自己的）问题列表；
4.  问题 ->（可以有自己的子问题列表）问题；
5.  问题->（有自己的）答案列表；
6.  答案 -> （有自己的）Answer_Details 列表；
7.  Answer_Detail ->（可能有自己的子详细信息列表）Sub_Answer_Details。

每个对象都有超过 15 个属性，如果没有父对象，每个对象都没有意义。根据 DDD，我认为 Form 实体应该是 Aggregate Root 而所有其他对象都应该是值对象。这意味着我只需要一个用于表单实体的存储库。在这种情况下，FormRepository 将被各种用于子对象的 CRUD 方法弄乱。就 DDD 而言，我的推理是否正确？我最终得到一个非常广泛的聚合体可以吗？我相信这种表示很容易导致性能问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T15:35:51.043

是的，深度层次结构在 DDD 中很好。

*我最终得到一个非常广泛的聚合体可以吗？*- 如果现实如此复杂，并且你的域模型是你能想到的最好的，那么你最终会得到一个复杂的聚合根。

是的，`Form`应该是聚合根。

*所有其他对象应该是值对象*- 错误，所有其他对象应该是非聚合根实体（带有 Id），没有存储库来获取它们。值对象没有 Id，值对象的相等性仅由其属性值决定，而不是由 Id 的相等性决定（更多信息[here](http://devlicio.us/blogs/casey/archive/2009/02/13/ddd-entities-and-value-objects.aspx)）。

*在这种情况下，FormRepository 将被各种子对象的 CRUD 方法弄得一团糟*——不，存储库应该只包含关于聚合根的方法，即`Get<T> , Save<T> where T : IAggregateRoot`，一旦你得到一个聚合根的实例，你可以遍历属性和方法来获取你需要什么。例子：

```
var formId = 23;
var form = _formRepository.Get(formId);
var firstGroup = form.Sections.First().Group().First(); 
```

或更好

```
var groupIndex = 1;
var firstGroup = form.GetGroupAt(groupIndex); 
```

在哪里

```
public Group GetGroupAt(int groupIndex)
{
    Sections.First().Group().ElementAt(groupIndex);
} 
```

*我相信这种表示很容易导致性能问题*- 如果您使用[CQRS](http://martinfowler.com/bliki/CQRS.html)，您将从命令处理程序调用一些`Form`域方法，如果您使用 NHibernate 进行实体持久性，它将默认使用延迟加载，并且只会`Form`从 DB加载，然后它只会加载您真正接触过的实体，因此例如`Sections.First()`会从数据库加载所有部分，但不会加载组和其余部分。对于查询，您将创建一个`FormDto`（数据传输对象）和其他可能扁平化的 dto，以获取所需形式的数据（这可能与您的实体结构不同，UI 可能驱动 dto 结构）。查看我的[博客](http://xhafan.com/blog/coreddd-tutorial-real-life-ddd-tdd-asp-net-mvc-wpf-application-built-on-coreddd-library)以获取有关 DDD/CQRS/NHibernate/Repository 的信息

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-04T04:34:17.297

即使答案已被接受，我想我也可以加上我的 2 美分：

深层层次结构（可能）很好，但请记住聚合背后的想法实际上是为了防止这种情况发生。我倾向于按照以下方式考虑聚合中的实体：

> “这个实体*没有*AR 有任何意义吗？”

由于我没有任何上下文 wrt 你的模型，我将使用`Order`/ `OrderLine`。没有 a`OrderLine`有任何意义`Order`吗？我可以单独对订单行做任何事情（行为）吗？这里的明显答案是“不”。

每个模型都需要根据上下文进行处理。但*所有权*并不一定意味着*遏制*。

当您使用单独的有界上下文时，这些可能更容易看到，前提是您的 BC 正确：)

在您的情况下， an`Answer`可能没有它的意义`Question`。但也许 a `Question`can live in a `QuestionBank`BC and a specific question may be used in your `Examination`BC and your `Enrollment`BC. 所有这些都是完全编造的，所以这取决于你的上下文。

因此，如果它是`Question`一个 AR 案例，那么您的`Form`AR 拥有的问题可能只是一个值对象，甚至是一个简单的 QuestionId。

# iphone - 用户启动时应用程序崩溃，无法复制错误

> ID：13647491
> 
> 赞同：0
> 
> 时间：2012-11-30T14:50:37.883
> 
> 标签：iphone, ios, crash, crash-reports, symbolicatecrash

前几天我的应用程序更新上线了，在各种设备和操作系统上测试都没有问题。但是，我的几个用户在启动时崩溃了。我在阅读崩溃日志方面相当陌生。对于这个特定的崩溃日志，有人能指出我从哪里开始寻找正确的方向吗？我希望这个问题也能帮助其他人破译类似的日志。如果我知道要发布哪个代码，我可以根据需要发布代码。

我已经看到很多人们鼓励开发人员使用 NSZombie 等的线程。让我重申一下，我无法自己复制这个崩溃，无论是在模拟器中还是在我拥有的任何设备上。这是一个用户发给我的，我收到了几个看起来像的。

我不得不将我的应用程序从应用程序商店中撤下，并急于将其恢复。任何帮助将不胜感激。

```
Incident Identifier: D56D112D-A7A5-44C0-AE3A-DE9172B0307D CrashReporter Key:   58cb8875fb20ba07fd89538f0489f0a971488f9e Hardware Model:      iPhone4,1 Process:         MyApp [13747] Path:            /var/mobile/Applications/02DEF31B-0435-4656-BA71-DEC01DCEDB84/MyApp.app/MyApp Identifier:      MyApp Version:         ??? (???) Code Type:       ARM (Native) Parent Process:  launchd [1]

Date/Time:       2012-11-29 07:31:42.137 -0500 OS Version:      iPhone OS 5.1.1 (9B206) Report Version:  104

Exception Type:  EXC_BAD_ACCESS (SIGSEGV) Exception Codes: KERN_INVALID_ADDRESS at 0x00000000 Crashed Thread:  0

Thread 0 name:  Dispatch queue: com.apple.main-thread Thread 0 Crashed: 
0   MyApp                               0x0012180a 0x91000 + 591882 
1   MyApp                               0x00121a38 0x91000 + 592440 
2   MyApp                           0x000b3cac 0x91000 + 142508 
3   Foundation                      0x3559c92c __NSFireDelayedPerform + 408 
4   CoreFoundation              0x35a56a2c __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__
+ 8 
5   CoreFoundation                  0x35a56692 __CFRunLoopDoTimer + 358 
6   CoreFoundation                  0x35a55268 __CFRunLoopRun + 1200 
7   CoreFoundation                  0x359d849e CFRunLoopRunSpecific + 294 
8   CoreFoundation                  0x359d8366 CFRunLoopRunInMode + 98 
9   GraphicsServices                0x37674432 GSEventRunModal + 130 
10  UIKit                           0x334e4cce UIApplicationMain + 1074 
11  MyApp                               0x00093e48 0x91000 + 11848 
12  MyApp

Thread 1 name:  Dispatch queue: com.apple.libdispatch-manager
Thread 1:
0   libsystem_kernel.dylib          0x363283a8 kevent + 24
1   libdispatch.dylib               0x34912f04 _dispatch_mgr_invoke + 708
2   libdispatch.dylib               0x34912c22 _dispatch_mgr_thread + 30

Thread 2:
0   libsystem_kernel.dylib          0x36338cd4 __workq_kernreturn + 8
1   libsystem_c.dylib               0x32e3ff36 _pthread_wqthread + 610
2   libsystem_c.dylib               0x32e3fcc8 start_wqthread + 0

Thread 3 name:  WebThread
Thread 3:
0   libsystem_kernel.dylib          0x36328004 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x363281fa mach_msg + 50
2   CoreFoundation                  0x35a563ec __CFRunLoopServiceMachPort + 120
3   CoreFoundation                  0x35a55124 __CFRunLoopRun + 876
4   CoreFoundation                  0x359d849e CFRunLoopRunSpecific + 294
5   CoreFoundation                  0x359d8366 CFRunLoopRunInMode + 98
6   WebCore                         0x318d7c9c _ZL12RunWebThreadPv + 396
7   libsystem_c.dylib               0x32e4572e _pthread_start + 314
8   libsystem_c.dylib               0x32e455e8 thread_start + 0

Thread 4:
0   libsystem_kernel.dylib          0x36338cd4 __workq_kernreturn + 8
1   libsystem_c.dylib               0x32e3ff36 _pthread_wqthread + 610
2   libsystem_c.dylib               0x32e3fcc8 start_wqthread + 0

Thread 5:
0   libsystem_kernel.dylib          0x36338cd4 __workq_kernreturn + 8
1   libsystem_c.dylib               0x32e3ff36 _pthread_wqthread + 610
2   libsystem_c.dylib               0x32e3fcc8 start_wqthread + 0

Thread 0 crashed with ARM Thread State:
    r0: 0x001ef7a4    r1: 0x001ed9ac      r2: 0x00000000      r3: 0x00000000
    r4: 0x003c16a0    r5: 0x00000000      r6: 0x00000000      r7: 0x2fe8ee2c
    r8: 0x0019b7af    r9: 0x00000001     r10: 0x001ef698     r11: 0x00000006
    ip: 0x3ed9d1f4    sp: 0x2fe8ee20      lr: 0x326af187      pc: 0x0012180a
  cpsr: 0x00000030 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T03:43:29.843

我很难用符号表示我的崩溃日志，而且如果不使用 atos，我永远无法让它工作。我很确定这是因为我的应用名称包含一个空格和一个撇号。这是一个线程的链接，我终于能够使用 atos*手动*获取我需要的信息（以及最终的一些十六进制数学 - 呃）。

[当应用程序名称包含撇号和空格时符号化崩溃日志（已部署的应用程序）](https://stackoverflow.com/questions/13650516/symbolicate-crash-log-when-app-name-contains-apostrophe-and-space-deployed-app)

# c# - 默认实体框架超时

> ID：13647493
> 
> 赞同：12
> 
> 时间：2012-11-30T14:50:42.830
> 
> 标签：c#, entity-framework, orm

EF 查询的默认超时是多少？我试图通过检查来找出答案`context.CommandTimeout`，但它返回了`null`。

我还在连接字符串中的网络配置中查看了类似的`Connect Timeout=`内容，但默认情况下它似乎不存在。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-30T14:58:54.437

对象查询和 SaveChanges 操作的默认超时由底层连接提供程序定义。由于 Entity Framework 可用于许多连接提供程序、mysql、sql server 等，并且都有不同的默认超时！

所以`null`意味着将使用默认超时，如果您想知道默认超时，那么它取决于您使用的连接提供程序！

# git - Composer 版本控制私有存储库

> ID：13647494
> 
> 赞同：4
> 
> 时间：2012-11-30T14:50:46.897
> 
> 标签：git, versioning, composer-php

我在 github 上有几个私人存储库，我使用 composer 将它们加载到我的项目中。我的 composer.json 文件如下所示：

```
...
"repositories": [
    {
        "type": "git",
        "url":  "git@github.com:me/my-repo.git"
    }
],
"require": {
    "me/my-repo": "*"
}
... 
```

如何在“me/my-repo”文件中配置我的 composer.json，以便我可以请求某些版本的 repo？例如，我希望能够在某些项目中使用 "me/my-repo": "1.0.x" 并在另一个项目中使用 "me/my-repo": "1.5.x-dev"。

我环顾四周，但无法找到一种方法来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T17:32:24.430

您可以使用 satis：[https ://getcomposer.org/doc/articles/handling-private-packages-with-satis.md](https://getcomposer.org/doc/articles/handling-private-packages-with-satis.md)

它将抓取您的存储库并为您的项目构建可用版本列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T21:22:51.577

如果您想避免使用 Git 配置 Composer 或设置您自己的 Satis，您可以尝试使用云替代方案。我在 Gemfury 工作，我们很快就会在我们的私有云存储库中引入 Composer 支持。如果您想早点尝试，这里有一个关于如何开始的指南：http: [//devcenter.gemfury.com/articles/php-composer-server.html](http://devcenter.gemfury.com/articles/php-composer-server.html)

# c# - Webdriver SwitchTo()

> ID：13647495
> 
> 赞同：3
> 
> 时间：2012-11-30T14:50:57.177
> 
> 标签：c#, webdriver, pageobjects

我是 webdriver 的初学者，开始学习页面对象模型

这是我使用的代码：

```
public static class test1
{
    public static ISearchContext Driver
    {
        get
        {
            return webDriver;
        }
    }
}

public static class test2
{
    public static test3 test3
    {
        get
        {
            var Test3 = new test3();
            PageFactory.InitElements(test1.Driver, Test3 );
            return Test3 ;
        }
    }
}

public class test3
{
    public void SwitchToFrame()
    {
        test1.Driver.SwitchTo().Frame(webDriver.FindElement(By.XPath("some xpath")));

    }
} 
```

这不断抛出错误。 `SwitchTo`从来没有作为选项给出，任何人都可以告诉我为什么，请告诉我如何获得`SwitchTo`作为选项。提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T17:19:20.327

`ISearchContext`接口不是暴露的接口，`SwitchTo`而是`IWebDriver`。

具体使用的原因是什么`ISearchContext`？如果你改变它，`IWebDriver`它会工作。

这段代码，例如：

```
public static IWebDriver Driver
{
    get
    {
        return webDriver;
    }
} 
```

`IWebDriver`实现`ISearchContext`，并提供更多功能。我强烈建议您使用它而不是`ISearchContext`单独使用它，除非您有特殊原因这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T16:32:03.183

我相信在切换到帧时，需要使用帧 ID、名称或索引来完成。因此，如果您尝试访问框架内的元素，则必须先切换到框架，然后执行 webDriver.FindElement(By.XPath("some xpath"))。`webdriver.switchTo().defaultContent();`此外，一旦在框架中，webdriver 将保留在框架中，直到您使用(Java)切换回顶层。

我通常使用 defaultContent:
`webdriver.switchTo().defaultContent().switchTo().frame("HeaderFrame");`
或
`webdriver.switchTo().defaultContent().switchTo().frame("HeaderFrame").switchTo().frame("subframe");`

如果我需要进入一个框架内的一个框架。这样我总是从页面顶部开始。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-28T05:51:01.877

如果您尝试切换到框架，请指定框架名称

```
driver.switchTo().Frame("YourFrameName"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-19T22:53:40.617

如果你想先切换到另一个框架中的某个框架，你应该切换到第一个框架，而不是从那里切换到另一个框架，例如：

```
public void switchToPopUpFrame(){
     switchToDefaultFrame();
     webdriver.switchTo().getPopUpFrame();
  } 
```

并使用这种方法，您可以使用框架进行操作并以您需要的方式组合它们

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-04-12T17:42:44.747

您缺少 IWebDriver。在代码中包含 IWebDriver，这将公开 SwitchTo() 方法。

# java - 为 android JellyBean OS 创建简单的条形码扫描仪时出错

> ID：13647499
> 
> 赞同：0
> 
> 时间：2012-11-30T14:51:03.263
> 
> 标签：java, android, android-emulator, zxing, android-4.2-jelly-bean

我是android应用程序开发的新手。我正在使用 Zxing 开发一个简单的条形码扫描仪应用程序。我正在使用最新的 ADT，并且正在 Eclipse 下进行开发。

以下是我的代码：

```
package com.example.test_app2;

import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;

public class MainActivity extends Activity {

public final static String SCAN_RESULT = "com.example.Test_App2.RESULT";
DisplayScanResultActivity disp = new DisplayScanResultActivity();
    @Override
    protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
    }

    public void scanBarcode(View view)
    {
       IntentIntegrator.initiateScan(this);
    }
} 
```

这是 MainActivity 类。

```
package com.example.test_app2;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.support.v4.app.NavUtils;
import android.view.Menu;
import android.view.MenuItem;

public class DisplayScanResultActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_display_scan_result);
    // Show the Up button in the action bar.
    //getActionBar().setDisplayHomeAsUpEnabled(true);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_display_scan_result, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case android.R.id.home:

        NavUtils.navigateUpFromSameTask(this);
        return true;
    }
    return super.onOptionsItemSelected(item);
}

protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    switch (requestCode) {
    case IntentIntegrator.REQUEST_CODE: {
    if (resultCode != RESULT_CANCELED) {
    IntentResult scanResult = IntentIntegrator.parseActivityResult(
    requestCode, resultCode, data);
    if (scanResult != null) {
    String upc = scanResult.getContents();

    // put whatever you want to do with the code here
    TextView tv = new TextView(this);
    tv.setText(upc);
    setContentView(tv);
    }
    }
    break;
    }
    }
    } 
```

这是显示扫描结果的活动。但我无法理解如何显示扫描结果。

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.test_app2"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="9"
    android:targetSdkVersion="16" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.test_app2.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name="com.example.test_app2.DisplayScanResultActivity"
        android:label="@string/title_activity_display_scan_result"
        android:parentActivityName="com.example.Test_App2.MainActivity" >
        <meta-data
            android:name="android.support.PARENT_ACTIVITY"
            android:value="com.example.Test_App2.MainActivity" />
    </activity>
</application>

</manifest> 
```

这是 AndroidManifest.xml 文件。

![在此处输入图像描述](../Images/9503ed667fa4ccd7cb633a614b2e6f68.png)

当我通过模拟器运行这个项目时，会显示扫描按钮。一旦我单击它，应用程序就会崩溃。我该如何解决这个问题？请帮我找到解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T16:11:50.767

这是一种混淆的方法。您似乎希望通过 Intent 与 Barcode Scanner 集成，但随后您在您的应用程序中声明了我们的活动和命名空间，但它不存在。

扔掉所有这些，然后这样做：[http ://code.google.com/p/zxing/wiki/ScanningViaIntent](http://code.google.com/p/zxing/wiki/ScanningViaIntent)

# javascript - 使用 window.getSelection，我如何知道影响来自两个不同节点的文本？

> ID：13647500
> 
> 赞同：0
> 
> 时间：2012-11-30T14:51:03.777
> 
> 标签：javascript

我有这段代码，我用它把选定的文本放在一个跨度内，用 CSS 给它一个背景色。当我尝试“标记”来自两个不同 div 的文本或任何两个标签内的文本时，我收到一个错误： `Uncaught Error: BAD_BOUNDARYPOINTS_ERR: DOM Range Exception 1`

这是我的代码：

```
function highlightSelection()   {
var selection;

//Get the selected stuff
    if(window.getSelection) 
        selection = window.getSelection();
    else if(typeof document.selection!="undefined")
        selection = document.selection;

    //Get a the selected content, in a range object
    var range = selection.getRangeAt(0);

    //If the range spans some text, and inside a tag, set its css class.
    if(range && !selection.isCollapsed)
    {
            var span = document.createElement('span');
            span.className = 'highlight-green';
            range.surroundContents(span);
    }
} 
```

`onmouseup`使用事件调用 highlightSelection() 。提前谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T15:02:33.053

Range的`surroundContents()`方法只有在 Range 的内容可以被单个节点包围时才有效。示例相当直观。因此，在大括号表示范围边界的情况下，以下是可以的：

```
One {two} three
One {two <b>three</b> four} five 
```

...虽然以下情况不好：

```
One {two <b>three} four</b> five
One <b>two {three</b> <i>four} five</i> 
```

Insetad，我建议使用`document.execCommand()`为选择应用背景颜色，因为这将为您处理所有这些内容。我之前[在 Stack Overflow 上提供了执行此操作的代码](https://stackoverflow.com/a/3224513/96100)。

如果你需要应用一个类，你可以使用我的[Rangy](https://code.google.com/p/rangy)库的[CSS 类应用程序模块。](https://code.google.com/p/rangy/wiki/CSSClassApplierModule)

# python - Python解析二进制数据以记录文件

> ID：13647502
> 
> 赞同：0
> 
> 时间：2012-11-30T14:51:18.903
> 
> 标签：python, binary

我有一个读取二进制文件的代码：

```
n = 820
with open('/home/drdos/work/PTSIBS01.PDA', "rb") as f:
    while True:
        data = f.read(n)
        if not data:
            break

        filename = str(data[3:18])
        x = open(filename, 'wb').write(data) 
```

但我的问题是我正在尝试迭代和划分的文件，正如您在 c0de 上看到的那样，在名称上包含双斜杠（“//”），如下所示：

07112011142635//TS

程序只运行 2 次，然后在创建 2 个文件后说：

```
drdos@poison:~/work$ python pybin.py
Traceback (most recent call last):
  File "pybin.py", line 11, in <module>
    x = open(filename, 'wb').write(data)
IOError: [Errno 2] No such file or directory: '12011142635//PT' 
```

好吧，在简历中仅提供一个基本视图，我的代码存在以从该位二进制文​​件创建一个记录文件，并为每个 820 字节创建一个内容为 820 字节的文件和一个文件名，该文件是介于两者之间的字符串的确切副本3字节和18字节。

文件类型 = File.Dat 我需要提取每条记录每条记录 = 1 条记录等于：

```
Field  |     Format  |  name  | len    | description
1        array         NR_UP    2        //
2        array         Bla_N    16       ASCII coded i need for filename
3        Binary Array   Sig     256      content
4        Binary Array   Sig     270      content
5        Binary Array   SigA    256      content
6        Hash           Hash    20       Sha1 
```

对于这样的每条记录，我都需要一个文件:) 并且对于所有 20Mb 的源代码（File.dat），但任何人都想更改我的原始代码或更好地了解如何执行此操作会很棒。

# java - 增加标签值或添加标签 xstl

> ID：13647507
> 
> 赞同：0
> 
> 时间：2012-11-30T14:51:35.103
> 
> 标签：java, xml, xls

我有 xml 输入消息：

```
<Message>
    <Header>
        <Timestamp>2010-10-04T14:43:12.361-04:00</Timestamp>
    </Header>
</Message> 
```

我需要通过 xslt 来获得：

```
<Message>
    <Header>
        <Timestamp>2010-10-04T14:43:12.361-04:00</Timestamp>
        <Retry>1</Retry> <!-- added -->
    </Header>
</Message> 
```

如果 Retry 不存在于 xml 中，则将 Retry 值增加 1（如果存在）。

```
<Message>
    <Header>
        <Timestamp>2010-10-04T14:43:12.361-04:00</Timestamp>
        <Retry>2</Retry> <!-- incremented -->
    </Header>
</Message> 
```

你能帮忙吗？

如果不存在，我有代码添加值，如果存在标签，如何丰富它以增加：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0" >
  <xsl:param name="ename">Retry</xsl:param>
  <xsl:param name="evalue">1</xsl:param>
  <xsl:output method="xml" encoding="utf-8"/>

  <xsl:template match="@*|node()">
     <xsl:copy>
     <xsl:apply-templates select="@*|node()" />
     </xsl:copy>
  </xsl:template>

  <xsl:template match="Header">
     <xsl:copy>
         <xsl:apply-templates/>
          <xsl:if test="not(Retry)">
             <xsl:element name="{$ename}"><xsl:value-of select="$evalue"/></xsl:element>
          </xsl:if>
     </xsl:copy>
  </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T17:17:20.240

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0" >
  <xsl:param name="ename">Retry</xsl:param>
  <xsl:param name="evalue">1</xsl:param>
  <xsl:output method="xml" encoding="utf-8"/>

  <xsl:variable name="number" select="//Retry" />

  <xsl:template match="@*|node()">
     <xsl:copy>
       <xsl:apply-templates select="@*|node()" />
     </xsl:copy>
  </xsl:template>

  <xsl:template match="//Retry" />

  <xsl:template match="Header">
     <xsl:copy>
         <xsl:apply-templates/>
          <xsl:if test="not(Retry)">
             <xsl:element name="{$ename}"><xsl:value-of select="$evalue"/></xsl:element>
          </xsl:if>
          <xsl:if test="Retry">
            <xsl:element name="{$ename}"><xsl:value-of select="$number + 1 "/>                 </xsl:element>
      </xsl:if> 
 </xsl:copy> 
```

这就是我所做的，看起来它正在工作。

# c# - 为什么上传到 ASP.NET Web 应用程序的大于 12MB 的文件显示为 0MB？

> ID：13647508
> 
> 赞同：4
> 
> 时间：2012-11-30T14:51:47.003
> 
> 标签：c#, asp.net, file-upload, iis-7, windows-server-2008-r2

我们的 ASP.NET C# Web 应用程序用于以下环境 - .NET Framework 4 - IIS 7 - Windows 2008 - Visual Studio 2010 .NET IDE - C# - HTTPS ( SSL ) 我们的 ASP.NET C# Web 应用程序上传各种文件，例如 jpgs , mp4, mp3, pngs, docx, txt 等到一个名为 ClientBin 的文件夹中。但是，如果我们将应用程序部署到 IIS7 服务器，我们必须授予应用程序的 Web 用户上传文件的权限。我们授予 \IIS_IUSRS 组权限以在我们的 ClientBin 上传文件夹上执行、读取、写入和执行。

Web 用户可以上传大小小于大约 12MB 的文件。

但是，当 Web 用户上传的文件超过大约 12MB 时，上传的文件在服务器的 ClientBin 上传文件夹中将是 0 字节。

在我们的 Web.config 中，我们对 httpRuntime 标签进行了以下配置：

```
<system.web>
  ...
  .....
  ........
  ..............
  <httpRuntime maxRequestLength="1048576" executionTimeout="50000"
       useFullyQualifiedRedirectUrl="false" requestLengthDiskThreshold="15360"
       minFreeThreads="8" minLocalRequestFreeThreads="4"
       appRequestQueueLimit="100" />
</system.web> 
```

在我们的 Web.config 中，我们有以下`requestLimits`标签配置：

```
<system.webServer>
  ..............
  .........................
  <security>
    <requestFiltering>
      <requestLimits maxAllowedContentLength="2000000000" />
      <fileExtensions>
        <add fileExtension=".aspx" allowed="true" />
      </fileExtensions>
    </requestFiltering>
  </security>
</system.webServer> 
```

我还采用了不受欢迎的方法，通过创建以下设置来修改 machine.config 文件：

```
<system.web>
  <processModel responseDeadlockInterval="0:09:00"
                                  responseRestartDeadlockInterval="0:09:00" />
  .....................
  ..........................................
  .............................................................
</system.web> 
```

我还采取了以下步骤：我检查了事件查看器和 IIS 日志，但没有显示奇怪。

大小小于大约 12 MB 的文件会被正确上传。

重要的是要注意文件确实会上传，但最终都是 0Kb。上传的文件名和类型与我桌面上的相同，但大小为 0Kb。我桌面上的那个大约是 75MB。

ASP.NET 和 IIS 不会抛出任何错误页面。

为什么上传到 ASP.NET Web 应用程序的大于 12MB 的文件显示为 0MB？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T21:00:53.407

尝试增加`requestLengthDiskThreshold`以匹配`maxRequestLength`

```
<configuration>
    <system.web>
        <!-- maxRequestLength and requestLengthDiskThreshold is in Kilobytes-->
        <httpRuntime maxRequestLength="204800" requestLengthDiskThreshold="204800" />
    </system.web>
    <system.webServer>
        <security>
            <requestFiltering>
                <!-- maxAllowedContentLength is in Bytes not Kilobytes -->
                <requestLimits maxAllowedContentLength="204800000" />
            </requestFiltering>
        </security>
    </system.webServer>
</configuration> 
```

另外，您是否尝试过使用更全面的 ASP.NET 上传控件，例如[Telerik RadUpload](http://www.telerik.com/products/aspnet-ajax/upload.aspx)模块？它可以免费试用，看看它是否能解决您的问题。

# c# - .SaveChanges() 之后的合成中重复的子对象；

> ID：13647509
> 
> 赞同：0
> 
> 时间：2012-11-30T14:51:48.963
> 
> 标签：c#, asp.net, asp.net-mvc-3, entity-framework, entity

我们正在使用与通用存储库模式相结合的工作单元模式。

POCO 是这样构建的：

```
public class Aclass: IEntity{
public int ID;
public virtual Bclass Bproperty;
public virtual Cclass Cproperty;
} 
```

使用 IEntity

```
public interface IEntity{
int ID;
} 
```

当我们创建一个唯一的 A 对象时，我们指的是已经存在的 B 对象和 C 对象。当我们 .SaveChanges() A 被保存时，也是 B 和 C 的一个副本。所以 A 的 Bproperty 和 Cproperty 不是指原始的 B 和 C 对象，而是指新的对象。

我们可以通过附加来修复它，但鉴于我们正在使用模式，这与我们的抽象级别有关。

有没有人知道如何以干净的方式解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T15:28:03.410

您必须像`Unchanged`之前一样标记现有的 B 和 C 对象`SaveChanges`

```
context.Entry<BClass>(bclass).State = EntityState.Unchanged; 
```

或者

```
context.ObjectStateManager.ChangeObjectState(AEntity.BClass, EntityState.Unchanged); 
```

（取决于您使用的上下文类型）

# c - 无法在linux中创建僵尸进程

> ID：13647519
> 
> 赞同：3
> 
> 时间：2012-11-30T14:52:52.333
> 
> 标签：c, linux, bash, process, zombie-process

好吧，我有奇怪的问题。我无法在我的项目中创建僵尸进程，但我可以在其他文件中执行此操作。有简单的说明：

```
int main()
{
    if(fork()==0)
        printf("Some instructions\n");
    else
    {
        sleep(10);
        wait(0);
    }
    return 0;
} 
```

那个简单的代码创建了一个 10 秒的僵尸进程。我正在检查它确实存在。

但是，如果我将此代码复制到我的程序（我自己的 shell）中，那么像之前 BUT 僵尸进程一样执行的所有内容都根本不存在。我不知道有什么区别。这是相同的代码。

我应该知道更多信息吗？还有其他方法可以简单地创建僵尸吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-10T18:24:53.970

试试这个 python 脚本：

```
#!/usr/bin/python
# -*- coding: utf8 -*-

import subprocess
import time
import threading

# Create 100 subprocesses 

proc = {}
for i in xrange(0,1000):
        proc[i] = subprocess.Popen(['ls','-l'])

# create zombies from this processes, observe one minute zombies
time.sleep(60)

# Zombies dead
proc.communicate()

time.sleep(5) 
```

此后检查僵尸：

```
# ps -A | grep defunc
14711 pts/49   00:00:00 ls <defunct>
14713 pts/49   00:00:00 ls <defunct>
14716 pts/49   00:00:00 ls <defunct>
.... 
14740 pts/49   00:00:00 ls <defunct>
14741 pts/49   00:00:00 ls <defunct>
14742 pts/49   00:00:00 ls <defunct>
14743 pts/49   00:00:00 ls <defunct>
14746 pts/49   00:00:00 ls <defunct>
14749 pts/49   00:00:00 ls <defunct>
....
14805 pts/49   00:00:00 ls <defunct>
14806 pts/49   00:00:00 ls <defunct> 
```

或 C：

```
#include <stdlib.h>
#include <sys/types.h>
#include <unistd.h>

int main ()
{ 
  pid_t child_pid;

  child_pid = fork ();
  if (child_pid > 0) {
    sleep (60);
  }
  else {
    exit (0);
  }
  return 0;
} 
```

应该像魅力一样工作，像水晶般清澈纯净的[海天巫毒](https://en.wikipedia.org/wiki/Haitian_Vodou)。

# jquery - 如何在 jQuery UI 中将容器设置为可拖动元素的句柄？

> ID：13647521
> 
> 赞同：1
> 
> 时间：2012-11-30T14:52:54.410
> 
> 标签：jquery, jquery-ui, draggable, handle, containment

我在另一个绝对定位的 div 中有一个绝对 div。

```
<div id="container">
    <div id="drag">
        <div id="handle"></div>
    </div>
</div> 
```

例如，假设容器为 1000px x 1000px，“drag”元素为 100px x 100px，“handle”元素为 10px x 10px，位于拖动元素内部 x = 30px 和 y = 30px。

以下代码将设置拖动元素留在容器元素内：

```
$('#drag').draggable({ handle: '#handle', containment: '#container' }); 
```

我希望拖动元素延伸到容器之外，但在句柄边界处停止拖动。如何在不使用设置坐标的情况下做到这一点？

# jquery - Jquery：如何检测内容更改？（寻找 keyup() 的替代品）

> ID：13647523
> 
> 赞同：2
> 
> 时间：2012-11-30T14:53:06.673
> 
> 标签：jquery

我使用这个简单的 Jquery 代码从 div 中获取元素，然后通过 php 脚本对其进行更改：

```
$(document).ready(function(){
    $("#description").keyup(function(){
    var recherche = $(this).val();

    $.ajax({
        type : "GET",
        url : "result.php",
        data : {motclef: recherche},
        success: function(server_response){
        $("#resultat").html(server_response).show();
        }
    });
});

}); 
```

问题是可以在不按任何键（复制/过去...）的情况下发生一些更改。我曾尝试使用 .change() 但它仅在元素焦点丢失时触发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T15:01:47.633

你可以告诉 jQuery 在一次调用中绑定多个事件，就像这样。进入方法后，您可以根据事件类型过滤行为。在处理粘贴时，最好稍微延迟函数调用，以允许浏览器首先完成它需要做的所有事情。

**编辑**

为了处理自动完成，我已经根据这个 stackoverflow[答案更新了答案。](https://stackoverflow.com/a/8249622/427899)

```
$("#description").on("keyup paste cut focus change blur",function (event) {

    var $this = $(this),
        delay = 0

    // Add delay for cut/paste
    if (event.type === "paste" || event.type === "cut") {
        delay = 5;
    }

    // Record the current value of the text box.
    if (event.type === "focus" || event.type === "change") {
        this.previousvalue = this.value;
    }

    // Trigger the change event if the value is now different.
    if (event.type === "blur") {
        if (this.previousvalue !== this.value){
            $this.change();
            return false;
        }
    }

    window.setTimeout(function () {

        var recherche = $this.val();

        $.ajax({
            type : "GET",
            url : "result.php",
            data : {motclef: recherche},
            success: function(server_response){
                $("#resultat").html(server_response).show();
            }
        });                  

    }, delay);
}); 
```

# objective-c - [__NSCFConstantString objectAtIndex:]：无法识别的选择器发送到实例 0x3141c

> ID：13647528
> 
> 赞同：0
> 
> 时间：2012-11-30T14:53:21.007
> 
> 标签：objective-c, xcode4.5, uisearchdisplaycontroller

我正在尝试让搜索显示控制器工作并且刚刚收到此错误：

> 2012-11-30 14:48:19.903 searchstory[5812:c07] -[__NSCFConstantString objectAtIndex:]：无法识别的选择器发送到实例 0x3141c 2012-11-30 14:48:19.904 searchstory[5812:c07] *** 由于应用程序终止未捕获的异常“NSInvalidArgumentException”，原因：“-[__NSCFConstantString objectAtIndex:]：无法识别的选择器发送到实例 0x3141c”***首先抛出调用堆栈：（0x1cc0012 0x10fde7e 0x1d4b4bd 0x1cafbbc 0x1caf94e 0x2901d 0xfff4b 0x10001f 0xe880b 0xe6ec2 0xf1d51 0xfa3ad 0x102454 0x329635 0x32c0de 0x27bd85 0x1111705 0x48873 0x10a2ce 0x109960 0x11678c 0x120bf6 0xbbedc9 0x1d1a0c5 0x1c74efa 0xaf3482 0x359509e 0x26e426a 0x2b1f78c 0x2b22588 0x356fd12 0x356fe4a 0x35705c0 0x35703b8 0x356f904 0x295eeab 0x295ee13 0x3542596 0x356ebcc 0x2b1cac6 0x2b1bd56 0x2b4f320 0x31a9afd 0x2b45e66 0x2b470aa 0x2b4501e 0x31a81aa 0x2b5f491 0x2b4f0ca 0x2b2303e 0x27207fb 0x11116b0 0x358aed0 0x275f384 0x27614df 0x206254 0x1c904f 0x1ca3b8 0x1c8f5e 0x1d312d 0x5643b 0x153e05 0x153e05 0x153e05 0x153e05 0x153e05 0x153e05 0x153e05 0x153e05 0x153e05 0x56495 0x55e66 0x5624b 0x47cf8 0x1c1bdf9 0x1c1bad0 0x1c35bf5 0x1c35962 0x1c66bb6 0x1c65f44 0x1c65e1b 0x1c1a7e3 0x1c1a668 0x4565c 0x1c8d 0x1bb5）的libc ++ abi.dylib：终止称为抛出异常

我一直在玩代码试图让它工作。我用于搜索和 tablerow 的代码是：

```
 - (UITableViewCell *)tableView:(UITableView *)tableView
         cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    NSString *contentForThisRow = nil;

    if (tableView == [[self searchDisplayController] searchResultsTableView])
        contentForThisRow = [[[[self searchResults]objectAtIndex:indexPath.section] objectAtIndex:indexPath.row] objectForKey:@"name"];
    else
        contentForThisRow = [[[[self contentsList] objectAtIndex:indexPath.section] objectAtIndex:indexPath.row] objectForKey:@"name"];

    static NSString *CellIdentifier = @"stoneCell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil)
    {
        cell.textLabel.text = [[[self.contentsList objectAtIndex:indexPath.section] objectAtIndex:indexPath.row] objectForKey:@"name"];
        [cell setAccessoryType:UITableViewCellAccessoryDisclosureIndicator];
        // Do anything that should be the same on EACH cell here.  Fonts, colors, etc.
    }

    // Do anything that COULD be different on each cell here.  Text, images, etc.
    [[cell textLabel] setText:contentForThisRow];

    return cell;
}

- (void)handleSearchForTerm:(NSString *)searchTerm
{

    [self setSavedSearchTerm:searchTerm];

    if ([self searchResults] == nil)
    {
        NSMutableArray *array = [[NSMutableArray alloc] init];
        [self setSearchResults:array];

    }

    [[self searchResults] removeAllObjects];

    if ([[self savedSearchTerm] length] != 0)
    {
        for (NSMutableArray *array in contentsList)
        {
            for (NSDictionary* dictionary in array)
            {
                NSString *currentstring = [dictionary objectForKey:@"name"];
                NSRange r = [currentstring rangeOfString:searchTerm options:NSCaseInsensitiveSearch];
                if (r.location != NSNotFound) {
                    [[self searchResults] addObject:currentstring];
                }
            }
        }
    }

} 
```

谁能告诉我哪里出错了？我假设它是 objectAtIndex 但哪一个？

修订版 - 我尝试稍微更改我的代码，现在我可以进行搜索，但原始视图上没有单元格标题，并且搜索结果在每个标题下都重复！我现在的代码是：

```
- (void)handleSearchForTerm:(NSString *)searchTerm
{
    [self setSavedSearchTerm:searchTerm];

    if ([self searchResults] == nil)
    {
        NSMutableArray *array = [[NSMutableArray alloc] init];
        [self setSearchResults:array];
    }

    [[self searchResults] removeAllObjects];

    if ([[self savedSearchTerm] length] != 0)
    {
        for (NSMutableArray *array in contentsList)
        {
            for (NSDictionary* dictionary in array)
            {
                NSString *currentstring = [dictionary objectForKey:@"name"];
                NSRange r = [currentstring rangeOfString:searchTerm options:NSCaseInsensitiveSearch];
                if (r.location != NSNotFound) {
                    [[self searchResults] addObject:currentstring];
                }
            }
        }
    }
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    // Return the number of sections.
    if (tableView == [[self searchDisplayController] searchResultsTableView])
        return [self.stoneSections count];
    else
       return [self.stoneSections count];
}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {
    return [self.stoneSections objectAtIndex:section];
}

#pragma mark -
#pragma mark UITableViewDataSource Methods

- (NSInteger)tableView:(UITableView *)tableView
 numberOfRowsInSection:(NSInteger)section
{
    NSInteger rows;

    if (tableView == [[self searchDisplayController] searchResultsTableView])
        rows = [[self searchResults] count];
    else
        rows = [[self.contentsList objectAtIndex:section] count];

    return rows;
}

- (UITableViewCell *)tableView:(UITableView *)tableView
         cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *contentForThisRow = nil;

    if (tableView == [[self searchDisplayController] searchResultsTableView])
        contentForThisRow = self.searchResults [indexPath.row];
    else
        contentForThisRow = [[[[self contentsList] objectAtIndex:indexPath.section] objectAtIndex:indexPath.row] objectForKey:@"name"];

    static NSString *CellIdentifier = @"stoneCell";

    UITableViewCell *cell = nil;
    if(mainTableView == self.mainTableView){
        cell = [mainTableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];
        cell.textLabel.text = self.searchResults [indexPath.row];
    } else {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        cell.textLabel.text = [[[self.contentsList objectAtIndex:indexPath.section] objectAtIndex:indexPath.row] objectForKey:@"name"];
    }

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-12T01:02:32.927

我遇到了同样的例外。我的问题的根本原因是我错误地引用了一个键/值对。在运行时，抛出异常“-[__NSCFConstantString objectAtIndex:]: unrecognized selector sent to instance”。这让我感到困惑的时间比我愿意承认的要长。但我找到了解决我的问题的方法，希望它可以帮助别人。引发异常的代码与更正的代码一起出现。

错误代码：

```
- (void)testMyUnitTest
{
    WorldObject *worldObject;
    NSMutableDictionary *worldCoordinatesAll = [[NSMutableDictionary alloc] init];
    WorldCoordinate *localWCoordinate = [[WorldCoordinate alloc] init];

    // Populate with a world coordinate object
    [worldCoordinatesAll setObject:[localWCoordinate updateWithLatitude:X2LOC Longitude:Y2LOC Altitude:0] forKey:@"OBJECT 2"];

    for (id objectID in worldCoordinatesAll) {
        localWCoordinate = (WorldCoordinate *)objectID;
    localWCoordinate.latitude = LATITUDE_1;     // Exception being thrown on this line
    }
} 
```

更正后的代码：

```
- (void)testMyUnitTest
{
    WorldObject *worldObject;
    NSMutableDictionary *worldCoordinatesAll = [[NSMutableDictionary alloc] init];
    WorldCoordinate *localWCoordinate = [[WorldCoordinate alloc] init];

    // Populate with a world coordinate object
    [worldCoordinatesAll setObject:[localWCoordinate updateWithLatitude:X2LOC Longitude:Y2LOC Altitude:0] forKey:@"OBJECT 2"];

    for (id key in worldCoordinatesAll) {
        id value = [worldCoordinatesAll objectForKey:key];
        localWCoordinate = (WorldCoordinate *)value;
        localWCoordinate.latitude = LATITUDE_1;
    }
} 
```

我意识到对于某些人来说，这似乎是一个完全明显的错误。但由于某种原因，我花了一个星期才看到它。所以我希望它可以帮助其他人节省一些时间。:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T15:13:22.453

要找出哪一行代码导致异常打开异常断点。

例如，请参阅[Xcode 4 中的这个问题“Run > Stop on Objective-C exception”？](https://stackoverflow.com/questions/4961770/run-stop-on-objective-c-exception-in-xcode-4)有关如何打开异常断点的信息。

可能发生的情况是您正在从没有该方法的集合中拉出一个对象`objectAtIndex:`。以下行

```
[[[self searchResults]objectAtIndex:indexPath.section] objectAtIndex:indexPath.row] objectForKey:@"name"];` 
```

可能是问题的根源。在这里，您尝试使用`objectAtIndex:`的结果，`[[self searchResults]objectAtIndex:indexPath.section]`但从我可以看到的`- (void)handleSearchForTerm:(NSString *)searchTerm`，`[self searchResults]`只包含一个字符串数组。这意味着您将该方法应用于没有该方法`objectAtIndex:`的`NSString`实例。

# webdriver - 为什么我失败的 xpath 表达式不会导致 Selenium 2 中引发异常？

> ID：13647532
> 
> 赞同：3
> 
> 时间：2012-11-30T14:53:32.527
> 
> 标签：webdriver, selenium-webdriver

我有这样的情况，我希望以下代码引发异常，但 Web 驱动程序会不断查找 xpath 表达式而不会超时：

```
 WebDriver webDriver = new FirefoxDriver();
    webDriver.manage().timeouts().implicitlyWait(10, TimeUnit.MILLISECONDS);
    webDriver.findElement(By.xpath("//div[@class='does-not-exist']")); 
```

我怎样才能让它失败？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T19:31:16.200

您还没有提到您使用的是哪个版本的 Firefox，所以我将使用我的心理调试能力来推断您正在尝试使用 Firefox 17 进行此操作。Firefox 17 和 WebDriver 2.26存在一个[已知问题。](https://code.google.com/p/selenium/issues/detail?id=4814)它将在即将发布的 2.27 中修复（请注意我是如何不承诺日期的，因为无法确定）。

# c# - Emgu Cv 和 16 位灰度图像

> ID：13647537
> 
> 赞同：2
> 
> 时间：2012-11-30T14:53:50.137
> 
> 标签：c#, compatibility, emgucv, grayscale

Emgu Cv 是否为处理 16 位灰度图像提供任何形式的支持？（使用 c#）。如果没有，是否有任何简单的解决方法？提前致谢

在[这里](http://www.emgu.com/wiki/index.php/Working_with_Images#Depth_and_Color_as_Generic_Parameter)它说“任何使用 16 位浮点或非灰度图像作为掩码的尝试都会导致编译时错误！” 我对它的含义有点困惑。

我的困惑来自以下实验：

我确实尝试打开并保存图像，但是，我注意到在打开并保存图像后，分辨率**从 16bpp 变为 8bpp** (tiff) - 但没有错误/异常。我不确定这是否来自库缺乏支持，或者我只是没有使用 image.Save() 正确保存图像

打开图片的代码是：

```
my_Image = new Image<Gray, ushort>(Openfile.FileName); 
```

并保存图像：

```
my_Image.Save(fName); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T15:35:20.257

简短的回答，在询问之前一定是您的搜索：[是](http://www.emgu.com/wiki/index.php/Working_with_Images#Creating_Image)的。

如果这没有回答，或者你问是因为你遇到了问题，请多填一些你的问题，解释你的问题是什么，以及你尝试了什么。如果没有，请阅读[常见问题解答](https://stackoverflow.com/faq)。

# linq - 选择具有多个孩子的不同父母

> ID：13647539
> 
> 赞同：2
> 
> 时间：2012-11-30T14:53:56.280
> 
> 标签：linq

```
public class Vehicle {
    public string Type
    public List<Color> Colors;
}

public class Result {
    public string Type
    public string Color;
} 
```

我`Result`从如下所示的查询中得到一个 's 列表：

```
Car   ->  Red
Car   ->  Blue
Boat  ->  Brown
Boat  ->  Yellow
Boat  ->  Green
Plane ->  White 
```

我想`List<Vehicle>`用 LINQ 选择这个列表。我试过了，但没有用：

```
var List<Vehicle> = results.Select(v => new Vehicle
    {
    Type = v.Type;
    Colors = new List<Color> { new Color = v.Color }
    } 
```

我确定我需要在这里使用某种组，但我不确定如何。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T14:59:17.243

听起来应该通过`GroupBy`电话进行：

```
var query = input.GroupBy(x => x.Type, x => x.Color)
                 .Select(g => new Vehicle { Type = g.Key, Colors = g.ToList() })
                 .ToList(); 
```

请注意，还有另一个重载`GroupBy`允许您跳过`Select`调用，但我认为这样做更简单。让我知道您是否需要其他形式。

请注意，如果您真的不需要在`Vehicle`对象中使用这些，您可以只使用`Lookup`：

```
var lookup = input.ToLookup(x => x.Type, x => x.Color);

foreach (var color in lookup["Car"])
{
    // ...
} 
```

That's handy if you only need the results within the specific method that you're querying it, but creating a `List<Vehicle>` would make more sense if you're propagating the data elsewhere.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T14:57:59.770

```
results.GroupBy(r => r.Type)
       .Select(g => new Vehicle { 
                                   Type = g.Key, 
                                   Colors = t.Select(p => p.Color).ToList()
                                })
       .ToList() 
```

# api - 我的 URI 应该如何构造才能被视为 RESTful？

> ID：13647543
> 
> 赞同：2
> 
> 时间：2012-11-30T14:54:02.660
> 
> 标签：api, rest

我开始为我的项目开发一个公共 API，我想让它成为 RESTful。
我不断看到一些关于某些 API（如 twitter 的）如何不是真正 RESTful 的文章，我想尝试让我的 API 尽可能地 RESTful（似乎它不是那么简单:)）

目前我正在考虑一件事，假设有两个资源，用户和电影，每个用户都有一个电影列表，我想创建一个 REST api 来获取当前连接用户的所有电影，什么是正确的设计方法？
（XXX 是某种身份验证令牌 - 我还没有决定要实现什么身份验证）

1.  获取 /movies?token=XXX
2.  获取 /users/XXX/电影

或者可能是其他东西？

此外，如果有人可以指导我阅读有关该主题的好书，这将有助于我创建尽可能 RESTful 的公共 API，这将是一个很大的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T15:21:16.753

我真的很喜欢 Leonard Richardson 的 Restful Web Services。他解释了 REST，一些网站如何滥用它，如何正确使用它，何时使用查询字符串与将信息放在 URI 路径中。他还介绍了身份验证，但他对这个主题有点简短。他花了很多时间解释为什么 REST 比 SOAP 更好——我喜欢它，但其他评论者似乎觉得它过分了。他在他的大部分示例中都使用了 Ruby/Rails。

在你的两个例子中，我更喜欢“GET /users/XXX/movies”而不是第一个。使用查询字符串有利于搜索或可选参数。像 google.com/?q=batman 或 /users/XXX/movies?page=2 这样的东西。由于您正在查看特定用户的电影，因此 URI 与该结构匹配是有意义的，而选项 2 就是这样做的。

有些网站并不是真正的 RESTful，因为它们提供了类似的方法

```
GET /GetUser?token=XXX
GET /SaveUser?token=XXX&name=YYY 
```

一个真正的 RESTful 服务将遵循现有的 HTTP 命令并对资源而不是函数进行操作。根据这本书，如果你遵循 HTTP 协议，你的服务名称中通常不需要“get”或“save”之类的词——它们是由 HTTP 提供的。

```
GET /user/XXX
PUT /user 
```

希望这可以帮助。我没有任何好的网络资源，但我建议试试那本书。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T18:23:58.257

阅读 Roy Thomas Fielding 的博士论文，题为“[架构风格和基于网络的软件架构的设计”](http://www.ics.uci.edu/~fielding/pubs/dissertation/top.htm)，被证明是了解 REST 架构风格的好方法。起初看起来令人生畏，但它充满了洞察力，可以帮助您设计更好的 API。

# mysql - MySQL删除重复比插入IGNORE更快？

> ID：13647544
> 
> 赞同：2
> 
> 时间：2012-11-30T14:54:18.220
> 
> 标签：mysql, duplicate-removal

这是我的桌子

```
CREATE TABLE IF NOT EXISTS `download` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `date` datetime NOT NULL,
  `keyword` varchar(255) NOT NULL,
  `subkeyword` varchar(255) NOT NULL,
  `desc` varchar(255) NOT NULL,
  `no_file` varchar(255) NOT NULL,
  `url` varchar(256) NOT NULL,
  `visit` int(11) NOT NULL,
  `stat` tinyint(1) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `keyword` (`keyword`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=161087206 ; 
```

有 161,012,173 条记录和 58.7 GiB 表大小

我创建了`tmp`具有相同结构但具有唯一关键字的新表，以避免重复记录而不是我使用的：

```
insert IGNORE into tmp select * from download; 
```

已经2个小时了，还没有结束。有没有最快的方法？

附言。我使用 8 核至强和 8GB 内存

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T15:01:24.107

您可以尝试先进行插入而不忽略，然后更改以删除重复项：

```
ALTER IGNORE TABLE tmp ADD UNIQUE (`keyword`) 
```

该`ALTER`声明可能仍需要一些时间。

**编辑**哎呀...省略了“TABLE”关键字。我也不确定，但`keyword`可能会被保留，所以我添加了反引号。此外，在某些版本的 InnoDB 中显然存在一个不允许您执行此操作的错误。

另外：是的，ALTER 语句可能需要很长时间，但 INSERT IGNORE 语句应该做同样的事情。我的回答是建议一些可能更快但不能保证的东西。

# c# - ScrollViewer 控件模板打破文本框

> ID：13647545
> 
> 赞同：3
> 
> 时间：2012-11-30T14:54:23.553
> 
> 标签：c#, .net, wpf, xaml, controltemplate

[我从 MSDN（链接](http://msdn.microsoft.com/en-us/library/aa970847%28v=vs.100%29.aspx)）复制了`ScrollViewer`模板，它破坏了文本框的行为。当我使用鼠标选择文本时，现在滚动不会跟随选择。为什么？如何解决？

这是我的代码

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow"
        Height="350"
        Width="525">
  <Window.Resources>
    <Style TargetType="{x:Type ScrollViewer}">
      <Setter Property="OverridesDefaultStyle"
              Value="True" />
      <Setter Property="Template">
        <Setter.Value>
          <ControlTemplate TargetType="{x:Type ScrollViewer}">
            <Grid>
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition />
              </Grid.ColumnDefinitions>
              <Grid.RowDefinitions>
                <RowDefinition />
                <RowDefinition Height="Auto" />
              </Grid.RowDefinitions>
              <Border Grid.Column="1"
                      BorderThickness="0,1,1,1">
                <Border.BorderBrush>
                  <SolidColorBrush Color="{DynamicResource BorderMediumColor}" />
                </Border.BorderBrush>
                <ScrollContentPresenter />
              </Border>
              <ScrollBar x:Name="PART_VerticalScrollBar"
                         Value="{TemplateBinding VerticalOffset}"
                         Maximum="{TemplateBinding ScrollableHeight}"
                         ViewportSize="{TemplateBinding ViewportHeight}"
                         Visibility="{TemplateBinding ComputedVerticalScrollBarVisibility}" />
              <ScrollBar x:Name="PART_HorizontalScrollBar"
                         Orientation="Horizontal"
                         Grid.Row="1"
                         Grid.Column="1"
                         Value="{TemplateBinding HorizontalOffset}"
                         Maximum="{TemplateBinding ScrollableWidth}"
                         ViewportSize="{TemplateBinding ViewportWidth}"
                         Visibility="{TemplateBinding ComputedHorizontalScrollBarVisibility}" />
            </Grid>
          </ControlTemplate>
        </Setter.Value>
      </Setter>
    </Style>
  </Window.Resources>
  <StackPanel>
    <TextBox Margin="20"
             Width="100"
             Text="sdjkfhsdjkfhjkdshxcmvnm,xcnv,mxcnv, mxcnv,mxcngjklsdjkfh jkdfghjkfhgjkdfhgkjdfghkjdfhgbkjcvhbkcvjbh" />
  </StackPanel>
</Window> 
```

我使用.NET 4

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T14:50:28.583

我有同样的问题，我终于通过将 CanContenScroll="True" 添加到 ScrollContentPresenter 来解决。

```
<ScrollContentPresenter Grid.Column="0" CanContentScroll="True"/> 
```

如果你想让它更灵活，只需将其绑定到祖先值：

```
 <ScrollContentPresenter Grid.Column="0" 
                         CanContentScroll="{TemplateBinding CanContentScroll}" /> 
```

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T15:30:45.033

是的，我得到了同样的行为。恐怕我无法真正弄清楚为什么会发生这种情况，这可能是 WPF 中的错误或他们定义控件模板的方式。

TextBox 的控件模板有一个滚动查看器作为其布局的一部分，显然模板以某种方式干扰了它。

我能提出的唯一建议是您为您的样式设置一个 x:Key 值，并且仅在您需要的特定情况下在 ScrollViewer 元素上引用该样式，而不是将其应用于所有 ScrollViewer。然后，TextBox 的元素树中包含的 ScrollViewer 将无法识别它。有点痛苦，你失去了 WPF 模板的动态特性，但它应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-28T15:29:37.770

您的样式针对的是**所有**`ScrollViewer`类型的控件，`Window`因为该样式没有`x:Key`设置键 () - 这是一个问题，因为`TextBox`实际上`ScrollViewer`在其模板中使用了 a。

尝试使用`<Style x:Key="MyScrollViewerStyle" TargetType="{x:Type ScrollViewer}">`. 然后，您可以`ScrollViewer`像这样引用此样式：`<ScrollViewer Style="{StaticResource MyScrollViewerStyle}">`

# android - Android USB 自动授予权限

> ID：13647547
> 
> 赞同：2
> 
> 时间：2012-11-30T14:54:35.407
> 
> 标签：android

有没有办法访问 IUsbManager 接口类来调用 service.grantDevicePermission() 方法来自动设置 USB 设备的权限，而不总是让 ConfirmationActivity 出现询问用户？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-19T16:58:13.660

当然是的！你可以使用这个代码，为我工作：

```
public boolean grantAutomaticPermission(UsbDevice usbDevice)
 {
    try
    {
     Context context=YourActivityOrApplication;
     PackageManager pkgManager=context.getPackageManager();
     ApplicationInfo     appInfo=pkgManager.getApplicationInfo(context.getPackageName(), PackageManager.GET_META_DATA);

     Class serviceManagerClass=Class.forName("android.os.ServiceManager");
     Method getServiceMethod=serviceManagerClass.getDeclaredMethod("getService",String.class);
     getServiceMethod.setAccessible(true);
     android.os.IBinder binder=(android.os.IBinder)getServiceMethod.invoke(null, Context.USB_SERVICE);

     Class iUsbManagerClass=Class.forName("android.hardware.usb.IUsbManager");
     Class stubClass=Class.forName("android.hardware.usb.IUsbManager$Stub");
     Method asInterfaceMethod=stubClass.getDeclaredMethod("asInterface", android.os.IBinder.class);
     asInterfaceMethod.setAccessible(true);
     Object iUsbManager=asInterfaceMethod.invoke(null, binder);

     System.out.println("UID : " + appInfo.uid + " " + appInfo.processName + " " + appInfo.permission);
     final Method grantDevicePermissionMethod = iUsbManagerClass.getDeclaredMethod("grantDevicePermission", UsbDevice.class,int.class);
     grantDevicePermissionMethod.setAccessible(true);
     grantDevicePermissionMethod.invoke(iUsbManager, usbDevice,appInfo.uid);

     System.out.println("Method OK : " + binder + "  " + iUsbManager);
     return true;
    }
    catch(Exception e)
    {
     System.err.println("Error trying to assing automatic usb permission : ");
     e.printStackTrace();
     return false;
    }
 } 
```

我所做的是实现android使用反射的方式。要使用此代码，您必须具备：

```
<uses-permission android:name="android.permission.MANAGE_USB"/> 
```

但是有一个问题，我不太清楚，如果我错了，请纠正我：用户拥有权限，而不是应用程序，那么如果您尝试从应用程序仪表板启动应用程序，您将失败。有必要确保 android 开始您的应用程序，例如，将其设置为启动器并让它以 HOME 意图启动。

问候，期望可以帮助某人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-05T22:10:44.527

是的你可以，

如果您采用@CristhianB 发布的代码，您将能够完成它，但这是一个地狱，您需要使用以下方法之一让它工作：

1.  将您的应用程序移动到 priv-app 文件夹并设置权限以作为系统应用程序运行。（带有 userId 和用户组）

2.  和@CristhianB 做的一样（设置应用程序作为系统服务运行，这实际上是设置它作为启动器运行。

3.  使用您的密钥重新签署操作系统，然后在您的应用程序清单中设置权限属性 android:protectionLevel="signatureOrSystem" 并且您是黄金！

第三种方法允许您的应用程序做任何您想做的事情，因为它将使用与系统密钥相同的密钥进行签名，这意味着您作为系统应用程序运行，但您不必在 priv-app 文件夹中安装您的应用程序。

如果您对此事有任何疑问，我很乐意为您提供帮助，我刚刚实施了同样的事情，我花了三周时间才完成它，这样我可以为您节省很多时间。:-)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-30T16:02:51.587

当然不是。这将使首先获得权限的全部意义无效。但是用户可以选择总是允许特定的连接。

# python - 按标签顺序分组html内容

> ID：13647548
> 
> 赞同：2
> 
> 时间：2012-11-30T14:54:35.920
> 
> 标签：python, html-parsing, beautifulsoup

我有一个类似于以下内容的 html 文件：

```
 <h2>section 1</h2>
    <p>para 1</p>
    <p>para 2</p>
    <p>para 3</p>
    <h2>section 2</h2>
    <p>para 1</p>
    <p>para 2</p>
    <p>para 3</p>
    <h2>section 3</h2>
    <p>para 1</p>
    <p>para 2</p>
    <p>para 3</p> 
```

我想将它们刮到 python 字典`{'section1':'...', 'section2':'...', 'section3':'...'}`中：当然我可以设置一个`current_section`变量并使用一个 while 循环，但是有没有用于此目的的模块？我检查了 BeautifulSoup，但没有找到捷径。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T15:52:52.917

据我所知，没有任何内容`soup.group_by_header()`，但是对于您描述的输入，您想要在任何情况下都相当简单地实现：

```
>>> from bs4 import BeautifulSoup     
>>> html = """
...     <h2>section 1</h2>
...     <p>para 1</p>
...     <!-- etc. -->
... """
>>> soup = BeautifulSoup(html)
>>> sections = {}
>>> for header in soup("h2"):
...     paras = []
...     for sibling in header.find_next_siblings(text=False):
...         if sibling.name == "h2":
...             break
...         paras.append(sibling.string)
...     sections[header.string] = paras
... 
>>> sections
{u'section 1': [u'para 1', u'para 2', u'para 3'],
 u'section 2': [u'para 1', u'para 2', u'para 3'],
 u'section 3': [u'para 1', u'para 2', u'para 3']}
>>> 
```

这种方法是否由于某种原因存在问题，或者您只是想知道是否有一些聪明的 BeautifulSoup 方法可以解决这个问题（公平地说，其中有一些）？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T15:08:08.843

我想你想要`string`内置的`split`方法。如果你得到的文字在`html_string`你可以做

```
sections = html_string.split('<h2>')  #this deletes the opening h2 tag
for section in sections:
    section = '<h2>' + section   #replace the opening h2 tag
    #code to parse each section goes here 
```

这应该比使用`while`循环更干净。

# ruby-on-rails - 如何使用瘦和 ssl 获得干净的输出？

> ID：13647553
> 
> 赞同：1
> 
> 时间：2012-11-30T14:55:09.460
> 
> 标签：ruby-on-rails, ssl, thin

我使用 Rails 3.0.x，但输出很薄。

当我使用：

```
rails server thin 
```

Thin 显示处理的请求列表，并记录它们，几乎与 webrick 完全一样。这很棒，但是我没有找到任何方法在 ssl 模式下使用此命令使用 Thin。

[要在 ssl 模式下使用 Thin，如此处](https://stackoverflow.com/questions/7125663/rack-ssl-not-working-with-thin)所示，我使用以下命令（加上 ssl 的参数）：

```
thin start --ssl ... 
```

使用此命令，日志仍然很好，但 Thin 不会在标准输出中输出任何内容。

所以我尝试了：

```
thin start --trace 
```

但是现在 Thin 在标准输出中写入所有请求*和所有响应*（！），包括 javascript、图像等。

**在 ssl 模式下使用 Thin，有没有办法像 webrick 那样输出所有处理的请求？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:51:21.127

使用以下命令启动 Thin 时：

```
rails server thin 
```

可能的选项在 Rack::Server#start 中从 Rack 传播到 Thin：

```
server.run wrapped_app, options 
```

但是在 Rack::Handler::Thin#run 中，我们可以看到处理程序没有使用这些选项：

```
 module Rack
  module Handler
    class Thin
      def self.run(app, options={})
        app = Rack::Chunked.new(Rack::ContentLength.new(app))
        server = ::Thin::Server.new(options[:Host] || '0.0.0.0',
                                    options[:Port] || 8080,
                                    app)
        yield server if block_given?
        server.start
      end
    end
  end
end 
```

通过命令行在 ssl 模式下使用 Thin 时：

```
thin start --ssl 
```

选项在 Thin::Runner#parser 中解析，然后在 Controllers::Controller#start 中使用

我建议使用类似于 Controllers::Controller#start 的内容对 Rack::Handler::Thin#run 进行猴子补丁。

结果将是这样的：

```
 module Rack
    module Handler
      class Thin
        def self.run(app, options={})
          app = Rack::Chunked.new(Rack::ContentLength.new(app))
          server = ::Thin::Server.new(options[:Host] || '0.0.0.0',
                                      options[:Port] || 8080,
                                      app)
          server.ssl = true
          server.ssl_options = { :private_key_file => PATH_TO_KEY_FILE, :cert_chain_file => PATH_TO_CERT_FILE }
          yield server if block_given?
          server.start
        end
      end
    end
  end 
```

# objective-c - 将具有相同名称的重复元素解析为 NSArray？

> ID：13647556
> 
> 赞同：2
> 
> 时间：2012-11-30T14:55:15.700
> 
> 标签：objective-c, xml, xml-parsing, nsxmlparser, xcode4.5

所有元素都存储在 NSStrings 中，除了 dog 存储在 NSArray 中。我希望将所有狗条目添加到 NSArray。现在只有一个狗值被添加到数组中。如何将所有狗值添加到 NSArray？

```
<root>
         <element>
                <person>Jim<person/> 
                <age>21<age/>
                <dog>Labrador<dog/>
                <dog>Beagle<dog/>
                <dog>Yorkshire Terrier<dog/>
         <element/>
         <element>
                <person>Jill<person/> 
                <age>50<age/>
                <dog>Boxer<dog/>
                <dog>Pug<dog/>
                <dog>Labrador<dog/>
                <dog>Beagle<dog/>
                <dog>Yorkshire Terrier<dog/>
         <element/>
     </root>

 - (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName 
      namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qualifiedName 
        attributes:(NSDictionary *)attributeDict {

        if([elementName isEqualToString:@"root"]) {
            //Initialize the array.
            appDelegate.entries = [[NSMutableArray alloc] init];
        }
        else if([elementName isEqualToString:@"element"]) {

            //Initialize the entry.
            anEntry = [[Entry alloc] init];

            //Extract the attribute here.
            anEntry.entryID = [[attributeDict objectForKey:@"id"] integerValue];

            NSLog(@"Reading id value :%i", anEntry.entryID);
        }

        NSLog(@"Processing Element: %@", elementName);
    }

    - (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string { 

        if(!currentElementValue) 
            currentElementValue = [[NSMutableString alloc] initWithString:string];
        else
            [currentElementValue appendString:string];

        NSLog(@"Processing Value: %@", currentElementValue);

    }

    - (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName 
      namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName {

        if([elementName isEqualToString:@"root"])
            return;

        if([elementName isEqualToString:@"element"]) {
            [appDelegate.entries addObject:anEntry];

            anEntry = nil;
        }
        else
            [anEntry setValue:currentElementValue forKey:elementName];

        currentElementValue = nil;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T16:20:19.767

这样做的原因是关键狗有多个值。
所以如果你说：

```
[anEntry setValue:currentElementValue forKey:elementName]; 
```

那么那个键（elementName）可能已经包含了一个值。你很好地使用了解析器，你已经理解了它是如何工作的，唯一的事情是你必须考虑所有的标签，而不仅仅是元素和根。在那个 if-then .else 你还必须考虑标签是狗的情况：

```
- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName 
  namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName {

    if([elementName isEqualToString:@"root"])
        return;

    if([elementName isEqualToString:@"element"]) {
        [appDelegate.entries addObject:anEntry];

        anEntry = nil;
    }
    else if([elementName isEqualToString: @"dog"])
    {
        [anEntry.dogs addObject: currentElementValue];
    }
    else
        [anEntry setValue:currentElementValue forKey:elementName];

    currentElementValue = nil;
} 
```

这种情况下，你的入口类应该有一个名为 dogs 的属性，它是一个 NSMutableArray，可读。

# javascript - 如何测试用户界面小部件？

> ID：13647558
> 
> 赞同：2
> 
> 时间：2012-11-30T14:55:19.830
> 
> 标签：javascript, unit-testing, angularjs

在角度和一般的javascript中，如何对动作进行单元测试，例如，单击按钮应该显示对话框，在显示框时单击相同的按钮会隐藏框。我的问题是如何测试元素 dom 属性？在 GWT 中，一种称为 MVP（模型视图控制器）的模式设计。控制器在哪里测试，但不是视图！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T16:09:34.650

这已经在某种程度上得到了回答：[How to test behavior in the link function of a directive](https://stackoverflow.com/questions/13406491/how-to-test-behavior-in-the-link-function-of-a-directive)

Angular 选择的测试套件是[Jasmine](http://pivotal.github.com/jasmine/)。基本上你需要做的，在角度是`$compile`你的指令，然后`browserTrigger()`用来与它产生的DOM元素交互，但是你需要，然后在你的$scope中测试结果。

Angular 100% 构建时考虑到了可测试性。不需要像 Selenium 这样的产品。

如果您需要更多示例。我强烈建议直接进入[Angular 的 Git 存储库](https://github.com/angular/angular.js)，并[查看他们的指令测试](https://github.com/angular/angular.js/tree/master/test/ng/directive)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T14:57:12.563

您可以使用一些前端测试套件（例如[cucumber](http://cukes.info/)或[selenium](http://seleniumhq.org/)）来编写前端测试套件来检查浏览器行为。然后，您可以将测试套件设置为也可以在多个浏览器上运行，从而拥有一个可靠的 dom 测试平台。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-01T07:57:53.913

Vojta Jina（AngularJS 团队的成员）对此有一些很好的注释和示例代码：[https ://github.com/vojtajina/ng-directive-testing](https://github.com/vojtajina/ng-directive-testing)

# ruby-on-rails-3 - Display object attributes via a link_to from results of a scope

> ID：13647562
> 
> 赞同：0
> 
> 时间：2012-11-30T14:55:26.577
> 
> 标签：ruby-on-rails-3, activerecord

I seem to be getting a little muddled here, so clarification more than anything needed here please.

I have a simple recipe app that enable users to upload recipes, and i have a section where all recipes with the category Dessert are listed

This class method (just a scope really) gives all recipes that have the category Dessert

```
def self.dessert_recipes
self.where(:category => "Desserts")

end 
```

Within the controller I can then call this data to display in the view

```
@desserts = Recipe.dessert_recipes 
```

And then in my view i can see the name of the recipe that has the category dessert

```
 <% @desserts.each do |r| %>
<p><%= link_to r.dish_name, recipe %></p>
  <p> <%= r.author %></p> # this doesnt exsist yet but it will
 <% end %> 
```

What i want to do is click on the name of the recipe and it then take me to the show action for that particular recipe so that i can see the whole recipe from dish name to ingredients etc.

```
 <b><%= @recipe.dish_name %></b>
 <b><%= @recipe.catgegory %></b> 
```

etc etc

The show action in the controller looks like this

```
 @recipe = Recipe.find(params[:id]) 
```

Im guessing that i cant access the whole of the recipe as im trying to access it within a different instance class? Some pointers on this would help so that i can get my head around what is happening

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T08:34:59.167

Thank you to MrTheWalrus for this answer

link_to(r.dish_name, r)

# solr - 如何对我的 solr 结果进行排序以限制连续结果的数量？

> ID：13647571
> 
> 赞同：0
> 
> 时间：2012-11-30T14:56:08.397
> 
> 标签：solr, sunspot, websolr

假设我正在运行一个按分数排序的 solr 查询（默认）。我有一个字段“品牌”，其中包含福特、通用、丰田等。我希望返回查询结果，以便任何特定品牌只能有三个连续的结果？即使前 100 个结果是我查询的 Toyota，我仍然希望第 101 个元素被取出并显示在第 4 位（这样只有三辆 Toyota 汽车可以按顺序显示）。

我需要能够翻阅结果。

我正在使用 RoR/太阳黑子仅供参考。

那可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T20:35:35.907

不确定你是否能得到你想要的，但我建议你看看[result grouping](http://wiki.apache.org/solr/FieldCollapsing)。它允许您对特定字段具有相同值的结果进行分组，就像`brand`您的情况一样。`group.limit`然后，您可以通过参数（默认 1）定义每个品牌需要多少结果 。然后，您可以通过`group.offset`参数对分组结果进行分页。

只要您的`brand`字段不是多值的，它就应该起作用。

# powershell - 使用 Powershell 查找字符并重命名文件名

> ID：13647578
> 
> 赞同：3
> 
> 时间：2012-11-30T14:56:25.700
> 
> 标签：powershell, file-rename

我在具有这种命名约定的目录中有大量文件：“1050_14447_Letter Extension.pdf”等。我需要删除第二个下划线（包括第二个下划线）之前的所有字符。所以新的文件名是“Letter Extension.pdf”。如何相应地迭代单个目录重命名？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T15:08:49.710

这是一个重命名当前目录中所有 pdf 文件的示例，从文件名中删除所有前导数字或下划线：

```
Get-ChildItem -Filter *.pdf | Rename-Item -NewName {$_.Name -replace '^[0-9_]+'} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T18:01:07.203

这是另一种不依赖正则表达式但假定文件路径中没有下划线的方法：

```
Get-ChildItem 'C:\path2files' | %{
    Rename-Item $_.fullname $_.Name.Split("_")[2]
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T15:05:02.890

给定一个像“1050_14447_Letter Extension.pdf”这样的字符串，这是一种方法：

```
$foo = "1050_14447_Letter Extension.pdf"
$foo -replace '^.*_.*_(.*)$', '$1' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T23:23:37.177

这将处理文件名中任意数量的下划线（忽略路径）并在生成新名称时跳过所有内容，包括最后一个下划线：-

```
Get-ChildItem 'C:\somedir' -Filter *.pdf |`
%{Rename-Item $_.Fullname ($_.Name.Split("_")|`
select -last 1)} 
```

您可以使用 rename-item 命令上的 -whatif 开关进行测试，例如

```
gci 'R:\TECH' -Filter *.pdf|`
%{rename-item -whatif $_.Fullname ($_.Name.Split("_")|`
select -last 1)} 
```

回报：

如果：对目标“项目：R:\TECH\38415_JOBS121121155535240.pdf 目标：R:\TECH\JOBS121121155535240.pdf”执行“重命名文件”操作。如果：对目标“项目：R:\TECH\CHG38415_JOB_121112153717550.pdf 目标：R:\TECH\121112153717550.pdf”执行“重命名文件”操作。如果：对目标“项目：R:\TECH\CHG38415_PREH_121113152548740.pdf 目标：R:\TECH\121113152548740.pdf”执行“重命名文件”操作。如果：对目标“项目：R:\TECH\CHG38415_PREI_121113152600640.pdf 目标：R:\TECH\121113152600640.pdf”执行“重命名文件”操作。如果：对目标“项目：R:\TECH\MCPTEST121125121201390.pdf 目标：R:\TECH\MCPTEST121125121201390.pdf”执行“重命名文件”操作。如果什么：对目标“项目：R:\TECH\PREHAND_38415_121121154127000.pdf 目标：R:\TECH\121121154127000.pdf”执行“重命名文件”操作。如果：对目标“项目：R:\TECH\PREIMP_38415_121121154140630.pdf 目标：R:\TECH\121121154140630.pdf”执行“重命名文件”操作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-14T17:13:30.927

[这是使用StringSolver](https://github.com/MikaelMayer/StringSolver)自动化工具的另一种方法。安装后，该`mv`命令增加了半自动决策程序。

您将首先执行以下操作：

```
mv "1050_14447_Letter Extension.pdf" "Letter Extension.pdf" 
```

然后你会问什么是广义转换：

```
mv --explain 
```

它会告诉你类似 ``

> 连接文件名及其扩展名，从第一个单词开始，用 '.' 分隔

这还不是你想要的。您需要的是再举一个例子，例如：

```
mv --explain "25771_144_ 17Your file_name.pdf" " 17Your file_name.pdf" 
```

> 在第二个 '_' + 常量字符串 '.' 之后开始的文件名 + 扩展

所以现在你可以这样做：

```
mv 
```

它将执行转换。

免责声明：出于学术目的，我是该作品的合著者。其他示例可在[youtube](http://www.youtube.com/watch?v=NNFY9azdblQ&list=UUzgLw5m__x6tRoy4wW4OPow&feature=share)上找到。

# sql - 我执行此查询时出错，有什么建议吗？

> ID：13647583
> 
> 赞同：1
> 
> 时间：2012-11-30T14:56:38.977
> 
> 标签：sql, sql-server, database

我想计算客户完成的订单的总价格：

```
SELECT 
    C.ctm_Id, O.OrderId, SUM(P.pdt_UnitPrice * O.Quantity), 
FROM 
    Customer C, Orders O, Product P
WHERE 
    P.pdt_Id = O.OrderID GROUP BY C.ctm_Id 
```

这是错误：

> *消息 156，级别 15，状态 1，第 2 行
> 关键字“FROM”附近的语法不正确。*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T14:57:34.543

额外的逗号：

```
SELECT C.ctm_Id, O.OrderId, SUM(P.pdt_UnitPrice * O.Quantity), 
                                                             ^-- here 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T14:57:46.260

去除 FROM 前的昏迷

```
SELECT C.ctm_Id, O.OrderId, SUM(P.pdt_UnitPrice * O.Quantity) 
    FROM Customer C, Orders O, Product P
    WHERE P.pdt_Id = O.OrderID GROUP BY C.ctm_Id 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T14:58:05.370

`SUM(P.pdt_UnitPrice * O.Quantity),` - 额外的`,`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-30T15:09:53.107

尝试 `SELECT C.ctm_Id, O.OrderId, SUM(P.pdt_UnitPrice * O.Quantity) FROM Customer C, Orders O, Product P WHERE P.pdt_Id = O.OrderID GROUP BY C.ctm_Id,O.OrderId`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-30T15:35:24.143

这个问题是您必须在 GROUP BY 子句中包含所有不在聚合函数中的列。您没有在 GROUP BY 子句中添加 O.OrderId 。

luchosrock 提到的是更好的方法。

但是，我强烈建议使用 JOIN。顺便说一句，您也没有在 Customer 和 Order 表之间建立连接。

您想对客户的订单总价求和。您的查询应如下所示：

```
select
    C.ctm_Id,
    O.OrderId,
    SUM(P.pdt_UnitPrice * O.Quantity)
from Customer C
join Orders O
    on C.ctm_Id = O.ctm_Id
join Product P 
    on O.pdt_Id = P.pdt_Id
group by C.ctm_Id, O.OrderId 
```

# c# - 甚至在后台执行任务

> ID：13647584
> 
> 赞同：2
> 
> 时间：2012-11-30T14:56:46.743
> 
> 标签：c#, windows-phone-8, background-agents

> **可能重复：**
> [如何在 Windows Phone 后台运行应用程序？](https://stackoverflow.com/questions/13514064/how-to-run-application-in-background-in-windows-phone)

我正在研究 Windows Phone 8 SKD，以获取有关如何创建任务（准确地说是 FTP 写入）的示例，即使应用程序在后台，该任务也会定期执行。

该文档将我指向[后台代理](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202941%28v=vs.105%29.aspx)，因为后台传输服务“仅支持使用 HTTP 和 HTTPS 进行传输。不支持 FTP”。我一直在尝试和测试样本，除了无法设置后台代理事件时间这一事实之外，一切正常（或多或少）。根据文档“定期代理通常每 30 分钟运行一次”，并且没有方法/类/构造函数具有时间/日期参数。您有 ScheduledActionService.LaunchForTest(task, Time) 但它只能在调试期间使用，而不是在生产中使用，并且可以使 MS 拒绝您的应用程序进入市场。

是否有任何解决方案或解决方法可以让我的代理每分钟都启动？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T20:37:16.863

当您的应用程序不在前台运行时，您不能让您的应用程序每 1 分钟执行一次代码。通常您会使用所谓的 PeriodicTask 或 ResourceIntensiveTask 进行后台执行。第一个每约 28 分钟运行一次，可以使用不超过 6MB 的内存（WP8 上为 11MB），并且必须在约 20 秒内完成执行。第二个可以运行更长的时间并使用更多的内存，但它有一些严格的要求，例如手机对 Wi-Fi 信号、充电器等...

您可以在 WP8 上做的另一件事是实现位置跟踪应用程序，如果它正在主动跟踪用户的位置，它可以在后台运行。如果您的应用程序是基于位置的，您可以使用它并每 1 分钟下载一次您想要的任何内容。但是，如果您的应用程序不是基于位置的，那么您很可能不走运。

如何在 WP8 中使用位置跟踪和后台执行：http:
[//msdn.microsoft.com/en-us/library/windowsphone/develop/jj681691 (v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj681691(v=vs.105).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T15:07:56.220

不，WP8 平台并不像你想象的那样真正支持后台任务。这是通过在后台运行应用程序来限制破坏性电池寿命的故意尝试。

如果您确实需要在应用程序不活动时运行某些东西，后台代理是提供的解决方案，但它们不是您可以安排的东西。

该平台希望您切换到一个模型，其中轮询操作被推送通知取代，并且尽可能多的重要处理在设备之外执行。

# php - 循环记录时设置执行超时时间

> ID：13647586
> 
> 赞同：0
> 
> 时间：2012-11-30T14:56:58.130
> 
> 标签：php, timeout, execution

我想在 php 中设置执行超时。我想循环播放，例如由于我设置的执行时间，我想在 5 处切入。

```
ini_set('max_execution_time',2);
for ($i=0;$i<10;$i++){
    echo time();
    echo ' i:'.$i;
    echo "\n";
    echo "\n";
} 
```

想给它一个限制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T15:01:27.733

使用`ini_set('max_execution_time',2);`会影响整个 PHP 脚本，并可能导致

```
Fatal error: Maximum execution time of 2 second exceeded 
```

您可以简单地将时间计算添加到`for`循环中；

```
$maxTime = 2; // sec ;
$start = time();
echo "<pre>";
for($i = 0; $i < 10, (time() - $start) < $maxTime; $i ++) {
    echo time();
    echo ' i:' . $i;
    echo "\n";
    echo "\n";
    sleep(1); // slow the script
} 
```

输出

```
1354287243 i:0

1354287244 i:1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T15:01:53.300

您可以在循环之前使用 time() 获取时间戳。并在 forloop 中进行额外的测试。

```
$startTime = time();
for ($i=0;$i<10 && time() < $startTime + 1000;$i++){
    echo time();
    echo ' i:'.$i;
    echo "\n";
    echo "\n";
} 
```

# java - GWT 客户端的 YouTube 身份验证

> ID：13647589
> 
> 赞同：1
> 
> 时间：2012-11-30T14:57:06.857
> 
> 标签：java, gwt, authentication, youtube-api

我正在开发一个与 YouTube 集成的 GWT 应用程序。作为第一步，我需要能够向 YouTube API 验证 GWT 应用程序，但我不确定如何去做，因为似乎很少有这方面的已发布信息。验证后，我需要代表我的应用（而不是用户）将视频上传到 YouTube。

**如何向 YouTube API（最好在客户端）验证我的 GWT 应用程序？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T16:22:43.857

您应该使用 OAuth 2 处理身份验证/授权。我不进行 GWT 开发，所以我没有亲自使用过这个库，但这是谷歌搜索结果：[http ://code.google.com/p/ gwt-oauth2/](http://code.google.com/p/gwt-oauth2/)

您不应将视频上传到单个主帐户。相反，您应该使用在用户授权访问后取回的 OAuth 2 令牌，并将视频上传到每个用户的帐户。在这篇博文中有更多关于为什么这是推荐方法的信息：http: [//apiblog.youtube.com/2012/02/video-uploads-from-your-sites-community.html](http://apiblog.youtube.com/2012/02/video-uploads-from-your-sites-community.html)

# html - 什么只能用 CSS 来完成，而不能用普通的 DOM 样式属性来完成？

> ID：13647599
> 
> 赞同：0
> 
> 时间：2012-11-30T14:57:37.570
> 
> 标签：html, css

我想知道使用 CSS 可以“仅”完成哪些事情，而使用 Javascript 动态更新的样式“属性”是不可用的。到目前为止我知道：

*   媒体查询
*   伪标签

还有吗？

**更新：**

这个问题已结束，但我在尝试决定用于项目的技术时提出了这个问题，但其中一个选项不能使用 CSS 样式表，只能使用 javascript 操作样式属性。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T15:01:18.763

内联样式属性只能包含属性声明（例如`width: 10px`或`color: red`）。它们不能包含任何其他 CSS 结构：不能包含选择器、规则（例如`@import`、`@media`、`@font-face`）等。只是属性声明。

但是，它们在级联中扮演着重要角色：具有该属性的元素的任何样式都具有最高优先级（`!important`当然是在考虑之后）。

顺便说一下，实际上[有一整套专门用于样式属性的模块](http://www.w3.org/TR/css-style-attr)，但这不是作者的必读内容。

因此，任何不是 CSS 声明的东西都只能在样式表中出现，而不是在样式属性中。不知道你问的是不是这个...

请注意，媒体查询和`@media`规则不是一回事；媒体查询也可以存在于样式表之外的区域中，例如 HTML 的`media`属性，它们是下一个最常见的地方。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-30T15:04:32.980

我相信伪类（`:hover`等）和伪元素（`:after`, `:before`）不能通过 JS（我的意思是通过 style 属性）添加/操作，因为它们不是 DOM 的一部分。

# database - oracle 中的隔离级别

> ID：13647604
> 
> 赞同：7
> 
> 时间：2012-11-30T14:57:48.320
> 
> 标签：database, oracle, isolation-level, transaction-isolation

我想知道关于提交的不同隔离级别，也想知道行级和表级锁。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-02-01T12:41:22.017

ANSI/ISO SQL 定义了四个隔离级别：

*   可序列化
*   可重复阅读
*   读已提交
*   读未提交

根据 Oracle 的数据库开发指南，[第 6.6.1 章：事务交互和隔离级别](http://docs.oracle.com/database/121/ADFNS/adfns_sqlproc.htm#BEJDDAGA)，您可以请求隔离级别`READ COMMITTED`（默认）或`SERIALIZABLE`.

但是请注意，Oracle 所说`SERIALIZABLE`的实际上是[快照隔离](https://en.wikipedia.org/wiki/Snapshot_isolation)。

有关行级和表级锁的更多信息，请参阅[Oracle 数据库锁定机制概述](http://docs.oracle.com/database/121/CNCPT/consist.htm#CNCPT1331)和[显式锁定表](http://docs.oracle.com/database/121/ADFNS/adfns_sqlproc.htm#ADFNS00203)。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2014-05-29T05:04:10.757

有四个隔离级别

1.  读取未提交或读取脏缓冲区
2.  已提交或重复读取
3.  幻读
4.  可序列化

# javascript - 如何让一个 jQuery 插件同时作用于多个元素？

> ID：13647605
> 
> 赞同：7
> 
> 时间：2012-11-30T14:57:49.740
> 
> 标签：javascript, jquery, jquery-plugins

我制作了一个组合框插件。要使用它，您只需调用

```
$(elem).combobox(compensateElement); 
```

编辑：问题是，如果你这样做

```
$('#1').combobox('form');
$('#2').combobox('form'); 
```

插件会坏...

elem 是要变成组合框的 select，compareElement 是一个元素，插件可以在其后插入一个 div，该 div 的长度是SuggestionsDiv-20px 高。（我的页面上有一个没有被绝对定位元素向下推的页脚......）

现在，问题是这个插件只能在一个元素上使用！如何更改它以便它可以同时处理多个元素？这是一百多行 JS 代码，所以我不指望“转换”的代码！

我曾考虑将所有特定于元素的变量放入 this.data “对象”中，但感觉根本不是一个好的解决方案。在上面运行了一些 RegEx 查找和替换并配置了几个小时后，我根本没有让它工作......

我可以使用哪些技术？

非常感谢您的宝贵时间！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-30T15:16:48.857

问题是您有一个[文字对象](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Values,_variables,_and_literals#Object_literals)，每次调用时都会替换他的内容`m.init()`。

我建议你看看[这篇文章](http://coding.smashingmagazine.com/2011/10/11/essential-jquery-plugin-patterns/)，它解释了编写 JQuery 插件的好方法。如果你看到“轻量级启动”，例如：

```
$.fn[pluginName] = function ( options ) {
        return this.each(function () {
            if (!$.data(this, 'plugin_' + pluginName)) {
                $.data(this, 'plugin_' + pluginName,
                new Plugin( this, options ));
            }
        });   
    } 
```

这将为每个元素创建一个插件对象的新实例，因此您可以始终如一地保持状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T15:09:08.730

您可以使用 jQuery 的 each 函数在每个元素上调用插件方法。请记住，在您的方法中，关键字`this`将指向当前元素而不是 jQuery 对象。

```
 $.fn.combobox = function(form) {
        var $this = this;

        return $this.each(function () {
             if (!m.initialized) {
                m.init.apply(this, [form]);
                $this.data('initialized', true);
             } else {
                m.updateList.apply(this);
             }
        });
    }; 
```

# html - 在 Magento 上自动缩小整个网站？

> ID：13647610
> 
> 赞同：2
> 
> 时间：2012-11-30T14:57:59.253
> 
> 标签：html, css, zooming

有没有办法让我的网站自动缩小到 90%？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T15:04:00.237

这可以使用 css3 scale 属性来完成，但要注意并非所有浏览器都支持。

[http://www.w3schools.com/css3/css3_2dtransforms.asp/](http://www.w3schools.com/css3/css3_2dtransforms.asp/)

```
 body{

       transform: scale(0.9);
    -ms-transform: scale(0.9); /* IE 9 */
    -webkit-transform: scale(0.9); /* Safari and Chrome */
    -o-transform: scale(0.9); /* Firefox */

} 
```

或者通过在站点外的内容周围附加一个 div 并缩放到正文宽度的 90% 来使用跨浏览器的 jquery 和 javascript；

大致像

```
var bdwidth = $("body").width();

$("wrapper").width((bdwidth / 100)*90); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-14T08:29:30.027

使用 CSS

```
body {
    -moz-transform: scale(0.9, 0.9); /* Moz-browsers */
    zoom: 0.9; /* Other non-webkit browsers */
    zoom: 90%; /* Webkit browsers */
} 
```

这对我有用！

# java - 如何构建图形交互小程序？

> ID：13647617
> 
> 赞同：0
> 
> 时间：2012-11-30T14:58:19.117
> 
> 标签：java, jakarta-ee, graphics

我想知道如何构建交互式浏览器应用程序，而 java-applet 是否适合以下应用：

*   用户应该有某种盘子，他可以在其中创建/拖动/连接对象

*   这些对象将是一种状态机，其中每个对象都可以连接到另一个对象，可以具有已定义的状态，并且可以在预先确定的操作上更改其状态。或者，用户应该能够定义这些动作。

*   对象不应看起来像老式的 java Swing/AWT 元素。我想要一些漂亮的标准元素，比如圆圈、reagtangles、箭头、线条等，它们可以很好地适应当前的 webarea。

所以：整个板块必须是互动的，上面的元素也是如此。我怎样才能最好地构建这类应用程序？我不应该错过哪些技术/框架/库？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T20:45:32.947

It's possible to do it with Java, but keep in mind that the trend has for a long time now been to move away from applets. Many browsers (e.g., iOS and currently Chrome on Mac) won't run Java at all. And many more disable it by default.

Your best option is HTML5/JavaScript. Have a look at the [HTML5 Canvas](https://developer.mozilla.org/en-US/docs/Canvas_tutorial) element. With it you can draw your shapes and then manage user interaction with JavaScript.

# java - 为什么 java.util.Scanner 不能将 0700 视为八进制文字？

> ID：13647618
> 
> 赞同：0
> 
> 时间：2012-11-30T14:58:20.267
> 
> 标签：java, octal

```
 public static void main(String argv[]){
         String a="0700";
         Scanner s = new Scanner(a);
         while(s.hasNextLong()){
              System.out.print(s.nextLong()+",");
         } 
```

结果将是“700”，而不是“448”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T15:01:51.550

默认情况下，扫描器假定该数字以 10 为基数，并将忽略前导 0。如果需要，您可以指定另一个基数 - 下面的代码打印 448：

```
public static void main(String[] args) {
    String a = "0700";
    Scanner s = new Scanner(a);
    while (s.hasNextLong(8)) { //make sure the number can be parsed as an octal
        System.out.print(s.nextLong(8)); //read as an octal value
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T15:04:45.663

您可以使用方法设置默认基数`Scanner#useRadix(radix)`或将基数显式传递给`Scanner#hasNextLong(radix)`和`Scanner#nextLong(radix)`方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T15:04:33.197

阅读[文档](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#nextLong%28%29)。它说它将使用扫描仪的默认基数。如果默认值不可接受，那么您可以使用`useRadix(int radix)`方法更改它或使用`nextLong(int radix)`临时更改基数。

# .net - 循环通过VB.NET中的串口（COM端口）并检测设备使用的正确端口

> ID：13647622
> 
> 赞同：0
> 
> 时间：2012-11-30T14:58:38.117
> 
> 标签：.net, vb.net, io, serial-port, port-scanning

好的，让我向您介绍我正在使用的软件和应用程序的详细信息：

*   **Windows 7 专业版**
*   **微软视觉工作室终极版 2010**
*   **VB.NET**
*   **.NET 4.0 框架**

我的设备是一个简单的数据传输设备，它获取用户输入的数据，如姓名、年龄、性别，然后将其传输到PC软件。

我已经有了 PC 软件的源代码，`C#`我是一个 VB 人。我已经通过互联网上的许多教程来学习串行端口通信，但我想也许我无法理解逻辑，或者这可能不适合我的项目。所以我需要你们的帮助。

我在互联网上进行了很多搜索，发现很少有资源可以解释我如何与串行端口通信，但这些都不适合我：

1.  [使用 VB.NET 使 COM 端口变得简单](http://www.codeproject.com/Articles/5131/COM-port-made-simple-with-VB-NET)
2.  [VB.NET中的串口通信](http://www.codeworks.it/net/VBNetRs232.htm)
3.  [与 VB.net 2010 的串行端口接口](http://tiktakx.wordpress.com/2010/11/21/serial-port-interfacing-with-vb-net-2010/)
4.  [串行 COM 端口通信](http://www.innovatic.dk/knowledg/SerialCOM/SerialCOM.htm)

以前的软件用于扫描所有可用`IO` `PORTS`的并评估来自串行端口的传入数据。最后，它根据这些数据检测设备。

该软件设置为`BaudRate = 19200` `DataBits = 8` `StopBits = StopBits.One` `Encoding = Encoding.GetEncoding(1252)` `DataReceived += new SerialDataReceivedEventHandler(portDataReceived)`

但是，通过教程，我理解了此处指定的术语，但是如何与设备准确通信并检查哪个端口是正确的仍然是一个问题。

所以我理解对我来说需要的是：

1.  循环通过所有可用的通信端口
2.  接收他们发送的数据
3.  然后分析该数据并与源代码的标准数据匹配（提供给我）
4.  如果识别出正确的端口，则开始从中接收数据。

我需要的是让你们深入了解究竟需要什么资源，因为我已经搜索和阅读了很长时间，但无法准确地得到我正在寻找的东西。也许我不知道逻辑和主题，所以如果正确的资源仍然可见，我会忽略它。只是我是串行端口通信的新手。

另外，也许您可​​能需要我身边的许多其他问题来帮助我解决这个问题，而我没有提出您。所以请让我知道您需要我提供的所有信息，如果可以的话，我会尽力帮助您。

**编辑-1**

我使用了一个`Port Monitoring Software`它给了我这些原始数据，这让我很兴奋......

![在此处输入图像描述](../Images/525fdc689a1abf013bf460464026fdc0.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T15:02:15.620

您提出的（打开每个端口并尝试通信）正是您需要做的。

没有标准的方法来做到这一点。这取决于设备。在不知道用于与您的设备通信的协议的情况下，没有人可以告诉您如何执行此操作。串口没有什么特别的……它只是发送和接收数据。协议实现由您决定。

# php - 在 PHP 中使用 MySQL 查询填充下拉列表

> ID：13647624
> 
> 赞同：0
> 
> 时间：2012-11-30T14:58:44.230
> 
> 标签：php, html, mysql

我想使用以下代码来填充所有客户类型的下拉列表：

```
<select name="type" id="type" class="neutral">
<?php   // SQL QUERY TO RETRIEVE EVERY TYPE OF CUSTOMER
$sql = "SELECT CUST_TYPE FROM `CUSTOMER` GROUP BY `CUST_TYPE`";
$result = mysql_query($sql);
while($row = mysql_fetch_assoc($result)){echo '<option value="'.$row.'">'.$row.'</option>';}
                ?> 
```

该查询在 phpMyAdmin 中工作；它给出了正确的输出（企业、其他、学校、体育），但在网页中它显示了一个包含 4 个选项的下拉列表，所有选项都包含“数组”一词。请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T15:00:18.740

尝试

```
while($row = mysql_fetch_assoc($result)){
    echo '<option value="'.$row['CUST_TYPE'].'">'.$row['CUST_TYPE'].'</option>';
} 
```

# jquery - jQuery 自动完成 - 添加到底层本地数据源数组

> ID：13647629
> 
> 赞同：0
> 
> 时间：2012-11-30T14:58:51.767
> 
> 标签：jquery

在这个使用 jQuery 自动完成的基本示例中：

```
$("#textboxid").autocomplete(
    {
        source: testdata,
        delay: 100,
        minLength: 1
    }); 
```

本地数据数组在哪里`testdata`，对基础源数组进行任何更改的推荐方法是什么，反映在自动完成选项中？

目前，如果我随后将一个新项目添加到`testdata`数组中（即在文本框元素上设置了自动完成之后），我在自动完成列表中看不到该新选项。如果我向页面动态添加一个新文本框并设置为自动完成，它确实会看到新选项。但现有元素没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T15:03:48.413

最灵活的方法是使用回调作为源，它轮询您的数组/对象/服务器以获取数据并返回适当的响应。

这是一个如何测试的示例：

```
var testdata = ["foo","bar","baz","quux"];
$("#textboxid").autocomplete({
    source: function(request, callback) {
        var possiblematches = testdata.filter(function(v) {
            return v.match($.ui.autocomplete.escapeRegex(request.term));
        });
        callback(possiblematches);
    },
    delay: 100
}); 
```

一个演示：http: [//jsfiddle.net/Eeg5L/](http://jsfiddle.net/Eeg5L/)。`source`可以在[此处](http://api.jqueryui.com/autocomplete/#option-source)找到有关该选项的文档和更多信息。

或者，您可以在修改数组后使用以下命令重置源：

```
$("#textboxid").autocomplete("option","source", testdata); 
```

我建议为您的数组使用一个设置器，它会在您修改数组时自动执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T15:03:51.123

当你更新`testdata`运行这个：

```
$('#textboxid').autocomplete('option', 'source', testdata); 
```

# javascript - Microsoft JScript 运行时错误：找不到成员

> ID：13647631
> 
> 赞同：8
> 
> 时间：2012-11-30T14:58:58.413
> 
> 标签：javascript, asp.net-mvc, jquery, partial-views, jquery-dialog

我正在使用 asp.net mvc3 和 jquery 对话框在主视图中打开部分视图

这是我的结构..

**局部视图 1**

```
<input type="button" onclick="function1();"> 
```

**局部视图 2**

```
<form method="post"> 
    //some elements

    @Html.RenderPartial("partialview1");
</form> 
```

**查看 1**

```
<script src="myscript.js" />
<script src="jquery.js"/> 
//some element

<div>
    load partialview 2 as jquery dialogue 
</div> 
```

**myscript.js**

```
 function function1()
  {
     //some code
  } 
```

这只是我的应用程序的概述

现在在上面的结构中，如果我单击**partialview1**中的按钮，我会收到此错误**：Microsoft JScript 运行时错误：找不到成员。**

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-01T05:35:24.963

我在我的案例中找到了解决方案。

```
<input id="function1" type="button" onclick="function1();"> 
```

我使用`id`了输入类型按钮（**即：）** `function1`作为函数的同名（**即：）** `function1`。

因为我对它了解不多。但是通过更改`id`按钮或功能名称可以解决我的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-05T15:33:49.117

实际上，“未找到成员”出现在所有浏览器和其他非浏览器程序上。在浏览器中，放置一个与其在表单中调用的函数同名的按钮或径向按钮会导致此错误。重命名按钮或将其移出表单。

# java - 通过 WAN 连接到以编程方式启动的 RMI 服务器

> ID：13647632
> 
> 赞同：1
> 
> 时间：2012-11-30T14:59:15.980
> 
> 标签：java, connection, rmi

我正在尝试连接到已在远程服务器上启动的 RMI 注册表，但一段时间后出现以下异常：

```
java.rmi.ConnectException: Connection refused to host: *.*.*.*; nested exception is:     
java.net.ConnectException: Connection timed out 
```

通过在服务器上本地运行客户端，一切正常，但我无法远程连接到它；甚至来自telnet。但是，如果我运行

```
start rmiregistry 1337 
```

我可以从 telnet 远程连接到它。我假设这是我在运行服务器代码时必须设置的东西，但我很难找出它是什么。

这是**服务器**代码的一部分：

```
String codeBasePath = "file:/C:/*path*/build/classes";

System.setProperty("java.rmi.server.codebase", codeBasePath);
System.setProperty("java.rmi.server.hostname", *host IP*);

RemoteFileServer server = new FileServer();

Registry registry = LocateRegistry.createRegistry(PORT);

registry.bind(*name*, server);

System.out.println("Server ready"); 
```

如果您需要更多信息/代码来帮助我弄清楚，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T08:34:27.897

好的，我能想到两个选择

1 - 您是否通过安全策略授予传入连接权限。这一步其实很简单，看这里：[rmi run tutorial](http://docs.oracle.com/javase/tutorial/rmi/running.html)

2 - 端口可能从操作系统外部关闭。例如，如果您使用的是 linux，您需要从 iptables 打开端口，例如： iptables -A INPUT -m state --state NEW -m tcp -p tcp --dport 1099 -j ACCEPT iptables -A OUTPUT -m state -- state NEW -m tcp -p tcp --dport 1099 -j ACCEPT 或者如果您使用 Windows，您可以从防火墙配置它。

如果有什么不清楚的可以问。

# silverlight - System.Windows.Browser.HtmlPage.Window.Navigate 不适用于 Chrome？

> ID：13647639
> 
> 赞同：2
> 
> 时间：2012-11-30T14:59:33.373
> 
> 标签：silverlight, google-chrome, silverlight-5.0

Silverlight 提供导航以从代码中打开新的浏览器窗口。它在 IE 上运行良好。但相同的代码不适用于 Chrome。

```
System.Windows.Browser.HtmlPage.Window.Navigate(new Uri("file://Mysite/Mydrive/Myfolder", "_blank"); 
```

使用 IE 运行，它将打开指向网络驱动器的新 Windows 探索点 使用 Chrome 运行，将打开带有 url about:blank 的新空白 Chrome 窗口。

如果直接将“file://Mysite/Mydrive/Myfolder”放在 Chrome 的 url 行中，它将列出文件夹，Chrome 窗口中此文件夹中的文件如下：

```
Index of //Mysite/Mydrive/Myfolder
Name    Size    Date Modified
[parent directory]      
Folder1/        8/1/12 11:17:16 AM
Folder2/        8/1/12 11:17:24 AM
File1.txt   8.5 kB  8/9/12 2:14:47 PM
File2.docx  12.4 kB 8/9/12 2:18:13 PM 
```

如何让它在 Chrome 上正常工作？

# macos - 使用包制造商将 .app 添加到停靠

> ID：13647644
> 
> 赞同：1
> 
> 时间：2012-11-30T14:59:42.860
> 
> 标签：macos, shell, packagemaker

我想使用包制造商创建一个包，在安装时将 .app 添加到扩展坞。我尝试了以下代码，从终端执行时可以正常工作：-

```
Apples-MacBook-Pro-2:~ apple$ defaults write com.apple.dock persistent-apps -array-add "<dict><key>tile-data</key><dict><key>file-data</key><dict><key>_CFURLString</key><string>/Applications/MyApp.app</string><key>_CFURLStringType</key><integer>0</integer></dict></dict></dict>"
Apples-MacBook-Pro-2:~ apple$ killall Dock 
```

我想在包装制造商上添加上述脚本。有人可以告诉我该怎么做吗？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-09T14:09:50.897

您可以使用一个称为“包”的工具，它带有预安装的脚本，可以选择将软件添加到停靠。

[使用以下链接获取软件包](http://s.sudre.free.fr/Software/Packages/about.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T17:28:16.323

`postinstall`您可以从包的脚本中执行任何其他操作。您需要做的就是包含一个安装后脚本（在您的情况下为 shell 脚本）并添加您在问题中提到的命令。这将在系统中安装所有文件后执行，之后您的停靠图标将被添加。

您可以查看以下链接以获取有关 packagemaker 的任何其他信息。 [http://macinstallers.blogspot.in/](http://macinstallers.blogspot.in/)

# asp.net - ASP 标签“方向”

> ID：13647645
> 
> 赞同：-2
> 
> 时间：2012-11-30T14:59:45.233
> 
> 标签：asp.net, html, css

我有以下标签和文本框 -

```
<div>

 <fieldset class="myform">
   <legend>Form</legend>

   <asp:Label ID="Label1" runat="server" AssociatedControlID="fname">First Name:</asp:Label>
   <asp:TextBox ID="fname" runat="server" CssClass="textEntry"></asp:TextBox> <br>

   <asp:Label ID="Label2" runat="server" AssociatedControlID="lname">Last Name:</asp:Label>
   <asp:TextBox ID="lname" runat="server" CssClass="textEntry"></asp:TextBox> <br>

   <asp:Label ID="Label3" runat="server" AssociatedControlID="town">Address1:</asp:Label>
   <asp:TextBox ID="address1" runat="server" CssClass="textEntry"></asp:TextBox> <br>

   <asp:Label ID="Label5" runat="server" AssociatedControlID="town">Town:</asp:Label>
   <asp:TextBox ID="town" runat="server" CssClass="textEntry"></asp:TextBox> <br>

  </fieldset>

 </div> 
```

输出是标签-（fname，lname，address等）很好地排列而文本框不是，我想做的是让文本框排列起来？

非常感谢任何帮助，谢谢

所以我想要这样

```
 First Name  [          ]
  Last Name  [          ]
    Address  [          ] 
```

等等

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T15:50:48.193

您在代码中添加一个类`labels`

```
 <div>

 <fieldset class="myform">
 <legend>Form</legend>

 <asp:Label ID="Label1" class="labels" runat="server" AssociatedControlID="fname">First   Name:</asp:Label>
 <asp:TextBox ID="fname" runat="server" CssClass="textEntry"></asp:TextBox> <br>

 <asp:Label ID="Label2" class="labels" runat="server" AssociatedControlID="lname">Last Name:</asp:Label>
 <asp:TextBox ID="lname" runat="server" CssClass="textEntry"></asp:TextBox> <br>

 <asp:Label ID="Label3" class="labels" runat="server" AssociatedControlID="town">Address1:</asp:Label>
 <asp:TextBox ID="address1" runat="server" CssClass="textEntry"></asp:TextBox> <br>

 <asp:Label ID="Label5" class="labels" runat="server" AssociatedControlID="town">Town:     </asp:Label>
 <asp:TextBox ID="town" runat="server" CssClass="textEntry"></asp:TextBox> <br>

</fieldset>

</div>​​​ 
```

那么你的CSS可能是这样的。

```
.myform {text-align:right;width:300px; }
.labels {padding-right:10px;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T15:04:26.923

使用您的样式。

在你的 CSS 类型中

```
.textEntry {left:20px;} 
```

20是随机数；您可以根据需要进行调整。这将导致您的所有文本框与左侧的特定距离对齐

# java - 每x转改变一个二维数组的值？

> ID：13647646
> 
> 赞同：1
> 
> 时间：2012-11-30T14:59:56.793
> 
> 标签：java, coordinates

我正在创建一个“避免积木”游戏，为此我需要使用 GHKJ 键在网格（2D 数组）周围移动一个角色。每 x 圈数（随着等级的增加而减少）必须出现一个阴影，然后该阴影变成一个块，如果玩家进入该块，他们就会失去生命。除了让块出现的看似简单的任务之外，大部分这些都是为我完成的，这是我到目前为止用于下降块的代码：

```
public void rocked(){
int rockInit = turn;        
    if(rockInit > 1){
        int save = turn;
        System.out.println(turn + " ");
        B.board[ran.nextInt(12)][ran.nextInt(12)] = shadow;
            if(save == turn - 3){
                B.board[rockLocX][rockLocY] = rock;
        } 
    } 
} 
```

system.println 仅用于调试目的，检查正在访问的值。玩家每走一步，Turn 就增加 1，ran.nextInt(12) 是 0 到 11 之间随机生成的数字，B.board 是棋盘。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T15:18:51.133

将其初始化为“转”后，您似乎永远不会更改“保存”。因此，当您检查 if(save == turn-3) 时，它将始终为 false，因此永远不要将块移入。如果您想跟踪经过了多少转，我会推荐一个私有实例变量“ int turnPassed”，您可以每转一圈递增。然后对于每个级别，您可以检查是否 (turnsPassed % x == 0)，其中 x 与您描述的一样。希望有帮助！

# windows-phone-8 - WP8 中的捏合手势

> ID：13647652
> 
> 赞同：0
> 
> 时间：2012-11-30T15:00:03.703
> 
> 标签：windows-phone-8, pinch

我正在尝试将现有的 wp7 应用程序移植到 wp8 并且地图存在问题。地图由 6 个瓷砖组成。一切都运行良好，但捏是可怕的。效果比在 WP7 上差很多。

WP8有什么变化吗？我发现的是来自微软演示文稿的小信息，它说在 WP8 中捏和拉伸的一些东西得到了改进

扩展 ManipulationDeltaEventArgs 类 PinchManipulation 属性 为原始手势和当前手势提供中心点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T20:15:10.353

my 0.02$: On WP8 you should move from Bing Maps to using the new Nokia Maps control @ [http://www.developer.nokia.com/Resources/Library/Lumia/guide-to-the-maps.html](http://www.developer.nokia.com/Resources/Library/Lumia/guide-to-the-maps.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T20:33:36.170

如果您刚刚将您的应用程序从 WP7 移植到 WP8，那么一切都应该像以前一样工作。唯一的问题可能是如果您在应用程序中硬编码了一些显示分辨率值，例如用于计算捏合手势，并且应用程序现在在具有 720p 显示的设备上运行 - 它的高度为 853 像素而不是 800 像素。
无论如何，正如贾斯汀所说，您可以在 WP8 中切换到新的诺基亚地图，但您仍然可以使用必应地图，尽管它们在 WP8 上已被弃用。您只需在文件夹中引用新的 WP8 Bing 地图库：

> C:\Program Files (x86)\Microsoft SDKs\Windows Phone\v8.0\Libraries

# php - 未因触发错误引发 PDO 异常

> ID：13647655
> 
> 赞同：1
> 
> 时间：2012-11-30T15:00:14.590
> 
> 标签：php, oracle, triggers, pdo

我将 PDO 与 OCI 驱动程序一起使用。我的一个特定`INSERT`查询导致触发错误：

```
ERROR at line 1:
ORA-01403: no data found
ORA-06512: at "FOO.BAR", line 5
ORA-04088: error during execution of trigger 'FOO.BAR' 
```

但是，发生这种情况时不会引发异常。我正在使用`ERRMODE_EXCEPTION`，并且对于标准查询语法错误等会引发异常，但对于源自触发器的任何错误则*不会。*

在这种情况下，调用`$st->execute()`也不返回`FALSE`。此外，`$st->errorInfo()`并且`$st->errorCode()`两者都无济于事：

```
array(3) {
  [0]=>
  string(5) "00000"
  [1]=>
  NULL
  [2]=>
  NULL
}
string(5) "00000" 
```

发生触发错误时，如何让 PDO 引发异常？或者，如果这是不可能的，我如何以编程方式检测何时通过其他方式发生这种情况？我什至知道首先发生错误（除了数据库未更新）`$st->rowCount()`的唯一方法是报告 0。但这本身并不是确定是否发生错误的唯一或可靠方法......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T15:28:48.587

不可能。触发器（和事件）基于数据库操作在数据库上运行，并且不直接绑定您的查询——至少在 PHP 方面是这样。您的 PDO 查询是成功的，这就是您的语句所知道的全部内容，触发器被设置为根据您的语句对某个表所做的任何结果的结果来做某事这一事实是无关紧要的。

您拥有的选项是：

1.  编写另一个查询以确认触发器应该执行的任何操作是否成功
2.  可能将初始查询包装到运行查询并验证触发器操作是否成功的存储过程中。然后调用该存储过程而不是直接运行查询。

# java - 保存 Java 应用程序数据的好方法是什么？

> ID：13647657
> 
> 赞同：4
> 
> 时间：2012-11-30T15:00:15.760
> 
> 标签：java, save

我是 Java 新手，我想知道应该怎么做才能为 Java 应用程序保存小/中量的数据。我听说过 YAML，但我不确定这是否是我的最佳选择。我只是想知道我应该如何保存小数字、设置，甚至保存简单游戏的文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T15:30:33.487

如果您的流量增长到更大的数量，请考虑使用数据库而不是平面文件。对于少量，您可以使用平面文件。Accipheran 提出了一个很好的观点，以确保您不会让您的用户访问您想要安全或隐藏的东西。

您不必使用 YAML，您可以根据需要多少自定义来指定自己的协议。但是已经有用于 YAML 处理的库。

文件 IO：[http ://www.vogella.com/articles/JavaIO/article.html](http://www.vogella.com/articles/JavaIO/article.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T15:04:57.903

如果你想保存你的对象，java 序列化很容易使用。你得到快速（通过编程努力）和正确的结果。

对于配置输入文件，我推荐 java 属性文件。

对于海量数据，跨平台传输java序列化不太好用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T15:10:54.417

对于非常简单的数据存储需求，您可以使用[java File Writer 库](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/FileWriter.html)将简单的原始数据类型写入文件，然后当您需要检索数据时，只需使用[File Reader Library](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/FileReader.html)。这与使用 java 存储数据一样简单。如果这很简单，那么我建议您查看序列化数据对象并将它们写入文件。这是一个[链接](http://www.ibm.com/developerworks/java/library/j-5things1/index.html)，讨论对象序列化的优点。

# javascript - 从同一个div获取最近的输入元素

> ID：13647658
> 
> 赞同：-2
> 
> 时间：2012-11-30T15:00:16.370
> 
> 标签：javascript, jquery, html

假设我有下一个建筑

```
<table id="mainTable">
  <tr>
    <td>
       <div class="parentDiv">
         <input class="childInput"/>
         <table>
           <tbody>
           <tr>
             <td>
               <span>I am here!</span>
             <td>
           </tr>
           </tbody>
         </table>
       </div>
    </td>
  </tr>
</table> 
```

我怎样才能从中获取`input`元素`span`？使用 jQuery 或标准方法。 `mainTable`有很多行，所以我不能`id`在输入中使用。
我可以这样做：

```
$($(spanElement).parents(".parentDiv")[0]).children(".childInput")[0] 
```

你知道更简单的方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-30T15:01:26.623

```
$(spanElement).closest('.parentDiv').find('input'); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-30T15:01:37.007

```
$(spanElement).closest('.parentDiv').find('.childInput'); 
```

# c# - 生成 n 元笛卡尔积示例

> ID：13647662
> 
> 赞同：3
> 
> 时间：2012-11-30T15:00:38.320
> 
> 标签：c#, .net, linq, cartesian-product

我发现 Eric Lippert 的帖子[适合](https://stackoverflow.com/a/3098381/720616)我遇到的一个特殊问题。

问题是我无法理解我应该如何将它与 2+ 数量的集合一起使用。

有

```
var collections = new List<List<MyType>>();
foreach(var item in somequery)
{
    collections.Add(
            new List<MyType> { new MyType { Id = 1} .. n }
        );
} 
```

如何在*集合*变量上应用笛卡尔积 linq 查询？

扩展方法是这样的：

```
static IEnumerable<IEnumerable<T>> CartesianProduct<T>(this IEnumerable<IEnumerable<T>> sequences)
{
    IEnumerable<IEnumerable<T>> emptyProduct = new[] { Enumerable.Empty<T>()};
    return sequences.Aggregate(
        emptyProduct,
        (accumulator, sequence) => 
            from accseq in accumulator 
            from item in sequence 
            select accseq.Concat(new[] {item})                       
        );
 } 
```

这是 Eric 的 2 个集合的示例：

```
var arr1 = new[] {"a", "b", "c"};
var arr2 = new[] { 3, 2, 4 };
var result = from cpLine in CartesianProduct(
                     from count in arr2 select Enumerable.Range(1, count)) 
             select cpLine.Zip(arr1, (x1, x2) => x2 + x1); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T20:22:56.630

示例代码已经能够处理“n”个笛卡尔积（在示例中它是 3）。你的问题是`List<List<MyType>>`当你需要一个`IEnumerable<IEnumerable<MyType>>`

```
IEnumerable<IEnumerable<MyType>> result = collections
  .Select(list => list.AsEnumerable())
  .CartesianProduct(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-07-09T03:56:59.633

就像这个问题的原始海报一样，我也很难理解这个很棒的功能的使用。吸引我的主要事情是我必须在调用函数之前创建这个`IEnumerable`完整的单曲`IEnumerable`（再次就像原始帖子一样）。

我的代码设置方式是我有 3 个数组，其中包含我需要相乘的数据，而创建这个更大的数组`IEnumerable`是我的方式，我不想这样做。

因此，我重新编写了扩展函数，`IEnumerable<T>`而不是`IEnumerable<IEnumerable<T>>`现在我可以直接从我想要相乘的任何数组中调用该函数，并将其他 2 个数组作为参数传递。我想我会在这里重新发布，以防其他人有兴趣以这种方式使用它：

> ```
>  public static IEnumerable<IEnumerable<T>> CartesianProduct<T>
>     (this IEnumerable<T> firstSequence, params IEnumerable<T>[] sequences)
>     {
>         IEnumerable<IEnumerable<T>> result = new[] { Enumerable.Empty<T>() };
> 
>         foreach (IEnumerable<T> sequence in (new[] { firstSequence }).Concat(sequences))
>         {
>             result = from resultItem in result 
>                      from sequenceItem in sequence 
>                      select resultItem.Concat(new[] { sequenceItem });
>         }
>         return result;
>     } 
> ```

这将是在 3 个数据数组上使用此方法的示例。

> ```
>  var numbers = new object[] { 1, 2, 3 };
>         var letters = new object[] { "a", "b", "c" };
>         var colors = new object[] { "red", "blue", "yellow" };
> 
>         var result = numbers.CartesianProduct(letters, colors); 
> ```

输出

> ```
>  [1, a, red]
>         [1, a, blue]
>         [1, a, yellow]
>         [1, b, red]
>         [1, b, blue]
>         [1, b, yellow]
>         [1, c, red]
>         [1, c, blue]
>         [1, c, yellow]
>         [2, a, red]
>         [2, a, blue]
>         [2, a, yellow]
>         [2, b, red]
>         [2, b, blue]
>         [2, b, yellow]
>         [2, c, red]
>         [2, c, blue]
>         [2, c, yellow]
>         [3, a, red]
>         [3, a, blue]
>         [3, a, yellow]
>         [3, b, red]
>         [3, b, blue]
>         [3, b, yellow]
>         [3, c, red]
>         [3, c, blue]
>         [3, c, yellow] 
> ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-20T16:22:14.407

由于`List<T>`is `IEnumerable<T>`，那么您使用 Eric 解决方案的问题解决如下：

```
var collections = new List<List<MyType>>();
var product =  collections.CartesianProduct();
foreach(var collection in product)
{
    // a single collection of MyType items
    foreach(var item in collection)
    {
        // each item of type MyType within a collection
        Console.Write(item);
    }    
} 
```

当然，您可以以更简洁的方式聚合每个集合中的项目，例如作为单个`string`：

```
var product = 
    collections
    .CartesianProduct()
    .Select(xs => xs.Aggregate(new StringBuilder(), (sb, x) => sb.Append(x.ToString()), sb => sb.ToString()));

foreach(var collectionAsString in product)
{
    Console.WriteLine(collectionAsString);
} 
```

# c# - 在 C#.Net 中将 .xls 文件保存到 .txt 文件中

> ID：13647669
> 
> 赞同：0
> 
> 时间：2012-11-30T15:01:15.493
> 
> 标签：c#, .net, xls, save-as

如何将（实际上另存为）.xls 文件保存到 C# 中的文本文件中。我试过`File.Copy()`了，但我看不到数据。我在文本文件中得到了一些特殊字符。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T15:06:49.753

您应该使用该[`Microsoft.Office.Tools.Excel.Workbook.SaveAs()`](http://msdn.microsoft.com/en-us/library/microsoft.office.tools.excel.workbook.saveas%28v=VS.80%29.aspx)方法

# mysql - 错误 1442“无法更新表”

> ID：13647671
> 
> 赞同：1
> 
> 时间：2012-11-30T15:01:23.017
> 
> 标签：mysql, triggers, mysql-error-1442

我有这个触发器：

```
CREATE DEFINER = `root`@`localhost` TRIGGER `ograniczenie` BEFORE INSERT ON `wyjscia` 
FOR EACH ROW 
BEGIN 
SELECT COUNT( * ) INTO @cnt FROM wyjscia; 
IF @cnt >=5 THEN 
DELETE FROM wyjscia WHERE id = ((SELECT MIN(id) FROM wyjscia)) LIMIT 1 ; 
END IF ; 
END 
```

错误：#1442 - 无法更新存储函数/触发器中的表“wyjscia”，因为它已被调用此存储函数/触发器的语句使用。

这个问题有什么解决办法吗？:(

# c++ - 从 UTF-8 到 ANSI wcstombs 的转换在一个特殊字符处失败

> ID：13647677
> 
> 赞同：-2
> 
> 时间：2012-11-30T15:01:29.800
> 
> 标签：c++, utf-8, wchar-t, wchar

我想更改 wchar_t*，就像它显示为 char* 一样。不应进行像 WideCharToMultibyte 中的转换。

我找到了 wcstombs 函数，它看起来工作正常，但是有一个字符没有得到正确更改。

它是“-”，它的 ANSI 编号是 156，但在 UTF-8 中是数字 339。当然 ASCII 没有那么多数字，但为什么会弄错呢？

这是我的源代码的一部分，我添加了一个循环和一个 if 以便它工作：

```
 wchar_t *wc;    // source string
    char *cc;       // destination string
    int len = 0;    // length of the strings

    ...

    for(int i = 0; i < len; i++) {
            if(wc[i] != 339) {
                    cc[i] = wc[i];
            }else{
                    cc[i] = 156;
            }
    } 
```

此代码有效，但说真的，这是解决该问题的最佳方法吗？

提前谢谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T19:16:09.017

> 我想更改 wchar_t*，就像它显示为 char* 一样。

好的，您想从`wchar_t`字符串转换为`char`字符串。

> 不应进行像 WideCharToMultibyte 中的转换。

什么？我认为您的意思不是“不应该进行转换”，但是只有一个示例，我无法说出您想要避免什么。只是`WideCharToMultibyte`还是有其他功能？

> 我找到了 wcstombs 函数，它看起来很完美，

`wcstombs`对我来说似乎是这样`WideCharToMultibyte`，但我想它在某些方面有所不同，这对你很重要？如果你能描述什么是`wcstombs`可接受和`WideCharToMultibyte`不可接受的，那就太好了。

> 但是有一个字符没有正确更改。

听起来它工作不完美......

> 它是“-”，它的 ANSI 编号是 156，但在 UTF-8 中是数字 339。当然 ASCII 没有那么多数字，但为什么会弄错呢？

您可能的意思是，在 CP1252 中，“–”被编码为十进制的 156 或十六进制的 0x9C，并且该字符具有十进制的 Unicode 代码点 339，或者更传统的 U+0153。我根本看不到 UTF-8 出现在哪里。

> 这是我的源代码的一部分，我添加了一个循环和一个 if 以便它工作：

至于你为什么没有得到你期望的结果，可能是因为你没有`wcstombs()`正确使用。很难说，因为你没有展示你是如何使用`wcstombs()`.

`wcstombs()`在程序的当前 C 语言环境指定的编码之间进行转换`wchar_t`并使用它们。`char`如果您已将语言环境设置为使用 Unicode 编码`wchar_t`并将 CP1252 用于 char 的语言环境，那么它应该符合您的预期。

> 此代码有效，但说真的，这是解决该问题的最佳方法吗？

不。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-30T15:11:43.733

请忍受我对 c/c++ 的完全无知，但您可以使用自定义查找表或一些预制函数。

这是一个由 256 个整数组成的数组，其中索引`i`包含 Windows-1252 代码点的 unicode 代码点`i`。

例如，索引包含`156`十进制。`0x0153``339`

```
int[] windows1252ToUnicodeCodePoints = {
         0x0000,0x0001,0x0002,0x0003,0x0004,0x0005,0x0006,0x0007,0x0008,0x0009,0x000A,0x000B,0x000C,0x000D,0x000E,0x000F
        ,0x0010,0x0011,0x0012,0x0013,0x0014,0x0015,0x0016,0x0017,0x0018,0x0019,0x001A,0x001B,0x001C,0x001D,0x001E,0x001F
        ,0x0020,0x0021,0x0022,0x0023,0x0024,0x0025,0x0026,0x0027,0x0028,0x0029,0x002A,0x002B,0x002C,0x002D,0x002E,0x002F
        ,0x0030,0x0031,0x0032,0x0033,0x0034,0x0035,0x0036,0x0037,0x0038,0x0039,0x003A,0x003B,0x003C,0x003D,0x003E,0x003F
        ,0x0040,0x0041,0x0042,0x0043,0x0044,0x0045,0x0046,0x0047,0x0048,0x0049,0x004A,0x004B,0x004C,0x004D,0x004E,0x004F
        ,0x0050,0x0051,0x0052,0x0053,0x0054,0x0055,0x0056,0x0057,0x0058,0x0059,0x005A,0x005B,0x005C,0x005D,0x005E,0x005F
        ,0x0060,0x0061,0x0062,0x0063,0x0064,0x0065,0x0066,0x0067,0x0068,0x0069,0x006A,0x006B,0x006C,0x006D,0x006E,0x006F
        ,0x0070,0x0071,0x0072,0x0073,0x0074,0x0075,0x0076,0x0077,0x0078,0x0079,0x007A,0x007B,0x007C,0x007D,0x007E,0x007F
        ,0x20AC,0xFFFD,0x201A,0x0192,0x201E,0x2026,0x2020,0x2021,0x02C6,0x2030,0x0160,0x2039,0x0152,0xFFFD,0x017D,0xFFFD
        ,0xFFFD,0x2018,0x2019,0x201C,0x201D,0x2022,0x2013,0x2014,0x02DC,0x2122,0x0161,0x203A,0x0153,0xFFFD,0x017E,0x0178
        ,0x00A0,0x00A1,0x00A2,0x00A3,0x00A4,0x00A5,0x00A6,0x00A7,0x00A8,0x00A9,0x00AA,0x00AB,0x00AC,0x00AD,0x00AE,0x00AF
        ,0x00B0,0x00B1,0x00B2,0x00B3,0x00B4,0x00B5,0x00B6,0x00B7,0x00B8,0x00B9,0x00BA,0x00BB,0x00BC,0x00BD,0x00BE,0x00BF
        ,0x00C0,0x00C1,0x00C2,0x00C3,0x00C4,0x00C5,0x00C6,0x00C7,0x00C8,0x00C9,0x00CA,0x00CB,0x00CC,0x00CD,0x00CE,0x00CF
        ,0x00D0,0x00D1,0x00D2,0x00D3,0x00D4,0x00D5,0x00D6,0x00D7,0x00D8,0x00D9,0x00DA,0x00DB,0x00DC,0x00DD,0x00DE,0x00DF
        ,0x00E0,0x00E1,0x00E2,0x00E3,0x00E4,0x00E5,0x00E6,0x00E7,0x00E8,0x00E9,0x00EA,0x00EB,0x00EC,0x00ED,0x00EE,0x00EF
        ,0x00F0,0x00F1,0x00F2,0x00F3,0x00F4,0x00F5,0x00F6,0x00F7,0x00F8,0x00F9,0x00FA,0x00FB,0x00FC,0x00FD,0x00FE,0x00FF
}; 
```

您需要的是这个表反转（或每次都进行线性扫描），在任何其他语言中我会使用类似`Map<int, int>`.

# jquery - 在使用carrierwave创建帖子期间如何在一个页面上上传多个图像？

> ID：13647678
> 
> 赞同：0
> 
> 时间：2012-11-30T15:01:29.993
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3, carrierwave

我正在尝试完成与[在创建帖子期间如何使用 JQuery-File-Upload 在一个页面上上传多个图像？](https://stackoverflow.com/questions/12350019/how-to-use-jquery-file-upload-to-upload-multiple-images-on-one-page-during-creat)我已经能够完成公认的答案（@brad werth）指南。但是我目前停留在第 3 步，我想知道是否有人可以解释和/或显示一些有关如何执行此操作的代码。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T16:53:12.773

你必须看看这一集：

[http://railscasts.com/episodes/381-jquery-file-upload](http://railscasts.com/episodes/381-jquery-file-upload)

我认为您必须订阅 railscasts 才能学习 rails 并阅读任何书籍。

此致！

# python - 金字塔视图重定向

> ID：13647682
> 
> 赞同：3
> 
> 时间：2012-11-30T15:01:38.560
> 
> 标签：python, authentication, redirect, pyramid, browserid

我正在尝试将 Mozilla Persona (browserid) 集成到 Pyramid 应用程序中。登录流程为：

1.  用户可以通过单击登录按钮登录任何页面
2.  然后弹出一个显示登录表单
3.  当用户输入正确的登录名/密码时，弹出窗口对 Pyramid 视图进行 ajax 调用，该视图检查用户凭据，如果检查成功，则调用 Pyramid 记住函数
4.  browserid javascript代码然后重新加载当前页面

现在我想处理一个新用户订阅 Web 应用程序的情况，并呈现一个新视图，要求提供更多详细信息（所需的用户名等）。

由于“记住”函数是由弹出窗口中的 ajax 调用调用的，因此我无法将用户重定向到“/newuser”页面。因此，每当记住的 browserid 在数据库中没有对应的用户时，每个视图都需要将新用户重定向到“/newuser” url。

有没有办法在调用视图来调用“new_user”视图*之前拦截用户请求？*或者也许我的身份验证方法根本不正确，我应该依赖另一种方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T15:41:21.633

一种方法是创建一个应在创建用户时引发的异常，并将此异常用作将重定向到新页面的视图的上下文。

```
class NewUser(Exception):
    pass

@view_config(context=NewUser)
def new_user_exception(request):
    return HTTPFound(request.route_path('new_user')) 
```

确保在第一次登录后的第一个请求期间引发异常（例如，在创建用户对象之后），并且用户将被重定向到正确的页面。

您也可以将欢迎页面的代码直接放在 中`new_user_exception`，但没有重定向，该页面将包含用户询问的 url，无论它是什么。

* * *

另一种解决方案是调整角色部分的完成方式。为此，我猜你正在使用[pyramid_persona](https://github.com/madjar/pyramid_persona)（我是作家 :) ）。如果不是，我所说的仍然适用，而且做起来会更简单。

你可以做的是：

*   更改登录视图，使其在响应中包含一个布尔值，说明这是否是第一次登录。
*   更改 javascript 以检查此布尔值，如果不是第一次则重新加载页面，如果是则重定向到欢迎页面。

登录视图的代码可以像这样使用 pyramid_persona 的登录视图：

```
from pyramid_persona.views import login

@view_config(route_name='login')
def new_login(request):
    response = login(request)
    if response.status == 200: #the login worked
        # tweak the response
    return response 
```

**编辑**：pyramid_persona 的文档中有关于此的部分内容：[在登录时做额外的工作或验证](https://pyramid_persona.readthedocs.org/en/latest/customization.html#do-extra-work-or-verification-at-login)。

# wordpress - jQuery / PHP / WordPress：自动完成搜索“Foxycomplete”不起作用

> ID：13647686
> 
> 赞同：0
> 
> 时间：2012-11-30T15:01:46.483
> 
> 标签：wordpress, search, plugins, widget, jquery-autocomplete

**在我找到另一个模板后问题解决了。好像上一个不兼容。**

我正在使用 Plugin [Foxycomplete](http://www.webdesignerdepot.com/2012/05/foxycomplete-advanced-autocomplete-search-images/)（带有图像的高级自动完成搜索） - 更具体地说：我*想*使用它。我安装并启用了它。开发人员这样解释一个步骤：

> 输入表单输入字段的 ID，不带“#”，您希望在其上应用自动完成功能。默认为常规“s”。

我什至查看了 foxycomplete.js 文件，但我不明白：

```
(function($) {
$(document).ready(function() {

    var inputField = site_data.inputField;
    var inputWidth = 0;

    var absPath = "";
    if(site_data.inputField == ""){
        inputField = "s";
    } 
```

在此之后，我用 firebug 查看了搜索表单，这是 HTML 代码：

```
<form action="http://localhost/sites/wordpress/" class="searchform" method="get">
<input type="text" value="" name="s" class="field">
<input type="submit" value="" name="submit" class="submit">
</form> 
```

现在我假设我必须将*class* = *"field"*更改为*id* = *"s"*，但我也不知道在哪个文档中找到 HTML 部分，我有点卡住了。如果我在萤火虫中进行更改，它将不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T00:23:51.790

您需要做的就是在“输入类型”中添加以下内容 - **name="s", id="s"**。这在 Canvas 主题上对我有用，由 woothemes 提供，并且与其他任何主题都应该很酷

作为您的代码的示例：

```
<input type="text" name="s" id="s" value="" class="field"> 
```

编辑：搜索表单代码位置与每个主题模板确实不同。但在大多数情况下，它位于标题或侧边栏中。

# php - 使用 D3.js 显示图表

> ID：13647697
> 
> 赞同：0
> 
> 时间：2012-11-30T15:02:03.403
> 
> 标签：php, javascript, d3.js, visualization, hpc

我是 Javascript 和 D3JS 的新手，所以我会尝试在这里提问。在开始之前，[这里](http://bl.ocks.org/3894205)是原始示例的代码以支持我的特定数据集，[这](http://pastebin.com/fE3LNGgA)是我对其的修改。

我在后端所做的是使用 PHP（带有一些 var 库）来设置 JS 变量名称以在同一页面上显示多个图形。这就是我修改的每次迭代中“流”的来源。

似乎有一些问题可能与我对 D3.js 的具体工作原理缺乏了解有关，并且可能与一般的 JS 有关。我可以确认 CSV 文件被正确解析，因为它显示的 y 范围是有效的。

例如，代码显示的图形~~有一个倒置的 y 轴（具有正确的值）并且~~没有显示 x 轴或标签。此外，实际上没有绘制任何数据。我怀疑这可能与错误命名放置的属性有关，但我不确定。你有什么想法吗？

编辑：我自己修复了 y 轴问题。我现在感觉很昏暗。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T18:11:15.960

对我自己的问题的部分回答，我在这里感到很愚蠢。Y轴倒置？换个范围试试！有效。下一部分。编辑以评论 x 轴问题。会不会是翻译问题？我看到绘制了 y 轴，但 x 轴的格式不同。

# c# - 特定时间间隔内的重复性任务？

> ID：13647699
> 
> 赞同：5
> 
> 时间：2012-11-30T15:02:15.280
> 
> 标签：c#, .net, asp.net-mvc, timer, scheduled-tasks

例如，我想在特定的时间间隔（每小时或每天的任务）调用一个函数。

我已经在使用定时器了。但只要我的本地服务器正常工作，它就可以工作。例如：

```
public static void StartYahooWeatherManager()
{
    Timer t = new Timer(1000 * 60 * 60 * 6  /* 6 hours */);
    t.Elapsed += new ElapsedEventHandler(WriteYahoWeatherRssItemToDb);
    t.Start();
}

private static void WriteYahoWeatherRssItemToDb(object o, ElapsedEventArgs e)
{
    YahooWeatherManager.InsertYahooWeatherRssItem(YahooWeatherManager.GetYahooWeatherRssItem());
} 
```

我每隔 6 小时将天气信息写入 db。项目已经在主机中。只要我的计算机本地服务器正在运行，计时器事件就会起作用。

**问题：**

我的代码有什么问题？（或者在 WebProject 中使用计时器的逻辑错误？）为什么计时器只在本地服务器工作时工作？

管理时间间隔任务的最佳方法是什么？（不需要asp.net）

我希望，我可以解释这个问题。谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-30T15:12:14.133

计时器停止的原因是因为此计时器在您的 ASP.NET 应用程序中运行，该应用程序本身托管在 Web 服务器上。当此服务器停止或回收应用程序时，AppDomain 以及您可能已启动的所有线程都将关闭。这就是为什么在 ASP.NET 应用程序中编写重复的后台任务是一个非常糟糕的主意。菲尔·哈克[`blogged about the dangers`](http://haacked.com/archive/2011/10/16/the-dangers-of-implementing-recurring-background-tasks-in-asp-net.aspx)。

执行此操作的正确方法是将此代码托管在 ASP.NET 应用程序之外的单独进程中。这可以是 Windows 服务或控制台应用程序，使用例如 Windows 调度程序安排定期运行。这样可以保证代码始终运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T15:09:28.533

我的建议是创建一个使用计时器的 Windows 服务，或者创建一个普通的应用程序并创建一个计划任务以在您需要的时间间隔内运行它。这篇 StackOverflow 帖子可能会对您有所帮助：

[Windows 服务和计时器](https://stackoverflow.com/a/246719)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-31T12:09:30.997

您可以为您的 asp.net 应用程序所属的应用程序池禁用回收。`GC`.Net 很少发生内存泄漏，因此您大部分时间都可以依赖它。这也将消除回收后的预热并几乎不费吹灰之力地改善用户体验。

另一个好的解决方案是创建控制台应用程序并将其安排在 Windows“ `Task Scheduler`”中。您将很高兴`UI`管理何时以及如何运行。维护这样的任务比“ `Windows Service`”容易得多，并且需要编写更少的代码。

# c# - ListView 绑定到包含字典的自定义类列表

> ID：13647704
> 
> 赞同：0
> 
> 时间：2012-11-30T15:02:31.470
> 
> 标签：c#, wpf, xaml, listview, dictionary

我正在学习 WPF，我试图用文件夹列表（作为 ListView 组）和每个文件夹的文件（作为 ListView 项目）填充 ListView。

使用[WPF/MVVM 快速入门教程](http://www.codeproject.com/Articles/165368/WPF-MVVM-Quick-Start-Tutorial)，我创建了以下类（业务已删除）

```
public class PatchGen
{
    public PatchGen() { }

    private string _folderName;
    private Dictionary<string, string> _filesInfo = new Dictionary<string, string>();

    public string FolderName
    {
        get { return _folderName; }
        set { _folderName= value; }
    }
    public Dictionary<string, string> FilesInfo
    {
        get { return _filesInfo; }
        set { _filesInfo = value; }
    }
} 
```

和视图模型：

```
public class PatchGenViewModel : ObservableObject
{
    public PatchGenViewModel()
    {
    }

    List<PatchGen> _folderList = new List<PatchGen>();

    public List<PatchGen> Folders
    {
        get
        {
            return _folderList;
        }
        set { }
    }

    void AddFilesExecute()
    {
        //business here
    }

    bool CanAddFilesExecute()
    {
        return true;
    }

    public ICommand AddFiles { get { return new RelayCommand(AddFilesExecute, CanAddFilesExecute); } } 
```

xaml 部分包括`DataContext`和`CollectionViewSource`：

```
<Window.DataContext>
  <local:PatchGenViewModel></local:PatchGenViewModel>
</Window.DataContext>
<Window.Resources>
  <CollectionViewSource x:Key='groups'
                        Source="{Binding Path=Folders}">
    <CollectionViewSource.GroupDescriptions>
      <PropertyGroupDescription PropertyName="FolderName" />
    </CollectionViewSource.GroupDescriptions>
  </CollectionViewSource>
</Window.Resources> 
```

和列表视图：

```
<ListView Grid.Row="1"
          HorizontalAlignment="Stretch"
          Name="lstViewServices"
          ItemsSource='{Binding Source={StaticResource groups}}'>
  <ListView.View>
    <GridView>
      <GridViewColumn Header="File Name"
                      DisplayMemberBinding="{Binding Path=??? }"
                      Width="100" />
      <GridViewColumn Header="File Path"
                      DisplayMemberBinding="{Binding Path=??? }"
                      Width="Auto" />
    </GridView>
  </ListView.View>
</ListView> 
```

ListView 组未显示文件夹名称。?

如何显示代表(Dictionnary < string,string > ) 信息的`File Name`and ？`File Path``FilesInfo`

有没有办法通过 XAML 和 ViewModel 类来做到这一点，而不需要 Xaml 文件的代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T18:14:02.773

您只需将文件名绑定到文件到文件夹名称属性。

对于文件路径，您需要将其绑定到 FilesInfo 属性。为什么是字典？我想我不明白你为什么在这里使用字典？也许我遗漏了一些东西，但你应该放下字典并创建你自己的小对象。

```
public class FileInfo
{
    public string FileName {get;set;}
    public string FilePath {get;set;}
} 
```

然后当然更改您的 PatchGen 对象以使用它而不是字典。

也许您希望它看起来像的屏幕截图会有所帮助。但是，如果您查看您的 XAML，您没有任何地方可以放置您的 FolderName。您只有 FileName 和 FilePath 的位置。

```
<ListView Grid.Row="1"
          HorizontalAlignment="Stretch"
          Name="lstViewServices"
          ItemsSource='{Binding Source={StaticResource groups}}'>
  <ListView.View>
    <GridView>
      <GridViewColumn Header="File Name"
                      DisplayMemberBinding="{Binding Path=FileName }"
                      Width="100" />
      <GridViewColumn Header="File Path"
                      DisplayMemberBinding="{Binding Path=FilePath}"
                      Width="Auto" />
    </GridView>
  </ListView.View>
</ListView> 
```

因此，您应该为 FolderName 添加一个位置。您似乎有两个列表：文件夹列表和每个文件夹的文件列表。但是你的观点只有一个层次。

这是一个有两个级别的示例。

```
<ItemsControl ItemsSource='{Binding Folders}'>
  <ItemsControl.ItemTemplate>
    <DataTemplate>
      <StackPanel>
        <Label Content="{Binding FolderName}" />
        <ListView Grid.Row="1"
                  HorizontalAlignment="Stretch"
                  Name="lstViewServices"
                  ItemsSource="FileInfo">
          <ListView.View>
            <GridView>
              <GridViewColumn Header="File Name"
                              DisplayMemberBinding="{Binding Path=FolderName}"
                              Width="100" />
              <GridViewColumn Header="File Path"
                              DisplayMemberBinding="{Binding Path=FolderName }"
                              Width="Auto" />
            </GridView>
          </ListView.View>
        </ListView>
      </StackPanel>
    </DataTemplate>
  </ItemsControl.ItemTemplate>
</ItemsControl> 
```

# php - 使用 PHP 更新数据库

> ID：13647710
> 
> 赞同：-2
> 
> 时间：2012-11-30T15:02:43.073
> 
> 标签：php, mysql

```
<?php

if (isset($_GET['firstname'])){
    $fname = $_GET['firstname'];
}

mysql_query("UPDATE student SET firstname = $fname WHERE studentID = $id");

?> 
```

我有一个表格可以更新我的数据库。在表单的底部有一个更新按钮。当我使用此代码时，它不起作用。

我可以在我的 mysql_query 中输入 $fname 的地方放入一个“tom”，它会更新。

我还可以回显 $fname 变量，它会正确回显表单中的内容。

但我无法让数据库采用 $fname。

任何建议都会很棒，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T15:04:00.643

您忘记了名称周围的引号：

```
mysql_query("UPDATE student SET firstname = '$fname' WHERE studentID = $id"); 
```

顺便说一句，您的代码容易受到 SQL 注入的影响。请解决这个问题。参见[best-way-to-prevent-sql-injection-in-php](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T15:04:09.623

你缺少单引号`$fname`和`$id`（如果它是一个字符串），

```
mysql_query("UPDATE student SET firstname = '$fname' WHERE studentID = '$id'"); 
```

**注意：**不推荐使用 Mysql_* 扩展，并且对 SQL 注入开放。所以，避免使用它们。请改用 PDO 或 Mysqli_*。

# linux - 经常在特定时间执行任务

> ID：13647711
> 
> 赞同：0
> 
> 时间：2012-11-30T15:02:44.850
> 
> 标签：linux, bash, ubuntu

我想在每周的每一天的特定时间运行一个程序。我怎样才能做到这一点 ？我的操作系统是 ubuntu。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T15:07:28.517

这就是所谓的 crontab。使用命令 crontab -e 你可以添加一个任务。

crontab 文件中的一行如下所示：

```
*    *    *    *    *  command to be executed
┬    ┬    ┬    ┬    ┬
│    │    │    │    │
│    │    │    │    │
│    │    │    │    └───── day of week (0 - 7) (0 or 7 are Sunday, or use names)
│    │    │    └────────── month (1 - 12)
│    │    └─────────────── day of month (1 - 31)
│    └──────────────────── hour (0 - 23)
└───────────────────────── min (0 - 59) 
```

见[http://en.wikipedia.org/wiki/Cron](http://en.wikipedia.org/wiki/Cron)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T15:06:04.317

使用 cron 守护进程，访问手动尝试：

```
man cron
man 5 crontab 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T15:07:40.757

[这](https://help.ubuntu.com/community/CronHowto)可能比`man`页面更容易阅读。祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T15:08:35.477

`crontab -e <enter>`从命令行输入

然后添加一个具有以下格式的条目：

```
*     *     *   *    *        command to be executed
-     -     -   -    -
|     |     |   |    |
|     |     |   |    +----- day of week (0 - 6) (Sunday=0)
|     |     |   +------- month (1 - 12)
|     |     +--------- day of        month (1 - 31)
|     +----------- hour (0 - 23)
+------------- min (0 - 59) 
```

例如：

```
30   18   *  * *  rm /tmp/* 
```

`rm /tmp/*`每天下午 6:30执行

[这里有更多例子。](http://www.adminschoice.com/crontab-quick-reference)

# sql - SQL 聚合函数嵌套

> ID：13647712
> 
> 赞同：3
> 
> 时间：2012-11-30T15:02:49.370
> 
> 标签：sql, postgresql, aggregate

我正在使用 PostgreSQL 学习 SQL，并且遇到了有关嵌套聚合函数的问题。

我试图找到拥有最多财产的私人所有者的详细信息，其中我有两个关系，privateowner 和 propertyforrent，propertyforrent 有一个外键，ownwerno。

我怀疑我的问题是我试图嵌套聚合函数，但我看不到解决方法。

注意：- 我使用的数据库在 propertyforrent 中的属性 ownwerno 中有错字，它应该是 ownerno。

我尝试使用的代码如下所示~：-

```
SELECT o.fname, o.lname, telno
FROM privateowner o
WHERE o.ownerno = (SELECT p.ownwerno
           FROM propertyforrent p
           HAVING COUNT(p.ownwerno) = MAX(COUNT(o.ownerno))); 
```

其伴随的错误如下：-

```
ERROR:  column "p.ownwerno" must appear in the GROUP BY clause or be used in a
aggregate function
LINE 3: WHERE o.ownerno = (SELECT p.ownwerno
                                  ^

********** Error **********

ERROR: column "p.ownwerno" must appear in the GROUP BY clause or be used in an
aggregate function
SQL state: 42803
Character: 78 
```

任何见解都会很棒。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T15:13:34.327

**PostgreSQL 9.1 架构设置**：

```
create table privateowner(ownerno integer, fname text);
insert into privateowner(ownerno, fname) values (1,'Alice'), 
                                                (2,'Bob'), 
                                                (3,'Charlie');

create table propertyforrent(ownerno integer);
insert into propertyforrent(ownerno) values (1), (2), (2), (3), (3); 
```

**查询 1**：

```
with w as ( select ownerno, count(*) as property_count 
            from propertyforrent 
            group by ownerno )
select * 
from privateowner
where ownerno in( select ownerno 
                  from w 
                  where property_count=( select property_count
                                         from w 
                                         order by 1 desc limit 1) ) 
```

**结果**：

```
| OWNERNO |   FNAME |
---------------------
|       2 |     Bob |
|       3 | Charlie | 
```

*[在 SQL Fiddle 上](http://sqlfiddle.com/#!1/6ea8c/1)看到这个*

* * *

受@araqnid 的回答 (+1) 的启发，这是另一个具有窗口功能的变体：

**查询**：

```
select ownerno, fname
from( select ownerno, fname, rank() over (order by count(*) desc) rnk
      from privateowner join propertyforrent using(ownerno) 
      group by ownerno, fname ) z
where rnk=1 
```

**结果**：

```
| OWNERNO |   FNAME |
---------------------
|       3 | Charlie |
|       2 |     Bob | 
```

*[在 SQL Fiddle 上](http://sqlfiddle.com/#!1/6ea8c/7)看到这个*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T15:13:28.810

问题是您不能嵌套聚合函数。

你想要的是更像下面的东西：

```
SELECT o.fname, o.lname, telno
FROM privateowner o
WHERE o.ownerno = (SELECT p.ownwerno
                   FROM propertyforrent p
                   GROUP BY p.owerno
                   order by COUNT(*)
                   limit 1
                  ) 
```

但是，我更喜欢使用显式连接的查询：

```
select o.fname, ollname, o.telno, numProperties
from PrivateOwner o join
     (select p.ownerno, count(*) as numProperties
      from PropertyForRent pft
      group by p.owerno
     ) pfr
     on o.ownerno = pfr.ownerno
order by NumProperties
limit 1 
```

使用连接，您还可以添加属性数量。而且，您还可以选择多个。要获取最大值的所有属性，可以使用以下`where`子句：

```
where NumProperties = (select count(*) as NumProperties
                       from PropertyForRent
                       group by owerno
                       order by 1 desc
                       limit 1
                      ) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-30T17:29:31.150

在这种情况下，窗口函数可以很好地工作，尽管如果您刚刚开始使用 SQL，您可能希望在更熟悉基础知识时再回到这种情况。

```
select ownerno, fname
from (
    select privateowner.*, rank() over(order by property_count desc)
    from privateowner join (
            select ownerno, count(*) as property_count
            from propertyforrent group by ownerno
        ) owner_stats using (ownerno)
) x
where x.rank = 1 
```

# php - 尝试显示数组的mysql查询结果

> ID：13647713
> 
> 赞同：1
> 
> 时间：2012-11-30T15:02:54.293
> 
> 标签：php, mysql, forms

我有一个带有复选框的表单。每个复选框都分配有一个从 1 到 10 的值。这些值对应于服务名称表中的一个 ID。这是表单复选框标记：

```
<input type="checkbox" name="serv[]" id="janitorial" value=1><label for="janitorial" class="radCheck">Full Service Janitorial</label>
<input type="checkbox" name="serv[]" id="strip" value=6><label for="strip" class="radCheck">Stripping & Waxing</label></br>
<input type="checkbox" name="serv[]" id="buff" value=2><label for="buff" class="radCheck">Floor Buffing/Burnishing</label>
<input type="checkbox" name="serv[]" id="carp" value=7><label for="carp" class="radCheck">Carpet & Upholstery Care</label><br>
<input type="checkbox" name="serv[]" id="tile" value=3><label for="tile" class="radCheck">Tile Cleaning & Restoration</label>
<input type="checkbox" name="serv[]" id="windows" value=8><label for="windows"class="radCheck">Window & Blind Care</label></br>
<input type="checkbox" name="serv[]" id="park" value=4><label for="park" class="radCheck">Parking Lot Care</label>
<input type="checkbox" name="serv[]" id="porter" value=9><label for="porter" class="radCheck">Day Porter</label></br>
<input type="checkbox" name="serv[]" id="snow" value=5><label for="snow" class="radCheck">Snow Removal & Landscape</label>
<input type="checkbox" name="serv[]" id="rest" value=10><label for="rest" class="radCheck">Restroom Services & Supplies</label> 
```

这与所有其他表单数据一起发布并通过电子邮件发送并输入到数据库中。我试图检索从数据库中选择的每个服务的名称，但无法弄清楚如何编写我的查询结果。这是服务查询的代码：

```
$conn=connect();

            $names = implode(',', $serv);
            $query = "SELECT SERVICE_NAME FROM SERVICES WHERE SERVICE_ID ({$names})";
            $result = mysql_query($query);                

            echo "$query"; 
```

这输出：

```
SELECT SERVICE_NAME FROM SERVICES WHERE SERVICE_ID (1,7,3) 
```

当我提交表格时，我选中了框 1、7 和 3。这一切在我看来都是对的。但是当我尝试通过 fetch_array 或 fetch_row 获取结果时，我得到了错误。我已经尝试了无数的循环和尽可能多的建议，我可以在这里和其他网站上找到。如何编写查询结果？请放轻松，我对 PHP 很陌生，我确信我错过了一些简单的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T15:04:19.590

这是不正确的：

```
SELECT SERVICE_NAME FROM SERVICES WHERE SERVICE_ID IN (1,7,3)
                                                  ^^^^---missing 
```

请注意，您对[sql injection attack](http://bobby-tables.com)很开放。享受您的服务器 pwn3d。您似乎还依赖于 register_globals 被启用（除非您在此处未显示的代码中执行操作）。绝对远离此代码，更新您的 PHP 版本，并学习如何编写安全代码。

# android - 是否可以将图像显示为灰色？

> ID：13647716
> 
> 赞同：0
> 
> 时间：2012-11-30T15:03:08.043
> 
> 标签：android, image

我有一张色彩鲜艳的图片：

![在此处输入图像描述](../Images/ae896ecc5e3f0bb6a4c37795830a20e3.png)

但是当我在 ImageView 中显示它时，我希望它是灰色的：

![在此处输入图像描述](../Images/99b16d92cf1a1b57ded93a25d73da404.png)

在安卓中可以吗？还是我必须使用一些图像编辑器创建灰色图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T15:06:50.143

我自己没有测试过这段代码。但是试一试：

```
public Bitmap toGrayscale(Bitmap bmpOriginal)
{        
    int width, height;
    height = bmpOriginal.getHeight();
    width = bmpOriginal.getWidth();    

    Bitmap bmpGrayscale = Bitmap.createBitmap(width, height, Bitmap.Config.RGB_565);
    Canvas c = new Canvas(bmpGrayscale);
    Paint paint = new Paint();
    ColorMatrix cm = new ColorMatrix();
    cm.setSaturation(0);
    ColorMatrixColorFilter f = new ColorMatrixColorFilter(cm);
    paint.setColorFilter(f);
    c.drawBitmap(bmpOriginal, 0, 0, paint);
    return bmpGrayscale;
} 
```

# jquery - Jquery ScratchOut 效果

> ID：13647719
> 
> 赞同：4
> 
> 时间：2012-11-30T15:03:31.303
> 
> 标签：jquery, html, canvas, html5-canvas, jquery-easing

我正在寻找scratchOut 效果，随便你怎么称呼它。

它是从前景中删除图像的效果，因此背景图像变得可见。

我曾尝试使用 jquery 插件重新创建此效果，但它根本不像我希望的那样流畅。

有没有人有这种效果，或者已经在某处重新创建或看到过这种效果？

评论中的示例，它还不完美，但如果你看它你就会明白。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T22:30:24.867

我找到了一些插件。

它们都与 mousedown 一起使用来刮擦图像，否则我认为它们与您正在寻找的东西很接近。更改为 mousedown 行为并使其自动循环应该不难。

[http://rabidflash.com/authoring/codecanyon/scratch/](http://rabidflash.com/authoring/codecanyon/scratch/)

[http://www.senamion.com/blog/2010/03/30/jquery-jscratchcard-scratchcard-effect-on-image/](http://www.senamion.com/blog/2010/03/30/jquery-jscratchcard-scratchcard-effect-on-image/)

[http://www.htmldrive.net/items/demo/880/Images-Scratch-Card-Plugin-jQuery-Scratchie](http://www.htmldrive.net/items/demo/880/Images-Scratch-Card-Plugin-jQuery-Scratchie)

# javascript - Chrome 扩展 - 在文档开始处注入脚本，在文档结束处在相同内容脚本上注入另一个脚本

> ID：13647724
> 
> 赞同：4
> 
> 时间：2012-11-30T15:03:43.567
> 
> 标签：javascript, google-chrome, google-chrome-extension

我有这个脚本必须在 document-start 上注入，在 document.body 存在之前（只有 head 存在）。该脚本在创建 body 之前通过 css 样式隐藏了页面上的一些类，并在 DOMContentLoaded 之后添加了一个带有消息的居中 div，因此 body 存在。如果在 document-body 或 document-end 上注入此脚本将不起作用:(

除了这个脚本之外，我还有另一个可以在页面上执行一些操作的脚本，但是该脚本需要 document.body 元素，因此需要在文档端注入（文档主体可能会起作用）。

两个脚本应该一个接一个地在同一个内容选项卡上运行。

### 注入将在后台页面上完成，那么我应该如何以及在哪里将每个脚本注入正确的位置？

# 斗篷.js

* * *

```
// must be injected at document-start to work

function ShowMsg()
{
    // show message after body created
    var el = document.createElement('div');
    el.setAttribute( 'id', 'out_div_msg' );
    el.setAttribute( 'style',   'position:absolute; width:200px; height:100px; left:50%; top:50%;'+
                            ' visibility:hidden; z-index:999' );
    el.innerHTML =  '<div id="in_div_msg" style="position:relative; width: 100%;height:100%; left:-50%; top:-50%;'+
                ' visibility:visible; border:1px solid;"><table border="0" width="100%" id="table1" cellspacing="0"'+
                ' cellpadding="0" height="100%" style="border-style: outset; border-width: 2px; padding: 5px;'+
                ' background-color: #C0C0C0"><tr><td align="center" style="font-family: Consolas; font-size: 12px;'+
                ' color: #000000">Do not close this window<br><br>It will close automatically when finnished</td>'+
                '</tr></table></div>';
    document.body.appendChild( el );
}

// inject style before body created
var s = document.createElement('style');
s.setAttribute('type', 'text/css');
s.innerText = 
    ' .hot_news { display: none !important; }'+
    ' .bg-wall     { display: none !important; }'+
    ' .cmenu { display: none !important;' + 
    ' body { background-color: #000000; }';
(document.head||document.documentElement).appendChild(s);

document.addEventListener("DOMContentLoaded", ShowMsg, false); 
```

* * *

谢谢先进

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T13:45:50.870

那为什么不把它分成两个独立的内容脚本呢？

## cloak1.js

```
// must be injected at document-start to work

// inject style before body created
var s = document.createElement('style');
s.setAttribute('type', 'text/css');
s.innerText = 
    ' .hot_news { display: none !important; }'+
    ' .bg-wall     { display: none !important; }'+
    ' .cmenu { display: none !important;' + 
    ' body { background-color: #000000; }';
(document.head||document.documentElement).appendChild(s); 
```

## cloak2.js

```
// show message after body created
var el = document.createElement('div');
el.setAttribute( 'id', 'out_div_msg' );
el.setAttribute( 'style',   'position:absolute; width:200px; height:100px; left:50%; top:50%;'+
                        ' visibility:hidden; z-index:999' );
el.innerHTML =  '<div id="in_div_msg" style="position:relative; width: 100%;height:100%; left:-50%; top:-50%;'+
            ' visibility:visible; border:1px solid;"><table border="0" width="100%" id="table1" cellspacing="0"'+
            ' cellpadding="0" height="100%" style="border-style: outset; border-width: 2px; padding: 5px;'+
            ' background-color: #C0C0C0"><tr><td align="center" style="font-family: Consolas; font-size: 12px;'+
            ' color: #000000">Do not close this window<br><br>It will close automatically when finnished</td>'+
            '</tr></table></div>';
document.body.appendChild( el ); 
```

## 清单.json

```
{
    ...
    content_scripts: [
    {
        "matches": [...], 
        "js": ["cloak1.js"], 
        "run_at": "document_start"
    }, 
    {
        "matches": [...], 
        "js": ["cloak2.js"], 
        "run_at": "document_end"
    }, 
    ], 
    ...
} 
```

而且您的第一个脚本似乎用于注入 CSS。因此，您也可以直接使用`"css": ["cloak.css"]`而不是注入 CSS `"js": ["cloak1.js"]`，其中 cloak.css 包含这些样式声明。CSS 文件总是在“为页面构建或显示任何 DOM 之前”注入，因此您不需要“run_at”字段。有关详细信息，请参阅[https://developer.chrome.com/trunk/extensions/content_scripts.html#registration](https://developer.chrome.com/trunk/extensions/content_scripts.html#registration)。

# mysql - 从非规范化表中按 ID 从列中获取 SUM？

> ID：13647731
> 
> 赞同：0
> 
> 时间：2012-11-30T15:03:55.073
> 
> 标签：mysql, sum, database-normalization

我有一个来自医院的数据库。在一个表中有 1 个或多个交易号，几乎所有交易号都只包含 1 个医生 ID。该表尚未标准化。

数据如下所示：

```
Trans_No    |Doctor_ID  |Trans_Type                     |PM |Cost
10.853329   |           |ADMINISTRASI                   |   |0.00
10.853329   |10004      |JASA MEDIS                     |   |25000.00
10.853329   |           |OBAT RESEP FARMASI NO : 1077   |F  |2000.00
10.836033   |           |ADMINISTRASI                   |   |0.00
10.836033   |10001      |JASA MEDIS                     |   |25000.00
10.836033   |           |OBAT RESEP FARMASI NO : 3137   |F  |0.00
10.836032   |           |ADMINISTRASI                   |   |0.00
10.836032   |10004      |JASA MEDIS                     |   |25000.00
10.836032   |           |PEMERIKSAAN RADIOLOGI NO 0932.1|R  |15000.00
10.836034   |10604      |JASA MEDIS                     |   |25000.00
10.836034   |           |PEMERIKSAAN RADIOLOGI NO 0932.1|R  |20000.00 
```

我知道我的表需要规范化，但我无法更改数据库，因为我无权这样做。

问题是如何得到这样的结果：

```
Doctor_ID  |medicine    |radiology
10004      |2000.00     |15000.00
10001      |0.00        |0.00
10604      |0.00        |20000.00 
```

PM='F' 作为医学和 PM='R' 作为放射学

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T15:15:47.573

```
SELECT   doctor_id, SUM(medicine) medicine, SUM(radiology) radiology
FROM     (
  SELECT   MAX(doctor_id) doctor_id,
           SUM(IF(pm='F', cost, NULL)) medicine,
           SUM(IF(pm='R', cost, NULL)) radiology
  FROM     my_table
  GROUP BY Trans_No
) t
GROUP BY doctor_id 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/20a51/1/0)上查看。

# unix - 在 unix 启动脚本中检索 pid

> ID：13647745
> 
> 赞同：0
> 
> 时间：2012-11-30T15:04:28.950
> 
> 标签：unix, pid

在我写的一个简单的启动脚本中，我有：

```
PID=`su user_name -c "daemon_name > /dev/null 2>&1 & echo \$!"`  
echo $PID 
```

该脚本以`root`. 而且回声并没有真正回声任何东西:)

如果我在 shell 中输入完全相同的命令，它可以工作：

```
# su user_name -c "daemon_name > /dev/null 2>&1 & echo \$!"  
11831  
# 
```

有任何想法吗？谢谢。

编辑：在我尝试以另一个用户身份运行应用程序之前，它工作正常。
我以前使用过这段代码：

```
PID=`daemon_name > /dev/null 2>&1 & echo $!`  
echo $PID 
```

它工作得很好`root`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T15:25:14.147

尝试 $$ 而不是 $！（当前 pid 而不是最后一个）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T15:47:46.873

守护进程被设计为多次分叉，因此 PID 很可能从 $! 不会是您以后要使用的 pid。您可能必须执行以下操作：

```
ps -eo pid,command,lstart --sort lstart | grep 'daemon_name' | tail -1 
```

# android - 调用 Toast 时出现“java.lang.IllegalArgumentException：视图未附加到窗口管理器”

> ID：13647750
> 
> 赞同：0
> 
> 时间：2012-11-30T15:04:39.520
> 
> 标签：android, android-gallery, onitemclicklistener, android-adapterview

我得到以下“ **java.lang.IllegalArgumentException: View not attach to window manager** ”

当调用**toast.show()**时会发生这种情况。

请问有什么解释吗？非常感谢！！！！

编辑：我发布所有代码+ logcat

代码 - 注意在侦听器中调用**toast.show()时会发生错误。**

```
public class MainActivity extends Activity {
    private Gallery gal;

    @Override
    protected void onCreate(Bundle savedInstanceState) {

        String[] descrizione =    {"cani","boffo","gigo","belo","fyyfy","bogin","boginetti","zippe","ninne","cestino","cagnin    o","cucciolo",};
        ArrayList<Elementi> el = new ArrayList<Elementi>(10);
        int[] tabDrawables = new int[] {
                     R.drawable.img1,R.drawable.img2,R.drawable.img3,R.drawable.img1,R.drawable.img4,R.drawable.    img5,R.drawable.img6,R.drawable.img7,R.drawable.img8,R.drawable.img9,R.drawable.img10};

        for (int numero =1; numero < 10;numero++) {
            ImageView imgm = new ImageView(this);
            imgm.setImageResource(tabDrawables[numero]);
            el.add(new Elementi(imgm,descrizione[numero])); 
            };  

        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Gallery gal=(Gallery)findViewById(R.id.galleria);
        gal.setAdapter(new MyAdapter(el));
        gal.setOnItemClickListener(new MyListener(this));       

    }
public class MyAdapter extends ArrayAdapter<Elementi> {
        public MyAdapter(ArrayList<Elementi> list) {
        super(MainActivity.this, R.layout.row, list);}

    public View getView(int position, View convertView,ViewGroup parent) {
           View row= convertView;  
           if(row==null){
                LayoutInflater inflater = (LayoutInflater)     MainActivity.this.getSystemService( Context.LAYOUT_INFLATER_SERVICE );
                row = inflater.inflate(R.layout.row, null);    
           }

                TextView txt =(TextView)row.findViewById(R.id.testorow);
                txt.setText(getItem(position).tx) ;
                ImageView ima =(ImageView)row.findViewById(R.id.immagine);
                ima.setImageDrawable(getItem(position).im.getDrawable());
                return row;};

}  

public class Elementi { 
public ImageView im;
public String tx;
public Elementi(ImageView img,String txt){
        im =img;
        tx = txt;       
    }
}

public class MyListener implements AdapterView.OnItemClickListener {
     private final Context mContext;
     public MyListener(Activity ctx) {
          mContext = ctx;
        }
    @Override
    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
        Toast toast = new Toast(mContext);
        toast.setView(arg1);
        toast.show();

    }}

} 
```

LOGCAT

```
11-30 17:26:35.421: W/Trace(765): Unexpected value from nativeGetEnabledTags: 0
11-30 17:26:35.440: W/Trace(765): Unexpected value from nativeGetEnabledTags: 0
11-30 17:26:35.440: W/Trace(765): Unexpected value from nativeGetEnabledTags: 0
11-30 17:26:35.681: W/Trace(765): Unexpected value from nativeGetEnabledTags: 0
11-30 17:26:35.681: W/Trace(765): Unexpected value from nativeGetEnabledTags: 0
11-30 17:26:35.961: D/dalvikvm(765): GC_CONCURRENT freed 270K, 14% free 2571K/2968K,     paused 18ms+3ms, total 56ms
11-30 17:26:35.961: D/dalvikvm(765): WAIT_FOR_CONCURRENT_GC blocked 38ms
11-30 17:26:36.131: W/Trace(765): Unexpected value from nativeGetEnabledTags: 0
11-30 17:26:36.140: W/Trace(765): Unexpected value from nativeGetEnabledTags: 0
11-30 17:26:36.140: W/Trace(765): Unexpected value from nativeGetEnabledTags: 0
11-30 17:26:36.241: D/dalvikvm(765): GC_CONCURRENT freed 239K, 12% free 2805K/3172K,     paused 21ms+8ms, total 64ms
11-30 17:26:36.261: W/Trace(765): Unexpected value from nativeGetEnabledTags: 0
11-30 17:26:36.301: W/Trace(765): Unexpected value from nativeGetEnabledTags: 0
11-30 17:26:36.331: W/Trace(765): Unexpected value from nativeGetEnabledTags: 0
11-30 17:26:36.341: W/Trace(765): Unexpected value from nativeGetEnabledTags: 0
11-30 17:26:36.371: W/Trace(765): Unexpected value from nativeGetEnabledTags: 0
11-30 17:26:36.371: W/Trace(765): Unexpected value from nativeGetEnabledTags: 0
11-30 17:26:36.391: W/Trace(765): Unexpected value from nativeGetEnabledTags: 0
11-30 17:26:36.391: W/Trace(765): Unexpected value from nativeGetEnabledTags: 0
11-30 17:26:36.400: W/Trace(765): Unexpected value from nativeGetEnabledTags: 0
11-30 17:26:36.400: W/Trace(765): Unexpected value from nativeGetEnabledTags: 0
11-30 17:26:36.421: D/gralloc_goldfish(765): Emulator without GPU emulation detected.
11-30 17:26:36.451: W/Trace(765): Unexpected value from nativeGetEnabledTags: 0
11-30 17:26:36.501: W/Trace(765): Unexpected value from nativeGetEnabledTags: 0
11-30 17:26:39.158: W/Trace(765): Unexpected value from nativeGetEnabledTags: 0
11-30 17:26:39.161: W/Trace(765): Unexpected value from nativeGetEnabledTags: 0
11-30 17:26:39.171: W/Trace(765): Unexpected value from nativeGetEnabledTags: 0
11-30 17:26:39.171: W/Trace(765): Unexpected value from nativeGetEnabledTags: 0
11-30 17:26:39.191: W/Trace(765): Unexpected value from nativeGetEnabledTags: 0
11-30 17:26:39.191: W/Trace(765): Unexpected value from nativeGetEnabledTags: 0
11-30 17:26:39.281: W/Trace(765): Unexpected value from nativeGetEnabledTags: 0
11-30 17:26:39.301: W/Trace(765): Unexpected value from nativeGetEnabledTags: 0
11-30 17:26:39.310: D/AndroidRuntime(765): Shutting down VM
11-30 17:26:39.310: W/dalvikvm(765): threadid=1: thread exiting with uncaught exception     (group=0x40a70930)
11-30 17:26:39.321: E/AndroidRuntime(765): FATAL EXCEPTION: main
11-30 17:26:39.321: E/AndroidRuntime(765): java.lang.IllegalArgumentException: View not     attached to window manager
11-30 17:26:39.321: E/AndroidRuntime(765):  at     android.view.WindowManagerGlobal.findViewLocked(WindowManagerGlobal.java:383)
11-30 17:26:39.321: E/AndroidRuntime(765):  at     android.view.WindowManagerGlobal.removeView(WindowManagerGlobal.java:285)
11-30 17:26:39.321: E/AndroidRuntime(765):  at     android.view.WindowManagerImpl.removeView(WindowManagerImpl.java:79)
11-30 17:26:39.321: E/AndroidRuntime(765):  at     android.widget.Toast$TN.handleShow(Toast.java:396)
11-30 17:26:39.321: E/AndroidRuntime(765):  at     android.widget.Toast$TN$1.run(Toast.java:310)
11-30 17:26:39.321: E/AndroidRuntime(765):  at     android.os.Handler.handleCallback(Handler.java:725)
11-30 17:26:39.321: E/AndroidRuntime(765):  at     android.os.Handler.dispatchMessage(Handler.java:92)
11-30 17:26:39.321: E/AndroidRuntime(765):  at android.os.Looper.loop(Looper.java:137)
11-30 17:26:39.321: E/AndroidRuntime(765):  at     android.app.ActivityThread.main(ActivityThread.java:5039)
11-30 17:26:39.321: E/AndroidRuntime(765):  at     java.lang.reflect.Method.invokeNative(Native Method)
11-30 17:26:39.321: E/AndroidRuntime(765):  at     java.lang.reflect.Method.invoke(Method.java:511)
11-30 17:26:39.321: E/AndroidRuntime(765):  at     com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
11-30 17:26:39.321: E/AndroidRuntime(765):  at     com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
11-30 17:26:39.321: E/AndroidRuntime(765):  at dalvik.system.NativeStart.main(Native     Method)
11-30 17:26:42.031: I/Process(765): Sending signal. PID: 765 SIG: 9 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T15:14:49.570

我认为问题出在代码上，`toast.setView(arg1);` 因为同一个视图不能不附加到多个对象。因为此视图已附加到图库项目。

**更新** 您只需要`layoutInflator`使用当前视图的相同值重新创建该视图，然后将这个新视图传递给 Toast。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T15:11:22.620

那是因为您的`arg1`视图已经有一个父视图（画廊）......而一个视图只能有一个父视图。

这意味着您无法将其附加到`Toast`除非您先将其从图库中删除

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T16:38:58.353

不要对 UI 内容使用“getApplicationContext()”，而是使用 Activity 上下文。例如

```
 public class MyListener implements AdapterView.OnItemClickListener {

    private final Context mContext;

    public MyListener(Activity ctx) {
      mContext = ctx;
    }

    @Override
    public void onItemClick(AdapterView arg0, View arg1, int arg2, long arg3) {
        Toast toast = new Toast(mContext);
        toast.setView(arg1);
        toast.show();

    }}
```

更好的是在您的活动中实现 AdapterView.OnItemClickListener 以简化事情：

```
 public class MainActivity implements AdapterView.OnItemClickListener {
//start onCreate
gal.setOnItemClickListener(this);
//end onCreate

@Override
    public void onItemClick(AdapterView arg0, View arg1, int arg2, long arg3) {
        Toast toast = new Toast(this);
        toast.setView(arg1);
        toast.show();

    }} 
```

如果这不能解决问题，请使用堆栈跟踪更新您的问题。

# c# - 如何计算项目在c#中数据表的列中出现的次数

> ID：13647755
> 
> 赞同：0
> 
> 时间：2012-11-30T15:04:52.490
> 
> 标签：c#, datatable, count

我创建了一个包含两列“功能”和“日期”的数据表。此表记录了网站上 n 个函数中的每一个函数的使用日期。我想提取特定功能（例如“Access”）出现在表格中的次数。任何帮助将不胜感激。

```
DataTable table = new DataTable();

table.Columns.Add("Function", typeof(string));
table.Columns.Add("Date", typeof(datetime));

table.Rows.Add(Access, 01/08/2012);
table.Rows.Add(Load, 01/08/2012);
table.Rows.Add(Save, 01/08/2012);
table.Rows.Add(Access, 02/08/2012);
table.Rows.Add(Print, 02/08/2012);

int accessCount = 0;

foreach (DataRow row in table.Rows)
{
    if (row["Function"] == "Access")
    {
        accessCount++;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T15:08:38.213

```
var results = table.AsEnumerable()
    .GroupBy(row => row.Field<string>("Function"))
    .Select(group => new 
    {
        Function = group.Key,
        Count = group.Count(),
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T15:18:07.800

您可以使用`Linq-To-Datatable`和`Enumerable.GroupBy`按您的功能进行分组。然后你可以用[`ToDictionary`](http://msdn.microsoft.com/en-us/library/bb548657.aspx)函数作为键，计数作为值来构建一个字典：

```
var functionLookup = table.AsEnumerable()
    .GroupBy(r => r.Field<string>("Function"))
    .ToDictionary(g => g.Key, g => g.Count());

int accessCount = functionLookup["Access"];  // 2 
```

请注意，默认情况下它区分大小写。如果您希望它不区分大小写，则需要传递适当`IEqualityComparer`的密钥，在这种情况下：

```
.ToDictionary(g => g.Key, g => g.Count(), StringComparer.OrdinalIgnoreCase); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T15:09:40.623

你可以使用 linq

```
var result = from rec in table.AsEnumerable 
             group rec by rec.Field<string>("Function") into g 
             select new { Function = g.Key, Count = g.Count()} 
```

# facebook - 如何使用 FB C# SDK 强制登录 Facebook？

> ID：13647759
> 
> 赞同：3
> 
> 时间：2012-11-30T15:05:01.500
> 
> 标签：facebook, facebook-graph-api, facebook-c#-sdk

我在 .net 中使用 FB SDK，在我的网站上有多个用户配置的 Facebook 电子邮件。每当用户想在 FB 上发布任何消息时，他都可以选择任何电子邮件，并且应该能够在 FB 上登录。

问题是，如果用户已经登录到 FB，但想在其他一些 FB 帐户上发布消息，我们无法向他显示登录屏幕，并且消息会发布到已经登录的帐户上。

即使我们有用户`auth_type=reauthenticate`，但这也无助于每次显示登录屏幕。我需要像 twitter 这样的机制来强制登录 FB。

任何人都可以提供帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T20:33:29.333

1.  Facebook 应用程序 – 记下您的应用程序 ID 和应用程序密码
2.  Json.NET 安装在您的 Bin 中。在这里下载：http: [//json.codeplex.com](http://json.codeplex.com)
3.  需要将以下引用添加到您的应用程序将在其上设置的页面：

    使用 Newtonsoft.Json.Linq；使用 Newtonsoft.Json.Serialization；使用 System.Collections.Generic；使用 System.Security.Cryptography；

4.  这是 HTML 内容：

    ```
     <div id="fb-root"></div> 
    ```

    ```
    function runLogin() {
    FB.init({
    appId  : 'ENTERYOURAPPIDHERE',
    status : true,
    cookie : true,
    xfbml  : true,
    channelURL: 'ENTERTHEPAGEYOURAPPURLPOINTSTOHERE', // channel.html file 
    oauth : true 
    }); 
    ```

    ```
    <div id="dontLike">
        PAGE IS <b>NOT</b> Liked
    </div>

    </form> 
    ```

打开页面的代码隐藏。我们验证了代码签名请求。

```
public bool ValidateSignedRequest()
    {
        var VALID_SIGNED_REQUEST = Request.Form["signed_request"];

        string applicationSecret = "YOURAPPSECRET";
        string[] signedRequest = VALID_SIGNED_REQUEST.Split('.');
        string expectedSignature = signedRequest[0];
        string payload = signedRequest[1];

        // Attempt to get same hash
        var Hmac = SignWithHmac(UTF8Encoding.UTF8.GetBytes(payload), UTF8Encoding.UTF8.GetBytes(applicationSecret));
        var HmacBase64 = ToUrlBase64String(Hmac);

        return (HmacBase64 == expectedSignature);
    }

   private string ToUrlBase64String(byte[] Input)
    {
        return Convert.ToBase64String(Input).Replace("=", String.Empty)
                                            .Replace('+', '-')
                                            .Replace('/', '_');
    }

    private byte[] SignWithHmac(byte[] dataToSign, byte[] keyBody)
    {
        using (var hmacAlgorithm = new HMACSHA256(keyBody))
        {
            hmacAlgorithm.ComputeHash(dataToSign);
            return hmacAlgorithm.Hash;
        }
    }

 public Dictionary<string, string> DecodePayload(string payload)
    {
        //Remove the bad part of signed_request
        //Begin
        string[] sB64String = payload.Split('.');
        payload = payload.Replace((sB64String[0] + "."), string.Empty);
        //End
        var encoding = new UTF8Encoding();
        var decodedJson = payload.Replace("=", string.Empty).Replace('-', '+').Replace('_', '/');
        var base64JsonArray = Convert.FromBase64String(decodedJson.PadRight(decodedJson.Length + (4 - decodedJson.Length % 4) % 4, '='));
        var json = encoding.GetString(base64JsonArray);
        var jObject = JObject.Parse(json);
        var parameters = new Dictionary<string, string>();

        parameters.Add("page", ((bool)jObject["page"]["liked"]).ToString());
        parameters.Add("admin", ((bool)jObject["page"]["admin"]).ToString());
        return parameters;
    }

protected void pageLike()
    {
        string pageLiked = string.Empty;
        var signed_request = Request.Form["signed_request"];
        var json = DecodePayload(signed_request);

        foreach (KeyValuePair<string, string> objKVP in json)
        {
            //Note You can also see if a user is an admin by replacing the objKVP.Key with admin
            if (objKVP.Key == "page" && objKVP.Value == "True")
            {
                Response.Redirect("https://www.YOURSITE.com/facebook/app/pageLiked.aspx");
                litJson.Text += objKVP.Key + " - " + objKVP.Value + "<br />";
            }
        }
    }

    protected void Page_Load(object sender, EventArgs e)
        {
        pageLike();
    } 
```

您可以在此链接中看到此示例：[http ://blog.daniellecopp.com/2012/03/19/detect-if-facebook-user-likes-your-page-with-asp-net-2/#comment- 52](http://blog.daniellecopp.com/2012/03/19/detect-if-facebook-user-likes-your-page-with-asp-net-2/#comment-52)

# objective-c - 何时使用自我？

> ID：13647760
> 
> 赞同：-2
> 
> 时间：2012-11-30T15:05:03.560
> 
> 标签：objective-c, cocoa-touch, self

我是 iOS 开发的新手。

我有以下财产，

```
@property(nonatomic,retain)NSMutableArray *dataArray; 
```

我正在执行以下操作来分配它

```
self.dataArray=[[NSMutable alloc]init]; 
```

在 dealloc 中，我正在执行以下操作

```
-(void)delloc{
  [dataArray release];
  [super dealloc];
} 
```

但是我的数组初始化出现内存泄漏。但是，它不会创建

当我不使用 self 时泄漏。但我想知道它是一种初始化数组的写方法

不使用自我。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T15:15:18.240

因为 dataArray 属性是用 retain 声明的，所以你得到了一个泄漏，这意味着当你使用 self（因此你使用 setter）时，你的保留计数上升到 2 并且你只释放它一次。另一方面，如果您只使用 ivar，则保留计数为 1（因为分配）并且您释放它一次，这很好。为了避免第一种情况下的内存泄漏，像这样自动释放它。

self.data = [[NSMutableArray alloc] init] autorelease];

这将平衡保留计数。至于访问，除了dealloc方法里面，尽量用self（setter和getter）

您应该阅读内存管理文档，这是为 Cocoa Touch 开发时首先要开始的事情。

另外，你为什么不使用ARC？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T15:16:09.927

如果您使用`self.`通过自动生成/自定义 getter/setter 访问对象的签名。设置器通常会管理内存，您不需要这样做。如果您不使用 self 您可以直接访问该对象。

您提供的代码正在泄漏，因为 的默认设置器`dataArray`将保留到数组中，您设置`self.dataArray = [[NSMutableArray alloc] init];` 的正确用法是：

```
self.dataArray = [[[NSMutableArray alloc] init] autorelease]; 
```

或者：

```
_dataArray = [[NSMutableArray alloc] init]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T15:16:43.673

这里发生的事情`alloc`是将新对象的保留计数加一。属性引用也保留了对象。如果你想这样做，你只想要其中之一。一种常见的方法是：

```
self.dataArray = [[[NSMutableArray alloc]init] autorelease]; 
```

但是，最好还是按照@c.cam108 的建议使用 ARC 并避免整个问题。

# radio-button - 如何使用 PreviousPage.FindControl (VB.NET)

> ID：13647761
> 
> 赞同：-1
> 
> 时间：2012-11-30T15:05:03.647
> 
> 标签：radio-button, findcontrol

我在 page1 中有 2 个单选按钮如何在 page2 中使用此方法（ PreviousPage.FindControl ）以便了解第 1 页中选择了哪个单选按钮

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T16:44:08.930

最好使用以下机制将数据从页面传输到另一个页面：

**客户端存储机制：**

*   饼干
*   请求参数
*   隐藏字段（视图状态）
*   缓存

**服务器端存储机制：**

*   会议
*   应用

例如，在第一页中，您选择单选按钮并单击按钮或链接按钮，在 button_click 事件中您找到选定的单选按钮，并将选定的数据放入查询字符串变量中，然后重定向到第二页：

> Response.Redirect("~/secondPage.aspx?var=" + data)

在第二页阅读查询字符串：

> Request.QueryString["var"]

# php - 如何使用简单的 HTML DOM 访问 CDATA 内的节点？

> ID：13647762
> 
> 赞同：1
> 
> 时间：2012-11-30T15:05:05.713
> 
> 标签：php, xml, cdata

给定一个xml

```
<xml>
<![CDATA[<myNode>aaa</myNode><anotherNode>bbb</anotherNode>]]>
</xml> 
```

如何使用简单的 HTML DOM 访问 myNode 内的节点（它位于 CDATA 内）？

有可能吗，或者我应该换成另一个库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T15:18:35.233

CDATA 块将被任何解析器忽略，因此您在 CDATA 块中拥有的任何 xml 节点都将不可查询，除非您也解析 CDATA 文本。换句话说：

1.  解析您的原始文档
2.  查询您的 CDATA 文本块。您将获得一个新的 xml 字符串。
3.  解析您的新（内部）xml 字符串，并从中查询您需要的任何数据。

说了这么多，为什么在 CDATA 块中有完整的 xml 文本？听起来对我来说非常懒惰。

# javascript - 只有最后一个选择元素获取选项元素

> ID：13647763
> 
> 赞同：1
> 
> 时间：2012-11-30T15:05:09.677
> 
> 标签：javascript, for-loop, html-select, appendchild

我正在尝试编写一个将所有项目选项添加到每个选择元素的代码。由于某种原因，只有最后一个选择元素获得选项。
这是代码：

```
for (var i=0; i<itemcount; i++) {
    var newE=document.createElement("span");
    var newD=document.createElement("input");
    var newS=document.createElement("select");
    newE.id="itemcontainer";
    newD.id="drop"+i;
    newS.id="sel"+i;
    for (var j=0; j<itemos.length; j++) {
        newS.appendChild(itemos[j]);
    }
    newD.type="checkbox";
    newD.name="drop";
    newE.appendChild(newD);
    newE.appendChild(document.createTextNode("Drop? "));
    newE.appendChild(newS);
    container.appendChild(newE);
    container.appendChild(document.createElement("br"));
} 
```

怎么了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T15:08:56.873

一个`<option>`元素一次只能在一个元素中`<select>`。您试图将相同的选项添加到许多不同的`<select>`列表中，但这是行不通的。

您必须`<option>`为每个`<select>`.

# button - 模拟器不显示按钮文本

> ID：13647764
> 
> 赞同：8
> 
> 时间：2012-11-30T15:05:09.127
> 
> 标签：button, ios6, ios-simulator, xcode4.5

我正在学习使用 XCode 4.5.2 构建 iPhone 应用程序，但我发现了一些奇怪的东西。正如您在地址[http://i.stack.imgur.com/purI8.jpg](http://i.stack.imgur.com/purI8.jpg)中看到的那样，其中一个按钮内的文本不会显示在 iOS6 模拟器中。我还尝试将 Enter 按钮移到 0 和 - 的同一行中，但是该行的所有三个按钮中的文本都消失了。任何人都知道这个问题的原因是什么以及如何解决它？这是代码：

```
#import "CalculatorViewController.h"
#import "CalculatorBrain.h"

@interface CalculatorViewController()
@property (nonatomic) BOOL userIsInTheMiddleOfEnteringANumber;
@property (nonatomic, strong) CalculatorBrain *brain;
@end

@implementation CalculatorViewController

@synthesize display;
@synthesize userIsInTheMiddleOfEnteringANumber;
@synthesize brain = _brain;

- (CalculatorBrain *)brain
{
    if (!_brain) _brain = [[CalculatorBrain alloc] init];
    return _brain;
}

- (IBAction)digitPressed:(UIButton *)sender
{    
    NSString *digit = [sender currentTitle];
    if (self.userIsInTheMiddleOfEnteringANumber) {
        self.display.text = [self.display.text stringByAppendingString:digit];
    } else {
        self.display.text = digit;
        self.userIsInTheMiddleOfEnteringANumber = YES;
    }
}

- (IBAction)enterPressed
{
     [self.brain pushOperand:[self.display.text doubleValue]];
     self.userIsInTheMiddleOfEnteringANumber = NO;
}

- (IBAction)operationPressed:(UIButton *)sender
{
    if (self.userIsInTheMiddleOfEnteringANumber) [self enterPressed];

    NSString *operation = [sender currentTitle];
    double result = [self.brain performOperation:operation];
    self.display.text = [NSString stringWithFormat:@"%g", result];
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-29T17:07:50.200

根据[https://developer.apple.com/library/ios/documentation/uikit/reference/UIButton_Class/UIButton/UIButton.html#//apple_ref/doc/uid/TP40006815-CH3-SW7](https://developer.apple.com/library/ios/documentation/uikit/reference/UIButton_Class/UIButton/UIButton.html#//apple_ref/doc/uid/TP40006815-CH3-SW7)

```
- (void)setTitle:(NSString *)title forState:(UIControlState)state 
```

设置按钮标题。

所以在你的情况下：

```
- (IBAction)operationPressed:(UIButton *)sender{
   ....
   [sender setTitle:[NSString stringWithFormat:@"%g", result] forState: UIControlStateNormal];

   // lets assume you want the down states as well:
   [sender setTitle:[NSString stringWithFormat:@"%g", result] forState: UIControlStateSelected];
   [sender setTitle:[NSString stringWithFormat:@"%g", result] forState: UIControlStateHighlighted]; 
```

}

# vb.net - 从 Timer/BackgroundWorker Completed 引发自定义事件是否正确并继续更新 UI

> ID：13647765
> 
> 赞同：0
> 
> 时间：2012-11-30T15:05:15.160
> 
> 标签：vb.net, winforms, multithreading, events, invoke

我的 winforms 应用程序需要与硬件设备交互。显示是一种工作流程......在步骤 1 .. 完成后.. 转到步骤 2 .. 等等。显示是动态的，控件在运行时可见并且活动正在启动（这些用户控件中的每一个都使用计时器/ BGWorker 内）。

我从 timer/BGWorker_Completed 引发自定义事件。这将有助于进行下一步并更新 UI。我在做正确的事吗？

我是winforms的新手，我只是无法弄清楚显示失败的原因。

我没有发现任何异常......但是在特定步骤之后我看不到控件！我不知道在哪里以及如何调试这种情况。如果我单独执行主窗体..我也可以看到显示。但是，如果我从登录页面导航/更改主表单中的选项卡并返回..我看不到显示。

在调用 UI 上的更新之前，我尝试按以下相同顺序进行检查。Thread.Current.IsBackground 返回 false，control.IsHandleCreated 返回 true，否则我使用 dim x=Control.handle()) 创建它 Me.InvokeRequired/ Control.invokeRequired 返回 false（我想要的方式）。但是我没有看到 userControl 正在显示...可见性/颜色/正在设置所有内容（在程序中）..并且我能够看到硬件交互!!!.. 但是没有显示:-(（第 4 步及以后)

我在登录页面……或 tabChanged 事件中没有做任何花哨的事情。（在选项卡更改事件上......我只清理打开的连接/关闭 bg 工作人员（如果有的话）......将在需要时重新连接）

请让我知道我是否需要做任何事情......以及如何解决这个问题。我还在初始化每个用户控件/主窗体的组件后不久调用 EnsureHandleIsCreated(control) 子例程。

```
'Code in Login Form
    Dim myForm as new MainForm()
    myForm.ShowDialog(Me) ' here i also tried with show/showDialog.. with/without ownerForm 
    Me.Hide() ' Hide login page

'Code for checking if handle is created or not
    Public Sub CheckForInvalidThread()
        frmMain.CheckForIllegalCrossThreadCalls() = True
        If Thread.CurrentThread.IsBackground Or Not Thread.CurrentThread.Name Is THREAD_MAIN_NAME Then
            Throw New InvalidOperationException(THREAD_IS_INVALID)
        End If
        If Not Me.IsHandleCreated Then
            Dim x = Me.Handle()
            Thread.Sleep(20)
        End If
    End Sub

    Public Sub EnsureHandleIsCreated(ByRef c As Control)
        Try
            If Not c.IsHandleCreated Then
                Dim h As System.IntPtr = c.Handle()
            End If
        If c.HasChildren Then
                For Each child As Control In c.Controls
                    Try
                        EnsureHandleIsCreated(child)
                    Catch ex As Exception
                        DAL.LogException(ex.Message, ex.StackTrace, "EnsureHandleIsCreated: " & c.Name, 0)
                    End Try

                Next
            End If
        Catch ex As Exception
            DAL.LogException(ex.Message, ex.StackTrace, "EnsureHandleIsCreated: " & c.Name, 0)
        End Try
    End Sub 

    Private Sub frmMain_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        lbRole.Text = RoleName
        lbName.Text = UserName
        Try
            Me.Activate()

            If Thread.CurrentThread.IsBackground Then
                Throw New ApplicationException(THREAD_IS_INVALID)
            End If
            Thread.CurrentThread.Name = THREAD_MAIN_NAME

            CheckForInvalidThread()
            clGlobals.frmMain = Me

            If RoleName Is Nothing Or String.IsNullOrEmpty(RoleName) Or RoleName.Equals("OPERATOR", StringComparison.InvariantCultureIgnoreCase) Then
                tcEtch.TabPages("tbMaintenance").Hide()
                tcEtch.TabPages("tbAdmin").Hide()
            End If
        Catch ex As Exception
             MessageBox.Show(ex.Message, "Error", MessageBoxButtons.OK, MessageBoxIcon.Error)
    Exit Sub
        Finally

        End Try
        Initiate()
    End Sub 

    Public Sub GoToNextStep() Handles Me.GoToNextStepEvent
        Try
           CheckForInvalidThread()
           CurrentStep = CurrentStep + 1

            Select Case CurrentStep
                Case 0 To 2
                    If Me.InvokeRequired Then
                        _delegateDisplayInitiate = AddressOf DisplayStep2
                        Me.Invoke(_delegateDisplayInitiate)
                    Else
                        DisplayStep2()
                    End If

                Case 3
                    If ucCycleStart.InvokeRequired Then
                        _delegateDisplayInitiate = AddressOf DisplayStep3
                        ucCycleStart.Invoke(_delegateDisplayInitiate)
                    Else
                        DisplayStep3()
                    End If
                Case 4
                    If Me.InvokeRequired Or ucPartCountVerification.InvokeRequired Or Thread.CurrentThread.IsBackground Then
                        Throw New Exception("Check out")
                    End If

                    EnsureHandleIsCreated(ucPartCountVerification)
                    If ucPartCountVerification.InvokeRequired Then
                        _delegateDisplayInitiate = AddressOf DisplayStep4
                        ucPartCountVerification.Invoke(_delegateDisplayInitiate)
                    Else
                        DisplayStep4()
                    End If

             End Select
        Catch ex As Exception
            MessageBox.Show(ex.Message, "Error", MessageBoxButtons.OK, MessageBoxIcon.Error)
        End Try
    End Sub

     Private Sub DisplayStep4() Handles Me.DisplayStep4Event
        ucPartCountVerification.Visible = True
        ucPartCountVerification.Show()
        ucPartCountVerification.Initiate()
    End Sub

     Public Sub Initiate()
            frmMain.CheckForInvalidThread()

            'Just to verify if things are fine.. i put in this check below
        If Me.InvokeRequired Or pnStep4.InvokeRequired Or Not (Me.IsHandleCreated And pnStep4.IsHandleCreated ) Then
                MessageBox.Show("cHECK OUT")
            Else
                Me.Visible = True
                pnStep4.Visible = True

                Me.BackColor = Color.Red
                pnStep4.BackColor = Color.Gray

                Dim height = Me.Size.Height
                Dim width = Me.Size.Width
                MessageBox.Show(height.ToString() + Me.InvokeRequired.ToString())
            End If

    end Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T15:22:10.773

`BackgroundWorker`您当然可以从 a或引发事件`Timer`。您已经在检查`InvokeRequired`，这是正确的做法。然后您需要调用`BeginInvoke`（或者`Invoke`，如果需要同步）来更新您的 UI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T15:22:17.573

你在正确的轨道上。在处理来自某些库的事件时，您无法确定它们是在哪个线程上传递的。这是令人失望的，因为 Windows 窗体具有从 GUI 线程进行调用调用的限制。[这篇 MSDN 文章](http://msdn.microsoft.com/en-us/magazine/cc188732.aspx)解释了这个问题。

你在正确的轨道上[`InvokeRequired`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.invokerequired.aspx)。它可以让您查看您是否在正确的线程上，但是您需要一种方法来处理这种情况并在正确的线程上重新调用事件。

这是我在 C# 中如何做到这一点...

```
public delegate void uiEventHandler();

void uiEvent(object sender, EventArgs e)
{
    if (InvokeRequired)
    {
        // We are not on the correct thread. We'd better get there.
        var eh = new uiEventHandler(uiEvent);
        Invoke(eh, new object[] { sender, e });
        return; //This thread has no more work to do.
    }

    // Do your work here that requires being performed on the GUI thread.
} 
```

# tomcat - 我想被 HttpServlet 称为别名？

> ID：13647771
> 
> 赞同：0
> 
> 时间：2012-11-30T15:05:25.893
> 
> 标签：tomcat, servlets, alias

我的 Tomcat-Server 在两个别名后面运行。

```
 http://aliasAAA.firma.com 
```

和

```
 http://aliasBBB.firma.com 
```

我想被 HttpServlet 称为别名？有可能吗？

# python - 将 glob.iglob() 结果分配给列表

> ID：13647772
> 
> 赞同：1
> 
> 时间：2012-11-30T15:05:31.873
> 
> 标签：python, list, iterator

-function`glob.iglob()`返回一个迭代器。如何最有效地将其“项目”分配给 Python 中的列表？我想要一个列表中的结果，以便我可以选择一个随机项目`random.choice()`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T15:05:59.757

您可以改用`glob.glob`它，因为它返回一个列表。

要从任意可迭代对象中构建列表，您只需使用`list`内置函数：

```
list(glob.iglob('*')) 
```

# jquery - 在鼠标悬停时显示孩子，但在鼠标关闭时隐藏孩子

> ID：13647775
> 
> 赞同：2
> 
> 时间：2012-11-30T15:05:40.683
> 
> 标签：jquery

我试图制作一个与 IE 兼容的菜单... :(

我使用具有以下结构的 css 做了一个菜单：

```
<div id="menu">
<ul id="menuu">
<li><a href="#" class="parent">Parent</a>
<ul class="children">
<li><a href="/#">name</a></li>
<li><a href="/#">name</a></li>
<li><a href="/#">name</a></li>
</ul>
</li>
</ul>
</div> 
```

我想做的是：
- 当鼠标悬停在 a.parent 上时，使用淡入淡出显示孩子
- 当您离开父母并且离开孩子时，隐藏孩子。
- 当你进入另一个孩子时，隐藏以前的孩子。

我做了一个脚本，但我无法以正确的方式隐藏孩子们。

```
<script>
$('a.parent').hover(function() {
    if( $(this).next().hasClass('children') ){
        $(this).next().fadeIn();
    }else{
        //alert( 'false' );
    }
},
function() {
//here when you are out from a.parent

});
</script> 
```

因为如果我在离开父母时隐藏孩子（子菜单），我无法打开孩子的任何链接，因为当我从父母移到孩子时，孩子被隐藏了......所以我不知道如何解决它。 .. :(

有人可以帮助我吗？？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T15:10:10.283

如何将对象与背景混合，而不是让它消失？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T15:15:57.073

这应该有效：

```
$('a.parent').bind('mouseover',function(){  
   $(this).addClass('hover');
   if($(this).next('ul').hasClass('children')){
      $(this).next('.children').addClass('expanded');         
     $(this).next('.children').stop().fadeIn();
    } else {
     //
    }
}).bind('mouseout',function(){
     $(this).removeClass('hover');
     if($(this).next('.children').not('.expanded'))
      {
         //If need be, you can add a delay here to make sure the mouse made it to 'children'
         $('.children').stop().fadeOut();
      }
})

$('.expanded').bind('mouseout',function(){
   $(this).removeClass('expanded');
   if($(this).prev('a').not('.hover')){
      $(this).stop().fadeOut();
    }
}) 
```

# php - DateTime::createFromFormat PHP < 5.3 的替代方案，缺少 strptime

> ID：13647783
> 
> 赞同：1
> 
> 时间：2012-11-30T15:05:57.867
> 
> 标签：php

我前段时间问过[这个问题。](https://stackoverflow.com/questions/13344045/find-differently-styled-date-in-comments)现在我需要在生产服务器上运行它，但是服务器是 5.2.9 ...

我如何编写一个替代函数，它会给我作为 DateTime::createFromFormat 函数的**确切结果？**

**是**的，我知道有重复，但它们都使用`strptime`. 但是当我尝试使用它时，我得到：`Fatal error: Call to undefined function strptime()`.

不，我无法访问此生产服务器，因此我无法更改它的任何设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T15:12:03.260

包括这个，你可以使用`strptime`：

```
/*
 * This work of Lionel SAURON (http://sauron.lionel.free.fr:80) is licensed under the
 * Creative Commons Attribution 2.0 France License.
 *
 * To view a copy of this license, visit http://creativecommons.org/licenses/by/2.0/fr/
 * or send a letter to Creative Commons, 171 Second Street, Suite 300, San Francisco, California, 94105, USA.
 */

/**
 * Parse a time/date generated with strftime().
 *
 * This function is the same as the original one defined by PHP (Linux/Unix only),
 *  but now you can use it on Windows too.
 *  Limitation : Only this format can be parsed %S, %M, %H, %d, %m, %Y
 * 
 * @author Lionel SAURON
 * @version 1.0
 * @public
 * 
 * @param $sDate(string)    The string to parse (e.g. returned from strftime()).
 * @param $sFormat(string)  The format used in date  (e.g. the same as used in strftime()).
 * @return (array)          Returns an array with the <code>$sDate</code> parsed, or <code>false</code> on error.
 */
if(function_exists("strptime") == false)
{
    function strptime($sDate, $sFormat)
    {
        $aResult = array
        (
            'tm_sec'   => 0,
            'tm_min'   => 0,
            'tm_hour'  => 0,
            'tm_mday'  => 1,
            'tm_mon'   => 0,
            'tm_year'  => 0,
            'tm_wday'  => 0,
            'tm_yday'  => 0,
            'unparsed' => $sDate,
        );

        while($sFormat != "")
        {
            // ===== Search a %x element, Check the static string before the %x =====
            $nIdxFound = strpos($sFormat, '%');
            if($nIdxFound === false)
            {

                // There is no more format. Check the last static string.
                $aResult['unparsed'] = ($sFormat == $sDate) ? "" : $sDate;
                break;
            }

            $sFormatBefore = substr($sFormat, 0, $nIdxFound);
            $sDateBefore   = substr($sDate,   0, $nIdxFound);

            if($sFormatBefore != $sDateBefore) break;

            // ===== Read the value of the %x found =====
            $sFormat = substr($sFormat, $nIdxFound);
            $sDate   = substr($sDate,   $nIdxFound);

            $aResult['unparsed'] = $sDate;

            $sFormatCurrent = substr($sFormat, 0, 2);
            $sFormatAfter   = substr($sFormat, 2);

            $nValue = -1;
            $sDateAfter = "";

            switch($sFormatCurrent)
            {
                case '%S': // Seconds after the minute (0-59)

                    sscanf($sDate, "%2d%[^\\n]", $nValue, $sDateAfter);

                    if(($nValue < 0) || ($nValue > 59)) return false;

                    $aResult['tm_sec']  = $nValue;
                    break;

                // ----------
                case '%M': // Minutes after the hour (0-59)
                    sscanf($sDate, "%2d%[^\\n]", $nValue, $sDateAfter);

                    if(($nValue < 0) || ($nValue > 59)) return false;

                    $aResult['tm_min']  = $nValue;
                    break;

                // ----------
                case '%H': // Hour since midnight (0-23)
                    sscanf($sDate, "%2d%[^\\n]", $nValue, $sDateAfter);

                    if(($nValue < 0) || ($nValue > 23)) return false;

                    $aResult['tm_hour']  = $nValue;
                    break;

                // ----------
                case '%d': // Day of the month (1-31)
                    sscanf($sDate, "%2d%[^\\n]", $nValue, $sDateAfter);

                    if(($nValue < 1) || ($nValue > 31)) return false;

                    $aResult['tm_mday']  = $nValue;
                    break;

                // ----------
                case '%m': // Months since January (0-11)
                    sscanf($sDate, "%2d%[^\\n]", $nValue, $sDateAfter);

                    if(($nValue < 1) || ($nValue > 12)) return false;

                    $aResult['tm_mon']  = ($nValue - 1);
                    break;

                // ----------
                case '%Y': // Years since 1900
                    sscanf($sDate, "%4d%[^\\n]", $nValue, $sDateAfter);

                    if($nValue < 1900) return false;

                    $aResult['tm_year']  = ($nValue - 1900);
                    break;

                // ----------
                default:
                    break 2; // Break Switch and while

            } // END of case format

            // ===== Next please =====
            $sFormat = $sFormatAfter;
            $sDate   = $sDateAfter;

            $aResult['unparsed'] = $sDate;

        } // END of while($sFormat != "")

        // ===== Create the other value of the result array =====
        $nParsedDateTimestamp = mktime($aResult['tm_hour'], $aResult['tm_min'], $aResult['tm_sec'],
                                $aResult['tm_mon'] + 1, $aResult['tm_mday'], $aResult['tm_year'] + 1900);

        // Before PHP 5.1 return -1 when error
        if(($nParsedDateTimestamp === false)
        ||($nParsedDateTimestamp === -1)) return false;

        $aResult['tm_wday'] = (int) strftime("%w", $nParsedDateTimestamp); // Days since Sunday (0-6)
        $aResult['tm_yday'] = (strftime("%j", $nParsedDateTimestamp) - 1); // Days since January 1 (0-365)

        return $aResult;
    } // END of function

} // END of if(function_exists("strptime") == false) 
```

然而，由于 DateTime::createFromFormat 返回一个 DateTime 的对象，你不能在 PHP < 5.3 中得到完全相同的结果（除非你愿意编写你自己的类，它的行为与 DateTime 完全一样）

# ios - 居中背景图像和自动布局惨败

> ID：13647792
> 
> 赞同：0
> 
> 时间：2012-11-30T15:06:29.957
> 
> 标签：ios, xcode

我有一个宽度为 768 像素的背景图像，如下所示。而且我有几个较小的图像需要放置在它们所在的位置。例如，蓝色的需要定位在 40、120。

![在此处输入图像描述](../Images/5943765501d32d7c9f7a528cbdf9e04f.png)

当用户将设备方向更改为横向时会出现问题。背景图像位于中心（编辑器>对齐>容器中的水平中心）。所以背景图像在中心水平布置。系统自动将蓝色图像的 x 坐标设置为 40，而不是距离背景图像边缘的 40 个像素。所以小家伙们错位了。（预期位置以白色显示。）

![在此处输入图像描述](../Images/1075c8de2548f388e129a504ebc03076.png)

那么我该怎么做才能根据背景图像的位置布置小家伙呢？我已经做了很多事情，比如选择背景图片和相应的小家伙，然后选择编辑器 > 引脚 > 水平间距。没有任何效果。在这种情况下，无论设备方向如何，都可以保持相对位置吗？还是我应该不使用“自动布局”？第二个最佳选择是不定位背景图片。但是当用户将方向更改为横向时，应用程序看起来并不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T15:21:09.377

将小孩嵌入到背景图片中**（全部嵌入到容器 UIView 中！）**

坐标总是相对于外部容器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T16:27:43.160

我以某种方式将它们放在 UIScrollView 组中，然后像下面这样将它们作为一个整体移动。

```
- (void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation) interfaceOrientation duration:(NSTimeInterval)duration {
if (interfaceOrientation == UIInterfaceOrientationPortrait || interfaceOrientation == UIInterfaceOrientationPortraitUpsideDown)
{
    uiscrollview1.Frame=CGRectMake(uiscrollview1.frame.origin.x, uiscrollview1.frame.origin.y, uiscrollview1.frame.size.width, uiscrollview1.frame.size.height);
}
else
{
    uiscrollview1.Frame=CGRectMake(uiscrollview1.frame.origin.x+128, uiscrollview1.frame.origin.y, uiscrollview1.frame.size.width, uiscrollview1.frame.size.height);
}
} 
```

这是迄今为止最好的结果。

# ruby-on-rails - 在 Ubuntu 12.04 上为 Rails 找到合适的版本

> ID：13647795
> 
> 赞同：0
> 
> 时间：2012-11-30T15:06:36.140
> 
> 标签：ruby-on-rails, ruby

我使用`apt-get install rails`.

当我运行`rails server`命令时，Rails 会创建一个名为“服务器”的项目。谷歌搜索后，我发现我的版本应该是旧的，所以我应该运行`script/server`or `script/generate`.

所以，我想正确升级 Rails，因为很多东西似乎已被弃用，但我的版本是 Rails 2.3.14（而 Ruby 是 1.8.7）。如何升级 Rails ？如果完成，是否与这个版本的 Ruby 匹配？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T15:40:55.030

您是否尝试过`sudo gem install rails`升级到最新版本？

要升级 Ruby，请检查您`apt-cache`的最新可用版本。如果它比安装的更新，您可以使用`apt-get`它来安装它。

或者，按照建议，您可以使用 RVM 来管理您的 Ruby 安装。仔细按照安装说明进行操作——人们经常进行部分安装，因为他们没有阅读说明并执行所需的操作，最终导致 RVM 安装无法正常运行。

就个人而言，我经常从源代码安装我的生产主机，但在我的开发主机上使用 RVM 或 rbeenv 允许我在自己的沙箱中运行多个版本的 Ruby。

我故意说得有点含糊。您需要做的所有事情都可以在网络上轻松获得，并且您可以轻松找到。例如，有“ [Upgrading rails to the latest version from 2.3.5](https://stackoverflow.com/questions/11312414/upgrading-rails-to-the-latest-version-from-2-3-5?rq=1) ”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T16:28:49.027

当我在任何基于 debian 的发行版（Ubuntu 是基于 debian）上安装 rails 时，我没有找到比[Ryan Bigg 的关于为 Ubuntu 安装 Rails 的教程](http://ryanbigg.com/2010/12/ubuntu-ruby-rvm-rails-and-you/)更好的指南。当然，它说它适用于 Ubuntu 10.10，但所有命令也应该适用于 12.04（据我所知）。本教程还遵循最佳实践（例如为 ruby​​ 安装版本管理器，这在您开始开发多个 Rails 应用程序时非常有用）。

**我建议您在按照教程操作之前**删除当前的 rails 安装，以确保没有问题：

```
sudo apt-get purge rails 
```

这将删除旧的 rails 包和它制作的任何配置文件。当按照我上面链接的教程进行操作时，您可以像平常一样从教程中选择并复制命令，然后将它们粘贴到命令行中`Shift+CtrL+V`。但是，*从学习的角度来看，自己键入命令会更有帮助*。确保您了解每个命令在运行时的作用。只是为了澄清这一点，ruby 是您安装在计算机上的程序，因此它可以理解 ruby​​ 语言（不是 gem）。Rails 是一个 gem，所以你不要像其他程序一样安装它。所有 gem 都使用`gem install`or`bundle install`命令安装。

最后，它还包括一些关于安装 MySQL 或 Postgres 的注意事项，这有时会有点棘手。

# opencv - opencv InitUndistortRectifyMap 地图大小

> ID：13647796
> 
> 赞同：3
> 
> 时间：2012-11-30T15:06:38.320
> 
> 标签：opencv, computer-vision, crop, camera-calibration

我正在使用opencv进行图像校正，但想使用c函数cvInitUndistortRectifyMap返回的映射（mapx和mapy）自己进行映射（通常由cvremap完成）。在这个过程中，我觉得奇怪的是 opencv 只返回原始图像大小的地图

这意味着在原始图像映射到其大小之外的区域中，校正后的图像只是被裁剪，因为映射只是图像的大小？！你能得到一个完整的映射，这样你就得到了整个校正后的图像，而不仅仅是原始图像（大小）中的一部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T15:47:12.207

不仅仅是图像大小的问题，其原因是默认情况下， **cvInitUndistortRectifyMap 会**生成一个仅指向源图像中有效像素的映射。你想要的是得到所有的像素。

为此，您可以使用**cvInitUndistortRectifyMap的****newCameraMatrix**参数。**newCameraMatrix**的值是通过首先调用**cvGetOptimalNewCameraMatrix**（参见[此链接](http://opencv.willowgarage.com/documentation/camera_calibration_and_3d_reconstruction.html#getoptimalnewcameramatrix)）并设置*alpha*参数来获得的。如链接中所述：

 ********   如果 alpha = 0，则未失真图像中的所有像素都将有效（您现在获得的内容）。
*   如果 alpha = 1，则所有源图像像素都将保留在未失真的图像中（您想要的）。一些像素与源图像的任何位置都不匹配，因此它们将是黑色的。

如果您愿意，您可以使用 cvGetOptimalNewCameraMatrix 的 newImageSize 参数改变校正图像的所需大小，**但这****不会**改变您在结果中获得的像素。*******

# c++ - 转置期间的动态内存分配

> ID：13647804
> 
> 赞同：1
> 
> 时间：2012-11-30T15:07:04.637
> 
> 标签：c++, matrix, dynamic-memory-allocation

我正在尝试计算一个不是 n 乘 n 的矩阵的转置。问题是我必须为要添加的每个元素分配新内存，我不必删除 **array。代码就是这样。// 初始化一个二维数组。

```
array  = new int*[row];
    for (int i=0; i<row; i++){
        arr[i] = new int[col]();
    } 
```

现在我只考虑一种情况，假设我的矩阵是 3*4。矩阵的转置有 4*3 的暗淡。我执行以下代码但它给出了“分段错误”。这个想法是我为将作为转置结果添加的元素分配一个新内存。代码是：

```
int r=col;
int c=row;
 if (col<c){
  arr  = new int*[row];
  for (int i=col; i<=c; i++){
  arr[i] = new int[col](); // trying to allocate New Memory to elem.
  } 
```

它在这里给出错误。任何帮助。另外，如果有任何其他方法可以解决此问题，请提出建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T15:10:30.480

编写一个带有访问器函数的包装器（例如，矩阵的 operator(row,col)），并在内部使用大小为 rows*cols 的一维数组。

它使事情变得更容易，并将该矩阵的数据保持在一起。这可以为较小的矩阵带来缓存优势。

这是您评论中要求的示例。它的目的非常简单，不使用任何模板。它使用向量作为内部存储。您可以使用 operator(..) 访问矩阵元素，例如

```
Matrix A(3,4);
// fill matrix
// you can access each element in a natural syntax as expected from math
int x = A(2,2);
A(2,2) = 3; 
```

此外，您可能应该使用异常而不是断言来检查索引溢出。

```
// matrix.h
#include <vector>

class Matrix
{
public:
  Matrix(size_t rows, size_t cols);

  int& operator()(size_t row, size_t col);
  const int& operator()(size_t row, size_t col) const;

  int& operator[](size_t index);
  const int& operator[](size_t index) const;

  Matrix get_transposed() const;

  size_t compute_index(size_t row, size_t col) const;

  void print();

private:
  size_t  _rows;
  size_t  _cols;

  std::vector<int>  _data;

}; // class Matrix

// matrix.cpp 
#include "matrix.h"
#include <iostream>
#include <cassert>

Matrix::Matrix(size_t rows, size_t cols)
  : _rows(rows)
  , _cols(cols)
  , _data(rows*cols, 0)
{
}

int& Matrix::operator()(size_t row, size_t col)
{
  const size_t index = compute_index(row, col);
  assert(index < _data.size());
  return _data[index];
}

const int& Matrix::operator()(size_t row, size_t col) const
{
  const size_t index = compute_index(row, col);
  assert(index < _data.size());
  return _data[index];
}

int& Matrix::operator[](size_t index)
{
  return _data[index];
}

const int& Matrix::operator[](size_t index) const
{
  return _data[index];
}

size_t
Matrix::compute_index(size_t row, size_t col) const
{
  // here you should check that: 
  // row < rows
  // col < cols
  // and throw an exception if it's not
  assert(row<_rows);
  assert(col<_cols);

  return row * _cols + col;
}

Matrix
Matrix::get_transposed() const
{
  Matrix t(_cols,_rows); 

  for(size_t row = 0; row < _rows; ++row)
    for(size_t col = 0; col < _cols; ++col)
    {
      t(col,row) = (*this)(row,col);
    }
  return t;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T15:12:53.903

在您的第二个代码示例中，您覆盖了数组限制。`arr`是长元素，从到`row`计数。在 for 循环中，您的索引从到相当于数组之外的一个元素。正确的代码将代替`0``row - 1``i``col``c``row``<``<=`

```
for (int i=col; i < c; i++){
    arr[i] = new int[col](); // trying to allocate New Memory to elem.
} 
```

除此之外，我建议您查看[Wikipedia: Transpose](http://en.wikipedia.org/wiki/Transpose)，因为在第二种情况下，您可以使用第一个代码示例，只切换 row 和 col 。

# c++ - 使用 C++ 缓冲区创建 PhotoImage：Python 3.3、Python.Boost 和 Tkinter

> ID：13647805
> 
> 赞同：2
> 
> 时间：2012-11-30T15:07:11.983
> 
> 标签：c++, python, tkinter, boost-python

我在 python 3.3 上使用 Tkinter 和 python.boost。

我想创建一个在中心显示图像的简单 gui。图像使用双精度值存储在 C++ 类中。为了使用 tkinter 显示图像，我必须创建一个**PhotoImage**对象。

我读过可以使用**Image.fromstring(mode, size, data, decoder, parameters)**方法创建一个 PhotoImage 对象。我的想法是：如果我创建一个将缓冲区转换为 std::string 的函数，我将能够创建一个 PhotoImage 对象。

我的 C++ 类是：

```
class DoubleImage
{
    double* m_dBuffer; // Values from 0 to 1

public:
    DoubleImage(const char* fileName, const int width, const int height);

    /* Class Functions  */

    std::string toString( void ) {
        double *pSrc  = m_dBuffer;
        int size = getWidth() * getHeight() * getChannels();

        char* buffer = new char[size];
        char* pbuffer = buffer;

        for ( int i = 0; i < size; ++i, ++pSrc, ++pbuffer ) {
            *pbuffer = ((char) (*pSrc * 255.0));
        }

        std::string ret(buffer);

        delete[] buffer;

        return ret;
    }
}; 
```

而python boost代码是：

```
using namespace boost::python;

BOOST_PYTHON_MODULE(ImageModule)
{

    class_<DoubleImage>("DoubleImage", init<const char*, const int, const int>()) 
        .add_property("width", &DoubleImage::getWidth)
        .add_property("height", &DoubleImage::getHeight)
        .add_property("channels", &DoubleImage::getChannels)
        // Some functions ...
        .def("toString", &DoubleImage::toString)
    ; 
} 
```

但是当我在 python 中运行 toString 时，会出现以下错误：

```
>>> from ImageModule import *
>>> img = DoubleImage('001.png', 300, 200)
>>> buffer = img.toString()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
UnicodeDecodeError: 'utf-8' codec can't decode byte 0x86 in position 155: invalid start byte
>>> 
```

我有两个问题，首先我错过了什么？第二，一旦我解决了这个错误，我必须使用哪些参数来创建 PhotoImage 对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:49:08.160

终于在痛苦中找到了解决方案：P

首先必须像这样更改函数*toString ：*

```
std::string DoubleImage::toString( void ) {
    ECV_CHECK_ERROR ( m_eType == IT_UKNOWN, "The image is not initialized!" );

    double *pSrc  = (double *) m_cvImage.data;
    long size = getWidth() * getHeight() * getChannels();

    std::string ret(size, ' ');

    for ( long i = 0; i < size; ++i, ++pSrc ) {
         ret[i] = ((char) (*pSrc * 255.0));
    }

    return ret;
} 
```

否则，生成的 std::string 不会有总长度（因为构造函数搜索第一个 '\0'）。另外奇怪的错误“ **UnicodeDecodeError** ”，仅在使用python 3.3时出现。通过使用 python 2.7 解决了这个问题。因此，我建议使用 python 2.7 进行图像处理。

然后我安装了[PIL 模块](http://www.pythonware.com/products/pil/index.htm)（也只在 python 2.7 上可用）。然后在 python 中，我使用以下代码创建 PhotoImage 对象：

```
>>> from ImageModule import *
>>> from PIL import image
>>> from ImageTk import PhotoImage
>>> img = DoubleImage('001.png', 300, 200)
>>> buffer = img.toString()
>>> img_pil = Image.fromstring('RGB', [300, 200], buffer, 'raw', 'BGR', 300 * 3, 0)
>>> tk_image = PhotoImage(img_pil) 
```

其中 300 是图像，200 是图像高度，RGB 是输出格式，BGR 是输入格式（IplImage），3 是通道（3 * 300 图像步长）。然后一切都像魅力一样工作:)

# java - Servlet 混合标题和内容并在输出中写入两次相同？

> ID：13647807
> 
> 赞同：8
> 
> 时间：2012-11-30T15:07:22.563
> 
> 标签：java, servlets, synchronization

我已经实现了行为不稳定的 servlet，有时它会在内容中混合标题并两次写入相同的内容。

有时它返回的文件包含由如下内容混合的响应标头：

```
Server: Apache-Coyote/1.1
: W/"43-1353687036000"
DatCCoonntenntt--DDiissppoosittiioonn: : atatatacehnmte;n tf;i lfenlaemnea=m20=12201112211127325421_4W1_Wirnkgi_nSgc_Seern.xnlsx
sx
Content-Typ-eT: ype: applaipcatciaoti/on/toctestt-rstare
am
ConCtoententy-pTeype: appalicatcion/oon/octet-setarm
m
CCoonntent-Lnegtht h: 4199

Date: te: FriF,r i2,3  2No vNo2v0 120162: 215:25 :G4M2T 
....
File content bytes ...

And again same header and content 
```

**更新** **这种情况发生在 Tomcat7* *

**我也在 Tomcat6 和 Jetty 上进行了测试，在这两种情况下都没有向响应内容注入 HTTP-Header，但是 HTTP-Header 错误并返回错误的文件名，文件内容是正确的文件。我注意到当返回传输编码被分块时，会发生来自 servlet 的错误返回。**

当我删除标题内容和字节的第二部分时，它是有效文件。有没有可能是同步问题？

**更新** 这是 servlet 的完整来源：

```
public class ExcelDownloadServlet extends HttpServlet
{
    private static final long serialVersionUID = 1L;
    private static final Logger LOG = Logger
            .getLogger (ExcelDownloadServlet.class);

    @Override
    protected void doGet (HttpServletRequest request,
            HttpServletResponse response) throws ServletException, IOException
    {
        try
        {
            TransactionId transactionId = getTransactionId (request);
            String fileName =
                    request.getParameter (GlobalConstants.EXCEL_FILE);
            ExcelDownloadType downloadType =
                    ExcelDownloadType
                            .valueOf (request
                                    .getParameter (GlobalConstants.EXCEL_DOWNLOAD_TYPE));
            ActionContextFactory actionContextFactory =
                    ApplicationContext.getContext ()
                            .getActionContextFactory ();
            //suppress warning. HttpServletRequest.getLocales does not support generics
            @SuppressWarnings("unchecked")
            ActionContext actionContext =
                    actionContextFactory.create (request.getSession ()
                            .getId (), Collections.<Locale> list (request
                            .getLocales ()));
            GetExcelDataResponse dataResponse =
                    new GetExcelData (transactionId, fileName, downloadType)
                            .execute (actionContext);
            writeToResponse (response, dataResponse.getFileName (),
                    dataResponse.getData ());
        }
        catch (InvalidSessionException e)
        {
            LOG.error ("Invalid session in Excel download", e);
            throw new ServletException (e);
        }
        catch (ActionException e)
        {
            LOG.error ("Could not download into excel.", e);
            throw new ServletException (e);
        }
    }

    protected TransactionId getTransactionId (HttpServletRequest request)
    {
        return RequestParameterDeserializer.<TransactionId> deserialize (
                request, GlobalConstants.TRANSACTION_ID);
    }

    protected void writeToResponse (HttpServletResponse response,
            String rawFileName, byte[] data) throws IOException
    {
        ServletOutputStream sout = null;
        try
        {            
            response.setContentType ("application/octet-stream");
            response.setContentLength (data.length);
            // removing blanks from the file name, since FF cuts file names
            // otherwise.
            String fileNameWithTime = rawFileName.replaceAll (" ", "_");
            response.setHeader ("Content-Disposition", "attachment; filename="
                    + fileNameWithTime);
            sout = response.getOutputStream ();
            sout.write (data, 0, data.length);
        }
        finally
        {
            if (sout != null)
            {
                sout.close ();
            }
        }
    } 
```

**更新** **调用来自 GWT 应用程序，在生成带有所需参数的 servlet 的 URL 并在 IFrame 中设置，然后 servlet 调用和文件正在下载。有什么建议吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T20:23:11.577

很久以前我有一个类似的问题。事实证明，关闭 ServletOutputStream 会触发请求流上的意外行为。

Servlet 不应该关闭容器提供的 OutputStream。另一个问题可能是手动设置内容长度，这是容器产生正确值的责任。

总而言之，尝试删除`out.close()`和`response.setContentLength()`

# c# - Resharper 建议：改为检查引用相等性

> ID：13647808
> 
> 赞同：23
> 
> 时间：2012-11-30T15:07:24.090
> 
> 标签：c#, resharper, equality

我不明白为什么 Resharper 建议我在这段代码中“检查引用相等性”：

```
if ( typeToTranslate.Equals( typeof(string) ) )
{
    //do something
} 
```

为什么这应该更好：

```
typeToTranslate == typeof(string) 
```

- - - - - - 编辑 - - - - - -

这是方法存根：

```
protected IType TranslateType(Type typeToTranslate)
{
    if (typeToTranslate == null) throw new ArgumentNullException("typeToTranslate");

    //do some stuff

    if (typeToTranslate.Equals(typeof(string)))
    {
        //do some stuff
    }
    //return some stuff
 } 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-30T15:28:57.970

`Object.Equals`是一种比引用相等更一般的相等： if `x == y`then `x.Equals(y)`，但反过来不一定是正确的。但是，如[MSDN Library](http://msdn.microsoft.com/en-us/library/42892f65.aspx)中所述：

> 表示类型的**Type**对象是唯一的；也就是说，当且仅当它们表示相同的类型时，两个**Type**对象引用引用相同的对象。这允许使用引用相等来比较**Type对象。**

因为 ReSharper 将“检查引用相等性”检查选项归类在“通用实践和代码改进”下，所以我猜 ReSharper 让您知道使用引用相等性来比较类型*就足够了；*您不需要该`Equals`方法所隐含的更一般的相等性（即使对于类型，两者是等价的）。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-11-30T15:18:44.853

从[System.Type 文档](http://msdn.microsoft.com/en-us/library/system.type.aspx)：

> 表示类型的 Type 对象是唯一的；也就是说，当且仅当它们表示相同的类型时，两个 Type 对象引用引用相同的对象。这允许使用引用相等来比较 Type 对象。

这意味着`"string".GetType()`和`typeof(string)`返回*相同的引用*。AppDomain 中的 System.String 只有一个 System.Type 对象实例。

至于为什么 ReSharper 说使用`==`而不是“更好” `.Equals()`？我的猜测是因为`==`效率更高，并且不会冒险抛出`NullReferenceException`if`typeToTranslate`为 null （在您的情况下）。

# c - 在参数列表中声明的“结构”

> ID：13647814
> 
> 赞同：-3
> 
> 时间：2012-11-30T15:07:49.810
> 
> 标签：c, compiler-construction, error-handling, struct, header

这是我的头文件，它包含在另一个文件中但尚未使用：

```
#define ksm_read 0X01
#define ksm_rdwr 0x00

struct ksm_info_t {
    uint ksmsz; //size of shared mem
    int cpid;   //pid of the creator
    int mpid;   //pid of the last modifier
    uint attached_nr; //number of attached processes
    uint atime; //last attached time
    uint dtime; //last deattach time
    uint total_shrg_nr; //total number of existing shared regions
    uint total_shpg_nr; //total number of existing shared pages
};

int ksmget(char* name, uint size);
int ksmattach(int hd, int flag);
int ksmdetach(int hd);
int ksminfo(int hd, struct ksminfo_t* info);
int ksmdelete(int hd); 
```

以下是我得到的错误：

```
> ksm.h:18: error: ‘struct ksminfo_t’ declared inside parameter list
> ksm.h:18: error: its scope is only this definition or declaration, which is prob 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T15:10:25.227

错字，应该是`struct ksm_info_t`，不是`struct ksminfo_t`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T15:11:53.200

您缺少下划线：

```
int ksminfo(int hd, struct ksminfo_t* info); 
```

应该

```
int ksminfo(int hd, struct ksm_info_t* info); 
```

# r - 在R中的数据框中删除几个因子级别

> ID：13647815
> 
> 赞同：1
> 
> 时间：2012-11-30T15:07:54.030
> 
> 标签：r, dataframe, subset

我需要从 R 中的数据框中删除几个因子级别。使用此[问题](https://stackoverflow.com/questions/1195826/dropping-factor-levels-in-a-subsetted-data-frame-in-r)中提供的解决方案，我可以摆脱其中一个，但是......是否可以一次删除多个因子级别？

我想出了这段代码，根据需要删除的因素多次设置子集......

```
dino <- read.csv('/home/maxim/onset.csv', header=TRUE)
dino <- subset(dino, onset != "QT")
dino <- subset(dino, onset != "")
table(droplevels(dino)$onset) 
```

在我的情况下它工作正常，但我想知道是否有人知道更直接的方法。（顺便说一句，我对R不是很精通......）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T19:23:17.490

@Matthew Plourde 提供的解决方案：

```
dino[! dino$onset %in% c('QT', ''), ] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T19:22:01.830

@Joris Meys 提供的解决方案：

```
subset(dino, ! onset %in% c("QT","")) 
```

# python - 如何判断玩家是否包围了敌人的细胞

> ID：13647817
> 
> 赞同：-5
> 
> 时间：2012-11-30T15:07:59.483
> 
> 标签：python, algorithm, matrix

我正在制作简单的游戏。（一个矩阵，其中玩家可以获取单元格（x，y），一个单元格上只有一个玩家，并且他们在之前的玩家之后获得新的单元格）。每个玩家都有独特的颜色。我试图找出一个玩家是否包围了其他用户的单元格。在这种情况下，所有单元格都会改变颜色。是否有任何已知的算法可以解决这个问题，只在用户下一个新动作时检查？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T15:23:01.100

我建议您看一下[洪水填充算法](http://en.wikipedia.org/wiki/Flood_fill)，这些是从起点搜索并尝试填充板的简单算法。您只需检查填充算法是否可以到达棋盘的末端。

# java - 电子邮件列表的正则表达式模式

> ID：13647818
> 
> 赞同：0
> 
> 时间：2012-11-30T15:08:07.493
> 
> 标签：java, regex

我需要有效的电子邮件正则表达式，以 or 分隔`" "`并以`@a.com`or结尾`b.com`

例如：

有效电子邮件`string`：`"email1@a.com email2@b.com email3@a.com"`

无效的电子邮件`string`：`"email1@a.com email2@b.com email3@c.com"`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T15:14:31.097

我不一定认为正则表达式在这里是可扩展和可维护的解决方案。我宁愿：

1.  在空白处拆分列表（可能在 .com/.org 等之前的空白处）
2.  提取域名后-@
3.  将此与白名单（或黑名单）进行比较

我非常喜欢正则表达式，但我并不总是认为它们是解决方案。有关此问题的讨论，请参见[此处，并注意以下内容！](http://www.codinghorror.com/blog/2008/06/regular-expressions-now-you-have-two-problems.html)

> 有些人在遇到问题时会想“我知道，我会使用正则表达式”。现在他们有两个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T15:13:36.417

你可以试试这个表达式：

```
^(( |^)[^ @]+@[ab]\.com)+$
//  ^    ^   ^  ^    ^
//  |    |   |  |    +- The mandatory .com   
//  |    |   |  +------ Either a or b
//  |    |   +--------- An @ sign
//  |    +------------- Anything but space or @ repeated at least once
//  +----------------------- Preceded by a space or the beginning of line 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T15:13:35.003

`(email[1-3]\@[ab].com )*email[1-3]\@[ab].com`?

（将 [1-3] 和 [ab] 替换为真正适合您的内容）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T15:13:38.413

试试这个：^(. *@(a|b).com(|\s)* $

[永久链接](http://regexpal.com/?flags=g&regex=%5E%28.%2a@%28a%7Cb%29.com%28%7C%5Cs%29%29%2a%24&input=asdsadsa@a.com%20asdsadsa@b.com%20asdsadsa@b.com%0A)- 尝试输入一个无效的字符串，如“c.com”，看看它是否也有效

[Regexpal](http://regexpal.com)是一个很好的简单工具，可以开始为您尝试解决的任何问题制作正则表达式！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-30T15:14:32.297

```
[A-Za-z0-9_.-]+@[ab]\.com( [A-Za-z0-9_.-]+@[ab]\.com)* 
```

`[A-Za-z0-9_.-]+`如果您想限制更多，您可以更改该部分。

# android - 在 xml 的单个 TextView 中添加两个 R.id

> ID：13647820
> 
> 赞同：3
> 
> 时间：2012-11-30T15:08:10.037
> 
> 标签：android, xml

我有两个`android:id`。

例如：[ `R.id.custom_font`] 和 [ `R.id.product_name`]

在 .java 文件中

```
 TextView tv = (TextView)findViewById(R.id.custom_font);
    Typeface cFont = Typeface.createFromAsset(getAssets(), "fonts/jcc.ttf");
    tv.setTypeface(cFont);

// Adding items to listview
    adapter = new ArrayAdapter<String>(this, R.layout.list_item, R.id.product_name,  products);
    lv.setAdapter(adapter); 
```

当我将它们放在一个文本视图中时，它会显示一条错误消息 [属性“android:id”已为元素“TextView”指定]

在 .xml 文件中

```
 <TextView

        android:textColor="?android:textColorPrimary"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:id="@+id/custom_font"
        android:id="@+id/product_name" //Attribute "android:id" was already specified for element "TextView"
        android:textSize="15sp" /> 
```

如何在单个文本视图中传递两个 android:id？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T15:10:36.117

不，这是不可能的。您只能将一个`android:id`与一个组件关联。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T15:14:56.977

我没有看到一个视图有两个 ID 的意义......

只需`R.id.custom_font`在以下行中再次使用：

```
 adapter = new ArrayAdapter<String>(this, R.layout.list_item, R.id.custom_font,  products); 
```

# maven - 如何解决 Maven 中的“无法收集依赖项”错误？

> ID：13647834
> 
> 赞同：4
> 
> 时间：2012-11-30T15:09:00.797
> 
> 标签：maven, maven-3

我在我的项目中使用 Maven 3。它已经搁置了一段时间，但我们最近又开始研究它。

当我尝试构建它时，我收到以下错误：

> [错误] 无法在项目 tahrir 上执行目标：
> 无法解析项目 tahrirproject:tahrir:jar:0.0.1-SNAPSHOT 的依赖项：
> 无法收集 [com.google.code.gson:gson:jar:2.2.2（编译）、org.apache.commons:commons-math3:jar:3.0（编译）、args4j:args4j:jar:2.0 的依赖项。 16 (编译), org.testng:testng:jar:5.14 (测试), bouncycastle:bcprov-jdk16:jar:140 (编译), com.google.guava:guava:jar:13.0 (编译), ch.qos。 logback:logback-classic:jar:0.9.28 (编译), com.miglayout:miglayout:jar:3.7.4 (编译), org.datanucleus:datanucleus-db4o:jar:3.0.0-m3 (编译), joda -time:joda-time:jar:1.6.2 (编译), com.google.inject:guice:jar:3.0 (编译), com.seaglasslookandfeel:seaglasslookandfeel:jar:0.2 (编译), xom:xom:jar: 1.2.5 (编译), commons-codec:commons-codec:jar:1.6 (编译), org.apache.commons:commons-lang3:jar:3.1 (编译)]:
> 无法读取 db4o:db4o:jar:7.12.126.14142-all-java5 的工件描述符：无法从/向 local.repository 传输工件 db4o:db4o:pom:7.12.126.14142-all-java5（文件：../. ./local.repository/trunk):
> 没有连接器可用于使用可用工厂 WagonRepositoryConnectorFactory -> [帮助 1] 访问 legacy 类型的存储库 local.repository (file:../../local.repository/trunk)

这是我的 pom.xml 文件：[https ://github.com/sanity/tahrir/blob/master/pom.xml](https://github.com/sanity/tahrir/blob/master/pom.xml)

我已经看到这可能与尝试从 Maven 3 访问 Maven 1 或 2 存储库有关。如果这是我宁愿只使用 Maven 3 存储库的问题，但目前我指定的所有依赖项都应该是在默认的 Maven 存储库中，所以我不确定问题是什么。

任何有关如何正确“修复”我们的 pom.xml 文件的具体建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-08T09:13:40.400

我们遇到了类似的问题，并通过添加 wagon 扩展来解决它：

```
<build>
    <extensions>
        <extension>
            <groupId>org.apache.maven.wagon</groupId>
            <artifactId>wagon-ssh</artifactId>
            <version>1.0</version>
        </extension>
    </extensions>
    ....
</build> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T13:08:17.600

检查包含工件但在不同坐标下的存储库后，这意味着您必须像这样更改给定的 pom：

```
<repositories>
    <repository>
      <id>source.db4o</id>
      <url>http://source.db4o.com/maven</url>
    </repository>
  </repositories>
  ...
  <dependencies>
    <dependency>
      <groupId>com.db4o</groupId>
      <artifactId>db4o-full-java5</artifactId>
      <version>8.1-SNAPSHOT</version>
    </dependency>
    ...
  </dependencies>
</project> 
```

如果您查看存储库，您将看到问题。但我建议不要使用 SNAPSHOT 更好地使用文件的版本。

# xpath - XPath 1.0 属性轴：没有机会？

> ID：13647837
> 
> 赞同：3
> 
> 时间：2012-11-30T15:09:14.267
> 
> 标签：xpath, attributes, axes

初学者的问题在这里：

给定以下 XML 摘录：

```
<root>
  <element>
    <child1>a</child1><child2>b</child2><child3>c</child3>
  </element>
</root> 
```

当我在`child3`上下文中时，我可以使用它`preceding-sibling::*`来获取`child2`节点。好的。

在以下 XML 摘录中：

```
<root>
  <element child1="a" child2="b" child3="c">
  </element>
</root> 
```

当我在`child3`上下文中时，XPath 1.0 中没有轴来获取`child2`属性节点是否正确？我想我需要这样的东西`preceding-sibling-attribute::`是不可用的。

作为一个附带问题，这对 XPath 2 是否可行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T15:57:55.270

确实没有*单一*的轴可以从一个属性到另一个属性，但是您当然可以通过链接轴来实现。

在 XPath 使用的数据模型中，属性不被视为兄弟，因为[它们不被视为父元素的“子元素” 。](http://www.w3.org/TR/xpath/#attribute-nodes)`preceding-sibling::`这是行不通的原因之一。这也意味着属性名称（例如`child1`等`child2`）具有误导性，因为属性不是“子”。

另一个`preceding-sibling::`不起作用的原因是给定元素[的属性顺序是未定义的（依赖于实现）。](http://www.w3.org/TR/xpath/#data-model)属性必须在给定的序列化中以某种顺序列出（例如在文件中），但该文件可能会被解析并以不同的顺序再次输出属性，并且它仍将被视为来自 XML 信息模型点的相同文档观点。因此，XML 中不存在“previous”或“preceding”属性。

要从`child2`属性的上下文中获取`child3`属性的值，您可以使用其中之一，具体取决于您如何知道所需的属性...

```
../@child2 
```

`child2`“父元素命名的属性”

```
../@*[name() != name(current())] 
```

“父元素的其他属性（不是这个）”

你甚至可以尝试

```
../@*[2] 
```

但结果通常无法预测，因为属性的顺序是不确定的。

如果属性名称包括您的示例中的索引组件 (1, 2, 3)，您可以将其中的数字替换`name(current())`为较小的数字。

要回答您的附带问题，这取决于您的要求是如何定义的。如果要求是“选择前一个属性”，那么不，XPath 2 中也没有定义该概念。

# ruby-on-rails - Ruby on Rails 中的脚手架和 CSS

> ID：13647841
> 
> 赞同：4
> 
> 时间：2012-11-30T15:09:27.903
> 
> 标签：ruby-on-rails, ruby, scaffolding

我做了一篇博文，里面有两个条目（`title`，`content`），就像这样

```
rails generate scaffold Post title:string content:text 
```

这有效，但是

1.  如果我以后想添加一个新的输入区域怎么办？前任。`author`场什么的。我在哪里向我的 Post 脚手架添加更多字段？

2.  `style.css`我在我的公共目录中制作了一个样式表。它只是坐在那里。例如，如何将其链接到我的文件`app/views/post/new.html.erb`？

3.  我在哪里可以学习为特定领域搭建脚手架的所有调整？前任。我希望`title`输入字段不包含特殊字符（例如`@#$%`）或不超过一定长度。

我正在使用 windows 和 rails 3.2.8。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T15:27:55.540

三合一问题:)

### 第一个答案

正如其他人所说，您需要修改表以具有新字段，这可以通过[**迁移**](http://guides.rubyonrails.org/migrations.html)轻松完成：

```
rails generate migration AddAuthorToPost author:string 
```

但是您还需要修改您的视图，因为它不会包含新字段。相应的视图在`app/views/posts`（查找`edit.html.erb`和`new.html.erb`）中。

当然，您需要在数据库上运行迁移：

```
rake db:migrate 
```

### 第二个答案

您可以将样式表添加到您的视图中，`app/views/posts`但我建议您为您的应用程序使用[**布局**](http://guides.rubyonrails.org/layouts_and_rendering.html)，布局位于`app/views/layouts`. 您可以简单地在您的布局目录中创建一个`application.html.erb`并将您的 CSS 包含在其中。

```
<html>
  <head>
    <%= stylesheet_link_tag "custom" %>
  </head>
  <body>
    <%= yield %>
  </body>
</html> 
```

yield 块将包含视图的实际输出，因此您应该从现有视图中删除这些部分。

### 第三个答案

如果您想控制某个字段接受的字符，您可以在模型的[**验证**](http://guides.rubyonrails.org/active_record_validations_callbacks.html)中进行。

```
validates :title,
  :format => { :with => /\A[a-zA-Z]+\z/, :message => "Only letters allowed" },
  :length => { :maximum => 20 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T15:15:15.293

向现有表添加列的最安全方法是创建一个新迁移：

```
rails g migration add_public_and_private_to_document public:string private:string 
```

如果您使用`add_[column_names]_to_[model]`命名约定，Rails 将计算出适当的表并创建您想要的迁移。

在这里阅读更多信息： http: [//guides.rubyonrails.org/migrations.html](http://guides.rubyonrails.org/migrations.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T15:15:00.020

如果要添加新字段，则必须进行迁移，并将该字段添加到 _form.html.erb

```
rails generate migration add_author_to_posts author:string 
```

您必须在 app/assets/stylesheets 中创建样式

阅读： http: [//guides.rubyonrails.org/getting_started.html](http://guides.rubyonrails.org/getting_started.html)

对于迁移： http: [//guides.rubyonrails.org/migrations.html](http://guides.rubyonrails.org/migrations.html)

另外，我推荐你：[http ://railscasts.com/](http://railscasts.com/)

欢迎登机！

# c# - 急切加载一些导航属性

> ID：13647850
> 
> 赞同：2
> 
> 时间：2012-11-30T15:09:56.853
> 
> 标签：c#, .net, entity-framework

我有一个 MSSQL 存储过程，我通过 EF4 通过上下文执行它。这将产生一个`IEnumerable<T>`，它返回并反序列化来自 SP 的所有结果。

问题是，我想对一些导航属性进行预加载。

打电话`.AsQueryable().Include("Navigation_Property_Path").ToArray()`也无济于事。

有没有办法急切加载上下文中已经存在的实体的导航属性？

我真的不想更改我的 SP，返回我的实体的 ID（基本上是 int 数组），然后使用 WHERE 的 ID 在 EF.Context 上执行选择，然后使用 Include。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T15:16:43.310

不，因为 SP 调用在 SQL 级别是不可组合的。EF 不支持急切加载。

也许您可以从 SP 切换到内联 TVF？

# python - 如何使用 Python 从 Google Translate API 访问 JSON 翻译

> ID：13647852
> 
> 赞同：2
> 
> 时间：2012-11-30T15:10:17.770
> 
> 标签：python, json, google-api, google-translate

我正在尝试学习塞尔维亚语 atm，并为自己获取了一个包含最常用单词的 csv 文件。
我现在想做的是让我的脚本通过 API 将每个单词放入谷歌翻译，并将翻译保存到同一个文件中。
由于我完全是 Python 和 JSON 初学者，我对如何使用从 API 获得的 JSON 感到非常困惑。

我如何获得翻译？

```
from sys import argv
from apiclient.discovery import build
import csv
import json

script, filename = argv
serbian_words = []

# Open a CSV file with the serbian words in one column (one per row)
with open(filename, 'rb') as csvfile:

    serbianreader = csv.reader(csvfile)

    for row in serbianreader:

        # Put all words in one single list
        serbian_words.extend(row)

        # send that list to google item by item to have it translated
        def main():

            service = build('translate', 'v2',
            developerKey='xxx')

            for word in serbian_words:

                translation = service.translations().list(
                    source='sr',
                    target='de',
                    q = word
                    ).execute()

                    print translation # Until here everything works totally fine.

if __name__ == '__main__':
  main() 
```

终端为我打印的内容看起来像这样`{u'translations': [{u'translatedText': u'allein'}]}`，其中“allein”是塞尔维亚语的德语翻译。

我怎样才能到达“allein”？我试图通过尝试实现Python附带的json编码器和解码器来解决这个问题，但我无法弄清楚。

I'd love any help on this and would be very grateful.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T15:11:40.717

You can use item access to get to the innermost string:

```
translation['translations'][0]['translatedText'] 
```

or you could loop over all the translations listed (it's a list):

```
for trans in translation['translations']:
    print trans['translatedText'] 
```

as Google's translation service can give more than one translation for a given text.

# python - Scapy 等待多个数据包

> ID：13647853
> 
> 赞同：2
> 
> 时间：2012-11-30T15:10:20.983
> 
> 标签：python, http, get, scapy, qos

为了执行 HTTP GET，我需要发送一个数据包（GET / HTTP/1.0\n\n）并等待 3 个数据包：

我的 GET 的 ACK

GET 答案：HTTP/1.0 200 OK

和传输的 FIN ACK

我找到了两种方法：

=> 将 sr() 与多选项一起使用

=> 在发送我的 GET 请求后使用嗅探

*   对于 sr() 函数，问题是停止嗅探，唯一的选择是设置超时，但我的脚本将测试许多不同的站点，因此时间的答案有很多不同，可能很难选择静态超时值，其中我敢肯定，任何时候都没有网站超过它。

*   对于嗅探，没有同样的问题，因为我可以设置“计数”参数只接收 3 个数据包。但是很难使过滤器足够好以确保记录的 3 个数据包是我想要的 3 个（并且没有 ARP、DNS 或其他任何东西）。但主要问题有时是第一个应答数据包出现在“嗅探”启动之前（在 send(GET_PACKET) 和 answers=sniff(...) 之间）。在这种情况下，我丢失了一些信息，我的所有后处理都被破坏了。

完美的方法是使用带有“count=3”选项的 sr() 函数来仅获取 3 个数据包，但 sr() 不存在该选项。

有人有想法吗？

非常感谢

对不起我的语言，我是法国人

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-11-12T14:17:00.227

使用 Sniff 并将过滤器设置为 TCP 端口 80，对于延迟问题，您可以使用线程，首先在线程中启动嗅探器，然后发送数据包：

```
def sniffer():
    packets=sniff(filter="tcp port 80" , count=5)
    wrcap("test.cap" , packets) #save packets in .cap file
t = threading.Thread(target=sniffer)
t.start() 
```

但是您可以使用解释[HERE](https://stackoverflow.com/a/4751020/10629412)的更好方法。手动发送您的数据包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T12:00:23.377

这更像是一个提示而不是一个答案，但问题可能是您想要检查传输层数据包以查找应用程序层请求。您可以通过发送、等待和回答然后发送来将您的下行拆分`HTTP GET`到传输层。这是一个描述您可能想要的[链接。](http://www.thice.nl/creating-ack-get-packets-with-scapy/)`SYN``ACK``GET`

# android - RSS Feed Android 应用程序过期了？

> ID：13647855
> 
> 赞同：0
> 
> 时间：2012-11-30T15:10:26.287
> 
> 标签：android, rss, feed

我看过很多 RSS 提要 Android 应用示例。但是我试图返回的提要类型不需要进入列表视图。它为网站提供了一个活动代码，该代码通常会在一小时后过期，有时会在两小时后过期。

这是提要的示例。

> 代码 – 2012 年 11 月 29 日星期四 2012 年 11 月 29 日下午 5:23 代码：AlmostDecember 有效：网站位置：首页 到期时间：太平洋夏令时间下午 3:30 [1826103687] 价值：6 分

在网站上，括号中的数字显示为倒计时，并在时间到时显示已过期。通常最多只有 1 个代码。但偶尔有 2 个或 3 个。我需要该应用程序仅显示活动代码，而不是已过期的代码。而且我仍然希望那里有那个倒数计时器。有人明白我的意思吗？我在这里查看了大多数 rss 提要帖子，但没有一个能够帮助我。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T17:33:55.577

使用此 coundDownTimer 使视图中的提要数据过期

```
 new CountDownTimer(30000, 1000) {

     public void onTick(long millisUntilFinished) {
         mTextField.setText("seconds remaining: " + millisUntilFinished / 1000);
     }

     public void onFinish() {
         mTextField.setText("done!");
     }
  }.start(); 
```

# asp.net-mvc-4 - Web API PUT 示例

> ID：13647862
> 
> 赞同：1
> 
> 时间：2012-11-30T15:10:51.997
> 
> 标签：asp.net-mvc-4, asp.net-web-api, put

有人可以指出或向我展示一个适当的 PUT 示例吗？

我所遇到的一切都是不一致的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T19:43:15.610

认为您已经在控制器中....

```
[HttpPut]
public HttpResponseMessage MyPutAction(myModelType MyModel) 
{
    ....
    // here is some code that will update the record and return it as part of HttpResponseMessage 
    .... 
```

或者

```
public HttpResponseMessage Put(myModelType MyModel) .... 
```

在第二个示例中，MVC 框架知道这是基于方法名称的 [Put]。所以你不需要用 [HttpPut] 来装饰它

或者

```
public HttpResponseMessage PutMyModel(myModelType MyModel) .... 
```

听起来很愚蠢，但就像上面的一样。同样，MVC 框架根据方法名称知道这是 [Put]，因为它以“Put”开头。

# jquery - 为什么我的 .animate() 在 ajax 之后不起作用？

> ID：13647866
> 
> 赞同：0
> 
> 时间：2012-11-30T15:11:08.957
> 
> 标签：jquery, jquery-animate

各位早上好。

首先，对不起我的英语。这是我遇到的问题。我尝试在 div 中为 ul 列表设置动画。但是在ajax调用之后它停止工作。我尝试使用`.live()`它已经被弃用的方法。我真的不知道如何解决这个问题。这是我正在使用的代码：

```
function comp_disposicion_contenidos (disposicion, area, seccion) {

var newDisposicion = eval(disposicion),
    newArea = area,
    newSeccion = seccion,
    allDispContent;

var appendDisp = function() {

    jQuery('.seccion').append("<div id='comp_disposicion_contenidos_vacio'></div>");

    var html = '<ul>';
    jQuery.each(newDisposicion, function(k,v){
        html += '<li class="" title="'+v+'">'+v+'%</li>';
    });
    html += '</ul>';

    jQuery('.jumichica_agregado').each(function() {

        jQuery(this).append("<div class='tabMenu'>"+html+"</div>");

    });
}

this.set_DispContentExists = function(allDispContent_) {
    //alert(allDispContent_);
    allDispContent = (allDispContent_);
    //alert(allDispContent);
}

var asignarTamano = function () {

}

this.setDispContent = function(id_agregado, valor){
    //this is the ajax call
    (new paginax()).cargar("libs/ejecutor.php",
        "comp_disposicion_contenidos_vacio", 
        "objeto=Comp_Disposicion_Contenidos&parametros=" +
        "&metodo=set_DispContent&parametros_metodo=" + id_agregado + ',' + valor +
        "&area=" + newArea +"&seccion=" + newSeccion, "POST");
}

appendDisp();
}

jQuery(document).ready(function() {

/*jQuery('.jumichica_agregado').hover(function() {
    console.log('entro');
        jQuery(this).addClass('jumichica_agregado_hover');
        jQuery(this).find("div.tabMenu").stop().animate({opacity: "show", top: "-35"}, "slow");
    }, function() {
    console.log('salio');
        jQuery(this).removeClass('jumichica_agregado_hover');
        jQuery(this).find("div.tabMenu").stop().animate({opacity: "hide", top: "-15"}, "fast")
    }
);*/

jQuery('.jumichica_agregado').on({
    mouseenter: function(e) {
        e.preventDefault();
        console.log('entro');
        jQuery(this).addClass('jumichica_agregado_hover');
        jQuery(this).find("div.tabMenu").stop().animate({opacity: "show", top: "-35"}, "slow");
    },
    mouseleave: function() {
        console.log('salio');
        jQuery(this).removeClass('jumichica_agregado_hover');
        jQuery(this).find("div.tabMenu").stop().animate({opacity: "hide", top: "-15"}, "fast")
    }
});

jQuery('.tabMenu').tabs();

jQuery('.tabMenu ul li').click(function() {
    var parentWidth = jQuery(this).closest('.seccion').width();
    var width_ = jQuery(this).attr("title");
    var percent = parseInt(width_*parentWidth/100);

    var agregado = jQuery(this).closest('.jumichica_agregado');
    agregado.width(percent +'px');

    var id = agregado.attr('id');
    id = id.split('_').pop();

    //manejador_js_comp_disposicion_contenidos. this variable has been declared in another html
    manejador_js_comp_disposicion_contenidos.setDispContent(id, percent);
})

}); 
```

我感谢您的所有帮助。顺便说一句，非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T18:31:51.317

我认为你只需要回调绑定：

```
function bindEvents(within) {
    jQuery('.jumichica_agregado', within).on({
        mouseenter: function(e) {
            e.preventDefault();
            console.log('entro');
            jQuery(this).addClass('jumichica_agregado_hover');
            jQuery(this).find("div.tabMenu").stop().animate({opacity: "show", top: "-35"}, "slow");
        },
        mouseleave: function() {
            console.log('salio');
            jQuery(this).removeClass('jumichica_agregado_hover');
            jQuery(this).find("div.tabMenu").stop().animate({opacity: "hide", top: "-15"}, "fast")
        }
    });
}
bindEvents($(document)); //bind on load 
```

加载成功后，您可以调用：

```
bindEvents(newlyCreatedElements); //bind on load 
```

其中变量newCreatedElements 是使用ajax`$.load()`函数创建的新元素

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T15:31:45.277

您必须在方法中将正在更新的选择器设置为选择器`jQuery.fn.on`：

```
jQuery('.tabMenu').on({mouseenter: ... , mouseleave: ...}, '.jumichica_agregado'); 
```

请参阅参考：带有签名的[jQuery.fn.on](http://api.jquery.com/on/)`.on( events-map [, selector] [, data] )`：。

# java - 第二个 AsyncTask 未执行

> ID：13647869
> 
> 赞同：9
> 
> 时间：2012-11-30T15:11:13.497
> 
> 标签：java, android, multithreading, sockets, android-asynctask

我有 2 个 AsyncTask，一个正在创建套接字连接，另一个正在使用这些套接字传输对象。我的代码是这样的：

```
try {
        connectat = true;
        transmitter = new SocketTransmitter();
        transmitter.execute();
        connector = new socketConnector();
        connector.execute(owner);

        this.open();
    } catch (IOException e) { 
```

然而，被`AsyncTask`调用`socketConnector`者永远不会被创建或执行。我试图更改顺序，但未创建或执行发送器...

那有什么问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-01T07:04:43.400

I hated it when HONEY COMB changed the multiple AsyncTask execution from concurrent to sequential. So every time I execute an AsyncTask, I do something like this.

```
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
    task.executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR);
} else {
    task.execute();
} 
```

But the thread pool size is 5, if you add the sixth task, it will be added in a queue, and will not be executed until one of the 5 thread has finished.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T15:33:13.230

由于我不知道您使用的是哪个 API 级别，我建议您通过[ASYNC TASK](http://developer.android.com/reference/android/os/AsyncTask.html)

根据文档：

> 首次引入时，AsyncTask 在单个后台线程上串行执行。从 DONUT 开始，这被更改为允许多个任务并行运行的线程池。从 HONEYCOMB 开始，任务在单个线程上执行，以避免并行执行导致的常见应用程序错误。
> 
> 如果你真的想要并行执行，你可以调用`executeOnExecutor(java.util.concurrent.Executor, Object[]) with THREAD_POOL_EXECUTOR.`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T13:10:18.833

我已经编写了同时执行 AsyncTask 的类。

一探究竟：

## [Android-AsyncTask-Executor](https://github.com/artem-zinnatullin/Android-AsyncTask-Executor)

在任何 Android 操作系统版本上同时运行 AsyncTask 需要所有工作，最好使用：

```
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
    task.executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR);
} else {
    task.execute();
} 
```

因为 AsyncTask.THREAD_POOL_EXECUTOR 仅在 api >= 11 上可用

在我的课上，你只需要写：

```
AsyncTaskExecutor.executeConcurrently(task, params); 
```

仅此而已。Android 2.x、3.x 和 4.x**上没有错误**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-30T15:15:24.300

您是否尝试过执行`transmitter`或`connector's` `onPostExecute()`反之亦然？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-30T16:08:11.017

就像 Robin Chander 所说，它可能是串行运行的，您可以使用 executeOnExecutor ......但它直到 Android 3.0 才可用。如果你想要完全兼容，你需要转储`AsyncTask`和使用`Runnable`. 如果您需要在 UI 线程上报告结果，请不要忘记使用`Handler`.

# jquery - jquery点击函数返回开始

> ID：13647871
> 
> 赞同：0
> 
> 时间：2012-11-30T15:11:21.610
> 
> 标签：jquery

我在下面有一个简单的函数，它在单击元素时隐藏或显示 DIV。但是，它在一次鼠标单击时运行了两次。我使用 firebug 在几个断点处停止代码，当最后一个函数 (slideToggle) 完成时，它会返回到 click 函数的开头并再重复一次。这意味着要显示的元素仍然隐藏，因为它再次隐藏在 slideToggle 上。

```
$('#showEmailHistory').click(function() {
    $('#emailHistory').siblings().slideUp();
    $('#emailHistory').slideToggle();
    event.stopPropagation();
}); 
```

我放置了一个 event.stopPropagation(); 作为解决此问题的临时措施。但我真正想知道的是是什么导致它重新运行？没有其他事件链接到元素#showEmailHistory。

链接到点击的元素是一个简单的 div。

```
<div id="showEmailHistory" class="button">Show Email History</div> 
```

我想展示的元素是一个简单的 div。

```
<div id="emailHistory">
    Content
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T15:19:18.223

也许您应该尝试将您的“事件”变量称为参数函数。像这样的东西：

```
$('#showEmailHistory').click(function(event) {
    $('#emailHistory').siblings().slideUp();
    $('#emailHistory').slideToggle();
    event.stopPropagation();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T15:45:50.687

我刚刚找到了答案。该页面具有重复的脚本标签，这意味着该脚本被运行了两次。感谢我的同事让这一切发生。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-30T15:23:50.087

这无需任何双重调用即可工作。[http://jsfiddle.net/jazaret/C6JsH/](http://jsfiddle.net/jazaret/C6JsH/)

```
$('#showEmailHistory').click(function() {
    $('#emailHistory').siblings().slideUp();
    $('#emailHistory').slideToggle();
});​ 
```

当点击事件绑定到在触发的 DOM 元素之上和之上匹配的类时，通常会发生双重触发问题。如果您可以在 jsfiddle 上提供特定的 DOM 元素或子集，也许我们可以更好地识别问题？

# php - 重定向到不允许的字符

> ID：13647873
> 
> 赞同：3
> 
> 时间：2012-11-30T15:11:22.763
> 
> 标签：php, codeigniter, redirect, uri, codeigniter-2

我一遍又一遍地看，似乎找不到我想要的答案，但这里是：

我有一个客户是真正的计算机文盲，我想确保在没有干预的情况下处理出现的任何错误。我目前坚持的一件事是“您提交的 URI 包含不允许的字符”。错误。

我不想简单地允许所有字符规避错误。相反，我想做的只是在发生此错误时重定向到特定的 URI。例如：

www.local.com/project/login/'''' ---> www.local.com/project/login

我看着用钩子来做，但是当我想执行检查时，我希望能够指定一个自定义 URL。

我正在考虑使用对库方法的调用，该方法将从配置中提取字符，然后根据检查是否通过进行重定向，并将当前 URL 和 URI 重定向作为参数。这是这样做的方法，还是有更简单的方法来管理它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T09:50:40.373

我已经阅读了上面的所有评论 - 但我认为您错过了执行此操作的简单方法。

只需重载`_filter_uri()`函数，然后做任何你想做的事情：

**（将此文件放在 application/core/MY_URI.php 中）**

```
// Normally this is not fully uppercase - but for some reason the URI filename is
Class MY_URI extends CI_URI
{

/**
 * Filter segments for malicious characters
 *
 * @access  private
 * @param   string
 * @return  string
 */
function _filter_uri($str)
{
    if ($str != '' && $this->config->item('permitted_uri_chars') != '' && $this->config->item('enable_query_strings') == FALSE)
    {
        if ( ! preg_match("|^[".str_replace(array('\\-', '\-'), '-', preg_quote($this->config->item('permitted_uri_chars'), '-'))."]+$|i", $str))
        {
            // DO SOMETHING HERE LIKE REDIRECT OR CHANGE THE URL
        }
    }

    // Convert programatic characters to entities
    $bad    = array('$',        '(',        ')',        '%28',      '%29');
    $good   = array('&#36;',    '&#40;',    '&#41;',    '&#40;',    '&#41;');

    return str_replace($bad, $good, $str);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-17T08:56:17.303

这是我在项目中使用的解决方案：

文件：**application/core/MY_URI.php**

```
class MY_URI extends CI_URI {

    /**
     * Filter URI
     *
     * Filters segments for malicious characters.
     *
     * @param   string  $str
     * @return  void
     */
    public function filter_uri(&$str)
    {
        if ( ! empty($str) && ! empty($this->_permitted_uri_chars) && ! preg_match('/^['.$this->_permitted_uri_chars.']+$/i'.(UTF8_ENABLED ? 'u' : ''), $str))
        {
            return preg_replace('~[^a-zA-Z 0-9%.:_\-,()]+~', '', $str);
        }
    }
} 
```

# listview - 列表视图中的 JQuery Mobile 选择，与 KnockoutJs 绑定

> ID：13647875
> 
> 赞同：1
> 
> 时间：2012-11-30T15:11:36.897
> 
> 标签：listview, jquery-mobile, select, knockout.js

当我尝试在 JQM 列表视图中使用选择时遇到问题。

我有一个列表视图来列出几台计算机，并且在每个列表项中，用户都可以通过下拉列表对计算机进行一些更改。

结果如下： ![JQM 问题](../Images/7a596186d42218340a9dee2c96037090.png)

我正在使用 knockoutjs 将 viewModels 绑定到视图。

这是我的列表视图：

```
<div data-role="page" id="page1">
<div data-role="content">
    <ul id="editComputerList" data-role="listview" data-inset="true">
        <li data-role="list-divider">
            <div class="row">
                <div class="column">
                    PC
                </div>
                <div class="column">
                    Lokasjon
                </div>
                <div class="column">
                    OS
                </div>
                <div class="column-last">
                    Språk
                </div>
            </div>
        </li>
        <!-- ko foreach: Computers -->
        <li>
            <div class="row">
                <div class="column" data-bind="text: Name">
                </div>
                <div class="column">
                    <select data-bind="value: Location, options: $root.Locations, optionsText: 'Name', optionsValue: 'Value'">
                    </select>
                </div>
                <div class="column">
                    <select data-bind="value: OsParameter, options: $root.OsParameters, optionsText: 'Name', optionsValue: 'Value'">
                    </select>
                </div>
                <div class="column-last">
                    <select data-bind="value: Language, options: $root.Languages, optionsText: 'Name', optionsValue: 'Value'">
                    </select>
                </div>
            </div>
        </li>
        <!-- /ko -->
    </ul>
</div>
</div> 
```

我在这里将模型绑定到视图：

```
var viewModel = new pageViewModel();
ko.applyBindings(viewModel, document.getElementById("page1"));
$("#editComputerList", "#page1").listview("refresh");
$('#editComputerList select').selectmenu();
$('#editComputerList select').selectmenu('refresh', true); 
```

​</p>

代码可以在这里看到：http: [//jsfiddle.net/dankli/7hJ5d/](http://jsfiddle.net/dankli/7hJ5d/)

有谁知道我做错了什么，还是 JQM 中的错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T09:43:55.567

我通过在选择上设置 data-role="none" 解决了这个问题。

```
<select data-role="none" ...></select> 
```

但我不知道这是否是要走的路。

# actionscript-3 - 两个对等点 RTMFP 聊天：我应该使用 NetGroup 还是不使用？

> ID：13647877
> 
> 赞同：0
> 
> 时间：2012-11-30T15:11:41.217
> 
> 标签：actionscript-3, flash, chat, p2p, rtmfp

我做了一个聊天，主要受[Cirrus Sample](http://labs.adobe.com/technologies/cirrus/samples/)
Chat 的启发，工作正常，但在某些情况下，“NetStream.Connect.Success”不会被触发。
两个连接都通过了[端口检查](http://blog.yoz.sk/2010/07/rtmfp-connection-tester/)

在切换到 NetGroup 架构并假设这些问题与连接过程有关之前，我想知道：
- NetGroup 在 NetStream 连接过程中的行为是否与 NetStream Direct Connection 不同？
- NetGroup 的限制是什么？我读到使用它时有更多的延迟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T04:48:43.743

好的，所以首先，NetStream.Connect.Success 在 NetConnection 而不是 NetStream 上触发。对于试图完成这一切的人来说，这是最大的误解和挫败感。Adobe 这样做是出于遗留（历史）原因。因此，请先检查以确保您在正确的位置聆听。

如果您确定侦听器位于正确的位置，则可能存在 NAT 或防火墙通信问题，这些问题会阻止一个对等方在某些情况下看到另一个对等方。

现在关于组：

NetGroup 不会（必然）引入延迟。在少于 14 个成员的组中，您有一个完整的网格（所有成员都与所有其他成员有直接的对等连接）。如果您使用 sendToAllNeighbors()，使用少于 14 个成员的组仍然可以为您提供极快的 p2p 连接。您听说延迟的地方是关于 post()。post 运行了一堆引入新延迟的东西，因为它尝试每 10 秒联系我的 3 个降序、3 个升序、我的分数连接、我的 6 个最小潜伏和我的 1 个随机数……然后尝试将消息转发到分发给小组的其他成员。即使在小组中，这也可能需要一两秒钟。

这是一个来自 MAX 的视频的链接，该视频通过 rtmfp 及其基于环的架构的所有细节（可以这么说）[Cool In-Depth Video About RTMFP](http://tv.adobe.com/watch/max-2011-develop/advanced-p2p-with-rtmfp-tips-and-tricks/)

# php - 使用 Ajax 在同一个文件中调用 PHP 对象方法

> ID：13647878
> 
> 赞同：1
> 
> 时间：2012-11-30T15:11:41.797
> 
> 标签：php, javascript, ajax, singleton

我有一个 PHP 文件，.../datastuff.php 在此页面上实例化了一个 PHP 对象。（该类写在另一个文件中）。

```
public class MyClass{

        //....
       public function doAfterClick(){
        //.....
       }
} 
```

所以在 datastuff.php 我做

```
$MyObject = new MyClass();
 //user specific data is added to $MyObject 
```

现在我想在用户按下 datastuff.php 上的按钮时调用 $MyObject->doAfterClick()

我认为 AJAX 是此类问题的通用解决方案。但我不知道该怎么做？如果我想调用写在另一个页面上的 PHP 函数，我可以使用 AJAX 将数据发布到该页面。但我想留在这个页面上，因为 MyObject 需要调用该方法。

如果我 POST 回 datastuff.php 不会丢失 $MyObject 吗？如果我将其设为 Singleton 或 Global 这会起作用吗？我看了这个，这是一个类似的问题，但不是我想要的： [Using JQuery ajax to call a PHP file, process, but stay on the same page](https://stackoverflow.com/questions/11026907/using-jquery-ajax-to-call-a-php-file-process-but-stay-on-same-page)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T15:49:03.623

这是基本思想：

```
# datastuff.php

// This object will be created upon each request
$MyObject = new MyClass();

$action = (array_key_exists('action', $_GET)) ? $_GET['action'] : '';
switch ($action) {
    case 'do_something':
        $response = $MyObject->doAfterClick();
        // Output relevant feedback to the user or redirect them somewhere based on the response

        // This was most likely called via AJAX, so perhaps output JSON data or
        // some other means of communicating the response back to the javascript
        break;

    case 'do_something_else':
        // etc...
        break;

    default:

        // Present the information to the user...

        break;
} 
```

您`$MyObject`将在每个请求时创建（即在初始页面加载时以及在单击按钮并触发 AJAX 请求后），但假设它已被赋予相同的数据，则它在每个请求中可能是相同的。单击按钮后，对“datastuff.php?action=do_something”的 ajax 请求将确保调用相关方法。

虽然这样的事情会起作用，但它不是好的代码设计。我建议您花一些时间研究 MVC（模型、视图、控制器）模式。

# python - 在python中计算忽略周末天数的时间戳列表的平均值

> ID：13647880
> 
> 赞同：0
> 
> 时间：2012-11-30T15:11:45.417
> 
> 标签：python, datetime, mean

我有一个时间戳列表，我想计算列表的平均值，但我需要忽略周六和周日的周末，并将周五和周一视为一天。我只想包括周一到周五的工作日。这是列表的一个示例。我以可读格式编写了时间戳，以便轻松跟踪该过程。例子：

['2011 年 2 月 17 日星期三 12:57:40'，'2011 年 2 月 8 日星期三 12:57:40'，'2011 年 1 月 25 日星期二 17:15:35']
MIN='2011 年 1 月 25 日星期二 17:15:35'

' Wed Feb 17 12:57:40 2011' ，因为我们在这个数字和 MIN 之间有 6 个周末天，所以我将这个数字移回 6 天。它将是 = 'Fri Feb 11 12:57:40 2011'。

'2011 年 2 月 8 日星期三 12:57:40'，因为我们在这个数字和 MIN 之间有 4 个周末天，所以我将这个数字移回 4 天，它将是 '2011 年 2 月 4 日星期三 12:57:40'

新列表现在是 ['Fri Feb 11 12:57:40 2011','Wed Feb 4 12:57:40 2011','Tue Jan 25 17:15:35 2011]

MAX='2011 年 2 月 11 日星期五 12:57:40'

平均值=（2011 年 2 月 11 日星期五 12:57:40 + 2011 年 2 月 4 日星期三 12:57:40 + 2011 年 1 月 25 日星期二 17:15:35）/3

差异= MAX - 平均值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T16:03:13.257

*编辑：* [删除了以前有错误的代码；替换为下面的代码。]

下面是一些代码的输出，它挤出周末，计算平均值，然后将周末放回以获得明显有效的平均值。代码显示在一些测试用例的输出之后。

```
['Fri Jan 13 12:00:00 2012', 'Mon Jan 16 11:00:00 2012']
Average =  Fri Jan 13 23:30:00 2012
['Fri Jan 13 12:00:00 2012', 'Mon Jan 16 13:00:00 2012']
Average =  Mon Jan 16 00:30:00 2012
['Fri Jan 13 14:17:58 2012', 'Sat Jan 14 1:2:3 2012', 'Sun Jan 15 4:5:6 2012', 'Mon Jan 16 11:03:29 2012', 'Wed Jan 18 14:27:17 2012', 'Mon Jan 23 10:02:12 2012', 'Mon Jan 30 10:02:12 2012']
Average =  Thu Jan 19 16:46:37 2012
['Fri Jan 14 14:17:58 2011', 'Mon Jan 17 11:03:29 2011', 'Wed Jan 19 14:27:17 2011', 'Mon Jan 24 10:02:12 2011']
Average =  Wed Jan 19 00:27:44 2011 
```

Python代码：

```
from time import strptime, mktime, localtime, asctime
from math import floor

def averageBusinessDay (dates):
    f = [mktime(strptime(x)) for x in dates]
    h = [x for x in f if localtime(x).tm_wday < 5]  # Get rid of weekend days
    bweek, cweek, dweek = 3600*24*5, 3600*24*7, 3600*24*2    
    e = localtime(h[0])  # Get struct_time for first item
    # fm is first Monday in local time
    fm = mktime((e.tm_year, e.tm_mon, e.tm_mday-e.tm_wday, 0,0,0,0,0,0))
    i = [x-fm for x in h]  # Subtract leading Monday
    j = [x-floor(x/cweek)*dweek for x in i]  # Squeeze out weekends
    avx = sum(j)/len(j)
    avt = asctime(localtime(avx+floor(avx/bweek)*dweek+fm))
    return avt

def atest(dates):
    print dates
    print 'Average = ', averageBusinessDay (dates)

atest(['Fri Jan 13 12:00:00 2012', 'Mon Jan 16 11:00:00 2012'])
atest(['Fri Jan 13 12:00:00 2012', 'Mon Jan 16 13:00:00 2012'])
atest(['Fri Jan 13 14:17:58 2012', 'Sat Jan 14 1:2:3 2012', 'Sun Jan 15 4:5:6 2012', 'Mon Jan 16 11:03:29 2012', 'Wed Jan 18 14:27:17 2012', 'Mon Jan 23 10:02:12 2012', 'Mon Jan 30 10:02:12 2012'])
atest(['Fri Jan 14 14:17:58 2011', 'Mon Jan 17 11:03:29 2011', 'Wed Jan 19 14:27:17 2011', 'Mon Jan 24 10:02:12 2011']) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-30T15:14:43.460

根据 ' ' 拆分字符串，取第一个元素，如果不是星期六或星期日，则为工作日。现在我需要知道日期列表的“平均值”是什么意思。

# richtextbox - 用户在 Windows Phone 8 上的 RichTextBox 中选择文本

> ID：13647883
> 
> 赞同：3
> 
> 时间：2012-11-30T15:12:11.047
> 
> 标签：richtextbox, windows-phone-8

我正在尝试在我的 Windows Phone 8 应用程序中使用 RichTextBox。用户需要能够选择文本并将其复制到剪贴板。用户不需要编辑文本，只需选择它。但是，我似乎无法在 Windows Phone 模拟器或我的 Windows Phone 8 设备（诺基亚 920）上选择文本。

RichTextBox.Selection 属性的文档包含有关如何更改所选文本格式（粗体、斜体等）的示例代码。我假设用户必须先选择文本才能使其变为粗体或斜体，但我无法使其工作。文档页面的日期为 2012 年 11 月 8 日，并在底部声明它适用于 Windows Phone 8.0 和 7.1。请参阅此处的页面：http: [//msdn.microsoft.com/en-US/library/windowsphone/develop/system.windows.controls.richtextbox.selection (v=vs.105).aspx](http://msdn.microsoft.com/en-US/library/windowsphone/develop/system.windows.controls.richtextbox.selection(v=vs.105).aspx)

RichTextBox.IsReadOnly 属性的文档说 RichTextBox 在 Windows Phone 上始终是只读的。事实上，查看调试器中的对象会发现 IsReadOnly 是真的。尝试将其设置为 false 会引发异常。

然而，在早期的“Mango”文档的其他地方，它指出，虽然控件是只读的，但用户仍然可以选择文本。RichTextBox.Selection 属性的文档清楚地暗示了这一点。

有人可以确认或否认在 Windows Phone 上的 RichTextBox 中可以进行用户文本选择吗？如果可能的话，有人可以提供如何使其工作的示例代码吗？

谢谢！

泰恩·诺里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T21:43:02.227

RichTextBox 最初是从 Silverlight 移植到 Windows Phone 7.1，但并非所有功能都被移植（例如，复制和粘贴以及文本选择）：

[WP7 Mango RichTextBox 支持复制和粘贴](https://stackoverflow.com/questions/7567254/wp7-mango-richtextbox-support-for-copypaste)

[Windows Phone 开发者论坛：无法在 RichTextBox 中选择文本？](http://social.msdn.microsoft.com/forums/en-us/wpdevelop/thread/0d691c50-972a-4740-9a88-89a0af3a75a1)

在比较 API 并在模拟器和设备上进行一些测试之后，看起来 RichTextBox 没有针对 Windows Phone 8 进行改进，并且仍然缺少该功能。

# google-visualization - Google Geochart 边框颜色

> ID：13647889
> 
> 赞同：8
> 
> 时间：2012-11-30T15:12:31.310
> 
> 标签：google-visualization

有没有办法在 Google Geocharts 中自定义区域边框颜色？API 提到了背景描边，但没有提到区域描边。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-01T14:42:44.780

你不能用 API 设置来做，但你可以用 CSS 做。

```
#map_canvas path {
stroke-width:1; /* control the countries borders width */
stroke:#6699cc; /* choose a color for the border */
} 
```

你可以在我的网站上看到它的实际效果，这里： [http](http://cmoreira.net/interactive-world-maps-demo/advanced-customization/) ://cmoreira.net/interactive-world-maps-demo/advanced-customization/ 我也在尝试记录更多的 CSS 调整。

希望能帮助到你！干杯

# web-services - 阻止访问主域上的子域文件夹

> ID：13647890
> 
> 赞同：3
> 
> 时间：2012-11-30T15:12:31.387
> 
> 标签：web-services, .htaccess, cpanel

我的主机上几乎没有网站。他们中的大多数都有自己的域。

我想阻止通过 maindomain.com/subdomain 访问我的子域文件夹。

我想让它只能通过 subdomain.maindomain.com 打开

如果可能，禁用访问，或者只是将其重定向到子域。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T18:54:25.857

```
RewriteEngine on
RewriteBase / 

#if not already blog.website.com
RewriteCond %{HTTP_HOST} !^blog\.website\.com$ [NC] 
#if request is for blog/, go to blog.website.com
RewriteRule ^blog/$ http://blog.website.com [L,NC,R=301] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-30T06:43:09.360

访问：

```
RedirectMatch ^/subdomain/(.*)$ http://subdomain.mysite.com/$1 
```

# php - 用php转换为base64

> ID：13647892
> 
> 赞同：2
> 
> 时间：2012-11-30T15:12:38.610
> 
> 标签：php

我正在将图像上传转换为base64，但我也试图不必将图像存储在我的服务器上不幸的是，这段代码将文件存储在我的服务器上是否有办法让它在编码后删除文件到基数64？

这是我的代码..

```
 if(isset($_FILES['t1']['name'])){
    $file = rand(0, 10000000).$_FILES['t1']['name'];
    if (move_uploaded_file($_FILES['t1']['tmp_name'], $file)) {
        if($fp = fopen($file,"rb", 0))
        {
           $picture = fread($fp,filesize($file));
           fclose($fp);
           // base64 encode the binary data, then break it
           // into chunks according to RFC 2045 semantics
           $base64 = base64_encode($picture);
           $tag1 = '<img src="data:image/png;base64,'.$base64.'" alt="" />';
           $css = 'url(data:image/png;base64,'.str_replace("\n", "", $base64).'); ';
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T15:15:49.630

使用[http://us3.php.net/manual/en/function.unlink.php](http://us3.php.net/manual/en/function.unlink.php)

所以

```
....
$css = 'url(data:image/png;base64,'.str_replace("\n", "", $base64).'); ';
unlink($file); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T15:17:53.033

```
if(isset($_FILES['t1']['name'])){
    $file = rand(0, 10000000).$_FILES['t1']['name'];
    if (move_uploaded_file($_FILES['t1']['tmp_name'], $file)) {
           $fileCon = file_get_contents($file) ;
           // base64 encode the binary data, then break it
           // into chunks according to RFC 2045 semantics
           $base64 = base64_encode($fileCon);
           $tag1 = '<img src="data:image/png;base64,'.$base64.'" alt="" />';
           $css = 'url(data:image/png;base64,'.str_replace("\n", "", $base64).'); ';
           unlink($file);
    } 
```

如果您不从临时文件移动文件将删除自动或者如果移动它您可以取消链接

祝你好运

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T15:17:54.827

您可以像使用普通文件一样使用 $_FILES['t1']['tmp_name'] 。

所以你应该能够做到这一点：

```
if(isset($_FILES['t1']['name'])){
    $file = $_FILES['t1']['tmp_name'];
    if($fp = fopen($file,"rb", 0))
    {
        $picture = fread($fp,filesize($file));
        fclose($fp);
        // base64 encode the binary data, then break it
        // into chunks according to RFC 2045 semantics
        $base64 = base64_encode($picture);
        $tag1 = '<img src="data:image/png;base64,'.$base64.'" alt="" />';
        $css = 'url(data:image/png;base64,'.str_replace("\n", "", $base64).'); ';
    }
} 
```

如果这不好，您可以使用@cryptic 的解决方案并取消链接（）文件。

# java - BLOb：无法读取所有数据，但只有几 kb

> ID：13647894
> 
> 赞同：3
> 
> 时间：2012-11-30T15:12:40.377
> 
> 标签：java, mysql, database, file, blob

我正在使用 BLOb 支持从 MySQl 插入和读取。（JDBC）我可以这样做，但是当它读取时，它只有几个 kb。我不知道为什么。这是工作代码：

```
 import java.sql.*;
import java.io.*;

public class InsertAndRetrieveImage {

 public static void main(String[] args) throws SQLException, FileNotFoundException, IOException {
  int id=7;
String connectionURL = "jdbc:mysql://127.0.0.1:3306/newdb";;
Connection con=null;
try{
Class.forName("com.mysql.jdbc.Driver");
con = DriverManager.getConnection(connectionURL, "root", "sesame");

 PreparedStatement ps = null;

 ps=con.prepareStatement("INSERT IGNORE INTO image VALUES(?,?,?)");

         File file = new File("e:/anarkali.wav");

         FileInputStream fs = new FileInputStream(file);

     try{
        System.out.println(fs.available());
         ps.setInt(1,id);
         ps.setBinaryStream(2,fs,fs.available());
         String filen=file.getName();
      ps.setString(3,filen);

      int i = ps.executeUpdate();

        String filename="filename";OutputStream os=null;byte[] content=null;
        ps= con.prepareStatement("SELECT fs from image where id=7");
        ResultSet rs = ps.executeQuery();
         System.out.println(rs);
      while(rs.next()) {

            Blob blob = rs.getBlob("fs");

        content = blob.getBytes(1, (int) blob.length());

        os = new FileOutputStream(new File("e://testanar.wav"));

    }
    os.write(content);
    os.close();
    con.close();
    ps.close();}
     catch(SQLException e)
     {System.out.println(e.getMessage());
     }

  }catch(Exception ex){}

  } 
```

阅读或写作时出现问题吗？我的 BLOb 的大小有点`65535`。这是错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T18:11:13.767

你的程序是正确的。如果文件大小很小，那么它可以正常工作。如果您使用`BLOB`数据类型来存储该二进制数据，请将其更改为`LONGBLOB`. 因为如果您尝试将文件保存在`BLOB`数据字段中，并且文件大小超过 BLOB 数据类型的最大允许大小，则内容将被截断并且您将丢失文件的某些内容（取决于文件大小）。即使您使用`LONGBLOB`数据类型，也有一些事情您必须检查。我会解释

在 mysql 网站中，我们可以看到最大文件大小`LONGBLOB`为 4GB。但这取决于很多事情。要存储大文件，您必须检查一些事情。首先是在`my.ini`文件中，有一个名为 的属性`max_allowed_packet`，它指定可以传输到 mysql 客户端或服务器或从 mysql 客户端或服务器传输的最大可能数据包。您应该将`max_allowed_packet`属性设置为更高的值。并重启mysql。某些文件系统不允许 4GB 文件。在这种情况下，您无法加载那么多大文件。

我认为在您的情况下将`max_allowed_packet`属性设置为更高的值将解决问题。

我认为您可以使用以下表格创建脚本

```
CREATE TABLE `image` (
    `id` INT(10) NULL DEFAULT NULL,
    `fs` LONGBLOB NULL,
    `filen` VARCHAR(50) NULL DEFAULT NULL
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T14:10:49.593

如您所知，每个参数都有固定值长度，这里是示例。

```
 0 < length <=      255  -->  `TINYBLOB`
     255 < length <=    65535  -->  `BLOB`
   65535 < length <= 16777215  -->  `MEDIUMBLOB`
16777215 < length <=    2³¹-1  -->  `LONGBLOB`

TINYBLOB: maximum length of 255 bytes
BLOB: maximum length of 65,535 bytes
MEDIUMBLOB: maximum length of 16,777,215 bytes
LONGBLOB: maximum length of 4,294,967,295 bytes 
```

这个 MAX 大小不是错误，而是它存储值的长度

在你的情况下使用`MEDIUMBLOB`or `LONGBLOB`。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-06T19:31:46.927

几天前我遇到了同样的问题，我所做的是不使用 InputStream 可用方法。

利用：

```
ps.setBinaryStream(2, fs); 
```

但是您必须验证，因为有些 jdbc 驱动程序不支持它

# python - Python中的FTPServer在'mget'上抛出异常

> ID：13647895
> 
> 赞同：0
> 
> 时间：2012-11-30T15:12:40.357
> 
> 标签：python, python-3.x, ftp-server

```
I implemented a FTP Server in Python using pyftpdlib.ftpserver
This works fine with mput/put operations but fails with mget/get. Following exception is thrown: 
```

> []10.203.200.136:62408 已连接。10.203.200.136:62408 ==> 220 pyftpdlib 0.5.2 准备好了。10.203.200.136:62408 <== USER 用户 10.203.200.136:62408 ==> 331 用户名好，发送密码。10.203.200.136:62408 <== 通过****** 10.203.200.136:62408 ==> 230 登录成功。[user]@10.203.200.136:62408 用户用户登录。10.203.200.136:62408 <== TYPE A 10.203.200.136:62408 ==> 200 类型设置为：ASCII。10.203.200.136:62408 <== 端口 10,203,200,136,243,206 10.203.200.136:62408 ==> 200 已建立活动数据连接。10.203.200.136:62408 <== NLST RS.pcap [用户]@10.203.200.136:62408 OK NLST "/RS.pcap"。转移开始。10.203.200.136:62408 ==> 125 数据连接已打开。转移开始。10.203.200.136:62408 ==> 226 传输完成。10.203.200.136:62408 <== A 型 10.203.200.136:62408 ==> 200 类型设置为：ASCII。10.203.200.136:62408 <== 端口 10,203,200,136,243,208 10.203.200.136:62408 ==> 200 已建立活动数据连接。10.203.200.136:62408 <== RETR RS.pcap [用户]@10.203.200.136:62408 OK RETR "/RS.pcap"。下载开始。10.203.200.136:62408 ==> 125 数据连接已打开。转移开始。10.203.200.136:62408 ==> 426 内部错误；传输中止。

```
Traceback (most recent call last):
    File "C:\Python31\lib\asynchat.py", line 244, in initiate_send
        data = buffer(first, 0, obs)
    File "C:\Python31\lib\asynchat.py", line 56, in buffer
        memoryview(obj)
TypeError: cannot make memory view because object does not have the buffer interface

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
    File "C:\Python31\lib\pyftpdlib\ftpserver.py", line 2077, in push_dtp_data
        self.data_channel.push_with_producer(data)
    File "C:\Python31\lib\asynchat.py", line 211, in push_with_producer
        self.initiate_send()
    File "C:\Python31\lib\asynchat.py", line 246, in initiate_send
        data = first.more()
    File "C:\Python31\lib\pyftpdlib\ftpserver.py", line 1143, in more
        return bytes(data, BYTES_ENCODING)
TypeError: encoding or errors without a string argument 
```

现在在 asynchat.py（内部调用）中，在initial_send 中调用缓冲区，当 memoryview(obj) 完成时抛出异常；obj 是 FileProducer 类型的对象。

谁能提出可能的错误是什么？python库有问题吗？如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T17:04:38.657

很难说没有看到一些实际的代码。它似乎与 str/bytes 的区别有关（在 Python 3 中从 Python 2 发生了变化）。从 pyftpdlib 主页看来，pyftpdlib 还不支持 Python 3。

# frameworks - Web 开发，保护应用程序代码

> ID：13647896
> 
> 赞同：3
> 
> 时间：2012-11-30T15:12:43.667
> 
> 标签：frameworks

我正在查看一些（PHP）框架，我刚刚在 Laravel 文档中注意到了这一点：

> 与大多数 Web 开发框架一样，Laravel 旨在保护您的应用程序代码、捆绑包和本地存储，方法是仅将必须公开的文件放置在 Web 服务器的 DocumentRoot 中。这可以防止某些类型的服务器错误配置使您的代码（包括数据库密码和其他配置数据）可以通过 Web 服务器访问。最好是安全的。

我对 CodeIgniter 和 CakePHP 比较熟悉，据我所知，这两个框架都不做这个。您真的应该将其拆分并将您的核心逻辑放在 webroot 之外吗？根据我的经验，大多数客户使用共享主机并且无法更改他们的 VirtualHost 设置。

你可能会做什么样的错误配置来输出你的密码？开发时，你真的应该这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-02T21:07:50.377

CakePHP 支持这一点 - 请参阅[部署](http://book.cakephp.org/2.0/en/deployment.html)：

> CakePHP 应用程序应该将文档根设置为应用程序的 app/webroot。这使得应用程序和配置文件无法通过 URL 访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-02T21:01:18.800

是的，只保留那些应该在 DocumentRoot 中公开访问的文件是[Web 应用程序安全性](http://docforge.com/wiki/Web_application/Security)的最佳实践。考虑：

*   每个私有文件都需要使用 Web 服务器配置的规则来明确阻止它。
*   任何向项目添加文件的人都需要考虑 Web 服务器安全设置。只需将文件保存在单独的目录中，就可以清楚地看出什么是公开的。并且开发人员不需要更改安全配置。
*   无论如何，分离可执行代码和静态文件是一个好习惯。
*   不阻止对 PHP 脚本的访问可能会导致意想不到的后果。例如，当您在命令行手动运行时，您可能有一个脚本来更新一些数据库记录，因此只需猜测脚本名称的人就可以在互联网上运行它。
*   如果真正的应用程序逻辑在其他地方，那么监视和清理写入公共目录的恶意代码会容易得多。有关示例，请参阅 Wordpress 中断。

# javascript - 这个javascript动画不应该产生正弦波运动吗？

> ID：13647900
> 
> 赞同：1
> 
> 时间：2012-11-30T15:12:54.420
> 
> 标签：javascript, animation, trigonometry

我正在做一个小的 JavaScript 动画，希望它`div`可以沿着正弦波移动，并且目前水平路径工作正常（只是直线）。我几乎可以肯定我的`Y`轴数学公式是错误的。我试图用我找到的一些例子来纠正它，但没有一个对我有用。在我尝试的所有可能性中，`Y`轴都被忽略了，小盒子只是水平直线移动。

我该如何解决这个问题，所以运动会沿着正弦波进行？我知道使用 jQuery 或使用 html 5 可以更轻松地完成它，但我只是想知道我的原始代码有什么问题......如果可能的话，我更愿意修复这个问题。

```
function animate() {
    xnow = item.style.left;
    item.style.left = parseInt(xnow)+1+'px';
    ynow = item.style.top;
    item.style.top = ynow + (Math.sin((2*Math.PI*xnow)/document.width))*document.heigth;
    setTimeout(animate,20); 
} 
```

完整代码在这里： [JSFiddle](http://jsfiddle.net/twNcy/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-30T15:56:34.330

sin 函数的形式为 y = a * sin(b*x) + c，其中 c 是函数的 y 中点（或函数振荡的水平线），其中 a 是幅度（最大从 y = c) 开始的 y 偏移量，b 是周期（每个波的 x = 2*pi 段数）。

鉴于此，并且我们知道正弦波从 -a 到 +a 振荡，我们知道我们的偏移量 (c) 应该 1) 是恒定的并且 2) 在我们的上限和下限之间。为此，我们可以使用

`c = document.height / 2;`

如果您希望对象遍历整个屏幕，您的振幅将与 c 的值相同。在测试中你会发现这使它超出了页面的底部，所以让我们让它达到 90%。

`a = 0.9 * c;`

对于整个页面的 1 周期，您需要将 b 乘以一个因子，使其成为 2*pi 的分数。在这种情况下

`b = 2*Math.PI/document.width;`

在每次迭代中，不需要获取 的值`ynow`，它是 的函数`xnow`。你可以按照以下方式做一些事情

`xnow = parseInt(item.top.left) + 5;`

然后计算新的 y

`ynow = c + a * Math.sin(b * xnow);`.

然后设置项目的样式。

`item.style.left = xnow + 'px';`

`item.style.top = ynow + 'px';`

让我知道是否有任何不清楚的地方。问候。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-30T15:20:36.903

我发现您的代码存在几个问题：

*   `xnow`包含此格式的字符串：`###px`您不能将其相乘，因此请`parseInt()`在您的`Math.sin()`调用中使用。
*   你的代码也是如此`ynow`，它需要`parseInt()`。
*   更好的是使用其他（全局）变量将 x 和 y 坐标存储为数字。并`px`在更新 div 元素的坐标时添加。
*   当您乘以`2*Math.PI`（`xnow`仅包含整数）时，该`sin()`函数将始终返回`0`. 所以你不会得到类似正弦的运动。您需要除以`xnow`要用于完成类似正弦运动的 x 步数
*   `Math.sin()`返回一个介于 -1 和 +1 之间的值，因此您需要将其乘以幅度才能看到（更清晰的）效果。

为了保持与您设计的一样多，它会变成这样（需要 50 个 x 移动步骤来完成一个完整的正弦并使用 10 个像素的幅度）：

```
function animate() {
    xnow = parseInt(item.style.left);
    item.style.left = (xnow+1)+'px';
    ynow = parseInt(item.style.top);
    item.style.top = (ynow+Math.sin(2*Math.PI*(xnow/50))*10) + "px";
    setTimeout(animate,20);
} 
```

如前所述：最好使用一些包含值的全局变量（而不是`parseInt()`一直使用）

请参阅我[更新的 JSFiddle 示例](http://jsfiddle.net/twNcy/5/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-30T15:38:23.180

你需要`parseInt()`使用`xnow`. 您还需要在数字末尾添加 'px' 以制成格式正确的字符串。

此代码有效：

```
function animate() {
  xnow = parseInt(item.style.left);
  item.style.left = xnow+1+'px';
  item.style.top = 200 + (Math.sin((2*Math.PI*xnow)/200))*document.height+'px';
  setTimeout(animate,20); 
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-30T15:34:24.220

有几个错误：

*   `height`拼写错误
*   在取正弦之前解析`xnow`为 int
*   在添加之前解析`ynow`为 int （尽管实际上不是必需的，见下文）
*   添加`"px"`到作业的末尾`item.style.top`
*   该等式可以使用一些调整：

我建议从它开始，`(400 + Math.sin(2*Math.PI*xnow/document.width) * 200) + "px"`然后玩弄它。`400`是作为正弦波基础的水平轴。如果你使用`ynow`而不是常数，你会得到累积效应（波浪会比你想要的高得多，或者水平轴会随着时间而改变）。

`document.width`是一个完整周期的宽度。这`200`是峰值幅度（从水平到峰值的距离 -`document.height`会将盒子在两个方向上推离屏幕）。插入这个函数来代替当前函数，然后你就可以玩弄这些数字了：

```
function animate() {
  xnow = parseInt(item.style.left);
  item.style.left = xnow+1+'px';
  item.style.top = (400 + Math.sin(2*Math.PI*xnow/document.width) * 200) + "px";
  setTimeout(animate,20); 
} 
```

# android - 让活动在轮换时被销毁有什么好处？

> ID：13647903
> 
> 赞同：5
> 
> 时间：2012-11-30T15:13:14.063
> 
> 标签：android, rotation

我使用了这两种方法：

1.  让活动在旋转时被销毁
2.  不要让活动在轮换时被破坏

我的方法几乎每次都是捕捉旋转事件，如果需要，调用 setContentView 并再次添加一些组件。如果没有，只需让它旋转，布局就会适应。

到目前为止，我只看到让它在具有非常复杂的结构且非常动态的屏幕上被破坏的优势，并且每当我旋转而不是破坏时，在重新构建屏幕时会显示一些闪烁。

必须通过 onSaveInstance 和 onRestoreInstace 传递状态的开销有时非常容易出错，并且在某种程度上很耗时。

我错过了什么吗？

**更新：**

如果“Orientation.XPTO == ...”在我的代码上，我没有做任何类型的事情。这是两种方法中的每一种的逻辑（代码被重用）：

破坏时

```
onCreate -> DrawUI() setContentView and add views -> fill() add content 
```

未销毁时：

```
onCreate -> DrawUI() setContentView and add views -> fill() add content
onRotation -> DrawUI() setContentView and add views -> fill() add content 
```

在旋转后调用 setContentView 时，它将为设备方向选择正确的布局（通过 Google 的 Reto Meier [https://stackoverflow.com/a/456918/327011](https://stackoverflow.com/a/456918/327011)检查此答案）

并且 DrawUI 和填充必须具有纵向和横向布局的逻辑，因为可以在两个方向中的每一个上创建活动。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-10T13:31:05.630

> 我错过了什么吗？

是的。您假设您的替代方案不太容易出错。

通过不经历销毁和重新创建周期，您必须确保针对*每个*可能的配置更改处理更改*每个*资源。

 *> 不要让活动在轮换时被破坏

除非您使用`android:screenOrientation`强制您的活动进入单一方向（例如，`landscape`），否则您不能只处理与旋转相关的配置更改。您需要处理*所有*配置更改。否则，一旦用户将他们的设备放入扩展坞、将其从扩展坞中移除、从“设置”更改语言、附加或分离键盘、更改全局字体缩放等，您的应用程序就会崩溃。

反过来，这意味着在每次配置更改时，您都需要：

*   为可能的新字符串资源更新 UI
*   调整或重新加载您的布局（并通过“调整”，包括更改任何可绘制对象、动画、菜单等）
*   与您的资源相关的任何其他内容（例如，您的数组列表`PreferenceFragment`）

问题是你会忘记一些东西。例如，您将错过更改与操作栏项关联的字符串，因此现在您的大部分 UI 都是西班牙语，而操作栏项是英文。您将要忘记的事情将不那么明显（您多久测试一次西班牙语翻译？）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T15:18:24.917

你的活动被破坏，让你有机会重新配置自己以适应新的方向。

来自 developer.android.com：

> 当屏幕改变方向时，系统会销毁并重新创建前台 Activity，因为屏幕配置已更改并且您的 Activity 可能需要加载替代资源（例如布局）。

例如，在横向模式下，您可能需要完全不同的布局，或者可能希望加载不会出现拉伸的图形。这样做的最好方法是允许再次创建活动，这将允许链接到布局文件更改为对方向更友好的布局。

有关更多信息以及如何处理方向变化，请参阅[http://developer.android.com/training/basics/activity-lifecycle/recreating.html](http://developer.android.com/training/basics/activity-lifecycle/recreating.html)

如果您想禁用娱乐，您可以添加

```
android:configChanges="orientation" 
```

到 AndroidManifest.xml 中的 Activity 元素。这样您的 Activity 将不会被重新加载。

`onSaveInstance`并且`onRestoreInstace`应该只用于传递会话信息，例如 a 中的当前文本`TextField`，并且没有可以在 onCreate 之后再次加载的通用内容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-30T20:15:14.707

If you, restarting the Activity, requires recovering large sets of data, re-establishing a network connection, or perform other intensive operations then using the `onSaveInstanceState()` could potentially cause your noted symptoms:

1.  A poor user experience (i.e. "*show some flickering*")
2.  Require consumption of a lot of memory

`onSaveInstanceState()` callbacks are not designed to carry large objects.

> **To retain an object during a runtime configuration change:**
> 
> Override the `onRetainNonConfigurationInstance()` method to return the object you would like to retain. When your activity is created again, call `getLastNonConfigurationInstance()` to recover your object.

**However:**

> While you can return any object, you should never pass an object that is tied to the Activity, such as a `Drawable`, an `Adapter`, a `View` or any other object that's associated with a `Context`. If you do, it will leak all the views and resources of the original activity instance. (Leaking resources means that your application maintains a hold on them and they cannot be garbage-collected, so lots of memory can be lost.)

[Source](http://developer.android.com/guide/topics/resources/runtime-changes.html#RetainingAnObject)

* * *

Unless you are able to pass the `Object`(s) smoothly I personally think it is more advantageous to handle the configuration change yourself, meaning not to destroy.

If you have a target API of 13 or higher: You must include `screenSize` in your `configChanges`. Starting with API 13 the screen size also changes on orientation change and you'll need to account for this. Prior to 13 your Activity would handle this itself.

```
android:configChanges="orientation|screenSize" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T15:21:41.927

**有时，当您对(Landscape / Portrait)**使用不同的布局时，它很有用。并使用不同类型的视图，例如`ListView`纵向和`GridView`横向。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T13:30:59.137

我猜你没有考虑创建 android 布局的标准方式。如果我错了，请纠正我。您是否使用两个带有**-port,-land**的 res 文件夹分别告诉 android 系统在运行时选择根据方向加载不同的资产和布局。

此[示例](http://android-meda.blogspot.in/2012/02/tutorial-using-layouts-in-your-android.html)可以为您提供管理不同方向的布局的线索。

这是 android[标准文档](http://developer.android.com/guide/topics/resources/providing-resources.html)。请检查“土地”和“港口”。

希望这会帮助你。*

# python - 创建多维字典

> ID：13647913
> 
> 赞同：1
> 
> 时间：2012-11-30T15:13:40.757
> 
> 标签：python, dictionary

我尝试从文件创建一个多字典；

```
k = []
with open('directory file txt',r) as f:
    for line in f:
        k.append(line.strip().split('.')) 
```

如何创建这样的多字典：

```
dict=[key1][key2][key3][key4]='value' 
```

其中`key1`是第一行的第一个元素，`key2`第二个等。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T15:20:36.070

反转列表并嵌套结果：

```
result = {}
with open('directory file txt',r) as f:
    for line in f:
        keys = line.strip().split('.')
        value = keys[-1]
        for key in reversed(keys[1:-1]):
            value = {key: value}
        result[keys[0]] = value 
```

这并不能很好地处理“更高”重复的键；如果您有重复的密钥，则需要使用稍微麻烦的设置（`defaultdict()`我认为不会更好地处理这种情况）：

```
result = {}
with open('directory file txt',r) as f:
    for line in f:
        keys = line.strip().split('.')
        current = result
        for key in keys[:-2]:
            current = current.setdefault(key, {})
        current[keys[-2]] = keys[-1] 
```

# c# - 如何打开已经在另一个程序中打开的文件（用于读取）？

> ID：13647918
> 
> 赞同：3
> 
> 时间：2012-11-30T15:13:57.167
> 
> 标签：c#, io

> **可能重复：**
> [打开文件只读](https://stackoverflow.com/questions/4964588/open-file-readonly)

在我的应用程序中，我正在使用 Debug.WriteLine() 将一些信息写入 Log.txt，并且我想提供一个显示 Log.txt 内容的表单。

但是当我尝试打开文件 Log.txt 时，我遇到了一个异常：

> 该进程无法访问文件“F:\Rajeev\10-11-2012\Temp\Temp\bin\Debug\Log.txt”，因为它正被另一个进程使用。

我该如何克服这个问题？

另一个问题是，我可以使用记事本打开同一个文件。那为什么我不能使用我的应用程序打开同一个文件？

以下是我用于指定日志文件的代码：

```
TextWriterTraceListener tr = new TextWriterTraceListener(System.IO.File.CreateText("Log.txt"));
Debug.Listeners.Add(tr);
Debug.AutoFlush = true; 
```

以下是我用于写入日志文件的代码：

```
Debug.WriteLine("ERROR: Invalid Username " + s); 
```

以下是我用于打开日志文件（已由“调试”打开）以显示在日志查看器（我的应用程序中的“表单”）中的代码：

```
File.Open(LogFilePath, FileMode.Open, FileAccess.Read,FileShare.Read); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T15:17:34.267

这是由打开文件的权限决定的。如果一个程序以任何类型的独占模式打开文件，那么其他程序将具有有限的访问权限或没有访问权限。

因此，您可以确保不要尝试以独占方式打开文件（您没有显示您的代码）。但是，如果您没有其他程序的源代码，那么您只能希望该程序不会以独占方式打开文件。否则，除了终止另一个程序之外，我看不出你能做些什么。

**编辑**

以下代码：

```
File.Open(LogFilePath, FileMode.Open, FileAccess.Read, FileShare.Read); 
```

说其他文件也可以读取打开的文件，但我相信他们无法写入。因此，如果另一个程序正在写入该文件，那将是不允许的。您可以尝试`FileShare.ReadWrite`，但如果您有其他程序的来源，我仍然看不到您指出的位置。我只是错过了吗？

# javascript - JSON 响应一个 javascript 对象

> ID：13647919
> 
> 赞同：-3
> 
> 时间：2012-11-30T15:13:59.507
> 
> 标签：javascript, json, object, extjs

我正在使用带有 JSON 的 EXTJS。我试图在 json 响应中返回一个对象，但它不起作用。我有以下内容：

```
{"success": true,
    "results" : [ {
        "type":{
            "title":"example"
        }
    },{
        "type":{
            "subtitle":"example"
        }
    }
]} 
```

在萤火虫它输出这个：

```
type   "[object Object]" 
```

这是因为数据模型吗？我不确定使用什么类型作为类型。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T15:26:35.957

你是用 Ext JS 调用它`Ext.Ajax.request`吗？你可以这样做：

```
Ext.Ajax.request({
    url: 'your_url',
    success: function (response) {
        var obj = Ext.decode(response.responseText);
    }
}); 
```

`obj`现在应该包含您在响应中发送的内容。`Ext.decode`是将 JSON 字符串转换为其对应的 javascript 对象的 Ext 方法。

# cassandra - 为灾难恢复配置 Apache Cassandra

> ID：13647921
> 
> 赞同：4
> 
> 时间：2012-11-30T15:14:24.403
> 
> 标签：cassandra, disaster-recovery

您如何配置 Apache Cassandra 以允许灾难恢复，以允许两个数据中心之一发生故障？

[DataStax 文档](http://www.datastax.com/docs/0.7/operations/datacenter#disaster)讨论了使用复制策略，以确保至少一个复制被写入您的两个数据中心中的每一个。但是，一旦灾难真正发生，我看不出这有什么帮助。如果您切换到剩余的数据中心，您的所有写入都将失败，因为这些写入将无法复制到其他数据中心。

我猜你会希望你的软件在两种模式下运行：正常模式，写入必须在两个数据中心之间复制，以及灾难模式，它们不需要。但改变复制策略似乎是不可能的。

我真正想要的是两个过度配置的数据中心，并且在正常操作期间使用两个数据中心的资源，但是当只有一个数据中心时仅使用剩余一个数据中心的资源（性能降低）正在运行。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-30T20:51:00.503

诀窍是改变通过 API 为写入提供的一致性设置，而不是改变复制因子。当只有一个数据中心可用时，在灾难期间使用`LOCAL_QUORUM`写入设置。在正常操作期间使用`EACH_QUORUM`以确保两个数据中心都有数据副本。读取可以`LOCAL_QUORUM`一直使用。

以下是[多个数据中心](http://www.datastax.com/dev/blog/deploying-cassandra-across-multiple-data-centers)的 Datastax 文档摘要，以及较旧但在概念上仍然相关的[灾难恢复 (0.7)](http://www.datastax.com/docs/0.7/operations/datacenter)。

使用两种一致性`LOCAL_QUORUM`和`EACH_QUORUM`.

> 这里，“local”表示单个数据中心的本地，而“each”表示在每个数据中心都严格保持同一级别的一致性。

假设您有 2 个数据中心，其中一个严格用于灾难恢复，那么您可以将复制因子设置为...

> 3 个用于主写入/读取中心，2 个用于故障转移数据中心

现在，根据您的数据实际写入灾难恢复节点的重要性，您可以使用 EACH_QUORUM 或 LOCAL_QUORUM。假设您正在使用复制放置策略`NetworkTopologyStrategy (NTS)`，

`LOCAL_QUORUM`on writes 只会延迟客户端本地写入 DC1 并异步写入 DC2 中的恢复节点。

`EACH_QUORUM`将确保复制所有数据，但会延迟写入，直到两个 DC 确认成功操作。

对于读取，最好只使用 LOCAL_QUORUM 来避免`inter-data center latency`.

这种方法有问题！如果您选择在写入时使用 EACH_QUORUM，则会增加潜在的故障点（DC2 已关闭，DC1-DC2 链接已关闭，无法满足 DC1 仲裁）。

好处是一旦您的 DC1 出现故障，您就有了有效的 DC2 灾难恢复。另请注意，在第二个链接中，它讨论了用于正确路由 IP 的自定义告密设置。

# postgresql - 通过 RAW plpgsql 中的 UPDATE 语句获取受影响的行

> ID：13647925
> 
> 赞同：16
> 
> 时间：2012-11-30T15:14:33.933
> 
> 标签：postgresql, plpgsql, optimistic-concurrency, postgresql-9.2

[这已经在这里](https://stackoverflow.com/q/4038616/15186)和[这里](https://stackoverflow.com/q/10113706/15186)多次询问，但没有一个答案适合我的情况，因为我不想在 PL/PgSQL 函数中执行我的更新语句并使用`GET DIAGNOSTICS integer_var = ROW_COUNT`.

我必须在原始 SQL 中执行此操作。

例如，在 MS SQL SERVER 中，我们有 @@ROWCOUNT ，可以像下面这样使用：

```
UPDATE <target_table> 
SET Proprerty0 = Value0
WHERE <predicate>;
SELECT <computed_value_columns> 
 FROM <target> 
 WHERE @@ROWCOUNT > 0; 
```

在数据库的一次往返中，我知道更新是否成功并返回计算值。

可以使用什么来代替 '@@ROWCOUNT' ？有人可以确认目前这实际上是不可能的吗？

提前致谢。

**编辑 1**：我确认我需要使用原始 SQL（我在原始描述中写了“原始 plpgsql”）。

为了使我的问题更清楚，请考虑更新语句仅影响一行并考虑乐观并发：

1.  客户`SELECT`首先做了一个声明。

2.  他构建了 UPDATE 并知道哪些数据库计算列将包含在 SELECT 子句中。除其他外，谓词包括每次更新行时计算的时间戳。

3.  所以，如果我们返回了 1 行，那么一切正常。如果没有返回任何行，那么我们知道之前有更新，客户端可能需要在再次尝试更新子句之前刷新数据。这就是为什么我们需要在返回计算列之前知道有多少行受更新语句影响。如果更新失败，则不应返回任何行。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-30T15:36:28.977

您所描述的形式目前无法实现您想要的，但我认为您可以使用`UPDATE ... RETURNING`. 参见[`UPDATE ... RETURNING`手册](http://www.postgresql.org/docs/current/static/sql-update.html)。

```
UPDATE <target_table> 
SET Proprerty0 = Value0
WHERE <predicate>
RETURNING Property0; 
```

很难确定，因为您提供的示例是如此抽象以至于毫无意义。

您还可以使用 wCTE，它允许更复杂的情况：

```
WITH updated_rows AS (
    UPDATE <target_table> 
    SET Proprerty0 = Value0
    WHERE <predicate>
    RETURNING row_id, Property0
)
SELECT row_id, some_computed_value_from_property
FROM updated_rows; 
```

请参阅[公用表表达式（`WITH`查询）](http://www.postgresql.org/docs/current/static/queries-with.html)和[depesz 关于 wCTE 的文章](http://www.depesz.com/2011/03/16/waiting-for-9-1-writable-cte/)。

* * *

**更新**基于问题中的一些附加细节，这是一个使用的演示`UPDATE ... RETURNING`：

```
CREATE TABLE upret_demo(
  id serial primary key,
  somecol text not null,
  last_updated timestamptz
);

INSERT INTO upret_demo (somecol, last_updated) VALUES ('blah',current_timestamp);

UPDATE upret_demo
SET
  somecol = 'newvalue',
  last_updated = current_timestamp
WHERE last_updated = '2012-12-03 19:36:15.045159+08'    -- Change to your timestamp
RETURNING 
  somecol || '_computed' AS a,
  'totally_new_computed_column' AS b; 
```

第一次运行时输出：

```
 a         |              b              
-------------------+-----------------------------
 newvalue_computed | totally_new_computed_column
(1 row) 
```

再次运行时，它将不起作用并且不返回任何行。

如果您在结果集中有更复杂的计算要做，您可以使用 wCTE，这样您就可以 JOIN 更新的结果并执行其他复杂的事情。

```
WITH upd_row AS (
  UPDATE upret_demo SET 
    somecol = 'newvalue',
    last_updated = current_timestamp
  WHERE last_updated = '2012-12-03 19:36:15.045159+08'
  RETURNING id, somecol, last_updated
)
SELECT
  'row_'||id||'_'||somecol||', updated '||last_updated AS calc1,
 repeat('x',4) AS calc2
FROM upd_row; 
```

换句话说：`UPDATE ... RETURNING`直接使用 来生成计算的行，或者在可写的 CTE 中用于更复杂的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-13T17:47:34.113

一般来说，这个问题的答案取决于所使用的驱动程序的类型。

如果应用程序使用 libpq，PQcmdTuples() 函数会执行所需的操作。libpq 之上的其他库需要在此函数之上有一些包装器。

对于 JDBC，Statement.executeUpdate() 方法似乎可以胜任。

ODBC 为类似目的提供了 SQLRowCount() 函数。

# xml - 在 XML 中表示空属性值的标准方法？

> ID：13647932
> 
> 赞同：11
> 
> 时间：2012-11-30T15:14:49.773
> 
> 标签：xml

> **可能重复：**
> [表示空 XML 元素的正确方法是什么？](https://stackoverflow.com/questions/774192/what-is-the-correct-way-to-represent-null-xml-elements)

有没有一种标准的方法来表示 XML 中的空属性值？

我们有一个现有的 XML 格式，它需要类似于以下内容的片段：

```
<items>
  <item key="key_goes_here" value="value_goes_here" />
  ...
</items> 
```

原始格式没有预料到需要区分空值和空字符串值——然而，这很重要（现在）。

我的直觉说要创建一种新格式，该格式避免可空值的属性，并为它们使用元素：

```
<items>
  <item key="key_goes_here_and_is_never_null">
    <value xsi:nil="true" /> 
  </item>
</items> 
```

*也就是说，如果有一种标准*方法可以在 XML 中表示空属性值，我宁愿保留属性。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T15:19:52.447

我不知道任何标准，但如何使用

```
<item key="key" /> 
```

对于没有价值的物品，

```
<item key="key">
    <value /> 
</item> 
```

对于具有空字符串作为值的项目和

```
<item key="key">
    <value>This is the value</value> 
</item> 
```

对于真正有价值的物品？

# c# - 提交表单后无法执行操作

> ID：13647933
> 
> 赞同：1
> 
> 时间：2012-11-30T15:14:50.923
> 
> 标签：c#, asp.net-mvc-3

我有以下问题（我花了很多时间寻找解决方案）。

“创建”按钮有一个单击事件，该事件调用“主页”控制器上的“测试”操作。

一切正常。

当我点击“保存”按钮提交表单时，效果很好。

但是在我提交表单后，我的“创建”按钮停止工作。“创建”按钮确实有点击事件，但“测试”操作无法访问？

索引.cshtml

```
<script type="text/javascript">
     $(document).ready(function () {
         $("#create").click(function () {
             $.ajax({
                 type: "POST",
                 traditional: true,
                 url: 'Home/Test',
                 dataType: "html",
                 success: function (data) {
                    alert('Succes!')
                 },
                 error: function () {
                     alert('A problem ocurred!!');
                 }
             });

         });
     });
</script>

 <input id="create" type="button" value="Create" />
  @using (Html.BeginForm("SaveForm", "Home"))
  {
      <input type="submit" value="Save" />
  } 
```

家庭控制器.cs

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        ViewBag.Message = "Welcome to ASP.NET MVC!";

        return View();
    }

    public ActionResult Test() 
    {
        return Content("Test result");
    }

    public ActionResult SaveForm()
    {
        return View("Index");
    }
    public ActionResult About()
    {
        return View();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T15:39:49.363

您的所有操作都只是 GET。向您的 POST 操作添加`[HttpPost]`（仅限 POST）或`[AcceptVerbs(HttpVerbs.Post, HttpVerbs.Get)]`（GET 或 POST）属性。

```
[HttpPost]
public ActionResult Test() 
{
    return Content("Test result");
}

[HttpPost]
public ActionResult SaveForm()
{
    return View("Index");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T15:46:44.300

有2个问题：

1）您的方法上方没有 [HttpPost]

2）您没有向您的控制器发送任何数据

使用匿名类在表单中添加 id：

```
@using (Html.BeginForm("SaveForm", "Home", new {id = "testform"})) 
```

然后重写ajax请求：

```
<script type="text/javascript">
     $(document).ready(function () {
         $("#create").click(function () {
             $.ajax({
                 type: "POST",
                 data: $("#testform").serialize();
                 url: 'Home/Test',
                 dataType: "html",
                 success: function (data) {
                    alert('Succes!')
                 },
                 error: function () {
                     alert('A problem ocurred!!');
                 }
             });

         });
     });
</script> 
```

让我知道它是否有效:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T13:35:57.910

最终，我使用 Ajax.BeginForm 而不是 Html.BeginForm，将 [HttpPost] 属性添加到我的操作中，并使用 RedirectToAction("Index") 而不是 PartialView。这解决了我的问题。再次感谢您的提示！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T15:16:34.113

要创建实体，您必须通过回发或 ajax 将数据提交到服务器，就像您的情况一样。现在您的代码中有一些矛盾:)

```
1\. Why are you calling one action as form action and another through
   ajax? Because since your button will post back, your ajax call won't
   fire the success and error handlers. To solve this either use <button> or 
```

`$("#create").click(function (e) { e.preventDefault();//Some code});`

```
2\. If you want to use ajax, write it like this. Also write [HttpPost] on 
   your action. This indicates that this action can be called by post requests.
   This is a required step, whether or not you are using ajax. 
```

我希望这能解决你的问题。

# c# - 如何使用剪贴板将数据从 .NET 应用程序移动到 Excel？

> ID：13647945
> 
> 赞同：1
> 
> 时间：2012-11-30T15:15:39.037
> 
> 标签：c#, .net, excel

Excel 从剪贴板接收数据的首选格式是什么？数据位于 C#/.NET 应用程序中。

我一直以 CSV 格式保存到剪贴板，但现在我想开始提供 Excel 格式信息（例如，使某些单元格加粗）。CSV 格式已经不够用了。

* * *

当我从 Excel 复制时，剪贴板有 24 种格式！

```
System.Windows.Clipboard.GetDataObject().GetFormats().Dump(); 
```

*   增强元文件
*   System.Drawing.Imaging.Metafile
*   元文件图片
*   位图
*   System.Drawing.Bitmap
*   System.Windows.Media.Imaging.BitmapSource
*   Biff12
*   Biff8
*   Biff5
*   符号链接
*   数据交换格式
*   XML 电子表格
*   HTML 格式
*   文本
*   Unicode文本
*   系统字符串
*   CSV
*   富文本格式
*   嵌入源
*   对象描述符
*   链接源
*   链接源描述符
*   关联
*   格式129

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T15:37:53.077

我相信您所看到的是，当您以多种不同格式复制到剪贴板时，Excel 会根据您最终粘贴的位置准备数据。您可能需要查看 Excel 的 Office XML 格式。

请参阅 Wikipedia 上的此[示例 xml](http://en.wikipedia.org/wiki/Microsoft_Office_XML_formats#Excel_XML_Spreadsheet_example)，以更好地了解该格式。虽然我以前从未使用过它，但我很确定 Excel 只会让您直接粘贴 XML（如果它是正确的模式）。

# wcf - MessageContract 类中的标头字段在 Windows Phone 应用程序中不可用

> ID：13647946
> 
> 赞同：2
> 
> 时间：2012-11-30T15:15:40.870
> 
> 标签：wcf, windows-phone, messagecontract

我有 WCF 服务。在该服务中，我定义了标记为 MessageContract 属性的类：

```
[MessageContract]
public class RemoteFileInfo : IDisposable
{
    [MessageHeader(MustUnderstand = true)]
    public string FileName;

    [MessageHeader(MustUnderstand = true)]
    public long Length;

    [MessageHeader(MustUnderstand = true)]
    public Picture Picture;

    [MessageBodyMember(Order = 1)]
    public System.IO.Stream FileByteStream;

    public void Dispose()
    {
        if (FileByteStream != null)
        {
            FileByteStream.Close();
            FileByteStream = null;
        }
    }
} 
```

我对标记为 MessageHeader 属性的字段有问题。在 WPF 应用程序（客户端）中，所有字段都是可见的，但是当我在 Windows Phone 应用程序中使用此服务时，标记为 MessageHeader 的字段不可见。只有正文字段可用。标题字段是否也可用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T20:34:55.977

好吧，似乎 WP 不直接支持 MessageContract。[所以，你可以在这个论坛的另一个帖子](https://stackoverflow.com/questions/13942113/silverlight-is-not-liking-my-wcf-messagecontract-why)中看到解决方案:)

# html - 单击路径以显示/隐藏 div

> ID：13647948
> 
> 赞同：0
> 
> 时间：2012-11-30T15:15:44.707
> 
> 标签：html, raphael

我正在尝试使用 Raphael 创建一个相当简单的界面，如果您单击给定路径，您将获得相应的 div 出现。由于我可能会使用不规则形状，因此我将在 Illustrator 中创建形状，然后使用 readysettraphael.com 转换为路径，但如果有更好的方法，我也愿意。

我基本上是想捕捉您[在此处](http://codifydesign.com/chris/lynda/samples/course-0001/)看到的功能，但使用 raphael 对象作为按钮。

[http://jsfiddle.net/4xV7b/](http://jsfiddle.net/4xV7b/)

这是我目前的小提琴——我不明白在 mouseclick 事件期间需要发生什么来显示/隐藏相应的 div。

```
el.click(function() {
   //mysterious voodoo magic goes here

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T15:41:49.757

您可以使用纯 javascript 来显示一个 div：

```
document.getElementById("redthing").style.display = "block"; 
```

如果你想要动画，你可以尝试使用 jQuery，甚至可以使用 css 手动创建它们

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T18:59:22.820

如果您使用的是 Raphael 2，您可以使用该`data`方法将任意信息与您的元素一起存储——如[本例所示](http://jsfiddle.net/kevindivdbyzero/NY6wJ/)。

本质上，当您创建每条路径时，您只需调用

```
el.data( 'div_id', 'greenthing' ); 
```

然后，当单击该元素时，您可以使用从元素中检索指示的 div

```
el.click( function()
    {
        var div_id = this.data( 'div_id' );
        // Display the div here.  Josemando's approach is perfectly cool and will work universally.
    } ); 
```

如果你想确保一次只显示一个 div，你可以这样做（原始但有效）：

```
el.click( function()
    {
        rsr.forEach( function( subEl )
            {
                var divId = subEl.data('div_id' );
                if ( divId && document.getElementById( divId ) )
                    document.getElementById( divId ).style.display = 'none';
            } );
    } ); 
```

当然，还有其他方法可以剥那只猫的皮。

您可能还会发现，如果将所有特定于形状的数据放入结构化对象中，然后在循环中渲染每个路径，您的路径构造代码会更易于管理。我在上面提供的小提琴演示了这种技术，一旦你拥有多个形状，它就会很快得到回报。

# c# - ListBox 到字符串的 ObservableCollection 的简单 WPF 数据绑定

> ID：13647951
> 
> 赞同：0
> 
> 时间：2012-11-30T15:15:52.187
> 
> 标签：c#, .net, wpf, data-binding, .net-4.0

好吧，我就是不明白。请告诉我为什么我的 ListBox 中没有任何项目（现在应该是两个字符串“empty”和“stuff”）：

XAML：

```
<Window.DataContext>
    <Windows:SettingsWindowModel x:Name="model"/>
</Window.DataContext>

<Window.Resources>
    <DataTemplate x:Key="ListItemTemplate">
        <ListBoxItem Content="{Binding}"  />
    </DataTemplate>
</Window.Resources>

<ListBox Name="listBoxActivities" SelectionChanged="ListBoxActivitiesSelectionChanged"
 ItemsSource="{Binding Path=IgnoredActivities}"
 HorizontalAlignment="Left" VerticalAlignment="Top" MinHeight="40" MinWidth="200"
 Padding="5,100,5,0" Height="100" Margin="0,207,0,0" ItemTemplate="{StaticResource ListItemTemplate}" /> 
```

在设置窗口模型中：

```
 private ObservableCollection<String> _ignoredActivities;
    public ObservableCollection<String> IgnoredActivities
    {
        get
        {
            if (_ignoredActivities == null)
            {
                // empty
                _ignoredActivities = new ObservableCollection<String>() { "empty","stuff" };
            }
            return _ignoredActivities;
        }
    } 
```

还有什么需要知道的吗？我忘记了什么？

编辑：也许我应该补充一点，VisualStudio + ReSharper 也没有显示下划线和编译错误。甚至没有警告。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T08:28:06.400

对不起，数据一直都在那里。问题在于视觉细节。填充也应用于 ListBox（或项目）的子容器，**因此项目不在列表顶部。因为我在 ListBox 上只有一个高度，所以项目总是低于 ListBox 的可见高度**。调试的东西。无论如何感谢您的回答！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T15:25:10.230

1）您不需要设置 DataTemplate

2）你确定视图的DataContext（aaaaa.xaml.cs）是ViewModel（bbbbb.cs，包含IgnoredActivities）吗？

它应该是这样的：

aaaaa.xaml：

```
<ListBox ItemsSource="{Binding IgnoredActivities}" /> 
```

aaaaa.xaml.cs：

```
public partial class aaaaa : Window, INotifyPropertyChanged
{
    public MainWindow()
    {
        InitializeComponent();
        this.DataContext = new bbbbb();
    }
} 
```

bbbbb.cs：

```
 public class bbbbb : INotifyPropertyChanged
    {
        public bbbbb()
        {
            IgnoredActivities.Add("empty");
            IgnoredActivities.Add("stuff");
        }

        private ObservableCollection<String> _ignoredActivities;
        public ObservableCollection<String> IgnoredActivities
        {
            get
            {
                if (_ignoredActivities == null)
                {
                    // empty
                    _ignoredActivities = new ObservableCollection<String>() { "empty","stuff" };
                }
                return _ignoredActivities;
            }
        }

            #region INotifyPropertyChanged Members

            public event PropertyChangedEventHandler PropertyChanged;
            private void RaisePropertyChanged(string _Prop)
            {
                if (PropertyChanged != null)
                    PropertyChanged(this, new PropertyChangedEventArgs(_Prop));
            }

            #endregion
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T15:27:01.443

使用此语句，您将绑定到 Window 名为“model”的控件中的属性“IgnoredActivities”。

```
ItemsSource="{Binding ElementName=model, Path=IgnoredActivities}" 
```

使用 ViewModel 时，将它们设置为控件的 DataContext：

```
<ListBox ItemsSource="{Binding IgnoredActivities}">
    <ListBox.DataContext>
        <local:MyViewModel/>
    </ListBox.DataContext>        
</ListBox> 
```

未指定源的绑定 ("{Binding PathToMyPropert}") 默认为控件的 DataContext，它是从父控件继承的。因此，在您的情况下，您可以将 ViewModel 设置为 Window 的 DataContext ，以便其所有子级都可以使用它：

```
<Window>
    <Window.DataContext>
        <local:MyViewModel/>
    </Window.DataContext>        

    <ListBox ItemsSource="{Binding IgnoredActivities}"/>    
</Window> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T15:51:32.140

摆脱那个`ElementName`绑定属性。它用于绑定到 WPF 控件。简单设置`ItemsSource={Binding IgnoredActivities}`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-30T16:12:43.607

尝试如下：

```
<ItemsControl ItemsSource="{Binding Path=IgnoredActivities}">
    <ItemsControl.ItemsPanel>
        <ItemsPanelTemplate>
            <ListBox />
        </ItemsPanelTemplate>
    </ItemsControl.ItemsPanel>
    <ItemsControl.ItemTemplate>
       <DataTemplate>
           <ListBoxItem Content="{Binding}"  />
       </DataTemplate>
    </ItemsControl.ItemTemplate>
</ItemsControl> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-03T02:32:26.177

还尝试在后面的代码中为控件设置 DataContext。

```
Xaml       - <ListBox Name="myListBox" ItemsSource="{Binding IgnoredActivities}"/>    
CodeBehind - myListBox.DataContext=this; 
```

# c# - 如何创建上传文件的功能

> ID：13647952
> 
> 赞同：0
> 
> 时间：2012-11-30T15:15:51.493
> 
> 标签：c#, visual-studio-2010, sharepoint-2010

我真的不习惯问一些问题。但是现在要4天了，我仍然坚持这个问题。

我想使用 Visual Studio 2010 创建一个功能，它允许我将一些文件上传和替换到 Sharepoint 2010 网站。Visual Studio 和 C# 对我来说是全新的，但是有了我们的好朋友 Google，我可以应付。

例如，我可以制作一个功能来更改我的网站标题。但我真的不知道如何上传和替换一些文件（例如 .css 或 .js ）。我什至不知道从哪里开始，我应该寻找什么。

你们有什么线索可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T15:54:58.517

你能详细说明你到底想要做什么吗？我可以为您提供在 SharePoint 中上传文件的代码，但如果我看到您尝试上传哪些文件，我想知道您想如何使用它们。

如果您尝试添加 css 或 js 文件以在您自己的 webpart 中使用它们，您应该为“布局”添加一个映射文件夹并将这些文件放在该文件夹中。SharePoint 有很多不同的可能性，所以也许一开始您应该查看一些动手教程来创建功能、自定义 Web 部件……并且您的很多问题都将在这些教程中得到解答。

祝你好运！

# algorithm - 带有自定义内核的 Matlab 中的 MeanShift

> ID：13647953
> 
> 赞同：3
> 
> 时间：2012-11-30T15:15:54.537
> 
> 标签：algorithm, cluster-analysis, matlab, pattern-recognition

是否有一个用 Matlab 编写的 MeanShift 实现，它允许使用自定义内核？

# c++ - C++0x 线程没有加速

> ID：13647958
> 
> 赞同：8
> 
> 时间：2012-11-30T15:16:13.057
> 
> 标签：c++, multithreading, c++11, parallel-processing, future

我编写了一个程序，用于使用 c++0x 线程搜索数组中的最大值（用于学习目的）。为了实现，我使用了标准*线程*和*未来*类。但是，并行化函数始终显示与非并行化函数相同或更差的运行时间。

代码如下。我尝试将数据存储在一维数组、多维数组中，最终得到了几个数组。然而，没有任何选择能产生好的结果。我尝试从 Eclipse 和命令行编译和运行我的代码，但仍然没有成功。我也尝试过没有使用数组的类似测试。并行化只提供了 20% 的速度。从我的角度来看，我运行非常简单的并行程序，没有锁，几乎没有资源共享（每个线程都在自己的数组上运行）。什么是瓶颈？

我的机器有 Intel Core i7 处理器 2.2 GHz 和 8 GB RAM，运行 Ubuntu 12.04。

```
const int n = 100000000;

int a[n], b[n], c[n], d[n];

int find_max_usual() {
    int res = 0;
    for (int i = 0; i < n; ++i) {
        res = max(res, a[i]);
        res = max(res, b[i]);
        res = max(res, c[i]);
        res = max(res, d[i]);
    }
    return res;
}

int find_max(int *a) {
    int res = 0;
    for (int i = 0; i < n; ++i)
        res = max(res, a[i]);
    return res;
}

int find_max_parallel() {
    future<int> res_a = async(launch::async, find_max, a);
    future<int> res_b = async(launch::async, find_max, b);
    future<int> res_c = async(launch::async, find_max, c);
    future<int> res_d = async(launch::async, find_max, d);
    int res = max(max(res_a.get(), res_b.get()), max(res_c.get(), res_d.get()));
    return res;
}

double get_time() {
    timeval tim;
    gettimeofday(&tim, NULL);
    double t = tim.tv_sec + (tim.tv_usec / 1000000.0);
    return t;
}

int main() {
    for (int i = 0; i < n; ++i) {
        a[i] = rand();
        b[i] = rand();
        c[i] = rand();
        d[i] = rand();
    }
    double start = get_time();
    int x = find_max_usual();
    cerr << x << " " << get_time() - start << endl;
    start = get_time();
    x = find_max_parallel();
    cerr << x << " " << get_time() - start << endl;
    return 0;
} 
```

时序表明 find_max_parralel 中几乎所有的时间都被

```
int res = max(max(res_a.get(), res_b.get()), max(res_c.get(), res_d.get())); 
```

编译命令行

```
g++ -O3 -std=c++0x -pthread x.cpp 
```

**更新。**问题解决了。我通过相同的测试得到了想要的结果。4 个线程提供大约 3.3 的加速，3 个线程提供大约 2.5 的加速，2 个线程在 1.9 的加速下表现几乎理想。我刚刚用一些新的更新重新启动了系统。我没有看到 cpu 负载和运行 porgrams 有任何显着差异。

感谢大家的帮助。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-30T15:17:46.913

您必须明确设置`std::launch::async`.

```
future<int> res_c = async(std::launch::async, find_max, c); 
```

如果你省略了标志`std::launch::async | std::launch::deferred`是假定的，它让实现来选择是异步启动任务还是延迟启动任务。

当前版本的 gcc 使用`std::launch::deferred`，MSVC 有一个运行时调度程序，它决定运行时任务应该如何运行。

另请注意，如果您想尝试：

```
std::async(find_max, c); 
```

这也会阻塞，因为析构函数`std::future`等待任务完成。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-01T01:53:36.957

我刚刚用 gcc-4.7.1 运行了相同的测试，线程版本大约快 4 倍（在 4 核服务器上）。所以问题显然不在于 std::future 实现，而在于选择不适合您的环境的线程设置。如上所述，您测试的不是 CPU，而是内存密集型，因此瓶颈肯定是内存访问。您可能希望运行一些 CPU 密集型测试（例如以高精度计算 PI 编号）以正确地对线程进行基准测试。

如果不尝试不同数量的线程和不同的数组大小，很难说瓶颈到底在哪里，但可能有一些事情在起作用： - 你可能有 2 通道内存控制器（它是 2 或 3），所以超过 2 个线程只会引入围绕内存访问的额外争用。因此，您关于没有锁定和没有资源共享的论文是不正确的：在硬件级别上存在围绕并发内存访问的争用。- 非并行版本将通过预取数据到缓存中进行有效优化。另一方面，在并行版本中，您最终可能会进行密集的上下文切换，从而导致 CPU 缓存崩溃。

对于这两个因素，如果您将线程数调低到 2，您可能会看到加速。

# java - 如何使用注解（Actions）来认证/授权用户？

> ID：13647959
> 
> 赞同：1
> 
> 时间：2012-11-30T15:16:21.363
> 
> 标签：java, playframework-2.0

在 play framework 2 中，zentasks 示例展示了如何进行基本身份验证。他们继承了 Security.Authenticator 并添加了额外的授权方法。我觉得有点乱，因为每个方法都需要用 if 语句包装。

如何将[方法 isOwnerOf 和 isMemberOf](https://github.com/playframework/Play20/blob/master/samples/java/zentasks/app/controllers/Secured.java)转换为[Actions](http://www.playframework.org/documentation/2.0.3/JavaActionsComposition)？这将允许我简单地注释方法。目前，我正在努力创建一个可以接受该方法参数的注释。即使我对参数进行了注释，那么在调用 Action 时我也不知道如何获取它。

如果有更好的方法，我会很高兴听到这样的消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T16:13:10.527

准备好使用完整堆栈进行身份验证/授权 - [Play Authenticate](https://play-authenticate.herokuapp.com/)

*   它包括死锁
*   它提供常见的提供商，如 Facebook、Twitter、Goolge 等
*   它提供通用密码+自己的提供商
*   它支持多语言（也在信息邮件中）
*   它包括即用型 Java 示例

# c# - SqlDataReader 参数不起作用

> ID：13647964
> 
> 赞同：-2
> 
> 时间：2012-11-30T15:16:38.420
> 
> 标签：c#, sql, parameters, parameter-passing, sqldatareader

我有一个 Windows 表单，我要求用户在 textbox1 中输入 pcname，然后尝试使用`SqlDataReader`从数据库中读取来获取 pc ipaddress，然后将 pc 驱动器映射到我的本地 pc。

但是由于某种原因，当我在 SQL 参数中使用文本框时，它不起作用。但是当我用`textbox1.text`实际的 pcname 替换它时它工作正常。希望有人可以帮助我找出参数无法正常工作的原因。

这是我的代码：

```
public void button1_Click(object sender, EventArgs e)
{
    string results = "";

    using (SqlConnection cs = new SqlConnection(@"***removed connection string***"))
    {
        cs.Open();

        string query = "select stationipaddress from station where stationname = @StationName";

        using (SqlCommand cmd = new SqlCommand(query, cs))
        {
            // Add the parameter and set its value -- 
            cmd.Parameters.AddWithValue("@StationName", textBox1.Text);

            using (SqlDataReader dr = cmd.ExecuteReader())
            {
                while (dr.Read())
                {
                    label3.Text = dr.GetSqlValue(0).ToString();
                    results = dr.GetValue(0).ToString();
                    MessageBox.Show(dr.GetValue(0).ToString());
                    MessageBox.Show(results);
                }

                string myvar = string.Format(@"use S: \\" + label3.Text + "\\c$\logs 0A36303 /user:admin", label3.Text);

                Process p = new Process();
                p.StartInfo.FileName = "net.exe";
                p.StartInfo.Arguments = (myvar);
                p.StartInfo.UseShellExecute = false;
                p.StartInfo.RedirectStandardOutput = true;
                p.StartInfo.RedirectStandardInput = true;
                p.StartInfo.CreateNoWindow = true;
                p.Start(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T16:22:38.173

也许如果你把你的代码分开在不同的行，一个用来设置你的参数，一个用来添加它，你可以更好地看到问题出在哪里。像这样的东西：

```
SqlParameter param1 = new SqlParameter("@StationName", SqlDbType.NVarChar, textBox1.Text.length);
param1.Value = textBox1.Text;
cmd.Parameters.Add(param1); 
```

至少更容易看到调试器上发生了什么。

# visual-studio-2010 - 如何按用户搜索变更集

> ID：13647965
> 
> 赞同：5
> 
> 时间：2012-11-30T15:16:40.353
> 
> 标签：visual-studio-2010, visual-studio, version-control, tfs

有没有办法按用户搜索或过滤变更集？

历史视图似乎非常不灵活。

就此而言，有没有办法通过任何方式过滤变更集？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-30T15:21:35.137

您能否在“团队资源管理器”选项卡的“团队成员”下看到您的用户列表？如果是这样，则右键单击用户并选择“显示签入历史记录”。这将使您能够查看所选用户签入的变更集的完整列表。

Source Control Explorer 选项卡中还有一个“Find Changesets”工具栏按钮![在此处输入图像描述](../Images/4619caa64559ff8e15c8795b53463c90.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T15:24:32.957

我不知道如何按用户搜索，但关于您关于现有过滤器的问题的第二部分：当您执行搜索（右键单击“在源代码管理中查找”）或“合并到特定版本”时选项，您可以选择按变更集搜索，然后搜索变更集范围或日期范围。

# javascript - iphone 5 使用 CSS3 和 JavaScript 的 Retina 图像

> ID：13647975
> 
> 赞同：0
> 
> 时间：2012-11-30T15:17:10.003
> 
> 标签：javascript, css

我的所有图像尺寸标准都是 288W x 345H。对于视网膜 576W x 690H。

我正在为 iphone 5 应用程序使用 CSS3 和 JavaScript (Cordova2.1/Phonegap)。

我已经为 CSS3 视网膜尝试过这个，但它不起作用

```
 background-size: 288px auto; 
```

HTML：

```
 <div id='slider' class='swipe'>
<ul>
<li style='display:block'><div><img style="vertical-align: bottom" src="images/1a.png" border="0" ></div></li>
<li style='display:block'><div><img style="vertical-align: bottom" src="images/1b.png" border="0" ></div></li>
<li style='display:block'><div><img style="vertical-align: bottom" src="images/1c.png" border="0" ></div></li>
<li style='display:block'><div><img style="vertical-align: bottom" src="images/1d.png" border="0" ></div></li>
<li style='display:block'><div><img style="vertical-align: bottom" src="images/1e.png" border="0" ></div></li>
<!-- <li style='display:none'><div><img style="vertical-align: bottom" alt="" title="" border="0" class="shadow" /></div></li> -->
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T00:53:15.937

背景大小适用于背景。 [http://www.w3.org/TR/2002/WD-css3-background-20020802/#background-size](http://www.w3.org/TR/2002/WD-css3-background-20020802/#background-size)

在这里，您插入带有`<img>`标签的图像，因此 background-size 无法解决您的问题。

**您有 2 个解决方案：** 首先您**更改 DOM 并添加带有背景 CSS 的图像**，您将通过以下方式解决问题：

```
@media only screen and (-webkit-min-device-pixel-ratio: 1.5),
   only screen and (min--moz-device-pixel-ratio: 1.5),
   only screen and (min-resolution: 240dpi) {
  [class*="pictos-"] {
    background-image: url("1a-big.png");
    -moz-background-size: 288px 345px;
    -o-background-size: 288px 345px;
    -webkit-background-size: 288px 345px;
    background-size: 288px 345px;
  } 
```

}

**CSS3 解决方案的优点：** Retina 图像仅在 Retina 和高于 72dpi 的设备上加载。

**CSS3 解决方案的缺点：** 如果您有一个 CMS 后端，它就不可扩展 这对于可访问性和语义来说不是那么好

**或者以相同的分辨率 (288x345) 但使用 150 DPI 导出您的视网膜图像**。该文件会更大，但它应该可以工作。

**DPI 解决方案的优点：** 您只需管理一个图像，并且易于与 CMS 一起使用

**DPI 解决方案的缺点：** 您的文件要加载更大，这只影响高于 72dpi 的设备

无论如何，这个问题有javascript解决方案。

祝你好运

# javascript - 点击事件丢失？

> ID：13647977
> 
> 赞同：1
> 
> 时间：2012-11-30T15:17:15.083
> 
> 标签：javascript, javascript-events

我有一个网页（javascript），它有两种类型的事件：

*   画布中的单击事件（仅显示警报）。
*   每秒的周期性事件（由计时器触发）。

周期性事件忙了 200 - 300 毫秒（它正在启动同步 SOAP 调用）。

画布事件：

```
var c=document.getElementById("myCanvas");
 c.addEventListener('click', function(e) {alert('Click');},false); 
```

定期：

```
var timer1= new Timer(1000,"Refresh()"); // A library call

function Refresh()
{   
    timer1.stop();

    // Synchronous SOAP call would come here

    // with the results we draw the canvas again

    timer1.start();
} 
```

如果在进行 SOAP 调用时单击画布，则不会触发 click 事件，或者我假设是这样，因为未显示警报。

如果我在定期事件完成并再次调用它之前单击，则每次单击都会显示警报。

据我所知，如果在执行周期性事件时生成了单击事件，则应该延迟到另一个事件完成。

什么可能导致问题？

PD 我正在使用 Firebug（在 Firefox 上）来了解何时进行 SOAP 调用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T15:25:43.360

同步调用会阻塞 I/O，因此不会触发警报。由于您正在等待回电，因此在此期间发生的任何操作都将被忽略。

这篇文章可能会有所帮助：[http ://ejohn.org/blog/how-javascript-timers-work/](http://ejohn.org/blog/how-javascript-timers-work/)

> 由于浏览器中的**所有**JavaScript 都在**单个**线程上执行，因此异步事件（例如**鼠标单击**和计时器）仅在执行过程中有空缺时才会运行。
> 
> *   JavaScript 引擎只有一个线程，强制异步事件排队等待执行。
> *   setTimeout 和 setInterval 在执行异步代码的方式上有着根本的不同。
> *   如果 atimer 被阻止立即执行，它将被延迟到下一个可能的执行点（这将比所需的延迟长）。
> *   如果间隔需要足够长的时间来执行（比指定的延迟时间长），则间隔可以无延迟地连续执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T15:47:17.797

因为默认情况下，UI 事件和您在 Javascript 中执行的所有其他操作都在单个线程上执行，所以您所经历的一切都是意料之中的。但这只是原因...

一旦您了解了原因，您就可以找到解决方案的一半：如果您*必须*进行同步 SOAP 调用，这似乎是这种情况，您将不得不为它们使用不同的线程。输入网络工作者...

要创建一个新的 Web 工作者，您调用 Worker() 构造函数，指定要在工作者线程中执行的脚本的 URI。

```
var worker = new Worker('my_task.js'); 
```

要接收来自工作人员的通知，请将工作人员的 onmessage 属性设置为适当的事件处理函数。

```
worker.onmessage = function(event) {
    console.log("Called back by the worker!\n");
}; 
```

在这里你可以找到更多：

[http://en.wikipedia.org/wiki/Web_worker](http://en.wikipedia.org/wiki/Web_worker)

引用上述来源：Safari、Chrome、Opera、Internet Explorer（版本 10）和 Mozilla Firefox 目前支持 Web Worker。Safari for iOS 5 和 Android 版本 2.0 和 2.1 支持 Web Worker。

关于 Android 支持：请参阅此处：[为什么在 2.2 及更高版本中从 Android 浏览器中删除了 HTML5 Web Workers 支持？](https://stackoverflow.com/questions/7523745/why-was-html5-web-workers-support-removed-from-the-android-browser-in-versions)

举个涉及 IO 的例子：

[https://developer.mozilla.org/en-US/docs/Using_workers_in_extensions](https://developer.mozilla.org/en-US/docs/Using_workers_in_extensions)

希望这能帮助您解决问题。

免责声明：一般来说，避免学习如何执行异步通信是很容易的，而网络工作者似乎是做到这一点的好方法。我并不是在提倡这种方法，而只是向显然别无选择的人提出解决方案。一旦您习惯了异步通信，它就会变得非常容易，并将帮助您构建更好的网站。jQuery 为异步 IO 提供了很好的支持。

# opengl - 从上方显示相机？

> ID：13647990
> 
> 赞同：1
> 
> 时间：2012-11-30T15:18:01.613
> 
> 标签：opengl, jogl

我正在创建一堆房间，需要从第一人称（我已经介绍过）和上方显示它们以显示房间内的内容。问题是我不知道如何为上面的视图切断屋顶，所以它只会显示里面的东西，而不是屋顶/天花板。

这是我到目前为止所拥有的：

```
public void display(GLAutoDrawable drawable)
{
    GL2  gl  = drawable.getGL().getGL2();
    gl.glClear(GL.GL_COLOR_BUFFER_BIT | GL.GL_DEPTH_BUFFER_BIT);
    // the "up" direction

    for ( int i=0; i<2; i++ ){
        //display first-person view here
        if(i == 0){
            gl.glViewport(0, 0, 600, 600);                  

            gl.glMatrixMode(GL2.GL_MODELVIEW);
            gl.glLoadIdentity();
            glu.gluPerspective(90., 1., .5, 100.);      

            gl.glLoadIdentity();
            glu.gluLookAt(eyex, eyey, eyez,                 
                    eyex+Math.cos(Math.toRadians(viewangle)),   
                    eyey, 
                    eyez-Math.sin(Math.toRadians(viewangle)),   
                    0f,1f,0f);  

        }

        gl.glClear(GL.GL_DEPTH_BUFFER_BIT);

        //display from above view here
        if(i == 1){
            gl.glViewport(600, 0, 600, 600);
            gl.glMatrixMode(GL2.GL_MODELVIEW);
            gl.glLoadIdentity();
            glu.gluPerspective(90., 1., .5, 100.);      

            gl.glLoadIdentity();

            glu.gluLookAt(59, 90, 59.999,               
                    60, 0, 60,  
                    0f,1f,0f);  
        }

        room1.draw(gl);
        room2.draw(gl);
        room3.draw(gl);
        room4.draw(gl);
        room5.draw(gl);
        room6.draw(gl);
        room7.draw(gl);

        creature.draw(gl);
    }

    int error = gl.glGetError();
    if (error != GL.GL_NO_ERROR)
        System.out.println("OpenGL Error: " );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T15:59:47.197

您可以尝试添加剪切平面 (glClipPlane) 来切断屋顶等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T23:27:22.560

一些引擎使第三人称摄像机到玩家的距离可变（如果有一些障碍物，摄像机会更靠近玩家）。您可以通过反向光线拾取（从玩家到最大相机位置）找到距离。

# java - 更新 Tomcat LIb 文件夹

> ID：13647991
> 
> 赞同：2
> 
> 时间：2012-11-30T15:18:02.690
> 
> 标签：java, tomcat, jersey

我有一个使用 Jersey Plugin 开发并部署在 Tomact 7 上的应用程序。我必须将项目中使用的所有 jar 导出到 Tomact 的 lib/ 文件夹中……但我不想……是否可以在不将 jar 导出到 Tomcat lib 文件夹的情况下部署我的应用程序。如果是，那么如何？

[https://t1.ap01.aws.af.cm/rest/person](https://t1.ap01.aws.af.cm/rest/person)

这是我的应用程序链接，如果未导出 lib/，则会出现以下错误：

```
HTTP Status 404 - Servlet Jersey REST Service is not available

type Status report

message Servlet Jersey REST Service is not available

description The requested resource (Servlet Jersey REST Service is not available) is not available.

Apache Tomcat/6.0.35 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T15:26:55.473

无论是使用 ant 还是 Maven 打包它们，您总是需要 lib 文件夹中所需的 jar - 您始终需要 lib 文件夹中的 jar。您看到的错误是应用程序找不到 Jersey jars。

罐子建成后应该是战争的一部分。

# ssrs-2008 - 隐藏报表元素之间的空格

> ID：13647994
> 
> 赞同：1
> 
> 时间：2012-11-30T15:18:13.273
> 
> 标签：ssrs-2008, reporting-services, subreport

我有一份带有各种子报告的报告。这些子报表位于表格单元格中。当子报表没有任何可用数据时，我会隐藏该子报表中的组件（表格、文本框、图表）。但是，这会产生一些空白空间，我需要消除这个空间。

我已经使用了**ConsumeContainerWhiteSpace**和**KeepTogether**属性，但空白区域仍然存在。

有什么删除空格的建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T16:37:54.080

隐藏或显示基于另一个报告结果的整行将是困难的，如果不是不可能的话。您将需要以某种方式在您的父报告中获取此数据。

我将创建子报表查询的缩减版本，该查询返回每个子报表的行数，但在父报表中。可能看起来像这样：

```
UserID   RecordCount
  Abby       3
  Bob        0
  Carl       1 
```

如果您使用的是 SSRS 2008r2，则可以使用查找功能来设置行可见性。例如，行可见性表达式可能是

```
=IIF(Lookup(Fields!UserID.Value,
       Fields!UserID.Value,
       Fields!RecordCount.Value,
       "LookupDatasetName") > 0,
    false,
    true) 
```

如果是 SSRS 的早期版本，则将该数据集加入到表的数据集中。

# jquery-ui - 可拖动的遏制替代方案

> ID：13647997
> 
> 赞同：2
> 
> 时间：2012-11-30T15:18:33.190
> 
> 标签：jquery-ui, jquery-ui-draggable

我正在使用 2 个 div，我可以将它们拖到同一个容器中。例如，我有左浮动 div1 和右浮动 div2，它们位于 divC 容器中。他们只能水平左右拖动。但右浮动 div2 不应越过 div1 的左侧。

```
<div id="divC">
    <div id="startpx" style="float:left;"></div>
    <div id="div1" style="float:left"></div>
    <div id="div2" style="float:right;"></div>
    <div id="endpx" style="float:right;"></div>
</div> 
```

我正在使用 startpx 和 endpx 作为 div，它将向我显示我现在正在开发的 something-o-meter 的 px。

当我添加另一个 div 时，它将在 div1 移动时刷新他的位置（在拖动功能中），并且也将是 div2 的包含。是的，它成功了，但是这个解决方案不适合我，因为主要容器正在移动 div2，而我正在移动 div1。

是否有任何其他替代方案可以解决此问题，或者我仍然可以使用可拖动的包含参数或任何其他可拖动的技巧或魔法来做到这一点。

# android - ARMv6、ARMv7 链接兼容性

> ID：13647999
> 
> 赞同：2
> 
> 时间：2012-11-30T15:18:38.103
> 
> 标签：android, ios6, static-linking, armv7, armv6

我知道兼容 ARMv7 的 CPU 可以执行 ARMv6 代码。

但是我可以在单个二进制文件中静态链接 ARMv6 代码和 ARMv7 代码吗？

我对 iOS 6 和 Android 平台都感兴趣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T12:06:58.630

Android 支持使用 ARMv6 和 ARMv7 构建胖二进制文件。

但是 ARMv7 设备上的 Android 4.0 存在错误，即使 ARMv7 可用，它也会加载 ARMv6 库。您必须以不同的方式命名库。解析 /proc/cpu 文件并获取有关 cpu 的信息并按名称加载正确的库。

Android NDK 有检测 CPU 的示例代码。