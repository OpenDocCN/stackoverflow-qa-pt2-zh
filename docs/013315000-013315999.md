# StackOverflow 问答 13315000-13315999

# c# - 即使我尝试转义所有内容，C# 也无法将我的正则表达式识别为字符串

> ID：13315007
> 
> 赞同：1
> 
> 时间：2012-11-09T19:52:58.037
> 
> 标签：c#, .net, regex

我使用 C# 并希望在我的代码中使用以下正则表达式：

```
sDatabaseServer\s*=\s*"([^"]*)" 
```

我把它放在我的代码中：

```
Regex databaseServer = new Regex(@"sDatabaseServer\s*=\s*"([^"]*)"", RegexOptions.Compiled | RegexOptions.IgnorePatternWhitespace); 
```

我知道您必须转义字符串引号内的所有括号和引号，但由于某种原因，以下仍然不起作用：

***工作版本：***

```
Regex databaseServer = new Regex(@"sDatabaseServer\s*=\s*""([^""]*)""", RegexOptions.Compiled | RegexOptions.IgnorePatternWhitespace); 
```

任何想法如何让 C# 将我的正则表达式视为一个字符串？我知道我知道....简单的问题...对不起，我还是 C# 的业余爱好者...

**已解决：谢谢各位！**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T19:55:48.070

当你逃脱括号时，你走得太远了。如果您希望它们成为正则表达式元字符（即捕获组），那么您不能对它们进行转义。否则，它们将匹配文字括号。

所以这可能是你正在寻找的：

```
@"sDatabaseServer\s*=\s*""([^""]*)""" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T19:56:37.540

```
string regex = "sDatabaseServer\\s*=\\s*\"([^\"]*)\"" 
```

在您的第一次尝试中，您忘记了转义您的报价。但是因为它是一个字符串文字，所以用 a 转义是`\`行不通的。

在我们的第二次尝试中，您转义了引号，但您没有转义`\`空格令牌所需的引号`\s`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T20:00:41.473

使用 \x22 而不是引号：

```
string pattern = @"sDatabaseServer\s*=\s*\x22([^\x22]*)\x22"; 
```

但

Ignorepattern whitespace 允许在正则表达式模式（# 符号）或分割成多行的模式中进行注释。你也没有；消除。

你所寻求的更好的模式是

```
string pattern =@"(?:sDatabaseServer\s*=\s*\x22)([^\x22]+)(?:\x22)"; 
```

(?: ) 是匹配的，但不捕获并充当解析器的锚。它还假设引号中至少有 1 个字符，因此使用 + 而不是 *。

# jquery - 带有 :not() 的 jQuery 选择器

> ID：13315012
> 
> 赞同：0
> 
> 时间：2012-11-09T19:53:16.787
> 
> 标签：jquery, selector

如何选择 td 中的所有“输入”元素，除了最后一个 td 元素中的输入？

```
'<div class="ui-widget" id="security-content">'+
    '<table class="ui-details-content ui-widget ui-widget-content">'+
    '<tr>'+
      '<td class="ui-state-default">{{Lng:options->user->security->newpass}}</td>'+
      '<td class="clear" id="sec-newpass" def=""><input type="text" class="ui-widget-content" value=""></td>'+
    '</tr>'+
    '<tr>'+
      '<td class="ui-state-default">{{Lng:options->user->security->repeatpass}}</td>'+
      '<td class="clear" id="sec-repeatpass" def=""><input type="text" class="ui-widget-content" value=""></td>'+
    '</tr>'+
    '<tr>'+
      '<td class="ui-state-default">{{Lng:options->user->security->passkey}}</td>'+
      '<td class="clear" id="sec-passkey"><input type="text" class="ui-widget-content" value="{{U:PassKey}}" disabled="disabled"></td>'+
    '</tr>'+
  '</table>'+
'</div>' 
```

这是我的选择器：

```
$(#security-content td input:not(:last)') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T19:56:02.477

选择除最后一个 td 内的输入之外的所有输入

```
$("#security-content td:not(:last) input")​ 
```

[jsfiddle](http://jsfiddle.net/ZJhRh/2/)

# java - iis 应用程序中的 Firefox 中未显示列标题隐藏

> ID：13315017
> 
> 赞同：0
> 
> 时间：2012-11-09T19:53:32.217
> 
> 标签：java, javascript

```
<TABLE align='center' BORDER=1 CELLPADDING=4 CELLSPACING=0 CLASS=cTable>
   <TR>
      <th CLASS=TH1 align='center' valign='top' colspan='15'>Input Summary</th>
      <th CLASS=TH1 align='center' valign='top'>
         <style type="text/css">
            .myLayersClass { position: relative; display:none; }
         </style>
         <span id='spanHideSummary' class='myLayersClass' style='display:none'>
            <a href='javascript:ToggleDisplay("spanSummary", "");javascript:ToggleDisplay("spanPPDates", "TsLinks");'>Hide</a>
         </span>
      </th> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T20:01:40.190

它不应该显示。根据`display:none`in`.myLayersClass`和[`style='display:none'`](http://www.w3.org/TR/CSS21/visuren.html#propdef-display)on span元素。为了修复它，您应该执行以下操作：

```
<th CLASS=TH1 align='center' valign='top'>
         <style type="text/css">
            .myLayersClass { position: relative;  }
         </style>
         <span id='spanHideSummary' class='myLayersClass'>
            <a href='javascript:ToggleDisplay("spanSummary", "");javascript:ToggleDisplay("spanPPDates", "TsLinks");'>Hide</a>
         </span>
      </th> 
```

此外，`javascript:...`在 href 中是个[坏主意](https://stackoverflow.com/q/2479557/1558311)。有`onclick`活动。最好做这样的事情（好吧，即使这不是最好的解决方案）：

```
<a href='#' onclick="ToggleDisplay('spanSummary', ''; ToggleDisplay('spanPPDates', 'TsLinks'); return false;'>Hide</a> 
```

此外，样式最好位于标题标签内。假设主要原因将在这里，它将强制浏览器重绘所有内容，只是它会在其中找到您的 css，并且支持在某个预定义位置（如内联样式或 css 文件中）`<th>`具有所有 css 的网站要容易得多。`<head>`

# avalondock - 如何使用 AvalonDock 并排放置两个 LayoutDocument

> ID：13315027
> 
> 赞同：3
> 
> 时间：2012-11-09T19:54:33.290
> 
> 标签：avalondock

我像这样使用 avalondock LayoutDocumentPane：

```
<avalonDock:DockingManager>
    <avalonDock:LayoutRoot>
        <avalonDock:LayoutPanel>
            <avalonDock:LayoutDocumentPane>
                <avalonDock:LayoutDocument Title="Doc 1"/>
                <avalonDock:LayoutDocument Title="Doc 2"/>
            </avalonDock:LayoutDocumentPane>
        </avalonDock:LayoutPanel>
    </avalonDock:LayoutRoot>
</avalonDock:DockingManager> 
```

这就是我得到的：

![默认布局](../Images/7ea650d00e196e373339669eeb40bb38.png)

但是，我希望布局是这样的： ![我想要的布局](../Images/800e9cc8fdd4e9f780832ec1da9ca545.png)

如何在 XAML 或 C# 中做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T16:45:13.797

您只需将它们放在单独的窗格中，如下所示：

```
<avalonDock:DockingManager>
    <avalonDock:LayoutRoot>
        <avalonDock:LayoutPanel>
            <avalonDock:LayoutDocumentPane>
                <avalonDock:LayoutDocument Title="Doc 1"/>
            </avalonDock:LayoutDocumentPane>
            <avalonDock:LayoutDocumentPane>
                <avalonDock:LayoutDocument Title="Doc 2"/>
            </avalonDock:LayoutDocumentPane>
        </avalonDock:LayoutPanel>
    </avalonDock:LayoutRoot>
</avalonDock:DockingManager> 
```

# r - 演员在数据框上不起作用

> ID：13315032
> 
> 赞同：1
> 
> 时间：2012-11-09T19:54:50.493
> 
> 标签：r, reshape2

我正在处理一个大型数据框，我想对其执行数据透视表类型的函数。我一直在尝试使用 reshape2 包，但由于某种原因，我的熔融数据框没有重塑。

我想采取这样的框架：

```
County      Industry   Type    Variable   Value 
LA          Plumbing     Tax       Rev       1000 
LA          Plumbing     No tax    Emp       100 
LA          Plumbing     Tax       Pay       500 
```

并使其成为（聚合类型）：

```
 Plumbing       Tailors
County  Rev   Emp  Pay Rev   Emp  Pay
LA      1000  100  500 1000  50   65 
```

我正在运行以下代码：

```
dcast(m.data, county ~ variable + industry) 
```

但它根本没有改变数据框。我在哪里搞砸了？

编辑：

我将包含有关此问题的更多信息。在到达熔融数据框之前，我正在做一些非常糟糕的清理工作以将数据放到我想要的位置。我知道下面的代码并不理想，确实应该修复，但我基本上是上传多个 CSV 文件（具有相同的列名），加入它们，重新编码一些值，删除一些列，选择数据的子集，转将其放入熔化的框架中，然后尝试使用 dcast 对其进行重塑。我删除了我重新编码某些值的代码，但那部分似乎工作正常。这是一些代码：

```
data1 <- read.table("census_data_r_1.csv",header=TRUE,sep=",",stringsAsFactors=FALSE) 
data2 <- read.table("census_data_r_2.csv",header=TRUE,sep=",", stringsAsFactors=FALSE)
fulldata <- rbind(data1,data2)
delete <- c("GEO.id","GEO.id2","NAICS.id","OPTAX.id","YEAR.id")
fulldata <- fulldata[, !(names(fulldata) %in% delete)]
colnames(fulldata) <- c("county","industry","tax_type","firms","revenue","payroll","num_employees","non_emp_firms","non_emp_firms_rev")
fulldata[c("firms","revenue","payroll","num_employees","non_emp_firms","non_emp_firms_rev")] <- recode.variables(fulldata[c("firms","revenue","payroll","num_employees","non_emp_firms","non_emp_firms_rev")],"'N' -> 'Nothing';'D' -> 'Withheld';'b' -> 20;'c' -> 100;'e' -> 250;'a' -> 10;'g' -> 1000;'f' -> 500;'Q' -> 'No Rev Collected';'h' -> 2500;'i' -> 5000;'j' -> 10000;'l' -> 50000;'k' -> 25000;'S' -> 'Bad Data';'m' -> 100000;")
fulldata.sub <- subset(fulldata, subset = (tax_type %in% c('Total', 'All establishments')) & (!(revenue %in% c('Nothing', 'Withheld','No Rev Collected'))) & (!(non_emp_firms %in% c('Nothing','Withheld'))))
m.data <- melt(fulldata.sub, id.vars = 1:3)
dcast(m.data, county ~ variable, sum) 
```

现在我收到以下错误：

> 结构错误（有序，暗淡 = ns）：暗淡 [产品 18300] 与对象 [0] 的长度不匹配

输出`dput(head(fulldata.sub,40))`：

```
structure(list(county = c("Autauga County, Alabama", "Autauga County, Alabama", 
"Autauga County, Alabama", "Autauga County, Alabama", "Autauga County, Alabama", 
"Autauga County, Alabama", "Baldwin County, Alabama", "Baldwin County, Alabama", 
"Baldwin County, Alabama", "Baldwin County, Alabama", "Baldwin County, Alabama", 
"Baldwin County, Alabama", "Baldwin County, Alabama", "Baldwin County, Alabama", 
"Baldwin County, Alabama", "Baldwin County, Alabama", "Baldwin County, Alabama", 
"Baldwin County, Alabama", "Baldwin County, Alabama", "Baldwin County, Alabama", 
"Baldwin County, Alabama", "Baldwin County, Alabama", "Baldwin County, Alabama", 
"Baldwin County, Alabama", "Baldwin County, Alabama", "Baldwin County, Alabama", 
"Baldwin County, Alabama", "Baldwin County, Alabama", "Baldwin County, Alabama", 
"Baldwin County, Alabama", "Baldwin County, Alabama", "Baldwin County, Alabama", 
"Baldwin County, Alabama", "Baldwin County, Alabama", "Baldwin County, Alabama", 
"Baldwin County, Alabama", "Baldwin County, Alabama", "Baldwin County, Alabama", 
"Barbour County, Alabama", "Barbour County, Alabama"), industry = c("Rental and leasing services", 
"Professional, scientific, and technical services", "Professional, scientific, and technical services", 
"Accounting, tax preparation, bookkeeping, and payroll services", 
"Accounting, tax preparation, bookkeeping, and payroll services", 
"Architectural, engineering, and related services", "Real estate and rental and leasing", 
"Real estate", "Lessors of real estate", "Offices of real estate agents and brokers", 
"Offices of real estate agents and brokers", "Activities related to real estate", 
"Real estate property managers", "Offices of real estate appraisers", 
"Consumer goods rental", "Accounting, tax preparation, bookkeeping, and payroll services", 
"Accounting, tax preparation, bookkeeping, and payroll services", 
"Offices of certified public accountants", "Tax preparation services", 
"Architectural, engineering, and related services", "Architectural services", 
"Engineering services", "Specialized design services", "Computer systems design and related services", 
"Computer systems design and related services", "Management, scientific, and technical consulting services", 
"Advertising, public relations, and related services", "Veterinary services", 
"Administrative and support and waste management and remediation services", 
"Administrative and support services", "Employment services", 
"Business support services", "Investigation and security services", 
"Services to buildings and dwellings", "Exterminating and pest control services", 
"Janitorial services", "Landscaping services", "Waste management and remediation services", 
"Lessors of real estate", "Legal services"), tax_type = c("Total", 
"All establishments", "All establishments", "All establishments", 
"All establishments", "All establishments", "Total", "Total", 
"Total", "Total", "Total", "Total", "Total", "Total", "Total", 
"All establishments", "All establishments", "All establishments", 
"All establishments", "All establishments", "All establishments", 
"All establishments", "All establishments", "All establishments", 
"All establishments", "All establishments", "All establishments", 
"All establishments", "Total", "Total", "Total", "Total", "Total", 
"Total", "Total", "Total", "Total", "Total", "Total", "All establishments"
), firms = c("10", "61", "61", "14", "14", "10", "358", "312", 
"77", "161", "161", "74", "52", "16", "28", "79", "79", "36", 
"20", "77", "13", "37", "19", "27", "27", "63", "17", "26", "250", 
"238", "26", "14", "17", "157", "16", "29", "96", "12", "11", 
"19"), revenue = c("8433", "42285", "42285", "8581", "8581", 
"5571", "266692", "201777", "59742", "104768", "104768", "37267", 
"32141", "4615", "20691", "33203", "33203", "19805", "3160", 
"39318", "10494", "21167", "6833", "12391", "12391", "21496", 
"11097", "18388", "163661", "145935", "30746", "4048", "13849", 
"77076", "9934", "15832", "47411", "17726", "1585", "6439"), 
    payroll = c("1641", "15473", "15473", "3506", "3506", "2229", 
    "59476", "47937", "4053", "30180", "30180", "13704", "11902", 
    "1674", "4854", "17298", "17298", "9718", "1122", "15263", 
    "3688", "8649", "908", "4429", "4429", "7335", "2634", "6073", 
    "67526", "62354", "19529", "1002", "6824", "27688", "3181", 
    "8632", "14434", "5172", "265", "1431"), num_employees = c("56", 
    "386", "386", "127", "127", "41", "1987", "1643", "160", 
    "1030", "1030", "453", "406", "42", "217", "491", "491", 
    "217", "138", "356", "69", "204", "45", "111", "111", "165", 
    "101", "282", "2807", "2686", "806", "53", "399", "1241", 
    "110", "399", "675", "121", "23", "36"), non_emp_firms = c("8", 
    "330", "330", "49", "49", "35", "2358", "2289", "648", "840", 
    "840", "801", "186", "32", "19", "208", "208", "20", "40", 
    "203", "21", "74", "107", "99", "99", "356", "82", "10", 
    "1452", "1435", "25", "153", "61", "982", "12", "526", "350", 
    "17", "40", "16"), non_emp_firms_rev = c("882", "10111", 
    "10111", "493", "493", "1280", "164778", "160968", "55888", 
    "33321", "33321", "71759", "25870", "1504", "692", "2961", 
    "2961", "533", "466", "9220", "889", "5387", "4448", "3235", 
    "3235", "14395", "10337", "602", "35998", "33953", "708", 
    "3991", "806", "18726", "329", "6246", "9974", "2045", "1978", 
    "488")), .Names = c("county", "industry", "tax_type", "firms", 
"revenue", "payroll", "num_employees", "non_emp_firms", "non_emp_firms_rev"
), row.names = c(6L, 7L, 9L, 19L, 21L, 25L, 54L, 55L, 56L, 65L, 
66L, 70L, 71L, 74L, 77L, 99L, 101L, 103L, 105L, 109L, 111L, 115L, 
119L, 125L, 127L, 131L, 139L, 143L, 147L, 148L, 152L, 155L, 159L, 
162L, 163L, 165L, 167L, 169L, 174L, 180L), class = "data.frame") 
```

编辑

再进行一次编辑，包括 >str(fulldata.sub) 和 str(m.data) 的输出

> data.frame'：130098 obs。9 个变量：
> $ 县：因子 w/3237 级别“南卡罗来纳州阿布维尔县”，..：121 121 121 121 121 121 121 121 131 131 ...
> $ 行业：因子 w/369 级别“会计，税务准备，簿记和工资服务”，..：283 239 239 1 1 33 358 358 274 273 ...
> $ tax_type ：因子 w/ 4 级“所有机构”，..：4 1 1 1 1 1 1 1 4 4 。 ..
> $ 公司 : num 10 61 61 14 14 10 4 4 358 312 ...
> $ 收入 : num 31466 21347 21347 31717 31717 ...
> $ 工资单 : num 5521 4863 4863 13729 13729 ...
> $ num_employees : 362546 571 571 ...
> $ non_emp_firms : 数字 3122 1887 1887 2486 2486 ...
> $ non_emp_firms_rev：数字 17550 96 96 12669 12669 ...
> 'data.frame'：780588 obs。5 个变量：
> $ 县：因子 w/ 3237 级别“南卡罗来纳州阿布维尔县”，..：121 121 121 121 121 121 121 121 131 131 ...
> $ 行业：因子 w/ 369 级别“会计，税务准备，簿记和工资服务”，..：283 239 239 1 1 33 358 358 274 273 ...
> $ tax_type：因子 w/4 级别“所有机构”，..：4 1 1 1 1 1 1 1 4 4 。 ..
> $变量：因子w / 6个级别“公司”，“收入”，..：1 1 1 1 1 1 1 1 1 1 ...
> $值：num 10 61 61 14 14 10 4 4 358 312 .. .

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T01:12:09.393

如果您看一下，`str(fulldata.sub)`您会发现第 4 到第 9 列中的数字被视为字符。因此，当您`melt()`将字符串转换为因子时。然后，您尝试对类型为 factor 的变量运行 sum() 评估 - 它不会计算。

您可以只转换为数字，如下所示：

```
...    
fulldata.sub[4:9] <- sapply(fulldata.sub[4:9],as.numeric)
# Then run your melt/cast sequence
m.data <- melt(fulldata.sub, id.vars = 1:3)
dcast(m.data, county ~ variable, sum) 
```

或者，修复数据导入。这可能是因为存在诸如“”、“-”、、”、“n/a”、“na”或“”等字符串。使用`read.csv`您可以通过设置`na.strings=c("erroneous_string","other_erroneous_string",...)`参数来解决此问题。

# javascript - iOS6 JavaScript touchmove事件之后通过垂直滚动jQuery动画不会触发

> ID：13315044
> 
> 赞同：2
> 
> 时间：2012-11-09T19:56:18.117
> 
> 标签：javascript, ios6, touch

我有一个带有 javascript touchmove 事件侦听器的 div，它在 iOS6 Mobile Safari 上水平滚动 div 内的图像。我想让页面的垂直滚动冒泡到浏览器，但是当这种情况发生时，jQuery.animate 不再起作用。

我在 [https://gist.github.com/4047733上发布了演示问题的代码的简化版本](https://gist.github.com/4047733)

我为重现问题而采取的步骤是：

*   向左/向右滑动图片并注意它是如何动画回到左边缘的
*   触摸图片并向上/向下滚动页面
*   重复左/右滑动并注意图片没有动画回到左边缘。在没有 e.preventDefault 的情况下发生 touchmove 后，jQuery 动画似乎失败了

这是从上面的 gist 链接准备好的 jQuery 文档中的 javascript

```
var el = document.getElementById("swipebox"),
    $slider = $('#swipebox').find('img'),
    startX, startY, dx, dy,
    startLeft,
    animateH = false,
    animateV = false;

var onTouchStart = function(e) {
    startLeft = parseInt($slider.css('left'), 10) || 0;
    startX = e.touches[0].pageX;
    startY = e.touches[0].pageY;

};
var onTouchMove = function(e) {
    dx = e.touches[0].pageX - startX;
    dy = e.touches[0].pageY - startY;

    if (
        animateH || 
        (!animateV && Math.abs(dx) > 5) 
    ) {
        // prevent default, we are scrolling horizontally, 
        animateH = true;
        $slider.stop().css({'left': startLeft+dx*2});
        e.preventDefault();
    } else if (Math.abs(dy) > 5) {
        // do NOT prevent default, we are scrolling the page vertically
        animateV = true;
    } else {
        // direction of scroll is undetermined at this time
        // we've moved less than 5px in any direction
        e.preventDefault();
    }
    return false;
};
var onTouchEnd = function(e) {
    $slider.stop().animate({'left': 0}); // animate image back to left
    e.preventDefault();
    animateH = false;
    animateV = false;
};

var onTouchCancel = function(e) {
    console.log('onTouchCancel');
};

el.addEventListener('touchstart', onTouchStart, false);
el.addEventListener('touchmove', onTouchMove, false);
el.addEventListener('touchend', onTouchEnd, false);
el.addEventListener("touchcancel", onTouchCancel, false); 
```

任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T21:06:07.597

这是iOS6中的错误。在 iOS6 中滚动窗口时，jQuery 动画计时器失败。目前对此几乎没有解决方法：

1.  像别人一样创建自己的计时器功能：[https ://gist.github.com/3755461](https://gist.github.com/3755461)
2.  使用 CSS3 过渡而不是 jQuery.animate。这是首选方式 - css3 转换没有这样的问题。您可以使用这个 jquery 插件[http://ricostacruz.com/jquery.transit/](http://ricostacruz.com/jquery.transit/)在 JavaScript 中轻松操作 CSS 转换。

# jquery - Jquery Knob 动画和改变颜色

> ID：13315045
> 
> 赞同：4
> 
> 时间：2012-11-09T19:56:21.067
> 
> 标签：jquery

我想创建一个在某个时候切换颜色的旋钮。例如，35 为红色，70 为黄色，100 为绿色。

我也想让它动画。

这是我的小提琴：http: [//jsfiddle.net/Tropicalista/jUELj/6/](http://jsfiddle.net/Tropicalista/jUELj/6/)

我的代码是：

```
 enter code here

$(document).ready(function() {
    $('.dial').val(13).trigger('change').delay(2000);
    $(".dial").knob({
        'min':0,
        'max':100,
        'readOnly': true,
        'width': 120,
        'height': 120,
        'fgColor': '#b9e672',
        'dynamicDraw': true,
        'thickness': 0.2,
        'tickColorizeValues': true,
        'skin':'tron'
    })         

}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T22:56:47.147

您可以使用`setInterval/clearInterval`以下功能来实现：

```
$(document).ready(function (){
$('.dial').val(0).trigger('change').delay(2000);
$(".dial").knob({
    'min':0,
    'max':100,
    'readOnly': true,
    'width': 120,
    'height': 120,
    'fgColor': '#b9e672',
    'dynamicDraw': true,
    'thickness': 0.2,
    'tickColorizeValues': true,
    'skin':'tron'
})         

    var tmr = self.setInterval(function(){myDelay()},1000);        
    var m = 0;
    function myDelay(){
        m += 10;
        $('.dial').val(m).trigger('change');
        if(m==100) {            
            window.clearInterval(tmr);
        }
    }    
});​ 
```

这是 jsFiddle 示例：http: [//jsfiddle.net/PTM6R/597/](http://jsfiddle.net/PTM6R/597/)

# c# - 类型或命名空间定义，或文件结尾预期错误

> ID：13315046
> 
> 赞同：0
> 
> 时间：2012-11-09T19:56:27.183
> 
> 标签：c#

我反复遇到同样的问题，但没有成功。我不断收到此错误：

*类型或命名空间定义，或预期的文件结尾*

我在代码末尾的两个花括号上有两次：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace Asrai
{
    class Program
    {
        public int health = 100;
        public int damage = 0;
        public static int hit = 0;

        static void Main(string[] args)
        {
            if (hit == 1)
            {
                int operator -(int health,int damage);
            }
        }
    }
} 
```

我可能忽略了一些简单的事情，但我看不出这段代码有什么问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T20:02:07.697

做这个

```
class Program
{
    public static int health = 100;
    public static int damage = 0;
    public static int hit = 0;

    static void Main(string[] args)
    {
        if (hit == 1)
        {
            health = health - damage; // health -= damage;
        }
    }
} 
```

***健康***和***伤害***都需要是***静态***的，以便它们可以从***静态***上下文中访问（在本例中为***Main***方法）

```
public static int health = 100;
public static int damage = 0; 
```

PS：从本网站的高亮到这行代码，你应该已经注意到你的代码是错误的

```
int operator -(int health,int damage); 
```

***int***是一种类型。在那一行代码中会有什么业务？

# akka - 创建相同类型的其他 Actor 的 Actor

> ID：13315048
> 
> 赞同：1
> 
> 时间：2012-11-09T19:56:42.123
> 
> 标签：akka, actor

我对 Akka 很陌生。我正在考虑在一个 Java 项目中使用它，我遇到了一个 Actor 可以向其他 n 个 Actor 发送消息的情况，每个 Actor 都是同一类型。这有点像递归。

这被认为是不好的做法吗？这是设计缺陷的标志吗？

欢迎提供实现此类结果的最佳实践的详细信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T19:31:49.900

后来我发现，[演员模型](http://en.wikipedia.org/wiki/Carl_Hewitt#Actor_model)的发明者 Carl Hewitt在 2:16的一次介绍性谈话中[介绍了给 channel9 的演员：](http://channel9.msdn.com/Shows/Going+Deep/Hewitt-Meijer-and-Szyperski-The-Actor-Model-everything-you-wanted-to-know-but-were-afraid-to-ask)

> (...) 为了进入系统，他们 [Actor] 必须有地址，这样一个 Actor 就可以向另一个 Actor 发送消息，而且像 Factorial 这样的 Actor 没有理由不能拥有自己的地址，所以这就是你实现递归的方式（...）

# kobold2d - 带有 kobold2d 的 iPhone 视网膜显示屏

> ID：13315055
> 
> 赞同：3
> 
> 时间：2012-11-09T19:56:59.957
> 
> 标签：kobold2d

我最近升级到 iPhone 视网膜显示器，即 iPhone 5，我正在执行示例视差背景图像；这些图像彼此相邻放置，以实现无休止的滚动......在视网膜显示器上，我看到图像之间存在间隙，而在 iPhone 4 上执行时我没有看到这种间隙。我在某处读到了 KOBOLD 2.0。 4 解决了这个问题，但不清楚我是否在代码中遗漏了一些指令来实现这一点。另外，我使用的是 KOBOLD 2.0.4 提供的模板。

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T07:41:43.733

如果您在图像离开屏幕后重新定位图像以实现无限效果，您可以使用适合 iPhone 4 屏幕的图像，并在它们的位置超出屏幕后重新定位它们。这将导致一个间隙，直到图像完全超出左端（或右端）的屏幕。如果这是您的情况，有两种方法可以解决它

1.  连续使用 3 张图像而不是 2 张图像，并将图像放置在最后一张的后面。
2.  制作 iPhone 5 屏幕大小的背景图像。

# web-services - 如何翻阅 Reddit 上的热门故事？

> ID：13315056
> 
> 赞同：7
> 
> 时间：2012-11-09T19:56:59.677
> 
> 标签：web-services, api, reddit

也许我只是累了，但我不知道如何使用 Reddit-API 来正确检索故事，尽管盯着 API 文档 [1] 看了一个小时..

例如，如果我获取 URL `http://www.reddit.com/r/gaming/top.json?limit=5`，那么我会得到 5 个故事元素。

在底部它说`before : null`and `after : "t3_12vgdt"`，它对应于`name`最后返回的故事项目的属性。

如何解释这个？我如何分页到接下来的 5 项，第 6 到 10 项？

[1] 此处引用：[https ://github.com/reddit/reddit/wiki/API](https://github.com/reddit/reddit/wiki/API)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-09T21:11:19.820

您需要添加查询参数`after=t3_12vgdt`。因为已经有一个现有的查询参数，`limit=5`您必须使用`&`添加附加参数。

`http://www.reddit.com/r/gaming/top.json?limit=5&after=t3_12vgdt`

如果您使用实际的 reddit 页面（删除`.json`），您会注意到这正是您单击下一个链接时的行为方式。

# javascript - javascript 字符串迄今为止使用自定义格式

> ID：13315059
> 
> 赞同：0
> 
> 时间：2012-11-09T19:57:34.040
> 
> 标签：javascript, date

我有一个字符串`10/11/2012`，意思是 2012 年 11 月 10 日。

但是当我这样做时，`new Date("10/11/2012")`它会在 10 月 11 日返回。

如何传递我想要的日期格式？在这种情况下`dd-mm-yyyy`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T17:10:47.647

我在这个网站上找到了 jQuery.datepicker.parseDate(format, Date)：

[http://docs.jquery.com/UI/Datepicker/](http://docs.jquery.com/UI/Datepicker/) $.datepicker.parseDate

所以我将改用 jQuery datepicker。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T20:00:27.610

不幸的是，没有 JavaScript Date 构造函数允许您传递文化信息，以便它使用本地化的日期格式。最好的办法是使用分别获取年、月和日的构造函数：

```
var parts = dateString.split('/');
var date = new Date(parseInt(parts[2], 10), 
                    parseInt(parts[1], 10), 
                    parseInt(parts[0], 10)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T20:02:10.007

对于这种特定情况，您可以使用：

```
var dateparts = date.split("/");
var datestring = dateparts[1] + "/" + dateparts[0] + "/" +  dateparts[2];
var date = new Date(datestring); 
```

在更一般的情况下，您可以扩展 Date 原型，如本答案所示：

[https://stackoverflow.com/a/13163314/1726343](https://stackoverflow.com/a/13163314/1726343)

# javascript - Javascript/jQuery - 悬停在一个 li 元素上，更改另一个 li 元素的类

> ID：13315062
> 
> 赞同：1
> 
> 时间：2012-11-09T19:57:47.770
> 
> 标签：javascript, jquery

我在这个网站上的菜单栏遇到了一些问题：[http](http://www.re-generation.ro/ro/campanii/minerit-aurifer) ://www.re-generation.ro/ro/campanii/minerit-aurifer 。现在，第二个`li`元素处于活动状态。我想要做的是，在菜单中的`hover`任何其他元素上，当前活动元素的 变为空白，并且在悬停时，它再次变为活动状态。如果您访问该链接，您可以轻松了解我是什么。`li``class``li`

如果您需要任何信息，请询问。

先感谢您！

我的代码：

```
var lis = document.getElementsByTagName('ul'); 
for (var i=0, len=lis.length; i<len; i++){ 
    lis[i].onmouseover = function(){ 
        var firstDiv = this.getElementsByTagName('li')[1]; 
        firstDiv.className = ''; 
        var ul = $(this).parent(document.this.getElementsByTagName('ul')[1]); 
        ul.className = ''; 
    }; 
    lis[i].onmouseout = function(){ 
        var firstDiv = this.getElementsByTagName('li')[1]; 
        firstDiv.className = 'active'; 
    }; 
}; 
```

编辑：谢谢大家的回答！这真的很有帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T20:11:12.963

**HTML：**

```
<ul id="menu">
    <li>Item 1</li>
    <li class="current active">Item 2</li>
    <li>Item 3</li>
    <li>Item 4</li>
</ul>​ 
```

**JavaScript：**

```
$('#menu li').on('mouseover', function() {
    var li$ = $(this);
    li$.parent('ul').find('li').removeClass('active');
    li$.addClass('active');
})
.on('mouseout', function() {
    var li$ = $(this);
    li$.removeClass('active');
    li$.parent('ul').find('li.current').addClass('active');
});​ 
```

[**演示**](http://jsfiddle.net/f0t0n/8zLGj/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T20:19:03.293

您可能想要做的第一件事是分配两个不同的状态/类：`active`和`current`. 一个告诉您应该显示哪一个，另一个实际切换可见性。

```
$('#menu').on('mouseover', '> li', function(e) {
    # attach hover event to the menu, and check which LI you are hovering
    if (!$(this).hasClass('.current)')) {
        $('.current', '#menu').removeClass('active');
    }
}).on('mouseout', '> li', function (e) {
    if (!$(this).hasClass('.current)')) {
        $('.current', '#menu').addClass('active');
    }
}); 
```

在这里，您只选择直接后代并更新类，前提是它不是当前活动的列表项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T20:19:18.000

我会为此使用 JQuery。像这样的东西：

```
$('li').hover(function(){
  $('li.active').removeClass('active').addClass('normal');
});

$('li').mouseleave(function(){
  $('li.normal').removeClass('normal').addClass('active');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T20:22:45.613

您缺少的是一种记住默认状态的方法。这是我的答案，还有一个**[小提琴](http://jsfiddle.net/556g2/)**

HTML：

```
<ul class="menuWithDefault">
    <li><a href="/one.html">Link One</a></li>
    <li class="active"><a href="/two.html">Link One</a></li>
    <li><a href="/three.html">Link One</a></li>
    <li><a href="/four.html">Link One</a></li>
</ul> 
```

Javascript：

```
$(".menuWithDefault").each(function() {
    var defaultItem = $(this).find(".active").first();

    $(this).find("li").hover(function() {
        defaultItem.toggleClass('active', false);
        $(this).toggleClass('active', true);
    }, function() {
        $(this).toggleClass('active', false);
        defaultItem.toggleClass('active', true);
    });
});​
​ 
```

# regex - 标记不指向对齐正则表达式（Emacs）的任何地方

> ID：13315064
> 
> 赞同：1
> 
> 时间：2012-11-09T19:57:53.197
> 
> 标签：regex, r, emacs, alignment

我在调用`align-regexp`. 不知何故，这不起作用并给出错误“ `Marker does not point anywhere`”。

该函数的想法是它搜索一个新段落，标记它，然后对其执行 align-regexp。为什么它不起作用？

```
(defun cleanR-align-smallerthan-dash ()
  (interactive)
  (save-excursion
    (goto-char (point-min))
    (while (search-forward-regexp "[\n][\n]" nil t) ; confirmed to work
      (mark-paragraph)                            ; the error is probably in here
      (align-regexp (region-beginning) (region-end) "<-")))) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T12:38:36.257

您传递的正则表达式不是`align-regexp`预期的。

[在这里](https://stackoverflow.com/a/12975000/903943)查看我的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T23:03:01.307

我的猜测是您遇到了一个错误，并且该错误已在不久前在 Emacs 的主干中修复。

# java - Eclipse：压制，“无法解析为类型”

> ID：13315066
> 
> 赞同：1
> 
> 时间：2012-11-09T19:57:56.897
> 
> 标签：java, eclipse, compiler-errors

我正在使用 eclipse 来编辑一个 maven 项目，并且我遇到了很多关于无法解析类型的错误。这是有道理的，因为它确实不存在，源代码仅在编译之前自动生成。无论如何我可以抑制与这个特定类相关的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T20:22:36.467

有一个 Eclipse Java 首选项页面，可让您指定特定的编译错误是 ERROR、WARNING 还是 IGNORED。不过，这不适用于 Eclipse 之外的 Maven 构建。

# r - 将向量值列添加到数据框 - 弄乱摘要（df）

> ID：13315070
> 
> 赞同：0
> 
> 时间：2012-11-09T19:58:31.000
> 
> 标签：r, vector, dataframe, summary

我有一个字符串向量，每个字符串都是 id 的 csv 列表。我想将每个字符串拆分为一个列表，并将长度和 id 集存储为数据框中的两个新列。这是一个例子：

```
df = data.frame(ids = c("a,b,c", "d", "e", "", "f,g", "", "h", "i", ""), stringsAsFactors=FALSE)
ids = sapply(df$ids, function (s) unlist(strsplit(as.character(s), ",")))
df$num.ids = sapply(ids, length)
df$ids.vec = sapply(ids, unlist) 
```

到目前为止，这看起来不错：

```
> df
    ids num.ids ids.vec
1 a,b,c       3 a, b, c
2     d       1       d
3     e       1       e
4             0        
5   f,g       2    f, g
6             0        
7     h       1       h
8     i       1       i
9             0 
```

但是当我输入 summary(df) 时，我得到了 ids.vec 的神秘列。更重要的是，summary 不会计算摘要，而是列出每一行（当我将它应用于我的真实数据集时，这是一个问题）。

```
> summary(df)
      ids               num.ids  ids.vec.Length  ids.vec.Class  ids.vec.Mode
 Length:9           Min.   :0   3          -none-     character            
 Class :character   1st Qu.:0   1          -none-     character            
 Mode  :character   Median :1   1          -none-     character            
                    Mean   :1   0          -none-     character            
                    3rd Qu.:1   2          -none-     character            
                    Max.   :3   0          -none-     character            
                                1          -none-     character            
                                1          -none-     character            
                                0          -none-     character 
```

任何想法我做错了什么？

谢谢！凯文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T00:16:05.497

你没有做错任何事。正如@joran 提到的，问题实际上是您希望从 summary() 中获得什么信息？

您所看到的是两个摘要的组合：

```
# df1 is df less ids.vec;  df2 is only ids.vec
df1 <- df[,names(df) != "ids.vec"]
df2 <- df[,names(df) == "ids.vec"]

> summary(df1)  # summary for a data frame
     ids               num.ids 
 Length:9           Min.   :0  
 Class :character   1st Qu.:0  
 Mode  :character   Median :1  
                    Mean   :1  
                    3rd Qu.:1  
                    Max.   :3  

> summary(df2)   # summary for a list
      Length Class  Mode     
a,b,c 3      -none- character
d     1      -none- character
e     1      -none- character
      0      -none- character
f,g   2      -none- character
      0      -none- character
h     1      -none- character
i     1      -none- character
      0      -none- character 
```

合并摘要的格式有点尴尬。

请注意，它将列表的整个摘要作为单个列

```
> colnames(summary(df))
[1] "    ids"                                    
[2] "   num.ids"                                 
[3] "ids.vec.Length  ids.vec.Class  ids.vec.Mode" 
```

还要注意 df2 是一个列表。

```
> str(df2)
List of 9
 $ a,b,c: chr [1:3] "a" "b" "c"
 $ d    : chr "d"
 $ e    : chr "e"
 $      : chr(0) 
 $ f,g  : chr [1:2] "f" "g"
 $      : chr(0) 
 $ h    : chr "h"
 $ i    : chr "i"
 $      : chr(0) 
```

这是原始数据框的一部分

```
> str(df)
'data.frame': 9 obs. of  3 variables:
 $ ids    : chr  "a,b,c" "d" "e" "" ...
 $ num.ids: int  3 1 1 0 2 0 1 1 0
 $ ids.vec:List of 9
  ..$ a,b,c: chr  "a" "b" "c"
  ..$ d    : chr "d"
  ..$ e    : chr "e"
  ..$      : chr 
  ..$ f,g  : chr  "f" "g"
  ..$      : chr 
  ..$ h    : chr "h"
  ..$ i    : chr "i"
  ..$      : chr 
```

# java - 使用 getItemViewType() - 我如何知道哪个布局是 0 哪个是 1？

> ID：13315071
> 
> 赞同：1
> 
> 时间：2012-11-09T19:58:43.743
> 
> 标签：java, android, listview

我正在覆盖`getItemViewType()`我的项目中的方法以指示要为列表中的项目使用哪个视图，`R.layout.listview_item_product_complete`或者`R.layout.listview_item_product_inprocess`

我知道这个函数必须返回一个介于 0 和 1 之间的值，小于可能的视图数，在我的例子中是 0 或 1。

我怎么知道哪个布局是 0 哪个是 1？我假设我创建的第一个布局将为 0，后一个布局为 1，但我想返回一个变量，以便该值灵活...

IE

```
@Override
public int getItemViewType(int position) {
    // Define a way to determine which layout to use
    if(//test for inprocess){ 
        return INPROCESS_TYPE_INDEX;
    } else { 
        return COMPLETE_TYPE_INDEX;
    }
} 
```

我可以参考什么/在哪里定义 和 的`COMPLETE_TYPE_INDEX`值`INPROCESS_TYPE_INDEX`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T20:40:52.020

> 我需要知道如何将 COMPLETE_TYPE_INDEX 定义为 1 或 0。这似乎是一件微不足道的事情！

`COMPLETE_TYPE_INDEX`老实说，是 0还是 1都没有关系`INPROCESS_TYPE_INDEX`，反之亦然。`static`但是您将它们定义为类变量，在这种情况下，它们也可以是`final`：

```
public class MyAdapter ... {
    private static final int COMPLETE_TYPE_INDEX = 0;
    private static final int INPROCESS_TYPE_INDEX = 1;
    private static final int NUMBER_OF_LAYOUTS = 2;

    public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder = null;
        if (convertView == null) {
            if(getItemViewType(position) == COMPLETE_TYPE_INDEX)
                convertView = mInflater.inflate(R.layout.listview_item_product_complete, null);
            else // must be INPROCESS_TYPE_INDEX
                convertView = mInflater.inflate(R.layout.listview_item_product_inprocess, null);

            // etc, etc...
            // Depending on what is different in your layouts, 
            //   you may need update your ViewHolder and more of getView()
        }

        // Load data that changes on each row, might need to check index type here too
    }
    @Override
    public int getItemViewType(int position) {
        Order thisOrder = (Order) myOrders.getOrderList().get(position);

        if(thisOrder.getOrderStatus().equals("Complete")) return COMPLETE_TYPE_INDEX;
        else return INCOMPLETE_TYPE_INDEX;
    }
    @Override
    public int getViewTypeCount() {
        return NUMBER_OF_LAYOUTS;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T20:04:00.663

在你的`getView`方法 中

```
public View getView(int position, View convertView, ViewGroup parent) {

 if(getItemViewType(position) == INPROCESS_TYPE_INDEX){

//inflate a layout file
convertView = inflater.inflate(R.layout.R.layout.listview_item_product_inprocess);
}

else{
{

//inflate a layout file
convertView = inflater.inflate(R.layout.listview_item_product_complete);

}

return convertView; 
```

# java - Java 版本控制

> ID：13315072
> 
> 赞同：0
> 
> 时间：2012-11-09T19:58:49.250
> 
> 标签：java, api, version-control, version, docx

我正在使用 docx4j 加载、操作和保存 Word 文件。一切都很完美，但有一件事我不知道如何实现它。我想要的是版本控制之类的东西——这意味着如果你保存一个文档，就可以恢复这个文档的早期版本（例如，只保存增量）。也许您可以将其描述为 SVN 或 Git 之类的东西，您可以在其中返回文件的早期版本。问题是我不知道有任何可能实现这一点。所以我希望你们中的任何人都可以帮助我。如果有人至少知道一个包或其他可以对一般文件执行此操作的东西，而不是特别是对 docx 文件，那将是很好的。谢谢你的帮助！

编辑：我很抱歉我的问题不准确。这是我在这里的第一篇文章，将来我会改进；）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T20:04:29.753

[JGit](http://eclipse.org/jgit/)是 Git 的 Java 实现，可以使用很少的依赖项。SVN 和 CVS 也存在类似的库。考虑到优质解决方案的存在，自制版本控制系统几乎可以肯定是一个糟糕的主意！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T20:05:27.090

如果您想要一些纯 Java 实现文档版本控制，也许您可​​以选择：[Jackrabbit](http://jackrabbit.apache.org/)

之前已经提出过类似的问题。这个问题的第一个答案（标记为正确的答案）也适用于 Jackrabbit：Using a version control system as a data backend

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T20:03:37.653

最简单的方法是使用工具`diff`和`patch`. 它们被用作 CVS 的核心。我假设您希望在未预装它们的 Windows 中运行您的应用程序。我不知道使用此工具的 Windows 版本是否容易/舒适，但您始终可以尝试自己编写类似的功能。在这里您可以找到关于查找文件之间的差异并修补它们的非常好的教程：http: [//tuts.pinehead.tv/2012/09/18/introduction-using-diff-and-patch/](http://tuts.pinehead.tv/2012/09/18/introduction-using-diff-and-patch/)当您知道功能时，这很容易自己写一些类似的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T20:05:52.853

~~我认为您应该为此使用 Git，我找到了一个名为[JavaGit](http://javagit.sourceforge.net/)的 Java API ，因此您可以轻松访问存储库。使用 Git，您可以拥有一个本地存储库，您可以在其中提交文件和切换版本。如果需要，您还可以将数据推送和拉取到远程位置。~~

最好像 Gian 说的那样使用[JGit ！](http://eclipse.org/jgit/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-09T20:07:01.983

自己实现这可能是一件棘手的事情，所以我不推荐它。

我对您的环境了解不多，但是如果您能够使用现成的版本控制存储库，您将省去很多麻烦。您可以尝试直接使用 Git 或 SVN，这可能是您的用例最简单的解决方案。

但是，由于您谈论的是 MS Office 文件，因此您可能正在实施某种形式的企业文档管理工具。在这种情况下，JCR 规范旨在提供对存储库中文件的访问，具有版本控制和其他元数据功能。这是[规范](http://www.day.com/specs/jcr/2.0/index.html)。

[Apache Jackrabbit](http://jackrabbit.apache.org)项目提供了该规范的开源实现，[Alfresco](https://developer.alfresco.com)的开发人员版本也是如此。

选择正确的解决方案实际上取决于您的用户尝试对这些文件做什么、您的部署环境是什么样的（不要尝试在 Windows 上托管 Git，k？）以及您当前的代码库的自定义程度（标准 Servlet容器？Java EE？自制？）。

祝你好运！

# c# - 使用接口向 XtraGrid 添加行

> ID：13315076
> 
> 赞同：2
> 
> 时间：2012-11-09T19:59:14.697
> 
> 标签：c#, gridview, interface, devexpress, xtragrid

我正在为我的网格的 DataSouce 使用 BindingList，如下所示：

```
private BindingList<IPeriodicReportGroup> gridDataList = 
    new BindingList<IPeriodicReportGroup>();

...

gridControl.DataSource = gridDataList; 
```

我将主视图的 OptionsBehaviour 属性 AllowDeleteRows 和 AllowAddRows 设置为 true，并将 NewItemRowPosition 设置为 Bottom。当我单击空行添加数据时，我得到一个异常，因为我的界面中没有构造函数——这很有意义——。有没有简单的方法解决这个问题？我认为这可能与处理事件 InitNewRow 有关，但我不太确定如何从那里开始。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T06:43:11.450

[您可以使用以下方法（通过BindingList.AddingNew](http://msdn.microsoft.com/en-us/library/ms132741.aspx)事件）在 BindingList 级别完成任务：

```
 gridView1.OptionsBehavior.AllowAddRows = DevExpress.Utils.DefaultBoolean.True;
    gridView1.OptionsBehavior.AllowDeleteRows = DevExpress.Utils.DefaultBoolean.True;
    gridView1.OptionsView.NewItemRowPosition = NewItemRowPosition.Bottom;
    //...
    var bindingList = new BindingList<IPerson>(){
        new Person(){ Name="John", Age=23 },
        new Person(){ Name="Mary", Age=21 },
    };
    bindingList.AddingNew += bindingList_AddingNew; //  <<--
    bindingList.AllowNew = true;
    gridControl1.DataSource = bindingList;
}

void bindingList_AddingNew(object sender, AddingNewEventArgs e) {
    e.NewObject = new Person(); //   <<-- these lines did the trick
}
//...
public interface IPerson {
    string Name { get; set; }
    int Age { get; set; }
}
class Person : IPerson {
    public string Name { get; set; }
    public int Age { get; set; }
} 
```

# https - 如何在 Opera 中添加自签名可信根权限？

> ID：13315080
> 
> 赞同：2
> 
> 时间：2012-11-09T19:59:24.440
> 
> 标签：https, opera

我为我的 .net 应用程序使用 fiddler 核心代理服务器来监控 https 请求。我找到了以编程方式或通过命令行工具从 fiddler 为 IE 和 Firefox 添加我的自签名证书颁发机构的方法。但是我怎样才能对 Opera 浏览器做同样的事情呢？我发现 Opera 将其证书存储在 Windows 7 中位于 C:\Users\username\AppData\Roaming\Opera\Opera 的*opcacrt6.dat*文件中。有没有办法使用任何工具或代码将我的证书颁发机构文件添加到其中？

请注意，我不想通过 Opera 的 UI 以传统方式进行操作。我想以编程方式或使用命令行来完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T20:59:40.410

Opera 对很多文件使用自定义二进制格式；我相信证书存储使用[通用二进制格式](http://www.opera.com/docs/operafiles/#generic)，并且希望通过查看它（以及通过 UI 添加证书添加的内容），您可以弄清楚需要做什么才能在外部对其进行变异。

# wcf - WCF 单向调用 - 引发超时异常，但消息仍在排队和处理 - 为什么/如何中止？

> ID：13315082
> 
> 赞同：3
> 
> 时间：2012-11-09T19:59:31.543
> 
> 标签：wcf

我有一个非常简单的 WCF 单向服务（托管在 IIS 中），它使用 basicHttpBinding：

```
 <service name="OptumRx.Formulary.ServiceLayer.UserRequestService" behaviorConfiguration="UserRequestBehaviors">
            <endpoint
                address=""
                binding="basicHttpBinding" bindingConfiguration="WindowsAuthBinding"
                contract="OptumRx.Formulary.ServiceLayer.IUserRequestService">
            </endpoint>
        </service>
        <client>
            <endpoint address="....."
                  binding="basicHttpBinding" bindingConfiguration="WindowsAuthBinding"
                  contract="OptumRx.Formulary.ServiceLayer.IUserRequestService">
            </endpoint>
        </client>
        <basicHttpBinding>
            <binding name="WindowsAuthBinding" sendTimeout="00:00:15" >
                <security mode="TransportCredentialOnly">
                    <transport clientCredentialType="Windows" />
                </security>
            </binding>
        </basicHttpBinding>
        <serviceBehaviors>
            <behavior name="UserRequestBehaviors">
                <serviceMetadata httpGetEnabled="true" />
                <serviceDebug includeExceptionDetailInFaults="true"/>
                <serviceThrottling maxConcurrentCalls="2" maxConcurrentInstances="2"/>
            </behavior>
        </serviceBehaviors> 
```

代码片段：

```
 // interface, declarying one way contract
    [OperationContract(IsOneWay = true)]
    void SubmitUserRequest(RequestServiceObject request);

// setting per call instancing and multiple concurrency
[ServiceBehavior(ConcurrencyMode = ConcurrencyMode.Multiple, 
                InstanceContextMode = InstanceContextMode.PerCall)]
public class UserRequestService : IUserRequestService {
}

    // how the client calls the service (client is asp.net page hosted within same site as service)
    ChannelFactory<IUserRequestService> factory = new ChannelFactory<IUserRequestService>("*");
    IUserRequestService proxyUserRequest = factory.CreateChannel();
    try {
      proxyUserRequest.SubmitUserRequest(so);
    } catch {
      // timeout error caught
    } finally {
      ((IClientChannel)proxyUserRequest).Close();
      factory.Close();
    } 
```

该调用会执行一些可能很繁重的数据库/IO 工作，我们可能希望限制最大并发调用。如果我们已经达到了这个限制，是否有办法阻止呼叫排队？

使用上述配置，处理了 2 个调用，第 3 个调用超时（抛出并捕获异常）。在服务跟踪查看器中，我什至看到：

```
 The system hit the limit set for throttle 'MaxConcurrentCalls'. Limit for this throttle was set to 2\. ....

 The HTTP request to '' has exceeded the allotted timeout of 00:00:15\. The time allotted to this operation may have been a portion of a longer timeout. 
```

但是一旦前 2 个调用完成，我猜第三条消息仍然存在于侦听器通道中并被执行。

有没有办法在仍然使用单向配置的同时中止呼叫？我希望用户知道服务“忙”并稍后再试......

谢谢

# c# - 什么对应于 C++\CLI 中的 string[]

> ID：13315086
> 
> 赞同：0
> 
> 时间：2012-11-09T19:59:39.713
> 
> 标签：c#, .net, c++-cli

请问`string[]`C++\CLI中的C#类型对应的是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T20:07:37.723

假设您的意思是*托管*数组

```
array<String^>^ 
```

# jdeveloper - 11gR2 JDeveloper：此应用程序设置在哪里？

> ID：13315087
> 
> 赞同：0
> 
> 时间：2012-11-09T19:59:42.363
> 
> 标签：jdeveloper

在过去的几个月里，我一直在使用 11gR1 JDeveloper (11.1.1.6) 进行开发。我现在正在迁移到 JDeveloper 11gR2 (11.1.2.2)。我现在面临的唯一问题是在 11gR2 JDeveloper 中找不到“在部署期间自动生成和同步 weblogic-jdbc.xml 描述符”复选框！11gR2 JDeveloper 没有任何安全设置

这是 JDeveloper 11.1.1.6：

![Jdeveloper 11.1.1.6](../Images/acae6695d78b01cd2b7ff48efb68e98e.png)

这是 JDeveloper 11.1.2.2：

![Jdeveloper 11.1.2.2](../Images/df887708b98bbf7eb5cb040e74cb5da7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T20:15:15.090

啊...我单击“部署”下的“WebLogic”，然后单击“加载WebLogic Extension”按钮，然后我可以单击复选框。

把它留给甲骨文，让事情变得比他们应该做的更复杂。![甲骨文...](../Images/30ff7281671dbd188f0ce6a628cebd25.png)

# excel - Excel 启用宏的工作簿无法正确关闭和重新打开

> ID：13315089
> 
> 赞同：1
> 
> 时间：2012-11-09T19:59:47.873
> 
> 标签：excel, excel-2010

我有一个非常特殊的问题，它只发生在一个客户的机器上。客户端将使用快捷方式打开 Excel 工作簿的实例，并使用自定义加载项进行工作，该工作正常，然后将文件保存到适用的驱动器。然后，当客户关闭 Excel 时，他使用右上角的“X”按钮。然后，当使用桌面上的快捷方式打开工作簿的新实例时，Excel 会立即打开而没有启动屏幕，根本没有任何加载项，所以这个问题不仅仅影响我的加载项。

当关闭 Excel 后出现此问题时，即使它从屏幕和任务栏中消失，Excel.exe 进程仍在后台运行，这可能是重新打开时加载速度更快的原因。但是，由于加载项已从内存中删除，Excel 似乎已部分关闭。

我之前注意到，当 Excel.exe 进程仍在任务管理器中“徘徊”时，关闭 Windows 资源管理器会导致 Excel.exe 进程终止。

我完全不知道发生了什么，并且确信它与自定义加载项无关。

您对为什么会发生这种情况有任何想法吗？我什至无法通过从我自己的 RDPing 到客户端的机器来重现此错误。

# c++ - 在 O(1) 上运行的内存池

> ID：13315092
> 
> 赞同：3
> 
> 时间：2012-11-09T20:00:08.870
> 
> 标签：c++, memory-management

有没有办法设计一个可以在 O(1) 中分配和释放内存的 C++ 内存池（仅适用于特定类）？

假设我有 T 类，我想在需要时只分配 100*sizeof(T) 的块。但是，我该如何处理在块中删除特定对象时发生的碎片？我可以为每个插槽设置一个布尔值来判断插槽是否被占用，但是我需要一个算法来给我下一个空闲插槽。

是否有任何标准方法可以在 O(1) 中实现这一点？我想这是一个相当普遍的事情

编辑：图片看看我的意思 ![图片](../Images/b4e30295e894b7f58c95173ca6664c66.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T20:11:54.523

此解决方案正在使用额外的内存（这可能是您想要的也可能不是您想要的），如果您尝试连续两次释放一个块，您也会遇到问题。

预分配足够的内存。将其分成块，每个对象一个。保留一个空闲块的列表。当你分配一个新对象时，从空闲块列表的顶部选择一个块。当您释放一个对象时，将其块附加到空闲块列表中。这两个操作都是 O(1)。

它看起来像这样：

在里面：

```
char* mem = new char[CHUNK_SIZE * OBJ_COUNT];
std::list<char*> free_chunks;
for (char* c = mem, int i = 0; i < OBJ_COUNT; ++i)
{
   free_chunks.push_back(c);
   c += CHUNK_SIZE;
} 
```

获取一个新的块进行分配：

```
 if(free_chunks.size() > 0)
   {
    char* c = free_chunks.back();
    free_chunks.pop_back();
    return c;
   }
   else{ // Error, not enough memory... } 
```

释放后返回一个块：

```
free_chunks.push_back(c); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T20:38:29.813

您只有针对一般内存分配问题的碎片，其中请求任意长度的块。这里的问题是给定这个内存布局：

```
@@@@@@---@--@-@@@@ 
```

（其中`@`表示正在使用和`-`表示免费）

尽管总共有 6 个空闲块，但您不能分配 4 个连续块。所以你必须增加治理空间的总量（如果可能的话）。同样在这种一般情况下，决定选择哪个地址并非易事，并且有几种影响碎片程度的策略（第一次拟合、最差拟合等）。

在您的情况下，问题要容易得多，因为您知道要分配的区域将始终与某个整数的大小完全相同`k`（例如`k = sizeof(T)`）。这意味着您将始终拥有完美贴合的块，您可以随意组织这些块。只需像处理链表一样处理可用空间，并始终使用链表中的第一项来响应内存分配请求。

```
@@@---@@@------@@@@@@@@@---@@@ (k=3) 
```

现在，如果您想在大块中分配以摊销分配，您可以保留一个额外的计数器来记录一个特定块中使用了多少个插槽，以便在该块为空时释放该块（**如果**您想缩小插槽库！ ）。

如果您坚持总是从最常用的块中分配新的内存块，您可以通过使用指示哪个块最满的附加列表来做到这一点。由于您始终只能将已使用插槽的数量更改为 1，因此您可以将该列表排序为`O(1)`，只需交换相邻节点即可。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T20:13:21.360

您可以使用 O(1) 对象检索来实现简单的对象池。但是您的对象需要具有指向下一个对象的内部指针。在池的构造函数内部进行了一些预先计算：

```
pool.reserve(capacity); //std::vector<Object*>
for (int i = 0; i < capacity; ++i) {
    pool.push_back(new Object());
}
for (int i = 0; i < capacity-1; ++i) {
    pool[i]->setNext(pool[i+1].get());
}
first_available = pool[0].get(); //variable where you store first free object 
pool[capacity-1]->setNext(NULL); 
```

那么`getObject`方法是：

```
getObject* getObject()
{
    getObject* obj = first_available;
    first_available = first_available->getNext();
    return obj;
}

void returnObject(Object* obj)
{
    obj->setNext(first_available);
    first_available = obj;
} 
```

希望能帮助到你。

# jstree - jsTree在翻转时打开节点

> ID：13315093
> 
> 赞同：2
> 
> 时间：2012-11-09T20:00:09.200
> 
> 标签：jstree

关于如何使用 jsTree 作为菜单的任何指导？具体来说，我希望在用户滚动树中的节点时打开给定的节点（而不是单击要打开的节点）。

我搜索了文档并注意到有一个用于双击的事件处理程序，但没有针对鼠标悬停事件的回调。

此外，与上述相关，有没有办法让树水平呈现而不是垂直呈现（这是默认布局）？

我是 jsTree 的新手，所以如果这个问题太基本，请原谅我。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T14:19:12.667

如果我正确理解了您的问题，请尝试附加到**hover_node.jstree**事件，例如

```
$("jstree_id").bind("hover_node.jstree", function (e, data) {
     var node = data.rslt.obj, // the hovered node 
         tree_instance = data.inst; // tree instance

     tree_instance.open_node(node);
}); 
```

希望这个对你有帮助。

# c# - 表达式语法单字段

> ID：13315094
> 
> 赞同：1
> 
> 时间：2012-11-09T20:00:15.400
> 
> 标签：c#, linq, lambda

我一直在从事一个使用第三方 DAL (SubSonic) 为所有数据库对象生成类的项目。

对于查询这些对象，现有的代码实践通常是：

```
int keyValue = 1;
TableObject t = TableObject.SingleOrDefault(x => (x.keyField == keyValue));
if (t != null) {
    int valueWeWant = t.fieldWeWant;
    string otherValueWeWant = t.otherFieldWeWant;
} 
```

我一直在尝试尽可能地减少 SQL 流量，因为我们往往有大行并且通常只关心一两个字段。到目前为止，我能找到的最佳方法是：

```
int keyValue = 1;
var t = TableObject.All().Where(x => (x.keyField == keyValue)).Select(x => new { x.fieldWeWant, x.otherFieldWeWant}).Take(1);
if ((t != null) && (t.Count() != 0)) {
    int valueWeWant = t.First().fieldWeWant;
    string otherValueWeWant = t.First().otherFieldWeWant;
} 
```

我喜欢生成的 SQL 只选择单行和 2 个字段，并且对匿名类型的可读性感到满意，但必须比较 .Count() 对我来说似乎很浪费。

我是否错过了一种更简单的方法来执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T20:06:38.133

如果替换`Take(1)`为[`SingleOrDefault()`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.singleordefault.aspx)，则只需要检查`null`，而不是`Count() == 1`，并跳过 的调用`First()`：

```
var t = TableObject
    .All()
    .Where(x => (x.keyField == keyValue))
    .Select(x => new { x.fieldWeWant, x.otherFieldWeWant})
    .SingleOrDefault();
if (t != null) {
    int valueWeWant = t.fieldWeWant;
    string otherValueWeWant = t.otherFieldWeWant;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T20:04:49.923

你有正确的想法，但如果你发现你自己使用 Count() > 0，你会想要使用

```
if ((t != null) && (t.Any())) 
```

.Any() 在找到集合中的第一个实体后返回 true。而 .Count() 会在返回 true 之前迭代整个集合，并且会影响性​​能

# twitter-bootstrap - 在 Firefox 中单击选择会立即导致选项下拉菜单关闭

> ID：13315096
> 
> 赞同：3
> 
> 时间：2012-11-09T20:00:21.947
> 
> 标签：twitter-bootstrap, firefox, select, drop-down-menu

出于某种原因，并且仅在 Firefox 中，具有多个选项的选择框会在单击选择后立即消失。

选择的内容不会被不断重写，只有一个事件处理程序用于更改。而且我基本上使用 Bootstrap 进行样式设置。

关于为什么会发生这种情况的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T21:35:23.317

当我看到这个问题时，问题是将多个`<select>`控件包装在同一个`<label>`

`<select>`Chrome 似乎可以很好地处理这个问题，但是当点击任何后续`<select>`s时，Firefox 会尝试打开第一个。

解决方案是要么不将它们包装在 a 中`<label>`，要么仅将第一个选择包装在标签中。

演示：http: [//jsfiddle.net/lsirivong/jmeGv/](http://jsfiddle.net/lsirivong/jmeGv/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-05T13:38:07.880

即使这个问题已经很老了，我只是在寻找相同的症状时偶然发现了它。

由于某些原因，Firefox 在页面上绘制到画布元素时会关闭选择元素。在我的用例中，我能够通过在任何选择输入处于焦点时不更新画布来解决此问题：

```
if (jQuery('select:focus').length > 0) {
    return; //Skip rendering while select is in focus
} 
```

希望这可以帮助那些拼命地试图弄清楚为什么他们的下拉菜单立即关闭的人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-08T19:35:10.263

我今天遇到了同样的问题，在苦心地将我的代码一分为二后，我发现这是因为`filter: brightness(1.4);`影响选择元素的 CSS 属性。我不知道为什么这对 Firefox 来说很困难，但希望这对某人有用。

# image - 在 Matlab 图中将标签放在矩阵的对角线上

> ID：13315099
> 
> 赞同：2
> 
> 时间：2012-11-09T20:00:54.877
> 
> 标签：image, matlab, plot, axis-labels, diagonal

在 Matlab 中，假设你`imagesc`是一个方阵。有没有办法`Xticklabels`在对角线上绘制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-19T04:49:26.573

对于大小为 n=4 的对角方阵：

```
figure; imagesc( diag( ones(1, 4) )  ); 
```

在循环中使用`text()`命令将刻度标签作为字符串：

```
for i = 1:n 
    text( i, i, num2str(i)); 
end 
```

见下文：

![在此处输入图像描述](../Images/33789c45f05c01e279a27b88b2738c8c.png)

一个很好的相关参考：[在直方图条的顶部添加标签](https://stackoverflow.com/questions/12501432/how-can-i-add-labels-of-values-to-the-top-of-my-matlab-plot)

# api - 是否可以从 Open Graph 中检索用户的关系状态历史记录？

> ID：13315100
> 
> 赞同：2
> 
> 时间：2012-11-09T20:00:56.743
> 
> 标签：api, facebook-graph-api

我试图想办法获取用户的关系状态历史记录。我知道我可以拉取用户当前的关系状态。

但我想以类似于 Timeline 保存用户的工作和教育历史的方式提取他们的历史。

我已经看到（取决于用户提供了多少信息）人们的关系被保存为实际日期，例如一个人于 2012 年 7 月 22 日结婚或 2011 年 10 月 1 日“恋爱”。

所以我的问题是：如果用户自 2012 年 10 月 23 日起建立关系，我可以从 API 获取该信息吗？如果此人更改他们的关系状态，我是否也可以从 API 获取该信息？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T20:07:44.823

据我所知，Open Graph 不提供*关系状态历史记录。*

> relationship_status - 用户输入的“关系状态”配置文件字段。为空白或以下字符串之一：单身、恋爱中、开放式恋爱、订婚、已婚、复杂、丧偶。
> 
> important_other_id - 与用户有关系的人的 id。仅当关系中的两个人都是发出请求的应用程序的用户时才会显示。

看看这里的表结构：http: [//developers.facebook.com/docs/reference/fql/user/](http://developers.facebook.com/docs/reference/fql/user/)

**更新：**

如果关系状态与您已有的不同，您可以尝试使用[实时更新 API来存储关系状态。](http://developers.facebook.com/blog/post/2012/01/31/how-to--subscribing-to-data-changes-using-the-real-time-updates-api/)

# php - php - 如何将求和运算存储在数据库中

> ID：13315104
> 
> 赞同：0
> 
> 时间：2012-11-09T20:01:10.693
> 
> 标签：php, sum

我已经使用此代码来计算 v1、v2、v3 的总和（总和），它是一个无线电输入类型，所有存储在数据库中的东西都可以预期为 TOTAL .. 它存储像 144 或 444！不是所有3个输入的总和..请帮助我想将它存储为3个输入的总和

```
...
<tr>
<th> Your attendance<font size="4" > </font></th>
<td>  <input type="radio" name ="v1" value = "4"    checked = "checked" onclick="updateTotal();"/></td>
<td>  <input type="radio" name ="v1" value = "3"  onclick="updateTotal();"   /></td>
<td>  <input type="radio" name ="v1" value = "2"  onclick="updateTotal();"   /></td>
<td>  <input type="radio" name ="v1" value = "1"  onclick="updateTotal();"   /></td>    
</tr>

<tr>
<th > Your grades  <font size="4" > </font></th>
<td>  <input type="radio" name ="v2" value = "4"  onclick="updateTotal();"  checked = "checked" /></td>
<td>  <input type="radio" name ="v2" value = "3"  onclick="updateTotal();"   /></td>
<td>  <input type="radio" name ="v2" value = "2"  onclick="updateTotal();"   /></td>
<td>  <input type="radio" name ="v2" value = "1"  onclick="updateTotal();"   /></td>    
</tr>

<tr>
<th >Your self-control <font size="4" > </font></th>
<td>  <input type="radio" name ="v3" value = "4"  onclick="updateTotal();"  checked = "checked" /></td>
<td>  <input type="radio" name ="v3" value = "3"  onclick="updateTotal();"   /></td>
<td>  <input type="radio" name ="v3" value = "2"  onclick="updateTotal();"   /></td>
<td>  <input type="radio" name ="v3" value = "1"  onclick="updateTotal();"   /></td>    
</tr>       

        </tr>
    </table>

    <br>
    <a href="evaE.php">  <td><input type="submit" name="submit" value="Submit">

    <input type="reset" name="clear" value="clear" style="width: 70px"></td>

    <input type="hidden" id="total" name="total" />

<script>
  function updateTotal(){

    var sumRad = 0;

    var arrV1 = document.getElementsByName("v1");
    var arrV2 = document.getElementsByName("v2");
    var arrV3 = document.getElementsByName("v3");

    for(var i=0; i<arrV1.length ; i++){
      if(arrV1[i].checked == true){
        sumRad += arrV1[i].value;
      }
    }

    for(var i=0; i<arrV2.length ; i++){
      if(arrV2[i].checked == true){
        sumRad += arrV2[i].value;
      }
    }

    for(var i=0; i<arrV3.length ; i++){
      if(arrV3[i].checked == true){
        sumRad += arrV3[i].value;
      }
    }

    document.getElementById('total').value = sumRad ;
  }
</script>

 </form> 
</center>
</div>

</body>
</html> 
```

其余的代码是

```
 <?php

   session_start();
   $Load=$_SESSION['login_user'];
   include('../connect.php');
   $sql= "Select name from student where ID='$Load'";
   $username = mysql_query($sql);
    $id=$_SESSION['login_user'];

                if (isset($_POST['submit']))

{  

   $v1 = $_POST['v1'];
   $v2 = $_POST['v2'];
   $v3 = $_POST['v3'];
   $total = $_POST['total'];

 mysql_query("INSERT into Form1 (P1,P2,P3,TOTAL)
 values('$v1','$v2','$v3','$total')") or die(mysql_error());
 header("Location: mark.php");
 }

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T20:04:08.240

你需要`parseInt()`在`sumRad += arrV1[i].value;`

例如`sumRad += parseInt(arrv1[i].value,10)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T20:06:05.040

在 javascript 中，您实际上是在进行字符串连接，因为每个字段的值不是整数表示，而是字符串表示。要获得总和，您应该执行以下操作：

```
sumRad += parseInt(arrV1[i].value); 
```

我也同意评论质疑为什么你甚至在 javascript 中进行求和。您只是在更新一个隐藏字段，因此您可以轻松地删除隐藏字段和所有相关的 javascript，并简单地在 PHP 中进行求和。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T20:07:43.923

这就是你计算总和的方式：

```
$v1 = intval($_POST['v1']);
$v2 = intval($_POST['v2']);
$v3 = intval($_POST['v3']);
$total = $v1 + $v2 + $v3; 
```

在 Javascript 中执行它很适合显示，但不太可靠（即使很少，也可以禁用）。

Here为您在使用过时的数据库接口时*应该使用*[`intval()`](http://php.net/intval)的替代品提供了一个可接受的替代品，而不是使用准备好的声明的更简单的替代品。[`mysql_real_escape_string()`](http://php.net/mysql_real_escape_string)*[`PDO`](http://php.net/PDO)*

# wpf - WPF 应用程序级 ViewModel

> ID：13315108
> 
> 赞同：0
> 
> 时间：2012-11-09T20:01:33.297
> 
> 标签：wpf, mvvm

我是 WPF 和 MVVM 的新手，但我正在尝试为我的应用程序中的多个窗口创建一个应用程序级视图模型。这是我的代码：

**ApplicationViewModel.cs：**

```
public class ApplicationViewModel : ViewModelBase
{
   // for MainWindow
   private MainWindowViewModel mainWindowViewModel;
   public MainWindowViewModel MainWindowViewModel
   {
      get { return this.mainWindowViewModel; }
      private set
      {
         this.mainWindowViewModel = value;
         OnPropertyChanged("MainWindowViewModel");
      }
   }

   // other window code...

   public ApplicationViewModel()
   {
      this.mainWindowViewModel = new MainWindowViewModel();

      // Now show the MainWindow
      MainWindow mainWindow = new MainWindow();
      mainWindow.Show();
   }
} 
```

**应用程序.xaml：**

```
<Application x:Class="SomeApp.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:viewModel="clr-namespace:SomeApp.viewModel">
   <Application.Resources>
      <viewModel:ApplicationViewModel x:Key="applicationViewModel" />
... 
```

**MainWindow.xaml：**

```
<Window x:Class="SomeApp.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:viewModel="clr-namespace:SomeApp.viewModel">
<Grid DataContext="{StaticResource applicationViewModel}">
   <TextBox Name="courseNameTxtBox" Width="200" MaxLength="251"
            Text="{Binding Path=MainWindowViewModel.SomeMainWindowObject,ValidatesOnDataErrors=True,UpdateSourceTrigger=PropertyChanged}" />
... 
```

由于某种原因，似乎从来没有实例化 applicationViewModel 因为 MainWindow 从来没有显示。我究竟做错了什么？

我也试过这个：

**应用程序.xaml：**

```
<Application x:Class="CourseAttendanceTracking.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Startup="Application_Startup">
... 
```

**应用程序.xaml.cs：**

```
public partial class App : Application
{
   private void Application_Startup(object sender, StartupEventArgs e)
   {
      this.Resources.Add("applicationViewModel", new ApplicationViewModel());
   }
} 
```

我得到这个错误：

> System.Windows.Markup.XamlParseException 发生 Message='Provide value on 'System.Windows.StaticResourceExtension' 引发异常。' 行号“15”和行位置“19”。
> 源=PresentationFramework LineNumber=15 LinePosition=19
> \MainWindow.xaml.cs 中的 ctor()：第 25 行 InnerException：消息=找不到名为“applicationViewModel”的资源。资源名称区分大小写。Source=PresentationFramework StackTrace：在 System.Windows.StaticResourceExtension.ProvideValue(IServiceProvider serviceProvider) 在 MS.Internal.Xaml.Runtime.ClrObjectRuntime.CallProvideValue(MarkupExtension me, IServiceProvider serviceProvider) 的 System.Windows.StaticResourceExtension.ProvideValueInternal(IServiceProvider serviceProvider, Boolean allowDeferredReference) ) 内部异常：

如果我这样做，我的 XAML 工作正常：

```
MainWindow.xaml
<Window.Resources>
   <viewModel:ApplicationViewModel x:Key="applicationViewModel" /> 
```

但我真的不想在这个窗口中实例化 ApplicationViewModel，因为我无法在另一个窗口中看到它。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T20:22:36.983

尝试更改`{StaticResource XXX}`a`{DynamicResource XXX}`

# mysql - MySQL：选择 10 个最近活跃用户的 5 个操作

> ID：13315111
> 
> 赞同：0
> 
> 时间：2012-11-09T20:01:46.727
> 
> 标签：mysql

假设有一个名为“活动”的表，其中包含以下列：

whenItHappened 日期时间，谁发短信，什么短信

我想选择最近一小时内 10 个最近活跃用户的 5 个最近操作。

到目前为止，我有：

```
SELECT * FROM activity
JOIN (
    SELECT who FROM activity
    WHERE whenItHappened >= (CURDATE()- INTERVAL 1 HOUR)
    GROUP BY (who)
    ORDER BY whenItHappened DESC
    LIMIT 10
) AS unique_recent_users
ON unique_recent_users.who = activity.who; 
```

这可以很好地选择最后十个最近活跃用户的所有活动。但是，我想不出一个好的方法来将其限制为每个用户的最后五个操作。

如果我在 SQL 语句的末尾放置一个 LIMIT 子句，它总共只会返回五个结果。期望的行为是，如果在过去一小时内有 10 个活跃用户，它应该显示 50 个操作，每个最近活跃的用户有 5 个操作。

我可以通过使用 PHP 对一个查询轻松地做到这一点，以获取最近的 10 个用户，然后每个用户执行 5 个操作，但我不禁想到必须有一些优雅的方式在 MySQL 中本地执行此操作。

**编辑：（**通过 Darrrrren 的链接，我找到了这个解决方案，它允许我从所有用户中选择 5 个最近的操作。我不确定随着表变大，性能会如何。）

```
select whenItHappened, who, what
from activity
where (
   select count(*) from activity as a
   where a.who = activity.who and a.whenItHappened <= activity.whenItHappened
) <= 5; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T20:10:47.773

在 MySQL 中没有办法优雅地做到这一点。一种有效的方法需要自联接：

```
select a.*
from (SELECT who
      FROM activity
      WHERE whenItHappened >= (CURDATE()- INTERVAL 1 HOUR)
      GROUP BY (who)
      ORDER BY whenItHappened DESC
      LIMIT 10
     ) AS unique_recent_users join
     Activity a
     on unique_recent_users.who = activity.who join
     Activity a2
     on a2.who = a.who and
        a2.whenItHappened >= a.WhenItHappened
group by a.id
having count(*) <= 5 
```

（请注意，这是使用 MySQL 的隐藏列“功能”来返回`group by`语句中未包含的列。）

如果您碰巧在每个用户的活动表中有一个计数器，那么您可以使用此计数器来获取最近的五个。如果您想要 50 个最近的活动，无论用户如何，您也可以这样做。而且，如果您使用几乎任何其他数据库，那么排名函数（`row_number()`特别是）将优雅地解决问题。

# multidimensional-array - 在 Tcl 中动态创建数组

> ID：13315112
> 
> 赞同：2
> 
> 时间：2012-11-09T20:01:49.443
> 
> 标签：multidimensional-array, tcl, traversal

我正在尝试动态填充数组，而不是通过运行如下计数器手动设置它：

```
set all_list  { <my list>}
set num_pc_a_b 10

for {set i 0 ;set j 0 ; set k 0} {$j < $num_pc_a_b} {incr j; incr i ;incr k} {
    array set link_map  {[lindex $all_list $i] $j $k 0 }
} 
```

并希望访问如下变量：

```
foreach {key value value1 value2} [array get link_map] {
    puts "key is $key"
    puts "value is $value"
    puts "value is $value1"
    puts "value is $value2"
} 
```

但它不起作用。我在这里做错了吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T20:31:38.377

对我来说，你的真实身份并不是很*明显*想要做什么并不是很明显，所以我会做一些猜测。

在任何一种情况下，请注意您的使用`array set ...`似乎是错误的：此命令采用数组的名称和将其解释为交替键和值*的列表*，为映射到该键后面的值的每个键在该数组中创建一个条目。您似乎只想在每次迭代中将特定键设置为特定值 - 这是通过`set array(key) value`语法完成的。

另请注意，在您的示例中`j`，`i`和`k`变量似乎在每次迭代中具有相同的值。假设它只是真实世界代码的剩余部分，但否则只有一个变量就足够了。

猜一猜：您想将每个键映射到值列表。这不会像在您的示例中那样工作，因为在 Tcl 中，数组将每个键映射到一个*值；*这个值可能是一个列表。如果我的猜测是正确的，那么要走的路是：

```
for {set i 0 ;set j 0 ; set k 0} {$j < $num_pc_a_b} {incr j; incr i ;incr k} {
    set link_map([lindex $all_list $i]) [list $j $k 0]
}
foreach {key val} [array get link_map] {
    foreach {v1 v2 v3} $val break ;# see a note below
    puts "key is $key"
    puts "value is $v1"
    puts "value is $v2"
    puts "value is $v3"
} 
```

猜猜二：从你对显示的使用来看`foreach`，你可能根本不想使用数组，而是一个列表：

```
set links [list]
for {set i 0 ;set j 0 ; set k 0} {$j < $num_pc_a_b} {incr j; incr i ;incr k} {
    lappend links [lindex $all_list $i] $j $k 0
}
foreach {key v1 v2 v3} $links {
    puts "key is $key"
    puts "value is $v1"
    puts "value is $v2"
    puts "value is $v3"
} 
```

你也可以不做一个平面列表，而是一个改变键和值的列表，每个值都是一个`[list $j $k 0]`，就像第一个猜测示例中一样。

**更新**

猜三个。您将我们的问题标记为`multidimensional-array`。我在您的片段中看不到任何多维性的痕迹，但如果您真的想要它，Tcl 中通常的范例是使用*复合键*。例如，如果您想通过 的值来键入数组`j`，`i`并且`k`这些变量在每次迭代中都有，请使用以下内容：

```
for {set i 0 ;set j 0 ; set k 0} {$j < $num_pc_a_b} {incr j; incr i ;incr k} {
    set link_map($i,$j,$k) ...
} 
```

这将创建一个使用逗号连接三个值的字符串，并将结果用作键。

* * *

爆炸列表的用法`foreach ... break`是一个巧妙的技巧，但如果您有 Tcl 8.5 或更高版本，请`lassign $list v1 v2 v3`改用。

# shell - 循环的Shell脚本：变量奇异性

> ID：13315114
> 
> 赞同：1
> 
> 时间：2012-11-09T20:01:52.840
> 
> 标签：shell, variables, sh, sgi, irix

我的 shell-fu 很弱，这些 SGI (IRIX 6.5) 盒子没有帮助。它像我期望的那样在 Linux 上工作。

最终目标是在远程系统上运行一个或多个 shell 脚本。在适当的位置有一个 shell 脚本，所以这应该很简单：

```
$ ssh remote.host '/bin/sh -c "for s in *.sh; do echo \$s; done"'
s - Undefined variable 
```

……嗯，好的。出于随机好奇，只需更改变量名称：

```
$ ssh remote.host '/bin/sh -c "for i in *.sh; do echo \$i; done"'
12 
```

这同样会导致失败：

```
$ ssh remote.host '/bin/sh/ -c "for s in `ls *.sh`; do echo \$s; done"'\
s - Undefined variable 
```

有人可以教我 IRIX 的魔法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T13:38:50.377

问题是远程主机上的登录 shell 是 csh。csh 的一个奇怪属性是双引号内的美元符号总是特殊的（不能转义）。只要您不在其中使用换行符，单引号就可以按预期工作（csh 要求这些用反斜杠转义）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T23:17:29.170

我有点'随机发现，当我交换单引号和双引号时，这个特定的 shell 实现更快乐。

我的运气要好得多：

```
ssh remote.host "/bin/sh -c 'for s in \`ls *.sh\`; do echo \$s; done'" 
```

# windows - 为 Windows 8 获取稳定的唯一设备 ID

> ID：13315116
> 
> 赞同：2
> 
> 时间：2012-11-09T20:02:00.517
> 
> 标签：windows, windows-8, winjs

因此，有很多类似[这样](https://stackoverflow.com/questions/12057069/windows8-device-identifier)的帖子，都是关于获取 Windows 8 设备的唯一标识符的。然而，也认识到标识符会随着各种系统组件的变化而变化。从[文档](http://msdn.microsoft.com/en-us/library/windows/apps/jj553431.aspx)：

> 硬件漂移是应用程序不应按原样使用 ASHWID 字节流的原因。如果一些硬件组件发生更改或关闭，API 将返回不同的 ASHWID。该应用程序可能会错误地将同一设备识别为新设备。以下是一些可能导致硬件漂移的合理场景：
> 
> *   一天快结束时，一位用户想让电池持续到她回家，所以她关闭了蓝牙和 Wi-Fi，同时保持 3G/4G 开启以与云连接。
> *   用户插入 USB 3G 数据卡。
> *   底层操作系统/片上系统电源管理可能会关闭某些内核。

这是一种非常令人遗憾的状况。文档建议查看 ASHWID（应用程序特定硬件 ID）并对不太可能更改的各种组件进行加权，并忽略（赋予权重 0）可变的事物，例如是否存在扩展坞。但是，我没有看到任何关于如何识别组件的文档。我得到的标识符只是一个数字列表。

有没有更好的方法来获得稳定的唯一设备 ID（如果它是特定于包的，只要它是每个设备/包组合唯一的就可以了）？~~或者，有人可以向我指出如何识别由生成的令牌中的组件的文档`HardwareIdentification.GetPackageSpecificToken`吗？~~

**更新：**

解决了组件部分。但仍然对获得稳定 id 的更好方法感兴趣。

> 字节流由多组四个字节组成。前两个字节包含组件的类型，接下来的两个字节包含值。使用下表确定每个组件的类型：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T19:32:58.337

您是否尝试过使用[Receipts](http://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.store.currentapp.getappreceiptasync.aspx) API。文档表明它在“Receipt”元素下有一个设备标识符“ReceiptDeviceId”。唯一的问题是 API 仅在用户登录到商店时才有效。

# drools - 流口水 - 可以调用额外的规则文件或继承规则？

> ID：13315119
> 
> 赞同：1
> 
> 时间：2012-11-09T20:02:04.590
> 
> 标签：drools, rules

我正在尝试找到一种使用流口水继承规则的方法，或者从另一个 .drl 文件加载 .drl 文件（从我最近的搜索来看，这似乎是不可能的）。

总而言之，我们有多个客户，每个客户都有一个或多个项目。客户有大量的客户特定规则，每个项目可能有也可能没有一小组客户特定的规则。为避免重用代码，我希望为客户及其项目提供单独的规则文件，然后让项目规则能够继承或调用客户端规则。有没有办法做到这一点？

在没有深入研究我们的代码的情况下，我试图找到一种方法来做到这一点，而无需修改 java，因为这段代码已经影响了多个客户端并且它在某种程度上是自动化的。我知道我们可以添加另一段代码来调用另一个规则文件，但我希望找到解决方法。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T08:42:45.527

你可以看看[Drools Flow](http://www.jboss.org/drools/drools-flow)

可以为每个客户/项目定义规则流组，并在流定义中指定它们的激活约束。

您的流程过于简单，可能看起来像这样![样品流](../Images/cd4a615ef5663a9db41f87a58b920b65.png)

您需要在创建知识库的过程中定义 flow/bpmn2 文件，所以一些代码编辑似乎是不可避免的。

# c# - WPF 操作中的线程

> ID：13315122
> 
> 赞同：-5
> 
> 时间：2012-11-09T20:02:09.630
> 
> 标签：c#, wpf, multithreading

我有一些*操作*（我使用 WPF）。我不会在单独的**线程**中运行它们。我该怎么做？

例子：

```
foreach (string d in Directory.GetDirectories(sDir)) 
{
    foreach (string f in Directory.GetFiles(d, txtFile.Text)) 
    {
        lstFilesFound.Items.Add(f);
    }
    DirSearch(d);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T20:05:22.703

如果您使用的是 .NET 4，则可以使用[任务并行库](http://msdn.microsoft.com/en-us/library/dd537609%28v=vs.100%29.aspx)

只是 C# .NET 4 控制台应用程序中的一个示例：

```
internal class Program
    {
        private static readonly object listLockObject = new object();
        private  static readonly IList<string> lstFilesFound = new List<string>();
        private static readonly TxtFile txtFile = new TxtFile("Some search pattern");
        private static string sDir = "Something";

        public static void Main()
        {
            Parallel.ForEach(Directory.GetDirectories(sDir), GetMatchingFolderAndDoSomething);
        }

        private static void GetMatchingFolderAndDoSomething(string directory)
        {
            //This too can be parallelized.
            foreach (string f in Directory.GetFiles(directory, txtFile.Text))
                {
                    lock (listLockObject)
                    {
                        lstFilesFound.Add(f);
                    }
                }

            DirSearch(directory);
        }

        //Make this thread safe.
        private static void DirSearch(string s)
        {
        }

        public class TxtFile
        {
            public TxtFile(string text)
            {
                Text = text;
            }

            public string Text { get; private set; }
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T20:12:11.077

如果您正在使用 WPF 并且需要使用多线程，则必须[从将 UI 与业务逻辑分离](http://en.wikipedia.org/wiki/Model_View_ViewModel)开始，否则您将得到无穷无尽的`Dispatcher.Invoke()`调用链。

正如另一个答案还指出，请参阅任务并行库以简化多线程应用程序的开发，但请注意 WPF UIElements 的属性只能由创建它们的线程（通常称为调度程序线程）访问。

# c - 指向结构的自由 3D 指针

> ID：13315125
> 
> 赞同：0
> 
> 时间：2012-11-09T20:02:20.020
> 
> 标签：c, pointers

我有一个结构 GLOBE，其中包含地球上每个纬度单元的几个参数。我有一个三重指针，如下所示：

```
data->map = (struct GLOBE ***)malloc_2d(NROWS, NCOL, sizeof(struct GLOBE *));

struct GLOBE {
  double *var;
}; 
```

其中 malloc_2d 是一个自定义函数，用于分配下面定义的二维数组。map 可以遍历所有 GLOBE。

```
void** malloc_2d (size_t nrows, size_t ncols, int elementsize) {
size_t i;
void ** ptr;
if ( (ptr = (void**)malloc(nrows * sizeof(void *))) == NULL ) {
  fprintf(stderr, "malloc_2d: out of memory\n");
  exit(1);
}
if ( (ptr[0] = malloc(nrows * ncols * elementsize)) == NULL ) {
  fprintf(stderr, "malloc_2d: out of memory\n");
  exit(1);
}

for (i=1; i<nrows; i++) 
  ptr[i] = (char*)ptr[0] + i * ncols * elementsize;
  return ptr; 
```

}

GLOBE 还有其他动态分配的 1D 和 2D 数组（例如 double *var）。因此，当我必须释放所有 GLOBE 和每个 GLOBE 内动态分配的内存时，我遇到了错误。

具体来说，我尝试：

```
for(size_t i = 0; i < data->n_lat; i++)
    for(size_t i = 0; i < data->n_lat; i++) {
        free(data->map[i][j]->var);

free(data->map); 
```

但是，这似乎不起作用。我应该改变什么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T00:14:17.793

( `malloc_2d()`copy-paste?) 函数似乎是正确编写的，但这里发布的其余代码只是完全废话......

我将在此处使用输入代码在此处发布您想要执行的类似操作的工作示例`malloc_2d()`。我建议你玩弄它，直到你掌握 C 中指针的基本概念。

此外，请随时询问（明确）有关代码的问题。

```
#include <stdio.h>
#include <stdlib.h>

#define NROWS 8
#define NCOL 6

struct GLOBE {
  double **var;
};

void** malloc_2d (size_t nrows, size_t ncols, int elementsize)
{
        // code posted
}

void free_2d (void ** ptr, size_t n_rows)
{
    int i;

    // free the "big part"
    free(ptr[0]);

    // free the array of pointers to the rows
    free(ptr);
}

int main()
{
    struct GLOBE gl;
    int i, j;

    gl.var = (double **)malloc_2d(NROWS, NCOL, sizeof(double));

    for (i = 0; i < NROWS; ++i) {
        for (j = 0; j < NCOL; ++j) {
            gl.var[i][j] = i * j;
            printf("%0.1f ", gl.var[i][j]);
        }
        printf("\n");
    }

    free_2d((void **)gl.var, NROWS);

    return 0;
} 
```

# php - ZfcUser\Service\User 依赖注入模式解释

> ID：13315127
> 
> 赞同：1
> 
> 时间：2012-11-09T20:02:32.843
> 
> 标签：php, dependency-injection, zend-framework2

在参加了 ZendCon 2012 之后，我看到了 ZF2 中的许多类是如何实现 DI 并通过构造函数将它们的依赖项传递给它们的。ZF2 有一个服务管理器可以帮助解决这个问题。我正在尝试学习如何实现这一点并学习其最佳实践。

然后......我加载了[ZfcUser](https://github.com/ZF-Commons/ZfcUser)模块并看到[用户服务](https://github.com/ZF-Commons/ZfcUser/blob/master/src/ZfcUser/Service/User.php)并没有完全遵循这种模式，实际上它隐藏了它的依赖关系在一堆延迟加载 getter 后面。现在，这个模块最初是由 Evan Coury 编写的，他是 ZF2 中整个模块系统背后的大脑，所以我知道这个特定模块写得很好，或者至少遵循了建议的 zf2 最佳实践。

我的问题是，**为什么这个类将其依赖项隐藏在 getter 后面并实际上从服务管理器中获取它们**（在这种情况下，它看起来就像一个注册表）**，而不是在构造函数中明确定义它们？**

这实际上是不是违背了 DI 明确依赖关系的原则？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T05:27:34.070

我从 Zend Framework 邮件列表上的 Artur Bodera 那里得到了这个问题的答案：

> 这并不反对。它仍然是一种“控制反转”的做事方式，这是一件好事。
> 
> ZF2 DI 在 2011 年底一直在积极开发中，并在贡献者中获得了很多关注。但在某些时候，性能和配置文件的复杂性成为了一个问题。这就是为什么提出了ServiceManager的想法。
> 
> 直到 beta1 (AFAIR) 之前，几乎所有内容都在 DI 中定义，并且配置文件非常庞大。应用程序很慢，内存使用量很大，与 ZF1 Application_Service 或类似的相比，复杂性实际上有所增加。有一些关于如何进一步优化 DI 的想法，但一群贡献者提出了另一个想法：SM。
> 
> ServiceManager 允许以更明确的方式构建服务。例如，您可以只使用带有*几个*“new This”、“new最后”和“return $service”。
> 
> 没有针对 SM 或 DI 的严格政策或建议。两者都可以，都有优点和缺点。这是您的选择，您将使用它。两者都被 Zend\Mvc 识别，并将从您的应用程序配置中读取。
> 
> 至于模块 - 每个模块的作者决定使用哪种方法。再一次 - 两者都是处理依赖关系和自动构造实例的有效方法。Evan 在这个例子中选择了 SM 工厂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T21:06:34.897

希望埃文能来解释自己，因为他最喜欢能做得更好。我的猜测是，这仅仅是因为每次调用 User-Service 时都加载所有依赖项，只会产生**过多的开销**。因此延迟加载。很可能这就是它的全部。

# sql-server - 通过严重性 < 20 的链接服务器捕获错误

> ID：13315128
> 
> 赞同：0
> 
> 时间：2012-11-09T20:02:39.400
> 
> 标签：sql-server, error-handling, try-catch, linked-server

我遇到了与这个问题类似的问题：[TRY CATCH with Linked Server in SQL Server 2005 Not Working](https://stackoverflow.com/questions/2503607/try-catch-with-linked-server-in-sql-server-2005-not-working)

我正在运行这个 try catch：

```
 Declare @command nvarchar(100)
    SET @command = 'SELECT column FROM table'
    BEGIN TRY
        BEGIN TRY
            exec ' + @Server_Name + @DB_name + '.dbo.sp_executesql @command
    END TRY
    BEGIN CATCH
        PRINT EXCEPTION
    END CATCH 
```

我不认为我可以使用`RAISEERROR`，因为我没有运行我自己的存储过程，我只运行一个简单的选择语句。我尝试过使用`@@ERROR`，但这也不适用于链接服务器。因为我得到的错误小于20，所以我遇到了这个问题：

> 如果远程存储过程调用严重性小于 20 的 RAISERROR，并且远程存储过程的范围在本地服务器上的 TRY 块内，则 RAISERROR 不会导致控制权传递给 TRY...CATCH 构造的 CATCH 块

[http://msdn.microsoft.com/en-us/library/ms191515.aspx](http://msdn.microsoft.com/en-us/library/ms191515.aspx)

我发现了这个问题：[如何捕获从链接服务器返回的错误消息？](https://stackoverflow.com/questions/2168207/how-to-capture-error-message-returned-from-linked-server?rq=1)也没有回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T21:18:06.650

我发现了如何通过将 try catch 传递给链接服务器并使用 OUTPUT 参数获取错误来解决此问题。例如：

```
SET @command = '
BEGIN TRY
    exec (''select * from xxx'') 
    SELECT @resultOUT = @@ERROR
END TRY
BEGIN CATCH
    SELECT @resultOUT = @@ERROR
END CATCH'
SET @ParmDefinition = N'@resultOUT nvarchar(5) OUTPUT'
exec my_linked_server.sp_executesql 
    @command, 
    @ParmDefinition, 
    @resultOUT=@result OUTPUT 
```

# ios - 使用崩溃报告在 XCode 中修复 iPhone 应用程序

> ID：13315130
> 
> 赞同：0
> 
> 时间：2012-11-09T20:02:45.140
> 
> 标签：ios, objective-c

我的应用程序中有一个功能，每次用户在操作后点击“提交”按钮时，游戏都会检查该操作是否是 Game Center 中的成就。最近，该应用程序在一些有和没有连接的人（所有不同的 iPhone 型号、iPad 型号和 iOS 系统）中崩溃。从崩溃日志看来，这就是问题所在：

```
Incident Identifier: E44706D0-6B10-44DD-BDB2-EDCD563011DC
CrashReporter Key:   7580fe38161bf461fc45c8e5c4c5ab07747756be
Hardware Model:      iPhone5,2
Process:         APPNAME [1417]
Path:            /var/mobile/Applications/9B7EAD6C9-4A1F-4A46-84DE-762EDED1A1BD/APPNAME.app/APPNA
Identifier:      APPNAME
Version:         ??? (???)
Code Type:       ARM (Native)
Parent Process:  launchd [1]

Date/Time:       2012-11-08 23:40:52.926 -0500
OS Version:      iOS 6.0.1 (10A525)
Report Version:  104

Exception Type:  EXC_CRASH (SIGABRT)
Exception Codes: 0x0000000000000000, 0x0000000000000000
Crashed Thread:  0

Last Exception Backtrace:
0   CoreFoundation                  0x3b3c03e2 0x3b2fe000 + 795618
1   libobjc.A.dylib                 0x3a41995e 0x3a411000 + 35166
2   CoreFoundation                  0x3b3c0302 0x3b2fe000 + 795394
3   CoreFoundation                  0x3b3103e6 0x3b2fe000 + 74726
4   APPNAME                     0x000f9950 -[Gamer updateCurrentAchievements:] (Gamer.m:621)
5   APPNAME                     0x000f9698 -[Gamer checkWord] (Gamer.m:560)
6   APPNAME                     0x000f8d22 -[Gamer ButtonPressed:] (Gamer.m:394) 
```

这是它所指的代码块：

```
-(void) updateCurrentAchievements:(int) achievement_number
{
NSLog(@"Achievement Number is %d",achievement_number);
char ch = [ self.appDelegate.previous_Achieved characterAtIndex:achievement_number-1 ];
if( ch == '0' )
{
    currentAchieved[self.appDelegate.new_Achievements] = achievement_number;
    self.appDelegate.new_Achievements++;
    NSLog(@"new achievements are : %d",self.appDelegate.new_Achievements);
    self.appDelegate.current_Achieved = [self.appDelegate.current_Achieved stringByReplacingCharactersInRange:NSMakeRange((achievement_number-1), 1) withString:@"1"];
        self.appDelegate.previous_Achieved = self.appDelegate.current_Achieved;
        [self.appDelegate checkAchievements:achievement_number];
    }
    NSLog(@"current Achievement string is %@ and length is %d",self.appDelegate.current_Achieved,[self.appDelegate.current_Achieved length]);
} 
```

有什么想法可能会在这里发生吗？任何见解都值得赞赏。如果我没有提供更多信息，我很抱歉，但请告诉我，我当然可以为您提供更多信息。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T22:27:51.180

If `achievement_number` is 0 when starting the method, a SIGABRT will happen when this line is invoked:

`self.appDelegate.current_Achieved = [self.appDelegate.current_Achieved stringByReplacingCharactersInRange:NSMakeRange((achievement_number-1), 1) withString:@"1"];`

# typescript - 强制 Typescript 对象的索引成员的类型？

> ID：13315131
> 
> 赞同：499
> 
> 时间：2012-11-09T20:02:45.867
> 
> 标签：typescript

我想将 string -> string 的映射存储在 Typescript 对象中，并强制所有键映射到字符串。例如：

```
var stuff = {};
stuff["a"] = "foo";   // okay
stuff["b"] = "bar";   // okay
stuff["c"] = false;   // ERROR!  bool != string 
```

有没有办法让我强制这些值必须是字符串（或任何类型..）？

* * *

## 回答 #1

> 赞同：844
> 
> 时间：2012-11-09T20:08:05.973

```
var stuff: { [key: string]: string; } = {};
stuff['a'] = ''; // ok
stuff['a'] = 4;  // error

// ... or, if you're using this a lot and don't want to type so much ...
interface StringMap { [key: string]: string; }
var stuff2: StringMap = { };
// same as above 
```

* * *

## 回答 #2

> 赞同：217
> 
> 时间：2016-09-01T21:35:03.717

```
interface AgeMap {
    [name: string]: number
}

const friendsAges: AgeMap = {
    "Sandy": 34,
    "Joe": 28,
    "Sarah": 30,
    "Michelle": "fifty", // ERROR! Type 'string' is not assignable to type 'number'.
}; 
```

在这里，接口`AgeMap`强制将键作为字符串，将值强制作为数字。关键字`name`可以是任何标识符，应该用于建议您的接口/类型的语法。

您可以使用类似的语法来强制对象对联合类型中的每个条目都有一个键：

```
type DayOfTheWeek = "sunday" | "monday" | "tuesday" | "wednesday" | "thursday" | "friday" | "saturday";

type ChoresMap = { [day in DayOfTheWeek]: string };

const chores: ChoresMap = { // ERROR! Property 'saturday' is missing in type '...'
    "sunday": "do the dishes",
    "monday": "walk the dog",
    "tuesday": "water the plants",
    "wednesday": "take out the trash",
    "thursday": "clean your room",
    "friday": "mow the lawn",
}; 
```

当然，您也可以将其设为泛型类型！

```
type DayOfTheWeek = "sunday" | "monday" | "tuesday" | "wednesday" | "thursday" | "friday" | "saturday";

type DayOfTheWeekMap<T> = { [day in DayOfTheWeek]: T };

const chores: DayOfTheWeekMap<string> = {
    "sunday": "do the dishes",
    "monday": "walk the dog",
    "tuesday": "water the plants",
    "wednesday": "take out the trash",
    "thursday": "clean your room",
    "friday": "mow the lawn",
    "saturday": "relax",
};

const workDays: DayOfTheWeekMap<boolean> = {
    "sunday": false,
    "monday": true,
    "tuesday": true,
    "wednesday": true,
    "thursday": true,
    "friday": true,
    "saturday": false,
}; 
```

**10.10.2018 更新：** 在下面查看@dracstaxi 的答案 - 现在有一个内置类型`Record`可以为您完成大部分工作。

**1.2.2020 更新：** 我已经从我的答案中完全删除了预制的映射接口。@dracstaxi 的回答使它们完全无关紧要。如果您仍想使用它们，请查看编辑历史记录。

* * *

## 回答 #3

> 赞同：164
> 
> 时间：2018-07-03T19:31:17.203

`Record<T, K>`快速更新：从 Typescript 2.1 开始，有一个像字典一样的内置类型。

在这种情况下，您可以声明如下内容：

```
var stuff: Record<string, any> = {}; 
```

您还可以通过联合文字类型来限制/指定潜在的键：

```
var stuff: Record<'a'|'b'|'c', string|boolean> = {}; 
```

这是使用文档中的记录类型的更通用示例：

```
// For every properties K of type T, transform it to U
function mapObject<K extends string, T, U>(obj: Record<K, T>, f: (x: T) => U): Record<K, U>

const names = { foo: "hello", bar: "world", baz: "bye" };
const lengths = mapObject(names, s => s.length);  // { foo: number, bar: number, baz: number } 
```

[TypeScript 2.1 文档`Record<T, K>`](https://www.typescriptlang.org/docs/handbook/release-notes/typescript-2-1.html#partial-readonly-record-and-pick)

我看到使用它的唯一缺点`{[key: T]: K}`是您可以对有用的信息进行编码，说明您正在使用哪种键来代替“键”，例如，如果您的对象只有主键，您可以像这样暗示：`{[prime: number]: yourType}`.

这是我为帮助进行这些转换而编写的正则表达式。这只会转换标签为“key”的情况。要转换其他标签，只需更改第一个捕获组：

寻找：`\{\s*\[(key)\s*(+\s*:\s*(\w+)\s*\]\s*:\s*([^\}]+?)\s*;?\s*\}`

代替：`Record<$2, $3>`

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2020-07-13T12:34:09.520

您可以将名称传递给未知键，然后编写您的类型：

```
type StuffBody = {
  [key: string]: string;
}; 
```

现在您可以在类型检查中使用它：

```
let stuff: StuffBody = {}; 
```

但是对于**FlowType**，不需要名称：

```
type StuffBody = {
  [string]: string,
}; 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2016-09-30T23:17:21.987

@Ryan Cavanaugh 的回答完全可以并且仍然有效。仍然值得补充的是，截至 16 年秋季，当我们可以声称大多数平台都支持 ES6 时，当您需要将某些数据与某些键相关联时，几乎总是更好地坚持 Map。

我们在写`let a: { [s: string]: string; }`的时候要记住，typescript 编译好后就没有 type data 之类的东西了，它只是用来编译的。和 { [s: string]: string; } 将编译为 {}。

也就是说，即使你会写这样的东西：

```
class TrickyKey  {}

let dict: {[key:TrickyKey]: string} = {} 
```

这只是不会编译（即使对于`target es6`，你会得到`error TS1023: An index signature parameter type must be 'string' or 'number'.`

所以实际上你受限于字符串或数字作为潜在的键，所以这里没有太多强制类型检查的感觉，特别是请记住，当 js 尝试通过数字访问键时，它会将其转换为字符串。

因此，即使键是字符串，也可以假设最佳做法是使用 Map 是非常安全的，所以我会坚持：

```
let staff: Map<string, string> = new Map(); 
```

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2018-12-11T05:36:11.413

定义接口

```
interface Settings {
  lang: 'en' | 'da';
  welcome: boolean;
} 
```

强制键为设置界面的特定键

```
private setSettings(key: keyof Settings, value: any) {
   // Update settings key
} 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2022-01-19T13:19:40.123

实际上有一个内置的实用程序[Record](https://www.typescriptlang.org/docs/handbook/utility-types.html#recordkeys-type)：

```
 const record: Record<string, string> = {};
    record['a'] = 'b';
    record[1] = 'c'; // leads to typescript error
    record['d'] = 1; // leads to typescript error 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2017-11-19T11:13:11.767

基于@shabunc 的回答，这将允许强制执行键或值（或两者）成为您想要强制执行的任何内容。

```
type IdentifierKeys = 'my.valid.key.1' | 'my.valid.key.2';
type IdentifierValues = 'my.valid.value.1' | 'my.valid.value.2';

let stuff = new Map<IdentifierKeys, IdentifierValues>(); 
```

也应该使用`enum`而不是`type`定义来工作。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-09-04T12:43:33.403

```
interface AccountSelectParams {
  ...
}
const params = { ... };

const tmpParams: { [key in keyof AccountSelectParams]: any } | undefined = {};
  for (const key of Object.keys(params)) {
    const customKey = (key as keyof typeof params);
    if (key in params && params[customKey] && !this.state[customKey]) {
      tmpParams[customKey] = params[customKey];
    }
  } 
```

如果您了解这个概念，请发表评论

# php - cron 作业的 PHP GET 请求 - 建议？

> ID：13315138
> 
> 赞同：0
> 
> 时间：2012-11-09T20:03:12.637
> 
> 标签：php, file-get-contents

我的网站有一个功能，可以接受一些参数来显示图像。当前设置的方式是，当对图像发出特定请求时（作为带有多个参数的脚本的 GET 请求），执行 MySQL 查询，然后将查询结果缓存在文件中，因此后续相同请求不会命中数据库，而是获取缓存文件（它使事情变得更快）。缓存在 8 小时后过期。我想扩展这个概念，所以我创建了一个 php 脚本，它将每 8 小时在调度程序上向图像脚本发出许多请求。我目前正在使用 file_get_contents，它确实在我的浏览器中工作，我打算将它作为一个 cron 作业运行，这意味着它将从 Unix 调度程序中调用。在其最基本的形式中，它看起来像这样：

```
echo file_get_contents('http://www.blabla.com/images.php?action=getpics&imagetype=recent& per_page=60&page=1&orderby_view=0&tag_filter=trees'); 
```

它确实有效，但有没有更好或更优雅/安全的方法来做到这一点？最终，我将循环参数，以便进行多个 GET，以便缓存最一般的搜索。

# facebook - Facebook 支付订阅 - 客户端回调

> ID：13315142
> 
> 赞同：1
> 
> 时间：2012-11-09T20:03:34.920
> 
> 标签：facebook, payment, subscription, facebook-credits, asynccallback

我已将一些信用测试用户添加到我的应用程序并尝试进行付款订阅。一开始一切都很好，但最近我遇到了一些与此相关的问题。进一步说，我收到以下消息：**抱歉，出现问题，我们无法完成您的请求。请稍后再试。**将连续的客户端回调数据设置为空。我怀疑我没有对订阅付款对话框的 FB.ui 调用进行任何重大更改。有人可以分享他/她对此的看法吗？

我已经查看了 developer.facebook 支持页面，并没有提供太多关于此的反馈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T23:05:02.107

Facebook 通知服务会发生这种情况。我的意思是，fb-service 核心有时会停止工作，然后再次投入使用，就好像什么都没发生一样。两者之间的延迟可能需要几分钟到几周的时间。此外，每次通知停止工作时在 Facebook 开发人员网站上提出问题一点也不好。

# bash - 如何使用陷阱设置按钮 ESC 和 F5？

> ID：13315145
> 
> 赞同：0
> 
> 时间：2012-11-09T20:03:43.203
> 
> 标签：bash

如何在按“ESC”时运行使用陷阱函数 foo () 并在按“F5”时运行函数 foo2 () ？建议任何人？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T20:09:18.347

试试看：

```
man bash | less +'/  bind ' 
```

在这里编辑一个有趣的链接： [在 bash 中，如何将功能键绑定到命令？](https://stackoverflow.com/questions/4200800/in-bash-how-do-i-bind-a-function-key-to-a-command)

但是 ESC 键不应该被绑定，因为它被用作键转义字符；删除 ESC 绑定：

```
bind -r '\e' 
```

试了之后好像有bug： http: [//osdir.com/ml/bug-bash-gnu/2010-07/msg00008.html](http://osdir.com/ml/bug-bash-gnu/2010-07/msg00008.html)

# axapta - 创建记录后如何禁用表单字段？

> ID：13315146
> 
> 赞同：0
> 
> 时间：2012-11-09T20:03:46.287
> 
> 标签：axapta

我是 AX 新手，我仍在学习如何使用覆盖方法。

在类似于 HcmPayrollLine 的表单上，我想在创建每条记录后禁用它的所有字段。因此，在我输入一条记录并单击新建后，我刚刚创建的记录应该被禁用/灰显。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T00:21:56.553

这是新表吗？它应该对所有用户都以这种方式工作吗？

您可以将`AllowEdit`每个字段的属性设置为`No`将`AllowEditOnCreate`属性设置为`Yes`。

或者您可以覆盖`active`表单数据源的方法并添加类似`yourTable_ds.allowEdit(!yourTable.RecId);`after的内容`super();`。

它有帮助吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T14:13:31.770

一个简单的，只需将`AllowEdit`相关表字段上的属性设置为`No`.

# c# - Windows 注册表 API 在预关机处理期间返回 ERROR_WRITE_PROTECT

> ID：13315148
> 
> 赞同：0
> 
> 时间：2012-11-09T20:03:59.857
> 
> 标签：c#, c++, windows, winapi, registry

我正在本地服务中进行预关机处理。为此，我需要将一些值写入本地系统注册表（没什么大不了的。）我从 Windows 7 上的 SERVICE_CONTROL_SHUTDOWN 通知调用注册表 API，它大多数时候都有效，除了有时我开始从所有注册表 API 返回 ERROR_WRITE_PROTECT。

知道为什么我会收到此错误以及保存数据的解决方法吗？

# sas - SAS 数据步数计算图中的节点/边

> ID：13315152
> 
> 赞同：3
> 
> 时间：2012-11-09T20:04:16.620
> 
> 标签：sas, datastep

假设我有一个名为 的数据集中表示的有**向**`links`图，它有两个变量：`from_id`和`to_id`。我想使用 SAS Data Step 做两件事：（1）计算节点数，（2）计算边数。

假设`links`数据集如下所示。

```
from_id    to_id
----------------
   1         2
   2         3
   3         1
   3         2 
```

在此示例中，有 3 个节点和 4 条边。（我们可以**假设 中没有重复**的边`links`）。节点是 1、2 和 3。边是 1->2、2->3、3->1 和 3->2。

下面是一个 SAS 宏，它使用 SAS Data Step 和 proc sql 来计算节点和边。它工作得很好，但我希望使用 SAS Data Step 以便（可能）更快地计算节点和边。

```
/* display number of nodes and edges for graph */
%macro graph_info(links);
data nodes;
    set &links;
    node_id = from_id;
    output;
    node_id = to_id;
    output;
    keep node_id;
run;

proc sql noprint;
    select count(distinct node_id) into :numNodes from nodes;
quit;
proc datasets lib=work nolist;
    delete nodes;
quit;

proc sql noprint;
    select count(*) into :numEdges from &links;
quit;

%put Nodes: &numNodes;
%put Edges: &numEdges;
%mend; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T20:27:08.140

如果您有足够的内存，您可以使用散列对象来执行此操作。

请注意：此代码未经测试，因为我手头没有 SAS 安装。然而，基本思想应该有效。您遍历数据步骤，将每个节点添加到散列对象，并在最后一个对象上将宏变量设置为散列对象的大小。

```
data _null_;
  set links end=lastrec;
  format node_id 8.;
  if _N_ eq 1 then do;
    declare hash h();
    h.defineKey("node_id");
    h.defineDone();
  end;
  node_id = from_id;
  rc=h.find();
  if rc ne 0 then h.add();
  node_id = to_id;
  rc=h.find();
  if rc ne 0 then h.add();
  if lastrec then do;
    call symput('numLinks', put(h.num_items, 8\. -L));
    call symput('numEdges', put(_N_, 8\. -L));
  end;
run; 
```

# sqlite - SQLite 中的复合键

> ID：13315154
> 
> 赞同：3
> 
> 时间：2012-11-09T20:04:24.053
> 
> 标签：sqlite, composite-primary-key

如何在 SQLite 中放置复合键？在 SQL Server 中，我们选择多个列，然后设置主键。SQLite 中的方法是什么？

我正在使用 SQLite 数据库浏览器来管理我的数据库结构，我找不到将复合键放入表中的选项，或者我可能遗漏了一些东西。有人会帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T20:07:54.650

在语句中放置一个`PRIMARY KEY (col1, col2, col3)`约束。`CREATE TABLE`SQLite 不支持在创建表后更改表的主键（无论如何这有点愚蠢）。

# php - 交叉表引用

> ID：13315155
> 
> 赞同：0
> 
> 时间：2012-11-09T20:04:24.020
> 
> 标签：php, mysql, cakephp

嗨，伙计们，这可能会产生一个奇怪的问题，但这里有：

这只是一个基本示例，因此您可以理解我想要实现的目标。

如果我有一个带有两个表的 mysql 数据库：“liquid_avaliable”和“liquid_records”。Liquid avliable 将有 3 列 id、name、amount。Liquid_records 将具有 id、name、amount_used、liquid_avaliable_id。

是否有可能每次添加“流动记录”时从可用表中减去该金额。

目的是让您可以快速检查可用液体表，看看您还剩下多少。

如果有人能指出我正确的方向，将不胜感激。

我正在开发的应用程序是在“cakePHP”中构建的，我的数据库系统是 mysql，尽管 Postgre sql 也是可用的。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T20:41:45.190

是的 - 您可以使用[afterSave()](http://book.cakephp.org/2.0/en/models/callback-methods.html#aftersave)回调方法。

保存 LiquidRecord 时它将自动触发 - 此时您可以添加逻辑以重新计算并将新总数保存到您的 LiquidAvailable 模型中。

另一种选择是查看[CakePHP 的 Event System](http://book.cakephp.org/2.0/en/core-libraries/events.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T20:19:25.897

你有几种方法可以解决这个问题。

(1) 你什么都不做，只计算运行时可用的数量。对于合理的硬件和中等大小的数据，这可能是一个可接受的解决方案。即使多达数十万行，性能也应该是合理的。

(2) 规范的数据库解决方案是使用触发器。在“液体记录”表上创建触发器。添加新记录时，从另一个表中减去或添加金额。

(3) 使用存储过程对表进行所有插入。这是我的首选方法。然后，存储过程可以增加或减少其他值（如果需要，还可以进行日志记录和其他操作）。

我建议您将所有数据操作包装到存储过程中，但继续 (1)。编写查询以从数据结构中获取您想要的内容。根据需要添加索引。如果这不起作用，则继续进行（3）。

# php - 针对低效查询审计 PHP

> ID：13315159
> 
> 赞同：3
> 
> 时间：2012-11-09T20:04:33.063
> 
> 标签：php, mysql

我正在开发一个非常大的 PHP 代码库（主要是程序性的），在过去 10 年里，我之前的开发人员拼凑了这个代码库，我们现在正经历着沉重的数据库负载。查看某些文件会显示正在执行的 MySQL 查询超过 40 到 60 个。花时间在这个令人讨厌的大文件中追踪它们的用途通常表明它们已进行查询并且从未使用过结果。我觉得如果我能确定代码库中的问题区域，我就可以开始重构了。

我在 StackOverflow 上看到过很多关于各种审计工具的帖子：

*   [https://stackoverflow.com/questions/4273244/auditing-a-php-codebase?lq=1](https://stackoverflow.com/questions/4273244/auditing-a-php-codebase?lq=1)
*   [是否有用于 PHP 文件的静态代码分析器 [如 Lint]？](https://stackoverflow.com/questions/378959/is-there-a-static-code-analyzer-like-lint-for-php-files)

不过，我还没有找到任何可以分析脚本中查询使用情况的东西。例如，文件中包含多少 SELECT、INSERT 和 UPDATE 查询。更有趣的是，其中有多少包含在循环结构中？我写了一个快速的脏递归文件搜索来确定一些基本问题：

```
 $it = new RecursiveDirectoryIterator($path);
   foreach(new RecursiveIteratorIterator($it) as $file) 
   {
      if(stristr($file, "/.") == false && stristr($file, "/..") == false)
  {
         $contents = file_get_contents($file);

         // Regular MySQL queries...indicative of SQL injection points
         $mysql_count = substr_count($contents, "mysql_query(");

         $select_count = substr_count($contents, 'SELECT ');
         $insert_count = substr_count($contents, 'INSERT INTO');
         $update_count = substr_count($contents, 'UPDATE ');

         if($mysql_count > 0 || $select_count > 0 || $insert_count > 0 || $update_count > 0)
         {
            $out[] = array('file' => $file, 
                           'mysql_count' => $mysql_count,
                           'select_count' => $select_count,
                           'insert_count' => $insert_count,
                           'update_count' => $update_count
                          );
         }

         $contents = null;
    }
}

var_dump($out); 
```

但这并没有在循环中找到任何东西，甚至没有分析查询以查看它是否包含高阈值的 JOINS。我可以编写这样的工具，但是如果它已经存在，为什么还要重新发明轮子呢？

* * *

**是否有任何工具可以识别可能存在问题/高压力/低效查询的 PHP 文件？**

我的目标是确定重构遗留程序代码最有益的点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T20:22:47.060

比很多查询更糟糕的是慢查询。所以我会试着找到那些。

您可以使用 MySql 的慢查询日志功能来做到这一点：http: [//dev.mysql.com/doc/refman/5.6/en/slow-query-log.html](http://dev.mysql.com/doc/refman/5.6/en/slow-query-log.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T20:23:54.443

这里可能存在幂律分布，其中一小部分查询导致了大部分问题。按照@ficuscr 的建议使用 xdebug 将有助于识别这里最大的违规者。

您可以做的另一件事是`mysql_*`在运行时使用[APD](http://pecl.php.net/package/apd)之类的插件更改函数。在您修改过的函数中，您可以记录当前`__FILE__`以及`__LINE__`其他相关信息（全局变量的状态等）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T20:18:57.883

假设我建议查看 [xdebug](http://xdebug.org/docs/profiler)以及它可以通过分析完成什么。使用 OOP 代码，结果当然会更有说服力，但这可能是一个开始。有了它，您应该能够看到使用的资源/对 mysql_query 的调用次数。

您链接的文章似乎讨论了这一点。这难道不是你要找的吗？同样，如果您专门寻找 SQL 瓶颈，则可能从数据库服务器上的慢查询日志开始。

# iphone - 两种 iPhone 屏幕尺寸的编程

> ID：13315161
> 
> 赞同：3
> 
> 时间：2012-11-09T20:04:44.983
> 
> 标签：iphone, xcode, screen

> **可能重复：**
> [iOS 6 应用程序 - 如何处理 iPhone 5 屏幕尺寸？](https://stackoverflow.com/questions/12396545/ios-6-apps-how-to-deal-with-iphone-5-screen-size)
> [iPhone4 和 iPhone5 可以使用相同的 xib 吗？](https://stackoverflow.com/questions/12702546/same-xib-for-iphone4-and-iphone5-possible)

我一直在制作我的应用程序，并且一直使用 iPhone 5 的屏幕尺寸。我完全忘记了 iPhone 4，我什至拥有它，愚蠢的我……我该怎么做呢？现在我已经为 iPhone 5 编写代码，我的代码将如何在两种屏幕尺寸上工作？

这是我遇到的那种问题的模型。在第二张图片中，滑块在较小的设备上被切断了屏幕

![4英寸屏幕，所有界面元素](../Images/4f82294ea70a569ae51b151b5fee13d1.png) ![3.5寸屏幕，接口被截断](../Images/910f6a4782bb0d0a02af9760e55cd2b9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T20:36:31.423

我能给你的最好建议是在你的 XIB 上尝试自动调整大小/自动对齐设置。这是避免为每个设备设置单独视图的最佳选择。

在您提供的示例中，您可以使用 Xcode 中的设置，如下所示：

![在此处输入图像描述](../Images/c1088250c3304340f3307728a510d852.png)

调整它们，使滑块的原点位于屏幕底部。调整每个 UI 元素的设置，直到一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T20:16:24.620

你能做什么完全取决于你如何定义你的界面和你的 UI 是什么样的。

如果您在 Interface Builder/Storyboard 中创建了 UI，您可能会尝试查看所有控件和视图指标设置。这方面的两个主要提示：

1.  通过仔细选择自动调整大小的行为，您可能会得到一些改进。对于某些元素，您可能需要固定与屏幕边缘的距离，对于其他元素，您可能需要设置灵活的宽度和高度：这很大程度上取决于您的 UI。

2.  控制相关 UI 元素正确定位的一种好方法是将它们分组到一个超级视图中，然后您可以通过保留这些元素的相对位置来置换或缩放（为其分配灵活的宽度或高度）。

如果您在代码中定义了界面，您应该检查定义所有位置和大小的方式，而不是将它们设置为绝对值，您可以将它们重新编码为屏幕大小的百分比。

我在我的应用程序中使用了这两种技术，都支持 iPhone4/5 和 iPhone/iPad。无论如何，这是一些工作。这可能是很多工作，也可能只是一些工作，这取决于您的应用程序 UI 中出现的问题。

如果您正在寻找一种自动解决此问题的方法，请尝试将缩放转换应用于您的主视图（例如，在您的应用程序委托中）：

```
window.rootViewController.view.transform = CGAffineTransformMakeScale(1.0, 0.84); 
```

我不确定这是否会起作用，但在最好的情况下，我认为这对感觉不可能自动修复这一事实更合适。

# c# - ASP.NET 复选框文本未与复选框右对齐或左对齐

> ID：13315165
> 
> 赞同：1
> 
> 时间：2012-11-09T20:05:04.330
> 
> 标签：c#, asp.net, layout, checkbox, alignment

在新的 Visual Studio 2012 Webforms 模板中，我所有的 ASP.NET 复选框和单选按钮的顶部或底部都有文本。

是故意的吗！？我怎样才能像往常一样正确对齐文本？我尝试禁用主题并将 cssclass 设置为复选框，但没有任何改变。

**找到的解决方案**：我研究了 firebug 中的 html，似乎默认的 Microsoft CSS 已损坏（！） label { display: block; } 导致错误的对齐

![在此处输入图像描述](../Images/218b93800f15e9e95f959a7265a65b5a.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T04:22:27.143

我遇到了同样的问题。

我的 ASP.NET Web 窗体项目是使用 VS2012 创建的，并使用添加的默认模板和样式表。该问题存在于我创建的新页面/表单上。我的表单控件恰好位于 TABLE 单元格中。这是我为解决此问题所做的工作：

*   创建了一个名为 CoreFrameworkTweaks.css 的新样式表，其中包含以下代码：

    .checkbox 标签 { 显示：内联；左边距：3px；字体大小：1.0em；}

*   在我的母版页中引用了新样式表*** 之后 *** Site.css 被拉入

*   确保我表单中的所有控件都用`<fieldset></fieldset>`

*   将 CssClass="checkbox" 参数添加到我的复选框控件

问题已修复。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T15:19:38.340

在`style.css`文件中搜索：

```
label {
    display: block;
    font-size: 1.2em;
    font-weight: 600;
} 
```

然后将其替换为：

```
label {
    font-size: 1.2em;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-29T19:35:49.537

Site.css 有代码：

```
fieldset.login label, fieldset.register label, fieldset.changePassword label
{
    display:  block;
}

fieldset label.inline
{
    display: inline;
} 
```

您需要在 Login.aspx 中找到 Checkbox 并将 CssClass="inline" 添加到 Label

```
<asp:CheckBox ID="RememberMe" runat="server" EnableTheming="True" />
<asp:Label ID="RememberMeLabel" runat="server" AssociatedControlID="RememberMe" 
    CssClass="inline">RememberMe</asp:Label> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-09T20:10:02.370

他们`TextAlign`有财产。你可以在这里设置。

如果这没有任何区别，那么您必须有一些`CSS`导致问题的原因。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-09T11:55:41.977

非常感谢你做的这些。我被这个问题困扰了很长时间！**复选框和单选按钮都会**出现问题。

 **您需要做的就是在文件夹 Content 中找到 site.css。找到以下内容：

```
label {
    display: block;
    font-size: 1.2em;
    font-weight: 600;
} 
```

并将其替换为

```
label {
    /*display: block;*/
    font-size: 1.2em;
    font-weight: 600;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-12-24T15:01:28.527

这对我有用：

```
label {
        display: inline !important;
      } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-09T20:16:18.037

这是样式问题。也许页面视口太小，导致您看到的结果。

如果在asp.net中设置属性没有帮助，那么肯定可以通过css解决。毕竟，输出是好旧的html...**

# python - 使用 wkhtmltopdf 生成 PDF 时，如何在文件菜单下的属性框中修改 PDF 值？

> ID：13315168
> 
> 赞同：1
> 
> 时间：2012-11-09T20:05:11.760
> 
> 标签：python, wkhtmltopdf

使用 wkhtmltopdf lib 创建 pdf 文件后，如果您进入 File->Propertes 选项卡，您会注意到 wkhtmltopdf 生成了一些值。但是，我想修改或删除其中的一些。有人对这个有经验么？我想修改“Producer”属性或完全摆脱它。

有没有人能够在这方面取得成功？我用谷歌搜索了这个问题，但没有找到答案。我还浏览了手册，没有任何命令可以真正帮助处理这些细节。

如果您有办法进行这些更改，我将非常感谢您提前给出这个问题的答案。

谢谢，

-e

# excel-2007 - 带有数据透视表的 if 语句

> ID：13315172
> 
> 赞同：0
> 
> 时间：2012-11-09T20:05:28.770
> 
> 标签：excel-2007, excel-formula

我正在尝试导出一个在数据透视表上使用 IF 语句的公式。

目标是对不存在的值执行 IF 函数。到目前为止，我有以下内容：

`=IF(GETPIVOTDATA("PO Outstanding Units",$A$2,"PO Horizon",0)=0,GETPIVOTDATA("PO Outstanding Units",$A$2,"PO Horizon","Past Due"),IF(GETPIVOTDATA("PO Outstanding Units",$A$2,"PO Horizon","Past Due")=0,GETPIVOTDATA("PO Outstanding Units",$A$2,"PO Horizon",0),(GETPIVOTDATA("PO Outstanding Units",$A$2,"PO Horizon",0)+GETPIVOTDATA("PO Outstanding Units",$A$2,"PO Horizon","Past Due"))/1000))`

该公式的目的是查看`IF "this pivot data" DOES NOT exist`，然后`"Insert true value"`，然后`IF "this DIFFERENT pivot data" DOES NOT EXIST`，然后`"Insert true value"`，最后一个错误的陈述将是`if both pivot data DO exist`。

基本上，我如何制作一个指示数据透视表值是否存在的公式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T20:44:20.963

您正在寻找查找不存在的项目的功能是`ISBLANK`

这将使您的示例函数如下所示：

```
=IF(ISBLANK(GETPIVOTDATA("PO Outstanding Units",$A$2,"PO Horizon",0)),
    GETPIVOTDATA("PO Outstanding Units",$A$2,"PO Horizon","Past Due"),
    IF(ISBLANK(GETPIVOTDATA("PO Outstanding Units",$A$2,"PO Horizon","Past Due")),
        GETPIVOTDATA("PO Outstanding Units",$A$2,"PO Horizon",0),
        (GETPIVOTDATA("PO Outstanding Units",$A$2,"PO Horizon",0)+GETPIVOTDATA("PO Outstanding Units",$A$2,"PO Horizon","Past Due"))/1000
    )
) 
```

如果您需要检查列是否存在，则 MATCH 将检查该列，如果不存在则给出错误，因此，要测试**Past Due**是否是列名，然后

```
ISERROR(MATCH("Past Due",$A$2:$F$2,0)) 
```

如果*未*找到该列，将返回**TRUE**（将 $A$2:$F$2 调整到您的数据透视列名称范围）

# javascript - 对象原型对 Easeljs 的干扰

> ID：13315173
> 
> 赞同：0
> 
> 时间：2012-11-09T20:05:40.897
> 
> 标签：javascript, prototype, easeljs

我正在设置一个小助手功能，如下所示：

```
if (!Object.prototype.__construct) {
Object.prototype.__construct = function() {
    if (typeof arguments[0] !== 'object' ||
        arguments.length === 0) return;
    for (var name in arguments[0]) {
        if (arguments[0].hasOwnProperty(name))
            this[name] = arguments[0][name];
    }
}}

if (!Object.prototype.__)
    Object.prototype.__ = Object.prototype.__construct; 
```

它是这样调用的：

```
function Foo(props) {
    this.__(props); // or this.__construct(props);
    ...
}
var foo = new Foo({a:1,b:2,c:3}); 
```

如您所见，它只是作为一个简单的构造函数。但是，当将它与 EaselJS 一起使用时，特别是`SpriteSheet()`我得到一个错误`Uncaught TypeError: Cannot call method 'slice' of undefined`。这是一段代码，说明了问题出现的位置：

```
var ss = new SpriteSheet({
    images: ...,
    frames: {
        ...
    },
    animations: {
        walk: [0, 1, "walk", 8] // <-- Error caused here.
    }
}); 
```

那么，有没有更好的方法来编写这样的 Object 原型，这不会导致（可能）与 Easel 发生冲突？或者可能是更好的方法？（本国的？）。谢谢。

# sql - 透视值是范围的列

> ID：13315175
> 
> 赞同：0
> 
> 时间：2012-11-09T20:05:53.113
> 
> 标签：sql, sql-server, pivot

我正在尝试创建一个数据透视表来转换值范围。我正在使用这个求和技巧，但我最近了解了数据透视运算符，并且我正在尝试将数据转换为数据透视表，因为这样代码可能更易于维护。（我重命名了我的表以使数据有点模糊）

```
 select  consultation_id,
                sum(case when current_status_id in (3,4,5,9,10,16,17,18,24,25,26) then 1 else 0 end) [Phase1],
                sum(case when current_status_id in (4,9,10,16,17,18) then 1 else 0 end) [Phase2],
                sum(case when current_status_id in  (10,16,17,18) then 1 else 0 end) [Phase3],
                sum(case when current_status_id = 24 then 1 else 0 end) [Rejected],
                sum(case when current_status_id in (17,18) then 1 else 0 end) [Complete]    
        from subject with (NOLOCK,NOWAIT)
        where ACTIVE_IND = 1
        group by consultation_id 
```

有人对如何进行转换有建议吗？

编辑：基本上，我正在创建一个有多少主题进入我们咨询阶段的汇总。这是为 lucene 索引构建的聚合，以便我们的用户可以搜索特定数据。这是原始表格数据的示例以及输出的样子：

```
select  consultation_id,
                sum(case when current_status_id in (3,4,5,9,10,16,17,18,24,25,26) then 1 else 0 end) [Phase1],
                sum(case when current_status_id in (4,9,10,16,17,18) then 1 else 0 end) [Phase2],
                sum(case when current_status_id in  (10,16,17,18) then 1 else 0 end) [Phase3],
                sum(case when current_status_id = 24 then 1 else 0 end) [Rejected],
                sum(case when current_status_id in (17,18) then 1 else 0 end) [Complete]    
        from (values(1588054,11928257,3,1),
                (1588054,11928256,10,1),
                (1588054,11928255,10,1),
                (1588054,11928254,4,1),
                (1588052,11928233,2,1),
                (1588052,11928232,3,0),
                (1588052,11928231,10,1),
                (1588052,11928230,18,1),
                (1588052,11928229,24,1),
                (1588052,11928228,24,1)) subject (consultation_id,subject_id,current_status_id,active_ind)
        where ACTIVE_IND = 1
        group by consultation_id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T20:55:58.827

如果您想将其转换为`PIVOT`，那么我的建议是创建一个表，其中包含您要确定`id`的每个 的：`Phases`

```
create table phases
(
  id int,
  name varchar(10)
); 
```

然后你将`JOIN`你的`subject`表放到这个新表上`current_status_id`，这将允许你再把`PIVOT`数据：

```
select s.consultation_id,
  p.name
from subject s
left join phases p
  on s.current_status_id = p.id
where s.ACTIVE_IND = 1 
```

因此，您的最终查询将是：

```
select *
from 
(
  select s.consultation_id,
    p.name
  from subject s
  left join phases p
    on s.current_status_id = p.id
  where s.ACTIVE_IND = 1
) src
pivot
(
  count(name)
  for name in ([Phase1], [Phase2], [Phase3], [Rejected], [Complete])
) piv; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/483360/3)

结果与您现有的查询匹配：

```
| CONSULTATION_ID | PHASE1 | PHASE2 | PHASE3 | REJECTED | COMPLETE |
--------------------------------------------------------------------
|         1588052 |      4 |      2 |      2 |        2 |        1 |
|         1588054 |      4 |      3 |      2 |        0 |        0 | 
```

使用该表的好处是，如果您需要更多`current_status_id`的 '，那么您只需将其添加到表中，它们就会被计算在内，而无需更改您的查询。

# php - Fine Uploader 无法上传文件

> ID：13315180
> 
> 赞同：3
> 
> 时间：2012-11-09T20:06:12.030
> 
> 标签：php, jquery, ajax, file-upload, fine-uploader

我正在使用文件上传器 jquery 插件以便在我的网站上上传 ajax 文件。但是，我只是无法弄清楚出了什么问题以及为什么它不起作用。

插件： http: [//fineuploader.com/index.html](http://fineuploader.com/index.html)

我的代码：

我直接从他们的演示中获取了代码：

```
$(document).ready(function() {
$fub = $('#fine-uploader-basic');
$messages = $('#messages');

var uploader = new qq.FileUploaderBasic({
  button: $fub[0],
  action: 'http://localhost/script/file_upload/upload_test',
  debug: true,
  allowedExtensions: ['jpeg', 'jpg', 'gif', 'png'],
  sizeLimit: 204800, // 200 kB = 200 * 1024 bytes
  onSubmit: function(id, fileName) {
    $messages.append('<div id="file-' + id + '" class="alert" style="margin: 20px 0 0"></div>');
  },
  onUpload: function(id, fileName) {
    $('#file-' + id).addClass('alert-info')
                    .html('<img src="client/loading.gif" alt="Initializing. Please hold."> ' +
                          'Initializing ' +
                          '“' + fileName + '”');
  },
  onProgress: function(id, fileName, loaded, total) {
    if (loaded < total) {
      progress = Math.round(loaded / total * 100) + '% of ' + Math.round(total / 1024) + ' kB';
      $('#file-' + id).removeClass('alert-info')
                      .html('<img src="client/loading.gif" alt="In progress. Please hold."> ' +
                            'Uploading ' +
                            '“' + fileName + '” ' +
                            progress);
    } else {
      $('#file-' + id).addClass('alert-info')
                      .html('<img src="client/loading.gif" alt="Saving. Please hold."> ' +
                            'Saving ' +
                            '“' + fileName + '”');
    }
  },
  onComplete: function(id, fileName, responseJSON) {
    if (responseJSON.success) {
      $('#file-' + id).removeClass('alert-info')
                      .addClass('alert-success')
                      .html('<i class="icon-ok"></i> ' +
                            'Successfully saved ' +
                            '“' + fileName + '”' +
                            '<br><img src="img/success.jpg" alt="' + fileName + '">');
    } else {
      $('#file-' + id).removeClass('alert-info')
                      .addClass('alert-error')
                      .html('<i class="icon-exclamation-sign"></i> ' +
                            'Error with ' +
                            '“' + fileName + '”: ' +
                            responseJSON.error);
    }
  }
});
}); 
```

HTML：

```
<div id="fine-uploader-basic" class="btn btn-success">
  <i class="icon-upload icon-white"></i> Click to upload
</div>
<div id="messages"></div> 
```

PHP：

```
public function upload_test() {
  $upload = move_uploaded_file('./user_files', $_FILES['qqfile']['tmp_name']);
  if($upload) {
    echo json_encode(array('success' => true));
  } else {
    echo json_encode(array('success' => false, 'error' => $upload));
  }
} 
```

我认为问题出在 PHP 上，但我不知道我做错了什么。在我发疯之前请帮忙。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T17:31:51.740

我没有阅读你的 js 和 html 部分，但你需要更改你的 PHP 部分。看看他是怎么做的

[精细上传 PHP](https://github.com/Widen/fine-uploader-server/blob/master/php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T11:50:11.147

删除`action: 'http://localhost/script/file_upload/upload_test',`并更改为

```
request: {
            // path to server-side upload script
        endpoint: 'script/file_upload/upload_test/php.php'
         } 
```

同样在您的 php.php 文件中取消注释：

```
$allowedExtensions = array("jpeg", "jpg", "bmp", "png");
$sizeLimit = 10 * 1024 * 1024;
$uploader = new qqFileUploader($allowedExtensions, $sizeLimit);
$result = $uploader->handleUpload('uploads/'); //folder for uploaded files
echo htmlspecialchars(json_encode($result), ENT_NOQUOTES); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T09:59:54.703

如果它有帮助，这是我的设置：

--jquery.html

```
 <!DOCTYPE html>
    <html>
      <head>
        <meta charset="utf-8">
        <title>Fine Uploader Demo</title>
        <link href="client/fineuploader.css" rel="stylesheet">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
      </head>
      <body>
        <div id="fine-uploader"></div>

        <script src="client/jquery.fineuploader-3.1.1.min.js"></script>
        <script>
          function createUploader() {
            var uploader = new qq.FineUploader({
              debug: true,  
              // Pass the HTML element here
              element: document.getElementById('fine-uploader'),
              // or, if using jQuery
              // element: $('#fine-uploader')[0],
              // Use the relevant server script url here
              // if it's different from the default “/server/upload”
              request: {
                endpoint: 'php.php'

              }
            });
          }

          window.onload = createUploader;
        </script>
      </body>
    </html> 
```

--- php.php（与 jquery.html 在同一文件夹中）

以下行已取消注释：

```
 // list of valid extensions, ex. array("jpeg", "xml", "bmp")
    $allowedExtensions = array();
    // max file size in bytes
    $sizeLimit = 10 * 1024 * 1024;
    //the input name set in the javascript
    $inputName = 'qqfile';

    $uploader = new qqFileUploader($allowedExtensions, $sizeLimit, $inputName);

    $result = $uploader->handleUpload('uploads/');
    header("Content-Type: text/plain");
    echo htmlspecialchars(json_encode($result), ENT_NOQUOTES); 
```

uploads 文件夹有 777 个权限

MAMP 注意：上传时将引发 stream_copy_to_stream() 错误。解决方案：将 php.php 中的第 58 行从 $temp = tmpfile(); 到 $temp = fopen("php://temp", "wb"); //$temp = tmpfile();

希望这可以帮助某人。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-25T23:25:44.643

我看到很多人在处理服务器端脚本来处理上传的文件时遇到了麻烦。我需要一些时间来弄清楚如何编写自己的脚本来将上传的文件存储在数据库中。下面的代码示例对于遇到相同问题的人来说非常具有说明性。

```
<?php
$file = $_FILES['qqfile'];
$uploadDirectory = 'uploads';
$target = $uploadDirectory.DIRECTORY_SEPARATOR.$file['name'];
$result = null;
if (move_uploaded_file($file['tmp_name'], $target)){
    $result = array('success'=> true);
    $result['uploadName'] = $file['name'];
} else {
    $result = array('error'=> 'Upload failed');
}
header("Content-Type: text/plain");
echo json_encode($result); 
```

当然，您必须调整上传目录的名称。它应该可以与下面的 javascript 一起正常工作：

```
$(document).ready(function() {
    var uploader = new qq.FineUploader({
        element: $('#basicUploadSuccessExample')[0],
        debug: true,
        request: {
            endpoint: "server/php/example.php"
        }
    });
}); 
```

只需确保在 html 中包含所有 *.js。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-30T22:33:02.963

我也有上传到文件夹的问题。为了获得更多信息，我将**qqFileUploader.php第****59**行更改为：

```
if (!is_writable($uploadDirectory) || !is_executable($uploadDirectory))
{
return array('error' =>"Server error. Uploads directory isn't writable or executable. CUR_DIR: " . getcwd() . " DIR: " . $uploadDirectory);
} 
```

这样做之后，我发现问题是它正在我的 php 目录中寻找与根目录相对的文件夹。

我改变了 $result = $uploader->handleUpload('up/'); 到 $result = $uploader->handleUpload('../up/'); 问题已为我解决。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-09T20:11:12.620

“文件上传器”，我假设？

您是否进行过任何基本调试，例如在您的 php 代码中添加错误处理？您的代码在多个级别上被破坏：

1) move_upload_file 需要一个目标**文件**名。您只提供一个目录：

```
move_uploaded_file('/path/to/destination/on/server.txt', $_FILES['qqfile']['tmp_name']); 
```

2）您没有检查上传是否成功。

```
if($_FILES['qqfile']['error'] !== UPLOAD_ERR_OK) {
     die("UPload failed with error code " . $_FILES['qqfile']['error']);
} 
```

错误代码在这里定义：http: [//php.net/manual/en/features.file-upload.errors.php](http://php.net/manual/en/features.file-upload.errors.php)

# flash - 如何停止这个简单的动作脚本？

> ID：13315185
> 
> 赞同：0
> 
> 时间：2012-11-09T20:06:21.553
> 
> 标签：flash, function, actionscript

我正在为学校制作一张简短的交互式电子贺卡。它将带您穿越“圣诞故事”的场景。现在我正在研究拉尔菲打败法库斯的部分。

我想要它，这样您就可以使用左右箭头键来打拳，但是如果您选择结束场景，您只需单击一个按钮即可完成 Farkus。

所以我在这里有这段代码，它只是使用箭头键将您带到某些帧。

问题是，当我单击按钮时，我希望所有代码都消失。现在它没有。如果我在单击按钮后按下其中一个箭头键，代码仍会将我带到场景的开头。

```
stop();

stage.addEventListener(KeyboardEvent.KEY_UP, punchfarkusleft);

function punchfarkusleft(event:KeyboardEvent):void
{
    if (event.keyCode == Keyboard.LEFT)
    {
        this.gotoAndPlay(1980);
    }
}

stage.addEventListener(KeyboardEvent.KEY_UP, punchfarkusright);

function punchfarkusright(event:KeyboardEvent):void
{
    if (event.keyCode == Keyboard.RIGHT)
    {
        this.gotoAndPlay(1995);

    }
} 
```

我对动作脚本完全陌生。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T20:55:14.787

尝试以下操作：

```
stop();

function keyUpHandler(event:KeyboardEvent):void
{
    // removing the listener will stop the handler being executed on 
    // subsequent keyUp events
    stage.removeEventListener(KeyboardEvent.KEY_UP, keyUpHandler);

    // We can handle any number of keys in the handler now
    if (event.keyCode == Keyboard.RIGHT)
    {
        this.gotoAndPlay(1995);
    }
    else if (event.keyCode == Keyboard.LEFT)
    {
        this.gotoAndPlay(1980);
    {
}

// Only add one event listener for keyUp event
stage.addEventListener(KeyboardEvent.KEY_UP, keyUpHandler); 
```

# c++ - 格式化字符串

> ID：13315191
> 
> 赞同：0
> 
> 时间：2012-11-09T20:06:45.063
> 
> 标签：c++

对于这个问题，您应该使用 C++ 字符串对象或 C-String。从文件中读取内容。文件格式是这样的，在每一行中：1) 有三列，2) 每列由 | 分隔。将每一行输出到标准输出。第一列宽应为 15，第二列宽应为 8，第三列宽应为 6。如果行以 # 开头，则应跳过它。此外，第二列应显示到小数点后两位。可能超过 3 行；你不能假设只有 3 行。但是，您可以假设只有 3 列。样本输入

```
#Test file one
C1|c2|c4
Xyz|1.2|100
Abc|5.5|200 
```

因此，鉴于该程序大纲（我不是要求您编写我的代码！:(）这是我对要做什么的想法...多维数组，但可以有超过三行，所以我不使用那个变量不认为我可以因此做一个多维数组。

我还考虑过阅读每一行，将其分开，格式化然后打印出来，一次只担心每一行。我认为这是最好的方法，但我愿意通过建议做任何事情。我想我会通过使用某种行尾“分隔符”来做到这一点。

我能找到的唯一另一个问题是，如果前导字符是#，我应该忽略并跳过行。我也不知道该怎么做，我认为 ignore() 函数是一种方法，但据我所知，它开始跳过一些事情，直到达到你的限制或找到分隔符。我认为没有办法使用该功能首先找到 delim 字符，然后将所有内容都跳过到 EOL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T20:29:28.557

一些有用的片段：

```
std::cout.precision(2)
std::cout << std::fixed << 1.5; // prints 1.50
std::cout << std::setw (10) << "hi!"; // prints "       hi!" 
```

对于跳过 # 行：

```
std::string s;
ifstream input("test.txt");
while(input >> s){
    if(s[0] == '#') continue;
    // other processing
} 
```

这是一种重载从快速谷歌搜索中获取的 >> 运算符的方法：

```
struct Time
{
    int hours, minutes;
};
istream &operator >> (istream &is, Time &t)
{
    is >> t.hours;
    is.ignore(1,':');
    is >> t.minutes;
    return is;
} 
```

使用它可能如下所示：

```
Time t;
ifstream input("time.txt"); // A file containing one line: "6:30"
input >> t; //t now has hours = 6 and minutes = 30 
```

正如 Jerry Coffin 所建议的那样，您可以使用它来将每一行抓取到一个结构中。这应该是实现解决方案所需的一切。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T20:11:49.557

您不需要将信息存储在数组中，您可以随时读取和输出。例如，骨架可能看起来像这样

```
string line;
ifstream inputStream("data.txt");

while( getline(inputStream, line) ){ //grab line if possible
 std::vector<std::string> tokens = parseLine( line, '|'); //parse line using '|' as delim
 //if !tokens.empty && tokens[0][0] != '#'
   //print tokens[i] accordingly 

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T20:15:31.597

鉴于每行恰好包含三个项目，并且您可能想跳过一些行，我会：

1.  创建一个由三个字符串（或其他）组成的结构来保存一行数据。
2.  创建一个`std::vector<your_struct>`来保存您读取的数据。
3.  使用 . 将整行读入字符串`std::getline`。
4.  检查该行是否以开头`#`（如果是，则跳过循环的其余部分）。
5.  将这三个项目解析出来并将它们保存到您`struct`的其中一个中。
6.  将其推`struct`到`std::vector`.

# java - Java Post Query 绕过协议页面并访问其他页面

> ID：13315197
> 
> 赞同：0
> 
> 时间：2012-11-09T20:07:03.753
> 
> 标签：java, post

我正在尝试自动化一些东西，但最近一个网站设置了一个协议障碍，需要达成一致才能访问其他页面和文件。

[https://www.paoilandgasreporting.state.pa.us/publicreports/Modules/DataExports/DataExports.aspx](https://www.paoilandgasreporting.state.pa.us/publicreports/Modules/DataExports/DataExports.aspx)

我无法使用下面的 java 后查询代码绕过它，我得到的只是该协议障碍页面的 html 内容：

```
HttpClient httpClient = new HttpClient();
        httpClient.getParams().setParameter(
                ClientPNames.ALLOW_CIRCULAR_REDIRECTS, true);

        PostMethod postMethod = new PostMethod(
                "https://www.paoilandgasreporting.state.pa.us/publicreports/Modules/Welcome/Welcome.aspx") {
            @Override
            public boolean getFollowRedirects() {
                return true;
            }
        };

        postMethod.addParameter("ctl00$MainContent$AgreeButton", "Agree");

        try {
            httpClient.executeMethod(postMethod);
        } catch (HttpException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        if (postMethod.getStatusCode() == HttpStatus.SC_OK) {
            String resp = postMethod.getResponseBodyAsString();
            System.out.println(resp);
        } else {
            // ...postMethod.getStatusLine();
        } 
```

我使用 firebug 获得了 post 参数，即使我尝试添加其他两个 post 参数，即使这也无济于事

```
//postMethod.addParameter("__EVENTVALIDATION","%2FwEWAwLA5%2FC9CwLuhr%2FJBgKws9WDC7O5VJxkt6T7bUFREi%2BvwFPh%2FDo37JKON9tdbF4jnCXF");
//  postMethod.addParameter ("__VIEWSTATE","%2FwEPDwUKMTAxODQ0NzY0Nw9kFgJmD2QWAgIDD2QWBAIBDxYCHgRUZXh0BdgQPGRpdiBzdHlsZT0iaGVpZ2h0OiAxNDlweDsgd2lkdGg6IDk1MnB4OyBiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0OyBiYWNrZ3JvdW5kLWltYWdlOnVybChodHRwczovL3d3dy5haHMyLmRlcC5zdGF0ZS5wYS51cy9pbWFnZXMvZGVwX2V4dGVybmFsX21haW5fYmFubmVyXzIuanBnKSI%2BCgoJPGEgc3R5bGU9ImhlaWdodDoxMDBweDsgd2lkdGg6MzkwcHg7IGxlZnQ6MHB4OyB0b3A6MHB4OyBwb3NpdGlvbjpyZWxhdGl2ZTsgZGlzcGxheTpibG9jazsgdGV4dC1kZWNvcmF0aW9uOm5vbmU7IiB0aXRsZT0iREVQIEhvbWUiIGhyZWY9Imh0dHA6Ly93d3cuZGVwd2ViLnN0YXRlLnBhLnVzLyI%2BCgkJPGVtIHN0eWxlPSJ2aXNpYmlsaXR5OiBoaWRkZW47IGNvbG9yOiAjMDAwMDAwOyBiYWNrZ3JvdW5kLWNvbG9yOiAjRkZGRkZGOyI%2BQWdlbmN5PC9lbT4KCTwvYT4KCTxhIHN0eWxlPSJoZWlnaHQ6MzBweDsgd2lkdGg6MTYwcHg7IGxlZnQ6OHB4OyB0b3A6MTJweDsgcG9zaXRpb246cmVsYXRpdmU7IGRpc3BsYXk6YmxvY2s7IHRleHQtZGVjb3JhdGlvbjpub25lOyIgdGl0bGU9IlBlbm5zeWx2YW5pYSIgaHJlZj0iaHR0cDovL3BhLmdvdi8iPgoJCTxlbSBzdHlsZT0idmlzaWJpbGl0eTogaGlkZGVuOyBjb2xvcjogIzAwMDAwMDsgYmFja2dyb3VuZC1jb2xvcjogI0ZGRkZGRjsiPlBlbm5zeWx2YW5pYTwvZW0%2BCgk8L2E%2BCgoJPGEgc3R5bGU9ImhlaWdodDoxNnB4OyB3aWR0aDoxNDBweDsgbGVmdDo2MjBweDsgdG9wOi0xOHB4OyBwb3NpdGlvbjpyZWxhdGl2ZTsgZGlzcGxheTpibG9jazsgdGV4dC1kZWNvcmF0aW9uOm5vbmU7IHRleHQtYWxpZ246Y2VudGVyOyBjb2xvcjogI0ZGRkZGRjsgYmFja2dyb3VuZC1jb2xvcjogIzE2M0Y2RDsgZm9udC1zaXplOiAwLjhlbTsgZm9udC13ZWlnaHQ6IGJvbGQ7IGZvbnQtZmFtaWx5OiBWZXJkYW5hLCBBcmlhbCwgSGVsdmV0aWNhLCBzYW5zLXNlcmlmOyIgaHJlZj0iaHR0cDovL3d3dy5wb3J0YWwuc3RhdGUucGEudXMvcG9ydGFsL3NlcnZlci5wdD9vcGVuPTUxMiZvYmpJRD0yMDU5OCZQYWdlSUQ9MTA1MjE2MCZtb2RlPTIiPgoJCVBBIFNUQVRFIEFHRU5DSUVTCgk8L2E%2BCgoJPGEgc3R5bGU9ImhlaWdodDoxNnB4OyB3aWR0aDoxNjBweDsgbGVmdDo3ODBweDsgdG9wOi0zNHB4OyBwb3NpdGlvbjpyZWxhdGl2ZTsgZGlzcGxheTpibG9jazsgdGV4dC1kZWNvcmF0aW9uOm5vbmU7IHRleHQtYWxpZ246Y2VudGVyOyBjb2xvcjogI0ZGRkZGRjsgYmFja2dyb3VuZC1jb2xvcjogIzE2M0Y2RDsgZm9udC1zaXplOiAwLjhlbTsgZm9udC13ZWlnaHQ6IGJvbGQ7IGZvbnQtZmFtaWx5OiBWZXJkYW5hLCBBcmlhbCwgSGVsdmV0aWNhLCBzYW5zLXNlcmlmOyIgaHJlZj0iaHR0cDovL3d3dy5wb3J0YWwuc3RhdGUucGEudXMvcG9ydGFsL3NlcnZlci5wdD9vcGVuPTUxMiZvYmpJRD0yMDU5OCZQYWdlSUQ9MTA1MjE1OCZtb2RlPTIiPgoJCU9OTElORSBTRVJWSUNFUwoJPC9hPgoKCTxhIHN0eWxlPSJoZWlnaHQ6MTZweDsgd2lkdGg6MTYwcHg7IGxlZnQ6NjE1cHg7IHRvcDotMjlweDsgcG9zaXRpb246cmVsYXRpdmU7IGRpc3BsYXk6YmxvY2s7IHRleHQtZGVjb3JhdGlvbjpub25lOwl0ZXh0LWFsaWduOmNlbnRlcjsgY29sb3I6ICNGRkZGRkY7IGZvbnQtc2l6ZTogMC44ZW07IGZvbnQtZmFtaWx5OiBWZXJkYW5hLCBBcmlhbCwgSGVsdmV0aWNhLCBzYW5zLXNlcmlmOyIgaHJlZj0iaHR0cDovL3d3dy5nb3Zlcm5vci5wYS5nb3YiIHRpdGxlPSJUb20gQ29yYmV0dCwgR292ZXJub3IiPlRvbSBDb3JiZXR0LCBHb3Zlcm5vcgoJPC9hPgoJPGEgc3R5bGU9ImhlaWdodDoxNnB4OyB3aWR0aDoxOTBweDsgbGVmdDo3NjVweDsgdG9wOi00NXB4OyBwb3NpdGlvbjpyZWxhdGl2ZTsgZGlzcGxheTpibG9jazsgdGV4dC1kZWNvcmF0aW9uOm5vbmU7CXRleHQtYWxpZ246Y2VudGVyOyBjb2xvcjogI0ZGRkZGRjsgZm9udC1zaXplOiAwLjhlbTsgZm9udC1mYW1pbHk6IFZlcmRhbmEsIEFyaWFsLCBIZWx2ZXRpY2EsIHNhbnMtc2VyaWY7IiBocmVmPSJodHRwOi8vd3d3LmRlcHdlYi5zdGF0ZS5wYS51cy9zZWNyZXRhcnkiIHRpdGxlPSJNaWNoYWVsIEtyYW5jZXIsIFNlY3JldGFyeSI%2BTWljaGFlbCBLcmFuY2VyLCBTZWNyZXRhcnkKCTwvYT4KCQkKPC9kaXY%2BZAIFDxYCHwAFxgg8ZGl2IHN0eWxlPSJ3aWR0aDogMTAwJTsgdGV4dC1hbGlnbjogY2VudGVyOyBtYXJnaW46IDAgYXV0bztmb250LXNpemU6IDAuOWVtOyBsaW5lLWhlaWdodDogMTZweDsgY29sb3I6ICMwMzM2Njg7IGZvbnQtZmFtaWx5OiBWZXJkYW5hLCBBcmlhbCwgSGVsdmV0aWNhLCBzYW5zLXNlcmlmOyBmb250LXN0eWxlOiBub3JtYWw7IGZvbnQtd2VpZ2h0OiBub3JtYWw7IGZvbnQtdmFyaWFudDogbm9ybWFsOyB0ZXh0LWRlY29yYXRpb246IG5vbmU7Ij4KCTxhIHN0eWxlPSJmb250LXNpemU6IDAuOWVtOyBsaW5lLWhlaWdodDogMTZweDsgY29sb3I6ICMwMzM2Njg7IGZvbnQtZmFtaWx5OiBWZXJkYW5hLCBBcmlhbCwgSGVsdmV0aWNhLCBzYW5zLXNlcmlmOyBmb250LXN0eWxlOiBub3JtYWw7IGZvbnQtd2VpZ2h0OiBub3JtYWw7IGZvbnQtdmFyaWFudDogbm9ybWFsOyB0ZXh0LWRlY29yYXRpb246IG5vbmU7Imh0dHA6Ly93d3cucG9ydGFsLnN0YXRlLnBhLnVzL3BvcnRhbC9zZXJ2ZXIucHQ%2Fb3Blbj01MTImb2JqSUQ9MjA1OTgmUGFnZUlEPTEwNTE2MDYmbW9kZT0yIgoJdGl0bGU9IlByaXZhY3kgUG9saWN5Ij5Qcml2YWN5IFBvbGljeTwvYT4KCSZuYnNwO3wmbmJzcDsKCTxhIHN0eWxlPSJmb250LXNpemU6IDAuOWVtOyBsaW5lLWhlaWdodDogMTZweDsgY29sb3I6ICMwMzM2Njg7IGZvbnQtZmFtaWx5OiBWZXJkYW5hLCBBcmlhbCwgSGVsdmV0aWNhLCBzYW5zLXNlcmlmOyBmb250LXN0eWxlOiBub3JtYWw7IGZvbnQtd2VpZ2h0OiBub3JtYWw7IGZvbnQtdmFyaWFudDogbm9ybWFsOyB0ZXh0LWRlY29yYXRpb246IG5vbmU7ImhyZWY9Imh0dHA6Ly93d3cucG9ydGFsLnN0YXRlLnBhLnVzL3BvcnRhbC9zZXJ2ZXIucHQ%2Fb3Blbj01MTImb2JqSUQ9MjA1OTgmUGFnZUlEPTEwNTE5NDAmbW9kZT0yIgoJdGl0bGU9IlNlY3VyaXR5IFBvbGljeSI%2BU2VjdXJpdHkgUG9saWN5PC9hPgkJCgk8YnIgLz4KCTxzcGFuIHN0eWxlPSJmb250LXNpemU6IDAuOWVtIj4KCQlDb3B5cmlnaHQmbmJzcDsmY29weTsyMDA5LTIwMTImbmJzcDtDb21tb253ZWFsdGggb2YgUGVubnN5bHZhbmlhLiBBbGwgUmlnaHRzIFJlc2VydmVkCgk8L3NwYW4%2BCjwvZGl2PmRkxyei%2F5tm7ky3D270eOJqk5kA63kYz4W0lQuUC%2BjoMj4%3D"); 
```

关于如何绕过这些页面的任何想法？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T20:15:06.420

如果您查看协议页面的 HTML，您会看到“同意”按钮所在的表单标记提交到相对 URL“Agreement.aspx”。本质上，这会在服务器上设置某种 cookie 或会话变量，告诉服务器不要再将那个页面贴在你的脸上。

您必须使用相同的 HTTPClient 实例来执行这两个步骤：

*   同意，提交到 Agreement.aspx
*   然后继续你之前已经在做的 POST -

为了在 HTTPClient 中获得会话跟踪，您需要进行一些不同的设置：

```
HttpClient httpClient = new DefaultHttpClient();
CookieStore cookieStore = new BasicCookieStore();
HttpContext httpContext = new BasicHttpContext();
httpContext.setAttribute(ClientContext.COOKIE_STORE, cookieStore); 
```

然后将此 httpContext 实例传递给每个请求：

```
HttpResponse resp = httpClient.executeMethod(postMethod, httpContext); 
```

# jquery - Phonegap iPad 应用程序屏幕可以移动

> ID：13315202
> 
> 赞同：2
> 
> 时间：2012-11-09T20:07:18.773
> 
> 标签：jquery, iphone, ipad, cordova, window

在 iPad 上，我的应用程序的整个应用程序窗口，由 jQuery Mobile 和 PhoneGap 构建，可以通过点击和拖动来移动。当手指松开时，应用程序窗口会自行重新定位。如何锁定应用程序窗口，使其在点击和拖动时不会移动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T20:48:21.167

[http://docs.phonegap.com/en/edge/guide_project-settings_ios_index.md.html#Project%20Settings%20for%20iOS](http://docs.phonegap.com/en/edge/guide_project-settings_ios_index.md.html#Project%20Settings%20for%20iOS)

**Cordova.plist**

> 一种。UIWebViewBounce（布尔值，默认为 YES） - 如果您不希望 WebView 使用橡皮筋，请设置为 NO

# mysql - MYSQL 子查询行作为主查询中的列

> ID：13315208
> 
> 赞同：1
> 
> 时间：2012-11-09T20:07:53.293
> 
> 标签：mysql, sql, pivot

在我们的数据库中，我们有一个用户表和其他数据的键值表。我们一直在尝试提出一个将两者连接起来的查询，将 kv 表中的键作为列标题，将值作为字段。

到目前为止，我们唯一的解决方案是将`GROUP_CONCAT`每个用户的键值对作为一列，然后在查询输出后解析它们——缓慢而糟糕......

这是一般设置：

User.db 表：

```
------------------------------
| uid | firstname | lastname |
------------------------------
| 01 | john       | doe      |
| 02 | jane       | doe      |
------------------------------

-----------------------------
| uid | question  |  answer |
-----------------------------
|  01 | question1 | answer1 |
|  01 | question2 | answer2 |
|  02 | question1 | answer3 |
|  02 | question2 | answer4 |
----------------------------- 
```

我们想要得到的查询结果：

```
------------------------------------------------------
| uid | firstname | lastname | question1 | question2 |
------------------------------------------------------
|  01 | john      | doe      | answer1   | answer2   |
|  02 | jane      | doe      | answer3   | answer4   |
------------------------------------------------------ 
```

我希望有一种简单的方法可以做到这一点，但一直找不到任何东西。所有帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T21:18:02.583

在其他数据库中，您可以使用一个`PIVOT`函数，但 MySQL 没有该函数，因此必须使用聚合函数和`CASE`语句来复制它。如果您知道所有值，则可以对类似于以下的值进行硬编码：

```
select u.uid, u.firstname, u.lastname,
  max(case when question='question1' then answer else null end) as question1,
  max(case when question='question2' then answer else null end) as question2
from users u 
left join kv 
  on u.uid = kv.uid
group by u.uid, u.firstname, u.lastname; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/ac287/5)

但是如果你有未知的值，那么你可以使用[准备好的语句](http://buysql.com/mysql/14-how-to-automate-pivot-tables.html)来生成动态 SQL：

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'max(case when question = ''',
      question,
      ''' then answer else NULL end) AS ',
      question
    )
  ) INTO @sql
FROM kv;

SET @sql = CONCAT('SELECT u.uid, u.firstname, u.lastname, ', @sql, ' 
                  from users u 
                  left join kv 
                    on u.uid = kv.uid 
                  group by u.uid, u.firstname, u.lastname');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/6122a/1)

两个版本都会产生相同的结果：

```
| UID | FIRSTNAME | LASTNAME | QUESTION1 | QUESTION2 |
------------------------------------------------------
|   1 |      john |      doe |   answer1 |   answer2 |
|   2 |      jane |      doe |   answer3 |   answer4 | 
```

准备好的语句的好处是，如果您有更改的值，那么这将在运行时生成列列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T20:11:19.747

这将模拟一个 PIVOT 表：

```
Select
  uid,
  firstname,
  lastname,
  max(case when question = 'question1' then answer end) as question1,
  max(case when question = 'question2' then answer end) as question2
From
  users inner join answers on users.uid = answers.uid
Grop by uid, firstname, lastname 
```

还有一个连接解决方​​案：

```
Select uid, firstname, lastname,
  answers_1.answer as question1,
  answers_2.answer as question2
From
  users left join answers answers_1
  on users.uid = answers_1.uid and answers_1.question = 'question1'
  left join answers answers_2
  on users.uid = answers_2.uid and answers_2.question = 'question2' 
```

当然，你必须提前知道问题是什么。如果不是这种情况，据我所知，由于 MySql 不支持 PIVOT，因此无法仅使用标准 SQL 来回答您的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T20:14:14.527

你可以尝试这样的事情：

```
select u.uid, u.firstname, u.lastname,
  max(case when question="question1" then answer else null) as question1,
  max(case when question="question2" then answer else null) as question2
from user u join answers a on u.uid = a.uid
group by u.uid, u.firstname, u.lastname 
```

# sql - 如何检查外键是否设置为不存在的主键？

> ID：13315212
> 
> 赞同：1
> 
> 时间：2012-11-09T20:08:17.563
> 
> 标签：sql, postgresql, foreign-keys, primary-key

有时我在使用 BD At Work 时遇到问题。通常是当我尝试在会话关闭的情况下恢复或更新 Java 中的表时（著名的 LazyInitializatioException ）。最后，有时问题是存在指向不存在的主键索引值的外键。发生这种情况时，惰性实体无法正确加载。

那么，有没有办法检查表数据是否将外键索引设置为不存在的主键？

对于单列将很容易。但我的意思是对于大约有 10 或 20 个外键的表。

我使用postgres。如果那是一个特别针对它的答案，那就更好了。=]

对不起我的英语不好（不是母语）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T20:12:50.417

我通常使用类似的查询

```
SELECT * FROM my_table WHERE fk_field NOT IN (SELECT id FROM related_table); 
```

它通常工作正常；我不确定是否有更适合这项任务的东西（如果你使用 ORM 和/或总是这样，你不会经常遇到这种问题`DELETE .. CASCADE`）..

## 更新

当然，您可以使用它一次直接查询多个 fk 字段：

```
SELECT * FROM my_table WHERE fk_field NOT IN (SELECT id FROM related_table)
    OR fk_field2 NOT IN (SELECT id FROM related_table2)
    OR fk_field3 NOT IN (SELECT id FROM related_table3); 
```

..ETC..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T20:30:15.100

我不熟悉 Java 和你提到的那些错误。
最好的解决方案是在 db 中创建外键约束，如果从另一个表引用，则不允许删除记录。

如果您必须尝试：

```
select some_columns
from table1 t1 left join table2 t2 on (t1.id1 = t2.table1_id1)
where t2.id is null
limit 1 
```

检查此类记录是否存在。
如果这些表很大，则没有快速的解决方案（通常以全表扫描结束）。

也可以使用外键约束自动进行级联删除或设置 null。[阅读postgresql 文档](http://www.postgresql.org/docs/9.1/static/sql-createtable.html)中的 FOREIGN KEY 部分

# database - 插入数据库时 出现 SQlite 错误

> ID：13315213
> 
> 赞同：0
> 
> 时间：2012-11-09T20:08:20.340
> 
> 标签：database, xcode, xcode4, sqlite

我花了几天时间试图修复这段代码，但我放弃了！！如果他按下“保存”按钮，我正在做的是从用户那里获取输入并将其插入数据库。当我运行此代码并按下“保存”按钮后。1-我无法退出视图（到另一个选项卡）。2-插入未应用！

```
 NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDir = [paths objectAtIndex:0];
    NSString *dbPath = [documentsDir stringByAppendingPathComponent:@"CAMAClientDB2.sqlite"];
    sqlite3 *database;

    //Copy the database from the package to the usrrs filesystem
    if (sqlite3_open([dbPath UTF8String], &database)== SQLITE_OK) {//start if 
        NSLog(@"dataBaseOpen");
        const char *sqlStatement = "insert into Location (Latitude,Longitude,LocationName,Tag) VALUES (?,?,?,?)";
        // 
        sqlite3_stmt *compileStatement;

        if (sqlite3_prepare_v2(database, sqlStatement, -1, &compileStatement, NULL) == SQLITE_OK) { // start if 2
            if(SQLITE_DONE!=sqlite3_step(compileStatement))
            {
            sqlite3_bind_double(compileStatement, 1, [latitudeTextField.text doubleValue]);

            sqlite3_bind_double(compileStatement, 2, [longitudeTextField.text doubleValue]);

            sqlite3_bind_text( compileStatement, 3, [lName.text UTF8String], -1, SQLITE_TRANSIENT);

            sqlite3_bind_text(compileStatement, 4, [myText.text UTF8String] ,-1, SQLITE_TRANSIENT);
             NSLog( @" successfully done" );
            if(sqlite3_step(compileStatement) != SQLITE_DONE ) {
                NSLog( @" not done" );
            }  
            }

        }
    } 
```

我在文件管理器中放入了 appDelegate 代码来应对：

NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES); NSString *documentsDir = [paths objectAtIndex:0];

```
NSString *dbPath = [documentsDir stringByAppendingPathComponent:@"CAMAClientDB2.sqlite"];

NSFileManager *fileManager = [NSFileManager defaultManager];

BOOL success = [fileManager fileExistsAtPath:dbPath];

if (success) {

    NSLog(@"we have the database");

} else {

    NSLog(@"we have no database");

    NSString *defaultDBPath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"CAMAClientDB2.sqlite"];

    BOOL moved = [fileManager copyItemAtPath:defaultDBPath toPath:dbPath error:nil];

    if (moved) {
        NSLog(@"database copied");
    }

} 
```

我错过了什么 ！！问题是什么 ！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T21:05:34.850

对于您的#2 问题： 1\. 您有一个额外的 sqlite_step 调用。你的顺序应该是：

```
 sqlite3_prepare_v2()
            sqlite_bind_....
            sqlite_bind_....
            for as many bind's as you need, and then
            sqlite_step() 
```

1.  如果 sqlite_step 仍然失败，请检查返回代码并在文档中查找指导

2.  如果您的 MacOS 应用程序是沙盒的，这将不起作用。目前无法自行更新 sqlite 数据库。您必须获得用户对 sqlite 文件所在目录的写入权限，或者必须将其放入包中（这实际上是同一件事）

# php - aray_diff 函数中的错误

> ID：13315219
> 
> 赞同：0
> 
> 时间：2012-11-09T20:08:47.740
> 
> 标签：php, arrays

我正在使用以下代码：

```
$ab=array([0]=>5312,[1]=>26136]);
$abc=array();
$res=array_diff($ab,$abc); 
```

如果在这种情况下数组 $abc 不为空，则它工作正常。

在这种情况下，我希望数组中的所有元素`$ab`不在其中，`$abc`但它显示的是空结果。我也尝试过`array_diff_assoc()`功能，但它显示相同的输出。请让我知道我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T20:11:53.993

如果那是您的实际代码，那么问题是您可能会在第一行收到错误，因为`array([0]=>5312,[1]=>26136])`语法无效。应该是`array(0=>5312,1=>26136)`。

在`display_errors`您的开发环境中运行并`error_reporting(E_ALL)`设置会立即显示这一点。

# hadoop - Web 平台安装程序 Hadoop 重新安装

> ID：13315220
> 
> 赞同：1
> 
> 时间：2012-11-09T20:08:52.323
> 
> 标签：hadoop, web-platform-installer, azure-hdinsight

我在 Windows 8 下使用 Web 平台安装程序安装了 HDInsight (Hadoop)，却发现安装程序设置为安装到 IIS Express 而不是 IIS。所以，我使用添加/删除程序卸载了它。现在我想将它重新安装到 IIS，但是当我运行 Web 平台安装程序时，它认为它已经安装并且不会让我重新安装（安装按钮被禁用）。

有没有办法 a) 手动安装 HPInsight，或 b) 强制 WPI 重新安装。

顺便说一句，我清除了 WPI 中的缓存，认为它可能会重新计算安装了哪些功能，但它只是删除了我可以用来从以前下载的包中手动安装的安装文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T17:20:57.840

更好的是 HKEY_CLASSES_ROOT\Installer\Products\XXXXXXXXXXXXXX

在 HKEY_CLASSES_ROOT 下的注册表中搜索 HDINSIGHT 找到 Products 文件夹下的文件夹，然后删除包含 ProductName 字符串值下的 HDINSIGHT 条目的该文件（“文件夹”）的整个注册表项。我花了一段时间才弄清楚那个。

# java - 对象数组

> ID：13315221
> 
> 赞同：-7
> 
> 时间：2012-11-09T20:09:01.977
> 
> 标签：java, arrays

我需要你的帮助来回答这个问题。我试图回答它，但我不能。

问题：

1.  设计一个包含以下内容的学生类：

    *   一个名为 ID 的整数数据字段，表示学生的 ID。
    *   一个名为 Name 的字符串数据字段，表示学生的姓名。
    *   一个名为 GPA 的双数据字段，代表学生的 GPA。
    *   一个名为 pass 的整数数据字段，表示通过的学生人数。
    *   一个名为失败的整数数据字段，表示失败学生的数量。
    *   一个构造函数，它创建一个具有指定 ID 和名称以及 GPA 的 Student。
    *   一个名为 printInfo() 的方法，它以对象数组作为参数并打印所有学生的详细信息，并计算有多少学生通过和多少失败。（注：及格学生的 GPA 必须大于或等于 2）
    *   不及格的学生 GPA 低于 2。
    *   所有数据字段的访问器和修改器方法。

2.  编写一个测试程序：

    *   创建一个名为 List 的对象数组。
    *   在 List 数组中添加任意数量的学生，方法是询问用户您要输入多少学生。
    *   显示所有学生的最终结果。

请帮帮我。这是我的第一个问题

* * *

这是我的答案，但它有一个错误。因此我无法完成。

打包项目；

公共课学生{

```
private int ID;
private String Name;
private double GPA ;
private int pass;
private int fail;
public Student(int ID, String Name, double GPA) {
    this.ID = ID;
    this.Name = Name;
    this.GPA = GPA;
}

public String printInfo(){
}

public int getID() {
    return ID;   
}

 public void setID(int ID) {
     this.ID = ID;
 }

 public String getName() {
     return Name;   
    }

 public void setName(String Name) {
     this.Name = Name;
     }

 public double getGPA() {
     return GPA;   
    }

 public void setGPA(double GPA) {
     this.GPA = GPA;
     }

 public int getpass() {
        return pass;   
    }

 public void setpass(int pass) {
         this.pass = pass;
     }

 public int getfail() {
        return fail;   
    }

 public void setfail(int fail) {
         this.fail = fail;
     }
 public int getnum() {
        return num;   
    }

 public void setnum(int num) {
         this.num = num;
     } 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T20:12:56.173

```
public class Student {
    int ID;
    String Name;
    double GPA;
    ... 
```

教授实际上是为你写的。

# php - 扫描 PHP 类方法

> ID：13315222
> 
> 赞同：-1
> 
> 时间：2012-11-09T20:09:10.933
> 
> 标签：php

> **可能重复：**
> [仅获取 PHP 中类的声明方法](https://stackoverflow.com/questions/3712671/get-only-declared-methods-of-a-class-in-php)

有没有办法“扫描”类中的所有方法并将它们作为数组中的字符串返回？

假设我有这个：

```
class House {

   public function doors(){
      // Doors code
   }

   public function windows()
   {
      // Windows code
   }

} 
```

我想得到这样的东西：

```
$methods = ['doors','windows']; 
```

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-09T20:25:44.503

那叫反射。使用[PHP 反射](http://php.net/manual/en/reflectionclass.getproperties.php)

# node.js - 使用来自 Yahoo Finance API 的实时流创建 nodeJS mongoDB Web 应用程序

> ID：13315228
> 
> 赞同：3
> 
> 时间：2012-11-09T20:09:40.690
> 
> 标签：node.js, express, mongoose, yahoo-finance, google-finance-api

考虑为自己构建一个使用 nodeJS、express 和 mongoose 的免提 Web 应用程序，从 Yahoo Finance API 获得历史和实时（不介意如果延迟 20 分钟）。

我自然更喜欢 Google Finance，但它在 2012 年 10 月左右被弃用。Yahoo Finance API 和论坛将其描述为 C# 友好...有没有办法解决它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T22:41:23.213

我曾经写过一个 node.js 应用程序来查询和解析来自 yahoo Finance 的数据。它工作得很好，而且很容易做到。我不确定您实际上在问什么，但这里有一些注意事项：

首先，我尝试使用 YQL（[这里有一些信息](http://www.yqlblog.net/blog/2009/06/02/getting-stock-information-with-yql-and-open-data-tables/)），它可以返回 JSON（这对于 nodejs 来说是最佳的），但是在我开始使用它后不久，该服务就切断了我，因为我达到了配额。我不知道门槛是多少，但是每分钟要求 1500 只股票是可以理解的太多了。所以我不建议将它用于类似的事情。

所以我求助于从雅虎的 CSV 服务请求数据，完全避免了 YQL（据我了解，这只是上述 CSV 服务之上的一层）。解析 CSV 数据非常简单，尤其是。如果您使用模块（我使用了[ya-csv](https://github.com/koles/ya-csv)）。

以下是有关如何请求报价的信息： http: [//cliffngan.net/a/13](http://cliffngan.net/a/13)

这是关于如何查询历史时间序列（即图表）的描述 [http://code.google.com/p/yahoo-finance-managed/wiki/csvHistQuotesDownload](http://code.google.com/p/yahoo-finance-managed/wiki/csvHistQuotesDownload)

现在，由于您要破解 node.js，您可能会考虑使用 socket.io，因为这确实有助于股票数据不断变化的性质。

最后提醒一句：每天凌晨 4 点到开市之间，雅虎都会重置所有报价。即所有股票的价格变化变为 0.00（或 0%），尽管价格等与前一天的收盘价保持正确相同。不知道他们这样做的确切原因，但这意味着如果你正在做基于百分比变化的热图或图表，那么在这些时间里它不会画出非常有趣的图形。

哦，还有一个注意事项：我不确定您是否真的需要包含猫鼬或任何数据库。当然，这取决于您对数据的处理方式，但如果您希望开发和托管的简单性和低成本，请考虑可以将所有内容存储在内存中的事实。如果应用程序崩溃并重新启动，您可以重新请求所有报价。

# java - 使用 hibernate4.1 和 spring 3.1 获取 LazyInitializationException

> ID：13315230
> 
> 赞同：0
> 
> 时间：2012-11-09T20:09:48.030
> 
> 标签：java, spring, hibernate

我正在使用 OpenSessionInViewFilter。这是我的 web.xml 中的第一个过滤器

```
<filter>
    <filter-name>openSessionInViewFilter</filter-name>
    <filter-class>org.springframework.orm.hibernate4.support.OpenSessionInViewFilter</filter-class>
  </filter>
  <filter-mapping>
    <filter-name>openSessionInViewFilter</filter-name>
    <url-pattern>/*</url-pattern>
  </filter-mapping> 
```

这是我的 applicationContext.xml 的一部分

```
<bean id="txManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory"/>
  </bean>

<bean id="userBc" class="com.tutorial.bc.auth.UserBcImpl">
    <property name="userDao">
      <ref local="userDao"/>
    </property>
  </bean>
...
<tx:annotation-driven transaction-manager="txManager"/> 
```

我在 hbm 文件中的映射-

```
<set name="userCoachingRoles" table="user_coaching_role" lazy="true" cascade="all-delete-orphan">
      <key column="user_id"/>
      <many-to-many column="coaching_id" class="com.tutorial.entity.coaching.Coaching" lazy="proxy"/>
</set> 
```

我获取用户的 userBc 中的方法带有注释，`@Transactional`并且我的实体 User 有一个方法`getUserCoachingRoles`。我遇到了这个方法的异常 -

```
org.hibernate.LazyInitializationException: could not initialize proxy - no Session 
```

我无法理解为什么即使我使用`OpenSessionInViewFilter`. 需要帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T21:28:07.507

你有没有机会`getUserCoachingRoles`在一个单独的线程中调用？如果是这样，这是预期的行为。

由于`UserCoachingRoles`没有立即加载，因此 Spring 无法访问该线程内的数据库连接，也无法加载它。你需要：

*   create an enclosing session wrapper in your thread;
*   pass the id of `UserCoachingRoles` to the thread instead of passing object and load the property inside this thread

# antlr - 语法模块化：先定义其他规则后导入词法分析器规则的方法？

> ID：13315237
> 
> 赞同：4
> 
> 时间：2012-11-09T20:10:11.540
> 
> 标签：antlr, composition

假设我有一个简单的语法（词法分析器和解析器），用于解析和评估简单的数学表达式（如在一些 antlr 示例中），它还允许简单的变量定义（即分配浮点值）和使用这些变量。例如可以处理以下情况：

```
 r = 2.5;
 PI = 3.14;
 PI * r * r; 
```

这应该用于更复杂的语法。事实上，有几个不同的。问题是上述 contains 的词法分析器基本上将每个字符串识别为标记类型 ID，即潜在的变量名称，但更复杂的语法可能包含其他关键字。

如果我做

```
lexer grammar ComplexLexer;
import SimpleMathExprLexer;
// ...
IF : 'if'|'IF';
THEN : 'then'|'THEN';
// ... 
```

那么 ID 已经与这些关键字匹配并不是很有帮助。简单地将 import 语句移到这些规则之下是行不通的。有没有办法解决这个问题，或者当我看构图时我完全走错了路？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T20:23:39.680

ANTLR 只会优先考虑首先定义的规则。这意味着如果您有一个词法分析器语法`G`，则导入词法分析器语法`G3`并在该语法之后`G2`：

```
lexer grammar G;

import G3, G2;

... 
```

或类似地：

```
lexer grammar G;

import G3;

... 
```

```
lexer grammar G3;

import G2;

... 
```

from 的规则`G3`将优先于`G2`，但 from 的规则`G`将优先于`G3` *and* `G2`。

就像单个词法分析器语法一样，`IDENTIFIER`您在匹配关键字（如, , ... ）的规则*之后定义的规则*`"if"``"then"`

# android - 如何在 ListView 标头中包含 ViewPager

> ID：13315238
> 
> 赞同：1
> 
> 时间：2012-11-09T20:10:12.053
> 
> 标签：android, android-listview, android-viewpager

我希望能够在列表视图的标题中放置一个“图像滑块”。因此，用户可以滑动浏览图像，然后当他们开始滚动页面时，滑块会滚动到视图之外。

我用 ViewPager 得到了我想要的滑块。现在，我需要做的就是将它插入到列表视图的标题中，但这似乎给我带来了重大问题。

我这样添加寻呼机：

```
ViewPager pager = (ViewPager) inflater.inflate(R.layout.featured_event, listView, false);

FeaturedEventAdapter featuredAdapter = new FeaturedEventAdapter( getFragmentManager() );

pager.setAdapter( featuredAdapter );

listView.addHeaderView( pager ); 
```

我收到以下错误：

```
java.lang.ClassCastException: android.widget.LinearLayout cannot be cast to android.support.v4.view.ViewPager 
```

现在，要注意的关键是，如果我在列表视图之外显示它，这将非常好。

编辑：featured_event xml

```
<?xml version="1.0" encoding="utf-8"?>    
<android.support.v4.view.ViewPager xmlns:android="http://schemas.android.com/apk/res/android"
   android:id="@+id/pager"
   android:layout_width="match_parent"
   android:layout_height="200dip">

    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
       android:layout_width="match_parent"
       android:layout_height="match_parent"
       android:gravity="center_horizontal" >

        <ImageView xmlns:android="http://schemas.android.com/apk/res/android"
             android:id="@+id/imageView1"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:src="@drawable/car" />

    </LinearLayout>

</android.support.v4.view.ViewPager> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T20:45:14.567

无法看到您的 features_event.xml 布局，我会试试这个：

```
View root = inflater.inflate(R.layout.featured_event);
ViewPager pager = null;
if (root instanceof ViewPager){
    Log.d("TAG", "the root element IS the viewpager");
    pager = root;    
} else {
    Log.d("TAG", "pager is not the root element in featured_event.xml, lets find it");
    pager= (ViewPager) root.findViewById(R.id.myViewPagerIdThatIGaveIt);
}
FeaturedEventAdapter featuredAdapter = new FeaturedEventAdapter( getFragmentManager() );
// add header before adapter
listView.addHeaderView( pager );
pager.setAdapter( featuredAdapter ); 
```

# objective-c - 用户放大或缩小时的 Route-Me RMMarker 比例标记大小

> ID：13315239
> 
> 赞同：1
> 
> 时间：2012-11-09T20:10:18.077
> 
> 标签：objective-c, route-me

我有以下代码，它工作正常，显示带有 route-me 的标记，但我正在寻找一种方法来调整标记每次用户放大或缩小地图时的大小（例如，放大时标记变大缩小时变小）。我查看了“newMarker.contentsSize”的功能，但它似乎没有做任何事情。

有没有允许这种能力的功能？

```
RMMarker *newMarker;
NSString *fileLocation;
fileLocation = [[NSBundle mainBundle] pathForResource:@"marker-blue" ofType:@"png"];
UIImage *startImage = [[UIImage alloc] initWithContentsOfFile:fileLocation];

newLocation.latitude = 47.580;
newLocation.longitude = -122.333;   
newMarker = [[RMMarker alloc] initWithUIImage:startImage anchorPoint:CGPointMake(0.5, 1.0)];
[mv.contents.markerManager addMarker:newMarker AtLatLong:newLocation];
newMarker = nil; 
```

# javascript - 从 ESC 按钮中删除停止 GIF 动画功能

> ID：13315242
> 
> 赞同：2
> 
> 时间：2012-11-09T20:10:33.573
> 
> 标签：javascript, jquery, button, gif, simplemodal

我想从 ESC 按钮中删除停止 GIF 动画功能可以吗？

请看这个：http: [//jsfiddle.net/f8emy/](http://jsfiddle.net/f8emy/)

按上传，然后按一次 ESC，然后再次按上传，您会注意到 GIF 动画停止移动。

现在我知道你会问我为什么禁用 SimpleModal 内部 ESC 功能：

```
escClose: false 
```

并添加了另一个 ESC 功能：

```
$(function() {
    $(document).on('keydown', function(e) {
        if (e.keyCode === 27) {
            $.modal.close();
        }
    });
}); 
```

是不是因为这样它也会取消加载页面，而不是仅仅关闭 SimpleModal 以便它也会取消上传。

我真正想要的是当您单击上传时，simplemodal 将与 GIF 一起出现，然后如果您按下 ESC，它将关闭 simplemodal 并取消上传（停止页面加载），然后如果您再次按下上传，它将与GIF 动画仍在 simplemodal 中播放。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T20:22:11.587

这是每个人最喜欢的超级英雄的工作：-[`preventDeafult()`](https://developer.mozilla.org/en-US/docs/DOM/event.preventDefault)男人！

```
// Close SimpleModal & Cancel Page Loading (from uploading)
$(function() {
    $(document).on('keydown', function(e) {
        if (e.keyCode === 27) {
            e.preventDefault(); //prevent browser from stopping animation
            $.modal.close();
        }
    });
}); 
```

更新了你的[jsFiddle](http://jsfiddle.net/f8emy/1/)。

`Esc`Firefox 将在按下时停止 gif 动画；`e.preventDefault()`将阻止此操作，并保持聚会，呃... gif 动画，继续。

# c# - Castle Windsor Service 绑定组件

> ID：13315244
> 
> 赞同：1
> 
> 时间：2012-11-09T20:10:40.403
> 
> 标签：c#, dependency-injection, assemblies, castle-windsor

警告：我对温莎真的很陌生。

我有 1 个包含多个项目的解决方案。我有一个项目，其中包含我们所有的接口（名为“框架”）和其他包含这些接口的具体实现的项目。我试图让 Windsor 绑定这些并像这样解析我的接口：

其他项目之一称为“订单”，它有一个`Order`实现`IOrder`在框架项目中定义的类。这两个项目之间有一个引用，它确实可以编译。

我有另一个项目，其中包含我创建的安装程序的实际 Windsor 调用：

```
public class CoreInstaller : IWindsorInstaller
  {
    public void Install(IWindsorContainer container, IConfigurationStore store)
    {
        container.Register(
          AllTypes.FromAssemblyNamed("Framework"),
          AllTypes.FromAssemblyNamed("Orders")
        );
    }
  } 
```

我这样实例化温莎容器：

```
new WindsorContainer().Install(new CoreInstaller()); 
```

当我尝试解决`IOrder`时，它失败了：

> Castle.MicroKernel.ComponentNotFoundException：找不到支持服务 Framework.IOrder 的组件

我也尝试过在安装功能中翻转项目以`Orders`首先加载，但我得到了同样的错误。

那里有可以帮助我的 Windsor 用户吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T20:35:22.487

您已经有效地告诉 Windsor 获取所有类型，但您还没有告诉它如何处理它们。如果您不打算过滤要注册的类型以及要注册的接口，则需要将 Pick() 方法添加到您的注册中。

例如...

```
container.Register(
    Classes.FromAssemblyNamed("Framework").Pick(),
    Classes.FromAssemblyNamed("Orders").Pick()
); 
```

# vb.net - 如何使用 system.drawing.stringformat 获得垂直 nowrap 字符串

> ID：13315246
> 
> 赞同：4
> 
> 时间：2012-11-09T20:10:42.270
> 
> 标签：vb.net, system.drawing, string-formatting

我正在处理图形，当我的图表被渲染时，我需要让我的图表上的轴标签成为一条垂直的文本行。我不在乎某些文本是否被截断，但我需要它优雅地截断。

我正在使用 Carlos Ag 提供的 WebChart dll，并将 System.Drawing.StringFormat 对象传递给图表。

```
 objChartText = New WebChart.ChartText
 objChartText.Font = New Font("Verdana", 8, FontStyle.Regular, GraphicsUnit.Point)

 Dim objStringFormat As StringFormat = New StringFormat(StringFormatFlags.DirectionVertical)

 objStringFormat.LineAlignment = StringAlignment.Center
 objStringFormat.Alignment = StringAlignment.Center
 objStringFormat.Trimming = StringTrimming.Word

 objChartText.StringFormat = objStringFormat 
```

“StringformatFlags.DirectionVerticle”是一个确定位置的枚举。我想知道是否有一个不同的已知非枚举值可以传递给我想要的结果。[定义](http://msdn.microsoft.com/en-us/library/system.drawing.stringformatflags.aspx)的枚举都没有给我想要的东西。我尝试简单地添加我想要的枚举 2（DirectionVertical）和 4096（nowrap），但这会在图形下方留下宽间距的单个字符。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T20:22:44.737

这里的问题实际上是修剪和对齐，而不是枚举。

可以添加枚举来组合效果。在这种情况下，正确的值为 4098，因此实例化应为

```
Dim objStringFormat As StringFormat = New StringFormat(4098) 
```

并且应该更改修剪或对齐方式。我的解决方案是将修剪更改为

```
 objStringFormat.Trimming = StringTrimming.Character 
```

这解决了我的问题并允许我创建一个漂亮的图表。

# java - 读取 .csv 文件并存储到 Java 中的链表

> ID：13315252
> 
> 赞同：4
> 
> 时间：2012-11-09T20:10:53.583
> 
> 标签：java, io, linked-list

我有一个简单的 .csv 文件，其中包含五个字段：`firstName`(string)、`lastName`(string)、`age`(int)、`gender`(char) 和`priority`(int)。我需要将此文件读入我已经设置的链接列表。

我的问题是：解决这个问题的最简单方法是什么？我没有发布细节，因为我只是在寻找一般（但简单）的想法；我想自己弄清楚。在文件 I/O 方面，我们没有比 FileReader / FileWriter 做得更高级。我能想到的唯一方法是使用`Scanner`导入每一行，然后使用`String.split()`将所有内容拆分为一个数组，然后遍历数组并手动提取所有内容/转换为正确的格式（因为它们都将是字符串），然后一次全部插入到链表中。然而，这似乎是一种令人难以置信的迂回方式。

有没有更简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T08:18:17.807

有一个更有效的解决方案，无需重新发明轮子：添加这个库 [opencsv](http://repo1.maven.org/maven2/net/sf/opencsv/opencsv/2.3/opencsv-2.3.jar) 如果你使用 Maven，你可以把这个代码放在你的 pom 文件中 net.sf.opencsv opencsv 2.3

[在图书馆文档](http://opencsv.sourceforge.net/)中很好地解释了如何使用它

```
ColumnPositionMappingStrategy strat = new ColumnPositionMappingStrategy();
strat.setType(YourOrderBean.class);
String[] columns = new String[] {"name", "orderNumber", "id"}; // the fields to bind do in your JavaBean
strat.setColumnMapping(columns);

CsvToBean csv = new CsvToBean();
List list = csv.parse(strat, yourReader); 
```

我希望这对你有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T20:21:36.357

不幸的是，您已经找到了最简单的解决方案。

一般来说，Java 中的泛型数据读取非常不舒服，因为它是静态类型的。CSV、XML 和其他数据序列化方法的部分意义在于，它们在定义的数据结构方面是自记录的。在 Java 的情况下，这不太好用，因为结构必须是预定义的（通过类）或读入一个通用的结构，它几乎是无用的（如列表或键-> 值映射，所有内容都保留）一个字符串）。

这不是对 Java 的仇恨咆哮，我只是指出，使这项特殊的工作变得简单和直观与 Java 的核心语言特性根本不兼容。在像 Python 这样的动态类型语言中，这样的事情要简单得多（尤其是在 Python 中，由于核心 csv 模块的存在，这几乎是微不足道的），因为您可以将任何类型的数据放入对象中，并且它会适应. Java 必须提前知道会发生什么，这会导致您发现的尴尬冗长。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T20:24:01.553

Spring 框架中的 StringUtils 有一些功能。但我想说它并没有真正产生任何影响，并且引入了不必要的依赖。

坚持你的想法。

# ios - iOS Table View - How to deselect all buttons in all cells?

> ID：13315253
> 
> 赞同：0
> 
> 时间：2012-11-09T20:10:55.960
> 
> 标签：ios, select, uitableview, uibutton

I have a table displaying items. Each cell has a button that is used to display something else about the item. In order to track what is being displayed (used in the parent view as the table is in a modal), I set the button to be selected.

My issue is that I want to ensure only ONE button is "selected" at a time. So if user taps button A, then later taps button B, how can I "deselect" button A?

Again, the buttons are embedded in each cell, so how can I iterate through each cell and disable the buttons (WITHOUT reloading the table data)?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T20:24:10.277

I guess you save the information about wether a button is pressed or not out of the button. You have to do so, because the cells can be reused, and so if you only save this info in the selected property of a button, it will be lost if the cell is being reused.

Taking into account that you have the index of the selected button cell saved somewhere, you can iterate through all the visible cells in the UITableView using [visibleCells](http://developer.apple.com/library/ios/documentation/uikit/reference/UITableView_Class/Reference/Reference.html#//apple_ref/occ/instm/UITableView/visibleCells) method. For each UITableViewCell, you disable the button if its index is not the one you want. Use [indexPathForCell:](http://developer.apple.com/library/ios/documentation/uikit/reference/UITableView_Class/Reference/Reference.html#//apple_ref/occ/instm/UITableView/indexPathForCell:) to check the index.

And you should be good. Of course, everytime the dataSource asks for a cell, check if the indexPath is the selected and if so, set the button.selected to YES.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T20:46:19.720

I think you want to be using UISegementedControls or UISwitches instead of UIButtons. Either of those other controls are set up to automatically deselect all other options when the user chooses one. They also provide very nice methods for knowing what the user has selected, and can be configured so each option appears differently depending on if it's the current selected item or not. Also, they can trigger other code completely unrelated to appearance when the selected item is changed, and the code can be written to deal with each option differently.

# .net - 数据行设置器性能取决于数据表列数？

> ID：13315260
> 
> 赞同：2
> 
> 时间：2012-11-09T20:11:21.133
> 
> 标签：.net, performance, dataset, datarow

我们最近经历了具有大量列数（~100-200）的数据表的性能显着降低。经过一些调试，我认为滞后来自 datarow 的 set item 方法随着列数的增加而变慢。这是我们的基准测试，在循环中设置相同的行项：

```
 Dim sw As New Stopwatch
        Dim cnt = 10 ^ 6 - 1

        Debug.Print("-- Row setter test for 10 column datatable --")

        Dim dt As New DataTable
        For i = 0 To 9
            dt.Columns.Add("Column" & i.ToString)
        Next
        Dim row As DataRow = dt.Rows.Add

        Dim col = dt.Columns(9)
        sw.Restart()
        For i = 0 To cnt
            row.Item(col) = 3.14
        Next
        sw.Stop()
        Debug.Print("RowSet time:  " & sw.Elapsed.TotalSeconds.ToString)

        Debug.Print("-- Row setter test for 100 column datatable --")

        dt = New DataTable
        For i = 0 To 99
            dt.Columns.Add("Column" & i.ToString)
        Next
        row = dt.Rows.Add

        col = dt.Columns(9)
        sw.Restart()
        For i = 0 To cnt
            row.Item(col) = 3.14
        Next
        sw.Stop()
        Debug.Print("RowSet time:  " & sw.Elapsed.TotalSeconds.ToString) 
```

...对于 10 列表输出 0.95 秒，对于 100 列表输出 5.8 秒 - 显着差异。使用其他重载集合方法的结果与列名和列索引相似。

我不明白这些结果。数据行项的获取/设置不应该是相对于总列数的 O(1) 操作吗？数据表肯定以某种方式索引了它的列集合吗？

# ruby - 在 Ruby 中使用“.delete”清理电话号码条目

> ID：13315261
> 
> 赞同：0
> 
> 时间：2012-11-09T20:11:27.457
> 
> 标签：ruby, csv, formatting, phone-number, ruby-1.9.3

我正在使用 Ruby 清理 CSV 文件中的一些电话号码条目。一些用户输入了不需要的字符，我想对它们进行排序并全部删除（其中包括：句点、括号、连字符）。在编写代码时，我意识到我可以使用 Ruby 提供的 .delete 方法，如下所示：

```
 def clean_num
   @file.each do |line|
    number = line[3]
    #Would need a .delete for every unwanted character?
    clean_number = number.delete(".")
    puts clean_number
   end
  end 
```

删除上述其他字符的更有效方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T20:15:49.210

您正在寻找正则表达式：

```
clean_number = number.gsub(/[^\d]/, "") 
```

第一个参数`gsub`是要查找的模式，第二个参数是替换每个出现的内容。

`[^\d]`这会用空字符串 ( )替换所有不是数字 ( ) 的内容`""`。

# mysql - MySQL触发器在更新前计算状态字段

> ID：13315274
> 
> 赞同：0
> 
> 时间：2012-11-09T20:12:45.887
> 
> 标签：mysql, triggers

我们的“wo”表上有一个状态字段，该字段当前是动态计算的，并且正在成为性能问题，因为正如您在下面看到的那样，每个 wo 记录涉及数千条记录 - 使报告等成为问题。

我对触发器有点新手，但我想做的是创建一个 mysql 触发器来计算更新状态并将其存储在 wo 记录中。[创建触发代码] [http://pastie.org/5352756](http://pastie.org/5352756) （此处无法正确格式化）。

我可以确认计算状态的查询是自己工作的（如果我最后硬编码了 woID）。

当我尝试创建此触发器时，我收到响应“查询为空”。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T20:37:19.230

想通了 - 问题在于分隔符。

# fluent-migrator - 迁移如何发现 Fluent Migrator 中的数据库类型？

> ID：13315284
> 
> 赞同：0
> 
> 时间：2012-11-09T20:13:37.460
> 
> 标签：fluent-migrator

使用 Fluent Migrator，Migration 类方法如何发现正在迁移的数据库的性质？我需要知道它是 SQLite 还是其他东西。

我知道有一个名为 MigratorDotNetMigration 的遗留类，但我不想放弃 Fluent Migrator 的功能——这不是我正在处理的遗留迁移。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T21:32:57.257

我在[这里](https://github.com/schambers/fluentmigrator/wiki/Dealing-with-Multiple-Database-Types)找到了解决方案。它基于 IsDatabase()。

# c++ - 使用双精度的程序的意外行为

> ID：13315285
> 
> 赞同：0
> 
> 时间：2012-11-09T20:13:40.137
> 
> 标签：c++, double

> **可能重复：**
> [为什么 Visual Studio 2008 告诉我 .9 - .8999999999999995 = 0.00000000000000055511151231257827？](https://stackoverflow.com/questions/1662600/why-does-visual-studio-2008-tell-me-9-8999999999999995-0-00000000000000055)
> [为什么像 1.82 这样的简单双打最终会变成 1.819999999645634565360？](https://stackoverflow.com/questions/6006200/why-do-simple-doubles-like-1-82-end-up-being-1-819999999645634565360)

当我编译并运行以下程序时，我得到了一个非常奇怪的行为：

```
#include <iostream>

#define DIV 10000ll

long long gcd(long long a, long long b) {
  if(b==0) return a;
  else return gcd(b, a % b);
}

int main() {
  int t;
  std::cin >> t;
  while(t--) {
    double n1;
    std::cin >> n1;
    long long inum=(long long)(n1*DIV);
    std::cout << inum << std::endl;
    if(inum==0) { std::cout << 1 << std::endl; }
    else std::cout << DIV/gcd(inum,DIV) << std::endl;
  }
  return 0;
} 
```

当我作为输入输入时：

```
1
0.0006 
```

我得到输出

```
5
2000 
```

这意味着：`(long long)0.0006*10000`等于 5 而不是 6。为什么会这样？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-09T20:16:11.330

0.0006 不能完全表示为双精度数。最有可能存储的实际结果类似于 0.00059999999... 当此值乘以 10000 时，它给出的数字略小于 6。将其转换为整数类型会将其截断（向下舍入）为 5。

这不是奇怪的行为。这就是浮点运算的工作原理。如果你想得到值 6，你应该四舍五入到最接近的整数而不是截断。

**有关的**

*   [在 C++ 中用于浮点数的 round()](https://stackoverflow.com/questions/485525/round-for-float-in-c)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T20:17:41.297

我的猜测是它与浮点精度有关。.0006 可能类似于计算机中的 .0005999999999，然后将其乘以 10,000，然后将其转换为 long，这样会去掉小数，因此 5.999999 变为 5。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T20:18:15.483

尝试使用 a`long double`相反，它是一个浮点精度错误，修复它的简单方法是使用更精确的浮点类型。除非它是截断错误，在这种情况下，您需要在投射*前四舍五入。*

# ios - 我可以在 iOS 上添加水印来渲染 OpenGL ES

> ID：13315286
> 
> 赞同：0
> 
> 时间：2012-11-09T20:13:42.520
> 
> 标签：ios, opengl-es-2.0, shader, watermark, blending

我需要为用户添加不可见的水印来渲染 OpenGL ES 2.0 的数据。如果用户通过 home+lock 进行截图，则水印将略微可见。

我该怎么做？还是不是不可能？

也许与混合？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T20:28:15.653

Home+lock 会在按下时准确复制屏幕上的内容；它不会修改任何内容，您也无法以编程方式更改视图。因此，您不能拥有对用户不可见但在他们截取屏幕截图时变得可见的水印。

通过混合，您可以添加始终可见的水印。使用合适的着色器和一些基本的密码学，您可以添加对人类不可见但可以被软件检测到的水印，具有不同程度的复杂性和稳健性。

# django - 如何在不更改路径和其他配置的情况下部署 django 应用程序？

> ID：13315289
> 
> 赞同：2
> 
> 时间：2012-11-09T20:14:04.440
> 
> 标签：django, virtualenv

目前我有一个带有 virtualenv 和 zc.buildout 的项目，但问题是当我想在生产服务器中部署这个应用程序时。我希望能够在生产服务器中部署应用程序而无需更改路径（相对于服务器）并且无需替换任何包等。

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T07:44:00.993

With the following structure:

```
repo/
    project/
        settings.py
    local/ 
```

And these settings:

```
#settings.py
import os
import sys

PROJECT_ROOT = os.path.dirname(__file__)
PROJECT_LOCAL = os.path.join(os.path.dirname(PROJECT_ROOT), 'local') 
```

You can install anything in the local folder which is deployment specific, like your buildout and virtualenv and reach it through `PROJECT_LOCAL`. Of course you should ignore `local/*` in your versioning.

# android - 更新 Android 应用的启动器图标以显示通知

> ID：13315294
> 
> 赞同：0
> 
> 时间：2012-11-09T20:14:28.480
> 
> 标签：android, notifications, icons

我已经阅读了有关在满足某些条件时更新 Android 应用程序图标的文章，例如显示未读邮件数量等的文章，但这些都没有给出解决方案。这是关于此的一个讨论：[如何在 Android 中以编程方式更改应用程序图标？](https://stackoverflow.com/questions/1103027/how-to-change-an-application-icon-programmatically-in-android)但仍然没有具体的解决方案，有可能吗？如果有人知道如何通过更改应用程序代码来实现此功能，请告诉我...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T20:24:12.227

> 但这些都没有给出解决方案

那是因为没有解决办法。

> 有可能吗？

不。

您可以创建一个动态的应用程序小部件，或者您可以编写自己的主屏幕，根据其图标来做任何想做的事情。

# iphone - 核心数据迁移 - 更改属性类型

> ID：13315298
> 
> 赞同：2
> 
> 时间：2012-11-09T20:14:46.997
> 
> 标签：iphone, ios, core-data, magicalrecord

我有一个使用 Core Data Persistent Store 的 iOS 应用程序。我有几个人在测试应用程序，需要对数据模型进行一些更改，特别是将属性的类型从“NSString”更改为“int16_t”。

这是我到目前为止所做的：

*   创建了一个新的模型版本
*   更改了属性类型
*   添加了一个映射模型（我不确定我在这里需要什么。我有一个带有自定义策略的 EntityMapping）
*   创建了自定义策略（如下所列）

我正在使用 MagicalRecord。正在执行迁移，但似乎正在清除数据库。我能够在本地读取 SQLite 文件并且可以看到表列的更改（但不是每次我清理、加载旧应用程序版本和执行迁移时）。

我怎样才能让这样的事情起作用？我想动态读取字符串并计算正确的值。现在我将它设置为 1 作为 NSNumber。我不确定如何为 int 创建有效的 NSExpression

这是我的自定义政策：

```
@implementation MessageLabelMigration

- (BOOL)createDestinationInstancesForSourceInstance:(NSManagedObject *)instance
                                  entityMapping:(NSEntityMapping *)mapping
                                        manager:(NSMigrationManager *)manager
                                          error:(NSError **)error {
    NSArray *_properties = [mapping attributeMappings];
    NSLog(@"_properties: %@", _properties);

    for (NSPropertyMapping *_property in _properties) {
        if ([[_property name] isEqualToString:@"label"]) {
            NSExpression *_expression = [NSExpression expressionForConstantValue:[NSNumber numberWithUnsignedShort:1]];
            [_property setValueExpression:_expression];
        }
    }

    return [super createDestinationInstancesForSourceInstance:instance
                                            entityMapping:mapping
                                                  manager:manager
                                                    error:error];
}

@end 
```

# java - Java排序的双向链表添加方法

> ID：13315299
> 
> 赞同：1
> 
> 时间：2012-11-09T20:14:56.693
> 
> 标签：java, add, sorted, doubly-linked-list

我在完成一项分配给我的任务时遇到了一些极端困难。

任务是在java中创建4​​种不同的数据结构，LinkedList、DoublyLinked list、deque和sorted doublelinked list。除了 sorted 中的 add 方法外，我几乎拥有所有东西。

我已经尝试了大约 4 个小时不同的事情，每次我这样做时，我得到的测试用例都会失败。

我正在发布我当前的代码，它不能按照我想要的方式工作。如果有人可以通过查看它来判断我需要修复什么，那就太棒了。我还可以将代码发布到其他方法和其他东西。谢谢！

```
public void add(T item) {
    if (head.getData() == null) {
        head = new Node(item);
        tail = new Node(null);
        tail.setPrev(head);
        head.setNext(tail);
        count++;
    } else if (((Comparable<T>) head.getData()).compareTo(item) >=0) {
        Node tempNode = head;
        head = new Node(item);
        head.setNext(tempNode);
        tempNode.setPrev(head);
        count++;

    } else {
        Node current = head.getNext();
        for (int i = 1; i < size()  && current.getData() != null; i++) {
            if (((Comparable<T>) current.getData()).compareTo(item) > 0) {
                current = current.getNext();
            } else if  (((Comparable<T>) current.getData()).compareTo(item) <= 0) {
                Node newNode = new Node(item);
                current.getPrev().setNext(newNode);
                newNode.setNext(current);
                newNode.setNext(current.getPrev());
                current.setPrev(newNode);
                count++;
                break;
            } 
        }
        tail = new Node(item);
        current.setNext(tail);
        tail.setPrev(current);
        count++;
        return;
    }
} 
```

编辑一：

好的，我可以修复演员表的问题，但这对我想要完成的工作没有帮助。对于我的问题含糊不清或不清楚的部分，我深表歉意。有点难以解释。我还得到了很多测试用例，例如这个：

```
 public void testAddAll() {
    SortedDLL<Integer> list = new SortedDLL<Integer>();
    assertEquals(0, list.size());

    Integer[] objects = {32,0,5125,-12};
    Integer[] sorted = {-12,0,32,5125};
    list.addAll(objects);
    assertEquals(4, list.size());

    for (int i = 0; i < objects.length; i++) {
        assertEquals(sorted[i], list.get(i));   
    }
} 
```

当我为最后一部分执行此操作（使用 system.out.println 而不是 assertEquals）时，我得到： (-12, -12) (0, 0) (32, 5125) (5125, 0) 这不完全对。我只是不确定发生了什么。我无法发布所有尝试过的解决方案，因为我已经删除了大部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T20:38:31.310

我发现您的代码难以阅读和理解。如果您发布整个课程会很好，以便我们知道您的确切变量定义等。

我可以在您的代码逻辑中找到的错误如下：

```
 tail = new Node(item);
    current.setNext(tail);
    tail.setPrev(current);
    count++;
    return; 
```

这应该更改为：

```
if ( current == tail ) {
    tail = new Node(item);
    current.setNext(tail);
    tail.setPrev(current);
    count++;
    return;
} 
```

编辑：完整的代码已被删除。

# c# - 3DES 不会为同一密文的多次迭代产生一致的解密

> ID：13315301
> 
> 赞同：2
> 
> 时间：2012-11-09T20:15:06.933
> 
> 标签：c#, encryption, 3des, tripledes

我在我的代码中实现了一个 3DES (TripleDES) 解密例程，并注意到当提供的密文与前一次迭代相同时，它永远不会产生相同的明文。这似乎是不确定的，我敢肯定这是我做错了。

我尝试过 CBC（带有归零的 IV）、ECB、处置和清算的多种组合。我似乎无法获得一致的输出。

（由于某种原因，下面“代码”和“输出”上的代码格式不正确，抱歉）

代码

```
using System;
using System.Security.Cryptography;
using System.Threading;

namespace Test
{
    class Program
    {
        static void Main(string[] args)
        {
            while (true)
            {
                string key = "27F66D5244FF621EAA6F6120EDEB427F";
                string cipher = "C25C1D1197D31CAA87285D59A892047426D9182EC11353C051ADD6D0F072A6CB3436560B3071FC1FD11D9F7E74886742D9BEE0CFD1EA1064C213BB55278B2F12";

                Console.WriteLine("clear: " + byte_array_to_hex_string(
                    decrypt_3des(
                        hex_string_to_byte_array(cipher),
                        hex_string_to_byte_array(key)
                    ), true, true
                    ));

                Console.WriteLine("");
                Thread.Sleep(1000);
            }
        }

        static byte[] decrypt_3des(byte[] cipher, byte[] key)
        {
            if (cipher == null) return null;
            if (key == null) return null;
            int num_chunks = (cipher.Length) / 8;

            Console.WriteLine("Entering decrypt_3des");
            Console.WriteLine(" - cipher: " + byte_array_to_hex_string(cipher, true, true));
            Console.WriteLine(" - key: " + byte_array_to_hex_string(key, true, true));
            Console.WriteLine(" - cipher length: " + cipher.Length);
            Console.WriteLine(" - key length: " + key.Length);

            if ((cipher.Length % 8) != 0)
            {
                Console.WriteLine("cipher length not divisble by eight");
                return null;
            }

            if ((key.Length % 8) != 0)
            {
                Console.WriteLine("key length not divisible by eight");
                return null;
            }

            TripleDESCryptoServiceProvider tdes = new TripleDESCryptoServiceProvider();
            tdes.Key = key;
            tdes.Mode = CipherMode.ECB;
            tdes.IV = new byte[] { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 };
            tdes.Padding = PaddingMode.Zeros;
            tdes.KeySize = (key.Length * 8);
            ICryptoTransform ct = tdes.CreateDecryptor();

            Console.WriteLine(" - IV: " + byte_array_to_hex_string(tdes.IV, true, true));
            byte[] clear = new byte[(cipher.Length)];
            clear = ct.TransformFinalBlock(cipher, 0, cipher.Length);

            Console.WriteLine(" - clear: " + byte_array_to_hex_string(clear, true, true));
            tdes.Clear();
            tdes.Dispose();
            ct.Dispose();
            return clear;
        }

        public static byte[] hex_string_to_byte_array(string hex)
        {
            int number_chars = hex.Length;
            byte[] bytes = new byte[number_chars / 2];
            for (int i = 0; i < number_chars; i += 2)
            {
                bytes[i / 2] = Convert.ToByte(hex.Substring(i, 2), 16);
            }
            return bytes;
        }

        public static string byte_array_to_hex_string(byte[] ba, bool remove_dashes, bool include_spaces)
        {
            string hex = BitConverter.ToString(ba);
            string hex_dashes = "";
            string hex_spaces = "";

            if (remove_dashes)
            {
                hex_dashes = hex.Replace("-", "");
            }
            else
            {
                return hex;
            }

            int hex_char_count = 0;
            if (include_spaces)
            {
                for (int i = (hex_dashes.Length - 1); i >= 0; i--)
                {
                    if (hex_char_count == 0)
                    {
                        hex_spaces += hex_dashes[i];
                        hex_char_count++;
                        continue;
                    }

                    if (hex_char_count % 16 == 0)
                    {
                        hex_spaces = (hex_dashes[i] + " " + hex_spaces);
                        hex_char_count++;
                        continue;
                    }

                    hex_spaces = hex_dashes[i] + hex_spaces;
                    hex_char_count++;
                }

                return hex_spaces;
            }
            else
            {
                return hex_dashes;
            }
        }
    }
} 
```

输出

```
进入decrypt_3des
 - 密码：C25C1D1197D31CAA 87285D59A8920474 26D9182EC11353C0 51ADD6D0F072A6CB 3436560B3071FC1F D11D9F7E74886742 D9BEE0C
FD1EA1064 C213BB55278B2F12
 - 键：27F66D5244FF621E AA6F6120EDEB427F
 - 密码长度：64
 - 密钥长度：16
 - 四：10F99E2232BEC7F4
 - 清除：BF3CBF923E6C0E19 DBBB64E0FCBBFBB9 4CA3D68F117BE51F 0C1294CEC85470B6 6A799CC5D914F427 30D0C47BC9E6340C BD8E4C2E
6E5819ED 23125066DBA83477
清除：BF3CBF923E6C0E19 DBBB64E0FCBBFBB9 4CA3D68F117BE51F 0C1294CEC85470B6 6A799CC5D914F427 30D0C47BC9E6340C BD8E4C2E6E5
819ED 23125066DBA83477

进入decrypt_3des
 - 密码：C25C1D1197D31CAA 87285D59A8920474 26D9182EC11353C0 51ADD6D0F072A6CB 3436560B3071FC1F D11D9F7E74886742 D9BEE0C
FD1EA1064 C213BB55278B2F12
 - 键：27F66D5244FF621E AA6F6120EDEB427F
 - 密码长度：64
 - 密钥长度：16
 - 四：32B9C802333CFBB4
 - 清除：A878F23C3AF5E724 2ACB3458F8D68E68 9BE4F6C007F24FD2 9AF4CE98239A4F2C 5710633D88266AFD 77EF88A7B09485D9 F07C33D7
08832E90 77382A7A51A532C1
清除：A878F23C3AF5E724 2ACB3458F8D68E68 9BE4F6C007F24FD2 9AF4CE98239A4F2C 5710633D88266AFD 77EF88A7B09485D9 F07C33D7088
32E90 77382A7A51A532C1

进入decrypt_3des
 - 密码：C25C1D1197D31CAA 87285D59A8920474 26D9182EC11353C0 51ADD6D0F072A6CB 3436560B3071FC1F D11D9F7E74886742 D9BEE0C
FD1EA1064 C213BB55278B2F12
 - 键：27F66D5244FF621E AA6F6120EDEB427F
 - 密码长度：64
 - 密钥长度：16
 - 四：2FCB1A9F5B502E1B
 - 清除：80B7302520ACA111 223BF99421EFDA2C 60CABCB3C632A61C 3422552A07B582B7 E50E44E38DEDC300 DD9A6EB5CF3C0A63 E512FAC0
C04D3EC5 EEC551C3E845BF80
清除：80B7302520ACA111 223BF99421EFDA2C 60CABCB3C632A61C 3422552A07B582B7 E50E44E38DEDC300 DD9A6EB5CF3C0A63 E512FAC0C04
D3EC5 EEC551C3E845BF80

进入decrypt_3des
 - 密码：C25C1D1197D31CAA 87285D59A8920474 26D9182EC11353C0 51ADD6D0F072A6CB 3436560B3071FC1F D11D9F7E74886742 D9BEE0C
FD1EA1064 C213BB55278B2F12
 - 键：27F66D5244FF621E AA6F6120EDEB427F
 - 密码长度：64
 - 密钥长度：16
 - 四：355096FE3CA1E9A1
 - 清除：E4EDCDC436745A51 42FE9D0C71933080 6DFCAACE07FBCC22 0F5C9AF9082C8264 870362982FF90CA4 665E312FC1A8D264 DDBB27B7
3B30840E 6030D791CD849A3D
清除：E4EDCDC436745A51 42FE9D0C71933080 6DFCAACE07FBCC22 0F5C9AF9082C8264 870362982FF90CA4 665E312FC1A8D264 DDBB27B73B3
0840E 6030D791CD849A3D
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T22:49:51.947

Setting the key size results in a new random key being created. If you do this before you set the key and the IV, you will get consistent results.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T22:01:52.540

我无法解释原因，但用下面的代码替换它是可行的。我会更深入地研究它，如果我弄清楚了，我会发表评论。

```
 static byte[] decrypt_3des(byte[] cipher, byte[] key)
    {
        byte[] clear;
        TripleDESCryptoServiceProvider tdes = new TripleDESCryptoServiceProvider();
        tdes.Key = key;
        tdes.Mode = CipherMode.CBC;
        tdes.Padding = PaddingMode.None;
        tdes.IV = new byte[] { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 };

        try
        {
            ICryptoTransform ic = tdes.CreateDecryptor();
            clear = ic.TransformFinalBlock(cipher, 0, cipher.Length);
        }
        finally
        {
            tdes.Clear();
        }
        return clear;
    } 
```

# c# - SQL Server 2012，当值小于 0 时插入 null

> ID：13315303
> 
> 赞同：0
> 
> 时间：2012-11-09T20:15:29.860
> 
> 标签：c#, .net, sql

在我的 .NET 4.5、C# 应用程序中，我在 SQL Server 2012 的一行中插入了 90 个加值。其中一些值被插入到“浮点”列中。但是，此“浮点”列的某些源值小于 0。在这些特定列上，我需要将空值插入列中，或者根本不插入列中。

关于如何最好地实现这一点的任何建议。

我尝试使用具有 Variant 类型的 SqlParameter，并将值转换为“对象”，但这不是最好的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T20:19:43.600

```
INSERT INTO YourTable (FloatColumn)
SELECT CASE TestValue
          WHEN FloatColumn<0 THEN NULL ELSE TestValue
       END
FROM SourceTable 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T20:19:08.563

一种选择是使用`INSTEAD OF INSERT`触发器。

有关示例，请参阅 MSDN 上的以下文章。

[http://msdn.microsoft.com/en-us/library/ms175089(v=SQL.105).aspx](http://msdn.microsoft.com/en-us/library/ms175089(v=SQL.105).aspx)

> 可以在视图或表上定义 INSTEAD OF INSERT 触发器以替换 INSERT 语句的标准操作。

此触发器将在插入时触发，您的逻辑可以检测值并采取适当的操作，例如如果值小于 0，则将 null 插入该字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T21:28:48.877

当您为 SQL 调用构建参数列表时，悬挂 C# 的浮点类型的一个小扩展方法应该可以很好地帮助您：

```
public static SqlParameter PositiveOrNullSqlParameter( this float value , string name )
{
    return PositiveOrNullSqlParameter( (double) value , name ) ;
}
public static SqlParameter PositiveOrNullSqlParameter( this double value , string name )
{
    SqlParameter p = new SqlParameter( name , System.Data.SqlDbType.Float ) ;
    p.Value = ( value > 0 ? (object) value : (object) DBNull.Value ) ;
    return p ;
} 
```

一旦你有了...

```
int insertDataIntoMyTable( double p1 , double p2 , ... , double p99 )
{
    int rowcount ;
    string connectString = ConfigurationManager.ConnectionStrings[ "MyConnectionString" ].ConnectionString ;

    using ( SqlConnection conn = new SqlConnection(  ) )
    using ( SqlCommand    cmd  = conn.CreateCommand() )
    {
        cmd.CommandText = "insertDataIntoTable" ;
        cmd.CommandType = CommandType.StoredProcedure ;

        cmd.Parameters.Add( p1.PositiveOrNullSqlParameter( "@p01" ) ;
        cmd.Parameters.Add( p2.PositiveOrNullSqlParameter( "@p02" ) ;
        .
        .
        .
        cmd.Parameters.Add( p99.PositiveOrNullSqlParameter( "@p99" ) ;

        rowcount = cmd.ExecuteNonQuery() ;

    }

    return rowcount ;
} 
```

# extjs - 为 Ext.selection.CheckboxModel 网格 extjs 动态选择多行

> ID：13315306
> 
> 赞同：3
> 
> 时间：2012-11-09T20:15:38.330
> 
> 标签：extjs, grid

我无法为具有 Ext.selection.CheckboxModel 的网格动态选择多行。

我有要选择的行的索引。发生的事情是在选择调用之后。

```
for(var i=0;i<count;i++){
Ext.getCmp('loadFrameStateInfoTable').getSelectionModel().select(oldStateSelection[i].index);
} 
```

我在网格中得到了选择，但只有一行。那是索引最后来自的行`oldStateSelection[i].index`。

网格应选择所有行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T20:26:34.280

正如您在[文档](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.selection.CheckboxModel-method-select)中看到的那样，如果您不希望取消选择其他行，则需要设置*keepExisting 。*

```
select(oldStateSelection[i].index, true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-30T17:00:12.647

这是 ExtJS 6.2.0 及更高版本的新方法：

`.getSelectionModel().select(i,true)`- 为我工作。这里我记录下索引。

方法文档：

> `select ( records, [keepExisting], [suppressEvent] )` 按记录实例或索引选择记录实例。
> 
> 参数
> 
> *   记录：记录 `Ext.data.Model[]/Number`数组或索引
> *   keepExisting : `Boolean (optional)`True 保留现有选择；默认为：假
> *   suppressEvent : `Boolean (optional)`True 不触发选择事件；默认为：假

# c++ - 是否可以将调试模式编译库链接到发布模式的项目？

> ID：13315310
> 
> 赞同：0
> 
> 时间：2012-11-09T20:15:55.463
> 
> 标签：c++, shared-libraries, static-libraries

我在 C++ 和 Visual Studio 中有一个处于调试模式的编译库（静态 .lib），并希望在将要在发布模式下编译的项目中使用它。这可能吗？我无法在发布模式下编译库 :(
让我问一个更一般的问题：我应该关心使用库的哪些注意事项？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T21:07:05.653

在 Visual Studio（2005 和更高版本）中，STL 容器和迭代器等类在调试和发布模式下默认定义不同，并且具有不同的内存布局。如果您通过链接静态库（或调用其接口包含此类类的动态库）来混合此类类的调试和发布版本，那么您将遇到麻烦。

我相信，但我不是 100% 确定，使用 MSVS 2005 和 2008 代码将链接，并且您将在运行时遇到神秘的崩溃，而使用 MSVS 20010 和 2012 代码将无法链接。

在调试模式下编译时，可以通过将宏[_SECURE_SCL](http://msdn.microsoft.com/en-us/library/aa985896%28v=vs.110%29.aspx)定义为 0 来强制 Visual Studio 使用 STL 容器和迭代器的发布版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T20:20:40.233

> 是否可以将调试模式编译库链接到发布模式的项目？

是的。调试模式仅意味着包含断言、调试符号等。库的调试版本应该像发布版本一样功能齐全（尽管它可能比发布版本运行更慢/消耗更多内存）。

编辑：正如 David Rodriguez-dribeas 指出的那样，如果内联函数的定义在发布和调试模式下不同，这可能会产生未定义的行为，因为它违反了一个定义规则。

> 我应该关心与图书馆合作的哪些注意事项？

这太宽泛了，无法在 StackOverflow 上回答。

# cmake - CMake 设置发布和调试版本和标志

> ID：13315312
> 
> 赞同：2
> 
> 时间：2012-11-09T20:16:08.163
> 
> 标签：cmake

我是 CMake 的新手，我正在尝试编译我的项目。该项目创建了一些静态库和一些可执行文件。

下面是我拥有的文件结构的示例。

项目

*   构建/Linux

    1.  CMakeLists.txt（主 CMakelist 文件）
*   build/linux/Release（应该包含发布库和文件）

*   build/linux/Debug（应该包含文件的调试版本）

*   SRC

    1.  subProject_1
        .cpp（所有源文件）和 CMakeLists.txt 1 用于此文件夹（创建静态库）
    2.  subproject_2
        .cpp（所有源文件）和 CMakeLists.txt 2 用于此文件夹（创建静态库）
    3.  subproject_3
        .cpp（所有源文件）和 CMakeLists.txt 3 用于此文件夹（创建可执行文件）
*   包括

    1.  subProject_1
        .h（所有头文件）
    2.  subProject_2
        .h（所有头文件）
    3.  subProject_3
        .h（所有头文件）

主 CMakeLists.txt

```
cmake_minimum_required(VERSION 2.6)
SET(CMAKE_CXX_COMPILER "g++")
Project(ort)

#set the source and header directories location
set(ORT_HEADER_DIRECTORY "../../include") #include folder structure explained above
set(ORT_SOURCE_DIRECTORY "../../src")
set(ORT_BINARY_DIRECTORY "../../lib")  # lib folder to contain all the libraries

set (CMAKE_CURRENT_BINARY_DIR ".")

#Include the library packages
include_directories("/usr/include/wx-2.8")
include_directories("/usr/local/cuda/include") and so on

#set the names of all the projects (for creating the libraries)
SET(PROJECT_NAMES "log" "data" "cc")

foreach(PROJECT_NAME ${PROJECT_NAMES})
     # Create the cmake related files in the out folder so that the libraries can be
     # copied to the lib folder
     add_subdirectory( "{ORT_SOURCE_DIRECTORY}/${PROJECT_NAME}" "${CMAKE_CURRENT_BINARY_DIR}/out/${PROJECT_NAME}"

endforeach(PROJECT_NAME ${PROJECT_NAMES})

#set the names of all the projects (for creating the libraries)
SET(EXECUATALE_PROJECTS "metadata" )

foreach(EXECUATALE_PROJECT ${EXECUATALE_PROJECTS})
     # Create the cmake related files in the out folder so that the libraries can be
     # copied to the lib folder
     add_subdirectory( "{ORT_SOURCE_DIRECTORY}/${EXECUATALE_PROJECT}" "${CMAKE_CURRENT_BINARY_DIR}/out/${EXECUATALE_PROJECT}"

endforeach(EXECUATALE_PROJECT ${EXECUATALE_PROJECTS}) 
```

用于日志目录的 CMakeLists.txt 文件（与我用于 cc 和数据项目的逻辑相同）

```
SET (CMAKE_CXX_FLAGS " -g -Wall -pThread")
include_directories(${ORT_HEADER_DIRECTORY})
SET(LOG_SOURCE a.cpp b.cpp c.cpp)
ADD_LIBRARY(log_d ${LOG_SOURCE})
target_link)libraries(log_d cc_d data_d) 
```

元数据 CMakeLists.txt 文件（创建可执行项目）

```
SET (CMAKE_CXX_FLAGS " -g -Wall -pThread")
FIND_PACKAGE(wxWidgets)
IF(wxWidgets_FOUND)
        INCLUDE(${wxWidgets_USE_FILE})
ENDIF(wxWidgets_FOUND)

Include_Directories(${wxWidgets_INCLUDE_DIRS})
include_directories(${ORT_HEADER_DIRECTORY})
include_directories("/usr/ort/lib/unixODBC/include")

SET(META_SOURCE meta.cpp data.cpp)

ADD_EXECUTABLE(meta_d ${META_SOURCE })
TARGET_LINK_LIBRARIES(meta_d log_d data_d) 
```

目前，通过这篇文章，我可以在 build/linux/out 文件夹中成功生成所需的库。我确实创建了发布和调试文件夹并尝试构建相同的文件夹。这些文件在各自的 RElease 或 Debug 文件夹中创建和构建。光盘发行

cmake -DCMAKE_BUILD_TYPE=发布..

制作

问题：1）既然项目既可以在 build/linux 级别构建，也可以在 build/linux/Release build/linux/Debug 级别构建，有没有办法只能在 build/linux 编译项目级别基于提供的发布或调试选项（此外，文件将根据指定的选项放置在调试或发布文件夹中）。

即我想做 cmake -DCMAKE_BUILD=Release 。在 build/linux 级别而不是发布调试级别。

我确实尝试在 build/linux 级别使用以下选项运行

cmake -DCMAKE_BUILD_TYPE=调试

但我收到一条错误消息 Unknown argument specified。您能否让我知道如何设置此配置，以便稍后我可以将其集成到 Eclipse

2）我想根据指定的调试和版本为每个项目设置编译标志，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-20T12:07:30.420

CMakeLists.txt 属于源目录，而不是构建目录。第一次在构建目录中执行 cmake 之前，它应该是空的。您不应直接与 pthread 链接，而应使用以下方法：

```
find_package( Threads )
target_link_libraries( proyectA lib1 lib2 ... ${CMAKE_THREAD_LIBS_INIT}) 
```

1）据我所知，您可以使用任何目录，但每个目录/cmake 执行中只能有一种构建类型。

您应该知道使用 CMAKE_BUILD_TYPE=Debug 会自动将调试标志添加到构建中，因此“-g”参数是多余的。

此外，您可能应该使用 set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -Wall") 来不取消设置 cmake 用于 gcc 的默认参数。

2) Cmake 有一个变量，每个构建类型都有一个默认参数。您可以为每个添加自己的。例如，这样的事情可能会奏效：

```
set(CMAKE_CXX_FLAGS_DEBUG "${CMAKE_CXX_FLAGS_DEBUG} -Wall") 
```

有关更多详细信息，请参阅此[帖子](http://binglongx.wordpress.com/2013/09/02/setting-different-compile-and-link-options-for-different-build-types-debugrelease-in-cmake/)。

# r - ggplot2 geom 绘制每个点类型的数量（相对于连续轴）？

> ID：13315314
> 
> 赞同：1
> 
> 时间：2012-11-09T20:16:13.047
> 
> 标签：r, graph, ggplot2, histogram

我试图弄清楚如何制作一种特定类型的图表。它看起来像是在 R 或 ggplot2 中非常容易做的事情，但我一定找不到合适的关键字来描述它。我浏览了各种 geoms 并阅读了一些指南，但空手而归。

基本问题是：我有一个电子邮件列表，以及它们发送的日期（定义为自 1970 年 1 月 1 日以来的天数）。我已经成功地制作了一个图表，显示了**每次发送的电子邮件`binwidth`**；例如，如果我每天发送一封电子邮件并将其设置`binwidth`为 30 天，我会得到一个高度为 30 的条形图。

我*想做*的是制作这样的图表：

![在此处输入图像描述](../Images/a51b2b07551fd1d06a369b360cfa620d.png)

上图在 x 轴上**有电子邮件数量， y 轴显示****电子邮件数量对应于该数量的天数**。

因此，对于一些示例数据，发送电子邮件的日期列表：

```
data <- c( 15562,15562,15562,15562,15563,15564,
           15564,15564,15566,15566, 15566,15566) 
```

而不是一个高度为 4、1、3 和 4 的图表（对应于每天的电子邮件数量），我想要一个高度为 1、1 和 2 的图表（因为有 1 天发送了一封电子邮件，发送了三封电子邮件的时间为 1 天，发送了四封电子邮件的时间为 2 天）。

就像在示例图中一样，我想要一个连续的 x 轴。

有谁知道如何构建像上面这样的图表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T20:48:29.223

```
dat <- c(15562,15562,15562,15562,15563,15564,15564,15564,15566,15566,15566,15566)
table(table(dat))
#1 3 4 
#1 1 2

#example with more data
set.seed(42)
dat <- sample(1:500,50000,TRUE)
hist(table(table(dat)),breaks=20) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T15:53:45.280

有人想复制[Stephen Wolfram 的个人分析图](http://blog.stephenwolfram.com/2012/03/the-personal-analytics-of-my-life/)吗？;-)

不用担心，要获得接近*Mathematica*风格的可视化结果，Wolfram 一直在使用，最好使用`lattice`，我认为：

```
library(lattice)
library(latticeExtra)
histogram(~ FSC.H, gvhd10, xlab = "", ylab="", type = "density", 
          col="yellow", nint = 100, scales = list(y=list(draw=F)))
ltext(400,110,col="gray","distribution of emails per day") 
```

![在此处输入图像描述](../Images/a7a4917fa924ec2209a1027ce10f4859.png)

# android - Android背景应用于所有元素

> ID：13315316
> 
> 赞同：1
> 
> 时间：2012-11-09T20:16:16.307
> 
> 标签：android, background, dialog

我有一个应用了以下主题的自定义对话框

```
<?xml version="1.0" encoding="utf-8"?>
<resources xmlns:android="http://schemas.android.com/apk/res/android">
    <style name="highscoreStyle" parent="@android:Theme.Dialog"> 
        <item name="android:background">@drawable/highscoreshape</item>
        <item name="android:layout_height">wrap_content</item>
        <item name="android:layout_width">wrap_content</item>
    </style> 
```

在我的 highscoreshape.xml 里面我有

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="rectangle">
    <gradient android:startColor="#ffffff" android:endColor="#ffffff" />
    <corners android:radius="8dp" />
</shape> 
```

这工作得很好，并为我提供了一个带圆角的白色对话框。我唯一的问题是我的对话框中的所有元素都具有与对话框相同的背景。所以如果我添加一个文本视图，文本视图也会得到一个带圆角的白色背景。有没有办法将此样式应用于对话框的主要 LinearLayout 而不是对话框内的所有内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T20:22:39.197

我想通了，我没有把它作为我主题中的一个项目，而是将它应用到主线性布局的背景上，现在一切看起来都很好。

# xna - 如何免费制作 Xbox Live 独立游戏？

> ID：13315320
> 
> 赞同：2
> 
> 时间：2012-11-09T20:16:42.360
> 
> 标签：xna, xbox360, xbox

有没有办法制作免费的 Xbox Live 独立游戏？现在我并不是要在市场上向全世界发布它，而只是想在我的 Xbox 上免费测试它。我知道您必须在 Xbox 和 PC 上下载 XNA 应用程序，但我是否需要 XNA Creators Club 订阅才能在我的 Xbox 上测试游戏？如果我这样做了，是否有其他方法可以制作和测试 Xbox 游戏？我知道您可以在 Microsoft 网站上创建一个学生帐户并免费获得订阅，但我仍在上高中，看起来高中生并不真正有资格获得订阅。即使他们可以，我也无法在学校的选择中找到我的学校，所以这并没有什么不同。有没有办法免费制作和测试 Xbox Live 独立游戏？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T20:25:31.320

如果没有订阅，您将无法部署到 Xbox。

您仅限于在 PC 上构建和测试。在您的计算机上构建没有任何限制，因此开始编码并尝试一下，如果您最终完成或接近完成的游戏，那么您可以决定是否值得放弃 99 美元的费用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T20:24:35.523

要在 XBox 上进行测试，您需要订阅 XNA Creator's Club，至少没有正式的替代方式。（越狱可能会奏效，但这有其自身过多的技术问题和可能的法律问题）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T15:50:00.130

在之前的一些[Dream Build Play 比赛](https://www.dreambuildplay.com/Main/Default.aspx)中，参加比赛将为一个开发者帐户赢得一个免费的临时订阅，并能够部署到 xBox。这不是完整的开发者订阅；该帐户无法提交游戏进行销售。但它可以在硬件上测试代码。

不幸的是，这不是获得订阅的可靠方式，并且永远不能保证它甚至会成为任何给定年份的参赛者津贴的一部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-10T22:34:54.350

高中生应该能够访问[DreamSpark](https://www.dreamspark.com/)并获得允许您测试游戏的订阅。

或者，您可以下载[Visual Studio Express](http://www.microsoft.com/visualstudio/eng/downloads#d-2010-express)和[XNA Game Studio](http://www.microsoft.com/en-us/download/details.aspx?id=23714)，然后启动一个 Windows 游戏项目，如果您的显卡不支持 HiDef，则将[配置文件更改为 Reach 并连接有线 Xbox 360 游戏手柄。](http://blogs.msdn.com/b/shawnhar/archive/2010/07/19/selecting-reach-vs-hidef.aspx)Xbox、Windows Phone 或 Windows 平台的框架几乎完全相同。

# javascript - 在 javascript/momentjs 中创建日期时忽略时区

> ID：13315325
> 
> 赞同：78
> 
> 时间：2012-11-09T20:17:25.133
> 
> 标签：javascript, momentjs

我正在为东海岸的某事创建一个时间表，我需要创建一个始终返回此时间的日期对象/时间戳的日期。

因此，如果我在 18:00 在巴黎打开页面，则`"new myDate()"`应该返回 12:00。

关于如何使用 wither momentJS 或仅使用 Javascript 来做到这一点的任何建议？最终结果应该是一个 javascript Date 对象。

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2012-11-09T20:47:21.057

您可以使用 moment.js 来做到这一点`moment.utc()`。

[http://momentjs.com/docs/#/parsing/utc/](http://momentjs.com/docs/#/parsing/utc/)

```
moment([2011, 10, 8, 5]).format(); // different output based on timezone
moment.utc([2011, 10, 8, 5]).format(); // same output for all timezones 
```

工作方式`moment.utc`是在内部设置一个标志来使用`getUTCMinutes`而不是`getMinutes`，因此所有时区的输出都是相同的。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-01-29T11:13:28.137

如果您希望您的时区完全忽略，您可以使用以下方法：

```
 var firstDayStr = '29 January 2014';
  var startAtTime = '10:01:02 AM';
  var localFormat = 'YYYY-MM-DD[T]HH:mm:ss';

  var m = moment(firstDayStr + ' ' + startAtTime).format(localFormat);

  console.log(m); 
```

输出：

```
2014-01-29T10:01:02 
```

# graphics - 均匀数组 CG 着色器中的非常量索引

> ID：13315334
> 
> 赞同：0
> 
> 时间：2012-11-09T20:18:08.173
> 
> 标签：graphics, shader, skinning, vertex-shader, cg

根据[这个 nVidia CG 教程](http://http.developer.nvidia.com/CgTutorial/cg_tutorial_chapter02.html)（和我自己的经验），在 CG 着色器中使用非常量索引访问统一数组要么效率低下，要么不受支持（通常情况下，似乎不受支持）。

我的问题是；我该如何规避这个问题？

我目前正在编写一个 GPU 蒙皮着色器，在其中我传递了一组骨骼（4x4 矩阵），我需要使用存储在顶点属性中的索引来访问它（具体来说，一个 float4 向量，其组件被强制转换为整数）。显然，由于上述限制，这不起作用......也许我错过了一个更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T22:32:30.297

这确实是常见的做法，例如（这是 HLSL，但本质上是相同的——注意全局统一的“boneArray”）

```
float4x3 CalcBoneTransform(float4 blendWeights, float4 boneIndices)
{
  // Calculate normalized fourth bone weight2
  float4 weights = float4(blendWeights.x, blendWeights.y, blendWeights.z , 1.0f - blendWeights.x - blendWeights.y - blendWeights.z);
  // Calculate bone transform
  float4x3 boneTransform;
  int4 indices = boneIndices;
  boneTransform =  weights.x * boneArray[indices.x];
  boneTransform += weights.y * boneArray[indices.y];
  boneTransform += weights.z * boneArray[indices.z];
  boneTransform += weights.w * boneArray[indices.w];
  return boneTransform;
} 
```

# sql - sql server 使用 case 语句和 in 语句结合

> ID：13315339
> 
> 赞同：0
> 
> 时间：2012-11-09T20:18:54.307
> 
> 标签：sql, sql-server, sql-server-2005

我有一个包含 3 个字段 userID、州、国家/地区的表，我正在尝试运行一个查询来查找该国家/地区是 Great Brittin、加拿大或美国的所有记录，如果该国家/地区是美国，我只想要加利福尼亚州、犹他州和亚利桑那。

我认为这可能有效，但没有

```
select  *
from    myTable
where   county in ('GB','CA','US')
  and   case when country = 'US' then  state in ('CA','UT','CA')  end 
```

任何 SQL 大师都有想法吗？

******编辑**** 我想我试图过度简化这一点。国家和州作为变量传递，因此不确定是否会有“美国”国家，但如果有，就会有州列表**

 **```
declare @country varchar(500)
,   @state varchar(500)
,   @sqlStr varchar(4000)

select @sqlStr = 'select * from Addresses
WHERE country IN ('+@country+')
OR (country = ''US'' AND stateCode IN ('+@state+'))'

exec (@sqlStr) 
```

这使得这更难。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T20:21:32.747

用类似的东西替换最后一行：

```
and (Country <> 'US' or state in ('ca', 'ut', 'az')) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T20:24:59.510

首先，您缺少`FROM Table`查询中的部分。无论如何，应该这样做：

```
SELECT *
FROM YourTable
WHERE Country IN ('GB','CA')
OR (country = 'US' AND [state] IN ('CA','UT','CA')) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T20:22:12.443

你是说这个吗

```
country in ('GB','CA')
or (country = 'US' and  state in ('CA','UT','CA') ) 
```**

# php - 在同一 VPS 上使用 php 执行 ssh 文件

> ID：13315341
> 
> 赞同：3
> 
> 时间：2012-11-09T20:18:56.410
> 
> 标签：php, unix, ssh, exec, vps

我试图在同一个 VPS 上通过 php 启动一个 ssh 文件，但我遇到了一些问题。

当我通过 Putty 连接到 VPS 屏幕时，“nosaukums”没有显示在屏幕列表中，但一切都在`sh`启动文件。

```
exec('cd /home/galvena/gameserveris ; screen -dmS nosaukums sh start.sh); 
```

有什么问题？

我有第二个问题。当我尝试通过 php 关闭屏幕时出现错误

> 必须连接到终端

尝试执行以下操作时：

```
exec('cd /home/galvena/gameserveris ; screen -r nosaukums ; stop'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T21:41:54.227

我没有看到在另一个屏幕上运行这个守护进程的原因。您可以做的是在 init.d 文件夹中创建一个简单的 shell 脚本，其中包含您已经拥有的停止和启动命令。然后从 php 中，您可以调用类似`system('service your_service_name stop/start');`java solr 守护程序的此类脚本示例的示例：http: [//rc98.net/solrinit](http://rc98.net/solrinit)

您也可以使用`ps -aux | grep nosaukums`它来检查它是否正在运行。我很确定您也可以使用 unix 命令获取该服务的 pid，不幸的是我不知道，但是一些谷歌搜索会显示它然后运行`exec('kill PID');`

那只是我的头顶。希望能帮助到你...

请注意，服务命令可能需要 root 权限，因此您可以将脚本放在其他地方并手动运行它，或者直接在 php 中实现它...

# ruby-on-rails - 如何解决这个 Rails Active Record 错误：未定义的方法 `to_sym' for # 我们正在使用 Ruby on Rails（带有 MySQL 数据库的 Active Record）。 我们收到了这个神秘的错误： undefined method `to_sym' for # <arel::attributes::at 0="" 429="" 问问题="" 2012-11-09t20:19:15.117="" 次="" this="" question="" shows="" research="" effort;="" it="" is="" useful="" and="" clear="" does="" not="" show="" any="" unclear="" or="" bookmark="" question.="" activity="" on="" post.="" 我们正在使用="" ruby="" rails（带有="" mysql="" 数据库的="" active="" record）。="" 我们收到了这个神秘的错误：="" undefined="" method="" `to_sym'="" for="" #<arel::attributes::attribute:0x007f82e4088248="">我查看了我们的 Ruby 代码并在 IRB 中进行了尝试，它似乎可以与 Rails/ActiveRecord 一起使用。 那么上面的错误信息是什么意思，我们该如何解决呢？ 谢谢 Selenium Grid 使您能够并行运行测试，但不会自动处理它。这通常由为您处理它的测试运行程序完成。一些框架，如 TestNG 有这个内置的，但可能需要根据您的代码进行一些自定义。 ruby-on-railsactiverecord 4 1 回答 1 This answer is useful 1 该to_sym方法将字符串转换为符号。即："example".to_sym成为:example 代码中的某处，您将一个对象传递给一个需要符号的方法，而 ruby 找不到合适的符号来替换该对象。您将不得不查看堆栈跟踪或其他方式来找到发生这种情况的位置。 于 2012-11-09T20:41:03.873 回答 Related 2 ruby-on-rails - Partial vs. Helper - 差异，但大多数，今天的表现 3 c# - 使用自动映射器从两个项目映射 2 c - 用VS2012编译C程序 2 jquery - 哦，为什么，$.post 函数 2 html - 绝对定位嵌套元素上的 z-index 1 php - php-csv-parser 无法正常工作 1 soap - 用合适的值替换空值 3 sql - 是否可以在 SQL 中使用 IF/Else？ 3 java - Sqlite 不允许 WHERE 子句 1 jquery - 使用 jQuery 检查表单字段上的正整数 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</arel::attributes::at>

> ID：13315347
> 
> 赞同：0
> 
> 时间：
> 
> 标签：ruby-on-rails, activerecord

我们正在使用 Ruby on Rails（带有 MySQL 数据库的 Active Record）。

我们收到了这个神秘的错误：

```
undefined method `to_sym' for #<Arel::Attributes::Attribute:0x007f82e4088248> 
```

我查看了我们的 Ruby 代码并在 IRB 中进行了尝试，它似乎可以与 Rails/ActiveRecord 一起使用。

那么上面的错误信息是什么意思，我们该如何解决呢？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T20:41:03.873

该`to_sym`方法将字符串转换为符号。即：`"example".to_sym`成为`:example` 代码中的某处，您将一个对象传递给一个需要符号的方法，而 ruby​​ 找不到合适的符号来替换该对象。您将不得不查看堆栈跟踪或其他方式来找到发生这种情况的位置。

# java - 使用 parcelable 在活动之间传递数组列表对象

> ID：13315352
> 
> 赞同：0
> 
> 时间：2012-11-09T20:19:36.973
> 
> 标签：java, android, object, parcelable, magic-numbers

我首先会说我已经看过所有其他处理这个问题的帖子并尝试了所有这些帖子。

我正在尝试做与其他帖子中要求的相同的事情，即使用 Intent 将 ArrayList 的值从一个活动传递到另一个活动。

**我觉得我已经正确地实施了我的课程。我正在使用的主要类（Route_Class）如下。**

```
public static final Parcelable.Creator<Route_Class> CREATOR = 
        new Parcelable.Creator<Route_Class>()

public Route_Class createFromParcel(Parcel in) 
    { 
        System.out.println("in Parcel In");
        Route_Class route_class = new Route_Class();
        route_class.layout_width2 = in.readString();
        route_class.latitude = in.readDouble();
        route_class.longitude = in.readDouble();
        route_class.startingLat = in.readDouble();
        route_class.startingLong = in.readDouble();
        route_class.name   = in.readString();
        route_class.routeName = in.readString();
        route_class.GeoPoints = in.readString();
        route_class.layout_width = in.readString();
        route_class.layout_height = in.readString();
        route_class.orientation = in.readString();
        route_class.xmlns = in.readString();
        route_class.id = in.readString();
        route_class.clickable = in.readInt() == 0;
        route_class.enabled = in.readInt() == 0;
        route_class.layout_height2 = in.readString();
        route_class.apiKey = in.readString();           

                    Bundle b = in.readBundle(GeoPoints_Class.class.getClassLoader());        
        route_class.geoPoints_arraylist = b.getParcelableArrayList("_geoPoints_arraylist");

        return route_class;
    }

    @Override
    public Route_Class[] newArray(int size) 
    {
        return new Route_Class[size];
    }
}; 
```

**这是我在 Route_Class 中使用的第二个类 (GeoPoints_Class)。**

```
 public static final Parcelable.Creator<GeoPoints_Class> CREATOR = 
        new Parcelable.Creator<GeoPoints_Class>() 
        { 
            public GeoPoints_Class createFromParcel(Parcel in) { 
                GeoPoints_Class geoPoints_class = new GeoPoints_Class();
                System.out.println("In Parcel In for GEoPoints");
                geoPoints_class.lat = in.readDouble();
                geoPoints_class.lon = in.readDouble();
                geoPoints_class.location   = in.readString();

                return geoPoints_class; 
```

**接下来是我放置对象的地方..**

```
 Intent i = new Intent(getApplicationContext(), route.class);

                i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

                Bundle b = new Bundle();
                b.putParcelableArrayList("route_Classes_temp", route_Classes);
                i.putExtra("selectiontemp",parent.getItemAtPosition(pos).toString());
                i.putExtras(b);
                startActivityForResult(i, 100); 
```

**最后，我尝试获取对象的地方...**

```
 Bundle b = this.getIntent().getExtras();

    route_Classes = b.getParcelableArrayList("route_Classes_temp");
    userMapSelection = b.getString("selectiontemp"); 
```

**我一直在尝试将其用作资源：[http](http://androidideasblog.blogspot.com/2010/02/passing-list-of-objects-between.html) ://androidideasblog.blogspot.com/2010/02/passing-list-of-objects-between.html但它似乎不起作用。运行应用程序时出现以下错误（任何线索错误的幻数引用的是什么？）：**

```
 11-09 14:48:52.951: E/Bundle(1128): readBundle: trace = java.lang.RuntimeException
 11-09 14:48:52.951: E/Bundle(1128):    at android.os.Bundle.readFromParcelInner(Bundle.java:1580)
 11-09 14:48:52.951: E/Bundle(1128):    at android.os.Bundle.<init>(Bundle.java:82)
 11-09 14:48:52.951: E/Bundle(1128):    at android.os.Parcel.readBundle(Parcel.java:1381) 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T21:27:16.220

有一次我尝试过，但没有奏效。所以你可以这样做：

您创建一个类并从 Application 类扩展它。您在此处定义列表私有。并编写 getter setter 方法。此类保留数据直到应用程序打开。您可以在第一次活动时设置列表。并在第二个活动中阅读

您应该在您的活动中制作此类示例（例如您的应用程序类名称：App）：

```
App app = (App) getApplicationContext(); 
```

您可以获取列表（例如您在应用程序类中的列表名称：列表）

```
App app = (App) getApplicationContext();
app.getList(); 
```

# java - 自定义 Java 类加载器未用于加载依赖项？

> ID：13315358
> 
> 赞同：17
> 
> 时间：2012-11-09T20:20:06.737
> 
> 标签：java, class, jvm, metaprogramming, classloader

我一直在尝试设置一个自定义类加载器来拦截类以打印出哪些类正在加载到应用程序中。类加载器看起来像这样

```
public class MyClassLoader extends ClassLoader {
    @Override
    public Class<?> loadClass(String name) throws ClassNotFoundException {
        System.out.println("Loading: " + name);
        return super.loadClass(name);
    }
} 
```

它只是吐出它加载的所有类的名称。但是，当我尝试运行一些代码时，

```
import org.python.util.PythonInterpreter;
public class Scripts {
    public String main(){

        PythonInterpreter p = new PythonInterpreter();
        p.exec("print 'Python ' + open('.gitignore').read()");

        return "Success! Nothing broke";
    }
} 
```

通过

```
MyClassLoader bcl = new MyClassLoader();
Class c = bcl.loadClass("Scripts");

Method m = c.getMethod("main");
String result = (String) m.invoke(c.getConstructor().newInstance()); 
```

它打印出来

```
Loading: Scripts
Loading: java.lang.Object
Loading: java.lang.String
Loading: org.python.util.PythonInterpreter
Python build/
.idea/*
*.iml
RESULT: Success! Nothing broke 
```

这似乎很奇怪。`org.python.util.PythonInterpreter`不是一个简单的类，它依赖于包中的一大堆其他类`org.python.util`。这些类显然正在加载，因为`exec`'d python 代码能够做一些事情并读取我的文件。但是，由于某种原因，这些类没有被加载的类加载器加载`PythonInterpreter`。

这是为什么？我的印象是用于加载类的类加载器`C`将用于加载 所需的所有其他类`C`，但这显然不会发生在这里。这个假设是错误的吗？如果是，我如何设置它以使`C`我的类加载器加载的所有传递依赖项？

编辑：

建议使用 using 进行一些实验`URLClassLoader`。我修改了代表团`loadClass()`：

```
try{
    byte[] output = IOUtils.toByteArray(this.getResourceAsStream(name));
    return instrument(defineClass(name, output, 0, output.length));
}catch(Exception e){
    return instrument(super.loadClass(name));
} 
```

以及使 MyClassLoader 子类 URLClassLoader 而不是普通的 ClassLoader，通过以下方式获取 URL：

```
super(((URLClassLoader)ClassLoader.getSystemClassLoader()).getURLs()); 
```

但这似乎不是正确的事情。特别是，`getResourceAsStream()`对于我请求的所有类，甚至是像 Jython lib 这样的非系统类，都向我抛出空值。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-16T18:51:59.377

## 类加载基础

有两个主要的地方可以扩展类加载器来改变类的加载方式：

*   findClass(String name) - 当您想要查找具有通常的父级优先委托的类时，您将覆盖此方法。
*   loadClass(String name, boolean resolve) - 当您想要更改类加载委托的完成方式时，请覆盖此方法。

但是，类只能来自 java.lang.ClassLoader 提供的最终 defineClass(...) 方法。由于您想捕获所有已加载的类，因此我们需要覆盖 loadClass(String, boolean) 并在其中某处调用 defineClass(...)。

**注意**：在 defineClass(...) 方法内部，有一个 JNI 绑定到 JVM 的本机端。在该代码内部，检查 java.* 包中的类。它只会让系统类加载器加载这些类。这可以防止您弄乱 Java 本身的内部结构。

# 一个示例子 First ClassLoader

这是您尝试创建的 ClassLoader 的一个非常简单的实现。它假定您需要的所有类都可用于父类加载器，因此它只使用父类作为类字节的源。为了简洁起见，此实现使用 Apache Commons IO，但它很容易被删除。

```
import java.io.IOException;
import java.io.InputStream;

import static org.apache.commons.io.IOUtils.toByteArray;
import static org.apache.commons.io.IOUtils.closeQuietly;
...
public class MyClassLoader
  extends ClassLoader {
  MyClassLoaderListener listener;

  MyClassLoader(ClassLoader parent, MyClassLoaderListener listener) {
    super(parent);
    this.listener = listener;
  }

  @Override
  protected Class<?> loadClass(String name, boolean resolve)
    throws ClassNotFoundException {
    // respect the java.* packages.
    if( name.startsWith("java.")) {
      return super.loadClass(name, resolve);
    }
    else {
      // see if we have already loaded the class.
      Class<?> c = findLoadedClass(name);
      if( c != null ) return c;

      // the class is not loaded yet.  Since the parent class loader has all of the
      // definitions that we need, we can use it as our source for classes.
      InputStream in = null;
      try {
        // get the input stream, throwing ClassNotFound if there is no resource.
        in = getParent().getResourceAsStream(name.replaceAll("\\.", "/")+".class");
        if( in == null ) throw new ClassNotFoundException("Could not find "+name);

        // read all of the bytes and define the class.
        byte[] cBytes = toByteArray(in);
        c = defineClass(name, cBytes, 0, cBytes.length);
        if( resolve ) resolveClass(c);
        if( listener != null ) listener.classLoaded(c);
        return c;
      } catch (IOException e) {
        throw new ClassNotFoundException("Could not load "+name, e);
      }
      finally {
        closeQuietly(in);
      }
    }
  }
} 
```

这是一个简单的监听器接口，用于观察类的加载。

```
public interface MyClassLoaderListener {
  public void classLoaded( Class<?> c );
} 
```

然后，您可以创建 MyClassLoader 的新实例，将当前类加载器作为父类，并在加载类时对其进行监视。

```
MyClassLoader classLoader = new MyClassLoader(this.getClass().getClassLoader(), new MyClassLoaderListener() {
  public void classLoaded(Class<?> c) {
    System.out.println(c.getName());
  }
});
classLoader.loadClass(...); 
```

这将在最一般的情况下工作，并允许您在加载类时得到通知。但是，如果这些类中的任何一个创建了自己的子类加载器，那么它们可以绕过此处添加的通知代码。

# 更高级的类加载

要真正捕获正在加载的类，即使子类加载器覆盖 loadClass(String, boolean)，您也必须在正在加载的类和它们可能对 ClassLoader.defineClass(...) 进行的任何调用之间插入代码. 为此，您必须开始使用[ASM](http://asm.ow2.org)之类的工具进行字节码重写。我在 GitHub 上有一个名为[Chlorine](https://github.com/ctrimble/chlorine)的项目，它使用此方法重写 java.net.URL 构造函数调用。如果您对在加载时弄乱类感到好奇，我会检查该项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T00:22:02.963

如果你这样做

```
 System.out.println( p.getClass().getClassLoader() ); 
```

你会看到那个`p`类加载器不是你的`MyClassLoader bcl`。它实际上是由`bcl`的父系统类加载器加载的。

当`PythonInterpreter`加载它的依赖类时，它将使用它的实际类加载器，系统类加载器，而不是你的`bcl`，所以你的拦截没有到达。

为了解决这个问题，你的类加载器不能委托给它的父类，它必须自己实际加载类。

为此，您可以子类`URLClassLoader`化（从系统类加载器中窃取 URL）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-15T07:31:39.900

如果您想在加载类时打印它们，那么在 JVM 上打开 verbose:class 选项怎么样？

```
java -verbose:class your.class.name.here 
```

要回答您的直接问题：

> 这是为什么？我的印象是用于加载 C 类的类加载器将用于加载 C 所需的所有其他类，但这显然不会发生在这里。这个假设是错误的吗？如果是，我如何设置它，以便 C 的所有传递依赖项都由我的类加载器加载？

在*搜索*ClassLoader 时，搜索是从叶子 ClassLoader 到根执行的，当 Java 确定必须加载一个新类时，它会从 ClassLoader 树的*根*返回到启动类解析的叶子。

为什么？考虑您的自定义类是否想要从 Java 标准库中加载某些内容。正确的答案是这应该由系统类加载器加载，这样才能最大限度地共享类。尤其是当您认为正在加载的类可能会加载更多的类。

这也解决了一个问题，即您最终可能会在不同的 ClassLoader 中加载多个系统 Classes 实例 - 每个 ClassLoader 都具有相同的完全限定名称。**EDIT**类将在其 ClassLoader 中正确解析。然而有两个问题。

1.  假设我们有两个 String 实例，`a`并且`b`. `a.getClass().isInstance(b)`如果并且在不同的 ClassLoader 中实例化，则`a.getClass() == b.getClass()`不是真的。这将导致可怕的问题。`a``b`
2.  单例：它们不会是单例 - 每个 ClassLoader 可以有一个。

**结束编辑**

另一项观察：就像您设置了一个 ClassLoader 来专门从中加载类一样，解释器通常自己创建 ClassLoader 实例，它们将解释环境和脚本加载到其中。这样，如果脚本发生更改，可以删除 ClassLoader（以及脚本），并在新的 ClassLoader 中重新加载。EJB 和 Servlet 也使用这个技巧。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T20:30:02.700

如果您覆盖其他 loadClass() 方法怎么办？

```
protected Class<?> loadClass(String name, boolean resolve) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-09T20:41:16.980

在实例化 PythonInterpreter 之前，您可以使用该`PySystemState`对象指定自定义类加载器。

```
PySystemState state = new PySystemState();
state.setClassLoader(classLoader);
PythonInterpreter interp = new PythonInterpreter(table, state); 
```

[http://wiki.python.org/jython/LearningJython](http://wiki.python.org/jython/LearningJython)

# bash - 根据条件将文件中的行写入文件 X

> ID：13315367
> 
> 赞同：0
> 
> 时间：2012-11-09T20:20:46.487
> 
> 标签：bash

我有一个 5000 行的文本文档，我想逐行阅读。我想根据它有多少列将每一行写入另一个文本文件。每列由a分隔，由“|”分隔 最快的方法是什么？

编辑：我忘记了每个文件都有部分的关键细节，每个部分由@、# 或 $ 分隔。每行也必须输出到相应的部分

例子：

```
cat File.txt

@
01|02|03|04|05|06|07|08|09|10
11|12|13|14|15|16|17|18
21|22|23|24|25
31|32|33|34|35|36|37|38|39|40
#
41|42|43|44|45|46|47|48|49|50
51|52|53|54|55
61|62|63|64|65|66|67|68
71|72|73|74|75|76|77|78|79|80 
```

输出（例如 3 个文件）

```
cat Ten.txt

@
01|02|03|04|05|06|07|08|09|10
31|32|33|34|35|36|37|38|39|40
#
41|42|43|44|45|46|47|48|49|50
71|72|73|74|75|76|77|78|79|80 
```

```
cat Eight.txt 
@
11|12|13|14|15|16|17|18
#
61|62|63|64|65|66|67|68 
```

```
cat Five.txt
@
21|22|23|24|25
#
51|52|53|54|55 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T20:33:28.357

类似这样的东西可能会起作用：

```
awk -F\| '{ print > "columns-" + NF + ".dat"}' File.txt 
```

它不会将数字翻译成英文，但会将每一行写入一个名为的文件，例如`columns-10.dat`对于有 10 列的行......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T23:09:56.617

infile.txt：

```
@
01|02|03|04|05|06|07|08|09|10
11|12|13|14|15|16|17|18
21|22|23|24|25
31|32|33|34|35|36|37|38|39|40
#
41|42|43|44|45|46|47|48|49|50
51|52|53|54|55
61|62|63|64|65|66|67|68
71|72|73|74|75|76|77|78|79|80
$
41|42|43|44|45|46|47|48|49|90 
```

Long Awk 单线（可能不必要的长）：

`awk -F "|" '{if ($0 == "@") {print $0} else {;if ($0 == "\#") {print $0} else {;if (NF == 10) {print $0};}}}' infile.txt > tens.txt`

十.txt

```
@
01|02|03|04|05|06|07|08|09|10
31|32|33|34|35|36|37|38|39|40
#
41|42|43|44|45|46|47|48|49|50
71|72|73|74|75|76|77|78|79|80
$
41|42|43|44|45|46|47|48|49|90 
```

`(NF == 10)`然后在每次运行时将子句更改为您想要的任何内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T20:33:26.083

*   利用`awk`
*   设置分隔符
*   打印列数大于或等于 N 的行。

例如：

```
$> awk -F "|" '{if (NF >= 10) {print}}' File.txt
01|02|03|04|05|06|07|08|09|10 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T20:33:32.877

这是一个单行代码来`awk`查找所有包含 10 列的行：

```
awk -F'|' '{if (NF==10) {print $0} }' 
```

更普遍：

```
#!/bin/bash

awk -F'|' -v cols=$1 '{if (NF==cols) {print $0} }' 
```

# javascript - 荷兰 oke 中的表单 submit.button 出现奇怪错误，但英语不起作用

> ID：13315369
> 
> 赞同：1
> 
> 时间：2012-11-09T20:20:56.693
> 
> 标签：javascript, forms

我的表格有一个奇怪的问题。我有一个使用荷兰语的 register.php 页面（称为 aanmelden.html），但是当您单击英文按钮时不再起作用（称为 register.html），当我比较它们时，我看不到任何大的差异。

同样在同一页面上登录也是同样的问题。谁能给我一个提示在哪里看。

```
<form class="inline" id="loginform" name="loginform" action="=REGISTERPAGE.html" method="post">
    <p><label for="loginusername">username</label>
    <input id="loginusername" name="loginusername" class="required" /></p>
                                    <p>
    <label for="loginpassword">password</label>
    <input id="loginpassword" name="loginpassword"  class="required" type="password" />
                        </p>
                    <p>
    <label for="keeploggedin">keeploggedin</label>
    <input id="keeploggedin" name="keeploggedin" type="checkbox" />     </p>
                                    <p>
    <span class="sprite button submit" id="login_submit_button">login</span>
                            </p>                        </fieldset>
                </form> 
```

提交表单的脚本如下：

```
<script type="text/javascript"> 
```

```
$("#login_submit_button").click(function()
{
    if($("#loginform").valid())
    {
        $("#loginform").submit();
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T20:22:04.113

这`action="=REGISTERPAGE.html"`应该（可能）是`action="REGISTERPAGE.html"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T20:22:11.557

错别字...

```
action="=REGISTERPAGE.html" 
```

应该读...

```
action="REGISTERPAGE.html" 
```

（我预计）

# jquery - 单击一个 div（或其他东西）并获得一个日期选择器？

> ID：13315371
> 
> 赞同：0
> 
> 时间：2012-11-09T20:21:08.483
> 
> 标签：jquery, jquery-ui, jquery-ui-datepicker

好的，所以我有以下html。

```
<div class="holder">                                                         
  <span class="mini-arrow"></span>
  <div class="date">
    <p>11</p>
    <p><span>Apr<br />2012</span></p>
  </div>
  <div class="hour">                                                                                         
    <p>3:20</p>                                                                               
    <p><span>pm</span></p>                                                                  
  </div>                                                                                                     
  <div class="cl">&nbsp;</div>                                                                               
</div>​ 
```

我想做的就是这个。

```
$('.date').datepicker() 
```

我似乎找不到任何文档来使 jquery-ui-datepicker 在这样的 div 上工作。

如果您知道如何做到这一点，或者知道另一个（易于样式化的）日期选择器，那将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T20:30:19.940

一种方法是使用小部件的`showOn`选项`datepicker`。这是[演示](http://jsfiddle.net/q2uJD/1/)。

**HTML**

```
<input class="date hidden" />​ 
```

**JS**

```
$('.date').datepicker({
    showOn: "button",
    buttonImageOnly: false,
    buttonText : "Select Date"
});​ 
```

**CSS**

```
​.hidden {
    display:none;
}​ 
```

使用您提供的 HTML，这就是它的应用方式：[example](http://jsfiddle.net/q2uJD/10/)。

# sql - SQL 逻辑运算符

> ID：13315376
> 
> 赞同：3
> 
> 时间：2012-11-09T20:21:40.447
> 
> 标签：sql, oracle

哪些职业不是学生、律师或教育工作者？按字母降序排列？

```
SELECT Occupation 
  FROM Viewer 
 WHERE occupation NOT IN 'student,lawyer,educator' 
ORDER BY occupation desc; 
```

我不断收到错误消息。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T20:22:31.677

`IN`需要括号括起来的表达式列表：

```
SELECT Occupation
FROM Viewer
WHERE occupation NOT IN ('student','lawyer','educator')
ORDER BY occupation desc; 
```

请参阅[文档`IN`](http://docs.oracle.com/cd/B19306_01/server.102/b14200/conditions013.htm)以查看正确的语法：

![在状态](../Images/69fb2d8e6a4def6040f70b3c4fca4e62.png)

# android - 拍照后，不调用 OnActivityResult

> ID：13315377
> 
> 赞同：0
> 
> 时间：2012-11-09T20:21:44.087
> 
> 标签：android, android-layout, android-intent, android-widget

我试图在拍摄后获取照片，但未调用 onActivityResult：

```
public class questionListView extends LinearLayout {

protected static final Integer PICTURE_RESULT = 1;
private Context ctx;

public Uri path;

public questionListView(Context context, AttributeSet attrs) {
    super(context, attrs);
    ctx = context;
    init();
}

public questionListView(Context context) {
    super(context);
    ctx = context;
    init();
}

private void init() {

    LayoutInflater factory = LayoutInflater.from(getContext());
    View myView = factory.inflate(R.layout.view1, null);

    LayoutParams params = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.MATCH_PARENT, LinearLayout.LayoutParams.MATCH_PARENT);
    myView.setLayoutParams(params);

    addView(myView);

    Button btaddphoto = (Button) myView.findViewById(R.id.btAddPhoto);

    btaddphoto.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {

            String _path = Environment.getDataDirectory() + File.separator + "pic1.png";
            File file = new File(_path);
            Uri outputFileUri = Uri.fromFile(file);

            Intent intent = new Intent("android.media.action.IMAGE_CAPTURE");
            intent.putExtra(MediaStore.EXTRA_OUTPUT, outputFileUri);

            ((Activity) ctx).startActivityForResult(intent, PICTURE_RESULT);

        }
    });
}

protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    Bitmap mBitmap;
    String _path = Environment.getDataDirectory() + File.separator + "pic1.png";
    mBitmap = BitmapFactory.decodeFile(_path);
    if (mBitmap == null) {
        // bitmap still null
    } else {

        // kleine bitmap maken
        // deze in een imageview toevoegen aan layout lvPhotos

    }
} 
```

}

我收到一条错误消息

```
super.OnActivityResult(requestCode, resultCode, data); 
```

错误信息：

```
The method onActivityResult(int, int, Intent) is undefined for the type LinearLayout 
```

如果我离开了，函数 onActivityResult 不会被调用。

我究竟做错了什么？

rg，埃里克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T20:46:06.447

你是`onActivityResult()`从`LinearLayout`课堂上打来的。该`onActivityResult()`方法特定于**活动**。

有关更多详细信息，请参阅处理此主题的官方[Android 开发者网站。](http://developer.android.com/training/basics/intents/result.html)

附带说明一下，最佳实践是从 XML 而不是从 Java 代码创建布局。它不仅编码速度更快，而且在性能方面也快得多。

# c++ - 将自定义 QGraphicsItem 添加到场景禁用 ScrollBarAsNeeded 和对齐选项

> ID：13315388
> 
> 赞同：0
> 
> 时间：2012-11-09T20:22:11.770
> 
> 标签：c++, qt, qgraphicsview, qgraphicsscene

**自定义项目 cpp：**

```
MapNode::MapNode(qreal x, qreal y, qreal w, qreal h, QGraphicsItem *parent)
{
    this->x = x;
    this->y = y;
    this->w = w;
    this->h = h;
}

QRectF MapNode::boundingRect() const
{
    return QRectF(DeafultX, DeafultY, DeafultW, DeafultH);
}

void MapNode::paint(QPainter *painter, const QStyleOptionGraphicsItem *option, QWidget *widget)
{
    QBrush redBrush(Qt::red);
    QPen blackPen(Qt::black);
    blackPen.setWidth(1);
    painter->setBrush(redBrush);
    painter->setPen(blackPen);
    painter->drawRect(x,y,w,h);
} 
```

**添加到场景：**

```
MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    ui->setupUi(this);
    scene = new QGraphicsScene(this);
    ui->graphicsView->setScene(scene);

    QBrush redBrush(Qt::red);
    QPen blackPen(Qt::black);
    blackPen.setWidth(1);

    for(int i = 0; i < 992; i+=62)
    {
        for(int j = 0; j < 992; j+=62)
        {
            QGraphicsItem *myItem = new MapNode(i,j,60,60);
            scene->addItem(myItem);
            //scene->addRect(i,j,60,60,blackPen,redBrush); //working fine
        }
    }
} 
```

*   添加我的项目时，他们从图形视图的中间开始绘制（我将图形视图对齐设置为居中，这与 addRect 配合得很好），当添加更多项目时，图形视图屏幕可以查看滚动条正在工作，当添加我的项目他们被禁用。
*   我试图从图形视图中获得与在场景中添加 rect (addRect) 时相同的行为，尤其是 ScrollBarAsNeeded 和对齐选项。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T21:13:32.850

您的边界矩形不太正确。假设您的项目是矩形的，您的边界矩形应该与您在绘画事件中绘制的矩形相同。所以在你的绘画活动中，你应该可以打电话`painter->drawRect(boundingRect());`

请注意，您正在做的另一种方法是利用 QGraphicsItem 的位置（`QGraphicsItem::setPos()`）：

```
for(int i = 0; i < 992; i+=62)
{
    for(int j = 0; j < 992; j+=62)
    {
        QGraphicsItem *myItem = new MapNode(0, 0, 60, 60);
        myItem->setPos(i, j);
        scene->addItem(myItem);
    }
} 
```

我认为这有点清洁，但这取决于你。

# mobile - 用于 Java 手机的 Java 键盘记录器

> ID：13315390
> 
> 赞同：0
> 
> 时间：2012-11-09T20:22:14.007
> 
> 标签：mobile, java-me

我在谷歌上四处寻找，除了 java 之外，任何手机操作系统都有很多键盘记录器，通过简单的搜索，你可以找到数百个适用于 Android、Symbian、Windows Mobile 等的 SMS 键盘记录器和间谍应用程序......但是那里不是Java手机！

当它为我连接时，我问了一个 J2ME 程序员，他说不可能有一个应用程序在后台运行 java 手机，或者不可能隐藏应用程序！是对的吗？我是 Web 开发人员，对 J2ME/Java 一无所知。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T02:25:45.387

几乎所有的手机键盘记录软件都只能用于智能手机，我不确定是否有任何适用于 java 的软件。

# java - Gervill 和 SF2 在某些 MIDI 文件上的声音不正确

> ID：13315392
> 
> 赞同：3
> 
> 时间：2012-11-09T20:22:21.070
> 
> 标签：java, gervill

我将不胜感激您对随附的源代码/问题的想法。
下面的代码适用于大多数 MIDI 文件。但是，有些声音不正确。
它们会产生一种哇-哇的声音。我能够通过修改 Java StandardMidiFileReader 以删除 176/1/77/0 消息（颤音深度）来规避纯钢琴曲的问题，例如下面使用的曲子。
有人知道如何真正解决这个问题吗？这不仅仅是一首音乐。

我相信 Gervill 可能存在错误，例如类路径上的 Gervill（或 Java 7，其中 Gervill 似乎是发行版的一部分（并且我刚刚发现当前的 Java 6 版本））某些其他文件无法正确播放一点也不。一个例子是[http://mb-s2.sakura.ne.jp/tirol/junk/midi/wagner_walkurenritt.mid](http://mb-s2.sakura.ne.jp/tirol/junk/midi/wagner_walkurenritt.mid)
（从大约 20 秒开始，当 Gervill 被使用时，同样有趣的 Wha-Wha 背景噪音开始）
通过替换标准合成器与 Keishi Suenaga 的 Timidity++ 扩展版本并使用相同的 SF2，所有部分听起来都很好，所以它不会损坏 MIDI 文件。

代码：对于 Java SF2 支持 Gervill 需要在类路径
Soundfont：我已经尝试过 JCLIVE.SF2 和一个 Steinway SF2；
soundfonts 可以在hammersound.net 或synthfont.com 上获得 sfarc
unpacker 可以从 melodymachine.com 下载，或者如果站点关闭 sourceforge.net/projects/miditool/files/third%20party/

```
package test;

import java.io.File;
import java.io.FileInputStream;

import javax.sound.midi.Instrument;
import javax.sound.midi.MidiDevice;
import javax.sound.midi.MidiSystem;
import javax.sound.midi.Sequence;
import javax.sound.midi.Sequencer;
import javax.sound.midi.Soundbank;
import javax.sound.midi.Synthesizer;

import com.sun.media.sound.SF2Soundbank;

public class SF2Test2 {
    static Synthesizer synthesizer;
    static Sequencer sequencer;
    static MidiDevice dev;

    /**
     * @param args
     */
    public static void main(String[] args) {
        // TODO Auto-generated method stub
        try {
            synthesizer=MidiSystem.getSynthesizer();
            synthesizer.open();
        //  soundbank =synthesizer.getDefaultSoundbank();
        //  p("Soundbank: "  + soundbank.getName() + " / "  + soundbank.getDescription()+ " / " + soundbank.getVendor());
            } 
        catch (Exception e) {e.printStackTrace();}

        loadSF2();

        File f = new File("D:\\SF2\\rach.mid");  //http://mb-s2.sakura.ne.jp/tirol/junk/midi/rachmaninoff_op3_2.mid

        play(f);
    }

    private static void loadSF2() {
        String filename;
        boolean duringInitialLoad=false;
        try{
            filename="D:/SF2/JC.SF2";   
            File f= new File(filename);
            if(f.exists()){
                Soundbank soundbank=new SF2Soundbank(
                        new FileInputStream(f));
                synthesizer.loadAllInstruments(soundbank);
                //synthesizer.open(); 
                //moving open command to here: synthesizer will still run on default (Gervill) soundbank
                p("\n now loaded on synthesizer: ");
                printInstruments(soundbank,synthesizer.getLoadedInstruments());
            }
            else {
                p(filename + " not found");
                System.exit(0);
            }
        }catch(Exception e){
            e.printStackTrace();
        }
    }

    private static void play(File file){

        try {
            sequencer=MidiSystem.getSequencer();
            Sequence sequence= MidiSystem.getSequence(file);
            sequencer.setSequence(sequence);
            sequencer.open();
            sequencer.getTransmitter().setReceiver(synthesizer.getReceiver());
            p("starting Sequence...");
            sequencer.start();
            Thread.sleep(15000);
            sequencer.stop();
            sequencer.close();

        } catch (Exception e) {
            e.printStackTrace();
        } 
    }

    private static void printInstruments(Soundbank soundbank,Instrument[] instruments){
        p("");
        p("----------------------------------------------------------------------------");
        p("Soundbank name: " + soundbank.getName());
        p("Soundbank version: " + soundbank.getVersion());
        p("Description: " + soundbank.getDescription());
        p("Author:  " + soundbank.getVendor() + ".");
        p("Number of instruments: " + soundbank.getInstruments().length);

        for (Instrument i : instruments)
        {
            p(  "Bank="    + i.getPatch().getBank() + 
                   " Patch="   + i.getPatch().getProgram() +
                   " Instr.="  + i);
        }
    }

    public static void p(Object o){
        System.out.println(o);
    }
} 
```

我还尝试将 SF2 声音文件中的单个乐器加载到合成器上，我不依赖 com.sun.media.sound.SF2Soundbank 类，结果相同：

```
try{
    filename="D:/SF2/JCLIVE.SF2";
    File f= new File(filename);
    if(f.exists()){
        Soundbank soundbank=MidiSystem.getSoundbank(f);
        Instrument [] sf2Instruments = soundbank.getInstruments();
        Instrument [] newInstruments = new Instrument[128];
        int replaced=0;
        //load pianos only
        for(int i=0;i<3;i++){
            try{
                int num=sf2Instruments[i].getPatch().getProgram();
                newInstruments[i]=sf2Instruments[num];
                synthesizer.loadInstrument(sf2Instruments[num]);
                replaced++;
            }catch(Exception e){}
        }
        //synthesizer.loadAllInstruments(soundbank);
        p("\nreplaced: "+ replaced);
        p("\n now loaded on synthesizer: ");
        printInstruments(soundbank,synthesizer.getLoadedInstruments());
    }
}catch(Exception e){
    e.printStackTrace();
} 
```

# jquery - 鼠标从 div 移动到 div，不要在父鼠标离开时隐藏未包裹在父内的 div - jquery

> ID：13315395
> 
> 赞同：0
> 
> 时间：2012-11-09T20:22:35.870
> 
> 标签：jquery, css, hide, positioning

以下情况正在发生：

两个div，

```
 <script type='text/javascript' src='jquery.min.js'></script>

  <div onmouseover="$(this).next('#mydiv').show();" onmouseleave="$(this).next('#mydiv').hide();" style="width:50px;height:50px;background:#000000;color:#ffffff;">hover</div>
  <div id="mydiv" onmouseleave="$(this).hide();" style="display:none;">content</div> 
```

我的问题，

```
$(this).next('#mydiv').hide(); 
```

on mouseleave 导致无法专注于第二个 div，当第一个 div 发生 mouseleave 时，我需要隐藏第二个 div，仅当鼠标在离开第一个 div 后没有进入第二个 div 时才触发，例如进退两难。

我正在使用一个工具提示插件，并且无法将第二个 div 包装在第一个 div 中，这将是一个解决方案，但对我来说是一个更大的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T20:52:21.737

我没有更改您实现 jquery 的方式，但您应该更改为外部文件

见[http://jsfiddle.net/bp6Gv/](http://jsfiddle.net/bp6Gv/)

```
<div onmouseover="$(this).next('#mydiv').addClass('active');" onmouseleave="$(this).next('#mydiv').removeClass('active');" style="width:50px;height:50px;background:#000000;color:#ffffff;">hover</div>
  <div id="mydiv" onmouseover="$(this).addClass('active')" onmouseleave="$(this).removeClass('active');" >content</div> 
```

CSS

```
#mydiv {
   display: none;
}
#mydiv.active {
   display: block;
} 
```

# apache-flex - 某些亚洲字符在 mx 文本组件中不可见

> ID：13315398
> 
> 赞同：1
> 
> 时间：2012-11-09T20:22:43.197
> 
> 标签：apache-flex

我有一个 mx 文本组件，其中不显示亚洲字符，但只是有时。行为不一致。我正在使用系统字体。任何非亚洲字符仍然出现。这发生在多个浏览器和操作系统中。

# javascript - 如何在 AJAX/Javascript 中调用长时间运行的进程时更新 UI？

> ID：13315405
> 
> 赞同：4
> 
> 时间：2012-11-09T20:22:55.730
> 
> 标签：javascript, ajax

我有多个需要串联调用的进程（我正在使用同步 AJAX 调用）。我想在完成后显示一个长时间运行的进程的状态，然后继续下一个。这是我编写的示例代码。

```
 var counter = 0;
function runProcess(input, output) {
    doWork();
    doWork();
    doWork();
};
function doWork() {
    counter++;
    document.getElementById('<%=this.progressMonitor.ClientID%>').innerHTML += "Running " + counter;

    // some lengthy calculations
    for (var i = 0; i < 1000000; i++) {
        var foo = Math.random();
    }
    setTimeout(updateStatus, 1000);
};
function updateStatus() {
    document.getElementById('<%=this.progressMonitor.ClientID%>').innerHTML += "Done " + counter;
} 
```

当我运行它时，我得到以下响应：

运行 1运行 2运行 3完成 3完成 3完成 3

我想得到

运行 1 完成 1 运行 2 完成 2 运行 3 完成 3

如果我在 updateStatus 函数中插入一个 alert() 语句，那么我会得到我想要的响应/执行顺序。浏览器是否为 3 个函数调用创建 3 个线程并异步执行它们？

我怎样才能连续运行它？setTimeout 是否正确实施？提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T01:11:02.810

听起来您想将 AJAX 调用排队。jQuery 提供了一个很好的队列函数，因此您可以确保一系列函数被一个接一个地调用。Mootools 和其他框架提供了类似的功能。

这是我的**[小提琴](http://jsfiddle.net/slashingweapon/eaa6Q/)**中的代码，显示了如何做到这一点。

```
var queueElement = $("#output");
var counter = 0;

function doWork(next) {
    queueElement.append("Starting " + counter + "<br/>");
    counter++;
    $.ajax('/echo/json/').always(function() {
        queueElement.append("Ending " + counter + "<br/>");
        next();
    });
}

queueElement.queue('workQueue', doWork);
queueElement.queue('workQueue', doWork);
queueElement.queue('workQueue', doWork);
queueElement.dequeue('workQueue'); // start the work queue 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T21:52:27.493

关于浏览器中的 Javascript，您必须了解的一件事是它是单线程的。当您更改 DOM 时，屏幕不会更改，直到您的脚本放弃控制。

这是两次调用 doWork() 时的真实事件序列：

1.  称呼`doWork()`
2.  `doWork()`添加运行消息
3.  排队等待`updateStatus()`稍后执行
4.  `doWork()`再打电话
5.  `doWork()`添加运行消息
6.  排队等待`updateStatus()`稍后执行
7.  `runProcess()`退出并将控制权返回给浏览器
8.  浏览器使用正在运行的消息更新屏幕
9.  第一个`updateStatus()`电话被打了。完成后，屏幕更新
10.  第二次`updateStatus()`调用。完成后，屏幕更新

您可以通过完全不打乱电话来获得您想要的东西`updateStatus()`，只需从内部打印出您完成的消息`doWork()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T19:14:49.347

队列很好用。在需要连续调用的 $.ajax 方法上使用队列效果很好。如果我在不使用队列的情况下使用“async: false”选项，则 UI 只会在所有长时间运行的进程完成后才会刷新。

感谢您为我指明正确的方向！如果有人在看，这是我的最终代码：

```
function callService(url, workflowid, modelid, next) {
        var jData = {};
        jData.workflowid = workflowid;
        jData.modelid = modelid;
        //alert(JSON.stringify(jData));
        $.ajax({
            url: url,
            type: "POST",
            dataType: "json",
            contentType: "application/json; charset=utf-8;",
            async: true,
            cache: false,
            data: JSON.stringify(jData),
            success: function (oResult) {
                $("#Message").append("&nbsp;&nbsp;" + oResult.Message);
                if (!oResult.Success) {
                    $("#<%:this.FailureText.ClientID %>").append("&nbsp;&nbsp;" + oResult.Error);
                } else { next(); }
            },
            error: function (exc) {
                $("#Message").append("&nbsp;&nbsp;" + exc.responseText);
            }
        });
    }
    function runServices() {
        var queueElement = $("#q");
        var queueStatus = $("#Message");

        queueStatus.append("<br/>Starting workflows at : " + new Date() + "<br/>");
        var list = $(":input:checkbox:checked"); // getting all selected checkboxes.
        $(list.each(function () {
            var workflowid = $(this).val();
            queueElement.queue("WorkflowQ", function (next) {
                callService("/Services/Workflow.svc/rest/runworkflow", workflowid, document.getElementById('<%=this.MODELID.ClientID%>').value, next);
            });
        }));          
        queueElement.dequeue("WorkflowQ");
    };

    <input type="button" id="ExecuteButton" value="Execute Workflow" class="button" onclick="runServices();"/>

<div id="Message"></div>
<div id="q"></div> 
```

# php - 一个 html 表中的两个 While 循环

> ID：13315408
> 
> 赞同：1
> 
> 时间：2012-11-09T20:23:04.097
> 
> 标签：php, mysql, sql, html-table

我有两个 SQL 表：

*   消息
*   编辑

在新闻表中，我有 2 个列（News_Added 和 News_Updated）。我正在将编辑器 ID 输入到这些列并将它们加入编辑器表的 Ed_ID 以获取编辑器名称。

由于我有 2 个 while 查询，我必须使用 2 个 while 循环，但在 1 个 html 表中。我不知道如何解决这个问题。有什么帮助吗？

```
echo '<table border="0">
<tr><th>News ID</th><th>Title</th><th>Added By</th><th>Last Edit By</th><th>Action</th</tr>';

$query = mysql_query("SELECT * FROM N1News AS N1
LEFT JOIN A1Editors AS A1 ON N1.N1_Addedby=A1.Ed_ID WHERE N1_Co=$Ed_Co ORDER BY N1_ID LIMIT $show,$limit");
    while($row = mysql_fetch_array($query)){
    echo '<tr><td align="center">'.$row["N1_ID"].'</td><td><a href="news_edit2.php?n_id='.$row["N1_ID"].'">'.$row["N1_Title"].'</a></td>
    <td><a href="news_edit2.php?n_id='.$row['N1_ID'].'"><img src="images/icons/hammer_screwdriver.png" alt="Edit News" /></a><a href="news_del.php?n_id='.$row["N1_ID"].'"><img src="images/icons/cross.png" alt="Delete News" /></a></td><td>'.$row["Ed_Name"].'</td>';
}
$query7 = mysql_query("SELECT * FROM N1News AS N1
LEFT JOIN A1Editors AS A1 ON N1.N1_Lastedit=A1.Ed_ID WHERE N1_Co=$Ed_Co ORDER BY N1_ID LIMIT $show,$limit");
    while($row7 = mysql_fetch_array($query7)){
    echo '<td>'.$row7["Ed_Name"].'</td>';
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T20:38:53.523

可能有更有效的方法来组合您的两个查询，但一个快速的解决方案是使用[`UNION`](http://dev.mysql.com/doc/refman/5.0/en/union.html)：

```
$query = "(SELECT * FROM N1News AS N1
            LEFT JOIN A1Editors AS A1 ON N1.N1_Addedby=A1.Ed_ID WHERE N1_Co=$Ed_Co ORDER BY N1_ID LIMIT $show,$limit)
          UNION
          (SELECT * FROM N1News AS N2
            LEFT JOIN A1Editors AS A2 ON N2.N1_Lastedit=A2.Ed_ID WHERE N1_Co=$Ed_Co ORDER BY N1_ID LIMIT $show,$limit)
          ORDER BY N1.N1_ID 
```

这样一来，您就可以将所有结果放在一个数组中，从而可以轻松生成表格。

顺便说一句，这些`mysql_*`函数已被弃用，您应该真正切换到 PDO 或 mysqli 中的准备好的语句

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T20:56:31.147

这里的解决方案是创建一个一次检索所有信息的查询，就像这样

```
SELECT N1.*, A1.ED_name addedby_name, A2.ED_name lasteditor_name FROM N1News AS N1
INNER JOIN A1Editors AS A1 ON N1.N1_Addedby=A1.Ed_ID
LEFT JOIN A1Editors AS A2 ON N1.N1_Lastedit=A2.Ed_ID
WHERE N1_Co=$Ed_Co
ORDER BY N1_ID
LIMIT $show,$limit 
```

请注意，此查询假定每个新闻项都引用一个 AdditionalBy 编辑器。在此查询中，对 LastEdit 的引用是可选的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T20:38:28.127

您可以将第二个查询放入第一个 while。

```
<?php
$query = mysql_query("SELECT * FROM N1News AS N1
LEFT JOIN A1Editors AS A1 ON N1.N1_Addedby=A1.Ed_ID WHERE N1_Co=$Ed_Co ORDER BY N1_ID LIMIT $show,$limit");
while($row = mysql_fetch_array($query)){
echo '<tr><td align="center">'.$row["N1_ID"].'</td><td><a href="news_edit2.php?n_id='.$row["N1_ID"].'">'.$row["N1_Title"].'</a></td>
    <td><a href="news_edit2.php?n_id='.$row['N1_ID'].'"><img src="images/icons/hammer_screwdriver.png" alt="Edit News" /></a><a href="news_del.php?n_id='.$row["N1_ID"].'"><img src="images/icons/cross.png" alt="Delete News" /></a></td><td>'.$row["Ed_Name"].'</td>';
    // call second query //
    $newsid = $row["N1_ID"];

    $query7 = mysql_query("SELECT * FROM N1News AS N1
    LEFT JOIN A1Editors AS A1 ON N1.N1_Lastedit=A1.Ed_ID WHERE N1_ID = ".$newsid." AND N1_Co=$Ed_Co ORDER BY N1_ID LIMIT $show,$limit");

    if($row7 = mysql_fetch_array($query7)){
    echo '<td>'.$row7["Ed_Name"].'</td>';
    }
    /////////////////////

    }

?> 
```

# sql - Postgres 按查询分组

> ID：13315410
> 
> 赞同：2
> 
> 时间：2012-11-09T20:23:08.813
> 
> 标签：sql, postgresql, group-by

我正在尝试在 postgres 的查询中使用 group by。我无法让它按我的意愿工作，以便根据需要对结果进行分组。

[这是我刚刚回答](https://stackoverflow.com/questions/13299091/postgresql-ordering-records-in-a-hierarchal-query-result)的关于递归查询的另一个堆栈问题的扩展。但现在我需要能够对最终查询的 root_id 列上的结果进行分组。这是之前的查询：

```
select cl.parent_comment_id, 
     cl.article_comment_id,
     cl.comment, 
     cl.article_id,
     cl.comment_depth
from comment_list cl
order by cl.root_id, cl.article_comment_id, cl.comment_depth; 
```

这是我想做的，以便将具有相同 parent_comment_id 的任何记录保存在一起。

```
select cl.parent_comment_id, 
     cl.article_comment_id,
     cl.comment, 
     cl.article_id,
     cl.comment_depth
from comment_list cl
group by cl.parent_comment_id
order by cl.parent_comment_id, cl.article_comment_id, cl.comment_depth; 
```

可以有许多记录返回相同的 parent_comment_id，但任何给定的 article_comment_id 的记录不同。即每条评论都是唯一的（id、评论、标题等），但每条父评论可以有很多子评论。这已经被递归查询检索到了，现在我只是想正确地对它们进行分组。

编辑：

* * *

看看[http://www.sqlfiddle.com/#!12/77771/2 。](http://www.sqlfiddle.com/#!12/77771/2)我希望 article_comment_id=6 紧跟在 article_comment_id=3 下方，因为 id=3 是父级。然后 article_comment_id=4。

但是我认为这需要在程序上完成。

所以我认为这是一个“没关系”类型的问题，除非有人知道怎么做（这就是我放弃它的原因）。但我想我会尝试在程序上解决这部分问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T20:27:34.513

对于您的递归查询，您可以使用此技巧和 0 填充字符串创建分层路径：[SQL Fiddle](http://www.sqlfiddle.com/#!12/77771/12/0)

```
with recursive comment_list(article_comment_id, parent_comment_id, comment, article_id, comment_depth, comment_path) AS (
    select c.article_comment_id, 
           c.parent_comment_id, 
           c.comment, 
           c.article_id, 
           c.comment_depth,
           substr(CAST(1000000000+c.article_comment_id as varchar(1000)),2)
    from test_comment c
    where article_id = 100
      and parent_comment_id = 0

  union all

    select c.article_comment_id, 
           c.parent_comment_id, 
           c.comment, 
           c.article_id, 
           c.comment_depth,
           cl.comment_path || substr(CAST(1000000000+c.article_comment_id as varchar(1000)),2)
    from test_comment c
       join comment_list cl on c.parent_comment_id = cl.article_comment_id
)
select cl.article_comment_id,
     cl.comment_path, 
     cl.parent_comment_id,
     cl.comment, 
     cl.article_id,
     cl.comment_depth
from comment_list cl
order by cl.comment_path, cl.article_comment_id, cl.comment_depth; 
```

* * *

删除 GROUP BY。您想将它们“分组”以进行显示，这实际上是“ORDER BY”

```
select cl.parent_comment_id, 
     cl.article_comment_id,
     cl.comment, 
     cl.article_id,
     cl.comment_depth
from comment_list cl
order by cl.parent_comment_id, cl.article_comment_id, cl.comment_depth; 
```

您可能需要也可能不需要`cl.root_id`按顺序排列，所以它可能是

```
order by cl.root_id, cl.parent_comment_id, cl.article_comment_id, cl.comment_depth; 
```

# java - 怎么退课？

> ID：13315413
> 
> 赞同：0
> 
> 时间：2012-11-09T20:23:22.370
> 
> 标签：java, class

我有这个代码在我的`main()`

```
public static void main(String[] args) {
        // TODO Auto-generated method stub
        Customer forrest = new Customer("Forrest Gump", 1, "42 New Street, New York, NY"); 
        Customer random = new Customer("Random Name", 2, "44 New Street, New York, NY"); 
...
} 
```

我该如何继续编写代码，以便它返回给定 ID 号的客户实例（比如 1 给定返回 forrest，2 给定返回随机）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T20:29:09.943

当您在 main 中创建 Customer 对象时，它们仅存在于 main 中，除非您将它们保存在某处。

例如：

```
public static void main(String[] args) {
    Customer c = new Customer ( ... );
    // c exists here
}
public static void doSomething() {
    // c does not exist here
} 
```

除非您将新对象保存到数据库或数据结构中，否则您将无法对它们进行某种“查找”。

这是一个示例，您可以根据客户的 id 在 HashMap 中保存客户：

```
private HashMap<Integer, Customer> records = new HashMap<Integer, Customer>();

public void doSomething() {
    Customer forrest = new Customer(1); 
    Customer random = new Customer(2);

    // put the customers in the HashMap:
    records.put(1, forrest);
    records.put(2, random);

    // to get them out:
    records.get(1); // returns forrest
    records.get(2); // returns random
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T20:24:41.927

在这种情况下，您的`return`语句应该是类型的对象。

例子：

```
return new Customer(); 
```

除非`Customer`和`Random`相关（继承），否则您可能无法编写返回两种类型的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T20:26:19.173

我不确定你在问什么。我怀疑你要返回类的实例，创建对象。然后写`return Forrest;`Forrest 对象仅在方法主范围内可见

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-09T20:28:45.993

```
static Customer GetCustomer(int id) 
```

此方法的返回类型并不意味着您必须返回`Customer`该类。

这意味着，它应该返回对 Customer 类或 Customer 子类的对象的引用。

因此，您的退货声明应如下所示：-

```
return new Customer(id); 
```

而且，根据该方法，它似乎应该返回一个已经存在的`Customer`对象`id`。例如，如果您有`List<Customer>`，那么您需要从该列表中找出`Customer`具有给定 的对象`id`。

现在，鉴于在您的 main 方法中，您已经创建了两个`Customers`-`forrest`和`random`. 您需要将这些引用保存在一些持久性存储中，无论是一个`List<Customer>`数据库还是某个数据库。要获得指向基于 some 的对象的引用`id`，您必须从正在使用的持久性存储中获取它。

* * *

在您的情况下，由于您想基于 获取对象`id`，您可以维护一个`Map<Integer, Customer>`以存储您`Customers`的特定`id`.

```
static Map<Integer, Customer> map = new HashMap<Integer, Customer>();

public static void main(String[] args) {
    Customer forrest = new Customer("Forrest Stallings", 1, "42 New Street, New York, NY"); 
    Customer random = new Customer("Random Name", 2, "44 New Street, New York, NY"); 

    map.put(1, forrest);
    map.put(2, random);
} 
```

然后在您的`getCustomer`方法中，只需获取`customer`作为`id`参数传递的参数：-

```
public Customer getCustomer(int id) {
    return map.get(id);
} 
```

因此，您无需`id`对任何值进行测试。它会自动获取对应`Customer`的那个`id`。

例如： -

```
getCustomer(1); 
```

将返回引用指向的对象`forrest`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-09T20:29:05.703

使用静态字段，或者如果它可能引发异常，请在您的类中写入静态块。请不要从大写字母开始变量名。

```
class MainClass{
    // All uppercase because it is constant
    private static final Customer FORREST = new Customer("Forrest Stallings", 1, "42 New Street, New York, NY"); 
    private static final Customer RANDOM = new Customer("Random Name", 2, "44 New Street, New York, NY"); 

     public static void main(String[] args) {
    // TODO Auto-generated method stub

 } 
```

如果你想返校

```
 Class returnClass(){
 if(sth)
    return Customer.class;
 else
    return Random.class;
 } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-09T20:31:20.907

如果 GetCustomer 是一个实例方法，它将是：

```
Customer GetCustomer(int id){
    Customer result = null;

    if(id == 1){
        result = Forrest ;
    }else if(id == 2){
        result = Random;
    }

    return result;
} 
```

但你不能从静态方法访问实例变量，就像你试图

因此，您可能想要做的是在方法中构造每个对象，而不是依赖于它们现有的实例：

```
static Customer GetCustomer(int id){
        Customer result = null;

        if(id == 1){
            result = new Customer("Forrest Stallings", 1, "42 New Street, New York, NY"); 

        }else if(id == 2){
            result = new Customer("Random Name", 2, "44 New Street, New York, NY");
        }

        return result;
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-09T20:32:56.020

我认为您可以将类作为类变量：

```
 private static Customer forest; 
 private static Customer random; 

 public static void main(String[] args) {
    forrest = new Customer("Forrest Stallings", 1, "42 New Street, New York, NY"); 
    random = new Customer("Random Name", 2, "44 New Street, New York, NY"); 
    ...
  } 
```

然后：

```
 static Customer GetCustomer(int id){
    if(id == 1){
       return customer;
    }else if(id == 2){
       return random;
    }
  } 
```

# javascript - 如何使用 jQuery 更改特定文本？

> ID：13315415
> 
> 赞同：0
> 
> 时间：2012-11-09T20:23:33.377
> 
> 标签：javascript, jquery, html, text, replace

我有这个 html 代码：

```
<label class="checkbox" id="check_rem0">
    Checkbox
    <input type="checkbox" disabled="disabled" id="form_checkbox_0">
</label> 
```

有没有办法只替换标签中的文本，`Checkbox`在我的情况下，不需要删除/替换输入？

如果我这样做，`$('.checkbox').text('Anoteher Checkbox')`我会得到：

```
<label class="checkbox" id="check_rem0">
    Anoteher Checkbox
</label> 
```

另外，我不一定知道那里会有什么文字。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T20:26:13.630

不要将输入嵌套在标签中。将两者与`<label for="form_checkbox_0">`. 这样您就可以随心所欲地操纵文本。

```
<label class="checkbox" id="check_rem0" for="form_checkbox_0">
    Checkbox
</label>
<input type="checkbox" disabled="disabled" id="form_checkbox_0"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T20:26:00.960

```
$('#check_rem0').html('Another text <input type="checkbox" disabled="disabled" id="form_checkbox_0">'); 
```

或更正确地说：

```
var a = $('#check_rem0').html();
b = a.replace('Checkbox', 'Another text');
$('#check_rem0').html(b); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T20:27:51.503

将 label = 中的“for”参数设置为输入元素的 id。

```
<label for="form_checkbox_0" class="checkbox_0_label>Checkbox</label>
<input type="checkbox" disabled="disabled" id="form_checkbox_0"> 
```

然后你的JS：

```
$('.checkbox_0_label').text('Another Checkbox') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T20:28:55.980

您的 HTML 应如下所示：

```
<label class="checkbox" id="check_rem0" for="form_checkbox_0">
    Checkbox
</label>
<input type="checkbox" disabled="disabled" id="form_checkbox_0"> 
```

使用它作为您的 HTML，您可以执行以下操作：

```
$("#check_rem0").text("Another checkbox"); 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-11-09T20:28:16.813

一般来说，每当我有特定的文本要替换时，我都会`<span>`用一个 ID 将它包裹起来，然后更改 span 的文本。

例如：

```
...
<h1>This is a heading with some <span id="change">embedded text</span> I'd like to change </h1>
...
<script type="text/javascript">
    $(document).ready(function() {

         $("#change").html("changed text");
    });
</script> 
```

编辑：将承认这不是问题内容中提到的问题的好解决方案 - 但认为它很好地回答了标题。

# cookies - Google Analytics 重复计算 - 我如何使用 Firebug 查看 cookie 更改发生的*位置*？

> ID：13315416
> 
> 赞同：0
> 
> 时间：2012-11-09T20:23:36.180
> 
> 标签：cookies, google-analytics, firebug

我已经设法真正确定 GA 正在重复计算我的网站。首先通过检查它在我的浏览器中创建的 cookie 并看到只是转到主页将其标记为已访问 2 个页面，另一个将其标记为 4 个页面等。但我也可以在 GA 中看到有些人有页面深度为 1、3、5 等。令人困惑。

但是在使用这个站点时，我发现我可以使用 Firebug，我确实做到了，并且我将控制台设置为在编辑 cookie 时向我显示。很明显，在一个页面加载时，编辑 utmb 3 次（第二次似乎实际上并没有改变值，第一次和第三次增加了访问页面的值，所以它最终显示我访问了 2 个页面）。现在我知道这种情况正在发生，我可以使用 Firebug 找出导致这些 cookie 被编辑的代码位置吗*？*我无法弄清楚那部分。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T20:59:50.707

不幸的是，即使您启用了 cookie 事件的日志记录（在控制台选项卡的菜单中），该行也没有正确链接，就像它与其他事件一样。也许这会在某一天得到解决。

但是，您可以使用“Halt on cookie change”按钮停止 Javascript 执行并转到调试器中的相应行：

![停止 cookie 更改按钮](../Images/fb843ca907d56a3dc0d237d4f77681c7.png)

您还可以通过设置 cookie 断点将其限制为单个 cookie：

![Cookie 断点](../Images/500f9c66044564b0bba91624a2a7c82d.png)

# iphone - 如何将音频文件从服务器下载到我的 iPhone 应用程序中？

> ID：13315418
> 
> 赞同：2
> 
> 时间：2012-11-09T20:23:41.600
> 
> 标签：iphone, ios, xcode, sdk, download

我有一个从服务器播放音频文件 (mp3) 的 iphone 应用程序，我想添加一个下载按钮，以便用户可以将这些文件下载到应用程序中。因此，他/她每次想要收听这些文件时都不需要互联网连接。有没有人有一个示例代码？

我在网上看到了很多东西，但我仍然感到困惑。这是我正在使用的代码：

在 .h 文件中：

```
#import 
#import "MBProgressHUD.h"

#import 
#import 

@interface myViewController : UIViewController {
MBProgressHUD *HUD;

long long expectedLength;
long long currentLength;

AVAudioPlayer *theAudio;

}

-(NSString *)pathOfFile;
-(void)applicationWillTerminate:(NSNotification*)notification;

-(IBAction)play:(id)sender;
-(IBAction)download(id)sender;
@property (nonatomic,retain) AVAudioPlayer *theAudio; 
```

在 .m 文件中：

```
- (IBAction)download:(id)sender {
NSURL *URL = [NSURL URLWithString:@"http://www.server.com/myfile.mp3"];
NSURLRequest *request = [NSURLRequest requestWithURL:URL];

NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request      delegate:self];
[connection start];
[connection release];

HUD = [[MBProgressHUD showHUDAddedTo:self.navigationController.view animated:YES] retain];

HUD.labelText = @"Loading...";
}

-(IBAction)play:(id)sender { 

NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

NSString *documentsDirectory = [paths objectAtIndex:0];

NSString *file = [NSString stringWithFormat:@"%@/song.mp3", documentsDirectory];

theAudio = [[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:file]   error:nil];

[theAudio play];

}

-(NSString *)pathOfFile {

NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

NSString *documentsDirectory = [paths objectAtIndex:0];

return [documentsDirectory stringByAppendingFormat:@"myfile.plist"];

}

-(void)applicationWillTerminate:(NSNotification*)notification {

NSMutableArray *array = [[NSMutableArray alloc]init];
[array addObject:theAudio];
[array writeToFile:[self pathOfFile] atomically:YES];

[array release];

} 
```

我不知道是什么问题或我在这里遗漏了什么，你能帮我提供更多细节吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T11:58:41.770

使用 ASIHTTP 进行下载，它是异步的，更可靠。[http://allseeing-i.com/ASIHTTPRequest/](http://allseeing-i.com/ASIHTTPRequest/) 这是您可以下载音频/视频的方法。将参数传递给它并开始下载？

参数：(1) File Path ，要保存的文档目录路径 (2) Trimmed String ，即讲座 URL

```
+ (void)downloadingLecture:(NSString *)filePath withLectureUrl:(NSString *)trimmedString 
 {
    AppDelegate *_appDel=(AppDelegate *)[[UIApplication sharedApplication] delegate];
    [_appDel.queue setDelegate:self];
    [_appDel.queue setMaxConcurrentOperationCount:10];
    [_appDel.queue setShouldCancelAllRequestsOnFailure:NO];
    [_appDel.queue setShowAccurateProgress:YES];

    ASIHTTPRequest *request;
    request = [ASIHTTPRequest requestWithURL:[NSURL URLWithString:trimmedString]];
    [request setDelegate:self];
    [request setDownloadDestinationPath:filePath];
    [request setShowAccurateProgress:YES];
    [request setShouldContinueWhenAppEntersBackground:YES];
    [request setUsername:downloadedSuccessfullString];
    [request setDidFinishSelector:@selector(downloadedSuccessfully:)];
    [request setDidFailSelector:@selector(downloadedFailure:)];

    [_appDel.queue addOperation:request];
    [_appDel.queue go];
} 
```

希望这会帮助你。如果仍然有问题，请给我发电子邮件，我相信我会这样做，因为我已经在我的两个应用程序中实现了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T12:12:42.247

试试下面的代码：

```
ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:[NSURL URLWithString:urlStr]];
[request setDownloadDestinationPath:destinationPath];   
[request setTemporaryFileDownloadPath:[NSString stringWithFormat:@"%@-part",destinationPath]];
[request setDelegate:self];
[request setAllowResumeForFileDownloads:YES];
[request startAsynchronous]; 
```

并检查下载：

```
- (void)requestStarted:(ASIHTTPRequest *)request;
- (void)request:(ASIHTTPRequest *)request didReceiveResponseHeaders:(NSDictionary *)responseHeaders;
- (void)request:(ASIHTTPRequest *)request willRedirectToURL:(NSURL *)newURL;
- (void)requestFinished:(ASIHTTPRequest *)request;
- (void)requestFailed:(ASIHTTPRequest *)request; 
```

上面的代码将在下载过程中在目标文件夹中创建一个文件“your_file.mp3-part”，在下载完成时创建一个“your_file.mp3”。

希望能帮助到你。如果有任何疑问，请告诉我。

# css - Css专注于出现的输入div

> ID：13315419
> 
> 赞同：5
> 
> 时间：2012-11-09T20:23:42.643
> 
> 标签：css, focus

我有这样的代码：

```
<div class="lighter">
  <form method="get" action="http://www.google.pl" id="search">
    <span>
      <input id="button_search" type="image" src="images/search.png" id="button_search"/>
    </span>
    <span>
      <input type="text" class="search rounded" placeholder="Search...">
    </span>
    <div class= "list_search">
      <ul>
        <li class="search_link"><a href="">Search all of Movies</a></li>
        <li class="search_link"><a href="">Advanced Search</a></li>
      </ul>
    </div>
  </form>
</div> 
```

是否可以简单地使用 css 来产生当 input type="text" 处于焦点时 list_search 会出现的效果？如果是，如何？

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-09T20:57:00.930

如果您能够稍微更改您的标记，这实际上可以使用纯 CSS。

```
div {
    background: #f0a;
    display: none;
    height: 200px;
    width: 200px; }

input:focus + div { display: block; } 
```

我本质上所做的是，首先隐藏`div`，当输入字段具有焦点时，紧邻的下一个兄弟匹配`div`将其`display`模式更改为`block`.

为此，它必须是紧邻的下一个兄弟，因为您无法沿 DOM 树向上移动，因此您需要打开`input`字段。从`span`.

看我的小提琴：http: [//jsfiddle.net/TheNix/U28sd/](http://jsfiddle.net/TheNix/U28sd/)

**编辑：**
“相邻选择器”（`+`）应该在 IE7 及更高版本中工作（尽管我认为异步加载的内容可能存在一些问题）。请注意，该元素必须紧随其后，因此它不是“匹配 Y 的下一个元素”，而是实际上“紧随 X 的元素，如果它匹配 Y”。

有时，如果你知道标记并且你喜欢破解，你可以“数数”你的方式。`input + div + div`例如，将针对第二个`div`（如果标记完全匹配）。当然，我不会推荐它，因为它会在你的标记发生最轻微的变化时爆炸，并且维护起来会很痛苦。

在此处阅读有关选择器的更多信息：http: [//www.w3.org/TR/CSS2/selector.html#adjacent-selectors](http://www.w3.org/TR/CSS2/selector.html#adjacent-selectors)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T20:50:55.387

如果您使用的是 jQuery（如果您刚开始使用 JS，我强烈建议您使用 jQuery）

```
$(':text').focus(function(e){
    $('.list_search').toggle();
}).blur(function(e){
    $('.list_search').toggle();
}); 
```

# oracle - 在 oracle 10g 中执行程序

> ID：13315425
> 
> 赞同：1
> 
> 时间：2012-11-09T20:24:03.193
> 
> 标签：oracle, procedure

我使用 Oracle 10g 的 Web 界面键入了一个过程。编译代码，完全没有错误。为了执行这个过程，我应该使用命令 EXECUTE 名称，但是当我将它放入 SQL 窗口时，它根本不起作用，并说这是一个无效的 SQL 命令。我的问题是如何执行该程序？我可以通过对象浏览器访问它，但仅此而已。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T20:29:02.113

为了执行您的程序，请用`begin` `end`块将其括起来。`Execute`command 是 sql*plus 的命令。为此，您可以编写以下程序来执行您的程序：

```
begin 
  your_procedure_name;
end; 
```

在 sql*plus 中，您将使用`exec`or `execute`（它隐式地将您的过程用`begin` `end`块括起来）：

```
SQL> exec your_procedure_name; 
```

# html - div背景图像和高度不起作用

> ID：13315429
> 
> 赞同：0
> 
> 时间：2012-11-09T20:24:16.133
> 
> 标签：html, css

我有一个 div main，我已经将我的内容和侧边栏包裹起来。我已将#main 指定为具有背景图像和 1200 像素的最小高度。

在 Google Chrome 和 Firefox 中，当我检查源时，div 没有任何属性。因此 div 的背景图像和高度也不起作用。

```
<!--Main content layout -->
#main {
clear:both;
position: relative;
min-height: 1200px;
background-image:url(images/white.png);
background-repeat: repeat-x;

}

.sidebar1 {
float: right;
width: 20%;
padding-bottom: 10px;
margin-top: 20px;
}
 .content {
padding: 10px 0;
width: 76%;
float: left;
margin-top: 20px;

} 
```

网址为：[http ://www.tibetskyvillage.org/](http://www.tibetskyvillage.org/)

真的很感激别人对此的关注。我一直使用这种方法，但由于某种原因，这次它失败了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T20:36:57.923

注释`<!--Main content layout -->`不是有效的 CSS 注释，而是 HTML 注释，而是导致解析错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T07:49:03.663

![在此处输入图像描述](../Images/3207b7b1f639f3335d47b1d6b95fb757.png)

看截图，我在你的布局中发现了一些干扰，要解决这个问题或解决你的问题是不要在 CSS 中将图像作为背景，在 html 中将其作为图像这样

```
<img width="1360" height="675" src="images/bg0.jpg" class="wraper">
<div id="main">Your content</div> 
```

将样式添加到图像和主要为

```
.wraper {
    height: 100%;
    left: 0;
    position: fixed;
    top: 0;
    width: 100%;
}

#main{
position: absolute;
min-height: 1200px;
width:100%;
} 
```

# html - 3-col 布局的百分比和像素混合

> ID：13315430
> 
> 赞同：0
> 
> 时间：2012-11-09T20:24:30.787
> 
> 标签：html, css, pixel

> **可能重复：**
> [三列布局侧列弹性中间固定](https://stackoverflow.com/questions/13248570/three-column-layout-side-columns-elastic-middle-fixed)

我正在构建一个包含屏幕宽度 90% 的包装器的网页。在包装器中，我将有 3 列。

*   Wrapper 是屏幕尺寸的 90% 宽度。
*   中间一栏是500PX
*   左列是中间列之后剩余空间的 60%。
*   右列是中间列之后剩余空间的 40%。

我在如何将左右列设置为正确宽度时遇到问题。有谁知道解决这个问题的聪明方法。

![在此处输入图像描述](../Images/034c53eaeb2d2d2ee29bbc8e8810a052.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T20:58:08.073

您可以从 javascript 执行此操作。首先，您必须获取顶部 div 的 px 高度

```
var top = $('#top').width(); 
```

在此之后，您必须计算该宽度与底部中间 div 的 500px 之间的差异：

```
var sum = top - 500; 
```

在此之后，您必须计算左右底部 div + 边距的宽度（我已将其设置为 10px）：

```
var left = (sum * 60)/100 - 10;
var right = (sum * 40)/100 - 10; 
```

最后，您必须在 2 个 div 上应用宽度：

```
$('#left').width(left);
$('#right').width(right); 
```

您可以查看我在这里制作的示例：http: [//jsfiddle.net/paulalexandru21/LceLw/1/](http://jsfiddle.net/paulalexandru21/LceLw/1/)

PS。如果你没有很好地看到布局，你需要拖动它，你会看到所有 3 列正是你想要的样子。

# java - 测试产生随机结果的方法

> ID：13315437
> 
> 赞同：2
> 
> 时间：2012-11-09T20:25:03.907
> 
> 标签：java, random, junit

我想测试这个方法：`ArrayList<File> songs;`

```
public void playRandomSong()
{
    Random random = new Random();
    int iNextSong = random.nextInt(songs.size());
    File songToPlay = songs.get(iNextSong);
    if (mediaPlayer != null && mediaPlayer.isPlaying())
        mediaPlayer.stop();
    mediaPlayer = new MediaPlayerImpl(songToPlay, new WhenDone());
    mediaPlayer.play();
    currentSong = songToPlay;
} 
```

我是这样想的：多次运行该方法，看看它是否多次返回其中一个元素。但是我将如何在代码中编写它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T20:34:37.700

随机不保证不会两次返回相同的值...所以不能测试`"see if it returns one of the elements more than once"`

如果你需要，你将不得不在`Set`周围实现`Random`，但要注意生日悖论......

我认为你有两个选择：

1：你可以尝试播种你的`Random`，所以你可以预测序列......

2：删除 Random 并使用`[Collections.shuffle][1]`shuffle 你的 arrayList

使用选项 1，您将不得不更改方法的签名。

使用选项 2，您还将播放每首歌曲一次。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-10T06:40:43.460

而不是在您的方法中创建 RNG

```
public void playRandomSong() {
  Random random = new Random();
  ...
} 
```

你应该传递随机性的来源（这称为*依赖注入*）

```
public void playRandomSong(Random random) {
  ...
} 
```

然后您可以`Random`在单元测试中生成一个具有已知种子的实例，以获得可重复但典型的结果。

```
public void testPlayRandomSong() {
  Random random = new Random(0xd5021e90339050ab);

  // Test that 1000 runs plays each song roughly the right number of times.
  ...
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-09T21:06:26.433

我在您的代码中看到另一个问题：如果您想以随机顺序播放歌曲，那么您这样做的方式是错误的。在播放列表中的所有歌曲之前，此算法不应重复歌曲。为了实现这一点，有一种称为 Knuth shuffle 的算法。`Collections`你可以从课堂上拿它： [`java.util.Collections#shuffle`](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html#shuffle(java.util.List))。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-10T06:36:53.257

这是一篇关于随机性测试的文章，您可能会发现它很有用：

[http://beust.com/weblog/2012/02/20/various-ways-to-get-randomness-wrong/](http://beust.com/weblog/2012/02/20/various-ways-to-get-randomness-wrong/)

# javascript - 保留对附加节点 javascript 的引用

> ID：13315438
> 
> 赞同：10
> 
> 时间：2012-11-09T20:25:12.340
> 
> 标签：javascript, appendchild, documentfragment

请不要图书馆。在我的控制外。

我正在将一个文档片段附加到 dom。这一切都有效。没问题。

附加片段后如何保留/检索节点列表？相关代码：

```
var frag = document.createDocumentFragment();
//add some content to the fragment
element.appendChild(frag); 
```

**再次，这有效！我不需要关于如何将东西添加到 dom 的故障排除！**

如果我设置`var e = element.appendChild(frag);`，一切都会正常附加，但是`e`= 一个空的文档片段。

我在这里寻找一些光滑的魔法巫术。不要让我循环遍历整个 dom。内容可以是任何东西，一个或多个带有或不带有子节点的节点。如果 querySelectorAll 有一些技巧或可以接受的东西。

谢谢！

**编辑** 进一步戳，似乎`e`上面实际上是对`frag`var的返回引用，在将它附加到dom之后它是空的。这很像元素被整齐地从片段滑入dom，片段只是空无一人。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-12T16:17:26.707

这正是您所描述的；当元素被附加到一个元素时，它们会从片段中删除，以防止延迟引用造成内存泄漏。

获取这些子节点的一种方法是`childNodes`在执行之前制作片段的浅表副本`appendChild()`：

```
// make shallow copy, use Array.prototype to get .slice() goodness
var children = [].slice.call(frag.childNodes, 0);

element.appendChild(frag);

return children; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-12T16:16:37.797

如果您只是在附加它之后寻找，那么这`lastChild`是要走的路。像这样使用它：

```
var e = element.lastChild; 
```

[SitePoint 中的](http://reference.sitepoint.com/javascript/Node/lastChild)更多信息

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-12T16:24:09.280

来自 DocumentFragment 的[文档](https://developer.mozilla.org/en-US/docs/DOM/DocumentFragment)：

> 各种其他方法可以将文档片段作为参数（例如，任何 Node 接口方法，例如 appendChild 和 insertBefore），在这种情况下，附加或插入片段的子项，而不是片段本身。

所以`appendChild`方法返回 documentFragment 但它是空的，因为它的子节点被插入到您的`element`对象中并且（来自[appendChild](https://developer.mozilla.org/en-US/docs/DOM/Node.appendChild) doc）：

> [...] 一个节点不能同时位于文档的两个点。因此，如果节点已经有父节点，则首先将其删除，然后将其附加到新位置。

现在......您可以将您的孩子存储在缓存数组中，然后返回它（或查看 Jack 解决方案:-)）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-08-03T16:46:35.557

就像 Jack 的解决方案一样，但如果您使用的是 esnext，您可以使用`Array.from`as

```
const children = Array.from(frag.children);

element.appendChild(frag);

return children; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-01T18:39:14.133

如果您的文档片段中有一个主要元素，则可以使用`.firstElementChild`，仅此而已。要制作多个副本，请使用`.cloneNode(true)`. 示例 - [https://codepen.io/SergeiMinaev/pen/abLzQjZ](https://codepen.io/SergeiMinaev/pen/abLzQjZ)

# java - 将单色位图数据转换为 Zebra 打印机的小端序十六进制字符串

> ID：13315439
> 
> 赞同：0
> 
> 时间：2012-11-09T20:25:13.397
> 
> 标签：java, bitmap, hex, zebra-printers, zpl

我有一个 1bpp 单色位图图像加载到内存中。我将图像数据加载到字节数组中。我正在尝试打印到 Zebra 打印机并按照他们的手册进行操作，我觉得我的代码大部分都在工作，除了当我将图像数据转换为十六进制代码并将命令发送到打印机时，边界框似乎打印正确的尺寸，但是图像被无可救药地打乱了。

我怀疑这是因为我在 StackOverflow 上找到的以下用于将字节数组转换为十六进制的方法是在我需要它以 Little Endian 顺序查看时以 Big Endian 顺序读取每个字节值。

```
public static String bytesToHex(byte[] b) {
    char hexDigit[] = {'0', '1', '2', '3', '4', '5', '6', '7',
            '8', '9', 'a', 'b', 'c', 'd', 'e', 'f'};
    StringBuffer buf = new StringBuffer();
    for (int j=0; j<b.length; j++) {

        buf.append(hexDigit[b[j] & 0x0f]);
        buf.append(hexDigit[(b[j] >> 4) & 0x0f]);
    }
    return buf.toString().toUpperCase();
} 
```

在这一点上，我被困住了。有没有人有任何建议我可以修改上面的代码以正确的顺序读取每个字节值以读取位图图像数据？

**编辑：**

图像，它是詹姆斯邦德与一个糟糕的临时弗洛伊德斯坦伯格抖动实现（这完全是一个不同的问题）......

![在此处输入图像描述](../Images/3afaae5b069fda6833414479b6a0fe72.png)

**编辑2：**

好吧，那不起作用，看起来当我上传它然后它被转换为PNG。

**十六进制位图数据：**

> 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 **01** FF FF FF 00 00 00 FF FF FF 00 00 00 00 00 00 00 00 00 00 00 00 00 0 0 01 0 0 0 0 0 0 00 0 0 0 00 00 00 FF FF **FE** 00 00 ...

嗯...我认为单色 1bpp 位图只有两种可能的颜色？为什么 image4j ConvertUtil.convert1 引入了其他颜色？我想知道这是不是问题？

**编辑 3：**

NVM，每个位决定了1bpp中的颜色，所以每个字节最多可以表示8个像素。这很可能是正确的。

# java - 在 Java 中使用地图向量

> ID：13315440
> 
> 赞同：0
> 
> 时间：2012-11-09T20:25:14.643
> 
> 标签：java, vector, hashmap

我想要一个包含一些（可能很多）哈希图的向量，其中的一个字符串作为键，一个整数作为值。如何检查我的 Hashmaps 向量是否已经包含某个键，如果是，则将相应键的值加 1？

我想要完成的是计算一个单词在文档中出现的次数。我的想法是我可以使用 HashMap 来存储单词出现的次数。但是我想在将新地图添加到我的矢量之前检查我的矢量是否已经包含带有给定单词的地图。如果我的向量确实包含带有给定单词的映射，则增加值字段（在本例中为 numOfTimesOccurredSoFar）。

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T20:53:06.867

除非我误解了您想要做什么，否则当您可以使用单个地图将单词映射到字数时，我认为没有理由将地图存储在向量中。对于每个单词，检查映射是否将该单词作为键，如果是，则将映射到该单词的值加 1。如果该单词尚未在地图中，请添加一个新的键值对。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T21:09:45.963

```
import java.util.Map;
import java.util.TreeMap;
public class So13315440 {
    void add(String word) {
        if(map.containsKey(word))
            map.put(word,map.get(word)+1);
        else map.put(word,1);
    }
    void run() {
        add("foo");
        add("foo");
        add("bar");
        System.out.println(map);
    }
    public static void main(String[] args) {
        new So13315440().run();
    }
    Map<String,Integer> map=new TreeMap<String,Integer>();
} 
```

# c++ - std::getline 和 posix 信号

> ID：13315443
> 
> 赞同：1
> 
> 时间：2012-11-09T20:25:41.093
> 
> 标签：c++, timer, posix, getline

我有一个简单的程序，它启动一个循环计时器，然后进入一个解析任何输入数据的 getline 循环。然而，每当定时器信号出现时，它都会结束 getline 函数，看起来好像用户按下了回车键。我怎样才能阻止信号这样做？或者如果做不到这一点，我如何区分真正的返回压力和信号？后者不太理想，因为我必须在 400Hz 下运行这个微分代码。

下面是我目前用来获取一行的代码。空白输入将重新打印 APP > 行，而任何其他输入都会通过。

```
do
    {
        std::cin.clear();
        line.clear();
        std::cout << "APP > ";
        std::getline(std::cin, line);
    }
    while (line.length() == 0); 
```

谢谢大家

马特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T20:46:32.297

您不检查`std::cin`. 我想知道警报响起后是否设置了故障位。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-09T20:48:34.630

我不明白你的问题，也无法重现。以下程序正确读取标准输入*并*处理信号；两者都不会妨碍对方：

```
#include <csignal>
#include <cstdlib>
#include <string>
#include <iostream>

void handle(int n)
{
    static unsigned int count = 0;

    std::cout << "Signal: " << n << std::endl;  // not safe, I know...

    if (++count == 5)
    {
        std::cout << "Too many signals, goodbye!\n";
        std::exit(0);
    }
}

int main()
{
    std::signal(SIGINT, handle);

    for (std::string line; std::getline(std::cin, line); )
    {
        std::cout << "You said: " << line << std::endl;
    }

    std::cout << "End of input, goodbye!\n";
} 
```

# jquery - 如何使页面的div高度长度

> ID：13315444
> 
> 赞同：2
> 
> 时间：2012-11-09T20:25:40.670
> 
> 标签：jquery, css, html

我试图让内容的 div 基本上在我的页眉和我的脚之间运行整个页面的高度。如果我使用：

```
 #content{ height: 100%; } 
```

它只与我在 div 中的内容一样高。有时我可能只有 1 句话，但希望 div（带有背景或边框）沿着屏幕的长度运行，直到页脚大约`75px`高。

有没有办法用 CSS 轻松做到这一点？目前我拥有的是：

```
 <style>
  #content {
  margin-top: 0px;
  height: 800px;
  width: 800px;
   margin-left: auto;
   margin-right: auto;
    background-color: #E0E0E0 ;
   }
  </style>
   </head>
  <body>
  <div id="content"> 
  this is a div!  with some centered crap
  </div> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-09T20:29:09.257

添加：`body, html { height:100% }`并将内容元素的高度也设置`height:100%`为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T20:35:40.790

添加`height:100%`到`html, body`，如果它仍然不起作用，请尝试使用`top:, bottom:, left:, right:`属性进行定位。

问题是您为 div 分配了 100% 的高度，但这是父元素的 100%。如果父元素没有设置高度，那么它 100% 是什么？添加一个 height 属性`html, body`将解决这个问题，因为父元素有一个高度。

# android - 在 Android 上访问字典/预测文本文件

> ID：13315448
> 
> 赞同：3
> 
> 时间：2012-11-09T20:25:47.823
> 
> 标签：android, mobile, mobile-application

我一直在尝试在 Android（ICS 上的 Razr）上查找用户字典文本文件的位置。有一些帖子说没有植根的手机无法访问它。

有没有办法在非root手机上访问用户字典文件（.udb??）？如果没有，有没有办法在用户内部存储上附加一个文件，该文件将添加到字典文件中？

# button - 单击按钮时刷新输入字段

> ID：13315452
> 
> 赞同：1
> 
> 时间：2012-11-09T20:26:14.817
> 
> 标签：button, input, click, refresh, field

我有这个表单，用户可以在输入字段中插入数量，并在另一个输入字段中查看总数。当您手动插入数字并且我希望它也可以与按钮一起使用时，它可以工作，但我无法让它工作。

这是代码：

HTML

```
<form id="buyForm" method="post" action="cart.php">
    <label>Choose quantity</label>
    <div>
        <a href="#" class="button">(+)increase</a>        
        <input type="text" id="qty1" name="qty[]"/>
        <a href="#" class="button">(-)decrease</a>
    </div>
    <input type="text" id="cost1"  value="50" style="display:none; visibility:hidden;" name="cost[]" />
    <input type="text" id="price1" name="price[]" />
</form> 
```

JS

```
// Calculate
function calc(idx) {
  var price = parseFloat(document.getElementById("cost"+idx).value)*
              parseFloat(document.getElementById("qty"+idx).value);
  //  alert(idx+":"+price);  
  document.getElementById("price"+idx).value= isNaN(price)?"0.00":price.toFixed(2);

}

window.onload=function() {
  document.getElementsByName("qty[]")[0].onkeyup=function() {calc(1)};
  document.getElementsByName("cost[]")[0].onkeyup=function() {calc(1)};
}

//Increase/decrease buttons
$(function() {

    $(".button").click(function() {
        var $button = $(this);
        var oldValue = $button.parent().find("input").val();

        if ($button.text() == "+") {
          var newVal = parseFloat(oldValue) + 1;
          // AJAX save would go here
        } else {
          // Don't allow decrementing below zero
          if (oldValue >= 1) {
              var newVal = parseFloat(oldValue) - 1;
              // AJAX save would go here
          }
        }
        $button.parent().find("input").val(newVal);
    });

}); 
```

这里是 jsfiddle：http: [//jsfiddle.net/rcheH/5/](http://jsfiddle.net/rcheH/5/)

有人可以帮我吗？

提前致谢！

# listbox - 在 Windows Phone 上渲染 ListBox 花费的时间太长

> ID：13315453
> 
> 赞同：1
> 
> 时间：2012-11-09T20:26:14.953
> 
> 标签：listbox, windows-phone

我正在使用本地 SQLite 数据库开发 Windows Phone 7 应用程序，但我遇到了使用 DataBinding 的页面的呈现时间问题。

目前从数据库中检索数据需要 60-70 毫秒。然后它需要大约 3100 毫秒来呈现使用带有 DataBinding 的 ListBox 检索到的数据。

**在这里可以看到 ListBox 的 DataTemplate：**

```
<DataTemplate x:Key="ListBoxItemTemplate">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="68" />
            <ColumnDefinition />
        </Grid.ColumnDefinitions>

        <TextBlock x:Name="TimeColumn"
                        Text="{Binding TimeSpan}" Grid.Column="0" Grid.Row="0"
                        Foreground="White" HorizontalAlignment="Center" VerticalAlignment="Center" />
        <TextBlock Text="{Binding Stop.StopName}" Grid.Column="1" Grid.Row="0" 
                                Margin="15,0,0,0" TextWrapping="NoWrap" Foreground="Black"
                                HorizontalAlignment="Left" VerticalAlignment="Center" />
    </Grid>
 </DataTemplate> 
```

*评论：我也尝试过使用 Canvas 而不是 Grid，结果相同。*

**然后，数据库将数据加载到 CSList（使用 ViciCoolStorage）并绑定到 ListBox：**

```
StationList.ItemsSource = App.RouteViewModel.RouteStops; 
```

*评论：我试图将 CSList 的元素添加到 ObservableCollection 并将其绑定到接口，但似乎没有改变任何东西。*

**问题：** 我是否做错了什么会导致加载时间过长——即使只加载 10 个元素——或者这是正常的？您有什么建议可以通过 DataBinding 获得更好的性能吗？

提前感谢您的回答！

**对应的代码部分：**

**RouteViewModel.cs**

```
private Route rRoute;
public Route Route
{
    get
    {
        if (rRoute != null)
        {
            return rRoute;
        }
        else
        {
            return new Route();
        }
    }
}

public void LoadRoute(string index)
{
    try
    {
        if (rRoute.RouteId != index)
        {
            RouteLoaded = false;
            StationsLoaded = false;
            TimetableLoaded = false;
        }
    }
    catch (Exception) { }

    this.index = index;

    if (!RouteLoaded)
    {
        NotifyPropertyChanging("Route");
        rRoute = Route.ReadSafe(index);
        RouteLoaded = true;
        NotifyPropertyChanged("Route");
    }
}

private CSList<RouteTime> rtLine;
public CSList<RouteTime> RouteStops
{
    get
    {
        if (rtLine != null)
        {
            return rtLine;
        }
        else
        {
            return new CSList<RouteTime>();
        }
    }
}

public void LoadRouteStops()
{
    LoadRoute(index);

    if (!this.StationsLoaded)
    {
        NotifyPropertyChanging("RouteStops");
        rtLine = rRoute.RouteTimes.FilteredBy("DirectionId = @DirectionId", "@DirectionId", this.direction).OrderedBy("TimeSpan");
        NotifyPropertyChanged("RouteStops");

        StationsLoaded = true;
    }
} 
```

**RouteView.xaml.cs**

```
private string index;
private bool visszaut = false;

public RouteView()
{
    InitializeComponent();
    Loaded += new System.Windows.RoutedEventHandler(RouteView_Loaded);
}

void RouteView_Loaded(object sender, System.Windows.RoutedEventArgs e)
{
    DataContext = App.RouteViewModel;
}

protected override void OnNavigatedTo(NavigationEventArgs e)
{
    NavigationContext.QueryString.TryGetValue("index", out index);

    App.RouteViewModel.LoadRoute(index);
    App.RouteViewModel.Direction = Convert.ToInt32(visszaut);
    App.RouteViewModel.LoadRouteStops();
    StationList.ItemsSource = App.RouteViewModel.RouteStops;
} 
```

**RouteTime.cs** -*类实现*

```
[MapTo("RouteTimes")]
public class RouteTime : CSObject<RouteTime, int>
{
    public int RouteTimeId
    {
        get
        {
            return (int)GetField("RouteTimeId");
        }
        set
        {
            SetField("RouteTimeId", value);
        }
    }

    public int RouteId
    {
        get
        {
            return (int)GetField("RouteId");
        }
        set
        {
            SetField("RouteId", value);
        }
    }

    public int StopId
    {
        get
        {
            return (int)GetField("StopId");
        }
        set
        {
            SetField("StopId", value);
        }
    }

    public int TimeSpan
    {
        get
        {
            return (int)GetField("TimeSpan");
        }
        set
        {
            SetField("TimeSpan", value);
        }
    }

    public Direction DirectionId
    {
        get
        {
            return (Direction)GetField("DirectionId");
        }
        set
        {
            SetField("DirectionId", value);
        }
    }

    [OneToOne(LocalKey = "StopId", ForeignKey = "StopId")]
    public Stop Stop
    {
        get
        {
            return (Stop)GetField("Stop");
        }
        set
        {
            SetField("Stop", value);
        }
    }

    [ManyToOne(LocalKey = "RouteId", ForeignKey = "RouteId")]
    public Route Route
    {
        get
        {
            return (Route)GetField("Route");
        }
        set
        {
            SetField("Route", value);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T14:37:50.497

好的，在这种情况下，缓慢渲染的原因似乎是 RouteTime 和 Stop 类之间的 [OneToOne] 连接。如果我绑定到存储在链接类中的任何变量，则渲染需要很长时间。

**由固定**

我在需要显示结果的代码中添加了一个新的部分类。

```
public partial class StopTimes
{
    public int TimeSpan
    {
        get;
        set;
    }

    public string StopName
    {
        get;
        set;
    }
} 
```

在 Vici CoolStorage 中使用 ad-hoc 查询，我进行了自己的查询来请求所需的数据，viola，一切都在那里，渲染时间不超过 1 秒。也许，在渲染过程中，它会一一请求带有 SQLQuery 的 StopName 字段？

不知道，不过还是谢谢你的帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T04:57:26.123

在这种情况下，DataBinding 不应该是问题——我从来没有遇到过任何问题。它肯定与您的 SQL 数据库有关。我有大约 200 个项目的列表，它在 100 毫秒的合理时间段内呈现良好。

它要么是您的 SQL 实现，要么是您使用错误的 ViciCoolStorage。发布您的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T23:06:54.513

您是否尝试过在 LoadRouteStops() 方法之外对列表进行过滤？也许在后面的代码而不是 viewModel 中？在 propertyChanging 和 propertyChanged 通知之间似乎有很多工作要做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T00:56:41.660

我很困惑：你如何在 Windows Phone 7 上执行本地 SQLite？您的意思是支持此功能的 WP8 吗？在任何情况下，请考虑使用 LongListSelector（内置于 WP8 - WP7 中的工具包），因为当您有很多要渲染的项目时，它在虚拟化方面做得更好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-13T21:03:50.943

问题主要是因为设置了很多绑定。尽量减少绑定，并尝试在后面的代码上做艰苦的工作。如;

“将字符串列表逐一绑定到 xaml”
与
“通过 string.join 方法仅绑定到文本块”

我有

```
<TextBlock Text="{Binding Times[0]}"/>
<TextBlock Text="{Binding Times[1]}"/>
...
<TextBlock Text="{Binding Times[9]}"/> 
```

并改为

```
<TextBlock Text="{Binding TimesToLongString}"/> 
```

这修复了延迟。
用于在 9 秒内加载 3 个项目。
现在它在 110 毫秒内加载 10 个项目。

要检查加载列表所需的时间，您可以查看[这篇文章](https://stackoverflow.com/a/18635015/3554534)

# javascript - javascript中的Reg Exp仅用于数字和'：'

> ID：13315455
> 
> 赞同：-2
> 
> 时间：2012-11-09T20:26:30.147
> 
> 标签：javascript, regex, validation

如何在 javascript 中编写一个正则表达式来检查字符串`^[0-9] + ':'`？

这是我到目前为止所拥有的：`new RegExp ('/^[0-9]+':'+$/')`

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T20:27:30.947

在[字符类](http://www.regular-expressions.info/charclass.html)中包含冒号：

```
var regex = /^[0-9:]+$/; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T21:03:25.623

如果您只想在有 1 个或多个数字后跟一个冒号的情况下进行匹配，那么正确的正则表达式将是

```
var regex = /^[0-9]+:$/; 
```

如果您希望匹配包括检查单引号，那么：

```
var regex = /^[0-9]+':'$/; 
```

注意事项：

这只会匹配其全部内容是一系列数字后紧跟冒号的行。如果字符串中可以有空格，则处理方式需要有所不同。从问题的声音和一般背景来看，我假设这些可能是行号，因此您将在冒号后面有内容。如果是这种情况，则删除美元符号 ($)：

```
var regex = /^[0-9]+:/; 
```

正如其他受访者指出的那样，进一步澄清适当的结果将有助于回答。

# javascript - jquery在select中获取选择选项

> ID：13315459
> 
> 赞同：0
> 
> 时间：2012-11-09T20:26:37.433
> 
> 标签：javascript, jquery, drop-down-menu

我正在尝试通过 jquery 在我的下拉列表中选择某个值..我试过这个..

```
$("#membershiptype").val(1).selected; 
```

它不起作用..我显然在这里不知所措，因为我对 jquery 缺乏经验。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T20:28:28.977

要按索引选择选项，您可以这样做：

```
$("#membershiptype").get(0).selectedIndex=1; 
```

[示范](http://jsfiddle.net/dNREG/)

要按值（选项的内容）选择选项，您可以使用：

```
$("#membershiptype").val('B');​ 
```

[示范](http://jsfiddle.net/s5Lbx/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T20:33:10.873

您可以将 val() 分配给要选择的选项值。

```
$('#membershiptype').val(valueToBeSelected); 
```

# sql - 复杂情况的最佳查询

> ID：13315462
> 
> 赞同：0
> 
> 时间：2012-11-09T20:26:53.383
> 
> 标签：sql, database

我有一个包含以下列的表格，（id，fkid，flag1，flag2，flag3，flag4）。每个标志字段的可能值为 -1 到 3，并且允许为空。我需要的是一个查询，以检查给定外键 fkid 的任何值为 2 的标志字段的计数是否大于 3。我正在做的方式是为每个字段编写一个查询。它有效，但对我来说并不聪明。有人有更好的主意吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T20:39:57.417

您可以通过一个查询来做到这一点：

```
select fkid
from t
group by fkid
having sum(case when flag1 = 2 then 1 else 0 end) > 3 or
       sum(case when flag2 = 2 then 1 else 0 end) > 3 or
       sum(case when flag3 = 2 then 1 else 0 end) > 3 or
       sum(case when flag4 = 2 then 1 else 0 end) > 3 
```

不过，我确实非常同意这些评论，即样本数据、样本结果和清晰的表格结构将大大改善这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T20:52:40.910

下面的查询也将回答您的问题，sql fiddle 示例：[http ://sqlfiddle.com/#!3/adda9/2](http://sqlfiddle.com/#!3/adda9/2)

```
SELECT 
   DISTINCT fkid 
FROM
  tblTest pvt
UNPIVOT
  (
    FlagValue FOR Flag IN
       (flag1,flag2,flag3,flag4)
  ) as Unpvt
WHERE
  FlagValue = 2
GROUP BY
  FKID, FLAG
HAVING COUNT(*)>3 
```

# javascript - Javascript - 事件未定义错误

> ID：13315463
> 
> 赞同：0
> 
> 时间：2012-11-09T20:26:58.290
> 
> 标签：javascript

我发现下面有人在这个论坛上发布的代码是我需要的。但此代码仅适用于 IE，不适用于 Mozilla Firefox。此代码可以执行向上/向下拖动行（右侧的绿色符号）。

从链接获得此代码：

[上下移动表格行 - Jquery/Javascript](https://stackoverflow.com/questions/4954373/move-table-rows-up-and-down-jquery-javascript)

在 Mozilla Firefox 中，我不断收到“ReferenceError：未定义事件”。似乎是 Firefox 无法识别该事件，但我不知道如何修复它。

有人可以帮忙吗。谢谢！

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
      <body bgcolor=white>
        <table width=100% height=100% cellpadding=0 cellspacing=0>
          <tr>
            <td valign=top style="padding: 5px;" rowspan=2 height=99%>
              <script language="JavaScript">
                function get( e ){ return( document.getElementById( e ) ); }

                function findPosX( obj )
                {
                  var curleft = 0;
                  if( obj.offsetParent )
                  {
                    while( obj.offsetParent )
                    {
                      curleft += obj.offsetLeft;
                      obj = obj.offsetParent;
                    }
                  }
                  else if( obj.x )  curleft += obj.x;
                  return( curleft );
                }

                function findPosY( obj )
                {
                  var curtop = 0;
                  if( obj.offsetParent )
                  {
                    while( obj.offsetParent )
                    {
                      curtop += obj.offsetTop;
                      obj = obj.offsetParent;
                    }
                  }
                  else if( obj.y ) curtop += obj.y;
                  return( curtop );
                }

                function getClickX( e )
                {
                  if( !e ) e = event;
                  var scrollLeft = document.body.scrollLeft;
                  if( scrollLeft <= 0 && document.documentElement )
                  {
                    scrollLeft = document.documentElement.scrollLeft;
                  }
                  return( e.clientX + scrollLeft );
                }

                function getClickY( e )
                {
                  if( !e ) e = event;
                  var scrollTop = document.body.scrollTop;
                  if( scrollTop <= 0 && document.documentElement )
                  {
                    scrollTop = document.documentElement.scrollTop;
                  }
                  return( e.clientY + scrollTop );
                }

                window.onload = function()
                {
                  addTask( "" );
                };

                document.onclick = function()
                {
                  with( get("ControlDiv") )
                  {
                    style.visibility = "hidden";
                  }
                }

                function RowFromPos( table, x, y )
                {
                  if( x >= findPosX( table ) && x < findPosX( table ) + table.clientWidth )
                  {
                    if( y >= findPosY( table ) && y < findPosY( table ) + table.clientHeight )
                    {
                      for( i = 0 ; i < table.rows.length ; i++ )
                      {
                        if( x >= findPosX( table.rows[i] ) && x < findPosX( table.rows[i] ) + table.rows[i].clientWidth &&
                            y >= findPosY( table.rows[i] ) && y < findPosY( table.rows[i] ) + table.rows[i].clientHeight )
                        {
                          return( i );
                        }
                      }
                    }
                  }

                  return( -1 );
                }

                var clickY = 0, dragRow = null;
                function onDragBegin( row )
                {
                  document.onmouseup = onDragDrop;
                  document.onmousemove = onDragDrag;

                  dragRow = row;
                  clickY = getClickY( event );
                  dragRow.style.backgroundColor = "gold";
                }

                function onDragDrag()
                {
                  var curX = getClickX( event );
                  var curY = getClickY( event );
                  var rowIndex = RowFromPos( get("TaskTable"), curX, curY );

                  if( rowIndex != -1 && rowIndex != dragRow.rowIndex )
                  {
                    if( rowIndex < dragRow.rowIndex )
                    {
                      // Move Up
                      var parent = dragRow.parentNode;
                      var prev = dragRow.previousSibling;
                      if( prev )
                      {
                        parent.removeChild( dragRow );
                        parent.insertBefore( dragRow, prev );
                      }
                    }
                    else
                    {
                      // Move down
                      var next = dragRow.nextSibling;
                      var par = dragRow.parentNode;
                      par.removeChild( dragRow );
                      if( next.nextSibling )
                      {
                        par.insertBefore( dragRow, next.nextSibling );
                      }
                      else
                      {
                        par.appendChild( dragRow );
                      }
                    }
                  }
                }

                function onDragDrop()
                {
                  document.onmouseup = null;
                  document.onmousemove = null;

                  dragRow.style.backgroundColor = "";
                  fixTable();
                }

                function addTask( task)
                {
                  var table = get("TaskTable");
                  var row = table.insertRow( table.rows.length );

                  var cell = row.insertCell( row.cells.length );
                  cell.align = "right"; cell.vAlign = "bottom";
                  cell.width = "1%"; cell.noWrap = true;
                  cell.innerHTML = "<b>0.</b>";

                  cell = row.insertCell( row.cells.length );
                  cell.width = "99%";

                  var div = document.createElement("DIV");
                  div.designMode = "on";
                  div.contentEditable = true;
                  div.style.width = "99%";
                  div.style.height = "50px";
                  div.style.border = "1px solid black";
                  div.style.padding = "2px";
                  div.style.overflow = "scroll";
                  div.style.overflowX = "auto";
                  div.style.cursor = "text";
                  div.innerHTML = ( task != "" ? task : "<font color=\"gray\" face=\"Tahoma\">Enter task desciption here</font>" );
                  div.onfocus = function()
                  {
                    if( this.innerText == "Enter task desciption here" )
                    {
                      this.innerHTML = "";
                    }
                    event.cancelBubble = true;
                    showControlDiv( this );
                  }
                  div.onclick = function()
                  {
                    event.cancelBubble = true;
                  };
                  div.onblur = function()
                  {
                    if( this.innerText.replace(/^\s*/, "").replace(/\s*$/, "") == "" )
                    {
                      this.innerHTML = "<font color=\"gray\" face=\"Tahoma\">Enter task desciption here</font>";
                    }
                  }
                  div.onselectstart = function()
                  {
                    event.cancelBubble = true;
                  };
                  cell.appendChild( div );

                  cell = row.insertCell( row.cells.length );
                  cell.width = 15; cell.align = "right"; cell.vAlign = "bottom";
                  cell.innerHTML = "<font color=red face=Tahoma size=2 style='cursor: pointer;' onclick='JavaScript: deleteTask( this.parentElement.parentElement.rowIndex );'><b>X</b></a>";

                  var handle = document.createElement( "DIV" );
                  handle.innerHTML = "<font color=green size=6><b>*</b></font>";
                  handle.style.cursor = "n-resize";
                  handle.onmousedown = function()
                  {
                    onDragBegin( this.parentElement.parentElement );
                  };
                  cell.appendChild( handle );

                  fixTable();
                }

                function deleteTask( row )
                {
                  get("TaskTable").deleteRow( row );
                  fixTable();
                }

                function deleteAll()
                {
                  var table = get("TaskTable");
                  while( table.rows.length > 0 ) table.deleteRow( 0 );
                }

                function fixTable()
                {
                  var numTask = 0;
                  var table = get("TaskTable");
                  for( var i = 0 ; i < table.rows.length ; i++ )
                  {
                    numTask++;
                    table.rows[i].cells[0].innerHTML = "<b>" + numTask + ".</b>";
                  }
                }

                function showControlDiv( parent )
                {
                  var div = get("ControlDiv");
                  var x = findPosX( parent );
                  var y = findPosY( parent );

                  div.style.top = ( y - 39 ) + "px";
                  div.style.left = x + "px";
                  div.style.width = ( parent.offsetWidth - 17 ) + "px";
                  div.style.visibility = "visible";
                }
              </script>

              <form method=post action="blah">

                <div unselectable=on id=ControlDiv style=" visibility: hidden; position: absolute; top: -1000px; left: -1000px;; padding-top: 3px; padding-left: 15px; background-color: white; border: 1px solid black; border-bottom: 0px; border-top-left-radius: 15px; border-top-right-radius: 15px; width: 100%; height: 35px;">
                  <button unselectable=on style="border: 1px solid black; width: 30px; height: 30px; display: inline; text-align: center; cursor: pointer; margin-right: 10px;" onclick="JavaScript: event.cancelBubble=true; document.execCommand( 'Bold' ); return( false );"><font size=4><b>B</b></b></font></button>
                  <button unselectable=on style="border: 1px solid black; width: 30px; height: 30px; display: inline; text-align: center; cursor: pointer; margin-right: 10px;" onclick="JavaScript: event.cancelBubble=true; document.execCommand( 'Italic' ); return( false );"><font size=4><i>I</b></i></font></button>
                  <button unselectable=on style="border: 1px solid black; width: 30px; height: 30px; display: inline; text-align: center; cursor: pointer; margin-right: 10px;" onclick="JavaScript: event.cancelBubble=true; document.execCommand( 'Underline' ); return( false );"><font size=4><u>U</b></u></font></button>
                  <!-- <button unselectable=on style="border: 1px solid black; width: 30px; height: 30px; display: inline; text-align: center; cursor: pointer; margin-right: 10px;" onclick="JavaScript: event.cancelBubble=true; return( false );"><img src=images/img.bmp></button> -->
                  Font Face:
                  <select unselectable=on style="width: 200px; margin-right: 10px;" onclick="JavaScript: event.cancelBubble=true;" onchange="JavaScript: document.execCommand( 'FontName', false, this.value ); return( false );">
                    <option value="Times New Roman">Times New Roman</option>
                    <option value="Courier New">Courier New</option>
                    <option value="Tahoma">Tahoma</option>
                  </select>
                  Font Size:
                  <select unselectable=on style="width: 75px;" onclick="JavaScript: event.cancelBubble=true;" onchange="JavaScript: document.execCommand( 'FontSize', false, this.value ); return( false );">
                    <option value=1>1 (8pt)</option>
                    <option value=2>2 (10pt)</option>
                    <option value=3 selected>3 (12pt)</option>
                    <option value=4>4 (14pt)</option>
                    <option value=5>5 (18pt)</option>
                    <option value=6>6 (24pt)</option>
                    <option value=7>7 (36pt)</option>
                  </select>
                </div>

                <br><br><br>
                <table width=100% onselectstart="JavaScript: return( false );">
                  <tr>
                    <td width=1% nowrap><font size=5><b>Task List:</b></font></td>
                    <td width=33% align=center style="color: blue; font-family: Tahoma; cursor: pointer;" onclick="JavaScript: addTask( '', false );"><font size=5>+</font>&nbsp;Add Task</td>
                    <td width=33% align=center style="color: red; font-family: Tahoma; cursor: pointer;" onclick="JavaScript: if( confirm( 'Are you sure you want to delete all tasks from this template?' ) ) deleteAll();"><font size=2><b>X</b></font>&nbsp;Delete All</td>
                  </tr>
                </table>
                <table width=100% id=TaskTable cellspacing=0 onselectstart="JavaScript: return( false );"></table>
              </form>
              <br><br><br><br><br>
            </td>
          </tr>
        </table>
      </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T20:29:37.243

你没有在`event`任何地方定义你的变量，所以你不能向它添加属性。

# spring - Spring 3.1 和 EHCache

> ID：13315464
> 
> 赞同：2
> 
> 时间：2012-11-09T20:27:01.683
> 
> 标签：spring, caching, ehcache

我试图用 EHcache 实现 Spring 3.1 缓存。当我运行代码时，它总是运行方法实现并且从不使用缓存：有我的代码：

豆类.xml：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:cache="http://www.springframework.org/schema/cache"
    xsi:schemaLocation="
    http://www.springframework.org/schema/beans         http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
    http://www.springframework.org/schema/cache http://www.springframework.org/schema/cache/spring-cache-3.1.xsd"
    xmlns:p="http://www.springframework.org/schema/p"
    >
    <cache:annotation-driven cache-manager="cacheManager"/>

    <bean id="cacheManager" class="org.springframework.cache.ehcache.EhCacheCacheManager">
        <property name="cacheManager"><ref local="ehcache"/></property>
    </bean>
    <bean id="ehcache" class="org.springframework.cache.ehcache.EhCacheManagerFactoryBean" >
        <property name="configLocation" value="classpath:ehcache.xml"/>
    </bean>
    <bean id="testDAO" class="com.sura.test.ejb.TestDAO" />

</beans> 
```

ehcache.xml：

```
 <?xml version="1.0" encoding="UTF-8"?>
<ehcache xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:noNamespaceSchemaLocation="http://ehcache.org/ehcache.xsd" updateCheck="false">

    <defaultCache eternal="false" maxElementsInMemory="1000"
        overflowToDisk="false" diskPersistent="false" timeToIdleSeconds="0"
        timeToLiveSeconds="600" memoryStoreEvictionPolicy="LRU"/>

    <cache name="testCache" eternal="false"
        maxElementsInMemory="100" overflowToDisk="false" diskPersistent="false"
        timeToIdleSeconds="10" timeToLiveSeconds="60"
        memoryStoreEvictionPolicy="LRU" 
         />

    </ehcache> 
```

道：

```
 import org.springframework.cache.annotation.Cacheable;

    public class TestDAO implements ITestDAO{
    @Cacheable( value = "testCache" , key = "#dpto")
    public List<String> getCiudad(String dpto){
        System.out.println("cargando id:" + dpto);
        List<String> retorno = new ArrayList<String>();
        retorno .add("1- "+dpto);
        return retorno;
    }
    } 
```

这是我的主要课程：

```
public static void main(String[] args) {
        Testing t = new Testing();
        t.testCache();

    }

    public void testCache(){
        ApplicationContext ctx = new ClassPathXmlApplicationContext("classpath:beans.xml");
        TestDAO tdao = new TestDAO();       
        tdao.getCiudad("1");
        tdao.getCiudad("1");
        tdao.getCiudad("1");
        tdao.getCiudad("1");
    } 
```

控制台输出：

```
9/11/2012 03:13:58 PM org.springframework.context.support.AbstractApplicationContext prepareRefresh
INFO: Refreshing org.springframework.context.support.ClassPathXmlApplicationContext@206be24: startup date [Fri Nov 09 15:13:58 COT 2012]; root of context hierarchy
9/11/2012 03:13:59 PM org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions
INFO: Loading XML bean definitions from class path resource [beans.xml]
9/11/2012 03:13:59 PM org.springframework.beans.factory.support.DefaultListableBeanFactory preInstantiateSingletons
INFO: Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@213db0d: defining beans [org.springframework.aop.config.internalAutoProxyCreator,org.springframework.cache.annotation.AnnotationCacheOperationSource#0,org.springframework.cache.interceptor.CacheInterceptor#0,org.springframework.cache.config.internalCacheAdvisor,cacheManager,ehcache,testDAO]; root of factory hierarchy
9/11/2012 03:13:59 PM org.springframework.cache.ehcache.EhCacheManagerFactoryBean afterPropertiesSet
INFO: Initializing EHCache CacheManager
SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder".
SLF4J: Defaulting to no-operation (NOP) logger implementation
SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details. 
```

* * *

```
cargando id:1
cargando id:1
cargando id:1
cargando id:1 
```

4个方法调用并且没有使用缓存，有谁知道怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T20:29:37.617

您正在使用 new 实例化 dao，而不是使用 spring，因此它不会应用 spring 注释，因为它不是由 spring 管理的。

# php - 如何使用 google earth api 保存用户添加的表单数据

> ID：13315466
> 
> 赞同：0
> 
> 时间：2012-11-09T20:27:09.257
> 
> 标签：php, google-earth, google-earth-plugin, google-maps-api-2

我想做类似的事情，[但](https://developers.google.com/maps/articles/phpsqlinfo_v3)使用 Google Earth API。有没有办法将它与 Google Earth API 一起使用？我可以通过点击地球地图来添加地标吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T21:19:30.987

这是使用 Google 地球 API 在地图上使用事件侦听器在地图上单击的位置创建新地标的示例代码。

```
function init() {
  google.earth.createInstance('map3d', initCallback, failureCallback);
}

function initCallback(instance) {
      ge = instance;
      ge.getWindow().setVisibility(true);
      google.earth.addEventListener(ge.getGlobe(), 'click', eventHandler);
}

function eventHandler(event) {
      var placemark = ge.createPlacemark('');
      placemark.setName("placemark");
      var point = ge.createPoint('');
      point.setLatitude(event.getLatitude());
      point.setLongitude(event.getLongitude());
      placemark.setGeometry(point);   
      ge.getFeatures().appendChild(placemark);
} 
```

单击[此处](https://developers.google.com/earth/documentation/events?hl=en#event_listeners)了解详细信息，以将事件侦听器添加到地球并响应 GE API 中的事件。请注意，Google 地球插件通常使用 click 和 dbclick 事件进行导航，因此您可能需要一个按钮来打开/关闭单击侦听器。这是一个切换事件侦听器的[示例。](http://earth-api-samples.googlecode.com/svn/trunk/examples/event-listeners.html)

请记住，在您拥有 Google 地球插件控制器的实例**之后，**您必须添加一个侦听器。

# python - Python2.6 无法导入urandom

> ID：13315471
> 
> 赞同：5
> 
> 时间：2012-11-09T20:27:35.900
> 
> 标签：python, django, ubuntu

我正在处理一个旧的 Django 项目（Django 版本 1.3.2，Python 版本 2.6.6）。运行“python manage.py runserver”给了我：“ImportError: cannot import name urandom”。

在线搜索会返回一堆关于通过重新运行 virtualenv 来解决问题的结果。这没有任何意义，因为我从未安装过 virtualenv 并且之前的工作正常......所以我认为这一定是我的 python 安装有问题。

[我决定按照Django 安装指南](https://docs.djangoproject.com/en/dev/topics/install/#removing-old-versions-of-django)运行来删除并重新安装 Django

`pip install Django`

这样做`django-admin.py startproject project`给了我同样的 ImportError。所以我再次使用`pip uninstall Django`.

现在运行`python`启动 python2.6.6 shell，输入`from os import urandom`给我“ImportError：无法导入名称 urandom”消息，而在执行相同操作时`python2.7`不会给出这样的错误。

这里发生了什么？是什么破坏了我的 python2.6.6？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T04:20:07.070

虽然我不知道是否可以提供更多有用的评论可用的信息，但这里是我对失败的可能原因的尝试：

1.  您的操作系统不再正确地为 Python 2.6.6 提供 urandom。从我在这里可以[用“import random”告诉 /dev/urandom 不存在](http://bugs.python.org/issue15340)时的 OSError ，这应该导致 OSError 或 NotImplementedError （而不是 ImportError ），但文档以前是错误的。检查您是否可以进入系统的 urandom 的一个不错的方法是运行：

    ```
    from posix import urandom 
    ```

    如果这不起作用，请尝试：

    ```
    from os import O_RDONLY
    aURandom = open("/dev/urandom", O_RDONLY) 
    ```

    如果两者都不起作用，您可能正在处理无法以任何方式访问系统功能的问题。这可能意味着操作系统设置在某种程度上是罪魁祸首。您可能想要实际检查 urandom 在您的 Ubuntu 安装中是否真的可用，而 python 需要它 (/dev/urandom)。您的 Python 2.7 版本也可能无法访问 urandom，但会默默地失败而不是崩溃。

2.  如果上面的代码片段有效，那么您的 os.py 文件或此类文件的编译版本就搞砸了。在这种情况下，您的 Python 安装已损坏。您需要卸载它，清除任何中间 pyc 或 pyo 文件，然后重新安装它。

鉴于 python 2.6.6 解释器无法自行找到 urandom，Django 不太可能成为问题。

# xcode - 如何在静态方法实现中调用选择器

> ID：13315473
> 
> 赞同：0
> 
> 时间：2012-11-09T20:27:48.297
> 
> 标签：xcode, static-methods

如何在静态方法实现中调用选择器？

我试过这个，但没有成功。我究竟做错了什么？

WhiteScreenFader.m

```
+(void) fadeIn:(float)duration inView:(UIView *)view withAction:(SEL)selector
{
.
.
.
   [NSObject performSelector:selector]; //??
} 
```

视图控制器.m

```
//  I call static method like this
[WhiteScreenFader fadeIn:1.0 inView:self.view withAction:@selector(segue:)]; 
```

---更新这里是完整的实现

```
+(void) fadeIn:(float)duration inView:(UIView *)view withAction:(SEL)selector
{
//  bielu uiview
UIView *whiteView = [[UIView alloc] initWithFrame:[UIScreen mainScreen].applicationFrame];
[whiteView setAutoresizingMask:UIViewAutoresizingFlexibleHeight|UIViewAutoresizingFlexibleWidth];
[whiteView setBackgroundColor:[UIColor whiteColor]];
whiteView.alpha = 0;
[view addSubview:whiteView];

//  fade to 0
[UIView animateWithDuration:duration delay:0 options:UIViewAnimationCurveEaseOut animations:^{
    whiteView.alpha = 1;
} completion:^(BOOL finished){
    [NSObject performSelector:selector];
}];
} 
```

# apache - 在 Apache 上调用 GetFilterVersion 到 Tomcat 重定向器 ISAPI 过滤器时出错 - 32 位 W2K8 SP2 标准

> ID：13315475
> 
> 赞同：4
> 
> 时间：2012-11-09T20:27:50.877
> 
> 标签：apache, tomcat, iis-7, isapi

我在尝试使用 Apache ISAPI 重定向器从 IIS 7 到 Tomcat 时遇到错误，但仅限于 32 位 W2K8 SP2 标准版。

它在 64 位 W2K8 R2 和 32 位 W2K3 上运行良好。

我已经验证我有正确的 32 位库（版本 1.2.32 或 1.2.37）。事实上，完全相同的库适用于 32 位 W2K3。过滤器已启用并被允许，并且对库文件夹和注册表项具有权限。

当我重命名库时，我得到一个不同的错误：“在 ISAPI 过滤器上调用 LoadLibraryEx ......失败” - 错误代码 0x8007007e。我看起来不像是权限问题。

确切的错误文本是“在 ISAPI 过滤器上调用 GetFilterVersion “....\isapi_redirector_1.0.dll”失败”- 错误代码 0x80070002

错误日志显示：HTTP Filter DLL …\isapi_redirector_1.0.dll 未能加载。源 = IIS-W3SVC-WP。错误代码是 02 00 00 00

所有指针将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-24T09:57:32.080

这可能有多种原因。一些最常见的是：

1.  未解决 32 位 DLL 的某些依赖项。使用 Dependency walker 打开此 DLL 并检查其中是否存在任何错误（跳过其中的警告）。在大多数情况下，所有依赖库都存在，在这种情况下，可能会出现 LoadLibraryEx 错误，因为特定版本的 VC 可再发行组件不存在（如果 DLL 是从 VS 2010 构建的，则需要 VC 2010 可再发行组件）。
2.  此 DLL 的读取权限不适用于运行您的网站的应用程序池。检查您网站的属性以查看用户并确保该用户具有 DLL 的权限。

# iphone - iPhone：- 想要通过 Facebook 中保存的凭据自动登录

> ID：13315478
> 
> 赞同：0
> 
> 时间：2012-11-09T20:28:06.320
> 
> 标签：iphone, ios, xcode

在我的应用程序中，我必须在不使用登录页面的情况下登录 Facebook，然后直接进入 Facebook 的主屏幕。

我已经搜索了很多，但我没有得到任何东西......

```
@interface Facebook (MyApp)
- (void)myAuthorize:(id<FBSessionDelegate>)delegate;
@end

@implementation Facebook (MyApp)

- (void)myAuthorize:(id<FBSessionDelegate>)delegate {
  _permissions = [[NSArray arrayWithObjects:@"email", *(whatever you need)*, nil] retain];
  _sessionDelegate = delegate;
  [self authorizeWithFBAppAuth:NO safariAuth:NO]; // force in app auth
}

@end

    Facebook *facebook = [[Facebook alloc] initWithAppId:MY_APP_FB_ID];
     [facebook myAuthorize:self]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T02:23:16.490

据我所知，这是不可能的。因为如果您这样做，您将获得所有用户的密码，并且您可以破解他们的帐户。所以，FB不允许这样做。

# java - App Engine Java - 从 mp4 视频中提取缩略图

> ID：13315479
> 
> 赞同：0
> 
> 时间：2012-11-09T20:28:06.947
> 
> 标签：java, google-app-engine, google-cloud-storage

我有一些视频以 mp4 格式存储在 Google Cloud Storage 上，我需要从中提取缩略图。

我查看了许多解决方案，看起来它们不适用于 App Engine。

例如：[http ://www.xuggle.com/xuggler/](http://www.xuggle.com/xuggler/)

你有我可以用来在 Java 中的 Google App Engine 上执行此操作的库吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T20:23:21.583

我终于选择了 Google Compute Engine 和 ffmpeg，正在实施中......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T02:32:02.720

这个问题看起来与[Is there a Java API for mp4 files?](https://stackoverflow.com/questions/3015393/is-there-a-java-api-for-mp4-files)

Xuggler 说他们的项目是 Java 和本地代码的混合体。本机代码不会在 Java 应用引擎上运行。

搜索`java mp4 video decoder`并寻找仅使用 java 代码的解码器。也许这个会起作用：http: [//jcodec.org/guide/movstitch.html](http://jcodec.org/guide/movstitch.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T19:48:43.863

好的，经过一番搜索，我发现了以下内容：[谷歌应用引擎上的视频网站](https://stackoverflow.com/questions/4616934/video-website-on-google-application-engine)

听起来和你的问题类似。唯一的区别是其他线程检查 python 解决方案。然而，答案似乎与编程语言完全无关，所以我认为值得一读。

出于文档/鼓舞人心的目的，一旦你去做，可能值得在这个线程中描述你的解决方案。

# php - 为 jQuery/PHP 聊天创建“块函数”

> ID：13315482
> 
> 赞同：-1
> 
> 时间：2012-11-09T20:28:19.113
> 
> 标签：php, jquery, chat

我创建了我自己的聊天版本.. [http://css-tricks.com/jquery-php-chat/](http://css-tricks.com/jquery-php-chat/)。一切正常，人们可以登录、发送消息和查看其他人的消息。甚至还有谁在房间里的名单。我还有一个需要密码的 ADMIN 帐户。

我的问题是我想不出创建“块功能”的好方法或将用户踢出窗口/聊天室的其他方法，以便以防万一房间里有吵闹的人，作为管理员我可以阻止他或将他踢出去或类似的事情。

有没有人有一个简单的方法来做到这一点？

将名称保存到列表的 PHP 文件..

```
$function = $_POST['function'];
$name = $_POST['name'];
$filename = "chatList.txt";

 switch($function) {

     case('writeName'):
        $fo = fopen($filename,'a');
        fwrite($fo, $name."\r\n");
        fclose($fo);
        break;

     case('deleteName'):
        $file = file_get_contents($filename);
        $fo = fopen($filename,'w');
        $str =  str_replace($name."\r\n","",$file,$count);
        fwrite($fo, $str, strlen($str));
        fclose($fo);
        for($i = 0; $i < $count-1; $i++)
        {   
            $fo = fopen($filename,'a');
            fwrite($fo, $name."\r\n");
            fclose($fo);  
        }

        break;

    case('updateList'):
         $fo = fopen($filename,'r');
         if($fo)
         {
            $array = explode('\r\n', fread($fo, filesize($filename)));
         }
         echo json_encode($array);

         break;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T20:52:44.357

1）找出你的用户的IP是什么：

```
function getIP() {
 $ip;
 if (getenv("HTTP_CLIENT_IP")) $ip = getenv("HTTP_CLIENT_IP"); 
  elseif(getenv("HTTP_X_FORWARDED_FOR")) $ip = getenv("HTTP_X_FORWARDED_FOR"); 
  elseif(getenv("REMOTE_ADDR")) $ip = getenv("REMOTE_ADDR");
  else $ip = "UNKNOWN";
 return $ip;
} 
```

2) 修改您的删除、更新和写入函数，以便它们也写入 ip 地址 3) 使用用户的 ip 调用删除函数并完成！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T21:04:33.563

我能够从列表中删除此人，然后添加一个 if 语句以阻止他们发送消息...

```
if(!$('#online div#usernames:contains('+name+')').length > 0){
                alert('You have been blocked!');
                return; 
            } 
```

# xml - 解析xml以根据具有相同的子元素值对多个子元素进行分组？

> ID：13315487
> 
> 赞同：1
> 
> 时间：2012-11-09T20:28:41.270
> 
> 标签：xml, xml-parsing

我正在尝试解析从我们的系统生成的 XML 文件，其中生成了多个子元素，但它们是“一起”的，因为它们有一个相同的子元素。

为了理解我在下面粘贴的部分 xml 代码......

每条记录都由它的订单号标识，然后它包含该货物的信息，最后列出了该订单的单个项目及其规格。

```
<forward_agent>
    <record>
      <order>562490</order>
      <mfg._del_date>11-19-2008</mfg._del_date>
      <forw.agent>263</forw.agent>
      <customer>120</customer>
      <name>BLUEBERRY AUBURN HILLS</name>
      <item>&apos;28.1461.00</item>
      <ordered>1.0000</ordered>
      <warehouse>001</warehouse>
      <desitnation_city_state>AUBURN HILLS  MI</desitnation_city_state>
      <weight>60.1201</weight>
      <size>9.70</size>
</record>
<record>
      <order>562490</order>
      <mfg._del_date>11-19-2008</mfg._del_date>
      <forw.agent>263</forw.agent>
      <customer>120</customer>
      <name>BLUEBERRY AUBURN HILLS</name>
      <item>&apos;545</item>
      <ordered>1.0000</ordered>
      <warehouse>002</warehouse>
      <desitnation_city_state>AUBURN HILLS  MI</desitnation_city_state>
      <weight>82.0120</weight>
      <size>12.86</size>
</record>
<record>
      <order>&#160;</order>
      <mfg._del_date>&#160;</mfg._del_date>
      <forw.agent>&#160;</forw.agent>
      <customer>&#160;</customer>
      <name>&#160;</name>
      <item>&apos;</item>
      <ordered>&#160;</ordered>
      <warehouse>&#160;</warehouse>
      <desitnation_city_state>Total Lbs:</desitnation_city_state>
      <weight>1658.1342</weight>
      <size>199.36</size>
</record>
    <record>
      <order>562136</order>
      <mfg._del_date>11-19-2008</mfg._del_date>
      <forw.agent>263</forw.agent>
      <customer>133</customer>
      <name>BLUEBERRY ALBUQUERQUE</name>
      <item>&apos;4635</item>
      <ordered>2.0000</ordered>
      <warehouse>002</warehouse>
      <desitnation_city_state>EL PASO  TX</desitnation_city_state>
      <weight>23.9863</weight>
      <size>4.00</size>
</record>
<record>
      <order>562136</order>
      <mfg._del_date>11-19-2008</mfg._del_date>
      <forw.agent>263</forw.agent>
      <customer>133</customer>
      <name>BLUEBERRY ALBUQUERQUE</name>
      <item>&apos;5590</item>
      <ordered>1.0000</ordered>
      <warehouse>002</warehouse>
      <desitnation_city_state>EL PASO  TX</desitnation_city_state>
      <weight>0.0000</weight>
      <size>0.00</size>
</record>
<record>
      <order>562136</order>
      <mfg._del_date>11-19-2008</mfg._del_date>
      <forw.agent>263</forw.agent>
      <customer>133</customer>
      <name>BLUEBERRY ALBUQUERQUE</name>
      <item>&apos;5591</item>
      <ordered>1.0000</ordered>
      <warehouse>002</warehouse>
      <desitnation_city_state>EL PASO  TX</desitnation_city_state>
      <weight>436.0082</weight>
      <size>96.67</size>
</record>
<record>
      <order>&#160;</order>
      <mfg._del_date>&#160;</mfg._del_date>
      <forw.agent>&#160;</forw.agent>
      <customer>&#160;</customer>
      <name>&#160;</name>
      <item>&apos;</item>
      <ordered>&#160;</ordered>
      <warehouse>&#160;</warehouse>
      <desitnation_city_state>Total Lbs:</desitnation_city_state>
      <weight>5093.0928</weight>
      <size>613.88</size>
</record> 
```

我希望输出按 Order # 分组，看起来与此类似：

```
Item         Ordered    Weight          Size
1221         1          320.6734        31.36
1601         1          34.0724         11.42
2122         1          86.0023         12.79
5543.SP      1          1075.254        121.23
28.1461.00       1          60.1201         9.7
545              1          82.012          12.86
            Total Lbs:  1658.1342       199.36 
```

最终，这样我就可以根据总重量和尺寸或特定项目来分类订单。

- -编辑 - -

现在显示输入框，但它们没有填充任何内容。

**当前的js代码**

```
$(document).ready(function()
{
  $.ajax({
    type: "GET",
    url: "b2.xml",
    dataType: "xml",
    success: function(response) { parseXML(response); }
  });
});

var recordList =[];

function parseXML(xml) {
$(xml).find('record').each(function () {
    var entry = new Object();
    entry.order= $(this).find('order').text();
    entry.delDate= $(this).find('mfg._del_date').text();
    entry.forw = $(this).find('forw.agent').text();
    entry.customer= $(this).find('customer').text();
    //
    //

    recordList.push(entry);

});
send(); // handles xml after parsed
}

function send(){
     // for each row of a table
     for(var i = 0; i < $("#table tr").size(); i++){
         $('#orderNum' + i).val(recordList[i].order);
         $('#delDate' + i).val(recordList[i].delDate);
         $('#forw' + i).val(recordList[i].forw);
         $('#customer' + i).val(recordList[i].customer);
     }
 } 
```

**当前的html代码**

```
 <html>
<head>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.8.2.js"></script>
    <script type="text/javascript" src="parser.js"></script>
</head>
<body>
<table>
    <tr>
        <td>Order #</td>
        <td>Delete Date</td>
        <td>Forward</td>
        <td>Customer</td>
    </tr>
    <tr>
        <td><input id="orderNum0" type="text" /></td>
        <td><input id="delDate0" type="text" /></td>
        <td><input id="forw0" type="text" /></td>
        <td><input id="customer0" type="text" /></td>
    </tr>
</table>
</body>
</html> 
```

这是一个屏幕截图：

[http://s16.postimage.org/rd1uahm4j/localhost_ftl_parser_html.png](http://s16.postimage.org/rd1uahm4j/localhost_ftl_parser_html.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T20:33:05.233

**记录.js**

```
$(document).ready(function(){

$.ajax({
type: "GET",
url: "record.xml", 
dataType: "xml",
success: function(xml){
    parseXML(xml); 
},
error: function(response, textStatus, errorThrown){ 
    console.log(textStatus, errorThrown);}
   });
});

var recordList =[];

function parseXML(xml) {
$(xml).find('record').each(function () {
var entry = new Object();
entry.order= $(this).find('order').text();
entry.delDate= $(this).find('mfg').text();
entry.forw = $(this).find('forw').text();
entry.customer = $(this).find('customer').text();
entry.name = $(this).find('name').text();
entry.item = $(this).find('item').text();
entry.ordered = $(this).find('ordered').text();
entry.warehouse = $(this).find('warehouse').text();
entry.destination = $(this).find('desitnation_city_state').text();
entry.weight = $(this).find('weight').text();
entry.size = $(this).find('size').text();

recordList.push(entry);
});
send(); // handles xml after parsed
}

function send(){
 // for each row of a table
 addRows();
 for(var i = 0; i < recordList.length; i++){
     $('#orderNum' + i).val(recordList[i].order);
     $('#delDate' + i).val(recordList[i].delDate);
     $('#forw' + i).val(recordList[i].forw);
     $('#customer' + i).val(recordList[i].customer);
     $('#name'+i).val(recordList[i].name);
     $('#item'+i).val(recordList[i].item);
     $('#ordered'+i).val(recordList[i].ordered);
     $('#warehouse'+i).val(recordList[i].warehouse);
     $('#destination'+i).val(recordList[i].destination);
     $('#weight'+i).val(recordList[i].weight);
     $('#size'+i).val(recordList[i].size);

     }
  }

 function addRows(){
      for(var i = 1; i < recordList.length; i++){
         var newField = "<tr><td><input id=\"orderNum"+i+"\" size=\"10\" type=\"text\"    </td>"+
                        "<td><input id=\"delDate"+i+"\" size=\"10\" type=\"text\"</td>"+
     "<td><input id=\"forw"+i+"\" size=\"10\" type=\"text\"</td>"+
     "<td><input id=\"customer"+i+"\" size=\"10\" type=\"text\"</td>"+
     "<td><input id=\"name"+i+"\" size=\"10\" type=\"text\"</td>"+
     "<td><input id=\"item"+i+"\" size=\"10\" type=\"text\"</td>"+
     "<td><input id=\"ordered"+i+"\" size=\"10\" type=\"text\"</td>"+
     "<td><input id=\"warehouse"+i+"\" size=\"10\" type=\"text\"</td>"+
     "<td><input id=\"destination"+i+"\" type=\"text\"</td>"+
     "<td><input id=\"weight"+i+"\" size=\"10\" type=\"text\"</td>"+
     "<td><input id=\"size"+i+"\" size=\"10\" type=\"text\"</td></tr>"

     $('#tableId').append(newField);
        }
   } 
```

**记录.html**

```
 <html>
     <head>
     <meta http-equiv="content-type" content="text/html; charset=UTF-8">
      <script type="text/javascript"   src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
      <script type="text/javascript" src="http://code.jquery.com/jquery-1.8.2.js"></script>
       <script type="text/javascript" src="records.js"></script>
   </head>
<body>
<table id="tableId">
    <tr>
        <td>Order #</td>
        <td>Delete Date</td>
        <td>Forward</td>
        <td>Customer</td>
    <td>Name</td>
    <td>Item</td>
    <td>Ordered</td>
    <td>Warehouse</td>
    <td>Destination</td>
    <td>Weight</td>
    <td>Size</td>
</tr>
<tr>
    <td><input id="orderNum0" size="10" type="text" /></td>
    <td><input id="delDate0" size="10" type="text" /></td>
    <td><input id="forw0" size="10" type="text" /></td>
    <td><input id="customer0" size="10" type="text" /></td>
<td><input id="name0" size="10" type="text" /></td>
<td><input id="item0" size="10" type="text" /></td>
<td><input id="ordered0" size="10" type="text" /></td>
<td><input id="warehouse0"size="10"  type="text" /></td>
<td><input id="destination0" type="text" /></td>
<td><input id="weight0"size="10"  type="text" /></td>
<td><input id="size0" size="10" type="text" /></td>
</tr>
</table>
</body>
</html> 
```

只有一个问题，那就是您的 xml 条目名称为 forw.agent 和 mfg.del_date .. 您必须转义其中一些字符，但这会添加行并向这些表添加值.. 这是一个粗略的页面拼凑在一起，您可以随意更改内容..尤其是输入框，您可以将其更改为标签或您拥有的内容..但这会根据要求进行解析和显示..

# jquery - ScrollTo jQuery 放哪里？

> ID：13315490
> 
> 赞同：-1
> 
> 时间：2012-11-09T20:28:50.677
> 
> 标签：jquery, button, html, scrollto

我想在我的网站上使用以下 jQuery 脚本：

```
$('#page2').ScrollTo({
    duration: 2000,
    easing: 'linear'
});" 
```

这个想法是让按钮将人们重定向到我页面上其他地方的 div。我找到了上面的 jQuery 脚本，但不知道把它放在哪里..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T21:47:01.000

很抱歉我没有得到更多有用的反馈。[最终我在http://web.enavu.com/tutorials/how-to-jquery-scroll-to-anchor-and-scroll-to-top-simple/comment-page-1/](http://web.enavu.com/tutorials/how-to-jquery-scroll-to-anchor-and-scroll-to-top-simple/comment-page-1/)上找到了我想要的东西

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T20:32:54.850

假设您有一个 id 为“scroller”的按钮，您会在页面上放置如下内容：

```
$(function(){
    $('#scroller').click(function(){
         $('#page2').scrollTo({
             duration: 2000,
             easing: 'linear'
         });
    });
}); 
```

# ios - 处理推送通知并在 if 条件下使用消息

> ID：13315496
> 
> 赞同：0
> 
> 时间：2012-11-09T20:29:12.003
> 
> 标签：ios

我想在我的应用程序中具有以下功能：当收到通知时，应用程序应该使用其中的消息。应用程序应该从该消息中获取 NSDate 类型字符串，并通过在 if 条件中使用仅显示特定视图。请建议我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T07:41:16.240

您可以使用以下代码检索您从服务器获取的消息

```
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo {

NSLog(@"user info%@",userInfo);  } 
```

收到消息后，您可以对从服务器收到的不同消息设置各种条件

# opengl-es - How do I display a vertically scrolling menu in Cocos2D-iPhone 2.1?

> ID：13315507
> 
> 赞同：1
> 
> 时间：2012-11-09T20:29:49.397
> 
> 标签：opengl-es, cocos2d-iphone, uikit

How do I display a vertically scrolling menu (a la Words-/Hanging-/Scramble-/Matching with Friends, Dice with Buddies, etc.) in Cocos2D 2.1? Is including UIKit in my project absolutely necessary? I've been trying several different combinations and none of them are straightforward or even remotely comprehensible to a newb like me. I've tried: 1) Starting with a Cocos2D template and adding UIKit to the project, 2) Starting with a UIKit project and adding Cocos2D, which is just as confusing.

To be clear about what I need, picture a "With Friends" game's menu screen. My app has the same layout, but I've been unable to get the scrolling matchmaking menu on screen. I have a Navigation Bar, a background image, but no scrollview. I need a scrolling menu to show the player's active games (player's turn, other players' turns, start new game, facebook, twitter, etc.) that scrolls underneath the NavBar, again just like in a with Friends game.

Why is this so difficult in Cocos2D? I'm getting ready to abandon all hope of using Cocos2D for the very simple animations my game requires and just taking the plunge into OpenGL ES because it "integrates seamlessly with Objective-C based Cocoa applications," according to Apple in their OpenGL programming guide. Then I read that it's tough to integrate UIKit with OpenGL and saw a ton of tutorials for it.

Is there no straightforward, native way to do this in any API/engine/discipline???

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T20:41:43.497

You can use the cocos2d extensions to achieve this. They are available here,

[https://github.com/cocos2d/cocos2d-iphone-extensions](https://github.com/cocos2d/cocos2d-iphone-extensions)

For a scroll view there is CCScrollLayer, you may also be interested in CCMenuAdvanced which is a scrolling CCMenu.

# c# - 使用 C# 访问 Web 服务器上的文件夹

> ID：13315508
> 
> 赞同：0
> 
> 时间：2012-11-09T20:29:57.470
> 
> 标签：c#, c#-4.0, networking, web-applications

我正在尝试寻找方法，通过这些方法，用户可以在 Web 应用程序中单击按钮时打开 Web 服务器上的文件夹，基于 Windows 身份验证且不进行模拟。

我遇到的两种方法是：

*   使用 href 链接，它可以工作，但只在 IE 中。

    `<a href="\\test\c$\xyz">Open</a> "`

*   使用 C#，它似乎不起作用，我授予应用程序池和用户访问文件夹的权限，但被拒绝访问。

    `System.Diagnostics.Process.Start(@"\\test\c$\xyz");`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T01:38:11.117

从“访问管理共享不是一个好主意”开始，如果您的用户尝试以普通用户身份访问它（即可能没有被域控制器记录/验证）肯定会失败。

假设您要访问已授予的共享，您应该使用**file:**作为 URI 方案进行链接。

本地文件夹：

`<a href="file:///D:/Downloads/">click me</a>`

远程文件夹：

`<a href="file://///test/sharedfolder/">click me</a>`

这里适用于 IE 和 FF。

阅读：http: [//blogs.msdn.com/b/ie/archive/2006/12/06/file-uris-in-windows.aspx](http://blogs.msdn.com/b/ie/archive/2006/12/06/file-uris-in-windows.aspx)

摘自： [使用 Python 单击 HTML 页面上的某个链接时如何打开 windows 文件夹](https://stackoverflow.com/questions/11806853/how-to-open-a-windows-folder-when-clicking-on-some-link-on-a-html-page-using-pyt)

# ruby-on-rails - 将 gmaps4rails 加载到自定义 formtastic 字段中

> ID：13315509
> 
> 赞同：0
> 
> 时间：2012-11-09T20:30:00.927
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activeadmin, formtastic, gmaps4rails

我正在尝试找到一种将 gmaps4rails 地图加载到自定义 formtastic 字段中的方法（在 Active Admin 中使用）

我有这个：

```
class GmapInput < Formtastic::Inputs::StringInput
  def to_html
    gmaps4rails(Location.new)
  end
end 
```

正在触发，但我收到错误消息：

```
undefined method `gmaps4rails' for #<GmapInput:0x007f9cae5b2780> 
```

我认为这是因为 gmaps4rails 尚未加载。我怎样才能确保它被加载？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T21:01:52.250

嗯，从未使用过formtastic，但是......

我想问题源于事实`gmaps4rails`是一个助手，而您的班级无权访问它。

在标准表单构建器中，您只需将委托助手调用`@template`(so `@template.gmaps4rails`)。

顺便说一句，还有另一件奇怪的事情：你为什么要`Location.new`传给`gmaps4rails`? 它对这样的对象无能为力：它需要 json.

# c# - 从其他对象中查找具有 NHibernate 的实体

> ID：13315510
> 
> 赞同：0
> 
> 时间：2012-11-09T20:30:00.700
> 
> 标签：c#, nhibernate, repository

我有一个非常大的问题：我正在尝试使用其他对象查找实体（使用 NHibernate）。示例： Emplyee (entity) -> { Name, LastName, Email, Address } EmplyeeSearchFilters (filters object) -> { Name, LastName, Email, Address } 然后，我想将 EmployeeSearchFilters 传递给 Repository (generic) 并自动查找NHibernate 使用不为空的属性。示例：EmployeeSearchFilters -> { Name = "Nelly", LastName = null, Email = "@fibertel.com", Addres = null } 有人知道我该怎么做吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T20:52:28.820

我认为该`NHibernate.Criterion.Example`标准可以用于此目的。文档可以在[这里找到](http://www.nhforge.org/doc/nh/en/index.html#querycriteria-examples)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T08:59:37.343

您可以通过使用此功能来使用 linq：

```
 public virtual List<T> RetrieveByList<T>(Expression<Func<T, bool>> predicate)
    {
        return Session.Query<T>().Where(predicate).ToList<T>();
    } 
```

并且可以这样使用：

```
 RetrieveByList<Customer>(x=>x.Name == "Nelly" && x.LastName == null && x.Email == "@fibertel.com" && x.Addres == null) 
```

您可以使用动态谓词[http://www.codeproject.com/Articles/28580/LINQ-and-Dynamic-Predicate-Construction-at-Runtime](http://www.codeproject.com/Articles/28580/LINQ-and-Dynamic-Predicate-Construction-at-Runtime)

# python - 在python中打开的文件描述符

> ID：13315514
> 
> 赞同：4
> 
> 时间：2012-11-09T20:30:11.860
> 
> 标签：python, file, python-3.x

当我在 IPython3 shell 中使用这段代码时

```
 >>>data = open('file').read() 
```

然后检查打开的文件描述符：

```
 lsof | grep file 
```

我发现空列表

当我使用这个时：

```
>>>open('file') 
```

`lsof`显示两个项目。问题是为什么第一个操作关闭 fd 而第二个没有？我认为垃圾收集器必须删除没有引用的文件对象。

当我重新分配值时，我知道解释器中的 '_' var

```
>>>111
>>>_
111 
```

但描述符保持打开状态。当我重复

```
>>>open('file') 
```

n 次有 2 * n 个打开的描述符

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T20:39:26.890

在第二个示例中，文件句柄由交互式解释器变量保留`_`，它允许您访问最后评估的表达式。如果您评估另一个表达式，例如`1+1`，您会注意到该文件不再报告`lsof`为打开。

正如 Mike Byers 所指出的，这种行为是特定于 CPython 的，甚至是特定于如何使用文件对象的精确环境。要确保无论代码如何执行都关闭文件，请使用以下`with`语句：

```
with open('file') as fp:
    data = fp.read() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T20:32:59.933

默认的 Python 实现同时使用垃圾收集和引用计数。在您的第一个示例中，文件对象的引用计数降至零，因此即使在垃圾收集器运行之前它也会立即关闭。

第二个版本等价于：

```
_ = open('file') 
```

由于该文件仍被引用，`_`因此在您运行另一个命令之前它仍然有效。

请注意，此行为特定于 CPython。IronPython 等其他实现可能不会那么快地关闭文件，因此您应该在使用完文件后真正关闭它们。一个很好的方法是使用[with 语句](http://www.python.org/dev/peps/pep-0343/)。

```
with open('file') as f:
    data = f.read() 
```

**有关的**

*   [为什么python对gc同时使用引用计数和mark-and-sweep？](https://stackoverflow.com/questions/9062209/why-does-python-use-both-reference-counting-and-mark-and-sweep-for-gc)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-09T20:40:59.950

这是因为您使用的交互式解释器保留了对返回的最后一个对象的隐式引用。该引用名为`_`.

```
Python2> open("/etc/hosts") 
<open file '/etc/hosts', mode 'r' at 0xf2c390> 
Python2> _ 
<open file '/etc/hosts', mode 'r' at 0xf2c390> 
```

所以当你看它时它仍然是“活的”。做点别的：

```
Python2> max(0,1)
1 
```

该文件现在已关闭，因为它不再被引用。

但这是一个很好的例子，说明了为什么您应该明确关闭您真正想要关闭的文件。

# php - Zend Framework 从获取参数中删除字符？

> ID：13315515
> 
> 赞同：0
> 
> 时间：2012-11-09T20:30:13.873
> 
> 标签：php, zend-framework, get

Zend Framework 会劫持原始`$_GET`字符并删除字符吗？我无法弄清楚我正在编写的脚本发生了什么。

现在我通过 url 中的参数传递一个变量“email”。然而，它的工作原理。它剥离一个字符并留下一个空间。

在其中包含 a 的电子邮件字符串上尝试喜欢`$_GET['email']`或喜欢它会被删除并替换为空格。然而，我没有应用任何会导致这种情况的东西，我在任何地方都知道。`$params = $this->getRequest()->getParams(); $params['email']``+``+`

那么，有没有人知道这个问题可能是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T20:33:21.160

PHP 这样做，看到这个问题： [When to encode space to plus (+) or %20?](https://stackoverflow.com/questions/2678551/when-to-encode-space-to-plus-and-when-to-20)

要获得“+”，请在 url 中使用 %2B

# orm - 持久化实体时使用 playOrm 1.4.1 的 NullPointer

> ID：13315518
> 
> 赞同：0
> 
> 时间：2012-11-09T20:30:21.220
> 
> 标签：orm, nosql, playorm

我已经在 playORM 中映射了实体，并且我的项目运行良好，我的实体按照它们的方式映射。但是，在安装了 maven 中发布的最新版本 playORM 1.4.1 后，我得到了下面的空指针。

我想找到错误，但不知道从哪里开始寻找。

有什么提示吗？

信息：在本地找到元 = 用户 2012-11-09 17:32:22,918 com.alvazan.orm.layer9z.spi.db.cassandra.ColumnFamilyHelper waitForNodesToBeUpToDate 信息：循环直到所有节点具有相同的模式版本或超时 300000 毫秒 2012- 11-09 17:32:22,939 com.alvazan.orm.layer9z.spi.db.cassandra.ColumnFamilyHelper tryToLoadColumnFamilyImpl 信息：好吧，我们没有找到任何列族=要在 cassandra 中加载的用户（来自 virt=User）2012-11 -09 17:32:22,939 com.alvazan.orm.layer9z.spi.db.cassandra.ColumnFamilyHelper tryToLoadColumnFamilyVirt 信息：从 cassandra = 21 java.lang.NullPointerException 在 com.alvazan.orm.impl 加载列族元数据的总时间。 meta.data.MetaEmbeddedSimple.translateToColumnImpl(MetaEmbeddedSimple.java:105) 在 com.alvazan.orm.impl.meta.data.MetaEmbeddedSimple.translateToColumn(MetaEmbeddedSimple.java:93) 在 com.alvazan.orm。impl.meta.data.MetaClassSingle.translateToRow(MetaClassSingle.java:82) 在 com.alvazan.orm.layer0.base.BaseEntityManagerImpl.putImpl(BaseEntityManagerImpl.java:102) 在 com.alvazan.orm.layer0.base.BaseEntityManagerImpl。将(BaseEntityManagerImpl.java:68) 放在 com.s1mbi0se.dmp.da.dao.UserDao.insertOrUpdateUser(UserDao.java:23) 放在 com.s1mbi0se.dmp.module.UserModule.persistData(UserModule.java:116) 放在 com .s1mbi0se.dmp.processor.mapred.SelectorReducer.reduce(SelectorReducer.java:60) 在 com.s1mbi0se.dmp.processor.mapred.SelectorReducer.reduce(SelectorReducer.java:1) 在 org.apache.hadoop.mapreduce.Reducer .run(Reducer.java:176) at org.apache.hadoop.mapred.ReduceTask.runNewReducer(ReduceTask.java:649) at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:417) at org. apache.hadoop.mapred.LocalJobRunner$Job。run(LocalJobRunner.java:260) 17:32:22,946 WARN Thread-3 mapred.LocalJobRunner:298 - job_local_0001 java.lang.InterruptedException at com.s1mbi0se.dmp.processor.mapred.SelectorReducer.reduce(SelectorReducer.java:63)在 com.s1mbi0se.dmp.processor.mapred.SelectorReducer.reduce(SelectorReducer.java:1) 在 org.apache.hadoop.mapreduce.Reducer.run(Reducer.java:176) 在 org.apache.hadoop.mapred.ReduceTask .runNewReducer(ReduceTask.java:649) 在 org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:417) 在 org.apache.hadoop.mapred.LocalJobRunner$Job.run(LocalJobRunner.java:260) 2012 -11-09 17:32:27,237 com.s1mbi0se.dmp.processor.main.DmpProcessorRunner 运行reduce(SelectorReducer.java:63) at com.s1mbi0se.dmp.processor.mapred.SelectorReducer.reduce(SelectorReducer.java:1) at org.apache.hadoop.mapreduce.Reducer.run(Reducer.java:176) at org .apache.hadoop.mapred.ReduceTask.runNewReducer(ReduceTask.java:649) 在 org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:417) 在 org.apache.hadoop.mapred.LocalJobRunner$Job.run (LocalJobRunner.java:260) 2012-11-09 17:32:27,237 com.s1mbi0se.dmp.processor.main.DmpProcessorRunner 运行reduce(SelectorReducer.java:63) at com.s1mbi0se.dmp.processor.mapred.SelectorReducer.reduce(SelectorReducer.java:1) at org.apache.hadoop.mapreduce.Reducer.run(Reducer.java:176) at org .apache.hadoop.mapred.ReduceTask.runNewReducer(ReduceTask.java:649) 在 org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:417) 在 org.apache.hadoop.mapred.LocalJobRunner$Job.run (LocalJobRunner.java:260) 2012-11-09 17:32:27,237 com.s1mbi0se.dmp.processor.main.DmpProcessorRunner 运行LocalJobRunner$Job.run(LocalJobRunner.java:260) 2012-11-09 17:32:27,237 com.s1mbi0se.dmp.processor.main.DmpProcessorRunner 运行LocalJobRunner$Job.run(LocalJobRunner.java:260) 2012-11-09 17:32:27,237 com.s1mbi0se.dmp.processor.main.DmpProcessorRunner 运行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T02:59:40.867

编辑：这是在 master 分支中修复的，很快就会发布。2012 年 11 月 27 日

日志格式似乎有点不对劲，但这是重要的部分

```
java.lang.NullPointerException at com.alvazan.orm.impl.meta.data.MetaEmbeddedSimple.translateToColumnImpl(MetaEmbeddedSimple.java:105) 
```

第 105 行找到此代码...

```
 for(T val : toBeAdded) {
        byte[] name = formTheName(val);
        Column c = new Column();
        c.setName(name);

        row.getColumns().add(c);
    } 
```

特别是第 105 行是第一行，所以 toBeAdded 出于某种原因为空......看看谁调用了这个方法。

嗯，事实证明你的一个实体有一个空列表。我们需要在此处添加代码，因此如果您的实体有一个空列表，我们将创建一个空列表。你能提交一张票并链接到这个网址吗？我们可以很容易地解决这个问题。

注意：我习惯于每个实体都有这样的字段

私人列出一些东西；

我100%总是这样定义它

私有列表的东西 = 新的 ArrayList();

这避免了到处都是空指针，这就是为什么我错过了这个:( :(.....无论如何，我们将修复以允许这个空列表。

谢谢，院长

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T12:54:02.250

这在 Maven 存储库中可用的 1.4.2 版中已修复

# r - 在 merge() 数字中进行排序

> ID：13315521
> 
> 赞同：0
> 
> 时间：2012-11-09T20:30:33.357
> 
> 标签：r, sorting, merge, lexicographic

我有两个简单的矩阵（或df）要合并：

```
a <- cbind(one=0:15, two=0:15, three=0:15)
b <- cbind(one=0:15, two=0:15, three=0:15)
#a <- data.frame(one=0:15, two=0:15, three=0:15)
#b <- data.frame(one=0:15, two=0:15, three=0:15) 
```

没问题：在对第一列进行排序后，第一列的输出从 0 到 15 递增：

```
merge(a,b,by=c("one"), sort=T)
   one two.x three.x two.y three.y
1    0     0       0     0       0
2    1     1       1     1       1
3    2     2       2     2       2
4    3     3       3     3       3
5    4     4       4     4       4
6    5     5       5     5       5
7    6     6       6     6       6
8    7     7       7     7       7
9    8     8       8     8       8
10   9     9       9     9       9
11  10    10      10    10      10
12  11    11      11    11      11
13  12    12      12    12      12
14  13    13      13    13      13
15  14    14      14    14      14
16  15    15      15    15      15 
```

但是等等：当合并两列时——都是数字——排序顺序突然看起来像字母。

```
merge(a,b,by=c("one", "two"), sort=T)
   one two three.x three.y
1    0   0       0       0
2    1   1       1       1
3   10  10      10      10
4   11  11      11      11
5   12  12      12      12
6   13  13      13      13
7   14  14      14      14
8   15  15      15      15
9    2   2       2       2
10   3   3       3       3
11   4   4       4       4
12   5   5       5       5
13   6   6       6       6
14   7   7       7       7
15   8   8       8       8
16   9   9       9       9 
```

额，恶心。这是怎么回事？我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T20:41:35.933

根据@joran 的评论，如果您希望以任何特定顺序对行进行排序，您应该自己显式设置它。

如果您想要的顺序是其中行的一列或多列的值递增，则可以使用函数`order()`，如下所示：

```
X <- merge(a, b, by = c("one", "two"))
X[with(X, order(one, two)),] 
```

# java - 在没有 http 的情况下向 XML 文档添加命名空间：

> ID：13315523
> 
> 赞同：0
> 
> 时间：2012-11-09T20:30:38.643
> 
> 标签：java, xsd, xom

我需要将以下命名空间添加到我的 XSD 文档中：

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:tns="catalog.enterprise.level3.com" attributeFormDefault="unqualified"> 
```

当我尝试添加目标命名空间时，它会抱怨 MalformedURIException，我认为这是因为命名空间 URI 中没有 http://。我为此使用**XOM 。**

```
Element rootWriter; 
rootWriter.addNamespaceDeclaration("tns","catalog.enterprise.level3.com"); 
```

有人可以向我建议如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T20:39:20.223

命名空间[必须](http://www.w3schools.com/xml/xml_namespaces.asp)是一个[URI](http://en.wikipedia.org/wiki/Uniform_resource_identifier) - 例如：

```
uri:catalog.enterprise.level3.com 
```

会工作。如果，正如我所假设的，您必须读取错误编码的 xml，恐怕您唯一的解决方案是选择一个不执行这种检查的“质量较低”的 xml 解析器 - 或者向给您文件的人抱怨！

# javascript - 从另一个扩展一个 JavaScript 对象函数

> ID：13315526
> 
> 赞同：2
> 
> 时间：2012-11-09T20:31:11.337
> 
> 标签：javascript, wordpress, dom, tinymce

我需要向核心 JavaScript 对象函数添加一些功能，而不触及原始文件。

如何在保持命名空间完整的同时从下面的对象扩展以下对象函数？

**核心对象**

```
 (function() {
        var DOM = tinymce.DOM;

        tinymce.create('tinymce.plugins.WordPress', {

            // i need to extend this function
            _hideButtons : function() {

                // stuff here

            };

        }); 

        tinymce.PluginManager.add('wordpress', tinymce.plugins.WordPress);

    })(); 
```

**我的对象**

我试过这个，但它不起作用：

```
 (function() {

        tinymce.create('tinymce.plugins.Mine', {

            init : function(ed, url) {  

                ed.plugins.wordpress._hideButtons.prototype = function() {

                    // new function stuff

                }
            },  

        }); 

        tinymce.PluginManager.add('mine', tinymce.plugins.Mine);

    })(); 
```

我在正确的轨道上吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T02:01:40.733

事实上，扩展**并不是**我所需要的。

通过删除`.prototype`上面的内容，我可以完全**重写**相关函数。*这正是我想做的。*

核实...

```
(function() {

    tinymce.create('tinymce.plugins.Mine', {

        init : function(ed, url) {  

            ed.plugins.wordpress._hideButtons = function() {

                // new function stuff

            }
        },  

    }); 

    tinymce.PluginManager.add('mine', tinymce.plugins.Mine);

})(); 
```

# css - 仅加粗 div 的顶部和底部边框

> ID：13315528
> 
> 赞同：0
> 
> 时间：2012-11-09T20:31:18.300
> 
> 标签：css, layout, html, border

我想加粗一个div的边框。我的问题是我只需要加粗顶部和底部边框。

例如：如果我有一个正方形的 div，它应该看起来：

```
_______________

_______________ 
```

我怎么能在css中做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T20:33:11.167

在 CSS 中

```
border-top:3px solid #000;
border-bottom:3px solid #000; 
```

然后如果你想要左右边框只需将它们设为 1 px 而不是 3

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T20:33:41.933

尝试：

```
border: 2px 0px 2px 0px #000; 
```

*编辑：*
快速解释边框速记属性。元素的顺序是`width style color`，其中宽度的顺序是`Top Left Bottom Right`。所以在上面的例子中，它将上下边框设置为 2px，左右为 0px。它将默认边框的样式为纯色，颜色为黑色。要在左侧和右侧创建虚线边框，您可以使用：

```
border: 0px 2px 0px 2px dashed #000; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T20:33:55.613

将底部和顶部边框的宽度设置得更高。

```
#element {
    border-top: 5px solid #000;
    border-bottom: 5px solid #000;
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T20:33:57.393

你可以这样做：

```
border-top: 1px solid black;
border-bottom: 1px solid black; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-09T20:34:46.663

尝试类似：

```
border-top: 2px solid black;
border-bottom: 2px solid black; 
```

有关详细信息，请参阅[https://developer.mozilla.org/en-US/docs/CSS/border-top](https://developer.mozilla.org/en-US/docs/CSS/border-top)和[https://developer.mozilla.org/en-US/docs/CSS/border-bottom](https://developer.mozilla.org/en-US/docs/CSS/border-bottom)。

# c++ - C++ 使用递归排序算法不需要数组长度

> ID：13315531
> 
> 赞同：1
> 
> 时间：2012-11-09T20:31:23.653
> 
> 标签：c++, arrays, templates, types, recursion

有些人可能知道也可能不知道您可以使用以下代码获取函数的数组参数的大小：

```
template<typename DataType, size_t SIZE>
void SortingAlgorithm(DataType (&array)[SIZE])
{
  ...
  return;
} 
```

其中 SIZE 可用于表示数组中元素的数量，允许程序员使用您的函数将数组作为参数传递而无需显式传递长度。例如，程序员可以这样做：

```
SortingAlgorithm( arrayToBeSorted ); //the length is not passed here, which is fine 
```

对于可以相对容易地以迭代方式实现的算法，这很好。但我试图用其他递归算法来做到这一点。每个人的代码可能如下所示：

```
template<typename DataType, size_t SIZE>
void SortingAlgorithm(DataType (&array)[SIZE])
{
  DataType newArray[SIZE];
  memcpy(newArray,array, SIZE);  //copy to a new array
  SortingAlgorithm( newArray );
  ...
  return;
} 
```

但是，每次说程序需要不同的参数类型，类型转换失败，并显示尝试对 newArray 数组的 SIZE 说明符进行多次类型转换时，都会引发错误，并且程序失败。但是，如果我在进行递归调用之前使用实际值来定义 newArray 的大小，它不会吐出这些错误，如下所示：

```
DataType newArray[10]; //arbitrary number, but the compiler accepts this. 
```

为什么可变大小的数组会导致错误？还有无论如何要实现一个递归算法，它接受一个数组作为输入，但不需要数组的长度作为参数，因为它可以在函数调用中每次确定数组的长度？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-09T20:44:19.177

Make a helper function that takes a size, it can be used internally by your other function, and nobody has to know about it. For example:

```
template<typename DataType>
void SortingAlgorithm_helper(DataType * ptr, size_t size)
{
    ...
    SortingAlgorithm_helper(ptr + 1, size - 1);
    ...
}

template<typename DataType, size_t SIZE>
void SortingAlgorithm(DataType (&array)[SIZE])
{
    ...
    SortingAlgorithm_helper(newArray,SIZE);
    ...      
} 
```

By your comments, you are considering switching to vector. Well, you don't have to make a choice here. You can make the code much more generic to handle both. Instead of passing in a pointer and a size to the helper function, we pass in two iterators designating a range. Then we modify the main function to accept any container, as long as `std::begin` and `std::end` work on it.

```
template<typename Iterator>
void SortingAlgorithm_helper(Iterator first, Iterator last)
{
    ...
    SortingAlgorithm(++first, last);
    ...
}

template<typename Container>
void SortingAlgorithm(Container & c)
{
    ...
    SortingAlgorithm_helper(std::begin(c), std::end(c));
    ...
} 
```

This should handle built-in arrays, `std::vector`, `std::array` and `std::deque`. If you limit the operations performed on the iterators to bi-directional (++ and --), then it should handle `std::list` as well.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-09T20:40:33.210

不要这样做。相反，请使用以下选项之一：

*   使用一个`std::vector`（它有一个`size()`方法）而不是一个数组。
*   Pass in the size of the array as an additional argument to your function.

As for recursive algorithms, don't just copy the elements into a new array, it's time consuming.

Instead, pass in two pointers to the beginning and the end of the portion of the array that you want to process (look at how STL algoritms work, `std::sort` doesn't take a container, instead it takes two iterators).

Note however, that this actually depends on the details of the algorithm you're using, some algorithms may actually require explicit copying, but you should avoid it when possible.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T20:43:42.890

The template generates code at compile time, specifying a value like 10 allows it to generate code because it knows what value to use. Specifying something that can not be determined at compile time(like a variable that only has a value at run time) means it doesn't know what value to use when generating code.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T20:50:41.690

The compiler needs to figure out the sizes at compile time, not run time. My compiler accepts your code as written, but apparently yours can't figure out the size. You can explicitly tell it the size like this:

`SortingAlgorithm<DataType, SIZE>( newArray );`.

Both versions of that line of code work with my compiler.

# c# - 在 Listview 中显示来自 .InI 文件的行的行

> ID：13315534
> 
> 赞同：0
> 
> 时间：2012-11-09T20:32:10.747
> 
> 标签：c#, listview, ini

在我的项目中，我将客户信息（用户名、密码等）保存在一个 ini 文件（加密）中。像这样：

```
WriteValue("Kunden", "Kunde", textBox3.Text);
WriteValue("Kunden", "Username", textBox1.Text);
WriteValue("Kunden", "Password", textBox2.Text); 
```

在完成的 Ini 文件中看起来像这样：

```
[Kunden] 
```

昆德=test2

用户名=aba

密码=1234

好的，现在我将在 Listview 中读取这些客户数据，如下所示：

```
 var kunde = ReadValue("Kunden", "Kunde");
        var username = ReadValue("Kunden", "Username");
        var password = ReadValue("Kunden", "Password");
        foreach (var customer in kunde)
        {
            listView1.Items.Add(kunde + " " + username + " " + password);
        } 
```

但我需要为每个客户提供一条带有姓名和密码等的单独线路

看看我的传出是什么： ![在此处输入图像描述](../Images/150ea5eebbc59ece01eb99437d6698c7.png)

如何为我添加的每个客户制作它，列表视图中的新行。非常感谢你:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T21:19:19.180

1.  在设计视图中添加 2 列，所以你应该有 3 列：Kunde、用户名、密码
2.  使用代码将项目添加到列表视图（如果您真的想以纯文本形式显示密码）：

.

```
listView1.Items.Add (new ListViewItem (new[] {kunde, username, password})); 
```

# c# - 将 SQL 数据库中的记录与 Excel 进行比较，并相应地更新数据库

> ID：13315537
> 
> 赞同：0
> 
> 时间：2012-11-09T20:32:19.780
> 
> 标签：c#, sql, excel

我有一个大约 100 列和大约 10000 行的表。我会定期收到包含类似数据的 Excel，我现在需要更新表格。如果 Excel 中存在新行，我必须将它们添加到数据库中。如果旧行已更新，我需要更新数据库中的行。如果某些行已被删除，我需要从主表中删除该行并添加到另一个表中。

我考虑过如下进行：

将 db 中的所有行提取到 DataSet 中。将 Excel 中的所有行导入数据集。现在使用连接比较这 2 个数据集并执行所需的操作。

我从来没有处理过这么大的数据，我很担心性能。让我知道实现这一要求的理想方法。

提前致谢。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T20:36:52.117

不用担心 10k 记录的性能，您不会注意到它...

也许更好的方法是在临时表中导入 excel 文件并使用几个简单的 sql 查询进行处理......您将节省开发时间并且它可能会表现得更好......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T20:38:33.583

正如我的经验所说，如果您选择在 t-sql 中执行以下操作，那就太简单了：

1.  您可以在 SQL Server 中使用`"OPENROWSET"`、、`"OPENQUERY"`链接服务器、DTS 和许多其他东西将 excel 文件导入临时表。
2.  您可以编写一些简单的查询来做到这一点。如果您使用的是 SQL 2008，`"MERGE"`则正好为您提出问题。

另一件事是性能与 C# 相差甚远。您可以使用`"TOP"`子句对比较进行分块并执行许多其他操作。

希望能帮助到你。干杯

# parsing - Matlab解析二进制文件

> ID：13315540
> 
> 赞同：1
> 
> 时间：2012-11-09T20:32:33.570
> 
> 标签：parsing, matlab, binary

我希望加快读取已从二进制转换的数据文件（我的理解是“二进制”可能意味着很多不同的东西 - 我不知道我有什么类型的二进制文件，只是它是二进制文件）到纯文本。不久前我研究了快速读取文件，并被告知读取/解析二进制文件比文本更快。因此，我想解析/读取二进制文件（已转换为纯文本）以加快程序速度。

我正在为这个项目使用 Matlab（我有一个需要文件中数据的 Matlab“程序”）。我想我需要一些关于二进制不同“类型”的信息，但我真的想要关于如何读取/解析所述二进制文件的信息（我知道我在寻找纯文本，所以我想我需要转换将其转换为二进制，搜索文件，然后将结果提取为纯文本）。该文件是一个日志文件，如果有任何帮助的话。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T22:12:27.037

将数据存储在二进制文件中的简单方法是使用“保存”命令。如果从保存的变量加载，它应该比从文本文件加载要快得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T05:09:22.017

您要问的问题有几个问题-但是，您需要知道正在阅读的文件的格式。如果您可以说“在位置 xx，我可以期望找到数据 yy”，那就是您需要知道的。在您的问题/评论中，您谈论搜索字符串。你也可以这样做（很像一个文本文件）“当我在文件中找到 xxxx 时，给我以下数据，直到第 n 个字符，或者直到下一个 yyyy”。

您想查看`fread`. 在文档中有一些代码片段可以帮助您入门，但正如我（和其他人）所说，您需要知道二进制文件的格式。如果您不顾一切，您可以使用十六进制编辑器来确定一些信息，但应该更快的是输出这些文件的程序的文档。

关于不同的“二进制文件”，好吧，最低有效字节在前或 LSB 在后。对于这项工作，你真的不需要知道这一点。还有其他与平台相关的问题，我几乎可以肯定您不需要知道（除非您将二进制文件从 Mac 移动到 PC 到 unix 机器）。如果您几乎阅读到`fread`文档的底部，则有一个标题为“阅读在其他系统上创建的文件”的部分讨论了这些问题以及如何处理它们。

我必须发表的另一条评论是，您说“读取/解析二进制文件比文本更快”。这不是真的（或者即使是这样，您也很可能不会注意到性能提升）。然而，就开发时间而言，读取/解析文本文件将为您节省大量时间。

# bash - 错误 D：我已经尝试了很多，从 bad elif 解析错误到现在。使固定？

> ID：13315541
> 
> 赞同：0
> 
> 时间：2012-11-09T20:32:45.707
> 
> 标签：bash, shell

> **可能重复：**
> [如果语句不遵循其条件](https://stackoverflow.com/questions/13301377/if-statement-is-not-following-its-conditional)

我认为这是我的 bc 或我的变量有问题，但我可能是错的。

这是我的一些代码。

```
#!/bin/bash
#this is a game that is two player and it is a race to get to 
#100 before the other player

echo "Player 1 name?"

read p1

echo "Player 2 name?"

read p2

echo "Okay $p1 and $p2\. $p1 will go first"

p1s=0
p2s=0
pt=1

while [ $pt -eq 1 ]; do

    echo "roll or stay"
    read choice

if [ $choice ="r" ]; then

    die=$(($RANDOM%6+1))
if [ $choice ="s" ]; then

    echo "Okay $p1 your score is $p1s"
    echo "$p2 turn now"
    sleep 1
    count=0
    pt=2

else

    pt=1

    fi
fi

if [ $die -eq 1 ]; then

    p1s=$(echo "$p1s-$count" |bc)
    echo "You rolled a 1\. Your score is $p1s"
    echo "$p2 turn now."
    sleep 1
    count=0
    pt=2

elif [ $die -gt 1 ]; then

    p1s=$(echo "$p1s+$die" |bc)
    count=$(echo "$count+$die" |bc)
    echo "You rolled a $die. Your score is $p1s"
    pt=1

fi

if [ $p1s -gt 99 ]; then

    echo "$p1 won. $p2 lost"
    echo "would you like to play again?"
    read again

else

if [ $again ="yes" ]; then

    echo "Okay one second."
    sleep 1
    clear
    bash num.sh

else

if [ $again = "no" ]; then

    exit
else

    echo "I guess no then?"
    exit
        fi
    fi
fi
done 
```

发生的事情是这样的

玩家 1 的名字？

1

玩家2的名字？

2

好的1和2。1会先走

滚动或停留

r

num.sh: 第 24 行: [: r: 一元运算符预期

num.sh：第 42 行：[：-eq：预期一元运算符

num.sh: 第 51 行: [: -gt: 一元运算符预期

好的一秒钟。

玩家 1 的名字？

在这里它会发现一堆错误等等。然后重新开始。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T21:09:08.910

我猜有条件检查**选择**变量有错误的语法，它应该写成：

```
if [ "$choice" -eq "r" ]; then
... 
```

或带有增强的括号

```
if [[ "$choice" == "r" ]]; then
... 
```

# java - 如何使用 JAXB (xjc) 为全局元素生成 POJO？

> ID：13315553
> 
> 赞同：2
> 
> 时间：2012-11-09T20:33:11.480
> 
> 标签：java, xsd

无论如何要为下面显示的“状态”元素生成 POJO？ObjectFactory 具有编组元素的功能，但是如何在没有“status.class”的情况下解组它以与 AXBContext.newInstance 一起使用？

```
<?xml version="1.0" ?>
<xs:schema 
    xmlns:xs="http://www.w3.org/2001/XMLSchema" 
    attributeFormDefault="qualified" elementFormDefault="qualified"
    version="1.0">        
<xs:element name="status" type="xs:string"/>
</xs:schema> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T20:38:53.193

您只需要`ObjectFactory`在用于引导`JAXBContext`.

```
JAXBContext jc = JAXBContext.newInstance(ObjectFactory.class); 
```

或者`JAXBContext`在生成的类的包名上创建：

```
JAXBContext jc = JAXBContext.newInstance("com.example.model"); 
```

# objective-c - 拆分视图控件导航视图

> ID：13315556
> 
> 赞同：0
> 
> 时间：2012-11-09T20:33:24.550
> 
> 标签：objective-c, ios, xcode, ipad

我第一次使用 iPad 的 SplitViewController 并尝试将我的 iPhone 应用程序转换为在 iPad 上运行。我在导航控制器中的名称、电话号码等部分中有几个单元格，我想适应拆分视图。我基本上希望用户查看他们可以在拆分视图的主视图上输入的字段，当他们点击一个单元格时，相应的视图应该出现在右侧的详细信息视图中。谁能指出我获得此功能的正确方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T20:40:56.167

如果您可以进行一些自学，我建议您在 XCode 中简单地创建一个 Master-Detail 应用程序。IMO 有一个非常好的模板，说明如何在拆分视图中设置主控制器和视图控制器，并且它会正确设置您的详细信息控制器以处理纵向时隐藏主控制器。

在您的代码中（我猜）您在 iPhone 版本中推送了一个新视图，您应该只检查设备类型（或是否`self.splitViewController`已设置），而不是推送一个新视图，而是修改细节。详细视图控制器将始终设置为`[self.splitViewController.viewControllers objectAtIndex: 1]`

如果您想对拆分视图控制器进行更细粒度的控制（在纵向时将主视图显示为 SplitView 的一部分，或者也将主视图隐藏在横向中），我建议您使用github 上优秀的[MGSplitViewController](https://github.com/mattgemmell/MGSplitViewController)

# c++ - 数组，将像素复制到正确的索引，算法

> ID：13315557
> 
> 赞同：-1
> 
> 时间：2012-11-09T20:33:24.437
> 
> 标签：c++, objective-c, ios, c

我的图像大小是 2x2，所以计数像素 = 4

1 个像素 - 4 个字节

所以我有一个 16 字节的数组 - mas[16] - width * height * 4 = 16

我想制作相同的图像，但尺寸更多是 2 的因数，这意味着不是 1 而是四个像素

新数组的大小为 64 字节 - newMas[16] - width*2 * height*2 * 4

问题，我无法将像素正确复制到 newMas，使用不同大小的图像正确复制像素 ![在此处输入图像描述](../Images/a0d343ca1ab3ef8e11d7fd3509243d00.png)

此代码将像素复制到 mas[16]

```
 size_t width = CGImageGetWidth(imgRef);
    size_t height = CGImageGetHeight(imgRef);
    const size_t bytesPerRow = width * 4;
    const size_t bitmapByteCount = bytesPerRow * height;
    size_t mas[bitmapByteCount];
    UInt8* data = (UInt8*)CGBitmapContextGetData(bmContext);

      for (size_t i = 0; i < bitmapByteCount; i +=4)
        {
            UInt8 a = data[i];
            UInt8 r = data[i + 1];
            UInt8 g = data[i + 2];
            UInt8 b = data[i + 3];

            mas[i]   = a;
            mas[i+1] = r;
            mas[i+2] = g;
            mas[i+3] = b;        

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T21:04:37.110

一般来说，使用内置的图像绘制 API 比编写自己的图像处理代码更快，更不容易出错。上述代码中至少存在三个潜在错误：

*   它假定行尾没有填充（iOS 似乎填充了 16 个字节的倍数）；您需要使用 CGImageGetBytesPerRow()。
*   它采用固定的像素格式。
*   它从 CGImage 获取宽度/高度，但从 CGBitmapContext 获取数据。

假设你有一个 UIImage，

```
CGRect r = {{0,0},img.size};
r.size.width *= 2;
r.size.height *= 2;
UIGraphicsBeginImageContext(r.size);
// This turns off interpolation in order to do pixel-doubling.
CGContextSetInterpolationQuality(UIGraphicsGetCurrentContext(), kCGInterpolationNone);
[img drawRect:r];
UIImage * bigImg = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

# matrix - 使用 CUDA 的矩阵转置

> ID：13315567
> 
> 赞同：2
> 
> 时间：2012-11-09T20:33:57.390
> 
> 标签：matrix, cuda

我需要转置一个方阵。我用矩阵测试程序：`a[i][j] = 0 if i>j, a[i][j] = if i<=j,`但结果表明并非所有元素都在正确的位置。

这是代码（main() 除外）：

```
#include <stdio.h> 
#include <stdlib.h>
__global__ void transpose_kernel (float *a, float *b, int n) {
    unsigned int ax = blockDim.x * blockIdx.x + threadIdx.x;
    unsigned int ay = blockDim.y * blockIdx.y + threadIdx.y;
    unsigned int aIdx = ax + n * ay;
    unsigned int bIdx = ay + n * ax;

    b[bIdx] = a[aIdx];
}

int transpose_host (float *a, float *b, int n) {
    int size = n * n * sizeof (float);
    float *aDev = NULL, *bDev = NULL;

    cudaError_t cuerr = cudaMalloc ((void**)&aDev, size);
    if (cuerr != cudaSuccess) {
        fprintf (stderr, "Cannot allocate GPU memory for aDev: %s\n", cudaGetErrorString (cuerr));
        return (-1);
    }

cuerr = cudaMalloc ((void**)&bDev, size);
if (cuerr != cudaSuccess) {
    fprintf (stderr, "Cannot allocate GPU memory for bDev: %s\n", cudaGetErrorString (cuerr));
    return (-1);
}

dim3 blockSize = dim3 (16, 16, 1);
dim3 gridSize = dim3 (n/16 + 1, n/16 + 1, 1);

cuerr = cudaMemcpy (aDev, a, size, cudaMemcpyHostToDevice);
if (cuerr != cudaSuccess) {
    fprintf (stderr, "Cannot copy data from a to aDev: %s\n", cudaGetErrorString (cuerr));
    return (-1);
}

transpose_kernel <<< gridSize, blockSize >>> (aDev, bDev, n);

cuerr = cudaGetLastError ();
if (cuerr != cudaSuccess) {
    fprintf (stderr, "Cannot launch CUDA kernel: %s\n", cudaGetErrorString (cuerr));
    return (-1);
}

cuerr = cudaDeviceSynchronize ();
if (cuerr != cudaSuccess) {
    fprintf (stderr, "Cannot synchronize CUDA kernel: %s\n", cudaGetErrorString (cuerr));
    return (-1);
}

cuerr = cudaMemcpy (b, bDev, size, cudaMemcpyDeviceToHost);
if (cuerr != cudaSuccess) {
    fprintf (stderr, "Cannot copy data from b to bDev: %s\n", cudaGetErrorString (cuerr));
    return (-1);
}

cudaFree (aDev);
cudaFree (bDev);

    return (0);
} 
```

为什么我的数组转置不正确？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T21:01:18.053

问题出在分配数组之外的“额外”线程中。

当你分配你的网格块时，你会四舍五入（事实上，即使事情平分，也会强制四舍五入到下一个整数：）

```
dim3 gridSize = dim3 (n/16 + 1, n/16 + 1, 1); 
```

这样总有线程的 ax 或 ay 落在 [0,n) 之外。因此，当您无论如何复制时，您就是将随机数据复制`a[aIdx]`到`b[bIdx]`内存中，实际上可能会根据调度覆盖“真实”数据。

您可以通过更改内核来检查此问题来解决此问题：

```
if (ax < n && ay < n)
    b[bIdx] = a[aIdx]; 
```

如果事情平均分配，您可能希望将网格大小的四舍五入更改为不四舍五入：

```
dim3 gridSize = dim3 ((n+15)/16, (n+15)/16, 1); 
```

# c - 带有字符串赋值的数组对象指针导致崩溃

> ID：13315568
> 
> 赞同：-2
> 
> 时间：2012-11-09T20:34:00.380
> 
> 标签：c, arrays, object, pointers, assignment-operator

所以我试图将字符串值分配给数组中的对象。

目标代码是：

```
typedef struct BiTreeData_ {
    char* word;
    int start_word_count;
    int end_word_count;
    int start_ranking;
    int end_ranking;
} BiTreeData; 
```

在我的 main 中，我使用以下方法创建了一个指向 BiTreeData 的指针数组：

```
BiTreeData **dataarray;
dataarray=(BiTreeData**)malloc(sizeof(BiTreeData*)*maintree.size); 
```

我尝试为结构中的一个变量赋值：

```
int z = dataarray[i]->start_word_count; 
```

程序崩溃。任何帮助，将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T20:38:02.493

你的代码在这里

```
BiTreeData **dataarray;

dataarray=(BiTreeData*)malloc(sizeof(BiTreeData)*maintree.size); 
```

为数组分配内存空间，`BitTreeData*`但您没有为`BitTreeData`对象本身分配任何空间。您只有一个指向未初始化内存的动态指针数组。

`BitTreeData`如果您只创建一个数组而不是指针数组，它可能会容易得多。您可以通过使用来实现这一点

```
 BiTreeData *dataarray;
 dataarray=(BiTreeData*)malloc(sizeof(BiTreeData)*maintree.size); 
```

这只是创建一个数组`BitTreeData` - 然后您可以像访问任何其他数组一样访问数组中的每个项目（现在记住数组`BitTreeData`不是`BitTreeData*`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T20:37:16.843

你有定义的原因吗

```
BiTreeData **dataarray; 
```

为了让它按照你想要的方式工作，我认为你需要将它定义为：

```
BiTreeData *dataarray; 
```

这将允许您 malloc 一个 BiTreeData 结构数组。

要创建结构数组：

```
BiTreeData *dataarray; 
```

在堆上为结构数组分配内存：

```
dataarray = malloc(sizeof(BiTreeData)*maintree.size); 
```

要设置数组中结构元素的值：

```
int z = 5;
dataarray[i].start_word_count = z; 
```

要从结构数组中提取值：

```
int z = dataarray[i].start_word_count; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T20:45:05.730

您必须为数组中的每个元素分配内存`dataarray`

```
dataarray[i] = (BiTreeData *) malloc ((sizeof(BiTreeData) 
```

您输入的以下代码

```
array=(BiTreeData**)malloc(sizeof(BiTreeData*)*maintree.size); 
```

使用此代码，您已经分配了指针数组。但是这些指针还没有指向任何内容。所以你必须为数组中的每个指针分配内存

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-09T20:37:13.367

由于您正在分配一个指针数组，因此元素的大小应该是 的大小`BiTreeData *`，而不是`BiTreeData`：

```
dataarray= (BiTreeData **)malloc(sizeof(BiTreeData *) * maintree.size); 
```

**编辑**
该问题已被编辑以纠正此错误。

# php - 导致解析错误的控制结构的 PHP 替代语法

> ID：13315569
> 
> 赞同：1
> 
> 时间：2012-11-09T20:34:02.197
> 
> 标签：php

使用以下 PHP 无法正常工作，显然是语法问题：

我不断收到此错误：

> 解析错误：语法错误，意外的 T_IF，期待 ':'

如您所见，我没有粘贴任何带有错误消息的行号。在保持此代码不变的同时，我不断收到此错误：

```
<?php if (tribe_is_multiday()): ?>

    <h2>multi day!</h2>

<?php else if (tribe_get_all_day()): ?>

    <h2>all day!</h2>

<?php else: ?>

    <h2>other</h2>

<?php endif; ?> 
```

这里有什么问题？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-09T20:36:42.180

[`elseif`](http://php.net/manual/en/control-structures.alternative-syntax.php)必须是一个词。删除空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T20:37:46.800

我认为您需要更改`else if`为`elseif`. 请参阅[http://www.php.net/manual/en/control-structures.alternative-syntax.php](http://www.php.net/manual/en/control-structures.alternative-syntax.php)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T20:38:21.223

使用此语法需要 elseif 命令而不是 else if

```
<?php elseif (tribe_get_all_day()): ?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-09T20:38:52.647

这应该有效，它`elseif`不是`else if`：

```
<?php if (tribe_is_multiday()): ?>
    <h2>multi day!</h2>
<?php elseif (tribe_get_all_day()): ?>
    <h2>all day!</h2>
<?php else: ?>
    <h2>other</h2>
<?php endif; ?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-09T20:52:12.653

这是 PHP 的有趣之处之一，请参阅[http://www.php.net/manual/en/control-structures.elseif.php](http://www.php.net/manual/en/control-structures.elseif.php)

另一方面，如果您使用替代方法

```
if(condition1) {
    ...
} else if(condition2) {
    ...
} else {
    ...
} 
```

虽然使用不正确，但上面的代码实际上会运行。这是我看到的一个问题，很多人在使用 PHP 之前先习惯了 JavaScript 这样的语言。它显然不适用于该`if ... endif`模式。在 PHP 中，“elseif”是正确的语法。

# c - C pthread_join 返回值

> ID：13315575
> 
> 赞同：9
> 
> 时间：2012-11-09T20:34:35.083
> 
> 标签：c, return, pthreads

我正在尝试从 pthread_join 打印返回值。我有以下代码：

```
 for(j = 0 ; j < i ; ++j){
        pthread_join( tid[j], returnValue);  /* BLOCK */
        printf("%d\n",  (int)&&returnValue);
} 
```

所有线程都存储在 tid 数组中，并正确创建和返回。在每个线程函数的末尾，我有以下行：

```
pthread_exit((void *)buf.st_size); 
```

我正在尝试返回我正在阅读的某个文件的大小。出于某种原因，我无法让它打印正确的值。这很可能是我试图从 pthread_join 函数调用中取消引用 void ** 的方式，但我不太确定如何去做。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-10T01:14:02.363

您需要将`void *`变量的地址传递给`pthread_join`-- 它将用退出值填充。然后应该`void *`将其转换回调用最初存储到其中的任何类型`pthread_exit`：

```
for(j = 0 ; j < i ; ++j) {
    void *returnValue;
    pthread_join( tid[j], &returnValue);  /* BLOCK */
    printf("%zd\n",  (size_t)(off_t)returnValue);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-08T17:49:01.357

这是有效的：

```
for(j = 0 ; j < i ; ++j) {
    int returnValue;
    pthread_join( tid[j], (void **)&returnValue);  /* BLOCK */
    printf("%d\n",  returnValue);
} 
```

# reflection - 翻译列表 列出

> ID：13315579
> 
> 赞同：2
> 
> 时间：2012-11-09T20:34:50.133
> 
> 标签：reflection, extension-methods, servicestack

理解了[translate](https://groups.google.com/forum/#!msg/servicestack/BF-egdVm3M8/0DXLIeDoVJEJ)的概念。将它用于将 DataModel 类型转换为 DTO 类型以用于表示层，并且工作正常。

```
objTypeB = objTypeA.TranslateTo<clsTypeB>(); 
```

TypeA 和 TypeB 之间的差异只是少数属性的数据类型，我在`Property Set`方法中对其进行了转换。

但是在上面的实现中，如果源是`List<TypeA>`，我会循环遍历每个以翻译`TypeB`并添加另一个`List<TypeB>`实例。是否可以这样做：

假设`resultListA`是一个`List<clsTypeA>`

```
var resultListB = resultListA.TranslateTo<List<clsTypeB>>(); 
```

我试过了，似乎没有转换。我得到一个空的`resultListB`. 有什么简单的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T20:45:26.213

这应该这样做：

```
var resultListB = resultListA.ConvertAll(x => x.TranslateTo<clsTypeB>()); 
```

# magento - 没有符号链接的 magento 多存储子文件夹

> ID：13315580
> 
> 赞同：3
> 
> 时间：2012-11-09T20:34:53.330
> 
> 标签：magento

可以在不需要创建符号链接的情况下设置带有子文件夹/子目录的 magento 多存储吗？

```
For example:
www.mainstore
www.mainstore/store1
www.mainstore/store2
www.mainstore/store3 
```

出于安全原因，一些托管服务提供商禁用了符号链接，通常的方法是为 magento 根目录中的每个商店创建一个文件夹，将 index.php 和 .htaccess 复制到其中，并为所有其他 magento 文件夹创建符号链接，如下所示：

```
ln -s /home/example/example.com/html/app/ app
ln -s /home/example/example.com/html/includes/ includes
ln -s /home/example/example.com/html/js/ js
ln -s /home/example/example.com/html/lib/ lib
ln -s /home/example/example.com/html/media/ media
ln -s /home/example/example.com/html/skin/ skin
ln -s /home/example/example.com/html/var/ var 
```

我认为 .htaccess 重写也许是可能的，但我不知道如何设置它。

感谢您的帮助！:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T21:19:49.740

看看[@Magento Multi store setup 子文件夹](http://www.dbits.be/blog/index.php/How-To/magento-multi-store-setup-sub-folders.html)

使用 .htaccess 使用同一文件夹设置多存储。

在 magento 中设置您的商店后，更新您的 .htaccess 文件

```
SetEnvIf Host www\.store1\.com MAGE_RUN_CODE=base
SetEnvIf Host www\.store1\.com MAGE_RUN_TYPE=website
SetEnvIf Host ^store1\.com MAGE_RUN_CODE=base
SetEnvIf Host ^store1\.com MAGE_RUN_TYPE=website

SetEnvIf Host www\.store2\.com MAGE_RUN_CODE=store2
SetEnvIf Host www\.store2\.com MAGE_RUN_TYPE=store
SetEnvIf Host ^store2\.com MAGE_RUN_CODE=store2
SetEnvIf Host ^store2\.com MAGE_RUN_TYPE=store 
```

阅读更多 @

*   [多站点、多域设置](http://www.magentocommerce.com/knowledge-base/entry/tutorial-multi-site-multi-domain-setup)

*   [使用多个网站或商店设置 MAGENTO](http://blog.baobaz.com/en/blog/setting-up-magento-with-multiple-websites-or-stores)

# jquery - 选择、更改多个表格单元格的 css

> ID：13315585
> 
> 赞同：0
> 
> 时间：2012-11-09T20:35:34.493
> 
> 标签：jquery, jquery-selectors

把事情写出来有助于我更好地理解。我试图弄清楚如何（或最好的方法）做到这一点。我需要编写一个脚本，将一个国家的语言与表格中的特定国家联系起来。

*   用户点击国家名称 (td)
*   出现语言列表（在单独表格中的 td 中）
*   该特定国家的语言和国家名称在两个表格中都是蓝色和粗体（活动状态）
*   当用户点击国家表中的不同 TD 时，当前 TD “活动”状态会恢复正常。

在 HTML 中手动创建表格并使用每个 TD 对的各个类将国家/地区与语言相关联。问题是，由于类的原因，我必须为每个 TD 编写代码。这可行，但我只希望选定的 TD 处于“活动状态”，而其他 TD 恢复正常。

CSS

```
td {cursor:pointer;}
td.active {color:blue;font-weight:bold;} 
```

HTML

```
<table id=tbl-country>
<tr><td class=”esp”&gt;Espana</td></tr>
<tr><td class=”france”&gt;France</td>  </tr>
<tr><td class=”italia”&gt;Italy</td></tr>
</table>
<table id=tbl-language>
                     <tr>< td class=”espanol">Espanol</td></tr>
     <tr> <td class=”francais”&gt;Francais</td> </tr>
     <tr> <td class=”italiano”&gt;Italiano</td></tr>
</table> 
```

JS

```
$(document).ready(function(){
    $(".tbl-language").hide();      
    $("#tbl-country td").click(function(){
        $(".tbl-language").show();
        });
    $("td.espana").click(function(){
        $(this).toggleClass("active");
        $("td.espanol").toggleClass("active");

    $("td.france").click(function(){
        $(this).toggleClass("active");
        $("td.francais").toggleClass("active");
        });

    $("td.italia").click(function(){
        $(this).toggleClass("active");
        $("td.italiano").toggleClass("active");
        });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T21:58:56.693

假设我正确理解了您的要求，我会这样做：

*   如果数据作为外部文件（json/js 数组）中的元组列表提供，我将遍历数据以在 HTML 上呈现它
*   如果要在 HTML 中对数据进行硬编码，我会按照您的方式进行:)

但是，我的 HTML 看起来像这样：

```
<table id="tbl-country">
<tr><td class="country" id="country-1" data-id="1">Espana</td></tr>
<tr><td class="country" id="country-2" data-id="2">France</td>  </tr>
<tr><td class="country" id="country-3" data-id="3">Italy</td></tr>
</table>
<table id="tbl-language">
     <tr><td class="lang" id="lang-1" data-id="1">Espanol</td></tr>
     <tr><td class="lang" id="lang-2" data-id="2">Francais</td></tr>
     <tr><td class="lang" id="lang-3" data-id="3">Italiano</td></tr>
</table> 
```

我的 JS 看起来像这样：

```
$(document).ready(function(){
    $("#tbl-language").hide();
    $("#tbl-country .country").click(function(){
        $("#tbl-language").show();
        var cId = $(this).data("id"); //jQuery >= 1.4.3 otherwise $(this).attr("data-id");
        //Remove active state from all
        $('#tbl-country .country').removeClass('active');
        $('#tbl-language .lang').removeClass('active');
        //Add active state only to the matching Country and Language
        $('#country-' + cId).addClass('active');
        $('#lang-' + cId).addClass('active');
    });
}); 
```

小提琴样本：http: [//jsfiddle.net/2xDyS/](http://jsfiddle.net/2xDyS/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T00:08:51.113

只要设置了 data-* 属性，我就会使用灵活的 jQuery 脚本来使用任何标记：

```
<ul id="list1" class="linked-list" data-related-to="#list2">
    <li data-key="en">sdfhgfghgh</li>
    <li data-key="ru">e5ge45</li>
    <li data-key="de">rtzhezhu</li>
    <li data-key="fr">rtgz4t6</li>
</ul>

<table id="list2" class="linked-list" data-related-to="#list1">
    <tr data-key="en"><td>sdfgdfghgfhj</td><td>3456345635</td></tr>
    <tr data-key="ru"><td>qwesqwes</td><td>567867897890</td></tr>
    <tr data-key="fr"><td>ijkzuikujui</td><td>123123123</td></tr>
</table> 
```

使用 jQuery 将两个 HTML 表格或列表相互链接，并在鼠标事件中突出显示两个表格中的相关行：

```
jQuery( document ).ready( function( $ ) {

    /* select cross-linked lists/tables via some class or a comma-separated list of id's */
    $( '.linked-list' ).each( function() {

        var $this = $( this );

        if( $this.attr( 'data-related-to' ) ) {

            var rows = $this.find( '[data-key]' );

            var relatedTo = $( $this.attr( 'data-related-to' ) );
            var foreignRows = relatedTo.find( '[data-key]' );

            rows.each( function() {

                var currentRow = $( this );

                currentRow.on( 'click', function() {

                    rows.removeClass( 'active' );
                    currentRow.addClass( 'active' );

                    foreignRows.removeClass( 'active' );
                    if( currentRow.attr( 'data-key' ) ) {
                        var foreignRow = foreignRows.filter( '[data-key="' + currentRow.attr( 'data-key' ) + '"]' );
                        foreignRow.addClass( 'active' );
                    }
                } );
            } );
        }

    } );

} ); 
```

# delphi - 通过编辑组件在 FileListbox 中搜索

> ID：13315589
> 
> 赞同：1
> 
> 时间：2012-11-09T20:35:44.567
> 
> 标签：delphi

我想知道如何在`Filelistbox`按编辑组件中搜索字符串。的内容`Filelistbox`大约是 100 个 txt 文件。我有一半的解决方案，但我想将结果添加`Filelistbox`到`Listbox`. 任何的想法？我必须使用 Listbox1 还是可以不使用它？感谢您的帮助，对不起我的英语:)！

```
procedure TForm1.Edit1Change(Sender: TObject);
begin
  If Edit1.Text = EmptyStr then
    ListBox1.Items := FileListBox1.Items
  else
  begin
    ListBox1.Clear;
    For I := 0 To Pred(FileListBox1.Items.Count) do
    begin
      If AnsiPos(Edit1.Text, FileListBox1.Items[I]) <> 0 then
      begin
        ListBox1.Items.Add(FileListBox1.Items[I]);
      end;
    end;
  end;
end; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T20:51:11.350

您可能可以使用内置`Mask`属性。我猜想像下面这样的东西会像你期望的那样过滤文件：

```
procedure TForm1.Edit1Change(Sender: TObject);
begin
  FileListBox1.Mask := '*' + Edit1.Text + '*';
end; 
```

请参阅有关掩码如何工作的[文档。](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.FileCtrl.TFileListBox.Mask)

# github - 如何在没有子域的情况下激活 GitHub 中的页面机制？

> ID：13315590
> 
> 赞同：3
> 
> 时间：2012-11-09T20:35:45.400
> 
> 标签：github

有没有办法在不通过子域的情况下激活 GitHub 中的 Pages 机器？一个实际案例可能在 GitHub Enterprise 实例中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-22T17:36:37.567

要在您的 github 企业服务器上查看 GitHub Pages（gh-pages 分支），请使用以下 URL 结构：

```
http://[github-enterprise-domain]/pages/[username]/[repo]/ 
```

1.  此 URL 结构不适用于 github.com。
2.  对于用户或组织页面，您不能创建“username.github.io”存储库。相反，您可以创建一个 repo 并将其命名为与您的用户名或组织相同的名称，然后使用：

    /pages/[用户名]/[用户名]/

第二个 [用户名] 只是您的仓库的名称。

# javascript - 如何将 2 个 Jquery 代码合二为一

> ID：13315591
> 
> 赞同：-6
> 
> 时间：2012-11-09T20:35:58.377
> 
> 标签：javascript, jquery, html, join, merge

我需要帮助将 2 个 jquery 代码合并为一个。我将在同一页面上使用这两个代码。这是我的基本 HTML 代码：

```
<div class="filter">
    <label><input type="checkbox" id="one" />One</label>
    <label><input type="checkbox" id="two" checked="checked" />Two</label>
    <label><input type="checkbox" id="three" />Three</label>
    <label><input type="checkbox" id="four" checked="checked" />Four</label>
    <label><input type="checkbox" id="five" />Five</label>
    <label><input type="checkbox" id="six" checked="checked" />Six</label>
    <label><input type="checkbox" id="seven" checked="checked" />Seven</label>
    <label><input type="checkbox" id="eight" />Eight</label>
    <label><input type="checkbox" id="nine" checked="checked" />Nine</label>
    <label><input type="checkbox" id="ten" />Ten</label>
</div> 
```

这是第一个 jquery 代码：

```
$(function() {
    var list = $("div.filter");
    var origOrder = list.children();
    var i, checked = document.createDocumentFragment();
    var unchecked = document.createDocumentFragment();
    for (i = 0; i < origOrder.length; i++) {
    if (origOrder[i].getElementsByTagName("input")[0].checked) {
            checked.appendChild(origOrder[i]);
        } else {
            unchecked.appendChild(origOrder[i]);
        }
    }
    list.append(checked).append(unchecked);
}); 
```

...这是第二个：

```
$(function() {
    var list = $("div.filter");
    var origOrder = list.children();
    list.on("click", ":checkbox", function() {
        var i, checked = document.createDocumentFragment();
        var unchecked = document.createDocumentFragment();
        for (i = 0; i < origOrder.length; i++) {
            if (origOrder[i].getElementsByTagName("input")[0].checked) {
                checked.appendChild(origOrder[i]);
            } else {
                unchecked.appendChild(origOrder[i]);
            }
        }
        list.append(checked).append(unchecked);
    });
}); 
```

这是[jsFiddle](http://jsfiddle.net/vNHMv/)链接。
谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T20:42:35.323

由于单击处理程序和其他脚本本质上是相同的代码，因此您可以将其中一个转换为函数并通过名称引用它。

```
$(function() {
    var list = $("div.filter");
    var origOrder = list.children();

    function doWhateverThisDoes() {
        var i, checked = document.createDocumentFragment();
        var unchecked = document.createDocumentFragment();
        for (i = 0; i < origOrder.length; i++) {
            if (origOrder[i].getElementsByTagName("input")[0].checked) {
                checked.appendChild(origOrder[i]);
            } else {
                unchecked.appendChild(origOrder[i]);
            }
        }
        list.append(checked).append(unchecked);
    }

    list.on('click', ':checkbox', doWhateverThisDoes);
    doWhateverThisDoes();
}); 
```

# jquery - 限制宽度/高度jquery容器

> ID：13315596
> 
> 赞同：-2
> 
> 时间：2012-11-09T20:36:22.397
> 
> 标签：jquery, height, limit

我下面的代码所做的就是对你的浏览器窗口进行高基准测试。

我的问题是我是否可以运行以仅调节主 Web 容器的真实宽度（例如 div #container 980px）。

```
$(window).resize(function(){
    var ventana = $(window).height();
    var altura = ventana / 2;
    $("#gallery").css('height', altura);
}); 
```

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T20:46:43.730

使用 an`if( $( window ).width() > x )`仅启用特定窗口宽度的调整大小效果：

```
var window = $( window );
window.resize( function() {
    if( window.width() > 980 )
    {
        var ventana = window.height();
        $( '#gallery' ).css( 'height', ventana / 2 );
    }
    else
    {
        /* reset for browsers that fire the event only once
         * at the end of the window resize action */
        $( '#gallery' ).css( 'height', 'auto' );
    }
} ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T20:40:53.170

当然，你用这条线询问浏览器窗口的高度

```
var ventana = $(window).height(); 
```

将其更改为

```
var ventana = $("#container").height(); 
```

获取您网站的高度。但是你可能想要宽度，所以你应该打电话`width()`。如果您要问的是仅在实际站点调整大小时运行代码（我不会说西班牙语，但我想我理解您的问题），您可以使用：

```
$("#container").resize(function(){
    //code
}); 
```

当然，当您设置固定宽度时，这将不起作用。

# c - GCC #define 语句字节顺序错误

> ID：13315616
> 
> 赞同：0
> 
> 时间：2012-11-09T20:37:43.107
> 
> 标签：c, gcc, x86, c-preprocessor, endianness

对于我正在从事的项目，我使用幻数。该宏用于定义一个

```
#define BOOTSIGNATURE 0xAA55 
```

但是，当我对生成的文件进行 HEXDUMP 处理时，应该说 AA55 它说 55 AA。

GCC 是在混淆字节顺序，还是我？该项目适用于 x86 处理器。AA 55 需要按特定顺序排列。我可以只交换字节，但我很好奇 GCC 为什么要这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T20:48:17.223

`0xAA55`是一个`int`，所以你受制于你的机器的字节序。我会将其存储为 char 数组：

```
const unsigned char BOOTSIGNATURE[] = {0xAA, 0x55}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T20:52:59.490

预处理器宏不会出现在编译的目标文件中——编译器根本看不到它们。如果您只是拥有它`#define`并且从未在任何地方使用过它，那么就不会留下任何痕迹。

如果您在某处的代码中使用它，它可能会在指令中显示为常量（例如，将常量加载到寄存器或内存中）。如果您使用它来初始化静态数据，它将在数据段中显示为常量：

```
// Global variable definition
#define BOOTSIGNATURE 0xAA55
uint16_t my_global = BOOTSIGNATURE; 
```

如果你编译上面的代码并查看数据段，它看起来像这样：

```
$ gcc -c test.c
$ objdump -s test.o
[...]
Contents of section .data:
 0000 55aa0000                             U... 
```

如您所见，这两个字节以 little-endian 顺序存储在内存中`55 AA`（前导`0000`是十六进制的段偏移量）。

如果要控制数据的字节顺序，请将其存储为显式字节数组：

```
uint8_t my_global[] = {0xAA, 0x55}; 
```

这将始终按指定的顺序存储字节。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T01:46:51.477

如果你想编写可移植的代码，你会使用函数来强制一个给定的字节顺序。例如，[这些函数](http://www.kernel.org/doc/man-pages/online/pages/man3/endian.3.html)允许您将本机主机字节顺序中的 16 位值转换为大端或小端，具体取决于您在文件中需要的顺序。

```
#define BOOTSIGNATURE 0xAA55

struct bootheader {
   uint16_t    signature_be;
} header;

header.signature_be = htobe16( BOOTSIGNATURE); 
```

我喜欢在具有非主机字节顺序的变量和结构元素上使用`_le`or后缀。`_be`

由于您需要大端，您可以使用`htons()`from `arpa/inet.h`，但我不是该方法的忠实粉丝。我不认为名称像 一样清晰`htobe16`，并且您没有用于转换为小端字节顺序的功能。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-11-09T21:01:22.653

最简单的解决方案：使用十六进制值的整数形式，因此相应的二进制将产生相同的幻数！在这种情况下，这将是 43605

# jquery - JQuery 会话插件错误 JavaScript 运行时错误：无法获取未定义或空引用的属性“集”

> ID：13315622
> 
> 赞同：0
> 
> 时间：2012-11-09T20:38:04.610
> 
> 标签：jquery, asp.net

我正在尝试 在我的 asp.net webform 上 使用[Jquery Session 插件对会话进行读/写。我添加了](https://github.com/AlexChittock/JQuery-Session-Plugin/blob/master/jquery.session.js)

```
<script src="Scripts/jquery.session.js"></script> to the top of my aspx page 
```

我在 Jquery 中使用下拉列表更改，尝试设置会话值如下

```
 $("#MainContent_ddlRequest").change(function () {
     $.session.set('GroupName', 'xyz');
                alert($.session.get('GenGroupName'));
}); 
```

但我收到错误我该`"0x800a138f - JavaScript runtime error: Unable to get property 'set' of undefined or null reference"` 如何解决这个错误

我什至尝试如下这样。但我仍然遇到同样的错误

```
 <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.2.js" type="text/javascript"></script>
    <script type="text/javascript">

        $(document).ready(function () {

            $.session.set('time', new Date());
            alert($.session.get('time'));
}); 
```

这是我下面的整个 asp.net 页面源

```
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head><title>

</title></head>
<body>
    <form method="post" action="WebForm1.aspx" id="form1">
<div class="aspNetHidden">
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwULLTE2MTY2ODcyMjlkZKyCMgqniM/aldukh4YFosrxeF/cGpC1q4aFWjLdll/R" />
</div>

    <div>
    <input id="butSet" type="button" value="SET" />
         <input id="butGet" type="button" value="GET" />
    </div>
    </form>
</body>
</html>

    <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.2.js" type="text/javascript"></script>
 <script type="text/javascript">

     $(document).ready(function () {
         $('#butSet').click(function () {
             $.session.set('time', new Date());
         });

         $('#butGet').click(function () {
             alert($.session.get('time'));
         });

     });
     </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T20:43:17.347

您访问它的 URL 是什么？如果您的脚本 URL 中没有前导`/`，您可能会在尝试加载脚本时遇到 404 错误。

最好做类似的事情`src="<%=Server.MapPath("~/Scripts/...") %>"`

请参阅：http: [//msdn.microsoft.com/en-us/library/ms178116%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/ms178116%28v=vs.100%29.aspx)

# ssl - Netty SSL 主机名验证支持

> ID：13315623
> 
> 赞同：1
> 
> 时间：2012-11-09T20:38:06.717
> 
> 标签：ssl, netty, hostname

据我所知，没有“标志”或配置设置可用于在 Netty 中启用 SSL 主机名验证。我见过的示例使用 SslHandler.handshake() 返回的 ChannelFuture 添加自定义实现：

```
ChannelFuture handshakeFuture = sslHandler.handshake();
handshakeFuture.addListener(new ChannelFutureListener()
{
    public void operationComplete(ChannelFuture future) throws Exception
    {
        if (future.isSuccess())
        {
            // get peer certs, verify CN (or SAN extension, or..?) against requested domain
            ... 
```

我只是想确保我在正确的轨道上，并且我没有错过一种简单地“启用”主机名验证的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T21:25:38.633

如果您使用的是 Java 7，则可以通过配置`SSLSocket`或`SSLEngine`通过默认信任管理器为您执行此操作。（这与 Netty 无关。）

像这样的东西应该工作：

```
SSLContext sslContext = SSLContext.getDefault();
SSLEngine sslEngine = sslContext.createSSLEngine();

SSLParameters sslParams = new SSLParameters();
sslParams.setEndpointIdentificationAlgorithm("HTTPS");
sslEngine.setSSLParameters(sslParams); 
```

`SSLEngine`实例可以作为参数传递给`SslHandler`构造函数，如本[例](http://docs.jboss.org/netty/3.2/xref/org/jboss/netty/example/securechat/SecureChatClientPipelineFactory.html)中所述。

端点识别算法可以是 HTTPS 或 LDAP。对于其他协议，HTTPS 规则应该是相当合理的。

（您当然可以通过使用错误的主机名连接到该主机来检查它是否有效，例如使用带有 IP 地址而不是主机名的 URL，假设证书不包含主题备用名称 IP 地址条目为了它。）

# mysql - 在更新任何表之前创建 MySQL 触发器

> ID：13315624
> 
> 赞同：1
> 
> 时间：2012-11-09T20:38:12.897
> 
> 标签：mysql, triggers, interceptor

我想创建一个触发器来拦截数据库中任何表的任何更新，有没有办法不指定正在为其创建触发器的表，以便它可以拦截所有更新？

就像是：

```
 create trigger interceptor
 after update on ANY_TABLE
 .... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T20:48:39.683

这是不可能的，您必须为每个表创建单独的触发器。

然而，正如上面的评论所说，每个触发器都可以调用相同的存储过程：[在 MySQL 5.1 中需要一个抽象触发器来更新审计日志](https://stackoverflow.com/questions/3437000)

您可以更进一步，创建一个循环遍历数据库中所有表的过程，使用`information_schema`、删除然后（重新）自动创建触发器，然后在每次更新数据库结构时调用此脚本。

# .htaccess - 拒绝访问除 index.php 以外的所有文件，但允许 GET 变量

> ID：13315637
> 
> 赞同：2
> 
> 时间：2012-11-09T20:38:40.477
> 
> 标签：.htaccess, rewrite

基本上我不希望访问我网站的人获取所有文件，但是我在互联网上尝试和发现的所有东西都不允许在 index.php 之后使用 GET 变量。我正在使用重写使 domain.com/lol 转到 index.php?lol。

这是我当前的 .htaccess 文件，如果您想修改它以使我更容易，也请继续。

```
RewriteEngine On

RewriteCond %{HTTP_HOST} ^www\.domain\.com [NC]

RewriteRule .? http://domain.com%{REQUEST_URI} [L,R=301]
RewriteRule ^act/(.*)$ index.php?act=$1
RewriteRule ^code/(.*)$ index.php?code=$1
RewriteRule ^login$ index.php?login
RewriteRule ^logout$ index.php?logout
RewriteRule ^add$ index.php?add
RewriteRule ^tac$ index.php?tac
RewriteRule ^profile$ index.php?profile 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T12:44:11.243

以下规则停止对 index.php 的直接请求（带或不带）参数：

```
# block direct requests to index.php and redirect it to /
RewriteCond %{ENV:REDIRECT_STATUS} =""
RewriteRule ^index.php$ / 
```

如果需要，您可以更改重写目标和/或根据确切允许的内容和不允许的内容添加更多条件。

# delphi - Delphi TIdHTTP POST 与 GET 相比非常慢

> ID：13315639
> 
> 赞同：1
> 
> 时间：2012-11-09T20:38:45.907
> 
> 标签：delphi, http, indy

德尔福 2009

我最近从多个 GET 请求切换到单个 POST，我认为这会更有效，但结果却慢得多。它从 1-2 秒变为 8-10 秒，我不知道为什么。

例子

```
unit Unit4;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls, IdBaseComponent, IdComponent, IdTCPConnection, IdTCPClient,
  IdHTTP;

type
  TForm4 = class(TForm)
    d: TIdHTTP;
    Memo1: TMemo;
    Button1: TButton;
    procedure Button1Click(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Form4: TForm4;

implementation

{$R *.dfm}

procedure TForm4.Button1Click(Sender: TObject);
var m: tmemorystream;
    data: tstringlist;
    i: integer;
begin
  memo1.Clear;

  m:=tmemorystream.Create;
  data:=tstringlist.Create;
  data.Add(format('test1');
  data.Add(format('test2');

  d.Post('http://www.someurl.com/test.php', data, m);
  m.Position:=0;
  data.LoadFromStream(m);
  memo1.Lines.Add('Received:');

  for i := 0 to data.count - 1 do
    memo1.Lines.Add(data[i]);

  m.Free;
  data.Free;
end;

end. 
```

并在服务器上

```
<?php
echo "1\n";
?> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-10T02:53:44.210

确保在属性`hoKeepOriginalProtocol`中启用了标志。`TIdHTTP.HTTPOptions`默认情况下`TIdHTTP.Post()`，无论是否使用 HTTP keep-alives，每次调用时都会强制关闭连接，除非启用了该标志。断开和重新连接的额外开销可能会导致额外的时间。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-10T00:53:53.290

我使用不同的 url 做了一个简单的测试：

```
d.Post('http://whatismyip.org', data, m); // Using DNS name 
```

或者

```
d.Post('http://54.242.203.46', data, m); // Using IP 
```

帖子花了大约 1 秒，所以我认为您的问题可能与 Indy 无关。我的建议：

*   检查 PC 的 DNS 解析。尝试使用IP地址看是否有差异；
*   尝试使用外部工具（curl、vbscript 等）向同一站点发出 POST 请求并测量时间；
*   使用网络监控工具（Wireshark、MS Network Monitor 等）查看服务器响应您的 POST 请求所需的时间，或者客户端在解析地址和实际的 Post 请求之间花费的时间。

这些步骤可以缩小问题所在。

如果这些都没有帮助 - 尝试将 Indy 升级到最新版本。

# linux-kernel - linux API 的 set_memory_uc() 函数

> ID：13315644
> 
> 赞同：2
> 
> 时间：2012-11-09T20:39:08.323
> 
> 标签：linux-kernel

我从用户空间知道一些虚拟地址，我想取消缓存空间。我尝试在内核模块中使用 API set_memory_uc。

我查看了内核代码，发现这个 API 接受虚拟地址作为第一个参数，但在这个 API 中它使用 __pa() 将其转换为 PA。但是， __pa() 仅对内核空间虚拟地址有效，对吗？所以我想知道是否可以使用 set_memory_uc 和用户空间虚拟地址作为参数。

我期望的是这样的功能：

uncache(VA) VA是用户空间的虚拟地址，这个函数根据虚拟地址uncache一个页面（我先mlock这个页面）。

谢谢！

# javascript - Javascript/JQuery 变量范围

> ID：13315648
> 
> 赞同：-2
> 
> 时间：2012-11-09T20:39:22.240
> 
> 标签：javascript, jquery, scope

我有一些变量要在 jQuery 的焦点事件中使用。我如何声明它们以便它们在焦点回调中？

```
var height = 72;

$('#myfield').focus(function() {
    heightinfeet = height / 12;
    alert(heightinfeet);
}); 
```

对我来说，高度始终为 0。有几个变量要传递，我尝试将其用作属性的对象，但也没有传递它们

/ *******真实代码******* /

```
function GOPRO_pfFieldConfirmation(oField1, oField2, oMarkerField, bCaseSens) {

var GOPRO_iFieldLen1 = $(oField1).val().length;
var GOPRO_iFieldLen2 = $(oField2).val().length;
var GOPRO_sFieldVal1 = $(oField1).val();
var GOPRO_sFieldVal2 = $(oField2).val();
var GOPRO_sFieldSub = GOPRO_sFieldVal1.substring(0, GOPRO_iFieldLen2);

//if not case sensitive, make all upper case

if (bCaseSens == false) {
    GOPRO_sFieldVal1 = GOPRO_sFieldVal1.toUpperCase();
    GOPRO_sFieldVal2 = GOPRO_sFieldVal2.toUpperCase();
    GOPRO_sFieldSub = GOPRO_sFieldSub.toUpperCase();

}

$(oField1).focus( function() {
    console.log(GOPRO_iFieldLen1);
    if ((GOPRO_sFieldVal1 == GOPRO_sFieldVal2) && GOPRO_iFieldLen1 > 0) {
        GreenMarker();
    }
    else if (GOPRO_iFieldLen1 > 0 && GOPRO_iFieldLen2 > 0) {
        RedMarker();
    }
    else {
        NoMarker();
    }

});

...

    GOPRO_pfFieldConfirmation($('#reg_email'), $('#reg_email2'), $('.field_confirm:eq(3)'), false); 
```

console.log 始终为 0，实际上所有预定义的变量都返回 0 或空字符串

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T21:21:35.633

这不是范围问题，这是正在发生的事情：

1.  你调用这个函数来选择你的元素并将值的长度存储在输入框中
2.  后来一个人在盒子空的时候把注意力集中在盒子里，并且`0`因为之前存储的东西被记录下来
3.  他们在方框中打字，模糊不清，再次聚焦；这次你仍然得到`0`，因为这仍然是存储在函数初始调用时的内容，该变量从未更新。

你需要做更多这样的事情：

```
function GOPRO_pfFieldConfirmation(oField1, oField2, oMarkerField, bCaseSens) {
    var $field1 = $(oField1), $field2 = $(oField2);

    $field1.focus(function() {
        //put these in the focus event, so they are bound everytime.
        var GOPRO_sFieldVal1 = $field1.val();
        var GOPRO_sFieldVal2 = $field2.val();
        var GOPRO_iFieldLen1 = GOPRO_sFieldVal1.length;
        var GOPRO_iFieldLen2 = GOPRO_sFieldVal2.length;
        var GOPRO_sFieldSub = GOPRO_sFieldVal1.substring(0, GOPRO_iFieldLen2);
        //if not case sensitive, make all upper case  
        if (bCaseSens == false) {
            GOPRO_sFieldVal1 = GOPRO_sFieldVal1.toUpperCase();
            GOPRO_sFieldVal2 = GOPRO_sFieldVal2.toUpperCase();
            GOPRO_sFieldSub = GOPRO_sFieldSub.toUpperCase();
        }

        console.log(GOPRO_iFieldLen1);
        if ((GOPRO_sFieldVal1 == GOPRO_sFieldVal2) && GOPRO_iFieldLen1 > 0) {
            //GreenMarker();
        } else if (GOPRO_iFieldLen1 > 0 && GOPRO_iFieldLen2 > 0) {
            //RedMarker();
        } else {
            //NoMarker();
        }
    });
}

GOPRO_pfFieldConfirmation('#reg_email', '#reg_email2', '.field_confirm:eq(3)', false); 
```

我添加了一些其他的东西，例如：缓存 jquery 对象，以便您只创建一次，减少对`.val()`.

你可以看到它工作的[jsFiddle](http://jsfiddle.net/vFHdU/1/)。当您第一次聚焦到框时它仍然是 0，但是聚焦到带有文本的框会产生预期的结果。

# java - 如何检测可用于普通窗口的主显示器的可用部分？

> ID：13315650
> 
> 赞同：0
> 
> 时间：2012-11-09T20:39:31.147
> 
> 标签：java, desktop

在大多数桌面环境中，您有一个或多个操作栏，有时还有停靠窗口。

最大化的窗口将使用屏幕侧面这些不同事物未使用的所有空间。这就是我所说的“可用空间”

是否有 java API 来检测可用空间，并在可能的情况下监听可能发生的变化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T21:00:11.613

基本思想是获取屏幕设备的引用并从屏幕边界中减去屏幕插图，如下所示

```
GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();
GraphicsDevice gd = ge.getDefaultScreenDevice();

Rectangle bounds = new Rectangle(0, 0, 0, 0);

if (gd != null) {

    GraphicsConfiguration gc = gd.getDefaultConfiguration();
    bounds = gc.getBounds();

    Insets insets = Toolkit.getDefaultToolkit().getScreenInsets(gc);

    bounds.x += insets.left;
    bounds.y += insets.top;
    bounds.width -= (insets.left + insets.right);
    bounds.height -= (insets.top + insets.bottom);

} 
```

现在，您的下一个问题将是确定您真正想要的屏幕设备，此示例简单使用默认屏幕；）

# asp.net - 从 sftp 访问用户计算机或托管服务器目录

> ID：13315654
> 
> 赞同：1
> 
> 时间：2012-11-09T20:39:55.140
> 
> 标签：asp.net, c#-4.0, sharpssh

我有一个 sftp 服务器，我使用 c#.NET 和 SharpSSH 在用户和 sftp 文件之间开发了一个接口网站，用于下载、上传文件操作等

这是我的问题：将文件从 sftp 下载到我的计算机非常完美。它将文件复制到我想要的任何地方。但是在我从服务器发布网站后，它就不起作用了。因为我无法将文件复制到该服务器或客户端计算机中的目录。我认为不允许默认..

如何解决使用sharpssh从sftp下载文件到客户端计算机的问题？谢谢..

# amazon-s3 - 带有 s3 的文件选择器 url

> ID：13315655
> 
> 赞同：1
> 
> 时间：2012-11-09T20:39:56.697
> 
> 标签：amazon-s3, filepicker

我正在寻找构建一个照片管理应用程序，我决定将 Filepicker.io 与 Amazon s3 一起使用来管理静态文件的上传/托管。我计划让 Filepicker 处理将图像上传到 s3，然后我会将图像的 url 存储在数据库中——这些 url 将嵌入到模板中。例如，

HTML：

```
<input type="file" name="datafile">
  {{#if src}}
  <img src='{{src}}'>
  {{/if}} 
```

Javascript：

```
'change input' : function (e, t) {

      var file = e.currentTarget.files[0];
      if (file) {
        filepicker.store(file, function(fp){
          // Set URL to fpURL 
        }, function(err){
          console.log('error', err);
        }, function(progress){
          console.log('loading', progress);
        });
      }

    } 
```

我的问题：将文件选择器 url 存储在数据库中更好吗？或者我应该保存`key`可以直接链接到 s3 的 url？

我的 filePicker 成功对象如下所示：

```
{url: "https://www.filepicker.io/api/file/wppeyWAUQaaX0HPgXQ", 
size: 76511, type: "image/png", 
key: "EdqmSpbDQziIvSfI4g_logo.png", 
filename: "logo.png"} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T18:43:03.790

我们建议直接存储 URL，这样您就可以利用我们在 URL 之上提供的[转换功能和其他功能。](https://developers.filepicker.io/docs/web/#fpurl-images)另外，您不必直接使用 S3 API，而是可以在 url 上执行 GET 和 POST

# c - Arduino USB 键盘 - 在代码中发送 Fn（功能键）

> ID：13315662
> 
> 赞同：4
> 
> 时间：2012-11-09T20:40:33.780
> 
> 标签：c, arduino

我是 Arduino 编码的新手。我正在构建一个带有将按键发送到计算机的按钮的小型设备。这将通过 Teensy 2.0 和 Arduino 模拟 USB 键盘来完成。

任何人都可以帮助我（或者是否有可能）使用 Arduino 发送 Fn（功能）按键？我在任何地方都无法在网上找到任何东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T09:44:16.880

你不能。Fn 键由键盘内部处理。它永远不会发送到计算机。请参阅[此说明](http://en.wikipedia.org/wiki/Fn_key#Technical_details)。

# sqlite - 在 SQLite 中插入联结表

> ID：13315672
> 
> 赞同：1
> 
> 时间：2012-11-09T20:41:29.413
> 
> 标签：sqlite, junction

我尝试了各种方法。这对我来说很有意义，但是当我尝试执行时`insert into listsandplayers`，它告诉我不`listID`存在列。我用我的`insert into listsandplayers`陈述尝试了几种不同的方法，并继续得到这个错误。

我已经在这里发布了我认为该声明应该最有效的方式。这是此处显示的最后一条语句。

```
CREATE TABLE IF NOT EXISTS 
   lists (listID INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, listName VARCHAR(30));

CREATE TABLE IF NOT EXISTS 
   players(playerID INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, playerName VARCHAR);

CREATE TABLE IF NOT EXISTS 
    listsandplayers(listsandplayersID INTEGER NOT NULL, 
                    listID INTEGER REFERENCES lists (listID),  
                    playerID INTEGER REFERENCES players (playerID));

INSERT INTO lists (listName) VALUES('Los Angeles Dodgers');

INSERT INTO players (playerName) VALUES('Clayton Kershaw');

INSERT INTO listsandplayers (listID, playerID) VALUES(listID, playerID)   
WHERE listName = 'Los Angeles Dodgers'  
AND playerName = 'Clayton Kershaw'  
NATURAL JOIN lists  
NATURAL JOIN players; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T11:10:03.667

这不是[命令](http://www.sqlite.org/lang_insert.html)[的有效语法`INSERT`](http://www.sqlite.org/lang_insert.html)。试试这个：

```
INSERT INTO ListsAndPlayers (ListsAndPlayersID, ListID, PlayerID)
VALUES (42,
        (SELECT ListID FROM Lists WHERE ListName = 'Los Angeles Dodgers'),
        (SELECT PlayerID FROM Players WHERE PlayerName = 'Clayton Kershaw')); 
```

如果您已将`ListsAndPlayersID`列声明为`INTEGER PRIMARY KEY`，SQLite 将自动生成一个值。（您也可以删除该`ListsAndPlayersID`列并仅使用`ListID`and`PlayerID`的组合作为主键。）

# javascript - javascript成绩计算和平均

> ID：13315678
> 
> 赞同：-3
> 
> 时间：2012-11-09T20:41:44.327
> 
> 标签：javascript

这是我的 HTML 代码，由于某种原因，这段代码只需要三个值，它不会超过三个值，当我尝试输入更多时，它只显示我输入的前三个值。我的代码有问题，但我无法弄清楚。请帮忙。

```
var gradeCounter, gradeValue, total, average, grade;

total = 2;
gradeCounter = 0;
grade = prompt("enter grade, -1 to Quit:", "0");
gradeValue = parseInt(grade);

while (gradeValue != -1 && gradeValue > 65) document.write("<br>" + gradeValue + " pass</br>");
  total = total + gradeValue;
  gradeCounter = gradeCounter + 1;
  grade = prompt("enter grade, -1 to Quit:", "0");
  gradeValue = parseInt(grade);
}

if (gradeCounter != 0 && gradeValue <= 65) {
    document.write("<br>" + gradeValue + " fail</br>");

    total = total + gradeValue;
    gradeCounter = gradeCounter + 1;
    grade = prompt("enter grade, -1 to Quit:", "0");
    gradeValue = parseInt(grade);
    average = total / gradeCounter;

    document.write("<br>total grade: " + gradeCounter + "</bt>");
    document.write("<br>average passing grade:" + average + "</br>");
} 
else document.write("total grade:" + 0); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T22:44:44.877

你不需要那么多代码。

我已经更新了你的代码，它应该可以工作。看看它。

JsFiddle：http: [//jsfiddle.net/tDjA9/1/embedded/result/](http://jsfiddle.net/tDjA9/1/embedded/result/)

```
var gradeCounter =0, gradeValue = 0, total = 0, average, grade;

//Loop
while (gradeValue != -1 && gradeValue <= 65) {

    //Prompt the user
    grade = prompt("enter grade, -1 to Quit:", "0");
    //Parse the prompt result to a int
    gradeValue = parseInt(grade);

    //Check if gradeValue is smaller than 0
    if(gradeValue < 0){
        //If it is, then we can finish adding grade
        document.write("<br>Finish adding grades");
    } else{
       //Add gradeValue to total score
       total += gradeValue;
       //Increment the number of grades by 1
       gradeCounter += 1;
       //Output to the user
       document.write("<br>" + gradeValue + " pass</br>");
   }
}

//Calculation
total = total + gradeValue;
average = total / gradeCounter;

//Output
document.write("<br>total grade: " + gradeCounter + "</bt>");
document.write("<br>average passing grade:" + average + "</br>");​ 
```

# mapreduce - Couchdb：关系数据库功能

> ID：13315680
> 
> 赞同：3
> 
> 时间：2012-11-09T20:41:49.957
> 
> 标签：mapreduce, couchdb, couchapp, non-relational-database

假设我有一个包含 239800 个文档的列表，如下所示：

```
{
    name: somename,
    data:{age:someage, income:somevalue, height:someheight, dumplings_consumed:somenumber}
} 
```

我知道我可以通过`doc.data.age`, `doc.data.income`,来索引文档`height`，`dumplings_consumed`并在为每个参数提供一个范围之后获取文档列表，但是如何获得如下查询的结果：

年龄在 25 到 30 岁之间、收入低于 10 美元且身高超过 7 英尺的医生名单？

有没有办法让多个索引工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T23:01:46.297

假设您的所有三个示例查询参数都需要保持动态，您将无法使用单个 CouchDB 查询进行这样的连接。最简单的策略是发出一个索引，让您缩小数据的“最大”方面/维度，然后在您的应用程序代码或 _list 函数中过滤掉其余部分。

现在，为了过滤数字数据的*两个*方面，[GeoCouch](https://github.com/couchbase/geocouch)可能会被使用——它提供了一个通用的二维索引，而不仅限于纬度和经度！因此，您将发出包含（例如）映射到 x 和 y 的“年龄”和“收入”的点。然后，您将使用前两个“中间”参数查询一个 bbox，然后您只需在应用程序端过滤掉高度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-03T06:00:47.013

让我们看一下：

[http://guide.couchdb.org/draft/views.html](http://guide.couchdb.org/draft/views.html)

您可以使用任何您想要的表达式（javascript 代码）进行搜索并用它来索引文档。

例如，通过蒲团，您可以创建一个测试数据库，并根据您的问题添加以下两个文档：

{“_id”：“36fef0472fb7eec035c87e4f4b0381bf”，“_rev”：“12-4ef9014a3670a7e6acd58ad92d26fc1e”，“数据”：{“年龄”：6，“收入”：10，“身高”：20，“dumplings_consumed”：5}，“名称”：“乔”}

{“_id”：“36fef0472fb7eec035c87e4f4b038ffa”，“_rev”：“8-f0a0a51b830bf3d4bc3ec5697440792f”，“姓名”：“迈克”，“数据”：{“年龄”：27，“收入”：9，“身高”：78， “dumplings_consumed”：256 } }

您只需要使用 Futon 访问您的数据库并使用以下 Map 函数创建一个临时视图：

function(doc) { var 年龄、收入、身高；if (doc.name && doc.data && doc.data.age && doc.data.income && doc.data.height) { if ( doc.data.age > 25 && doc.data.age < 30 && doc.data .income < 10 && doc.data.height > 7) { emit(doc.name, doc.data); } } }

只需运行，您就会得到结果。

永久的观点是，第一次执行请求时，内部的 B-tree 是建立起来的，这需要时间。即使将文档添加到数据库中，进一步的执行也应该非常快（只要它们的数量是总数的一小部分）

# c++ - 调用 C++ 中类中包含的方法，主变量和函数位于

> ID：13315682
> 
> 赞同：0
> 
> 时间：2012-11-09T20:42:08.223
> 
> 标签：c++, xcode, class, methods, main

下面是我遇到的情况。我需要调用一个类（ManipFunction）中包含的方法（即manip_A（）），主函数中提供了一些参数。这些参数是变量（一些双精度）和一个函数（即 func）。有人可以帮忙吗？谢谢你。

```
// manip.hpp
class ManipFunction
{
// for example ..
private:
    // Initialization function ...

    // Copy constructors ...

    // Core functions ...
    double manip_A();
    double manip_B();

public:
    // Public member data ...
    ...
    // Constructors ...
    ...
    // Destructors ...
    ...
    // Assignment operator ...
}; 
```

.

```
// manip.cpp
#include"manip.hpp"

// Core functions
double ManipFunction::manip_A() const
{
    // Apply manip_A() to the function and parameters provided in manip_test.cpp
}

double ManipFunction::manip_B() const
{
    // Apply manip_B() to the function and parameters provided in manip_test.cpp
}

// Initialisation
...
// Copy constuctor
...
// Destructor
...
// Deep copy
...
} 
```

.

```
// manip_test.cpp

#include<iostream>
// Other required system includes

int main()
{
    double varA = 1.0;
    double VarB = 2.5;

    double func (double x) {return x * x};

    double manip_A_Test = ManipFunction::manip_A(func, varA, VarB);

    std::cout << "Result of Manip_A over function func: " << manip_A_Test <<  endl;

        return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T20:56:34.817

OK 这里有几个误区。

1) 函数内部的函数不是合法的 C++。

```
int main()
{
    ...
    double func (double x) {return x * x};
    ...
} 
```

这是不允许的。移出`func`主线。尾随`;`也不合法。

2) 要调用 ManipFunction 方法，您需要一个 ManipFunction*对象*。您的代码没有提供。

```
int main()
{
    ...
    ManipFunction mf; // a ManipFunction object
    mf.manip_A(func, varA, VarB); // call the manip_A method on the ManipFunction object
    ...
} 
```

3）虽然你说你想要`manip_A`有参数，但你还没有声明任何参数。这里我给出了`manip_A`两个参数，都是 type `double`。

```
class ManipFunction
{
    double manip_A(double x, double y);
    ...
}; 
```

4）虽然你说你想`manip_A`从 main 内部调用，但在你的代码中你已经声明`manip_A`为`private`. `public`如果您想直接从 main 调用它，则必须如此。

最后，我只想说发布您的真实代码可能更好，而不是我认为您发布的虚构代码。

希望这可以帮助

# html - Facebook 说 app_id 无效

> ID：13315684
> 
> 赞同：0
> 
> 时间：2012-11-09T20:42:11.117
> 
> 标签：html, facebook

我正在尝试在我的网站[http://www.luof.co.uk](http://www.luof.co.uk)上安装见解，并已验证它确实是同一个 ID，但是，我收到此消息...

“在“fb:app_id”元标记中指定的应用 ID“XXX,XXX,XXX,XXX,XXX”无效。”

任何想法为什么会发生这种情况？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T20:44:09.097

您链接的页面上没有`fb:app_id`元标记 - 只有`fb:admins`存在。

添加元标记，它应该开始工作，请参阅 Facebook 的[入门指南](https://developers.facebook.com/docs/insights/)以获取分步说明。

```
<meta property="fb:admins" content="user_id" />
<meta property="fb:app_id" content="your_app_id" /> 
```

# juice-ui - JuiceUI - 跨项目共享

> ID：13315685
> 
> 赞同：1
> 
> 时间：2012-11-09T20:42:19.520
> 
> 标签：juice-ui

是否有一种已知的方法可以将 JuiceUI 配置为存在于一个 Visual Studio Web 应用程序项目中并从另一个 Web 应用程序引用它？我们希望所有 Web 应用程序都有一个集中的位置来使用它，而不必在每个项目中安装 JUiceUI.dll 和 Scripts 文件夹。

谢谢

# ruby-on-rails - 无法使用 authorize.net CIM 创建客户资料和使用开发测试帐户的活动商家

> ID：13315687
> 
> 赞同：2
> 
> 时间：2012-11-09T20:42:38.427
> 
> 标签：ruby-on-rails, authorize.net, activemerchant

我使用 authorize.net 创建了一个开发者帐户，我正在尝试通过 activemerchant 创建一个客户资料。

```
> GATEWAY.create_customer_profile(:profile => { :merchant_customer_id => "123foobar", :email => "lol@lol.com" })

#<ActiveMerchant::Billing::Response:0x007fc3a2663e20 @params={"messages"=>
{"result_code"=>"Error", "message"=>{"code"=>"E00007", "text"=>"User authentication failed 
due to invalid authentication values."}}}, @message="User authentication failed due to 
invalid authentication values.", @success=false, @test=false, @authorization=nil, 
@fraud_review=nil,
@avs_result={"code"=>nil, "message"=>nil, "street_match"=>nil, "postal_match"=>nil},
@cvv_result={"code"=>nil, "message"=>nil}> 
```

我查看了那个错误代码，它说：

```
API Error Code: E00007
Error Code Text: User authentication failed due to invalid authentication values.
Description: The name/and or transaction key is invalid.
Other Tips: Try switching between production and developer test URL's. The test URL     
requires a separate developer test account, which can be set up by filling out the following form: http://developer.authorize.net/testaccount. 
```

可以肯定的是，我验证了 api 登录密钥。当我检查网关对象时，我看到了登录名（api 登录密钥）、密码（交易密钥）和 :test => true

谁能告诉我交易是什么？

* * *

## 更新

所以我决定最好绝对验证问题出在 authorize.net --- 结果不是..如果我通过 curl 发出请求，它是成功的：

```
 curl -H "Accept: application/xml" -H "Content-Type: application/xml" -X POST -d '<?xml version="1.0" encoding="utf-8"?>
    <createCustomerProfileRequest xmlns="AnetApi/xml/v1/schema/AnetApiSchema.xsd">
      <merchantAuthentication>
        <name>myTestLogin</name>
        <transactionKey>myTransactionKey</transactionKey>
      </merchantAuthentication>
      <profile>
        <merchantCustomerId>custId123</merchantCustomerId>
        <description>some description</description>
        <email>foo@bar.com</email>
      </profile>
    </createCustomerProfileRequest>' https://apitest.authorize.net/xml/v1/request.api

      <?xml version="1.0" encoding="utf-8"?><createCustomerProfileResponse xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="AnetApi/xml/v1/schema/AnetApiSchema.xsd"><messages><resultCode>Ok</resultCode><message><code>I00001</code><text>Successful.</text></message></messages><customerProfileId>10521778</customerProfileId><customerPaymentProfileIdList /><customerShippingAddressIdList /><validationDirectResponseList /></createCustomerProfileResponse> 
```

...

所以，这意味着问题出在 ActiveMerchant........ 我可以通过 activemerchant 使用我的真实帐户创建客户资料，但由于某种原因，我无法对开发人员测试帐户进行此操作。 ..

有一件事让我怀疑：

尽管网关说它处于测试模式： 1.9.3p194 :007 > GATEWAY => #, :password=>, :test=>true}>

实际上询问它是否处于测试模式返回一个意外的响应............

```
1.9.3p194 :008 > GATEWAY.test?
 => false 
```

嗯嗯嗯嗯嗯……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T03:00:36.627

测试模式和设置`test`是`true`两个不同的东西。如果您的帐户处于测试模式，您应该设置`test`为`false`或根本不发送它。

更好的是，如果您正在开发应用程序，您应该使用 Authorize.Net注册一个[开发者帐户。](http://developer.authorize.net/integration/)这样您就不必处理测试模式或参数，因为开发人员帐户基本上始终处于测试模式。它们的作用类似于生产帐户，但实际上并不处理任何付款。它使开发更容易和更安全。

# java - 对整数数组进行排序（使用我自己的算法）- Java

> ID：13315690
> 
> 赞同：0
> 
> 时间：2012-11-09T20:42:55.433
> 
> 标签：java

我正在为我的编程课做额外的学分作业。我们正在做 OOP，这个例子是获取一个数组并对其进行排序。所有的排序代码都将进入 add 方法。我已经有一些代码，并且它可以工作。正如标题中所说，我必须使用我独特的代码创建自己的算法。如何将列表中的所有整数从小到大排序？（整数是使用 add 方法添加的值。）这是讲师给我的说明：

• 沿着阵列向下走，直到找到新元素应该去的地方。由于列表已经排序，您可以继续查看元素，直到找到至少与要插入的元素一样大的元素。

• 下移将在新元素之后的每个元素，即从您停止的元素到最后的所有元素。这将创建一个插槽，您可以在其中放置新元素。请注意移动它们的顺序，否则您将覆盖您的数据！

现在您可以在您最初停止的位置插入新元素。所有这些都将进入您的 add 方法。

程序的两个类：

```
 private int[] list;
   private int numElements = 0;

   //-------------------------------------------------------------
   // Constructor -- creates an integer list of a given size.
   //-------------------------------------------------------------
   public IntList(int size)
   {
      list = new int[size];
   }
   //------------------------------------------------------------
   // Adds an integer to the list. If the list is full,
   // prints a message and does nothing.
   //------------------------------------------------------------

   public void add(int value)
   {
      if (numElements == list.length){
      System.out.println("Can't add, list is full");
      }
      else
      { 
        list[numElements] = value;
        for(int i = 0; i < numElements; i++){
            //May be I should use a nested loop?
            //for(k = 0; k <)
             if(value < list[i]){
                 list[i+1]= list[i];
                 list[i]=value;
             }
       }
        numElements++;

            }

      }

   //-------------------------------------------------------------
   // Returns a string containing the elements of the list with their
   // indices.
   //-------------------------------------------------------------
   public String toString()
   {
      String returnString = "";
      for (int i=0; i<numElements; i++)
         returnString += i + ": " + list[i] + "\n";
      return returnString;
   }
} 
```

另一类：

```
public class IntListThing {

public static void main(String[] args){

          IntList myList = new IntList(10);
          myList.add(84);
          myList.add(27);
          myList.add(250);
          myList.add(18);
          myList.add(94);
          myList.add(8);
          myList.add(87);
          System.out.println(myList);
       }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T20:46:27.097

一旦找到正确的位置，即为`if(value < list[i]){`真**，然后将所有可用元素向右移动。您只使用 移动一个`list[i+1]= list[i];`。**

即使用一个小循环：

```
 for(int j= numElements-1; j>=i; j--){
      list[j+1]= list[j];
  }
  list[i] = value; 
```

请注意：这是概念。请调整指标和条件。

**编辑：我错过了提到你需要在插入元素后立即中断。**我也纠正了条件。这是更新的`else`块代码。

```
 list[numElements] = value;
        for(int i = 0; i < numElements; i++){
            //May be I should use a nested loop?
            //for(k = 0; k <)
             if(value < list[i]){
                 for(int j= numElements-1; j>=i; j--){
                      list[j+1]= list[j];
                  }
                  list[i] = value;
                  break;
            }
        }
        numElements++; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T20:56:05.457

如果您真的想对您的教授产生影响，请对插入点进行二进制搜索。找到它后，退出该循环并进入另一个循环，将插入点之外的所有内容复制到右侧一个位置。

## 编辑

正如@Jan Dvorak 在下面尖锐指出的那样，即使是二进制搜索也是浪费 CPU 时间和编程工作:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T20:56:21.773

由于这是一项家庭作业，因此许多人不愿意直接给您代码。

您在评论中使用嵌套循环暗示的内容是必要的。您使用此循环的目标是将每个元素“推回”`list`一个位置。一些考虑：

1）一定要检查你的数组的边界。如果你的数组是“满的”，那么把东西推到极限会导致`ArrayOutOfBoundsException`.

2) 在循环中移动时注意不要覆盖任何值。我可以建议从后面开始并向前推进吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T21:10:15.850

试试这个

```
class IntListThing  {
private int[] list;
private int numElements;

public IntListThing  ( int initial_capacity ) {
    list = new int[initial_capacity>0?initial_capacity:1];
    numElements = 0;
}

public void add(int value)  {
      if (numElements == list.length) list = Arrays.copyOf(list, list.length*2);
      int i = 0;
      for ( i = 0 ; i < numElements ; ++i ) 
          if ( value < list[i] ) break; 
      for ( int k = numElements ; k > i ; --k )
          list[k] = list[k-1];
      list[i] = value;
      ++numElements;
}

public String toString()  {
      String returnString = "";
      for (int i=0; i<numElements; i++)
         returnString += i + ": " + list[i] + "\n";
      return returnString;
   }

} 
```

这样你也不必担心你的数组会变满，它会在需要时调整大小。

在 Arrays 类中，您可以找到各种其他有用的方法。你一定要检查一下。您有某人建议使用的 binarySearch，但这在这里非常不合适，因为在这种方法中，您已经具有复制数组的线性复杂性，所以在对数时间内进行搜索有什么意义。

我希望你能得到额外的荣誉。

如果您想进行更多练习，请尝试创建一个删除方法，该方法还可以在需要时调整数组大小以节省空间。如果您需要帮助，请在评论中告诉我。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-09T21:14:11.660

经典的插入排序通过将一个元素向左交换直到它被排序，然后移动到下一个元素，只将被移动的元素写入它没有被覆盖的地方：

```
- input: array a
- for i from 1 to a.length-1: // the first element is already sorted!
  - temp = a[i];
  - j = i;
  - while (j>0 && a[j-1] < temp):
    - a[j] = a[j-1];
    - j = j-1;
  - endwhile
  - a[j] = temp;
- endfor
- output: a 
```

# android - 为什么程序找不到activity_main和web_view？

> ID：13315694
> 
> 赞同：0
> 
> 时间：2012-11-09T20:43:19.987
> 
> 标签：android, error-handling

我写了一个简单的程序，当我运行程序时，程序有错误。我在布局文件夹中有一个activity_main.xml，但程序有activity_main 错误。为什么？问题是什么？

错误：activity_main 无法解析或不是字段 web_view 无法解析或不是字段

activity_main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical">
<WebView
    android:id="@+id/web_view"
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="1.0" />
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal">
    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/button1"/>
    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/button2"/>
    </LinearLayout>
    </LinearLayout> 
```

MainActivity.java

```
public class MainActivity extends Activity {
Button button1;
Button button2;
WebView mWeb;
@Override
public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    mWeb= (WebView)findViewById(R.id.web_view);

    button1=(Button)findViewById(R.id.button1);
    button2=(Button)findViewById(R.id.button2);
    button1.setOnClickListener(onClickListener);
    button2.setOnClickListener(onClickListener);

}
private OnClickListener onClickListener=new OnClickListener(){
    public void onClick(View v){
        //don't work something  
        }
};
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-08T04:18:43.517

有时 Eclipse 会添加

> 导入安卓.R

到进口清单。这是一个错误，应该删除。删除它有时可以解决所描述的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T00:41:47.243

尝试以下操作：

1.  清理您的工作区并尝试再次运行
2.  检查是否在**gen**文件夹中创建了 R.java 以及那里的包名称是什么？
3.  确保您的 Web 视图和 R.Java 共享相同的包名，如果不是，请更改您的 WebView 的包名或更改 manifest.xml。
4.  尝试再次关闭和打开 Eclipse。

# android - Android 图片按钮边距

> ID：13315695
> 
> 赞同：1
> 
> 时间：2012-11-09T20:43:26.243
> 
> 标签：android, image, button, margin

所以我是android编程的新手，我试图将三个图像按钮排成一行，一个接一个。

问题是我无法摆脱它们之间的空格，并且我猜对它们中的每一个都添加 *android:layout_marginLeft="0dp"* 和 *android:layout_marginRight="0dp"* 是行不通的。我正在使用相对布局。

谢谢你的帮助！

这是 XML：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >
<ImageButton
    android:id="@+id/ib_3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_margin="0dp"
    android:src="icon2" />
<ImageButton
    android:id="@+id/ib_2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_margin="0dp"
    android:layout_toLeftOf="@id/ib_3"
    android:src="icon2" />
<ImageButton
    android:id="@+id/ib_1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_toLeftOf="@id/ib_2"
    android:layout_margin="0dp"
    android:src="icon1" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T21:10:51.310

tru 将 imagebutton 的背景设置为空。ImageButtons 有一个默认背景，取决于制造商

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >
<ImageButton
    android:id="@+id/ib_3"
    android:background="@null"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_margin="0dp"
    android:src="icon2" />
<ImageButton
    android:id="@+id/ib_2"
    android:background="@null"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_margin="0dp"
    android:layout_toLeftOf="@id/ib_3"
    android:src="icon2" />
<ImageButton
    android:id="@+id/ib_1"
    android:background="@null"
    android:layout_width="wrap_content"    
    android:layout_height="wrap_content"
    android:layout_toLeftOf="@id/ib_2"
    android:layout_margin="0dp"
    android:src="icon1" /> 
```

# android - 从后台服务android查找当前位置

> ID：13315699
> 
> 赞同：3
> 
> 时间：2012-11-09T20:43:35.193
> 
> 标签：android, service, geolocation, location, background-process

我想通过后台服务活动找到当前位置并与我的数据库中的一些数据进行比较......但不知道如何去做......所以请给我一些建议......这就是我的方式目前在做

```
 package com.example.alert;

    import android.app.Service;
    import android.content.Context;
    import android.content.Intent;
    import android.location.Location;
    import android.location.LocationListener;
    import android.location.LocationManager;
    import android.media.MediaPlayer;
    import android.os.Bundle;
    import android.os.IBinder;
    import android.widget.Toast;

    public class service extends Service{
LocationManager lm = (LocationManager)getSystemService(Context.LOCATION_SERVICE);

@Override
public IBinder onBind(Intent arg0) {
    // TODO Auto-generated method stub
    return null;
}

public void onCreate() {
    Toast.makeText(this, "Background Service Created", Toast.LENGTH_LONG).show();

}

public void onDestroy() {
    Toast.makeText(this, "My Service Stopped", Toast.LENGTH_LONG).show();

}

public void onStart(Intent intent, int startid) {

    Toast.makeText(this, "My Service Started", Toast.LENGTH_LONG).show();
    LocationListener ll = new MyLocationListener();
    //lm.requestLocationUpdates( LocationManager.GPS_PROVIDER, 5*60*10000, 0, ll);
    lm.requestLocationUpdates( LocationManager.GPS_PROVIDER, 0, 0, ll);

}

public class MyLocationListener implements LocationListener
{

    public void onLocationChanged(Location loc)
    {
        if(loc!=null)
        {
            double x;

            String Text = "My current location is: " +"Latitud = " + loc.getLatitude() +"Longitud = " + loc.getLongitude();
            Toast.makeText( getApplicationContext(),Text,Toast.LENGTH_SHORT).show();
        /*  cr.moveToFirst();
            while(!cr.isAfterLast()) {
                 al.add(cr.getString(cr.getColumnIndex(dbAdapter.KEY_NAME))); //add the item
                 cr.moveToNext();
            }*/
        //  lm.addProximityAlert(loc.getLatitude(), loc.getLongitude(), 10009,, intent)

            //for loop, alerters retrieving one by one
//      x= calcDistance(loc.getLatitude(),loc.getLongitude(),z,y);
    //      if(x<1){
        //        Intent myIntent = new Intent(ViewAlerters.this,CallMode.class);
          //        startActivity(myIntent);
            }

        }

    public void onProviderDisabled(String arg0) {
        // TODO Auto-generated method stub

    }

    public void onProviderEnabled(String provider) {
        // TODO Auto-generated method stub

    }

    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub

    }

    }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T05:20:18.833

Reto Meier（Android 开发者关系）在这方面做了很多工作，我建议你去看看。

在这里写博客[http://android-developers.blogspot.com/2011/06/deep-dive-into-location.html](http://android-developers.blogspot.com/2011/06/deep-dive-into-location.html)

此处的示例代码[https://code.google.com/p/android-protips-location/](https://code.google.com/p/android-protips-location/)

# ruby-on-rails - 如何将此逻辑编写为 Cucumber 功能？

> ID：13315702
> 
> 赞同：-1
> 
> 时间：2012-11-09T20:43:47.830
> 
> 标签：ruby-on-rails, cucumber

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T10:12:05.307

# string - 检查自由变量

> ID：13315706
> 
> 赞同：1
> 
> 时间：2012-11-09T20:44:11.733
> 
> 标签：string, variables, haskell, substitution

解析错误是目前我最不喜欢的 Haskell 错误类型。所以我正在编写一个函数，在其中我得到一个对列表，其中第二个组件包含一些变量（这取决于`vars`我之前在我的代码中定义为`vars :: a -> [String]`。如果列表为空，则没有任何自由变量，并且替换被认为已解决。

我已经这样做了，但我得到了一个`parse error on '|'`

```
solved :: Subst a -> Bool
solved xs = null [(S(xs,d) | (S(xs,d)) <- xs, not (null (vars d)))] 
```

我之前将我的数据类型定义为

```
data Subst a = S [(String,a)] 
```

我鄙视解析错误，因为要花很长时间才能找出问题所在（笑）。任何人的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T20:50:14.763

在

```
solved xs = null [(S(xs,d) | (S(xs,d)) <- xs, not (null (vars d)))]
                         ^^ 
```

缺少右括号。

但是，看起来你还有更多问题，

```
data Subst a = S [(String,a)]

solved :: Subst a -> Bool
solved xs = null [(S(xs,d) | (S(xs,d)) <- xs, not (null (vars d)))] 
```

`xs`不是 中的列表`pattern <- xs`，而是`Subst a`. 此外，您还隐藏了 name `xs`，这使得代码难以遵循。你可能想要类似的东西

```
solved (S xs) = null [ () | (varname, d) <- xs, not (null $ vars d) ] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T20:50:55.413

您会收到解析错误，因为`|`它位于一对括号内 - 它需要直接位于列表推导的方括号内才能在语法上有效。

修复该问题后，您将收到类型错误，因为您的类型签名表明您的函数采用 a `Subst a`，但您将参数视为列表。

我还怀疑你的`vars`函数会遇到问题，因为实际上不可能有一个明智的类型函数`a -> [String]`（这里的“明智”是指一个不只是为每个参数返回相同的字符串列表的函数）。

# android - layout_height 应该是 layout_width 的函数

> ID：13315708
> 
> 赞同：2
> 
> 时间：2012-11-09T20:44:22.127
> 
> 标签：android, layout, android-imageview

假设纵向模式，我有一个 ImageView，其图像大小可变（但始终为正方形）。我希望 ImageView 的宽度始终等于布局的宽度（fill_parent），并且您可以看到 scaleType 是“centerCrop”，它将进行缩放。

问题是，如果我将 *layout_height* 也设置为“fill_parent”，那么由于 centerCrop 保留了原始纵横比，因此高度优先并且图像在左右两侧被裁剪。（这当然假设屏幕比宽高）。但是，如果我将 layout_height 设置为“wrap_content”，则不再缩放高度，最终得到一个裁剪后的矩形。这样做是因为它尊重图像的原始高度。

是否有 layout_height 设置优先于“fill_parent”的 layout_width？

```
<ImageView
    android:id="@+id/iv_image"
    android:layout_width="fill_parent"
    android:layout_height="?"
    android:layout_below="@id/header"
    android:layout_centerHorizontal="true"
    android:contentDescription="@string/cd_image"
    android:padding="0dp"
    android:scaleType="centerCrop"
    android:src="@drawable/blank_album" /> 
```

删除 android:layout_height 属性会导致崩溃：java.lang.RuntimeException：二进制 XML 文件第 16 行：您必须提供 layout_height 属性。

设置 android:layout_height="0dp" 垂直压碎图像。

答：结合其他用户的回答，我找到了一个适合我的简单解决方案。

首先，图像视图具有以下配置（注意*fitStart*）：

```
<ImageView
    android:id="@+id/iv_album"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_below="@id/header"
    android:layout_gravity="top"
    android:background="#FF00FF00"
    android:contentDescription="@string/app_name"
    android:padding="0dp"
    android:scaleType="fitStart"
    android:src="@drawable/blank_album" /> 
```

然后以编程方式，对图像的高度进行小修改以匹配宽度（在 Activity.onResume() 内）

```
 ImageView iv = (ImageView)findViewById(R.id.iv_album);
        boolean bPost = iv.post(
                new Runnable()
                {
                    public void run()
                    {
                        ImageView iv = (ImageView)findViewById(R.id.iv_album);
                        RelativeLayout.LayoutParams params = (RelativeLayout.LayoutParams)iv.getLayoutParams();
                        params.width = ASong.this.findViewById(R.id.song_view_layout_top).getWidth();
                        params.height = params.width;                           
                        iv.setLayoutParams(params);
                    }
                });

        if (bPost == false)
        {
            throw new RuntimeException("runnable not posted");
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T20:54:08.783

我昨天不得不处理这个问题。这是解决我的问题的 XML：

```
<ImageView
                android:id="@+id/character"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_alignParentBottom="true"
                android:background="@android:color/transparent"
                android:scaleType="fitCenter"
                android:src="@drawable/ma_un1_001" /> 
```

在此处查看线​​程：[Center drawable and scale height](https://stackoverflow.com/questions/13297939/center-drawable-and-scale-height)

长话短说：

```
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:scaleType="fitCenter" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T23:20:16.087

或者，您可以以编程方式执行此操作：

用 LinearLayout 包围 ImageView

```
<LinearLayout
android:id="@+id/container"
android:layout_below="@id/header"
android:layout_centerHorizontal="true"
android:layout_width="fill_parent"
android:layout_height="fill_parent">
    <ImageView
    android:id="@+id/iv_image"
    android:layout_width="fill_parent"
    android:layout_height="?"
    android:contentDescription="@string/cd_image"
    android:padding="0dp"
    android:scaleType="centerCrop"
    android:src="@drawable/blank_album" />
</LinearLayout> 
```

然后，在您的 onCreate() 中，插入

```
findViewById(R.id.container).post(
    new Runnable() {
    public void run() {
        LinearLayout container = (LinearLayout)findViewById(R.id.container);
        LinearLayout.LayoutParams params = (LinearLayout.LayoutParams)container.getLayoutParams();
        params.height = params.width;
        container.setLayoutParams(params);
    }}
); 
```

代码必须在 post() 中，因为主进程不能直接修改布局结构。

# c# - WebMethod 没有关闭 SqlConnection？

> ID：13315709
> 
> 赞同：0
> 
> 时间：2012-11-09T20:44:27.697
> 
> 标签：c#, database, webmethod

Web服务的另一个问题。这次我使用 WebMethod 传递了两个字符串，并尝试将它们保存到数据库中。到目前为止，一切都很好。一切正常。但是....但是当我关闭应用程序并想要显示该数据库/表中的数据时，错误消息一直说数据库仍被其他应用程序使用。这是我的网络服务代码：

```
[WebMethod]
        public string GetValues(string value, string value2)
        {
            try
            {
            string crime = value;
            string invest = value2;

            SqlConnection cs = new SqlConnection();
            cs.ConnectionString = "Data Source=.\\SQLExpress;" + "Trusted_Connection=True;" + "AttachDbFilename=C:\\Temp\\Dokumenty\\Uczelnia\\Application Development\\Coursework2\\Coursework2\\Try\\Menu\\Menu\\Users.mdf;";

            SqlDataAdapter da = new SqlDataAdapter();

            da.InsertCommand = new SqlCommand("INSERT INTO tblScene VALUES(@CrimeSceneID, @InvestigatorID, @DataArtefactID)", cs);
            da.InsertCommand.Parameters.Add("@CrimeSceneID", SqlDbType.VarChar).Value = crime;
            da.InsertCommand.Parameters.Add("@InvestigatorID", SqlDbType.VarChar).Value = invest;
            da.InsertCommand.Parameters.Add("@DataArtefactID", SqlDbType.VarChar).Value = "hello";
            cs.Open();
            da.InsertCommand.ExecuteNonQuery();
            cs.Close();
            da.Dispose();

                return "OK";
            }
            catch (Exception ex)
            {
                // return the error message if the operation fails
                return ex.Message.ToString();
            } 
```

我试图关闭我的 cs 连接，甚至试图处置 DataAdapter - 不走运。在尝试重建整个项目两次之后，我终于可以访问数据库并确认我试图保存的所有内容都在那里。我错过了什么吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T21:29:28.990

试试下面的代码：

```
 [WebMethod]
    public string GetValues(string value, string value2)
    {
        try
        {
            string crime = value;
            string invest = value2;

            using (SqlConnection cs = new SqlConnection())
            {
                cs.ConnectionString = "Data Source=.\\SQLExpress;" + "Trusted_Connection=True;" + "AttachDbFilename=C:\\Temp\\Dokumenty\\Uczelnia\\Application Development\\Coursework2\\Coursework2\\Try\\Menu\\Menu\\Users.mdf;";

                using (SqlDataAdapter da = new SqlDataAdapter())
                {
                    da.InsertCommand = new SqlCommand("INSERT INTO tblScene VALUES(@CrimeSceneID, @InvestigatorID, @DataArtefactID)", cs);
                    da.InsertCommand.Parameters.Add("@CrimeSceneID", SqlDbType.VarChar).Value = crime;
                    da.InsertCommand.Parameters.Add("@InvestigatorID", SqlDbType.VarChar).Value = invest;
                    da.InsertCommand.Parameters.Add("@DataArtefactID", SqlDbType.VarChar).Value = "hello";
                    cs.Open();
                    da.InsertCommand.ExecuteNonQuery();
                }
            }

            return "OK";
        }
        catch (Exception ex)
        {
            // return the error message if the operation fails
            return ex.Message.ToString();
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T20:57:33.910

修改您的代码以使用 USING。然后，当 USING 结束时，您的连接将自动处理。

```
[WebMethod]
public string GetValues(string value, string value2)
{
    try
        {
            string crime = value;
                string invest = value2;

                using(SqlConnection cs = new SqlConnection("Data Source=.\\SQLExpress;" + "Trusted_Connection=True;"))
        {

                    using(SqlDataAdapter da = new SqlDataAdapter())
            {

                        da.InsertCommand = new SqlCommand("INSERT INTO tblScene VALUES(@CrimeSceneID, @InvestigatorID, @DataArtefactID)", cs);
                        da.InsertCommand.Parameters.Add("@CrimeSceneID", SqlDbType.VarChar).Value = crime;
                        da.InsertCommand.Parameters.Add("@InvestigatorID", SqlDbType.VarChar).Value = invest;
                        da.InsertCommand.Parameters.Add("@DataArtefactID", SqlDbType.VarChar).Value = "hello";
                        cs.Open();
                        da.InsertCommand.ExecuteNonQuery();
                    }
        }

                return "OK";
            }
            catch (Exception ex)
            {
                // return the error message if the operation fails
                return ex.Message.ToString();
            }
} 
```

# c - 在 C 中处理字符串数组

> ID：13315712
> 
> 赞同：-1
> 
> 时间：2012-11-09T20:44:31.417
> 
> 标签：c

我正在尝试使用以下代码来读取句子（字符串），然后显示句子中的单词。它没有按应有的方式显示。我究竟做错了什么？

```
#include <stdio.h>
#include <string.h>
#define N 100

int main()
{
    char s[N];
    char words[N][N];
    int i=0;
    int j=0;
    printf("s=");
    gets(s);
    while ((i<strlen(s)) && (s[i]!='.'))
    {
        while (s[i]!= ' ')
        {
            sprintf(words[j],"%c", s[i]);
            i++;
        }
        j++; i++;
    }
    for (i=0;i<j;i++) printf("%s ", words[i]);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T20:52:56.740

你的while循环逻辑是错误的；它应该是：

```
int  k = 0;
while (s[i] != ' ')
    words[j][k++] = s[i++];
words[j][k] = '\0'; 
```

此外，您永远不会将终止的空字符 ( `'\0'`) 写入`words[]`，因此`printf()`调用将失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T20:54:17.710

未经测试，但您应该明白：

```
int size = strlen(s);
int start = 0;
for(i = 0; i < size; i++) {
    if (s[i] == ' ') {
        char* word = malloc((i-start)*size(char)+1); // alloc memory for a word
        strcpy(word, s+size(char)*i, i-start); // copy only the selected word
        word[i-start+1] = '\0'; // add '\0' at the end of string
        printf("%s\n", word);
        start = i + 1; // set new start index value
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T21:11:12.010

```
#include <stdio.h>
#include <string.h>
#define N 100

int main()
{
    char s[N];
    char words[N][N] = {0} ; /* this initial your array to 0 */
    int i=0;
    int j=0;
    printf("s=");
    gets(s);
    while ((i<strlen(s)) && (s[i]!='.'))
    {
        while (s[i]!= ' ')
        {
            sprintf(words[j]+strlen(words[j]),"%c", s[i]); /* this will concat chars in words[j] */
            i++;
        }
        j++; i++;
    }
    for (i=0;i<j;i++) printf("%s ", words[i]);
    return 0;
} 
```

# javascript - 通过 URL 传递 JS 变量

> ID：13315714
> 
> 赞同：0
> 
> 时间：2012-11-09T20:44:46.733
> 
> 标签：javascript, url, variables

我正在设计一个网页，它将文档的图像加载到网页中，然后根据从另一个页面传递的变量重新定位到特定的图像（页面）。代码如下。现在，看起来变量“page”没有被更新。页面会提醒

```
<!DOCTYPE html> 

<html>
  <head>
    <title>TEST</title>

    <!-- Javascripts -->
    <script type="text/javascript">
    var pageCount = 40; /*Total number of pages */
    var p;  /*Variable passed to go to a specific page*/

    function pageLoad(){ /*Loads in the pages as images */

        for( i = 1; i<= pageCount; i++){
            if(i < 10){
                i = "0"+i;
            }

            document.body.innerHTML += "<div class='page'><a id='page" + i +"'><img src='pages/PI_Page_"+ i +".png' /></a></div>";
            if( i == pageCount){
                gotoPage(p);
            }
        }       
    }

    function gotoPage(pageNum){  /* Moves webpage to target page of the PI */
        window.location = ("#page" + pageNum);
        alert(p);

    }

    function Test(){    
        window.open("./PI.html?p=15","new_pop");
    }

    </script>     
  </head>

  <body onload="pageLoad()">

  <div class="ExtBtn" onClick="Test()">
    <img alt="Exit" src="design/exit_btn-02.png" />
  </div> 

  </body>

</html> 
```

函数 TEST() 设置为允许我有一个链接来重新打开 p 设置为 15 的页面。页面打开，但是，函数 gotoPage() 仍然提醒 p 未定义。任何想法为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T20:47:39.930

在 URL 中传递的变量不会自动成为 JavaScript 中的变量。您需要自己解析`document.location`和提取值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T20:53:39.067

`p`永远不会在任何地方设置值，因此它当然是未定义的。您需要手动从查询字符串中提取值，JavaScript 不会神奇地为您获取查询字符串值。

在此处使用该函数：[如何在 JavaScript 中获取查询字符串值？](https://stackoverflow.com/questions/901115/how-can-i-get-query-string-values)获得价值。

另外你为什么要检查最后一个索引，在 for 循环之后设置 go 调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T20:59:01.210

这是您的代码与正确的 alert(p) 工作：http: [//js.do/rsiqueira/read-param ?p=15](http://js.do/rsiqueira/read-param?p=15)

我添加了一个“函数 get_url_param”来解析 url 并读取“?p=15”的值。

# jquery - Zurb Foundation 顶部栏菜单在移动显示上不起作用

> ID：13315715
> 
> 赞同：2
> 
> 时间：2012-11-09T20:44:53.630
> 
> 标签：jquery, css, wordpress, zurb-foundation

我在 Wordpress 网站上使用 Zurb Foundation 框架。我遇到的问题是响应式顶栏。当它进入移动模式时，菜单不起作用。它不会在点击时下拉。我已经下载了他们的 html 模板，完全复制了代码，但仍然无法正常工作。

有谁知道如何修理它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T14:38:47.187

我认为您没有包含 TopBar 组件所需的 javascript。我在你的代码中找不到它。

参考`foundation.min.js`或`jquery.foundation.topbar.js`

然后你必须初始化菜单

```
$(document).foundationTopBar() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T18:56:21.153

尝试在 DOM Ready 上加载基础。

```
$(function() {
    $(document).foundation();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T21:05:16.977

使用 zurb-foundation-4.0.9 您需要将此行添加到您的 html 代码中：

```
<script type="text/javascript" src="javascripts/vendor/custom.modernizr.js"></script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-28T07:26:45.760

尝试删除该部分然后对其进行测试。我的网站在基础 3 上运行。顶部栏正在运行。我以前有这个问题。将 html 主题转换为 wordpress 主题时不要包含 app.js。

删除这个

```
<script type="text/javascript" src="http://pinetowncpf.co.za/wp-content/themes/PinetownCPF/js/app.js"></script> 
```

然后测试

问候埃里克

# c++ - 试图从 Cinder 中找出 Vec2 类

> ID：13315717
> 
> 赞同：1
> 
> 时间：2012-11-09T20:45:04.210
> 
> 标签：c++, casting, cinder

所以我有一个 Node 类，它包含一个 Vec2float* 的成员变量“center”。这样做的原因是因为我想使用drawSolidCircle函数，并且我需要一个Vec2float变量来表示中心。我的一个问题是， Vec2float 是一个向量，还是空间中的一个点？许多成员函数使它听起来像某种矢量类，但 set() 函数只接受两个参数，这使它看起来像空间中的一个点，为了画一个圆，你需要一个点和半径，而不是矢量。我遇到的另一个问题是，如果有人给了我 2 个双打，我该如何正确地将它们转换为 Vec2float 并设置中心的 x 和 y（如果它甚至有 x 和 y）。因此，例如在下面的函数中，我得到了一个条目数组和它的长度，'n'。一个条目有两个成员变量“x”和“y”，它们都是双精度数。我想创建一个节点数组并复制该数据以使用它来绘制圆圈。

```
cinder::Vec2<float>* center;//in my Node class

void function::build(Entry* c, int n) {
Node* nd = new Node[n];
for(int i = 0;i<n;i++) {
    nd[i].center = //what goes here if c[i].x and c[i].y are doubles?
} 
```

参考： Vec2 类：[http](http://libcinder.org/docs/v0.8.4/classcinder_1_1_vec2.html) ://libcinder.org/docs/v0.8.4/classcinder_1_1_vec2.html 绘制形状的函数列表，我使用 drawSolidCircle：[http ://libcinder.org/docs/v0.8.4/namespacecinder_1_1gl.html](http://libcinder.org/docs/v0.8.4/namespacecinder_1_1gl.html)

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T22:34:40.317

为了让您的生活更轻松，您可以使用 cinder 命名空间。在文件顶部的包含后添加以下行。

```
using namespace ci; 
```

然后，您可以简单地编写，例如：

```
Vec2f center(1.5f, 1.5f);
std::cout << center << std::endl; 
```

确实，`Vec2<float>`它的类型定义`Vec2f`与 Cinder 中的一样。

此外，您不必将双精度数转换为浮点数，因为它们是隐式转换的，只需将它们传入！

最后，你真的必须小心指针。大多数时候，如果我想要一个对象数组，我会使用 a`std::vector`和使用`shared_ptr`. 这是我学习如何做到这一点的地方：[https ://forum.libcinder.org/topic/efficiency-vector-of-pointers](https://forum.libcinder.org/topic/efficiency-vector-of-pointers)

我不会涵盖向量背后的整个理论。这是一个很好的参考（使用处理语言）： http: [//natureofcode.com/book/chapter-1-vectors/](http://natureofcode.com/book/chapter-1-vectors/)简而言之，是的，您应该使用它们来存储位置，但在数学上它们仍然是向量（您可以想到位置向量作为从原点 (0,0) 到当前位置的箭头）。

我还建议您查看该库提供的大量示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T15:37:43.603

好吧，我想出了一些办法，它现在可以编译，将来它是否适用于我的程序还有待商榷。但这是我所做的：

```
float f1 = (float)(c[i].x);
float f2 = (float)(c[i].y);
cinder::Vec2<float>* p = new cinder::Vec2<float>(f1,f2);
nd[i].center = p; 
```

我将双打分别转换为浮点数，然后使用 Vec2 构造函数创建一个变量 p ，然后将中心设置为等于该变量。就像我说的那样编译，我们将看看它是否有效：D

# asp.net-mvc - 模型验证数据注释的哪一层？

> ID：13315718
> 
> 赞同：0
> 
> 时间：2012-11-09T20:45:04.930
> 
> 标签：asp.net-mvc, validation, model, data-annotations

继[模型层对 MVC 属性的依赖](https://stackoverflow.com/questions/13214138/model-layer-dependency-on-mvc-attributes?rq=1)之后，拥有一个具有模型类的项目和一个为每个类定义验证的单独项目是否是一个有效的设计选择？

该验证项目将特定于特定的前端技术，覆盖属性并添加注释。

例如，MVC 数据注释。我认为模型类拥有特定前端技术的知识是没有意义的。

虽然在 MVC 的情况下可以说验证可以简单地在视图模型中定义，但已经有视图模型用于其他功能。我在想最好在自己的层中定义所有验证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T23:46:51.007

我喜欢这样我的 MVC 项目只包含脚本、内容、视图和控制器。我将我所有的视图模型、客户端验证等都放在了一个模型项目中。

# asp.net - 文本框的正则表达式验证器以接受空白值或单个字符“C”

> ID：13315722
> 
> 赞同：0
> 
> 时间：2012-11-09T20:45:25.277
> 
> 标签：asp.net

如果我的网页中的文本框只能接受空白值或字符“C”，则正则表达式验证器的正则表达式是什么

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T16:27:32.200

会是这样的：

```
^C$ 
```

这表示只接受一个 C 字符。将字段留空也是可以接受的，因为 RegEx 验证器不会将空字段标记为不正确。

# java - 避免使用覆盖注释编写重复代码

> ID：13315723
> 
> 赞同：0
> 
> 时间：2012-11-09T20:45:25.397
> 
> 标签：java, overriding

下面是别人在我们公司写的课。

```
public class Reader1 extends PdsxAdapterBaseGemsReader {

    @Override
    public PdsxReader acquireReader(PdsxReadRequest pdsxReadRequest) {
       return new PdsxUserReadOnlyGemsReader(pdsxReadRequest);
    }

    protected static class PdsxUserReadOnlyGemsReader extends PdsxAdapterBaseGemsReader.PdsxBaseGemsReader {

           protected PdsxUserReadOnlyGemsReader(PdsxReadRequest pdsxReadRequest) {
              super(pdsxReadRequest);
           }

           protected ClusterIdEnum getClusterId() {
              return ClusterIdEnum.MARKEPLACE1;
           }

           @Override
           public List<PdsxRecord> readData() {
               List<UserCacheDoImpl> userDos = readUserCacheRecords(req, serverId,startLastModifiedDate, endLastModifiedDate);
               // some code
           }

           private List<UserCacheDoImpl> readUserCacheRecords(PdsxReadRequest req, int serverId, Date startLastModifiedDate, Date endLastModifiedDate) {
              List<UserCacheDoImpl> userDos = new ArrayList<UserCacheDoImpl>();
              BackEndIterator userIter = new BackEndIterator(getClusterId().getId(), serverId, startLastModifiedDate, endLastModifiedDate, READ_BATCH_SIZE);
              //some code
           }

           private PdsxRecord createPdsxRecordFromUserDO(UserCacheDoImpl userCache) {
              //some code
           }

           private void xValidateAttrKey(PdsxAttrKey readAttr) {
              // some code
           }
    }

} 
```

**问题陈述：-**

我需要用所有方法名称编写另一个具有相同功能的类。唯一的区别是这种方法-

```
protected ClusterIdEnum getClusterId() {
    return ClusterIdEnum.MARKEPLACE1;
} 
```

它需要是

```
protected ClusterIdEnum getClusterId() {
    return ClusterIdEnum.MARKEPLACE2;
} 
```

因此，如果我需要以非常老式的方式进行操作，我可以从第一个 Reader 类中复制粘贴所有内容，并通过更改集群 id 方法创建一个新的 Reader2 类。就这样。但这不是一个好方法。

谁能告诉我在不写`duplicate code`很多次的情况下做同样事情的最佳方法是什么。？

我正在通过覆盖`getLcusterId() method`基类中的代码来考虑这样的事情，代码是这样的 -

```
public class Reader2 extends Reader1 {

    @Override
    public PdsxReader acquireReader(PdsxReadRequest pdsxReadRequest) {
       return new PdsxUserNewReadOnlyGemsReader(pdsxReadRequest);
    }

    protected static class PdsxUserNewReadOnlyGemsReader extends PdsxUserReadOnlyGemsReader {

       protected PdsxUserNewReadOnlyGemsReader(PdsxReadRequest pdsxReadRequest) {
          super(pdsxReadRequest);
       }

       @Override
       protected ClusterIdEnum getClusterId() {
          return ClusterIdEnum.MARKEPLACE2;
       }
    }
} 
```

由于头等舱的一切都是一样的，所以我不需要在我的 Reader2 类中实现任何东西，对吧？只是我可以覆盖`getClusterId() method`.

如果我在这里遗漏了什么，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T21:10:50.257

如果可以修改方法的签名`acquireReader`，您可以在阅读器类中添加一个字段：

```
public class Reader1 extends PdsxAdapterBaseGemsReader {

@Override
public PdsxReader acquireReader(PdsxReadRequest pdsxReadRequest, ClusterIdEnum clusterId) {
   return new PdsxUserReadOnlyGemsReader(pdsxReadRequest, clusterId);
}

protected static class PdsxUserReadOnlyGemsReader extends PdsxAdapterBaseGemsReader.PdsxBaseGemsReader {
       private ClusterIdEnum clusterId;

       protected PdsxUserReadOnlyGemsReader(PdsxReadRequest pdsxReadRequest, ClusterIdEnum clusterId) {
          super(pdsxReadRequest);
          this.clusterId = clusterId;
       }

       protected ClusterIdEnum getClusterId() {
          return clusterId;
       }

       //...
} 
```

或者，您可以在 Reader1 构造函数中添加它，但您可以在创建读取器对象时传递 clusterId：

```
public class Reader1 extends PdsxAdapterBaseGemsReader {
       private ClusterIdEnum clusterId;

       public Reader1 (ClusterIdEnum clusterId) {
          this.clusterId = clusterId;
       }

       @Override
       public PdsxReader acquireReader(PdsxReadRequest pdsxReadRequest) {
          return new PdsxUserReadOnlyGemsReader(pdsxReadRequest, clusterId);
       }

protected static class PdsxUserReadOnlyGemsReader extends PdsxAdapterBaseGemsReader.PdsxBaseGemsReader {
       private ClusterIdEnum clusterId;

       protected PdsxUserReadOnlyGemsReader(PdsxReadRequest pdsxReadRequest, ClusterIdEnum clusterId) {
          super(pdsxReadRequest);
          this.clusterId = clusterId;
       }

       protected ClusterIdEnum getClusterId() {
          return clusterId;
       }

       //...
} 
```

# ruby-on-rails - 在呈现默认错误页面之前捕获异常

> ID：13315726
> 
> 赞同：0
> 
> 时间：2012-11-09T20:45:31.590
> 
> 标签：ruby-on-rails

> **可能重复：**
> [Rails 3 将错误发送到电子邮件](https://stackoverflow.com/questions/6441018/rails-3-sending-errors-to-email)

我想添加自定义代码，每次出现系统故障并呈现默认错误文件 404 和 500 时向管理员发送电子邮件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T20:49:35.607

请查看[exception_notifier](http://rubygems.org/gems/exception_notifier) gem - 它能够向您配置的地址发送带有异常详细信息的电子邮件。

至于 404 错误——它可能有点难以捕捉，你必须为此设置一个通配符路由。除此之外，在每个 404 上发送电子邮件可能是一个糟糕的选择（对于实时站点，这种情况发生了很多次）。

# c# - 如何在 ASP.NET MVC 的控制器中获取传入的 InputStream

> ID：13315730
> 
> 赞同：2
> 
> 时间：2012-11-09T20:45:35.200
> 
> 标签：c#, asp.net, asp.net-mvc, vb.net

我需要从 ASP.NET 控制器的前端获取上传文件的传入输入流，然后将其转发到其他地方，谁能告诉我如何访问它？我看到一些评论说我可以得到下面的方法，但如果我这样做，我会得到一个编译错误：

```
var requestStream=HttpContext.Current.Request.InputStream; 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T20:48:07.143

如果你在控制器中，那么`this.Request.InputStream`应该有你需要的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T20:54:51.200

如果用户上传了一个文件，您可以`HttpPostedFileBase`在操作中添加一个来访问该文件。

```
public ActionResult Upload(HttpPostedFileBase file)
{
    using(var stream = file.InputStream)
    {
         ...
    }
} 
```

# php - 写入文件会插入额外的空格和斜杠

> ID：13315731
> 
> 赞同：0
> 
> 时间：2012-11-09T20:45:36.733
> 
> 标签：php, html

我有一个具有 textarea 表单的 html 页面，当用户键入该 textarea 并按下提交时，php 将该 textarea 的内容写入 txt 文件。

当我在 textarea 中插入这样的内容时

```
line1 what's up
line2
line3 
```

它最终像这样写入txt文件

```
line1 what\'s up

line2

line3 
```

带有额外的空格和额外的斜线。我怎样才能解决这个问题？这是php

```
$myFile = "all.txt";
$fh = fopen($myFile, 'a') or die("can't open file");

$stringData = $content."\n";
fwrite($fh, $stringData);
fclose($fh); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T20:48:28.140

如果您从文本框中检索数据，则数据实际上看起来像

```
line1 what's up\r\n
line2\r\n
line3 
```

所以`\n`在最后添加一个额外的将添加一个额外的行。

至于`\'`这通常发生在启用了magic_quotes 的情况下。在您的网站中快速搜索“magic_quotes”`phpinfo()`会让您知道它是否已打开。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T20:54:30.717

额外的换行符可能是由于正在写入文件的内容和正在读取文件的内容之间的行尾不同造成的。

也许你可以用它`"\n"`来结束你的台词。

单引号的额外转义序列是魔术引号。

考虑这段代码：

```
<?php 

ini_set('magic_quotes_gpc', 'off');
$content = str_replace("\r\n", "\n"); 
```

或者，您可以使用`PHP_EOL`与主机操作系统的行尾匹配的常量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T20:47:35.960

你已经启用了[magic_quotes 。](http://php.net/magic_quotes)禁用它，和/或升级到更新的 PHP。magic_quotes 是魔鬼，而且更邪恶。

# java - 如何将 UTC 时间转换为 Java 中的本地时间？

> ID：13315734
> 
> 赞同：4
> 
> 时间：2012-11-09T20:45:42.590
> 
> 标签：java, time

我有时间来自 1352437114052 格式的 gpslocation 服务。有人可以告诉我如何在 Java、Matlab 或 Excel 中将其转换为当地时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T21:10:21.903

`Date`从纪元以来的毫秒数创建一个新的。然后使用 a`DateFormat`将其格式化为您想要的时区。

```
Date date = new Date(1352437114052L);
DateFormat format = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSSZ");
format.setTimeZone(TimeZone.getTimeZone("PST"));
System.out.println(format.format(date)); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-09T20:49:08.623

这是一个[*纪元时间*](http://www.epochconverter.com)，它代表格林威治标准时间 2012 年 11 月 9 日星期五 04:58:34。这个数值是一个绝对时间点，与时区无关。

如果您想在不同时区查看该时间点，请使用[`GregorianCalendar`](http://docs.oracle.com/javase/7/docs/api/java/util/GregorianCalendar.html)：

```
Calendar c = new GregorianCalendar(TimeZone.getTimeZone("EST"));
c.setTimeInMillis(1352437114052L);
c.get(Calendar.HOUR_OF_DAY); //20:58 the day before 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-06-13T11:31:25.680

使用 JVM 的时区设置（通常与您的计算机的时区相同）的现代 Java 答案：

```
long time = 1_352_437_114_052L;
ZonedDateTime dateTime = Instant.ofEpochMilli(time).atZone(ZoneId.systemDefault());
System.out.println(dateTime); 
```

在我的电脑上运行我得到

> 2012-11-09T05:58:34.052+01:00[欧洲/哥本哈根]

要指定时区：

```
ZonedDateTime dateTime = Instant.ofEpochMilli(time).atZone(ZoneId.of("Asia/Almaty")); 
```

> 2012-11-09T10:58:34.052+06:00[亚洲/阿拉木图]

## 问题：这也适用于 Android 吗？

在这里回答[修补匠的评论](https://stackoverflow.com/questions/13315734/how-to-convert-utc-time-into-local-time-in-java/50836151#comment88734744_50828744)：是的。我正在使用`java.time`现代 Java 日期和时间 API，它在较旧和较新的 Android 设备上运行良好。它只需要至少 Java **6**。

*   In Java 8 and later and on newer Android devices (from API level 26, I’m told) the modern API comes built-in.
*   In Java 6 and 7 get the ThreeTen Backport, the backport of the new classes (ThreeTen for JSR 310; see the links at the bottom).
*   On (older) Android use the Android edition of ThreeTen Backport. It’s called ThreeTenABP. And make sure you import the date and time classes from `org.threeten.bp` with subpackages.

## Links

*   [Oracle tutorial: Date Time](https://docs.oracle.com/javase/tutorial/datetime/) explaining how to use `java.time`.
*   [Java Specification Request (JSR) 310](https://jcp.org/en/jsr/detail?id=310), where `java.time` was first described.
*   [ThreeTen Backport project](http://www.threeten.org/threetenbp/), the backport of `java.time`to Java 6 and 7 (ThreeTen for JSR-310).
*   [ThreeTenABP](https://github.com/JakeWharton/ThreeTenABP), Android edition of ThreeTen Backport
*   [Question: How to use ThreeTenABP in Android Project](https://stackoverflow.com/questions/38922754/how-to-use-threetenabp-in-android-project), with a very thorough explanation.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-08T04:39:38.747

@Steve Kuo 几乎直接回答了这个问题。**这是机器本地时间**的更通用解决方案，包括**夏时制时间**，其中`a`的类型`BasicFileAttributes`是从 Windows 目录条目中报告的`public FileVisitResult visitFile(Path f, BasicFileAttributes a)`during `Files.walkFileTree`：

```
 String modifyDate;
  Date date = new Date(a.lastModifiedTime().to(TimeUnit.MILLISECONDS));
  DateFormat format = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSSZ");
  format.setTimeZone(TimeZone.getDefault());
  modifyDate = (format.format(date)).substring(0,10); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-13T03:38:32.487

```
long timeStamp = System.currentTimeMillis();
System.out.println(timeStamp+"");

Calendar calendar = Calendar.getInstance();
calendar.setTimeZone(TimeZone.getDefault());
calendar.setTimeInMillis(timeStamp);

SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd hh:mm:ss a z");
String dateString = sdf.format(calendar.getTime());
System.out.println(dateString); 
```

* * *

输出 ：

```
timestamp : 1528860439258

dateformat from sdf : 2018-06-12 08:27:19 PM PDT 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-04-26T03:46:06.490

Since new Date(String string) is deprecated now(which is the accepted answer), we can use `DateTimeZone.getDefault()` to get the system time zone

```
 public String getZonedDate(String dateStr) {
    DateTime utcDateTime = new DateTime(dateStr).toDateTime(DateTimeZone.UTC);
    return  utcDateTime
        .toDateTime(DateTimeZone.getDefault()).toString("yyyy-MM-dd'T'HH:mm:ss");
  } 
```

# ajax - 将数组动态加载到脚本标签中

> ID：13315738
> 
> 赞同：0
> 
> 时间：2012-11-09T20:46:18.377
> 
> 标签：ajax

我目前在网站上使用一个[名为 supersized 的全屏图像滑块](http://www.buildinternet.com/project/supersized/)，它在脚本标签中引用图像和相关的附加内容，如下所示：

```
<script type="text/javascript">
    jQuery(function($){
        $.supersized({

            // Functionality
            property_1   :   value,     
            property_2   :   value,     

            slides       :   [
            {image :'http://image1.jpg', title :'Name1', url :'1.html'},
            {image :'http://image2.jpg', title :'Name2', url :'2.html'},
            {image :'http://image3.jpg', title :'Name3', url :'3.html'},
            ],

            // Options             
            option_1     :   value,
            option_1     :   value
        });
    });
</script> 
```

非常棒的是，能够通过 ajax（首选 jquery，但 vanilla js 很好）动态加载一个新的图像数组及其相关的附加内容。这可能吗？如果是这样，我一直在努力寻找任何解释如何的资源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T20:51:20.960

看来您需要自己编写此类功能。

查看插件作者在 FAQ 中写的内容：[http ://www.buildinternet.com/project/supersized/faq.html#q-4](http://www.buildinternet.com/project/supersized/faq.html#q-4)

```
Can I load different sets of slides without reloading the page?
This is a feature I am looking to develop out in the future. If you're hurting for it in the meantime, you can hire me for custom work. 
```

如果您只需要一组由 AJAX 加载的幻灯片，您可以这样编码：

```
jQuery(function($){
  $.ajax({
    url: "URL"
  }).done(function ( data ) {
    $.supersized({

        // Functionality
        property_1   :   value,     
        property_2   :   value,     

        slides       :  data.slides,

        // Options             
        option_1     :   value,
        option_1     :   value
    });
  });
}); 
```

# apache - 使用 Apache 重写规则重写 URL

> ID：13315742
> 
> 赞同：1
> 
> 时间：2012-11-09T20:46:34.133
> 
> 标签：apache, redirect, url-rewriting, drupal-7, drupal-modules

我整天都在谷歌上搜索一个例子来使用 .htaccess 文件进行以下类型的重写，但我什么也没想到。我已经阅读了“写作”重写规则，但我发现这不是一个容易解决的问题。

无论如何，我将如何获取以下网址

不管.com/any/number/or/level/of/directories

并重写到这个 URL

[http://www.whatever.com/any/number/or/level/of/directories](http://www.whatever.com/any/number/or/level/of/directories)？

非常感谢您提前。

编辑

我忘了提及我正在使用的网站的两件事。首先，我正在开发一个使用 Drupal 7 设计的网站。启用了 Redirect 模块。

编辑（.htaccess）

```
#
# Apache/PHP/Drupal settings:
#

# Protect files and directories from prying eyes.
<FilesMatch "\.(engine|inc|info|install|make|module|profile|test|po|sh|.*sql|theme|tpl(\.php)?|xtmpl)$|^(\..*|Entries.*|Repository|Root|Tag|Template)$">
  Order allow,deny
</FilesMatch>

# Don't show directory listings for URLs which map to a directory.
Options -Indexes

# Follow symbolic links in this directory.
Options +FollowSymLinks

# Make Drupal handle any 404 errors.
ErrorDocument 404 /index.php

# Set the default handler.
DirectoryIndex index.php index.html index.htm

# Override PHP settings that cannot be changed at runtime. See
# sites/default/default.settings.php and drupal_environment_initialize() in
# includes/bootstrap.inc for settings that can be changed at runtime.

# PHP 5, Apache 1 and 2.
<IfModule mod_php5.c>
  php_flag magic_quotes_gpc                 off
  php_flag magic_quotes_sybase              off
  php_flag register_globals                 off
  php_flag session.auto_start               off
  php_value mbstring.http_input             pass
  php_value mbstring.http_output            pass
  php_value post_max_size                   65M
  php_value upload_max_filesize             65M
  php_flag mbstring.encoding_translation    off
</IfModule>

# Requires mod_expires to be enabled.
<IfModule mod_expires.c>
  # Enable expirations.
  ExpiresActive On

  # Cache all files for 2 weeks after access (A).
  ExpiresDefault A1209600

  <FilesMatch \.php$>
    # Do not allow PHP scripts to be cached unless they explicitly send cache
    # headers themselves. Otherwise all scripts would have to overwrite the
    # headers set by mod_expires if they want another caching behavior. This may
    # fail if an error occurs early in the bootstrap process, and it may cause
    # problems if a non-Drupal PHP file is installed in a subdirectory.
    ExpiresActive Off
  </FilesMatch>
</IfModule>

# Various rewrite rules.
<IfModule mod_rewrite.c>
  RewriteEngine on

  # Block access to "hidden" directories whose names begin with a period. This
  # includes directories used by version control systems such as Subversion or
  # Git to store control files. Files whose names begin with a period, as well
  # as the control files used by CVS, are protected by the FilesMatch directive
  # above.
  #
  # NOTE: This only works when mod_rewrite is loaded. Without mod_rewrite, it is
  # not possible to block access to entire directories from .htaccess, because
  # <DirectoryMatch> is not allowed here.
  #
  # If you do not have mod_rewrite installed, you should remove these
  # directories from your webroot or otherwise protect them from being
  # downloaded.
  # RewriteRule "(^|/)\." - [F]

  # If your site can be accessed both with and without the 'www.' prefix, you
  # can use one of the following settings to redirect users to your preferred
  # URL, either WITH or WITHOUT the 'www.' prefix. Choose ONLY one option:
  #
  # To redirect all users to access the site WITH the 'www.' prefix,
  # (http://example.com/... will be redirected to http://www.example.com/...)
  # uncomment the following:
  # RewriteCond %{HTTP_HOST} !^www\. [NC]
  # RewriteRule ^ http://www.%{HTTP_HOST}%{REQUEST_URI} [L,R=301]
  #
  # To redirect all users to access the site WITHOUT the 'www.' prefix,
  # (http://www.example.com/... will be redirected to http://example.com/...)
  # uncomment the following:
  # RewriteCond %{HTTP_HOST} ^www\.(.+)$ [NC]
  # RewriteRule ^ http://%1%{REQUEST_URI} [L,R=301]

  RewriteCond %{HTTP_HOST} !^www\.website\.org$ [NC]
  RewriteRule .? http://www.website.org%{REQUEST_URI} [R=301,L]

  # Modify the RewriteBase if you are using Drupal in a subdirectory or in a
  # VirtualDocumentRoot and the rewrite rules are not working properly.
  # For example if your site is at http://example.com/drupal uncomment and
  # modify the following line:
  # RewriteBase /drupal
  #
  # If your site is running in a VirtualDocumentRoot at http://example.com/,
  # uncomment the following line:
  # RewriteBase /

  # Pass all requests not referring directly to files in the filesystem to
  # index.php. Clean URLs are handled in drupal_environment_initialize().
  # RewriteCond %{REQUEST_FILENAME} !-f
  # RewriteCond %{REQUEST_FILENAME} !-d
  # RewriteCond %{REQUEST_URI} !=/favicon.ico
  # RewriteRule ^ index.php [L]

  # Rules to correctly serve gzip compressed CSS and JS files.
  # Requires both mod_rewrite and mod_headers to be enabled.
  <IfModule mod_headers.c>
    # Serve gzip compressed CSS files if they exist and the client accepts gzip.
    RewriteCond %{HTTP:Accept-encoding} gzip
    RewriteCond %{REQUEST_FILENAME}\.gz -s
    RewriteRule ^(.*)\.css $1\.css\.gz [QSA]

    # Serve gzip compressed JS files if they exist and the client accepts gzip.
    RewriteCond %{HTTP:Accept-encoding} gzip
    RewriteCond %{REQUEST_FILENAME}\.gz -s
    RewriteRule ^(.*)\.js $1\.js\.gz [QSA]

    # Serve correct content types, and prevent mod_deflate double gzip.
    RewriteRule \.css\.gz$ - [T=text/css,E=no-gzip:1]
    RewriteRule \.js\.gz$ - [T=text/javascript,E=no-gzip:1]

    <FilesMatch "(\.js\.gz|\.css\.gz)$">
      # Serve correct encoding type.
      Header set Content-Encoding gzip
      # Force proxies to cache gzipped & non-gzipped css/js files separately.
      Header append Vary Accept-Encoding
    </FilesMatch>
  </IfModule>
</IfModule> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T05:29:04.550

类似以下内容应该可以将您的 example.com 重定向到 www.example.com 站点。

```
<IfModule mod_rewrite.c>
  RewriteEngine on  

  RewriteCond %{HTTP_HOST} !^www\. [NC]
  RewriteRule ^ http://www.%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

</IfModule> 
```

这假设您启用了 mod_rewrite 模块。

**更新：** 您还需要确保此虚拟主机的 http 配置文件中有以下声明。

```
<Directory /path/to/your/site>
  AllowOverride All     
</Directory> 
```

# asp.net - 使用持续部署模型自动部署 ASP.Net 网站

> ID：13315747
> 
> 赞同：1
> 
> 时间：2012-11-09T20:46:55.410
> 
> 标签：asp.net, deployment, web

对于我们公司的网站，我们开发的风格最准确地称为持续部署 (http://toni.org/2010/05/19/in-praise-of-continuous-deployment-the-wordpress-com-story/ )

我们有一个网络农场，每个站点都位于两台服务器上，用于故障转移。我们希望自动化部署到我们的开发服务器、测试服务器和产品服务器的过程。Out 网站是 ASP.Net 网站（不是 Web 应用程序），所以我们不进行构建，我们只是推送页面。根据许多变量，我们通常每天更改 2-20 次我们的主站点。这些更改可以是添加新页面/功能的简单文本/html 更改。

目前我们使用 TFS 进行源代码控制，每个站点都是自己的存储库。我们没有分支，您在需要审查时手动将您的更改推送到 dev（我们在本地机器上开发），然后在签署后您签入您的更改并将它们手动推送到 prod（这可以确保源文件是实际在产品上的内容，然后合并发生）。显然，这里有很大的错误空间，而且这种情况很少发生，开发人员忘记了一个关键文件并导致整个站点崩溃。

似乎大多数部署工具都建立在构建过程之上，这不是我们可能会采用的东西，因为我们需要非常敏捷地满足我们的业务需求。我们认为，我们真正想要的是以下内容：

1.  开发人员从源代码​​控制中获取最新版本的网站，本质上是生产的副本
2.  Dev确实在他自己的盒子上工作。
3.  当任务所有者准备好对其进行审查时，他会创建某种形式的变更集（检查变更或其他），然后一个工具会将变更推送给开发人员
4.  在审查（以及进一步可能的更改）之后，开发人员能够让该工具推送此任务的所有更改以进行测试（UAT）
5.  在此注销后，更改会自动推送到 prod 并签入 prod 分支或其他任何内容，以供其他人获取

我们玩弄了在 TFS 中拥有三个代码分支的想法，但我们不确定您将如何从一个分支（prod）中提取但签入到 dev 分支（我们都不是 TFS 专家）。

那么，其他人是如何处理这种情况的呢？如果有什么东西可以做我们想要的，我们不会将 TFS 作为源代码控制提供者，我们也不需要垂直解决方案，我们非常乐意插入不同的组件，只要它们可以插入，甚至在必要时开发我们自己的。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T22:17:14.250

我相信你可以用 TFS 做到这一点，但我已经成功地用 Mercurial 完成了你所描述的事情，而且效果很好。

使用 Mercurial（我假设 Git 也是如此），您可以从一个存储库中提取，然后推送到另一个存储库。因此，您将从 Prod 中提取，进行更改，在本地提交，推送到 Dev，然后只要您满意，就将变更集推送到 Prod（从 Dev 或从本地，没关系）。

首先，您需要有一个 Prod 存储库，然后将其克隆到一个 Dev 存储库中——这两者都在您的服务器上。在这一点上，它们是相同的。

Windows 上的 TortoiseHG 使您能够轻松选择要同步的存储库。您可以将 Prod 和 Dev 存储库都保留在您的列表中，并决定在需要拉取或推送时使用哪一个。

# css - 使用 CSS 根据原始大小调整图像大小

> ID：13315749
> 
> 赞同：0
> 
> 时间：2012-11-09T20:47:02.377
> 
> 标签：css

我正在为移动和桌面用户制作一个响应式博客（多合一）。关于图像大小调整，我知道我可以使用 width:100%; 高度：100%；以便它们根据页面大小按比例缩放，但我注意到较小的图像会放大以适应它所在的 DIV 的宽度。假设我的 DIV 的最大宽度为 640px，但我包含在其中的图像500 像素。

如果分辨率宽度低于 500 像素，我可以使用什么 CSS 将图像保持在 500 像素，然后按比例缩小？

我问这个的原因是因为并非帖子中的所有图像都可能是 640 像素宽。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T20:49:15.473

将您的图像`max-width`属性设置为实际图像大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T20:52:26.353

为什么不设置 max-width:100% 并关闭宽度。

# matlab - 用于访问 matlab 结构数组中的字段的更好代码？

> ID：13315751
> 
> 赞同：1
> 
> 时间：2012-11-09T20:47:04.607
> 
> 标签：matlab, reflection, structure

我有一个`Modles1`大小为 (1x180) 的 matlab 结构数组，其中包含字段`a`, `b`, `c`, ..., `z`。

我想了解每个字段中有多少不同的值。IE

```
max(grp2idx([foo(:).a])) 
```

如果该字段`a`是双精度的，则上述方法有效。 `{foo(:).a}`需要在字段 a 是字符串/字符的情况下使用。

这是我当前执行此操作的代码。我讨厌不得不使用 eval，而这本质上是一个 switch 语句。有没有更好的办法？

```
names = fieldnames(Models1);
for ix = 1 : numel(names)
    className = eval(['class(Models1(1).',names{ix},')']);
    if strcmp('double', className) || strcmp('logical',className)
        eval([' values = [Models1(:).',names{ix},'];']);
    elseif strcmp('char', className)
        eval([' values = {Models1(:).',names{ix},'};']);
    else
        disp(['Unrecognized class: ', className]);
    end
    % this line requires the statistics toolbox.
    [g, gn, gl] = grp2idx(values);
    fprintf('%30s : %4d\n',names{ix},max(g));
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T21:11:53.430

确实，有更好的方法。令人惊讶的是，MATLAB 允许您使用不带 的键字符串访问结构字段`eval`，例如：

```
Models1(1).(names{ix}) 
```

因此，您可以这样写：

```
className = class(Models1(1).(names{ix});
...
values = [Models1(:).(names{ix})];
...
values = {Models1(:).(names{ix})}; 
```

此外，您可以使用 来测试相同的条件，而不是使用`class`and ：`strcmp`[`isa`](http://www.mathworks.com/help/matlab/ref/isa.html)

```
v1 = Models1(1).(names{ix});
if (isa(v1, 'double') || isa(v1, 'logical'))
    values = [Models1(:).(names{ix})];
    % # ...
elseif (isa(v1, 'char'))
    values = {Models1(:).(names{ix})};
    % # ...
else
    disp(['Unrecognized class: ', class(v1)]);
end 
```

它应该快得多。

# windows-phone-8 - Windows phone 8 C++ 组件调试 - 无符号

> ID：13315753
> 
> 赞同：0
> 
> 时间：2012-11-09T20:47:09.600
> 
> 标签：windows-phone-8, windows-phone-8-emulator

我从 Microsofts XAML - Visual Studio 2012 中的 Direct3d 模板创建了一个 Windows Phone 8 项目。

当我在 C#-Xaml 项目中放置断点并开始调试时，调试器在断点处停止，没有问题。

但是，如果我在 C++-Direct3D 组件项目中放置断点，则断点永远不会被命中，并且调试器会抱怨没有加载任何符号，并且模块浏览器会说二进制文件不是使用调试信息构建的。

我已经三次检查了 C++ 组件的项目设置，并且确实正在构建调试符号。

如何使 C++ 组件中的调试和断点正常工作？

从 VS 2012 的模块窗口：

```
PhoneDirect3DXamlAppComponent.winmd C:\Data\Programs\{0827E110-DAB9-49BB-A331-0A7FF54F418C}\Install\PhoneDirect3DXamlAppComponent.winmd No  N/A Binary was not built with debug information.        10      11/9/2012 12:29 PM  03640000-03642000   [2568] TaskHost.exe [1] Silverlight AppDomain 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T14:40:14.113

我不确定这是否可以解决您的问题，但无论如何您应该将调试器从“仅限托管”切换为“仅限本机”。您可以在*托管*项目的属性屏幕中执行此操作。（可能在“UI 任务”下）

# jquery - jquery Ajax 嵌套在先前的 Ajax 成功 fn 中不更新 DOM

> ID：13315754
> 
> 赞同：1
> 
> 时间：2012-11-09T20:47:14.943
> 
> 标签：jquery

**期望的结果：** 第二个 ajax 调用应该将返回的数据注入到 DOM 中的 div #co_label。

*   第一个 alert() 中有正确的数据
*   第二个 alert() 表明第二个 ajax 调用返回了正确的信息。但是，该数据不会注入到 DOM 中。
*   Chrome 的调试器中没有控制台错误

jQuery / Javascript：

```
$(document).on('click', '.mledit', function(event) {
    var company_id = this.id.split( 'editcopro_' )[1];
    $.ajax({
        type: "POST",
        url: "ajax/ax_all_ajax_fns.php",
        data: 'request=edit_company_data&company_id='+company_id,
        success:function(data){
            $('#co_label').html(data);
            var client_user_id = company_id;

            $('#co_label').dialog({
                autoOpen: true,
                height: 600,
                width: 800,
                modal: true,
                buttons: 
                    {
                        Okay: function() {
                            //Var defs for cn, cp, cw, ct, a1, etc.
                            $.ajax({
                                type: "POST",
                                url: "ajax/ax_all_ajax_fns.php",
                                data: 'request=update_edited_company_data&client_user_id='+client_user_id+'&co_name='+cn+'&co_phone1='+cp+'&co_website='+cw+'&co_city='+ct+'&co_addr1='+a1+'&co_addr2='+a2+'&co_acct_name='+an+'&co_acct_phone='+ap+'&co_acct_email='+ae+'&co_prov='+pv+'&co_pcode='+pc+'&co_country='+co+'&notes='+co_notes,
                                success: function(data) {
                                    $( '#alert' ).html( data );
                                    $( '#alert' ).dialog( 'open' );

                                    $.ajax({
                                        type: "POST",
                                        url: "ajax/ax_all_ajax_fns.php",
                                        data: 'request=update_edited_mailing_label&user_level='+user_level+'&user_id=' + user_id+'&user_type=' + user_type,
                                        success:function(data){
                                            $('#label_top').html(data);
                                        }
                                    });
                                } //End success
                            }); //End ajax[update_edited_company_data]
                            $( this ).dialog( "close" );
                        },
                        Cancel: function() {
                            $( this ).dialog( "close" );
                            window.location = '';
                        }
                    }
            })
        }
    });
}); 
```

更新：

我刚刚注意到这一点：通过 Chrome 开发人员和/或 Firebug，在 JQueryUI dlg 关闭后，整个 #co_label DIV 从文档中丢失。这条线之间似乎发生了一些事情：

```
$('#co_label').html(data); 
```

这行：

```
$('#co_label').dialog({ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T21:19:35.260

您是否尝试过使用 .val(data) 而不是使用 .html(data) ：

```
 $('#co_label').val(data); 
```

[API 文档](http://api.jquery.com/html/#html2)指出，在处理 XML 时不能使用 .html() ，这可能不是问题，但我之前使用 .html 时遇到过问题，而是使用了 .val 。如果您只是将非 HTML 格式的数据插入空 ID，则 .val() 应该适合您。

# sql - 如何比较包含 .NET System.Version 类等版本号的 SQL 字符串？

> ID：13315756
> 
> 赞同：2
> 
> 时间：2012-11-09T20:47:26.143
> 
> 标签：sql

> **可能重复：**
> [如何使用 SQL Server 比较软件版本？](https://stackoverflow.com/questions/11364242/how-to-compare-software-versions-using-sql-server)

我是一个完整的 sql 新手，但是今天我在工作中发现了一个非常重要的 sql 查询中的错误。所以我可以使用一些帮助：

给定一个代表产品版本的 sql 字符串

'15.0.0.0'

有没有一种万无一失的方法来排序或比较该字符串，类似于.NET 类[System.Version](http://msdn.microsoft.com/en-us/library/system.version.aspx)比较实例的方式？

因此，考虑到这样一个假设的构造、功能或其他任何东西，我预计“15.5.568”会大于“15.0.0.0”。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T21:03:05.497

只需添加@Gordon 的建议，这是 ParseName 的示例

```
; WITH tmp
AS
(
    SELECT '1.0.0.5' AS Version
    UNION ALL SELECT '1.5.0.06'
    UNION ALL SELECT '1.0.0.06'
    UNION ALL SELECT '2.0.0.0'
    UNION ALL SELECT '2.0.1.1'
    UNION ALL SELECT '15.15.1323.22'
    UNION ALL SELECT '15.15.622.55'
)
SELECT *
FROM
(
    SELECT CAST(PARSENAME(Version, 4) AS INT) AS col1
        , CAST(PARSENAME(Version, 3) AS INT) AS col2
        , CAST(PARSENAME(Version, 2) AS INT) AS col3
        , CAST(PARSENAME(Version, 1) AS INT) AS col4
    FROM tmp
) t0
ORDER BY col1, col2, col3, col4 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-09T21:22:44.663

假设 SQL Server 和已知的最大部件数，这里有一个用户定义的函数，其作用与 相同`parsename`，但适用于任意数量的部件：

```
Create Function dbo.VersionNthPart(@version as nvarchar(max), @part as int) returns int as
Begin

  Declare
    @ret as int = null,
    @start as int = 1,
    @end as int = 0,
    @partsFound as int = 0

  if @version is not null
  Begin
    Set @ret = 0
    while @partsFound < @part
    Begin
      Set @end = charindex('.', @version, @start)
      If @end = 0
        Set @partsFound = @part -- bail early
      else
      Begin
        Set @partsFound = @partsFound + 1
        If @partsFound = @part
          Set @ret = Convert(int, substring(@version, @start, @end - @start))
        Else
          Set @start = @end + 1
      End
    End
  End
  return @ret
End 
```

示例用法：

```
With
  tmp
As (
    Select '1.0.0.5' As Version
    Union All Select '1.5.0.06'
    Union All Select '1.0.0.06'
    Union All Select '2.0.0.0'
    Union All Select '2.0.1.1'
    Union All Select '15.5.568'
    Union All Select '15.0.0.0'
    Union All Select '15.15.1323.22'
    Union All Select '15.15.622.55'
)

Select
  *
From
   tmp
Order By
  dbo.VersionNthPart(Version, 1),
  dbo.VersionNthPart(Version, 2),
  dbo.VersionNthPart(Version, 3),
  dbo.VersionNthPart(Version, 4) 
```

[http://sqlfiddle.com/#!3/e942b/3](http://sqlfiddle.com/#!3/e942b/3)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-09T21:00:29.333

如果您的小数点不超过三位，那么您可以使用 parsename。以下将两个版本号校正为具有 4 个字符的值，因此字符串比较有效。你的例子是“0015.0000.0000.0000.0000”。

```
select (case when (right('0000'+coalesce(parsename(v1, 4), '', 4)) +
                   right('0000'+coalesce(parsename(v1, 3), '', 4)) +
                   right('0000'+coalesce(parsename(v1, 2), '', 4)) +
                   right('0000'+coalesce(parsename(v1, 1), '', 4))
                  ) < 
                  (right('0000'+coalesce(parsename(v2, 4), '', 4)) +
                   right('0000'+coalesce(parsename(v2, 3), '', 4)) +
                   right('0000'+coalesce(parsename(v2, 2), '', 4)) +
                   right('0000'+coalesce(parsename(v2, 1), '', 4))
                  )
             then -1
             when v1 = v2
             then 0
             else 1
         end) as Comparison 
```

请注意， parsename() 最多只能处理名称中的四个部分。

如果您只想排序，那么以下将起作用：

```
order by (right('0000'+coalesce(parsename(v1, 4), '', 4)) +
          right('0000'+coalesce(parsename(v1, 3), '', 4)) +
          right('0000'+coalesce(parsename(v1, 2), '', 4)) +
          right('0000'+coalesce(parsename(v1, 1), '', 4))
         ) 
```

# linq - 潜在列不固定时的 LINQ 部分交叉表查询

> ID：13315757
> 
> 赞同：1
> 
> 时间：2012-11-09T20:47:28.943
> 
> 标签：linq, entity-framework, linq-to-entities

我需要为导出生成一个“扁平化”版本的数据，其中客户希望相关的表行显示为列。我们正在使用实体框架 4 和 .NET 4.0

客户可以为其活动创建自定义问题。可能有零到无限的问题。参加活动的用户可能不回答、回答部分或全部这些问题。

![部分实体图](../Images/55ac336a63fc77727c20c08d9faef47c.png)

我需要制作的是这样的：

```
User 1    User 1 info field A   User 1 info field B    User 1 Answer to question A    User 1 Answer to Question B
User 2    User 2 info field A   User 2 info field B    User 2 Answer to question A    User 2 Answer to Question B 
```

创建结果集的用户信息部分不是问题，但我对如何获取相关问题和答案感到困惑，即：

```
from urf in tblUserRegistrationFields.Include("tblRegistrationFields")
where urf.UserID == eachUserID && urf.tblRegistrationField.EventID == thisEventID
select new
{
    FieldLabel = urf.tblRegistrationField.FieldLabel, //this is the question name
    value = urf.value //this is the user's answer
} 
```

并将这些添加到我的用户选择语句中作为单独的列，即：

```
var users = from u in context.tblUsers
            <snip>
            select new
            {
                UserID = u.UserID,
                <snip>,
                CustomQuestionA = AnswerA,
                CustomQuestionB = AnswerB,
                ... etc.
            }; 
```

最终我需要创建一个网格，然后我可以将其导出为他们想要的格式，并且我对非 LINQ 解决方案持开放态度（尽管购买 3rd 方控件不是一种选择。）我怀疑有一种方法可以利用 LINQ 的分组功能，但我无法将其应用于这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T18:17:41.263

我找到了一种在 SQL 中进行动态数据透视的方法，但无法让它与*两个*相关的表一起工作，只有一个。动态 SQL 在这里转： [http ://www.simple-talk.com/blogs/2007/09/14/pivots-with-dynamic-columns-in-sql-server-2005/](http://www.simple-talk.com/blogs/2007/09/14/pivots-with-dynamic-columns-in-sql-server-2005/)

最终，我退回并手动创建了一个数据集。这当然不是一个优化的解决方案，但它为客户提供了他们想要的东西。对于大量数据，我不推荐这种方法。

我创建了数据集和数据表固定列，然后遍历问题列表：

```
//get the list of questions
var context = new EventRegistrationEntities();
var customQuestions = from rf in context.tblRegistrationFields
                      where rf.EventID == vEventID
                      select new
                      {
                          RegistrationFieldID = rf.RegistrationFieldID,
                          FieldLabel = rf.FieldLabel
                      };

//add a question column for each question
List<string> extracolumns = new List<string>();

foreach (var q in customQuestions)
{
    dt.Columns.Add(q.FieldLabel, typeof(string));

    //store the question names for later user
    extracolumns.Add(q.RegistrationFieldID.ToString() + "-" + q.FieldLabel.ToString());
} 
```

接下来，我遍历用户列表并插入固定数据，然后在该循​​环中（呃）添加用户的答案：

```
foreach (var c in extracolumns) //these are the custom *questions*
{
    int regID = Convert.ToInt32(c.Substring(0, c.IndexOf("-")));
    string question = c.Substring(c.IndexOf("-") + 1); //we need to pass the question text (aka column header) in because if the user hasn't answered the question we have no access to it from here

    //get the question answer
    var userAnswer = (from urf in context.tblUserRegistrationFields.Include("tblRegistrationFields")
                      where urf.UserID == u.UserID && urf.RegistrationFieldID == regID
                      select new
                      {
                          Question = urf.tblRegistrationField.FieldLabel,
                          Answer = urf.value
                      }).FirstOrDefault();

     //add the answer to the data row
     if (userAnswer != null)
     {
         dr[question] = userAnswer.Answer.ToString();
     }
     else
     {
         dr[question] = ""; //if the user has not answered the question, insert a blank
     }
 } 
```

# magento - 更好的可配置产品 - 还加载相关产品

> ID：13315762
> 
> 赞同：1
> 
> 时间：2012-11-09T20:47:53.880
> 
> 标签：magento, module

我们正在使用 Magento 模块 DerModPro_BCP（Betterconfigurable Products）。

我们有基于简单产品的可配置产品。其中一些简单的产品有相关的产品。

选择配置选项时，应加载分配的简单产品的相关产品。

更改选项时添加要重新加载的块的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T14:52:32.067

该扩展在 AJAX 请求期间呈现完整的简单产品，并通过 Xpath 查询从生成的 HTML 中提取必要的数据。然后它将这些数据发送到浏览器，在浏览器中使用 CSS 查询来替换页面中的内容

1.  使用以下内容创建一个新模块`config.xml`
2.  在节点中`global/bcp/update_selector_list`添加一个新节点`<related />`
3.  在`default/dermodpro_bcp`添加`<update_related_....`条目以定义 Xpaths 和 CSS 路径

此外，如果没有定义相关产品，则`catalog/product/list/related.phtml`必须在您的主题中修改以包含一个空`<div>`作为占位符。

# java - 使用java在jsp文件中显示实体列表

> ID：13315767
> 
> 赞同：0
> 
> 时间：2012-11-09T20:48:08.213
> 
> 标签：java, html, google-app-engine, jsp, servlets

我正在尝试在 .jsp 文件中显示实体列表，但出现此错误：

```
Unable to compile class for JSP: 

An error occurred at line: 28 in the jsp file: /guestbook.jsp
Can only iterate over an array or an instance of java.lang.Iterable
25:     </tr>
26:     <tr>
27:     <%
28:         for (Entity drugtarget : "${drugtargets}") {
29:         %>
30:     <td> 
31:     <% 
```

这是我在 servlet 类中的查询：

```
DatastoreService datastore = DatastoreServiceFactory.getDatastoreService();
Query query = new Query("DrugTarget").addSort("drug", Query.SortDirection.DESCENDING);
List<Entity> drugtargets = datastore.prepare(query).asList(FetchOptions.Builder.withLimit(10));

req.setAttribute("drugtargets", drugtargets); 
```

这就是我将drugtargets发送到jsp文件的方式：

```
String url = "/guestbook.jsp";
ServletContext sc = getServletContext();
RequestDispatcher rd = sc.getRequestDispatcher(url);
try {
    rd.forward(req, resp);
} catch (ServletException e) {
    e.printStackTrace();
} 
```

最后是我如何编写jsp部分：

```
<table border="1">
  <tr>
    <th>Drug Names</th>
    <th>Target Names</th>
  </tr>
  <tr>
    <%
      for (Entity drugtarget : "${drugtargets}") {
    %>
    <td> 
    <%
      pageContext.setAttribute("drug_content",
                                drugtarget.getProperty("drug"));
    %>
    ${fn:escapeXml(drug_content)}
    </td>
    <td>
    <%
      pageContext.setAttribute("target_content",
                                drugtarget.getProperty("target"));
    %>
    ${fn:escapeXml(target_content)}
    </td>   
    <%
      }
    %>
  </tr>
</table> 
```

我想我犯了语法错误，但我不确定。我检查了一些示例，并使用了相同的方式（将实体列表从 servlet 发送到 jsp 并到达 jsp 文件中的实体）。如何解决此错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T20:58:40.903

在使用 servlet 和 EL 时，您根本不应该使用*scriptlet*（那些`<% %>`带有 Java 代码的老式东西）。请改用[JSTL](https://stackoverflow.com/tags/jstl/info)之类的标记库。它提供[`<c:forEach>`](http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/c/forEach.html)标签来迭代集合。

例如，

```
<%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions" %>
...
<table border="1">
  <tr>
    <th>Drug Names</th>
    <th>Target Names</th>
  </tr>
  <c:forEach items="${drugtargets}" var="drugtarget">
    <tr>
      <td>${fn:escapeXml(drugtarget.drug)}</td>
      <td>${fn:escapeXml(drugtarget.target)}</td>
    </tr>
  </c:forEach>
</table> 
```

*`<tr>`（请注意，我还通过将循环放入内部来修复表格行的呈现）*

简单多了，不是吗？顺便说一句，您也可以只使用`<c:out value="${drugtarget.drug}"/>`这些功能来代替。

如果可以的话，我建议将以下内容添加到您的 web 应用程序`web.xml`中，以完全禁用*scriptlet*，以便您被迫以正确的方式做事。

```
<jsp-config>
    <jsp-property-group>
        <url-pattern>*.jsp</url-pattern>
        <scripting-invalid>true</scripting-invalid>
    </jsp-property-group>
</jsp-config> 
```

### 也可以看看：

*   [如何避免 JSP 文件中的 Java 代码？](https://stackoverflow.com/questions/3177733/how-to-avoid-java-code-in-jsp-files/3180202#3180202)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T20:55:03.040

在这种情况下，“${drugtargets}”是一个字符串，而不是您传递的列表。我建议使用循环。干净多了

```
<c:forEach var="drugtarget " items="${drugtargets}"> 
.... Your code here ...
</c:forEach> 
```

# symfony - Doctrine - 在一个查询中获取实体和关系

> ID：13315768
> 
> 赞同：5
> 
> 时间：2012-11-09T20:48:16.647
> 
> 标签：symfony, doctrine-orm

我错过了 Doctrine 的观点吗？它在某些场景中非常有用，但对于使用 Id 检索实体的基本场景（例如使用 find() 或 findOneBy()），为什么您会看到每个关系都触发查询以填充主实体的属性？

当然，使用我创建的映射/注释，Doctrine 应该能够进行一些连接和一个查询，而无需编写 DQL 查询来检索每个实体。

或者，正如我预测的那样，我是否在某个地方错过了重点！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T21:17:14.243

只需将相关实体的别名添加到`select`您的部分查询中。

假设您有`Book`一对多的关联`Cover`，并且您想要选择一些带有封面的书籍。

使用查询生成器，使用：

```
->createQueryBuilder()
->select("book, cover")
->from("Book", "book")
->leftJoin("book.covers", "cover") 
```

通过查询，使用：

```
SELECT book, cover FROM Book book LEFT JOIN book.covers cover 
```

结果，您将收到`Book`带有预填充集合的`$covers`集合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T21:04:29.877

因为仅在需要时才对关系进行水合 - 默认情况下，Doctrine 使用延迟加载策略。如果您已经知道您将访问相关实体，您应该构建一个 DQL 查询来检索记录和相关实体。

# c - 如何让多个线程不干扰读取多个文件？

> ID：13315771
> 
> 赞同：1
> 
> 时间：2012-11-09T20:48:26.533
> 
> 标签：c, thread-safety, pthreads, mutex

我正在研究互斥体，但我陷入了练习中。对于给定目录中的每个文件，我必须创建一个线程来读取它并显示其内容（如果顺序不正确，没问题）。

到目前为止，线程正在运行这个函数：

```
void * reader_thread (void * arg)
{   

    char * file_path = (char*)arg;
    FILE * f;
    char temp[20];
    int value;

    f=fopen(file_path, "r");
    printf("Opened %s.\n",file_path);

    while (fscanf(f, "%s",temp)!=EOF)
        if (!get_number (temp, &value)) /*Gets int value from given string (if numeric)*/
             printf("Thread %lu -> %s: %d\n", pthread_self(), file_path, value );

    fclose(f);
    pthread_exit(NULL);

} 
```

由接收指针的函数调用，该`DIR`指针先前由`opendir()`. （我在这里省略了一些错误检查以使其更清晰，但我完全没有错误。）

```
int readfiles (DIR * dir, char * path)
{

    struct dirent * temp = NULL;        
    char  * file_path;
    pthread_t thList [MAX_THREADS];
    int nThreads=0, i;

    memset(thList, 0, sizeof(pthread_t)*MAX_THREADS);
    file_path=malloc((257+strlen(path))*sizeof(char));      

    while((temp = readdir (dir))!=NULL && nThreads<MAX_THREADS) /*Reads files from dir*/
    {

        if (temp->d_name[0] != '.')                     /*Ignores the ones beggining with '.'*/
        {   
            get_file_path(path, temp->d_name, file_path);   /*Computes rute (overwritten every iteration)*/
            printf("Got %s.\n", file_path);
            pthread_create(&thList[nThreads], NULL, reader_thread, (void * )file_path)  

            nThreads++; 
        }       
    }

    printf("readdir: %s\n", strerror (errno ));     /*Just in case*/

    for (i=0; i<nThreads ; i++)
        pthread_join(thList[i], NULL)

    if (file_path)
        free(file_path);

    return 0;

} 
```

我的问题是，虽然路径计算得很好，但线程似乎没有收到正确的参数。他们都读取同一个文件。这是我得到的输出：

```
Got test/testB.
Got test/testA.
readdir: Success
Opened test/testA.
Thread 139976911939328 -> test/testA: 3536
Thread 139976911939328 -> test/testA: 37
Thread 139976911939328 -> test/testA: -38
Thread 139976911939328 -> test/testA: -985
Opened test/testA.
Thread 139976903546624 -> test/testA: 3536
Thread 139976903546624 -> test/testA: 37
Thread 139976903546624 -> test/testA: -38
Thread 139976903546624 -> test/testA: -985 
```

如果我在下一个线程开始之前加入线程，它可以正常工作。所以我假设某处有一个关键部分，但我真的不知道如何找到它。我试过互斥整个线程函数：

```
void * reader_thread (void * arg)
{   

    pthread_mutex_lock(&mutex_file);
    /*...*/
    pthread_mutex_unlock(&mutex_file);

} 
```

此外，在第二个函数中对 while 循环进行互斥。甚至两者同时。但它不会以任何方式工作。顺便说一句， mutex_file 是一个全局变量，由`pthread_mutex_init()`in初始化`main()`。

我真的很感谢你的建议，因为我真的不知道我做错了什么。我也希望有一些好的参考资料或书籍，因为互斥锁和 System V 信号量对我来说有点困难。

非常感谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T20:53:48.270

好吧，您将与文件路径完全相同的指针传递给两个线程。结果，他们从同一个字符串中读取文件名并最终读取同一个文件。实际上，你在这里有点幸运，因为实际上你有一个竞争条件——你更新字符串指针的内容，`file_path`同时启动从该指针读取的线程，所以你最终可能会有一个线程在它读取该内存时正在改变。您需要做的是分别为每个线程分配一个参数（即循环`malloc`中的调用和相关逻辑`while`），然后在线程退出后释放这些参数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T20:54:56.463

看起来您正在为所有线程使用相同的 file_path 缓冲区，只是用下一个名称一遍又一遍地加载它。您需要为每个线程分配一个新字符串，并让每个线程在使用后删除该字符串。

*编辑*

由于您已经有一个线程数组，您可以只创建一个 char[] 的并行数组，每个数组都保存相应线程的文件名。这将避免 malloc/free。

# android - 在 XML 中不使用完全限定类名的自定义视图

> ID：13315775
> 
> 赞同：0
> 
> 时间：2012-11-09T20:48:34.737
> 
> 标签：android

我想我在某处读到过，您可以通过某种方式设置自定义视图类，这样您就不需要在 XML 中通过完全限定的类名来引用它们。但是，我再也找不到关于此的任何信息了。

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T21:32:16.073

创建您自己的`LayoutInflater`并将其提供给 System 的`LayoutInflator`via`setFactory()`或`setFactory2()`。你`LayoutInflator`的 's 将首先被调用，在这里你可以只`View`用它们的名字来扩展你自己的类（因为你`LayoutInflator`将使用你告诉它的包名）。

# c++ - Qt 数据库驱动程序

> ID：13315780
> 
> 赞同：2
> 
> 时间：2012-11-09T20:48:47.483
> 
> 标签：c++, sql, qt, driver

我用 -plugin-sql-mysql -plugin-sql-sqlite 标志构建了 qt。我有 libqsqlmysql.a 和 libqsqlite.a。我在我的项目中使用 qt。但是我的构建系统不是qt，我用的是waf。

当我尝试运行与 mysql 数据库建立连接的应用程序时遇到以下问题：

```
QSqlDatabase: QMYSQL driver not loaded                                                    
QSqlDatabase: available drivers:                                                          
QSqlDatabase: an instance of QCoreApplication is required for loading driver plugins      
INFO - Failed to connect to root mysql admin 
```

我在构建应用程序时将 -lqsqlmysql 添加到编译器选项中。

您能否解释一下 qt 驱动程序是如何工作的，它如何以及何时尝试加载驱动程序。什么是 qt 驱动程序（dll、lib、....）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T21:06:08.370

我认为您的应用程序正在尝试从 DLL 动态加载数据库插件。[本文档](http://doc.qt.io/qt-4.8/deployment-plugins.html)将帮助您找到数据库驱动程序 DLL 的适当位置。或者，您可以将您的应用与插件静态链接，[方法](http://doc.qt.io/qt-4.8/plugins-howto.html#static-plugins)如下。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T22:42:25.220

Qt 有多种类型数据库的插件，这些插件位于以下位置：

```
$(QTDIR)/plugins/sqldrivers 
```

首先检查那里是否存在mysql插件。如果没有插件，则意味着您没有正确编译 Qt，因此您应该使用启用的 MySql 插件重新编译 Qt。否则您的应用程序可能无法正确加载 mysql 插件。Qt 插件在应用程序初始化期间动态加载，即在初始化 QSqlDatabase 对象时。如果插件位置设置不正确，则不会加载任何插件。您可以通过以下 Qt API 检查应用程序期望找到插件的位置：

```
QStringList QCoreApplication::libraryPaths () 
```

如果应用程序没有指向正确的位置，您可以通过调用以下方法设置插件路径：

```
void QCoreApplication::addLibraryPath ( const QString & path ) 
```

  或者通过在放置可执行文件的文件夹中创建 qt.conf 文件。在此文件中，您可以通过以下方式配置插件位置：

```
[Paths]
Plugins = %pluginlocation% 
```

# c# - GridView 中的编辑功能仅在第一行有效

> ID：13315783
> 
> 赞同：0
> 
> 时间：2012-11-09T20:49:06.317
> 
> 标签：c#, asp.net

我的插入和删除功能工作正常，但编辑功能出现问题。编辑功能仅适用于该行的第一行，但如果我尝试编辑第二行或第三行，则会收到此错误：“必须声明标量变量“@Post_ID”这是我的代码：

```
GridViewRow row = (GridViewRow)GridView1.Rows[e.RowIndex];
        int id = Int32.Parse(GridView1.DataKeys[e.RowIndex].Value.ToString());
        TextBox date = (TextBox)row.FindControl("date");

        SqlCommand cmd = new SqlCommand();
        cmd.CommandText =    "update t_your_table " +
                             "set " +                                 
                             "date = @date, " +             
                             " time = @time  where id = @ID "                             

    cmd.Parameters.Add("@id", SqlDbType.VarChar).Value = id;           
    cmd.Parameters.Add("@date", SqlDbType.VarChar).Value = date.Text; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T21:06:05.257

您正在对这段代码中的行进行硬编码：

```
TextBox myTextBox11 = GV_InlineEditing.Rows[0].FindControl("GV_Post_ID") as TextBox; 
```

`.Rows[0]`无论状态如何，总会找到第一行。[您可能希望使用EditIndex 属性](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.editindex.aspx)查看正在编辑的行。

# cuda - 无法在 cuda 内核函数中使用 printf

> ID：13315787
> 
> 赞同：3
> 
> 时间：2012-11-09T20:49:25.907
> 
> 标签：cuda, printf

似乎`printf`在 cuda 代码的内核中不起作用

```
#include "Common.h"
#include<cuda.h>
#include <stdio.h>

__device__ __global__ void Kernel(float *a_d , float *b_d ,int size)
{
    int idx = threadIdx.x ;
    int idy = threadIdx.y ;
    //Allocating memory in the share memory of the device
    __shared__ float temp[16][16];

    //Copying the data to the shared memory
    temp[idy][idx] = a_d[(idy * (size+1)) + idx] ;

    printf("idx=%d, idy=%d, size=%d\n", idx, idy, size);

    for(int i =1 ; i<size ;i++) {
            if((idy + i) < size) { // NO Thread divergence here
                    float var1 =(-1)*( temp[i-1][i-1]/temp[i+idy][i-1]);
                    temp[i+idy][idx] = temp[i-1][idx] +((var1) * (temp[i+idy ][idx]));
            }
            __syncthreads(); //Synchronizing all threads before Next iterat ion
    }
    b_d[idy*(size+1) + idx] = temp[idy][idx];
} 
```

编译时，它说：

```
 error: calling a host function("printf") from a __device__/__global__ function("Kernel") is not allowed 
```

cuda版本是4

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-10T00:30:35.033

引用 CUDA 编程指南“[格式化输出仅受计算能力 2.x 及更高版本的设备支持](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#formatted-output)”。有关更多信息，请参阅编程指南。

计算能力 < 2.x 的设备可以使用 cuPrintf。

如果您使用的是 2.x 及更高版本的设备并且您正在尝试使用 printf，请确保您已指定 arch=sm_20（或更高版本）。默认值为 sm_10，它没有足够的特性来支持 printf。

NVIDIA 为 CUDA 提供了三个源代码级调试器。在检查变量时，您可能会发现这些比 printf 更有用。- Nsight Visual Studio 版 CUDA 调试器 - Nsight Eclipse 版 CUDA 调试器 - cuda-gdb

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-09T21:12:19.990

您需要使用 cuPrintf，如[本例所示](http://www.cs.usfca.edu/~peter/cs625/code/cuprintf_test.cu)。请注意，printf 是一种非常有限的调试方式，Nsight 或 Nsight eclipse 版本的 IDE 要好得多。

# html - HTML5：访问大型结构化本地数据

> ID：13315790
> 
> 赞同：6
> 
> 时间：2012-11-09T20:49:40.193
> 
> 标签：html, local-storage, filereader, opendatabase

**总结：** 有没有很好的 HTML5/javascript 选项可以选择性地从大型本地文件中读取数据块（假设最终转换为 JSON）？

**我要解决的问题：**
一些现有程序在本地输出大量数据。我想提供一个基于浏览器的交互式查看器，允许人们浏览这些结果。我可以控制数据的写出方式。我可以将它全部写在一个大文件中，但由于它非常大，我不能只在内存中读取整个内容。因此，我正在从我的 web 应用程序中寻找某种索引或类似 db 的访问。

**对解决方案的思考：**
1\. 蛮力：HTML5 FileReader API 有一个不错的 slice() 方法用于随机访问。所以我可以在文件的开头写出某种索引，用它来查找其他存储对象的位置，并在需要时读取它们。我想在尝试实现这个丑陋的东西之前，我想问一下是否已经有 javascript 库可以做这样（或更好）的事情。

2\. HTML5本地数据库。本质上，我正在寻找一个类似于 HTML5 openDatabase() 调用的方法，该调用将基于用户指定的本地文件打开（只读）到数据库的连接。据我了解，无法指定带有预加载数据库的文件。此外，即使有这样的黑客攻击，也不清楚本地文件格式是否跨浏览器相同。我已经看到了从 SQL 语句填充浏览器本地数据库的 phonegap 解决方案。我也可以这样做，但是我说的数据非常大（5-10GB）：加载需要一段时间，而且这种重复似乎毫无意义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T22:41:04.710

HTML5 听起来并不适合您的需求。HTML5 的重点是客户端，根据您的描述，您对浏览器的要求很多，很可能超出了它们的处理能力。

相反，我建议您查看基于服务器的解决方案，以将所需的目标/结果传递给客户端视图，像 Splunk 这样的产品将是一个值得考虑的好产品。

# erlang - “原始”脏操作和 mnesia:async_transaction 中的脏操作有什么区别

> ID：13315791
> 
> 赞同：5
> 
> 时间：2012-11-09T20:49:49.023
> 
> 标签：erlang, mnesia

在传递给 mnesia:async_dirty() 的函数中执行的一系列 mnesia:dirty_ 命令与“原始”执行的相同事务有什么区别？

即，这样做有什么区别：

```
mnesia:dirty_write({table, Rec1}),
mnesia:dirty_write({table, Rec1}),
mnesia:dirty_write({table, Rec1}) 
```

和

```
F = fun() ->
        mnesia:dirty_write({table, Rec1}),
        mnesia:dirty_write({table, Rec1}),
        mnesia:dirty_write({table, Rec1})
   end,

   mnesia:async_dirty(F) 
```

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-10T09:20:49.693

`async_dirty`让我们首先在上下文中引用用户指南：

```
通过将相同的“乐趣”作为参数传递给函数
mnesia:async_dirty(Fun [, Args])，它将在脏上下文中执行。函数调用
将映射到相应的脏函数。这仍将涉及日志记录、复制和订阅，但不会涉及锁定、本地事务存储或提交协议。检查点保留器将被更新，但将被更新为“脏”。因此，它们将被异步更新。这些函数将等待在一个节点上执行操作，而不是在其他节点上执行。如果表驻留在本地，则不会发生等待。 

```

 ******您提供的两个选项将以相同的方式执行。但是，当您执行`fun`选项一中的脏函数时，每个函数都是对 mnesia 的单独调用。使用`async_dirty`时，3 个调用将被捆绑，mnesia 只会等到本地节点上的 3 个调用完成后才返回。
但是，这两者的行为在 mnesia 多节点集群中可能有所不同。做一些测试:)******

# ruby-on-rails - Rails STI 覆盖范围

> ID：13315793
> 
> 赞同：4
> 
> 时间：2012-11-09T20:50:03.377
> 
> 标签：ruby-on-rails, activerecord, sti

假设我有如下 STI 设置：

```
class User < ActiveRecord::Base
  scope :busy, -> { where('busy_factor > 1') }
end

class HeroUser < User
  scope :busy, -> { where('busy_factor > 5') }
end 
```

所以，英雄用户对繁忙范围的门槛不同。

现在，如果我这样做，我会收到警告：

```
Creating scope :busy. Overwriting existing method HeroUser.busy. 
```

一切似乎都正常运行，但我想知道是否有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-09T20:53:53.167

更清洁的方法如下：

1.  删除后代模型的范围
2.  引入一个类方法（即busy_factor），它将为该特定类型的模型返回忙因子。
3.  在适当的地方覆盖后代中的此类方法。
4.  将基类中的范围重写为：

    范围：忙，-> { where('busy_factor > ?', self.busy_factor) }

希望这可以帮助。

# windows-phone-7 - wp7 xamlparseexception 初始化组件

> ID：13315797
> 
> 赞同：1
> 
> 时间：2012-11-09T20:50:14.343
> 
> 标签：windows-phone-7, xaml, xamlparseexception

我有一个奇怪的问题。我开发了一个 Windows Phone 7 应用程序。起初，它的目标 windows phone 操作系统版本设置为 7.0（在项目属性中）。一切正常。

但是，将目标操作系统升级到 7.1 版后，出现异常：XamlParseException "[Line: 0 Position: 0]"。此方法中 LoginPage.gics 出现异常：

```
[System.Diagnostics.DebuggerNonUserCodeAttribute()]
    public void InitializeComponent() {
        if (_contentLoaded) {
            return;
        }
        _contentLoaded = true;
        System.Windows.Application.LoadComponent(this, new System.Uri("/BCMLogic;component/Pages/LoginPage.xaml", System.UriKind.Relative));
        this.LayoutRoot = ((System.Windows.Controls.Grid)(this.FindName("LayoutRoot")));
        this.TitlePanel = ((System.Windows.Controls.StackPanel)(this.FindName("TitlePanel")));
        this.image1 = ((System.Windows.Controls.Image)(this.FindName("image1")));
        this.ContentPanel = ((System.Windows.Controls.Grid)(this.FindName("ContentPanel")));
        this.loginBtn = ((System.Windows.Controls.Button)(this.FindName("loginBtn")));
        this.userNameTxt = ((System.Windows.Controls.TextBox)(this.FindName("userNameTxt")));
        this.passTxt = ((System.Windows.Controls.PasswordBox)(this.FindName("passTxt")));
        this.clientTxt = ((System.Windows.Controls.TextBox)(this.FindName("clientTxt")));
        this.user = ((System.Windows.Controls.Image)(this.FindName("user")));
        this.passwd = ((System.Windows.Controls.Image)(this.FindName("passwd")));
        this.welcome = ((System.Windows.Controls.Image)(this.FindName("welcome")));
        this.client = ((System.Windows.Controls.Image)(this.FindName("client")));
        this.progressOverlay = ((Coding4Fun.Phone.Controls.ProgressOverlay)(this.FindName("progressOverlay")));
    }
} 
```

}

错误显示在行中：this.LayoutRoot = ((System.Windows.Controls.Grid)(this.FindName("LayoutRoot")));

我在 LoginPage.xaml 中的主网格如下所示：

```
<Grid x:Name="LayoutRoot" Background="Transparent">
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>

 ....

</Grid> 
```

内部异常为空，所以我在那里没有得到任何信息。这是否与项目 dll 引用的与我将项目升级到的操作系统版本不兼容的事实有关？我该如何检查？我花了一些时间浏览其他帖子，但找不到适合我的问题的解决方案。

提前感谢您的帮助:)

# ios - 在 iOS 中使用动态单元格显示 tableview 时出现问题

> ID：13315800
> 
> 赞同：0
> 
> 时间：2012-11-09T20:50:20.807
> 
> 标签：ios, xcode, uitableview

我有一个 nslog，它成功地告诉我我将加载到动态单元格中的信息就在那里。但是，我发现我的 tableView 根本没有使用对象“dogs”加载数组“dogs”，因为 name11Label 的 nslog 返回 null，尽管 viewDidLoad 中有 dog 的值。我需要做什么来启动 tableView？（.h 确实为我的“tableView”提供了一个 iboutlet 和一个属性（只是为了确保），并且还有一个用于 cell11.h 的导入）

.m 文件

```
-(void)viewDidLoad{
...
     self.tableview.delegate = self;
...
}

    - (NSInteger)tableView:(UITableView *)table numberOfRowsInSection:(NSInteger)section {
        if ( dogs != NULL ) {
            return [dogs count];
        }
        return 0;
    }

    - (UITableViewCell *)tableView:(UITableView *)tv cellForRowAtIndexPath:(NSIndexPath *)indexPath {
       Cell11 *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell11"];

        if (cell == nil)
        {
            cell = [[[Cell11 alloc] initWithFrame:CGRectZero reuseIdentifier:@"Cell11"] autorelease];  //I know that this method is depreciated, but it is not the source of this problem
        }
        NSDictionary *itemAtIndex =(NSDictionary *)[dogs objectAtIndex:indexPath.row];
         cell.name11Label.text = [itemAtIndex objectForKey:@"dogs"];
         NSLog(@"dogs array = %@", dogs);   //returns correct information of the object dogs
         NSLog(@"%@", cell.name11Label.text);   //returning null even though "dogs" in viewDidLoad is showing a result;

         return cell;

    } 
```

单元格11.h

```
#import <UIKit/UIKit.h>

@interface Cell11 : UITableViewCell
@property (nonatomic, strong) IBOutlet UILabel *name11Label;

@end 
```

单元格11.m

```
#import "Cell11.h"

@implementation Cell11
@synthesize name11Label;

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T20:53:34.090

您是否使用 UITableViewDataSource 协议（上述方法）将 UITableView 的“dataSource”属性分配给对象？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T20:59:08.883

改变：

```
Cell11 *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell11"]; 
```

到

```
Cell11 *cell = [tv dequeueReusableCellWithIdentifier:@"Cell11"]; 
```

tableView 可能没有正确连接。

~~nslog 语句永远不会被调用。把它移到上面：~~

 ~~```
NSLog(@"%@", cell.name11Label);
return cell; 
```~~ 

此外，您正在使用 cgrect 零初始化单元格，它不会显示任何内容。确保它具有预期的高度和宽度（例如 CGRectMake(0.0f, 0.0f, 320.0f, 50.0f)）

~~如果单元格仍然不显示，您是在设置完数组 dogs 后在 tableview 上调用 reloadData 吗？~~

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T21:01:58.410

首先：返回后的 NSLog 永远不会被调用。

```
 NSLog(@"%@", cell.name11Label); 
    return cell;
} 
```

第二：控制从界面构建器的表格视图拖动到您的类。并确保连接`dataSource`正确。

# d3.js - 为 CSV D3.js 的每一行生成圆圈

> ID：13315802
> 
> 赞同：0
> 
> 时间：2012-11-09T20:50:25.330
> 
> 标签：d3.js, geometry, labels

我正在尝试读取 CSV 并使用 d3.js 为每一行生成一个圆圈。

[我不想使用回调函数，但这是一个不同的问题。]

我可以为以下每一行数据创建一个表： http: [//christopheviau.com/d3_tutorial/](http://christopheviau.com/d3_tutorial/)

但我似乎无法为每一行生成一个圆圈：

```
d3.text("test.csv", function(datasetText) {

var parsedCSV = d3.csv.parseRows(datasetText);

var sampleSVG2 = d3.select("#viz")
    .append("svg")
    .attr("width", 100)
    .attr("height", 100);

sampleSVG2.selectall("circle")
    .data(parsedCSV)
    .enter().append("circle")
    .style("stroke", "gray")
    .style("fill", "blue") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T23:57:02.137

这可能不是“正确的”，但它有效。通过为每一行和每个圆圈调用一个新的 svg 区域，它起作用了。

```
var sampleSVG = d3.select("#potato")
        .data(parsedCSV)
        .enter().append("circle")
        .append("svg")
        .attr("width", 100)
        .attr("height", 100);

sampleSVG.append("circle")
        .style("stroke", "gray")
        .style("fill", "blue")
        .attr("r", 40)
        .attr("cx", 50)
        .attr("cy", 50)
        .on("mouseover", function(){d3.select(this).style("fill", "red");})
        .on("mouseout", function(){d3.select(this).style("fill", "steelblue");}); 
```

# javascript - 隐藏的标记显示在 google map api v3 中的集群图标中

> ID：13315805
> 
> 赞同：1
> 
> 时间：2012-11-09T20:50:50.023
> 
> 标签：javascript, google-maps-api-3, markerclusterer

我在我的集​​群项目中使用了谷歌地图 api (MarkerClusterer)

```
var markers=[];
for(var i=0;i<1000;i++)
{ //create marker
    markers.push(marker):
}
 markerclusterer = new MarkerClusterer(map, markers);
// then .. in another part .. i do .
for(var j=0;j<200;j++)
{
markers[j].setVisible(false);
}
markerclusterer.draw(); 
```

问题 ：：

它隐藏了 200 个标记，但在集群图标中它仍然..

我的意思是..（如果我计算集群图标中显示的数字=1000）。但实际上 800 个标记是可见的，而 200 个是隐藏的。）

如何使集群图标 = 800 只。..thnx

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T08:03:14.763

当你完成你的循环，添加 .repaint() 方法，所以它会更新计数器。但主要的是，您需要在隐藏/显示标记上自动从 markerclusterer 对象中添加/删除这些显示/隐藏标记

```
var markers=[], markerclusterer;

markerclusterer = new MarkerClusterer(map, []);

for(var i=0;i<1000;i++)
{ 
    //create marker
    markerclusterer.addMarker(marker, true);

    google.maps.event.addListener(marker, 'visible_changed', function(){
        if ( marker.getVisible() ) {
            markerclusterer.addMarker(marker, true);
        } else {
            markerclusterer.removeMarker(marker, true);
        }                   
    });
}
// then .. in another part .. i do .
for(var j=0;j<200;j++)
{
    markers[j].setVisible(false);
}
markerclusterer.repaint(); 
```

希望这会对某人有所帮助。

# python - 在 Python 脚本中抑制 pjsua 输出

> ID：13315810
> 
> 赞同：3
> 
> 时间：2012-11-09T20:51:03.613
> 
> 标签：python, curses

我正在编写一个脚本，它使用 curses 在屏幕底部生成一个主窗口和一个日志窗口。

似乎当我导入 pjsua 时，即使我已将日志级别设置为 0，它仍坚持打印到屏幕上。这是它输出的内容：

```
15:49:09.716 os_core_unix.c !pjlib 2.0.1 for POSIX initialized
15:49:09.844 sip_endpoint.c  .Creating endpoint instance...
15:49:09.844          pjlib  .select() I/O Queue created (0x7f84690decd8)
15:49:09.844 sip_endpoint.c  .Module "mod-msg-print" registered
15:49:09.844 sip_transport.  .Transport manager created.
15:49:09.845   pjsua_core.c  .PJSUA state changed: NULL --> CREATED
15:49:09.896  pjsua_media.c  ..NAT type detection failed: Invalid STUN server or server not configured (PJNATH_ESTUNINSERVER) 
```

请注意，它不会通过日志记录回调发送它，这意味着我无法将它与我的其余日志记录信息一起放在日志窗口中。谁能给我一些关于处理这个输出的建议吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T17:52:07.843

如果您可以检测到它写入哪个流，例如 sys.stderr，您可以通过简单地将 sys.stderr 分配到另一个打开的文件（甚至 /dev/null ？）将其重定向到某个地方。

# javascript - 如何获取 iOS 的设备型号（例如“iPhone3,1”）？

> ID：13315814
> 
> 赞同：0
> 
> 时间：2012-11-09T20:51:17.857
> 
> 标签：javascript, ios, cordova, device, identifier

有没有办法在PhoneGap（JavaScript）中获取iOS的设备模型/标识符，如“iPhone3,1”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T17:19:04.003

在 Cordova (PhoneGap) 2.3.0 中，无需使用任何插件即可`device.model`

> 对于所有平台，都有一个名为 device.model 的新属性——它返回特定的设备型号，例如“iPad2,5”（对于其他平台，它返回用于返回的 device.name）。

[资源](http://docs.phonegap.com/en/edge/guide_upgrading_ios_index.md.html#Upgrading%20Cordova%20iOS)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T03:23:03.150

是的，通过[Device API](http://docs.phonegap.com/en/2.2.0/cordova_device_device.md.html#Device)。您可以通过 window.device.* 访问它们。以下是属性列表：

device.name
device.cordova
device.platform
device.uuid
device.version

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-15T08:30:51.063

“从 3.0 版开始，Cordova 将设备级 API 实现为插件。”

您必须首先安装插件（从项目主目录）：**cordova plugin add org.apache.cordova.device**

这是使用它的示例代码：

```
 <!DOCTYPE html>
<html>
  <head>
    <title>Device Properties Example</title>

    <script type="text/javascript" charset="utf-8" src="cordova.js"></script>
    <script type="text/javascript" charset="utf-8">

    // Wait for device API libraries to load
    //
    document.addEventListener("deviceready", onDeviceReady, false);

    // device APIs are available
    //
    function onDeviceReady() {
        var element = document.getElementById('deviceProperties');
        element.innerHTML = 'Device Model: '    + device.model    + '<br />' +
                            'Device Cordova: '  + device.cordova  + '<br />' +
                            'Device Platform: ' + device.platform + '<br />' +
                            'Device UUID: '     + device.uuid     + '<br />' +
                            'Device Version: '  + device.version  + '<br />';
    }

    </script>
  </head>
  <body>
    <p id="deviceProperties">Loading device properties...</p>
  </body>
</html> 
```

[PhoneGap 文档](http://docs.phonegap.com/en/edge/cordova_device_device.md.html)

安装插件后，您可以通过以下方式读取设备型号：**window.device.model**

别忘了在**deviceready**事件之后调用它，别忘了加载**cordova.js** 仍然存在设备报告不准确的问题。我在各种 IOS 设备上对其进行了测试，得到以下结果：

**iPhone 4** 被报告为 iPhone3,1

**iphone 5s**被报告为 iPhone6,2

**iPhone 6 Plus**被报告为 iPhone 7,1

**iPad 2**报告为 iPad3,3

我现在进行调查以了解这些值的含义。如果有人有线索，我会很高兴听到。

# splunk - 尝试使用 java sdk 并返回 Json 并遇到 gson 代码问题

> ID：13315823
> 
> 赞同：1
> 
> 时间：2012-11-09T20:51:59.283
> 
> 标签：splunk

我正在打电话给 splunk，然后我试图使用 ResultsReaderJson 类来获取我的结果。

```
InputStream results = jobSavedSearch.getResults();
ResultsReaderJson resultsReader = new ResultsReaderJson(results); 
```

我不断收到这个错误。

```
com.google.gson.stream.MalformedJsonException: Use JsonReader.setLenient(true) to accept malformed JSON at line 1 column 6 
```

我无法从此类中访问 JsonReader。有人知道我能做些什么来解决这个问题吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-09T21:32:01.463

您没有要求结果流返回 JSON。默认值为 XML。要解决此问题，您可以使用：

```
Args outputArgs = new Args();
outputArgs.put("output_mode","json");
InputStream results = jobSavedSearch.getResults(outputArgs); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-01T13:57:13.437

在 Splunk 1.3.0 API 中，您可以：

```
 JobExportArgs jobargs = new JobExportArgs();
  jobargs.setOutputMode(JobExportArgs.OutputMode.JSON);
  InputStream exportSearch = jobSavedSearch.getResults(jobargs);
  MultiResultsReaderJson multiResultsReader = new MultiResultsReaderJson(exportSearch); 
```

# asp.net - 将 RFC 日期转换为短日期 mm/dd/yyyy

> ID：13315824
> 
> 赞同：1
> 
> 时间：2012-11-09T20:52:09.317
> 
> 标签：asp.net, vb.net

我需要使用 VB.net 将 RFC 822 格式的日期转换为 mm/dd/yyyy 的短日期格式。我有一个无法更改其源代码的 Web 应用程序。Web 应用程序允许按月和年对 RSS 提要进行排序。

将不胜感激任何建议或帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T23:02:19.077

使用[Date.TryParse](http://msdn.microsoft.com/en-us/library/system.datetime.tryparse.aspx)将字符串转换为 Date 值，然后将 Date.ToString 与[自定义格式字符串](http://msdn.microsoft.com/en-us/library/8kb3ddd4%28v=vs.90%29.aspx)一起使用以按照您想要的方式设置格式。

# java - 直接在手机上运行“aapt.exe”？

> ID：13315825
> 
> 赞同：0
> 
> 时间：2012-11-09T20:52:11.907
> 
> 标签：java, android, aapt, resource-file

我想以编程方式创建打包的资源文件，并且（这就是问题所在）直接在 android 手机上正在运行的应用程序中。有没有办法在手机上执行“aapt.exe”，或者是否有另一种方法可以从 java 库中创建 resource._rsc 文件？

谢谢回答！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T21:46:35.537

Android 是基于 Linux 的操作系统，而 .exe 文件是 Microsoft Windows 可执行文件。您无法在 Linux 中执行 .exe，至少在没有仿真软件的帮助下是无法执行的。

# css - CSS div 与垂直居中的一侧重叠

> ID：13315828
> 
> 赞同：0
> 
> 时间：2012-11-09T20:52:16.887
> 
> 标签：css, html, center, overlap

我正在尝试制作两个重叠`<div>`的 s，其中一个是突出的图像并且它在顶部，另一个是更多的背景图像。但我希望背景图像始终位于主图像的中心。那就是我开始遇到问题的地方。

```
 ________
   |        |
 __|        |__
|  |        |  |
|  |        |  |
|__|        |__|
   |        |   
   |________| 
```

上面是我想要的快速文本图像。

编辑：可能很重要的是要注意顶部的图像是实际`<img>`的，而下面的 div 是一个空的`<span>`，我给了宽度和高度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T21:48:25.127

如果它们是固定尺寸，那么您可以将容器设置为`position:relative;`它的子级，`postion:absolute;`然后设置跨度/图像顶部/左侧百分比以产生集中的错觉......然后`z-index`确保事物正确分层。

检查 - [http://jsfiddle.net/V4GEy/4/](http://jsfiddle.net/V4GEy/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T21:02:54.610

您可以制作一个包含两个 div 的包装器。然后将背面图像居中，在包装器中。之后，使用 z-index 在顶部显示另一个图像。

[http://www.w3schools.com/cssref/pr_pos_z-index.asp](http://www.w3schools.com/cssref/pr_pos_z-index.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T20:06:36.150

好吧，我明白了。我制作了一个容器并将其设置为相对位置，然后将背景跨度绝对定位为 50%。

```
#container {
    outline: 2px solid red;
    width: 400px;
    display: block;
    margin: 10px auto;
    position: relative;
}

#image {
    width: 250px;
    height: 400px;
    background-color: grey;
    display: block;
    margin-left: auto;
    margin-right: auto;

}

#background {
    width: 400px;
    height: 100px;
    display: block;
    margin-left: auto;
    margin-right: auto;
    background-color: #4B4B4B;
    z-index: -1;
    position: absolute;
    top: 50%;
    margin-top: -50px;
} 
```

JsFiddle 链接：： http: [//jsfiddle.net/Calebmer/Umx9K/](http://jsfiddle.net/Calebmer/Umx9K/)

# ruby - 使用 bundle:install Capistrano 任务时，bson_ext 1.7.0 无法在 Linux 上构建

> ID：13315830
> 
> 赞同：1
> 
> 时间：2012-11-09T20:52:20.767
> 
> 标签：ruby, capistrano, bundler, bson-ext

这是错误消息：

```
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

/usr/local/bin/ruby extconf.rb

Gem files will remain installed in /var/www/app_dir/shared/bundle/ruby/1.8/gems/bson_ext-1.7.0 for inspection.
Results logged to /var/www/app_dir/shared/bundle/ruby/1.8/gems/bson_ext-1.7.0/ext/cbson/gem_make.out
An error occured while installing bson_ext (1.7.0), and Bundler cannot continue.
Make sure that `gem install bson_ext -v '1.7.0'` succeeds before bundling. 
```

我尝试运行`gem install bson_ext -v '1.7.0'`，并且成功且没有错误。我已经尝试安装`ruby-dev`和`ruby1.8-dev`apt 软件包，但这没有帮助。

`bundle install`能够`bson_ext`在我的 Mac OS X 开发系统上成功构建，但在 Linux 生产环境中失败，即使我直接在`capistrano` `bundle:install`任务上下文之外运行它。

我也尝试过跑步`gem update --system`，`gem update bundler`但这没有帮助。

我怀疑问题在于如何`bundle install`在目标系统上调用。尽管如此，我还是尝试将 Capistrano 更新到 2.13.5 版本，但这并没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T17:11:32.290

因此，看来`bundler`1.2.1 无法在我的系统上构建以下 gem：

*   `bson_ext`1.7.0
*   `curb`0.8.3
*   `nokogiri`1.5.5
*   `json`1.7.5
*   `therubyracer`0.8.2。

我能够使用`gem install <GEMNAME> -v '<VERSION>' --install-dir /var/www/<APP_DIR>/shared/bundle/ruby/1.8/`. 之后，运行`bundle exec capistrano deploy`成功。

`bundle`似乎无法在我的系统上构建带有本机扩展的 gem。不知道为什么，但也许这个过程会帮助那些有类似问题的人。

# magento - Magento 会话调试 - 保存/加载会话

> ID：13315834
> 
> 赞同：0
> 
> 时间：2012-11-09T20:52:34.607
> 
> 标签：magento

我正在调试一个有几页表单的 Magento 站点。在此过程的最后会出现一个错误。每次我想测试新的迭代时，重新输入表单非常耗时。

是否可以通过核心或扩展保存会话，然后稍后重新加载？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T23:55:04.027

我不知道有任何产品或项目专门这样做，但假设表单实际上将其值存储在 PHP 会话中，您可能（即我没有测试过）自己将一些东西放在一起。

当 Magento 配置为使用基于文件的会话时，您将在`var/session`文件夹中找到会话。`$_SESSION`您可以使用以下命令行脚本将此数据读入数组（假设会话名称为`sess_jd88xxih1f0qp81ar5pkdkc974`）

```
<?php
    $file = file_get_contents('var/session/sess_jd88xxih1f0qp81ar5pkdkc974');
    session_start();
    session_decode($file);
    var_dump($_SESSION); 
```

然后，您将修改 中的值`$_SESSION`，并使用`session_encode`

```
$_SESSION['test'] = 'foo baz bar';
$string = session_encode();
echo $string; 
```

最后，将会话文件写回

```
file_put_contents('var/session/sess_jd88xxih1f0qp81ar5pkdkc974', $string); 
```

综上所述，看看像 Selenium 这样的浏览器自动化工具。这些工具似乎是解决您所描述的问题的事实上的方法。

# php - 使用相对路径锚定到另一个页面 - PHP

> ID：13315838
> 
> 赞同：0
> 
> 时间：2012-11-09T20:52:46.010
> 
> 标签：php, html, anchor, relative-url

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T15:38:18.983

关于：

> 1.  结果如下所示：`http://localhost/site/path/#anchor1/`
> 2.  查看源代码结果如下：

您的 URL 的哈希部分有一个斜杠。浏览器将寻找一个带有`name=anchor1/`(or `id=anchor1/`) 的命名锚点，它显然不存在。找到尾部斜杠的来源并将其删除。

# mobile - 移动到 Web 服务通信

> ID：13315840
> 
> 赞同：0
> 
> 时间：2012-11-09T20:52:50.110
> 
> 标签：mobile, service, web

我创建了一个相互通信的 Web 服务和一个移动应用程序。当一切正常时，它工作得很好。当服务器没有响应时，它开始崩溃。

移动设备向服务器发送一条带有一堆记录的消息。在服务器上获取记录似乎从来都不是问题。它获取记录，然后将收到更新的响应发送回移动设备。问题是移动设备并不总是得到响应，所以它不知道它不应该再次发送这些记录进行更新。

下次它再次发送记录，现在我有重复的记录。我该如何解决这个问题？

想法1）在移动设备上创建一个唯一的交易号，我可以与服务器进行比较以查看记录是否已上传。然后不要写该记录并尝试发回它所写的响应。

想法 2) 将记录发送到服务器，但在写入它们之前响应移动设备已收到它们。这样，移动设备可以标记它们，然后向服务器发送另一个响应，告诉它写入它们。此时移动设备几乎不在乎它是否得到响应。唯一的问题是，您不知道服务器是否收到了消息。

寻找有关如何处理此问题的想法，以确认其中一个想法或具有完全不同的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-15T21:00:14.177

我最终创建了设备在从服务器返回成功响应时尝试解析的日志。

我将项目标记为一批行并将它们发送到服务器。一旦他们在那里，我创建一个关于一批项目中每个行项目成功或失败的日志，然后将日志保存到文件系统。

当移动设备未能成功从服务器收到响应时，在极少数情况下，它会向服务器询问批号。如果服务器没有响应该批次的状态，则假定服务器从未收到它并备注这些项目以进行另一次上传尝试。如果收到回复，它会逐行处理成功和失败，然后在移动设备上相应地标记项目。如果移动设备在下一次上传时没有询问日志，则服务器假定批次的生命周期已完成，不再需要维护该日志。然后将其删除。

服务器不会删除日志，直到它有来自特定设备的成功请求，不再询问有关日志的信息。因此，如果我在服务器上有日志 1，并且设备在下一次上传时没有要求收听该日志，则服务器会删除该日志，假设设备得到了它想要的响应或不再关心它。

# php - 提交时选择表单值更改

> ID：13315841
> 
> 赞同：0
> 
> 时间：2012-11-09T20:52:51.083
> 
> 标签：php, html, forms

所以我有一个带有各种选项的选择字段，默认是一个选项，提示用户从下拉列表中选择一个值为“空”的选项。如果用户在提交之前拒绝更改下拉列表，而不是发送包含“空”的字符串，则表单会将字段更改为选择中的顶部选项并发送该数据。我的代码包括在下面：

```
<select class="num" name="Team_1">
    <option value="empty" class="red">Please Select</option>
    <option value="1">Manchester United</option>
    <option value="2">Bristol City</option>
    <option value="4">Spurs</option>
    <option value="9">Testing</option>
</select> 
```

如果您提交上面的表格并选择了请选择选项，它会还原曼联并发送一个包含“1”的字符串

任何想法为什么它可能会这样做和/或我如何阻止它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T20:57:01.493

您始终应确定默认情况下应选择哪个选项。

```
<option value="empty" class="red" selected="selected">Please Select</option> 
```

将每个选项标签的值更改为您希望在提交表单后发送的字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T21:23:03.383

经过进一步调查，我发现该选项不支持 class 属性，因此通过将 class="red" 添加到选项中，它会使 html 无效，从而阻止数据被提交，因此它会恢复为下一个可用值。

# html - 将 OBJ 数据转换为 CSS3D

> ID：13315842
> 
> 赞同：5
> 
> 时间：2012-11-09T20:52:53.280
> 
> 标签：html, css, 3d

我找到了很多公式，什么都没有，但 3D 不是我的强项，所以我不知道具体要使用什么。我的目标是将 3D .obj 文件（顶点、法线、面）中的数据转换为 CSS3D（宽度、高度、rotateX、Y、Z 和/或类似的变换）。

例如 2 个简单的平面

```
g plane1
# simple along along Z axis
v  0.0  0.0  0.0
v  0.0  0.0  1.0
v  0.0  1.0  1.0
v  0.0  1.0  0.0

g plane2
# plane rotated 90 degrees along Y-axis
v  0.0  0.0  0.0
v  0.0  1.0  0.0
v  1.0  1.0  0.0
v  1.0  0.0  0.0

f  1 2 3 4
f  5 6 7 8 
```

可以将此数据转换为：

```
#plane1 {
    width: X;
    height: Y;
    transform: rotateX(Xdeg) rotateY(Ydeg) rotateZ(Zdeg) translateZ(Zpx)
}

#plane2 {
    width: X;
    height: Y;
    transform: rotateX(Xdeg) rotateY(Ydeg) rotateZ(Zdeg) translateZ(Zpx)
}

/* Or something equivalent such as transform: matrix3d() */ 
```

核心问题是如何从它的 x,y,z 坐标矩阵中获得 4 点平面的 X/Y/Z 旋转？

**更新 #1 - 11/12/12** 因此，根据提供的答案，我遇到了来自[http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToEuler/index.htm](http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToEuler/index.htm)的未优化函数：

```
/*
    -v 0.940148 -0.847439 -1.052535
    -v 0.940148 -0.847439 0.947465
    -v -1.059852 -0.847439 0.947465
    -v -1.059852 -0.847439 -1.052535
    -v 0.940148 1.152561 -1.052534
    -v 0.940147 1.152561 0.947466
    -v -1.059852 1.152561 0.947465
    v -1.059852 1.152561 -1.052535

    f 1 2 3 4
    f 5 8 7 6
    f 1 5 6 2
    f 2 6 7 3
    f 3 7 8 4
    f 5 1 4 8
*/

var f = {
    'm00' : 0.940148,
    'm01' : -0.847439,
    'm02' : -1.052535,
    'm10' : 0.940148,
    'm11' : -0.847439,
    'm12' : 0.947465,
    'm20' : -1.059852,
    'm21' : -0.847439,
    'm22' : 0.947465
}

// Assuming the angles are in radians.
if (f.m10 > 0.998) { // singularity at north pole
    heading = Math.atan2(f.m02, f.m22);
    attitude = Math.PI/2;
    bank = 0;
} else if (f.m10 < -0.998) { // singularity at south pole
    heading = Math.atan2(f.m02,f.m22);
    attitude = -Math.PI/2;
    bank = 0;
} else {
    heading = Math.atan2(-f.m20, f.m00);
    bank = Math.atan2(-f.m12, f.m11);
    attitude = Math.asin(f.m10);
} 
```

我得到了结果，但我不确定我的计算是否正确，而且我也得到了关于哪个轴对应的混合响应。是航向 = y，银行 = x，态度 = z？如果这很重要，我也会将每个转换为度数。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-10T07:52:36.333

![在此处输入图像描述](../Images/bc4ab17296915e517e1178842d88f41b.png)

阅读此[http://www.songho.ca/opengl/gl_matrix.html](http://www.songho.ca/opengl/gl_matrix.html) 它解释了几乎所有内容并且有实现。

除了 CSS 3D 解决方案将具有较低的性能（数量级）主要是因为每个表示的表面都是 DOM 元素，它也非常有限 - 你可以找到关于这个问题的大量资料（例如 Google IO 记录）

如果您需要声明式 3D 框架，您可能需要查看[x3dom](http://www.x3dom.org/)

要绘制 3D 框，您只需要包含 x3dom js 脚本并将此声明嵌入到您的页面中：

```
 <body> 
   <h1>Hello X3DOM World</h1> 
   <x3d width="400" height="300"> 
     <scene> 
       <shape> 
         <box></box> 
      </shape> 
     </scene> 
   </x3d> 
 </body> 
```

它将解析您页面上的 <x3d> 标记并生成具有良好性能的正确 WebGL 或 Flash 实现。

x3d 可以从 Blender、Maya 和 3ds Max 导入资源。这里有一些不错的读物：[x3domIntroTutorial.pdf](http://www.x3dom.org/x3dom/doc/slides/x3domIntroTutorial.pdf)

*IE 11 将支持[WebGL](http://caniuse.com/webgl)，IE10 将自动更新到 IE 11，因此只有不支持的桌面浏览器（默认禁用）将是 Safari。默认情况下，Apple 将被迫启用它。有了完整的桌面支持，获得完整的移动设备不会花费太长时间，因为它是竞争激烈的市场。我们有高度可访问的 WebGL 框架，例如three.js。所以用 CSS 3D 来做是没有意义的*

**更新：iOS 8 Safari 默认启用 WebGL 支持：http: [//caniuse.com/webgl](http://caniuse.com/webgl)**

# java - PreparedStatement 的 setInt() 不适用于 PostgreSQL

> ID：13315846
> 
> 赞同：5
> 
> 时间：2012-11-09T20:53:14.917
> 
> 标签：java, postgresql, jdbc, prepared-statement

我在 Eclipse 上使用 PostgreSQL 9.1 和 Tomcat 7。连接是通过连接池建立的。当我使用 的`setInt()`方法时`PreparedStatement`，没有返回任何内容。打印准备好的语句时，'?' 被一些奇怪的字符串取代，我想是对对象的引用。当我使用`setObject()`适当的方法时`Type.INTEGER`，打印的语句包含正确的值，但作为字符串，并且强制需要 Int。

这是代码：

```
public User_DTO[] select(User_DTO params, int order, int limit, int offset)
{
    User_DTO result = null;
    ArrayList<User_DTO> result_arr = new ArrayList<User_DTO>(0);

    String query = "SELECT id, name, role FROM Usuario WHERE name LIKE ? AND role LIKE ? AND id != ? ORDER BY ? LIMIT ? OFFSET ?";

    String name = params.getName();
    String role = params.getRole();
    String id = params.getId();

    try
    {
        conn = Pool.getConnection();
        stmt = conn.prepareStatement(query);

        stmt.setString(1, "%" + name + "%");
        stmt.setString(2, "%" + role + "%");
        stmt.setString(3, id);

                // Using setInt()
                // stmt.setInt(4, order);

                // Using setObject
        stmt.setObject(4, order, Types.INTEGER);
        System.out.println(order);

        if(limit == -1)
        {
            stmt.setNull(5, Types.NULL);
        }
        else
        {
            stmt.setInt(5, limit);
        }

        stmt.setInt(6, offset);

        //
        System.out.println(stmt);

        rs = stmt.executeQuery();

        while(rs.next())
        {
            result = new User_DTO();

            result.setId(rs.getString("id"));
            result.setName(rs.getString("name"));
            result.setRole(rs.getString("role"));

            result_arr.add(result);
        }
    }
    catch(SQLException sql_e)
    {
        sql_e.printStackTrace();
    }
    finally
    {
        Pool.close(conn, stmt, rs);
    }

    return (result != null) ? result_arr.toArray(new User_DTO[result_arr.size()]) : null;
} 
```

使用的打印语句`setInt()`是这样的：

```
SELECT id, name, role FROM Usuario WHERE name LIKE '%%' AND role LIKE '%%' AND id != '13253cc9' ORDER BY '[B@65adcbab' LIMIT '[B@75167bb3' OFFSET '[B@171360d3' 
```

并且使用打印的那个`setObject()`：

```
SELECT id, name, role FROM Usuario WHERE name LIKE '%%' AND role LIKE '%%' AND id != '13253cc9' ORDER BY '1' LIMIT '[B@75167bb3' OFFSET '[B@171360d3' 
```

知道为什么会发生这种情况吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T23:32:04.113

对此有两个快速的想法。

1.  您看到的字符串是转换为字符串的 Integer 对象。
2.  您为什么要按整数对结果进行排序？

我认为您的参数数量错误。您必须按查询中包含的表的字段进行排序，因此您不应该将第 4 个参数作为整数给出。事实上，您可能应该有一个固定的顺序。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-11T13:37:52.323

```
public User_DTO[] select(User_DTO params, int order, int limit, int offset)
{
    User_DTO result = null;
    ArrayList<User_DTO> result_arr = new ArrayList<User_DTO>(0);

    StringBuffer queryBuffer = new StringBuffer("SELECT id, name, role FROM Usuario WHERE name LIKE ");
    queryBuffer.append("%");
    queryBuffer.append(params.getName());
    queryBuffer.append("%");
    queryBuffer.append(" AND role LIKE ");
    queryBuffer.append("%");
    queryBuffer.append(params.getRole());
    queryBuffer.append("%");
    queryBuffer.append(" AND id != ");
    queryBuffer.append(params.getId());
    queryBuffer.append(" ORDER BY ");
    queryBuffer.append(order);

    if (limit != -1)
    {
        queryBuffer.append(" LIMIT ");
        queryBuffer.append(limit);
    }

    queryBuffer.append(" OFFSET ");
    queryBuffer.append(offset);

    try
    {
        conn = Pool.getConnection();
        stmt = conn.prepareStatement(queryBuffer.toString());

        rs = stmt.executeQuery();

        while (rs.next())
        {
            result = new User_DTO();

            result.setId(rs.getString("id"));
            result.setName(rs.getString("name"));
            result.setRole(rs.getString("role"));

            result_arr.add(result);
        }
    }
    catch(SQLException sql_e)
    {
        sql_e.printStackTrace();
    }
    finally
    {
        Pool.close(conn, stmt, rs);
    }

    return (result != null) ? result_arr.toArray(new User_DTO[result_arr.size()]) : null;
} 
```

使用`StringBuffer`代替`setInt`or`setString`

# jquery - 删除附加项并添加更多元素（涉及 AJAX）

> ID：13315848
> 
> 赞同：1
> 
> 时间：2012-11-09T20:53:31.717
> 
> 标签：jquery, dynamic, delegates, append, live

当点击页面上的按钮时，它会从页面中删除 div，运行 Ajax 函数，然后使用来自 Ajax 函数的数据创建更多相同类的 div。

如果再次单击该按钮，则应删除通过 Ajax 功能创建的 div，并应通过另一个 Ajax 请求添加更多 div。

我遇到的问题是它不能完全工作。第一次单击按钮时，它会按预期执行（删除 div，并添加新 div）。当第二次单击该按钮时，不会删除任何 div（附加的 div），并添加更多 div。

有没有办法让这些附加的 div 被删除？我不确定这是否涉及 live、delegate 或 on 功能，但我在网上看到的所有示例都使用两个单独的按钮，一个用于触发创建 div 的事件，而另一个按钮用于删除它们。我希望所有这些事件都使用同一个按钮发生

HTML 的示例 Divs（对不起，我没有发布完整的 html，我使用的是 Erlang 框架和到处都是模板的原始代码，这是示例输出：

```
<div id="tweet-container">
<div class="tweets"  style="width:940px">
<img style="float:left; width: 60px; padding-right: 9px" src=http://a0.twimg.com/profile_images/2454954651/Snapshot_20120528_normal.jpg> <p     style="float:right">Fri, 09 Nov 2012 20:29:05 +0000</p>
<td><a href="http://twitter.com/PndWallace"><b>Pat Wallace</b></a> @PndWallace</td>
<td><p>RT @NASANPP: RT @pndwallace: @NASA @NASANPP looks like we in Ireland are living in phtytoplankton Central....makes me feel better lol </p></td>

</div>

<div class="tweets" style="width:940px">
<img style="float:left; width: 60px; padding-right: 9px" src=http://a0.twimg.com/profile_images/280761746/calvin-and-hobbes_normal.jpg> <p style="float:right">Fri, 09 Nov 2012 20:29:38 +0000</p>
<td><a href="http://twitter.com/rentagoodbook"><b>Lise</b></a> @rentagoodbook</td>
<td><p>RT @NASA: [Image of the Day] Happy Little Crater on Mercury http://t.co/CQbuLPNi #iotd </p></td>

</div>
</div> 
```

脚本：

```
function removeTweets(){

$('div').remove('#tweets');

}

function ajaxCheck(){

$('a.Tpage').click(function(evt){

$currentPage = $('#pageNo').text();
$totalPages = $('#totalPages').text();
$searchWord = $('#searchWord').text();
$selection = $(this).attr('title');

$.ajax({
url: "/search/get_tweet_page/" + $currentPage + "/" + $totalPages + "/" + $searchWord +
"/" + $selection,
dataType: "json",

}).done(function(data){
removeTweets();
var list = data.tweet;
for (var i = 0; i < list.length; i++){

$('#errors').append('<div class="tweets" style="width:940px">' +
             '<img style="float:left; width: 60px; padding-right: 9px" src="' + list[i].profileimage_url + '">' +
             '<p style="float:right">' + list[i].created_at + '</p>' +
             '<td><a href="http:///twitter.com/' + list[i].from_user + '"><b>' + list[i].fromuser_name + '</b></a>' + list[i].from_user + '</td>' +
             '<td><p>' + list[i].text + '</p></td>' +
             '</div>');

} // end for
}); // end done
evt.preventDefault();

}) //end click 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T21:01:03.450

在`removeTweets()`函数中使用类选择器`.tweets`而不是 id 选择器`#tweets`。

# attributeerror - AttributeError：“str”对象没有属性“iteritems”

> ID：13315852
> 
> 赞同：5
> 
> 时间：2012-11-09T20:53:43.073
> 
> 标签：attributeerror

我正在尝试编写一个脚本，该脚本将写入 Google Docs 电子表格，当我运行它时，我得到标题中的错误。进一步来说：

```
File "/home/pi/Desktop/templog.py", line 44, in <module>
    s.run()
  File "/usr/lib/python2.7/sched.py", line 117, in run
    action(*argument)
  File "/home/pi/Desktop/templog.py", line 35, in do_something
    entry = spr_client.InsertRow(data_str, spreadsheet_key, worksheet_id)
  File "/usr/local/lib/python2.7/dist-packages/gdata/spreadsheet/service.py", line 330, in          InsertRow
for k, v in row_data.iteritems():
AttributeError: 'str' object has no attribute 'iteritems' 
```

导致这种情况的代码是：

```
entry = spr_client.InsertRow(data_str, spreadsheet_key, worksheet_id)
        if isinstance(entry, gdata.spreadsheet.SpreadsheetsList): 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T20:59:31.297

不，导致错误的行是`row_data.iteritems()`因为 row_data 是一个字符串，并且您调用的方法没有为类“str”定义。

# jquery - mouseleave 处理程序在 jQuery 中拖动后停止工作

> ID：13315858
> 
> 赞同：0
> 
> 时间：2012-11-09T20:54:09.737
> 
> 标签：jquery, html, css, hover

我正在使用一些 jQuery 来创建渐变翻转效果，但是在执行单击和拖动后我遇到了按钮的行为问题。

```
<div id="splash_buttons">
    <a id="our_projects_button" href="#work">
        Our Projects
        <div class="normal"></div>
        <div class="hover"></div>
    </a>
</div> 
```

有两个不同的 div 淡入淡出来创建悬停淡入淡出。效果非常好，除非当您再次单击、拖动、释放、鼠标输入然后鼠标离开时，悬停状态不会消失。单击时，将显示活动状态。它将在拖动期间保持不变，直到释放鼠标按钮。然后它将恢复到悬停状态并最终淡入正常状态。之后，如果您将鼠标悬停在按钮上，它将按预期激活悬停状态，但在离开按钮时不会停止悬停状态，除非您再次上下单击按钮。

```
$('#splash_buttons a, #work_buttons a').live('mouseenter', function() {
            $(this).find('.hover').fadeIn(hoverFadeTime);
}).live('mouseleave', function() {
            if(!isMouseDown) {
                $(this).find('.hover').stop().fadeOut(hoverFadeTime);
            }
}).live('mousedown',function() {
            isMouseDown = true;
            $(this).find('.normal').hide();
}).live('mouseup', function() {
            isMouseDown = false;
            $(this).find('.normal').show();
            $(this).find('.hover').stop().fadeOut(hoverFadeTime);
}).on('dragend', function() {
            $(this).find('.normal').show();
            $(this).find('.hover').stop().fadeOut(hoverFadeTime);
}); 
```

我不确定这是否与正常和悬停状态由 jQuery 处理而活动状态只是一个 css 规则这一事实有关。有人能帮忙吗？谢谢！

```
#our_projects_button {
    float: left;
    position: relative;
    left: -6px;
    width: 173px;
    height: 53px;
    margin: 0 20px 0 0;
    text-indent: -9999px;
}

#our_projects_button .normal {
    position: absolute;
    top: 0;
    left: 0;
    width: 173px;
    height: 53px;
    background: url('img/our_projects_sprite.png') transparent 0 0 no-repeat;
}

#our_projects_button .hover {
    display: none;
    position: absolute;
    top: 0;
    left: 0;
    width: 173px;
    height: 53px;
    background: url('img/our_projects_sprite.png') transparent 0 -53px no-repeat;
}

#our_projects_button .hover:active { background-position: 0 -106px; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T21:27:30.753

如果您将 dragend 代码更改为

```
.on('dragend', function() {
   $(this).find('.normal').show();
   $(this).find('.hover').stop().fadeOut(hoverFadeTime);
   isMouseDown = false;
}); 
```

# iphone - NSMutableArray 对象边界出了什么问题？

> ID：13315859
> 
> 赞同：1
> 
> 时间：2012-11-09T20:54:16.367
> 
> 标签：iphone, objective-c, ios, xcode, nsmutablearray

我有一个绘图应用程序，当用户绘制并在用户关闭并重新打开应用程序时重新加载时，路径会被保存。

我将对象（画笔颜色）添加到 NSMutableArray 然后像这样保存它们：

```
// Adding object to NSMutableArray (this is in touchesMoved)
NSData *colorData = [NSKeyedArchiver archivedDataWithRootObject:self.brushColor];
[self.brushColours addObject:colorData];

// Saving array (this is in touchesEnded)
[defaults setObject:self.brushColours forKey:[NSString stringWithFormat:@"%@BrushColours%@", currentid, pageno]];
[defaults synchronize]; 
```

这一切都很好，很漂亮，但是当我尝试重新加载路径并设置它们的颜色时，会发生这种情况：

![](../Images/1ea91c1d756bcd43c89d946e0085638a.png)

为什么会这样？

**编辑**：我正在像这样重新加载颜色（这是在每个路径的 for 循环中）：

```
NSMutableArray *arr3 = [defaults objectForKey:[NSString stringWithFormat:@"%@BrushColours%@", currentid, pageno]];
self.brushColor = [NSKeyedUnarchiver unarchiveObjectWithData:[arr3 objectAtIndex:index]]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T21:09:52.233

index 是 newpaths 中对象路径的索引，但是您使用此索引访问 arr3 中的对象，而不是 newpaths 中的对象。您确定 newpaths 数组具有相同的长度或 arr3 吗？在这样做之前做一些断言：

```
NSAssert([arr3 count]>=[newpaths count], @"newpaths is longer than arr2"); 
```

这在循环之前。可能这个断言将不正确，因为正如您的异常所说，索引超出了 arr3 范围，除非您以某种方式修改循环内的 arr3 数组。
在访问它的元素之前测试 arr3：

```
NSAssert(index<[arr3 count], @"Index out of bounds");
NSMutableArray *arr3 = [defaults objectForKey:[NSString stringWithFormat:@"%@BrushColours%@", currentid, pageno]];
self.brushColor = [NSKeyedUnarchiver unarchiveObjectWithData:[arr3 objectAtIndex:index]]; 
```

肯定一个断言会失败，你会更准确地知道（但不是完全准确）出了什么问题。通过再次调查，你可以得到错误的原因（如果你不能单独实现这一点，也可以发布更多代码）。

**编辑**

**替代解决方案：**目前尚不清楚您要做什么，但我想您想在 arr3 中找到该对象并取消归档它。
所以你可以使用 indexOfObject：

```
id obj= [newpaths objectAtIndex: index];
NSUInteger validIndex=[arr3 indexOfObject: obj];
if(validIndex!= NSNotFound)
    self.brushColor = [NSKeyedUnarchiver unarchiveObjectWithData:[arr3 objectAtIndex: validIndex]]; 
```

PS：无论如何，您可以直接取消归档 obj，除非对象结果相等（isEqual 方法）但在比较之后您以某种方式更改了对象的状态。

# winforms - 空时无法让流布局面板消失

> ID：13315866
> 
> 赞同：1
> 
> 时间：2012-11-09T20:54:39.560
> 
> 标签：winforms, layout, flowlayoutpanel

我有一个自定义 Windows 窗体（一个扩展的类`System.Windows.Forms`）。其布局如下：

![在此处输入图像描述](../Images/677e2dfb8e8cdd227f8ace2e39192c1a.png)

*   FLP：流布局面板。流向在名称中指定。
*   PB：图片框
*   实时出价：富文本框
*   b：按钮

    解决问题：底部的 FLP 可能是空的（没有按钮）。发生这种情况时，我希望它缩小到零高度，并让上面的 FLP 和 RTB 增长并填充该空间。这是因为当没有按钮时，所有空白空间看起来都很丑。`AutoSize = True`我用和配置了下部 flp `AutoSize = GrowAndShrink`。然后，对于上层 flp，我设置`AutoSize = True`和。但是当我创建一个没有按钮的表单时，空间仍然存在。如果我绘制控制边框，也就是较低的 flp 应该在的位置，我会看到一个小方点。我哪里错了？`AutoSizeMode = GrowOnly``Dock = Fill`

**更新**：我愿意以更方便的方式重做布局，甚至使用 WPF 重做整个表单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T21:04:28.390

我看起来你不需要自上而下的 FlowLayoutPanel。

尝试将您的 Right-Left FlowLayoutPanel 放在底部。然后把你的 Left-Right FlowLayoutPanel 和 Dock 填在剩下的区域。

如果您的按钮面板没有可见按钮，那么您可以隐藏面板，填充面板将占用剩余空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T21:51:11.353

如果你 remove `FLP_top_down`， change `flp_left_to_right`to be`.Dock = DockStyle.Fill`和 change `flp_left_to_right`to be `.Dock = DockStyle.Bottom`，你应该得到你所追求的。

# php - $_ENV 变量为空

> ID：13315874
> 
> 赞同：1
> 
> 时间：2012-11-09T20:55:04.183
> 
> 标签：php, environment-variables

> **可能重复：**
> [为什么我的 $_ENV 是空的？](https://stackoverflow.com/questions/3780866/why-is-my-env-empty)

我试图在我的脚本中使用 $_ENV，但它返回一个空数组。代码是：

```
print_r($_ENV); 
```

这就是我得到的回报：

```
Array ( ) 
```

该脚本在 Linux 服务器上运行（我有管理员权限，但我自己没有设置服务器）。无论我是以管理员身份还是普通用户身份登录，如果我从终端输入 env ，我会看到大约 20 个单独的项目，因此环境不是空的。

我过去使用 $_ENV 没有任何问题（但已经有一段时间了）。我错过了什么？

# 解决方案：

对 php.ini 的修改没有奏效。有效的方法如下：

找到您的 httpd 配置文件或虚拟主机配置文件（在某些情况下，它们是同一个文件），并为每个环境变量添加以下内容（在 VirtualHost 部分内）：

```
SetEnv MY_ENV_VAR_1 test1
SetEnv MY_ENV_VAR_2 test2 
```

重启阿帕奇。

在您的 php 脚本中，您使用：

```
getenv('MY_ENV_VAR1') 
```

访问这些环境设置。SetEnv 将设置这些变量并将它们传递回 Apache 以供使用。如果要使用现有的 shell 环境变量，则应将以下内容添加到 Apache 配置文件或虚拟主机文件中：

```
PassEnv env_variable [env_variable].... 
```

使其可用于 Apache 和您的脚本。

# javascript - 如何使用触摸事件使列表可拖动？HTML & Javascript

> ID：13315877
> 
> 赞同：1
> 
> 时间：2012-11-09T20:55:05.477
> 
> 标签：javascript, html, touch

我想制作一个可拖动的列表。我知道有很多插件可以获得效果，但我想实现某种拖放功能，仅使用 javascript 更改列表项的位置。我一直在寻找几天没有任何成功。我想将触摸事件用于触摸设备。我从哪说起呢？

```
<ul> 
    <li><h3>How</h3></li>
    <li><h3>To</h3></li>
    <li><h3>Drag</h3></li>
    <li><h3>and Drop</h3></li>
</ul> 
```

我对javascript有点陌生，所以我非常感谢任何帮助！

# asp.net - 在 VS 2010 中发布到 Azure 时出错 - 对象引用未设置为对象的实例

> ID：13315879
> 
> 赞同：5
> 
> 时间：2012-11-09T20:55:10.890
> 
> 标签：asp.net, azure

尝试在 Visual Studio 2010 中将 ASP.net Web 应用程序发布到 Windows Azure 时，我得到一个对象引用未设置为对象错误的实例。我能够在 IIS 和 Azure 模拟器中运行此应用程序，而无需错误。

我已经检查并检查了所有参考资料，检查了 Azure 配置设置和 web.config，但无法弄清楚发生了什么。我有另一个应用程序，它与这个没有什么不同，它发布到 Azure 没有问题。

这来自 Visual Studio 中的 Windows Azure 活动日志。似乎它即将验证存储帐户的时间。也许与此有关？

```
11:08:46 AM - Warning: There are package validation warnings.

11:08:46 AM - Preparing deployment for Repnet - 11/9/2012 11:06:35 AM with Subscription ID '********-****-****-****-************' using Service Management URL 'https://management.core.windows.net/'...

11:08:46 AM - Connecting...

11:08:48 AM - Object reference not set to an instance of an object.

11:08:48 AM - Deployment failed with a fatal error 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T05:15:37.963

检查`<connectionStrings>` web.config 文件中的元素。如果它有一个 ''`<clear/>`元素，请将其删除，之后发布应该可以工作。

见[链接](http://connect.microsoft.com/VisualStudio/feedback/details/749901/error-when-i-click-publish-object-reference-not-set-to-an-instance-of-an-object)

# python - 如何在 Flask 中构建数据以轻松构建 HTML 表格

> ID：13315883
> 
> 赞同：15
> 
> 时间：2012-11-09T20:55:40.780
> 
> 标签：python, html, flask

我正在尝试从存储在表中的数据创建 HTML 表。我的数据是从表中读取并转换为列表的字典，例如：

```
x = {'date':[u'2012-06-28', u'2012-06-29', u'2012-06-30'], 'users': [405, 368, 119]} 
```

我的目标是为任意列表长度创建一个具有以下结构的 HTML 表：

```
<table>
  <thead>
    <th>Date</th>
    <th>Users</th>
  </thead>

  <tbody>      
    <tr>
      <td>2012-06-28</td>
      <td>405</td>
    </tr>
    <tr>
      <td>2012-06-29</td>
      <td>368</td>
    </tr>
    <tr>
      <td>2012-06-30</td>
      <td>119</td>
    </tr>
  </tbody>
</table> 
```

我在我的 Flask 模板中尝试过这两种不正确的方法：

```
<tbody>
  {% for line in x %}
    <tr>
      <td>{{ x.date|tojson|safe }}</td>
      <td>{{ x.users }}</td>
     </tr>
   {% endfor %}
</tbody> 
```

它将整个列表打印到每一列中。

和：

```
{% for date in x.date %}
  <tr><td>{{ date|tojson|safe }}</td></tr>
{% endfor %}

{% for users in x.users %}
  <tr><td>{{ users }}</td></tr>
{% endfor %} 
```

它只是将所有内容打印到第一列。

这些实验和许多其他死胡同让我相信，在给定我当前的数据结构的情况下，没有像我希望的那样简单的方法来构建表。

鉴于此，我有两个问题：
1）我将如何使用我当前的数据结构构建表？
2) 为这个用例构造数据的标准或理想方式是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-11-09T21:00:15.620

就像你说的，你可以改变你的数据结构，或者改变你的模板代码。这是保持当前结构的一种方法：

```
{% for row_index in range(x['date']|count) %}
    <tr>
      <td>{{ x[row_index]['date']|tojson|safe }}</td>
      <td>{{ x[row_index]['users'] }}</td>
    </tr>
{% endfor %} 
```

* * *

或者你可以在 python 中重构你的数据：

```
x = zip(x['date'], x['users']) 
```

然后使用这个模板：

```
{% for row in x %}
    <tr>
      <td>{{ row[0]|tojson|safe }}</td>
      <td>{{ row[1] }}</td>
    </tr>
{% endfor %} 
```

* * *

您还可以构造数据，使模板不依赖于单元格的顺序：

```
from itertools import izip
x = [dict(date=d, user=u) for d, u in izip(x['date'], x['users'])] 
```

然后你可以像这样访问你的数据：

```
{% for row in x %}
    <tr>
      <td>{{ row['date']|tojson|safe }}</td>
      <td>{{ row['user'] }}</td>
    </tr>
{% endfor %} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-09-26T00:41:10.170

您可能会使用[Flask-Table](https://pypi.python.org/pypi/Flask-Table)或更复杂的东西，甚至可以使用 Flask [-Admin](https://pypi.python.org/pypi/Flask-Admin)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-09T21:57:30.297

是的，你真的想使用字典列表而不是列表字典，这在 Jinja2 中效果更好

# combobox - 对话框加载时未显示组合框

> ID：13315889
> 
> 赞同：1
> 
> 时间：2012-11-09T20:56:21.150
> 
> 标签：combobox, wix

我在自定义对话框中声明了以下组合框：

```
 <Control Id="EnvironmentCombobox" Type="ComboBox" Sorted="yes" ComboList="yes" Property="ENVIRONMENT" X="25" Y="110" Width="200" Height="15">
      <ComboBox Property="ENVIRONMENT">
        <ListItem Text="Development" Value="Development" />
        <ListItem Text="SIT" Value="SIT" />
        <ListItem Text="UAT" Value="UAT" />
        <ListItem Text="Production" Value="Production" />
      </ComboBox>
    </Control> 
```

当我运行我的安装程序并进入该对话框时，ComboBox 不会显示，直到我将鼠标移到它上面。如果我点击导航按钮，它也会出现。如果我离开并返回对话框，它又消失了，直到我将鼠标悬停在它上面或点击导航按钮。

我试过设置`Hidden="no"`和增加高度，但没有运气。

* * *

根据评论中的请求添加完整文件。

以上在**EnvironmentDlg**中：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
        <Fragment>
        <UI>
          <Dialog Id="EnvironmentDlg" Width="370" Height="270" Title="[ProductName] Setup">
            <!-- Layout. -->
            <Control Id="BannerBitmap" Type="Bitmap" X="0" Y="0" Width="370" Height="44" TabSkip="no" Text="!(loc.LicenseAgreementDlgBannerBitmap)" />
            <Control Id="BannerLine" Type="Line" X="0" Y="44" Width="370" Height="0" />
            <Control Id="BottomLine" Type="Line" X="0" Y="234" Width="370" Height="0" />

            <!-- Content. -->
            <Control Id="Title" Type="Text" X="15" Y="15" Width="300" Height="15" Transparent="yes" NoPrefix="yes" Text="{\WixUI_Font_Title}Choose environment for [ProductName]" />
            <Control Id="InstallText" Type="Text" X="25" Y="70" Width="320" Height="80" Text="Choose the environment to which [ProductName] is being installed." />
            <Control Id="EnvironmentCombobox" Type="ComboBox" Sorted="yes" ComboList="yes" Property="ENVIRONMENT" X="25" Y="110" Width="200" Height="15">
              <ComboBox Property="ENVIRONMENT">
                <ListItem Text="Development" Value="Development" />
                <ListItem Text="SIT" Value="SIT" />
                <ListItem Text="UAT" Value="UAT" />
                <ListItem Text="Production" Value="Production" />
              </ComboBox>
            </Control>

            <!-- Navigation. -->
            <Control Id="Back" Type="PushButton" X="180" Y="243" Width="56" Height="17" Text="!(loc.WixUIBack)" />
            <Control Id="Next" Type="PushButton" X="236" Y="243" Width="56" Height="17" Default="yes" Text="!(loc.WixUINext)">
              <!-- Don't allow user to continue until they have selected an environment. -->
              <Condition Action="disable">ENVIRONMENT = ""</Condition>
              <Condition Action="enable"><![CDATA[ENVIRONMENT <> ""]]></Condition>
            </Control>
            <Control Id="Cancel" Type="PushButton" X="304" Y="243" Width="56" Height="17" Cancel="yes" Text="!(loc.WixUICancel)">
              <Publish Event="SpawnDialog" Value="CancelDlg">1</Publish>
            </Control>        
          </Dialog>
        </UI>
        </Fragment>
    </Wix> 
```

序列在**MyWixUI_Unsecured**中：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
        <Fragment>
        <UI Id="MyWixUI_Unsecured">
          <TextStyle Id="WixUI_Font_Normal" FaceName="Tahoma" Size="8" />
          <TextStyle Id="WixUI_Font_Bigger" FaceName="Tahoma" Size="12" />
          <TextStyle Id="WixUI_Font_Title" FaceName="Tahoma" Size="9" Bold="yes" />

          <Property Id="DefaultUIFont" Value="WixUI_Font_Normal" />

          <DialogRef Id="ErrorDlg" />
          <DialogRef Id="FatalError" />
          <DialogRef Id="FilesInUse" />
          <DialogRef Id="MsiRMFilesInUse" />
          <DialogRef Id="PrepareDlg" />
          <DialogRef Id="ProgressDlg" />
          <DialogRef Id="ResumeDlg" />
          <DialogRef Id="UserExit" />

          <Publish Dialog="ExitDialog" Control="Finish" Event="EndDialog" Value="Return" Order="999">1</Publish>

          <Publish Dialog="WelcomeDlg" Control="Next" Event="NewDialog" Value="EnvironmentDlg">1</Publish>

          <Publish Dialog="EnvironmentDlg" Control="Back" Event="NewDialog" Value="WelcomeDlg">1</Publish>
          <Publish Dialog="EnvironmentDlg" Control="Next" Event="NewDialog" Value="VerifyReadyDlg">1</Publish>

          <Publish Dialog="VerifyReadyDlg" Control="Back" Event="NewDialog" Value="EnvironmentDlg">1</Publish>
        </UI>

        <UIRef Id="WixUI_Common" />
        </Fragment>
    </Wix> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T14:09:10.453

问题与 EnvironmentDlg 中 InstallText 控件的高度有关。

将高度更改为 25

```
<Control Id="InstallText" Type="Text" X="25" Y="70" Width="320" Height="25" Text="Choose the environment to which [ProductName] is being installed." /> 
```

**完整代码：**

```
<?xml version="1.0" encoding="utf-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
    <Fragment>
        <UI>
            <Dialog Id="EnvironmentDlg" Width="370" Height="270" Title="[ProductName] Setup">
                <!-- Layout. -->
                <Control Id="BannerBitmap" Type="Bitmap" X="0" Y="0" Width="370" Height="44" TabSkip="no" Text="!(loc.LicenseAgreementDlgBannerBitmap)" />
                <Control Id="BannerLine" Type="Line" X="0" Y="44" Width="370" Height="0" />
                <Control Id="BottomLine" Type="Line" X="0" Y="234" Width="370" Height="0" />
                <!-- Content. -->
                <Control Id="Title" Type="Text" X="15" Y="15" Width="300" Height="15" Transparent="yes" NoPrefix="yes" Text="{\WixUI_Font_Title}Choose environment for [ProductName]" />
                <Control Id="InstallText" Type="Text" X="25" Y="70" Width="320" Height="25" Text="Choose the environment to which [ProductName] is being installed." />
                <Control Id="EnvironmentCombobox" Type="ComboBox" Sorted="yes" ComboList="yes" Property="ENVIRONMENT" X="25" Y="110" Width="200" Height="15">
                    <ComboBox Property="ENVIRONMENT">
                        <ListItem Text="Development" Value="Development" />
                        <ListItem Text="SIT" Value="SIT" />
                        <ListItem Text="UAT" Value="UAT" />
                        <ListItem Text="Production" Value="Production" />
                    </ComboBox>
                </Control>
                <!-- Navigation. -->
                <Control Id="Back" Type="PushButton" X="180" Y="243" Width="56" Height="17" Text="!(loc.WixUIBack)" />
                <Control Id="Next" Type="PushButton" X="236" Y="243" Width="56" Height="17" Default="yes" Text="!(loc.WixUINext)">
                    <!-- Don't allow user to continue until they have selected an environment. -->
                    <Condition Action="disable">ENVIRONMENT = ""</Condition>
                    <Condition Action="enable"><![CDATA[ENVIRONMENT <> ""]]></Condition>
                </Control>
                <Control Id="Cancel" Type="PushButton" X="304" Y="243" Width="56" Height="17" Cancel="yes" Text="!(loc.WixUICancel)">
                    <Publish Event="SpawnDialog" Value="CancelDlg">1</Publish>
                </Control>
            </Dialog>
        </UI>
    </Fragment>
</Wix> 
```

我会建议你使用[WixEdit](http://wixedit.sourceforge.net/)控件来设计 UI

# html - 完美对齐的 HTML 段落

> ID：13315892
> 
> 赞同：2
> 
> 时间：2012-11-09T20:56:26.500
> 
> 标签：html, css, alignment, paragraph

我想完美对齐一个段落，使整个段落位于页面的中心，但左侧和右侧完全对齐。这是一个完美对齐的段落的图片示例： ![在此处输入图像描述](../Images/a887857ec17973d343602a48f956d6d2.png)

该段落看起来像是在某种盒子中，左右两侧完全笔直。如何在 css 或 html 中执行此操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T20:59:02.753

包装器需要通过 CSS 应用文本对齐：

```
text-align:justify;
text-justify:inter-word; 
```

一般来说，与打印的“排版”应用程序相比，浏览器作为完全对齐的文本做得很糟糕。一般来说，浏览器上的完全对齐会使文本更难阅读，通常应该避免。

CSS：

```
.justify {
    text-align:justify;
    text-justify:inter-word;
} 
```

HTML

```
<div class="justify"> ...your text...  </div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T20:59:18.253

CSS 来证明文本：

```
style="text-align:justify" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T21:02:01.220

好吧，单词之间的完美间距是通过对齐文本来完成的：

```
p {
    text-align:justify;
    text-justify:inter-word;
} 
```

段落在页面中心的定位需要一套通用的规则：

```
p {
    width: auto;
    margin: 0 auto;
} 
```

边距规则将段落的顶部和底部边距设置为 0（如果您愿意，可以将其修改为足够的间距），并且自动确保左右边距相同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T21:18:30.653

```
<html>
<head>
<style>
div
{
text-align:justify;
text-justify:inter-word;
}
</style>
</head>

<body>
<h1>Perfect Box Type Alignment</h1>
<div>I want to perfectly align a paragraph so that the entire paragraph is in the center of the page but the left and right side are perfectly aligned. Here's a picture example of a paragraph that is perfectly aligned:I want to perfectly align a paragraph so that the entire paragraph is in the center of the page but the left and right side are perfectly aligned. Here's a picture example of a paragraph that is perfectly aligned::</div>
</body>

</html> 
```

请调整浏览器窗口的大小以查看其工作原理。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-02T16:49:00.093

试试这个来解决你的问题：

```
put STYLE code inside external CSS file or <head><style> Write style code here..</style></head>
.proper_alignment_paragraph_class  
{  
  text-align:justify;  
  text-justify:inter-word;  
}
```

```
Put this code inside <body></body> tag.  

<div class="proper_alignment_paragraph_class">
Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
</div>
```

# iphone - 如何在 iOS 6 中获取用户的联系人列表？

> ID：13315897
> 
> 赞同：1
> 
> 时间：2012-11-09T20:56:46.710
> 
> 标签：iphone, ios, xcode, cocoa-touch, ios6

我已经使用以下代码几年了，它一直有效，但在 iOS 6 中它看起来不再有效。如何获取 iOS 6 设备上所有联系人的列表？

```
ABAddressBookRef myAddressBook = ABAddressBookCreate();
        NSMutableArray *people = (__bridge_transfer NSMutableArray *)ABAddressBookCopyArrayOfAllPeople(myAddressBook);
        CFRelease(myAddressBook);

        // repeat through all contacts in the inital array we loaded
        for(int i=0; i<[people count]; i++)
        {
            NSString *aName;
            NSString *firstName = (__bridge_transfer NSString *)ABRecordCopyValue((__bridge ABRecordRef)([people objectAtIndex:i]), kABPersonFirstNameProperty);
            NSString *lastName = (__bridge_transfer NSString *)ABRecordCopyValue((__bridge ABRecordRef)([people objectAtIndex:i]), kABPersonLastNameProperty);

            if (([firstName isEqualToString:@""] || [firstName isEqualToString:@"(null)"] || firstName == nil) &&
                ([lastName isEqualToString:@""] || [lastName isEqualToString:@"(null)"] || lastName == nil))
            {
                // do nothing
            }
            else 
            {
                aName = [NSString stringWithFormat:@"%@ %@", firstName, lastName];

                if ([firstName isEqualToString:@""] || [firstName isEqualToString:@"(null)"] || firstName == nil)
                {
                    aName = [NSString stringWithFormat:@"%@", lastName];
                }

                if ([lastName isEqualToString:@""] || [lastName isEqualToString:@"(null)"] || lastName == nil)
                {
                    aName = [NSString stringWithFormat:@"%@", firstName];
                }

                [self.tableItems addObject:aName];
            }

        }

        [self.tableItems sortUsingSelector:@selector(compare:)]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T21:16:59.470

在 ios6 中，您需要请求读取 AddressBook 的权限，否则您将获得 nil。使用这样的东西：

```
- (BOOL)askContactsPermission {
    __block BOOL ret = NO;
    if (ABAddressBookRequestAccessWithCompletion != NULL) { // we're on iOS6

        dispatch_semaphore_t sema = dispatch_semaphore_create(0);
        ABAddressBookRef addressBook = ABAddressBookCreate();
        ABAddressBookRequestAccessWithCompletion(addressBook, ^(bool granted, CFErrorRef error) {
            ret = granted;
            dispatch_semaphore_signal(sema);
        });
        if (addressBook) {
            CFRelease(addressBook);
        }

        dispatch_semaphore_wait(sema, DISPATCH_TIME_FOREVER);
        dispatch_release(sema);
    }
    else { // we're on iOS5 or older
        ret = YES;
    }

    return ret;
} 
```

如果此方法返回 NO，运气不好，您将无法访问 AB。我在这里用信号量锁定，因为如果用户不允许 AB，我不想继续使用我的应用程序。还有其他方法，只需检查 API。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-09T22:38:08.713

您确实需要向用户征求许可，这将在您这样做时向用户触发提示。这是另一种使用执行块来处理结果的方法，如果您需要从公共代码中查询当前访问状态，它的使用也与版本无关。

我像这样实现访问管理器

AppContactsAccessManager.h

```
#import <AddressBook/AddressBook.h>

typedef enum
{
    kABAuthStatusNotDetermined = 0,
    kABAuthStatusRestricted,
    kABAuthStatusDenied,
    kABAuthStatusAuthorized,
    kABAuthStatusPending,
}AddressBookAuthStatus;

typedef void (^AddressbookRequestHandler)(ABAddressBookRef addressBookRef, BOOL available);

@interface AppContactsAccessManager : NSObject
{
     AddressBookAuthStatus status;
}
- (void) requestAddressBookWithCompletionHandler:(AddressbookRequestHandler)handler;
- (AddressBookAuthStatus) addressBookAuthLevel;

@end 
```

AppContactsAccessManager.m

```
@implementation AppContactsAccessManager

- (BOOL) isStatusAvailable:(AddressBookAuthStatus)theStatus
{
    return (theStatus == kABAuthStatusAuthorized || theStatus == kABAuthStatusRestricted);
}

- (void) requestAddressBookWithCompletionHandler:(AddressbookRequestHandler)handler
{
    ABAddressBookRef addressBookRef = NULL;

    if([self isiOS6]){
        addressBookRef = ABAddressBookCreateWithOptions(nil, nil);
        ABAuthorizationStatus curStatus = ABAddressBookGetAuthorizationStatus();
        if(curStatus == kABAuthorizationStatusNotDetermined)
        {
            status = kABAuthStatusPending;
            ABAddressBookRequestAccessWithCompletion(addressBookRef, ^(bool granted, CFErrorRef error) {
                status = ABAddressBookGetAuthorizationStatus();
                if(handler != NULL){
                    handler(addressBookRef, [self isStatusAvailable:status]);
                }
            });
        }else
        {
            status = curStatus;
            dispatch_async(dispatch_get_current_queue(), ^{
                if(handler != NULL){
                    handler(addressBookRef, [self isStatusAvailable:status]);
                }
            });
        }
    }else
    {
        addressBookRef = ABAddressBookCreate();
        status = kABAuthStatusAuthorized;
        dispatch_async(dispatch_get_current_queue(), ^{
            if(handler != NULL){
                handler(addressBookRef, [self isStatusAvailable:status]);
            }
            });
        }
}

- (AddressBookAuthStatus) addressBookAuthLevel
{
        return status;
}

@end 
```

用法看起来像：

```
AppContactsAccessManager* accessMgr = [AppContactsAccessManager new];
[accessMgr requestAddressBookWithCompletionHandler:^(ABAddressBookRef theAddressBookRef, BOOL available) {
    // do your addressbook stuff in here
}]; 
```

# c# - 行和列列表 > 矩阵；

> ID：13315902
> 
> 赞同：-3
> 
> 时间：2012-11-09T20:57:06.903
> 
> 标签：c#

朋友们，我有这个二维列表，想知道如何获得你的行数和列数。

关于克罗诺斯

```
List<List<string>> matrix; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T20:58:52.787

那不是二维数组，所以它没有“行”和“列”。使用它可能会更好，`int[,]`而不是`List<List<int>>`.

但是假设您无法更改类型，那么您可以使用`matrix.Count`. 这些列表中的每一个都可能具有不同数量的元素。如果您确定它们都具有相同数量的元素，那么您可以使用`matrix[0].Count`来获取第一个列表中的元素数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T21:00:30.747

这不是 2D 数组，因此`List<string>`其中的每一个都`List<>`可能有不同数量的元素。所以：

```
int rows = matrix.Count;
int columnsFirst = matrix.First().Count; //and so on... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T21:00:50.957

因为这是一个列表列表，所以列数可能会有所不同（例如，一个列表可能有 3 个元素，而另一个列表可能有 10 个）。

如果列表大小完全相同，则：

```
int cols  = matrix[0].Count;
int rows = matrix.Count; 
```

# jquery - Jquery Nivo Slider为每张幻灯片设置延迟时间

> ID：13315904
> 
> 赞同：2
> 
> 时间：2012-11-09T20:57:13.850
> 
> 标签：jquery, nivo-slider

我们正在使用一个特殊的系统，它允许我们的用户设置幻灯片之间的延迟以及图像是否包含链接。我们在幻灯片中使用 mootools，但希望更新到 nivoSlider。

一个 php 脚本根据我们的旧系统要求导出以下内容

```
var data = {
'0225201274127_1.jpg': {delay:4000},
'0225201274417_4.jpg': {delay:3000},
'0225201274624_9.jpg': {delay:5000},
'0225201274607_8.jpg': {delay:3000},
'0225201274456_6.jpg': {delay:6000},
'0225201274521_7.jpg': {delay:7000},
'0225201274435_5.jpg': {delay:3000},
'0225201274338_2.jpg': {delay:2000},
'0225201274647_10.jpg': {delay:1000},
'0225201274359_3.jpg': {delay:6000},
'0225201274707_11.jpg': {delay:4000}
}; 
```

我只是在寻找一种将上述延迟设置为幻灯片中单个图像的方法。

如果需要，我可以重新配置输出。我们整天都在尝试不同的方法，但没有成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T21:32:24.253

我正在使用带有“afterLoad”的数组，效果很好。

```
 var delays = [4000,3000,5000,3000]; //your delay array

    function pageLoad() {
        $(function () {
            $('#slider').nivoSlider({
                pauseTime: 50000,
                directionNav: true,
                afterChange: function () { setDelay() },
                afterLoad: function () { setDelay() },
                controlNav: true,
                pauseOnHover: false
            });
        });
    }

    function setDelay() {
        var currentSlide = $('#slider').data("nivo:vars").currentSlide;
        setTimeout(function () {
            $('#slider').find('a.nivo-nextNav').click()
        }, delays[currentSlide]);

    } 
```

希望这可以帮助。你的 html 的其余部分是标准的 nivo 布局

# javascript - 隐藏 iFrame 滚动条，使其成为可从另一个滚动条滚动的 iframe

> ID：13315905
> 
> 赞同：1
> 
> 时间：2012-11-09T20:57:18.340
> 
> 标签：javascript, jquery, html, css, iframe

我正在使用 iframe 制作响应式工具。由于滚动条，它不显示正确的宽度。这就是我想做的。我想隐藏 iframe 中的滚动条（然后它将显示正确的宽度），然后我希望它能够以某种方式从 iframe 外部的滚动条滚动。这可能吗？？？

# sql - 汇总统计的派生表

> ID：13315909
> 
> 赞同：0
> 
> 时间：2012-11-09T20:57:39.220
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我经常发现自己运行查询以获取满足特定标准的人数、该人群中的总人数以及找到满足该标准的百分比。我一直在以同样的方式做一段时间，我想知道 SO 会做什么来解决相同类型的问题。以下是我编写查询的方式：

```
select m.state_cd
    ,m.injurylevel
    ,COUNT(distinct m.patid) as pplOnRx
    ,x.totalPatientsPerState
    ,round((COUNT(distinct m.patid) /cast(x.totalPatientsPerState as float))*100,2) as percentPrescribedNarcotics
    from members as m
    inner join rx on rx.patid=m.PATID
    inner join DrugTable as dt on dt.drugClass=rx.drugClass
    inner join 
    (
        select m2.state_cd, m2.injurylevel, COUNT(distinct m2.patid) as totalPatientsPerState
            from members as m2
            inner join rx on rx.patid=m2.PATID
            group by m2.STATE_CD,m2.injuryLevel
    ) x on x.state_cd=m.state_cd and m.injuryLevel=x.injurylevel
    where drugText like '%narcotics%'
    group by m.state_cd,m.injurylevel,x.totalPatientsPerState
    order by m.STATE_CD,m.injuryLevel 
```

在此示例中，并非出现在`members`表格中的每个人都在`rx`表格中。派生表确保所有 in的人都`rx`在`members`没有条件的情况下`drugText like narcotics`。从我玩过的东西来看，该`over(partition by`子句似乎可以在这里工作。我不知道是不是这样，在我看来就是这样。其他人将如何解决这个问题？

结果：

![在此处输入图像描述](../Images/c98d1497c9caaa4c43f35b83b02cb97a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T08:01:09.913

这正是 MDX 和 SSAS 的设计目的。如果您坚持在 SQL 中执行此操作（这没有错），您是否在寻求一种具有更好性能的方法？在这种情况下，这将取决于表的索引方式、tempdb 速度，以及表是否已分区，那么也取决于。

此外，不同的计数将成为更大的性能影响之一。谓词中的`like '%narcotics%'`in 将强制进行全表扫描，应该不惜一切代价避免（这可以是数据模型中的整数键吗？）

要回答您的问题，不确定窗口 ( `over partition by`) 是否会表现得更好。我会对其进行测试并查看，但查询没有任何“错误”。

您可以使用 group by 或这两者的组合将 count distinct 重写为虚拟表或临时表。

为了说明，这是一个窗口存根，您可以扩展为相同的查询：

```
select a.state_cd,a.injurylevel,a.totalpatid, count(*) over (partition by a.state_cd, a.injurylevel)
from
(select state_cd,injurylevel,count(*) as totalpatid, count(distinct patid) as patid 
from
#members
group by state_cd,injurylevel
)  a 
```

明白我说的没有那么有帮助是什么意思吗？再说一次，有时稍微重写查询可以通过选择更好的执行计划来提高性能，但与其在黑暗中冒险，我会首先找到您所拥有的查询中的瓶颈，因为您已经花时间编写它。

# python - PySide QGLBuffer 分配输入数据

> ID：13315910
> 
> 赞同：1
> 
> 时间：2012-11-09T20:57:41.710
> 
> 标签：python, qt, opengl, pyside

我正在尝试运行 OpenGL Core Profile Qt 演示的 PySide 版本 - [How_to_use_OpenGL_Core_Profile_with_Qt](http://qt-project.org/wiki/How_to_use_OpenGL_Core_Profile_with_Qt)。

它使用 QGLBuffer.allocate() 方法（C++ 代码）

```
float points[] = { -0.5f, -0.5f, 0.0f, 1.0f,
                    0.5f, -0.5f, 0.0f, 1.0f,
                    0.0f,  0.5f, 0.0f, 1.0f };
m_vertexBuffer.allocate( points, 3 * 4 * sizeof( float ) ); 
```

Pythonic方式将是：

```
points = [-0.5, -0.5, 0.0, 1.0,
           0.5, -0.5, 0.0, 1.0,
           0.0,  0.5, 0.0, 1.0]
m_vertexBuffer.allocate(points) 
```

但是当我运行此代码时，出现以下错误

```
TypeError: 'PySide.QtOpenGL.QGLBuffer.allocate' called with wrong argument types:
  PySide.QtOpenGL.QGLBuffer.allocate(list)
Supported signatures:
  PySide.QtOpenGL.QGLBuffer.allocate(void, int = -1)
  PySide.QtOpenGL.QGLBuffer.allocate(int) 
```

我发现用于此功能的[单元测试- 它使用 QByteArray。](http://pyside.sourcearchive.com/documentation/1.0.1-1/qglbuffer__test_8py_source.html)

```
data = QByteArray("12345")
b.allocate(data) 
```

但我不明白如何将 Python 列表转换为 QByteArray 或将分配与列表一起使用。还是 PySide 包装函数中的错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T12:30:36.203

看来我找到了解决方案。我们应该使用 struct 或 array 之类的 python 模块。例如：

```
from array import *

points = [0.5, 1, -0.5]
data = array('f', points)
# data.tostring() - returns packed data with size of len(data.tostring()) 
```

# php - 在 wordnik 中使用“开始”一词时报错

> ID：13315914
> 
> 赞同：0
> 
> 时间：2012-11-09T20:58:03.863
> 
> 标签：php

我正在使用 API wordnik，当我搜索“开始”这个词的定义时，我收到以下错误

警告：类标签在第 172 行的 /wordnik/api/APIClient.php 中没有属性类型

致命错误：类名必须是第 154 行 /wordnik/api/APIClient.php 中的有效对象或字符串

我可以搜索其他词很好，它似乎只是这个。我敢肯定还有更多我还没有找到

第 172 行位于具有 E_USER_WARNING 的代码部分）；

第 154 行位于具有 $instance = new $class(); 的代码部分。// 这会实例化名为 $class 的类

```
<?php
/**
* APIClient.php
*/

/* Autoload the model definition files */
/**
*
*
* @param string $className the class to attempt to load
*/
function __autoload($className) {
$currentDir = substr(__FILE__, 0, strrpos(__FILE__, '/'));
if (file_exists($currentDir . '/' . $className . '.php')) {
    include $currentDir . '/' . $className . '.php';
} elseif (file_exists($currentDir . '/../model/' . $className . '.php')) {
    include $currentDir . '/../model/' . $className . '.php';
}
}

class APIClient {

public static $POST = "POST";
public static $GET = "GET";
public static $PUT = "PUT";
public static $DELETE = "DELETE";

/**
 * @param string $apiKey your API key
 * @param string $apiServer the address of the API server
 */
function __construct($apiKey, $apiServer) {
    $this->apiKey = $apiKey;
    $this->apiServer = $apiServer;
}

/**
 * @param string $resourcePath path to method endpoint
 * @param string $method method to call
 * @param array $queryParams parameters to be place in query URL
 * @param array $postData parameters to be placed in POST body
 * @param array $headerParams parameters to be place in request header
 * @return unknown
 */
public function callAPI($resourcePath, $method, $queryParams, $postData,
    $headerParams) {

    $headers = array();
    $headers[] = "Content-type: application/json";

    # Allow API key from $headerParams to override default
    $added_api_key = False;
    if ($headerParams != null) {
        foreach ($headerParams as $key => $val) {
            $headers[] = "$key: $val";
            if ($key == 'api_key') {
                $added_api_key = True;
            }
        }
    }
    if (! $added_api_key) {
        $headers[] = "api_key: " . $this->apiKey;    
    }       

    if (is_object($postData) or is_array($postData)) {
        $postData = json_encode($postData);
    }

    $url = $this->apiServer . $resourcePath;

    $curl = curl_init();
    curl_setopt($curl, CURLOPT_TIMEOUT, 5);
    // return the result on success, rather than just TRUE
    curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($curl, CURLOPT_HTTPHEADER, $headers);

    if ($method == self::$GET) {
        if (! empty($queryParams)) {
            $url = ($url . '?' . http_build_query($queryParams));
        }
    } else if ($method == self::$POST) {
            curl_setopt($curl, CURLOPT_POST, true);
            curl_setopt($curl, CURLOPT_POSTFIELDS, $postData);
        } else if ($method == self::$PUT) {
            $json_data = json_encode($postData);
            curl_setopt($curl, CURLOPT_CUSTOMREQUEST, "PUT");
            curl_setopt($curl, CURLOPT_POSTFIELDS, $postData);
        } else if ($method == self::$DELETE) {
            curl_setopt($curl, CURLOPT_CUSTOMREQUEST, "DELETE");
            curl_setopt($curl, CURLOPT_POSTFIELDS, $postData);
        } else {
        throw new Exception('Method ' . $method . ' is not recognized.');
    }

    curl_setopt($curl, CURLOPT_URL, $url);

    // Make the request
    $response = curl_exec($curl);
    $response_info = curl_getinfo($curl);

    // Handle the response
    if ($response_info['http_code'] == 0) {
        throw new Exception("TIMEOUT: api call to " . $url .
            " took more than 5s to return" );
    } else if ($response_info['http_code'] == 200) {
        $data = json_decode($response);
    } else if ($response_info['http_code'] == 401) {
        throw new Exception("Unauthorized API request to " . $url .
                ": ".json_decode($response)->message );
    } else if ($response_info['http_code'] == 404) {
        $data = null;
    } else {
        throw new Exception("Can't connect to the api: " . $url .
            " response code: " .
            $response_info['http_code']);
    }

    return $data;
}

/**
 * Take value and turn it into a string suitable for inclusion in 
 * the path or the header
 * @param object $object an object to be serialized to a string
 * @return string the serialized object
 */
public static function toPathValue($object) {
    if (is_array($object)) {
        return implode(',', $object);
    } else {
        return $object;
    }
}

/**
 * Derialize a JSON string into an object
 *
 * @param object $object object or primitive to be deserialized
 * @param string $class class name is passed as a string
 * @return object an instance of $class
 */
public static function deserialize($object, $class) {

    if (in_array($class, array('string', 'int', 'float', 'bool'))) {
        settype($object, $class);
        return $object;
    } else {
        $instance = new $class(); // this instantiates class named $class
        $classVars = get_class_vars($class);
    }

    foreach ($object as $property => $value) {

        // Need to handle possible pluralization differences
        $true_property = $property;

        if (! property_exists($class, $true_property)) {
            if (substr($property, -1) == 's') {
                $true_property = substr($property, 0, -1);
                if (! property_exists($class, $true_property)) {
                    trigger_error("class $class has no property $property"
                        . " or $true_property", E_USER_WARNING);
                }
            } else {
                trigger_error("class $class has no property $property",
                    E_USER_WARNING);
            }
        }

        $type = $classVars['swaggerTypes'][$true_property];
        if (in_array($type, array('string', 'int', 'float', 'bool'))) {
            settype($value, $type);
            $instance->{$true_property} = $value;
        } elseif (preg_match("/array<(.*)>/", $type, $matches)) {
            $sub_class = $matches[1];
            $instance->{$true_property} = array();
            foreach ($value as $sub_property => $sub_value) {
                $instance->{$true_property}[] = self::deserialize($sub_value,
                    $sub_class);
            }
        } else {
            $instance->{$true_property} = self::deserialize($value, $type);
        }
    }
    return $instance;
}
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T21:55:14.593

抱歉，这是由于标签模型中缺少字段。它已被修复：

[https://github.com/wordnik/wordnik-php/commit/cdbf02bdc40769b5eac961d49c4e8c05462f1e8b](https://github.com/wordnik/wordnik-php/commit/cdbf02bdc40769b5eac961d49c4e8c05462f1e8b)

请拉动并重试。感谢您让我们知道！

# windows-8 - 是否有适用于 Windows 8 C# 的 Socket.IO 类

> ID：13315916
> 
> 赞同：0
> 
> 时间：2012-11-09T20:58:12.637
> 
> 标签：windows-8, socket.io

C# 中是否有适用于 Windows 8 Metro 的 Socket.IO 客户端类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T22:35:47.613

这是你想要的？

[http://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.networking.sockets.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.networking.sockets.aspx)

# c# - 在 C# 中检查二维数组的分配

> ID：13315917
> 
> 赞同：-3
> 
> 时间：2012-11-09T20:58:17.607
> 
> 标签：c#, multidimensional-array, variable-assignment

我想知道如何在 c# 中检查二维字符串数组的赋值

`string[][] mString; bool empty = string.IsNullOrEmpty(mString);`

不成功。一些帮助？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T21:00:23.507

你到底想检查什么？

您没有二维数组（应该是`[,]`），而是*锯齿状数组*或*数组数组*。

所以你可以写：

```
bool empty = mString == null;              // the whole (outer) array

// 1+ sub-arrays is null?
bool empty = (mString == null) || mString.Any(a => a == null)) ;

// any string is null or empty
bool empty = (mString == null) 
      || mString.Any(a => a == null))
      || mString.Any(a => a.Any (s => string.IsNullOrEmpty(s)); 
```

# mysql - Linux：需要从服务器 A 检索服务器 B 上的文件列表，不能使用 PHP 或 KeyGen 进行 SSH

> ID：13315921
> 
> 赞同：0
> 
> 时间：2012-11-09T20:58:24.410
> 
> 标签：mysql, linux, perl, ssh, ftp

我需要从作为 FTP 服务器的服务器 B 到作为 mysql 服务器的服务器 A（从服务器 A）检索 *.zip 文件的列表。我无法在没有密码的情况下使用 PHP 或 KeyGen 进行 SSH。我能做的事情非常有限。我开始尝试创建一个 Perl 脚本以允许 ssh 无需密码登录，但依赖项不断增加，网络无法连接到 Internet 进行更新，我无法安装在 mysql 或 ftp 上的默认文件夹中一旦我离开我的 ~ 主目录，服务器由于缺乏权限。

以下 bash 脚本完全符合我的要求，但是我无法在生产中使用它，因为我无法生成允许 ssh 没有密码的 ssh-rsa/dsa-auth 密钥。对此事的任何想法将不胜感激。

```
`##Check tmp for previous listing

   fileExists=$(ls /tmp | grep file | wc -l);

 ## File should not exist--- Just incase we will check and remove it 
   if [ $fileExists = "1" ]; then

      rm /tmp/File.tmp

   fi

   ssh usr@100.0.0.0 ls | grep .zip >> /tmp/File.tmp

   echo "File list recieved sucessfully $DATE" >> ./logs/fileList.log 
```

提前感谢您能给我的任何指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T21:02:33.567

我知道这个答案可能不是你想要的，但我没有看到除了使用`Net::SSH::Expect`perl 之外的任何其他方法。我发现您可能已经尝试过那个。如果您整理了依赖项，这应该可以帮助您开始：

**免责声明：**未经测试，但重写了我为其他一些东西所拥有的一些功能代码

```
#!/usr/bin/perl

use warnings;
use strict;
use Net::SSH::Expect;

# Remove that file you didn't want in /tmp
if (-e '/tmp/File.tmp') { unlink('/tmp/File.tmp') }

# These should be obvious
my $username = 'bob';
my $password = 'bobsecretpassword';
my $targethosts = '100.0.0.0';

print "Trying $host... ";
my $ssh = Net::SSH::Expect->new(
  host      => $host,
  user      => $username,
  password  => $password,
) or die "Couldn't create SSH client\n";

$ssh->run_ssh() or die "Couldn't run SSH client\n";

my $output = $ssh->exec("ls *.zip");

open LOG,">>./logs/fileList.log"

my $timestamp = time();    # !!!! You probably want a better sollution for a timestamp than this
print LOG "$timestamp\tFile list received OK\n";

# Cleanup time... not a whole lot to do, tho
$ssh->close();
close LOG;

__END__ 
```

**至于依赖问题**，恐怕除了希望 cpan 为你解决它之外，我无能为力，因为这通常是它为我做的：`cpan -i Net::SSH::Expect`

在（希望）为您的用户安装模块之后，您可能需要告诉 perl 将您的个人模块目录添加到 @INC，但这超出了本文的范围（无论如何，google 应该花费太长时间）。

或者，贿赂系统管理员并让他/她在系统范围内安装它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T21:48:07.187

[`lftp`](http://lftp.yar.ru/lftp-man.html)如果您对进程列表中显示的用户名和密码不敏感，可以快速执行此操作

```
lftp -u username,password sftp://server -e "ls" 
```

它还可以从文件运行一系列命令（使用 -f 开关），因此不会显示用户名和密码。它应该出现在大多数 linux 机器上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T22:55:12.047

```
#!/usr/bin/perl

use strict;
use warnings;
use Net::SFTP::Foreign;

my $sftp = Net::SFTP::Foreign->new(host => '...', user => '...', password => '...');
$sftp->setcwd('...');
$sftp->mget('*.zip'); 
```

# python - 在字符串中的占位符之间提取和替换子字符串

> ID：13315922
> 
> 赞同：2
> 
> 时间：2012-11-09T20:58:34.500
> 
> 标签：python, regex

我有一个输入文本，

```
input = 'I like {sushi} and {tempura}.' 
```

并希望从中获取列表和替换的 src。

```
lst = ['sushi', 'tempura']
src = 'I like * and *.' 
```

我可以在输入/输出字符串中使用任何标记来代替`{}`and `*`，例如`[]`or 之类的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-09T21:02:51.257

```
import re
input = 'I like {sushi} and {tempura}.'
regex = re.compile(r'\{([^\}]*)\}')
lst = regex.findall(input)            #['sushi','tempura']
mod_str = regex.sub('*',input)        #I like * and *.
print (lst)
print (mod_str) 
```

您还可以使用字符串格式进行替换：

```
mod_str = input.format(**dict((x,'*') for x in lst)) 
```

* * *

正则表达式分解（注意我使用了原始字符串 [ `r'...'`]）：

*   `\{` -- 寻找文字'{'
*   `[^\}]`-- 匹配任何不是文字 '}' 的东西
*   `*`-- 尽可能多地匹配它。
*   `\}`-- 匹配文字 '}'

添加括号以在匹配中进行分组`re.findall`。

* * *

正如 DSM 所指出的，另一个在标记之间查找文本的常用习语是：

```
r"\{(.*?)\}" 
```

意思是：

*   `\{`-- 匹配文字'{'
*   `(.*?)`-- 匹配任何东西，但不要贪心 -- （不要吃 re 将能够用于下一部分匹配的东西）
*   `'\}'`-- 匹配文字 '}'

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-09T21:18:40.900

因为我无法阻止自己尝试寻找非正则表达式的方法来做事，所以这是一种使用标准字符串格式的方法：

```
>>> import string
>>> s = 'I like {sushi} and {tempura}.'
>>> parsed = string.Formatter().parse(s)
>>> fields = [p[1] for p in parsed if p[1]]
>>> src = s.format(**{f: '*' for f in fields})
>>> fields
['sushi', 'tempura']
>>> src
'I like * and *.' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T21:08:26.913

一种易于理解的方法，用于匹配文本之间的`{}`

```
import re

input = 'I like {sushi} and {tempura}'
lst = re.findall('{[(a-zA-Z)]*}',input)
src = re.sub('{[a-zA-Z]*}','*',input)

print lst
['sushi', 'tempura']

print src
I like * and * 
```

如果您想匹配两者之间的任何内容，`{}`则需要使用`'{[^}]*}'`mgilsons 回答节目或`{(.*?)}`来自 DSM。

# ios - 类似 Siri 的 UITableView 滚动到底部/页脚

> ID：13315927
> 
> 赞同：0
> 
> 时间：2012-11-09T20:59:00.227
> 
> 标签：ios, uitableview, siri

我需要将 UITableView 滚动到一个没有当前 UITableViewCells 的空间，只在顶部留下最后一个单元格（可变长度），就像 Siri 一样。

目前我正在滚动 UITableView

```
[mainTableView setContentOffset:CGPointMake(0, mainTableView.frame.size.height-80) animated:YES]; 
```

但是，当我在 UITableView 上“重新加载数据”时，滚动跳跃，我没有得到想要的平滑滚动效果，就像 Siri 一样。

有什么简单的方法可以实现这种滚动需求吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T21:11:49.850

最简单的解决方案是将 UIView 添加为 UITableView footerView。如果您的表格是 300 像素高，而您的单元格是 44 像素高（单元格的默认值），那么您将需要添加一个高度为 256 像素（300-44）的 footerView。这样，您可以滚动到您的最后一个单元格将是唯一可见并保持在顶部的位置（您的任务是计算该位置的位置；））

# android - 如何将联系人（电子名片格式）写入 NdefMessage？

> ID：13315933
> 
> 赞同：3
> 
> 时间：2012-11-09T20:59:17.550
> 
> 标签：android, nfc

我正在尝试将 NdefMessage 写入 NFC 标签，以便拥有一张 NFC 名片，当标签被用户手机点击时，它会显示联系人信息。

我想通过我的主应用程序传递联系信息。在 EditText 字段上，但我希望用户打开与 People 的联系人（Android 的默认应用程序）。

我很难理解如何编写正确的有效载荷格式。

希望你能帮我解决这个问题！谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T01:03:45.560

我得到了这个工作。对于高级用户来说这很简单，但我认为像我这样的新手会很高兴找到这样的东西。下面的示例代码，请注意，由于 Type2 标签约束，我对一些数据进行了硬编码。

```
private NdefRecord createRecord(String text)
        throws UnsupportedEncodingException {

    //Intent intent = getIntent();
    //EditText editTextWeb = (EditText)
    EditText editText = (EditText) findViewById(R.id.editTextWeblinks);
    String nameVcard = "BEGIN:VCARD" +"\n"+ "VERSION:2.1" +"\n" + "N:;" + editText.getText().toString() + "\n" +"ORG: PlanAyala"+"\n"+ "TEL;HOME:6302421" +"\n"+ "END:VCARD";
    byte[] uriField = nameVcard.getBytes(Charset.forName("US-ASCII"));
    byte[] payload = new byte[uriField.length + 1];              //add 1 for the URI Prefix
    //payload[0] = 0x01;                                      //prefixes http://www. to the URI
    System.arraycopy(uriField, 0, payload, 1, uriField.length);  //appends URI to payload

    NdefRecord nfcRecord = new NdefRecord(
        NdefRecord.TNF_MIME_MEDIA, "text/vcard".getBytes(), new byte[0], payload);

    return nfcRecord;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T21:24:18.040

来自[维基百科](http://en.wikipedia.org/wiki/VCard)：

哑剧媒体：`text/vcard`
格式：

```
BEGIN:VCARD
VERSION:4.0
N:Gump;Forrest;;;
FN: Forrest Gump
ORG:Bubba Gump Shrimp Co.
TITLE:Shrimp Man
PHOTO:http://www.example.com/dir_photos/my_photo.gif
TEL;TYPE=work,voice;VALUE=uri:tel:+1-111-555-1212
TEL;TYPE=home,voice;VALUE=uri:tel:+1-404-555-1212
ADR;TYPE=work;LABEL="42 Plantation St.\nBaytown, LA 30314\nUnited States of America"
 :;;42 Plantation St.;Baytown;LA;30314;United States of America
EMAIL:forrestgump@example.com
REV:20080424T195243Z
END:VCARD 
```

您可以使用[NFC Writer](https://play.google.com/store/apps/details?id=com.tagstand.writer)写入联系人和[NFC 标签信息](https://play.google.com/store/apps/details?id=at.mroland.android.apps.nfctaginfo)以查看其写入方式。
这两个应用程序在 Google Play 上都是免费的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-13T20:34:52.157

也许你现在可能已经有了答案。不过，我的答案将在字符串下方使用 BEGIN:VCARD VERSION:3.0 FN:you name going here ORG: work place EMAIL: sample@gmail.com ADR:;; 美国加利福尼亚州山景城 URL：www.google.com 电话：123456 END：VCARD

或者，您可以尝试使用[此应用程序](https://play.google.com/store/apps/details?id=com.manjul.utility.nfc.writer)编写。

# java - 将字符串解析为字符？

> ID：13315934
> 
> 赞同：1
> 
> 时间：2012-11-09T20:59:22.767
> 
> 标签：java, string, char

那么在 Java 中，如何将像 ("\u000A") 这样的字符串粘贴到 char 中呢？我从一个文件中得到了那个字符串，所以我不能这样说： char c = '\u000A';

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T21:04:44.953

检查[StringEscapeUtils](http://commons.apache.org/lang/api/org/apache/commons/lang3/StringEscapeUtils.html)

> > 为 Java、Java Script、HTML 和 XML 转义和取消转义字符串。

这应该适用于您想要的

```
char c = StringEscapeUtils.unescapeJava("\\u000A").charAt(0); 
```

双反斜杠是在 Java 中编码“\u000A”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T21:01:12.080

是的，你可以，这是完全有效的代码：

```
char c = '\uD840'; 
```

您的代码中的示例`'\u000A'`恰好是无效的 Unicode 字符（可能是阅读时的解码问题？）。但是所有有效的 Unicode 字符都可以在单引号之间传递。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T00:51:10.553

作为对 Oscar Lopez 的回答，它编译并执行得很好：

```
public class TestUnicode {
    static public void main(String[] argv) {
        System.out.println("This is one line"); \u000A System.out.println("This is another line");
    }
} 
```

要理解的重要一点是，在 Java 编译器中，`\uXXXX`字符*是在扫描程序时翻译的*，而不是在将字符插入字符串文字时（这是其他`\`转义的规范）。将`\u000A`上面的内容替换为`\n`，程序不会编译，而是编译器会报告“非法字符：\92”（92 是 的十进制值`\`）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T21:28:53.587

如果没有额外的库，您可以使用这只是 char 的十六进制值这一事实。这个表达式的值就是那个字符：

```
(char)Integer.parseInt(input.substring(2, 16)) 
```

该技术甚至适用于代理对，因为这样您就有两个单独的 \u 符号来表示该对。

# map - 深度图三.js

> ID：13315935
> 
> 赞同：2
> 
> 时间：2012-11-09T20:59:24.017
> 
> 标签：map, webgl, three.js, depth

有没有办法在three.js中获取深度图？

我有兴趣制作类似于 Kinect 为给定场景制作的东西。

我遇到了一种不使用颜色和雾来模仿这个的hacky方式，但这并不理想，因为它会使用两个不同的场景并且会改变照明。我相信另一种方法是访问深度缓冲区，但似乎无法通过 three.js 访问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T00:01:43.327

是的。尝试使用`MeshDepthMaterial`.

# java - 测试字段的良好代码结构是什么？

> ID：13315936
> 
> 赞同：4
> 
> 时间：2012-11-09T20:59:26.060
> 
> 标签：java, arrays, field

我有一个包含测试内容的字段的测试类。看起来像：

```
class Test {
  public static String s1 = " ... long string ... ";
  public static String s2 = " ... long string ... ";
  public static String s3 = " ... long string ... ";
} 
```

现在我想在循环中使用这些字段，所以我写了一个额外的数组

```
 public static String[] a = {s1, s2, s3}; 
```

这种结构工作正常，但有点难看，因为每次我添加或删除一个字段时，我也确实更改了数组。

在不手动操作数组的情况下重新构造我的代码的唯一解决方案是将其全部写入数组中：

```
class Test {
  public static String[] a = {" ... long string ... ", " ... long string ... ",
                              " ... long string ... "};
} 
```

如您所见，这使代码不可读，尤其是当我们必须处理超过 10 个长字符串时。

有什么更好的结构？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T21:06:00.503

如果你想循环使用它们，我会认为它们在某种程度上是同质的。此外，变量名称 ( `s1`, `s2`, `s3`) 就其本身而言毫无意义。所以去数组（或使用`Arrays.asList()`成语）。

如果每个字符串都有不同的含义并且单独使用，那么肯定有单独的变量。如果您想要两全其美（单独的变量和易于维护的列表，请考虑这一点）：

```
class Test {
    public static final String s1 = str(" ... long string ... ");
    public static final String s2 = str(" ... long string ... ");
    public static final String s3 = str(" ... long string ... ");

    public static final List<String> strings = new ArrayList<>();

    public static String str(String s) {
        strings.add(s);
        return s;
    }
} 
```

最后但同样重要的是，请记住`final`关键字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T21:27:01.930

另一种方法是使用`enum`例如

```
public enum Test
{
    S1("... long string 1..."), 

    S2("... long string 2...");

    private String value;

    Test(String value)
    {
        this.value = value;
    }

    public String getValue()
    {
        return value;
    }
} 
```

然后，您可以单独或作为列表访问实例，例如：-

```
public static void main(String[] args)
{
    /* Single instance */
    String value1 = Test.S1.getValue();

    /* All instances */
    for (Test test : Test.values())
    {
        System.out.println(test.getValue());
    }
} 
```

使用这种方法，您不必担心在添加或删除新值时修改数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T21:04:47.160

你考虑过清单吗？如果您不关心字符串的顺序，这是一个很好的解决方案。它很容易实现，您可以根据需要添加或删除任意数量的元素。 [维基百科 - 列表](http://en.wikipedia.org/wiki/List_%28abstract_data_type%29)

# c++ - 应用程序的 .exe 文件缺少 .NET TargetFramework，但仅限于干净的构建

> ID：13315940
> 
> 赞同：2
> 
> 时间：2012-11-09T20:59:41.490
> 
> 标签：c++, .net, visual-studio-2012

我有一个要从 VS2008 转换为 VS2012 的应用程序。该应用程序是混合模式，由多个项目组成。升级后，只要输入托管代码，应用程序就会在运行时崩溃，但出现以下异常：

> PresentationFramework.dll 中出现“System.TypeInitializationException”类型的未处理异常
> 
> 附加信息：“System.Windows.Application”的类型初始化程序引发了异常。

最深的内在例外是：

> “字符串长度不能为零。参数名称：frameworkName”

堆栈跟踪是：

> 在 System.Runtime.Versioning.BinaryCompatibility.ParseFrameworkName（字符串 frameworkName、String& 标识符、Int32& 版本、String& 配置文件）
> 
> 在 System.Runtime.Versioning.BinaryCompatibility.ParseTargetFrameworkMonikerIntoEnum（字符串 targetFrameworkMoniker，TargetFrameworkId& targetFramework，Int32& targetFrameworkVersion）
> 
> 在 System.Runtime.Versioning.BinaryCompatibility.ReadTargetFrameworkId()
> 
> 在 System.Runtime.Versioning.BinaryCompatibility.get_AppWasBuiltForFramework()
> 
> 在 System.Runtime.Versioning.BinaryCompatibility..cctor()

这只发生在干净的构建之后，并且每次运行时都会发生，直到我清理一个项目然后再次构建。然后每次我运行它时它都会起作用。

我用 JetBrains 查看了 .exe 文件，并比较了它们在应用程序运行时和崩溃时的样子。当应用程序崩溃时，此行在 .exe 中：

> [程序集：TargetFramework("", FrameworkDisplayName = ".NET Framework 4")]

显然框架字符串是空白的，这导致了异常。当应用程序工作时，该行不存在，所以也不例外。

为清晰而编辑：当 .exe 清单中完全没有上述行时，该应用程序可以工作。我已经确认在 VS2008 中，上述行不在 .exe 清单中。看起来它根本不应该在清单中，并且在 VS2012 中的干净构建中它被添加并导致问题。另外，我没有使用 app.config 文件。

有没有办法来解决这个问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-12T19:43:13.233

我已经为此工作了 3 天，我刚刚找到了答案。

显然 MSBuild 会自动创建一个名为

> .NETFramework,Version=v4.0.AssemblyAttributes.cpp

在你的

> C:\Users\YOURNAME\AppData\Local\Temp

目录。它在创建 .exe 文件时使用此文件。

在我的机器上，这个文件包含以下内容：

```
#using <mscorlib.dll>
[assembly: System::Runtime::Versioning::TargetFrameworkAttribute(L"", FrameworkDisplayName=L".NET Framework 4")]; 
```

空字符串导致了我的问题。我将文件更改为：

```
#using <mscorlib.dll>
[assembly: System::Runtime::Versioning::TargetFrameworkAttribute(L".NETFramework,Version=v4.0", FrameworkDisplayName=L".NET Framework 4")]; 
```

现在一切正常！我不知道文件是如何进入那种状态的，但我从来没有碰过它。我不认为它在VS2008中使用。我对在我的构建中使用这样的文件感到有些厌烦。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-23T07:45:05.837

通过删除 C:\Users\YOURNAME\AppData\Local\Temp 中的所有内容来解决我的问题 :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-02T10:52:08.683

经过几天的调查，我发现“损坏”的`.NETFramework,Version=v4.0.AssemblyAttributes.cpp`文件是由一个配置如下的 CPP 项目引起的：

```
<ConfigurationType>StaticLibrary</ConfigurationType>
<CLRSupport>true</CLRSupport> 
```

更改项目配置和删除`%TEMP%`目录已成为最终解决方案。

仅仅删除`%TEMP%`并不能保证文件不会再次生成损坏，因此不能视为最终解决方案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-13T12:25:01.767

我整天都在为此苦苦挣扎。我尝试了上面的解决方案，但没有任何乐趣。最后，我将 Target Framework 形式的 .Net 4.5 更改为 .Net 4，然后重新编译。然后我将 Target Framework 改回 .Net 4.5。这样就整理好了。

缺口

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-12-26T19:14:12.570

1.  此信息从文件**%TEMP%\.NETFramework,Version=%.NET_VERSION%.AssemblyAttributes.cpp 注入**
2.  仅当临时目录中不存在该文件时才会生成该文件
3.  编译“混合”库时，它将生成带有空 .NET 版本的损坏文件，并且在此之后编译的所有混合 DLL 都将损坏！
4.  要解决它，您需要删除 %temp%，并将此行添加到所有混合 lib 项目（或通过全局属性表）

    ```
    <!-- Must be located after <ConfigurationType>StaticLibrary</ConfigurationType> -->
    <GenerateTargetFrameworkAttribute Condition="'$(ConfigurationType)'=='StaticLibrary'">false</GenerateTargetFrameworkAttribute> 
    ```

5.  它将在混合库编译期间关闭损坏的文件生成
6.  这是 msbuild 脚本中的一个错误，存在于所有最新的 Visual Studio（包括 VS2013 Update 5 和 VS2015 Update 3）中

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2015-08-20T07:41:40.117

支持 CLR 的 C++ 应用程序。

> 未处理的异常：System.TypeInitializationException

'' 的类型初始化程序引发了异常。

修复`C:\Users\YOURNAME\AppData\Local\Temp\.NETFramework,Version=v4.0.AssemblyAttributes.cpp`文件工作。

# facebook - 获取 Facebook 聊天记录到移动 xmpp 客户端

> ID：13315946
> 
> 赞同：5
> 
> 时间：2012-11-09T21:00:12.610
> 
> 标签：facebook, xmpp, chat, history

是否有可能（FB 允许）获取存储在 FB 中的聊天消息历史记录？我们正在开发 iOS 和 Android xmpp 聊天客户端，但找不到我们的聊天客户端如何显示用户之间的对话的方法，这些对话由 FB 存储。具体来说：第一个用户“A”（使用我们的客户端）与第二个用户“B”（使用“原始”FB 聊天）进行了交谈，我们需要显示这些用户的通信历史记录（如果可能，所有历史记录，无论如果它发生在我们的客户身上，或者 A 和 B 直接在 FB 上交谈）。任何帮助将不胜感激！！！;-)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T21:21:52.310

您需要检查这些链接（特别是对于 read_mailbox 功能）

[https://developers.facebook.com/docs/reference/api/message/](https://developers.facebook.com/docs/reference/api/message/)

和/或

[https://developers.facebook.com/docs/reference/fql/message/](https://developers.facebook.com/docs/reference/fql/message/)

# mysql - 选择有 3 条或更多评论的文章

> ID：13315950
> 
> 赞同：0
> 
> 时间：2012-11-09T21:00:28.983
> 
> 标签：mysql, join

我想选择有 3 条或更多评论的文章。我使用 MySQL，并且我有以下表格及其各自的字段：

文章：art_id（主键）、art_title、art_body、art_date、art_author、art_lang

COMMENT：com_id（主键）、com_body、com_date、com_author、com_article（外键）

MySQL 引擎：INNO_DB

关系：com_article - art_id

如何执行此查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T21:05:38.843

一种简单的方法是使用[HAVING 关键字](http://www.mysqltutorial.org/mysql-having.aspx)，例如：

```
SELECT article.*, COUNT(comment.com_id) as comment_count
FROM comments
LEFT OUTER JOIN article ON article.art_id = comments.com_article
GROUP BY article.art_id
HAVING comment_count > 3 
```

简而言之，此查询将遍历所有评论，按文章的 id 对它们进行分组，计算每篇文章有多少评论，他们将只选择那些计数超过 3 的“束”。我们还加入了文章表，因为我们最终需要文章并且只选择文章的字段。希望这很清楚。

这可能不是最佳解决方案，但应该适用于相对较小的表。

# java - Android Java - DataInputStream 从套接字到字符串

> ID：13315953
> 
> 赞同：2
> 
> 时间：2012-11-09T21:00:35.200
> 
> 标签：java, android, string, qt, datainputstream

我在编写一个可以与我的服务器通信以发送和接收数据的 android 应用程序时遇到了一些麻烦。所以它的要点是我的服务器是用 Qt C++ 编写的，当然，我的应用程序是用 java 为 android 编写的。让套接字数据采用适当的格式以供双方充分理解，这引起了很多复杂性。

那么我遇到的问题是我的客户端（java android）可以连接到服务器，发送少量数据，并从服务器接收响应。服务器发送一个相当大的数据消息，转换为 UTF-8 字节。

```
QByteArray sendblock;
QDataStream out(&sendblock, QIODevice::WriteOnly);
out << (quint16)0;
char * data = msg.toUtf8().data();
out.writeRawData(data, msg.toUtf8().length());
out.device()->seek(0);
out << (quint16)(sendblock.size() - sizeof(quint16));
socket.write(sendblock);
socket.waitForBytesWritten(); 
```

msg 是传递给函数的 QString。

在客户端，收到消息后，我有：

```
Log.d("connection", "Waiting for response");
short inSize;
inSize = in.readShort();
Log.d("connection", Integer.toString(inSize)); // the first 2 bytes are the size of the message
byte[] inData = new byte[inSize];//allocate space for the entire message
in.read(inData, 0, inSize); //read the entire message
String resp = new String(inData, 0, inSize, "UTF-8");//cast into a String
Log.d("connection", resp); 
```

所以问题是在我的程序的不同实例上，转换为 String 的字节的结果不同。

Log.d 打印响应的结果大约是正确格式化为字符串的字符串的 1445 个字母（2890 字节），然后字符串的其余部分以“??”结尾 人物。

我很少按预期收到完整的消息，没有“？” 人物。有时我会得到更长的消息正确地转换为字符串。大多数情况下，我只得到正确投射的 1445 个字母，其余的都是“？？” 人物。

我有另一个 Windows 计算机客户端（也是用 Qt C++ 编写的），它总是让消息完整​​并且没有这个问题，所以我很好奇 android 字符串和编码是否存在可能导致这个问题的东西。起初我认为这可能与字符串的内存分配有关，但我很确定我已经通过设置大小正确处理了这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T21:56:07.010

据我所知，字节数的 UTF-8 编码和字节序看起来是正确的。我认为您唯一缺少的是您需要在 while 循环中进行读取，因为不能保证读取会填充数组。尝试这样的事情。检查 read 的返回值以确定实际读取了多少字节并继续读取，直到您有 'inSize' 字节。

```
Log.d("connection", Integer.toString(inSize)); // the first 2 bytes are the size of the message
byte[] inData = new byte[inSize];//allocate space for the entire message

int count = 0;
while (count < inSize)
{
   int len = in.read(inData, count, inSize - count);
   count += len;
}
String resp = new String(inData, 0, inSize, "UTF-8");//cast into a String
Log.d("connection", resp); 
```

您需要扩展此代码并处理 len 为 -1 表示流已关闭的情况。

# objective-c - 如果在公式中实现这些？（对象-C）

> ID：13315958
> 
> 赞同：0
> 
> 时间：2012-11-09T21:01:02.913
> 
> 标签：objective-c, if-statement, design-patterns, formula

我真的很讨厌在我的应用程序中使用 if's，我认为这是一个非常简单的模式，所以有没有办法将下面的代码变成 1 行公式，只是为了在我的应用程序中提高可读性？

这是代码：

```
int duration = 0;
    if (score < 100) {
        duration = 2;
    } else if (score >= 100 && score < 200) {
        duration = 3;
    } else if (score >= 200 && score < 300) {
        duration = 4;
    } else if (score >= 300 && score < 400) {
        duration = 5;
    } else if (score >= 400 && score < 500) {
        duration = 6;
    } else if (score >= 500) {
        duration = 7;
    } 
```

我自己并不擅长数学，也不擅长为此提出公式，所以任何人都可以帮助我获得一个公式来实现上面代码的功能吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T21:15:22.017

看起来我们可以重写如下：

```
int duration = MIN(2 + (score / 100), 7); 
```

我错过了什么吗？：-/

**编辑**如果分数可能是负数，我们必须再增加一个上限：

```
int duration = MAX(MIN(2 + (score / 100), 7), 2); 
```

**编辑 2**对称处理底片，您可以使用以下内容：

```
int duration = MIN(2 + (abs(score) / 100), 7); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T21:15:07.390

这很接近（也就是未经测试）：

```
-(int) duration:(int) score {
    score = (score > 500) ? 500 : score; // over 600 == 600
    return (score+100)/100 + 1
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T21:15:59.503

```
duration= 2+ (int)(score-100)/100 + score<100? 1:0 ; 
```

# spring-webflow-2 - 无法启动 Spring Web 流 2.3.1 (Spring 3.2.0 + JSF 2.0)

> ID：13315960
> 
> 赞同：1
> 
> 时间：2012-11-09T21:01:08.663
> 
> 标签：spring-webflow-2

我无法使用 Spring web flow 2.3.1 + Spring 3.2.0 + JSF 2.0 启动流。Spring 正在初始化，但是当我尝试加载流程时，没有任何反应。

我附加了一个 FlowExecutionListener，它被创建了。但是没有控制权返回给它。与我尝试获取 RequestContextHolder.getRequestContext() 的方式相同，它返回 null。

我不确定配置有什么问题。我尝试了配置中提到的所有步骤。

我正在使用以下课程，

导航处理程序 - org.springframework.web.jsf.DelegatingNavigationHandlerProxy 变量解析器 - org.springframework.faces.webflow.SpringBeanWebFlowVariableResolver

我有自定义的 ContextLoadListener，它会被调用。我将 webflow 配置 xml 作为 contextConfigLocation 参数传递给加载。该文件也正在加载，因为我已将 FlowExecutionListener 注册到其中。

# c# - 字符串的 WPF 本地化 - 在不同项目之间共享？

> ID：13315961
> 
> 赞同：3
> 
> 时间：2012-11-09T21:01:09.753
> 
> 标签：c#, wpf, localization

我正在 VS2012 下开发一个 WPF C# 应用程序，在该应用程序中，我在解决方案的不同项目中拥有来自不同来源的用户控件。如果可以的话，我想将整个解决方案中的所有 UI 字符串本地化到一个地方。

似乎 locbaml 并没有真正为这种事情设置，因为它出现在每个类库中，我需要为每个类库 DLL 创建一个单独的资源 DLL？

谁能给我一些关于最佳实践方法的指导？我不知道如何将各种本地化技术应用于具有多个项目的解决方案。

感谢您的任何建议。科里。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-10T02:27:56.347

修改我的帖子以更具包容性：

[MSDN 上详细介绍了总体最佳实践。](http://msdn.microsoft.com/en-us/library/ms788718.aspx)

真的，你有三个选择。

1.  自己本地化 - 手动滚动您自己的 XML/文本文件/数据库解决方案。
2.  使用 locbaml 进行本地化。这不允许在应用程序内进行动态语言切换。
3.  使用 resx 文件进行本地化。这确实允许在应用程序内进行动态语言切换，具体取决于所选的实现。

有很多 locbaml 最佳的场景，在最佳实践页面上进行了概述，但是 resx 文件具有合理的可移植性（格式很简单），并且可以满足动态语言交换的要求。

如果您决定使用（1），那么您就靠自己了。神速！:)

如果您选择使用 locbaml (2)，最好先将字符串抽象到 ResourceDictionary 中来解决问题，这样您就可以将所有字符串放入一个文件中进行本地化。请参阅此处：[如何：使用 ResourceDictionary 管理可本地化的字符串资源](http://msdn.microsoft.com/en-us/library/bb613547.aspx "如何：使用 ResourceDictionary 管理可本地化的字符串资源")

链接的文章详细说明仍然使用 locbaml，但您应该只需要使用它来本地化单个 ResourceDictionary。以这种方式保持资源整齐隔离应该会让你的生活更轻松。请注意，如果需要，可以分类拆分 ResourceDictionaries - 只是一个单一文件或多个较小文件是否更适合您的项目。

如果您选择使用 resx 文件 (3) 并希望支持无痛的运行时语言切换，[那么这个简短的教程\示例代码提供了一个很好的起点。](http://www.grumpydev.com/2009/09/08/localising-wpf-applications-using-resx-files-and-standard-data-binding-without-a-markupextension/) 它是在考虑 Prism 的情况下编写的，但可以在 Prism 之外毫无困难地使用。还有其他更简单的方法也使用 resx 文件，但是如果您想要*最好*的方法，恕我直言，您正在研究它。一个（也许？）主要警告是这种方法不适用于 Silverlight。这是一个 WPF 问题，但我意识到这可能是某些人关心的问题。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-17T08:03:08.337

WPF 使用两种资源格式：XAML 和 RESX。不幸的是，几乎所有最佳实践以及此处的所有答案都建议将 XAML 中的简单字符串替换为对 RESX 字符串的复杂且难以维护的引用。

例如，如果你有

```
<TextBlock Text="Hello World"/> 
```

然后“最佳实践”建议去掉 XAML 字符串，将其添加到 RESX，最后用引用替换 XAML

```
<TextBlock Text="{Binding Path=Resource1.HelloText, Source={StaticResource LocalizedString }}"/>

+

<data name="LocalizedString" xml:space="preserve">
  <value>Hello World</value>
</data> 
```

不要那样做。仅将 RESX 放在代码中使用的那些字符串。将 XAML 的所有字符串保持原样。本地化了 RESX 和 XAML 文件。最后编译包含本地化 RESX 和 XAML 的附属程序集文件。

Visual Studio 或 locbaml 只能本地化 RESX。您可以使用文本编辑器手动本地化 XAML，但我不建议这样做。本地化的 XAML 必须与原始 XAML 相同。这意味着结构必须相同。它必须包含作为原始 XAML 的所有组件、属性和事件。本地化 XAML 的唯一可行方法是使用一些本地化工具。

选择本地化工具时必须小心。它必须执行以下两件事。

1.  本地化 XAML 和 RESX
2.  将本地化的 XAML 和 RESX 编译为附属程序集文件。

一旦您使用了这样的本地化工具，您的本地化不仅会变得更加容易，而且您还可以将用户控件放置在自己的程序集中或将其链接到使用它的所有项目。

# c++ - 调试断言失败

> ID：13315969
> 
> 赞同：2
> 
> 时间：2012-11-09T21:01:37.693
> 
> 标签：c++, pointers, data-structures, assertions, integer-hashing

我正在尝试为学校作业创建自己的哈希类，但是在完成部分任务后，我遇到了一个我无法调试的错误。

当我运行我的项目时，我得到一个“调试断言失败！...表达式：无效的空指针。”

该程序在我的驱动程序文件 (test.cpp) 的第 16 行给出了这个错误。在我看来，指向我的班级的指针不是`NULL`.

任何有关导致此错误的原因以及如何解决此错误的帮助将不胜感激。

```
//Hash.h

#include <string>
struct Student
{
    std::string name;
    std::string id;
};

class MyHash{
public:
    MyHash();
    int hashCode(int, int);
    void insertItemCollision(std::string, std::string);
    Student retrieveItem(std::string);
    Student students[100];
};

//Hash.cpp
#include <iostream>
#include "Hash.h"

MyHash::MyHash()
{
    for(int i = 0; i < 100; i++)
    {
        students[i].id.assign(NULL);    
        students[i].name.assign(NULL);
    }
}

int MyHash::hashCode(int id, int max)
{

  return (id % max);
}

void MyHash::insertItemCollision(std::string id, std::string name)
{
    int idInt = atoi(id.c_str());
    int location;

  location = hashCode(idInt, 100);
  while (students[location].id != "")
    location = (location + 1) % 100;
  students[location].id = id;
  students[location].name = name;
}

Student MyHash::retrieveItem(std::string id)
{
  int location;
  int startLoc;
  int idInt = atoi(id.c_str());
  bool moreToSearch = true;
  bool found;
  Student item;

  startLoc = hashCode(idInt, 100);
  location = startLoc;
  do
  {
      if (students[location].id == id || students[location].id == "")
      moreToSearch = false;
    else
      location = (location + 1) % 100;
  } while (location != startLoc && moreToSearch);
  found = (students[location].id == id);
  if (found)
    item = students[location];
  return item;
}

//test.cpp
#include <iostream>
#include<string>
#include<fstream>
#include "Hash.h"
using namespace std;

int read(string[]);
void splitString(string, Student&);
void init(string[], Student[], int);

int main()
{
    int size;
    string input[100];
    MyHash* h = new MyHash();
    size = read(input); 
    init(input, h->students, size);

    system("pause");
    return 0;
}

int read(string st[])
{
    int size = 0;
    ifstream infilestream;
    infilestream.open("test.txt");

    for(int i = 0; infilestream.good(); i++)
    {
        getline(infilestream, st[i]);
        cout<<st[i] <<endl;
        size++;
    }
    infilestream.close();
    return size;
}

void splitString(string record, Student& s)
{
    s.id = record.substr(0, 4);
    s.name = record.substr(5, record.length());
}

void init(string inputs[], Student stus[], int size)
{
    for(int i = 0;i < size; i++)
    {
        splitString(inputs[i],stus[i]);
        cout << stus[i].name << " " << stus[i].id << endl;
    }
}

//test.txt
9892 Zack Lewis
4592 Ken Rodriguez
9819 Anderson Clark
1519 Ben Robinson
4597 Abigail Martinez
8542 Madison Garcia
6113 Mia Thompson
8591 Chloe Martin
9491 Daniel Harris
1698 Aiden White
5984 Alexander Walker
6541 Ethan Jackson
9549 Michael Thomas
5949 Emily Anderson
9861 Ava Taylor
5412 Noah Moore
6262 Olivia Wilson
1954 Jayden Miller
4954 William Davis
9567 Emma Brown
5195 Mason Jones
9195 Isabella Williams
5199 Sophia Johnson
1294 Jacob Smith 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T21:03:40.620

这个

```
MyHash::MyHash()
{
    for(int i = 0; i < 100; i++)
    {
        students[i].id.assign(NULL);    
        students[i].name.assign(NULL);
    }
} 
```

是不正确的。这是对的

```
MyHash::MyHash()
{
} 
```

您不必将 NULL 分配给`std::string`. 默认构造函数`std::string` *自动*创建一个空字符串。事实上，将 NULL 分配给 std::string 是一个错误，因为此方法总是需要一个指向 C 字符串的指针。

事实上，您根本不需要`MyHash`构造函数，因为默认构造函数会执行您在编写的版本中尝试执行的所有操作。您会发现 C++ 比您想象的要容易。

# ruby-on-rails - Rails 3.2 - 资产预编译，但在 Apache 的生产模式下不显示

> ID：13315971
> 
> 赞同：6
> 
> 时间：2012-11-09T21:01:47.227
> 
> 标签：ruby-on-rails, apache2, ruby-on-rails-3.2, asset-pipeline

***编辑：*** 原来我最初的问题不再准确 - 这个问题与 dataTables gem 没有直接关系，我相信这与我的 Apache2 配置有关。

* * *

我似乎对 jquery-datatables-rails gem 与 rails 资产管道的配合有问题。

问题起初看起来与[这个](https://stackoverflow.com/questions/11408062/datatables-not-showing-in-production-mode-after-running-rake-assetsprecompile)类似，但从那里遵循明显的解决方案路径并没有愉快地解决问题。

gem 位于我的 Gemfile 中，根据[railscast 第 340 集](http://railscasts.com/episodes/340-datatables)的说明为我的一个 html 表安装和实现。在开发模式下运行应用程序运行`bundle exec rails s`良好，所有 dataTables 功能都毫无问题地出现在网站上。

当我尝试在生产环境中运行该站点时（使用 capistrano 或仅`bundle exec rails s -e production`在预编译资产之后），虽然它们都编译为公共/资产，但不会使用已编译的文件。

`config.assets.compile = true`代替预编译时，它似乎也没有显示 dataTables 功能。（我相信两者是对立的，但我可能误解了）

当我进入页面并查看js错误控制台时没有错误，它只是呈现了一个计划html表。

我无法弄清楚是什么导致网页**无法**呈现数据表，而且我尝试过的每次搜索都以上面链接的问题以及一遍又一遍的其他五个页面而告终。这些解决方案似乎都不是我的铁轨野兽所渴望的。

你们中的任何人都对问题可能是什么有任何见解吗？

* * *

部分相关文件：

应用程序/资产/javascripts/charts.js.coffee：

```
jQuery ->
    $('#charts').dataTable({
      "oSearch": {"bSmart": "true", "sSearch": "vdo"}
      "iDisplayLength": 50
     }) 
```

应用程序/资产/javascripts/application.js

```
//= require jquery
//= require jquery_ujs
//= require dataTables/jquery.dataTables
//= require_self
//= require_tree . 
```

应用程序/资产/样式表/application.css

```
*= require_self      
*= require dataTables/jquery.dataTables
*= require_tree . 
```

config/environments/production.rb:
PerfGrapher::Application.configure do # 此处指定的设置将优先于 config/environment.rb 中的设置

```
# Compress JavaScript and CSS
config.assets.compress = true

# make sure to compile js and css assets
config.assets.precompile += %w(*.js *.css)

# Generate digests for assets URLs
config.assets.digest = true

# disable static asset server
config.serve_static_assets = false

config.compile = false 
```

结尾

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T17:30:37.637

我的 application.css.scss 文件有以下行

```
*= require dataTables/src/demo_table_jui 
```

代替

```
*= require dataTables/jquery.dataTables 
```

这可能只是因为我也在使用 JQuery UI（bJQueryUI: true 被传递给咖啡脚本文件中的 dataTable() ）

它使用 Rails 3.2.6 在生产中运行良好，使用资产管道。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T03:01:04.900

我是一个可怜的 ruby​​ist 并且没有 railsman （虽然我做 groovy grails，是的）。无论如何，既然你说甚至没有调用警报（嗯，这让我很恼火，它只是在 prod 模式下）我只是想问一下它是否有助于查看它是否与 rails 编译 html 文件的方式有关 --- 因此我很想看看 html 文件，看看是否所有脚本都添加到标题中......

我只是认为这可能是由于执行 chart.js.js 时已经加载了 dom。

要查看它是否与此有关，请尝试替换

```
jQuery ->
    $('#charts').dataTable({
      "oSearch": {"bSmart": "true", "sSearch": "vdo"}
      "iDisplayLength": 50
     }) 
```

有类似的东西

```
imReadyToStart = () ->
    $('#charts').dataTable({
      "oSearch": {"bSmart": "true", "sSearch": "vdo"}
      "iDisplayLength": 50
     })
setTimeOut imReadyToStart, 1000 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T19:35:23.537

尝试不要在 production.rb 中定义 config.assets.prefix 并让它采用默认值。没关系，但不知何故，您在目录路径中获得了额外的“公共”

# jquery - 删除值大于 0 的选项选择

> ID：13315978
> 
> 赞同：7
> 
> 时间：2012-11-09T21:02:18.917
> 
> 标签：jquery

我会从 id="myid" 的选择中删除所有选项（但值 = 0 的第一个选项）。

我不会使用 empty() 然后 append()。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-09T21:05:36.800

如果是第一个元素，使用 gt 并删除

```
$("#myid option:gt(0)").remove(); 
```

使用属性选择器

```
$('#myid option[value!="0"]').remove(); 
```

使用过滤器

```
$('#myid option').filter(
    function () {
        return parseInt(this.value,10) !== 0; 
    }
); 
```

# javascript - JavaScript 图像隐藏

> ID：13315982
> 
> 赞同：0
> 
> 时间：2012-11-09T21:02:33.620
> 
> 标签：javascript, image, hide

我正在用 javascript 制作游戏，我需要以下帮助：

我想制作一个图像 = 一个变量然后我只想在我想要的时候显示图像。

所以我希望图像默认隐藏，但它总是显示我所做的任何事情。我只是一个初学者，我看过这个页面和互联网上的其他人来帮助我：[http ://www.roseindia.net/javascript/javascriptexamples/javascript-hide-image.shtml](http://www.roseindia.net/javascript/javascriptexamples/javascript-hide-image.shtml)

这是到目前为止的代码：

```
<html> <head></head>
<body>
     <img src="http://wwcdn.weddingwire.com/static/vendor/55001_60000/56375/thumbnails/64x‌​64_SQ_1342622451725-Matangiaerial.jpg"
          id="islandimg">
     <script type="text/javascript">
     var playermoney = 10000;
     var islandarray = new array;
     var car = 500; var watch = 100;
     var diamond = 2000;
     function hideImage() { 
          if (document.getElementById) {
               document.getElementById('islandimg').style.visibility = 'hidden';
          }
     </script>
</body></html> 
```

代码中包含游戏的其他内容，但请忽略它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T21:14:31.180

有几个原因这不起作用

1.  图像返回 404
2.  如其他所述，`array`未定义
3.  `}`if 语句后缺少结尾

这是[JSFiddle中的工作版本](http://jsfiddle.net/k6dgN/)

这是带有注释的 JS 部分

```
 var playermoney = 10000;
 var islandarray = new Array(); //array was undefined. 
 // a more concise way to write this by the way is: var islandarray = [];
 var car = 500; var watch = 100;
 var diamond = 2000;
 function hideImage() { 
      if (document.getElementById) {
           document.getElementById('islandimg').style.visibility = 'hidden';
      }
 }//Missing end braces 

 hideImage(); //missing call to the function 
```

顺便说一句，找出这些问题的最简单方法是查看 Chrome / Firefox 控制台，它会抱怨诸如`array`变量问题之类的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T21:11:11.880

看起来像您页面上的语法错误..

```
var islandarray = new array; 
```

应该是

`var islandarray = new Array();` **或者** `var islandarray = [] ;`

此外，您似乎从未**调用过该函数**。你只是在**声明它**..

```
hideImage(); // Call this function in your script 
             //  after taking care of the errors.. 

function hideImage() { 
          if (document.getElementById) {
               document.getElementById('islandimg').style.visibility = 'hidden';
          }
};  -- > Missing this as well

hideImage();  // Then call your function 
```

**[检查小提琴](http://jsfiddle.net/snDme/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T21:08:28.083

您可以使用[jQuery](http://jquery.com/)并执行以下操作：

```
function hideImage() {
  $('#islandimg').hide();
} 
```

**更新：**

另一种选择是：

```
function hideImage() { 
    document.getElementById('islandimg').style.visibility = 'hidden';
} 
```

或这个：

```
function hideImage() { 
    document.getElementById('islandimg').style.display = 'none';
} 
```

最后两个有什么区别=> [http://webdesign.about.com/od/css/f/blfaqhidden.htm](http://webdesign.about.com/od/css/f/blfaqhidden.htm)

它接缝您想要切换图像的可见状态，因此您也应该创建一个`show`函数。（通过使用 jQuery，您可以使用该`toggle()`函数。）

如果您不想显示图像，您也可以`CSS`默认隐藏它，然后`JavaScript`使用您的`showImage()`功能切换显示状态。

```
#islandimg {
    visibility: hidden;
} 
```

或者

```
#islandimg {
    display: none;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-09T21:11:46.223

正如一些评论（包括我的评论）所暗示的那样，您实际上从未调用过该函数。这是我对您的脚本的编辑

```
<html> <head></head>
<body>
     <img src="http://wwcdn.weddingwire.com/static/vendor/55001_60000/56375/thumbnails/64x‌64_SQ_1342622451725-Matangiaerial.jpg"
          id="islandimg">
     <script type="text/javascript">
     var playermoney = 10000;
     var islandarray = new Array();
     var car = 500; var watch = 100;
     var diamond = 2000;
     function hideImage() {
          if (document.getElementById) {
               document.getElementById('islandimg').style.visibility = 'hidden';
          }
         }
// NOW CALL hideImage() TO MAKE IT DO SOMETHING
hideImage();
     </script>
</body></html> 
```

[http://jsfiddle.net/rVnfF/](http://jsfiddle.net/rVnfF/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-09T21:20:59.923

provious 帖子已经回答了你的问题。如果要调用页面加载的函数，则需要插入以下代码：

```
<body onload="hideImage();"> 
```

但更正其他错误：

```
var islandarray = new Array(); 
```

最后的 }

否则 jscript 将不会加载。您应该使用 Firefox 和 Firebug（或其他工具）来检查错误！

# c# - C# Reading a byte[] and removing rubbish data

> ID：13315991
> 
> 赞同：3
> 
> 时间：2012-11-09T21:03:07.610
> 
> 标签：c#, sockets

Couldn't find this on stackoverflow and I did have an example of it which I'd written several months ago, but can't find that either now.

Basically I'm sending byte[] from client to server, displaying it in server window, then planning to act on the data within. The data which I'm receiving, however, is not being cleaned each time, example:

I send "ABCDEF" Server displays "ABCDEF" I send "GHI" Server displays "GHIDEF"

I think you can see where I'm coming from, I just need a method of cleaning the byte[] array, for this side of things.

The next step then would be to only read the bytes which I intend to use, so at the minute although I'm only using X amount of the data, I am actually receiving a LOT more data than I need to, and I need to now dispose of the extra data at the end.

Can anyone advise of how I can go about this?

My codes are below.

Client:

```
 static void Main(string[] args)
    {

        try
        {
            ASCIIEncoding encoding = new ASCIIEncoding();
            Console.WriteLine("Welcome to Josh's humble server.");
            IPEndPoint ipEnd = new IPEndPoint(IPAddress.Any, 2000);
            Socket sock = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.IP);
            sock.Bind(ipEnd);
            sock.Listen(100);
            Socket clientSock = sock.Accept();
            byte[] mabytes = encoding.GetBytes("Test");
            clientSock.Send(mabytes);
            Console.WriteLine("Hmmm, data sent!");
            Console.ReadLine();
            Console.WriteLine(encoding.GetString(mabytes));
            Console.ReadLine();
            byte[] buffer = encoding.GetBytes("server message");
            while (true)
            {
                clientSock.Receive(buffer);
                Console.WriteLine(encoding.GetString(buffer));
            }

        }
        catch (Exception ex)
        {
            Console.WriteLine(Convert.ToString(ex));
            Console.ReadLine();
        }

    } 
```

Server:

```
 static void Main(string[] args)
    {
        ASCIIEncoding encoding = new ASCIIEncoding();
        IPAddress ip = IPAddress.Parse("127.0.0.1");
        Console.WriteLine("Welcome to Josh's humble client.");
        Console.ReadLine();
        IPEndPoint ipEnd = new IPEndPoint(ip, 2000);
        Socket sock = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.IP);
        sock.Connect(ipEnd);
        while (true)
        {
            Console.WriteLine("Please enter a message:\n");
            byte[] mabyte = encoding.GetBytes(Console.ReadLine());
            sock.Send(mabyte);
            Console.WriteLine("Sent Data");
        }
    } 
```

Thanks in advance

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-09T21:06:12.750

You use `clientSock.Receive(buffer);` to get data but never check the return value. It may read smaller then the length of buffer. A more correct way can be:

```
int len = clientSock.Receive(buffer);
Console.WriteLine(encoding.GetString(buffer,0,len)); 
```

Also using `byte[] buffer = encoding.GetBytes("server message");` to allocate bytes is not a good way. Use something like `byte[] buffer = new byte[1024*N];`

**--EDIT--**

Even this approach can be problematic when a multi-byte char is splitted between consecutive reads. A better way can be using a TcpClient, wrapping its stream by `new StreamReader(tcpClient.GetStream())` and read line by line

# windows - 在 Windows XP 上的 Chrome 中打印的 Web 字体缺少字符

> ID：13315992
> 
> 赞同：2
> 
> 时间：2012-11-09T21:03:10.883
> 
> 标签：windows, google-chrome, webfonts

在 Windows XP 上的 Google Chrome 中打印网络字体时，缺少字符，并且网络字体似乎呈现为某种系统字体，请参见屏幕截图：

![Windows XP 上 Google Chrome 中的网络字体](../Images/63f6c19edfdd2d27066e784705536c02.png)

字体是 Petersburg，这是用于渲染它的代码：

```
@font-face {
    font-family: 'Petersburg'; 
    src: url('fonts/1DB4EA_0_0.eot');
    src: url('fonts/1DB4EA_0_0.eot?#iefix') format('embedded-opentype'),
    url('fonts/1DB4EA_0_0.woff') format('woff'),
    url('fonts/1DB4EA_0_0.ttf') format('truetype');} 
```

值得注意的是，直到几天前我在我的虚拟机（我是 Mac 用户）上才看到这个问题，但这个问题最终神秘地消失了。不幸的是，我的客户仍然在她的 Windows 机器上看到这个问题。任何想法将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T22:03:59.400

在您的打印机设置中，将 True Type 字体打印从“使用设备字体替换”或“作为软字体发送”更改为“作为图像打印”

# installation - 使用 Inno Setup 安装正确版本的 Firebird（32 位或 64 位）

> ID：13315996
> 
> 赞同：4
> 
> 时间：2012-11-09T21:03:22.907
> 
> 标签：installation, inno-setup

我有一个 Inno Script 安装程序，它为用户提供了仅安装 32 位版本的 Firebird 的选项。现在我有一台 64 位机器并使用 6 位 Firebird 来确认我的应用程序可以使用它，我希望我的安装程序在 32 位平台上显示 32 位 Firebird 安装程序，在 64 位平台上显示 64 位安装程序。

在“安装操作”部分，我显示了 Firebird 安装程序的复选框，因此用户可以选择在未安装时安装它，或者如果他们已经安装了 Firebird，则不运行它。

这是来自我的脚本：

```
[Run]

Filename: {app}\Firebird-2.5.1.26351_1_x64.exe; Parameters: "/SILENT /NOCPL"; WorkingDir: {app}; Flags: postinstall skipifsilent 64bit; Check: Is64BitInstallMode; 

Filename: {app}\Firebird-2.5.1.26351_1_Win32.exe; Parameters: "/SILENT /NOCPL"; WorkingDir: {app}; Flags: postinstall skipifsilent 32bit; Check: "not Is64BitInstallMode"; 
```

问题是，对话框中只显示 32 位安装程序。

这两个文件都包含在内，以便在我的应用安装期间都可以使用：

```
[Files]

Source: ..\Firebird-2.5.1.26351_1_x64.exe; DestDir: {app}

Source: ..\Firebird-2.5.1.26351_1_Win32.exe; DestDir: {app} 
```

如何让我的安装程序在 64 位平台上显示 64 位 Firebird 安装程序？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T21:13:00.887

`Examples\64BitTwoArch.iss`在使用 InnoSetup 安装的文件中有一个这样做的示例（在 Win32 上安装 32 位版本或在 Win64 上安装 64 位版本） 。

```
; -- 64BitTwoArch.iss --
; Demonstrates how to install a program built for two different
; architectures (x86 and x64) using a single installer.

; SEE THE DOCUMENTATION FOR DETAILS ON CREATING .ISS SCRIPT FILES!

[Setup]
AppName=My Program
AppVersion=1.5
DefaultDirName={pf}\My Program
DefaultGroupName=My Program
UninstallDisplayIcon={app}\MyProg.exe
Compression=lzma2
SolidCompression=yes
OutputDir=userdocs:Inno Setup Examples Output
; "ArchitecturesInstallIn64BitMode=x64" requests that the install be
; done in "64-bit mode" on x64, meaning it should use the native
; 64-bit Program Files directory and the 64-bit view of the registry.
; On all other architectures it will install in "32-bit mode".
ArchitecturesInstallIn64BitMode=x64
; Note: We don't set ProcessorsAllowed because we want this
; installation to run on all architectures (including Itanium,
; since it's capable of running 32-bit code too).

[Files]
; Install MyProg-x64.exe if running in 64-bit mode (x64; see above),
; MyProg.exe otherwise.
Source: "MyProg-x64.exe"; DestDir: "{app}"; DestName: "MyProg.exe"; Check: Is64BitInstallMode
Source: "MyProg.exe"; DestDir: "{app}"; Check: not Is64BitInstallMode
Source: "MyProg.chm"; DestDir: "{app}"
Source: "Readme.txt"; DestDir: "{app}"; Flags: isreadme

[Icons]
Name: "{group}\My Program"; Filename: "{app}\MyProg.exe" 
```

# php - 仅在视频类别页面上显示摘录？

> ID：13315999
> 
> 赞同：0
> 
> 时间：2012-11-09T21:03:40.053
> 
> 标签：php, wordpress

现在，我让我的整个 wordpress 博客显示 the_excerpt 而不是 the_content。但是，我希望它只在视频类别页面上显示 the_content。现在在 content.php 文件中，它从我的内容扩展 php 文件中获取扩展“muimedia_post_entry_summary”。在我的内容扩展 php 文件中，这里是获取摘录（post_entry_summary）的代码...

```
/* muimedia_post_entry_summary */
if ( !function_exists( 'muimedia_post_entry_summary' ) ) {
function muimedia_post_entry_summary() {
?>
<div class="entry-summary">
<?php if (has_post_thumbnail()){ ?>
<a href="<?php the_permalink() ?>" title="<?php the_title_attribute
( array('before' =>          esc_attr__( 'Permalink: ', 'muimedia' ), 
'after' => ''));  ?>" rel="bookmark"><?php the_post_thumbnail(); ?></a>
<?php } ?>
<div id="categorysummary">
<?php the_excerpt(); ?>
</div>
</div>
<?php
}
} 
```

此代码获取每个帖子的缩略图和摘录。我试图让它仅在视频类别页面上显示内容。我尝试保留上面的第一个代码，复制它然后将其更改为以下内容：

```
/* muimedia_post_entry_summary video page */
if ( !function_exists( 'muimedia_post_entry_summary' ) && is_category( 'videos' )  ) {
function muimedia_post_video_entry_summary() {
?>
<div class="entry-content">
<?php the_content(); ?>
</div>
<?php
} 
```

}

正如你所看到的，我尝试了“&& is_category”，我也厌倦了“|| is_category”，并且还用它的 ID 替换了类别名称。我什至尝试将函数名称更改为“post_video_entry_summary”（老实说，我认为这个名称并不重要）。我真的不知道还能做什么:(如果有人能在这个小问题上帮助我，那对我来说意义重大！真的会。我要去吃点午餐。但是，我会做我的在接下来的 20 分钟内回到我的电脑。希望有人能找到正确的解决方案来解决这个小问题！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T21:38:38.903

使用 'in_category("video")' 作为你的 if 语句。

```
<?php 
    if (in_category('videos')) : 
?>

    // your video code here

<?php 
    else : 
?>

    // else show the current stuff

<?php 
    endif;
?> 
```